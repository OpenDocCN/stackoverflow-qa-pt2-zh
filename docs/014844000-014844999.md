# StackOverflow 问答 14844000-14844999

# php - MySQL 数据未完全显示在 html 表中。数据被切断并留下一半的字段而不是完整的字段

> ID：14844002
> 
> 赞同：1
> 
> 时间：2013-02-12T23:46:29.073
> 
> 标签：php, html-table

这是代码。

```
$result = mysql_query("SELECT * FROM situations");

echo "<table border='1'>
<tr>
<th>Case#</th>
<th>Cop(s)</th>
<th>Code</th>
<th>Vehicle/Person</th>
<th>Location</th>
<th>Division(s)</th>
</tr>";

while($row = mysql_fetch_array($result))
  {
echo "<form action=situations.php method=post>";
echo "<tr>";
echo "<td>" . $row['Case#'] . " </td>";
echo "<td>" . "<input type=text name=cop value=" . $row['Cops']. " </td>";
echo "<td>" . "<input type=text name=sector value=". $row['Code'] . " </td>";
echo "<td>" . "<input type=text name=vehicle value=" . $row['Vehicle'] ." </td>";
echo "<td>" . "<input type=text name=location value="  .$row['Location'].  " </td>";
echo "<td>" . "<input type=text name=division value=" .$row['Division'].  " </td>";
echo "<td>" . "<input type=hidden name=hidden value=" .$row['Case #'] . " </td>";
echo "<td>" . "<input type=submit name=update_situations value=Update" . " </td>";
echo "</tr>";
echo "</form>";
  }
echo "</table>"; 
```

我有它，所以我可以更新它，但我的数据没有完全显示。EX：我会在位置上有“Dukes Blvd”，但它只会显示“Dukes”，请帮忙！我是 PHP、MySQL 的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T06:11:05.340

我不同意 ntgCleaner 关于结束 PHP 的看法，尽管有时它需要额外的工作。如果您总是对引号使用相同的规则，那么这不是什么大问题，而且一段时间后您会立即识别出语法错误，或者当我得到一个时，这通常是我首先要寻找的东西。我总是以单引号开头，然后在 html 部分中添加双引号。

echo 'some code "quoted code" more code'.$variable;

您还可以使用反斜杠来标识引号 \' 以将其与错误状态分开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T23:48:58.047

您缺少引号；

```
while($row = mysql_fetch_array($result))
{
?>
<form action="situations.php" method="post">
<tr>
<td><?php echo $row['Case#']; ?></td>
<td><input type="text" name="cop" value="<?php echo htmlentities($row['Cops'], ENT_QUOTES, 'UTF-8') ; ?>"></td>
<td><input type="text" name="sector" value="<?php echo htmlentities($row['Code'], ENT_QUOTES, 'UTF-8'); ?>"></td>
<td><input type="text" name="vehicle" value="<?php echo htmlentities($row['Vehicle'], ENT_QUOTES, 'UTF-8'); ?>"></td>
<td><input type="text" name="location" value="<?php echo htmlentities($row['Location'], ENT_QUOTES, 'UTF-8'); ?>"></td>
<td><input type="text" name="division" value="<?php echo htmlentities($row['Division'], ENT_QUOTES, 'UTF-8'); ?>"></td>
<td><input type="hidden" name="hidden" value="<?php echo htmlentities($row['Case #'], ENT_QUOTES, 'UTF-8'); ?>"></td>
<td><input type="submit" name="update_situations" value="Update"></td>
</tr>
</form>
<?php
}
?>
</table> 
```

# sql - 如何同时使用带有 NOT IN 或等于的 SQL WHERE CASE？

> ID：14844006
> 
> 赞同：6
> 
> 时间：2013-02-12T23:46:48.150
> 
> 标签：sql, sql-server, tsql, case-when, in-operator

大家好（我在堆栈上的第一篇文章！），

这有效：

```
where
    Tran_date between @FromDate and @ToDate

and Range = @Range

and Store_ID =
    case when @Range = 'RangeName' then
        1234
    else
        Store_ID
    end 
```

但我怎样才能做到这一点？：

```
where
    Tran_date between @FromDate and @ToDate

and Range = @Range

and Store_ID 
    case when @Range = 'RangeName' then
        not in (1234, 5678)
    else
        Store_ID
    end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T00:53:09.247

```
where
    Tran_date between @FromDate and @ToDate

and Range = @Range

and Store_ID 
    case when @Range = 'RangeName' AND Store_Id in (1234, 5678)
        9999 -- Assumes 9999 is a non possible value.  
             -- If it is possible then pick one that isn't.
    else
        Store_ID
    end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T23:54:20.070

我想你想要：

```
AND NOT (@Range = 'RangeName' AND Store_ID IN (1234,5678)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T23:53:58.353

这个怎么样：

```
where Tran_date between @FromDate and @ToDate
    and Range = @Range

    and (@Range = 'RangeName' and Store_ID not in (1234, 5678)
        or @Range <> 'RangeName' and Store_ID = Store_ID) 
```

# linux - 如何在不成为root用户的情况下使文件在linux中可编辑

> ID：14844007
> 
> 赞同：0
> 
> 时间：2013-02-12T23:46:47.750
> 
> 标签：linux, gedit

我正在使用 vim 编辑器处理放置在目录 /etc/asterisk 中的文件，每次我必须进行一些编辑时，我必须去终端成为 root 并在 vim 编辑器中打开文件并执行编辑，但如果我直接这样做在 gedit 中从此类目录（/etc/asterisk）打开文件并在文件中执行编辑，但如果选择另存为选项，则不显示保存选项消息变为“您需要成为此类操作的 root”。有什么方法可以直接从 gedit 打开这些文件（放置在 /etc/asterisk 中）并保存更改而不进入终端

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T23:48:09.197

您始终可以`sudo gedit`从终端以`gedit`root 身份启动以编辑文件。

# linq - Linq 到实体更新查询不更新表

> ID：14844008
> 
> 赞同：0
> 
> 时间：2013-02-12T23:46:50.933
> 
> 标签：linq, c#-4.0

它只是一个简单的 Linq to Entity 更新查询，我尝试使用以下代码，但它不会更新数据库中的“用户”列。

它甚至没有抛出任何异常，请指出我这里缺少什么。

```
MyEntities db = new MyEntities ();

var query = from SEVTs in db.SEVTs
            where SESID == "4747747"
            select SEVTs;

foreach (var SEVTs in query) {
  SEVTs.USER = "Test";
}

db.SaveChanges(); 
```

很有趣，当我在 sql server 中尝试以下查询时，它不会更新记录

```
update Schedwin.SEVT  
set
USER3='Test'
Where
SESID='4747747' // here i pass the value as a string 
```

SESID 数据类型是 CHAR 并且它是一个主键。如果我将值作为 SESID=4747747 传递，那么它会更新该记录。

请忽略我的问题。

这里我错过了我的输入值 SESID == "4747747" //这有空格，这就是它没有更新该特定记录的原因。

谢谢大家

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T08:05:18.677

你也不是在修改`SEVTs.USER`，而是一些局部变量。

`using`（顺便说一句：在构造中创建上下文）

# javascript - 如何设置选择语句的值？

> ID：14844012
> 
> 赞同：0
> 
> 时间：2013-02-12T23:46:58.027
> 
> 标签：javascript, angularjs

[http://jsfiddle.net/WcJbu/](http://jsfiddle.net/WcJbu/)

当我选择一个人时，我希望 favoriteThing 选择器显示他们当前的选择。

```
 <div ng-controller='MyController'>
        <select ng-model='data.selectedPerson' ng-options='person.name for person in data.people'></select>

        <span ...> likes </span>

        <select ... ng-model='data.favoriteThing' ng-options='thing.name for thing in data.things'></select>
    </div> 
```

* * *

```
$scope.data.people = [{
    name: 'Tom',
    id: 1,
    favorite_thing_id: 1
}, {
    name: 'Jill',
    id: 2,
    favorite_thing_id: 3
}];

$scope.data.things = [{
    name: 'Snails',
    id: 1
}, {
    name: 'Puppies',
    id: 2
}, {
    name: 'Flowers',
    id: 3
}]; 
```

我需要设置服务并添加手表，还是有[好]方法可以直接在选择中使用喜爱的东西ID？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T00:19:56.057

将第二个选择更改为：

```
<select ng-show='data.selectedPerson' ng-model='data.selectedPerson.favorite_thing_id' 
        ng-options='thing.id as thing.name for thing in data.things'></select> 
```

添加`thing.id as`到`ng-options`将允许您`data.things`根据它们的 id 而不是它们的引用来选择条目。更改`ng-model`to`data.selectedPerson.favorite_thing_id`将使 angular 自动更改为基于 的正确选项`selectedPerson.favorite_thing_id`。

**jsfiddle**：http: [//jsfiddle.net/bmleite/4Qf63/](http://jsfiddle.net/bmleite/4Qf63/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T18:37:39.673

[http://jsfiddle.net/4Qf63/2/](http://jsfiddle.net/4Qf63/2/)做我想要的 - 但它非常不令人满意。

```
$scope.$watch(function() {
    return $scope.data.selectedPerson;
}, function(newValue) {
    if (newValue) {
        $scope.data.thing = $filter('filter')($scope.data.things, {id: newValue.favorite_thing_id})[0];
    }
}) 
```

我希望在 select 语句中看到所有这些都是可能的。也许我会尝试写一个指令。关联 = {key: matchValue} 这样我就可以做到

```
<select ... ng-model='data.thing' ng-options='t.name for t in data.things' association='{id: "data.selectedPerson.favorite_thing_id"}'></select> 
```

# passenger - 乘客错误请安装mysql2适配器：`gem install activerecord-mysql2-adapter`，ruby 1.9.2 rails 2.3.8

> ID：14844021
> 
> 赞同：0
> 
> 时间：2013-02-12T23:47:54.770
> 
> 标签：passenger

我有一个问题 - 我有 Ubuntu 12.04 服务器，我正在尝试在其上托管 ruby​​ on rails 应用程序。

我选择了 apache 的乘客。我已经安装了 RVM 并制作了 gemset "ruby-1.9.2-p320@myapp" 并且它可以工作。我有非常旧的 rails 2.3.8 应用程序，它只是为我存档，我没有时间更新它。

我有乘客错误`Please install the mysql2 adapter: 'gem install activerecord-mysql2-adapter' (no such file to load -- active_record/connection_adapters/mysql2_adapter)`

我的“宝石清单”：

```
actionmailer (2.3.8)
actionpack (2.3.8)
activerecord (2.3.8)
activerecord-mysql2-adapter (0.0.3)
activeresource (2.3.8)
activesupport (2.3.8)
bundler (1.2.3)
daemon_controller (1.1.1)
fastthread (1.0.7)
mislav-will_paginate (2.3.11)
mysql2 (0.2.7)
passenger (3.0.19)
rack (1.1.6)
rails (2.3.8)
rake (10.0.3)
rubygems-bundler (1.1.0)
rubygems-update (1.8.25, 1.3.5)
rvm (1.11.3.6)
sqlite3 (1.3.7)
sqlite3-ruby (1.3.3)
thoughtbot-paperclip (2.3.1)
will_paginate (3.0.4) 
```

我可以使用`ruby script/console`获取数据库记录，因此建立了与数据库的连接并且它可以工作。

有什么解决办法吗？谢谢你。

如果需要任何额外信息，将尽快提供。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T13:43:15.407

这是我对Passenger和Apache的错误配置。只要按照这些loveley教程，一切都会好的：[http ://everydayrails.com/2010/09/13/rvm-project-gemsets.html](http://everydayrails.com/2010/09/13/rvm-project-gemsets.html)

如果您之后遇到旧版 Rails 应用程序的 UTF-8 错误问题，请在此处阅读：[http ://railsforum.com/viewtopic.php?id=42009](http://railsforum.com/viewtopic.php?id=42009)

# php - 在通过 PHP/shell 使用 php_serial 库发送命令时，如何避免需要保持 Arduino 串行监视器打开？

> ID：14844024
> 
> 赞同：2
> 
> 时间：2013-02-12T23:48:07.607
> 
> 标签：php, shell, serial-port, arduino, tail

我正在尝试使用 Remy 在 Mac OS X 机器上编写的[php_serial 类](http://code.google.com/p/php-serial/)通过 PHP向[Arduino Uno](http://arduino.cc/en/Main/ArduinoBoardUno)发送串行命令，并且由于某种原因，它仅在我打开 Arduino 程序的串行监视器时才有效。

我尝试使用 10 µF 电容器将复位引脚桥接到接地引脚（这应该可以有效地防止自动复位/DTR 脉冲否则会导致问题），但仍然没有成功。

此外，当我尾随端口时，它在命令行上什么也没有显示，但如果我打开它，它确实会在串行监视器中显示来自 Arduino 的响应。

我怎样才能解决这个问题？

刚遇到这个问题，希望有人能帮帮我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-20T21:19:33.770

我有一个类似的问题，该`tail -f`命令似乎仅在串行监视器打开时才起作用。我在 arduino 上运行简单的 digitalRead 示例，如果我打开命令 shell 并`tail -f /dev/tty.usbmodemfd141`在串行监视器运行时运行，我可以看到输出。一旦我停止串行监视器，输出就会停止。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-28T03:56:13.150

我在使用 pySerial 时遇到了类似的问题。我的串行命令只有在我打开显示器时才能工作。我通过在打开串行端口之后和写入之前添加睡眠来修复它。我会试一试，在使用任何 php_serial 的 open 调用之后添加 1s 睡眠，然后再尝试写入或读取它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T15:20:21.407

这是图书馆的问题。一次应该只有一个程序可以使用串口，​​所以问题出在库中。他的图书馆自 2010 年以来似乎已经死了，所以只需尝试另一个图书馆，或开始寻找其中的问题

# php - 在php中比较数字的最快方法

> ID：14844026
> 
> 赞同：0
> 
> 时间：2013-02-12T23:48:11.117
> 
> 标签：php, optimization

我有一个需要运行几百万次的循环；准确地说是10,967,700。在其中，我正在做一些检查，包括：

数字 1 小于数字 2 数字 1 小于或等于数字 3 数字 4 大于数字 5

我想知道是否可以执行任何优化/调整以更快地执行这些检查。或者这是一个荒谬的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T15:08:24.970

根据您的代码段，我建议您进行以下更改：

使用`for`-loop 而不是`foreach`像这个例子：

```
$key = array_keys($aHash);
$size = sizeOf($key);
for ($i=0; $i<$size; $i++) $aHash[$key[$i]] .= "a"; 
```

这个`foreach`循环慢了 4.7 倍。（见最后的例子 - [http://www.phpbench.com/](http://www.phpbench.com/)）

`foreach($aHash as $key=>$val) $aHash[$key] .= "a";`

除了检查一个值是否被设置，`empty()`-method 比`isset()`.

使用`if and elseif (using ===)`也比`(==)`

我希望我能帮助你。

（性能来源：[http](http://www.phpbench.com/) ://www.phpbench.com/ ）

# c - 数组作为函数的参数

> ID：14844028
> 
> 赞同：1
> 
> 时间：2013-02-12T23:48:16.160
> 
> 标签：c, pointers

当数组作为参数传递时，编译器会生成一个指向数组第一个元素的指针，并且该指针被传递给函数而不是整个数组，所以我的问题是为什么我们可以在打印时打印数组的值`array[i]`？

```
void FunctionApi(int array[])
{
    int i;
    for(i=0;i<8;i++)
    {
         printf("Value =%d\n",array[i]);
         //I understand the reason behind the following two lines but not the above          line.
         //printf("noOfElementsInArray=%d\n",*array);
         //*array++;
    }

}

int main()
{
    int array[8]={2,8,10,1,0,1,5,3};
    int noOfElementsInArray;
    noOfElementsInArray=sizeof(array)/sizeof(int); 
    printf("noOfElementsInArray=%d\n",noOfElementsInArray);
    FunctionApi(array);
    return 0;   

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T23:50:33.833

数组的元素一起存储在连续的位置。这就是为什么知道初始元素的地址就足以知道其余元素的位置。

唯一的技巧是知道数组有多少元素。这不与数组一起传递，因此您需要单独传递它。这对您的程序来说不是问题，因为您将其硬编码为 8，但通常如果您将数组作为参数传递，您还需要将其大小作为单独的参数传递：

```
void FunctionApi(int array[], size_t count) {
    int i;
    for(i=0;i<count;i++) {
        printf("Value =%d\n",array[i]);
    }
} 
```

就`noOfElementsInArray=sizeof(array)/sizeof(int);`计算而言，这个技巧只适用于调用者，其中`array`是一个数组，而不是指向数组初始元素的指针。在这个位置，编译器知道数组的大小是 a 的 8 倍`int`，因此除以 就可以`sizeof(int)`得到数组中元素的数量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T23:50:24.593

因为`array[i]`在语法上等价于`*(array + i)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T23:51:00.010

当您传递数组的名称时，这是指向第一个元素以及整个数组的指针。因此，当您访问不同的元素时，`array[i]`您访问的连续数据相当于`*(array + i)`.

# c# - 复杂的正则表达式 C# 或 perl

> ID：14844030
> 
> 赞同：0
> 
> 时间：2013-02-12T23:48:33.117
> 
> 标签：c#, regex, perl, pattern-matching, regex-lookarounds

我在一个文件中有以下 SQL 文本。目标是从文件中识别数据库表名称。下面只是一个通用示例，我正在寻找通用解决方案，无论是 C# 还是 Perl。我没有做很多正则表达式，因此如果有人给我一个开始，我将不胜感激

```
select
a.xyz,
b.xyz,c.xyz,
d.xyz
from db1.test1 a
inner join db2.test2 b
on a.xyz = b.xyz
inner join
(
select a.xyz
from db1.test3) as c
on a.xyz=c.xyz
left outer join db1.test4 d
on c.xyz = d.xyz 
```

所以基本上，我需要自动找出 SQL 中所有表的名称。在这种情况下，test1、test2、test3 和 test4

我知道模式是表名前面有“from”、“inner join”、“left outer join”，然后是数据库名称（例如 db1、db2 等），然后是文字 '。和表名。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T23:56:05.373

这是将在示例中找到您的表名的 C# 代码：

```
var matches = Regex.Matches(yourString, @"(from|inner\s+join|left\s+outer\s+join)\s+[a-zA-Z0-9]+\s*\.\s*(?<table>[a-zA-Z0-9]+)(\s+[a-zA-Z0-9]+)?(\s*,\s*[a-zA-Z0-9]+\s*\.\s*(?<table>[a-zA-Z0-9]+)(\s+[a-zA-Z0-9]+)?)*", RegexOptions.ExplicitCapture);
foreach (Match match in matches)
{
    foreach (Capture capture in match.Groups["table"].Captures)
    {
        string tableName = capture.Value;
    }
} 
```

相同的正则表达式至少会让你在 Perl 中指向正确的方向，因为正则表达式大多是交叉兼容的。

编辑：更新为（笨拙地？）查找以逗号分隔的多个表，并结合艾伦的建议用于`"table"`查找组和标记`ExplicitCapture`。如果遇到更多问题，您可能希望按照[正则表达式中的建议查找查询中的所有表名](https://stackoverflow.com/questions/281041/regular-expression-to-find-all-table-names-in-a-query)并找到 SQL 解析器，而不是尝试使用正则表达式。

# python - 有没有办法使用 Python 抓取亚马逊产品列表页面？

> ID：14844032
> 
> 赞同：1
> 
> 时间：2013-02-12T23:48:37.833
> 
> 标签：python, amazon, urlopen

我正在尝试抓取显示特定产品的供应商和价格的产品列表页面，但 urllib.urlopen 不起作用 - 它可以在亚马逊上的所有其他页面上工作，但我有点想知道亚马逊的机器人是否阻止在产品列表页面上抓取。任何人都可以验证这一点吗？使用 Chrome 我仍然可以查看页面源...

这是我想要抓取的产品列表页面示例：[http ://www.amazon.com/gp/offer-listing/B007E84H96/ref=dp_olp_new?ie=UTF8&condition=new](http://www.amazon.com/gp/offer-listing/B007E84H96/ref=dp_olp_new?ie=UTF8&condition=new)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T16:56:19.887

尝试`curl -I`该 URL 会返回`MethodNotAllowed`：

```
$ curl -I 'http://www.amazon.com/gp/offer-listing/B007E84H96/ref=dp_olp_new?ie=UTF8&condition=new' 
HTTP/1.1 405 MethodNotAllowed
Date: Wed, 13 Feb 2013 16:41:08 GMT
Server: Server
x-amz-id-1: 1WKZG9N0SE87E3KFG6YV
allow: POST, GET
x-amz-id-2: Apluv2QBzzrmXlRWjlClRGsQQ1TbwsxObe2hxfdrGhO/OQziI/aIT3vkVjCPn+qz
Vary: Accept-Encoding,User-Agent
Content-Type: text/html; charset=ISO-8859-1 
```

并且使用开关添加`User-Agent`字符串`-A`不会影响该返回值。

您可以尝试使用不同的 http 标头，看看是否可以找到通过的内容。但很明显，亚马逊不希望你从他们的产品页面筛选价格。一点点谷歌搜索就会出现这个页面：

[http://www.distil.it/amazon-cracks-down-on-price-scraping/#.URvBFo4ry0s](http://www.distil.it/amazon-cracks-down-on-price-scraping/#.URvBFo4ry0s)

> 据第三方开发商称，亚马逊在没有大张旗鼓或警告的情况下，于 6 月开始执行一项长期政策，禁止屏幕抓取工具直接从其市场获取列表信息，这是商家重新定价服务提供商最喜欢的工具。

另请注意，亚马逊为其附属公司提供了一个 API——在右侧列的“相关”问题链接中，有一些关于从 python 使用该 API 的相关问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-13T00:00:33.853

你听说过美汤吗？你可能会从中获得一些里程...

[http://www.crummy.com/software/BeautifulSoup/](http://www.crummy.com/software/BeautifulSoup/)

* * *

更多细节：[BeautifulSoup 抓取可见网页文本](https://stackoverflow.com/questions/1936466/beautifulsoup-grab-visible-webpage-text)

# ios - 在 Cocos2d TMXTiledMap 中使用 Tileset 图像属性

> ID：14844034
> 
> 赞同：1
> 
> 时间：2013-02-12T23:48:41.227
> 
> 标签：ios, cocos2d-iphone

我正在开发一个 iOS 游戏，它使用 Cocos2d`TMXTiledMap`来读取 Tiled Application 中生成的等距地图。

在 Tiled 中，您可以为 tileset 中的每个图像添加属性（即显示在屏幕右下角的图像）

对我来说，使用这些属性来帮助确定此图块类型是否可由游戏角色遍历是有意义的。

例如，如果图块 3,5 使用的是草图像，那么陆基角色可以走到那里。

相反，如果图块 4,8 使用水的图像，则陆基角色无法走到那里。

我曾希望通过在草地和水砖上创建一个属性来实现这一点，称为`terrain_type`土地 0 和水 1。然后（我曾希望）我可以在运行时访问 tile 3,5 并且以某种方式知道 tile 3,5 使用了具有以下属性的草图像`terrain_type=0`

现在，我意识到还有其他技术可用于完成相同的事情（想到对象层），但这似乎是最好的方法。特别是当您添加多个瓷砖层并且您想知道瓷砖 3,5 上面既有草又有墙时。

我的问题：这可能吗？我将如何去做。或者，我是否误解了 Tiled 和`TMXTiledMap`应该如何工作？

非常感激...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T06:07:54.967

惊人。在我发布这个问题之前，我花了很多时间试图让它发挥作用，当然，几个小时后我就明白了。关键是使用 CCTMXMapInfo 类。

无论如何，这是解决方案，因为我认为这对其他人有用：

1.  在 Tiled 应用程序中创建一个具有名为“bottom”的切片图层的地图
2.  通过右键单击每个图像并选择“平铺属性”，在名为“平铺集”（右下角）的部分中为每个平铺图像添加一个属性
3.  将属性命名为“terrain_type”并将值设置为您喜欢的任何值（例如，terrain_type = 0 表示陆地或terrain_type = 1 表示水）
4.  使用这些图像绘制您的瓷砖地图并保存

使用此代码读取位置 3,5 处单个图块的属性：

```
//read the tile map
TMXTiledMap *tileMap = [CCTMXTiledMap tiledMapWithTMXFile:@"sample_map.tmx"];

//get the bottom layer from the tileMap
CCTMXLayer *bottomLayer = [tileMap layerNamed:@"bottom"];

//get CCTMXMapInfo object -- TMXTiledMap DOES NOT Contain the tile image properties
CCTMXMapInfo * mapInfo = [CCTMXMapInfo formatWithTMXFile: @"sample_map.tmx"];

//get tile id of the tile image used at this coordinate (3, 5) in this layer
int tileID = [bottomLayer tileGIDAt: ccp(3, 5)];

//get the properties for that tile image
NSDictionary *properties = [mapInfo.tileProperties objectForKey:[NSNumber numberWithInt:tileID] ];

//get the terrain_type property
NSString *terrainType = [properties objectForKey:@"terrain_type"]; 
```

# php - 为什么“赌场”这个词会破坏我的表格？

> ID：14844036
> 
> 赞同：0
> 
> 时间：2013-02-12T23:48:57.167
> 
> 标签：php, forms, wordpress

这里有一个可能会让你摸不着头脑——它肯定有我！

我正在使用表单向 WordPress 的“update_post_meta”函数提交内容。

表单本身非常简单，只有一系列输入和文本区域字段。提交时，该操作将定向到同一页面，一些 PHP 在该页面上接管以`$_POST`在提交到 Wordpress 之前对信息进行验证。现在一切正常，除了一个非常奇怪的错误：

`404 error`每当您在任何字段中使用“赌场”一词时，即使地址栏显示一个完全有效的 URL ，页面也会刷新并抛出一个，而不是提交表单！我不相信这是我的 PHP 代码，因为我认为我们在这个过程中没有走那么远，所以我认为这是服务器的事情，但我无法想象为什么。这发生在整个站点的任何形式上，我在由同一托管公司（Namecheap，FYI）托管的其他站点上也得到了相同的结果。

所以，问题是，任何人都可以提出一个理由，为什么特别发送这个词`$_POST`会破坏表格并导致错误？

PS。我目前正在使用`replace()`javascript 函数解决此问题，因此“赌场”永远不会随表单一起发送，但如果“赌场”问题能够解决，我将不胜感激。它至少会阻止我对此感到困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-10-23T07:00:10.287

这是因为被识别为垃圾邮件的概率很高。赌场应该用好，因为有很多网站不能用这个词本身。使用其他国家的语言是通过像我一样公开说“[우리카지노][1]”来宣传它的方法之一。我希望你能回答你的问题。

# javascript - WinJS：检查是否在调试模式下运行

> ID：14844039
> 
> 赞同：7
> 
> 时间：2013-02-12T23:49:04.043
> 
> 标签：javascript, windows-8, winjs

我需要这个，因为许可证信息，我正在寻找一种方法来了解应用程序是在调试模式下运行还是在生产模式下运行。

如果应用程序在调试模式下运行，我需要使用，`Windows.ApplicationModel.Store.CurrentAppSimulator`否则我需要使用`Windows.ApplicationModel.Store.CurrentApp`

所以，我正在寻找函数isDebug的实现：

```
var currentAPP;
if (isDebug()) {
    currentApp = Windows.ApplicationModel.Store.CurrentAppSimulator;
} else {
    currentApp = Windows.ApplicationModel.Store.CurrentApp;
} 
```

有什么技巧吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T02:36:55.663

`Debug.debuggerEnabled`告诉您是否附加了调试器。

请注意，这与“它被编译为调试”不同——因为 JS 没有被编译，这并不是一个真正有意义的指标。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-26T17:03:24.690

鉴于这两种方法都不完全可靠，还有另一种方法，您可以通过它直接从 Visual Studio 中获取构建目标设置，然后使用它来引入调试或发布文件。

就是这样。在项目中创建两个 .js 文件（在 js-buildinfo 文件夹中的 debug.js 和 release.js）并确保通过将它们的 Package Action 设置为 None 而不是 Content 将它们从最终包中排除（右键单击，选择 Properties，您将在解决方案资源管理器下看到这些操作）。

以下是基本文件内容：

调试.js：

```
(function () {
     "use strict"; 

    WinJS.Namespace.define("BuildInfo", {
         isDebugBuild: true,
         isReleaseBuild: false, 

         config: "Debug",
         currentApp: Windows.ApplicationModel.Store.CurrentAppSimulator 

        /*
          * Include debug-only data, service URIs, access tokens, accounts, etc.
          */
     });
 })(); 
```

发布.js：

```
(function () {
     "use strict"; 

    WinJS.Namespace.define("BuildInfo", {
         isDebugBuild: false,
         isReleaseBuild: true, 

         config: "Release",
         currentApp: Windows.ApplicationModel.Store.CurrentApp 

        /*
          * Include release-only data, service URIs, access tokens, accounts, etc.        
          */
     });
 })(); 
```

然后，您可以在代码中需要区分的任何地方使用 BuildInfo.*。更好的是，尽可能多地在这些文件中封装特定于构建的内容，例如 CurrentApp 与 CurrentAppSimulator，对 WinJS.Log.startLog 的调用等。

然后使用 MSBuild 任务选择性地将一个或另一个文件复制到包中的通用名称（例如 buildinfo.js）。为此，需要在项目文件中添加一个 BeforeBuild 操作。目前，VS 不允许通过 UI 对 JS 项目进行自定义构建配置，所以你必须做到以下几点：

*   在VS中右键单击并卸载项目
*   右键单击并手动编辑项目
*   进行以下更改
*   右键单击并重新加载项目

编辑 .jsproj 文件，我在项目文件的 ItemGroup 下添加了以下条目：

```
 <ItemGroup>
     <BuildFlagSource Include="js-buildinfo \$(Configuration).js" />
   </ItemGroup>
   <ItemGroup>
     <BuildFlagDestination Include="js\buildinfo.js" />
   </ItemGroup> 
```

然后再往下，有一个部分被注释了——你取消注释它并添加这里显示的元素：

```
 <Target Name="BeforeBuild">
    <Copy SourceFiles="@(BuildFlagSource)" DestinationFiles="@(BuildFlagDestination)" OverwriteReadOnlyFiles="true" SkipUnchangedFiles="true" />
   </Target>
   <Target Name="AfterBuild">
   </Target>
   <PropertyGroup>
     <DisableFastUpToDateCheck>true</DisableFastUpToDateCheck>
   </PropertyGroup> 
```

理想情况下，您应该在项目中将 buildinfo.js 设为只读，以防止编辑将在构建中覆盖的内容。

您可以在任何需要它的 HTML 文件中使用这一行（通常在其他使用 BuildInfo 属性的 .js 文件之前）：

```
<script src="/js/buildinfo.js"></script> 
```

我喜欢这个解决方案的地方：

*   它是可扩展的，因为您可以将任何您想要的内容添加到 debug.js 和 release.js 文件中。
*   BuildInfo 命名空间可以包含执行特定于构建工作的方法，这有时是必要的。
*   它可以隔离这些文件中的所有特定于构建的代码，而不是像只使用一个简单的标志那样在应用程序的其余部分中乱扔垃圾。我在这里仍然有一个标志作为选项，但你根本不必使用它。
*   无论应用程序如何部署，它都能正常工作。
*   它不依赖于您必须为 x86、x64 和 ARM 生成的任何已编译的 VS 扩展。

一些缺点：

*   必须手动编辑项目并进行一些一次性配置，例如添加 buildinfo.js 并将其设为只读。
*   您必须确保 debug.js 和 release.js 文件定义相同的内容。
*   考虑到手动步骤，感觉有点脆弱。

但它确实有效，并且是我使用其他语言最接近预编译指令的方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-28T23:27:17.647

看看[WinJS是否有#DEBUG或#RELEASE指令？](https://stackoverflow.com/questions/13703378/winjs-are-there-debug-or-release-directives)

那里的答案引用了一个方便的 NuGet 包 ( [https://www.nuget.org/packages/WinRT-JsDebugSymbols/1.0.0](https://www.nuget.org/packages/WinRT-JsDebugSymbols/1.0.0) )，一旦在您的应用程序中添加和引用该包，就可以简单地检查它是否使用 Debug 编译轮廓：

```
if (Debug.isDebugBuild) {
     //spot to put debug build only code
} 
```

# mongodb - 在 Meteor 中使用副本集

> ID：14844040
> 
> 赞同：0
> 
> 时间：2013-02-12T23:49:11.553
> 
> 标签：mongodb, meteor

使用 Mongoose，您可以像这样连接到副本集：

```
mongoose.connect('mongodb://username:password@host:port/database,mongodb://username:password@host:port,mongodb://username:password@host:port?options...' [, options]); 
```

如何使用 Meteor 连接到外部 MongoDB 副本集？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-20T15:08:12.767

您可以简单地`MONGO_URL`使用配置的副本集导出。而且效果很好。确保使用流星版本 0.6.4 或更高版本。

请参阅我的[文章进行配置](http://meteorhacks.com/mongodb-replica-sets-with-meteor.html)。

# cakephp - 在 CakePHP 2.x 中烘焙 JavaScript 文件

> ID：14844044
> 
> 赞同：0
> 
> 时间：2013-02-12T23:49:21.697
> 
> 标签：cakephp, cakephp-2.0, cakephp-bake

我想知道是否可以在 CakePHP 中烘焙 JS 文件？我已经编写了一些符合我们的布局和标准的自定义蛋糕烘焙模板，并处理了我们的控制器和视图中涉及的杂物。我想更进一步，烘焙我们大多数 javascript 类中的一些方法，例如 index、view、add 和 save。

是否可以这样做并输出到 app/webroot/js 中？

我想到的一种解决方法是将 js 输出直接放入索引文件中，然后将其移动到其各自的文件中，但我想要一个自动解决方案。

对此有什么想法？

# jquery-ui - jQuery UI 不适用于手风琴

> ID：14844046
> 
> 赞同：1
> 
> 时间：2013-02-12T23:49:22.787
> 
> 标签：jquery-ui

我的 html 看起来像这样

```
<div id="menu">
        <h3>Section 1</h3>
        <div>
            <p>I'm the first section!</p>
        </div>
        <h3>Section 2</h3>
        <div>
            <p>I'm the second section!</p>
        </div>
        <h3>Section 3</h3>
        <div>
            <p>I'm the third section!</p>
        </div>
    </div> 
```

这是我的 js

```
$(document).ready(function() {
    $('#menu').accordion();
}); 
```

不知何故，即使我直接从 codeacademy 拿走了它，我的手风琴也不起作用。以前，我制作了自己的手风琴，但它不起作用，所以我把它从我第一次学习它的 codeacademy 上取下来，但它仍然不起作用。我在谷歌托管。这有什么问题吗？

我尝试添加标题：'h3'

但它仍然没有效果。它看起来就像是 h3 和 div 的替代品。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T03:59:52.153

您到 jquery 的链接应该在 jquery UI 之前，否则它将不起作用。

# c# - Linq反转父子序列

> ID：14844050
> 
> 赞同：-2
> 
> 时间：2013-02-12T23:49:40.740
> 
> 标签：c#, linq

我有一系列这样的对象

```
A1 - B1, B2, B3
A2 - B1
A3 - B1, B2 
```

（A 是父对象并包含 B 子对象的集合）

我想反转这个，以便子对象（B）成为父对象，即

```
B1 - A1, A2, A3
B2 - A1, A3
B3 - A1 
```

任何人都知道正确的 linq 查询来得到这个结果吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T00:08:53.677

起初，您可以在没有 linq 的情况下轻松地用自己的双手完成此操作：

```
//init original dictionary
var dict = new Dictionary<string, List<string>>
{
    {"A1",new List<string> { "B1", "B2", "B3" }},
    {"A2",new List<string> { "B1" }},
    {"A3",new List<string> { "B1", "B2"}},
};
//do the task
var newdict = new Dictionary<string, List<string>>();
foreach (var p in dict)
{
    foreach (string s in p.Value)
    {
        if (!newdict.ContainsKey(s))
            newdict[s] = new List<string>();
        newdict[s].Add(p.Key);
    }
}
//see what we've got
foreach (var p in newdict)
{
    Console.WriteLine(p.Key);
    foreach (string s in p.Value)
    {
        Console.Write(s + "\t");
    }
    Console.WriteLine();
}
Console.ReadLine(); 
```

其次，linq 也可以完成这项工作：

```
var result = dict.SelectMany(p => p.Value
                                   .Select(s => new
                                   {
                                       Key = p.Key,
                                       Value = s
                                   }))
                    .GroupBy(a => a.Value)
                    .ToDictionary(g => g.Key,
                                  g => g.Select(a => a.Key)
                                        .ToList()); 
```

我在哪里

*   用于`SelectMany`获取匿名对象的序列，表示键对和原始值中的每个值`List<string>`

*   用于`GroupBy`实际反转列表并获取对的序列，按值分组，而不是键

*   用于`ToDictionary`创建与原始结构相同的结构，即`Dictionary<string,List<string>>`.

PS：

> 任何人都知道正确的 linq 查询来得到这个结果吗？

我想没有人知道，但很多人可以弥补 - 这是你首先要做的，那就是尝试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T03:39:05.803

> 任何人都知道正确的 linq 查询来得到这个结果吗？

LINQ 相当直截了当，并且紧跟@Konstantin 的回答……

```
var dict = new Dictionary<string, List<string>>
{
    {"A1",new List<string> { "B1", "B2", "B3" }},
    {"A2",new List<string> { "B1" }},
    {"A3",new List<string> { "B1", "B2"}},
};

IEnumerable<IGrouping<string,string>> inverted =
    from kvp in dict
    from child in kvp.Value
    group kvp.Key by child; 
```

有`IGrouping<string,string>`一个字符串`Key`属性，对应于 中的唯一子级`dict`。在这种`IGrouping<string,string>`情况`IEnumerable<string>`下，这是父母要求的。换句话说，这个 IGrouping 很像`Dictionary<string,List<string>>`我们开始使用的原始 IGrouping。有趣的是，select 子句是不必要的，因为语言规范允许查询以 group-by 结尾。

此外，如果需要字典而不是 IGrouping，则 ToDictionary 扩展使这变得简单：

```
Dictionary<string,List<string>> invertedDict = 
    inverted.ToDictionary(i => i.Key, i => i.ToList()); 
```

# sql - 从 SQL 日期时间列构建 SSRS 时间序列报告

> ID：14844054
> 
> 赞同：1
> 
> 时间：2013-02-12T23:50:01.273
> 
> 标签：sql, ssrs-2008, reporting-services

我需要创建一个 SSRS 报告，其中用户指定开始和结束日期（例如 2012 年 3 月至 2012 年 7 月），结果是具有以下标题的报告：

```
 User  Department  Product  Mar-12  Apr-12  May-12  Jun-12  Jul-12 
```

日期存储在我用来构建时间序列报告的 SQL 表中的 datetime 列（例如 2012-06-11 14:48:04.787）中。

我需要先转换/转置我的 SQL 表吗？或者我应该在 SSRS 中处理这个？

非常感谢您的建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T23:59:59.500

根据您的问题，您的所有日期似乎都在一个日期时间列中，并且您尝试在单个报告中显示它们，格式为一个月，报告列根据月份分组和重命名。这是一个支点，我认为您无法在 SSRS 中做到这一点。在 SSRS 获取数据集之前，数据集已经需要进行旋转。

所以，对我来说，这听起来像是你必须在 SSRS 之前和之后做的事情。我用一个月中的几天做了一个类似的报告。 [你可以在这里看到获胜的答案。](https://stackoverflow.com/a/8513270/261997)而不是一年中的几个月。

通过您的逻辑思考，我认为您可能必须使用枢轴构建查询，然后发送到 SSRS。在 SSRS 方面，所有 12 个月都需要 12 列，然后放置一些逻辑来隐藏那些没有获取数据的列。您最初的支点需要足够聪明才能度过空旷的几个月，这样 SSRS 才不会出错。最终结果看起来是一样的，但需要预先进行大量的预想和设计工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T23:53:04.513

您使用 SSRS 进行处理 - 您可以在 GUI 编辑器（BIDS）中设计它，您也可以使用 VBasic 代码自定义事物（即日期和逻辑）

看起来你需要一个介绍，我真的推荐这个[视频](http://www.youtube.com/watch?v=vB9iDurRtRM)

# php - 在新页面上回显消息

> ID：14844055
> 
> 赞同：0
> 
> 时间：2013-02-12T23:50:02.220
> 
> 标签：php, html

我想在重定向后在新页面上回显一条消息。但我只希望消息在重新加载（重定向）后显示一次，并且在下一次重新加载时我希望消息消失。这是可能吗？我给你举个例子：

```
$_SESSION['message'] = "entry deleted"
   header("location: anotherpage.html") 
```

在“anotherpage.php”上

```
echo "$_SESSION['message']" // upon next reload $_SESSION['message'] = ""; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T23:51:53.813

您可以检查消息是否已设置且有效

```
if (isset($_SESSION['message']) && $_SESSION['message']) {
    echo $_SESSION['message'];
    $_SESSION['message'] = false;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T23:51:59.400

它应该按照您的建议工作。（如果我没听错的话）。

简单地：

*重定向页面*：

```
$_SESSION['message'] = 'test';
header('Location: anotherpage.php'); 
```

*在“anotherpage.php”上*：

```
echo $_SESSION['message'];
$_SESSION['message'] = ''; // message will being empty on further reloads 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T00:07:41.683

```
echo $_SESSION['message'];
unset($_SESSION['message']); 
```

但我更喜欢添加一个功能来显示消息，例如：

```
function setMessage($msg_body, $css_style = 'normalMsg') {

    $_SESSION['messages'][$css_style][] = $msg_body;

}

function showMessages() {

    if (empty($_SESSION['messages'])) return;

    foreach ($_SESSION['messages'] as $css_style=>$messages) {
        echo '<div class="'.$css_style.'">';
        echo implode($messages,'<br>');
        echo '</div>';
    }
    unset($_SESSION['messages']);

} 
```

# powershell - 了解 Powershell 尝试 Catch

> ID：14844060
> 
> 赞同：1
> 
> 时间：2013-02-12T23:50:24.953
> 
> 标签：powershell, try-catch

我在理解 try、catch 语句的使用时遇到问题。

我想将其用作一般错误检测案例，以便给定函数中存在任何问题，脚本将输出“服务器脱机”

下面的代码片段查询服务器上的 WMI 对象以获取其 HDD 列表并将其格式化为表格。如果没有服务器或 WMI 不可用，我希望将“服务器脱机”附加到 txt 输出文件。

目前，当出现错误时，永远不会调用 catch 语句。

try catch 可以这样用吗？

```
try {
    Get-WmiObject Win32_LogicalDisk -ComputerName  $server   | ft $server,deviceid,@{Label="Size(GB)";Expression={($_.Size/ 1gb) -as [int]}},@{Label="FreeSpace(Mb)";Expression={($_.FreeSpace/1mb) -as [int]}} -auto  | Out-File  c:\temp\ServersHDDAudit_OUTPUT-$a-$b.txt -Append

}
catch {
    $server + ": Server Offline" | Out-File  c:\temp\ServersHDDAudit_OUTPUT-$a-$b.txt -Append 
} 
```

塞缪尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T04:45:09.123

您可以在我的[另](https://stackoverflow.com/a/6314294/608772)一篇文章中找到相关信息，但是当您在 PowerShell 中编写 CmdLet 时，您可以决定抛出异常或管理错误。`Get-WmiObject` 管理错误，以便写入错误并返回一个值。您可以要求它“静默继续”并抛出您自己的异常。

```
try
{
  $ld = Get-WmiObject Win32_LogicalDisk -ComputerName  $server -ErrorAction SilentlyContinue
  if ($ld -ne $null)
  {
    $ld | ft $server,deviceid,@{Label="Size(GB)";Expression={($_.Size/ 1gb) -as [int]}},@{Label="FreeSpace(Mb)";Expression={($_.FreeSpace/1mb) -as [int]}} -auto  | Out-File  c:\temp\ServersHDDAudit_OUTPUT-$a-$b.txt -Append
  }
  else
  {
    throw $Error[0].exception.Message
  }
}
catch
{
  $server + ": $_" | Out-File  c:\temp\ServersHDDAudit_OUTPUT-$a-$b.txt -Append 
} 
```

**备注**：你可以设置`-ErrorAction Stop`参数让异常抛出`Get-WmiObject`。或者，您可以指定`$ErrorActionPreference = "stop"`是否希望所有 Cdmlet 在出现错误时都抛出异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T07:41:50.877

Try/catch 仅适用于终止错误。根据我的经验， 99% 产生的错误`Get-WmiObject`都没有终止，所以在这种情况下 catch 不会有任何影响。

您可以做的一件事是使命令引发的任何错误成为终止错误，您可以使用`-ErrorAction Stop`. 传递 'stop' 将使错误成为终止错误，从而允许调用 catch 块

# c# - WPF 可见性绑定不能很好地与绑定到可见性的数据触发器配合使用

> ID：14844066
> 
> 赞同：0
> 
> 时间：2013-02-12T23:50:42.763
> 
> 标签：c#, wpf, mvvm

我无法弄清楚这段代码有什么问题。也许你能发现一些我看不到的东西。我的项目构建得很好，设计师没有抱怨任何事情。但是，当我尝试运行它时，它说它无法创建此代码所在窗口的实例。

我想我已经将问题缩小到与数据触发器协调的可见性绑定。如果我删除该属性上的可见性绑定并将其任意设置为真或假，它运行得很好。但我需要这个属性是动态的。

```
<Image Visibility="{Binding ShowStatusMessageTabIcon, Converter={StaticResource BoolToVisibility}}"
   Source="{Binding Source={x:Static bo:UserSession.Instance}, Path=HighestStatusMessageSeverity, Converter={StaticResource SeverityToImageConverter}}">
<Image.Style>
    <Style>
        <Style.Triggers>
            <DataTrigger Binding="{Binding RelativeSource={RelativeSource Self}, Path=Visibility}"
                         Value="Visible">
                <DataTrigger.EnterActions>
                    <BeginStoryboard Storyboard="{StaticResource FlashErrorImage}" />
                </DataTrigger.EnterActions>
                <DataTrigger.ExitActions>
                    <RemoveStoryboard BeginStoryboardName="FlashErrorImage" />
                </DataTrigger.ExitActions>
            </DataTrigger>
        </Style.Triggers>
    </Style>
</Image.Style> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T23:57:46.857

如果您在自己`Trigger`的属性上使用 a ，`UIElement`您将不想使用`Trigger`not `DataTrigger`，`DataTriggers`更多用于`DataObjects`模型等的更改，normal`Triggers`用于`UIElements`等。

```
 <Image.Style>
        <Style TargetType="{x:Type Image}">
            <Style.Triggers>
                <Trigger Property="Visibility" Value="Visible">
                    <Trigger.EnterActions>
                        <BeginStoryboard Storyboard="{StaticResource FlashErrorImage}" />
                    </Trigger.EnterActions>
                    <Trigger.ExitActions>
                        <RemoveStoryboard BeginStoryboardName="FlashErrorImage" />
                    </Trigger.ExitActions>
                </Trigger>
            </Style.Triggers>
        </Style>
    </Image.Style> 
```

这是一个完整的工作模型，如果它有助于缩小问题范围

xml:

```
<Window x:Class="WpfApplication7.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525" Name="UI">

    <Window.Resources>
        <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter" />

        <Storyboard x:Key="FadeAnimation" Storyboard.TargetProperty="Opacity" >
            <DoubleAnimation From="0" To="1" Duration="0:0:5" />
        </Storyboard>
    </Window.Resources>

    <StackPanel>
        <Image Source="http://icons.iconarchive.com/icons/iconcreme/halloween/128/Skeleton-icon.png" 
               Visibility="{Binding ElementName=UI, Path=ImageVisible, Converter={StaticResource BooleanToVisibilityConverter}}" Height="247">
        <Image.Style>
            <Style TargetType="{x:Type Image}">
                <Style.Triggers>
                    <Trigger Property="Visibility" Value="Visible">
                        <Trigger.EnterActions>
                                <BeginStoryboard Name="Fade" Storyboard="{StaticResource FadeAnimation}" />
                        </Trigger.EnterActions>
                        <Trigger.ExitActions>
                             <RemoveStoryboard BeginStoryboardName="Fade"  />
                        </Trigger.ExitActions>
                    </Trigger>
                </Style.Triggers>
            </Style>
        </Image.Style>
    </Image>
        <Button Click="Button_Click" Content="Visible"/>
    </StackPanel>
</Window> 
```

代码：

```
public partial class MainWindow : Window, INotifyPropertyChanged
{
    private bool _imageVisible;
    public MainWindow()
    {
        InitializeComponent();
    }

    public bool ImageVisible
    {
        get { return _imageVisible; }
        set { _imageVisible = value; NotifyPropertyChanged("ImageVisible"); }
    }

    private void Button_Click(object sender, RoutedEventArgs e)
    {
        ImageVisible = !ImageVisible;
    }

    public event PropertyChangedEventHandler PropertyChanged;
    private void NotifyPropertyChanged(string p)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(p));
        }
    }
} 
```

# python - 搜索 sqlite3 数据库时出现 Python 错误

> ID：14844067
> 
> 赞同：3
> 
> 时间：2013-02-12T23:50:42.783
> 
> 标签：python, sqlite

```
#!/usr/bin/python
import sqlite3

conn = sqlite3.connect("/home/michael/Dropbox/lagniappe/database.db")

cursor = conn.cursor()

query = raw_input('Search for a title:')

cursor.execute("SELECT * FROM nerd WHERE title LIKE '%?%';", query)

print cursor.fetchall() 
```

返回错误：

```
michael@piplup:~$ python sqlite.py 
Search for a title:test
Traceback (most recent call last):
  File "sqlite.py", line 10, in <module>
    cursor.execute("SELECT * FROM nerd WHERE title LIKE '%?%';", query)
sqlite3.ProgrammingError: Incorrect number of bindings supplied. The current statement uses 0, and there are 4 supplied. 
```

我想要它做的就是将它从数据库接收到的数据打印到控制台。最终我想操作这些数据，但我只需要查询正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T00:08:35.650

这里有两个问题。首先，参数应该是一个序列——Python 将它解释为一个由四个字符组成的列表，而不是一个四个字符的字符串。

其次，占位符必须是整个元素，而不是引号。您需要自己添加百分比字符：

```
query = raw_input('Search for a title:')
query = '%' + query + '%'
cursor.execute("SELECT * FROM nerd WHERE title LIKE ?", (query,)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T00:05:21.493

您需要将元组传递给`cursor.execute`. 尝试`(query,)`代替`query`.

```
cursor.execute("SELECT * FROM nerd WHERE title LIKE '%?%';", (query,)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T00:08:53.270

首先，该`execute`方法的第二个参数应该是一个序列，并且您正在传递一个字符串（被解释为一个字符序列），这就是它说的原因`... and there are 4 supplied.`

其次，比较参数周围的引号会`LIKE`阻止执行方法将其解释`?`为占位符；相反，它被解释为文字`?`。

因此，要使您的查询正常工作，您必须做两件事：

1.  添加`%`到您的`query`参数中，将它们嵌入到 SQL 查询中。
2.  `query`在序列（单元素元组或列表）中传递参数。

您的脚本如下所示：

```
#!/usr/bin/python
import sqlite3
conn = sqlite3.connect("/home/michael/Dropbox/lagniappe/database.db")
cursor = conn.cursor()
query = '%%%s%%' % raw_input('Search for a title:') # puts the input between %
cursor.execute("SELECT * FROM nerd WHERE title LIKE ?;", (query,)) # passes the query as a tuple
print cursor.fetchall() 
```

# perl - 使用 html 格式时的 Perl Net::SMTP 电子邮件大小问题

> ID：14844079
> 
> 赞同：1
> 
> 时间：2013-02-12T23:51:27.507
> 
> 标签：perl, email, smtp

我在 perl 中通过 SMTP 发送电子邮件。该电子邮件包含一些表格、链接和列表。我正在使用 html 格式的数据。

```
$smtp->data();
$smtp->datasend("MIME-Version: 1.0\nContent-Type: text/html; charset=UTF-8 \n\n<H1>");
$smtp->datasend("$message");
...
$smtp->dataend();
$smtp->quit; 
```

有时电子邮件大小过大`1mb`。有什么办法可以在不减少数据量的情况下减小电子邮件的大小。我不希望将邮件作为附件。我用outlook打开邮件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T07:39:10.760

您应该使用[Mail::Sender](http://search.cpan.org/~jenda/Mail-Sender-0.8.21/Sender.pm)通过电子邮件发送附件

```
#!/usr/bin/perl
use Mail::Sender

$to = 'email1@example1.com,email2@example2.com';
$sender =new Mail::Sender {
        smtp => 'smtp.mailserver.com',
        from => 'script@somedomain.com,
        });

$subject = 'This is a Test Email';
$sender->OpenMultipart({
        to      => "$to",
        subject => "$subject",
        });

$sender->Body;
$sender->SendLineEnc("Test line 1");
$sender->SendLineEnc("Test line 2");

$sender->Attach({
        description     => 'Test file',
        ctype           => 'application/x-zip-encoded',
        encoding        => 'Base64',
        disposition     => 'attachment;
        filename="File.zip"; type="ZIP archive"',
        file            => "$file",
        });

$sender->Close();
exit(); 
```

或使用 MIME::Lite

```
use MIME::Lite;

$msg = MIME::Lite->new (
  From => $from_address,
  To => $to_address,
  Subject => $subject,
  Type =>'multipart/mixed'
) or die "$!\n";

### Add the ZIP file
$msg->attach (
   Type => 'application/zip',
   Path => $my_file_zip,
   Filename => $your_file_zip,
   Disposition => 'attachment'
) or die "Error adding $file_zip: $!\n";

### Send the Message
$msg->send('smtp', $mail_host, Timeout=>60); 
```

# ios - 使用 ARC 在 iOS 应用程序中未释放内存

> ID：14844080
> 
> 赞同：3
> 
> 时间：2013-02-12T23:51:33.393
> 
> 标签：ios, memory-management, automatic-ref-counting

我使用 ARC 构建了一个简单的琐事游戏。在 Xcode 中使用 Allocations 分析工具分析其内存使用情况时，我发现内存并不总是被释放。对于问题的一个示例，我有一个 ActivePlayer 对象的类：

活动播放器.h：

```
@interface ActivePlayer : NSObject

@property (nonatomic, strong) NSString * name;
@property (nonatomic) NSInteger overallScore;
@property (nonatomic) NSInteger questionScore;

- (id) initWithName:(NSString *)name;

@end 
```

活动播放器.m：

```
#import "ActivePlayer.h"

@interface ActivePlayer ()

@end

@implementation ActivePlayer

- (id) initWithName:(NSString *)name
{
    self = [self init];
    if (self) {
        self.name = name;
        self.overallScore = 0;
    }
    return self;
}

/*
- (void)dealloc
{
    self.name = nil;
}
*/
@end 
```

ActivePlayer 是在 ActiveGame 类的 createPlayer 方法中创建的：

```
[[ActivePlayer alloc] initWithName:name] 
```

我正在执行以下测试用例：我开始一个新游戏（分配一个 ActivePlayer），我回答一个问题，然后游戏结束（此时 ActivePlayer 被释放）。然后我可以开始另一个游戏并重复这个循环（每个循环都是一个“游戏”，如下所述）。在使用 Allocations 分析工具时，我期望看到的是内存已在游戏中间分配，但在游戏结束后已被释放（无论我玩游戏多少次）。但我发现情况并非总是如此：

顺便说一句：下面的每个项目符号行描述了分配工具的对象列表选项卡中的一行；该站点不允许我发布屏幕截图，因此是文字说明。所有行都是实时的；我只查看 Created 和 Still Living 分配。

当游戏 #1 正在进行时，我看到了以下分配。

*   类别=ActivePlayer；尺寸=16；负责任的调用者=-[ActiveGame createPlayer:]
*   类别=Malloc 48 字节；大小=48；负责任的调用者=-[ActivePlayer initWithName:]

游戏 #1 完成后，我看到以下内容。ActivePlayer 对象已被释放，但 48 字节仍然是 Live 的。

*   类别=Malloc 48 字节；大小=48；负责任的调用者=-[ActivePlayer initWithName:]

如果我开始游戏 #2，我会在游戏进行时看到以下内容。除了游戏 #1 中的分配之外，还有两种新分配。

*   类别=Malloc 48 字节；大小=48；负责任的调用者=-[ActivePlayer initWithName:]
*   类别=ActivePlayer；尺寸=16；负责任的调用者=-[ActiveGame createPlayer:]
*   类别=Malloc 144 字节；大小=144；负责任的调用者=-[ActivePlayer initWithName:]

在游戏 #2 完成后，我看到以下内容。同样，ActivePlayer 对象已被释放，但“Malloc X Bytes”分配仍然存在。

*   类别=Malloc 48 字节；大小=48；负责任的调用者=-[ActivePlayer initWithName:]
*   类别=Malloc 144 字节；大小=144；负责任的调用者=-[ActivePlayer initWithName:]

在那之后，我得到了不寻常的结果——如果我玩游戏 #3、#4 和 #5，我再也看不到 Category="Malloc X Bytes" 的游戏行，只有 Category=ActivePlayer 的新行，即游戏结束后释放。如上所示，前两个“Malloc”行继续存在。我还看到了其他奇怪的行为——昨天在使用 iPhone 6.0 模拟器进行测试时，只有在游戏 #2 和 #3 之后才留下实时内存，而不是游戏 #1、#4 和 #5。因此，虽然内存仍然分配，但它发生的时间似乎因我的设备和不同版本的模拟器而异。

还有我的问题：

*   我的理解是否正确，在游戏结束并且 ActivePlayer 对象已被释放后，我不应该从调用 initWithPlayer 中看到任何实时内存？
*   如果是，是什么原因造成的，我该如何解除分配？
*   还是我根本不需要担心？

笔记：

*   这些屏幕截图来自在运行 iOS 6.1 的 iPhone 4 上运行我的应用程序。但是我在 5.1、6.0 和 6.1 的 iPhone 模拟器上看到了类似的行为，而且我在升级之前在运行 iOS 6.0 的 iPhone 上看到了它。
*   在 ActivePlayer.m 中，dealloc 方法目前已被注释掉，尽管我已经在它未被注释的情况下进行了测试，并验证了它正在被调用（由系统调用；我不直接在任何地方调用 dealloc）。无论哪种方式，行为都是相同的。
*   对于它的价值，Leaks 分析工具没有报告任何内容。
*   虽然这是一个导致我认为应该释放 192 字节的活动内存的示例，但我在我的许多课程中都看到了这一点，即内存分配似乎随着时间的推移而增长，我认为这是一个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T00:56:39.900

您列出的代码很好。看起来您仍在代码中的其他位置维护对原始 ActivePlayer 的引用。

作为旁注，您创建 ActivePlayer 的模式不是规范 - 通常一个类不会从 init 方法中调用 alloc 。相反，调用者应该执行：

```
[[ActivePlayer alloc] initWithName:@"Bob"]; 
```

并且您的 init 方法应该使用的返回值

```
[super init]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T00:59:17.053

我觉得您的构造函数是静态的（+ 号）很奇怪。命名约定要求名称前缀为 as 的方法`init`将返回托管内存对象。我怀疑内部方法的结果是根据它们的方法名称来评估的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T01:06:06.613

我认为实例计数测试确定您的代码没有泄漏 ActivePlayers。顺便说一句，构造函数和初始化的更好形式是这样的：

```
// .h

@interface ActivePlayer : NSObject

+ (id)activePlayerWithName:(NSString *)name;

@end

// .m

+ (id)activePlayerWithName:(NSString *)name {
    return [[self alloc] initWithName:name];
}

// if you want to make this public (include in .h interface) you can
// the callers will have the choice of alloc init pattern, or the factory
//
- (id)initWithName:(NSString *)name {
    self = [self init];
    if (self) {
        _name = name;
    }
    return self;
} 
```

然后调用者这样做：

```
ActivePlayer *activePlayer = [ActivePlayer activePlayerWithName:@"Charlie"]; 
```

# elasticsearch - elasticsearch 过滤器词干分析器

> ID：14844082
> 
> 赞同：1
> 
> 时间：2013-02-12T23:51:53.800
> 
> 标签：elasticsearch

我正在尝试在弹性搜索中使用渗透函数。它工作得很好，但开箱即用没有处理单数/复数等的词干。关于这个主题的文档相当薄，所以我想知道是否有人已经完成了这项工作以及需要哪些设置。目前我没有索引我的文档，因为我没有搜索它们，只是将它们通过过滤器以触发通知。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T11:21:49.263

您可以使用[percolate API](http://www.elasticsearch.org/guide/reference/api/percolate.html)来针对 percolators 测试文档，而无需对它们进行索引。但是，对于您的文档， `percolate`API 需要 and`index`和 a 。`type`这样它就知道文档中的每个字段是如何定义（或映射）的。

分析器属于索引，映射/类型定义中的字段可以使用全局定义的分析器，也可以使用为您的索引定义的自定义分析器。

例如，我们可以为 index 定义一个映射`test`，使用全局定义的分析器键入`test`如下：

```
curl -XPUT 'http://127.0.0.1:9200/test/?pretty=1'  -d '
{
   "mappings" : {
      "test" : {
         "properties" : {
            "title" : {
               "type" : "string",
               "analyzer" : "english"
            }
         }
      }
   }
}
' 
```

或者，您可以设置一个仅属于`test`索引的自定义分析器：

```
curl -XPUT 'http://127.0.0.1:9200/test/?pretty=1'  -d '
{
   "mappings" : {
      "test" : {
         "properties" : {
            "title" : {
               "type" : "string",
               "analyzer" : "my_english"
            }
         }
      }
   },
   "settings" : {
      "analysis" : {
         "analyzer" : {
            "my_english" : {
               "stopwords" : [],
               "type" : "english"
            }
         }
      }
   }
}
' 
```

现在我们可以创建我们的过滤器，指定它属于哪个索引：

```
curl -XPUT 'http://127.0.0.1:9200/_percolator/test/english?pretty=1'  -d '
{
   "query" : {
      "match" : {
         "title" : "singular"
      }
   }
}
' 
```

并使用`percolate`API 对其进行测试，再次指定索引和类型：

```
curl -XGET 'http://127.0.0.1:9200/test/test/_percolate?pretty=1'  -d '
{
   "doc" : {
      "title" : "singulars"
   }
}
'
# {
#    "ok" : true,
#    "matches" : [
#       "english"
#    ]
# } 
```

# entity-framework - EF 5.0 DbSet Find 方法返回 null

> ID：14844087
> 
> 赞同：3
> 
> 时间：2013-02-12T23:52:16.483
> 
> 标签：entity-framework, entity-framework-5, dbcontext, system.data.sqlite

在下面的代码中 item1 的值为 null，而 item2 不为 null。任何想法为什么 Find 方法在这种情况下不能正常工作？

```
context= new EFModel.InputContext();
context.Items.Add(new Item{ Id = 1 });
var item1 = context.Items.Find(1);
var item2 = context.Items.Local.SingleOrDefault(i => i.Id == 1); 
```

**编辑：** 感谢@Maximc 指出正确的方向。显然问题不在于密钥设置为自动生成并且我分配了它。EF 以某种方式通过用用户指定的 ID 覆盖 aut 生成的 Id 来正确处理这种情况。问题是由于铸造不当造成的。我的 Id 属性是类型的`long`，所以当我这样做时， `var item1 = context.Items.Find((long)1);`它就会起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T00:09:58.140

Id 是否具有属性 [Key] ？我认为这将是你的问题。

编辑：

阅读您的评论后，您在此处所说的内容是错误的，您说 Id 是自动生成的，(StoreGeneratedPattern="Identity") 但是在您使用的代码示例中：

```
context.Items.Add(new Item{ Id = 1 }); 
```

我认为将值分配给自动生成的属性会导致问题，无论如何你不应该这样做（Id = 1），只需使用：

context.Items.Add(new Item()); // ID 将自动生成，因为它具有 storeGeneratedPattern="Identity"

然后尝试再次使用 Find ，我也认为 find 只有在列表中只有 1 个项目时才有效，而如果你强制使用 Id (1) 并且有 2 个项目的 Id: 1 （我觉得很奇怪，认为应该是一个错误），那么 FirstOrDefault 仍然可以工作！（因为它只会查找第一个然后返回它。你应该尝试 SingleOrDefault，在这里它会检查它是否找到具有该 Id 的项目或超过 1，然后它也将返回 null。

希望你现在可以解决它:)。

# android - 在布局中将 ListAdapter 分配给 ListView

> ID：14844088
> 
> 赞同：0
> 
> 时间：2013-02-12T23:52:21.593
> 
> 标签：android, listview

我的主要活动有一个包含 ListView 和其他几个项目的布局。我想为它分配一个 ListAdapter。我按照这里显示的教程：[http ://www.vogella.com/articles/AndroidListView/article.html](http://www.vogella.com/articles/AndroidListView/article.html)

如何让适配器知道我的活动布局中有一个 ListView，并将其分配给它？当我尝试按原样运行应用程序时，它会因运行时异常而崩溃，说明我的布局需要在其中包含默认的 Android 列表视图。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T00:00:02.943

如果您的活动继承自`ListActivity`，则不必手动让适配器知道`ListView`.

但为了做到这一点，`ListView`在你的活动中应该是这样的

```
<ListView android:id="@android:id/list"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"/> 
```

因为[文件说](http://developer.android.com/reference/android/app/ListActivity.html)

> 您自己的视图必须包含一个 ID 为“@android:id/list”的 ListView 对象（或者如果它在代码中，则为列表）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T23:55:56.183

> 当我尝试按原样运行应用程序时，它会因运行时异常而崩溃，说明我的布局需要在其中包含默认的 Android 列表视图。

听起来您正在使用 ListActivity 并调用`setContentView()`. 在您传递给`setContentView()`您的布局中，*必须*具有具有以下属性的 ListView：

```
<ListView 
    android:id="@android:id/list"
    ... /> 
```

然后使用 . 将您的适配器绑定到 ListView `setListAdapter()`。

# postgresql-9.1 - PSQL：触发函数的目的

> ID：14844090
> 
> 赞同：2
> 
> 时间：2013-02-12T23:52:52.453
> 
> 标签：postgresql-9.1, psql

触发功能与“常规”功能有何不同？创建触发器是否绝对必要？

例如，在这种情况下：

```
-- Trigger function
CREATE FUNCTION update_record_trigger_function() RETURNS trigger
LANGUAGE plpgsql
AS $update_record_trigger_function$
BEGIN
  PERFORM update_record(NEW.oid); -- helper function ... 
  RETURN NEW;
END
$update_record_trigger_function$;

-- Trigger for updating latest clicks for posts
CREATE TRIGGER update_latest_record
AFTER INSERT OR UPDATE ON record
FOR EACH ROW
EXECUTE PROCEDURE update_record_trigger_function(); 
```

会不会更简单（或者是否可以这样做）：

```
-- Trigger for updating latest clicks for posts
CREATE TRIGGER update_latest_record
AFTER INSERT OR UPDATE ON record
FOR EACH ROW
PERFORM update_record(NEW.oid); -- syntactically not right but along this idea 
```

我找不到任何包含“跳过触发功能”示例的文档或解释触发功能对触发器的特殊性和必要性的文档？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T16:18:24.247

PostgreSQL 将“触发器函数”从触发器定义中分离出来的原因有很多：

*   触发器函数可以写成通用函数，可以作用于许多不同的表，因此您可以将相同的触发器函数作为触发器添加到许多不同的表中。这便于维护。

*   触发器函数可以采用参数，使它们能够适应特定的列名或应用它们的表的其他特征。这使得编写通用的、可重用的触发器函数变得切实可行，否则您将无法这样做，因此您通常不需要在多个地方重复代码。参见`EXECUTE ... USING`和`format`函数及其`%L`和`%I`格式说明符。

*   PostgreSQL 非常努力地不在乎你的函数是用什么编程语言编写的。它们可以是 PL/PgSQL、Python、Perl、C 或 MyWackyPluginLanguage。如果它没有将触发器功能与触发器定义分开，这将更难实现。

PostgreSQL 不支持您描述的速记，尽管其他一些数据库系统提供的东西与您所展示的非常相似。您本质上希望能够将触发器函数定义为内联表达式。这不受支持。从来没有迫切需要它，所以没有人实施它。

如果将来添加了这样的功能-我不知道有任何计划这样做-可能会使用`DO`上下文解释为触发器的 PL/PgSQL 块来完成，例如（不是合法的语法）：

```
CREATE TRIGGER update_latest_record
AFTER INSERT OR UPDATE ON record
FOR EACH ROW DO $$ PERFORM update_record(NEW.oid); RETURN NEW; $$; 
```

这样解析器就不需要理解 PL/PgSQL 结构，我们只需要教它理解`FOR EACH ROW DO [string literal body of function]`作为替代方案`FOR EACH ROW EXECUTE PROCEDURE proc_name(args)`，然后调用 PL/PgSQL 子系统来处理触发器文字。

在实践中，Pg 可能只是生成一个普通的触发器函数并从触发器中添加对它的引用，因此如果触发器被删除，它就会被删除，这使得它成为一个方便的宏，就像一个带有 a和 a`SERIAL`的字段的便利宏生成由具有该字段的表拥有。特别是，可能会像定义一个单独的触发器函数和触发器一样输出它，而不是使用速记。`INTEGER``DEFAULT nextval(...)``SEQUENCE``SERIAL``pg_dump`

老实说，我怀疑这样的东西会不会被添加，但如果你能提供足够令人信服的用例，如果你真的很幸运的话，你*可能会对它感兴趣。*如果您愿意为实施该功能所需的时间提供资金支持，那么您很可能只会通过这样的提议（“允许将 DO 块用作触发程序”）获得任何结果。

# mysql - 如何根据用户的性别在 mysql 查询中放置 if 语句？

> ID：14844094
> 
> 赞同：1
> 
> 时间：2013-02-12T23:53:05.843
> 
> 标签：mysql, if-statement

如何根据用户的性别在 mysql 查询中放置 if 语句？

我想根据性别更改 $avatar 图像。

如果是男性，我会存储这张图片 --> avatar/male.png

如果是女性，我会存储这张图片 --> avatar/female.png

这是mysql查询

```
mysql_query("INSERT INTO `etudiants`
    (id_etudiant, id_filiere, dateInscription, anneeScolaire, classe, typeFormation, filiere, nomPrenom, CIN, niveauScolaire, dateNaissance, sexe, nationalite, adresse, ville, tel, npPere, telPere, formPere, npMere, telMere, formMere, avatar)
        VALUES
    ('','$id_filiere','$date','$anneeScolaire', '$classe', '$typeFormation', '$filiere', '$nomPrenom','$CIN', '$niveauScolaire', '$dateNaissance', '$sexe','$nationalite', '$adresse','$ville','$tel','$npPere','$telPere','$formPere','$npMere','$telMere','$formMere','$avatar');
    ") or die (mysql_error());
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T00:08:05.227

您可以使用`CASE WHEN`或`CONCAT`。

用此代码替换`'$avatar'`您提供的查询，它应该可以工作：

```
CASE sexe WHEN 'male' THEN 'avatar/male.png' ELSE 'avatar/female.png' END 
```

甚至这样：

```
CONCAT('avatar/', sexe, '.png') 
```

# checksum - libtrace 计算数据包校验和的函数

> ID：14844095
> 
> 赞同：0
> 
> 时间：2013-02-12T23:53:07.667
> 
> 标签：checksum

由于某些研究原因，我正在使用 libtrace 修改捕获数据包的有效负载。在这种情况下，我必须为修改后的数据包计算新的校验和。我的问题是有没有一种简单的方法可以做到这一点，例如，libtrace 中是否有一个函数可以做到这一点？任何评论表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T20:59:09.783

目前在 libtrace 中没有专门用于此的 API 函数，但有代码可以为 tracereplay 工具内的数据包生成正确的 IPv4、TCP 和 UDP 校验和，您可以将其用作编写自己的函数来执行此操作的基础。

代码本身可以`tools/tracereplay/tracereplay.c`在 libtrace 源代码中找到。libtrace 源本身可以从[这里](http://research.wand.net.nz/software/libtrace.php)下载（如果您通过打包系统获得 libtrace）。

还有[一个 libtrace 问题的邮件列表](http://www.wand.net.nz/mailman/listinfo/libtrace-users)，更有可能得到及时的回复。

# ruby-on-rails - 我应该将与模型相关但与数据库操作无关的 Rails 代码放在哪里？

> ID：14844097
> 
> 赞同：1
> 
> 时间：2013-02-12T23:53:16.900
> 
> 标签：ruby-on-rails

我有一个使用文档扫描仪（Epson WorkForce 545）的 Rails 应用程序。我有两个模型：文档和扫描仪。**我很难确定我应该将代码放在哪里进行实际扫描操作。**我最初认为我应该在 Scanner 模型中有一个*scan方法来存放代码。*但是，根据我的阅读，我应该只在模型中保留与数据库相关的操作（请参阅[Yehuda 的回答here](https://stackoverflow.com/questions/1068558/oo-design-in-rails-where-to-put-stuff)）。在模型中包含扫描仪逻辑似乎违反了这个想法。

然后我想我应该创建一个名为 ScannerUtilities 的模块并将其放在 /lib 文件夹中。我想这会起作用，但是将与模型密切相关的代码卡在 /lib 文件夹中是否有意义？此外，由于扫描仪用于创建 Document 对象，因此我从 Document 控制器调用*scan方法。*因此，代码涉及多个模型和控制器。

从我的 OO 思维来看，对象所做的应该被定义为该类的方法。那么，如果扫描仪扫描，*扫描*方法不应该在 Scanner 模型中吗？

放置此代码的最佳位置在哪里？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T00:09:31.497

你是对的，`scan method`应该在扫描仪类中，有几个原因：

*   **自然主义**：扫描是扫描仪所做的；在面向对象的世界中，您拥有扫描仪，它们所做的一件事就是扫描东西
*   **干码**：你将可以从任何地方调用扫描方法；在控制器中，您需要在需要它的每个控制器中复制它；不是很[干](http://codebetter.com/jeremymiller/2007/03/22/the-dont-repeat-yourself-principle-and-the-wormhole-anti-pattern/)
*   **胖模型**：它遵循“胖模型，瘦控制器”范式 - 看看[这个演示文稿](http://www.slideshare.net/damiansromek/thin-controllers-fat-models-proper-code-structure-for-mvc)
*   **语言**：它是惯用的和直观的。有些人可能不同意我的观点，但我认为 Rails 鼓励你用英语思考而不是用 Ruby 思考。只是谈论它可以清楚地表明扫描仪可以扫描事物

所以是的，我会把`scan method`罐头模型放在里面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-05T20:58:52.353

我会赞成“混合”方法。

考虑创建一个执行扫描的类，但通过 Scanner 模型访问它：

```
class Scanner

  def scan
    ScanExecutor.new(scanner: self).call
  end

end 
```

这既满足了“扫描仪就是扫描”的自然方法，也满足了实用程序与模型的分离，这将防止你的胖模型变得肥胖。

它还鼓励在定义扫描操作时使用好的代码，因为它不必被压缩到单个方法中，而是可以成为一个结构良好的自己的类。

# java - 混淆和jOOQ

> ID：14844100
> 
> 赞同：3
> 
> 时间：2013-02-12T23:53:34.937
> 
> 标签：java, obfuscation, jooq

我将使用 jOOQ，我可能需要混淆。

我不知道 jOOQ 在幕后是如何工作的。混淆过程会给应用程序带来问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T09:02:45.297

jOOQ 在内部使用反射：

1.  构造[自定义 POJO 对象](http://www.jooq.org/doc/2.6/manual/sql-execution/fetching/pojos/)
2.  将[记录中的值分配给 POJO 对象](http://www.jooq.org/javadoc/latest/org/jooq/Record.html#into%28java.lang.Class%29)，[反之亦然](http://www.jooq.org/javadoc/latest/org/jooq/Record.html#from%28java.lang.Object%29)
3.  调用 Oracle ojdbc 特定的方法而不创建对 ojdbc 的依赖
4.  在 PGobject 类型上调用 Postgres JDBC 特定的方法

在这些区域中，如果您更改方法名称，混淆可能会导致问题

# jquery - 如何将自定义数据传递/访问到 ajax 成功处理程序

> ID：14844103
> 
> 赞同：1
> 
> 时间：2013-02-12T23:53:48.307
> 
> 标签：jquery

```
 for(var i =0; i < featuredItems.length; i++) {
    var item = featuredItems.eq(i).text().trim();
    alert(item); // alerts correctly
    $.ajax({
      url : "/documents/ajax/" + item,
      dataType : "text",
      success : function(data) {
        /*
          alerts the value set in the last iteration of for loop.
          I want the same value as value of item in the ajax request URL
        */
        alert (item);     
      },
    });
  } 
```

如何在成功处理程序中正确访问 var 项的值？

上面的代码警告在**for 循环的最后一次迭代中设置的值**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T23:56:55.233

您必须关闭该`item`值：

```
for(var i =0; i < featuredItems.length; i++) {
    void function(item) {
        $.ajax({
          url : "/documents/ajax/" + item,
          dataType : "text",
          success : function(data) {
            alert (item);     
          },
        });
    }(featuredItems.eq(i).text().trim());
} 
```

# javascript - jQuery Autocomplete 在 ASP.NET 回发期间不持久化值

> ID：14844109
> 
> 赞同：1
> 
> 时间：2013-02-12T23:54:18.130
> 
> 标签：javascript, jquery, asp.net, jquery-ui, postback

我有一个非常简单的问题，我正在努力寻找解决方案。

基本上我有一个这样声明的 ASP.NET 文本框。

```
<asp:TextBox runat="server" ID="txtCourse" CssClass="input-xlarge HighlightibleField" placeholder=""></asp:TextBox> 
```

在这个文本框上，我绑定了一个像这样的 jQuery UI 自动完成小部件。

```
$("#<% =txtCourse.ClientID %>").autocomplete({
    source: ["Course1", "Course2", "Course3"],
    select: function (event, ui) {
        __doPostBack("<% =btnPostBacker.UniqueID %>", "");
    }
}); 
```

回发按预期发生，但是 txtCourse.Text 不会保留（或回发）它填充的值。

因此，例如，我继续选择“Course1”，该值被填充到 txtCourse 文本框中，回发发生并且我查看 txtCourse.Text 的值，它仍然只是我使用键盘输入的文本（例如：“c”）。

我尝试设置一个计时器来稍微延迟回发的执行，如下所示：

```
setTimeout(function () {
    __doPostBack("<% =btnPostBacker.UniqueID %>", "");
}, 500); 
```

虽然这似乎可行，但我觉得它不应该是必要的，也不知道为什么需要它。

我究竟做错了什么？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T00:20:22.613

您需要发布所选项目吗？

```
select: function( event, ui ) {
    __doPostBack("<% =btnPostBacker.UniqueID %>", ui.item);
} 
```

编辑：或者也许：

```
 select: function( event, ui ) {
        $(this).val(ui.item);
        __doPostBack("<% =btnPostBacker.UniqueID %>", "");
    } 
```

# python - 优化 Python 中常量的冗余逻辑测试

> ID：14844112
> 
> 赞同：1
> 
> 时间：2013-02-12T23:54:44.703
> 
> 标签：python, optimization, refactoring

假设我有一个主函数，它执行布尔逻辑测试来决定运行 2 个子函数中的一个，函数 A 或函数 B。主函数循环了 10 亿次，但逻辑测试的值是一个常数（它是用户在程序启动时输入）。

我看到了 2 种可能的写法： 1）将逻辑测试埋在函数 A 中。至少在理论上，逻辑测试必须执行 10 亿次，这听起来效率不高。2）在main函数之前做逻辑测试。将主函数拆分为主函数 1 和主函数 2（除了运行哪个子函数之外，它们是相同的），并使用逻辑测试来决定运行哪个主函数。在这里，逻辑测试只执行一次，但这种实现会产生冗余代码。

实现 1) 和 2) 之间的计算效率有什么不同吗？换句话说，Python 是否进行了任何自动优化以使这两个实现在机器代码级别等效？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T00:01:37.050

虽然@mmgp 在这两个方面都是正确的——CPython 不做任何这样的优化，而且这不太可能成为 Python 擅长的那种代码的瓶颈——还有第三种选择。您可以传递要用作参数的函数：

```
>>> def g1():
...         print 'g1'
...     
>>> def g2():
...         print 'g2'
...     
>>> def subfunc(fn):
...         fn()
...     
>>> def caller(a):
...         f = g1 if a else g2
...         for i in range(2):
...                 subfunc(f)
...         
>>> caller(True)
g1
g1
>>> caller(False)
g2
g2 
```

您的子功能可以保持完全相同，并且您已将测试提升到循环之外。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T00:11:20.090

正如 Patashu 建议的那样，让我们​​使用`timeit`测试而不是尝试猜测。我将使用 中的魔法`%timeit`，`ipython`因为它更简单。这是代码：

```
In [275]: def ff(): pass

In [276]: def ft(): pass

In [277]: def f1(b): # naive implementation
   .....:     for i in range(1000000):
   .....:         if b: ft()
   .....:         else: ff()

In [278]: %timeit f1(True)
10 loops, best of 3: 117 ms per loop

In [279]: def f2(b): # DSM's implementation
   .....:     f = ft if b else ff
   .....:     for i in range(1000000):
   .....:         f()

In [280]: %timeit f2(True)
10 loops, best of 3: 99.2 ms per loop 
```

所以，它要快一点，至少在我的 Mac 上的 CPython 3.3.0 64 位中。

However, if you know anything about Python optimization, you'll probably notice that this is about the same performance gain you'd expect just from moving a global variable to local. So, let's take that out of the equation by doing the same thing without hoisting the boolean expression:

```
In [277]: def f3(b): # Just local binding, no if hoisting
   .....:     f, g = ft, ff
   .....:     for i in range(1000000):
   .....:         if b: f()
   .....:         else: g()
In [286]: %timeit f3(True)
10 loops, best of 3: 94.8 ms per loop 
```

I put together a [more complete test](http://pastebin.com/00FPQgcf), including the OP's intended optimization, and code that works in 3.x and 2.x without change, and ran it against Apple 2.7.2, python.org 3.3.0, PyPy 1.9.0/2.7.2, and Jython 2.5.2 (all 64-bit builds on a Mac, and then just using Cython 0.17.1 pyximport (under Python 3.3.0) to compile the same source as Cython code:

```
 3.3.0   2.7.2   PyPy    Jython  Cython
orig             1.136   1.519   0.091   1.680   0.448
OP optimization  1.119   1.362   0.034   1.613   0.460
rebinding        0.936   1.369   0.030   1.492   0.137
DSM version      0.936   1.329   0.031   1.523   0.138 
```

So, it looks like binding the names outside the loop gives a speed boost of somewhere between 1.1x and 3x; additionally hoisting the comparison out of the loop may give you another 3% or so—but all of this is nothing compared to using PyPy instead of CPython, Cython instead of Python, or even 3.x instead of 2.x. Writing actual Cython or custom C code, or moving the loop into `numpy`, would be even faster.

And if you think about it, this makes sense. If the cost of a billion bool comparisons or global lookups matters, the cost of a billion function calls and a billion loops through the interpreter are going to matter far more. If you're not bothering to optimize that out (and you can often do that just by using a generator expression, list comprehension, `map` call, etc. in place of a loop, even if switching interpreters, rewriting your code around `numpy`, etc. aren't feasible), you shouldn't be worrying about the small stuff.

And obviously, if that last 3% ever really does make a difference, you'll need to perform more realistic tests, on the platforms you actually care about.

It's probably worth using DSM's implementation—but because it's more idiomatic and easier to read, not because it may or may not be faster.

# javascript - Javascript 函数中的 ASP.NET 超链接评估

> ID：14844115
> 
> 赞同：0
> 
> 时间：2013-02-12T23:54:59.790
> 
> 标签：javascript, asp.net

我已经在 TemplateField 中的 GridView 中添加了一个 HyperLink 控件，我希望它将用户重定向到特定页面，并从所选行传递 ID。以下工作正常：

```
<asp:HyperLink ID="hlViewBasketItem" runat="server" Text="Detail"
   NavigateUrl='<%# Eval("BasketItemID", "/BasketItemDetail.aspx?popUp=true&id={0}") %>'>
</asp:HyperLink> 
```

ID 评估正确；例如：“/BasketItemDetail.aspx?popUp=true&id=52”

我遇到的问题是我需要调用 Javascript 函数来控制我的页面的显示（以便它出现在弹出窗口中）。我尝试了以下方法：

```
<asp:HyperLink ID="hlViewBasketItem" runat="server" Text="Detail"
    NavigateUrl='<%# Eval("BasketItemID", "javascript:dnnModal.show('/BasketItemDetail.aspx?bid={0}&popUp=true',false,550,950,false)") %>'>
</asp:HyperLink> 
```

...但我收到“服务器标签格式不正确”错误。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T00:41:31.380

这是答案：

```
NavigateUrl=<%# "Javascript:dnnModal.show('BasketItemDetail.aspx?popUp=true&bid=" + DataBinder.Eval(Container.DataItem, "BasketItemID").ToString() + "')"%> 
```

我现在可以睡觉了：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T04:55:39.193

而不是使用 asp.net 超链接添加使用 html 锚标记并调用 java 脚本函数，如下所示：

//javascript函数

```
 <script>
    function openPop(drp) {
        window.open('/BasketItemDetail.aspx?bid='+drp+'&popUp=true', false, 550, 950, false);
    }
</script> 
```

// 锚标记

```
 <a href="#" onclick="javascript:openPop('1')">Click Here </a> 
```

# c# - 在 MouseMove 上绘制鼠标时闪烁

> ID：14844118
> 
> 赞同：0
> 
> 时间：2013-02-12T23:55:21.963
> 
> 标签：c#, winforms, gdi+

使用 GDI+ 和 C#，我试图在面板（称为 DrawingPanel）上用鼠标移动绘制一个矩形，我也在使用双缓冲我在 Paint Event 中进行绘图，但当我的鼠标在移动。

这是我的代码...

```
Rectangle mRect = new Rectangle();
Boolean isDragging = false;

public Form1()
{
   InitializeComponent();
   this.DrawingPanel.Paint += new PaintEventHandler(this.OnPanelPaint);
   this.DrawingPanel.MouseMove += new MouseEventHandler(this.OnPanelMouseMove);
   this.DrawingPanel.MouseDown += new MouseEventHandler(this.OnPanelMouseDown);
   this.DrawingPanel.MouseUp += new MouseEventHandler(this.OnPanelMouseUp);
   this.DoubleBuffered = true;
}

private void OnPanelPaint(object sender, PaintEventArgs e)
{
   using (Graphics g = this.DrawingPanel.CreateGraphics()) 
   {
      g.DrawRectangle(Pens.Black, mRect);
      g.FillRectangle(Brushes.SkyBlue, mRect);
   }
}

private void OnPanelMouseMove(object sender, MouseEventArgs e)
{
    if(isDragging)
    {
      mRect = new Rectangle(mRect.Left, mRect.Top, e.X - mRect.Left, e.Y - mRect.Top);
      this.DrawingPanel.Invalidate();
    }
}

private void OnPanelMouseDown(object sender, MouseEventArgs e)
{
    mRect = new Rectangle(e.Location, new Size(0, 0));
    this.DrawingPanel.Invalidate();
    isDragging = true;
}

private void OnPanelMouseUp(object sender, MouseEventArgs e)
{
    isDragging = false;
} 
```

知道为什么它还在发生吗？

# c - #define FOO 1u 2u 4u ... 1u 和 2u 是什么意思？

> ID：14844119
> 
> 赞同：6
> 
> 时间：2013-02-12T23:55:43.663
> 
> 标签：c, typedef

我正在使用 HCS12 MCU，这是库的一部分。我只是想知道这段代码中的 1U、2U、4U、8U... 是什么意思。我还在学习如何使用类，请尝试用外行的方式解释。

我的猜测：这是否只是意味着哪个位设置为高？1U = 00000001 2U = 00000010 ...

这会叫什么？

谢谢

```
 typedef union {
  byte Byte;
  struct {
    byte             :1; 
    byte ADR1        :1;                                       /* Slave Address Bit 1 */
    byte ADR2        :1;                                       /* Slave Address Bit 2 */
    byte ADR3        :1;                                       /* Slave Address Bit 3 */
    byte ADR4        :1;                                       /* Slave Address Bit 4 */
    byte ADR5        :1;                                       /* Slave Address Bit 5 */
    byte ADR6        :1;                                       /* Slave Address Bit 6 */
    byte ADR7        :1;                                       /* Slave Address Bit 7 */
  } Bits;
  struct {
    byte         :1;
    byte grpADR_1 :7;
  } MergedBits;
} IBADSTR;
extern volatile IBADSTR _IBAD @(REG_BASE + 0x000000E0UL);
#define IBAD                            _IBAD.Byte
#define IBAD_ADR1                       _IBAD.Bits.ADR1
#define IBAD_ADR2                       _IBAD.Bits.ADR2
#define IBAD_ADR3                       _IBAD.Bits.ADR3
#define IBAD_ADR4                       _IBAD.Bits.ADR4
#define IBAD_ADR5                       _IBAD.Bits.ADR5
#define IBAD_ADR6                       _IBAD.Bits.ADR6
#define IBAD_ADR7                       _IBAD.Bits.ADR7
#define IBAD_ADR_1                      _IBAD.MergedBits.grpADR_1
#define IBAD_ADR                        IBAD_ADR_1

#define IBAD_ADR1_MASK                  2U
#define IBAD_ADR2_MASK                  4U
#define IBAD_ADR3_MASK                  8U
#define IBAD_ADR4_MASK                  16U
#define IBAD_ADR5_MASK                  32U
#define IBAD_ADR6_MASK                  64U
#define IBAD_ADR7_MASK                  128U
#define IBAD_ADR_1_MASK                 254U
#define IBAD_ADR_1_BITNUM               1U 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-12T23:57:51.553

它定义了一个无符号整数[文字](http://publib.boulder.ibm.com/infocenter/lnxpcomp/v8v101/index.jsp?topic=%2Fcom.ibm.xlcpp8l.doc%2Flanguage%2Fref%2Fconref.htm)。`unsigned long integer`您还可以通过使用查看他们将十六进制文字定义为的位置`0x...UL`。

如果您想知道它们产生的位模式，只需将十进制文字转换为等效的十六进制或二进制文字即可。`1U`分别在十六进制和二进制中变为`0x01U`和`01b`¹。

另一个更常见的文字使用`f`-suffix，即单精度浮点文字，如`1.0f`.

[1\. 仅供说明，并非标准的实际文字]

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T23:58:53.770

它们只是整数常量。后缀使它们成为无符号整数而`U`不是整数。

[这在 C11 标准最终草案的](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf)第 6.4.4.1 节中有所描述。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-06T09:58:40.480

在嵌入式系统中，U 字面量表示该值是无符号整数

你可以在这里找到一些有用的内容。

[文字信息](https://infoc.eet.bme.hu/jegyzet/c_puska.pdf)

# r - 在 R 中转换 data.frame 的命令

> ID：14844123
> 
> 赞同：4
> 
> 时间：2013-02-12T23:56:07.597
> 
> 标签：r, dataframe

我正在努力想出正确的流程来转换我正在分析的一些数据，而无需求助于脚本语言。

数据采用类似于以下的格式

```
data.frame(Group=LETTERS[1:3],Total=c(100,120,130),Modified=c(12,15,32))

  Group Total Modified
1     A   100       12
2     B   120       15
3     C   130       32 
```

我希望生成的数据框看起来像

```
 +-------+----------+
    | Group | Modified |
    +-------+----------+
    | A     | Y        |
    | A     | Y        |
    | A     | Y        |
    | .     | .        |
    | .     | .        |
    | .     | .        |
    | A     | N        |
    | A     | N        |
    | B     | Y        |
    | B     | Y        |
    | .     | .        |
    | .     | .        |
    | .     | .        |
    | B     | N        |
    +-------+----------+ 
```

A组和Modified = Y应该有12行，A组和Modified = N应该有88行。B，C等也是如此。

在大多数情况下，需要在每一行上重复附加列以及组信息。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-13T00:19:29.040

您可以使用`rep`适当的 `times`参数。

`data.table`编码优雅的解决方案

```
library(data.table)
# your data is in the data.frame DF
DF <- data.table(DF)
levels <- c('Y', 'N')
DF[,list(Modified = rep(levels,c(Modified,Total-Modified))),by = Group] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-13T00:23:53.333

要转换的代码：

```
result <- do.call(rbind,
                by(test,
                   test$Group,
                   function(x) 
                     data.frame(
                      Group=x$Group[1],
                      Modified=rep(c("Y","N"),c(x$Modified,x$Total - x$Modified))
                      )
                   )
                  ) 
```

输出如：

```
> head(result)
    Group Modified
A.1     A        Y
A.2     A        Y
A.3     A        Y
A.4     A        Y
A.5     A        Y
A.6     A        Y 
```

检查它是否有效：

```
> with(result,table(Group,Modified))
     Modified
Group   N   Y
    A  88  12
    B 105  15
    C  98  32 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T01:00:06.363

略有不同的做法：

```
dat <- data.frame(Group=LETTERS[1:3],Total=c(100,120,130),Modified=c(12,15,32))

dat$diff <- dat$Total - dat$Modified
library(reshape2)
dat2 <- melt(dat[, -2])
dat2 <- dat2[order(dat2$Group), ]
levels(dat2$variable) <- c("Y", "N")
dat2 <- dat2[rep(1:nrow(dat2), dat2$value), -3]
rownames(dat2) <- NULL 
```

# ios - UITapGesture 目标未保留（使用 ARC）

> ID：14844125
> 
> 赞同：0
> 
> 时间：2013-02-12T23:56:19.070
> 
> 标签：ios, objective-c, automatic-ref-counting, gesture

我用不是当前对象的目标创建了一个 UITapGesture。后来，当点击时，应用程序崩溃。

查看控制器.h：

```
@interface ViewController : UIViewController
{
    IBOutlet UIImageView *iv;
}
@end 
```

查看控制器.c：

```
#import "ViewController.h"
#import "Target.h"

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    Target *t = [[Target alloc] init];
    UITapGestureRecognizer *tgr = [[UITapGestureRecognizer alloc] initWithTarget:t action:@selector(gestureDone:)];
    [iv addGestureRecognizer:tgr];
    [iv setUserInteractionEnabled:YES];
}

@end 
```

目标.h：

```
@interface Target : NSObject

- (void)gestureDone:(UIGestureRecognizer *)gr;

@end 
```

目标.c：

```
@implementation Target

- (void)gestureDone:(UIGestureRecognizer *)gr
{
    NSLog(@"Gesture!");
}

@end 
```

（我的 XIB 文件只包含一张图片......）点击图片时，它会崩溃。例如，如果我将实例变量 Target *t 添加到我的视图控制器（并删除 viewDidLoad 中的本地声明），则不会出现问题。当不这样做时，我在 Target 中覆盖了 dealloc，在其中放置了一个 NSLog，并看到 viewDidLoad 完成执行后，Target 对象就变成了 fred。

我做错了什么，还是有问题？（通常我不会遇到这个问题，因为我使用 initWithTarget:self ...）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-13T00:10:09.367

`UIGestureRecognizer`不保留其目标。大多数采用目标/动作对的对象不保留其目标。这在[*Cocoa Fundamentals Guide* /Communicating with Objects/The Target-Action Mechanism/The Target](http://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/CocoaFundamentals/CommunicatingWithObjects/CommunicateWithObjects.html#//apple_ref/doc/uid/TP40002974-CH7-SW31)中提到：

> 控制对象不（也不应该）保留它们的目标。但是，发送动作消息的控件的客户端（通常是应用程序）负责确保它们的目标可用于接收动作消息。为此，他们可能必须将目标保留在内存管理的环境中。此预防措施同样适用于代表和数据源。

您需要确保以其他方式保留目标，例如通过将引用存储`t`在`ViewController`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T08:01:09.593

Add an instance variable of the Target `t` to your `ViewController` class and make it strong. That way it stays in memory.

# php - CakePHP 2.x - 直接访问 php://input 来处理大型请求体

> ID：14844126
> 
> 赞同：1
> 
> 时间：2013-02-12T23:56:19.973
> 
> 标签：php, cakephp, upload

我正在开发一个包含小型 REST API 的应用程序。其中一种方法需要接受 PUT 请求上的大型（近 300MB）二进制文件上传。

由于该文件非常大，并且由于同时运行多个此类请求存在一定风险，因此我想避免将整个请求正文保存在内存中。我曾希望通过`php://input`直接从流中读取并将其虹吸到文件中来做到这一点。

但是，控制器的`input()`方法似乎有干扰。我理解其中的基本原理——`input()`一旦你阅读了`php://input`流，它就消失了，所以`input()`保留它以重复访问。显然，这是我希望在这种情况下绕过的行为。

不过，在我的控制器代码运行之前，它似乎`input()`在某处被调用，因为当我到达时`php://input`，已经没有什么可读的了。

所以，我的问题是：CakePHP 控制器有没有办法将一个非常大的请求体流式传输到磁盘上，而无需先将整个请求体加载到内存中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T17:04:39.140

我想通了，所以我希望以下内容可以节省其他人一些时间。

结果证明这是我的一个错误，但与 CakePHP 无关。如果您`php://input`在没有调用的情况下从控制器读取`Controller::input()`，您将（通常）按预期获得原始请求正文。

我的问题是我无意中设置了请求标头`Content-Type: application/json`。这导致 CakePHP 的 REST 代码尝试将正文解析为输入。当我正确设置类型（在我的情况下`application/x-gzip`）时，一切正常。

# magento - 通过布局 XML 文件向 Helper 类传递参数

> ID：14844134
> 
> 赞同：7
> 
> 时间：2013-02-12T23:57:26.203
> 
> 标签：magento, magento-1.7, magento-layout-xml

我有一个工作链接被添加到*top.links*块中，如下所示：

```
<block type="page/template_links" name="top.links" as="topLinks">
    <action method="addLink">
        <label>About Us</label>
        <url helper="mymodule/getAboutUsUrl"/>
        <title>About Us</title>
        <prepare/>
        <urlParams/>
        <position>20</position>
    </action>
</block> 
```

最终我希望*getAboutUsUrl*变成*getExternalSiteUrl*。我希望那个函数接受参数。例如，*getExternalSiteUrl('about-us')*会返回类似 /the/url/about-us 的内容。但是，我似乎找不到在布局 XML 文件中发送辅助类参数的方法。我已经搜索了其他执行此操作的模块，但在我搜索的客户模块中找不到。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-13T00:35:39.723

```
<block type="page/template_links" name="top.links" as="topLinks">
    <action method="addLink">
        <label>About Us</label>
        <url helper="mymodule/getAboutUsUrl">
            <arg>Now with more args!</arg>
            <!-- will result in the string being passed as first arg -->
        </url>
        <title>About Us</title>
        <prepare/>
        <urlParams/>
        <position>20</position>
    </action>
</block> 
```

请注意，助手不扩展`Varien_Object`，因此您的方法将需要显式定义该`getAboutUsUrl()`方法。

# android - 确定从另一个类中单击了哪个项目

> ID：14844143
> 
> 赞同：-1
> 
> 时间：2013-02-12T23:58:12.670
> 
> 标签：android, bundle, viewflipper

我有一个 List 类和一个 Viewflipper 类，我怎么知道从 Viewflipper 类的 List 类中单击了哪个项目，如果可能的话，我还想将每个视图链接到 Viewflipper 的特定视图。这是我到目前为止所尝试的：

列表类：

```
public class List extends ListActivity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // storing string resources into Array
    String[] service_list = getResources().getStringArray(R.array.List);

    // Binding resources Array to ListAdapter
    this.setListAdapter(new ArrayAdapter<String>(this, R.layout.list, R.id.list, service_list));

}

@Override
protected void onListItemClick(ListView parent, View v, int position, long id) {
    // TODO Auto-generated method stub
     String name = (String) parent.getItemAtPosition(position); 
     //Toast.makeText(this, "you have clicked " + name, Toast.LENGTH_SHORT).show();

    switch (position) {
    case 0:
        Intent i = new Intent(List.this, Viewflipper.class);
        Bundle b = new Bundle();
        b.putString("a", "apple");
        i.putExtras(b);
        startActivity(i);
        break;

    case 1:
        Intent a = new Intent(List.this, Viewflipper.class);
        Bundle aa = new Bundle();
        aa.putString("b", "banana");
        a.putExtras(aa);
        startActivity(a);

        break;

    case 2:
        Intent ab = new Intent(List.this, Viewflipper.class);
        Bundle bb = new Bundle();
        bb.putString("m", "mango");
        ab.putExtras(bb);
        startActivityForResult(ab, 2);
        break;

    case 3:
        Intent c = new Intent(List.this, Viewflipper.class);
        Bundle cc = new Bundle();
        cc.putString("o", "orange");
        c.putExtras(cc);
        startActivity(c);
         break;
    default:
        break;
    }

    super.onListItemClick(parent, v, position, id);
}
} 
```

ViewFlipper 类：

```
 public class Viewflipper extends Activity implements OnClickListener,
      OnGestureListener {

private ViewFlipper viewflipper;
private Button btnNext, btnPrevious;
private GestureDetector gesturedetector = null;

TextView txt;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.viewflipper);

    viewflipper = (ViewFlipper) findViewById(R.id.viewSwitcher);
    btnNext = (Button) findViewById(R.id.btnNext);
    btnPrevious = (Button) findViewById(R.id.btnPrevious);
    txt = (TextView) findViewById(R.id.txtview);

    txt.setOnClickListener(this);
    btnNext.setOnClickListener(this);
    btnPrevious.setOnClickListener(this);

    gesturedetector = new GestureDetector(this, this);

    Bundle bundle = getIntent().getExtras();
    if (bundle != null) {

        if (bundle.getString("a").equals("apple")) {
            Toast.makeText(this, " the first Item was clicked ",
                    Toast.LENGTH_LONG).show();
        } else if (bundle.getString("b").equals("banana")) {
            Toast.makeText(this, "the second Item was clicked",
                    Toast.LENGTH_LONG).show();
        } else if (bundle.getString("m").equals("mango")) {
            Toast.makeText(this, "the fourth Item was clicked",
                    Toast.LENGTH_LONG).show();
        } else if (bundle.getString("o").equals("orange")) {
            Toast.makeText(this, "the fifth Item was clicked",
                    Toast.LENGTH_LONG).show();
        }

        else {

        } // Toast.makeText(this, b , Toast.LENGTH_SHORT).show() ;
    }
}
// Animation
@Override
public void onClick(View v) {
    switch (v.getId()) {
    case R.id.btnNext:
        // Button Next Style
        Animation animationNext = AnimationUtils.loadAnimation(this,
                R.anim.btn_style_next);
        btnNext.startAnimation(animationNext);

        nextView();
        break;

    case R.id.btnPrevious:
        // Button Previous Style
        Animation animationPrevious = AnimationUtils.loadAnimation(this,
                R.anim.btn_style_previous);
        btnPrevious.startAnimation(animationPrevious);

        previousView();
        break;

    case R.id.txtview:
        Toast.makeText(this, "dail contact or visit website",
                Toast.LENGTH_SHORT).show();
    }
}

@Override
public boolean onTouchEvent(MotionEvent event) {
    return gesturedetector.onTouchEvent(event);
}

@Override
public boolean onDown(MotionEvent e) {
    // TODO Auto-generated method stub
    return false;
}

int SWIPE_MIN_VELOCITY = 100;
int SWIPE_MIN_DISTANCE = 100;

// Sự kiện khi bạn vuốt màn hình đưa sang một bên nào đó
@Override
public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX,
        float velocityY) {
    // Get Position
    float ev1X = e1.getX();
    float ev2X = e2.getX();

    // Get distance of X (e1) to X (e2)
    final float xdistance = Math.abs(ev1X - ev2X);
    // Get veclocity of cusor
    // Vận tốc = số điểm ảnh (px) / giây
    final float xvelocity = Math.abs(velocityX);

    // Vận tốc chuyển đổi X > 100 và khoảng cách từ điểm kéo đầu đến điểm
    // kéo cuối > 100
    if ((xvelocity > SWIPE_MIN_VELOCITY)
            && (xdistance > SWIPE_MIN_DISTANCE)) {
        if (ev1X > ev2X)// Switch Left
        {
            previousView();
        } else// Switch Right
        {
            nextView();
        }
    }

    return false;
}

@Override
public void onLongPress(MotionEvent e) {

}

@Override
public boolean onScroll(MotionEvent e1, MotionEvent e2, float distanceX,
        float distanceY) {
    return false;
}

@Override
public void onShowPress(MotionEvent e) {

}

@Override
public boolean onSingleTapUp(MotionEvent e) {
    return false;
}

// Next, Previous Views
private void previousView() {

    // Previous View
    viewflipper.setInAnimation(this, R.anim.in_animation1);
    viewflipper.setOutAnimation(this, R.anim.out_animation1);
    viewflipper.showPrevious();

}

private void nextView() {

    // Next View
    viewflipper.setInAnimation(this, R.anim.in_animation);
    viewflipper.setOutAnimation(this, R.anim.out_animation);
    viewflipper.showNext();

}

} 
```

请帮忙。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T00:19:38.850

首先，我建议更改`List`代码，使其如下所示：

```
switch (position) {
Intent i = new Intent(List.this, Viewflipper.class);
case 0:
    i.putExtra ("key", "apple");
    startActivity(i);
    break;

case 1:
    i.putExtra ("key", "banana");
    startActivity(i);
    break;

case 2:
    i.putExtra ("key", "mango");
    startActivity(i);
    break;

case 3:
    i.putExtra ("key", "orange");
    startActivity(i);
    break;
default:
    break;
} 
```

然后在 中`Viewflipper`，更改您的代码，使其如下所示：

```
if (getIntent().hasExtra("key")) {

String extra = getIntent().getStringExtra ("key");

    if ("apple".equals (extra)){
        Toast.makeText(this, " the first Item was clicked ",
                Toast.LENGTH_LONG).show();
    } else if ("banana".equals (extra)){
        Toast.makeText(this, "the second Item was clicked",
                Toast.LENGTH_LONG).show();
    } else if  ("mango".equals (extra)){
        Toast.makeText(this, "the fourth Item was clicked",
                Toast.LENGTH_LONG).show();
    } else {
        Toast.makeText(this, "the fifth Item was clicked",
                Toast.LENGTH_LONG).show();
    }
} 
```

我改变了什么：

*   `Intent`在开关的开头声明，以节省一些代码。
*   使其额外传递的始终具有相同的密钥。您之前所做的（每种情况使用一个单独的键效果不佳，您可以获得 NPE 并且它破坏了键值对的要点。
*   取消了 Bundle，因为它是多余的。`Intent#putExtra()`并且`Intent#getStringExtra()`很好。
*   既然方法可以处理值而不抛出`"string".equals (stringVariable)`.`String#equals()``null``NPE`

# ruby-on-rails - RABL 更改根节点名称

> ID：14844148
> 
> 赞同：1
> 
> 时间：2013-02-12T23:58:31.353
> 
> 标签：ruby-on-rails, ruby, rabl

我在更改嵌套节点名称时遇到了 rabl 问题：

例如，这是我的目标/index.json.rabl

```
collection @customers => :targets
extends 'customers/profile' 
```

这是我的客户/profile.json.rabl

```
object @customer => :profile
attributes :id, :username, :customer_id, :first_name, :last_name, :avatar_url 
```

命中targets.json（targets#index）时的输出：

```
{
    "targets": [
        {
            "target": {
                "id": 3,
                "username": null,
                "first_name": "Scott",
                "last_name": "Thomas",
                "avatar_url": null
            }
        },
        {
            "target": {
                "id": 3,
                "username": null,
                "first_name": "Thomas",
                "last_name": "MacKay",
                "avatar_url": null
            }
        }
    ]
} 
```

问题是我希望“targets”数组中的“target”节点被命名为“profile”。像这样：

```
{
        "targets": [
            {
                "profile": {
                    "id": 3,
                    "username": null,
                    "first_name": "Scott",
                    "last_name": "Thomas",
                    "avatar_url": null
                }
            },
            {
                "profile": {
                    "id": 3,
                    "username": null,
                    "first_name": "Thomas",
                    "last_name": "MacKay",
                    "avatar_url": null
                }
            }
        ]
    } 
```

请注意“配置文件”节点而不是“目标”节点。

我如何实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T14:54:54.217

我认为这也应该有效。在**targets/index.json.rabl**中输入：

```
collection @customers => :targets

child :profile do
  extends 'customers/profile'
end 
```

在**customers/profile.json.rabl**中：

```
object @profile
attributes :id, :username, :customer_id, :first_name, :last_name, :avatar_url 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T12:44:08.510

像这样的东西应该可以工作......目前不再使用RABL，但这就是我记得的......

```
node :profile do 
  attributes :id, :username, :customer_id, :first_name, :last_name, :avatar_url
end 
```

# mdx - MDX，带有 olap 立方体的计算成员

> ID：14844149
> 
> 赞同：0
> 
> 时间：2013-02-12T23:58:34.220
> 
> 标签：mdx, olap-cube, cubes

我有一个与 Microsoft Technologies 的多维数据集相关的问题，我们有一个基于 BIDS 2008 版本的 SSAS 多维数据集，要求是对前十二个月的测量数量进行分组（总和），并在一维中排除一些值。

我在多维数据集内提出了如下计算：

```
CREATE MEMBER CURRENTCUBE.[Measures].[N-12]
 AS Sum
    (
      (
        Except
        (
          [Dim Sistema Corporativo].[Sistema Corporativo].[Id Sistema]
         ,{
            [Dim Sistema Corporativo].[Sistema Corporativo].[Id Sistema].&[3]
           ,[Dim Sistema Corporativo].[Sistema Corporativo].[Id Sistema].&[4]
          }
        )
       ,lastperiods(12,
          [Dim Tiempo].[Fecha].CURRENTMEMBER
        )
      )
     ,
       [Measures].[importe]

    )/*Lime*/,
VISIBLE = 1  ; 
```

我得到这样的东西：

```
Row        Importe       N-12
2011    12399121166 12399121166
01.2011 1040785565  1040785565
02.2011 1069453202  2110238768
03.2011 1359303502  3469542269
04.2011 1068266294  4537808563
05.2011 1163538168  5701346731
06.2011 1146393010  6847739741
07.2011 936369144.8 7784108886
08.2011 1000363518  8784472404
09.2011 859885351.7 9644357755
10.2011 779035206.2 10423392962
11.2011 933409920.9 11356802882
12.2011 1042318283  12399121166
2012    25162093544 22225879797
01.2012 -40878580.57    11317457020
02.2012 678706164.3 10926709982
03.2012 16323643149 10555714716
04.2012 947692878   10435141301
05.2012 1057496411  10329099544
06.2012 1103249990  10285956525
07.2012 976810086.3 10326397466
08.2012 1046738046  10372771994
09.2012 1027644991  10540531634
10.2012 1108157924  10869654352
11.2012 932832484   10869076915
12.2012             9826758631
2013                22225879797
2014                22225879797
2015                22225879797
2016                22225879797
2017                22225879797
2018                22225879797
2019                22225879797
2020                22225879797
2021                22225879797
2022                22225879797
2023                9826758631 
```

如您所见，尽管用户要求我进行一些调整，但它正在做正确的事情：

第一个是，如果没有数据（标识为“importe”度量值组），多维数据集不会显示任何内容，并且如您所见，当默认度量值组没有数据时，它会显示未来几年（直到 2023 年）的空白区域.

第二个是当且仅当当前成员之前有 12 个月时，用户**才想查看数据**，例如，现在正在显示 2011 年的信息，但正如用户所说，它应该只显示 2012 年的数据，因为所有这些月份都有前 12 个月，而 2011 年没有 2010 年的数据，所以为此我应该有一个空值。

是否有可能做到这一点...？？？

或者您可以建议任何其他选项，例如直接影响事实表等等。

谢谢各位大侠指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T08:35:15.960

要检查当前成员上个月是否有 12 个，您可以使用如下表达式：

```
IIf(Count(
          NonEmpty(lastperiods(12, [Dim Tiempo].[Fecha].CURRENTMEMBER), 
                   [Measures].[importe])
          ) = 12,
    ...,
    ...) 
```

# c# - 创建具有选项卡功能的 Web 浏览器

> ID：14844150
> 
> 赞同：4
> 
> 时间：2013-02-12T23:58:43.817
> 
> 标签：c#, .net, browser

我想重新创建一个具有选项卡功能的简单浏览器。每次用户单击“button_addTab”或所选网站尝试打开新窗口时，都必须创建一个新选项卡。

这是我的代码：

**按专用按钮添加新选项卡：**

```
private void button_addTab_Click(object sender, EventArgs e)
{
    TabPage addedTabPage = new TabPage("tab title"); //create the new tab
    tabControl_webBrowsers.TabPages.Add(addedTabPage); //add the tab to the TabControl

    WebBrowser addedWebBrowser = new WebBrowser()
    {
        Parent = addedTabPage, //add the new webBrowser to the new tab
        Dock = DockStyle.Fill
    }
    addedWebBrowser.Navigate("www.google.com"); 
```

**阻止站点打开新窗口**（如果您知道每个 webBrowsers 的名称）**：**

```
private void specificWebBrowser_NewWindow(object sender, CancelEventArgs e)
{
    WebBrowser thisWebBrowser = (WebBrowser)sender;
    e.Cancel = true;    
    TabPage addedTabPage = new TabPage("tab title");
    tabControl_webBrowsers.TabPages.Add(addedTabPage);
    WebBrowser addedWebBrowser = new WebBrowser()
    {
         Parent = addedTabPage,
         Dock = DockStyle.Fill
    } 
    addedWebBrowser.Navigate(thisWebBrowser.StatusText.ToString());
 } 
```

现在我的问题是：如何修改第二个代码分支，以便在调用第一个代码时（一次）匹配所有创建的没有名称的 Web 浏览器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T00:09:55.840

尝试修改第一个函数以将事件处理程序附加到新创建的浏览器：

```
private void button_addTab_Click(object sender, EventArgs e)
        {
            TabPage addedTabPage = new TabPage("tab title"); //create the new tab
            tabControl_webBrowsers.TabPages.Add(addedTabPage); //add the tab to the TabControl

            WebBrowser addedWebBrowser = new WebBrowser()
            {
                Parent = addedTabPage, //add the new webBrowser to the new tab
                Dock = DockStyle.Fill
            };
            addedWebBrowser.NewWindow += specificWebBrowser_NewWindow;
            addedWebBrowser.Navigate("www.google.com");
        } 
```

# backbone.js - _.each 和 Collection.each 错误

> ID：14844154
> 
> 赞同：0
> 
> 时间：2013-02-12T23:59:04.813
> 
> 标签：backbone.js

我正在玩backbone.js 的[Todos 示例](http://backbonejs.org/examples/todos/index.html) ，但是当我运行save 时，toggleAllComplete 函数不会迭代集合。但是，当我改为提醒标题时，它会遍历整个集合。

```
toggleAllComplete: function () {  
    var done = this.allCheckbox.checked;  
    Todos.each(function (todo) {  
        /* this doesn't iterate over the collection */  
        // todo.save({'done': done});  
        /* this does */      
        alert(todo.get('title'));  
    });  
} 
```

为什么？

我也试过这个， `_.each(Todos.models, function(todo) {` 但同样的问题仍然存在。当我在 chrome 中使用开发人员工具时，我看到我有一个未捕获的类型错误：在主干本地存储.js 中的这一行上将循环结构转换为 JSON

```
this.localStorage().setItem(this.name+"-"+model.id, JSON.stringify(model)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T00:15:09.430

如果存在错误保存，那么它可能会阻止每个模型检查每个模型。当你发出警报时，没有错误，所以它让每个人都做自己的工作。

您可以尝试在 save 方法中加入一些回调，看看是否有助于调试。

```
todo.save({'done': done}, {
  success: function() { console.log(["success", arguments]); } 
  error: function() { console.log(["error", arguments]); }
}); 
```

# c++ - OpenGL中对象的当前坐标

> ID：14844156
> 
> 赞同：1
> 
> 时间：2013-02-12T23:59:25.447
> 
> 标签：c++, opengl, collision

我需要使用 C++/OpenGL 在两个对象之间执行静态碰撞检测。我已经编写了碰撞检测的代码，但是这段代码使用了两个模型的顶点，它们在 .obj 文件中给出，而不是它们当前位置的坐标（这是我想要的）。

我已经对两个模型执行了平移和缩放转换，我现在需要知道这些坐标是什么。我想这与变换矩阵等有关，但它如何与初始坐标相结合？

谁能帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T00:20:47.963

OpenGL 不知道模型或场景是什么，它只是将点、线和三角形绘制到像素帧缓冲区。

是时候放弃部分或全部固定功能管道了。您不应再使用 glRotate、glTranslate 和 glScale 构建模型视图矩阵。相反，您应该自己维护矩阵，使用 GLM 或 Eigen 等数学库。这为您提供了模型转换矩阵的单个实例，您可以将其应用于原始模型坐标以进行碰撞测试，但也可以使用 glLoadMatrix（如果您还应用了视图转换）或 glMultMatrix 将其加载到模型视图矩阵中 GL_MODELVIEW矩阵模式。或者你选择着色器并使用制服。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T00:03:42.960

如果您只有平移 t 和缩放 s，您可以简单地计算实际位置：

```
world_position = s * model_position + t 
```

如果您将任意变换作为矩阵 M 给出，您可以使用以下公式计算位置：

```
world_position = M * model_position 
//where model_position should be a 4d vector with w-coordinate 1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-01T05:03:55.803

我建议您首先绘制您的对象，使其质心位于原点 (0, 0, 0)

所以当你调用函数时

GL浮点矩阵MV[16]；

glGetFloatv(GL_MODELVIEW_MATRIX, matrixMV);

坐标 x, y, z

将分别为 matrixMV[12] matrixMV[13] matrixMV[14]

```
 glMatrixMode(GL_MODELVIEW);
  glLoadIdentity();
  glRotatef(-25.0, 0.0, 1.0, 0.0);
  glTranslatef(100.0, 50.0, 0.0);
  /*Draw a triangle with centroid in the orign*/
  glBegin(GL_POLYGON);

      glVertex2f(0.0 , 1.0  );
      glVertex2f(-1.0,-0.27 );
      glVertex2f(1.0 ,-0.27 );

  glEnd();

  GLfloat matrixMV[16];
  glGetFloatv(GL_MODELVIEW_MATRIX, matrixMV);

 double xCenterTriangle = matrixMV[12];
 double yCenterTriangle = matrixMV[13];
 double zCenterTriangle = matrixMV[14]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T00:37:59.707

您实际上需要对坐标执行相同的转换。

`glGetFloatv(GL_MODELVIEW_MATRIX, m)`如果您使用的是固定功能管道，您可能会在开始将一个对象绘制到一些对象之前获取当前的模型视图矩阵，`GLfloat m[16]`并存储矩阵以便稍后将它们应用于您的对象。

为了使乘法正确，这是矩阵元素从左侧相乘时的排序方式。

```
 | m[0] m[4]  m[8] m[12] |     v[0]
   | m[1] m[5]  m[9] m[13] | x   v[1]
   | m[2] m[6] m[10] m[14] |     v[2]
   | m[3] m[7] m[11] m[15] |     v[3] 
```

# html - 如何更改 CSS 中的元素显示顺序？

> ID：14844169
> 
> 赞同：0
> 
> 时间：2013-02-13T00:00:58.630
> 
> 标签：html, css

我在显示页面中的元素时遇到问题

我有像

```
<img src='test1.jpg'>
<div>
<a href='#'>change</a>
</div>

<img src='test2.jpg'>
<div>
<a href='#'>change</a>
</div>

<img src='test3.jpg'>
<div>
<a href='#'>change</a>
</div>

<img src='test4.jpg'>
<div>
<a href='#'>change</a>
</div>

<img src='test5.jpg'>
<div>
<a href='#'>change</a>
</div>

<img src='test6.jpg'>
<div>
<a href='#'>change</a>
</div> 
```

图像通过 DB 记录添加到 dom 中，我想为每个图像添加 < `div`>with change < `a`> 标签，以便为用户提供执行操作的选项（例如更改图像源）。我所有的`div`都有css

```
display: block;
float: right; 
```

并且图像有

```
display: inline-block; 
```

我的问题是

图像和 div 的顺序错误。

例如：

```
img1 img2 img3 img4 img5 img6        div6  div5 div4 div3 div2 div1 
```

单击`div6`将更改`img6`属性。

这是我需要的正确顺序

```
img1 img2 img3 img4 img5 img6        div1  div2 div3 div4 div5 div6 
```

我该如何解决这个问题？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T00:15:28.727

考虑浮动元素，因为它们正在推入堆栈。如果你想让 div 看起来像

***div1 div2 div3***

然后你必须按这个顺序把它推到dom

***div3 div2 div1***

但是，更简单和更常见的方法是使用**jQuery**获取单击的 div 的索引并将更改应用于具有相同索引的图像。这是一个示例，它将在单击相应的 div 时隐藏图像：

```
$("div").click(function(){
    var idx = $(this).index();
    $("img:eq("+idx+")").hide(); //change that to whatever operation you want to do on the image
}); 
```

* * *

这可能有用：

*   [http://docs.jquery.com/Selectors/eq](http://docs.jquery.com/Selectors/eq)
*   [http://api.jquery.com/index/](http://api.jquery.com/index/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T00:26:19.887

我不确定放置/用户交互是否理想，但是如果您真的希望`img`s 排列在左侧并按顺序排列，而`div`s 排列在右侧并按顺序排列...

将`div`s 放入容器 div 并使用`float: right`.

您不需要任何额外的样式；较小`div`的 s 不需要`display`或`float`指定，`img`也不需要`display`指定。

# javascript - 如何在jQuery中获取溢出元素的可见高度

> ID：14844172
> 
> 赞同：0
> 
> 时间：2013-02-13T00:01:13.663
> 
> 标签：javascript, jquery, css, height, width

我有一个在调用函数之前隐藏溢出的元素。我试图确定在我设置*后*`overflow: visible;`鼠标是否悬停在此溢出材料上，但相反，它告诉我我的鼠标悬停在溢出内容上，即使它仍然不可见。

有没有办法在 jQuery 中检查可见高度？这是我正在尝试的：

```
 off = $(curSub).offset();
    xSubStart = parseInt(off.left);
    ySubStart = parseInt(off.top);
    xSubEnd = xSubStart + parseInt($(curSub).width());
    ySubEnd = ySubStart + parseInt($(curSub).height());

    if ( (x >= xStart && x <= xEnd && y >= yStart && y <= yEnd) ||
         (x >= xSubStart && x <= xSubEnd && y >= ySubStart && y <= ySubEnd) ) {
        // display menu
        $(cur).css('overflow', 'visible');
        match = true;
    } 
```

,`xStart, xEnd, yStart`和`yEnd`变量在该代码上方定义并且可以正常工作。我认为问题在于 jQuery 函数`width(), height(), outerWidth()`，并且`outerHeight()`不要测试该元素是否可见。

有没有办法做到这一点？我考虑过将它从隐藏到物理上的可见与`top`规范`left`，但我认为如果可能的话，这种方式会更干净。

希望有人知道答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T08:16:11.470

问题是 JavaScript 在执行下一行代码之前没有完成操作。

您可以使用回调函数：

```
var setHoverAfterOverFlowVisible = function(cur, callback) {
    $(cur).css('overflow', 'visible');
    match = true;
    //other stuff

    callback();
}

setHoverAfterOverFlowVisible(cur, /*hoverFunction*/); 
```

有关回调的更多信息：[http ://www.impressivewebs.com/callback-functions-javascript/](http://www.impressivewebs.com/callback-functions-javascript/)

# sql - 从表中查询 NULL 值 - SQL

> ID：14844173
> 
> 赞同：-1
> 
> 时间：2013-02-13T00:01:20.800
> 
> 标签：sql, oracle11g

我有一个包含参考 id 列的表。此参考 id 列包含某些行的主键。现在我想从表中过滤所有包含 NULL 的其余值。
**桌子**

```
PK   REFERENCE_ID
1        1
2        NULL
3        3
4        NULL
5        ab 
```

下面的查询带来了所有具有 reference_id 但我想获取 REFERENCE_ID 列的所有 NULL 值的结果

```
select count(*)from table where table.ID not in (select table.reference_id from person) 
```

我用过也存在但没用。重要的是我参考 PK 搜索它，因为我想从 PK 以外的列 REFERENCE_ID 中获取所有值，包括 NULL 值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T04:33:22.213

也许我仍然不清楚您要做什么，但是将原始查询的元素与 结合起来会起作用`IS NULL`吗？

```
SELECT PK, Reference_ID
FROM table 
WHERE table.Reference_ID NOT IN (select PK from table)
  OR table.Reference_ID IS NULL 
```

**编辑：**我不确定 Reference_ID 字段中的“ab”。如果 Reference_ID 是 varchar 或类似字段，您可能需要这个：

```
SELECT PK, Reference_ID
FROM table 
WHERE table.Reference_ID NOT IN (select cast(PK as varchar(5)) from table)
  OR table.Reference_ID IS NULL 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T00:03:35.840

你有没有尝试过：

```
SELECT Reference_ID
FROM Table
WHERE Reference_ID IS NULL; 
```

# google-chrome - 无法将内容脚本注入 YouTube

> ID：14844174
> 
> 赞同：0
> 
> 时间：2013-02-13T00:01:36.217
> 
> 标签：google-chrome

这个问题更多是为了他人的利益和我自己的好奇心，因为我现在已经综合了一个解决方法（使用`"matches": ["http://*/*", "https://*/*"]`and `if (location.hostname == "www.youtube.com")`.

无论如何，当我遇到这样的问题时，我会将代码分解成越来越简单的形式，直到它开始工作。然后我可以弄清楚是什么让代码出错了。但是我现在已经达到了它无法变得更简单并且仍然无法正常工作的地步。Chrome 只是不会将内容脚本注入任何 YouTube 页面。

**文件**（[下面的 ZIP 链接](https://dl.dropbox.com/u/27573003/Social%20Distribution/contentScript_YouTube.zip)）

清单.json：

```
{
    "name": "test",
    "version": "0",
    "manifest_version": 2,

    "content_scripts": [ 
        {
            "js": [
                "test.js"
            ],
            "matches": [
                "*://youtube.com/*"
            ],
            "run_at": "document_end",
            "all_frames": true
        }
    ]
} 
```

测试.js：

```
alert("test"); 
```

**进步**

不起作用：

*   改变值并静态定义（无通配符）`matches`URL
*   改变的值`run_at`
*   改变的值`all_frames`
*   改变脚本`test.js`
*   在全新安装的 Windows 7 x64 上全新安装 Chrome v24.0.1312.57

是否有效：

*   将值更改为`matches`YouTube 以外的任何内容
*   `matches`将值更改为`"http://*/*", "https://*/*"`

我觉得我在这里遗漏了一些*非常*明显的东西，但已经好几天了.. ;/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T18:24:20.250

如果您将清单中的匹配定义为“ [http://www.youtube.com/](http://www.youtube.com/) *” ，这对我有用

# jquery - jquery mouseover 区域获取元素

> ID：14844176
> 
> 赞同：0
> 
> 时间：2013-02-13T00:01:40.717
> 
> 标签：jquery, touch, swipe

所以我有一段代码记录用户用鼠标左右滑动或触摸移动设备时的日志。

不过，我需要做的是在该区域内的某些元素上停止此操作。因此，例如，此代码将记录我的 mainContainer 中的任何滑动

```
var maxTime = 1000,
// allow movement if < 1000 ms (1 sec)
maxDistance = 50,
// swipe movement of 50 pixels triggers the swipe
target = jQuery('#mainContainer'),
startX = 0,
startTime = 0,
touch = "ontouchend" in document,
startEvent = (touch) ? 'touchstart' : 'mousedown',
moveEvent = (touch) ? 'touchmove' : 'mousemove',
endEvent = (touch) ? 'touchend' : 'mouseup';

target.bind(startEvent, function(e) {
    // prevent image drag (Firefox)
    // e.preventDefault();
    startTime = e.timeStamp;
    startX = e.originalEvent.touches ? e.originalEvent.touches[0].pageX : e.pageX;
}).bind(endEvent, function(e) {
    startTime = 0;
    startX = 0;
}).bind(moveEvent, function(e) {
    // e.preventDefault();
    var currentX = e.originalEvent.touches ? e.originalEvent.touches[0].pageX : e.pageX,
        currentDistance = (startX === 0) ? 0 : Math.abs(currentX - startX),
        // allow if movement < 1 sec
        currentTime = e.timeStamp;
    if (startTime !== 0 && currentTime - startTime < maxTime && currentDistance > maxDistance) {

        console.log(startEvent);
        if (currentX < startX) {
            // swipe left code here
           console.log("swipe left");
        }
        if (currentX > startX) {
            // swipe right code here
           console.log("swipe right");
        }
        startTime = 0;
        startX = 0;
    }
}); 
```

但是在 mainContainer 我有一些滑块，当它们移动时我不想获取日志（触发条件）。

我所有的滑块都有类滑块。

我正在考虑使用 if 语句来说明鼠标/触摸开始的位置是否在此类内，则该事件不会发生。也许这是错误的方法？

如果这是一个好方法 - 我怎么知道鼠标/触摸是否在这个区域？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T00:08:39.330

只需检查 event.target 是否有类`.slider`：

```
target.bind(startEvent, function(e) {
     if ( !$(e.target).is('.slider') ) {
         startTime = e.timeStamp;startX = e.originalEvent.touches ?   
                         e.originalEvent.touches[0].pageX : 
                         e.pageX;
     }
}).bind(... 
```

# types - 常规 ol' 网页的正确 OG 类型是什么？

> ID：14844177
> 
> 赞同：0
> 
> 时间：2013-02-13T00:01:44.450
> 
> 标签：types, facebook-opengraph

我已经尝试多次问这个问题，我会一直问，直到有人回答我。

Facebook 表示不要使用除根主页之外的“网站”，因为它应该用于表示“整个网站”（而不是网站上的单个页面）。

OpenGraph 协议网站说对所有非文章或其他 OG 类型的网页使用“网站”。

哪个是对的？

想象一下网站上关于描述公司提供的服务的页面。该页面的内容不是视频、电影、人物、公司、博客文章或新闻文章等“临时内容”或任何其他内置类型。

如果页面是共享的，则您不是在共享“网站”，而是在网站上共享网页。这种常见形式的一般内容的正确 OG 类型是什么？网站或文章？

这就是我想知道的。这不是一个模糊的问题。这是一个非常具体的问题。求大神解答！我们想把这件事做好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T00:35:21.733

我的输入是这样的：

根据开发人员文档中的信息，[特别是这里](https://developers.facebook.com/docs/opengraphprotocol/#type)，我会解释“网站”是您整个网站的一种类型 - 一个网站范围内的所有页面。[网站类型](http://graph.facebook.com/schema/og/website)的模式似乎支持这种解释——它是几乎所有其他类型的抓包，这意味着 Facebook 预计在对网站进行分类时几乎会偶然发现任何东西。对我来说，这意味着“网站”仅比“任何旧事物”更具体一步，您最好尝试将各个页面更好地分类为“网站”以外的其他内容。

当考虑到开发人员文档中的下一段鼓励您在单个页面不适合内置类型时为它们指定自己的类型时，我认为保守的做法是将网站用作整个网站. 如果您可以将站点放入[“文章”模式](http://graph.facebook.com/schema/og/article)，这就是我指定单个页面的方式。如果它不合适，那么就尽可能地对其进行分类，并希望 Facebook 能够让您能够在未来为您的特定页面类型指定更多元数据。

另外需要注意的是：这些都只是对 Facebook 的元数据“提示”，以帮助他们更好地了解您的网站。在页面上指定类型可以让他们对页面的意图有所了解，但这不是具有约束力的合同。如果您不指定此元数据，他们仍然可以正常使用您的网站或页面，即使您没有最佳地告知他们您的网站正在做什么。

# c# - 我可以使用标签作为条形码表示吗？

> ID：14844178
> 
> 赞同：0
> 
> 时间：2013-02-13T00:01:51.873
> 
> 标签：c#, dynamic, fonts, label

我解析了一个字符串，它的内部包含一个条形码值（例如 02410103775）。

我为它动态创建一个标签，如下所示：

```
private void PrintBarcodeGettingInTouchWithItsInnerZebra(string lineToParse)
{
    string barcodeText = GetBarcodeVal(lineToParse);
    int barcodeHeight = Convert.ToInt32(GetBarcodeHeight(lineToParse));
    int barcodeVertStartPos = GetBarcodeNextVerticalStartingPoint(lineToParse);

    Label lblBarcode = new Label();
    lblBarcode.Text = barcodeText;
    lblBarcode.Font = new Font(lblBarcode.Font.Name, barcodeHeight, lblBarcode.Font.Style);
    lblBarcode.Top = barcodeVertStartPos;
    lblBarcode.Left = GetBarcodeNextHorizontalStartingPoint(lineToParse); 
    //lblBarcode.Parent = panel2by1LabelProxy; // <-- Is this preferred, or the line below?
    panel2by1LabelProxy.Controls.Add(lblBarcode);
} 
```

现在它只是显示条形码值“原始”（如“02410103775”左右）；有没有办法将标签文本变成条形码表示？我希望它就像知道正确的字体一样微不足道。要使用的名称......

# xpath - 如何使用 XPath 查找是否存在与 selenium 同名的第二个元素？

> ID：14844180
> 
> 赞同：0
> 
> 时间：2013-02-13T00:02:08.143
> 
> 标签：xpath, selenium, webdriver, selenium-webdriver

我已经知道表中元素的文本：

```
string title1 = Driver.FindElement(
  By.XPath(
    ".//[@id='ctl00_ContentPlaceHolder1_BreakdownGridView_ctl02_TitleLabel']"
  )).Text; 
```

如何验证表中是否有第二个元素与 title1 具有相同的文本？

这是我的表结构：

```
<tr class="alt" style="background-color:White;height:110px;">
  <td>
     <span id="ctl00_ContentPlaceHolder1_BreakdownGridView_ctl03_WindowStartLabel" tabindex="1">
        01/13/2013
     </span>
  </td>
  <td>
     <span id="ctl00_ContentPlaceHolder1_BreakdownGridView_ctl03_ShowLabel" tabindex="1">
       Lea‌​der of the Pack
     </span>
  </td>
  <td>
    <span id="ctl00_ContentPlaceHolder1_BreakdownGridView_ctl03_TitleLabel">
       Love at First Bite
    </span>
  </td>
  <td>
     <span id="ctl00_ContentPlaceHolder1_BreakdownGridView_ctl03_PremiereLabel">
        01/12/2013 22:00
     </span>
  </td>
  ...
</tr> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T04:33:31.377

在您的表结构中，执行如下的 xpath 查询将选择所有*跨度*标记。

```
//tr/td/span 
```

现在，可以使用 xpath 来选择具有特定文本的*span*标签，如下所示：

```
//tr/td/span[text() = "Text you're matching against"]

/* in your case*/

//tr/td/span[text() = title1] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T05:25:48.760

获得 title1 后，尝试实现类似下面的逻辑，以查找有多少元素具有相同的文本

```
int count=driver.findElements(By.xpath("//table[@id='urTable']//*[text()='"+title1+"']")).size(); 
```

根据计数，很容易找到具有相同文本的元素数量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T08:37:22.403

这是为了让跨度包含该文本....（部分匹配）

```
int count= driver.FindElements(
  By.XPath(
    ".//span[contains(text(),'"+titleOneText+"')]"
  )).size(); 
```

这是为了让 spans 文本相同....（完全匹配）

```
int count= driver.FindElements(
  By.XPath(
    ".//span[text()='"+titleOneText+"']"
  )).size(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T08:23:40.423

根据您的问题，如果相同的 xpath 值具有 2 个元素。只需查看特定元素的静态值并将其作为 xpath。它肯定会起作用。例如

具有相同 xpath 值的保存和取消按钮

```
driver.find_element_by_xpath("//*[@id='id_sav']")-save
driver.find_element_by_xpath("//*[@id='id_sav']")-cancel 
```

这里我们可以使用静态元素值

```
driver.find_element_by_xpath("//a[text()='save']")-save
driver.find_element_by_xpath("//a[text()='cancel']")-cancel 
```

# java - EditText XML 参考问题

> ID：14844182
> 
> 赞同：0
> 
> 时间：2013-02-13T00:02:24.170
> 
> 标签：java, android, xml

希望这是一个简单的。

我在这里有一个非常简单的问题，我似乎无法解决。我只是试图通过使用 findViewById 等将我的 XML 布局中的 EditText 引用到代码中。出于某种原因，我尝试清理项目并重新生成我的 R 资源文件，以及 ctrl+o 来检查导入我无法让 Eclipse 在 XML 布局中“看到”指向 EditText 的链接。

希望有人可以帮助我解决这个令人沮丧和简单的错误。

目前的错误是：

```
totalListPrice cannot be resolved or is not a field 
```

这是用于引用 'totalListPrice; 的简单代码；在我的 XML 到我的代码中的 EditText：

```
totalPrice = (EditText)findViewById(android.R.id.totalListPrice); 
```

这是我的 XML 布局（有问题的 EditText 已被标记）：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical">

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="84dp"
    android:orientation="horizontal" 
    android:focusableInTouchMode="false">

    <ImageView
        android:id="@+id/imgLink"
        android:layout_width="78dp"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical"
        android:src="@drawable/viewcon" />

    <TextView
        android:id="@+id/textView1"
        android:layout_width="match_parent"
        android:layout_height="75dp"
        android:gravity="center"
        android:text="Shopping List"
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:textSize="35sp"
        android:focusableInTouchMode="false"
        android:clickable="false"
        android:focusable="false" />
</LinearLayout>

<TextView
    android:id="@+id/txtItemDes"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:clickable="false"
    android:focusable="false"
    android:focusableInTouchMode="false"
    android:text="Search From An Item In The List:"
    android:textAppearance="?android:attr/textAppearanceMedium" />

<EditText
    android:id="@+id/inputAppointName"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:ems="10"
    android:hint="Enter An Item Name" >

    <requestFocus />
</EditText>

<Button
    android:id="@+id/btnAddItem"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:text="Add"/>

<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="56px"
    android:orientation="horizontal" >

    <TextView
        android:id="@+id/txtPrice"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Total Price:"
        android:textAppearance="?android:attr/textAppearanceMedium" />
     *************ERROR*************
    <EditText
        android:id="@+id/totalListPrice"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:ems="10"
        android:inputType="number"></EditText>

</LinearLayout>

<ListView
    android:id="@android:id/list"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >
</ListView>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T00:03:42.193

您不需要 R 前面的“android”。相反，从您自己的包中导入生成的 R 文件（您应该能够删除该`import android.R`行并将其替换为您的 R 导入很容易）。

它应该只是`R.id.totalListPrice`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T00:04:14.350

它应该是

```
R.id.totalListPrice 
```

不是

```
android.R.id.totalListPrice 
```

`R`在你的java文件中导入本地类而不是`R`android框架的类

```
import <your package name>.R; 
```

# c# - 带有返回变量的函数的 C# 线程

> ID：14844185
> 
> 赞同：2
> 
> 时间：2013-02-13T00:02:45.553
> 
> 标签：c#, function

好的，所以基本上我有一个返回字符串的函数，但是要获取该字符串，它使用 webrequest 这意味着当它执行该 webrequest 时，表单将被锁定，除非我将它放在不同的线程中。

但是我想不出一种方法来捕获线程中返回的数据，因为它是使用 thread.start 开始的，这是一个无效的。

请问有什么帮助吗？

当前代码（如果对任何人都重要）：

```
string CreateReqThread(string UrlReq)
{
    System.Threading.Thread NewThread = new System.Threading.Thread(() => CreateReq(UrlReq));
    string ReturnedData = "";
    return ReturnedData;
}

string CreateReq(string url)
{
    try
    {
        WebRequest SendReq = WebRequest.Create(url);

        SendReq.Credentials = CredentialCache.DefaultCredentials;
        SendReq.Proxy = WebRequest.DefaultWebProxy;                 //For closed port networks like colleges
        SendReq.Proxy.Credentials = CredentialCache.DefaultCredentials;
        SendReq.Timeout = 15000;

        System.IO.StreamReader Reader = new System.IO.StreamReader(SendReq.GetResponse().GetResponseStream());
        string Response = Reader.ReadToEnd();
        Reader.Close();
        return Response;
    }
    catch (WebException e)
    {
        EBox(e.Message, "Unknown Error While Connecting");
        return null;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T00:07:32.877

这样做的一种常见方法是使用 a`Task<T>`而不是线程：

```
Task<string> CreateReqThread(string UrlReq)
{
    return Task.Factory.StartNew() => CreateReq(UrlReq));

    // In .NET 4.5, you can use (or better yet, reimplement using await/async directly)
    // return Task.Run(() => CreateReq(UrlReq));
} 
```

然后，您可以在需要时调用`Task<T>.Result`以获取返回值（稍后），或者安排任务的*延续*，该任务将在完成时运行。

这可能看起来像：

```
var request = CreateReqThread(theUri);
request.ContinueWith(t =>
{
     // Shove results in a text box
     this.textBox.Text = t.Result;
}, TaskScheduler.FromCurrentSynchronizationContext()); 
```

这也与C# 5 中的新`await`/支持完美配合。`async`

# mysql - 仅从 MySQL 中的 datetime (YYYY-MM-DD HH:MM:SS) 中选择不同的日期

> ID：14844186
> 
> 赞同：7
> 
> 时间：2013-02-13T00:02:51.637
> 
> 标签：mysql, sql

执行这个命令给我带来了以下结果（所有列中的所有日期，所以它本质上与 SELECT date 没有区别）：

```
SELECT DISTINCT date FROM daily ORDER BY date DESC

2013-02-12 16:40:52
2013-02-06 11:48:49
2013-02-06 11:36:41
2013-02-06 11:35:59
2013-02-04 19:38:12
2013-02-04 18:12:30
2013-02-04 09:58:41
2013-02-04 09:43:01
2013-02-04 09:35:51
2013-02-04 09:30:22
2013-02-04 09:24:57
2013-02-04 09:21:09
2013-02-04 08:50:13 
```

我需要的：

```
2013-02-12
2013-02-06
2013-02-04 
```

1.  有什么方法可以更改我的日期表并将其转换为 YYYY-MM-DD 吗？

2.  如果没有，有没有办法仅根据日期选择不同的日期？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-13T00:09:47.117

```
mysql> select DATE_FORMAT(Current_Timestamp, '%c %d %Y') from dual;
+--------------------------------------------+
| DATE_FORMAT(Current_Timestamp, '%c %d %Y') |
+--------------------------------------------+
| 2 12 2013                                  |
+--------------------------------------------+
1 row in set (0.01 sec)

mysql> 
```

当然你会使用你的“日常”表。

```
mysql> select DATE_FORMAT(Date, '%c %d %Y') from daily; 
```

或者你可能想要

```
mysql> select * from daily group by DATE_FORMAT(Date, '%c %d %Y'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-14T07:54:02.270

试试这个：

```
SELECT DISTINCT(CONVERT(VARCHAR, CONVERT(DATETIME,[DATE]),23)) AS DT  
FROM DAILY
ORDER BY DT ASC 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-07-31T08:37:16.617

它非常简单地使用 DATE() 函数。

例子：

```
SELECT DISTINCT DATE(date)
    FROM daily
    ORDER BY date
    DESC 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-03-29T14:21:33.080

所以我刚刚在 sgeddes 答案中添加了一小部分，这对我来说很接近工作，但我必须作为：AS date_change 以便我可以列出这些值。

```
$sql = "SELECT DISTINCT DATE_FORMAT(yourdate, '%Y-%m-%d') as date_change FROM 
daily ORDER BY (yourdate) DESC LIMIT 10";
$result = $conn->query($sql);

if ($result->num_rows > 0) {

 // output data of each row
 while($row = $result->fetch_assoc()) {
 $test = $row['date_change'];
    echo $test.'<br>';

  }

} else {
echo "0 results";
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-02-12T10:27:23.927

我发现在 > N 百万的大型数据集上，按 DATE_FORMAT 分组可能比使用慢 10-20%；

```
 GROUP BY someid,year(date),month(date),day(date) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-13T00:09:36.970

对于 MySQL，您可以使用`DATE(date)`仅返回日期。如果要格式化，请使用`DATE_FORMAT`：

```
SELECT DISTINCT DATE_FORMAT(yourdate, '%Y-%m-%d') 
FROM daily ORDER BY DATE(yourdate) DESC 
```

您无法更改数据库存储这些值的方式。

这是小提琴：[http ://sqlfiddle.com/#!2/f50527/6](http://sqlfiddle.com/#!2/f50527/6)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-05-11T03:37:08.040

在访问数据库中

```
SELECT DISTINCT Format(date, 'Short Date')
  FROM daily
 ORDER BY Format(date, 'Short Date') DESC; 
```

# php - 从块数组返回唯一值

> ID：14844187
> 
> 赞同：0
> 
> 时间：2013-02-13T00:02:59.423
> 
> 标签：php, string, array-unique

我有一个输出到文本文件的日历脚本。我正在打开文本文件，将其读入数组，然后输出结果。文本文件包含：

```
7/9/2013-7/13/2013
Hot Stuff
By Robert More. Yes, folks, it's all platform shoes, leisure suits..
hotstuff.jpg
1,1,0,
*-*
7/16/2013-7/20/2013
Hot Stuff
By Robert More. Yes, folks, it's all platform shoes, leisure suits.. 
hotstuff.jpg
1,1,0,
*-* 
```

我的 PHP 代码如下所示：

```
$content = file('DC_PictureCalendar/admin/database/cal2data.txt');
$content_chunked = array_chunk($content, 6);
            if (count($content_chunked > 0))
            {
                echo "<table>";
                for ($i=0;$i<count($content_chunked);$i++)
                {
                    echo "<tr>";
                    echo "<td valign='top'>";
                    echo "<div style='padding-top:6px;'>";
                    echo "<a href='schedule.php'>";
                    echo "<img src='DC_PictureCalendar/admin/database/images/".$content_chunked[$i][3]."' width='80' height='80' border='2'>";
                    echo "</a>";
                    echo "</div>";
                    echo "</td>";
                    echo "<td valign='top'>";
                    echo "<div style='padding-left:5px;'>";
                    echo "<table>";
                    echo "<tr>";
                    echo "<td>";
                    echo "<h2>";
                    echo "<a href='schedule.php'>";
                    echo $content_chunked[$i][1];
                    echo "</a>";
                    echo "</h2>";
                    echo "</td>";
                    echo "</tr>";
                    echo "<tr>";
                    echo "<td>";
                    echo $content_chunked[$i][2];
                    echo "<a class='green' href='schedule.php'>";
                    echo "Read more..";
                    echo "</a>";
                    echo "</td>";
                    echo "</tr>";
                    echo "</table>";
                    echo "</div>";
                    echo "</td>";
                    echo "</tr>";
                }
                echo "</table>";
            } 
```

问题是，如果 $content_chunked[$i][1] （在这种情况下是标题）中有重复的条目，我只想显示一次而不是两次。这可能吗？我认为 array_unique 可能有效，但似乎没有帮助。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T00:26:55.077

[array_unique() 返回](http://php.net/manual/en/function.array-unique.php)没有重复的数组，但不修改原始数组！

所以：

```
$a = [1, 1, 2, 3]
array_unique($a) => [1, 2, 3]
$a => [1, 1, 2, 3] 
```

新数组需要保存在一个变量中，以便您以后访问它。

```
$a = [1, 1, 2, 3]
$b = array_unique($a)
$b => [1, 2, 3] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T00:28:06.753

尽管它可能不是最优雅/最有效的..在相关位置添加：

```
echo "<table>";
$titles = array();
for ($i=0;$i<count($content_chunked);$i++)
{
      if (in_array($content_chunked[$i][1], $titles)) continue;
      $titles[] = $content_chunked[$i][1] 
```

# cordova - PhoneGap Build 中 Android 的横向闪屏

> ID：14844189
> 
> 赞同：10
> 
> 时间：2013-02-13T00:03:09.670
> 
> 标签：cordova, landscape, phonegap-build, splash-screen

我应该输入`config.xml`什么或一般应该做什么，才能让 PhoneGap Build 应用程序的启动屏幕在 Android 设备上以横向模式正确显示？

PhoneGap Build（用于编译）[文档](https://build.phonegap.com/docs/config-xml#splashes)/[博客](https://build.phonegap.com/blog/enhanced-icon-and-splash-support)对此一无所知。仅适用于 Android 的肖像。

由于 first (docs) 说 using `height`and`width`是跨平台支持的，所以我尝试使用它：

```
<gap:splash src="res/splash-200x320-android.png"             gap:platform="android" gap:density="ldpi"  width="200" height="320" />
<gap:splash src="res/splash-320x480-android-bada-ios.png"    gap:platform="android" gap:density="mdpi"  width="320" height="480" />
<gap:splash src="res/splash-480x800-android-bada-wp.png"     gap:platform="android" gap:density="hdpi"  width="480" height="800" />
<gap:splash src="res/splash-720x1280-android.png"            gap:platform="android" gap:density="xhdpi" width="720" height="1280" />
<gap:splash src="res/splash-320x200-android.png"             gap:platform="android" gap:density="ldpi"  width="320" height="200" />
<gap:splash src="res/splash-480x320-android-bada-ios.png"    gap:platform="android" gap:density="mdpi"  width="480" height="320" />
<gap:splash src="res/splash-800x480-android-bada-wp.png"     gap:platform="android" gap:density="hdpi"  width="800" height="480" />
<gap:splash src="res/splash-1280x720-android.png"            gap:platform="android" gap:density="xhdpi" width="1280" height="720" /> 
```

但是没有效果——在我的 Android 设备上的横向模式下，我总是看到我的初始屏幕的严重的 strechead portait 模式版本。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-14T20:48:40.147

根据我目前的知识和深入研究，我发现这是一个已确认的错误，我们目前对此无能为力。

PhoneGap Build（可能还有 PhoneGap 本身）目前根本不支持横向闪屏。我什至尝试了 iOS 方式（如问题所示——使用`width`和`height`参数，Android 官方不支持）。但它仍然不起作用。

在纵向模式下一切都很好，但无论您使用何种屏幕密度的 Android 设备——在横向模式下，您都会看到丑陋的变形纵向版本的初始屏幕。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-20T10:56:56.603

我没有使用 PhoneGap Build，但我设法在一个基本的 PhoneGap Android 应用程序中解决了这个问题。

假设您有两个不同的初始图像 - 横向和纵​​向版本 - 您希望它们都拉伸以填充可用的屏幕区域。

一个放进去`drawable`，另一个放进去`drawable-land`。（或者`drawable-land-hdpi`,`drawable-land-xhdpi`等，如果您有多种尺寸。）

接下来，确保您自己管理配置更改`AndroidManifest.xml`：

```
<activity
    ...
    android:configChanges="orientation|screenSize|keyboardHidden"
    ...
>
</activity> 
```

然后把它放在扩展的主 Activity 类中`DroidGap.java`：

```
@Override
public void onConfigurationChanged(Configuration newConfig) {
    super.onConfigurationChanged(newConfig);

    if (super.splashDialog != null) {
        ViewGroup rootView = (ViewGroup) super.splashDialog.getWindow()
                .getDecorView().findViewById(android.R.id.content);
        LinearLayout linearLayout = (LinearLayout) rootView.getChildAt(0);
        // manually refresh the splash image
        linearLayout.setBackgroundDrawable(null);
        linearLayout.setBackgroundResource(R.drawable.mysplash);
    }
} 
```

这将导致背景图像在用户改变方向时重新绘制并正确拉伸。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-06-19T09:36:57.117

Phonegap Build 现在使用[Cordova 配置风格](https://cordova.apache.org/docs/en/latest/reference/cordova-plugin-splashscreen/#example-configuration)。指定时`density`，追加`port-`或`land-`指定纵向或横向：

```
<splash src="portrait-ldpi.png" density="port-ldpi"/>
<splash src="landscape-ldpi.png" density="land-ldpi"/> 
```

* * *

*老配置风格*

自 2014 年 4 月以来，它可以在 Phonegap Build 中使用`gap:qualifer`，例如

```
<gap:splash src="portrait-xxhdpi.png" gap:platform="android" gap:qualifier="port-xxhdpi" />
<gap:splash src="landscape-xxhdpi.png" gap:platform="android" gap:qualifier="land-xxhdpi" /> 
```

有关详细信息，请参阅[本文](http://phonegap.com/blog/2014/04/11/phonegap-build-adds-some-new-features/)和[本文](http://docs.build.phonegap.com/en_US/configuring_icons_and_splash.md.html)。

# c# - 使用 MVC 4 的错误必需属性

> ID：14844196
> 
> 赞同：0
> 
> 时间：2013-02-13T00:03:42.657
> 
> 标签：c#, asp.net-mvc, entity-framework

大家好，我需要一些帮助（再次），我正在玩一个 MVC 4 项目，我使用 Code First 创建了我的模型，当我构建项目时我没有收到任何错误，但是当我尝试在其中添加新记录时**Proyectos**表我得到一些**属性是必需的**但这些属性来自另一个实体的错误。

产生错误的属性是来自 Usuario 实体的 UserName、Password 和 Nombre 以及来自 Status 实体的 Description。

我会感谢你的帮助。

更新 1：如果我在 Usuario 和 Status 的属性中注释 [Required] 行，我会收到此错误**{"Cannot insert the value NULL into column 'Descriptcion', table 'NTSControl.dbo.tbStatus'; column does not allow nulls. INSERT 失败。\r\n语句已终止。"}**

但是为什么要尝试在该表中插入一个值？

这是代码

```
//Model Proyecto
public class Proyecto
{

    [Required (ErrorMessage="Número de Proyecto Es Requerido")]
    [Key]
    [Display(Name = "Num. Proyecto")]
    public virtual String ProyectoID { get; set; }

    [Required (ErrorMessage="ID de Usuario Requerido ")]
    [Display(Name = "ID Usuario")]
    public virtual int UserID { get; set; }

    [Required (ErrorMessage="Order de Compra Es Requerido")]
    [Display(Name = "O.C. Cliente")]
    public virtual String OCCliente { get; set; }

    [Required (ErrorMessage="El Monto Del Proyecto Es Requerido")]
    [Display(Name = "Monto")]  
    public virtual decimal Monto { get; set; }

    [Required (ErrorMessage="Numero de Cotizacion Es Requerido")]
    [Display(Name = "Cotizacion NTS")]
    public virtual String CotizacionNTS { get; set; }

    [Required(ErrorMessage="Fecha De Inicio Es Requerido")]
    [DisplayFormat(DataFormatString = "{0:d}", ApplyFormatInEditMode = true)]
    [Display(Name = "Fecha De Inicio")]
    public virtual DateTime FechaInicio { get; set; }

    [Display(Name = "Fecha de Fin")]
    public virtual DateTime? FechaFin { get; set; }

    [Display(Name = "Tipo de Moneda")]
    public virtual String TipoMoneda { get; set; }

    [Display(Name = "Descripcion")]
    public virtual String Descripcion { get; set; }

    [Display(Name = "Monto M.N.")]
    public virtual Nullable<decimal> MontoMN { get; set; }

    [Display(Name = "Tipo de Cambio")]
    public virtual Nullable<decimal> CambioMoneda { get; set; }

    [Required]
    [Display(Name = "Status")]
    public virtual int StatusID { get; set; }

    public virtual Status Statuses { get; set; }
    public virtual Usuario Usuarios { get; set; }

    public virtual ICollection<Comentario> Comentarios { get; set; }
    public virtual ICollection<Abono> Abonos { get; set; }
    public virtual ICollection<Cargo> Cargos { get; set; }

    }

    //DBContext

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        Database.SetInitializer<NTSControlDB>(null);
        modelBuilder.Conventions.Remove<PluralizingTableNameConvention>();

        #region Mapping Proyectos
            //Mapping Atributes with Field Proyectos
            modelBuilder.Entity<Proyecto>()
                .Map(m =>
                {
                    m.ToTable("tbProyecto");
                })
                .HasRequired(s => s.Statuses)
                .WithMany()
                .HasForeignKey(s => s.StatusID)
                .WillCascadeOnDelete(false);

            modelBuilder.Entity<Proyecto>()
                .HasRequired(u => u.Usuarios)
                .WithMany()
                .HasForeignKey(u => u.UserID)
                .WillCascadeOnDelete(false);
    }

    //Create Proyecto Controller

    [HttpPost]
    public ActionResult Create(Proyecto proyecto)
    {

        proyecto.UserID = proyecto.Usuarios.UserID;
        proyecto.StatusID = proyecto.Statuses.StatusID;

        try
        {          
                db.Proyectos.Add(proyecto);
                db.SaveChanges();
                return RedirectToAction("Index");
        }
        catch (DbEntityValidationException ex)
        {
            foreach (var validationErrors in ex.EntityValidationErrors)
            {
                foreach (var validationError in validationErrors.ValidationErrors)
                {
                    Trace.TraceInformation("Property: {0} Error: {1}", validationError.PropertyName, validationError.ErrorMessage);
                }
            }

        }
        return View();
    }

 public class Usuario
{
    [Required]
    [Key]
    [Display(Name = "Id")]
    public virtual int UserID { get; set; }

    [Required]
    [MaxLength(3)]
    [Display(Name = "Usuario")]
    public virtual String UserName { get; set; }

    [Required]
    [Display(Name = "Password")]
    public virtual String Password{ get; set; }

    [Required]
    [Display(Name = "Nombre")]
    public virtual String Nombre { get; set; }

    [Display(Name = "Email")]
    public virtual String Email { get; set; }

    [Required]
    [Display(Name = "Nivel")]
    public virtual int Nivel { get; set; }        
}

public class Status
{
    [Required]
    [Key]
    [Display(Name = "Id")]
    public virtual int StatusID { get; set; }

    [Required]
    [Display(Name = "Descripcion")]
    public virtual string Descripcion { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T00:11:53.507

您的“Proyecto”类中有“Usuario”对象：

```
public virtual Usuario Usuarios { get; set; } 
```

其中用户名、密码等都是【必填】。如果你注释掉 [Required] 它会让你保存它，对吗？

# javascript - 动态地将网页垂直装入浏览器

> ID：14844199
> 
> 赞同：3
> 
> 时间：2013-02-13T00:04:03.780
> 
> 标签：javascript, css, resize, liquid, fluid-layout

我对这一切都比较陌生，上周一直在研究一个页面。到目前为止，我发现这个站点非常有用，但我似乎无法让我的页面在垂直方向上完全动态地适应浏览器窗口。我希望它缩小元素，使其完全适合浏览器而无需垂直滚动条。原因很简单，它将是一个受移动应用启发的登录页面，按下按钮，它将带您到您需要去的地方。但是，用户将有不同的屏幕尺寸/分辨率，因此页面必须是流畅的。

我已经设法让页面根据浏览器的宽度缩小，如此处所示（[jsFiddle Demo](http://jsfiddle.net/Marty_j1/Lykr2/1/)）。

```
 container {
    padding: 1% 1%;
    width: 80%;
    height: 100%;
    max-width: 1260px;/* a max-width may be desirable to keep this layout from getting too wide on a large monitor. This keeps line length more readable. IE6 does not respect this declaration. */
    /*min-width: 780px;/* a min-width may be desirable to keep this layout from getting too narrow. This keeps line length more readable in the side columns. IE6 does not respect this declaration. */
    margin: 0 auto; /* the auto value on the sides, coupled with the width, centers the layout. It is not needed if you set the .container's width to 100%. */
} 
```

如您所见，所有元素都会根据浏览器的宽度动态收缩。但是，当在 1024x768 屏幕上查看时，底部的“按钮”行被浏览器截去一半，用户必须滚动才能看到其余部分。

我在此站点上尝试了一些解决方案，但似乎无法使其正常工作。这里有人可以帮我让它动态调整到浏览器的宽度和高度吗？

为了更好地说明我想要什么，这是我希望看到的效果[动态调整大小示例](http://eseb.net/potos.php?f=best_of/indianpeaks_2.jpg)

这是一张图片，它准确地显示了我的问题是[分辨率差异 http://img404.imageshack.us/img404/5840/resolutionissue.jpg](http://img404.imageshack.us/img404/5840/resolutionissue.jpg)

请注意，按钮之间的间距会因百分比间距而缩小，但如果仅水平调整窗口，图像将缩小以适应。我需要它将整个内容压缩到浏览器窗口中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T12:53:10.483

为了确保您的容器和子元素（如果需要）垂直填充屏幕，您需要确保您也将 100% 的高度值应用于这些元素的整体父级。在您的情况下，我会将以下规则应用于您的 CSS：

```
html,body
{
  height: 100%;
  padding: 0px;
  margin: 0px;
} 
```

这将导致您的容器适应浏览器窗口的 100% 高度（因为容器是您的整个主体的子级，它是 html 标记的子级）。但是，当您应用填充时，您仍然会看到垂直滚动条。因此，您需要确保相对于您应用的填充/边距减少容器元素的高度百分比。在您的情况下，正如 Kai Qing 建议的那样，您应该将容器高度更改为 98%。

# javascript - 防止覆盖运行功能

> ID：14844200
> 
> 赞同：1
> 
> 时间：2013-02-13T00:04:10.777
> 
> 标签：javascript

所以我有这个时钟在 getDate 函数之后运行，它工作得非常顺利。我可以开始运行时钟的包装，当点击包装时，它开始使用事件处理程序移动。问题是我可以在没有之前停止工作的情况下运行时钟乘法时间。我知道这些功能正在相互覆盖，我一直在尝试围绕该功能移动，但我无法启动多个时钟。

我有`Clock()`包装其他功能的功能。我有一个`createWrapp()`, 动态创建函数的类，然后我有 eventlistner 在单击换行时启动时钟。

三者是这样的。

```
function clock(){
    function createWrapp(){
        createElementsWithClass;
    } 
    createWrapp();
    function Wrapp(){
        eventlistner connected to "clock-window-wrapper"
    }
    function myFunction(){ 
        startClock();
    }
} 
```

这是我的 jsFiddle。

[http://jsfiddle.net/dymond/nufwb/1/](http://jsfiddle.net/dymond/nufwb/1/)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T00:13:07.987

问题是~~几乎~~所有变量`createWrapp`都是隐式全局的。连续调用`clock()`将覆盖它们，并且只有最后创建的时钟才会滴答作响。使用[`var`语句](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/var)！

将其更改为：

```
function clock() {

    var outerDiv = createElementWithClass('div', 'clock-window-wrapper'),
        innerDiv = createElementWithClass('div', 'clock-menubar-wrapper');
    outerDiv.appendChild(innerDiv);
    document.getElementById("page-content-wrapper").appendChild(outerDiv);

    var clock_windows_wrapper_close = createElementWithClass('div', 'close');
    innerDiv.appendChild(clock_windows_wrapper_close);

    var clock_toolbar_wrapper_close = createElementWithClass('div', 'clock-content-wrapper');
    outerDiv.appendChild(clock_toolbar_wrapper_close);

    var hours = createElementWithClass('ul', 'clock-digit-wrapper hour');
    clock_toolbar_wrapper_close.appendChild(hours);
    clock_toolbar_wrapper_close.appendChild(document.createTextNode(' ')); // Add this ##WTF

    var minutes = createElementWithClass('ul', 'clock-digit-wrapper minute');
    clock_toolbar_wrapper_close.appendChild(minutes);
    clock_toolbar_wrapper_close.appendChild(document.createTextNode(' ')); // And this ##
    var seconds = createElementWithClass('ul', 'clock-digit-wrapper second');
    clock_toolbar_wrapper_close.appendChild(seconds);

    var hour1 = createElementWithClass('li', "clock-digit-four");
    var hour2 = createElementWithClass('li', "clock-digit-one");
    hours.appendChild(hour1);
    hours.appendChild(hour2);

    var minute1 = createElementWithClass('li', "clock-digit-three");
    var minute2 = createElementWithClass('li', "clock-digit-three");
    minutes.appendChild(minute1);
    minutes.appendChild(minute2);

    var sec1 = createElementWithClass('li', "clock-digit-three");
    var sec2 = createElementWithClass('li', "clock-digit-seven");
    seconds.appendChild(sec1);
    seconds.appendChild(sec2); 
```

`createWrapp`作为一个单独的函数实际上是没有必要的，因为它只被调用一次并且没有变量是它的本地变量。

# html - Boostrap - 搜索表单的宽度应该是多少？

> ID：14844207
> 
> 赞同：1
> 
> 时间：2013-02-13T00:04:47.477
> 
> 标签：html, css, twitter-bootstrap

**我们需要实现带有搜索按钮的搜索表单填充整个列区域。**

更新：

我有一个简化版本的代码，可以在这里查看：http: [//jsfiddle.net/persianturtle/Trgr6/10/](http://jsfiddle.net/persianturtle/Trgr6/10/)

另一个以前的 jsFiddle 版本在这里：

这是现场示例[http://jsfiddle.net/Trgr6/3/](http://jsfiddle.net/Trgr6/3/)

您将看到黑色区域作为整个区域的示例来填充旧版本。

在新版本中，我尝试将搜索表单的宽度设置为：

```
.row-fluid .span9 { } 
```

类宽度，即：

```
width: 74.46808510638297%; 
```

和代码：

```
<div class="searchbar">
    <div class="container">
        <div class="row-fluid">     
            <div id ="test" class="span9">

                 <form class="form-search">
                     <div class="input-append span12">
                        <input type="text" class= "search-query" placeholder="Enter Search">
                        <button type="submit" class="btn">Search</button>
                    </div>
                 </form>

            </div>      

            <div class="span3 info">
                .span3 column
            </div>
        </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T03:43:44.020

我不确定我是否更新了你的小提琴，但是是的。这将起作用。

[http://jsfiddle.net/xWTuF/2/](http://jsfiddle.net/xWTuF/2/)

覆盖从 inline-block 到 block 的 input append，并为其赋予一个 padding-right 等于整个按钮宽度和输入上的 padding 的值。给输入一个100%的宽度；

```
.container .form-search .input-append {
    display:block;
    padding-right:99px
}
.input-append input.search-query {
    width:100%
} 
```

哦，我还删除了 span12，你不需要它。将 html 重新组织为：

```
<div class="searchbar">
    <div class="container"> 
        <div class="row-fluid">
            <div class="span9">
                <form class="form-search">
                    <div class="input-append">
                        <input type="text" class="search-query">
                        <button type="submit" class="btn">Search</button>
                     </div>
                </form> 
            </div>
            <div class="span3 info">
                .span3 column
            </div>
        </div>
    </div>
</div> 
```

# scala - 协调多个通用构造函数参数

> ID：14844209
> 
> 赞同：0
> 
> 时间：2013-02-13T00:05:04.573
> 
> 标签：scala, generics, types

我正在尝试在 Scala 中做一些我不确定是否可行的事情。我希望得到社区的一些反馈。

假设我对某些“事物”有一个密封的特征，它的一些具体扩展，以及一个与该特征的某些实现一起使用的泛型类..

```
sealed trait Thing
class CoolThing extends Thing
class OtherThing extends Thing

class BoxOfThings[T <: Thing] 
```

现在，我可以定义另一个类来处理两个“盒子”，就像这样..

```
class PairOfBoxes(boxOne: BoxOfThings[_ <: Thing], boxTwo: BoxOfThings[_ <: Thing]) 
```

但是，在这里`PairOfBoxes`用一个`CoolThing`s 和另一个`OtherThing`s 来创建 a 是完全可以的。我想声明`boxOne`并`boxTwo`包含相同类型的`Thing`.. 这有可能吗？

例如：

```
// Cool things..
val boxOfCoolThings = new BoxOfThings[CoolThing]
val anotherBoxOfCoolThings = new BoxOfThings[CoolThing]
// Other things..
val boxOfOtherThings = new BoxOfThings[OtherThing]

// A pair of cool boxes, no problem:
new PairOfBoxes(boxOfCoolThings, anotherBoxOfCoolThings)

// A pair of different boxes, compiles but I don't want it to:
new PairOfBoxes(boxOfOtherThings, anotherBoxOfCoolThings) 
```

我可以通过制作`PairOfBoxes`泛型本身来做到这一点，就像这样..

```
class TypedPairOfBoxes[T <: BoxOfThings[_ <: Thing]](boxOne: T, boxTwo: T) 
```

它可以工作，但它很难看..

```
// A pair of cool boxes, no problem:
new TypedPairOfBoxes[BoxOfThings[CoolThing]](boxOfCoolThings, anotherBoxOfCoolThings)

// A pair of different boxes, doesn't compile:
val mixedPair = new TypedPairOfBoxes[BoxOfThings[CoolThing]](boxOfOtherThings, anotherBoxOfCoolThings) 
```

我想避免这种情况是我可以的。它将问题推向上游并迫使我们指定每个`TypedPairOfBoxes`. 简单地使用一个`PairOfBoxes`断言它的参数是相同类型的无类型是理想的。

可能的？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T03:10:56.140

你只需要写成：

```
class TypedPairOfBoxes[T <: Thing](one: BoxOfThings[T], two: BoxOfThings[T]) 
```

然后：

```
scala> new TypedPairOfBoxes(boxOfOtherThings, anotherBoxOfCoolThings)
<console>:15: error: type mismatch;
 found   : BoxOfThings[OtherThing]
 required: BoxOfThings[Thing]
Note: OtherThing <: Thing, but class BoxOfThings is invariant in type T.
You may wish to define T as +T instead. (SLS 4.5)
              new TypedPairOfBoxes(boxOfOtherThings, anotherBoxOfCoolThings)
                                   ^
<console>:15: error: type mismatch;
 found   : BoxOfThings[CoolThing]
 required: BoxOfThings[Thing]
Note: CoolThing <: Thing, but class BoxOfThings is invariant in type T.
You may wish to define T as +T instead. (SLS 4.5)
              new TypedPairOfBoxes(boxOfOtherThings, anotherBoxOfCoolThings)
                                                     ^

scala> new TypedPairOfBoxes(boxOfCoolThings, anotherBoxOfCoolThings)
res3: TypedPairOfBoxes[CoolThing] = TypedPairOfBoxes@2f5e1167 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T00:26:44.327

**我 <3 斯卡拉**

Scala 可以推断出泛型类型，这样我就可以定义一个“丑陋”的类型类，但在我使用它时不需要指定具体的实现。

有了这个认识，我就能够定义一个类似于我上面问题中的类型的类。

`~~class TypedPairOfBoxes[T, BoxOfThings[T <: Thing]](boxOne: BoxOfThings[T], boxTwo: BoxOfThings[T])~~`

..它看起来有点粗糙，但可以像这样简单地使用：

```
// Both boxes contain cool things, no problem:
new TypedPairOfBoxes(boxOfCoolThings, anotherBoxOfCoolThing)

// These boxes contain different things, doesn't compile:
new TypedPairOfBoxes(boxOfOtherThings, anotherBoxOfCoolThing) 
```

惊人的。

**编辑：**

正如@Eastsun 所展示的，通用定义的后半部分未使用。因此，可以改为：

```
class TypedPairOfBoxes[T <: Thing](boxOne: BoxOfThings[T], boxTwo: BoxOfThings[T]) 
```

这看起来很像 Java。但令人惊奇的是 Scala 从参数中推断出泛型类型。

# objective-c - JSONKit NSDictionary

> ID：14844211
> 
> 赞同：0
> 
> 时间：2013-02-13T00:05:20.033
> 
> 标签：objective-c, xcode, jsonkit

我在`JSONkit.h`使用中遇到问题`NSDictionary`。使用它的正确方法是什么？

杰森：

```
[{"id":"1100","name":"John Stuart"}] 
```

代码：

```
- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    NSDictionary *jsonData = [responseData objectFromJSONData];
    NSString *name = [jsonData objectForKey:@"name"];
    NSLog(@"Name: %@", name);
} 
```

错误：

```
** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[JKArray objectForKey:]: unrecognized selector sent to instance 0x84b9b30' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T00:06:54.880

您的 JSON 是一个数组，但您的代码假定它是一个字典并尝试调用`-objectForKey:`它。您可能想尝试以下方法：

```
- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    NSArray *jsonData = [responseData objectFromJSONData];
    for (NSDictionary *dict in jsonData) {
        NSString *name = [dict objectForKey:@"name"];
        NSLog(@"Name: %@", name);
    }
} 
```

# entity-framework - 如何删除此实体框架更新中的数据提取？

> ID：14844212
> 
> 赞同：0
> 
> 时间：2013-02-13T00:05:21.107
> 
> 标签：entity-framework

我可以重组这个查询，这样我就不必从数据库中获取吗？我尝试了各种技术，但都没有奏效。

```
 public void Update(CartEntryViewModel entry)
        using (var context = new MyContext())
        {
            User user = Auth.GetUser(context);
            CartEntry model = context.CartEntries.Find(entry.Id);

            // Change the item and update quantity
            model.Item = context.Items.Find(entry.Item.Id);
            model.Quantity = entry.Quantity;
            context.Entries(model).EntityState = EntityState.Modified;

            context.SaveChanges();
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T17:09:03.307

Attach() 方法获取您已有的模型并将其附加到上下文中，就好像它刚刚从数据库中读取一样。您只需更改状态，以便上下文知道在调用 SaveChanges() 时更新数据库中的相应行。

```
public void Update(CartEntryViewModel entry)
{
    CartEntry model = new CartEntry
    {
        model.Id = entry.Id,
        model.Item = entry.Item,
        model.Quantity = entry.Quantity,
        // Set other properties.     
    };

    using (MyContext context = new MyContext())   
    {
        context.CartEntries.Attach(model);
        context.Entry(model).State = EntityState.Modified;
        context.SaveChanges();
    }
} 
```

# java - 即使元素可见，WebElement getText() 也会返回空字符串

> ID：14844214
> 
> 赞同：0
> 
> 时间：2013-02-13T00:05:31.797
> 
> 标签：java, xpath, selenium, selenium-webdriver

我很难检索元素的文本，由于某种原因，WebDriver 可以找到该元素但它无法检索文本，我怀疑是因为由于某种原因该元素对 WebDriver 不可见，我会一会儿就到了。

这是 HTML 的一个片段：

```
<td id="x-auto-4169" class="x-grid3-col x-grid3-cell x-grid3-td-badCalls " style="width:53px;" role="gridcell">
    <div class="x-grid3-cell-inner x-grid3-col-badCalls" unselectable="on">0</div>
</td> 
```

达到此目的的 Xpath 是

```
String valueXpath = "((//div[@id=\"QosDashpardPanelBottom\"]//div[@id=\"CollectorQoSPerformanceMetricsgrid\"]//div[contains(@class, \"x-grid3-row  x-unselectable-single\")])[" + j + "]//div)[" + i + "]";
WebElement value = driver.findElement(By.xpath(valueXpath)); 
```

其中“j”是行号，“i”是表格/网格中的列号。我知道 Selenium 可以找到元素，因为我可以

```
WebElement class = driver.findElement(By.xpath(fullXpath));
String classAttr = arg.getAttribute("class"); 
```

我回来了

```
x-grid3-cell-inner x-grid3-col-badCalls 
```

但是当我尝试

```
String cellValue = value.getText();
System.out.println(cellValue); 
```

我得到一个空字符串。我盯着我的电脑屏幕，我可以看到值，它是可见的，我知道 Selenium 找到了元素，但我无法检索文本。有趣的是，有人建议先单击该值然后尝试 getText() 所以当我尝试单击时出现异常：

```
org.openqa.selenium.ElementNotVisibleException: Element is not currently visible and so may not be interacted with 
```

所以我想知道我是否因为不可见而无法检索文本值？但是，如果是这种情况，我可以检索类属性、标签等内容，但不能检索文本值，这似乎很奇怪。

任何建议将不胜感激。

HTML：

```
<body class=" ext-gecko ext-windows" onload="processLoaders();">
<script type="text/javascript">
<div id="topNavDiv" style="height: 90px">
<div id="bodyContentOuter" style="width: 1280px; height: 587px;">
    <div id="bodyContentInner">
        <script src="RLT/RLT.nocache.js" language="javascript" type="text/javascript">
        <script defer="defer">
        <script language="javascript" type="text/javascript">
        <div id="rtcpMain" class=" x-component x-border-layout-ct" style="width: 1280px; height: 587px;">
            <div id="rtcpMainWest" class=" x-panel x-component x-border-panel" style="left: 5px; top: 5px; width: 225px;">
            <div id="x-auto-2" class=" x-tab-panel x-component x-border-panel" tabindex="0" hidefocus="true" style="left: 235px; top: 5px; width: 1040px;">
                <div class="x-tab-panel-header x-unselectable" style="width: 1038px;" unselectable="on">
                <div class="tone-rtcp-tabbed-content-panel" style="width: 1040px; height: 550px;">
                    <div id="x-auto-10" class=" x-component" style="overflow: auto; width: 1040px; height: 550px;">
                        <div id="QosDashboardPanel0" class=" x-panel x-component" style="width: 1040px;">
                            <div id="x-auto-13" class=" x-small-editor x-panel-header x-component x-hide-display" role="presentation">
                            <div id="rtcpDPBWrap" class="x-panel-bwrap" role="presentation" style="overflow: visible;">
                                <div class="x-panel-tbar x-panel-tbar-noheader" role="presentation" style="width: 1040px;">
                                <div id="rtcpDPBody" class="x-panel-body x-panel-body-noheader x-border-layout-ct" role="presentation" style="width: 1038px; height: 700px;">
                                    <div id="QosDashboardPanelTop" class=" x-component x-border-panel x-border-layout-ct" style="left: 0px; top: 0px; width: 1038px; height: 400px;">
                                    <div id="QosDashpardPanelBottom" class=" x-component x-border-panel x-border-layout-ct" style="left: 1px; top: 401px; width: 1036px; height: 298px;">
                                        <div id="QosDashpardPanel_pqosChartsLC" class=" x-component x-border-panel x-border-layout-ct x-hide-display" style="left: 0px; top: 0px; width: 1036px; height: 400px;">
                                        <div id="QosDashpardPanel_metricsTablesLC" class=" x-component x-border-panel x-border-layout-ct" style="left: 1px; top: 1px; width: 1034px; height: 296px;">
                                            <div id="CollectorMetrics_toneletWrapper" class=" x-panel x-component x-border-panel" style="left: 1px; top: 1px; width: 330px;">
                                                <div id="x-auto-99" class=" x-small-editor x-panel-header x-component x-hide-display" role="presentation">
                                                <div class="x-panel-bwrap" role="presentation">
                                                    <div class="x-panel-body x-panel-body-noheader" role="presentation" style="width: 328px; height: 292px;">
                                                        <div id="CollectorMetrics" class=" x-panel x-component" style="width: 328px;">
                                                            <div id="x-auto-109" class=" x-small-editor x-panel-header x-component x-unselectable" role="presentation" unselectable="on">
                                                            <div class="x-panel-bwrap" role="presentation">
                                                                <div class="x-panel-body" role="presentation" style="width: 326px; height: 265px;">
                                                                    <div id="CollectorQoSPerformanceMetricsgrid" class=" x-grid-panel x-component" style="position: relative; width: 326px; height: 265px;" tabindex="0" hidefocus="true" unselectable="">
                                                                        <div class="x-grid3" role="presentation" style="width: 326px; height: 265px;">
                                                                            <div class="x-grid3-viewport" role="presentation">
                                                                                <div class="x-grid3-header" role="presentation">
                                                                                <div class="x-grid3-scroller" role="presentation" style="width: 326px; height: 243px;">
                                                                                    <div class="x-grid3-body" role="presentation">
                                                                                        <div id="CollectorQoSPerformanceMetricsgrid_x-auto-633" class="x-grid3-row x-unselectable-single x-grid3-row-selected x-grid3-highlightrow " style="width:510px;">
                                                                                            <table class="x-grid3-row-table" cellspacing="0" cellpadding="0" border="0" style="width:510px;" role="presentation">
                                                                                                <tbody role="presentation">
                                                                                                    <tr role="presentation">
                                                                                                        <td id="x-auto-634" class="x-grid3-col x-grid3-cell x-grid3-td-name x-grid-cell-first " style="width:148px;" role="gridcell">
                                                                                                            <div class="x-grid3-cell-inner x-grid3-col-name" unselectable="on">
                                                                                                                <u>Lync</u>
                                                                                                            </div>
                                                                                                        </td>
                                                                                                        <td id="x-auto-635" class="x-grid3-col x-grid3-cell x-grid3-td-badCalls " style="width:53px;" role="gridcell">
                                                                                                            <div class="x-grid3-cell-inner x-grid3-col-badCalls" unselectable="on">36</div>
                                                                                                        </td>
                                                                                                        <td id="x-auto-636" class="x-grid3-col x-grid3-cell x-grid3-td-totalCalls " style="width:58px;" role="gridcell">
                                                                                                            <div class="x-grid3-cell-inner x-grid3-col-totalCalls" unselectable="on">120</div>
                                                                                                        </td>
                                                                                                        <td id="x-auto-637" class="x-grid3-col x-grid3-cell x-grid3-td-avgLatency " style="width:73px;" role="gridcell">
                                                                                                            <div class="x-grid3-cell-inner x-grid3-col-avgLatency" unselectable="on">223</div>
                                                                                                        </td>
                                                                                                        <td id="x-auto-638" class="x-grid3-col x-grid3-cell x-grid3-td-avgLoss " style="width:53px;" role="gridcell">
                                                                                                            <div class="x-grid3-cell-inner x-grid3-col-avgLoss" unselectable="on">0.80</div>
                                                                                                        </td>
                                                                                                        <td id="x-auto-639" class="x-grid3-col x-grid3-cell x-grid3-td-avgJitter " style="width:58px;" role="gridcell">
                                                                                                            <div class="x-grid3-cell-inner x-grid3-col-avgJitter" unselectable="on">29</div>
                                                                                                        </td>
                                                                                                        <td id="x-auto-640" class="x-grid3-col x-grid3-cell x-grid3-td-avgMOS x-grid3-cell-last " style="width:53px;" role="gridcell">
                                                                                                            <div class="x-grid3-cell-inner x-grid3-col-avgMOS" unselectable="on">3.86</div>
                                                                                                        </td>
                                                                                                    </tr>
                                                                                                </tbody>
                                                                                            </table>
                                                                                        </div>
                                                                                        <div id="CollectorQoSPerformanceMetricsgrid_x-auto-641" class="x-grid3-row x-unselectable-single " style="width:510px;">
                                                                                            <table class="x-grid3-row-table" cellspacing="0" cellpadding="0" border="0" style="width:510px;" role="presentation">
                                                                                                <tbody role="presentation">
                                                                                                    <tr role="presentation">
                                                                                                    <td id="x-auto-642" class="x-grid3-col x-grid3-cell x-grid3-td-name x-grid-cell-first " style="width:148px;" role="gridcell">
                                                                                                        <div class="x-grid3-cell-inner x-grid3-col-name" unselectable="on">
                                                                                                            <u>CUCM-Publisher</u>
                                                                                                        </div>
                                                                                                    </td>
                                                                                                    <td id="x-auto-643" class="x-grid3-col x-grid3-cell x-grid3-td-badCalls " style="width:53px;" role="gridcell">
                                                                                                        <div class="x-grid3-cell-inner x-grid3-col-badCalls" unselectable="on">3</div>
                                                                                                    </td>
                                                                                                    <td id="x-auto-644" class="x-grid3-col x-grid3-cell x-grid3-td-totalCalls " style="width:58px;" role="gridcell">
                                                                                                        <div class="x-grid3-cell-inner x-grid3-col-totalCalls" unselectable="on">52</div>
                                                                                                    </td>
                                                                                                    <td id="x-auto-645" class="x-grid3-col x-grid3-cell x-grid3-td-avgLatency " style="width:73px;" role="gridcell">
                                                                                                        <div class="x-grid3-cell-inner x-grid3-col-avgLatency" unselectable="on">190</div>
                                                                                                    </td>
                                                                                                    <td id="x-auto-646" class="x-grid3-col x-grid3-cell x-grid3-td-avgLoss " style="width:53px;" role="gridcell">
                                                                                                        <div class="x-grid3-cell-inner x-grid3-col-avgLoss" unselectable="on">0.79</div>
                                                                                                    </td>
                                                                                                    <td id="x-auto-647" class="x-grid3-col x-grid3-cell x-grid3-td-avgJitter " style="width:58px;" role="gridcell">
                                                                                                        <div class="x-grid3-cell-inner x-grid3-col-avgJitter" unselectable="on">31</div>
                                                                                                    </td>
                                                                                                    <td id="x-auto-648" class="x-grid3-col x-grid3-cell x-grid3-td-avgMOS x-grid3-cell-last " style="width:53px;" role="gridcell">
                                                                                                        <div class="x-grid3-cell-inner x-grid3-col-avgMOS" unselectable="on">3.98</div>
                                                                                                    </td>
                                                                                                    </tr>
                                                                                                </tbody>
                                                                                            </table>
                                                                                        </div>
                                                                                    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T21:33:06.770

经过很多（很多）故障排除后，我发现我在 Xpath 上犯了一个小错误。从我的html

```
<div id="QosDashboardPanel0" ... 
```

我没有考虑多个标签。在我的 AUT 中，我打开了一个新选项卡，而不是新的浏览器选项卡，而是应用程序本身的一个选项卡，整个 Hmtl 将保持不变，除了上面的代码片段将更改为

```
<div id="QosDashboardPanel1" ... 
```

我假设ID不会改变，吸取教训！这就是为什么我遇到“无法单击不可见元素”的原因，该元素实际上就在那里，但它隐藏在我的活动选项卡后面。

没有太大的解决方案，但我希望如果有人遇到类似的事情，至少可以将他们指向正确的方向或让铃声响起。

# java - Java：以编程方式从 Trust Store 读取 SSL 证书信息

> ID：14844218
> 
> 赞同：2
> 
> 时间：2013-02-13T00:05:51.533
> 
> 标签：java, ssl

在 Oracle JRE 中，我可以打开 ControlPanel -> Java -> Security -> Certificates 并安装自定义 SSL 证书。

有没有办法以编程方式列出这些自定义证书？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T11:37:04.663

请参阅 java.security.KeyStore 的 API。

# facebook - 如何搜索特定位置的公开状态更新？

> ID：14844220
> 
> 赞同：0
> 
> 时间：2013-02-13T00:06:03.570
> 
> 标签：facebook, facebook-graph-api

我正在尝试找出 Graph API，并希望能够通过公共状态更新搜索特定字符串，但前提是状态来自某个城市/地点/位置。这可能吗？我在想是否可以找到场所或位置的 place_id，然后我可以从那里搜索“状态”数据库表，但我无法找出正确的搜索键。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T19:00:00.497

脸书说：

> 状态搜索类型不支持限制/偏移分页。

所以答案是否定的，此时不可能限制在某个位置。

来源[https://developers.facebook.com/docs/reference/api/search/](https://developers.facebook.com/docs/reference/api/search/)

# ruby-on-rails - 具有多和属于一的关系

> ID：14844221
> 
> 赞同：2
> 
> 时间：2013-02-13T00:06:07.733
> 
> 标签：ruby-on-rails, has-and-belongs-to-many

我正在尝试跟踪用户创建了多少 signup_conversions。
因此，我有以下两个模型：

### 注册转换.rb

```
class SignupConversion < ActiveRecord::Base
  belongs_to :user
  belongs_to :convertee, :class_name => "User", :foreign_key => 'convertee_id'
  attr_accessible :convertee_id
end 
```

### 用户.rb

```
class User < ActiveRecord::Base
  attr_accessible :name, :email, :password, :password_confirmation
  belongs_to :signup_conversion
  has_many :signup_conversions
end 
```

这会那样工作吗？还是我在这里遗漏了一些重要的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T02:07:42.813

我还没有尝试过代码，但我给你一些提示，希望你觉得有用。

*   我认为每个`has_many`/`has_one`语句都应该有其对应的`belongs_to`，所以三`belongs_to`加一`has_many`看起来不太好。

*   我不确定`has_one :signup_conversion`并且`has_many :signup_conversions`会一起玩得很好，所以我宁愿改变名字。我也更改了其他名称以尝试使关联更清晰，尽管我不确定我是否完全理解它们所代表的真实概念。你可能会想出更好的名字。

*   默认情况下，外键是`_id`在关联名称中添加后缀来猜测的，因此在这种情况下您不需要指定它。另外，我认为您不需要使该属性可访问，至少不需要使关联起作用。

    **注册转换.rb**

    ```
    class SignupConversion < ActiveRecord::Base
      belongs_to :owner    , :class_name => "User"
      belongs_to :convertee, :class_name => "User"
    end 
    ```

    **用户.rb**

    ```
    class User < ActiveRecord::Base
      attr_accessible :name, :email, :password, :password_confirmation
      has_one  :owned_signup_conversion     , :class_name => "SignupConversion"
      has_many :triggered_signup_conversions, :class_name => "SignupConversion"
    end 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T00:12:03.133

你的代码比你需要的多；你只需要

```
class SignupConversion < ActiveRecord::Base
   belongs_to :user
end

class User < ActiveRecord::Base
   attr_accessible :name, :email, :password, :password_confirmation
   has_many :signup_conversions
end 
```

然后你需要在你的 signup_conversions 表中有一个 user_id 列，然后你调用

```
@user.signup_conversions 
```

在您的视图或控制器中。

# python - python matplotlib blit到图形的轴或边？

> ID：14844223
> 
> 赞同：7
> 
> 时间：2013-02-13T00:06:20.937
> 
> 标签：python, user-interface, matplotlib

每次通过拟合程序时，我都会尝试刷新我在 gui 中的一些图。此外，这些图位于可以调整大小的框架内，因此在调整大小后需要重新绘制轴和标签等。所以想知道是否有人知道如何使用类似的东西来更新图形的侧面`plot.figure.canvas.copy_from_bbox`and `blit`。这似乎只复制和 blit 图形区域的背景（绘制线条的位置），而不是图形或图形的侧面（标签和刻度所在的位置）。我一直在尝试通过反复试验和阅读 mpl 文档来更新我的图表，但到目前为止，我的代码已经变得非常复杂，例如`self.this_plot.canvas_of_plot..etc.etc.. .plot.figure.canvas.copy_from_bbox`...这可能太令人费解了。我知道我的语言可能有点不对劲，但我一直在尝试通读 matplotlb 文档，而 Figure、canvas、graph、plot、figure.Figure 等之间的差异开始让我回避。所以我的第一个也是最重要的问题是：

**1 - 如何更新 matplotlib 图周围的刻度和标签。**

其次，因为我想更好地掌握这个问题的答案，

**2 - 绘图、图形、画布等在 GUI 中覆盖的区域有什么区别。**

非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-13T03:54:33.660

所有这一切一开始肯定会相当混乱！

首先，如果您要链接滴答声等，则使用 blitting 没有多大意义。如果只有某些事情发生变化，Blitting 只是一种避免重新绘制所有内容的方法。如果一切都在变化，那么使用 blitting 就没有意义了。只是重新绘制情节。

基本上，你只是想要`fig.canvas.draw()`或`plt.draw()`

无论如何，要回答您的第一个问题，在大多数情况下，您不需要手动更新它们。如果您更改轴限制，它们会自行更新。您遇到了问题，因为您只是在轴内部而不是重绘绘图。

至于你的第二个问题，一个很好的详细概述是Matplotlib[用户指南的](http://matplotlib.org/users/artists.html)[艺术家教程](http://matplotlib.org/users/artists.html)。

简而言之，有两个独立的层。一种处理将事物分组到绘图时您会担心的部分（例如图形、轴、轴、线等），另一种处理一般的渲染和绘图（画布和渲染器）。

您可以在 matplotlib 图中看到的任何内容都是`Artist`. （例如文本、线条、轴，甚至图形本身。）艺术家a）知道如何绘制自己，并且b）可以包含其他艺术家。

对于艺术家自己绘制，它使用渲染器（您几乎永远不会直接接触的特定于后端的模块）在`FigureCanvas`又名“画布”（基于矢量的页面或像素缓冲区的抽象）上绘制。要在图中绘制所有内容，请调用`canvas.draw()`.

Because artists can be groups of other artists, there's a hierarchy to things. Basically, something like this (obviously, this varies):

```
Figure
    Axes (0-many) (An axes is basically a plot)
        Axis (usually two) (x-axis and y-axis)
            ticks
            ticklabels
            axis label
         background patch
         title, if present
         anything you've plotted, e.g. Line2D's 
```

Hopefully that makes things a touch clearer, anyway.

If you really do want to use blitting to update the tick labels, etc, you'll need to grab and restore the full region including them. This region is a bit tricky to get, because it isn't exactly known until *after* draw-time (rendering text in matplotlib is more complicated than rendering other things due to latex support, etc). You can do it, and I'll be glad to give an example if it's really what you want, but it's typically not going to yield a speed advantage over just drawing everything. (The exception is if you're only updating one subplot in a figure with lots of subplots.)

# javascript - 用 HTML5/Javascript 打印图像

> ID：14844224
> 
> 赞同：0
> 
> 时间：2013-02-13T00:06:22.920
> 
> 标签：javascript, html

我是网络开发领域的新手，我有以下问题

我想在 HTML5 中实现一个按钮，它将打印图像（而不是整个 HTML 页面）

我尝试了这个问题中的代码[Print image on website](https://stackoverflow.com/questions/11894428/print-image-on-website)

但我有一个未处理的异常：

```
0x800a138f - Microsoft JScript runtime error : Umable to get value of the property 'innerHTML':object is null or undefined 
```

谁能指导我如何做到这一点？

谢谢！

编辑：当我说打印时，我的意思是在物理打印机上打印，而不是在屏幕上显示

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T00:14:30.027

像这样的东西？我掀起了这个

```
<!DOCTYPE>
<html>
<body>
<button onclick="showimage()">Click Here for Image</button>
</body>
<script type="text/javascript">
function showimage() {
    var _body = document.getElementsByTagName('body') [0];
    var img = document.createElement('img');
    //you can replace the link with any image you want
    img.setAttribute('src', 'http://i.123g.us/c/cute_teddy/card/109882.gif');
    img.setAttribute('alt', 'Picture');
    _body.appendChild(img);
}
</script>
</html> 
```

[jsFiddle在这里](http://jsfiddle.net/EKPsA/)

如果您需要帮助了解其工作原理，请随时提出。基本上，我们有一个按钮，我们创建 img 标签并设置适当的属性。成功完成后，我们可以将其附加到 HTML 文档的正文中以便显示。我建议您对 DOM（文档对象模型）有一个很好的了解，因为您是 Web 开发/Javascript 的新手。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T22:19:16.490

所以这是非常简单的方法：

```
<!DOCTYPE>
<html>
<body>
<button onclick="showimage()">Click Here for Image</button>
</body>
<script type="text/javascript">
function showimage() {
     if (typeof img== 'object')
                    img= img.src;
                window.win = open(img);
                setTimeout('win.document.execCommand("Print")', 500);
}
</script>
</html> 
```

# ruby-on-rails - 使用 sqlite3 错误编译/部署到 Heroku

> ID：14844227
> 
> 赞同：1
> 
> 时间：2013-02-13T00:06:52.780
> 
> 标签：ruby-on-rails, ruby, git, heroku

我是 RoR 的初学者，我正在尝试将我的第一个应用程序部署到 Heroku。我们正在使用 GitHub 作为存储库，并在尝试部署时不断收到错误：“git push heroku master”

请参阅下面我们运行时收到的消息。

```
$ git push heroku master
Warning: Permanently added the RSA host key for IP address '50.19.85.156' to the list of       known hosts.
Counting objects: 69, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (55/55), done.
Writing objects: 100% (69/69), 26.38 KiB, done.
Total 69 (delta 5), reused 0 (delta 0)
-----> Ruby/Rails app detected
-----> Installing dependencies using Bundler version 1.3.0.pre.5
   Running: bundle install --without development:test --path vendor/bundle --binstubs vendor/bundle/bin --deployment
   Fetching gem metadata from https://rubygems.org/.........
   Fetching gem metadata from https://rubygems.org/..
   Installing rake (10.0.3)
   Installing i18n (0.6.1)
   Installing multi_json (1.6.0)
   Installing activesupport (3.2.11)
   Installing builder (3.0.4)
   Installing activemodel (3.2.11)
   Installing erubis (2.7.0)
   Installing journey (1.0.4)
   Installing rack (1.4.5)
   Installing rack-cache (1.2)
   Installing rack-test (0.6.2)
   Installing hike (1.2.1)
   Installing tilt (1.3.3)
   Installing sprockets (2.2.2)
   Installing actionpack (3.2.11)
   Installing mime-types (1.21)
   Installing polyglot (0.3.3)
   Installing treetop (1.4.12)
   Installing mail (2.4.4)
   Installing actionmailer (3.2.11)
   Installing arel (3.0.2)
   Installing tzinfo (0.3.35)
   Installing activerecord (3.2.11)
   Installing activeresource (3.2.11)
   Installing coffee-script-source (1.4.0)
   Installing execjs (1.4.0)
   Installing coffee-script (2.2.0)
   Installing rack-ssl (1.3.3)
   Installing json (1.7.7)
   Installing rdoc (3.12.1)
   Installing thor (0.17.0)
   Installing railties (3.2.11)
   Installing coffee-rails (3.2.2)
   Installing jquery-rails (2.2.1)
   Using bundler (1.3.0.pre.5)
   Installing rails (3.2.11)
   Installing sass (3.2.5)
   Installing sass-rails (3.2.6)
   Installing sqlite3 (1.3.7)
   Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.
   /usr/local/bin/ruby extconf.rb
   checking for sqlite3.h... no
   sqlite3.h is missing. Try 'port install sqlite3 +universal'
   or 'yum install sqlite-devel' and check your shared library search path (the
   location where your sqlite3 shared library is located).
   *** extconf.rb failed ***
   Could not create Makefile due to some reason, probably lack of
   necessary libraries and/or headers.  Check the mkmf.log file for more
   details.  You may need configuration options.
   Provided configuration options:
   --with-opt-dir
   --without-opt-dir
   --with-opt-include
   --without-opt-include=${opt-dir}/include
   --with-opt-lib
   --without-opt-lib=${opt-dir}/lib
   --with-make-prog
   --without-make-prog
   --srcdir=.
   --curdir
   --ruby=/usr/local/bin/ruby
   --with-sqlite3-dir
   --without-sqlite3-dir
   --with-sqlite3-include
   --without-sqlite3-include=${sqlite3-dir}/include
   --with-sqlite3-lib
   --without-sqlite3-lib=${sqlite3-dir}/lib
   --enable-local
   --disable-local
   Gem files will remain installed in  /tmp/build_1um81jm55kdnc/vendor/bundle/ruby/1.9.1/gems/sqlite3-1.3.7 for inspection.
   Results logged to /tmp/build_1um81jm55kdnc/vendor/bundle/ruby/1.9.1/gems/sqlite3-1.3.7/ext/sqlite3/gem_make.out
   An error occurred while installing sqlite3 (1.3.7), and Bundler cannot continue.
   Make sure that `gem install sqlite3 -v '1.3.7'` succeeds before bundling.
   !
   !     Failed to install gems via Bundler.
   !
   !     Heroku push rejected, failed to compile Ruby/rails app

   To git@heroku.com:aqueous-tor-8402.git
   ! [remote rejected] master -> master (pre-receive hook declined)
   error: failed to push some refs to 'git@heroku.com:aqueous-tor-8402.git' 
```

我的宝石文件如下：

```
source 'https://rubygems.org'

gem 'rails', '3.2.11'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

gem 'sqlite3'

gem 'json'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
gem 'sass-rails',   '~> 3.2.3'
gem 'coffee-rails', '~> 3.2.1'

# See https://github.com/sstephenson/execjs#readme for more supported runtimes
# gem 'therubyracer', :platforms => :ruby

 gem 'uglifier', '>= 1.0.3'
 end

 gem 'jquery-rails'

 # To use ActiveModel has_secure_password
 # gem 'bcrypt-ruby', '~> 3.0.0'

 # To use Jbuilder templates for JSON
 # gem 'jbuilder'

 # Use unicorn as the app server
 # gem 'unicorn'

 # Deploy with Capistrano
 # gem 'capistrano'

 # To use debugger
 # gem 'ruby-debug' 
```

当我运行“sqlite3 -version”时，我得到：

```
 3.7.12 2012-04-03 19:43:07 86b8481be7e76cccc92d14ce762d21bfb69504af 
```

当我执行“捆绑显示 sqlite3”时，我得到：

```
 /Library/Ruby/Gems/1.8/gems/sqlite3-1.3.7 
```

抱歉，这是我的第一个 Rails 应用程序，所以我对这些东西比较陌生。

任何帮助，将不胜感激。

更新：这是 Heroku 日志

```
$ heroku logs
2013-02-12T22:04:25+00:00 heroku[api]: Enable Logplex by peterbarbosa1@gmail.com
2013-02-12T22:04:25+00:00 heroku[api]: Release v2 created by peterbarbosa1@gmail.com
2013-02-12T22:04:47+00:00 heroku[router]: at=info code= desc="Blank app" method=GET         path=/favicon.ico host=aqueous-tor-8402.herokuapp.com fwd=99.250.119.144 dyno= queue= wait=             connect= service= status=502 bytes=
2013-02-12T22:04:46+00:00 heroku[router]: at=info code= desc="Blank app" method=GET path=/ host=aqueous-tor-8402.herokuapp.com fwd=99.250.119.144 dyno= queue= wait= connect= service= status=502 bytes=
2013-02-12T22:41:52+00:00 heroku[slugc]: Slug compilation started
2013-02-12T22:42:39+00:00 heroku[slugc]: Slug compilation failed: failed to compile Ruby/rails app
2013-02-12T22:45:56+00:00 heroku[slugc]: Slug compilation started
2013-02-12T22:46:30+00:00 heroku[slugc]: Slug compilation failed: failed to compile Ruby/rails app
2013-02-12T22:59:31+00:00 heroku[slugc]: Slug compilation started
2013-02-12T22:59:52+00:00 heroku[slugc]: Slug compilation failed: failed to compile Ruby/rails app
2013-02-12T23:00:39+00:00 heroku[router]: at=info code= desc="Blank app" method=GET path=/ host=aqueous-tor-8402.herokuapp.com fwd=99.250.119.144 dyno= queue= wait= connect= service= status=502 bytes=
2013-02-12T23:00:39+00:00 heroku[router]: at=info code= desc="Blank app" method=GET path=/favicon.ico host=aqueous-tor-8402.herokuapp.com fwd=99.250.119.144 dyno= queue= wait= connect= service= status=502 bytes=
2013-02-12T23:08:25+00:00 heroku[slugc]: Slug compilation started
2013-02-12T23:08:50+00:00 heroku[slugc]: Slug compilation failed: failed to compile Ruby/rails app
2013-02-12T23:13:09+00:00 heroku[slugc]: Slug compilation started
2013-02-12T23:13:45+00:00 heroku[slugc]: Slug compilation failed: failed to compile Ruby/rails app
2013-02-12T23:18:14+00:00 heroku[slugc]: Slug compilation started
2013-02-12T23:18:41+00:00 heroku[slugc]: Slug compilation failed: failed to compile Ruby/rails app
2013-02-12T23:20:03+00:00 heroku[slugc]: Slug compilation started
2013-02-12T23:20:34+00:00 heroku[slugc]: Slug compilation failed: failed to compile Ruby/rails app
2013-02-12T23:22:39+00:00 heroku[slugc]: Slug compilation started
2013-02-12T23:23:05+00:00 heroku[slugc]: Slug compilation failed: failed to compile Ruby/rails app
2013-02-12T23:25:50+00:00 heroku[slugc]: Slug compilation started
2013-02-12T23:26:37+00:00 heroku[slugc]: Slug compilation failed: failed to compile Ruby/rails app
2013-02-12T23:28:52+00:00 heroku[slugc]: Slug compilation started
2013-02-12T23:29:20+00:00 heroku[slugc]: Slug compilation failed: failed to compile Ruby/rails app
2013-02-12T23:31:20+00:00 heroku[slugc]: Slug compilation started
2013-02-12T23:32:01+00:00 heroku[slugc]: Slug compilation failed: failed to compile Ruby/rails app
2013-02-12T23:42:41+00:00 heroku[slugc]: Slug compilation started
2013-02-12T23:43:08+00:00 heroku[slugc]: Slug compilation failed: failed to compile Ruby/rails app
2013-02-12T23:48:22+00:00 heroku[slugc]: Slug compilation started
2013-02-12T23:48:47+00:00 heroku[slugc]: Slug compilation failed: failed to compile Ruby/rails app
2013-02-12T23:52:52+00:00 heroku[slugc]: Slug compilation started
2013-02-12T23:53:16+00:00 heroku[slugc]: Slug compilation failed: failed to compile     Ruby/rails app
2013-02-13T00:08:04+00:00 heroku[router]: at=info code= desc="Blank app" method=GET path=/ host=aqueous-tor-8402.herokuapp.com fwd=99.250.119.144 dyno= queue= wait= connect= service= status=502 bytes=
2013-02-13T00:08:04+00:00 heroku[router]: at=info code= desc="Blank app" method=GET path=/favicon.ico host=aqueous-tor-8402.herokuapp.com fwd=99.250.119.144 dyno= queue= wait= connect= service= status=502 bytes=
2013-02-13T00:09:49+00:00 heroku[router]: at=info code= desc="Blank app" method=GET path=/ host=pbarbosa.herokuapp.com fwd=99.250.119.144 dyno= queue= wait= connect= service= status=502 bytes=
2013-02-13T00:09:49+00:00 heroku[router]: at=info code= desc="Blank app" method=GET path=/favicon.ico host=pbarbosa.herokuapp.com fwd=99.250.119.144 dyno= queue= wait= connect= service= status=502 bytes=
2013-02-13T00:09:49+00:00 heroku[router]: at=info code=H16 desc="herokuapp redirect" method=GET path=/ host=pbarbosa.heroku.com fwd="99.250.119.144" dyno= queue= wait= connect= service= status=301 bytes=
2013-02-13T00:19:18+00:00 heroku[slugc]: Slug compilation started
2013-02-13T00:19:41+00:00 heroku[slugc]: Slug compilation failed: failed to compile Ruby/rails app
2013-02-13T00:39:17+00:00 heroku[api]: Attach HEROKU_POSTGRESQL_AQUA resource by peterbarbosa1@gmail.com
2013-02-13T00:39:17+00:00 heroku[api]: Release v3 created by peterbarbosa1@gmail.com
2013-02-13T01:27:38+00:00 heroku[slugc]: Slug compilation started
2013-02-13T01:27:59+00:00 heroku[slugc]: Slug compilation failed: failed to compile Ruby/rails app
2013-02-13T01:29:28+00:00 heroku[slugc]: Slug compilation started
2013-02-13T01:29:52+00:00 heroku[slugc]: Slug compilation failed: failed to compile Ruby/rails app
2013-02-13T01:31:32+00:00 heroku[slugc]: Slug compilation started
2013-02-13T01:32:01+00:00 heroku[slugc]: Slug compilation failed: failed to compile Ruby/rails app
2013-02-13T01:32:30+00:00 heroku[slugc]: Slug compilation started
2013-02-13T01:32:55+00:00 heroku[slugc]: Slug compilation failed: failed to compile Ruby/rails app 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-13T00:14:53.117

Heroku 不支持 sqlite 数据库。您需要在生产中使用[postgres](http://www.postgresql.org)。在 Rails 中，切换数据库很容易：

```
group :production do
  gem "pg"
end

group :development, :test do
  gem "sqlite3"
end 
```

像上面一样更改您的 gemfile，然后运行`bundle`​​并将您的更改提交到`Gemfile`and `Gemfile.lock`。然后，`git push heroku master`再次运行。

这将允许您在开发和测试环境中本地使用 sqlite，并根据需要在 heroku 上使用 postgres。

顺便说一句，rails 的主要优点之一是它可以让您轻松切换数据库。在其他框架中，这样做可能会花费您数小时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T01:13:53.200

这里有几件事要确保

1.  在 database.yml 上注释掉生产环境。heroku 已经为您做到了。就像上面所说的那样，heroku 不使用 sqlite3，但您可以使用 sqlite3 进行测试和开发，这没有什么区别
2.  如果您对数据库进行了任何更改，请确保在推送之前迁移您的数据库。执行 heroku 运行 rake db:migrate 然后尝试 git push heroku master。

希望这能解决它

以供将来参考，发布heroku日志，通过查看更容易解决。

# ios - 丢失我的表情符号，可能是 UTF8String

> ID：14844228
> 
> 赞同：0
> 
> 时间：2013-02-13T00:06:53.463
> 
> 标签：ios, objective-c, core-graphics

我正在做这种事情：

```
const char *cstring = [textIn UTF8String]; 
```

然后我这样做：

```
CGContextShowText(ctx, cstring, strlen(cstring)); 
```

我在这个过程中失去了我的表情符号，尽管选择的字体`CGContextSelectFont`支持它们。有简单的解决方法吗？

# python - Python argparse：参数的可选值和位置值

> ID：14844230
> 
> 赞同：4
> 
> 时间：2013-02-13T00:07:02.790
> 
> 标签：python, command-line-arguments, argparse

考虑以下用法：

```
usage: do.py [-h] [-s | -m] filename 
```

这不是完整的用法。但我实际上想要的是`filename`成为文件的实际价值，而不是：

```
--filename FILENAME 
```

而且，`filename`应该是可选的，所以我可以从标准输入中读取。想想`cat`UNIX 上的程序。

你简单地说：

```
cat filename 
```

或者

```
cat 
```

编辑：现在，如果我在`do.py`没有任何命令行选项的情况下执行程序，我将得到一个`error: too few arguments`. 相反，即使我没有给它一个有效的`filename`. 我怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-13T00:20:40.187

**更新 2：**来自 ArgParse 文档，

> nargs='?' 的更常见用法之一 是允许可选的输入和输出文件：
> 
> ```
> >>> parser = argparse.ArgumentParser()
> >>> parser.add_argument('infile', nargs='?', type=argparse.FileType('r'),
> ...                     default=sys.stdin)
> >>> parser.add_argument('outfile', nargs='?', type=argparse.FileType('w'),
> ...                     default=sys.stdout)
> >>> parser.parse_args(['input.txt', 'output.txt'])
> Namespace(infile=<open file 'input.txt', mode 'r' at 0x...>,
>           outfile=<open file 'output.txt', mode 'w' at 0x...>)
> >>> parser.parse_args([])
> Namespace(infile=<open file '<stdin>', mode 'r' at 0x...>,
>           outfile=<open file '<stdout>', mode 'w' at 0x...>) 
> ```

**原答案：**

这很简单：只需添加一个带有默认值的位置参数和一个`nargs='*'`. 如果参数为零，将使用默认值，否则将使用命令行上的参数：

```
>>> p = argparse.ArgumentParser()
>>> p.add_argument('filename', nargs='*', default=['-'])
>>> p.parse_args([])
Namespace(filename=['-'])
>>> p.parse_args(['abc'])
Namespace(filename=['abc']) 
```

通常，`-`用来指标准输入/标准输出。

然后你做这样的事情：

```
def get_inputs(ns):
    """Iterate over input files."""
    for path in ns.filename:
        if path == '-':
            yield sys.stdin
        else:
            yield open(path, 'r') 
```

**更新：**我假设你想要多个文件名，因为`cat`需要多个文件名。`nargs='?'`如果您想要零个或一个文件名，您可以使用。

# scheme - 找出错误

> ID：14844232
> 
> 赞同：1
> 
> 时间：2013-02-13T00:07:23.150
> 
> 标签：scheme, racket

几天前我问我如何开发一个函数`one`，它会使用一个符号列表并返回相同的列表，但每个实例都`cat`加倍。

所以例如

```
 (one (cons 'animal(cons 'table (cons 'cat (cons 'bread
        empty))))) 
```

我会得到

```
(cons 'animal (cons 'table (cons 'cat (cons 'cat (cons 'bread 
    empty))))) 
```

这是我的职责

```
(define (one alos)
  (cond [(empty? alos)empty]
        [(symbol=? 'cat (first alos)) (cons (first alos) (cons (first alos) (one rest alos)))]
         [else (cons (first alos) (one rest alos))])) 
```

我想知道为什么我一直得到“一个：只需要 1 个参数，但找到 2 个”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T01:09:01.310

看这里： `[(symbol=? 'cat (first alos)) (cons (first alos) (cons (first alos) (one rest alos)))]` 这里： `[else (cons (first alos) (one rest alos))]))`

用什么`one`称呼？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T01:19:27.373

你错过了几个括号，这应该可以解决它：

```
(define (one alos)
  (cond [(empty? alos) empty]
        [(symbol=? 'cat (first alos))
         (cons (first alos) (cons (first alos) (one (rest alos))))]
        [else (cons (first alos) (one (rest alos)))])) 
```

请注意，您是这样递归调用`one`的：

```
(one rest alos) 
```

但正确的称呼方式是这样的：

```
(one (rest alos)) 
```

# objective-c - 在 UIScrollView 中缩放 UIImage

> ID：14844233
> 
> 赞同：0
> 
> 时间：2013-02-13T00:07:25.710
> 
> 标签：objective-c, uiscrollview

我目前有一个实现 UIScrollView 的自定义类。

我创建了一个 UIImageView 并将其添加到 UIScrollView 的子视图中。它可以完美地垂直和水平滚动，但似乎忽略了缩放的东西。这是我的代码：

```
- (void) setUpBoard
{
    // add board
    UIImageView *imageHolder = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"grid.jpg"]];
    [self addSubview:imageHolder];
    self.contentSize = CGSizeMake(imageHolder.frame.size.width, imageHolder.frame.size.height);
    self.indicatorStyle = UIScrollViewIndicatorStyleWhite;
    self.maximumZoomScale = 5.0;
    self.minimumZoomScale = 0.2;
    self.zoomScale = 0.7;
    self.clipsToBounds = YES;
} 
```

如何使用标准捏合手势使其缩放？任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T00:12:35.607

从[*UIScrollView 类参考*概述](http://developer.apple.com/library/ios/documentation/uikit/reference/UIScrollView_Class/Reference/UIScrollView.html#//apple_ref/doc/uid/TP40006922-CH3-DontLinkElementID_1)：

> 该类`UIScrollView`可以有一个必须采用`UIScrollViewDelegate`协议的委托。要使缩放和平移工作，代理必须同时实现`viewForZoomingInScrollView:`and `scrollViewDidEndZooming:withView:atScale:`; 此外，最大 ( `maximumZoomScale`) 和最小 ( `minimumZoomScale`) 缩放比例必须不同。

我怀疑您没有为滚动视图分配委托，或者委托没有实现这两种方法。

# c# - 如何从控制器方法返回多个图像？

> ID：14844237
> 
> 赞同：3
> 
> 时间：2013-02-13T00:07:39.467
> 
> 标签：c#, asp.net-mvc, image-processing

我有一个生成图像的 ASP.NET MVC 控制器（它们存储在内存中，我不想将它们存储在硬盘上）并且应该将它们返回到我的视图中。

问题是：我不知道如何从一个控制器方法返回多个图像（我想在 1 个视图中显示图像）。我知道我可以使用`FileResult`例如返回单个图像，但我不知道（不是在 google/stackoverflow 上）如何从同一方法返回多个图像。无法将方法拆分为多个方法。哦，所有图像都转换为 a `byte[]`，但如有必要，可以反转。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T00:31:45.213

这应该有效。请注意，我正在从磁盘读取我的图像，但它们可以来自内存或任何地方。然后在客户端使用 java-script 来显示它们。

```
[HttpGet]
public JsonResult Images()
{
    var image1Base64 = Convert.ToBase64String(System.IO.File.ReadAllBytes(Server.MapPath("~/Images/1.jpg")));
    var image2Base64 = Convert.ToBase64String(System.IO.File.ReadAllBytes(Server.MapPath("~/Images/2.jpg")));

    var jsonResult = Json(new { image1 = image1Base64, image2 = image2Base64 }, JsonRequestBehavior.AllowGet);
    jsonResult.MaxJsonLength = int.MaxValue;

    return jsonResult;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-13T00:32:02.643

如果您有权访问图像的 MIME 类型，则始终可以将它们呈现为 Base64 编码的图像，而不是向不同的控制器方法发出另一个请求。这是我使用的视图模型：

```
public class ImageViewModel
{
    public string FileName { get; set; }

    public string MIME { get; set; }

    public byte[] Data { get; set; }

    public override string ToString()
    {
        return string.Format(@"data:{0};base64,{1}", MIME.ToLower(), Convert.ToBase64String(Data));
    }
} 
```

您可以在标记的属性中使用该属性`Filename`，因此您的视图中的标记和模型绑定看起来像这样（假设 Razor 语法）：`alt``<img />`

```
<img src="@model.ToString()" alt="@model.FileName" /> 
```

你确实丢失了图像缓存，AFAIK - 这对我来说不是问题，但对于某些人来说是可以理解的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-13T00:19:17.820

我认为您可以通过另一种方式解决它，而不是返回多个图像，您可以创建一个实用方法，将图像加载到控制器中

```
public FileContentResult GetImage(int imageId)
{
  var image = GetImageById(imageId); // get from a list for example
  return File(image, "image/jpeg"); // your image Mime type
} 
```

并在`View`您可以执行以下操作时，迭代图像

```
@foreach (var image in Model)
{ 
<img alt="" src="@Url.Action("GetImage", "ControllerName", new {imageId =image.Id})"/>
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-13T00:22:05.173

您希望根据用户的输入显示多个图像，但不想保存到硬盘（聊天）。因此，我建议您使用会话变量来保存用户输入。并使用简单`FileResult`的基于该会话变量返回多个图像。

[http://blog.theobjectguy.com/2009/12/session-with-style.html](http://blog.theobjectguy.com/2009/12/session-with-style.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-13T00:15:06.657

如果您的要求是在一个视图中显示多个图像，那么使用 2 种操作方法会更容易。一个返回带有 FileResult 的图像，另一个返回一个只使用标准 html img 标签指向第一个操作方法的图像

# silverlight - Windows Phone 绑定图像

> ID：14844239
> 
> 赞同：0
> 
> 时间：2013-02-13T00:07:44.293
> 
> 标签：silverlight, windows-phone-7, listbox, windows-phone

是否可以绑定图像集合并更改它们的 Canvas.Left 和 Canvas.Top 属性？我知道如何将它们绑定到 ListBox，但是，我希望更改它们的位置并将图像分散在各处。

下面的代码将数据发送到 ListBox 并以列表效果一个接一个地呈现图像 - 当然。

我无法使用 Canvas.Left/Top 属性，因为显然图像位于列表框中。

**XML**

```
<ListBox x:Name="listBoxItems">
        <ListBox.ItemTemplate>
            <DataTemplate>
                <StackPanel Margin="5">
                    <Image Source="{Binding ImageUri}" Stretch="None" />
                    <TextBlock Text="{Binding Room.Items.ImageUri}"></TextBlock>
                </StackPanel>
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox> 
```

**C＃**

```
_roomView = new RoomViewModel();
            _roomView.Room = new Room
            {
                Items = new List<Item> {
                new Item {ImageUri = "/Escape;component/Images/Items/a.jpg"},
                new Item {ImageUri = "/Escape;component/Images/Items/b.png"},
                new Item {ImageUri = "/Escape;component/Images/Items/b.png"}}
            };

            listBoxItems.ItemsSource = _roomView.Room.Items; 
```

有谁知道我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T00:21:56.157

如果您在 StackPanel 的ItemTemplate **Canvas****中** **使用**，您可以在 Image 和 TextBlock 上使用**AttachedProperty: Canvas.Top/Canvas.Left 。**有了它，您可以根据需要设置项目的位置。我希望它可以帮助你。

# php - 从 php 中检索变量并通过 AS3 发送到 js 函数

> ID：14844240
> 
> 赞同：0
> 
> 时间：2013-02-13T00:07:53.963
> 
> 标签：php, actionscript-3, flash

谁能告诉我如何从我发布到的 php 文件中检索响应，然后将它们发送到 js 函数。

我在脚本中还有一个动画 gif 图像，它不显示动画。任何人都可以得到这个工作吗？

php 响应采用这种格式 variable1=blabla&varaibale2=blabla

```
function sendPixelData(e:MouseEvent):void {
      capture_mc.visible = false;
 send_mc.visible = false;

    txtReturn.htmlText="Uploading Image......<img src="loading.gif" /><br/> Please Wait!";
    var output:String = "";
    var col = "";
    for (var i:Number=0; i<bitmapData.height; i++) {
        for (var j:Number=0; j<bitmapData.width; j++) {
            col = bitmapData.getPixel(j,i).toString(16);
            // In some cases, the color will be truncated (e.g. "00FF00" becomes "FF00")  
            // so we are adding the missing zeros.  
            while (col.length<6) {
                col = "0" + col;
            }
            output += col;
        }
    }
    var request:URLRequest = new URLRequest("GetPixelData.php");
    var variables:URLVariables = new URLVariables();
    var myURLLoader:URLLoader = new URLLoader();
    variables.pixels=output;// all image pixel
    //trace("output" + output)
    variables.width=videoPreviewWidth;// video width
    variables.height=videoPreviewHeight;// video height
    request.data=variables;
    request.method=URLRequestMethod.POST;
    myURLLoader.addEventListener ("complete", onC);
    myURLLoader.load (request);
    function onC (e) {

         var result:String = 
      ExternalInterface.call( "redirectToURL(send variables here)" );
        trace ("save complete");
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T01:33:42.913

PHP 的结果存储在 URLLoader 的 data 属性中，因此要检索它，请使用：

```
function onC (e:Event) {
    var result:String = String(e.target.data);
    ...etc 
```

对于您问题的第 2 部分，Flash 不支持 gif 文件格式 - 您需要使用 jpg 或 png。

顺便说一句，不要将字符串用于事件类型 - 使用事件类型常量，例如：

```
myURLLoader.addEventListener (Event.COMPLETE, onC); 
```

# php - php 和 mysql 变量

> ID：14844241
> 
> 赞同：0
> 
> 时间：2013-02-13T00:07:57.083
> 
> 标签：php, mysql, variables, post, while-loop

我有一个名为[Infomundo](http://www.infomundo.org)的网站，在该网站下我遇到了 php 问题：

```
$c=1;
  while($c!=17)
  { $fecha_semana$c=$_POST['fecha_semana$c'];
    $interes_semana$c=$_POST['interes_semana$c'];
    $capital_semana$c=$_POST['capital_semana$c'];
    $recargos_semana$c=$_POST['recargos_semana$c'];
    $iva_semana$c=$_POST['iva_semana$c'];
    $pagado_semana$c=$_POST['pagado_semana$c'];
    $c=$c+1;
  } 
```

但是变量 $fecha_semana$c、$interes_semana$c 等是错误的，我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T00:11:54.837

您在数组取消引用中使用单引号：

```
$_POST['fecha_semana$c']; 
```

这不会评估`$c`; 使用双引号：

```
$_POST["fecha_semana$c"]; 
```

也可以看看：[`string`](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.double)

此外，您需要在赋值的左侧使用可变变量：

```
${"fecha_semana$c"} = $_POST["fecha_semana$c"]; 
```

**更新**

如果您在表单字段中使用数组语法，这个问题会更容易：

```
<input name="fecha_semana[]" value="123" />
<input name="fecha_semana[]" value="456" />
<input name="fecha_semana[]" value="678" /> 
```

发布后，您将在 PHP 中拥有一个数组：

```
print_r($_POST['fecha_semana']);
// ["123", "456", "678"] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T00:15:59.187

作为 Jack 解决方案的替代选项，您可以使用连接：

```
$_POST['fecha_semana'.$c]; 
```

我个人更喜欢串联，因为我更容易看到变量在哪里使用，但我想说这在很大程度上是一个偏好问题。

# haskell - 如何编写比较器链接函数？

> ID：14844246
> 
> 赞同：2
> 
> 时间：2013-02-13T00:08:12.567
> 
> 标签：haskell, ghc

我正在尝试编写一个函数，该函数接受比较器列表并返回一个比较器，该比较器将使用第一个比较器比较一对值，然后如果第一个比较器返回，则使用第二个比较器`EQ`等。

我想出的是以下功能：

```
import Data.Monoid

chainCompare :: [a -> a -> Ordering] -> a -> a -> Ordering
chainCompare = mconcat . map ($) 
```

编辑：`chainCompare`也可以写成（感谢 Vitus 指出）：

```
chaincompare = mconcat 
```

使用此功能的示例如下：

```
import Data.List
import Data.Ord

sortBy (chainCompare [comparing length, comparing sum]) [[1..100], [1..20], [100..200]] 
```

但是，这个函数需要显式使用比较，所以我尝试修改这个函数：

```
chainCompare :: Ord b => [a -> b] -> a -> a -> Ordering
chainCompare = mconcat . map (comparing $) 
```

但是，`chainCompare`在这种情况下会导致编译错误（此外，即使此示例编译成功，它也不适用于空字符串）：

```
 sortBy (chainCompare [length, head]) [['a'..'z'], ['A'..'Z'], "Lorem ipsum dolor sit amet"] 
```

是否可以在任何类型`chainCompare`的意义上进行多态？我已经看到一些使用扩展的 Haskell 代码并尝试搜索它们，但我仍然无法弄清楚每个特定扩展的用途。`b``instance Ord``forall`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-13T00:20:11.613

`chainCompare [f, g]``f`如果和`g`是具有不同类型的函数，无论您如何定义，总是会导致错误`chainCompare`。您甚至可以删除`chainCompare`并直接写入`[f, g]`，它仍然会导致错误。原因是列表中根本不可能有不同类型的值。

有时，当您想在同一个列表中存储不同类型的值时，使用存在类型（GHC 扩展）是有意义的。有了它，您可以定义一个存在类型`Comparator`并使用 list `[Comparator length, Comparator head]`。但是，这`comparing`与您在第一个示例中所做的那样使用没有任何好处，因此在这种情况下将毫无意义。

因此，您使用的第一个代码`comparing`确实是您能做的最好的。

作为记录，以下是使用存在类型的代码的样子：

```
{-# LANGUAGE ExistentialQuantification #-}

import Data.Monoid
import Data.Ord

data Comparator a = forall b. Ord b => Comparator (a -> b)

chainCompare :: [Comparator a] -> a -> a -> Ordering
chainCompare = mconcat . map comp
  where comp (Comparator f) = comparing f

-- Usage:
list = [['a'..'z'], ['A'..'Z'], "Lorem ipsum dolor sit amet"]
sortedList = sortBy (chainCompare [Comparator length, Comparator head]) list 
```

与第一个版本在用法上的唯一区别是您必须编写`Comparator`而不是，`comparing`并且不可能使用不基于键进行比较的比较函数。因此，正如我所说，与您的第一个版本相比，它并没有真正增加任何好处。

# php - 如何使用 jquery/php 批量添加名称相似的图片

> ID：14844248
> 
> 赞同：0
> 
> 时间：2013-02-13T00:08:19.827
> 
> 标签：php, jquery, image

我正在向网站添加图像，但我想添加的数量需要很长时间，是否有更快的方法来添加这些图像，并且如果文件名附加了 +1，它可以自动查找新图像，例如 image1。 jpg、image2.jpg 等

我正在使用 PHP。还认为也许这可以使用 javascript 或 jquery 循环来完成，也许是 for 循环，我只是不确定如何。

```
 <img src="images/other/pic2.png"></a>

                <img src="images/other/pic3.png"></a>

                <img src="images/other/pic4.png"></a>

                <img src="images/other/pic5.png"></a>

                <img src="images/other/pic6.png"></a>

                <img src="images/other/pic7.png"></a>

                <img src="images/other/pic8.png"></a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T00:27:50.560

盲目地循环大量迭代以希望文件存在并且是有效文件并不是一个好主意，更好的方法是循环文件目录，检查文件首先是有效图像并包含预期的文件名字首。通过这种方式，您可以将尽可能多的图像添加到目录中，因为您知道在不更改代码的情况下添加了图像。

```
<?php 

$img_path = './images/other/';
$prefix = 'img';

if ($fh = opendir($img_path)) {
    while (false !== ($file = readdir($fh))) {
        if ($file != "." && $file != "..") {
            //Validate its an image and get size, also check that the image filename starts with the $prefix
            $attr = getimagesize($img_path.$file);
            if(isset($attr[3]) && substr($file,0,strlen($prefix)) == $prefix){
                echo '<img src="'.$img_path.$file.'" '.$attr[3].' alt="'.$file.'"/>';
            }
        }
    }
    closedir($fh);
}
?> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-13T00:10:58.210

从你的描述来看，做这样的事情可能是合适的：

```
$initialImageNumber = 2;
$endingImageNumber  = 9;

for ($i = $initialImageNumber; $i <= $endingImageNumber; $i++)
    echo '<img src="images/other/pic' . $i . '.png">'; 
```

# javascript - 附加到路径的正确方法是什么？

> ID：14844251
> 
> 赞同：2
> 
> 时间：2013-02-13T00:08:27.880
> 
> 标签：javascript, node.js

我接受目录路径作为我的一个脚本的命令行参数。我想做两件事。首先是我想确认在目录中传递的路径。我想做的第二件事是附加到带有子目录名称的路径（我提前知道子目录名称）。库中是否有任何函数会`/`在路径丢失时自动将尾随字符添加到路径中，还是我必须手动检查？

例如，如果`/User/local`通过了，那么我必须添加`/bin`到路径中，而`bin`如果路径`/User/local/`通过了，我必须添加。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T00:59:29.327

似乎您只想要[path.join](http://nodejs.org/api/path.html#path_path_join_path1_path2)、[fs.existsSync](http://nodejs.org/api/fs.html#fs_fs_existssync_path)和[fs.statSync](http://nodejs.org/api/fs.html#fs_fs_statsync_path)

```
var path = require('path');
var fs = require('fs');

var dir = process.argv[2];

console.log(dir);
console.log(fs.existsSync(dir) && fs.statSync(dir).isDirectory());
console.log(path.join(dir, 'mysubdir')); 
```

因此，如果我像这样运行上述内容：`node test.js /tmp`我将得到：

```
/tmp
true
/tmp/mysubdir 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T01:03:22.190

您可以将逻辑放入一个简短的函数中，以确保两个部分之间只有一个“/”：

```
function appendToPath(orig, add) {
    return orig.replace(/\/$/, "") + "/" + add.replace(/^\//, "");
}

var newPath = appendToPath("/User/local", "bin"); 
```

或者

```
var newPath = appendToPath("/User/local/", "/bin"); 
```

或者

```
var newPath = appendToPath("/User/local", "/bin"); 
```

他们都回来了`"/User/local/bin"`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T00:15:14.540

```
var tail = 'bin/test/',
    path = arg[arg.length-1] === '/' ? arg + tail : arg + '/' + tail; 
```

或者我错过了什么？:)

# gnome - 有没有办法从其他 tty 暂停 gnome？

> ID：14844252
> 
> 赞同：0
> 
> 时间：2013-02-13T00:08:29.667
> 
> 标签：gnome, tty

要在我的计算机上运行虚拟机并获得更多资源，我想暂停 gnome。这个想法是从它继续其他 tty pause gnome 并使用比使用 gnome 所需的更低的主机内存运行我的虚拟机。我没有找到任何东西，我想这是不可能的。但我想确定一下。这就是为什么我在这里问这个问题

我的操作系统是 linux mint 13。

祝你有美好的一天。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T00:35:58.537

目前没有任何方法可以将 Linux 上的进程冻结到磁盘并将其从 RAM 中删除，即使有，你所说的 GNOME 也是由许多同时运行的进程和程序组成的，所以试图协调您需要冻结的过程会很棘手

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T00:48:44.247

如果您想为您的虚拟机提供更多资源，您可以在使用虚拟机时退出 Gnome 并使用另一个桌面环境。如果您使用[window maker](http://community.linuxmint.com/software/view/wmaker)，您将节省数百兆字节的内存。Window Maker 只使用几兆字节，并且占用很少的磁盘空间。

* * *

如果您确实使用 Window Maker，那么一开始会有些混乱。要访问您的应用程序，请右键单击桌面以获取菜单。屏幕一侧有一个应用程序停靠栏，但默认情况下它只包含一个 xterm 启动器。

如果您的应用程序不在应用程序菜单中，那么您需要使用 xterm 启动它。当图标出现时，将其拖到 Dock 上，您就可以从那里启动它。要编辑应用程序菜单，您需要右键单击桌面并选择`Configure Window Maker`。

# assembly - 从 ADD 和 NAND 右移逻辑？

> ID：14844258
> 
> 赞同：-2
> 
> 时间：2013-02-13T00:08:51.403
> 
> 标签：assembly, add, bit-shift

第二次问这个问题，因为上次人们回避了我的问题并提出了我无法使用的解决方案。我正在用一种非常简单的汇编语言制作乘法器，其中我有 BEQ、NAND 和 ADD 来创建 SRL。我还必须将乘数保持在 50 行以下（到目前为止使用了 16 行），因此希望该解决方案可以循环使用。

我的问题是如何仅使用 NAND 和 ADD 实现 SRL

注意：请不要建议通过将一个数字添加到自身 x 次来相乘。我现在正在研究的方法可以通过解决 SRL 问题来完成。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T00:46:02.217

我不认为人们“回避”了你的问题。这没什么好用的。NAND按位运行，因此您唯一希望通过指令获取位位置之间的信息是加法中的进位。我们有`x+x = SLL x`. 你没有说你的处理器。如果您有寄存器对，您可以将 x 加载到一对寄存器的低位寄存器中，然后为 N 位宽的寄存器左移 N-1 次。高寄存器将有你需要的东西。

否则会有一个测试和设置循环。

```
 ans = 0
  test = 2
  set = 1
next:
  if NAND(-1,NAND(x,test)) == 0 goto skip_set
  ans = ans + set
skip_set: 
  set = set + set
  test = test + test
  if test == 0 goto done
  goto next
done: 
```

最后，如果你的词很窄，你可以在内存中写一个表格。

我知道您正在寻找 SRL，但当然可以仅使用 SLL 实现乘法。对于`x*y`，它会是这样的：

```
 ans = 0
  test = 1
next:
  if NAND(-1,NAND(x,test)) == 0 goto skip
  ans = ans + y
skip:
  y = y + y
  test = test + test
  if test == 0 goto done
  goto next
done: 
```

# ruby-on-rails - 如何使用 Ruby on Rails 从头开始 创建博客 - 从 rails 2.x 到 3.x - 没有可见的评论

> ID：14844261
> 
> 赞同：0
> 
> 时间：2013-02-13T00:09:01.553
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-2

我正在研究如何使用来自 Sixrevisions.com 的 Ruby on Rails 教程从头开始创建博客。

当我运行服务器并创建新帖子时，我没有可见的选项来添加评论。根据教程，我应该能够将结束编辑评论添加到创建的帖子中。

我的comments_controller.rb：

```
 class CommentsController < ApplicationController
  # GET /comments
  # GET /comments.json
    def index
      @comments = Comment.all

      respond_to do |format|
        format.html # index.html.erb
        format.json { render json: @comments }
      end
    end

    # GET /comments/1
    # GET /comments/1.json
     def show
      @comment = Comment.find(params[:id])

       respond_to do |format|
         format.html # show.html.erb
         format.json { render json: @comment }
       end
    end

     # GET /comments/new
     # GET /comments/new.json
    def new
       @comment = Comment.new

       respond_to do |format|
       format.html # new.html.erb
       format.json { render json: @comment }
      end
    end

    # GET /comments/1/edit
    def edit
       @comment = Comment.find(params[:id])
    end

    # POST /comments
    # POST /comments.json
    def create

        @post = Post.find(params[:post_id])
        @comment = @post.comments.create!(params[:comment])
        redirect_to @post
    end

    # PUT /comments/1
    # PUT /comments/1.json
     def update
       @comment = Comment.find(params[:id])

       respond_to do |format|
         if @comment.update_attributes(params[:comment])
         format.html { redirect_to @comment, notice: 'Comment was successfully      
         updated.' }
          format.json { head :no_content }
         else
          format.html { render action: "edit" }
         format.json { render json: @comment.errors, status: :unprocessable_entity }
         end
       end
     end

     # DELETE /comments/1
     # DELETE /comments/1.json
    def destroy
      @comment = Comment.find(params[:id])
      @comment.destroy

      respond_to do |format|
        format.html { redirect_to comments_url }
        format.json { head :no_content }
      end
    end
  end 
```

显示.html.erb

```
 <p>
   <b>Title:</b>
   <%=h @post.title %>

 </p>

 <p>
   <b>Body:</b>
   <%=h @post.body %>
 </p>

 <h2>Comments</h2>

 <% @post.comments.each do |c| %>
   <p>
     <b><%=h c.name %> said:</b><br />
     <%= time_ago_in_words(c.created_at) %> ago
   </p>

   <p>
     <%=h c.body %>
   </p>
 <% end %>

 <% form_for [@post, Comment.new] do |f| %>
   <p>

     <%= f.label :name, "Author" %><br />
     <%= f.text_field :name %><br />
     <%= f.label :body, "Comment Description" %><br />
     <%= f.text_area :body %>
  </p>

  <p>
     <%= f.submit "Add Comment" %>
  </p>
 <% end %> 
```

耙路线

```
 post_comments GET    /posts/:post_id/comments(.:format)     comments#index
                 POST   /posts/:post_id/comments(.:format)     comments#create
new_post_comment GET    /posts/:post_id/comments/new(.:format) comments#new
edit_post_comment GET   /posts/:post_id/comments/:id/edit(.:format) comments#edit
 post_comment GET    /posts/:post_id/comments/:id(.:format)    comments#show
              PUT    /posts/:post_id/comments/:id(.:format)      comments#update
              DELETE /posts/:post_id/comments/:id(.:format)      comments#destroy
        posts GET    /posts(.:format)                            posts#index
              POST   /posts(.:format)                            posts#create
     new_post GET    /posts/new(.:format)                        posts#new
    edit_post GET    /posts/:id/edit(.:format)                   posts#edit
         post GET    /posts/:id(.:format)                        posts#show
              PUT    /posts/:id(.:format)                        posts#update
              DELETE /posts/:id(.:format)                        posts#destroy
                     /:controller/:action/:id(.:format)          :controller#:action
                     /:controller/:action/:id.:format            :controller#:action
         root        /                                           posts#index 
```

感谢您的帮助和兴趣！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T00:25:53.970

你的代码看起来不错。

转到`http://localhost:3000/posts/new`并创建一个帖子。如果这是你的第一篇文章，这篇文章会有一个特定的 id，大概是 1。

然后，转到`http://localhost:3000/posts/1/comments`- 那里您将看到所有评论（可能没有），以及创建新评论的链接。如果没有链接，请转到 - 你猜对了 - `http://localhost:3000/posts/1/comments/new`。这正是您的路线告诉您的。

看起来你在这里使用脚手架。我不知道教程，但看看

*   [导轨路由](http://guides.rubyonrails.org/routing.html)
*   [脚手架](http://guides.rubyonrails.org/getting_started.html#getting-up-and-running-quickly-with-scaffolding)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T00:29:36.653

创建一个新的链接

```
<%= link_to('new comment',new_post_path) %> 
```

在您的视图模板中

# compass-sass - SCSS 和 Compass CLI 配置

> ID：14844263
> 
> 赞同：1
> 
> 时间：2013-02-13T00:09:10.030
> 
> 标签：compass-sass, sass

`sass`使用CLI时如何配置 Compass ？

基本上我是设置`images_dir`属性，这是我一直在使用的命令：

```
sass 
    --compass
    path/to/input.scss
    path/to/output.css 
```

我试过了：

```
sass 
    --compass
    -c path/to/config.rb
    path/to/input.scss
    path/to/output.css 
```

输出：

```
WARNING on line 1 of path/to/config.rb:
This selector doesn't have any properties and will not be rendered.
Syntax error: Invalid CSS after "image_dir ": expected selector, was "= "test""
    on line 1 of path/to/config.rb 
```

所以很明显，在使用命令`-c`时它的工作方式不同。`compass compile`

和

```
sass 
    --compass
    --images-dir path/to/images
    path/to/input.scss
    path/to/output.css 
```

输出：

```
OptionParser::InvalidOption: invalid option: --images-dir 
```

同上。

我尝试使用`compass compile`但我没有项目目录。

```
compass compile 
    --images-dir path/to/images
    path/to
    path/to/input.scss 
```

输出：

```
You must compile individual stylesheets from the project directory. 
```

也试过这个：

```
compass compile 
    path/to 
```

输出：

```
Nothing to compile. If you're trying to start a new project, you have left off the directory argument. 
```

config.rb 刚刚包含：

```
images_dir = "test" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T01:54:40.910

`compass compile`读取`config.rb`配置文件。

这是我使用的示例项目设置，从`config.rb`文件开始：

```
require "susy"

# Set this to the root of your project when deployed:
http_path = "/"
css_dir = "public/css"
sass_dir = "private/scss"
images_dir = "public/images"
http_images_path = "/images"

output_style = :expanded # or :nested or :compact or :compressed

# To disable debugging comments that display the original location of your selectors. Uncomment:
line_comments = true 
```

我的项目设置如下：

```
private/scss    # scss files. I use a main file that handles imports itself
public/images   # images
public/css      # built css here
config.rb       # contents included above 
```

为了构建它，我在项目的根文件夹中运行以下命令：

```
bundle exec compass compile private/scss/layout.scss 
```

# c++ - 大型 C++ 项目的 Makefile 模板？

> ID：14844268
> 
> 赞同：2
> 
> 时间：2013-02-13T00:09:36.517
> 
> 标签：c++, makefile

我需要一个 Makefile，它将编译当前目录中的所有内容并递归地沿树向下，并且最好使用编译器的依赖项（-M 等），以便每当我键入“make”时，都会尽可能少地重新编译。

另外，为什么这不是 Makefile 文档的第 1 页？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-13T00:25:49.260

虽然我建议使用 cmake 之类的工具，但我知道有时使用普通的旧 Makefile 会更容易或更好。

这是我在一些项目中使用的 Makefile，它使用 gcc 创建依赖文件：

```
# Project Name (executable)
PROJECT = demoproject
# Compiler
CC = g++

# Run Options       
COMMANDLINE_OPTIONS = /dev/ttyS0

# Compiler options during compilation
COMPILE_OPTIONS = -ansi -pedantic -Wall

#Header include directories
HEADERS =
#Libraries for linking
LIBS =

# Dependency options
DEPENDENCY_OPTIONS = -MM

#-- Do not edit below this line --

# Subdirs to search for additional source files
SUBDIRS := $(shell ls -F | grep "\/" )
DIRS := ./ $(SUBDIRS)
SOURCE_FILES := $(foreach d, $(DIRS), $(wildcard $(d)*.cpp) )

# Create an object file of every cpp file
OBJECTS = $(patsubst %.cpp, %.o, $(SOURCE_FILES))

# Dependencies
DEPENDENCIES = $(patsubst %.cpp, %.d, $(SOURCE_FILES))

# Create .d files
%.d: %.cpp
    $(CC) $(DEPENDENCY_OPTIONS) $< -MT "$*.o $*.d" -MF $*.d

# Make $(PROJECT) the default target
all: $(DEPENDENCIES) $(PROJECT)

$(PROJECT): $(OBJECTS)
    $(CC) -o $(PROJECT) $(OBJECTS) $(LIBS)

# Include dependencies (if there are any)
ifneq "$(strip $(DEPENDENCIES))" ""
  include $(DEPENDENCIES)
endif

# Compile every cpp file to an object
%.o: %.cpp
    $(CC) -c $(COMPILE_OPTIONS) -o $@ $< $(HEADERS)

# Build & Run Project
run: $(PROJECT)
    ./$(PROJECT) $(COMMANDLINE_OPTIONS)

# Clean & Debug
.PHONY: makefile-debug
makefile-debug:

.PHONY: clean
clean:
    rm -f $(PROJECT) $(OBJECTS)

.PHONY: depclean
depclean:
    rm -f $(DEPENDENCIES)

clean-all: clean depclean 
```

# php - SQL数组的php动态列表-如何设置顺序？

> ID：14844273
> 
> 赞同：0
> 
> 时间：2013-02-13T00:10:01.613
> 
> 标签：php, mysql, arrays, list

我有一个自定义的网上商店，它是用 php 制作的。它从存储在 mySQL 数据库中的某些类别中获取我的所有产品，并在表格中为我的客户显示它们。编程看起来像是要按添加日期对它们进行排序，但这不起作用。我已经多次尝试不同的变量而没有帮助。这里的语法有问题吗？

这是实际列表的代码（页面上方）：

```
$dynamicList = "";
$sql = mysql_query("SELECT * FROM products ORDER BY date_added DESC LIMIT 5");
$productCount = mysql_num_rows($sql); // count the output amount

if(isset($_GET['category'])) {
   $category = $_GET['category'];
   $sql = mysql_query("SELECT * FROM products WHERE category = '$category'");
   $num_rows = mysql_num_rows($sql);
   if($num_rows > 0) {
   while($row = mysql_fetch_array($sql)) {
        $id = $row["id"];
         $product_name = $row["product_name"];
         $price = $row["price"];
         $date_added = strftime("%b %d, %Y", strtotime($row["date_added"]));
         $dynamicList .= '<table width="65%" border="15" cellspacing="0" cellpadding="6" align="center">
    <tr>
      <td width="17%" valign="top"><a href="product.php?id=' . $id . '"><img style="border:#000000 1px solid;" src="inventory_images/' . $id . '.jpg" alt="' . $product_name . '" width="155" height="155" border="1" /></a></td>
      <td width="83%" valign="center">' . $product_name . '<br />
        $' . $price . '<br />
        <a href="product.php?id=' . $id . '"><img src="style/detailssm.png" border="0" alt="Tube Bender"></a></td>
    </tr>
  </table>';
  }
 }
}
mysql_close();
?> 
```

我的产品数据库具有上面代码中列出的所有属性，并且它们都被填写（如产品名称、添加日期、类别等）。我真的很希望能够按日期排序，或者添加一个新列，如“显示顺序”，然后我只需将它们全部编号并完成它。但是我不能只替换变量，因为当前的变量无论如何都不起作用:(

让我知道你们是否有任何想法。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T00:15:40.467

您的示例代码中有 2 个 sql 语句。第一个有一个 ORDER BY 子句，但似乎没有在任何地方使用。

第二个 SQL 语句没有 ORDER BY 子句，这是您用来构建 dynamicList 表的语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T00:17:23.933

我认为第二个查询只是为了有“order by”，试试这个......

```
<?php 

     $dynamicList = "";
     $sql = mysql_query("SELECT * FROM products ORDER BY date_added DESC LIMIT 5");
     $productCount = mysql_num_rows($sql); // count the output amount

     if(isset($_GET['category'])) {
        $category = $_GET['category'];
                 $sql = mysql_query("SELECT * FROM products WHERE category = '$category' ORDER BY date_added DESC ");
        $num_rows = mysql_num_rows($sql);
      ...

?> 
```

# jquery-ui - 我得到了 jquery-ui 可排序的流星模板，但这是一个糟糕的 hack 吗？

> ID：14844274
> 
> 赞同：1
> 
> 时间：2013-02-13T00:10:02.603
> 
> 标签：jquery-ui, meteor, jquery-ui-sortable

我正在尝试在 Meteor 中使用带有嵌套模板的 jquery-ui 可排序，如下所示。以下是有问题的两个模板：

```
<template name="activityEditor">
  {{! the main activity editor view }}
  <div class="activity-editor">
    <input type="text" name="title" class="input-xxlarge" value="{{info.title}}" placeholder="Type a title here...">
    <div class="activity-steps">
      {{#each info.steps}}
        {{>activityStepEditor}}
      {{/each}}
    </div>
  </div>
</template>

<template name="activityStepEditor">    
  {{! the container view for each step editor }}
  <div class="activity-step" data-id="{{_id}}">

    <div class="order">{{order}}</div>
    {{!....stuff...}}

  </div>
</template> 
```

和模板代码（使用coffeescript）：

```
_.extend Template.activityEditor, {

  # ...stuff...

  rendered: ->
    $(".activity-steps").sortable {
      items: '.activity-step'
      handle: '.order'
      update: ->
        stepIds = ($(el).attr('data-id') for el in $('.activity-step'))

        $('.activity-steps').empty() #this must be done in order to steps to re-render properly
        Lab.Activity.reorderSteps stepIds 

    }
    $(".activity-steps").disableSelection()

} 
```

我可以让此代码正常工作并正确重新呈现订单的唯一方法是在可排序元素更新为`$('.activity-steps').empty()`. 我尝试通过更改上下文中观察的另一个变量来取消更新事件并强制重新渲染，但是任何更改都会导致`Exception from Meteor.flush(): undefined`在重新加载页面之前我无法重新渲染任何内容。

这似乎有效，一切都很好。所以我的问题是：有什么理由我不应该这样做吗？有没有更好的标准做法来处理我没有看到的可排序对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-19T18:19:57.203

在不久的将来会有更好的方法来做到这一点，因为 Meteor 团队正在开发其新的渲染引擎：http: //youtube.com/watch?v= **ISNEhPG0wnA**
（在这段视频中，Avital Oliver 展示了一种方法无需重绘屏幕即可：列表中的对象实际上已在所有客户端上移动）

有关更多技术信息，请参阅此 Meteor 的 Github Wiki 条目：
http: **//github.com/meteor/meteor/wiki/New-Template-Engine-Preview**

虽然尚未正式发布，但如果您现在需要它，可以尝试 Nazar Leush 的方法：
http: **//github.com/nleush/meteor-todos-sortable-animation**
他还在这里发布了一个工作示例：http:// **todos -dnd-animated.meteor.com**

# sql - 如何创建此 active_records 查询

> ID：14844275
> 
> 赞同：0
> 
> 时间：2013-02-13T00:10:04.777
> 
> 标签：sql, ruby-on-rails, rails-activerecord

我有一个用户模型和一个故事模型。用户有很多故事。

我想创建一个范围，返回今天创建最多故事的用户的 25 条用户记录，以及他们创建的故事的数量。

我知道 SO 上有些人对 active_records 查询非常擅长。我也知道我不是那些人中的一员:-(。我们将不胜感激并欣然接受帮助！

#UPDATE 解决方案

我一直在使用@MrYoshiji 的建议，这就是我想出的（注意，我在我的 active_admin 仪表板中使用了这个查询）：

```
 panel "Today's Top Posters" do
      time_range = Date.today.beginning_of_day..Date.today.end_of_day
      table_for User.joins(:stories)
          .select('users.username, count(stories.*) as story_count')
          .group('users.id')
          .where(:stories => {:created_at => time_range})
          .order('story_count DESC')
          .limit(25) do
              column :username
              column "story_count"
      end
  end 
```

低头看，它有效！！！！

请注意，当我尝试简化版的 MrYoshiji 的建议时：

```
User.includes(:stories)
    .select('users.username, count(stories.*) as story_count')
    .order('story_count DESC') #with or without the group statement
    .limit(25) 
```

我收到以下错误：

```
 >   User.includes(:stories).select('users.username, count(stories.*) as story_count').order('story_count DESC').limit(25)
  User Load (1.6ms)  SELECT DISTINCT "users".id, story_count AS alias_0 FROM "users" LEFT OUTER JOIN "stories" ON "stories"."user_id" = "users"."id" ORDER BY story_count DESC LIMIT 25
ActiveRecord::StatementInvalid: PG::Error: ERROR:  column "story_count" does not exist
LINE 1: SELECT  DISTINCT "users".id, story_count AS alias_0 FROM "us... 
```

似乎包含不喜欢任何别名。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T00:19:19.390

我现在无法测试这个，在 Windows 下运行......你可以试试吗？

```
User.includes(:stories)
     .select('users.*, count(stories.*) as story_count')
     .group('users.id')
     .order('story_count DESC')
     .where('stories.created_at BETWEEN ? AND ?', Date.today.beginning_of_day, Day.today.end_of_day)
     .limit(25) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T21:50:20.383

正如 MrYshiji 所建议的那样，由于混叠问题，使用 .includes 不起作用（有关更多信息，请参见原始问题）。相反，我使用 .joins 来获得我想要的查询结果（注意，这个查询在我的 active_admin 仪表板中）：

```
panel "Today's Top Posters" do
  time_range = Date.today.beginning_of_day..Date.today.end_of_day
  table_for User.joins(:stories)
      .select('users.username, count(stories.*) as story_count')
      .group('users.id')
      .where(:stories => {:created_at => time_range})
      .order('story_count DESC')
      .limit(25) do
          column :username
          column "story_count"
  end
end 
```

# objective-c - 编译器如何知道在使用@property 时要生成多少个参数？

> ID：14844277
> 
> 赞同：0
> 
> 时间：2013-02-13T00:10:11.963
> 
> 标签：objective-c

我正在用“Objective C 编程”一书学习Objective C，我到了他解释`@property`和的部分`@synthesize`，但我试图理解一些东西：由于声明了setter和getter，我必须提供一个参数名称，在这种情况下每个只有 1 个，但我非常肯定它可以声明超过 1 个的 getter/setter。在这种情况下，编译器如何知道在使用时要生成多少个参数`@property`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T00:13:38.640

属性设置器只能接受一个参数，而属性获取器不能接受任何参数。

可以有一个方法接受多个参数并设置事物，但这不是属性设置器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T00:16:11.793

getter 没有任何价值。它只返回变量的值。setter 设置变量的值，因此它只有一个参数并且不返回任何内容。如果您的“getter”接受多个参数，则不再称为“setter”。

# delphi - Delphi/pascal 将字符串解析为组合框

> ID：14844284
> 
> 赞同：2
> 
> 时间：2013-02-13T00:10:55.847
> 
> 标签：delphi, delphi-2010

我正在尝试解析一个看起来完全像这样的字符串（sys）

```
-1|low
0|normal
1|high 
```

我需要将它们配对在一个组合框中，例如，低是标题，-1 是值。做这个的最好方式是什么？到目前为止，我所拥有的是：

```
 var
 sys : String;
 InputLine : TStringList;

   InputLine := TStringList.Create;
   InputLine.Delimiter := '|';
   InputLine.DelimitedText := sys;
   Combobox1.items.AddStrings(InputLine);
   FreeAndNil(InputLine) 
```

这给出了组合框的每一行：

```
 -1
 low
 0
 normal
 1
 high 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T00:39:47.743

自己手动解析。

```
var
  SL: TStringList;
  StrVal: string;
  IntVal: Integer;
  Line: string;
  DividerPos: Integer;
begin
  SL := TStringList.Create;
  try
    SL.LoadFromFile('Whatever.txt');
    for Line in SL do
    begin
      DividerPos := Pos('|', Line);
      if DividerPos > 0 then
      begin
        StrVal := Copy(Line, DividerPos + 1, Length(Line));
        IntVal := StrToInt(Copy(Line, 1, DividerPos - 1));
        ComboBox1.Items.AddObject(StrVal, TObject(IntVal));
      end;
    end
  finally
    SL.Free;
  end;
end; 
```

要从选定项目中检索值：

```
if (ComboBox1.ItemIndex <> -1) then
  SelVal := Integer(ComboBox1.Items.Objects[ComboBox1.ItemIndex]); 
```

# c++ - 声明不兼容，初学者 C++

> ID：14844286
> 
> 赞同：0
> 
> 时间：2013-02-13T00:10:58.127
> 
> 标签：c++, string.h

我只是需要一点帮助来完成这项任务。我必须重新定义运算符才能使用字符串。我从 == 运算符开始，并在我的头文件中声明了它，但是当我在我的 cpp 文件中定义函数时，它说它与声明的函数不兼容。这可能是一个愚蠢的错误，我有时只是不明白这一点。

**string.h 头文件**

```
 #pragma once

    #include <iostream>
    #include <string>
    using namespace std;

    #define NOT_FOUND -1

   // C++ String class that encapsulates an ASCII C-string
class String
{
 public:
// Default constructor
String();

// MUST HAVE: Copy-constructor that performs deep copy
String(const String& source);

// Init-constructor to initialize this String with a C-string
String(const char* text);

// Init constructor, allocates this String to hold the size characters
String(int size);

// Destructor
~String();

bool& compareTo(const String& cmp1);
// Assignment operator to perform deep copy
String& operator = (const String& source);

// Assignment operator to assign a C-string to this String
String& operator = (const char* text);

// Returns a reference to a single character from this String
char& operator [] (int index) const;

// Comparison operators
bool operator == (const String& compareTo) const; 
```

**字符串.cpp 文件**

```
 #include "string.h"
#include <string>
#include <sstream>

using namespace std;

// Default constructor
String::String()
{
Text = NULL;
}

// MUST HAVE: Copy-constructor that performs deep copy
String::String(const String& source)
{
Text = NULL;
// Call the assignment operator to perform deep copy
*this = source;
}

// Init-constructor to initialize this String with a C-string
String::String(const char* text)
{
Text = NULL;
// Call the assignment operator to perform deep copy
*this = text;
}

// Init constructor, allocates this String to hold the size characters
String::String(int size)
{
Text = new char[size];
}

// Destructor
String::~String()
{
delete[] Text;
}

// Assignment operator to perform deep copy
String& String::operator = (const String& source)
{  
// Call the other assigment operator to perform deep copy
*this = source.Text;
return *this;
}

// Assignment operator to assign a C-string to this String
String& String::operator = (const char* text)
{
// Ddispose of old Text
delete[] Text;

// +1 accounts for NULL-terminator
int trueLength = GetLength(text) + 1;

// Dynamically allocate characters on heap
Text = new char[trueLength];

// Copy all characters from source to Text; +1 accounts for NULL-terminator
for ( int i = 0; i < trueLength; i++ )
    Text[i] = text[i];

return *this;
}

***bool& String::operator ==(string cmp2)***
{
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T00:15:38.157

您的`compareTo`声明有`const`while 定义没有 const，这意味着它们的定义与声明具有不同的签名：

```
bool& compareTo(const String& cmp1);
                ^^^
bool& String::compareTo(string cmp2)
{
}; 
```

顺便说一句，你为什么`compareTo`回来`bool&`？

也应该避免`using namespace std;`在任何头文件中。看看[为什么使用命名空间std-considered-a-bad-practice-in-c](https://stackoverflow.com/questions/1452721/why-is-using-namespace-std-considered-a-bad-practice-in-c)

# javascript - 复制并粘贴字符串后，Javascript JSON.parse 不起作用

> ID：14844289
> 
> 赞同：1
> 
> 时间：2013-02-13T00:11:09.047
> 
> 标签：javascript, json, yahoo-weather-api

我尝试为使用 yahoo-weatherdata 的主页创建后备。

我通常使用 jQuery 的 $.getJSON 函数将 yahoo 天气数据作为 json 获取。这工作正常。我正在使用以下代码：

```
var url = 'http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20weather.forecast%20where%20woeid%3D2502265&format=json'

$.getJSON(url, function(r){

        result = r.query.results.channel;

        //Do things

    }).error(function(){
        //Fehler beim HTTP-Request
        debugger;

        //Fallback
        var fallback = JSON.parse('{"query":{"count":1,"created":"2013-02-12T23:58:55Z","lang":"en-US","results":{"channel":{"title":"Yahoo! Weather - Sunnyvale, CA","link":"http://us.rd.yahoo.com/dailynews/rss/weather/Sunnyvale__CA/*http://weather.yahoo.com/forecast/USCA1116_f.html","description":"Yahoo! Weather for Sunnyvale, CA","language":"en-us","lastBuildDate":"Tue, 12 Feb 2013 2:56 pm PST","ttl":"60","location":{"city":"Sunnyvale","country":"United States","region":"CA"},"units":{"distance":"mi","pressure":"in","speed":"mph","temperature":"F"},"wind":{"chill":"60","direction":"320","speed":"8"},"atmosphere":{"humidity":"39","pressure":"30.32","rising":"2","visibility":"10"},"astronomy":{"sunrise":"7:01 am","sunset":"5:43 pm"},"image":{"title":"Yahoo! Weather","width":"142","height":"18","link":"http://weather.yahoo.com","url":"http://l.yimg.com/a/i/brand/purplelogo//uh/us/news-wea.gif"},"item":{"title":"Conditions for Sunnyvale, CA at 2:56 pm PST","lat":"37.37","long":"-122.04","link":"http://us.rd.yahoo.com/dailynews/rss/weather/Sunnyvale__CA/*http://weather.yahoo.com/forecast/USCA1116_f.html","pubDate":"Tue, 12 Feb 2013 2:56 pm PST","condition":{"code":"34","date":"Tue, 12 Feb 2013 2:56 pm PST","temp":"60","text":"Fair"},"description":"\n<img src=\"http://l.yimg.com/a/i/us/we/52/34.gif\"/><br />\n<b>Current Conditions:</b><br />\nFair, 60 F<BR />\n<BR /><b>Forecast:</b><BR />\nTue - Clear. High: 60 Low: 40<br />\nWed - Sunny. High: 64 Low: 42<br />\n<br />\n<a href=\"http://us.rd.yahoo.com/dailynews/rss/weather/Sunnyvale__CA/*http://weather.yahoo.com/forecast/USCA1116_f.html\">Full Forecast at Yahoo! Weather</a><BR/><BR/>\n(provided by <a href=\"http://www.weather.com\" >The Weather Channel</a>)<br/>\n","forecast":[{"code":"31","date":"12 Feb 2013","day":"Tue","high":"60","low":"40","text":"Clear"},{"code":"32","date":"13 Feb 2013","day":"Wed","high":"64","low":"42","text":"Sunny"}],"guid":{"isPermaLink":"false","content":"USCA1116_2013_02_13_7_00_PST"}}}}}}');
        result = fallback.query.result.channel;
    }); 
```

但是后备解析不起作用。

我得到错误：

SyntaxError：意外的令牌（Chrome）

我尝试解析的字符串只是以下内容的复制和粘贴：http: [//query.yahooapis.com/v1/public/yql](http://query.yahooapis.com/v1/public/yql?q=select%20) ?q=select%20 *%20from%20weather.forecast%20where%20woeid% 3D2502265&格式=json

JSONLint 告诉我，一切正常：

```
http://jsonlint.com/?json={%22query%22:{%22count%22:1,%22created%22:%222013-02-13T00:12:44Z%22,%22lang%22:%22en-US%22,%22results%22:{%22channel%22:{%22title%22:%22Yahoo!%20Weather%20-%20Sunnyvale,%20CA%22,%22link%22:%22http://us.rd.yahoo.com/dailynews/rss/weather/Sunnyvale__CA/*http://weather.yahoo.com/forecast/USCA1116_f.html%22,%22description%22:%22Yahoo!%20Weather%20for%20Sunnyvale,%20CA%22,%22language%22:%22en-us%22,%22lastBuildDate%22:%22Tue,%2012%20Feb%202013%202:56%20pm%20PST%22,%22ttl%22:%2260%22,%22location%22:{%22city%22:%22Sunnyvale%22,%22country%22:%22United%20States%22,%22region%22:%22CA%22},%22units%22:{%22distance%22:%22mi%22,%22pressure%22:%22in%22,%22speed%22:%22mph%22,%22temperature%22:%22F%22},%22wind%22:{%22chill%22:%2260%22,%22direction%22:%22320%22,%22speed%22:%228%22},%22atmosphere%22:{%22humidity%22:%2239%22,%22pressure%22:%2230.32%22,%22rising%22:%222%22,%22visibility%22:%2210%22},%22astronomy%22:{%22sunrise%22:%227:01%20am%22,%22sunset%22:%225:43%20pm%22},%22image%22:{%22title%22:%22Yahoo!%20Weather%22,%22width%22:%22142%22,%22height%22:%2218%22,%22link%22:%22http://weather.yahoo.com%22,%22url%22:%22http://l.yimg.com/a/i/brand/purplelogo//uh/us/news-wea.gif%22},%22item%22:{%22title%22:%22Conditions%20for%20Sunnyvale,%20CA%20at%202:56%20pm%20PST%22,%22lat%22:%2237.37%22,%22long%22:%22-122.04%22,%22link%22:%22http://us.rd.yahoo.com/dailynews/rss/weather/Sunnyvale__CA/*http://weather.yahoo.com/forecast/USCA1116_f.html%22,%22pubDate%22:%22Tue,%2012%20Feb%202013%202:56%20pm%20PST%22,%22condition%22:{%22code%22:%2234%22,%22date%22:%22Tue,%2012%20Feb%202013%202:56%20pm%20PST%22,%22temp%22:%2260%22,%22text%22:%22Fair%22},%22description%22:%22\n%3Cimg%20src=\%22http://l.yimg.com/a/i/us/we/52/34.gif\%22/%3E%3Cbr%20/%3E\n%3Cb%3ECurrent%20Conditions:%3C/b%3E%3Cbr%20/%3E\nFair,%2060%20F%3CBR%20/%3E\n%3CBR%20/%3E%3Cb%3EForecast:%3C/b%3E%3CBR%20/%3E\nTue%20-%20Clear.%20High:%2060%20Low:%2040%3Cbr%20/%3E\nWed%20-%20Sunny.%20High:%2064%20Low:%2042%3Cbr%20/%3E\n%3Cbr%20/%3E\n%3Ca%20href=\%22http://us.rd.yahoo.com/dailynews/rss/weather/Sunnyvale__CA/*http://weather.yahoo.com/forecast/USCA1116_f.html\%22%3EFull%20Forecast%20at%20Yahoo!%20Weather%3C/a%3E%3CBR/%3E%3CBR/%3E\n(provided%20by%20%3Ca%20href=\%22http://www.weather.com\%22%20%3EThe%20Weather%20Channel%3C/a%3E)%3Cbr/%3E\n%22,%22forecast%22:[{%22code%22:%2231%22,%22date%22:%2212%20Feb%202013%22,%22day%22:%22Tue%22,%22high%22:%2260%22,%22low%22:%2240%22,%22text%22:%22Clear%22},{%22code%22:%2232%22,%22date%22:%2213%20Feb%202013%22,%22day%22:%22Wed%22,%22high%22:%2264%22,%22low%22:%2242%22,%22text%22:%22Sunny%22}],%22guid%22:{%22isPermaLink%22:%22false%22,%22content%22:%22USCA1116_2013_02_13_7_00_PST%22}}}}}} 
```

有人知道出了什么问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T00:21:45.587

您忘记转义撇号（没有）和反斜杠。如果你有一个像`'{"a":"b\"c"}'`它一样的 JS 字符串`'{"a":"b"c"}'`- 这显然是无效的 JSON。

无需粘贴未转义的 JSON*字符串*并调用`JSON.parse`它，只需将纯 JSON 粘贴为对象文字：

```
var fallback = {"query":{"count":1,"created":…},…}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T00:32:13.577

拿你的字符串，用它试试这个： `alert(mything.query.results.channel.title);`而不是`alert(mything.query.result.channel.title);`那个字符串中没有定义的

所以

```
 result = fallback.query.results.channel; 
```

# php - 使用php中的三元运算符根据sql中的事件状态回显不同的状态

> ID：14844292
> 
> 赞同：1
> 
> 时间：2013-02-13T00:11:30.700
> 
> 标签：php, html, sql, css

好吧，如果状态为 1，则为“有效的保险事件”，如果为 2，则为“已完成的保险事件”。

```
if(!empty($ins_event))
            {
            echo "<tr><td>&nbsp;<img src='/check-icon.gif'> <a href='". matry::here(array('event_id'=>$ins_event['id'])) . "'>" . ( $ins_event['status'] == 2 ? "Completed Insurance Event": "Active Insurance Event") . "</a></td></tr>"; 
            }
else 
        {
        echo "<tr><td>" . cbox_return() . "<a href='". matry::here_to('new', array('tfilt'=>'IN', 'pfilt'=>$patient->code)) . "' style='color: #000; color:$rx_image_color'>**Ins Event Not Created**</td></tr>";
        } 
```

我在这里有一个颜色变量：

```
<?php
$rx_event_colors = $rx_ev_status = '#009933';
?> 
```

我如何使用此变量来获取 2 的状态并更改字体颜色。

我应该分解脚本并使用 if {} else {} 语句吗？

* * *

更新代码：

```
echo "<tr><td>&nbsp;<img src='/check-icon.gif'> <a href='". matry::here(array('event_id'=>$ins_event['id'])) . "'" . ( $ins_event['status'] == 2 ? ' style="color: ' . $rx_ev_status . '">Completed Insurance Event' : '>Active Insurance Event') . "</a></td></tr>"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T00:15:49.140

你基本上会做同样的三元运算：

```
($ins_event['status'] == 2 ? ' style="color: ' . $rx_ev_status . '"' : '') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T00:14:35.737

你是这个意思吗？你的问题不是很清楚。。

```
if(!empty($ins_event))
            {
            echo "<tr><td>&nbsp;<img src='/check-icon.gif'> <a ".($ins_event['status'] == 2 ? 'style="color:'.$rx_ev_status.';"': '')." href='". matry::here(array('event_id'=>$ins_event['id'])) . "'>" . ( $ins_event['status'] == 2 ? "Completed Insurance Event": "Active Insurance Event") . "</a></td></tr>"; 
            } 
```

这是一个编辑，为了清楚起见，将回声分成不同的行...

```
echo '<tr><td>&nbsp;<img src="/check-icon.gif">';
echo '<a '.($ins_event['status'] == 2 ? 'style="color:'.$rx_ev_status.';"': '')." ";
echo ' href="'. matry::here(array('event_id'=>$ins_event['id'])) . '">'; 
echo ($ins_event['status'] == 2 ? 'Completed Insurance Event': 'Active Insurance Event');
echo '</a></td></tr>'; 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-13T00:16:30.387

是的，出于性能和代码维护的原因，逻辑操作应尽可能少地进行。在单个`if { … } else { … }`块内设置文本状态和颜色变量。将状态和颜色存储到变量后，可以`echo`大大简化语句。

```
echo "<tr><td>&nbsp;<img src='/check-icon.gif'> <a href='". matry::here(array('event_id'=>$ins_event['id'])) . "'>$status</a></td></tr>"; 
```

我还会考虑将 的输出存储`matry::here(…)`在一个变量中，以便更轻松地阅读代码。

# iis-7 - 在 IIS 7 中重建 applicationHost.config 的命令

> ID：14844293
> 
> 赞同：20
> 
> 时间：2013-02-13T00:11:35.803
> 
> 标签：iis-7, windows-server-2008, http-status-code-401, applicationhost

有没有办法使用 Windows 命令在 IIS 7 中重建 applicationHost.config 文件？或者，如果您可以通过修改此文件来帮助我解决问题，那也很好。将此文件与其他服务器进行比较时，我注意到在删除站点和一些应用程序池后丢失或不同的非常重要的部分。

我绝不是 IIS 7 方面的专家，但我已经使用它 7 年了。我确信已经为新站点配置执行了所有正确的步骤，但它仍然给我这个错误，`"401.1 "You are not authorized to view this page. You do not have permission to view this directory or page using the credentials that you supplied."`

```
C:\Windows\System32\inetsrv\config\applicationHost.config 
```

这发生在一台不存在 IIS APPPOOL{app pool user} 的机器上，所以我们从来没有使用过这个用户，就像我通常在配置权限时所做的那样。然而，我们上周确实为 IIS_IUSRS（该组中包含 IUSR）添加了适当的权限，并且该站点运行良好。我们正在使用 Windows 身份验证，并且所有其他身份验证方法都已关闭。没有虚拟目录。我们正在使用 .NET 4.0、Classic 和 32 位应用程序（在高级设置下）。

我们必须通过在绑定的“C:\Windows\System32\inetsrv”中执行以下命令来手动更新主机名，因为当 VeriSign SSL 证书添加到绑定时，IIS 会使主机名变灰。

```
appcmd set site /site.name:"himc" /+bindings.[protocol='https',bindingInformation='*:443:subdomain.domain.com'] 
```

“坏”网络服务器上缺少的部分：

# 1 - 存在于“好”框中，缺少“坏”框

```
<customMetadata>
    <key path="LM/W3SVC/INFO">
        <property id="4012" dataType="String" userType="1" attributes="Inherit" value="NCSA Common Log File Format,Microsoft IIS Log File Format,W3C Extended Log File Format,ODBC Logging" />
        <property id="2120" dataType="MultiSZ" userType="1" attributes="None" value="400,0,,,0&#xA;" />
    </key>
</customMetadata> 
```

# 2 - 存在于“好”框中，缺少“坏”框

```
 <asp>
        <cache diskTemplateCacheDirectory="%SystemDrive%\inetpub\temp\ASP Compiled Templates" />
    </asp> 
```

# 3 - 此部分存在于“好”框上，但只有 2.0（前 2 行）存在于“坏”框上。

```
<isapiFilters>
    <filter name="ASP.Net_2.0.50727.0" path="%windir%\Microsoft.NET\Framework\v2.0.50727\aspnet_filter.dll" enableCache="true" preCondition="bitness32,runtimeVersionv2.0" />
    <filter name="ASP.Net_2.0.50727-64" path="%windir%\Microsoft.NET\Framework64\v2.0.50727\aspnet_filter.dll" enableCache="true" preCondition="bitness64,runtimeVersionv2.0" />
    <filter name="ASP.Net_2.0_for_V1.1" path="%windir%\Microsoft.NET\Framework\v2.0.50727\aspnet_filter.dll" enableCache="true" preCondition="runtimeVersionv1.1" />
    <filter name="ASP.Net_4.0_64bit" path="C:\Windows\Microsoft.NET\Framework64\v4.0.30319\aspnet_filter.dll" enableCache="true" preCondition="runtimeVersionv4.0,bitness64" />
    <filter name="ASP.Net_4.0_32bit" path="C:\Windows\Microsoft.NET\Framework\v4.0.30319\aspnet_filter.dll" enableCache="true" preCondition="runtimeVersionv4.0,bitness32" />
</isapiFilters> 
```

# 4 - 此部分存在于“坏”框上，但在“好”框上缺失

```
 <applicationDependencies>
        <application name="Active Server Pages" groupId="ASP" />
    </applicationDependencies> 
```

# 5 - “好”框上缺少 ssiExecDisable 属性

```
 <serverSideInclude ssiExecDisable="false" /> 
```

# 6 - “坏”框上缺少部分

```
 <authentication>
            <anonymousAuthentication enabled="false" />
            <windowsAuthentication enabled="true" />
        </authentication> 
```

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2013-02-13T17:41:45.670

显然，Microsoft 将这些文件的历史记录保存在：

```
C:\inetpub\history\ 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-10-16T15:30:45.570

**首先备份所有配置文件！**

显然，IIS 将配置文件的历史记录保存在 C:\inetpub\history 中。所以你需要做的是记住最后一个已知日期 IIS 工作正常，然后从 c:\inetpub\history 复制配置文件的内容并替换 c:\windows\system32\inetsrv\config 中的配置文件。

祝你好运！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-12T15:24:01.360

如果您只想修改当前活动的 applicationHost.config 看看这篇文章：

[在 64 位 Win2008 上编辑 Applicationhost.config](http://weblog.west-wind.com/posts/2008/Aug/09/Editing-Applicationhostconfig-on-64-bit-Win2008)

正如文章所说，由于某种原因 applicationHost.config 仅使用资源管理器可见（这解释了为什么我没有从我的自定义文件管理器中看到文件）并且您可以使用记事本毫无问题地对其进行编辑（再次，任何其他编辑器和您）会遇到问题）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-11T11:50:05.577

要安装旧配置的备份，可以使用以下命令：

```
c:\windows\system32\inetsrv\appcmd restore backup CFXHISTORY_xxxxxxxx 
```

`CFXHISTORY_xxxxxxxx`的子文件夹在哪里`C:\inetpub\history\`。

除了将文件从该文件夹复制到当前配置之外，不确定该命令的作用，但您可能应该使用它，以防它做一些特殊的事情。

或者您可以按照[https://stackoverflow.com/a/14859645/2279059中的说明从备份中复制文件](https://stackoverflow.com/a/14859645/2279059)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-01-18T21:11:19.473

inetpub 历史文件夹救了我的命。我只是恢复了根文件夹中的两个文件，wallah 问题就解决了。

# haskell - 使用尾递归查找给定元素的索引

> ID：14844296
> 
> 赞同：0
> 
> 时间：2013-02-13T00:11:55.150
> 
> 标签：haskell

我正在尝试编写一个函数来使用尾递归查找给定元素的索引。假设列表包含`1`通过的数字`10`，并且我正在搜索`5`，那么输出应该是`4`。我遇到的问题是使用尾递归“计数”。但是，我什至不确定在这种情况下是否需要手动“计算”递归调用的数量。我尝试使用`!!`which 没有帮助，因为它返回特定位置的元素。我需要该函数来返回特定元素的位置（正好相反）。

我一直试图弄清楚这个已经一个小时了。

**代码：**

```
 whatIndex a [] = error "cannot search empty list"
  whatIndex a (x:xs) = foo a as
    where
       foo m [] = error "empty list"
       foo m (y:ys) = if m==y then --get index of y
                         else foo m ys 
```

注意：我试图在不使用库函数的情况下实现这一点

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T00:20:15.570

您的辅助函数需要额外的计数参数。

```
whatIndex a as = foo as 0
  where
    foo [] _ = error "empty list"
    foo (y:ys) c
        | a == y    = c
        | otherwise = foo ys (c+1) 
```

顺便说一句，给这个函数一个`Maybe`返回类型而不是使用错误是更好的形式。这`elemIndex`也是有充分理由的。这看起来像

```
whatIndex a as = foo as 0
  where
    foo [] _ = Nothing
    foo (y:ys) c
        | a == y    = Just c
        | otherwise = foo ys (c+1) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-13T00:43:54.340

> 注意：我试图在不使用库函数的情况下实现这一点

一般来说，这不是一个好主意。一个更好的练习是这样的：

1.  弄清楚如何使用库函数来实现它。
2.  弄清楚如何自己实现您在步骤 1 中使用的任何库函数。

通过这种方式，您将学习三个关键技能：

*   什么是标准库函数，以及它们何时有用的示例。
*   如何将问题分解成更小的部分
*   如何编写库中的基本功能。

但是，在这种情况下，您的函数与[中](http://lambda.haskell.org/platform/doc/current/ghc-doc/libraries/haskell2010-1.1.0.1/Data-List.html#v:elemIndex)`whatIndex`的函数或多或少相同，因此您的问题归结为编写您自己的此库函数版本。[`elemIndex``Data.List`](http://lambda.haskell.org/platform/doc/current/ghc-doc/libraries/haskell2010-1.1.0.1/Data-List.html#v:elemIndex)

这里的诀窍是你想在递归列表时增加一个计数器。编写尾递归函数有一种标准技术，称为**累积参数**。它是这样工作的：

1.  你编写了一个*辅助*函数，与“前端”函数相比，它需要一个额外的参数（或更多）来跟踪额外的信息。
2.  然后，您将“真实”函数定义为对辅助函数的调用。

因此对于`elemIndex`，辅助函数将是这样的（`i`作为当前元素索引的累积参数）：

```
-- I'll leave the blanks for you to fill.
elemIndex' i x []      = ...
elemIndex' i x (x':xs) = ... 
```

那么“驱动程序”函数是这样的：

```
elemIndex x xs = elemIndex 0 x xs 
```

但是这里我必须提到一个严重的问题：**让这个函数在 Haskell 中表现良好是很棘手的**。尾递归在*严格*（非惰性）函数式语言中是一个有用的技巧，但在 Haskell 中则不然，因为：

1.  Haskell 中的尾递归函数仍然可以破坏堆栈，
2.  非尾递归函数可以在恒定空间中运行。

[我的这个较旧的答案](https://stackoverflow.com/questions/11144921/is-my-rewritten-foldl-function-optimised/11145179#11145179)显示了第二点的一个例子。

因此，在您的情况下，非尾递归解决方案可能是您可以提供的最简单的解决方案，它将在恒定空间中运行（即，不要在长列表中破坏堆栈）：

```
elemIndex x xs = elemIndex' x (zip xs [0..])

elemIndex' x pairs = snd (find (\(x', i) -> x == x') pairs)

-- | Combine two lists by pairing together their first elements, their second 
-- elements, etc., until one of the lists runs out.
--
-- EXERCISE: write this function on your own!
zip :: [a] -> [b] -> [(a, b)]
zip xs ys = ...

-- | Return the first element x of xs such that pred x == True.  Returns Nothing if
-- there isn't one, Just x if there is one.
--
-- EXERCISE: write this function on your own!
find :: (a -> Bool) -> [a] -> Maybe a
find pred xs = ... 
```

# objective-c - Xcode：我应该如何组织我的多窗口用户界面项目？

> ID：14844297
> 
> 赞同：0
> 
> 时间：2013-02-13T00:11:57.050
> 
> 标签：objective-c, xcode, cocoa, window, nswindowcontroller

注意：使用 Objective-C、Cocoa 和 Xcode。

起初，我在 AppDelegate 中完成了所有的编程，并在同一个“.xib”（nib 文件）中拥有所有用户界面元素，例如窗口。起初这很好用，但随着我的应用程序变得更高级，具有更多“功能”，一切都变得非常混乱，文件太长，我不喜欢。

我现在正在努力进步。我想知道我应该如何（正确有效地）进行多窗口项目？我的计划是为每个窗口创建一个 .xib 文件，并且只在 AppDelegate 中放置必要的东西。然后，我将拥有一个用于所有必要计算的核心文件，以便在我的应用程序中使用，以及一个主控制器文件来控制来自我应用程序中所有窗口的出口和操作。但是，我对 Objective-C 还是很陌生，并且在尝试设置窗口控制器和其他东西时遇到了很多问题。

我是否走在正确的道路上？我做错了吗？我应该如何在 Xcode 中管理多窗口用户界面应用程序？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T01:23:42.163

对于多个窗口，我认为最好为每个窗口使用一个 NSWindowController，并与窗口相关联的 xib 文件。我不确定“用于控制所有窗口的出口和操作的主控制器文件”是什么意思——每个窗口控制器都有自己窗口的出口。您不能跨多个 xib 文件连接插座。您可以在创建项目时默认获得的 MainMenu.xib 文件中拥有一个窗口，并使用它来启动其他窗口，但是如果不知道所有窗口之间的关系，就很难提供更具体的建议.

**编辑后：**

如果你想打开另一个窗口，菜单项的操作方法是这样的：

```
 self.controller = [[WindowController alloc] initWithWindowNibName:@"WindowController"];
    [self.controller showWindow:nil]; 
```

在这里，我有一个名为 controller 的属性来保持对新窗口控制器的强引用。如果您不这样做，控制器将被释放，因此如果您有多个要同时显示的窗口，您将需要属性来保留它们。

# ruby - 相同方法的 Mocha 需要返回 2 个不同的值

> ID：14844300
> 
> 赞同：0
> 
> 时间：2013-02-13T00:12:19.280
> 
> 标签：ruby, ruby-on-rails-3, rspec, ruby-mocha

使用 Mocha，我正在使用需要返回 2 个单独值的相同方法。无论我做什么，它只返回 2 个值中的 1 个，因此我的 rspec 测试中的 1 个总是失败。如何让存根在正确的时间返回正确的值？

编码：

```
describe "#method" do
  it "has something" do
    hash = { "allow_sharing" => "1"}
    CustomClass.stubs(:app_settings).returns(hash)
    get 'method', :format => :json
    JSON.parse(response.body).count.should eq(1)
  end
  it "does not have something" do
    hash = { "allow_sharing" => "0"}
    CustomClass.stubs(:app_settings).returns(hash)
    get 'method', :format => :json
    JSON.parse(response.body).count.should eq(0)
  end
end 
```

我也用块这样尝试过`before`。仍然没有运气。

```
describe "#method" do
  before do
    hash = { "allow_sharing" => "1"}
    CustomClass.stubs(:app_settings).returns(hash)
  end
  it "has something" do
    get 'method', :format => :json
    JSON.parse(response.body).count.should eq(1)
  end
# ... etc. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T01:17:12.887

如果可用，请尝试使用 as_null_object。例如，对于所有带有存根的行：

```
CustomClass.stubs(:app_settings).returns(hash).as_null_object 
```

# google-chrome - 如何限制谷歌浏览器在将大文件上传到兆时消耗所有可用内存？

> ID：14844304
> 
> 赞同：0
> 
> 时间：2013-02-13T00:12:47.427
> 
> 标签：google-chrome, memory-leaks

当上传相对较大的文件或一些大文件时，谷歌浏览器会消耗我电脑上的所有可用内存。在 Firefox 中没有这样的问题。如何限制谷歌浏览器在将大文件上传到兆时消耗所有可用内存？这种奇怪行为的原因是什么？它是否被认为是内存泄漏？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-02-12T04:56:39.647

默认情况下，Chrome 是一个多进程浏览器。这是为了让网络应用程序在 Chrome 中运行得更快而设计的。此功能使浏览器更流畅，更稳定，即使有多个打开的选项卡。禁用多个进程可以释放一些 CPU 资源。处理每个 Web 进程 Chrome 有三个设置

1.  每标签进程
2.  每个站点的进程
3.  单进程

为 Chrome 创建快捷方式。打开属性选项卡。通过将 –single-process 附加到路径来编辑目标字段，如图所示。

![在此处输入图像描述](../Images/36d9ad8399bac72a43a83830d2aa911a.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-28T17:55:58.010

在 linux 发行版上，chrome 进程可用的内存可以通过使用 ulimit 来限制，在下面的示例中为 1024MB。

尝试使用以下脚本（例如 chrome-limited.sh）：

```
#!/bin/sh
ulimit -Sv 10240000 #amount of memory available in bytes 
/usr/bin/google-chrome-stable 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-15T22:58:29.440

谷歌知道这个错误。请参阅[http://code.google.com/p/chromium/issues/detail?id=175233](http://code.google.com/p/chromium/issues/detail?id=175233)

# javascript - 比较使用 for 循环创建的数组中的卡片

> ID：14844307
> 
> 赞同：0
> 
> 时间：2013-02-13T00:13:20.320
> 
> 标签：javascript, arrays, compare

首先，我对 Javascript 和一般编程非常陌生。因此，如果这是一个愚蠢的问题，请不要生气。我正在创建一个德州扑克的浏览器游戏，首先我开始在 for 循环中创建一组卡片，然后用 Math.random 洗牌，结果类似于 [C5,H4,S3,..]等等。我的问题是如何最好地比较这些卡。我最害怕的是同花顺和同花顺。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T02:56:54.653

@DamirDžilić - 没有任何实际代码可评论，我们只能提供概念性建议。您将不得不将每手牌与所有可能的牌手进行比较，从评分最高的牌开始到一对。

我个人建议每张卡片都是一个对象：

```
var card = {suit: "S", value: 9}; 
```

那么，一手牌将是一组卡片对象。

然后，您可以分别查看花色和卡片价值。如果卡值从 2 到 14 并且您转换为 J、Q、K、A 仅用于显示，那会更容易。

然后，每个可能的扑克手牌（对子、三对、四对、同花、顺子等）将按其在扑克中的价值顺序（对 = 1、两对 = 2、三一类 = 3，顺子 = 4，同花 = 5，满屋 = 6，同花顺 = 7，四类 = 8，同花顺 = 9）。

然后，我建议你给每一种手牌打一个分数，它由 10000*手牌价值 + 100*手牌 + 起手牌价值组成。因此，一对带有 K 踢脚的 8 将值得：

```
(2*10000) + (8*100) + 13 = 20,813 
```

并且，三个带有 A 踢脚的 2 将是：

```
(3*10000) + (2*100) + 14 = 30,214 
```

在这种计分系统中，手牌价值总是占主导地位，然后是手牌得分部分的顶牌（例如 3 个皇后击败 3 个 8），然后踢球者打破任何平局。

由您编写代码来确定您拥有什么样的牌，但基本上您必须检查顺子、同花以及您拥有多少张普通牌。我可能会首先寻找对子，并且只有在没有对子的情况下，您才会寻找顺子或同花，并且我会创建一个函数来寻找每个。

# sql - 使用复杂的双连接来获取子对象的计数

> ID：14844308
> 
> 赞同：1
> 
> 时间：2013-02-13T00:13:22.293
> 
> 标签：sql, postgresql, join

请注意，我正在使用 postgresql

我有一张`organizations`桌子，一张`users`桌子，一张`jobs`桌子，一张`documents`桌子。我想获取按他们有权访问的文件总数*排序的组织列表。*

```
organizations
------------
id (pk)
company_name

users
------------
id (pk)
organization_id

jobs
------------
id (pk)
client_id    (id of an organization)
server_id    (id of an organization)
creator_id   (id of a user)

documents
------------
id (pk)
job_id 
```

**期望的结果**

```
organizations.id  |  organizations.company_name  |  document_count
85                |  Big Corporation             |  84
905               |  Some other folks            |  65
403               |  ACME, Inc                   |  14 
```

如您所见，组织可以通过 3 种不同的路径连接到文档：

1.  `organizations.id`=> `jobs.client_id`=>`documents.job_id`
2.  `organizations.id`=> `jobs.server_id`=>`documents.job_id`
3.  `organizations.id`=> `users.organization_id`=> `jobs.creator_id`=>`documents.job_id`

但我想要一个查询来计算每家公司有权访问的*所有文件的数量......*

我尝试了几件事......像这样：

```
SELECT COUNT(documents.id) document_count, organizations.id, organizations.company_name
FROM organizations
INNER JOIN users ON organizations.id = users.organization_id
INNER JOIN jobs ON (
  jobs.client_id = organizations.id OR
  jobs.server_id = organizations.id OR
  jobs.creator_id = users.id
)
INNER JOIN documents ON documents.job_id = jobs.id
GROUP BY organizations.id, organizations.company_name
ORDER BY document_count DESC
LIMIT 10 
```

The query takes awhile to run, but it's not horrible since i'm doing it for a one-time report, but the results... cannot possibly be correct.

The first listed organization has a reported count of 129,834 documents -- but that's impossible since there's only 32,820 records in the `documents` table. I feel like it must be counting drastic quantities of duplicates (due to an error in one of my joins?) but I'm not sure where I've gone wrong.

The order appears correct since the highest volume user of the system is clearly at the top of the list... but the value is inflated somehow.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T00:35:45.930

The problem is that if `jobs.client_id = organizations.id` or `jobs.server_id = organizations.id`, then there's nothing to filter your `INNER JOIN users` (aside from its `ON` clause), so you'll get a separate record for every single user that belongs to that organization. In other words, for each organization, you're adding three values:

*   its total number of users *times* the total number of documents belonging to jobs for which it's a client
*   its total number of users *times* the total number of documents belonging to jobs for which it's a server
*   the total number of documents belonging to jobs for which one if its users is the creator

One way to fix this is to remove the `INNER JOIN users` line, and change this:

```
 jobs.creator_id = users.id 
```

to this:

```
 jobs.creator_id IN (SELECT id FROM users WHERE organization_id = organizations.id) 
```

. . . but that might perform terribly. You might need to try a few things before finding a query that performs acceptably.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T00:42:00.110

Simplify your thinking. You have 3 paths to docid so write 3 queries, union them and count that

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T00:43:55.837

It's probably too late to redesign this, but you really should.

The jobs table should not have its own id field a d key.

The jobs table is horribly designed because every reference to a disk page from the id index is gonna have to go read 1-100 different pages from disk out of the data file just to get the three other id fields that you *always* want to use (which is the clue that a job should not have its own id).

You can make a quick fix by making jobs use an index that is clustered or clustering ( depending on the db system) on the job id field. And alternative will be to mark the other three id fields as "includes" on the index so the page reads to the data file will 100% go away. Either of these may be enough to make this "just work".

What I would encourage you to do though is drop the id field and key on jobs and instead make a "natural key" that has the three other id fields in it and use that key on the documents table as well.

I would also demoralize (repeat) the organization of the creator on the jobs table and the document table. A user isn't going to move to another org and keep the same acces, so you should never have to run a sweep to update these in sync and even if you did it would be easy.

With these changes you can just do a select on the documents table directly, skipping the random pages reads needed from the other tables. The group by to group across the three different id fields would be a bit tricky. I might give this a try as it is interesting.

In the short term though, try clustering or includes on the jobs table to solve the performance issue and I will check the join logic tonight.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T10:23:03.263

*But I want a query that will get the count of all the documents you have access to...*

That's where your query starts:

```
SELECT ... FROM documents
... 
```

Since the only clue to the documents table is in jobs, you'll need the jobs table as well::

```
SELECT ... 
FROM documents dc
JOIN jobs jo ON jo.document_id = dc.id
... 
```

Now, it is time for restrictions. *Which* documents do you actually want ? There are three cases you want: either the client_id matches *the* organisation, or the server_id maches *the* company, or the creator_id matches a user that happens to work for *the* company:

```
SELECT ... 
FROM documents dc
JOIN jobs jo ON jo.document_id = dc.id
WHERE jo.client_id = $THE_COMPANY
   OR jo.server_id = $THE_COMPANY
   OR EXISTS (
      SELECT *
      FROM users uu
      JOIN organizations oo ON uu.organization_id = ex.id
      WHERE uu.id = jo.creator_id
        AND oo.id = $THE_COMAPNY
      )
     ; 
```

But, there might be a problem here. If two or more different jobs-records would point to the same document, you would count these double. You can either add a `DISTINCT` to the outer query, or move the jobs-table down into a subquery:

```
SELECT ... 
FROM documents dc
WHERE EXISTS (
  SELECT *
  FROM jobs jo
  WHERE jo.document_id = dc.id
  AND ( jo.client_id = $THE_COMPANY
      OR jo.server_id = $THE_COMPANY
      OR EXISTS (
        SELECT *
        FROM users uu
        JOIN organizations oo ON uu.organization_id = ex.id
        WHERE uu.id = jo.creator_id
        AND oo.id = $THE_COMAPNY
        )
      )
    )
  ; 
```

As you can see, the thee ways of selecting a document end up in a `WHERE (a OR b OR c)` clause.

UPDATE: (since the OP does not give us the table definions in a useble form I had to reconstruct these)

```
DROP SCHEMA tmp CASCADE;
CREATE SCHEMA tmp ;
SET search_path=tmp;
        --
        -- create the missing tables
        --
CREATE TABLE organizations
        ( id SERIAL NOT NULL PRIMARY KEY
        , company_name varchar
        );

CREATE TABLE users
        ( id SERIAL NOT NULL PRIMARY KEY
        , organization_id INTEGER NOT NULL REFERENCES organizations(id)
        );

CREATE TABLE jobs
        ( id SERIAL NOT NULL PRIMARY KEY
        , client_id    INTEGER NOT NULL REFERENCES organizations(id)
        , server_id    INTEGER NOT NULL REFERENCES organizations(id)
        , creator_id   INTEGER NOT NULL REFERENCES users(id)
        );

CREATE TABLE documents
        ( id SERIAL NOT NULL PRIMARY KEY
        , job_id INTEGER NOT NULL REFERENCES jobs(id)
        );
        --
        -- Populate
        --
INSERT INTO organizations(id, company_name) VALUES
 (85,'Big Corporation') ,(905,'Some other folks') ,(403,'ACME, Inc')
        ;
select setval('organizations_id_seq', 905);

INSERT INTO users(organization_id)
SELECT o.id
FROM generate_series(1,1000)
JOIN organizations o ON random() < 0.3
        ;
INSERT INTO jobs (client_id,server_id,creator_id)
SELECT o1.id, o2.id, u.id
FROM users u
JOIN organizations o1 ON 1=1
JOIN organizations o2 ON o2.id <> o1.id
        ;
INSERT INTO documents(job_id)
SELECT id FROM jobs j
        ;
DELETE FROM documents
WHERE random() < 0.5
        ;

        --
        -- And the query ...
        --
EXPLAIN ANALYZE
SELECT o.id AS org
        , count(*) AS the_docs
FROM organizations o
JOIN documents d  ON 1=1 -- start with a carthesian product
WHERE EXISTS (
        SELECT *
        FROM jobs j
        WHERE d.job_id = j.id
        AND (j.client_id = o.id OR j.server_id = o.id )
        )
OR EXISTS (
        SELECT *
        FROM jobs j
        JOIN users u ON j.creator_id = u.id
        WHERE u.organization_id = o.id
        AND d.job_id = j.id
        )
GROUP BY o.id
        ; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-13T22:05:08.907

None of the answers quite got me there except for the one suggesting a `UNION`. This is what I came up with:

```
SELECT COUNT(docs.doc_id) document_count, docs.org_id, docs.org_name
FROM (
  SELECT documents.id doc_id, organizations.id org_id, organizations.company_name org_name
  FROM documents
  INNER JOIN jobs ON documents.job_id = jobs.id
  INNER JOIN organizations ON jobs.client_id = organizations.id
  UNION
  SELECT documents.id doc_id, organizations.id org_id, organizations.company_name org_name
  FROM documents
  INNER JOIN jobs ON documents.job_id = jobs.id
  INNER JOIN organizations ON jobs.server_id = organizations.id
  UNION
  SELECT documents.id doc_id, organizations.id org_id, organizations.company_name org_name
  FROM documents
  INNER JOIN jobs on documents.job_id = jobs.id
  INNER JOIN users ON jobs.creator_id = users.id
  INNER JOIN organizations ON users.organization_id = organizations.id
) docs
GROUP BY org_id, org_name
ORDER BY document_count DESC 
```

The performance was much better than any of the people suggesting subqueries and it appears to have given me a reasonable answer

# javascript - 在没有自动关闭标签的元素之前和之后插入内容

> ID：14844310
> 
> 赞同：3
> 
> 时间：2013-02-13T00:13:39.833
> 
> 标签：javascript, jquery, insert, tags

说我有以下内容：

```
<div id="content">content</div> 
```

我想在它之前插入一些东西**（注意未关闭的div）**：

```
$("#content").before("<div>pre-pre-content</div><div>pre-content "); 
```

还有一些在 ** 之后（注意我现在正在关闭 div）**：

```
$("#content").after(" post-content</div><div>post-post-content</div>"); 
```

我想要的输出是：

```
<div>pre-pre content</div>
<div>
    pre-content <div id="content">content</div> post-content
</div>
<div>post-post content</div> 
```

相反，我得到的是：

```
<div>pre-pre content</div>
<div>pre-content</div>
<div id="content">content</div>
<div>post-content</div>
<div>post-post content</div> 
```

因为 jQuery 会自动“纠正”未闭合的标签。

**[小提琴](http://jsfiddle.net/Lz373/1/)**

有没有办法使用 .wrap() 在元素之前和之后添加不同的内容而不自动关闭标签？

请注意，由于不相关的限制，我**无法**执行以下操作：

```
$("#content").html("<div>Content before " + $("#content).html() + " Content after</div>") 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T00:19:12.933

您不能插入部分或未闭合的标签。在 DOM 中插入元素必须只插入整个元素。

您的选择是：

1.  提取要包装在新元素中的元素，插入新的容器对象，然后将原始元素放入容器中。

2.  直接操作父级的 HTML（一般不推荐）。

3.  使用 jQuery`.wrap()`方法为您执行#1 中的选项。有关jQuery 的更多信息，请参见[此处](http://api.jquery.com/wrap/)`.wrap()`。

# php - 正则表达式确定一个字符是否以数字为前缀

> ID：14844315
> 
> 赞同：-5
> 
> 时间：2013-02-13T00:14:00.807
> 
> 标签：php, regex

我有文字链接

```
Yeast-Aid™ 200c - Hypoallergenic 
```

我想用“200 Caps”替换“200c”，因为这将在我想要的 20K 记录上完成，并且表达式能够用“Caps”替换任何以数字为前缀的“c”。

我使用 PHP。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T00:35:10.610

这是非常基本的正则表达式替换。试试这个程序：

```
<?php
$string = 'Yeasties 200c - Hyperhyperhyper';
echo preg_replace('/(\d)c/i', '$1 Caps', $string);
echo "\n";
?> 
```

`preg_replace`执行正则表达式替换。

如果您无法弄清楚该程序是如何工作的，或者想要参考，请尝试此处的 php 文档[preg_replace](http://php.net/manual/en/function.preg-replace.php)。

您确实应该首先在线查找文档。我以前从未使用过 php（实际上这是我使用它的第一个程序），但我并不觉得它具有挑战性。也许最重要的编码技能是能够快速学习东西。

# php - PHP：检查键值不为空

> ID：14844323
> 
> 赞同：2
> 
> 时间：2013-02-13T00:14:48.070
> 
> 标签：php, arrays, key-value

我写了一个小函数来检查表单的必填字段，不为空。该函数接受两个参数，第一个是一个包含来自 $_POST 超全局的所有值的数组。第二个是我填充的必填字段数组。

看一看：

```
public $errors = array();

public function validate_fields($fields_array, $required_fields) 
{
    foreach ($required_fields as $key => $value)
    {
        if (array_key_exists($key, $fields_array)) 
        {
            # If key exists in $fields_array
            # check that the key value inside $fields_array is set & isn't empty
            # if it's empty, populate with an error
            if(empty($fields_array[$key][$value]))
            {
                $this->errors[] = "{$key} is empty but in fields_array";
            }
        }
        else 
        {
            # Key does not exists in $fields_array
            # Did someone temper with my html ?
            $this->errors[] = "{$key} is not in fields_array";
        }
    }
    return (empty($this->errors)) ? true : false;
} 
```

我遇到的问题似乎与“if(empty($fields_array[$key][$value]))”语句有关。我的目标是根据 $required_fields 键检查 $fields_array 键值是否为空。我确定我使用的语句是关闭的。如果你看到任何你认为可以写得更好的东西，请告诉我，因为我是 php 新手。感谢帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T00:23:42.683

我认为你想要做的是：

```
if(empty($fields_array[$key])) {
    //this means value does not exist or is FALSE
} 
```

如果您还只想检查空字符串或空格，那么您需要的不仅仅是空的。例如

```
if(empty($fields_array[$key]) || !trim($fields_array[$key]))         {
    //this means key exists but value is null or empty string or whitespace only
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-06-10T12:51:15.040

请注意，上述答案仅适用于 >PHP 5.4 中的索引数组。如果你有一个关联数组，你必须使用 isset 而不是空的：

```
if(isset($fields_array[$key]) && trim($fields_array[$key]) != '') 
```

请参阅[http://nl3.php.net/manual/en/function.empty.php](http://nl3.php.net/manual/en/function.empty.php)，示例 #2

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-13T00:17:44.527

您不需要选择该值作为索引键。其中 $fields_array[$key] = $value;

```
if(empty($fields_array[$key]) && trim($fields_array[$key]) != '') 
```

# java - Android中的XML错误解析

> ID：14844327
> 
> 赞同：2
> 
> 时间：2013-02-13T00:15:14.007
> 
> 标签：java, android, xml-parsing

我有下一个 XML 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<partido>
    <datos_partido>
    </datos_partido>
    <estado_partido>
    </estado_partido>
    <marcador_parcial>
    </marcador_parcial>
    <listado_acciones>
    </listado_acciones>
</partido> 
```

我尝试在使用 DOM 的类的构造函数中解析该 xml 文件：

```
public XMLManager(String pathXML) {
    try{
        FileInputStream file = new FileInputStream(pathXML);
        DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
        DocumentBuilder builder = factory.newDocumentBuilder();
        Document dom = builder.parse(file);
        setRoot(dom);
    }catch(Exception ex){
        System.out.println("Error: " + ex.getMessage());
    }
} 
```

但是，我遇到了下一个错误：

```
 Error: element stack empty (position:END_TAG </partido>@1:10 in 
    java.io.InputStreamReader@51e78c80) 
```

我究竟做错了什么？

# modx - getResources 显示所有子目录

> ID：14844329
> 
> 赞同：0
> 
> 时间：2013-02-13T00:15:14.583
> 
> 标签：modx, modx-revolution, modx-resources

在 modx 中，我有一个资源可以深入两个文件夹。我试图只显示父目录中的资源（而不是其子目录中的资源）。我的 getResources 调用位于父资源中，内容如下：

```
[[!getResources? 
    &parents=`[[*id]]` 
    &showHidden=`1` 
    &includeContent=`1` 
    &includeTVs=`1` 
    &processTVs=`1` 
    &tvPrefix=`` 
    &limit=`0` 
    &tpl=`Attractions Section` 
    &sortby=`menuindex` 
    &depth=`1`
]] 
```

据我了解，depth 参数应该控制 gr 显示其资源的深度。我已将深度设置为 0 和 1，它仍在显示子目录中的所有资源。如何让它只显示当前目录的资源？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T02:34:54.997

我以前遇到过 getResources 的问题，而且事物的 ~order~ ~if~ 你的其他属性值之一不正确，它可能会忽略后续属性。所以要开始摆脱任何你不使用或实际上不需要的 [tvprefix, sortby 默认情况下我认为是 menuindex] 然后将深度移动到父母之下。

此外，我一直将 modx 块、片段、电视和模板名称视为变量，即“没有空格或奇怪的字符”我真的不知道这是否重要，但你的 tpl 名称看起来很可疑。

但是是的，你是对的 &depth=`0`应该只选择第一级资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-21T20:40:30.760

知道了。depth=`depth` 返回父[ModX Docs](http://rtfm.modx.com/extras/revo/getresources)下面的第一级资源。

# mysql - 函数内的mysql赋值

> ID：14844330
> 
> 赞同：0
> 
> 时间：2013-02-13T00:15:18.463
> 
> 标签：mysql, variables, variable-assignment, datediff

我有一个包含 DATETIME 列的历史记录表。不能在 DATEDIFF 函数中分配变量吗？以下声明：

```
SET @LASTDATETIME='2000-01-01 00:00:00';
SELECT DATETIME, @LASTDATETIME, TIMEDIFF(DATETIME, @LASTDATETIME:=DATETIME) AS CALC, @LASTDATETIME FROM HISTORY 
```

导致这个结果：

```
|DATETIME           |@LASTDATETIME       | CALC    | @LASTDATETIME
-------------------------------------------------------------------
2013-01-28 12:11:41 |2000-01-01 00:00:00 |00:00:00 |[BLOB - 19 B]
2013-01-28 12:11:44 |2013-01-28 12:11:41 |00:00:00 |[BLOB - 19 B] 
```

我不明白为什么看起来分配有点像 DATETIME 被结转到下一条记录，但是 CALC 字段失败了，并且在分配之后 @LASTDATETIME 的值是一个 BLOB？为什么这不像我预期的那样工作？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T02:52:53.173

尝试这个：

```
SELECT @last AS `last`,
       TIMEDIFF(`datetime`, @last) AS `difference`,
       @last := `datetime` AS `current`
FROM history, (SELECT @last :='2000-01-01 00:00:00') n 
```

这是[sqlfiddle](http://sqlfiddle.com/#!2/46ad3/1)

# ruby-on-rails - 迁移更改显示在架构文件中，但不在数据库中

> ID：14844331
> 
> 赞同：0
> 
> 时间：2013-02-13T00:15:25.870
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

对于 Rails 3.2，我编写了这个迁移来重命名迁移中看到的列名

```
class RenameKpiColumn < ActiveRecord::Migration
 def change
   rename_column(:key_performance_intervals, :kpi_id, :key_performance_interval_id)
 end
end 
```

然后我说`bundle exec rails db:migrate`

如果我去 Schema.rb 我看到这个表，所以看起来它从迁移中选择了新的列名：

```
 create_table "key_performance_intervals", :force => true do |t|
    t.integer  "key_performance_interval_id"
    t.integer  "interval"
    t.integer  "interval_unit"
    t.decimal  "count"
    t.datetime "created_at",                  :null => false
    t.datetime "updated_at",                  :null => false
  end 
```

但是，如果我打开 pgAdmin 工具并查看其中的表和列名，它仍然使用 kip_id 的旧列名。

有没有我遗漏的步骤？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T00:53:56.420

由于迁移数据库没有输出，因此迁移似乎运行良好。只需重新启动 pAdmin，更改就会反映在那里。

要同时准备测试数据库，请运行

```
$ rake db:test:prepare 
```

# spring - 用于验证的 @NotRquired 注释的类似物

> ID：14844334
> 
> 赞同：0
> 
> 时间：2013-02-13T00:15:36.857
> 
> 标签：spring, hibernate-validator

我使用 Hibernate Validation 4.3.1.Final 和 Spring 3.2.0.RELEASE

我有一个带有字符串属性的表单。此属性不是必需的，但如果它包含某个值，则该值应为 10 位长度。所以我需要类似的东西：

```
@NotRquired
@Length(min = 10, max = 10) 
```

但是没有像@NotRquired 这样的注解。我应该如何为这种情况编写验证？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T11:02:55.320

并不是说*@NotRquired*注释在这种情况下没有帮助，因为所有定义的约束都被评估了。因此，在未指定值的情况下，*@Length*仍将被验证并失败。您可以做几件事：\

*   使用@Pattern 约束并定义一个与空字符串和长度为 10 个字符的模式有关的模式。当然，对于不需要的情况，您会得到一个空字符串
*   编写一个自定义约束，例如 @EmptyOrLength ，它可以满足您的需求
*   尝试使用验证组并将每个约束分配给不同的组。然后，您需要一种方法来定位正确的验证组
*   恢复到 Hibernate Validator 特定功能并使用约束的布尔组合 - [http://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#d0e3701](http://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#d0e3701)。你仍然需要一个自定义约束，但你可以使用*@NotNull*和*@Length*的组合使用*@ConstraintComposition(OR)*

# javascript - 与主干的奇怪问题绑定事件，“this”未更新

> ID：14844344
> 
> 赞同：0
> 
> 时间：2013-02-13T00:16:23.650
> 
> 标签：javascript, backbone.js, this, dom-events

我在处理主干和绑定事件时遇到了一个奇怪的问题。我会看看我是否可以清楚地解释它（这是一个裁剪的例子......）

在一个视图中，我在初始化方法中有以下代码

```
var MyView = Backbone.View.extend({

  initialize: function(options) {
    //[...]
    this.items = [];
    this.collection.on('reset', this.updateItems, this);
    this.fetched = false;
  },

  render: function() {
    if (!this.fetched) {
      this.collection.fetch();  // fetch the collection and fire updateItems
      return this;
    }
    this.$el = $('#my-element');
    this.$el.html(this.template(this.items));
  },

  updateItems: function() {
    this.fetched = true;
    this.loadItems();
    this.render();   // call render with the items array ready to be displayed
  }
} 
```

这个想法是我必须获取集合，处理项目 ( `this.loadItems`)，然后设置`this.$el`.

我面临的问题是，在里面`updateItems`，我看不到绑定后添加的任何属性（`this.collection.on`...）

似乎绑定是针对视图的冻结版本完成的。我尝试添加属性来测试它，但是在内部`updateItems`（如果被集合重置事件触发，则在内部渲染）我看不到添加的属性。

我在获取它之前解决了它绑定集合的问题，如下所示：

```
 render: function() {
    if (!this.fetched) {
      this.collection.on('reset', this.updateItems, this);
      this.collection.fetch();
      return this;
    } 
```

但这是一种奇怪的行为。似乎在绑定时，会生成“this”的副本，而不是引用。

我对吗？还是我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T08:06:13.833

您应该在集合视图的初始化阶段执行绑定：

```
// View of collection
initialize: function() {
    this.model.bind('reset', this.updateItems);
} 
```

现在，当集合上的 fetch 完成时，将调用**updateItems方法。**当然，在执行此操作之前，您需要绑定模型和视图：

```
var list = new ListModel();
var listView = new ListView({model: list}); 

list.fetch(); 
```

# ios6 - 自定义转场，从左到右动画变为对角线

> ID：14844353
> 
> 赞同：0
> 
> 时间：2013-02-13T00:17:29.017
> 
> 标签：ios6, uiviewanimation, uistoryboardsegue

我正在构建一个应用程序，其中第一个视图有一个菜单面板，我希望这个面板在应用程序的生命周期内一直存在。用户可以“去”的唯一地方是通过这个面板上的按钮（一个 UICollectionView）。万一这很重要，这个应用程序仅限横向，并且仅限 iOS 6。

为了完成这项工作，我创建了一个自定义 segue，它从视图中删除了除菜单面板之外的所有内容，然后将新视图控制器的视图添加为子视图，将新视图的框架设置为超级视图的边界，然后发送背面的新视图（因此它位于菜单面板的后面）。我从 prepareForSegue 调用 viewWill/DidDisappear，因为否则它们不会被调用。

这听起来可能很笨拙（对我来说确实如此），但它工作正常，除了一件事 - 新视图从底部出现。看起来很有趣。

然后我尝试添加我自己的动画块 - 我最初将视图定位在左侧，然后将其设置为动画。我将它发送到动画完成块的后面。这似乎完全合乎逻辑，并且帧值都是它们应该的值。但这个更糟糕 - 视图来自左下角。

任何人都可以提出一种方法来完成这项工作吗？这是我当前的执行方法：

```
- (void)perform {
    MainMenuViewController *sourceVC = (MainMenuViewController *)self.sourceViewController;
    UIViewController *destinationVC = (UIViewController *)self.destinationViewController;

    for (UIView *subview in [sourceVC.mainView subviews]) {
        // don't remove the menu panel or the tab
        if (![subview isKindOfClass:[UICollectionView class]] && [subview.gestureRecognizers count] == 0) {
            [subview removeFromSuperview];
        }
    }

    [sourceVC.mainView addSubview:destinationVC.view];

    CGRect finalFrame = sourceVC.mainView.bounds;
    CGRect frame = finalFrame;
    frame.origin.x = finalFrame.origin.x - finalFrame.size.width;
    destinationVC.view.frame = frame;

    [UIView animateWithDuration:0.5 animations:^{
        destinationVC.view.frame = finalFrame;
    } completion:^(BOOL finished) {
        // make sure it ends up behind the main menu panel
        [sourceVC.mainView sendSubviewToBack:destinationVC.view];
    }];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T17:08:21.253

结果是一个简单的错误——我需要在调用 addSubview 之前设置destinationVC 的框架。之后设置它会触发不需要的动画。

# perl - perl中的十六进制操作

> ID：14844358
> 
> 赞同：0
> 
> 时间：2013-02-13T00:17:46.163
> 
> 标签：perl

我有一个脚本，它以十六进制形式对 IPV4 和 IPV6 地址进行大量计算

例如“70.02.03.04”将是

$ipv4="\x46\x02\x03\x04"

这个二进制句柄在我的脚本中是硬编码的。但现在我想动态生成这个

我使用 "sprintf("x%02x", $value) 作为十六进制值，但我将如何生成上面的二进制句柄？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T00:25:47.467

您不需要十六进制（数字的字符串表示形式）。

```
my $hex = '46020304'; 
```

您希望该数字为四字节机器整数。

```
my $uint32 = "\x46\x02\x03\x04"; 
```

您可以使用

```
my $packed = pack('C4', split /\./, '70.02.03.04'); 
```

与

```
use Socket qw( inet_aton );
my $packed = inet_aton('70.02.03.04'); 
```

# java - 在 linux javac 上编译 Java - Jar 文件顺序失败

> ID：14844361
> 
> 赞同：0
> 
> 时间：2013-02-13T00:18:52.180
> 
> 标签：java, servlets, jar, javac

我正在尝试编译一个使用多个外部 jar 的 Java servlet。Javac 识别出第一个 jar，但随后吐出找不到以下 jar 的错误。当我交换订单时，它仍然识别第一个，但之后没有。我正在使用的命令行；

> javac -classpath ~/servlet/servlet-api-2.3.jar:~/servlet/gson-2.2.2.jar:~/servlet/mysql-connector-java-5.1.22-bin.jar ~/servlet/dataExchange。 java ~/servlet/dbUserConnect.java ~/servlet/dbTTConnect.java -d $TOMCAT_HOME

如您所见，我正在尝试使用 servlet jar、Googles GSON (JSON)、MySQL 和 Oracle Jars。

如果您需要任何其他信息，请询问。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T00:31:01.187

至少有一个错误：

```
Usage: javac <options> <source files> 
```

你的命令行是：

```
Usage: javac <options> <source files> <options> 
```

试试这个：

```
javac -classpath ~/servlet/servlet-api-2.3.jar:~/servlet/gson-2.2.2.jar:~/servlet/mysql-connector-java-5.1.22-bin.jar -d $TOMCAT_HOME ~/servlet/dataExchange.java ~/servlet/dbUserConnect.java ~/servlet/dbTTConnect.java 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T02:48:31.340

问题是在整个路径中使用 ~ 字符。只有选项开头的实例会被展开。

# javascript - 不安全的 JavaScript 尝试访问框架...协议必须匹配

> ID：14844363
> 
> 赞同：1
> 
> 时间：2013-02-13T00:19:06.617
> 
> 标签：javascript, facebook, iframe, https

这是我的情况：我有一个 Javascript 插件，当点击它时，它会在托管它的第三方网站上启动一个弹出窗口。然后弹出窗口显示一个 IFRAME，我在其中使用 Facebook 作为登录方法。

当弹出窗口启动时，它最近开始给出错误：

> [不安全的 JavaScript 尝试从 URL https://s-static.ak.facebook.com/connect/xd_arbiter.php?version=18](https://s-static.ak.facebook.com/connect/xd_arbiter.php?version=18#channel=)的框架访问具有 URL http://{THIRD-PARTY-SITE-GOES-HERE} 的框架 [#channel=](https://s-static.ak.facebook.com/connect/xd_arbiter.php?version=18#channel=) …%3Dtabmodule%26utm_term%3D200000%26fb_xd_fragment%23xd_sig%3Df2ade8e518%26。
> 
> 请求访问的帧具有“https”协议，被访问的帧具有“http”协议。协议必须匹配。

IFRAME 本身在 https 上，并且过去可以正常工作。我不确定 Chrome 为何尝试访问父页面。我无法控制父页面，因此无法将它们设为 https。

这是我在 IFRAME 中的 FB 初始化代码：

```
 window.fbAsyncInit = function() 
    {
        FB.init({
            appId: '{myappid}', 
            status: true, 
            cookie: true, 
            xfbml: true, 
            oauth: true,
            channelURL : 'https://degree3.com/channel.php'
        });

        FB.getLoginStatus( function(response) 
        {   
            if (resp = response.authResponse) 
            {
                $( '#fb_button' ).attr( "onclick", "signinViaFacebook( response.authResponse.userID, response.authResponse.accessToken );" ).show();
            } 
        });
    };
    (function() 
    {
        var e = document.createElement('script'); e.async = true;
        e.src = document.location.protocol + '//connect.facebook.net/en_US/all.js';
        document.getElementById('fb-root').appendChild(e);
    }()); 
```

有什么想法可以解决这个错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T06:05:06.260

你不能在 iframe 中使用 facebook 登录，它永远不会工作。甚至不要费心尝试我已经花了几个令人沮丧的时间来尝试做同样的事情。即使您解决了您现在遇到的 https 问题，您也将面临 X-Frame Options 错误，因为 facebook 在响应标头中设置了一个选项，该选项仅接受来自同一来源（即 facebook）的请求。

我基本上想说的是，出于安全原因，无法在 iframe 中启动 facebook。在当前困境中，最好的选择是打开另一个带有 facebook 登录的弹出窗口。iframe 根本行不通。我知道它看起来并不优雅，但这是唯一的方法，或者您将弹出窗口本身重定向到 facebook 并有一个回调机制来重定向回您的插件。

希望能帮助到你。

# xml - Microsoft CommerceServer Web 服务搜索条款

> ID：14844365
> 
> 赞同：0
> 
> 时间：2013-02-13T00:19:11.580
> 
> 标签：xml, web-services, soap, commerce

我正在使用微软商务服务器，最近学习了如何使用 xml Web 服务。我需要使用“updateitems”方法更新一些产品。

SOAP 信封如下所示：

```
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Body>
<UpdateItems xmlns="http://schemas.microsoft.com/CommerceServer/2006/06/CatalogWebService">
  <catalogName>string</catalogName>
  <searchClause>string</searchClause>
  <propertyName>string</propertyName>
  <replacementValue />
  <classTypes>None or CategoryClass or ProductVariantClass or ProductClass or ProductFamilyClass or ProductFamilyForVariantsClass or ProductVariantsForFamilyClass or AllClassTypesClass</classTypes>
  <language>string</language>
</UpdateItems>
</soap:Body>
</soap:Envelope> 
```

我使用 nuSoap 的请求如下所示：

```
$client = new nusoap_client($wsdl, TRUE);
$client->setCredentials('', '', 'ntlm');
$client->setUseCurl(true);
$client->useHTTPPersistentConnection();
$client->setCurlOption(CURLOPT_USERPWD, *);

$m = array(
'catalogName' => 'cat',
'propertyName => 'itemdesc',
'replacementValue' => 'somevalue'
);
$resp = ($client->call('UpdateItems', $m)); 
```

我不明白的是searchClause。我不知道任何表或列的名称是什么，并且由于我正在处理敏感数据以及很多数据，因此我不想通过反复试验进行测试。我想在搜索子句中执行类似“ProductID = 159999”的操作，但它没有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T07:33:13.553

几点指导：

1.  SearchClause 属性：searchclause 允许您基于 _ProductCatalog 数据库内的 _CatalogProducts 表中的属性构建 where 子句，其中指的是您的目录名称（在 Commerce Server 目录管理器中可见）并指的是您给的名称您的 CommerceServer 站点

2.  属性名称：您在此处使用的此属性名称将对应于您正在更新的实体的类类型。单击此处了解有关各种类类型的更多信息[http://msdn.microsoft.com/en-us/library/ee784608(v=cs.20).aspx](http://msdn.microsoft.com/en-us/library/ee784608(v=cs.20).aspx)。要了解哪些属性映射到哪些实体，您可以查看 Commerce Server Catalog 和 Inventory Schema Manager。在这里，您将找到所有属性定义、产品定义、类别定义和目录定义。

示例搜索子句，用于更新 productid 为 ABC123 和变体 id 的网球鞋的红色产品变体的标价（对于鞋子的红色变体颜色，是 ABC123-RED。我不熟悉 nuSoap，但基于你上面的例子，我认为你的代码看起来像。另外，你需要在下面的 searchClause 中正确转义单引号

```
$client = new nusoap_client($wsdl, TRUE);
$client->setCredentials('', '', 'ntlm');
$client->setUseCurl(true);
$client->useHTTPPersistentConnection();
$client->setCurlOption(CURLOPT_USERPWD, *);

$m = array(
'catalogName' => 'YourCatalogName',
'searchClause' => '(ProductId = ''ABC123'' AND VariantId = ''ABC123-RED'')',
'propertyName => 'Description',
'replacementValue' => 'Red is the new color for fall, check out these kicks!'
);
$resp = ($client->call('UpdateItems', $m)); 
```

显然，如果属性名称中有空格，则需要使用 [] 作为分隔符，如“[My Custom Column]”。

最好的办法是首先熟悉存储产品目录的 SQL 数据库表，然后使用 Commerce Server Catalog 和 Inventory Manager 以及 Commerce Server Catalog Manager 来检查您当前数据实例的当前数据配置。

您可能想考虑微软，然后是 Cactus，然后是 Ascentium，现在拥有该产品的 Smith 多年来一直表示这些基于 ASMX 的 Web 服务将消失，因此您可能只想编写自己的使用 API 的服务。我建议您更好地控制更新。如果您对 SQL 更熟悉，我建议您深入了解我上面提到的产品目录数据库，它的结构非常简单，并且非常容易编写 SSIS 或其他批量复制操作。

# java - 从 mysql 网站检索时未选择数据库

> ID：14844372
> 
> 赞同：4
> 
> 时间：2013-02-13T00:19:31.820
> 
> 标签：java, mysql

我有一个 mysql 数据库，我正试图从我们的网站主机（godaddy）检索。我遵循了一种似乎正确的格式，但它告诉我：

```
java.sql.SQLException: No database selected 
```

代码：

```
public static void main(String[] args) {

    Connection conn = null;
    Statement stmt = null;

    try {
        // STEP 2: Register JDBC driver
        Class.forName(JDBC_DRIVER);

        // STEP 3: Open a connection
        System.out.println("Connecting to database...");
        conn = DriverManager.getConnection(DB_URL, USER, PASS);

        // STEP 4: Execute a query
        System.out.println("Creating statement...");
        stmt = conn.createStatement();
        String sql;
        sql = "SELECT * FROM item_master";
        ResultSet rs = stmt.executeQuery(sql);  //<-- This is where the error is.

        // STEP 5: Extract data from result set
        while (rs.next()) {
            // Retrieve by column name
            int id = rs.getInt("id");

            // Display values
            System.out.print("ID: " + id);
        }
...
} 
```

我做了一个 conn 的打印语句，可能认为连接可能为空，并显示如下：

```
com.mysql.jdbc.JDBC4Connection@2a6***** 
```

任何人都有任何想法可能导致这样的事情？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-13T00:28:05.840

您的数据库 URL 应包含您的数据库名称。这通常是您的 URL，后跟“/DBNAME”。

`String URL = "jdbc:mysql://localhost:3306/mydb";`

其中“mydb”是您的数据库名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T00:25:25.180

DB_URL 的值是多少？据我所知，URL 需要采用以下形式：“WEBURL/DATABASENAME:PORT” 您是否只是尝试连接到 WEBURL，而不指定 DATABASE？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-11T08:16:40.413

我有同样的问题。

只需再运行一个查询（在您的“SELECT”语句之前）即可连接到您的数据库。

第一的：

```
sql = "USE <yourdatabase>";

ResultSet rs = stmt.executeQuery(sql); 
```

之后：

```
sql = "SELECT * FROM item_master";

rs = stmt.executeQuery(sql); 
```

# javascript - 在 Ember 中使计算属性绑定感知

> ID：14844374
> 
> 赞同：2
> 
> 时间：2013-02-13T00:19:48.937
> 
> 标签：javascript, ember.js, handlebars.js

如果我在模板中使用计算属性，我如何让模板知道状态已经以影响计算值的方式发生变化？

例如，如果我显示两个可以递增的数字及其总和，如下所示

```
App.ApplicationController = Ember.Controller.extend({
    x:0,
    y:0,
    sum: function(){return this.get("x") + this.get("y");}.property("content.sum"),
    incX: function(){ this.set("x", this.x+1);},
    incY: function(){ this.set("y", this.y+1);},
}); 
```

```
<script type="text/x-handlebars">
  <button {{action "incX"}}> {{x}} </button>
  <button {{action "incY"}}> {{y}} </button>
  <p> {{sum}} </p>
</script> 
```

x 和 y 值将在显示中更新，但总和不会更新。我如何告诉车把/余烬总和取决于 x 和 y？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T01:50:53.297

计算属性 ( `.property(_)`) 的参数不是您想要访问的参数，而是指定计算属性在这些值中的任何一个发生变化时应该观察和重新计算的值。

在你的情况下：

```
sum: function() {
    return this.get("x") + this.get("y");
}
.property("x", "y") 
```

# python - 使用不同数量的内核进行多处理时，将酸洗结果保存到磁盘会导致不同大小的对象

> ID：14844385
> 
> 赞同：1
> 
> 时间：2013-02-13T00:20:50.827
> 
> 标签：python, multiprocessing, pickle, filesize

我环顾四周，但无法找到这个问题的答案。我相当确定我的代码很好，但我注意到当我运行它并将腌制结果（字典）保存到磁盘时，它的大小根据我使用的内核数量而有所不同。

```
Using 4 cores results in a file 48,418 KB
Using 8 cores (hyperthreading) results in a file 59,880 KB 
```

结果应该（并且似乎）是相同的，所以我只是好奇是什么导致了尺寸差异。

我对两个腌制对象进行了快速总结，它们都报告了每个字典中相同数量的项目：

```
4 cores has 683 keys and 6,015,648 values
8 cores has 683 keys and 6,015,648 values 
```

我想我可以检查每个键的值是否完全相同，但我认为这可能需要相当长的时间才能运行。

可能导致这种情况的唯一代码必须是将数据拆分为要处理的块的位置，这些代码是：

```
def split_list_multi(listOfLetterCombos,threads=8):
    """Split a list into N parts for use with multiprocessing module. Takes a list(or set)
    which should be the various letter combinations created using make_letter_combinations().
    Divides the list into N (where n is the number of threads) equal parts and returns a dict
    where the key is the thread number and the value is a slice of the list.
    With 4 threads and a list of 2000 items, the results dict would be {'1': [0:500],
    '2': [500:1000], '3': [1000:1500], '4': [1500,2000]} and the number of threads."""
    fullLength = len(listOfLetterCombos)
    single = math.floor(fullLength/threads)
    results = {}
    counter = 0
    while counter < threads:
        if counter == (threads-1):
            results[str(counter)] = listOfLetterCombos[single*counter::]
        else:
            results[str(counter)] = listOfLetterCombos[single*counter:single*(counter+1)]
        counter += 1
    return results,threads

def main(numOfLetters,numThreads):
    wordList = pickle.load( open( r'd:\download\allwords.pickle', 'rb'))
    combos = make_letter_combinations(numOfLetters)
    split = split_list_multi(combos,numThreads)
    doneQueue = multiprocessing.Queue()
    jobs = []
    startTime = time.time()
    for num in range(split[1]):
        listLetters = split[0][str(num)] 
        thread = multiprocessing.Process(target=worker, args=(listLetters,wordList,doneQueue))
        jobs.append(thread)
        thread.start()

    resultdict = {}
    for i in range(split[1]):
        resultdict.update(doneQueue.get())

    for j in jobs:
        j.join()

    pickle.dump( resultdict, open( 'd:\\download\\results{}letters.pickle'.format(numOfLetters), "wb" ) )
    endTime = time.time()
    totalTime = (endTime-startTime)/60
    print("Took {} minutes".format(totalTime))
    return resultdict 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T22:49:27.700

来自： cPickle - 酸洗同一对象的 [不同结果 cPickle - 酸洗同一对象的不同结果](https://stackoverflow.com/questions/7501577/cpickle-different-results-pickling-the-same-object)

“无法保证看似相同的物体会产生相同的泡菜串。

pickle 协议是一个虚拟机，pickle 字符串是该虚拟机的程序。对于给定的对象，存在多个pickle字符串（=程序），它们将准确地重建该对象。”

谈论泡菜的小菜！

# ios - 如何在不发布到应用商店的情况下将开发中的 iOS 应用分发给客户进行过程中评估

> ID：14844387
> 
> 赞同：-2
> 
> 时间：2013-02-13T00:21:04.903
> 
> 标签：ios, ad-hoc-distribution

我们正在开发一个专门针对单个客户要求的应用程序，并希望在我们进行过程中将其交到他们的评估团队（3 人）手中。在我们发布产品之前，我们将使用企业发行版，但我们需要弄清楚这个中间步骤。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T00:24:07.843

以 99 美元的价格获得一个 iOS 开发者帐户，并将这三个人的设备注册到您的帐户中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T00:27:56.823

我使用了一家名为 testflight 的公司，他们位于[testflightapp.com](http://www.testflightapp.com)，当您拥有 ios 开发人员帐户时，它们可以很容易地将应用程序分发给测试人员。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T13:26:08.870

在我的公司，我们让客户注册了 99 美元的开发人员计划并管理他们自己的设备，然后让他们将我们的开发人员添加为开发人员（惊喜），并为他们的设备进行特殊构建。*

我们最近还让一个（较大的）客户注册了一个企业帐户，这样他们就可以将我们的构建分发给他们的员工进行测试，而无需管理 UDID。

将球带出球场，但它似乎确实符合 Apple 标准。

[*：我们经常通过客户的开发者帐户将这些自定义版本发布到应用商店，这 (IIRC) 也符合 Apple 标准。如果应用程序是由给定公司/专有的品牌，这是有道理的。]

# java - eBay Trading API getOrders：检查订单是否标记为已发货

> ID：14844391
> 
> 赞同：1
> 
> 时间：2013-02-13T00:21:29.543
> 
> 标签：java, ebay-api, ebay-sdk

我想从我的 ebay 卖家账户中获取所有订单。使用`GetOrders`通话效果很好。

我所有的订单都被标记为`ACTIVE`或`COMPLETE`取决于订单的状态。但是当我将它们标记为已发货（通过 API 或在网站上）时，订单会保留`ACTIVE`或`COMPLETE`在重新抓取后保留。我预计订单状态'是`SHIPPED`。

*   我使用 eBay Java SDK 版本 797
*   每个 API 调用都返回“成功”

如何确定订单是否标记为已发货？

这取决于国家吗？

*   我正在使用德国 eBay 沙箱（Webgui 是德语/英语混合；））
*   我正在使用 .com API-URL

这是我的代码：

```
GetOrdersCall call = new GetOrdersCall(context);
DetailLevelCodeType[] detailLevels = new DetailLevelCodeType[]{
    DetailLevelCodeType.RETURN_ALL
};
call.setDetailLevel(detailLevels);
call.setOrderRole(TradingRoleCodeType.SELLER);
call.setNumberOfDays(30);
OrderType[] orders;
try {
   orders = call.getOrders();
   for(OrderType order : orders)
      System.out.println(order.getOrderStatus().name());
} catch (Exception e) {} 
```

`System.out`从不打印`SHIPPED`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T15:54:09.863

您可以检查该字段

```
<ShippedTime>2013-02-22T13:22:04.000Z</ShippedTime> 
```

或者您可以使用事务数组中的信息：

```
<TransactionArray>
  <Transaction>
   <Buyer>
    <Email>test.test.test</Email>
   </Buyer>
   <ShippingDetails>
    <SellingManagerSalesRecordNumber>1234</SellingManagerSalesRecordNumber>
    <ShipmentTrackingDetails>
     <ShippingCarrierUsed>DHL</ShippingCarrierUsed>
     <ShipmentTrackingNumber>123456798</ShipmentTrackingNumber>
    </ShipmentTrackingDetails>
   </ShippingDetails>
   ... 
```

# c# - 当版本号更改时，如何升级 user.config 中的所有设置？

> ID：14844392
> 
> 赞同：3
> 
> 时间：2013-02-13T00:21:36.653
> 
> 标签：c#, winforms, application-settings, applicationsettingsbase

我有许多用户范围的设置由继承自 ApplicationSettingsBase 的对象存储在 user.config 中。

每个实例的*SettingsKey*在运行时主要使用表单名称动态派生。因此可能有数百个。

我已经阅读了许多问题和答案（比如这个 - [How do you keep user.config settings across different assembly versions in .net?](https://stackoverflow.com/questions/534261/how-do-you-keep-user-config-settings-across-different-assembly-versions-in-net) ），它们都建议在一些版本号检查中包装一个**ApplicationSettingsBase.Upgrade()调用。**

问题是（据我所知）您需要知道用于实例化所有 ApplicationSettingsBase 对象以依次调用升级方法的每个 *SettingsKey( 值。

**有没有办法一次升级所有 user.config 设置，或者迭代文件中的所有设置来升级它们？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T02:26:09.627

我想出的方法有点像我觉得的黑客，但是太多的方法都失败了，我需要继续做下去:-(

在运行新版本的情况下，我不得不复制以前版本的 user.config。

首先，确定是否需要升级，就像这个问题推荐的许多变体一样。

```
System.Reflection.Assembly assembly = System.Reflection.Assembly.GetExecutingAssembly();
Version version = assembly.GetName().Version;

if (version.ToString() != Properties.Settings.Default.ApplicationVersion)
{
    copyLastUserConfig(version);
} 
```

然后，复制最后一个 user.config....

```
private static void copyLastUserConfig(Version currentVersion)
{
try
{
    string userConfigFileName = "user.config";

    // Expected location of the current user config
    DirectoryInfo currentVersionConfigFileDir = new FileInfo(ConfigurationManager.OpenExeConfiguration(ConfigurationUserLevel.PerUserRoamingAndLocal).FilePath).Directory;
    if (currentVersionConfigFileDir == null)
    {
        return;
    }

    // Location of the previous user config

    // grab the most recent folder from the list of user's settings folders, prior to the current version
    var previousSettingsDir = (from dir in currentVersionConfigFileDir.Parent.GetDirectories()
                               let dirVer = new { Dir = dir, Ver = new Version(dir.Name) }
                               where dirVer.Ver < currentVersion
                               orderby dirVer.Ver descending
                               select dir).FirstOrDefault();

    if (previousSettingsDir == null)
    {
        // none found, nothing to do - first time app has run, let it build a new one
        return;
    }

    string previousVersionConfigFile = string.Concat(previousSettingsDir.FullName, @"\", userConfigFileName);
    string currentVersionConfigFile = string.Concat(currentVersionConfigFileDir.FullName, @"\", userConfigFileName);

    if (!currentVersionConfigFileDir.Exists)
    {
        Directory.CreateDirectory(currentVersionConfigFileDir.FullName);
    }

    File.Copy(previousVersionConfigFile, currentVersionConfigFile, true);

}
catch (Exception ex)
{
    HandleError("An error occurred while trying to upgrade your user specific settings for the new version. The program will continue to run, however user preferences such as screen sizes, locations etc will need to be reset.", ex);
}
} 
```

感谢[Allon Guralnek](https://stackoverflow.com/users/149265/allon-guralnek)对这个问题的回答（[How do you upgrade Settings.settings when the stored data type changes?](https://stackoverflow.com/questions/1599945/how-do-you-upgrade-settings-settings-when-the-stored-data-type-changes)）中间的 Linq 获得了 PreviousSettingsDir。

# java - 在使用套接字时，我的响应似乎挂在响应类中

> ID：14844397
> 
> 赞同：0
> 
> 时间：2013-02-13T00:22:31.860
> 
> 标签：java, sockets

我目前正在实现一个网络代理，但我遇到了一个问题。我可以从浏览器解析我的请求并发出一个新请求，但我似乎有响应问题。它一直挂在我的响应循环中

```
 serveroutput.write(request.getFullRequest());
            //  serveroutput.newLine();
                serveroutput.flush();
                //serveroutput.
                 //serveroutput.close();
            } catch (IOException e) {
                System.out.println("Writting tothe server was unsuccesful");
                e.printStackTrace();
            }
            System.out.println("Write was succesful...");
             System.out.println("flushed.");

             try {
                 System.out.println("Getting a response...");
                 response= new    HttpResponse(serversocket.getInputStream());
        } catch (IOException e) {
                System.out.println("tried to read response from server but failed");
                e.printStackTrace();
            }

              System.out.println("Response was succesfull");

      //response code

        public HttpResponse(InputStream input) {
    busy=true;

      reader = new BufferedReader(new InputStreamReader(input));
      try {
          while (!reader.ready());//wait for initialization.

          String line;
          while ((line = reader.readLine()) != null) {
              fullResponse += "\r\n" + line;

          }

          reader.close();
          fullResponse = "\r\n" + fullResponse.trim() + "\r\n\r\n";
      } catch (IOException`` e) {

          e.printStackTrace();
      } 
      busy = false;
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T00:32:38.977

您正在对套接字进行阻塞同步读取。Web 服务器在向您发送页面后不会关闭它们的连接（如果指定了 HTTP/1.1），因此它将坐在那里并阻塞，直到 Web 服务器超时连接。要正确执行此操作，您需要查找`Content-Length`标题并在到达正文时读取适当数量的数据。

您真的不应该尝试重新发明轮子，而是使用提供的核心 Java`HttpURLConnection`或 Appache`HttpClient`来提出您的请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T02:36:02.220

你在这里犯了很多错误。

*   使用自旋循环调用`ready()`而不是仅仅在后续读取中阻塞。
*   `Reader`当您不知道数据是文本时使用。
*   甚至没有实现 HTTP 1.1 协议。

我建议您不要查看您的代码，而是查看[HTTP 1.1 RFC](http://www.w3.org/Protocols/rfc2616/rfc2616.html)。为 HTTP 1.1 实现一个简单的代理所需要做的就是：

1.  从客户端读取一行。这应该是一个 CONNECT 命令，命名您要连接的主机。使用 DataInputStream 而不是 BufferedReader 读取此内容，是的，我知道它已被弃用。

2.  连接到目标。如果成功，则将 HTTP 200 发送回客户端。如果没有，发送任何适当的 HTTP 状态并关闭客户端。

3.  如果在 (2) 处成功，则启动两个线程，一个将所有数据从客户端复制到目标，以字节为单位，另一个执行相反的操作。

4.  当您让 EOS 读取其中一只袜子时，请调用`shutdownOutput()`另一只。

5.  如果`shutdownOutput()`尚未在该线程的输入套接字上调用，则退出该线程。

6.  如果它已经被调用，关闭两个套接字并退出线程。

请注意，除了 CONNECT 命令，您*无需*解析任何内容；您不必担心内容长度；您只需要正确传输字节，然后正确传输 EOS。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T00:29:23.717

```
while (!reader.ready()); 
```

这一行进入一个无限循环，使 CPU 抖动，直到流可供读取。通常不是一个好主意。

# c# - 是否缓存了 LINQ-to-SQL 存储过程？

> ID：14844398
> 
> 赞同：2
> 
> 时间：2013-02-13T00:22:35.860
> 
> 标签：c#, linq-to-sql, stored-procedures, datacontext

我在用于报告的数据库上编写了几个存储过程。然后我使用 LINQ-to-SQL 将存储过程拉入 DBML 文件并创建实际的 C# 函数。数据提取通过 WCF 服务提供。

我现在面临的困境是，如果我从函数运行存储过程，然后上传新的游戏统计信息，然后再次运行存储过程（在使用之间处理 DataContext），我得到的结果集就好像新的游戏统计信息没有' t 已上传。但是，如果我直接对数据库运行存储过程，我会得到正确的结果集。

对我来说，这表明了一些我不确定如何处理的可能性：

1.  该服务以某种方式缓存存储过程结果，这似乎很奇怪，因为我正在处理 DataContext
2.  不知何故，存储过程忽略了 DataContext 其余部分的状态
3.  完全不同的东西

我在想 DataContext.Refresh() 会解决这个问题，但如果我能避免我想要的性能影响，任何帮助将不胜感激。

# python - 用逗号替换字母和数字之间的空格？

> ID：14844399
> 
> 赞同：3
> 
> 时间：2013-02-13T00:22:40.207
> 
> 标签：python, regex

我希望能够用逗号替换城市和数字之间的空格，但是我想出的行（及其变体）似乎消除了字符串。

```
>>> temp = re.sub(r"(\w+).*?(\d+)", ",", string) 
```

`string`就像：

```
Toronto 239495
Cape Town 34567 
```

我怎样才能做到这一点？

*我仍在使用正则表达式，所以任何代码的任何解释都会非常棒。*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-13T00:27:32.083

您正在替换正确的匹配项，但只能使用逗号！比赛的其他部分也被替换。您可以使用断言，或者只是将它们重新插入：

```
temp = re.sub(r"(\w+).*?(\d+)", r"\1,\2", string) 
```

但是，`\w+`只会匹配`Cape`in `Cape Town`。怎么样：

```
temp = re.sub(r"(.+?)\s*(\d+)", r"\1,\2", string) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-13T00:29:25.503

您可以使用[lookbehind 和lookahead](http://docs.python.org/2/library/re.html#regular-expression-syntax)：

```
In [1]: s = 'Toronto 239495 Cape Town 34567'

In [2]: re.sub(r"(?<=\w)\s(?=\d+)", ",", s)
Out[2]: 'Toronto,239495 Cape Town,34567' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-13T00:28:31.537

试试这个：

```
In  [1]: string = "Toronto 239495 Cape Town 34567"

In  [2]: re.sub(r"(\w)\s+(\d)", r"\1,\2", string)
Out [2]: 'Toronto,239495 Cape Town,34567' 
```

在这种情况下，没有理由匹配城市的全名。这仅匹配一个字母，后跟至少一个空格，后跟一个数字。然后它用一个逗号替换空格。

# html - background-position-y 在 Firefox 中不起作用（通过 CSS）？

> ID：14844407
> 
> 赞同：84
> 
> 时间：2013-02-13T00:23:53.030
> 
> 标签：html, css, firefox

在我的代码`background-position-y`中不起作用。在 Chrome 中没问题，但在 Firefox 中不起作用。

任何人有任何解决方案？

* * *

## 回答 #1

> 赞同：120
> 
> 时间：2013-02-13T00:29:03.440

如果您的 position-x 为 0，则除了编写之外没有其他解决方案：

```
background-position: 0 100px; 
```

background-position-x 是来自 IE 的非标准实现。Chrome 确实复制了它，但遗憾的是没有 Firefox ......

但是，如果您在大背景上有单独的精灵，则此解决方案可能并不完美，其中行和列表示不同的事物......（例如，每行上的不同徽标，选择/悬停在右侧，左侧平原）在这种情况下，我建议将大图片分成单独的图像，或者在 CSS 中编写不同的组合......根据精灵的数量，一个或另一个可能是最佳选择。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-10-20T18:54:10.547

# 用这个

```
background: url("path-to-url.png") 89px 78px no-repeat; 
```

# 而不是这个

```
background-image: url("path");
background-position-x: 89px;
background-position-y: 78px;
background-repeat: no-repeat; 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2015-03-26T15:31:10.270

Firefox 49[将于](https://developer.mozilla.org/en-US/docs/Web/CSS/Using_CSS_variables#Browser_compatibility)[2016](https://developer.mozilla.org/en-US/Firefox/Releases/49)年`background-position-[xy]`9 月发布——支持 CSS 变量[在 2015 年 12 月](http://www.w3.org/TR/css-variables-1/)达到候选推荐状态。`background-position-x``background-position-y`

以下是在悬停时修改精灵图像的背景位置轴的完全跨浏览器示例：

```
:root {
    --bgX: 0px;
    --bgY: 0px;
}

a {
    background-position: 0px 0px;
    background-position: var(--bgX) var(--bgY);
}

a:hover, a:focus { background-position-x: -54px; --bgX: -54px; }
a:active   { background-position-x: -108px; --bgX: -108px; }
a.facebook { background-position-y: -20px; --bgY: -20px;  }
a.gplus    { background-position-y: -40px; --bgY: -40px;  } 
```

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2015-06-15T06:54:13.577

> `background-position-y :10px;`**无法**在 Firefox 网络浏览器中运行。

**您应该遵循这种类型的语法：**

```
background-position: 10px 15px; 
```

10px 绑定到“position-x”，15px 绑定到“position-y”

*100% 工作解决方案*

按照此[URL](https://www.w3schools.com/cssref/playit.asp?filename=playcss_background-position&preval=50%25%2050%25)获取更多示例

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-12-15T10:42:19.750

```
background: url("path") 89px 78px no-repeat; 
```

如果您想要背景与图像一起使用，则无法使用。所以使用：

```
background: orange url("path-to-image.png") 89px 78px no-repeat; 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-06-08T15:01:59.680

为什么不直接使用**背景位置**？

**利用：**

```
background-position : 40% 56%; 
```

**代替：**

```
background-position-x : 40%;
background-position-y : 56% 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-03-24T09:39:41.940

这对我有用：

```
a {
    background-image: url(/image.jpg);
    width: 228px;
    height: 78px;
    display: inline-block;
}

a:hover {
    background-position: 0 -78px;
    background-repeat: no-repeat;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-06-26T15:38:58.890

确保您明确说明偏移量的测量值。我今天遇到了这个确切的问题，这是由于浏览器如何解释您在 CSS 中提供的值。

例如，这在 Chrome 中完美运行：

```
background: url("my-image.png") 100 100 no-repeat; 
```

但是，对于 Firefox 和 IE，您需要编写：

```
background: url("my-image.png") 100px 100px no-repeat; 
```

希望这可以帮助。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-04-16T17:03:54.500

> 但是，如果您在大背景上有单独的精灵，则此解决方案可能并不完美，其中行和列表示不同的事物...（例如，每行上的不同徽标，在右侧选择/悬停在右侧，在左侧纯色）在这种情况下，我建议将大图片分成单独的图像，或者在 CSS 中编写不同的组合......根据精灵的数量，一个或另一个可能是最佳选择。

正如 Orabîg 所说，我的问题有一个像 sprite 一样的表，它有列和行。

以下是我使用 js 的解决方法

```
firefoxFixBackgroundposition:function(){
  $('.circle').on({
    mouseenter: function(){
       $(this).css('background-position',$(this).css('background-position').split(' ')[0]+' -10px');   
    },
    mouseleave: function(){
       $(this).css('background-position',$(this).css('background-position').split(' ')[0]+' 0');   
    }
  });      
} 
```

# c++ - LNK 2019 / 1120 错误与我的头文件/源文件实践与双链表

> ID：14844411
> 
> 赞同：2
> 
> 时间：2013-02-13T00:23:57.037
> 
> 标签：c++, header, lnk2019

你能帮我弄清楚为什么我会收到这些 2019 错误吗？我很确定所有文件都保存在正确的位置，并且我认为我对头文件使用了正确的约定？这是我的系统编程课的实验室。

以下是错误：

> 1>main.obj : 错误 LNK2019: 函数 _main 中引用的无法解析的外部符号“public: __thiscall DLL::intDLL::intDLL(void)”(??0intDLL@DLL@@QAE@XZ)
> 
> 1>main.obj：错误LNK2019：函数_main中引用的未解析外部符号“public：__thiscall DLL::intDLL::~intDLL(void)”(??1intDLL@DLL@@QAE@XZ)
> 
> 1>main.obj：错误 LNK2019：函数 _main 中引用的未解析外部符号“public：void __thiscall DLL::intDLL::addFront(int)”(?addFront@intDLL@DLL@@QAEXH@Z)
> 
> 1>main.obj：错误 LNK2019：函数 _main 中引用的未解析外部符号“public：int __thiscall DLL::intDLL::getFront(void)”(?getFront@intDLL@DLL@@QAEHXZ)
> 
> 1>c:\users\josh\documents\visual studio 2012\Projects\Lab10\Debug\Lab10.exe : 致命错误 LNK1120: 4 unresolved externals

intDLL.h 文件：

```
#include <iostream>
using std::cout;
using std::endl;

class intDLL {

public:
    intDLL();
    intDLL(const intDLL &original);
    ~intDLL();
    void addFront(int inValue);
    void addBack(int inValue);
    void setBack();
    int getFront();
    int getBack();

    struct node {
        int value;
        node *next;
        node *prev;
    };

private:
    node *front;
    node *back;

}; 
```

intDLL.cpp

```
#include <iostream>
#include "intDLL.h"
using std::cout;
using std::endl;

intDLL::intDLL() {
    front = 0;
    back = 0;
}

void intDLL::setBack() {
    node *tempNode = new node;
    if(front == 0) {
        return;
    }

    tempNode = front;
    while(tempNode->back != 0) {
        tempNode = tempNode->prev;  
    }

    back = tempNode;
}

void intDLL::addFront(int inValue) {
    if(front == 0) {
        node *newFront = new node;
        newFront->value = inValue;
        newFront->next = 0;
        newFront->prev = 0;
    }
    else {
        node *newFront = new node;
        newFront->value = inValue;
        newFront->prev = front;
        front->next = newFront;
        newFront->next = 0;
        front = newFront;
    }

    setBack();
}

void intDLL::addBack(int inValue) {
    setBack();
    node *newBack = new node;
    newBack -> value = inValue;
    back->prev = newBack;
    newBack->next = back;
    back = newBack;
}

int intDLL::getFront() {
    return front->value;
}

int intDLL::getBack() {
    return back->value;
} 
```

主要的：

```
#include <iostream>
#include "intDLL.h"
using std::cout;
using std::endl;

int main(int argc, char* argv[]) {
    intDLL test = intDLL();
    test.addFront(3);
    test.addFront(4);
    test.addFront(5);
    std::cout << test.getFront() << endl;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T00:31:25.700

不确定真正的错误消息是什么，但似乎您还没有实现一些功能，例如

```
intDLL(const intDLL &original);
~intDLL(); 
```

检查您的函数定义以确保定义了声明的每个函数。还要确保所有 cpp 文件都已编译和链接。

另一个错误是`intDLL::node`没有后台成员

```
void intDLL::setBack() {
    intDLL::node *tempNode = new node;
     ^^^^ node is defined in intDLL, you need provide scope
    if(front == 0) {
       return;
    }

  tempNode = front;
  while(tempNode->back != 0) {
                  ^^^ intDLL::node has no back member
    tempNode = tempNode->prev;  
   }

  back = tempNode;
} 
```

请参阅此[SO](https://stackoverflow.com/questions/12573816/what-is-an-undefined-reference-unresolved-external-symbol-error-and-how-do-i-fix)链接。

# c# - 如何从用户控件为表单标签赋值？

> ID：14844412
> 
> 赞同：0
> 
> 时间：2013-02-13T00:24:01.483
> 
> 标签：c#, asp.net, .net

我在网站的主网页（aspx 文件）中有一个表单标签。这个表单标签包装了一个用户控件。此用户控件调用其他几个控件，所有工作都在这些控件中完成。在其中一个子用户控件中，我需要显示几个表单输入框。这些输入框需要有自己唯一的表单操作 URL

如何从子用户控件之一将操作 URL 分配给父表单标签？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T12:08:31.843

您可以使用下面的代码以编程方式访问父表单。

```
HtmlForm frm = new HtmlForm();
frm = (HtmlForm)Page.FindControl("Form1");
frm.Enctype = "multipart/form-data"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T01:27:19.870

不确定您的情况，但这对我有用：使用 HTML5，您的每个输入框都可以有自己独特的表单操作 URL。HTML5`formaction`属性覆盖了主表单的 action 属性。

# javascript - 将 html 添加到文件中

> ID：14844413
> 
> 赞同：-1
> 
> 时间：2013-02-13T00:24:05.457
> 
> 标签：javascript, html, include

我目前正忙于一个网站，需要你的帮助。

我想要的是一段 javascript，它使我能够在我的 html 文件中添加实际代码。一种扩展。在我的网站上，我有几个音乐视频，但我不想要任何剧透，所以我想隐藏最后一个音乐视频。所以基本上你必须观看前三个，然后按下按钮观看第四个而不离开你的网站。

所以：

观看视频 1、2 和 3。按下按钮。*plop*第四个视频显示为您的 html 页面的扩展，您可以观看。

所以在代码中它会是这样的：

```
<script> function fourthVideo() { 
    [the javascript ] 
}
</script>

...

<div>
  [ youtube video #1 ]
  [ youtube video #2 ]
  [ youtube video #3 ]
</div>

<input type="button" value="Continue" onclick="fourthVideo()">

<div>
  [ youtube video #4 ] //this would be added by the javascript
</div> 
```

然后 javascript 在页面底部添加带有第四个视频的 div。

我试图尽可能地解释它（很累......）所以，如果仍然不清楚，请这样说，一旦我睡了一会儿，我会试着解释得更好，呵呵。

干杯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T00:28:47.807

无需“添加”一个全新的 div，您可以使用 css 显示和隐藏它。

```
<div id="videoFour" style="display:none;"> 
  Video.. 
</div>

function fourthVideo() {
  document.getElementById("videoFour").setAttribute("style", "display: block");
} 
```

# html - HTML对齐选择字段

> ID：14844417
> 
> 赞同：0
> 
> 时间：2013-02-13T00:24:17.600
> 
> 标签：html, drop-down-menu, html-table, alignment

我正在尝试对齐 T 恤网站的两个文本字段，我希望选择字段并排显示，并且它们彼此重叠。任何帮助，将不胜感激。

```
<table>
<tr><td><input type="hidden" name="on0" value="Color">Color</td></tr><tr><td><select name="os0">
    <option value="White">White</option>
    <option value="Black">Black</option>
    <option value="Grey">Grey</option>
</select> </td></tr>
<tr><td><input type="hidden" name="on1" value="Size">Size</td></tr><tr><td><select name="os1">
    <option value="S">S </option>
    <option value="M">M </option>
    <option value="L">L </option>
    <option value="XL">XL </option>
</select> </td></tr>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T00:27:36.417

您混淆了 和 的`<tr>`使用`<td>`。我一直记得的方式`<tr>`是`TABLE ROW`……行总是水平的，而列则垂直向上放置一些东西，比如希腊塔。希望这可以帮助。

```
<table>
<tr><td><input type="hidden" name="on0" value="Color">Color</td><td><input type="hidden" name="on1" value="Size">Size</td></tr>
<tr>
<td><select name="os0">
    <option value="White">White</option>
    <option value="Black">Black</option>
    <option value="Grey">Grey</option>
</select> </td>
<td><select name="os1">
    <option value="S">S </option>
    <option value="M">M </option>
    <option value="L">L </option>
    <option value="XL">XL </option>
</select> </td>

</tr>
</table> 
```

# c# - 需要帮助捕获格式异常错误

> ID：14844418
> 
> 赞同：0
> 
> 时间：2013-02-13T00:24:20.307
> 
> 标签：c#, asp.net, exception, try-catch

我的解决方案似乎很愚蠢，但它可以防止错误。有一个更好的方法吗？

```
try 
{
myNumber =  Convert.ToInt32(InputRow.Substring(288, 9));  
}
catch (FormatException e)
{
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T00:30:04.333

int.TryParse 可能是一个不错的选择

```
int val = 0;
if(int.TryParse(InputRow.Substring(288, 9), out val))
   // insert val into db 
```

# python - Python活动窗口记录器

> ID：14844419
> 
> 赞同：1
> 
> 时间：2013-02-13T00:24:20.393
> 
> 标签：python, pywin32

如何使用 python 在活动窗口（例如“example_window_name”）中记录用户输入？我可以使用以下方法获取活动窗口：

```
from win32gui import GetWindowText, GetForegroundWindow
print GetWindowText(GetForegroundWindow()) 
```

但是我将如何枚举窗口，直到“example_window_name”成为活动窗口，然后开始记录用户在“example_window_name”中输入的击键，直到它变为非活动状态。这是我到目前为止得到的：

```
import win32gui
import re

class WindowMgr:
"""Encapsulates some calls to the winapi for window management"""
def __init__ (self):
    """Constructor"""
    self._handle = None

def find_window(self, class_name, window_name = None):
    """find a window by its class_name"""
    self._handle = win32gui.FindWindow(class_name, window_name)

def _window_enum_callback(self, hwnd, wildcard):
    '''Pass to win32gui.EnumWindows() to check all the opened windows'''
    if re.match(wildcard, str(win32gui.GetWindowText(hwnd))) != None:
        self._handle = hwnd

def find_window_wildcard(self, wildcard):
    self._handle = None
    win32gui.EnumWindows(self._window_enum_callback, wildcard)

def set_foreground(self):
    """put the window in the foreground"""
    win32gui.SetForegroundWindow(self._handle)

w = WindowMgr()
w.find_window_wildcard(".*Hello.*")
w.set_foreground() 
```

感谢您的帮助！

# jquery - 重新定义图像的边框不再被选中

> ID：14844422
> 
> 赞同：0
> 
> 时间：2013-02-13T00:24:43.193
> 
> 标签：jquery, html, border

我正在创建一个表单，其中一些元素是图像。将鼠标悬停在上方时，有一条 CSS 规则会在所选图像周围创建粗边框。选择图像时也是如此；它留下了厚厚的边框。

我面临的问题是，当单击图像时，虽然它会在正确图像周围留下粗边框，但它不会重新定义其他先前选择的图像周围的边框。（通过重新定义，我的意思是使其半透明以阻止图像移动）。

这是一个 JSFiddle： http: [//jsfiddle.net/bewWF/](http://jsfiddle.net/bewWF/)或者您可能会看到下面的代码。

**HTML**

```
<div class="grid_12 alpha" id="selection">

    <input type="hidden" id="SelSunlight" name="SelSunlight" value=""/>

    <div class="grid_2 omega" style="margin-left: 8px">
        <div align="center"><img src="images/details/any.png"/ id="AnySun" name="AnySun" onClick="SelectSunlight('AnySun')"/></div>
        <p id="image-text">Any</p>
    </div>

    <div class="grid_2 alpha omega">
        <div align="center"><img src="images/details/sunlight/full_light.png" id="FullSun" name="FullSun" onClick="SelectSunlight('FullSun')"/></div>
        <p id="image-text">Full Sun</p>
    </div>

    <div class="grid_2 alpha omega">
        <div align="center"><img src="images/details/sunlight/part_shade.png" id="PartShade" name="PartShade" onClick="SelectSunlight('PartShade')"/></div>
        <p id="image-text">Part Shade</p>
    </div>

    <div class="grid_2 alpha">
        <div align="center"><img src="images/details/sunlight/full_shade.png" id="FullShade" name="FullShade" onClick="SelectSunlight('FullShade')"/></div>
        <p id="image-text">Full Shade</p>
    </div>

</div> 
```

**JavaScript**

```
function SelectSunlight(item) {
    $.each(['#AnySun','#FullSun','#PartShade','#FullShade'], function() {
        $(this).css('border', "3px solid #f5f5f5");

        $(this).hover( function() {
            $(this).addClass('hover');
        }, function() {
            $(this).removeClass('hover');
        });
    });

    $('#'+item).css('border', "3px solid #a6be39");
    $('#SelSunlight').val(item);
} 
```

`.hover`定义为`#selection .hover {border: 3px solid #a6be39}`

我已经解决了一个又一个问题，并且在花费了很长时间之后，我终于对这个问题没有想法了。我的头脑认为它应该工作，但显然它没有！

需要做什么：

1) 用户选择一个图像 2) 选择一个图像后，该图像的边框保持粗 3) 所有其他图像必须保持悬停效果，从而边框分别变粗和变细 4) 如果随后选择另一个图像，则步骤 2 中的边框被重置，新图像采用粗边框

这张图片可能会更清楚：http: [//i48.tinypic.com/ei4f9t.png](http://i48.tinypic.com/ei4f9t.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T00:40:14.293

看起来你可以简化很多：

```
$(function() {
    $('#AnySun, #FullSun, #PartShade, #FullShade').on('click', function() {
        $(this).addClass('hover').siblings('img').removeClass('hover');
        $('#SelSunlight').val(this.id);
    });
}); 
```

[**小提琴**](http://jsfiddle.net/4NP9J/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T00:42:36.087

我优化了你所有的代码。由于您使用的是 CSS `:hover`，因此您不需要将 jQuery 用于悬停边框。我添加`class="sun"`到每个图像中，这样您就不需要使用`$(".sun")`较慢的`.each`. 我使用 jQuery`.click`替换`onclick`并`.prop`获取 clicked 的名称属性`.sun`。我为演示更改了选定的 img 边框红色。

HTML：

```
<div id="selection">
    <input type="hidden" id="SelSunlight" name="SelSunlight" value="" />
    <img class="sun" src="http://jonline.me.uk/fbedder/images/details/any.png" id="AnySun" name="AnySun" />
        <p id="image-text">Any</p>
    <img class="sun" src="http://jonline.me.uk/fbedder/images/details/sunlight/full_light.png" id="FullSun" name="FullSun" />
        <p id="image-text">Full Sun</p>
    <img class="sun" src="http://jonline.me.uk/fbedder/images/details/sunlight/part_shade.png" id="PartShade" name="PartShade" />
        <p id="image-text">Part Shade</p>
    <img class="sun" src="http://jonline.me.uk/fbedder/images/details/sunlight/full_shade.png" id="FullShade" name="FullShade" />
        <p id="image-text">Full Shade</p>
</div> 
```

CSS：

```
.sun {border: 3px solid #f5f5f5}
.sun:hover {border: 3px solid #a6be39}
.selected {border: 3px solid red !important} 
```

jQuery：

```
$(document).ready(function(){
    $(".sun").click(function(){
        $(".sun").removeClass("selected");
        $(this).addClass("selected");
        var item = $(this).prop("name");
        $('#SelSunlight').val(item);
    });
}); 
```

JSFiddle：http: [//jsfiddle.net/bewWF/2/](http://jsfiddle.net/bewWF/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T00:32:20.420

您可以在选择当前边框之前清除所有边框。那是你要找的吗？

```
function SelectSunlight(item) {
    $("img").css('border','3px solid #f5f5f5'); //resets border of all images
    $.each(['#AnySun', '#FullSun', '#PartShade', '#FullShade'], function () {
        $(this).css('border', "3px solid #f5f5f5"); 

        $(this).hover(function () {
            $(this).addClass('hover');
        }, function () {
            $(this).removeClass('hover');
        });
    });

    $('#' + item).css('border', "3px solid #a6be39");
    $('#SelSunlight').val(item);
} 
```

演示：http: [//jsfiddle.net/bewWF/1/](http://jsfiddle.net/bewWF/1/)

# asp.net-mvc-4 - 实体框架将无法识别网页_UsersInRoles

> ID：14844424
> 
> 赞同：2
> 
> 时间：2013-02-13T00:25:06.050
> 
> 标签：asp.net-mvc-4, entity-framework-5, simplemembership

我正在使用 EF5 VS2012 并使用 SimpleMembership。我让 MS 自动创建 SQL 表

```
WebSecurity.InitializeDatabaseConnection("SqlRoleManagerConnection", "webpages_Users", "UserID", "Username", true); 
```

每当我尝试从 DB 创建模型以创建 EDMX 时，它都会省略 pages_UsersInRoles 表。XML 中有对这个表的引用，但它没有出现在图表上，也没有为它生成类。我正在运行 VS2012 Update 1，所以这与通常报告的错误无关。我还手动选择了无法修复的运行自定义工具。

您可能知道，这个缺失的表仅包含两个用于链接用户表和角色表的 FK 字段。

我尝试创建一个新项目和新的 EDMX 文件，它们都产生相同的结果 - 缺少 pages_UsersInRoles 图表和类。

编辑：我可以重复从数据库进入更新并选择表，它不会添加到图表或类中。这种行为的原因是什么？如何强制 EF 连接所有内容以便我可以使用这个表和类？

![在此处输入图像描述](../Images/8020e36e16d71a15ec172af1cbfe072f.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T17:43:42.843

通常，您不会在代码中直接引用该表。您使用`Membership`API。

这是一篇很好的文章：[在 ASP.NET MVC 4 中播种成员资格和角色](http://odetocode.com/blogs/scott/archive/2012/09/05/seeding-membership-amp-roles-in-asp-net-mvc-4.aspx)

示例代码：

```
private void SeedMembership()
{
    if (!Roles.RoleExists("Administrator"))
    {
        Roles.CreateRole("Administrator");
    }

    if (!Roles.RoleExists("Teacher"))
    {
        Roles.CreateRole("Teacher");
    }

    if (!Roles.RoleExists("Student"))
    {
        Roles.CreateRole("Student");
    }

    if (!WebSecurity.UserExists("leniel"))
    {
        WebSecurity.CreateUserAndAccount("leniel", "mypass");
    }

    if (!Roles.GetRolesForUser("leniel").Contains("Administrator"))
    {
        Roles.AddUsersToRoles(new[] { "leniel" }, new[] { "Administrator" });
    }

    if (!WebSecurity.UserExists("tester"))
    {
            WebSecurity.CreateUserAndAccount("tester", "test123");
    }

    if (!Roles.GetRolesForUser("tester").Contains("Administrator"))
    {
        Roles.AddUsersToRoles(new[] { "tester" }, new[] { "Administrator" });
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T17:47:49.567

我认为这是 EF 处理多对多关系的方式，以下是 2 种解释以及如何使用它们：

[http://nileshhirapra.blogspot.in/2012/03/entity-framework-insert-operation-with.html](http://nileshhirapra.blogspot.in/2012/03/entity-framework-insert-operation-with.html)

[http://weblogs.asp.net/zeeshanhirani/archive/2008/08/21/many-to-many-mappings-in-entity-framework.aspx](http://weblogs.asp.net/zeeshanhirani/archive/2008/08/21/many-to-many-mappings-in-entity-framework.aspx)

# sql - 如何在 Teradata 中使用 SELECT 语句在数据库之间传输数据

> ID：14844428
> 
> 赞同：3
> 
> 时间：2013-02-13T00:25:16.440
> 
> 标签：sql, teradata

所以我被困在这个 Teradata 问题上，我正在向社区寻求建议，因为我是 TD 平台的新手。我目前正在使用 Teradata 数据仓库，并且有一个有趣的任务要解决。目前，我们将信息存储在实时生产数据库中，但希望在使用 FastExport 导出文件之前将表暂存到另一个数据库中。基本上，我们希望将表移动到数据库中以获取快速快照。

我一直在探索不同的解决方案，但不确定如何进行。我需要能够自动从 Teradata 中的一个数据库到另一个数据库的创建表过程。棘手的部分是我想使用 WHERE 子句从源表中创建许多表。例如，我有一个事务表，并且想逐月对某个日期范围内的事务表进行快照。这意味着原始表 Transaction 将被拆分为许多表，例如 Transaction_May2001、Transaction_June2001、Transaction_July2001 等等。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T00:30:14.110

这是假设您指的是 Teradata 的相同物理安装的两个数据库。

您可以使用该`CREATE TABLE AS`构造来完成此操作：

```
CREATE TABLE {MyDB}.Transaction_May2001
AS (
SELECT *
FROM Transaction
WHERE Transaction_Date BETWEEN DATE '2001-05-01' AND '2001-05-31'
)
{UNIQUE} PRIMARY INDEX ({Same PI definition as Transaction Table}) 
WITH DATA AND STATS; 
```

如果您忽略在 CREATE TABLE AS 中指定显式 PI，则 Teradata 将采用 SELECT 子句的第一列并将其用作新表的 PI。

否则，您将寻求使用 ryanbwork 在对您的问题的评论中建议的 Teradata 实用程序。

# windows-phone-8 - 无法使 ScrollViewer 垂直滚动条出现

> ID：14844429
> 
> 赞同：0
> 
> 时间：2013-02-13T00:25:24.963
> 
> 标签：windows-phone-8, windows-phone

在 Windows Phone 8 应用程序中，我有一个`ScrollViewer`带有`ItemsControl`内部的简单示例

```
<ScrollViewer>
   <ItemsControl ItemsSource="{Binding Items}"/>
</ScrollViewer> 
```

我可以上下滑动，ItemsControl 会相应地滚动，但我看不到垂直滚动条。

我没有为 ScrollViewers 应用任何样式，这是一个简单的应用程序。由于默认`VerticalScrollBarVisibility`设置为`auto`滚动条不应该可见吗？我很困惑，我试图明确设置它，但它仍然不起作用。如何让它可见？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T11:34:13.653

ItemsControl 的高度实际上是否比 ScrollViewer 大（从而隐藏了一些项目）？

滚动条仅在实际存在只能通过滚动才能到达的隐藏项目时才会显示。

# bots - 自动控制

> ID：14844434
> 
> 赞同：-1
> 
> 时间：2013-02-13T00:25:48.760
> 
> 标签：bots, autoit

我用来[`ControlSend()`](https://www.autoitscript.com/autoit3/docs/functions/ControlSend.htm)在不同的窗口中发送热键。问题是找到正确的窗口控件。或者控制正确，存在未知问题。这些是控件：

> **标题**：PokeMMO
> **类**：LWJGL
> **controlID**：仍然未知
> **进程**：javaw.exe

```
$handle = WinGetHandle("[TITLE:PokeMMO; CLASS:LWJGL]")
ControlSend($handle, Default, $handle, "{Down}") 
```

没用。

```
Global $sProcess = "javaw.exe" ; Process PokeMMO 

ControlSend(_Process2Win($sProcess), "", "", "{DOWN}")

Func _Process2Win($pid)
    If IsString($pid) Then $pid = ProcessExists($pid)
    If $pid = 0 Then Return -1
    $list = WinList()
    For $i = 1 To $list[0][0]
        If $list[$i][0] <> "" And BitAND(WinGetState($list[$i][1]), 2) Then
            $wpid = WinGetProcess($list[$i][0])
            If $wpid = $pid Then Return $list[$i][0]
        EndIf
    Next
    Return -1
EndFunc   ;==>_Process2Win 
```

没用。我也试过这个：

```
Run("C:\path\path\path\PokeMMO.exe")
WinWait("[CLASS:LWJGL]")
Local $sControl = ControlGetFocus("[CLASS:LWJGL]")
MsgBox(0, "ControlGetFocus Example", "The control that has focus is: " & $sControl) 
```

> 系统消息：Java 虚拟机启动器 - 发生 Java 异常错误！

[YouTube 上的指南](http://java.com/en/download/manual.jsp)告诉安装不同版本的 Java。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T19:13:02.983

尝试使用 Title 和 text 参数，但不要使用 controlID 参数，如 "" 或 ''。这也应该有效。祝你好运。

# python - sqlalchemy 事务不回滚

> ID：14844437
> 
> 赞同：4
> 
> 时间：2013-02-13T00:26:00.127
> 
> 标签：python, unit-testing, sqlalchemy, zope

对于我的集成测试，我自定义编写了从`unittest.TestCase`.

```
def initialize_sql(engine, dbsession):
    dbsession.configure(bind=engine)
    Base.metadata.bind = engine
    Base.metadata.drop_all(engine)  # ensure the database is clean!
    Base.metadata.create_all(engine)
    try:
        populate(dbsession)
    except IntegrityError:
        transaction.abort()

class HeavyTestBaseCase(unittest.TestCase):
    __TEST__ = False
    test_ini = 'test.ini'

    @classmethod
    def setUpClass(cls):
        TEST_ROOT = os.path.dirname(os.path.abspath(__file__))
        settings = appconfig('config:' + os.path.join(TEST_ROOT, cls.test_ini))
        cls.engine = engine_from_config(settings, prefix='sqlalchemy.')
        print 'Creating the tables on the test database %s' % cls.engine

        cls.dbsession = scoped_session(sessionmaker(
                extension=ZopeTransactionExtension()))
        config = Configurator(settings=settings)
        initialize_sql(cls.engine, cls.dbsession)

    def tearDown(self):
        transaction.abort() # strange name for rollback ...

    @classmethod
    def tearDownClass(cls):
        Base.metadata.drop_all(cls.engine) 
```

现在这里是测试用例：

```
from mock import Mock, patch
from aurum.models import User
from aurum.user import register_user

class TestRegisterUserIntegration(HeavyTestBaseCase):
    __TEST__ = True

    @classmethod
    def setUpClass(cls):
        cls.uid = 'uid1234'
        cls.username = 'user01'
        cls.password = 'password01'
        cls.masteru = 'masteru'
        cls.masterp = 'masterp'

        cls.gcs_patcher = patch('aurum.user.GCS', autospec=True)
        cls.gcs = cls.gcs_patcher.start()
        cls.gcs.return_value.register.return_value = cls.uid
        super(TestRegisterUserIntegration, cls).setUpClass()

    def test_register_user01_successful_return_useid_and_shared_key(self):
        result = register_user(self.username, self.password, self.masteru, self.masterp)
        self.assertEqual(result.keys(), ['user_id', 'shared_key'])
        self.assertEqual(result['user_id'], self.uid)

    def test_register_user01_successful_write_to_database_query_is_not_none(self):
        register_user(self.username, self.password, self.masteru, self.masterp)
        result = self.dbsession.query(User).filter_by(username=self.username).first()
        self.assertTrue(result is not None) 
```

但是回滚没有做任何事情。由于重复键约束，其中一项测试将失败，这意味着提交没有被丢弃。

在实际代码中，在返回之前我写`transaction.commit()`了提交更改。

知道发生了什么吗？谢谢

* * *

适应@zzzek 的建议，这是回溯： [http ://pastebin.com/K9fin7ZH](http://pastebin.com/K9fin7ZH)

实际代码是这样的：

```
def add_user(dbsession, username, password):
    with transaction.manager:
        user = User(...)
        dbsession.add(user) 
```

# asp.net-mvc - 有没有比这更简单的方法来编辑我的数据库中的表？

> ID：14844441
> 
> 赞同：0
> 
> 时间：2013-02-13T00:26:28.517
> 
> 标签：asp.net-mvc, sql-server-express

我正在尝试更新表中的一行。我找到了一种让它工作的方法，但我想知道是否有更简单或更好的方法。请帮助我解决您可能有的任何想法。谢谢

这是代码……</p>

```
 var courseRubics = from r in db.Rubrics where r.DepartmentID == 2 select r;
        var selectedRubrics = courseRubics.Select(r => r.RubricID);
        List<int> rubricsList = selectedRubrics.ToList();

        foreach (var rub in courseRubics.ToList())

        {

            if (!String.IsNullOrEmpty(formCollection["item.Weight"]))
            {
                Rubric aRubic1 = db.Rubrics.Find(1);
                Rubric updateRubic1 = (Rubric)aRubic1;
                int rubric1 = Convert.ToInt32(totlrubric[0]);
                updateRubic1.Weight = rubric1;

                Rubric aRubic2 = db.Rubrics.Find(2);
                Rubric updateRubic2 = (Rubric)aRubic2;
                int rubric2 = Convert.ToInt32(totlrubric[1]);
                updateRubic2.Weight = rubric2;

                Rubric aRubic3 = db.Rubrics.Find(4);
                Rubric updateRubic3 = (Rubric)aRubic3;
                int rubric3 = Convert.ToInt32(totlrubric[2]);
                updateRubic3.Weight = rubric3;

            }

            db.SaveChanges();

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T01:04:44.907

几个想法/观察

1.  您的初始选择集可以缩小到（对不起替代语法）

    ```
    var list = db.Rubrics.Where(r => r.DepartmentId == 2).Select(x => x.RubricId).ToList() 
    ```

2.  你迭代`foreach (var rub in courseRubics.ToList())`但似乎没有做任何事情`rub`

3.  的内容`if...`可以收紧一点。我看不出有什么理由需要进行强制转换，或者为什么不能内联 rubricX 的创建，

    ```
    if (!String.IsNullOrEmpty(formCollection["item.Weight"]))
        {
            Rubric aRubic1 = db.Rubrics.Find(1);
            aRubic1.Weight = Convert.ToInt32(totlrubric[0]);

            Rubric aRubic2 = db.Rubrics.Find(2);
            aRubic2.Weight = Convert.ToInt32(totlrubric[1]);

            Rubric aRubic3 = db.Rubrics.Find(4);
            aRubic3.Weight = Convert.ToInt32(totlrubric[2]);
        } 
    ```

# android - 如何将上下文从活动传递到 AsyncTask 类以启动新活动？

> ID：14844443
> 
> 赞同：2
> 
> 时间：2013-02-13T00:26:49.823
> 
> 标签：android, android-intent, android-asynctask, android-context

我正在尝试将 Context 从活动传递给 AsyncTask 类。问题是上下文为空。

在我的 AsyncTask 类中，我有以下内容

```
 public class LoginService extends AsyncTask<String, Void, String> {

      ....

 public Context context;

 public LoginService(){

}

public LoginService(String username, String password){
    this.username=username;
    this.password=password;
}

@Override
protected String doInBackground(String... params) {

    String userID = login(username, password);

    return userID;
}

protected void onPostExecute(String result){

     loginSuccess = result;

    if (loginSuccess!=fail){
       Intent casesActivity = new Intent(context, CasesActivity.class);
       casesActivity.putExtra("username", result);
       context.startActivity(casesActivity);
}

public void setContext(Context newContext){
    context = newContext;
} 
```

在我的活动中，当我单击一个按钮时，我有以下代码：

```
 public void onClick(View view) {

            if ((editTextPassword.getText().toString() != null & editTextUsername.getText().toString() != null)){

                new LoginService().setContext(getApplicationContext());
                new LoginService(editTextUsername.getText().toString(), editTextPassword.getText().toString()).execute();

             }
            else{
                //Display Toaster for error
                Toast.makeText(getApplicationContext(),"Please enter your details", Toast.LENGTH_LONG).show();
            }
        } 
```

意图永远不会被创建，并且应用程序会因为上下文为空而突然崩溃。我似乎找不到这个问题的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T00:30:29.493

对于*最小的*代码更改，请保留对您的引用，`LoginTask`而不是创建两个**单独**的实例：

```
LoginService l = new LoginService(editTextUsername.getText().toString(), editTextPassword.getText().toString());

l.setContext (getApplicationContext());

l.execute(); 
```

`LoginTask`您的代码每次都会创建一个新的，并且由于您有两个单独的构造函数，`context`因此始终为空（第二个构造函数不保存上下文，因为您创建了一个单独的对象！）

但是，如果您希望 Context 与用户凭据一起传递，请*取出*无参数构造函数并更改剩余的构造函数，使其如下所示：

```
public LoginService(Context context,String username, String password){
    this.context = context;
    this.username=username;
    this.password=password;
} 
```

拥有不做任何事情的空构造函数通常是没有意义的，因此请调整有用的构造函数，使其*更加*有用。

# video-streaming - 可以通过更改格式扩展来播放单个视频，但不能播放视频本身

> ID：14844456
> 
> 赞同：0
> 
> 时间：2013-02-13T00:28:51.720
> 
> 标签：video-streaming

我问这个的原因是因为我注意到一些有趣的结果改变了格式并在不同的浏览器上播放视频。

基本上我想要的是如果我可以播放单个文件视频，比如说 randomtest.mp4 并将最后一个扩展名更改为 .ovg 并直接从同一个视频文件播放它而不制作新文件。通过这种方式，我可以节省网站上的空间，而不必上传多种视频格式，我所需要的只是标准格式。

我不在乎是否需要使用 jquery、javascript、php 等...

如果可能的话，将非常感谢示例代码或网站之一。这样我就可以知道我需要做什么以及它是如何工作的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T00:36:54.280

从您的问题看来，您将更改文件扩展名等同于更改视频格式。

如果您只是更改文件的扩展名，如果您假设它是原始类型，您仍然可以播放该文件。如果您实际上需要两种单独的视频格式，这不会节省空间，在这种情况下，无论如何您都需要两个不同的文件。

大多数文件类型在其内部标题中都有一个签名。更改文件扩展名本质上是更改文件名；不是格式。

您可能已经体验过，某些程序（浏览器）与某些文件类型相关联。这通常是操作系统中的情况。但是，这只是自动关联。

# javascript - ipad/iphone carousel 在 touchmove 中无法正常工作

> ID：14844457
> 
> 赞同：0
> 
> 时间：2013-02-13T00:28:54.183
> 
> 标签：javascript, jquery, touchmove

我有一个轮播，它适用于除 ipad/iphone 之外的所有浏览器和所有设备。当我滑动轮播时，它会使用 jqueries 缓动和弹跳数次，然后停止。使它像在所有其他浏览器中一样运行的唯一方法是在滑动后弹出一条警报消息，然后它就可以正常工作了。

[代码]

```
$("#CarouselWrap").bind("touchmove", function(event){

if(navigator.userAgent.match(/iPhone/i) || navigator.userAgent.match(/iPad/i)) {
    whichWayMovingX[1] = event.originalEvent.touches[0].pageX;
    whichWayMovingY[1] = event.originalEvent.touches[0].pageY;

}else{
    whichWayMovingX[1] = event.originalEvent.changedTouches[0].pageX;
    whichWayMovingY[1] = event.originalEvent.changedTouches[0].pageY;
}

if(whichWayMovingX[0] > whichWayMovingX[1]){
    if(navigator.userAgent.match(/iPhone/i) || navigator.userAgent.match(/iPad/i)){
        alert("left");
        moveLeft();
    }else{
        moveLeft();
    }
}else{
    if(navigator.userAgent.match(/iPhone/i) || navigator.userAgent.match(/iPad/i)){
        alert("right");
        moveRight();
    }else{
        moveRight();
    }
} 
```

}); [/代码]

moveLeft 和 moveRight 函数与轮播左侧和右侧的箭头一起使用，所以我知道它们可以工作，但仅适用于 onclick 事件。

[代码]

```
switch(amountToMove) {
    case -1011:
$("#CarouselFeed").animate({marginLeft: amountToMove},{duration: 'slow', easing: 'easeOutBack', wipe:'true'}); 
```

[/代码]

为什么这段代码对 onclick 如此有效，但对 touchmove 却不行？

I have tried to combine the binds of touchstart, touchend and touchmove - nada I have tried to use touchmove mousemove - diddlesquat I have tried to use a setTimeout thinking that I had to wait for the last event - nothing

Please help, this is driving me nuts.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T18:20:09.620

Found the solution via some code for addressing the default behavior of a swipe.

First, set up the listeners:

```
 if(document.getElementById("CarouselFeed")){
    $("#CarouselFeed").bind("touchstart", function(event){
        touchStart(event,"CarouselFeed")
    });

    $("#CarouselFeed").bind("touchend", function(event){
        touchEnd(event);
    });

    $("#CarouselFeed").bind("touchmove", function(event){
        touchMove(event);
    });
} 
```

I found the following code on a web site, that thanked two other web sites for their code and just as that web site changed the code a little to suit their needs, I have done the same:

```
// TOUCH-EVENTS SINGLE-FINGER SWIPE-SENSING JAVASCRIPT
// Courtesy of PADILICIOUS.COM and MACOSXAUTOMATION.COM
// redefined a few things to make this applicable to our needs

// this script can be used with one or more page elements to perform actions based on them being swiped with a single finger

var triggerElementID = null; // this variable is used to identity the triggering element
var fingerCount = 0;
var startX = 0;
var startY = 0;
var curX = 0;
var curY = 0;
var deltaX = 0;
var deltaY = 0;
var horzDiff = 0;
var vertDiff = 0;
var minLength = 72; // the shortest distance the user may swipe
var swipeLength = 0;
var swipeAngle = null;
var swipeDirection = null; 
```

// The 4 Touch Event Handlers

// NOTE: the touchStart handler should also receive the ID of the triggering element // make sure its ID is passed in the event call placed in the element declaration, like: //

```
var touchStart = function(event,passedName){
// disable the standard ability to select the touched object
// event.preventDefault();
// get the total number of fingers touching the screen
fingerCount = event.originalEvent.touches.length;
// since we're looking for a swipe (single finger) and not a gesture (multiple fingers),
// check that only one finger was used
if(fingerCount == 1){
    // get the coordinates of the touch
    startX = event.originalEvent.touches[0].pageX;
    startY = event.originalEvent.touches[0].pageY;
    // store the triggering element ID
    triggerElementID = passedName;
}else{
    // more than one finger touched so cancel
    touchCancel(event);
}
}

var touchMove = function(event){
event.preventDefault();
if ( fingerCount == 1 ){
    curX = event.originalEvent.touches[0].pageX;
    curY = event.originalEvent.touches[0].pageY;
}else{
    touchCancel(event);
}
}

var touchEnd = function(event){
// event.preventDefault();
// check to see if more than one finger was used and that there is an ending coordinate
if (fingerCount == 1 && curX != 0){
    // use the Distance Formula to determine the length of the swipe
    swipeLength = Math.round(Math.sqrt(Math.pow(curX - startX,2) + Math.pow(curY - startY,2)));
    // if the user swiped more than the minimum length, perform the appropriate action
    if(swipeLength >= minLength){
        caluculateAngle();
        determineSwipeDirection();
        processingRoutine();
        touchCancel(event); // reset the variables
    }else{
        touchCancel(event);
    }   
}else{
    touchCancel(event);
}
}

var touchCancel = function(event){
// reset the variables back to default values
fingerCount = 0;
startX = 0;
startY = 0;
curX = 0;
curY = 0;
deltaX = 0;
deltaY = 0;
horzDiff = 0;
vertDiff = 0;
swipeLength = 0;
swipeAngle = null;
swipeDirection = null;
triggerElementID = null;
}

var caluculateAngle = function(){
var X = startX-curX;
deltaX = X;
var Y = curY-startY;
var Z = Math.round(Math.sqrt(Math.pow(X,2)+Math.pow(Y,2))); //the distance - rounded - in pixels
var r = Math.atan2(Y,X); //angle in radians (Cartesian system)
swipeAngle = Math.round(r*180/Math.PI); //angle in degrees
if (swipeAngle < 0) {swipeAngle =  360 - Math.abs(swipeAngle);}
}

var determineSwipeDirection = function(){
if( (swipeAngle <= 45) && (swipeAngle >= 0) ){
    swipeDirection = 'left';
}else if( (swipeAngle <= 360) && (swipeAngle >= 315) ){
    swipeDirection = 'left';
}else if( (swipeAngle >= 135) && (swipeAngle <= 225) ){
    swipeDirection = 'right';
}else if( (swipeAngle > 45) && (swipeAngle < 135) ){
    swipeDirection = 'down';
}else{
    swipeDirection = 'up';
}
}

var processingRoutine = function(){
var swipedElement = document.getElementById(triggerElementID);
if( swipeDirection == 'left' ){
    moveLeft();
}else if( swipeDirection == 'right' ){
    moveRight();
}else if( (swipeDirection == 'up') || (swipeDirection == 'left') ){
    moveLeft();
}else if( (swipeDirection == 'up') || (swipeDirection == 'right') ){
    moveRight();
}else if( (swipeDirection == 'down') || (swipeDirection == 'left') ){
    moveLeft();
}else if( (swipeDirection == 'down') || (swipeDirection == 'right') ){
    moveRight();
}
} 
```

One note, I have this swipe working on a carousel that has banners. In order for the links for the banners to work, you have to comment out the event.preventDefault() within the touchStart and touchEnd functions.

And that is all it takes

# ruby - rspec Ruby 方法插入哈希

> ID：14844461
> 
> 赞同：0
> 
> 时间：2013-02-13T00:29:15.703
> 
> 标签：ruby, rspec

我很难弄清楚这个挑战。这是我所拥有的：

```
class Dictionary
attr_accessor :entries

def initialize
    @x = Hash.new
end

def entries
    @x
end

def add(hash)
    @x.merge!(hash)
end

end

@d=Dictionary.new
@d.add('fish' => 'aquatic animal')
puts @d.entries 
```

我得到了=>“鱼水生动物”

我想要得到 => {'fish' => 'aquatic animal'}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T01:44:42.743

`to_s`对于某些 Ruby 版本， on 的`Hash`行为不太理想。试试`puts @d.entries.inspect`。

**更新：**

以下代码适用于我（Ruby 1.9.3 和 rspec 2.12.0）：

```
class Dictionary      
  def initialize
    @x = Hash.new
  end

  def entries
    @x
  end

  def add(hash)
    @x.merge!(hash)
  end
end

describe Dictionary do
  before do
    @d = Dictionary.new
  end

  it 'can add whole entries with keyword and definition' do
    @d.add('fish' => 'aquatic animal')
    @d.entries.should == {'fish' => 'aquatic animal'}
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T00:41:36.210

如所写，您的代码当前正在将 @x 设置为一个新的空哈希，然后在您每次调用该`entries`方法时返回它。

尝试将该设置代码移动到初始化方法中：

```
class Dictionary
    attr_reader :entries

    def initialize
        @entries = Hash.new
    end

    def add(hash)
        @entries.merge!(hash) 
    end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T01:10:50.607

在我看来，rspec 代码有点奇怪。第二个测试执行 entry 方法，entries 方法将实例变量 @x 重置为空白。因此，最好将实例变量添加为 attr_reader，然后在创建新字典对象时对其进行初始化。所以它看起来像这样

```
class Dictionary
    attr_reader @x

    def initialize
      @x = Hash.new
    end

    def add(hash)
      @x.merge!(hash) 
    end
end 
```

测试是这样的

```
@d.add(fish: "aquatic animal")
@d.x.should == {'fish' => "aquatic animal"} 
```

# linux - 如何在 awk 包含“:Cc:”的行之前添加“聊天”一词

> ID：14844469
> 
> 赞同：0
> 
> 时间：2013-02-13T00:29:50.917
> 
> 标签：linux, awk

我想在包含“：Cc：”的行之前添加单词“聊天”我如何使用 awk 命令执行此操作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T01:05:51.380

尝试`awk '/:Cc:/ { printf "chat" } { print }'`看看它是否符合您的要求。

# c++ - 从文件中获取输入并将其保存到临时内存中？

> ID：14844473
> 
> 赞同：0
> 
> 时间：2013-02-13T00:30:21.127
> 
> 标签：c++, file

我有一个结构化数组，它最初是空的，有 4 种数据类型 withing、string、2 个 int 和 1 个 float。我有一个保存在文本文件中的 dvd 标题和其他属性列表（其他 3 个，其中 2 个是 int 最后一个是浮点数），我需要将文本文件中的数据输入到我的结构中。这是我的代码，但似乎它不起作用？

```
 do
        {
           for(int i=0;i<MAX_BOOKS;i++)
           {

                tempTitle= getline(myfile,line);
                temChapters = getline(myfile,line);
                tempReview = getline(myfile,line);
                tempPrice = getline(myfile,line);
           }
        }while(!myfile.eof()); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T00:38:06.627

return from`getline`是您从中读取的流，而不是您将数据读入的字符串。

您还重复将数据读取到同一个位置 ( `line`)，而没有将其保存在任何地方。

你的循环有缺陷（`while (!somefile.eof())`基本上总是坏的）。

您通常想要的是首先重载`operator>>`以从流中读取单个逻辑项，然后使用它来填充这些项的向量。

```
// The structure of a single item:
struct item { 
    std::string title;
    int chapters;
    int review;
    int price;    
};

// read one item from a stream:
std::istream &operator>>(std::istream &is, item &i) { 
    std::getline(is, i.title);
    is >> i.chapters >> i.review >> i.price;
    is.ignore(4096, '\n'); // ignore through end of line.
    return is;
}

// create a vector of items from a stream of items:
std::vector<item> items((std::istream_iterator<item>(myfile)), 
                         std::istream_iterator<item>()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T00:51:01.927

你应该像这样构造它：

```
std::ifstream myfile("filename.dat");
std::string line;

while (getline(myfile, line))
{

    // you can use std::string::find(), std::string::at(), std::string::substr
    // to split the line into the necessary pieces

} 
```

然后，您可以使用 Jerry coffins 答案将每个部分保存在`vector<item>`.

# java - 生成 0000 到 9999 之间的随机数

> ID：14844477
> 
> 赞同：0
> 
> 时间：2013-02-13T00:30:52.373
> 
> 标签：java

我需要生成一个从 0000 到 9999 的 4 位数字，但我似乎做不到。我有这段代码，但它有时会生成 762，我不能让它这样做。我确实需要使用这些方法来生成它。

```
private java.util.Random rndGenerator = new java.util.Random();
private int randomValue;
public final static int NUMBER_OF_VALUES = 9999;

public GuessRandomValue() {
    randomValue = rndGenerator.nextInt(NUMBER_OF_VALUES);
}

public void setAnswer() {
    randomValue = rndGenerator.nextInt(NUMBER_OF_VALUES);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T00:34:05.197

您只需要使用表达式格式化您的随机值

```
String.format("%04d", randomValue); 
```

如果`randomValue`是 762，则调用`String.format`返回“0762”，根据需要。

* * *

编辑：回应下面的评论

请留下`randomValue`整数。您只想将此代码用于用户交互，即格式化。所以要打印`randomValue`你会使用

```
System.out.printf("%04d\n", randomValue); 
```

如果程序的任何部分需要保留字符串以供用户交互，则应该使用`String.format`，但无需更改存储方式`randomValue`。

要比较用户输入的内容`randomValue`，您可以使用[Integer.parseInt](http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html#parseInt%28java.lang.String,%20int%29)。所以你可以使用

```
int testValue;
try {
    testValue = Integer.parseInt(inputLine, 10);
} catch (NumberFormatException ex) {
    // The user typed in something that isn't a number.  Alert the user somehow, and make
    // him or her try again
} 
```

将输入的值作为 int 获取，`testValue`并`randomValue`与 == 进行比较。

# php - Magento 网格视图数量框以显示最小数量

> ID：14844487
> 
> 赞同：0
> 
> 时间：2013-02-13T00:32:10.377
> 
> 标签：php, magento

我想在网格类别视图中添加到购物车按钮旁边有一个数量框，其中包含产品最小数量。我尝试使用下面的代码，它可以工作，只是该字段始终显示“0”。

我怎样才能使该字段显示产品的最小数量而不仅仅是“0”。

这是我用来修改 list.phtml 文件的：

```
 <?php if(!$_product->isGrouped()): ?>

                        <label for="qty"><?php echo $this->__('Qty:') ?></label>                                 
                                <input name="qty" type="text" class="input-text qty" id="qty" maxlength="12" value="<?php echo $this->getProductDefaultQty() * 1 ?>" title="<?php echo $this->__('Qty') ?>" class="input-text qty" />

                        <?php endif; ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T08:13:09.917

函数 getProductDefaultQty 仅在视图块上可用，在列表中不可用:(

您可以使用客户模块重写 Mage_Catalog_Block_Product_List 类，并将此函数包含在模块的类中。

为了这个答案，我将调用您的模块 Nat_Quantity （如果您愿意，可以更改它）

**第 1 步：创建一个模块 xml**

在 /app/etc/modules/ 下创建文件 Nat_Quantity.xml。它应该看起来像（注意 codePool 有一个大写的 P）。

```
<?xml version="1.0"?>
<config>
    <modules>
        <Nat_Quantity>
            <active>true</active>
            <codePool>local</codePool>
            <depends>
                <Mage_Catalog />
            </depends>
        </Nat_Quantity>
    </modules>
</config> 
```

**第 2 步：创建模块文件夹结构**

在 /app/code/local/ 下创建文件夹 Nat，然后在其中创建文件夹 Quantity。在此 Quantity 文件夹下创建以下两个文件夹，etc 和 Block。（注意等是小写）

**第 3 步：创建您的 config.xml**

在 /app/code/local/Nat/Quantity/etc 下创建一个 config.xml 文件，该文件如下所示：

```
<?xml version="1.0"?>
<config>
    <modules>
        <Nat_Quantity>
            <version>1.0.0</version>
        </Nat_Quantity>
    </modules>
    <global>
        <blocks>
            <catalog>
                <rewrite>
                    <product_list>Nat_Quantity_Block_Product_List</product_list>
                </rewrite>
            </catalog>
        </blocks>
    </global>
</config> 
```

**第 3 步：创建您的区块**

在 /app/code/local/Nat/Quantity/Block/Product 下创建一个 List.php，它看起来如下：

```
<?php
class Nat_Quantity_Block_Product_List extends Mage_Catalog_Block_Product_List {
    /**
     * Get default qty - either as preconfigured, or as 1.
     * Also restricts it by minimal qty.
     *
     * @param null|Mage_Catalog_Model_Product
     *
     * @return int|float
     */
    public function getProductDefaultQty($product)
    {
        $qty = $this->getMinimalQty($product);
        $config = $product->getPreconfiguredValues();
        $configQty = $config->getQty();
        if ($configQty > $qty) {
            $qty = $configQty;
        }

        return $qty;
    }
} 
```

这应该允许您在列表模板中调用 $this->getProductDefaultQty($product)。您需要将验证产品传递给函数，或者您可以传递产品 ID，然后将产品加载到函数中

```
$product = Mage::getModel('catalog/product')->load($productId); 
```

# javascript - 单击复选框后如何访问jsTree节点属性？

> ID：14844489
> 
> 赞同：3
> 
> 时间：2013-02-13T00:32:16.667
> 
> 标签：javascript, jquery, jstree

我想知道单击节点的复选框后如何访问 jsTree 节点属性。

`$("#jstree").bind('check_node.jstree', function(e, data) {`单击复选框后，我使用触发我的代码。

现在我想访问节点的属性。但我不知道如何使用`data`对象，所以我可以获取属性。因此，假设在我的 jsfiddle 中，我想显示属性的值以及“单击并检查”的文本

您能否解释一下如何以及为什么？我迷失了如何引用 jsTree/jQuery 对象。

[jsfiddle 工作示例](http://jsfiddle.net/radek/T6Hbq/20/)

**==== 更新**

在 jsTree 数据定义中可以定义节点属性。我想以编程方式检查属性，然后根据属性触发不同的代码。在我的情况下 ， **“日志”**属性。

```
data = [
    {
        "data": "Basics",
        "attr":{"log":"shared"},
    },
    {
        "data": "All",
        "attr":{"log":"bdrs"},
    }
] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T04:07:55.523

你可以这样做：

```
$("#jstree").bind('check_node.jstree', function(e, data) {
    $("#list").append('<BR>clicked and ' + node_is_check(data));
    var node = data.rslt.obj;
    console.log( node.attr("log") ); //shows bdrs when All is checked
}); 
```

更新小提琴：[jsFiddle Demo](http://jsfiddle.net/T6Hbq/22/)

你的意思是这样的吗

# php - 锚点中的 if 语句

> ID：14844491
> 
> 赞同：0
> 
> 时间：2013-02-13T00:32:34.333
> 
> 标签：php, wordpress, anchor

我正在尝试将 if 语句添加到这样的锚点。

```
 <div class="box-button">
            <a href="
            <?php $header_button = of_get_option('header_text'); ?>
                        <?php if($header_button){?>
                      <?php echo of_get_option('header_text'); ?>
                    <?php } else { ?>
        #                                   
        <?php } ?>

            " class="button">Connect Now</a>
        </div> 
```

我可以单击主页上的按钮，然后我将链接到“#”，因此好像 wordpress 无法识别为主题选项。我的语法有问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T00:39:37.010

您知道您可以在 html 之外执行逻辑，然后将结果插入到 href

```
<?php 
$header_button = of_get_option('header_text');

$link = (!empty($header_button)?$header_button:'#');
?>

<div class="box-button">
    <a href="<?php echo $link;?>" class="button">Connect Now</a>
</div> 
```

# couchdb - 在 CouchDB _changes 响应中，为什么“更改”元素是数组？

> ID：14844494
> 
> 赞同：5
> 
> 时间：2013-02-13T00:32:39.990
> 
> 标签：couchdb

CouchDB 对 _changes 请求的响应以这种格式返回： {"seq":12,"id":"foo","changes":[{"rev":"1-23202479633c2b380f79507a776743d5"}]}

我的问题 - 为什么“更改”元素是一个数组？什么情况下会在更改元素中返回多个项目？我从来没有在网上看到过一个包含超过一个项目的示例，而且根据我自己的经验，我只看到过一个项目。

我正在编写与更改交互的代码，并且我想了解如果实际上有多个项目该怎么办。

谢谢，迈克

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-13T02:06:24.403

changes 元素是一个数组，用于反映文档的所有现有修订叶。如您所知，CouchDB 不会完全删除文档，而是设置墓碑以防止他在从具有尚未删除的旧版本的源复制后意外复活。由于复制后发生的更新冲突，也可能有多个叶子。例如：

1.  Mike 在数据库 A 中创建了文档并将他复制到数据库 B：

    {"结果":[ {"seq":1,"id":"thing","changes":[{"rev":"1-967a00dff5e02add41819138abb3284d"}]} ], "last_seq":1}

2.  John 已收到您的文档并在数据库 B 中更新了他：

    {"结果":[ {"seq":2,"id":"thing","changes":[{"rev":"2-7051cbe5c8faecd085a3fa619e6e6337"}]} ], "last_seq":2}

3.  但与此同时，Mike 也在数据库 A 中为他做了一些更改（忘记清理数据或添加一些重要的东西）：

    {"结果":[ {"seq":2,"id":"thing","changes":[{"rev":"2-13839535feb250d3d8290998b8af17c3"}]} ], "last_seq":2}

4.  并再次将他复制到数据库 B。John 收到处于冲突状态的文档，并通过查看带有查询参数的更改提要`style=all_docs`查看下一个结果：

    {"结果":[ {"seq":3,"id":"thing","changes":[{"rev":"2-7051cbe5c8faecd085a3fa619e6e6337"},{"rev":"2-13839535feb250d3d8290998b8af17c3"}] } ]，“last_seq”：3}

    虽然直接访问文档会从获胜修订版（具有更高的 seq 号或只是最新的）返回他的数据，但他可能会有许多冲突的修订版（想象在十几个相互复制的数据库中并发写入单个文档）

5.  现在 John 决定解决这个冲突并更新实际修订，但放弃另一个：

    {"结果":[ {"seq":4,"id":"thing","changes":[{"rev":"3-2502757951d6d7f61ccf48fa54b7e13c"},{"rev":"2-13839535feb250d3d8290998b8af17c3"}] } ]，“last_seq”：4}

6.  等等，迈克的修订版还在吗？为什么？约翰惊慌失措地删除了他的文件：

    {"结果":[ {"seq":5,"id":"thing","changes":[{"rev":"2-13839535feb250d3d8290998b8af17c3"}{"rev":"4-149c48caacb32c535ee201b6f02b027b"}]} ], "last_seq":5}

    现在他的文档版本已被删除，但他可以访问 Mike 的文档。

7.  将 John 的更改从数据库 B 复制到数据库 A 都会带来墓碑：

    {"结果":[ {"seq":3,"id":"thing","changes":[{"rev":"3-2adcbbf57013d8634c2362630697aab6"},{"rev":"4-149c48caacb32c535ee201b6f02b027b"}] } ]，“last_seq”：3}

    为什么这样？因为这是关于他的数据“演变”的文档历史：在现实世界中，您的文档可能有许多中间叶子分布在大量数据库中，并且为了防止由于数据复制过程而导致无声数据覆盖，CouchDB 保留每个叶子以帮助解决此类冲突。您可以在 CouchDB wiki 中找到更多且可能更好的关于[复制和冲突](http://wiki.apache.org/couchdb/Replication_and_conflicts)的解释。那里也描述了更改提要[查询参数。](http://wiki.apache.org/couchdb/HTTP_database_API#Changes)

# jquery - 如何使用Jquery从输入中动态创建带有附加文本的ul li

> ID：14844498
> 
> 赞同：4
> 
> 时间：2013-02-13T00:33:09.267
> 
> 标签：jquery, dynamic, html-lists, append

我有一个带有添加按钮的文本输入表单。当您单击添加按钮时，它会从输入中获取文本并将其放在另一个 div 中。我需要它位于动态创建的无序列表中，该列表还将输入中的文本放入其中。我需要输出看起来像

`<ul> <li>text from input</li> <li>text from input again</li> </ul>`

我不确定如何正确放置附加以创建列表并将文本附加在其中。我可以轻松获取文本值并将其输出到列表中。关于追加的任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-13T00:43:44.970

**HTML：**

```
<input type="test" id="inputName" />
<button id="btnName">Click me!</button>

<ul class="justList"></ul> 
```

**JS：**

```
$('#btnName').click(function(){
    var text = $('#inputName').val();
    if(text.length){
        $('<li />', {html: text}).appendTo('ul.justList')
    }
}); 
```

这是演示：

[http://jsfiddle.net/J5nCS/](http://jsfiddle.net/J5nCS/)

更新：

为您的意见：

这是网址：

[http://jsfiddle.net/J5nCS/1/](http://jsfiddle.net/J5nCS/1/)

```
$('#btnName').click(function(){
    var text = $('#inputName').val() + '<button>x</button>';
    if(text.length){
        $('<li />', {html: text}).appendTo('ul.justList')
    }
});

$('ul').on('click','button' , function(el){
    $(this).parent().remove()
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T00:38:49.303

像这样的东西？

```
$("#yourbutton").click(function() {
    //uncomment this if you want to wipe the list before adding the LI node:
    //$("#yourUL").empty();

    $("#yourUL").append("<li>" + $("#yourinputtextbox").val() + "</li>");
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T00:39:29.180

你正在寻找 jQuery`appendTo()`

```
$("button").click(function(){
    $("<li>"+$("input").val()+"</li>").appendTo("ul");
}); 
```

演示：http: [//jsfiddle.net/u74Ag/](http://jsfiddle.net/u74Ag/)

* * *

这可能有用

*   [http://api.jquery.com/appendTo/](http://api.jquery.com/appendTo/)
*   [http://api.jquery.com/append/](http://api.jquery.com/append/)

# c# - Authentication and RequireRole with ServiceStack

> ID：14844502
> 
> 赞同：1
> 
> 时间：2013-02-13T00:33:35.637
> 
> 标签：c#, c#-4.0, asp.net-mvc-4, servicestack

I'm trying to create a simple web service with ServiceStack. On the server (service) side, I've first created a user "administrator" and assigned it the "Admin" role. I'm using the ServiceStack built-in credentials authentication and I it authenticates nicely. However, any subsequent call to any webservice that is decorated with the [Authenticate] attribute returns a the following error:

*No configuration was added for OAuth provider 'basic'*

FYI: the database is RavenDb - using ServiceStack.Authentication.RavenDb. I also registered a MemoryCacheClient in the App_Start.AppHost.Configure(). Let me know if you need to see all code in App_Start.AppHost class.

Server Code (excerpt):

```
namespace MyTest 
{
    [Route("/hello")]
    [Route("/hello/{Name}")]
    [Authenticate]
    public class Hello
    {
        public string Name { get; set; }
    }

    public class HelloResponse
    {
        public string Result { get; set; }
    }

    public class HelloService : Service
    {
        public IUserAuthRepository UserAuthRepo { get; set; }

        public object Any(Hello request)
        {
            return new HelloResponse { Result = "Hello, " + request.Name };
        }
    }
}
```

Client side:

```
var client = new JsonServiceClient("http://127.0.0.1:65385/auth/credentials?format=json");
var auth   = new Auth { UserName = "administrator", Password = "12345" };

var authResponse = client.Post(auth);

if (authResponse.ResponseStatus.ErrorCode == null)
{
    client = new JsonServiceClient("http://127.0.0.1:65385/hello");
    client.UserName = "administrator";
    client.Password = "12345";

    // When sending the request - it returns "Not Found"
    var helloResponse = client.Send(new Hello { Name = "John" });
}
```

**EDIT:**
The web.config of my services looks exactly like written in section 2a of [the Hello World tutorial](http://www.servicestack.net/ServiceStack.Hello/)

Here's the configuration of my AppHost:

```
public override void Configure(Funq.Container container)
{
    container.Register(new MemoryCacheClient { FlushOnDispose = false });
    container.Register(new EmbeddableDocumentStore { DataDirectory = "Data" }.Initialize());

    ConfigureAuth(container);
}

private void ConfigureAuth(Funq.Container container)
{
    var appSettings = new AppSettings();

    Plugins.Add(new AuthFeature(() => new CustomUserSession(),
        new IAuthProvider[] {
            new CredentialsAuthProvider(appSettings)}));

    Plugins.Add(new RegistrationFeature());

    container.Register(
        new RavenUserAuthRepository(c.Resolve()));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T05:29:44.813

Firstly you should look at [ServiceStack's AuthTests](https://github.com/ServiceStack/ServiceStack/blob/master/tests/ServiceStack.WebHost.Endpoints.Tests/AuthTests.cs) for some examples that test authentication with [ServiceStack's C# Service Clients](https://github.com/ServiceStack/ServiceStack/wiki/C#-client).

You're passing the wrong urls in your C# ServiceStack client, i.e. you should only pass in the **Base URI** where ServiceStack is hosted, e.g:

```
var client = new JsonServiceClient(
    "http://127.0.0.1:65385/auth/credentials?format=json");
var client = new JsonServiceClient("http://127.0.0.1:65385/hello"); 
```

Should instead only be:

```
var client = new JsonServiceClient("http://127.0.0.1:65385/");
var client = new JsonServiceClient("http://127.0.0.1:65385/"); 
```

You should also never put **?format=json** when using a ServiceStack C# ServiceClient like JsonServiceClient, since the format is already implied in the client which ensures JSON is returned by sending the `Accept: application/json` HTTP Header upon every request.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T13:32:32.107

OK, found out what the problem was: The [Authenticate], [RequiredRole] and [RequiredPermission] attributes work with Basic Authentication (Authenticate works with Digest Authentication as well). So if you want to use any of those attributes, you must make sure that you have added the BasicAuthProvider to the list of IAuthProviders when setting up the AuthFeature as a plugin. So,

```
Plugins.Add(new AuthFeature(() => new CustomUserSession(),
    new IAuthProvider[] {
        new CredentialsAuthProvider(appSettings)}));
```

must be

```
Plugins.Add(new AuthFeature(() => new AuthUserSession(),
    new IAuthProvider[] {
        new CredentialsAuthProvider(appSettings),
        new BasicAuthProvider() 
    }));
```

I still have to send username and password in clear text with every call though ...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T01:44:07.880

Make sure you register an ICacheClient in your ServiceStack application and then you shouldn't have to send the user name and password with each request. Your client side should be able to handle storing a cookie without any effort on your end.

# spring - 在旧 Petclinic 示例中使用会话

> ID：14844503
> 
> 赞同：0
> 
> 时间：2013-02-13T00:33:38.927
> 
> 标签：spring, spring-mvc

我正在尝试使用旧的 Petclinic 示例，我注意到 SimpleJdbcClinic 中的 vets ArrayList 在会话期间存在。似乎它应该只存在于请求中，因为我没有看到任何将其放入会话上下文的注释。有人可以指出我无法理解的内容吗？

这是兽医类：@XmlRootElement public class Vets {

```
 private List<Vet> vets;

   @XmlElement
   public List<Vet> getVetList() {
      if (vets == null) {
         vets = new ArrayList<Vet>();
       }
      return vets;
   }

  } 
```

服务：

```
@Service
@ManagedResource("petclinic:type=Clinic")
public class SimpleJdbcClinic implements Clinic, SimpleJdbcClinicMBean {

    private SimpleJdbcTemplate simpleJdbcTemplate;

    private SimpleJdbcInsert insertOwner;
    private SimpleJdbcInsert insertPet;
    private SimpleJdbcInsert insertVisit;

    private final List<Vet> vets = new ArrayList<Vet>();
       :
       :
    @Transactional(readOnly = true)
    public Collection<Vet> getVets() throws DataAccessException {
         synchronized (this.vets) {
             if (this.vets.isEmpty()) {
                 refreshVetsCache();
             }
             return this.vets;
         }
    }
} 
```

控制器映射：

```
 @RequestMapping("/vets")
 public ModelMap vetsHandler() {
     Vets vets = new Vets();
     vets.getVetList().addAll(this.clinic.getVets());
     return new ModelMap(vets);
  } 
```

一旦创建了 vets 列表，它就会在多个请求中存活下来。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T00:46:31.403

我认为它通过将所有兽医存储在`private final List<Vet> vets`. 变量也是`vets`单例的属性`@Service SimpleJdbcClinic`

# symfony - Symfony 2 错误处理异常与 flashbag

> ID：14844504
> 
> 赞同：0
> 
> 时间：2013-02-13T00:33:41.880
> 
> 标签：symfony, error-handling

我看到，在大多数 Symfony 2 示例中，当记录不存在时，Symfony 2 会抛出异常。我发现这种方法对最终用户不友好。为什么有人更喜欢抛出异常而不是在 flashbag 中添加一些错误消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T03:45:00.457

在示例中，它通常会引发异常

```
throw $this->createNotFoundException('Message'); 
```

它将用户重定向到 404 错误页面。

在 CMS 中，如果未找到记录，您可能希望向用户显示 404 页面，而不是向闪存包添加错误并将它们重定向到主页。

我想这取决于您的应用程序需求以及您希望如何处理它。

# c++ - 如何在c++中使用数组作为函数的输入

> ID：14844508
> 
> 赞同：-3
> 
> 时间：2013-02-13T00:34:04.263
> 
> 标签：c++

在 C++ 中，是否可以将数组作为函数的输入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T00:35:42.423

很可能你可以用向量来完成这一切。

```
#include <vector>

std::vector<int> function_name(const std::vector<int>& A, const std::vector<int>& B); 
```

# android - 如何根据 SurfaceView 中的变量切换活动？

> ID：14844510
> 
> 赞同：1
> 
> 时间：2013-02-13T00:34:10.427
> 
> 标签：android, android-intent, android-activity, switch-statement

我正在尝试从 SurfaceView 调用我的第二个活动，但未能成功，有很多示例如何从 MainActivity 类启动意图，但没有示例如何使用不使用方法从 SurfaceView 调用它设置监听器的任何按钮。

我试图在 SurfaceView 上抛出这样的东西，可以被其他类调用。但这只是行不通..任何建议都会很好。我确定这不是正确的方法，因为此代码在放置在 SurfaceView 中时变得无法识别，任何建议都会很好。干杯!

```
public void switchActivity2()
{
        Intent i = new Intent(MainActivity.this, Activity2.class);
        startActivity(i);
} 
```

# java - 使用索引从 Map 中检索值

> ID：14844512
> 
> 赞同：0
> 
> 时间：2013-02-13T00:34:34.107
> 
> 标签：java, hashmap, concurrenthashmap

我有一张类似这样的地图-

`ConcurrentHashMap<String, ConcurrentHashMap<String, String>> tableList`

这将有这样的数据-

示例示例-

```
{table1={DRIVER=oracle.jdbc.driver.OracleDriver, PASSWORD=stage_cs_user, URL=jdbc_url, SUFFIX=xt1, SQL=sql, USER=user}, table2={DRIVER=driver_name, PASSWORD=pass, URL=jdbc_url2, SUFFIX=xt2, SQL=sql2, USER=user}} 
```

我正在尝试遍历上面的地图-

```
class Task implements Runnable {

private Connection[] dbConnection = null;
private final ConcurrentHashMap<String, ConcurrentHashMap<String, String>> tableLists;

public Task(ConcurrentHashMap<String, ConcurrentHashMap<String, String>> tableNames) {
    this.tableLists = tableNames;
}

@Override
public void run() {

for (int i = 0; i < tableLists.size(); i++) {

dbConnection[i] = getDBConnection(tableLists.get(i).get("URL"), tableLists.get(i).get("USERNAME"), tableLists.get(i).get("PASSWORD"), tableLists.get(i).get("DRIVER"));
    }
  }
} 
```

它给了我`Null Pointer Exception`在`get call`. 我在这里有什么遗漏吗？如果是，我该如何解决？因为我需要`dbConnection`根据大小分配 0 和 1 `tableLists`。

**更新代码：-**

做出这样的改变后——

```
private Connection[] dbConnection = null;

        int j=0;
        for (Map<String, String> map : tableLists.values()) {

            dbConnection[j] = getDBConnection(map.get("URL"), map.get("USER"), map.get("PASSWORD"), map.get("DRIVER"));
            callableStatement[j] = dbConnection[j].prepareCall(map.get("SQL"));

            methods[j] = getRequiredMethods(map.get("SUFFIX"));
            j++;
        }

private Connection getDBConnection(String url, String username, String password, String driver) {

    Connection dbConnection = null;

    try {
        Class.forName(driver);
        dbConnection = DriverManager.getConnection(url, username, password);
    }

    return dbConnection;
} 
```

它再次抛出 NPE，但这一次它在建立连接并返回时立即抛出。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T00:42:30.650

该`Map`接口有一个`Key`，而不是一个索引。要获取所有条目，请尝试

```
int i=0;
dbConnection = new DbConnection[tableLists.size()];
for (Map<String, String> map : tableLists.values()) {
  dbConnection[i] = getDBConnection(
    map.get("URL"), 
    map.get("USER"), 
    map.get("PASSWORD"), 
    map.get("DRIVER"));
  i++;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T00:41:20.110

你不应该得到像

```
tableLists.get(0);
tableLists.get(1); 
```

由于 Map 不是基于索引的集合，它是基于键的。你应该得到像

```
tableLists.get("table1");
tableLists.get("table2"); 
```

因为您的键是“table1”和“table2”，而不是 0 和 1。

***编辑：*** 所以你可以修改你的来源如下。

```
int i = 0;
for (String mapkey : tableLists.keySet()) {
    dbConnection[i] = getDBConnection(
            tableLists.get(mapkey).get("URL"), 
            tableLists.get(mapkey).get("USERNAME"),
            tableLists.get(mapkey).get("PASSWORD"),
            tableLists.get(mapkey).get("DRIVER"));
    i++;
} 
```

# c++ - 兼容 mpi 的 biginteger 库（消息传递接口）

> ID：14844513
> 
> 赞同：0
> 
> 时间：2013-02-13T00:34:33.823
> 
> 标签：c++, mpi, biginteger

我正在寻找一个与标准`BigInteger`的常见嫌疑人兼容的库`Message Passing Interface`，例如`MPI::COMM_WORLD.Send`and `MPI::COMM_WORLD.Recv`。

不幸的是 MPI 也代表*多精度整数*，因此大多数搜索结果实际上不匹配。使用类似的查询用谷歌搜索这个的几次尝试没有揭示任何实现，但肯定有人已经这样做了。所以基本上问题是：有人知道与 MPI 兼容的 mpi 实现吗？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-02-16T21:04:51.487

理论上任何大整数库都可以兼容，但有一些注意事项。

大整数库不是 MPI 的标准[数据类型](http://linux.die.net/man/3/mpi_byte)之一，MPI_INT MPI_DOUBLE exc exc ...

一种方法是将您的 biginteger 序列化为字节，将其作为 MPI_BYTE 发送/接收，然后将其转换回来

# php - 如何计算从一个日期到另一个日期的长天数并使用 CI 插入数据库表

> ID：14844514
> 
> 赞同：1
> 
> 时间：2013-02-13T00:34:38.313
> 
> 标签：php, mysql, codeigniter, strtotime

我在 MySQL 中的表

我设计了“survei_pohon”表，并设置了我的“submit_date”列具有相同的值（默认值，例如：2013-02-28），这是我的下表：

```
id          survey_date           submit_date         long_day
 1           2013-02-18           2013-02-28             10
 2           2013-02-21           2013-02-28             10
 3           2013-02-25           2013-02-28             10 
```

“id”列是“整数”类型，“survey_date”是“日期”类型，“submit_date”是“日期”类型，“long_day”是“整数”类型。

这是我的模型：`

```
function olah(){
$tanggal_survei="SELECT survey_date FROM survei_pohon";
$tanggal_sekarang="SELECT submit_date FROM survei_pohon";
$lama_hari="SELECT long_day FROM survei_pohon";

    $result = @mysql_query($tanggal_survei);
    $t = mysql_fetch_array($result);

    $results = @mysql_query($tanggal_sekarang);
    $u = mysql_fetch_array($results);

    $lama_hari = @mysql_fetch_array($lama_hari);

    $start = strtotime($t['tanggal_survei']);
    $end = strtotime($u['tanggal_sekarang']);

    $lama_hari = ($end - $start) / (60 * 60 * 24);

    $this->db->set('long_day', $lama_hari);
    $this->db->update('survei_pohon');        
} 
```

}?>`

我对“survei_pohon”表的期望是

```
id          survey_date           submit_date        long_day
 1           2013-02-18           2013-02-28             10
 2           2013-02-21           2013-02-28              7
 3           2013-02-25           2013-02-28              3 
```

我猜我的模型代码有问题。但我不知道如何修复该代码。我期待着你的帮助。感谢您的帮助，这对我来说很难。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T00:49:19.677

这是更新数据库的 MySQL 解决方案。

```
UPDATE survei_pohon SET long_day = submit_date - survey_date 
```

不确定您是否真的需要存储该字段，因为它是对其他字段的计算——通常将这些字段用于 UI 目的。在这种情况下，您可以将其包含在您的 SELECT 语句中：

```
SELECT *, submit_date - survey_date long_day FROM survei_pohon 
```

我知道这并没有解决如何使用您的代码，但似乎更容易一些。

这是[SQL 小提琴](http://sqlfiddle.com/#!2/9d040f/1)。

# mysql - MySQL - 想要从两个 SELECT 语句中减去两个 SUM() 值

> ID：14844519
> 
> 赞同：3
> 
> 时间：2013-02-13T00:35:09.143
> 
> 标签：mysql, sql

我希望能够从两个 SELECT 查询中获取我在 SUM() 中生成的两个值并减去这些值以获得结果（OutstandingFunds）。

这是我的两个 SELECT 查询：

声明（1）：

```
SELECT SUM(Cf.Amount) AS ClearedFunds
FROM (
SELECT Amount FROM PAYMENT1 WHERE `Status` = "Cleared"
UNION ALL
SELECT Amount FROM PAYMENT2 WHERE `Status` = "Cleared"
UNION ALL
SELECT Amount FROM PAYMENT3 WHERE `Status` = "Cleared") AS Cf; 
```

声明（2）：

```
SELECT SUM(Price) AS TotalSales
FROM PROPERTY
WHERE Status = “Sold”; 
```

感谢您的时间

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T00:43:26.787

如果您不需要显示总销售额和清算资金的单独小计，您可以这样做：

```
SELECT SUM(Total.`Price`) AS ClearedFunds
FROM (
    SELECT `Price` FROM PROPERTY WHERE `Status` = 'Sold'
    UNION ALL
    SELECT (`Amount` * -1) AS `Price` FROM PAYMENT1 WHERE `Status` = 'Cleared'
    UNION ALL
    SELECT (`Amount` * -1) AS `Price` FROM PAYMENT2 WHERE `Status` = 'Cleared'
    UNION ALL
    SELECT (`Amount` * -1) AS `Price` FROM PAYMENT3 WHERE `Status` = 'Cleared'
) AS Total; 
```

我假设你想从这里的总销售额中减去清算资金。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T01:07:35.497

你几乎在那里......这是工作`SQL`：

```
SELECT (SELECT SUM(Cf.Amount) AS ClearedFunds
FROM (
SELECT Amount FROM PAYMENT1 WHERE `Status` = "Cleared"
UNION ALL
SELECT Amount FROM PAYMENT2 WHERE `Status` = "Cleared"
UNION ALL
SELECT Amount FROM PAYMENT3 WHERE `Status` = "Cleared") as Cf)

- (SELECT SUM(Price) AS TotalSales
FROM PROPERTY
WHERE Status = "Sold") as Result; 
```

这是 SQL Fiddle，以便您可以使用测试数据：[http ://sqlfiddle.com/#!2/18677/11](http://sqlfiddle.com/#!2/18677/11)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T00:43:42.933

您可以使用`SELECT ... INTO ...`, 在您的情况下：

```
SELECT SUM(Cf.Amount) AS ClearedFunds
FROM (
SELECT Amount FROM PAYMENT1 WHERE `Status` = "Cleared"
UNION ALL
SELECT Amount FROM PAYMENT2 WHERE `Status` = "Cleared"
UNION ALL
SELECT Amount FROM PAYMENT3 WHERE `Status` = "Cleared") INTO @cf;

SELECT SUM(Price) AS TotalSales
FROM PROPERTY
WHERE Status = “Sold” INTO @ts; 
```

然后您可以在任何其他查询中减去或使用它们，如下所示：

```
SELECT @ts - @cf; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T00:45:54.383

你在找这个吗？

```
SELECT C.ClearedFunds - P.TotalSales
FROM (
SELECT SUM(Cf.Amount) AS ClearedFunds
FROM (
SELECT Amount FROM PAYMENT1 WHERE `Status` = "Cleared"
UNION ALL
SELECT Amount FROM PAYMENT2 WHERE `Status` = "Cleared"
UNION ALL
SELECT Amount FROM PAYMENT3 WHERE `Status` = "Cleared") AS Cf) C,
(SELECT SUM(Price) AS TotalSales
FROM PROPERTY
WHERE Status = “Sold”) P  
; 
```

# java - Play Framework 路由虽然定义正确但无法正常工作

> ID：14844522
> 
> 赞同：1
> 
> 时间：2013-02-13T00:35:22.293
> 
> 标签：java, playframework, playframework-2.0

我在 Play 的路线中定义了这个简单的路线：

```
POST /test/post/$id<[0-9]+>  controllers.Test.post(id: Long) 
```

这是`Test.post`方法的代码：

```
public static Result post(long id)
{
    return ok("working");
} 
```

同一控制器中的另一条路线`POST /test controllers.Test.index()`工作正常。但是，每当我访问时`http://localhost:9000/test/post/3`，我会立即在 Firefox 中收到“连接重置”错误，而在 google chrome 中我会收到“空响应”错误。所有其他路线都正常工作。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T06:17:29.227

在您的 Action 中使用`Long`对象而不是本机类型：`long`

```
public static Result post(Long id)
{
    return ok("working");
} 
```

# android - Spinner 的 getSelectedItemPosition() 方法返回意外结果

> ID：14844526
> 
> 赞同：1
> 
> 时间：2013-02-13T00:35:48.887
> 
> 标签：android, spinner

我的应用程序有一个微调器，其中包含四个条目。我需要能够检索选择了哪些标签，而不是实际标签本身。以下是我执行此操作的部分代码：

```
// Set up the activity's Spinner
    spinnerAdapter = ArrayAdapter.createFromResource(this, R.array.pay_periods, android.R.layout.simple_spinner_item);
    spinnerAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    Spinner s = (Spinner) findViewById(R.id.main_spinner_payperiod);
    s.setAdapter(spinnerAdapter); 
```

在后面的方法中：

```
switch(payPeriod.getSelectedItemPosition()){
    case(0): // Daily
        dailyAllowance = Float.parseFloat(payment.getText().toString());
    case(1): // Weekly
        dailyAllowance = (Float.parseFloat(payment.getText().toString())) / 7;
    case(2): // Bi-weekly
        dailyAllowance = (Float.parseFloat(payment.getText().toString())) / 14;
    case(3): // 30 days
        dailyAllowance = (Float.parseFloat(payment.getText().toString())) / 30;
    case(Spinner.INVALID_POSITION):
        dailyAllowance = 0;
    default:
        dailyAllowance = 42;    // Junk value, for debugging purposes
    } 
```

无论我选择了 Spinner 的哪个项目，此方法似乎总是返回 42。谁能帮我弄清楚为什么？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T00:38:57.307

将 a`break`放入您的 switch-case 条件中

```
switch(payPeriod.getSelectedItemPosition()) { 

    case(0): // Daily
        dailyAllowance = Float.parseFloat(payment.getText().toString());
    break;

    case(1): // Weekly
        dailyAllowance = (Float.parseFloat(payment.getText().toString())) / 7;
    break;

    case(2): // Bi-weekly
        dailyAllowance = (Float.parseFloat(payment.getText().toString())) / 14;
    break;

    case(3): // 30 days
        dailyAllowance = (Float.parseFloat(payment.getText().toString())) / 30;
    break;

    case(Spinner.INVALID_POSITION):
        dailyAllowance = 0;
    break;
    default:
        dailyAllowance = 42;    // Junk value, for debugging purposes
    break;
} 
```

在 switch-case 条件中省略`break`可能会导致错误的行为。如果选择了`case`（没有`break`），流程仍然继续并且`default`条件总是被执行。

# django - Django Admin Pages 使我的模型无法点击

> ID：14844530
> 
> 赞同：6
> 
> 时间：2013-02-13T00:36:28.167
> 
> 标签：django, django-models, django-admin

出于某种原因，我的 /admin 页面使我定义的模型不可编辑。这是在我使用 apache 和 postgres 部署的服务器上。我以超级用户身份登录，并显示如下链接：

![为什么](../Images/b8a5eb095c126731a16c2c284e0013cf.png)

如果我在连接到 postgres 的开发服务器中本地查看相同的代码，它看起来像这样：

![在此处输入图像描述](../Images/604aa47749ea9fad7678cdb770ff8206.png)

知道是什么原因造成的吗？

** 更新 **

所以它并不总是被阻止。我今天登录并且可以访问一些操作（我从我的数据库中清除了一些虚假的电子邮件请求），但是在删除了一些行之后它又回到了只读状态。

仍然不知道是什么原因造成的。

home.models.py：

```
from django.db import models
from django import forms
from django.utils import timezone

class EmailRequest(models.Model):
    email = models.EmailField()
    created_date = models.DateTimeField(default=timezone.now())

class EmailRequestForm(forms.Form):
    email = forms.EmailField() 
```

home.admin.py：

```
from django.contrib import admin
from home.models import EmailRequest

class EmailRequestAdmin(admin.ModelAdmin):
    list_display = ('email', 'created_date')

admin.site.register(EmailRequest, EmailRequestAdmin) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T17:34:16.330

对于您的问题，我没有直接的答案，但我确实有一些个人见解。首先，使用 Bitnami Django 堆栈可能是个问题。我已经用过几次了，以后再也不会了。该设置绝对不是理想的，并且可用的文档太少，无法让您的生活更轻松（等等，这不是使用 Bitnami 堆栈的全部意义吗？）。

我会开始查看您的日志（特别是 apache 错误日志和 postgres 错误日志），我敢打赌那里有一些东西可以为您指明正确的方向。

我确信您正在从本地计算机运行您的开发服务器，该计算机的设置与 Bitnami 堆栈完全不同。更好的解决方案是自己在准系统 Ubuntu 服务器上安装所有内容。然后，您将对设置更加熟悉。

你能做的最好的事情就是去学习使用[Vagrant](http://www.vagrantup.com/)。这将帮助您维护一个与您的 EC2 盒子相同的本地虚拟机实例。您将像 EC2 盒子一样使用 ssh 登录它，并且您将在外部使用它，就像 EC2 盒子一样。开发环境越接近生产环境，这样的调试问题就越容易。

希望这不会让你的生活变得更困难（说真的，如果你让 Vagrant 跑步，你的生活会变得更轻松）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T17:53:59.210

请参阅以下解决方案： [在 DEBUG=False 的管理面板中无法访问模型](https://stackoverflow.com/questions/12780740/no-access-to-models-in-admin-panel-with-debug-false)

引用：

> 好的，我找到了问题的原因。这是由于在管理面板中从具有模型定义的文件中注册我的模型引起的。当我将所有注册移至一个外部文件 admin.py 时，一切正常。

# python - 不需要时是否最好在 Python 中使用“else”？

> ID：14844531
> 
> 赞同：11
> 
> 时间：2013-02-13T00:36:45.973
> 
> 标签：python, coding-style

我实际上将 Python 和 Flask 用于我的开发博客。我知道根据语言的不同，建议在`else`不是强制性的时候使用显式，但我不知道它在 Python 中是如何工作的。

`if`例如，如果语句为真，我有一个带有 a 的函数，它返回一些东西。因此， The`else`是不必要的，因为无论有没有它，执行都会正常继续。

```
def foo(bar):
    if not isinstance(foo, list):
        return "an error"
    else: # not necessary 
        return "something" 
```

所以，我应该像这样使用它，或者像：

```
def foo(bar):
    if not isinstance(foo, list):
        return "an error"

    return "something" 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-13T01:08:07.117

在第一种情况下，Python 将`return None`在函数的末尾添加一个显式 - 即使我们可以看到它并不是真正需要的。在第二种情况下，它没有。

我认为拥有`else:`那里没有任何优势

```
>>> import dis
>>> def f():
...  if 1>2:
...   return 2
...  return 3
... 
>>> def g():
...  if 1>2:
...   return 2
...  else:
...   return 3
... 
>>> dis.dis(f)
  2           0 LOAD_CONST               1 (1)
              3 LOAD_CONST               2 (2)
              6 COMPARE_OP               4 (>)
              9 POP_JUMP_IF_FALSE       16

  3          12 LOAD_CONST               2 (2)
             15 RETURN_VALUE        

  4     >>   16 LOAD_CONST               3 (3)
             19 RETURN_VALUE        
>>> dis.dis(g)
  2           0 LOAD_CONST               1 (1)
              3 LOAD_CONST               2 (2)
              6 COMPARE_OP               4 (>)
              9 POP_JUMP_IF_FALSE       16

  3          12 LOAD_CONST               2 (2)
             15 RETURN_VALUE        

  5     >>   16 LOAD_CONST               3 (3)
             19 RETURN_VALUE        
             20 LOAD_CONST               0 (None)
             23 RETURN_VALUE 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-13T00:44:00.073

这已经在这里讨论过：[If-Else-Return or just if-Return?](https://stackoverflow.com/questions/9191388/if-else-return-or-just-if-return)

从本质上讲，这两种形式在效率方面是等效的，因为机器无论如何都必须进行跳跃。所以它归结为编码风格，你必须自己（或与你的团队）决定。

就个人而言，我更喜欢**else**语句以提高可读性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T00:40:42.780

这真的没什么区别。无论哪种方式都会做同样的事情。

我更喜欢后者，因为它少了一行代码。

Je préfère cette dernière

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-02-02T01:27:41.027

来自[Chromium 的](http://www.chromium.org/developers/coding-style)风格指南：

返回后不要使用else：

```
# Bad
if (foo)
  return 1;
else
   return 2;

# Good
if (foo)
  return 1;
return 2;

return foo ? 1 : 2; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-13T01:07:32.357

我对编程很陌生，在这个问题的上下文中，我被提醒我经常不确定是否应该使用“else”或“elif”，例如，在这样的场景中。

1)

```
if numA < numB:
    print('numA is smaller')
elif numB < numA:
    print('numB is smaller')
else:
    print('both numbers are equal') 
```

2)

```
 if numA < numB:
        print('numA is smaller')
 elif numB < numA:
        print('numB is smaller')
 elif numA == numB:
        print('both numbers are equal') 
```

我认为这不会有很大的不同，还是我错了？我认为，在其他示例中，第二个变体通常可能更“稳健”。

# asp.net - 构建时条件标记

> ID：14844535
> 
> 赞同：2
> 
> 时间：2013-02-13T00:37:11.910
> 
> 标签：asp.net, .net, conditional, markup

我有一个 ASP.NET Web 表单，我不希望根据页面/编译器指令处理标记。例子：

```
<%@ Page ... CompilerOptions="/d:MY_FLAG" %>
<% #if MY_FLAG %> ... <% #endif %>' 
```

我在#if 块中有控件，这些控件引用不包含在构建中的代码隐藏方法，除非设置了类似的#define。问题是，无论我如何实现条件标记，运行时都会检查块中是否存在方法，即使该块不会被渲染。因此，对于一个甚至不存在的控件，如果没有任何方法，就会在运行时引发异常。

我可以根据代码隐藏中的编译器指令在运行时注入标记来解决这个问题。我只是想了解为什么**这**不起作用。

需要明确的是，如果我们将`#if FOO`代码放入标记中，VS 将禁用它，并且不会在构建或运行时以任何方式处理它。我想要相同的标记功能。

我的描述就是这样。以下只是对类似注释的引用。

[此处](https://stackoverflow.com/questions/378982/is-there-an-if-debug-for-asp-net-markup)的注释说您不能在条件代码中重用控件名称。显然这是因为上面的问题 - 编译器会处理控制名称，即使它们不会被使用。

[此页面](http://haacked.com/archive/2007/09/16/conditional-compilation-constants-and-asp.net.aspx)和 K Scott Allen（代码颂）的相关页面描述了条件标记，但不包括此处描述的情况。

[此页面](http://www.codeproject.com/Tips/314227/ASP-net-Conditions-in-Markup-Using-Bound-Data)描述了在运行时做出决定的条件标记。我不希望在运行时做出决定。这就是问题所在——运行时将尝试验证代码隐藏是否支持标记。就我而言，如果标记不“存在”，则不需要这样做。

# powershell - PowerShell cmdlet 参数值选项卡补全

> ID：14844542
> 
> 赞同：12
> 
> 时间：2013-02-13T00:38:26.533
> 
> 标签：powershell, powershell-3.0

如何在 PowerShell 3.0 中为 PowerShell 函数或 cmdlet（如 Get-Service 和 Get-Process）实现参数选项卡完成？

我意识到[ValidateSet](http://technet.microsoft.com/en-us/library/hh847743.aspx)适用于已知列表，但我想按需生成列表。

Adam Driscoll[暗示](http://csharpening.net/?p=1252)cmdlet 是可能的，但遗憾的是没有详细说明。

Trevor Sullivan[展示了一种](http://trevorsullivan.net/2012/10/09/powershell-generating-functions-with-dynamic-parameter-auto-completion-values/)函数技术，但据我了解，他的代码仅在定义函数时生成列表。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-12-27T18:16:30.567

我对此感到困惑了一段时间，因为我想做同样的事情。我整理了一些我非常满意的东西。

您可以从 DynamicParam 添加 ValidateSet 属性。这是我从 xml 文件即时生成 ValidateSet 的示例。请参阅以下代码中的“ValidateSetAttribute”：

```
function Foo() {
    [CmdletBinding()]
    Param ()
    DynamicParam {
        #
        # The "modules" param
        #
        $modulesAttributeCollection = new-object -Type System.Collections.ObjectModel.Collection[System.Attribute]

        # [parameter(mandatory=...,
        #     ...
        # )]
        $modulesParameterAttribute = new-object System.Management.Automation.ParameterAttribute
        $modulesParameterAttribute.Mandatory = $true
        $modulesParameterAttribute.HelpMessage = "Enter one or more module names, separated by commas"
        $modulesAttributeCollection.Add($modulesParameterAttribute)    

        # [ValidateSet[(...)]
        $moduleNames = @()
        foreach($moduleXmlInfo in Select-Xml -Path "C:\Path\to\my\xmlFile.xml" -XPath "//enlistment[@name=""wp""]/module") {
            $moduleNames += $moduleXmlInfo.Node.Attributes["name"].Value
        }
        $modulesValidateSetAttribute = New-Object -type System.Management.Automation.ValidateSetAttribute($moduleNames)
        $modulesAttributeCollection.Add($modulesValidateSetAttribute)

        # Remaining boilerplate
        $modulesRuntimeDefinedParam = new-object -Type System.Management.Automation.RuntimeDefinedParameter("modules", [String[]], $modulesAttributeCollection)

        $paramDictionary = new-object -Type System.Management.Automation.RuntimeDefinedParameterDictionary
        $paramDictionary.Add("modules", $modulesRuntimeDefinedParam)
        return $paramDictionary
    }
    process {
        # Do stuff
    }
} 
```

有了它，我可以输入

```
Foo -modules M<press tab> 
```

如果该模块在 XML 文件中，它将使用制表符完成“MarcusModule”。此外，我可以编辑 XML 文件，制表符完成行为将立即改变；您不必重新导入该功能。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-13T07:36:29.080

查看 github 上的 TabExpansionPlusPlus 模块，该模块由前 PowerShell 团队魔术师编写。

[https://github.com/lzybkr/TabExpansionPlusPlus#readme](https://github.com/lzybkr/TabExpansionPlusPlus#readme)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-13T12:29:46.007

经典地，我使用正则表达式。

例如，

```
function TabExpansion {

    param($line, $lastWord) 

    if ( $line -match '(-(\w+))\s+([^-]*$)' )
    {
    ### Resolve Command name & parameter name
        $_param = $matches[2] + '*'
        $_opt = $Matches[3].Split(" ,")[-1] + '*'
        $_base = $Matches[3].Substring(0,$Matches[3].Length-$Matches[3].Split(" ,")[-1].length)

        $_cmdlet = [regex]::Split($line, '[|;=]')[-1]

        if ($_cmdlet -match '\{([^\{\}]*)$')
        {
            $_cmdlet = $matches[1]
        }

        if ($_cmdlet -match '\(([^()]*)$')
        {
            $_cmdlet = $matches[1]
        }

        $_cmdlet = $_cmdlet.Trim().Split()[0]

        $_cmdlet = @(Get-Command -type 'Cmdlet,Alias,Function,Filter,ExternalScript' $_cmdlet)[0]

        while ($_cmdlet.CommandType -eq 'alias')
        {
            $_cmdlet = @(Get-Command -type 'Cmdlet,Alias,Function,Filter,ExternalScript' $_cmdlet.Definition)[0]
        }

    ### Currently target is Get-Alias & "-Name" parameter

        if ( "Get-Alias" -eq $_cmdlet.Name -and "Name" -like $_param )
        {
           Get-Alias -Name $_opt | % { $_.Name } | sort | % { $_base + ($_ -replace '\s','` ') }
           break;
        }
    }
} 
```

参考 [http://gallery.technet.microsoft.com/scriptcenter/005d8bc7-5163-4a25-ad0d-25cffa90faf5](http://gallery.technet.microsoft.com/scriptcenter/005d8bc7-5163-4a25-ad0d-25cffa90faf5)

* * *

Posh-git 在 GitTabExpansion.ps1 中将 TabExpansion 重命名为 TabExpansionBackup。
当完成与 git 命令不匹配时，posh-git 重新定义的 TabExpansion 会调用原始 TabExpansion(TabExpansionBackup)。
因此，您所要做的就是重新定义 TabExpansionBackup。

(cat .\GitTabExpansion.ps1 | select -last 18)
============================== GitTabExpansion.ps1 ==== ===========================

```
if (Test-Path Function:\TabExpansion) {
    Rename-Item Function:\TabExpansion TabExpansionBackup
}

function TabExpansion($line, $lastWord) {
    $lastBlock = [regex]::Split($line, '[|;]')[-1].TrimStart()

    switch -regex ($lastBlock) {
        # Execute git tab completion for all git-related commands
        "^$(Get-AliasPattern git) (.*)" { GitTabExpansion $lastBlock }
        "^$(Get-AliasPattern tgit) (.*)" { GitTabExpansion $lastBlock }

        # Fall back on existing tab expansion
        default { if (Test-Path Function:\TabExpansionBackup) { TabExpansionBackup $line $lastWord } }
    }
} 
```

==================================================== ==============================

重新定义 TabExpansionBackup（原 TabExpansion）

```
function TabExpansionBackup {
    ...

    ### Resolve Command name & parameter name

    ...

    ### Currently target is Get-Alias & "-Name" parameter

    ...
} 
```

# python - 在 unittest 中测试污染

> ID：14844544
> 
> 赞同：1
> 
> 时间：2013-02-13T00:38:54.503
> 
> 标签：python, unit-testing

我有 2 个功能， `apply_rule`和`match`. 每个都是独立定义的——它们不属于任何类。

`match`接受两个必需参数和一个可选参数，称为`pairs`. 它默认为空字典。下面是 for`apply_rule`和 for的代码`match`。请注意，它被调用，并且未指定`match`可选参数。`pairs`

```
def apply_rule(pat, rule):
  if not isrule(rule):
    return "Not a valid rule"

  subs = match(lhs(rule), pat)
  if subs == {}:
    return pat
  else:
    return substitute(rhs(rule), subs)

def match(pat, lst, pairs={}):
  if pat == [] and lst == []:
    return pairs
  elif isvariable(pat[0]):
    if pat[0] not in pairs.keys():
      pairs[pat[0]] = lst[0]
    elif pat[0] in pairs.keys() and lst[0] != pairs[pat[0]]:
      return False
  elif pat[0] != lst[0]:
    return False
  return match(pat[1:], lst[1:], pairs) 
```

现在，单元测试`match`失败，因为它“记住” `pairs`，正如测试中定义的那样`apply_rule`。

但是，如果我将第 3 行更改为`apply_rule`，`subs = match(lhs(rule), pat, {})`则测试通过。**你知道为什么吗？**据我所知，不应该有任何方法可以`match`记住`pairs`在其他测试中调用它时的值。

以下是单元测试，供参考。

```
def test_match(self):
    self.assertEqual({}, match(['a', 'b', 'c'], ['a', 'b', 'c']))

    self.assertEqual(self.dict_with_x, match(['a', '_X', 'c'], ['a', '5', 'c']))
    self.assertEqual(self.dict_with_x, match(self.pat_with_xx, self.list_with_55))

    self.assertEqual(self.dict_with_xy, match(self.pat_with_xy, self.list_with_5hi))

    self.assertFalse(match(self.pat_with_xx, ['a', 'b', 'c', 'd']))
    self.assertFalse(match(['a', 'b', 'c'], ['a', 'b', 'd']))

def test_apply_and_firerule(self):
    pattern1 = "my mother thinks I am fat".split(' ')
    expected = "do you think you are fat ?".split(' ')
    self.assertEqual(apply_rule(pattern1, self.r1), expected) 
```

而失败信息...

```
Traceback (most recent call last):
  File "pattern_matcher_tests.py", line 65, in test_match
    self.assertEqual({}, match(['a', 'b', 'c'], ['a', 'b', 'c']))
AssertionError: {} != {'_Y': 'fat', '_X': 'mother'}
- {}
+ {'_X': 'mother', '_Y': 'fat'} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T00:47:10.527

来自[effbot](http://effbot.org/zone/default-values.htm)

> 为什么会这样？#
> 
> 默认参数值总是在且仅当它们所属的“def”语句被执行时才被评估；看：
> 
> [http://docs.python.org/ref/function.html](http://docs.python.org/ref/function.html)
> 
> 对于语言参考中的相关部分。
> 
> 该怎么做？#
> 
> 正如其他人所提到的，解决方法是使用占位符值而不是修改默认值。None 是一个常见的值：

# assembly - 我如何将地址存储在x86上的寄存器中

> ID：14844545
> 
> 赞同：2
> 
> 时间：2013-02-13T00:38:54.497
> 
> 标签：assembly, x86

我有一段代码如下：

```
 .section .data
    myvar:
    .long 4,3,2,1

    .section .text
    .globl _start
    _start:
     movl $0, %edi
     movl myvar(,%ed1,4), %eax
     movl $0, %ebx 
```

我想将数组“myvar”的最后一个元素的地址存储在 ebx 中（即 1），我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T00:45:16.967

我的心理编译器输出英特尔语法，而不是 AT&T 的，但你应该明白：

```
lea eax, myvar + 12 
```

eax 现在有 '1' 值的地址。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T01:08:03.670

好的，我明白了，我们可以使用 $myvar + N

例子：

```
 .section .data 
      myvar: .long 4,3,2,1
     .section .text
     .globl _start
      _start:
     movl $0, %edi
     movl $myvar+0, %eax 
     movl $myvar+4, %ebx 
     movl $myvar+8, %ecx 
     movl $myvar+12, %edx 
     movl $myvar+16, %edi 
     movl $1, %ebx
     movl $1, %eax
     int $0x80 
```

# javascript - js，$.inArray，不返回预期回报

> ID：14844549
> 
> 赞同：0
> 
> 时间：2013-02-13T00:39:16.373
> 
> 标签：javascript, jquery, arrays, match

我想问一个问题，为什么这不起作用？

[http://jsfiddle.net/2FMue/4/](http://jsfiddle.net/2FMue/4/)

```
var a = $('input').attr('value').split(',');

if(a instanceof Array) alert(1);

if($.inArray($('#id').text(), a)) alert(2);

if($.inArray('United State', a)) alert(3);

// a is array but no return correct match. 
```

我将一个值拆分为数组并使用 $.inArray 检查字符串在数组中的位置。

但它不会返回正确的索引。

我不知道这个例子有什么问题。请指教。

非常感谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T00:43:09.033

从文档：

> 因为 JavaScript 将 0 视为松散地等于 false（即 0 == false，但 0 !== false），如果我们要检查数组中是否存在值，我们需要检查它是否不等于（或大于) -1。

所以 ：

```
if( $.inArray($('#id').text(), a) != -1) alert(2); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T00:41:34.170

### 它工作得很好。

`$.inArray`返回在给定数组中找到的元素的索引（或者`-1`如果没有找到）。

举个例子，

```
$.inArray("United State", ["United State", "America"]) ===  0
$.inArray("Unknown", ["United State", "America"])      === -1 
```

因此，为了检查元素是否存在于数组中，您必须使用：

```
if ($.inArray("Unknown", ["United State", "America"]) > -1) {
    // ...
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-13T00:42:45.697

> $.inArray() 方法类似于 JavaScript 的原生 .indexOf() 方法，因为它在找不到匹配项时返回 -1。如果数组中的第一个元素与值匹配，则 $.inArray() 返回 0。
> 
> 因为 JavaScript 将 0 视为松散地等于 false（即 0 == false，但 0 !== false），如果我们要检查数组中是否存在值，我们需要检查它是否不等于（或大于) -1。

在这里阅读更多：http: [//api.jquery.com/jQuery.inArray/](http://api.jquery.com/jQuery.inArray/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-13T00:44:08.697

搜索词是否是数组中的第一个元素？这将返回 0，javascript 将其视为 false。你的 if 语句应该是：

```
if($.inArray($('#id').text(), a) < 0) alert(2); 
```

阅读文档[http://api.jquery.com/jQuery.inArray/](http://api.jquery.com/jQuery.inArray/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-13T00:53:58.667

拆分中的数组是基于 0 的索引，并且您要求的字符串是第一个，因此它返回 0 值 - 这是虚假的，因此您的条件内的警报不会触发，因为您从 0 索引数组。

将您的输入值更改为“fred,United State, America”，您将看到警报。

# java - 视图出现在 Android 模拟器上，但不在实体手机上

> ID：14844552
> 
> 赞同：0
> 
> 时间：2013-02-13T00:39:34.983
> 
> 标签：java, android, listview, textview, avd

我有一个仅由 ListView 组成的活动布局。它应该使用一个列表格式的 xml，其中包含一个自定义形状，里面有三个 TextView。在代码中，我用所需的文本填充 ListView，当我在 AVD 上运行应用程序时，一切都按计划进行。但是，当我部署到我的 Droid Razr 时，当我运行该活动时，整个屏幕都是空白的。

编辑：在下面添加代码

这是我的自定义形状（可绘制）：

```
<stroke
    android:width="1dp"
    android:color="#ff9f9f9f" />

<padding
    android:bottom="20dp"
    android:left="20dp"
    android:right="20dp"
    android:top="20dp" />

<solid
    android:color="@color/white" />

<corners
    android:bottomLeftRadius="7dp"
    android:bottomRightRadius="7dp"
    android:topLeftRadius="7dp"
    android:topRightRadius="7dp" /> 
```

这是我的列表格式：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="?android:attr/listPreferredItemHeight"
android:background="@drawable/rounded_edges"
android:orientation="vertical"
android:padding="6dip"
android:theme="@android:style/Theme.Holo.Light" >

<TextView
    android:id="@+id/details_list_title"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginLeft="6dp"
    android:layout_marginRight="6dp"
    android:layout_weight="1"
    android:textAppearance="?android:attr/textAppearanceLarge" /> 
```

这就是我在代码中使用它的方式：

```
 ListView listView = (ListView) findViewById(R.id.event_details_listView);
    DetailAdapter adapter = new DetailAdapter(this, R.layout.listformat_event_details, details);
    listView.setAdapter(adapter); 
```

其中 details 是我的文本的 ArrayList>。DetailAdapter 有一个 getView 方法，可以将文本添加到 textview 并扩展布局。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T03:49:43.693

我相信问题可能出在`<corners />`标签上，这可能有点错误；比如`bottomRightRadius`和`bottomLeftRadius`属性是相反的。

您可以尝试`<corners android:radius="7dp"/>`改用。

[android：设置单个角时形状角不起作用](https://stackoverflow.com/questions/6105521/android-shape-corners-do-not-work-when-setting-individual-corners)

[Android - 无法创建简单的矩形形状... UnsupportedOperationException？](https://stackoverflow.com/questions/2310209/android-cant-create-simple-rectangle-shape-unsupportedoperationexception?rq=1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T18:41:24.877

我可以通过更频繁地刷新 Detail Adapter 来解决问题；显然，模拟器中的延迟足以让视图计算，但物理设备太快了。

# javascript - 如何使用数组将变量插入 dat.Gui？

> ID：14844557
> 
> 赞同：2
> 
> 时间：2013-02-13T00:40:05.207
> 
> 标签：javascript, arrays, user-interface, dat.gui

我尝试通过数组声明变量以在 dat.Gui 控制器中使用它们。这是我的尝试：

```
<script>
  window.Horizontale = 300;
  window.Vertikale = 300;
  window.A = new Array();

  for (var i=1; i<7; i++) {
    window.A[i] = false;
  }

  window.onload = function() {
    var gui = new dat.GUI();
    gui.add(window, 'Horizontale', 0, 600);
    gui.add(window, 'Vertikale', 0, 600);

    for (var i=1; i<7; i++) {
      gui.add(window, A[i]);
    }
    gui.remember(window);
  };
</script> 
```

数组中的变量不会出现在 GUI 中。我对Javascript真的很陌生，所以也许这只是声明的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-24T17:55:57.153

在这一行：

```
gui.add(window, A[i]); 
```

…<code>add() 在对象上查找**名称**由 指定`window`的属性，在这种情况下计算结果为。**`A[i]``false`**

 **但是，没有名为`false`on的属性`window`。因此，您需要在某处使用所需名称指定对象的属性，然后您可以为每个属性分配您想要作为附加参数传递的值`add()`——在这种情况下，`false`会给您一个处于未选中状态的复选框。

因此，假设您想要 6 个名为 1 - 6 的未选中复选框，您可以做一些事情，但它们都涉及向某个对象添加 6 个命名属性。这是使用第二个对象来保存控制器名称的一种方法，它将替换您的第二个`for`循环：

```
for (var i=1; i<7; i++) {
  controller_names[i] = A[i];
  gui.add(controller_names, i, A[i]);
} 
```

但是，这可能无法很好地与保存设置功能配合使用——dat.gui 似乎只能保存在 gui 对象本身上定义的控件的设置，如下所述：[为动态添加的控件保存 dat.gui 预设？](https://stackoverflow.com/questions/24335504/save-dat-gui-presets-for-dynamically-added-controls)

...在这种情况下，您可以尝试类似这样的操作：

```
<script>
  window.onload = function() {

    var gui = new dat.GUI();
    gui.Horizontale = 300;
    gui.Vertikale = 300;
    gui.A = new Array();

    for (var i=1; i<7; i++) {
      gui.A[i] = false;
    }

    gui.add(gui, 'Horizontale', 0, 600);
    gui.add(gui, 'Vertikale', 0, 600);

    for (var i=1; i<7; i++) {
      gui.add(gui.A, i, gui.A[i]);
    }
    gui.remember(gui);
  };
</script> 
```**

# javascript - 使用 google.maps.Geocoder()。异步回调

> ID：14844562
> 
> 赞同：0
> 
> 时间：2013-02-13T00:41:00.723
> 
> 标签：javascript, asynchronous, callback, google-geocoder

我一直在尝试将地址地理编码为 LatLng 坐标，但这样做有很多困难。我知道`geocode()`是一个异步函数，我一直在玩弄回调无济于事。我一直在看类似这样的其他帖子（[如何从异步回调函数返回值？](https://stackoverflow.com/questions/6847697/how-to-return-value-from-callback-function)），但我很难理解这个概念。如果有人能告诉我如何正确地执行该回调函数，将不胜感激。很头疼这个。能够让回调执行`alert()`提供正确 LatLng 的操作，但未设置位置参数。抱歉，无法从前面引用的示例中弄清楚。语言很新。您可以指出我理解这个概念的任何参考资料也非常感谢。谢谢！

```
 var location;
  var image;
  var map;
  var geocoder;
  var address;

  function initialize() {
    var mapOptions = {
      center: new google.maps.LatLng(42.763146, -73.3776),
      zoom: 6,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    var map = new google.maps.Map(document.getElementById("map_canvas"),
        mapOptions);
    var cloudLayer = new google.maps.weather.CloudLayer();
    cloudLayer.setMap(map);

    addressSet(function(address) {
        console.log(address);
        // tried to set location = address;, location = new google.maps.LatLng(address);
        // neither works
    });

    addMtsToMap(location,
                map,
                new google.maps.MarkerImage("img/mts/skier.png", null, null, null, new google.maps.Size(50,50)));

  }

  function addMtsToMap(location, map, image) {

    var marker = new google.maps.Marker({
        position: location,
        map: map,
        icon: image
    });

    var infoWindow = new google.maps.InfoWindow({content: "<h1>Powder!!!</h1>"});

    google.maps.event.addListener(marker, "click", function() {
        infoWindow.open(map, marker);
    });
  }

  function addressSet(callback) {

    geocoder = new google.maps.Geocoder();

    geocoder.geocode({address: "Killington+VT"}, function(results, status) {

        if (status == google.maps.GeocoderStatus.OK) {

            address = results[0].geometry.location;
            callback(address);
        }
    });
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T18:48:12.567

对不起大家。无法相信我在搞砸了这么久之后发现了什么。我`var map`在初始化中再次声明，这使我的`addressSet()`函数拉取了不正确的全局映射变量。删除 var 使其工作。

# objective-c - 想要在应用程序从后台进入前台时显示警报

> ID：14844565
> 
> 赞同：0
> 
> 时间：2013-02-13T00:41:11.193
> 
> 标签：objective-c

我正在尝试构建一个 iOS 应用程序，当应用程序进入后台并且用户将其带到前台时，我想显示一条消息，例如“欢迎回来”，有没有办法做到这一点？我已阅读有关 UILocalNotification 的信息，但这不是我想要的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T00:48:05.987

是的当然。对于此类方法，您应该始终查看 AppDelegate.m 文件。它具有默认方法：

```
- (void)applicationWillEnterForeground:(UIApplication *)application 
{
    UIAlertView *alert = [[UIAlertView alloc]initWithTitle:@"Welcome back!" message:@"Welcome back!" delegate:nil cancelButtonTitle:nil otherButtonTitles:nil];
    [alert show];
} 
```

有的那种...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T00:47:46.717

实现`UIApplicationDelegate applicationWillEnterForeground:`方法。当应用程序返回前台时调用。

# java - Java中的测试集成员资格

> ID：14844567
> 
> 赞同：1
> 
> 时间：2013-02-13T00:41:28.180
> 
> 标签：java, arrays

我很困惑为什么以下测试集成员资格的方法在我的程序中不起作用。如果我使用任何文本文件作为参数运行以下程序，则在输出中我只会看到“第二”。我认为两个 if 语句都应该测试相同的东西。

```
import java.io.BufferedReader;
import java.io.File;
import java.io.FileReader;
import java.io.IOException;
import java.util.Arrays;

public class Exc0 {

    public static void main(String args[]){
        try {
            File input = new File(args[0]);
            BufferedReader reader = new BufferedReader(new FileReader(input));
            int[] delimiters = {' ', '(', ',', ')'};

            int current;
            while ((current = reader.read()) != -1){
                if ((Arrays.asList(delimiters).contains(current))){
                    System.out.println("First");
                }
                if (current == ' ' || current == '(' || current == ',' || current == ')'){
                    System.out.println("Second");
                }
            }

        }
        catch (IOException e){
            e.printStackTrace();
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T00:50:41.400

发生这种情况是因为当您调用时，`Arrays.asList(delimiters)`您会得到一个包含单个实例的列表`int[]`，而不是四个`int`/实例`Integer`。

一般来说，要检查字符集的成员资格，您可能最好使用 a `String`：

```
String delimiters = "() ,";
if (delimiters.indexOf(current) >= 0) {
    System.out.println("First");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T00:46:51.687

*（根据其他答案更正）*

既然没有`List<int>`，`Arrays.asList(int[] something)`不能返回你所希望的。虽然起初我认为它会返回 a `List<Integer>`，但事实并非如此。正如 dasblinkenlight 指出的那样，它实际上会返回一个`List<int[]>`带有一个元素的元素。（因此，声明`current`为 an`Integer`而不是 an`int`不会修复错误，而是按照Marc Baumbach 在评论中的建议声明`delimiters`为可能的遗嘱。）`Integer[]`

# jquery - jQuery：复制嵌入式推文的 HTML

> ID：14844573
> 
> 赞同：0
> 
> 时间：2013-02-13T00:41:46.533
> 
> 标签：jquery, twitter, embed, tweets

假设我在 div 中嵌入了一条推文：

```
<div id="tweet">
    <blockquote class="twitter-tweet"><p>A lion would never cheat on his wife. But a Tiger Wood.</p>&mdash; Puns (@omgthatspunny) <a href="https://twitter.com/omgthatspunny/status/301482080490115072">February 13, 2013</a></blockquote>
    <script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
</div>

<div id="tweet-insert"></div> 
```

我想复制推文并将其插入另一个 div：

```
var tweetHtml = $("#tweet").html();
$("#tweet-insert").html(tweetHtml); 
```

这是一个**[小提琴](http://jsfiddle.net/2ww6e/2/)**。

这不起作用，它让我**:(**

关于修复的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T00:56:19.780

该脚本是异步加载的，因此当您尝试复制内容时，它可能尚未加载。

`load`当脚本的 -event 触发时复制内容：http: [**//jsfiddle.net/doktormolle/MSfvT/**](http://jsfiddle.net/doktormolle/MSfvT/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T00:50:48.747

您可以像这样使用 jQuery `.clone()`：

```
var tweetCopy = $("#tweet").clone();
$("#tweet-insert").append(tweetCopy); 
```

jsFiddle：http: [//jsfiddle.net/jfriend00/9Segq/](http://jsfiddle.net/jfriend00/9Segq/)

# javascript - 如何使用 JavaScript 获取 NT 登录用户？

> ID：14844574
> 
> 赞同：1
> 
> 时间：2013-02-13T00:41:51.420
> 
> 标签：javascript, asp.net, servicestack

如何使用 JavaScript 获取 NT 登录名？

这是您可以在网络表单中执行此操作的方式：

```
Session("NTLogin") = Page.User.Identity.Name 
```

但我们只想在客户端运行 JavaScript 和 ServiceStack 进行连接。

# android - Android - 让 SoundPool 成为一个全局类？（适用于所有其他班级）

> ID：14844576
> 
> 赞同：1
> 
> 时间：2013-02-13T00:42:19.677
> 
> 标签：android, global-variables, soundpool

所以基本上，我在 SurfaceView 上创建一个游戏，我的主 CustomView 上有这些类：

```
私人标题屏幕标题屏幕；
私人游戏画面游戏画面；
私人 PauseScreen pauseScreen; 
私人 GameOverScreen 游戏OverScreen；

```

这些类中的每一个都有一个`draw(Canvas canvas)`方法，并在用户转到另一个屏幕时调用。但问题是，我有一个`SoundPlayer`类，其中包含使用 SoundPool 的所有音效。它将用于所有这些类。实际上有没有一种方法可以让 SoundPlayer 只加载一次，然后在这些类中都可用？`release()`还是每次切换时都必须调用并调用构造函数？提前致谢。:D

更新（已解决）：

所以这就是我所做的。我创建了我的 SoundPlayer 类的一个实例：

```
公共类 SoundPlayerInstance {
    私有静态 SoundPlayer soundPlayerInstance; 
    private SoundPlayerInstance(){} 

    public static void createInstance(Context context){ 
        soundPlayerInstance = new SoundPlayer(context); 
    } 

    public static SoundPlayer getInstance(){ 
        return soundPlayerInstance; 
    } 
}

```

在我的主要观点上，在我做任何事情之前，我在我的构造函数中调用它：

`SoundPlayerInstance.createInstance();`

然后，在我的任何课程上，我都可以调用它来播放声音：

`SoundPlayerInstance.getInstance().playSound();`

我认为这不仅对此类情况有用，而且对于想要实例化所有其他类中都可用的类的开发人员（如我）也很有用。感谢 system32 回答我的问题。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T00:54:20.290

> 实际上有没有一种方法可以让 SoundPlayer 只加载一次，然后在这些类中都可用？

这是可能的。使`SoundPlayer`类单例。

```
public class SoundPlayer
{

  private static SoundPlayer instance;

  private SoundPlayer()
  {
     // Do some stuff
  }

  public static SoundPlayer getInstance()
  {
     if(instance == null)
         instance = new SoundPlayer();

     return instance;
  }

} 
```

要全局访问，只需调用`SoundPlayer.getInstance()`

# xcode - 无法让 RestKit 在 Xcode 4.6 中工作

> ID：14844578
> 
> 赞同：0
> 
> 时间：2013-02-13T00:42:23.263
> 
> 标签：xcode, ios6, restkit

我试图让 RestKit 工作，但我一直收到错误，这是 Xcode 4.6，目标 iOS 是 6.1

我正在遵循本指南：

[https://github.com/RestKit/RestKit/wiki/Installing-RestKit-v0.20.x-as-a-Git-Submodule](https://github.com/RestKit/RestKit/wiki/Installing-RestKit-v0.20.x-as-a-Git-Submodule)

我得到的错误是：

```
Undefined symbols for architecture i386: 
"_OBJC_CLASS_$_RKClient", referenced from:
objc-class-ref in ViewController.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

指南和我的 Xcode 之间的不同之处之一是文件 libRestKit.a 无处可见，唯一的选择是 RestKit（请参阅下面我的 xcode 的屏幕截图）

[http://i.stack.imgur.com/G9jVC.png](http://i.stack.imgur.com/G9jVC.png)

我可能错过了一些非常简单的东西，但我不知道是什么

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T10:55:09.620

如果您使用的是 0.2 版的 RestKit，请尝试使用 CocoaPods 进行安装。

0.2 现在是一个充满伤害的世界，尤其是如果您有 0.1 或更早版本的经验。许多方法消失了，没有找到替代品的好方法。文档仍然有 0.1 的示例和文档，在 0.2 中不再正确。

NSScreencast 有几个关于 0.2 的视频，做得非常好。

希望文档将很快更新。

# linux - Linux 有没有好的“OCaml 浏览器”工具？

> ID：14844580
> 
> 赞同：6
> 
> 时间：2013-02-13T00:42:28.393
> 
> 标签：linux, eclipse, emacs, ocaml, typerex

我正在使用 Emacs + Typerex 进行 OCaml 编程。我之前在 Windows 中尝试过 OcaIDE。它不如 Typerex，但它确实有一个很好的功能：Ocaml Browser

![Windows 中的 OcaIDE](../Images/0b68160707d93d78cdbe58dd98f4bb28.png)

反正Typerex有这样的浏览器吗？（linux中的eclipse + OcaIDE可能会工作，但我不像typerex那样喜欢它）

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T16:04:34.850

`ocamlbrowser`实际上是一个随 OCaml 编译器分发了很长时间的程序的名称。它是用 LablTk 编写的，由 Jacques Garrigue 维护，并且位于“ocaml 发行版”（而不是外部工具）中，因为它`.cmi`以依赖于编译器内部细节的方式访问文件。

所以简短的回答是：“是的，只需`ocamlbrowser`在您的终端中调用”（假设您的发行版将 ocamlbrowser 与编译器一起打包，可能是也可能不是；可能有一个单独的 ocamlbrowser 包代替）。与闪亮的 Eclipse 版本相比，该工具的外观可能有点过时，但它确实存在并且工作正常。

# html - Twitter Bootstrap 调整宽度 - 登陆页面

> ID：14844585
> 
> 赞同：0
> 
> 时间：2013-02-13T00:42:49.473
> 
> 标签：html, css, twitter-bootstrap

我正在考虑使用 Twitter Bootstrap 创建一个相当简单的登陆页面。登陆页面目前处于相当基本的直线，但是我发现在我的 iPad 和手机上，它并没有完全调整不同 div 的宽度。

我不确定我没有包含或添加什么来使响应式 CSS 生效？任何帮助将不胜感激。

[http://www.landing.xeonweb.com.au](http://www.landing.xeonweb.com.au)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T00:53:15.603

我已通过在 Head Document media="screen" 中添加 CSS 调用来修复错误

所以而不是：

```
<link href="css/bootstrap-responsive.css" rel="stylesheet"> 
```

我也调整了：

```
<link href="css/bootstrap-responsive.css" rel="stylesheet" media="screen"> 
```

首先不包括媒体电话是一个愚蠢的错误。谢谢！

# c++ - （C++ Boost）在列表中查找成员匹配搜索词的项目

> ID：14844587
> 
> 赞同：1
> 
> 时间：2013-02-13T00:43:03.080
> 
> 标签：c++, boost, find

有没有一种很好的方法可以将以下代码简化为带有 C++ 和潜在提升库的单行代码。我基本上有一个以 title() 作为成员函数的消息列表。我想知道列表中是否存在具有给定标题的消息。

```
std::string title = "some title";
bool unique = true;

BOOST_FOREACH(Message& m, messages) {
    if (m.title() == title) {
        unique = false;
        break;
    }
} 
```

如果您熟悉 C# Linq，以下的 C++ 版本会很棒：

```
unique = (messages.FirstOrDefault(m => m.title() == title) == null); 
```

不幸的是，我不能使用 C++11，但如果你有 C++11 示例，我很想看看它以供将来参考。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T00:52:57.913

至少从外观上看，您可能希望使用 an`std::map`来存储按标题键入的消息：

```
std::map<std::string, Message> messages; 
```

...在这种情况下，您的搜索将变为：

```
bool unique = messages.find(title) == messages.end(); 
```

如果您坚持进行线性搜索并希望通过`title`成为 的成员来维持当前状况`Message`，您可以执行以下操作：

```
bool unique = std::find(messages.begin(), messages.end(),
                        [title](Message const &m) { return m.title == title; }) 
                    == messages.end(); 
```

但是，您*可能*不想执行上述任何操作。相反，您可能只想使用`std::set`or `std::map`，而不是在添加之前搜索以查找该项目是否已经存在，只需使用 insert ，如果具有该键的项目已经存在，它将失败（但如果标题添加是新的）。由于我们已经看过 using `std::map`，让我们考虑一下使用 set 的样子：

```
class Message {
    std::string title;
    // other stuff
public:
    bool operator<(Message const &other) const { return title < other.title; }
}:

std::set<Message> messages;

messages.insert(some_new_message);    // automatically unique 
```

根据情况（如果您有很多消息，不要关心它们是否被排序），您可能想要使用`std::unordered_set`而不是`std::set`（同样适用于`std::map`vs. `std::unordered_map`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T22:54:59.430

在带有 boost 的 C++ 中，您应该能够执行以下操作：

```
bool unique = boost::find_if(messages, boost::bind( &Message::title, _1 ) == title) == messages.end(); 
```

在 C++11 中使用带有 boost 的[Linq](http://pfultz2.github.com/Linq/)，你应该可以这样写：

```
bool unique = boost::empty(LINQ(from(m, message) where(m.title() == title))); 
```

您不能`first_or_default`在 C++ 中使用相同的值，因为默认值不是空指针。

# .htaccess - 如何将这个简单的 htaccess 重写规则移植到 nginx

> ID：14844588
> 
> 赞同：0
> 
> 时间：2013-02-13T00:43:03.783
> 
> 标签：.htaccess, nginx, rewrite, modx

我的 htaccess 文件中有这个

```
RewriteEngine On                             
RewriteBase /

RewriteCond %{REQUEST_FILENAME} !-f            #do not process for real files
RewriteCond %{REQUEST_FILENAME} !-d            #do not process for real folder
RewriteRule ^(.*)$ index.php?q=$1 [L,QSA]      #rewrite 
```

我试图将它添加到我的 nginx 配置文件中

```
if (!-e $request_filename) {
    rewrite ^(.*)$ /index.php?q=$1 last;
} 
```

在我的里面

```
server{...} 
```

以有限的成功阻止，我得到

[http://example.com/about/contact.html](http://example.com/about/contact.html) > /index.php?q=/about/contact.html

代替

[http://example.com/about/contact.html](http://example.com/about/contact.html) > /index.php?q=about/contact.html

而且，虽然很小，但这个领先的 / 正在破坏 MODx。（即使黑客修改`$_GET['q']`,`$_SERVER['QUERY_STRING']`和`$_SERVER['REQUEST_URI'])`

[是的，我已经重启了nginx]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T09:11:33.977

> MODx

MODx 有一个手册页，其中包含一个适用于我的示例 nginx conf 文件；[http://rtfm.modx.com/display/revolution20/Nginx+Server+Config](http://rtfm.modx.com/display/revolution20/Nginx+Server+Config)

# javascript - 获取类别列表以保持显示在我的下拉菜单中

> ID：14844594
> 
> 赞同：1
> 
> 时间：2013-02-13T00:43:52.837
> 
> 标签：javascript

这里一切正常，但我想做的是让摇滚类别下的列表保持显示，直到您单击蓝调类别。我希望 Rock 类别开始显示，直到单击另一个类别链接。任何帮助将不胜感激，因为我是 javascript 新手。这是我的代码，请参阅演示...

[http://jsfiddle.net/davidzupec/2BTkL/2/](http://jsfiddle.net/davidzupec/2BTkL/2/)

```
$(function () {
$('a').bind('click',function () {
    var Class = $(this).attr('class');

    var ulName = 'ul.' + Class;
    var Display=$(ulName).css('display');
    var Dis = $(ulName).css('display');

    $(ulName).siblings().hide();
    if (Dis == "block" || Dis == "undefined") {
        $(ulName).slideUp();
    }
    else {
        $(ulName).slideDown().show(1);
    }

})
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T01:26:11.290

不确定你是否想要这样的东西？

```
$(function () {
    $('a').bind('click',function () {
        var Class = $(this).attr('class');
        var ulName = 'ul.' + Class;
        var Dis = $(ulName).css('display');

        $(ulName).siblings().hide();
        if (Dis == "block" || Dis == "undefined") {
            //$(ulName).slideUp();
        }
        else {
            $(ulName).slideDown();
        }
    });
    $(".rock").show()
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T01:20:16.350

将 rock 设置为在 CSS 中显示就足够了：

```
ul.rock {
    display:block;
} 
```

# android - 如何存储 HashMap 在android中使用共享偏好？

> ID：14844605
> 
> 赞同：3
> 
> 时间：2013-02-13T00:44:55.773
> 
> 标签：android, hashmap, sharedpreferences

我通过以下方式创建了一个 HashMap：

`HashMap<Integer, String> buttons = new HashMap<Integer, String>();`

我需要保持这种格式，但是我看到的这个解决方案的每个答案都只适用于`HashMap<String, String>`

谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-13T15:34:02.873

嘿，我最终找到了一个方法:)

我刚刚更改了必须格式化的 HashMap，然后执行以下操作来保存内容：

```
SharedPreferences.Editor editor = getSharedPreferences(PREFS_NAME, 0).edit();
for( Entry entry : backUpCurency_values.entrySet() ) 
editor.putString( entry.getKey(), entry.getValue() );
editor.commit(); 
```

和以下检索HashpMap：

```
SharedPreferences prefs = getSharedPreferences(PREFS_NAME, 0);
for( Entry entry : prefs.getAll().entrySet() )
   backUpCurency_values.put( entry.getKey(), entry.getValue().toString() ); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-13T00:48:15.987

不支持任何`HashMap`in `SharedPreferences`。您可以将整体`SharedPreferences`视为有点像 a `HashMap`，但它不是 a `HashMap`，并且您不能将 a 存储`HashMap`在个人偏好中。

欢迎您将您的`HashMap`转换为`String`可以存储在值中的`SharedPreferences`值，例如将其转换为 JSON。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T01:50:03.787

将其转换为 JSON（正如 CommonsWare 指出的那样）是一种选择。或者，我这样做的方式（因为我不熟悉 JSON）是使用 Apache 的 ObjectSerializer 类（在此处找到：[ObjectSerializer.java](https://github.com/apache/pig/blob/89c2e8e76c68d0d0abe6a36b4e08ddc56979796f/src/org/apache/pig/impl/util/ObjectSerializer.java)）对其进行序列化。

当你想存储它时只需调用 serialize 方法，当你想将它转回 Map 时只需反序列化。

# ruby - 为什么 `foo == bar` 和 `bar == foo` 返回不同的结果？

> ID：14844607
> 
> 赞同：3
> 
> 时间：2013-02-13T00:44:59.387
> 
> 标签：ruby

这里发生了什么？为什么`==`比较边的位置会改变输出？

```
secret == BCrypt::Password.new(BCrypt::Password.create(secret)) 
# => false 
BCrypt::Password.new(BCrypt::Password.create(secret)) == secret
# => true 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T00:59:46.280

这是因为 is 的返回值`BCrypt::Password.new`覆盖`BCrypt::Password`了`==`

[http://bcrypt-ruby.rubyforge.org/classes/BCrypt/Password.html#M000009](http://bcrypt-ruby.rubyforge.org/classes/BCrypt/Password.html#M000009)

> 将潜在秘密与哈希进行比较。如果秘密是原始秘密，则返回真，否则返回假。

所以当`secret`在左边时，它的equals方法正在被使用（这是进行字符串比较），而当哈希在左边时，它实际上是在与原始秘密进行比较

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T00:58:37.077

最简单的答案是 ，`==`也就是说`LHS#==`，这`==`不是一个通用运算符，就像在 C 或 C++ 或 Java 中那样，而是一个在左侧对象上调用的函数。

如果不了解您的代码的更多信息，就很难准确地告诉您发生了什么。

简单来说，`secret.class#==`必须表现得与`BCrypt::Password#==`. 也许 BCrypt::Password 知道如何比较加密字符串（本身）和未加密字符串（参数），而`secret`如果是字符串，则不知道如何与`BCrypt::Password`自身进行比较。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T00:58:57.703

BCrypt::Password 有一个 == 方法来与秘密进行比较。

```
BCrypt::Password.new(BCrypt::Password.create(secret)).class
 => BCrypt::Password 
```

所以

```
BCrypt::Password.new(BCrypt::Password.create(secret)) == secret
 => true 
```

另一个表达式不调用 BCrypt::Password 上的方法 ==，而是调用字符串上的方法。

[http://bcrypt-ruby.rubyforge.org/classes/BCrypt/Password.html#M000009](http://bcrypt-ruby.rubyforge.org/classes/BCrypt/Password.html#M000009)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T02:44:49.723

Ruby 是一种面向对象的语言。在 OO 中，消息发送的接收者决定如何响应该消息。在您的情况下，两个接收器不仅是不同的对象，它们甚至是不同*类型*的对象。

Ruby 中有一些标准的双重调度协议，旨在确保某些运算符是对称的，但是 a）这些协议仅存在于数字上的算术运算而不是相等性，并且 b）不能保证对象遵循这些协议。

总之，在OO中，没有办法保证算子的对称性。这只是 OO 的基本属性。

# java - 如果我在尝试更改列表内容时这样做会发生什么？

> ID：14844608
> 
> 赞同：0
> 
> 时间：2013-02-13T00:44:58.360
> 
> 标签：java

我正在尝试使列表成为另一个列表的直接副本。这行得通吗？

```
list1 = list2 
```

它会传输所有内容还是什么都不传输？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T00:47:10.170

您不是在制作副本，而是在添加参考。进行附加引用和将项目插入列表都是*原子*的。如果一个过程是不可拆分的，那么它就是原子的。要么完全完成，要么没有。

另请参阅以下线程，了解如何正确克隆列表。 [Java Collections 副本列表 - 我不明白](https://stackoverflow.com/questions/689370/java-collections-copy-list-i-dont-understand)

谷歌搜索`java clone method`也会启发你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T00:52:35.360

不会。它只会`list2`引用存储在引用中的同一个列表`list1`。您可以使用`copy constructor`将引用从一个列表复制到另一个，但要小心，因为这不是深度复制 -> 新列表将包含存储在原始列表中的完全相同的对象。这是示例

```
List<String> list1 = new ArrayList<>();
list1.add("one");
list1.add("two");

List<String> list2 = list1;//now list2 will point to the same list as list1
list2.add("A");

//lets print content of list1
System.out.println(list1); // -> output: [one, two, A]

//--------------------------------------------------------------

//This way you can create separate list that contains same values as list1
List<String> list3 = new ArrayList(list1);
list3.add("B");

System.out.println(list1); // -> output: [one, two, A]
System.out.println(list3); // -> output: [one, two, A, B] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T00:56:38.343

在大多数情况下，使用直接分配是没有用的。就好像您有两个不同名称的**完全相同的**变量，因为它们都指向*相同的*内存地址。

如果要将列表克隆到另一个列表中，则应使用`copy constructor`

例如

```
ArrayList<E> copyList = new ArrayList<E>(originalList); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T00:48:15.900

它不会。在 java 中克隆对象并不是那么简单，请参阅链接[How do I copy an object in Java?](https://stackoverflow.com/questions/869033/how-do-i-copy-an-object-in-java)

# ios - 对于 Testflight，是否必须在 Apple 门户中注册设备，即使是企业分发？

> ID：14844609
> 
> 赞同：1
> 
> 时间：2013-02-13T00:45:02.480
> 
> 标签：ios, testflight

我有一个 Apple Enterprise 帐户并创建了一个企业版本，并且正在评估是自己在 Web 服务器上托管该版本还是使用 Testflight。

我目前正在使用 Testflight 并已上传构建并尝试安装到设备上。

似乎它不会让我在设备上安装构建，除非该设备已在 Apple 配置门户中注册并且设备的 UUID 包含在配置文件中。

但这是否与企业构建的观点相反，应用程序不需要在门户中注册？而且它对企业应用程序毫无用处，因为即使使用我的企业帐户，门户网站仍然显示可以注册的设备数量限制为 100 台。

因此，我不能在概念上将所有部分放在一起。如果应用程序 udid 必须在门户中注册，我不明白使用 Testflight for Enterprise 应用程序有什么意义？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T00:51:44.193

您需要确保使用分发配置文件对应用程序进行代码签名，并将分发证书安装在您的钥匙串中。

听起来您不小心使用标准开发配置文件/证书进行了代码签名，这就是为什么您的应用程序只能在该配置文件列出的设备上运行的原因。

# php - 标准正态累积分布函数

> ID：14844612
> 
> 赞同：2
> 
> 时间：2013-02-13T00:45:13.330
> 
> 标签：php, function, math, plugins, probability

有标准正态累积分布函数的php函数吗？

我找不到一个。

插件/库也很棒。

请告诉我它在哪里。

提前谢谢了！

**stats_cdf_normal**

给`Fatal error: Call to undefined function stats_cdf_normal()`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T00:57:40.203

[PECL stats package](http://www.php.net/manual/en/book.stats.php)中有一个未记录的`stats_cdf_normal()`函数。

查看本页底部的注释：[http ://www.php.net/manual/en/ref.stats.php](http://www.php.net/manual/en/ref.stats.php)

> **Oliver 在•••••••• dot com：**
> 
> 此扩展中有一些未记录的功能，例如，我通过阅读 DCDFLIB 文档和一些试验和错误发现了以下内容：

```
<?php

/**
 * stats_cdf_normal($x, $mean, $sd, 1)
 * @return float cumulative probablity
 */
echo stats_cdf_normal(1.96, 0, 1, 1) . "\n";

/**
 * stats_cdf_normal($p, $mean, $sd, 2)
 * @return float x which bounds cumulative probalility $p
 */
echo stats_cdf_normal(0.975, 0, 1, 2) . "\n";

// less useful
// echo stats_cdf_normal(0.4,0.5,0.6,3) . "\n";
// echo stats_cdf_normal(0.4,0.5,0.6,4) . "\n";
?> 
```

# asp.net-mvc - 'System.Web.WebPages.Scripts' 和 'System.Web.Optimization.Scripts' 之间的模糊引用

> ID：14844616
> 
> 赞同：0
> 
> 时间：2013-02-13T00:45:21.493
> 
> 标签：asp.net-mvc, system.web.optimization

这可能是一个类似的问题，但由于另一个没有回答，我想我会在这里问。我有一个 mvc 4 应用程序在我的本地运行良好，但是当我部署到我的网络主机时出现以下错误

`ambiguous reference between 'System.Web.WebPages.Scripts' and 'System.Web.Optimization.Scripts'`

在每一个`@Scripts.Render("")`

虽然`@Styles.Render("")`很好。

最简单的解决方法是什么，我不需要在每个@Scripts 前面附加“System.Web.Optimization”。

谢谢！

编辑：我尝试在我的 web.config 中注释掉 System.Web.WebPages，仍然无法正常工作，这是我的 web.config

```
<pages>
  <namespaces>
    <add namespace="System.Web.Helpers" />
    <add namespace="System.Web.Mvc" />
    <add namespace="System.Web.Mvc.Ajax" />
    <add namespace="System.Web.Mvc.Html" />
    <add namespace="System.Web.Optimization" />
    <add namespace="System.Web.Routing" />
    <!--<add namespace="System.Web.WebPages" />-->
  </namespaces>
</pages> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T16:42:24.113

网络主机已通过执行以下操作解决了此问题：

从 GAC 中删除了 MVC 4 引用（因为它是用于 bin 部署的）并且还重新安装了 ASP.NET Web Pages 2。

基本上`System.Web.WebPages.Scripts`不再在 WebPages 命名空间中，重新安装它似乎有帮助。

希望这可以帮助其他人。

射线。

# java - 使用 Spring MVC 从 JSP 获取值

> ID：14844617
> 
> 赞同：0
> 
> 时间：2013-02-13T00:45:21.543
> 
> 标签：java, spring, jsp, model-view-controller

我在*/target/m2e-wtp/web-resources*中有 maven 和我的 JSP insert.jsp 生成的 Spring 项目，它看起来像这样：

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Library</title>
</head>
<body>
    <h1>Insert record</h1>
    <form action="InsertBook" method="POST">
        Title: <input type="text" name="title"/><br>
        Author: <input type="text" name="author"/><br>
        Category: <select name="category">
            <c:forEach var="cat" items="${categories}">
                <option>${cat}</option>
            </c:forEach>
        </select>
        <input type="submit" value="insert"/>
    </form>
</body> 
```

控制器位于*/src/main/java/com/mypackage/web/InsertBook.java*和代码在这里：

```
package com.mypackage.web;

import java.io.IOException;

import javax.servlet.RequestDispatcher;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

/**
 * Servlet implementation class InsertBook
 */
public class InsertBook extends HttpServlet {
@Override
   protected void doGet(HttpServletRequest request, HttpServletResponse response){
     logger.info("GOT IT.");
   }
private static final Logger logger = LoggerFactory.getLogger(HomeController.class);

@Override
protected void doPost(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
    if (request.getCharacterEncoding() == null) {
        request.setCharacterEncoding("UTF-8");
    }

    String title = request.getParameter("title");
    String author = request.getParameter("author");
    logger.info("GOT IT.");

    RequestDispatcher rd = request.getRequestDispatcher("register");
    rd.forward(request, response);
}
} 
```

servlet-context.xml 代码在这里：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/mvc"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:beans="http://www.springframework.org/schema/beans"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/mvc                 http://www.springframework.org/schema/mvc/spring-mvc.xsd
    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd">

<!-- DispatcherServlet Context: defines this servlet's request-processing infrastructure -->

<!-- Enables the Spring MVC @Controller programming model -->
<annotation-driven />

<!-- Handles HTTP GET requests for /resources/** by efficiently serving up static resources in the ${webappRoot}/resources directory -->
<resources mapping="/resources/**" location="/resources/" /> 

<!-- Resolves views selected for rendering by @Controllers to .jsp resources in the /WEB-INF/views directory -->
<beans:bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <beans:property name="prefix" value="/WEB-INF/views/" />
    <beans:property name="suffix" value=".jsp" />
</beans:bean>

<context:component-scan base-package="com.mypackage.web" />
<resources location="/resources/**" mapping="/src/webapp/resources"/> 
```

在尝试访问此 JSP 时，我收到了来自 tomcat 服务器的消息：

```
INFO : com.mypackage.web.HomeController - Welcome home! The client locale is cs.
WARN : org.springframework.web.servlet.PageNotFound - No mapping found for HTTP request         with URI [/web/<c:url value=] in DispatcherServlet with name 'appServlet' 
```

谁能告诉我，如何通过控制器访问在 JSP 中填写到表单中的值，然后将它们打印出来 - 例如通过记录器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T22:28:25.890

这可能是您需要的后期，但您应该实现一个控制器并使用您在 web.xml 中定义的 Spring DispatcherServlet。如果您继续使用 xml 应用程序上下文配置，那么您将在 applicationContext 文件中定义您的控制器 bean 和其他 bean（例如 DAO、服务或其他组件）以及 URLViewResolver 之类的项目。（Spring 3 还允许应用程序上下文的 Java 配置方法）。

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    id="WebApp_ID" version="2.5">
    <display-name>SpringMVC</display-name>
    <welcome-file-list>
        <welcome-file>index.jsp</welcome-file>
    </welcome-file-list>

    <servlet>
        <servlet-name>spring</servlet-name>
        <servlet-class>
            org.springframework.web.servlet.DispatcherServlet
        </servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>spring</servlet-name>
        <url-pattern>*.html</url-pattern>
    </servlet-mapping>
</web-app> 
```

...

```
<bean id="viewResolver"
    class="org.springframework.web.servlet.view.UrlBasedViewResolver">
    <property name="viewClass"
        value="org.springframework.web.servlet.view.JstlView" />
    <property name="prefix" value="/WEB-INF/jsp/" />
    <property name="suffix" value=".jsp" />
</bean>

<bean id="defaultMyDatasource" class="org.apache.commons.dbcp.BasicDataSource"
    destroy-method="close">
    <property name="driverClassName" value="${myDriverClass}" />
    <property name="url" value="${myURL}" />
    <property name="username" value="${myLogin}" />
    <property name="password" value="${myPassword}" />
</bean>
 ... 
```

事情是让 Spring（以及您决定使用的任何 ORM）来简化您的 Java 代码。我建议查看[ViralPatel](http://viralpatel.net/blogs/tutorial-spring-3-mvc-introduction-spring-mvc-framework/)提供的教程或 Craig Walls 的 Spring in Action 书中的示例。这些帮助我们的一些新开发人员更好地了解了 Spring。

# javascript - 覆盖 html 行的 Javascript 函数

> ID：14844620
> 
> 赞同：1
> 
> 时间：2013-02-13T00:45:56.457
> 
> 标签：javascript, html, css

有一个网站引用 .js 文件和 .css 文件来格式化和添加动态元素到其页面。该网站提供了引用我自己在 google 代码存储库中托管的那些 .js 和 .css 文件版本的选项，然后将使用这些文件。

我正在尝试添加另一个用于移动浏览的 css 文件。目前我在当前的 css 中使用 @media 参数，但我想要两个单独的 css 文件。

是否有一些代码可以添加到我的 .js 文件中来覆盖 html，例如：

```
<html>
 <head>
  <link href="desktop.css" ... 
```

变成：

```
<html>
 <head>
  <link href="mobile.css" ... 
```

当 JS 检测到移动浏览器时。请记住，在 HTML 中进一步引用了 js 文件。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T00:57:00.123

请试试这个

```
if (/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent)) {
        document.write('<link rel="stylesheet" type="text/css" href="mobile.css">');
    }
    else {
        document.write('<link rel="stylesheet" type="text/css" href="desktop.css">');
    } 
```

是的，使用 CSS查询是一个[好习惯](http://mobile.smashingmagazine.com/2010/07/19/how-to-use-css3-media-queries-to-create-a-mobile-version-of-your-website/)`@media`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T01:17:44.137

`@import`您可以对规则使用媒体查询：

```
<link href="master.css" … 
```

```
@import url(desktop.css) (min-width:800px);
@import url(mobile.css) (max-width:700px); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T01:29:16.157

> 是否有一些代码可以添加到我的 .js 文件中来覆盖 html？

当然，您可以覆盖 html，但有什么意义呢？为时已晚，浏览器已经加载并应用了 desktop.css。

如果您想维护两个单独的 css 文件，您需要做的是删除您的静态链接标签，并根据浏览器检测动态应用正确的样式表：

```
var stylesheet=document.createElement("link");
stylesheet.type="text/css";
stylesheet.rel="stylesheet";
if (// detect mobile browser) {
    stylesheet.href=mobile.css;
}
else {
    stylesheet.href=desktop.css;
}
document.head.appendChild(stylesheet); 
```

# mysql - 如何强制查询仅选择所有行来获取结果？

> ID：14844626
> 
> 赞同：0
> 
> 时间：2013-02-13T00:46:49.967
> 
> 标签：mysql, sql

嗯，这是一个非常简单的问题，所以我希望你能帮助我。

我有两个具有这种结构的表：

```
-- -----------------------------------------------------
-- Table `mydb`.`product`
-- -----------------------------------------------------
CREATE  TABLE IF NOT EXISTS `mydb`.`products` (
  `id_product` INT NOT NULL ,
  `name` VARCHAR(45) NOT NULL ,
  PRIMARY KEY (`id_product`) )
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `mydb`.`features`
-- -----------------------------------------------------
CREATE  TABLE IF NOT EXISTS `mydb`.`features` (
  `id_feature` INT NOT NULL ,
  `id_product` INT NOT NULL ,
  `description` VARCHAR(45) NOT NULL ,
  PRIMARY KEY (`id_feature`) ,
  INDEX `fk_table2_table1` (`id_product` ASC) ,
  CONSTRAINT `fk_table2_table1`
    FOREIGN KEY (`id_product` )
    REFERENCES `mydb`.`products` (`id_product` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB; 
```

* * *

此查询返回产品 5 的所有功能：

```
select descripcion from features where id_product = 5; 
```

哪个是：

```
expensive
strong
tall 
```

好的，现在我想获取**只有所有这些功能**的表“产品”的所有名称。我试过这样的事情：

```
select p.name from products p, features f
where p.id_product = f.id_product and
f.id_feature in 
(select id_feature from features 
where description in
(select description from features
where id_product = 5); 
```

但它也给了我比我正在寻找的三个功能更少或更多的产品......

我希望我很清楚。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T01:05:25.627

我认为您正在寻找的是那些具有所有这三个功能而没有任何其他功能的产品。如果是这样，这样的事情应该可以工作：

```
SELECT P.Id_Product, P.Name
FROM Products P
    JOIN Features F ON P.id_product = F.id_product 
    JOIN Features F2 ON P.id_product = F2.id_product 
WHERE F.id_feature IN (SELECT id_feature FROM Features WHERE id_product = 5)
GROUP BY P.Id_Product, P.Name
HAVING COUNT(DISTINCT F2.id_Feature) = 3 
```

这是一个浓缩的[Fiddle](http://sqlfiddle.com/#!2/a3c05/1)来演示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T00:52:08.560

我认为您想使用 join 语句-我没有检查查询的确切语法，但您明白了：

```
SELECT * FROM `mydb`.`products` 
```

加入`mydb`。`features`开`mydb`。`features`. `id_product`= `mydb`。`products`.`id_product`

```
WHERE

`mydb`.`features`.`description` = 'strong' OR
`mydb`.`features`.`description` = 'tall' OR
`mydb`.`features`.`description` = 'expensive'; 
```

# c++ - 具有放置新的自定义析构函数

> ID：14844628
> 
> 赞同：1
> 
> 时间：2013-02-13T00:46:51.010
> 
> 标签：c++, memory, memory-management

我有一个使用[placement new](http://www.parashift.com/c++-faq/placement-new.html)分配的对象。当不再需要该对象时，我显式地使用它的析构函数，然后自己处理内存，如网络上的各种资源中所述。

但是，我不清楚编译器是否可以为析构函数调用生成任何额外的“后台魔法”，而不仅仅是为析构函数内部的内容生成指令。实际的问题是：在“placement-new”的情况下，有什么会阻止我使用“自定义析构函数”而不是常规（〜语法）析构函数？简单的类方法，包含所有常用的析构函数代码，但可能额外接受参数。

这是一个例子：

```
class FooBar {
  FooBar() { ... }
  ...
  void myCustomDestructor(int withArguments) { ... }
  ...
};

int main() {
  ...
  FooBar* obj = new (someAddress) FooBar();
  ...
  obj->~FooBar();  // <- You're supposed to do this.
  obj->myCustomDestructor(5);  // <- But can you do this instead?
  ...
  // Then do whatever with the memory at someAddress...
} 
```

自定义析构函数有什么缺点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T00:55:06.383

虽然这在技术上是可行的，但我建议不要这样做。

析构函数的存在是有原因的：编译器负责调用所有基类的析构函数。如果您使用自定义析构函数，则需要自己处理（并且可能会在某处忘记它）。

此外，使用与默认析构函数不同的方法对于阅读您的代码的任何人来说都是显而易见的。

您期望使用自定义析构函数有什么好处？我没有看到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T00:57:55.423

“额外的魔法”是对象仅在调用析构函数后才停止存在。所以你不能在调用后重用内存，`myCustomDestructor`因为对象“仍然存在”，好吧，至少没有未定义的行为。

一种解决方案是制作一个私有析构函数并执行以下操作：

```
class FooBar {
  public:
    FooBar() { ... }
    static void destruct(FooBar& foobar, int withArguments) {
       foobar.myCustomDestructor(withArguments);
       foobar.~FooBar();
    }
  private:
    void myCustomDestructor(int withArguments) { ... }
    ~FooBar() {}
};

int main() {
  ...
  FooBar* obj = new (someAddress) FooBar();

  FooBar::destruct(*obj, 5);

  // Then do whatever with the memory at someAddress...
} 
```

这会调用自定义的“析构函数”和实际的析构函数，从而告诉编译器该对象现在不再存在。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T01:09:55.277

不，如果没有未定义的行为，您将无法做到这一点。我会这样做：

```
void FooBar::prepareForCustomDestruction(int arguments)
{
    do_custom_destruction = true;
    custom_destructor_arguments = arguments;
}

FooBar::~FooBar()
{
    if (do_custom_destruction)
    {
        // custom destruction
    }
    else
    {
        // normal destruction
    }
} 
```

然后如果你想模拟调用自定义析构函数，只需`prepareForCustomDestruction`先调用。

```
obj->prepareForCustomDestuction(5);
obj->~FooBar(); 
```

# php - PHP 谷歌图表 API

> ID：14844629
> 
> 赞同：1
> 
> 时间：2013-02-13T00:46:57.313
> 
> 标签：php, thumbnails, google-visualization

我正在编写一个程序，该程序通过 Google API 获取生成的数据集并在 PHP 中显示它。这非常好并且已经实现，但是我希望将缩略图添加到显示同一数据集的不同图表的代码中（以缩略图形式）。

我正在使用 Google API 生成数据并显示它，但我不确定如何让它更改可视化类型（当前使用 Pie 作为主图表），以便用户能够查看不同的可视化该数据集。

这是有问题的代码：

加载 AJAX API

```
 <script type="text/javascript" src='https://www.google.com/jsapi?autoload={"modules":[{"name":"visualization","version":"1","packages":["corechart","table"]}]}'></script> 
```

数据：

```
var data = new google.visualization.DataTable();
data.addColumn('string', 'City');
data.addColumn('number', 'Number of Crimes');
data.addRows([
             ['Cardiff', 300],
             ['London', 900],
             ['Manchester', 500],
             ['Dublin', 400],
             ['Liverpool', 600]
             ]); 
```

绘制图形：

```
var chart = new google.visualization.PieChart(document.getElementById('chart_div'));
chart.draw(data, options); 
```

以下是缩略图：

```
<div id="left">
  <p>Bar chart</p>
  <a href="#"><img src="http://donsmaps.com/clickphotos/dolnivi200x100.jpg"></img></a>
  <p>Another chart</p>
  <a href="#"><img src="http://donsmaps.com/clickphotos/dolnivi200x100.jpg"></img></a>
  <p>Another chart</p>
  <a href="#"><img src="http://donsmaps.com/clickphotos/dolnivi200x100.jpg"></img></a>
</div>
<div id="right">
  <p>Scatter Chart</p>
  <a href="#"><img src="http://donsmaps.com/clickphotos/dolnivi200x100.jpg"></img></a>
  <p>Another chart</p>
  <a href="#"><img src="http://donsmaps.com/clickphotos/dolnivi200x100.jpg"></img></a>
  <p>Another chart</p>
  <a href="#"><img src="http://donsmaps.com/clickphotos/dolnivi200x100.jpg"></img></a>
</div> 
```

所以基本上，我如何将 google.visualization.BarChart （和其他）放入缩略图的 img src 中？

这甚至可能吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T01:21:01.620

我不得不解决一个类似的问题，并且有两种解决方案（我知道），但都不是完美的。

**第一个解决方案**是使用 Google 的[图像图表 api](https://developers.google.com/chart/image/)从本质上重新创建您的 SVG 图表。您可以通过`src`图像的 URL 传递动态数据。这种方法的主要缺点是 (a) 您必须通过 image-chart api 重新创建每个图表；(b) **Google Image Chart API 已[正式弃用](http://googledevelopers.blogspot.com/2012/04/changes-to-deprecation-policies-and-api.html)**。但是，Google 已承诺至少在 2015 年 4 月之前维护该服务，因此如果您希望该网站到那时会发展，这是一种有效的方法。另一件要提到的事情是，您可能希望创建相对较大的缩略图，然后按比例缩小它们，以便比例（例如文本大小）与最终 SVG 版本的相对比例相匹配。

**第二种解决方案**（我目前正在使用）是使用[URL2PNG 之类的屏幕捕获服务](http://url2png.com). 大多数屏幕截图 API 无法工作，因为它们要么忽略 JS，要么在应用 JS 之前截取屏幕截图，但 url2png 和其他一些服务能够做到这一点。只需创建一个简单的缓存系统来存储每个图表的屏幕截图（您可能希望通过在其他空白模板上显示图表的 URL 访问每个图表，这样您就不必担心屏幕位置或裁剪问题） ，并在数据更改时清除并重建此缓存（不过，您需要一个缓存，因为屏幕捕获服务本身就很慢）。这种方法的主要缺点是您必须为服务付费（我不知道任何可以准确捕获谷歌图表的免费屏幕捕获服务）。

Personally, I'm disappointed that Google hasn't created an easy way to create thumbnails, as it seems like a pretty common task, but to my knowledge some kind of workaround like this is necessary.

# jquery - 基于jQuery的按钮滑块

> ID：14844632
> 
> 赞同：0
> 
> 时间：2013-02-13T00:47:40.703
> 
> 标签：jquery, slider, css-animations

我正在创建我的第一个 jquery 函数。视图窗口上方有一组按钮。视图窗口使用 div 进行初始化，当按下其中一个按钮时，相应的 div 会滑入视图窗口。

它在 Firefox 中可以正常工作（在任何其他浏览器中都不起作用），但最终没有 div 滑入视图窗口。我相信这个问题与超出范围的 css left 值有关，但我不确定如何解决它。

**js**

```
$(function() {
var prevButton = 3;
$("#par3").show();

$(".window_control").click(function() {
    var cur = this.id;

    if(cur != prevButton){

        var activeItem = $("#par"+prevButton);
        var nextItem = $('#par'+cur);

        var slider = $(".slider");
        var finalWidth = slider.width()*2;
        var animationTime = 2000;

        var cssDir = (prevButton > cur) ? "right" : "left";
        var animation = (prevButton > cur) ? { left: '+=' + finalWidth } : { left: '-=' + finalWidth };

        prevButton = cur;

        activeItem
            .animate(animation, animationTime);

        nextItem
            .show()
            .css(cssDir, finalWidth)
            .animate(animation, animationTime);
    }
    return false;
  });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T01:00:01.883

您不使用本机的任何原因：

```
 $('div').show("slide", { direction: "left" }, 1000); 
```

# xcode - 在应用程序中查看网页后，如果不关闭应用程序并重新启动，则无法返回应用程序

> ID：14844633
> 
> 赞同：0
> 
> 时间：2013-02-13T00:47:40.943
> 
> 标签：xcode, webview

我有一个应用程序，它有几个不同的按钮，可以看到不同的视图。其中一个视图将在 iPhone 上的 Safari 中打开一个网站，这是我想要发生的。问题是如果我想回到应用程序，我得到的只是一个白屏，我必须双击主页按钮，关闭应用程序并重新启动它。

这可能与释放内存或视图有关吗？我不确定如何修复它，所以在 safari 中查看网页后，我可以返回应用程序并继续查看其他视图。

这是我在 webViewController.m 中使用的

```
#import "webViewController.h"
@interface webViewController ()
@end
@implementation webViewController
- (void)viewDidLoad
{
NSURL *url = [ [ NSURL alloc ] initWithString: @"http://www.mydomain.com" ];

[[UIApplication sharedApplication] openURL:url];
}
- (void)viewDidUnload
{
[super viewDidUnload];
// Release any retained subviews of the main view.
// e.g. self.myOutlet = nil;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T06:18:48.313

您可以使用 webView 加载此 url，然后您可以在此 webview 上创建一个后退按钮以返回您的应用程序而无需离开应用程序。

```
UIWebView * webView =[[UIWebView alloc]init];

webView.backgroundColor = [UIColor clearColor];

[webView setFrame: CGRectMake(0, 51, 320, 398)];

NSURL *url = [NSURL URLWithString:@"http://www.mydomain.com"];
NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];
[webView setDelegate:self];
webView loadRequest:requestObj];
[self.view addSubview:webView]; 
```

您还可以使用 webView 的一些委托方法来了解您的页面是否已加载

```
-(void)webViewDidStartLoad:(UIWebView *)webView
{

}

-(void)webViewDidFinishLoad:(UIWebView *)webView
{

}

-(void)webView:(UIWebView *)webView didFailLoadWithError:(NSError *)error
{

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T05:50:43.210

啊，我想通了，我已经添加

```
web view.scalesPagesToFit = Yes 
```

声明并在 webview 中打开网页完全符合我的要求。

# java - 对象化嵌入数组中的嵌入数组不能持久化

> ID：14844637
> 
> 赞同：0
> 
> 时间：2013-02-13T00:48:05.213
> 
> 标签：java, google-app-engine, objectify

我的班级层次结构如下 学校 - 包含员工列表 - 包含资格列表 员工是学校中的嵌入式列表。我可以用它的员工坚持一所学校没问题。现在，当我将资格列表作为嵌入字段添加到员工时，我收到以下错误

您不能嵌套多个 @Embedded 数组或集合

objectify 文档似乎表明我应该能够做到这一点，前提是对象是可序列化的。我错过了什么吗？如果这是它的工作方式，有没有办法解决它？

更新：

学校班

```
 import java.io.Serializable;
    import java.util.ArrayList;
    import java.util.List;
    import javax.persistence.Embedded;
    import javax.persistence.Id;
    import com.googlecode.objectify.annotation.Entity;

    @Entity
    @SuppressWarnings("serial") 
    public class School implements Serializable
    {
        @Id
        private String title;

        @Embedded
        private List<Employee> employees = new ArrayList<Employee>();

        public School ()
        {       
        }
        public School (String title)
        {       
            this.title = title;
        }

        public void addEmployee( Employee employee )
        {
            this.employees.add(employee);
        }
    } 
```

员工类

```
 import java.io.Serializable;
    import java.util.ArrayList;
    import java.util.List;
    import javax.persistence.Embedded;
    import javax.persistence.Id;
    import com.googlecode.objectify.annotation.Entity;

    @Entity
    @SuppressWarnings("serial") 
    public class Employee implements Serializable
    {
        @Id
        private String title;

        @Embedded
        private List<String> qualifications = new ArrayList<String>();

        public Employee ()
        {       
        }
        public Employee (String title)
        {       
            this.title = title;
        }

        public void addQualification( String qualification )
        {
            this.qualifications.add(qualification);
        }
    }
Caused by: java.lang.IllegalStateException: You cannot nest multiple @Embedded arrays or collections. A second was found at private java.util.List com.app.nquizitive.shared.Employee.qualifications
at com.googlecode.objectify.impl.save.EmbeddedMultivalueFieldSaver.<init>(EmbeddedMultivalueFieldSaver.java:36)
at com.googlecode.objectify.impl.save.EmbeddedCollectionFieldSaver.<init>(EmbeddedCollectionFieldSaver.java:21)
at com.googlecode.objectify.impl.save.ClassSaver.<init>(ClassSaver.java:64)
at com.googlecode.objectify.impl.save.EmbeddedMultivalueFieldSaver.<init>(EmbeddedMultivalueFieldSaver.java:43)
at com.googlecode.objectify.impl.save.EmbeddedCollectionFieldSaver.<init>(EmbeddedCollectionFieldSaver.java:21)
at com.googlecode.objectify.impl.save.ClassSaver.<init>(ClassSaver.java:64)
at com.googlecode.objectify.impl.save.ClassSaver.<init>(ClassSaver.java:29)
at com.googlecode.objectify.impl.Transmog.<init>(Transmog.java:322)
at com.googlecode.objectify.impl.ConcreteEntityMetadata.<init>(ConcreteEntityMetadata.java:75)
at com.googlecode.objectify.impl.Registrar.register(Registrar.java:69)
at com.googlecode.objectify.ObjectifyFactory.register(ObjectifyFactory.java:209)
at com.googlecode.objectify.ObjectifyService.register(ObjectifyService.java:38)
at com.app.nquizitive.server.dao.SchoolDao.<clinit>(SchoolDao.java:12) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T05:16:29.550

有两种不同的注解：

*   @Embed (@Embedded in ofy3)
*   @Serialize (@Serialized in ofy3)

如果您想序列化某些内容，请使用第二个。如果您想要嵌入某些东西，请使用第一个。您不能嵌套 @Embed(ded) 列表，但可以将 @Serialize(d) 列表放入嵌入列表中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T01:29:05.397

上面哪些类是用@Entity 注释的？听起来 School 是一个数据存储实体，而Employees 不是（即它们只是被序列化为 School），而资格不是（即它们只是被序列化为Employees）。

@Embedded 的 Objectify 注释在非实体类中是不需要/相关/允许的。

# c - c 在 MAC OS X 上调用 DH_generate_key 例程时，openssl 校验和错误

> ID：14844640
> 
> 赞同：1
> 
> 时间：2013-02-13T00:48:12.867
> 
> 标签：c, macos, openssl

首先，我不确定这是一个特定的平台错误。我正在使用 openssl 库来生成大素数和私钥/公钥。当素数相对较小（128 位）时，它运行良好，但当素数变大（256、512 位）时，我无法编译并出现错误。

```
DH * params = DH_new(); 
params = DH_generate_parameters(512, 5, NULL, NULL);

DH_generate_key(params); // can't get through this point when prime bits getting bigger 
```

上面的代码产生了一个错误：

```
 malloc: *** error for object 0x7ffba8403c88: incorrect checksum for freed object - object was probably modified after being freed.
*** set a breakpoint in malloc_error_break to debug 
```

我在 MAC OX 10.8.2 上使用 openssl 1.0.1。我很感激任何建议。

**更新**：产生这种错误的另一种方法是在上述代码之前创建一个线程。无论哪种方式，它总是在子程序 DH_generate_key 处给我错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T22:54:53.157

与堆损坏相关的错误消息（例如此消息）`malloc()`表明您存在内存管理错误，例如在释放内存后使用内存，或超出分配的内存。此类`malloc()`错误消息出现在与实际编程错误发生位置不同的位置是正常的。在 Valgrind 中运行您的应用程序，以获取有关问题所在的一些有用信息。

与错误无关，但您在上面的这两行代码中存在内存泄漏：

```
DH * params = DH_new(); 
params = DH_generate_parameters(512, 5, NULL, NULL); 
```

指向已分配`DH`结构的指针在第二行被 .`DH`返回的新结构覆盖`DH_generate_parameters()`。分配的缓冲区`DH_new()`丢失。但这不是错误消息的原因。

# jquery-ui - jQuery 过渡效果不起作用，需要改进

> ID：14844649
> 
> 赞同：0
> 
> 时间：2013-02-13T00:49:09.633
> 
> 标签：jquery-ui

我正在尝试构建一个 Windows 8 Metro 风格页面，其中包含一堆无序列表，每隔几秒隐藏和显示列表项，每个都有不同的动画效果。所以我正在尝试构建一些我可以使用的不同类型的过渡效果。

如果您查看我的[jsfiddle](http://jsfiddle.net/ZNm3n/4/)（或参见下面的代码），您可以看到我有一些效果（淡入淡出和向上/向下滑动）但我的爆炸和折叠效果不起作用。

为什么爆炸和折叠不起作用？

**更新：explode 和 fold 现在正在工作，感谢 dsundy 指出我的愚蠢，但仍然希望对...有所帮助**

另外，虽然向左/向右滑动可以工作，但是否可以让新项目同时滑入，这样一个 LI 向左滑动和另一个从右侧滑入之间没有很长的间隙？

使用爆炸和折叠是否有可能使新的 LI 出现在传出的 LI 下方？

对任何更有趣的过渡有什么建议吗？

```
$(el).hide("explode", { pieces: 4 }, 1000, function () {
  $(n).show("explode", { pieces: 4 }, 1000);
});

$(el).hide("fold", {  }, 1000, function () {
    $(n).show("fold", {  }, 1000);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T00:58:58.547

分解和折叠不起作用，因为您没有这些按钮的单击功能。

# jquery - 单击时 LI 的动画位置

> ID：14844651
> 
> 赞同：0
> 
> 时间：2013-02-13T00:49:21.013
> 
> 标签：jquery, jquery-animate, position, html-lists

我确定我在这里遗漏了一些愚蠢的东西，但我看不到它。
应该发生的是，对于垂直列表，当单击 LI 时，它会向右移动 10px，如果单击另一个 LI，则它会向后移动，并且单击的 LI 向右移动。
这在列表中运行良好，但如果我回到前一个 LI，前一个选择的 LI 会按原样向后移动，但单击的 LI 没有动画，所以当你来回单击时，LI 会继续向后移动

```
$("#navig li").click(function(){
$("#navig li.selected").animate({ 
        left: "-=10px",
      }, 300 );
    $("#navig li.selected").removeClass("selected")

    $(this).addClass("selected")
    $(this).animate({ 
        right: "-=10px",
      }, 300 );
}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T01:04:22.143

你需要这样的东西吗？

[**http://jsfiddle.net/v3LWL**](http://jsfiddle.net/v3LWL)

```
$("#navig li").click(function(){
    var $this  = $(this),
        el = $this.siblings().filter(".selected");

    el.animate({left: 0}, 300, function(){
        $(this).removeClass("selected");
    });

    $this.animate({left: 10}, 300, function(){
        $(this).addClass("selected");
    });

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T01:32:32.533

如果您调整`left`正负，则对其他条件执行相反的操作，但对相同的位置属性执行此操作`left`。

# ios - StageWebView、iOS、本地文件

> ID：14844652
> 
> 赞同：1
> 
> 时间：2013-02-13T00:49:53.177
> 
> 标签：ios, apache-flex, mobile, air

我正在使用 Flash Builder、Flex 4.6 和 AIR 3.5 为 IOS 构建一个移动应用程序。我正在研究使用 StageWebView 呈现一些 HTML5 内容。

我想做的是将内容构建到应用程序中，而不是将其放在服务器上。它是相对静态的。但我读到（并确认）StageWebView 不能直接使用应用内文件。但是根据建议，我让应用程序将内容复制到临时文件夹，然后为 StageWebView 创建一个 file:// URL，这似乎可行：

```
//  create the view
var webView:StageWebView = new StageWebView();
webView.stage = this.stage;
webView.viewPort = new Rectangle( 0, 0, stage.stageWidth, stage.stageHeight);

//  copy the HTML5 content to a temp directory
var src:File = File.applicationDirectory.resolvePath("myFolder");
var temp:File = File.createTempDirectory().resolvePath("myFolder");
copyFolderContentsToAnotherFolder(src,temp);

//  what's the URL
var newPath:String = "file://" + temp.nativePath + "/index.html";

//  load it
webView.loadURL(newPath); 
```

这是一个坏主意吗？临时文件会堆积在我的设备中而无法删除吗？

我还想过让应用程序通过侦听端口并在请求文件到来时为请求的文件提供数据来实现最小的 HTTP 服务器。这将允许我们从应用程序内的位置向 StageWebView 提供文件，而无需复制。我们在桌面空中应用程序中执行此操作，并且效果非常好。但是，该方法使用 ServerSocket，我发现移动设备不支持该方法。有没有其他方法可以做到这一点？

最后，StageWebView 在 Flash Builder iOS 模拟器中不能很好地工作，导致调试困难。最好只是去获取 FB 4.7，它（应该）允许我将它与 XCode 的 iOS 模拟器一起使用吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T17:14:01.287

好吧，看来我可以直接处理应用内内容，我只需要为其构造一个 file:// URL：

```
var src:File = File.applicationDirectory.resolvePath("myFolder/index.html");
var newPath:String = "file://" + src.nativePath;
webView.loadURL(newPath); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-01T01:33:29.860

似乎 StageWebView 与 iOS 一起使用时，最适合远程文件。因此，我正在使用一些 Actionscript 代码来实现一个简单的 HTTP 服务器，提供本地文件。然后，我给 StageWebView 使用 localhost 的 http url 和一个端口号。工作膨胀。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-08T23:01:18.000

我已经太久没有考虑这个问题了。但我记得我可以在不复制 iOS 的情况下在应用程序内容中使用。但我今天正在阅读，这在 Android 上可能是不可能的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-20T19:41:50.407

Adobe 更新 SDK 后 - @Jesse Crosen 方法不适用于 android，但仅适用于 iOS。要使其在 Android 上运行，您必须像这样复制打包文件：

```
var htmlFile:File = File.applicationDirectory.resolvePath("html/index.html");  
var fileDest:File = File.applicationStorageDirectory.resolvePath("html/index.html"); 
htmlFile.copyTo(fileDest, true);
webView.loadURL("file://" + htmlFile.nativePath); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-10-22T20:42:10.597

对于正在寻找比编写 HTTP 服务器更简单的该问题的当前解决方案的任何人，[这](http://www.mikechambers.com/blog/2008/11/06/getting-the-file-uri-of-a-file-in-an-air-apps-install-directory/)对我有用（仅在 iOS 上）：

```
webView.loadURL(new File(new File("app:/myFolder/index.html").nativePath).url); 
```

但是有一个警告，您似乎无法在 URL 的末尾传入查询字符串或哈希。加载主要内容后，可以通过加载`javascript:`URL 将数据传递给 HTML 内容。

这里有一个页面，其中包含涵盖 iOS 和 Android 的更广泛[信息](http://www.dlgsoftware.com/StageWebViewAndLocalFiles.php)。

# php - 如何对flv视频进行悬停预览？

> ID：14844653
> 
> 赞同：2
> 
> 时间：2013-02-13T00:49:59.697
> 
> 标签：php, ffmpeg, thumbnails

我正在开发一个托管视频的网站；我确实安装了 ffmpeg 并且可以正常工作。我知道如何从视频中提取单帧以用作显示图像，但我需要找到一种方法，当有人将鼠标悬停在视频上时，它会翻转几帧。我几天来一直在寻找解决方案，但似乎没有任何效果。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T00:57:03.187

有很多方法可以解决这个问题。我真的不明白您是指播放器中的预览还是缩略图上的预览；我将假设后者（但无论如何逻辑都保持不变）。
从电影中提取帧后，最难的部分就完成了。你现在可以做什么：

1.  悬停时，使缩略图加载“imagename+n”，直到达到 404（或者您可以硬编码要加载的帧数）
2.  自动从您的帧中生成 gif，并在悬停时将静态图像与 gif 交换
3.  如果是我们所说的播放器，那么你可以使用与#1相同的逻辑：让它按顺序加载每一帧。

我赶紧[摆弄着什么](http://jsfiddle.net/xananax/ySSGG/)。下面的这个例子是解释小提琴的伪代码

html

```
<div class="thumbnail">
   <div class="image">
    <img src="something" class="loaded"/>
   </div>
</div> 
```

js

```
$('.thumbnail')
    .on('mouseenter',function(){next($(this));})
    .on('mouseleave',function(){stop($(this));})

function next(){
   start timer
   on time, go to next thumbnail
   does it exist? then swap current thumbnail with next thumbnail and stop;
   does it not? check number of thumbnails loaded
     is it equal to 6? then we reached the end, loop back to start and stop;
     is it not? then add the new thumb and begin loading it
        while doing that, loop back to start;
}

function stop(){stop the timer} 
```

它不是很优雅，并且绝对不适用于多个缩略图（如果您不为每个缩略图本地存储变量，无论是使用它们的数据属性还是使用闭包，您都会遇到问题），但它提供了一个想法。

# image - 链接图像之谜

> ID：14844656
> 
> 赞同：0
> 
> 时间：2013-02-13T00:50:41.803
> 
> 标签：image, hyperlink

我正在一个有很多图像的网站上工作。我已经把所有的图片都链接了，除了一张。我不知道为什么这张图片不会链接。如果有人有任何想法，那将是一个很大的帮助。谢谢！

此外，我要链接的图像名为：timthumb.php.jpeg 而且，这是该网站的链接：[http ://emilymagnuson.com/bobsoutdoorgoods/Novelty1.html](http://emilymagnuson.com/bobsoutdoorgoods/Novelty1.html)

这是链接图像的代码片段：

```
 <div class="centerbox4" id="centerbox4">
    <div class="singleproductimage" id="singleproductimage"><img     src="../../../images/_ProductImages/Cycle/Novelty/Large400/timthumb.php.jpeg" width="400"    height="400" alt="REI HooDoo Tent" />
   </div>
    <div class="ProductDescription" id="ProductDescription">
      <p><span class="darkparagraph">ULock Belt</span><br />
        This ULock Belt is very handy for keeping your ULock in a safe place.</p>
      <p><br />
        <span class="largeprice">$55.00</span>
        <br /><br />
        Item # 748114
        <br />
        <form id="form1" name="form1" method="post" action="">
      </p>
      <p>
          <label for="menudrop"></label>

        <div class="dropdown" id="dropdown">
<form action="http://www.mydomain.com/myformhandler.cgi" method="post" name="dropdown"     id="dropdown">
                    <div align="left">
                      <select name="mydropdown">
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                      </select>
                    </div>
        </form>
     <br />
     <a href="#"><img src="../../../images/addtocart.jpg"     onmouseover="../../images/addtocarthover.jpg" onmouseout="../../images/addtocart.jpg"     width="150" height="39" alt="Add To Cart" /></a>
   </div>
  </p>
            </div>
  </div>
<!--EndCenterBox2-->
</div>
<!--EndCenterBox--> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T00:57:32.817

一般来说，在诊断这样的损坏链接时，首先确认图像是您认为应该在的位置。然后通过将图像复制到您的工作站并尝试在那里查看来确认图像本身可以作为图像读取并且没有损坏。然后尝试直接在浏览器中链接到它。这可能是一些简单的错误。Safari、Chrome 或 Firefox 插件（例如[Firebug](http://getfirebug.com/)）附带的开发人员工具也可以提供很大帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T01:00:30.677

似乎问题在于损坏图像的 URL 实际上不是图像。只需在浏览器中访问此 URL：

[http://emilymagnuson.com/bobsoutdoorgoods/images/_ProductImages/Cycle/Novelty/timthumb.php.jpeg](http://emilymagnuson.com/bobsoutdoorgoods/images/_ProductImages/Cycle/Novelty/timthumb.php.jpeg)

PHP 吐出以下错误：

> 解析错误：语法错误，第 57 行 /home/content/e/m/i/emilymagnuson/html/bobsoutdoorgoods/images/_ProductImages/Cycle/Novelty/timthumb.php.jpeg 中的意外 T_STRING

并且`timthumb.php`似乎是一个 PHP 脚本。

查看网站本身中的代码，您似乎出于某种原因对该链接进行了硬编码：

```
<!--ProductBox-->     
    <div class="productbox" id="productbox">
    <!--ProductImage-->   
      <div class="productimage" id="productimage"><a href="IndividualProductPages/Cycle/Novelty/ULockBelt.html"><img src="images/_ProductImages/Cycle/Novelty/timthumb.php.jpeg" width="200" height="200" alt="ULock Belt" /></a>

      </div><!--EndProductImage-->

<!--ProductDescription-->        
        <div class="Productdescription" id="Productdescription"><span class="lightparagraph">ULock Belt</span><br />
          <span class="darkparagraph"> $55.00</span>          

          <!--EndProductDescription-->        
    </div>

    </div>
<!--EndProductBox--> 
```

对您而言，这似乎是一个简单的图像 URL 错误。

# c# - 将浮点值和双精度值与增量进行比较？

> ID：14844659
> 
> 赞同：4
> 
> 时间：2013-02-13T00:51:10.903
> 
> 标签：c#, .net, floating-point

据我了解，必须仔细比较浮点类型的值，以避免固有浮点错误的问题。这可以通过将值与错误阈值进行比较来改善。

例如，以下解决方案比简单的`x == y`测试更有用：

```
static float CompareRelativeError(float x, float y) {
    return Math.Abs(x - y) / Math.Max(Math.Abs(x), Math.Abs(y));
}
static bool CompareAlmostEqual(float x, float y, float delta) {
    return x == y || CompareRelativeError(x, y) < delta;
}

// apologies if this is a poor example
if (CompareAlmostEqual(1f/10f, 0.1f)) { ... } 
```

上述解决方案源自以下资源： [在 Java 中直接比较 2 float/double 是否安全？](https://stackoverflow.com/questions/6786254/is-it-safe-when-compare-2-float-double-directly-in-java/6786286#answer-6786580)

虽然我无法找到任何文献来证实这一点，但在我看来，对于像`x > y`. 例如，如果`x`和`y`本质上相等，那么一个怎么可能大于另一个...

```
static bool CompareGreater(float x, float y, float delta) {
    return x > y && !CompareAlmostEqual(x, y, delta);
} 
```

因此以下内容适用于`x >= y`：

```
static bool CompareGreaterOrEqual(float x, float y) {
    return x >= y;
} 
```

我的假设正确吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T01:01:03.727

等式测试正是 delta（或 epsilon）技术用于浮点值的原因。

例如，我们希望 3 等于 2.999999... 达到一定的精度。

因此`CompareGreaterOrEqual`，当定义为：

```
static bool CompareGreaterOrEqual(float x, float y) {
    return x >= y;
} 
```

它应该是：

```
static bool CompareGreaterOrEqual(float x, float y, float delta) {
    return x >= y || CompareAlmostEqual(x, y, delta);
} 
```

注意：`x >= y`在第一次测试中可能只是`x > y`因为 delta 比较照顾平等：

```
static bool CompareGreaterOrEqual(float x, float y, float delta) {
    return x > y || CompareAlmostEqual(x, y, delta);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T01:00:00.827

既然我们已经同意`=`这种情况下的操作符是通过 完成的`CompareAlmostEqual`，那么在其中使用它也是有意义的`CompareGreaterOrEqual`。

```
static bool CompareGreaterOrEqual(float x, float y, float delta) {
    return x >= y || CompareAlmostEqual(x, y, delta);
} 
```

此外，虽然这在很大程度上取决于您将如何使用这些函数，但我还将创建`delta`一个在整个类中使用的常量变量，以确保使用相同的值（而不是将其作为参数传递）。

# php - __autoload 并包含文件

> ID：14844660
> 
> 赞同：0
> 
> 时间：2013-02-13T00:51:17.887
> 
> 标签：php

我有一个使用库文件的站点，该库文件`lib.client.php`存储在`php`我的标准网站根目录的文件夹中，并包含我构建的一系列类。

我`require_once`几乎在每个页面中都必须使用这个库文件，我可以实现它的最佳方法是什么？此外，我是否应该使用一些功能组合`__autoload`来完成此任务？

看到了一个非常相似的问题，它触及了这个问题，但提供了一个我不能真正使用的非常具体的答案，并且稍微研究了这个`__autoload`功能，我想得到一个更详细的答案来满足我的要求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T00:56:28.967

如果：

*   您有许多类在不同的文件中以不同的顺序使用；
*   类分布在许多文件中；
*   有一种严格的方法可以告诉哪个类在哪个文件中。

在您的情况下：只需使用 require_once （或重构，但我不会打扰）。

# python - 如何创建具有可变参数的 Python 函数

> ID：14844669
> 
> 赞同：-1
> 
> 时间：2013-02-13T00:51:52.673
> 
> 标签：python, function, weighting

我想在 Python 中创建一个加权函数。但是权重的数量会有所不同，我需要该函数具有可选参数（例如，您可以找到 and 的成本`weightA`，`weightB`但您也可以找到以上所有内容。

基本功能如下所示：

```
weightA = 1
weightB = 0.5
weightC = 0.33
weightD = 2

cost = 70

volumeA = 100
volumeB = 20
volumeC = 10
volumeD = 5

def weightingfun (cost, weightA, weightB, volumeA, volumeB):
    costvolume = ((cost*(weightA+weightB))/(weightA*volumeA+weightB*volumeB))
    return costvolume 
```

如何更改功能，以便例如也可以称量体积 C 和体积 D？

提前谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T00:55:49.447

替换`weightA`, `weightB`, `volumeA`,`volumeB`参数将收集参数。例如：

*   重量列表和体积列表
*   （重量，体积）元组的列表/集合
*   具有重量和体积属性的对象列表/集合

最后一个例子：

```
def weightingfun(cost, objects):
    totalWeight = sum((o.weight for o in objects))
    totalWeightTimesVolume = sum(((o.weight * o.volume) for o in objects))
    costvolume = (cost*totalWeight)/totalWeightTimesVolume
    return costvolume 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T01:10:59.093

你最好使用具有重量/体积属性的对象（劳伦斯的帖子）

但是要展示如何压缩两个元组：

```
weights = (1, 0.5, 0.33, 2)
volumes = (100, 20, 10, 5)

def weightingfun(cost, weights, volumes):
    for w,v in zip(weights, volumes):
            print "weight={}, volume={}".format(w, v)

weightingfun(70, weights, volumes) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T01:16:54.290

两个选项：一个使用两个列表：

```
 # option a:
     # make two lists same number of elements
     wt_list=[1,0.5,0.33,2]
     vol_list=[100,20,10,5]

     cost = 70

     def weightingfun (p_cost, p_lst, v_lst):
          a = p_cost * sum(p_lst)
         sub_wt   = 0
         for i in range(0,len(v_lst)):
             sub_wt = sub_wt + (p_lst[i] *  v_lst[i])
         costvolume = a/sub_wt
        return costvolume

     print weightingfun (cost, wt_list, vol_list) 
```

# 第二种选择是使用字典

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T02:17:37.117

这可以通过对元组或列表的操作非常简单地完成：

```
import operator
def weightingfun(cost, weights, volumes):
    return cost*sum(weights)/sum(map( operator.mul, weights, volumes))

weights = (1, 0.5, 0.33, 2)
volumes = (100, 20, 10, 5)
print weightingfun(70, weights, volumes) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-13T03:21:31.337

其实也有这个方法，最后和传一个list是一样的，

```
def weightingfun2(cost, *args):
    for arg in args:
       print "variable arg:", arg

if __name__ == '__main__':
     weightingfun2(1,2,3,"asdfa") 
```

要了解真正发生的事情的详细信息，您可以到那里： http: [//www.saltycrane.com/blog/2008/01/how-to-use-args-and-kwargs-in-python/](http://www.saltycrane.com/blog/2008/01/how-to-use-args-and-kwargs-in-python/)

# redis - 如何查看我的 Redis 数据库 current_size？

> ID：14844672
> 
> 赞同：52
> 
> 时间：2013-02-13T00:52:21.020
> 
> 标签：redis

我知道 redis-cli，以及 info 和 config 命令。但是，它们没有任何说明当前数据库大小的信息。我怎么能弄明白呢？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-02-13T02:19:39.113

使用`INFO`命令。完整的细节在这里：[http ://redis.io/commands/info](http://redis.io/commands/info)

样本输出：

```
redis-cli
redis 127.0.0.1:6379> info
redis_version:2.4.11
redis_git_sha1:00000000
redis_git_dirty:0
arch_bits:64
multiplexing_api:kqueue
gcc_version:4.2.1
process_id:300
uptime_in_seconds:1389779
uptime_in_days:16
lru_clock:1854465
used_cpu_sys:59.86
used_cpu_user:73.02
used_cpu_sys_children:0.15
used_cpu_user_children:0.11
connected_clients:1
connected_slaves:0
client_longest_output_list:0
client_biggest_input_buf:0
blocked_clients:0
used_memory:1329424
used_memory_human:1.27M
used_memory_rss:2285568
used_memory_peak:1595680
used_memory_peak_human:1.52M
mem_fragmentation_ratio:1.72
mem_allocator:libc
loading:0
aof_enabled:0
changes_since_last_save:0
bgsave_in_progress:0
last_save_time:1360719404
bgrewriteaof_in_progress:0
total_connections_received:221
total_commands_processed:29926
expired_keys:2
evicted_keys:0
keyspace_hits:1678
keyspace_misses:3
pubsub_channels:0
pubsub_patterns:0
latest_fork_usec:379
vm_enabled:0
role:master
db0:keys=23,expires=0 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2017-08-20T19:17:33.597

您可以使用以下命令列出为其定义了一些键的数据库：

```
INFO keyspace
# Keyspace
db0:keys=6002,expires=0,avg_ttl=0
db9:keys=20953296,expires=0,avg_ttl=0
db10:keys=1,expires=0,avg_ttl=0 
```

您还可以使用`Select 0`or`Select 1`或任何要检查当前大小的数据库。选择 db 后使用`dbsize`命令显示所选 db 的大小。

```
Select 9
OK
dbsize
(integer) 20953296 
```

用于列出您的 redis 类型的整体信息`info`并仅查看内存只需键入

```
INFO Memory
# Memory
used_memory:1259920
used_memory_human:1.20M
used_memory_rss:1227000
used_memory_peak:2406152
used_memory_peak_human:2.29M
used_memory_lua:36864
mem_fragmentation_ratio:0.97
mem_allocator:dlmalloc-2.8 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2021-04-06T11:23:28.590

`redis-cli info memory | grep 'used_memory.*human';`

样本输出：

```
used_memory_human:20.66M
used_memory_rss_human:24.26M
used_memory_peak_human:46.14M
used_memory_lua_human:37.00K
used_memory_scripts_human:0B 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2018-08-29T09:16:00.913

您也可以使用一行命令执行此操作：

```
redis-cli -p 6379 -a  password info| egrep "used_memory_human|total_system_memory_human" 
```

这将显示 Redis 使用的总内存和服务器上的总 RAM。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2015-01-27T15:15:17.020

使用`dbsize`命令获取数据库中key的数量

# sql-server - 避免在迁移后填补身份空白

> ID：14844685
> 
> 赞同：1
> 
> 时间：2013-02-13T00:54:05.267
> 
> 标签：sql-server, sql-server-2008, replication, sql-server-2012, identity-column

我已通过事务复制将一系列表从 SQL Server 2008 迁移到新的 SQL Server 2012 机器。到目前为止效果很好，我还复制了索引和默认值，以确保复制的数据与原始数据相同。

当我将新机器从复制中分离出来以独立作为旧机器的替代品时，SQL Server 开始填充我的标识列中的所有空白，这可能会导致不同的问题。即我的代码不能再依赖于最后插入的行的最高 ID。以前删除的用户 ID 也会被回收，这也可能导致用户方面的混乱。

有没有办法让我的数据库的新实例与旧的复制实例完全一样？以我的经验，数据库的运行实例永远不会填补先前删除的行的空白。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T02:08:26.187

我也从来没有见过这个。但是，表在部署时可能会重新设置为 0。观察这个例子：

```
SET NOCOUNT ON;
GO
CREATE TABLE dbo.fooblat(id INT IDENTITY(1,1));
GO
INSERT dbo.fooblat DEFAULT VALUES;
GO 3
DELETE dbo.fooblat WHERE id = 2;
GO
DBCC CHECKIDENT('dbo.fooblat', RESEED, 0);
GO
INSERT dbo.fooblat DEFAULT VALUES;
GO 3
SELECT id FROM dbo.fooblat ORDER BY id;
GO
DROP TABLE dbo.fooblat; 
```

结果：

```
id
----
1
1
2
3
3 
```

现在，如果标识列也是主键或唯一的，同样的操作仍然可以填补空白，只有重复的违规行为会失败。所以再次重复这个表定义：

```
CREATE TABLE dbo.fooblat(id INT IDENTITY(1,1) PRIMARY KEY);
GO 
```

产生这个（第一个*成功*的插入填补了空白）：

```
id
----
1
2
3 
```

> 消息 2627，级别 14，状态 1，第 1 行
> 违反主键约束“PK_ *fooblat* _3213E83F6BF0A0C6”。无法在对象“dbo.fooblat”中插入重复键。重复键值为 (1)。
> 消息 2627，级别 14，状态 1，第 1 行
> 违反主键约束“PK_ *fooblat* _3213E83F6BF0A0C6”。无法在对象“dbo.fooblat”中插入重复键。重复键值为 (3)。

您可以通过确保在将表放在其他系统上时正确播种表来避免这种情况。这可能只是意味着使用更可靠的部署技术，或者可能意味着 - 在填充之后和让任何用户进入之前 - 你做这样的事情：

```
DECLARE @i INT, @sql NVARCHAR(MAX);
SELECT @i = MAX(id) FROM dbo.fooblat;
SET @sql = N'DBCC CHECKIDENT(''dbo.fooblat'', RESEED, ' + RTRIM(@i) + ');';
EXEC sp_executesql @sql; 
```

# xcode - xcode 模板更改框架路径

> ID：14844686
> 
> 赞同：0
> 
> 时间：2013-02-13T00:54:09.703
> 
> 标签：xcode, project, xcode-template

是否可以在 templateInfo.plist 中更改框架的加载位置？

我似乎无法找到如何将框架也安装到 iPhoneOS#.#SDK 和 iPhoneSimulatorOS#.#SDK System/Library/Frameworks 目录来更改它。

我从安装它的那些目录加载了我的框架，但我请求更改模板以从另一个安装位置加载框架以最小化磁盘空间。

示例 plist xml：

```
<key>Frameworks</key>
        <array>
            <string>MobileCoreServices</string>
            <string>My_New_SDK</string>
            <string>AddressBook</string>
            <string>AddressBookUI</string>
            <string>AudioToolbox</string>
            <string>AVFoundation</string>
            <string>CFNetwork</string>
            <string>CoreGraphics</string>
            <string>CoreLocation</string>
            <string>CoreTelephony</string>
            <string>ExternalAccessory</string>
            <string>Foundation</string>
            <string>MapKit</string>
            <string>MessageUI</string>
            <string>MediaPlayer</string>
            <string>Security</string>
            <string>SystemConfiguration</string>
            <string>QuartzCore</string>
            <string>UIKit</string>
        </array> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T21:40:08.587

如果您从模板目标区域的框架列表中删除 My_New_SDK，您可以在模板中为框架创建一个节点，并在该节点中指定绝对路径。不要忘记将节点添加到模板 plist 中的 Nodes 数组中

```
<key>MY_New_SDK.framework</key>
<dict>
<key>Path</key>
<string>/PATH_TO_FRAMEWORK/My_New_SDK.framework</string>
    <key>PathType</key>
    <string>Absolute</string>
</dict> 
```

# python - 标识符中的无效字符

> ID：14844687
> 
> 赞同：43
> 
> 时间：2013-02-13T00:54:09.853
> 
> 标签：python, python-3.x

我正在处理 HP Code Wars 2012 中的信件分发问题。我不断收到一条错误消息，上面写着“标识符中的字符无效”。这是什么意思，如何解决？

[这](http://hpcodewars.org/past/cw15/problems/2012ProblemsFinalForPrinting.pdf)是包含信息的页面。

```
import  string

def  text_analyzer(text):
'''The text to be parsed and
the number of occurrences of the letters given back
be. Punctuation marks, and I ignore the EOF
simple. The function is thus very limited.

'''
    result =  {}

# Processing
    for  a in  string.ascii_lowercase:
    result [a] =  text.lower (). count (a)

    return  result

def  analysis_result (results):

# I look at the data
    keys =  analysis.keys ()
    values \u200b\u200b=  list(analysis.values \u200b\u200b())
    values.sort (reverse = True )

# I turn to the dictionary and
# Must avoid that letters will be overwritten
    w2 =  {}
    list =  []

    for  key in  keys:
        item =  w2.get (results [key], 0 )
        if  item = =  0 :
            w2 [analysis results [key]] =  [key]
        else :
            item.append (key)
            w2 [analysis results [key]] =  item

# We get the keys
    keys =  list (w2.keys ())
    keys.sort (reverse = True )

    for  key in  keys:
        list =  w2 [key]
        liste.sort ()
        for  a in  list:
            print (a.upper (), "*"  *  key)        

text =  """I have a dream that one day this nation will rise up and live out the true
meaning of its creed: "We hold these truths to be self-evident, that all men
are created equal. "I have a dream that my four little children will one day
live in a nation where they will not be Judged by the color of their skin but
by the content of their character.
# # # """

analysis result =  text_analyzer (text)
analysis_results (results) 
```

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2013-02-13T01:08:32.123

该错误`SyntaxError: invalid character in identifier`意味着变量名称、函数等的中间有一些字符，不是字母、数字或下划线。实际的错误消息将如下所示：

```
 File "invalchar.py", line 23
    values =  list(analysis.values ())
                ^
SyntaxError: invalid character in identifier 
```

这告诉你实际的问题是什么，所以你不必猜测“我在哪里有一个无效字符”？好吧，如果你看那行，你会发现那里有一堆非打印的垃圾字符。把它们拿出来，你就会过去的。

如果您想知道实际的垃圾字符是什么，我从您的代码中复制了有问题的行并将其粘贴到 Python 解释器中的字符串中：

```
>>> s='    values ​​=  list(analysis.values ​​())'
>>> s
'    values \u200b\u200b=  list(analysis.values \u200b\u200b())' 
```

所以，这就是`\u200b`, 或[零宽度空间](http://www.fileformat.info/info/unicode/char/200b/index.htm)。这就解释了为什么您在页面上看不到它。最常见的是，您得到这些是因为您从 StackOverflow 或 wiki 之类的站点或 PDF 文件中复制了一些格式化（非纯文本）代码。

如果您的编辑器没有为您提供查找和修复这些字符的方法，只需删除并重新键入该行。

当然，你也至少有两个`IndentationError`不缩进的东西，至少还有一个`SyntaxError`来自停留空格（比如`= =`代替`==`）或下划线变成空格（比如`analysis results`代替`analysis_results`）。

问题是，你是如何让你的代码进入这个状态的？如果您使用 Microsoft Word 之类的东西作为代码编辑器，那就是您的问题。使用文本编辑器。如果不是……好吧，不管是什么根本问题导致你最终得到这些乱码、缩进和额外空格，在你尝试修复代码之前先修复它。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2018-02-09T07:33:49.230

如果您的键盘设置为美国英语（国际）而不是美国英语，则双引号不起作用。这就是单引号在您的情况下起作用的原因。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2021-02-10T15:59:53.633

与前面的答案类似，问题是 Python 解释器无法识别的某些字符（可能是不可见的）。因为这通常是由于复制粘贴代码造成的，所以重新键入该行是一种选择。

但是如果您不想重新输入该行，您可以将您的代码粘贴[到此工具](https://www.soscisurvey.de/tools/view-chars.php)或类似的工具中（谷歌“在线显示 unicode 字符”），它会显示任何非标准字符。例如，

```
s='    values ​​=  list(analysis.values ​​())' 
```

变成

```
s='    values U+200B U+200B​​ =  list(analysis.values U+200B U+200B ​​())' 
```

然后，您可以从字符串中删除非标准字符。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-09-12T02:33:54.447

仔细看你的报价，这是对还是错！有时双引号不能正常工作，这取决于您的键盘布局。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-09-18T18:54:59.803

我有一个类似的问题。我的解决方案是将减号从：

```
— 
```

至

```
- 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-12-09T00:59:25.190

当我有时输入中文时，我得到了那个错误。当谈到标点符号时，您不会注意到您实际上是在输入中文版本，而不是英文版本。

解释器会给你一个错误信息，但对于人眼来说，很难注意到差异。

例如中文的“，”；英文的“，”。所以要注意你的语言设置。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-10-08T09:56:57.063

此错误主要发生在复制粘贴代码时。尝试编辑/替换减号（-）、括号（{）符号。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-11-20T00:24:48.237

不确定这是否正确，但是当我从一篇关于使用 pgmpy 的论文中复制一些代码并将其粘贴到 Spyder 下的编辑器中时，我一直收到“标识符中的无效字符”错误，尽管它对我来说看起来并不坏。特定的行是`grade_cpd = TabularCPD(variable='G',\`

没有充分的理由，我在整个代码中都`'`用替换了它并且它起作用了。`"`不知道为什么，但它确实有效

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-01-08T21:21:09.103

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-01-01T05:11:43.340

如果您只是运行模块，则在 IDLE 中不会收到好的错误消息。尝试在 IDLE shell 中输入导入命令，您将收到一条信息量更大的错误消息。我有同样的错误，这一切都不同了。

（是的，我从电子书中复制了代码，里面充满了看不见的“错误”字符。）

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-11-12T13:53:53.970

我的解决方案是将我的 Mac 键盘从 Unicode 切换到美国英语。

# android - 日食未检测到一天前检测到的设备

> ID：14844690
> 
> 赞同：1
> 
> 时间：2013-02-13T00:54:29.260
> 
> 标签：android

Eclipse 没有检测到我一天前检测到的我的 android 设备（acer ICONIA TAB A500）。我尝试重新启动系统、更新设备驱动程序、更改 USB 电缆、杀死并启动 adb。没有任何效果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T09:27:01.707

**仅供参考：**

我也面临同样的问题，我的三星设备没有被`ADB`之前工作正常的设备检测到，我更换了电缆，重新启动了 Eclipse，重新启动了我的系统，但没有任何效果。最后我重新启动了我的三星手机并`ADB`检测到它没有任何问题:)

# jpa - 在使用 XmlInverseReference 解组孩子时，如何让 MOXy 分配父母？

> ID：14844691
> 
> 赞同：1
> 
> 时间：2013-02-13T00:54:32.420
> 
> 标签：jpa, jboss, jaxb, jackson, moxy

我的设置：

JBoss AS 7.1.1 使用 JPA、Hibernate（连接到 PostgreSQL）、RESTEasy、Jackson 1.9.2 for JSON、EclipseLink MOXy 2.4.1 for XML

我有两个实体 - **Group**和**User**。一个组包含许多用户（一对多）。我声明了与 JPA 注释的双向关系（见下文），因此我必须通过使用`@JsonManagedReference`/ `@JsonBackReference`（对于 JSON）和`@XmlInverseReference`（对于 XML）来防止循环。这可以按预期工作，除非我尝试通过 REST 创建用户，否则在使用 XML 时我无法将她分配给组。使用 JSON 时，它可以工作：

Jackson JSON**工作**（成功添加 Jane Doe 并将她置于第 5 组）：

```
POST request to /user
Content-Type: application/json
Accept: application/json
Body: {"name":"Jane Doe", "group":{"id":5}}

Response:

{
   "id": 12,
   "name":"Jane Doe"
}

Hibernate: insert into users (group_id, name, id) values (5, 'Jane Doe', 12) 
```

这是添加 Jackson 用户后的 GroupEndpoint 响应：

```
GET request to /group
Accept: application/json

Response:

[{"id":5,"name":"My User Group","users":[{"id":12,"name":"Jane Doe"}]} 
```

MOXy XML**不起作用**（Jane Doe 是孤儿）：

```
POST request to /user
Content-Type: application/xml
Accept: application/xml
Body: <name>Jane Doe</name><group><id>5</id></group>

Response:

    <user><name>Jane Doe</name><id>12</id></user>

Hibernate: insert into users (group_id, name, id) values (null, 'Jane Doe', 12) 
```

这是使用 MOXy 添加用户后的 GroupEndpoint 响应：

```
GET request to /group
Accept: application/xml

Response:

<collection>
  <group><id>5</id><name>My User Group</name></group>
</collection> 
```

我试过了`@XmlID`，`@XmlIDREF`同样的问题。 `@XmlTransient`同样会忽略 marshal 和 unmarshal 上的子父关系。

我的问题：

如何通过用户 REST 端点将用户添加到组，而不需要 MOXy 忽略新用户的组字段（标记为 @XmlInverseReference）？

我应该增加 REST 端点、创建 XmlAdapter 还是编写自定义序列化程序？我是否缺少具有不同注释的简单解决方案？ *是否有一种完全不同的方法可以通过首选的 REST 公开关系对象？* 任何帮助深表感谢。

这是组实体：

```
@Entity
@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class Group implements Serializable {
    @Id
    private Long id;

    @Column
    private String name;

    @OneToMany(mappedBy="group", cascade=CascadeType.ALL)
    @JsonManagedReference("group-user")
    private Set<User> users;

    // Omitting getters and setters etc...
} 
```

这是用户实体：

```
@Entity
@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class User implements Serializable {
    @Id
    private Long id;

    @Column
    private String name;

    @ManyToOne
    @JsonBackReference("group-user")
    @XmlInverseReference(mappedBy="users")
    private Group group;

    // Omitting getters and setters etc...
} 
```

这是用户 REST 端点：

```
@Stateful
@Path("/user")
@TransactionAttribute
public class UserEndpoint {
    @PersistenceContext(type = PersistenceContextType.EXTENDED)
    private EntityManager em;

    @POST
    @Consumes({"application/xml","application/json"})
    public User create(User entity) {
        em.joinTransaction();
        em.persist(entity);
        return entity;
    }
} 
```

这是 Group REST 端点（包括在内以表明需要防止循环）：

```
@Stateful
@Path("/group")
@TransactionAttribute
public class GroupEndpoint {
    @PersistenceContext(type = PersistenceContextType.EXTENDED)
    private EntityManager em;

    @GET
    @Produces({"application/xml","application/json"})
    public List<Group> listAll() {
        final List<Group> results = em.createQuery("SELECT x FROM Group x").getResultList();
        return results;
    }
} 
```

这是使用**Jackson添加用户后的 GroupEndpoint** **MOXy**响应，以测试周期：

 **```
GET request to /group
Accept: application/xml

Response:

<collection>
  <group>
     <id>5</id>
     <name>My User Group</name>
     <users><id>12</id><name>Jane Doe</name></users>
  </group>
</collection> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T01:36:58.247

**注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人，也是[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

现在已在 EclipseLink 2.5.0 中实现了对您的用例的支持。您可以从以下链接下载夜间标签（从 2013 年 3 月 1 日开始）。

*   [http://www.eclipse.org/eclipselink/downloads/nightly.php](http://www.eclipse.org/eclipselink/downloads/nightly.php)

**JAVA模型**

现在 MOXy 支持`@XmlInverseReference`在关系的两个方向上指定注释。单独指定时，它的处理`@XmlTransient`方式与编组一样，要使其可写，您需要将其与`@XmlElement`.

**用户**

```
import java.io.Serializable;
import javax.persistence.*;
import javax.xml.bind.annotation.*;
import org.eclipse.persistence.oxm.annotations.XmlInverseReference;

@Entity
@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class User implements Serializable {
    @Id
    private Long id;

    @Column
    private String name;

    @ManyToOne
    //@JsonBackReference("group-user")
    @XmlElement
    @XmlInverseReference(mappedBy="users")
    private Group group;

    public Group getGroup() {
        return group;
    }

    // Omitting other getters and setters etc...
} 
```

**团体**

```
import java.io.Serializable;
import java.util.Set;
import javax.persistence.*;
import javax.xml.bind.annotation.*;
import org.eclipse.persistence.oxm.annotations.XmlInverseReference;

@Entity
@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class Group implements Serializable {
    @Id
    private Long id;

    @Column
    private String name;

    @OneToMany(mappedBy="group", cascade=CascadeType.ALL)
    //@JsonManagedReference("group-user")
    @XmlElement
    @XmlInverseReference(mappedBy="group")
    private Set<User> users;

    public Set<User> getUsers() {
        return users;
    }

    // Omitting other getters and setters etc...
} 
```

**演示代码**

**演示**

下面是一些可以运行以证明一切正常的代码。除了 XML 用例之外，MOXy 还可用于处理 JSON。

```
import java.io.StringReader;
import javax.xml.bind.*;
import javax.xml.transform.stream.StreamSource;
import org.eclipse.persistence.jaxb.UnmarshallerProperties;

public class Demo {

    public static void main(String[] args) throws Exception {

        JAXBContext jc = JAXBContext.newInstance(User.class);
        Unmarshaller unmarshaller = jc.createUnmarshaller();

        // XML USE CASE
        StringReader xml = new StringReader("<user><name>Jane Doe</name><group><id>5</id></group></user>");
        User userFromXML = (User) unmarshaller.unmarshal(xml);
        System.out.println(userFromXML.getGroup().getUsers());

        // JSON USE CASE
        StringReader json = new StringReader("{\"name\":\"Jane Doe\", \"group\":{\"id\":5}}");
        unmarshaller.setProperty(UnmarshallerProperties.MEDIA_TYPE, "application/json");
        unmarshaller.setProperty(UnmarshallerProperties.JSON_INCLUDE_ROOT, false);
        StreamSource jsonSource = new StreamSource(json);
        User userFromJSON = unmarshaller.unmarshal(jsonSource, User.class).getValue();
        System.out.println(userFromJSON.getGroup().getUsers());
    }

} 
```

**输出**

下面是运行演示代码的输出，显示反向指针已正确设置。

```
[forum14844691.User@147ee929]
[forum14844691.User@685c53ff] 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2013/03/moxys-xmlinversereference-is-now-truly.html](http://blog.bdoughan.com/2013/03/moxys-xmlinversereference-is-now-truly.html)
*   [http://blog.bdoughan.com/2012/05/moxy-as-your-jax-rs-json-provider.html](http://blog.bdoughan.com/2012/05/moxy-as-your-jax-rs-json-provider.html)
*   [http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html](http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html)**

# php - PHP：查询执行速度慢

> ID：14844693
> 
> 赞同：0
> 
> 时间：2013-02-13T00:54:34.550
> 
> 标签：php, performance

我有这个登录系统：

```
 require_once "conexion.php";

    class login extends conexion {

    public function log_user($user,$pass)
        {
        $conexion = mysql_conexion();
            $login = "SELECT user_name,user_pass,id FROM menssager_user WHERE user_name='$user' AND user_pass='$pass'";
                $e = $conexion->prepare($login);
                    $e->execute();

                $re = $e->fetch(PDO::FETCH_ASSOC);

                    if($user == $re["user_name"] && $pass == $re["user_pass"])
                    {

                    $this->is_online($re["id"]);
                    return $re["id"];
                    }

        $conexion = null;

        }   } 
```

当我执行该代码时，需要 1.3 秒才能确定该用户是否存在并且我在数据库中只有 2 个用户名。谁能告诉我为什么这么慢？注意：昨天我升级到 5.4.7 并再次重新编写代码（针对该版本的新功能）。

更新：

和数据库连接：

```
class conexion{

        public function mysql_conexion(){

            $conexion_path = "mysql:dbname=menssager;host:127.0.0.1";
                $root = "root";
                $pass = "";

                try{

                    $conectar = new PDO($conexion_path,$root,$pass);
                    $conectar->setAttribute(PDO::ATTR_EMULATE_PREPARES,false);
                    $conectar->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

                }catch(PDOException $error)
                {
                    echo $conectar = $error->getMessage();
                }
                return $conectar;

        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T01:32:12.463

当您仍在测量连接与执行时间时，我将冒险猜测答案。我认为您的连接时间是导致延迟的原因。查看之前提出的类似问题。 [https://serverfault.com/questions/408550/connecting-to-mysql-from-php-is-extremely-slow](https://serverfault.com/questions/408550/connecting-to-mysql-from-php-is-extremely-slow)

关闭反向 DNS 查找可能会对您有所帮助。添加一个链接，显示如何将其关闭：

[http://developers.sugarcrm.com/wordpress/2012/01/10/howto-turn-off-mysql-reverse-dns-lookup-to-speed-up-response-times/](http://developers.sugarcrm.com/wordpress/2012/01/10/howto-turn-off-mysql-reverse-dns-lookup-to-speed-up-response-times/)

# php - 如何通过 wp_get_post_categories() 函数获取有序类别？

> ID：14844695
> 
> 赞同：1
> 
> 时间：2013-02-13T00:54:44.383
> 
> 标签：php, wordpress

给定以下类别层次结构：

*   行星
    *   大陆
        *   国家
            *   状态

当我使用以下代码从所有包含它们的帖子中检索它们时：

```
$post_categories = wp_get_post_categories( $post_id );
$cats = array();

foreach($post_categories as $c){
    $cat = get_category( $c );
    $cats[] = array( 'name' => $cat->name, 'slug' => $cat->slug );
} 
```

并回显结果：

```
echo $cats[0]['name'];
echo $cats[1]['name'];
echo $cats[2]['name'];
echo $cats[3]['name']; 
```

我让它们按字母顺序排列，如下所示：

```
Continent, Country, Planet, State 
```

但我真正需要的是让它们按层次结构排序，如下所示：

```
Planet, Continent, Country, State 
```

有任何想法吗？提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T19:49:02.937

找到了答案！实际上这很明显，但如果这对处于相同情况的人有所帮助，那就是。

您需要做的就是添加以下数组作为第二个参数，如下所示：

```
$post_categories = wp_get_post_categories( $post->ID, **array('orderby' => 'term_order', 'order' => 'ASC')**); 
```

这样就行了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-19T16:02:06.660

> $post_categories = wp_get_post_categories($post->ID, **array('orderby' => 'term_order', 'order' => 'ASC')** );

这仅返回按 id ASC 排序的类别，因此请注意，因为当您将来在三个类别元素上插入另一个类别元素时，例如在顶部，此函数将停止工作，因为您的根元素将是最后一个。

# ios - 如何使应用程序兼容 3.5" 和 4" 视网膜显示器

> ID：14844697
> 
> 赞同：2
> 
> 时间：2013-02-13T00:54:46.447
> 
> 标签：ios, compatibility, retina-display

我检查了所有相关的问题。没有发现任何有用的东西，或者可能是我无法理解。我是新手，刚刚准备了一个简单的应用程序。

应用看起来很适合 iPhone 5 屏幕，如下所示： ![iPhone 5 屏幕](../Images/1543444210b56fef2dbb29526680b628.png)

但是当我把它打开 3.5 屏幕模式。它与屏幕上的元素混淆。正如你在下面看到的![3.5 屏幕](../Images/6ac5a5ff62f549e4ad6a29f2d082eddb.png)

任何人都可以帮助我如何修复它或者只制作两个版本的应用程序是这个问题的最佳解决方案。任何帮助或建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T01:04:32.690

使用尺寸检查器（选项命令 5）。自动调整大小区域是您正在寻找的。红色框代表选定的对象，并将显示应用程序将相对于窗口放置和拉伸 UI 元素的位置。I 形外部箭头显示它的锚点。中间的箭头显示对象将如何垂直或水平拉伸。

![Xcode 的尺寸检查器](../Images/ce742cd2d2e64bcec22b3907e6f93e24.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T03:19:09.593

有两种方法可以做到这一点。一种方法是为不同的屏幕尺寸创建第二个 xib 或故事板文件。但是，Apple 增加了限制来制作它，因此您不需要第二个文件。要编辑约束，请在编辑情节提要或 xib 时单击标尺选项卡。您会在底部找到约束。有关约束的更多帮助，您可以尝试[本教程](http://www.raywenderlich.com/20881/beginning-auto-layout-part-1-of-2)。

# jax-ws - 我可以在 Metro 解组之前修复损坏的 XML 响应吗？

> ID：14844703
> 
> 赞同：4
> 
> 时间：2013-02-13T00:55:11.843
> 
> 标签：jax-ws, java-metro-framework

我正在使用 Metro 调用 SOAP Web 服务。我从无法控制的服务器接收到正文中包含无效字符引用的 SOAP 响应。我想在 Metro 解组 XML 并向我的客户端抛出异常之前修复它。这可能吗？

我尝试添加 a`LogicalHandler`和 a`SOAPHandler`但是当我尝试获取有效负载时它们都抛出相同的解组异常（分别失败`LogicalMessage.getPayload()`）`SOAPMessageContext.getMessage()`。当响应没有无效的 XML 时，处理程序工作正常，让我可以访问消息。

这是异常的样子：

```
com.sun.xml.internal.ws.encoding.soap.DeserializationException: Failed to read a response: javax.xml.bind.UnmarshalException
 - with linked exception:
[javax.xml.stream.XMLStreamException: ParseError at [row,col]:[7,2653]
Message: Character reference "&#]
at com.sun.xml.internal.bind.v2.runtime.unmarshaller.UnmarshallerImpl.handleStreamException(UnmarshallerImpl.java:421)
at com.sun.xml.internal.bind.v2.runtime.unmarshaller.UnmarshallerImpl.unmarshal0(UnmarshallerImpl.java:357)
at com.sun.xml.internal.bind.v2.runtime.BridgeImpl.unmarshal(BridgeImpl.java:109)
at com.sun.xml.internal.bind.api.Bridge.unmarshal(Bridge.java:222)
at com.sun.xml.internal.ws.client.sei.ResponseBuilder$DocLit.readResponse(ResponseBuilder.java:539)
at com.sun.xml.internal.ws.client.sei.SyncMethodHandler.invoke(SyncMethodHandler.java:110)
... 41 more
Caused by: javax.xml.stream.XMLStreamException: ParseError at [row,col]:[7,2653]
Message: Character reference "&#
at com.sun.org.apache.xerces.internal.impl.XMLStreamReaderImpl.next(XMLStreamReaderImpl.java:598)
at com.sun.xml.internal.ws.util.xml.XMLStreamReaderFilter.next(XMLStreamReaderFilter.java:81)
at com.sun.xml.internal.bind.v2.runtime.unmarshaller.StAXStreamConnector.bridge(StAXStreamConnector.java:182)
at com.sun.xml.internal.bind.v2.runtime.unmarshaller.UnmarshallerImpl.unmarshal0(UnmarshallerImpl.java:355) 
```

有没有办法我可以获得原始有效载荷，修复它并替换它并继续？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-22T14:02:53.310

我想你可以。请参阅以下链接，对于一些相关问题，那里似乎有一些指针。如果您无法修复 xml 并继续，您始终可以创建自定义解组。

[从 Java Web 服务客户端获取原始 XML 响应](https://stackoverflow.com/questions/11976234/getting-raw-xml-response-from-java-web-service-client)

[是否可以使用 Metro Web 服务框架获取原始 XML 负载？](https://stackoverflow.com/questions/19102135/is-it-possible-to-get-the-raw-xml-payload-using-metro-web-services-framework)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-27T19:17:20.840

不，你的回答没有帮助。他们都指向在尝试反序列化之后获取原始 XML，这就是问题所在。所以不行。

# jquery - 如何在 JSFiddle 中使用旧版本的 jQuery？

> ID：14844704
> 
> 赞同：0
> 
> 时间：2013-02-13T00:55:12.470
> 
> 标签：jquery, jsfiddle

我看到有些人可以在 JSFiddle 上选择 jQuery 1.4，但是当我尝试时，我在下拉列表中找不到它！任何帮助都会非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T00:56:29.267

您可以通过“添加资源”面板手动包含指向任何托管版本的 jQuery 的链接。有关可用版本的完整列表，请参阅[https://developers.google.com/speed/libraries/devguide#jquery](https://developers.google.com/speed/libraries/devguide#jquery)；jQuery 1.4 位于[http://ajax.googleapis.com/ajax/libs/jquery/1.4.1/jquery.min.js](http://ajax.googleapis.com/ajax/libs/jquery/1.4.1/jquery.min.js)

这个旧的 jQuery 版本通常不再使用。

# android - Android - 如何从外部输入设备直接在变量中捕获文本

> ID：14844706
> 
> 赞同：1
> 
> 时间：2013-02-13T00:55:28.473
> 
> 标签：android, inputstream, outputstream

我有一个 USB QR 码阅读器，它可以用作任何键盘，将读取的信息文本扔到任何文本输入小部件中，如`EditText`.

但是，在不使用任何小部件的情况下，我想直接在`String`变量中捕获读取的信息文本。

我几乎可以肯定这可以通过流：`InputStream`或`OutputStream`，但我不知道如何指向我的外部输入设备。就像是：

`OutputStream outputStream = who.getOutputStream();`

有人有线索吗？

编辑 1

QR 阅读器设备是摩托罗拉 DS9208，我与 Nexus 7 一起使用。QR 阅读器通过 OTG 电缆连接到 Nexus MicroUSB 端口，它开始自动工作。可以通过任何具有写入文本位置的应用程序查看读者已阅读的内容。阅读器被识别为普通键盘。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T22:33:13.390

最后，我可以直接在`String`变量中捕获读取的信息文本。

由于 QR 阅读器就像硬键盘一样工作（一旦读取 QR 码，它就会写入文本），我可以使用名为`onKeyDown`.

这种方法能够捕捉用户按下硬键盘按键时所写的字母。因此，由于 QR 阅读器作为硬键盘工作，该方法可以在`String`变量中捕获其字母。

我希望这可以帮助别人。

# php - 如何在函数中检索 mysqli 变量

> ID：14844709
> 
> 赞同：-1
> 
> 时间：2013-02-13T00:55:52.560
> 
> 标签：php, mysqli

在一个函数中，我想使用一个 if 语句来查找一个 mysqli`bind_result()`变量`if($qandaReplyType == 'Single'){`，但是在尝试这个时我得到了一个未定义的变量。我查看了一些 SO 示例，但我不明白如何正确实现它。所以我的问题是，有人可以提供一个代码片段以便能够修复错误，还可以让我了解如何在函数中检索 mysqli 变量以供将来使用，并让我充分了解它应该如何书面。

代码：

```
$qandaquery = "SELECT q.QuestionId ReplyType
                            FROM QuestionId q
                            INNER JOIN Reply r ON q.ReplyId = r.ReplyId

        ...

            $qandaqrystmt->bind_result($qandaQuestionId,$qandaReplyType);

            $arrReplyType = array();

            while ($qandaqrystmt->fetch()) {

            $arrReplyType[ $qandaQuestionId ] = $qandaReplyType;
          }

            $qandaqrystmt->close();

        function ExpandOptionType($option) { 

        ...

             foreach($options as $indivOption) {

                 if($qandaReplyType == 'Single'){

        ...

                 }
                 else if ($qandaReplyType == 'Multiple'){

        ...
             }
          }

        } 
```

试图：

```
var $reply;
function ExpandOptionType($qandaReplyType) { 
    $this->reply = $qandaReplyType; 

         if($qandaReplyType == 'Single'){
...     

}
 }else if($qandaReplyType == 'Multiple'){
...     }
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T01:16:55.707

自从我上次使用 mysqli 以来已经很长时间了，但我会尽力帮助你。从您发布的代码中很难理解您是在脚本中，在班级中还是在多个班级中。.

如果您在上课，请不要忘记使用 $this。绑定意味着您传递变量指针/引用，根据您的喜好调用它，而不是值，因此您从循环退出的位置指针设置为空位置。特别是在关闭声明之后。

仅当您想将结果传递给函数或更一般地传递​​给代码块时，才应使用变量绑定，该代码块将从接收的开始计算新值（是否返回新值无关紧要）。在这种情况下，我真的邀请您直接处理绑定的结果，否则您应该通过值而不是通过引用传递它们。

希望这有帮助。

马可

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T03:39:01.820

以下是如何`$this`将变量从一种方法转移到另一种方法。

```
class database {

     function do_query($id) {

          $result = db("SELECT * FROM tbl WHERE id=?", $id);

          $this->shared_result[] = $result["column"];
        # ^^^^^^^
     }

     function expand_evil($options) {

         foreach ($options as $whatever) {

             if ("Unicorn" == $this->shared_result) {
                            # ^^^^^^^
                ...
             }

         }
     }
} 
```

评论将不予回复。教程确实存在。

# css - 列表导航中的垂直对齐伪元素

> ID：14844711
> 
> 赞同：2
> 
> 时间：2013-02-13T00:56:12.753
> 
> 标签：css, alignment, vertical-alignment, pseudo-element, text-alignment

我创建了一个列表样式导航，每个超链接可以是多行，在每个超链接元素之后我添加了一个伪元素“箭头”之后，是否可以垂直对齐伪元素而不管超链接高度如何？

要求是在 IE8 及更高版本中工作。

标记：

```
<ul>
<li>
   <a href="#">
      <h3 class="title">Cover</h3>
      <p class="subtitle">Lorem ipsum dolor sit</p>
    </a>
</li>
<li class="current">
   <a href="#">
      <h3 class="title">Lorem ipsum dolor sit amet</h3>
      <p class="subtitle">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Maiores cum!</p>
   </a>
</li>
<li>
   <a href="#">
      <h3 class="title">Lorem ipsum dolor sit amet, consectetur</h3>
      <p class="subtitle">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Perspiciatis. Lorem ipsum dolor sit amet, consectetur adipisicing elit. Perspiciatis.</p>
   </a>
</li>
<li>
   <a href="#">
      <h3 class="title">Lorem ipsum dolor sit amet, consectetur adipisicing Lorem ipsum dolor sit.</h3>
   </a>
</li>
</ul> 
```

CSS：

```
body {
    background: #666;
    padding: 5em;
}
ul {
    background: #fff;

    list-style: none;
}
li {
    border-bottom: 1px solid #ccc;
    position relative;
}
.current a {
    border-color: #000;
}
a {
    border-left: 8px solid #ccc;
    overflow: hidden;
    display: block;
    line-height: 1.3;
    padding: .75em;
    position: relative;
    text-decoration: none;
    color: #000;
}
a:after {
    content: '>';
    color: #ce4300;
    float: right;
    font-size: 1.125em;
    line-height: 1;
    position: absolute;
    right: 1em;
}
h3 {
    float: left;
    font-size: .875em;
    margin: 0 1em 0 0;
}
.subtitle {
    color: #555;
    clear: left;
    float: left;
    font-size: .875em;
    font-style: itatlic;
} 
```

当前原型：http: [//jsfiddle.net/yVJbL/](http://jsfiddle.net/yVJbL/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T02:13:22.357

干得好：

```
a:after {
    content:'>';
    color: #ce4300;
    font-size: 1.125em;
    position: absolute;
    line-height: 0;
    right: 1em;
    top: 50%;
    bottom: 50%;
} 
```

出乎意料的简单：D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T01:56:19.337

I thing best solution to make all browsers happy is to use a background-image (this little arrow won't be so big image) and background-position: right center (or so). You are open to hover efect with this solution as well. Background image can be placed also in padding area so there won`t be any overflow.

Hope this helps you.

# wicket - 在生产期间隐藏来自 wicket 1.5 中的 FeedbackMessageFilter 的调试消息？

> ID：14844714
> 
> 赞同：0
> 
> 时间：2013-02-13T00:56:22.007
> 
> 标签：wicket, wicket-1.5

在开发我的一些 Web 应用程序时，我使用它`debug("stuff here");`来帮助我弄清楚发生了什么。我宁愿不必进入并找到我所有的`debug(*);`行并删除它们。有没有一种方法可以在应用程序级别指定不在 a 中显示调试消息`FeedBackPanel`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-13T08:11:47.530

您可以将[ErrorLevelFeedbackMessageFilter](http://ci.apache.org/projects/wicket/apidocs/1.5.x/org/apache/wicket/feedback/ErrorLevelFeedbackMessageFilter.html)添加到您的 FeedbackPanels（有一个构造函数接受一个）。如果您根据部署模式创建过滤器，这应该是您所需要的。

详细地：

更改`new FeedbackPanel("id")`为`new FeedbackPanel("id", Application.getFeedbackMessageFilter())`并将此方法实现为

```
public IFeedbackMessageFilter getFeedbackMessageFilter() {
    IFeedbackMessageFilter filter = null;
    if (RuntimeConfigurationType.DEVELOPMENT.equals(getConfigurationType())) {
        filter = new ErrorLevelFeedbackMessageFilter(FeedbackMessage.DEBUG);
    } else {
        filter = new ErrorLevelFeedbackMessageFilter(FeedbackMessage.ERROR);
    }
    return filter;
} 
```

# c# - IRC 身份问题

> ID：14844715
> 
> 赞同：0
> 
> 时间：2013-02-13T00:56:25.550
> 
> 标签：c#, tcpclient, irc, ident

这就是我得到的：

```
:portlane.esper.net NOTICE * :*** Looking up your hostname...
:portlane.esper.net NOTICE * :*** Checking Ident
:portlane.esper.net NOTICE * :*** Found your hostname
:portlane.esper.net NOTICE * :*** No Ident response 
```

我知道我需要在 tcp:113 上听和写，但我不知道我应该使用什么方法，或者我需要做什么。这是我的代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Net.Sockets;
using System.IO;

namespace Bot
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void ConnectToServer(object sender, EventArgs e)
        {
            string Server = "irc.esper.net";
            int Port = 5555;
            string Nick = Nickname.Text;
            string Channel = ChannelName.Text;
            TcpClient IRCClient = new TcpClient(Server, Port);
            NetworkStream Stream = IRCClient.GetStream();
            StreamWriter Writer = new StreamWriter(Stream);
            Writer.NewLine = "\n\r";
            Writer.AutoFlush = true;
            Writer.WriteLine("/USER Bot Bot Bot :Bot");
            Writer.WriteLine("/nick " + Nick);
            Writer.WriteLine("/join " + Channel);
            Writer.WriteLine("Hello.");
            StreamReader Reader = new StreamReader(Stream);
            while (true)
            {
                Console.WriteLine(Reader.ReadLine());
            }
            Reader.Close();
            Writer.Close();
            Stream.Close();
            IRCClient.Close();
            Console.WriteLine("End of stream.");
        }
    }
} 
```

如果你们中的任何人不介意，我们将不胜感激。

谢谢，

~ abcd3fg

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T01:05:01.427

如果你真的想发送 ident 响应（这通常不需要而且通常很困难，因为你需要有一个可以从 Internet 访问的端口），你需要创建一个单独的 TCP 服务器监听 113 端口并实现 ident 协议。您可以将`System.Net.Sockets.TcpListener`其用作服务器的基础（请注意，您要么需要处理阻塞等问题，要么将其设为单独的可执行文件）。对于协议本身，您可以直接查看`RFC 1413`（该协议是基于行的并且非常简单，尤其是您不需要正确实现它而只需返回静态假响应）。不过，我不确定你是否需要一个 ident 服务器，即使你这样做了，你也需要自己实现它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-13T22:33:26.950

首先，你不发送 /commands，你必须发送正确的 IRC 命令。阅读有关它的 RFC。客户端执行 /commands 但它发送到实际服务器的内容不同。即：“尼克纽尼克”，而不是“/尼克纽尼克”

# c++ - 为什么 Google Mocks 发现这个函数调用不明确？

> ID：14844720
> 
> 赞同：20
> 
> 时间：2013-02-13T00:56:41.340
> 
> 标签：c++, templates, compilation, cppunit, googlemock

我在尝试开始使用 Google Mocks 时遇到了一个问题——由于某种原因，它无法告诉我在`EXPECT_CALL`宏中指定的调用，即使类型是一致的。我想知道为什么它不只匹配第一个函数，以及我需要做什么/添加以使其匹配第一个函数。

模拟类：

```
class GMockTest : public ITest
{
public:
MOCK_METHOD2(SetParameter,
    int(int nParameter, double value));
MOCK_METHOD2(SetParameter,
    int(int nParameter, int value));
MOCK_METHOD2(SetParameter,
    int(int nParameter, __int64 value));
} 
```

抛出错误的测试代码：

```
__int64 nFrom = 0,
    nTo = 0;

EXPECT_CALL(mock, SetParameter(2, nFrom))
    .Times(1)
    .WillOnce(Return(0));
EXPECT_CALL(mock, SetParameter(3, nTo))
    .Times(1)
    .WillOnce(Return(0)); 
```

编译错误：

```
test.cpp(1343) : error C2668: GMockTest::gmock_SetParameter' : ambiguous call to overloaded function
        testmocks.h(592): could be 'testing::internal::MockSpec<F> 
 &GMockTest::gmock_SetParameter(const testing::Matcher<T> &,const testing::Matcher<A2> &)
'
        with
        [
            F=int (int,__int64),
            T=int,
            A2=__int64
        ]
        testmocks.h(590): or       'testing::internal::MockSpec<F>  
&GMockTest::gmock_SetParameter(const testing::Matcher<T> &,const testing::Matcher<T> &)'

        with
        [
            F=int (int,int),
            T=int
        ]
        testmocks.h(580): or       'testing::internal::MockSpec<F> 
&GMockTest::gmock_SetParameter(const testing::Matcher<T> &,const testing::Matcher<FloatT
ype> &)'
        with
        [
            F=int (int,double),
            T=int,
            FloatType=double
        ]
        while trying to match the argument list '(int, __int64)' 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-02-13T01:11:58.117

Google mock 无法判断使用哪个重载。从[cookbook](https://github.com/google/googletest/blob/master/docs/gmock_cook_book.md#selecting-between-overloaded-functions-selectoverload)中，尝试使用`Matcher<T>`or`TypedEq<T>`匹配器来指定确切的类型：

```
struct ITest
{
    virtual int SetParameter(int n, double v) = 0;
    virtual int SetParameter(int n, int v) = 0;
    virtual int SetParameter(int n, __int64 v) = 0;
};

struct MockTest : public ITest
{
    MOCK_METHOD2(SetParameter, int(int n, double v));
    MOCK_METHOD2(SetParameter, int(int n, int v));
    MOCK_METHOD2(SetParameter, int(int n, __int64 v));
};

TEST(Test, Test)
{
    MockTest mock;
    __int64 nFrom = 0, nTo = 0;
    EXPECT_CALL(mock, SetParameter(2, Matcher<__int64>(nFrom)));
    EXPECT_CALL(mock, SetParameter(3, Matcher<__int64>(nTo)));

    mock.SetParameter(2, nFrom);
    mock.SetParameter(3, nTo);
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2018-05-04T05:26:50.290

对于那些有相同问题但与 OP 不同但不关心或不关心输入参数的人，使用 testing::Matcher 的另一个答案的解决方案可以与通配符 testing::_ 这样结合：

```
EXPECT_CALL(mock, SetParameter(testing::_, Matcher<__int64>(testing::_))); 
```

# javascript - $.when 问题 - 成功显示

> ID：14844721
> 
> 赞同：0
> 
> 时间：2013-02-13T00:56:47.080
> 
> 标签：javascript, jquery, ajax, jquery-ui

嘿伙计们，我有以下代码：

```
function run(){
    var url = '/pcg/popups/grabnotes.php';
    var tag = $("#dialog-container");

    var promise1 = showUrlInDialog(url);
    var promise2 = sendUserfNotes();

    $.when(promise1, promise2).done(function(data1, data2) {

      tag.html(data1).dialog({
          width: '100%',
          modal: true
        }).dialog('open');
       $('#notes_msg').text(data2[0].the_notes)
    });
} 
```

这在这里工作得很好......它会等待这两个函数运行，然后它会在 JQuery UI 中打开一个窗口 - 对话 tag.html.... 然后它将显示返回的注释该文件中的文本区域字段。这很有效，因为我不断成功地显示在屏幕的左上角，但我不知道如何摆脱它。如果你能帮我一把，我将不胜感激。

大卫

更新：

我弄清楚是什么原因造成的：

```
tag.html(data1).dialog({
              width: '100%',
              modal: true
            }).dialog('open'); 
```

我不知道为什么？

当这打开对话窗口时，成功这个词在屏幕的左侧。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T02:37:41.487

嘿伙计们，我想通了：

```
tag.html(data1[0]).dialog({
              width: '100%',
              modal: true
            }).dialog('open'); 
```

我只需要添加`[0]`到`data1`

# html - 将表格与图像 HTML 对齐

> ID：14844727
> 
> 赞同：0
> 
> 时间：2013-02-13T00:57:39.333
> 
> 标签：html, image, html-table, alignment

我正在尝试对齐图像旁边的表格，该表格当前具有与其对齐的文本。我想让下拉菜单与图像的下边缘对齐，有人可以帮我吗？这是我的代码。

```
<input type="image" src="image.jpg" name="tee" width="180" height="180" ALIGN="center">xxxxxx

<table>
<tr><td><input type="hidden" name="on0" value="Color">Color</td><td><input type="hidden" name="on1" value="Size">Size</td></tr>
<tr>
<td><select name="os0">
    <option value="White">White</option>
    <option value="Black">Black</option>
    <option value="Grey">Grey</option>
</select> </td>
<td><select name="os1">
    <option value="S">S </option>
    <option value="M">M </option>
    <option value="L">L </option>
    <option value="XL">XL </option>
</select> </td>

</tr> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T01:18:23.947

也许你应该选择 CSS3，它有很多属性，比如 left、right 或 top。我不完全了解 css，但他们在互联网上有很多教程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T02:28:26.607

根据您的描述，这是我能想到的最好的使用 CSS 来设置样式的方法。

```
<style>
div {height: 180px;
width: 300px;}

#image {
    float:left; 
 }
 table { float:right;
    margin-top: 130px;
  }

  </style>

<div>
<input id="image" type="image" src="image.jpg" name="tee" width="180" height="180"               ALIGN="center">

<table>
<tr><td><input type="hidden" name="on0" value="Color">Color</td><td><input   type="hidden" name="on1" value="Size">Size</td></tr>
<tr>
<td><select name="os0">
<option value="White">White</option>
<option value="Black">Black</option>
<option value="Grey">Grey</option>
</select> </td>
<td><select name="os1">
<option value="S">S </option>
<option value="M">M </option>
<option value="L">L </option>
<option value="XL">XL </option>
</select> </td>

</tr></table></div> 
```

但是您也可以通过使用表格然后将行中第二个单元格的内容垂直对齐到底部来解决此问题。

```
 <table><tr><td>
<input id="image" type="image" src="image.jpg" name="tee" width="180" height="180" ALIGN="center"></td>

<td valign="bottom"> <!-- This line right here is what does the trick -->

<table>
<tr><td><input type="hidden" name="on0" value="Color">Color</td><td><input type="hidden" name="on1" value="Size">Size</td></tr>
<tr>
<td><select name="os0">
<option value="White">White</option>
<option value="Black">Black</option>
<option value="Grey">Grey</option>
</select> </td>
<td><select name="os1">
<option value="S">S </option>
<option value="M">M </option>
<option value="L">L </option>
<option value="XL">XL </option>
</select> </td>

</tr></table>
    </td></tr>
        </table> 
```

希望这可以帮助！

# django - 本地主机中的语法错误：8000 Python Django

> ID：14844729
> 
> 赞同：-1
> 
> 时间：2013-02-13T00:57:44.727
> 
> 标签：django, syntax-error

所以我正在关注一个 Django 教程，并且我有一个项目的以下目录：

```
demo/
    demo/
        apps/
            ventas/
                __init__.py
                admin.py
                models.py
                tests.py
                views.py
            __init.py
        __init__.py
        settings.py
        urls.py
        wsgi.py
 manage 
```

在 admin.py 下我有：

```
from django.contrib import admin
from demo.apps.ventas.models import cliente.producto

# Register the ventas models
admin.site.register(cliente)
admin.site.register(producto) 
```

从models.py，

```
from django.db import models

class cliente(models.Model):
    nombre      = models.CharField(max_length=200)
    apellido    = models.CharField(max_length=200)
    status      = models.BooleanField(default=True)

class producto(models.Model):
    nombre      = models.CharField(max_length=200)
    descripcion = models.TextField(max_length=300)
    status      = models.BooleanField(default=True) 
```

但是当我`python manage.py runserver`从 Django_tutorial2/demo 运行时，我收到了 admin.py 中的 SyntaxErrro，localhost:8000 中的第 2 行。在我添加 ventas 文件夹之前它仍然有效。怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T01:00:35.127

我想你想要

`from demo.apps.ventas.models import cliente, producto`

这将导入类 cliente 和类 producto。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T01:00:37.003

```
from demo.apps.ventas.models import cliente.producto 
```

将其替换为：

```
from demo.apps.ventas.models import cliente, producto 
```

# ruby-on-rails - 如何编写显示强制重定向到 https 的 rails 规范？

> ID：14844730
> 
> 赞同：0
> 
> 时间：2013-02-13T00:57:51.580
> 
> 标签：ruby-on-rails, rspec-rails

我想展示一种行为，该行为基本上表明路径“/”适用于 http 域，并且转到路径“/users/sign_in”会强制重定向到 https。你怎么能说明这一点？这是否属于控制器、请求或路由规范？

规范看起来像：

```
describe "https redirection" do
  context "when http" do
    it "forces a permanent redirect to /users/sign_in on https when path is /users/sign_in" do
    end
    it "returns status of 200 when path is /"
    end
  end
  context "when https" do
    it "returns status of 200 when path is /users/sign_in"
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T02:33:46.943

用于`request.env['HTTPS'] = 'on'`激活 https。

在集成测试中，您可以检查 http 是否处于活动状态`current_url.should match /^https:/`

# c# - 列表 列出 ?

> ID：14844731
> 
> 赞同：2
> 
> 时间：2013-02-13T00:57:53.650
> 
> 标签：c#, .net, generics, interface

我有一个被广泛实现的接口，它有一个带有特定接口的 IList。而不是大量的文字，请看这里：

```
interface ILanguage
{
    IList<ITriggers> CompletionTriggers { get; set; }
}

public class Language : ILanguage
{
    public Constructor()
    {
        CompletionTriggers = new List<CompletionTrigger>();
    }
} 
```

这基本上就是我想要做的。“触发器”是接口的成员，由多种类型实现。但是每种类型都需要一个自定义的 ITrigger 实现和 List （我使用 IList ，因为它看起来很方便）。

错误说“缺少演员表？”，但我觉得这很奇怪，因为两者都是**直接**实现 IList 和 ITrigger（List 和 CompletionTrigger）的对象。

我认为这是一件容易的事情，但是关于它为什么会这样表现的一些观点是非常值得赞赏的！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T01:20:06.743

> 我认为这是一件容易的事

这是不容易的。至少没*那么*容易。不允许这样做的原因最好用一个例子来解释。假设允许按照您的建议执行任务：

```
// Let's make another trigger unrelated to CompletionTrigger
class ContinuationTrigger : ITrigger {
}
// This is allowed
List<CompletionTrigger> myTriggers = new List<CompletionTrigger>();
// THIS WILL NOT WORK (but let's pretend that it does)
IList<ITriggers> CompletionTriggers = myTriggers;
// Here comes trouble:
CompletionTriggers.Add(new ContinuationTrigger()); 
```

由于`CompletionTriggers`is 类型`IList<ITriggers>`并且`ContinuationTrigger`是`ITrigger`，编译器必须允许`Add`调用。但这会将继续触发器放入`myTriggers`已创建为 a 的集合中`List<CompletionTrigger>`，这是绝对不允许的。

就克服这一点而言，您有多种选择。最简单的一种是平等对待`ITrigger`对象，仅在创建对象时进行区分。这可能很棘手，并且在某些情况下需要多次分派。

另一种选择是制作通用封面以获取和设置以下元素`CompletionTriggers`：

```
void SetCompletionTriggers<T>(IList<T> triggers) where T : ITrigger {
    CompletionTriggers = triggers.Cast<ITrigger>().ToList();
}
IEnumerable<T> GetCompletionTriggers<T>() where T : ITrigger {
    return CompletionTriggers.Cast<T>();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T01:33:28.010

我认为，如果您要将列表定义为，`IList<ITriggers>`那么当您新建它时，它必须是`new List<ITriggers>`.

如果你真的想创建特定类型的列表，你可以让你的接口通用

```
interface ITriggers
{
}

class CompletionTrigger : ITriggers
{
}

interface ILanguage<T> where T: ITriggers
{
    List<T> CompletionTriggers { get; set; }
}

class Language : ILanguage<CompletionTrigger>
{
    public List<CompletionTrigger> CompletionTriggers { get; set; }
    public Language()
    {
        CompletionTriggers = new List<CompletionTrigger>();
    }
} 
```

# python - 了解 numpy 数组在内存中的布局方式

> ID：14844737
> 
> 赞同：5
> 
> 时间：2013-02-13T00:59:01.190
> 
> 标签：python, numpy

我正在尝试使用 numpy 在 python 中构建 OpenGL 纹理，但我遇到了问题，因为我无法预测 numpy 数组将如何在内存中组织。下面的示例程序（应该按原样运行）说明了我的困惑：

```
from pylab import *

array_by_hand = array(
    [[[1, 2, 3, 4], [1, 2, 3, 4]], 
    [[1, 2, 3, 4], [1, 2, 3, 4]]], dtype='uint8')

layers = 1 * ones((2, 2)), 2 * ones((2, 2)), 3 * ones((2, 2)), 4 * ones((2, 2))
array_from_layers = dstack(layers)
array_from_layers = array_from_layers.astype('uint8')

print array_by_hand; print
print array_from_layers; print

print ' '.join(x.encode('hex') for x in array_by_hand.data)
print ' '.join(x.encode('hex') for x in array_from_layers.data)
print
print all(array_by_hand == array_from_layers)                 # True
print str(array_by_hand.data) == str(array_from_layers.data)  # False 
```

尽管就 python 而言这两个数组是等价的，但它们在内存中的布局不同，因此 OpenGL 的显示方式也不同。有人可以解释为什么会发生这种情况以及我如何将两个数组强制转换为相同的格式吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T01:22:21.793

如果您改为调用 tostring 方法，它会将数组转换为 C 连续布局：

```
>>> array_by_hand.tostring() == array_from_layers.tostring()
True 
```

在您的情况下字符串不同的原因是因为`dstack`调用。它试图通过简单地组合源数组的基础数据然后更改[numpy 的步幅信息](http://docs.scipy.org/doc/numpy-1.6.0/reference/internals.code-explanations.html#memory-model)来巧妙地将数组堆叠在一起。这导致数组不在 C 连续布局中。

# ajax - Perl - 当变量有空格（两个单词）时，使用 URL 中输入文件中的变量

> ID：14844745
> 
> 赞同：1
> 
> 时间：2013-02-13T00:59:57.820
> 
> 标签：ajax, json, perl, web-scraping

我在做什么？该脚本从 .txt (locations.txt) 加载一个字符串，并将其分成 6 个变量。每个变量用逗号分隔。然后我去一个网站，它的地址取决于这 6 个值。

问题是什么？如果在位置.txt 中作为字符串的一部分的变量中有空格作为字符。当有空格时，它不会得到正确的 url。

输入文件是：

```
 locations.txt = Heinz,Weber,Sierra Leone,1915,M,White 
```

因为塞拉利昂有空格，所以网址是：

```
 https://familysearch.org/search/collection/results#count=20&query=%2Bgivenname%3AHeinz%20%2Bsurname%3AWeber%20%2Bbirth_place%3A%22Sierra%20Leone%22%20%2Bbirth_year%3A1914-1918~%20%2Bgender%3AM%20%2Brace%3AWhite&collection_id=2000219 
```

但这在下面的代码中没有得到正确处理。

我正在使用这些软件包：

```
 use strict;
 use warnings;
 use WWW::Mechanize::Firefox;
 use HTML::TableExtract;
 use Data::Dumper;
 use LWP::UserAgent;
 use JSON;
 use CGI qw/escape/;
 use HTML::DOM; 
```

这是代码的开头：

```
 open(my $l, 'locations26.txt') or die "Can't open locations: $!";
 open(my $o, '>', 'out2.txt') or die "Can't open output file: $!";

 while (my $line = <$l>) {
      chomp $line;
       my %args;
      @args{qw/givenname surname birth_place birth_year gender race/} = split /,/, $line;
     $args{birth_year} = ($args{birth_year} - 2) . '-' . ($args{birth_year} + 2); 
      my $mech = WWW::Mechanize::Firefox->new(create => 1, activate => 1); 
      $mech->get("https://familysearch.org/search/collection/results#count=20&query=%2Bgivenname%3A".$args{givenname}."%20%2Bsurname%3A".$args{surname}."%20%2Bbirth_place%3A".$args{birth_place}."%20%2Bbirth_year%3A".$args{birth_year}."~%20%2Bgender%3AM%20%2Brace%3AWhite&collection_id=2000219");  

# REST OF THE SCRIPT HERE. MANY LINES. 
```

}

作为另一个示例，以下将起作用：

```
locations.txt = Benjamin,Schuvlein,Germany,1913,M,White 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T03:01:17.083

我没有使用过 Mechanize，所以不确定是否需要对 URL 进行编码。尝试在运行之前`%20`或之前编码空间`+``$mech->get`

```
$url =~ s/ /+/g; 
```

或者

```
$url =~ s/ /%20/g 
```

无论哪个有效:)

==== **编辑：**

```
my $url = "https://familysearch.org/search/collection/results#count=20& query=%2Bgivenname%3A".$args{givenname}."%20%2Bsurname%3A".$args{surname}."%20%2Bbirth_place%3A".$args{birth_place}."%20%2Bbirth_year%3A".$args{birth_year}."~%20%2Bgender%3AM%20%2Brace%3AWhite&collection_id=2000219";
$url =~ s/ /+/g;
$mech->get($url); 
```

试试看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T01:25:47.560

如果你有错误

```
Global symbol "$url" requires explicit package name. 
```

这意味着您忘记声明`$url`：

```
my $url; 
```

* * *

您的*使用*部分似乎很奇怪，我很确定您不需要同时使用所有这些模块。如果您使用`WWW::Mechanize`，则不需要`LWP::UserAgent`，`CGI`我猜...

# ruby-on-rails - http中的Host标头有什么用？

> ID：14844749
> 
> 赞同：0
> 
> 时间：2013-02-13T01:00:08.510
> 
> 标签：ruby-on-rails, apache, http, rest, tomcat

在 http 协议中，我看到有时我们有一个 HOST 标头，例如

```
Host: www.google.com:3333 
```

这个标题有什么用？为什么我们需要这个标题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-13T01:04:23.653

当 http 请求到达服务器时，它只会到达 IP/端口组合。此标头显示实际请求的主机。

许多机器从同一个 IP 为多个主机提供服务。如果没有此标头，他们将不知道请求了哪个主机。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T01:06:49.407

[从这里](https://stackoverflow.com/questions/3364144/is-port-number-required-in-http-host-header-parameter)回答。

> 请参阅 HTTP 规范的第[14.23](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.23)节，其中指定如果端口不是默认端口 80，则应包含该端口。

# ruby-on-rails - 单元测试失败（自定义验证方法）

> ID：14844755
> 
> 赞同：0
> 
> 时间：2013-02-13T01:00:35.333
> 
> 标签：ruby-on-rails, ruby-on-rails-3, unit-testing

这是我的模型验证

```
validate :validate_mark_cheat

def validate_mark_cheat
  if (self.student_from_id == self.student_to_id)
    errors.add(:student_from_id, "a mark can't be self-asign")
    errors.add(:student_to_id, "a mark can't be self-asign")
  end
end 
```

这是我的单元测试

```
test "Mark can't be self-given" do
  mark = Mark.new(:student_from_id => 1, :student_to_id =>1)
  assert mark.invalid?
  assert mark.errors[:sudent_from_id].any?
  assert mark.errors[:student_to_id].any?
end 
```

我不知道为什么我的测试失败了

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T01:05:27.977

你意识到你在测试中拼错了 :student_from_id 吗？

# javascript - javascript 或 ajax actionlink

> ID：14844759
> 
> 赞同：0
> 
> 时间：2013-02-13T01:00:52.653
> 
> 标签：javascript, asp.net-mvc, asp.net-mvc-4, actionlink

我正在使用 mvc4 并且是新手。我对 Ajax ActionLink 有疑问。

我有一长串产品，每一个都有一个添加到包的按钮。过去我会使用 jquery 将点击事件绑定到此按钮，然后使用 javascript 向控制器操作发出服务器端请求。

我希望所有交互都不会导致整页回发。

我想知道最好是按照我的方法使用 javascript 还是使用 Ajax ActionLink？两种方法的优缺点是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T01:06:03.950

两者都是一样的。

1.  Ajax ActionLink：少写，与 Jquery 结合使用，不显眼。对标记没有太多控制。
2.  HtML Link + Jquery Ajax 调用：您是否可以完全控制点击事件，您可以为其添加额外的选项。

# reference - （SML）从引用形式插入到正常的特里？

> ID：14844762
> 
> 赞同：0
> 
> 时间：2013-02-13T01:01:44.043
> 
> 标签：reference, sml, trie

我创建了这个破坏性插入尝试：

(* ins: char list * (char trie) ref list -> (char trie) ref list *)

```
 fun ins ([], t) = t@[ref Empty]
 | ins (x::xs, []) = [ref (Node (x, ins (xs, [])))]
 | ins (x::xs, h::tl) =
 case !h of
 Node (c, lis) =>
 if c = x then
 (h := Node (c, ins (xs, lis)); h::tl)
 else
 h::ins (x::xs, tl)
 | Empty => h::ins(x::xs, tl) 
```

我试图让它在没有引用的情况下正常插入，但我不断收到错误。

```
(* ins: char list * (char trie) list -> (char trie) list *)

fun ins ([], t) = t@Empty
| ins (x::xs, []) = (Node (x, ins (xs, [])))
| ins (x::xs, h::tl) =
case h of
Node (c, lis) =>
if c = x then
(h = Node (c, ins (xs, lis)); h::tl)
else
h::ins (x::xs, tl)
| Empty = h::ins(x::xs, tl) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T17:05:02.003

如果您提供来自的数据类型定义和错误消息，将会有所`Empty`帮助`Node`。

这就是我假设数据类型定义是针对第一个函数的：

```
datatype 'a trie = Empty | Node of 'a * 'a trie ref list 
```

对于第二个：

```
datatype 'a trie = Empty | Node of 'a * 'a trie list 
```

您的第二个功能有几个问题：

第一个子句 ( `ns ([], t) = t@Empty`) 尝试追加`t`到`Empty`，其中`t`有类型`list`但`Empty`有类型`'a trie`'。您应该将其更改`ns ([], t) = t@[Empty]`为匹配破坏性版本，以便进行类型检查。

`case`使用“胖箭头”而不是等号的子句。`| Empty = h::ins(x::xs, tl)`用这个替换`| Empty => h::ins(x::xs, tl)`。

最后，这不是有效的 SML：

```
if c = x then
(h = Node (c, ins (xs, lis)); h::tl) 
```

带括号的表达式是一个仅用于命令式代码的序列。该变量`h`不是引用，因此您不能像那样分配给它。相反，您应该使用 a`let`来引入局部变量。

```
if c = x then
       (let val h = Node (c, ins (xs, lis)) in  h::tl end)
else 
```

这是最终的功能。这可以编译，但我没有仔细测试它，所以我不知道它是否还有另一个错误：

```
fun ins ([], t) = t@[Empty]
  | ins (x::xs, []) = [Node (x, ins (xs, []))]
  | ins (x::xs, h::tl) =
     case h of
        Node (c, lis) =>
            if c = x then
                   (let val h = Node (c, ins (xs, lis)) in  h::tl end)
            else
                h::ins (x::xs, tl)
      | Empty => h::ins(x::xs, tl)

    if c = x then
    (h = Node (c, ins (xs, lis)); h::tl)

    if c = x then
           (let val h = Node (c, ins (xs, lis)) in  h::tl end)
    else 
```

# batch-file - 如何跳过无法访问的批处理文件中的计算机？

> ID：14844763
> 
> 赞同：0
> 
> 时间：2013-02-13T01:01:52.263
> 
> 标签：batch-file, psexec

```
@echo off
:begin
for /f %%a in (computerlist.txt) do (
  setlocal
  psexec \\%%a -u user -p password -i -d "d:\path\command.exe"
  endlocal
) 
```

当脚本运行时，当它发现一台机器无法访问时，我希望它跳过它。

如何编写脚本以跳过无法访问的计算机并继续到 txt 文件中的下一个计算机？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T01:28:43.500

一个简单的测试来看看机器是否可以ping通怎么样？

```
@echo off
setlocal
:begin
for /f %%a in (computerlist.txt) do (
    ping -n 1 %%a >NUL 2>NUL
    if %errorlevel%==0 (
        psexec \\%%a -u user -p password -i -d "d:\path\command.exe"
    ) else echo Skipping unreachable host %%a
)
endlocal 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-02T08:00:23.507

实际上，windows ping.exe 不会返回有意义的错误级别，（嗯？）
它总是返回“0”错误级别，除非 IP 协议堆栈本身被冲洗掉。

你需要做的是：将你的 ping 输出通过管道传输到一个 txt 文件，然后“查找”TTL=
即

平 10.10.10.10。>pingtest.txt
findstr /C:"TTL=" pingtest.txt >nul
if %ERRORLEVEL% equ 0 (dowhatever) else (echo skipping unreachable host "whatever")

然后使用 Find.exe 或 Findstr.exe 在您的输出文件中查找 TTL=
（注意 find 和 findstr 在“查找”您搜索的内容时都使用“0”错误级别）
1\. Ping 可能会失败很多原因，但是“TTL=”始终是成功ping
2的一部分。我总是至少ping -n 3次，因为偶尔前一两次可能会出现问题，我想在我之前给它更多可能的成功机会跳过它。
3\. 为此，您必须使用上面的 FOR 循环方法，只是原始 psexec.exe 没有当前方法来测试/跳过从文本文件调用的目标。
4\. 如果您需要在 psexec 会话中使用网络资源，那么您需要运行“-h”选项，以便获得提升的令牌，它允许您映射驱动器

我希望这有帮助 ！

# php - 哪个更快，imagemagick 类或 exec()

> ID：14844764
> 
> 赞同：2
> 
> 时间：2013-02-13T01:02:11.803
> 
> 标签：php, imagemagick, imagick

我目前正在使用 php exec() 通过 imagemagick 生成图像，因为我不能使用 imagick 类，因为我得到了这个

```
Fatal error: Class 'Imagick' not found 
```

作为解决方案，我使用 exec()，但问题是执行速度太慢。

我没有尝试使用 imagick 类，所以我不知道以这种方式生成是否比 exec() 更快。

问题是，imagick class 还是 exec() 哪个更好用？

更新：这是我的 phpinfo GD ![在此处输入图像描述](../Images/4304b4773272c30f4529e61fcec74ef7.png)

这是我拥有的imagick版本

```
Version: ImageMagick 6.0.7 08/25/10 Q16 http://www.imagemagick.org
Copyright: Copyright (C) 1999-2004 ImageMagick Studio LLC 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T21:26:41.707

> 理想情况下，为了安全起见，应该在您的服务器上禁用 exec - 如果它不是您的服务器.. 好吧 - 它仍然应该是:-)

我从未在我使用过的任何服务器上看到它被禁用；共享与否。

> Safe_mode 从 PHP 中移除，并在启用时生成致命的 E_CORE_ERROR 级别错误。

无论如何，它的马匹 - 在某些情况下，Imagick 更快；在其他情况下，GD 更快，这取决于您要做什么。但 Imagemagick 可能比 IMagick 慢。

几年前我做了一些速度测试，得到了一些有趣的结果：[Results PDF](http://www.rubblewebs.co.uk/imagemagick/speed/Speed_tests_1.pdf)，他们现在可能需要更新了。

在较大的文件上，GD 挂起，但可能有增加内存的方法。如果您正在做一些更复杂的事情，Imagick 使用起来会更加混乱。

由于你没有说你在做什么，我无法提供更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T01:04:55.307

根据我的经验，它们在速度方面都具有可比性。最大的缺点是 Imagick 类缺乏选项和自定义。也就是说，我通常会避免 exec() 的安全隐患。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T01:07:41.180

使用 Imagick 类更快。

原因： Exec 必须派生一个新进程来加载转换可执行文件（或您正在使用的任何 imagemagick 工具）.. 所以通常第一次它必须去磁盘查找二进制文件.. 未来的尝试应该使用操作系统缓存以加载它，因此速度相当

imagick 类是一个编译成 PHP 的链接库，它*应该*提供更好的性能，具体取决于 php 在系统中的加载方式（CGI / fastcgi / extension）

正如另一位发帖人所说，imagick 类的选项较少——但根据我的经验，在 99% 的选项不能直接使用的情况下，还有另一种方法可以做到这一点。

编辑：理想情况下，为了安全起见，应该在您的服务器上禁用 exec - 如果它不是您的服务器.. 好吧 - 它仍然应该是:-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T01:08:52.947

最好使用 imagick 类，因为 exec 是一个安全问题。然而，它并不是真正需要的。尝试使用[内置的 GD 函数。](http://www.php.net/manual/en/book.image.php)

# asp.net-mvc-3 - MVC 复杂数据查询

> ID：14844769
> 
> 赞同：0
> 
> 时间：2013-02-13T01:02:25.953
> 
> 标签：asp.net-mvc-3, linq, lambda, entity-framework-5

我有一个查询如下：`表

1.  伦敦公寓
2.  伦敦公寓
3.  伦敦之家
4.  巴黎公寓
5.  巴黎公寓
6.  巴黎之家
7.  巴黎之家`

我希望将其转换为 linq 中的以下对象。任何人请帮助我。

```
 public class BrowseModel
{
    public string TownName { get; set; }

    public int FlatCount { get; set; }

    public int HouseCount { get; set; }

} 
```

结果需要像：

1.  伦敦 2Flat 1 house
2.  巴黎 2平 2 房子

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T13:31:56.967

嗨，如果我没有理解你的问题，你可以这样尝试

```
 public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
        DataContext = this;
        //Ignore above code
        List<Table> list = new List<Table>();
        //Suppose this what you db returns
        list.Add(new Table() { TownName = "London", HouseType = HouseType.Flat });
        list.Add(new Table() { TownName = "London", HouseType = HouseType.Flat });
        list.Add(new Table() { TownName = "London", HouseType = HouseType.House });
        list.Add(new Table() { TownName = "Paris", HouseType = HouseType.Flat });
        list.Add(new Table() { TownName = "Paris", HouseType = HouseType.Flat });
        list.Add(new Table() { TownName = "Paris", HouseType = HouseType.House });
        list.Add(new Table() { TownName = "Paris", HouseType = HouseType.House });

        var result = list.GroupBy(o => o.TownName).Select(s => new BrowseModel() { TownName = s.First().TownName, FlatCount = s.Where(f => f.HouseType == HouseType.Flat).Count(), HouseCount = s.Where(h => h.HouseType == HouseType.House).Count() }).ToList();
    } 
}

public class BrowseModel
{
    public string TownName { get; set; }

    public int FlatCount { get; set; }

    public int HouseCount { get; set; }

}

public class Table
{
    public string TownName { get; set; }
    public HouseType HouseType { get; set; }
}

public enum HouseType
{ 
    House=0,
    Flat=1
} 
```

我希望这会给你一些想法。

# floating-point - 是否可以创建一个非常精确的十进制值。

> ID：14844770
> 
> 赞同：1
> 
> 时间：2013-02-13T01:02:27.673
> 
> 标签：floating-point, floating-accuracy, floating-point-precision

是否可以创建一个非常精确的十进制值？

在我的计算机上，C++ 中的整数值是 32 位，a`long/double/long long`是 64 位。我的信念是，如果这是错误的，请纠正我，浮点值在第一部分中具有 a`1.xxxxx...`乘以尾数。所以在那里你有一个小数，1之后的部分是一个十进制值。

因此，是否有可能或已经完成，简单地将 2 个整数“扑通”在一起并生成一个完全精确的十进制值？

然后，您将有一个最大值`4294967295.4294967295`或`2147483647.4294967295`一个有符号值（小数点不需要签名）。

以前有这样做过吗？如果是这样，为什么它与双打和花车相比不受欢迎？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T01:07:57.663

### 是与否

简短的回答是，您的提案的变体一直用于处理完全精确的十进制字符串。它不是任何流行计算机的本机格式，因此它是在软件中处理的，但考虑到如今的 CPU 速度，这几乎无关紧要。关键是将分数存储为以 10 为底的十进制字符串。

现在，您的提议似乎建议在第 32 位和第 33 位之间使用二进制小数点的定点数。这也已经完成，但它并没有解决十进制字符串分数不可表示的问题。

*您会看到，问题在于十进制字符串分数是x* / (2 ^n * 5 ^m )形式的有理数，并且大多数此类值无法以仅表示*x* / 2 ^n的二进制分数表示。

因此，例如，在**.01**和**.99**之间，只有**.25**、**.50**和**.75**具有精确的二进制表示。IEEE 浮点和您的定点提案都是如此。

现在，如果不是二进制固定点，而是简单地将数字按 10 的幂进行缩放，那么所有数字都将是精确的。因此，如果您的比例为 10 ⁶，则 $123.45 将存储为 123450000。

也就是说，你有两个选择。因为所有*整数*都具有二进制*或*十进制的精确表示，所以您可以*不*存储分数，并按照上述说明简单地缩放，*或者*您可以存储分数，但在内部使用十进制数字进行。比如说，为每个数字分配 4 位。这种格式称为 BCD。

所有这些技术已被无数次实施，因此您不必自己动手。例如，看看 Ruby 中的 BigDecimal。

如果我们要重做文明，选择一个是 2 的幂的数基可能会很方便。所有这些问题都直接源于我们编写小数值 IRL 的方式。我们使用十进制字符串，这几乎*不可能*精确地表示为二进制分数。

# java - 如何为 Java rpg 游戏制作简单的小地图

> ID：14844772
> 
> 赞同：1
> 
> 时间：2013-02-13T01:02:58.393
> 
> 标签：java, swing, jframe, paintcomponent

我有一个包含名称的数组，然后使用以下方法显示适当的图形：

公共无效paintComponent（图形g）{

```
for(int i = 0; i<20; i++)
{
    for(int j = 0; j<20; j++)
    {   
        if(testMap.getData(i+(rowX-7), j+(columnY-7)).indexOf("rock") >= 0)
        {
            g.drawImage(image3, j*50 + 5*add, i*50 + 5*add2, 50, 50, this); 
        }   
    }
} 
```

这很好地显示了我的游戏的实际图形。然而，对于我的小地图，我做同样的事情，在 for 循环中的“i”和“j”中使用不同的值和增加的数字。这将创建具有更大范围的较小版本的地图，这让我有了这个。（注意，我只包含了其中一个 drawImage() 方法，我在这里删除了其余的方法以使代码更具可读性）：

![我的rpg游戏](../Images/bb8cb5a15eaa18ce7b3cc4dd6ce30127.png)

这几乎是我想要的效果（除了我可以轻松更改的定位），但是，这仅显示了我在屏幕上已经看到的较小版本。但是，任何大于约 20 x20 的尺寸，游戏开始严重滞后——可能与我编码它的糟糕方式有关。

我曾尝试使用 fillRect 将图像替换为正方形，但这无济于事。

如果有人想看看，这是我的主要课程的代码：http: [//pastebin.com/eEQWs2DS](http://pastebin.com/eEQWs2DS)

paintComponent 方法中的 for 循环从 3160 行左右开始，主显示的循环在 2678 左右。我将 Jframe 设置在 1260 左右。

所以，说了这么多，基本上我的问题是这样的：

有没有更好、更有效的方法来创建我的小地图？我的想法是在程序开始时生成一个图像，这样游戏就不必在每次帧刷新时重新计算。我可以提前创建地图，但每次更改地图时都必须手动更新，这绝对是一件麻烦事。我在研究如何做前者时遇到了麻烦。我的另一个想法是只降低小地图的刷新率，但我也不知道该怎么做。

除此之外，如果对滞后问题有任何简单的修复，请赐教。对于非常非常混乱的代码，我深表歉意——这是我第一次用显示器编写任何东西，所以我有点……在它工作之前一直在破解它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T01:12:14.630

我不知道这对你的实现有多容易，但不是绘制图像，也许你可以根据它应该是什么类型的瓷砖来绘制某种颜色的正方形？

例如，如果您循环浏览您的图块列表并找到一个草图块，您将首先在其正确位置绘制草图块，然后在小地图上绘制一个较小的绿色方块。

这样做的缺点是，首先您必须定义用于瓷砖的颜色，或者当您加载瓷砖时，您可以计算每个瓷砖的平均颜色，然后使用它。另一个问题是房屋可能无法很好地转换到小地图上，因为瓷砖有更多的细节。不过，您可以在小地图上绘制某种房屋图标，而不是实际绘制任何房屋瓷砖。

基本上，您希望在小地图上使用地图中对象的更简单表示，因为它更小，并且无论如何都可以绘制更少的细节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T02:24:30.967

看看我在 Tyrant（Java roguelike）中是如何做到的：

*   [https://github.com/mikera/tyrant/blob/master/src/main/java/mikera/tyrant/LevelMapPanel.java](https://github.com/mikera/tyrant/blob/master/src/main/java/mikera/tyrant/LevelMapPanel.java)

关键技巧：

*   使用屏幕外`BufferedImage`。缓存它以避免每次绘制时重新创建它。
*   使用`int[]`数组为每个图块设置单一颜色
*   使用 setRGB 和数组一次绘制所有地图
*   以 x2 缩放绘制迷你地图，以获得每个图块的 2x2 像素块。

如果您想提高效率，请保留一个`changed`标志，并且仅在小地图上可见的内容发生变化时才更新小地图 BufferedImage。我不认为这是值得的，因为上面已经很有效了，但是 YMMV。

# python - 如何循环和访问 OpenERP 中的字段值？

> ID：14844773
> 
> 赞同：2
> 
> 时间：2013-02-13T01:02:59.307
> 
> 标签：python, loops, openerp

我正在学习开发 OpenERP 模块，我需要做的一件事是计算用户所有输入的平均值。

我的想法是在保持总和和计数的同时循环记录，然后取平均值，但我似乎无法理解如何访问表`total`中每条记录的字段值`sim.students`

这是我的代码的一部分

```
def get_text(self, cr, uid, ids, fields, arg, context):
    result = {}
    i = 0
    for id in ids:
        print self.browse(cr,uid,id,['total'])
        print id
        i = i+1
        print i

    return result 
```

但是打印的结果`self.browse(cr,uid,id,['total'])`返回给我`browse_record(sim.student, 3)`，而不是总数本身。

我知道这一定很简单，但我似乎无法弄清楚如何达到这个值。

非常感谢任何提示

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T01:36:05.787

所以这就是我从[这里](http://doc.openerp.com/v6.0/developer/2_5_Objects_Fields_Methods/methods.html#osv.osv.osv.browse)得到的：

```
browse(cr ,uid, select, context=None, list_process=None, fields_process=None) 
```

在哪里：

```
cr = database cursor
uid = user id
select = id or list of ids
context = context arguments like lang, time zone 
```

它返回一个对象，其中包含通过点表示法可访问的所有字段。因此，您可以执行以下操作：

```
records = self.browse(cr, uid, ids)
for rec in records:
     print rec.total
     print rec.otherfield 
```

或者如果你喜欢列表推导：

```
records = self.browse(cr, uid, ids)
totals = [rec.total for rec in records]
average = sum(totals)/len(totals) 
```

# python - Python：从另一个文件导入类并实现功能

> ID：14844775
> 
> 赞同：0
> 
> 时间：2013-02-13T01:03:21.383
> 
> 标签：python, class, file-io

我正在尝试从另一个文件导入一个类，然后在我的主函数中实现成员函数。我真的只是想了解 Python 的语法，因为我对这门语言还是很陌生。我的程序很简单，实际上并没有做太多的事情。我或多或少只是想了解 Python 是如何做到这一点的。我的类文件名为 Parser.py ，代码如下：

```
class Parser:
def hasMoreCommands(self):

    if not c:
        return false
    else:
        return true 
```

我的主要功能在一个名为 jacklex.py 的文件中。主要功能只打开一个输入文件并将文本复制到输出文件。这是代码：

```
import Parser
from Parser import *

f = open('/Python27/JackLex.txt' , 'r+')
fout = open('/Python27/output.txt' , 'w')

while Parser.hasMoreCommands:
    c = f.read(1)
    fout.write(c)
print "All Done" 
f.close()
fout.close() 
```

我的问题是我的程序运行了，但它似乎陷入了无限循环。输出文件中永远不会打印任何文本，Python Shell 中也永远不会打印“All Done”。我是否遗漏了一些导致我的程序无法正常工作的重要内容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T01:07:32.103

`Parser.hasMoreCommands`指的是（未绑定的）方法，而不是输出。它总是评估为`True`.

您需要创建解析器的实例，然后调用该方法：

```
parser = Parser()

while parser.hasMoreCommands():
    ... 
```

# php - 存储 PHP OPP 类

> ID：14844778
> 
> 赞同：0
> 
> 时间：2013-02-13T01:03:41.973
> 
> 标签：php, namespaces, directory-structure

我有一个使用库文件的站点，该库文件`lib.client.php`存储在`php`我的标准网站根目录的文件夹中，并包含我构建的一系列类。

库文件包含大约 5 个类，我应该将此文件保留为一个，还是将这些类分解为自己的文件并单独包含它们？我应该为这些文件使用任何最佳实践命名约定吗？

（正如你现在看到的那样，我正在使用 lib。而且我也使用 inc。 - 只是因为我以前见过它做过几次）。

更新：

我正在改造我的结构以符合 PSR-0 标准。我现在有：

*   CCall（供应商）
    *   核
        *   联系
            *   网关.php
            *   网关DSN.php
            *   网关异常.php
    *   成分
        *   环境.php
        *   环境请求.php
        *   中心.php
        *   使用权
            *   用户.php
            *   用户会话.php
        *   渲染异常.php

我想`new Environment()`在 index.php 中创建一个，它的`__construct`方法调用`Gateway::checkInstance()`.

1.  我将如何管理此模型中的命名空间使用？什么会有自己的命名空间，我将在哪里定义它？
2.  我将如何使用这些命名空间定义的自动加载（以及在哪里？）
3.  方法和属性命名是否有等效标准？

我正在使用这个[https://gist.github.com/jwage/221634/download#](https://gist.github.com/jwage/221634/download#)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T13:24:13.357

如果您使用的是 PSR-0 自动加载：

在 Environment.php 中添加这个

```
namespace Components; 
```

并添加对网关的引用

```
use Core\Connection\Gateway; 
```

当然，您需要在 Gateway.php 中使用这一行

```
namespace Core\Connection; 
```

然后：

```
new Components\Environment(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T01:08:50.703

将类分解为它们自己的文件并遵循 PSR-0 标准作为最佳实践。 [http://phpmaster.com/autoloading-and-the-psr-0-standard/](http://phpmaster.com/autoloading-and-the-psr-0-standard/)

# sql - ExecuteNonQuery() 返回 -1

> ID：14844779
> 
> 赞同：1
> 
> 时间：2013-02-13T01:03:45.453
> 
> 标签：sql, sql-server-2008

我正在从 C# 调用 SQL Server 存储过程，其中包含一个简单的 INSERT 语句。ExecuteNonQuery() 返回受语句 OK 影响的行数，除非没有更新，在这种情况下我得到 -1。

这对我来说没有多大意义；-1 行如何受到影响？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T02:33:41.927

> 即使 SET NOCOUNT 为 ON，@@ROWCOUNT 函数也会更新。

[资源](http://msdn.microsoft.com/en-us/library/aa259204%28v=sql.80%29.aspx)

因此，由于您处于关闭的死胡同`NOCOUNT`，请尝试以下操作：

**`@@ROWCOUNT`与_`ExecuteNonQuery`**

在您的 SP 结束时，执行`SELECT @@ROWCOUNT`并使用`ExecuteScalar`而不是`ExecuteNonQuery`. 这将返回您想要的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-11T11:29:57.833

在使用具有插入/删除/更新查询的存储过程调用 ExecuteNonQuery() 后，您可以获得 -1。如果存储过程不调用任何查询（插入/更新/删除），就会发生这种情况。这是一个示例，可以帮助您理解这一点。

**存储**过程- MySQL****

 **DELIMITER $$ DROP PROCEDURE IF EXISTS sp_DML $$ CREATE PROCEDURE sp_DML
(
**P_Operation** varchar(50)
) BEGIN

```
 if(P_Operation='Insert')
    /*  Insert Statment*/
  end if;

  if(P_Operation='Update')
    /*  Update Statment*/
    end if;
  if(P_Operation='Delete')
    /*Delete Statment*/
    end if; 
```

结束$$

**如果您使用ExecuteNonQuery();**调用此 SP ；并将参数**P_Operation 作为 'NoOpeartion'**传递，它不满足写入存储过程的任何条件，那么它将始终返回**-1**。**

# sql - 什么是多键索引？

> ID：14844780
> 
> 赞同：11
> 
> 时间：2013-02-13T01:03:48.703
> 
> 标签：sql, ruby-on-rails

```
add_index :microposts, [:user_id, :created_at] 
```

我正在浏览 Michael Hartl 的 railstutorial 并注意到他正在使用一种称为*multiple key index*的东西。我知道这意味着 Active Record 同时使用两个键，但我不确定使用多个键索引的优缺点是什么。

如果有人能给出答案，我将不胜感激。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-13T01:15:50.363

任何索引都可以通过允许查询缩小要检查的行集来带来好处。

当您的查询包含这些多列的条件时，多列索引可以提供帮助。

例如：

```
SELECT * FROM Mytable WHERE user_id = 123 AND created_at > '2013-02-01' 
```

多列索引缩小到与 user_id 123 关联的行的子集，然后在该子集中，它进一步将选择范围缩小到具有最近 created_at 值的那些。

如果没有索引中的第二列，RDBMS 必须先将 user_id 123 的*所有*行加载到内存中，然后才能确定它们是否通过标准。

有关更多信息，请参阅我的演示文稿 [如何设计索引，真的](http://www.slideshare.net/billkarwin/how-to-design-indexes-really)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-11T10:59:32.630

通常，搜索键可以具有多个属性，我们将其称为复合键或多个键。

例如，考虑一个关于大学关系的索引。这里复合搜索键（course_id，year_of_enroll）。这样的索引将有助于找到所有具有特定课程 ID 的学生以及他们在大学注册的特定年份。这个索引搜索过程将精确地确定我们想要的相关记录。

# javascript - Android Honeycomb Emulator 上的 Google 图表轴渲染问题

> ID：14844781
> 
> 赞同：1
> 
> 时间：2013-02-13T01:03:50.023
> 
> 标签：javascript, android, google-visualization

我即将发布对我的应用程序的更新，以使用新的 JavaScript [Google Charts API](https://developers.google.com/chart/)，并注意到针对[Google Image Charts API](https://developers.google.com/chart/image/)的弃用警告。我遇到了轴标签的 JavaScript 问题，显然取决于 Android WebKit 的版本。我知道使用 Google Charts API在 3.1 之前*根本无法工作*，因为 Webkit 客户端缺乏 SVG 支持。

### 背景

该应用程序目前支持 Eclair（API 级别 7）向上，SVG 支持仅到达 Honeycomb MR1（API 级别 12）中内置的 WebKit 客户端。为了解决功能上的这种差异，我的代码使用了一个简单的 if-else 语句来检查 Android 版本，然后再决定使用哪个图表 API。

### 渲染问题

这最好用图片来展示。请注意；

1.  在 Android Honeycomb Emulator 上运行与在 Jelly Bean 设备上相同的 JavaScript。
2.  比较是在模拟器（不工作）和真实手机（工作）之间
3.  JavaScript 正在利用内置的 WebView 中运行`android.webkit.WebViewClient`
4.  模拟器上的轴在`[Object object]`真实设备上显示为但正确

![显示轴标签问题的图表](../Images/7a8a2d8db19b56ffd79d98b48ec9185a.png)

*图 1* - 在 Honeycomb 仿真器上发现不正确的轴标签。

![显示正确轴标签的图表](../Images/2fe56472c346361a83be8edefa809f92.png)

*图 2* - 在真实设备上找到的正确轴标签。

### 编码

在没有“粘贴轰炸”的情况下，大量无关代码的问题将在下面描述驱动垂直 (v) 轴命名的 JS 和 Java 位；

*JavaScript*

```
...
As part of the chart options...
...
// Vertical axis.
vAxis: {title: yAxisTitle.toString(),
        baselineColor: 'white',
        titleTextStyle: {color: 'gray'},
        textStyle: {color: 'gray'}, 
        gridlines: {color: 'gray'}
        } 
```

`yAxisTitle`像这样通过Android注入的地方`WebView.addJavascriptInterface`；

*爪哇*

```
chart.addJavascriptInterface(String.format(getString(string.height_label), getUnits().getSymbol()), "yAxisTitle"); 
```

### 迄今为止的调查

从之前的简要`[Object object]`描述中（我是 JS 世界的新手），我了解到我只是在 JavaScript 对象上执行一个 toString，这就是它的样子。但这是否意味着 Android 3.1 和 4.1 之间的 Java-JavaScript 注入发生了变化，这意味着通过*addJavascriptInterface*注入的数据类型现在被“记住”了，而以前没有？我应该将字符串序列化为 JSON 对象，还是对于传递（几乎）原始类型的内容来说太过分了？最后，我是否应该在 JS 端显式强制转换以强制用于诸如轴标签之类的项目的对象类型确实是字符串？想法赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T23:38:44.017

我使用控制台记录了我在问题中描述的*注入和解析*方法`WebChromeClient`的许多不同排列的结果。我发现该类型在不同版本的 Android 中并没有“丢失”，并且再多的强制转换或其他愚蠢行为也无法纠正所描述的情况。

 *代替该方法，我注入了一个`JSONObject`描述轴标题并在 JS 中解析对象。见下文;

*爪哇*

```
final JSONObject axes = new JSONObject();
axes.put("yAxisTitle", String.format(getString(string.height_label), getUnits().getSymbol()));
axes.put("zAxisTitle", getString(string.period_label));
chart.addJavascriptInterface(axes, "axes"); 
```

*JavaScript*

```
vAxis: {title: chartAxes.yAxisTitle,
        baselineColor: 'white',
        titleTextStyle: {color: 'gray'},
        textStyle: {color: 'gray'}, 
        gridlines: {color: 'gray'}
       }, 
```

这适用于 Android 版本。经验教训——不要尝试没有 JSON 的 Java-JS 通信，即使数据类型是基本的——这没什么大不了的。*

# java - 将文件内容复制到链表数组中并排序

> ID：14844787
> 
> 赞同：4
> 
> 时间：2013-02-13T01:04:51.720
> 
> 标签：java, arrays, oop, sorting, linked-list

我有一个逗号分隔的文件，其中包含员工姓名、公司、年份。

一名员工可能隶属于多家公司。

例如，

> 约翰，谷歌，2
> 约翰，微软，1
> 詹姆斯，特斯拉，1
> 詹姆斯，苹果，5

我已经使用 java 扫描仪检索了信息

```
scanner.useDelimiter(",|\\n");
    while (scanner.hasNext()) {
        String line = scanner.next() 
```

我是 Java 新手，我正在尝试使用链表数组或数组数组以排序顺序（使用经验作为排序标准）插入上述内容。所以

员工 -> Company1 -> Company2....（按员工经验排序）

所以在上面的例子中，它将是：

> 约翰- >微软->谷歌
> 詹姆斯->特斯拉->苹果

有人可以指出我正确的方向吗？

注意：如果经验相同，那么哪家公司先来并不重要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T10:58:45.217

将此类用于 Person

公共类人{

```
@Getter @Setter
private String name;

@Getter @Setter
private TreeMap<String, String> companyExperience;

public Person(){
    companyExperience = new TreeMap<String, String>();
} 
```

}

使用经验作为 TreeMap 中的键将自动按升序对 Person 的公司进行排序。

你的主要课程应该是这样的

```
public class App 
{
    public static void main( String[] args )
    {
        HashMap<String, Person> persons = new HashMap<String, Person>();

        BufferedReader br = null;
        try {
            br = new BufferedReader(new FileReader("C:\\Users\\Public Administrator\\test.txt"));
        } catch (FileNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        String line = null;

        try {
            while ((line = br.readLine()) != null) {
                String[] fields = line.split(",");
                String personName = fields[0];
                Person existingPerson = persons.get(personName);
                if (existingPerson==null){
                    Person newPerson = new Person();
                    newPerson.setName(personName);
                    newPerson.getCompanyExperience().put(Integer.parseInt(fields[2])+fields[1], fields[1]);
                    persons.put(personName, newPerson);
                } else{
                    existingPerson.getCompanyExperience().put(Integer.parseInt(fields[2])+fields[1], fields[1]);
                }
             }
        } catch (NumberFormatException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }    

        //output
        Iterator<Map.Entry<String, Person>> entries = persons.entrySet().iterator();
        while (entries.hasNext()) {
            Map.Entry<String, Person> entry = entries.next();
            Person _person = entry.getValue();
            System.out.print(_person.getName());

            Iterator<Map.Entry<String, String>> companyExperiences = _person.getCompanyExperience().entrySet().iterator();
            while (companyExperiences.hasNext()) {
                Map.Entry<String, String> companyExperience = companyExperiences.next();

                System.out.print(" > "+companyExperience.getValue());
            }
            System.out.println();

        }
    }
} 
```

我已经测试过了，它看起来很漂亮，对我来说很好。

顺便说一句，@Getter 和 @Setter 注释来自 Lombok 项目。您可以使用它或创建自己的 getter/setter。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T01:14:44.307

读取您的文件`readLine()`并使用 split 获取数据的每个字段，例如：

```
BufferedReader br = new BufferedReader(new FileReader("FileName"));
String line = null;
ArrayList<Person> list = new ArrayList<Person>();

while ((line = br.readLine()) != null) {
    String[] fields = line.split(",");
    list.add(new Person(fields[0], fields[1], Integer.parseInt(fields[2])));
 } 
```

然后，您可以将您的数据保存在`ArrayList`一个自定义类中，例如，该类`Person`存储人员的信息并实现`Comparable`您执行排序逻辑的位置。

如果您需要按人名对数据进行分组，您可以考虑使用`Hashtable`其中的键是人名，值是`ArrayList`经验。

您可以为您的数据定义一个类，例如

```
class Person implements Comparable<Person> {
    private String name;
    private String company;
    private int experience;

    public Person(String name, String company, int experience) {

        this.name = name;
        this.company = company;
        this.experience = experience;
    }

    public int getExperience() {
        return experience;
    }

    @Override
    public int compareTo(Person person) {
        return new Integer(experience).compareTo(person.getExperience());
    }
} 
```

对您的列表进行排序只需调用`Collections.sort(list);`; 但是此列表将包含所有数据，因此请修改代码以按员工姓名对数据进行分组，并为每个员工提供一个列表

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T03:43:03.660

出于您的目的，听起来您真的想要一个对象来代表一个具有一定经验的人。`Map<String,Person>`由于您的输入源具有非规范化的数据，因此最简单的方法是在解析文件时填充 a ：

```
scanner.useDelimiter(",|\\n");
while (scanner.hasNext()) {
    String line = scanner.next();
    String[] fields = line.split(",");

    String name = fields[0];
    Person person = map.get(name);
    if (person == null) {
        person = new Person(name);
        map.put(name, person);
    }
    person.addJob(fields[1], Integer.parseInt(fields[2]));
}

List<Person> people = new ArrayList<Person>(map.values()); 
```

在此过程之后，您将得到一个人员列表，没有特定的顺序。对于每个人，由于您希望按经验对他们的工作进行排序，因此您需要`Person.addJob`以保持其有序的方式实施。[SortedSet](http://docs.oracle.com/javase/6/docs/api/java/util/SortedSet.html)是一种非常好的方法，但是您不能插入重复项，并且由于您想根据经验进行排序，并且一个人可能在两份工作上花费相同的时间，您需要使用另一种方法. `List`有几种方法可以做到这一点，但在不对您的数据进行假设的情况下，我建议保留排序`Job`对象：

```
class Person {
    private final List<Job> jobs = new LinkedList<Job>();

    // Constructor, etc... 

    public void addJob(String companyName, int yearsOfExperience) {
        Job newJob = new Job(companyName, yearsOfExperience);
        int insertionIndex = Collections.binarySearch(jobs, newJob);
        if (insertionIndex < 0) {
            insertionIndex = (-(insertionIndex) - 1);
        }
        jobs.add(insertionIndex, newJob);
    }
} 
```

最后， a `Job`should implement `Comparable<Job>`，以便您查找它：

```
class Job implements Comparable<Job> {
    private final String companyName;
    private final int yearsOfExperience;

    // Constructor, etc... 

    public int compareTo(Job otherJob) {
        return Integer.compare(yearsOfExperience,otherJob.yearsOfExperience);
    }
} 
```

里面的那一点诡计`Person.addJob`将`List`始终按约伯的[“自然顺序”排序。](http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html)（参见[Collections.binarySearch](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#binarySearch%28java.util.List,%20T%29)）。

# android - WebViewClient onKeyDown 覆盖错误

> ID：14844789
> 
> 赞同：2
> 
> 时间：2013-02-13T01:04:52.687
> 
> 标签：android, eclipse

好的，所以我得到了这些错误，我不知道为什么会得到这个，但似乎对于世界其他地方来说它对他们有用，如果有另一种方法我必须这样做，我会更改代码，但它似乎是正确的现在我的日食不太喜欢我

```
The method onKeyDown(int, KeyEvent) of type XvGForm.XvGFormClient must override or implement a supertype method 
```

和

```
The method onKeyDown(int, KeyEvent) is undefined for the type WebViewClient 
```

代码

```
 @Override
   public boolean onKeyDown (int keyCode, KeyEvent event) {
    if ((keyCode == KeyEvent.KEYCODE_BACK) && mWebView.canGoBack()) {

        mWebView.canGoBack();
        return true;
    }
    return super.onKeyDown(keyCode, event);
} 
```

好的，这是完整的代码

```
package com.xtremevisiongaming.xtremevisiongamingformapp;

import android.net.Uri;
import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.KeyEvent;
import android.view.Menu;
import android.webkit.WebView;
import android.webkit.WebViewClient;
import android.view.Window;
public class XvGForm extends Activity {

   private WebView mWebView;

@Override
    protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_xv_gform);

    mWebView = (WebView)  findViewById(R.id.webview);
    mWebView.getSettings().setJavaScriptEnabled(true);
    mWebView.loadUrl("http://www.xtremevisiongaming.com/forum/forum.php");
    mWebView.setWebViewClient(new XvGFormClient());

  }
 private class XvGFormClient extends WebViewClient {
@Override
public boolean shouldOverrideUrlLoading(WebView webview, String url)
{ 
    webview.loadUrl(url);
    return true;
}

@Override
public boolean onKeyDown (int keyCode, KeyEvent event) {
    if ((keyCode == KeyEvent.KEYCODE_BACK) && mWebView.canGoBack()) {

        mWebView.canGoBack();
        return true;
    }
    return super.onKeyDown(keyCode, event);
}

}

   @Override
   public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_xv_gform, menu);
    return true;
   }

 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T01:41:29.863

你的问题是，现在`onKeyDown`函数是在里面声明的`private class XvGFormClient extends WebViewClient`

您只需将一个右括号向上移动一个函数。我添加了一些缩进，也许这会帮助你看到它：

```
private class XvGFormClient extends WebViewClient {
    @Override
    public boolean shouldOverrideUrlLoading(WebView webview, String url)
    { 
        webview.loadUrl(url);
        return true;
    }
}

@Override
public boolean onKeyDown (int keyCode, KeyEvent event) {
    if ((keyCode == KeyEvent.KEYCODE_BACK) && mWebView.canGoBack()) {

        mWebView.goBack(); // go back in only the web view
        return true;
    }
    return super.onKeyDown(keyCode, event);
} 
```

# java - 如何比较一个字符以检查它是否为空？

> ID：14844793
> 
> 赞同：9
> 
> 时间：2013-02-13T01:05:19.810
> 
> 标签：java

我尝试了以下方法，但 Eclipse 为此抛出了一个错误。

```
while((s.charAt(j)== null) 
```

检查字符是否为 的正确方法是`null`什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-13T01:09:12.177

在进行任何字符检查之前检查是否`String` `s`不是。`null`返回的字符`String#charAt`是原始`char`类型，永远不会是`null`：

```
if (s != null) {
  ... 
```

如果您尝试`String`一次处理一个字符，您可以使用：

```
for (char c: s.toCharArray()) {
   // do stuff with char c  
} 
```

（与 不同`C`，`NULL`Java 中不进行终结符检查。）

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-09-08T12:33:51.863

char 原语的默认值是 0 ，作为它的 ascii 值。您可以检查 char 是否为空。例如：

```
char ch[] = new char[20]; //here the whole array will be initialized with '\u0000' i.e. 0
    if((int)ch[0]==0){
        System.out.println("char is null");
    } 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-10-09T18:56:53.200

[这里](https://stackoverflow.com/a/21502884/1708390)`char`实际上描述了正确的检查方法。

它指出：

> 将其更改为：`if(position[i][j] == 0)` 每个`char`都可以与`int`. 数组元素的默认值为`'\u0000'`0 。`char`我猜这正是你所说的空单元格的意思。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-08-19T10:14:44.150

您可以使用空字符 ( `'\0'`)：

```
while((s.charAt(j)=='\0') 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2015-07-12T13:27:02.720

如果`s`是字符串并且不为空，那么您必须尝试将“空格”与字符进行比较。你认为“空间”不是一个字符，而空间只是`null`，但事实是空间是一个字符。因此，代替`null`，使用`（这是一个空格）与字符进行比较。`

# php - 如何找到 PHP 文件中使用的所有类？

> ID：14844794
> 
> 赞同：5
> 
> 时间：2013-02-13T01:05:21.777
> 
> 标签：php, class, code-analysis, tokenize

我正在尝试使用标记器扫描文件以查找所有定义的类、它们扩展的任何内容、任何创建的实例以及它们被静态调用的任何时间。

```
<?php

$tokens = token_get_all(file_get_contents($file));

$used_classes = array();
$defined_classes = array();
$variable_classes = array();

foreach($tokens as $i => $token) {

    if(is_array($token)) {

        if(isset($tokens[$i - 2][0], $tokens[$i - 1][0])) {

            // new [class]
            if ($tokens[$i - 2][0] == T_NEW AND $tokens[$i - 1][0] == T_WHITESPACE) {

                if($tokens[$i][0] == T_STRING) {
                    $used_classes[$token[1]] = TRUE;

                // new $variable()
                } elseif($tokens[$i][0] == T_VARIABLE) {    

                    // @todo, this is really broken. However, do best to look for the assignment
                    if(preg_match('~\$var\s*=\s*([\'"])((?:(?!\1).)*)\1~', $text, $match)) {
                        if(empty($extension_classes[$match[2]])) {
                            $used_classes[$match[2]] = TRUE;
                        }
                    } elseif($token[1] !== '$this') {
                        $variable_classes[$token[1]] = TRUE;
                    }
                }

            }

            // class [class]
            if ($tokens[$i - 2][0] == T_CLASS AND $tokens[$i - 1][0] == T_WHITESPACE) {

                if($tokens[$i][0] == T_STRING) {
                    $defined_classes[$token[1]] = TRUE;
                }
            }

            // @todo: find more classes \/

            // class [classname] extends [class] ???
            // [class]::method()???
        }
    }
} 
```

如何扩展此代码以查找上述 PHP 类的任何其他实例？

*   [http://www.php.net/manual/en/tokens.php](http://www.php.net/manual/en/tokens.php)
*   [http://westhoffswelt.de/blog/class_dependency_graph_generation_update.html](http://westhoffswelt.de/blog/class_dependency_graph_generation_update.html)
*   [http://phpqatools.org/](http://phpqatools.org/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T13:41:57.957

解析然后解释 PHP 代码不是使用正则表达式可以很好地解决的问题。你需要一个更聪明的东西，比如状态机，它可以真正理解范围、类名、继承等内容，以便能够做你想做的事情。

碰巧的是，我碰巧写了一个基于状态机的[PHP 到 Javascript](https://github.com/Danack/PHP-to-Javascript)转换器，它几乎可以完成你想做的大部分事情：

> 所有定义的类

是的，所有类都创建了一个 ClassScope，其中列出了所有变量，并且它们的方法被创建为 FunctionScope，因此您可以知道一个类具有哪些方法。

> 他们扩展的任何东西

是的，每个类都有它的父类在 ClassScope->$parentClasses 中列出

> 任何创建的实例

不，但是添加额外的代码来记录这些并不难。

> 任何时候它们被静态调用。

不——但这实际上可以用正则表达式来完成。

虽然它并不能完全解决您的问题，但目前的项目可以让您完成您想做的事情的 95%，这将节省几周的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T22:09:14.173

我认为您不能仅通过分析令牌来做到这一点。

您需要知道，对于任何类名，它所代表的实际定义是什么，包括任何继承关系，以及它是否已在您的代码中用于实现接口。类/接口定义可能在另一个文件中；在某些情况下可能会包含该文件。您可能在不同的文件中以不同的方式定义相同的类名。因此，通常您需要一次处理构成系统的所有文件。

作为基础，您需要一个解析 PHP 并构建真实符号表的工具。您也许可以从中计算出您的结果。（这样的工具分析令牌作为起点，但它比琐碎的令牌扫描工作要多得多）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T15:42:40.730

[包含](http://pecl.php.net/package/inclued)可能值得在这里研究，尽管我认为它不会为您提供超出哪些文件/类以及包含多少次的任何数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T23:07:02.153

看起来如果您只是加载代码，然后可以使用内置的反射 API（[ReflectionClass::_construct()](http://www.php.net/manual/en/reflectionclass.construct.php)等）来检查每个类。

要获取类本身，请使用内置的[get_declared_classes()](http://php.net/manual/en/function.get-declared-classes.php)。

*（注：这个我没试过，所以YMMV。）*

# jsp - 为什么 web.xml 的存在使我的 JSP 无法正常工作？

> ID：14844799
> 
> 赞同：0
> 
> 时间：2013-02-13T01:05:49.083
> 
> 标签：jsp, tomcat

我有一个看起来像这样的 jsp 文件：

```
<html>
<body>
    <div>location: ${pageContext.request.scheme}://${pageContext.request.serverName}:${pageContext.request.serverPort}${pageContext.request.contextPath}/</div>
    <div>(should have "verdagon.net" somewhere in there)</div>

    <div>Included stuff should appear below here:</div>
    <jsp:include page="toinclude.html"/>
</body>
</html> 
```

当我的 WEB-INF 目录中没有 web.xml 时，它会正确输出：

```
location: http://verdagon.net:80/strnowebxml/
(should have "verdagon.net" somewhere in there)
Included stuff should appear below here:
I'm included! 
```

然而，当我添加一个 WEB-INF 目录时，我放了一个简单的 web.xml，里面只有这个，

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app id="WebApp_ID" version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
</web-app> 
```

随着 web.xml 的出现，我得到了这个输出：

```
location: ${pageContext.request.scheme}://${pageContext.request.serverName}:${pageContext.request.serverPort}${pageContext.request.contextPath}/
(should have "verdagon.net" somewhere in there)
Included stuff should appear below here:
I'm included! 
```

**问题是：**这些美元符号替换没有发生。

**奇怪的是：**我知道 JSP 正在运行，因为 jsp:include 运行良好。

任何人都知道为什么没有 web.xml 时 JSP 工作，然后当我添加它时中断？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T18:36:22.310

啊哈！原来是版本不匹配。在 tomcat/conf/web.xml 中的全局 web.xml 的第一行是：

```
<web-app xmlns="http://java.sun.com/xml/ns/j2ee"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd"
version="2.4"> 
```

但我的顶线是

```
<web-app id="WebApp_ID" version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"> 
```

**答案：**版本不同！最高的是 2.4，最低的是 3.0。一旦我将我的 3.0 更改为 2.4，替换就正常进行了。

（对于其他有类似问题的人，这些答案可能会对您有所帮助：）

[EL 不被解释并且在生成的 HTML 输出中看起来很普通](https://stackoverflow.com/questions/12411877/el-is-not-interpreted-and-appears-plain-vanilla-in-generated-html-output)

[JSP中的表达式语言不起作用](https://stackoverflow.com/questions/2168832/expression-language-in-jsp-not-working)

# github - 从 SmartGitHg4 推送到 Github 时出错：`当前分支落后`

> ID：14844802
> 
> 赞同：-1
> 
> 时间：2013-02-13T01:05:51.237
> 
> 标签：github, push, smartgit

使用 SmartGitHg4 推送到 github 时出现以下错误。我应该怎么办？

![推送错误](../Images/d773abcbb62eb870de0247763ef24166.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T01:08:52.763

按照消息的建议运行“git pull”。

不知道你将如何使用 SmartGitHg4 做到这一点。但这应该有帮助：[http ://www.syntevo.com/smartgithg/documentation.html?page=commands#pull](http://www.syntevo.com/smartgithg/documentation.html?page=commands#pull)

# html - 如何从 html 标签中扫描自定义属性？

> ID：14844803
> 
> 赞同：-1
> 
> 时间：2013-02-13T01:05:51.760
> 
> 标签：html, regex, xml, tags

如何从 html 标签中扫描自定义属性？
这是示例代码。
未定的自定义属性名称。

```
<table>
    <tr>
        <td mycustom-attr1="true"></td>
        <td mycustom-attr2="true"></td>
        <td mycustom-attr3="false"></td>
    </tr>
</table>
<table>
    <tr>
        <td mycustom-attr1="true"></td>
        <td mycustom-attr2="true"></td>
        <td mycustom-attr3="false"></td>
    </tr>
</table> 
```

我想从这个 html 标记中提取到“mycustom-attr1、mycustom-attr2、mycustom-attr3”，
搜索 1000 多个 jsp 页面。

任何idia？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T01:08:29.590

您可以在大多数现代语言中使用[xpath表达式来执行此操作。](/questions/tagged/xpath "显示标记为“xpath”的问题")

举例：

```
/html/body/table[1]/tr/td/@*[starts-with(name(), 'mycustom')] 
```

## 输出

```
 mycustom-attr1="true"
 mycustom-attr2="true"
 mycustom-attr3="false" 
```

# html - Chrome重影上的CSS过渡宽度

> ID：14844804
> 
> 赞同：1
> 
> 时间：2013-02-13T01:05:58.943
> 
> 标签：html, css, css-transitions

这个 CSS 在悬停时将宽度从 80 像素更改为 120 像素：

```
-webkit-transition: width .5s ease, color .5s ease, background .5s ease;
-moz-transition: width .5s ease, color .5s ease, background .5s ease;
-o-transition: width .5s ease, color .5s ease, background .5s ease;
transition: width .5s ease, color .5s ease, background .5s ease; 
```

导致这个问题：

![在此处输入图像描述](../Images/37331508d148020aa7f345a3f23fb82e.png)

在 Chrome（Mac 上为 24.0.1312.57）上，当宽度返回 80 像素时。

Safari 上不存在此问题。

这是一个已知问题，还是有办法解决这个问题？

mjohnst.com 是网站。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T02:18:58.723

由于我无法对其进行测试，因此我认为问题在于*about*元素下的背景图像。

尝试删除背景图像并测试这是否会给您带来问题。然后你会更接近解决方案。

我在[jsfiddle](http://jsfiddle.net/BRANIS/69LQj/)上举了一个例子。标记看起来像这样：

```
<div class="image">
    <div class="trans">
        <a href="#">About</a>
    </div>  
</div> 
```

### 更新#1

抱歉，但我无法在 Mac OS 上对其进行测试，并且不要在黑暗中拍摄，请查看类似的问题并从那里尝试所有可能的方法[Link](https://stackoverflow.com/questions/3461441/prevent-flicker-on-webkit-transition-of-webkit-transform)。

# android - Android 设备可以作为服务器通过 Http post 响应 SMS 吗？

> ID：14844808
> 
> 赞同：0
> 
> 时间：2013-02-13T01:06:21.583
> 
> 标签：android, web-services, sms

我打算用 GSM 在手机或平板电脑上开发一个 android 应用程序，这将是： 第 1 步：当设备接收到 GSM SMS 时触发服务器事件。第二步：服务器获取短信内容和发件人的电话号码。它将执行一些计算，如解密。第 3 步：服务器向 Web 服务 POST 一个 HTTP 请求。

它将用作 SMS 注册服务器。

可能吗？我会遇到什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T03:35:57.050

是的，您可以在您的 Android 应用程序中捕获传入的 SMS。你需要为此写一个`BroadcastReceiver`。

有关如何编写一个特别是围绕传入 SMS 的更多信息 - 请查看此线程：[Android – Listen For Incoming SMS Messages](https://stackoverflow.com/questions/7089313/android-listen-for-incoming-sms-messages)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T02:17:38.757

对的，这是可能的。请注意随着系统用户的增多，您可能会收到多少请求/短信。

您可能会考虑使用多个安卓设备，以便服务器可以向它们分发请求（即发送短信）。

# java - 对随机数数组进行排序

> ID：14844811
> 
> 赞同：1
> 
> 时间：2013-02-13T01:06:37.503
> 
> 标签：java, arrays, math, methods, random

嘿伙计们正在寻找我的 ArrayTester 类的帮助...该数组应该 1.create 一个 20 元素 int 数组并用 20 到 65 范围内的随机元素填充它（包括两者）。-我相信我已经做到了。

2.使用种子为 2621 的 java.util.Random 类生成数据的可重复输出。-我也已经这样做了

3.然后测试类应该测试这些方法中的每一个（平均值、中值、众数、最大值、最小值、标准占卜）——这就是我遇到问题的地方，我已经有了平均值、众数、最大值、最小值的代码和标准占卜..我遇到的问题是中位数，因为我想在我的主类调用它之前在测试器类中对我的数组进行排序。

有没有办法做到这一点？

这是我的代码：

```
public class ArrayTest
{
    public static void main(String [] args)
    {
        int[] numbers;
        numbers = new int [20];
        Random rand = new Random(2621); 
        int maxRange = 65;
        int minRange = 20;

        for(int i=0; i<20; i++)
        {
            numbers[i] = rand.nextInt(maxRange - minRange + 1) + minRange;
            //checks to see if printing out ocrrectly
            System.out.println(numbers[i]);

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T01:09:15.443

您可以使用`Arrays.sort(numbers);`

# javascript - 绝对初学者的 Node.js/Express.j 或 Ruby on Rails

> ID：14844812
> 
> 赞同：12
> 
> 时间：2013-02-13T01:06:38.413
> 
> 标签：javascript, ruby-on-rails, node.js, express

我之前曾问过[一个](https://stackoverflow.com/questions/14833783/javascript-or-ror-for-wide-range-of-apps)关于使用 Javascript 或 Ruby on Rails 开发 Web 应用程序的问题，并从[maerics](https://stackoverflow.com/users/244128/maerics)那里得到了一些非常好的建议，这些建议基本上归结为 Javascript 用于前端/小型应用程序，RoR 用于服务端/大型应用程序（ Groupon 范围）。

然而，经过一番挖掘，我发现了**Node.js**和**Express.js**所以我的决定基本上回到了第一点。

我正在寻找一种可以用来将想法带到功能阶段的语言（同样，范围类似于 Groupon 或 Twitter）。我是一个*绝对*的初学者。我知道 HTML/CSS 和一点 jquery，但这就是我对 Web 技术的了解程度。

我听说 RoR 很容易学习，或者至少很容易上手，并且有很多社区/支持。但是 Javascript 无处不在，它不仅可以用于大型 Web 应用程序（如果我使用 RoR，我无论如何都会使用它），尽管它要复杂得多。鉴于我在这两个方面都没有经验，我想我现在应该选择一个，并在接下来的 6 个月内坚持下去，看看我会怎么做。

但是有人可以推荐哪一个吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-13T04:48:13.067

当您在上一个问题中询问 Javascript 和 RoR 时，您实际上询问了 Node.js 和 RoR。

如果您正在构建商业/企业级应用程序，请坚持使用 RoR。有更多的资源，更大的社区，相对稳定的版本，你可以很容易地找到具有 RoR 经验的优秀开发人员。

Express.js 就像 Ruby 的 Sinatra。两者都不像 Rails 那样先进，更喜欢更“基本”并提供最小的功能集，而不是试图成为 Rails 的“一次性”框架。

现在，Node.js 正在迅速改变它的 API，仍然没有达到第 1 版并且很难找到开发人员（你经常有人声称他们知道节点并且有 1 年的经验，而实际上他们的意思是他们有 1 年的经验使用客户端javascript）。此外，对于 99% 的网络用途，RoR 就足够了。大多数人只将 Node 用于他们的宠物项目，用于测试下一代超级动态接口或 websocket 与 Socket.io 的集成。如果您只是想为商业目的构建应用程序，请使用 RoR。

至于难度，刚开始的时候，Rails 会有点神奇，它在后台做了很多事情，做一些没有教程的事情会有点困难。但是看看一些流行的 gem 的源代码，甚至是 rails 本身，你很快就会跟上进度。Ruby 是一种非常简单和美丽的语言，你会发现它比 javascript 更简单，而且可能更有趣。

# php - 使用 jquery 和 ajax 提交复选框

> ID：14844816
> 
> 赞同：-3
> 
> 时间：2013-02-13T01:07:05.573
> 
> 标签：php, jquery, ajax, forms, checkbox

所以我在一个php页面中有一个表格：

```
$page .='<form method="POST" action="delete.php" ID="orgForm">';
$page .= "<table> \n";
$page .= "<tr>\n";
//Decides what to display based on logged in. Only if logged in can you see all the contact's info
$page .= "<th>ID</th> \n <th>First Name</th> \n <th>Last Name</th> \n <th>Phone Number</th> \n <th>Email</th> \n";
//Loops through each contact, displaying information in a table according to login status
$sql2="SELECT cID, firstName, lastName, phoneNum, email FROM Contact WHERE oID=".$_GET['orgID'];
$result2=mysql_query($sql2, $connection) or die($sql1);
while($row2 = mysql_fetch_object($result2))
{
    $page .= "<tr>\n";
    $page .= "<td>".$row2->cID."</td>\n";
    $page .= "<td>".$row2->firstName."</td>\n";
    $page .= "<td>".$row2->lastName."</td>\n";
    $page .= "<td>".$row2->phoneNum."</td>\n";
    $page .= "<td>".$row2->email."</td>\n";
    $page .= '<td><input type="checkbox" name="checkedItem[]" value="'.$row2->cID.'"></input></td>'."\n";
    $page .="</tr>";
}
$page .= '<input name="deleteContacts" type="submit" value="Delete Selected Contacts" />'."\n";
$page .= "</form>\n";

$page .='<script src="assets/js/orgDetails.js" type="text/javascript"></script>'."\n"; 
```

我需要以某种方式在 orgDetails.js 中编写一个 jquery 脚本，当我按下删除按钮时，它能够删除选中的行。更改必须在不刷新的情况下出现在屏幕上，而且我还需要能够从 sql db 中删除实际行。有人可以帮帮我吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T02:04:03.630

In action url delete.php, After submit this post:

```
if ($_POST != array()) {
    foreach ($_POST['checkedItem'] as $id) {
        mysql_query('delete from Contact where cID='.$id);
    }

    echo 'Records deleted.';
} 
```

If you dont want page refresh when delete records:

Add to html:

```
<button class="delete_button">Delete selected records</button> 
```

Add your js file:

```
$('.delete_button').click(function () {
    $form = $('#orgForm');

    delete_ids = [];

    $form.find('input[name=checkedItem]').each(function () {
        $checkbox = $(this);

        if ($checkbox.is(':checked')) {
            delete_ids.push($checkbox.val());
        }
    );

    $.ajax({
        url: 'delete.php',
        type: 'post',
        data: {delete_ids: delete_ids},
        success: function (result_html) { alert(result_html); },
    });
}); 
```

And in delete.php:

```
if ($_POST != array()) {
    foreach ($_POST['delete_ids'] as $id) {
        mysql_query('delete from Contact where cID='.$id);
    }

    echo 'Records deleted.';
} 
```

# javascript - settimeout 给出 Uncaught ReferenceError: function is not defined

> ID：14844817
> 
> 赞同：4
> 
> 时间：2013-02-13T01:07:16.750
> 
> 标签：javascript, jquery, settimeout

有人能告诉我为什么这会出错吗？

我将代码移动到函数中以允许我延迟它，因此它不是那么敏感（越来越烦人）

未捕获的 ReferenceError：未定义 hideleftnav

未捕获的 ReferenceError：未定义 showleftnav

```
 function showleftnav()
    {
        $(".leftnavdiv").css('width','500px');
        $("body").css('padding-left','510px');
        //get measurements of window
        var myWidth = 0, myHeight = 0;
        if( typeof( window.innerWidth ) == 'number' ) {
            //Non-IE
            myWidth = window.innerWidth;
            myHeight = window.innerHeight;
        } else if( document.documentElement && ( document.documentElement.clientWidth || document.documentElement.clientHeight ) ) {
            //IE 6+ in 'standards compliant mode'
            myWidth = document.documentElement.clientWidth;
            myHeight = document.documentElement.clientHeight;
        } else if( document.body && ( document.body.clientWidth || document.body.clientHeight ) ) {
            //IE 4 compatible
            myWidth = document.body.clientWidth;
            myHeight = document.body.clientHeight;
        }
        $('#maindiv').width(myWidth - 540);
    } 

    function hideleftnav()
    {
        $(".leftnavdiv").width(10);
        $("body").css('padding-left','20px');
        //get measurements of window
        var myWidth = 0, myHeight = 0;
        if( typeof( window.innerWidth ) == 'number' ) {
            //Non-IE
            myWidth = window.innerWidth;
            myHeight = window.innerHeight;
        } else if( document.documentElement && ( document.documentElement.clientWidth || document.documentElement.clientHeight ) ) {
            //IE 6+ in 'standards compliant mode'
            myWidth = document.documentElement.clientWidth;
            myHeight = document.documentElement.clientHeight;
        } else if( document.body && ( document.body.clientWidth || document.body.clientHeight ) ) {
            //IE 4 compatible
            myWidth = document.body.clientWidth;
            myHeight = document.body.clientHeight;
        }
        $('#maindiv').width(myWidth - 50);
    }

    $(".leftnavdiv").live({                                          //code for autohide
        mouseenter:
        function () {
            setTimeout("showleftnav()", 5000);
        },
        mouseleave:
        function () {
            setTimeout("hideleftnav()", 5000);
        }
    }); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-13T01:15:18.680

看起来您发现使用[`setTimeout`](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)字符串作为第一个参数的问题。这是一个简明示例，说明了相同的问题：

```
(function() {
    function test() {
        console.log('test');
    }

    setTimeout('test()', 500);  // ReferenceError: test is not defined
    setTimeout(test, 500);      // "test"
    setTimeout(function() {     // "test"
        test();
    }), 500);
})(); 
```

**演示：http: [//jsfiddle.net/mXeMc/1/](http://jsfiddle.net/mXeMc/1/)**

使用字符串会导致您的代码与`window`上下文一起评估。但是由于您的代码在回调函数中，`test`因此无法从`window`;访问。它是私有的，并且仅限于匿名函数的范围。

引用函数只是`test`避免了这个问题，因为你直接指向函数而不使用`eval`.

# javascript - 使用 javascript 更改拖动时的背景位置

> ID：14844822
> 
> 赞同：0
> 
> 时间：2013-02-13T01:07:48.317
> 
> 标签：javascript, jquery, css, background

如何拖动背景图像并更改其位置？就像您在 facebook 上更改封面照片的位置一样。

我到处搜索，但找不到合适的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-27T13:18:26.123

您可以尝试使用这个[jQuery 插件](https://github.com/kentor/jquery-draggable-background)，并且非常简单：

```
element.backgroundDraggable() 
```

这里有一个[演示](http://kentor.me/jquery-draggable-background/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T01:49:38.453

On `mousedown`，记录当前鼠标位置。创建一个蒙版，并在该蒙版上：

*   On `mousemove`，获取当前鼠标位置并将其从原始鼠标位置中减去。相应地移动背景
*   在 上`mouseup`，移除遮罩并保存新位置。

# c# - 如何通过 id 或电子邮件将用户添加到角色

> ID：14844839
> 
> 赞同：0
> 
> 时间：2013-02-13T01:09:41.240
> 
> 标签：c#, asp.net-mvc, entity-framework, asp.net-mvc-4

我正在使用简单的会员服务提供商。到目前为止效果很好。[System.Web.Security.Roles为](http://msdn.microsoft.com/en-us/library/system.web.security.roles.aspx)[AddUserToRole](http://msdn.microsoft.com/en-us/library/system.web.security.roles.addusertorole.aspx) 提供了一种方便的方法。

AddUserToRole 接受两个参数：

1.  用户名
2.  角色名

我有两个问题：

1.  我系统中的角色之一是由管理员手动创建的，并且没有任何用户名（null）。我仍然想为这些用户分配一个角色。像 AddUserToRole(UserId, RoleName) 这样的东西。我怎么能超载呢？
2.  是否可以直接使用电子邮件而不是用户名？如果是这样，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T01:18:14.720

您可以创建自己的提供程序并从 Asp.Net Membership 提供程序继承。在那里，您可以为这些方法提供自己的重载。这是另一个问题的示例，其中有人想使用电子邮件作为用户名。希望能帮助到你。[在 ASP.NET 成员资格提供程序中将电子邮件地址设置为用户名](https://stackoverflow.com/questions/5498741/set-email-address-as-username-in-asp-net-membership-provider)

# javascript - 网站可以在除 Opera 和 IE9 或更早版本之外的所有浏览器中运行？

> ID：14844841
> 
> 赞同：0
> 
> 时间：2013-02-13T01:10:11.540
> 
> 标签：javascript, html, web, internet-explorer-9, opera

我的网站[www.globalplayernetwork.com](http://www.globalplayernetwork.com)可以在 Chrome、Firefox 和 IE 10 上运行，但不能在 IE 9 或更早版本和 Opera 上运行。

导航栏和徽标似乎太远了。我可以尝试什么来解决这个问题？

网页

**- 标题**

```
 <section class="overlay">
  &nbsp;&nbsp;&nbsp;&nbsp;<img src="http://www.globalplayernetwork.com/images/GPNLogo.png" height="165" width="590" alt="Global Player Network" title="Global Player Network" /> 
  </section> 
```

**- 导航按钮**

```
 <nav> 
  <ul id="menu" class="menu"> 
  <li> 
  <a href="#" id="contact">
  <span class="active"></span> <span class="wrap"> 
  <span class="link">Contact</span> 
  <span class="descr">
  <font size="2"><b>Get in Touch</b></font></span>
  </span> 
  </a> 
  </li> 
  </ul> 
  </nav>
  </div> 
```

CSS

```
ul.menu{margin:0;padding:0;list-style:none;font-size:14px;width:auto}
ul.menu a{text-decoration:none;outline:none}

ul.menu li{float:right;width:170px;height:85px;position:relative;cursor:pointer}

ul.menu li > a{position:absolute;top:-440px;right:0px;width:170px;height:78px;z-index:12;background:transparent url(../images/overlay.png) no-repeat bottom right;background-color:rgba(0, 0, 0, 0.75);-webkit-box-shadow:0px 0px 2px #000 inset;-moz-box-shadow:0px 0px 2px #000 inset;box-shadow:0px 0px 2px #000 inset}

ul.menu li a img{border:none;position:absolute;width:0px;height:0px;bottom:0px;left:85px;z-index:100;-webkit-box-shadow:0px 0px 4px #000;-moz-box-shadow:0px 0px 4px #000;box-shadow:0px 0px 4px #000}

ul.menu li span.wrap{position:absolute;top:25px;left:0px;width:170px;height:60px;z-index:15}

ul.menu li span.active{position:absolute;background:rgba(0, 0, 0, 0.75);top:85px;width:170px;height:0px;left:0px;z-index:14;-webkit-box-shadow:0px 0px 4px #000 inset;-moz-box-shadow:0px 0px 4px #000 inset;box-shadow:0px 0px 4px #000 inset;-webkit-border-bottom-right-radius:15px;-webkit-border-bottom-left-radius:15px;border-bottom-right-radius:15px;-moz-border-radius-bottomright:15px;border-bottom-left-radius:15px;-moz-border-radius-bottomleft:15px}

ul.menu li span span.link,ul.menu li span span.descr,ul.menu li div.box a{margin-left:15px;text-transform:uppercase;font-size:33px;text-shadow:1px 1px 1px #000}

ul.menu li span span.link{color:#fff;font-size:22px;float:left;clear:both}

ul.menu li span span.descr{color:#0B75AF;float:left;clear:both;width:155px;font-size:10px;letter-spacing:1px}

ul.menu li div.box{display:block;position:absolute;width:170px;overflow:hidden;height:170px;top:85px;left:0px;display:none;background:#000}ul.menu li div.box a{float:left;clear:both;line-height:30px;color:#0B75AF}

ul.menu li div.box a:first-child{margin-top:15px}ul.menu li div.box a:hover{color:#fff}

ul.menu{margin-top:150px} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T01:19:24.810

首先是您没有设置 HTML5 文档类型，而是使用 HTML5 代码，例如

```
<nav> & <section> 
```

等。这些将被不受支持的浏览器删除。如果您必须运行 HTML5 代码，则为旧版本的 IE 使用 HTML5 shim。

此外，在第 94 行，您有

```
</div> 
```

也在第 1 行，你不见了

```
 <html> 
```

在第 74 行，你有

```
<span class="descr"><font size="2"><b>Pick Your Spot</span></b></font></span> 
```

你不能以跨度开始，然后是字体，然后是粗体，然后颠倒顺序并以跨度，然后是粗体，然后是字体结束......你需要正确打开和关闭括号

这是对的：

```
 <span class="descr"><font size="2"><b>Pick Your Spot</b></font></span> 
```

第 82 行，您缺少标签

基本上你被Firefox原谅了，但IE 9没有原谅你。

首先通过验证器运行您的 HTML，并修复丢失标签上的所有错误。然后您的页面导航应该自行纠正。

检查此链接：

[HTML 整洁](http://infohound.net/tidy/tidy.pl?_function=tidy&_url=http%3A%2F%2Fwww.globalplayernetwork.com%2F&_html=&_file=&x=28&y=18&alt-text=&clean=y&doctype=auto&drop-empty-paras=y&fix-backslash=y&fix-bad-comments=y&fix-uri=y&join-styles=y&lower-literals=y&ncr=y&new-blocklevel-tags=&new-empty-tags=&new-inline-tags=&new-pre-tags=&output-xhtml=y&quote-ampersand=y&quote-nbsp=y&indent=auto&indent-spaces=2&tab-size=4&wrap=90&wrap-asp=y&wrap-jste=y&wrap-php=y&wrap-sections=y&ascii-chars=y&char-encoding=ascii&input-encoding=latin1&output-bom=auto&output-encoding=ascii&_output=warn)

# ruby-on-rails - 我如何通过 Rspec 让它通过？接收期望的问题

> ID：14844845
> 
> 赞同：0
> 
> 时间：2013-02-13T01:10:38.143
> 
> 标签：ruby-on-rails, rspec

这是我的错误

```
Failure/Error: cart.should_receive(:save!).and_return(true)
       (Mock "Cart_1004").save!(any args)
           expected: 1 time
           received: 0 times 
```

这是我的 rspec 代码：

```
 describe "#redeem_coupon" do
    let(:coupon) { mock_model Coupon, code: 'specialyug5' }
    let(:cart) { mock_model Cart }
    before { subject.stub(:current_cart) { cart } }

    it "assigns a coupon to the cart" do
      cart.should_receive(:coupon).and_return(coupon)
      post :redeem_coupon, coupon: {coupon: coupon.code}
      assigns(:cart).coupon.should eql(coupon)
    end

    it "redirects to the cart_path" do
      Coupon.any_instance.stub(:find_active_by_code).and_return(coupon)
      cart.should_receive(:save!).and_return(true)
      post :redeem_coupon, coupon: {coupon: coupon.code}
      #response.should redirect_to(cart_path)
    end
  end 
```

（理想情况下，我想测试它是否被重定向，但这显然不是因为整个代码都没有通过）。

```
## controller
  def redeem_coupon
    @cart = current_cart

    if request.post?
      coupon = Coupon.find_active_by_code(params[:coupon][:coupon], @cart.subtotal, current_member)
      if coupon
        @cart.coupon = coupon
        @cart.save!
      end
    end
    redirect_to cart_path
  end 
```

# facebook - 尝试使用 FQL 查询 comments_info 表的计数字段时出现 OAuthException“发生意外错误”

> ID：14844847
> 
> 赞同：2
> 
> 时间：2013-02-13T01:10:52.967
> 
> 标签：facebook, facebook-fql, facebook-apps, facebook-comments

我们有一个使用 FB 评论社交插件的 Facebook 应用程序。我们正在尝试自动提取使用该应用发布的评论总数。

我们尝试过使用这个查询：

```
SELECT count FROM comments_info WHERE app_id = 210218945658186 
```

但是，这会返回以下信息：

```
{
  "error": {
    "message": "An unexpected error has occurred. Please retry your request later.",
    "type": "OAuthException",
    "code": 2
  }
} 
```

如果我们查询 count 字段以外的字段，则正确返回结果。这个查询：

```
SELECT xid, app_id, updated_time FROM comments_info WHERE app_id = 210218945658186 
```

返回以下结果：

```
{
  "data": [
    {
      "xid": null,
      "app_id": 210218945658186,
      "updated_time": 1315413930
    }
  ]
} 
```

有谁知道我们如何解决意外错误？在过去的几天里，我们已经多次尝试过这个查询，所以这不是间歇性问题。[我们使用 comments_info 表中的列在http://facebook.stackoverflow.com/questions/9708969/event-query-using-fql-returns-oauhexception-an-unknown-error-has-occurred](http://facebook.stackoverflow.com/questions/9708969/event-query-using-fql-returns-oauthexception-an-unknown-error-has-occurred)尝试了解决方案，但这并没有不行。

我们还查看了其他选项来计算应用程序中的评论数量。[如何列出我的域中的所有评论](https://stackoverflow.com/questions/10203158/how-to-list-all-comments-in-my-domain/10412716#10412716)的答案不起作用，因为我们使用评论插件的子页面数量可变。

# javascript - 如何定位 div id，包括 JQuery 中的所有子元素

> ID：14844851
> 
> 赞同：4
> 
> 时间：2013-02-13T01:11:42.937
> 
> 标签：javascript, jquery, css, html

我想单击一个特定的 div 并显示一个包含子元素的 div，然后在该 div 及其子元素之外单击时，该 div 及其子元素将再次设置为“显示：无”。单击显示的 div 的子元素时，以下代码不起作用，从而导致隐藏父 div。如何在以下代码中包含 event.target.id == 'menu-container' 中的所有子 div？

```
<body>
  <div id = "screen">
        <div id = "menu-container">
            <li class = "menu-options">
                <ul>option-1</ul>
                <ul>option-2</ul>
                <ul>option-3</ul>
            </li>
        </div>
        <div id = "bottom-panel">
            <div id = "menu-button">
            CLICK HERE FOR MENU
            </div>
        </div>
  </div>
 <body> 
```

jQuery

```
$(document).ready(function() {
$('body').click(function(event){
    if ( event.target.id == 'menu-button'){
        $("#menu-container").show();
    }else if(event.target.id == 'menu-container'){

        return true;
    }else{
        $('#menu-container').hide();
    }
});
}); 
```

[http://jsfiddle.net/ecABg/](http://jsfiddle.net/ecABg/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T02:23:55.043

这是[小提琴](http://jsfiddle.net/onury/ecABg/4/)。

```
$(document).ready(function() {
    $('body').click(function(event){
        if ( event.target.id == 'menu-button'){
            $("#menu-container").show();
        } 
        else if (event.target.id == 'menu-container' || 
                    $(event.target).parents('#menu-container').length > 0)
        {
            return true;
        } else {
            $('#menu-container').hide();
        }
    });
}); 
```

你也应该更正你的清单，它应该是：

```
<ul class="menu-options">
    <li>option-1</li>
    <li>option-2</li>
    <li>option-3</li>
</ul> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T01:37:25.430

您可以添加一个布尔值来检查您的菜单 ID 是否打开，就像这样。

```
$(document).ready(function() {
  $('body').click(function(event){
    console.log(event.target);
    if (event.target.id == 'menu-button'){
        $("#menu-container").show();
    }else if($(event.target).hasClass("menu")){
        return true;
    }else{
        $('#menu-container').hide();
    }
  });
}); 
```

此外，您的 HTML 代码对我来说似乎不正确，我会使用：

```
<ul class = "menu-options">
  <li class="menu">option-1</li>
  <li class="menu">option-2</li>
  <li class="menu">option-3</li>
</ul> 
```

# bigcommerce - 订阅能力

> ID：14844856
> 
> 赞同：2
> 
> 时间：2013-02-13T01:12:04.540
> 
> 标签：bigcommerce

我们有一系列基于订阅的产品。即：前 7 天免费，然后按月或按年收取费用，包括开始日期和结束日期。这可能吗 ？我们可以通过 REST API 来驱动它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T16:25:35.307

移动我的评论以回答 -

我想支持@KimballRobinson 的评论。这可能是可能的。REST API 本身使您可以访问存储数据。您可以创建产品并维护它们。在您的情况下，要考虑的事情 - 产品分类是什么样的，它可以定义为自定义字段或类似的东西。也许您可以设置为每月或每年为同一产品向客户收费/开具发票。您可以通过多种方式实现订阅。如果您在尝试完成的范围内定义更多详细信息，则将更容易弄清楚

# javascript - 自动重新提交表单

> ID：14844857
> 
> 赞同：0
> 
> 时间：2013-02-13T01:12:05.160
> 
> 标签：javascript, html, forms

我们有一个旧版 Web 应用程序在工作，它可以让客户在图表上查看他们的数据。他们在 a 上选择选项`<form>`，然后提交。一个带有说明和常见问题解答的新页面将显示，而 java 小程序显示图形。如果我在浏览器中按 F5 键，它会重新提交表单并关闭/重新打开 java 小程序，该小程序显示带有更新数据的图形。

有没有办法在计时器上复制以自动方式重新提交图表的“功能”？所以图形小程序会在没有用户干预的情况下每 xx 分钟重新显示一次？

简单的元刷新不起作用，因为它不会重新提交表单。我对我可以修改的内容有些限制。Web 应用程序完全由 PL/SQL 生成。

**编辑**

为了澄清：`<form>`用户填写的生成新页面和java小程序不在当前页面上。所以没有表格可以重新提交。按 F5 键将自动重新提交生成当前页面的表单。如果可能的话，我正在寻找一种编程方式来做同样的事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T01:23:55.350

命名你的表格`<form name="myform">`，我想你可以

```
setInterval(myMethod, 300000);

function myMethod(){
    document.forms["myform"].submit();
} 
```

# wpf - 为什么我的 WPF 数据网格中有奇怪的退格字符？

> ID：14844861
> 
> 赞同：3
> 
> 时间：2013-02-13T01:13:04.687
> 
> 标签：wpf, wpfdatagrid

我们的软件在其整个用户界面中使用 DataGrid 来显示可编辑列表。在编辑一些元数据时，我想删除特定列中多行的文本。如果您进入 F2-Backspace-Enter、F2-Backspace-Enter、F2-Backspace-Enter 的节奏，这将非常快。

如果您错过了模式的 F2 部分并在单元格上按 Backspace-Enter，事情就不会那么顺利了。WPF DataGrid 实际上会用退格字符替换单元格的内容。根据您查看字符串的方式，它可能显示为 0×08、 、 \u0008 或 \b。

到底怎么回事？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T01:13:04.687

[此 CodePlex 帖子](http://wpf.codeplex.com/workitem/10246?ProjectName=wpf)确认了 DataGrid 中的一个错误并包含一些解决方法。就我们而言，当前的修复只是忽略其中包含退格字符的字符串。这样它们就不会出现在 XML 中，这很好，因为在 XML 1.0 中，退格是非法字符。

另请参阅此[Microsoft Connect 问题](https://connect.microsoft.com/VisualStudio/feedback/details/625773/backspace-in-a-cell-in-the-wpf-datagrid-produced-b-in-the-text)。

# java - JDBC PreparedStatement 始终返回 1 作为自动生成的键

> ID：14844864
> 
> 赞同：6
> 
> 时间：2013-02-13T01:13:26.880
> 
> 标签：java, mysql, jdbc

我有这段代码试图在数据库中插入一条记录：

```
try {
 Connection conn = getConnection();

 String sql = 
   "INSERT INTO myTable(userId,content,timestamp) VALUES(?,?,NOW())";
 PreparedStatement st = 
    conn.prepareStatement(sql,Statement.RETURN_GENERATED_KEYS);

 st.setLong(1, userId);
 st.setString(2, content);
 id = st.executeUpdate(); //this is the problem line            
} catch(Exception e) {} 
```

问题是，虽然记录插入正确，但我想`id`包含刚刚插入的记录的主键 + auto_increment id。但是，由于某种原因，它总是返回 '1' 作为 id，可能是因为`userId`在插入期间 的值为 1。

我的表是 InnoDB。起初`userId`是另一个表的外键，因为我已经删除了外键甚至 userId 列上的索引，但我仍然得到 1 作为返回值。

任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-13T01:19:40.250

> **PreparedStatment.executeUpdate()**
> 
> **返回：**
> (1) SQL 数据操作语言 (DML) 语句的行数或 (2) 0 用于不返回任何内容的 SQL 语句

您需要使用`execute()`并获得`ResultSet`with `getGeneratedKeys()`; 它将包含您想要的数据。

**编辑添加：**我读了你的问题，因为表中有一个自动增量字段*不是* `userId`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-07-17T06:57:58.987

Brian Roach 接受的[答案](https://stackoverflow.com/a/14844924/642706)是正确的。我正在添加一些想法和一个带有完整代码的示例。

# `RETURN_GENERATED_KEYS`并不意味着“返回生成的密钥”</h1 *>*

原来的海报似乎被国旗的措辞弄糊涂了，这是可以理解的[`Statement.RETURN_GENERATED_KEYS`](https://docs.oracle.com/javase/8/docs/api/java/sql/Statement.html#RETURN_GENERATED_KEYS)。与直觉相反，传递此标志不会*改变*方法的行为[`PreparedStatement::executeUpdate`](https://docs.oracle.com/javase/8/docs/api/java/sql/PreparedStatement.html#executeUpdate--)。该方法总是返回一个`int`，即受执​​行的 SQL 影响的行数。“executeUpdate”方法从不返回生成的密钥。

```
int countRowsAffected = pstmt.executeUpdate();  // Always return number of rows affected, *not* the generated keys. 
```

## 问，你就会收到

如果您想要生成的密钥，您必须执行*两个*步骤：

1.  传递旗帜，*然后*
2.  请求`ResultSet`由仅包含生成的键值的行组成。

这种安排允许您添加取回生成的键的行为，同时保持其他所需的行为，计算受影响的行数。

# 示例代码

这是一个几乎真实的示例，取自 Java 8 应用程序，该应用程序从数据馈送中抓取数据。我认为在这种情况下，一个完整的例子可能比一个最小的例子更有用。

次要细节……这段代码在语法或其他方面可能并不完美，因为我复制粘贴修改过的真实源代码。我使用[UUID 数据类型](http://www.postgresql.org/docs/current/static/datatype-uuid.html)而不是整数作为表的[代理](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=2&cad=rja&uact=8&sqi=2&ved=0CCEQFjABahUKEwjEz478yuHGAhVNE5IKHb2vCSo&url=https%3A%2F%2Fen.wikipedia.org%2Fwiki%2FSurrogate_key&ei=FaeoVYTxLc2myAS936bQAg&usg=AFQjCNGl7ZK6MPC2regSldkG8pmNVNKiOw&sig2=3Cx1wKOyg809BXg_wxt16A&bvm=bv.98197061,d.aWw)主键。这些课程是我自己的`CharHelper`，`DBHelper`这里的细节并不重要。`x`和`y`变量是我自己的应用程序有意义的数据的替代品。我的日志调用是对[SLF4J](http://www.slf4j.org/)框架进行的。[UUID](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&uact=8&ved=0CB8QFjAAahUKEwiumfKZxuHGAhWIXZIKHS3_BY4&url=https%3A%2F%2Fen.wikipedia.org%2Fwiki%2FUniversally_unique_identifier&ei=FqKoVa62AYi7yQSt_pfwCA&v6u=https%3A%2F%2Fs-v6exp1-ds.metric.gstatic.com%2Fgen_204%3Fip%3D184.78.240.187%26ts%3D1437114902375870%26auth%3Dbg5jnuwzldniuzrs6327stz4ncwdz2kq%26rndm%3D0.5389944924972951&v6s=2&v6t=983&usg=AFQjCNHgfHdxVqsJezox04UolXSo17nqzw&sig2=PPImXTLwGvcbqyl82CdV7A&bvm=bv.98197061,d.aWw) [十六进制](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=2&cad=rja&uact=8&ved=0CCEQFjABahUKEwi5ksahxuHGAhUWD5IKHQTFDl4&url=https%3A%2F%2Fen.wikipedia.org%2Fwiki%2FHexadecimal&ei=JqKoVbnnBJaeyASEirvwBQ&usg=AFQjCNEupvQmHCJhPcDMp3b-rL4fMsAPFw&sig2=uBXr7fBIbZU8Y8raeszCGQ&bvm=bv.98197061,d.aWw)字符串是将日志中的报告链接回原始源代码的便捷方式。数据库是[Postgres](http://www.postgresql.org/)，但这种代码应该适用于任何支持生成密钥报告的数据库。

```
public UUID dbWrite (  String x , String y , DateTime whenRetrievedArg ) {
    if ( whenRetrievedArg == null ) {
        logger.error( "Passed null for whenRetrievedArg. Message # 2112ed1a-4612-4d5d-8cc5-bf27087a350d." );
        return null;
    }

    Boolean rowInsertComplete = Boolean.FALSE; // Might be used for debugging or logging or some logic in other copy-pasted methods.

    String method = "Method 'dbWrite'";
    String message = "Insert row for some_table_ in " + method + ". Message # edbea872-d3ed-489c-94e8-106a8e3b58f7.";
    this.logger.trace( message );

    String tableName = "some_table_";

    java.sql.Timestamp tsWhenRetrieved = new java.sql.Timestamp( whenRetrievedArg.getMillis() );  // Convert Joda-Time DatTime object to a java.sql.Timestamp object.

    UUID uuidNew = null;

    StringBuilder sql = new StringBuilder( AbstractPersister.INITIAL_CAPACITY_OF_SQL_STRING ); // private final static Integer INITIAL_CAPACITY_OF_SQL_STRING = 1024;
    sql.append( "INSERT INTO " ).append( tableName ).append( CharHelper.CHAR.PAREN_OPEN_SPACED ).append( " x_ , y_ " ).append( CharHelper.CHAR.PAREN_CLOSED ).append( DBHelper.SQL_NEWLINE );
    sql.append( "VALUES ( ? , ? , ?  ) " ).append( DBHelper.SQL_NEWLINE );
    sql.append( ";" );

    try ( Connection conn = DBHelper.instance().dataSource().getConnection() ; 
```

在这里，我们执行**第 1 步**，传递`RETURN_GENERATED_KEYS`标志。

```
 PreparedStatement pstmt = conn.prepareStatement( sql.toString() , Statement.RETURN_GENERATED_KEYS ); ) { 
```

我们继续准备和执行语句。请注意，`int countRows = pstmt.executeUpdate();`返回受影响行的计数，而不是生成的键。

```
 pstmt.setString( 1 , x ); 
        pstmt.setString( 2 , y ); 
        pstmt.setTimestamp( 3 , tsWhenRetrieved );  
        // Execute
        int countRows = pstmt.executeUpdate();  // Always returns an int, a count of affected rows. Does *not* return the generated keys.
        if ( countRows == 0 ) {  // Bad.
            this.logger.error( "Insert into database for new " + tableName + " failed to affect any rows. Message # 67e8de7e-67a5-42a6-a4fc-06929211e6e3." );
        } else if ( countRows == 1 ) {  // Good.
            rowInsertComplete = Boolean.TRUE;
        } else if ( countRows > 1 ) {  // Bad.
            rowInsertComplete = Boolean.TRUE;
            this.logger.error( "Insert into database for new " + tableName + " failed, affecting more than one row. Should not be possible. Message # a366e215-6cf2-4e5c-8443-0b5d537cbd68." );
        } else { // Impossible.
            this.logger.error( "Should never reach this Case-Else with countRows value " + countRows + " Message # 48af80d4-6f50-4c52-8ea8-98856873f3bb." );
        } 
```

在这里，我们执行**第 2 步**，请求生成密钥的 ResultSet。在此示例中，我们插入了一行并期望返回一个生成的密钥。

```
 if ( rowInsertComplete ) {
            // Return new row’s primary key value.
            ResultSet genKeys = pstmt.getGeneratedKeys();
            if ( genKeys.next() ) {
                uuidNew = ( UUID ) genKeys.getObject( 1 );  // ResultSet should have exactly one column, the primary key of INSERT table.
            } else {
                logger.error( "Failed to get a generated key returned from database INSERT. Message # 6426843e-30b6-4237-b110-ec93faf7537d." );
            }
        } 
```

剩下的就是错误处理和清理。请注意，我们在此代码的底部**返回 UUID ，即插入记录的生成主键。**

```
 } catch ( SQLException ex ) {
        // We expect to have occasional violations of unique constraint on this table in this data-scraping app.
        String sqlState = ex.getSQLState();
        if ( sqlState.equals( DBHelper.SQL_STATE.POSTGRES.UNIQUE_CONSTRAINT_VIOLATION ) ) {  // SqlState code '23505' = 'unique_violation'.
            this.logger.trace( "Found existing row when inserting a '" + tableName + "' row for y: " + y + ". Expected to happen on most attempts. Message # 0131e8aa-0bf6-4d19-b1b3-2ed9d333df27." );
            return null; // Bail out.
        } else { // Else any other exception, throw it.
            this.logger.error( "SQLException during: " + method + " for table: " + tableName + ", for y: " + y + ". Message # 67908d00-2a5f-4e4e-815c-5e5a480d614b.\n" + ex );
            return null; // Bail out.
        }
    } catch ( Exception ex ) {
        this.logger.error( "Exception during: " + method + " for table: " + tableName + ", for y: " + y + ". Message # eecc25d8-de38-458a-bb46-bd6f33117969.\n" + ex );
        return null;  // Bail out.
    }

    if ( uuidNew == null ) {
        logger.error( "Returning a null uuidNew var. SQL: {} \nMessage # 92e2374b-8095-4557-a4ed-291652c210ae." , sql );
    }
    return uuidNew;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-04-27T22:04:09.917

```
String SQLQuery=" ";

String generatedKeys[]= {"column_name"};//'column_name' auto-increment column

prepSt = Connection.prepareStatement(SQLQuery,generatedKeys);

prepSt.setInt(1, 1234); 

.....

.....

....

prepSt.executeUpdate();

ResultSet rs = prepSt.getGeneratedKeys; // used same PreparedStatement object as used   for Insert .

if(rs.next()) {

int id=rs.getLong("column_name");

System.out.println(id);

}
} catch (SQLException e) {
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-24T08:09:00.797

你得到的是“插入行”的通知（对于 INSERT 语句）。我们使用这种方法来知道我们的 DML 查询是否成功。以下是使用 [prepareStatement(yourSQL, Statement.RETURN_GENERATED_KEYS)] 获取自动生成 ID 的方法。请注意，此方法仅返回您一个 RowID 参考。要获得实际 val，请参考方法 2。

（方法一）

```
Try{
String yourSQL="insert into Table1(Id,Col2,Col3) values(SEQ.nextval,?,?)";
myPrepStatement = <Connection>.prepareStatement(yourSQL, Statement.RETURN_GENERATED_KEYS);
myPrepStatement.setInt(1, 123); 
myPrepStatement.setInt(2, 123); 

myPrepStatement.executeUpdate();
ResultSet rs = getGeneratedKeys;
if(rs.next()) {
  java.sql.RowId rid=rs.getRowId(1); 
  //what you get is only a RowId ref, try make use of it anyway U could think of
  System.out.println(rid);
}
} catch (SQLException e) {
} 
```

（方法二）

```
Try{
String yourSQL="insert into Table1(Id,Col2,Col3) values(SEQ.nextval,?,?)";
//IMPORTANT: here's where other threads don tell U, you need to list ALL cols 
//mentioned in your query in the array
myPrepStatement = <Connection>.prepareStatement(yourSQL, new String[]{"Id","Col2","Col3"});
myPrepStatement.setInt(1, 123); 
myPrepStatement.setInt(2, 123); 
myPrepStatement.executeUpdate();
ResultSet rs = getGeneratedKeys;
if(rs.next()) {
//In this exp, the autoKey val is in 1st col
  int id=rs.getLong(1);
  //now this's a real value of col Id
  System.out.println(id);
}
} catch (SQLException e) {
} 
```

基本上，如果您只想要 SEQ.Nextval 的值，请尝试不使用 Method1，b'cse 它只返回 RowID ref，您可能会想办法使用它，这也不适合您尝试转换的所有数据类型它到！这在 MySQL、DB2 中可能工作正常（返回实际 val），但在 Oracle 中不行。

重要提示：在调试时关闭 SQL Developer、Toad 或任何使用相同登录会话执行 INSERT 的客户端。它可能不会每次都影响你（调试调用）......直到你发现你的应用程序无一例外地冻结了一段时间。是的……毫无例外地停止！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-13T01:20:35.723

如果您已`userId`在数据库中设置了自动增量，则不应尝试自行添加。你应该插入`NULL`，它会为你自动增加！（线索就在名字里！）

此外，您不是在更新您的表格，而是在插入表格。所以你不执行Update()。尝试...

```
PreparedStatement pst = conn.prepareStatement("INSERT INTO myTable(userId,content,timestamp) VALUES(NULL,?,NOW())");
pst.setString(1, content);
pst.executeQuery(); 
```

# magento - magento - 为跟踪信息添加新的载体

> ID：14844867
> 
> 赞同：0
> 
> 时间：2013-02-13T01:14:02.247
> 
> 标签：magento, shipping

我正在编写一个自动脚本来将运输信息（运单号）添加到 magento 货件中。我想添加基本包裹中不存在的新运输承运人。

我看到在主要运营商的管理部分的“运输方式”下有一个管理设置。我发现一些数据存储在 core_config_data 表中，位于键carrier/xxxxxx/allowed_methods 下。

有没有人有创建新方法的秘诀，或者可能重新命名/使用现有方法。因为我通过 API 填充跟踪信息，所以讨论的一些前端快速修复对我不起作用。

**编辑**...

我们已经在为费率使用自定义模块，我们通过邮政编码/重量定义费率。在这种情况下，我要做的就是添加一个新的运输承运人，以便 sales_order_shipment.addTrack API 识别新的承运人代码并针对运输状态发出正确的 http 请求。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-13T12:53:42.070

你应该看看 OwebiaShipping2 模块

[http://www.magentocommerce.com/magento-connect/owebia-shipping-2.html](http://www.magentocommerce.com/magento-connect/owebia-shipping-2.html)

# jquery - 使用 Ajax/jQuery 动态加载内容时无法加载 Facebook 评论

> ID：14844869
> 
> 赞同：1
> 
> 时间：2013-02-13T01:14:22.840
> 
> 标签：jquery, ajax, facebook, facebook-comments, xfbml

在使用 ajax 将 Facebook 评论添加到网页后，我无法加载这些评论。

Javascript代码：

```
 $().ready(function() {
            $(document).delegate(".image a", "click", function() {
                $("#dynamic-image").load($(this).attr("href"), {ajaxload:1}, function() {
                    $("#dynamic-image").css("display","block");

                    $('#dynamic-image').lightbox_me({
                        zIndex: 999,
                        centered: false,
                        modalCSS: {top: '10px'},
                        overlayCSS: {background: 'black', opacity: .9},
                        onLoad: function() { 
                            $("#dynamic-image").css("display","block");
                            FB.XFBML.parse(document.getElementById('ajax-fb-comments'));
                        },
                        onClose: function() {
                            $("#dynamic-image").css("display","none");
                        }
                    });
                });
                return false;
            });
        }); 
```

HTML5 Facebook 评论代码：

```
<div class="fb-comments" data-href="<? echo the_permalink(); ?>" data-width="627" data-num-posts="10" data-colorscheme="light" id="ajax-fb-comments"></div> 
```

我尝试过同时使用 XFBML 和 HTML5 Facebook 评论代码，但都没有奏效。我以前使用过 FB.XFBML.parse()，我让它在动态加载的按钮上运行良好，但是它与 Facebook 评论有问题，它们只是不加载并且没有 Javascript 错误。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-14T03:16:20.453

我得到了这个工作。

我所要做的就是使用“FB.XFBML.parse()”并定位fb评论标签周围的div。

# c++ - 这个while循环有什么作用？

> ID：14844872
> 
> 赞同：0
> 
> 时间：2013-02-13T01:14:50.063
> 
> 标签：c++, while-loop

我正在研究 N 皇后问题的“愚蠢”解决方案，我对代码中的 while 循环感到困惑：

```
bool check(int b[8][8])
{

  for(int c = 7; c >= 0; c--)
  {
    int r = 0;
    while(b[r][c] != 1 ) //this is the while loop I was talking about
   {
    r++;
   } //end while loop

    for(int i = 1; i <= c; i++)
   {
    if(b[r][c-i] == 1)
        return false;
    else if ((r-i)>=0 && b[r-i][c-i] == 1)

        return false;
    else if ((r+i)<=7 && b[r+i][c-i] == 1)
        return false;
    }

  } 
return true;
} 
```

在 int main() 中，我有 8 个 for 循环，在最里面的循环中，我将板的整个第一行初始化为 1。然后我调用该函数，在调用该函数后，我将整个第一行重置为零。如果你们需要，我可以显示 int main。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T01:20:19.223

如果你缩进你的代码会有所帮助。

`while`-loop 在-loop内`for`。它正在扫描`r`当前列 ( ) 中的行 ( )，`c`直到找到`b[r][c]`值不存在的正方形 ( ) `1`（无论如何，这可能意味着它是一个空正方形）。

您无法阅读此内容的事实突出了合理命名的标识符以及不在代码中使用“幻数”的重要性。

推荐阅读：[Brian W. Kernighan 和 Rob Pike 的 The Practice of Programming (Professional Computing)](http://www.amazon.co.uk/exec/obidos/ASIN/020161586X/johnsydotorg-21)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T01:21:27.700

外在`for`递减`c`。该值`c`正在索引一个数组元素。这`While-loop`是迭代二维数组中的头元素。只要数组元素 at`[r][c]`不等于 1，就会继续检查。我没有看到任何边界检查`r`。

# symfony - Symfony 2 - ManyToOne 双向关系行为

> ID：14844873
> 
> 赞同：0
> 
> 时间：2013-02-13T01:15:00.250
> 
> 标签：symfony, doctrine-orm, one-to-many, many-to-one

我花了很长时间试图弄清楚如何与 Doctrine 2 建立`ManyToOne`->`OneToMany`关系，但它仍然无法正常工作......

这是应用程序的行为：

1.  `Page`一个网站有
2.  A`User`可以写`Comment`在`Page`

这是我的实体（简化）：

评论实体：

```
**
 * @ORM\Entity
 * @ORM\Table(name="comment")
 */
class Comment {
    /**
     * @ORM\Id
     * @ORM\Column(type="integer")
     * @ORM\GeneratedValue(strategy="AUTO")
     */
     protected $id;

    /**
     * Many Comments have One User
     *
     * @ORM\ManyToOne(targetEntity="\Acme\UserBundle\Entity\User", inversedBy="comments")
     */
    protected $user;

    /**
     * Many Comments have One Page
     *
     * @ORM\ManyToOne(targetEntity="\Acme\PageBundle\Entity\Page", inversedBy="comments")
     */
    protected $page;

    ...

    /**
     * Set user
     *
     * @param \Acme\UserBundle\Entity\User $user
     * @return Comment
     */
    public function setUser(\Acme\UserBundle\Entity\User $user)
    {
        $this->user = $user;
        return $this;
    }

    /**
     * Set page
     *
     * @param \Acme\PageBundle\Entity\Page $page
     * @return Comment
     */
    public function setPage(\Acme\PageBundle\Entity\Page $page)
    {
        $this->page = $page;
        return $this;
    } 
```

用户实体：

```
/**
 * @ORM\Entity
 * @ORM\Table(name="fos_user")
 */
class User extends BaseUser
{
    /**
     * @ORM\Id
     * @ORM\Column(type="integer")
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    protected $id;

    /**
     * The User create the Comment so he's supposed to be the owner of this relationship
     * However, Doctrine doc says: "The many side of OneToMany/ManyToOne bidirectional relationships must be the owning
     * side", so Comment is the owner
     *
     * One User can write Many Comments
     *
     * @ORM\OneToMany(targetEntity="Acme\CommentBundle\Entity\Comment", mappedBy="user")
     */
    protected $comments;

    ...

    /**
     * Get Comments
     *
     * @return \Doctrine\Common\Collections\Collection
     */
    public function getComments() {
        return $this->comments ?: $this->comments = new ArrayCollection();
    } 
```

页面实体：

```
/**
 * @ORM\Entity
 * @ORM\Table(name="page")
 */
class Page
{
    /**
     * @ORM\Id
     * @ORM\Column(type="integer")
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    protected $id;

    /**
     * One Page can have Many Comments
     * Owner is Comment
     *
     * @ORM\OneToMany(targetEntity="\Acme\CommentBundle\Entity\Comment", mappedBy="page")
     */
    protected $comments;

    ...

    /**
     * @return \Doctrine\Common\Collections\Collection
     */
    public function getComments(){
        return $this->comments ?: $this->comments = new ArrayCollection();
    } 
```

我想要一个双向关系，以便能够从（使用）或从（使用）获取`Comment`s的集合。`Page``User``getComments()`

**我的问题是**，当我尝试保存新的`Comment`时，我收到一条错误消息，指出学说无法创建`Page`实体。我猜这正在发生，因为它没有找到`Page`（但它应该）所以它试图创建一个新`Page`实体，以便稍后将它链接到`Comment`我试图创建的实体。

这是我的控制器创建的方法`Comment`：

```
public function createAction()
    {
        $user = $this->getUser();
        $page = $this->getPage();

        $comment = new EntityComment();
        $form = $this->createForm(new CommentType(), $comment);

        if ($this->getRequest()->getMethod() === 'POST') {
            $form->bind($this->getRequest());
            if ($form->isValid()) {
                $em = $this->getDoctrine()->getManager();

                $comment->setPage($page);
                $comment->setUser($user);

                $em->persist($comment);
                $em->flush();

                return $this->redirect($this->generateUrl('acme_comment_listing'));
            }
        }

        return $this->render('AcmeCommentBundle:Default:create.html.twig', array(
            'form' => $form->createView()
        ));
    } 
```

我不明白为什么会这样。我已经`Page`在这个控制器中检查了我的对象（由`$this->getPage()`- 返回存储在会话中的对象），它是一个`Page`存在的有效实体（我也在数据库中检查过）。

我现在不知道该怎么办，也找不到遇到同样问题的人:(

这是我收到的确切错误消息：

> 通过关系“Acme\CommentBundle\Entity\Comment#page”找到了一个新实体，该关系未配置为对实体进行级联持久操作：Acme\PageBundle\Entity\Page@000000005d8a1f2000000000753399d4。要解决此问题：在此未知实体上显式调用 EntityManager#persist() 或配置级联在映射中保持此关联，例如 @ManyToOne(..,cascade={"persist"})。如果您无法找出导致问题的实体，请执行“Acme\PageBundle\Entity\Page#__toString()”以获取线索。

但我不想添加`cascade={"persist"}`，因为我不想在级联上创建页面，而只是链接现有的页面。

**更新1：**

如果我在设置之前获取页面，它就可以工作。但我仍然不知道为什么我应该这样做。

```
public function createAction()
        {
            $user = $this->getUser();
            $page = $this->getPage();

            // Fetch the page from the repository
            $page = $this->getDoctrine()->getRepository('AcmePageBundle:page')->findOneBy(array(
               'id' => $page->getId()
            ));

            $comment = new EntityComment();

            // Set the relation ManyToOne
            $comment->setPage($page);
            $comment->setUser($user);

            $form = $this->createForm(new CommentType(), $comment);

            if ($this->getRequest()->getMethod() === 'POST') {
                $form->bind($this->getRequest());
                if ($form->isValid()) {
                    $em = $this->getDoctrine()->getManager();

                    $em->persist($comment);
                    $em->flush();

                    return $this->redirect($this->generateUrl('acme_comment_listing'));
                }
            }

            return $this->render('AcmeCommentBundle:Default:create.html.twig', array(
                'form' => $form->createView()
            ));
        } 
```

**更新2：**

我最终将 page_id 存储在会话中（而不是完整的对象），考虑到我没有要存储的使用会话而只有 id，我认为这是一个更好的主意。我还期望 Doctrine 在检索`Page`实体时缓存查询。

但是有人可以解释为什么我不能使用`Page`会话中的实体吗？这就是我设置会话的方式：

```
$pages = $site->getPages(); // return doctrine collection
if (!$pages->isEmpty()) {         
    // Set the first page of the collection in session
    $session = $request->getSession();
    $session->set('page', $pages->first());
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T09:04:24.820

实际上，`Page`实体管理器不知道您的对象，该对象来自会话。（正确的术语是与实体管理器“分离”。）这就是为什么它试图创建一个新的。

当您从不同来源获取对象时，您必须使用`merge`函数。（来自会话，来自反序列化函数等......）

代替

```
// Fetch the page from the repository
            $page = $this->getDoctrine()->getRepository('AcmePageBundle:page')->findOneBy(array(
               'id' => $page->getId()
            )); 
```

您可以简单地使用：

```
$page = $em->merge($page); 
```

如果您想在会话中使用对象，它将对您有所帮助。

有关合并实体的更多信息在[这里](http://doctrine-orm.readthedocs.org/en/2.0.x/reference/working-with-objects.html#merging-entities)

# multithreading - 如何编写等待事件的未来

> ID：14844874
> 
> 赞同：1
> 
> 时间：2013-02-13T01:15:01.940
> 
> 标签：multithreading, events, scala, rpc, future

我有一个客户端/服务器套接字，它可以做一些 rpc 事情。我对 finagle 有所了解，我发现 Future 的隔离非常优雅。所以我的问题是如何在scala中编写一个等待事件的Future（我的客户端请求的服务器回复）。该实现可能会使用已识别的请求，但我缺乏的是要求未来等待事件而无需忙碌等待的方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T20:47:04.947

创建一个`Promise`代替`Future`并向您的事件添加一个侦听器，以实现承诺。将承诺的未来返回给您的客户（在 Twitter Util 未来库中它是承诺本身，在 Scala 2.10 中它是[`p.future`](http://docs.scala-lang.org/sips/pending/futures-promises.html#promises)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T07:45:10.037

为此，您需要查看[Akka Actors](http://akka.io/)

这是一个演员的例子

```
class MyActor extends Actor {
   val log = Logging(context.system, this)
   def receive = {
      case "test" ⇒ log.info("received test")
      case _      ⇒ log.info("received unknown message")
   }
} 
```

# android - 安卓弹出菜单

> ID：14844876
> 
> 赞同：0
> 
> 时间：2013-02-13T01:15:10.813
> 
> 标签：android, menu

我正在寻找一个简单的弹出菜单，可用于在 2.3.3 及更高版本上运行的手机。

像这样的东西，与 ContextMenu 的工作方式不同，因为它不需要列表视图：

![在此处输入图像描述](../Images/c0d109388c39ac7c587e8856627f6ad7.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T01:38:22.113

尝试以下操作：

在布局文件夹中创建一个文件 dialog.xml 并添加以下代码：

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<TextView
    android:id="@+id/ErrorMsg"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_margin="10dp"
    android:text="Do you want to un-install this app?" />

<LinearLayout
    android:layout_below="@+id/ErrorMsgDialog"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <Button android:id="@+id/Cancel"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:textSize="15sp"
        android:text="Cancel" />

    <Button android:id="@+id/Ok"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:textSize="15sp"
        android:text="OK" />

</LinearLayout> 
```

然后在您的类文件中使用以下代码显示对话框：

```
AlertDialog.Builder builder = new AlertDialog.Builder(context);
    View view = LayoutInflater.from(context).inflate(
            R.layout.dialog, null);
    builder.setView(view);

    dialog = builder.create();
    dialog.setCanceledOnTouchOutside(true);

    Button cancel = (Button) view.findViewById(R.id.Cancel);
    cancel.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            dialog.dismiss();
        }
    });

    Button ok = (Button) view.findViewById(R.id.Ok);
    ok.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // Do something here for OK action

        }
    });

    dialog.show(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T01:42:02.133

最简单的方法是创建一个 AlertDialog.Builder 对象并配置其正面和负面按钮，然后设置标题和消息并完成。不再需要任何布局文件。

# silverlight - 列表框被禁用，垂直滚动条与 silverlight 一起使用

> ID：14844878
> 
> 赞同：0
> 
> 时间：2013-02-13T01:15:24.133
> 
> 标签：silverlight, c#-4.0, silverlight-4.0, listbox, scrollbar

我有这个

```
 <ListBox  
                ItemsSource="{Binding Students}" 
                SelectionMode="Extended" 
                Name="listStudents" 
                Height="430" 
                IsEnabled="{Binding CanUpdateNumber}">
         </ListBox> 
```

当 IsEnabled 为 true 并且列表框中的项目更多时，则存在垂直滚动条。当 IsEnabled 为假时，所有项目都被禁用（这是真的）并且滚动条关闭，因此无法看到列表框中的所有项目。

当 IsEnabled 为 false 时，如何使滚动条出现

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T07:13:42.897

尝试使用 ScrollViewer 控件包装您的 ListBox，如下所示：

```
 <ScrollViewer VerticalScrollBarVisibility="Auto" Height="430" Width="110" Padding="0">
    <ListBox 
        ItemsSource="{Binding Students}" 
        SelectionMode="Extended" 
        Name="listStudents" 
        IsEnabled="{Binding CanUpdateNumber}"
        ScrollViewer.VerticalScrollBarVisibility="Hidden" 
        BorderThickness="0">
    </ListBox>
 </ScrollViewer> 
```

在这里找到：http: [//manny-grewal.blogspot.be/2010/09/enable-scroll-in-disabled-listbox-in.html](http://manny-grewal.blogspot.be/2010/09/enable-scroll-in-disabled-listbox-in.html)

**编辑：**

我想我发现了我在这篇文章中犯的错误。在 Scrollviewer 中设置高度并从 ListBox 中移除高度。

# mysql - Oracle 从具有和不具有值的另一列中选择列条目

> ID：14844883
> 
> 赞同：0
> 
> 时间：2013-02-13T01:15:48.007
> 
> 标签：mysql, oracle

我有一张表，我想获得 s# 的表，其中 s# 有 p1 但没有 p2；

表 s
s# P#

s1 p1

s1 p2

s1 p3

s1 p4

s2 p1

s2 p3

s3 p2

s3 p3

我的结果应该是 s2。我尝试的 where 子句和连接返回 s1,s2 这是错误的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T01:33:58.477

尝试这个：

```
SELECT s#
  FROM (SELECT s#, SUM(CASE WHEN p# = 'p1' THEN 1 ELSE 0 END) p1ct
                 , SUM(CASE WHEN p# = 'p2' THEN 1 ELSE 0 END) p2ct
          FROM s
         GROUP BY s#)
 WHERE p1ct > 0
   AND p2ct = 0; 
```

# windows - 如何通过蓝牙从 Windows 7 笔记本电脑以编程方式发送数据？

> ID：14844885
> 
> 赞同：0
> 
> 时间：2013-02-13T01:15:51.387
> 
> 标签：windows, terminal, bluetooth

我正在做我学校的一个项目。我们正在使用微控制器通过蓝牙（Sparkfun 的 bluesmirf）将整数发送到 android 设备。因为不同的人需要微控制器，我想知道是否可以通过笔记本电脑的蓝牙以编程方式通过蓝牙将发送数据发送到我的安卓手机？

我之前正在测试我们的 CoolTerm，但我只能通过每次按 Enter 键手动发送数据。

我想创建一个循环，从我的 HP Pavilion DV7 笔记本电脑一遍又一遍地（每次不同的 int）发送一个随机数（12 位长）？我正在使用 Windows 7 Ultimate 和 Coolterm 1.4.1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T21:28:27.620

我对这个问题的解决方案是使用**[RealTerm](http://realterm.sourceforge.net/index.html#downloads_Download "RealTerm 下载页面")**。我用每行中的整数创建了一个 *.txt 文件（从 Excel 表中复制+粘贴 - 使它更容易）。**然后，在端口**选项卡下连接到笔记本电脑的蓝牙端口后，我转到**发送**选项卡并使用**转储文件到端口**选项并添加我创建的 *.txt 文件。此外，我使用 999 作为延迟，每 999 毫秒发送每行，并且在重复下，我从 1 更改为 0 以使其重复，直到我按下**Stop**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T04:16:47.720

查看这个 Codeplex 项目 - [http://32feet.codeplex.com/](http://32feet.codeplex.com/)它允许您通过本机 Windows 堆栈使用 C# 打开蓝牙会话。它还将允许蓝牙串行端口 (SPP) 会话，这是您想要用来连接到您的设备的。该项目的历史相当长，并且如果您使用 Google，在网站或博客上都有大量文档。

# sql - 为什么 Ansi_nulls 不起作用？

> ID：14844886
> 
> 赞同：0
> 
> 时间：2013-02-13T01:15:58.190
> 
> 标签：sql, sql-server

假设我有 2 个名为 aTable1、aTable2 的表

aTable1 将 userID 设置为 identity，并包含以下数据：

```
userID  email          FirstName    LastName
1       NULL               C            CC
2       NULL               D            DD
3       a@yahoo.com        A            AA
4       b@yahoo.com        B            BB
5       e@yahoo.com        E            EE
6       f@yahoo.com        NULL         NULL
7       g@yahoo.com        NULL         NULL 
```

aTable2 包含以下数据：

```
userID  email          FirstName    LastName    Title
3       a@yahoo.com      A            AA       student
4       b@yahoo.com      B            BB       student
5       e@yahoo.com      E            EE       student
NULL    NULL             C            CC       dean
NULL    NULL             D            DD       advisor
NULL    f@yahoo.com NULL    NULL               student2
NULL    g@yahoo.com NULL    NULL               student3 
```

我想根据 aTable1 更新 aTable2.userID，但知道 2 个表中有空值，所以我这样做：

```
set ANSI_NULLS off
update aTable2
set aTable2.userID = a.userID
from aTable a, aTable2 b 
where a.FirstName = b.FirstName and a.LastName = b.LastName and a.email = b.email 
```

但是，这个更新并没有更新所有的用户ID，实际上它只更新那些电子邮件不等于null的，但我已经将ANSI_NULLS设置为关闭。我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T01:22:54.193

有记录表明[它不起作用](http://msdn.microsoft.com/en-us/library/ms188048.aspx)：

> `SET ANSI_NULLS ON`仅当比较的操作数之一是变量 is`NULL`或字面量时才会影响比较`NULL`。如果比较的两边都是列或复合表达式，则设置不影响比较。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T01:27:16.360

要使更新查询正常工作，您可以尝试以下操作：

```
UPDATE a2
SET
   userId = a.UserId
FROM
    aTable2 a2
    JOIN aTable1 a ON 
        ISNULL(a.Email,'NULL') = ISNULL(a2.Email,'NULL') AND 
        ISNULL(a.FirstName,'NULL') = ISNULL(a2.FirstName,'NULL') AND
        ISNULL(a.LastName,'NULL') = ISNULL(a2.LastName,'NULL') 
```

当值为 NULL 时，我将值任意设置为“NULL”——使用一些不会出现在您的数据中的不同值，以确保您不会收到误报。

我还看到了在 JOIN 中使用 OR 标准并检查两个值是否为 NULL 的其他解决方案：

```
((a.Email = a2.Email) OR (a.Email IS NULL AND a2.Email IS NULL)) ... 
```

祝你好运。

# java - 显示类方法中的类对象

> ID：14844887
> 
> 赞同：0
> 
> 时间：2013-02-13T01:15:57.683
> 
> 标签：java, class, inheritance, methods

我创建了 Person 类，它由 Student 和 Employee 类扩展（由其他 Employee 类型类扩展）。人员类如下所示：

```
String name;
 int ssn;
 int age;
 String gender;
 String address;
 String PNumber;
 static int count;

//empty constructor
public Person(){
    count++;
}

//print count
public static void printCount(){
    System.out.println("The number of people is: "+ count);
}

//constructor with name
public Person(String name){
    this.name = name;
    count++;
}

/*constructor to create default person object*/
public Person(String name, int ssn, int age, String gender, String address, String PNumber)
{

    this.name = name;
    this.ssn = ssn;
    this.age = age;
    this.gender = gender;
    this.address = address;
    this.PNumber = PNumber;
    count++;
} 
```

我目前正在尝试创建一种方法，如果他们是性别 =“男性”，它将显示所有人员。我有：

```
//display Males
public void print(String gender){ 
    if(this.gender.contentEquals(gender)){
        //print out person objects that meet this if statement
    }
} 
```

我不确定如何在方法中引用对象（学生和员工都是人）来返回它们。而且我也不知道如何在main方法中引用这个方法。我不能使用 Person.print，但如果我使用

```
Person james = new Person(); 
```

然后使用

```
james.print("Males"); 
```

我只返回詹姆斯（并且该方法在这种情况下没有意义）。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T01:29:14.323

首先要把print方法做成静态方法。它独立于每个单独的 Person 对象，因此将其设为静态将允许您在 main 方法中将其调用为

```
Person.print("Male"); 
```

要在 print 方法中引用 Person 对象，您需要将 Person 对象的集合作为参数传递给它。您应该将 Person 的所有实例保存在一个数组中，并在调用它时将其传递给 print 方法。那么打印方法就可以了

```
public static void print(String gender, Person[] people) {
    for(Person x : people)
        if (x.gender.equals(gender))
            //print the person
} 
```

通过此修改，您应该从 main 方法调用它

```
Person.print("Male", people); 
```

people 是保存所有 Person 对象的数组。

# ios - 将 UIImage 扭曲为平行四边形

> ID：14844889
> 
> 赞同：0
> 
> 时间：2013-02-13T01:16:20.940
> 
> 标签：ios, objective-c, uiimage, catransform3d, 2.5d

我有一个由函数产生的 UIImage。类似于以下内容。

```
image1.image = [self reflectedImage:img]; 
```

其中 image1 是一个 UIImage 控件。在将其插入 image1 之前，我想进一步将其向右或向左稍微扭曲成平行四边形，如下所示。所以我只想重新定位点c和d。

![在此处输入图像描述](../Images/b1222647a51523d18a5533c2f11c0622.png)

我在这里和那里阅读了几十篇文章。我不确定我是否可以使用**CGAffineTransformMake**来做到这一点。 [这个网页](http://iphonedevelopment.blogspot.jp/2008/10/cgaffinetransform-11-little-more.html)表明我可以。不幸的是，没有示例项目可以查看它是如何工作的。不幸的是，我还没有找到一个网站告诉我如何将简单的矩形图像扭曲成平行四边形。那么最简单的方法是什么？我是否需要创建一个图层才能使用**CATransform3D**？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-26T14:10:43.123

我发现了一种替代方法，它比本主题中的其他方法更简单。只需将此转换应用于您的视图：

```
imgView.transform = CGAffineTransformMake(1.0, 0.0, proportion, 1.0, 0.0, 0.0); 
```

其中比例介于 -1 和 1 之间

这称为剪切变换，请查看下面的链接了解更多信息

[http://iphonedevelopment.blogspot.it/2008/10/cgaffinetransform-11-little-more.html](http://iphonedevelopment.blogspot.it/2008/10/cgaffinetransform-11-little-more.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T01:59:27.760

你要做的就是给你`UIImageView`一些观点。默认情况下，图层变换没有透视，因此您还必须设置：`transform.m34 = 1.0 / -2000;`

还要更改视图的[锚点](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/CoreAnimation_guide/CoreAnimationBasics/CoreAnimationBasics.html#//apple_ref/doc/uid/TP40004514-CH2-SW15)，使其沿视图的顶部边缘旋转。对你来说，它变成了`(0,0.5)`.

![在此处输入图像描述](../Images/3f0640d9e448ac07a23a30f9b9625970.png)

透视图赋予它平行四边形的外观，就好像视图具有深度（它也称为 2.5D，因为它不是纯 3D 动画，它是伪 3D）。设置锚点，使其沿该边缘旋转，最后给它一个角度。即旋转多少？

```
// Rotate by 30 degrees
CGAffineTransform rotationTransform = CGAffineTransformIdentity;
rotationTransform = CGAffineTransformRotate(rotationTransform, DegreesToRadians(30));
swingView.transform = rotationTransform; 
```

这一切都会给你你想要的……

# html - 使用 :hover 调整图像大小/缩放图像

> ID：14844890
> 
> 赞同：1
> 
> 时间：2013-02-13T01:16:21.963
> 
> 标签：html, css, hover

我有一个带有悬停事件的图像。唯一的问题是它不能扩展到更小的尺寸或移动屏幕。我花了很多时间研究并没有发现任何东西。我认为 100% 宽度应该可以解决问题。我肯定错过了什么。

[代码笔链接。](http://cdpn.io/iIxmJ)

请在我的大脑分裂之前提供帮助。另外，欢迎批评。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T05:08:35.170

检查这个：

```
body, html {
width:100%;
height:100%;
}
.myButtonLink {
background: url("https://dl.dropbox.com/u/5869656/Caroline%20Ziv/Home-test3.jpg") no-repeat scroll 0 0 transparent;
border: 10px solid #FFFFFF;
box-shadow: 1px 1px 2px #E6E6E6;
display: block;
height: 100%;
text-indent: -99999px;
width: 100%;
background-size: 100%;
}
.myButtonLink:hover {
background: url("https://dl.dropbox.com/u/5869656/Caroline%20Ziv/Home-test5.jpg") no-repeat scroll 0 0 transparent;
border: 10px solid #FFFFFF;
box-shadow: 1px 1px 2px #E6E6E6;
background-size: 100%;
} 
```

也将下面的 css 应用于您在 iframe 中加载的页面。

```
body, html {
width:100%;
height:100%;
} 
```

希望它会有所帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T01:44:00.153

请执行下列操作：

*   适用`max-width: 100%;`于`img`
*   消除`text-indent: -9999px;`
*   去掉背景图片`div`

# java - Java 对不同域中的用户进行身份验证。

> ID：14844894
> 
> 赞同：-1
> 
> 时间：2013-02-13T01:16:37.577
> 
> 标签：java

我正在构建一个单点登录应用程序，我想知道是否可以在不使用 oauth 的情况下在完全不同的网站中对用户进行身份验证，“这不是一个可能的解决方案”。我目前可以通过将其他网站的登录表单以及帖子网址、隐藏字段、用户名/密码字段复制到我的页面中来做到这一点。如果可能的话，我宁愿在不暴露凭据的情况下在幕后执行此操作。我想知道像 httpclient 这样的东西是否能够完成这项任务。

任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T03:37:52.600

是的，这在理论上是可能的。您正在尝试将其他网站用作身份验证提供程序。您需要了解其他网站提供哪些身份验证服务 - 您可以尝试联合身份验证、基于 LDAP 的身份验证、kerberos 等，但如果您要对其进行身份验证的站点不支持任何这些，那么您就是不会使用这些协议中的任何一个。

# php - 第 140 页测验问题

> ID：14844895
> 
> 赞同：0
> 
> 时间：2013-02-13T01:16:44.667
> 
> 标签：php, javascript, jquery

我现在正在为我的朋友制作一个关于消防员培训的测验页面。我正在考虑是否可以使用 javascript 来完成，还是应该使用 php 来完成？大约有 140 个问题，但我将开始构建，所以只有 10 个问题开始:)

我以前从来没有尝试过这样的事情，所以希望你能帮助我，向我解释如何去做，并进一步帮助我。

我觉得有点像这样：

```
<?php
if(isset($_POST["ok"] == 1)
{
    echo "TRUE!";
}
elseif(isset($_POST["ok"] >= 1)
{
    echo "FALSE!";
}
?>
<form action="#" method="post">
<input type="checkbox" name="1" /><p>Bla bla bla</p>
<input type="checkbox" name="2" /><p>Bla bla bla</p>
<input type="checkbox" name="3" /><p>Bla bla bla</p>
<input type="submit" name="ok" value="Ok" />
</form> 
```

可能不是这样，但它必须是这样的 Mon 的**点击**，如果它是真的，那么它必须在其中或看起来仍然希望你能跟随我在我想要建造的东西中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T01:25:28.780

你的问题要清楚一点。你到底想完成什么？

如果您用 PHP 编写测验，那么您必须在提交表单后显示答案。这可以通过重定向或通过 JavaScript 的[AJAX来实现。](http://w3schools.com/AJAX/)

如果您用 JavaScript 编写答案检查，那么所有逻辑都将在客户端完成，而不是在服务器端完成。这是我推荐的方法，因为它会完成同样的事情，而且对于这个任务来说真的要简单得多，因为在这个测验中你似乎并不是真的在寻找安全性。

几乎，如果你正在寻找一些安全的东西，请使用 PHP，如果你是为了好玩，请使用 JavaScript。

# parsing - 使用多个解析器进行 SML 解析

> ID：14844897
> 
> 赞同：0
> 
> 时间：2013-02-13T01:16:55.240
> 
> 标签：parsing, sml

我正在尝试实现一个函数，该函数将获取解析器列表并一个一个地尝试它们，直到一个成功。如果列表中没有解析器成功，则整个解析器将失败。这是我的尝试：

```
 fun oneOf [] = NONE
      | oneOf (p::ps) = fn inp => case parse p inp of
              NONE => oneOf ps
            | SOME (v,out) => SOME (v,out) 
```

我收到许多运算符/操作数不同意错误。关于我哪里出错的任何提示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T08:11:57.280

我认为你在第一种情况下犯了一个错误，它也应该产生一个函数。此外，您需要`inp`在递归调用中传递。那是：

```
fun oneOf [] = fn inp => NONE
  | oneOf (p::ps) = fn inp => case parse p inp of
          NONE => oneOf ps inp
        | SOME (v,out) => SOME (v,out) 
```

或更短：

```
fun oneOf [] inp = NONE
  | oneOf (p::ps) inp =
    case parse p inp of
        NONE => oneOf ps inp
      | some => some 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T07:44:00.157

你的类型不匹配。使用`oneOf []`，您返回`NONE`，这是一种`option`类型。`oneOf (p::ps)`而是返回一个匿名函数，该函数返回一个`option`. 大概，您会想要将该匿名函数应用于某些东西。

# ruby-on-rails - 个人共享 URL - 路由问题

> ID：14844899
> 
> 赞同：1
> 
> 时间：2013-02-13T01:17:11.040
> 
> 标签：ruby-on-rails, routing, url-routing

我的应用程序中的每个用户都有一个自定义的可共享 URL。此 URL 允许用户共享站点并将其归功于转化。
我的问题是，当我尝试捕捉这条路线时，我遇到了一个问题，即我的所有网址——即使是非共享的网址都被视为用户共享网址。

我知道发生这种情况是因为我如何设置 routes.rb

### 路线.rb

```
match '/:in_url' => 'share_links#go' 
```

### 共享链接控制器.rb

```
def go
  if @link = Spree::ShareLink.find_by_in_url(params[:in_url])
    session[:converter] = @link.user_id
    redirect_to root_path, :status => @link.http_status
  end
end 
```

我将如何设置它，因此控制器仅处理可共享的 url - 或者如果@link 为 nil，我将继续执行常规请求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T01:22:02.387

尝试将此路线放在路线文件的末尾，看看问题是否仍然存在。

不确定您的应用程序是如何设置的，但是当用户输入错误时会发生什么？也许将其更改为：

```
def go
  if @link = Spree::ShareLink.find_by_in_url(params[:in_url])
    session[:converter] = @link.user_id
    redirect_to root_path, :status => @link.http_status
  else
    redirect_to root_path # or 404 page
  end
end 
```

# c# - 如果父类是继承类，如何获取父类？

> ID：14844901
> 
> 赞同：1
> 
> 时间：2013-02-13T01:17:12.230
> 
> 标签：c#, .net

所以可以说我有这个：

```
public class Item
{
    public int ItemID;
    public List<Enchantment> Enchantments; //Enchantment is a class
}

public class Stick: Item
{
    public int Damage = 18;
    public Stick()
    {
        ItemID = 4;
    }

    public void Update()
    {
        foreach (Enchantment ItemEnchantment in Enchantments)
        {
            Enchantment.Update();
        }
    }
}

public class Enchantment
{
    public int EnchantmentID;

    public void Update()
    {
        //NEED HELP HERE

        Parent.Damage += 2; //How do I know my parent is a (Stick)?
                        //I thought of giving each item a uniqueID, and two items cannot have the same id, so the enchantment checks the items list for a specific id, and then uses that as the parent class.
                        //But is there a more efficient way?

    }
} 
```

**我怎么知道我的父母是（棒）？我想给每个项目一个唯一的ID，两个项目不能有相同的ID，所以结界检查项目列表中的特定ID，然后将其用作父类。但是有没有更有效的方法？**

^ 考虑显示努力 Oo ? 我只需要一种更有效的方法来完成这个..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-13T02:04:11.210

我会提出一个比两个提议的答案中的任何一个都更激进的建议（这两个答案都是合理的）。我会退后一步，问“谁在这里负责？”这个问题。也就是说，哪一段代码实际上代表了游戏规则？

你在这里要走的路是将游戏规则放入每个对象中；物体计算自己的伤害。但是现在其他一些代码将不得不考虑如果怪物抵抗结界，或者是装甲，或者其他什么会发生什么。

在这些情况下，我更喜欢的方法是制作一堆*实际编码游戏规则的*Rules 对象。这样就有了明确的责任；物品负责告诉规则引擎他们有什么附魔，规则引擎会计算出会发生什么。我认为，如果您选择这种方法，您会发现很多问题都消失了。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-13T01:22:27.983

这不是父类。你`Stick`是**由**`Enchantments`. _

简单的路线：通过`Stick`方法：

```
// in Stick
foreach (Enchantment ItemEnchantment in Enchantments) {
    ItemEnchantment.Update(this);
}

// in Enchantment..
public void Update(Stick stick) {
    stick.Damage += 2;
} 
```

为了使其更通用，请考虑使用另一个实现`Damage`修饰符的类：

```
public class ItemWithDamageModifier : Item {
    public int Damage { get; set; }
} 
```

然后从这里继承：

```
public class Stick: ItemWithDamageModifier { 
```

然后你可以改用我上面的方法，像这样：

```
public void Update(ItemWithDamageModifier damageItem) {
    damageItem.Damage += 2;
} 
```

然后你可以传入任何继承的东西`ItemWithDamageModifier`，例如 a `Stick`、 or `Staff`、 or`Gun`等​​。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T01:27:47.283

`Enchantment`不应该对这个类一无所知，`Item`否则它闻起来就像一个非常糟糕的设计。你最好有这样的东西：

```
public class Enchantment
{
    public int EnchantmentID;
    //a property, that contains the damage given by the Enchantment
    //so, when constructing an Enchantment 
    //you should set it to some certain value
    public int Damage { get; set; }
} 
```

根本不需要`Update`任何类中的方法，而是：

```
 int BaseDamage = 18; //a base damage of the item
    //the fact damage, i.e. sum of the base one and all the enchantments
    public int Damage    
    {
        get
        {
            int encDamage = 0;
            if (Enchantments.Any())
                encDamage += Enchantments.Sum(e => e.Damage);
            return BaseDamage + encDamage;
        }
    } 
```

# c# - 通过 .Net 代码加载和使用 Mathematica 包

> ID：14844902
> 
> 赞同：3
> 
> 时间：2013-02-13T01:17:20.480
> 
> 标签：c#, graph, wolfram-mathematica, packages

我正在使用 C# 将数据传递给 Mathematica 并返回 Graphs：

```
MathKernel k = new MathKernel();
k.CaptureGraphics = true;
k.GraphicsFormat = "JPEG";
k.Compute("Show[Graphics[{Thick, Blue, Circle[{#, 0}] & /@ Range[4], Black, Dashed, Line[{{0, 0}, {5, 0}}]}]]");
pictureBox1.Image = k.Graphics[0]; 
```

![在此处输入图像描述](../Images/af7186a70f0c0070e3434a579c5d7d3c.png)

这一直有效，直到我需要使用一个包。我看到返回的是原始数据而不是图像：

```
StringBuilder command = new StringBuilder();
command.Append("fakedata01 = With[{n = DayCount[{2008, 01, 01}, {2011, 3, 27}]}, Transpose[{Array[DatePlus[{2008, 01, 01}, #] &, n, 0], #}] & /@ (100\. + (Accumulate /@ RandomVariate[NormalDistribution[0, 1], {8, n}]))];");
command.Append("Dimensions[%];");
command.Append("XYZLineGraph[fakedata01, Title -> \"Banks\\[CloseCurlyQuote] Share Prices\", Subtitle -> \"1 January 2008 = 100\", ScaleUnits -> \"Index\", DateLabelFormat -> \"Quarter1\", PartialLastYear -> 2.95/12, Footnotes -> {{\"*\", \"MSCI financials index\"}}, Sourcenotes -> {\"Bloomberg\"}, SpecialGridValues -> 100, PlotStyle -> {Red, XYZDarkBlue, XYZPink, XYZMauve, XYZPaleOrange, XYZTurquoise, Green, Gray}, Epilog -> {Red, Arrow[{{{2009, 3}, 30}, {{2009, 8}, 48}}], Text[\"Label\", {{2009, 3}, 25}]}]");

MathKernel k = new MathKernel();
k.CaptureGraphics = true;
k.GraphicsFormat = "JPEG";
k.Compute("Get[\"XYZ`XYZGraphs`\"];");
k.Compute("Get[\"XYZ`XYZUtilities`\"]");
k.Compute("Show[" + command.ToString() + "]");
pictureBox1.Image = k.Graphics[0]; 
```

错误是：

**Get::noopen: 无法打开 XYZ `XYZGraphs`。**

我已经在 Mathematica 中安装了包，所以在启动时它们就可用了。当我在 Mathematica 中运行命令时，它会给我预期的输出。

**有谁知道如何加载包以便通过 .Net 调用获得它们？**

这两行不起作用：

```
k.Compute("Get[\"XYZ`XYZGraphs`\"];");
k.Compute("Get[\"XYZ`XYZUtilities`\"]"); 
```

我也尝试了以下方法，它有同样的问题：

```
k.Compute("Get[\"XYZ`XYZGraphs`\"];Get[\"XYZ`XYZUtilities`\"];Show[" + command.ToString() + "]"); 
```

[*我已经看到了这些线程，但它们在 Mathematica 中而不是在 C# 中：* [Load a mathematica package from inside a package](https://stackoverflow.com/questions/8385317/load-a-mathematica-package-from-within-a-package) [Building Application Packages with multple packages and references in Mathematica](https://stackoverflow.com/questions/5567980/building-application-packages-with-multple-packages-and-references-in-mathematic)]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T04:03:43.457

I worked it out, the full answer is over at [https://mathematica.stackexchange.com/questions/19516/load-a-mathematica-package-via-net-code](https://mathematica.stackexchange.com/questions/19516/load-a-mathematica-package-via-net-code)

I evaluated $UserBaseDirectory in a Mathematica session. In that directory is the pre-established Applications folder where you are supposed to put your work. This is your private Applications folder.

Say you are doing extended work on TopicX. Create a TopicX folder in your private Applications folder. You can create subsidiary folders that contain your work and organize your notebooks on this topic.

Now make the BeginPackage statement in your package (which has the name XYZGraphs.m and is placed in theXYZ folder):

```
BeginPackage["XYZ`XYZGraphs`"] 
```

Now you can load the package from anywhere by using:

```
<< XYZ`XYZGraphs` 
```

# jakarta-ee - AtmosphereHandler 保证保存实例？

> ID：14844904
> 
> 赞同：0
> 
> 时间：2013-02-13T01:17:44.483
> 
> 标签：jakarta-ee, glassfish, websocket, ejb, atmosphere

我正在使用 AtmosphereFramework 的 WebSockets，我有一个这样注释的类：

```
@WebSocketHandlerService(path = "/gts")
public class GameSocket extends WebSocketHandlerAdapter {

@Override void onOpen(WebSocket webSocket) {...}
@Override void onTextMessage(WebSocket webSocket, String message) throws IOException {...} 
```

而且我想知道来自单个套接字连接的所有调用（onOpen、onTextMessage、...）是否保证使用一个且仅一个 GameSocket 实例。

否则，我正在寻找一种方法来将用户会话保持在这个仅限 JavaEE/Glassfish/EJB3 Websocket 的环境中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T13:34:17.047

(1) 是的，只有一个实例

(2) Session 和 GlassFish 存在一些已知问题。试试看，如果你发现一些问题，就来[邮件列表](https://groups.google.com/group/atmosphere-framework?pli=1)，我将描述如何使用`AtmosphereConfig.properties()`来存储状态。

（我是大气的创造者）。

# python - 仅使用 python 列表（不是集合）的列表交集算法实现

> ID：14844910
> 
> 赞同：-1
> 
> 时间：2013-02-13T01:18:22.850
> 
> 标签：python

我一直在尝试在 python 中写下一个处理重复的列表交集算法。我是 python 和编程的新手，如果这听起来效率低下，请原谅我，但我想不出其他任何东西。这里，L1 和 L2 是有问题的两个列表，L 是交集。

1.  遍历 L1
2.  遍历 L2
3.  如果元素在 L1 和 L2 中
4.  将其添加到 L
5.  从 L1 和 L2 中删除它
6.  遍历 L
7.  将元素添加回 L1 和 L2

我 100% 确定这不是 Mathematica 中用于评估列表交集的算法，但我真的想不出更有效的方法。我不想在此过程中修改 L1 和 L2，因此我将交集添加回两个列表。有任何想法吗？我不想使用列表以外的任何内置函数/数据类型，所以没有导入集或类似的东西。就我而言，这是一个算法和实现练习，而不是编程练习。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-11-27T18:49:50.157

这是一个更快的解决方案：

```
def intersect_sorted(a1, a2):
  """Yields the intersection of sorted lists a1 and a2, without deduplication.

  Execution time is O(min(lo + hi, lo * log(hi))), where lo == min(len(a1),
  len(a2)) and hi == max(len(a1), len(a2)). It can be faster depending on
  the data.
  """
  import bisect, math
  s1, s2 = len(a1), len(a2)
  i1 = i2 = 0
  if s1 and s1 + s2 > min(s1, s2) * math.log(max(s1, s2)) * 1.4426950408889634:
    bi = bisect.bisect_left
    while i1 < s1 and i2 < s2:
      v1, v2 = a1[i1], a2[i2]
      if v1 == v2:
        yield v1
        i1 += 1
        i2 += 1
      elif v1 < v2:
        i1 = bi(a1, v2, i1)
      else:
        i2 = bi(a2, v1, i2)
  else:  # The linear solution is faster.
    while i1 < s1 and i2 < s2:
      v1, v2 = a1[i1], a2[i2]
      if v1 == v2:
        yield v1
        i1 += 1
        i2 += 1
      elif v1 < v2:
        i1 += 1
      else:
        i2 += 1 
```

它运行在`O(min(n + m, n * log(m)))`时间中，其中 n 是长度的最小值，m 是最大值。它同时遍历两个列表，在开始时跳过尽可能多的元素。

此处提供了分析：http: [//ptspts.blogspot.ch/2015/11/how-to-compute-intersection-of-two.html](http://ptspts.blogspot.ch/2015/11/how-to-compute-intersection-of-two.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T01:58:15.853

任何迭代`L1`，`L2`每次都迭代，将花费二次时间。改善这一点的唯一方法是避免遍历所有`L2`. （有一个类似的问题，从`L`最后删除重复。）

如果你使用`set`for `L2`（和 for `L`），当然每`in L2`一步都是常数时间，所以整体算法是线性的。而且您始终可以构建自己的哈希表实现，而不是使用`set`. 但这是很多工作。

使用二叉搜索树，甚至只是一个排序列表和一个`binary_find`函数，您都可以在 O(N log N) 中完成。这`binary_find`更容易自己编写。所以：

```
S2 = sorted(L2)
L = [element for element in L1 if binary_find(element, S2)]
S = remove_adjacent(sorted(L)) 
```

或者，更简单地说，也对 L1 进行排序，然后你就不需要了`remove_adjacent`：

```
S1, S2 = sorted(L1), sorted(L2)
L = []
for element in S1:
    if binary_find(element, S2) and (not L or L[-1] != element):
        L.append(element) 
```

无论哪种方式，这是 O(N log N)，其中 N 是较长列表的长度。对比一下，原来是O(N^2)，其他答案是O(N^3)。当然它有点复杂，但它仍然很容易理解。

您需要编写`binary_find`（并且，如果适用，`remove_adjacent`），因为我假设您不想使用 stdlib 之外的东西，如果您甚至不想使用额外的内置函数。但这真的很容易。例如：

```
def binary_find(element, seq):
    low, high = 0, len(seq), 
    while low != high:
        mid = (low + high) // 2
        if seq[mid] == element:
            return True
        elif seq[mid] < element:
            low = mid+1
        else:
            high = mid
    return False

def remove_adjacent(seq):
    ret = []
    last = object()
    for element in seq:
        if element != last:
            ret.append(element)
        last = element
    return ret 
```

如果你甚至不想使用`sorted`or `list.sort`，你也可以很容易地编写自己的排序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T01:23:02.157

怎么样：

1.  通过 L1 迭代
2.  通过 L2 迭代
3.  如果（在 L1 和 L2 中）而不是在 L -> 添加到 L

不是特别有效，但在代码中它看起来像这样（通过重复来说明这一点）：

```
>>> L1 = [1,2,3,3,4]
>>> L2 = [2,3,4,4,5]
>>> L = list()
>>> for v1 in L1:
        for v2 in L2:
            if v1 == v2 and v1 not in L:
                L.append(v1)
>>> L
[2,3,4] 
```

您只需检查元素是否已经在 L 中，如果不在则添加到 L 中，即可避免从 L1 和 L2 中删除。那么L1和L2中是否有重复并不重要。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-13T01:23:48.217

**编辑：**我读错了标题，并浏览了内置部分。无论如何我都会把它留在这里，可能会帮助别人。

您可以使用该`set`类型来实现这一点。

```
>>> a = [1,2,3,4]
>>> b = [3,4,5,6]
>>> c = list(set(a) & set(b))
>>> c
[3, 4] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-13T01:26:28.607

1.  做一个临时清单。
2.  遍历两个列表之一。不管是哪一个。
3.  对于每个元素，检查该元素是否存在于另一个列表 ( `if element in list2`) 中并且不在您的临时列表中（相同的语法）
4.  如果这两个条件都为真，请将其附加到您的临时列表中。

* * *

我对发布解决方案感到难过，但老实说，它比我的文字更具可读性：

```
def intersection(l1, l2):
    temp = []

    for item in l1:
        if item in l2 and item not in temp:
            temp.append(item)

    return temp 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-06-06T17:29:55.600

计算两个列表的交集并保留顺序并消除重复项的 Pythonic 和有效方法如下：

```
L1 = [1,2,3,3,4,4,4,5,6]
L2 = [2,4,6]
aux = set()
L = [x for x in L1 if x in L2 and not (x in aux or aux.add(x)) ] 
```

该解决方案使用集合“aux”来存储已添加到结果列表中的元素。

请注意，您不需要“导入”集合，因为它们是 Python 中的本机数据类型。但是如果你坚持不使用集合，你可以选择这个使用列表的效率较低的版本：

```
L1 = [1,2,3,3,4,4,4,5,6]
L2 = [2,4,6]
aux = []
L = [x for x in L1 if x in L2 and not (x in aux or aux.append(x)) ] 
```

# php - XML Feed - 有效的 HTTP 标头用户代理？

> ID：14844919
> 
> 赞同：1
> 
> 时间：2013-02-13T01:19:14.520
> 
> 标签：php, http-headers

我正在尝试使用下面的脚本加载外部提要，但生成的文件始终为空。提供 XML 的服务不提供任何支持，但声称我应该发送“有效的 HTTP 标头用户代理”，而不是解释有效的 HTTP 标头用户代理应该是什么。

```
<?php
$feed = "[FEEDURL]"; //Hey Stackoverflow, I removed the URL on purpose
$content = file_get_contents($feed);
$dir = dirname($_SERVER['SCRIPT_FILENAME']);
$fp = fopen($dir.'/feedcopy.txt', 'w');
fwrite($fp, $content);
fclose($fp);
?> 
```

有人有线索吗？此脚本适用于其他 XML 提要，因此这不应该是问题。提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T19:12:24.110

您需要使用带有 stream_context_create() 的有效上下文资源，如下所示：

```
<?php
$feed = "[FEEDURL]"; //Hey Stackoverflow, I removed the URL on purpose

$options = array(
  'http' => array(
    'method' => "GET",
    'header' => "User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.17 (KHTML, like Gecko) Chrome/24.0.1312.57 Safari/537.17\r\n" // Chrome v24
  )
);
$context = stream_context_create($options);

$content = file_get_contents($feed, false, $context);

$dir = dirname($_SERVER['SCRIPT_FILENAME']);
$fp = fopen($dir.'/feedcopy.txt', 'w');
fwrite($fp, $content);
fclose($fp);
?> 
```

# android - 会话 getPermissions() 返回空列表

> ID：14844923
> 
> 赞同：0
> 
> 时间：2013-02-13T01:19:36.050
> 
> 标签：android, facebook, facebook-graph-api, facebook-android-sdk

我想在我的 android 应用程序中建立一个 facebook 连接。我抑制了 SSO，目前正在使用 webview 登录。我已成功登录，但是当我使用

[http://developers.facebook.com/docs/howtos/androidsdk/3.0/publish-to-feed/](http://developers.facebook.com/docs/howtos/androidsdk/3.0/publish-to-feed/)

这个`publishStory()`我没有权限，它会导致异常。我也有会话的令牌值：ACCESS_TOKEN_REMOVED

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T12:31:38.423

您请求的权限列表是什么？请注意，您不能在新的 Facebook SDK (3) 中请求 publish_stream / 任何发布操作，根据他们的文档，您应该为此使用**Session.requestNewPublishPermissions**方法。

您的 access_token_removed 消息没问题，它只是用于对象的 toString（出于安全原因），如果您要查看该对象，您将看到真正的访问令牌（可能是私有的）。

# php - 配置 GWT Dev Mode Jetty Server 以执行 php 脚本

> ID：14844928
> 
> 赞同：2
> 
> 时间：2013-02-13T01:20:17.137
> 
> 标签：php, gwt, jetty, gwt-dev-mode

我一直在尝试几个我在网上找到的示例，这些示例使用 HTTP 请求使用 GWT（通过 Eclipse）开发的 Web 应用程序调用 PHP 脚本。我想一旦我得到这个工作，我可以将这些技术应用到我自己的应用程序中。但是，我很难让它发挥作用。我最接近成功的是在[https://developers.google.com/web-toolkit/doc/2.1/tutorial/gettingstarted](https://developers.google.com/web-toolkit/doc/2.1/tutorial/gettingstarted)找到的 StockWatcher 应用程序（我也从 JSON-PHP 实现开始工作了这个示例这里[https://developers.google.com/web-toolkit/doc/2.1/tutorial/JSONphp](https://developers.google.com/web-toolkit/doc/2.1/tutorial/JSONphp)）

StockWatcher 示例让您在“war”目录中放置一个 PHP 脚本。当我从基本示例开始时，使用以下代码片段定义 url 字符串（注意：q 的值添加在 *XXX* = localhost 和*YYY* = 127.0.0.1:8888 下面的代码片段之后）

```
private static final String JSON_URL = GWT.getModuleBaseURL() + "stockPrices?q=";
String url = JSON_URL; 
```

这给出了网址

```
"http://_YYY_/stockwatcher/stockPrices?q="; 
```

即使我将 PHP 脚本移动到 .../war/stockwatcher 目录，我也会收到 404 错误代码。

如果我对网址进行硬编码：

*url = YYY* /stockPrices.php?q=">http://YYY/stockPrices.php?q= ;

找到 PHP 脚本，但脚本文件只是回显客户端例程。这随后会导致异常，因为客户端例程需要 JSON。

现在，如果我将网址更改为

```
url = http://_XXX_/StockWatcher/stockPrices.php?q=; 
```

刷新项目，将“war”目录的内容复制到C:\wamp\www\StockWatcher，在我的浏览器中输入XXX/stockwatcher/stockwatcher.html">http: *//XXX/stockwatcher/stockwatcher.html*（我'正在使用 Chrome），然后一切都像魅力一样工作（我的 PC 上运行了 Wampserver）。

虽然我可能在生产系统中使用 Wampserver，但我仍然想在 Eclipse 中进行调试。Eclipse 和 GWT 插件附带的内置服务器 Jetty 是否不适用于 PHP？

提前非常感谢，比尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T09:50:18.637

如果您不打算在 servlet 容器中部署您的应用程序，那么您绝对没有理由要尝试在 DevMode 的 servlet 容器中运行 PHP 脚本。

要做的事情是：

1.  将您的 WAMP 服务器指向您的`war`文件夹，或者将 DevMode 和编译器指向您的 WAMP 服务器提供`-war`的某个文件夹
2.  在没有嵌入式 Jetty 的情况下启动 DevMode：将 URL 传递`-noserver`并使用`http://`到您的 WAMP 服务器`-startupUrl`（从 Eclipse，使用**Run As → Web Application（在外部服务器上运行）**）

请参阅[https://developers.google.com/web-toolkit/doc/latest/DevGuideCompilingAndDebugging#How_do_I_use_my_own_server_in_development_mode_instead_of_GWT%27s](https://developers.google.com/web-toolkit/doc/latest/DevGuideCompilingAndDebugging#How_do_I_use_my_own_server_in_development_mode_instead_of_GWT%27s)

# autohotkey - 如何编写 AutoHotkeys 插件来关闭特定类的所有窗口？

> ID：14844930
> 
> 赞同：0
> 
> 时间：2013-02-13T01:20:33.197
> 
> 标签：autohotkey, hotkeys

如何关闭所有 Windows 资源管理器窗口？

```
winclose ahk_class CabinetWClass 
```

我知道如何关闭一个窗口。我怎样才能关闭所有的窗户？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T01:45:17.830

[在循环](http://www.autohotkey.com/docs/commands/Loop.htm)中使用您的代码，每次[检查](http://www.autohotkey.com/docs/commands/IfWinExist.htm)是否还有该类的任何窗口。如果没有，则退出循环。

# php - Zend 框架 2 - zftool.phar Windows 7 环境变量

> ID：14844932
> 
> 赞同：2
> 
> 时间：2013-02-13T01:20:44.260
> 
> 标签：php, zend-framework2, windows-7-x64

我正在尝试使用 Windows 7 中的环境变量全局访问[zftool.phar](https://github.com/zendframework/ZFTool)（对于 Zend Framework 2）。我无法让它工作。有没有人成功做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-01T18:49:57.250

尝试使用命令：

```
> php zftool.phar 
```

但请记住，必须将 php.exe 文件的路径添加到您的 PATH 环境变量中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-24T08:26:29.030

1.  创建文件夹 C:\zftool

2.  [从 packages.zendframework.com( http://packages.zendframework.com/zftool.phar](http://packages.zendframework.com/zftool.phar) )下载“zftool.phar”到 C:\zftool

3.  使用代码在 C:\zftool 中创建“zftool.bat”文件：

    ```
    @echo off
    php %~dp0zftool.phar %* 
    ```

4.  使用代码在 C:\zftool 中创建“zftool”文件（不带扩展名）：

    ```
    #!/bin/sh
    dir=$(d=$(dirname "$0"); cd "$d" && pwd)

    # see if we are running in cygwin by checking for cygpath program
    if command -v 'cygpath' >/dev/null 2>&1; then

        # cygwin paths start with /cygdrive/ which will break windows PHP,
        # so we need to translate the dir path to windows format. However
        # we could be using cygwin PHP which does not require this, so we
        # test if the path to PHP starts with /cygdrive/ rather than /usr/bin.

        if [[ $(which php) == /cygdrive/* ]]; then
            dir=$(cygpath -m $dir);
        fi
    fi

    dir=$(echo $dir | sed 's/ /\ /g')
    php "${dir}/zftool.phar" $* 
    ```

5.  C:\zftool 中的文件：
    zftool
    zftool.bat
    zftool.phar

6.  将“C:\zftool”添加到 PATH 环境变量中

7.  打开CMD并输入“ `zftool`”，检查命令“ `zftool version`”

8.  这允许您在`zftool`没有“”的任何地方使用 CMD 短命令“ `php zftool.phar`”

9.  您必须`zftool`在项目文件夹中运行“”命令才能在当前项目中使用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-24T11:18:50.633

或使用以下代码**创建**并**以管理员身份运行**“install-zftool.bat”文件：

```
@echo off

::setting directory for installing zftool - change if necessary
set folder="C:\zftool"

::making directory
md "%folder%"

::downloading latest version of zftool.phar
bitsadmin.exe /transfer "ZFTool" "http://packages.zendframework.com/zftool.phar" "%folder%\zftool.phar"

::creating empty zftool and zftool.bat files
@echo. 2> %folder%\zftool
@echo. 2> %folder%\zftool.bat

::making zftool.bat file
@echo @echo off > %folder%\zftool.bat
@echo php %%~dp0zftool.phar %%*>> %folder%\zftool.bat

::making zftool file
@echo #!/bin/sh > %folder%\zftool
@echo dir=$(d=$(dirname "$0"); cd "$d" ^&^& pwd) >> %folder%\zftool
@echo if command -v 'cygpath' ^>/dev/null 2^>^&1; then >> %folder%\zftool
@echo if [[ $(which php) == /cygdrive/* ]]; then >> %folder%\zftool
@echo dir=$(cygpath -m $dir); >> %folder%\zftool
@echo fi>> %folder%\zftool
@echo fi>> %folder%\zftool
@echo dir=$(echo $dir ^| sed 's/ /\ /g')>> %folder%\zftool
@echo php "${dir}/zftool.phar" $*>> %folder%\zftool

::adding folder to PATH environment variable
setx path "%PATH%;%folder%" /M

exit 
```

bat 文件将完成上述所有操作

不要忘记**以管理员身份运行**！

# ruby-on-rails - 如何使用 HAML 保持干爽？

> ID：14844933
> 
> 赞同：2
> 
> 时间：2013-02-13T01:20:53.250
> 
> 标签：ruby-on-rails, ruby, haml

我在 Rails 中安装了 HAML。我试图通过制作片段模板来扩展它的功能。例如，我有这个一般的图像结构：

```
- @images.each do |image|
  .image
    %a{ :href => image.target }
      = image_tag image.url
    %a{ :href => edit_image_path(image) }
      Edit 
```

或者至少是这样的。我想做的是清理它，以便我可以说：

```
- @images.each do |image|
  = render 'snippet/image' image 
```

我怎样才能在语义上做到这一点？显然，我可以在我的代码片段中声明一个变量并在渲染之前分配它，但这似乎超级懒惰。有没有一个我可以看到的例子，它显示了片段和它是如何呈现的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T01:30:55.427

`render`可以采取一个`:collection`选项，如下所示：

```
= render :partial => "image", :collection => @images 
```

[请参阅Layouts and Rendering in Rails](http://guides.rubyonrails.org/layouts_and_rendering.html)指南中的 3.4.5 渲染集合部分，其中说：

> 将为集合中的每个成员插入一次部分...部分[将]可以访问集合的成员...通过以部分命名的变量

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T01:30:53.300

你可以这样做：

```
- @images.each do |image|
  render :partial => 'snippet/image', :locals => { :image => image } 
```

它在语义上没问题，虽然有点冗长。

# android - 三星 Galaxy 相机的应用程序在 Google Play 商店中不可用

> ID：14844936
> 
> 赞同：1
> 
> 时间：2013-02-13T01:21:16.817
> 
> 标签：android, camera, galaxy

我在 Google Play 商店中发布了一个应用程序。该应用程序适用于所有安卓设备。最近，我发现三星 Galaxy 相机 (JellyBean 4.1.1) 在 Google Play 商店中看不到该应用程序。

我是否需要为应用程序设置任何特殊权限才能在三星 Galaxy 相机中显示？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T01:31:38.913

检查你有：

```
<uses-feature android:name="android.hardware.telephony" android:required="false"> 
```

由于相机无法拨打电话/短信。

希望这能解决它，（当然，如果您使用电话功能，请确保您通过 PackageManager 禁用它们）。

# c++ - 用于在服务器上使用的 2D 图形库

> ID：14844937
> 
> 赞同：-1
> 
> 时间：2013-02-13T01:21:23.243
> 
> 标签：c++, c, linux, image, static-libraries

我正在寻找可以轻松完成的简单 C/C++ 图形库：使用图像调整大小、裁剪、灰度等。主要要求是在服务器（linux-debian）上轻松安装（最好来自源代码），因为我不是服务器上的 root，并且 ImageMagick 或 OpenCV 等常用库在安装过程中失败，因为没有 CMake、旧的 autoconf 等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T04:00:38.010

试试[http://cimg.sourceforge.net/](http://cimg.sourceforge.net/)非常简单好用，而且有源代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T09:54:22.503

看看 liuliu 的 ccv 库，一个轻量级的 opencv 替代品

[https://github.com/liuliu/ccv](https://github.com/liuliu/ccv)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T02:48:42.390

[Skia](https://code.google.com/p/skia/wiki/APIOverview)看起来很有前途（没用过）

# css - Fancybox 模态窗口在后台更改布局

> ID：14844938
> 
> 赞同：3
> 
> 时间：2013-02-13T01:21:25.867
> 
> 标签：css, debugging, layout, twitter-bootstrap, modal-dialog

因此，在我的网站中，每次单击缩略图时，都会按预期启动 Bootstrap 模态窗口，但存在一个小错误……背景中的所有布局（页脚除外）都向右倾斜约 20px . 当模态窗口关闭时，布局移回原位。

有人可以帮我解决这个问题，或者至少给出一些可能导致这个问题的提示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T01:29:55.517

这是因为[Fancybox](http://fancybox.net/)发生的。`fancybox-lock`它在`body`标签上设置类并添加`margin-right: 15px;`内联。

```
<body class="fancybox-lock" style="margin-right: 15px;"> 
```

这里的风格：

```
.fancybox-lock {
    overflow: hidden;
} 
```

例如，如果您在 Firefox 上使用 Firebug，您可以在单击元素时注意到页面的受影响部分。

* * *

这是必须发生的事情。请注意，当没有 时`fancybox`，页面有滚动条。这会将内容推到左侧以容纳滚动条。当单击缩略图时，`fancybox`操作并从页面中删除滚动条，查看`overflow:hidden`页面内容将向右移动到之前被滚动条使用的那个空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T01:51:02.007

在 fancybox 中找到这些类并确保下面的内容匹配

```
.fancybox-lock .fancybox-overlay {
overflow-y: none;   
} 
```

和这个

```
.fancybox-overlay {
width: 100%;
position: absolute;
top: 0;
left: 0;
overflow: hidden;
display: none;
z-index: 8010;
background: url('fancybox_overlay.png');
} 
```

# java - maven repo 包含错误的 cglib 源 jar

> ID：14844941
> 
> 赞同：0
> 
> 时间：2013-02-13T01:21:54.943
> 
> 标签：java, maven, maven-3, cglib

我在 maven 中央仓库中遇到了 cglib 2.2.2 源 jar 的问题。它包含以下顶级条目：

```
lib
META_INF
src
build.xml
README
LICENCE
NOTICE 
```

它是故意完成的还是格式错误的源包？我已经重新打包了这个 jar 并将源代码从 src 目录移动到上层，并且 cglib 的所有源代码都可以访问，在此之前，一些 cglib 类没有源附件，但是源 jar 包含这些类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T02:25:16.223

[您可以在此处](https://issues.sonatype.org/browse/MVNCENTRAL)提出有关 Maven Central的问题。看起来有人在 cglib sourceforge 站点上提出了这个[问题。](http://sourceforge.net/tracker/index.php?func=detail&aid=3564669&group_id=56933&atid=482368)

# mongodb - 使用厨师角色配置 EC2 实例时出错

> ID：14844942
> 
> 赞同：2
> 
> 时间：2013-02-13T01:21:58.820
> 
> 标签：mongodb, amazon-ec2, chef-infra, chef-recipe

我在配置 AWS 实例时遇到了这个错误：看起来 mongodb 的厨师食谱坏了。有没有人见过这个错误？

```
10.128.0.206 Compiling Cookbooks...
10.128.0.206 
10.128.0.206 /var/lib/gems/1.8/gems/chef-11.2.0/bin/../lib/chef/provider/lwrp_base.rb:97: warning: already initialized constant JavaArk
10.128.0.206 /var/lib/gems/1.8/gems/chef-11.2.0/bin/../lib/chef/resource/lwrp_base.rb:51: warning: already initialized constant JavaArk
10.128.0.206 /var/lib/gems/1.8/gems/chef-11.2.0/bin/../lib/chef/provider/lwrp_base.rb:97: warning: already initialized constant AptPreference
10.128.0.206 /var/lib/gems/1.8/gems/chef-11.2.0/bin/../lib/chef/provider/lwrp_base.rb:97: warning: already initialized constant AptRepository
10.128.0.206 /var/lib/gems/1.8/gems/chef-11.2.0/bin/../lib/chef/resource/lwrp_base.rb:51: warning: already initialized constant AptPreference
10.128.0.206 /var/lib/gems/1.8/gems/chef-11.2.0/bin/../lib/chef/resource/lwrp_base.rb:51: warning: already initialized constant AptRepository
10.128.0.206 [2013-02-12T23:21:06+00:00] WARN: Cloning resource attributes for execute[apt-get update] from prior resource (CHEF-3694)
10.128.0.206 [2013-02-12T23:21:06+00:00] WARN: Previous execute[apt-get update]: /var/chef/cache/cookbooks/apt/recipes/default.rb:29:in `from_file'
10.128.0.206 [2013-02-12T23:21:06+00:00] WARN: Current  execute[apt-get update]: /var/chef/cache/cookbooks/mongodb/recipes/10gen_repo.rb:28:in `from_file'
10.128.0.206 [2013-02-12T23:21:06+00:00] WARN: Cloning resource attributes for package[mongodb] from prior resource (CHEF-3694)
10.128.0.206 [2013-02-12T23:21:06+00:00] WARN: Previous package[mongodb]: /var/chef/cache/cookbooks/mongodb/recipes/10gen_repo.rb:42:in `from_file'
10.128.0.206 [2013-02-12T23:21:06+00:00] WARN: Current  package[mongodb]: /var/chef/cache/cookbooks/mongodb/recipes/default.rb:22:in `from_file'
10.128.0.206 [2013-02-12T23:21:06+00:00] WARN: We are not using a configfile, as the daemons can be configured via commandline
10.128.0.206 
10.128.0.206 
10.128.0.206 ================================================================================
10.128.0.206 
10.128.0.206 Recipe Compile Error in /var/chef/cache/cookbooks/mongodb/recipes/default.rb
10.128.0.206 
10.128.0.206 ================================================================================
10.128.0.206 
10.128.0.206 
10.128.0.206 
10.128.0.206 
10.128.0.206 ArgumentError
10.128.0.206 
10.128.0.206 -------------
10.128.0.206 
10.128.0.206 wrong number of arguments (1 for 2)
10.128.0.206 
10.128.0.206 
10.128.0.206 
10.128.0.206 
10.128.0.206 Cookbook Trace:
10.128.0.206 
10.128.0.206 ---------------
10.128.0.206 
10.128.0.206   /var/chef/cache/cookbooks/mongodb/definitions/mongodb.rb:122:in `notifies'
10.128.0.206   /var/chef/cache/cookbooks/mongodb/definitions/mongodb.rb:122:in `from_file'
10.128.0.206   /var/chef/cache/cookbooks/mongodb/definitions/mongodb.rb:119:in `from_file'
10.128.0.206   /var/chef/cache/cookbooks/mongodb/recipes/default.rb:38:in `from_file'
10.128.0.206 
10.128.0.206 
10.128.0.206 
10.128.0.206 
10.128.0.206 Relevant File Content:
10.128.0.206 
10.128.0.206 ----------------------
10.128.0.206 
10.128.0.206 /var/chef/cache/cookbooks/mongodb/definitions/mongodb.rb:
10.128.0.206 
10.128.0.206 115:      notifies :restart, "service[#{name}]"
10.128.0.206 116:    end
10.128.0.206 117:    
10.128.0.206 118:    # service
10.128.0.206 119:    service name do
10.128.0.206 120:      supports :status => true, :restart => true
10.128.0.206 121:      action service_action
10.128.0.206 122>>     notifies service_notifies
10.128.0.206 123:      if !replicaset_name.nil?
10.128.0.206 124:        notifies :create, "ruby_block[config_replicaset]"
10.128.0.206 125:      end
10.128.0.206 126:      if type == "mongos"
10.128.0.206 127:        notifies :create, "ruby_block[config_sharding]"
10.128.0.206 128:      end
10.128.0.206 129:      if name == "mongodb"
10.128.0.206 130:        # we don't care about a running mongodb service in these cases, all we need is stopping it
10.128.0.206 131:        ignore_failure true
10.128.0.206 
10.128.0.206 
10.128.0.206 
10.128.0.206 
10.128.0.206 
10.128.0.206 [2013-02-12T23:21:06+00:00] ERROR: Running exception handlers
10.128.0.206 [2013-02-12T23:21:06+00:00] FATAL: Saving node information to /var/chef/cache/failed-run-data.json
10.128.0.206 [2013-02-12T23:21:06+00:00] ERROR: Exception handlers complete
10.128.0.206 Chef Client failed. 0 resources updated
10.128.0.206 
10.128.0.206 [2013-02-12T23:21:06+00:00] FATAL: Stacktrace dumped to /var/chef/cache/chef-stacktrace.out
10.128.0.206 [2013-02-12T23:21:06+00:00] FATAL: ArgumentError: wrong number of arguments (1 for 2)
Record adchemy-auth-mgmt02.dev.aws.adchemy.net does not exist in route53, preparing to add
Traceback (most recent call last):
  File "/opt/aws/scripts/ec2create.py", line 450, in <module>
    main()
  File "/opt/aws/scripts/ec2create.py", line 275, in main
    createdns(args.name, args.env.lower())
  File "/opt/aws/scripts/ec2create.py", line 353, in createdns
    ip = nodejson['automatic']['ipaddress']
KeyError: 'ipaddress' 
```

我们正在运行厨师版本 11。找到其他厨师角色。只有包含 mongodbb 配方的厨师角色才会失败。

# grails - Grails 日志记录：多个记录器和附加器

> ID：14844945
> 
> 赞同：2
> 
> 时间：2013-02-13T01:22:20.470
> 
> 标签：grails, logging

我正在尝试将 Grails (2.2.0) 应用程序配置为具有特定包的日志文件，然后将控制台输出用于其他所有内容。我还想确保进入日志文件的任何内容都不会进入控制台（让它们完全分开）。通读[文档](http://grails.org/doc/2.2.x/guide/conf.html)，我仍然对如何完成这项工作感到有些困惑。有人可以帮忙举个例子来完成这个（使用 log4j DSL）吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T15:28:27.877

我得到了[这个问题](https://stackoverflow.com/questions/3995534/send-log-output-to-different-files-in-grails-1-3-2)的帮助。这是我在 Config.groovy 中得到的结果：

```
log4j = {
    appenders {
        console name: 'stdout', layout: pattern(conversionPattern: '%d{yyyy-MM-dd/HH:mm:ss.SSS} [%t] %x %-5p %c{2} - %m%n')

        rollingFile name: 'extraAppender',
                conversionPattern: '%d{yyyy-MM-dd/HH:mm:ss.SSS} [%t] %x %-5p %c{2} - %m%n',
                maxFileSize: 1024,
                file: '/tmp/logs/extra.log'
    }

    error  'org.codehaus.groovy.grails.web.servlet',        // controllers
           'org.codehaus.groovy.grails.web.pages',          // GSP
           'org.codehaus.groovy.grails.web.sitemesh',       // layouts
           'org.codehaus.groovy.grails.web.mapping.filter', // URL mapping
           'org.codehaus.groovy.grails.web.mapping',        // URL mapping
           'org.codehaus.groovy.grails.commons',            // core / classloading
           'org.codehaus.groovy.grails.plugins',            // plugins
           'org.codehaus.groovy.grails.orm.hibernate',      // hibernate integration
           'org.springframework',
           'org.hibernate',
           'net.sf.ehcache.hibernate'

    trace  additivity: false, extraAppender: 'extraLogger'
} 
```

然后在应该使用extraLogger的类中，我只是像这样去记录器：

```
def extraLogger = LoggerFactory.getLogger('extraLogger') 
```

这让我可以将更多内容记录到控制台，并将一些其他特定内容记录到另一个日志文件，而没有任何这些特定内容最终出现在控制台日志中。

# objective-c - 运行时的动态类型转换

> ID：14844947
> 
> 赞同：1
> 
> 时间：2013-02-13T01:22:25.460
> 
> 标签：objective-c

我有一个类别，它在另一个`NSManagedObjectContext`中插入一个并返回项目：`NSManagedObject``NSManagedObjectContext`

```
@implementation NSManagedObjectContext (GTEntity)

- (id)addEntity:(id)entity {
     NSManagedObject *entityObject = [self objectWithID:[entity objectID]];
     return entityObject;
}

@end 
```

我的问题是我如何返回与我拥有的相同类型的对象。我的意思是，如果我调用`[ctx addEntity:city]`with `City *city`，其中 City 是一个`NSManagedObject`子类，我想在其他上下文中获取对象，但类型相同，而不是`NSManagedObject`类型。这种类型是通用的，应该在运行时从实体中确定，例如`objc_getClass(entity)`. 我发现了一些宏，但之后出现了一些奇怪的`Expected "]"`错误`(cls *)`：

```
#define objc_dynamic_cast(obj, cls) \
([obj isKindOfClass:(Class)objc_getClass(#cls)] ? (cls *)obj : NULL) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T01:36:26.763

只需`City *city = [someManagedObjectContext addEntity:someCityObject];`假设`City`派生自`NSManagedObject`. 您的返回变量将被动态转换。虽然我不相信从中创建一个类别有什么好处，但你可以直接这样做：

```
City *city = [someManagedObjectContext objectWithID:[someCityObject objectID]]; 
```

# wordpress - Wordpress.org：更改背景时遇到问题

> ID：14844949
> 
> 赞同：0
> 
> 时间：2013-02-13T01:22:42.727
> 
> 标签：wordpress, colors, background

我有一个 wordpress 主题，在它附带的选项面板中，我可以将背景更改为各种纹理，但我想覆盖它并将其更改为白色。

在我的 CSS 中，我认为[这是](http://postimage.org/image/pvou4epz3/)（屏幕截图）背景所在的位置，但我尝试过使用它，它不断地出现相同的纹理。

有什么想法吗？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T06:04:47.247

要更改背景图像/颜色，您需要更改 css 行，其中显示：

```
html, body { background: url(.../admin/images/bg_texture.jpg) fixed repeat; height: 100%;  } 
```

url() 部分链接到作为背景纹理的图像。如果您只想要白色背景纹理，则删除 url 部分并替换为以下内容：

```
html, body { background: #fff; height: 100%; } 
```

# gcc - 如何从makefile中的变量中去除参数

> ID：14844955
> 
> 赞同：1
> 
> 时间：2013-02-13T01:23:31.380
> 
> 标签：gcc, makefile, gnu, gnu-make

下面是我在 makefile 中使用的一个变量。

```
copt = -mcpu=cortex-m3 -mthumb -g -c 
```

我想删除 -mthumb 并用其他选项替换它。有什么办法可以去掉这个选项并添加一些其他选项。我知道如何添加：示例 - copt += -O3 但不知道如何删除已经存在的选项。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T01:48:25.553

> `$(subst from,to,text)`
> 
> 对文本文本执行文本替换：每次出现的 from 都替换为 to。结果被替换为函数调用。

在你的情况下：

```
newopts = $(subst -mthumb, new_opt, $(copt)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T17:13:21.980

比`$(subst...)`使用对整个单词起作用的东西要安全一点：

```
newopts := $(filter-out -mthumb,${opts}) more opts 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-13T01:27:52.170

`sed`效果很好：

```
sed -i 's/old_word/new_word/g' makefile 
```

# c++ - C++ 数组输入和退出验证

> ID：14844958
> 
> 赞同：0
> 
> 时间：2013-02-13T01:23:51.520
> 
> 标签：c++, arrays, visual-studio, visual-c++, validation

我不确定我输入无限量商品价格的方法有什么问题。但是，最大的问题是当我按零（它需要终止的方式）时，输入不会停止并且最终输出不会显示。任何更好方法的方向将不胜感激。

```
#include <iostream>
#include <iomanip>

using namespace std;

int main()
{
const int MAX=8;
bool check=true;
double  totalPrice, discount, discountedPrice;
double *prices = new double[];

cout<<"Enter the price of your items.";
cout<<"Enter zero (0) when you have finished entering all the items.\n\n";

while(check==true)
{

for(int i=0;i<MAX;i++)
{

    cout<<"Enter the price of item "<<i<<": ";
    cin>>prices[i];

if(cin==0){

    check=false;

    break;

}
}

    if(prices==0)
    {
        check=false;
        break;

        for(int j=0; j<sizeof(prices);j++)
        {
            totalPrice+=prices[j];  
        }

        discount=totalPrice*.075;
        discountedPrice=totalPrice-discount;

        cout<<"The total price of your "<<sizeof(prices)<<"items is: $"<<totalPrice;
        cout<<"Discount of your "<<sizeof(prices)<<"is: $"<<discount;
        cout<<"\nThe discounted price of your "<<sizeof(prices)<<"is: $"<<discountedPrice;
    }
}

cin.get();
cin.get();

return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T01:34:22.587

;它应该是`if(prices[i] == 0){ check = false; break; }`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T01:35:01.787

```
 cout<<"Enter the price of item "<<i<<": ";
    int temp;
    cin>>temp;
if(temp == 0){

    check=false;

    break;

} 
```

应该解决这个问题，它不会在价格数组中输入零。

# ios - pass和webservice之间的通信

> ID：14844961
> 
> 赞同：0
> 
> 时间：2013-02-13T01:23:58.870
> 
> 标签：ios, web-services, passbook

我开始开发与 Passbook 相关的服务，但无法在 web 服务和 pass 之间建立通信。

我首先创建文件“.pkpass”，即生成密钥、添加图片和自定义 JSON。我设法创建文件并在我的 iPhone 上显示通行证。

问题是pass没有和我的webservice交互。我不得不做一些尝试来意识到 Apple 不会将 HTTP 协议仅用于生产环境 HTTPS。我的服务器已启用以接收 HTTPS 协议上的请求，但不允许我的脚本。我怀疑这是问题所在，还是需要做更多的事情。

我遵守了 Passbook Webservice Reference 中提供的所有通信协议。有人经历过类似的情况吗？

* * *

哎呀...

我在我的 iPhone 上启用了开发人员日志，发现正在发送请求，但它无效，因为我的 HTTPS 证书服务器被认为是不安全的。

有谁知道我如何购买免费的 HTTPS 证书？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T09:28:12.543

真高兴你做到了。[对于您的第二个问题 - 您可以从StartSSL](https://www.startssl.com)获得免费的 SSL 证书

# sql - 如果您包含一个未从中选择任何内容的表，它是否会导致笛卡尔连接？

> ID：14844962
> 
> 赞同：1
> 
> 时间：2013-02-13T01:24:00.873
> 
> 标签：sql, cartesian

这是否是笛卡尔连接：

```
select
dog_t.type
dog_t.breed
date_t.date
from
dog_t,
cat_t,
date_t
where
dog_t.date_key=date_t.date_key 
```

包括 cat_t 表会导致笛卡尔连接......因为它没有连接到任何东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T01:26:24.610

是的。您需要添加`cat_t.date_key=date_t.date_key`以避免笛卡尔连接。

但是您仍然有表`cat_t`和`dog_t`. 我会说你应该从每个表中联合一个单独的选择。

# cocoa - 为 Lion 的用户界面恢复功能编码 NSViewController

> ID：14844966
> 
> 赞同：8
> 
> 时间：2013-02-13T01:25:05.147
> 
> 标签：cocoa, osx-lion, appkit, resume, nsarchiving

[知道出于恢复](http://developer.apple.com/library/mac/documentation/MacOSX/Conceptual/OSX_Technology_Overview/CocoaApplicationLayer/CocoaApplicationLayer.html#//apple_ref/doc/uid/TP40001067-CH274-SW8)（用户界面保留）目的而归档`NSViewController`窗口内部的最佳实践是什么吗？我已经尝试在窗口控制器的 方法中归档它，只是发现视图控制器在 被调用时没有被取消归档。`encodeRestorableStateWithCoder:``restoreStateWithCoder:`

```
// NSWindowController subclass

-(void)encodeRestorableStateWithCoder:(NSCoder *)coder
{
    [super encodeRestorableStateWithCoder:coder];
    NSViewController* contentViewController = self.contentViewController;
    if (contentViewController) {
        [coder encodeObject:contentViewController forKey:BSContentViewControllerResumeKey];
    }
}

-(void)restoreStateWithCoder:(NSCoder *)coder
{
    [super restoreStateWithCoder:coder];
    NSViewController* contentViewController = [coder decodeObjectForKey:BSContentViewControllerResumeKey];
    if (contentViewController) {
        // somehow this never get executed since contentViewController always comes out nil
        self.contentViewController = contentViewController;
    }
} 
```

请注意，此视图控制器包含管理自己的子视图的其他视图控制器，因此需要在`NSCoder`实例中进行一些范围界定——简单地向下传递提供的`coder`对象将导致存档中的名称冲突。

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-02-21T01:07:58.423

状态恢复在上免费工作，`NSView`但`NSViewController`即使将方法实现为`NSResponder`. 我想那是因为窗口不知道可能拥有它包含的某些视图的 NSViewControllers。

在 OS X Yosemite 上，它应该可以工作，因为`NSWindow`现在对 NSViewControllers 有真正的支持，但在我的测试用例中却没有。我猜这是因为人们需要使用新的 API 来“链接” NSViewController 来添加/删除它们，而不是在旁边创建它们，然后直接将它们的视图添加到窗口中。如果您想让您的应用程序在优胜美地之前的系统上运行，则实际上需要后者。

以下是让它始终工作的方法：只需代理 和 之间的恢复 API`NSView`调用`NSViewController`。

像这样的子`NSView`类：

```
@interface GIView : NSView
@property(nonatomic, weak) GIViewController* viewController;  // Avoid retain-loops!
@end

@implementation GIView

- (void)setViewController:(GIViewController*)viewController {
  _viewController = viewController;
}

- (void)encodeRestorableStateWithCoder:(NSCoder*)coder {
  [super encodeRestorableStateWithCoder:coder];

  [_viewController encodeRestorableStateWithCoder:coder];
}

- (void)restoreStateWithCoder:(NSCoder*)coder {
  [super restoreStateWithCoder:coder];

  [_viewController restoreStateWithCoder:coder];
}

@end 
```

像这样`NSViewController`：

```
@interface GIViewController : NSViewController
@end

@implementation GIViewController

- (instancetype)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil {
  if ((self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil])) {
    self.view.viewController = self;  // This loads the view immediately as a side-effect
  }
  return self;
}

- (void)dealloc {
  self.view.viewController = nil;  // In case someone is still retaining the view
}

- (void)invalidateRestorableState {
  [self.view invalidateRestorableState];
}

@end 
```

现在您可以`-invalidateRestorableState`从`NSViewController`子类和 Cocoa 调用，认为它正在与 an 对话，`NSView`将根据需要自动调用您的子类。`-encodeRestorableStateWithCoder:``-restoreStateWithCoder:``NSViewController`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-14T08:19:29.807

我对可恢复状态的处理并不多（Jonathon Mah 是为 DL3 做的），但如果我这样做，我会尝试删除这两个方法并实现 +restorableStateKeyPaths，例如：

```
+ (NSArray *)restorableStateKeyPaths;
{
    return @[@“contentViewController.firstInterestingStateProperty”, @“contentViewController.secondInterestingStateProperty”];
} 
```

看看机器是否为我处理了这一切。

```
+ (NSArray *)restorableStateKeyPaths; 
```

> 返回一组关键路径，表示应该持久的属性的路径。框架将通过 KVO 观察这些关键路径，并自动将它们的值作为持久状态的一部分持久化，并在重新启动时恢复它们。密钥路径的值应该实现密钥归档。基本实现返回一个空数组。

# logging - 在 Python3 中根据消息日志级别修改日志消息格式

> ID：14844970
> 
> 赞同：23
> 
> 时间：2013-02-13T01:25:34.080
> 
> 标签：logging, python-3.x

我[在这里](https://stackoverflow.com/questions/1343227/can-pythons-logging-format-be-modified-depending-on-the-message-log-level)为 python 2 提出了这个问题，但是当答案不再适用于 Python 3.2.3 时，我又遇到了这个问题。

这是适用于 Python 2.7.3 的代码：

```
import logging

# Attempt to set up a Python3 logger than will print custom messages
# based on each message's logging level.
# The technique recommended for Python2 does not appear to work for
# Python3

class CustomConsoleFormatter(logging.Formatter):
    """
    Modify the way DEBUG messages are displayed.

    """
    def __init__(self, fmt="%(levelno)d: %(msg)s"):
        logging.Formatter.__init__(self, fmt=fmt)

    def format(self, record):

        # Remember the original format
        format_orig = self._fmt

        if record.levelno == logging.DEBUG:
            self._fmt = "DEBUG: %(msg)s"

        # Call the original formatter to do the grunt work
        result = logging.Formatter.format(self, record)

        # Restore the original format
        self._fmt = format_orig

        return result

# Set up a logger
my_logger = logging.getLogger("my_custom_logger")
my_logger.setLevel(logging.DEBUG)

my_formatter = CustomConsoleFormatter()

console_handler = logging.StreamHandler()
console_handler.setFormatter(my_formatter)

my_logger.addHandler(console_handler)

my_logger.debug("This is a DEBUG-level message")
my_logger.info("This is an INFO-level message") 
```

使用 Python 2.7.3 运行：

```
tcsh-16: python demo_python_2.7.3.py 
DEBUG: This is a DEBUG-level message
20: This is an INFO-level message 
```

据我所知，转换为 Python3 只需要对 CustomConsoleFormatter 稍作修改。**初始化**（）：

```
def __init__(self):
    super().__init__(fmt="%(levelno)d: %(msg)s", datefmt=None, style='%') 
```

在 Python 3.2.3 上：

```
tcsh-26: python3 demo_python_3.2.3.py
10: This is a DEBUG-level message
20: This is an INFO-level message 
```

如您所见，我用“DEBUG”替换“10”的愿望被挫败了。

我已经尝试在 Python3 源代码中进行挖掘，看起来 PercentStyle 实例化正在破坏 self._fmt 在我自己破坏它之后。

我的伐木工作很快就无法解决这个皱纹了。

谁能推荐另一种方式，或者指出我忽略了什么？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-13T17:37:40.260

经过一番挖掘，我能够修改 Python 2 解决方案以使用 Python 3。在 Python2 中，有必要临时覆盖`Formatter._fmt`. 在 Python3 中，对多种格式字符串类型的支持需要我们临时覆盖`Formatter._style._fmt`。

```
# Custom formatter
class MyFormatter(logging.Formatter):

    err_fmt  = "ERROR: %(msg)s"
    dbg_fmt  = "DBG: %(module)s: %(lineno)d: %(msg)s"
    info_fmt = "%(msg)s"

    def __init__(self):
        super().__init__(fmt="%(levelno)d: %(msg)s", datefmt=None, style='%')  

    def format(self, record):

        # Save the original format configured by the user
        # when the logger formatter was instantiated
        format_orig = self._style._fmt

        # Replace the original format with one customized by logging level
        if record.levelno == logging.DEBUG:
            self._style._fmt = MyFormatter.dbg_fmt

        elif record.levelno == logging.INFO:
            self._style._fmt = MyFormatter.info_fmt

        elif record.levelno == logging.ERROR:
            self._style._fmt = MyFormatter.err_fmt

        # Call the original formatter class to do the grunt work
        result = logging.Formatter.format(self, record)

        # Restore the original format configured by the user
        self._style._fmt = format_orig

        return result 
```

这是 Halloleo 的示例，说明如何在脚本中使用上述内容（来自[此问题的 Python2 版本](https://stackoverflow.com/questions/1343227/can-pythons-logging-format-be-modified-depending-on-the-message-log-level)）：

```
fmt = MyFormatter()
hdlr = logging.StreamHandler(sys.stdout)

hdlr.setFormatter(fmt)
logging.root.addHandler(hdlr)
logging.root.setLevel(logging.DEBUG) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2020-06-20T16:24:35.047

我更喜欢这个，因为它更短、更简单，并且不需要像 'ERROR' 这样的字符串进行硬编码。无需重置`._fmt`，因为`else:`可以处理得很好。

此外， using`"%(msg)s"`不适用于惰性日志记录！

```
class Formatter(logging.Formatter):
    def format(self, record):
        if record.levelno == logging.INFO:
            self._style._fmt = "%(message)s"
        else:
            self._style._fmt = "%(levelname)s: %(message)s"
        return super().format(record) 
```

使用示例：

```
import logging

logger = logging.getLogger()
handler = logging.StreamHandler()
handler.setFormatter(Formatter())
logger.setLevel(logging.DEBUG)
logger.addHandler(handler)

logger.debug('foo')
logger.info('bar %d', 4) 
```

```
DEBUG: foo
bar 4 
```

* * *

如果您想让 levelname 着色：

```
class Formatter(logging.Formatter):
    def format(self, record):
        if record.levelno == logging.INFO:
            self._style._fmt = "%(message)s"
        else:
            color = {
                logging.WARNING: 33,
                logging.ERROR: 31,
                logging.FATAL: 31,
                logging.DEBUG: 36
            }.get(record.levelno, 0)
            self._style._fmt = f"\033[{color}m%(levelname)s\033[0m: %(message)s"
        return super().format(record) 
```

有关颜色编号，请参见[https://en.wikipedia.org/wiki/ANSI_escape_code#3/4_bit](https://en.wikipedia.org/wiki/ANSI_escape_code#3/4_bit)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-21T20:20:55.667

交叉发布[另一个答案](https://stackoverflow.com/a/16660369/760767)。它不起作用，因为`logging.Formatter`现在依赖于格式化样式的新（3.2+，3.4）实现。这依赖于`'{'`样式格式，但可以进行调整。可以改进为更通用，并允许选择格式样式和自定义消息作为 的参数`__init__`。

```
class SpecialFormatter(logging.Formatter):
    FORMATS = {logging.DEBUG : logging._STYLES['{']("{module} DEBUG: {lineno}: {message}"),
           logging.ERROR : logging._STYLES['{']("{module} ERROR: {message}"),
           logging.INFO : logging._STYLES['{']("{module}: {message}"),
           'DEFAULT' : logging._STYLES['{']("{module}: {message}")}

    def format(self, record):
        # Ugly. Should be better
        self._style = self.FORMATS.get(record.levelno, self.FORMATS['DEFAULT'])
        return logging.Formatter.format(self, record)

hdlr = logging.StreamHandler(sys.stderr)
hdlr.setFormatter(SpecialFormatter())
logging.root.addHandler(hdlr)
logging.root.setLevel(logging.INFO) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-04-14T15:53:23.323

我对这个问题很晚了，但这是我的解决方案。它遵循原始的 python 2 语法风格。通常，由于添加了样式支持，您应该使用三个新类。它们是：PercentStyle、StrFormatStyle 和 StringTemplateStyle。

```
from logging import Formatter, PercentStyle, ERROR, WARNING, INFO, DEBUG
class SrvLogFormat(Formatter):
    def __init__(self):
        super().__init__(fmt=env.fmt_log, datefmt=env.fmt_log_date)

    def format(self, record):
        original_style = self._style

        if record.levelno == DEBUG:
            self._style = PercentStyle(env.fmt_dflt)
        if record.levelno == INFO:
            self._style = PercentStyle(env.fmt_dflt)
        if record.levelno == WARNING:
            self._style = PercentStyle(env.fmt_dflt)
        if record.levelno == ERROR:
            self._style = PercentStyle(env.fmt_err)

        result = Formatter.format(self, record)
        self._style = original_style
        return result 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-02-18T02:31:51.937

由于一些奇怪的原因，@JS 和@Evpok 的解决方案引发了一些错误（我使用的是 Python 3.7，这可能就是原因）。

这个解决方案对我有用：

```
class CustomFormatter(logging.Formatter):
    """Logging Formatter to add colors and count warning / errors"""

    FORMATS = {
        logging.ERROR: "ERROR: %(msg)s",
        logging.WARNING: "WARNING: %(msg)s",
        logging.DEBUG: "DBG: %(module)s: %(lineno)d: %(msg)s",
        "DEFAULT": "%(msg)s",
    }

    def format(self, record):
        log_fmt = self.FORMATS.get(record.levelno, self.FORMATS['DEFAULT'])
        formatter = logging.Formatter(log_fmt)
        return formatter.format(record)

logger = logging.getLogger(__name__)
logger.setLevel(logging.DEBUG)
logger_ch = logging.StreamHandler()
logger_ch.setLevel(logging.INFO)
logger_ch.setFormatter(CustomFormatter())
logger.addHandler(logger_ch) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-02-19T14:55:48.947

```
import logging
from logging import DEBUG, INFO, WARN, ERROR

class LogFormatter(logging.Formatter):

    formats = {
        DEBUG: "DEBUG: %(msg)s",
        INFO:  "%(msg)s",
        WARN:  "WARNING: %(msg)s",
        ERROR: "ERROR: %(msg)s"
    }

    def format(self, record):
        return LogFormatter.formats.get(
            record.levelno, self._fmt) % record.__dict__ 
```

在logging/__init__.py的源码中，PercentStyle的方法`_format`很简单

```
 def _format(self, record):
        return self._fmt % record.__dict__ 
```

因此，使用`%`运算符也可以。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-06-27T18:56:10.173

这个 Python3 问题和它的 Python2 问题都有重大缺陷的答案：

*   当级别不打算离散时，通过相等比较或字典查找来选择级别；它们存在于整数行上并且应该是可订购的。
*   当格式化程序实例发生变异时，没有保护`_fmt`成员的锁，因此这是线程不安全的。
*   该成员的修改至少应该用`try`/包围`finally`。

*真的，该成员根本*不应该被修改。解决此问题的一种简单方法是实例化一个或多个不可变代理格式化程序并根据需要推迟它们。此外，通过二等分而不是相等来选择它们，以支持任意级别：

```
import logging
from bisect import bisect
from logging import getLogger, Formatter, LogRecord, StreamHandler
from typing import Dict

class LevelFormatter(Formatter):
    def __init__(self, formats: Dict[int, str], **kwargs):
        super().__init__()

        if 'fmt' in kwargs:
            raise ValueError(
                'Format string must be passed to level-surrogate formatters, '
                'not this one'
            )

        self.formats = sorted(
            (level, Formatter(fmt, **kwargs)) for level, fmt in formats.items()
        )

    def format(self, record: LogRecord) -> str:
        idx = bisect(self.formats, (record.levelno,), hi=len(self.formats)-1)
        level, formatter = self.formats[idx]
        return formatter.format(record)

def test():
    handler = StreamHandler()
    handler.setFormatter(
        LevelFormatter(
            {
                logging.INFO: '%(levelname)s (info): %(message)s',
                logging.WARNING: '%(levelname)s: (warning): %(message)s',
            }
        )
    )
    handler.setLevel(logging.DEBUG)

    logger = getLogger('test_logger')
    logger.setLevel(logging.DEBUG)
    logger.addHandler(handler)

    logger.debug('mdebug')
    logger.info('minfo')
    logger.log(logging.INFO + 1, 'higher minfo')
    logger.warning('mwarning')
    logger.error('merror')
    logger.critical('mcritical')

test() 
```

输出

```
DEBUG (info): mdebug
INFO (info): minfo
Level 21: (warning): higher minfo
WARNING: (warning): mwarning
ERROR: (warning): merror
CRITICAL: (warning): mcritical 
```

# c++ - 在 c++ 中，如何在将八进制数转换为小数时确定何时退出循环？

> ID：14844978
> 
> 赞同：0
> 
> 时间：2013-02-13T01:26:26.040
> 
> 标签：c++, binary, octal

请记住，我对 C++ 几乎是全新的，这只是我必须为我的课程做的一个程序。我想我明白我会怎么做。我只是不确定将什么作为我的 while 循环的控制条件。我应该能够转换给定的任何八进制数，那么如何知道我何时处于第一个数字并且应该停止？我正在使用增加的 %10 单位（又名 %10、%100、%1000）将数字从右向左移动，但我怎么知道什么时候应该停止这样做？就像数字 112 一样，我需要执行 %10、%100 和 %100，但不能超过。

```
#include <iostream>
#include <cmath>
using namespace std;

int main ()
{
  cout <<"Please enter the octal number to be converted: " <<
  int octal;
  cin >> octal;

   int remainder = 0;
   int modular = 10;

  int conversionToDecimal = 0; 
  while(modular < ***********)
  remainder = octal%modular;
  if (remainder < 10)
  {
   conversionToDecimal = conversionToDecimal + (remainder *(int)pow(8.0,count));
    count = 0;
    modular = modular*10;
  }
  else
  {
    remainder = remainder/10;
    count++;
  } 
```

显然程序并不完整，这只是我发现问题时得到的代码。我把*******放在我需要代码帮助的地方。非常感谢！简而言之，我应该如何控制我的循环，这样我就不会离开八进制数的前面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T01:32:26.807

您可以使用与将数字转换为十进制数字字符串相同的方法：每个索引都有一个数字的数组。对于每次迭代，您取 10 的模，并存储该数字，然后除以 10。当数字为零时（在循环结束时），您就完成了。

然后一次从数组中取出一个数字，并将您的“总数”乘以 8，添加当前数字。当你没有更多的数字时，你就完成了。

我将留给你编写实际代码来执行此操作 - 毕竟，你是学习编程的人 - 我已经这样做了 30 多年。

# c# - 在 ASP.NET MVC 3 中生成独立于控制器的 URL

> ID：14844980
> 
> 赞同：5
> 
> 时间：2013-02-13T01:26:49.387
> 
> 标签：c#, asp.net-mvc-3, urlhelper

我有一个 mvc 3 应用程序，它有一个后台线程检查某些数据库项的状态。当它发现一个过期的项目时，它会发送一封电子邮件。在电子邮件中，我想包含要调用以查看状态的操作的 url。如果这是从控制器完成的，我将使用 UrlHelper，例如：

```
string body_url = "For more details see: " + Url.Action("Details", "MyOrder", new { OrderId = order.OrderId }, Constants.HttpProtocol); 
```

但是，我不在控制器中，也不是从控制器调用我的方法，它是在应用程序启动时启动的。有没有办法生成一个有效的 UrlHelper，或者，如果没有，在独立于控制器时生成一个有效的 URL 而不诉诸硬编码路径？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T03:43:53.897

这是理论上的......参考[msdn](http://msdn.microsoft.com/en-us/library/system.web.mvc.urlhelper%28v=vs.108%29.aspx)等等......在后台线程上让事情变得有趣[:)](https://stackoverflow.com/questions/2031995/call-urlhelper-in-models-in-asp-net-mvc)

```
var request = new HttpRequest("/", "http://example.com", ""); //hopefully you can hardcode this or pull from config?
var response = new HttpResponse(new StringWriter());
var httpContext = new HttpContext(request, response);

var httpContextBase = new HttpContextWrapper(httpContext);
var routeData = new RouteData();
var requestContext = new RequestContext(httpContextBase, routeData);

var urlHelper = new UrlHelper(requestContext);
var url = urlHelper.Action("ActionName", "ControllerName"); 
```

# php - 安装/启用 PDO 或 pdo_mysql

> ID：14844982
> 
> 赞同：-3
> 
> 时间：2013-02-13T01:27:09.127
> 
> 标签：php, pdo

我正在开发我真的需要安装 pdo 或 pdo_mysql

我正在使用 Ubuntu/Mint 并使用控制台命令安装了所有东西 sudo apt-get install apache2 等等

我尝试使用 pecl 安装它，但没有任何成功。在最后一行给出了一个错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T01:30:22.417

安装 php5-mysql 包应该带有 PDO 扩展[（参考）](https://askubuntu.com/questions/50236/make-does-not-run-with-sudo-pecl-install-pdo-why/85416#85416)

# java - 是否有任何从 XSLX 文件转换为 CSV 的库？

> ID：14844996
> 
> 赞同：1
> 
> 时间：2013-02-13T01:29:15.170
> 
> 标签：java, apache, excel, csv, apache-poi

有没有将 XSLX 文件转换为 CSV 的库？

使用 apache poi 生成的 XSLX 文件

如果没有，有人为此开发了有用的方法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T01:34:17.570

Apache POI 是很好的 API。我个人使用过，效果很好。

快速互联网搜索给出以下可能对您很方便的程序：

[https://gist.github.com/Munawwar/924389](https://gist.github.com/Munawwar/924389)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T01:33:38.353

您已经在问题中提到了答案。只需用于`Apache Poi`读取`xslx`文件并将其导出为`csv`

[您可以在此处](https://gist.github.com/tranminhan/991207)找到示例代码