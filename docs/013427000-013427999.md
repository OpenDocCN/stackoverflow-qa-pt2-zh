# StackOverflow 问答 13427000-13427999

# facebook-graph-api - 如何获取 Facebook 帖子的分享数？有可能吗？

> ID：13427002
> 
> 赞同：1
> 
> 时间：2012-11-17T02:12:53.607
> 
> 标签：facebook-graph-api

我正在尝试获取用户帖子或粉丝页面帖子的共享计数...

我试过类似的东西：

graph.facebook.com/[PAGE_ID]_[POST_ID]/?access_token=xxxxxxx

但它不返回共享计数...

还有另一种方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T05:26:29.667

我使用相同的方法来检索我的应用程序中的共享计数。仅当帖子已被共享时，才会返回共享计数。如果帖子尚未共享，则不返回共享计数。

如果您只想检索共享计数而不是整个帖子对象，请使用`https://graph.facebook.com/[PAGE_ID]_[POST_ID]?fields=shares`

Facebook API 返回以下内容：

```
"shares": {
    "count": 252
} 
```

# jquery - Jquery .val() 更改 dom 中的值，但不更改网页上的值

> ID：13427015
> 
> 赞同：0
> 
> 时间：2012-11-17T02:14:29.343
> 
> 标签：jquery, dom

我有一段调试代码 MyPartialContent.ascx: (从 jquery ajax 调用返回并使用 $("#container").val(html); 插入 DOM；其中 html 是下面的代码块

```
 <input type"text" id="mydebugtextbox" value="world"/> -- shows a text box on web page with "world" 
```

* * *

```
$("#mydebugtextbox").val("hello"); 
-- Should set value to "hello";

alert($("#mydebugtextbox").val()); 
-- should alert "hello" and it does but 
-- the textbox on the page still shows "world" 
```

这仅在最初加载页面时发生。如果我按 f5 或刷新页面，那么一切都会按预期工作。

我搞不清楚了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T02:16:31.450

## *[jsBin 演示](http://jsbin.com/azifav/1/edit)*

只需更改
`mydegugtextbox`为

`mydebugtextbox`

如果您的语法正确，请确保将您的代码包装到一个`ready`函数中：

```
$(function(){ // DOM is ready

     $("#mydebugtextbox").val("hello");
     alert($("#mydebugtextbox").val()); 

}); 
```

确保您的元素已映射并准备好进行操作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T02:20:46.447

您确定整个 DOM 页面中只有 1 个具有该 ID 的**输入框吗？**如果您有 2 个输入框，则只会更新第一个输入框

请参阅此示例， [http://jsfiddle.net/fedmich/hMqSq/](http://jsfiddle.net/fedmich/hMqSq/)

* * *

上一个答案...

假设没有拼写错误，并且您将代码放在页面加载中

```
$(function() {  
//code here
}); 
```

你确定你没有自动完成输入框的插件吗？你使用的是什么浏览器？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T02:16:49.900

它不起作用，因为您`debug`在第一个选择器中拼写错误：

```
$("#mydegugtextbox").val("hello");
        ^ 
```

一旦你修正了那个错字，它就可以正常工作了：http: [//jsfiddle.net/NMFEs/1/](http://jsfiddle.net/NMFEs/1/)

# mysql - MySQL 替换

> ID：13427017
> 
> 赞同：0
> 
> 时间：2012-11-17T02:14:45.107
> 
> 标签：mysql, regex, string

我有一个 MySQL 表，其中包含一个名为“name”的 VARCHAR 字段和几千行。每行的格式如下：

'一些文本 <1000 - 2000>'

我想删除 '<1000 - 2000>' 部分，只留下 'Hello world' 文本。每行的文本和数字都不同。如何通过查询来完成？我假设某种正则表达式。

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T02:19:41.657

使用`INSTR`and`REVERSE`获取`<`字符的位置，然后按索引将其删除：

```
UPDATE `table` SET `name` = SUBSTRING( `name`, 0, INSTR( REVERSE( `name` ), `<` ) ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T02:20:05.797

看看这个，它可能是你想要的[https://launchpad.net/mysql-udf-regexp](https://launchpad.net/mysql-udf-regexp)。

问候， 海华沙

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T03:41:14.540

试试这个：

```
set @txt='Some text <1000 - 2000>';

select left(@txt,locate('<',@txt)-1) as text 
```

# [SQL 小提琴演示](http://www.sqlfiddle.com/#!2/d41d8/3872)

# php - 数据不会从 PDO 提交

> ID：13427024
> 
> 赞同：0
> 
> 时间：2012-11-17T02:16:35.563
> 
> 标签：php

我对 PHP 非常陌生，并尝试使用 PDO 而不是 mysqli。但是，当我单击提交时，我无法将名字和姓氏的值输入 sql 数据库。我错过了什么？

```
<!DOCTYPE HTML>

<?php 

$server = 'localhost';
$user = 'xxxx';
$pass = 'xxxxx';
$db = 'xxxxxx';

try {
    $con = new PDO("mysql:host=$server;dbname=$db",$user,$pass);
}
catch(PDOException $e) {
    echo $e->getMessage();
}

?>

<html>
<form name="Contact form" action="<?php echo $_SERVER['PHP_SELF']; ?>" method="POST"> 
First name: <input type="text" name="firstname"><br />
Last name: <input type="text" name="lastname"><br />
<input type="submit" value="Submit this!" name="submit">
</form>
</html>

<?php 

if(isset($_POST['submit'])) {

$sql = $con->query("INSERT INTO names (fname,lname) VALUES (:$_POST[firstname],:$_POST[lastname])");

}

?>

<?php $con = null; ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T02:25:57.857

问题出在这一行：

```
$sql = $con->query("INSERT INTO names (fname,lname) VALUES (:$_POST[firstname],:$_POST[lastname])"); 
```

冒号不应该在那里，插入的值应该被引用。实现这一目标的最简单（也是最安全和更快）的方法是使用准备好的查询：

```
$statement = $con->prepare(
    'INSERT INTO names (fname,lname) 
     VALUES (:firstname,:lastname)');
$result = $statement->exec(array(
    'firstname' => $_POST['firstname'], 
    'lastname' => $_POST['lastname'])); 
```

另请阅读有关 SQL 注入的更多信息。您的原始代码存在安全漏洞。见[http://php.net/manual/en/security.database.sql-injection.php](http://php.net/manual/en/security.database.sql-injection.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T02:26:25.977

您应该将其拆分`->query()`为 a[`->prepare`](http://php.net/pdostatement.prepare)并[`->execute`](http://php.net/pdostatement.execute)调用以实际使用准备好的语句/绑定参数：

```
 $st = $con->prepare("INSERT INTO names (fname,lname) VALUES (:first, :last)");
 $result = $st->execute(array("first"=>$_POST["firstname"], "last"=>$_POST["lastname"])); 
```

如果要使用，`->query()`则需要[`$con->quote()`](http://php.net/pdostatement.quote)在将其连接到查询之前对各种字符串变量使用。

# yeoman - 为什么我的 yeoman 构建失败？

> ID：13427032
> 
> 赞同：0
> 
> 时间：2012-11-17T02:17:54.687
> 
> 标签：yeoman

这是我构建的最后一部分：

```
Generating the cache manifest
  - Command: phantomjs /Users/ablair/tmp/yeo2/yeoman/cli/lib/support/confess.js http://localhost:3501 appcache /Users/ablair/tmp/yeo2/yeoman/cli/lib/support/confess.json

Writing to manifest.appcache...
undefined:0 ReferenceError: Can't find variable: require 
```

完整日志： http: [//pastebin.com/qECNNGSX](http://pastebin.com/qECNNGSX)

结果是服务器显然正在运行，我可以访问 localhost url，但 javascript 没有合并或缩小。我正在使用全新安装。无论我是否将任何我自己的 JavaScript 添加到样板初始化代码中，都会发生这种情况。我选择使用 Twitter Bootstrap 但不是插件或其他任何东西，当我执行 yeoman init 时仅供参考。

Compass 版本：Compass 0.13.alpha.0 (Markab) 节点版本：v0.8.14 Yeoman 版本：yeoman v0.9.5（我已经尝试了默认并从github克隆）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T03:15:48.430

您很可能拥有过时的 PhantomJS 版本。

转到（[PhantomJS - Scriptable Headless Browser](http://phantomjs.org)）并下载最新版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T06:28:03.233

原来我的路径中有一个旧的 Sencha Touch SDK，其中包含 phantomjs 的文件（如果不是二进制文件）。该版本优先（由于我的 ~/.bash_profile 中路径条目的顺序）。我刚刚从我的路径中删除了旧的 SDK，它开始工作了。我通过运行证明了这就是正在发生的事情`which phantomjs`——它打印出不相关目录中的版本，而不是 /usr/local/bin 中的版本。

# ios - 如何将 rightBarButtonItem 传递给 TabBarController 中的所有 ViewController？

> ID：13427040
> 
> 赞同：2
> 
> 时间：2012-11-17T02:19:48.670
> 
> 标签：ios, uinavigationcontroller, uitabbarcontroller, appdelegate, rightbarbuttonitem

我已经构建了一个具有大约 12 个视图的应用程序。在 NavigationBar 的右上角应该有 UIBarButton，它对整个应用程序具有完全相同的功能。它显示了一个带有徽章的自定义按钮。

我通过 TableViewControllers 向下传递 rightBarButtonItem 并且它运行良好。但是当我点击 TabBar 时，自定义按钮有时会消失。可能我的解决方案很糟糕。我试图从 AppDelegate 设置自定义按钮，但我无法弄清楚如何在与 TabBar 相关的每个 ViewController 上到达 rightBarButtonItem。

我试过这样的事情，但它总是在日志中显示 nil 。

```
- (void)tabBarController:(UITabBarController *)tabBarController didSelectViewController:(UIViewController *)viewController
{

    NSLog(@"item %@", self.tabController.selectedViewController.navigationItem.rightBarButtonItem);
    NSLog(@"item %@", self.tabController.selectedViewController.navigationItem.rightBarButtonItems);
    NSLog(@"item %@", self.tabController.selectedViewController.navigationController.navigationItem.rightBarButtonItems);
    //self.tabController.selectedViewController.navigationItem.rightBarButtonItem =

    [self switchTabBarImage:self.tabController.selectedIndex];
} 
```

实现“全局”rightBarButtonItem 之类的最佳方法是什么？AppDelegate 是适合它的地方吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T06:53:09.723

请注意，我在下面的原始答案需要让标签栏控制器创建一个标签栏按钮，该按钮由标签栏控制器中包含的所有控制器的所有导航栏使用，仅当您创建一个简单的`UIBarButtonItem`. 更好的（如果您使用`UIBarButtonItem`带有图像等的自定义项，则至关重要）是创建一个具有您想要的行为的新栏按钮项子类，然后将其添加到所有控制器的导航栏。我对您在 Custom rightBarButtonItem 的后续问题的回答 [消失](https://stackoverflow.com/questions/14970948/custom-rightbarbuttonitem-disappearing/14980949#14980949)了一个示例实现。

出于历史目的，我将在下面保留我的原始答案。

* * *

就个人而言，我不认为应用程序委托是正确的地方（尽管在实践中，这可能无关紧要）。我个人会将其子类化并将其`UITabBarController`放在那里，然后让子视图从那里抓取它。例如，子类的接口`UITabBarController`可能如下所示：

```
//  MyTabBarController.h

@interface MyTabBarController : UITabBarController

@property (nonatomic, strong) UIBarButtonItem *sharedRightButton;

@end 
```

使用创建按钮的实现（并具有在按下该按钮时调用的方法）：

```
// MyTabBarController.m

@implementation MyTabBarController

- (void)viewDidLoad
{
    [super viewDidLoad];

    // you'll do your own, fancy button instead of this simple bordered button

    self.sharedRightButton = [[UIBarButtonItem alloc] initWithTitle:@"Test"
                                                              style:UIBarButtonItemStyleBordered 
                                                             target:self
                                                             action:@selector(clickedTest:)];
}

// you'll have your own action method here

- (void)clickedTest:(id)sender
{
    NSLog(@"%s", __FUNCTION__);
}

@end 
```

最后，标签栏控制器呈现的每个视图控制器都可以执行以下操作：

```
@implementation FirstTabViewController

- (void)viewDidLoad
{
    [super viewDidLoad];

    MyTabBarController *tabBarController = (MyTabBarController *)self.tabBarController;

    self.navigationItem.rightBarButtonItem = tabBarController.sharedRightButton;
}

@end 
```

# arrays - 将尾随换行符添加到所有 bash 数组项，但最后一个

> ID：13427043
> 
> 赞同：0
> 
> 时间：2012-11-17T02:20:29.120
> 
> 标签：arrays, bash

我有一个名为“array”的数组，其中包含五个动物名称。我想在每个数组项期望最后一个之后有两个换行符（\n\n）。下面的脚本正是我想要的：

```
[user@T60 ~]$ cat scriptfile.sh 
#!/usr/bin/env bash

array=( cat dog elefant zebra hippo )

number_of_items_in_array=${#array[@]}

penultimate_array_item=$(( $number_of_items_in_array - 2 ))

ultimate_array_item=$(( $number_of_items_in_array - 1 ))

for i in $(seq 0 $penultimate_array_item); do
    printf '%s\n' "${array[$i]/%/$'\n\n'}"
done

for i in $ultimate_array_item; do
    printf '%s\n' "${array[$i]}"
done

[user@T60 ~]$ ./scriptfile.sh 
cat

dog

elefant

zebra

hippo
[user@T60 ~]$ 
```

但是，我觉得它有点笨拙。有没有更优雅、更简约的解决方案？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-17T02:25:17.670

你可以写：

```
array=( cat dog elefant zebra hippo )
echo "$(printf '%s\n\n\n' "${array[@]}")" 
```

笔记：

*   如果您提供`printf`的参数多于格式字符串所指的参数，那么它只会一遍又一遍地重新处理格式字符串，直到用完所有参数。所以上面`printf`打印了每个数组元素，后跟两个换行符。
*   命令替换,`"$(...)"`去掉所有尾随的换行符，即使它保留其他空白不变。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T07:27:43.617

将@glenn jackman 关于在除第一个元素之外的每个元素*之前打印两个换行符的见解与 bash 的数组切片功能相结合：*

```
printf "%s\n" "${array[0]}"
printf "\n\n%s\n" "${array[@]:1}" 
```

（请注意，如果数组只有一个元素，这将无法正常工作。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-17T03:05:24.617

您的问题措辞不同：“我想在除*第*一个元素之外的每个元素*之前*打印两个换行符。”

 *```
prefix=""
for element in "${array[@]}"; do
    printf "%s%s\n" "$prefix" "$element"
    prefix=$'\n\n'
done 
```*

# sql - SQL删除具有相同值集的行

> ID：13427044
> 
> 赞同：4
> 
> 时间：2012-11-17T02:20:35.630
> 
> 标签：sql, oracle

我有一张这样的桌子：

```
ID, ItemsID
1   2                                                                       
1   3     
1   4   
2   3  
2   4  
2   2 
```

我想删除像`ID=2` 因为与我的情况`2,3,4`相同的元组`3,4,2` 。

如何使用 SQL 做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T02:47:45.727

抱歉，我没有及时看到 Oracle 标签。但是，我将保留 MySQL 解决方案以供参考。[显然](https://stackoverflow.com/questions/1120706/is-there-an-oracle-sql-query-that-aggregates-multiple-rows-into-one-row)`GROUP_CONCAT()`在某些 Oracle 版本中有类似的东西。

* * *

它可能不是最优雅的解决方案，但这可以完成工作：

```
DELETE FROM t WHERE ID IN (
  SELECT ID
  FROM (SELECT ID, GROUP_CONCAT(ItemsID ORDER BY ItemsID) AS tuple FROM t GROUP BY ID) AS tuples
  WHERE EXISTS (
    SELECT TRUE
    FROM (SELECT ID, GROUP_CONCAT(ItemsID ORDER BY ItemsID) AS tuple FROM t GROUP BY ID) tuples2
    WHERE tuples2.tuple = tuples.tuple
    AND tuples2.ID < tuples.ID
  )
) 
```

[SQLfiddle](http://sqlfiddle.com/#!2/67657/2)

您可能需要调整[group_concat_max_len](http://dev.mysql.com/doc/refman/5.5/en/server-system-variables.html#sysvar_group_concat_max_len)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T23:11:07.027

另一种方法。Oracle 10gR1 或更高版本。在此示例中`ItemsID`，s 1、2、6 具有相同的一组值，`ID`3 具有另一个值，4 和 5 具有另一个值。因此，我们将删除`ID`s 2、6 和 5，因为它们似乎是重复的，通过`ItemsID`将特定`ID`组的每组元素表示为嵌套表并使用`multiset except`运算符确定组中的元素是否相同：

```
-- set-up
SQL> create table tb_table(
  2    id number,
  3    itemsid number);

Table created

SQL> insert into tb_table(id, itemsid)
  2    select 1, 2 from dual union all
  3    select 1, 3 from dual union all
  4    select 1, 4 from dual union all
  5    select 2, 4 from dual union all
  6    select 2, 3 from dual union all
  7    select 2, 2 from dual union all
  8    select 3, 2 from dual union all
  9    select 3, 3 from dual union all
 10    select 3, 6 from dual union all
 11    select 3, 4 from dual union all
 12    select 4, 1 from dual union all
 13    select 4, 2 from dual union all
 14    select 4, 3 from dual union all
 15    select 5, 1 from dual union all
 16    select 5, 2 from dual union all
 17    select 5, 3 from dual union all
 18    select 6, 2 from dual union all
 19    select 6, 4 from dual union all
 20    select 6, 3 from dual;

19 rows inserted

SQL> commit;

Commit complete

SQL> create or replace type t_numbers as table of number;
  2  /

Type created

-- contents of the table
SQL> select *
  2    from tb_table;

        ID    ITEMSID
---------- ----------
         1          2
         1          3
         1          4
         2          4
         2          3
         2          2
         3          2
         3          3
         3          6
         3          4
         4          1
         4          2
         4          3
         5          1
         5          2
         5          3
         6          2
         6          4
         6          3

19 rows selected

SQL> delete from tb_table
  2   where id in (with DataGroups as(
  3                  select id
  4                       , grp
  5                       , (select count(*) from table(grp)) cnt
  6                    from (select id
  7                               , cast(collect(itemsid) as t_numbers) grp
  8                           from tb_table
  9                          group by id
 10                          )
 11                   )
 12                   select distinct id2
 13                     from ( select dg1.id as id1
 14                                 , dg2.id as id2
 15                                 , (dg1.grp multiset except dg2.grp) res
 16                                 , dg1.cnt
 17                             from DataGroups Dg1
 18                            cross join DataGroups Dg2
 19                            where dg1.cnt = dg2.cnt
 20                            order by dg1.id
 21                           ) t
 22                    where res is empty
 23                      and id2 > id1
 24                   )
 25  ;

9 rows deleted

 SQL> select *
  2    from tb_table;

        ID    ITEMSID
---------- ----------
         1          2
         1          3
         1          4
         3          2
         3          3
         3          6
         3          4
         4          1
         4          2
         4          3

10 rows selected 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T12:15:29.073

这是我能想到的最好的方法，但不知何故，我觉得必须有一个更简单的解决方案：

```
delete from items
where id in (
  select id 
  from (
    with counts as (
       select id, 
              count(*) as cnt
       from items
       group by id
    )
    select c1.id, row_number() over (order by c1.id) as rn
    from counts c1
      join counts c2 
        on c1.id <> c2.id and c1.cnt = c2.cnt
    and not exists (select i1.itemsid
                    from items i1
                    where i1.id = c1.id
                    minus 
                    select i2.itemsid
                    from items i2
                    where i2.id = c2.id)
  ) t
  where rn <> 1
); 
```

它适用于任意数量的`itemsid`值。

结合窗口定义中的`rn <> 1`升序排序将保留表中的最小 id（在您的情况下为`1`）。如果要保留最高的 ID 值，则需要将排序顺序更改为`over (order by c1.id desc)`

# java - 带有 Q&A 序列化的多项选择测试 GUI

> ID：13427048
> 
> 赞同：0
> 
> 时间：2012-11-17T02:20:59.203
> 
> 标签：java, swing, user-interface, persistence

我正在为学校的 Java 编程项目工作。我需要设计一个 GUI 来接收问题和答案并将它们存储在一个文件中。它应该能够包含无限数量的问题。我们已经介绍了二进制 I/O。

如何将他们提供的输入写入文件？我将如何让他们从这个 GUI 添加多个问题？

```
package multiplechoice;
import java.awt.*;
import javax.swing.*;

public class MultipleChoice extends JFrame {
     public MultipleChoice() {
   /*
    * Setting Layout
    */
    setLayout(new GridLayout(10,10));

    /*
     * First Question
     */

     add(new JLabel("What is the category of the question?: "));
     JTextField category = new JTextField();
     add(category);

     add(new JLabel("Please enter the question you wish to ask: "));
     JTextField question = new JTextField();
     add(question);

     add(new JLabel("Please enter the correct answer: "));
     JTextField correctAnswer = new JTextField();
     add(correctAnswer);

     add(new JLabel("Please enter a reccomended answer to display: "));
     JTextField reccomendedAnswer = new JTextField(); 
     add(reccomendedAnswer);

     add(new JLabel("Please enter a choice for multiple choice option "
             + "A"));
     JTextField A = new JTextField();
     add(A);

     add(new JLabel("Please enter a choice for multiple choice option "
             + "B"));
     JTextField B = new JTextField();
     add(B);

     add(new JLabel("Please enter a choice for multiple choice option "
             + "C"));
     JTextField C = new JTextField();
     add(C);

     add(new JLabel("Please enter a choice for multiple choice option "
             + "D"));
     JTextField D = new JTextField();
     add(D);

     add(new JButton("Compile Questions"));
     add(new JButton("Next Question"));

 }

public static void main(String[] args) {
    /*
     * Creating JFrame to contain questions
     */
    FinalProject frame = new FinalProject();
   // FileOutputStream output = new FileOutputStream("Questions.dat");

    JPanel panel = new JPanel();

 //   button.setLayout();
 //   frame.add(panel);

    panel.setSize(100,100);

   // button.setPreferredSize(new Dimension(100,100)); 
    frame.setTitle("FinalProject");
    frame.setSize(600, 400);
    frame.setLocationRelativeTo(null); // Center the frame
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setVisible(true);
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T02:31:32.780

### 第一的：

基本上有两种方法可以在 java 中写入文件。

1.  `ObjectOutputStream(FileOutputStream("blah"))` [API](http://docs.oracle.com/javase/6/docs/api/java/io/ObjectOutputStream.html)
2.  `PrintWriter("blah")` [API](http://docs.oracle.com/javase/6/docs/api/java/io/PrintWriter.html)

### 第二：

> 三个或更多；使用一个for。

这是我在阅读`JTextField A = new JTextField();`和阅读时想到的`JTextField B = new JTextField();`

# c++ - 如何使用布尔值来防止在一个类中加载两次

> ID：13427051
> 
> 赞同：3
> 
> 时间：2012-11-17T02:21:35.507
> 
> 标签：c++, stl

我有一个类，我想使用一个`preLoad`布尔值来防止它在我的循环中被加载两次。

我这样做：

```
Sprite::Sprite(std::string& imagefile)
{
 if(!preload){
    if(!texture.loadFromFile(imagefile)){
        exit(2);
    }

    sprite = sf::Sprite(texture);
    width = sprite.getLocalBounds().width;
    height = sprite.getLocalBounds().height;
    preload = true;
 }
} 
```

问题是，`preload`似乎开始`true`而不是`false`。变量在类中设置如下：

```
private:
bool preload; 
```

但是，我需要将它设置为`false`first 但它不允许我`false`在标题中为其分配 a 。我该怎么做才能将其设置为`false`最初？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T02:24:20.243

使用静态布尔并将其设置在 cpp 文件中。

```
private:
    static bool preload; 
```

在 .cpp 文件中

```
//file declarations
bool Sprite::preload = false;

//class functions below... 
```

static 关键字将使所有对象共享同一个变量，允许您在程序的整个生命周期中只调用一次函数。

# php - 表单提交后返回按钮？

> ID：13427055
> 
> 赞同：2
> 
> 时间：2012-11-17T02:22:23.873
> 
> 标签：php, javascript, jquery, html

我到处找，什么也没找到。我不确定是否可能，但是在以 html 发布表单后，我需要一个后退按钮。这是一个酒店搜索，客户端不希望将参数设置为 GET。有谁知道我如何在 html、php、javascript 或 jquery 中完成此操作？提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T02:27:54.337

最安全的是php，

`<a href="<?php echo $_SERVER['HTTP_REFERER'];?>">back</a>`

JavaScript 可以被禁用一次 :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T02:24:54.327

只需使按钮将窗口的位置更改为窗体的位置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-17T02:25:12.693

你应该`$_SERVER['HTTP_REFERER']`在你的页面中使用 : ，或者创建一个会话。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-17T02:30:23.817

你试过这个吗？

它会将您带回到之前加载的网页。

```
<A HREF="javascript:javascript:history.go(-1)">Back</A> 
```

# jquery - jScrollpane jquery插件减少垂直侧滚动条的滚动区域

> ID：13427059
> 
> 赞同：1
> 
> 时间：2012-11-17T02:23:08.193
> 
> 标签：jquery, scrollbar, jscrollpane

我通过来自 Tean 的 HTML5Player 使用 jScrollPane。

这是我的问题：

当我向播放列表项元素添加边框（3px 纯黑色）（这些是 ul 中的 li）时，JScrollpane 可以正常工作，但它会缩短动态生成的垂直滚动条，

这样即使它正确滚动了内容，它也会将滚动条区域缩短大约一半的大小，并且滚动条的底部变为红色。

我通过指定黑色或透明来修复红色部分，但看起来滚动条只下降了一半，但内容滚动正确。

我无法覆盖 css 并定义特定的像素量（我做到了，但它没有解决问题。）

所以这意味着该插件正在征用我的努力并动态生成高度，现在由于我添加了边框而出现错误。所以看起来它在计算滚动条区域的高度时并没有添加边框量。

任何帮助将不胜感激，因为这是一个相当令人困惑的问题。

# php - 使用 MySQL 服务器作为“缓存”

> ID：13427061
> 
> 赞同：2
> 
> 时间：2012-11-17T02:23:15.980
> 
> 标签：php, mysql, caching, ram

我知道这是一个奇怪的问题，但我有两台服务器，一台是 vps，另一台是 mysql 主机。现在我的问题是我想尝试降低 vps 的负载，因为它是启动 128mb vps。

一个小问题，让 MySQL 服务器像缓存一样工作需要什么，我无法访问 MySQL 服务器上的任何东西，除了我给定的数据库。

这需要一个单独的数据库吗？请告诉我，如果可能的话，我可以要求我的主机添加另一个数据库。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T02:43:36.203

如果您在使用 MySQL 作为数据库的 VPS 上托管网站，典型的请求如下所示：

*   客户端向您的 VPS 上运行的 Web 服务器发出请求
*   您在 Web 服务器内运行的脚本会进行数据库查询
*   数据库返回查询结果
*   您的脚本格式化并打印结果
*   结果出现在浏览器（客户端）中

如果不先通过 Web 服务器，就无法使请求访问数据库。

如果你想减轻 VPS 的负载，你可以让你的脚本运行得更快。大多数 Web 应用程序中最耗时的部分是进行数据库查询并等待结果。在很多情况下，您可以通过使用内存缓存（如[memcached ）](http://memcached.org)*在 VPS 上*缓存数据库查询的结果来避免这种情况。但是请注意内存设置 - 确保将分配的最大内存设置为足够低的设置，因为您的服务器内存非常少。

下面是一个缓存 SELECT 查询结果的基本示例：

```
$cache = new Memcached();
$cache->addServer('localhost', 11211);

$article_key = "article[$article_id]";
$article = $cache->get($article_key);

if ($article === FALSE) {
    $statement = $conn->prepare("SELECT * FROM articles WHERE id = :id");
    $statement->exec(array('id' => $article_id));
    $result = $statement->fetchAll(PDO::FETCH_ASSOC);
    if (count($result) === 0) {
        // return a 404 status
    }
    $article = $result[0]; 
    $cache->set($article_key, $article);
}

// display the article 
```

# ruby - 除非我在主路径上，否则 Vagrant 不会启动

> ID：13427063
> 
> 赞同：1
> 
> 时间：2012-11-17T02:23:40.167
> 
> 标签：ruby, virtualbox, vagrant

除非我在主路径上，否则 Vagrant 不会启动。

```
[ruby-1.9.3-p286] ~ cat Vagrantfile 
# -*- mode: ruby -*-
# vi: set ft=ruby :

Vagrant::Config.run do |config|
  config.vm.box = "precise32"
end
[ruby-1.9.3-p286] ~ vagrant up
[default] Importing base box 'precise32'...
[default] The guest additions on this VM do not match the install version of
VirtualBox! This may cause things such as forwarded ports, shared
folders, and more to not work properly. If any of those things fail on
this machine, please update the guest additions and repackage the
box.

Guest Additions Version: 4.2.0
VirtualBox Version: 4.1.12
[default] Matching MAC address for NAT networking...
[default] Clearing any previously set forwarded ports...
[default] Forwarding ports...
[default] -- 22 => 2222 (adapter 1)
[default] Creating shared folders metadata...
[default] Clearing any previously set network interfaces...
[default] Booting VM...
[default] Waiting for VM to boot. This can take a few minutes.
[default] VM booted and ready for use!
[default] Mounting shared folders...
[default] -- v-root: /vagrant
[ruby-1.9.3-p286] ~ vagrant destroy
Are you sure you want to destroy the 'default' VM? [Y/N] Y
[default] Forcing shutdown of VM...
[default] Destroying VM and associated drives...
[ruby-1.9.3-p286] ~ 
```

`vagrant up`当我从我的家庭路径运行时，它成功启动。但是当我`vagrant up`从另一个子目录运行时，它不会启动。这有点奇怪，因为我使用的 Vagrantfile 完全相同。

```
[ruby-1.9.3-p286] ~ 
[ruby-1.9.3-p286] ~ cd dev_vm 
[ruby-1.9.3-p286] ~/dev_vm cat Vagrantfile 
# -*- mode: ruby -*-
# vi: set ft=ruby :

Vagrant::Config.run do |config|
  config.vm.box = "precise32"
end
[ruby-1.9.3-p286] ~/dev_vm vagrant up
[default] VM already created. Booting if it's not already running...
[default] Clearing any previously set forwarded ports...
[default] Forwarding ports...
[default] -- 22 => 2222 (adapter 1)
[default] Creating shared folders metadata...
[default] Clearing any previously set network interfaces...
[default] Booting VM...
[default] Waiting for VM to boot. This can take a few minutes.
The VM failed to remain in the "running" state while attempting to boot.
This is normally caused by a misconfiguration or host system incompatibilities.
Please open the VirtualBox GUI and attempt to boot the virtual machine
manually to get a more informative error message.
[ruby-1.9.3-p286] ~/dev_vm 
[ruby-1.9.3-p286] ~/dev_vm 
```

我什至尝试从 Virtualbox UI 手动启动它，但我只看到一个空白屏幕。我可能认为我错过了一些东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T18:27:58.600

`export VAGRANT_LOG=debug`，这向我展示了一条消息，让我尝试`vagrant destroy`和`vagrant up`。然后我的虚拟机正确启动。理解可能是什么问题仍然很奇怪。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-30T21:05:49.513

我还想补充一点，您会收到此错误

> 等待虚拟机启动。这可能需要几分钟。尝试启动时，VM 未能保持在“运行”状态。这通常是由错误配置或主机系统不兼容引起的。请打开 VirtualBox GUI 并尝试手动启动虚拟机以获取更多信息的错误消息。

运行 vagrant 时，如果您在 64 位处理器上安装了 i386 版本的 virualbox。因此，请确保您为主机安装了正确的虚拟化软件。

# java - 如何在 gremlin 中编写 for 循环？

> ID：13427066
> 
> 赞同：2
> 
> 时间：2012-11-17T02:23:54.503
> 
> 标签：java, neo4j, gremlin

如何`for`在 gremlin 中编写循环？就像是：

```
for i=0;i<10:i++:
  println hello number i 
```

我还尝试遍历节点并在每个节点上调用一个函数，例如（`count`）：

```
gremlin> g.v(782).in
==> v[2746934]
==> v[2581232]
==> v[1554286]
==> v[780]
gremlin> g.v(78).in.loop(2){it.loops < 4}.count()
==> class java.lang.NullPointerException : null 
```

我的主要目标是执行一个 for 循环并打印没有`inE`. 这意味着它们的度数为零。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T22:11:54.120

`filter{!it.inE.hasNext()}`由于不需要完整计数/迭代，因此效率更高。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T10:52:25.593

如果您想遍历图中的所有节点以计算边缘中没有多少节点，您可以执行以下操作：

```
gremlin> g = TinkerGraphFactory.createTinkerGraph()
==>tinkergraph[vertices:6 edges:6]
gremlin> g.V.filter{!it.inE.hasNext()}.count()
==>2 
```

如果您想执行一些副作用，例如“打印”，请使用副作用步骤：

```
gremlin> g.V.filter{!it.inE.hasNext()}.sideEffect{println it.name}
marko
==>v[1]
peter
==>v[6] 
```

请注意，它打印了两次，因为 Gremlin 终端已经在为您打印，所以如果您在终端中，您不妨这样做：

```
gremlin> g.V.filter{!it.inE.hasNext()}.name                       
==>marko
==>peter 
```

# java - 从适配器内部调用 notifyDataSetChanged 失败

> ID：13427069
> 
> 赞同：5
> 
> 时间：2012-11-17T02:24:46.553
> 
> 标签：java, android, adapter

我有一个适配器（扩展 BaseAdapter），我试图从中调用 notifyDataSetChanged()，但它不起作用。我相信 notifyDataSetChanged() 实际上是被调用的，基于使用 Eclipse 调试器进入它。但是，它不调用 getView()。我的适配器底层的数据正在改变，这是应该的。我在适配器中有一个方法 updateSettings()，用于更新适配器底层的数据。如果我从我的 ListViewActivity 调用 updateSettings()，我没有任何问题...notifyDataSetChanged() 的行为符合我的预期。但是当我从适配器中调用 updateSettings() 时，notifyDataSetChanged() 不起作用。通过尝试从适配器中调用 notifyDataSetChanged() 我是否在做一些根本错误的事情？这是我的一些代码：

```
public View getView( int position, View convertView, ViewGroup parent )
{
    Log.d( CLASS_NAME, "Entered getView()" );
    View row = convertView;
    _settingViewHolder = new PhoneSettingViewHolder();
    final int index = position;

    /* If this is the first time the list is being built, get all of the UI widgets
     * and store them in a PhoneSettingViewHolder object for future use on
     * subsequent writing of the list.
     */
    if( row == null )
    {
        LayoutInflater inflater = (LayoutInflater)_context.getSystemService( Context.LAYOUT_INFLATER_SERVICE );
        row = inflater.inflate( R.layout.phone_list_complex, null, false ); 

        _settingViewHolder.txtSettingName = (TextView)row.findViewById( R.id.phone_list_complex_title );
        _settingViewHolder.txtSettingValue = (TextView)row.findViewById( R.id.phone_list_complex_caption );
        _settingViewHolder.sbTimeout = (SeekBar)row.findViewById( R.id.slider );
        _settingViewHolder.txtPercent = (TextView)row.findViewById( R.id.percent );

        _settingViewHolder.sbTimeout.setMax( 30 );
        _settingViewHolder.sbTimeout.setProgress( 1 );

        // associate this PhoneSettingViewHolder object with the row
        row.setTag( _settingViewHolder );
    }
    else
    {
        // get the PhoneSettingViewHolder object that is associated with this row
        _settingViewHolder = (PhoneSettingViewHolder)row.getTag();
    }

    // get Setting object and store values in PhoneSettingViewHolder object
    final Setting setting = _settings.get( position );
    _settingViewHolder.txtSettingName.setText( setting.getSettingName() );
    Log.d( CLASS_NAME, "setting.getSettingValue() = " + setting.getSettingValue() );
    _settingViewHolder.txtSettingValue.setText( setting.getSettingValue() );

    /* Event handlers for SeekBar */
    _settingViewHolder.sbTimeout.setOnSeekBarChangeListener( new OnSeekBarChangeListener() {
        public void onProgressChanged( SeekBar seekBar, int progress, boolean isUser )
        {
            Log.d( CLASS_NAME, "Entered onProgressChanged()" );
            String percent = String.valueOf( progress );
            updateSettings( index, percent );
        }

        public void onStartTrackingTouch( SeekBar seekBar )
        {
            // Nothing to do here
        }

        public void onStopTrackingTouch( SeekBar seekBar )
        {
            // Nothing to do here 
        }
    });

    return row;

} 
```

在这个块中，我设置了行视图并将事件处理程序附加到 SeekBar。我想要发生的是，当有人滚动 SeekBar 时，它会更新它上面的文本。这是我的 updateSettings() 方法：

```
 public void updateSettings( int index, String progress ) 
    {
        Log.d( CLASS_NAME, "Entered updateSettings()" );
        Setting setting = new Setting( SETTING_NAME, progress );
        _settings.set( index, setting );
        Log.d( CLASS_NAME,  "Calling notifyDataSetChanged()" );
        notifyDataSetChanged();
        Log.d( CLASS_NAME, "Returned from notifyDataSetChanged()" );
    } 
```

任何见解表示赞赏！

谢谢你。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2016-04-01T10:44:15.733

只需添加

> notifyDataSetChanged()

** 在您的适配器中，应用程序将重新加载您的列表。

^^

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-28T09:24:15.420

我遇到了同样的问题，解决方案是：不要`NotifyDataSetChanged()`在适配器内部调用使用`listView.getAdapter().notiftDataSetChanged()`

它会起作用的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-10-02T03:55:36.823

我只是添加

适配器.notifyDataSetChanged()

onCLick 在 onBindViewHolder() 里面，对我有用~

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T20:26:59.670

感谢所有关注我问题的人。我希望这个解决方案可以帮助其他人。

我将适配器用于单独的列表，它管理列表不同部分的适配器。我遇到问题的适配器是托管适配器之一。

我所做的是创建一个回调函数（在 Java 中）来处理 SeekBar 滚动时的情况。我用我的适配器注册了它，所以当它被调用时，它调用了 adapter.notifyDataSetChanged：

```
public void eventNotifier( InterestingEvent event )
{
    _event = event; // register event handler
}

class NotifyDataSetChangedEvent implements InterestingEvent {

    private final String CLASS_NAME = "NotifyDataSetChangedEvent";

    public void interestingEventHappened()
    {
        Log.d( CLASS_NAME, "Entered interestingEventHappened()");
        _adapter.notifyDataSetChanged();
    }
} 
```

谢谢 ：）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-18T12:13:03.590

您必须`notifyDataSetChanged()`以这种方式调用：

```
ArrayAdapter<String> adapter; // where adapter - your adapter
adapter = new ArrayAdapter<String>(...);
adapter.notifyDataSetChanged(); 
```

# c - 在 C 中读取多个文本文件

> ID：13427070
> 
> 赞同：2
> 
> 时间：2012-11-17T02:24:49.297
> 
> 标签：c, file-io

当您知道目录中会有很多数据时，从文本文件中读取和提取数据的正确方法是什么？我知道您可以使用`fopen()`来获取指向文件的指针，然后执行类似`while(fgets(..) != null){}`从整个文件中读取的操作，但是我怎么能从另一个文件中读取呢？我想遍历目录中的每个文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T02:50:49.013

Sam，您可以使用 opendir/readdir，如下面的小函数。

```
#include <stdio.h>
#include <dirent.h>

static void scan_dir(const char *dir)
{
    struct dirent * entry;
    DIR *d = opendir( dir );

    if (d == 0) {
        perror("opendir");
        return;
    }

    while ((entry = readdir(d)) != 0) {
        printf("%s\n", entry->d_name);
        //read your file here
    }
    closedir(d);
}

int main(int argc, char ** argv)
{
    scan_dir(argv[1]);
    return 0;
} 
```

这只是打开一个在命令行上命名的目录并打印它包含的所有文件的名称。但是，您可以根据需要处理文件，而不是打印名称...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T02:46:13.420

通常，文件列表会在命令行上提供给您的程序，因此可以在作为第二个参数传递给 main() 的指针数组中使用。即调用外壳程序用于查找目录中的所有文件，然后您的程序只需遍历 argv[] 以打开和处理（和关闭）每个文件。

见第 162 in "The C Programming Language", Kernighan and Ritchie, 2nd edition，为你可以使用的代码提供了一个几乎完整的模板。用您自己的处理替换`filecopy()`该示例中的函数。

如果您确实需要直接从程序中读取一个（或多个目录），那么您需要阅读 libc 中的 opendir(3) 和相关函数。一些系统还提供了一个名为 ftw(3) 或 fts(3) 的库函数，它们也非常方便。

# ruby-on-rails - ubuntu 12.04 上的 json 问题

> ID：13427077
> 
> 赞同：1
> 
> 时间：2012-11-17T02:26:12.197
> 
> 标签：ruby-on-rails, ubuntu-12.04

我在尝试时遇到问题`rake db:migrate`。我收到以下错误：

```
Could not find json-1.7.5 in any of the sources  
Run `bundle install` to install missing gems. 
```

现在，我已经运行`bundle install`了，当它到达 json 时它给出了一个错误，但我还是再试一次，当它到达 json 时得到同样的错误：

> 使用原生扩展安装 json (1.7.5) Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension。
> 
> ```
>  /usr/bin/ruby1.9.1 extconf.rb  /usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot 
> ```
> 
> 从 /usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in 加载此类文件 - mkmf (LoadError `require' from extconf.rb:1:in`)
> 
> Gem 文件将继续安装在 /home/chris/.bundler/tmp/2984/gems/json-1.7.5 以供检查。结果记录到 /home/chris/.bundler/tmp/2984/gems/json-1.7.5/ext/json/ext/generator/gem_make.out 安装 json (1.7.5) 时出错，Bundler 无法继续. `gem install json -v '1.7.5'`在捆绑之前确保成功。

最后一部分说要确保`gem install json -v '1.7.5'`在捆绑之前成功，所以我运行这个命令并且 json 安装正常：

> 构建原生扩展。这可能需要一段时间...
> 已成功安装 json-1.7.5
> 1 个 gem 安装
> 为 json-1.7.5 安装 ri 文档... 为 json-1.7.5
> 安装 RDoc 文档...

但是，如果我尝试`rake db:migrate`，它会以同样的错误重新开始。我已经阅读了有关 Mac 上 json 的问题，但对任何这些解决方案都没有运气。有任何想法吗？

我正在运行 Ubuntu 12.04LTS、ruby 1.9.3、rails 3.2.8、gem 1.8.15（也用 1.9.1 尝试过）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T02:40:50.357

我认为您需要安装该`-dev`软件包。尝试运行此命令

```
sudo aptitude install ruby1.9.1-dev 
```

然后`bundle install`应该工作。

# xcode - 为什么我在 iOS6 上会出现无声崩溃？

> ID：13427081
> 
> 赞同：1
> 
> 时间：2012-11-17T02:27:06.740
> 
> 标签：xcode, cocos2d-iphone, ios6

我已经无计可施，试图找出我遇到的“无声”崩溃。它没有发生在代码的特定部分，因为我已将 nslogs 放置在多个位置，并且与它们和崩溃没有关联。

我在仪器分配工具中使用**vmtracker**，我的脏内存有所不同，但崩溃低至 32 MB。我在分配中的活动字节（不是**vmtracker**）稳定在 10-12 MB 左右。

如果这是一些逻辑错误，我可以理解，但这是一个无声的崩溃，**xcode除了****NSZombie_NSException**之外没有提供任何信息。

这是来自崩溃日志：

```
Exception Type:  EXC_BAD_ACCESS (SIGSEGV)
Exception Codes: KERN_INVALID_ADDRESS at 0x60000008
Crashed Thread:  0

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   libobjc.A.dylib                 0x34da9564 0x34da6000 + 13668
1   libobjc.A.dylib                 0x34da9f84 0x34da6000 + 16260
2   libobjc.A.dylib                 0x34dab1d2 0x34da6000 + 20946
3   CoreFoundation                  0x372ae600 0x371ec000 + 796160
4   CoreFoundation                  0x372ae358 0x371ec000 + 795480
5   libobjc.A.dylib                 0x34daea62 0x34da6000 + 35426
6   libc++abi.dylib                 0x35a41078 0x35a40000 + 4216
7   libc++abi.dylib                 0x35a41110 0x35a40000 + 4368
8   libc++abi.dylib                 0x35a42594 0x35a40000 + 9620
9   libobjc.A.dylib                 0x34dae9cc 0x34da6000 + 35276
10  CoreFoundation                  0x371f4f1c 0x371ec000 + 36636
11  CoreFoundation                  0x371f4d44 0x371ec000 + 36164
12  GraphicsServices                0x34eaa2e6 0x34ea5000 + 21222
13  UIKit                           0x36c6c2fc 0x36c15000 + 357116
14  Pocket Dungeons                 0x0008a2be 0x3a000 + 328382
15  Pocket Dungeons                 0x0003b8bc 0x3a000 + 6332 
```

32 MB 对于 iPod Touch 4g、iOS 6 来说是不是很多脏内存？

# php - 如果未安装 PHP，则禁用 php 文件的下载

> ID：13427083
> 
> 赞同：8
> 
> 时间：2012-11-17T02:27:25.947
> 
> 标签：php, apache, .htaccess

我的大学有多个服务器，它们之间镜像相同的数据，所以我可以访问例如

```
foo.uni.edu/file.php
bar.uni.edu/file.php 
```

问题是，并非所有服务器都安装了 PHP，所以如果他们通过没有安装 PHP 的服务器建立连接，任何人都可能下载我的 php 文件。有没有办法，可能用 .htaccess 来避免这种情况？如在安装 PHP 服务器的情况下只允许打开 PHP 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T02:49:58.030

如果可以将文件存储在文档根目录之外，则可以通过将所有敏感数据存储在 docroot 之外来解决此问题。然后，您将使用可公开访问的脚本`include`来访问这些文件。

因此，如果您上传到`/username/public_html`, 并且`public_html`是您的文档根目录（例如`foo.uni.edu/file.php`is `/username/public_html/file.php`），那么您将上传到`/username/file.php`并放置另一个脚本，`/username/public_html`其中仅包含类似`include('../file.php');`

在任何情况下，这是一个很好的做法，以防服务器上的配置错误阻止 PHP 被解析。

如果未启用，您还可以尝试使用[`IfModule`](http://httpd.apache.org/docs/2.2/mod/core.html#ifmodule)并[`FilesMatch`](http://httpd.apache.org/docs/2.2/mod/core.html#filesmatch)拒绝访问 PHP 文件：`mod_php`

```
<IfModule !mod_php.c>
    <FilesMatch "\.php$">
        Order Deny,Allow
        Deny from All
    </FilesMatch>
</IfModule> 
```

如果这不起作用，请尝试`!mod_php5.c`。

# c++ - 编译时绑定 C++ 模板？

> ID：13427086
> 
> 赞同：0
> 
> 时间：2012-11-17T02:27:41.237
> 
> 标签：c++, templates, corba

我试图弄清楚如何让 C++ 模板使用查找表来执行其功能，但在编译时而不是运行时。我很难把它变成文字，所以这里有一个例子，以及我迄今为止拥有的丑陋的模板 + 预处理器宏组合：

```
template<class T_POD, class T_Corba>
inline void c_to_corba_base(T_POD &In, CORBA::Any &Out) {
    Out <<= static_cast<T_Corba>(In);
}

#define C_TO_CORBA_PAIR(T_POD, T_CORBA) \
inline void c_to_corba(T_POD &In, CORBA::Any &Out) { \
    c_to_corba_base<T_POD, T_CORBA>(In, Out); \
}

C_TO_CORBA_PAIR(short, CORBA::Short)
C_TO_CORBA_PAIR(long, CORBA::Long)
C_TO_CORBA_PAIR(double, CORBA::Double)
// etc. 
```

所以你可以看到，它类型转换`A`为`B`get `C`。`C`总是`CORBA::Any`。但`B`取决于`A`（在编译时已知）。

我做了一些研究，看起来[`Boost::MPL::bind`](http://www.boost.org/doc/libs/1_52_0/libs/mpl/doc/refmanual/bind.html)可以做我需要的（我们已经需要 Boost），但我不明白语法。这一切都可以在宏中完成，但如果可以的话，我宁愿把它作为“真正的”模板。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T02:47:54.297

这是否更好？

```
template<typename> struct CorbaTypeMap;
template<> struct CorbaTypeMap<short>  { typedef CORBA::Short  type; };
template<> struct CorbaTypeMap<long>   { typedef CORBA::Long   type; };
template<> struct CorbaTypeMap<double> { typedef CORBA::Double type; };

template<typename T_POD>
inline void c_to_corba(T_POD &In, CORBA::Any &Out) {
    Out <<= static_cast< /* typename */ CorbaTypeMap<T_POD>::type >(In);
} 
```

我认为你不需要那个`typename`关键字，因为`static_cast`总是需要一个类型，但如果你得到一个错误，那可能就是修复了。

# java - 现在使用 if else 语句时出现不兼容错误

> ID：13427087
> 
> 赞同：1
> 
> 时间：2012-11-17T02:27:50.137
> 
> 标签：java, switch-statement

尝试运行下面的程序，但在使用 switch 方法时出现错误

导入 java.util.Scanner；

/** ** @author kern 公共类贷款 {

```
public static void main(String[] args) { 
```

扫描仪输入 = 新扫描仪（System.in）；

```
 //variabled decleared
    double rate, payment,principal,interest,n;
    int length;
    String period;

    //input
    System.out.print("Enter the amount of money borrowed: $");
    principal = input.nextDouble();
    System.out.print("Enter the annual interest rate: ");
    interest = input.nextDouble();
    System.out.print("Enter the payment period :");
    period = input.next();
    System.out.print("Enter Loan Length:");
    length = input.nextInt();
    //process

    rate=interest/100;
    payment= principal*(rate*Math.pow((1+rate),n)/ Math.pow ((1+rate),n));

      if (period==annually) {
               n=1*length;
                System.out.prtintf(Your monthly sum is %f:,payment);{

 if (period==semiannuall) {
               n=2*length;
                System.out.prtintf(Your monthly sum is %f:,payment);{

 if (period== quarterly) {
               n=4*length;
                System.out.prtintf(Your quarterly sum is %f:,payment);{

 if (period==monthly) {
               n=12*length;
                System.out.prtintf(Your monthly sum is %f:,payment);{

} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T02:29:04.807

`String`从 java 7 支持 case 值

**看**

*   [开关盒](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/switch.html)

你需要像这样使用它

```
if("annually".equals(period)){
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T02:40:42.543

根据 Jigar Joshi 链接，您现在可以执行字符串：

**在 switch 语句中使用字符串**

*在 Java SE 7 及更高版本中，您可以在 switch 语句的表达式中使用 String 对象。以下代码示例 StringSwitchDemo 根据名为 month 的字符串的值显示月份的编号：*

```
public class StringSwitchDemo {
public static int getMonthNumber(String month) {

    int monthNumber = 0;

    if (month == null) {
        return monthNumber;
    }

    switch (month.toLowerCase()) {
        case "january":
            monthNumber = 1;
            break;
        case "february":
            monthNumber = 2;
            break;
        case "march":
            monthNumber = 3;
            break;
        case "april":
            monthNumber = 4;
            break;
        case "may":
            monthNumber = 5;
            break;
        case "june":
            monthNumber = 6;
            break;
        case "july":
            monthNumber = 7;
            break;
        case "august":
            monthNumber = 8;
            break;
        case "september":
            monthNumber = 9;
            break;
        case "october":
            monthNumber = 10;
            break;
        case "november":
            monthNumber = 11;
            break;
        case "december":
            monthNumber = 12;
            break;
        default: 
            monthNumber = 0;
            break;
    }

    return monthNumber;
}

public static void main(String[] args) {

    String month = "August";

    int returnedMonthNumber =
        StringSwitchDemo.getMonthNumber(month);

    if (returnedMonthNumber == 0) {
        System.out.println("Invalid month");
    } else {
        System.out.println(returnedMonthNumber);
    }
} 
```

}

# c++ - 在分配之前 memset() 一个 std::iterator 变量是否安全？

> ID：13427090
> 
> 赞同：1
> 
> 时间：2012-11-17T02:28:26.303
> 
> 标签：c++, std

这段代码安全吗？

```
int main() {

    struct {
        int foo;
        int bar;
        std::list<...>::iterator it;
    } foobar;

    memset(&foobar, 0, sizeof(foobar));

    foobar.it = ...;
} 
```

我认为它是安全的，因为`std::iterator`似乎没有覆盖`operator=`. 这是一个有效的推理吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-17T02:31:15.570

不会。赋值运算符通常假定其左侧（接收者）操作数在赋值之前具有有效状态。

同时，您正在将这些零压在可能非平凡构造的`std::list<...>::iterator`类型对象上。这只能在您对它的确切属性有深入了解的情况下起作用，`std::list<...>::iterator`并且您知道用零填充它会产生一个有效的对象。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-17T02:31:33.610

`memset()`任何非平凡的类型都是一个坏主意。这也是完全没有必要的：只需初始化值：

```
struct {
    int foo;
    int bar;
    std::list<...>::iterator it;
} foobar = {}; 
```

它具有更快并且做正确的事情的明显优势！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-17T02:32:12.517

你*永远不*应该拥有构造函数的 memset 类型。你不知道迭代器的内部结构，所以你不应该用锤子敲它。

# user-interface - Gtk# 的 DataGrid 或如何将 TreeView 用作 DataGrid

> ID：13427092
> 
> 赞同：2
> 
> 时间：2012-11-17T02:28:55.527
> 
> 标签：user-interface, monodevelop, gtk#

我需要将诸如 DataGrid 之类的对象添加到我的 Gtk# Forms 中。我已经阅读了一些关于它的信息并找到了下一个代码：

```
 protected ListStore SetupModel(TreeView aTreeView, String StartOfColumns, params Type[] TypesOfColumnsForListStore)
{
    ListStore m = new ListStore(TypesOfColumnsForListStore);

    CellRendererText textCell=new CellRendererText();
    textCell.Editable=true;

    for(Int32 i=1;i<=TypesOfColumnsForListStore.Length;i++)
    {
        TreeViewColumn nameCol = new TreeViewColumn( StartOfColumns + i, textCell, "text", 0);
        //TreeViewColumn nameCol = new TreeViewColumn( StartOfColumns + i, new CellRendererText(), "text", 0);
        aTreeView.AppendColumn( nameCol);
    }

    aTreeView.Model = m;

    return m;
}

void PopulateData( ListStore model ) 
{
    //model.Append();
    model.AppendValues( "Fred", "Blue" );
    model.AppendValues( "Bob", "Green" );
    model.AppendValues( "Mary", "Yellow" );
    model.AppendValues( "Alice", "Red" ); 
```

}

但是如果我使用这段代码，所有的列都是只读的。然后我在[这里](https://stackoverflow.com/questions/4511218/how-to-use-gtk-treeview-correctly)找到了其他信息，但是下一个代码也不起作用：

```
protected void OnButton1Clicked (object sender, EventArgs e)    
{

    CellRendererText renderer=new CellRendererText();       TreeViewColumn
 treeColumn=new TreeViewColumn();       renderer.Height=40;
        renderer.Width=90;

        treeColumn.SetCellDataFunc (renderer, delegate (TreeViewColumn
 col, CellRenderer cell, TreeModel model, TreeIter iter)        {
            var textCell = (CellRendererText) cell;
            textCell.Text = (string) model.GetValue (iter, 0);
            textCell.Editable = (bool) model.GetValue (iter, 4);        
});

        treeview2.AppendColumn(treeColumn);

        ListStore model2=new ListStore(typeof(String));
        model2.AppendValues("1");       model2.AppendValues("2");

        treeview2.Model=model2;     
} 
```

有人可以向我解释如何将 TreeView 用作可编辑的 DataGrid 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-08T06:02:45.030

一旦你进入 TreeView，Gtk# 就相当复杂。

这是只读和可编辑列的代码。

```
 var tvTable = new Gtk.TreeView();
        tvTable.EnableGridLines = TreeViewGridLines.Both;

        // Create liststore
        var types = new System.Type[ 2 ];
        types[ 0 ] = typeof( string );
        types[ 1 ] = typeof( string );
        Gtk.ListStore listStore = new Gtk.ListStore( types );
        tvTable.Model = listStore;

        // Create index column
        var column = new Gtk.TreeViewColumn();
        var cell = new Gtk.CellRendererText();
        column.Title = "#";
        column.PackStart( cell, true );
        cell.Editable = false;
        cell.Foreground = "black";
        cell.Background = "light gray";
        column.AddAttribute( cell, "text", 0 );
        tvTable.AppendColumn( column );

        // Data column
        var column = new Gtk.TreeViewColumn();
        column.Expand = true;
        cell = new Gtk.CellRendererText();
        column.Title = document.Headers[ columnNumber ];
        column.PackStart( cell, true );
        cell.Editable = true;
        column.AddAttribute( cell, "text", columnNumber + 1 );
        cell.Edited += OnTreeViewCellEdited;
        tvTable.AppendColumn( column );

        // Add data
        listStore.AppendValues( new string[] { "1", "hello" } ); 
```

希望这可以帮助。

# c - 将字符串剪切成 2 个字符的字符串的一部分，然后在 C 中转换为十六进制格式（char * 到无符号字符）

> ID：13427098
> 
> 赞同：0
> 
> 时间：2012-11-17T02:30:03.603
> 
> 标签：c, string, visual-studio, char, cut

我需要一些帮助来将字符串切割成一对字符，然后将其转换为 HEX 格式。

例如。字符 *ADDRESS = "0011AABB"; 我希望将上述地址拆分为“00”、“11”、“AA”和“BB”，然后拆分将其转换为 0x00、0x11、0xAA 和 0xBB，这些地址将存储在无符号字符中。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-09T10:26:22.363

您建议您的地址字符串是 type `char *`，但我假设您想要一个保证不丢弃它们的解决方案，即将它们作为 type 的解决方案`char const *`。

根据示例，我还假设它们可以表示的地址是 32 位的`char *ADDRESS = "0011AABB"`。

在这种情况下，以明显方式完全满足您要求的解决方案是：

```
#include <assert.h>
#include <stdlib.h>
#include <string.h>

#define ADDRESS_BYTES 4 // Bytes in an address

/* Convert a hex numeral encoding an address to the unsigned chars that it 
    encodes

    `addr_str` - in: a hex numeral encoding an address
    `bytes` - out: The unsigned char bytes of the address, high-byte first.

    return - The number of bytes output: ADDRESS_BYTES if `addr_str` is a 
        valid hex numeral, otherwise 0.
*/  
unsigned address_bytes(char const *addr_str, unsigned char bytes[ADDRESS_BYTES])
{
    char buf[3] = {0}; // 3-bytes of 0-filled working space.
    char *endp;
    unsigned i = 0;
    unsigned j = 0;
    assert(strlen(addr_str) == 2 * ADDRESS_BYTES); // Insist on 8-char string
    for (   ;i < 2 * ADDRESS_BYTES; ++j) { // Take chars 2 at a time
        buf[i % 2] = addr_str[i]; ++i; // Next char to buf[0]
        buf[i % 2] = addr_str[i]; ++i; // Next + 1 char to buf[1]
        // Convert buffer from hex numeral to unsigned char in next byte.
        bytes[j] = (unsigned char)strtoul(buf,&endp,16);
        if (*endp) { // Check for invalid hex. 
            return 0; // Failure
        }
    }
    return j; // = 4
}

// A test program...

#include <stdio.h>

int main(void)
{
    unsigned char bytes[ADDRESS_BYTES];
    char const * address = "0011AABB";
    unsigned done_bytes = address_bytes(address,bytes);
    printf("The %d valid address bytes are (hex):",done_bytes);
    unsigned i = 0;
    for (   ;i < done_bytes; ++i) {
        printf(" %02x",(unsigned)bytes[i]);
    }
    putchar('\n');
    return 0;
} 
```

但是，您所要求的并不是一个有效的解决方案。您可以通过简单地将编码 32 位地址的 8 字符十六进制数字转换为编码的 32 位无符号整数，然后以高字节优先顺序获取组成此无符号整数的 4 个无符号字符字节来实现您的目标. `uint32_t`只需调用 . 即可将 十六进制数字转换为 a `strtoul`。然后`uint32_t`以高字节优先顺序获取 unsigned char 字节只是知道这`uint32_t`是大端还是小端的问题。所以这里有一个更好的解决方案：

```
#include <assert.h>
#include <stdlib.h>
#include <string.h> 
#include <inttypes.h>

unsigned address_bytes(char const *address, unsigned char bytes[ADDRESS_BYTES])
{
    union {
        uint32_t i;
        char c[ADDRESS_BYTES];
    } endian_tester = {0x01020304};

    int big_endian = endian_tester.c[0] == 1; 
    uint32_t addr = 1;
    char *endp;
    assert(strlen(address) == 2 * ADDRESS_BYTES);
    addr = (uint32_t)strtoul(address,&endp,16);
    if (*endp) {
        return 0;
    }
    endp = (char *)&addr;
    if (big_endian) {
        // The least significant byte is highest in memory
        bytes[0] = endp[0];
        bytes[1] = endp[1];
        bytes[2] = endp[2];
        bytes[3] = endp[3];
    } else {
        // The least significant byte is lowest in memory
        bytes[0] = endp[3];
        bytes[1] = endp[2];
        bytes[2] = endp[1];
        bytes[3] = endp[0];
    }
    return ADDRESS_BYTES;
} 
```

如果您能够并且愿意做出地址字符串以 ASCII 编码的*不可移植*假设，那么您可以避免 `strtoul`完全调用并使用字符在 ASCII 整理中的位置直接从输入字符计算输出字节序列以获取它们编码的无符号字符值：

```
#include <assert.h>
#include <string.h> 
#include <ctype.h>

unsigned address_bytes(char const *address, unsigned char bytes[ADDRESS_BYTES])
{
    unsigned i = 0;
    unsigned j = 0;
    assert(strlen(address) == 2 * ADDRESS_BYTES);
    for (   ; i < 2 * ADDRESS_BYTES; ++i,++j) {
        // First character of a pair..
        if (isdigit(address[i])) {
            // A decimal digit encodes its ASCII value - '0'
            bytes[j] = address[i] - '0';
        } else if (isxdigit(address[i])) {
            // A hex digit encodes 10 + its ASCII value - 'A'
            bytes[j] = 10 + address[i] - 'A';
        } else {
            return 0; // Invalid hex
        }
        ++i; // Second character of a pair...
        bytes[j] <<= 4; // Shift the 1st character's value 1 nibble high
        // OR the 2nd character's value into the low nibble of the byte...
        if (isdigit(address[i])) {
            bytes[j] |= address[i] - '0';
        } else if (isxdigit(address[i])) {
            bytes[j] |= 10 + address[i] - 'A';
        } else {
            return 0; // Invalid hex
        }
    }
    return ADDRESS_BYTES;
} 
```

如果重要的话，最后一个可能是最快的。

使用 GCC 4.7.2 和 clang 3.2 构建和测试

# database - 数据库如何用于实现文档协作？

> ID：13427101
> 
> 赞同：0
> 
> 时间：2012-11-17T02:30:14.737
> 
> 标签：database, sharepoint, google-docs, collaboration, consistency

Google Docs 和 Sharepoint 等文档协作工具是如何在后端实现的？后端采用什么样的数据库架构来实现多人同时编辑文档等功能。如何在不让每次编辑更新整个数据库条目的情况下对大型文档有效地完成此操作？

他们如何在不占用大量磁盘空间的情况下维护每个编辑的完整版本历史？

Google Docs 和 Sharepoint 对于非常大的文档是否会降低性能？

# bash - 创建 ssh 密钥，但在命令行中提供密码

> ID：13427106
> 
> 赞同：-2
> 
> 时间：2012-11-17T02:31:16.117
> 
> 标签：bash, shell, ssh

生成 SSH 密钥的 shell 命令是什么，但提供密码作为命令的一部分而不是标准输入来自动执行此操作？

例如（伪代码）：

```
ssh-keygen -f ./id_rsa -t rsa --passphrase=my-secret-here 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T02:49:27.887

来自`man ssh-keygen`：

```
 -N new_passphrase
         Provides the new passphrase. 
```

# file-io - 如何在 Amazon Elastic MapReduce 中读取外部文件

> ID：13427115
> 
> 赞同：2
> 
> 时间：2012-11-17T02:33:54.950
> 
> 标签：file-io, amazon, elastic-map-reduce, emr

您好我是使用 Amazon EMR 和 Hadoop 的新手。我想知道如何从 EMR 作业中读取外部文件（存储在 S3 中）。例如，我有一个包含一长串列入黑名单的字符串的文件。当我的 EMR 作业正在处理我的输入时，我如何让作业事先读取此列入黑名单的字符串列表，以便在处理期间使用它？

我尝试使用常规的 Java Scanner 类并对文件的 S3 路径进行硬编码，但这似乎不起作用，尽管我可能做错了......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T22:37:00.003

我会做这样的事情（对不起，代码是scala而不是java，但它是一样的）

*   将路径作为参数传递给您的 main 方法

*   将其设置为配置中的属性

```
val conf = new Configuration()    
conf.set("blacklist.file", args(0)) 
```

*   在mapper的setup方法中，读取文件：

```
var blacklist: List[String] = List()
    override def setup(context: Context) {
          val path = new Path(context.getConfiguration.get("blacklist.file"))
          val fileSystem = FileSystem.get(path.toUri, context.getConfiguration)
          blacklist = scala.io.Source.fromInputStream(fileSystem.open(path)).getLines.toList
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T20:49:51.673

如果您可以按如下方式将此文件添加到分布式缓存中会更好：

```
...
String s3FilePath = args[0];
DistributedCache.addCacheFile(new URI(s3FilePath), conf);
... 
```

稍后，在 mapper/reducer 的 configure() 中，您可以执行以下操作：

```
...
Path s3FilePath;
@Override
public void configure(JobConf job) {
s3FilePath = DistributedCache.getLocalCacheFiles(job)[0];
FileInputStream fstream = new FileInputStream(s3FilePath.toString());
// Read the file and build a HashMap/List or something which can be accessed from map/reduce methods as desired.
...
} 
```

# javascript - 替换字符串中的内容所需的 Jquery 函数

> ID：13427116
> 
> 赞同：5
> 
> 时间：2012-11-17T02:34:24.663
> 
> 标签：javascript

我有一个文本区域，用户可以在其中输入内容，还可以包含表情符号，例如 :) 或 ;)

当按下“Sent”时，需要解析 textarea 字符串以将任何表情符号转换为`<img>`'s 以供显示。

我可以轻松生成表情符号列表以及相关图像，例如：

```
 ':)' - '<img src="/images/happy.jpg"/>'
 ';)' - '<img src="/images/wink.jpg"/>' 
```

我假设以上内容可以放入关联数组中。

有人能指出我正确的方向来创建表情符号和 html img 标签的关联数组，然后解析一个字符串以用 html img 标签替换匹配的符号吗？

出于兴趣还有没有更好的方法来做到这一点？

谢谢你

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-17T02:43:15.237

您实际上完全描述了这种行为：

```
var map = {
    ':)':   '<img src="/images/happy.jpg"/>',
    ';(':   '<img src="/images/wink.jpg"/>'
},
text    = document.getElementsByTagName('textarea')[ 0 ].value;

Object.keys( map ).forEach(function( ico ) {
    // escape special characters for regex
    var icoE   = ico.replace(/([.?*+^$[\]\\(){}|-])/g, "\\$1");
    // now replace actual symbols
    text       = text.replace( new RegExp(icoE, 'g'), map[ico] );
}); 
```

示例：http: [//jsfiddle.net/DBfpw/2/](http://jsfiddle.net/DBfpw/2/)

* * *

*编辑*
为了创建一个有效的正则表达式，我们需要转义`)`和`(`

*注意*
上面的代码片段包含*ECMAscript5*特色代码。如果您需要在旧版浏览器上运行它，请确保包含*ES5 Shim*库。

*注 2*
抱歉，上面的代码不**包含**任何 jQuery 代码，因为它不是必需的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T02:45:17.743

我会创建一个对象数组，例如：

```
var emoticons = [{regex: /:\)/g, image: "happy"},
                 {regex: /;\)/g, image: "wink"},
                 etc...] 
```

然后遍历该数组以进行替换

```
for(var i = 0; i < emoticons.length; i++) {
    str = str.replace(emoticons[i].regex, 
        '<img src="/' + emoticons[i].image + '.jpg"/>');
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-17T02:58:09.413

您可以在用户键入时使用 JavaScript 替换表情符号。但是将替换后的表情符号的字符串发送到服务器脚本并不是一个好方法。**这是不安全的方式**- 任何人都可以在提交到服务器端脚本之前在客户端替换您的内容。保存`<img src="images/sad.jpg">`而不是 :-( 或进行一些替换会更好。要存储的数据更少+您可以更轻松地用新的图像/图像位置和任何其他字符串替换它。

因此，一种方法是将字符串发布到服务器端脚本以存储在数据库中。对于视图渲染（在发送到浏览器之前），您可以使用函数（如下所示）将每个表情符号字符串替换为特定图像：

```
<?php
    $text = 'Hey :-), how are you doing bro? Having some fun :-D? Lets meet :-(';

    $smileys = array(
        ':-)' => 'happy',
        ':-(' => 'sad',
        ':-D' => 'tongue'
    );

    foreach($smileys as $key => $value) { 
            $text =  str_replace($key, '<img srce="images/'.$value .'.jpg">', $text);
    }

    echo $text;
?> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-17T03:04:08.507

```
// Start off by listing all supported emoticons and their names
var emoticons = {
    ":)": "smile",
    ":P": "tongue",
    ":(": "sad",
}, regex = [];

// push a regex for each one (:\)) onto an array.  Escape each special character
// each component is wrapped in unescaped parentheses to *capture* the token
// dynamically building this is optional -
// you may want to generate the regex once and use the literal
for(var emoticon in emoticons) {
    if(emoticons.hasOwnProperty(emoticon)) {
        regex.push("("+emoticon.replace(/([.?*+^$[\]\\(){}|-])/g, "\\$1")+")");
    }
}

//join the array to form a string and use the regex OR operator.
regex = new RegExp(regex.join("|"), "g");
// Now the regex looks like this - /(:\))|(:P)|(:\()/g

// String replace function also takes a function as the second parameter.
// The function takes the captured text, (what we put in parenthesis earlier)
// and you can use it to refer to the emoticon hash at the beginning.
// Then you return the desired replaced text.
text = text.replace(regex, function(captured) {
    return "<img src='"+emoticons[captured]+".jpg'/>";
}); 
```

[jsFiddle](http://jsfiddle.net/NCXDK/1) demo of this technique

# android - 如何使元素在绝对布局中对齐？

> ID：13427118
> 
> 赞同：0
> 
> 时间：2012-11-17T02:34:53.227
> 
> 标签：android, android-layout, android-emulator

我需要在绝对布局中对齐一组文本字段。在这里，我发布了一张图片。我想让这些文本字段垂直和水平对齐。我只展示了三套，但在我的真实应用中想要添加多达 10 套。对我来说，很难对齐它们。

![在此处输入图像描述](../Images/f87a8be807b96e15af397955e5a55a09.png)

我是一名初学者 Android 开发人员，所以我不知道如何做到这一点。请解释一下最好的方法是什么。

这是我的布局代码：

```
<?xml version="1.0" encoding="utf-8"?>
<AbsoluteLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<EditText
    android:id="@+id/editText1"
    android:layout_width="78dp"
    android:layout_height="wrap_content"
    android:layout_x="81dp"
    android:layout_y="56dp" />

<EditText
    android:id="@+id/EditText01"
    android:layout_width="78dp"
    android:layout_height="wrap_content"
    android:layout_x="202dp"
    android:layout_y="58dp" />

<EditText
    android:id="@+id/EditText02"
    android:layout_width="78dp"
    android:layout_height="wrap_content"
    android:layout_x="82dp"
    android:layout_y="130dp" />

<EditText
    android:id="@+id/EditText03"
    android:layout_width="78dp"
    android:layout_height="wrap_content"
    android:layout_x="205dp"
    android:layout_y="127dp" />

<EditText
    android:id="@+id/EditText04"
    android:layout_width="78dp"
    android:layout_height="wrap_content"
    android:layout_x="82dp"
    android:layout_y="197dp" />

<EditText
    android:id="@+id/EditText05"
    android:layout_width="78dp"
    android:layout_height="wrap_content"
    android:layout_x="205dp"
    android:layout_y="196dp" />

</AbsoluteLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T04:32:36.560

像这样使用`Tablelayout`

```
<?xml version="1.0" encoding="utf-8"?>
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:layout_width="fill_parent"
   android:layout_height="fill_parent"
   android:orientation="vertical" >

<TableLayout
    android:id="@+id/tableLayout1"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TableRow
        android:id="@+id/tableRow1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <EditText
            android:id="@+id/editText1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1" />

        <EditText
            android:id="@+id/editText2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1" />
    </TableRow>

    <TableRow
        android:id="@+id/tableRow2"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <EditText
            android:id="@+id/editText21"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1" />

        <EditText
            android:id="@+id/editText22"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1" />
    </TableRow>

    <TableRow
        android:id="@+id/tableRow3"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <EditText
            android:id="@+id/editText31"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1" />

        <EditText
            android:id="@+id/editText32"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:padding="10dp" />
    </TableRow>
</TableLayout> 
```

# java - 将 Java 小程序嵌入 html 页面时遇到问题

> ID：13427122
> 
> 赞同：0
> 
> 时间：2012-11-17T02:36:28.140
> 
> 标签：java, html, applet

我目前有一个相对简单的 Java 小程序，我正在尝试将它嵌入到 html 页面中。我环顾四周，并没有找到合适的答案。许多答案是指使用不推荐使用的`<applet>`标签，其余的似乎对我不起作用。

这是我的页面的正文。我最初尝试使用该`<applet>`标签并且它有效，但是我无法让它使用页面的整个高度，然后我发现它无论如何都已被弃用。

我已经在 Firefox、Chrome 和 IE 上尝试过这个，但在其中任何一个上都不起作用。它只显示替代文本。

我确实读到该`<object>`标签仅适用于 IE，但即便如此它对我也不起作用。同样，我发现的大部分信息都是过时的。

```
<body>
  <object width="500" height="500" data="project">Your browser does not support the <code>object</code> tag.
  </object>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T04:16:44.513

Ive had no problems using the applet tag to get applets to display to a desired width and height. All the Java resources point to using the same tags. I'm no html guru though, so I'm not sure if there's another solution.

```
 <applet code= "myJavaApplet.class" width="600" height="700">textgoeshere</applet> 
```

# linux - Linux Ubuntu：脚本在终端中工作，但不是 .sh

> ID：13427123
> 
> 赞同：2
> 
> 时间：2012-11-17T02:36:49.313
> 
> 标签：linux, bash, shell, ubuntu, terminal

**问题摘要：**我的脚本在输入到终端时可以正常工作，但是在终端中从 .sh 文件执行时无法正常工作，这是为什么呢？

**脚本：**

```
echo World of Clucky - Frisnuk "\033]0;Frisnuk - World of Clucky\a"
#! /usr/bin/env bash
BINDIR="$(dirname "$(readlink -fn "$0")")"
cd "$BINDIR"
while true
do
source /home/clucky/MinecraftServers/Frisnuk/serverconfig/config.sh
#Start Server
    java -Xms2000M -Xmx2000M -jar $serverjar.jar nogui
    if [ "`date +%w%H`" = "001" ]
    then
#Delete map files for The End
    rm -R /Frisnuk_the_end
    echo "End has been successfully reloaded"
    echo "[`date +%D\ %T`] End Reloaded" >> /home/clucky/MinecraftServers/Frisnuk/EndRestart.txt
#Change Item of The Week
    weekofyear=`date +%y\-%U`
    s=$(<serverconfig/ItemofTheWeek/item$weekofyear.txt)
    set -- $s
    itemoftheweekid=$2
    itemoftheweekprice=$3
    xmlstarlet edit -L -u "/scs-shop/itemStack[@type='double']" -v $itemoftheweekid /plugins/ShowCaseStandalone/ffs-storage/ffss_cac8480951254352116d5255e795006252d404d8
    xmlstarlet edit -L -u "/scs-shop/price[@type='double']" -v $itemoftheweekprice /plugins/ShowCaseStandalone/ffs-storage/ffss_cac8480951254352116d5255e795006252d404d8
fi
echo "If you want to stop the restart and shut the server off instead, please press Ctrl+C at this time"
for i in 5 4 3 2 1
do
    echo "$i..."
    sleep 1
done
echo "Restarting Server"
clear
done 
```

它没有工作和运行服务器，而是这样说：

```
World of Clucky - Frisnuk 
/home/clucky/MinecraftServers/Frisnuk/craftminecraft.sh: 7: /home/clucky/MinecraftServers/Frisnuk/craftminecraft.sh: source: not found

Error: Unable to access jarfile .jar
If you want to stop the restart and shut the server off instead, please press Ctrl+C at this time
5...
4...
3...
2...
1... 
```

我马上要洗个澡，但我今晚晚些时候或明天早上会回来。预先感谢您的协助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-17T02:46:05.753

你在 shebang 之前放了一个`echo`，所以你的脚本被解释为`dash`，而不是`bash`。

`dash`不包括`source`，因为它不是标准的。

纠正你的shebang，它会成功的。

* * *

`source`脚本的标准方法是使用`.`.

而不是`source ./myScript.sh`，你做`. ./myScript.sh`。它们在`bash`.

# ios - 来电时暂停 iOS 音频流的最佳方法

> ID：13427126
> 
> 赞同：1
> 
> 时间：2012-11-17T02:37:16.357
> 
> 标签：ios, interrupt-handling

我用一个`AVPlayerItem`来播放音乐流。当电话打进来时暂停流并在通话结束时恢复流的最佳方法是什么？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-17T03:42:52.353

我认为，您使用`AVAudioPlayer`.

所以`AVAudioPlayer`有方法 - 播放/暂停。

示例代码：

```
AVAudioPlayer *thePlayer;
[thePlayer pause]; 
```

# java - 如何将其输出到屏幕上？

> ID：13427128
> 
> 赞同：-1
> 
> 时间：2012-11-17T02:37:50.893
> 
> 标签：java, arrays, output

我目前正在为我的入门级 CS 期末考试而学习，并且遇到了一些问题，我真的很艰难。我最担心的一个要求我用 Java 生成代码，以在屏幕上创建以下输出：

+

+++0

++++++00

++++++++++000

...（这种模式持续 200 行）

这似乎是一个非常基本的问题，但我该怎么做呢？我知道我应该编写一些数组并使用 for 循环来遍历它们并将内容输出到屏幕上，但我真的很感激有关如何解决这个问题的一些指导，以及其他类似问题。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T02:48:05.133

数字的模式`0`只是一个等差数列。数量`+`如下：

```
Row 1:  1
Row 2:  3 = 1 + 2
Row 3:  6 = 3 + 3
Row 4: 10 = 6 + 4 
```

原来这些是[三角数](http://en.wikipedia.org/wiki/Triangular_number)。因此，计算循环中每一行的三角形数，并有一个嵌套循环打印`+`多次，然后打印所需数量的`0`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T02:48:52.807

我认为这不值得-1。初学者问题不等于一个坏问题。

至于问题本身。您必须先仔细识别模式，然后用简单的英语说出它。模式很简单。

> 从 1 个十字和 0 个零开始。对于每次迭代，从 2 个单位的增长开始，将十字架的增长增加 1（所以它是 +1、+2、+3...），从 1 个单位开始将零的增长增加 1。

现在将其放入伪代码中，然后对其进行编码。**一定要先了解这些模式**。我不能强调这一点。直接进入编码不会帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T02:49:11.027

首先，您需要能够识别模式，然后您需要能够对其进行编码。

我要冒个险，建议你把这个问题的两个“步骤”混合在一起，所以让我们在划分它们时非常具体。

```
The (parenthesis) items are the _additional_ elements.

index 0 : +
index 1 : +(++)(0)
index 2 : +++(+++)0(0)
index 3 : ++++++(++++)00(0) 
```

所以一个很好的猜测是该模式可以描述为：

```
the previous number of +'s (and index + 1 more), 
followed by the previous number of 0's (and one more). 
```

结合

```
index 0 is "+" 
```

您可能想根据这个“规则”计算索引 4、5 和 6，看看它是否正确地描述了模式。

现在你有了模式，你真的只需要两个变量，`+`符号的数量和`0`s 的数量。您可以从前一个计算“下一个”。编码不应该太难，但如果是这样，那么在另一个问题中发布您的程序和该程序的“新”问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-17T02:51:32.190

```
public class Answer {
    public static void main(String[] args) {
        int plusCount = 1;
        for(int i=0; i<200; i++) {
            for(int j=0; j<plusCount; j++) {
                System.out.write('+');
            }
            plusCount += i+2;
            for(int j=0; j<i; j++) {
                System.out.write('0');
            }
            System.out.println();
        }
    }
} 
```

# jquery - 使用 jQuery 的 MVC 和通用编辑功能

> ID：13427131
> 
> 赞同：0
> 
> 时间：2012-11-17T02:38:26.830
> 
> 标签：jquery, asp.net-mvc, razor, kendo-ui

是否可以在可在派生的部分之间共享的剃刀部分中创建一个 js 对象和一些函数？

我想做类似的事情......

```
_BasePartial
{
   define something using js
}

...

_DerivedPartial:_BasePartial
{
   update something js
   cause _base to act on something js
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T02:54:38.110

在 BasePartial 和 DerivedPartial 视图中定义的 JS 最终在相同的页面上下文中执行，因此您的用例应该没有问题。例如：

```
_BasePartial:
    var something = { someVar: 2 };

    function doSomething() {
        printSomething(); //Defined on the derived view
    }

_DerivedPartial :
    function updateSomething() {
        something.someVar = 4;

        doSomething(); //Defined on the base view, should output "4" on the console
    }

    function printSomething() {
        console.log(something.someVar);
    }

SomewhereInThePage :
    //Just make sure that the BasePartial JS was executed when calling the 
    // function defined on the derived view
    updateSomething(); 
```

# database - scalaquery 中的不同开发/生产数据库

> ID：13427132
> 
> 赞同：2
> 
> 时间：2012-11-17T02:38:34.543
> 
> 标签：database, scala, scalaquery

ScalaQuery 要求 (AFAIK) 在您的代码中使用提供程序特定的导入，例如：

```
import org.scalaquery.ql.extended.H2Driver.Implicit._ 
```

我们正在尝试在开发模式中使用 H2，在生产中使用 MySQL。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T03:18:59.127

我的方法是：

```
class Subscribers(database: Database)(profile: ExtendedProfile) {
    import profile.Implicit._
} 
```

订阅者基本上是我的数据访问对象。不确定这是最好的方法。它解决了我的情况。

您将创建这样的 DAO，例如：

...在生产代码中：

```
new Subscribers(database)(MySQLDriver) 
```

...在测试代码中：

```
new Subscribers(database)(H2Driver) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T02:46:18.077

我在 playframework 中使用以下内容

```
object test {
  lazy val extendedProfile = {
    val extendedProfileName = Play.configuration getString "db.default.extendedProfile" get
    companionObjectNamed(extendedProfileName).asInstanceOf[ExtendedProfile]
  }

  def companionObjectNamed(name: String) : AnyRef = {
    val c = Class forName (name + "$")
    c.getField("MODULE$") get c
  }
} 
```

然后导入

```
import util.extendedProfile.Implicit._ 
```

`org.scalaquery.ql.extended.MySQLDriver`是我在配置中用来使 mysql 工作的字符串。

# java - charAt 方法和字符串

> ID：13427133
> 
> 赞同：1
> 
> 时间：2012-11-17T02:38:52.163
> 
> 标签：java, string

这行程序假设测试一个字符串以确保它是 5 个字符并且以字符“u”开头。现在只是测试字符串是否是5个字符而不是测试的第二部分？

```
String UID;
        do {
            System.out.println("Enter the Student's UID in the form of u####");
            UID = input.nextLine();
            if (UID.length() != 5) {
                System.out.println("INCORRECT INPUT");
            }
        } while (UID.length() != 5 && UID.charAt(0) != 'u');
        return UID;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T03:27:07.713

您可以大大简化：

```
while (true) {
    System.out.println("Enter the Student's UID in the form of u####");
    String UID = input.nextLine();
    if (UID.length() == 5 && UID.charAt(0) == 'u') {
        return UID;
    }
    System.out.println("INCORRECT INPUT");
} 
```

甚至更进一步

```
...
if (UID.matches("u....")) {
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T02:50:30.757

您应该按如下方式更改您的条件检查：

```
do {
    //... 
    if(UID.length() != 5 || UID.charAt(0) != 'u') {
        //incorrect input
    }
} while(UID.length() != 5 || UID.charAt(0) != 'u');
//continue until either of the conditions is true 
```

而且您不需要循环本身内部的检查。

IMO，最好只进行一次条件检查

```
while(true) {
    //... 
    if(UID.length() != 5 || UID.charAt(0) != 'u') {
        //incorrect input
    } else {
        break;
    }
} 
```

您也可以使用该[`String.startsWith(String)`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#startsWith%28java.lang.String%29)方法。

# android - 我想让倒数计时器在android中连续循环 - 需要关于如何做到这一点的意见

> ID：13427134
> 
> 赞同：3
> 
> 时间：2012-11-17T02:39:02.103
> 
> 标签：android, loops, timer, countdown, continuous

有没有办法连续循环通过倒数计时器？我有一个基本计时器，经过 60 秒，然后更新一个文本字段并且它正在工作，但我想添加功能：当它倒计时时，自动重新启动直到用户取消它？也许通过线程运行它？不知道如何处理。这就是我所拥有的，同样，这段代码有效，但我只能停止和启动倒数计时器，不能进行连续循环：

```
cdt = new CountDownTimer(60000,1000) {
    public void onTick(long millisUntilFinished) { 
        tvTimer.setText("remaining : " + millisUntilFinished/1000 + " secs");
    }
     public void onFinish() { 
       tvTimer.setText("");
       bell.start(); 
     }
 };

 /***************On Click/Touch Listeners*******************/
 btnNext.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
        tvTimer.setText("");
        btnStart.setText("Start Timer");
        SetImageView2(myDbHelper); 
        cdt.cancel(); 

       }
    });

    btnStart.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
        if (!TimerTicking){ 
          cdt.start();
          btnStart.setText("Stop Timer");
        }
        else { 
            tvTimer.setText("");
            cdt.cancel();
            btnStart.setText("Start Timer");

        }
       }
    }); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-17T02:42:26.283

循环 CountDownTimer的一种非常基本的方法是调用`start()`.`onFinished()`

```
public void onFinish() {
    ...
    start();  // Start this timer over
} 
```

（确保在执行此操作时取消 CountDownTimer，`onPause()`否则计时器可能会泄漏并继续在后台触发......哎呀。）

然而 CountDownTimers 有根本的缺陷（在我看来）：它经常跳过最后一次调用`onTick()`并且每次调用它都会增加几毫秒...... :(我在[上一个问题](https://stackoverflow.com/a/12762416/1267661)`onTick()`中重写了 CountDownTimer以更准确并调用*每个*刻度.

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-20T06:53:51.130

CountDownTimer() 构造函数的第一个值，即运行的总时间，很长，可以保存接近 3 亿年的值。对于大多数移动应用程序来说，这应该足够长了。:-)

所以只需调用它`cdt = new CountDownTimer(Long.MAX_VALUE, 1000)`一秒钟的循环，它将连续运行。*

# ruby-on-rails - Rails路由，匹配短网址？

> ID：13427142
> 
> 赞同：0
> 
> 时间：2012-11-17T02:41:24.853
> 
> 标签：ruby-on-rails, routes

我有一个问题，我创建了一个用于匹配短令牌（如 url）的路由，如下所示：

```
myapp.com/a2c3b 
```

我通过使用这样的路线来做到这一点：

```
match '/:id' => 'items#show', :as => "show_item", :via => :get, :constraints => { :id => /[a-z0-9]{5}/ } 
```

但问题是现在我的其他路线`/admin`不起作用，因为它也有 5 个字符，我该如何解决这个问题，让两种路线都起作用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T02:51:04.677

将您在此路线之前匹配的所有路线放入文件中......也就是说......

```
match '/admin'....
match '/login'....
match '/:id' => 'items#show', :as => "show_item", :via => :get, :constraints => { :id => /[a-z0-9]{5}/ } 
```

# iphone - 如何按特定日期打开和阻止视图控制器

> ID：13427146
> 
> 赞同：1
> 
> 时间：2012-11-17T02:42:35.877
> 
> 标签：iphone, ios, xcode, sdk

我想使用设备上的本地日期在我的 iphone 应用程序中打开和阻止视图控制器。例如，我希望该视图在 2012 年 12 月 1 日至 2012 年 12 月 31 日之间可用，如果用户在这些日期之前或之后点击链接到该视图的按钮，他/她将有一个警报视图告诉他们该视图不可用。基本上类似于本地通知的东西，是否可以做类似的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T03:08:49.157

设置按钮以使用 IBAction 调用以下代码：

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
dateFormatter.dateFormat = @"dd-MMM-yy";

NSDate *dec1 = [dateFormatter dateFromString:@"01-Dec-12"];
NSDate *jan1 = [dateFormatter dateFromString:@"01-Jan-13"];

NSDate *today = [NSDate date];

if( ([today compare:dec1] == NSOrderedDescending ) && ( [today compare:jan1] == NSOrderedAscending ) ) {
    // Go to View Controller
}
else {
    // Show AlertView
} 
```

# .net - Windows.Forms.Form.HelpButton 的用途和约定是什么？

> ID：13427147
> 
> 赞同：1
> 
> 时间：2012-11-17T02:42:47.063
> 
> 标签：.net, winforms

我想为我的 Windows 窗体应用程序的用户提供一个简单的帮助系统，并且我正在尝试确定最佳实施方式。一位用户建议使用其他类似应用程序中提供的帮助按钮。

我知道这个特定的属性是用来启用帮助按钮的，但在更高的层次上，这为应用程序开发人员提供了什么？下面 MSDN 链接中的示例仅启用该按钮。

[http://msdn.microsoft.com/en-us/library/system.windows.forms.form.helpbutton.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.helpbutton.aspx)

在我看来，这背后必须有一个文档方法。我可能会出现一个工具提示或类似的东西，其中包含有关正在使用的表单的一些信息等。我注意到，如果最小化和最大化按钮可见，则此功能不可用，因此仅在某些情况下可用，例如固定大小对话框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T08:29:23.607

它可以在对话框中为用户提供帮助。将 MinimizeBox 和 MaximizeBox 属性设置为 False 以使按钮可见。将 HelpProvider 拖放到表单上。它为每个控件添加了三个属性。

最简单的使用方法是设置 HelpString 属性。试一试，注意单击帮助按钮然后单击控件时会发生什么。单击后，您将看到光标发生变化，并在工具提示中弹出 HelpString。使用它的更复杂的方法是通过 HelpKeyword 属性，适用于您编写帮助文件时。这使您可以自动打开与单击的控件匹配的相关帮助主题的帮助窗口。

它不再被太多使用。它只能在对话中工作的限制是一个相当尴尬的限制。

# php - 从 xmlhttprequest 调用时，php 文件未运行

> ID：13427155
> 
> 赞同：2
> 
> 时间：2012-11-17T02:44:14.237
> 
> 标签：php, javascript, ajax

当使用 XMLHttpRequest 由 javascript 调用时，我的 php 文件 (login.php) 运行时遇到问题。当我从 url 运行 php 文件时，它工作正常，但似乎没有被 XMLHttpRequest 调用。我对此很陌生，并且正在努力使其正常工作。

javascript 文件只是获取用户名和密码，并将它们作为参数发送到 url 中的 php 文件。Php 文件日志检查数据库是否正确组合。

我的 Javascript 文件：

函数登录（）{

```
if (window.XMLHttpRequest)
{
    xmlhttp = new XMLHttpRequest();
}
var usename = document.getElementById("userName").value;
var password = document.getElementById("password").value;

var url = "login.php?q=" + usename + "&x=" + password;
xmlhttp.open("POST", url, false);
xmlhttp.setRequestHeader('Content-Type','application/x-www-form-urlenclosed');
xmlhttp.onreadystatechange = function() {
                        if (xmlhttp.readyState == 4){
                            alert("GOOD");
                        }}
xmlhttp.send(url);
alert(url + xmlhttp.status);
}

function logInClick(){
    logIn();
}

window.onload = function() {
    document.getElementById("AboutMe").onclick=aboutMessage;
    document.getElementById("ContactMe").onclick=contactMessage;
    document.getElementById("submitButton").onclick=logInClick;
} 
```

我的 PHP 文件：

```
 <?php
$host="localhost";
$username="root";
$password="";
$db_name="website";
$tbl_name="users";

mysql_connect("$host","$username","$password")or die("Cannot Connect");
mysql_select_db("$db_name")or die("Cannot Select DB");

$inputUserID=$_POST['q'];
$inputPassword=$_POST['x'];
//$encrpytedPassword=md5($inputPassword);

$inputUserID = stripslashes($inputUserID);
$inputPassword = stripslashes($inputPassword);
$inputUserID = mysql_real_escape_string($inputUserID);
$inputPassword = mysql_real_escape_string($inputPassword);

$sql = "SELECT * FROM $tbl_name WHERE userID='$inputUserID' and Password='$inputPassword'";
$result=mysql_query($sql);

$count=mysql_num_rows($result);

if ($count==1){

    session_start();
    $_SESSION['userID']=$inputUserID;
    //change this at some point
    header("location:regularUserLoggedIn.html");

} else {
    header("location:www.yahoo.com");
}
?> 
```

任何帮助都会很棒。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T02:50:47.890

PHP 脚本的第一行是标题。脚本的执行在 header 之后停止。尝试删除该行，然后先回显您在服务器上获得的内容..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T03:01:47.317

The first line of your php code redirects to another page. The result of the javascript returns will be the redirected page content rather than the outputted content of your code.

P.S. Your javascript code has security issues that others can steal the passwords easily.

# php - “迭代”单个对象或 php 对象的等效索引

> ID：13427157
> 
> 赞同：8
> 
> 时间：2012-11-17T02:44:17.403
> 
> 标签：php, arrays, object

我可以到达我要去的地方，但我想要最漂亮的路。

导致我来到这里的原因是研究运行一个函数的最佳方法，该函数返回一组对象，例如`$dom->getElementsByTagName()`or`$pdo->query('SELECT itcher FROM scratches')`然后 - 知道它只会有一个结果 - 访问该结果。

我做了一些研究，但我想知道我知道所有要知道的。

`foreach`或者任何迭代多个*事物*的东西从美学的角度来看都是愚蠢的，因为我知道只有一个。将它转换为数组感觉就像一个瑕疵，我想开始我的代码。到目前为止，我最喜欢的一个是`$object->{'0'}`因为它与我发现的一样接近`$object[0]`，但它似乎并不适用于所有情况。有没有更漂亮的东西可以看？例如，`foreach($key as $val)`当将 $key 设置为 $val 时，每次迭代到底在做什么？我可以自己做吗？

`getElementsByTagName`也许我没有在脑海中正确地想象一个对象的想法，但是对于mysql 查询返回*数组*不是更有意义吗？他们为什么不呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T04:27:25.267

> 例如，当将 $key 设置为 $val 时，foreach($key as $val) 在每次迭代中到底做了什么？我可以自己做吗？

如果它真的是一个数组，你可以用`reset()`.

如果它是一个`Iterator`（用于允许`foreach`访问对象），那么您应该能够使用`$object->current();`

我从来没有真正看过底层代码`foreach`- 然而`reset()`，`current()`似乎类似于`foreach`在迭代开始时会“做什么”。

不幸的是，您引用的两个示例是内部类，并且[根据文档](http://us1.php.net/manual/en/class.traversable.php)内部类（属于语言或扩展的类）不遵循相同的规则：

> 实现此接口的内部（内置）类可以在 foreach 构造中使用，不需要实现 IteratorAggregate 或 Iterator。

也就是说，任何返回可以迭代的对象的用户类都`foreach`应该是一种`Traversable`类型（`foreach`需要什么），所以我相信`current()`应该按照你想要的方式工作。请注意，如果对象实际实现`IteratorAggregate`而不是`Iterator`，则必须使用`getIterator()->current()`.

但是，仍然可以使用您的两个示例 - 只需使用特定于这些返回类型的方法。在 的情况下`getElementsByTagName()`，您可以使用`getElementsByTagName->item(0)`，在 PDO 的情况下，您可以使用`query()->fetch()`。

# .net - 在 VS 2010 中使用 FsCheck

> ID：13427160
> 
> 赞同：1
> 
> 时间：2012-11-17T02:45:23.140
> 
> 标签：.net, visual-studio-2010, f#, fscheck

我正在尝试在 Visual Studio 2010 中为 F# 使用 FsCheck 0.8.3。我创建了一个项目，并编写了示例行：

```
let revRevIsOrig (xs:list<int>) = List.rev(List.rev xs) = xs 
```

从快速入门指南。在此之后，我将 FsCheck.dll 添加到引用中，并且

```
open FsCheck 
```

在顶部。

跑步时，我收到

> 未定义命名空间或模块“FsCheck”

如果答案很明显，请原谅我，但我很新，不明白为什么这不起作用。

# ios - 如何找出一个人的父组？

> ID：13427161
> 
> 赞同：3
> 
> 时间：2012-11-17T02:45:45.920
> 
> 标签：ios, addressbook

在 MAC 平台上，ABPerson 类有一个 parentGroups 属性，它告诉我们这个人属于哪些组。但是在IOS平台上，没有这样的方法或属性..

如何找出一个人的父组？我需要一个一个地搜索所有组吗？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-17T03:08:19.283

另一个线程提到了 ABPersonCopyParentGroups - 但这是**错误**的-na 在 ios 上。

没有 api 调用，因此需要直接执行此操作

```
ABRecordRef personToFind = ....
ABRecordID id = ABRecordGetRecordID(personToFind);

NSArray *groups = (__bridge_transfer NSArray*)ABAddressBookCopyArrayOfAllGroups(bookRef);
for(ABGroupRef group in groups) {
    NSArray *members = (__bridge_transfer NSArray*)ABGroupCopyAllMembers(group);
    for(ABRecordRef member in members) {
        if(id == ABRecordGetRecordID(member){
            NSLog(@"found in group %@!", ABGroupCopyProperty(group, kABGroupName);
            break;
        }
    }            
} 
```

*内联输入，不保证——可能有错别字！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-30T09:51:19.633

我很难使用 Daij-Djan 答案，所以我重写了它：

```
CFArrayRef groupsRef = ABAddressBookCopyArrayOfAllGroups(myAddressBook);
if(groupsRef) {
    NSUInteger groupsCount = CFArrayGetCount(groupsRef);

    for(NSUInteger idx = 0; idx < groupsCount; ++idx) {
        ABRecordRef groupRef = CFArrayGetValueAtIndex(groupsRef, idx);
        ABRecordID groupID = ABRecordGetRecordID(groupRef);
        CFArrayRef membersRef = ABGroupCopyArrayOfAllMembers(groupRef);
        if(membersRef) {
            NSUInteger membersCount = CFArrayGetCount(membersRef);

            for(NSUInteger idx = 0; idx < membersCount; ++idx) {
                ABRecordRef memberRef = CFArrayGetValueAtIndex(membersRef, idx);
                ABRecordID memberID = ABRecordGetRecordID(memberRef);

                // your code
            }
            CFRelease(membersRef);
        }
    }
    CFRelease(groupsRef);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-16T06:31:28.890

我扫描其中的所有组和人员，并将人员记录 ID 和组记录 ID 保存到 NSDictionary。我保留这个 NDDictionary 直到应用程序消失，所以只需要在这个 NSDictionary 中查找人的组 ID。

```
NSMutableDictionary *dic = [NSMutableDictionary dictionary];
CFArrayRef allGroup = ABAddressBookCopyArrayOfAllGroups( AddressBookManager.addressBook );

CFIndex nGroup = ABAddressBookGetGroupCount(AddressBookManager.addressBook);

NSMutableArray *array = [[NSMutableArray alloc] init];
for (CFIndex index = 0; index < nGroup; index ++) 
{
    ABRecordRef group = CFArrayGetValueAtIndex(allGroup, index);
    ABRecordID groupID = ABRecordGetRecordID(group);

    CFArrayRef allPeople = ABGroupCopyArrayOfAllMembers(group);

    CFIndex nPeople = CFArrayGetCount(allPeople);
    for( CFIndex personIndex = 0; personIndex < nPeople; personIndex++ )
    {
        ABRecordRef person = CFArrayGetValueAtIndex( allPeople, personIndex );
        ABRecordID personID = ABRecordGetRecordID(person);

        NSNumber *value = [NSNumber numberWithInt:groupID];
        NSString *key = [NSString stringWithFormat:@"%d", personID];
        [dic setValue:value forKey:key];
    }
    CFRelease(allPeople);
} 
```

# bash - 理解 bash 中的 $' ' 引号

> ID：13427163
> 
> 赞同：5
> 
> 时间：2012-11-17T02:46:10.863
> 
> 标签：bash, syntax, quotes

至少在 bash 模式替换中经常使用以下引号：`$' '`例如`${arr[@]/%/$'\n\n\n'}`在每个数组“arr”项之后打印三个换行符。这些是某种特殊的报价吗？他们怎么称呼？除了 bash 模式替换之外，它们还用在哪里？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-17T02:48:59.437

[ANSI-C 引用](http://www.gnu.org/software/bash/manual/bashref.html#ANSI_002dC-Quoting)

> 形式的词`$'string'`被特殊对待。该单词扩展为字符串，并按照 ANSI C 标准的规定替换反斜杠转义字符。

* * *

例如：

```
$'hello\nworld' 
```

你会得到中间`11`有**换行符**的字符。

* * *

```
echo -e 'hello\nworld'
echo   $'hello\nworld' 
```

他们给你同样的结果。

# c++ - 排序数组/文件 I/O C++

> ID：13427168
> 
> 赞同：4
> 
> 时间：2012-11-17T02:47:35.843
> 
> 标签：c++, arrays, io

我想知道是否有人可以帮助我对这个数组进行排序，我对如何在这个项目中准确地实现它有点迷茫。因为它是硬件，所以不要透露整个答案，而是将我推向正确的方向。项目如下： 编写一个程序，读取一行文本并输出文本中出现的所有字母的列表以及每个字母在该行中出现的次数。以用作标记值的句点结束该行。字母应按以下顺序使用：从最高到最低。假设输入全部使用小写字母。几个问题。1.我在对数组进行排序时是否正确？2.在将排序数组放入我的代码之前，当代码编译时，它会出现一个空白屏幕。有什么办法可以解决这个问题？

如果写得不好，请致歉，并提前感谢您的帮助！

```
inlcude <iostream>
#inlcude <fstream>
using namespace std;
void initialize(int list[]);
void Sort(int list[],int& num);
void characterCount(char ch, int list[]);
void readText(ifstream& intext, char& ch, int list[]);
void totalCount(int list[]);
int main()
{
int index,letterCount[26];
char ch;
ifstream inFile;

infile.open("C:/temp/Data_Chapter_7_8.txt");

if (!inFile)
{
   cout << " Cannot open file." <<endl;
}
initialize(letterCount);
infile.get(ch);

while (inFile)
{
  int index;
  readText(inFile,ch,letterCount)
  index++;
  inFile.get(ch);
  }
  totalCount(index, letterCount);

  inFile.close();

  system("PAUSE");
  return 0;
  }
  //initializes array letterCount to 0
  void initialize(int list[])
  {
 for(int x = 0;x<26;x++)
 list[x] = 0
 }
 //increments the letter count. Makes sure counting letters.
 void characterCount (char ch, int list[])
 {
 int index;
 ch = tolower(ch);
 if(static_cast<int>(ch)>=97&&(static_cast<int>(ch)<=122))
  letterCount[static_cast<int>(ch)-97]++;  
  }
  void readText(ifstream& intext, char& ch, int list[])
  { 
  while (ch != '.')
  {
  characterCount (ch,list);
  intext.get(ch);
  }
  }
  //displays data
  void totalCount(int list[])
  {
 for(int x=0;x<26;x++)
 if(letterCount[x]>0)  
 cout<<static_cast<char>(x+97)<<" "<<letterCount[x]<<endl;
 }
 void Sort(int list[],int& num)
      {
 int i,j,flag = 1;
 int temp;
 int numLength = num.length();
 for (i=1;(i<=numLength)&&flag; i++)
 {
     flag = 0;
     for (j=o; j<(numLength-1);j++0
     {
         if(num[j+1]>num[j])
         {
             temp = num[j];
             num[j] = num[j+1];
             num[j+1]=temp;
             flag = 1;
         }
     }
 }
             return;
             } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T02:55:35.880

我们可以简单地跟踪每个字母出现的次数，而不是使用混乱的冒泡排序和其他有趣的东西，因为只有 26 种可能性。这应该会导致代码更简洁（并且更快）：

```
int numOccur[26];
...
for (int i = 0; i < numCh; i ++)
    numOccur[letters[i] - 'a'] ++;
for (i = 25; i >= 0; i --)
    if (i > 0)
        cout<<static_cast<char>(i+97)<<" "<<numOccur[i]<<endl; 
```

当然，您应该用适当的文件读取循环替换 for 循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T03:01:59.093

Just a few comments.

1.  I don't see any good reason for most of the casting here.
2.  Use `isalpha`, `isupper` or `islower` to check for letters, and `tolower` or `toupper` to covnert them (Note: using these functions is one of the few justifications for casting).
3.  Probably easiest to initialize your `lettercount` array with `int lettercount[26] ={0};
4.  Unless you're absolutely required to write your own sort routine, just use `std::sort`.
5.  It's usually easiest to open a file as you define your ifstream: `std::ifstream infile("whatever");`
6.  Don't use `while (infile)`. It's pretty much a guaranteed bug. Do a read, and check whether it succeeded, like: `while (infile.get(ch)) ...`

# java - 在空的 JTextField 中按下退格键时禁用哔声

> ID：13427174
> 
> 赞同：1
> 
> 时间：2012-11-17T02:48:04.437
> 
> 标签：java, jtextfield, backspace, beep

初学者在这里。有没有人知道在按下退格键且字段为空时让 JTextField 不发出哔哔声的快速简便的方法？我在网上看到了一些关于更改 DefaultEditorKit 的内容，但我无法理解。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-02-20T21:21:23.087

这段代码对我有用。

```
Action beep = textArea.getActionMap().get(DefaultEditorKit.deletePrevCharAction);
beep.setEnabled(false); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T03:45:13.123

**编辑：**我稍后会提出另一个答案，这可能更容易做到。我会先读那个。

您可以尝试覆盖 JTextField 的[processKeyEvent](http://docs.oracle.com/javase/6/docs/api/javax/swing/JComponent.html#processKeyEvent%28java.awt.event.KeyEvent%29 "进程键事件")方法并检查 1.) 按下的键是否是退格键和 2.) JTextField 是否为空。如果其中任何一个为假，那么它应该表现正常。否则，您可以从该方法返回。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T04:05:20.423

我还没有机会尝试这个，但你也许可以禁用哔声动作。

```
JTextField field = new JTextField();
Action action;
a = field.getActionMap().get(DefaultEditorKit.beepAction);
a.setEnabled(false); 
```

# php - PHP 获取带参数的 URL

> ID：13427177
> 
> 赞同：35
> 
> 时间：2012-11-17T02:48:27.843
> 
> 标签：php

我想获取一个 URL 及其参数。例子：

```
www.someweb.com/somepage.php?id=10 
```

怎么才能得到`somepage.php?id=10`？

我已经尝试过了`REQUEST_URI`，`PHP_SELF`但它只给了我`www.someweb.com/somepage.php`or `somepage.php`。我想要的只是页面名称及其参数。

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-11-17T03:10:29.337

```
basename($_SERVER['REQUEST_URI']); 
```

这将返回所有带有页面名称的 URL。（例如：）`index.php?id=1&name=rr&class=10`。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2015-11-23T17:29:07.747

对于带有协议、服务器名和参数的完整 URL：

```
 $base_url = ( isset($_SERVER['HTTPS']) && $_SERVER['HTTPS']=='on' ? 'https' : 'http' ) . '://' .  $_SERVER['HTTP_HOST'];
 $url = $base_url . $_SERVER["REQUEST_URI"]; 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-11-17T02:51:04.550

`$_SERVER['PHP_SELF']`对于页面名称和`$_GET['id']`特定参数。

尝试`print_r($_GET);`打印出所有参数。

为您的要求`echo $_SERVER['PHP_SELF']."?id=".$_GET['id'];`

返回所有参数`echo $_SERVER['PHP_SELF']."?".$_SERVER['QUERY_STRING'];`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-17T02:58:43.093

```
function curPageName() {
 return substr($_SERVER["SCRIPT_NAME"],strrpos($_SERVER["SCRIPT_NAME"],"/")+1);
}
echo "The current page is ".curPageName()."?".$_SERVER['QUERY_STRING']; 
```

这将为您获取页面名称，它将获取最后一个斜杠之后的字符串

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-17T02:59:58.470

这可能是您要查找的内容：[php-get-url-query-string](https://stackoverflow.com/questions/8469767/php-get-url-query-string)。您可以将其与其他建议的`$_SERVER`参数结合使用。

# asp.net - 如何在 Button OnClick 期间获取鼠标的位置

> ID：13427187
> 
> 赞同：0
> 
> 时间：2012-11-17T02:50:06.753
> 
> 标签：asp.net

```
protected void lbkShowWork_Click(object sender, EventArgs e)
{
} 
```

单击时如何获取鼠标的位置`LinkButton`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T03:01:25.223

简短的回答：你不能。`<form>`ASP.NET WebForm 的事件是 HTTP POST 操作之上的抽象。Web 浏览器不提交光标的坐标。

长答案：有可能，根据您的情况使用各种方法。“最简单”的方法是使用像 jQuery 这样的框架并为页面上的每个元素处理客户端鼠标单击事件，当单击鼠标时，您会拦截表单的`onsubmit`操作并使用坐标更新 an`<input type="hidden" />`然后让表单提交继续。

...或使用`<input type="image" />`提交时包含坐标的[http://dev.w3.org/html5/markup/input.image.html](http://dev.w3.org/html5/markup/input.image.html)

当然，您的代码假设用户开始使用鼠标。还有其他没有指点设备的网络用户代理，如智能手机、触摸平板电脑和蜘蛛。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T03:19:59.830

**在mousemove**事件中从客户端捕获鼠标位置（如上一个答案中所述）并保留在隐藏字段中。

```
$(document).ready(function () {
    $(document).mousemove(function (event) {
        var currentPos = "X:" + event.pageX;
        currentPos += ",Y:" + event.pageY;
        $("#hdMousePosition").val(currentPos);
    });            
}); 
```

# c# - 如何在不打开新标签的情况下从 .ashx 文件重定向/传输？

> ID：13427195
> 
> 赞同：1
> 
> 时间：2012-11-17T02:51:29.577
> 
> 标签：c#, asp.net, redirect, ashx

我对以前没有开发过的网站进行了一些更改。通过 go.ashx 页面打开的所有链接以验证它是否已被登录用户使用.. 当 .ashx 验证用户时打开 URL 通过`context.Response.Redirect(url, true);`这会打开一个新选项卡，我如何使它只是一个没有新标签？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T10:19:50.603

我认为问题可能出在链接上

```
<a href="target URL" target="new">anchor text</a> 
```

甚至

```
<a href="target URL" target="_blank">anchor text</a> 
```

它应该像

```
<a href="target URL" target="_self">anchor text</a> 
```

目标应该是自己。
如果您可以发布您的链接，那么它可能会有所帮助。

# ms-access - 如何重新查询表单内的子表单？

> ID：13427201
> 
> 赞同：1
> 
> 时间：2012-11-17T02:53:21.927
> 
> 标签：ms-access, vba

我遇到了一个问题，我无法在 Access 中重新查询表单内的子表单。

表单的名称是 frmSearch 子表单的名称是 SearchResults

我试过了

```
Private Sub Command38_Click()

Me!SearchResults.Form.Requery (or)
Me.SearchResults.Form.Requery

End Sub 
```

我的表单和子表单如下所示：

![在此处输入图像描述](../Images/31eb67dfdce240fa88ccbaba97454a27.png)

为了清楚起见，我使用“搜索”按钮来创建一个包含文本框和组合框值的字符串。此字符串创建一个名为 qryTrialQuery 的 SQL 查询。然后我的子表单查询 qryTrialQuery 并在下表中生成结果。

我希望能够按下搜索按钮，然后结果会立即出现在其下方。问题是，除非我关闭并重新打开表单，否则结果不会出现。

感谢您提前提供的所有帮助。

* * *

**更新**

以下是我用来从文本框和组合框值创建查询的代码。

```
LineOne = "SELECT tblPoolPersonnel.LName, tblPoolPersonnel.FName, tblPoolPersonnel.[Tel Natel], tblPoolPersonnel.[Tel Home], tblPoolPersonnel.Email" & vbCrLf
LineTwo = "FROM (tblPoolPersonnel INNER JOIN tblDayAvailable ON tblPoolPersonnel.Code_Personal = tblDayAvailable.Code_Personal) INNER JOIN tblServiceYES ON tblPoolPersonnel.Code_Personal = tblServiceYES.Code_Personal" & vbCrLf
LineThree = "WHERE (((tblServiceYES.Service)=" & comboService & ") AND ((tblDayAvailable.Availability)=True) AND ((tblDayAvailable.Date)=" & txtDate & ") AND ((tblDayAvailable.CodeHoraire1)=" & comboCodeHoraire & "));"

Set qdf = CurrentDb.QueryDefs("myQuery")
Application.RefreshDatabaseWindow
strSQL = LineOne & LineTwo & LineThree
qdf.SQL = strSQL
qdf.Close
Set qdf = Nothing
Set dbs = Nothing 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T06:56:15.487

假设您正在根据用户选择的条件重建查询的 SQL，您应该能够执行以下操作：

```
Private Sub Command38_Click()
    Dim qryTrialQuery as String
    ...
    ' code to construct the SQL SELECT statement for the query, '
    ' based on the criteria the user entered                    '
    ...
    SubForm.Form.RecordSource = qryTrialQuery
End Sub 
```

设置子表单`RecordSource`将刷新数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T05:09:19.413

你可以试试这个：

```
Dim frm as Form
Set frm = frmSearch
frmSearch!SearchResults.Form.Requery 
```

# android - 不可移除的通知

> ID：13427204
> 
> 赞同：20
> 
> 时间：2012-11-17T02:53:38.163
> 
> 标签：android, notifications, android-notification-bar

在我的应用程序中，有服务在后台运行。我想通知用户该服务正在运行。但是我需要该用户不能删除通知-在通知栏中按清除按钮或将其滑出

![在此处输入图像描述](../Images/ecd9a759a82acded4487548d9992de68.png)

这意味着我需要在通知区域上方显示我的通知

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-11-17T03:22:18.057

这是可能的，但您实现它的方式取决于您开发的 API 级别。

对于低于 11 的 API 级别，您可以设置[Notification.FLAG_NO_CLEAR](http://developer.android.com/reference/android/app/Notification.html#FLAG_NO_CLEAR)。这可以像这样实现：

```
// Create notification
Notification note = new Notification(R.drawable.your_icon, "Example notification", System.currentTimeMillis());

// Set notification message
note.setLatestEventInfo(context, "Some text", "Some more text", clickIntent);

// THIS LINE IS THE IMPORTANT ONE            
// This notification will not be cleared by swiping or by pressing "Clear all"
note.flags |= Notification.FLAG_NO_CLEAR; 
```

对于 11 以上的 API 级别，或者使用[Android Support Library](http://developer.android.com/tools/extras/support-library.html)时，可以这样实现：

```
Notification noti = new Notification.Builder(mContext)
    .setContentTitle("Notification title")
    .setContentText("Notification content")
    .setSmallIcon(R.drawable.yourIcon)
    .setLargeIcon(R.drawable.yourBigIcon)
    .setOngoing(true) // Again, THIS is the important line
    .build(); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-04-03T09:50:24.313

要创建不可移除的通知，只需使用**setOngoing (true);**

```
NotificationCompat.Builder mBuilder =
                         new NotificationCompat.Builder(this)

                        .setSmallIcon(R.drawable.ic_service_launcher)

                        .setContentTitle("My title")

                        .setOngoing(true)  

                        .setContentText("Small text with details"); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-17T03:21:40.577

听起来像[Notification.FLAG_NO_CLEAR](http://developer.android.com/reference/android/app/Notification.html#FLAG_NO_CLEAR)或[Notification.FLAG_ONGOING_EVENT](http://developer.android.com/reference/android/app/Notification.html#FLAG_ONGOING_EVENT)是您正在寻找的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-06-04T10:27:29.993

要创建不可移除的通知，只需使用 setOngoing (true);

要创建可移动通知，只需使用 setOngoing (false);

# android - Android Twitter Oauth 获取网名

> ID：13427205
> 
> 赞同：3
> 
> 时间：2012-11-17T02:53:40.660
> 
> 标签：android, twitter, oauth, twitter-oauth

在 android 中使用 oauth 登录 twitter 后，我想知道我的网名。

```
@SuppressLint("NewApi")
    private void Authorize()
    {
        try {
            Consumer = new CommonsHttpOAuthConsumer(CONSUMER_KEY, CONSUMER_SECRET);
            Provider = new CommonsHttpOAuthProvider("http://twitter.com/oauth/request_token", "http://twitter.com/oauth/access_token", "http://twitter.com/oauth/authorize");
            StrictMode.enableDefaults();
            String authUrl = Provider.retrieveRequestToken(Consumer, CALLBACK_URL);
            Toast.makeText(this, "Please authorize this app!", Toast.LENGTH_LONG).show();
            startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse(authUrl)));
        } catch (Exception e) {
            Toast.makeText(this, e.getMessage(), Toast.LENGTH_LONG).show();
        }
    }

@Override
    protected void onResume() {
        super.onResume();
        try
        {           
            Uri uri = this.getIntent().getData();  
            if (uri != null && uri.toString().startsWith(CALLBACK_URL)) {
                String oauth_verifier = uri.getQueryParameter(OAuth.OAUTH_VERIFIER);
                Consumer.setTokenWithSecret(Consumer.getToken(),Consumer.getTokenSecret());
                Provider.retrieveAccessToken(Consumer, oauth_verifier);
                HttpParameters params1 = Provider.getResponseParameters();
                String userName = params1.getFirst("screen_name");
                Toast.makeText(this, "user name >>>>>>>>" + userName, Toast.LENGTH_LONG).show();
            }
        } catch (Exception e) {
            Toast.makeText(this, e.getMessage(), Toast.LENGTH_LONG).show();
        }
    } 
```

抛出前 onResume 函数但 e.getMessage() 为空（**Provider.retrieveAccessToken(Consumer, oauth_verifier);**错误行）

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T05:43:12.753

你应该做 params1.get("screen_name").getFirst();

像这样

```
SortedSet<String> screenNameSet = mProvider.getResponseParameters().get("screen_name");  
String screenName = screenNameSet.first(); 
```

# python - python - 2 个列表，并从 2 个列表中找到最大产品

> ID：13427208
> 
> 赞同：8
> 
> 时间：2012-11-17T02:54:13.840
> 
> 标签：python, list

我有两个由数字（整数）组成的列表；两者都有 200 万个独特的元素。

我想从列表 1 中找到数字 a，从列表 2 中找到数字 b，即 -

```
1)a*b should be maximized.
2)a*b has to be smaller than certain limit. 
```

这是我想出的：

```
maxpq = 0
nums = sorted(nums, reverse=True)
nums2 = sorted(nums2, reverse=True)
for p in nums:
    n = p*dropwhile(lambda q: p*q>sqr, nums2).next()
    if n>maxpq:
        maxpq=n
print maxpq 
```

有什么建议么？编辑：我的方法太慢了。这将需要超过一天的时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T03:44:28.187

这是一个线性时间解决方案（排序后）：

```
def maximize(a, b, lim):
    a.sort(reverse=True)
    b.sort()
    found = False
    best = 0
    j = 0
    for i in xrange(len(a)):
        while j < len(b) and a[i] * b[j] < lim:
            found = True
            if a[i]*b[j] > best:
                best, n1, n2 = a[i] * b[j], a[i], b[j]
            j += 1
    return found and (best, n1, n2) 
```

简单的说：

*   从每个列表的最高和最低开始
*   当他们的产品低于目标时，推进小项目
*   一旦产品变得比你的目标大，推进大项目，直到它再次低于你的目标

这样，您可以保证每个列表只浏览一次。`False`如果找不到足够小的东西，它将返回，否则它将返回产品和生产它的对。

样本输出：

```
a = [2, 5, 4, 3, 6]
b = [8, 1, 5, 4]
maximize(a, b, 2)   # False
maximize(a, b, 3)   # (2, 2, 1)
maximize(a, b, 10)  # (8, 2, 4)
maximize(a, b, 100) # (48, 6, 8) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T03:40:42.870

感谢大家的建议和想法。我终于想出了有用的解决方案。inspectorG4dget 先生对此有所了解。

它使用`bisect`python 标准库中的模块。

编辑： bisect 模块进行二进制搜索，以便在排序列表中找到值的插入位置。因此，与我之前的解决方案不同，它减少了比较次数。

[http://www.sparknotes.com/cs/searching/binarysearch/section1.rhtml](http://www.sparknotes.com/cs/searching/binarysearch/section1.rhtml)

```
import bisect

def bisect_find(num1, num2, limit):
    num1.sort()    
    max_ab = 0

    for a in num2:
        complement = limit / float(a)
        b = num1[bisect.bisect(num1, complement)-1]

        if limit > a*b > max_ab:
            max_ab=b*a

    return max_ab 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T03:12:05.903

这可能会更快。

```
def doer(L1, L2, ceil):
    max_c = ceil - 1
    L1.sort(reverse=True)
    L2.sort(reverse=True)
    big_a = big_b = big_c = 0

    for a in L1:
        for b in L2:
            c = a * b
            if c == max_c:
                return a, b
            elif max_c > c > big_c:
                big_a = a
                big_b = b
                big_c = c

    return big_a, big_b

print doer([1, 3, 5, 10], [8, 7, 3, 6], 60) 
```

请注意，它会就地对列表进行排序；这更快，但可能适合也可能不适合您的场景。

# java - 地理编码器 java gwt

> ID：13427210
> 
> 赞同：0
> 
> 时间：2012-11-17T02:54:30.050
> 
> 标签：java, gwt

我试图让用户输入位置地址并在 gwt 中使用谷歌地图在地图上显示位置并将该位置用于其他服务。我正在使用 gwt-map 3.8。在线的 javadoc 对描述这个类的工作方式不是很有帮助，而且我在网上找不到任何示例。有人有什么想法吗？

这是我到目前为止所拥有的：

```
private void geocode()
{

    final String addr = addressBox.getText().toUpperCase().trim();
        addressBox.setFocus(true);

    addressBox.setText("");

    Geocoder G = Geocoder.create();
    GeocoderRequest GReq = GeocoderRequest.create();
    GReq.setAddress(addr);

        // should this be just create or createarray? it won't let me use createarray
    GeocoderResult GResult = GeocoderResult.create();

com.google.maps.gwt.client.Geocoder.Callback gcallback = new Geocoder.Callback() {      

        @Override
                // i don't understand this handle part, the first parameter is not 
                //defined in the javadoc.  I looked around online and it seems to be a 
                //array of geocoder result but I can't make the array because it's a 
                //javascript object
        public void handle(GeocoderResult a[], GeocoderStatus b) {

}}}; 
```

在此先感谢您的时间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T12:32:04.160

**我相信您正在寻找的是：**

```
String address = address1 + "," + number + "," + address2 + "," + city;
        GeocoderRequest request = GeocoderRequest.create();
        request.setAddress(address);
        Geocoder geoCoder = Geocoder.create();
        geoCoder.geocode(request, new Geocoder.Callback() {

            @Override
            public void handle(JsArray<GeocoderResult> a, GeocoderStatus b) {
                if (b == GeocoderStatus.OK) {
                    GeocoderResult result = a.shift();
                    map.setCenter(result.getGeometry().getLocation());
                } else {
                    Window.alert("Aconteceu algo errado no google ao pegar este local, confira endereco");
                }
            }      
            }); 
```

# java - 这段代码怎么会得到 NPE？

> ID：13427212
> 
> 赞同：-4
> 
> 时间：2012-11-17T02:54:43.837
> 
> 标签：java

```
File f = new File(System.getProperty("user.home/Downloads")); 
```

这段代码怎么会出现 NPE 错误？

我知道它返回null，但目录在那里......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-17T02:55:19.653

因为

```
System.getProperty("user.home/Downloads") 
```

返回`null`，因为没有用 key 设置这样的属性`user.home/Downloads`

您可能正在寻找

```
final String fileName = System.getProperty("user.home") + File.saperator + "Downloads";
File f = new File(fileName); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T04:05:58.957

Properties are collections of `<key,value>` pairs (both Strings) that can give you information about some predefined system attributes. Which ones are predefined is listed in the [documentation](http://docs.oracle.com/javase/6/docs/api/java/lang/System.html#getProperties%28%29) of the function `System.getProperties`. The following keys are defined:

```
java.version
java.vendor 
java.vendor.url 
java.home 
java.vm.specification.version 
java.vm.specification.vendor 
java.vm.specification.name 
java.vm.version 
java.vm.vendor 
java.vm.name 
java.specification.version 
java.specification.vendor 
java.specification.name 
java.class.version 
java.class.path 
java.library.path 
java.io.tmpdir 
java.compiler 
java.ext.dirs 
os.name 
os.arch 
os.version 
file.separator 
path.separator 
line.separator 
user.name 
user.home 
user.dir 
```

As you can see `user.home` is in that list, that's why it works perfectly fine to call `System.getProperty("user.home");`.

However, you are calling the `getProperty` method with the argument `user.home/Downloads` -- this is an undefined key, as it is not on the above list.

If you want to append `"/Downloads"` to the user's home directory, you have to do it *outside the `getProperty` call*:

```
System.getProperty("user.home") + "/Downloads"; 
```

This way, you're using a defined key and won't get a `NullPointerException`.

# wordpress - WP 博客发布到 Facebook 个人资料 - 发布到我的个人 FB（应该是 FanPage

> ID：13427220
> 
> 赞同：1
> 
> 时间：2012-11-17T02:57:00.247
> 
> 标签：wordpress, blogs, facebook-page

我正在为我的博客使用 Wordpress。将“Simple Facebook Connect”作为插件发布（必须单击“发布到您的 Facebook 个人资料”）到 Facebook。我正确输入了所有信息（不是真的），因为它正在发布到我的 FB 页面。

问题是，它发布到我的 FB 页面而不是我的粉丝页面。我需要它发布到我的粉丝页面而不是我的个人页面。我花了太多时间试图解决这个问题，阅读论坛等，但没有找到解决方案，这可能很简单，当我完成时我会觉得很傻。

我很想把我的私人朋友留在我的 FB 上，把我的企业/学生留在我的粉丝专页上。

提前感谢您的帮助/指导。我对此很陌生，希望您的反馈能对 KISS（保持简单傻）友好。我已经有偏头痛了。

再次感谢！

# objective-c - 拖出屏幕时弹回 UIImageView

> ID：13427221
> 
> 赞同：2
> 
> 时间：2012-11-17T02:57:05.890
> 
> 标签：objective-c, ios, uiimageview, uitouch

我需要的是当 UIImageView 被拖离屏幕时，它会在松开时弹回。我让它在左侧和顶部工作，这就是我正在做的事情。

```
 - (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {          

        if (!CGRectContainsPoint(self.view.frame, imageView.frame.origin)){  

            CGFloat newX = 0.0f;
            CGFloat newY = 0.0f;

            // If off screen upper and left

            if (imageView.frame.origin.x < 0.0f){
                CGFloat negX = imageView.frame.origin.x * -1;
                newX = negX;
            }else{
                newX = imageView.frame.origin.x;
            }

            if (imageView.frame.origin.y < 0.0f){
                CGFloat negY = imageView.frame.origin.y * -1;
                newY = negY;
            }else{
                newY = imageView.frame.origin.y;
            }

            CGRect newPoint = CGRectMake(newX, newY, imageView.frame.size.width, imageView.frame.size.height);

            [UIView beginAnimations:@"BounceAnimations" context:nil];
            [UIView setAnimationDuration:.5];
            [letterOutOfBounds play];
            [imageView setFrame:newPoint];

            [UIView commitAnimations];

        }
    }
} 
```

所以我想在右侧和底部实现相同的效果。但我一直坚持这一点。有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-17T04:01:15.507

像下面这样的东西怎么样？

```
- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {

    UIImageView *imageView = nil;

    BOOL moved = NO;
    CGRect newPoint = imageView.frame;

    // If off screen left

    if (newPoint.origin.x < 0.0f){
        newPoint.origin.x *= -1.0;
        moved = YES;
    }

    // if off screen up

    if (newPoint.origin.y < 0.0f){
        newPoint.origin.y *= -1.0;
        moved = YES;
    }

    // if off screen right

    CGFloat howFarOffRight = (newPoint.origin.x + newPoint.size.width) - imageView.superview.frame.size.width;
    if (howFarOffRight > 0.0)
    {
        newPoint.origin.x -= howFarOffRight * 2;
        moved = YES;
    }

    // if off screen bottom

    CGFloat howFarOffBottom = (newPoint.origin.y + newPoint.size.height) - imageView.superview.frame.size.height;
    if (howFarOffBottom > 0.0)
    {
        newPoint.origin.y -= howFarOffBottom * 2;
        moved = YES;
    }

    if (moved)
    {
        [UIView beginAnimations:@"BounceAnimations" context:nil];
        [UIView setAnimationDuration:.5];
        [letterOutOfBounds play];
        [imageView setFrame:newPoint];

        [UIView commitAnimations];
    }
} 
```

当我阅读您的代码时，“如果离开左侧，将其移回视图的距离与它离开屏幕的距离相同”的逻辑。老实说，这对我来说不太有意义（为什么，当弹回时，坐标是否取决于它离屏幕多远），但我试图在“离屏右”中尊重这一点“离屏底部”逻辑。显然我的逻辑是使用`superview`of`imageView`来确定包含视图的宽度，但如果这不合适，请将其替换为任何内容。

**编辑：**

我个人使用手势识别器来做这些事情，例如：

```
UIPanGestureRecognizer *pan = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(handlePan:)];
[self.imageView addGestureRecognizer:pan];
self.imageView.userInteractionEnabled = YES; 
```

因此，动画移动图像的手势识别器将是：

```
- (void)handlePan:(UIPanGestureRecognizer *)gesture
{
    static CGRect originalFrame; // you could make this an ivar if you want, but just for demonstration purposes

    if (gesture.state == UIGestureRecognizerStateBegan)
    {
        originalFrame = self.imageView.frame;
    }
    else if (gesture.state == UIGestureRecognizerStateChanged)
    {
        CGPoint translate = [gesture translationInView:gesture.view];

        CGRect newFrame = originalFrame;

        newFrame.origin.x += translate.x;
        newFrame.origin.y += translate.y;

        gesture.view.frame = newFrame;
    }
    else if (gesture.state == UIGestureRecognizerStateEnded || gesture.state == UIGestureRecognizerStateCancelled)
    {
        CGRect newFrame = gesture.view.frame;

        newFrame.origin.x = fmaxf(newFrame.origin.x, 0.0);
        newFrame.origin.x = fminf(newFrame.origin.x, gesture.view.superview.bounds.size.width - newFrame.size.width);

        newFrame.origin.y = fmaxf(newFrame.origin.y, 0.0);
        newFrame.origin.y = fminf(newFrame.origin.y, gesture.view.superview.bounds.size.height - newFrame.size.height);

        // animate how ever you want ... I generally just do animateWithDuration

        [UIView animateWithDuration:0.5 animations:^{
            gesture.view.frame = newFrame;
        }];
    }
} 
```

或者，如果您想要一个手势识别器，它首先只是防止将图像拖出屏幕，它会是：

```
- (void)handlePan:(UIPanGestureRecognizer *)gesture
{
    static CGRect originalFrame;

    if (gesture.state == UIGestureRecognizerStateBegan)
    {
        originalFrame = self.imageView.frame;
    }
    else if (gesture.state == UIGestureRecognizerStateChanged)
    {
        CGPoint translate = [gesture translationInView:gesture.view];

        CGRect newFrame = originalFrame;

        newFrame.origin.x += translate.x;
        newFrame.origin.x = fmaxf(newFrame.origin.x, 0.0);
        newFrame.origin.x = fminf(newFrame.origin.x, gesture.view.superview.bounds.size.width - newFrame.size.width);

        newFrame.origin.y += translate.y;
        newFrame.origin.y = fmaxf(newFrame.origin.y, 0.0);
        newFrame.origin.y = fminf(newFrame.origin.y, gesture.view.superview.bounds.size.height - newFrame.size.height);

        gesture.view.frame = newFrame;
    }
} 
```

* * *

`animationWithDuration`顺便说一句，在 iOS 7 中，您可以通过使用带有`usingSpringWithDampening`and`initialSpringVelocity`参数的 new 来让图像视图的动画回到其原始位置：

```
[UIView animateWithDuration:1.0
                      delay:0.0
     usingSpringWithDamping:0.3
      initialSpringVelocity:0.1
                    options:0
                 animations:^{
                     // set the new `frame` (or update the constraint constant values that
                     // will dictate the `frame` and call `layoutViewsIfNeeded`)
                 }
                 completion:nil]; 
```

或者，在 iOS7 中，您也可以使用 UIKit Dynamics 添加`UISnapBehavior`：

```
self.animator = [[UIDynamicAnimator alloc] initWithReferenceView:self.view];
self.animator.delegate = self;

UISnapBehavior *snap = [[UISnapBehavior alloc] initWithItem:self.viewToAnimate snapToPoint:CGPointMake(self.viewToAnimate.center.x, self.view.frame.size.height - 50)];

// optionally, you can control how much bouncing happens when it finishes, e.g., for a lot of bouncing:
//
// snap.damping = 0.2;

// you can also slow down the snap by adding some resistance
//
// UIDynamicItemBehavior *resistance = [[UIDynamicItemBehavior alloc] initWithItems:@[self.viewToAnimate]];
// resistance.resistance = 20.0;
// resistance.angularResistance = 200.0;
// [self.animator addBehavior:resistance];

[self.animator addBehavior:snap]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T03:25:37.837

我认为最简单的方法是检查`imageView`您的`self.view`.

```
- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {  
    if (!CGRectContainsRect(self.view.frame, imageView.frame)){
        // Your animation to bounce.
    }
} 
```

# php - 调用别名作为对象

> ID：13427224
> 
> 赞同：1
> 
> 时间：2012-11-17T02:58:33.860
> 
> 标签：php, mysql

分类.php

```
require_once(LIB_PATH.DS."database.php");
require_once(LIB_PATH.DS."database-object.php");

class Category extends DatabaseObjects{

static $db_fields;
static $table_name = "categories";

public function categories(){
global $database;

$sql = "SELECT cat.id, cat.name as category, COUNT(i.category_id) as quantity FROM " . static::$table_name;
$sql .= " as cat JOIN items as i ";
$sql .= " WHERE i.category_id = cat.id";
$sql .= " GROUP BY category ";
$sql .= " ORDER BY category ASC";

$result = $database->query($sql);

$result = $database->query($sql);
 $category = array();

while($cat = $database->fetch_object($result)){
$category[] = "<a href='category.php?id=" . $cat->id . "'>" . $cat->category . "</a>" . ' (' . $cat->quantity . ')';
}
return $category;
}
}

$category = new Category(); 
```

Inventory.php <- 我当前的代码

```
$categories_list = $category->categories();

<div id="categories">
    <ul>
      <?php foreach($categories_list as $cl):; ?>
        <li><?php echo $cl; ?></li>
      <?php endforeach; ?>
    </ul>
</div> 
```

无论如何，我可以让我的代码像这样吗？

```
$categories_list = $category->categories();

<div id="categories">
    <ul>
      <?php foreach($categories_list as $cl):; ?>
        <li><a href="category.php?id=<?php echo $cl->id?>">$cl->category . " " . $cl->quantity</a></li>
      <?php endforeach; ?>
    </ul>
</div> 
```

您可以在我使用的 Category.php > categories() 上看到

```
while($cat = $database->fetch_object($result)){
    $category[] = "<a href='category.php?id=" . $cat->id . "'>" . $cat->category . "</a>" . ' (' . $cat->quantity . ')';
} 
```

但我不认为这是写它的正确方法。

我希望有人可以帮助我。

# razor - Razor.ServiceStack - 视图不渲染，只是默认的“快照”

> ID：13427225
> 
> 赞同：3
> 
> 时间：2012-11-17T02:58:34.433
> 
> 标签：razor, mono, nginx, servicestack

我已经使用[http://razor.servicestack.net/](http://razor.servicestack.net/)设置了一个站点。

我创建了几个视图和匹配服务，示例如下：

服务示例：

```
using ServiceStack.ServiceHost;
using ServiceStack.ServiceInterface;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;

namespace website
{
    [DefaultView("AboutUs")]
    public class AboutUsService : Service
    {
        public object Get(AboutUsRequest request)
        {
            return new AboutUsResponse
            {
                //any properties that need to be set on the response object can be done inline here
            };
        }     
    }

    [Route("/About-Us")]
    public class AboutUsRequest
    {
        //any request parameters we need can be provided here.  They should be auto parsed from the request
    }

    public class AboutUsResponse
    {
        //any response properties we want to use in the view can be defined here     
    }

} 
```

查看示例（位于 /Views/AboutUs.cshtml）

```
 @inherits ServiceStack.Razor.ViewPage<website.AboutUsResponse>
 <html><body><h1>About Us</h1></body></html> 
```

这可以在 Windows 上正常加载，但无法在 Mono/NginxFastCGI 上加载，而是只显示默认的 API 快照页面：

```
Snapshot of AboutUsRequest generated by ServiceStack on 11/17/2012 02:30:14
view json datasource from original url: http://dev.mydomain.com:80/About-Us? in other formats: json xml csv jsv 
```

我需要配置一些特定的更改才能在 Mono/Linux 端工作吗？顺便说一句，我已经打开了 IOMAP=all。

任何有关如何使这项工作的想法将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T04:06:27.940

Unfortunately you left out the most important part: the name and location of the Razor view.

The Snaphot page is a fallback for when ServiceStack can't find the view it's looking for, in this case since you've specified [DefaultView("AboutUs")], ServiceStack will look for a view named "AboutUs.cshtml" in the /Views/ directory, is that what you have?

# struts2 - Struts2-如何减少执行时间

> ID：13427227
> 
> 赞同：0
> 
> 时间：2012-11-17T02:58:44.263
> 
> 标签：struts2, interceptor, interceptorstack

我使用 Struts2 开发了一个门户，其中大部分操作都是通过 Ajax 调用来调用的。但是，我看到要执行的每个操作都有一些意外的执行时间。例如，对于没有DB调用或其他任何操作，仅返回一个搜索框，大约需要250~300 mS。

到目前为止，我已经尝试了以下步骤，但执行时间没有太大改进。请建议可以做些什么以使其更快。

*   删除了 Struts 中的开发模式
*   停止使用 defaultStack 并尝试使用 basicStack 作为拦截器堆栈
*   启用模板缓存
*   将 templatesCache.updateDelay 设置为 60000

**编辑：**

即使功能没有问题，我也会看到此错误。请问这是否与延迟有任何关系？

```
ERROR finder.ClassFinder: Unable to read class [WEB-INF.classes.com.***.***.ConfigManagement]
Could not load WEB-INF/classes/com/***/***/ConfigManagement.class - [unknown location]
at com.opensymphony.xwork2.util.finder.ClassFinder.readClassDef(ClassFinder.java:785) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T03:27:02.243

> [Struts2 性能调优](http://struts.apache.org/2.3.4/docs/performance-tuning.html)

1.  不要使用不需要的拦截器。从 basicStack 中识别并删除它。

2.  [TimerInterceptor](https://struts.apache.org/2.0.6/struts2-core/apidocs/com/opensymphony/xwork2/interceptor/TimerInterceptor.html)来识别动作执行时间尝试减少它。

3.  对于 2.3 之前的 Struts 2 版本：OGNL 版本 3.0.3 库是旧 OGNL jar 的直接替代品，并提供了更好的性能。

# c++ - Externing from a condition

> ID：13427228
> 
> 赞同：0
> 
> 时间：2012-11-17T02:58:46.610
> 
> 标签：c++, scope

> **Possible Duplicate:**
> [Scope of variables in if statements](https://stackoverflow.com/questions/8543167/scope-of-variables-in-if-statements)

Say i have the following code;

```
int y = 5;
if (.... ) {
 int x = 10;
 x = y; 
} 
```

Is there a way i can use the variable x outside of the if scope?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T03:00:25.647

No. The scope of `x` is within the `if`. Declare `x` outside of the `if` if you want to use it elsewhere. If you try to reference `x` in the line following that `if` you will get a compilation error.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T03:00:45.853

Apart from putting `x` outside the `if` block, no. A variable can only be used within its scope.

This is what the C++ standard has to say about it in `basic.scope.declarative`:

> Every name is introduced in some portion of program text called a declarative region, which is the largest part of the program in which that name is valid, that is, in which that name may be used as an unqualiﬁed name to refer to the same entity. In general, each particular name is valid only within some possibly discontiguous portion of program text called its scope.

As a consequence, using it elsewhere is invalid.

# algorithm - 我可以使用递归算法来实现 Splay 树吗？

> ID：13427229
> 
> 赞同：3
> 
> 时间：2012-11-17T02:58:49.337
> 
> 标签：algorithm, data-structures, implementation

我一直在研究 Splay 树，因为我想实现一个。目前，我对红黑树、AVL 树、跳过列表和其他更简单的数据结构有一些“自学”经验。我想实现我的第一个展开树，但如果可能的话，我想要一个递归实现（我喜欢递归）。

但是，我认为这很困难，因为您必须在树下查看两个级别才能观察所有可能的情况（zig-zag、zig-zig、zar），并且没有其他字段就无法标记目标。我是否应该使用另一个字段（例如红黑树）来标记访问的节点并展开目标节点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T03:59:16.393

使用递归算法很容易，而且看起来相当干净。不需要标记。请记住，展开操作（用于查找、插入和删除）将目标节点带到树的顶部；换句话说，它返回目标节点位于顶部的（展开的）树。

本质上，您需要从给定节点决定接下来的两次移动将是什么（左右移动或其他任何移动）。当您向同一方向移动两次时会发生旋转。

在 Chris Okasaki 的*Purely Functional Data Structures*中有一个很好的函数式语言实现，恕我直言，这是现存最好的 CS 短文之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T03:22:49.060

在 wikipedia 上，您可以找到一篇关于展开树的非常好的文章。你不应该喜欢递归，因为递归很容易失控，最好使用迭代。

# dialog - open a MVC4 view inside a jquery Dialog

> ID：13427237
> 
> 赞同：1
> 
> 时间：2012-11-17T03:01:17.077
> 
> 标签：dialog, asp.net-mvc-4

I want to take a view and instead of opening a new page I want to just open that view inside a Jquery dialog. I was just wondering how it's done or if possible.

HomeController.cs

```
 using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using Jquery_Dialog.Models;
using Kendo.Mvc.Extensions;
using Kendo.Mvc.UI;

namespace Jquery_Dialog.Controllers
{
    public class HomeController : Controller
    {
        private IEnumerable<Product> Products
        {
            get
            {
                return new List<Product>
                {
                  new Product {ProductID = 1, Name = "Train", Category = "Toy", Price = 29.99M},
                  new Product {ProductID = 2, Name = "Truck", Category = "Toy", Price = 19.99M},
                  new Product {ProductID = 3, Name = "Bread", Category = "Food", Price = 2.49M},
                  new Product {ProductID = 4, Name = "Cookies", Category = "Food", Price = 2.99M}
                };
            }
        }

        public ActionResult Index()
        {

            IEnumerable<Product> productList = Products;
            return View(productList);
        }

        public ActionResult Details(int id)
        {
            Product model = Products.Where(p => p.ProductID == id).SingleOrDefault();
            return Request.IsAjaxRequest() ? PartialView(model) : PartialView(model);
        }

        public ActionResult About()
        {
            ViewBag.Message = "Your app description page.";

            return View();
        }

        public ActionResult Contact()
        {
            ViewBag.Message = "Your contact page.";

            return View();
        }
    }
} 
```

Index.cshtml

```
@model IEnumerable<Jquery_Dialog.Models.Product>

<link rel="stylesheet" href="http://code.jquery.com/ui/1.9.1/themes/base/jquery-ui.css " />
<script src="http://code.jquery.com/jquery-1.8.2.js "></script>
<script src="http://code.jquery.com/ui/1.9.1/jquery-ui.js "></script>

<table> @foreach (var item in Model) {
<tr>
  <td>
  @Html.ActionLink(item.Name, "Details", new { id = item.ProductID }, new { @class = "ajax-details" })
  </td>
</tr>
}
</table>

<div id="dialog" title="Title of dialog">
    <p>This is the default dialog which is useful for displaying information. The dialog window can be moved, resized and closed with the 'x' icon.</p>
</div>

<script>
    $(function () {
        $('.ajax-details').on('click', function (e) { // bind to click event
            // go get the page using the link's `href`
            $.get($(this).prop('href'), function (response) {
                $(response).dialog(); // take the response and throw it up in a dialog
                // optional: Use jQuery UI's options to specify buttons and other
                //           settings here as well. It's also probably a good idea to
                //           bind the close event and $().remove() this element from
                //           the page on close since the user can click links over and
                //           over. (prevent DOM overload of hidden elements)
            });
            e.preventDefault(); // don't let it continue on
        });
    });
</script>

<script>
        $("#dialog").dialog();
</script> 
```

As you can see I have a simple dialog that opens a div but I want to be able to open the details view instead of clicking the ActionLink and going to a different page, I want to be able to click the ActionLink and have it open up in the dialog.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T03:16:19.040

假设您使`ActionLink`更易于访问（例如通过使用类名）：

```
@Html.ActionLink(item.Name, "Details", new { id = item.ProductID },
  /* htmlAttributes: */ new { @class = "ajax-details" }) 
```

您还对操作进行了修改，以便我们可以在它是 ajax 请求时获取部分内容：

```
public ActionResult Details(int id)
{
  // this is another way of making sure that AJAX calls get partial content,
  // but a normal visit would render the entire page.
  return Request.IsAjaxRequest() ? PartialView(model) : View(model);
} 
```

***可选**`_ViewStart.cshtml`如果这是网站上常见的地方，您也可以调整您的文件以执行相同的操作，以呈现部分视图/ajax 补充：*

```
@{
  Layout = IsAjax ? null : "~/Views/Shared/_Layout.cshtml";
} 
```

现在，我们将它与 AJAX 连接起来。再次，引用我们之前游戏链接的类名（`ajax-details`）：

```
$('.ajax-details').on('click',function(e){ // bind to click event
  // go get the page using the link's `href`
  $.get($(this).prop('href'), function(response){
    $(response).dialog(); // take the response and throw it up in a dialog
    // optional: Use jQuery UI's options to specify buttons and other
    //           settings here as well. It's also probably a good idea to
    //           bind the close event and $().remove() this element from
    //           the page on close since the user can click links over and
    //           over. (prevent DOM overload of hidden elements)
  });
  e.preventDefault(); // don't let it continue on
}); 
```

没有机会测试它，但应该让你进入球场。如果它不能让你足够接近，请告诉我，我会重新审视答案并进行调整。

# java - Can the Boyer-Moore algorithm be altered to search for "full words" only?

> ID：13427245
> 
> 赞同：0
> 
> 时间：2012-11-17T03:02:47.040
> 
> 标签：java, string, search, words, boyer-moore

I've written a Java function that implements the Boyer-Moore algorithm to search for a given substring in a char array. It returns a list of every index where the substring is found in the array. For example, if the char array being searched contained the phrase "The Walking Dead" and the substring given as a parameter was "king", a list of size one containing the value 7 would be returned.

I would like to change this function so that only indexes of substrings that are full words in the char array would be returned. So the previous example would return an empty list, but if the substring was changed to "The", "Walking" or "Dead", lists of size 1 would be returned with values 0, 4, and 12 respectively.

Is this sort of functionality possible to implement using the Boyer-Moore algorithm? Are there any other string searching algorithms that would be able to produce these results efficiently?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T03:17:40.697

这可能不是您想要的那种答案，但您可以更改参数而不是算法：在搜索字符串的开头和结尾以及目标字符串的开头和结尾添加一个空格（以防万一第一个或最后一个词是命中）。您还需要对标点符号和其他非单词字符进行特殊处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-23T08:19:50.543

只需使用 Java 的[模式](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html "图案")——它已经在内部实现了 Boyer Moore。然后 '\b' 匹配一个单词边界。如：

```
 Pattern pattern = Pattern.compile("\\b" + Pattern.quote(needle) + "\\b");
    Matcher m = pattern.matcher(haystack);
    while (m.find()) {
        System.out.println(m.start());
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T03:59:04.760

是的，你可以调整 Boyer-Moore 来做到这一点：

*   在每个“匹配”之后，您可以检查匹配的开始和结束位置是否在单词边界处。

*   您将搜索从 "king" 更改为 'word-boundary + "king" + word-boundary'，其中 'word-boundary' 是一个伪字符，您的修改后的 BM 与任何单词边界字符匹配。

*   您可以预处理输入以用表示“单词边界”的特殊字符替换所有空格、标点符号等，然后进行搜索。

其中哪一个可能更好取决于您如何实现它们......以及您是否要重复搜索相同的输入文本。

# python - 无法推送到heroku，分发（>=0.6.28）不可用

> ID：13427247
> 
> 赞同：0
> 
> 时间：2012-11-17T03:03:51.867
> 
> 标签：python, mysql, heroku, flask

尝试推送 flask-mysql python 应用程序时。无论如何有条件地告诉flask-mysql扩展使用distribute> = 0.6.28？我将它包含在需求文件中并安装了它，但是当我点击 requirements.txt 中的 flask-mysql 行时仍然没有骰子，它仍然试图去 0.6.27。

```
Downloading/unpacking MySQL-python (from Flask-MySQL==1.2->-r requirements.txt (line 3))
         Storing download in cache at /app/tmp/repo.git/.cache/pip_downloads/http%3A%2F%2Fpypi.python.org%2Fpackages%2Fsource%2FM%2FMySQL-python%2FMySQL-python-1.2.4c1.zip
         Running setup.py egg_info for package MySQL-python
           The required version of distribute (>=0.6.28) is not available,
           and can't be installed while this script is running. Please
           install a more recent version first, using
           'easy_install -U distribute'.

           (Currently using distribute 0.6.27 (/tmp/build_1w0z6sg73qbm/.heroku/venv/lib/python2.7/site-packages/distribute-0.6.27-py2.7.egg))
           Complete output from command python setup.py egg_info:
           The required version of distribute (>=0.6.28) is not available,

       and can't be installed while this script is running. Please

       install a more recent version first, using

       'easy_install -U distribute'.

       (Currently using distribute 0.6.27 (/tmp/build_1w0z6sg73qbm/.heroku/venv/lib/python2.7/site-packages/distribute-0.6.27-py2.7.egg))

       ----------------------------------------
       Command python setup.py egg_info failed with error code 2 in /tmp/build_1w0z6sg73qbm/.heroku/venv/build/MySQL-python
       Storing complete log in /app/.pip/pip.log
 !     Heroku push rejected, failed to compile Python app 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-26T18:21:18.510

我遇到了同样的问题，我跑了：

```
easy_install -U distribute 
```

这个升级的发行版，然后它安装好了。

# c++ - c++ data structures heaps

> ID：13427250
> 
> 赞同：0
> 
> 时间：2012-11-17T03:04:27.420
> 
> 标签：c++, oop, heap, binary-tree

I've been trying to implement a heap into my program. It seems to me that heaps are the same as binary trees. Is this the case with all heaps such as min heap and max heap since all that is being done is a traversal through the tree putting the largest/smallest node to the top?

Also, I've read that using 1-D arrays are only beneficial when we have a complete binary tree. If we don't have a complete binary tree, it would be more beneficial to use class that is a friend class to another? Why is that? Such as:

```
template<class T> class BT; // forward declartion -> added at edit

template<class T>
class BTNode{
    friend class BT<T>; // not sure why we need two classes
private:
    T data;
    BTNode<T> *leftChild; // what is the benefit of making a object Node?
    BTNode<T> *rightChild;
};

template<class T>
class BT{
private:
    BTNode<T> *root; // what is the benefit of having this root in another class?
}; 
```

Thank you in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T03:19:02.823

标准库中有一个非常好的堆实现；你应该看看它（但它也是一个有用的学习练习来编写你自己的。）

二叉堆是一棵二叉树，但它可以有效地存储为向量。链接是隐式的。也就是说，位置`i`（从零开始）的节点的子节点在`2i+1`和`2i+2`。（堆中最多一个节点只有一个子节点。）这意味着您实际上不必存储链接，因此对于小数据对象（如整数），您至少可以节省三分之二的所需的空间。

[维基百科](http://en.wikipedia.org/wiki/Binary_heap)有一篇关于二叉堆（通常存储在向量中的那种）的文章不错，但它也有许多关于其他类型[堆](http://en.wikipedia.org/wiki/Heap_%28data_structure%29)的文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-31T12:32:31.673

Include`<algorithm>`和 use `std::make_heap`，注意还有其他可以用堆做的功能。

# php - PHP replace all instances with single regex pattern

> ID：13427253
> 
> 赞同：6
> 
> 时间：2012-11-17T03:04:57.090
> 
> 标签：php, regex

I have a single regex and I want to replace each match in the array of matches with a corresponding array of replacements in the most efficient way possible.

So for instance, I have:

```
$string = '~~hello~~ there, how ~~are~~ ~~you~~?';

$pattern = '/~~(.*?)~~/';

$replacements = array();
$replacements[0] = 'hi';
$replacements[1] = 'am';
$replacements[2] = 'i'; 
```

and I want to turn `$string` into:

```
hi there, how am i? 
```

Initially I hoped it'd be as simple as:

```
$string = preg_replace($pattern, $replacements, $string); 
```

but it doesn't seem to work. So the first question is: if `$replacements` is an array, then does `$string` must also be an array?

Now, I can come up with (seemingly) inefficient ways to do this, like counting the number of matches and making an array filled with the appropriate number of identical regexes. But this leads us into question two: is there a more efficient way? How would you do it, PHP pros?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T03:24:32.190

你可以在这里使用一个简单的 eval 技巧：

```
print preg_replace('/~~(\w+)~~/e', 'array_shift($replacements)', $st); 
```

[`array_shift`](http://php.net/array_shift)将简单地从您的替换数组中获取第一个条目。

最好使用地图（`"hello" => "hi"`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T03:38:19.117

我可能会使用`preg_replace_callback`：

```
$string = '~~hello~~ there, how ~~are~~ ~~you~~?';

$pattern = '/~~(.*?)~~/'; 

var_dump(preg_replace_callback($pattern, 
    function($matches) { 
        static $replacements = array('hi', 'am', 'i'), $i = 0; 
        return $replacements[$i++ % count($replacements)]; 
    }, 
    $string)); 
```

输出：

```
string(19) "hi there, how am i?" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-17T05:59:09.620

如果您要做的只是将这三个特定的短语换成另一组特定的短语，那么您可以使用`str_replace`它，因为它比`preg_replace`.

```
$subject = "~~hello~~ there, how ~~are~~ ~~you~~?";
$matches = array('~~hello~~', '~~are~~', '~~you~~');
$replace = array('hi', 'am', 'i');

str_replace($matches, $replace, $subject); 
```

# ruby-on-rails - Why Doesn't Rails Scaffold Include Json Rendering for Edit in Controller?

> ID：13427254
> 
> 赞同：2
> 
> 时间：2012-11-17T03:05:16.503
> 
> 标签：ruby-on-rails, json, controller

This is just out of curiosity, here's a generated controller from running `rails g scaffold Thing`:

```
class ThingsController < ApplicationController
  # GET /things
  # GET /things.json
  def index
    @things = Thing.all

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @things }
    end
  end

  # GET /things/1
  # GET /things/1.json
  def show
    @thing = Thing.find(params[:id])

    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @thing }
    end
  end

  # GET /things/new
  # GET /things/new.json
  def new
    @thing = Thing.new

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @thing }
    end
  end

  # GET /things/1/edit
  def edit
    @thing = Thing.find(params[:id])
  end

  # POST /things
  # POST /things.json
  def create
    @thing = Thing.new(params[:thing])

    respond_to do |format|
      if @thing.save
        format.html { redirect_to @thing, notice: 'Thing was successfully created.' }
        format.json { render json: @thing, status: :created, location: @thing }
      else
        format.html { render action: "new" }
        format.json { render json: @thing.errors, status: :unprocessable_entity }
      end
    end
  end

  # PUT /things/1
  # PUT /things/1.json
  def update
    @thing = Thing.find(params[:id])

    respond_to do |format|
      if @thing.update_attributes(params[:thing])
        format.html { redirect_to @thing, notice: 'Thing was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render action: "edit" }
        format.json { render json: @thing.errors, status: :unprocessable_entity }
      end
    end
  end

  # DELETE /things/1
  # DELETE /things/1.json
  def destroy
    @thing = Thing.find(params[:id])
    @thing.destroy

    respond_to do |format|
      format.html { redirect_to things_url }
      format.json { head :no_content }
    end
  end
end 
```

Rails includes a `format` block in every action except for `edit`... Why is this? Theoretically another app pinging the server for json would still want to show whatever is being edited, right? It's easy enough to just add in, but I am curious why they chose to do it this way.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T03:47:45.070

如果您想知道您正在更新什么，您可以通过`show`操作来完成。

# php - PHP - Is there a better way find an integer out of a few?

> ID：13427257
> 
> 赞同：2
> 
> 时间：2012-11-17T03:06:06.653
> 
> 标签：php, integer

Currently I'm using the following approach to determine if `$userlevel` is either `10`, `20`, or `30`.

```
if ( in_array( $userlevel, array( 10, 20, 30 ) ) ) { 

} 
```

Is there a better way to do this?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T03:09:38.237

您已经在使用“更好的方法”。替代方案是

```
if ($userlevel == 10 || $userlevel == 20 || $userlevel == 30) {

} 
```

通常，您会编写一个基本`if`语句，直到可能值的数量增加以至于该行变得太长，然后您将它们移动到一个集合中并使用`in_array`.

如果您知道这`$userlevel`将*始终*是这些值之一，您可以简单地测试它是否在上限/下限之间，但这不会比您现在编写的方式短。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-17T03:17:09.200

我认为没有“更好”的方法。这取决于您期望从中选择的价值观在未来发展。您可以使用没有中断的开关。

```
switch ($userlevel) {
    case 10: case 20: case 30
        // ..
        break;
    default:
        // ..
} 
```

## 编辑

当然，该`in_array`解决方案有很大的好处。您可以将**决策**数组存储在一个变量中，并能够从其他地方影响它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T05:48:16.620

没有比 in_array 更好的方法了。

# sql-server - SQL Server - 用于插入触发器

> ID：13427269
> 
> 赞同：1
> 
> 时间：2012-11-17T03:08:32.703
> 
> 标签：sql-server

使用“For Insert”触发器，是否在触发时将行插入到表中？

```
 CREATE Trigger check_availability on Room
       For Insert, Update 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T03:15:23.697

是的。

[创建触发器](http://msdn.microsoft.com/en-us/library/ms189799.aspx)

```
FOR | AFTER

    AFTER specifies that the DML trigger is fired only when all operations specified in the triggering SQL statement have executed successfully. All referential cascade actions and constraint checks also must succeed before this trigger fires.

    AFTER is the default when FOR is the only keyword specified.

    AFTER triggers cannot be defined on views. 
```

# javascript - 谷歌地图 api v2 未在 Internet Explorer 中显示

> ID：13427275
> 
> 赞同：0
> 
> 时间：2012-11-17T03:09:06.903
> 
> 标签：javascript, google-maps, google-maps-api-2

这是代码。它使用 Google Maps API V3。在 Mac 和 PC 上的所有浏览器上都运行良好，除了 Internet Explorer 9。我检查了杂散逗号和其他一些常见的 IE 兼容性问题，但我很难过。任何帮助表示赞赏。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>

<meta name="generator" content="HTML Tidy for Linux (vers 25 March 2009), see www.w3.org" />
<title>Patient Wait Times for Hospitals and Clinics</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<meta name="description" content="Live Wait Times for Hospitals and Clinics. Real-time updates. Patient satisfaction and emergency room wait time data for more than 5,000 hospitals and clinics. Identify hospital with highest patient satisfaction and shortest wait time." />
<link href="stat.css" rel="stylesheet" type="text/css" /><!--Google Tracking Script -->
<script type="text/javascript">
//<![CDATA[

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-31929746-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

//]]>
</script>
<script type="text/javascript">
//<![CDATA[
<!--
// create the XMLHttpRequest object, according browser
function get_XmlHttp() {
  // create the variable that will contain the instance of the XMLHttpRequest object (initially with null value)
  var xmlHttp = null;

  if(window.XMLHttpRequest) {           // for Forefox, IE7+, Opera, Safari, ...
    xmlHttp = new XMLHttpRequest();
  }
  else if(window.ActiveXObject) {       // for Internet Explorer 5 or 6
    xmlHttp = new ActiveXObject("Microsoft.XMLHTTP");
  }

  return xmlHttp;
}

// sends data to a php file, via POST, and displays the received answer
function ajaxrequest(php_file, tagID) {
  var request =  get_XmlHttp();         // call the function for the XMLHttpRequest instance

  // create pairs index=value with data that must be sent to server
  var  the_data = 'test='+document.getElementById('addressInput').innerHTML;

  request.open("POST", php_file, true);                 // set the request

  // adds  a header to tell the PHP script to recognize the data as is sent via POST
  request.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
  request.send(the_data);               // calls the send() method with datas as parameter

  // Check request status
  // If the response is received completely, will be transferred to the HTML tag with tagID
  request.onreadystatechange = function() {
    if (request.readyState == 4) {
      document.getElementById(tagID).innerHTML = request.responseText;
    }
  }
}
//]]>
</script>
<style type="text/css">
/*<![CDATA[*/
<!--
BODY 

   {
   padding-left: 50px;
   padding-right: 50px;
   font-size:14px;

  </body>
   }
-->
/*]]>*/
</style>

<script src="http://maps.google.com/maps?file=api&amp;v=2&amp;key=AIzaSyDAB1Q6VnjM9eLivEdelHRuXIzvFeSdvXo" type="text/javascript">
</script>
<script type="text/javascript">

    //<![CDATA[
    var map;
    var geocoder;

    function load() {
      if (GBrowserIsCompatible()) {
        geocoder = new GClientGeocoder();
        map = new GMap2(document.getElementById('map'));
        map.addControl(new GSmallMapControl());
        map.addControl(new GMapTypeControl());
        map.setCenter(new GLatLng(40, -100), 4);
      }
    }

   function searchLocations() {
     var address = document.getElementById('addressInput').value;
        // window.location.href = "capture.php?var=" + address; 
     geocoder.getLatLng(address, function(latlng) {
       if (!latlng) {
         alert(address + ' not found');
       } else {
         searchLocationsNear(latlng);
       }
     });
   }

//function OnUnload() {
 //var address = document.getElementById('addressInput').value;

//      window.location.href = "capture.php?var=" + address; 
        //alert(address);
//}
//function OnUnload() {
//var address = document.getElementById('addressInput').value;
//window.location.href = "capture.php?var=" + address;  
//alert ("The current document will be unloaded!");
//}

// create the XMLHttpRequest object, according browser
function get_XmlHttp() {
  // create the variable that will contain the instance of the XMLHttpRequest object (initially with null value)
  var xmlHttp = null;

  if(window.XMLHttpRequest) {           // for Forefox, IE7+, Opera, Safari, ...
    xmlHttp = new XMLHttpRequest();
  }
  else if(window.ActiveXObject) {       // for Internet Explorer 5 or 6
    xmlHttp = new ActiveXObject("Microsoft.XMLHTTP");
  }

  return xmlHttp;
}

// sends data to a php file, via POST, and displays the received answer
function ajaxrequest(php_file, tagID) {
  var request =  get_XmlHttp();         // calls the function for the XMLHttpRequest instance

  // gets data from form fields, using their ID
  var box = document.getElementById('addressInput').value;
  //var mesaj = document.getElementById('mesaj').value;

  // create pairs index=value with data that must be sent to server
  var  the_data = 'box='+box;

  request.open("POST", php_file, true);                 // sets the request

  // adds a header to tell the PHP script to recognize the data as is sent via POST
  request.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
  request.send(the_data);               // sends the request

  // Check request status
  // If the response is received completely, will be transferred to the HTML tag with tagID
  request.onreadystatechange = function() {
    if (request.readyState == 4) {
      document.getElementById(tagID).innerHTML = request.responseText;
    }
  }
}

   function searchLocationsNear(center) { 
     var radius = document.getElementById('radiusSelect').value;
     var searchUrl = 'phpsqlsearch_genxml2.php?lat=' + center.lat() + '&lng=' + center.lng() + '&radius=' + radius;
         //var searchUrl = 'phpsqlsearch_genxml2.php?lat=' + center.lat() + '&lng=' + center.lng() + '&radius=' + radius + '&address=' + address;
     GDownloadUrl(searchUrl, function(data) {
       var xml = GXml.parse(data);
       var markers = xml.documentElement.getElementsByTagName('marker');
       map.clearOverlays();

       var sidebar = document.getElementById('sidebar');
       sidebar.innerHTML = '';
       if (markers.length == 0) {
         sidebar.innerHTML = 'No results found.';
         map.setCenter(new GLatLng(40, -100), 4);
         return;
       }

       var bounds = new GLatLngBounds();
       for (var i = 0; i < markers.length; i++) {
                 var ID       = markers[i].getAttribute('ID'); 
                 var name     = markers[i].getAttribute('name');
        // var address  = markers[i].getAttribute('address');
                 var street    = markers[i].getAttribute('street');
                 var city      = markers[i].getAttribute('city');
                 var wait      = markers[i].getAttribute('wait');
                 var collected = markers[i].getAttribute('collected');
                 var min       = markers[i].getAttribute('min');
                 var sat       = markers[i].getAttribute('sat');
                 var nps       = markers[i].getAttribute('nps');
         var score     = markers[i].getAttribute('score');
         var distance  = parseFloat(markers[i].getAttribute('distance'));
         var point     = new GLatLng(parseFloat(markers[i].getAttribute('lat')),
                                 parseFloat(markers[i].getAttribute('lng')));
                 //var d = new Date('collected');
                 //var e = dateFormat('collected', "dddd, mmmm dS, yyyy, h:MM:ss TT");

        // var marker = createMarker(point, name, address, wait);
                 var marker = createMarker(point, name, street, city, wait, collected, distance, min, nps, score);
         map.addOverlay(marker);
        // var sidebarEntry = createSidebarEntry(marker, name, address, wait, distance);
                 var sidebarEntry = createSidebarEntry(marker, name, street, city, wait, distance, collected, min, nps, score);
         sidebar.appendChild(sidebarEntry);
         bounds.extend(point);
       }
       map.setCenter(bounds.getCenter(), map.getBoundsZoomLevel(bounds));
     });
   }

    function createMarker(point, name, street, city, wait, collected, distance, min, nps) {
      var marker = new GMarker(point);
      //var html = '<b>' + name + '<\/b> <br/>' + address + '<br/>' + wait +' minutes';
      var html = '<b>' + name + '<\/b> <br/>' + street + ', '+ city + '<br/>' + 'Wait Time:&nbsp;' + wait + '&nbsp;' + min + '<br/>' + 'Updated:&nbsp;&nbsp;&nbsp;&nbsp;'
          + collected + '<br/>' +'Distance:&nbsp;&nbsp; ' + distance.toFixed(1) + '&nbsp;miles' + '<br/>';

          GEvent.addListener(marker, 'click', function() {
        marker.openInfoWindowHtml(html);
      });
      return marker;
    }

    function createSidebarEntry(marker, name, street, city, wait, distance, collected, min, nps, score) {
      var div = document.createElement('div');
     // var html = '<b>' + name + '<\/b> ' + distance.toFixed(1) + ' miles <br/>' + address + '<br/>' + wait +' minutes';
          //var html = '<b>' + name + '<\/b> ' + distance.toFixed(1) + ' miles <br/>' + street + ', ' + city + '<br/>' + wait +' minutes';
          var html = '<span class="sidefont">' + '<b>' + name + '<\/b>' + '<br/>' + '&nbsp;&nbsp;GovRank:&nbsp;&nbsp;&nbsp;&nbsp;' + score + '<br/>' +
          '&nbsp;&nbsp;Wait Time:&nbsp;' +   '<font color=#336FF>' + wait + '&nbsp;' + min + '<br/>' + '<\/font>' +  
          '&nbsp;&nbsp;' + '<font size="-5"><i>' + 'Updated&nbsp;'  + collected + '&nbsp;pt' + '<\/i><\/font>' + '<\/span>';

      div.innerHTML = html;
      div.style.cursor = 'pointer';
      div.style.marginBottom = '5px'; 
      GEvent.addDomListener(div, 'click', function() {
        GEvent.trigger(marker, 'click');
      });
      GEvent.addDomListener(div, 'mouseover', function() {
       // div.style.backgroundColor = '#eee';
                div.style.backgroundColor = '#3366FF';
      });
      GEvent.addDomListener(div, 'mouseout', function() {
        div.style.backgroundColor = '#fff';
      });
      return div;
    }
    //]]>

</script>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Header</title>
<link href="stat.css" rel="stylesheet" type="text/css" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Footer</title>
<link href="stat.css" rel="stylesheet" type="text/css" />
<style type="text/css">
/*<![CDATA[*/
 span.c4 {color: #093}
 div.c3 {color: #000; font-size: 14px; height: 450px; overflow: auto; text-align: left; width: 350px}
 div.c2 {height: 450px; overflow: hidden; text-align: left; width: 600px}
 div.c1 {font-family: Arial, sans-serif; font-size: 11px; text-align: left; width: 600px}
/*]]>*/
</style>
</head>
<!--script type="text/javascript"
          src="http://maps.googleapis.com/maps/api/js?sensor=false">
          </script-->
<!--script type="text/javascript"
          src="http://maps.googleapis.com/maps/api/js?key=AIzaSyDAB1Q6VnjM9eLivEdelHRuXIzvFeSdvXo&sensor=true">
          </script-->
<!--script type="text/javascript" src=""></script-->
<!--body onload="load()" onunload="OnUnload()"-->
<body onload="load()">
<div class="story"><!--p class="basic-paragraph"><!==body onload="load()" onunload="GUnload(); Capture();"--></div>
<div id="context"></div>
<div class="c1"></div>
<table align="left">
<tr>
<td>
<table align="left">
<tr>
<td valign="bottom">
<table align="left">
<tr>
<td valign="bottom"><span class="no-style-override-2">W</span><span class="no-style-override-3">AIT</span><span class="no-style-override-2">H
</span><span class="no-style-override-3">EALTH.COM</span></td>
</tr>
<tr>
<td valign="bottom"><span class="no-style-override-4">Compare Government Rankings and Patient Wait Times at Hospitals</span></td>
</tr>
<!--tr><td width="600px"><hr align=left noshade size=2 width=80% color=#b4b4b4></td></tr--></table>
</td>
</tr>
</table>
</td>
</tr>
<tr>
<td><!--form action="test_form.php" method="post" name="form1" onsubmit="searchLocations(); ajaxrequest('test_form.php', 'resp'); return false;"-->
<div id="resp"></div>
<form action="capture_search.php" method="post" name="form1" id="form1"></form>
<table align="left">
<tr align="top">
<td><span class="no-style-override-9">Enter Hospital Name, City, or Zip</span></td>
<td><span class="no-style-override-9">  Search Radius</span></td>
</tr>
<tr>
<td valign="bottom"><input type="text" id="addressInput" size="20" /></td>
<td valign="bottom"><select id="radiusSelect">
<option value="10" selected="selected">10 miles</option>
<option value="5">5 miles</option>
<option value="20">20 miles</option>
</select></td>
<td valign="bottom"><input type="submit" onclick="searchLocations(); ajaxrequest('capture_search.php', 'resp'); return false;" onkeypress="this.onclick()" 
value="Find Hospitals" /></td>
<!--td valign="bottom"><input type="text" onkeypress="searchLocations(); OnUnload();"/></td--></tr>
</table>
<!--/form--></td>
</tr>
<!--/table-->
<tr>
<td>
<table align="left" border="1"><!--tr><td colspan="1"><hr align=left noshade size=2 width=160% color="#FF0000"></td></tr-->
<!--tbody--><!--Map-->
<tr>
<td align="left">
<div id="map" class="c2"></div>
</td>
<!--list of places on map -->
<td align="left">
<div id="sidebar" class="c3">Detailed results will appear here.</div>
</td>
</tr>
<!--/tbody--></table>
<div>
<table>
<tr>
<td>
<table align="left">
<tr>
<td>
<table align="left"><!--tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr-->
<!--tr><td width="600px"><hr align=left noshade size=2 width=80% color=#b4b4b4></td></tr-->
<tr>
<td align="left">
<div id="footer"><span class="no-style-override-5"><a href="index.php">Home</a> |   <a href="about.php">About</a> |   <a href="contact.php">Contact</a> |   <a href="display_wait.php">Show All</a>  |  <a href="grade.php">GovRank</a> |  <a href="search_ratings.php"><span class="c4">Rate a Hospital</span></a></span></div>
</td>
</tr>
</table>
</td>
</tr>
</table>
</td>
</tr>
</table>
</div>
<!--script type="text/javascript">
  //var x="one";
  window.location.href = "http://www.capture.php?var=" + address;
</script--></td>
</tr>
</table>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T17:31:59.957

v2 API 已弃用，不再受到积极支持。虽然[常见问题解答](https://developers.google.com/maps/faq#browsersupport)说 IE6+：

> 谷歌地图 JavaScript API V2：
> 
> *   IE 6.0+ (Windows)
> *   Firefox 2.0+（Windows、Mac OS X、Linux）
> *   Safari 3.1+ (Mac OS X, iOS)
> *   铬 (Windows)

我怀疑是否正在做任何工作来支持新版本 IE 的怪癖。

# grails - 有什么理由在 linux 和 windows 上运行 Grails？

> ID：13427278
> 
> 赞同：2
> 
> 时间：2012-11-17T03:10:05.050
> 
> 标签：grails

我知道在 Windows 中使用 Ruby on Rails 进行开发并不总是那么容易，而且我读到很多抱怨说它与 Windows 不完全兼容。

grails是一样的吗？我是否在 Windows/Linux/OSX 上开发是否重要？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T03:44:54.747

使用您喜欢的操作系统。几年来，我一直在工作中（因为我必须这样做）在 Windows 上开发 Grails 应用程序。工作之余，我专门使用 Linux。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T06:38:41.610

在我所在的地方，人们使用 Linux 和 Windows 在 Grails 中进行开发。关于操作系统特定的东西没有问题。

事实上，您应该更关心您拥有的 Java 风格和版本（一些 linux 发行版具有开源实现），当然还有 Grails 版本。

我的建议：

*   选择你想要的任何操作系统（我什至在同一个 Grails 项目中同时使用这两种操作系统都没有问题）
*   尝试使用 Oracle JDK（对我来说 openJDK 有点慢）
*   选择一个 Grails 版本并尽可能地坚持它（最好不要更改版本，升级项目可能会很痛苦）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T20:45:12.333

我在 Windows 和 Linux 上开发了 Grails 应用程序。恕我直言，使用您最高效的操作系统并拥有您想要的工具集。总的来说，Linux 在可用工具方面对程序员更友好。Windows 开发者社区正在提出一些有趣的项目，例如 Chocolatey 和 Console2。我个人更喜欢 Linux，因为除了学习 Grails 之外，它还为我提供了更多的学习机会。

# facebook-graph-api - Facebook Graph API - 无法访问公共粉丝页面

> ID：13427280
> 
> 赞同：0
> 
> 时间：2012-11-17T03:10:17.923
> 
> 标签：facebook-graph-api

我正在使用图形 API 来检索信息，我偶然发现了图形 API 不会返回任何信息的问题。我指的是[http://facebook.com/JubilationDanceMinistry](http://facebook.com/JubilationDanceMinistry)可以公开访问和查看的页面，但是当我转到 Graph API URL：[http](http://graph.facebook.com/JubilationDanceMinistry) ://graph.facebook.com/JubilationDanceMinistry时，它被拒绝了。我知道[Facebook](https://developers.facebook.com/bugs/160155304123891)是通过设计来解释这个问题的。

> 我们故意不为这种情况返回更具体的例外；错误消息包括无效 ID、不存在的对象、已删除的对象、由于人口统计限制而对调用者不可见的对象、由于内容所有者设置了排除调用者的隐私设置而不可见的对象、内容不可见是因为内容所有者已阻止来电者，因为**内容所有者已禁用平台应用程序访问有关其帐户的任何信息**等*（强调添加）*

所以原因很可能是平台应用程序访问已被禁用，但是我在任何地方都没有看到任何设置，所以我怀疑是这种情况。有人对这里出了什么问题有任何建议吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T03:23:00.387

> 我指的页面[http://facebook.com/JubilationDanceMinistry](http://facebook.com/JubilationDanceMinistry)可以公开访问并查看

不是真的——当我点击那个链接时，我会被带到 FB 主页，尽管我已经登录到 Facebook。因此，我认为可以公平地假设此页面*不可*公开访问。存在访问限制（可能基于国家/地区，因为年龄和酒精限制不应阻止我访问它）。

在这些情况下，您只能使用用户访问令牌获得访问权限——因为这是 Facebook 验证请求者是否被允许查看内容的唯一方法。

# javascript - 随机播放所有具有相同类的 DIVS

> ID：13427287
> 
> 赞同：7
> 
> 时间：2012-11-17T03:11:28.277
> 
> 标签：javascript, jquery, random, shuffle

我需要做的是：原始状态：

```
<div class="shuffledv">
<div id="1"></div>
<div id="2"></div>
<div id="3"></div>
</div>
<div class="shuffledv">
<div id="4"></div>
<div id="5"></div>
<div id="6"></div>
</div> 
```

洗牌后：

```
<div class="shuffledv">
<div id="2"></div>
<div id="3"></div>
<div id="1"></div>
</div>
<div class="shuffledv">
<div id="5"></div>
<div id="4"></div>
<div id="6"></div>
</div> 
```

第一个 div 中的 div 保留在那里但被洗牌，同样的情况发生在具有相同类的第二个 div 上。要在特定 div 中随机播放 div，我使用如下内容：

```
function shuffle(e) {               // pass divs inside #parent to the function
            var replace = $('<div>');
            var size = e.size();

            while (size >= 1) {
                var rand = Math.floor(Math.random() * size);
                var temp = e.get(rand);      // grab a random div from #parent
                replace.append(temp);        // add the selected div to new container
                e = e.not(temp); // remove our selected div from #parent
                size--;
            }
            $('#parent').html(replace.html()); // add shuffled divs to #parent
} 
```

所谓的谎言：`shuffle('#parent .divclass')` 所有有类的 Div`divclass`都在里面，`#parent` 我认为它应该开始像

```
function shuffle() {        
            $(".shuffledv").each(function() { 
```

然后执行某种形式的原始功能，但此时我完全迷失了方向。我不知道如何从这里继续前进。如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-17T03:29:12.667

看看[这个 jsfiddle](http://jsfiddle.net/bv3MN/1/)。基本上我们所做的就是为每个容器`shuffledv`div 找到所有子 div 并将它们存储在一个列表中，然后我们将它们从 DOM 中删除，例如：

```
$(".shuffledv").each(function(){
        var divs = $(this).find('div');
        for(var i = 0; i < divs.length; i++) $(divs[i]).remove(); 
```

[然后我从这里](https://stackoverflow.com/questions/2450954/how-to-randomize-a-javascript-array)抓取了 Fisher-Yates 洗牌算法来随机化我们的 div 列表，最后我们将它们附加回父容器，如下所示：

```
for(var i = 0; i < divs.length; i++) $(divs[i]).appendTo(this); 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-17T03:42:44.560

给这个初步运行：

```
(function () {
    "use strict";
    // Cycle over each .shuffledv HTMLElement
    $(".shuffledv").each(function () {
        // Remove all divs within, store in $d
        var $d = $(this).find("div").remove();
        // Sort $d randomnly
        $d.sort(function () { return Math.floor(Math.random() * $d.length); });
        // Append divs within $d to .shuffledv again
        $d.appendTo(this);
    });
}()); 
```

演示：http: [//jsfiddle.net/uYyAH/2/](http://jsfiddle.net/uYyAH/2/)

# cygwin - cygdrive 前缀在 bash 脚本中不起作用

> ID：13427288
> 
> 赞同：1
> 
> 时间：2012-11-17T03:11:49.913
> 
> 标签：cygwin

/cygdrive/c 在我的 bash 脚本中不起作用。此处列出了代码行。

```
PRGPATH="`dirname "$0"`" exec "${PRGPATH}/../../java" .... "${PRGPATH}/xxxx.jar" 
```

结果是`Unable to access jarfile /cygdrive/c/app/xxxx.jar`

但如果我使用`ls /cygdrive/c/app/xxxx.jar`，它就在那里。如果我替换`/cygdrive/c/`为`c:/`then，则脚本有效。为什么`/cygdrive/c/`在脚本中不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T05:08:09.927

`java.exe`是一个 Windows 程序，`c:\...`在其参数中需要 Windows 样式的路径，而不是 Cygwin 样式的`/cygdrive/c/...`路径。

Cygwin 带有[cygpath](http://cygwin.com/cygwin-ug-net/using-utils.html#cygpath)实用程序，用于在两种路径样式之间进行转换。

试试这个：

```
PRGPATH="`dirname "$0"`" exec "${PRGPATH}/../../java" .... "$(cygpath -w "${PRGPATH}/xxxx.jar")" 
```

# javascript - chm/pdf 替代基于 html5+js 并使用用户的网络浏览器打开

> ID：13427292
> 
> 赞同：0
> 
> 时间：2012-11-17T03:12:23.703
> 
> 标签：javascript, jquery, html, chm

我在网上阅读了大量类似的问题，但没有发现任何我可以接受的问题。所以，我正在寻找一个类似于 chm/pdf 的离线使用的 html5+css+js 解决方案。我的要求：
1.所有资源都存储在一个文件中，我想直接轻松地编辑源代码。
2\. 支持javascript并由浏览器打开。
3\. 我**不需要**内置的索引/搜索功能。
我试图自己写一些东西，但它无法摆脱严重的内存泄漏......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-30T19:23:15.837

[MHTML](http://msdn.microsoft.com/en-us/library/exchange/aa563064)将是一个替代方案。这里有些例子：

*   [MHTML 的关键概念](http://msdn.microsoft.com/en-us/library/exchange/ms988645)
*   [身体部位的 MIME 层次结构](http://msdn.microsoft.com/en-us/library/exchange/aa563064)

另一种选择是 SVG 与 data-uris 嵌入图像和标记。这里有些例子：

*   [在 SVG 中嵌入 data-uris](http://en.wikibooks.org/wiki/Cascading_Style_Sheets/Data_URIs)
*   [SVG 是否支持嵌入位图图像？](https://stackoverflow.com/questions/6249664/does-svg-support-embedding-of-bitmap-images)

# c# - 我们需要在观察者设计模式单元测试中测试什么？

> ID：13427293
> 
> 赞同：3
> 
> 时间：2012-11-17T03:12:30.157
> 
> 标签：c#, unit-testing, design-patterns

我是软件测试的新手。我想知道为观察者模式进行单元测试的正确方法是什么？例如，如果我们实现了以下 4 个类：

*   主题类（附加/分离/通知）
*   观察者接口类（更新虚方法）
*   ConcreteSubject 类
*   ConcreteObserver（具体更新方法）

如何为这些类中的每一个编写测试轨道？有什么好的例子可以参考吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T04:00:35.030

这是一个很难回答的问题，因为它非常抽象。通常，您不会为某些模式编写测试，而是为方法编写单元测试。或者您根据用例编写测试。最重要的是，当您提供输入时，预期的输出是什么？使用什么模式并不重要。输入进去，结果出来。结果有效吗？那是你的考验。

# xcode - 是否可以更改 Xcode 用户界面的布局？

> ID：13427294
> 
> 赞同：0
> 
> 时间：2012-11-17T03:12:39.397
> 
> 标签：xcode, xcode4.5

我的视力很差，没有周边视觉，而且一只眼睛失明，作为一名程序员，如果界面的布局不能帮助我专注于一般区域，这可能会很困难。基本上，我不能同时看到所有的屏幕，我坐在离屏幕 7 英寸的地方，需要在 27 英寸的显示器上移动我的头才能一次看到所有的屏幕。

对我有很大帮助的一件事是，如果我可以将对象库移动到项目导航器下方的左侧，并且可能将助手编辑器放在界面构建器下方而不是旁边。我更容易专注于其他元素下方而不是旁边的事物，因为我的垂直视觉比水平视觉更好。

我是一个非常注重键盘快捷键的人，因为我的鼠标也有问题，我经常会丢失它，所以我更喜欢编辑器选项卡，如果单击文件时它不会更改当前编辑器并且我会有所帮助需要双击打开文件，这可能吗？

来自 NetBeans，我可以将界面元素移动到我选择的任何地方，我很乐意将其应用于 Xcode，非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T04:43:13.750

要将助理编辑器放置在 IB 下，请转到查看菜单->助理编辑器->垂直堆叠的所有编辑器。

不幸的是，Apple 似乎没有显示移动对象库的选项。

# jquery - 基于属性 jQuery-UI-Map (Google maps API V3) 显示/隐藏标记

> ID：13427301
> 
> 赞同：2
> 
> 时间：2012-11-17T03:14:47.333
> 
> 标签：jquery, google-maps, jquery-ui-map

我一直在使用 jQuery-UI-Map 插件（[http://code.google.com/p/jquery-ui-map/](http://code.google.com/p/jquery-ui-map/)）开发一个映射程序。我遇到了一个问题，我试图以多种不同的方式解决但无济于事。

我有一个下拉菜单`onchange`应该过滤地图上的标记。

这是与此问题相关的代码片段。使用此代码，当我从下拉列表中选择一个值时，所有标记都将被删除。

```
 $('#map').gmap().bind('init', function (evt, map) {
    $.getJSON('controllers/markers.json', function (data) {
        $.each(data.markers, function (i, marker) {
            $('#map').gmap('addMarker', {
                'position': new google.maps.LatLng(marker.latitude, marker.longitude),
                'icon': "https://chart.googleapis.com/chart?chst=d_bubble_text_small&chld=bb|" + marker.projectNumber + "|004162|FFFFFF|",
                'bounds': false,
                'statusSelect': marker.status
            })
        });
        $("#statusSelect").change(function () {
            $('#map').gmap('find', 'markers', {
                'property': 'statusSelect',
                'value': $(this).val()
            },

            function (marker, found) {
                if (found) {
                    $('#map').gmap('addBounds', marker.position);
                }
                marker.setVisible(found);
            });
        });
    });
}); 
```

这是我正在使用的 JSON：

[http://designsbymitch.com/markers.json](http://designsbymitch.com/markers.json)

编辑：这是状态下拉列表的 HTML -

```
<select id="statusSelect">
        <option value="Created">Created</option>
        <option value="Working">Working</option>
        <option value="Complete">Complete</option>
        <option value="Task">Task</option>
        <option value="Void">Void</option>
        <option value="delete">delete</option>
        <option value="Paid">Paid</option>
        <option value="Overdue">Overdue</option>
        <option value="Invoiced">Invoiced</option>
        <option value="Non-Billable Expense">Non-Billable Expense</option>
        <option value="Billable Expense">Billable Expense</option>
        <option value="Unpaid">Unpaid</option>
        <option value="new status mitch">new status mitch</option>
        <option value="new status mitch again">new status mitch again</option>
</select> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-25T20:16:21.590

这是一个常见问题，可能是 UI 中的错误，您设置的属性是数字，您应该将其设置为字符串，将 marker.status 替换为 ""+marker.status 和您发现的相同内容！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T03:28:11.403

问题似乎是您正在设置调用时调用的自定义属性`statusSelect`，`addMarker`然后查找调用`tags`时调用的属性`find`。更改`property: 'tags'`为`property: 'statusSelect'`它应该可以工作。

当你绑定你的事件时，你也在做一些相当奇怪的事情——你`change`每次创建一个标记时都会绑定一个新事件，所以如果你有 100 个标记，你将有 100 个`change`事件侦听器，它们都会依次触发并执行同样的事情。您应该移出`$("#statusSelect").change(...)`您的`$.each`函数，因此只有一个事件处理程序被绑定。

因此，您的代码应为：

```
$('#map').gmap().bind('init', function (evt, map) {
    $.getJSON('controllers/markers.json', function (data) {
        $.each(data.markers, function (i, marker) {
            $('#map').gmap('addMarker', {
                'position': new google.maps.LatLng(marker.latitude, marker.longitude),
                'icon': "https://chart.googleapis.com/chart?chst=d_bubble_text_small&chld=bb|" + marker.projectNumber + "|004162|FFFFFF|",
                'bounds': false,
                'statusSelect': marker.status
            })
        });
        $("#statusSelect").change(function () {
            $('#map').gmap('find', 'markers', {
                'property': 'statusSelect',
                'value': $(this).val()
            },

            function (marker, found) {
                if (found) {
                    $('#map').gmap('addBounds', marker.position);
                }
                marker.setVisible(found);
            });
        });
    });
}); 
```

# html - 从网页链接到 PDF 文档中的特定部分（锚点）

> ID：13427302
> 
> 赞同：33
> 
> 时间：2012-11-17T03:14:58.607
> 
> 标签：html, pdf, hyperlink, anchor

[Adobe](http://www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/pdf_open_parameters.pdf)有一个标准，理论上指定从在浏览器中单击的链接打开 PDF 文档，以打开 PDF 文档的特定部分（也称为“锚”、“命名参考”）。如果您想参考大型 PDF 的特定部分（例如某些标准或规范），此功能应该会有很大帮助。

但是，从我现在看到的情况来看，对这个标准的支持几乎不存在。

例如，这些链接应该在第 3.2.6 节“带注释的类型”中打开 Scala 参考 PDF：

1.  [http://www.scala-lang.org/docu/files/ScalaReference.pdf#subsection.3.2.6](http://www.scala-lang.org/docu/files/ScalaReference.pdf#subsection.3.2.6)
2.  [http://www.scala-lang.org/docu/files/ScalaReference.pdf#nameddest=subsection.3.2.6](http://www.scala-lang.org/docu/files/ScalaReference.pdf#nameddest=subsection.3.2.6)
3.  [http://www.scala-lang.org/docu/files/ScalaReference.pdf#page=23](http://www.scala-lang.org/docu/files/ScalaReference.pdf#page=23)

（从技术上讲，变体 #3 应该打开第 23 页，这基本上是相同的目的地）

有没有一种工作方式（可能是几个垫片、专有包装器或其他任何东西）可以在大多数系统上进行这项工作？Adobe Reader 插件的使用份额是多少，我应该关心其他系统吗？

如果不可能，至少我想为每个平台（即 Windows、Linux、Mac）找到一个可行的解决方案，如果他们希望能够使用命名的目标链接，我可以向我的站点用户推荐这些解决方案。

根据我的测试：

*   Windows、MSIE/Firefox/Chrome、Adobe Acrobat Reader 插件 - 所有变体都适用于版本 9+，但是：
    *   MSIE 有一个奇怪的缓存问题（即锚在文档被缓存之前不起作用）
    *   旧版本不起作用
    *   它有[链接格式的问题](http://helpx.adobe.com/acrobat/kb/link-html-pdf-page-acrobat.html)：一般来说，它应该是到真实 Web 服务器的常规绝对链接，以“http://”开头。`\\HOST\dir\file.pdf#something`相对链接、 samba风格链接（
*   Windows，任何设置为作为单独进程运行 Adob​​e Acrobat Reader 的浏览器 - 不起作用
*   Windows、任何浏览器、FoxIt Reader - 不工作
*   Windows、任何浏览器、CutePDF - 不起作用
*   Linux/Konqueror/Okular - 只有变体 #1 有效
*   Linux，设置为运行 Okular 或任何其他 PDF 查看器作为外部进程的任何其他浏览器 - 不起作用（因为浏览器不会在命令行中传递任何“#arguments”）
*   任何操作系统、Firefox 15+ [PDF.js 内部 PDF 查看器](https://mozillalabs.com/en-US/pdfjs/)- 不起作用

如果您尝试使用各种不同的组合进行测试，我将不胜感激。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-17T09:15:35.513

通常似乎起作用的是变体＃4，但在这种情况下，使用页码作为实际划分为PDF文档中的页面

[http://www.scala-lang.org/docu/files/ScalaReference.pdf#page=31](http://www.scala-lang.org/docu/files/ScalaReference.pdf#page=31)

PDF 文档的页码从正确的内容开始，在目录之后，但该编号与 #page=... 中使用的编号不同

# c++ - 输入迭代器必须有一个 const 取消引用运算符吗？

> ID：13427305
> 
> 赞同：0
> 
> 时间：2012-11-17T03:15:10.230
> 
> 标签：c++, iterator, constants

输入迭代器是否必须具有`const`取消引用运算符，或者仅仅是非常量版本也满足其要求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T03:37:29.693

不。

例如“输入迭代器”。

这通常是从流中读取的。取消引用它会读取一个值并更改底层流。在使用 ++ 运算符之前，使用取消引用运算符再次无效。

[http://www.sgi.com/tech/stl/InputIterator.html](http://www.sgi.com/tech/stl/InputIterator.html)

### 根据评论进行编辑。

你问能不能？

> 当然，你可以用 C++ 做任何事情。

还是你问应该？

> 现在取决于哪个位是 const：
> 
> *   您的意思是应该通过 const 方法取消引用吗？
> *   或者你的意思是返回的引用（对对象）是常量？

我个人认为这两个问题的答案是否定的。
我认为很确定这不会违反输入迭代器的约束（在上面的链接中定义）。

**但是**我认为返回一个对象的非成本引用是不明智的，如果用户对其进行了变异，则该对象也不会改变流所引用的底层对象（这违反了最小意外原则）。

总的来说，我认为你需要澄清你的问题。
如果您更详细地解释上下文并询问特定签名违反约束的天气，那么我可能会给出更好的答案。目前这个问题过于模糊，因此我只能以过于笼统的方式表达答案。

# javascript - 局部变量影响全局变量 - Javascript 变量范围

> ID：13427311
> 
> 赞同：0
> 
> 时间：2012-11-17T03:15:40.653
> 
> 标签：javascript

> **可能的重复：**
> [可变提升](https://stackoverflow.com/questions/3725546/variable-hoisting)

```
 var a = "global";

    //version 1
    function changeGlobal(){
        alert(a); //why is 'a' undefined here?
        if(a){ 
        var a = "local";
        alert(a);
        }
    }
    //version 2
    function changeGlobal(){
        alert(a); //why is 'a' 'global' here? what diff does 'var a="local"' make?
        if(a){ 
        //var a = "local";
        alert(a);
        }
    }
    changeGlobal(); 
```

问题是内联的。帮助我理解变量范围。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T03:18:31.100

在 javascript 中，变量声明被“提升”到函数的顶部，与您声明它们的位置无关。

因此，在 changeGlobal 的第一个变体中，当您声明 时`var a = "local"`，`a`变量声明被提升到顶部。变量的赋值也不会被提升，所以在你 alert 的时候`a`，它是一个未赋值的变量，因此是未定义的。

那是，

```
function changeGlobal(){
    alert(a); //why is 'a' undefined here?
    if(a){ 
    var a = "local";
    alert(a);
    }
} 
```

相当于

```
function changeGlobal(){
    var a;    // hoisted here (not assigned a value yet)
    alert(a); //why is 'a' undefined here?
    if(a){ 
    a = "local"; // only assigned a value here
    alert(a);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T03:21:38.880

在版本 1 中，您声明了一个名为的局部变量`a`，该变量优先`a`于`changeGlobal`函数中的全局变量。即使它是在`alert(a);`调用之后定义的，它的定义也被“提升”到范围的开头，但直到该`var a = "local";`行才被初始化。这就是`alert(a);`节目的原因`undefined`。

在版本 2 中，因为没有 local `a`，所以您总是在处理`a`在函数运行之前已经初始化的 global。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-17T03:34:50.343

JavaScript 具有词法作用域，其中一个变量可以从它被`var`编辑的程序/函数中取消引用，然后向下（如引用它不会抛出`ReferenceError`.语句也
将`var`被提升，并且初始值设置为`undefined`.

或者用外行的话来说，变量的作用域是定义它们的函数，并且所有变量在函数执行期间的任何时候都可用，尽管可能尚未分配值。

结合起来，这就是您所观察到的 - 一个局部 var 遮蔽了全局 var。

# c++ - 为什么 unknwn.h 中需要三个前向声明？

> ID：13427312
> 
> 赞同：0
> 
> 时间：2012-11-17T03:15:42.837
> 
> 标签：c++, winapi

我正在使用 JNAerator 解析 Windows API 头文件，以便可以从 JVM 引用它们。但是，我对 C/C++ 的使用不如其他语言舒服，但我需要先了解这些头文件，然后才能正确解析它们。

我特别关注 Unkwn.h，它基本上包含

```
#include "rpc.h"
#include "rpcndr.h"

#ifndef COM_NO_WINDOWS_H
  #include "windows.h"
  #include "ole2.h"
#endif /*COM_NO_WINDOWS_H*/

//Some forward declarations
typedef interface IUnknown IUnknown;
typedef interface AsyncIUnknown AsyncIUnknown;
typedef interface IClassFactory IClassFactory;

#include "wtypes.h"

//followed by the full declarations for the interfaces IUnkown, AsyncIUnkown and IClassFactory and their methods, but no actual implementations of course. 
```

我认为如果 wtypes.h 引用了类型（IUnkown、AsynIUnkown 或 IClassFactory），则需要这些前向定义，但我在 wtypes.h 或 wtypes.h 引用的其他标头中找不到对这些类型的任何引用。那么为什么需要前向声明（或者我错过了什么）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T03:34:01.783

这些不是前向声明。这些是类型定义，它们定义接口数据类型。这当然是微软的扩展。定义所做的是确保`IUnknown`（例如）引用该名称的接口。

# bash - 需要 bash 脚本来监视目录并对新文件和修改文件执行操作

> ID：13427313
> 
> 赞同：1
> 
> 时间：2012-11-17T03:15:47.910
> 
> 标签：bash, shell, vim, inotify

我想看`mydirectory/`

我`inot.sh`在后台创建并运行它`# ./inot.sh &`

`inot.sh`这是我尝试的脚本的第一个版本：

```
#!/bin/bash    

inotifywait -m -e create,modify --exclude '\*.swp?$' . |
while read dir ev file; do
        cp "$file" inotfiles/"$file"
done 
```

注意：排除模式应该排除 vim 交换文件，但似乎还没有工作。

如果创建（或更改）任何文件，我希望将整个文件复制到存储文件夹。现在我专注于`create,modify`看看我是否可以让任何东西正常工作。

此时，FTP 上传似乎可以正常工作。对文件使用命令行会`touch`复制空文件。但是随后使用`vim`它来编辑它会导致一堆问题。

我在 vim 中编辑了一个现有文件，但没有更改它。当我输入文件时，我得到：

```
cp: cannot stat `.zzzzzoo.txt.swx': No such file or directory
~
~
~
~
~ 
```

看起来第一行是文件的一部分，但事实并非如此。它是 inotify 干扰 vim 查看器。退出后，一切看起来都很正常。

`cp`但有时我在退出 vim 时会收到相同的错误消息。

如果我编辑文件并退出并写入文件，我会得到：

从 vim 退出后，我得到：

```
~
~
~
~
~
~
"zzzzzoo.txt" cp: cannot stat `4913': No such file or directory
"zzzzzoo.txt" 1L, 11C written
[root@server mydirectory]# cp: cannot stat `.zzzzzoo.txt.swp': No such file or direc
tory 
```

波浪线的第一部分来自vim。

```
"somefile.txt" cp: cannot stat `4913': No such file or directory
"somefile.txt" 7L, 129C written 
```

编辑：添加 1 个我忘记提及的错误

当我在 vim 中打开复制的文件时，我收到一条通知，vim 找到了相同文件名的交换文件。

```
E325: ATTENTION
Found a swap file by the name "inotfiles/.somefile.txt.swp" 
```

等等等等

```
Swap file "inotfiles/.somefile.txt.swp" already exists!
[O]pen Read-Only, (E)dit anyway, (R)ecover, (D)elete it, (Q)uit, (A)bort: 
```

//结束编辑部分

所以我知道我可以通过正确排除 vim 交换文件来解决这个问题，但在我看来，更大的问题是“为什么 cp 错误会进入标准输出以及如何阻止它们？” 我可能应该在其他地方管它们。

我还需要一种方法来防止无限循环。有没有其他方法可以写那个部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T13:15:09.467

与其要求`inotifywait`注意`vim`的交换文件，不如`vim`将它的临时文件放在更好（侵入性更小）的位置：

例如，如何：

```
mkdir -p ~/tmp/.vim 
```

然后在你的`.vimrc`

```
set backupdir^=~/tmp/.vim/
set directory^=~/tmp/.vim/ 
```

[http://vim.wikia.com/wiki/Remove_swap_and_backup_files_from_your_working_directory](http://vim.wikia.com/wiki/Remove_swap_and_backup_files_from_your_working_directory)

想一想：如果你*确实*让你的正则表达式排除了交换文件——然后一个`emacs`用户加入你并想用它`emacs`来编辑同一目录中的文件——你会在不知不觉中遇到一堆正则表达式！

# php - 给 MySQL UPDATE 以不覆盖列值的默认值？

> ID：13427314
> 
> 赞同：1
> 
> 时间：2012-11-17T03:15:56.537
> 
> 标签：php, mysql, sql-update

我想知道是否可以在 MySQL 查询中使用任何特殊关键字来代替格式`SET col = 'value'`中的值，以便不覆盖行中特定列的当前条目。

例如，我有以下 PHP 方法：

```
 public function update_item($id, $position = false, $title = false, $image_url = false, $paragraph = false) {
        $values     = "item_position = '$position', item_title ='$title', item_image_url = '$image_url', item_paragraph = '$paragraph'";
        $conditions = "item_id = '$id'";

        $query = Database::instance()->update_row($this->table, $values, $conditions);
    } 
```

在上述方法中，变量`$values`存储了所有要更新的值。目前我已经默认每个，`false`但我认为这将覆盖现有的值。

我将不胜感激任何帮助，因为这将使我免于编写一些可能毫无意义的 PHP。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T03:17:35.627

只是不要在更新中列出该列，那么它不会覆盖现有值

# ruby-on-rails - 地理位置和从输入地址获取城市（Rails）

> ID：13427317
> 
> 赞同：1
> 
> 时间：2012-11-17T03:16:45.310
> 
> 标签：ruby-on-rails, ruby, database-design, geolocation

我正在构建的应用程序需要能够根据用户所在的城市/城镇将用户与事件相匹配。我对 Rails 还是比较陌生，对 Geolocation 和在应用程序中使用位置是完全陌生的。我想到了一种设计，其中用户有一个或多个城市，而事件将有一个城市，我希望通过从输入的事件地址获取它而无需专门询问用户来提取它。

主要是为了提供一些外部检查以帮助正确和一致地输入地址，但也为了显示地图，我安装了这个 jquery 地址选择器（https://github.com/sgruhier/jquery-addresspicker）。不幸的是，谷歌返回的数据不包括一个城市，而是一个与城市名称不可靠相关的“地区”或“行政区域”。回归的地方更像是我们家乡的“郊区”。我需要购买的是一个城市，这样我就可以允许用户搜索他们所在城市的所有活动，而不仅仅是他们郊区的活动。

任何人都可以就我如何去做这件事提供建议吗？非常感谢。

编辑：也许应该补充一点，我想在客户端进行地理编码，这样我就不会遇到谷歌地图限制的问题，也不必为地理编码等付费。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T03:23:40.793

有一些 gem 可以为您提供这些功能，并且可能还有其他与地理相关的功能，例如计算距离。

这里有两个最著名的：[https](https://github.com/alexreisner/geocoder) ://github.com/alexreisner/geocoder和[https://github.com/imajes/geokit](https://github.com/imajes/geokit)

将来，我强烈建议您前往[https://www.ruby-toolbox.com/](https://www.ruby-toolbox.com/)以查看已经可以作为 gem 使用的内容，以及目前最流行的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T04:22:41.317

对于原始地址信息，请使用接受纬度/经度输入并返回街道地址组件的[Google Maps API 反向地理编码。](https://developers.google.com/maps/documentation/geocoding/)现代浏览器在用户许可的情况下支持位置感知（地理定位），并会为您提供“趋于接近”浏览器所在位置的纬度/经度。在大多数情况下，这可能会给你一个正确的城市/城镇。

maps API 是 Google 广泛的 API 工具套件的一部分——有一些 gems 可以处理任何 Google API（嗯，大部分），或者查看[Google Maps for Rails](https://github.com/apneadiving/Google-Maps-for-Rails)，这至少会给你一个良好的开端关于如何使用 API。

但是，如果您要验证邮政编码，则此方法会很短，因为位置感知的准确性会因浏览器、设备（对于移动设备更准确）、连接、人口密度、网络覆盖等而异. 此外，调用

如果您可以获得 GPS 准确的纬度/经度，那么它会更加准确……除了在某些情况下，例如在大城市中，单个建筑物将有自己的邮政编码，因此单向或其他几英尺可能很重要.

# mysql - mysql查询矩阵

> ID：13427318
> 
> 赞同：2
> 
> 时间：2012-11-17T03:17:01.507
> 
> 标签：mysql, matrix

我有一些评估数据。可能的值为 (1,2,3,4,5) 并存储在表中，每个问题 1 列。

表评：

```
f1 f2 q3 ...
1  5  2
2  4  3
.
.
. 
```

我想为 2 列 1 矩阵生成：

```
How often is f1=1 when q3=1?
How often is f1=1 when q3=2?
...
How often is f1=5 when q3=5? 
```

所以在我的例子中是一个 5*5 的矩阵。我怎样才能用mysql正确解决这个问题？

我的第一个（工作）尝试是用 25 个工会强行使用它，例如：

```
SELECT count(0) FROM evaluation where q3 = 1 and f2 = 1
union all
SELECT count(0) FROM evaluation where q3 = 1 and f2 = 2
union all
...
union all
SELECT count(0) FROM evaluation where q3 = 5 and f2 = 5 
```

但如何才能以一种好的方式完成呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T04:03:58.583

```
SELECT f1, count(f1), f3
FROM evaluation
GROUP BY f3, f1 
```

将为您提供所有 f3 值的 f1 计数。

# java - JBoss 上的 ATG Web Commerce 与 Weblogic

> ID：13427322
> 
> 赞同：0
> 
> 时间：2012-11-17T03:17:40.383
> 
> 标签：java, performance, jboss, weblogic, atg

我在 ATG Web Commerce 环境中工作，并且正在评估 JBoss 作为应用服务器与 Weblogic 的对比。暂且忽略成本因素，在性能方面，大家对这两个平台都有什么经验吗？此外，可伸缩性是一个非常重要的因素，我有兴趣潜在地将 Coherence 用作缓存层，因此我倾向于 Weblogic，因为我相信它是一个非常简单的插件。

任何意见是极大的赞赏。

布赖恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T14:11:38.583

JBoss AS7 带有 Infinispan 作为默认缓存提供程序。

在这里您可以找到有关 Infinispan 的概述： [http ://www.jboss.org/infinispan](http://www.jboss.org/infinispan)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T16:20:28.153

ATG 存储库现在直接支持 Coherence 以独立于应用程序服务器的方式进行缓存。所有受支持的应用程序服务器的规模大致相同。现在 ATG 归 Oracle 所有，您会发现 ATG 将在 Weblogic 作为其主要平台上进行优化，而之前它首先在 JBoss 上进行了优化。您可以使用 Weblogic 或 JBoss，除非您需要 Weblogic 的一些高级管理功能。ATG 当前不使用任何应用服务器特定功能。此外，ATG 目前不支持 JBoss AS7 或 Infinispan。

# php - wp-ecommerce 中的单个产品图像在 IE 中消失（在其他浏览器中显示良好）

> ID：13427326
> 
> 赞同：0
> 
> 时间：2012-11-17T03:12:33.173
> 
> 标签：php, html, internet-explorer

我有一个为客户构建的 wp-ecommerce 支持的 wordpress 网站。

只有 Internet Explorer 浏览器有问题。单品单页单品图片消失，无法显示图片，但源码中仍有明显的img代码。

这是 wpsc-single_product.php 文件中图像占位符的代码：

```
<div class="image" style="display: table; width:360; margin: auto;height: 430px; position: relative; overflow: hidden; ">

<a href="<?php echo wpsc_the_product_permalink(); ?>">
      <img style="height: auto; max-height:100%; max-width:100%; margin: 0px auto; overflow:hidden;" class="product_image" id="product_image_<?php echo wpsc_the_product_id(); ?>" alt="<?php echo wpsc_the_product_title(); ?>" title="<?php echo wpsc_the_product_title(); ?>" src="<?php echo wpsc_the_product_thumbnail(get_option('product_image_width'),get_option('product_image_height'),'','single'); ?>"/>
</a>

</div> 
```

如果有人可以帮助我们解决问题，以便在单个产品页面中准确显示图像，我将不胜感激。

谢谢你。

# c++ - 您的计算机中缺少“sfml-system.dll”，错误

> ID：13427327
> 
> 赞同：1
> 
> 时间：2012-11-17T03:18:41.093
> 
> 标签：c++, codeblocks, sfml

我一直在关注 SFML 的代码块安装教程：http: [//sfml-dev.org/tutorials/1.6/start-cb.php](http://sfml-dev.org/tutorials/1.6/start-cb.php)

我在教程中做了所有事情，但是当我编译时，我收到错误消息：“程序无法启动，因为您的计算机中缺少 sfml-system.dll。请尝试重新安装程序以解决此问题。

我一直在谷歌搜索解决方案，但到目前为止没有任何效果。我尝试过的东西： - 将 sfml-system.dll 移动到与我的 .exe 相同的目录中 - 将“调试”链接器选项更改为静态和动态。

对此问题的任何帮助将不胜感激，谢谢！地毯嘶嘶声

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T04:31:52.527

首先，您的链接适用于 1.6。最新版本是 2，可能会更好。（在组织/能力等方面 - 理论上增加了更多的改进时间）。

在我下载的 SFML 中，DLL 位于 SFML/bin 文件夹或类似文件夹中。当我之前遇到此错误时，是在我尝试动态链接到它们时，正如您所说，该 DLL 不在目录中。

啊。假设目录不是问题（您可以尝试将其放在它旁边以确保），查看有问题的教程说您还需要定义 SFML_DYNAMIC。出于某种原因，我觉得它说如果你使用 gcc 这并没有什么不同，但这可能是 2 tuturial（可能有不同的 gcc 列出版本），所以我会尝试。（靠近页面底部）。

# javascript - Meteor.js 如何知道我的收藏已在客户端准备就绪

> ID：13427328
> 
> 赞同：6
> 
> 时间：2012-11-17T03:18:44.683
> 
> 标签：javascript, meteor

当集合在客户端上完成加载时，我需要执行特定的渲染任务。了解数据何时在客户端的集合中可用的最佳策略是什么。

我想出了这个解决方案：

```
Meteor.subscribe( 'alldrawings', myRendering );

function myRendering(){
  //do some no-markup stuff with the data
  //(i'm creating canvas objs and drawing on them)
} 
```

这是这样做的方法吗？除了这个还有推荐的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-01-03T12:34:51.357

您可以自己设置一个反应变量：

```
alldrawingsReady = new ReactiveVar(false);

Meteor.subscribe('alldrawings', function() {
    alldrawingsReady.set(true);
});

Tracker.autorun(function(){
    if(!alldrawingsReady.get()) {
        return;
    }

    // Do some no-markup stuff with the data
    // (eg. creating canvas objs and drawing on them)
}); 
```

如果您需要准备好集合**和**模板，请使用：

```
Template.my_template.rendered = function() {
    this.autorun(function(){
        if(!alldrawingsReady.get()) {
            return;
        }

        // Do some DOM manipulations based on the data
    });
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T22:18:41.343

您当然可以使用订阅回调。AFAIK，这是唯一可能检测订阅是否已完全更新的方法。

另一种选择是使用带有集合光标的观察者：http: [//docs.meteor.com/#observe](http://docs.meteor.com/#observe)。但是我认为随着数据的到达，观察者会被一个一个地不断调用，而不是在完成时（仅）一次。

# raytracing - 来自景深采样的加权贡献

> ID：13427339
> 
> 赞同：1
> 
> 时间：2012-11-17T03:21:14.197
> 
> 标签：raytracing

我正在尝试为简单的光线投射器添加一些景深。我使用的方法是，对于每个像素，光线从小孔径区域内的几个随机“眼睛”位置通过该像素的焦点投射，并且来自这些光线中的每一个的颜色样本被平均在一起。

我的问题是：这些样本应该如何加权平均？它只是一个直接的未加权平均值，还是根据光线的起点加权？例如，我可以对它进行加权，使来自光圈中心的光线具有最大权重，并且在光圈的极限处具有最小权重。

我试图从光学方面来理解它：我理解一个基本概念，即镜头只会在特定距离处聚焦点，而任何更近或更远的东西在到达视网膜/框架时都会被涂抹掉. 我假设这种拖尾意味着光的强度也会被拖尾，即在每个像素的基础上减少。但我不知道如何将它应用到我的实现中。我知道要渲染的点有多远：我是否需要根据它与焦距的接近程度来对其进行加权，或者自然采样过程是否考虑到这一点？如果我确实需要在此基础上对其进行加权，那么加权函数是什么样的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T21:57:31.123

我尝试了两种方法，看起来直接平均将所有加权相等的样本效果最好。如果有人可以提供额外的信息来挑战或加强（并希望能解释）这一点，我将不胜感激！

# java - 你如何在java中组合两个对象

> ID：13427345
> 
> 赞同：-1
> 
> 时间：2012-11-17T03:22:42.200
> 
> 标签：java

在将其传递给另一个方法之前，我需要组合 2 个对象。

```
Status status1 = null;
Status status2 = null;  
Status statusCombined = null;   

status1 =  validationService.validateDocument(documentA);
status2 =  validationService.validateDocument(documentB);

if (!status1.equals(status2) {
//merge status1 and status 2 to  statusCombined
  setValidationStatus(validationResults,statusCombined); 
```

将这两个具有相同属性的对象组合在一起的命令是什么？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T03:46:43.980

> 将这两个具有相同属性的对象组合在一起的命令是什么？

在一般意义上，Java 中没有“命令”（或方法）可以将两个对象的“属性”合二为一，因为：

*   谈论“结合”两件事而不说“结合”是什么意思是没有意义的。
*   即使在特定情况下确实有意义，但在一般情况下能够做到这一点也没有意义。
*   即使它在一般情况下确实有意义，但这样做会违反对象的封装。

* * *

如果您有一个确实有意义的特殊情况，那么您需要向您的`Status`类添加一个方法或构造函数，该方法或构造函数从两个现有状态产生组合状态......使用您认为在语义上合适的任何算法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T03:29:28.420

您很难弄清楚您的意思（通过提供零细节）。

但是... 下面是如何创建一个包含两个*Status*对象的类。

```
class CombinedStatus {

    private Status statusOne;
    private Status statusTwo;

    public CombinedStatus(Status s1, Status s2) {
        statusOne = s1;
        statusTwo = s2;
    }

    public Status getStatusOne() {
        return statusOne;
    }

    public Status getStatusTwo() {
        return statusTwo;
    }
} 
```

如何使用它：

```
CombinedStatus cs = new CombinedStatus(status1, status2); 
```

为了让我们提供更好的答案，您必须提供一些关于您所追求的细节。

例如：结合两种状态到底意味着什么？

你把它们加在一起吗？将它们相乘？执行一些逻辑运算？

如果你不告诉我们，我们不知道。

# jquery - jquery 自动完成和 jquery 验证

> ID：13427349
> 
> 赞同：0
> 
> 时间：2012-11-17T03:23:21.077
> 
> 标签：jquery, asp.net-mvc, jquery-ui, jquery-validate, jquery-autocomplete

在我的 aspx 页面上，我正在尝试使用自动完成功能并验证表单是否已填写。但是，当我同时使用这两个库时，无法通过鼠标单击选择自动完成下拉列表，但可以使用箭头和输入键。无论如何，是否可以同时使用这两个软件包而不会出现此问题？

[我从http://jqueryui.com/autocomplete/](http://jqueryui.com/autocomplete/)复制了示例并添加了验证。

```
 <script type="text/javascript" src="http://code.jquery.com/jquery-1.8.2.js"></script>
            <script type="text/javascript"src="http://code.jquery.com/ui/1.9.1/jquery-ui.js"></script>
    <script type="text/javascript" src="<%=Url.Content("~/Scripts/jquery.validate.min.js") %>"></script>
        <script type="text/javascript">
            $(document).ready(function () {
                $('#myForm').validate();
            });

            function vaidateForm() {
                if (!$('#QAForm').valid()) return false;
                alert("IS VALID");
            };
        </script>
        <form id="myForm">
            <div id="AssignTo">
                <label for="tags" class="required">Tags: </label>
        <input id="tags" />
            </div>                            
         <input type="button"  onclick="vaidateForm()" value="Save" />
</form>

        <script type="text/javascript">
            $(function () {
                var availableTags = [
            "ActionScript",
            "AppleScript",
            "Asp",
            "BASIC",
            "C",
            "C++",
            "Clojure",
            "COBOL",
            "ColdFusion",
            "Erlang",
            "Fortran",
            "Groovy",
            "Haskell",
            "Java",
            "JavaScript",
            "Lisp",
            "Perl",
            "PHP",
            "Python",
            "Ruby",
            "Scala",
            "Scheme"
        ];
                $("#tags").autocomplete({
                    source: availableTags
                });
            });
        </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T03:35:53.100

请看这里：**工作演示** [http://jsfiddle.net/G3Qqc/1/](http://jsfiddle.net/G3Qqc/1/)

验证插件：[http ://docs.jquery.com/Plugins/Validation](http://docs.jquery.com/Plugins/Validation)

这应该适合你的事业`:)`

**代码**

```
$(document).ready(function(){
    $("#registerForm").validate();
});

$( "#tags" ).autocomplete({
    source: [ "c++", "java", "php", "coldfusion", "javascript", "asp", "ruby", "python", "c", "scala", "groovy", "haskell", "perl" ],
    delay: 0
});

​ 
```

# android - 要删除哪些 Git 文件

> ID：13427353
> 
> 赞同：2
> 
> 时间：2012-11-17T03:23:45.627
> 
> 标签：android

我希望 GitHub 停止跟踪我的本地存储库。然后再次将其作为新副本上传。我将删除 Android 文件夹中的哪些文件？或者有命令吗？谢谢。

编辑：我在 Windows 7 上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T03:27:59.080

您可以删除`.git`项目根目录中的文件夹，或者如果您只想导出受源代码控制的内容，您可以执行以下操作：

```
git archive --format zip --output /path/to/save/exported.zip master 
```

编辑：如果您使用的是 Windows，则需要`Show Hidden Files and Folders`启用才能查看该`.git`文件夹。 `Start --> Control Panel --> Appearance and Personalization --> Folder Options --> View tab, under Advanced Settings click Show hidden files, folders, and drives`

# .net - 添加成员资格和授权 ASP.net MVC 4？

> ID：13427356
> 
> 赞同：1
> 
> 时间：2012-11-17T03:24:26.390
> 
> 标签：.net, razor, asp.net-mvc-4

我似乎能够通过谷歌在 ASP.NET MVC 上找到的每个教程都是针对 MVC 3 的，它不会告诉你如何实际完成所有这些工作，它会告诉你从基本的互联网站点模板中抓取文件.

我有两个问题...

A）我正在使用 ASP.Net MVC 4，文件不同...... B）我想知道如何实际做到这一点，复制和粘贴不会教我任何东西。

所以，我真的很想知道如何将此功能添加到以前的空模板中。如果有帮助，我在项目中有 Razor？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T17:52:48.623

> 复制和粘贴不会教我什么

虽然这是真的，但在调试器中运行复制/粘贴的代码应该会教给你很多东西。

这是一篇非常好的文章：[http ://weblogs.asp.net/jgalloway/archive/2012/08/29/simplemembership-membership-providers-universal-providers-and-the-new-asp-net-4-5 -web-forms-and-asp-net-mvc-4-templates.aspx](http://weblogs.asp.net/jgalloway/archive/2012/08/29/simplemembership-membership-providers-universal-providers-and-the-new-asp-net-4-5-web-forms-and-asp-net-mvc-4-templates.aspx)

在 MVC4 及更高版本中，ASP.NET 默认使用较新的 SimpleMembershipProvider。因此，就谷歌搜索而言，这可能是您最好的选择。旧的 SqlMembershipProvider 非常好，但仅适用于 SQL Server。回到 MVC3，他们引入了 DefaultMembershipProvider，又名“通用提供者”。这些使用与旧提供程序非常相似的模式，但摆脱了所有存储过程和视图，以便您可以将它们与其他数据库一起使用（我相信实体框架支持的任何数据库）。SimpleMembershipProvider 是一种将身份验证和授权与可能的第 3 方身份提供者集成的新方法。

也就是说，您可以将这 3 个提供程序中的任何一个用于 MVC4 项目。MVC4 并没有将您归入特定的身份验证提供程序选择。但 SimpleMembership 似乎是未来的潮流，至少在事情再次发生变化之前......

**更新**

事情确实再次发生了变化。在 MVC5 中，现在有一个名为`Microsoft.AspNet.Identity`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T18:01:43.500

事情就是这样。大约有 200000000000 种不同的方法可以做到这一点，您必须了解身份验证如何在幕后工作才能决定使用哪种方法。

最好的方法是简单地使用默认模板代码，然后反转它的工作方式。换句话说，在你学会冲刺 100 米之前先学会爬行。

Mac 4 使事情变得复杂，因为它使用了简化的会员系统。为什么简单更复杂？因为它非常不同，同时仍试图与旧方式兼容。

所以使用默认的 Internet 模板并研究它是如何工作的。这是最好的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T18:36:25.443

看来您将身份验证与授权混淆了。您使用身份验证来验证请求者。您使用授权来拒绝或允许请求者使用资源。

自 .Net 2.0 以来，表单身份验证没有改变。进行身份验证的成员提供者有。 [danludwig 的回答](https://stackoverflow.com/a/13433158/209259)几乎总结了新的提供者模型（回答你的问题**A**），但使用它们（大部分）仍然是一样的。

[使用AuthorziationAttribute](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.authorizationattribute(v=vs.91).aspx)的 MVC 授权也没有因拒绝或允许访问 MVC 中的资源而改变。

至于您的问题**B**，您要么已经知道如何使用表单身份验证，要么您不知道。如果您不这样做，我建议您从[演练开始：在 ASP.NET MVC 中使用表单身份验证](http://msdn.microsoft.com/en-us/library/ff398049(v=vs.98).aspx)。

# javascript - 调用内部函数时 Firebug 崩溃

> ID：13427358
> 
> 赞同：0
> 
> 时间：2012-11-17T03:24:33.783
> 
> 标签：javascript, jquery, function, firebug

下面脚本的想法是“预览”来自文本区域的内容。这个怎么运作？

1.  `$('#preview_post')`是触发预览模式的锚点。
2.  textarea 内容被读取为`var content = $('#post_content').val();`
3.  为了显示将显示标记的 div (#content_previewed)，隐藏了 textarea 所在的表单。

这是JS代码：

```
var pl_previwing = false;

$(document).ready(function(){
    $('#preview_post').plPreviewPost();

});
jQuery.fn.plPreviewPost = function(options) {
    this.on('click', function(){
        var content = $('#post_content').val();
        $('#replay_container form').toggle(function(){
            pl_previwing = !pl_previwing;
        });
        console.log("previewing: " + pl_previwing);
        //plCallParser();
    });
};

function plCallParser(){
    if (pl_previwing){
        console.log("do a post here to process the markup");
    }
} 
```

这里有什么问题？如果你注意到我有一个注释行：

```
console.log("previewing: " + pl_previwing);
//plCallParser(); 
```

如果我取消注释上面的行，firebug 将突然挂起并且浏览器冻结并显示以下消息：

![在此处输入图像描述](../Images/248fecccc287c518244e61c8ff9afd53.png)

翻译：

> 此页面的脚本可能正忙，或者可能已停止响应。您可能会停止脚本，或等待响应。

## 编辑

*   当前浏览器：16.0.2，但它发生在所有浏览器中
*   textarea 的内容并不重要，因为它只有“测试体”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T03:34:51.407

在：

```
function plCallParser() {
    if (pl_previwing) {
        console.log("do a post here to process the markup");
}); 
```

你需要放一个“};};” 在那里，像这样：

```
function plCallParser() {
    if (pl_previwing) {
        console.log("do a post here to process the markup");
    };
}; 
```

只是一个简单的错误。当我弄乱括号时，我讨厌它。

# distance - 直方图和距离法

> ID：13427359
> 
> 赞同：0
> 
> 时间：2012-11-17T03:24:35.830
> 
> 标签：distance, histogram

你能解释一下直方图可以找出图像中的相似程度吗？例如，欧几里得距离。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T03:36:32.770

[http://en.wikipedia.org/wiki/Image_histogram](http://en.wikipedia.org/wiki/Image_histogram)
[http://en.wikipedia.org/wiki/Euclidean_distance](http://en.wikipedia.org/wiki/Euclidean_distance)

因此，基于颜色查看颜色的统计数据最适合颜色以及它是如何通过图像的

欧几里得距离是两点之间的差异，所以

1 颜色和颜色数量不同 2 像素是多少像素是零件计数像素 [x=2 y=4 z=2] [x=4 y=-4 z=9] = [x=>2 y=> 8z=7]

# ruby-on-rails - 为什么当我执行 @user.email 时它返回 null，但 @user[:email] 效果很好？

> ID：13427360
> 
> 赞同：1
> 
> 时间：2012-11-17T03:25:23.103
> 
> 标签：ruby-on-rails, ruby

我是红宝石初学者，这是我的代码：

```
@user = User.find_by_username('myname', :select => 'users.email')
email = @user.email 
```

为什么变量“email”返回空值？但是当我使用以下代码时，它会返回正确的结果。

```
email = @user[:email] 
```

顺便说一句，即使我删除了：select，问题仍然存在，这太奇怪了。

该对象似乎没有问题，这是我使用时的结果`@user.to_yaml`

```
--- !ruby/object:User
attributes:
  email: xxx@gmail.com 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T03:42:18.647

看起来您只是选择了对象的一部分，`:select => 'users.email'`并且它正在转换为一些特殊的几乎模型。尝试这样做：

```
@user = User.find_by_username('myname')
email = @user.email 
```

另外，您使用的是什么版本的 Rails？我在 Rails 3.2.8 项目中运行了您的语句并`@user.email`为我工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T08:45:09.963

你应该这样写你的请求：

```
@user = User.select(:email).find_by_username('myname')
email = @user.email 
```

这是使用 ActiveRecord 形成查询的常用方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-17T14:11:46.597

我已经尝试了几件事（覆盖该`email`方法，将其从中删除，从`attr_accessible`中删除电子邮件列`schema.rb`），但它始终可以正常工作。

我们通过对问题的评论找到了答案，这`attr_accessor`就是问题所在。

总结一下：永远不要使用`attr_accessor`你的`Model`属性！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-17T03:34:07.413

嗯，看看你的例子，我会说这是因为你指定了一个选择。

我猜为什么 [] 而不是方法访问​​器是因为使用 select 它可以检索未为模型定义的值，例如某些聚合的计数，所以我想如果在某些情况下使用 select 访问器方法不会得到定义？但是，是的，这很奇怪！

# c# - 如何在 XNA 中创建不同的“页面”？

> ID：13427365
> 
> 赞同：1
> 
> 时间：2012-11-17T03:26:48.353
> 
> 标签：c#, .net, xna

（我想我听说这被称为“基于状态”的游戏，但我不确定......）

基本上我想做的是让我的开始屏幕成为一个类，然后它将控制权（窗口/绘图/更新）传递给另一个类（即游戏类），我可以将控制权传递回开始屏幕类从实际的游戏类。

*我想在不打开新窗口和关闭原始窗口的情况下切换逻辑控制，而只是无缝转移到另一个类。*

编辑：我不是在寻找任何人来告诉我确切的操作方法，只是请向正确的方向轻推我，因为我在 Google 上找不到它...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T07:16:16.673

有一个示例：[XNA Game State Management sample](http://xbox.create.msdn.com/en-US/education/catalog/sample/game_state_management)。

# php - Ajax/jQuery 和 PHP 函数

> ID：13427369
> 
> 赞同：2
> 
> 时间：2012-11-17T03:27:57.490
> 
> 标签：php, jquery

我在我的网站上使用了一个函数 count($opt, $amount)，一个 PHP 函数，它返回整数值，例如。20.

我有各种产品，我使用此功能来计算可用库存。前任。一件手工艺品（sku-101），售价 51 美元。count('sku-101', 51) 将返回该项目的实际可用库存。

我确实在我的网站中多次使用此功能。我想为用户保留一个按钮，该按钮可以在不刷新整个页面的情况下检索输出。

我搜索并获得了太多结果，但每个结果都是“在特定 URL 中发布数据并检索响应”。但在我的情况下，我需要在单击按钮时运行 count($opt, $amount) ，而不发布数据并获得响应。

jQuery/Ajax 可以帮助我实现吗？我需要你的指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T03:36:05.983

您的“计数”功能似乎是服务器端功能（如果我正确理解您的问题）。所以这意味着工作是由服务器完成的。PHP 和 C# 是服务器端语言（以及许多其他语言）。所以如果你想调用这个函数，你没有选择调用 URL 的选项！尽管如此，在不重新加载页面的情况下仍有不同的调用方式：Ajax、iFrame、UpdatePanel 等。

如果您绝对不想调用 URL，则需要使用客户端语言，例如 Javascript。

# apache - node.js 和 apache 前面的 Nginx

> ID：13427373
> 
> 赞同：0
> 
> 时间：2012-11-17T03:28:51.967
> 
> 标签：apache, node.js, nginx

我在端口 80 上运行 nginx，并为多个 node.js 实例提供代理通行证。

我还想在同一个端口上使用 nginx 来代理在另一个端口上运行的 apache 实例，比如 8888。

这是我的 nginx.conf 的基础知识

```
 upstream localhost {
           server 127.0.0.1:8000;
           server 127.0.0.1:8001;
    }

    server {
            listen       80;
            server_name  localhost;

            location / {
                proxy_pass http://localhost;
            }

            location /admin/ {
                proxy_pass 127.0.0.1:8888;
            }

    } 
```

两个上游是 node.js 实例。但`/admin/`它适用于 apache 上的站点，但它不起作用。

还有另一种方法可以做到这一点吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T13:45:42.723

```
location /admin/ {
    proxy_pass http://127.0.0.1:8888;
} 
```

[http://nginx.org/r/proxy_pass](http://nginx.org/r/proxy_pass)

# asp.net-mvc-4 - 绑定可变数量的输入

> ID：13427375
> 
> 赞同：4
> 
> 时间：2012-11-17T03:29:18.250
> 
> 标签：asp.net-mvc-4, model-binding

我想发布一个带有可变数量复选框的表单，因此在模型投标中我会收到一个数组或`IEnumerable`每个`checkbox`名称及其值。

**我假装的：**

```
public class ItemsChecked{  
    public IEnumerable<string> Names{get; set;}  
    public IEnumerable<bool> Checked{get; set;}  
    //maybe organized in some other way
}

//In view  
@model IEnumerable<Tuple<string,bool>>

@foreach(var role in Model)
{  
<input name="@role.Item1" type="checkbox" checked="@role.Item2"/>
} 
```

有没有办法将它绑定到 ItemsChecked？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T13:28:17.963

这是[ASP.NET MVC - Can't bind array to view model](https://stackoverflow.com/q/7631212/136717)的副本。

您可以在此处找到 Phil Haacks 解释如何操作的链接。链接位于 [http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)

# mysql - 在MYSQL中，如何根据查询中未指定的参数汇总查询结果？

> ID：13427376
> 
> 赞同：1
> 
> 时间：2012-11-17T03:29:20.257
> 
> 标签：mysql, summary

我有一个大约 400 万行的 MySQL 表。假设表格如下：

表中的列`Person`：

*   `Id`
*   `Name`
*   `Age`
*   `Marital Status`
*   `Education Level`
*   '位置国家'
*   '描述'

当我基于 运行查询时`Age`，我还希望汇总具有不同婚姻状况以及不同“教育水平”和“所在国家/地区”的相同年龄的人。

当我根据年龄和教育水平运行查询时，我还希望汇总具有相同年龄和教育水平、不同婚姻状况以及不同“位置国家”的人。

例如，发出的查询是`SELECT * FROM Person WHERE Age = 27;`. 我还想要由`SELECT Education Level, COUNT(*) FROM Person WHERE Age = 27 GROUP BY Education Level;`and产生的结果`SELECT Location Country, COUNT(*) FROM Person WHERE Age = 27 GROUP BY Location Country;`

此外，当我必须根据描述中的关键字进行搜索并希望对其他每一列进行汇总计数时，这对我来说变得更具挑战性。我正在开发的应用程序是一种搜索引擎。这可以在 Ebay 等网站上看到，

我可以单独运行这些查询。但是，对于 400 万行，GROUP BY 查询将花费大量时间。这是一个互联网应用程序，查询应在几秒钟内完成。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T08:52:50.137

From what you are describing, I would have a separate aggregate table to query directly from that has those "roll-up" stats you want. How frequent is the "Person" table getting added to / changed. If you are only storing a person's "Age", what is the basis of the age if no date, and you add the person again in future they would have multiple records... such that

At age X, so many people were married (or not) and had this level of education. At age Y, so many people... etc..

I would create a summary table, something like

```
create table AgeStat ( 
   age int, 
   married int, 
   single int, 
   divorced int, 
   HighSchool int, 
   Associates int,
   Bachelors int,
   Masters int,
   Doctorate int ) 
```

Then, add a trigger to the person table such that during insert (or inclusive of update/delete as needed), the new record just adds 1 to each respective count applicable.

Then, for your web app, it would be instantaneous to grab one record from this summary table where age = 27 and you have ALL your classification stats.

However, if you distinctly wanted to know how many Married with Masters degree, you would have to roll back to master person list.

Alternatively, you could do a similar pre-aggregation but down a level of granularity something like

```
create table AgeStat ( 
   age int, 
   maritalstat int,    -- but I would actually use an enumerated value for marital status
   educationlevel int, -- and education level vs a hard description of each.
   peoplecount int ) 
```

and likewise have a trigger that updates the count based on the two combination elements per age. Then, if you wanted the total "Married", you can sum(peoplecount) for age = 27 and maritalstat=(enumerator for "married" value)

Good luck, and hope it helps alternative solution for you.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T03:38:43.593

您可以在一个查询中完成这两项操作

```
SELECT p.*, count(p2.id)  
FROM Person p, Person p2 
WHERE p2.Age = p.age and p2.marital != p.marital and p1.education != p2.education 
GROUP BY p1.id 
```

在这种情况下，我建议将数据保存在`memcache`缓存中。如果新数据插入到表中或在某个过期时间之后，您可以使缓存过期，以避免长时间执行查询。另一个改进是使用 LIMIT 来减少 DB 返回的行数，如下所示：

```
SELECT p.*, count(p2.id)  
FROM Person p, Person p2 
WHERE p2.Age = p.age and p2.marital != p.marital and p1.education != p2.education 
GROUP BY p1.id
LIMIT 10 
```

# wget - 试图从我的 beaglebone 上的网络获取文件

> ID：13427380
> 
> 赞同：0
> 
> 时间：2012-11-17T03:30:02.787
> 
> 标签：wget, beagleboard, angstrom-linux

我今天刚得到一个beaglebone，加载了linux的埃发行版，并且碰壁了。以下是我打开盒子后所做的事情：

[从http://beagleboard.org/static/beaglebone/latest/README.htm](http://beagleboard.org/static/beaglebone/latest/README.htm)下载并安装了 64 位 Windows 驱动程序，以允许我通过 USB 连接我的 beagleboard。

[从http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html](http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html)下载腻子

用我的 COM (COM8) 和 115200 的速度设置 putty，然后打开我的串行 USB 终端与 beagleboard 接口。

此时，每当我执行 wget 命令时，例如：

```
wget http://example.com/file.py 
```

我收到以下错误：

```
wget: bad address 'example.com' 
```

我通过无线连接到互联网...是否有我应该打开的端口或什么？似乎 wget 根本无法访问网络。

我是否因为没有通过以太网连接到互联网而限制自己？如果是这种情况，我是否最好将文件下载到我的 Windows 盒子并手动传输它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T04:16:19.277

毫不奇怪，问题在于无线连接。

我的 Windows 机器通过 USB 连接到 beaglebone，并通过无线连接到以太网。

将以太网电缆插入 beaglebone 解决了这个问题。不过，我希望能够通过我的 windows 框来做到这一点。

# mysql - MySQL备份数据库

> ID：13427381
> 
> 赞同：2
> 
> 时间：2012-11-17T03:30:08.937
> 
> 标签：mysql

我试图从我的 mysql 服务器备份数据库。

我正在使用 MYSQL 5.5。

我使用以下命令备份数据库。

```
 $ mysqldump -root -admin project > projectbackup.sql 
```

我的用户名：root，密码：admin，数据库名称：project

但它显示以下错误。就像下面的截图一样。

![在此处输入图像描述](../Images/7e050374028204bb1746cb25946c54c7.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-17T03:38:25.587

在命令提示符下而不是在 mysql 提示符下尝试

```
 mysqldump -u root -p admin project > projectbackup.sql 
```

[文档](http://alvinalexander.com/blog/post/mysql/dump-mysql-database-schema)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-17T03:37:01.787

据我记得，mysqldump 是一个程序，而不是 MySQL 命令。从 Windows 命令提示符而不是 MySQL 提示符运行它。另外，不要包括 $ 美元符号。

此外，您还需要在 --user=Your_user_name_here --password=Your_password_here 中包含用户名和密码

此处记录的用法：http: [//dev.mysql.com/doc/refman/5.5/en/mysqldump.html](http://dev.mysql.com/doc/refman/5.5/en/mysqldump.html)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-17T04:39:55.850

试试这个`mysqldump -uroot -p project > projectbackup.sql`。

现在，当提示输入密码类型“admin”时

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-09-02T15:37:59.887

为了备份我的数据库，我使用这三个命令（在批处理文件中）：

```
mysqladmin -u root -pMyPassword drop backupExample --force=true
mysqladmin -u root -pMyPassword create backupExample
mysqldump -h 127.0.0.1 -u root -pMyPassword DBExample | mysql -h 127.0.0.1 -u root -pMyPassword backupExample 
```

在哪里：

“ **DBExample** ”是要备份的数据库的名称

“ **backupExample** ”是将作为副本创建的新数据库

“ **MyPassword** ” 是您的数据库密码

希望能帮助到你！

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-10-15T21:39:03.987

打开 Windows 命令提示符。

```
Click Start -> Run
Enter “cmd” into the dialog box and click the “OK” button. 
```

将目录更改为以下目录以访问 mysqldump 实用程序。

```
cd C:\Program Files\MySQL\MySQL Server 5.5\bin 
```

创建当前 mysql 数据库或表的转储（不要在命令中包含括号符号 [ ]）。

使用以下参数运行 mysqldump.exe 程序：

```
mysqldump.exe –e –u[username] -p[password] -h[hostname] [database name] > C:\[filename].sql 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-17T03:46:23.783

无法评论@Thanga 的答案，因此单独发布。

-u 和 root 之间应该有一个空格。同样适用于 -p 和 admin。所以命令看起来像：

```
mysqldump -u root -p admin project 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-17T04:44:01.313

mysqldump 命令访问一个程序，而不是在 mysql 命令提示符中调用。

它基本上会执行一个大`SELECT * FROM tables...`查询并在终端中回显输出，这就是您重定向输出以将其保存到文件的原因。

您需要找到`mysqldump.exe`文件的直接路径，然后以这种方式执行它。

`C:\...\path\to\mysql\bin\mysqldump.exe -uroot -p DATABASE_SCHEMA > C:\backup.txt`

仅`-p`当您的 mysql root 用户帐户有密码时才包含该标志，并将`DATABASE_SCHEMA`文本替换为您的数据库名称。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-06-30T15:39:31.350

```
$ mysqldump -uroot -padmin project > project.sql 
```

# javascript - 在网页中选择现有对象或创建新对象的正确方法是什么？

> ID：13427383
> 
> 赞同：0
> 
> 时间：2012-11-17T03:30:44.563
> 
> 标签：javascript, html, angularjs

我一直在尝试创建一个 Web 应用程序，我试图在其中创建与客户的约会。就像我想象的那样，当应用程序的用户想要与客户创建约会时，他们将首先选择“创建约会”之类的链接，然后他们将看到一个屏幕，他们可以在其中选择现有客户，或输入新的信息。

我一直在努力解决的主要问题是应用程序的一般流程：何时应该发生 POST，以及应该在内存中保留多少。显然，如果用户需要创建一个客户端，我可以将浏览器转发到另一个屏幕，保存用户，然后将它们发送回来，但我真的认为在流程中保存客户端（创建约会的流程）是不好的; 我想在最后保存一切。

我花了很多时间研究像 AngularJS 这样的框架，看看它们是否能解决这个问题，但我认为它们没有。我很确定我想用 Javascript 在 DOM 中完成所有这些工作（因为它都在内存中），然后发送一个包含所有内容的 POST。

假设将所有内容保存在内存中并为整个工作流程发送一个大型 POST，您会如何建议 JSON 外观？在 JSON 中破译现有客户端和新客户端的合理方法是什么？是否存在任何框架可以更轻松地解决这个特定问题。

伙计，我想做的只是制作一个屏幕来选择客户或创建一个新客户，而不必引导用户远离流程。为什么这么难？

感谢一切！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T10:58:44.317

Angular 中的一个简单解决方案是将数据继续存储在 $rootScope JSON 对象中。无论您进入哪个页面，数据都会持续存在。因此，完成后，只需将数据发送到采用 JSON POST 的 Web 服务。（例如 - JERSEY RestFul webservices 实现）。然后，您可以一次性保存数据。

如果提交未完成，只需根据需要使对象无效或清空 JSON 对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T04:30:07.367

在 JS MVC 框架中 - 与任何 JS 应用程序一样 - 您定义对象/类/模型并使用它们。如果您从 Web 服务（AJAX 调用）检索客户端列表，则 angularJS 会使用 $http 或 $resource 自动将其转换为 JS 对象（两者都在框架的网站中有详细记录）。但是您始终可以创建自己的，并立即或稍后通过 POST 将其添加到您的数据库中，并且无需更改“视图”即可添加模型的新实例。

这是我的应用程序的控制器示例。为清楚起见，大部分逻辑已被删除，并替换为注释。它表示一个条目，因为条目列表存储在父控制器中，并且控制器是通过 ng-repeat 指令生成的（见下面的 html 代码）。

## 控制器：

```
/**
 * Entry Controller
 * @class entryCtrl
 */
ucpaTpaApp.controller(
    'entryCtrl', 
    ['$scope', 'httpService',
    function($scope, httpService) {

        /**
         * initiate the entry model, with all the required logic
         * Called upon the controller's construction 
         */
        $scope.initEntry = function initEntry(){
            if(!$scope.entry){
                $scope.newEntry();
            }
        }

        /**
         * Set the fields of the entry, stored on the indicator's metadata
         * for new entries.
         */
        $scope.newEntry = function newEntry(){

            $scope.entry = {
                status: {
                    state: 'new',
                    connection: 'idle'
                },
                field_values: {},
                saved_field_values: {},
                title: ""
            };

            for(var field in $scope.fields){
                $scope.entry.field_values[String($scope.fields[field].id)] = '';
            }
        };

        $scope.resetFields = function resetFields(){
         // Resets fields to original status (blank if it is new)
        };

        /**
         * Save a new entry, adding it to the list of entries, and attempting
         * to save to the server
         */
        $scope.addEntry = function addEntry(){
         // Add a copy to array, with status 'new',
             // and call saveEntry on it
             // After that, reset fields
        };

        $scope.deleteEntry = function deleteEntry(){
         // Delete on WS, remove from array on confirmation
        };

        $scope.saveEntry = function saveEntry(){
         // Save to WS, update status on confirmation
        };

        $scope.initEntry();

    }]
); 
```

## 模板：

```
<div class="indicator">
    <h3>{{indicator.title}} - {{indicator.score}}</h3>
    <div 
    ng-repeat="entry in indicator.entries" 
    ng-form="{{entry.id}}" 
    ng-controller="entryCtrl">
        <tr-entry>
        </tr-entry>
    </div>
</div>
<div ng-controller="entryCtrl">
    <tr-entry>
    </tr-entry>     
</div> 
```

如您所见，条目列表使用 ng-repeat 指令显示（实际的条目 DOM 是使用它自己的指令 tr-entry 创建的）。然后，在此列表的末尾创建一个额外的条目，即“新”条目。如果该条目被保存（添加），它的条目模型被复制到数组中，并且 angularJS 尝试保存它。结果是：“新条目”将其字段设置为空白，并且新条目出现在 ng-repeat 列表中。当然，只有在收到确认已将其保存到数据库时，它的状态才会从“新”更改为“已保存”（由于后端执行数据验证，它可能会拒绝条目）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T03:42:43.793

你为什么不使用 AJAX ？？？首先选择/创建一个客户端，它将成为对服务器的一次 ajax 调用，用户将保持在同一视图上。之后，当服务器响应时，为该客户端预约，然后您可以提交该页面，或者如果您想做其他事情保持相同的视图，您可以再次进行 Ajax 调用。不要等待所有数据堆积起来，然后您只需使用 AJAX 即可发布。:)

# mysql - 配方数据库，按成分搜索

> ID：13427389
> 
> 赞同：5
> 
> 时间：2012-11-17T03:32:05.283
> 
> 标签：mysql, sql, database

我的数据库中有以下 3 个表，在查询它们以获得我想要的结果时遇到了一些麻烦。我正在尝试按成分搜索食谱。

下面模式的 SQL Fiddle： [fiddle](http://sqlfiddle.com/#!2/0b5c5/8)

这是我的桌子： 成分

```
+---------------+---------+
| ingredient_id | name    |
+---------------+---------+
|             1 | tomato  |
|             2 | onion   |
|             3 | rice    |
|             4 | chicken |
|             5 | beef    |
|             6 | noodles |
|             7 | salt    |
+---------------+---------+ 
```

食谱

```
+-----------+------------------+
| recipe_id | name             |
+-----------+------------------+
|         1 | tomato goodness  |
|         2 | meat deluxe      |
|         3 | chicken surprise |
+-----------+------------------+ 
```

成分索引

```
+-----------+---------------+
| recipe_id | ingredient_id |
+-----------+---------------+
|         1 |             1 |
|         1 |             5 |
|         1 |             7 |
|         2 |             5 |
|         2 |             6 |
|         2 |             7 |
|         3 |             4 |
|         3 |             3 |
|         3 |             7 |
+-----------+---------------+ 
```

仅搜索一种成分的查询可以正常工作，并输出以下内容：

```
mysql> select r.recipe_id, r.name
    -> from recipes r
    -> inner join ingredient_index
    -> on i.recipe_id = r.recipe_id
    -> where
    -> i.ingredient_id = 7;

+-----------+------------------+
| recipe_id | name             |
+-----------+------------------+
|         1 | tomato goodness  |
|         2 | meat deluxe      |
|         3 | chicken surprise |
+-----------+------------------+ 
```

但是当使用或用于多种成分时，我们会得到这个

```
mysql> select r.name
    -> from recipes r
    -> inner join ingredient_index i
    -> on i.recipe_id = r.recipe_id
    -> where i.ingredient_id = 7 or i.ingredient_id = 5;

+------------------+
| name             |
+------------------+
| tomato goodness  |
| tomato goodness  |
| meat deluxe      |
| meat deluxe      |
| chicken surprise |
+------------------+ 
```

5 行一组（0.00 秒）

并使用“和”结果没有

```
 mysql>  select r.name
    ->  from recipes r
    ->  inner join ingredient_index i
    ->  on i.recipe_id = r.recipe_id
    ->  where i.ingredient_id = 7 and i.ingredient_id = 5;
Empty set (0.00 sec) 
```

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-17T03:38:06.840

由于一个食谱可以使用多种成分，并且您正在寻找使用一种或多种指定成分的食谱，因此您应该使用`DISTINCT`关键字来防止重复结果，其中食谱使用指定列表中的一种以上成分。此外，您可以使用`IN`子句过滤多个成分 ID。

```
select DISTINCT r.name
from 
    recipes r
    inner join ingredient_index i
    on i.recipe_id = r.recipe_id
where i.ingredient_id IN (7, 5); 
```

或者，如果您正在寻找使用列表中指定的所有成分的食谱，则可以按食谱名称对结果进行分组，并检查记录数是否与列表中的成分数相同。

```
select r.name
from 
    recipes r
    inner join ingredient_index i
    on i.recipe_id = r.recipe_id
where i.ingredient_id IN (7, 5)
GROUP BY r.name
HAVING COUNT(*) = 2 
```

这是假设不会有具有相同 (recipe_id, ingredients_id) 元组的重复记录（更好地确保使用 UNIQUE 约束）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T03:46:04.993

下面的[小提琴](http://sqlfiddle.com/#!2/0b5c5/8)

这个查询：

```
select distinct recipe.name
from recipes recipe, ingredient_index i
where i.ingredient_id = 7 or i.ingredient_id = 5; 
```

产生这个结果集：

```
NAME  
tomato goodness  
meat deluxe  
chicken surprise 
```

# c++ - Visual C++ 2010 - 转换 10 GB BYTE 数组的最快方法？

> ID：13427391
> 
> 赞同：1
> 
> 时间：2012-11-17T03:32:47.700
> 
> 标签：c++, arrays, file, byte, stdstring

**问题：**在 Visual C++ 中将 10 GB BYTE 数组转换为十六进制格式的标准字符串的最快方法是什么？

**我在做什么：**我正在使用 std::fread(...) 将一个非常大的文件读入一个大缓冲区，然后将其格式化为十六进制格式，然后将其转换为 std::string。我希望我说得通。

我目前正在使用这段代码（不是我写的......），速度很慢。

```
std::string ByteToHexFormatStdStr( __in ::BYTE *ByteArray, __in int ArraySize, __in bool AddSpace )
{
    ::BYTE Byte = NULL;
    const char HexCharacters[ 16 ] = { '0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'A', 'B', 'C', 'D', 'E', 'F' };
    std::string Return = "";

    for( ::UINT Index = 0; Index < ArraySize; ++ Index )
    {
        Byte = ( ::BYTE )( ByteArray[ Index ] & 0xF0 );
        Byte = ( ::BYTE )( Byte >> 4 );
        Byte = ( ::BYTE )( Byte & 0x0F );
        Return += HexCharacters[ ( int )Byte ];
        Byte = ( ::BYTE )( ByteArray[ Index ] & 0x0F );
        Return += HexCharacters[ ( int )Byte ];

        if( AddSpace ) Return += ' ';
    }

    return ( Return );
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T04:03:01.727

这里的问题不太可能出在将数据转换为十六进制的例程中。

问题几乎可以肯定是您只是使用*了*太多的内存。输入的每个字节变成两个十六进制字节。如果在它们之间添加空格，则每个输入都会产生三个字节的输出。

如果您从 10 GB 的输入开始，这意味着您将产生 20 或 30 GB 的输出。由于您正在逐步扩展目标字符串，因此它很有可能会调整其缓冲区的大小并在达到完整的 30 GB 之前多次复制数据。在调整大小/复制操作期间，它同时需要旧副本*和*新副本的内存空间。根据它在调整大小时使用的因素，您正在使用（或尝试使用）大约 60 GB RAM 的更改是好的。除非您实际上拥有至少 64 GB 的物理 RAM，否则这几乎肯定会*非常*慢。

很有可能您最好通过从一个文件读取并写入另一个文件来进行处理。*公平地说，除非您拥有非常*快的硬盘驱动器，否则这仍然不会非常快- 并且您非常喜欢从一个读取并写入另一个。

除非您确实拥有 64Gig 的物理 RAM，否则从文件到文件的处理几乎肯定会比使用虚拟内存更快。

```
std::string ToHex(char input)
{
    const char Hex[] = "0123456789ABCDEF";
    std::string Return;

    Return += Hex[(unsigned)input>>4 & 0xf];
    Return += Hex[(unsigned)input & 0xf];
    return Return;
}

std::transform(std::istream_iterator<char>(infile),
               std::istream_iterator<char>(),
               std::ostream_iterator<std::string>(outfile, ""),
               ToHex); 
```

对于相当于您的 AddSpace 为真，将第二个参数更改为`ostream_iterator`from `""`to `" "`。

对于这么大的文件，您可能希望自己处理文件 - 因为您显然是在 Windows 上运行，对于这种大小的文件，您可能可以通过`CreateFile`直接使用并指定[`FILE_FLAG_NO_BUFFERING`](http://msdn.microsoft.com/en-us/library/windows/desktop/cc644950.aspx)避免颠簸来获得相当多的收益在执行此操作时缓存。读取 4 兆字节左右的块，转换为另一个块，然后写出结果。如果您有两张（或更多）光盘，以便在写入另一张时可以从其中读取，您还可以考虑使用重叠 I/O 来允许从一个文件读取、写入另一个文件以及同时进行处理。如果您只使用一张光盘，那仍然允许处理和 I/O 并行发生，但处理速度将比 I/O 快得多，因此它可能无法获得足够的努力来证明努力的合理性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T05:23:40.507

我保证这将在最快实现的 epsilon 范围内：

```
#define _CRT_DISABLE_PERFCRIT_LOCKS
#include <stdio.h>
#include <io.h>
#include <fcntl.h>

int main(int argc, char **argv) {
    _setmode(fileno(stdin), _O_BINARY);
    _setmode(fileno(stdout), _O_BINARY);

    char hex[] = "0123456789ABCDEF";
    int c;
    while ((c = getchar()) != EOF) {
        putchar(hex[c >> 4]);
        putchar(hex[c & 0xF]);
    }

    return 0;
} 
```

编译并运行为`thisprog < in > out`.

在 MSVC++ 上，stdio 操作使用锁定来允许多线程代码中的线程安全行为。对于这个单线程程序，我们不需要它，所以我们用顶行（在[此处](http://msdn.microsoft.com/en-us/library/ms235356.aspx)描述）将其关闭，这可以大大加快速度。`_setmode()`为标准输入和输出流打开二进制模式的调用，默认情况下处于文本模式（`\r\n`转换为`\n`输入，反之亦然）。

速度很快，因为 stdio 使用自己的内部缓冲，因此您不会一次向操作系统询问一个字符（操作系统还在后台进行自己的磁盘缓冲）。

如果您决定使用 C++，请更改`#include <stdio.h>`为`#include <cstdio>`并在之后添加一个`using namespace std;`。C 运行时库是标准 C++ 库的一部分，经验表明它往往比使用 iostreams 快得多，可能是因为它不受语言环境的影响。

# android - Renderscript 无法导出静态变量

> ID：13427396
> 
> 赞同：2
> 
> 时间：2012-11-17T03:34:35.130
> 
> 标签：android, renderscript

我正在使用适用于 Android 的 Renderscript。我刚刚更新到工具的修订版 21。我的项目（已经工作了一年多）停止编译这个更新。该项目基于“轮播”演示。

Eclipse 给了我一堆类似于以下的错误：

```
error: structs containing vectors of dimension 3 cannot be exported at this API level: carouselPlane' 
```

产生上述错误的代码是：

```
static Plane carouselPlane = {
   { 0.0f, 0.0f, 0.0f }, // point
   { 0.0f, 1.0f, 0.0f }, // normal
   0.0f // plane constant (= -dot(P, N))
}; 
```

我不明白无法导出是什么意思。该代码块被特别标记为静态以防止导出。

其他人在 r21 上也遇到过这个问题吗？

我知道 Android 4.2（与 r21 同时发布）有一些关于在 GPU 上运行 Renderscript 计算的特殊功能。这与这个问题有关吗？

有什么已知的解决方法吗？

**编辑**

根据要求，这里是上述的极简示例

```
#pragma version(1)
#pragma rs java_package_name(com.example);

typedef struct Plane_s {
    float3 point;
} Plane;

static Plane carouselPlane = {
    { 0.0f, 0.0f, 0.0f }
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T21:39:23.410

嗯，替换`float3`为`float4`为我工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T03:24:12.617

尽管 Plane 的特定实例被标记为静态，但您很可能有另一个此类型的非静态实例。这是触发您在上面看到的错误消息的唯一方式。

# django - 使用 django + nginx + Flup 时打印语句写入哪里？

> ID：13427397
> 
> 赞同：6
> 
> 时间：2012-11-17T03:34:37.953
> 
> 标签：django, nginx, fastcgi, flup

我正在尝试调试我的 django 应用程序，但这很难，因为我不知道我的打印语句将它们的输出发送到哪里。我将flup和fastcgi与django和nginx一起使用，我可以看到python错误并通过nginx访问日志，但我不知道我的打印语句要去哪里。

这是我的 nginx.conf 文件中的相关内容：

```
server {
    listen 80;
    server_name localhost;
    access_log /var/log/nginx/demo.access.log;
    error_log /var/log/nginx/demo.error.log;

    location / {
        include fastcgi_params;
        fastcgi_pass 127.0.0.1:9001;
    }
} 
```

我正在使用以下命令运行 fastcgi：

```
python manage.py runfcgi host=127.0.0.1 port=9001 
```

我基本上遵循了本教程[https://code.djangoproject.com/wiki/DjangoAndNginx](https://code.djangoproject.com/wiki/DjangoAndNginx)，我的操作系统是 ubuntu！

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-08T19:39:45.970

我同意日志记录的建议，但这些天链接应该指向集成的 Django 功能，而不仅仅是基本的 Python 库。

[https://docs.djangoproject.com/en/dev/topics/logging/](https://docs.djangoproject.com/en/dev/topics/logging/)

在 Python 代码的顶部有一个基本的设置和一些简单的东西，如下所示：

```
import logging
log = logging.getLogger(__name__) 
```

然后，您可以在代码中执行以下操作：

```
log.debug('output message') 
```

它将落在您指向 Django 日志记录设置的位置。

# sql - 在结果集中并排连接列

> ID：13427400
> 
> 赞同：2
> 
> 时间：2012-11-17T03:35:04.803
> 
> 标签：sql, oracle

我希望我的结果看起来像这样

```
 FirstName1     LastName1         FirstName2      LastName2
       Amy           Smith              Bob            Stone
      Fred           Joker              Gina           White 
```

其中 FirstName1 和 FirstName2 具有相同的数据类型，但我无法使用它来加入（假设没有人具有相同的名称），LastName1 和 LastName2 也是如此。
我试图创建 2 个表。第一个表包含 FirstName1 和 LastName1。第二个表包含 Firstname2 和 LastName2。
然后我用

```
SELECT table1.FirstName1, table1.LastName1, table2.FirstName2, table2.LastName2
FROM table1, table2; 
```

但这给了我很多重复。有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-17T04:11:51.640

```
SELECT t1.FirstName1, t1.LastName1, t2.FirstName2, t2.LastName2
FROM
    (SELECT 
         FirstName1, 
         LastName1, 
         ROW_NUMBER() OVER (ORDER BY FirstName1) 'RowNumber'
     FROM table1
    ) AS t1
    FULL OUTER JOIN
    (SELECT 
         FirstName2, 
         LastName2, 
         ROW_NUMBER() OVER (ORDER BY FirstName2) 'RowNumber'
     FROM table2
    ) AS t2
    ON t1.RowNumber = t2.RowNumber 
```

`FULL OUTER JOIN`将处理两个表中的行数不相同的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T03:37:29.973

你永远不应该做你想做的事，而是尝试使用`DISTINCT`

```
SELECT Distinct 
    table1.FirstName1, 
    table1.LastName1, 
    table2.FirstName2, 
    table2.LastName2
FROM table1, table2; 
```

您的方法的问题是检索到的数据集没有任何意义。你为什么要这样做呢？

编辑：你总是可以这样做：

```
select table1.FirstName1, table1.LastName1, table2.FirstName2, table2.LastName2
from table1, table2   
where table1.rownum= table2.rownum; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T08:02:42.877

> “哦哈哈，我真的只是想让它看起来漂亮。我习惯用 C 和 Java 编程，在那里各种输出都很可能。”

数据库编程是不同的。在这个领域里，*内容*比单纯的漂亮更重要。因此，当涉及到结果集时，数据库坚持认为一行中的所有列共享一个有意义的关系（线索在名称中，关系数据库）。

您的问题是，您没有没有共同键的表，因此无法将两组行连接在一起。如果没有适当的 WHERE 子句，数据库将实现交叉连接，即笛卡尔积，这就是所有重复的来源。

鉴于您没有有意义的密钥，您唯一的选择就是伪造它们；[Vikdor 展示的](https://stackoverflow.com/a/13427592/146325)方法是实现这一目标的一种方法。

# php - 为什么 DOMDocument 不能与 WAMP 服务器一起使用？

> ID：13427403
> 
> 赞同：3
> 
> 时间：2012-11-17T03:35:20.747
> 
> 标签：php, wamp, domdocument

我正在使用`DOMDocument`从网页中检索几位文本并将它们放入数组中。相同的代码适用于另一台服务器，但不适用于我的。我得到`Trying to get property of non-object`循环的每次迭代，`while`最后数组保持为空。

```
$html = file_get_contents("http://sugarkettle.site44.com/catering.html");
$doc = new DOMDocument();
libxml_use_internal_errors(true);
$doc->loadHTML($html);
libxml_clear_errors();

$meatPrices = array();

function fillArrayFromDOM($array,$type) {
    global $doc;
    $i = 0;
    $label = 1;
    $array = array();
    while ($label <= 15):
      $array[$i] = $doc->getElementById($type.$label)->textContent;
      $i++;
      $label++;
    endwhile;
    return $array;
}

fillArrayFromDOM($meatPrices,"meat");
echo var_dump($meatPrices); 
```

这是它的工作链接： [http ://www.evintr.com/willtest.php](http://www.evintr.com/willtest.php)

他正在运行 GoDaddy 服务器，而我有一个本地 WAMP (2.2) 服务器。我可以提供的任何配置选项都可以解释为什么会发生这种情况？还是问题与我的服务器配置无关？

非常感谢任何帮助。提前致谢！

## 更新 1 - 2012 年 11 月 16 日

在我的服务器上，我已经测试过`$meatPrices[1] = $doc->getElementById('meat1')->textContent;`并且可以正常工作。无论出于何种原因，在`while`循环内部，相同的表达式（`getElementById`参数中的变量除外）都会抛出错误：`Trying to get property of non-object`.

## 更新 2 - 2012 年 11 月 17 日

我的 WAMP 服务器正在运行 PHP 版本**5.3.13**。我朋友的服务器正在运行 PHP 版本**5.3.6**。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T03:43:14.043

尝试添加`allow_url_fopen=on`您的 PHP 配置文件 ( `php.ini`)。保存并重新启动 Apache；它应该工作......

**编辑：** 还要检查您是否`php_openssl.dll`启用了扩展名（`extension=php_openssl.dll`在您的`php.ini`文件中）。同样，需要重新启动 Apache。

**编辑：**

这取决于您拥有的 PHP 版本，但这里有两个潜在的解决方案：

1.  `fillArrayFromDOM($meatPrices,"meat");`用 `$meatPrices = fillArrayFromDOM($meatPrices,"meat")`;替换行 您还可以更改函数以删除必要的 $meatPrices 参数）。

或者

1.  `function fillArrayFromDOM($array,$type) {`用你替换行`function fillArrayFromDOM(&$array,$type) { //note new character &; it will keep reference to $array variable so it could be changeable;`也可以删除行：`$array = array();`

两者都应该工作；我很着急，没有时间等待您的评论回复。让我们知道你得到了什么...

# c++ - 为什么本地类定义可以从同一个函数访问外部静态变量？

> ID：13427405
> 
> 赞同：3
> 
> 时间：2012-11-17T03:35:55.523
> 
> 标签：c++, static

请注意以下事项：

```
#include <iostream>
#include <string>
#include <cstdlib>

int main(){

    static std::string foo = "inside main";

    struct Bar{
        Bar(){
            std::cout << "I can see " << foo << '\n';
        }
    };

    Bar b;

    return EXIT_SUCCESS;
} 
```

> 该程序的输出是：“我可以看到 main 内部”。

为什么类构造函数可以在类定义之外查找并找到 foo？

如果 foo 是静态的，它只在与类定义相同的函数内有效，并且在类定义之前。

* * *

帮助说服我它没有违反范围规则。为什么有可能？这种实现的优点和缺陷是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-17T03:40:02.643

因为`struct Bar`在 main() 的命名空间内并且`foo`是`static`. 标准说：

> 类可以在函数定义中定义；这样的类称为本地类。本地类的名​​称在其封闭范围内是本地的。本地类在封闭作用域的范围内，并且对函数外部的名称具有与封闭函数相同的访问权限。本地类中的声明只能使用封闭范围内的类型名称、静态变量、外部变量和函数以及枚举数。

所以你的代码不违反标准。

# php - 如何将 html 和 php 代码存储在要回显到 html 页面的 php 变量中

> ID：13427408
> 
> 赞同：1
> 
> 时间：2012-11-17T03:36:01.107
> 
> 标签：php, javascript, html, ajax, prepend

我正在尝试将包含一些 php 代码的整个 html 字符串回显到 html 页面，问题是，我无法将字符串存储到 php 变量中；

prependapp.php

```
 <?php
include("db.php");
include("tolink.php");

$result=mysql_query("select * from messages order by msg_id desc");
$row=mysql_fetch_array($result);
$id=$row['msg_id'];
$msg=$row['message'];
$date=$row['date_sent'];

$msg= nl2br($msg);
$msg="<br>{$msg}<br>{$date}";

$app = <<<EOD

<li class="bar<?php echo $id; ?>">
<div align="left" class="post_box">
<span style="padding:10px"><?php echo $msg; ?> </span>
<span class="delete_button"><a href="#" id="<?php echo $id; ?>" class="delete_update">X</a></span>
<span class='feed_link'><a href="#" class="comment" id="<?php echo $id; ?>">comment</a></span>
</div>
<div id='expand_box'>
<div id='expand_url'></div>
</div>
<div id="fullbox" class="fullbox<?php echo $id; ?>">
<div id="commentload<?php echo $id; ?>" >

</div>
<div class="comment_box" id="c<?php echo $id; ?>">
<form method="post" action="" name="<?php echo $id; ?>">
<textarea class="text_area" name="comment_value" id="textarea<?php echo $id; ?>">
</textarea><br />
<input type="submit" value=" Comment " class="comment_submit" id="<?php echo $id; ?>"/>
</form>
</div>
</div>

</li> 

EOD;

echo $app;
?> 
```

html页面内的javascript

```
 <script>
    $(document).ready(function() {
        $("#formID").validationEngine({
            ajaxSubmit: true,
            ajaxSubmitFile: "update_ajax.php",
            success : function() { 
            alert("success exe!");
            $("ol#update").load("prependapp.php");
            $("ol#update li:first").slideDown("slow");
            document.getElementById('content').value='';
            $('#content').value='';
            $('#content').focus();
            alert("success exe");
            }, 
            failure : function() { alert("success fail"); }
        })

    });
    </script> 
```

我前面的“测试”总是显示问题是 $app 没有，我有什么办法可以将带有一些 php 代码的大型 html 代码添加到我的 html 页面中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T03:44:26.217

您不能在 javascript 部分中使用 PHP 代码。请注意 PHP 将在服务器端呈现，而 javascript 将在客户端浏览器中执行。因此，浏览器无权访问任何`PHP variables and objects`.

但是，您可以使用`AJAX`. 例如：

```
$.ajax({
    url : "/server/prepend.php",
    success : function(response)
    {
        $("ol#update").prepend(response);
    },
}); 
```

将在服务器端执行 php 代码并将结果添加到 ol#update 标记中。

# jquery - Nivo Slider 不会出现

> ID：13427413
> 
> 赞同：0
> 
> 时间：2012-11-17T03:36:18.870
> 
> 标签：jquery, html, slider, nivo-slider

我试图将 Nivo Slider 应用到我的网页顶部。我做了一个测试页，效果很好。我使用相同的代码并将其转储到真实文档上的一个 div 标签中，它根本不会出现。div 标签包含在几个 div 标签中。也许这就是问题，但我真的不知道！我需要帮助。

[JS小提琴](http://jsfiddle.net/XT9BW/)

```
<link rel="stylesheet" href="nivo-slider.css" type="text/css" media="screen" />
<link rel="stylesheet" href="themes/default/default.css" type="text/css" media="screen" />
<script src="jquery.nivo.slider.pack.js" type="text/javascript"></script>

<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script> 
```

```
 <div class="slider-wrapper theme-default">
    <div id="slider" class="nivoSlider">
        <img src="images/toystory.jpg" alt="" />
        <a href="http://dev7studios.com"><img src="images/up.jpg" alt="" title="#htmlcaption" /></a>
        <img src="images/walle.jpg" alt="" title="This is an example of a caption" />
        <img src="images/nemo.jpg" alt="" />
    </div>
</div>
<div id="htmlcaption" class="nivo-html-caption">
    <strong>This</strong> is an example of a <em>HTML</em> caption with <a href="#">a link</a>.
</div>

  </div> 
```

身体的尽头

```
<script type="text/javascript">
$(window).load(function() {
    $('#slider').nivoSlider();
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T03:52:56.190

我必须说，您的脚本 src 顺序不平衡，您应该将 jquery 向上并向下滑动，然后查看是否有效：

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>

<script src="jquery.nivo.slider.pack.js" type="text/javascript"></script> 
```

# c# - 将传统异步处理程序包装到 TPL 任务时 回调和状态会发生什么？

> ID：13427417
> 
> 赞同：1
> 
> 时间：2012-11-17T03:36:52.397
> 
> 标签：c#, asynchronous, azure, task-parallel-library, azure-storage

[此 MSDN 页面有以下示例](http://msdn.microsoft.com/en-us/library/dd997423.aspx)： 目的是包装无法在各种`Func<T1, T2, T3>`重载中表示的 APM 样式任务。

```
static Task<String> ReturnTaskFromAsyncResult()
{
    IAsyncResult ar = DoSomethingAsynchronously();     // <-- If this is an APM method, it's a bad example since most APM methods have a parameter for callback and state.
    Task<String> t = Task<string>.Factory.FromAsync(ar, _ =>
        {
            return (string)ar.AsyncState;
        });

    return t;
} 
```

我的问题与功能有关`DoSomethingAsynchronously();`。我见过的大多数 APM 函数都需要参数回调和状态，这在本示例中是缺失的。

**问题：** “DoSomethingAsynchronously”中的回调和状态参数会发生什么变化

我需要做什么才能正确调用类似的函数？就我而言，我正在尝试像这样包装 Azure Table 调用

```
 Task CreateAsync(CloudTable tbl, CancellationToken token, object state)
    {
        ICancellableAsyncResult result = tbl.BeginCreate(null, state);  // Incorrect
        token.Register((o) => result.Cancel(), state);

        Task<bool> t = Task.Factory.FromAsync(result, _ =>
        {
            return (bool)result.AsyncState;
        });

        return t;
    }
    Task<bool> ExistsAsync(CloudTable tbl, CancellationToken token, object state)
    {
        ICancellableAsyncResult result = tbl.BeginExists(null, state);  // Incorrect
        token.Register((o) => result.Cancel(), state);

        Task<bool>  t = Task.Factory.FromAsync(result, _ =>
        {
            return (bool)result.AsyncState;
        });

        return t;
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-17T13:01:16.070

我认为您误解了`state`参数的用途。它就在那里：当*您*在其中传递一个对象时，您可以通过访问来检索它`AsyncState`。（和类似`state`的`CancellationToken.Register()`。）在这种情况下，你不需要`state`任何东西，所以你应该`null`在那里通过。这也意味着您创建的方法没有理由具有`state`参数。

该`callback`参数用于异步操作完成时要执行的代码。你需要的重载`FromAsync()`不使用这个，所以你也应该`null`在那里传递。

`endMethod`您似乎也对在委托中放入什么感到困惑。顾名思义，您应该`EndXxx()`在其中调用该方法（在您的情况下是`EndCreate()`and `EndExists()`）。如果整个操作返回一些东西，它实际上会被 end 方法返回，所以你应该从委托中返回它。然后它将作为创建的结果可用`Task`。您还可以在委托中执行一些清理。就您而言，我认为在那里处理取消注册是有意义的，因为不再需要它。

因此，您的代码应类似于：

```
Task CreateAsync(CloudTable tbl, CancellationToken token)
{
    ICancellableAsyncResult result = tbl.BeginCreate(null, null);
    var cancellationRegistration = token.Register(result.Cancel);

    return Task.Factory.FromAsync(result, ar =>
    {
        cancellationRegistration.Dispose();
        tbl.EndCreate(ar);
    });
}

Task<bool> ExistsAsync(CloudTable tbl, CancellationToken token)
{
    ICancellableAsyncResult result = tbl.BeginExists(null, null);
    var cancellationRegistration = token.Register(result.Cancel);

    return Task.Factory.FromAsync(result, ar =>
    {
        cancellationRegistration.Dispose();
        return tbl.EndExists(ar);
    });
} 
```

有关此主题的更多信息，请查看 Stephen Toub 的[*任务和 APM 模式*](http://blogs.msdn.com/b/pfxteam/archive/2009/06/09/9716439.aspx)。

# svg - 长 SVG 对象中的渐变平滑

> ID：13427420
> 
> 赞同：1
> 
> 时间：2012-11-17T03:37:25.940
> 
> 标签：svg, d3.js, gradient

我正在使用 D3 创建一个填充有渐变的大对象，但是对象越大，渐变变得不那么平滑。以下是创建此类工件的代码示例：

```
 <script type="text/javascript" src="http://mbostock.github.com/d3/d3.js?1.27.1">
 <script type="text/javascript">

var w = 4000,
    h = 100,
    m = 50;

var svg = d3.select("body").append("svg:svg")
    .attr("width", w)
    .attr("height", h);

var gradient = svg.append("svg:defs")
  .append("svg:linearGradient")
    .attr("id", "gradient")
    .attr("x1", "0%")
    .attr("y1", "0%")
    .attr("x2", "100%")
    .attr("y2", "0%")
    .attr("spreadMethod", "pad");

for (i=0; i<m; i++) {
    gradient.append("svg:stop")
        .attr("offset", (i*100.0)/(m-1.0) + "%")
        .attr("stop-color", "hsl(240,0%,"+(i%2)*100+"%)")
        .attr("stop-opacity", 1);
}

svg.append("svg:rect")
    .attr("width", w)
    .attr("height", h)
    .style("fill", "url(#gradient)");

  </script> 
```

是否可以使用某些 SVG 属性来增加渐变平滑度？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T05:29:00.610

这是 Chrome 渐变实现的一个错误，它也发生在 CSS 渐变中。[http://code.google.com/p/chromium/issues/detail?id=41756](http://code.google.com/p/chromium/issues/detail?id=41756)。它适用于除 Chrome 之外的所有浏览器。

幸运的是，在您的情况下，有一种解决方法：使用`spreadMethod: reflect;`它可以让您在较小的区域内声明渐变，并让浏览器重复它：

```
var gradient = svg.append("svg:defs")
  .append("svg:linearGradient")
    .attr("id", "gradient")
    .attr("x1", "0%")
    .attr("y1", "0%")
    .attr("x2", "2%")
    .attr("y2", "0%")
    .attr("spreadMethod", "reflect");

gradient.append("svg:stop")
  .attr("offset", 0)
  .attr("stop-color", "black")
  .attr("stop-opacity", 1);

gradient.append("svg:stop")
  .attr("offset", 1)
  .attr("stop-color", "white")
  .attr("stop-opacity", 1); 
```

这也具有更好的性能。希望您的实际可视化看起来有些相似！

你可以在这里看到一个演示：http: [//jsfiddle.net/uKH4j/](http://jsfiddle.net/uKH4j/)

# php - 如何处理用户特定的时区？

> ID：13427424
> 
> 赞同：1
> 
> 时间：2012-11-17T03:38:07.840
> 
> 标签：php, caching, timezone

我有一个不到 40 万用户的论坛。帖子的时区设置为中央标准时间。我可能会在数据库中保存与 GMT 相关的时区偏移量，例如 +3、-8 等。我想知道的是：我应该使用 APC 或 xcache 之类的操作码缓存还是基于文件系统的缓存来缓存这些？我的目标是避免为每个人的时区连续调用数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T02:54:01.243

之前多次遇到这个问题，近期，我会将它们存储在`$_SESSION`var 中，大概是在登录时，您将调用数据库进行身份验证。例如，在认证成功时，设置：

```
$_SESSION['timezone'] = '3'; // +3 hours from GMT 
```

这样，它在整个会话期间都可用，而无需对数据库进行一次调用并在需要的地方使用它。

如果您需要覆盖它，您可以：

```
$_SESSION['timezone'] = '-5'; // -5 hours from GMT 
```

或在任何时候取消设置：

```
unset($_SESSION['timezone']); 
```

虽然您有 400K 用户，但我们不知道您的设置/网络/并发用户峰值或平均负载，因此很难说您是否需要查看分布式对象缓存或其他方法，如下所述。

# 背景

**为什么要使用会话？**

使用 PHP`$_SESSION`可以让您存储大量信息，而不是偶尔或频繁地从数据库请求数据。您还可以在会话中存储大量数据，但常识要求您应该尽可能少地存储/您需要的数据。这是因为：

默认情况下，在 PHP 中，会话存储在磁盘上（在 /tmp 目录中），这将在您开始看到性能下降之前扩展到一定程度 - 基于您的平台设计方式。

**那么操作码缓存/加速器呢？**

[eAccelerator](http://eaccelerator.net/)、[APC和其他（您可以](http://drupal.org/project/apc)[在此处](http://en.wikipedia.org/wiki/List_of_PHP_accelerators)找到 PHP 操作码缓存引擎的列表），不会（除了具有特定功能的一两个之外）改进此类变量（来自数据库）的调用/返回，因为 PHP 是一个解释语。

这意味着每次请求 PHP 生成的页面时，服务器必须读入所需的各种文件，并将它们“编译”成机器在运行时可以理解的内容（操作码）。

PHP 操作码缓存机制/引擎将生成的代码保存在缓存中，因此只需生成一次即可为数以百万计的后续请求提供服务，因此，安装操作码缓存将减少生成页面所需的时间（有时通过高达 90%）。

使用 PHP 操作码缓存可能是个好主意，但不要减少对数据库的持续调用……这不是他们的核心目的。

**更大更活跃/高负载的站点呢？**

由于用户并发性而具有更多流量和更高负载的大型站点通常使用基于内存的解决方案来存储常用和面向用户的数据（包括时区！）的关键部分 - 更具体地说是“**基于内存的数据库表**”或“**分布式内存对象缓存**”，可以分布在一台或多台服务器之间以平衡负载......

MySQL 有[内存/堆](http://dev.mysql.com/doc/refman/5.0/en/memory-storage-engine.html)表（在内存中而不是在磁盘上创建），但仍然需要 SQL 查询来返回数据/信息。不用说，它们比访问存储在磁盘上的数据要快得多。

可能 PHP 领域中最流行的基于内存的缓存解决方案是[memcached](http://memcached.org/)，它被许多公司/项目广泛使用，并描述为：

> 一个高性能的分布式内存对象缓存系统，本质上是通用的，但最初旨在通过减轻数据库负载来加速动态 Web 应用程序...... memcached 允许您从系统的某些部分获取内存需要并使其可访问您拥有的区域少于您的需要。

从长远来看（并且随着显着增长），这种方法是可取的。但是在不了解平台的负载和夹点/瓶颈的情况下，我建议`$_SESSION`默认使用 PHP 并从那里开始工作。

# assembly - Gnu AS 相当于 NASM 中的 ORG

> ID：13427428
> 
> 赞同：1
> 
> 时间：2012-11-17T03:38:29.273
> 
> 标签：assembly, gnu-assembler, att

NASM 中的 ORG（起源）指令在 GAS 中的等效指令是什么？

编辑：对所有人的警告：`.org`不是 origin 指令，它似乎反而用`00`指定的地址填充组装文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T03:41:26.533

我不了解 NASM，但我的印象是它包含的功能在 GNU 工具链领域被认为是链接器的责任，而不是汇编器的责任。

您可能需要使用自定义[`.section`](http://sourceware.org/binutils/docs/as/Section.html#Section)指令标记您的程序集源，然后编写[链接描述文件](http://sourceware.org/binutils/docs-2.23/ld/Scripts.html#Scripts)以将每个部分放在所需的地址。

# css - 多次使用不同文件的不同值的css代码

> ID：13427429
> 
> 赞同：1
> 
> 时间：2012-11-17T03:38:37.420
> 
> 标签：css

我创建此代码是为了使用它将图像和文本并排放置在 HTML 页面中。

```
.mydiv {
    width:646px;
    height: auto;
}

.myimage {
    float:left;
    width:378px;
    height:291px;
    margin:5px;
} 
```

我遇到的问题是我想在不同的文件和不同的图像值中多次使用代码，我不想为所有这些文件创建 css 文件。那么如何为一个css文件中的所有文件编写具有不同值的所有代码呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T03:48:45.303

首先，您可以将您的 CSS 放在一个 CSS 文件中，然后通过在

```
<LINK href="special.css" rel="stylesheet" type="text/css"> 
```

（见[W3C](http://www.w3.org/TR/html4/present/styles.html)）

对于无法在 html 文件之间重复使用的值（例如图像的 SRC），您必须在每个文件中手动对其进行更正。您可以直接在 HTML 中（如果您使用 ）或通过在标题中声明来执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T03:53:23.873

使用上面的代码创建一个`.css`文件。您还需要指定`.myimage`班级的高度。在您想要上述文件的所有文件中，使用导入文件

`<LINK href="example.css" rel="stylesheet" type="text/css">`.

现在对于持有图像的 div 给出类 as`.myimage`并且`src`属性独立于文件

**编辑-**假设您的站点中有 3 个 html 文件，并且您希望在所有文件中实现上述 css 类，然后打开一个新的记事本文件，将 css 类粘贴到文件中并另存为 somestyle.css。现在在每个 html 文件中，您使用上面的链接标记来导入 css 并像往常一样使用类。

# php - php foreach里面for语句的问题

> ID：13427432
> 
> 赞同：5
> 
> 时间：2012-11-17T03:39:06.997
> 
> 标签：php, for-loop, foreach

抱歉，如果之前有人问过这个问题，但是我无法找到问题的答案。

我正在尝试用 PHP 为我的 Web 应用程序构建日历系统和日程安排系统，并且在某个特定区域遇到困难。

我有一个“for”语句，它将制定一天中从上午 12:00 开始到晚上 11:30 结束的时间

在这个 for 循环中，我有一个 foreach，我想在数组中回显与特定时间匹配的对象。

我尝试过的所有事情，包括使用 for、while 和 foreach 语句都没有显示我所追求的，这是时间旁边排列的事件。

这是我的代码

```
<?php
$tStart = strtotime($start_time);
$tEnd = strtotime($end_time);
$tNow = $tStart;

while($items = mysql_fetch_object($result)){
    $events[] = $items;
}

for($tNow=$tStart; $tNow<$tEnd; $tNow=strtotime('+30 minutes',$tNow)){
    // Time to color the rows to make it easier to read
    if(!isset($day_row)){
        $day_row = "0";
    }
    if(isset($day_row) && $day_row >= "2"){
        $day_row--;
    }
    else{ $day_row++; 
    }

    //This bit draws the first column.
    echo "<tr><td class=\"day_row".$day_row."\" width=\"70px\">".date("h:i A",$tNow)."</td>";

    // MySQL stuff is now here
    foreach($events as $e => $item){
        if($item->apnt_start == $tnow){
            $rowspan = ((strtotime($item->apnt_finish)-strtotime($item->apnt_start))/"1800");
            echo "<td class=\"day_row_apnt\" rowspan=\"$rowspan\">".$item->apnt_start."-".$item->apnt_finish." ".$item->apnt_brief."</td></tr>";
        }
    }
}
?> 
```

目前我得到一个页面，其中包含
12:00 AM
12:30 AM
01:00 AM
01:30 AM
02:00 AM
02:30 AM
03:00 AM
03:30 AM
04:00 AM
04:30 AM
05：上午 00 点
05:30

在我想要与匹配时间约会的时间旁边。

我正在尝试实现类似于[http://mrbs.sourceforge.net/](http://mrbs.sourceforge.net/) 我无法使用他们的系统但是因为我无法正确集成它并且我尝试查看他们的代码并且它似乎指向很多文件，我在尝试理解我所追求的功能时遇到了麻烦。

如果这还不够清楚，请告诉我，并将尝试进一步解释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T03:53:50.297

您需要为以下变量定义和设置值：

```
$start_time = "09:00 AM";
$end_time = "11:30 PM"; 
```

您还需要添加查询和数据库连接（以上`while($items = mysql_fetch_object($result)){`语句）：

```
mysql_connect("hostname", "user", "password");
mysql_select_db("mydb");
$result = mysql_query("select * from mytable"); 
```

**编辑：** 您应该使用 while mysql_fetch_assoc 而不是 mysql_fetch_object。代替

```
while($items = mysql_fetch_object($result)){ 
```

和

```
while($items = mysql_fetch_assoc($result)){ 
```

删除：`$events[] = $items;`

确保您的 while 语句在所有代码执行后结束（您在问题中列出的代码） - 右括号`}`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T06:24:59.893

好的，这应该对你有用。

```
<?php
    $tStart = strtotime($start_time);
    $tEnd = strtotime($end_time);
    $tNow = $tStart;

    echo '<table>';

    while($events = mysql_fetch_assoc($result)){
        for($tNow=$tStart; $tNow<$tEnd; $tNow=strtotime('+30 minutes',$tNow)){
        // Time to color the rows to make it easier to read
            if(!isset($day_row)){
                $day_row = "0";
            }
            if(isset($day_row) && $day_row >= "2"){
                $day_row--;
            }
            else{ $day_row++; 
            }

            //This bit draws the first column.
            echo "<tr><td class=\"day_row".$day_row."\" width=\"70px\">".date("h:i A",$tNow)."</td>";
            if(strtotime($events['apnt_start']) == $tNow) {     
                $rowspan = ((strtotime($events->apnt_finish)-strtotime($events->apnt_start))/"1800");
                echo "<td class=\"day_row_apnt\" rowspan=\"$rowspan\">".$events->apnt_start."-".$events->apnt_finish." ".$events->apnt_brief."</td></tr>";
            }
        } //end for
    } //end while
    echo '</table>';
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T01:03:40.797

我要感谢就这个问题提供建议的每个人，我终于通过添加另一个变量并使用一种将数组存储在数组中的方法来实现它。

最终代码看起来像

```
<?php
    $tStart = strtotime($start_time);
    $tEnd = strtotime($end_time);
    $tNow = $tStart;
    $events = array();
    $eas = "0"; // eas stands for Event Array Start. this will be used to cycle through the events in the array.
    while($items = mysql_fetch_assoc($result)){
        $events[] = $items;
    }

    for($tNow=$tStart; $tNow<$tEnd; $tNow=strtotime('+30 minutes',$tNow)){
        // Time to color the rows to make it easier to read
            if(!isset($day_row)){
                $day_row = "0";
            }
            if(isset($day_row) && $day_row >= "2"){
                $day_row--;
            }
            else{ $day_row++; 
            }

            //This bit draws the first column.
            echo "<tr><td class=\"day_row".$day_row."\" width=\"70px\">".date("h:i A",$tNow)."</td>";
        if(strtotime($events[$eas]['apnt_start']) == $tNow) {     
                $rowspan = ((strtotime($events[$eas]['apnt_finish'])-strtotime($events[$eas]['apnt_start']))/"1800");
                echo "<td class=\"day_row_apnt\" rowspan=\"$rowspan\" >".$events[$eas]['apnt_start']."-".$events[$eas]['apnt_finish']." ".$events[$eas]['apnt_brief']."</td></tr>";
                $eas++;
           }
            else{
                echo "<td class=\"day_row".$day_row."\"></td>";
            }
        } //end for
?> 
```

通过使用变量 $eas，我可以通过最初将其设置为 0 来控制它将从哪个数字开始，然后当它找到具有匹配时间的条目时，它会通过 if 语句，在 if 语句的末尾它被赋予 $eas++ 以增加。

然后证明，如果没有预约，$eas 将不会运行并且它不会增加，因此保留在最后增加的 $eas 上。

再次感谢大家的帮助。

# elasticsearch - Elastic Search 中的一对多关系

> ID：13427434
> 
> 赞同：4
> 
> 时间：2012-11-17T03:39:48.110
> 
> 标签：elasticsearch

假设我有 2 个名为“twitter_user”和“twitter_comments”的表。

**twitter_users**具有字段：用户名和生物 **twitter_comments**具有字段：用户名和评论

显然，用户在 twitter_users 中有 1 个条目，在 twitter_comments 中可能有很多条目

我想在 Elastic Search 中为 twitter_users 和 twitter_comments 建模，在我查询时让 ES 搜索这两个模型，因为我知道评论计入 Twitter 用户的整体相关性得分。

我知道我可以通过创建一个额外的字段（除了用户名和简历）并连接所有评论来仅使用 1 个模型来模仿这一点。但是还有另一种“更清洁”的方式吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-17T09:16:11.380

这取决于。

如果您只想搜索用户评论、全文和所有字段，只需将所有评论存储在用户对象中（无需连接任何内容）：

```
{
    "user" : {
        "username" : "TestUser",
        "bio" : "whatever",

        "comments" : [
        {
            "title" : "First comment",
            "text" : "My 1st comment"
        },
        {
            "title" : "Second comment",
            "text" : "My 2nd comment"
        }
        ]
    }
} 
```

如果您需要基于每条评论的查询，您需要将评论映射为[嵌套](http://www.elasticsearch.org/guide/reference/mapping/nested-type.html)（在提交任何数据之前），以便将每条评论视为单个项目。

对于您的评分，只需添加另一个字段“comment_count”并将其用于提升/评分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T13:50:12.613

正如 Thorsten 已经建议的那样，您可以使用嵌套查询，这是一个很好的方法。

或者，您可以将评论索引为用户的子项。然后您可以像现在一样搜索用户，使用[top_children查询搜索评论以查找与您的搜索评论相关的所有内容，最后使用](http://www.elasticsearch.org/guide/reference/query-dsl/top-children-query.html)[bool](http://www.elasticsearch.org/guide/reference/query-dsl/bool-query.html)或[dis_max](http://www.elasticsearch.org/guide/reference/query-dsl/dis-max-query.html)查询将两者的分数组合在一起。

嵌套方法在搜索期间会更有效，但每次添加附加评论时，您都必须重新索引用户和所有评论。使用子/父方法，您只需要索引新评论，但搜索会更慢并且需要更多内存。

# objective-c - 在获取请求中显示不同的结果，按属性分组并计算该属性的总数

> ID：13427436
> 
> 赞同：3
> 
> 时间：2012-11-17T03:40:03.500
> 
> 标签：objective-c, core-data, nspredicate, nsfetchedresultscontroller, nsfetchrequest

设想：

我有一个费用跟踪 iOS 应用程序，我有一个名为“DashBoardViewController”的视图控制器（表格视图控制器 - 带有 FRC），它基本上可以对给定一周、一个月或一年的费用/收入进行分类，并将其显示为部分标题标题例如：（2012 年 10 月 1 日至 10 月 7 日），它根据特定的周或月或年显示费用/收入 ROWS 和相关内容。

我的问题：

我想要完成的是：

假设我在三个不同的日期（分别为 2012 年 11 月 11 日、11 月 14 日、11 月 16 日）保存了 3 项名为“汽车”的相同类别的新费用。

在我的视图控制器中，我想将该类别“自动”显示为表格视图中的一行，但它应该只显示为一行而不是三次，因为我保存了三项费用（类别为“自动”）并且总金额应该是加起来我节省的所有 3 项费用（针对该特定类别）。类似于以下屏幕截图。

![在此处输入图像描述](../Images/7e982f64c1c8a929259bf3b6544dbff9.png)

我写了一些代码位，它给了我相同类别的三行，而不是我真正想要的（同一类别的一行），我不知道如何计算它们的总数？应该与此处的 NSPredicate 或获取的结果控制器相关。任何帮助将不胜感激。

```
- (void)userDidSelectStartDate:(NSDate *)startDate andEndDate:(NSDate *)endDate
{
    AppDelegate * applicationDelegate = (AppDelegate *) [[UIApplication sharedApplication] delegate];
    NSManagedObjectContext * context = [applicationDelegate managedObjectContext];

    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
  // Edit the entity name as appropriate.
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"Money" inManagedObjectContext:context];
   [fetchRequest setEntity:entity];

  // Set the batch size to a suitable number.
   [fetchRequest setFetchBatchSize:20];

   NSPredicate *predicateDate = [NSPredicate predicateWithFormat:@"(date >= %@) AND (date <= %@)", startDate, endDate];

// Edit the sort key as appropriate.

  typeSortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"type" ascending:YES]; // type refers to an expense or income.

  dateSortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"date" ascending:YES];

  if(self.choiceSegmentedControl.selectedIndex == 0)  // UISegment Control for "Sorting Category"
  {
      NSPredicate *predicateCategory = [NSPredicate predicateWithFormat:@"cat == %@", @""];

      NSArray * subPredicates = [NSArray arrayWithObjects:predicateCategory, predicateDate, nil];

      NSPredicate * compoundPredicate = [NSCompoundPredicate andPredicateWithSubpredicates:subPredicates];

      [fetchRequest setPredicate:compoundPredicate];

      choiceSortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"cat" ascending:NO];
   }

   NSArray * descriptors = [NSArray arrayWithObjects:typeSortDescriptor, dateSortDescriptor, choiceSortDescriptor, nil];

   [fetchRequest setSortDescriptors:descriptors];
   [fetchRequest setIncludesSubentities:YES];

   if(_fetchedResultsController)
   {
       [_fetchedResultsController release]; _fetchedResultsController = nil;

   }

   // Edit the section name key path and cache name if appropriate.
   // nil for section name key path means "no sections".
  _fetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:context sectionNameKeyPath:@"type" cacheName:nil];

  _fetchedResultsController.delegate = self;

  NSError *anyError = nil;

  if(![_fetchedResultsController performFetch:&anyError])
  {
      NSLog(@"error fetching:%@", anyError);
  }

  __block double totalAmount = 0;

  [[self.fetchedResultsController fetchedObjects] enumerateObjectsUsingBlock: ^void (Money *money, NSUInteger idx, BOOL *stop) {

    totalAmount += [[money amount] doubleValue];
  }];

  [fetchRequest release];

  //Finally you tell the tableView to reload it's data, it will then ask your NEW FRC for the new data
  [self.dashBoardTblView reloadData];

  self.startDate = startDate;
  self.endDate = endDate;

} 
```

我想使用 NSDictionaryResultType 但这给我使用的 FRC 带来了问题（对于部分名称，填充表格视图等）

我循环通过 FRC 的代码给了我总金额（收入和支出）但我想要每个类别的总金额（例如：类别“汽车”的总金额，“娱乐”类别的总金额）。请帮助我，我完全被困在这里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T21:23:20.943

我不认为你可以按摩你的 FRC 来返回你需要的那种物体。NSPredicate 只是过滤要返回的对象类型，它不会从数据中创建新对象。

但是，您可以获取按日期过滤的货币对象，然后使用[KVC 集合运算符](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/KeyValueCoding/Articles/CollectionOperators.html)从货币对象数组中计算数据，如下所示：

```
NSArray *moneyObjectsFilteredbyDate = [self.fetchedResultsController fetchedObjects]
NSArray *categoryStrings = [moneyObjectsFilteredbyDate valueForKeyPath:@"@distinctUnionOfObjects.cat"];
NSArray *sortedCategoryStrings = [categoryStrings sortedArrayUsingSelector:@selector(localizedCaseInsensitiveCompare:)];

NSMutableArray *aggregatedDataObjects = [NSMutableArray array];
for (NSString *aCategoryString in sortedCategoryStrings) {
    NSPredictate *categoryPredicate = [NSPredicate predicateWithFormat:@"cat == %@", aCategoryString];
    NSArray *moneyWithThisCategory  = [moneyObjectsFilteredByDate filteredArrayUsingPredicate:categoryPredicate];
    NSNumber *sum = [moneyWithThisCategory valueForKeyPath:@"@sum.amount"];
    [aggregatedDataObjects addObject:@{@"category" : aCategoryString, @"sum" : sum, @"individualExpenses" : moneyWithThisCategory}];
} 
```

当然，您可以在配置表格单元格的方法中执行部分操作（例如计算总和本身），但我希望它能给您一个想法。但我不认为您可以使用 SQL 查询或类似形式的谓词来创建新的数据结构。

您可以做的其他事情：使类别成为您的核心数据模型的单个对象，并在moneyobjects 和Category 对象之间添加关系。然后你可以只获取类别对象。尽管您随后必须按日期过滤某个类别的费用。

# c++ - 在 C++ 中将二维数组归零。我需要2个for循环吗？

> ID：13427437
> 
> 赞同：5
> 
> 时间：2012-11-17T03:40:09.610
> 
> 标签：c++, arrays

如何在 C++ 中将二维数组归零？我需要两个 for 循环吗？

来自其他高级语言，我想知道为什么 C++ 不将数组初始化为有意义/合理的默认值？我是否总是需要声明一个数组，然后立即将其“归零”？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-17T03:44:36.550

C++ 语言试图遵循“你不为你不使用的东西付费”的原则。它不会将基本类型初始化为任何默认值，因为您可能不希望它发生。无论如何，该语言为您提供了显式请求此类初始化的机会。

在声明的那一刻，您可以使用初始化程序并简单地执行此操作

```
int array[10][20] = {}; 
```

或者，对于动态分配的数组

```
int (*array)[20] = new int[10][20](); 
```

这将给出一个零初始化数组。不需要循环。

但是，如果您想将现有数组归零，那么您确实必须使用更复杂的东西。在整数类型的情况下，一个好的旧的`memset`将起作用。对于指针或浮点类型，情况通常更复杂。`memset`取决于实现定义的属性，可能会起作用，也可能不会起作用。在任何情况下，标准库都可以通过提供诸如`std::fill`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T03:42:48.163

取决于你如何创建它。

二维向量，是的，两个 for 循环（因为整数是原始类型 - 类将调用默认 ctor）。

二维数组？不，你可以`memset`或者`bzero`一次，因为内存都是连续的，无论是使用`malloc`还是`new`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T03:44:52.877

只有标量类型的 C 样式数组可以选择在不初始化的情况下创建。要将这样的数组初始化为零，您只需提供一个空的初始化程序：

```
int a[3][3] = {}; // 3x3 zeroes 
```

当您来自“其他高级语言”时，请考虑减少 2D 数据的低级类型（有多个矩阵库：[boost.ublas](http://www.boost.org/doc/libs/release/libs/numeric/ublas/doc/index.htm)和 Eigen 可能是最受欢迎的，当然在 boost 中也[有多数组](http://www.boost.org/doc/libs/release/libs/multi_array/doc/index.html))

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-17T03:41:21.240

您可以简单地使用`memset`将零放在任何地方。记录[在这里](http://www.cplusplus.com/reference/clibrary/cstring/memset/)

```
memset(pointer, value_to_put, num_bytes); 
```

所以在这种情况下，你会有一些类似的东西

```
memset(myArray, 0, sizeof(arrayElement) * width * height); 
```

# image - 按钮悬停效果

> ID：13427441
> 
> 赞同：1
> 
> 时间：2012-11-17T03:29:33.350
> 
> 标签：image, css, button

我对 CSS 和网络编程很陌生。我想要做的是为按钮添加悬停效果。我通过使用 2 张图片来做到这一点。

有一个名为下载的按钮，我在悬停代码中添加：

```
.button:hover{
    background-image:url(images/button2.png);

} 
```

问题是按钮需要时间来加载，即：悬停时显示按钮会有延迟。我该如何解决这个问题？

编辑：我尝试使用预加载，但也有一种延迟

```
div#preloadedImages
{
    width: 0px;
    height: 0px;
        background-image: url(images/button2.png);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T03:47:04.123

您应该使用图像精灵来消除延迟。sprite 是一个包含多个图像的较大文件。您的按钮将其背景设置为 sprite.png 文件。然后，您可以更改`background-position`属性以移动精灵的位置。

另一方面——你为什么使用图像作为按钮？大多数按钮都可以在纯 CSS 中完成，并为旧浏览器提供一些备用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T03:52:49.873

从两个图像中创建一个图像（称为精灵）

这是一个带有动画的工作示例，向您展示它是如何工作的。

点击这里 >>>[**小提琴**](http://jsfiddle.net/videsignz/eAp2H/)

然后将您的背景位置设置为以显示背景图像的正常状态

```
 .button {
    width: 150px;
    height: 50px;
    background-image: url('image-sprite.jpg');
    background-position:  left top;
} 
```

然后在你的悬停css上，只需移动背景图像以显示它的下部

```
.button:hover {
    background-position: left bottom;
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T16:16:47.293

保持您当前的 css 和其他内容不变，并`<img>`在页面的任何位置添加一个组件，并将其隐藏以最初加载图像。

```
<img src="images/button2.png" style="display:none;"/> 
```

# java - 如何在 JSF 中从 ActionListener 呈现表单的一部分

> ID：13427444
> 
> 赞同：1
> 
> 时间：2012-11-17T03:40:59.563
> 
> 标签：java, ajax, jsf

我的一个 jsf 页面中有一个简单的文件上传机制。文件上传后，我会触发一个 ActionListener。此时，我可以访问用户上传的文件的名称，并且我想将其添加到 outputText 组件中。如何从 java 代码重新呈现表单以显示文件？我可以调用一些ajax函数吗？

```
/**
 * Called when a file is uploaded
 * @param event The FileUploadEvent that contains info on the file uploaded
 */
public void handleFileUpload(FileUploadEvent event){ 
    data = event.getFile().getContents();
    name = event.getFile().getFileName();
} 
```

以上是文件上传后运行的代码。你可以看到我得到了文件的名称。我现在需要重新渲染 outputText 以便显示名称。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T03:58:34.773

这通常要在视图端声明。

即使您没有提及它（这很糟糕；您应该始终在问题中提及您正在使用的 JSF 实现和组件库，并且确保不要将所有内容过度概括为“标准 JSF”），侦听器方法代码您可以将其识别为 PrimeFaces 特有的一种[`<p:fileUpload>`](http://www.primefaces.org/showcase/ui/fileUploadSingle.jsf)。

在这种情况下，您实际上应该使用组件自己的`update`属性，该属性应该引用您希望在完成 ajax 请求时更新的组件的（相对）客户端 ID。

```
<p:fileUpload ... update="text" />
...
<h:outputText id="text" value="#{bean.text}" /> 
```

就这样。在此特定示例中，您只需将文件名分配给`text`属性。

### 也可以看看：

*   [`<p:fileUpload>`VDL 文档](http://www.primefaces.org/docs/vdl/3.4/primefaces-p/fileUpload.html)— 列出所有可用属性。

# gcc - AMD Opteron 4280 的 GCC 优化选项：基准测试

> ID：13427448
> 
> 赞同：1
> 
> 时间：2012-11-17T03:41:29.047
> 
> 标签：gcc, x86-64, intel, compiler-optimization, amd-processor

我们正在从一台配备 2*Xeon X5650 的本地计算服务器转移到另一台配备 2*Opteron 4280 的本地计算服务器......今天我试图在新机器（AMD 机器）上启动我精彩的 C 程序，并发现性能 > 50%，保持所有可能的参数相同（甚至随机数生成器的种子）。我开始研究这个问题：谷歌搜索“amd opteron 4200 编译器选项”给了我一些建议，即“标志”（选项）可供我使用 GCC 4.6.3 编译器。我玩弄了这些旗帜，并在这里总结了我的发现……

我不允许上传图片，所以图表在这里[https://plus.google.com/117744944962358260676/posts/EY6djhKK9ab](https://plus.google.com/117744944962358260676/posts/EY6djhKK9ab)

**我想知道是否有人（编码人员）可以就这个主题给我任何评论，尤其是我对“... -march=bdver1 -fprefetch-loop-arrays”和“... -fprefetch -loop-arrays -march=bdver1" 在不同的运行时产生？我也不确定，假设“-funroll-all-loops”是否已经包含在“-O3”或“-Ofast”中，为什么再添加一次这个标志会有任何不同呢？为什么英特尔处理器的任何额外标志都会使性能变得更糟（除了“-ffast-math” - 这很明显，因为据我了解，它通过定义浮点运算实现了不太精确和更快，虽然...... )?**

关于机器和我的程序的更多详细信息：2*Xeon X5650 机器是具有 gcc 4.4.3 的 Ubuntu 服务器，它是 2（主板上的 CPU）X6（每个真实内核）*2（超线程）=24 线程机器，并且在我的“实验”或基准测试期间，它上面运行着一些东西......

2*Opteron 4280 机器是具有 gcc 4.6.3 的 Ubuntu 服务器，它是 2（主板上的 CPU）X4（每个真实内核=Bulldozer 模块）*2（AMD Bulldozer 任何线程=内核类型）=18 线程机器，我只是将它用于我美妙的“基准”......

我的基准测试程序只是一个蒙特卡洛模拟的东西，它在开始时会做一些 IO，然后大约 10^5 次 Mote Carlo 循环给我结果。所以，我假设它是整数和浮点计算程序，不时循环并检查随机生成的“结果”是否对我来说足够“好”......该程序只是一个单线程，我正在为每个基准测试使用相同的参数启动它（很明显，但我还是应该提到它），包括随机生成器种子（因此，结果是 100% 相同的）......该程序不是内存密集型的。结果运行时间只是标准“/usr/bin/time”命令的“用户”时间。

# ruby-on-rails - Ruby on Rails 作业调度选项

> ID：13427450
> 
> 赞同：1
> 
> 时间：2012-11-17T03:41:59.413
> 
> 标签：ruby-on-rails, ruby

昨晚打嗝后我打算再试一次。以下是我试图找到的解决方案： 满足控制器中的条件后，我需要在五分钟后运行作业。这是一个用于多人在线游戏的彩票网站。售票后，根据特定条件（满足的玩家数量，满足的彩票项目数量），玩家有五分钟的时间买票。五分钟后，我需要随机选择唯一的票号和获奖者代币。现在我手动运行它。我正在寻找一种可以在控制器中安排在五分钟后运行的解决方案。

我已经尝试过延迟工作，但我无法在 Mac 上本地工作。[Ruby on Rails 延迟作业本地无法运行](https://stackoverflow.com/questions/13416439/ruby-on-rails-delayed-job-local-wont-run) 我尝试了 Iron.io 付费解决方案，但没有成功。

请提供可能的教程建议。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T04:25:17.247

Sidekiq*很棒*，您应该先尝试一下。

[https://github.com/mperham/sidekiq](https://github.com/mperham/sidekiq)

主要作者 Mike Perham 是一位了不起的程序员，他撰写了有关 Sidekiq、Resque、Delayed Job 之间的比较的文章。

值得在这里阅读他的博客文章：

[http://www.mikeperham.com/2011/05/04/background-processing-vs-message-queueing/](http://www.mikeperham.com/2011/05/04/background-processing-vs-message-queueing/)

# php - 将 switch() 设置为在匹配案例后不中断，而是继续处理所有匹配案例

> ID：13427459
> 
> 赞同：1
> 
> 时间：2012-11-17T03:43:03.107
> 
> 标签：php, switch-statement, control-structure

我真的只是对此感到好奇，我不打算实施它，但我确实认为如果出现适当的条件，这将是一个很酷的控制结构。

我有一个布尔数组，代表用户试图查看的数据类型，然后我有一个布尔对象，表示用户是否有权查看该数据。

而不是 if 语句的列表说`if(permission and display){show this type}`，我想我会改为只使用 switch(true) 并实际编写相同数量的代码但格式更好一点，如果我能得到一个 switch 语句到`continue;`.. 那本来是凉爽的。

```
switch(true){
    case ($processPermissions->history->view) && ($display['history'] !== false):
        $application['history'] = $this->getHistory();
        continue;

    case ($processPermissions->notepad->view) && ($display['notepad'] !== false):
        $application['notepad'] = $this->notepad('get');
        continue;

    case ($processPermissions->documents->view) && ($display['documents'] !== false):
        $application['documents'] = $this->documents('get');
        continue;

    case ($processPermissions->accounting->view) && ($display['accounting'] !== false):
        $application['accounting'] = $this->accounting('get');
        continue;

    case ($processPermissions->inspections->view) && ($display['inspections'] !== false):
        $application['inspections'] = $this->inspections('get');
        continue;

    case ($processPermissions->approvals->view) && ($display['approvals'] !== false):
        $application['approvals'] = $this->approvals('get');
        continue;
} 
```

实际上，我只是要创建一个数组并循环遍历它，因为每种情况下的代码都是相同的。

..但我很好奇如果我愿意的话，我将如何让它发挥作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T03:48:36.590

似乎有很多毫无意义的重复，当你可以有类似的东西时

```
$stuff_to_check = array('history', 'notepad', 'documents', 'accounting', etc....)
foreach($stuff_to_check as $thing) {
   if ($processPermissions->$thing->view && ($display[$thing] !== false))
       $applications[$thing] = $this->document('get');
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T03:50:14.563

它已经被支持 - 只是不包含该`break`语句，并且匹配的语句之后的每个`case`块也将被执行，直到`break`遇到 a 。

此外，该`continue`语句已`switch`在 PHP 中的块中得到支持，但其行为类似于`break`.

有关更多详细信息，请参阅文档[`switch`](http://php.net/switch)。

```
$value = 2;
switch ($value) {
    case 0:
        // not executed
    case 1:
        // not executed
    case 2:
        // executed
    case 'whatever':
        // executed
        break;
    case 'foo':
        // not executed
        break;
    default:
        // not executed
} 
```

有关更多详细信息，请参阅文档[`switch`](http://php.net/switch)。

# tfs - TFS 工作流 MSBuild 活动项目位置

> ID：13427463
> 
> 赞同：0
> 
> 时间：2012-11-17T03:43:39.377
> 
> 标签：tfs, msbuild, workflow, tfsbuild

我喜欢 BuildProcessTemplates 和 Custom Assemblies 文件夹如何自动将构建脚本同步到构建控制器/代理上。我已经用 C# 编写了自定义活动，并且了解如何添加导入，以便可以使用这些程序集中的类型。

我还看到了如何通过 MSBuild 活动使用 MSBuild 文件。我还注意到，如果我将一个 msbuild 文件（比如 foo.proj ）检查到源代码控制中的 CustomAssemblies 文件夹中，那么 msbuild 会显示在我的自定义程序集旁边的服务器上的临时目录结构中。

所以这是我的问题？如何在 MSBuild 活动的 Project 属性中引用 foo.proj 的位置？我一直在寻找变量等，但似乎无法将它们放在一起。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T18:33:06.947

我找到了一种使用自定义代码活动的方法。基本上，我将它作为变量初始化模式连接到工作流中，然后在我的其他活动中使用它。但如果可能的话，我宁愿在不需要自定义程序集的情况下这样做。

```
using System.IO;
using System.Activities;
using System.Reflection;
using Microsoft.TeamFoundation.Build.Client;

namespace BuildTasks.Activities
{

    [BuildActivity(HostEnvironmentOption.All)]
    public sealed class FindCustomAssembliesDirectory : CodeActivity
    {
        public OutArgument<string> CustomAssembliesDirectory { get; set; }

        protected override void Execute(CodeActivityContext context)
        {
            context.SetValue(CustomAssembliesDirectory, new FileInfo(Assembly.GetExecutingAssembly().Location).Directory.FullName);
        }
    }
} 
```

# java - 捕获块行为

> ID：13427465
> 
> 赞同：-4
> 
> 时间：2012-11-17T03:43:41.530
> 
> 标签：java

catch 块的行为是什么，如果它不在块的末尾。

```
private Boolean connect(String addr) {
.....
   try {

         connected = true;

   } catch (ExceptionType name) {
       //log // print stack trace etc, but no explicit return

   } catch (ExceptionType name) {

   }

   if (some_other_condn) {

     ..
   }
} 
```

如果我不想执行块中的其余代码，是否需要在 catch 块内返回？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T03:44:53.323

`catch`是的，如果您不想执行其余代码，则确实需要从块中返回。

或者，最好将其余代码放在`try`块本身中。

```
try {
    connected = true;
    if (some_other_condn) {    
        //...
    }
} catch (ExceptionType name) {
   //log // print stack trace etc, but no explicit return
} catch (ExceptionType name) {

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T03:44:49.120

对，那是正确的。如果您不想执行其余代码，则需要返回（但您只会在异常情况下返回，我希望您知道这一点）。成功案例您的 return 语句将不会执行。

# ruby-on-rails - 通过 AJAX 渲染部分

> ID：13427467
> 
> 赞同：0
> 
> 时间：2012-11-17T03:44:07.390
> 
> 标签：ruby-on-rails, ruby-on-rails-3

**描述**

我有以下工作代码。

*   查看链接列表：

    ```
     <%= div_for feed do %>
        <%= link_to feed.name, { :controller => 'Feeds', :action => "get_posts", :id => feed.id }, 
      :remote => true %>  
      <% end %> 
    ```

*   用户单击链接时起作用的控制器：

    ```
     def get_posts
        @result = Feed.find(params[:id]).generate_html_table    

        respond_to do | format |  
          format.js {render :layout => false}  
        end
      end 
    ```

*   生成 HTML 的方法：

    ```
     def generate_html_table
          r = "<table>"

          self.posts.order("published desc").each { |p|                   
              link = '<a href=' + p.link + '>' + p.title + '</a>'
              date = '  ' + p.published.to_s

              r += '<tr><td>' + link + '</td><td>' + date + '</td></tr>'
          }    

          r + '</table>'
      end 
    ```

*   和 get_posts.js.erb：

    ```
     $( "#in" ).html("<%= raw @result %>"); 
    ```

用户点击链接，generate_html_table 生成插入#id div 的HTML 代码。

**问题**

我想用部分更改 generate_html_table 。我怎么才能得到它？

**我是如何尝试的**

*   我创建了文件views/feeds/_posts.html.erb：

    ```
     some static text 
    ```

*   我已将我的 get_posts.js.erb 编辑为：

    ```
     $( "#in" ).html("<%= escape_javascript(render :partial => 'posts' )%>"); 
    ```

但即使是现在，使用静态文本也行不通。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T04:14:58.107

看起来您在控制器中有视图代码，您应该摆脱该`generate_html_table`方法并将其留给`get_posts.js.erb`，当您放置属于视图的代码时，您清楚地知道您正在偏离轨道。

`get_posts.js.erb`您在问题的第二部分中似乎是对的，我在您之前的视图代码中没有看到将`#in`插入该代码的位置，您是否检查过直接调用 ajax URL 以丢弃 ajax 部分中的问题？（比如没有加载`jquery-ujs`您正在使用的或任何不显眼的 javascript 平台）。我也没有看到任何处理 的代码`remote`，所以从调用返回的 javascript 可能没有被使用。

我的建议是：

*   摆脱`generate_html_table`
*   将您想要收集的帖子的收集 ( `self.posts.order("published desc")`) 留在控制器中，这确实属于控制器
*   将代码添加到页面的资产以处理`ajax:success`按钮的回调以插入 html`#in`
*   不要在您的 ajax 调用中返回 javascript，而是返回您需要插入的 HTML，让客户端处理 javascript 部分

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T05:22:07.877

您可以尝试使用更多的 js 模板

这里的问题是你混合了很多责任，试着把它们分开一点。

## 例子：

**控制器：**

您可以将 移动`order`到模型中的范围内。

```
def get_posts
  @posts = Feed.find(params[:id]).order("published desc")

  respond_to do | format |  
    format.js 
  end
end 
```

**模型：**

*   该模型不需要知道如何呈现帖子列表。
*   提取`generate_html_table`方法。

**看法：**

`generate_html_table`在视图模板中实现旧的

```
<div id="in">
  <table>
  <% @posts.each do |p|  %>
    <tr> 
      <td> <%= j (link_to p.title, p.link) %> </td>
      <td><%= j p.published.to_s %> </td>
    </tr>
  <% end %>                
  </table>
</div> 
```

注意：尚未测试此代码，但这样的东西应该可以工作。

# python - 使用 POST 在谷歌应用引擎中传递数据

> ID：13427477
> 
> 赞同：1
> 
> 时间：2012-11-17T03:45:04.757
> 
> 标签：python, google-app-engine, http-post, http-get

我正在尝试使用谷歌应用引擎将变量从一个页面传递到另一个页面，我知道如何使用 GET 将它放在 URL 中传递它。但我想保持 URL 干净，而且我可能需要传递大量数据，那么如何使用 post 传递信息。

为了说明，我有一个包含一系列链接的页面，每个链接都转到 /viewTaskGroup.html，我想根据他们单击的链接传递我想要查看的组的名称（这样我就可以搜索并取回它并显示它），但如果可能的话，我宁愿不使用 GET 。

我认为不需要任何代码，但如果您需要任何代码，我很乐意提供任何需要的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T03:49:11.710

链接本身会产生`GET`请求。如果要生成`POST`请求，则需要：

*   使用表单`method="POST"`并提交，或者
*   使用 AJAX 加载新页面。

# javascript - jQuery 版本冲突

> ID：13427478
> 
> 赞同：0
> 
> 时间：2012-11-17T03:45:06.837
> 
> 标签：javascript, jquery, html

我遇到了一个问题..我现在可能在我的网站上使用了太多的 jquery，并且所有脚本目前都需要他们自己的 jquery 版本..所以它们几乎是冲突的，并且都包括在内进入一页，没有任何效果。

有没有人能给我一些关于如何解决这个问题的建议？

到目前为止，我正在使用：

[https://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js](https://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js)

[http://code.jquery.com/jquery-latest.js](http://code.jquery.com/jquery-latest.js)

[http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.7/jquery-ui.js](http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.7/jquery-ui.js)

[http://pastebin.com/kWZHNiu](http://pastebin.com/kWZHNiiu)

我试过只删除一两个，它们都陷入了一些工作的循环，而另一些则没有。主要问题似乎真的来自版本 1.2.3 > [http://pastebin.com/kWZHNiiu](http://pastebin.com/kWZHNiiu)

谢谢 - 詹姆斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T07:15:24.273

查看[http://api.jquery.com/jQuery.noConflict](http://api.jquery.com/jQuery.noConflict)

虽然我建议您的网站只使用一个版本。

# c++ - 在 Exe 中的 C++ 修补调用

> ID：13427483
> 
> 赞同：1
> 
> 时间：2012-11-17T03:46:38.620
> 
> 标签：c++, windows, api, hook

问题：

我正在注入程序并修补调用，但我想知道是否有任何方法可以逐行遍历应用程序并找到特定调用。_IE：假设程序'Foo.exe'在内存中的某个位置调用了**MessageBox**。

如果我执行以下代码：（只是一个粗略的想法）

```
a = GetModuleHandle ( "<dll>" ); 
b = GetProcAddress ( a , "<name>" );
swap ( b , (DWORD)*fake_function ); 
```

-- 一切正常，直到你开始调用实际的函数——这会创建一个永远持续的巨大循环（哎哟）。

现在我不确定这一点，我可能错了，但是......上面的代码是否替换了内存中的“Foo.exe”调用，还是用“fake_function”替换了 dll 的函数？

我对一些事情感兴趣...

*A )*我怎样才能在 'Foo,exe' 中找到所有调用**MessageBox**的内存位置，并用调用 'fake_function' 替换内存位置？

*B)* detours 是如何解决这个问题的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T04:34:00.807

您不需要找到调用 MessageBox 的所有实例，而是可以挂钩该函数。似乎您已经大致了解了，但您想要做的是遍历相关模块的 PE 导入表。当你走它时，你会寻找你想要挂钩的功能，然后你进行交换。从那时起，每当模块调用 MessageBox 函数时，它都会在导入表中查找对该函数的引用，并找到您的函数的地址，它以前会找到 Microsoft 的 MessageBox 实现的地址。在你的函数中，你可以做任何你想做的事情，你甚至可以调用你在交换时必须保存的 MessageBox 函数的原始地址。

# video - 在另一个视频流中嵌入视频

> ID：13427490
> 
> 赞同：1
> 
> 时间：2012-11-17T03:47:38.377
> 
> 标签：video, stream, embedded-resource

这是可能的，我怎样才能实时嵌入两个视频，以便像 vlc 这样的软件像只有一个视频一样跟随流，流式传输第一个直到定义的时间，流式传输第二个，然后恢复第一个直到完成？换句话说，如果我有这样的视频流：

```
<?php

$fp=fopen("video.mp4","rb");

while(!feof($fp)){
echo fread($fp,8096);
}

fclose($fp);

?> 
```

如何在同一流中“包含”第二个视频？喜欢：

```
<?php

$fp=fopen("video.mp4","rb");
$fp2=fopen("video2.mp4","rb");

while(!feof($fp)){
if($condition==1){
echo fread($fp2,8096);
}
else echo fread($fp,8096);
}

fclose($fp);
fclose($fp2);
?> 
```

我已经在简单的 php 中完成了，但如果我必须在 C 或 C++ 中完成，也没有问题。并且有一些工具可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T07:25:30.443

视频文件格式没有`#include`指令或任何此类...

我可以想出几种解决您问题的方法。一个是，如果您的播放器支持，则为它提供播放列表而不是第一个媒体的 URL。

如果播放器不支持播放列表，我会使用另一种方法，它是从拼接在一起的两个视频创建一个新的媒体文件。如果您使用的媒体格式是 MP4，您可能需要离线创建组合视频，因为实时创建 MP4 非常复杂（MP4 文件的标题包含文件其余部分的非常详细的索引，因此大多数 MP4 编写器仅在写入所有视频数据后才写入标头）。但是离线，这很简单，你可以使用 ffmpeg 或 VLC 之类的工具来做到这一点。如果两个视频都是由同一个编码器以相似的参数编码，则联合视频文件的创建速度非常快，因为您不需要重新编码（可以使用`ffmpeg -vcodec copy -acodec copy`）。以下是与 ffmpeg 连接的说明：[ffmpeg FAQ](http://ffmpeg.org/faq.html#toc-Concatenating-at-the-file-level)

# struts2 - 从索引导航时 Struts2 和 Tiles3.0.0 出错

> ID：13427495
> 
> 赞同：1
> 
> 时间：2012-11-17T03:48:38.250
> 
> 标签：struts2, tiles

尽我所能，但没有成功。`Index action is loaded fine but when I navigate to test than error is generated`. 不知道为什么会这样。

```
Using struts2 = 2.3.4.1
Tomcat latest
Tiles = 3.0.0 
```

**Pom.xml**

```
 <properties>
        <java.version>1.7</java.version>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
        <struts2.version>2.3.4.1</struts2.version>
        <slf4j.version>1.6.6</slf4j.version>
        <tiles.version>3.0.0</tiles.version>
    </properties>

    <dependencies>
        <dependency>
            <groupId>javax</groupId>
            <artifactId>javaee-web-api</artifactId>
            <version>6.0</version>
            <scope>provided</scope>
        </dependency>

        <!--Start Slf4j-->
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-api</artifactId>
            <version>${slf4j.version}</version>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-simple</artifactId>
            <version>${slf4j.version}</version>
        </dependency>
        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.17</version>
        </dependency>
        <!--End Slf4j-->

        <!--Start Struts2-->
        <dependency>
            <groupId>org.apache.struts</groupId>
            <artifactId>struts2-core</artifactId>
            <version>${struts2.version}</version>
        </dependency>
        <!--End Struts2-->

        <!-- Start Tiles dependencies -->
        <dependency>
            <groupId>org.apache.struts</groupId>
            <artifactId>struts2-tiles-plugin</artifactId>
            <version>${struts2.version}</version>
        </dependency>
        <dependency>
            <groupId>org.apache.tiles</groupId>
            <artifactId>tiles-api</artifactId>
            <version>3.0.0</version>
        </dependency>
        <dependency>
            <groupId>org.apache.tiles</groupId>
            <artifactId>tiles-core</artifactId>
            <version>3.0.0</version>
        </dependency>
        <dependency>
            <groupId>org.apache.tiles</groupId>
            <artifactId>tiles-extras</artifactId>
            <version>3.0.0</version>
        </dependency>
        <dependency>
            <groupId>org.apache.tiles</groupId>
            <artifactId>tiles-jsp</artifactId>
            <version>3.0.0</version>
        </dependency>
        <dependency>
            <groupId>org.apache.tiles</groupId>
            <artifactId>tiles-ognl</artifactId>
            <version>3.0.0</version>
        </dependency>
        <dependency>
            <groupId>org.apache.tiles</groupId>
            <artifactId>tiles-servlet</artifactId>
            <version>3.0.0</version>
        </dependency>
        <dependency>
            <groupId>org.apache.tiles</groupId>
            <artifactId>tiles-freemarker</artifactId>
            <version>3.0.0</version>
        </dependency>

        <!-- End Tiles dependencies -->

    </dependencies> 
```

**struts.xml**

```
 <package name="default" namespace="/" extends="tiles-default">

        <result-types>
            <result-type name="tiles" default="true" class="org.apache.struts2.views.tiles.TilesResult"/>
        </result-types>
        <default-action-ref name="index"/>
        <action name="index" class="com.myapp.tiles.action.Test">
            <result type="tiles">/welcome.tiles</result>
        </action>

        <action name="test" class="com.myapp.tiles.action.Test">
            <result type="tiles">test</result>
        </action>

        <action name="/**" class="com.myapp.tiles.action.Test">
            <result>{1}</result>
        </action>
    </package> 
```

**瓷砖.xml**

```
<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE tiles-definitions PUBLIC "-//Apache Software Foundation//DTD Tiles Configuration 3.0//EN" "http://tiles.apache.org/dtds/tiles-config_3_0.dtd">

<tiles-definitions >
    <definition  name="mainlayout" template="/templates/mainlayout.jsp">
        <put-attribute name="meta" value="/templates/main/meta.jsp"/>
        <put-attribute name="title" value=""/>
        <put-attribute name="header" value="/templates/main/header.jsp"/>
        <put-attribute name="search" value="/templates/main/search.jsp"/>
        <put-attribute name="navigation" value="/templates/main/navigation.jsp"/>
        <put-attribute name="body" value=""/>
        <put-attribute name="footer" value="/templates/main/footer.jsp"/>
    </definition>

    <definition name="/welcome.tiles" extends="mainlayout">
        <put-attribute name="title" value="Welcome To Person Management System"/>
        <put-attribute name="body" value="/index.jsp"/>
    </definition>

    <definition name="test" extends="mainlayout">
        <put-attribute name="title" expression="OGNL:title" />
        <put-attribute name="body" value="/index.jsp"/>
    </definition>
    <definition name="WILDCARD:package/*" extends="mainlayout">
        <put-attribute name="title" value="{1}" type="string"/>
        <put-attribute name="body" value="/test.jsp"/>
    </definition>

</tiles-definitions> 
```

**错误**

```
Nov 17, 2012 8:28:51 AM org.apache.catalina.core.ApplicationContext log
java.lang.NoSuchMethodError: org.apache.tiles.access.TilesAccess.getContainer(Ljava/lang/Object;)Lorg/apache/tiles/TilesContainer;
    at org.apache.struts2.views.tiles.TilesResult.doExecute(TilesResult.java:100)
    at org.apache.struts2.dispatcher.StrutsResultSupport.execute(StrutsResultSupport.java:186)
    at com.opensymphony.xwork2.DefaultActionInvocation.executeResult(DefaultActionInvocation.java:374)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:278)
    at com.opensymphony.xwork2.interceptor.ConversionErrorInterceptor.intercept(ConversionErrorInterceptor.java:138)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:236)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:236)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.intercept(StaticParametersInterceptor.java:190)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at org.apache.struts2.interceptor.MultiselectInterceptor.intercept(MultiselectInterceptor.java:75)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:90)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:243)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.ModelDrivenInterceptor.intercept(ModelDrivenInterceptor.java:100)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.ScopedModelDrivenInterceptor.intercept(ScopedModelDrivenInterceptor.java:141)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.ChainingInterceptor.intercept(ChainingInterceptor.java:145)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.PrepareInterceptor.doIntercept(PrepareInterceptor.java:171)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.I18nInterceptor.intercept(I18nInterceptor.java:176)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at org.apache.struts2.interceptor.ServletConfigInterceptor.intercept(ServletConfigInterceptor.java:164)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.AliasInterceptor.intercept(AliasInterceptor.java:192)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:187)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:54)
    at org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:511)
    at org.apache.struts2.dispatcher.ng.ExecuteOperations.executeAction(ExecuteOperations.java:77)
    at org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.doFilter(StrutsPrepareAndExecuteFilter.java:91)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722) 
```

**项目结构**

![瓷砖](../Images/cab9325d63b2d7bc1d378f357f1977ab.png)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-17T04:03:09.050

首先检查您的库中是否存在重复或冲突的 jar。当您使用 maven 时，请尝试使用插件来检查重复的依赖项。

其次试试 Tiles 2.xx。我从未集成过 Struts 2 和 Tiles，但遇到了几个 No Class found 异常与 Spring 3.x 和 Tiles 3

# xml - 查看 xml 而不是 xhtml 纽约时报 rss 提要

> ID：13427503
> 
> 赞同：0
> 
> 时间：2012-11-17T03:49:59.977
> 
> 标签：xml, xhtml

当我查看 nyt 新闻提要 xml 时，它呈现为 xhtml ..http://rss.nytimes.com/services/xml/rss/nyt/US.xml 有没有一种方法可以让我只看到 xml 而不是 xhtml了解结构。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T03:58:12.280

您引用的链接*是*XML。做一个“查看源代码”：

```
<?xml version='1.0' encoding='UTF-8'?><?xml-stylesheet type='text/xsl' href='http://rss.nytimes.com/xsl/eng/rss.xsl'?>
<rss xmlns:itunes="http://www.itunes.com/dtds/podcast-1.0.dtd" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:taxo="http://purl.org/rss/1.0/modules/taxonomy/" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:media="http://search.yahoo.com/mrss/" version="2.0">
<channel>
  <atom:link href="http://www.nytimes.com/services/xml/rss/nyt/US.xml" rel="self" type="application/rss+xml" />
  <title>NYT &gt; U.S.</title>
  <link>http://www.nytimes.com/pages/national/index.html?partner=rss&amp;emc=rss</link>
  <description>US</description>
  <language>en-us</language>
  <copyright>Copyright 2012 The New York Times Company</copyright>
  <pubDate>Sat, 17 Nov 2012 03:50:41 GMT</pubDate>
  <lastBuildDate>Sat, 17 Nov 2012 03:50:41 GMT</lastBuildDate>
  <ttl>5</ttl>
  <image><title>NYT &gt; U.S.</title>
    <url>http://graphics8.nytimes.com/images/misc/NYT_logo_rss_250x40.png</url>
    <link>http://www.nytimes.com/pages/national/index.html?partner=rss&amp;emc=rss</link>
  </image>
  <item>
    <atom:link href="http://www.nytimes.com/2012/11/17/us/back-when-a-ring-ding-tasted-guiltily-like-america.html?partner=rss&amp;emc=rss" rel="standout" />
    <title>This Land: Back When a Ring Ding Tasted, Guiltily, Like America</title>
    <link>http://www.nytimes.com/2012/11/17/us/back-when-a-ring-ding-tasted-guiltily-like-america.html?partner=rss&amp;emc=rss</link>
    <description>Consumers already knew that not everything is good for you, and this was never truer than with a Twinkie, a Sno Ball or a Ring Ding — the Ding Dong equivalent in the Northeast.&lt;img width='1' height='1' src='http://rss.nytimes.com/c/34625/f/642562/s/25ac040b/mf.gif' border='0'/&gt;&lt;br/&gt;&lt;br/&gt;&lt;a href="http://da.feedsportal.com/r/148659072988/u/353/f/642562/c/34625/s/25ac040b/a2.htm"&gt;&lt;img src="http://da.feedsportal.com/r/148659072988/u/353/f/642562/c/34625/s/25ac040b/a2.img" border="0"/&gt;&lt;/a&gt;&lt;img width="1" height="1" src="http://pi.feedsportal.com/r/148659072988/u/353/f/642562/c/34625/s/25ac040b/a2t.img" border="0"/&gt;</description>
    <category domain="http://www.nytimes.com/namespaces/keywords/nyt_org_all">Hostess Brands</category>
    <category domain="http://www.nytimes.com/namespaces/keywords/mdes">Food</category>
    ... 
```

# makefile - *.so.*T 文件有什么用？

> ID：13427510
> 
> 赞同：0
> 
> 时间：2012-11-17T03:52:07.197
> 
> 标签：makefile, autotools, libtool

在日志中我看到一行

> /usr/bin/install -c .libs/libgiomm-2.4.so.1.0.25T /mydir/glibmm-2.16.4/glibmm-2.16.4/gio/giomm/TEMP/usr/lib/libgiomm-2.4.so .1.0.25

那是我在构建输出中看到这个 T 文件的唯一地方。谁生成这个文件，为什么？为什么不安装 .libs/libgiomm-2.4.so.1.0.25？

# javascript - .replaceNode(); 替换不正确的节点

> ID：13427516
> 
> 赞同：0
> 
> 时间：2012-11-17T03:53:37.690
> 
> 标签：javascript, iframe, windows-8

这将是我第三次编辑和重写这个问题。在调试代码时，我不断发现问题的新方面。我会尽量组织这篇文章，让阅读起来有点痛苦……

A. 当试图通过 For 循环替换`<object>`节点时`<iframe>`，循环将替换“对象”节点的第一个实例，然后停止。之后的所有内容都丢失了。

B. 在尝试隔离问题时，注意到如果我尝试`<object>`用不同的标签替换节点，例如`<p>`or `<button>`，标签将包含相邻元素。

这是有问题的 for 循环的示例；您可能会注意到，它的最终目标是找到`<object>`它所定位的任何 YouTube 节点并将其替换为 YouTube`<iframe>`等效节点。但是目前，我正在使用一个虚拟元素（在本例中为按钮）来尝试说明问题。

```
article.content = items[n].querySelector("description").textContent;
            //Test to parse the article content into HTML. 
            var HTMLParser = new DOMParser();
            var htmlArticleContent = HTMLParser.parseFromString(article.content, "text/html");
            //Test Video Script Editor 
            var objectPoll = htmlArticleContent.getElementsByTagName("object");
            var numberOfObjects = objectPoll.length;
            for (var j = 0; j < numberOfObjects; j += 1) {
                if (objectPoll[j] != null) {
                    var videoEmbed = htmlArticleContent.getElementsByTagName("embed")[j];
                    if (videoEmbed != null) {
                        var videoSrc = videoEmbed.getAttribute("src");
                        if (videoSrc.split(".")[1] == "youtube") {

                            var newSrc = videoSrc.replace("/v/", "/embed/");
                            var iFrame = document.createElement("iframe");
                            iFrame.setAttribute("src", newSrc);
                            iFrame.setAttribute("height", objectPoll[j].getAttribute("height"));
                            iFrame.setAttribute("width", objectPoll[j].getAttribute("width"));
                            iFrame.setAttribute("frameborder", "0");
                            iFrame.setAttribute("allowfullscreen");
                            iFrame.setAttribute("type", "text/html");
                            iFrame.setAttribute("iv_load_policy", "3");
                            var test = document.createElement("button");
                            objectPoll[j].replaceNode(test);
                        }
                        else { }
                    }
                }
            } 
```

相反，这是来自 DOM Explorer 的最终结果：

```
<button>
<br>
<br>
<font size="3"><b>WoW Stream 2</b></font><br>
<br>
<object width="682" height="416" id="live_embed_player_flash" data="http://www.twitch.tv/widgets/live_embed_player.swf?channel=wow_2" type="application/x-shockwave-flash" bgcolor="#000000">
<param name="allowFullScreen" value="true">
<param name="allowScriptAccess" value="always">
<param name="allowNetworking" value="all"><param name="movie" value="http://www.twitch.tv/widgets/live_embed_player.swf"><param name="flashvars" value="hostname=www.twitch.tv&amp;channel=wow_2&amp;auto_play=player&amp;start_volume=25"></object>
</button> 
```

不知何故，`replaceNode()`正在封装完全不正确的 HTML 片段。我担心对象位置通过`getElementsByTagName()`.

这是原始 HTML 的一个小示例，它是通过 WinJS.xhr 从外部站点提供的；我理解阅读是否很痛苦。我隔离了前三个对象标签并用换行符分隔它们。

```
 <img src="http://media.mmo-champion.com/images/news/2011/november/d3.png" style="margin-bottom:-2px; margin-right:0px; vertical-align:bottom" /> 
    <b><a href="http://www.diablofans.com/news/1413-uber-bosses-speed-kill-video-blue-posts-bonus-blizzard-comic-contest-entry-black-ops-2-outsells-harry-potter-and-star-wars/" target="_blank">Uber Bosses Speed Kill Video, Blue Posts, Bonus Blizzard Comic Contest Entry, Black Ops 2 Outsells Harry Potter and Star Wars</a></b><br /> <br />
    <font size="3"><b>Battle.net World Championship</b></font><br /> <br /> 
    <div style="text-align: center;"><font size="3"><b>WoW Main</b></font><br /> <br /> 

    <object type="application/x-shockwave-flash" height="416" width="682" id="live_embed_player_flash" data="http://www.twitch.tv/widgets/live_embed_player.swf?channel=wow" bgcolor="#000000"><param name="allowFullScreen" value="true" />
    <param name="allowScriptAccess" value="always" /><param name="allowNetworking" value="all" /><param name="movie" value="http://www.twitch.tv/widgets/live_embed_player.swf" />
    <param name="flashvars" value="hostname=www.twitch.tv&amp;channel=wow&amp;auto_play=false&amp;start_volume=25" />
</object>

    <br /> <br /> <font size="3"><b>WoW Stream 2</b></font><br /> <br /> 

    <object type="application/x-shockwave-flash" height="416" width="682" id="live_embed_player_flash" data="http://www.twitch.tv/widgets/live_embed_player.swf?channel=wow_2" bgcolor="#000000"><param name="allowFullScreen" value="true" /><param name="allowScriptAccess" value="always" /><param name="allowNetworking" value="all" /><param name="movie" value="http://www.twitch.tv/widgets/live_embed_player.swf" />
    <param name="flashvars" value="hostname=www.twitch.tv&amp;channel=wow_2&amp;auto_play=player&amp;start_volume=25" />
</object>

    </div><br /> <br /> <font size="3"><b>Patch 5.1 - Loss of Control Alerts</b></font><br /> Patch 5.1 adds alerts when you lose control of your character to the default UI. They tell you what is affecting your character and the remaining duration. <br /> <br /> 
    <div style="text-align: center;">

    <object width="853" height="480"><param name="movie" value="http://www.youtube.com/v/PbIAuqwFC-Q?version=3&amp;hl=en_US"></param><param name="allowFullScreen" value="true"></param><param name="allowscriptaccess" value="always"></param><embed src="http://www.youtube.com/v/PbIAuqwFC-Q?version=3&amp;hl=en_US" type="application/x-shockwave-flash" width="853" height="480" allowscriptaccess="always" allowfullscreen="true"></embed>
</object>

    <br /> <br /> 
    <a href="http://media.mmo-champion.com/images/news/2012/november/alertOptions.jpg" target="_blank"><img src="http://media.mmo-champion.com/images/news/2012/november/thumb/alertOptions.jpg" border="0" alt="" /></a> <a href="http://media.mmo-champion.com/images/news/2012/november/alerts.jpg" target="_blank">
    <img src="http://media.mmo-champion.com/images/news/2012/november/thumb/alerts.jpg" border="0" alt="" /></a> </div><br /> <br /> <font size="3"><b>Popular Glyphs</b></font><br /> Guildox recently added a new feature that will show you which glyphs are popular with the top 5% of players, broken down by PvP and PvE. If you are looking for the <a href="http://www.guildox.com/go/g.asp?c=8&amp;r=&amp;w=&amp;a=24&amp;n=&amp;e=pve" target="_blank">popular glyphs</a> for your class, this should help!<br /> <br /> <div style="text-align: center;"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T11:05:32.300

`element.getElementsByTagName()`返回`NodeList`一个*[live](http://www.w3.org/TR/REC-DOM-Level-1/level-one-core.html#ID-1590626202)*。

因此，`objectPoll`通过指定索引来访问对象元素并不是一个好主意。

```
j objectPoll                   objectPoll[j]  (expected)
- ---------------------------- -------------  ---------
0 object#0, object#1, object#2 object#0       object#0
1 object#1, object#2           object#2       object#1
2 object#1                     `undefined`    object#2 
```

# php - 使用 ajax 提交 ajax 表单后重新填充 div（我认为！）

> ID：13427520
> 
> 赞同：1
> 
> 时间：2012-11-17T03:54:46.190
> 
> 标签：php, ajax

我有一张表，里面有我的数据库表中的一堆产品。每个产品都有一个更新按钮，它将通过 ajax 生成一个填充表单，供用户修改他们希望的任何细节。

提交时，我想更新数据库，然后返回刚才显示实时更新数据的页面。对于我所做的任何其他事情，我都会将视图发送回 ajax 成功函数并显示它。只有我似乎无法做到这一点。我从表单标签中取出操作和方法并让 ajax 函数处理它，但它不返回视图，它只显示视图，而我希望我的 div 进入现有页面上的特定 div

```
/*****  submit update form  *****/
$(document).on('click', '#updateSubmit', function() {
    $.ajax({
        type: "POST",
        url: 'products/updateProduct',
        success: function(data) {
            $('#viewProducts').fadeIn(1000, function(){
                $(this).html(data);
            //  THIS IS WHERE I WANT MY VIEW TO BE RETURNED TO(the #viewProducts).  CAN THAT BE DONE?
            })
        } // end success
    }); // end ajax 
}); // end submit event 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T04:15:57.353

尝试使用

`url: '/products/updateProduct'`代替`url: 'products/updateProduct'`

如果仍然不起作用，请尝试使用完整路径代替相对路径............

# php - 如何确定运行 PHP 应用程序的 Web 服务器 (Apache) 是否支持 HTTPS？

> ID：13427523
> 
> 赞同：0
> 
> 时间：2012-11-17T03:55:30.103
> 
> 标签：php, apache, https

请注意，我想知道它是否能够接受 HTTPS 请求，而不是它当前是否正在使用它。另请注意，在我的情况下，扫描端口或发出任何其他 [a] 同步请求不是一个选项，因为它需要非常快。

有没有办法“询问”Apache，例如：从命令行？

编辑：感谢所有想法，但它们是由像你我这样的人“手动”检查上述事实。那部分我能弄清楚，相信我。我只是认为这些短语“[a] 同步请求”和“它需要非常快”显然暗示了 PHP 应用程序形式的软件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T04:00:12.367

你可以检查这个，`phpinfo();`你也可以厚着脸皮知道[mod_ssl](http://httpd.apache.org/docs/2.4/mod/mod_ssl.html)是打开还是关闭

![在此处输入图像描述](../Images/5b75ebf1e17a20eaab071c0ff8e6887f.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T03:56:38.793

我认为您需要在您的页面上运行此代码：`<?php echo phpinfo();`您将获得有关版本和设置的所有信息

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-17T05:02:50.333

如果这是您管理的服务器：

1.  检查是否在 Apache 中启用了 mod_ssl
2.  检查您是否在 Apache 的 ports.conf 文件中侦听端口 443
3.  设置 SSL 主机以侦听 ports.conf 中的 IP:port 设置
4.  检查您是否没有使用防火墙阻止端口 443（这里有很多防火墙选项）

如果你已经配置了 Apache 并且没有关闭防火墙，Apache 应该告诉操作系统监听 443 端口，它会处理请求。

如果这是共享服务器或不是由您自己管理的服务器 - 请咨询您的服务器支持/管理员

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-17T05:09:52.517

这是一种检查 HTTPS 协议支持的方法，将 phpinfo() 信息保存到数组中：

```
// NOTE: This section was extracted from the PHP Manual, example from **jon at sitewizard dot ca**
ob_start();
phpinfo();
$PHPInfo = array( 'phpinfo' => array() );
if ( preg_match_all( '#(?:<h2>(?:<a name=".*?">)?(.*?)(?:</a>)?</h2>)|(?:<tr(?: class=".*?")?><t[hd](?: class=".*?")?>(.*?)\s*</t[hd]>(?:<t[hd](?: class=".*?")?>(.*?)\s*</t[hd]>(?:<t[hd](?: class=".*?")?>(.*?)\s*</t[hd]>)?)?</tr>)#s',
                     ob_get_clean(), $Matches, PREG_SET_ORDER )
) {
  foreach ( $Matches as $Value ) {
    if ( strlen( $Value[ 1 ] ) ) {
      $PHPInfo[ $Value[ 1 ] ] = array();
    }
    elseif ( isset( $Value[ 3 ] ) ) {
      $PHPInfo[ end( array_keys( $PHPInfo ) ) ][ $Value[ 2 ] ] = isset( $Value[ 4 ] ) ? array( $Value[ 3 ],
                                                                                               $Value[ 4 ] ) : $Value[ 3 ];
    }
    else {
      $PHPInfo[ end( array_keys( $PHPInfo ) ) ][ ] = $Value[ 2 ];
    }
  }
}

// End of extracted section ----------------------

$HTTPS      = $PHPInfo[ 'curl' ][ 'Protocols' ];
$HTTPSFound = mb_strstr( $HTTPS, 'https', FALSE );

if ( $HTTPSFound ) {
  echo "HTTPS supported<br /><br />";
}
else {
  echo "HTTPS NOT supported<br /><br />";
} 
```

**附加说明：此答案不需要“手动检查”。它通过脚本获取信息！**

# java - 从 /data/dalvik-cache JavaNullPointer 读取

> ID：13427524
> 
> 赞同：0
> 
> 时间：2012-11-17T03:55:37.530
> 
> 标签：java, android, file, file-io, java-io

我正在尝试列出 /data/dalvik-cache 文件夹中的所有文件，但我不断收到`NullPointerException`

```
List<String> dalvikFiles = new ArrayList<String>();
        for (String dir : dalvikPath) {
            File folder = new File(dir);
            File list[] = folder.listFiles();
            for( int i=0; i< list.length; i++)
            {
                dalvikFiles.add( list[i].getName() );
            }
        } 
```

该数组`dalvikPath`包含`/data/dalvik-cache`

我在尝试列出之前提出请求`su`，我认为我拥有清单中的所有权限。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T04:01:56.110

```
 I think you need to check directory is exist or not . then you can get list of files

 File folder = new File(dir);

    if(folder.exists()){
        File list[] = folder.listFiles();
            if(list.length>0{
                 for( int i=0; i< list.length; i++){
                  }

            }           

    }else{

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T04:34:35.330

好的，所以我修改了我的代码，现在我没有 javanullpointer 但我没有在文件夹中“找到”文件......

```
List<String> dalvikFiles = new ArrayList<String>();
        for (String dir : dalvikPath) {
            log.append("Reading " + dir + "\n");
            File folder = new File(dir);
            if (folder.exists() && folder.isDirectory()){
                try{
                    File list[] = folder.listFiles();
                    for( int i=0; i< list.length; i++)
                    {
                        dalvikFiles.add( list[i].getName().toString() );
                        log.append(list[i].getName().toString() +"\n");
                    }
                }
                catch ( Exception e) {

                }
            }
            else {
                log.append("Folder " + dir + "doesn't exist.\n");
            } 
```

# magento - Magento - 如何编辑容器1

> ID：13427525
> 
> 赞同：5
> 
> 时间：2012-11-17T03:56:11.270
> 
> 标签：magento, magento-1.5

我希望在我的 magento 模板中编辑 container1 和 container2 产品信息。在视图 mytemplate/template/catalog/view.phtml 中，我看到了这些 container1 和 container2 调用。

经过一番研究，我应该寻找一个选项目录，但我的模板中不存在该目录。

如果它不存在，这是我应该添加的东西吗？希望有人可以提供帮助，因为我绝对希望在此添加到购物车/产品选项区域中添加一个新的 div 类和一些新选项。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-17T04:17:42.747

如果您尝试实际添加选项，则可以通过管理界面进行。如果您尝试更改影响选项显示方式的模板方面，您确实会寻找选项 .phtml 文件。具体来说，在您的主题路径中，类似于：

```
/app/design/frontend/default/YOUR_THEME/template/catalog/product/view/options 
```

并且会有两个文件：

```
wrapper.phtml
wrapper/bottom.phtml 
```

将来您可能还希望通过管理界面启用主题提示：

```
System > Configuration

Change current configuration scope to anything more specific than "Default Config".

Advanced > Developer > Debug > Template Path Hints > Yes 
```

启用此模式后，打开产品视图页面，页面上的每个元素也会显示它是由哪个 .phtml 生成的。如果这是一个实时站点，您可能还想在 Developer Client Restriction Allowed IP 下设置您的 IP 地址，这样其他人就看不到提示了。

# sublimetext2 - 在 Sublime Text 2 中为新创建的文件设置默认语法

> ID：13427531
> 
> 赞同：5
> 
> 时间：2012-11-17T03:57:32.450
> 
> 标签：sublimetext2, sublimetext

在 Sublime Text 2 中，当我双击标签栏时，它会创建一个新文件，Sublime Text 2 会赋予它纯文本语法，如何将这种默认的纯文本语法更改为 HTML 语法？

我知道有一个[sublime-DefaultFileType](https://github.com/spadgos/sublime-DefaultFileType)可以设置使用`Ctrl`+创建的新文件的默认文件类型`N`。但是，如何让我双击标签栏新建文件时生效呢？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-22T06:10:44.767

恐怕没有双击的解决方案。

根据官方网站，[DefaultFileType](https://github.com/spadgos/sublime-DefaultFileType)

```
This only affects files which are created with the Ctrl+N shortcut (Cmd+N on OSX). 
```

安装，按照`Installation`部分。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-10-09T20:05:06.930

请参阅此堆栈帖子：（在文本 3 上也可以正常工作）

[Sublime Text 2 新文件的默认文件类型](https://stackoverflow.com/questions/11814506/sublime-text-2-default-file-type-on-new-file)

这个py代码解决方案支持双击。DefaultFileType 可能是一个简单的选择。但它在某些情况下不起作用，它已经 5 年了。事实上，windows上的text 3我必须使用这种方法。

这是 SQL 的语法：

[http://rouge.jneen.net/pastes/PNq0](http://rouge.jneen.net/pastes/PNq0)

**像Def​​aultLanguage.py**一样保存它

 **使用默认位置：**\Data\Packages\User****

# .net - 如何动态添加新的文本框和下拉列表并将它们保存到 sql 数据库中的多行？

> ID：13427538
> 
> 赞同：0
> 
> 时间：2012-11-17T03:59:01.047
> 
> 标签：.net, vb.net

我已经被这个问题困住了一段时间。我已经在谷歌搜索过，但他们都使用 javascript。如何将多个值保存到数据库中的多行？

这是我的代码：

```
<SCRIPT language="javascript">

   function addRow(data) {

       var table = document.getElementById(data);

       var rowCount = table.rows.length;
       var row = table.insertRow(rowCount);

       var colCount = table.rows[0].cells.length;

       for (var i = 0; i < colCount; i++) {

           var newcell = row.insertCell(i);

           newcell.innerHTML = table.rows[0].cells[i].innerHTML;
           //alert(newcell.childNodes);
           switch (newcell.childNodes[0].type) {
               case "text":
                   newcell.childNodes[0].value = "";
                   break;
               case "checkbox":
                   newcell.childNodes[0].checked = false;
                   break;
               case "select-one":
                   newcell.childNodes[0].selectedIndex = 0;
                   break;
           }
       }
   }

</SCRIPT>

<table style="width: 100%;"><tr><td><h3 style="text-decoration: underline"></h3></td></tr></table>
    <table style="width: 100%;" rules="all">
        <tr>
            <td style="width: 100px">Stokereta</td>
            <td style="width: 80px">Jenis Roda</td>
            <td style="width: 100px">No Siri</td>
            <td style="width: 80px">Saiz Roda (mm)</td>
            <td style="width: 50px">Flange (mm)</td>
            <td style="width: 50px">Hollow (mm)</td>
            <td style="width: 100px">Tindakan</td>
            <td style="width: 100px">Skidded</td>
            <td style="width: 350px">Catatan</td>

        </tr>
        </table>

        <table style="width: 100%;" id="data" rules="all">
        <tr>
            <td >
                <asp:TextBox ID="stokereta" runat="server" Width="100" BorderStyle="None" ></asp:TextBox>
            </td>
            <td>
                <asp:DropDownList ID="ddl_jenisroda" runat="server" Width="80" >
                </asp:DropDownList>

            </td>
            <td>
                <asp:TextBox ID="nosiri" runat="server" Width="100" BorderStyle="None" ></asp:TextBox>

            </td>
            <td>
                <asp:TextBox ID="saizroda" runat="server" Width="80" BorderStyle="None" ></asp:TextBox>
            </td>
            <td>
                <asp:TextBox ID="flange" runat="server" Width="50" BorderStyle="None" ></asp:TextBox>
            </td>

            <td>
                <asp:TextBox ID="hollow" runat="server" Width="50" BorderStyle="None" ></asp:TextBox>
            </td>
            <td>
                <asp:DropDownList ID="ddl_tindakan" runat="server" Width="100" >
                <asp:ListItem>Pilih..</asp:ListItem>
                <asp:ListItem>Reprofiling</asp:ListItem>
                <asp:ListItem>Rediscing</asp:ListItem>
                </asp:DropDownList>

            </td>
            <td>
                <asp:DropDownList ID="ddl_skid" runat="server" Width="100" >
                <asp:ListItem>Pilih..</asp:ListItem>
                <asp:ListItem>Ya</asp:ListItem>
                <asp:ListItem>Tidak</asp:ListItem>
                </asp:DropDownList>
            </td> 
```

```
 </table>

    <br />
    <input id="Button2" type="button" value="Tambah" onclick="addRow('data')" style="border: thin ridge #000000"  />

    <asp:Label ID="Label3" runat="server" Text="Proses" Visible="False"></asp:Label>
    <br />

    <br />
<asp:Button ID="send" runat="server" Text="Hantar" BorderColor="Black" Width="60px" OnClick="Send_Click" />
    <asp:Button ID="clear" runat="server" Text="Semula" BorderColor="Black" Width="60px" OnClick="Semula_Click"/><br /> 
```

后面的代码：

```
Protected Sub Save()

    Dim conn As New SqlConnection(connectionString)

    conn.Open()

    Dim n As Integer = Convert.ToInt32(kuantiti.Text)

    For i As Integer = 0 To n - 1 Step +1
        If i = 0 Then
            Dim s As String
            s = "Insert into butiran_hantar ([depoh],[siriSA],[kuantiti],[date],[stokereta],[jenisroda], " +
            "[nosiri],[saizroda],[flange],[hollow],[tindakan],[skid],[catatan],[status]) " +
            "select (@depoh,@siriSA,@kuantiti,@date,@stokereta,@jenisroda, " +
            "@nosiri,@saizroda,@flange,@hollow,@tindakan,@skid,@catatan,@status)  "
            Dim sqlcomm As New SqlCommand(s, conn)

            sqlcomm.Parameters.Add("@depoh", SqlDbType.VarChar).Value = depohlist.SelectedValue
            sqlcomm.Parameters.Add("@siriSA", SqlDbType.BigInt).Value = Convert.ToInt32(lblsiri.Text.Trim())
            sqlcomm.Parameters.Add("@kuantiti", SqlDbType.Int).Value = Convert.ToInt32(kuantiti.Text.Trim())
            sqlcomm.Parameters.Add("@date", SqlDbType.DateTime).Value = DateTime.Parse(tarikh.Text)
            sqlcomm.Parameters.Add("@stokereta", SqlDbType.VarChar).Value = stokereta.Text
            sqlcomm.Parameters.Add("@jenisroda", SqlDbType.VarChar).Value = ddl_jenisroda.SelectedItem.Text
            sqlcomm.Parameters.Add("@nosiri", SqlDbType.BigInt).Value = Convert.ToInt32(nosiri.Text)
            sqlcomm.Parameters.Add("@saizroda", SqlDbType.Int).Value = Convert.ToInt32(saizroda.Text)
            sqlcomm.Parameters.Add("@flange", SqlDbType.Int).Value = Convert.ToInt32(flange.Text)
            sqlcomm.Parameters.Add("@hollow", SqlDbType.Int).Value = Convert.ToInt32(hollow.Text)
            sqlcomm.Parameters.Add("@tindakan", SqlDbType.VarChar).Value = ddl_tindakan.SelectedValue
            sqlcomm.Parameters.Add("@skid", SqlDbType.NChar).Value = ddl_skid.SelectedValue
            sqlcomm.Parameters.Add("@catatan", SqlDbType.VarChar).Value = catatan.Text
            sqlcomm.Parameters.Add("@status", SqlDbType.VarChar).Value = Label3.Text

            'sqlcomm.Parameters.AddWithValue("@ulasandm", ulasandm.Text)
            Try
                sqlcomm.ExecuteNonQuery()

                Label2.Text = "Data disimpan."

            Catch ex As Exception
                Label2.Text = ex.Message.ToString()
            End Try

        Else
            Dim sqlcomm As New SqlCommand("Insert into butiran_hantar ([depoh],[siriSA],[kuantiti],[date],[stokereta],[jenisroda], " +
            "[nosiri],[saizroda],[flange],[hollow],[tindakan],[skid],[catatan],[status]) " +
            "values (@depoh,@siriSA,@kuantiti,@date,@stokereta,@jenisroda, " +
            "@nosiri,@saizroda,@flange,@hollow,@tindakan,@skid,@catatan,@status)", conn)

            sqlcomm.Parameters.Add("@depoh", SqlDbType.VarChar).Value = depohlist.SelectedValue
            sqlcomm.Parameters.Add("@siriSA", SqlDbType.BigInt).Value = Convert.ToInt32(lblsiri.Text.Trim())
            sqlcomm.Parameters.Add("@kuantiti", SqlDbType.Int).Value = Convert.ToInt32(kuantiti.Text.Trim())
            sqlcomm.Parameters.Add("@date", SqlDbType.DateTime).Value = DateTime.Parse(tarikh.Text)
            sqlcomm.Parameters.Add("@stokereta", SqlDbType.VarChar).Value = stokereta.Text
            sqlcomm.Parameters.Add("@jenisroda", SqlDbType.VarChar).Value = ddl_jenisroda.SelectedItem.Text
            sqlcomm.Parameters.Add("@nosiri", SqlDbType.BigInt).Value = Convert.ToInt32(nosiri.Text.Trim())
            sqlcomm.Parameters.Add("@saizroda", SqlDbType.Int).Value = Convert.ToInt32(saizroda.Text.Trim())
            sqlcomm.Parameters.Add("@flange", SqlDbType.Int).Value = Convert.ToInt32(flange.Text.Trim())
            sqlcomm.Parameters.Add("@hollow", SqlDbType.Int).Value = Convert.ToInt32(hollow.Text.Trim())
            sqlcomm.Parameters.Add("@tindakan", SqlDbType.VarChar).Value = ddl_tindakan.SelectedValue
            sqlcomm.Parameters.Add("@skid", SqlDbType.NChar).Value = ddl_skid.SelectedValue
            sqlcomm.Parameters.Add("@catatan", SqlDbType.VarChar).Value = catatan.Text
            sqlcomm.Parameters.Add("@status", SqlDbType.VarChar).Value = Label3.Text
            'sqlcomm.Parameters.AddWithValue("@ulasandm", ulasandm.Text)
            Try
                sqlcomm.ExecuteNonQuery()

                Label2.Text = "Data disimpan."

            Catch ex As Exception
                Label2.Text = ex.Message.ToString()
            End Try
        End If
    Next
End Sub 
```

# sql - 将伪代码转换为 SQL 脚本

> ID：13427553
> 
> 赞同：2
> 
> 时间：2012-11-17T04:02:06.777
> 
> 标签：sql, postgresql, foreign-keys, referential-integrity

所以我有两张桌子：

1.  `Bookmarks`有几列[id等]
2.  `Person_Bookmark`有 2 列 [personId, bookmarkId]

`Bookmarks`表示指向其他网站的链接。所有有效的书签都有一个 id。该`Person_Bookmark`表有一堆`personIds`和他们的书签，显示为`bookmarkId`。

这是我的伪代码：

```
> let x = integer list of all bookmarkId's from Person_Bookmark
> 
> for each x  {   
>     if ('select * from 'Bookmarks' where 'id' = x returns 0 rows) {
>       delete from 'person_bookmark' where 'bookmarkId' = x
>     }
> } 
```

请告诉我如何转换为 Postgres [编辑] SQL 脚本。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-17T11:19:57.557

@Jan 已经提到*外键*，但他的建议不完整。

似乎您想删除与不存在的书签的所有关联（不再存在）。
以以下形式定义[**外键约束**](http://www.postgresql.org/docs/current/interactive/ddl-constraints.html#DDL-CONSTRAINTS-FK)：

```
ALTER TABLE person_bookmarks
ADD CONSTRAINT pb_fk FOREIGN KEY (bookmarkid) REFERENCES bookmarks (id)
ON UPDATE CASCADE
ON DELETE CASCADE; 
```

*   这仅允许`person_bookmarks.bookmarkid`存在于 中的值`bookmarks.id`。

*   `ON UPDATE CASCADE`当您更改条目时更改相应的*值*`person_bookmarks.bookmarkid``bookmarks.id`

*   `ON DELETE CASCADE`当您更改 中的条目时删除相应的*行*。`person_bookmarks.bookmarkid``bookmarks.id`

其他选项可用，[请阅读手册。](http://www.postgresql.org/docs/current/interactive/ddl-constraints.html#DDL-CONSTRAINTS-FK)

该`ON DELETE CASCADE`子句*自动*执行，您尝试手动修复。在添加 fk 约束之前，您必须手动修复一次：

```
DELETE FROM person_bookmarks pb
WHERE NOT EXISTS (SELECT 1 FROM bookmarks b WHERE b.id = pb.bookmarkid);
-- OR NOT EXISTS (SELECT 1 FROM persons p   WHERE p.id = pb.personid); 
```

删除所有不存在的行`bookmarkid`。取消注释最后一行以摆脱死人，也是。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T04:10:03.457

这适用于 SQL Server - 不确定 MySQL ......

```
delete pb
from
  person_bookmark pb
where not exists (select 1 from booksmarks b where b.id = pb.bookmarkid) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T04:29:38.177

@Derek 回复的另一个版本：

```
DELETE FROM person_bookmark 
WHERE bookmarkid NOT IN (SELECT id FROM bookmarks) 
```

这样做的需要意味着您的表之间没有外键索引。我强烈建议你这样做。缺点（或功能）在于，例如当您删除一个`person`（我猜您的示例中存在此表）时，您必须先删除所有关联的数据，否则服务器将抛出错误。

像这样的东西：

```
DELETE FROM person_Bookmark WHERE personid = @personid
DELETE FROM person_SomeOtherTable WHERE personid = @personid
DELETE FROM person WHERE id = @personid 
```

但优点是您的数据库中没有孤立行，并且您不能错误地输入错误数据（`bookmark`为`person`不存在的 a 存储 a）。

# mysql - 何时删除级联无用？

> ID：13427557
> 
> 赞同：0
> 
> 时间：2012-11-17T04:03:03.017
> 
> 标签：mysql, cascade, cascading-deletes

我有一个父表说 A 和一个孩子说 B 和 B 引用 A 的主键，所以大多数人在从父 A 删除时会使用删除级联来修改表。我的问题是：是否有任何情况的例子我不需要'删除级联'？什么时候用不了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T04:18:59.873

我不喜欢 Marc B 的示例，因为产品通常不会是某个类别的“子项”。产品和类别可以重叠，具有多对多的关系。

在没有父级数据仍然有用的情况下，我有 ON DELETE SET NULL 。

例如

假设您有一个`translations`包含列`id`、`translation_category`、`from_text`、`to_text`

该表包含各种文本到文本的翻译。这`translation_category`是一个外键，它引用了主要使用翻译的特定字段。但是您也可以执行忽略该键的查询以获取公共`from_text`和`to_text`值的计数，因为它们可能会针对不同的`translation_category`值重复。

即使您碰巧删除了其中一条`translation_category`父记录，该数据仍然可能有用。所以我会在那里使用 ON DELETE SET NULL 。

当然，可以更改相同的模式以放入`translation_category`多对多链接表，但相同的原则仍然适用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T04:17:54.540

在表维护/恢复期间，DBA 可能会暂时关闭删除级联，以便可以清空和重新加载父表，例如，不会损坏/影响表外的数据。

# iphone - iphone中隐藏uipickerview的问题

> ID：13427560
> 
> 赞同：3
> 
> 时间：2012-11-17T04:03:30.710
> 
> 标签：iphone, uitabbarcontroller, uipickerview, uiactionsheet

![在此处输入图像描述](../Images/b2f4d9ae5f6b7c46133e7c25754d8209.png)

我想在带有完成和取消按钮的pickerView顶部显示带有UIToolBar的UIPickerView。附加的是相同的屏幕截图。我在视图的底部也有标签栏控制器，我想在底部栏上显示pickerView这就是为什么我我在 actionsheet 中使用 uipickerView。现在我的问题是如何在 UIActionSheet 中添加的 cancelButton click 上关闭该 pickerView？

以下是显示 pickerView 的函数：

```
-(IBAction)setMile:(id)sender
   {
      menu = [[UIActionSheet alloc] initWithTitle:nil
                                                  delegate:self
                                         cancelButtonTitle:nil
                                    destructiveButtonTitle:nil
                                         otherButtonTitles:nil];
    // Add the picker
    UIPickerView *pickerView = [[UIPickerView alloc] initWithFrame:CGRectMake(0,55,0,0)];
    pickerView.delegate = self;
pickerView.showsSelectionIndicator = YES;    // note this is default to NO

UIToolbar *pickerToolbar = [[UIToolbar alloc] initWithFrame:CGRectMake(0,0,320,44)];
pickerToolbar.barStyle = UIBarStyleBlackOpaque;
[pickerToolbar sizeToFit];

NSMutableArray *barItems = [[NSMutableArray alloc] init];

UIBarButtonItem *cancelBtn = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemCancel target:self action:@selector(setMileCancel:)];
[barItems addObject:cancelBtn];
[cancelBtn release];
cancelBtn=nil;

UIBarButtonItem *flexSpace = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:self action:nil];
[barItems addObject:flexSpace];
[flexSpace release];
flexSpace=nil;

UIBarButtonItem *doneBtn = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone target:self action:@selector(setMileDone:)];
[barItems addObject:doneBtn];
[doneBtn release];
doneBtn=nil;

[pickerToolbar setItems:barItems animated:YES];
[barItems release];
barItems=nil;

[menu addSubview:pickerToolbar];
[menu addSubview:pickerView];
[menu showInView:self.view];
//[menu showFromTabBar:[[self tabBarController] tabBar]];  this code is not working
[menu setBounds:CGRectMake(0,0,320, 545)];
[pickerView release];
[menu release];
pickerView=nil;
menu=nil;
} 
```

我在取消按钮单击时有以下代码

```
-(IBAction)setMileCancel:(id)sender
 {
   //[menu removeFromSuperview];
   [menu dismissWithClickedButtonIndex:0 animated:YES];
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T04:16:06.780

```
 //   menu=nil;
 Please comment this line, then it will work 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T04:33:11.540

为什么要使用 a`UIActionSheet`来完成此操作？使a的`UIPickerView`the ，并使 the的the 。这样，您只需要在文本字段上关闭and ，而无需任何杂乱的代码！有关更多信息，请参阅[UITextField 参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITextField_Class/Reference/UITextField.html)。希望有帮助！`inputView``UITextField``UIToolBar``inputAccessoryView``UITextField``become/resignFirstResponder``UIPickerView``UIToolBar`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T04:54:39.130

我已经解决了这个问题。只需从上面的代码中删除以下两行：

```
[menu release];
menu=nil; 
```

# android - 在具有无限适配器实现的对话框中获取异常列表视图

> ID：13427564
> 
> 赞同：3
> 
> 时间：2012-11-17T04:04:32.190
> 
> 标签：android, commonsware-cwac

这是我的演示适配器。

```
public class DemoAdapter extends EndlessAdapter {

    private RotateAnimation rotate = null;
    private View pendingView = null;
    private ArrayList<ShipTo> next;
    private static ArrayList<ShipTo> list;
    private int pageFrom = 1;
    private static Activity act;

    DemoAdapter(Context ctxt, ArrayList<ShipTo> list) {
        super(new Adapater());
            act = (Activity) ctxt;
        DemoAdapter.list = list;
        rotate = new RotateAnimation(0f, 360f, Animation.RELATIVE_TO_SELF,
                0.5f, Animation.RELATIVE_TO_SELF, 0.5f);
        rotate.setDuration(600);
        rotate.setRepeatMode(Animation.RESTART);
        rotate.setRepeatCount(Animation.INFINITE);
    }

    @Override
    protected View getPendingView(ViewGroup parent) {
        View row = LayoutInflater.from(parent.getContext()).inflate(
                R.layout.row, null);

        pendingView = row.findViewById(android.R.id.text1);
        pendingView.setVisibility(View.GONE);
        pendingView = row.findViewById(R.id.throbber);
        pendingView.setVisibility(View.VISIBLE);
        startProgressAnimation();

        return (row);
    }

    @Override
    protected boolean cacheInBackground() {
        // SystemClock.sleep(1000); // pretend to do work
        pageFrom += 10;
        next = ItemController.getInstance().getShipTo(pageFrom + "", "10", "0");
        return (ItemController.moreShipTo.equalsIgnoreCase("1")) ? true : false;
    }

    @Override
    protected void appendCachedData() {
                if (next != null)
            list.addAll(next);
        if (!(ItemController.moreShipTo.equalsIgnoreCase("1")) ? true : false)
            Toast.makeText(act, "No More Category found", Toast.LENGTH_SHORT)
                    .show();

    }

    void startProgressAnimation() {
        if (pendingView != null) {
            pendingView.startAnimation(rotate);
        }
    }

    private static class Adapater extends BaseAdapter {

        private class ViewHolder {
            private TextView tv;
        }

        @Override
        public int getCount() {
            return list.size();
        }

        @Override
        public ShipTo getItem(int arg0) {
            return null;
        }

        @Override
        public long getItemId(int arg0) {
            return 0;
        }

        @Override
        public View getView(int arg0, View arg1, ViewGroup arg2) {

            try {
                ViewHolder viewHolder = null;
                ShipTo shipTo = list.get(arg0);
                LayoutInflater lf = (LayoutInflater) act
                        .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                // if (arg1 == null) {
                viewHolder = new ViewHolder();
                arg1 = lf.inflate(R.layout.category_spinner_textview, null);
                viewHolder.tv = (TextView) arg1
                        .findViewById(R.id.textView1_cat_spinner);

                arg1.setTag(viewHolder);
                /*
                 * } else { viewHolder = (ViewHolder) arg1.getTag(); }
                 */

                viewHolder.tv.setText(shipTo.getName());
                arg1.setTag(R.layout.category_spinner_textview, shipTo);
                viewHolder.tv.setPadding(5, 10, 0, 10);

            } catch (Exception e) {
                e.printStackTrace();

            }
            return arg1;
        }
    }
} 
```

这是我在对话框中使用无限适配器显示列表视图的活动。

```
public class EndlessAdapterDemo extends Activity {
    public ArrayList<ShipTo> shipToList;

    @Override
    public void onCreate(Bundle icicle) {
        super.onCreate(icicle);
        setContentView(R.layout.main);
        Button button = (Button) findViewById(R.id.button1);

        button.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View arg0) {
                new Thread(new Runnable() {
                    @Override
                    public void run() {
                        shipToList = ItemController.getInstance().getShipTo(
                                "1", "10", "0");

                        runOnUiThread(new Runnable() {
                            @Override
                            public void run() {
                                showCategoryList();
                            }
                        });
                    }
                }).start();

            }
        });

    }

    private void showCategoryList() {
        final Dialog categoryDialog = new Dialog(this);
        categoryDialog.setTitle("Select Category");
        categoryDialog.setContentView(R.layout.custumdialoglstview);
        ListView lv = (ListView) categoryDialog.findViewById(R.id.listView1);

        DemoAdapter adapter = null;

        if (adapter == null) {
            adapter = new DemoAdapter(EndlessAdapterDemo.this, shipToList);
        }
        lv.setAdapter(adapter);
        lv.setOnItemClickListener(new OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                    long arg3) {
                System.out.println(arg1.getTag().getClass().getName());
                ShipTo temp = (ShipTo) arg1
                        .getTag(R.layout.category_spinner_textview);
                categoryDialog.dismiss();

            }
        });
        categoryDialog.show();

        }

    } 
```

当我运行上面的代码时，它会抛出非法状态异常或空指针异常。

以下是我的 logcat 详细信息

```
11-17 09:40:08.532: D/AndroidRuntime(331): Shutting down VM
11-17 09:40:08.532: W/dalvikvm(331): threadid=1: thread exiting with uncaught exception (group=0x40015560)
11-17 09:40:08.541: E/AndroidRuntime(331): FATAL EXCEPTION: main
11-17 09:40:08.541: E/AndroidRuntime(331): java.lang.NullPointerException
11-17 09:40:08.541: E/AndroidRuntime(331):  at android.widget.ListView.measureScrapChild(ListView.java:1135)
11-17 09:40:08.541: E/AndroidRuntime(331):  at android.widget.ListView.measureHeightOfChildren(ListView.java:1218)
11-17 09:40:08.541: E/AndroidRuntime(331):  at android.widget.ListView.onMeasure(ListView.java:1127)
11-17 09:40:08.541: E/AndroidRuntime(331):  at android.view.View.measure(View.java:8313)
11-17 09:40:08.541: E/AndroidRuntime(331):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
11-17 09:40:08.541: E/AndroidRuntime(331):  at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1017)
11-17 09:40:08.541: E/AndroidRuntime(331):  at android.widget.LinearLayout.measureVertical(LinearLayout.java:386)
11-17 09:40:08.541: E/AndroidRuntime(331):  at android.widget.LinearLayout.onMeasure(LinearLayout.java:309)
11-17 09:40:08.541: E/AndroidRuntime(331):  at android.view.View.measure(View.java:8313)
11-17 09:40:08.541: E/AndroidRuntime(331):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
11-17 09:40:08.541: E/AndroidRuntime(331):  at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
11-17 09:40:08.541: E/AndroidRuntime(331):  at android.view.View.measure(View.java:8313)
11-17 09:40:08.541: E/AndroidRuntime(331):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
11-17 09:40:08.541: E/AndroidRuntime(331):  at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
11-17 09:40:08.541: E/AndroidRuntime(331):  at android.view.View.measure(View.java:8313)
11-17 09:40:08.541: E/AndroidRuntime(331):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
11-17 09:40:08.541: E/AndroidRuntime(331):  at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1017)
11-17 09:40:08.541: E/AndroidRuntime(331):  at android.widget.LinearLayout.measureVertical(LinearLayout.java:386)
11-17 09:40:08.541: E/AndroidRuntime(331):  at android.widget.LinearLayout.onMeasure(LinearLayout.java:309)
11-17 09:40:08.541: E/AndroidRuntime(331):  at android.view.View.measure(View.java:8313)
11-17 09:40:08.541: E/AndroidRuntime(331):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
11-17 09:40:08.541: E/AndroidRuntime(331):  at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
11-17 09:40:08.541: E/AndroidRuntime(331):  at android.view.View.measure(View.java:8313)
11-17 09:40:08.541: E/AndroidRuntime(331):  at android.view.ViewRoot.performTraversals(ViewRoot.java:839)
11-17 09:40:08.541: E/AndroidRuntime(331):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1859)
11-17 09:40:08.541: E/AndroidRuntime(331):  at android.os.Handler.dispatchMessage(Handler.java:99)
11-17 09:40:08.541: E/AndroidRuntime(331):  at android.os.Looper.loop(Looper.java:123)
11-17 09:40:08.541: E/AndroidRuntime(331):  at android.app.ActivityThread.main(ActivityThread.java:3683)
11-17 09:40:08.541: E/AndroidRuntime(331):  at java.lang.reflect.Method.invokeNative(Native Method)
11-17 09:40:08.541: E/AndroidRuntime(331):  at java.lang.reflect.Method.invoke(Method.java:507)
11-17 09:40:08.541: E/AndroidRuntime(331):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
11-17 09:40:08.541: E/AndroidRuntime(331):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
11-17 09:40:08.541: E/AndroidRuntime(331):  at dalvik.system.NativeStart.main(Native Method) 
```

可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-18T12:13:47.573

我认为这个库可能对您有所帮助[https://github.com/yfranz/DynamicList](https://github.com/yfranz/DynamicList)而不是 commonsware 无尽的适配器。

# android - 白日梦设置

> ID：13427566
> 
> 赞同：5
> 
> 时间：2012-11-17T04:05:23.263
> 
> 标签：android

我正在尝试为我创建一个设置`Daydream`，根据文档，我需要创建一个 xml 文件，如下所示：

```
 <dream xmlns:android="http://schemas.android.com/apk/res/android"
 android:settingsActivity="com.example.app/.MyDreamSettingsActivity" /> 
```

但是，我`Activity`在一个库项目（称为 com.project.base）中`Logcat`，单击设置按钮时我不断收到此错误：

```
 11-16 23:01:29.331: E/AndroidRuntime(28908): android.content.ActivityNotFoundException: Unable to find explicit activity class {com.project.base/com.project.base.SettingsDayDream}; have you declared this activity in your AndroidManifest.xml? 
```

我的 xml 文件设置如下：

```
 <dream xmlns:android="http://schemas.android.com/apk/res/android"
 android:settingsActivity="com.project.base/.SettingsDayDream" /> 
```

但是我尝试了所有变体，例如`com.project.base/com.project.base.SettingsDayDream` and just `com.project.base.SettingsDayDream`，但似乎没有任何效果。

我已经`AndroidManifest.xml`像这样声明了这个活动：

```
 <activity android:name="com.project.base.SettingsDayDream" android:configChanges="keyboardHidden|orientation" /> 
```

以及服务：

```
<service android:name="com.project.base.DayDream" android:exported="true" android:icon="@drawable/icon" android:label="@string/app_name">
    <intent-filter>
    <action android:name="android.service.dreams.DreamService" />
        <category android:name="android.intent.category.DEFAULT" />
    </intent-filter>
    <meta-data android:name="android.service.dream" android:resource="@xml/daydream" />
</service> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T05:51:51.740

问题出在你的`daydream.xml`. 的格式`android:settingsActivity`是`current.app.package/com.project.base.SettingsActivity`

因此`current.app.package`，在 , 之前`/`需要是您当前的应用程序，而不是库项目。

# iphone - remoteControlReceivedWithEvent Never called

> ID：13427572
> 
> 赞同：3
> 
> 时间：2012-11-17T04:07:03.197
> 
> 标签：iphone, ios, xcode, audio-streaming, avplayer

I'm trying to allow a remote or earbuds to play and pause audio when the app is in background or the screen is locked. So In viewDidLoad I have:

```
[[UIApplication sharedApplication] beginReceivingRemoteControlEvents];
[self becomeFirstResponder]; 
```

I then have:

```
- (void) remoteControlReceivedWithEvent: (UIEvent *) receivedEvent {

if (receivedEvent.type == UIEventTypeRemoteControl) {

switch (receivedEvent.subtype) {

    case UIEventSubtypeRemoteControlTogglePlayPause:

        [self playOrStop];

        break;

    case UIEventSubtypeRemoteControlPreviousTrack:

        break;

    case UIEventSubtypeRemoteControlNextTrack:

        break;

    default:

        break;

}

}

} 
```

But, it never gets called. Running in background is turned on, the AVSession is set in AppDelegate. I'm at a loss.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T15:54:40.873

You probably also need to add:

```
- (BOOL)canBecomeFirstResponder {
    return YES;
} 
```

Any subclass of `UIResponder` needs to implement this, or it won't accept first responder status.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T04:10:42.097

Try putting

```
[[UIApplication sharedApplication] beginReceivingRemoteControlEvents];
[self becomeFirstResponder]; 
```

in viewWillAppear:(BOOL)animated instead of viewDidLoad.

# c# - How to fade background when panel is visible in asp.net

> ID：13427574
> 
> 赞同：1
> 
> 时间：2012-11-17T04:07:25.110
> 
> 标签：c#, javascript, asp.net, css

I am working on a project and in that I want to apply background fade feature when a panel opens on a webpage in asp.net. The fade in feature looks like the Facebook photo feature.[click here to see Facebook photo effect](http://screencast.com/t/KYKr22Q96B9P)
Here consider the photo as my panel and background as my web page.

Please help me with this as I don't know what this effect is called.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T04:24:51.510

它被称为覆盖，一种方法是将其附加到文档的末尾：

html:

```
<body>
 ... all your content ...

  <div id="overlay">
     <div class="pictures">
     </div>
  </div>
</body> 
```

CSS：

```
body {
   position:relative;
}
#overlay {
    position:absolute; /** or fixed **/
    top:0;
    left:0;
    width:100%;
    height:100%;
    display:none;
} 
```

默认情况下，您的叠加层是隐藏的。您可以使用 JavaScript 将显示设置为在显示图库时阻止；

# iphone - get value of an element by parse xml in ios

> ID：13427576
> 
> 赞同：0
> 
> 时间：2012-11-17T04:08:42.877
> 
> 标签：iphone, ios, xml-parsing, tbxml

I'm using TBXML to parse xml. But I have a problem. This is my xml file

```
<i va="00:13:025">*4</i>
<i va="00:18:915">*3</i>
<i va="00:19:995">*2</i>
<i va="00:21:075">*1</i> 
```

I used the command

```
TBXMLElement *lyric = [TBXML childElementNamed:@"i" parentElement:param]; 
```

to get value "*4". How can I get value on va=""? Do you have any ideas or some examples to slove this? Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T06:07:48.407

您可以使用 NSXMLParser 获取该值。

```
NSXMLParser *xmlstr = [[NSXMLParser alloc] initWithContentsOfURL:[NSURL fileURLWithPath:path]] ;
xmlstr.delegate = self;
[xmlstr parse]; 
```

并使用此委托方法。

```
 - (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict{
     NSLog(@"%@",[attributeDict description]);
} 
```

此 attributeDict 将为您提供该启动标记中的属性。

# javascript - Bootstrap javascript scroll issue

> ID：13427578
> 
> 赞同：1
> 
> 时间：2012-11-17T04:09:27.390
> 
> 标签：javascript, jquery, twitter-bootstrap

Please check my jsfiddle.

Here is the full screen view..

[http://jsfiddle.net/zKhwe/embedded/result/](http://jsfiddle.net/zKhwe/embedded/result/)

Please click `add more` link until you reach the bottom of the page. Then click `select a name` link. A modal will appear. Just select any name and it will fill the text field.

My problem is after filling the text field, the page scrolled to top automatically.

Can anyone help me to fix this issue?

Here is my source code [http://jsfiddle.net/zKhwe/](http://jsfiddle.net/zKhwe/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T04:16:59.053

在您的点击处理程序中使用[`event.preventDefault()`](http://api.jquery.com/event.preventDefault/)- 页面滚动到顶部，因为您正在导航到`#`点击链接的时间。

固定小提琴：http: [//jsfiddle.net/zKhwe/1/](http://jsfiddle.net/zKhwe/1/)

# c - Complex random point generation

> ID：13427580
> 
> 赞同：-1
> 
> 时间：2012-11-17T04:09:38.133
> 
> 标签：c, function, random, complex-numbers, fractals

Using C, how can I generate a random point on the complex plain?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T04:17:55.277

作为一个不错的起点，您可以使用[`rand()`](http://linux.die.net/man/3/rand). 要生成介于 -2 和 +2 之间的随机数，您可以执行以下操作：

```
float f = 4 * ((rand() / (float)RAND_MAX) - 0.5f); 
```

如果你重复这个过程，你可以得到 an`x`和 a `y`：

```
float x = 4 * ((rand() / (float)RAND_MAX) - 0.5f);
float y = 4 * ((rand() / (float)RAND_MAX) - 0.5f); 
```

现在只需使用`x`和`y`作为您的复数。

此外，请务必[`srand()`](http://linux.die.net/man/3/srand)在程序开始时调用一次（且仅一次）以播种随机数生成器。

# bash - Bash script, please explain this syntax

> ID：13427583
> 
> 赞同：1
> 
> 时间：2012-11-17T04:10:34.173
> 
> 标签：bash, syntax

```
while read dir ev file; do
    # do stuff
done 
```

The part I can't find an explanation for is the `read dir ev` part. I'm not familiar with Bash. I mainly do PHP and MySQL. Can anyone explain?

Thanks.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T04:13:45.460

简短的版本是，它一次从输入中获取一行，并将其中的各个字段分配给变量。

`read dir ev file`将逐行读取并期望每行包含 3 个项目。然后它将第一项分配给一个名为 的变量`dir`，第二项分配给一个名为 的变量`ev`，第三项分配给一个名为 的变量`file`。

* * *

从输出`help read`：

（编辑：这里更易读的版本：http: [//ss64.com/bash/read.html](http://ss64.com/bash/read.html)）

```
read: read [-ers] [-a array] [-d delim] [-i text] [-n nchars] [-N nchars] [-p prompt] [-t timeout] [-u fd] [name ...]
    Read a line from the standard input and split it into fields.

    Reads a single line from the standard input, or from file descriptor FD
    if the -u option is supplied.  The line is split into fields as with word
    splitting, and the first word is assigned to the first NAME, the second
    word to the second NAME, and so on, with any leftover words assigned to
    the last NAME.  Only the characters found in $IFS are recognized as word
    delimiters.

    If no NAMEs are supplied, the line read is stored in the REPLY variable.

    Options:
      -a array  assign the words read to sequential indices of the array
                variable ARRAY, starting at zero
      -d delim  continue until the first character of DELIM is read, rather
                than newline
      -e                use Readline to obtain the line in an interactive shell
      -i text   Use TEXT as the initial text for Readline
      -n nchars return after reading NCHARS characters rather than waiting
                for a newline, but honor a delimiter if fewer than NCHARS
                characters are read before the delimiter
      -N nchars return only after reading exactly NCHARS characters, unless
                EOF is encountered or read times out, ignoring any delimiter
      -p prompt output the string PROMPT without a trailing newline before
                attempting to read
      -r                do not allow backslashes to escape any characters
      -s                do not echo input coming from a terminal
      -t timeout        time out and return failure if a complete line of input is
                not read withint TIMEOUT seconds.  The value of the TMOUT
                variable is the default timeout.  TIMEOUT may be a
                fractional number.  If TIMEOUT is 0, read returns success only
                if input is available on the specified file descriptor.  The
                exit status is greater than 128 if the timeout is exceeded
      -u fd             read from file descriptor FD instead of the standard input

    Exit Status:
    The return code is zero, unless end-of-file is encountered, read times out,
    or an invalid file descriptor is supplied as the argument to -u. 
```

# xamarin.ios - AudioUnit support in MonoTouch?

> ID：13427584
> 
> 赞同：0
> 
> 时间：2012-11-17T04:10:36.820
> 
> 标签：xamarin.ios, audiounit, xamarin

Is there any real AudioUnit support in Xamarin/MonoTouch? Some classes are mapped but most of it seems to be missing, so it's impossible to implement AudioUnit mechanics as described [here](https://developer.apple.com/library/ios/#documentation/MusicAudio/Conceptual/AudioUnitHostingGuide_iOS/Introduction/Introduction.html#//apple_ref/doc/uid/TP40009492-CH1-SW1 "here"). Or am I missing something?

Thanks a lot!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T20:47:01.480

不确定 Monotouch 是否支持原生处理图。您可能已经看到了，但我会发布一个链接以供参考：

要开始使用 AudioUnits：查看存储库中的示例项目“AUSoundTriggeredPlayingSoundMemoryBased”：

[https://github.com/xamarin/monotouch-samples](https://github.com/xamarin/monotouch-samples)

# sql - How to display literal strings in SQL query results?

> ID：13427586
> 
> 赞同：1
> 
> 时间：2012-11-17T04:10:54.173
> 
> 标签：sql

This might be a simple problem. i would like to add special characters to my concatenated column when i display it. This the query that I have:-

```
select emp"EMP",concat(INITCAP(lastname), 
       INITCAP (firstname))”Full name”,
       INITCAP (goals)”Goals” from employeesTHREE ORDER BY lastname; 
```

result needed:-

```
EMP     Fullname                       Goals
___________________________________________

1       thomas,mathew ~~~~~~~~~~~~~~~~ To be the best 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T04:12:57.060

你应该能够做这样的事情......

```
concat(concat(INITCAP(lastname), INITCAP (firstname)), '~~~~~') 
```

# iphone - Change the magnifying glass icon on a UISearchBar

> ID：13427587
> 
> 赞同：10
> 
> 时间：2012-11-17T04:10:56.263
> 
> 标签：iphone, objective-c, search, uisearchbar

I want to be able to set my own image for the little magnifying glass icon on a UISearchBar. I'd also like to be able to move it around if possible. Any ideas? Currently, I only need support for iOS5 and above.

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-11-17T06:42:13.667

对于支持 iOS 5 以上的应用程序，您可以使用以下方法来执行此操作，

```
- (void)setImage:(UIImage *)iconImage forSearchBarIcon:(UISearchBarIcon)icon state:(UIControlState)state; 
```

`UIControlStateNormal`并且`UIControlStateDisabled`是搜索栏的两种可能状态。

对于在此之前使用操作系统版本的应用程序，这将不起作用。您可能必须`UISearchbar`通过枚举子视图来创建一个类别并更改图标。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-04-07T08:59:56.457

如果您只想更改默认放大图标的颜色，可以将图像设置为使用模板模式，然后设置图像视图的 tintColor。

```
if ([view isKindOfClass:[UITextField class]]) {
    UITextField *textField = (id)view;

    UIImageView *iconView = (id)textField.leftView;
    iconView.image = [iconView.image imageWithRenderingMode:UIImageRenderingModeAlwaysTemplate];
    iconView.tintColor = <##dimmedColor##>;

    // other styling:
    textField.font = <##font##>;
    textField.textColor = <##activeColor##>;
    textField.attributedPlaceholder = [[NSAttributedString alloc] initWithString:<##searchBar##>.placeholder
                                                                      attributes:@{NSForegroundColorAttributeName: <##dimmedColor##>}];
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-02-10T12:23:58.247

对于斯威夫特：-

```
UISearchBar.appearance().setImage(UIImage(named: "new_search_icon"), forSearchBarIcon: UISearchBarIcon.Search, state: UIControlState.Normal) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T20:56:03.823

利用

```
- (void)setImage:(UIImage *)iconImage forSearchBarIcon:(UISearchBarIcon)icon state:(UIControlState)state; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-06-30T06:28:50.830

对于斯威夫特 5

```
 searchBar.setImage(UIImage(named: "your_favicon"), for: .search, state: .normal) 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-11-17T07:48:42.257

尝试打印所有子视图... iOS 独立。

```
for (id obj in _SearchBar.subviews) {
  NSLog(@"%@", obj);

  if ( [obj isKindOfClass:[UIImage class]] )  {
     NSLog(@"probably found...");

     UIImage *img = obj;
     [img setImage....];
  }
} 
```

# sass - 在 Susy 中隐藏块

> ID：13427588
> 
> 赞同：1
> 
> 时间：2012-11-17T04:11:03.047
> 
> 标签：sass, susy-compass

看[susy站点](http://susy.oddbird.net/)`.secondary`，遇到断点怎么隐藏？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T13:22:18.433

尝试这个：

```
@include at-breakpoint($break)  {
                                 .secondary { display: none; }
                             } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T05:35:12.543

取自该网站的[GutHub 源代码](https://github.com/ericam/susy/blob/master/docs/source/stylesheets/_layout.scss#L33)（已删除其他样式）：

```
.guides, .tutorial {   
  .secondary { display: none; } // secondary starts hidden

  @include at-breakpoint($break) {    
    .secondary { display: block; } // secondary becomes visible at breakpoint
  }
} 
```

# python - 将一组值与文本文件中的另一组值匹配

> ID：13427589
> 
> 赞同：2
> 
> 时间：2012-11-17T04:11:09.970
> 
> 标签：python, list, python-3.x

我有一个包含以下信息的文本文件：

```
1961 - Roger (Male)
1962 - Roger (Male)
1963 - Roger (Male)
1963 - Jessica (Female)
1964 - Jessica (Female)
1965 - Jessica (Female)
1966 - Jessica (Female) 
```

如果我想在文件中搜索单词“Roger”，我希望它打印出该名称的相应年份，即 1961、1962、1963。解决此问题的最佳方法是什么？

我是用字典做的，但后来意识到字典不能有重复的值，并且 1963 在文本文件中被提到了两次，所以它不起作用。

我正在使用 Python 3，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T04:26:44.707

使用以名称为键的字典并将年份存储在列表中：

```
In [1]: with open("data1.txt") as f:
   ...:     dic={}
   ...:     for line in f:
   ...:         spl=line.split()
   ...:         dic.setdefault(spl[2],[]).append(int(spl[0]))
   ...:     for name in dic :    
   ...:         print (name,dic[name])
   ...:       

Roger [1961, 1962, 1963]
Jessica [1963, 1964, 1965, 1966] 
```

或者您也可以使用[`collections.defaultdict`](http://docs.python.org/2/library/collections.html#collections.defaultdict)：

```
In [2]: from collections import defaultdict

In [3]: with open("data1.txt") as f:
   ...:     dic=defaultdict(list)
   ...:     for line in f:
   ...:         
   ...:         spl=line.split()
   ...:         dic[spl[2]].append(int(spl[0]))
   ...:     for name in dic:    
   ...:         print name,dic[name]
   ...:         
Roger [1961, 1962, 1963]
Jessica [1963, 1964, 1965, 1966] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T04:16:23.250

Why can't you use a dict and index on name (eg. `Roger`) as key and have values as a list of years (here `[1961,1962,1963]` ? would that not work for you?

so at the end of the loop you get all names uniquified with the years as values which is what you seem to want.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T04:33:43.507

正如我在评论中建议的那样：

```
from collections import defaultdict

result = defaultdict(list)
with open('data.txt', 'rt') as input:
    for line in input:
        year, person = [item.strip() for item in line.split('-')]
        result[person].append(year)

for person, years in result.items():
    print(person, years, sep=': ') 
```

输出：

```
Roger (Male): ['1961', '1962', '1963']
Jessica (Female): ['1963', '1964', '1965', '1966'] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-17T04:21:19.547

使用[元组](http://docs.python.org/2/tutorial/datastructures.html#tuples-and-sequences)。它们可以存储在列表中，并进行迭代。

假设您的列表如下所示：

```
data = [(1961, 'Rodger', 'Male'),
        (1962, 'Rodger', 'Male'),
        (1963, 'Rodger', 'Male'),
        (1963, 'Jessica', 'Female')] 
```

您可以像这样对其运行查询：

```
# Just items where the name is Rodger
[(y, n, s) for y, n, s in data if n == "Rodger"]

# Just the year 1963
[(y, n, s) for y, n, s in data if y == 1963] 
```

* * *

或者使用更多 Pythonic 代码：

```
for year, name, sex in data:
    if year >= 1962:
        print "In {}, {} was {}".format(year, name, sex) 
```

> 1962 年，罗杰是男性
> 1963 年，罗杰是男性
> 1963 年，杰西卡是女性

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-17T04:27:33.867

您始终可以使用正则表达式。

```
import re

f = open('names.txt')
name = 'Roger'

for line in f.readlines():
    match = re.search(r'([0-9]+) - %s' % name, line)
    if match:
        print match.group(1) 
```

# php - 如何从关联数组的所有键中仅获取重复值

> ID：13427593
> 
> 赞同：0
> 
> 时间：2012-11-17T04:12:03.653
> 
> 标签：php, duplicates, associative-array, duplicate-removal

我只想从关联数组的所有键中提取重复项。数组结构是：

```
Array
(
    [bank_users] => Array
    (
        [0] => 8
        [1] => 8
        [2] => 8
        [3] => 28
    )

    [bank_link] => Array
    (
        [0] => 8
        [1] => 8
        [2] => 8
        [3] => 28
        [4] => 28
        [5] => 28
        [6] => 28
        [7] => 28
        [8] => 73
        [9] => 73
        [10] => 73
    )

    [banks] => Array
    (
        [0] => 8
        [1] => 28
    )
) 
```

现在在这个数组中，我想要一个函数，它应该检查每个键并给我重复项。就像上面的示例一样，结果应该是**8**和**28**，因为这些值在所有三个键中都可用。**.bank_users、bank_link、**银行。请帮助...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T04:23:33.273

您需要[`array_intersect`](http://php.net/array_intersect)获取每个数组中的公共元素并将[`array_unique`](http://php.net/array_unique)它们减少到一个。

尝试

```
$result = array_unique(
  array_intersect($arr['bank_users'], $arr['bank_link'], $arr['banks'])
); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-17T04:18:54.837

[`array_unique`](http://php.net/manual/en/function.array-unique.php)— 从数组中删除重复值

# drupal - 打印主题（）在 drupal 7 中不起作用

> ID：13427594
> 
> 赞同：0
> 
> 时间：2012-11-17T04:12:16.477
> 
> 标签：drupal, drupal-7, drupal-modules, drupal-theming, drupal-themes

我有一个 page.tpl.php，其中有页眉、页脚和内容区域。我需要从模块加载基于 hook_menu 的不同内容。

我在模块中使用以下测试代码来尝试从我的模板中打印一些东西：

```
function my_module_theme() {
  return array(
    'tutorials_test' => array(
    'template' => 'tutorial'
    )
 );
} 
```

我在模块文件夹中有一个模板 tutorial.tpl.php

以下是我的 hook_menu 和回调函数

```
function my_module_menu() {
      $items['insights/tutorials'] = array(
         'title' => 'Tutorials',
         'access callback' => TRUE,
        'page callback' => 'insights_tutorials'
  );
} 
```

回调函数

```
 function insights_tutorials() {
   echo 'test';
   print theme('tutorials_test');
   echo 'after test';
  } 
```

当我转到该页面时，我可以看到文本“测试”和“测试后”，但我的模板中没有打印任何内容。

tutorial.tpl.php 有这个简单的代码：

```
<h1>Hello World</h1> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T04:33:09.497

在您的 hook_theme 实现（函数`my_module_theme`）中，您需要传入`variables`密钥

```
function my_module_theme() {
  return array(
    'tutorials_test' => array(
        'template' => 'tutorial',
        'variables' => array( // the variables key
            'title' => NULL,
            'details' => NULL,
        ),
    )
 );
} 
```

然后像这样输出你的HTML：

```
print theme('tutorials_test', array(
    'title' => 'This is the title',
    'details' => 'And this is details',
)); 
```

有关如何实现 hook_theme() 的苦涩示例，请查看[此答案](https://stackoverflow.com/a/12987731/863380)。

希望这行得通……穆罕默德。

# java - 如何将 SecurityToken 添加到 Web 服务客户端调用

> ID：13427596
> 
> 赞同：1
> 
> 时间：2012-11-17T04:12:32.513
> 
> 标签：java, web-services, apache, soap

我正在使用 java 客户端创建对使用 Apache CXF 运行的 Web 服务的 Soap 请求。我已将 UserNameToken 添加到客户端消息，但 Apache CXF 无法在 AbstractUsernameTokenAuthenticatingInterceptor 类中处理它，因为缺少 SecurityToken。

如何将 SecurityToken 添加到 SoapHeader ？

我正在使用 Java 创建 SoapMessage。进入 web 服务的 SoapHeader 看起来像：

```
<S:Header><wsse:Security xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/"    

xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-.0.xsd" 
SOAP-ENV:mustUnderstand="1">
<wsse:UsernameToken wsu:Id="UsernameToken-2" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
<wsse:Username xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">user</wsse:Username>
<wsse:Password xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" wsu:Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">password</wsse:Password>
</wsse:UsernameToken></wsse:Security></S:Header> 
```

# android - 如何找到离地理点最近的警察局

> ID：13427598
> 
> 赞同：6
> 
> 时间：2012-11-17T04:12:47.363
> 
> 标签：android, geolocation

您如何在 android 中找到离地理点最近的特定区域的警察局？我开始`types = type of place`搜索`types = "police";`，但没有找到结果。但是，当我设置 `types = "pharmacy";,types = "hospital";`它时，它可以正常工作。我用过这个[教程](http://www.androidhive.info/2012/08/android-working-with-google-places-and-maps-tutorial/)。有人对此有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-06T06:03:51.137

您所指的项目运行良好。我能想出的唯一可能的解决方案是在给定的半径内可能没有'警察局'。在上面的示例中，尝试增加半径；

改变这个：

```
double radius = 1000; 
```

它属于 LoadPlaces AsyncTask。

# php - 我可以将 heroku 连接到外部 MySQL 服务器吗？

> ID：13427605
> 
> 赞同：1
> 
> 时间：2012-11-17T04:14:02.790
> 
> 标签：php, mysql, heroku

我可以从 heorku 外部访问外部 MySQL 数据库吗？我已经从 heroku 的 IP 地址获得了访问权限..我从那里获得了服务器的 IP

然而，我收到了这个错误：

MySQL 错误：在“读取初始通信数据包”时丢失与 MySQL 服务器的连接，系统错误：110

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T04:16:30.850

There is another topic related to your question - you might find an answer there:

[Remote mysql database on Heroku app](https://stackoverflow.com/questions/5397028/remote-mysql-database-on-heroku-app)

# css - 移动 Safari 奇怪的边框颜色问题

> ID：13427606
> 
> 赞同：1
> 
> 时间：2012-11-17T04:14:17.877
> 
> 标签：css, mobile-safari

看到这张图片：[http ://coreyyoungcorp.com/images/border.png](http://coreyyoungcorp.com/images/border.png)

这似乎只在 div 有边界时发生，但我不知道为什么。

这是导致问题的 CSS：

```
border-top:1px solid #fff;
border-bottom:1px solid #ddd; 
```

这是完整的 div CSS：

```
#network-menu-row {
    width:100%;
    position:relative;
    padding-top:10px;
    padding-bottom:10px;
    position:relative;
    background: #e5e5e5;
    background: -moz-linear-gradient(top, #e5e5e5 0%, #ffffff 100%);
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#e5e5e5), color-stop(100%,#ffffff));
    background: -webkit-linear-gradient(top, #e5e5e5 0%,#ffffff 100%);
    background: -o-linear-gradient(top, #e5e5e5 0%,#ffffff 100%);
    background: -ms-linear-gradient(top, #e5e5e5 0%,#ffffff 100%);
    background: linear-gradient(to bottom, #e5e5e5 0%,#ffffff 100%);
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#e5e5e5', endColorstr='#ffffff',GradientType=0 );
    border-top:1px solid #fff;
    border-bottom:1px solid #ddd;
} 
```

有谁知道这是什么原因造成的？它甚至不会一直发生。大多数时候它很好并且显示适当的颜色，但它时不时地决定显示为蓝色。我想也许使用完整的 6 个字符的十六进制代码可以解决它，但它没有，也没有改变边框厚度。

它在我的桌面浏览器上总是可以正常工作。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T05:00:56.477

修复了问题。由于单击后的链接已被“访问”，因此在导航回锚点时由于某种原因更改了边框颜色。使用以下方法修复它：

```
a:visited div {
    border:inherit;
} 
```

# linux - 如何更改内核定时器频率

> ID：13427608
> 
> 赞同：0
> 
> 时间：2012-11-17T04:14:52.150
> 
> 标签：linux, unix, ubuntu, kernel

我有一个关于改变内核频率的问题。

我使用以下方法编译内核：

```
 make menuconfig(do some changes in config)
        (under Processor type and features->Timer frequency to change frequency)
        1.fakeroot make-kpkg --initrd --append-to-version=-mm kernel-image kernel-headers
        2.export CONCURRENCY_LEVEL=3
        3.sudo dpkg -i linux-image-3.2.14-mm_3.2.14-mm-10.00.Custom_amd64.deb
        4.sudo dpkg -i linux-headers-3.2.14-mm_3.2.14-mm-10.00.Custom_amd64.deb 
```

然后说如果我想改变内核的频率，

我所做的是：

```
 I replaced .config file with my own config file
        (since I want to do this automatically without opening make menuconfig ui) 
```

然后我再次重复步骤1,2,3,4

反正我不需要重复上述4个步骤吗？

非常感谢！！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T02:03:12.270

定时器频率在 Linux 中是固定的（除非您构建一个无滴答内核 - CONFIG_NO_HZ=y - 但上限仍然是固定的）。您不能在运行时或引导时更改它。您只能在编译时更改它。

所以答案是：不。当你想改变它时，你需要重建内核。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-18T09:40:00.830

内核计时器频率 ( `CONFIG_HZ`)在运行时*不可*配置 -当您更改设置时必须编译新内核，并且*必须**使用*新内核重新启动系统才能查看任何更改的效果。

但是，如果您经常这样做，您应该能够创建一个小 shell 脚本来自动化内核配置/构建/安装过程。例如，自动化该过程应该不会太难，例如

```
./kernel-prep-with-hz 100 
```

将重建并安装新内核，只需要您发出最终的重新启动命令。

但请记住，尽管自从引入了无滴答定时器代码以来，情况已经变得好很多，但定时器频率可能会以不可预知的方式微妙地影响各种子系统。

你为什么要这样做呢？

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-17T10:16:19.237

也许这会有所帮助。正如文章所说，您可以在系统支持的可用频率之间更改频率。（[检查您的系统中是否已启用 CPUfreq](http://www.ibm.com/developerworks/linux/library/l-cpufreq-1/)）

例如，我的。

```
#cat /sys/devices/system/cpu/cpu0/cpufreq/scaling_available_frequencies  
2000000 1667000 1333000 1000000
#echo 1000000 > cpu0/cpufreq/scaling_min_freq 
```

[http://www.ibm.com/developerworks/linux/library/l-cpufreq-2/](http://www.ibm.com/developerworks/linux/library/l-cpufreq-2/)

# c# - C# 中这个简单的线程代码行与任务的等价物是什么？

> ID：13427611
> 
> 赞同：1
> 
> 时间：2012-11-17T04:15:40.820
> 
> 标签：c#, multithreading, task

我在 c# 的任务类中感到困惑。我想知道我的 c# 线程代码与任务的等效行是什么？

```
static void Main(string[] args)
    {
        int i = 3; 

        for (int x = 1; x <= i; x++)
        {
            Thread t = new Thread(RunThread);
            t.Start();
        }

        Console.ReadLine();
    }

    public static void RunThread()
    {
        Console.WriteLine("Thread..");
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T04:23:11.383

尝试

```
for (int x = 1; x <= i; x++)
{
    Task.Factory.StartNew(RunThread);
} 
```

# javascript - Upside down tab like tabzilla from the Mozilla.com website

> ID：13427621
> 
> 赞同：1
> 
> 时间：2012-11-17T04:16:39.363
> 
> 标签：javascript, jquery, css, jquery-ui, tabs

Mozilla.com has this tab on the top of their site that you can click and a menu drops down. I have a client who wants me to do the same thing but upside down, from the bottom half of the page. Apparently this is a really hard request. How do I make something like tabzilla that goes up and either overlaps or pushes the content away? Thanks!

Update: I love you guys.

Edit: [http://hemakessites.com/mayukh/4/](http://hemakessites.com/mayukh/4/) Why does the top "Sign In/Register" pop down and the "Toggle" on the bottom pops up? I'm not seeing the difference besides 'top' and 'bottom' in the css. How does that change the direction of the popup?

Also, clicking the '337-9147' will expand the menu. I only want the button region to be clickable. How can I accomplish this?

You guys are awesome and I'm going to return the favor by answering some questions on here when I get time.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T04:59:00.543

我采取了与其他人类似的方法，因为您将 div 设置为在屏幕底部具有固定或绝对位置（取决于选项卡是否应该始终可见，或者仅在最底部）。然后，您可以编写一些非常简单的 javascript 来改变元素的高度，并且由于底部是固定的，它将导致选项卡上升到屏幕中。

基本上你只需要

```
.container{
 position: absolute;
 bottom: -1px;    
} 
```

和

```
$('.container').toggle(function(){
    $(this).animate({height:'205px'}, 500)
},function(){
    $(this).animate({height:'20px'}, 200)           
}); 
```

这是一个[jsfiddle 演示](http://jsfiddle.net/QCmUp/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T04:56:55.180

这是一个jQuery解决方案，比css3更流畅：

所以，你会想做这样的 jsfiddle （注意：这需要 jQuery）：http: [//jsfiddle.net/cFkn2/](http://jsfiddle.net/cFkn2/)

```
$(document).ready(function() {
    $('#tab').click(function() {
        if ($('#tab').css('height') == '20px') {
            $('#tab').animate({
                height: '100px'
            }, 1000);
        }
        else {
            $('#tab').animate({
                height: '20px'
            }, 1000);
        };
    });
}); 
```

和

```
#tab{
    position: absolute;
    bottom: 0;
    width: 100%;
    background-color: red;
    height:20px;
} 
```

和

```
<div id="tab">CONTENT</div> 
```

样式、编辑和添加缓动以适应口味。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T04:48:46.227

我懒得在这里制作点击处理程序，所以它只是 css3 悬停[示例](http://jsbin.com/olasah/5/)

我使用 {top: 100%} 的固定位置，动画过渡，边距 <0 显示；

HTML

```
 <div id="menu">
    <div id="handler">handler</div>
    <div id="menucontent">
    menu menu<br>
    menu menu<br>
    </div>
  </div>
  <div id="content">
   <div> text   text   text</div>
   <div> text   text   text</div>
   <!-- many of them -->
   <div> text   text   text</div>
   <div> text   text   text</div>
   <div> text   text   text</div>
  </div> 
```

CSS：

```
#content > div {
 font-size: 2em; 
 height: 2.1em;
 border: 1px solid black;
 margin-top: 10px;
}
#menu {
 left: 30px;
 position: fixed;
 font-size: 20px;
 width: 300px;
 height: 300px;
 top: 100%;
 border: 1px solid red;
 background: white;
 -webkit-transition: all 1s;
 -mozilla-transition: all 1s;
 -o-transition: all 1s;
 transition: all 1s;
}
#menu #handler {
 position: absolute;
 top: -40px;
 background: green;
 font-size: 30px;
 height: 40px;
 padding-left: 5px;
 padding-right: 5px;
 left: 10px;
}
#menu:hover {
 margin-top: -300px; 

} 
```

[用 click](http://jsbin.com/olasah/7/)，[或](http://jsbin.com/olasah/9/)

JS：

```
$(function() {
  $('#menu #handler').click(function() {
  $('#menu').toggleClass('shown');
  });
}); 
```

在 css 中更改`hover`为类`shown`

```
#menu.shown {
 margin-top: -300px; 
} 
```

# django - django sweetpie 从反向关系中脱水

> ID：13427628
> 
> 赞同：1
> 
> 时间：2012-11-17T04:17:47.790
> 
> 标签：django, tastypie

假设我有：

模型.py：

```
class Person(models.Model):
    user = models.OneToOneField(User)

    def get_album(self):
        return self.album_set.all()

class Album(models.Model):
    user = models.ForeignKey(Person)
    photo = models.ImageField(upload_to = 'blahblah') 
```

api.py：

```
class PersonResource(ModelResource):

    class Meta:
        queryset = Person.objects.all()

class AlbumResource(ModelResource):

    class Meta:
        queryset = Album.objects.all() 
```

我怎样才能使一个字段脱水，`PersonResource`所以它的值是`.get_album()`？

我试图像这样使用 ToManyField ：

```
albums = fields.ToManyField(readonly = True) 
```

但它抛出：

```
Exception Type: TypeError
Exception Value:    
__init__() takes at least 3 arguments (2 given)
Exception Location: C:\PHOTOBLOG\photoblog\person\api.py in PersonResource, line 8 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T04:46:43.453

我将回答我自己的问题，我们需要添加以下内容`PersonResource`：

```
albums = fields.ToManyField('myapp.api.AlbumResource', 'album_set', full = True) 
```

无需定义自定义方法或脱水。

# google-maps - 谷歌地图和美国邮政编码

> ID：13427632
> 
> 赞同：0
> 
> 时间：2012-11-17T04:18:41.793
> 
> 标签：google-maps, search, zipcode

我需要生成一个链接来打开谷歌地图并根据查询字符串中的美国邮政编码识别一个区域，最好如下所示：

![在此处输入图像描述](../Images/7af6b774034da27d00ce0f9e7c7c7291.png)

我尝试使用此查询字符串来执行此操作：[https ://maps.google.com/?q=us+90120](https://maps.google.com/?q=us+90120)

最后附上邮政编码。但它并不总是有效。现在，它指向格林维尔附近的某个地方。奇怪的是，如果你打开谷歌地图并搜索“us 90210”，它会指向比佛利山庄。

我应该在查询字符串中添加什么？还是方法全错了？我只需要它很简单。任何信息都将受到高度赞赏。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T04:28:24.313

你打错了——链接是 90120，因此是格林维尔，但你想去 90210，也就是比佛利山庄。

# c++ - 使用临时数组来减少代码——效率低下？

> ID：13427633
> 
> 赞同：3
> 
> 时间：2012-11-17T04:18:42.073
> 
> 标签：c++, arrays, performance

我是 C++（和 SO）的新手，如果这很明显，我很抱歉。

我已经开始在我的代码中使用临时数组来减少重复并更容易对多个对象执行相同的操作。所以而不是：

```
MyObject obj1, obj2, obj3, obj4;

obj1.doSomming(arg);
obj2.doSomming(arg);
obj3.doSomming(arg);
obj4.doSomming(arg); 
```

我正在做：

```
MyObject obj1, obj2, obj3, obj4;
MyObject* objs[] = {&obj1, &obj2, &obj3, &obj4};

for (int i = 0; i !=4; ++i)
    objs[i]->doSomming(arg); 
```

这对性能有害吗？比如，它会导致不必要的内存分配吗？这是好习惯吗？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-17T04:35:22.720

一般来说，你不应该担心这个级别的性能。很多时候，最终成为性能问题的事情与您所期望的完全不同，特别是如果您没有很多性能优化经验的话。

您应该始终首先考虑编写清晰的代码，如果性能很重要，那么您应该从算法的角度考虑它（即 big-O）。然后，您应该衡量性能，并让其指导您在优化方面的努力。

* * *

现在，如果您避免使用中间数组而只对原始对象使用数组，则可以使代码更加清晰和直接：

```
MyObject obj[4];

for (int i = 0; i !=4; ++i)
  objs[i].doSomming(arg); 
```

* * *

但是不，优化编译器通常应该对此没有问题。

例如，如果我采用以下代码：

```
struct MyObject {
    void doSomming() {
        std::printf("Hello\n");
    }
};

void foo1() {
    MyObject obj1, obj2, obj3, obj4;

    obj1.doSomming();
    obj2.doSomming();
    obj3.doSomming();
    obj4.doSomming();
}

void foo2() {
    MyObject obj1, obj2, obj3, obj4;
    MyObject* objs[] = {&obj1, &obj2, &obj3, &obj4};

    for (int i = 0; i !=4; ++i)
        objs[i]->doSomming();
}

void foo3() {
    MyObject obj[4];

    for (int i = 0; i !=4; ++i)
        obj[i].doSomming();
} 
```

并生成 LLVM IR（因为它比实际组装更紧凑），我得到以下`-O3`.

```
define void @_Z4foo1v() nounwind uwtable ssp {
entry:
  %puts.i = tail call i32 @puts(i8* getelementptr inbounds ([6 x i8]* @str, i64 0, i64 0)) nounwind
  %puts.i1 = tail call i32 @puts(i8* getelementptr inbounds ([6 x i8]* @str, i64 0, i64 0)) nounwind
  %puts.i2 = tail call i32 @puts(i8* getelementptr inbounds ([6 x i8]* @str, i64 0, i64 0)) nounwind
  %puts.i3 = tail call i32 @puts(i8* getelementptr inbounds ([6 x i8]* @str, i64 0, i64 0)) nounwind
  ret void
}

define void @_Z4foo2v() nounwind uwtable ssp {
entry:
  %puts.i = tail call i32 @puts(i8* getelementptr inbounds ([6 x i8]* @str, i64 0, i64 0)) nounwind
  %puts.i.1 = tail call i32 @puts(i8* getelementptr inbounds ([6 x i8]* @str, i64 0, i64 0)) nounwind
  %puts.i.2 = tail call i32 @puts(i8* getelementptr inbounds ([6 x i8]* @str, i64 0, i64 0)) nounwind
  %puts.i.3 = tail call i32 @puts(i8* getelementptr inbounds ([6 x i8]* @str, i64 0, i64 0)) nounwind
  ret void
}

define void @_Z4foo3v() nounwind uwtable ssp {
entry:
  %puts.i = tail call i32 @puts(i8* getelementptr inbounds ([6 x i8]* @str, i64 0, i64 0)) nounwind
  %puts.i.1 = tail call i32 @puts(i8* getelementptr inbounds ([6 x i8]* @str, i64 0, i64 0)) nounwind
  %puts.i.2 = tail call i32 @puts(i8* getelementptr inbounds ([6 x i8]* @str, i64 0, i64 0)) nounwind
  %puts.i.3 = tail call i32 @puts(i8* getelementptr inbounds ([6 x i8]* @str, i64 0, i64 0)) nounwind
  ret void
} 
```

在`-O3`循环被展开并且代码与原始版本相同。随着`-Os`循环不会展开，但指针间接甚至数组都会消失，因为内联后不需要它们：

```
define void @_Z4foo2v() nounwind uwtable optsize ssp {
entry:
  br label %for.body

for.body:                                         ; preds = %entry, %for.body
  %i.05 = phi i32 [ 0, %entry ], [ %inc, %for.body ]
  %puts.i = tail call i32 @puts(i8* getelementptr inbounds ([6 x i8]* @str, i64 0, i64 0)) nounwind
  %inc = add nsw i32 %i.05, 1
  %cmp = icmp eq i32 %inc, 4
  br i1 %cmp, label %for.end, label %for.body

for.end:                                          ; preds = %for.body
  ret void
}

define void @_Z4foo3v() nounwind uwtable optsize ssp {
entry:
  br label %for.body

for.body:                                         ; preds = %entry, %for.body
  %i.03 = phi i32 [ 0, %entry ], [ %inc, %for.body ]
  %puts.i = tail call i32 @puts(i8* getelementptr inbounds ([6 x i8]* @str, i64 0, i64 0)) nounwind
  %inc = add nsw i32 %i.03, 1
  %cmp = icmp eq i32 %inc, 4
  br i1 %cmp, label %for.end, label %for.body

for.end:                                          ; preds = %for.body
  ret void
} 
```

# mysql - 在没有嵌套选择的情况下重写 MySQL 查询？

> ID：13427637
> 
> 赞同：0
> 
> 时间：2012-11-17T04:18:55.240
> 
> 标签：mysql, sql

我有一个当前使用嵌套选择的 MySQL 查询，我想知道是否可以将查询重写为不使用嵌套选择，如果可以，如何？

查询如下

```
SELECT
  b.id,
  b.name,
  b.description,
  b.order,
  b.icon,
  b.locked,
  u.username     AS lastPoster,
  p.time         AS lastPostTime,
  p1.subject     AS lastPostTopicSubject,
  p2.postscount  AS totalPosts,
  t1.topicscount AS totalTopics,
  p.subject      AS lastPostSubject,
  t.id           AS lastPostTopicId
FROM      kf_boards                                AS b
LEFT JOIN kf_topics                                AS t  ON (t.boardid = b.id)
LEFT JOIN (SELECT posterid, topicid, time, subject
           FROM kf_posts
           ORDER BY time DESC)                     AS p  ON (p.topicid = t.id)
LEFT JOIN (SELECT subject
           FROM kf_posts
           ORDER BY time ASC)                      AS p1 ON (p.topicid = t.id)
LEFT JOIN (SELECT COUNT(id) AS postscount
           FROM kf_posts)                          AS p2 ON (p.topicid = t.id)
LEFT JOIN (SELECT COUNT(id) AS topicscount
           FROM kf_topics)                         AS t1 ON (t.boardid = b.id)
LEFT JOIN kf_users                                 AS u  ON (p.posterid = u.id)
WHERE b.categoryid = :catid
GROUP BY b.name
ORDER BY b.order 
```

并且数据库结构如下

![在此处输入图像描述](../Images/3386185ef68fef4ff16e5eb488f640a9.png)

任何帮助将不胜感激！

谢谢！

编辑：尝试以下查询，返回结果

![在此处输入图像描述](../Images/9b0d22156acbc2577c109868f07ab474.png)

结果应该如下

![在此处输入图像描述](../Images/620036863baf4d275aa7a72000f6ac23.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T00:11:50.687

这是一个可能会有所帮助的解决方案，但是，我还有其他建议可以简化以后通过触发器进行的所有查询。我稍后会解释。

我从最内层的查询开始，该查询仅针对类别（您的参数）的板 ID，并且该板有 POSTINGS（不是通过 LEFT-JOIN）。由此，无论主题如何，我都只获得了每个版块的最大帖子 ID（只是它必须是每个连接的有效版块）。

一旦我有了这个，下一个查询会根据最后一个帖子重新加入帖子表以确定主题......然后再次将其重新加入同一主题 ID 上的帖子。有了它，我可以获得该主题的第一个帖子 ID 和总条目数……所有这些都按“板 ID”分组。

这些显然只是至少有 1 个板的板，但这不是您想要的。无论帖子如何，您都想要所有板。所以，我回到开头再次查询 kf_boards，在类别 ID = 你的参数上使用相同的 WHERE ...这将为您提供该类别的所有板...

现在，您可以左连接到最小/最大帖子和条目数的预聚合查询...然后再次将其左连接到帖子表但是两次...一次用于第一个帖子（这样您就可以获取初始主题标题、时间和您可能关心的任何其他内容），并再次获取 LAST POST 以获取其时间、主题等……您已经从预聚合查询中获得了该主题的总帖子条目。最后，将最后一个帖子左连接到 users 表，以查看最后发布的人。

我已经测试了它的语法并且它有效，只是无法根据实际数据进行确认。

```
SELECT 
      B.ID,
      B.Name,
      B.Description,
      B.Order,
      B.Icon,
      FP.Subject as FirstPostSubject,
      FP.Time as FirstPostTime,
      LP.Subject as LastPostSubject,
      LP.Time as LastPostTime,
      U.UserName as LastPostUserName,
      QryPerBoard.PostEntries
   from 
      kf_boards B
         LEFT JOIN
              ( select 
                      PQ1.ID,
                      PQ1.LastPostID,
                      MIN( P2.ID ) as FirstPostID,
                      COUNT(*) as PostEntries
                   from 
                      ( SELECT
                              B1.ID,
                              MAX( P1.ID ) as LastPostID
                           from
                              kf_boards B1
                                 join kf_topics T1
                                    ON B1.ID = T1.BoardID
                                    join kf_posts P1
                                       ON T1.ID = P1.TopicID
                           where
                              B1.CategoryID = 1    <-- Insert your Category Parameter ID here
                           group by
                              B1.ID ) as PQ1
                      LEFT JOIN kf_posts P1
                         ON PQ1.LastPostID = P1.ID
                         LEFT JOIN kf_posts P2
                            ON P1.TopicID = P2.TopicID
                   group by
                      PQ1.ID ) QryPerBoard
            ON B.ID = QryPerBoard.ID
            LEFT JOIN kf_posts FP
               ON QryPerBoard.FirstPostID = FP.ID
            LEFT JOIN kf_posts LP
               ON QryPerBoard.LastPostID = LP.ID
               LEFT JOIN kf_users U
                  ON LP.PosterID = U.ID
   where
      B.CategoryID = 1    <-- Insert your Category Parameter ID here (second copy for parameter) 
```

现在，我将如何调整以防止查询的递归级别，尤其是对于网站。使用触发器。创建并保存 POST 后，请使用触发器执行一些操作...

修正了关于触发影响的想法。

使用最新的 TOPIC ID 更新 kf_Boards 任何帖子都是为相应的板 ID 创建的，因此您以后不必再查找它，只需获取最后一个并使用它运行即可。此外，更新 TOPIC 记录。为该主题的 FIRST POST、LAST POST 和 TOTAL POSTS 设置一个专栏。如果它是该主题的第一篇文章，请使用新 ID 更新第一篇和最后一篇文章并增加文章总数。

合并这些触发器以更新“额外”列的时间将为将来的查询节省此类复杂性。你基本上可以做类似的事情

```
select
      B.*,
      LP.Fields,  <obviously apply specific fields you want per table>
      FP.Fields,
      U.Fields
   from
      kf_boards B
         LEFT JOIN kf_topics T
            on B.LastTopicID = T.ID
            LEFT JOIN kf_posts FP
               on T.FirstPostID = FP.ID
            LEFT JOIN kf_posts LP
               on T.LastPostID = LP.ID
               LEFT JOIN kf_users U
                  on LP.PosterID = U.ID
   where
      B.CategoryID = 1  <-- your parameterID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T04:31:48.533

尝试：

```
SELECT 
   b.id, b.name, b.description, b.order, b.icon, b.locked, 
   u.username AS lastPoster, p.time AS lastPostTime, 
   p.subject AS lastPostSubject, t.id AS lastPostTopicId
FROM kf_boards AS b
LEFT JOIN kf_topics AS t ON t.boardid = b.id
LEFT JOIN kf_posts AS p ON p.topicid = t.id
LEFT JOIN kf_users AS u ON p.posterid = u.id
WHERE b.categoryid = :catid
GROUP BY b.name 
ORDER BY b.order ASC, p.time DESC 
```

## 更新：波纹管适用于您的新查询。

```
SELECT b.id, b.name, b.description, b.order, b.icon, b.locked, 
    u.username AS lastPoster, MAX(p.time) AS lastPostTime, 
    p.subject AS lastPostTopicSubject, count(p.id) AS totalPosts, 
    count(t.id) AS totalTopics, p.subject AS lastPostSubject, 
    max(t.id) AS lastPostTopicId
FROM kf_boards AS b 
LEFT JOIN kf_topics AS t ON t.boardid = b.id
LEFT JOIN kf_posts AS p ON p.topicid = t.id
LEFT JOIN kf_users AS u ON p.posterid = u.id
WHERE b.categoryid = :catid
GROUP BY b.name, b.id, b.name, b.description, b.order, b.icon, 
    b.locked, u.username, p.subject
ORDER BY b.order 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T23:19:40.010

删除所有子查询似乎是可以的，但是如果最后一个帖子，以及相应主题的第一个帖子是使用子查询找到的，则查询会更清楚：

```
SELECT b.id, b.name, b.description, b.sortorder, b.icon, b.locked,
       u.username AS lastPoster,
       p1.time AS lastpostTime,
       p0.subject AS lastPostTopicSubject,
       COUNT(DISTINCT p.id) AS totalPosts,
       COUNT(DISTINCT t.id) AS totalTopics,
       p1.subject AS lastPostSubject,
       p1.topicid AS lastPostTopicId
FROM  kf_boards b
LEFT JOIN kf_topics t ON t.boardid = b.id
LEFT JOIN kf_posts p ON p.topicid = t.id
LEFT JOIN kf_posts p1
ON p1.time = (SELECT MAX(time) FROM kf_posts p
              INNER JOIN kf_topics t
              ON p.topicid = t.id
              WHERE t.boardid = b.id)
LEFT JOIN kf_users u ON u.id = p1.posterid
LEFT JOIN kf_posts p0
ON p0.time = (SELECT MIN(time) FROM kf_posts p0
              WHERE p0.topicid = p1.topicid)
WHERE b.categoryid = :catid
GROUP BY b.id
ORDER BY b.sortorder; 
```

但是，以下查询，使用自联接查找没有相关的先前/嵌套帖子的帖子应该给出相同的答案：

```
SELECT b.id, b.name, b.description, b.sortorder, b.icon, b.locked,
       u.username AS lastPoster,
       lastpost.time AS lastpostTime,
       firstpost.subject AS lastPostTopicSubject,
       COUNT(DISTINCT p.id) AS totalPosts,
       COUNT(DISTINCT t.id) AS totalTopics,
       lastpost.subject AS lastPostSubject,
       lastpost.topicid AS lastPostTopicId
FROM  kf_boards b
LEFT JOIN kf_topics t ON t.boardid = b.id
LEFT JOIN kf_posts p ON p.topicid = t.id

LEFT JOIN kf_topics lasttopic ON lasttopic.boardid = b.id
LEFT JOIN kf_posts lastpost ON lastpost.topicid = lasttopic.id
LEFT JOIN kf_topics nexttopic ON nexttopic.boardid = b.id
LEFT JOIN kf_posts nextpost              -- order posts
ON nextpost.topicid = nexttopic.id       -- in same board
AND nextpost.time > lastpost.time        -- by time

LEFT JOIN kf_users u ON u.id = lastpost.posterid

LEFT JOIN kf_posts AS firstpost ON firstpost.topicid = lastpost.topicid
LEFT JOIN kf_posts prevpost              -- order posts
ON prevpost.topicid = firstpost.topicid  -- on same topic
AND prevpost.time < firstpost.time       -- by time

WHERE nextpost.id IS NULL                -- last post has no next
AND prevpost.id IS NULL                  -- first post on topic has no previous

AND b.categoryid = :catid
GROUP BY b.id
ORDER BY b.sortorder; 
```

[在http://sqlfiddle.com/#!2/1c042/1/0](http://sqlfiddle.com/#!2/1c042/1/0)检查结果

# php - 如何处理 Wordpress 脚本操作混乱？

> ID：13427639
> 
> 赞同：1
> 
> 时间：2012-11-17T04:19:06.410
> 
> 标签：php, wordpress, wordpress-theming

在开发 Wordpress + BuddyPress 子主题期间，我遇到了脚本问题。我想将它们移动到 BODY 页脚（Modernizr 除外），但一些 BuddyPress 脚本留在顶部。我已经做到了：

```
// remove unused head entries
remove_action('wp_head',        'rsd_link');
//...
remove_action('wp_head',        'adjacent_posts_rel_link');

// move sctipts to footer
remove_action('wp_head',        'wp_print_scripts');
remove_action('wp_head',        'wp_print_head_scripts');
remove_action('wp_head',        'wp_enqueue_scripts');
remove_action('wp_head',        'bp_core_confirmation_js');
remove_action('wp_head',        'bp_core_add_ajax_url_js');

add_action('wp_head',           'wp_head_scripts',      9);
add_action('wp_footer',         'wp_enqueue_scripts',           20);
add_action('wp_footer',         'bp_core_confirmation_js',      21);
add_action('wp_footer',         'bp_core_add_ajax_url_js',      22); 
```

我对动作顺序感到困惑，它看起来并不漂亮。

有没有可能让它更漂亮（更自动化）？我在考虑这样的数组：

```
$head_scripts = array(
    'modernizr'         => 'libs/modernizr-2.6.1.js',
);
$footer_scripts = array(
    'jquery'            => 'libs/jquery-1.8.2.js',
    'jquery.mansonry'   => 'libs/jquery.masonry.min.js',
    'fb_api'            => 'libs/fb_api.js',
    'scripts'           => 'script.js'
); 
```

和一个功能（动作），它首先在头部添加，另一个在页脚和下一个 admin_bar 中，如有必要，可以添加 buddypress 脚本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T05:04:22.037

为什么不跟踪所有这些脚本`wp_enqueue_script`文件并将 in_footer 参数更改为 true。您可能知道 wp_enqueue_script 方法具有最后一个参数，您可以指示该脚本是否将放置在页脚中。默认为 false 将被放入标题中

```
 wp_enqueue_script( 
        $handle
       ,$src
       ,$deps
       ,$ver
       ,$in_footer  // make this TRUE to put the script in the footer
); 
```

有关更多信息，请访问文档[http://codex.wordpress.org/Function_Reference/wp_enqueue_script](http://codex.wordpress.org/Function_Reference/wp_enqueue_script)

# c# - 如何从文本文件中获取数据并将其拆分为数组？

> ID：13427640
> 
> 赞同：0
> 
> 时间：2012-11-17T04:19:21.280
> 
> 标签：c#, arrays, text, struct, split

正如我的教授所说，我有一个项目需要将文本文件中的数据拆分为数组或“结构数组”，但我对如何去做感到很困惑。

基本上我在文本文件中有这样排列的数据（不必像这样......每行可以是一件事）：

```
PR214;MR43T;RBL8;14K22
PR223;R43;RJ6;14K24
PR224;R43N;RN4;14K30
PR246;R46N;RN8;14K32
PR247;R46TS;RBL17Y;14K33
PR248;R46TX;RBL12-6;14K35
PR324;S46;J11;14K38
PR326;SR46E;XEJ8;14K40
PR444;47L;H12;14K44 
```

第一列 (PR...) 中的数字代表 CCC 编号。第 2 列、第 3 列和第 4 列代表三个不同公司的零件编号（第 2 列是一家公司，第 3 列是另一家公司，依此类推）。用户会告诉我公司，以及公司下的零件号，方法是选择一个单选按钮，然后输入零件（即公司 3 和“RJ6”），然后我应该给客户 CCC 号（ “PR223”）。

我不是要你们为我做作业，但我很难掌握数组。你能指出我如何去做这件事吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T05:22:13.903

其他答案都是正确的。您从文本文件中读取每一行并将值插入到数据定义的结构中。对于每个新行，您需要使用该结构的一个实例，因此您可以制作一个结构数组，该数组只是一组结构。

如果你在努力理解数组，你真的需要努力。将数组想象成一组盒子。让我们从一行中的 3 个盒子开始。每个都是相同的大小，只能容纳它们里面的东西。您可以将项目类型（数据）分配给框，但所有框只能容纳该类型的项目。框从 0 到 2 编号。在某些语言中，您可以命名框（关联数组），但不能在 C# AFAIK 中命名。所以这给了你一个一维数组。

对于二维数组，请考虑棋盘。你知道如何记录国际象棋比赛吗？国际象棋符号使用 A 到 H 表示水平位置，使用 1 到 8 表示垂直位置。所以白皇后从位置 D1 开始。现在，如果我正在编写一个国际象棋游戏，我会使用 8x8 数组，就像棋盘一样。当然，我的阵列上的编号将是顶部的 0-7 和侧面的 0-7。我的数组中白皇后的位置将是 [3][0]。因此，将数据放在二维数组中就像在棋盘上放置棋子一样。游戏战舰是二维数组的另一个例子。

向数组添加维度就像向图形添加新坐标。您从**X**开始，然后添加**Y**，然后他们添加**Z。**等等等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T04:31:09.793

您可以使用 StreamReader 的[ReadLine](http://msdn.microsoft.com/en-us/library/system.io.streamreader.readline%28v=vs.85%29.aspx)方法一次读取一行文件。然后您可以使用[String.Split(char[])](http://msdn.microsoft.com/en-us/library/b873y76a.aspx)方法获取每行中的值的字符串数组。如果您已经知道如何制作结构，则应该设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T04:31:32.950

如果您查看每行数据，则“列”之间有一个共同的分隔符，因此您希望将每行[拆分](http://msdn.microsoft.com/en-us/library/b873y76a.aspx)为四个单独的实体。当您逐行工作并获得这四个离散元素时，应该可以将每个元素分配给结构的适当部分。当然，每一行都有一个“结构”，所以最后是一组结构。

# android - 是否可以在 Nexus 7 中将锁定屏幕的方向设置为横向？

> ID：13427641
> 
> 赞同：1
> 
> 时间：2012-11-17T04:19:53.917
> 
> 标签：android, screen-orientation, lockscreen, nexus-7

我希望主屏幕和锁定屏幕处于横向模式。我使用[了这个应用程序](https://play.google.com/store/apps/details?id=com.devasque.rotationlocker&hl=en)，并且能够使主屏幕保持横向模式，但锁定屏幕仍处于纵向模式。我想知道这个应用程序如何改变主屏幕的方向，是否可以在不安装其他第三方锁屏的情况下将锁屏的方向更改为横向。

我只是在寻找适用于 Nexus 7 的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T04:58:22.500

Google 为 Nexus 7 Android 4.1.2 发布了一个新版本，该版本支持主屏幕和横向锁定屏幕。请更新您的软件..

# facebook - 为什么 facebook 电子邮件没有被检索到？

> ID：13427642
> 
> 赞同：0
> 
> 时间：2012-11-17T04:20:45.467
> 
> 标签：facebook, ruby-on-rails-3, omniauth

用户接受使用他的 facebook 帐户登录后，我的应用程序回调将被 facebook 调用，我注意到 facebook 没有检索用户电子邮件，尽管在omniauth 的配置中，我已经在权限列表中列出了电子邮件，例如这个：

```
Rails.application.config.middleware.use OmniAuth::Builder do
  provider :facebook, omniauth_app_id, omniauth_app_secret_id,
           :scope => 'email,user_birthday,read_stream', :display => 'popup'
end 
```

我期待在`request.env['omniauth.auth']['extra']['raw_info']['email']`或中找到电子邮件`request.env['omniauth.auth']['info']['raw_info']['email']` 但是，它不存在......事实上，它不在`request`对象内的任何属性中！

任何想法 ？它与我的应用程序 facebook 设置有关吗？

**编辑**

以下是 Facebook 的回调结果：

```
puts auth.inspect

#<OmniAuth::AuthHash credentials=#<Hashie::Mash expires=true expires_at=1353164400 token="***"> extra=#<Hashie::Mash raw_info=#<Hashie::Mash first_name="***" id="***" last_name="***" link="***" locale="ar_AR" name="***" timezone=2 updated_time="2012-11-17T13:01:59+0000" username="***" verified=true>> info=#<OmniAuth::AuthHash::InfoHash first_name="***" image="***" last_name="***" name="***" nickname="***" urls=#<Hashie::Mash Facebook="***"> verified=true> provider="facebook" uid="***"> 
```

*我已经用**替换了真实数据，但是，您可以看到电子邮件数据丢失了..

**编辑2**

这是我在 Gemfile gem 'devise' 中使用的宝石

```
gem 'omniauth'
gem 'omniauth-facebook', '1.4.0'

gem 'oauth2' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T01:32:43.350

好的，我找到了！这是facebook[在这里说的](https://developers.facebook.com/apps/463026327071975/summary?save=1)

> 默认情况下，调用 FB.login 将尝试仅使用基本权限对用户进行身份验证。如果您需要一个或多个附加权限，请使用选项对象调用 FB.login，并使用您希望从用户请求的权限的逗号分隔列表设置范围参数。

所以，我必须像这样添加“电子邮件”：

```
 FB.login(function(response) {
   // handle the response
 }, {scope: 'email,user_likes'}); 
```

非常感谢所有试图提供帮助的人:-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-29T13:47:46.600

可以在不确认电子邮件的情况下拥有 Facebook 帐户。在这种情况下，`request.env['omniauth.auth']['info']`没有`'email'`密钥。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-17T17:22:03.297

我们为 facebook 使用 devise 和 omniauth - 遵循以下 railscast。我不知道您是否可以适应，但我们已成功提取电子邮件和其他一些信息。从回调。

[http://asciicasts.com/episodes/241-simple-omniauth](http://asciicasts.com/episodes/241-simple-omniauth)

我们的控制器动作看起来像这样（浓缩）：

```
 def create  
    omniauth = request.env["omniauth.auth"]  
    authentication = Authentication.find_by_provider_and_uid(omniauth['provider'], omniauth['uid'])  
    if authentication  
      sign_in_and_redirect(:user, authentication.user)  
    elsif current_user  
      current_user.authentications.create(:provider => omniauth ['provider'], :uid => omniauth['uid'])  
      redirect_to authentications_url  
    else
      user = User.new
      user.apply_omniauth(omniauth)
      if user.save
        sign_in_and_redirect(:user, user)
      else   
        session[:omniauth] = omniauth.except('extra')
        redirect_to new_user_registration_url
       end
    end  
  end 
```

用户.apply_omniauth：

```
 def apply_omniauth(omniauth)  
     authentications.build(:provider => omniauth['provider'], :uid => omniauth['uid']) 
   end 
```

根据其他人的建议，我们使用以下方式收到电子邮件：

```
 @omniauth_email = session[:omniauth][:info][:email] 
```

我希望这会有所帮助，我知道您正在寻找的东西并不安静。

- 编辑 -

我的初始化程序与您的不同。尝试删除所有 xs 内容并使用以下内容：

```
 Rails.application.config.middleware.use OmniAuth::Builder do  
  provider :facebook, 'xxxxxx', 'xxxxxx'  
 ...
 end 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-17T05:25:13.203

从`info`哈希中获取它怎么样？

```
request.env['omniauth.auth']['info']['email'] 
```

我认为这是[omniauth-facebook](https://github.com/mkdynamic/omniauth-facebook)在Auth Hash部分推荐的

# php - PHP从另一个网站获取用户名

> ID：13427644
> 
> 赞同：2
> 
> 时间：2012-11-17T04:20:48.463
> 
> 标签：php

我的问题是如何从一个 php 页面获取我的用户名和密码，该页面检查用户名和密码是否正确，然后到另一个简单地打印出用户之前在页面上输入的内容。

我不想使用“包含”，因为它会执行我的整个 php 文件，这将不起作用，因为它会运行登录表单两次，然后将我重定向到我的无效登录表单页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T04:33:49.917

我认为您正在寻找的是[session](http://php.net/manual/en/features.sessions.php)。

```
<?php //one page
session_start();
$_SESSION['something'] = 'some data';

<?php //another page
session_start();
echo $_SESSION['something'];
//outputs 'some data' 
```

# c++ - 使用顶点数组、四边形数组创建四边形网格

> ID：13427646
> 
> 赞同：1
> 
> 时间：2012-11-17T04:20:53.580
> 
> 标签：c++, arrays, opengl, mesh, vertex

我正在做`OpenGL`程序，我需要创建一个用户定义的尺寸四边形网格。

据我目前了解的是，我使用顶点数组来绘制实际上将形成四边形网格的四边形。这是一个非常简单的概念，但我很难理解它。

因此，如果我理解不正确，请纠正我。

因此，如果用户想要制作 4x4 网格，则将有 16 个四边形和 64 个顶点来放置它们。因此，当用户定义网格的分辨率时（哦，顺便说一下，边界大小已经在开头给出），我创建了这 64 个顶点。

到目前为止我是否正确？

我将与这些四边形进行交互并重新塑造它们以形成山的形状。

当然，我需要更大的分辨率，可能是 32x32 甚至更大才能正确显示这样的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T05:00:08.367

如果我理解正确，您想要制作一个四边形网格，然后再创建一个大四边形。

对于 4x4，它看起来像这样

```
 _ _ _ _
|_|_|_|_|
|_|_|_|_|
|_|_|_|_|
|_|_|_|_| 
```

在这种情况下，您只需要 (4+1)x(4+1) 个顶点，因此需要 25 个顶点。您可以唯一地指定每个四边形的四个顶点，尽管除了对网格来说是不必要的（并且浪费内存和速度）之外，您最终可能更难添加“山”功能（类似于我的地形）猜测）。如果您在网格的中间移动一个顶点，您可能希望它为使用该顶点的所有四个四边形移动。如果您让四边形**共享顶点**（就像它们在网格中所做的那样），则移动一个点将更改使用该点的所有四边形。

基本上，指定所有唯一的顶点并将它们连接为四边形。最好避免冗余。

此外，如果您正在学习 OpenGL，请确保您没有使用固定功能管道进行学习（如果您有 a`glBegin()`或 a `glVertex3f()`，那么您正在使用固定功能管道）。你不应该使用它的原因太多了（它已经有几十年的历史了，它更慢，它几乎没有那么灵活），但也许最大的原因是如果你想做真正的图形是在浪费时间。您必须学习如何使用可编程管道，并且在您的脑海中拥有固定的功能管道习惯和思维方式只会使其变得更加困难。

# triggers - 具有多个 when 子句的 HSQL 触发器

> ID：13427650
> 
> 赞同：0
> 
> 时间：2012-11-17T04:21:27.300
> 
> 标签：triggers, hsqldb, clause

我们可以在 HSQL DB 中创建具有多个 WHEN 子句的触发器吗？像这样的东西：-

```
CREATE TRIGGER  perosn_trig AFTER UPDATE ON person
REFERENCING  NEW AS nwrow  OLD as oldrow
FOR EACH ROW 
   when ( nwrow.person_id>100 )  
   ( insert into TRIGLOG values ('PERSON_more_than_100',nwrow.person_id,SYSDATE)  ),
   When (nwrow.person_id<=100) 
   ( insert into TRIGLOG values ('PERSON_less_than_100',nwrow.person_id,SYSDATE) )
; 
```

此查询给出语法错误。什么是正确的语法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T11:14:42.043

目前不支持触发器中的多个 WHEN 子句。WHEN 子句通常与简单条件一起使用，仅在必要时调用触发器。

对于更复杂的条件，请使用 CASE 或 IF 条件：

```
CREATE TRIGGER  perosn_trig AFTER UPDATE ON person
REFERENCING  NEW AS nwrow  OLD as oldrow
FOR EACH ROW 
BEGIN ATOMIC
  IF ( nwrow.person_id>100 ) THEN 
    insert into TRIGLOG values ('PERSON_more_than_100',nwrow.person_id,SYSDATE);
  ELSE
    insert into TRIGLOG values ('PERSON_less_than_100',nwrow.person_id,SYSDATE);
  END IF;
END 
```

[http://hsqldb.org/doc/2.0/guide/sqlroutines-chapt.html#src_psm_conditional](http://hsqldb.org/doc/2.0/guide/sqlroutines-chapt.html#src_psm_conditional)

# c# - 在构造函数以外的地方构建结构/对象

> ID：13427651
> 
> 赞同：3
> 
> 时间：2012-11-17T04:21:46.513
> 
> 标签：c#, java, ooad

我有代表同一个业务实体的不同类型的对象。 `UIObject`, `PowershellObject`, `DevCodeModelObject`,`WMIObject`都是对同一实体的不同表示。

所以说如果实体是`Animal`那么我有`AnimalUIObject`, `AnimalPSObject`, `AnimalModelObject`,`AnimalWMIObject`等。

现在`AnimalUIObject`, `AnimalPSObject`,的实现`AnimalModelObject`都在单独的程序集中。

现在我的场景是我想验证业务实体的内容，`Animal`而不管它来自哪个程序集。所以我创建了一个`GenericAnimal`类来表示`Animal`实体。

现在`GenericAnimal`我添加了以下构造函数：

```
GenericAnimal(AnimalUIObject)
GenericAnimal(AnimalPSObject)
GenericAnimal(AnimalModelObject) 
```

基本上，我`GenericAnimal`依赖于所有底层程序集，以便在验证时处理这个抽象。

现在执行此操作的另一种方法是`GenericAnimal`使用一个空的构造函数，并允许这些底层程序集有一个`Transform()`方法来构建`GenericAnimal`.

这两种方法都有一些优点和缺点：

第一种方法：
优点：所有构造逻辑都在一个类中的一个地方`GenericAnimal`
缺点：`GenericAnimal`每次有新的表示形式时都必须触及类。

第二种方法：
优点：将构建责任委托给底层组件。
缺点：由于构造逻辑分布在组件中，明天如果我需要添加一个属性`X`，`GenericAnimal`那么我必须触摸所有组件来更改`Transform`方法。

哪种方法看起来更好？
或者您认为哪个是较小的邪恶？
有没有比上述两种更好的替代方法？

只是根据我收到的评论进一步阐述。我没有修改底层对象结构的奢侈，即我无法更改 AnimalUIObject AnimalPSObject 等。GenericAnimal 是我仅为验证目的而引入的构造。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T04:42:34.297

我认为这两种方法都很“邪恶”。

我认为您真正需要的是从`Animal`类作为您的核心类开始，并使其余的类包装类使用`Animal`该类来保存表示。然后针对 Animal API 执行验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T04:44:00.713

可能是抽象工厂模式的机会？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T05:20:33.093

> 我有代表同一个业务实体的不同类型的对象。UIObject、PowershellObject、DevCodeModelObject、WMIObject 都是对同一实体的不同表示。

总体上看一下[设计模式](http://en.wikipedia.org/wiki/Software_design_pattern)，特别是[结构模式](http://en.wikipedia.org/wiki/Structural_pattern)。

据我了解，[装饰器模式](http://en.wikipedia.org/wiki/Decorator_pattern)会很有用：

> 装饰器模式可用于在运行时扩展（装饰）某个对象的功能，独立于同一类的其他实例，前提是在设计时完成了一些基础工作。这是通过设计一个包装原始类的新装饰器类来实现的

所以它应该是第一种方法，但没有缺点：

GenericAnimal 类将有一个构造函数：

```
GenericAnimal(AnimalObject) 
```

使用`AnimalObject`接口或抽象类。

> 缺点：每次有新的表示形式时都必须触及 GenericAnimal 类。

如果您添加另一种表示形式，请使其实现或扩展`AnimalObject`。

# bash - inotifywait 的 Bash 脚本 - 如何将删除写入日志文件和 cp close_writes？

> ID：13427656
> 
> 赞同：1
> 
> 时间：2012-11-17T04:22:52.783
> 
> 标签：bash, inotify

我有这个 bash 脚本：

```
#!/bin/bash

inotifywait -m -e close_write --exclude '\*.sw??$' . |
#adding --format %f does not work for some reason
while read dir ev file; do
        cp ./"$file" zinot/"$file"
done
~ 
```

现在，我如何让它做同样的事情，同时通过将文件名写入日志文件来处理删除？就像是？

```
#!/bin/bash

inotifywait -m -e close_write --exclude '\*.sw??$' . |
#adding --format %f does not work for some reason
while read dir ev file; do
        # if DELETE, append $file to /inotify.log
        # else
        cp ./"$file" zinot/"$file"
done
~ 
```

编辑：

通过查看生成的消息，我发现`CLOSE_WRITE,CLOSE`每当文件关闭时都会生成 inotifywait。这就是我现在检查我的代码的内容。我也尝试检查`DELETE`，但由于某种原因，该部分代码不起作用。看看这个：

```
#!/bin/bash

fromdir=/path/to/directory/
inotifywait -m -e close_write,delete --exclude '\*.sw??$' "$fromdir" |
while read dir ev file; do
        if [ "$ev" == 'CLOSE_WRITE,CLOSE' ]
        then
                # copy entire file to /root/zinot/ - WORKS!
                cp "$fromdir""$file" /root/zinot/"$file"
        elif [ "$ev" == 'DELETE' ]
        then
                # trying this without echo does not work, but with echo it does!
                echo "$file" >> /root/zinot.txt
        else
                # never saw this error message pop up, which makes sense.
                echo Could not perform action on "$ev"
        fi

done 
```

在目录中，我做到了`touch zzzhey.txt`。文件被复制。我这样做`vim zzzhey.txt`，文件更改被复制。我这样做`rm zzzhey.txt`了，文件名被添加到我的日志文件`zinot.txt`中。惊人的！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T11:32:22.053

您需要添加`-e delete`到您的监视器，否则`DELETE`事件将不会传递给循环。然后在处理事件的循环中添加条件。这样的事情应该做：

```
#!/bin/bash

inotifywait -m -e delete -e close_write --exclude '\*.sw??$' . |
while read dir ev file; do
  if [ "$ev" = "DELETE" ]; then
    echo "$file" >> /inotify.log
  else
    cp ./"$file" zinot/"$file"
  fi
done 
```

# java - 工程格式化程序功能不上轮

> ID：13427661
> 
> 赞同：0
> 
> 时间：2012-11-17T04:24:04.533
> 
> 标签：java, gwt, numbers, string-formatting

我有这个格式化大数字的功能。

```
public static String ToEngineeringNotation(Double d, String unit, int decimals) {
        double exponent = Math.log10(Math.abs(d));
        if (d != 0)
        {
            String result = "0";
            switch ((int)Math.floor(exponent))
            {
                case -2: case -1: case 0: case 1: case 2:
                    result = (d + "").replace(".", ",") + " " + unit;
                    break;
                case 3: case 4: case 5:
                    result = ((d / 1e3) + "").replace(".", ",") + " k" + unit;
                    break;
                case 6: case 7: case 8:
                    result = ((d / 1e6) + "").replace(".", ",") + " M" + unit;
                    break;
                default:
                    result = ((d / 1e9) + "").replace(".", ",") + " G" + unit;
                    break;
            }

            if (result.contains(",")) {
                if (result.indexOf(" ") - result.indexOf(",") >= decimals) {
                    result = result.substring(0, result.indexOf(",") + decimals + 1) + result.substring(result.indexOf(" "));
                }
                if (decimals <= 0)
                    result = result.replace(",", "");
            }
            return result;
        } else {
            return "0 " + unit;
        }
    } 
```

如果我给`3866500.0`我想得到`3.9 M`，我得到的是`3,8 M`，因为算法不会四舍五入到最接近的上限值。我不知道该怎么做。

任何的想法 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T05:14:20.007

哦，问题是你在把它变成一个字符串之后删除了小数。换一种方式更容易，换句话说：

```
case 6: case 7: case 8:
    double divide = (d / 1e6d) * ;
    double roundFactor = Math.pow(10, decimals);
    result = (Math.round(divide * roundFactor) / roundFactor) + "").replace(".", ",") + " M" + unit;
    break; 
```

这不是最干净的方式，但我想向您展示这个想法。用数学而不是字符串进行四舍五入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T05:17:39.077

我建议将您的数据转换为 java.math.BigDecimal。它有几种舍入模式，包括向正无穷大舍入。我相信从十进制表示开始，您的格式会更容易。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-17T06:45:30.673

我建议 java.text.NumberFormat：

```
public static String ToEngineeringNotation(double d, String unit, int decimals) {
    String m = "";
    if (d > 1000000000) {
        d = d / 1000000000;
        m = " G";
    } else if (d > 1000000) {
        d = d / 1000000;
        m = " M";
    } else  if (d > 1000) {
        d = d / 1000;
        m = " K";
    }
    NumberFormat f = NumberFormat.getInstance();
    f.setGroupingUsed(false);
    f.setMinimumFractionDigits(decimals);
    f.setMaximumFractionDigits(decimals);
    return f.format(d) + m + " " + unit;
} 
```

请注意，NumberFormat 将根据您的语言环境选择小数分隔符，这可能是您想要的。如果您希望它始终是逗号，请使用 NumberFormat.getInstance(Locale.GERMAN)

# matlab - 朴素贝叶斯：TRAINING 的每个特征的类内方差必须为正

> ID：13427664
> 
> 赞同：7
> 
> 时间：2012-11-17T04:24:16.603
> 
> 标签：matlab, classification, bayesian, variance, naivebayes

尝试拟合朴素贝叶斯时：

```
 training_data = sample; % 
    target_class = K8;
 # train model
 nb = NaiveBayes.fit(training_data, target_class);

 # prediction
 y = nb.predict(cluster3); 
```

我收到一个错误：

```
??? Error using ==> NaiveBayes.fit>gaussianFit at 535
The within-class variance in each feature of TRAINING
must be positive. The within-class variance in feature
2 5 6 in class normal. are not positive.

Error in ==> NaiveBayes.fit at 498
            obj = gaussianFit(obj, training, gindex); 
```

任何人都可以阐明这一点以及如何解决它？请注意，我在[这里](http://www.mathworks.co.uk/matlabcentral/answers/40289)阅读了类似的帖子，但我不确定该怎么做？似乎它试图基于列而不是行来拟合，类方差应该基于每一行属于特定类的概率。如果我删除这些列，那么它可以工作，但显然这不是我想要做的。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-17T05:46:51.323

假设您的代码（或来自 mathworks 的 NaiveBayes 代码）中没有任何错误，并再次假设您的 training_data 是 NxD 的形式，其中有 N 个观察值和 D 个特征，那么第 2、5 和 6 列完全为零至少一个班级。如果您的训练数据相对较少且类别数量较多，则可能会发生这种情况，其中单个类别可能由几个观察值表示。由于默认情况下 NaiveBayes 将所有特征视为正态分布的一部分，因此它不能处理与单个类相关的所有特征的方差为零的列。换句话说，NaiveBayes 无法通过将正态分布拟合到特定类的特征来找到概率分布的参数（注意：分布的默认值是`normal`）。

看看你的特征的性质。如果他们似乎不遵循每个类中的正态分布，则`normal`不是您要使用的选项。也许您的数据更接近多项式模型`mn`：

```
nb = NaiveBayes.fit(training_data, target_class, 'Distribution', 'mn'); 
```

# image - NextGen 插件 - 显示图库图像计数

> ID：13427666
> 
> 赞同：2
> 
> 时间：2012-11-17T04:24:29.910
> 
> 标签：image, wordpress, gallery

我正在为网站使用 NextGen 画廊 WordPress 插件。在我的 gallery.php 模板中，我想检索循环中显示的每个画廊的图像数量。我想不出一种方法来获取数据并在gallery.php中调用的每个画廊的缩略图下打印它

这是我要插入图库图像计数并打印的位置：

```
<a rel="prettyPhoto" href="<?php echo $image->imageURL ?>" 
<?php $image->thumbcode ?>><span>view</span></a> <?php echo $total_images; ?> pictures 
```

有人有任何提示吗？

谢谢，伊恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-21T19:09:37.280

我使用这个小技巧从我粘贴在帖子中的短代码（[nggallery=1]）中获取我的画廊 ID

```
<?php
    $id = get_the_ID();//Get the id of the specific post (inside the loop)
    $string = get_the_content();//You get the whole post content where in the end of it lies your shortcode (for example [nggallery=1])
    if(preg_match_all('/=(.*?)\]/s',$string,$match)) {            
    $finalstring=$match[1][0];
    }// get the id only (gets all chars after '=' and before ']')
    global $wpdb;
    $total_attachments = $wpdb->get_var("SELECT COUNT(*) FROM $wpdb->nggpictures WHERE galleryid=$finalstring" ); // Voila!
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T03:23:26.627

答案是你不能。您可以计算 $images 变量中的键，但它会返回错误的数字。您可以检索所有图像的总数，或所有无用的画廊。您甚至可以在遍历数组时使用计数器来尝试计算图库中有多少图像，但您仍然会得到错误的数字。您可以尝试在默认情况下使用全局变量：images->total，它们是空的且未定义的，甚至不存在于 $images 或 $current 对象中。

代码显示（“图片 3 of 7）”类型的显示。如果你在 imagebrowser.php 模板中使用它，它就可以工作。如果您将完全相同的代码粘贴到 gallery-carousel.php 模板中。不起作用。现在您可能会认为切换到 $current->total 会起作用，因为在使用 gallery_carousel 时它会莫名其妙地对其余变量起作用，但不，它不会。**答案是您必须直接从数据库中提取信息。**

```
 <?php _e('Picture', 'nggallery') ?> <?php echo $image->number ?> <?php _e('of',      'nggallery')?> <?php echo $image->total ?> 
```

这是一个险恶的，险恶的插件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T04:58:49.560

希望我的解决方案对你有用。

这是计算图像所需的代码：

```
$global $wpdb;
$images    = intval( $wpdb->get_var("SELECT COUNT(*) FROM $wpdb->nggpictures") );
$galleries = intval( $wpdb->get_var("SELECT COUNT(*) FROM $wpdb->nggallery") );
$albums    = intval( $wpdb->get_var("SELECT COUNT(*) FROM $wpdb->nggalbum") ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T18:58:45.590

如果您无法计算图库上的图像，则可以计算 html 块上的标签。

在我的主题上，我从自定义字段中获取图库 ID，并在模板中回显图库。所以，它是这样的：

```
<?php
    $myGalleryId = 1; // example
    $displayImages = 0; // the number of images you want to display from gallery. 0 = all images 
    $newnggShortcodes = new NextGEN_Shortcodes;
    $htmlGallery = str_get_html($newnggShortcodes->show_gallery( array("id"=>$myGalleryId,"images"=>$displayImages,"template"=>"popular") ));
    $countImg = count($htmlGallery->find('img')); // number of total <img> tags inside the gallery
    $str = $htmlGallery;
?>
<!-- now the html -->
<div id="myGallery">
<?php echo $str; ?>
</div>
<span>Total images: <?php echo $countImg; ?></span> 
```

希望能帮助到你。

# c# - 发送鼠标点击处理

> ID：13427672
> 
> 赞同：0
> 
> 时间：2012-11-17T04:26:20.390
> 
> 标签：c#, process, mouseevent, message, send

我正在尝试完成向应用程序发送鼠标点击。

我目前有：

```
 int hWnd = FindWindow(null, "Window Title Here");
            SendMessage(hwnd, 0x201, 0, 0); //Mouse left down
            SendMessage(hwnd, 0x202, 0, 0); //Mouse left up 
```

我在用着

```
 [DllImport("user32.dll", CharSet = CharSet.Auto, SetLastError = false)]
    static extern IntPtr SendMessage(IntPtr hWnd, int Msg, int wParam, int lParam); 
```

和

```
 [DllImportAttribute("User32.dll")]
    private static extern int FindWindow(String ClassName, String WindowName); 
```

但我得到错误，这些是：

“当前上下文中不存在名称‘hwnd’”

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T04:30:17.143

C# 区分大小写。`hwnd`并且`hWnd`是不同的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T04:36:32.310

已经有库这样做了，`Windows Input Simulator`这就是一个例子，如果你可以使用它，它将使你不必编写这种代码。参见[CodePlex](http://inputsimulator.codeplex.com/)

# iphone - 通过解析数据部分来减少加载时间

> ID：13427673
> 
> 赞同：0
> 
> 时间：2012-11-17T04:26:31.777
> 
> 标签：iphone, objective-c, ios, xcode, ios5

我正在开发我的第一个应用程序，它正在解析来自网站的数据。根据用户的搜索，它可能必须解析 1000 个节点，这可能需要长达 30 秒才能将数据显示在 tableview 中。在用户部分滚动表视图之前，解析前 30 个节点而不显示下 30 个节点的一般策略是什么。我以这个网站（[这里](http://www.lwxted.com/blog/2012/smart-data-loading-table-views/)）为例，但我很难理解将我的解析方法放在哪里以使其一次加载 30 个节点。

```
 #import "DataLoader.h"

@implementation DataLoader

@synthesize delegate;

- (void)loadData
{
[self performSelector:@selector(loadDataDelayed) withObject:nil afterDelay:3];
}

- (void)loadDataDelayed
{

[parsing method here]
NSMutableArray *array = [NSMutableArray arrayWithCapacity:30];
for (int i = 1; i<=30 ; i++) {
    [array addObject:[propertyList objectAtIndex:i];
}
[delegate.searchResultOfSets addObjectsFromArray:array];
[delegate.tableView reloadData];
// Always remember to set loading to NO whenever you finish loading the data.
delegate.loading = NO;
}
@end 
```

但这显然首先解析了所有数据。关于如何优化我的解析的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T06:02:48.763

先只获取 30 个项目，然后，当用户向下滚动到底部时，再次下载另外 30 个项目，可能如下。

```
- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath { 
        if(indexPath.row == [self.arrayOfItems count] && hasMoreItemsToLoad) 
           [self loadNext30Items];
} 
```

# windows - 使用命令行运行在 STS（Spring Tool Suite）中创建的 groovy 脚本

> ID：13427675
> 
> 赞同：4
> 
> 时间：2012-11-17T04:27:13.973
> 
> 标签：windows, groovy, sts-springsourcetoolsuite

我使用 STS（Spring Tool Suite）创建了一个已编译的 groovy 脚本，该脚本作为一个名为 Test.class 的文件存在于 Windows 上。我可以右键单击 STS 中的文件并执行它，效果很好。

但是 - 我希望能够在 windows 命令行上执行脚本，到目前为止我已经尝试了各种方法但都没有成功。我尝试了以下...

> java -cp C:\Users\MyName\springsource\sts-> 3.1.0.RELEASE\plugins\org.codehaus.grails.bundle_2.1.1\content\lib\ org.codehaus.groovy\groovy-all\jars\groovy -all-1.8.8.jar 测试类

但这不起作用，它给了我一个错误->错误：无法找到或加载主类Test.class

任何指针？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T16:51:12.657

您正在尝试运行一个测试用例，因此您确实需要启动 junit 并将此测试作为要运行的测试。

最简单的做法是下载 groovy 的发行版，解压缩并运行：

```
groovy Test.groovy 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T04:56:28.190

## **第1步**

在 STS(Spring Tool Suite) 中，创建一个 Groovy 类，例如 Customer.groovy 文件。指定包名称，例如 com.customer。在 main 方法中放入代码以验证代码被调用，例如 println 'test'。

## **第2步**

转到您的命令行（Windows 使用命令提示符）。将\cd 切换到项目的ROOT 目录。执行下面的命令。

## 第 3 步

执行 java -cp C:\Users\Profile\springsource\sts-3.1.0.RELEASE\plugins\org.codehaus.grails.bundle_2.1.1\content\lib\org.codehaus.groovy\groovy-all\jars\groovy -all-1.8.8.jar；。com.customer.Customer 代码应该运行。

## 五、重要

If like me, you do not have a class and you only have a groovy script then in step#3 specify the Groovy script name without the suffix.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T05:14:18.540

测试是赤裸裸的？（没有包名？）试试这个。

```
java -cp C:\Users\MyName\springsource\sts-> 3.1.0.RELEASE\plugins\org.codehaus.grails.bundle_2.1.1\content\lib\ org.codehaus.groovy\groovy-all\jars\groovy-all-1.8.8.jar;. package.Test 
```

注意;。和包名。

# bash - 在 Red Hat 中使用 Linux 的作业列表和查找进程 ID

> ID：13427681
> 
> 赞同：-1
> 
> 时间：2012-11-17T04:28:17.187
> 
> 标签：bash, redhat

我已经编写了这个脚本，但是当我运行作业 -ls 和 ps|grep 时，我没有得到任何结果，这是我的脚本：

```
#!/bin/bash
trap 'echo -e "kill Command given \n";exit 2'SIGINT SIGTERM
count=1
echo "start of the program"
while [ $count -le 10 ]
do
    echo "Loop #${count}"
    sleep 10
    count=$[ count + 1 ]
done
echo "end of program" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T19:28:22.393

此语法无效：

```
trap 'echo -e "kill Command given \n";exit 2'SIGINT SIGTERM 
```

因为你没有有效的间距。改用这个：

```
trap 'echo -e "kill Command given \n"; exit 2' INT TERM 
```

您可能也做错了其他事情，因为这对我来说很好：

```
# Start 10 sleep processes in the background.
for x in {1..10}; do
    sleep 60 &
done

$ pgrep -c sleep
10 
```

我得到了*我*期望的结果，这是当前运行的睡眠进程数的计数。如果您期待其他内容，请更新您的问题并提供一些您预期输出的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T18:35:24.910

我用这个

```
ps | awk /$1/'{print $4; exit}' 
```

# objective-c - NSView _frame Objective-C 的值错误

> ID：13427682
> 
> 赞同：0
> 
> 时间：2012-11-17T04:28:19.880
> 
> 标签：objective-c, height, frame, nsview

**我想在名为SettingsViewer**的子类 NSView 的右上角绘制一个 160x160 的圆圈。我必须承认我在这个绘图行业中很新；（虽然我之前做过一些绘图，这与我现在所做的完全不同，但更复杂的是我这次遇到了一个问题。

我将我的 SettingsViewer 链接到**IBOutlet SettingsViewer *myView;** 在我的 SettingsViewer.h 中通过使用按钮进行测试来绘制这个圆圈。

我要做的第一件事是找出我的视图区域的边界，如下所示：

```
NSRect circleBounds = myView->_frame; 
```

这就是我之前所做的，并且效果很好。但在这里我得到了正确的宽度值和一个奇怪的高度值：

![调试器信息](../Images/2f304f86bb362bbb823ea439c215224d.png) 高度应为 407。

任何线索为什么我得到这个错误的值？

罗纳德霍夫曼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T07:13:55.927

> > 为什么当我在 IBAction 中使用它时这不起作用？

因为你知道你有一个有效的绘图上下文的唯一时间是在 drawRect 方法中。如果 IBAction 需要更新视图，它应该使用 [theView setNeedsDisplay:YES]。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T05:17:39.550

您可以覆盖`-drawRect:`：

```
-(void)drawRect:(NSRect)rect
{
    CGRect bounds = self.bounds ;
    NSBezierPath * path = [ NSBezierPath bezierPathWithOvalInRect:(NSRect){ 
        { CGRectGetMaxX( bounds ) - 160.0f, CGRectGetMaxY( bounds ) - 160.0f }
        , { 160.0f, 160.0f } 
    } ] ;
    [ path stroke ] ;
} 
```

# magento - Magento 管理面板备份工具：完整系统备份失败且没有错误消息

> ID：13427692
> 
> 赞同：1
> 
> 时间：2012-11-17T04:31:02.313
> 
> 标签：magento, magento-1.7

我正在尝试在管理面板备份工具中使用完整的系统备份。我将它与“排除媒体”选项一起使用。它显示“请稍候..”并且看起来它正在工作大约 45 秒左右，然后该对话框消失但列表中没有备份出现，即使在刷新之后也是如此。对话框消失所需的时间比我的 PHP 执行超时值短。也没有错误信息。其他备份选项（数据库备份、数据库和媒体备份）工作正常。完整系统备份有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-09T16:49:22.200

我的解决方案：

1.  在magento后端清除缓存：admin/system/cache（magento/storage/pictures/java）

2.  禁用所有缓存主题

3.  清除 /var/cache/

4.  运行备份（系统 + 媒体）

5.  刷新 - 你会看到一个新行

magento 1.7.0.2。php 5.2 php：memory_limit：512MB，max_execution time：360 秒。

# node.js - 如何让 Stylus 在正确的目录中更新 CSS？

> ID：13427696
> 
> 赞同：2
> 
> 时间：2012-11-17T04:31:09.613
> 
> 标签：node.js, express

使用 Node.js + Express，但由于某种原因无法让 css 正常工作。我有以下两个文件夹：

`/public/css/lib`- .css 文件应该放在哪里

`/public/css/src`- .styl 文件在哪里

以及以下配置：

```
app.configure(function() {

    app.set('port', process.env.PORT || 3000);
    app.set('views', __dirname + '/views');
    app.set('view engine', 'jade');
    app.use(express.favicon());
    app.use(express.logger({
        format: 'dev'
    }));
    app.use(express.bodyParser());
    app.use(express.methodOverride());
    app.use(express.cookieParser('whatever'));
    app.use(express.session());
    app.use(app.router);

    app.use(require('stylus').middleware({
        src: __dirname + '/public/css/src',
        dest: __dirname + '/public/css/lib',
        compress: true,
        force: true,
        compile: function(str, path) {
            return stylus(str)
                .set('filename', path)
                .set('warn', true)
                .set('compress', true);
            }
    }));

    app.use(express.static(path.join(__dirname, 'public')));

}); 
```

但是`.css`在启动应用程序或更改`.styl`文件或转到`/css/lib/app.css`.

我究竟做错了什么？

# jquery-chosen - Select2 多值选择框未正确显示

> ID：13427701
> 
> 赞同：1
> 
> 时间：2012-11-17T04:32:19.343
> 
> 标签：jquery-chosen, multiple-select, jquery-select2

**编辑：** 我已经弄清楚我的问题是针对这个特定问题的。

**解决方案：**对于这个特殊问题，我遇到了权限问题。由于我将 selected 和 select2 项目文件夹直接复制到我的应用程序中，显然权限不正确。解决方案是在开发时在项目中创建插件文件，或者在终端中执行 **“chmod 0755 -R select2/”** ，因为您使用的是 *nix 机器。就是这样。selected 和 select2 之间没有任何冲突问题或类似问题。

**原帖：**

我正在尝试使用 Select2 创建一个干净的多值选择框。我已经尝试过 Select2 和 Chosen.js，结果是一样的。该框无法正确显示。它显示了一个旧式丑陋的多选框，就像没有涉及任何 javascript 一样。

这是显示其显示方式的图像：http: [//d.pr/i/bUa5](http://d.pr/i/bUa5)

我想要的是一个多选框，就像这个论坛中的那个。

希望有人可以帮忙？

这是我的测试代码：

```
<!doctype html>
<head>
<title>Select2 Example</title>
<link href="select2.css" rel="stylesheet"/>
<link rel="stylesheet" href="chosen/chosen.css">
</head>
<body>
<form>

    <select id="e1" multible>
        <option value="AL">Alabama</option>
        <option value="AR">Arizona</option>
        <option value="CA">California</option>
        <option value="WS">Wisconsin</option>
        <option value="NY">New York</option>
        <option value="TX">Texas</option>
        <option value="OR">Orlando</option>
    </select>

        <select id="chzn-select" data-placeholder="Choose a country..." style="width:350px;" multiple class="chzn-select" tabindex="4">
        <option value="AL">Alabama</option>
        <option value="AR">Arizona</option>
        <option value="CA">California</option>
        <option value="WS">Wisconsin</option>
        <option value="NY">New York</option>
        <option value="TX">Texas</option>
        <option value="OR">Orlando</option>
    </select>
</form> 
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script src="select2.js"></script>
<script src="chosen/chosen.jquery.js"></script>

<script>

    $(".chzn-select").chosen();

    $(document).ready(function() { $("#e1").select2(function() {
        placeholder: "Select State"
    }); });
</script>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T15:16:43.957

我在这方面遇到了很多麻烦，但设法让它工作。我的代码和你的代码之间的差异：

我的文档准备功能在我的脑海中，而不是我的身体中，我也只有 $("#e1").select2(); 没有内在功能。

您是否尝试过在浏览器中运行时，右键单击并选择查看源代码并打开您的 .js 和 .css 文件以确保它们对您的 html 可见？

最后对于 select2 你放了 multible 而不是 multiple

我选择了 binned，因为我无法让它工作，但 select 2 是建立在它之上的，所以我会去做。此外，由于它们是相互建立的，这可能会导致一些冲突，所以我会摆脱选择并尝试一下。

希望这可以帮助

ps：我已经以这种方式实现了它，但是现在当我从多项选择中删除选项时，它们从我的下拉选项中消失了，无法重新添加。这方面的例子不是很直接，希望有一些简单的例子来帮助这个有用的插件！

# jpa - Eclipselink - TableGenerator 的 allocationSize 属性

> ID：13427704
> 
> 赞同：2
> 
> 时间：2012-11-17T04:32:30.653
> 
> 标签：jpa, eclipselink

我正在使用`EclipseLink`一个小项目来记录用户活动。我有一个类可以捕获有关活动的详细信息，并且我正在使用表生成器策略来生成该类的主键 ID。

我面临的问题是`EclipseLink`（我将其称为*EL*）以 50 的增量分配主键，我理解这是`allocationSize`. 这是在同一个 JVM 周期内（即没有重新启动）。

我知道这`allocationSize`用于*EL*将在内存中预先分配的 ID 数量。我想使用这个功能，但*EL*似乎不是那样工作的。

只有当我将 更改`allocationSize`为*1*时，我才能让*EL*按顺序生成主键。

任何帮助将不胜感激...

我正在使用`EclipseLink` *2.3.0*。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T18:26:47.133

感谢大家的帮助。

我已经解决了我的问题。我手动管理 EntityManager 的生命周期和事务。我更改了我的代码，将 EntityManager 注入我的 EJB 并让容器处理事务。我已将 allocationSize 设置为 1000 并获得了所需的结果。再次感谢 vels4j、Chris 和 James 的帮助

# c# - 将大图像加载到图像控件中

> ID：13427707
> 
> 赞同：0
> 
> 时间：2012-11-17T04:33:00.590
> 
> 标签：c#, wpf, bitmapimage

我在 WPF 窗口上加载大图像以进行一些调整（如亮度和对比度），但是当我尝试加载大图像（3000x2000 或 4000x3000）时，我的图像会自动转换为较低的分辨率（通常为 1024x600）

```
Microsoft.Win32.OpenFileDialog openFileDialog = new Microsoft.Win32.OpenFileDialog();
openFileDialog.ShowDialog();

BitmapImage bitmap = new BitmapImage(new Uri(openFileDialog.FileName));

imageResolution.Content = bitmap.Width + "x" + bitmap.Height;//label to see dimensions
myImage.Source = bitmap;//image 
```

如何在 BitmapImage 对象中保持图像的原始分辨率？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-23T22:24:06.423

听起来很奇怪。尝试直接在 XAML 中设置 myImage.Source。

控件应保留原始图像

```
<Image x:Name="image1" Stretch="None" Source={Binding PathToImage}> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-23T22:28:36.740

尝试改用[ImageSource](http://msdn.microsoft.com/en-us/library/system.windows.media.imagesource.aspx)对象：

```
Microsoft.Win32.OpenFileDialog openFileDialog = new Microsoft.Win32.OpenFileDialog();
openFileDialog.ShowDialog();
ImageSource imageSource = new BitmapImage(new Uri(openFileDialog.FileName));
image1.Source = imageSource; 
```

# ios - 从 FBConnect 迁移到 Facebook sdk

> ID：13427710
> 
> 赞同：0
> 
> 时间：2012-11-17T04:33:41.400
> 
> 标签：ios, facebook

我想从 fbconnect 迁移到 facebook sdk。我的应用程序已经在 fbconnect 上运行。我可以简单地删除只是删除 fbconnect 文件（如 FB 请求、Facebook、FBDialog）文件并简单地添加 Facebook SDK 框架吗？

当我这样做时，我会收到如下错误：

1）没有 Facebook.h，没有 FBDialog.h ，没有 FBRequest.h 等等......

如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T05:46:43.247

简单地用以前的 FBConnect 文件替换框架是行不通的。他们现在使用“FBSession”概念登录并更改发布方法。

因此，您最好按照[此处](http://developers.facebook.com/docs/getting-started/facebook-sdk-for-ios/3.1/)的文档进行操作。

# expressionengine - 为什么“csrf_protection”不能在干净的 ExpressionEngine 安装上工作？

> ID：13427713
> 
> 赞同：1
> 
> 时间：2012-11-17T04:33:55.797
> 
> 标签：expressionengine, csrf

所以我第一次安装了EE。复制文件，创建数据库和用户，运行安装，一切正常。

接下来，我进入我的配置文件并设置：

```
$config['csrf_protection'] = TRUE; 
```

仅此而已……现在我无法登录控制面板！我收到“不允许执行您请求的操作。”</p>

我究竟做错了什么！？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T12:13:42.830

你为什么要在你的配置文件中设置它？我很确定`csrf_protecton`这是一个 CodeIgniter 设置，EE 没有正确支持。EE 有其他内置的安全措施来避免 CSRF 攻击。

# teamcity - TeamCity 测试中的相对路径

> ID：13427716
> 
> 赞同：2
> 
> 时间：2012-11-17T04:34:22.050
> 
> 标签：teamcity, mstest

在我的 MsTests 中，我必须在我的项目中访问并使用一个文件。所以我使用 Path.GetFullPath(@"......\name_of_file")

但是在运行构建时，我得到一个找不到文件的错误，因为路径的上下文是临时目录 (C:\TeamCity\buildAgent\temp\buildTmp) 而不是我所有文件所在的结帐目录 (C:\TeamCity\构建代理\工作\e87255825b2f3eb1)

有配置可以改变吗？或者更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T04:45:14.277

我找不到一个 TeamCity 选项来指定应该运行单元测试的目录。其他人也许可以在那里提供帮助。

但是，我通常将单元测试所需的文件作为嵌入式资源包含在内，以便在执行期间您可以确定该文件始终可以访问，无论它从何处运行。您可以轻松地`Stream`从嵌入式资源中获取 a，如果您需要使用仅采用文件名的 API，您可以将文件写入`Path.GetTempPath()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T17:28:04.623

我修改了我的测试以引用如下文件：

```
string currentDir = new System.Diagnostics.StackFrame(true).GetFileName();
var workingFile = new FileInfo(currentDir);
string fileContents = File.ReadAllText(workingFile.Directory + @"\ResourceFolder\MyFile.xml"); 
```

我知道这不是一个好方法，但这适用于我在本地和从 TeamCity 调用时。

# sql - 两个外键引用另一个表的主键

> ID：13427719
> 
> 赞同：1
> 
> 时间：2012-11-17T04:34:55.003
> 
> 标签：sql

所以我有两张桌子

```
Person(personID, first_name, last_name);
Relation(relationID, child_personID, parent_personID); 
```

personID 和relationID 都是主键。child_personID 和 parent_personID 都是外键。

我想查询，所以我有孩子和父母的名字和姓氏。

child.first_name child.last_name 和 parent.first_name, parent.last_name

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T04:42:41.470

解决此问题的一种方法是使用[连接](http://www.w3schools.com/sql/sql_join.asp)和[表别名](http://en.wikipedia.org/wiki/Alias_%28SQL%29)。像这样的东西：

```
select
    child.first_name,
    child.last_name,
    parent.first_name,
    parent.last_name
from relation r
    join person child on r.child_personID = child.id
    join person parent on r.parent_personID = parent.id 
```

# mysql - MySQL 约束 - 一组中的一列必须为非空？

> ID：13427720
> 
> 赞同：1
> 
> 时间：2012-11-17T04:35:02.890
> 
> 标签：mysql, foreign-keys, constraints

我有一个 MySql (InnoDb) 表，表示对多种类型的对象之一所做的评论。因为我使用的是[Concrete Table Inheritance](http://martinfowler.com/eaaCatalog/concreteTableInheritance.html)，所以下面显示的每种类型的对象（商店、类别、项目）都有一个不同的外键。对于每条记录，必须设置一个外键，另外两个必须为空。如何在 MySql 中指定此约束？

```
CREATE TABLE `tbl_comment` (
  `comment_id` bigint(20) NOT NULL AUTO_INCREMENT,  /* primary key */
  `_user_id` bigint(20) NOT NULL,   /* foreign key to user table - always set (NOT NULL) */

  `store_id` int(11) DEFAULT NULL,  /* foreign key to store table */
  `category_id` bigint(20) DEFAULT NULL,  /* foreign key to category table */
  `item_id` bigint(20) DEFAULT NULL,  /* foreign key to item table */
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T08:28:04.777

尝试添加以下触发器

```
CREATE TRIGGER on_insert AFTER INSERT ON `tbl_comment`
FOR EACH ROW
BEGIN
   SET NEW.category = NULL, NEW.item = NULL;
END; 
```

# jquery - jQuery 语言切换器

> ID：13427723
> 
> 赞同：5
> 
> 时间：2012-11-17T04:35:32.233
> 
> 标签：jquery

我想建立一个具有两种语言内容的网站。我想使用 jQuery 进行语言切换。我的想法是这样的：

而不是在 HTML 页面中包含实际内容：

```
<div>Hello there</div> 
```

我想使用类：

HTML：

```
<div class="hello_EN"></div> 
```

JS（我不擅长 JS；我已经将它与一些 PHP 结合起来，所以我可以让自己理解）：

```
var EN = new array('hello_EN' => 'Hello there');
foreach($EN as $class => $content)
$(".$class").text("$content"); //this should populate all my HTML classes with its content 
```

然后，我必须有我的第二个语言数组：

```
var RO = new array('hello_RO' => 'Salut'); 
```

现在，切换：

```
$("#change_to_RO").click(function() {
       $(EN).replaceWith(RO);
}); 
```

我应该如何处理这个？谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-17T04:59:09.213

最好*不要*从 JavaScript 中解决这个问题。话虽这么说，作为一项学术和学习练习，这只是一个粗略的想法，告诉你如何去做这样的事情：

```
<select id="lang">
    <option>English</option>
    <option>Portuguese</option>
    <option>Russian</option>
</select>
<span data-translate="_hello">Hello</span>, 
<span data-translate="_january">January</span>!​ 
```

```
// Some variables for later
var dictionary, set_lang;

// Object literal behaving as multi-dictionary
dictionary = {
    "english": {
        "_hello": "Hello",
        "_january": "January"
    },
    "portuguese": {
        "_hello": "Oie",
        "_january": "Janeiro"
    },
    "russian": {
        "_hello": "привет",
        "_january": "январь"
    }
};

$(function () {

    // Lets be professional, shall we?
    "use strict";

    // Function for swapping dictionaries
    set_lang = function (dictionary) {
        $("[data-translate]").text(function () {
            var key = $(this).data("translate");
            if (dictionary.hasOwnProperty(key)) {
                return dictionary[key];
            }
        });
    };

    // Swap languages when menu changes
    $("#lang").on("change", function () {
        var language = $(this).val().toLowerCase();
        if (dictionary.hasOwnProperty(language)) {
            set_lang(dictionary[language]);
        }
    });

    // Set initial language to English
    set_lang(dictionary.english);

});​ 
```

小提琴：http: [//jsfiddle.net/MBRG4/5/](http://jsfiddle.net/MBRG4/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-18T11:52:30.857

在 Days 中搜索了一个解决方案，可以为我会做的一个小应用程序切换语言很棒。
所以 SEO 友好你的朋友说。哦对！！我在 html 中有两种语言，所以它加载得很好。我用类切换语言（意味着这个开关首先在没有任何 JS 的情况下工作）

```
<style>  
   div.de,  :lang(de) {  display: none;  }   
</style>

<!-- Javascripts -->
<script src="http://code.jquery.com/jquery-1.10.2.js"></script>

</head>   
<body  > 

<button id="german">German</button>
<button id="english">English</button>

<br><br>

<a href="" lang="de">de</a>
<a href="" lang="en">en</a>

<p lang="de">Deutscher Text</p>
<p lang="en">Englischer Text</p>

<div class="de">Deutsches Div</div> 
<div class="en">Englisches Div</div>

<div class="de"> <iframe width="560" height="315" src="http://www.youtube.com/embed/ZQL7d3k_yh0" frameborder="0" allowfullscreen></iframe>  </div>
<div class="en"> <iframe width="560" height="315" src="http://www.youtube.com/embed/NWfbtFpnCM4" frameborder="0" allowfullscreen></iframe>  </div>

<hr>

<script>
  $( "#german" ).click(function() {
    $("#german").attr('id','notactive')  
      $(".en, :lang(en)").fadeOut('slow', function(){
        $(".de, :lang(de)").fadeIn('slow');
      });  
  });

  $( "#english" ).click(function() {
    $("#english").attr('id','notactive')  
      $(".de, :lang(de)").fadeOut('slow', function(){
        $(".en, :lang(en)").fadeIn('slow');
      });  
  });    

</script> 
```

# h2 - H2数据库批量上传

> ID：13427726
> 
> 赞同：4
> 
> 时间：2012-11-17T04:36:04.403
> 
> 标签：h2

我的任务是将一些数据从 mysql 加载到 h2。我们必须在 UI 级别渲染一棵树，该树有大约 50000 个节点。因此认为从 H2 读取可能会减少延迟。

为此，我必须将大约 1M（每个客户都有自己的树）记录从 MySQL 加载到 H2。加载部分由应用程序处理。它从 MySQL 读取并对 H2 进行批量更新。它在一次执行时处理 40000 条记录。但是随着迁移过程的继续，服务器内存不足。

我尝试使用“SET LOG 0, SET LOCK_MODE 0, SET UNDO_LOG 0”来有效地加载数据，但服务器内存不足仍然相同。

我为堆设置了 512M 内存。

H2 文档说使用“create table ... as select ...”来更快地加载数据，但我认为这不会减少加载时间，因为应用程序必须读取 1M 记录并创建 CSV 文件。

有人可以建议一种方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T08:31:29.580

To avoid having to create CSV files, you could create [linked tables](http://h2database.com/html/advanced.html#linked_tables) using the [`CREATE LINKED TABLE`](http://h2database.com/html/grammar.html#create_linked_table) statement or using [`CALL LINK_SCHEMA`](http://h2database.com/html/functions.html#link_schema). Then copy the data using `CREATE TABLE ... AS SELECT`.

As for the memory problem, do you create an in-memory database? If yes, you could conserve memory (at the expense of some speed) if you use the [in-memory file system, or the compressed in-memory file system](http://h2database.com/html/advanced.html#file_system): `jdbc:h2:memFS:test` or `jdbc:h2:memLZF:test` instead of `jdbc:h2:mem:test`. If you are not using an in-memory database then I'm not sure what the problem is.

# javascript - 如何在数组变量中运行函数数组

> ID：13427737
> 
> 赞同：0
> 
> 时间：2012-11-17T04:39:00.733
> 
> 标签：javascript, jquery

我正在尝试运行我放在变量上的一系列函数。

这是一个（**[演示](http://jsfiddle.net/fGaHR/5/)**）

**代码：**

```
function pass_me(x) {
    alert(x);        
};

var colors = new Array();
var colors = ["pass_me('yellow');", "pass_me('green');", "pass_me('blue');"]

for(var i = 0; i <= colors.length; i++) {
    window[colors[i]]();
}​ 
```

不幸的是，我无法让它运行。知道我的代码有什么问题吗？

谢谢

* * *

函数数组变量背后的故事是因为我从动态元素中复制了它。这样它只会运行页面中已有的功能。因此，如果 pass_me("red") 不存在，它将不会运行。

例子：

```
<img src="img/something.jpg" ondblclick="pass_me("yellow")" />
<img src="img/something.jpg" ondblclick="pass_me("green")" />
<img src="img/something.jpg" ondblclick="pass_me("blue")" /> 
```

然后我只使用：

```
jQuery("td img").each(function(){
colors.push(jQuery(this).attr("ondblclick"));
}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T04:43:40.173

如果你想执行一个 javascript 字符串，你必须使用 eval 来告诉 javascript 将你的字符串解析成 javascript。这通常不是编写 javascript 的最佳方式。

为了避免使用 eval，我建议这样做：

```
function pass_me(x) {
    alert(x);        
};

var colors = ["yellow", "green", "blue"];

for(var i = 0; i <= colors.length; i++) {
    pass_me(colors[i]);
}​ 
```

或者，如果你真的想把函数放在数组中，这样你就可以在数组中有不同的函数，你可以这样做：

```
function pass_me(x) {
    alert(x);        
};

var colors = [{fn:pass_me, color: "yellow"}, {fn:pass_me, color: "green"}, {fn:pass_me, color: "blue"}];

for(var i = 0; i <= colors.length; i++) {
    colors[i].fn(colors[i].color);
}​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T04:49:52.503

[演示](http://jsfiddle.net/fGaHR/8/)

```
function pass_me(x) {
    alert(x);        
}

var colors = ["yellow", "green", "blue"];

for(i = 0; i < colors.length; i++) {
    pass_me(colors[i]);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-17T05:00:14.377

将数组成员更改为如下处理程序：

```
function pass_me(x) {
    alert(x);        
};

var colors = [{ handler: pass_me, args: ['yellow'] }, { handler: pass_me, args: ['green'] }, { handler: pass_me, args: ['blue'] }];

for(var i = 0; i < colors.length; i++) {
    colors[i].handler.apply(this, colors[i].args);
}; 
```

这样，您可以在同一个数组中拥有多个处理程序，每个处理程序具有不同的参数。或者在调用之前初始化成员，因为成员的数据类型是字符串，而不是函数。像这样：

```
function pass_me(x) {
    alert(x);        
};

var colors = ["pass_me('yellow')", "pass_me('green')", "pass_me('blue')"];

for(var i = 0; i < colors.length; i++) {
    eval(colors[i]);
}; 
```

希望它可以帮助你。

干杯

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-17T07:13:08.063

在这里使用可能是安全的`eval`，但这是另一种解决方案，我个人觉得它更干净一些：

事件处理程序通过 HTML 属性绑定。大多数 HTML 属性值是相应 DOM 属性值的基础。在这种情况下，每个`img`DOM 元素都有一个属性`ondblclick`，其函数体是 HTML 属性的值。

意味着 HTML 等同于：

```
imgElement.ondblclick = function() {
    pass_me('yellow');
}; 
```

因此，如果您想“收集”这些函数，您只需获取对事件处理程序的引用：

```
var handlers = jQuery("td img").map(function(){
    return this.ondblclick;
}).get(); 
```

稍后给他们打电话：

```
for(var i = 0, l = handlers.length; i < l; i++) {
    handlers[i]();
} 
```

**但是**，如果您只想执行所有处理程序而不实际单击图像，则可以在它们上触发事件：

```
jQuery("td img").trigger('dblclick'); 
```

这将执行该事件的所有事件处理程序`dbclick`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-17T04:41:40.053

你需要尝试

```
eval(colors[i]); 
```

因为它是字符串而不是函数

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-17T04:46:55.383

也许您正在寻找匿名函数：

```
function pass_me(x) {
    alert(x);        
}

var colors = [
    function(){ return pass_me('yellow'); }, 
    function(){ return pass_me('green'); },
    function(){ return pass_me('blue'); }
];

for(var i = 0; i < colors.length; i++){
    colors[i]();
} 
```

# r - R中因子实验的无约束设计矩阵

> ID：13427740
> 
> 赞同：9
> 
> 时间：2012-11-17T04:39:39.460
> 
> 标签：r, statistics

我想为 R 中的阶乘实验创建一个无约束的设计矩阵，以下代码为我提供了所需的矩阵。但是代码需要`model.matrix`为每个因素以及截距项单独的命令。我很好奇单个班轮是否可以获得相同的结果。谢谢

```
y <- c(55, 56, 57, 53, 54, 55, 51, 52, 53, 61, 62, 63)
N <- gl(n = 2, k = 6, length = 2 * 6
        , labels = c("Low", "High")
        , ordered = FALSE)
P <- gl(n = 2, k = 3, length = 2 * 6
        , labels = c("Low", "High")
        , ordered = FALSE)
Data <- data.frame(y, N, P)

X <-
  cbind(
      model.matrix(object = y ~ 1,        data = Data)
    , model.matrix(object = y ~ -1 + N,   data = Data)
    , model.matrix(object = y ~ -1 + P,   data = Data)
    , model.matrix(object = y ~ -1 + N:P, data = Data)
    )

print(x = X) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-05T20:59:31.410

我认为关键是将所有对比设置为 FALSE。我想从技术上讲，这可能是一条线……它只是一条很长的线。

```
model.matrix(y ~ N +P + N:P, data=Data, 
      contrasts.arg = lapply(Data[,sapply(Data, is.factor)], 
                             contrasts, contrasts=FALSE))

   (Intercept) NLow NHigh PLow PHigh NLow:PLow NHigh:PLow NLow:PHigh NHigh:PHigh
1            1    1     0    1     0         1          0          0           0
2            1    1     0    1     0         1          0          0           0
3            1    1     0    1     0         1          0          0           0
4            1    1     0    0     1         0          0          1           0
5            1    1     0    0     1         0          0          1           0
6            1    1     0    0     1         0          0          1           0
7            1    0     1    1     0         0          1          0           0
8            1    0     1    1     0         0          1          0           0
9            1    0     1    1     0         0          1          0           0
10           1    0     1    0     1         0          0          0           1
11           1    0     1    0     1         0          0          0           1
12           1    0     1    0     1         0          0          0           1
attr(,"assign")
[1] 0 1 1 2 2 3 3 3 3
attr(,"contrasts")
attr(,"contrasts")$N
     Low High
Low    1    0
High   0    1

attr(,"contrasts")$P
     Low High
Low    1    0
High   0    1 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-31T09:46:15.350

不是一个班轮，但可能更简单一些：

```
contrasts(N, nlevels(N)) <- diag(nlevels(N))
contrasts(P, nlevels(P)) <- diag(nlevels(P))
Data2 <- data.frame(y, N, P)
X2 <- model.matrix(y ~ 1 + N + P + N:P, data=Data2) 
```

# javascript - javascript中具有异步回调模式的无限循环

> ID：13427741
> 
> 赞同：6
> 
> 时间：2012-11-17T04:39:42.380
> 
> 标签：javascript, node.js, design-patterns, functional-programming, tail-recursion

假设我想向服务器发送一个异步 AJAX 请求，当它响应时发送另一个请求并永远重复：

```
function sendXHR(url, callback) {
    // Send XMLHttpRequest to server and call callback when response is received
}

function infinite() {
    sendXHR('url/path', infinite);
}

infinite(); 
```

我假设在这里我们会很快耗尽堆栈空间，那么我该怎么做（不阻塞）？

传递回调而不是使用的模式`return`在`node.js`. 人们如何创建无限循环？我不相信大多数 JS 引擎会进行任何尾调用优化。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-17T04:59:45.220

如果您的 ajax 调用是异步的，则不会用完堆栈空间，因为`sendXHR()`在发送 ajax 请求后立即返回。稍后，当 ajax 响应到达时，回调会被调用。没有堆栈建立。

* * *

如果您的 ajax 调用是同步的，并且您希望允许其他事件以及在 javascript 环境中不发生的事情，那么您可以这样：

```
function sendXHR(url, callback) {
    // Send XMLHttpRequest to server and call callback when response is received
}

function infinite() {
    sendXHR('url/path');
    setTimeout(infinite, 1);
}

infinite(); 
```

# ios - 如果应用程序被杀死，则取消计划的 UILocalNotification

> ID：13427745
> 
> 赞同：1
> 
> 时间：2012-11-17T04:40:06.203
> 
> 标签：ios, uilocalnotification, kill

我的应用程序中会有一个计划，但即使我已经杀死了应用`UILocalNotification`程序，我发现计划的弹出。`UILocalNotification`我认为这不是我的应用程序的预期行为。我想知道`UILocalNotification`当用户杀死我的应用程序时是否可以取消预定。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T05:00:10.290

不幸的是，没有 - 有关[应用程序状态和多任务处理](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html)的文档非常清楚，[`-[UIApplicationDelegate applicationWillTerminate:]`](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIApplicationDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UIApplicationDelegate/applicationWillTerminate%3a)如果您的应用程序在后台，则不会调用您使用的方法。

# css - 3 个 div 嵌套在 div 居中，但在没有时充当边距或填充

> ID：13427746
> 
> 赞同：0
> 
> 时间：2012-11-17T04:40:06.863
> 
> 标签：css, center, html

我有三个 div 嵌套在另一个 div 中。这三个 div 具有 css display:inline:block ，因此它们就像浮动一样，但每个 div 之间有一个间隙，就好像它们上有边距或填充一样。

这是HTML：

```
 <div id="lowerContentHeaderContainer">
      <div id="borderLowerContentL"></div><!-- borderLowerContentL -->
      <div id="textLowerContentM">some title goes here</div><!-- textLowerContent -->
      <div id="borderLowerContentR"></div><!-- borderLowerContentR -->
    </div><!-- lowerContentHeaderContainer --> 
```

这是CSS：

```
#lowerContentHeaderContainer {
position:relative;
width:746px;
text-align:center;
}
#borderLowerContentL {
position:relative;
display:inline-block;
width:6px;
height:39px;
background-image:url(img/SideBar_MiddleTitle_Area_01.png);
background-repeat:no-repeat;
border:1px solid #000;
}
#textLowerContentM {
position:relative;
display:inline-block;
height:39px;
background-image:url(img/SideBar_MiddleTitle_Area_02.png);
background-repeat:repeat-x;
border:1px solid #000;
}
#borderLowerContentR {
position:relative;
display:inline-block;
width:6px;
height:39px;
background-image:url(img/SideBar_MiddleTitle_Area_04.png);
background-repeat:no-repeat;
border:1px solid #000;
} 
```

![在此处输入图像描述](../Images/7f8c861766ac0f1aac9e7770e50aa8db.png)

在嵌套的 div 周围添加了边框，因此您可以看到我在说什么。此外，中心 div 没有像应有的那样水平对齐。

任何想法如何摆脱 div 之间的空间并正确对齐中心 div？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T09:39:40.463

浏览器会将换行符视为空格，除非它们是浮动的。

html

```
<div id="lowerContentHeaderContainer"><div id="borderLowerContentL">&nbsp;</div><div id="textLowerContentM">some title goes here</div><div id="borderLowerContentR">&nbsp;</div></div>​ 
```

[http://jsfiddle.net/kudoslabs/CTpYH/](http://jsfiddle.net/kudoslabs/CTpYH/)

# objective-c - 分割获取的结果控制器会中断搜索显示

> ID：13427748
> 
> 赞同：7
> 
> 时间：2012-11-17T04:40:57.500
> 
> 标签：objective-c, ios, xcode, cocoa-touch, nsfetchedresultscontroller

我对此感到非常困惑，无法弄清楚我错过了什么。也许还有很多关于核心数据的知识。

这是我的 Fetched Results 控制器，它显示一个无节表，但我的搜索显示控制器工作：

```
self.fetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:request
                                                                    managedObjectContext:self.buckyballDatabase.managedObjectContext
                                                                      sectionNameKeyPath:nil
                                                                               cacheName:nil]; 
```

鉴于一旦我应用*sectionNameKeyPath*来添加部分。添加了部分，但我的搜索显示控制器已损坏，引发以下错误：

```
*** Assertion failure in -[UITableViewRowData rectForRow:inSection:], /SourceCache/UIKit_Sim/UIKit-2372/UITableViewRowData.m:1630
*** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'request for rect at invalid index path (<NSIndexPath 0x7481040> 2 indexes [0, 1])' 
```

**这是我的表格视图数据源实现**，其中*过滤*列表是一个 NSArray：-

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    if (tableView == self.tableView)
    {
        return [[self.fetchedResultsController sections] count];
    }
    else
    {
        return 1;
    }
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section 
{
    if (tableView == self.tableView)
    {
        return [[[self.fetchedResultsController sections] objectAtIndex:section] numberOfObjects];
    }
    else
    {
        return [self.filteredList count];
    }
}

- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
{
    if (tableView == self.tableView)
    {
        return [[[self.fetchedResultsController sections] objectAtIndex:section] name];
    }
    else
    {
        return nil;
    }
}

- (NSInteger)tableView:(UITableView *)tableView sectionForSectionIndexTitle:(NSString *)title atIndex:(NSInteger)index
{
    if (tableView == self.tableView)
    {
        if (index > 0)
        {
            return [self.fetchedResultsController sectionForSectionIndexTitle:title atIndex:index-1];
        }
        else
        {
            self.tableView.contentOffset = CGPointZero;
            return NSNotFound;
        }
    }
    else
    {
        return 0;
    }
}

- (NSArray *)sectionIndexTitlesForTableView:(UITableView *)tableView
{
    if (tableView == self.tableView)
    {
        NSMutableArray *index = [NSMutableArray arrayWithObject:UITableViewIndexSearch];
        NSArray *initials = [self.fetchedResultsController sectionIndexTitles];
        [index addObjectsFromArray:initials];
        return index;
    }
    else
    {
        return nil;
    }
} 
```

*在下一行的cellForRowAtIndexPath*中引发异常：-

```
UITableViewCell *cell = [self.tableView dequeueReusableCellWithIdentifier:CellIdentifier
                                                             forIndexPath:indexPath]; 
```

请询问是否需要提供更多信息..我在这个问题上摸不着头脑..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T06:24:15.223

尝试使用`-dequeueReusableCellWithIdentifier:`而不是`-dequeueReusableCellWithIdentifier:forIndexPath:.`

# iphone - 在 Storyboard 中使用静态单元格时更改 UITableViewCells 的高度

> ID：13427749
> 
> 赞同：1
> 
> 时间：2012-11-17T04:41:00.367
> 
> 标签：iphone, ios, uikit, storyboard

在中使用静态单元格时是否可以调整大小`UITableViewCells`或部分？`UITableView``Storyboards`

我希望某些单元格比其他单元格短，就像联系人应用程序具有较短的单元格一样，以便为图片腾出空间。我正在尝试使用情节提要中的静态单元而不是以编程方式来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T04:56:44.427

在您的表视图控制器中，实现以下方法：

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {
    if (indexPath.section == 0) {
        if (indexPath.row == 0) {
            // The first cell
            return 25.0;
        else if (indexPath.row == 1) {
            return 44.0;
        }
    }
    // Default
    return 30.0;
} 
```

# algorithm - 保持拓扑排序树无环增长的最有效方法是什么？

> ID：13427750
> 
> 赞同：2
> 
> 时间：2012-11-17T04:41:14.333
> 
> 标签：algorithm

我知道至少有两种方法。

一种方法是每次向非循环树添加边时，遍历必要的顶点。

缺点是随着树变大，遍历过程需要越来越多的时间。

另一种方法是被动检查添加的边缘是否创建了无限循环。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T05:29:21.207

我不确定拓扑排序在哪里出现，所以这里有一个答案，你只是在节点之间创建链接。

一开始假设您只有一组断开连接的节点。当您添加链接时，您通过链接它们将节点变成树。如果您创建一个链接来添加两个先前独立的树，那么您并没有创建一个循环。如果在已经位于同一棵树中的两个节点之间添加链接，则会创建一个循环。因此，您可以通过检查要链接的两个节点是否已经在同一棵树中来检查循环。

这是联合查找，在[http://en.wikipedia.org/wiki/Disjoint-set_data_structure](http://en.wikipedia.org/wiki/Disjoint-set_data_structure)中描述了一种有效的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T06:54:43.650

我对您提到拓扑排序感到困惑，因为如果您进行拓扑排序，您将免费获得循环检测，这在[http://en.wikipedia.org/wiki/Topological_sort](http://en.wikipedia.org/wiki/Topological_sort)等大量地方都有解释。您还将从[http://en.wikipedia.org/wiki/Connected_component_%28graph_theory%29#Algorithms](http://en.wikipedia.org/wiki/Connected_component_%28graph_theory%29#Algorithms)获得周期检测。

考虑到这一点，我想知道您是否正在尝试在有向图中进行在线循环检测。我想我曾经在 Unix 中检测到用户代码产生的死锁的东西中看到了一些代码——它是迭代的，并且依赖于一个进程只能等待一个事件的事实。我认为这对应于您的“遍历必要的顶点”。

似乎有许多方案依赖于维护拓扑排序顺序。然后，如果您添加与顺序一致的链接，您就知道您没有引入循环。问题是，如果您添加的链接与订单不一致，您必须检查周期并维护订单。[http://homepages.ecs.vuw.ac.nz/~djp/files/tr0703.pdf](http://homepages.ecs.vuw.ac.nz/~djp/files/tr0703.pdf)中描述了三种这样的算法

# perl - 在 Perl 中比较散列键并在 csv 中打印

> ID：13427753
> 
> 赞同：1
> 
> 时间：2012-11-17T04:41:51.723
> 
> 标签：perl

我有两个包含以下数据的 csv 文件：

```
gt1/sd2    34      3
gt1/sd3    67      4
gt1/sd4    20     -9 
```

和第二个包含数据的 csv 文件：

```
gt1/sd2    9    6
gt1/sd5    10   8
gt1/sd9    21   10 
```

现在我想比较每个 csv 的第一列，看看它们是否相同，然后将两个 csv 列打印到一个 csv 中。

我尝试使用将这些文件读入哈希。我的代码现在看起来像这样。当发现两个哈希的键相等时，我有点卡住了如何编写输出 csv。

```
my %hash1;
while (my $line = <file1> ) {
    $line =~ s/\s*\z//;
    my @array = split /,/, $line;
    my $key = shift @array;
    $hash1{$key} = \@array;
}
my %hash2;
while (my $line1 = <file2> ) {
    $line1 =~ s/\s*\z//;
    my @array1 = split /,/, $line1;
    my $key1 = shift @array1;
    $hash2{$key1} = \@array1;
}
while (my ($k,$v)=each %hash1){
    for ( keys %hash1 ) {
        unless ( !exists $hash2{$_} ) {
            print "$_: found in second hash\n";
            next;
        }
        print "$k $v\n"
    }
} 
```

对于此示例，输出 csv 应具有以下内容：

```
gt1/sd2    34      3    gt1/sd2    9    6
gt1/sd3    67      4    NotFound NotFound NotFound
gt1/sd4    20     -9  NotFound   NotFound NotFound 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T08:38:48.283

最好用于[`Text::CSV`](http://metacpan.org/module/Text%3a%3aCSV)解析 CSV 文件：

```
#!/usr/bin/env perl

use strict;
use warnings;

use Text::CSV;

my $csv = Text::CSV->new( { allow_whitespace => 1, sep_char => "\t" } );

open my $fh1, '<', 'file1' or die "Error opening file: $!";
open my $fh2, '<', 'file2' or die "Error opening file: $!";

my %key;
while ( my $row = $csv->getline($fh2) ) {
    $key{ $row->[0] } = [ $row->[1], $row->[2] ];
}

while ( my $row = $csv->getline($fh1) ) {
    my $gt = $row->[0];
    my @columns;
    if ( exists $key{$gt} ) {
        @columns = ( @$row, $gt, @{ $key{$gt} } );
    }
    else {
        @columns = ( @$row, ('Not Found') x 3 );
    }
    printf "%-10s\t%d\t%d\t%-10s\t%-10s\t%s\n", @columns;
} 
```

### 输出：

```
gt1/sd2         34      3       gt1/sd2         9               6
gt1/sd3         67      4       Not Found       Not Found       Not Found
gt1/sd4         20      -9      Not Found       Not Found       Not Found 
```

# c# - 获取当前键光标位置文本

> ID：13427754
> 
> 赞同：0
> 
> 时间：2012-11-17T04:42:24.697
> 
> 标签：c#, key, console.readkey

所以这是基本的，但我似乎找不到可以做到这一点的功能。

假设我从控制台窗口的 0,0 开始有以下文本

```
123456789
   _ 
```

假设我将光标位置设置为 0,3，即“4”，然后我使用 Console.CursorLeft 来获取仍然是 0,3 的当前位置。

我现在将它设置为 0,2，它位于“3”上，我如何将当前光标位置的文本读入字符串/字符？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T04:47:26.903

使用`Cursor.Position`属性。Position 属性与属性相同`Control.MousePosition`。
喜欢这个：就像一个一般的例子

```
this.Cursor = new Cursor(Cursor.Current.Handle);
   Cursor.Position = new Point(Cursor.Position.X - 50, Cursor.Position.Y - 50); 
```

# ios - 在情节提要中使用静态单元格时从分组的 uitableviewcells 中删除边框

> ID：13427762
> 
> 赞同：1
> 
> 时间：2012-11-17T04:43:37.457
> 
> 标签：ios, storyboard

在情节提要中使用静态单元格时，有没有办法删除组样式中的单元格所具有的所有寄宿生？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T05:28:48.703

尝试这个，

```
 cell.backgroundView = [[UIView alloc] initWithFrame:cell.backgroundView.frame];// you can initialize with frame CGRectZero as well. 
```

这个对我有用。

# canvas - Jqplot - 小饼图

> ID：13427768
> 
> 赞同：1
> 
> 时间：2012-11-17T04:44:03.640
> 
> 标签：canvas, jqplot, pie-chart

我正在使用 jqplot 来显示图形/图表。我想显示一个小饼图。

所以我已将 div 的“高度 x 宽度”固定为 100 x 100。这是饼图的显示方式。

![在此处输入图像描述](../Images/a5a28687431098d96f4e576a640f8591.png)

馅饼周围有额外的空格/填充物。我不想要那个。另外，如何从背景中删除画布。这样只显示饼图。

任何帮助，将不胜感激。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T06:11:49.747

要删除背景（画布），您需要设置以下内容：

网格：{背景颜色：'透明'，drawBorder：假，阴影：假}

这将删除背景画布（也是它的边框阴影）以及饼图的阴影。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T14:52:50.173

从[jqplot 文档](http://www.jqplot.com/docs/files/plugins/jqplot-pieRenderer-js.html#%24.jqplot.PieRenderer.padding)：

> $.jqplot.PieRenderer 插件渲染器绘制饼图。 饼图和绘图边缘、图例等之间的
> **属性padding padding。**

# iphone - 从 UIToolbar 中扩展 UIView？

> ID：13427771
> 
> 赞同：0
> 
> 时间：2012-11-17T04:44:13.950
> 
> 标签：iphone, objective-c, ios

我有一个`UeIView`子类作为`UIToolbar's`按钮项之一。当用户点击它时，我希望它扩展出来`UIToolbar`并向用户显示一些选项。问题是，`UIToolbar`没有让`UIView`现在出现`subviews`在`toolbar's`框架之外。我`ClipToBounds`到处都设置为 NO，所以这不是问题。
关于如何处理这种情况的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T04:59:03.097

在像下面这样`UIView`的方法中，在设置框架之后取一个名为 viewOption 的名称。`viewDidLoad:`

```
viewOption.frame = CGRectMake(0, yourToolBar.frame.origin.y, viewOption.frame.size.height, viewOption.frame.size.height);  /// define height and width which you want here 
```

然后在按钮事件中编写此代码，您的视图会显示动画

```
-(IBAction)yourToolBarButton_Clicked:(id)sender
{
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:0.3];
     viewOption.frame = CGRectMake(0, 100, viewOption.frame.size.height, viewOption.frame.size.height);/// here set y as you want to display in view 
    [UIView commitAnimations];
} 
```

# database-design - 如果依赖于动态列来设计数据库

> ID：13427772
> 
> 赞同：0
> 
> 时间：2012-11-17T04:44:15.333
> 
> 标签：database-design

在我的项目中，“admin”可以动态创建文本字段（使用jsp + javascript）并输入可以在文本字段中输入数据以进行保存。在后端我必须将它们保存在数据库中。这里的问题是

**1）我们如何根据管理员正在创建的文本字段动态创建列。就像如果他正在创建 5 个文本字段，那么我们应该在数据库中创建 5 列，如果他使用 10 列，我们应该做 10 列。**

我在 mysql、jsp、struts、hibernate 中这样做

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T04:56:04.560

如果您使用的是关系存储，那么这些会针对可变行而不是列进行优化。IE。考虑将变量数放在行而不是列中。

我的建议只是有一个标题表+一个详细信息表。

然后标题是（1），细节是多变的。那么您只需要详细信息中的 4 列

```
detail_id (pk), header_id (fk), detail_item_no, detail_value 
```

和标题

```
header_id (pk), .. any other items that are in all types... 
```

并为每个标题行添加任意数量的行。如果需要 10，则 detail_item_no 从 1 变为 10，如果需要 5，则 detail_item_no 从 1 变为 5

缺点是获取详细信息的查询稍微复杂一些，因为它涉及简单的连接而不是简单的选择。

OTOH，如果您现在只有 20 列，那么只需创建一个具有该列数的表，并保留未使用的列。

# html - 是否有可以使我的背景图片透明而我的文本不透明的 HTML 代码？

> ID：13427774
> 
> 赞同：2
> 
> 时间：2012-11-17T04:44:48.240
> 
> 标签：html, css, background-image

好的，所以我一直在为我的教育专业需要满足的技术课程输入一些 HTML 代码。这就是我的背景：

```
body {
    background-image:url('islandbeach.jpg');
    background-repeat:repeat;
    background-position:center;
    background-attachment:fixed;
    background-size:cover;
} 
```

现在，我想让我的背景透明或褪色，这样我就可以看到我拥有的文本和其他图像。背景颜色太鲜艳，不用眯着眼睛就能看到文字。是否有任何 HTML 代码可以为我做到这一点？我不是这方面的专家，我一直在按照我的教授告诉我的一切去做，如果你有答案，请逐步解释。非常感谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T04:56:33.763

这是一个简单的技巧，您可以使用 :after 属性进行操作。

**CSS代码**

```
 body:after {
            content: "";
            background-image:url('http://www.w3schools.com/css/klematis.jpg');
            background-repeat:repeat;
            background-position:center;
            background-attachment:fixed;
            background-size:cover;
            opacity: 0.5;
            top: 0;
            left: 0;
            bottom: 0;
            right: 0;
            position: absolute;
            z-index: -1;
        } 
```

js bin 演示 [http://jsbin.com/welcome/50098/](http://jsbin.com/welcome/50098/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T05:04:50.117

尝试这个

```
.bg {
    width:280px;
    height:100px;
    position:relative;
    display:block;
}

.bg:after {
    background: url(https://www.google.co.in/images/srpr/logo3w.png);
    opacity: .5;
    width:280px;
    height:100px;
    top: 0;
    left: 0;
    position: absolute;
    z-index: -1;
    content: "";
} 
```

这是[jsfiddle 文件](http://jsfiddle.net/HR4dU/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-17T05:17:54.820

选项 1：使用褪色背景，以便您将编写的文本或您使用的图像可读。

选项 2：您的 Body 标签具有图像，并且带有 bgopc 类的 div 将位于其之上，白色并降低不透明度......因此您的图像将变得透明。现在其他具有 id 容器的 div 将充当您的图像和内容的容器。

```
<body>
   <div class="bgopc">&nbsp;</div>
   <div id=container>Add your Text and Images inside this container </div>
</body> 
```

现在 CSS 将是

```
body {background-image:url('islandbeach.jpg');background-repeat:repeat;background-position:center;background-attachment:fixed;background-size:cover;}
.bgopc{max-height:100%;background:#fff;position:absolute;top:0;left:0;width:100%;
height:100%;opacity:0.4;filter:alpha(opacity=40);z-index:1}
#container{z-index:2;position:relative} 
```

我希望它能解决你的问题。

# jquery - 从 jquery 片段中删除函数的困难

> ID：13427781
> 
> 赞同：0
> 
> 时间：2012-11-17T04:46:40.013
> 
> 标签：jquery, css

我正在尝试摆脱一个在脚本忙于在新内容中进行 ajax 处理时附加加载 gif 的函数，但我一直在破坏脚本，所以我将它发布在这里希望有人可以为我正确编辑它. （我想摆脱与#load 有关的所有内容，并保持其他所有内容不变。）

```
 $('#header_nav_content_container a, a.scroll_to_top, a.clear_banner, a.desire').not('.exception').click(function(){ 

    var toLoad = $(this).attr('href')+' #content';
    $('#content').hide(1555,'easeInOutQuint',loadContent);  
    $('#load').remove();
    $('body').append('<span id="load">LOADING...</span>');
    $('#load').fadeIn(888);
    window.location.hash = $(this).attr('href').substr(0,$(this).attr('href').length-0);
    function loadContent() {
        $('#content').load(toLoad,'',showNewContent);  
    }
    function showNewContent() {
        $('#content').show(777,'',hideLoader);
    }
    function hideLoader() {
        $('#load').fadeOut(888);
    }
    return false;

}); 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T04:53:44.427

好吧，我想通了。我会在这里发布它，因为我知道很多人都在使用相同的脚本（来自 nettuts 的“加载和动画内容”），所以有人可能想知道如何摆脱脚本的加载部分。

```
 $('#header_nav_content_container a, a.scroll_to_top, a.clear_banner, a.desire').not('.exception').click(function(){ 

    var toLoad = $(this).attr('href')+' #content';  
    $('#content').hide(1555,'easeInOutQuint',loadContent);  
    window.location.hash = $(this).attr('href').substr(0,$(this).attr('href').length-0);
    function loadContent() {
        $('#content').load(toLoad,'',showNewContent);  
    }
    function showNewContent() {
        $('#content').show(777,'');  //problem: I needed to remove "hideLoader"
    }
    return false;

}); 
```

感谢大家。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T04:55:51.733

```
 $('#header_nav_content_container a, a.scroll_to_top, a.clear_banner, a.desire').not('.exception').click(function(){ 

    var toLoad = $(this).attr('href')+' #content';
    $('#content').hide(1555,'easeInOutQuint',loadContent);  

    window.location.hash = $(this).attr('href').substr(0,$(this).attr('href').length-0);
    function loadContent() {
        $('#content').load(toLoad,'',showNewContent);  
    }
    function showNewContent() {
        $('#content').show(777,'');
    }

    }
    return false;

}); 
```

# php - 如何在 Zend Framework 1.x 中重定向错误页面并执行路由

> ID：13427782
> 
> 赞同：2
> 
> 时间：2012-11-17T04:46:40.410
> 
> 标签：php, zend-framework, routes, zend-route

如何在 Zend Framework 1.x 中执行路由并重定向自定义错误消息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T04:46:40.410

要执行自定义路线：

将以下内容放入您的`bootstrap.php`文件中

```
function _initRoutes() {
    $front_controller = Zend_Controller_Front::getInstance();
    $router = $front_controller->getRouter();

    $router->addRoute('customName', new Zend_Controller_Router_Route(
        '/customName/:dataVariable', array('controller' => 'YourController', 'action' => 'YourAction')
    ));
} 
```

然后，在您的控制器操作中，您将使用刚刚设置的数据变量访问它。

例如：对于类别 - 帖子显示

```
function _initRoutes() {
    $front_controller = Zend_Controller_Front::getInstance();
    $router = $front_controller->getRouter();

    $router->addRoute('category', new Zend_Controller_Router_Route(
        '/post/:postId', array('controller' => 'category', 'action' => 'post')
    ));
} 
```

然后在类别控制器和发布操作中，我将使用`$this->getRequest()->getParam('postId');`

它将把网址设置为：example.com/post/123

ZF1为你自带了一个预定义的ErrorController，你可以使用它。

```
class ErrorController extends Zend_Controller_Action {

  public function errorAction() {
    $errors = $this->_getParam('error_handler');

    if (!$errors || !$errors instanceof ArrayObject) {
      $this->view->message = 'You have reached the error page';
      return;
    }

    switch ($errors->type) {
      case Zend_Controller_Plugin_ErrorHandler::EXCEPTION_NO_ROUTE:
      case Zend_Controller_Plugin_ErrorHandler::EXCEPTION_NO_CONTROLLER:
      case Zend_Controller_Plugin_ErrorHandler::EXCEPTION_NO_ACTION:
        // 404 error -- controller or action not found
        $this->getResponse()->setHttpResponseCode(404);
        $priority = Zend_Log::NOTICE;
        $this->view->error_code = $this->getResponse()->getHttpResponseCode();
        $this->view->message = "Page Not Found";
        $this->renderScript('error/error_404.phtml');
        break;
      default:
        // application error
        print_r($this->getResponse());
        $this->getResponse()->setHttpResponseCode(500);
        $priority = Zend_Log::CRIT;
        $this->view->error_code = $this->getResponse()->getHttpResponseCode();
        $this->view->message = 'Application error';
        if ($log = $this->getLog()) {
        $log->log($this->view->message, $priority, $errors->exception);
        $log->log('Request Parameters', $priority, $errors->request->getParams());
        $this->renderScript('error/error_500.phtml');
        }

    // conditionally display exceptions
        if ($this->getInvokeArg('displayExceptions') == true) {
                $this->view->exception = $errors->exception;
        }

        $this->view->request = $errors->request;
        $this->view->error_code = $this->getResponse()->getHttpResponseCode();
        $this->renderScript('error/error_500.phtml');
        break;
    }

    // Log exception, if logger available
    if ($log = $this->getLog()) {
      $log->log($this->view->message, $priority, $errors->exception);
      $log->log('Request Parameters', $priority, $errors->request->getParams());
    }

    // conditionally display exceptions
    if ($this->getInvokeArg('displayExceptions') == true) {
      $this->view->exception = $errors->exception;
    }

    $this->view->request = $errors->request;
  }

  public function getLog() {
    $bootstrap = $this->getInvokeArg('bootstrap');
    if (!$bootstrap->hasResource('Log')) {
      return false;
    }
    $log = $bootstrap->getResource('Log');
    return $log;
  }

} 
```

您可以从列表中设置[HTTP_STATUS_CODES](http://en.wikipedia.org/wiki/List_of_HTTP_status_codes)，但请确保为用户的浏览器和搜索机器人提供正确的状态。

# android - 如何每天从上午 9 点到下午 4 点运行服务？

> ID：13427785
> 
> 赞同：5
> 
> 时间：2012-11-17T04:46:45.443
> 
> 标签：android, android-service, android-alarms

**问题：1 =>** 我想每天从上午 9 点到下午 4 点运行一项服务。我计划了两种方法。哪种方法最好？

**方法1：** 内部服务：（该服务在首次应用程序启动时在创建活动时初始化）

```
if (9 AM <=current time<=4 PM)
{
  fetch data from server. 
} 
```

**方法二：**

在Activity oncreate 中使用Alarm manager 并基于alarm manager 启动一个服务。然后第二天醒来启动服务。

哪种方法最好？

**问题：2 =>**如何以编程方式查找服务是否正在运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T04:53:24.000

编写一个 BroadcastReciever 来接收 ON_BOOT 广播（您需要在清单中添加适当的权限和意图过滤器）。BroadcastReceiver 的存在仅用于使用警报管理器创建上午 9 点的通知。计划的警报具有将启动服务的 PendingIntent。显然，将警报设置为每 24 小时重复一次。

启动后，该服务会正常运行，直到下午 4 点，此时它会自行停止。

服务的 onStartCommand() 方法应返回适当的标志，以使系统在崩溃或被终止时重新启动它。

我唯一不知道的是如何在第一次安装服务时自动启动它。等待设备重新启动不是很实用。当我编写这样的应用程序时，它们通常与具有启动和停止服务的控件的 Activity 结合使用。

# java - 如何开始使用 Oracle 的 Nashorn JS 引擎进行编码，它何时会取代 OpenJDK 中的 Rhino？

> ID：13427793
> 
> 赞同：20
> 
> 时间：2012-11-17T04:49:34.453
> 
> 标签：java, rhino, openjdk, nashorn

我正在寻找一种方法来开始使用 Oracle 的新 Nashorn JavaScript 引擎。我已经对最新的 OpenJDK 8 (b65) 进行了深度学习，看来 Rhino 仍然是唯一包含的脚本引擎。

任何人都知道 Nashorn 何时（或在哪个版本中）将取代 OpenJDK 中的 Rhino？或者更好的是，我在哪里可以获得已经包含它的 JDK？我知道 Netbeans 已经编写了一个调试器来使用它，只是不确定他们从哪里得到库/代码来开始编写它。

有人有一些链接吗？

谢谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-17T13:12:21.657

看起来 OpenJDK 上还没有 Nashorn 的迹象。

Jim Laskey 在 2012 年 10 月的最新评论表明 2012 年第四季度：

[https://blogs.oracle.com/nashorn/entry/welcome_to_the_nashorn_blog#comment-1351205506968](https://blogs.oracle.com/nashorn/entry/welcome_to_the_nashorn_blog#comment-1351205506968)

我认为是时候在 SO 上贴一个[nashorn](/questions/tagged/nashorn "显示标记为“nashorn”的问题")标签了！

**2012 年 12 月 1 日更新：**

看起来像 2012 年 12 月下旬 OpenJDK 可能有它[https://blogs.oracle.com/nashorn/entry/request_for_project_nashorn_open](https://blogs.oracle.com/nashorn/entry/request_for_project_nashorn_open)

**2013 年 3 月 10 日更新：**

@Seth 是正确的，**1.7 版本 3 PRERELEASE**不是 Nashorn。我的错！

[JDK 8 b68](http://jdk8.java.net/download.html)包括一个尚未合并的[nashorn~jdk8](https://blogs.oracle.com/nashorn/entry/open_for_business)分支。

这个分支的自述文件说：

> Nashorn 存储库正在迁移到 OpenJDK 的过程中，因此在几个方面是不完整的。构建系统未完全集成。完成后，Nashorn 将安装在 JRE 中的适当位置。集成后，正确版本的 JDK 将包裹在 Nashorn 周围。同时，请确保您使用 JDK8 b68 或更高版本。

如果您从源代码签**出 nashorn~jdk8**，您可以构建**nashorn.jar**

```
cd nashorn~jdk8/nashorn/make
ant clean; ant 
```

您可以在最近的 jdk 1.8 版本中从**javax.script.ScriptEngineManager**请求“nashorn”引擎：

```
jrunscript -cp ./nashorn.jar -l "nashorn" -e "println(engine.factory.getParameter(
    javax.script.ScriptEngine.ENGINE))"
> Oracle Nashorn 
```

或在路径中使用**nashorn.jar**：

```
ScriptEngineManager manager = new ScriptEngineManager();
ScriptEngine engine = manager.getEngineByName("nashorn"); 
```

* * *

**2014 年 3 月 19 日更新：**

来自@ncasas 的更新；[JDK 8 已经发布](http://mreinhold.org/blog/jdk8-ga)，Nashorn 是默认的 JS 引擎。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-26T10:48:51.427

我做了更多的挖掘工作，您可以通过使用位于此处的反向端口让 Nashorn 使用 JDK7：

[https://bitbucket.org/ramonza/nashorn-backport](https://bitbucket.org/ramonza/nashorn-backport)

签出该存储库并尝试`ant -f make/build.xml`按照 BitBucket 页面上的说明使用它来构建它

如果由于 dynalink 导致构建失败，请应用[此处](https://bitbucket.org/ramonza/nashorn-backport/issue/1/update-to-dynalink-05)问题部分中列出的补丁（我假设开发人员很快会将其修补到主存储库中）。

在构建它时，您应该在克隆存储库的 dist 文件夹中获得一个 nashorn.jar 文件。

现在您需要使用类似于以下的 VM 选项将此 jar 添加到您的引导类路径：

`-Xbootclasspath/a:C:/nashorn-backport/dist/nashorn.jar`

现在你应该可以使用 nashorn 了。为了确保这是我编写的一个快速测试程序，它将列出可用的引擎工厂：

```
import javax.script.*;

public class NashornTest {
    public static void main(String args[]) {
        ScriptEngineManager manager = new ScriptEngineManager();
        for (ScriptEngineFactory f : manager.getEngineFactories()) {
            printBasicInfo(f);
            System.out.println();
        }
    }

    public static void printBasicInfo(ScriptEngineFactory factory) {
        System.out.println("engine name=" + factory.getEngineName());
        System.out.println("engine version=" + factory.getEngineVersion());
        System.out.println("language name=" + factory.getLanguageName());
        System.out.println("extensions=" + factory.getExtensions());
        System.out.println("language version=" + factory.getLanguageVersion());
        System.out.println("names=" + factory.getNames());
        System.out.println("mime types=" + factory.getMimeTypes());
    }
} 
```

使用 bootclasspath 集运行它会列出 Rhino 和 Nashorn，没有它你只会看到 Rhino。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-08-26T15:05:30.323

安装 JDK8 并为您的 JDK 的 jjs（Nashorn 解释器）创建一个别名，例如，如果您创建一个名为 test.js 的文件，您可以使用以下命令运行该程序：

```
$ jjs test.js 
```

Mac OS = alias jjs='/Library/Java/JavaVirtualMachines/jdk1.8.0.jdk/Contents/Home/jre/bin/jjs'</p>

Windows = 定义一个名为 'JAVA8_HOME' 的环境变量并指向您的 jdk8 文件夹，然后您可以通过运行以下命令来调用 jjs：

```
> “%JAVA8_HOME%\jre\bin\jjs” test.js 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-18T11:32:02.357

我最近一直在研究如何使用它，我目前认为开始使用它的唯一方法是从源代码构建 OpenJDK，因为从 2 月 7 日开始，它不在当前版本中。

我认为它会在本周晚些时候发布的开发者预览版中（2013 年 2 月 21 日）。

来源： http: [//openjdk.java.net/projects/jdk8/](http://openjdk.java.net/projects/jdk8/)

# html - 如何在浏览器中编辑网页并将 html 保存到服务器

> ID：13427800
> 
> 赞同：2
> 
> 时间：2012-11-17T04:50:55.540
> 
> 标签：html, browser, content-management-system, editor

有什么东西可以让我在浏览器中编辑我的网页（仅文本很好），然后将该编辑应用于我服务器上的 html 吗？我在 Apache 上运行，但如果需要可以切换到 IIS。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T05:16:01.177

我认为您正在寻找 CMS。如果您使用 CMS 创建网站，您可以登录该网站并即时编辑和管理内容。

流行的有 Drupal、Joomla、Magento、Typo3、Wordpress。

每个都有自己的优点和缺点，我建议初学者使用 Wordpress。

[http://wordpress.org/download/](http://wordpress.org/download/)

您也需要零编码背景才能开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T05:19:12.040

您是否要编辑网站的代码？如果是这样，[http](http://ftplive.com/) ://ftplive.com/适合您。假设您拥有站点/服务器的 FTP 信息。

# android - Apache Cordova：无法获取 commons-codec

> ID：13427802
> 
> 赞同：2
> 
> 时间：2012-11-17T04:51:10.093
> 
> 标签：android, cordova, apache-commons-codec

我正在尝试使用 Apache Cordova 创建一个新的 Android 项目。脚本启动但失败并显示以下消息：

> 无法检索公共编解码器。请自行下载并放在framework\libs目录下。这个过程现在可能会失败。对不起。

然后它失败了。我让它在 Windows 8 64 位上运行。ANT、ADT、Android-SDK、Eclipse、Java 都运行良好。我以管理员身份运行cmd，没有区别。我下载了 1.7 版本的 commons-codec.jar 并将它放在 lib 目录中，不仅是 Cordova，还有 ant 和 Android SDK，但这没有任何区别。

我希望有人可以帮助我，我要提前感谢你！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-17T13:34:34.857

[在此处](http://mvnrepository.com/artifact/commons-codec/commons-codec/1.6)下载 1.6 版本的 commons-codec，然后将其复制到 Cordova 文件夹中的 \framework\libs 文件夹中。

对我来说效果很好。祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-27T21:05:13.663

您可以在 Apache 的旧软件版本历史档案中找到它：http: [//archive.apache.org/dist/commons/codec/binaries/](http://archive.apache.org/dist/commons/codec/binaries/)

# c# - 类型 '' 未映射

> ID：13427803
> 
> 赞同：4
> 
> 时间：2012-11-17T04:51:11.793
> 
> 标签：c#, asp.net, entity-framework

我一直在尝试修复此错误一段时间。

每当我的应用程序尝试创建我的数据上下文的实例时，我都会收到此错误。

下面是代码：

```
 using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Web;
    using RandomRentals.Models;
    using System.Data.Entity;

    namespace RandomRentals.Models
    {
        public class RentalContext : DbContext
        {
            public DbSet<Rental> Rentals { get; set; }
            public DbSet<Category> Categories { get; set; }
            public DbSet<Item> Items { get; set; }
            public DbSet<Billing> Billings { get; set; }
            public DbSet<User> Users { get; set; }
            public DbSet<Video> Videos { get; set; }
            public DbSet<Picture> Pictures { get; set; }
            public DbSet<ServiceType> ServiceTypes { get; set; }
            public DbSet<Rating> Ratings { get; set; }
            public DbSet<Business>  Businesses { get; set; }
            public DbSet<BusinessHour> BusinessHours { get; set; }  
        }
    } 
```

这是堆栈跟踪：

```
[InvalidOperationException: The type 'RandomRentals.Rental' was not mapped. Check that the type has not been explicitly excluded by using the Ignore method or NotMappedAttribute data annotation. Verify that the type was defined as a class, is not primitive, nested or generic, and does not inherit from EntityObject.]
   System.Data.Entity.Internal.DbSetDiscoveryService.GetSets() +706
   System.Data.Entity.Internal.DbSetDiscoveryService.InitializeSets() +31
   System.Data.Entity.DbContext.DiscoverAndInitializeSets() +56
   System.Data.Entity.DbContext.InitializeLazyInternalContext(IInternalConnection internalConnection, DbCompiledModel model) +79
   System.Data.Entity.DbContext..ctor() +99
   RandomRentals.Models.RentalContext..ctor() +44
   RandomRentals.Models.UserModel..ctor() in C:\Users\nikka\Desktop\RandomRentals\RandomRentals\Models\UserModel.cs:11

[TargetInvocationException: Exception has been thrown by the target of an invocation.]
   System.RuntimeTypeHandle.CreateInstance(RuntimeType type, Boolean publicOnly, Boolean noCheck, Boolean& canBeCached, RuntimeMethodHandleInternal& ctor, Boolean& bNeedSecurityCheck) +0
   System.RuntimeType.CreateInstanceSlow(Boolean publicOnly, Boolean skipCheckThis, Boolean fillCache) +98
   System.RuntimeType.CreateInstanceDefaultCtor(Boolean publicOnly, Boolean skipVisibilityChecks, Boolean skipCheckThis, Boolean fillCache) +241
   System.Activator.CreateInstance(Type type, Boolean nonPublic) +69
   System.Web.Mvc.DefaultModelBinder.CreateModel(ControllerContext controllerContext, ModelBindingContext bindingContext, Type modelType) +199
   System.Web.Mvc.DefaultModelBinder.BindComplexModel(ControllerContext controllerContext, ModelBindingContext bindingContext) +572
   System.Web.Mvc.DefaultModelBinder.BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext) +449
   System.Web.Mvc.ControllerActionInvoker.GetParameterValue(ControllerContext controllerContext, ParameterDescriptor parameterDescriptor) +317
   System.Web.Mvc.ControllerActionInvoker.GetParameterValues(ControllerContext controllerContext, ActionDescriptor actionDescriptor) +117
   System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName) +343
   System.Web.Mvc.Controller.ExecuteCore() +116
   System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext) +97
   System.Web.Mvc.ControllerBase.System.Web.Mvc.IController.Execute(RequestContext requestContext) +10
   System.Web.Mvc.<>c__DisplayClassb.<BeginProcessRequest>b__5() +37
   System.Web.Mvc.Async.<>c__DisplayClass1.<MakeVoidDelegate>b__0() +21
   System.Web.Mvc.Async.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _) +12
   System.Web.Mvc.Async.WrappedAsyncResult`1.End() +62
   System.Web.Mvc.<>c__DisplayClasse.<EndProcessRequest>b__d() +50
   System.Web.Mvc.SecurityUtil.<GetCallInAppTrustThunk>b__0(Action f) +7
   System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Action action) +22
   System.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult) +60
   System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult result) +9
   System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +8970061
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +184 
```

这是完整的错误文本：

未映射“RandomRentals.Rental”类型。使用 Ignore 方法或 NotMappedAttribute 数据注释检查该类型是否被显式排除。验证该类型是否被定义为一个类，不是原始的、嵌套的或泛型的，并且不是从 EntityObject 继承的。

编辑：租赁类的代码。

```
[EdmEntityTypeAttribute(NamespaceName="DevelopmentModel", Name="Rental")]
[Serializable()]
[DataContractAttribute(IsReference=true)] 
```

公共部分类出租：EntityObject {#region工厂方法

```
/// <summary>
/// Create a new Rental object.
/// </summary>
/// <param name="rentalID">Initial value of the RentalID property.</param>
/// <param name="agreedPrice">Initial value of the AgreedPrice property.</param>
/// <param name="rentedOn">Initial value of the RentedOn property.</param>
/// <param name="rentalDays">Initial value of the RentalDays property.</param>
/// <param name="returned">Initial value of the Returned property.</param>
/// <param name="rentedBy">Initial value of the RentedBy property.</param>
/// <param name="returnedOn">Initial value of the ReturnedOn property.</param>
/// <param name="ownerReviewed">Initial value of the OwnerReviewed property.</param>
/// <param name="billingID">Initial value of the BillingID property.</param>
/// <param name="itemID">Initial value of the ItemID property.</param>
/// <param name="categoryDescription">Initial value of the CategoryDescription property.</param>
/// <param name="title">Initial value of the Title property.</param>
public static Rental CreateRental(global::System.Int32 rentalID, global::System.Decimal agreedPrice, global::System.DateTime rentedOn, global::System.Int32 rentalDays, global::System.Boolean returned, global::System.Int32 rentedBy, global::System.DateTime returnedOn, global::System.Boolean ownerReviewed, global::System.Int32 billingID, global::System.Int32 itemID, global::System.String categoryDescription, global::System.String title)
{
    Rental rental = new Rental();
    rental.RentalID = rentalID;
    rental.AgreedPrice = agreedPrice;
    rental.RentedOn = rentedOn;
    rental.RentalDays = rentalDays;
    rental.Returned = returned;
    rental.RentedBy = rentedBy;
    rental.ReturnedOn = returnedOn;
    rental.OwnerReviewed = ownerReviewed;
    rental.BillingID = billingID;
    rental.ItemID = itemID;
    rental.CategoryDescription = categoryDescription;
    rental.Title = title;
    return rental;
}

#endregion
#region Primitive Properties

/// <summary>
/// No Metadata Documentation available.
/// </summary>
[EdmScalarPropertyAttribute(EntityKeyProperty=true, IsNullable=false)]
[DataMemberAttribute()]
public global::System.Int32 RentalID
{
    get
    {
        return _RentalID;
    }
    set
    {
        if (_RentalID != value)
        {
            OnRentalIDChanging(value);
            ReportPropertyChanging("RentalID");
            _RentalID = StructuralObject.SetValidValue(value);
            ReportPropertyChanged("RentalID");
            OnRentalIDChanged();
        }
    }
}
private global::System.Int32 _RentalID;
partial void OnRentalIDChanging(global::System.Int32 value);
partial void OnRentalIDChanged();

/// <summary>
/// No Metadata Documentation available.
/// </summary>
[EdmScalarPropertyAttribute(EntityKeyProperty=false, IsNullable=true)]
[DataMemberAttribute()]
public Nullable<global::System.Decimal> ProposedPrice
{
    get
    {
        return _ProposedPrice;
    }
    set
    {
        OnProposedPriceChanging(value);
        ReportPropertyChanging("ProposedPrice");
        _ProposedPrice = StructuralObject.SetValidValue(value);
        ReportPropertyChanged("ProposedPrice");
        OnProposedPriceChanged();
    }
}
private Nullable<global::System.Decimal> _ProposedPrice;
partial void OnProposedPriceChanging(Nullable<global::System.Decimal> value);
partial void OnProposedPriceChanged();

/// <summary>
/// No Metadata Documentation available.
/// </summary>
[EdmScalarPropertyAttribute(EntityKeyProperty=false, IsNullable=false)]
[DataMemberAttribute()]
public global::System.Decimal AgreedPrice
{
    get
    {
        return _AgreedPrice;
    }
    set
    {
        OnAgreedPriceChanging(value);
        ReportPropertyChanging("AgreedPrice");
        _AgreedPrice = StructuralObject.SetValidValue(value);
        ReportPropertyChanged("AgreedPrice");
        OnAgreedPriceChanged();
    }
}
private global::System.Decimal _AgreedPrice;
partial void OnAgreedPriceChanging(global::System.Decimal value);
partial void OnAgreedPriceChanged();

/// <summary>
/// No Metadata Documentation available.
/// </summary>
[EdmScalarPropertyAttribute(EntityKeyProperty=false, IsNullable=false)]
[DataMemberAttribute()]
public global::System.DateTime RentedOn
{
    get
    {
        return _RentedOn;
    }
    set
    {
        OnRentedOnChanging(value);
        ReportPropertyChanging("RentedOn");
        _RentedOn = StructuralObject.SetValidValue(value);
        ReportPropertyChanged("RentedOn");
        OnRentedOnChanged();
    }
}
private global::System.DateTime _RentedOn;
partial void OnRentedOnChanging(global::System.DateTime value);
partial void OnRentedOnChanged();

/// <summary>
/// No Metadata Documentation available.
/// </summary>
[EdmScalarPropertyAttribute(EntityKeyProperty=false, IsNullable=false)]
[DataMemberAttribute()]
public global::System.Int32 RentalDays
{
    get
    {
        return _RentalDays;
    }
    set
    {
        OnRentalDaysChanging(value);
        ReportPropertyChanging("RentalDays");
        _RentalDays = StructuralObject.SetValidValue(value);
        ReportPropertyChanged("RentalDays");
        OnRentalDaysChanged();
    }
}
private global::System.Int32 _RentalDays;
partial void OnRentalDaysChanging(global::System.Int32 value);
partial void OnRentalDaysChanged();

/// <summary>
/// No Metadata Documentation available.
/// </summary>
[EdmScalarPropertyAttribute(EntityKeyProperty=false, IsNullable=false)]
[DataMemberAttribute()]
public global::System.Boolean Returned
{
    get
    {
        return _Returned;
    }
    set
    {
        OnReturnedChanging(value);
        ReportPropertyChanging("Returned");
        _Returned = StructuralObject.SetValidValue(value);
        ReportPropertyChanged("Returned");
        OnReturnedChanged();
    }
}
private global::System.Boolean _Returned;
partial void OnReturnedChanging(global::System.Boolean value);
partial void OnReturnedChanged();

/// <summary>
/// No Metadata Documentation available.
/// </summary>
[EdmScalarPropertyAttribute(EntityKeyProperty=false, IsNullable=false)]
[DataMemberAttribute()]
public global::System.Int32 RentedBy
{
    get
    {
        return _RentedBy;
    }
    set
    {
        OnRentedByChanging(value);
        ReportPropertyChanging("RentedBy");
        _RentedBy = StructuralObject.SetValidValue(value);
        ReportPropertyChanged("RentedBy");
        OnRentedByChanged();
    }
}
private global::System.Int32 _RentedBy;
partial void OnRentedByChanging(global::System.Int32 value);
partial void OnRentedByChanged();

/// <summary>
/// No Metadata Documentation available.
/// </summary>
[EdmScalarPropertyAttribute(EntityKeyProperty=false, IsNullable=false)]
[DataMemberAttribute()]
public global::System.DateTime ReturnedOn
{
    get
    {
        return _ReturnedOn;
    }
    set
    {
        OnReturnedOnChanging(value);
        ReportPropertyChanging("ReturnedOn");
        _ReturnedOn = StructuralObject.SetValidValue(value);
        ReportPropertyChanged("ReturnedOn");
        OnReturnedOnChanged();
    }
}
private global::System.DateTime _ReturnedOn;
partial void OnReturnedOnChanging(global::System.DateTime value);
partial void OnReturnedOnChanged();

/// <summary>
/// No Metadata Documentation available.
/// </summary>
[EdmScalarPropertyAttribute(EntityKeyProperty=false, IsNullable=false)]
[DataMemberAttribute()]
public global::System.Boolean OwnerReviewed
{
    get
    {
        return _OwnerReviewed;
    }
    set
    {
        OnOwnerReviewedChanging(value);
        ReportPropertyChanging("OwnerReviewed");
        _OwnerReviewed = StructuralObject.SetValidValue(value);
        ReportPropertyChanged("OwnerReviewed");
        OnOwnerReviewedChanged();
    }
}
private global::System.Boolean _OwnerReviewed;
partial void OnOwnerReviewedChanging(global::System.Boolean value);
partial void OnOwnerReviewedChanged();

/// <summary>
/// No Metadata Documentation available.
/// </summary>
[EdmScalarPropertyAttribute(EntityKeyProperty=false, IsNullable=true)]
[DataMemberAttribute()]
public global::System.String RenterFeedback
{
    get
    {
        return _RenterFeedback;
    }
    set
    {
        OnRenterFeedbackChanging(value);
        ReportPropertyChanging("RenterFeedback");
        _RenterFeedback = StructuralObject.SetValidValue(value, true);
        ReportPropertyChanged("RenterFeedback");
        OnRenterFeedbackChanged();
    }
}
private global::System.String _RenterFeedback;
partial void OnRenterFeedbackChanging(global::System.String value);
partial void OnRenterFeedbackChanged();

/// <summary>
/// No Metadata Documentation available.
/// </summary>
[EdmScalarPropertyAttribute(EntityKeyProperty=false, IsNullable=false)]
[DataMemberAttribute()]
public global::System.Int32 BillingID
{
    get
    {
        return _BillingID;
    }
    set
    {
        OnBillingIDChanging(value);
        ReportPropertyChanging("BillingID");
        _BillingID = StructuralObject.SetValidValue(value);
        ReportPropertyChanged("BillingID");
        OnBillingIDChanged();
    }
}
private global::System.Int32 _BillingID;
partial void OnBillingIDChanging(global::System.Int32 value);
partial void OnBillingIDChanged();

/// <summary>
/// No Metadata Documentation available.
/// </summary>
[EdmScalarPropertyAttribute(EntityKeyProperty=false, IsNullable=false)]
[DataMemberAttribute()]
public global::System.Int32 ItemID
{
    get
    {
        return _ItemID;
    }
    set
    {
        OnItemIDChanging(value);
        ReportPropertyChanging("ItemID");
        _ItemID = StructuralObject.SetValidValue(value);
        ReportPropertyChanged("ItemID");
        OnItemIDChanged();
    }
}
private global::System.Int32 _ItemID;
partial void OnItemIDChanging(global::System.Int32 value);
partial void OnItemIDChanged();

/// <summary>
/// No Metadata Documentation available.
/// </summary>
[EdmScalarPropertyAttribute(EntityKeyProperty=false, IsNullable=false)]
[DataMemberAttribute()]
public global::System.String CategoryDescription
{
    get
    {
        return _CategoryDescription;
    }
    set
    {
        OnCategoryDescriptionChanging(value);
        ReportPropertyChanging("CategoryDescription");
        _CategoryDescription = StructuralObject.SetValidValue(value, false);
        ReportPropertyChanged("CategoryDescription");
        OnCategoryDescriptionChanged();
    }
}
private global::System.String _CategoryDescription;
partial void OnCategoryDescriptionChanging(global::System.String value);
partial void OnCategoryDescriptionChanged();

/// <summary>
/// No Metadata Documentation available.
/// </summary>
[EdmScalarPropertyAttribute(EntityKeyProperty=false, IsNullable=false)]
[DataMemberAttribute()]
public global::System.String Title
{
    get
    {
        return _Title;
    }
    set
    {
        OnTitleChanging(value);
        ReportPropertyChanging("Title");
        _Title = StructuralObject.SetValidValue(value, false);
        ReportPropertyChanged("Title");
        OnTitleChanged();
    }
}
private global::System.String _Title;
partial void OnTitleChanging(global::System.String value);
partial void OnTitleChanged();

#endregion

} 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-17T21:26:05.987

我来到这里是因为我遇到了同样的问题，并希望得到答案。但没有快乐！所以我一直在寻找——在 Pluralsight 有关于实体框架的培训视频。我找到了我的问题的答案。我试图将 DbContext 与数据库生成的 .edmx 模型一起使用。（不是代码优先）因此我需要将 .edmx 文件中的默认代码生成模板切换为 Ado.NET DbContext Generator。我还必须下载它，因为当我右键单击 .edmx 设计器表面并选择“添加代码生成项”时，它不在我看到的代码生成器列表中 从这里下载： [下载 EF 4.x DbContext Generator for C#](http://visualstudiogallery.msdn.microsoft.com/7812b04c-db36-4817-8a84-e73c452410a2) 或这里[5.x - 查看此链接。](http://msdn.microsoft.com/en-US/data/jj206878)

因此，在我将其安装为 .edmx 文件的代码生成项之后，并向我的类添加了一个从 DbContext 派生的构造函数，该构造函数命名我的连接字符串

```
public class ContentRepository: DbContext
{
    public DbSet<Content_Template> content_Templates { get; set; }
    public DbSet<Master_Template> master_Templates { get; set; }
    public DbSet<Master_Content_Map> master_Content_Maps { get; set; }

    public ContentRepository()
        : base("name=MessagingSystemEntities")
    {
    } 
```

我的问题解决了。也许它也会对你有所帮助，我希望如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-21T22:33:07.780

出现此错误是因为我在类级别设置了 NotMapped 属性，以便向我的数据库表添加一个额外的属性，而不是在属性级别。

错误的：

```
[NotMapped]
    public partial class vw_MyUser
    {
        public string UniqueId
        {
            get
            {
                ...           
            }
        }
    } 
```

对：

```
 public partial class vw_MyUser
        {
            [NotMapped]
            public string UniqueId
            {
                get
                {
                    ...           
                }
            }
        } 
```

# c++ - 从 C# 到 C++ DLL 的平台调用

> ID：13427807
> 
> 赞同：0
> 
> 时间：2012-11-17T04:52:10.467
> 
> 标签：c++, interop, pinvoke

这是我的第一次 P-Invoke 试用，我正在尝试从 C# 代码调用 C++ 函数。我在VS 2010中通过win 32控制台应用程序项目创建了一个c++ DLL。我写的代码如下所示： ![在此处输入图像描述](../Images/f78c8eb5c03f52e850c59ecb4de8d679.png)

然后我创建了 ac# 控制台应用程序项目并将 c++ dll 和 pdb 文件复制到 bin 文件夹中。这是我的 c# 程序，它会引发图像中显示的错误：

![在此处输入图像描述](../Images/9ce851815845865c526a29bcf9e63392.png)

我不确定我在这里做错了什么。谢谢。

VVV

# cakephp-2.0 - 将搜索与分页集成的最佳方式

> ID：13427809
> 
> 赞同：-1
> 
> 时间：2012-11-17T04:52:31.677
> 
> 标签：cakephp-2.0

我有一个基于 cakephp 2.x 的 Web 应用程序。

我已经在我的数据上集成了分页。

现在我也想对该数据进行搜索，并且分页应该根据搜索结果工作。

现在我的问题是：

1.  我应该使用表格来发布我的搜索字符串。如果是这样，那么我应该使用哪种方法，GET 或 POST。

2.  或者，我应该使用 javascript window.location 方法，并将搜索字符串附加到它。如果我们使用这种方法，那么搜索字符串可以多次附加到 url。

3.  或任何其他最佳方式来实现这一点。

**任何人都可以为此提供最佳解决方案**，因为这是每个应用程序的共同任务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T05:08:28.973

要在 cakephp 中实现搜索，最好的实现方式是使用表单。您可以使用任何方法 GET/POST，但建议使用 GET 方法，因为它允许用户为他的搜索结果添加书签。

下面给出了使用分页实现搜索的教程。

[http://mrphp.com.au/blog/search-forms-cakephp](http://mrphp.com.au/blog/search-forms-cakephp)

# iphone - UINavigationBar 控件，不拾取 self.title 或 self.navigationItem.title

> ID：13427811
> 
> 赞同：0
> 
> 时间：2012-11-17T04:52:51.137
> 
> 标签：iphone, ios, xcode, interface-builder

我的视图顶部有一个 UINavigationBar 控件，在我的关联控制器中，我尝试设置 self.navigationItem.title 和 self.title 但都没有修改 NavigationBar 的标题。

唯一有效的是在 Interface Builder 中设置标题：

![导航项](../Images/a53bf38acc62b0b48b3cad8ebd42ea4c.png)

我怎样才能以编程方式完成这项工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T05:22:34.227

使用这个..它会工作。

```
@interface NewViewController : UIViewController{
    IBOutlet UINavigationItem *navbar;
} 
```

现在在 xib 文件中单击导航项并将 IBOutlet 连接到导航栏。在您的 .m 文件中放置这个简单的代码。

```
navbar.title = @"Your Title"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T05:00:59.367

设置视图控制器的`title`or`navigationItem.title`仅在视图控制器位于导航控制器中时才有效。如果您不使用 a `UINavigationController`，而只是将 a 粘贴`UINavigationBar`在视图控制器上，则必须将视图控制器分配给`navigationItem`导航栏。

```
self.navigationItem.title = @"Some Title";
self.myNavBar.items = @[ self.navigationItem ]; 
```

where`self.myNavBar`应替换为您对`UINavigationBar`.

# hibernate - Hibernate 4：HQL 和继承 - 获取集合和 javassist

> ID：13427812
> 
> 赞同：1
> 
> 时间：2012-11-17T04:53:02.020
> 
> 标签：hibernate, hql, javassist, joined-subclass

我有这种情况：父类Person，子类：个人和企业。我正在使用这样的加入子类策略映射这些类：

```
<hibernate-mapping>
  <class catalog="test" name="test.Person" table="Persons">
    <id name="id" type="int">
      <column name="IdPerson"/>
      <generator class="increment"/>
    </id>

    <set inverse="true" name="addresses">
      <key>
        <column name="IdPerson" not-null="true"/>
      </key>
      <one-to-many class="test.Address"/>
    </set>

    <set inverse="true" name="phones">
      <key>
        <column name="IdPerson" not-null="true"/>
      </key>
      <one-to-many class="test.Phone"/>
    </set>

    <joined-subclass name="test.Individual" table="Individuals">
      <key column="IdPerson"/>

      <property name="nameIndividual" type="string">
        <column length="30" name="Name" not-null="true"/>
      </property>
    ...
    </joined-subclass>

    <joined-subclass name="test.Enterprise" table="Enterprises">
      <key column="IdPerson"/>

      <property name="nameEnterprise" type="string">
        <column length="30" name="Name" not-null="true"/>
      </property>
    ...
    </joined-subclass>

  </class>

  <class catalog="test" name="test.Address" table="Addresses">

    <composite-id class="test.AddressId" name="id">
      <key-many-to-one name="person" class="test.Person">
        <column name="IdPerson" not-null="true"/>
      </key-many-to-one>
      <key-property name="id" type="int">
        <column name="IdAddress"/>
      </key-property>
    </composite-id>

    <many-to-one name="person" class="test.Person" fetch="select" insert="false" update="false">
      <column name="IdPerson" not-null="true"/>
    </many-to-one>
    ...    
  </class>

  <class catalog="test" name="test.Phone" table="Phones">

    <composite-id class="test.PhoneId" name="id">
      <key-many-to-one name="person" class="test.Person">
        <column name="IdPerson" not-null="true"/>
      </key-many-to-one>
      <key-property name="id" type="int">
        <column name="IdPhone"/>
      </key-property>
    </composite-id>

    <many-to-one name="person" class="test.Person" fetch="select" insert="false" update="false">
      <column name="IdPerson" not-null="true"/>
    </many-to-one>
    ...
  </class>

</hibernate-mapping> 
```

当我使用这个简单的 HQL 加载人员列表时：

```
List result = session.createQuery("from Person as en").list(); 
```

hibernate 解决了多态问题，我得到了个人和企业对象的列表。

但是当我包括地址和电话时：

```
List result = session.createQuery("from Person as en left join fetch en.addresses left join fetch en.phones").list(); 
```

hibernate 返回一个 Person_$$_javassist_5 对象列表，无法访问 Indivual 和 Enterprise 类的特定属性。

这是预期的行为吗？我怎么能解决这个问题？

提前致谢。

**编辑：**

我已经包含了 Address 和 Phone 类映射，它的 id 是复合的，这似乎是hibernate 生成*javassist*代理的原因，但是为什么代理不能正确解析多态性？即使hibernate从数据库中获取所有数据。

我的 JSF 页面抛出 javax.el.PropertyNotFoundException 错误：类“test.Person_$$_javassist_5”没有属性“nameIndividual”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T06:36:37.733

我尝试了类似的例子，即一个类有两个加入的子类，父类有一对多的关联。

就像在您的示例中一样，我在不使用 fetch 的情况下检索父类记录，然后使用“left join fetch”。

两次都正确检索了一对多关联。

当我使用 fetch 模式时，结果列表包含重复记录。

例如，在一对多关联中，一条记录在相关表中有 4 条记录，则结果列表包含 4 次相同的对象。对于其他记录，如果相关有 2 条记录，则结果列表包含相同的对象 2 次。

但是根据 Hibernate 文档，这是预期的：- [http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/queryhql.html](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/queryhql.html)

“fetch 构造不能用于使用 iterate() 调用的查询（尽管可以使用 scroll()）。Fetch 应该与 setMaxResults() 或 setFirstResult() 一起使用，因为这些操作基于通常包含的结果行急切集合获取的重复项，因此，行数不是您所期望的。Fetch 也不应该与即兴条件一起使用。可以通过在查询中连接获取多个集合来创建笛卡尔积，所以在这种情况下要小心。join fetching multiple collection role可能会产生bag mapping的意外结果，因此在这种情况下制定查询时建议用户谨慎。最后请注意，full join fetch和right join fetch没有意义。

# jquery - Raphael - 绘制圆圈的本机延迟功能是什么？

> ID：13427818
> 
> 赞同：0
> 
> 时间：2012-11-17T04:54:25.203
> 
> 标签：jquery, raphael

我正在使用 Raphael 画 3 个圆圈。如何让圆圈以一定的时间间隔逐个绘制？

我知道有一个带有 settimeout 的选项，但是除了是否有任何本地函数可以延迟绘制圆圈？

我的简单代码：

```
<div id="paper"></div>

var paper = Raphael('paper',500,500);

var c1 = paper.circle(50,50,25);

var c2 = paper.circle(100,50,25);

var c3 = paper.circle(150,50,25); 
```

[jsfiddle在这里](http://jsfiddle.net/R96pv/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T13:59:03.487

不确定这是否是本机方式，您可以使用`Element.animate()`回调或延迟您可以使用`Animation.delay()`....[小提琴](http://jsfiddle.net/R96pv/4/)

# android - 如何在 AChartEngine 时间序列视图中删除一些时间序列标题

> ID：13427823
> 
> 赞同：1
> 
> 时间：2012-11-17T04:55:41.613
> 
> 标签：android, time-series, title, achartengine, android-graphview

作为无法更改 **AChartEngine**时间图表上系列中选定点的颜色的解决方法，我为每个必须更改颜色的点使用了一个附加系列。我需要为这些附加系列禁用系列标题。

使用空字符串作为时间序列构造函数的参数：

```
TimeSeries ts = TimeSeries(""); 
```

仍然会导致在每个此类系列的 X 轴标签下放置带有空系列标题字符串的线和点符号。

`AChartEngine`对于使用 TimeSeries 构造函数调用的空参数创建的系列，删除线和点符号和系列标题字符串将是一个理想的功能：

```
TimeSeries ts = TimeSeries(null); 
```

但这目前导致了**nullPointerException**。

AChartEngine开发人员会考虑上述建议吗？在此之前，有没有办法从 a 中删除**一些**`TimeSeries`标题`AChartEngine Time Series View`？

任何帮助将不胜感激。

此致。

# solr - Solr 为 fq 和 q 返回不同的结果

> ID：13427825
> 
> 赞同：1
> 
> 时间：2012-11-17T04:55:52.360
> 
> 标签：solr

我已经在 Solr 中索引了电影数据。基本查询按预期工作，但是当我对构面和 aq 进行过滤查询时，结果不同。

查询`/select?q=facetGenre:Drama&wt=xml`返回结果

而查询`/select?q=*.*&fq=facetGenre:Drama&wt=xml`不返回任何结果。

这可能是什么原因？请帮忙。

由于 Genre 字段中存在“\”，例如“Action\Adventure”，因此它是自定义字段类型“facetStringwithSlash”。详细信息如下

```
<fieldType name="facetStringwithSlash" class="solr.TextField" positionIncrementGap="100">

<analyzer type="index">
<tokenizer class="solr.PatternTokenizerFactory" pattern="[/,]\s*"/>
<filter class="solr.WordDelimiterFilterFactory" generateWordParts="0" generateNumberParts="0" catenateWords="0" preserveOriginal="1" catenateNumbers="0" catenateAll="0" splitOnCaseChange="0" stemEnglishPossessive="1"/>
<filter class="solr.ASCIIFoldingFilterFactory"/>
</analyzer>

<analyzer type="query">
<tokenizer class="solr.PatternTokenizerFactory" pattern="[/,]\s*"/>
<filter class="solr.WordDelimiterFilterFactory" generateWordParts="0" generateNumberParts="0" preserveOriginal="1" catenateWords="0" catenateNumbers="0" catenateAll="0" splitOnCaseChange="0" stemEnglishPossessive="1"/>
<filter class="solr.ASCIIFoldingFilterFactory"/></analyzer></fieldType>
</analyzer>

</fieldType> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T11:53:55.543

正如@joeln 指出的那样，您应该`:`在查询中使用。

`select?q=*:*`意味着匹配任何字段中的任何值。

如果是`select?q=*.*`，由于查询中没有指定字段，因此它将在默认字段中搜索，并匹配其中包含的任何文本`.`。也许这就是你没有得到任何回应的原因。

# android - 进度条阻止 Android 中的 notifyDatasetChanged() 方法

> ID：13427826
> 
> 赞同：0
> 
> 时间：2012-11-17T04:55:55.103
> 
> 标签：android, android-asynctask, android-progressbar

我试图在填充列表视图时显示 ProgressBar。

这是我的 XML

```
 <FrameLayout

    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

    <ListView
        android:id="@android:id/list"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:divider="@null"
        android:dividerHeight="0dp"
        android:fadingEdge="none" >
    </ListView>

    <ProgressBar
        android:id="@+id/doProgress"
        android:layout_width="60dp"
        android:layout_height="60dp"
        android:layout_gravity="center" />
</FrameLayout> 
```

加载整个列表视图时，在 onPostExecuteMethod 中更改了 ProgressBar 的可见性。异步任务代码：

```
public class WhatToDoLoader extends AsyncTask<String, String, String> {
    ProgressDialog progress = new ProgressDialog(WhatToDo.this);
    String url = "http://wearedesigners.net/clients/clients12/tourism/fetchWhatToDoList.php";
    final String TAG_MAIN = "item";
    final String TAG_ID = "itemId";
    final String TAG_NAME = "itemName";
    final String TAG_DETAIL = "itemDetailText";
    final String TAG_ITEM_IMAGE = "itemImages";
    final String TAG_MAP = "itemMapData";
    final String TAG_MAP_IMAGE = "mapImage";

    @Override
    protected void onProgressUpdate(String... values) {
        // TODO Auto-generated method stub
        super.onProgressUpdate(values);
        adapter.notifyDataSetChanged();
    }

    @Override
    protected void onPreExecute() {
        // TODO Auto-generated method stub
        super.onPreExecute();

        /*
         * progress.setMessage("Loading What To Do List"); progress.show();
         */

    }

    @Override
    protected String doInBackground(String... params) {
        XMLParser parser = new XMLParser();
        String xml = parser.getXmlFromUrl(url); // getting XML
        Document doc = parser.getDomElement(xml); // getting DOM element
        NodeList nl = doc.getElementsByTagName(TAG_MAIN);
        // TODO Auto-generated method stub
        for (int i = 0; i < nl.getLength(); i++) {
            // creating new HashMap
            HashMap<String, String> map = new HashMap<String, String>();
            Element e = (Element) nl.item(i);
            // adding each child node to HashMap key => value
            map.put(TAG_ID, parser.getValue(e, TAG_ID));
            map.put(TAG_NAME, parser.getValue(e, TAG_NAME));

            map.put(TAG_DETAIL, parser.getValue(e, TAG_DETAIL));

            map.put(TAG_MAP, parser.getValue(e, TAG_MAP));
            map.put(TAG_MAP_IMAGE, parser.getValue(e, TAG_MAP_IMAGE));
            map.put(TAG_ITEM_IMAGE, parser.getValue(e, TAG_ITEM_IMAGE));
            System.out.println("Test : " + parser.getValue(e, TAG_ID));
            // adding HashList to ArrayList
            whatToDoInfo.add(map);
            publishProgress("");
        }
        return null;
    }

    @Override
    protected void onPostExecute(String result) {
        // TODO Auto-generated method stub
        super.onPostExecute(result);

        ProgressBar pb = (ProgressBar) findViewById(R.id.doProgress);
        pb.setVisibility(pb.INVISIBLE);
    }

} 
```

当我运行代码时，它会引发以下异常。

* ***java.lang.IllegalStateException：适配器的内容发生了变化，但ListView没有收到通知。确保适配器的内容不是从后台线程修改的，而只是从 UI 线程修改的。****

但是当省略进度条功能时，相同的代码可以正常工作。我找不到哪里出错了。有人可以帮帮我吗 ？

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T07:25:59.370

只是检查一下：在调用 WhatToDoLoader 之前，您将适配器设置为列表视图，对吗？

否则，在您将适配器设置为 listview 之前，您的 onProgressUpdate 方法可能会被调用，并且您的列表不会收到通知......因此可能会发生此错误。

# jquery - jQuery UI 选项卡插件坏了

> ID：13427834
> 
> 赞同：2
> 
> 时间：2012-11-17T04:57:38.703
> 
> 标签：jquery, jquery-ui, jquery-plugins, jquery-ui-tabs

我们正在使用来自这个小提琴的 jquery ui 选项卡箭头插件：http: [//jsfiddle.net/dECtZ/282/](http://jsfiddle.net/dECtZ/282/)，但像许多插件一样，它与最新版本的 jQuery 中断。我们能够让 csscur 工作，但在 jquery 核心中仍然出现以下错误（第 353 行）：

未捕获的类型错误：无法分配给函数 (e,t) 的只读属性“长度”{if(!this._createWidget)return new o(e,t);arguments.length&&this._createWidget(e,t)}

代码如下：

```
(function($, undefined) {
    if (!$.xui) {
        $.xui = {};
    }
    var tabs = $.extend({}, $.ui.tabs.prototype),
        _super = {
            _create: tabs._create,
            _destroy: tabs._destroy,
            _update: tabs._update
        };
    $.xui.tabs = $.extend(tabs, {
        options: $.extend({}, tabs.options, {
            scrollable: false,
            changeOnScroll: false,
            closable: false,
            resizable: false,
            resizeHandles: "e,s,se"
        }),
        _create: function() {
            var self = this,
                o = self.options;
            _super._create.apply(self);
            if (o.scrollable) {
                self.element.addClass("ui-tabs-scrollable");
                var scrollContainer = $('<div class="ui-tabs-scroll-container"></div>').prependTo(this.element);
                self.header = $('<div class="ui-tabs-nav-scrollable ui-widget-header ui-corner-all"></div>').prependTo(scrollContainer);
                var nav = self.element.find(".ui-tabs-nav:first").removeClass("ui-widget-header ui-corner-all").appendTo(this.header);
                var arrowsNav = $('<ol class="ui-helper-reset ui-helper-clearfix ui-tabs-nav-arrows"></ol>').prependTo(self.element);
                var navPrev = $('<li class="ui-tabs-arrow-previous ui-state-default ui-corner-bl ui-corner-tl" title="Previous"><a href="#"><span class="ui-icon ui-icon-carat-1-w">Previous tab</span></a></li>').prependTo(arrowsNav).hide(),
                    navNext = $('<li class="ui-tabs-arrow-next ui-state-default ui-corner-tr ui-corner-br" title="Next"><a href="#"><span class="ui-icon ui-icon-carat-1-e">Next tab</span></a></li>').appendTo(arrowsNav).hide();

                var scrollTo = function(to, delay) {
                    var navWidth = 0,
                        arrowWidth = navPrev.outerWidth(),
                        marginLeft = -(parseInt(nav.css("marginLeft"), 10)),
                        hwidth = self.header.width(),
                        newMargin = 0;

                    nav.find("li").each(function() {
                        navWidth += $(this).outerWidth(true);
                    });

                    if (to instanceof $.Event) {

                    } else {
                        newMargin = marginLeft+to;
                        if (newMargin > (navWidth-hwidth)) {
                            newMargin = (navWidth-hwidth);
                        } else if (newMargin < 0) {
                            newMargin = 0;
                        }
                        nav.stop(true).animate({
                            marginLeft: -(newMargin)
                        }, delay, function(){
                            $(window).trigger("resize.tabs");
                        });
                    }
                }

                var holdTimer = false;
                navPrev.add(navNext).bind({
                    "click": function(e) {
                        var isNext = this === navNext[0];
                        e.preventDefault();
                        if (o.changeOnScroll) {
                            self.select(self.options.selected + (isNext ? 1 : -1));
                        } else {
                            if (!holdTimer)
                                scrollTo(isNext ? 150 : -150, 250);
                        }
                    },
                    "mousedown": function(e){
                        if (!o.changeOnScroll) {
                            var isNext = this === navNext[0],
                                duration = 10, pos = 15, timer;
                            if (holdTimer)
                                clearTimeout(holdTimer);
                            holdTimer = setTimeout(timer = function(){
                                scrollTo(isNext ? pos : -(pos), duration);
                                holdTimer = setTimeout(arguments.callee, duration);
                            }, 150);
                        }
                    },
                    "mouseup mouseout": function(e){
                        if (!o.changeOnScroll) {
                            clearTimeout(holdTimer);
                            holdTimer = false;
                            nav.stop();
                        }
                    }
                });

                self.header.bind('mousewheel', function(e, d, dX, dY) {
                    e.preventDefault();
                    if (d === -1) {
                        navNext.click();
                    } else if (d === 1) {
                        navPrev.click();
                    }
                });

                $(window).bind("resize.tabs", function(e) {
                    var navWidth = 0;
                    var arrowWidth = navPrev.outerWidth();
                    nav.find("li").each(function() {
                        navWidth += $(this).outerWidth(true);
                    });

                    var marginLeft = -(parseInt(nav.css("marginLeft"), 10)),
                        hwidth = self.header.width();

                    if (navWidth > (hwidth+marginLeft)) {
                        self.header.addClass("ui-tabs-arrow-r");
                        navNext.show("fade");
                        if (marginLeft > 0) {
                            self.header.addClass("ui-tabs-arrow-l");
                            navPrev.show("fade");
                        } else {
                            self.header.removeClass("ui-tabs-arrow-l");
                            navPrev.hide("fade");
                        }
                    } else {
                        self.header.removeClass("ui-tabs-arrows ui-tabs-arrow-l");
                        navNext.hide("fade");
                        if (marginLeft > 0) {
                            self.header.addClass("ui-tabs-arrow-l");
                            navPrev.show("fade");
                        } else {
                            self.header.removeClass("ui-tabs-arrow-l");
                            navPrev.hide("fade");
                        }
                    }
                }).trigger("resize.tabs");

                arrowsNav.find("li").bind({
                    "mouseenter focus": function(e) {
                        $(this).addClass("ui-state-hover");
                    },
                    "mouseleave blur": function(e) {
                        $(this).removeClass("ui-state-hover");
                    }
                });

                this.anchors.bind("click.tabs", function(){
                    var li = $(this).parent(),
                        arrowWidth = navPrev.outerWidth(),
                        width = li.outerWidth(true),
                        hwidth = self.header.width(),
                        pos = li.position().left,
                        marginLeft = -(parseInt(nav.stop(true,true).css("marginLeft"),10)),
                        newMargin = -1;

                    if (li.index() === 0) {
                        newMargin = 0;
                    } else if ((pos+width) >= (hwidth+marginLeft)) {
                        newMargin = pos-hwidth+width;
                        if ((li.index()+1) < nav.find("li").length) {
                            newMargin += arrowWidth;
                        }
                    } else if (pos < marginLeft) {
                        newMargin = pos-arrowWidth;
                    }

                    if (newMargin > -1) {
                        nav.animate({
                            marginLeft: -(newMargin)
                        }, 250, function(){
                            $(window).trigger("resize.tabs");
                        });
                    }
                });
            }
            return self;
        },
        _update: function(){
            console.log(arguments);
            _super._update.apply(this);
        }
    });
    $.widget("xui.tabs", $.xui.tabs);
})(jQuery);
$(function() {
    $("#tabs").tabs({
        scrollable: true,
        changeOnScroll: false,
        closable: true
    });
    $("#switcher").themeswitcher();
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-07T03:18:49.763

我在 jquery-ui 1.10.3 和 jquery-ui-1.9.2 中都找到了解决方法。JQuery 本身的版本似乎没有什么不同。

所以，在 jquery-ui-1.10.3.custom.js 的第 427 行

`$.each( existingConstructor._childConstructors, function( i, child ) {`

失败，因为 _childConstructors 未使用此扩展定义。

我已经解决了

添加检查以查看 existingConstructor._childConstructors 在 .each 之前是否未定义

原来的

```
 if ( existingConstructor ) {
            $.each( existingConstructor._childConstructors, function( i, child ) {
                    var childPrototype = child.prototype;

                    // redefine the child widget using the same prototype that was
                    // originally used, but inherit from the new version of the base
                    $.widget( childPrototype.namespace + "." + childPrototype.widgetName, constructor, child._proto );
            });
            // remove the list of existing child constructors from the old constructor
            // so the old child constructors can be garbage collected
            delete existingConstructor._childConstructors;
    } else {
            base._childConstructors.push( constructor );
    } 
```

以便其中的代码读取

```
 if ( existingConstructor ) {
        if (!(typeof existingConstructor._childConstructors === 'undefined')) {
            $.each( existingConstructor._childConstructors, function( i, child ) {
                    var childPrototype = child.prototype;

                    // redefine the child widget using the same prototype that was
                    // originally used, but inherit from the new version of the base
                    $.widget( childPrototype.namespace + "." + childPrototype.widgetName, constructor, child._proto );
            });
            // remove the list of existing child constructors from the old constructor
            // so the old child constructors can be garbage collected
            delete existingConstructor._childConstructors;
        }
    } else {
            base._childConstructors.push( constructor );
    } 
```

不是最好的解决方法，但它确实适用于 jquery-ui-1.9.2 和 jquery-ui-1.10.3 以及我尝试过的所有最近的 jquery.js。

在 jquery-ui-1.9.2.custom.js 中的行号约为 460

# c# - 带有实体框架代码的清单

> ID：13427838
> 
> 赞同：0
> 
> 时间：2012-11-17T04:58:21.260
> 
> 标签：c#, sql, entity-framework, ef-code-first

我有两个对象ListingActivity 和Activity，ListingActivities 用于将活动链接到Listings。

这是对象

```
public class ListingActivity
{
    [Key]
    public int ListingActivityId { get; set; }
    public Activity Activity { get; set; }
    public Listing Listing { get; set; }
}

public class Activity
{
    [Key]
    public int ActivityId { get; set; }
    public string Name { get; set; }
    public ListingActivity ListingActivity { get; set; }
} 
```

我想要一个清单，以便用户可以看到哪些活动已经链接到列表，然后可以选择未链接的活动。我知道如何做 UI 和一切。但是这个查询在使用 Code First Entity Framework 时会是什么样子。

我已经用 SQL 实现了类似的功能，然后它看起来或多或少像这样（免责声明：PSEUDO SQL）

```
select case when ListingActivity!=null then 'checked' else 'not checked'
from Activity
left join ListingActivity 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T19:26:00.843

这就是我想要的，把它贴在这里，它可能会帮助将来的人

```
var actList = (from a in db.Activities
                           join la in db.ListingActivities on a.ActivityId equals la.Activity.ActivityId into
                               tempActivities
                           from listingActivites in tempActivities.DefaultIfEmpty()
                           select new ListingActivityItem()
                                      {
                                          ListingActivityId = listingActivites.ListingActivityId,
                                          Activity = a,
                                          Checked = listingActivites.Listing != null
                                      }).OrderBy(p=>p.Activity.Name).ToList();
            return actList; 
```

# iphone - 如何在iphone的tableview中显示文档目录文件夹文件

> ID：13427840
> 
> 赞同：-2
> 
> 时间：2012-11-17T04:58:26.190
> 
> 标签：iphone

我是 iphone 编程新手。我在文档目录文件夹中创建了一些文件，但现在我想在表格视图中显示这些文件。我该怎么做？有人可以帮忙吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T05:12:10.747

首先，您必须创建保存在文档目录文件夹中的项目数组，您只需使用以下方法和代码：-

```
NSString *documentsDirectory = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) lastObject];

    NSFileManager *fM = [NSFileManager defaultManager];
    NSArray *fileList = [[fM directoryContentsAtPath:documentsDirectory] retain];
    directoryList = [[NSMutableArray alloc] init];
    for(NSString *file in fileList) {
        NSString *path = [documentsDirectory stringByAppendingPathComponent:file];
        BOOL isDir = NO;
        [fM fileExistsAtPath:path isDirectory:(&isDir)];
        if(isDir) {
            [directoryList addObject:file];
        }
    } 
```

创建文档目录数组后，您可以计算并显示 TableView 中的每个项目

# php - PHP中如何通过匹配元素对数组进行分组？

> ID：13427847
> 
> 赞同：1
> 
> 时间：2012-11-17T04:59:25.717
> 
> 标签：php

例子： -

```
$arrayName = array(
  '0' => array('name' => 'a', 'id' => '123'  ),
  '1' =>  array('name' => 'b', 'id' => '123'  ), 
  '3' => array('name' => 'c', 'id' => '456'  ) 
); 
```

应在此处分组相同的 Id 值

结果：

```
$arrayName = array(
  '0' => array(
    '0' =>  array('name' => 'a', 'id' => '123'  ),
    '1' => array('name' => 'b', 'id' => '123'  ) ), 
  '1' => array('1' => array('name' => 'c', 'id' => '456'  ) ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T05:09:23.827

使用您的示例集，您可以简单地遍历这些值，并根据 对数据进行分组`id`。使用类似的东西

```
$output = array();
foreach($arrayName as $data){
  $output[$data['id']][] = $data;
} 
```

其输出将是：

```
数组（2）{
  [123]=>
  数组（2）{
    [0]=>
    数组（2）{
      [“名称”]=>
      字符串（1）“一个”
      [“身份证”]=>
      字符串（3）“123”
    }
    [1]=>
    数组（2）{
      [“名称”]=>
      字符串（1）“b”
      [“身份证”]=>
      字符串（3）“123”
    }
  }
  [456]=>
  数组（1）{
    [0]=>
    数组（2）{
      [“名称”]=>
      字符串（1）“c”
      [“身份证”]=>
      字符串（3）“456”
    }
  }
}

```

如果您真的不希望`id`成为键，只需从该关联数组中获取值。

```
$output = array_values($output) 
```

```
数组（2）{
  [0]=>
  数组（2）{
    [0]=>
    数组（2）{
      [“名称”]=>
      字符串（1）“一个”
      [“身份证”]=>
      字符串（3）“123”
    }
    [1]=>
    数组（2）{
      [“名称”]=>
      字符串（1）“b”
      [“身份证”]=>
      字符串（3）“123”
    }
  }
  [1]=>
  数组（1）{
    [0]=>
    数组（2）{
      [“名称”]=>
      字符串（1）“c”
      [“身份证”]=>
      字符串（3）“456”
    }
  }
}

```

**注意**：可能有更好的方法来做到这一点，使用其他一些数组函数；但是，这显示了基本逻辑。

# mips - MIPS 汇编语言 la 偏移

> ID：13427855
> 
> 赞同：0
> 
> 时间：2012-11-17T05:00:55.110
> 
> 标签：mips

假设我有一个数组

```
ar .space 15 
```

（数组 ar 的每个元素都是一个字符，4 个字节）所以当我执行时：

```
la $r0, ar 
add $r0,$r0,1
lb $r1, 8($r0) 
```

第二行是否添加 4 个字节并指向第二个元素或 ar？第三行是否将第二个元素的地址偏移了 8 个字节，所以现在它指向 ar 的第四个元素？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T23:23:14.727

`Ar`并没有真正的“元素”，它只是 15 个字节的空间。里面的东西完全取决于你如何使用它。

如果它是一个字符列表（1 个字节！），第二条指令会将地址加 1，从而指向第二个字符。第三条指令的地址将指向第九个字符（假设执行了第二个地址）。

如果是字列表（4字节），第二个地址会生成一个字内的地址，从而提供无效数据。如果是这种情况，地址应该增加4，如果您使用第二条或第三条指令的方法，则独立。此外，您应该`lw`代替`lb`这种情况。

# java - 使用 Simple（XNA 到 Java 移植）为 XML 反序列化设置类

> ID：13427862
> 
> 赞同：1
> 
> 时间：2012-11-17T05:02:21.110
> 
> 标签：java, xml, serialization, xna

我正在尝试将我在 XNA 中使用的类移植到 Android。该类处理读取 XML 文件。

我正在使用 Simple 进行序列化/反序列化，但是我不确定如何设置类以及是否需要 getter/setter。

这是 XNA 代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Xml;
using System.Xml.Serialization;
using System.IO;

namespace spritesheetanimation
{
    // Animation frame class
    public class Frame
    {
        // Frame Number
        [XmlAttribute("Num")]
        public int Num;

        // Sub Image X positon in the Sprite Sheet
        [XmlAttribute("X")]
        public int X;

        // Sub Image Y positon in the Sprite Sheet
        [XmlAttribute("Y")]
        public int Y;

        // Sub Image Width
        [XmlAttribute("Width")]
        public int Width;

        // Sub Image Height
        [XmlAttribute("Height")]
        public int Height;

        // The X offset of sub image
        [XmlAttribute("OffSetX")]
        public int OffsetX;

        // The Y offset fo sub image
        [XmlAttribute("OffsetY")]
        public int OffsetY;

        // The duration between two frames
        [XmlAttribute("Duration")]
        public float Duration;
    }

    // Animaiton class to hold the name and frames
    public class Animation
    {
        // Animation Name
        [XmlAttribute("Name")]
        public string Name;

        // Animation Frame Rate
        [XmlAttribute("FrameRate")]
        public int FrameRate;

        public bool Loop;

        public bool Pingpong;

        // The Frames array in an animation
        [XmlArray("Frames"), XmlArrayItem("Frame", typeof(Frame))]
        public Frame[] Frames;
    }

    // The Sprite Texture stores the Sprite Sheet path.fr
    public class SpriteTexture
    {
        // The Sprite Sheet texture file path
        [XmlAttribute("Path")]
        public string Path;
    }

    // Aniamtion Set contains the Sprite Texture and Animaitons.
    [XmlRoot("Animations")]
    public class AnimationSet
    {
        // The sprite texture object
        [XmlElement("Texture", typeof(SpriteTexture))]
        public SpriteTexture SpriteTexture;

        // The animation array in the Animation Set
        [XmlElement("Animation", typeof(Animation))]
        public Animation[] Animations;
    }

    // Sprite Animation Manager class
    public static class SpriteAnimationManager
    {
        public static int AnimationCount;

        // Read the Sprite Sheet Description information from the description xml file
        public static AnimationSet Read(string Filename)
        {
            AnimationSet animationSet = new AnimationSet();

            // Create a XML reader for the sprite sheet animaiton description file
            using (System.Xml.XmlReader reader = System.Xml.XmlReader.Create(Filename))
            {
                // Create a XMLSerializer for the AnimationSet
                XmlSerializer serializer = new XmlSerializer(typeof(AnimationSet));

                // Deserialize the Animation Set from the XmlReader to the animation set object
                animationSet = (AnimationSet)serializer.Deserialize(reader);
            }

            // Count the animations to Animation Count
            AnimationCount = animationSet.Animations.Length;

            return animationSet;
        }
    }
} 
```

到目前为止与我的代码进行比较：

```
package com.example.sprites;
import java.io.InputStream;

import org.simpleframework.xml.Attribute;
import org.simpleframework.xml.Element;
import org.simpleframework.xml.ElementArray;
import org.simpleframework.xml.Root;
import org.simpleframework.xml.Serializer;
import org.simpleframework.xml.core.Persister;
import org.xml.sax.XMLReader;
import org.xml.sax.helpers.XMLReaderFactory;
import org.xmlpull.v1.XmlSerializer;

public class SpriteAnimationManag implements
java.io.Serializable {
   // Animation frame class

   @Element(name = "Frame")
   public class Frame(int num, int x, int y, int width, int height,int offsetx,int offsety, int duration )
   {
      // Frame Number
   //C# TO JAVA CONVERTER TODO TASK: Java annotations will not correspond to .NET attributes:
      //[XmlAttribute("Num")]
      @Element(name = "Num")
      public int Num;

      // Sub Image X positon in the Sprite Sheet
   //C# TO JAVA CONVERTER TODO TASK: Java annotations will not correspond to .NET attributes:
      //[XmlAttribute("X")]
      @Element(name = "X")
      public int X;

      // Sub Image Y positon in the Sprite Sheet
   //C# TO JAVA CONVERTER TODO TASK: Java annotations will not correspond to .NET attributes:
      //[XmlAttribute("Y")]
      @Element(name = "Y")
      public int Y;

      // Sub Image Width
   //C# TO JAVA CONVERTER TODO TASK: Java annotations will not correspond to .NET attributes:
      //[XmlAttribute("Width")]
      @Element(name = "Width")
      public int Width;

      // Sub Image Height
   //C# TO JAVA CONVERTER TODO TASK: Java annotations will not correspond to .NET attributes:
      //[XmlAttribute("Height")]
      @Element(name = "Height")
      public int Height;

      // The X offset of sub image
   //C# TO JAVA CONVERTER TODO TASK: Java annotations will not correspond to .NET attributes:
      //[XmlAttribute("OffSetX")]
      @Element(name = "OffSetX")
      public int OffsetX;

      // The Y offset fo sub image
   //C# TO JAVA CONVERTER TODO TASK: Java annotations will not correspond to .NET attributes:
      //[XmlAttribute("OffsetY")]
      @Element(name = "OffSetY")
      public int OffsetY;

      // The duration between two frames
   //C# TO JAVA CONVERTER TODO TASK: Java annotations will not correspond to .NET attributes:
      //[XmlAttribute("Duration")]
      @Element(name = "Duration")
      public float Duration;
   }

   // Animaiton class to hold the name and frames
   public class Animation implements
   java.io.Serializable 
   {
      // Animation Name
   //C# TO JAVA CONVERTER TODO TASK: Java annotations will not correspond to .NET attributes:
      //[XmlAttribute("Name")]
      @Element(name = "Name")
      public String Name;

      // Animation Frame Rate
   //C# TO JAVA CONVERTER TODO TASK: Java annotations will not correspond to .NET attributes:
      //[XmlAttribute("FrameRate")]
      @Element(name = "FrameRate")
      public int FrameRate;

      public boolean Loop;

      public boolean Pingpong;

      // The Frames array in an animation
   //C# TO JAVA CONVERTER TODO TASK: Java annotations will not correspond to .NET attributes:
      //[XmlArray("Frames"), XmlArrayItem("Frame", typeof(Frame))]
      @ElementArray(name = "Frames") 
      public Frame[] Frames;
   }

   // The Sprite Texture stores the Sprite Sheet path.fr
   public class SpriteTexture implements
   java.io.Serializable 
   {
      // The Sprite Sheet texture file path
   //C# TO JAVA CONVERTER TODO TASK: Java annotations will not correspond to .NET attributes:
      //[XmlAttribute("Path")]
      @Element(name = "path")
      public String Path;
   }

   // Aniamtion Set contains the Sprite Texture and Animaitons.
   //C# TO JAVA CONVERTER TODO TASK: Java annotations will not correspond to .NET attributes:
   //[XmlRoot("Animations")]
   @Root
   public static class XNAAnimationSet implements
    java.io.Serializable
   {
      // The sprite texture object
   //C# TO JAVA CONVERTER TODO TASK: Java annotations will not correspond to .NET attributes:
      //[XmlElement("Texture", typeof(SpriteTexture))]
      @Element(name = "Texture")
      public SpriteTexture SpriteTexture;

      // The animation array in the Animation Set
   //C# TO JAVA CONVERTER TODO TASK: Java annotations will not correspond to .NET attributes:
      //[XmlElement("Animation", typeof(Animation))]
      @ElementArray(name = "Animation")
      public Animation[] Animations;
   }

   // Sprite Animation Manager class
   public final static class SpriteAnimationManager implements
    java.io.Serializable
   {
      private static final String XNAAnimationSet = null;//was static private static
      public static int AnimationCount;

      // Read the Sprite Sheet Description information from the description xml file
      public static XNAAnimationSet Read(InputStream inputStream) throws Exception
      {

          XNAAnimationSet animationSet = new XNAAnimationSet();

         // Create a XML reader for the sprite sheet animaiton description file
   //C# TO JAVA CONVERTER NOTE: The following 'using' block is replaced by its Java equivalent:
//       using (System.Xml.XmlReader reader = System.Xml.XmlReader.Create(Filename))
         //System.Xml.XmlReader reader = System.Xml.XmlReader.Create(Filename);
         //XMLReader reader = XMLReaderFactory.createXMLReader(Filename);//i added this 

            // Create a XMLSerializer for the AnimationSet
            //XmlSerializer serializer = new XmlSerializer(AnimationSet);
                //i added below using simple//
             Serializer serializer = new Persister();
             //serializer.read(AnimationSet, Filename);
             try {
               animationSet = serializer.read(XNAAnimationSet.class, inputStream );
            } 
             catch (Exception e)
             {
               // TODO Auto-generated catch block
               e.printStackTrace();
            }
            ///////////////
            // Desesrialize the Animation Set from the XmlReader to the animation set object
         // animationSet = (AnimationSet)serializer1.Deserialize(reader);
            //serializer.write(AnimationSet, animationSet);
         //}
         //finally
         //{
            //reader.dispose(); //doesn'twork
      // }

         // Count the animations to Animation Count
         AnimationCount = animationSet.Animations.length;

         return animationSet;
      }
   }
} 
```

是的，我确实将代码放入了转换器，但是我对其进行了很多更改（但是尚未删除自动生成的注释）。

我只是想看看如何设置其中一个类，其余的我可能可以自己完成，但是我是一名新手程序员，过去 2 天我一直在搜索和试验，但是有几件事我不知道。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T05:44:24.930

simple-xml 的工作方式是使用标签注释一个类，然后调用一个函数来实际序列化数据。看看我[关于该主题的博客文章中的](http://robertmassaioli.wordpress.com/2011/04/21/simple-xml-in-android-1-5-and-up/)这个例子：

```
// Create the Dummy Level with Apples and Oranges
Log.i(TAG, "Create level");
Level level = new Level();
Orange orange;
level.gameObjects.add(new Apple(1, 10));
orange = new Orange(2);
orange.containedJuice = 20;
level.gameObjects.add(orange);
orange = new Orange(3);
orange.containedJuice = 100;
level.gameObjects.add(orange);
level.gameObjects.add(new Apple(4, 0));

// Now write the level out to a file
Log.i(TAG, "Write Level to file.");
Serializer serial = new Persister();
File sdcardFile = new File("/sdcard/levelout.xml");

try {
   serial.write(level, sdcardFile);
} catch (Exception e) {
   // There is the possibility of error for a number of reasons. Handle this appropriately in your code
   e.printStackTrace();
}
Log.i(TAG, "XML Written to File: " + sdcardFile.getAbsolutePath()); 
```

现在真的只有三个步骤：

1.  创建“级别”对象。
2.  创建一个“Serializer”对象并指定要写入 xml 的位置。
3.  实际上使用'serial.write'函数编写XML

要执行读取，您仍然需要一个带注释的“Level”类，但您在“Serializer”类上调用“read”函数，它会为您构造一个类。我希望这回答了你的问题。

# django - 显示来自 getlist django 的列表

> ID：13427866
> 
> 赞同：0
> 
> 时间：2012-11-17T05:03:43.577
> 
> 标签：django

我有一个用户单击一系列复选框来确定某个地方与哪些区域相关（即娱乐、体育等），然后我用以下方法检索：

```
 areas_related=request.POST.getlist('areas_related') 
```

当我在不同的地方与我正在使用的区域相关的不同视图中显示这些值时：

```
 {% for service in services %}
                    {{service.areas_related}}
                    {% endfor %} 
```

...但它显示为：

```
[u'Education', u'Food'] 
```

.. 如果我尝试创建一个 for 循环来遍历列表，则会显示每个单独的字符，一次一行。即，[u'E 等。有没有我可以用来不显示[u'等的过滤器？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T05:57:10.217

这里可能发生的是您将 存储`areas_related`为字符串。

所以你可能有一个像这样的模型：

```
class Service(models.Model):
    ...
    areas_related = models.CharField(max_length=<length_here>) 
```

然后在视图中你这样做：

```
def foo_view(request, ...):
    ...
    service = <retrieve Service here>
    areas_related = request.POST.getlist('areas_related')
    service.areas_related = areas_related
    service.save()
    ... 
```

所以这里发生的是`request.POST.getlist('areas_related')`返回一个 Python 列表。但是，然后您将该值存储到模型的字符串字段中。结果，Django 尝试将给定的列表转换为字符串，然后将其存储在数据库中；当您将 Python 列表转换为字符串时，结果是列表的字符串表示形式：

```
>>> a = [u'foo', u'foo2']
>>> unicode(a)
u"[u'foo', u'foo2']" 
```

要解决此问题，您可以执行以下操作之一：

**外键**

与其将所有这些都存储`areas_related`为模型中的单个字段，不如将它们存储为外键。我认为这是一种更好的方法，因为这样您就可以进行 SQL 聚合，并且与下一种方法相比，它被认为更灵活。

```
# models.py
class AreaRelated(models.Model):
     service = models.ForeignKey('Service', related_name='areas_related')
     areas_related = models.CharField(max_length=<length_here>)

class Service(models.Model):
    ...

# views.py
def foo_view(request, ...):
    ...
    service = <retrieve Service here>
    areas_related = request.POST.getlist('areas_related')
    for a in areas_related:
         service.areas_related.create(areas_related=a)
    ...

# template
{% for service in services %}
    {% for area_related in service.areas_related.all() %}
        {{ area_related }}
    {% endfor %}
{% endfor %} 
```

**编码字符串**

通过以某种方式对其进行编码，将列表作为字符串存储在`areas_related`模型字段中，然后在检索解码时获取列表。这种方法很好，因为所有内容都存储在 db 中的一列中，但是您不能真正对 db 进行任何查询，`areas_related`因为它将存储多个值的编码字符串，而不仅仅是一个值。

```
# models.py
import json
class Service(models.Model):
    ...
    areas_related = models.CharField(max_length=<length_here>)

    def get_areas_related(self):
         return json.loads(self.areas_related)

# views.py
import json
def foo_view(request, ...):
    ...
    service = < retrieve Service here>
    areas_related = request.POST.getlist('areas_related')
    service.areas_related = json.dumps(areas_related)
    service.save()
    ...

# template
{% for service in services %}
    {% for area_related in service.get_areas_related %}
        {{ area_related }}
    {% endfor %}
{% endfor %} 
```

# asp.net - petapoco T4 模板创建错误的 poco

> ID：13427871
> 
> 赞同：1
> 
> 时间：2012-11-17T05:04:44.707
> 
> 标签：asp.net, petapoco

我正在尝试在我的 asp.net 网站中使用 Petapoco。以下是我的 Database.tt

```
// Settings
ConnectionStringName = "Orgsetup";          // Uses last connection string in config if not specified
Namespace = "namespace";
RepoName = "myrepoName";
SchemaName = "orgSchema";
GenerateOperations = true;
GeneratePocos = true;
GenerateCommon = true;
ClassPrefix = "";
ClassSuffix = "";
TrackModifiedColumns = true;

// Read schema
var tables = LoadTables();

// Generate output
if (tables.Count>0)
{
  #>
   <#@ include file="PetaPoco.Generator.ttinclude" #>
  <# } #> 
```

**在我的 web.config 中**

```
<connectionStrings>
<add name="Orgsetup"    connectionString="Datasource=localhost;Database=dp_usermgmt;uid=root;pwd=xxxxxx;" 
providerName="MySql.Data.MySqlClient"/> 
```

运行此 Database.tt 后，我​​得到了一个巨大的 POCO 类，其中包含服务器中所有数据库中的所有表。

我正在为同一应用程序使用来自同一服务器的另外两个数据库。这两个工作完美......这是一个 Mysql Server 5.5 。这有什么问题

# g++ - 用于从类对象指针获取类名的 G++ 内置函数？

> ID：13427882
> 
> 赞同：0
> 
> 时间：2012-11-17T05:07:30.667
> 
> 标签：g++, classname, built-in

正如标题所问，它们是从类对象指针中知道类名的任何 g++ 内置函数（或任何方法）吗？例如，

```
class Base {
};
class A : public Base {
};
class B : public Base {
};

void some_func(Base *p) {
    printf("the name of class: %s", __some_g++_builtin_get_class_name(p) );
} 
```

类似于 gcc builtin 中的 __PRETTY_FUNCTION__，我希望有一个 g++ 的内置函数可以帮助我们分析源代码:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T05:20:55.217

您可以为此使用 typeid。

```
#include <cstdio>
#include <typeinfo>

class Base {
    virtual int foo() { return 0; }
};
class A : public Base {
};
class B : public Base {
};

void some_func(Base *p) {
    printf("the name of class: %s\n", typeid(*p).name() );
}

int main() {
    some_func(new A);
} 
```

不幸的是，除非你的基类至少有一个虚函数（否则类型信息可能不可用），否则它可能不会做你想做的事。

与 不同`__PRETTY_FUNCTION__`，您要查找的值无法在编译时计算。

# java - 在 cloudfoundry 中启动播放框架应用程序时出错

> ID：13427885
> 
> 赞同：-2
> 
> 时间：2012-11-17T05:08:08.487
> 
> 标签：java, mongodb, playframework, cloud-foundry, morphia

当我在 Cloud Foundry 中启动播放框架应用程序（java）时出现以下错误。我使用的是 morphia morphia 1.2.4b，播放框架 1.2.4

```
错误播放 - 无法在 PROD 模式下启动并出现错误
        com.mongodb.MongoException$Network：无法调用某些东西
                在 com.mongodb.DBTCPConnector.call(DBTCPConnector.java:211)
                在 com.mongodb.DBApiLayer$MyCollection._*查找（DBApiLayer.java:303）
                在 com.mongodb.DB.command(DB.java:159)
                在 com.mongodb.DBCollection.getCount(DBCollection.java:769)
                在 com.mongodb.DBCollection.getCount(DBCollection.java:740)
                在 com.mongodb.DBCollection.count(DBCollection.java:695)
                在 com.mongodb.gridfs.GridFS.(GridFS.java:85)
                在 play.modules.morphia.MorphiaPlugin.initMorphia* (MorphiaPlugin.java:402)
                在 play.modules.morphia.MorphiaPlugin.onApplicationStart(MorphiaPlugin.java:452)
                在 play.plugins.PluginCollection.onApplicationStart(PluginCollection.java:480)
                在 play.Play.start(Play.java:515)
                在 play.Play.init(Play.java:300)
                在 play.server.ServletWrapper.contextInitialized(ServletWrapper.java:77)
                在 org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4206)
                在 org.apache.catalina.core.StandardContext.start(StandardContext.java:4705)
                在 org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:799)
                在 org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:779)
                在 org.apache.catalina.core.StandardHost.addChild(StandardHost.java:601)
                在 org.apache.catalina.startup.HostConfig.deployDirectory(HostConfig.java:1079)
                在 org.apache.catalina.startup.HostConfig.deployDirectories(HostConfig.java:1002)
                在 org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:506)
                在 org.apache.catalina.startup.HostConfig.start(HostConfig.java:1317)
                在 org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:324)
                在 org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:142)
                在 org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1065)
                在 org.apache.catalina.core.StandardHost.start(StandardHost.java:840)
                在 org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
                在 org.apache.catalina.core.StandardEngine.start（StandardEngine.java:463）
                在 org.apache.catalina.core.StandardService.start(StandardService.java:525)
                在 org.apache.catalina.core.StandardServer.start(StandardServer.java:754)
                在 org.apache.catalina.startup.Catalina.start(Catalina.java:595)
                在 org.apache.catalina.startup.Bootstrap.start（Bootstrap.java:289）
                在 org.apache.catalina.startup.Bootstrap.main（Bootstrap.java:414）
        原因：java.io.IOException：无法连接到 [XXXX-XXXX-XXXX-XXXX-XXXX/127.0.0.1:27017] bc:java.net.ConnectException：连接被拒绝
                在 com.mongodb.DBPort._open(DBPort.java:224)
                在 com.mongodb.DBPort.go(DBPort.java:101)
                在 com.mongodb.DBPort.go(DBPort.java:82)
                在 com.mongodb.DBPort.call(DBPort.java:72)
                在 com.mongodb.DBTCPConnector.call(DBTCPConnector.java:202)
                ... 32 更多
        由于上下文停止而停止 Tomcat。

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T22:20:33.363

看起来您无法连接到云上的 mongodb 服务器。您能否检查您的配置并确保可以访问 mongodb 服务。

# php - 使用复选框禁用 jquery-ui 可排序，复选框状态存储在数据库中

> ID：13427888
> 
> 赞同：1
> 
> 时间：2012-11-17T05:08:21.157
> 
> 标签：php, jquery-ui, jquery

我正在使用 jquery-ui 可排序交互。我想要一个复选框，在选中时禁用可排序的交互。列表顺序和复选框状态都存储在 mysql 数据库中，并使用 php 代码动态加载并使用 ajax 进行更新。下面的代码适用于除列表的可排序性状态与页面首次加载时复选框状态不匹配的所有内容。第一次选中复选框后，一切正常。php 变量 $items 是一个保存列表的对象，而 $lock 保存“选中”或“未选中”。

```
<head>
<script>        
$(function() {  
        $("#sortable").sortable({stop:function(i) {
        $.post('/index.php/welcome/process_sort',     $("#sortable").sortable("serialize"))
        }})
    });
</script>
<script>    
     $(function() { 
        $("#disabler").change(function() { 
            if (this.checked) {
                $("#sortable").sortable( "option", "disabled", true );       
            } else { 
                $("#sortable").sortable("option", "disabled", false);
            }
        })
    });

</script>
</head>
<body>
<input type="checkbox" id="disabler" value="disabler" <?php echo $lock ?>  >disable<br>    </input>

<ul id="sortable">
    <?php
        foreach ($item as $row) {
        $my_id = "id_".$row->id_items;
        $my_text = $row->text;
        ?>
        <li id=<?php echo"$my_id" ?> name=<?php echo"$my_id" ?> value=<?php   echo "$my_text"?> class="ui-state-default"><span class="ui-icon ui-icon-arrowthick-2-n-s">    </span><?php echo "$my_text"?></li>
            <?php   
        }
    ?>
</ul>
</body> 
```

我尝试添加一个包含 jquery if 块的 $(document).ready 函数，但它破坏了可排序的交互。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T11:03:56.140

尝试这样的事情

```
 <script>    
   $(function() { 
      $("#disabler").change(function() { 
        if (this.checked) {
            $("#sortable").sortable( "option", "disabled", true );       
        } else { 
            $("#sortable").sortable("option", "disabled", false);
         }
      })
      checkDisable();
  });

 function checkDisable(){
   if($("#isAgeSelected").is(':checked')){
        $("#sortable").sortable( "option", "disabled", true ); 
      }
    else {
       $("#sortable").sortable("option", "disabled", false);
     }
 } 
```

# python-3.x - 如何找到给定范围内的所有素数？

> ID：13427890
> 
> 赞同：4
> 
> 时间：2012-11-17T05:08:48.940
> 
> 标签：python-3.x

```
def all primes(start,end):
    list_primes = []
    for i in range(start,end):
        for a in range(2,i):
            if i % a == 0:
                list_primes.append(i)

    return list_primes 
```

由于某种原因，它返回除素数之外的所有内容。它可能是一些愚蠢的错误。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T05:24:06.100

将您的内部循环更改为：

```
for a in range(2,i):
    if i % a == 0:
        break
else:
    list_primes.append(i) 
```

[从这里](http://docs.python.org/2/tutorial/controlflow.html#break-and-continue-statements-and-else-clauses-on-loops)复制粘贴:-)
顺便说一下，他们使用了相同的代码，例如 :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-18T14:06:18.663

试试这个（使用 Eratosthenes 筛）：

```
 def all_primes(start, end):
        return list(sorted(set(range(start,end+1)).difference(set((p * f) for p in range(2, int(end ** 0.5) + 2) for f in range(2, (end/p) + 1))))) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-17T03:01:34.827

我想分享一下我发现在一个范围内生成素数的最快方法是使用[SymPy 符号数学库](http://www.sympy.org/en/index.html)：

```
import sympy 

def all_primes(start, end):
    return list(sympy.sieve.primerange(start, end)) 
```

该`sympy.sieve.primerange()`函数返回一个生成器，因此我们需要`list()`将其转换为列表。

这是此线程中当前最受好评的已经非常优化的答案之间的性能差异示例：

```
import sympy

def get_primes_python(start, stop):
    dct = {x: True for x in list(range(start, stop+1))}
    x = start

    while x ** 2 <= stop:
        if dct[x]:
            y = x ** 2
            while y <= stop:
                dct[y] = False
                y += x
        x += 1

    lst = []
    for x, y in dct.items():
        if y:
            lst.append(x)

    return lst

def get_primes_sympy(start, stop):
    return list(sympy.sieve.primerange(start, stop)) 
```

> ```
> In [2]: %timeit test.get_primes_python(1, 10**7)
> 1 loop, best of 3: 4.21 s per loop
> 
> In [3]: %timeit test.get_primes_sympy(1, 10**7)
> 10 loops, best of 3: 138 ms per loop 
> ```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-11-07T18:14:16.800

要获取素数，请尝试实施埃拉托色尼筛法[https://en.wikipedia.org/wiki/Sieve_of_Eratosthenes](https://en.wikipedia.org/wiki/Sieve_of_Eratosthenes)

在 Python 3 中寻找 100 万个数字，对我来说大约需要 0.5 秒

```
def get_primes(start, stop):
    dct = {x: True for x in list(range(start, stop+1))}
    x = start

    while x ** 2 <= stop:
        if dct[x]:
            y = x ** 2
            while y <= stop:
                dct[y] = False
                y += x
        x += 1

    lst = []
    for x, y in dct.items():
        if y:
            lst.append(x)

    return lst

res = get_primes(2, 1000000)
print(res) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-23T01:02:39.520

你可以试试这个功能

```
def generate_primes(lower_limit,upper_limit):
    if not isprime(lower_limit):
        return False
    candidate = lower_limit
    r = []
    while(candidate <= upper_limit):
        trial_divisor = 2
        prime = 1 # assume it's prime
        while(trial_divisor**2 <= candidate and prime):
            if(candidate%trial_divisor == 0):
                prime = 0 # it isn't prime
            trial_divisor+=1
        if(prime):
            r += [candidate]
        candidate += 2
    return r

def isprime(n):
    '''check if integer n is a prime'''
    # make sure n is a positive integer
    n = abs(int(n))
    # 0 and 1 are not primes
    if n < 2:
        return False
    # 2 is the only even prime number
    if n == 2: 
        return True    
    # all other even numbers are not primes
    if not n & 1: 
        return False
    # range starts with 3 and only needs to go up the squareroot of n
    # for all odd numbers
    for x in range(3, int(n**0.5)+1, 2):
        if n % x == 0:
            return False
    return True 
```

我是从这个页面修改的[http://dunningrb.wordpress.com/2009/02/12/prime-numbers-and-a-simple-python-code/](http://dunningrb.wordpress.com/2009/02/12/prime-numbers-and-a-simple-python-code/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-12-22T12:22:36.313

尝试这个：

```
def isprime (x):
    isprime=True
    if x!=2:
        for i in range (2,x):
            if x%2==0:
                isprime=False
            break
        return isprime
x=int(input("enter a number"))
z=isprime(x)
print(z) 
```

# java - 将文件下载到客户端系统中的特定位置

> ID：13427895
> 
> 赞同：2
> 
> 时间：2012-11-17T05:10:47.257
> 
> 标签：java, security, file-upload, file-io, download

下面是我编写的用于下载文件的代码，现在我需要将文件下载到客户端系统中的特定位置。我将通过用户输入获取路径。我知道弄乱客户端系统不好，但我不得不这样做

```
 //setting the content type of response
        response.setContentType("application/"+strFileType);

        response.setHeader("content-disposition","attachment; filename="+strFileName+"."+strFileType);

        //creating a file input stream object
         InputStream input = blob.getBinaryStream();

         //declaring a variable
         int i;
         while((i=input.read())!=-1)
         {
             //writing output
             printWriter.write(i);
         }

         //closing the streams
         input.close();
         printWriter.close(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T05:29:44.763

> 我知道弄乱客户端系统不好，但我不得不这样做....

好消息（*从用户的角度来看！*）是你做不到。即使你“不得不”。专门构建了一个 Web 浏览器来阻止您（服务器端）做这种事情。

唯一的办法是在受信任的浏览器插件或小程序中实现功能，或者用户必须专门安装在他/她的机器上。

* * *

> ...在哪里使用从用户那里获取的路径，我正在像 ftp 一样对此进行编程，但服务器端是一个数据库

问题是浏览器无法判断您这样做是出于合法目的……还是试图破坏系统/用户文件、植入恶意软件或任何其他*可能*对用户有害的事情。

它不会冒险让你这样做，这是一件好事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T05:25:38.837

这需要更新浏览器的文件下载位置，[**注意：**如果我们更新此文件，所有文件都将下载到该路径]

请参考以下链接，您可能会明白：

[如何更改Firefox中的下载文件夹destination？](https://stackoverflow.com/questions/9032760/how-to-change-the-download-folder-destenation-in-firefox)

[如何在 Mac 上的 Safari、Firefox 等浏览器中以编程方式检查下载文件夹的位置？](https://stackoverflow.com/questions/13006607/how-to-check-the-location-of-download-folder-programmatically-in-browsers-like-s)

[http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/6ff178a2-5131-43d4-b4c0-efb4a2112e95](http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/6ff178a2-5131-43d4-b4c0-efb4a2112e95)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-08T06:10:53.840

如果您在 Intranet 中并且可以信任服务器，请使用具有授予访问权限的小程序或类似技术……但这又一次真的很糟糕。

# python-2.7 - Python 字符串存储

> ID：13427896
> 
> 赞同：-5
> 
> 时间：2012-11-17T05:10:58.750
> 
> 标签：python-2.7

当我将“Python”存储在 A 中并尝试打印 A[-6] 时，它会打印 P 但为什么在我尝试打印 A[6] 时会显示错误。它还为 A[-0] 和 A[0] 打印 'P' 但 A[1] 的结果是 'y' 而 A[-1] 是 'n' 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T05:23:22.553

Python**字符串**是字符的python**列表**（某种字符数组），所以它们共享一个*编号方案*......你也可以将你的字符串视为['P'，'y'，'t'，'h' ，'上']

列出编号方案：编号从 C 中的 0 开始：所以 A[0]=='P'(first element),...,A[5]=='n'(last element) 这就是为什么 A[6 ] 越界 - 与 C 中相同。

负索引是 Python 的一项功能：您可以从末尾访问 python 列表 - 从末尾开始编号 -1，因此 A[-1] 是列表中的最后一个元素，在您的情况下是 A[-1]==A [5]=='n'; 那么显然 A[-2]=='o' 等... A[-5]=='y' 和 A[-6]=='P'（第一个元素）。

A[0]==A[-0]，根据定义，我假设...

# html - Ruby on Rails、引导程序和按钮

> ID：13427899
> 
> 赞同：1
> 
> 时间：2012-11-17T05:11:52.697
> 
> 标签：html, ruby-on-rails, twitter-bootstrap

我正在使用 Rails 和 Bootstrap，我正在尝试创建 100x100 像素的大按钮，顶部有大图像，下方有文本。

我在视图中使用以下代码（部分）：

```
<button class="btn btn-large btn-vehicles btn-header-maint">
        <%= image_tag ("glyphs/Vehicles.gif" , :size => "66x66") %>
        <br></br>
        <%= link_to( "Vehicles", :controller => 'vehicles') %>
        </button> 
```

问题是只有文本作为链接，而不是整个按钮。我已经搞砸了几个小时试图解决这个问题。任何人都可以帮助正确的结构吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T05:27:29.920

您不能在`<button>`标签内嵌套链接。

您可能只想将链接本身用作按钮，将内容放入其中，并适当地设置样式：

```
<%= link_to( "Vehicles", :controller => 'vehicles') do %>
  <%= image_tag ("glyphs/Vehicles.gif" , :size => "66x66") %>
  <br></br>
<% end %> 
```

# c# - 在一个表单中更改的文本框上，使用事件和委托更改另一个表单上的 GridView 内容

> ID：13427904
> 
> 赞同：4
> 
> 时间：2012-11-17T05:13:52.817
> 
> 标签：c#, winforms, events, delegates

在**C# Winform**中，我有两种形式，第一种形式我有一个 TextBox，下一种形式我有一个 GridView，第一种形式是 TextBox 的文本。

现在我想当第一个表单的文本框中的文本发生变化时，最后一个表单的内容发生变化。
任何想法？怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T15:49:54.923

如果您不想创建自定义事件，也可以通过数据绑定实现相同的效果，假设您有一个底层模型。请参阅[这篇文章](https://stackoverflow.com/questions/1616003/winforms-data-binding-for-textbox)的答案。数据绑定可以在连接事件、手动获取和设置文本框值等方面为您省去很多麻烦（尽管它会使调试变得更加困难）。WPF 确实使数据绑定更简单，但这里有一个关于 WinForms 数据绑定的[教程。](http://www.codeproject.com/Articles/24656/A-Detailed-Data-Binding-Tutorial)在不再能够编辑他的文章后，作者至少发表了一条评论。

# javascript - 为什么在使用 JavaScript 单击输入按钮时，我的 asp.net 页面会被刷新？

> ID：13427912
> 
> 赞同：-1
> 
> 时间：2012-11-17T05:16:41.280
> 
> 标签：javascript, asp.net, html

我正在使用这样的 html 图像按钮类型：

```
<input id="wbsupld" type="image" value="upload" onclick="showwbsdiv()" src="images/Upload.png"> 
```

并且javascript函数是：

```
 function showwbsdiv() {
        document.getElementById("masswbsupld").style.display = "block";
        return false;
    } 
```

它正在显示一个 div“masswbsupld”，但问题是我的页面正在刷新并且 div 回到 display="none" 模式。

我正在使用更新面板..这是造成这种情况的原因吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T05:17:59.167

因为它的类型是`image`，所以`image`输入元素将提交您的表单。

你需要做

```
onclick="return showwbsdiv();" 
```

# intellij-idea - 在 Intellij 中，如何重新格式化特定类型的多个文件

> ID：13427913
> 
> 赞同：2
> 
> 时间：2012-11-17T05:16:54.027
> 
> 标签：intellij-idea

我在 Intellij 中有一个包含 20 多个模块的多模块项目。每个模块都包含多种文件类型，包括 java、groovy、jsp 等。过去我们发现了一些 Intellij 错误，其中运行 Reformat 和 Optimize Import 实际上可以在 Groovy 和 JSP 文件中插入错误。所以我希望能够在我的所有模块上执行一个重新格式化/优化操作，这些模块只会处理 java 文件。我希望**Scopes**功能允许我这样做，但它似乎没有像我预期的那样工作。我用于自定义范围的模式是：

```
file[*]:**/*/*.java 
```

当我深入到文件级别时，在**Edit Scopes**对话框中，Java 文件实际上是唯一出现的文件，因此 Scope 似乎正在工作。

然后在主编辑器窗口中，我展开**项目**工具窗口并在工具窗口顶部的下拉列表中选择我的新**范围。**这会在工具窗口中显示我的所有模块。然后我突出显示所有模块，右键单击并选择**Reformat Code**。但是，这仍然会重新格式化所有文件类型（groovy、jsp、java 等）。

无论**Scopes**是否是答案，有谁知道如何解决这个问题？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T06:34:58.403

它不适用于范围，并且有一个开放的功能请求来支持它，[请投票](http://youtrack.jetbrains.com/issue/IDEA-59850)。

现在您可以选择多个文件并在选定的文件中重新格式化，恐怕这是唯一的方法。

# c# - JavaScript 中的 Web 响应

> ID：13427914
> 
> 赞同：-1
> 
> 时间：2012-11-17T05:17:15.363
> 
> 标签：c#, javascript, jquery

我想从 www.xyz.com 阅读 www.abc.com - 页面（查看源代码），也可能是跨域问题。

这可以通过使用我能够阅读的 WebRequest、WebResponse、Stream 在后面的代码中实现。

但是我想在 JavaScript 或 jQuery 中做同样的事情是可能的吗？你能帮我吗。

提前致谢。

例如：通过这个我们可以在cs页面中阅读，但我想要在jquery中同样的东西

```
 WebRequest request = WebRequest.Create("http://www.abc.com");
    WebResponse response = request.GetResponse();
    Stream data = response.GetResponseStream();
    string html = String.Empty;
    Uri pgetpage = new Uri(host);
    if (pgetpage.HostNameType == UriHostNameType.Dns && (!(pgetpage.HostNameType == UriHostNameType.Unknown)))
    {
        host = "http://" + pgetpage.Host.Replace("www.", "") + "/";
    }
    string getUrl1 = host;
    html = sr.ReadToEnd(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T05:21:04.733

在正常情况下不会，因为同源策略（跨域访问）。

如果您可以修改其他服务器上的响应，您应该能够使用 CORS 或其他 x-domain 解决方案。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-17T05:21:44.500

你可以试试这个

```
$.get('www.xyz.com', function(data) {
  alert(data);
}); 
```

# c# - 从 GridView 行启动 Crystal Report

> ID：13427921
> 
> 赞同：0
> 
> 时间：2012-11-17T05:18:26.953
> 
> 标签：c#, gridview, crystal-reports

我有一个`GridView`包含许多列的列，其中包含有关付款的详细信息。我想使用 Crystal Reports 创建一个报表，这样我想选择一个特定的行，当我单击打印按钮时，我想获取该相应行的报表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T09:29:06.020

不太难。我经常提到人们[http://csharp.net-informations.com/crystal-reports/csharp-crystal-reports-string-parameter.htm](http://csharp.net-informations.com/crystal-reports/csharp-crystal-reports-string-parameter.htm)

基本上使用参数创建您的 Crystal Report 以获取 payment_id（或某种形式的“主键”），然后将打印按钮设置为执行以下操作：

```
using System;
using System.Windows.Forms;
using CrystalDecisions.CrystalReports.Engine;
using CrystalDecisions.Shared;

namespace WindowsApplication1
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            ReportDocument cryRpt = new ReportDocument();
            cryRpt.Load("PUT CRYSTAL REPORT PATH HERE\CrystalReport1.rpt");

            ParameterFieldDefinitions crParameterFieldDefinitions ;
            ParameterFieldDefinition crParameterFieldDefinition ;
            ParameterValues crParameterValues = new ParameterValues();
            ParameterDiscreteValue crParameterDiscreteValue = new ParameterDiscreteValue();

            crParameterDiscreteValue.Value = dataGridView1.SelectedRows[0].Cells["payment_id"].Value.ToString();;
            crParameterFieldDefinitions = cryRpt.DataDefinition.ParameterFields;
            crParameterFieldDefinition = crParameterFieldDefinitions["payment_id"];
            crParameterValues = crParameterFieldDefinition.CurrentValues;

            crParameterValues.Clear();
            crParameterValues.Add(crParameterDiscreteValue);
            crParameterFieldDefinition.ApplyCurrentValues(crParameterValues);

            crystalReportViewer1.ReportSource = cryRpt;
            crystalReportViewer1.Refresh(); 

        }
    }
} 
```

# php - strstr($categoryname, ' ', true) <-- TRUE 位不起作用

> ID：13427932
> 
> 赞同：1
> 
> 时间：2012-11-17T05:20:20.493
> 
> 标签：php, strstr

我正在尝试在有空格的地方拆分一个字符串，这应该很容易，

```
strstr($categoryname, ' ', true) 
```

在我的本地主机上工作正常，但在网上却不行。如果我删除 TRUE 它会返回空格后面的字符串部分，但如果有 true ，它什么也不返回，

我做错了什么，有更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T05:23:50.587

检查您的 PHP 版本。*before_needle* 参数是在 5.3.0 中添加的。如果您需要获取第一个空格之前的任何内容，还有许多其他方法可以做到这一点。一种这样的方法是使用该`explode`函数并获取结果数组中的第一项：

```
$categoryname = "This is the name";
$results = explode(" ", $categoryname);
echo $results[0]; 
```

# php - 在 PHP 上打开一个新选项卡

> ID：13427934
> 
> 赞同：2
> 
> 时间：2012-11-17T05:20:21.943
> 
> 标签：php, javascript, forms, redirect, tabs

我有一个简单的表格：

```
<form id="frm" action="process.php" method="post">
    <input type="text" id="shortcut" name="shortcut" />
</form> 
```

在`process.php`：

```
$gomenu = $_POST['shortcut'];
if(strpos($gomenu, "/") === 0) {
    //if $gomenu contains `/`, then it should open in new tab
    header('Location: newTab.php'); //--> How to open this into a new tab?
} else {
    header('Location: somePage.php'); //--> Redirect to somePage.php on the same tab
} 
```

当`shortcut`包含 的值时`/`，它应该被重定向到一个新的选项卡，否则同一个选项卡。怎么做？我知道使用 不可能做到这一点`header();`，但我不知道该怎么做。有任何想法吗？谢谢。

PS：该表单旨在通过菜单代码填写，然后它必须根据填写的菜单代码重定向页面`shortcut`（如在SAP中）。但如果它包含特定的前缀，则应采用不同的方式。

* * *

## 更新

在表格上方，我添加了这个脚本：

```
<script>
    $("#frm").ajaxForm({
        url: 'process.php', type: 'post'
    });
</script> 
```

并且在`process.php`：

```
$gomenu = $_POST['shortcut'];
if(strpos($gomenu, "/") === 0) {
    print   "<script>
                 window.open('newTab.php', '_newtab');
             </script>";
} else {
    header('Location: somePage.php');
} 
```

但随后它在一个新的弹出窗口中打开。如何在新标签页上打开它？

* * *

## 答案*（@fedmich 的答案）*

```
 $(document).ready(function () {
            $('frm#frm').submit(function(){
                var open_new_tab = false;
                var v = $('#shortcut').val();
                if(v.match('/') ){
                    open_new_tab = true;
                }

                if ( open_new_tab ) {
                    $('frm#frm').attr('target', '_blank');
                } else {
                    $('frm#frm').attr('target', '_self');
                }
            });
        }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T05:23:33.963

通过 AJAX 提交您的表单，在 PHP 的响应中发送新 URL，并使用 JavaScript 打开您的新窗口（如果您的 PHP 脚本指定它应该这样做）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-17T05:26:04.630

我认为您可以这样做，默认情况下将**目标设为空白**。

```
<form id="frm" action="process.php" method="post" target="_blank">

</form> 
```

然后在表单上提交时 submit() 并根据需要进行修改和导航。您可以在提交之前使用 javascript，更改**操作或目标**属性

[http://jsfiddle.net/fedmich/9kpMU](http://jsfiddle.net/fedmich/9kpMU)

```
$('form#frm').submit(function(){
    var open_new_tab = false;
    var v = $('#shortcut').val();
    if(v.match('/') ){
        open_new_tab = true;
    }

    if ( open_new_tab ) {
        alert('opening to new tab');
        $('form#frm').attr('target', '_blank');
        $('form#frm').attr('action', 'http://www.youtube.com');
    }
    else{
        alert('opening to self_page');
        $('form#frm').attr('target', '_self');
        $('form#frm').attr('action', 'http://www.yahoo.com');
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T05:33:51.660

```
<?php

$gomenu = $_POST['shortcut'];

if(strpos($gomenu, "/") === 0) 
{
    echo "<script type='text/javascript'>window.open('newTab.php', '_blank')</script>";
} 
else 
{
    echo "<script type='text/javascript'>window.open('newTab.php', '_parent')</script>";
}

?> 
```

# dojo - 在 BorderContainer 中调整 Dgrid 大小

> ID：13427937
> 
> 赞同：4
> 
> 时间：2012-11-17T05:20:53.483
> 
> 标签：dojo, dijit.layout, dgrid, border-container

我在启用了“liveSplitters”的 BorderContainer 中有一个 dgrid（使用 Dojo 1.8）。dgrid 很好地出现，但是当我在左列和“前导”列（dgrid 位于其中）之间移动拆分器时，dgrid 无法正确调整大小。但是，如果我稍微调整窗口大小，则 dgrid 会重新调整为适当的大小（即填充 BorderContainer 的“前导”窗格的 100%）。

我在 CSS 中将 dgrid 设置为 100% 宽度。有什么方法我需要告诉 dgrid 在拆分器移动后刷新它的大小？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-18T00:35:22.427

看看我写的这个例子，回答另一个`dgrid`相关问题：http: [//jsfiddle.net/phusick/VjJBT/](http://jsfiddle.net/phusick/VjJBT/)

您正在寻找的 CSS 规则是：

```
#grid {
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    height: auto;
} 
```

**编辑：**我认为这可能是`dgrid`版本问题，所以我将我的更新`dgrid`到最新版本 0.3.3 并为你的问题创建了一个测试：http: [//jsfiddle.net/phusick/5mHTS/](http://jsfiddle.net/phusick/5mHTS/)。

好吧，这不是版本的问题，并且 0.3.1 和 0.3.3 在调整大小时都可以正常工作`BorderContainer`，但仅限于 Chrome 和 Firefox。我在 IE9 和 Opera 12.10 中重现了这个问题：

![在此处输入图像描述](../Images/e0364e6d12d03d17aa85f6ba8536c550.png)

网格需要调用`grid.resize()`才能正确调整大小，这在 IE9/Opera 中不会在调整大小时`BorderContainer`发生，但在调整窗口大小时总是会发生。

`DijitRegistry`解决了这个问题，因为布局组件，比如`BorderContainer`and `ContentPane`，在调整大小时会调用`resize()`它们的所有**dijit**子级。

因此，无论是子类`DijitRegistry`还是在网格的父级上`dojo/aspect`侦听并调用：`resize``ContentPane``grid::resize()`

```
aspect.after(contentPane, "resize", function() {
    grid.resize();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T04:00:35.953

正如@phusick 回答的评论中所指出的，如果我使用 DijitRegistry mixin，Dgrid 会正确调整大小。我也遇到了其他一些调整大小的问题，但它们与我的 CSS 中的元素设置相对宽度有关（例如 100%）。如果我删除了 ContentPanel 不需要的大小，所有元素都会调整大小。CSS 是从 Dojo 1.5 继承而来的，显然它对在 CSS 中设置了大小的 ContentPanel 的反应方式不同。

# c# - 如何使用命令提示符编译代码？

> ID：13427948
> 
> 赞同：2
> 
> 时间：2012-11-17T05:23:17.533
> 
> 标签：c#

好吧，我已经被 IDE 宠坏了，我想学习如何使用提示符编译代码。

我在哪里可以找到好的学习材料，我完全忘记了这件事？更具体地说，我想知道如何完全使用 C# 的 csc.exe，但我希望这些知识也适用于其他编译器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T05:28:38.100

大多数编译器（以及其他命令行工具）通过使用“/？”来提供帮助。选项 - 阅读它，在大多数情况下它足以编译简单的代码。

对于更多真实案例，请使用项目文件

*   *.csproj for C#/ *.vbproj for VB.Net，使用 MSBuild 构建。如果您曾经在 VS 中创建过项目，那么您已经拥有它们。
*   许多其他编译器的生成文件

# mysql - Mysql中的插入，其中一列具有恒定值

> ID：13427953
> 
> 赞同：0
> 
> 时间：2012-11-17T05:23:40.717
> 
> 标签：mysql, database

我有一张有 2 列的表，比如 C1 和 C2。我需要插入 10 行，其中第 2 列总是相同的。

```
INSERT INTO Table
 (C1, C2)
VALUES
  (100, 'X'),
  (101, 'X'),
  (102, 'X'),
  (103, 'X'),
  (104, 'X'),
  (105, 'X'),
  (106, 'X'); 
```

有没有像下面这样的其他方法，

```
INSERT INTO Table
 (C1)
VALUES
  (100,102,103,104,105,106) 
```

C2 的值应该是`X`插入的行

提前致谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T07:47:17.483

您可以从 select 语句中应用 insert into VALUES 是硬编码的答案... insert into from select 是基于查询的插入。在下面的示例中，我使用@MySQL 变量创建一个变量“@num”并从 99 开始。然后您只需按照它描述的示例替换...任何至少具有记录数的表你想添加。所以，就我而言，我只关心至少有 10 条记录的任何表。如果你想添加 1000 条记录，并且有一张至少有这么多记录的表，请使用它。LIMIT 显然限制了您从中返回的记录数。由于您并没有真正使用表中的任何列，因此该表是什么并不重要。因此，现在@num := @num +1 将随着每条处理的记录而不断增加，因此对于“c1”列将变为 100、101、102 等，

```
INSERT INTO Table
 (C1, C2)
select
      @num := @num +1 as c1,
      'X' as c2
   from
      AnyTableThatHasAtLeastNumberOfRecordsYouWant,
      ( select @num := 99 ) sqlvars
   limit
      10 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T05:46:59.837

您将不得不创建一个表

```
CREATE TABLE `tblA` (
`C1` INT(10) NULL,
`C2` VARCHAR(50) NULL DEFAULT 'X'
); 
```

然后，当您这样做时`INSERT INTO Table (C1) VALUES (100,102,103,104,105,106);`，C2​​ 列将具有“X”作为值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-17T06:44:44.823

有一种方法或另一种方法，但并不是非常有利。如果您要做的是只写一次常量值，我会尽量保持简单并继续

```
SET @X := 'X' 
```

或者

```
SELECT @X := expression FROM ... 
```

其次是

```
INSERT INTO Table
(C1, C2)
VALUES
(100, @X), (102, @X), ...; 
```

# perl - Perl：如何使用 HTML::TableExtract 提取和组合表格的两个子部分？

> ID：13427956
> 
> 赞同：2
> 
> 时间：2012-11-17T05:24:03.243
> 
> 标签：perl, screen-scraping, web-scraping

我正在尝试抓取并提取多页数据保存表，显示每个月进口到​​中国的各种商品的价值和数量（数量）。最终，我想将此数据写入文本文件以进行进一步处理。这是[这样一个页面](http://www.chinacustomsstat.com/aspx/1/newdata/record_class.aspx?page=2&guid=951)的截图。

![中文数据导入](../Images/c6d04ea1a64e107df100e9784790f4ec.png)

具体我想提取进口货物的名称、体积单位（如吨、公斤）、实际值和体积，共4个字段。我遇到的问题是我要提取的表似乎处于不同的深度。

我可以提取 'volume' 和 'value' 的字段，因为它们的深度相同，所以我得到如下调试输出：

```
2,314 --- 2,943
20,082 --- 80,176
7 --- 62,426 
```

“名称”和“单位”字段与“体积”和“值”字段处于不同级别（我认为），因此当我对所有 4 个字段使用标题时，它们不会被拾取。但是，如果我尝试将它们提取为子表，它可以正常工作，并提供以下调试输出：

```
啤酒 --- 千升
葡萄酒 --- 千升
饲料用鱼粉 --- 万吨 
```

我应该如何解决这个问题？我的第一个想法是分别提取每个表，遍历每个表的每一行，将一个表中的 2 个字段和另一个表中的 2 个字段添加到每行有 4 个元素的数组中。（`R`我想我会创建一个数据框并`cbind`用于此。）这似乎可行，但感觉不是最佳的。所以首先我想问：

1）有没有一种直接的方法来告诉`HTML::TableExtract`提取表的两个子集并将它们组合起来？

2）如果我必须将数据提取为两个单独的表并将它们组合起来，那么最有效的方法是什么？

我到目前为止的代码如下：

```
use strict;
use HTML::TableExtract;
use Encode;
use utf8;
use WWW::Mechanize;
use Data::Dumper;

binmode STDOUT, ":utf8";

# Chinese equivalents of the various headings
my $txt_header = "单位：千美元";
my $txt_name = "商品名称";
my $txt_units = "计量单位";
my $txt_volume = "数量";
my $txt_value = "金额";

# Chinese Customs site
my $url = "http://www.chinacustomsstat.com/aspx/1/newdata/record_class.aspx?page=2&guid=951";

my $mech = WWW::Mechanize->new( agent => 'Mozilla/5.0 (Windows; U; MSIE 9.0; Windows NT 9.0; en-US)');
my $page = $mech->get( $url );
my $htmlstuff = $mech->content();

print ("\nFirst table with two headers (volume and value) at same depth\n\n");
my $te = new HTML::TableExtract( depth => 1,  headers => [ ( $txt_volume, $txt_value ) ]);
$te->parse($htmlstuff);

# See what we have
foreach my $ts ( $te->tables ) {
    print "Table (", join( ',', $ts->coords ), "):\n";
    foreach my $row ( $ts->rows ) {
        print join( ' --- ', @$row ), "\n";
    }
}

print ("\nSecond table with 'name' and 'units'\n");

$te = new HTML::TableExtract( headers => [ ( $txt_name, $txt_units ) ]);
$te->parse($htmlstuff);

# See what we have in the other table
foreach my $ts ( $te->tables ) {
    print "Table (", join( ',', $ts->coords ), "):\n";
    foreach my $row ( $ts->rows ) {
        print join( ' --- ', @$row ), "\n";
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T04:17:53.440

看起来该表确实是实现了嵌套表。在这种情况下，在我看来，您的应用程序将需要通过单独解析表格并将结果拼接在一起来弥补这一点。

我对您的示例代码采取了一些自由，并提出了这个：

```
#!/usr/bin/perl

use utf8;
use strict;
use warnings;
{
    use WWW::Mechanize;
    use HTML::TableExtract;
    use Data::Dumper;
    use Text::FormatTable;
}

binmode STDOUT, ':utf8';

my $txt_name   = '商品名称';
my $txt_units  = '计量单位';
my $txt_volume = '数量';
my $txt_value  = '金额';

my $url
    = 'http://www.chinacustomsstat.com'
    . '/aspx/1/newdata/record_class.aspx'
    . '?page=2&guid=951';

my $mech = WWW::Mechanize->new(
    agent => 'Mozilla/5.0 (Windows; U; MSIE 9.0; Windows NT 9.0; en-US)' );

my $page = $mech->get($url);
my $html = $mech->content();

my %data_for;
{
    my %config_for = (
        products => {
            values  => [],
            headers => [ $txt_name, $txt_units ],
        },
        data => {
            values  => [],
            headers => [ $txt_volume, $txt_value ],
        },
    );

    for my $type ( keys %config_for ) {

        my $config_rh = $config_for{$type};

        my $te = HTML::TableExtract->new( headers => $config_rh->{headers} );

        $te->parse($html);

        for my $ts ( $te->tables() ) {

            for my $row_ra ( $ts->rows() ) {

                if ( defined $row_ra->[0] ) {

                    push @{ $config_rh->{values} }, $row_ra;
                }
            }
        }
    }

    if ( @{ $config_for{products}->{values} }
        != @{ $config_for{data}->{values} } )
    {
        warn 'not as many value rows were parsed as product rows';
    }

    for my $i ( 0 .. $#{ $config_for{products}->{values} } ) {

        my $product_ra = $config_for{products}->{values}->[$i];
        my $data_ra    = $config_for{data}->{values}->[$i];

        my ( $product, $units ) = @{$product_ra};
        my ( $volume,  $value ) = @{$data_ra};

        $data_for{$product} = {
            units  => $units,
            volume => $volume,
            value  => $value,
        };
    }
}

# process results in %data_for hash
{
    my $table = Text::FormatTable->new('| l | l | l | l |');

    $table->head( $txt_name, $txt_units, $txt_volume, $txt_value, );
    $table->rule('=');

    for my $product ( keys %data_for ) {

        $table->row(
            $product,
            @{ $data_for{$product} }{qw( units volume value )}
        );
        $table->rule('-');
    }

    print $table->render();
}

__END__ 
```

我对 Text::FormatTable 处理（或不处理）宽字符的方式有点失望。但我认为这与这个例子无关。

# javascript - Backbone.js 相当于 django humanize - int.word 和 int.comma - 使用 underscore.string

> ID：13427960
> 
> 赞同：1
> 
> 时间：2012-11-17T05:24:22.693
> 
> 标签：javascript, django, backbone.js, underscore.js

是否可以执行`int.word|int.comma`与 underscore.string 等效的操作？我想对以下单元格执行此操作。

```
<td class="nowValue"><%= careerStrikes %>/<%= avgStrikesPG %></td> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T04:10:58.400

既不提供`Backbone`也不`Underscore`提供类似人性化的方法集。您需要自己编写或使用许多可用的库之一来执行此操作。一个例子在[这里](https://github.com/taijinlee/humanize)。

# ruby - 轨道如何确定物体的路径？

> ID：13427965
> 
> 赞同：0
> 
> 时间：2012-11-17T05:25:14.910
> 
> 标签：ruby, ruby-on-rails-3

我一直在努力实现自己的 ORM。我想知道 rails path helper 如何从对象中提取 ID。例如，我将如何为我的 ORM 进行这项工作？

```
@contact = Contact.first
contact_path(@contact) 
```

任何帮助将不胜感激！

**更新：**

我的对象确实有一个 ID 属性并对其做出响应。但是路径助手返回一个错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T08:42:04.890

简而言之，您希望符合 activemodel。这将使 url 助手、form_for(@contact) 等工作。

您还可以（可选地）使用一堆模块来处理诸如验证、脏属性等事情。

您必须实现的方法很少。还有一个 [ActiveModel::Lint](http://api.rubyonrails.org/classes/ActiveModel/Lint/Tests.html)模块可以测试您对这些原语的实现是否有效，并且还可以用作文档。特别是您需要实现`to_param`和`persisted?`. 我认为一些命名的东西只有在你做类似的事情时才会被使用`link_to 'foo', @contact`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T05:39:51.767

该方法检查您是否已将对象或整数传递给它。如果它是一个对象并且该对象有一个`id`方法 ( `respond_to?(:id)`)，它使用它的 ID。非常简单。

# php - HTML 如何自动选择一个复选框？

> ID：13427966
> 
> 赞同：1
> 
> 时间：2012-11-17T05:25:20.450
> 
> 标签：php, html, checkbox, html-table

我有以下 HTML 代码：

```
<table border = 0 cellpadding=5 >

<tr>
<td><input type="checkbox" name="all_sizes" value="All">All<br></td>
<td><input type="checkbox" name="10mm" value="10mm">10mm<br></td>
<td><input type="checkbox" name="20mm" value="20mm">20mm<br></td>
<td><input type="checkbox" name="30mm" value="30mm">30mm<br></td>
<td><input type="checkbox" name="40mm" value="40mm">40mm<br></td>
</tr>
</table> 
```

默认情况下，我们将如何选择第一个复选框？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-17T05:25:20.450

改变这个：

```
<td><input type="checkbox" name="all_sizes" value="All">All<br></td> 
```

为此（添加关键字'checked'）：

```
<td><input type="checkbox" name="all_sizes" value="All" checked>All<br></td> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-17T05:32:42.937

假设您已使用 mysql 从 mysql 获取数据`mysqli_query()`

```
<td><input type="checkbox" name="all_sizes" value="All" <?php if($data['col_name'] == 'val') { echo 'checked'; }?>>Value</td> 
```

# java - android json解析不断加载

> ID：13427973
> 
> 赞同：0
> 
> 时间：2012-11-17T05:25:57.763
> 
> 标签：java, android, json

我不是 android 平台的新手，我之前解析过很多 json 页面，但是一个链接正在产生问题。我正在使用以下函数来返回 json 对象。程序在 reader.readline() 处停止并且加载不会停止。

```
public JSONObject getJSONFromUrl(String url) {
    DefaultHttpClient httpClient = new DefaultHttpClient();

    try {

        HttpResponse httpResponse = httpClient.execute(new HttpGet(url));
        if (httpResponse.getStatusLine().getStatusCode()==200)
        {
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();
        }

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
        System.out.println("Unsupported Encoding");
    } catch (ClientProtocolException e) {
        e.printStackTrace();
        System.out.println("Client Protocol");
    } catch (IOException e) {
        e.printStackTrace();
        System.out.println("IO");
    }

    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "iso-8859-1"),8);
        StringBuilder sb = new StringBuilder();
        String line = null;

       while ((line = reader.readLine()) != null) {
            sb.append(line);

        }
        is.close();
        jsonStr = sb.toString();
    } catch (Exception e) {
        System.out.println("Error here");
        Log.e("Buffer Error", "Error converting result " + e.toString());
    }

    // try parse the string to a JSON object
    try {

        jObj = new JSONObject(jsonStr);

    } catch (JSONException e) {
        Log.e("JSON Parser", "Error parsing data " + e.toString());
    }

    return jObj;

} 
```

任何人都可以提出一些建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T04:29:35.113

我很确定这是由于服务器没有完成您的响应造成的。尝试首先使用“curl”作为客户端来隔离它。

如果您像这样使用 EntitUtils，还有一种更简单的方法可以将正文提取到 String 中：

```
EntityUtils.toString(entity); 
```

您还可以将编码指定为第二个参数。 [http://developer.android.com/reference/org/apache/http/util/EntityUtils.html](http://developer.android.com/reference/org/apache/http/util/EntityUtils.html)

# java - 校验和函数中的逻辑不正确

> ID：13427976
> 
> 赞同：0
> 
> 时间：2012-11-17T05:26:27.933
> 
> 标签：java, object

```
public class CreditCardNumber {
private String issuerID = "000000";
private String accountNum = "999999999";
private int checkDigit = 0;

public CreditCardNumber(String TempissuerID, String TempaccountNum) {
    if (TempissuerID != null && TempaccountNum != null
            && TempissuerID.length() == 6 && TempaccountNum.length() == 9)
        if (Digits(TempissuerID) && Digits(TempaccountNum)) {
            issuerID = TempissuerID;
            accountNum = TempaccountNum;
            calcCheckDigits();
        }
}

public boolean Digits(String temp1) {
    String temp = "0123456789";
    int count = 0;
    for (int i = 0; i < temp1.length(); i++)
        for (int j = 0; j < temp.length(); j++)
            if (temp1.charAt(i) == temp.charAt(j)) {
                count++;

            }
    if (count == temp1.length()) {
        return true;
    }
    return false;
}

public CreditCardNumber() {
}

public String getID() {
    return issuerID;
}

public String getAccNum() {
    return accountNum;
}

public int getDigits() {
    return checkDigit;
}

private void calcCheckDigits() {
    int sum;
    sum = checkSum();
    if ((sum + checkDigit) % 10 != 0) {
        checkDigit = sum - (sum % 10);
    }
    System.out.printf("%d", checkDigit);
}

public void CreateCred(String TempissuerID) {
    if (TempissuerID != null && TempissuerID.length() == 6
            && Digits(TempissuerID)) {
        issuerID = TempissuerID;
    } else {
        issuerID = "000000";
    }
    StringBuilder TempString = new StringBuilder();
    for (int i = 0; i < 9; i++) {
        TempString = TempString.append((Math.random() * (9 - 0 + 1) + 0));
    }
    accountNum = TempString.toString();
    calcCheckDigits();
}

private int checkSum() {
    StringBuilder temp = new StringBuilder();
    int num;
    int sum = 0;
      for(int i = 0 ; i <issuerID.length();i++)
         {
                 temp = temp.append(issuerID.charAt(i));
         }
                 for(int j = 0 ; j < accountNum.length(); j++)
                 {            
                     temp = temp.append(accountNum.charAt(j));
                 }

    System.out.println(temp);
    for (int k = 0; k < temp.length(); k += 2) {
        num = temp.charAt(k) - '0';
        num *= 2;
        if (num > 9)
            num = 1 + (num % 10);
        temp.setCharAt(k, (char) num);
    }
    for (int v = 0; v < temp.length(); v++) {
        sum += temp.charAt(v) - '0';
    }
    System.out.printf("%d", sum);
    return sum;
}

public String toString() {
    String s = "";
        String str = issuerID + accountNum;

        return str;
    }
} 
```

我的校验和方法有问题，我写了一些 printf 语句来检查 sum 的值，结果是 -930 但这不是 sum 的值，如果只添加没有理由有一个负号。当我为 issuerID 输入 321321 和为 accountNum 输入 654654654 时，我希望 checkDigit 编号为 9，并且校验和中的 sum 值将传递给 calCheckDigits 方法以获取 CheckDigit 的值为 9。

我在这种方法中做错了什么？

好的，我现在只编辑代码，总和得到 -30

我只是再次编辑校验和中的前 2 个 for 循环错误，导致我的临时字符串值不正确

现在它得到 -320 仍然不正确但越来越好

# php - 返回 NULL 的 JSON 元素

> ID：13427978
> 
> 赞同：2
> 
> 时间：2012-11-17T05:26:53.783
> 
> 标签：php, json

我是 JSON 新手，在出现错误时检查是否收到错误消息时遇到问题。当结果不是错误时，我的代码可以正常工作，所以我确实有点理解我在做什么。
这是我试图解析的错误 JSON：

```
{
   "error": {
      "message": "Unsupported get request.",
      "type": "GraphMethodException",
      "code": 100
   }
} 
```

这是我失败的代码：

```
$jsonurl = "http://graph.facebook.com/JubilationDanceMinistry";
//valid $jsonurl = "http://graph.facebook.com/WhitworthACM";
$json = file_get_contents($jsonurl,0,null,null);
$json_output = json_decode($json);

var_dump($json_output);
// This returns NULL

if (property_exists($json_output->error)) {
        echo "<p>error: $json_output->error->{'message'} </p>";
    } else {
        echo "<p>no error :(</p>";
}

$facebook_id = $json_output->{'id'};
$facebook_name = $json_output->{'name'};
$facebook_link = $json_output->{'link'}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T05:39:21.517

因为 url 返回`400 Bad Request`.

默认情况下，当 http 状态码为 时，不能使用`file_get_contents`函数获取响应内容`400`。

您需要将`ignore_errors`选项设置为`true`.

```
$opts = array(
  'http'=>array(
    'ignore_errors' => true
  )
);
$context = stream_context_create($opts);
$jsonurl = "http://graph.facebook.com/JubilationDanceMinistry";
$json = file_get_contents($jsonurl, false, $context);
var_dump($json); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T05:37:30.057

您不能将多个`->`' 与字符串插值链接起来。

您将不得不求助于将多个参数传递`echo`给字符串连接或字符串连接：

```
 echo "<p>error: ", $json_output->error->{'message'}, " </p>"; 
```

# scheme - 如何将表达式列表拆分为代码？

> ID：13427979
> 
> 赞同：1
> 
> 时间：2012-11-17T05:27:05.887
> 
> 标签：scheme, racket

我的项目有一个实验，基本上，我需要在代码中*嵌入*一些 s-expression 并使其运行，就像这样，

```
(define (test lst)
    (define num 1)
    (define l (list))
    `@lst) ; oh, this is not the right way to go.

  (define lst
    `( (define num2 (add1 num))
      (displayln num2))) 
```

我希望`test`功能就像`test(lst)`在球拍代码中一样：

```
(define (test lst)
    (define num 1)
    (define l (list))
    (define num2 (add1 num)
    (displayln num2)) 
```

我怎样才能在球拍中做到这一点？

**更新** 我想使用的原因`eval`或之前的问题是我正在使用 Z3 球拍绑定，我需要生成公式（它使用球拍绑定 API），然后我会在某个时候触发查询，这就是我需要的时候评估这些代码。在我的情况下，我还没有想出其他方法......一个超级简单的例子是，想象一下
`(let ([arr (array-alloc 10)])`
`(array-set! arr 3 4))`

我有一些模型来分析结构（所以我没有直接使用racketZ3），在每个分析点的过程中，我都会将程序中的数据类型映射到Z3类型中，并做出一些断言，

我会生成类似的东西：

*   在分配站点，我需要制定以下公式：

    `(smt:declare-fun arr_z3 () IntList)`
    `(define len (make-length 10))`

*   然后在数组集站点，我将有以下断言并检查 3 是否小于长度

    `(smt:assert (</s 3 (len arr_z3)))`
    `(smt:check-sat)`

*   最后，我将收集如上生成的公式，并将它们包装成能够触发 Z3 绑定的形式，以将以下收集的信息作为代码运行：

    `(smt:with-context
    (smt:new-context)
    (define len (make-length 10))
    (smt:assert (</s 3 (len arr_z3))) (smt:check-sat))`

这是我能想到的超级简单的例子……有意义吗？
*旁注*。Z3 Racket binding 在 5.3.1 版本上会因为某种原因崩溃，但它在 5.2.1 版本上大部分都可以工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T12:06:43.020

*警告：如果您不熟悉函数在 Scheme 中的工作原理，请忽略答案！宏是一种高级技术，您需要先了解函数。*

听起来你在问宏。这是一些定义`test`为打印函数的代码`2`：

```
 (define-syntax-rule (show-one-more-than num)
   (begin 
     (define num2 (add1 num))   
     (displayln num2)))

 (define (test) 
   (define num1 1)
   (show-one-more-than num1)) 
```

现在，我可以（并且应该！）编写`show-one-more-than`为函数而不是宏（如果您更改`define-syntax-rule`为，代码仍然可以工作`define`），但宏实际上是通过在其调用站点生成代码来操作的。所以上面的代码扩展为：

```
 (define (test)
   (define num1 1)
   (begin 
     (define num2 (add1 num1))
     (displayln num2))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T16:55:37.097

如果不更好地了解问题，很难说解决这个问题的正确方法是什么。蛮力方法，例如：

```
#lang racket

(define (make-test-body lst)

  (define source `(define (test)
                    (define num 1)
                    (define l (list))
                    ,@lst))
  source)

(define lst
  `((define num2 (add1 num))
    (displayln num2)))

(define test-source
  (make-test-body lst))

(define test
  (parameterize ([current-namespace (make-base-namespace)])
    (eval `(let ()
             ,test-source
             test))))

(test) 
```

可能是你想要的，但可能不是。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-17T09:37:39.220

老实说，我不明白你到底想达到什么目的。引用 N. Holm，Sketchy Scheme，第 4.5 版，p。108：»准引用的主要目的是构建仅包含几个可变部分的固定列表结构«。我认为不会在您所针对的上下文中使用准引用。

对于 quasiquotation 的典型上下文，请考虑以下示例：

```
(define (square x)
  (* x x))

(define sentence
  '(The square of))

(define (quasiquotes-unquotes-splicing x)
  `(,@sentence ,x is ,(square x)))

(quasiquotes-unquotes-splicing 2)
===> (The square of 2 is 4) 
```

# python - 生成 HTML 代码的逻辑问题

> ID：13427981
> 
> 赞同：0
> 
> 时间：2012-11-17T05:27:09.743
> 
> 标签：python, html

我正在尝试使用下面的代码（粘贴链接）生成 HTML 代码，预期的输出如下所示，我得到一个输出，其中 CR 值被添加了两次，而且 http 链接也不正确......谁能帮助审查逻辑看看我哪里出错了

我的代码：-

```
 http://pastie.org/5391102 
```

输入如下

```
http://pastie.org/5390316(if you copy/paste ,make sure they are tab seperated,otherwise you will get a key error) 
```

预期输出：-

```
<table cellspacing="1" cellpadding="1" border="1">
<tr>
<th bgcolor="#67B0F9" scope="col">CR</th>
<th bgcolor="#67B0F9" scope="col">FA</th>
 <th bgcolor="#67B0F9" scope="col">CL</th>
<th bgcolor="#67B0F9" scope="col">Title</th>
 </tr>
<tr>
 <td><a href="http://prism/CR/409452">409452</a></td>
 <td>WLAN</td>
<td>656885</td>
<td>Age out RSSI values from buffer </td>
</tr>
<tr>
<td><a href=http://data/409452>409452</a>,<a href=http://data/12345>12345</a></td>
<td></td>
<td></td>
<td>To Record HAL and SLM FW Event Logging</td>
</tr>
</table> 
```

我当前的输出：

```
<table cellspacing="1" cellpadding="1" border="1">
<tr>
<th bgcolor="#67B0F9" scope="col">CR</th>
<th bgcolor="#67B0F9" scope="col">FA</th>
<th bgcolor="#67B0F9" scope="col">CL</th>
<th bgcolor="#67B0F9" scope="col">Title</th>
</tr>
 <tr>
  <td><a href="http://prism/CR/409452">409452</a></td>
<td><a href="http://prism/CR/409452">409452</a></td>
 <td><a href=http://prism/CR/Title>Title</a></td>
 <td>wlan</td>
 <td>656885</td>
 <td>Age out rssi values from buffer</td>
</tr>
 <tr>
<td><a href="http://prism/CR/409452, 12345">409452, 12345</a></td>
<td><a href="http://prism/CR/409452, 12345">409452, 12345</a></td>
<td><a href=http://prism/CR/Title>Title</a></td>
<td></td>
<td></td>
 <td>To Record HAL and SLM FW Event Logging</td>
 </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T02:40:12.190

这是我承诺的输入。

```
def CRlistToTable(CRlist):
    """ Create HTML table from CRlist data """
    CRstrings = ['<table cellspacing="1" cellpadding="1" border="1">']

    # create table's header row from the first row of CRlist
    BGCOLOR = '#67B0F9' # column header cells background color
    cols = CRlist[0]  # column names given in first row
    CRstrings += ['  <tr>', '\n'.join(
                  '    <th bgcolor="{}" scope="col">{}</th>'.format(BGCOLOR, col_name)
                     for col_name in cols),
                  '  </tr>']

    # create a template for remaining non-header table rows
    TR_TEMPLATE = ['  <tr>',
                   '    <td>',
                   '      {}',  # for dynamically generated CR links
                   '    </td>', '\n'.join(
                  ['    <td>{}</td>'] * (len(cols)-1)), # one per remaining cols
                   '  </tr>']
    TR_TEMPLATE = '\n'.join(TR_TEMPLATE) # convert to a string

    # apply the row template created to remaining CRlist rows
    CR_LINK_TEMPLATE = '<a href=http://data/{0}>{0}</a>'
    for row in CRlist[1:]:
        if ',' not in row[0]:  # no comma-delimited items in first column?
            links = CR_LINK_TEMPLATE.format(row[0])
        else:
            CRs = row[0].replace(',', ' ').split()
            links = ',\n      '.join(CR_LINK_TEMPLATE.format(cr) for cr in CRs)
        row[0] = links
        CRstrings += [TR_TEMPLATE.format(*row)]

    CRstrings += ["</table>"]

    # return string list merged to a single long newline-delimited string
    return '\n'.join(CRstrings) + '\n'

with open('cr_fixes_tabbed.xml') as file:
    xmldata = file.read()  # read entire file into memory

FIXES_START_TAG, FIXES_END_TAG = '<Fixes>, </Fixes>'.replace(',', ' ').split()
# embedded fixes info starts right after the tag itself within the xml data
xmlFixesStart = xmldata.find(FIXES_START_TAG) + len(FIXES_START_TAG)
xmlFixesEnd = xmldata.find(FIXES_END_TAG)

# extract portion of file data within the FIXES tags into a list of lines
info = xmldata[xmlFixesStart:xmlFixesEnd].strip().splitlines()

# split non-blank lines of tab-delimited data into list of rows of column data
CRlist = [line.split('\t') for line in info if line] # skips blank lines

crInfo = CRlistToTable(CRlist) # convert list into html table
print crInfo 
```

输出：

```
<table cellspacing="1" cellpadding="1" border="1">
  <tr>
    <th bgcolor="#67B0F9" scope="col">CR</th>
    <th bgcolor="#67B0F9" scope="col">FA</th>
    <th bgcolor="#67B0F9" scope="col">CL</th>
    <th bgcolor="#67B0F9" scope="col">Title</th>
  </tr>
  <tr>
    <td>
      <a href=http://data/409452>409452</a>
    </td>
    <td>WLAN</td>
    <td>656885</td>
    <td>Age out RSSI values from buffer</td>
  </tr>
  <tr>
    <td>
      <a href=http://data/409452>409452</a>,
      <a href=http://data/12345>12345</a>
    </td>
    <td></td>
    <td></td>
    <td>To Record HAL and SLM FW Event Logging</td>
  </tr>
</table> 
```

浏览器视图：

![在浏览器中查看的 html 输出](../Images/efcb067d812c6f65b34e74b997bc1f73.png)

# iphone - xcode：故事板自动像素到点转换？

> ID：13427984
> 
> 赞同：0
> 
> 时间：2012-11-17T05:27:33.843
> 
> 标签：iphone, xcode, storyboard, scale, resolution

当为情节提要应用 Retina 4 时，它将提供 320 点 x 480 点的分辨率，即 640 x 960 像素。

但是，当通过将 UIView 或 UIButton 的图像从媒体库拖到 VC 中来添加图像时，[不是以编程方式]

假设图像的分辨率为 50 x 50 像素，

而不是在故事板中出现 25 点乘 25 点，

它会出现 50 点乘 50 点。

是否可以将像素到点的转换设置为自动触发，而不必稍后将图像压缩到一半？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T07:46:15.787

是的 - 图像文件名末尾必须有 @2x，因此界面生成器知道它是视网膜资产。您还应该包含一个具有纯文件名的非视网膜版本。

# php - 裁剪扭曲/缩放图像

> ID：13427986
> 
> 赞同：2
> 
> 时间：2012-11-17T05:27:56.593
> 
> 标签：php, image, gd, crop, image-resizing

我有以下 PHP 代码：

```
$w = 300; // Width of new image
$h = 300; // Height of new image
$oh = 540; // Original file height
$ow = 720; // Original file width
$x = 196;
$y = 50;

$image = imagecreatefromjpeg('fileToCrop.jpg');
$cropped_image = imagecreatetruecolor($w, $h);
imagecopyresampled($cropped_image, $image, 0, 0, $x, $y, $ow, $oh, $w, $h);

imagejpeg($cropped_image, 'fileToCrop.jpg', 100); 
```

并想裁剪图像，但我的图像扭曲/高于原始图像，例如：

**原来的：**

![在此处输入图像描述](../Images/d4309c44e8a956624e78507b7a5236d9.png)

**裁剪（显示“不”的“N”）：**

![在此处输入图像描述](../Images/d6581480d05b52bdea50fc1cd2b87140.png)

我看不出我的代码有什么问题，并且图像发生的事情变得更大..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T05:47:16.877

你倒置了最后 4 个参数`imagecopyresampled`

```
bool imagecopyresampled ( resource $dst_image , resource $src_image , int $dst_x , int $dst_y , int $src_x , int $src_y , int $dst_w , int $dst_h , int $src_w , int $src_h ) 
```

改变它

```
imagecopyresampled($cropped_image, $image, 0, 0, $x, $y, $w, $h, $ow, $oh); 
```

但事实上，您确定您不是在寻找裁剪区域的直接副本吗？

```
imagecopy($cropped_image, $image, 0, 0, $x, $y, $ow, $oh); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T05:45:50.417

因为您省略了 imagejpeg() 上的质量，所以它默认为 75% [http://php.net/manual/en/function.imagejpeg.php](http://php.net/manual/en/function.imagejpeg.php)

您可以尝试在第三个参数上添加 95 吗？

```
imagejpeg($cropped_image, 'fileToCrop.jpg', 95); 
```

PS 如果你可以使用 3rdparty php 脚本，我建议你只使用 timthumb [http://www.binarymoon.co.uk/projects/timthumb/](http://www.binarymoon.co.uk/projects/timthumb/)

如果您需要改变种植地点，

[http://www.binarymoon.co.uk/2010/08/timthumb-part-4-moving-crop-location/](http://www.binarymoon.co.uk/2010/08/timthumb-part-4-moving-crop-location/)

# objective-c - 通用尺寸的所有 iPhone 的 ImageView

> ID：13427987
> 
> 赞同：1
> 
> 时间：2012-11-17T05:28:22.657
> 
> 标签：objective-c, ios, xcode

因此，通常在情节提要上，您为图像视图分配您想要的图像 (foo.png)，然后如果手机在 iPhone 4 或 4s (foo@2x.png) 上，手机会自动升级到视网膜版本。

问题是，如何让图像在 4 英寸 iPhone 5 上正确显示？当我在模拟器中尝试它时，一切都变得不正常了，Apple 还没有像他们对 iPhone 4 的 Retina 显示屏所做的那样，用一个简单的解决方案来解决这种情况。有什么帮助吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T09:59:32.653

通过将 default@2x-568.png 文件添加到您的项目中，可以非常简单地添加 iPhone 5 支持。除此之外，这只是确保应用程序正确缩放到新大小的情况。确保您的视图以编程方式或通过在您的 UI 档案（XIB 或 Storyboard）中正确设置弹簧和支柱来适应新大小。您不需要任何新图像 (*)。如果您已经支持视网膜设备，那么您只需要像上面那样添加新的启动画面。

(*) 如果您出于任何原因这样做，我建议您阅读以下答案： [ios6 UIImageView - Loading -568h image](https://stackoverflow.com/questions/12567456/ios6-uiimageview-loading-568h-image)

Apple 没有提供在 iPhone 5 上使用不同图像的好方法，因为您不应该使用任何图像！

# shell - shell脚本如何在所有行中以特定字符串开头的2个字符之间替换字符串？

> ID：13427993
> 
> 赞同：1
> 
> 时间：2012-11-17T05:28:49.083
> 
> 标签：shell, unix, scripting, sed, awk

我有一个如下所示的文本文件，如果`^`行`|`以`^`特定字符串开头（在这个例子是`MMX`。

文本文件原文：

```
General start, this is a test file.
TAG okay, this line not need to be processed.
MMX ABCD ^string1|other strings abc
CCF ABCD ^string2|other strings cde, skip line
MMX CDEE ^String3|other strings aaa
MMX AAAA ^String4|other strings bbb
CCD BBBB ^String5|other strings ccc, skip line 
```

修改后的文本文件应该是：

```
General start, this is a test file.
TAG okay, this line not need to be processed.
MMX ABCD ^string1^String1|other strings abc
CCF ABCD ^string2|other strings cde, skip line
MMX CDEE ^String3^String3|other strings aaa
MMX AAAA ^String4^String4|other strings bbb
CCD BBBB ^String5|other strings ccc, skip line 
```

如何使用 shell 脚本来执行这项工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T06:29:32.790

这是一种使用方法`sed`：

```
sed '/^MMX/s/\(\^[^|]*\)/\1\1/' file.txt 
```

结果：

```
General start, this is a test file.
TAG okay, this line not need to be processed.
MMX ABCD ^string1^string1|other strings abc
CCF ABCD ^string2|other strings cde, skip line
MMX CDEE ^String3^String3|other strings aaa
MMX AAAA ^String4^String4|other strings bbb
CCD BBBB ^String5|other strings ccc, skip line 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T18:30:39.817

只是为了完整性：

```
$ awk '/^MMX/{sub(/\^[^|]+/,"&&")}1' file
General start, this is a test file.
TAG okay, this line not need to be processed.
MMX ABCD ^string1^string1|other strings abc
CCF ABCD ^string2|other strings cde, skip line
MMX CDEE ^String3^String3|other strings aaa
MMX AAAA ^String4^String4|other strings bbb
CCD BBBB ^String5|other strings ccc, skip line 
```

但我会使用已发布的 sed 解决方案之一，因为这是单行的简单替换，这是 sed 擅长的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T08:45:37.783

```
perl -plne "if(/^MMX/){$_=~s/([^\^]*)([^\|]*)(.*)/$1$2$2$3/g;}" your_file 
```

测试如下：

```
>perl -plne "if(/^MMX/){$_=~s/([^\^]*)([^\|]*)(.*)/$1$2$2$3/g;}" new.txt
General start, this is a test file.
TAG okay, this line not need to be processed.
MMX ABCD ^string1^string1|other strings abc
CCF ABCD ^string2|other strings cde, skip line
MMX CDEE ^String3^String3|other strings aaa
MMX AAAA ^String4^String4|other strings bbb
CCD BBBB ^String5|other strings ccc, skip line 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-17T06:31:10.583

您可以提供`sed`一个“地址”，它是执行命令的行的过滤器：

```
sed '/^MMX/s/\^(.*)\|/^\1^\1|/g' 
```

在这种情况下，地址是`/^MMX/`，命令是`s///g`，并且它替换`\^(.*)\|`为`^\1^\1|`，其中`\1`括号中的部分是。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-17T11:13:55.123

要确保新字符串中的大写：

```
sed '/^MMX/s/\^\([^|]\+\)/^\1^\u\1/' 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-11-17T05:38:26.473

sed s/^MMX([^^] *)^([^|]* )\|(.+)/MMX\1^\2^\2\|\3/ 文件名

# java - 如何在android中将视频文件（.mp4）格式转换为二进制格式？

> ID：13427997
> 
> 赞同：3
> 
> 时间：2012-11-17T05:29:25.327
> 
> 标签：java, android, video, web

我想在网络服务器上上传视频。我得到了要以二进制格式传递文件的服务，我该怎么做？

我试图在base64的帮助下将视频文件转换为二进制格式..？

```
public class binaryformat extends Activity {
private String strAttachmentCoded;
Button b1;
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    b1=(Button)findViewById(R.id.button1);
    b1.setOnClickListener(new OnClickListener()
    {

        @Override
        public void onClick(View v)
        {
            // TODO Auto-generated method stub
             File file = new File("/mnt/sdcard/C:/Program Files (x86)/Wowza Media Systems/Wowza Media Server 3.1.2/content/sample.mp4");
                FileInputStream objFileIS = null;
                try
                {
                    objFileIS = new FileInputStream(file);
                } 
                catch (FileNotFoundException e) 
                {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                ByteArrayOutputStream objByteArrayOS = new ByteArrayOutputStream();
                byte[] byteBufferString = new byte[1024];
                try
                {
                    for (int readNum; (readNum = objFileIS.read(byteBufferString)) != -1;) 
                    {
                     objByteArrayOS.write(byteBufferString, 0, readNum);
                     System.out.println("read " + readNum + " bytes,");
                    }
                } 
                catch (IOException e)
                {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }                    
                byte[] byteBinaryData = Base64.encode((objByteArrayOS.toByteArray()), Base64.DEFAULT);
               strAttachmentCoded = new String(byteBinaryData);

        }
    });

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-14T12:48:39.693

我在我的 3 个应用程序中体验过，如果使用 XML 通过服务器发送 IMAGE 或 VIDEO 会很好。如果您想在 ANDROID 中上传 IMAGE 或 VIDEO，最好以 XML 中的 base64 字符串形式发送 IMAGE 或 VIDEO。

```
public static String uploadMultiplePhoto(String url, String xmlString) {
        String responseString = "";
        try {
            //instantiates httpclient to make request
            DefaultHttpClient httpclient = new DefaultHttpClient();
            //url with the post data
            HttpPost request = new HttpPost(url);
            //convert parameters into JSON object
            //JSONObject holder = new JSONObject(jsonObjString);

            //passes the results to a string builder/entity
            StringEntity se = new StringEntity(xmlString);
            //sets the post request as the resulting string
            request.setEntity(se);
            //sets a request header so the page receving the request
            //will know what to do with it
            request.setHeader("Accept", "application/xml");
            /*request.setHeader("Content-type", "application/xml");*/

            //Handles what is returned from the page
            ResponseHandler<String> responseHandler = new BasicResponseHandler();
            responseString = httpclient.execute(request, responseHandler);
        } catch (Exception exception) {
            exception.printStackTrace();
        }
        return responseString;
    } 
```

# javascript - 是否可以单击可移动的 div？

> ID：13427999
> 
> 赞同：1
> 
> 时间：2012-11-17T05:29:51.657
> 
> 标签：javascript, jquery, css, click

我正在研究一些 jQuery/JavaScript，它可以拖动 div 并同时能够操作页面上的其他 div（特别是图像）。可移动的 div 基本上是一个透明的矩形，用于模拟镜头。我遇到的问题是我无法弄清楚如何将点击传递到可移动 div 下方的图像。我已经阅读了 pointer-events CSS 属性，并尝试将可移动 div 设置为 none，但这使得可移动 div 不再可移动。有没有办法让我在保持可移动的同时通过这个可移动的 div 传递点击？

编辑：对于所有要求我当前代码的人，这是我目前拥有的 JavaScript：

```
<script>
$(document).ready(function(){

$('img').click(function(e) {
  $(document).unbind('keypress');
  $(document).keypress(function(event) {
    if ( event.which == 115) {
      $(e.target).css('width', '+=25').css('height', '+=25');
    };

    if ( event.which == 97) {
      $(e.target).css('width', '-=25').css('height', '-=25');
    };
  });
});

//code to drag the lens around with the mouse
$("#draggableLens").mousemove(function(e){

  var lensPositionX = e.pageX - 75;
  var lensPositionY = e.pageY - 75;

  $('.lens').css({top: lensPositionY, left: lensPositionX});

});
});
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T14:14:09.677

`document.elementFromPoint`我创建了一个演示，它是用于定位可移动元素结束的最近图像的概念证明。我使用 jQueryUI 可拖动来简化事件处理。

使用的技巧`document.elementFromPoint`是你必须隐藏你拖动的元素足够长的时间来寻找其他元素，或者拖动元素本身就是最近的元素。

将`active`类添加到最近的元素允许单击查看器以访问活动元素

演示代码使用`LI`标签而不是`IMG`

```
var $images = $('#list li');
timer = false;
$('#viewer').draggable({
    drag: function(event, ui) {
        if (!timer) {
            timer = true;
            var $self = $(this);
            /* use a timeout to throttle checking for the closest*/
            setTimeout(function() {
                /* must hide the viewer so it isn't returned as "elementFromPoint"*/
                $self.hide()
                var el = $(document.elementFromPoint(event.pageX, event.pageY));                    
                $('.active').removeClass('active');
                if ($el.is('li')) {
                    $el.addClass('active')
                }
                $self.show()
                timer = false;
            }, 100);
        }
    }
}).click(function() {
    if ($('.active').length) {
        msg = 'Clicked on: ' + $('.active').text();

    } else {
        msg = 'Click - No active image';
    }
    $('#log').html(msg + '<br>');

}) 
```

演示：http: [//jsfiddle.net/nfjjV/4/](http://jsfiddle.net/nfjjV/4/)

`document.elementFromPoint`旧浏览器不支持。您还可以使用 jQuery`position`或`offset`方法将元素的坐标与查看器的当前位置进行比较，以实现完全的浏览器兼容性