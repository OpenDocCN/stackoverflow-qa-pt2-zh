# StackOverflow 问答 13038000-13038999

# html - div 在宽度为 100% 的容器中向左浮动并隐藏溢出

> ID：13038001
> 
> 赞同：0
> 
> 时间：2012-10-23T19:43:48.960
> 
> 标签：html, overflow

这是代码：

```
<div style="width:100%;height:200px;overflow:hidden;border:1px solid red;" id="container">
<div style="float:left;width:400px;height:100px;border:1px solid green;" class="inner">
first div</div>
<div style="float:left;width:400px;height:100px;border:1px solid green;" class="inner">
second div</div>
<div style="float:left;width:400px;height:100px;border:1px solid green;" class="inner">
third div</div>
</div>​ 
```

如果屏幕高度小于 1200 像素，我如何使具有内部类的 div 保持一致？如果屏幕高度小于 1200 像素，该代码将显示一个低于另一个的 div。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T19:46:02.437

```
@media screen and (max-width: 1200px) {
   #container { width: 400px; height: 300px; }
} 
```

使用媒体查询。

[Demo](http://jsfiddle.net/WzwrP/)，注意内联样式会覆盖外部 CSS，所以我不得不移动`#container`样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T19:51:53.597

我建议你添加

```
position: relative; 
```

在外容器上 - 然后放

```
position: absolute; left: 0; top: 0; 
```

在“内部”容器上。然后您可以按照您想要的方式控制它们。重要的是放置'位置：相对;' 在外部容器上，因为内部容器需要绝对的东西……如果这有意义的话。我希望它有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T19:48:05.047

那是因为您已将内部 div 的宽度硬编码为 width:400px。

您需要将它们设置为百分比......最好在您的 .inner 类中。

```
.inner {
    float:left;
    width:33%;
    height:100px;
    border: 1px solid green;
} 
```

如果你想防止它们缩小太多，你也可以在 .inner 中添加一个最小宽度，并将它与 bookcasey 关于@media 查询的评论结合起来，使其在更小的尺寸下更灵活。

# iis - WSO2 ESB & SSL/IIS - 系统资源不足，无法完成请求的服务

> ID：13038002
> 
> 赞同：0
> 
> 时间：2012-10-23T19:43:48.743
> 
> 标签：iis, ssl, wso2, wso2esb, esb

我使用 WSO2 ESB 创建了一个代理服务来处理安全的 IIS WS。
我很确定我正确配置了 ESB SSL 设置：customSSLProfiles、policy、keystore、truststore

但我面临一个晦涩的错误：系统资源不足，无法完成请求的服务。这是我的 wso2carbon.log ：

```
DEBUG - ServerHandler HTTP connection [13.12.11.10/13.12.11.10:56590]: Connected
DEBUG - ServerHandler Adding a connection : [13.12.11.10/13.12.11.10:56590] to the pool, existing pool size : 0
DEBUG - wire >> "POST /services/Proxy.ProxyHttpsSoap11Endpoint HTTP/1.1[\r][\n]"
DEBUG - wire >> "Accept-Encoding: gzip,deflate[\r][\n]"
DEBUG - wire >> "Content-Type: text/xml;charset=UTF-8[\r][\n]"
DEBUG - wire >> "SOAPAction: "http://s"[\r][\n]"
DEBUG - wire >> "Content-Length: 2717[\r][\n]"
DEBUG - wire >> "Host: 13.12.11.10:8243[\r][\n]"
DEBUG - wire >> "Connection: Keep-Alive[\r][\n]"
DEBUG - wire >> "User-Agent: Apache-HttpClient/4.1.1 (java 1.5)[\r][\n]"
DEBUG - wire >> "[\r][\n]"
DEBUG - headers >> POST /services/Proxy.ProxyHttpsSoap11Endpoint HTTP/1.1
DEBUG - headers >> Accept-Encoding: gzip,deflate
DEBUG - headers >> Content-Type: text/xml;charset=UTF-8
DEBUG - headers >> SOAPAction: "urn:mediate"
DEBUG - headers >> Content-Length: 2717
DEBUG - headers >> Host: 13.12.11.10:8243
DEBUG - headers >> Connection: Keep-Alive
DEBUG - headers >> User-Agent: Apache-HttpClient/4.1.1 (java 1.5)
DEBUG - access 13.12.11.10:8243 - - - "POST /services/Proxy.ProxyHttpsSoap11Endpoint HTTP/1.1" - - "-" "Apache-HttpClient/4.1.1 (java 1.5)"
DEBUG - ServerHandler HTTP connection [13.12.11.10/13.12.11.10:56590]: POST /services/Proxy.ProxyHttpsSoap11Endpoint HTTP/1.1
DEBUG - ServerHandler HTTP connection [13.12.11.10/13.12.11.10:56590]: Input ready
DEBUG - ServerHandler HTTP connection [13.12.11.10/13.12.11.10:56590]: Content decoder [content length: 2717; pos: 0; completed: false]
DEBUG - ServerHandler HTTP connection [13.12.11.10/13.12.11.10:56590]: Input ready
DEBUG - wire >> "<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">[\n]"
DEBUG - wire >> "<s:Body Id="id"><tag xmlns="urn:mine" ></tag></s:Body></s:Envelope>[\n]"
DEBUG - ServerHandler HTTP connection [13.12.11.10/13.12.11.10:56590]: Content decoder [content length: 2717; pos: 2717; completed: true]
 INFO - TimeoutHandler This engine will expire all callbacks after : 86400 seconds, irrespective of the timeout action, after the specified or optional timeout
DEBUG - ConnectionPool No connections available for reuse
DEBUG - HttpCoreNIOSender A new connection established to : iisserver:443
DEBUG - Axis2HttpRequest Start streaming outgoing http request : [Message ID : urn:uuid:d5daaf37-53f2-4841-b20a-12133337ddca]
DEBUG - HttpCoreNIOSender Connected to remote address : iisserver/1.11.111.0:443 from local address : /13.12.11.10:56591
DEBUG - ClientHandler HTTP connection [iisserver/1.11.111.0:443]: Connected (Axis2Request [Message ID : urn:uuid:d5daaf37-53f2-4841-b20a-12133337ddca] [Status Completed : false] [Status SendingCompleted : false])
DEBUG - ClientHandler ClientHandler connected : [iisserver/1.11.111.0:443]
DEBUG - headers >> POST /partner/Service.svc HTTP/1.1
DEBUG - headers >> Content-Type: text/xml; charset=UTF-8
DEBUG - headers >> Accept-Encoding: gzip,deflate
DEBUG - headers >> SOAPAction: "http://s"
DEBUG - headers >> Transfer-Encoding: chunked
DEBUG - headers >> Host: iisserver:443
DEBUG - headers >> Connection: Keep-Alive
DEBUG - headers >> User-Agent: Synapse-HttpComponents-NIO
DEBUG - wire << "POST /partner/Service.svc HTTP/1.1[\r][\n]"
DEBUG - wire << "Content-Type: text/xml; charset=UTF-8[\r][\n]"
DEBUG - wire << "Accept-Encoding: gzip,deflate[\r][\n]"
DEBUG - wire << "SOAPAction: "http://s"[\r][\n]"
DEBUG - wire << "Transfer-Encoding: chunked[\r][\n]"
DEBUG - wire << "Host: iisserver:443[\r][\n]"
DEBUG - wire << "Connection: Keep-Alive[\r][\n]"
DEBUG - wire << "User-Agent: Synapse-HttpComponents-NIO[\r][\n]"
DEBUG - wire << "[\r][\n]"
DEBUG - ClientHandler HTTP connection [iisserver/1.11.111.0:443]: Output ready [Request Message ID : urn:uuid:d5daaf37-53f2-4841-b20a-12133337ddca]
DEBUG - ClientHandler HTTP connection [iisserver/1.11.111.0:443]: Content encoder [chunk-coded; completed: true]
DEBUG - wire << "186e[\r][\n]"
DEBUG - wire << "<?xml version='1.0' encoding='UTF-8'?><s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/"><s:Header><wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" s:actor="IntervenantEmetteur"><wsu:Timestamp xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" wsu:Id="Timestamp-1"><wsu:Created>2012-10-04T19:11:54.357Z</wsu:Created><wsu:Expires>2012-10-04T19:16:54.357Z</wsu:Expires></wsu:Timestamp><ds:Signature xmlns:ds="http://www.w3.org/2000/09/xmldsig#" Id="Signature-2">[\n]"
DEBUG - wire << "<ds:SignedInfo>[\n]"
DEBUG - wire << "<ds:CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>[\n]"
DEBUG - wire << "<ds:SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#rsa-sha1"/>[\n]"
DEBUG - wire << "<ds:Reference URI="#id">[\n]"
DEBUG - wire << "<ds:Transforms>[\n]"
DEBUG - wire << "<ds:Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>[\n]"
DEBUG - wire << "</ds:Transforms>[\n]"
DEBUG - wire << "<ds:DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/>[\n]"
DEBUG - wire << "<ds:DigestValue>mp/vvvvvvvv=</ds:DigestValue>[\n]"
DEBUG - wire << "</ds:Reference>[\n]"
DEBUG - wire << "<ds:Reference URI="#Timestamp-1">[\n]"
DEBUG - wire << "<ds:Transforms>[\n]"
DEBUG - wire << "<ds:Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>[\n]"
DEBUG - wire << "</ds:Transforms>[\n]"
DEBUG - wire << "<ds:DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/>[\n]"
DEBUG - wire << "<ds:DigestValue>F/vvvvvvvvvvv=</ds:DigestValue>[\n]"
DEBUG - wire << "</ds:Reference>[\n]"
DEBUG - wire << "</ds:SignedInfo>[\n]"
DEBUG - wire << "<ds:SignatureValue>[\n]"
DEBUG - wire << "XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX[\n]"
DEBUG - wire << "XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX/FwQC[\n]"
DEBUG - wire << "H7wOwMRUsv9BpvxYGVw=[\n]"
DEBUG - wire << "</ds:SignatureValue>[\n]"
DEBUG - wire << "<ds:KeyInfo Id="KeyId-9C7C8315814519AAFA13493779144122">[\n]"
DEBUG - wire << "<ds:X509Data>[\n]"
DEBUG - wire << "<ds:X509SubjectName>CN=sipmiesbdev,OU=INSPQ,O=INSPQ,L=Qu[0xc3][0xa9]bec,ST=Qu[0xc3][0xa9]bec,C=CA</ds:X509SubjectName>[\n]"
DEBUG - wire << "<ds:X509Certificate>[\n]"
DEBUG - wire << "YYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYY[\n]"
DEBUG - wire << "YYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYY==[\n]"
DEBUG - wire << "</ds:X509Certificate>[\n]"
DEBUG - wire << "</ds:X509Data>[\n]"
DEBUG - wire << "</ds:KeyInfo>[\n]"
DEBUG - wire << "</ds:Signature></wsse:Security></s:Header><s:Body Id="id"><tag xmlns="urn:mine"></tag></s:Body></s:Envelope>[\r][\n]"
DEBUG - wire << "0[\r][\n]"
DEBUG - wire << "[\r][\n]"
DEBUG - ClientHandler HTTP connection [iisserver/1.11.111.0:443]: Request ready [Request Message ID : urn:uuid:d5daaf37-53f2-4841-b20a-12133337ddca]
DEBUG - wire >> "HTTP/1.1 500 Internal Server Error[\r][\n]"
DEBUG - wire >> "Content-Length: 131[\r][\n]"
DEBUG - wire >> "Content-Type: text/html[\r][\n]"
DEBUG - wire >> "Server: Microsoft-IIS/6.0[\r][\n]"
DEBUG - wire >> "X-Powered-By: ASP.NET[\r][\n]"
DEBUG - wire >> "Date: Thu, 04 Oct 2012 19:11:56 GMT[\r][\n]"
DEBUG - wire >> "[\r][\n]"
DEBUG - wire >> "<html><head><title>Error</title></head><body>Insufficient system resources exist to complete the requested service.[\r][\n]"
DEBUG - wire >> "</body></html>"
DEBUG - headers << HTTP/1.1 500 Internal Server Error
DEBUG - headers << Content-Length: 131
DEBUG - headers << Content-Type: text/html
DEBUG - headers << Server: Microsoft-IIS/6.0
DEBUG - headers << X-Powered-By: ASP.NET
DEBUG - headers << Date: Thu, 04 Oct 2012 19:11:56 GMT
DEBUG - ClientHandler HTTP connection [iisserver/1.11.111.0:443] : HTTP/1.1 500 Internal Server Error [Request Message ID : urn:uuid:d5daaf37-53f2-4841-b20a-12133337ddca]
DEBUG - ClientHandler Response Received for Request : Axis2Request [Message ID : urn:uuid:d5daaf37-53f2-4841-b20a-12133337ddca] [Status Completed : true] [Status SendingCompleted : true]
 WARN - ClientHandler Received an internal server error : Internal Server Error For : 1.11.111.0:443 For Request : Axis2Request [Message ID : urn:uuid:d5daaf37-53f2-4841-b20a-12133337ddca] [Status Completed : true] [Status SendingCompleted : true]
DEBUG - ClientHandler HTTP connection [iisserver/1.11.111.0:443]: Input ready [Request Message ID : urn:uuid:d5daaf37-53f2-4841-b20a-12133337ddca]
DEBUG - ConnectionPool Released a connection to host: iisserver on port : 443 to the connection pool of current size : 1
DEBUG - ClientHandler HTTP connection [iisserver/1.11.111.0:443]: Content decoder [content length: 131; pos: 131; completed: true]
 INFO - BuilderUtil OMException in getSOAPBuilder
 INFO - BuilderUtil Remaining input stream :[]
 WARN - ClientWorker Unexpected response received. HTTP response code : 500 HTTP status : Internal Server Error exception : First Element must contain the local name, Envelope , but found html
DEBUG - ClientWorker Unexpected response received. HTTP response code : 500 HTTP status : Internal Server Error exception : First Element must contain the local name, Envelope , but found html
DEBUG - ClientWorker Creating the SOAPFault to be injected...
ERROR - AxisEngine Missing wsse:Security header in request
 WARN - ClientWorker Fault processing response message through Axis2: Missing wsse:Security header in request
DEBUG - ClientWorker Fault processing response message through Axis2: Missing wsse:Security header in request
DEBUG - ClientWorker Directly invoking SynapseCallbackReceiver after setting error properties
DEBUG - access iisserver:443 - - - "POST /partner/Service.svc HTTP/1.1" - - "-" "Synapse-HttpComponents-NIO"
DEBUG - access -  - Thu, 04 Oct 2012 19:11:56 GMT "- - " 500 - "-" "-"
DEBUG - ServerHandler HTTP connection [closed]: Closed
DEBUG - ServerHandler Removing the connection : [closed] from pool of size : 0
DEBUG - ClientHandler HTTP connection [closed]: Closed
DEBUG - ClientHandler Keep-alive connection closed For : 1.11.111.0:443
DEBUG - ClientHandler Connection to remote address : iisserver/1.11.111.0:443 from local address : /13.12.11.10:56591 is closed! 
```

如您所见，ESB 签署了我的消息，但是在发送它时，发生了错误：一个相当瞬时的 HTTP 500 响应。

尽管如此，当我使用带有相同标头的 ESB 签名消息的 SOAP 客户端请求 IIS WS 时，我得到了预期的响应。

拜托，你能解释一下这个问题吗，我在这里被困了几天，你的帮助将不胜感激

非常感谢， 医学

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T16:29:53.563

这都是关于分块传输编码的！

请参阅： [https ://issues.apache.org/jira/browse/SYNAPSE-915](https://issues.apache.org/jira/browse/SYNAPSE-915)

# c# - 关于父轮换的统一轮换问题

> ID：13038003
> 
> 赞同：3
> 
> 时间：2012-10-23T19:43:55.350
> 
> 标签：c#, rotation, unity3d

首先，这里是问题的视频： [链接到视频](http://www.youtube.com/watch?v=qMtkUB4sXhA&feature=youtu.be)，这里是[包](http://www.file-upload.net/download-6745903/rotation.rar.html) ，这里是层次结构的屏幕截图： ![在此处输入图像描述](../Images/d40ad50df528973462769bb936a197fa.png) GUN 是带有脚本的父级（空游戏对象） 暂停被丢弃到`towerRotateObj`并且 Gun 被丢弃在`turretRotateObj`. Suspension 和 Gun 也是空的游戏对象。它们只是某种组对象，这里是代码：

```
public class WeaponMover : MonoBehaviour
{
    public Transform target;
    public GameObject turretRotateObj;
    public GameObject towerRotateObj;

    public float maxTowerRotationSpeed = 360.0f;
    public float maxTurretRotationSpeed = 360.0f;

    public float smoothFactorTower = 0.125f;
    public float smoothFactorTurret = 0.125f;

    public float maxTowerRotation = 130.0f;
    public float maxTurretRotation = 50.0f;

    private Vector3 m_newRotation;
    private Vector3 m_angles;
    private float m_minTowerAngle;
    private float m_maxTowerAngle;
    private float m_minTurretAngle;
    private float m_maxTurretAngle;
    private float m_velTower;
    private float m_velTurret;

    private bool m_isTransNecTower = false;
    private bool m_isTransNecTurret = false;

    // initialization
    void Start()
    {
       m_newRotation = Vector3.zero;
       m_angles = Vector3.zero;

       m_maxTowerAngle = towerRotateObj.transform.eulerAngles.y + maxTowerRotation/2;
       m_minTowerAngle = towerRotateObj.transform.eulerAngles.y - maxTowerRotation/2;

       m_maxTurretAngle = turretRotateObj.transform.eulerAngles.z + maxTurretRotation/2;
       m_minTurretAngle = turretRotateObj.transform.eulerAngles.z - maxTurretRotation/2;

       // check if rotation happens between 0/360
       // tower
       if(m_minTowerAngle <= 0.0f)
         m_minTowerAngle += 360.0f;

       if(m_maxTowerAngle >= 360.0f)
         m_maxTowerAngle -= 360.0f;

       if(m_minTowerAngle > m_maxTowerAngle)
         m_isTransNecTower = true;

       // turret
       if(m_minTurretAngle <= 0.0f)
         m_minTurretAngle += 360.0f;

       if(m_maxTurretAngle >= 360.0f)
         m_maxTurretAngle -= 360.0f;

       if(m_minTurretAngle > m_maxTurretAngle)
         m_isTransNecTurret = true;
    }

    void Update()
    {
       m_newRotation = Quaternion.LookRotation(target.position - towerRotateObj.transform.position).eulerAngles;
       m_angles = towerRotateObj.transform.rotation.eulerAngles;
       towerRotateObj.transform.rotation = Quaternion.Euler(m_angles.x,
         ClampAngle(Mathf.SmoothDampAngle(m_angles.y, 
          m_newRotation.y - 90.0f, 
          ref m_velTower, 
          smoothFactorTower, 
          maxTowerRotationSpeed), m_minTowerAngle, m_maxTowerAngle, m_isTransNecTower),
         m_angles.z);

       m_newRotation = Quaternion.LookRotation(target.position - turretRotateObj.transform.position).eulerAngles;
       m_angles = turretRotateObj.transform.rotation.eulerAngles;
       turretRotateObj.transform.rotation = Quaternion.Euler(m_angles.x,
         m_angles.y,
         ClampAngle(Mathf.SmoothDampAngle(m_angles.z, 
          -m_newRotation.x, 
          ref m_velTurret,
          smoothFactorTurret, 
          maxTurretRotationSpeed), m_minTurretAngle, maxTurretRotation, m_isTransNecTurret));
    }

    private float ClampAngle(float angle, float min, float max, bool isTranslationNecessary)
    {
       if(!isTranslationNecessary)
       {
         if(angle < min )
          return min;

         if(angle > max)
          return max;
       }
       else
       {
         if(angle > max && angle < min)
         {
          if(min - angle > angle - max)
              return max;
          else
              return min;
         }
       }

       return angle;
    }
} 
```

所以，它是一个类似的设置，就像坦克的塔和枪......我已经[在这里](http://answers.unity3d.com/questions/335246/unity-rotation-issue-on-parent-rotation.html)发布了这个问题，但似乎很少有人看到这个帖子......任何建议都值得赞赏！谢谢。

更新：

```
 m_newRotation = Quaternion.LookRotation(m_target.transform.position - towerRotateObj.transform.position).eulerAngles;
    m_newRotation.y -= 90f;
    m_angles = towerRotateObj.transform.rotation.eulerAngles;
    towerRotateObj.transform.rotation = Quaternion.Euler(m_angles.x, m_newRotation.y, m_angles.z);

    m_newRotation = Quaternion.LookRotation(m_target.transform.position - turretRotateObj.transform.position).eulerAngles;
    m_angles = turretRotateObj.transform.rotation.eulerAngles;
    turretRotateObj.transform.rotation = Quaternion.Euler(m_angles.x, m_angles.y, -m_newRotation.x); 
```

问题保持不变:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T13:45:57.260

所以我的猜测，万向节锁，就像在另一个答案中所说的那样。但是，考虑到您将四元数传递给欧拉，我不确定我是否会尝试解决这个问题，反之亦然。如果我必须这样做，我不会像你那样做，因为使用四元数在对象之间进行育儿等于非常头痛。

首先，当您为对象创建父对象时，您并没有使用该功能！这是 Unity 的一个非常可靠的功能。统一育儿：[http ://docs.unity3d.com/Documentation/ScriptReference/Transform-parent.html](http://docs.unity3d.com/Documentation/ScriptReference/Transform-parent.html)

您的每个炮塔对象仅在单个局部轴上旋转。并且 Unity 旨在处理该问题： http: [//docs.unity3d.com/Documentation/ScriptReference/Transform-localRotation.html](http://docs.unity3d.com/Documentation/ScriptReference/Transform-localRotation.html)

当一个对象是另一个对象的父对象时，您可以在您想要的轴上局部旋转它。Unity 自行处理整个矩阵变换。当您修改对象的全局旋转时，您基本上是在覆盖来自父级的转换。在这一点上，随着时间的推移，任何层次结构都很容易出现错误和不精确。

编辑：有了你的包裹，我可以写出我的意思：

```
public class WeaponMover : MonoBehaviour
{
    public GameObject boat;
    public GameObject turretRotateObj;
    public GameObject towerRotateObj;
    public GameObject target;

    private Vector3 lastDirection;

    // initialization
    void Start()
    {
        lastDirection = boat.transform.forward;
    }

    void Update()
    {
        // Find direction toward our target. Use turret as origin.
        Vector3 wantedDirection = target.transform.position - turretRotateObj.transform.position;
        // Rotate our last direction toward that new best direction. Change floats to make it move faster or slower.
        lastDirection = Vector3.RotateTowards(lastDirection, wantedDirection, 0.01f, 0.01f);

        // Find the direction local to the tower as the boat can move around!
        Vector3 towerDirection = boat.transform.InverseTransformDirection(lastDirection);
        // Remove unwanted axis
        towerDirection = new Vector3(-towerDirection.z, 0, towerDirection.x);
        towerDirection.Normalize();
        // Set local rotation
        towerRotateObj.transform.localRotation = Quaternion.LookRotation(towerDirection);

        // Find the direction local to the gun, as the tower may have rotated!
        Vector3 turretDirection = towerRotateObj.transform.InverseTransformDirection(lastDirection);
        // Remove unwanted axis.
        turretDirection = new Vector3(turretDirection.x, turretDirection.y, 0);
        turretDirection.Normalize();
        // Set local rotation
        turretRotateObj.transform.localRotation = Quaternion.LookRotation(turretDirection);
    }
} 
```

注意：我不得不将枪管移动到 Z 轴而不是 X 轴，因为我很懒惰。因此，如果您只复制粘贴此代码，枪管将指向框架，但枪会正确跟随目标。

由于旋转现在是局部的，你可以旋转船多年，枪永远不会得到任何偏移。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T17:21:54.090

好吧，我不确定，但您似乎遇到了[Gimbal Lock](http://en.wikipedia.org/wiki/Gimbal_lock)问题。尽管您的计算是从四元数开始的，但从长远来看，这两个调用可能`Mathf.SmoothDampAngle`是根本原因。

所以我建议首先删除所有平滑，然后，如果这是罪魁祸首，用纯四元数的方法替换这些方法，比如[Quaternion.Slerp](http://docs.unity3d.com/Documentation/ScriptReference/Quaternion.Slerp.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T07:17:04.383

从 Update 更改为[LateUpdate](http://docs.unity3d.com/Documentation/ScriptReference/MonoBehaviour.LateUpdate.html)后，我无法重现您的问题。也许我没有像你一样颠簸旋转，但我认为小玩意儿的旋转是在炮塔旋转之前和之后应用的，并且错误正在累积。

# sql - OLEDB 连接问题

> ID：13038011
> 
> 赞同：1
> 
> 时间：2012-10-23T19:44:26.440
> 
> 标签：sql, vb.net

我面临问题

> “[DBNETLIB][ConnectionOpen（无效实例（））。]无效连接。”

在使用 OLDDBConnection 时。下面的代码我正在使用

```
Dim objConn As OleDbConnection = New OleDbConnection("Provider=sqloledb;Data Source=IPADDRESS;Initial Catalog=EMS;User Id=****;Password=****;")
Dim objDS As DataSet = New DataSet()
Dim objCmdSelect As OleDbCommand = New OleDbCommand("select top 10 from EL_SERVER", objConn)
Dim objAdapter1 As OleDbDataAdapter = New OleDbDataAdapter()
objAdapter1.SelectCommand = objCmdSelect
objAdapter1.Fill(objDS) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T04:05:13.193

```
You will need to check if you are using correct Data Source name in your connection string. If you are using localhost then try to use IP address of server. If you have SQL server with the Instance then use instance name with the server Ip in your connection string. 

OR

 please remove the star symbol and type your user name and password on there..
    example:
    Dim objConn As OleDbConnection = New OleDbConnection("Provider=sqloledb;Data Source=IPADDRESS;Initial Catalog=EMS;User Id=abc;Password=abc;") 
```

# python - Python网络抓取 - 下载文件并将所有数据存储在xml中

> ID：13038012
> 
> 赞同：2
> 
> 时间：2012-10-23T19:44:27.147
> 
> 标签：python, xml, web, download, screen-scraping

我希望使用 Python 从我大学的 Intranet 中抓取一些数据并下载所有研究论文。我以前看过 Python 抓取，但我自己并没有真正做过任何事情我确定我在某处读过 Python 抓取框架，我应该使用它吗？

所以本质上这是我需要刮的：

1.  作者
2.  描述
3.  场地
4.  然后下载文件并用论文名称重命名。

然后，我会将所有这些都放在 xml 或数据库中，很可能是 xml，然后在以后开发接口等。

这是可行的吗？关于我应该从哪里开始的任何想法？

提前致谢， LukeJenx

编辑：框架是 Scrapy

编辑：原来我今天差点杀死服务器，所以讲师正在为我从网络团队获取副本......谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T20:38:06.160

Scrapy 是一个很棒的框架，并且有非常好的[文档](http://doc.scrapy.org/en/latest/)。你应该从那里开始。

如果您不了解[XPaths](http://www.w3schools.com/xpath/default.asp)，如果您打算使用 Scrapy，我建议您学习它们（它们非常简单！）。XPath 可帮助您“定位”要提取的 html 中的特定元素。

Scrapy 已经有一个内置的命令行参数可以导出到 xml、csv 等，即`scrapy crawl <spidername> -o <filename> -t xml`

[机械化](http://wwwsearch.sourceforge.net/mechanize/)是轻松编写刮板的另一个不错的选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T20:08:44.167

是的，这是非常可行的，尽管这在很大程度上取决于页面。正如评论中所暗示的，一个 JS-heavy 的网站可能会让这变得非常困难。

除此之外，下载使用标准`urllib2`，或查看[请求](http://docs.python-requests.org/en/latest/index.html)以获得更轻松、更少痛苦的体验。

但是，最好不要使用正则表达式来解析 HTML，它可能会导致[无尽的尖叫](https://stackoverflow.com/a/1732454/604382)。不过说真的，试试[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/) - 它功能强大且非常高级。

对于存储，以最简单的为准（对我来说，XML 似乎有点过分，也许考虑一下[json库）。](http://docs.python.org/library/json.html)

# php - SOAP-ERROR：编码：对象没有“StartDate”属性

> ID：13038013
> 
> 赞同：0
> 
> 时间：2012-10-23T19:44:28.303
> 
> 标签：php, datetime, soap

我需要创建一个如下所示的 SOAP 请求：

```
<s:element name="GetOrders">
 <s:complexType>
  <s:sequence>
   <s:element minOccurs="0" maxOccurs="1" name="Token" type="s:string"/>
   <s:element minOccurs="0" maxOccurs="1" name="Context" type="s:string"/>
   <s:element minOccurs="1" maxOccurs="1" name="StartDate" type="s:dateTime"/>
   <s:element minOccurs="1" maxOccurs="1" name="EndDate" type="s:dateTime"/>
   <s:element minOccurs="1" maxOccurs="1" name="IncludeFulfilledOrders" type="s:boolean"/>
   <s:element minOccurs="0" maxOccurs="1" name="ProductNumber" type="s:string"/>
  </s:sequence>
 </s:complexType>
</s:element> 
```

我为变量创建了一个类：

```
class GetOrders {
    public $Token = "THE_TOKEN"; // string
    public $Context='THE_CONTEXT'; // string
    public $StartDate=""; // dateTime
    public $EndDate=""; // dateTime
    public $IncludeFulfilledOrders=true; // boolean
    public $ProductNumber=""; // string
} 
```

运行soap调用的函数如下所示：

```
public function GetOrders(GetOrders $parameters) {
return $this->__soapCall('GetOrders',array('parameters'=>array($parameters)),       array(
        'uri' => 'http://www.domain.net/',
        'soapaction' => ''
       )
  );
} 
```

我收到错误消息：SoapFault 异常：[Client] SOAP-ERROR: Encoding: object has no 'StartDate' property in...

这是我传递的 $parameters 的 var_dump：

```
object(GetOrders)#1 (6) {
  ["Token"]=>
  string(17) "THE_TOKEN"
  ["Context"]=>
  string(7) "THE_CONTEXT"
  ["StartDate"]=>
  string(25) "2012-09-01T00:00:00-05:00"
  ["EndDate"]=>
  string(25) "2012-09-30T00:00:00-05:00"
  ["IncludeFulfilledOrders"]=>
  bool(true)
  ["ProductNumber"]=>
  string(10) "P-PRODUCT"
} 
```

我似乎无法弄清楚 StartDate 的问题是什么。我相信格式是正确的。不过，我对 SOAP 了解不多，所以如果这是一个新手问题，我深表歉意。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T19:54:07.483

格式可能有误。请检查您是否以正确的格式发送数据。此外，检查生成的存根是否按照 WSDL 定义生成。

您可以使用记录请求

```
 public function __doRequest($request, $location, $action, $version, $one_way = 0)
    {
      // Add code to inspect/dissect/debug/adjust the XML given in $request here

      // Uncomment the following line, if you actually want to do the request
      // return parent::__doRequest($request, $location, $action, $version);
         $dom = new DomDocument('1.0', 'UTF-8');
    $dom->preserveWhiteSpace = false;
    try {
        $dom->loadXML($request);

    } catch (DOMException $de) {
        die ('Parse error with code ' . $de->code);
    }
    $request = $dom->saveXml();
    return parent::__doRequest($request, $location, $action, $version);

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T19:13:54.923

原来我的函数有一个错误是抛出这个。

这就是函数应该读取的方式。

```
public function GetOrders(GetOrders $parameters) {
return $this->__soapCall('GetOrders',array('parameters'=>$parameters),        array(
        'uri' => 'http://www.domain.com/',
        'soapaction' => ''
       )
  );
} 
```

注意 array('parameters'=>$parameters) 与上面的不同。

总是一件小事...

# javascript - 遍历对象的javascript

> ID：13038014
> 
> 赞同：-1
> 
> 时间：2012-10-23T19:44:31.233
> 
> 标签：javascript, object, loops, traversal

我有一个动态创建的对象。这是一个简单的例子：

```
global.data {
    children: [
        0: {
            children:  [
                0: {
                   children: value 
                }
            ]
        }
    ]

} 
```

我想要做的是检查对象（global.data）是否具有'children'的属性，从中获取属性，然后通过循环将该对象（'children'）发回以查看它是否具有'的属性它自己的孩子。我希望它继续前进，直到没有更多的“孩子”可以穿越。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T19:47:40.780

运行一个while循环，直到它达到最深。[jsfiddle](http://jsfiddle.net/bPe5R/4/)

```
global = {};
global.data = {
    children: [
         {
            children:  [
                 {
                   children: "value"
                }
            ]
        }
    ]
}

var obj = global.data;

while( typeof obj == 'object' && typeof obj.children == 'object'){
  obj = obj.children[0];
}
obj = obj.children ? obj.children  : obj;​
 // at this point obj is either undefined or has no children property. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-24T22:03:46.267

考虑使用[对象扫描](https://github.com/blackflux/object-scan)。一旦你把头绕在它周围，它对数据处理就很强大。下面的示例将仅返回第一个值，但可以通过更改轻松更改为返回所有匹配项`abort`。

```
// const objectScan = require('object-scan');

const input = { children: [{ children: [{ children: 'value' }] }] };

const find = (data) => objectScan(['**(^children$)'], {
  abort: true,
  rtn: 'value',
  useArraySelector: false,
  filterFn: ({ value }) => typeof value === 'string'
})(data);

console.log(find(input));
// => value
```

```
.as-console-wrapper {max-height: 100% !important; top: 0}
```

```
<script src="https://bundle.run/object-scan@13.8.0"></script>
```

*免责声明*：我是[对象扫描的作者](https://www.npmjs.com/package/object-scan)

# iphone - 获取电子邮件地址 ios 设备

> ID：13038019
> 
> 赞同：1
> 
> 时间：2012-10-23T19:44:46.620
> 
> 标签：iphone, ios, xcode, cocoa

我想获取存储在设备上的所有电子邮件地址。我可以从联系人中获取地址（使用 AddressBook 框架），但设备存储更多。我可以在设备上创建一个新电子邮件，并且在输入电子邮件地址时我得到了某种完成（当连接到网络时，我可以获得更多，所以基本上其中一些是动态下载的，其中一些是本地存储的）。

是否有 api 来获取所有这些电子邮件地址？或者也许我能得到的唯一电子邮件是来自通讯录的那些？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T21:04:40.927

我相信您所说的“完成”仅在应用程序缓存中可用，而不是通过任何公共 API。据我所知，您自己的应用程序只能访问您通过 ABAddressBook 联系人中可用的联系人。

# c++ - C中非常大的矩阵

> ID：13038021
> 
> 赞同：2
> 
> 时间：2012-10-23T19:44:48.880
> 
> 标签：c++, c

（这个问题前面已经回答了，但是解决方案不起作用或者我无法理解！！）
我想使用大尺寸的矩阵说。`2^16*2^16`怎么做？这是我与 malloc 一起使用的代码：

```
// nrows=2^16
// ncols=2^16

 int **a_matrix = (int**) malloc (nrows *sizeof(int*));

for (int i=0; i<nrows;i++)
a_matrix[i]=(int*) malloc (ncols *sizeof(int));
enter code here 
```

现在，当我尝试访问`a_matrix[55000][55000]`其给出的分段错误时

我将堆栈大小增加到无限（使用一些命令）但仍然无法正常工作。:(还有其他方法吗？

编辑：我只想存储 1/0 所以即使 bool 也可以工作。但在那种情况下也是同样的问题！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T20:02:44.273

如果您只想存储布尔值，则使用打包的位数组会大大减少存储空间，以至于它可能会起作用。在 C++ 中，您将使用 a`std::vector<bool>`或 a `std::bitset`; 在 C 中，

```
#include <stdint.h>

unit32_t (*a_matrix)[1<<11] = malloc((1 << 16)*sizeof *a_matrix); 
```

给你（如果`malloc`调用没有失败）一个指向位数`2^16`组的指针。`2^16`要访问一点，请使用

```
((a_matrix[row][column >> 5]) >> (column & 0x1F)) & 1 
```

最好把它变成一个函数

```
int bit_at(int row, int col) {
    return ((a_matrix[row][col >> 5]) >> (col & 0x1F)) & 1;
} 
```

或者也许是一个宏。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T19:59:17.790

您可以尝试`std::vector<bool> matrix(0x10000L * 0x10000L);`像这样访问它：

```
bool b = matrix[i*0x10000 + j];

matrix[i*0x10000 + j] = true; 
```

这应该占用您实现空间的不到 1/8（或者是 1/32？）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T19:48:10.230

您不能在 32 位机器上分配超过 2GB（在 UBUNTU 上为 3GB）的内存。您可能必须实现自己`malloc()`的分页系统和`vmm`.

# bash - BASH Loop 怎么搞呢？

> ID：13038023
> 
> 赞同：3
> 
> 时间：2012-10-23T19:44:55.827
> 
> 标签：bash, shell

好的，我有一个由 8 个 HDD 组成的塔，我正在尝试制作一个脚本，该脚本将遍历它们，并为每个 HDD 在自己的文件夹中创建一个包含结果（来自 hdparm 的信息）的文本文件。我现在如何循环这个脚本去 sdc -> /Bay2, sdd -> /Bay3, sde -> /Bay4 等

这现在适用于一个 HDD 只需要为其他 7 个循环它

```
if [ -c /dev/sdb ];
then
sudo hdparm -I /dev/sdb >> /Bay1/sdb.txt
fi 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T20:21:57.863

这依赖于全局匹配`/dev/sdX`和`seq`生成 1..8 的命令：

```
hd=( dummy /dev/sd[b-z] )

for i in `seq 1 8`
do
    sudo hdparm -I ${hd[$i]} >> /Bay$i/`basename ${hd[$i]}`.txt
done 
```

数组中的`dummy`条目`hd`只是使它基于一个。

您可以对其进行重组以对其进行操作`/dev/sd[b-z]`（让它匹配任何数字，而不是期望 8）并按照@sampson-chen 的回答计算`for sd in /dev/sd[b-z] ...`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T19:54:24.870

```
 # start with lower case b, so ascii starts at 98 instead of 65
    ascii=66 
    index=1
    total=8
    while [[ $total -ge $index ]]
    do
        letter=$(echo "$ascii" | awk '{ printf("%c",$0); }')
        if [ -c /dev/sd$letter ];
        then
            sudo hdparm -I /dev/sd$letter >> /Bay$index/sd$letter.txt
        fi
        index=$((index+1))
        ascii=$((ascii+1))
    done 
```

编辑：固定小写字母的总/索引错位和偏移量（98）

刚刚测试了这个以`touch`在 Linux 上创建文件，它可以工作。

# java - 用Java从一副牌中随机抽取5张牌

> ID：13038026
> 
> 赞同：0
> 
> 时间：2012-10-23T19:45:16.930
> 
> 标签：java

我正在尝试学习 Java，我想做一个非常简单的类，它会从随机生成的一副牌中随机选择 5 张牌。我遇到了一些我觉得应该是一个非常简单的问题来解决的问题。此外，这是针对我就读的大学的一个实验室，所以如果你能够在不给我代码块的情况下指导我，那将是更可取的。

这是我收到的错误，我理解我收到它的原因：

> 表达式的类型必须是数组类型，但它解析为 Deck

这是我的代码：

```
public static void main(String[] args) {
    System.out.println(select(5));
}

public static Card[] select(int k)
{
    Random rand = new Random(52);
    Deck deck = new Deck(52);
    Card[] hand = new Card[5];
    for (int j = 0; j < 5; j += 1)
    {
        int index = rand.nextInt(52-j);
        hand[j] = deck[index];
    }
    return hand;
} 
```

Deck.java 和 Card.java 类是由我的导师提供的（他在实验期间不可用）。

我最近也意识到这段代码不会为我做我想要它做的事情，但是我仍然需要找出我上面的错误。如果您想帮助解决我遇到的其他问题，请随时在下面回答我的解释，但这不是我来这里的原因。

我想随机选择5张卡片。假设一张随机选择的卡片位于我的牌组对象的索引 27 处。然后我想将该卡移动到索引 51 并重复 4 次。这样我套牌对象的最后五张牌都是随机选择的，不可能被选择两次。我在想最简单的方法（我还没有尝试过）是创建一个变量来保存我的甲板索引之一的值，以便我可以交换它们。你们中有人同意吗？

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T19:48:13.357

你有你`deck`作为类的引用`Deck`指向一个实例： -

```
Deck deck = new Deck(52); 
```

所以，你不能在像数组这样的索引上访问它： -

```
deck[index];  // Cannot do this on a reference pointing to object of `Deck` 
```

我认为你可能需要在你的类中提供一些方法，`get(index)`并像这样访问它： -`deck.get(index)`

**或者您可能**想将您的声明`deck`为：-

```
Deck[] deck = new Deck[52]; 
```

那么 ( `deck[index]`) 就可以了。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-23T20:00:56.963

只是为了补充已经提到的其他建议，

```
Card[] hand = new Card[5]; 
```

应该可能读

```
Card[] hand = new Card[k]; 
```

你的 for 循环也是如此：

```
for (int j = 0; j < 5; j += 1) 
```

应该读

```
for (int j = 0; j < k; j += 1) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-23T19:46:59.860

你应该做

```
int index = (52 -rand.nextInt(51)+1); 
```

你还需要`Deck[]`一个`52`

```
 Deck[] deck = new Deck[52];
  for(i to 52)
  //Initalize deck[i] here 
  end.
  Now you can access like deck[index] 
```

我认为使用`enum`你可以`Card`更好地实现 Game 。

```
import java.util.ArrayList;
import java.util.Collections;
import java.util.List;

// This is just sample example  and it is just to show an approach. I had not enough time    to make code perfect but it works fine.
public enum Deck
{
DECK;
enum Rank
{
    DEUCE(2), THREE(3), FOUR(4), FIVE(5), SIX(6),
    SEVEN(7), EIGHT(8), NINE(9), TEN(10), JACK(10), QUEEN(10), KING(10), ACE(11);

    Rank(int rank)
    {
        this.rank = rank;
    }

    private final int rank;

}

enum Type
{
    SPADES,
    HEARTS,
    DIAMONDS,
    CLUBS;
}

class Card
{
    private final Rank rank;
    private final Type type;

    Card(Rank rank, Type type)
    {
        this.rank = rank;
        this.type = type;
    }

    @Override
    public String toString()
    {
        return type.name() + rank.name();
    }

}

static List<Deck.Card> cards = new ArrayList<Deck.Card>();
static
{
    for (Rank rank : Deck.Rank.values())
    {
        for (Type type : Deck.Type.values())
        {
            cards.add(DECK.new Card(rank, type));
        }
    }

}

List<Deck.Card> shuffle()
{
    Collections.shuffle(cards);//Once it is shuffled you can use it to draw first five cards same way we play
    System.out.println(cards);
    System.out.println(cards.size());
    return Collections.unmodifiableList(cards);
}

public static void main(String[] args)
{
    DECK.shuffle();
}
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-23T19:50:19.810

```
public static Card[] select(int k)
{
  Random rand = new Random(52); // mistake 1
  Deck deck = new Deck(52);     // mistake 2
  Card[] hand = new Card[5];
  for (int j = 0; j < 5; j += 1)
  {
    int index = rand.nextInt(52-j);
    hand[j] = deck[index];     // mistake 2
  }
  return hand;
} 
```

错误一：不要`Random`用常数初始化。这将使您的伪随机序列始终完全相同。

错误 2：要么您的声明`Deck deck`错误，要么您尝试访问的方式错误`deck[index]`，因为`deck`未将其声明为数组。由于`Deck`是一个代表卡片集合的类，因此更合乎逻辑的罪魁祸首是后一行。更改为适当`Deck`方法的调用。

如果不知道实现，`Deck`就不可能知道正确的代码。如果`Deck`本质上是一副随机的牌，那么你应该只取前 5 名。如果它是完全排序的（我应该补充一下，这不是一个现实的牌），那么你需要从中挑选随机牌。该类`Deck`至少应该有一个`remove`方法，可以立即解决您的重复问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-23T19:50:42.413

对卡片进行洗牌和挑选，这比使用随机选择要好，因为会有重复的机会，但如果你使用洗牌，那就不会了。您可以使用`Collections#shuffle`.

# android - LinkedIn api客户端对组的异常访问被拒绝？

> ID：13038028
> 
> 赞同：0
> 
> 时间：2012-10-23T19:45:19.210
> 
> 标签：android, linkedin, linkedin-api

如何在我的 Android 链接群组上发布讨论？我在用：

```
final GroupsApiClient client = factory.createLinkedInApiClient(accessTokenValue,    tokenSecretValue);      
client.getGroupById(groupid);   
client.createPost("arg0", "arg1", "arg2"); 
```

但是出现错误`access to group denied`请有人帮忙吗？谢谢 ！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-18T17:55:54.260

**截至 2015 年 5 月 12 日：**

要访问`rw_groups`，您必须申请成为相关[合作伙伴计划](https://developer.linkedin.com/partner-programs)`rw_groups`的成员，该计划提供对端点的必要 API 访问。

因此，申请 LinkedIn 的合作伙伴身份，解释您的集成是什么以及它是如何工作的。如果它符合**“我们认为他们正在为会员、开发人员和 L​​inkedIn 提供价值”的标准，**那么该端点将保持对该应用程序开放，并且仅对该应用程序开放。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T21:41:10.337

您需要确保**rw_groups**已授予您的应用程序，然后才能将讨论发布到组。

完成身份验证流程时，请确保将 rw_groups 成员权限添加到此调用：

```
POST https://api.linkedin.com/uas/oauth/requestToken?scope=rw_groups 
```

然后使用您刚刚获取的请求令牌升级访问令牌并进行 API 调用以发布到组。

# c# - 在属性中执行while循环会导致堆栈

> ID：13038041
> 
> 赞同：1
> 
> 时间：2012-10-23T19:46:07.257
> 
> 标签：c#, exception, null

我最近开始尝试自学 C#，这在很大程度上是初学者尝试在属性中使用业务规则的尝试，在我的例子中是 FurColor。当我运行下面的程序时，我得到一个`NullReferenceException`. 有人可以帮我找出这个错误的原因吗？异常发生在**第 15 行**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace _10_23_Test
{
    class Program
    {
        static void Main(string[] args)
        {
            Console.WriteLine("programming practice!");
            Dog d = new Dog();
            Console.Write("what color is your dog: ");
            d.FurColor = Console.ReadLine();
            Console.WriteLine("the color of your dog is {0}", d.FurColor);
        }
    }
    class Dog
    {
        private string furColor;
        private string petName;
        private int tagNum;

        public Dog() { }

        public Dog(string color, string name, int tagID)
        {
            furColor = color;
            petName = name;
            tagNum = tagID;
        }
        //properties
        public string FurColor
        {
            get { return furColor; }
            set {                    
                    do
                    {
                        Console.Write("enter in a viable color type: ");
                    }
                    while (furColor.Length > 10);
                    furColor = value;
                }
        }
        public string Name
        {
            get { return petName; }
            set { petName = value; }
        }
        public int TagNum
        {
            get { return tagNum; }
            set { tagNum = value; }
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T19:51:35.677

一旦更正，您将得到一个无限循环。

旁注：您不应该在您的财产的 Set 子句中要求输入。

您应该更喜欢要求输入的成员函数，检查它是否有效，然后设置颜色。

在你的狗类中添加一个如下所示的函数：

```
public void setFurColor()
{
    string color = string.Empty;
    do
    {
        Console.Write("what color is your dog: ");
        color = Console.ReadLine();
    }while ( ! string.IsNullOrEmpty(color)  && bleh.Length < 10);
    this.furColor = color;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T19:47:44.810

在访问它之前检查**furColor**是否为 null`furColor.Length`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T19:50:23.633

你的代码没有任何意义，但没关系，因为你正在学习如何编码。:)

所以 - 我猜你只想在用户输入长度大于 10 个字符的字符串时存储 furColor。如果是这样，您应该在将值分配给对象属性之前检查字符串是否正常，如果不是，则在类属性代码之外循环显示警告消息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-23T19:51:26.750

要使您拥有的代码起作用：您`furColor.Length`无需设置毛皮就可以访问...此时它什么都不是（null）。你应该检查一下`value`。

此外，这不是您在属性的 setter 中想要的那种逻辑。您的设置器不应该输出读数值，它应该简单地设置属性，因为这就是它的用途。将while循环放在你的main中。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-23T19:52:13.943

您正在使用 Dog 的公共无参数构造函数

```
public Dog() { } 
```

此构造函数不设置该字段，因此在您的实例`furColor`中它将为空。`Dog`

这意味着访问`furColor`以下行中字段的 Length 属性将引发 NullReferenceException。

```
while (furColor.Length > 10); 
```

解决此异常的一种方法是在无参数构造函数中为这些字段设置默认值，如下所示：

```
public Dog() : this("brown", "Fido", default(int))
{
} 
```

或者，您可以：

*   使用带参数的构造函数，为 . 传入一个非空值`furColor`。
*   检查`FurColor`属性设置器中的 null。
*   设置`field`它的声明位置。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-23T19:52:35.510

您的`furColor`变量需要在访问其长度之前被分配和/或检查是否为 null。由于您使用的是默认构造函数，因此您永远不会分配给 furColor 字符串。你会想从默认调用你的其他构造函数：

```
public Dog() : this("defaultColor", "defaultName", default(int)) {} 
```

话虽如此，在属性中要求用户输入并不是一种好的编程习惯，**并且**最终会在属性中出现无限循环。

# python - Python：在元组列表上使用堆命令

> ID：13038042
> 
> 赞同：0
> 
> 时间：2012-10-23T19:46:08.283
> 
> 标签：python, list, tuples, binary-heap

我试图了解 Python 的一些内置堆功能。当我传入元组列表时，它似乎不喜欢事情（或者更有可能，我没有正确传递列表）。这是我所拥有的：

```
myList = ( ('a', 1), ('b', 2) )
heapify(myList) 
```

我得到的错误是

> TypeError：堆参数必须是一个列表

难道我做错了什么？还有另一种方法可以传入元组列表吗？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-23T19:47:11.297

问题是这`myList`是一个元组。试试这个：

```
myList = [('a', 1), ('b', 2)]
heapify(myList) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T19:55:25.560

如上所述，heapify 将列表（myList）转换为堆。因此，如果您想使用 heapify，您必须先将所有内容转换为列表。

[http://docs.python.org/library/heapq.html](http://docs.python.org/library/heapq.html) <--- 为您提供有关 heapq 的更多详细信息

# php - mysqli 数据插入不起作用但没有错误

> ID：13038048
> 
> 赞同：1
> 
> 时间：2012-10-23T19:46:26.243
> 
> 标签：php, mysqli

mysqli 数据插入不起作用，但没有错误我刚开始使用 mysqli，我真的不知道一切都很好我也看到了其他问题，但没有一个解决方案适合我

这是表格：

```
<head>
<title>NEW</title>
</head>

<body>
<table border="1">
  <tr>
    <td align="center">NEW</td>
  </tr>
  <tr>
    <td>
      <table>
        <form method="post" action="add.php">
        <tr>
          <td>name</td>
          <td><input type="text" name="name" size="20">
          </td>
        </tr>
        <tr>
          <td>type</td>
          <td><select name="ptype">
  <option value="a1">a1</option>
  <option value="a2">a2</option>
  <option value="a3">a3</option>
</select>
          </td>
        </tr>

        <tr>
          <td></td>
          <td align="right"><input type="submit" 
          name="submit" value="GO"></td>
        </tr>
        </table>
      </td>
    </tr>
</table>
</body>
</html> 
```

这是 add.php 文件：

```
<?php
require("dbconnect.php");
if (isset($_POST['submit'])) {

    $db->query("SET NAMES 'utf8'");

$stmt = $db->prepare("INSERT INTO `business` (`ptype`, `name`) VALUES (?, ?)");
$stmt->bind_param('ss', $ptype, $name);

$name = $_POST["name"];
$ptype = $_POST["ptype"];

printf("%d Row inserted.\n", $stmt->affected_rows);

/* close statement and connection */
$stmt->close();

/* close connection */
}
$db->close();
?> 
```

它说插入了 0 行

*   dbconnect.php 文件包含与 mysqli 的连接

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T19:56:22.903

改变

```
$stmt->bind_param('ss', $ptype, $name);

$name = $_POST["name"];
$ptype = $_POST["ptype"]; 
```

到

```
$name = $_POST["name"];
$ptype = $_POST["ptype"];

$stmt->bind_param('ss', $ptype, $name);
$stmt->execute(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T19:51:19.047

您已经准备好声明并绑定了参数。现在执行它。

```
$stmt = $db->prepare("INSERT INTO `business` (`ptype`, `name`) VALUES (?, ?)");
$stmt->bind_param('ss', $ptype, $name);
$stmt->execute(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T19:52:26.417

正如@andrewsi 在他的评论中提到的那样，您准备了插入语句但没有执行它。这就是为什么它不工作。

尝试 `$stmt->execute();`在您的代码中使用。

所以你的查询应该是这样的：

```
<?php
require("dbconnect.php");
if (isset($_POST['submit'])) {

    $db->query("SET NAMES 'utf8'");

$stmt = $db->prepare("INSERT INTO `business` (`ptype`, `name`) VALUES (?, ?)");

$name = $_POST["name"];
$ptype = $_POST["ptype"];

$stmt->bind_param('ss', $ptype, $name);
$stmt->execute();

printf("%d Row inserted.\n", $stmt->affected_rows);

/* close statement and connection */
$stmt->close();

/* close connection */
}
$db->close();
?> 
```

# jquery - Firebug fancybox_sprite.png 404 文件未找到

> ID：13038053
> 
> 赞同：1
> 
> 时间：2012-10-23T19:46:38.710
> 
> 标签：jquery, spring-mvc, fancybox

我的项目文件结构在我不知道可能导致错误的原因：

```
src
test
db
war/
   WEB-INF/
          classes
          css/
             fancybox/
                     jquery.fancybox.css
          images/
                fancybox/
                        fancybox_sprite.png
          js
          lib
          tld
          applicationContext.xml
          servlet.xml
          web.xml
    index.jsp 
```

**jquery.fancybox.css 有**

```
#fancybox-loading, .fancybox-close, .fancybox-prev span, .fancybox-next span {

    background-image:url(../../images/fancybox/fancybox_sprite.png)
} 
```

我也收到来自萤火虫的错误：

GET fancybox_sprite.png 404 未找到文件 GET fancybox_loading.gif 404 未找到文件 GET fancybox_overlay.png 404 未找到文件

**Web.xml**

```
<?xml version="1.0" encoding="UTF-8"?>

<web-app
    xmlns="http://java.sun.com/xml/ns/javaee" 
    xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
    id="crimeTrack" version="3.0">

    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <context-param>
         <param-name>log4jConfigLocation</param-name> 
         <param-value>/WEB-INF/classes/log4j.properties</param-value>
     </context-param>
     <listener> <listener-class>org.springframework.web.context.request.RequestContextListener</listener-class>  </listener> 

     <listener>
          <listener-class>org.springframework.web.util.Log4jConfigListener</listener-class> 
     </listener>

     <listener>
          <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
     </listener> 

    <servlet>
        <servlet-name>crimetrack</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>crimetrack</servlet-name>
        <url-pattern>*.htm</url-pattern>
    </servlet-mapping>

    <welcome-file-list>
    <welcome-file>
      index.jsp
    </welcome-file>
    </welcome-file-list>

    <jsp-config>
        <taglib>
            <taglib-uri>/spring</taglib-uri>
            <taglib-location>/WEB-INF/tld/spring-form.tld</taglib-location>
        </taglib>
    </jsp-config>

</web-app> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T19:54:00.087

如果您的 css 包含在某处，则您的路径必须来自此文件。不是来自CSS。如果它包含在`index`尝试中`background-image:url(images/fancybox/fancybox_sprite.png)`

# mobiscroll - Mobiscroll 排序轮值未正确显示

> ID：13038054
> 
> 赞同：0
> 
> 时间：2012-10-23T19:46:41.137
> 
> 标签：mobiscroll

我已将 Scroller 值定义为从 15 分钟间隔开始的小时数，并且轮子的值应为 0.25 0.5 0.75 1 1.25...23.75 但它对值进行排序，例如首先显示整数然后显示小数的值，所以它就像 1 2 3 ...23 0.25 .5.0.75 ...23.75 我怎样才能休息以按增量顺序显示数字。

```
$(function () {
            var hours = [{}];
            for (var i = 0; i < 3; i++) {
                var wheel = {};
                for (var j = 0; j < 24; j += .25) {
                    wheel[j] = j;
                }
                hours[0]['Hours'+i] = wheel;
            }

            $('#i').scroller({
                theme: 'default',
                display: 'inline',
                mode: 'mixed',
                wheels: hours,
                height: 40
            });
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T07:09:06.963

发生这种情况是因为 wheel 变量是一个对象，它的键是数字（这次）。您可以通过在每个键前添加“_”字符来解决此问题。

```
 var hours = [{}];
            for (var i = 0; i < 3; i++) {
                var wheel = {};
                for (var j = 0, k=0; j < 24; j += .25,k++) {
                    wheel['_'+j] = j;
                }
                hours[0]['Hours'+i] = wheel;
            } 
```

这样排序就可以了，但结果（在输入字段中）也将包含“_”字符。（例如，如果您选择 3.25 1.5 4.75，则输入将包含“_3.25 _1.5 _4.75”）。因此，您必须编写一个 formatResult 函数来从它们中删除 _ 字符，如下所示：

```
 $('#i').scroller({
            theme: 'default',
            display: 'inline',
            mode: 'mixed',
            wheels: hours,
            height: 40,
            formatResult: function (d){
                var str = '';
                for(var i = 0; i < d.length; i++)
                    str += d[i].substring(1) + ' ';
                return str;
            }
        }); 
```

我希望这有帮助！

# prolog - 给定范围序言的素数列表

> ID：13038057
> 
> 赞同：4
> 
> 时间：2012-10-23T19:46:47.690
> 
> 标签：prolog, primes

我是 Prolog 的新手，我需要为给定范围创建一个素数列表。例子

```
?- p_list(3,23,X).
X = [3, 5, 7, 11, 13, 17, 19, 23]. 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-23T19:58:42.997

我搞定了。我会发布答案以防其他人需要它。

```
is_prime(2).
is_prime(3).
is_prime(P) :- 
    integer(P), 
    P > 3, 
    P mod 2 =\= 0, 
    \+ has_factor(P,3).  

has_factor(N,L) :- N mod L =:= 0.
has_factor(N,L) :- 
    L * L < N, 
    L2 is L + 2, 
    has_factor(N,L2).

prime_list(A,B,L) :- 
    A1 is (A // 2) * 2 + 1, 
    p_list(A1,B,L).

p_list(A,B,[]) :- A > B, !.
p_list(A,B,[A|L]) :- 
    is_prime(A), !, 
    next(A,A1), 
    p_list(A1,B,L).

p_list(A,B,L) :- 
    next(A,A1), 
    p_list(A1,B,L).

next(2,3) :- !.
next(A,A1) :- A1 is A + 2. 
```

# svn - 如何允许用户 r/w 访问某些子文件夹但不允许访问父文件夹？

> ID：13038067
> 
> 赞同：3
> 
> 时间：2012-10-23T19:47:11.797
> 
> 标签：svn, permissions, apache2

我已经设置了一个使用 Apache DAV 和 LDAP 服务的 SVN 存储库。当我使用对整个存储库具有读/写权限的用户访问存储库时，一切正常。

该存储库有许多项目，如下所示：

```
repo_src
 \a
 \b
 \c
 \d
 .. etc.. 
```

我需要授予某个用户“A”对某个子目录“a”的访问权限，但不能授予其父目录或其兄弟目录（b、c、d 等）的访问权限。

我阅读了有关基于路径的授权的书“带有 Subversion 的版本控制”（http://svnbook.red-bean.com/en/1.6/svn-book.html#svn.serverconfig.pathbasedauthz）。我完全按照那里的规定做了：我用这样的东西编辑了文件 svn.authz：

```
[src_repo:/a]
A = rw

[src_repo:/]
root = rw 
```

在 Apache 中，svn 配置文件如下所示：

```
<Location /svn>
DAV svn

SVNParentPath /data/repos/
AuthName "Zentyal LDAP user required"
AuthType Basic
AuthBasicProvider ldap file
AuthBasicAuthoritative On
AuthzLDAPAuthoritative off

AuthLDAPURL ....
AuthLDAPBindDN ....
AuthLDAPBindPassword ...
AuthUserFile /dev/null
uthzSVNAccessFile /etc/apache2/svn.authz

require valid-user

</Location> 
```

当我以用户 A 通过 WEB 界面 ( ) 访问子目录 src_repo/a 时`http://host/svn/ src_repo/a`，我可以读取该目录及其文件的内容。但是，当我尝试 `http://host/svn/src_repo/a`使用 TortoiseSVN 浏览目录或使用“svn checkout `http://host/svn/src_repo/a`”检出内容时，我收到以下消息：

> svn：E175002：服务器发送意外返回值（405 方法不允许）响应 PROPFIND 请求“/”

显然 TortoiseSVN 和 svn 客户端正在尝试访问“/”（这不是故意的）。

如何设置 svn 服务器只允许子目录访问？为什么 WEB 访问不同于命令行或 TotoiseSVN 访问？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T02:26:05.780

请重新阅读书籍：您忽略并错过了 authz 文件规范中的一些明显内容

[使用我的repo 集合](http://mayorat.ursinecorner.ru:8088/svn/)和它的 authz 文件作为示例的简短回答

```
[/]
*=r

[Elgg-Russian:/]
@Coders=rw

[Elgg-TranslationRU:/]
@Translators=rw

[Hello:/]
lazybadger=rw

[Hello:/trunk]
lukoie=rw

[groups]
Coders=irrelevant,to,question
Translators=irrelevant,to,question 
```

*   我在单独的部分中**定义**了 repo-collection的**根（作为根）**
***   我使用简写“任何用户” - **   我不使用速记“no access”，但它以空字符串的形式存在：`*=`在任何部分都意味着 NO ACCESS*   我有 3 个项目的三个存储库，而不是 3 个项目的 1 个共享存储库，但即使在单个存储库的情况下（由于 SVNParentPath）*我*将从 / 部分开始**

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T15:47:10.297

这似乎是 svn 客户端缓存的临时问题。今天，相同的配置有效。我真的很想知道以前出了什么问题，但没有办法确定。**

# php - 带有 Jquery 和数据库的弹出窗口

> ID：13038068
> 
> 赞同：-2
> 
> 时间：2012-10-23T19:47:13.057
> 
> 标签：php, jquery, database, popup

我需要创建一个动态生成的窗口，该窗口显示从数据库中获取的图像和各种元素。弹出窗口有效，但它没有获得我试图使用 onclick 函数获得的“id”。

使用控制台我收到此消息：XMLHttpRequest cannot load getProduct.php?id=undefined。Access-Control-Allow-Origin 不允许 Origin null。我不确定该怎么做进一步定义“id”。

HTML & JS：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<link rel="stylesheet" type="text/css" href="style.css">
<script type="text/javascript">
$(document).ready(function() {

onClickRegister = function(){   
var id = $(this).attr('id');

    b = $("#blanket");
    b.css("display","block");
    b.css("position","fixed");
    b.css("width", window.innerWidth);
    b.css("height", window.innerHeight);
    b.css("background-color", "rgba(0, 0, 0, 0.7)");
    f=$("#openImg");
    f.css("position", "fixed");
    f.css("top", "10%");
    f.css("left", "10%");

    $.getJSON("getProduct.php?id="+id,function(data){
        var img = data.data.prodImg;
        var name = data.data.prodName;
        var price = data.data.prodPrice;
        var description = data.data.prodDesc;
        var qty = data.data.prodQty;
        $("#openImg").html("<p style='float:right; margin: 0; padding: 0;'><a href='#' id='close' onClick='onClickClose();'>[X]</a></p><br /><img src='"+img+"' width='544' height='512' /><br />Name: "+name+"<br />Price: "+price+"<br />Qty: "+qty+"<br />Description: "+description)
    });
};
window.onresize = function () {
    if ($("#blanket").length > 0) {
        b.css("width", window.innerWidth);
        b.css("height", window.innerHeight);
   }
};
});
</script>
</head><body>

<div id="body"><div id="wrapper">

<a href="#" onclick="onClickRegister()" id="1"><img src="images/plug1_s.jpg" width="200" height="200" /></a>
<a href="#" onclick="onClickRegister()" id="2"><img src="images/plug2_s.jpg" width="200" height="200" /></a>
<a href="#" onclick="onClickRegister()" id="3"><img src="images/plug3_s.jpg" width="200" height="200" /></a>
<a href="#" onclick="onClickRegister()" id="4"><img src="images/plug4_s.jpg" width="200" height="200" /></a>
<a href="#" onclick="onClickRegister()" id="5"><img src="images/plug5_s.jpg" width="200" height="200" /></a>
<a href="#" onclick="onClickRegister()" id="6"><img src="images/plug6_s.jpg" width="200" height="200" /></a>

<div id="blanket"><div id="openImg">

</div></div>

<script type="text/javascript">
function onClickClose(){
    $("#blanket").hide();
}
</script></div></div>
</body></html> 
```

PHP：

```
// retval: 0 - login ok, 1 - login failed, 2 - internal error
$json = array("retval" => 2, "data" => NULL, "debug" => "");

$id=json_decode($_REQUEST['id']);

$sql="SELECT * FROM prodTB WHERE prodId=" . $id;

$json['debug'] .= "SQL query was: ".$sql."\n";
$result=mysql_query($sql);
if (!$result) {
    $json['debug'] .= "SQL query failed\n";
    $json['debug'] .= "Other output: ". ob_get_contents();
    ob_end_clean();
    die(json_encode($json));
}
$count=mysql_num_rows($result);

if($count==1){
    $json['retval'] = 0;
    $json['data'] = mysql_fetch_assoc($result);
} else {
    $json['retval'] = 1;
}
$json['debug'] .= "Other output: ". ob_get_contents();
ob_end_clean();
echo json_encode($json); 
```

数据库表结构：

```
CREATE TABLE `prodTB` (
`prodId` int(11) NOT NULL,
`prodImg` varchar(80) COLLATE utf8_unicode_ci NOT NULL,
`prodName` varchar(50) COLLATE utf8_unicode_ci NOT NULL,
`prodPrice` decimal(10,2) NOT NULL,
`prodDesc` longtext COLLATE utf8_unicode_ci NOT NULL,
`prodQty` int(11) NOT NULL,
PRIMARY KEY (`prodId`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T23:39:55.393

由于您使用的是 jQuery - 您可以摆脱内联 onClicks 并在 dom 准备好绑定事件处理程序。

```
$(document).ready(function() {
    var b = $("#blanket");
    var f = $("#openImg");
    $('#wrapper a').click(function() { 
        var id = $(this).attr('id');// this will get your ID now

        b.css("display", "block");
        b.css("position", "fixed");
        b.css("width", window.innerWidth);
        b.css("height", window.innerHeight);
        b.css("background-color", "rgba(0, 0, 0, 0.7)");

        f.css("position", "fixed");
        f.css("top", "10%");
        f.css("left", "10%"); 
```

在声明变量时也要使用 var，否则它们将是全局的。您还需要在单击绑定之前移动 var f 和 var b，因为您在其他函数中使用它们

# android - 动态地将几行添加到表格布局中

> ID：13038070
> 
> 赞同：0
> 
> 时间：2012-10-23T19:47:19.950
> 
> 标签：android, tablelayout, android-tablelayout

在没有运气的情况下搜索了一段时间后，我决定问这个......

我有一个 SQLite 数据库，其中包含我想在 GUI 中显示的信息，但我没有使用 ListView，我使用的是 TableLayout ......所以我在互联网上找到了这段代码：

```
/* Find Tablelayout defined in main.xml */
      TableLayout tl = (TableLayout)findViewById(R.id.myTableLayout);
           /* Create a new row to be added. */
           TableRow tr = new TableRow(this);
           tr.setLayoutParams(new LayoutParams(
                          LayoutParams.FILL_PARENT,
                          LayoutParams.WRAP_CONTENT));
                /* Create a Button to be the row-content. */
                Button b = new Button(this);
                b.setText("Dynamic Button");
                b.setLayoutParams(new LayoutParams(
                          LayoutParams.FILL_PARENT,
                          LayoutParams.WRAP_CONTENT));
                /* Add Button to row. */
                tr.addView(b);
      /* Add row to TableLayout. */
      tl.addView(tr,new TableLayout.LayoutParams(
                LayoutParams.FILL_PARENT,
                LayoutParams.WRAP_CONTENT)); 
```

而且我想修改它，以便我可以在 for 循环中执行此操作，但还要在将其添加到 TableLayout 之前将三个 TextView 插入到 TablaRow。目前，我有这个代码：

```
//Global Variables
TableLayout tabla = (TableLayout) findViewById(R.id.tabla1);
public static DataBaseHelper mDbH;
String rutas[][];
int COLUMNAS;
int FILAS;

//onCreate method
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.rutas);
    mDbH = new DataBaseHelper(this);

    obtenerDatosRutas();

    //tabla.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT));
    for(int i=0;i<FILAS;i++){
        addFila(rutas[i][COLUMNAS-3],rutas[i][COLUMNAS-2],rutas[i][COLUMNAS-1]);
    }

}

//obtenerDatosRutas method outside onCreate method
public void obtenerDatosRutas(){
    mDbH.open();
    Cursor c = null;
    c = mDbH.consulta1();
    startManagingCursor(c);
    COLUMNAS = c.getColumnCount();
    FILAS = c.getCount();
    rutas = new String[FILAS][COLUMNAS];
    if(c.moveToFirst() == false){
        Log.e("cursor c ","vacio");
        c.close();
        mDbH.close();
    }else{
        for(int i=0;i<FILAS;i++){
            for(int j=0;j<COLUMNAS;j++){
                rutas[i][j] = c.getString(j);
            }
            c.moveToNext();
        }
        c.close();
        mDbH.close();
    }
}

 //addFila method outside onCreate method
 private void addFila(String string, String string2, String string3) {
    // TODO Auto-generated method stub
    TableRow row = new TableRow(this);
    row.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT));
    TextView tv1 = new TextView(this);
    tv1.setText(string);
    tv1.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT));
    row.addView(tv1);
    TextView tv2 = new TextView(this);
    tv2.setText(string2);
    tv2.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT));
    row.addView(tv2);
    TextView tv3 = new TextView(this);
    tv3.setText(string3);
    tv3.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT));
    row.addView(tv3);
    tabla.addView(row,new TableLayout.LayoutParams(LayoutParams.MATCH_PARENT,LayoutParams.WRAP_CONTENT));
} 
```

这是 logcat 显示的错误......它说是由于 TableLayout tabla = (TableLayout) findViewById(R.id.tabla1); 行中的 NullPointerException

```
10-23 14:50:55.062: E/AndroidRuntime(2738): FATAL EXCEPTION: main
10-23 14:50:55.062: E/AndroidRuntime(2738): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{tian.proto/tian.proto.pantalla3}: java.lang.NullPointerException
10-23 14:50:55.062: E/AndroidRuntime(2738):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1573)
10-23 14:50:55.062: E/AndroidRuntime(2738):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
10-23 14:50:55.062: E/AndroidRuntime(2738):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
10-23 14:50:55.062: E/AndroidRuntime(2738):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
10-23 14:50:55.062: E/AndroidRuntime(2738):     at android.os.Handler.dispatchMessage(Handler.java:99)
10-23 14:50:55.062: E/AndroidRuntime(2738):     at android.os.Looper.loop(Looper.java:130)
10-23 14:50:55.062: E/AndroidRuntime(2738):     at android.app.ActivityThread.main(ActivityThread.java:3687)
10-23 14:50:55.062: E/AndroidRuntime(2738):     at java.lang.reflect.Method.invokeNative(Native Method)
10-23 14:50:55.062: E/AndroidRuntime(2738):     at java.lang.reflect.Method.invoke(Method.java:507)
10-23 14:50:55.062: E/AndroidRuntime(2738):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842)
10-23 14:50:55.062: E/AndroidRuntime(2738):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)
10-23 14:50:55.062: E/AndroidRuntime(2738):     at dalvik.system.NativeStart.main(Native Method)
10-23 14:50:55.062: E/AndroidRuntime(2738): Caused by: java.lang.NullPointerException
10-23 14:50:55.062: E/AndroidRuntime(2738):     at android.app.Activity.findViewById(Activity.java:1647)
10-23 14:50:55.062: E/AndroidRuntime(2738):     at tian.proto.pantalla3.<init>(pantalla3.java:21)
10-23 14:50:55.062: E/AndroidRuntime(2738):     at java.lang.Class.newInstanceImpl(Native Method)
10-23 14:50:55.062: E/AndroidRuntime(2738):     at java.lang.Class.newInstance(Class.java:1409)
10-23 14:50:55.062: E/AndroidRuntime(2738):     at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
10-23 14:50:55.062: E/AndroidRuntime(2738):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1565)
10-23 14:50:55.062: E/AndroidRuntime(2738):     ... 11 more 
```

而且我不知道为什么，因为我在我的 XML 文件中声明了 id (tabla1)：

```
<TableLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/tabla1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="#006ca5"
    android:layout_marginTop="30dp"
    android:layout_marginLeft="10dp"
    android:layout_marginRight="10dp"
> ...   </TableLayout> 
```

有什么线索吗？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T20:01:33.360

```
//Global Variables 
TableLayout tabla = (TableLayout) findViewById(R.id.tabla1); 
```

**^ 你的问题。**

`findViewById()`在当前内容视图中搜索具有您传入的 ID 的视图。但是，`setContentView(R.layout.rutas)`直到`onCreate()`生命周期事件才设置内容视图 ( )。您可以将您声明`TableLayout`为全局，但`findViewById()`在调用`setContentView()`.

# regex - sed 在特定匹配行的末尾附加一些东西

> ID：13038079
> 
> 赞同：1
> 
> 时间：2012-10-23T19:47:46.737
> 
> 标签：regex, linux, sed

我有这个文件包含以下文本。

```
200.200.200.253
80/tcp:filtered:http
443/tcp:filtered:https

200.200.200.254
80/tcp:filtered:http
443/tcp:filtered:https

web.example.com (200.200.200.250)
80/tcp:filtered:http
443/tcp:filtered:https 
```

我想使用**sed**在 IP 地址末尾添加 (:)。所以它看起来像下面。

```
 200.200.200.253 :
 80/tcp:filtered:http
 443/tcp:filtered:https

 200.200.200.254 :
 80/tcp:filtered:http
 443/tcp:filtered:https

 web.example.com (200.200.200.250) :
 80/tcp:filtered:http
 443/tcp:filtered:https 
```

我遇到了`web.example.com (200.200.200.250)`正则表达式匹配的问题。

我希望这条线看起来像 `web.example.com (200.200.200.250) :`

* * *

我得到了答案，这是我尝试过的。

```
 sed -e 's/[0-9]\{1,3\}.[0-9]\{1,3\}.[0-9]\{1,3\}.[0-9]\{1,3\}/&:/' file.txt 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T20:04:34.543

我建议你使用

 ~~~~```
sed -r 's/^([0-9]+\.){3}[0-9]+$/& :/g' filename 
```~~  ~~```
sed -r 's/([0-9]+\.){3}[0-9]+.*/& :/g' filename 
```~~~~

# paypal - 贝宝沙盒返回网址

> ID：13038080
> 
> 赞同：1
> 
> 时间：2012-10-23T19:47:56.727
> 
> 标签：paypal, paypal-subscriptions

我正在沙箱中测试一个 Paypal 订阅按钮，基本上我在完成购买并点击返回 url 时收到一个名为 auth 的加密变量。代码中是否有问题，或者只是使用 Paypal 沙箱时应该工作的方式？没有尝试过 IPN 部分，因为显然因为我使用本地机器来测试 IPN 模拟器并没有给出任何结果。请帮忙！

```
 <?
                //paypal url for standard form submission via post... no API
                $environment = 'https://www.sandbox.paypal.com/cgi-bin/webscr';
                $cancel_url='http://192.168.100.136/ProjectX/protos/jquery-menu2/';
                $return_url='http://www.interorg.com';
                $notify_url='http://192.168.100.136/ProjectX/protos/jquery-menu2/includes/ipn2.php';

                ?>

        <form  name='subscribe' action="<?=$environment?>" method="post">
        <input type="hidden" name="cmd" value="_xclick-subscriptions">
        <input type="hidden" name="business" value="jeanpa_1350092589_biz@gmail.com">
        <input type="hidden" name="lc" value="US">
        <input type="hidden" name="item_name" value="Subscription to InterOrg - Membership Plan: Silver">
        <input type="hidden" name="item_number" value="1nT3r0rG">
        <input type="hidden" name="src" value="1">
        <input type="hidden" name="currency_code" value="USD">
        <input type="hidden" name="usr_manage" value="1">

        <input type="hidden" name="return" value="<?=$return_url?>">
        <input type="hidden" name="cancel_return" value="<?=$cancel_url?>">

        <input type="hidden" name="notify_url" value="<?=$notify_url?>">

        <input type="hidden" name="bn" value="PP-SubscriptionsBF:btn_subscribeCC_LG.gif:NonHostedGuest">
        <table>
        <tr><td><input type="hidden" name="on0" value=""></td></tr><tr><td>
            <select name="os0">
            <option value="Monthly1">Silver : $10.00 USD - monthly</option>
            <option value="Monthly2">Golden : $20.00 USD - monthly</option>
        </select> </td><td>
            <!--<button type="submit"  value="Subscribe" style="font-Weight:bolder; padding-left:6px; padding-right:6px; padding:3px" name="submit" alt="PayPal">Subscribe</button>-->
        <input type="submit" value='Subscribe' style='font-Weight:bolder'>
            </td></tr>
        </table>

        <input type="hidden" name="no_note" value="1">
        <input type="hidden" name="no_shipping" value="1">
        <input type="hidden" name="currency_code" value="USD">
        <input type="hidden" name="option_select0" value="Monthly1">
        <input type="hidden" name="option_amount0" value="10.00">
        <input type="hidden" name="option_period0" value="M1">
        <input type="hidden" name="option_frequency0" value="1">
        <input type="hidden" name="option_select1" value="Monthly2">
        <input type="hidden" name="option_amount1" value="20.00">
        <input type="hidden" name="option_period1" value="M2">
        <input type="hidden" name="option_frequency1" value="1">
        <input type="hidden" name="option_index" value="0">
        <input type="hidden" name="src" value="1">
        <input type="hidden" name="amount" value="10.00">

        <!-- original code from the paypal standard button generator
        <input type="image" src="https://www.sandbox.paypal.com/en_US/i/btn/btn_subscribeCC_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
        -->
        <img alt="" border="0" src="https://www.sandbox.paypal.com/en_US/i/scr/pixel.gif" width="1" height="1">
        </form> 
```

每当我在沙箱中测试此表单时，我都会得到一个如下所示的变量：

```
 ?auth=ACApkCA2r7JK2eRIY-KBHrr6UylVMQouy4DDWvWwpthFjWfxxlT.oe2zSaP5RPRGiMi-ZEutGj.9NH.KvsWoXfA&form_charset=UTF-8 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T13:05:08.703

添加“rm”参数并将其设置为“2”。这会导致一个 POST 到成功页面，其中包含所有事务变量。[在这里阅读更多](https://cms.paypal.com/es/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_html_Appx_websitestandard_htmlvariables)。

# ruby - 更喜欢 %w(...) 到文字数组？

> ID：13038089
> 
> 赞同：30
> 
> 时间：2012-10-23T19:48:14.213
> 
> 标签：ruby

在 RubyMine 中输入一个简单的字符串文字数组时：

```
cols =
[
  "Col1",
  "Col2"
] 
```

RubyMine 抱怨说我应该更喜欢使用`%w`文字数组：

```
cols = %w(Col1 Col2) 
```

它提供了指向 Ruby 样式指南（[此处](https://github.com/bbatsov/ruby-style-guide#collections)）的链接，其中说：

> 当您需要字符串数组时，首选 %w 而非文字数组语法。

```
# bad
STATES = ['draft', 'open', 'closed']

# good
STATES = %w(draft open closed) 
```

我可以看到它如何`%w`提供可能更简洁的代码。除了简洁之外，还有什么理由更喜欢一种方法而不是另一种方法？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-10-23T21:21:23.850

瞧！，一个基准：

```
require 'benchmark'

n = 1_000_000
Benchmark.bm(11) do |b|
  b.report('%w') { n.times { %w[a b c d e f g h i j k l m n o p q r s t u v w x y z] } }
  b.report('explicit') { n.times { ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z'] } }
  b.report('numerics') { n.times { [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26] } }
end

                  user     system      total        real
%w            2.590000   0.000000   2.590000 (  2.591225)
explicit      2.590000   0.000000   2.590000 (  2.584781)
numerics      0.300000   0.000000   0.300000 (  0.309161)

                  user     system      total        real
%w            2.590000   0.000000   2.590000 (  2.591516)
explicit      2.590000   0.000000   2.590000 (  2.584155)
numerics      0.300000   0.000000   0.300000 (  0.308896)

                  user     system      total        real
%w            2.590000   0.000000   2.590000 (  2.592848)
explicit      2.590000   0.000000   2.590000 (  2.585558)
numerics      0.300000   0.000000   0.300000 (  0.308570) 
```

我添加了“numerics”数组测试，因为我怀疑它`%w`比使用显式字符串更快，因为测试字符串。`%w`不需要这样做，因为它假定一切都是字符串。运行三遍后，就处理字符串而言，它是一次洗涤。数字规则，字符串流口水，等等。

* * *

之前的基准测试是在我的工作系统上使用 Ruby 1.9.3-p286 运行的。我在家中使用我的旧 MacBook Pro 再次测试，使用 Ruby 1.8.7-p358，因此由于托管硬件的差异，加上运行较旧的 Ruby，以下数字较慢：

```
 user     system      total        real
%w           3.070000   0.000000   3.070000 (  3.080983)
explicit     3.100000   0.000000   3.100000 (  3.093083)
numerics     0.950000   0.040000   0.990000 (  0.990535)

                user     system      total        real
%w           3.080000   0.010000   3.090000 (  3.076787)
explicit     3.090000   0.000000   3.090000 (  3.089246)
numerics     0.950000   0.030000   0.980000 (  0.989579)

                user     system      total        real
%w           3.080000   0.000000   3.080000 (  3.073877)
explicit     3.090000   0.000000   3.090000 (  3.091576)
numerics     0.950000   0.030000   0.980000 (  0.989132) 
```

在 1.8.7 上，`%w`速度一直更快，这可能引起了速度传闻。

# java - 允许 java 信任库接受所有 SSL 证书吗？

> ID：13038094
> 
> 赞同：2
> 
> 时间：2012-10-23T19:48:31.563
> 
> 标签：java, store, trust

访问[此](https://stackoverflow.com/a/5671038/1546070)问题后。

我看到了一些答案，最好的显然是 so_mv 的答案。现在看来，他的答案现在已经过时了，因为我已经尝试过所有的导入和确切的代码，但它会产生大量错误。我查看了文档以查看最新的 java 中是否有任何更改，但我似乎无法找到原因。我认为对该问题的更新答案不仅会使我受益，而且会使整个社区受益。

错误：

```
SecurityCheck.java:28: error: <identifier> expected
        sc.init(null, new TrustManager[] { trm }, null);
               ^
SecurityCheck.java:28: error: illegal start of type
        sc.init(null, new TrustManager[] { trm }, null);
                ^
SecurityCheck.java:28: error: illegal start of type
        sc.init(null, new TrustManager[] { trm }, null);
                      ^
SecurityCheck.java:28: error: ')' expected
        sc.init(null, new TrustManager[] { trm }, null);
                         ^
SecurityCheck.java:28: error: not a statement
        sc.init(null, new TrustManager[] { trm }, null);
                                           ^
SecurityCheck.java:28: error: ';' expected
        sc.init(null, new TrustManager[] { trm }, null);
                                              ^
SecurityCheck.java:28: error: illegal start of type
        sc.init(null, new TrustManager[] { trm }, null);
                                                ^
SecurityCheck.java:28: error: ';' expected
        sc.init(null, new TrustManager[] { trm }, null);
                                                 ^
SecurityCheck.java:28: error: illegal start of type
        sc.init(null, new TrustManager[] { trm }, null);
                                                      ^
SecurityCheck.java:28: error: <identifier> expected
        sc.init(null, new TrustManager[] { trm }, null);
                                                       ^
SecurityCheck.java:28: error: ';' expected
        sc.init(null, new TrustManager[] { trm }, null);
                                                        ^
SecurityCheck.java:29: error: illegal start of type
        HttpsURLConnection.setDefaultSSLSocketFactory(sc.getSocketFactory());
                          ^
SecurityCheck.java:29: error: <identifier> expected
        HttpsURLConnection.setDefaultSSLSocketFactory(sc.getSocketFactory());
                                                                         ^
SecurityCheck.java:29: error: ';' expected
        HttpsURLConnection.setDefaultSSLSocketFactory(sc.getSocketFactory());
                                                                          ^
SecurityCheck.java:29: error: illegal start of type
        HttpsURLConnection.setDefaultSSLSocketFactory(sc.getSocketFactory());
                                                                           ^
SecurityCheck.java:29: error: <identifier> expected
        HttpsURLConnection.setDefaultSSLSocketFactory(sc.getSocketFactory());
                                                                            ^
SecurityCheck.java:29: error: ';' expected
        HttpsURLConnection.setDefaultSSLSocketFactory(sc.getSocketFactory()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T21:01:43.157

查看您的错误后，我认为问题在于您已将代码直接放在`class`块中，但它应该放在这样的方法中：

```
// package here
// imports here
public class SecurityCheck
{
    public void test() throws NoSuchAlgorithmException, KeyManagementException
                              // and any other exception here
    {
        // alternatively to throwing the exceptions to the caller,
        // you can handle them here using a try-catch-block

        // code from answer you linked to here
    }
} 
```

我没有尝试过，我不知道这是否是唯一的问题，但它会解释你得到的错误。第一行是在`class`主体中有效的变量声明和初始化，但该行`sc.init(null, new TrustManager[] { trm }, null);`不是（因为它是一个语句）并且需要在一个方法中。这也是错误从这一行开始的原因。

# php - 保存一个 $_GET 值，因为我在 PHP 中使用了另一个值

> ID：13038098
> 
> 赞同：-4
> 
> 时间：2012-10-23T19:48:42.233
> 
> 标签：php

看看下面的代码，你就会明白；）

**多重竞赛.php**

```
<p><a href="subscribe.php? Competition =1">competition 1!</a></p>
<p><a href="subscribe.php? Competition =2">competition 2!</a></p>
<p><a href="subscribe.php? Competition =3">competition 3!</a></p> 
```

**订阅.php**

```
<?php 
if ($_SESSION['login']== "OK" ) { 
  $Competition = $_GET[' Competition '];
  echo $Competition;

  if (isset($_GET[' Competition '])) {}
?>

<a href="Subscribe.php?Subscribe=Character1">Subscribe </a>
<br/> 
```

还有更多代码……如您所见，我将使用另一个 $_GET 但我想将第一个保存在某个地方。我该怎么做呢？目前第一个 $_GET 值被新的值覆盖。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T19:53:35.110

我对你想要什么的“猜测”：

使用 & 并向 url 添加任意数量的变量：

```
 ... <a href="Subscribe.php?Subscribe=Character1&Competition=3">Subscribe</a>... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T19:55:45.470

首先，不要在参数名称中放空格，这是不允许的。此外，您应该删除 $ 和 Competition 之间的空格（第 2 行）。

您只能有 1 个名为 Competition 的变量。获取后，将其存储在 $Competition 变量中，以便以后更改 $Competition 而不会影响 $_GET['Competition']

一般你的问题不是很清楚，请提供更多细节

# perl - 使用 file::copy 在 mod_perl 下提供图像失败

> ID：13038102
> 
> 赞同：0
> 
> 时间：2012-10-23T19:48:47.597
> 
> 标签：perl, cgi, mod-perl, mod-perl2

我有一个 CGI 脚本，它使用 File::Copy CPAN 模块提供图像：

```
use File::Copy;
.... (set appropriate content header)
binmode STDOUT;
copy $imageFile, \*STDOUT || die "Image delivery failed: $!"; 
```

这在 CGI 下工作正常，但在 mod_perl 下运行时我得到：

```
[File::Copy::copy 140]  stat() on unopened filehandle STDOUT at /usr/share/perl/5.14/File/Copy.pm line 140. 
```

我不确定这是否是预期的行为，或者某处是否存在错误。我是 mod_perl 的新手，发现我现在正淹没在文档的海洋中。有什么方法可以更改我的脚本，使其在 CGI 或 mod_perl 下运行良好而无需更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T15:36:58.133

来自 mod_perl 文档

> 在 mod_perl 下，CORE::print()（使用 STDOUT 作为文件句柄参数或根本不使用文件句柄）会将输出重定向到 Apache::print()，因为 STDOUT 文件句柄与 Apache 相关联。

如果 perltie 从 BUGS 部分

> 绑定的文件句柄仍然不完整。目前无法捕获 sysopen()、truncate()、flock()、fcntl()、stat() 和 -X。

如果您愿意，可以在[https://rt.perl.org/rt3//Public/Bug/Display.html?id=112164](https://rt.perl.org/rt3//Public/Bug/Display.html?id=112164)的错误报告中阅读更多相关信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T20:14:02.950

除非您愿意更改 File::Copy 或 mod_perl（以负面方式），否则不会。File::Copy 需要一个与系统文件句柄关联的文件句柄，但 STDOUT 是一个绑定的文件句柄。

# redirect - 跟踪谷歌分析短网址重定向

> ID：13038104
> 
> 赞同：2
> 
> 时间：2012-10-23T19:48:55.770
> 
> 标签：redirect, google-analytics, http-redirect

例如，我有一个重定向到其他页面的短链接管理器（我将调用此目标页面）并且有点像[http://myredirector.com/343uj](http://myredirector.com/343uj)

```
<html>
<head>
    <meta http-equiv="refresh" content="0;url=http://destination-page.com">
</head>

<body>
You are being redirected to <a href="http://destination-page.com">Destination Page</a>...
</body>
</html> 
```

我的问题是当我看到[http://destination-page.com](http://destination-page.com)的分析报告时，那里的页面程序没有从我的短链接管理器 (http://myredirector.com) 注册

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T02:45:08.117

大多数 url 缩短器将使用 HTTP 3XX 状态代码进行重定向。这意味着浏览器遵循重定向到新路径，但保持与以前相同的 HTTP 引荐来源网址。

HTTP Referrer 是一个 HTTP 字段，它在每个请求中传递，指示用户所在的前一页。这也可以通过 javascript 使用`document.referrer`.

谷歌分析（和其他网络分析工具）将使用该`document.referrer`属性来设置流量来源。由于使用 HTTP 的重定向保留了 Referrer，因此 Google Analytics（分析）几乎看不到更短的内容。

您没有指定您使用的网址缩短器，您只是说它“像 bit.ly”。我知道 bit.ly 和 goo.gl 都提供了一些统计数据。如果您只想衡量人们点击链接或其他一些基本信息的次数，那就足够了。您只需在链接末尾添加一个加号即可查看统计信息。

例如：

*   [http://goo.gl/mR2d+](http://goo.gl/mR2d+)
*   [http://bit.ly/LmvF+](http://bit.ly/LmvF+)

如果您想在 Google Analytics 中获取该信息，您可以在原始网址中使用广告系列参数，并在插入广告系列参数后将其缩小。使用活动参数时，Google Analytics 会忽略引荐来源网址，它将使用这些参数来设置活动来源。

有关 Google Analytics 中的自定义广告系列的更多信息：

[http://support.google.com/analytics/bin/answer.py?hl=en&answer=1033863](http://support.google.com/analytics/bin/answer.py?hl=en&answer=1033863)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T21:14:53.507

我正在调查，现在我正在使用 javascript document.location.replace(url) 并且分析正在跟踪来自我的[http://myredirector.com/343uj的重定向](http://myredirector.com/343uj)

# ruby-on-rails - 在 Rails 中，我可以在 tagged_with 方法中传递额外的过滤器选项来作为可标记的行为吗？

> ID：13038111
> 
> 赞同：0
> 
> 时间：2012-10-23T19:49:19.490
> 
> 标签：ruby-on-rails, ruby, acts-as-taggable-on

我有一个名为 Course 的对象。我想在课程上提供标签，以便用户可以根据这些标签进行搜索/过滤。

我正在使用 gem 作为可标记：

```
Course.tagged_with(params[:tag]) 
```

在这种方法中，我可以通过课程列/属性的额外过滤，即`where enabled = 'Y'`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T19:53:47.210

是的，`.tagged_with`应该可以与其他 ActiveRecord 查询链接：

```
Course.tagged_with(params[:tag]).where(enable: "Y") 
```

# c# - 读取大的txt文件并分块使用

> ID：13038112
> 
> 赞同：0
> 
> 时间：2012-10-23T19:49:28.717
> 
> 标签：c#, file-io

我是 C# 的新手，但我对读取/写入大型 txt 文件进行了一些研究，最大的可能是 8GB，但如果太多，我会考虑将其拆分为 1GB。它必须快到 30MBytes/s。我找到了三种方法：用于顺序操作 FileStream 或 StreamReader/StreamWriter，用于随机访问 MemoryMappedFiles。现在我想先阅读文件。这是一个有效的代码示例：

```
 FileStream fileStream = new FileStream(@"C:\Users\Guest4\Desktop\data.txt", FileMode.Open, FileAccess.Read);
try
{
    int length = (int)fileStream.Length;  // get file length
    buffer = new byte[length];            // create buffer
    int count;                            // actual number of bytes read
    sum = 0;                          // total number of bytes read

    // read until Read method returns 0 (end of the stream has been reached)
    while ((count = fileStream.Read(buffer, sum, length - sum)) > 0)
        sum += count;  // sum is a buffer offset for next reading
}
finally
{
    fileStream.Close();
} 
```

你认为这是快速读取大文件的好方法吗？

阅读后我需要重新发送该文件。它必须是 16384 字节的块。每个块都将被发送，直到所有数据都被传输。并且这些块必须是字符串类型。你能建议我怎么做吗？拆分并转换为字符串。我想最好的方法是在读取所有文件之后发送该字符串块，但如果至少读取了 16384 个字节。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T09:57:56.190

我发现了这样的东西：

```
 FileStream FS = new FileStream(@"C:\Users\Guest4\Desktop\data.txt", FileMode.Open, FileAccess.ReadWrite);
            int FSBytes = (int) FS.Length;
            int ChunkSize = 1<<14;    // it's 16384
            byte[] B = new byte[ChunkSize];
            int Pos;

            for (Pos = 0; Pos < (FSBytes - ChunkSize); Pos += ChunkSize)
            {
                FS.Read(B,0 , ChunkSize);
                // do some operation on one chunk

            }

            B = new byte[FSBytes - Pos];
            FS.Read(B,0, FSBytes - Pos);
            // here the last operation procedure on the last chunk
            FS.Close(); FS.Dispose(); 
```

它似乎工作。我只希望这部分： `FS.Read(B,0 , ChunkSize);` 会很快。如果有人有什么建议，请不要犹豫。

# wordpress - Facebook 评论框审核不出现

> ID：13038114
> 
> 赞同：1
> 
> 时间：2012-10-23T19:49:34.483
> 
> 标签：wordpress, plugins

我在我的网站上添加了 facebook 评论框，但没有审核。我去了 facebook 上的审核工具页面，但没有任何评论。

![在此处输入图像描述](../Images/32de55e8c0918c574ecff22710e2079d.png) 我使用的所有代码；

```
<!-- in head -->
<meta property="fb:app_id" content="APP_ID" />

<!-- in body -->
<div class="fb-comments" data-href="<?php the_permalink(); ?>" data-num-posts="10" data-width="100%"></div>
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=APP_ID";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T13:25:04.157

我建议您稍微切换一下标签以匹配编辑，并将其添加到您的头部：

```
<meta property="fb:admins" content="{YOUR_FACEBOOK_USER_ID}"/> 
```

如果您提供了自己的 ID，该属性应该可以让您审核评论。您可以从非常方便的[Graph API Explorer](http://developers.facebook.com/tools/explorer?method=GET&path=35101664%3Ffields%3Did%2Cname)中检索您的 ID 。

如果您阅读了我在之前的评论中提供的文档，您将看到所有可用的选项来自定义您的评论框。

# sql - 没有结束日期的 SQL DateDiff

> ID：13038116
> 
> 赞同：7
> 
> 时间：2012-10-23T19:49:43.787
> 
> 标签：sql, sql-server, tsql, date, datediff

我正在使用 SQL Server 我需要知道患者接受治疗的天数。问题是我只能获得 startDate 而不是 endDate 当我运行查询并按 StartDate 排序时，我得到如下信息：

```
StartDate
2012-10-11 22:00:00.000
2012-10-11 23:10:31.000
2012-10-12 00:28:31.000
2012-10-12 01:39:01.000
2012-10-12 02:09:01.000
2012-10-12 03:39:01.000
2012-10-12 04:38:50.000
2012-10-20 06:00:00.000
2012-10-20 08:06:05.000
2012-10-20 10:21:55.000
2012-10-21 14:13:01.000
2012-10-21 15:13:01.000 
```

我应该得到的答案是 4 天（第 11、12、20 和 21 天） 治疗于 2012 年 10 月 12 日停止，新的治疗于 2012 年 10 月 20 日开始 我如何总结患者接受治疗的天数尽管没有结束日期，但治疗？

谢谢，

洛哌丁胺

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T19:55:35.673

```
SELECT COUNT(StartDate) AS treatmentDays
FROM ...
WHERE ...
GROUP BY CAST(StartDate as date) 
```

基本上，将日期/时间值转换为日期，按该日期值分组，然后计算有多少。分组会将重复的日期折叠成一个日期，因此在给定示例数据的情况下，您应该得到 4 作为答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T20:03:27.073

## 尝试这个

您需要获取`DISTINCT`日期计数

```
SELECT A.PATIENT_ID, COUNT(DISTINCT A.DATE)
FROM
(
    SELECT PATIENT_ID, CONVERT(VARCHAR(10), StartDate, 101) AS [DATE] --CONVERTS TO [MM/DD/YYYY] FORMAT
    FROM MY_TABLE
) A
GROUP BY A.PATIENT_ID 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T20:07:02.870

您似乎正在寻找的是连续几天的序列。假设您使用的是 SQL Server 2005 或更高版本，您可以采用以下方法。对于每位患者，仅提取序列中的天数。然后列举天数。对于“治疗”，这些之间的差异将是恒定的。

这是一个例子：

```
select patientId, seqStartDate, count(*) as NumDays, sum(NumOnDay) as NumRecs,
       dateadd(day, count(*) - 1, seqStartDate) as SeqEndDate
from (select dp.*,
             row_number() over (partition by patientId order by StartDate) as seqnum,
             dateadd(day, 
                     - row_number() over (partition by patientId order by StartDate)
                     StartDate
                     ) as seqStartDate
      from (select cast(StartDate as date) as thedate, patientId, count(*) as NumOnDay
            from table
            group by cast(StartDate as date), patientId
           ) dp
     ) dp
group by patientId, seqStartDate
order by 1, 2 
```

实际上，此语法也使用`cast(<val> as date)`SQL Server 2008 语法来删除时间组件。如果您使用的是 SQL Server 2005，还有其他方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T20:10:47.287

如果您只想获取 中存在的唯一天数，`StartDate`可以使用以下命令：

```
SELECT COUNT(IndividualDays)
FROM
    (SELECT DISTINCT CONVERT(VARCHAR(10), StartDate, 111) AS IndividualDays
     FROM TreatmentTable) AS A 
```

所有这一切都是将`datetime`值转换为它们的日期部分，并删除重复项。完成后，返回的行数与唯一天数相同，所以它只是得到一个计数。

# c++ - 使用指针创建动态数组的问题

> ID：13038119
> 
> 赞同：-1
> 
> 时间：2012-10-23T19:50:01.463
> 
> 标签：c++

我正在尝试使用数组的值`int`作为我的指针来创建一个二维动态数组。我不知道如何准确地说出来，所以这里是代码。如果你看到它，也许你会明白我想要做什么。

```
#include "stdafx.h"
#include <iostream>
using namespace std;

int main(){
    const int length =5;
    int arr[5]={1,1,3,9,1};
    int* AR[length];

    for (int i=0; i<length;i++) {
        for (int j=0; j<(arr[i]); j++){
            AR[i] = new int (arr[i]);
            AR[i][j]=93;
            cout<<"["<<AR[i][j]<<"] ";
        }
        cout<<endl;
    }

    for (int i = 0; i < length; i++) {
        for (int j=0; j<arr[i]; j++) {
            delete[] AR[i];  
            delete []&AR;
        }
    }
    return 0;
} 
```

每当我用`arr[] < 4`它运行它时，它都能完美运行，但如果大小`arr`超过 4 个值，它就会崩溃。你能看出为什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T19:54:43.863

我也有这个问题：

```
 AR[i] = new int[arr[i]] 
```

或者

```
 AR[i] = (int *) malloc(sizeof(int) * arr[i]) 
```

* * *

解释：

```
 int * a = new int(5); 
```

创建一个整数，将其设置为 5，并返回一个指向它的指针。

```
 int * a = new int[5]; 
```

这为 5 个整数分配空间，并返回指向第一个整数的指针。

**编辑：** 您的删除也需要调整

```
 for(int i = 0; i < first_dimension; ++i)
    delete [] AR[i];

 delete [] AR; 
```

**编辑 2：**正如 Wug 指出的那样，您也有内存泄漏。您的代码现在可以工作，但是每次“j”迭代时，您都会为动态数组分配新内存，这实际上会失去对先前分配的动态单维数组的访问权限。

* * *

这是一个学习动态内存分配的超级棒的网站：

[http://www.cplusplus.com/doc/tutorial/dynamic/](http://www.cplusplus.com/doc/tutorial/dynamic/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T20:00:48.087

您在内部循环而不是外部循环中分配内存，如果您的缩进是一致的，您就会发现这一点。此外，您使用`new int(arr[i])`而不是`new int[arr[i]]`(前者分配一个 int 并将其值设置为`arr[i]`，后者分配一个 int 数组`arr[i]`。

在您的第二个循环中，您反复释放堆栈变量，这是一个双诺诺 - 您只释放一次分配的内存，并且您不释放在堆栈上声明的变量。

这是清理后的代码：

```
for (int i = 0; i < length; i++)
{
                             // moved outside of inner loop
    AR[i] = new int[arr[i]]; // used int[arr[i]] instead of int(arr[i])
    for (int j = 0; j < arr[i]; j++)
    {
        AR[i][j] = 93;
        cout << "[" << AR[i][j] << "] ";
    }
    cout << endl;
}

for (int i = 0; i < length; i++)
{
    delete[] AR[i]; // removed incorrect delete statement and incorrect inner loop
} 
```

# objective-c - 从 UAStoreFrontUI.h 调用代码生成链接器错误

> ID：13038124
> 
> 赞同：1
> 
> 时间：2012-10-23T19:50:20.683
> 
> 标签：objective-c, xcode, linker-errors, urbanairship.com

[我刚刚按照 UrbanAirship 站点](https://urbanairship.com/docs/inapp_client.html)的说明将 UrbanAirship-1.3.3 合并到我的项目中，并`#import`编辑了适当的标题，它编译得很好。但是在我的应用程序委托的方法中

```
-(BOOL)application:(UIApplication*)application didFinishLaunchingWithOptions:NSDictionary*)launchOptions 
```

该行：

```
[UAStoreFront useCustomUI:[UAStoreFrontUI class]]; 
```

现在需要使用 Urban Airship，导致以下链接器错误：

```
Undefined symbols for architecture i386:
  "_OBJC_CLASS_$_UAStoreFrontUI", referenced from:
      objc-class-ref in AppDelegate.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

头文件（UAStoreFrontUI.h）导入没有问题，但只要我从中调用代码（例如 [UAStoreFrontUI 类]），链接器就会开始抱怨。我觉得这特别奇怪，因为 UAirship.h 和 UAStoreFront.h 是链接的并且可以正常使用而没有错误。

我对 xcode 很陌生，所以可能有一个构建设置或我忽略的东西，但除此之外，在这一点上，我遇到了一堵砖墙，不知道如何继续。任何见解将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T15:46:59.513

链接器错误的结果是未将 .m、.xib 和其他资源文件添加`Build Phases`到`Copy Bundle Resources`. 似乎必须在 下单独显式添加适当的文件`Copy Bundle Resources`，因为添加这些文件所在的文件夹似乎不起作用。这在 Urban Airship 教程中没有记录……出于某种原因。

我偶然发现的解决方案可以在[这里](https://stackoverflow.com/questions/6984368/undefined-symbols-for-architecture-i386-objc-class-skpsmtpmessage-refere)找到以供进一步阅读

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T17:22:29.843

哦，我刚刚看了Urban Airship，`UAStoreFrontUI`实际上只是一个符合协议的类的*例子。*`UAStoreFrontUIProtocol`即它不是库中的类。

您应该自己制作，但我想如果您确实想使用他们的示例，那么您需要在您的项目中包含`UAStoreFrontUI.h`和`UAStoreFrontUI.m`，就像您将自己的文件添加到您的项目中一样。

# heroku - Heroku 可用区

> ID：13038126
> 
> 赞同：6
> 
> 时间：2012-10-23T19:50:26.980
> 
> 标签：heroku

我计划让 Heroku 应用程序与使用 Amazon AWS 制作的数据库服务器进行通信。我知道 Heroku 是基于 AWS 构建的；是否可以将我的 Heroku 应用程序的可用区设置为与我的数据库服务器相同，以便尽可能快地进行查询？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T14:24:19.277

不，我认为这目前是不可能的。我相信 Heroku 在不同区域拥有基础设施，以便在必要时进行故障转移。

这里有一些有用的信息：[Heroku：Heroku 是否依赖于单个 Amazon 可用区？](http://www.quora.com/Heroku/Is-Heroku-dependent-on-a-single-Amazon-Availability-Zone)

您可以在与 Heroku 相同的区域中创建数据库服务器，但如果它们发生故障转移，您会遇到同样的问题。

# powershell - PowerShell 函数 $input 参数

> ID：13038129
> 
> 赞同：3
> 
> 时间：2012-10-23T19:50:37.817
> 
> 标签：powershell, parameters

首先，我只是在学习 PowerShell，但我已经使用多种脚本语言进行了编程。

我正在编写一个脚本来从远程服务器上的命令中检索输出，然后检查该输出中是否存在“运行”一词。现在它检索命令的输出，我把它放在我的变量中，`$data`. 问题是我将它放在我的“clean_data”函数中，并且它与我传递给函数的变量中的内容不同。

我想知道的是，`$data`变量的输出在打印到屏幕时究竟如何具有一个内容，但是当传递给一个函数并立即打印时有一个新的内容？我错过了什么？

我只想遍历返回的行以查看其中有多少“正在运行”，如果没有则打印一个很好的错误。

## CODE（部分：功能及相关代码）

```
function clean_data($input) {
  Write-Output "Received data"$input
  Write-Output "Cleaning data"
  $output=@()
  foreach ($line in $input) {
     Write-Output "Looking at: "$line.ToString()
     if ($line.ToString().Contains("running")) {
         $output+=$line
     }
   }
   Write-Output $output
   return ,$output
}

$data = Get-Job -id $jobid.id | Receive-Job
Write-output "Data Type: "$data.GetType().Fullname
Write-Output "Output of $cmd"
Write-Output "============================================================"
Write-Output $data
Write-Output "============================================================"
clean_data $data
Write-Output $newdata
Remove-Job -Id $jobid.Id 
```

## 输出

```
Data Type:
System.Object[]
Output of C:\opcragt.bat servername
============================================================

C:\Windows\system32>"D:\Program Files\HP\HP BTO Software\bin\win64\opcragt.cmd" servername

Node: servername
HPOM Managed Node status:
-------------------------
OV Performance Core coda (3500) is running
OV Communication Broker ovbbccb (10988) is running
OV Control ovcd (10400) is running
OV Config and Deploy ovconfd (5092) is running

Subagent EA:
Action Agent opcacta (9716) is running
Monitor Agent opcmona (9872) is running
Message Agent opcmsga (14712) is running
Message Interceptor opcmsgi (13512) is running
WMI Interceptor opcwbemi (6608) is running

**************************************************
Remote administration completed successfully on all nodes.

============================================================
Received data
Current
-------
Cleaning data 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T21:12:52.203

小心，`$input`是 PowerShell 使用的自动变量，允许对传递给函数的数据进行迭代。试试这个：

```
function clean_data($data) {
  Write-Verbose "Received data: $data"
  Write-Verbose "Cleaning data"
  $output = @()
  foreach ($line in $data) {
     Write-Verbose "Processing line: $line"
     if ($line -match 'running') {
          $output += $line
     }
   }
   $output
} 
```

# jquery - Twitter Bootstrap：导航栏输入字段在响应模式下变宽

> ID：13038131
> 
> 赞同：2
> 
> 时间：2012-10-23T19:50:47.453
> 
> 标签：jquery, css, twitter-bootstrap

我对 Twitter 的 Bootstrap 框架有点陌生。我已经涵盖了很多编码，但我遇到了一些问题。

我在“导航栏”中放置了登录表单，如下所示：

```
<div class="navbar navbar-fixed-top">
    <div class="navbar-inner">
      <div class="container">
        <div id="login-div">
          <form class="navbar-form pull-left" id="login-form">
            <input type="text" class="input-block-level" id="login-username" placeholder="gebruikersnaam">              
            <input type="password"  class="input-block-level" id="login-password" placeholder="wachtwoord">
          </form>
          <img src="img/button_ledensite_50.png" id="login-button" class="pull-left">
        </div>

        <img src="img/button_zoeken_50.png" class="pull-right" id="btn-search">
        <a class="btn btn-navbar" id="btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </a>
        <div class="nav-collapse collapse">
          <ul class="nav pull-right">
            <li class=""><a href="#">informatie</a></li>
            <li><a href="#about">groepen</a></li>
            <li><a href="#contact">nieuws</a></li>
            <li><a href="#contact">agenda</a></li>
            <li><a href="#contact">multimedia</a></li>
            <li><a href="#contact">shop</a></li>
          </ul>
          <div><input type="text" placeholder="Zoeken.." id="resp-search"></div>
        </div><!--/.nav-collapse -->
      </div>
    </div>
  </div> 
```

我想要它做的是，当我点击这张图片时：

```
<img src="img/button_ledensite_50.png" id="login-button" class="pull-left"> 
```

我想将表单向右滑动，然后将图像推开，但表单可能不会在响应模式下跳出屏幕或换行并将图像推到导航栏中的第二行。我用 jQuery 尝试过各种事情，并且成功地滑动了表单，但我总是遇到上面描述的问题。

对不起我的英语不好，但我无法用其他方式解释它..

我希望有人可以帮助我，因为我在谷歌上到处搜索，但没有找到任何东西。

亲切的问候！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T18:01:46.580

看看这个：[http ://darcyclarke.me/development/animate-float-positions-in-jquery-1-5/](http://darcyclarke.me/development/animate-float-positions-in-jquery-1-5/)

也许你可以将你的浮动动画到正确的位置并将图像的宽度动画到 0px

# android - 为什么edititext控件不显示框的边框？

> ID：13038137
> 
> 赞同：0
> 
> 时间：2012-10-23T19:51:07.377
> 
> 标签：android, android-4.2-jelly-bean

我将 sdk 库从 2.1 更新到 4.1，现在 edittext 控件不显示框边框。当它具有焦点时，它显示的只是控件底部的一条浅蓝色线。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T19:58:32.393

这是设计使然。`EditText`这是使用适用于 Android 4.0 及更高版本的 Holo 主题的小部件的新外观。

# sas - 更正产品购买日期明智数据中的错误

> ID：13038138
> 
> 赞同：-1
> 
> 时间：2012-10-23T19:51:10.720
> 
> 标签：sas

```
DATA PRODINVENTRY;
INPUT STORE $ PRODUCT $  BUY_SELL $ DATE DDMMYY10\. UNITS PRICE INVENTRY;
CARDS; 
1 pen      B 01/01/2012 2  10.00 2 
1 pen      B 04/02/2012 8  15.00 10 
1 pen      S 08/02/2012 10 15.00 0 
1 pencil   B 02/02/2012 5  5.00 5 
1 pencil   S 04/02/2012 4  7.00 1 
2 book     B 01/01/2012 5  20.00 5 
2 book     S 05/02/2012 6  30.00 -1 
2 notebook B 02/02/2012 4  15.00 4 
2 notebook S 04/02/2012 5  15.00 -1 
3 rubber   B 01/01/2012 2  5.00 2 
3 rubber   B 02/02/2012 2  5.00 4 
3 rubber   B 04/02/2012 2  5.00 6 
3 rubber   S 05/02/2012 5  5.00 1 
4 slipper  B 01/01/2012 3  150.00 3 
4 slipper  B 02/02/2012 5  200.00 8 
4 slipper  B 04/02/2012 5  100.00 13 
4 slipper  S 05/02/2012 14 90.00 -1 
5 desktop  B 02/02/2012 4  30000.00 4 
5 desktop  S 04/02/2012 3  30000.00 1 
5 desktop  S 05/02/2012 1  30000.00 0 
5 laptop   S 01/01/2012 3  20000.00 -3
5 laptop   B 08/02/2012 8  20000.00 5 
; 
```

这是具有单位库存的产品购买/销售日期数据。数据有错误。1.卖的比买的多。2\. 买之前卖掉单位。我想通过更改商店内的日期或单位来删除所有错误输入或纠正数据。注意：只有在一个商店购买了产品后才能出售产品。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T14:13:39.113

第二部分的 SQL 解决方案与第一部分没有太大的不同。您可以使用连接或存在子查询来完成它（类似地，您已经解决的第一部分可以用任何一个来解决）；这是存在的版本：

```
proc sql;
create table error as
    select * from PRODINVENTRY S
    where buy_sell='S' and not exists (
        select 1 from PRODINVENTRY B
        where B.buy_sell='B' and B.store=S.store and B.product=S.product and B.date<S.date);
quit; 
```

如果您想一步完成这两项，您可以轻松地拥有两个存在子查询 [and (not exists (...) or not exists (...) )] 或两个连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T00:22:49.540

数据样本；

设置 PRODINVENTRY；

格式化日期 DATE9.;

如果 INVENTRY > UNITS 那么 INVENTRY = UNITS;

跑;

# android - 标签导航的最佳实践？

> ID：13038139
> 
> 赞同：7
> 
> 时间：2012-10-23T19:51:11.077
> 
> 标签：android, android-fragments, android-actionbar

我正在寻找将标签导航与 sherlock 操作栏一起使用的最佳实践。更改碎片的正确方法是什么，并在选择另一个选项卡时将片段添加到Backstack并清除后堆栈。

有没有好的例子或开源项目展示如何正确地做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-29T20:56:26.327

我不会直接使用 ABS 来做到这一点。一旦你的选项卡需要片段切换等，你就会遇到麻烦。我认为正确的方法是使用与 ABS 兼容的 ViewPagerIndicator。作为奖励，您还可以在选项卡之间左右滑动。您需要兼容包（如 ABS），您可以在 [示例文件夹](https://github.com/JakeWharton/Android-ViewPagerIndicator/tree/master/sample/src/com/viewpagerindicator/sample)中找到示例用法。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-31T09:22:42.277

正如 Edgar 提到的，[android 导航指南](http://developer.android.com/design/patterns/navigation.html)是一个很好的起点。但是让我添加一些关于标签如何与 android 一起使用的评论。

新的 acitonbar 选项卡的实现方式应与它在 google play 应用程序中的工作方式相同。这意味着只要您想要某个选项卡中某些内容的一些详细信息，您就会转到一个新的视图/片段/活动，并且这些选项卡将消失。

因此，android 的选项卡不应一直可见，而应仅在顶层层次结构中可见。如果您想为用户简化导航，您将实现向上按钮，以便用户可以快速返回到顶部层次结构，其中选项卡可见。

**教程和示例**

我个人最喜欢的示例和教程是googles 网页上操作[栏教程下的选项卡教程。](http://developer.android.com/guide/topics/ui/actionbar.html#Tabs)

标签导航的示例也可以在 android-sdk 附带的示例项目中找到。转到：`android-sdk\extras\android\support\samples\Support4Demos\src\com\example\android\supportv4\app` 并寻找：`FragmentTabs.java`或`FragmentTabsPager.java`。

如果您想使用 ActionBarSherlock，您还可以[下载 ActionBarSherlock](http://actionbarsherlock.com/download.html)并查看 /samples 目录中的示例文件夹。在那里你有标签演示`TabNavigation.java`和`TabNavigationCollapsed.java`。尽管我认为您应该尝试一下操作栏教程。

**带有回栈的选项卡**

还可以说您想要一个始终可见的标签栏（**尽管不推荐**）。然后你必须为每个选项卡制作一个自定义的后退堆栈，你可以[在这里](https://stackoverflow.com/a/13117564/969325)查看如何实现它的示例。

**地图和标签**

查看所有使用地图的 Google 应用。Google 使用溢出操作栏按钮来进行导航。因此，我们作为开发人员是否应该使用适用于 Android 的 Google mapsv2 选项卡，如果有人愿意的话，带有地图的标签会变得更加容易。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T15:10:00.527

我已经多次使用片段和选项卡完成 ActionbarSherlock，它的工作非常出色。

你需要一个 TabListener：

```
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentTransaction;

import com.actionbarsherlock.app.ActionBar;
import com.actionbarsherlock.app.ActionBar.Tab;
import com.android.wifilogger.R;

public class WifiTabListener implements ActionBar.TabListener {
        public Fragment fragment;
        public MainTabActivity act;

        public WifiTabListener(Fragment fragment, MainTabActivity act) {
        this.fragment = fragment;
        this.act = act;
        }

        @Override
        public void onTabSelected(Tab tab, FragmentTransaction ft) {
            ft.replace(R.id.root, fragment);
        }

        @Override
        public void onTabUnselected(Tab tab, FragmentTransaction ft) {
            ft.remove(fragment);
        }

        @Override
        public void onTabReselected(Tab tab, FragmentTransaction ft) {
        }
} 
```

并设置您的 TabActivity：

```
public class MainTabActivity extends SherlockFragmentActivity {

public ActionBar actionBar;
private ActionBar.Tab listTab;
public MenuItem refreshItem;
private SherlockFragment listFragment;
private SherlockFragment mapFragment;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    // getActionBar().setDisplayHomeAsUpEnabled(true);

    actionBar = getSupportActionBar();

    actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

    setContentView(R.layout.main);

    ActionBar.Tab settingsTab = actionBar.newTab().setText("Settings")
            .setTag("settings");
    listTab = actionBar.newTab().setText("Wifi List")
            .setTag("list");
    ActionBar.Tab mapTab = actionBar.newTab().setText("Map").setTag("map");

    SherlockFragment settingsFragment = new SettingsFragment();
    listFragment = new WifiListFragment();
    mapFragment = new WifiMapFragment();

    settingsTab.setTabListener(new WifiTabListener(settingsFragment, this));
    listTab.setTabListener(new WifiTabListener(listFragment, this));
    mapTab.setTabListener(new WifiTabListener(mapFragment, this));

    actionBar.addTab(listTab,false);
    actionBar.addTab(mapTab,false);
    actionBar.addTab(settingsTab,false);
    actionBar.selectTab(listTab);

} 
```

您必须将 SettingsFragment、MapFragment 和 ListFragment 更改为您自己的片段。您还可以通过使用 setTargetFragment 在其中一个选项卡片段中添加 DialogFragment ，但我猜这不是您的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T08:39:07.367

我建议您遵循 Android 导航设计模式：

**[http://developer.android.com/design/patterns/navigation.html](http://developer.android.com/design/patterns/navigation.html)**

# ruby-on-rails - 如何通过电子邮件发送@user.password 以获取“忘记密码？” 如果使用 has_secure_password

> ID：13038140
> 
> 赞同：2
> 
> 时间：2012-10-23T19:51:11.213
> 
> 标签：ruby-on-rails

我正在尝试通过 ActionMailer 为忘记密码的用户发送电子邮件。他们输入他们的电子邮件并按提交，它应该向他们发送一封电子邮件，其中包含他们的密码。但是，由于我有 has_secure_password 我猜测 password_digest 不允许我提取密码。我收到一封邮件说：

```
Your login information:

Email: edmai@syr.edu

Password: 
```

所以看起来 Rails 正在做一些事情来阻止我取出密码。这是我的文件：

电子邮件模板：

```
Dear <%= @user.name %>,

<p>
    You recently made a request for a lost password. Please remember to keep your passwords recorded in a safe place.
</p>

<p>
    Your login information: <br>
    Email: <%= @user.email %> <br>
    Password: <%= @user.password %> <br>
</p>

<p>
    Sincerely, <br>
    Pholder Staff
</p> 
```

用户模型

```
class User < ActiveRecord::Base

has_secure_password
attr_accessible :email, :name, :password, :password_confirmation, :profilepic
validates_presence_of :password, :on => :create 
```

如果您还需要我的文件，请告诉我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T21:05:49.883

`has_secure_password`使用 bcrypt 散列您的用户密码。这样就不会将纯文本密码存储在您的数据库中（这永远不会发生）。有关该方法的一些信息在这里：[http ://api.rubyonrails.org/classes/ActiveModel/SecurePassword/ClassMethods.html](http://api.rubyonrails.org/classes/ActiveModel/SecurePassword/ClassMethods.html)

就像@apneadiving 所说，您需要重置密码并向用户发送密码重置链接。

按顺序观看这两个 Railscast，它们可能会对您有所帮助：

1.  [http://railscasts.com/episodes/270-authentication-in-rails-3-1](http://railscasts.com/episodes/270-authentication-in-rails-3-1)
2.  [http://railscasts.com/episodes/274-remember-me-reset-password](http://railscasts.com/episodes/274-remember-me-reset-password)

# github - NGithub 身份验证和 .net 中的 github api

> ID：13038141
> 
> 赞同：0
> 
> 时间：2012-10-23T19:51:12.477
> 
> 标签：github, github-api

我正在尝试使用 NGithub 或任何其他类型的 .NET github api 包装器与 GitHub 网站进行交互。
我很难验证自己的身份。我有一堂课`GitHubOAuthAuthorizer`，`NullAuthenticator`但是`NullAuthenticator`是空的，`GitHubOAuthAuthorizer`有两种我不明白如何使用的方法。一个只是构建一个 url（返回一个字符串）不知道我应该如何使用它，另一个希望我用称为用户密码和用户代码的东西来提供它，我不知道那些是我只知道用户名和密码。
我还尝试了没有构建的 GithubSharp。
是否有任何实际登录到 github 并从 .NET 向问题跟踪器添加问题的示例？
这就是我需要的。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T13:43:24.367

[https://github.com/tekstop/Git2BitIssues](https://github.com/tekstop/Git2BitIssues)

看了这里，找到了最终的解决方案

# linux - 如何在 Linux OS 中的一个进程组中获取 pid

> ID：13038143
> 
> 赞同：4
> 
> 时间：2012-10-23T19:51:16.967
> 
> 标签：linux, pid, process-group

我有一个关于 Linux pid 的问题。如何在同一组中获取pid？在 Linux 中使用 'ps' 命令获取所有 pid 或 pgid 似乎很容易，但是如何获取属于同一组的 pid，或者换句话说，如何获取同一个程序的 pid？有人请给我一些帮助吗？谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T20:41:39.450

从`man ps`

```
To print a process tree:
      ps -ejH
      ps axjf 
```

`pstree`也可以帮助

更新：`pidof`用于查找命名程序的进程 pid。例如`pidof chrome`将获得所有 chrome pid。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-27T16:40:00.460

所有其他答案似乎都提到了`ps`，但没有一个试图`/proc`直接访问。

在“Unix&Linux”上还有[另一种方法](https://unix.stackexchange.com/a/132233/17594)：

```
awk '{print $5}' < /proc/$pid/stat 
```

或者，更安全地，

```
perl -l -0777 -ne '@f = /\(.*\)|\S+/g; print $f[4]' /proc/$pid/stat 
```

请参阅链接答案中的详细信息和评论。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-22T04:04:14.467

为此，我编写了一个小脚本。

# 代码

```
#!/bin/bash 
MY_GROUP_ID=$1
A="$(ps -e -o pgid,pid= | grep [0-9])"
#printf "$A\n"
IFS=$'\n'
for i in $A; do
    GROUP_ID=$(printf "$i" | awk -F ' ' '{print $1}')
    PID=$(printf "$i" | awk -F ' ' '{print $2}')
    if [ "$GROUP_ID" = "$MY_GROUP_ID" ]; then
        printf "$PID\n"
    fi
done
unset IFS 
```

# 用法

```
./test_script.sh (group ID you want to select for) 
```

# 解释

1.  我假设您已经知道一些 Linux 实用程序。这是为 bash shell 编写的。
2.  `ps -e -o pgid,pid=`简单地打印出所有进程，每行的第一个值是它的组 id，第二个值是它的进程 ID，用空格分隔。
3.  `grep`删除不必要的标题行。
4.  IFS 是一个非常重要的内部变量。它的作用是规范字符串的分隔方式。该`for`构造使用空格字符自动分隔字符串，但如果 IFS 变量设置为换行符，则使用这个新的空格字符进行分隔。这确保了每个迭代变量都是来自`A`.
5.  对于每一行，我们用于`awk`获取第一个值 - 这是组 ID，第二个值 - 这是 PID。
6.  如果组 ID 与您想要的匹配，则打印出相应的 PID。
7.  完成后，您必须将 IFS 取消设置为其默认值，以便它不会在其更改的状态下徘徊。

# 评论

我希望这会有所帮助。这个对我有用。一旦您了解了 awk 和 ps 的工作原理，这并不是很复杂。剩下的只是解析。如果您想将 PID 作为数组传递，而不是将其打印为新行，只需使用其他内容对其进行分隔并创建一个包含所有 PID 的全局字符串变量。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-09-02T10:06:07.270

基于`man ps`有四个处理组的参数：

```
-G grplist
      Select by real group ID (RGID) or name.  This selects the processes whose real group name or ID is in the grplist list.  The real group ID identifies the group of the user who created the process, see getgid(2).

-g grplist
      Select by session OR by effective group name.  Selection by session is specified by many standards, but selection by effective group is the logical behavior that several other operating systems use.  This ps will select by session when the list is
      completely numeric (as sessionsare).  Group ID numbers will work only when some group names are also specified.  See the -s and --group options.

--Group grplist
      Select by real group ID (RGID) or name.  Identical to -G.

--group grplist
      Select by effective group ID (EGID) or name.  This selects the processes whose effective group name or ID is in grouplist.  The effective group ID describes the group whose file access permissions are used by the process (see getegid(2)).  The -g
      option is often an alternative to --group. 
```

因此，您可以使用`getpgrp [pid-of-your-program]`then call获取程序的组 ID `ps -G [group-if-of-your-program]`。

不过，这可能不是您想要的。形成树的进程组和进程似乎是不同的东西。ppid 是进程的父 pid，您可能想要告诉您以给定 pid 作为其 ppid 的所有 pid 的东西？我认为没有什么可以保证与同一进程组中的所有 pid 相同，事实上，如果每个进程只有一个进程组，它们就不可能。

如上所述，`pstree`应该可以帮助您了解正在发生的事情。该`--show-pids`选项还将为您提供所有可能有用的 pid。

# javascript - Javascript 日期操作

> ID：13038144
> 
> 赞同：3
> 
> 时间：2012-10-23T19:51:17.917
> 
> 标签：javascript, jquery

> **可能重复：**
> [通过从 Javascript 中的特定日期减去 X 天数来查找日期](https://stackoverflow.com/questions/1187824/finding-date-by-subtracting-x-number-of-days-from-a-particular-date-in-javascrip)

我有一个[jQuery datepicker](http://stefangabos.ro/jquery/zebra-datepicker/)，它允许用户从任何给定的一周中选择一个星期五。我想根据那个星期五填充字段，并输入周一至周四的日期。

即用户选择即将到来的星期五（2012 年 10 月 26 日），我想从一天中减去 1 以获得星期四日期，然后是星期三等。

我将如何处理这个？

```
 $(document).ready(function(){
        $("#friDate").Zebra_DatePicker({
            format: 'm-d-Y',
            disabled_dates: ['* * * 0-4,6'],
            first_day_of_week: 0,
            onSelect: function(){
                var date = $("#friDate").val();
                $("#mon").val('INSERT MON DATE');
                $("#tue").val('INSERT TUE DATE');
                $("#wed").val('INSERT WED DATE');
                $("#thu").val('INSERT THU DATE');
                $("#fri").val(date);                    
            }
        });
    }); 
```

任何帮助是极大的赞赏！谢谢 ：）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T19:54:06.633

要从现有日期中减去一天，只需减去一天中的毫秒数。

```
var today = new Date();
var yesterday = new Date(today.getTime() - 1000*60*60*24);

// As pointed out by Waxen, we need to account for daylight savings changes
function addDays(date, days) {
    var newDate = new Date(date.getTime() + (1000*60*60*24*days) );
    // To account for daylight savings differences
    // The hours won't be the same when crossing the daylight savings changes
    var hourDifference =  newDate.getHours() - date.getHours();
    var msInHour = 60*60*1000;
    if (hourDifference > 0) {
        newDate = new Date(newDate.getTime() + msInHour) ;
    } else if (hourDifference < 0){
        newDate = new Date(newDate.getTime() - msInHour) ;    
    }    
    return newDate;    
} 
```

因此，对于您的代码，您可以执行以下操作

```
$("#mon").val(addDays(date, -4));
$("#tue").val(addDays(date, -3));
$("#wed").val(addDays(date, -2);
$("#thu").val(addDays(date, -1));
$("#fri").val(date); 
```

**更新**虽然我的代码有效，但 Waxen 的解决方案更简单，我会使用它。我将把这个答案留在这里以供参考

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T20:11:42.357

Juan 的解决方案在大多数情况下都会起作用，但是在假设一天中的秒数时，您可能会遇到 DST 的一些问题。我建议使用他的 addDays 函数的以下替代实现：

```
function addDays(date, days) {
    var new_date = new Date( date.getTime() );
    new_date.setDate( new_date.getDate() + days );
    return new_date;
} 
```

# javascript - PDF.js 在固定宽度上缩放 PDF

> ID：13038146
> 
> 赞同：40
> 
> 时间：2012-10-23T19:51:23.767
> 
> 标签：javascript, pdf, mozilla, pdf.js

我有一个固定框，我想在其中显示由 PDF.js 呈现的 PDF。由于 PDF.js 文档不是真正可访问的（通过他们的源文件吐口水），我想知道是否可以在固定宽度上缩放呈现的 PDF。当我设置为 CSS: `canvas { width: 600px; }`对于显示 PDF 的画布时，PDF 被拉伸，质量变差。

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-10-23T21:02:28.787

我从 Pdf.js github [http://jsbin.com/pdfjs-prevnext-v2/edit#html,live](http://jsbin.com/pdfjs-prevnext-v2/edit#html,live)更新了示例以正确缩放到固定的画布宽度。有关我的代码，请参阅[http://jsfiddle.net/RREv9/](http://jsfiddle.net/RREv9/)。

重要的线是

```
var viewport = page.getViewport(canvas.width / page.getViewport(1.0).width); 
```

因为表达式`canvas.width / page.getViewport(1.0).width`为我们提供了适当的比例因子。

`width`您应该不使用 css 而是通过画布的属性来更改画布的宽度。请参阅[HTML5 中的画布宽度和高度](https://stackoverflow.com/questions/4938346/canvas-width-and-height-in-html5)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2015-11-11T22:27:51.557

为确保缩放适用于所有页面尺寸（Letter、A4、A5 等），您必须考虑到页面尺寸变化时高度和宽度之间的比率会发生变化。例如，流行的页面尺寸（英寸）是：

*   字母：8.5 x 11.. 比例为 0.772
*   A4：8.27 × 11.7.. 比例为 0.706
*   A5：5.83 × 8.27.. 比例为 0.704

您可以通过同时考虑高度和宽度并仅缩放较小的量来计算正确的缩放比例。这将确保一切都适合您的画布。此外，如果您更改画布的宽度或高度，您不会破坏任何东西。

```
var unscaledViewport = page.getViewport(1);
var scale = Math.min((canvas.height / unscaledViewport.height), (canvas.width / unscaledViewport.width));
var viewport = page.getViewport(scale); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2021-06-15T16:52:56.290

如果使用版本 >= 2.1 及更高版本，它需要一个对象，即格式化为 `getViewport({ scale, rotation, dontFlip })`：

```
const viewport = page.getViewport({scale: canvas.width / page.getViewport({scale: 1}).width}); 
```

#10369 [api-minor] 更改 PDFPageProxy 上的 getViewport 方法以获取参数对象而不是一堆（随机）有序参数

[https://github.com/mozilla/pdf.js/pull/10369](https://github.com/mozilla/pdf.js/pull/10369)

# android - 如何获得所选联系人的生日

> ID：13038150
> 
> 赞同：1
> 
> 时间：2012-10-23T19:51:31.623
> 
> 标签：android, contacts

我正在编写一个应用程序，用户必须在其中选择一个联系人，然后再返回到活动。[我使用了这个问题的第一个答案的代码](https://stackoverflow.com/questions/3830184/in-android-how-to-pick-a-contact-and-display-it-on-my-app?rq=1)。

但是除了联系人的名字，我还需要生日。我一直在寻找问题来检索所选联系人的生日，但我只找到了有关如何获取所有联系人生日列表的答案，而不仅仅是所选联系人的生日。我已经尝试过解决方法，但到目前为止还没有运气。

有什么帮助吗？

# windows-ce - 在虚拟 pc 2007 - windows ce 和主机操作系统之间传输文件？

> ID：13038153
> 
> 赞同：0
> 
> 时间：2012-10-23T19:51:41.820
> 
> 标签：windows-ce, virtual-machine, virtual-pc

我在 Virtual PC 2007 中安装了一个 windows ce 映像，它是一个名为 HPCF-CEPC-CE5.vhd 的 VHD 文件。系统工作正常，但我需要将我的应用程序 (.exe) 传输到虚拟电脑但我无法`t, I tried to install Virtual Machine Additions but isn`工作，我尝试了网络连接但无法正常`t work and try to connect from activesync through com1 but guest what? isn`工作....

有人知道如何在虚拟 PC 2007 中的 windows ce 和我的 win xp 主机之间传输文件吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T23:30:30.443

它实际上是一台独立的机器，因此（假设它在操作系统中具有网络功能）您可以[使用 CoreCon 手动建立连接](http://msdn.microsoft.com/en-us/library/ms228708%28v=vs.90%29.aspx)，然后使用 Remote File Viewer 之类的工具（随 Studio 2005/2008 安装）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-12T02:02:57.897

[WinImage](http://www.winimage.com/)允许您打开 vhd、复制和粘贴文件到 Windows。如果您想在您的 vhd 中安装[vmadditions.iso](http://technet.microsoft.com/en-us/library/bb963713.aspx) (FSHARE)，您需要下载 VPC 2004 版本。

# mysql - 如何从 xml 表中提取数组变量？

> ID：13038159
> 
> 赞同：0
> 
> 时间：2012-10-23T19:51:52.900
> 
> 标签：mysql, xml, arrays, extract

我希望有一个人可以帮助我。我需要从 MySQL 数据库中提取某些详细信息（“全名和姓氏”、“电子邮件”、“联系电话”），但无法弄清楚如何执行此操作。有问题的应用程序，“Grunion 联系表”用于 Wordpress 保存DB中的数据，以数组的形式，如下：

```
Array
(
    [Full Name and Surname:] =&gt; Sharon Somerset
    [Email] =&gt; sharon@x.x.x
    [Contact Number:] =&gt; 08xxxxxx
    [Alternative Number] =&gt; 011xxxxxx
    [Please list convenient time to be contacted] =&gt; 
    [Medical Aid Quote] =&gt; Yes
    [Insurance Quote] =&gt; 
    [Policy Update] =&gt; 
    [Friend's Name and Surname:] =&gt; 
    [Friend's Contact Number:] =&gt; 
    [How did you find us?] =&gt; Google
) 
```

每个条目都在它自己的数据库行中，在“longtext”字段内。

如何轻松地从数千行中提取“全名和姓氏”、“电子邮件”、“联系电话”数据，然后重新保存在一个简单的表格或 CSV 文件中以导入到 phplist 之类的文件中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T20:25:47.107

这应该让你开始 - 它在文本字段上的简单正则表达式匹配。这需要一段时间才能完成 - 但它可以满足您的需求。

```
<?php
$string = "数组
(
    [全名和姓氏：] => Sharon Somerset
    [电子邮件] => sharon@xxx
    [联系电话：] => 08xxxxxx
    [备用号码] => 011xxxxxx
    [请列出方便的联系时间] =>
    [医疗援助报价] => 是
    [保险报价] =>
    [政策更新] =>
    [朋友的名字和姓氏：] =>
    [朋友的联系电话：] =>
    [你是怎么找到我们的？] => 谷歌
)";

$string = preg_replace("/Array\n\(\n/","",$string);
//删除第一行

$string = preg_replace("/\)$/","",$string);
//删除最后一行

$lines = explode("\n",$string);
//在新行上分割
print_r($lines);

foreach($lines as $l)
{
        preg_match("/\[(.+)\] => (.*)$/",$l,$matches);
        //$matches[1] 将包含标签
        //$matches[2] 将包含该值
        print_r($matches);

}
?>

```

# php - 网格中的内联日期选择器不持久

> ID：13038160
> 
> 赞同：2
> 
> 时间：2012-10-23T19:52:01.937
> 
> 标签：php, javascript, mysql, date, kendo-ui

我有一个网格，它以年-月-日时：分：秒的格式从 MySQL 数据库中获取日期，并将其显示为网格中日期选择器中的英国日期。这似乎工作正常。

不过，只要我在内联编辑器中编辑日期，我就可以进行更改，但编辑器会立即退出，将我带回原始网格。

请注意，我使用的是 jQuery 1.8.2

只是想知道有没有其他人以前见过这个？我收到“意外数字”错误，这让我认为它可能与日期格式有关，但 Chrome 的调试功能到此为止，指向 Kendo 和 jQuery 库，而不是我的代码（这显然不是我想要的）。

我*认为*Kendo 和 Javascript 通常使用稍微不同的日期格式表示，这可能与此有关。

这是我制作网格的代码：

```
 kendo.culture("en-GB");
             $("#grid").kendoGrid({
                 dataSource: {
                     transport: {
                         read: {
                            url: "http://dev.openbill.co.uk/admin/crud/viewproject/main.json.php?action=read&id=<?php echo $_GET['id']; ?>",
                            type: "GET",
                            dataType: "json"
                         },
                         update: {
                            url: "http://dev.openbill.co.uk/admin/crud/viewproject/main.json.php?action=update&id=<?php echo $_GET['id']; ?>",
                            type: "POST"
                         },
                         destroy: {
                             url: "http://dev.openbill.co.uk/admin/crud/viewproject/main.json.php?action=destroy&id=<?php echo $_GET['id']; ?>",
                             type: "POST"
                          },
                          create: {
                              url: "http://dev.openbill.co.uk/admin/crud/viewproject/main.json.php?action=create&id=<?php echo $_GET['id']; ?>",
                              type: "POST"
                           },
                     },
                    schema: {
                        data: "data",
                        total: "total",
                        parse: function(response) {

                            for (var i = 0; i < response["data"].length; i++) {
                                //Parsing the data before its used
                                //"17\/10\/2012 20:55:00"
                                var phpStartDate = response["data"][i]["start"];
                                var phpStopDate = response["data"][i]["stop"];
                                var datePartsStart = phpStartDate.match(/(\d+)/g);
                                var datePartsStop = phpStopDate.match(/(\d+)/g);
                                var parsedDateStart = new Date(datePartsStart[0], datePartsStart[1], datePartsStart[2], datePartsStart[3], datePartsStart[4], datePartsStart[5]);
                                var parsedDateStop = new Date(datePartsStop[0], datePartsStop[1], datePartsStop[2], datePartsStop[3], datePartsStop[4], datePartsStop[5]);

                                response["data"][i]["start"] = parsedDateStart;
                                response["data"][i]["stop"] = parsedDateStop;
                                //debugger;
                            };
                            return response;
                        },
                        model: {
                        id: "id",
                        fields: {
                                id: {editable: false,nullable: false},
                                start: {
                                    editable: true,
                                    nullable: false,
                                    type: "date",
                                    format: "dd/MM/yyyy hh:mm:ss",
                                    validation: {required: true}
                                },
                            stop: {
                                    editable: true,
                                    nullable: true,
                                    type: "date",
                                    format: "dd/MM/yyyy hh:mm:ss",
                                    validation: {required: true}
                                },
                            staff: {editable: true,nullable: false},
                            hourly: {editable: true,nullable: false},
                            }
                        }
                    }, 
                     serverPaging: true,
                     serverSorting: true,
                     pageSize: 10,
                     page: 1,
                    scrollable: {
                        virtual: true
                     },
                    sort: { field: "start", dir: "asc"}
                    },
                 sortable: true,
                 selectable: false,
                 resizable: true,
                 reorderable: true,
                 toolbar: ["create"],
                 editable: "inline",
                 pageable: {
                        numeric: false,
                        pageSizes: [ 10 , 25, 50 ],
                        previousNext: true,
                        input: true,
                        info: true
                },
                 columns: [
                        { field:"id", title:"Tracking ID", hidden: true},
                        { field:"start", title:"Start Time", editor: startDateEditor, template: '#= kendo.toString(start,"dd/MM/yyyy hh:mm:ss") #' },
                        { field:"stop", title:"End Time", editor: endDateEditor, template: '#= kendo.toString(stop,"dd/MM/yyyy hh:mm:ss") #' },
                        { field:"staff", title:"Staff Member", editor: staffEditor },
                        { field:"hourly", title:"Hourly Rate", editor: hourlyEditor, width: 90 },
                        { command: "edit", width: 175  },
                        { command: "destroy", width: 90  },
                        { template: '<input type="checkbox" name="#=id#" />', width: 40  },
                    ],
            });
            function startDateEditor(container, options){
                $('<input data-bind="value:' + options.field + '" />')
                    .appendTo(container)
                    .kendoDateTimePicker({

                    });
            }
            function endDateEditor(container, options){
                $('<input data-bind="value:' + options.field + '" />')
                    .appendTo(container)
                    .kendoDateTimePicker({

                    });
            }
            function staffEditor(container, options) {
                $('<input data-bind="value:' + options.field + '" data-value-field="id" />')
                    .appendTo(container)
                    .kendoDropDownList({
                        autoBind: true,
                        dataTextField: "name",
                        dataValueField: "id",
                        dataSource: {
                            type: "json",
                            transport: {
                                read: "http://dev.openbill.co.uk/admin/crud/viewproject/staff.json.php"
                            },
                            schema: {
                                data: "data",
                            }
                        }
                    });
            }
            function hourlyEditor(container, options) {
                $('<input min="0" type="number" data-bind="value:' + options.field + '" />')
                    .appendTo(container)
                    .kendoNumericTextBox({
                        format: "c",
                        decimals: 2
                    });
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T10:40:34.190

这可能是相关的：

PHP 和 Javascript 中日期的一大区别是月份的计算方式。在 PHP 中，1 是一月。在 Javascript 中，0 是一月。因此，您实际上需要从 MySQL php 日期中减去一个才能在 JS 中获得正确的日期。

看看这个线程：[堆栈溢出——将 JS 日期对象转换为 MySQL 格式](https://stackoverflow.com/questions/2280104/convert-javascript-to-date-object-to-mysql-date-format-yyyy-mm-dd)

# objective-c - 使用 SDWebImage 缓存图像

> ID：13038163
> 
> 赞同：0
> 
> 时间：2012-10-23T19:52:19.947
> 
> 标签：objective-c, ios, uitableview, caching, sdwebimage

我对IOS开发很陌生。现在，我想缓存从网络服务返回的所有图像。我将所有 url 保存在我的核心数据库中。当我需要填充表视图时，我从核心数据库中获取数据，并将其放入表视图中。现在我想缓存这些图片。经过一些谷歌搜索。我找到了 SDWebImage。

我在我的表格视图中以这种方式使用它。

```
[cell.img_Picture setImageWithURL:[NSURL URLWithString:news.url]
                        placeholderImage:[UIImage imageNamed:@"placeholder.png"]]; 
```

但它没有显示此图像。我的图像视图保持空白。我正确导入了 SDWebImage 框架并按照 github 页面上的所有步骤进行安装。

但是谁能告诉我我做错了什么？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T06:03:08.663

所以你甚至没有看到 placeholder.png 图像？你真的有一个 placeholder.png 图像添加到你的项目吗？

您是否尝试过记录您检索到的 url 并检查它是否确实有效（将其插入浏览器）？

```
NSLog(@"%@", news.url); 
```

您也可以尝试记录 image_view 的框架：

```
NSLog(@"Cell Frame x: %f, y: %f, w: %f, h: %f", cell.img_Picture.origin.x, cell.img_Picture.origin.y, cell.img_Picture.size.width, cell.img_Picture.size.height); 
```

# asp.net - 想建立一个在线 webmail 脚本

> ID：13038177
> 
> 赞同：2
> 
> 时间：2012-10-23T19:53:01.243
> 
> 标签：asp.net, sql, database, webmail

我想构建一个仅适用于系统用户的在线 webmail 脚本，因此您也可以将其称为私人消息系统。

但在我开始之前，我需要一些信息/反馈。数据库布局。那会是什么样子，是否有一些角色。

那里有数据库布局，所以我可以得到一些如何建立数据库的想法！？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T09:51:11.073

我不会在不同的表中同时创建已发送和已接收的消息，只需创建一个表消息，因为您会明智地创建重复数据，不是吗？（发送者和接收者在同一个消息系统中）。

当您需要为某个接收者收集消息时，只需查询receiverUserId，而不是查询接收到的消息表。

# hadoop - Hive：向现有表添加行

> ID：13038180
> 
> 赞同：5
> 
> 时间：2012-10-23T19:53:19.153
> 
> 标签：hadoop, hive

我打算使用hadoop和hive来解决以下问题：

我有一个数据流，例如表示在给定时间戳处测量的温度的形式（时间戳，温度）。我需要每天计算一些聚合（例如最大值）。聚合需要每天计算一次（例如在午夜）。

我想以某种方式将数据加载到蜂巢中，按日期对其进行分区。但是，有一个问题 - 流中的数据不需要按时间戳排序，我收到延迟的记录：一条记录​​可能比它应该晚几天到达。在这种情况下，在生成通常的聚合时，我还需要计算包含该时间戳的当天的聚合。

直观地说，我想将后期记录添加到配置单元表中的相应分区。是否可以在不重新加载整个分区的情况下执行此操作？（重新加载分区是一项昂贵的操作吗？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T10:25:43.053

我不相信目前可以将记录添加到分区（或表，就此而言），因此您必须在将分区加载到表之前对记录进行排序 - 看起来像一个两个阶段过程给我。

但是，我相信您可以覆盖分区，因此至少您可以处理修改后的分区。

目前，至少，hive 是一个面向批处理的系统。

# python - pass_persist 处理程序中的正确 getnext 逻辑

> ID：13038182
> 
> 赞同：0
> 
> 时间：2012-10-23T19:53:23.480
> 
> 标签：python, snmp, net-snmp

我正在编写一个充当 snmp pass_persist 处理程序的小脚本。我希望它读取一个文件（称为“数字”，现在在同一个目录中），它只包含一些整数并将这些作为 oid 树返回。

我已经坚持了几天了，现在我意识到这是由于对 snmpd 工作原理的*根本误解*。我正在使用 snmpd.conf 手册页，它没有提到处理“get”和“getnext”请求的方式有任何区别，但我假设有一个。我一辈子都无法让 snmpwalk 使用这个脚本。

对 snmp 有更多了解的人可以看一下这段代码吗？我已经看过其他几个版本的 pass 脚本，包括一些在 python 中的版本，但我无法通过查看代码看到它们如何以与我的代码不同的方式处理协议。我看到了一个处理空白命令（ '' ）的实现，但其他显然没有。

基本上，我在这一点上很困惑！- 调试 snmpd 也非常困难，因为它是调用我的脚本的那个，而不是我。我正在记录我所能记录的内容，并在前台运行 snmpd，但除此之外，这有点“黑匣子”。

任何人都可以解释一下吗？

即：数字文件：

```
101
102
103
我想返回为：
.1.3.6.1.4.1..[剪辑]..1 = 101
.1.3.6.1.4.1..[剪辑]..2 = 102
.1.3.6.1.4.1..[剪辑]..3 = 103

```

我的脚本（我不担心返回整数以外的任何内容，而且我知道永远无法关闭文件，但这让我感觉更好）：

```
 #!/bin/python -u

import os,sys, syslog

def getLine():
    return sys.stdin.readline().strip()

def getFileLine(sub_oid, lines):
    sub_oid = int(sub_oid)
    if sub_oid >= len(lines):
        return 'NONE'
    else:
        return lines[sub_oid]

def printOutput(oid, var_type, varbind_value):
    if varbind_value == 'NONE':
        print 'NONE'
    else:
        print oid
        print var_type
        print varbind_value

######################################################

sub_oid = 0
FH = open('numbers','r')
lines = FH.readlines()

while True:
    command = getLine()
    syslog.syslog("command: %s" % command)

    if command == 'PING':
        syslog.syslog('got a ping')
        print 'PONG'
    elif command == 'get':
        given_oid = getLine()
        sub_oid = int(given_oid.split('.')[-1])
        varbind_value = getFileLine(sub_oid, lines)
        printOutput(given_oid, 'integer', varbind_value.strip())
    elif command == 'getnext':
        given_oid = getLine()
        syslog.syslog("got a requested oid of: %s" % given_oid)
        sub_oid = int(given_oid.split('.')[-1])
        varbind_value = getFileLine(sub_oid, lines)
        printOutput(given_oid, 'integer', varbind_value.strip())
    else:
        syslog.syslog("Unknown command: %s" % command)

FH.close() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T21:28:23.510

首先，有一个专门为此任务编写的[snmp-passpersist Python 模块。](http://pypi.python.org/pypi/snmp-passpersist)它的页面有一个指向真实世界使用示例的链接。您的案例的示例代码如下。

关于您的具体问题：

1.  在规范和维基百科中，描述`getnext`确实是出了名的不清楚。[TUT:snmpgetnext - Net-SNMP Wiki](http://www.net-snmp.org/wiki/index.php/TUT%3asnmpgetnext)中对此进行了很好的解释。

    简而言之，它检索*代理层次结构中指定 OID 之后**的第一个有效 OID*（及其值）。这里的“层次结构”可以表示为代理知道的所有 OID 的有序列表，这些 OID 目前有效。

     **   有两个主要用例：
        1.  响应*包含该“下一个”值的 OID*以及值本身。因此，您可以通过在后续请求中使用返回的 OID 来*遍历*代理的层次结构。当层次结构耗尽时，代理应该返回“未找到”错误（和`pass_persist`处理程序 - ）。`"NONE"`
        2.  您也可以*指定一个不完整的 OID*，并且代理应该返回*它知道的*与提供的匹配的第一个完整的 OID。
    *   在数据包级别，`getnext`确实不同于`get`（它的请求类型 ID 是`1`，`get`的是`0`）。
    *   您可能想完全忽略这个“魔法”并以与以下相同的方式处理它`get`：这只意味着“行走”和“猜测”将不起作用（行走可能会无限循环）。这就是我在上一份职业中维护的处理程序的工作**方式，这也是您当前代码中正在发生的事情:^)**。
    *   *   所以，修复很简单：`getFileLine(int(sub_oid)+1, lines)`- 因为你的代码已经足够聪明，可以`"NONE"`在疲惫时返回。“猜测”仍然行不通，但是……你需要吗？* 
**   `net-snmpd`有大量的日志记录选项 - 在[其联机帮助页](http://www.net-snmp.org/docs/man/snmpd.html)上搜索“日志” （而且，地狱，它是免费软件！当一切都失败时，您总是可以咨询甚至调试源代码）。`snmpget`但在这种特殊情况下，在使用/和/或使用嗅探器进行查询时记录标准输入和标准输出`snmpgetnext`就绰绰有余了。* 

 *有了前面提到的`snmp-passpersist`，您的代码归结为：

```
base_oid=".1.3.6.1.4.1..[snip]"
data_file="<path>"

import snmp_passpersist as snmp
pp=snmp.PassPersist(base_oid)

for l in (l.rstrip() for l in open(data_file)):
    pp.add_int(l,int(l))

pp.start(user_func=lambda:True,refresh=1800)  # If data updates are needed,
                                              # replace lambda with a real fn
                                              # and adjust refresh (sec) 
```

如果您需要监视对文件的更改，您可以轮询它（如上面的评论所建议的那样）或（在 Linux 中）使用类似[pyinotify](https://github.com/seb-m/pyinotify/wiki)的东西- 在这种情况下，您可能需要`pp.main_update()`在调用之前替换`pp.start()`或以其他方式修补模块的机器不知何故。*

# monitoring - 服务器密度如何监控他们的服务器？

> ID：13038185
> 
> 赞同：-1
> 
> 时间：2012-10-23T19:53:41.037
> 
> 标签：monitoring

如果服务器密度是一个监控服务，那么他们如何监控自己的服务器呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T22:02:45.017

我们在大部分监控中使用 Server Density 本身，但也使用其他工具，所以如果我们遇到中断，我们可以收到通知，并且仍然可以拉出图表来弄清楚发生了什么。为此，我们使用 New Relic、Pingdom 和 Aware Monitoring。这也有使用竞争对手工具的附带好处，因此我们也可以帮助改进我们自己的产品。

# php - 将用户 ID 传递给嵌套查询

> ID：13038187
> 
> 赞同：0
> 
> 时间：2012-10-23T19:53:52.313
> 
> 标签：php, mysql, sql, nested

我正在尝试从用户数据库中选择所有未订阅特定邮件列表的用户。如果用户是列表的成员，则内部查询会找到该用户，而外部查询会选择内部结果为零行的所有用户。

```
SELECT u.userid, u.username, u.mail, u.name, 
    u.lastname, u.starting_year, u.userid AS UIDD 
FROM userdb.users AS u 
WHERE (SELECT COUNT(*) FROM maildb.lists AS l, 
        maildb.list_subscriptions AS s, userdb.users AS u 
    WHERE u.userid = UIDD 
    AND l.listid = '$LIST_ID_TO_LOOKUP' 
    AND s.userid = u.userid 
    AND s.listid = l.listid) = 0 
ORDER BY u.starting_year DESC, u.lastname, u.name; 
```

在我搬到新服务器并更新了许多组件（包括 MySQL）之前，这一切都很好。

现在运行此查询时出现错误：

> #1054 - 'where 子句'中的未知列 'UIDD'

这可能是现在已弃用的旧语法的问题吗？我现在正在运行 MySQL 5.5.24。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T20:20:34.750

像这样，SELECT .. WHERE userid NOT IN（子查询）

```
SELECT 
 u.userid, 
 u.username, 
 u.mail, 
 u.name, 
 u.lastname,
 u.starting_year, 
 u.userid AS UIDD 
FROM 
 userdb.users AS u 
WHERE 
 u.userid NOT IN (
    SELECT 
      u.userid 
    FROM 
      maildb.lists AS l, 
      maildb.list_subscriptions AS s, 
      userdb.users AS u 
    WHERE 
      u.userid = u.userid 
      AND l.listid = '$LIST_ID_TO_LOOKUP' 
      AND s.userid = u.userid 
      AND s.listid = l.listid
    ) 
ORDER BY 
 u.starting_year DESC, u.lastname, u.name; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T20:00:17.070

你不能这样做。

什么，您可以做的是重写子查询以选择列和分组依据`u.userid`，然后加入这个子选择`sub_select.userid = u.userid`

# windows - 文件/文件夹创建/修改日期时间

> ID：13038194
> 
> 赞同：3
> 
> 时间：2012-10-23T19:54:09.527
> 
> 标签：windows, datetime, windows-xp

我需要了解确定文件或文件夹的创建日期时间和修改日期时间的规则，特别是在将文件或文件夹从 1 个 NTFS 分区复制或移动到另一个 NTFS 分区时。我需要这个来编写一个支持工具，它可以帮助选择正确的文件，以便一键发送电子邮件给支持团队。

我需要专门针对 Windows XP 以及 Service Pack 之间的任何变化来了解这一点。我已经在网上搜索并阅读了 Microsoft 文章：http: [//support.microsoft.com/kb/299648](http://support.microsoft.com/kb/299648)

但是，本文没有描述将文件或文件夹从 1 个 NTFS 分区复制或移动到另一个 NTFS 分区时的规则。

我希望这个问题足够具体，并将被视为与编程活动有关。如果这个问题不属于这个论坛，请告诉我它属于哪个论坛。

提前致谢。

# java - Wicket 如何处理 cookie，以及使用/不使用它们的选项有哪些？

> ID：13038198
> 
> 赞同：1
> 
> 时间：2012-10-23T19:54:17.483
> 
> 标签：java, cookies, web, wicket

我正在将 Wicket (6) 用于 Web 应用程序。我对 Wicket 的默认 cookie 处理有点好奇。默认情况下设置了哪些 cookie？某些组件是否默认使用 cookie？如果用户不允许 cookie 会发生什么，会发生 url 中的 jSession 吗？有没有一种简单的方法可以关闭 Wicket 中的所有 cookie？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T20:18:05.320

Wicket 使用的唯一 cookie 是您的容器提供的标准 jsessionid cookie。即使在无状态页面中工作时也是可选的。

不可能说哪些组件使用 cookie，因为有成千上万的组件，其中一些可能使用 cookie。唯一需要绑定会话的组件/行为是 Ajax 组件和有状态组件/行为。

也就是说，您为什么对删除所有 cookie 如此着急？如果是新的欧盟 cookie 法，那么您可以放心，允许正确使用您的应用程序的 cookie。在未经同意的情况下禁止跨网站跟踪用户，而不是会话 cookie 或其他让您保持登录的 cookie。

# canvas - 为什么图形坐标是从左上角开始测量的？

> ID：13038204
> 
> 赞同：9
> 
> 时间：2012-10-23T19:54:59.277
> 
> 标签：canvas, graphics, coordinates, history

我注意到我曾经使用过的每个计算机图形系统都使用左手坐标系，其原点位于左上角。Cairo、Java、Microsoft XYZ 和大多数图形程序都使用这个系统。我认为它们都可以追溯到一个共同的祖先，但我找不到任何关于此的参考资料。

如果我不得不猜测，我会说它来自 VGA 图形模式，使用与文本相同的坐标，这自然是基于自上而下、从左到右阅读英语的方式，“第二行”在下方“第一行”......但我正在弥补。

有没有人在讲述这个故事，或者可以指出正确的历史书的方向？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T20:06:39.860

这是一个古老的惯例，原因可能有点杜撰。以下是我发现的一些假设：

它源自 CRT 电子束扫描行为。

从上到下扫描意味着您不必等待整个帧首先发送，您只需在开始接收数据后立即开始扫描。（这又提出了一个问题，为什么要从上到下扫描）

它允许 Z 轴进入屏幕而不是从屏幕出来的右手坐标系。

令人讨厌的是，Cocoa 和 Quartz 使用左下角的原点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T20:31:43.267

不知道。我不认为有一个确定的答案。很可能当人们仍然拥有基于控制台的机器时，从左上角向下到右下角是有意义的。正如您所说，这就是世界上很多人的阅读方式。把原点放在那里是有道理的。

[http://en.wikipedia.org/wiki/Memory-mapped_I/O](http://en.wikipedia.org/wiki/Memory-mapped_I/O)

维基百科文章有一些关于内存映射显示的信息。例如，我们将一部分内存用于关闭和打开屏幕上的像素。我们让地址 0 成为屏幕的左上角部分，并根据像素是否在内存中，分块移动打开和关闭像素。这基本上就是第一篇文章所说的。

我不知道他们是否让地址 0 成为显示器的左上角，但这是有道理的，它可能刚刚延续。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-15T18:57:04.517

我怀疑这是由于遗留原因而保留的旧约定。UpperLeft 的优势在于没有自下而上的语言书写系统。所以在 UpperLeft 更容易：

*   放置多行文本
*   处理未知或无限高的页面
*   如果页面高度发生变化（即更大或更小的设备），在 BottomLeft 中您必须平移每个对象坐标，而在 UpperLeft 中则不需要。

最后一个还扩展到动态放置和布局，其中图形对象的坐标与其父对象有偏移

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-01-05T22:27:45.837

我也想知道同样的问题。这是另一个来源：

> 原点总是在左上角。这源于这样一个事实，即在最初制造时，某种电视会从左到右然后从上到下扫描。所以它不像你在高中几何中看到的那样，原点并不总是在左下角......

[Python 交互式编程简介](https://www.coursera.org/lecture/interactive-python-1/canvas-and-drawing-sMd7e)

# javascript - 检查哪个事件处理程序处理输入字段上的 alt+a 组合

> ID：13038221
> 
> 赞同：3
> 
> 时间：2012-10-23T19:56:10.547
> 
> 标签：javascript, jquery

是否可以从与处理特定组合键的站点连接的所有 javascript 代码中确定事件处理程序？

在我的输入中，我无法输入像 ą 这样的波兰语字母。可以通过键入`alt`+来完成`a`。

我正在使用[jQuery UI 1.9](http://jqueryui.com/)。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T20:00:07.970

您可以使用[Visual Event](http://www.sprymedia.co.uk/article/Visual+Event)来检查 DOM 上的所有事件侦听器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T20:02:56.823

您可以运行所有与 jQuery 绑定的事件：

```
$._data( element, "events" ); 
```

这将返回一个对象，该对象显示所有已绑定的事件。然后，您可以循环并检查哪个具有您正在寻找的处理程序。将它传递到您的控制台应该可以让您快速分解成员并轻松地检查整个对象。

不幸的是，这不会向您显示本机使用`attachEvent`or绑定的事件`addEventListener`。那些你必须检查元素本身的属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T20:16:13.430

您可以尝试使用 Chrome 开发者工具的*事件监听器断点*功能，打开 CDT 并转到`Sources -> Event Listener Breakpoints (in the right sidebar) -> Keyboard`，然后勾选`keyup`事件。

下次您按下某个键时，调试器会将您带到处理程序。这仍然需要一些挖掘（以及对 jquery 代码的基本理解），但仍然很有帮助。好处是您不需要知道 DOM 层次结构中的哪些元素具有键事件绑定，CDT 会全部捕获。

另外，尝试搜索[`preventDefault`](http://api.jquery.com/event.preventDefault/).

# iphone - ALAssetsLibrary 在将新照片添加到相机胶卷后返回相同的资产 - 目标 c

> ID：13038225
> 
> 赞同：1
> 
> 时间：2012-10-23T19:56:24.480
> 
> 标签：iphone, objective-c, ios, alassetslibrary

我`ALAssetsLibrary`用来枚举我保存的照片中的前 30 张照片。我已经创建了属性，`AppDelegate`以便可以随时访问`ALAssets`，因为`ALAssetsLibrary`实例的生命周期与`ALAssets`生命周期相关。这是我的代码：

```
if(!_savedAssets) _savedAssets = [[NSMutableArray alloc] init];
else [_savedAssets removeAllObjects];

if(appDelegate.library)
{
    [appDelegate.library release];
    [appDelegate setLibrary:nil];
}

appDelegate.library = [ALAssetsLibrary new];
__block int count = 0;
[appDelegate.library enumerateGroupsWithTypes:ALAssetsGroupSavedPhotos usingBlock:^(ALAssetsGroup *group, BOOL *stop) {
    NSLog(@"%d",group.numberOfAssets);
    if(count>30) *stop = YES;
    [group enumerateAssetsWithOptions:NSEnumerationReverse usingBlock:^(ALAsset *result, NSUInteger index, BOOL *needToStop) {
        NSLog(@"%d", index);
        if(count<30 && result)
        {
            UIImage *image = [UIImage imageWithCGImage:result.thumbnail];
            [_savedAssets addObject:result];
            [self performSelectorOnMainThread:@selector(imageManipulation:) withObject:image waitUntilDone:NO];
            count++;

        }
        else
          *needToStop = YES;

    }];
} failureBlock:^(NSError *error) {
    NSLog(@"%@",error.description);
}]; 
```

如您所见，我将前 30 个添加`ALAssets`到 my`NSMutableArray`中，以访问缩略图或全尺寸图像。在我的应用程序制作照片后，我将这张照片保存到相机胶卷并尝试`ALAssets`使用与第一次加载它们时相同的代码重新加载我的照片。在重新加载之前，我从 中删除所有对象`NSMutableArray`，并重新初始化`ALAssetsLibrary`. 但这无济于事。每次我都一样`ALAssets`。我`ALAssets`只有在重新加载应用程序后才能获得新的。如何在`ALAssets`不重新加载应用程序的情况下重新加载？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T12:42:26.110

为 注册一个观察者`ALAssetsLibraryChangedNotification`。当通知触发时，重新加载资产。

# c++ - 仅用于 UI 的 C++ 跨平台移动框架

> ID：13038226
> 
> 赞同：3
> 
> 时间：2012-10-23T19:56:26.820
> 
> 标签：c++, c, mobile, user-interface, cross-platform

我决定对我来说用 C++ 编写我的应用程序很方便，因为当考虑到跨平台解决方案时，这是正确的语言。

问题是每个平台的 UI 框架都很难处理，即使是最简单的 UI 框架也需要相当多的时间来创建；在 UI 部分，我还放置了多点触控手势、虚拟按钮、文本区域输入以及所有可以接收和处理用户输入的基本内容。

现在大部分 UI 都是基于 HTML5 的，基本上所有的应用程序最终都具有相同的“酷”外观，但这种 HTML5 解决方案不适合我，因为我正在寻找 C/C++ 解决方案。

如果我正在寻找 C/C++ 中的移动跨平台 UI 库或可以与 C/C++ 代码接口的库，我可以考虑哪些库？

对于跨平台，我的意思是至少支持 iOS 和 Android。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T19:59:45.827

跨手机目前有点不可能。为什么不尝试在 html5 中编写所有代码？并为多个移动平台分别编写特定于平台的 C++ 代码？

另请查看 Corona SDK（我听说过，有更好的支持）。

编辑：

[http://www.mosync.com/](http://www.mosync.com/)似乎是另一个可行的选择。这也允许您混合使用 html5 和 C++

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T20:21:46.083

目前，最流行的跨移动平台开发方法是：

*   C++ 中的逻辑，UI 分别以适当的语言为每个平台
*   Mono，也就是 .NET/C#
*   基于 HTML 的框架，（PhoneGap、Appcelerator）

这些都不符合您的所有要求。决定哪个更重要 - 最大限度地重用代码？C++？

特别是对于 UI，这是最难抽象出来的部分。跨平台 GUI 库（Qt、Swing）倾向于以最小的公分母为目标，而应用程序最终在所有受支持的平台上看起来都很丑陋。

# apache - 301 使用 htaccess 从表单操作重定向到 URL

> ID：13038229
> 
> 赞同：1
> 
> 时间：2012-10-23T19:56:57.370
> 
> 标签：apache, .htaccess, url-rewriting

我想重定向一个这样的 URL：

```
/calculate?from=london&to=paris 
```

像这样的其他人：

```
/difference-london-paris 
```

我在我的 .htaccess 文件上试过这个，但它不起作用:(

```
RewriteRule ^calculate?from=(.*)&to=(.*) ^difference-$1-$2 [R=301,L] 
```

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T20:48:46.830

使用此代码：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s/+calculate\?from=([^&]*)&to=([^&\s]*) [NC]
RewriteRule ^ difference-%1-%2? [R=301,L]

RewriteRule ^difference-([^-]+)-([^-]+)/?$ calculate?from=$1&to=$2 [L,NC,QSA] 
```

# php - 是否可以将 Drupal 6 核心配置文件字段迁移到 D7 中的新配置文件字段？

> ID：13038230
> 
> 赞同：0
> 
> 时间：2012-10-23T19:57:01.067
> 
> 标签：php, drupal, data-migration

我正在尝试将大型 D6 站点升级到 D7。

我安装了内容配置文件模块。

我有一些需要保留的核心配置文件字段。

由内容配置文件模块创建的“配置文件”节点中没有字段。我只是为了更好地管理配置文件的主题和演示而使用。

我已经安装了 Profile2 模块。我已经安装了与之捆绑的配置文件页面子模块。

**1.**我想将所有这些核心配置文件字段导出或转换为 D7 中的新实体字段。**我该怎么做？**

**2.**与此同时（如果第 1 条根本不可能），我尝试对***profile2.tpl.php***文件进行主题化，尝试在其中打印我的旧核心配置文件字段。

我[已按照说明](http://drupal.org/node/1488468)打印这些核心配置文件字段，因此我已将其硬编码`print check_plain($account->profile_nombre);`到模板中，但它不会打印插入到*nombre*字段（核心配置文件字段）中的用户名。那么，我该如何为个人资料页面设置主题？

我也看过这个关于 profile2 模块的[视频教程，但是当你已经有几千个用户在其中包含核心配置文件字段时，我仍然对如何在 D7 中管理配置文件一无所知。](http://codekarate.com/daily-dose-of-drupal/drupal-7-profile-2-module)

***请注意，我尝试使用“迁移”模块和“drupal 2 drupal”迁移模块，但没有成功。***

感谢您的帮助和洞察力！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T20:25:30.000

一个好的解决方案可能是使用 Feeds 模块（导入到字段）和 Views Data Export Module（将字段导出到电子表格）。该程序将是：

1.  设置一个视图，列出您的所有用户并显示您要迁移的所有字段。然后添加新闻显示（数据导出）并选择CSV格式。

2.  使用提要将数据导入 D7。只需将每个导出的字段映射到一个新字段。

起初这可能看起来很复杂，但它真的很简单并且应该可以工作。

# java - IDE 希望类是抽象的 Comparable

> ID：13038240
> 
> 赞同：0
> 
> 时间：2012-10-23T19:57:43.050
> 
> 标签：java, comparable

我试图使用该接口通过使用自定义方法使用“arrivalTime”字段`Comparable`对对象数组列表进行排序，但它一直告诉我我不能，因为对象不是抽象的。我不能把它抽象化。我需要实例化对象.. `Car``compareTo()``Car``Car`

有谁知道它为什么要我把我的班级抽象化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T20:03:18.927

您在类中的方法定义不正确。肯定是

```
@Override
public int compareTo(Car o)
{
    return 0;
} 
```

由于该方法没有正确覆盖接口中的方法，IDE 要求您标记类抽象以避免编译错误。另一种选择是在类中正确实现抽象方法并消除错误。如果您使用 Eclipse，请在类上按 Ctrl + 1 并选择“添加未实现的方法”选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T20:00:35.280

似乎是 IDE 迫使您在实现接口时使您的类抽象或定义`compareTo`方法。`Comparable`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T20:05:30.363

你需要这样使用它：

```
public class Car implements Comparable<Car>{

    ...

    @Override
    public int compareTo(Car other) {
    ...
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T20:35:05.210

你应该使用`Comparable`这样的界面：

```
public class Car implements Comparable<Car> {

    private int arrivalTime;

    public Car(int arrivalTime) {
        this.arrivalTime = arrivalTime;
    }

    public int getArrivalTime() {
        return this.arrivalTime;
    }

    @Override
    public int compareTo(Car car) {
        return this.arrivalTime - car.getArrivalTime();
    }

} 
```

要进行实际排序：

```
LinkedList<Car> cars = new LinkedList<Car>();
cars.add(new Car(20000));
cars.add(new Car(30000));
cars.add(new Car(40000));

Collections.sort(cars); 
```

看看我关于排序[的帖子。](https://stackoverflow.com/questions/13014952/best-way-to-sort-2-array-lists/13015087#13015087)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-23T20:07:05.080

这是一个工作（如果相当粗略）的例子：

```
public class Cars
{
    static class Car
    {
        Date arrivalTime;
        public Car(Date time)
        {
            arrivalTime = time;
        }
    }

    static class CarComparator implements Comparator<Car>
    {
        @Override
        public int compare(Car o1, Car o2)
        {
            return o1.arrivalTime.compareTo(o2.arrivalTime);
        }       
    }

    public static void main(String[] args)
    {
        List<Car> cars= new ArrayList<Car>();
        // create and add some cars here
        Collections.sort(cars, new CarComparator());
    }
} 
```

# asp.net - IISExpress 7.5 有内部服务器错误，而 IIS 7.5 可以工作

> ID：13038241
> 
> 赞同：0
> 
> 时间：2012-10-23T19:57:42.737
> 
> 标签：asp.net, iis, web-config, iis-7.5, iis-express

`<handlers />`我的web.config 中有以下部分来为各种文件扩展名注册**ActiveReports 6处理程序：**

```
<handlers accessPolicy="Read, Execute, Script">

  <add name="ActiveReportsRpxHandler" path="*.rpx" verb="*" type="DataDynamics.ActiveReports.Web.Handlers.RpxHandler, ActiveReports.Web, Version=6.0.1797.0, Culture=neutral, PublicKeyToken=cc4967777c49a3ff" />
  <add name="ActiveReportsWebCacheHandler" path="*.ArCacheItem" verb="*" type="DataDynamics.ActiveReports.Web.Handlers.WebCacheAccessHandler, ActiveReports.Web, Version=6.0.1797.0, Culture=neutral, PublicKeyToken=cc4967777c49a3ff" />
  <add name="ActiveReportsCompiledReportHandler" path="*.ActiveReport" verb="*" type="DataDynamics.ActiveReports.Web.Handlers.CompiledReportHandler, ActiveReports.Web, Version=6.0.1797.0, Culture=neutral, PublicKeyToken=cc4967777c49a3ff" />

</handlers> 
```

当应用程序池配置为在集成管道模式下使用 .NET 4.0 时，这在 Windows Server 2008 R2 下的 IIS 7.5 下运行良好。

* * *

如果我尝试在**IIS Express 7.5**下使用这个确切的 web.config 运行相同的应用程序，我会收到以下令人困惑的错误消息：

```
**HTTP Error 500.19 - Internal Server Error**

**Config Error**    Cannot add duplicate collection entry of type 'add' with unique key attribute 'name' set to 'ActiveReportsRpxHandler' 
```

此错误消息没有多大意义，特别是如果我将唯一的“名称”属性更改为其他内容并且错误消息会相应调整。（不太可能在`ActiveReportsRpxHandler6161616161`其他地方重复）

此 IISExpress 实例遵循以下 applicationhost.config：

```
<site name="xxxxxxx" id="2">
    <application path="/" applicationPool="Clr4IntegratedAppPool">
        <virtualDirectory path="/" physicalPath="C:\Users\xxxxxxx\Documents\Visual Studio 2010\Projects\xxxxxxx\xxxxxxx" />
    </application>
    <application path="/AIMS" applicationPool="Clr4IntegratedAppPool">
        <virtualDirectory path="/" physicalPath="C:\Users\xxxxxxx\Documents\Visual Studio 2010\Projects\xxxxxxx\xxxxxxx" />
    </application>
    <bindings>
        <binding protocol="http" bindingInformation="*:32150:localhost" />
    </bindings>
</site> 
```

任何线索 IIS Express 7.5 是怎么回事？还是我在这里做一些愚蠢的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T21:20:25.703

也许处理程序在配置文件链中的某个地方注册。[在http://msdn.microsoft.com/en-us/library/ms178685(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/ms178685(v=vs.100).aspx)上查看有关它的详细信息 。或者，您可以尝试

```
<handlers accessPolicy="Read, Execute, Script">
  <remove name="ActiveReportsRpxHandler"/> 
  <add name="ActiveReportsRpxHandler" path="*.rpx" verb="*" type="DataDynamics.ActiveReports.Web.Handlers.RpxHandler, ActiveReports.Web, Version=6.0.1797.0, Culture=neutral, PublicKeyToken=cc4967777c49a3ff" />
  <add name="ActiveReportsWebCacheHandler" path="*.ArCacheItem" verb="*" type="DataDynamics.ActiveReports.Web.Handlers.WebCacheAccessHandler, ActiveReports.Web, Version=6.0.1797.0, Culture=neutral, PublicKeyToken=cc4967777c49a3ff" />
  <add name="ActiveReportsCompiledReportHandler" path="*.ActiveReport" verb="*" type="DataDynamics.ActiveReports.Web.Handlers.CompiledReportHandler, ActiveReports.Web, Version=6.0.1797.0, Culture=neutral, PublicKeyToken=cc4967777c49a3ff" />

</handlers> 
```

# git - 在版本之间快速切换

> ID：13038243
> 
> 赞同：2
> 
> 时间：2012-10-23T19:57:44.373
> 
> 标签：git, vim

假设我在存储库`f.txt`下有一个文件`git`。该文件的初始版本包含 1 行，版本 2 包含 2 行，每个新版本都在先前版本的基础上增加一行，因此版本 10 包含 10 行。

现在，我`f.txt`在 vim 编辑器中打开文件（第 5 版）。我想留在 vim 编辑器中，并且可以使用 和 之类的命令`git_next`，`git_previous`并在版本之间快速切换，而无需知道提交编号，也无需离开`vim`.

有没有使用`git`and的可能性`vim`？`git_versions`如果我可以键入类似命令并且我可以从该文件的版本列表中选择并切换到所需的版本，这也会很有用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-23T20:24:19.003

您正在寻找Tim Pope 的[Fugitive.vim](https://github.com/tpope/vim-fugitive)插件。它可以帮助您执行许多`git`命令。

使用 fugitive.vim 你可以执行`:Glog`并且修改将被放入`quickfix`列表中。只需使用`:cnext`、`:cprev`和朋友在修订之间移动。有一个出色的截屏视频[Fugitive.vim - 探索 git 存储库的历史，](http://vimcasts.org/episodes/fugitive-vim-exploring-the-history-of-a-git-repository/)由 Drew Neil 撰写。我强烈建议观看有关该主题的所有[Vimcast](http://vimcasts.org/)。

[截屏视频中的 Drew 还展示了另一个名为Unimpaired.vim](https://github.com/tpope/vim-unimpaired)的 Tim Pope 插件。我强烈推荐它。它将提供一些不错的映射（`[q`、`]q`等）以在`quickfix`列表中移动。

如需更多帮助，请参阅：

```
:h quickfix
:h :cnext 
```

如果您安装了 Fugitive.vim，请参阅：

```
:h fugitive
:h fugitive-:Glog 
```

# python - eBay Python SDK“findItemsAdvanced”调用返回内部服务器错误

> ID：13038244
> 
> 赞同：1
> 
> 时间：2012-10-23T19:57:51.530
> 
> 标签：python, ebay-api, ebay-sdk

我正在尝试为 ebay api 使用以下包装器： [http ://code.google.com/p/ebay-sdk-python/](http://code.google.com/p/ebay-sdk-python/)

但是，当我执行以下代码时，我得到：

```
from ebaysdk import finding, tag, nodeText

f = finding()
f.execute('findItemsAdvanced', tag('keywords', 'shoes'))
Traceback (most recent call last):
  File "/home/unix/dfernand/bin/lib/python2.7/site-packages/ebaysdk-0.1.6-py2.7.egg/ebaysdk/__init__.py", line 141, in execute
    self._response_content = self._execute_http_request()
  File "/home/unix/dfernand/bin/lib/python2.7/site-packages/ebaysdk-0.1.6-py2.7.egg/ebaysdk/__init__.py", line 244, in _execute_http_request
    raise Exception("%s" % e)
Exception: Internal Server Error 
```

然后尝试获取更多信息，但没有任何意义：

```
error = f.error()
print error
findItemsAdvanced error:
Exception: Internal Server Error 
```

我不确定错误来自哪里 - 我尝试将[yaml 文件](https://github.com/timotheus/ebaysdk-python/blob/master/ebay.yaml)复制到安装模块的 egg 文件的位置（即 /home/unix/dfernand/bin/lib/python2.7/site-packages/ )，没有任何变化。

我用沙盒密钥填充了 yaml 文件，然后尝试用生产密钥填充它，然后我更改了名称以匹配我的 ebay 开发人员帐户中的名称，等等。没有任何效果。我对发生的事情一无所知。有任何想法吗？谢谢。

我的 yaml 文件示例：

```
 # ebaysdk API Configurations

name: Key Set 1 #(note: here i changed it to Key Set 1, name in ebay website from ebay_api_config)

# Trading - External
api.ebay.com:
    password: _password_
    username: _username_
    appid: myproduction-appid-fromdeveloperssite
    certid: _certid_
    devid: _devid_
    token:
    version: 671
    https: 1

# Shopping
open.api.ebay.com:
    appid: myproduction-appid-fromdeveloperssite
    certid: myproduction-certid-fromdeveloperssite
    devid: myproduction-devid-fromdeveloperssite
    version: 671

# Finding/Merchandising
svcs.ebay.com:
    appid: myprodction-appid-fromdeveloperssite
    version: 1.0.0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-06T22:52:35.323

尝试升级到最新版本。我添加了许多有助于解决问题的错误处理。

[https://github.com/timotheus/ebaysdk-python](https://github.com/timotheus/ebaysdk-python)

```
from ebaysdk import finding

api = finding(appid='YOUR_APPID_HERE', debug=True)
api.execute('findItemsAdvanced', {'keywords': 'shoes'})

print api.response_dict() 
```

添加 debug=True 将转储 http 请求/响应。如果您仍然遇到问题，请传递请求/响应。

# c# - 在c#中查找已编译类的源文件

> ID：13038249
> 
> 赞同：3
> 
> 时间：2012-10-23T19:58:14.530
> 
> 标签：c#, .net, reflection, filesystems

我希望在一组已编译的 .net 程序集中找到特定类的关联源文件。

例如

```
MyAsm.Namespace.Foo  -> C:\Source\foo.cs
MyAsm.Namespace.Bar  -> C:\Source\Code\MoreCode\Common.cs
MyAsm.Namespace2.Bar -> C:\Source\Code\MoreCode\Common.cs
... 
```

我有程序集反射/提取我对使用标准`System.Reflection`功能感兴趣的类型信息。

我现在需要找到该类的原始 .cs 源文件。虽然我有一个蛮力解决方案作为解决方法，但它的速度慢得让人无法接受。

我希望在大约 5 秒内完成整个过程。目前，反射提取部分需要不到 1 秒，“文件关联”需要几分钟。我不认为在 4 秒内扫描几个 MB 是不合理的。

不幸的是，有一些警告可以防止走捷径。

*   我不知道文件的名称，所以我需要`dir / s *.cs`每次运行来枚举所有潜在的源文件。

*   类名并不总是与源文件匹配，它可以*提示*可能的位置，但不能保证工作。

*   在某些情况下，多个类在同一个文件中定义。

*   有 ~20k .cs 文件/63MB 的源代码。

*   我需要大约 10k 个类/它们的文件之间的关联。

*   我不希望使用其中声明的文件名/类来增量构建数据库，因为文件内容会发生变化，并且我将很难维护这个数据库等（尽管如果一切顺利，我可能不得不走这条路否则失败）。

*   这将在操作系统上运行，不会启用 Windows 搜索/索引，所以那里也没有乐趣。

**我试过的：**

*   使用 findstr.exe - 太慢了

*   创建一个 .net 应用程序，将所有文件加载到内存中。- 太慢找不到 *.cs / 加载所有文件，一旦文件在内存中就快速扫描文件。

*   从所有较小的文件创建一个大的源文件，加载它，扫描等 - 再一次，太慢了。构建文件需要几分钟，加载后很快。

*   读取 PDB 文件 - 我正在研究 PDB2XML.exe，虽然它确实输出文件名并且运行速度很快，但我看不到如何将类与文件名相关联。

那么，是否有人对 PDB2XML 有其他建议、魔法或一些经验？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-27T17:54:30.003

这并不能完全解决您面临的问题，因为您想获取任意类的文件路径，但这对我来说很容易使用，它只是从源位置获取指向某个文件的指针。我在单元测试中使用它，所以性能并不是非常重要。

```
var x = new StackTrace(true);
var file = x.GetFrame(0).GetFileName(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T14:35:37.680

如果文件在磁盘上，恕我直言，使用 PDB 是您的最佳选择。文件名（由[ISymbolDocument.URL](http://msdn.microsoft.com/en-us/library/system.diagnostics.symbolstore.isymboldocument.url.aspx)表示）与序列点相关。序列点与方法（包括属性获取/设置）相关，而不是类。当然，一个 .NET 类源可以存储在多个文件中。所以你必须浏览一个类型的所有成员（例如使用反射）来确定所有相应的文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-07-26T18:23:43.927

如果您能够编辑源。您可以使用反射和 System.Runtime.CompilerServices.CallerFilePath 来完成。只需将属性添加到每个文件的源中即可。您可能需要为部分类考虑一些巧妙的方法。

此示例提供了放置属性的源文件和行号。

```
[AttributeUsage(AttributeTargets.All, Inherited = false, AllowMultiple = false)]
public sealed class SourceInfoAttribute : Attribute
{
    public SourceInfoAttribute([CallerLineNumber]int sourceLineNumber = 0, [CallerFilePath] string sourceFilePath = "")
    {
        SourceLineNumber = sourceLineNumber;
        SourceFilePath = sourceFilePath;
    }

    internal int SourceLineNumber { get; set; }
    internal string SourceFilePath { get; set; }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T14:12:08.423

我不知道 .NET 中的文件名和程序集名称之间有任何关系，实际上可能在一个文件中定义了多个程序集，所以如果不实际查看每个源代码，我不知道如何做到这一点文件并搜索类定义或维护正在运行的索引。

# c++ - 匹配逻辑语句的 Rcpp 矩阵的子集

> ID：13038256
> 
> 赞同：20
> 
> 时间：2012-10-23T19:58:53.370
> 
> 标签：c++, r, rcpp

在 R 中，如果我们有一个数据矩阵，比如一个 100 x 10 的矩阵 X，和一个 100 元素的向量 t，它的值可能为 (0, 1, 2, 3)，我们可以使用简单的方法轻松找到 X 的子矩阵 y句法：

```
y = X[t == 1, ] 
```

但是，问题是，如何使用 Rcpp 的 NumericMatrix 做到这一点？
（或者，更一般地说，我怎样才能在 C++ 的任何容器中做到这一点？）

感谢 Dirk 的提示，看来

```
NumericMatrix X(dataX);
IntegerVector T(dataT);
mat Xmat(X.begin(), X.nrow(), X.ncol(), false);
vec tIdx(T.begin(), T.size(), false); 
mat y = X.rows(find(tIdx == 1)); 
```

可以做我想做的事，但这似乎太冗长了。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-05T20:29:52.923

我很想把它看作是糖。不幸的是，我没有资格实施它。这里仍然是我玩过的许多不同的解决方案。

首先，我必须对 Gong-Yi Liao 代码进行一些修改才能使其正常工作（`colvec`而不是`vec`for`tIdx`和`Xmat.rows(...`而不是`X.rows(...`：

```
mat Xmat(X.begin(), X.nrow(), X.ncol(), false);
colvec tIdx(T.begin(), T.size(), false); 
mat y = Xmat.rows(find(tIdx == 1)); 
```

其次，这里有三个具有基准的函数，所有子集矩阵都基于逻辑语句。这些函数采用 arma 或 rcpp 参数并返回值 两个是基于 Gong-Yi Liao 的解决方案，一个是简单的基于循环的解决方案。

**n(行)=100, p(T==1)=0.3**

```
 expr   min     lq median     uq    max
1  submat_arma(X, T) 5.009 5.3955 5.8250 6.2250 28.320
2 submat_arma2(X, T) 4.859 5.2995 5.6895 6.1685 45.122
3  submat_rcpp(X, T) 5.831 6.3690 6.7465 7.3825 20.876
4        X[T == 1, ] 3.411 3.9380 4.1475 4.5345 27.981 
```

**n(行)=10000, p(T==1)=0.3**

```
 expr     min       lq   median       uq      max
1  submat_arma(X, T) 107.070 113.4000 125.5455 141.3700 1468.539
2 submat_arma2(X, T)  76.179  80.4295  88.2890 100.7525 1153.810
3  submat_rcpp(X, T) 244.242 247.3120 276.6385 309.2710 1934.126
4        X[T == 1, ] 229.884 236.1445 263.5240 289.2370 1876.980 
```

**子文件.cpp**

```
#include <RcppArmadillo.h>
// [[Rcpp::depends(RcppArmadillo)]]

using namespace Rcpp;
using namespace arma;

// arma in; arma out
// [[Rcpp::export]]
mat submat_arma(arma::mat X, arma::colvec T) {
    mat y = X.rows(find(T == 1));
    return y;
}

// rcpp in; arma out
// [[Rcpp::export]]
mat submat_arma2(NumericMatrix X, NumericVector T) {
    mat Xmat(X.begin(), X.nrow(), X.ncol(), false);
    colvec tIdx(T.begin(), T.size(), false); 
    mat y = Xmat.rows(find(tIdx == 1));
    return y;
}

// rcpp in; rcpp out
// [[Rcpp::export]]
NumericMatrix submat_rcpp(NumericMatrix X, LogicalVector condition) { 
    int n=X.nrow(), k=X.ncol();
    NumericMatrix out(sum(condition),k);
    for (int i = 0, j = 0; i < n; i++) {
        if(condition[i]) {
            out(j,_) = X(i,_);
            j = j+1;
        }
    }
    return(out);
}

/*** R
library("microbenchmark")

# simulate data
n=100
p=0.3
T=rbinom(n,1,p)
X=as.matrix(cbind(rnorm(n),rnorm(n)))

# compare output
identical(X[T==1,],submat_arma(X,T))
identical(X[T==1,],submat_arma2(X,T))
identical(X[T==1,],submat_rcpp(X,T))

# benchmark
microbenchmark(X[T==1,],submat_arma(X,T),submat_arma2(X,T),submat_rcpp(X,T),times=500)

# increase n
n=10000
p=0.3
T=rbinom(n,1,p)
X=as.matrix(cbind(rnorm(n),rnorm(n)))
# benchmark
microbenchmark(X[T==1,],submat_arma(X,T),submat_arma2(X,T),submat_rcpp(X,T),times=500)

*/ 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-23T21:50:53.747

我所知道的最接近的是函数与通过[RcppArmadillo](http://dirk.eddelbuettel.com/code/rcpp.armadillo.html)访问的[Armadillo](http://arma.sf.net)`find()`中的函数相结合的组合。`submat()`

*编辑：*这当然是我们可以通过补丁添加的东西。如果有人有足够的动力去尝试这个，请来到 rcpp-devel 邮件列表。

# c# - WinRT 将带有换行符的文本共享到邮件应用程序

> ID：13038257
> 
> 赞同：3
> 
> 时间：2012-10-23T19:58:54.437
> 
> 标签：c#, windows-8, windows-runtime

我准备了一些数据供分享：

```
 package = package ?? new DataPackage();

        package.Properties.Title = "Event: " + data.Name;

        var text = new StringBuilder().AppendFormat(@"
Start at.   {0:F}<br/>
End at.     {1:F}<br/>
Total time. {2}<br/>
", data.StartTime, data.EndTime, data.TotalTime);

        var textHtml = text.ToString();
        package.SetText(textHtml.Replace("<br/>", ""));
        package.SetHtmlFormat(textHtml); 
```

类似的中断在某些应用程序（例如 Tweetro）中表现良好，但在 Mail 中被忽略。有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T21:56:20.387

您将 Text 和 Html 都提供给包。

因此，根据目标应用程序接受的内容，它将使用 Text 或 Html。在您的文本中，用`<br/>`空字符串替换。所以你不会有换行符。

您是否尝试过替换为“\n”？'\n' 是换行符。

```
 package.SetText(textHtml.Replace("<br/>", "\n")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-28T15:25:56.037

我知道我在这里聚会迟到了，但我也遇到了同样的问题。

我发现了这个 SO - [How to add new line while sharing text in WinRt](https://stackoverflow.com/questions/14041767/how-to-add-new-line-while-sharing-text-in-winrt)这让我在添加基于 HTML 的文本时添加了 HtmlFormatHelper.CreateHtmlFormat(textToShare)。这为我修复了邮件应用程序上的换行符，因为它开始使用 HTML。

```
package.SetHtmlFormat(HtmlFormatHelper.CreateHtmlFormat(textHtml)); 
```

我认为除非格式正确，否则邮件应用程序不会使用 HTML 内容，而 HtmlFormatHelper 似乎可以做到这一点。

# cookies - Restsharp 表单验证

> ID：13038260
> 
> 赞同：0
> 
> 时间：2012-10-23T19:59:10.913
> 
> 标签：cookies, forms-authentication, restsharp

可能吗？那怎么办？

```
var client = new RestClient("http://localhost:58746");
var request = new RestRequest("Users/Login", Method.POST);
request.AddParameter("UserName", "user");
request.AddParameter("Password", "12345");
request.AddParameter("RememberMe", true);
request.AddParameter("ReturnUrl", "http://localhost:58746");

if (response.StatusCode == HttpStatusCode.OK)
{
  var cookie = response.Cookies.FirstOrDefault(x => x.Name == FormsAuthentication.FormsCookieName); // yeah but that will not get the cookie.
} 
```

如何到达那个cookie？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T15:24:58.750

我能够让它以这种方式工作：

var cookie = response.Cookies.FirstOrDefault(x => x.Name == FormsAuthentication.FormsCookieName);

# objective-c - 关闭视图时未释放 UIVIewController

> ID：13038261
> 
> 赞同：1
> 
> 时间：2012-10-23T19:59:12.003
> 
> 标签：objective-c, memory-management, uiviewcontroller, automatic-ref-counting

我有一个主视图 mainWindow，它显示了几个按钮。两个按钮都创建了一个新的 UIViewController (mapViewController)，但是一个会开始游戏，另一个会继续游戏。两个按钮都通过 StoryBoard 链接到同一个视图。由于我没有使用 NavigationController，因此它们被绑定到模态视图。

所以在一个典型的游戏中，如果一个人开始游戏，然后又回到主菜单，他会触发：

```
[self dismissViewControllerAnimated:YES completion:nil ]; 
```

返回主菜单。我会假设视图控制器此时已发布。

用户通过打开另一个 mapViewController 实例使用第二个按钮恢复游戏。然而，正在发生的事情是一些触摸事件将触发原始实例上的方法（并向它们写入状态更新 - 因此对当前视图不可见）。当我在 mapViewController 代码中放置断点时，我可以看到实例将是一个或另一个（其中一个应该被释放）。

我已经尝试将一个委托放到 mainWindow 来清除视图：

```
 [self.delegate clearMapView]; 
```

在主窗口中的位置

```
- (void) clearMapView{
    gameWindow = nil;
} 
```

我也试过

```
self.view=nil; 
```

在地图视图控制器中。

mapViewController 代码包含 MVC 代码，其中模型是静态的。我想知道这是否会阻止 ARC 发布视图。

model.m 包含：

```
static CanShieldModel *sharedInstance;

+ (CanShieldModel *) sharedModel
{
@synchronized(self)
{
    if (!sharedInstance)
        sharedInstance = [[CanShieldModel alloc] init];     
    return sharedInstance;
}
return sharedInstance;
} 
```

另一个可能有线索但到目前为止还没有成功的帖子是[UIViewController 在弹出时没有被释放](https://stackoverflow.com/questions/10664710/uiviewcontroller-not-being-released-when-popped)

我在 ViewDidLoad 中有：

```
 // checks to see if app goes inactive - saves.
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(resignActive) name:UIApplicationWillResignActiveNotification object:nil]; 
```

与 ViewDidUnload 中的对应：

```
[[NSNotificationCenter defaultCenter] removeObserver:self name:UIApplicationWillResignActiveNotification object:nil]; 
```

有没有人有什么建议？

编辑：

```
- (void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{
NSString *identifier = segue.identifier;

if ([identifier isEqualToString: @"Start Game"]){
    gameWindow = (ViewController *)[segue destinationViewController];
    gameWindow.newgame=-1;
    gameWindow.delegate = self;

} else if ([identifier isEqualToString: @"Resume Game"]){
    gameWindow = (ViewController *)[segue destinationViewController];
    gameWindow.newgame=0;
    gameWindow.delegate = self; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T12:48:47.853

我的理论是，某些东西对您的`UIViewController`.

从`segue`您上面发布的代码来看，您似乎保留了对`gameWindow`模态视图控制器的引用。如果是这种情况，那么您需要`__weak`在它的声明前面添加，以便`mapViewController`在您解雇它时它不会保留您。

# web-services - soapUI DataDriven 测试在第一次运行时失败

> ID：13038265
> 
> 赞同：0
> 
> 时间：2012-10-23T19:59:24.763
> 
> 标签：web-services, testing, automation, soapui, data-driven-tests

所以我有以下要求：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
   <soapenv:Header/>
    <soapenv:Body>
     <ns2:GetFacilityRequest xmlns:ns2="http://www.va.gov/VINCIVAFacility">
     <RequestMessageID>123</RequestMessageID>
     <MessageSentDateTime>2012-07-17T13:04:31.238-06:00</MessageSentDateTime>
     <SendingApplication>soapUI</SendingApplication>
     <User>
        <UserID>123</UserID>
     </User>
     <FacilityID>${Facilities#FacilityID}</FacilityID>
     </ns2:GetFacilityRequest>
   </soapenv:Body>
</soapenv:Envelope> 
```

当我运行这个测试时，第一个测试总是在 FacilityID 字段中不发送任何内容并且失败。我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T05:05:33.880

${Facilities#FacilityID} 中的“设施”是什么......对于不同的级别，您可以这样写 ${[scope]propertyName[#xpath-expression]}

其中范围可以是以下文字值之一：

```
#Project# - references a Project property
#TestSuite# - references a TestSuite property in the containing TestSuite
#TestCase# - references a TestCase property in the containing TestCase
#MockService# - references a MockService property in the containing MockService
#Global# - references a global property (optional)
#System# - references a system property
#Env# - references a environment variable
[TestStep name]# - references a TestStep property within the current TestCase 
```

# ruby-on-rails - 获取表单值以用作回形针文件名

> ID：13038267
> 
> 赞同：0
> 
> 时间：2012-10-23T19:59:39.597
> 
> 标签：ruby-on-rails, paperclip

是否可以获取表单字段值并将其用作回形针附件文件名？

`PiecePhoto`模型：

```
belongs_to :piece

has_attached_file :image,
    :styles => {
        :slider => "940x420#",
        :single => "540>",
        :thumb => "60x60#",
        :medium => "140x140#",
        :original => "1024x1024>"
    }, 
    :path => ":attachment/:id/:style/:filename",
    :url => ":attachment/:id/:style/:filename",
    :storage => :s3,
    :bucket => 'monavala',
    :s3_credentials =>"#{Rails.root}/config/s3.yml"

validates_presence_of :image
before_post_process :parameterize_file_name

def parameterize_file_name
    extension = File.extname(image_file_name).gsub(/^\.+/, '')
    filename = File.basename(image_file_name, ".#{extension}").parameterize
    self.image.instance_write(:file_name, "#{filename}.#{extension}")
end 
```

在`filename = File.basename(image_file_name, ".#{extension}").parameterize`我想而不是`image_file_name`从表单字段中获取价值。

**编辑：**

模型是嵌套的

```
Piece
    has_many :piece_photos
    accepts_nested_attributes_for :piece_photos

PiecePhotos
    belongs_to :piece
    has_attached_file :image 
```

我知道在模型中获取表单值会破坏 MVC 模式。还有其他方法吗？

**编辑2：**

试图在这里严格，但我想我得再解释一下。

表单是嵌套的，我有`Collection`那个.`:has_many` `Pieces``:has_many` `PiecePhotos`

`Pieces`可以为每个`Piece`您可以添加的字段添加字段`PiecePhotos`。

我希望该文件名`PiecePhotos`与`Piece`名称 + 一些唯一的字符串或 ID 相同。

所以一切都必须在一个帖子中完成。我不想先上传碎片照片，然后再将它们添加到碎片中。

基本上我只需要获取 Piece 名称并将其用作 PiecePhoto 文件名。

这是表格现在的样子，它仍在开发中。

![表单域](../Images/63b2a8a6189ed90dea47fa42e912de07.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-08-14T19:59:08.267

我知道这是一个老问题，但我这周遇到了同样的问题，终于让它工作了，所以我想我会回答，以防其他人遇到同样的问题。

基本上，回形针能够通过插值（[回形针/插值](https://github.com/thoughtbot/paperclip/wiki/Interpolations)）使用动态路径。为此，您只需在模型顶部添加插值代码

件照片型号：

```
Paperclip.interpolates :fixed_file_name do |attachment, style|
 attachment.instance.fixed_file_name
end 
```

现在你可以在`:fixed_file_name`你的 url 末尾添加或任何你想调用的内容。一定要添加，`:extension`否则文件将被保存而没有。它会自动使用与上传文件相同的扩展名，因此没有任何问题。

```
:path => ":attachment/:id/:style/:fixed_file_name.:extension",
:url => ":attachment/:id/:style/:fixed_file_name.extension", 
```

然后你剩下要做的就是定义它。您甚至可以只使用 rails .parameterize。只需放置`#{image_file_name}`或任何字段名称，然后添加`.parameterize`.

```
def fixed_file_name
 return "#{image_file_name.parameterize}"
end 
```

我承认我只用 Rails 4.2 对此进行了测试，因为那是我正在使用的，但在经历了很多挫折之后我能够让它工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T20:12:53.523

你可以`params[:paramHere]`在你的模型中使用，但这不是最佳实践，所以当你使用它时，首先创建一个副本，这样你就不会改变任何东西。

```
params_copy = params.dup

....
filename = params[:attachment_name] 
```

* * *

**编辑：**

更好的选择是将您的文件名代码移动到`PiecePhotoController` 类似于：

```
def create
  @piece_photo = PiecePhotos.new
  @piece_photo.file_attachment_name = params[:file_attachment_name]

  unless @piece_photo.save do
    #error-handling
  end
end 
```

`file_attachment_name`或者，如果您要更改现有记录的 ，则可以将代码放入其他方法中，这样您就可以调用方法`change_attachment_filename`或其他方法。

* * *

**编辑2：**

但即使是前面的替代方案也不应该是必需的，因为回形针非常简单，这应该足够了：

这是您的表单（显然它可能有更多字段）：

```
<% form_for :piece_photo, :html => { :multipart => true } do |f| %>
  <%= f.file_field :photo %>
<% end %> 
```

现在您所要做的就是`@piece_photo`通过创建记录`@piece_photo = PiecePhotos.create(params[:piece_photo])`，然后您可以像这样显示它：

```
<%= image_tag @piece_photo.photo.url %> 
```

或者

```
<%= image_tag @piece_photo.photo.url(:thumb) %> 
```

查看这篇[博](http://jimneath.org/2008/04/17/paperclip-attaching-files-in-rails.html)文或官方[回形针 github 自述文件](https://github.com/thoughtbot/paperclip)。

# spring - 春季石英时间表表达式

> ID：13038272
> 
> 赞同：0
> 
> 时间：2012-10-23T19:59:49.850
> 
> 标签：spring, cron, quartz-scheduler

Java Spring 调度器石英

我有旧代码，`schedule="*/10 * * * * *"`我不明白这是什么意思？

即使在准备好以下文件后，也无法弄清楚上面的 Cron 表达式是做什么的。 [http://quartz-scheduler.org/api/2.0.0/org/quartz/CronTrigger.html](http://quartz-scheduler.org/api/2.0.0/org/quartz/CronTrigger.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T20:05:47.333

这意味着，每 10 秒开火一次。

对于每分钟的第 10 秒，使用“10 * * * * *”表达式。它每分钟触发一次，其中“*/10 * * * * *”每分钟触发 6 次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T20:05:34.357

这意味着每十秒钟。Quartz cron 表达式以秒开头。请参阅[http://en.wikipedia.org/wiki/Cron](http://en.wikipedia.org/wiki/Cron)。

# iphone - 应用程序在 iOS 5 中崩溃，但在 6 中没有

> ID：13038273
> 
> 赞同：0
> 
> 时间：2012-10-23T19:59:51.033
> 
> 标签：iphone, ios, xcode, ipad

我对 iOS 编程比较陌生。我已经为 6.0 模拟器制作了一些应用程序，并尝试在 5.1 模拟器中运行它们。

他们都撞进去`[self.window makeKeyAndVisible];`了`appdelegate.mm` `didFinishLaunchingWithOptions`。请注意，我必须启用“添加异常断点”才能显示。

1.  我在哪里可以看到 xcode 中的崩溃日志？
2.  我可以告诉 xcode 在新的 API 上警告我吗？我在一个[类似的问题](https://stackoverflow.com/questions/12632834/get-xcode-4-5-to-warn-about-new-api-calls)中找到了 PCH 中的代码段，但我不确定该放什么才能工作。
3.  我了解问题可能是由于 XIB 文件中的错误而发生的。如何检测这些可能的错误？

编辑：是的，我从一个空的 XIB 开始，它不会崩溃。所以它一定是 XIB 错误。我如何检测它们可能是什么类型的错误？我从一个带有 1 个图像和 2 个按钮的简单 xib 中删除了所有连接/插座 - 仍然崩溃。

M。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T20:11:32.270

听起来好像抛出了异常。您需要通过在 Xcode 中的控制台中查看异常是什么。当那里记录一些内容时，它应该出现在中间部分的底部。异常记录在那里。

关于“太新”API 的警告，请尝试我的标题，您可以[在此处获取](https://github.com/mattjgalloway/MJGFoundation/blob/master/Source/Utilities/MJGAvailability.h)。只需下载它，将其添加到您的项目中，然后将其添加到`#import`顶部的 PCH 文件中。

您无法真正轻松地检测到*错误*。你真的需要小心。检测错误的最好方法就是测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T09:54:26.923

正如 Michael 在评论中所发布的，如果您已经为 iOS 6 创建了项目，然后您将部署目标更改为 5.1，那么它就是来自 .xibs 的 Autolayout。

打开每个 .xib，单击“显示实用程序”按钮（视图组中的第三个），然后转到“显示文件检查器”（第一个选项卡），勾选“使用自动布局”并将部署更改为 5.1。（见附件截图）。

![勾选使用自动布局](../Images/9d11beaa0b73e9a5630a476f1ece5767.png)

还要检查链接：[http ://cdrussell.blogspot.gr/2012/07/could-not-instantiate-class-named.html](http://cdrussell.blogspot.gr/2012/07/could-not-instantiate-class-named.html)

# c# - 在格式错误的 xml 中转义属性中的内部引号

> ID：13038276
> 
> 赞同：3
> 
> 时间：2012-10-23T20:00:03.573
> 
> 标签：c#, .net, xml

我有以下包含格式错误的 XML 片段的第三方 xml，我正在尝试使用 XmlTextReader 来阅读它。

```
 <ReplacementDefinitions>
        <Def key="EnclosingFunction.name" value="_jspService(System.Configuration.ConfigurationManager.ConnectionStrings["Upload_Service"].ToString())"/>
        <Def key="PrimaryCall.name" value="print()"/>
        <Def key="PrimaryLocation.file" value="Error.jsp"/>
        <Def key="PrimaryLocation.line" value="20"/>
        <LocationDef path="webapp/jsp/common/Error.jsp" line="20" lineEnd="20" colStart="27" colEnd="0" key="PrimaryLocation"/>
      </ReplacementDefinitions> 
```

XmlTextReader 抛出异常：

```
'Upload_Service' is an unexpected token. Expecting white space. Line 44126, position 123. 
```

它被挂断在：[“Upload_Service”]中的引号。关于如何转义这些引号以便 XmlTextReader 可以解析数据的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T20:14:28.953

您可以尝试使用更容错的 html 解析器（如[HtmlAgilityPack ）解析您的 xml。](http://htmlagilitypack.codeplex.com/)

```
HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();
doc.LoadHtml(xml);

var defs = doc.DocumentNode.Descendants("def")
        .ToDictionary(d=>d.Attributes["key"].Value,d=>d.Attributes["value"].Value); 
```

# objective-c - Xcode：如何在 UIScrollView 上单击图像

> ID：13038279
> 
> 赞同：1
> 
> 时间：2012-10-23T20:00:09.817
> 
> 标签：objective-c, xcode, cocoa, uiscrollview, uiimageview

我正在尝试使用图像列表制作 UIScrollView，这些图像在单击后将切换到不同的图像。案例是模拟选择图像。

我尝试使用 UIButton 而不是 UIImage 并且切换图像非常容易，但是当我单击按钮时无法滚动它们。只有当我在按钮之间单击时它才会滚动。

比我尝试使用 UIImages 并且它很容易滚动，但是单击后我无法切换图像。

我挖了一下，发现了以下帖子：[Xcode：如何在触摸图像时更改图像（相同位置）？](https://stackoverflow.com/questions/2432176/xcode-how-to-change-image-on-touching-at-an-image-same-position)

这似乎是我需要的东西，但我做错了什么。

我的代码：

```
//TouchSimpleView.h
#import <UIKit/UIKit.h>

@interface TouchSimpleView : UIImageView {
    id delegate;
}
@property (retain) id delegate;
@end

@interface NSObject (TouchSimpleView)
-(void)didTouchView:(UIView *) aView;
@end

//  TouchSimpleView.m
#import "TouchSimpleView.h"
@implementation TouchSimpleView
@synthesize delegate;

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
    }
    return self;
}

- (void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    NSLog(@"touchesBagan");
    if(delegate != nil && [delegate respondsToSelector:@selector(didTouchView:)]) {
        [delegate didTouchView:self];
    }
    [super touchesBegan:touches withEvent:event];
}
@end 
```

我在上面这样使用：

```
//  ViewController.h
#import <UIKit/UIKit.h>
#import "TouchSimpleView.h"

@interface ViewController : UIViewController {
    TouchSimpleView *touchView;
    UIImageView *bankImageView;
}

@property (nonatomic, retain) TouchSimpleView *touchView;
@property (nonatomic, retain) UIImageView *bankImageView;
@end

//  ViewController.m
#import "ViewController.h"

@interface ViewController ()
@end

@implementation ViewController
@synthesize touchView;
@synthesize bankImageView;

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    touchView = [[TouchSimpleView alloc] initWithFrame:CGRectMake(0, 0, 100, 100)];
    touchView.delegate = self;
    [self.view addSubview:touchView];

    bankImageView = [[UIImageView alloc] initWithFrame:touchView.frame];
    bankImageView.image = [UIImage imageNamed:@"1.jpg"];
    [touchView addSubview: bankImageView];
}

- (void)didTouchView:(UIView *)aView {
    NSLog(@"view touched; changing image");
}

@end 
```

我在开始时没有提到 UIScrollView，但我想让这个简单的示例正常工作，而不是将 touchView 添加到 UIScrollView。

我是 iOS 编程的初学者。请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T20:24:47.317

确保`UIImageView`属性 `userInteractionEnabled`设置为`YES`.
默认值为`NO`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T19:57:52.360

解决方案是：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.

    touchView = [[TouchSimpleView alloc] initWithFrame:CGRectMake(0, 0, 100, 100)];
    touchView.delegate = self;
    touchView.userInteractionEnabled = YES;
    touchView.image = [UIImage imageNamed:@"1.jpg"];
    [self.view addSubview:touchView];
} 
```

谢谢@Mundi

# c++ - 运行 C++ 程序 Eclipse 时出错（无需构建）

> ID：13038283
> 
> 赞同：0
> 
> 时间：2012-10-23T20:00:20.780
> 
> 标签：c++, c, eclipse, eclipse-cdt

我收到奇怪的错误。我为 c/c++ 配置了我的 Eclipse。当我构建我的 c/c++ 项目时，他们正在成功构建。当我运行我的 c 二进制文件时，它没有显示**任何要构建**的内容，然后实际运行程序并显示输出。

现在，有趣的部分是当我执行 c++ 二进制文件时，它也没有显示任何要构建的内容，也没有显示任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T20:17:26.450

好的有同样的问题。尝试

*   在控制台中查看是否有任何其他先前的进程仍在运行，如果它们执行红色方块（用于强制停止它）至少存在
*   清理你的项目（右键单击项目然后清理），如果这不做交易
*   使用右键单击项目，然后编译。然后再次右键单击该项目，然后使用`run as`，然后选择出现在那里的选项。

希望对你有帮助，祝你好运

# java - 为什么 TestNG 看到了我的包裹，但没有看到我的班级？

> ID：13038284
> 
> 赞同：2
> 
> 时间：2012-10-23T20:00:21.003
> 
> 标签：java, classpath, testng

当我运行时（Windows 7 命令行）：

C:\rest-app\src\main\java\com\mycompany\app\Test>java org.testng.TestNG testng.xml

我得到：

================================================

Suite1 总测试运行：0，失败：0，跳过：0

================================================

这是我的 testng.xml 文件的样子：

```
<!DOCTYPE suite SYSTEM "http://testng.org/testng-1.0.dtd" >

<suite name="Suite1" verbose="1" >
<test name="SandBoxTests"   >
    <packages>
        <package name="com.mycompany.app.Test" />
    </packages>
</test>
</suite> 
```

我在那个包里的班级里有三个测试。

当我将我的 testng.xml 文件更改为：

```
<suite name="Suite1" verbose="1" >
<test name="SandBoxTests"   >
    <classes>
        <class name="com.mycompany.app.Test.SandBoxTests">
            <methods>
                <include name="com.mycompany.app.Test.SandBoxTests.TestA"/>
            </methods>
        </class>
    </classes>
 </test>
</suite> 
```

我得到回应：

[TestNG] [错误] 在类路径中找不到类：com.mycompany.app.Test.SandBoxTests

我的类路径看起来像：

C:\rest-app\lib\ *;C:\rest-app\src\main\java\com\mycompany\app\Test\ *

第一个目录指向我包含的所有 .jar 文件，包括 testng，最后一个目录包含我试图从中运行测试的类文件的位置。我的 testng.xml 文件也在那里。

那么为什么 TestNG 似乎可以很好地找到我的包，但看不到我的课程呢？

我的代码是：

```
package com.mycompany.app.Test;

import com.mycompany.app.RestMethods;
import com.mycompany.app.Test.TestObjects.AutoCompleteList;
import com.mycompany.app.Test.TestObjects.AutocompleteItem;
import com.mycompany.app.Test.TestObjects.Title;
import com.thoughtworks.xstream.XStream;
import org.apache.http.HttpResponse;
import org.testng.Reporter;
import org.testng.annotations.AfterClass;
import org.testng.annotations.BeforeClass;
import org.testng.annotations.Test;

import java.util.HashMap;
import java.util.Map;
import java.util.Properties;

import static org.junit.Assert.assertTrue;

public class SandBoxTests 
```

{ ...

```
@BeforeClass
public void SetupSandBoxTests() throws Exception
{

}

@Test
public void TestA() throws Exception
{
    ...
}

...
} 
```

编辑：我更新了我的类路径以包含具有我的 TestNG 测试的已编译源文件的位置，还包括包含我的 testng.xml 文件的路径的根，但没有任何改变。我补充说：

C:\rest-app\out\production\Main\ *;C:\rest-app\out\production\Main\com\homeaway\app\Test\ *

编辑 10/25：Maven 现在可以正确构建和执行测试，但我仍然无法让 testng 从命令行执行。为了让 Maven 运行我的测试，我必须使用

```
<includes>
    <include>**/*.java</include>
</includes> 
```

代替：

```
<suiteXmlFiles>
    <suiteXmlFile>testng.xml</suiteXmlFile>
</suiteXmlFiles> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T20:05:33.713

您的类路径应该指向包的开始位置，而不是 java 文件本身。

将你的 testng.xml 移动到 src/main/java 并使用这个类路径：

C:\rest-app\lib*;C:\rest-app\src\main\java\

编辑：我意识到您实际上是在尝试直接运行测试套件。这需要在编译的测试类上完成——你的类路径应该指向二进制文件。

但是，如果您使用默认设置，这一切都由 maven 为您处理：

```
src/main/java/ <- your java code
src/test/java/ <- your test code where test-classes are named *Test.java 
```

在你的 pom.xml 中：

```
<dependency>
      <groupId>org.testng</groupId>
      <artifactId>testng</artifactId>
      <version>6.3.1</version>
      <scope>test</scope>
    </dependency> 
```

请参阅：[http ://maven.apache.org/plugins/maven-surefire-plugin/examples/testng.html](http://maven.apache.org/plugins/maven-surefire-plugin/examples/testng.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T12:44:41.037

我认为您的类路径不正确。包含 * 的类路径条目将不匹配类文件。你可以参考[这个](http://docs.oracle.com/javase/7/docs/technotes/tools/windows/classpath.html)来获得一些想法。如果你的类位于`C:\rest-app\out\production\Main\com\homeaway\app\Test\`, then `com\urco\app\Test`是包名的一部分，所以我认为你应该只把 C:\rest-app\out\production\Main\ 放在你的类路径中。

希望有帮助..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T12:27:08.400

你试过了吗

```
<suite name="Suite1" verbose="1" >
<test name="SandBoxTests"   >
    <classes>
        <class name="com.mycompany.app.Test.SandBoxTests">
            <methods>
                <include name="TestA"/>
            </methods>
        </class>
    </classes>
 </test>
</suite> 
```

我认为在方法下它不是在搜索整个类路径。我没试过。但这应该有效

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T20:06:52.877

您的源文件可能不会被您的项目编译。您是否使用 maven 执行测试？

# xna - 延迟 networkState.StartGame

> ID：13038287
> 
> 赞同：1
> 
> 时间：2012-10-23T20:00:35.820
> 
> 标签：xna, client-server

我正在做一个项目，并且对 packetreader/packetwriter 类有疑问。

基本上游戏加载并允许玩家创建或加入会话。当他们选择其中任何一个选项时，它会进入大厅屏幕。这部分工作正常。在大厅屏幕上，他们可以在 3 个不同的选项之间进行选择，然后在准备好后选择开始游戏。这些选项详细说明了要加载什么纹理来代表玩家，并且此时只是不同颜色的方块。一旦所有玩家都点击开始，它就会进入游戏画面。如果较慢的计算机是主机，则它可以正常工作。但是，如果较快的计算机是主机，它会在较慢的计算机有机会完成运行通过 PacketReader 和 PacketWriter 对象的所有更新之前加载到游戏屏幕中。

有没有办法等到所有玩家都完成从这些流中读取数据后再继续？我正在使用来自客户端服务器演示[http://xbox.create.msdn.com/en-US/education/catalog/sample/network_cs](http://xbox.create.msdn.com/en-US/education/catalog/sample/network_cs)的代码和一个名为 NetworkStateManagement 的演示项目（被朋友发现但不记得链接）作为我推理和逻辑的基础。任何帮助将不胜感激。

我得到的例子。在 Halo Reach 中，假设大厅中有 5 个人，玩家 1、2、3、4、5。如果玩家 1 更换了他的一件盔甲，它会在大厅和实际比赛中的其他玩家屏幕上更新。在我的游戏中，每个玩家都由一个彩色方块表示。我想要它，如果玩家 1 选择红色，玩家 2 选择蓝色，它会相应地改变。大厅屏幕由每个玩家的列表和 5 个菜单选项组成。第一个菜单选项是开始游戏，其余选项是玩家可以选择的不同颜色。选择开始游戏时，它会切换网络通用对象中使用的播放器已准备就绪状态。这是我在我的更新函数中的代码，如果玩家是主机并且每个人都将自己标记为准备好，则运行该代码。

```
else if (networkSession.IsHost && networkSession.IsEveryoneReady) 
{ 
     // Before starting the game make sure the server has gone through and updated. 
     // Also go through each player and make sure they have been updated so that no information is left in the packetReader and packetWriter 
     if (packetReader.Length > 0) 
     { 
         UpdateServer(); 
     } 
     // Read any incoming network packets. 
     foreach (LocalNetworkGamer gamer in networkSession.LocalGamers) 
     { 
         if (gamer.IsHost) 
         { 
             ServerReadInputFromClients(gamer); 
         } 
         else 
         { 
             ClientReadGameStateFromServer(gamer); 
         } 
     } 
     // The host checks whether everyone has marked themselves 
     // as ready, and starts the game in response. 
     networkSession.StartGame(); 
} 
```

# python - 用于 Sublime Text 2 插件开发的 pdb 通过 socket 远程调试

> ID：13038293
> 
> 赞同：3
> 
> 时间：2012-10-23T20:01:17.397
> 
> 标签：python, sublimetext2, pdb

我想将 Python pdb 语句放在 Sublime Text 2 插件代码中。问题是这段代码是在嵌入式 Python 中运行的，它不提供使 pdb 正常运行所需的控制台访问（stdin、stdout）。

是否有任何 Python pdb 实现可以通过套接字连接或类似方法工作。插件代码将打开一个用于侦听的套接字，并且使用“pdb 客户端”可以连接到该端口。

然后，当遇到 pdb 断点时，将使用 pdb 客户端进行交互。

# r - 关于为大尺寸随机矩阵生成图像

> ID：13038294
> 
> 赞同：2
> 
> 时间：2012-10-23T20:01:24.873
> 
> 标签：r

我有一个矩阵，其条目可以是 -1、0 或 1。我正在尝试使用颜色来区分这些不同的值，因为它们中的大多数都是 0。我使用以下代码

```
 x<-y<-seq(1:10)
 xcolor<-c("purple3", "green" , "red")
 image(x,y,DiffMatrix,col=xcolor) 
```

出于说明目的，DiffMatrix 是一个 10*10 矩阵，

> [1,] 1 0 0 0 0 1 1 -1 0 0
> 
> [2,] 1 0 0 0 -1 1 1 1 0 0
> 
> [3,] 1 0 0 0 0 1 0 0 0 0
> 
> [4,] 1 0 0 0 0 1 0 0 0 0
> 
> [5,] 1 0 0 0 0 0 0 0 0 0
> 
> [6,] 1 0 0 0 -1 1 0 1 0 0
> 
> [7,] 1 0 0 0 0 0 0 0 0 0
> 
> [8,] 1 0 1 0 0 1 0 0 0 0
> 
> [9,] 1 0 0 0 0 0 0 0 0 0
> 
> [10,] 0 0 0 0 0 0 0 0 0 0

生成的图像是这样的

![在此处输入图像描述](../Images/3c66761bd011b967c336327590eb001d.png)

我的问题是，如果矩阵变得非常大，比如 2000*3000。使用上述方法生成的图形的分辨率将非常低。是否有任何图形方法可以显示这些不同值的分布：我想看看矩阵中出现了多少个“1”，以及哪些位置与“1”相关联；哪些位置与“0”等相关联。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T21:55:12.207

如果您的密度相对较高，请考虑`points`为您的值绘制和分配部分透明的颜色。这样，在有很多“1”的地方，例如，点会重叠并使图像变暗。

一旦习惯了，分配这种颜色的最简单方法是:-)，将颜色设置为 hex: `some_color<- #0F66F088`，其中前三对标识 RGB 的强度，最后一对标识透明度。StackOverflow 档案中有几个例子，但我忘记了:-(

# java - 泛型和（超级？）类型标记可以帮助构建类型安全的新闻聚合器吗？

> ID：13038298
> 
> 赞同：6
> 
> 时间：2012-10-23T20:01:38.207
> 
> 标签：java, generics, reflection

我有这个基本`News`界面

```
interface News {
    String getHeader();
    String getText();
} 
```

和具体的类，如`SportsNews`和`FinancialNews`，提供具体的方法，如`getStockPrice()`，`getSport()`等等。新闻旨在发送到

```
interface Subscriber<N extends News> {
    void onNews(N news);
} 
```

问题是如何注册和维护订阅。我尝试的第一种方法是使用 central ，在对象和`Aggregator`之间保持映射，但很快这种方法就变得不可行了。这是所需的 API`Class<T>``Set<Subscriber<T>>`

```
public class Aggregator {

    public <N extends News> void subscribe(Subscriber<N> subscriber) {
        // TODO somehow (super type token) extract N and 
        // add the item to the set retrieved by getSubscribersFor()
    }

    public <N extends News> void dispatch(N news) {
        for (Subscriber<N> subscriber: getSubscribersFor(news.getClass())) {
            subscriber.onNews(news);
        }
    }

    private <N extends News> Set<Subscriber<N>> getSubscribersFor(Class<N> k) {
        // TODO retrieve the Set for the specified key from the Map
    }
} 
```

有没有其他选择可以保证类型安全？Java能完全解决这个问题吗？我将[这个小演示放在网上](http://pastebin.com/LVbcw0Nv)，以帮助您更好地了解问题的真正含义。

**更新**

另一种方法是`Aggregator`使用实​​际的新闻类型参数化。这没关系，只是这是一个先有鸡还是先有蛋的问题：现在需要找到一种方法来检索聚合器。在 Java 中没有办法表达以下内容

```
interface News {
    static Aggregator<CurrentClass> getAggregator();
} 
```

*   `static`方法不能`abstract`
*   无法在类型参数中引用*当前类型*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T21:26:07.437

这就是我要做的。如果您可以使用 Guava（由 Google 编写和使用的 Google 库），我建议您先向下滚动并查看其他解决方案。

## 香草爪哇

首先，首先添加一个从订阅者那里获取类的方法：

```
public interface Subscriber<N extends News> {
    void onNews(N news);
    Class<N> getSupportedNewsType();
} 
```

然后在实施时：

```
public class MySubscriber implements Subscriber<MyNews> {

    // ...

    public Class<MyNews> getSupportedNewsType() {
        return MyNews.class;
    }
} 
```

在您的聚合器中，包含未键入键和值的映射：

```
private Map<Class<?>, Set<Subscriber<?>> subscribersByClass = ... ; 
```

另请注意，Guava 有一个 multimap 实现，它将为您执行多个值的这个键。只需谷歌“Guava Multimap”，您就会找到它。

要注册订阅者：

```
public <N extends News> void register(Subscriber<N> subscriber) {
    // The method used here creates a new set and puts it if one doesn't already exist
    Set<Subscriber<?>> subscribers = getSubscriberSet(subscriber.getSupportedNewsType());
    subscribers.add(subscriber);
} 
```

并派遣：

```
@SuppressWarnings("unchecked");
public <N extends News> void dispatch(N news) {
    Set<Subscriber<?>> subs = subscribersByClass.get(news.getClass());
    if (subs == null)
        return;

    for (Subscriber<?> sub : subs) {
        ((Subscriber<N>) sub).onNews(news);
    }
} 
```

注意这里的演员表。`register`这将是安全的，因为方法和接口之间的泛型性质`Subscriber`，只要没有人做一些荒谬的错误，比如原始类型`implements Subscriber`（没有泛型参数）。注释禁止来自编译器的有关此强制转换的`SuppressWarnings`警告。

以及您检索订阅者的私有方法：

```
private Set<Subscriber<?>> getSubscriberSet(Class<?> clazz) {
    Set<Subscriber<?>> subs = subscribersByClass.get(news.getClass());
    if (subs == null) {
        subs = new HashSet<Subscriber<?>>();
        subscribersByClass.put(subs);
    }
    return subs;
} 
```

您的`private`方法和字段不需要是类型安全的。无论如何它不会引起任何问题，因为 Java 的泛型是通过擦除实现的，所以这里的所有集合无论如何都只是一组对象。试图让它们类型安全只会导致讨厌的、不必要的强制转换，这与它的正确性无关。

重要的*是*您的`public`方法是类型安全的。泛型的声明方式`Subscriber`和公共方法 on `Aggregator`，打破它的唯一方法是通过原始类型，就像我上面所说的那样。简而言之，只要没有不安全的强制转换或原始类型，就可以*保证*`Subscriber`每个传递给 register的类型都接受您正在注册的类型。

 ** * *

## 使用番石榴

或者，您可以查看 Guava 的`EventBus`. IMO，对于您正在尝试做的事情，这会更容易。

Guava 的`EventBus`类使用注解驱动的事件分派而不是接口驱动。这真的很简单。您将不再有`Subscriber`界面。相反，您的实现将如下所示：

```
public class MySubscriber {
    // ...

    @Subscribe
    public void anyMethodNameYouWant(MyNews news) {
        // Handle news
    }
} 
```

`@Subscribe`注释向 Guava 发出信号，它应该在`EventBus`以后记住该方法以进行调度。然后注册它并调度事件，使用一个`EventBus`实例：

```
public class Aggregator {
    private EventBus eventBus = new EventBus();

    public void register(Object obj) {
        eventBus.register(obj);
    }

    public void dispatch(News news) {
        eventBus.dispatch(news);
    }
} 
```

这将自动找到接受`news`对象的方法并为您进行调度。您甚至可以在同一个课程中多次订阅：

```
public class MySubscriber {
    // ...

    @Subscribe
    public void anyMethodNameYouWant(MyNews news) {
        // Handle news
    }

    @Subscribe
    public void anEntirelyDifferentMethod(MyNews news) {
        // Handle news
    }
} 
```

或者对于同一订阅者中的多种类型：

```
public class MySubscriber {
    // ...

    @Subscribe
    public void handleNews(MyNews news) {
        // Handle news
    }

    @Subscribe
    public void handleNews(YourNews news) {
        // Handle news
    }
} 
```

最后，`EventBus`尊重层次结构，所以如果你有一个扩展的类`MyNews`，例如`MyExtendedNews`，那么调度`MyExtendedNews`事件也将传递给那些关心`MyNews`事件的人。接口也是如此。这样，你甚至可以创建一个全局订阅者：

```
public class GlobalSubscriber {
    // ...

    @Subscribe
    public void handleAllTheThings(News news) {
        // Handle news
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T21:35:06.313

您*需要*将`class`参数发送到`dispatch`. 以下为我编译，不确定是否满足您的需求：

```
import java.util.Set;

interface News {
    String getHeader();
    String getText();
}

interface SportsNews extends News {}

interface Subscriber<N extends News> {
    void onNews(N news);
}

class Aggregator {

    public <N extends News> void subscribe(Subscriber<N> subscriber, Class<N> clazz) {
        // TODO somehow (super type token) extract N and 
        // add the item to the set retrieved by getSubscribersFor()
    }

    public <N extends News> void dispatch(N item, Class<N> k) {
        Set<Subscriber<N>> l = getSubscribersFor(k);
        for (Subscriber<N> s : l) {
            s.onNews(item);
        }
    }

    private <N extends News> Set<Subscriber<N>> getSubscribersFor(Class<N> k) {
        return null;
        // TODO retrieve the Set for the specified key from the Map
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T20:09:04.170

`subscriber.getClass()`您可以获取, by的超类型`Class.getGenericSuperclass/getGenericInterfaces()`，然后检查它们以提取`N`真正的类型，通过`ParameterizedType.getActualTypeArguments()`

例如

```
public class SportsLover implements Subscriber<SportsNews>
{
    void onNews(SportsNews news){ ... }
}

if subscriber is an instance of SportsLover

Class clazz = subscriber.getClass();   // SportsLover.class

// the super type: Subscriber<SportsNews>
Type superType = clazz.getGenericInterfaces()[0];  

// the type arg: SportsNews
Type typeN = ((ParameterizedType)superType).getgetActualTypeArguments()[0];  

Class clazzN = (Class)typeN; 
```

这适用于简单的情况。

对于更复杂的情况，我们需要更复杂的类型算法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T20:18:46.577

一种方法可以是使用[TypeToken](http://google-gson.googlecode.com/svn/tags/1.1.1/docs/javadocs/com/google/gson/reflect/TypeToken.html)来保存`N`

```
 Type typeOfCollectionOfFoo = new TypeToken<Collection<Foo>>(){}.getType() 
```

使您的代码工作

将您的班级声明为

```
public static class Aggregator<N extends News> 
```

将方法签名更改为

```
 private Set<Subscriber<N>> getSubscribersFor() { 
```

你完成了。*

# hibernate - Java Hibernate 对象不刷新

> ID：13038299
> 
> 赞同：2
> 
> 时间：2012-10-23T20:01:40.777
> 
> 标签：hibernate, session, object

我正在研究休眠。我正在测试一个简单的 Java 以在 2 个单独的会话中加载 2 个实体。我加载了第一个 book 对象，让主线程休眠 5s，这期间我在 db 中更改了 book 的名称。之后，第二个会话将再次加载该书。但是书名还是一样的。预计何时也会改变。

请帮忙。我写了一个 servlet 程序，但同样的问题，数据库更改后更新的数据不显示。

这是我的代码：

```
import java.util.Date;
import java.util.HashSet;
import java.util.Iterator;
import java.util.List;
import java.util.Set;

import org.hibernate.CacheMode;
import org.hibernate.Hibernate;
import org.hibernate.Query;
import org.hibernate.Session;
import org.hibernate.SessionFactory;
import org.hibernate.Transaction;
import org.hibernate.cfg.Configuration;

import org.hibernate.stat.Statistics;

/**
 * @author Guruzu
 * 
 */
public class Launch_3_5 {

    private static SessionFactory sessionFactory;

    public static Session getSession() {
        if (sessionFactory == null) {
            sessionFactory = new Configuration().configure()
                    .buildSessionFactory();
        }
        Session hibernateSession = sessionFactory.openSession();
        return hibernateSession;
    }

    public static SessionFactory getSessionFactory() {
        if (sessionFactory == null) {
            sessionFactory = new Configuration().configure()
                    .buildSessionFactory();
        }
        return sessionFactory;
    }

    public static void main(String[] args) {
        Session session1 = getSessionFactory().openSession();

        try {

            Transaction tx = session1.beginTransaction();

            Book book1 = (Book) session1.get(Book.class, (long) 1);

            System.out.println("Book: " + book1.getName());

        //  session1.flush();
        } finally {

            session1.close();
        }

        try {
            Thread.sleep(5000);
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        Session session2 = getSessionFactory().openSession();

        try {

            Book book2 = (Book) session2.get(Book.class, (long) 1);
            System.out.println("Book: " + book2.getName());

        } finally {

            session2.close();
        }

    }
} 
```

Book6_1.hbm.xml

```
<?xml version="1.0" encoding="UTF-8"?> 
<!DOCTYPE hibernate-mapping PUBLIC 
"-//Hibernate/Hibernate Mapping DTD 3.0//EN" 
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping>
    <class name="Book" table="Book6_1">

        <id name="book_id" type="long" column="BOOK_ID">
            <generator class="increment">
            </generator>
        </id>
        <property name="isbn" type="string">
            <column name="ISBN" length="50" not-null="true" unique="true" />
        </property>
        <property name="name" type="string">
            <column name="BOOK_NAME" length="100" not-null="true" />
        </property>
        <property name="publishDate" type="date" column="PUBLISH_DATE" />
        <property name="price" type="int" column="PRICE" />

    </class>
</hibernate-mapping> 
```

休眠.cfg.xml

```
<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE hibernate-configuration PUBLIC
"-//Hibernate/Hibernate Configuration DTD//EN"
"http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">

<hibernate-configuration>
    <session-factory>
        <property name="hibernate.connection.driver_class">com.mysql.jdbc.Driver</property>
        <property name="hibernate.connection.url">jdbc:mysql://localhost:3306/hibernatetutorial</property>
        <property name="hibernate.connection.username">root</property>
        <property name="hibernate.connection.password">root</property>
        <property name="hibernate.connection.pool_size">10</property>
        <property name="show_sql">true</property>
        <property name="hibernate.dialect">org.hibernate.dialect.MySQLDialect</property>

        <mapping resource="Book_6_1.hbm.xml" />

    </session-factory>
</hibernate-configuration> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T20:19:28.823

您的第二个会话正在访问[二级缓存](http://docs.jboss.org/hibernate/orm/4.1/devguide/en-US/html/ch06.html#d5e1364)。如果您不希望它这样做，您可以在配置文件 (use_second_level_cache = false) 或映射文件中完全关闭缓存（从 hbm.xml 中删除“缓存”元素）。

[或者您可以使用CacheMode.REFRESH](http://docs.jboss.org/hibernate/orm/3.5/api/org/hibernate/CacheMode.html#REFRESH)将查询更改为始终访问数据库

```
 Session session2 = getSessionFactory().openSession();
    session2.setCacheMode(CacheMode.REFRESH);
    try {
        Book book2 = (Book) session2.get(Book.class, (long) 1);
    } finally {
        session2.close();
    } 
```

# javascript - 在弹出窗口问题中使用 javascript

> ID：13038301
> 
> 赞同：0
> 
> 时间：2012-10-23T20:01:45.913
> 
> 标签：javascript, jquery, datatable, popup

我正在尝试将数据表添加到我的弹出表内容中。

我有

```
var popup = window.open("popup.html", "popup","width=1000, height=600, scrollbars=yes");

   popup.document.write(
                        $('#popupDataTable').dataTable( {
                        'bPaginate': false,
                        'bLengthChange': false,
                        'bFilter': true,
                        'bSort': true,
                        'bInfo': false,
                        'bAutoWidth': false,
                        'bDestroy':true
                    })
                 )

  popup.document.write(
                "<table id='popupDataTable'>"+
                "<thead><tr><th>name</th><th>job</th><th>email</th><th>phone</th><th>address</th><th>gender</th></thead><tbody>")

        //adding td data codes.....

  popup.document.write("</tbody></table>"); 
```

但是，在我的弹出窗口中，我看到的只是

```
[object Object]
<table>
 // my table contents display properly here, but datatable codes don't effect the table.
</table> 
```

我的数据表 javascript 不会影响我的弹出窗口表。我该如何解决这个问题？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T20:26:45.787

试试这个。[jsfiddle](http://jsfiddle.net/bPe5R/6/)。确保您已在弹出窗口中包含与 dataTable 相关的 JavaScript。

我建议您将所有这些代码放在一个 js 文件中，并将该文件包含在弹出窗口中。因为 popup.document.body 在您尝试访问它时可能不可用（主要在 IE 中）。

```
var html = "<table id='popupDataTable'>"+
                        "<thead><tr><th>name</th><th>job</th><th>email</th><th>phone</th><th>address</th><th>gender</th></thead><tbody>"

                //adding td data codes.....

          html  += "</tbody></table>";
    popup.document.body.innerHTML = html;

var s = popup.document.createElement("script");
s.innerHTML = "  $('#popupDataTable').dataTable( {"+
                                "'bPaginate': false,"+
                                "'bLengthChange': false,"+
                                "'bFilter': true,"+
                                "'bSort': true,"+
                                "'bInfo': false,"+
                                "'bAutoWidth': false,"+
                                "'bDestroy':true"+
                            "})";
popup.document.body.appendChild(s); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T20:33:23.697

小提琴：http: [//jsfiddle.net/tariqulazam/bBPE5/1/](http://jsfiddle.net/tariqulazam/bBPE5/1/)

在您的页面中包含以下脚本

```
<script src="Scripts/jquery-1.8.2.min.js" type="text/javascript"></script>
<script src="Scripts/jquery.dataTables.min.js" type="text/javascript"></script> 
```

现在使用以下代码

```
<script>
    $(document).ready(function () {
        var popup = window.open("popup.htm", "popup", "width=1000, height=600, scrollbars=yes");

        popup.document.write(
            "<table id='popupDataTable'>" +
                "<thead><tr><th>name</th><th>job</th><th>email</th><th>phone</th><th>address</th></thead><tbody>" +
                    "<tr class=\"gradeA\">" +
        "<td>Trident</td>" +
        "<td>Internet" +
        "    Explorer 5.5</td>" +
        "<td>Win 95+</td>" +
        "<td class=\"center\">5.5</td>" +
        "<td class=\"center\">A</td>" +
    "</tr>" +
    "<tr class=\"gradeA\">" +
    "   <td>Trident</td>" +
    "   <td>Internet" +
    "        Explorer 6</td>" +
    "   <td>Win 98+</td>" +
    "   <td class=\"center\">6</td>" +
    "   <td class=\"center\">A</td>" +
    "</tr>" +
    "<tr class=\"gradeA\">" +
    "   <td>Trident</td>" +
    "   <td>Internet Explorer 7</td>" +
    "   <td>Win XP SP2+</td>" +
    "   <td class=\"center\">7</td>" +
    "   <td class=\"center\">A</td>" +
    "</tr></tbody></table>");
        var table = popup.document.getElementById("popupDataTable");
        $(table).dataTable();
    });

</script> 
```

不要忘记添加一些虚拟数据来测试数据表功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T20:13:01.373

在将表格 html 写入窗口后，您需要运行 $('#popupDataTable').dataTable(...) 脚本，以便表格存在以进行操作。如所写， $('#popupDataTable').dataTable(...) 在创建表之前运行，因此不会执行任何操作 - 如您所见。

```
var popup = window.open("popup.html", "popup","width=1000, height=600, scrollbars=yes");

popup.document.body.htm(
            "<table id='popupDataTable'>"+
            "<thead><tr><th>name</th><th>job</th><th>email</th><th>phone</th><th>address</th><th>gender</th></thead><tbody>")

    //adding td data codes.....

popup.document.body.htm("</tbody></table>");

popup.document.body.htm(
                    $('#popupDataTable').dataTable( {
                    'bPaginate': false,
                    'bLengthChange': false,
                    'bFilter': true,
                    'bSort': true,
                    'bInfo': false,
                    'bAutoWidth': false,
                    'bDestroy':true
                })
             ) 
```

# javascript - $.post 在 for 循环中

> ID：13038304
> 
> 赞同：2
> 
> 时间：2012-10-23T20:02:08.000
> 
> 标签：javascript, jquery

我正在使用循环和 $.post 来填充我网站上的字段，但是它非常不可靠，它有时有效，有时无效，我不确定问题是什么，如果有人知道问题可能是什么非常感激。

```
for (var i = 0; i < arrayOfObjects.length; i++) {
          var object = arrayOfObjects[i];

            var option = {};
            option['username'] = object.username;
            option['COOKIE'] = $.cookie('Favorites');
            option['INITIAL'] = 'A';

            $.post("/user/favorite.do", option, function (resp) {
              var obj = $.parseJSON(resp);
              $("#AddFavorite:eq("+i+")").html(obj.txt);

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T20:04:53.043

当您遍历数组时，`i`正在递增。由于 $.post 是异步的，它的成功回调在循环完成后触发，因此所有成功回调都`i`在数组的最后一个索引处触发。$.each 很容易`jquery way`修复它：

```
$.each(arrayOfObjects,function(i){
      var object = this;

        var option = {};
        option['username'] = object.username;
        option['COOKIE'] = $.cookie('Favorites');
        option['INITIAL'] = 'A';

        $.post("/user/favorite.do", option, function (resp) {
          var obj = $.parseJSON(resp);
          $("#AddFavorite:eq("+i+")").html(obj.txt);
        });

}); 
```

然而，这仍然是一种非常低效的方法。您应该将所有这些请求合并为一个请求。

非 jquery 替代方案是：

```
for (var i = 0; i < arrayOfObjects.length; i++) {
    (function(i){
      var object = arrayOfObjects[i];

        var option = {};
        option['username'] = object.username;
        option['COOKIE'] = $.cookie('Favorites');
        option['INITIAL'] = 'A';

        $.post("/user/favorite.do", option, function (resp) {
          var obj = $.parseJSON(resp);
          $("#AddFavorite:eq("+i+")").html(obj.txt);
        });
    })(i);
} 
```

此外，您的 $.post 可以简化为：

```
 $.post("/user/favorite.do", option, function (resp) {
          $("#AddFavorite:eq("+i+")").html(resp.txt);
        },"json"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T00:02:53.710

我尝试了 Kevin B 的 $.each 解决方案，但它仍然无法正常工作，所以我最终将 $.post 包装在一个函数中，我发布了我的解决方案，因为它可能对遇到同样问题的人有所帮助。

```
 fillfavorite(0); 

      function fillfavorite(i) {
      var object = arrayOfObjects[i];

        var option = {};
        option['username'] = object.username;
        option['COOKIE'] = $.cookie('Favorites');
        option['INITIAL'] = 'A';

        $.post("/user/favorite.do", option, function (resp) {
          var obj = $.parseJSON(resp);
          $("#AddFavorite:eq("+i+")").html(obj.txt);

          var g = i+1;

          i++;

          if(g<arrayOfObjects.length) { fillfavorite(i);}

        });

      } 
```

# html - 在图像上排列标题

> ID：13038306
> 
> 赞同：0
> 
> 时间：2012-10-23T20:02:16.913
> 
> 标签：html, css, twitter-bootstrap

我有这个例子：http: [//jsfiddle.net/WkpL9/](http://jsfiddle.net/WkpL9/)
HTML：

```
<div class="span2">
    <div class="image-container">
        <img alt="" src="http://placehold.it/150x120"/>
        <p>asdadsadasdasdsadasdasdasdasdsadsad</p>
    </div>
</div> 
```

CSS：

```
.image-container {
    position: relative;
    margin-left: auto;
    margin-right: auto;
    width: 100%;
}

.image-container img {
    max-height: 150px;
}

.image-container p {
    white-space: nowrap;
    width: 100%;
    overflow: hidden;
    text-overflow: ellipsis;
    position: absolute;
    bottom: 0px;
} 
```

我希望图像的标题是： 1\. 位于图像上方（在顶层）。2.垂直放置在图像的底部。3.用省略号。4.不会脱离包装的div。

这可能吗？

我正在使用推特引导程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T20:24:47.893

我会用 position: relative; 和位置：绝对；，像这样：

```
.image-container {
    position: relative;
    margin-left: auto;
    margin-right: auto;
    width: 100%;
}

.image-container img {
    max-height: 150px;

    position: relative;

}

.image-container p {
    white-space: nowrap;
    width: 100%;
    overflow: hidden;
    text-overflow: ellipsis;
    position: absolute;
    bottom: 0px;

    position: absolute;
    top: 0;
    left: 0;

    text-align: center /* Not sure if I misunderstood you with this */

}

.image-container img {
    margin-top: 15px;
} 
```

关于省略号，您可以 `&hellip;` 在文本之后添加：那是你的意思吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T20:14:32.777

1-添加`top:0x;`到`.imageContainer p`4-`bottom`
使用`word-wrap: break-word`。`.imageContainer p`您还必须为包含的 div设置一个`height`in并将元素的宽度设置为. 这是您的自动换行[示例。](http://jsfiddle.net/WkpL9/1/)`px``p``100%`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T20:07:47.137

使用[z-index](http://www.w3schools.com/cssref/pr_pos_z-index.asp)指定顺序，因此您可以放置​​即两个 div 相互重叠，并指定哪个在顶部或底部。至于定位，您可以使用负值（即`top: -50px;`）将元素“提升”到其目标位置之上。

# svn - 通过删除 .svn/text-base 文件来减小工作副本的大小？

> ID：13038311
> 
> 赞同：1
> 
> 时间：2012-10-23T20:02:33.990
> 
> 标签：svn, version-control

我想通过删除 SVN 使用的基于文本的文件来减小本地工作副本的大小。有svn命令吗？我可以禁用这些文件的创建吗？如果我手动删除它们会导致问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T01:11:21.327

在 Subversion 中，`.svn`目录用于跟踪您的 Subversion 工作副本状态。在 Subversion 1.7 之前的版本中，每个目录都有该`.svn`目录的副本。在`.svn`目录中存储了您的 Subversion 客户端使用的几个项目：

*   `base`文件。这些是您已签出的副本。这允许 Subversion 进行 diffs 并验证文件是否已被修改，而无需纠缠服务器。这是在构建 Subversion 时做出的设计决策。硬盘空间便宜，网络流量可能很慢。
*   工作目录中文件的属性和属性值。
*   谁拥有本地工作目录
*   有关工作目录的签出和修订位置的信息。

一般的策略是不要接触`.svn`目录，除非你想永远破坏你的本地工作目录的副本。内部没有用户可维修的部件。

如果您只是想要该 URL 的 Subversion 存储库修订的内容并且不打算执行任何类型的版本控制操作，您可以执行 a`svn export`而不是`svn checkout`. `svn checkout`这将为您提供与无目录相同的目录布局`.svn`。

当然，如果您执行`svn export`，您的目录将与 Subversion 存储库没有连接。您无法更新目录、进行更改并将这些更改提交回 Subversion 等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-19T09:26:19.380

我知道这是一个旧线程，但我还是回答了。

我认为 SVN 结帐会保留结帐后的所有历史记录。如果要清除此问题，请考虑提交所有更改，删除本地检出文件夹并再次检出该文件夹。

清理不会清理 .svn 目录中的内容。

# c# - SharpDX Texture2D 转位图

> ID：13038312
> 
> 赞同：1
> 
> 时间：2012-10-23T20:02:37.473
> 
> 标签：c#, bitmap, texture2d, sharpdx

我在使用 SharpDX 时遇到问题。我转换位图，使用 lockBits 方法锁定位，然后创建一个 DataStream 并从中构建一个 Texture2D。这似乎工作得很好，没有发生错误。现在我有以下问题。我想将 Texture2D 转换回位图。有一种名为 Texture2D.ToStream(size, texture2D, stream) 的方法，但是当我尝试这样做时，只会发生错误。谁能帮我解决这个问题？转换为 Image 或 WriteableBitmap 也可以。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-07T18:26:04.270

我找到了一个解决方案：

```
var inputTex2D = Texture2D.FromStream<Texture2D>(device, inputMemoryStream, (int)inputMemoryStream.Length, new ImageLoadInformation()
        {
            Depth = 1,
            FirstMipLevel = 0,
            MipLevels = 0,
            Usage = ResourceUsage.Default,
            BindFlags = BindFlags.ShaderResource,
            CpuAccessFlags = CpuAccessFlags.None,
            OptionFlags = ResourceOptionFlags.None,
            Format = Format.R8G8B8A8_UNorm,
            Filter = FilterFlags.None,
            MipFilter = FilterFlags.None,
        }); 
```

我的 DirectX 版本是 11.0

# c++ - 如何提高代码的精度

> ID：13038318
> 
> 赞同：2
> 
> 时间：2012-10-23T20:02:49.623
> 
> 标签：c++, floating-point, precision, floating-accuracy, floating-point-precision

如何提高以下准确性（精度）？

```
struct Degree_Minutes { signed int degrees; signed int minutes; double seconds; };
Degree_Minutes geo_dec_to_deg (double dec)
{
    Degree_Minutes degrees_minutes;
    signed int degrees, minutes;
    double remainder, temp, seconds;

    remainder = fmod(dec, 1);
    degrees_minutes.degrees = dec - remainder;
    temp = remainder*60;
    remainder = fmod(temp,1);
    degrees_minutes.minutes = temp-remainder;
    degrees_minutes.seconds = remainder*60;

    return degrees_minutes;
}

    double geo_deg_to_dec (Degree_Minutes degrees)
{
    double decimal = degrees.degrees + (degrees.minutes/60) + (degrees.seconds/60);
    return decimal;
}

int main(int argc, char **argv)
{
    Degree_Minutes deg;
    double decimal = 38.898556;

    deg = geo_dec_to_deg(decimal);
    cout << "Results of geo_dec_to_deg function: \n" << decimal << " was converted to " << deg.degrees << " degrees, " << deg.minutes << " minutes, " << deg.seconds << " seconds.\n";
    decimal = geo_deg_to_dec(deg);
    cout << "Results of geo_dec_to_deg function: \n" << deg.degrees << " degrees, " << deg.minutes << " minutes, " << deg.seconds << " seconds was converted to " << decimal << "\n";

    return EXIT_SUCCESS;
} 
```

编辑：忘记添加这里有一个结构：

```
struct Degree_Minutes { signed int degrees; signed int minutes; double seconds; }; 
```

当您从十进制转换为度/分/秒，然后再转换回十进制时，您会得到 38.9134，而原始值为 38.898556。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T20:07:56.573

由于意外的整数除法，您遇到了舍入/截断错误。要获得正确的双精度，您需要隐式转换`degrees.minutes`and `degrees.seconds`，`double`如下所示：

```
double decimal = degrees.degrees + (degrees.minutes/60.0) + (degrees.seconds/3600.0); 
```

注意秒字段中的`60`->`60.0`和 60 到 3600 的更正。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T20:16:33.713

有两个问题。

首先，结构的`minutes`成员`Degree_Minutes`被声明为整数类型，因此`degrees.minutes/60`将整数除以整数，这会产生截断的整数结果。将其更改为`degrees.minutes/60.`产生浮点结果。

二`degrees.seconds/60`是不正确。这应该`degrees.seconds/3600`或`degrees.seconds/60`应该添加到degrees.minutes，然后将总和除以60。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T20:16:05.260

```
#include <stdlib.h>
#include <iostream>
#include <math.h>

using namespace std;

struct Degree_Minutes { signed int degrees; signed int minutes; double seconds; };

Degree_Minutes geo_dec_to_deg (double dec)
{
    Degree_Minutes degrees_minutes;
    signed int degrees, minutes;
    double remainder, temp, seconds;

    remainder = fmod(dec, 1);
    degrees_minutes.degrees = dec - remainder;
    temp = remainder*60.0;
    remainder = fmod(temp,1);
    degrees_minutes.minutes = temp-remainder;
    degrees_minutes.seconds = remainder*60.0;

    return degrees_minutes;
}

double geo_deg_to_dec (Degree_Minutes degrees)
{
    double decimal = degrees.degrees + (degrees.minutes/60.0) + (degrees.seconds/60.0/60.0);
    return decimal;
}

int main(int argc, char **argv)
{
    Degree_Minutes deg;
    double decimal = 38.898556;

    deg = geo_dec_to_deg(decimal);
    cout << "Results of geo_dec_to_deg function: \n" << decimal << " was converted to " << deg.degrees << " degrees, " << deg.minutes << " minutes, " << deg.seconds << " seconds.\n";
    cout << "This should be: 38deg 53' 54.801\"" << endl;
    cout << endl;
    decimal = geo_deg_to_dec(deg);
    cout << "Results of geo_dec_to_deg function: \n" << deg.degrees << " degrees, " << deg.minutes << " minutes, " << deg.seconds << " seconds was converted to " << decimal << "\n";
    cout << "This should be: 38.898556" << endl;

    return EXIT_SUCCESS;
} 
```

你几乎拥有它。您需要通过明确指定小数来强制双除（如另一个答案中所示），但您还需要将秒数除以 60 两次。在实践中，我可能会将其更改为`degrees.seconds/3600`，但我保留它是为了说明。

# html - 某些 Div 没有出现

> ID：13038320
> 
> 赞同：-2
> 
> 时间：2012-10-23T20:02:56.417
> 
> 标签：html, css

我有基于 php 的博客。它一直运行良好，但我重新布局页面并且某些 div 现在没有显示。我想不通为什么？这是标记。它是 div 中的类 hr。

```
<div class="hr grid_12 clearfix">&nbsp;</div>

        <!-- Caption Line -->
        <h2 class="grid_12 caption clearfix">Kerry's<span> Blog</span><br /> Keeping you up-to-date on our latest news.</h2>

        <div class="hr">&nbsp;</div>

        <!-- Column 1 /Content -->
        <div class="grid_8">

            <!-- Blog Post -->
            <cms:pages masterpage='blog.php' 
            start_on=k_archive_date
            stop_before=k_next_archive_date
            paginate='1' limit='3' >
            <div class="post">
            <!-- Post Title -->
                <h3 class="title"><a href="<cms:show k_page_link />"><cms:show k_page_title /></a></h3>
                <!-- Post Data -->
                <cms:if k_page_foldertitle >
                    <cms:set my_category=k_page_foldertitle />
                    <cms:else />
                    <cms:set my_category='Updates' />
              </cms:if >
                <p class="sub"><a href="#"><cms:show my_category /></a> &bull; <cms:date k_page_date format='jS M, y'/> &bull; <a href="#"><cms:show k_comments_count /></a></p>
                <div class="hr dotted clearfix">&nbsp;</div>
                <!-- Post Image -->
                <cms:if blog_image >
                <img class="thumb img_left" alt="" src="<cms:show blog_image />" /></cms:if>
                <!-- Post Video -->
                <cms:if video ><cms:show video /></cms:if>
                <!-- Post Content -->
                <cms:excerptHTML count='75' ignore='img'><cms:show blog_content /></cms:excerptHTML>
                <!-- Read More Button -->
                <p class="clearfix"><a href="<cms:show k_page_link />" class="button right"> Read More...</a></p>
            </div>
            <div class="hr clearfix">&nbsp;</div>

            <cms:if k_paginated_bottom >
            <!-- Blog Navigation -->
            <p class="clearfix">
                <a href="<cms:show k_paginate_link_next />" class="button float">&lt;&lt; Previous Posts</a>
                <a href="<cms:show k_paginate_link_prev />" class="button float right">Newer Posts >></a>
            </p>
            </cms:if>
            </cms:pages >
        </div> 
```

这是CSS

```
.hr {
border:none; 
border-bottom:1px solid #f0f0f0; 
border-top:1px solid #d6d6d6; 
clear:both; height:0; 
line-height:0; 
width:100%; 
font-size:0; 
padding:0 ;margin-bottom :20px;
}
.grid_12 {
display:inline; 
float:left; 
position:relative; 
margin-left:10px; 
margin-right:10px;
} 
```

我错过了什么吗？我不太懂php

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T20:16:54.643

你有网站的链接吗？

你能在源代码中找到丢失的 div 吗？如果你是，那么它可能是一个 CSS 问题。如果在源代码中找不到，则可能是 PHP 问题。

您使用的是什么 CMS 系统/博客系统？

# javascript - 递归函数中的奇怪行为

> ID：13038325
> 
> 赞同：1
> 
> 时间：2012-10-23T20:03:20.417
> 
> 标签：javascript, jquery, recursion

有人可以解释为什么第二个函数不会给我们带来堆栈溢出吗？

```
//stack overflow on call
function test1() {
    test1();
}
//no stack overflow, nor beer
function test2() {
    setTimeout(test2, -500); //back to the future
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-23T20:04:54.807

因为它不是递归的。该`test2`函数能够返回，并且稍后`setTimeout`通过创建的匿名函数安排另一个调用。

显然，你无法回到过去。`setTimeout`有最短持续时间。

* * *

FWIW，匿名函数是不必要的。你可以做`setTimeout(test2, -500)`。

# installscript - InstallScript 中的 % 运算符对字符串有什么作用？

> ID：13038327
> 
> 赞同：4
> 
> 时间：2012-10-23T20:03:32.720
> 
> 标签：installscript

我正在查看一些 InstallScript 代码。

对于整数，我习惯于将 % 运算符取模。我对字符串不熟悉。

```
if (szSomeString % szSomeOtherString) then
   // do something
endif; 
```

这个简写是什么？

我意识到这对谷歌来说应该很简单，但我还没有找到任何运气。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T20:18:00.243

Per the [InstallScript Reference Guide](http://kb.flexerasoftware.com/doc/DocumentRepository/Installation/InstallShield/InstallShield%202012%20Professional/01_Public/Product_Manual/InstallShield2012InstallScriptReferenceGuide.pdf):

```
Find String Operator (%) Locates a substring in another string 
```

# c - 从文件中读取不同长度的行

> ID：13038328
> 
> 赞同：3
> 
> 时间：2012-10-23T20:03:38.880
> 
> 标签：c, arrays, file, line

我希望能够创建一个循环，逐行读取，然后将每行开头的数字捕获到一个 int 数组中，并将字符捕获到一个二维字符数组中。我以为我可以有一个像这样的循环，

```
while (fscanf(file, "%d %c %c %c", &num, &f, &e, &h)==4){} 
```

但那是如果 C 可以读取字符串。我如何阅读每一行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T20:07:10.930

要阅读一行，您可以使用：-

```
 while ( fgets ( line, sizeof line, file ) != NULL ) 
```

或者你可以试试

```
 while ((read = getline(&line, &len, fp)) != -1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T20:10:30.063

```
 #include <stdio.h>
      #include <stdlib.h>
      int main()
      {
          char matrix[500][500], space;
          int numbers[500], i = 0, j;
          FILE *fp = fopen("input.txt", "r");

          while(!feof(fp))
          {
                fscanf(fp, "%d", &numbers[i]); // getting the number at the beggining
                fscanf(fp, "%c", &space); // getting the empty space after the number
                fgets(matrix[i++], 500, fp); //getting the string after a number and incrementing the counter
          }
        for(j = 0; j < i; j++)
            printf("%d %s\n", numbers[j], matrix[j]);
      } 
```

变量 'i' 正在计算你有多少行。如果您有超过 500 行，您可以更改该值或使用动态向量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T20:16:07.207

那这个呢：

```
 char buf[512];
    int  length = 0;

    while(fgets(&buf[0], sizeof(buf), stdin)) {
        length = strlen(&buf[0]);
        if(buf[length-1] == '\n')
            break
        /* ...
        ... 
        realloc or copy the data inside buffer elsewhere.
        ...*/
    }

/* ... */ 
```

# javascript - 处理多个页面级绑定提供程序

> ID：13038329
> 
> 赞同：3
> 
> 时间：2012-10-23T20:03:40.447
> 
> 标签：javascript, knockout.js

这是我的场景。

我想创建一个单独的 KnockoutJS 绑定提供程序来处理我的页面上的翻译，它将读取`data-alias`页面加载时存在或页面加载后创建的任何元素的属性（可能在由敲除呈现的子模板中创建）并检索翻译为别名并将它们应用为元素的文本。我仍然希望能够独立调用`ko.applyBindings(model, element);`以处理页面的`data-bind`属性，但我希望单独调用，`ko.applyBindings`以便可以将翻译应用于`data-alias`属性。任何人都知道我如何支持两者并让他们独立行事？

这是该过程应该如何进行的示例。

HTML 标记/模板：

```
<fieldset>
    <legend data-alias="SomeTitle"></legend>
    <div class="row-container">
        <div class="control-group">
            <label class="control-label" data-alias="LabelAlias"></label>
            <div class="controls">
                <input type="text" data-bind="value: SomeObservable" />
            </div>
        </div>
        <div class="control-group">
            <label class="control-label" data-alias="AnotherLabelAlias"></label>
            <div class="controls">
                <input type="text" data-bind="value: AnotherObservable" />
            </div>
        </div>
    </div>
</fieldset> 
```

在页面加载时，将调用绑定提供程序的数据别名应用绑定：

```
<script type="text/javascript">
    $(function() {
        // Lets assume translations is a dictionary of alias to translation
        // that is loaded with the page synchronously
        ko.applyBindings(translations); 
    });
</script> 
```

同样在页面加载时，将有一个服务调用来检索页面所需的数据，并在检索时将绑定应用于数据：

```
<script type="text/javascript">
    $(function() {
        $.ajax({...}) // Omitted for brevity
            .done(function(data) {
                var viewModel = new my.namespace.SomeViewModel(data);
                ko.applyBindings(viewModel);
            });
    });
</script> 
```

预期效果：

*   页面加载。
*   应用翻译。
*   启动服务调用以检索数据。
*   服务调用返回。
*   数据被转换为视图模型并绑定到页面（并保留翻译）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T15:40:24.190

对从服务调用返回的数据使用敲除。

但是不要对翻译使用敲除——你想要在那里做的事情可以在没有敲除这样的框架的情况下处理。您可以这样做：

```
var translations = {};
translations["LabelAlias"] = "Bonjour";
translations["AnotherLabelAlias"] = "Au Revoir";

$("[data-alias]").each(function(index, element){
    var aliasName = element.getAttribute("data-alias");
    var aliasValue = translations[aliasName];
    $(element).text(aliasValue);
});    ​ 
```

这是一个工作小提琴：http: [//jsfiddle.net/qjGwR/](http://jsfiddle.net/qjGwR/)

**更新** 您提到您已经动态加载了要翻译的内容。不是问题！我已经更新了小提琴 - [http://jsfiddle.net/qjGwR/1/](http://jsfiddle.net/qjGwR/1/)。

```
function translate(translations, selector) {
  if (selector == null) { selector = ''; }
  $(selector + " [data-alias]").each(function(index, element){
    var aliasName = element.getAttribute("data-alias");
    var aliasValue = translations[aliasName];
    $(element).text(aliasValue);
  });
}

translate(helloTranslations);

// Add something to the DOM
var moreContent = '<label class="control-label" data-alias="ThirdLabelAlias">Three</label><div class="controls"><input type="text" data-bind="value: somethingElse" /></div>'

$('#moreContent').html(moreContent);
translate(helloTranslations, '#moreContent');​ 
```

我们将翻译行为移动到一个方法中，传入我们想要应用的翻译，并告诉它我们想要翻译 DOM 的哪一部分。

# ios - 将 heimdal kerberos 5 实现编译为 iOS 的静态 C 库

> ID：13038330
> 
> 赞同：3
> 
> 时间：2012-10-23T20:03:43.710
> 
> 标签：ios, static-libraries, kerberos

我正在尝试将 heimdal 编译成一个静态库以使用[cyrus-sasl](https://github.com/syzdek/iOSPorts) iOS 端口。我想知道是否有人能够使 OpenLDAP for iOS 与 GSSAPI 身份验证机制一起工作，或者针对 Active Directory 工作。

非常感谢任何帮助！

# django - 使用 Django Haystack 在单个模型中搜索

> ID：13038334
> 
> 赞同：5
> 
> 时间：2012-10-23T20:04:23.390
> 
> 标签：django, search, django-haystack

我正在使用 haystack 对我的项目进行完整的站点搜索，该项目在书籍、作者、事件和视频模型中进行搜索。

然后我有主要的书籍页面，我只想针对 Books 模型进行搜索。

我找到了这篇文章： [如何在 Haystack 中只返回特定类型的索引对象](https://stackoverflow.com/questions/9466012/how-to-return-only-indexed-objects-of-a-specific-type-in-haystack)

但是，它似乎对我不起作用。我正在使用简单的后端进行本地测试，我知道确实存在一些问题，但我不确定这是否相关。

我的 search_indexes.py 文件如下所示：

```
class BookSearchIndex (SearchIndex):
    text = CharField(document=True, use_template=True)
    title_web = CharField(model_attr='title_web', boost=1.125)
    on_sale_date = CharField(model_attr='on_sale_date')

    def index_queryset(self):
        return Book.objects.active().filter(publish_level='published')

site.register(Book, BookSearchIndex) 
```

在我看来，如果通过了搜索查询，则仅返回带有该查询的书籍，否则显示所有书籍：

```
search = self.request.GET.get('search', None)
if search:
    clean_query = SearchQuerySet().query.clean(search)
    sqs = SearchQuerySet().models(Book).filter(content=clean_query).order_by('-on_sale_date')
else:
    sqs = SearchQuerySet().models(Book).order_by('-on_sale_date) 
```

搜索会根据搜索查询正确过滤项目，但仍会返回所有模型。它不仅限于 Book 模型。

这部分似乎没有效果：

```
SearchQuerySet().models(Book) 
```

谁能帮我弄清楚我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T23:53:24.907

我想到了。我试图使用简单的搜索在本地进行测试，因为我们还没有 solr 后端设置。

使用 .models() 函数不适用于简单的后端。

# android - 使用touchUtils进行android测试：在没有ID的RelativeLayout中抓取按钮

> ID：13038337
> 
> 赞同：0
> 
> 时间：2012-10-23T20:04:34.933
> 
> 标签：android, testing, button

我正在尝试在`touchUtil`没有 id 的相对布局中的按钮上做一些事情。通常它看起来像：

```
relativelayout rl1 = (relativelayout) base.findViewById(R.id.layout1);
button btn = (button) rl1.findviewbyId(R.id.buttonX);
touchUtil(btn); 
```

但我正在处理的是 ScrollView、RelativeLayout、LinearLayout（没有 id），然后是按钮。

如何使用 touchutils 按下该按钮？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T20:08:50.910

您始终可以使用[`ViewGroup#getChildAt()`](http://developer.android.com/reference/android/view/ViewGroup.html#getChildAt%28int%29)基于索引检索视图。

* * *

**另外**
如果你有这样的布局：

```
<ScrollView>
    <RelativeLayout>
        <LinearLayout>
            <Button/>
            <Button/>
        </LinearLayout>
        <TextView/>
    </RelativeLayout>
</ScrollView> 
```

然后你可以像这样遍历 ViewTree：

```
FrameLayout content = (FrameLayout) findViewById(android.R.id.content);
ScrollView scrollView = (ScrollView) content.getChildAt(0);
RelativeLayout relativeLayout = (RelativeLayout) scrollView.getChildAt(0);
LinearLayout linearLayout = (LinearLayout) relativeLayout.getChildAt(0);

Button button1 = (Button) linearLayout.getChildAt(0);
Button button2 = (Button) linearLayout.getChildAt(1);

TextView textView = (TextView) relativeLayout.getChildAt(1); 
```

**最好的**方案是简单地要求布局设计人员将 id 添加到您想要的元素中。

# xml - 使用 XSLT 显示前 N 个 XML 元素

> ID：13038338
> 
> 赞同：0
> 
> 时间：2012-10-23T20:04:41.860
> 
> 标签：xml, xslt, xml-parsing

我一直用这个把头撞在墙上。我有一系列这样的 XML：

```
 <INTELLCONT id="33954082817" dmd:lastModified="2011-04-05T13:38:05" dmd:startDate="2010-12-30" dmd:endDate="2010-12-30">
        <CONTYPE>Journal Article</CONTYPE>
        <CONTYPEOTHER/>
        <CLASSIFICATION>Learning and Pedagogical Research</CLASSIFICATION>
        <STATUS>Not Accepted</STATUS>
        <TITLE>The Use of Alternative Quiz Formats to Enhance Students’ Experiences in the Introductory Accounting Course</TITLE>

    </INTELLCONT>
    <INTELLCONT id="11473068032" dmd:lastModified="2012-08-30T14:12:05" dmd:startDate="2009-03-17" dmd:endDate="2010-11-30">
        <CONTYPE>Journal Article</CONTYPE>
        <CONTYPEOTHER/>
        <CLASSIFICATION>Learning and Pedagogical Research</CLASSIFICATION>
        <STATUS>Published</STATUS>
        <TITLE>"Using Debate to Enhance Critical Thinking in the Accounting Classroom: Two Examples of Debates on the Sarbanes-Oxley Act and Tax Policy Issues</TITLE> 
```

（为简洁起见，我删除了其他一些标签）。对于任何 xml 文件，可能有 10-20 个这些`<INTELLCONT>`标签。我需要显示 中某些字段的前五个字段的值`<INTELLCONT>`，但仅显示`<PUBLISH>`标记设置为“已发布”的条目。这是到目前为止的xsl：

```
 <xsl:choose>
    <xsl:when test="dm:Data/dm:Record/dm:INTELLCONT/dm:STATUS = 'Published'">
        <xsl:for-each select="dm:Data/dm:Record/dm:INTELLCONT[1]">
            <xsl:if test="dm:STATUS = 'Published'">
                <p><xsl:value-of select="dm:TITLE" />, 
                    <xsl:choose>
                        <xsl:when test="dm:JOURNAL/dm:JOURNAL_NAME !=''">
                            <i><xsl:value-of select="dm:JOURNAL/dm:JOURNAL_NAME"/></i>, 
                        </xsl:when>
                        <xsl:otherwise>
                            <xsl:text> </xsl:text>
                        </xsl:otherwise>
                    </xsl:choose>
                    <xsl:choose>
                        <xsl:when test="dm:DTM_PUB !=''">
                            <xsl:value-of select="dm:DTM_PUB"/>,
                        </xsl:when>
                        <xsl:otherwise>
                           <xsl:text> </xsl:text>
                       </xsl:otherwise>
                   </xsl:choose>
                    <xsl:value-of select="dm:DTY_PUB"/></p>
            </xsl:if>
        </xsl:for-each>
    </xsl:when>
</xsl:choose> 
```

这将显示第一个条目，但前提是`<STATUS`> 设置为“已发布”。这很好，但就像在上面的 xml 中一样，因为`<STATUS>`不是“已发布”，所以什么都没有显示。这也很好，但如果我把这段代码放进去，然后把这一行列举`<xsl:for-each select="dm:Data/dm:Record/dm:INTELLCONT[1]">`出来，`<xsl:for-each select="dm:Data/dm:Record/dm:INTELLCONT[5]">`我会得到所有发布的条目`<STATUS>`，但如果发布的条目少于 5 个，那么我不会得到我需要的 5 个条目的列表。

我知道必须有更好的方法来做到这一点，但我还没有想出来。任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T20:37:02.363

我不完全理解您对要求的解释，但您似乎以完全错误的方式进行。您需要了解模板规则，这是在 XSLT 中编写代码的自然方式！

如果要显示 STATUS 为 Published 的前五个 INTELLCONT 元素，请使用

```
<xsl:apply-templates select="dm:INTELLICONT[dm:STATUS='Published'][position() &lt;= 5]"/> 
```

然后编写一个模板规则来显示它们：

```
<xsl:template match=:dm:INTELLICONT">
 <p><xsl:apply-templates/></p>
</xsl:template> 
```

然后为各个字段编写模板规则：

```
<xsl:template match="dm:JOURNAL[dm:JOURNAL_NAME != '']">
  <i><xsl:value-of select="dm:JOURNAL_NAME"/></i>
</xsl:template> 
```

当您看到专家编写的 XSLT 代码时，您会发现很少有 for-each、choose 或 if 指令。

# networking - 在 c/cpp (refined) 中寻找 tcp 堆栈实现

> ID：13038341
> 
> 赞同：1
> 
> 时间：2012-10-23T20:04:58.897
> 
> 标签：networking, tcp

我正在寻找 TCP 堆栈的 c/c++ 实现（以集成到 VS2010 项目中）。

我的意图是将它用作高度干预 tcp-stack 锻炼的测试环境的一部分，并针对另一个经过测试的 tcp-stack 运行它。

例如，我希望能够：

1.  丢弃特定数据包
2.  在特定时间复制特定数据包
3.  以特定延迟延迟 ACK，有/无搭载
4.  ETC

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T16:22:57.583

那么“轻量级 IP”，[http](http://en.wikipedia.org/wiki/LwIP) ://en.wikipedia.org/wiki/LwIP呢？它是在类似 BSD 的许可证下开源的。我没有使用它，但它听起来不错，而且我认为它已经存在了一段时间。

顺便说一句：我认为您可以通过使用数据包捕获库 winpcap ( [http://www.winpcap.org](http://www.winpcap.org) ) 的接口来完成上述任何任务。通过它的接口，可以很容易地访问网卡上的任何数据包，然后继续传递、删除或删除它，然后再插入（即延迟）。也许这是一个更容易满足您需求的解决方案。

# javascript - 为什么 LOOP 会立即终止？

> ID：13038343
> 
> 赞同：-3
> 
> 时间：2012-10-23T20:05:15.753
> 
> 标签：javascript

我正在使用搜索功能在字符串中搜索匹配项，比如下面的 JS ......比如说，找到了第一个结果，嗯.......找到了第二个，嗯....第三个 id 没有找到，然后控制/光标退出循环，我的意思是，循环立即终止，我认为 ELSE 条件将触发并继续迭代直到长度结束......但在中间它终止！请。建议我修复或提供新的 JS，谢谢

```
// OriginalFields is a string, its fillled with fields list with space seperator
myArrayGrey = greyFields.split(" ");
for (var i = 0; i < myArrayGrey.length; i++) {
    var returnValue = OriginalFields.search(myArrayGrey[i]);
    if (returnValue != -1) {
        //grey the field 
        // and
        // make access = "readOnly";
    };
    else {;
        // do nothing
        // just for my testing am doing app.alert (not found)
    };
};​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T20:10:08.443

您有一个语法错误（实际上是两个）。删除 . 的右括号后`if`和. 的左括号后的分号`else`。你也可以去掉括号`else`和`for`右括号之后的其他分号（尽管它们不会导致语法错误——你的问题是分隔`if`和`else`）：

```
// OriginalFields is a string, its fillled with fields list with space seperator
myArrayGrey = greyFields.split(" ");
for (var i = 0; i < myArrayGrey.length; i++) {
    var returnValue = OriginalFields.search(myArrayGrey[i]);
    if (returnValue != -1) {
        //grey the field 
        // and
        // make access = "readOnly";
    } else {
        // do nothing
        // just for my testing am doing app.alert (not found)
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T20:07:49.790

由于您的 OP 不包含太多详细信息，因此最可能的答案是因为`myArrayGrey = greyFields.split(" ");`返回一个空数组。

# ruby - 如何在 ruby 1.9.3 中获得真正的随机数？

> ID：13038350
> 
> 赞同：4
> 
> 时间：2012-10-23T20:05:41.487
> 
> 标签：ruby, random, gem

问题在标题中。有什么宝石可以做到这一点吗？试过RealRand，但似乎对我不起作用。也许我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T20:50:18.100

Ruby 1.9 引入了一个名为 的类[`Random`](http://www.ruby-doc.org/core-1.9.3/Random.html)，它基于一种名为 Mersenne Twister 的算法生成伪随机数。对于个人层面的实际使用，这可能就足够了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T20:50:33.273

彼得是对的。[然而，我们可以通过 openssl 和安全](http://rdoc.info/stdlib/securerandom/1.9.3/SecureRandom)的 random 获得非常好的随机性。

代码：

```
 require "securerandom"
 puts SecureRandom.random_number 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T20:52:41.120

我认为您可能需要多考虑一下您的问题。0 到 1 之间的实数比负无穷和无穷大之间的整数要多。[看看](http://en.wikipedia.org/wiki/Cardinality_of_the_continuum)关于实数基数的维基百科文章。

但是，您可以轻松地生成范围和精度内的实随机数。假设您想生成一个介于 0 和 1 之间、精度为 16 位的实随机数。

```
r = Random.new
r.rand
=> 0.7182182166496581 
```

您可以调整此解决方案以生成介于 -10 和 10 之间的实数。

```
 r.rand(-10.0..10.0)
 => 7.00152804654363 
```

查看[http://www.ruby-doc.org/core-1.9.3/Random.html](http://www.ruby-doc.org/core-1.9.3/Random.html)和[How to get a random number in Ruby](https://stackoverflow.com/questions/198460/how-to-get-a-random-number-in-ruby)了解更多信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-23T20:44:44.367

[我在http://realrand.rubyforge.org/](http://realrand.rubyforge.org/)找到的“真实”随机数（非伪随机数）的最佳定义和来源 简而言之，它规定“真实”随机数不能由计算机和算法，它只能由自然产生。我知道说自然只是一堆算法的理论，所以我认为这是超出我水平的辩论的食物。无论如何，该站点提供了一些站点，这些站点从诸如“定时由与计算机连接的 Geiger-Müller 管检测到的连续对放射性衰变”之类的事物中生成随机数。

我对由此产生的评论和答案感兴趣，我 +1。

# android - Google Play 安排 android 应用交付

> ID：13038352
> 
> 赞同：-1
> 
> 时间：2012-10-23T20:05:46.543
> 
> 标签：android, google-play

有什么方法可以安排我的 Android 应用在 Google Play 上的可用性吗？

我需要确保我的应用程序将获得批准，以便我的客户可以从事应用程序的营销工作。

亲切的问候，贝尔纳多

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T20:08:26.367

Google Play 没有审批流程。只需提交您的应用程序，它就会在一小时到 24 小时内显示在搜索结果等中。

只要确保您的应用程序没有违反任何政策，否则它可能会被删除，并可能导致您的帐户被禁止。

# entity-framework - 模块化棱镜应用中的实体连接

> ID：13038354
> 
> 赞同：0
> 
> 时间：2012-10-23T20:05:52.273
> 
> 标签：entity-framework, prism, connection-string

**连接字符串元：**

```
 res://Xz.Business.xModule/Model.RecordzModel.csdl|
                res://Xz.Business.xModule/Model.RecordzModel.ssdl|
                res://Xz.Business.xModule/Model.RecordzModel.msl; 
```

* * *

**错误：**

*将 Business.xModule 添加到配置文件的 URI s 后：*

```
+       base    {"Unable to load the specified metadata resource."} System.Data.EntityException {System.Data.MetadataException} 
```

-- *将 Xz.Business.xModule 添加到配置文件的 URI s 之后：*

```
+       base    {"Unable to resolve assembly 'Xz.Business.xModule'.":null}  System.IO.IOException {System.IO.FileNotFoundException} 
```

* * *

**xModule 信息：**

程序集名称：Business.xModule

默认命名空间：Xz.Business.xModule

* * *

**文件夹位置：**

解决方案文件夹和 xModule 模块文件夹

解决方案位置..\x1\x2\xModule 位置

模块位置解决方案位置..\Build

“..”表示一个文件夹返回。

* * *

**备注：**

1.  模块具有构建后操作，将结果程序集放入“构建文件夹”
2.  配置的其他部分是正确的。
3.  使用了 Unity、SQL CE、EF 5.0。

如何解决此实体连接问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T21:29:07.030

如果你想使用另一个数据库、orm 或服务，你会后悔这样做。您可以使用[存储库模式](http://www.remondo.net/repository-pattern-example-csharp/)。这将所有这些抽象出来。您可以在一个处理数据的模块中实现所有存储库，而其他模块可以通过依赖注入使用它们。[这个线程](https://stackoverflow.com/questions/3175/repository-pattern-tutorial-in-c-sharp)解释更多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T15:27:29.627

如果我在加载嵌入式资源时遇到问题，我通常使用 ILDASM 或反射器来获取资源名称。在 EF 连接字符串中，您可以提供保存为文件或嵌入资源的工件的路径。`res://`表示嵌入的资源。在`res://`您输入确切的资源名称后（如 ILDASM 所示）。如果资源在文件夹中，您可以`res://*/{resourceName}`说您要在所有文件夹中搜索。

# arrays - 用汇编语言打印字符串数组

> ID：13038355
> 
> 赞同：1
> 
> 时间：2012-10-23T20:05:54.180
> 
> 标签：arrays, assembly, printing, masm, irvine32

我正在尝试将字符串添加到数组中，以便以后从数组中打印，这就是我所拥有的。我错过了什么？

```
INCLUDE Irvine32.inc
.data
array dword 20 dup (0)
str1 byte 20 dup (0)
temp dword ?
n dword ?
count dword 0

mes1 db "press 1 to add an element, 2 to print, 3 to quit    ", 0

.code
main PROC

start:
    lea edx, mes1
    call writestring
    call readdec
    cmp eax, 1
    je add1
    cmp eax, 2
    je print2
    cmp eax, 3
    je stop

add1:
    call readin
    jmp done

print2:
    call print
    jmp done

done:
    jmp start

stop:
    exit

main ENDP

readin proc
    lea edx, str1
    mov ecx, sizeof str1
    call readstring

    mov ebx, count
    mov eax, [array]
    mov temp, eax
    add temp, ebx
    lea esi, temp
    mov ebx, [str1]
    mov [esi], ebx

readin endp

print proc
    mov esi, 0
    mov ecx, n

    @@do:
        mov eax, Array[esi]
        call writedec
        call crlf
        add esi, 4
        @@while: loop @@do

        ret
print endp
END main 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-12-28T11:05:44.427

最简单的解决方案是创建一个字节数组，其中包含一行中以空字符结尾的字符串。这不是真正的“字符串数组”。成分：一个大缓冲区和一个指向该缓冲区有效部分末尾的指针。

```
INCLUDE Irvine32.inc

.DATA

    arrayptr    DWORD OFFSET array
    array       BYTE 4096 DUP (?)

    mes1        BYTE 10, "press 1 to add an element, 2 to print, 3 to quit    ", 0

.CODE

readin PROC
    mov edx, arrayptr           ; Argument for ReadString: Pointer to memory
    mov ecx, 10                 ; Argument for ReadString: maximal number of chars
    call ReadString             ; Doesn't change EDX
    test eax, eax               ; EAX == 0 (got no string)
    jz done                     ; Yes: don't store a new arrayptr
    lea edx, [edx+eax+1]        ; EDX += EAX + 1
    mov arrayptr, edx           ; New pointer, points to the byte where the next string should begin
    done:
    ret
readin ENDP

print PROC
    lea edx, array              ; Points to the first string

    L1:
    cmp edx, arrayptr           ; Does it point beyond the strings?
    jae done                    ; Yes -> break

    call WriteString            ; Doesn't change EDX
    call Crlf                   ; Doesn't change EDX

    scan_for_null:
    inc edx
    cmp BYTE PTR [edx], 0       ; Terminating null?
    jne scan_for_null           ; no -> next character
    inc edx                     ; Pointer to next string

    jmp L1

    done:
    ret
print ENDP

main PROC
start:
    lea edx, mes1
    call WriteString
    call ReadDec
    cmp eax, 1
    je add1
    cmp eax, 2
    je print2
    cmp eax, 3
    je stop
    jmp next                    ; This was missing in the OP

add1:
    call readin
    jmp next                    ; Just a better name than in the OP

print2:
    call print
    jmp next                    ; Just a better name than in the OP

next:                           ; Just a better name than in the OP
    jmp start

stop:
    exit
main ENDP

END main 
```

数组的元素通常都具有相同的大小（上面示例中的*字节*）。因此，可以使用该索引对元素的位置进行索引并轻松计算。确定某个字符串在字节数组中的位置并不容易。必须从头开始扫描数组以查找以字符串结尾的零（查看 block `scan_for_null`）。“字符串数组”实际上是指向字符串的指针数组：

```
INCLUDE Irvine32.inc

.DATA

    bufptr      DWORD OFFSET buf    ; Pointer to the beginning of free buffer
    buf         BYTE 4096 DUP (?)   ; Space for 4096 characters
    array       DWORD 20 DUP (?)    ; Space for 20 pointers
    arrayindex  DWORD 0             ; Index of the next free pointer in array

    mes1        BYTE 10, "press 1 to add an element, 2 to print, 3 to quit    ", 0

.CODE

readin PROC
    mov edx, bufptr             ; Argument for ReadString: Pointer to memory
    mov ecx, 10                 ; Argument for ReadString: maximal number of chars
    call ReadString             ; Doesn't change EDX
    test eax, eax               ; EAX == 0 (got no string)
    jz done                     ; Yes: don't change bufptr
    mov esi, arrayindex
    mov [array + esi * 4], edx  ; Store the actual bufptr
    inc arrayindex
    lea edx, [edx+eax+1]        ; EDX += EAX + 1 (new bufptr)
    mov bufptr, edx             ; New pointer, points to the byte where the next string should begin
    done:
    ret
readin ENDP

print PROC
    xor esi, esi                ; First index

    L1:
    cmp esi, arrayindex         ; Beyond last index?
    jae done                    ; Yes -> break

    mov edx, [array + esi * 4]  ; Argument for WriteString: pointer to a null-terminated string
    call WriteString
    call Crlf

    inc esi
    jmp L1

    done:
    ret
print ENDP

main PROC
start:
    lea edx, mes1
    call WriteString
    call ReadDec
    cmp eax, 1
    je add1
    cmp eax, 2
    je print2
    cmp eax, 3
    je stop
    jmp next

add1:
    call readin
    jmp next

print2:
    call print
    jmp next

next:
    jmp start

stop:
    exit
main ENDP

END main 
```

# javascript - 2x Javascript：.split 多人游戏性能和可能的包丢失

> ID：13038359
> 
> 赞同：0
> 
> 时间：2012-10-23T20:06:13.120
> 
> 标签：javascript, node.js, socket.io, multiplayer

嘿，我还是 javascript 的新手。

我正在使用 NodeJS、socket.io 和 javascript 开发多人服务器。

我正在玩我在网站上找到的服务器脚本。它使用 .split 向客户端发送多个信息字符串。客户端然后使用一个数组来根据它接收到的顺序来确定使用 .split 数据的目的。

```
int(Socket.LastDataElement(2))
int(Socket.LastDataElement(3)) 
```

我的第一个问题是这些包裹是否有可能以错误的顺序出现，或者没有正确清除？

**可能的结果：**

健康=西瓜

速度 = 芝士蛋糕

**或者**

错误的球员射出子弹！

* * *

**第二个问题：**

从我目前的角度来看，与将 Health、X、Y、Z、Attack 等作为单个包发送的替代方案相比，发送**.split字符串听起来非常聪明。**但它真的可以节省带宽和时间吗？还是因为我是菜鸟所以才这样看。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T20:34:06.970

首先，没有。它们永远不会出现乱序（对您的应用程序而言）。作者将数据交给 TCP（[传输控制协议](http://en.wikipedia.org/wiki/Transmission_Control_Protocol)）实现，该实现完成将数据传输到正确远程机器上正确进程的所有工作。读者将耐心等待一个不同的、有序的数据块，然后处理它。根据您的应用层协议（WebSockets、Sockets.io），可能会发送整个数据报，或者一次只发送一点字符数据。

你是微观管理。这是 TCP 要处理的问题。无论您的消息大小如何，您的 TCP 实现（可能在操作系统级别）都会按照它认为适合传输的方式对其进行分块。除非您要发送大量数据（价值从千字节到兆字节）并且您需要能够一次处理一点，否则您无需担心数据的分块和数据包大小。

一般来说，确保你的传输是原子的（你的应用程序在另一端做你想做的事情所需的最少信息量），并且你不会对乱序数据包有任何问题，你会就带宽而言，很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T20:19:56.503

第一个问题有点难以理解，但是....

根据我使用 socket.io 的经验，消息总是按照客户端发送的顺序到达，并且您永远不会丢失任何消息。但是，可能存在这样一种情况，例如，发送了 10 条消息，分散在 2 秒内，但由于延迟问题，在 10 条消息的快速连续中收到另一条消息 - 就好像它们都同时发出一样（再次，订单仍然保留）。根据游戏中发生的情况，有时这并不重要。但其他时候，您实际上关心的是每条消息发送之间经过了多长时间（例如玩家在 2 秒内按下触发器 10 次或在 5 毫秒内按下 10 次）。然后你被迫做一些事情，比如给消息加上时间戳，并理解另一端的时间戳。

至于第二个问题：在不太了解 socket.io 或 WebSockets 的底层实现的情况下，我仍然猜测你越是集中在一条消息中，你的情况就越好——如果不是在带宽方面，然后至少在性能和延迟方面。

在 javascript 中，处理程序函数（处理接收到的 json 的函数）在每条消息中调用一次，因此将消息集中在一起可以确保处理程序被调用的次数更少。

# c# - 使用 Visual Studio 2010 为 Outlook 2007 和 2010 VSTO 4.0 加载项创建共享代码

> ID：13038360
> 
> 赞同：2
> 
> 时间：2012-10-23T20:06:13.493
> 
> 标签：c#, .net, vsto, outlook-addin

我正在创建一个使用 .NET 4.0 VSTO、针对 Outlook 2010/2007 的 Visual Studio 2010 的 Outlook 加载项。

我将创建一个不同的功能区，因此需要创建 3 个项目： - 2010 功能区 - 2007 功能区 - 共享代码

我的问题是，如何在共享代码中获取代表（即当用户单击功能区/命令栏按钮时，如果可能，我希望它共享相同的代码）。

```
private void btnRibbon_Click(object sender, RibbonControlEventArgs e)
{
       //Event triggered by user clicking ribbon button
} 
```

还是我必须为此复制 2007/2010 年的代码库？

谢谢！！米

# zend-framework2 - 从doctrine2 ODM 绑定Zend2 表单数据

> ID：13038361
> 
> 赞同：7
> 
> 时间：2012-10-23T20:06:13.687
> 
> 标签：zend-framework2, doctrine-odm

除了使用之外，还有没有更好的方法将数据从一个学说 2 ODM 实体类绑定到一个 Zend2 表单`bind()`？

如果是这样，那会是什么？我是否只需将数据作为数组检索并传递每个单独的字段？我正在为此苦苦挣扎，而且很可能使它变得比需要的更难。

当我调用该`bind()`函数时，它会输出引用默认水合器的 Zend 错误。我需要在我的实体类中做一些特别的事情吗？

编辑：这是 Zend 抛出的确切错误

> ~\vendor\zendframework\zendframework\library\Zend\Stdlib\Hydrator\ArraySerializable.php:35
> 
> Zend\Stdlib\Hydrator\ArraySerializable::extract 期望提供的对象实现 getArrayCopy()

他们让我觉得我需要：

1.  使用 Zends 水合器（我必须研究如何实施）或
2.  使用学说 2 的水合器（我还必须找出实现的最佳方法）

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-22T00:00:08.250

为了使 Zend\Form 能够水合你的实体，你需要在你的实体类中有类似的东西：

```
public function getArrayCopy()
{
    return get_object_vars($this);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-04T05:46:53.040

在你.../Model/XXXXTable.php 中
定义一个想要获取记录的函数。

```
 $id = (int)$id;
    $row = $this->tableGateway->select(array('id'=>$id));
    $row = $row->current();    //this line is very important 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-06-26T07:37:31.537

我在 module.config.php 中使用以下代码来使用教义水合器

```
$form = new ...;
$dm = $sm->get('doctrine.documentmanager.odm_default');
$form->setHydrator(new \DoctrineModule\Stdlib\Hydrator\DoctrineObject($dm));
return $form; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-24T14:43:34.367

我在我的实体类中使用填充方法。像这样的东西

```
 public function populate($data = array())
    {
        $this->id = ( isset($data['id'])) ? $data['id'] : null;
        $this->username = (isset($data['username'])) ? $data['username'] : null;
        $this->pass = (isset($data['pass'])) ? $data['pass'] : null;               

    } 
```

然后在控制器中，您可以使用类似这样的填充功能。

```
$user = new User();
$request = $this->getRequest();
$user->populate($request->getPost()); 
```

我不确定我是否正确理解了您的问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-30T08:30:50.653

幸运的是，如果您遵循本教程，您的实体中不需要任何其他内容：

[http://samminds.com/2012/07/a-blog-application-part-1-working-with-doctrine-2-in-zend-framework-2/](http://samminds.com/2012/07/a-blog-application-part-1-working-with-doctrine-2-in-zend-framework-2/)我使用几乎相同的方法，它是（几乎）运作良好。你应该关心的两件事：

1.) 确保验证表中的所有数据（或至少非空数据），因为只有经过验证的字段才会发送到数据库。这是这个博客的作者对我说的。:)

2.）当您为编辑表单创建视图时，将 id 添加到路由：

```
$form->setAttribute('action', $this->url('post',
                    array('action'=>'add', 'id'=>"$this->id")))->prepare(); 
```

祝你好运！

# configuration-management - 为网络设备提供数百万个配置对象

> ID：13038363
> 
> 赞同：1
> 
> 时间：2012-10-23T20:06:19.433
> 
> 标签：configuration-management, apache-zookeeper

我有一种独特的配置管理问题。我不太认为 zookeper 是为解决它而构建的，但我可能是错的。

系统将为网络中的多个设备提供配置。配置本身由数千万个配置对象组成。

如果尚未配置设备，则需要读取整个配置的当前版本（数千万个对象）。

配置设备后，它需要接收对配置的版本更改。变化仅以数百/秒或低千/秒的量级发生。

使用 zookeeper 的基于文档的模型和 1 MB 响应限制，这似乎不太适合。我错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T23:01:20.513

ZooKeeper 可能仍然不适合您的应用程序，但 1 MB 响应限制是每个操作。因此，如果所有配置对象的大小都小于 1 MB，那么读取/写入它们不会有问题。

对于这种情况，需要记住几件事：所有数据都存储在内存中。它通过记录到磁盘而变得持久，并且使用复制变得可靠，但是如果你的内存用完了，你就完成了。还有每个 znode 的内存开销（大约 100 字节）。如果您有 10,000,000 个对象并且每个对象仅存储 100 个字节，那么您的内存占用量约为 2G。假设您有一个配置相对较好的服务器，这应该不是什么大问题。另外请记住，从崩溃中恢复需要更长的时间，因为您必须在启动期间读取大约 2G 的数据。

你在客户端也有一个相关的问题：如果客户端真的要读取所有的配置对象，他们会通过网络提取大量数据！假设每个对象都小于 1 MB，您不会遇到任何限制，但这需要一点时间。

# python - 使用python解析多个结果页面

> ID：13038364
> 
> 赞同：0
> 
> 时间：2012-10-23T20:06:20.437
> 
> 标签：python, html, parsing

我正在尝试解析图书馆网站以从特定出版商处获取信息。这是网站的链接。

[http://hollis.harvard.edu/?q=publisher:%22sonzogno%22+ex-Everything-7.0:%221700-1943%22+](http://hollis.harvard.edu/?q=publisher:%22sonzogno%22+ex-Everything-7.0:%221700-1943%22+)

到目前为止，通过使用漂亮的汤，我可以从这个页面获取我需要的数据。问题是我的脚本只从整个结果集中抓取了前 25 个条目（价值一页），而整个结果集中还有很多。

我在这里想念什么？

这是一小段代码。

```
def url_parse(name): `if(name == " "):
    print 'Invalid Error'
  else:
    response = urllib2.urlopen(name)
    html_doc = response.read()
    soup = BeautifulSoup(html_doc)
    print soup.title
    print soup.find_all("a",{"class":"classiclink"})
    #print soup.find("a",{"class":"classiclink"})
    aleph_li = [] # creates and emptylist
    aleph_li = soup.find_all("a",{"class":"classiclink"})` 

之后我打算使用这些标签中的可用信息。到目前为止，就像你说的，我只能抓住其中的 25 个。

我无法遍历每个页面，因为 url（包含某种查询）似乎没有任何页面信息。我不确定如何向服务器发出重复请求。

谢谢。

            回答 #1

赞同：1

时间：2012-10-23T23:21:02.593

也许这不会那么难：

如果查看获取其他页面的请求，即调用`result.ashx`，可以看到以下参数：

```
inlibrary:false
noext:false
debug:
lastquery:publisher:"sonzogno" ex-Everything-7.0:"1700-1943"
lsi:user
uilang:en
searchmode:assoc
hardsort:def
skin:harvard
rctx:AAMAAAABAAAAAwAAABJ/AAAHaGFydmFyZDJwdWJsaXNoZXI6InNvbnpvZ25vIiBleC1FdmVyeXRoaW5nLTcuMDoiMTcwMC0xOTQzIjJwdWJsaXNoZXI6InNvbnpvZ25vIiBleC1FdmVyeXRoaW5nLTcuMDoiMTcwMC0xOTQzIhJzb256b2dubyAxNzAwLTE5NDMAAAAAA25hdgR1c2VyAAAAA2RlZgpyZXN1bHRsaXN0BWFzc29jBQAAAAAAAAACZW4AAP////9AEAAAAAAAAAIAAAAGY19vdmVyATEEaV9mawAAAAAA
c_over:1
curpage:3
concept:sonzogno 1700-1943
branch:
ref:
i_fk:
mxdk:-1
q:publisher:"sonzogno" ex-Everything-7.0:"1700-1943"
si:user
cs:resultlist
cmd:nav 
```

所以尝试`curpage`在你自己的请求中添加一个参数。您可能必须使用循环来遍历所有结果，但这似乎非常可行：

```
params = urllib.urlencode({"curpage": NUMBER})
urllib2.urlopen(YOUR_PAGE, params) 
```

            回答 #2

赞同：0

时间：2012-10-23T23:31:06.520

HOLLIS在 Beta 中有一个[JSON API 。](http://hul.harvard.edu/ois/systems/webservices/lookup-userguide/wwhelp/wwhimpl/common/html/wwhelp.htm#context=lookup-userguide&file=search_hollis.html)其结果包括指向下一页的链接。这可能更容易使用。

            回答 #3

赞同：0

时间：2012-10-23T20:57:17.547

您必须让 python 按顺序调用每个页面。知道您想要浏览所有页面还不够聪明。

如果您正在调用所有页面，则应该将所需的结果解析为某种形式的输出文件，可以是稍后可以通过 python 处理的 .pkl 文件，也可以是 .txt 文件（如果您认为这就是您所需要的）。如果您正在使用的数据集非常长，您可能会遇到内存溢出。

即使您还没有调用所有页面，将输出数据流式传输到 .pkl 文件以便在最后处理成可用形式也是明智之举。

```

# delphi - 如何在不访问源代码的情况下更改模态表单的标题？

> ID：13038373
> 
> 赞同：6
> 
> 时间：2012-10-23T20:07:06.693
> 
> 标签：delphi, delphi-xe2

我有一个显示打印预览表单的第三方组件。我想将预览表单的标题更改为更合适的内容。不幸的是，我没有第三方组件的源代码，并且该组件不提供该功能。

是否有可能以某种方式捕获正在显示的模态表单并在显示之前设置它的属性？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-23T20:27:44.117

模态表单将导致调用表单停用，您可以`WM_ACTIVATE`在显示模态表单之前监听处于活动状态的表单上的消息。您将在消息处理程序中拥有激活窗口的句柄，您可以测试它是否属于模态表单类型的表单。下面的示例测试类名，您可以使用 Spy++ 之类的东西获得。请注意，在模态表单变得可见后，停用会短暂发生，但我认为不可能注意到不同的标题。

```
type
  TForm1 = class(TForm)
    ..
  protected
    procedure WMActivate(var Message: TWMActivate); message WM_ACTIVATE;
  end;

procedure TForm1.WMActivate(var Message: TWMActivate);
var
  Form: TWinControl;
begin
  if Message.Active = WA_INACTIVE then begin
    Form := FindControl(Message.ActiveWindow);
    if Form is TCustomForm then begin
      if TCustomForm(Form).ClassName = 'TThirdPartyModalForm' then
        TCustomForm(Form).Caption := 'My caption';
    end;
  end;
  inherited;
end; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-24T01:41:07.017

尝试使用`TScreen.OnActiveFormChange`事件，使用`TScreen.ActiveCustomForm`or`TScreen.ActiveForm`属性来知道哪个`TForm`有焦点：

```
procedure TMainForm.DoSomething; 
begin 
  Screen.OnActiveFormChange := ActiveFormChanged;
  try
    // do something that triggers the modal form ...
  finally
    Screen.OnActiveFormChange := nil;
  end;
end;

procedure TMainForm.ActiveFormChanged(Sender: TObject);
var
  Form: TCustomForm;
begin
  Form := Screen.ActiveCustomForm; 
  if (Form <> nil) and (Form.ClassName = 'TModalFormClassName') then 
    Form.Caption := 'My caption'; 
end; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-23T20:28:37.753

您可以使用该功能安装`WH_CBT`挂钩。[`SetWindowsHookEx`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644990%28v=vs.85%29.aspx)

```
var
 hhk: HHOOK;

function CBT_FUNC(nCode: Integer; wParam: WPARAM; lParam: LPARAM): LRESULT; stdcall;
const
  ClassNameBufferSize = 1024;
var
 hTemp  : HWND;
 i      : Integer;
 RetVal : Integer;
 ClassNameBuffer: Array[0..ClassNameBufferSize-1] of Char;
begin
   case nCode of
     HCBT_ACTIVATE:
     begin
       hTemp := HWND(wParam);
       if (Screen<>nil) and (hTemp>0) then
       begin
          RetVal := GetClassName(wParam, ClassNameBuffer, SizeOf(ClassNameBuffer));
          //check for the class 
          if (RetVal>0) and SameText(ClassNameBuffer,'TForm2') then
          begin
             Assert(RetVal < ClassNameBufferSize, 'Class name larger than fixed buffer size');
            for i := 0 to Screen.FormCount-1 do
             if Screen.Forms[i].Handle=hTemp then
               begin 
                  //set the caption
                  Screen.Forms[i].Caption:='Hello';
                  Break;
               end;
          end;
       end;
     end;
   end;
  Result := CallNextHookEx(hhk, nCode, wParam, lParam);
end;

Procedure InitHook();
var
  dwThreadID : DWORD;
begin
  dwThreadID := GetCurrentThreadId;
  hhk := SetWindowsHookEx(WH_CBT, @CBT_FUNC, hInstance, dwThreadID);
  if hhk=0 then RaiseLastOSError;
end;

Procedure KillHook();
begin
  if (hhk <> 0) then
    UnhookWindowsHookEx(hhk);
end;

initialization
  InitHook();

finalization
  KillHook();
end. 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-23T20:34:31.427

这是您可以尝试的“伪”代码（未经测试）：

```
const
  MY_PRINT_PREVIEW_MSG = WM_USER + 200;

type
  TForm1 = class(TForm)
    procedure MyPrintPreviewMsg(var Msg: TMessage); message MY_PRINT_PREVIEW_MSG;
    procedure MyPrintPreview;
  end;
...
procedure TForm1.MyPrintPreviewMsg(var Msg: TMessage);
var
  h: HWND;
begin
  h := Screen.Forms[0].Handle; // if the modal dialog is VCL dialog (verify it with spy++)
  // h := FindWindow(<class name>, <caption>); // non VCL window
  if (h <> 0) then
  begin
    SetWindowText(h, 'new caption');
  end;
end;

procedure TForm1.MyPrintPreview;
begin
  PostMessage(Handle, MY_PRINT_PREVIEW_MSG, 0, 0);
  ThirdPartyPrintPreview;
end; 
```

# python - 使用 juggernaut 向客户端发送实时数据

> ID：13038376
> 
> 赞同：3
> 
> 时间：2012-10-23T20:07:15.740
> 
> 标签：python, web-applications, flask, juggernaut

[我尝试使用烧瓶的主宰框架，以便在http://flask.pocoo.org/snippets/80/](http://flask.pocoo.org/snippets/80/)上的烧瓶片段之后将实时信息发送到客户端浏览器 。

当我尝试为我的代码实现它时，它仍然没有在客户端浏览器中提供实时输出。

这是我的python代码：

```
import flask
from flask.views import MethodView
from tweetStreamsRT import StreamerRt 
from juggernaut import Juggernaut

app = flask.Flask(__name__)
app.secret_key = "xxxxx"
PORT = 8080

class View(MethodView):

    def get(self):
        return flask.render_template('index.html')

    def post(self):
        results = StreamerRt().filter(track=[flask.request.form['event']])            
        jug = Juggernaut()
        jug.publish('channel', results)
        return self.get()

app.add_url_rule('/', view_func = View.as_view('index'), methods=['GET', 'POST'])
app.debug = True

if __name__ == "__main__":
    print 'Listening on http://localhost:%s' % PORT
    app.run() 
```

我的 html 页面是从基本 html 页面继承的：

```
{% extends "base.html" %}
{% import "forms.html" as forms %}

{% block page_header %}
  <div class="page-header">
    <h1>Welcome</h1>
  </div>
{% endblock %}
{% block content %}
  <h2>Enter the Event you would like to follow</h2>
      <form action="/" method="post">
            <input type="text" name="event" />
            <input type="submit" value="Submit Query" />
          </form>
            Results:
            <pre>
                <script type="text/javascript" charset="utf-8">
                    var jug = new Juggernaut;
                    jug.subscribe("channel", function(data){
                    alert("Got data: " + data);});
                </script>

            </pre> 
{% endblock %} 
```

我很困惑为什么什么都没有发送到客户端浏览器。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T17:04:59.013

Juggernout 已弃用[http://blog.alexmaccaw.com/killing-a-library](http://blog.alexmaccaw.com/killing-a-library) 如果您要围绕它构建您的应用程序，那么是时候切换到其他东西了。喜欢 EventSource [http://www.html5rocks.com/en/tutorials/eventsource/basics/](http://www.html5rocks.com/en/tutorials/eventsource/basics/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T14:34:44.160

正如另一个答案所述，剑圣现在已被弃用。我建议使用另一个 PUB/SUB 框架，例如[Faye](http://faye.jcoglan.com)。

# php - 如何将此 $db 定义为我的函数？

> ID：13038377
> 
> 赞同：0
> 
> 时间：2012-10-23T20:07:16.297
> 
> 标签：php, class, hook

我这里有问题。我目前正在制作一个钩子，它在一个类中运行一个函数，但它出错了..

它表示未定义变量“db”。

确切的错误是： `Notice: Undefined variable: db in /home/turborpg/public_html/script/lib/class.gamebase.php on line 72`

这是我运行的钩子的来源：http: [//pastebin.com/aKZZaafr](http://pastebin.com/aKZZaafr)

这里是 class.gamebase.php 的来源：http: [//pastebin.com/fGVnY9JD](http://pastebin.com/fGVnY9JD)

希望有人愿意在这里帮助我。我是钩子和类的新手，这是我第一次尝试定制一个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T20:10:19.423

您`$db`在方法中用作变量。您应该将其用作属性`$this->db`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T20:12:19.173

是的，您显然不清楚如何使用类变量。在您的几个方法中，您引用了 $db：

```
return $db->execute('SELECT COUNT(*) FROM `main_games` WHERE `url`=?', array($this->getSubdomain())); 
```

这需要是：

```
return $this->db->execute('.....'); 
```

确保您在类中使用受保护的 $db 变量的任何地方都正确引用了它。

# hadoop - 如何从 mapreduce 作业中获得响应？

> ID：13038378
> 
> 赞同：-2
> 
> 时间：2012-10-23T20:07:16.647
> 
> 标签：hadoop, mapreduce, hdfs

如何从我的 Map Reduce 工作中获得响应？

我已经在我的 java 程序中提交了这样的作业输入。

```
conf.set("key1", somevalue);conf.set("key2", somevalue);
Job job = new Job(conf, jobId);
if (job != null) {
        job.waitForCompletion(true);
    } 
```

该作业已成功执行，现在在作业完成时（仅地图作业）我想返回一些值。我要使用

```
protected void cleanup(Context context) throws IOException,
            InterruptedException { // How can I set value here } 
```

我想返回 Mapper 使用的最后一个/最大的键，或者有什么方法可以从 InputSplit 中获取 lastkey？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T20:52:22.413

要获得最大值，您应该声明一个实例变量并使用它来保存 mapper() 方法迄今为止看到的最大值。您可能需要某种方式来表明尚未看到任何值。当 cleanup() 方法最终被调用时，变量保存了你想要的值。

返回这个值有点困难。Hadoop 工作流引擎都使用以下方法的变体在 hadoop 作业之间传递数据。您可以使用这种方法在工作完成时将最大值传递给需要它的任何人。hack/kludge 涉及使用众所周知的 hdfs 目录（可以传入）和 taskid 来构建一个唯一的、可发现的文件名来保存值。使用 HDFS 文件 io API 将值写出。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-10-24T11:42:51.183

但是，这可能不是最好的解决方案，但作为一种解决方法，您可以将每个任务的最大值存储在`counter`您可以在 jobrunner 类中检索的 a 中。然后遍历它们并选择最大值。例如：

**映射器：**

```
private long num = 0L;

@Override
protected void map(...) {
  ...
  num++;
  ...
}

@Override 
public void cleanup(Context context) {
  context.getCounter("MaxValue", "task_" + 
    context.getTaskAttemptID().getTaskID().getId()).increment(num);
} 
```

**求职者**

作业完成后选择最大值：

```
...
long max = 0;
CounterGroup group = job.getCounters().getGroup("MaxValue");
for (Counter c : group) {
  long val = c.getValue();
  if (val > max) {
    max = val;
  }
}
... 
```

# javascript - jQuery 插件：":hover" 在 IE8 中不起作用

> ID：13038381
> 
> 赞同：1
> 
> 时间：2012-10-23T20:07:32.737
> 
> 标签：javascript, jquery

我编写了一个 jQuery 插件，它使元素脉冲。它在 Chrome 和 Internet Explorer 9 中运行良好。在 Internet Explorer 8 中，在 setTimeout 调用后它无法运行。

我创建了一个 jsFiddle 来演示这个问题：http: [//jsfiddle.net/Guykp/](http://jsfiddle.net/Guykp/) 这是 javascript 代码：

```
$(document).ready(function() {
  $.fn.pulseEffect = function(delay, duration) {
    var $element, animateOptions;
    $element = $(this);
    if (!$element.is(":hover")) {
      animateOptions = {
        opacity: $element.css("opacity") === "1" ? .6 : 1
      };
      $element.animate(animateOptions, duration);
    }
    return setTimeout((function() {
      return $element.pulseEffect(delay, duration);
    }), delay + duration);
  };

  $("#pulse-element").pulseEffect(0, 1000);
}); 
```

如何使它在 Internet Explorer 8 中运行？

这是来自 Internet Explorer 8 的错误消息：**语法错误，无法识别的表达式：不支持的伪：悬停**

**这是解决方案：** [如何检查鼠标是否在 jQuery 中的元素上？](https://stackoverflow.com/questions/1273566/how-do-i-check-if-the-mouse-is-over-an-element-in-jquery/2846405#2846405)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T20:12:23.323

jQuery 不再有`:hover`选择器。一些浏览器本身支持`:hover`，但其他浏览器不支持。jQuery 曾经使用它的 CSS 引擎 Sizzle 来实现这一点，但现在不再使用了。

尝试使用`hover`(or `mouseenter`/ `mouseleave`) 事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T20:11:04.073

就像是

`$('li:hover).css('display', 'block');`相当于`$().css('display', 'block');`

就像 Rocket Hazmat 所说的使用 jquery`hover`

# scrapy - Scrapy Pipeline 加载但不起作用

> ID：13038383
> 
> 赞同：3
> 
> 时间：2012-10-23T20:07:39.487
> 
> 标签：scrapy, pipeline

我有一个 Scrapy 项目，它加载管道但不将项目传递给它们。任何帮助表示赞赏。

蜘蛛的精简版：

```
#imports
class MySpider(CrawlSpider):
  #RULES AND STUFF 

  def parse_item(self, response):
    '''Takes HTML response and turns it into an item ready for database.  I hope.
    '''
    #A LOT OF CODE
    return item 
```

此时打印出该项目会产生预期的结果，而*settings.py*非常简单：

```
ITEM_PIPELINES = [
  'mySpider.pipelines.MySpiderPipeline',
  'mySpider.pipelines.PipeCleaner',
  'mySpider.pipelines.DBWriter',
] 
```

并且管道似乎是正确的（无进口）：

```
class MySpiderPipeline(object):
  def process_item(self, item, spider):
    print 'PIPELINE: got ', item['name']
    return item

class DBWriter(object):
  """Writes each item to a DB.  I hope.
  """
  def __init__(self):
    self.dbpool = adbapi.ConnectionPool('MySQLdb'
                                        , host=settings['HOST']
                                        , port=int(settings['PORT'])
                                        , user=settings['USER']
                                        , passwd=settings['PASS']
                                        , db=settings['BASE']
                                        , cursorclass=MySQLdb.cursors.DictCursor
                                        , charset='utf8'
                                        , use_unicode=True
                                        )
    print('init DBWriter')

  def process_item(self, item, spider):
    print 'DBWriter process_item'
    query = self.dbpool.runInteraction(self._insert, item)
    query.addErrback(self.handle_error)
    return item

  def _insert(self, tx, item):
    print 'DBWriter _insert'
    # A LOT OF UNRELATED CODE HERE
    return item

class PipeCleaner(object):
  def __init__(self):
    print 'Cleaning these pipes.'

  def process_item(self, item, spider):
    print item['name'], ' is cleeeeaaaaannn!!'
    return item 
```

当我运行蜘蛛时，我在启动时得到这个输出：

```
Cleaning these pipes.
init DBWriter
2012-10-23 15:30:04-0400 [scrapy] DEBUG: Enabled item pipelines: MySpiderPipeline, PipeCleaner, DBWriter 
```

与在爬虫启动时打印到屏幕的**init**子句不同，process_item 方法不打印（或处理）任何内容。我在祈祷我忘记了一些非常简单的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T06:59:12.363

```
2012-10-23 15:30:04-0400 [scrapy] DEBUG: Enabled item pipelines: MySpiderPipeline, PipeCleaner, DBWriter 
```

这一行表明您的管道正在初始化并且它们没问题。

问题是你的爬虫类，

```
class MySpider(CrawlSpider):
  #RULES AND STUFF 

  def parse_item(self, response):
    '''Takes HTML response and turns it into an item ready for database.  I hope.
    '''
    #A LOT OF CODE
    # before returning item , print it 
    return item 
```

我认为你应该打印一个项目，然后从**MySpider**退回它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-02-03T00:15:52.200

“迟到总比不到好”

```
#imports
class MySpider(CrawlSpider):
  #RULES AND STUFF 

  def parse_item(self, response):
    '''Takes HTML response and turns it into an item ready for database.  I hope.
    '''
    #A LOT OF CODE
    yield item       <------- yield instead of return
```

# c# - Excel 与 .NET 中的 ACE 超时使用数据适配器更新

> ID：13038384
> 
> 赞同：6
> 
> 时间：2012-10-23T20:07:44.027
> 
> 标签：c#, excel, ms-jet-ace, oledbdataadapter

我在将数据从数据集写入 Excel 电子表格时遇到超时问题。这是我目前的连接字符串：

```
<add key="ExcelConnectionStringHeader" value="Provider=Microsoft.ACE.OLEDB.12.0;Connect Timeout=30;Extended Properties=&quot;Excel 12.0;HDR=YES&quot;;Data Source="/> 
```

提供程序似乎不支持 Connect Timeout 属性。Connection Timeout、Timeout、ConnectionTimeout、ConnectTimeout 等也不是。我的代码创建了一个 Data Adapter 和 InsertCommand，并从数据集进行更新。除非更新命令本身花费超过 15 秒（这是默认的 OleDb 超时），否则这非常有效。这就是为什么我试图在连接字符串中设置它。我已经从默认的 30 增加了 CommandTimeout，但这真的无关紧要。以下是我的代码：

```
 OleDbDataAdapter da = new OleDbDataAdapter(szHeaderSelect, oCnn); // Ratings_Test -- Loan_Test$A1:F1]",
        DataSet dsTest = new DataSet();

        da.InsertCommand = new OleDbCommand(szNewSQL + "(" + szColumns + ") " + "VALUES ( " + szParams + ")", oCnn);
        da.InsertCommand.CommandTimeout = 300;

        foreach (DataRow oDr in dtTable.Rows)
        {

            drNew = dsTest.Tables[0].NewRow();

            dsTest.Tables[0].Rows.Add(drNew);
        }

        var timer = new System.Diagnostics.Stopwatch();
        timer.Start();
        var recs = da.Update(dsTest, szExcelTab); // Ratings_Test           }
        timer.Stop(); 
```

我省略了实际构建插入命令的内容和参数的循环等。相信我，一切正常。2200+ 条记录工作正常。

在我添加计时器之后，我发现问题是超时。处理 2221 条记录时，需要 14.95 秒，并且在电子表格中显示得很好。处理 2260 条记录时，需要 15.21 秒，但没有任何显示。没有任何错误。我检查了所有行更新后的行状态，它们都没有显示失败。

底线，由于 ConnectionTimeout 属性是只读的，并且提供程序似乎不支持连接字符串中的超时，该怎么办....

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T17:39:53.983

以下是我的想法：

*   您实际上是将其用作 appSetting 而不是 connectionStrings 吗？如果您将其用作连接字符串，请查看：[Escape quote in web.config connection string](https://stackoverflow.com/questions/3177861/escape-quote-in-web-config-connection-string)
*   数据源缺少它的值，只是指出它是因为您遗漏了那部分代码
*   您的问题的根源可能是您的会话池超时设置：[信息：OLE DB 会话池超时配置](http://support.microsoft.com/kb/237977)
*   您应该在连接、适配器和命令创建行周围放置 using 语句，不这样做会创建一种蒸汽锁形式并强制超时。
*   您确定这是超时而不是“电子表格已满”错误吗？这是我的代码，它在 ~1:50 之后完成，如果你将它增加到 4,000,000 行，你会得到“电子表格已满”。~4:50 后出现错误：

    ```
    static void Main(string[] args)
    {
        var timer = new System.Diagnostics.Stopwatch();

        try
        {
            string connectionString = "Provider=Microsoft.ACE.OLEDB.12.0;Extended Properties=\"Excel 12.0;HDR=YES;\";Data Source=Book1.xlsx";

            using (OleDbConnection oleDbConnection = new OleDbConnection(connectionString))
            {
                oleDbConnection.Open();

                string szHeaderSelect = "SELECT [A1] FROM  from [Sheet1$]";
                using (OleDbDataAdapter da = new OleDbDataAdapter(szHeaderSelect, oleDbConnection))
                {
                    using (da.InsertCommand = new OleDbCommand("INSERT INTO [Sheet1$] ( [A1] ) VALUES (?)",
                        oleDbConnection))
                    {
                        da.InsertCommand.Parameters.Add("A1", OleDbType.Integer, 20, "[A1]");

                        List<int> testData = new List<int>();
                        for (int i = 1; i < 400000; i++)
                        {
                            testData.Add(i);
                        }

                        DataSet dsTest = new DataSet();
                        dsTest.Tables.Add("[Sheet1$]");
                        dsTest.Tables[0].Columns.Add("[A1]");

                        foreach (int number in testData)
                        {
                            DataRow drNew = dsTest.Tables[0].NewRow();
                            drNew["[A1]"] = number;

                            dsTest.Tables[0].Rows.Add(drNew);
                        }

                        timer.Start();
                        var recs = da.Update(dsTest, "[Sheet1$]");
                    }
                }
            }
        }
        catch (Exception ex)
        {
            Console.Out.WriteLine(ex.Message);
        }
        finally
        {
            timer.Stop();

            Console.WriteLine(timer.Elapsed);
        }

        // Don't close before I get to read the results
        Console.WriteLine();
        Console.WriteLine("Press Enter to quit.");
        Console.ReadLine();
    } 
    ```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2015-07-21T19:03:16.420

[将应用程序池帐户设置为“LocalSystem”或机器管理员](https://social.msdn.microsoft.com/Forums/en-US/961fa23c-fc03-4cae-a9e4-7c0e7910804b/export-of-more-than-20000-rows-to-excel-xlsx-creates-empty-file?forum=adodotnetdataproviders)。

# sql-server - 在 vb.net 中执行大型 SQL 查询的正确方法

> ID：13038389
> 
> 赞同：1
> 
> 时间：2012-10-23T20:07:56.170
> 
> 标签：sql-server, vb.net, sql-server-2008

我有一个 SQL 查询，我使用我的 vb.net 应用程序来运行它，但是当它超过它的命令超时属性时我遇到了问题。我把它设置为300，有什么提示或建议吗？

这是我在 vb.net 中的代码片段

```
 .ExecuteQuery("exec spCentrIX_PracticeSet '" & oCompany & "','" & .SecDatabaseName & "'", sDataSet)
  Application.DoEvents()
  .ExecuteQuery("exec spCentrIX_PracticeSet '" & oCompany & "','" & .SetDatabaseName & "'", sDataSet)
  Application.DoEvents()
  .ExecuteQuery("exec spCentrIX_PracticeSet '" & oCompany & "','" & .TranDatabaseName & "'", sDataSet)
  Application.DoEvents() 
```

运行三次的相同脚本。该脚本从运行 okie 的 3 个数据库中获取所有数据。但是，当它运行时......它超过了我的代码的连接超时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T20:15:05.297

将超时设置为零将永远不会超时，在生产环境中不建议这样做，但如果你真的想等到它完成它会成功。如果可能，您将希望研究优化查询的方法。也可以异步运行它，可能使用 backgroundworker。

[http://www.codeproject.com/Articles/20627/BackgroundWorker-Threads-and-Supporting-Cancel](http://www.codeproject.com/Articles/20627/BackgroundWorker-Threads-and-Supporting-Cancel)

# azure - azure blob 存储日志记录/分析 gui 工具？

> ID：13038390
> 
> 赞同：7
> 
> 时间：2012-10-23T20:07:58.660
> 
> 标签：azure, azure-blob-storage

我想知道是否有用于查看 Azure blob 存储日志记录结果的好工具。

Azure 的仪表板已经向您显示了请求总数（在过去 6 小时内、成功的请求等），这非常好，但我认为日志记录（这是有代价的）允许更多细节，比如多少次在过去 6 小时内请求了特定的 blob。

我意识到这可以通过将结果记录到 blob（在根容器 $logs 中）以某种方式起作用，但我想知道是否有任何不错的 GUI 工具（第 3 方或其他）来查看此分析数据？

更新：谢谢大家。我尝试了 Cloud Storage Studio (2)，虽然它看起来有很好的图表，但这些图表似乎没有显示任何有用的信息，或者至少对于我感兴趣的任何领域都没有。例如：“Container Count "是其中的一个领域。我真的需要分析来计算我拥有的容器数量吗？“对象计数”。“数据容量”是另外两个，除了非常广泛的概述之外，我不确定它如何做任何事情，例如您已经可以进入仪表板。我想看看是否可以跟踪特定 blob 的使用情况。当您在仪表板中单击打开此类日志记录的选项时，似乎表示您可以执行诸如跟踪一个 blob 的使用统计信息之类的操作。但也许我错过了 Cloud Storage Studio 的一些东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T00:09:15.403

还有一个用于 Windows Azure Storage Analytics 的 Windows 8 Store 应用程序，称为[Azure Storage Monitor](http://apps.microsoft.com/windows/en-US/app/azure-storage-monitor/e9292e05-c469-403d-a787-63645b861593)。

> [Azure Storage Monitor](http://apps.microsoft.com/windows/en-US/app/azure-storage-monitor/e9292e05-c469-403d-a787-63645b861593)提供了一种方便的方式来访问和可视化 Windows Azure 存储分析数据。这些图表为您的 Blob、表和队列流量提供了丰富的数据洞察。更喜欢 Excel 数据透视图？没问题。轻松将数据导出到 Excel 电子表格中，该电子表格自动包含原始数据、数据透视表和图表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T21:23:48.537

[Cloud Storage Studio 2](http://www.cerebrata.com/products/cloudstoragestudio/Details.aspx?t1=0&t2=0)允许您查看存储分析：

> Cloud Storage Studio 2 允许您配置存储帐户以捕获存储分析数据，您可以使用这些数据在粒度级别上找出存储帐户的使用情况。它还为您提供查看原始数据的能力，并提供一些预先制作的报告以图形格式查看存储分析数据。您可以以 CSV 格式下载此报告数据以进行进一步分析以及导出图表的功能。

# java - executor.shutDownNow() 不会停止内部方法的执行

> ID：13038395
> 
> 赞同：1
> 
> 时间：2012-10-23T20:08:12.750
> 
> 标签：java

我创建了一个未来的任务并将其提交给 Executor。在run() 方法中，我创建了placementPlanner 的对象。该类中的方法调用其他类。但是，当我调用 executor.shutDownNow() 时，调用的内部方法不会停止执行。如何调用我杀死所有子线程并停止调用方法。代码如下。

```
static List<Result> invokePlacementPlannerWithTimeout(int timeoutSecs,
        final String requestType, final RequestMap requestMap,
        final ReleaseMap releaseMap, final SysConfig systemConfig,
        final Request request, final SigmaBlade hostData,
        final ServiceLevelData serviceLevelData,
        final List<Service> serviceList, final String transactionID) throws IOException {

    /**
     * Object of ExecutorService interface used for timed execution of Placement
     * Planner.
     */
    ExecutorService executor = Executors.newFixedThreadPool(1);
    /**
     * Creating a final List of Result type.
     */
    final List<Result> resultList = new ArrayList<Result>();
    /**
     * set the executor thread working
     */
    Future<?> future = executor.submit(new Runnable() {

        public void run() {

            try {
                Result result = new Result();
                PlacementPlanner planner = new PlacementPlanner();

                result.setRequestMapACK(planner.getRequestResult(
                            requestMap, systemConfig, request, hostData,
                            serviceLevelData, transactionID,
                            configFileLocation));

                resultList.add(result);
            } catch (Exception e) {
                System.out.println("Exception in run method in invokePlacementPlannerWithTimeout method in Controller");
                throw new RuntimeException(e);
            }
        }

    });

    try {
        /**
         * invoking the future task with specified timeout.
         */
        //  System.out.println(timeoutSecs);
        future.get(timeoutSecs, TimeUnit.MILLISECONDS);

        /**
         * Shutting down the service after successful execution.
         */
        executor.shutdownNow();
    } catch (Exception e) {
        /**
         * Shutting down the service if timeout is occured.
         */
        executor.shutdownNow();

        /**
         * Canceling the task for future use.
         */
        future.cancel(true);

        System.out.println("Timeout Occureed.");
        Runtime.getRuntime().exec("taskkill /F /IM " + "QNSim.exe*");
    }
    return resultList;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T20:10:46.723

根据[javadoc](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html#shutdownNow%28%29)

> 除了尽最大努力停止处理正在执行的任务之外，没有任何保证。例如，典型的实现将通过 Thread.interrupt() 取消，因此任何未能响应中断的任务可能永远不会终止

因此，`shutdownNow()`不保证任务立即终止。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T20:53:55.937

如果您**确实**需要停止该线程，您可以考虑使用已弃用的线程，`Thread.stop()`因为这不是唯一有效的方法。但是只有在仔细阅读`@deprecated`了javadoc的部分之后。

（我希望这个答案会有很多反对意见）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T20:12:50.607

`future.cancel()`如果您想取消任务，如果`mayInterruptIfRunning`值为 true ，您应该使用该任务将中断正在运行的任务。`shutdownNow`最终会尝试取消 `Thread.interrupt()`我猜你不想做的线程。

另一种方法是在你的运行方法中检查[Thread.isInterrupted()](http://docs.oracle.com/javase/6/docs/api/java/lang/Thread.html#isInterrupted%28%29)状态，如果它真的只是中断，那么你的代码将在你调用`shutdownNow`或`cancel`

# spring - 是否可以动态生成 web.xml 的一部分？

> ID：13038397
> 
> 赞同：1
> 
> 时间：2012-10-23T20:08:18.680
> 
> 标签：spring, web-applications, web.xml

是否可以动态创建 web.xml 中的条目？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T21:28:20.807

我假设您的意思是以编程方式定义 web.xml 文件的内容 - 这在支持[Servlet 3.0 规范](http://jcp.org/en/jsr/detail?id=315)的容器上是可能的。

.1。可以纯粹使用注释来定义您的 servlet、过滤器、侦听器 - `@WebServlet`, `@WebFilter`,`@WebListener`

.2\. 如果您想在没有 web.xml 的情况下显式注册 servlet，您可以实现[ServletContainerInitializer](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContainerInitializer.html)，获取 ServletContext 的句柄并以编程方式添加 servlet、过滤器等。

.3\. 由于您将 Spring 作为标签，以编程方式注册 Spring 相关的前端控制器（`DispatcherServlet`）和上下文加载器侦听器的另一种方法是实现 Spring [WebApplicationInitializer](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/web/WebApplicationInitializer.html)，链接中的 javadoc 具有更多详细信息。

# c# - 如何在 C# 中生成 exe 和捆绑文件？

> ID：13038398
> 
> 赞同：0
> 
> 时间：2012-10-23T20:08:19.320
> 
> 标签：c#, .net, exe

假设我有几个文件，例如“pic1.jpg”需要转到“我的图片”和“random.exe”，需要放置在本地应用程序数据文件夹中，然后使用一些标志执行。

我应该在 MSDN 上查找哪些可以生成 exe 的类，更重要的是，我如何“捆绑”将要生成的 exe？

通常这很容易 - 只需将它们作为资源添加到项目中即可。但是动态生成的 .exe 就这么简单吗？（每次输入的文件都不一样）

所以，回顾一下，我需要一个文件到 exe 的转换器，有点像一个安装程序，减去所有的花里胡哨。我该如何开始？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T20:23:48.437

如果我理解正确，您需要一个安装程序 - 您可以使用[InnoSetup](http://www.jrsoftware.org/isinfo.php)创建一个安装程序，将您的项目中的文件捆绑在一起。这包括安装您的主 .exe 及其可能具有的任何依赖项（图像、设置文件等）

InnoSetup 是免费使用的，是一个非常好的安装程序。除非您添加它们，否则没有任何花里胡哨的东西，它会为您处理各种特殊文件夹。（WinRar 或 7zip 之类的存档程序可以为您生成一个压缩的 .exe 存档文件，但它们不能很好地（或根本没有）处理存档中不同文件的不同目标文件夹。）

PS：如果我误解了你的问题，请告诉我。

**编辑**：

看看[`AssemblyBuilder`](http://msdn.microsoft.com/en-us/library/99ab870x%28v=vs.80%29.aspx)从动态生成程序集开始。您必须自己生成所有方法，方法是发出具有正确参数的 IL 操作码，然后在完成后将程序集保存到磁盘。

[`System.Reflection.Emit`](http://msdn.microsoft.com/en-us/library/xd5fw18y%28v=vs.80%29.aspx)通常，您应该查看整个命名空间。您也可以尝试使用[Mono.Cecil](http://www.mono-project.com/Cecil)生成程序集 - 这简化了您需要做的很多事情，但它有自己的怪癖，您必须学习。

这个问题可能对你有用： [Generate exe in .Net](https://stackoverflow.com/questions/2601198/generate-exe-in-net)

# messaging - 用于轻量级消息传递异步调用的弹簧集成

> ID：13038399
> 
> 赞同：1
> 
> 时间：2012-10-23T20:08:23.317
> 
> 标签：messaging, spring-integration

我计划使用 Spring Integration 作为我的轻量级消息传递解决方案，避免使用 JMS 或 MQ。我的要求是当事件 A 发生时，应该使用 A 提供的一些输入异步触发 B 和 C。它不会是单个 JVM，所以我打算使用 JDBC 消息存储。

*   SI 是解决这个问题的最佳工具吗？
*   维护支持轮询器的消息存储有多困难（*需要编写我们自己的轮询 SQL 查询？*）。
*   它会在从持久表中删除消息时创建表争用吗？
*   如何保证线程池得到有效利用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T20:30:53.657

如果您只是使用 JDBC 进行分发而不是持久性，则最好使用轻量级适配器（例如 UDP 或 TCP）将事件分发到其他 JVM。

# r - rbind 数据帧，重复的行名问题

> ID：13038401
> 
> 赞同：4
> 
> 时间：2012-10-23T20:08:26.637
> 
> 标签：r, duplicates, dataframe, duplicate-removal, rbind

虽然在 a 中允许重复的行（和列）名称，但在 a 中不允许`matrix`它们`data.frame`。尝试`rbind()`一些具有共同行名的数据框突出了这个问题。考虑以下两个数据框：

```
foo = data.frame(a=1:3, b=5:7)
rownames(foo)=c("w","x","y")
bar = data.frame(a=c(2,4), b=c(6,8))
rownames(bar)=c("x","z")
# foo               bar
#   a b               a b
# w 1 5             x 2 6
# x 2 6             y 4 8
# y 3 7 
```

现在尝试`rbind()`他们（注意行名）：

```
rbind(foo, bar)
#    a b
# w  1 5
# x  2 6
# y  3 7
# x1 2 6
# z  4 8 
```

但是对于以下情况`matrix`：

```
rbind(as.matrix(foo), as.matrix(bar))
#   a b
# w 1 5
# x 2 6
# y 3 7
# x 2 6
# z 4 8 
```

这是问题：如何`rbind()`删除两个数据框，删除重复的行（具有相同的行名）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T20:13:33.217

怎么样

```
duprows <- which(!is.na(match(rownames(bar),rownames(foo))))
rbind(foo,bar[-duprows,]) 
```

?

或者（根据下面的评论）

```
duprows <- rownames(bar) %in% rownames(foo)
rbind(foo, bar[!duprows,]) 
```

根据（1）选择的匹配或不匹配，可能有几种变化；(2) 为匹配找到数值或逻辑值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-09-16T17:51:52.067

如果我正确理解您所追求的，那么在一行代码中可以使用一种简洁明了的方式来执行此操作：

```
unique(rbind(bar, foo))
#   a b
# x 2 6
# z 4 8
# w 1 5
# y 3 7 
```

# javascript - Safari 中的 .click() 事件与实际点击不同

> ID：13038404
> 
> 赞同：1
> 
> 时间：2012-10-23T20:08:30.970
> 
> 标签：javascript, jquery, asp.net, safari

当用户从文本框中按下 Enter 时，我试图触发按钮的单击事件。这是我的代码：

```
<script type="text/javascript" language="javascript">

    $(document).ready(function () {
        $("#<%= txtSearch.ClientID %>").keypress(function (e) {
            if (e.keyCode == 13) { 
                alert("Hello");   
                $("#<%= lbSearch.ClientID %>").click();
            }
        });
    });

</script>

<asp:TextBox ID="txtSearch" runat="server" />
<asp:LinkButton ID="lbSearch" runat="server" onclick="lbSearch_Click" /> 
```

我所有的点击事件都会重定向到不同的页面。

当我单击按钮时，它可以工作。当我从 IE、Firefox 或 Chrome 的文本框中按 Enter 键时，它可以工作。

但是当我在 Safari 中按 Enter 时，页面只是执行回发，即使 jQuery 函数被命中（警报显示）。

这有什么原因吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T20:11:05.477

`e.preventDefault();`确定是回车键后需要运行。否则，表单会在 javascript 有机会完成运行之前发布。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-11T21:43:19.283

可以通过对象方法完成：

```
function RaiseClickEvent(id) {
  var clickObject = {
    click : document.getElementById(id).onclick
  };
  clickObject.click();
}

var id = "<%= lbSearch.ClientID %>";
RaiseClickEvent(id); 
```

# vb.net - VB 2010 打开 Word 文档

> ID：13038405
> 
> 赞同：1
> 
> 时间：2012-10-23T20:08:43.290
> 
> 标签：vb.net, visual-studio-2010, word-2010

我需要从我的 VB 2010 应用程序中打开现有的 Word 文档，并检测用户何时关闭文档以便将该文档复制到数据库，无论用户是否修改它。我该如何做到这一点？谢谢。

例子：

```
'Code here
Dim word as New Word.Application()
Dim doc as New Word.Document()

'open the document here and let the user work on the word document
'detect when user has closed Word
'copy the word document into database 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T21:21:04.513

我正在编辑它以显示完整的代码解决方案，这也会终止应用程序。

```
Imports Microsoft.Office.Interop

Class MainWindow
    Private WithEvents doc As Word.Document
    Private app As New Word.Application
    Public Sub New()

        InitializeComponent()

        app.Visible = True
        app.Documents.Add()
        doc = app.Documents(1)
        doc.Activate()
    End Sub

    Private Sub doc_Close() Handles doc.Close
        app.Quit()
    End Sub
End Class 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T20:13:15.213

这是有关如何创建新文档的示例。也许这会让你开始？

[http://support.microsoft.com/kb/316383](http://support.microsoft.com/kb/316383)

另一个很好的例子：

[http://www.codeproject.com/Articles/55685/Word-Automation-using-VB-NET-Part-I](http://www.codeproject.com/Articles/55685/Word-Automation-using-VB-NET-Part-I)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T21:49:26.553

这将起作用，尽管它可能不是最佳选择：

1.  在打开 doc 文件之前，获取所有进程的 pid（如 taskmgr 中的 pid）。每个打开的word文件都有一个pid。

2.  现在，有一个线程，每隔一段时间检查一次，如果 pid 不再存在，则关闭 doc 文件。

不是一个优雅的解决方案，但它适用于我们的项目

# python - python循环导入和访问类

> ID：13038409
> 
> 赞同：1
> 
> 时间：2012-10-23T20:08:54.453
> 
> 标签：python, import, dependencies, circular-dependency

我是 python 新手，为此我正在谷歌搜索和阅读 SO。

我有

pin.py：

```
from board import Board
class pin(object):
  board_id = Int()
  my_board = store.get(Board, board_id)

  def __init__(self, val): 
    ... 
```

板子.py：

```
from pin import Pin
class Board(object):
   id = Int()
   def __init__(self, val): 
     ...

Board.pins = ReferenceSet(Board.id, Pin.board_id) 
```

如您所见，我需要能够从其他类访问 Pin 和 Board。我看到[这里](https://stackoverflow.com/questions/9642451/python-files-import-from-each-other)只做`import pin`and `import board`。但是当我这样做然后我这样做`board.Board`或者`pin.Pin`例如在我的 pin.py 中我会得到`my_board = store.get(board.Board, board_id)`它给我这个错误

`AttributeError: 'module' object has no attribute 'Board'`

当我有上面的代码时，这并没有发生，只是没有循环导入。

为了澄清我的问题：

如何进行循环导入并从正在导入的文件中调用类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T20:17:26.453

您问题的真正答案是“不要使用循环导入”。将两个模块都需要的东西放在第三个模块中，或者将两个模块合二为一。

要更具体地了解您的案例与您链接的示例的情况：您不能在循环导入彼此模块的顶级模块代码中安全地使用循环导入引用。正如您链接到的另一个问题已经解释的那样，您必须通过仅访问函数内部的模块内容来“保护”循环引用。如果您尝试直接从另一个模块使用每个模块，就像您正在做的那样，它将永远无法工作，因为在尝试使用另一个模块之前，两个模块都无法完成运行，因此两个模块都*不会*完成运行。

# ios - 具有不同记录和 UIPickerView 的 NSFetchRequest

> ID：13038410
> 
> 赞同：2
> 
> 时间：2012-10-23T20:08:56.023
> 
> 标签：ios, core-data, uipickerview, nsfetchrequest

我正在尝试`UIPickerView`使用 fetch 的结果填充 a。我能够做到。由于有重复，我决定使用下面的代码来获取不同的记录和只需要的属性。该代码工作正常，因为数组`array1`&`dictlevel1`具有正确的数据（如下所示）。我无法弄清楚如何将其`array1`放入选择器视图中？

```
 NSError *error;
    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"Factors" inManagedObjectContext:managedObjectContext];

    [fetchRequest setEntity:entity];
    [fetchRequest setResultType:NSDictionaryResultType];
    [fetchRequest setReturnsDistinctResults:YES];
    [fetchRequest setPropertiesToFetch:@[@"level1"]];

    self.title = @"Factors";
    array1 = [[NSArray alloc] init];
    array1 = [managedObjectContext executeFetchRequest:fetchRequest error:&error]; 
    NSDictionary *dictlevel1 = [array1 dictionaryWithValuesForKeys:[NSArray arrayWithObject:@"level1"]];

    NSLog(@"%@", array1[1]);
    NSLog(@"%@", [dictlevel1 dictionaryWithValuesForKeys:[NSArray arrayWithObject:@"level1"]]); 
```

这是输出`NSLog`：

```
2012-10-23 14:55:47.774 CoreData2[1477:c07] (
        {
        level1 = "External Combustion Boilers";
    },
        {
        level1 = "Internal Combustion Engines";
    },
        {
        level1 = "Industrial Processes";
    },
        {
        level1 = "Petroleum and Solvent Evaporation";
    },
        {
        level1 = "Waste Disposal";
    },
        {
        level1 = "Stationary Source Fuel Combustion";
    },
        {
        level1 = "Miscellaneous Area Sources";
    },
        {
        level1 = "Mobile Sources";
    },
        {
        level1 = "Solvent Utilization";
    },
        {
        level1 = "Storage and Transport";
    },
        {
        level1 = "Waste Disposal, Treatment, and Recovery";
    },
        {
        level1 = "Natural Sources";
    }
)

2012-10-23 14:55:47.775 CoreData2[1477:c07] {
    level1 =     (
        "External Combustion Boilers",
        "Internal Combustion Engines",
        "Industrial Processes",
        "Petroleum and Solvent Evaporation",
        "Waste Disposal",
        "Stationary Source Fuel Combustion",
        "Miscellaneous Area Sources",
        "Mobile Sources",
        "Solvent Utilization",
        "Storage and Transport",
        "Waste Disposal, Treatment, and Recovery",
        "Natural Sources"
    );
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T20:37:19.593

与 a 非常相似`UITableView`，您必须处理[`UIPickerViewDataSource`](https://developer.apple.com/documentation/uikit/uipickerviewdatasource)和[`UIPickerViewDelegate`](https://developer.apple.com/documentation/uikit/uipickerviewdelegate)协议方法，这些方法为选择器提供数据。有关详细信息，请参阅链接的文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T11:09:10.500

我建议使用这样的代码片段来获得`@distinctUnionOfObjects`结果字典中给定键（例如 endCalYear）的不同结果（）：

```
NSArray *distinctYears = [periodsFilteredByDates
                valueForKeyPath:@"@distinctUnionOfObjects.endCalYear"]; 
```

然后，您可以使用和`pickerView:numberOfRowsInComponent:`返回行数， 您可以使用这样的代码片段为每个标题返回一个字符串：`distinctYears.count``pickerView:titleForRow:forComponent:`

```
NSNumber *endCalYear = distinctResults[row];
NSString *rowTitle = [NSString stringWithFormat:@"%@",endCalYear];
return rowTitle; 
```

# java - 如何使图像大小适合 JFrame 大小？

> ID：13038411
> 
> 赞同：9
> 
> 时间：2012-10-23T20:08:58.037
> 
> 标签：java, image, swing, jframe, jpanel

我有`JPanel`一个`JFrame`. 我在上面加载了一张图片，`JPanel`但它只显示了图片的一部分：这是我做的代码的一部分：

```
JPanel panelImg = new JPanel()
{
    public void paintComponent(Graphics g)
    {
        Image img = new ImageIcon("Welcome.png").getImage();
        Dimension size = new Dimension(img.getWidth(null), img.getHeight(null));
        setPreferredSize(size);
        setMinimumSize(size);
        setMaximumSize(size);
        setSize(size);
        setLayout(null);
        g.drawImage(img, 0, 0, null);
    }
};
mainFrame.add(panelImg); 
```

所以这就是它的样子：

![图片1](../Images/85e68c8b56b46a59e3850df38457d17e.png)

完整的图片如下所示：

![在此处输入图像描述](../Images/3e7ba5d9cc9e527ec435834d50b640fe.png)

有没有办法将图片缩放到`JFrame`s大小？提前致谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-23T20:11:38.033

您希望[`drawImage()`](http://docs.oracle.com/javase/7/docs/api/java/awt/Graphics.html#drawImage%28java.awt.Image,%20int,%20int,%20int,%20int,%20java.awt.image.ImageObserver%29)扩展至目标容器。有关替代方案，请参阅[此处](https://stackoverflow.com/a/6916719/230513)引用的文章。例如，

```
g.drawImage(img, 0, 0, getWidth(), getHeight(), this); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-23T20:17:24.083

首先，我不会在`paintComponent`方法中加载图像，这个方法被重复调用（有时是快速连续调用），你不想做任何需要时间执行或不必要地消耗资源的事情

查看[Java：维护 JPanel 背景图像的纵横比以](https://stackoverflow.com/questions/11959758/java-maintaining-aspect-ratio-of-jpanel-background-image/11959928#11959928)获取有关将图像填充/拟合到给定区域的建议

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-03T12:19:25.683

```
import java.awt.Graphics;
import java.awt.Image;
import javax.swing.JPanel;

public class ImagePanel extends JPanel {

    Image image;

    public void setBackground(Image image) {
        this.image = image;
    }

    @Override
    public void paintComponent(Graphics G) {
        super.paintComponent(G);
        G.drawImage(image, 0, 0, this.getWidth(), this.getHeight(), null);
    }

} 
```

然后使用 ImagePanel 对象方法`SetBackground`，如

```
imagePanel1.SetBackGround(ImageIO.read(new File("extensions/images/background.jpg"))); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-06-22T15:15:01.183

你可以试试这个：

```
Image img = new ImageIcon(ImageIO.read(new File("welcome.png"))
                               .getScaledInstance(WIDTH, HEIGHT, Image.SCALE_SMOOTH))); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-01-01T04:34:59.943

这很简单。按照这个例子，

```
public class BasePanel extends JPanel {

ImageIcon backImage;
public BasePanel() {
    backImage = new ImageIcon("src/images/welcome.png");
}

@Override
protected void paintComponent(Graphics g) {
    BufferedImage scaledImage = getScaledImage();
    super.paintComponent(g);
    g.drawImage(scaledImage, 0, 0, null);
}

private BufferedImage getScaledImage(){
    BufferedImage image = new BufferedImage(getWidth(),getHeight(), BufferedImage.TYPE_INT_RGB);
    Graphics2D g2d = (Graphics2D) image.createGraphics();
    g2d.addRenderingHints(new RenderingHints(RenderingHints.KEY_RENDERING,RenderingHints.VALUE_RENDER_QUALITY));
    g2d.drawImage(backImage.getImage(), 0, 0,getWidth(),getHeight(), null);

    return image;
}

} 
```

# wordpress - 如何从 get_query_var 获取类别 ID

> ID：13038415
> 
> 赞同：0
> 
> 时间：2012-10-23T20:09:07.910
> 
> 标签：wordpress, variables, loops

如何从查询中获取类别 ID？

例如我有以下网址：

```
http://localhost/website/[some-custom-tax]/[category] 
```

基本上，我想列出`category`archive.php 中给定的所有帖子

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T04:31:05.457

确保您没有更改查询。您可以使用 wordpress 的默认索引页面模板再次对其进行测试，您应该只获得您类别的帖子。

```
 while (have_posts()) :
       the_post();
       the_content();
    endwhile;

    endif;

    get_sidebar();
    get_footer(); 
?> 
```

[http://codex.wordpress.org/The_Loop_in_Action](http://codex.wordpress.org/The_Loop_in_Action)

# php - 从 json php 填充表单

> ID：13038416
> 
> 赞同：0
> 
> 时间：2012-10-23T20:09:08.520
> 
> 标签：php, json, forms

对于这个演示，我从表单获取输入，将它们放入 json 对象并通过 ajax 发送到服务器。如何使用服务器上的数据重新填充表单？我可以让它在控制台中打印，但似乎无法弄清楚如何以表格形式获取它。就像在表单字段中的某处放置类似 jsonObject.firstName 之类的东西一样简单吗？

形式：

```
div class="form">      
      <form method="GET" action="demo.html">  
      <section class="formSection">  
        <div class="dataChunk">
          <label for="firstName">First Name:</label>
          <input type="text"  id="jsonObject.firstName" maxlength="50" />  
        </div>                    
        <div class="dataChunk">    
          <label for="lastName">Last Name:</label>         
          <input type="text"  id="lastName" maxlength="50" />  
        </div>       
        <div class="dataChunk">   
          <label for="phoneNumber">Phone:</label>
          <input type="text"  id="phoneNumber" maxlength="10" />
        </div>             
        <div class="dataChunk">   
          <label for="address">Address:</label>
          <input type="text"  id="address" maxlength="50" />
        </div>  
       </section>                  
    </form> 
  </div> 
```

json对象

```
var jsonObject = {
  "firstName" : firstName, 
  "lastName" : lastName,
  "phone" : phone,
  "address" : address
  }; 
```

php

```
$name = $_REQUEST['firstName']." ".$_REQUEST['lastName'];
$phone = $_REQUEST['phone'];
$address = $_REQUEST['address'];

$person = Array();
$person['name'] = $name;
$person['phone'] = $phone;
$person['address'] = $address;

$returnObj = json_encode($person);
echo $returnObj;
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T01:45:41.837

您需要使用 $.each 遍历您的 php json 编码返回并通过选择器更新您的表单元素

```
 $(document).ready(function() {
    $('form').submit( function(){
      var values = serialize( $(this) );
      $.ajax({
         url: 'demo.php'
         data: values,
         Success: function(result){
           $.each(result, function( key, value ) ({
            $('#'+key).val(value); 
           });
         }
      });
     });
  }); 
```

未经测试，因为我在移动设备上，但总体布局在那里，如果我犯任何语法错误，我会更新

将 jsonobject 放在元素 id 前面不会自动解析 json 返回的对象

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T20:20:06.207

使用 jQuery 你会说

`$('#yourInputId').val(jsonObject.firstname);`

或者：（对不起，我对普通的 JS 有点生疏）类似于

`document.getElementById('yourInputId').value(jsonObject.firstname);`

当您的 jsonObject 可用时使用。

为了清楚起见，我更改了您输入 ID 的名称。希望这可以帮助

# sql - 如何创建一个简洁的 SQL“检查约束”，禁止所有字符串字段使用某些字符？

> ID：13038419
> 
> 赞同：1
> 
> 时间：2012-10-23T20:09:21.157
> 
> 标签：sql, tsql, sql-server-express, check-constraints

我有一个包含一些`VARCHAR`字段的 SQL (SQL Server Express 2008) 表。

我想创建一个`Check Constraint`确保没有任何`VARCHAR`值包含某些字符。

**示例：（**不允许在 FirstName 和 LastName 列中使用**<**、**>**或**?字符）**

```
(NOT [FirstName] LIKE '%<%' 
AND NOT [FirstName] LIKE '%>%' 
AND NOT [FirstName] LIKE '%?%')
AND 
(NOT [LastName] LIKE '%<%' 
AND NOT [LastName] LIKE '%>%' 
AND NOT [LastName] LIKE '%?%') 
```

上面的 SQL 语法可以正常工作，但如果有速记方法来做同样的事情，那就太好了。*请注意示例中的冗余。如果我想添加更多列和/或无效字符，这很麻烦*

如果我们能做这样的事情就好了：

```
NOT FirstName,LastName LIKE IN ('<','>','?') 
```

`Check Constraint`我可以在表达式中做这样的事情吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T20:36:36.640

您可以使用

```
NOT ([FirstName]  LIKE '%[<>?]%' OR [LastName]  LIKE '%[<>?]%') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-10T20:21:51.200

改变`table nom_table`，你应该添加`constraint ck check(firstname not like '%[<,>,?]%')`.

# mysql - 无法在 MySQL 5.5.25 中添加外键

> ID：13038421
> 
> 赞同：1
> 
> 时间：2012-10-23T20:09:40.270
> 
> 标签：mysql, sql, foreign-keys

我正在尝试在 MySQL 中添加一个带有错误 42S01 和 HY000 的简单外键

这是我尝试添加此外键时的输出...

**表格1**

```
show create table Agency;

CREATE TABLE `agency` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `name` varchar(255) NOT NULL,
  `paymentTypeName` varchar(255) NOT NULL,
  `enforceUserList` tinyint(1) NOT NULL,
  `templatesRelativePath` varchar(255) NOT NULL,
  `siteName` varchar(100) NOT NULL,
  `supportsUSA` tinyint(1) NOT NULL,
  `supportsCAN` tinyint(1) NOT NULL,
  `defaultCountry` varchar(40) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `FK_Agency_PaymentType` (`paymentTypeName`),
  CONSTRAINT `Agency_ibfk_1` FOREIGN KEY (`paymentTypeName`) REFERENCES `paymenttype` (`name`)
) ENGINE=InnoDB AUTO_INCREMENT=16 DEFAULT CHARSET=utf8; 
```

**表 2**

```
show create table Country;

CREATE TABLE `country` (
  `name` varchar(40) NOT NULL,
  `abbreviation` varchar(4) NOT NULL,
  `enabled` tinyint(1) NOT NULL,
  PRIMARY KEY (`name`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
```

**尝试添加外键**

```
alter table Agency add foreign key FK_Agency_Country_Name(defaultCountry) references Country(name);

[2012-10-23 14:04:24] [42S01][1050] Table '.\realtorprint_dev_4982\agency' already exists
[2012-10-23 14:04:24] [HY000][1025] Error on rename of '.\realtorprint_dev_4982\#sql-2b80_1141' to '.\realtorprint_dev_4982\agency' (errno: -1)
[2012-10-23 14:04:24] [42S01][1050] Table '.\realtorprint_dev_4982\agency' already exists 
```

**显示引擎 InnoDB 状态**（尝试添加外键后）

```
=====================================
121023 14:06:58 INNODB MONITOR OUTPUT
=====================================
Per second averages calculated from the last 20 seconds
-----------------
BACKGROUND THREAD
-----------------
srv_master_thread loops: 863 1_second, 863 sleeps, 78 10_second, 84 background, 84 flush
srv_master_thread log flush and writes: 864
----------
SEMAPHORES
----------
OS WAIT ARRAY INFO: reservation count 30, signal count 30
Mutex spin waits 11, rounds 183, OS waits 1
RW-shared spins 26, rounds 780, OS waits 26
RW-excl spins 3, rounds 132, OS waits 3
Spin rounds per wait: 16.64 mutex, 30.00 RW-shared, 44.00 RW-excl
------------------------
LATEST FOREIGN KEY ERROR
------------------------
InnoDB: Renaming table `realtorprint_dev_4982`.`#sql-2b80_7` to `realtorprint_dev_4982`.`agency` failed!
InnoDB: Renaming table `realtorprint_dev_4982`.`#sql-2b80_8` to `realtorprint_dev_4982`.`agency` failed!
InnoDB: Renaming table `realtorprint_dev_4982`.`#sql-2b80_8` to `realtorprint_dev_4982`.`agency` failed!
InnoDB: Renaming table `realtorprint_dev_4982`.`#sql-2b80_8` to `realtorprint_dev_4982`.`agency` failed!
InnoDB: Renaming table `realtorprint_dev_4982`.`#sql-2b80_8` to `realtorprint_dev_4982`.`agency` failed!
InnoDB: Renaming table `realtorprint_dev_4982`.`#sql-2b80_8` to `realtorprint_dev_4982`.`agency` failed!
InnoDB: Renaming table `realtorprint_dev_4982`.`#sql-2b80_1141` to `realtorprint_dev_4982`.`agency` failed!
InnoDB: Renaming table `realtorprint_dev_4982`.`#sql-2b80_1141` to `realtorprint_dev_4982`.`agency` failed!
------------
TRANSACTIONS
------------
Trx id counter 17517
Purge done for trx's n:o < 17517 undo n:o < 0
History list length 1149
LIST OF TRANSACTIONS FOR EACH SESSION:
---TRANSACTION 1750D, not started
MySQL thread id 4417, OS thread handle 0x2330, query id 49431 localhost 127.0.0.1 rpuser
show engine InnoDB status
--------
FILE I/O
--------
I/O thread 0 state: wait Windows aio (insert buffer thread)
I/O thread 1 state: wait Windows aio (log thread)
I/O thread 2 state: wait Windows aio (read thread)
I/O thread 3 state: wait Windows aio (read thread)
I/O thread 4 state: wait Windows aio (read thread)
I/O thread 5 state: wait Windows aio (read thread)
I/O thread 6 state: wait Windows aio (write thread)
I/O thread 7 state: wait Windows aio (write thread)
I/O thread 8 state: wait Windows aio (write thread)
I/O thread 9 state: wait Windows aio (write thread)
Pending normal aio reads: 0 [0, 0, 0, 0] , aio writes: 0 [0, 0, 0, 0] ,
 ibuf aio reads: 0, log i/o's: 0, sync i/o's: 0
Pending flushes (fsync) log: 0; buffer pool: 0
697 OS file reads, 596 OS file writes, 184 OS fsyncs
0.00 reads/s, 0 avg bytes/read, 0.00 writes/s, 0.00 fsyncs/s
-------------------------------------
INSERT BUFFER AND ADAPTIVE HASH INDEX
-------------------------------------
Ibuf: size 1, free list len 5, seg size 7, 7 merges
merged operations:
 insert 6, delete mark 1, delete 0
discarded operations:
 insert 0, delete mark 0, delete 0
Hash table size 1458971, node heap has 3 buffer(s)
0.00 hash searches/s, 0.00 non-hash searches/s
---
LOG
---
Log sequence number 6730688792
Log flushed up to   6730688792
Last checkpoint at  6730688792
0 pending log writes, 0 pending chkp writes
119 log i/o's done, 0.00 log i/o's/second
----------------------
BUFFER POOL AND MEMORY
----------------------
Total memory allocated 754434048; in additional pool allocated 0
Dictionary memory allocated 272477
Buffer pool size   44992
Free buffers       44282
Database pages     707
Old database pages 279
Modified db pages  0
Pending reads 0
Pending writes: LRU 0, flush list 0, single page 0
Pages made young 0, not young 0
0.00 youngs/s, 0.00 non-youngs/s
Pages read 686, created 21, written 446
0.00 reads/s, 0.00 creates/s, 0.00 writes/s
No buffer pool page gets since the last printout
Pages read ahead 0.00/s, evicted without access 0.00/s, Random read ahead 0.00/s
LRU len: 707, unzip_LRU len: 0
I/O sum[0]:cur[0], unzip sum[0]:cur[0]
--------------
ROW OPERATIONS
--------------
0 queries inside InnoDB, 0 queries in queue
1 read views open inside InnoDB
Main thread id 11192, state: waiting for server activity
Number of rows inserted 136, updated 7, deleted 5, read 84358
0.00 inserts/s, 0.00 updates/s, 0.00 deletes/s, 0.00 reads/s
----------------------------
END OF INNODB MONITOR OUTPUT
============================ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T21:43:32.990

如果我使用“代理”以外的其他名称作为该表的名称，您的 DML 查询将起作用（我尝试了代理、代理、代理，它们都有效，但代理没有，并且每次都使用新数据库）。那么恭喜！我认为您在 MySQL 中发现了一个非常晦涩的错误。如果你想提交它，你应该在重现脚本中包含这个语句，这样它就完成了：

```
CREATE TABLE `paymenttype`( `name` VARCHAR(255) NOT NULL, PRIMARY KEY (`name`) ) DEFAULT CHARSET=utf8; 
```

[http://bugs.mysql.com/](http://bugs.mysql.com/)

稍微偏离主题：我之前向 MySQL 提交了类似的模糊错误，只是为了让它们被标记为一个没有链接的奇怪错误 ID 的重复，并且没有出现在错误跟踪器中，所以大概是由 Oracle 掌舵现在是“高级”错误跟踪器......也许如果我成为企业合作伙伴，我可以获得我的错误补丁！好玩的东西！

# batch-file - 批处理文件来搜索文本并将其写入文本文件

> ID：13038424
> 
> 赞同：3
> 
> 时间：2012-10-23T20:09:49.900
> 
> 标签：batch-file

我有一个大（20MB）文本（输入）文件，其中包含各种文本行（包括空白行）。我想要一个批处理文件，它可以在输入文件中找到特定文本，获取搜索词所在的字符串，将该字符串写入另一个文本（输出）文件，并在该字符串后面附加一个空格、逗号和后面的行在输出文件中的输入文件中。

1.  输入文件数据：

    ```
    NORTHING         EASTING   O-HEIGHT     CODE FFF STATION   STD DEV MAPPROJ 
    ```

    * * *

    NEO 000 020720618 4829559.470 ,12082011c.lst

    0.015 0.015 0.015
    NEO 000 020740188 4835430.827 ,12082011c.lst

    0.009 0.009 0.009
    NEO 000 020750232 4841535.651 ,12082011c.lst

    0.004 0.004 0.004
    PLH 000 020720615 N 43 36 15.44568 W 79 32 38.22754 67.892 m 0 ,12082011c.lst

    0.014 0.014 0.014 ,12082011c.lst

2.  搜索词：“NEO”

3.  输出：

    Neo 000 020720618 4829559.470,12082011C.LST，0.015 0.015 0.015
    Neo 000 020740188 4835430.827,12082011C.LST，0.009 0.009 0.009
    Neo 000 020750232 4841535.651,12082011C.LST，0.004 0.004 0.004

我尝试使用 findstr 命令，它会写入该行的第一部分（ NEO 000 020720618 4829559.470 ,12082011c.lst），但我不知道如何获取下一行并将其附加到字符串中。（字符串比我在这个例子中显示的要长，所以如果变量有字符限制，请告诉我）。谢谢，加布。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T14:18:43.983

正如我在评论中指出的那样，批处理不是处理文本文件的好选择。但这里有一个针对您的问题的本机批处理解决方案。我假设您正在搜索第一个令牌是 NEO 的行，而不是在其中任何地方包含 NEO 的行。

看起来您想忽略空行，这很好，因为 FOR /F 忽略了空行。

`;`由于默认的 FOR /F EOL 选项，此解决方案还将忽略任何以开头的行。这可以通过将 EOL 设置为换行符来消除，但[语法](http://www.dostips.com/forum/viewtopic.php?p=10729)很难看。我假设您没有以 . 开头的行`;`。

与任何批处理解决方案一样，行数限制为 ~8191 字节。

```
@echo off
setlocal disableDelayedExpansion
set "ln1="
>"output.txt" (
  for /f "useback delims=" %%A in ("input.txt") do (
    if defined ln1 (
      set "ln2=%%A"
      setlocal enableDelayedExpansion
      echo(!ln1! ,!ln2!
      endlocal
      set "ln1="
    )
    for /f %%B in ("%%A") do if "%%B"=="NEO" set "ln1=%%A"
  )
) 
```

# c# - 正则表达式匹配图像路径并替换为另一个

> ID：13038425
> 
> 赞同：1
> 
> 时间：2012-10-23T20:09:50.760
> 
> 标签：c#, asp.net, regex

使用正则表达式，我正在努力弄清楚如何匹配 HTML 文档中的图像源模式，并将其替换为不同的路径：

像这样替换源：

**img alt="description" align=left src="/xxxx/ssss/sssss/sssss/Photos/myimage.jpg"**

像这样：

**img alt="description" align=left src="http://www.mysite.com/subsite/images/myimage.jpg"**

保持相同的图像名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T20:33:08.917

你可以试试这个：

`/<img\s+([^s]\w+=\"[^"]+\"\s+)*src=\"([^"]+)\"\s+(\w+=\"[^"]+\"\s+)*\/>/i`

并且图像 src 将保存在 \2 中，其中 \w 表示任何单词字符（字母、数字、下划线），而 \s 表示任何空格字符。这个正则表达式将匹配 src 即使它不是第三个属性。

您可以在 rubular.com 上尝试一下，看看它是如何工作的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T20:19:06.050

搜索模式：

```
img alt="description" align=left src="\K[^"]*(?=") 
```

将匹配替换为以下值：

```
http://www.mysite.com/subsite/images/myimage.jpg 
```

（抱歉，不懂 C#。）

# ruby - Rails Grape-Swagger：获取 base_path 的当前域

> ID：13038428
> 
> 赞同：4
> 
> 时间：2012-10-23T20:10:02.810
> 
> 标签：ruby, api

我有以下葡萄根类定义

```
module Api
  class Root < Grape::API
    mount Api::Version1

    add_swagger_documentation :mount_path => 'docs', 
                              :base_path => "/api", 
                              :markdown => true, 
                              :hide_documentation_path => true
  end
end 
```

问题是 ":base_path" 应该包含一个完整的 URL，我不知道从哪里得到它。我检查了 ENV 变量，当前域附近没有任何内容。也没有任何类型的“请求”对象。Ruby 中有什么方法可以获取当前域，即 HTTP_HOST 变量吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-08-05T08:43:58.710

好的，对于这些年来在这里徘徊的任何人（就像我一样）， - 这是对我有用的解决方案：

```
add_swagger_documentation base_path: lambda { |request| "http://#{request.host}:#{request.port}" }
                          ... #other options 
```

基本上你只需要传递一个产生`Grape::Request`实例的过程，你可以从中提取主机和端口数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T19:40:48.563

我使用`http://localhost:9292/api`. 我认为另一种选择是将这些设置保存在配置 yml 文件中，您可以根据 RACK_ENV 的值进行设置。

# c# - 如何正确继承和隐藏基方法

> ID：13038429
> 
> 赞同：1
> 
> 时间：2012-10-23T20:10:04.123
> 
> 标签：c#, .net, oop, inheritance

我有以下继承：

```
class A
{
    void Configure(object param1) {...};
}

class B : A
{
    void Configure(object param1) {...}; // The method is not defined in B, it is available from the base class. This is just the desired interface of class B
}

class C : A
{
    void Configure(object param1, object param2) {...};
} 
```

我不希望 C 类有一个带 param1 的配置可见，因为在这种情况下它会使对象不完整。

我尝试覆盖，但覆盖不能改变可见性。

我发现的唯一方法是调用 A 类方法`protected void ConfigureBase(object param1) {...};`并使 B 类的方法 Configure 调用 ConfigureBase。

由于我对这种设计并不完全满意，因为它让我重新定义了每个类 Configure 是否有标准的方法来处理这个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T20:13:23.463

这是不可能的。您可能让该方法抛出异常，因此无法使用它，但编程中继承的基本原则之一是始终可以将子级视为其父级类型。以下应该怎么做：

```
A obj = new C();

obj.Configure(new object());//should this work, or not? 
```

按照设计，没有办法限制孩子不能做父母可以做的事情。`C`如果真的不应该访问方法，您将需要从根本上重新设计您的程序`Configure(object obj)`。这可能意味着它`C`真的不应该扩展`A`（它可能对两者都有意义`A`并且`C`实现一个公共接口。），或者只是它`Configure`真的不应该是那种类型的公共方法。在不了解更多信息的情况下，很难提出替代方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T20:14:12.977

> 有处理这个的标准方法吗？

是：使配置过程成为初始化的一部分。

而不是暴露`Configure`，在构造函数中执行所有初始化。这将使您的类只公开有意义的替代方案：

```
class A {
    public A(object param1) {...};
}

class B : A {
    public B(object param1) : base(param1) {...}; // This re-exposes A's constructor
}

class C : A {
    // Note that A(param1) constructor is not available, even though C inherits A
    public C(object param1, object param2) : base(param1)  {...};
} 
```

# android - 如何从类中调用服务中的公共方法

> ID：13038433
> 
> 赞同：0
> 
> 时间：2012-10-23T20:10:12.527
> 
> 标签：android, android-service

如果我在服务类中有一个内联的计时器任务，并且服务类有一个公共方法。我如何从 TimerTask 调用我的服务类中的公共方法？

```
 class uiCheckTask extends TimerTask {
        Boolean secDialog = false;
        NavOverrideService myService;

        public void run() {
            try {
                ActivityManager am = (ActivityManager) getApplicationContext().getSystemService(Context.ACTIVITY_SERVICE);
                List<ActivityManager.RunningAppProcessInfo> processList = am.getRunningAppProcesses();

               String cProcess = processList.get(0).processName;

               if (!cProcess.equals("com.example.services_test") && !secDialog) {
                  // myService.launchSecurity(); /// HELP HERE!
               } else {

               }
            } catch(Exception ex) {

            }
        }
    } 
```

启动安全：

```
public void launchSecurity(){
    Log.v("LAUNCHING", "((((((((((((((((((((SECURITY)))))))))))))))))");
    Intent intent = new Intent(this, SecurityService.class);
    startService(intent);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T20:48:38.110

如果`uiCheckTask`是你的内部类`Service`，那么你可以通过调用公共方法

```
(MyService.this).launchSecurity() 
```

请注意，这`MyService`是您的服务的类名，而不是实例或局部变量。

# msbuild - 使用 MSBuild 在 .csproj 中包含文件

> ID：13038437
> 
> 赞同：2
> 
> 时间：2012-10-23T20:10:32.437
> 
> 标签：msbuild, csproj, assemblyinfo

我有一个 MSBuild 脚本，它在编译具有许多项目的解决方案之前实现了一些操作。
我需要在每个项目属性文件夹中包含一个在此过程中创建的文件 (SharedAssemblyInfo_$(ambiente).cs)。

有什么线索可以解决这个问题吗？

提前致谢！

PS.：这是我的脚本：

```
<?xml version="1.0" encoding="utf-8"?>
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003" ToolsVersion="4.0">
  <Import Project="$(MSBuildExtensionsPath)\MSBuildCommunityTasks\MSBuild.Community.Tasks.Targets" />
  <Import Project="$(MSBuildBinPath)\Microsoft.CSharp.targets" />
  <Import Project="$(MSBuildExtensionsPath32)\Microsoft\VisualStudio\v10.0\WebApplications\Microsoft.WebApplication.targets"/>

  <ItemGroup>
    <Solution Include="Stoque.ECM.sln" />

    <Compile Include="..\SharedAssemblyInfo_$(ambiente).cs">
        <Link>Properties\SharedAssemblyInfo_$(ambiente).cs</Link>
    </Compile>

  </ItemGroup>
  <PropertyGroup>
    <TMaior>2</TMaior>
    <TMedio>0</TMedio>
    <TMenor>0</TMenor>

    <DeployDir>E:\compartilhada\abaris</DeployDir>
  </PropertyGroup>

  <Target Name="GetProjects">
    <GetSolutionProjects Solution="%(Solution.Fullpath)">
      <Output ItemName="ProjectFiles" TaskParameter="Output" />
    </GetSolutionProjects>
  </Target>

  <Target Name="AssemblyVersion">
    <Time Format="yyMMdd">
      <Output TaskParameter="FormattedTime" PropertyName="TRevisao" />
    </Time>
    <AssemblyInfo CodeLanguage="CS" OutputFile="..\SharedAssemblyInfo_$(ambiente).cs" AssemblyVersion="$(TMaior).$(TMenor).*" AssemblyFileVersion="$(versao)" AssemblyInformationalVersion="$(versao)" />   
    <!-- <Copy SourceFiles="..\SharedAssemblyInfo_$(ambiente).cs" DestinationFolder="%(ProjectFiles.Filename)\Properties" ContinueOnError="false" /> -->
  </Target>

  <Target Name="Compile" DependsOnTargets="GetProjects">
    <MSBuild Projects="%(ProjectFiles.Fullpath)"
    Properties="WebProjectOutputDir=$(DeployDir)\$(ambiente)\$(versao)\SITES_PUBLICADOS\%(ProjectFiles.Filename);Platform=$(Platform);Configuration=$(Configuration);OutputPath=$(DeployDir)\$(ambiente)\$(versao)\%(ProjectFiles.Filename)">
    </MSBuild>
  </Target>

</Project> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T18:52:26.873

我看到您的根 MSBuild .proj 中有一个 <ItemGroup> -> <Compile> 项目。这是一个很好的第一步，但您需要将其保留在实际的 .csproj 中，而不仅仅是您的构建脚本。

为此，请向每个 .csproj 添加一个 BeforeBuild 任务，以作为链接添加到您想要的文件中。

就像是：

```
<Target Name="BeforeBuild">
  <_FilesToInclude Include="..\SharedAssemblyInfo_$(ambiente).cs" />
    <Compile Include="@(_FilesToInclude->'%(Filename)%(Extension)')">
      <Link>%(RecursiveDir)%(Filename)%(Extension)</Link>
    </Compile>
  </ItemGroup>
</Target> 
```

# mono - 在控制器构造函数中访问 GUI 组件时出现 NullReferenceException

> ID：13038438
> 
> 赞同：3
> 
> 时间：2012-10-23T20:10:40.687
> 
> 标签：mono, xamarin.ios, monomac

在 Mono 中，我有一个带有控制器的简单 NSWindow，我删除了一个 NSSplitView 和一个 NSButton。

如果我尝试从构造函数或方法中访问 NSSplitView，`Initialize()`我会得到一个 nullReferenceException。相反，如果我尝试从 ButtonClicked 方法访问 NSSplitView，它会起作用。

好吧，似乎框架在调用控制器的构造函数后创建了 GUI 组件。但是，如果不在构造函数中，我应该将配置 GUI 组件的代码放在哪里？

提前致谢。约翰内斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T06:26:13.980

您应该`AwakeFromNib`在控制器类中使用该方法。一旦所有对象都已加载并正确连接，它就会被调用。

```
public override void AwakeFromNib ()
{
    base.AwakeFromNib ();

    // Do something here with the outlets
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T00:09:16.640

你应该使用

```
public override void ViewDidLoad() {
    base.ViewDidLoad();
} 
```

用于配置您的视图，因为这是刚刚加载视图时调用的方法，而不是在您实例化控制器时调用的方法。如果您在其中配置视图，`AwakeFromNib()`您将强制实例化您的视图，而您现在可能不需要它们。实际上，当您创建控制器时，视图不会创建，直到有人尝试访问 viewController.View。

# perl - 使用 perl 从多表 html 文件中提取特定表

> ID：13038441
> 
> 赞同：-2
> 
> 时间：2012-10-23T20:10:53.513
> 
> 标签：perl, html-parsing, extract

我有一个包含三个表的 html 文件。但我只想提取三个表中的一个。我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T20:12:35.163

您可以使用已知`Perl`模块执行此操作，例如：

*   `LWP`
*   `WWW::Mechanize`
*   `HTML::TreeBuilder`
*   `HTML::TreeBuilder::XPath`

所有都在[http://search.cpan.org](http://search.cpan.org)

最后一个 Perl 模块非常有用，您可以使用`Xpath`如下表达式：

```
//table[0]/tr[3]/td[2]/text() 
```

例如，从第一个打印`td`第三个中第二个元素的文本。`tr``table`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T20:19:42.197

提取部分 HTML 文档的一个很好的模块是[`HTML::Query`](https://metacpan.org/module/HTML%3a%3aQuery).

它提供了一个类似 jQuery 的界面，用于选择要提取文档的哪个部分。

# sql - 动态更新创建的临时表？基本？

> ID：13038444
> 
> 赞同：3
> 
> 时间：2012-10-23T20:11:10.110
> 
> 标签：sql, sql-server, tsql

我有具有“x”行数的**表 A。**（对于这个例子有 8 行）

我通过使用游标创建具有“x”列数的**Table-C 。****（使这种动态化；如果向Table-A**添加更多行，则在**Table-C**中创建更多列）

```
表 C（x = 1 到 8）
   用户 ID 1 2 3 4 5 6 7 8

```

创建**Table-C**后，根据从网页输入框传回的 userID 将行插入到**Table-C中。**（这是动态完成的）

```
插入后的表-C：
   用户 ID 1 2 3 4 5 6 7 8  
   57 null null null null null null null null  
   74 null null null null null null null null  

```

现在我希望执行 UPDATE
**Table-B**包含数据，其中列“x-column”将 UserID 关联到创建的**Table-C中的列**

```
表-B：  
用户 ID x 列  
34 2  
34 3  
57 2  
57 3  
57 8  
74 2  
74 4  
74 5  
74 7  
74 8  
93 2  
93 4  

```

所以最终结果是使用 1 动态更新**Table-C**，其中 Table-B.UserID = Table-C.column_heading

```
更新后的表 C 应如下所示：  
   用户 ID 1 2 3 4 5 6 7 8  
   57 空 1 1 空 空 空 1  
   74 空 1 空 1 1 空 1 1  

```

我很难弄清楚构建将处理此问题的 UPDATE 循环的语法。我需要使用游标吗？

我很确定这不是火箭科学，我还在学习！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T20:27:06.160

在没有看到您的整个过程的情况下，这是我关于如何执行此操作的建议。问题的一部分是结构，`tablec`要做到这一点，您首先要使用该`UNPIVOT`函数取消透视`tablec`并插入到临时表中：

```
select userid,
  value,
  col
into #temp
from tablec
unpivot
(
  value for col in ([1], [2], [3], [4], [5], [6], [7], [8])
) u 
```

其次，使用以下方法更新临时表中的数据`tableb`：

```
update t
set value = b.cnt
from #temp t
left join
(
  select count(x_column) cnt, x_column, userid
  from tableb
  group by x_column, userid
) b
  on t.userid = b.userid 
  and t.col = b.x_column 
```

最后，使用该`PIVOT`函数将数据转换回您想要的格式：

```
select *
from
(
  select userid, value, col
  from #temp
) x
pivot
(
  max(value)
  for col in ([1], [2], [3], [4], [5], [6], [7], [8])
) p 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/a616d/9)。

一些建议是看看你是否需要`tablec`在你现在的位置实际创建，如果不需要，那么你可以在执行时创建它`PIVOT`，那么数据就是你需要的最终结果。但是，您可以将数据保留为行格式，然后像我一样将其作为列返回。

如果要转换的列数未知，则可以使用动态 sql 执行此操作。

# python - 用于验证数字的 Python 正则表达式

> ID：13038450
> 
> 赞同：0
> 
> 时间：2012-10-23T20:11:37.053
> 
> 标签：python, regex

我想为 python 片段创建一个正则表达式。

```
import re
pattern = "\d*\.?\d+[Ee]?[+-]?\d*"
r = re.compile(pattern)
txt = """
12
.12
12.5
12.5E4
12.5e4
12.4E+4
12E4
12e-4
"""
x = r.findall(txt)
print(x) 
```

用于过滤来自 txt 的所有有效输入，此代码很好，但输入无效，例如

> .12e, 12.3+4

也被允许我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T20:26:07.920

不需要时不要使用正则表达式。让 Python 确定哪些是有效的更符合 Pythonic[tm]（并且更容易、更可靠）。

```
results = []
for line in txt.split():
    try:
        float(line)
    except ValueError:
        pass
    else:
        results.append(line)
print results 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T20:24:08.533

我建议你使用正则表达式模式

```
^(?=\.?\d)\d*(?:\.\d*)?(?:[eE][+-]?\d+)?$ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T20:17:21.730

传统的正则表达式是这样的：

```
pattern = (
    "(?:"
    r"\d+(?:\.\d+)(:?[Ee][-+]?\d+)"
    "|"
    r"\.\d+(:?[Ee][+-]?\d+)"
    ")"
) 
```

但是你总是可以用简单的方法做事：

```
def is_number(x):
    try:
        float(x)
        return True
    except ValueError:
        return False 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T20:14:39.827

你可以试试：`\d*\.?\d+(?:[Ee][+-]?\d+)?$`。这将指数部分标记为一个组。我还添加了一个`$`以确保它与字符串的结尾匹配。

此外，由于您的正则表达式包含`\`，因此您应该使用原始字符串文字，例如：`r'\n'`，它是文字`\n`，而不是换行符。

更简单的方法是使用`float()`并检查`ValueError`异常。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-23T20:14:52.543

尝试将您的正则表达式更改为以下内容：

```
\d*\.?\d+(?:[Ee][+-]?\d+)? 
```

这使得如果`e`or`E`存在，则始终至少有一个数字，因此`+`and`-`仅当它们跟随`e`or时才有效`E`。

请注意，您应该使用原始字符串文字来确保正确转义反斜杠（特别不会影响此字符串，但如果您尝试`\b`在正则表达式中使用类似的东西，您会看到不同之处）：

```
pattern = r"\d*\.?\d+(?:[Ee][+-]?\d+)?" 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-23T20:29:46.980

你在这里，可能是最简单的：

```
^(\d*\.?\d+([Ee][+-]?\d+)?)$ 
```

将 ^ 和 $ 替换为您想要的分隔符，空格或其他内容。

解决方案说明：

您的解决方案

```
\d*\.?\d+[Ee]?[+-]?\d* 
```

允许 E 放置不带数字 -> 因此 \d+ 在我的末尾。我还制作了 E 和可选的 +/-，然后是单个组中的强制数字（即，将其全部括在括号中），因此它们不能没有彼此而存在。整个组 ([Ee][+-]?\d+) 是可选的 (?) 以适应没有该符号的数字示例。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-23T20:31:59.477

或者，避免一起使用正则表达式，使用 Python 标记器来查找它们：

**test2.txt**

> 一些颠簸
> 2.34
> 1.7e2
> 一些颠簸

**示例代码**

```
from tokenize import generate_tokens, NUMBER

source = open('test2.txt').readline
numbers = [ (val, eval(val)) for typ, val, _, _, _ in generate_tokens(source) if typ==NUMBER]
print numbers
# [('2.34', 2.34), ('1.7e2', 170.0)] 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-23T20:19:04.837

这样的事情应该这样做（未经测试）：

```
"\d*\.?\d+(?:[Ee][+-]\d)?\d*" 
```

# spring - Spring getBean(类 interfaceToCreate, Object... args) 方法丢失了吗？

> ID：13038455
> 
> 赞同：3
> 
> 时间：2012-10-23T20:11:46.270
> 
> 标签：spring

我试图为我的春豆创建工厂类

```
public interface MyBean implements TBean{}

@Component
@Scope("prototype")
public class MyBeanImpl implements MyBean{
   public MyBeanImpl(Request request){//..}
}

@Component
public class MyFactory {
    public <T extends TBean> T createbean(Class<T> interfaceToCreate, Object... args) {
        return (T)AppContext.getApplicationContext().getBean(interfaceToCreate, args);
    }
} 
```

方法`AppContext.getApplicationContext()`返回[ApplicationContext](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/context/ApplicationContext.html)对象

在这里，我应该能够创建一个弹簧豆，如：

```
@Autowired
protected MyFactory factory;

Request myRequest;
void somemethod(){
    factory.createbean(MyBean.class, myRequest)
} 
```

但是[BeanFactory](http://static.springsource.org/spring/docs/2.0.x/api/org/springframework/beans/factory/BeanFactory.html) 没有公开任何方法，例如：`getBean(Class<T> clazz, Object... args)`而且我没有类的默认构造`MyBeanImpl`函数

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T20:37:05.530

您可以分两步实现。提供`ListableBeanFactory`了一种方法`String[] getBeanNamesForType(Class<?> type)`。一旦你获得了你的类型的 bean 名称，你就可以调用`BeanFactory.getBean(String name, Object... args)`.

# java - 在主屏幕上使用后台服务绘制位图图像

> ID：13038458
> 
> 赞同：4
> 
> 时间：2012-10-23T20:12:10.687
> 
> 标签：java, android, layout, android-windowmanager

当此按钮点击调用的后台服务时，我有一个带有就绪按钮的 UI。我需要在主屏幕上设置位图图像，就像屏幕上的划痕一样。有没有办法在不显示活动布局的情况下做到这一点。或者，即使我们使用布局在屏幕上显示该图像，那么**我也需要 background (home、buttons 和所有其他当前打开的东西) active**。 ![](../Images/9554a080f7384227fb8e6b6db6073d19.png).

我附上了上面的图片作为参考，你可以看到我想要做什么。请帮我。您的关注将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-24T19:53:06.503

对你来说这是迟到的答案，但也许它可以拯救别人的一天...... :)

`Permission : android.permission.SYSTEM_ALERT_WINDOW`

```
 class ScreenOverlayService extends Service {
HUDView mView;

@Override
public IBinder onBind(Intent intent) {
    return null;
}

@Override
public int onStartCommand(Intent intent, int flags, int startId) {
    Log.i("onStartCommand", "called....");      

    //      return android.app.Service.START_STICKY;    // don't kill service...
    return START_NOT_STICKY;
}

@Override
public void onCreate() {
    super.onCreate();

    mView = new HUDView(this);

    WindowManager.LayoutParams params = new WindowManager.LayoutParams(
            WindowManager.LayoutParams.TYPE_SYSTEM_OVERLAY,
            WindowManager.LayoutParams.FLAG_WATCH_OUTSIDE_TOUCH,
            PixelFormat.TRANSLUCENT);

    params.gravity = Gravity.RIGHT | Gravity.TOP;
    params.setTitle("Load Average");
    WindowManager wm = (WindowManager) getSystemService(WINDOW_SERVICE);
    wm.addView(mView, params);

}

@Override
public void onDestroy() {
    super.onDestroy();

    if(mView != null){
        ((WindowManager) getSystemService(WINDOW_SERVICE)).removeView(mView);
        mView = null;
    }
}

class HUDView extends ViewGroup {
    private Paint mLoadPaint;
    Context context;

    public HUDView(Context context_)
    {
        super(context_);
        context = context_;

        mLoadPaint = new Paint();
        mLoadPaint.setAntiAlias(true);
        mLoadPaint.setTextSize(10);
        mLoadPaint.setARGB(255, 255, 0, 0);
    }

    @Override
    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);
        //canvas.drawText("Hello World", 5, 15, mLoadPaint);

        // Read the image
        Bitmap markerImage = BitmapFactory.decodeResource(getResources(), R.drawable.pic1);

        //  Draw it, centered around the given coordinates
        canvas.drawBitmap(markerImage,
                screenPoint.x - markerImage.getWidth() / 2,
                screenPoint.y - markerImage.getHeight() / 2, null);

    }

    @Override
    protected void onLayout(boolean arg0, int arg1, int arg2, int arg3, int arg4) {
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        return super.onTouchEvent(event);
    }
} 
```

}

# php - 选择框多级

> ID：13038464
> 
> 赞同：1
> 
> 时间：2012-10-23T20:12:44.977
> 
> 标签：php, mysql, drop-down-menu

我目前正在制作产品页面。我需要一个选择框，显示在其中添加产品的多级类别。需要类似（php/mysql 动态）：

```
<option>Workstations</option>
<option>--Macs</option>
<option>--Windows</option>
<option>Software</option>
<option>--Image editing</option>
<option>----Pro</option>
<option>----Semi pro</option> 
```

我的 mysql 字段是 cat_id、cat_name、cat_parent。我有以下代码，那么有什么方法可以自定义它以使用 ul/li 的选择框？

```
function display_children($parent, $level) {
    $result = mysql_query("SELECT a.id, a.label, a.link, Deriv1.Count FROM `menu` a  LEFT OUTER JOIN (SELECT parent, COUNT(*) AS Count FROM `menu` GROUP BY parent) Deriv1 ON a.id = Deriv1.parent WHERE a.parent=" . $parent);
    echo "<ul>";
    while ($row = mysql_fetch_assoc($result)) {
        if ($row['Count'] > 0) {
            echo "<li><a href='" . $row['link'] . "'>" . $row['label'] . "</a>";
            display_children($row['id'], $level + 1);
            echo "</li>";
        } elseif ($row['Count']==0) {
            echo "<li><a href='" . $row['link'] . "'>" . $row['label'] . "</a></li>";
        } else;
    }
    echo "</ul>";
}

display_children(0, 1); 
```

问候，西蒙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T20:31:33.387

如果一个选择框是你真正想要的，你只需要用 select 替换 ul 标签，用 option 替换 li 标签。

**修改后的PHP：**

```
function display_children($parent, $level) {
    $result = mysql_query("SELECT a.id, a.label, a.link, Deriv1.Count FROM `menu` a  LEFT OUTER JOIN (SELECT parent, COUNT(*) AS Count FROM `menu` GROUP BY parent) Deriv1 ON a.id = Deriv1.parent WHERE a.parent=" . $parent);
    echo '<select onchange="showProduct(this.value);">';
    while ($row = mysql_fetch_assoc($result)) {
        if ($row['Count'] > 0) {
            echo "<option value='" . $row['link'] . "'>" . $row['label'];
            display_children($row['id'], $level + 1);
            echo "</option>";
        } elseif ($row['Count']==0) {
            echo "<option value='" . $row['link'] . "'>" . $row['label'] . "</option>";
        } else;
    }
    echo "</select>";
}

display_children(0, 1); 
```

唯一的问题是链接在选择框中不起作用。我建议研究使用 select 的 onchange 属性，并在从选择框中选择项目时使用 javascript 来处理逻辑。

**Javascript：**

```
function showProduct(productLink) {
    //do something with the product value
    // maybe something like...
    location.href = productLink;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T20:23:06.177

像这样的东西可以解决问题：

```
function display_children($parent, $level) {
    $result = mysql_query("SELECT a.id, a.label, a.link, Deriv1.Count FROM `menu` a  LEFT OUTER JOIN (SELECT parent, COUNT(*) AS Count FROM `menu` GROUP BY parent) Deriv1 ON a.id = Deriv1.parent WHERE a.parent=" . $parent);

    $indent = str_repeat('-', $level);
    $tpl = '<option value="%s">%s</option>';

    while ($row = mysql_fetch_assoc($result)) {

        echo sprintf($tpl, $row['link'], $indent . $row['label']);

        if ($row['Count'] > 0) {
            display_children($row['id'], $level + 1);
        }
    }
} 
```

我认为你也可以稍微简化你的查询

```
 $result = mysql_query("SELECT a.id, a.label, a.link, (SELECT COUNT(id) FROM `menu` WHERE parent = a.id) AS Count FROM `menu` a  WHERE a.parent=" . $parent); 
```

**重做示例**

以下将允许您通过 1 个查询完成整个过程。由于闭包，它使用 PHP 5.3。

```
// I assume this is how your data comes out of MySQL
$items = array(
    array('id' => 1, 'label' => 'Item One',  'link' => 'Link One',    'parent' => 0),
    array('id' => 2, 'label' => 'Child One', 'link' => 'Link Two',    'parent' => 1),
    array('id' => 3, 'label' => 'Child Two', 'link' => 'Link Three',  'parent' => 1),
    array('id' => 4, 'label' => 'Item Two',  'link' => 'Link Four',   'parent' => 0),
    array('id' => 5, 'label' => 'Child One',  'link' => 'Link Five',  'parent' => 4),
    array('id' => 6, 'label' => 'Child Two',  'link' => 'Link Six',   'parent' => 4),
    array('id' => 7, 'label' => 'Child Three',  'link' => 'Link Six',   'parent' => 6),
    array('id' => 8, 'label' => 'Child Four',  'link' => 'Link Six',   'parent' => 6),
);

// Loop using references to build a tree
$childs = array();
foreach($items as &$item)
{
    $childs[$item['parent']][] = &$item;
}

unset($item);

foreach($items as &$item)
{
    if(isset($childs[$item['id']]))
    {
        $item['children'] = $childs[$item['id']];
    }
}
// We now have a tree with 'children' key set on each node that has children
$tree = $childs[0];

// Prepare a template and recursive closure (note reference on &$print)
$tpl = '<option value="%s">%s %s</option>';
$print = function($item, $indent = '') use (&$print, $tpl)
{
    echo sprintf($tpl, $item['link'], $indent, $item['label']) . "\n";

    if(isset($item['children']))
    {
        foreach($item['children'] as $child)
        {
            $print($child, $indent . '-');
        }
    }
};

echo '<select onchange="showProduct(this.value);">';
// Call the function for each top-level node
foreach($tree as $row)
{
    $print($row);
}
echo '</select>';

/*
<select onchange="showProduct(this.value);">
<option value="Link One"> Item One</option>
<option value="Link Two">- Child One</option>
<option value="Link Three">- Child Two</option>
<option value="Link Four"> Item Two</option>
<option value="Link Five">- Child One</option>
<option value="Link Six">- Child Two</option>
<option value="Link Six">-- Child Three</option>
<option value="Link Six">-- Child Four</option>
</select>
*/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T20:15:21.577

我想您可能正在寻找`<optgroup>`我从未在多层中使用过它，但值得一试。

[http://www.htmldog.com/reference/htmltags/optgroup/](http://www.htmldog.com/reference/htmltags/optgroup/)

# android - Android GUI - 如何强制按钮到下一行？

> ID：13038469
> 
> 赞同：7
> 
> 时间：2012-10-23T20:13:00.560
> 
> 标签：android, user-interface, layout

对不起，如果我问这样一个基本的问题。我整个早上都在尝试谷歌，并阅读了 developer.android.com 上的文档，但我找不到解决方案。

简而言之，我想做一个如下所示的界面：

![在此处输入图像描述](../Images/7c80e17bf3577c7084dce9e2690fe330.png)

这是我到目前为止所拥有的：

![在此处输入图像描述](../Images/da7dddea548f5c37661ea39ef81531a6.png)

现在，我试图将 2 个按钮带到下一行，但我仍然没有运气。如果我将 android:orientation="horizo​​ntal" 更改为 "vertical"，则所有内容都垂直对齐。我试图将 android:orientation="vertical" 线带入 Button 标记内，但这似乎不起作用。

我还能尝试什么？有人能给我一些指点吗？（我是 Android 开发和所有这些 XML 东西的新手）。

* * *

下面是我的 XML 代码：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="horizontal"
>

<EditText android:id="@+id/txt_Input"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"

        android:hint="@string/txt_Input"

        android:layout_weight="4"                      
/>
<Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/btn_Send" 

        android:layout_weight="1"

        android:onClick="sendMessage"
/>

<Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/btn_Send" 

        android:layout_weight="1"

        android:onClick="sendMessage"
/>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T20:15:37.810

您将 LinearLayout 中的所有项目的方向设置为 Horizo​​ntal，因此它水平排列所有 UI 组件。你需要做的是使用RelativeLayout并将按钮设置为EditText下方的布局。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-23T20:32:21.667

只需使用 RelativeLayout，您的按钮应该如下所示：

```
<Button
    android:id="@+id/send"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/btn_Send" 
    android:onClick="sendMessage"
    android:layout_below="@+id/txt_Input"
    android:layout_alignParentLeft="true"/>

<Button
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/btn_Send" 
    android:onClick="sendMessage"
    android:layout_below="@+id/txt_Input"
    android:layout_toRightOf="@+id/send"/> 
```

# android - Android 2.3 中的 Admob

> ID：13038481
> 
> 赞同：0
> 
> 时间：2012-10-23T20:13:37.440
> 
> 标签：android, admob, android-2.3-gingerbread

我有一个 Android 应用程序，我试图在其中显示广告。广告在运行 Android 4.1.2 的 Galaxy Nexus 上显示良好，但在运行 Android 2.3 的 Droid 2 上，它们不显示。

我找遍了整个地方，但我无法弄清楚我做错了什么

安卓清单：

```
<uses-sdk android:minSdkVersion="8"
        android:targetSdkVersion="16"/>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
<uses-permission android:name="android.permission.INTERNET" />
<application android:label="@string/app_name" android:icon="@drawable/sms_logo_green_w_blue">
    <activity android:name="com.google.ads.AdActivity"
              android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize"/> 
```

XML 文件：

```
<com.google.ads.AdView
                android:id="@+id/adView"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                ads:adUnitId="@string/mediation_id"
                ads:adSize="BANNER"
                ads:testDevices="TEST_EMULATOR, <my device id>"
                ads:loadAdOnCreate="true"/> 
```

我尝试通过 Java 代码而不是通过 XML 加载广告，如下所示：

```
com.google.ads.AdView adView = new com.google.ads.AdView(this, AdSize.BANNER, this.getResources().getString(R.string.mediation_id));
    LinearLayout layout = (LinearLayout)findViewById(R.id.mainAdLayout);

// Add the adView to it
layout.addView(adView);

AdRequest adRequest = new AdRequest();
adRequest.addTestDevice("<my device id>");
adRequest.addTestDevice(AdRequest.TEST_EMULATOR);

adView.loadAd(adRequest); 
```

无论我做什么，广告都不会在 2.3 上加载。有任何想法吗？

这就是我在我的应用程序或 admob 的 logcat 中看到的全部内容：

```
I/Ads     ( 3220): adRequestUrlHtml: <html><head><script src="http://media.admob.com/sdk-core-v40.js"></script><script>AFMA_getSdkConstants();AFMA_buildAdURL({"kw":[],"preqs":0,"session_id":"16659815784493691135","u_sd":1.5,"seq_num":"1","slotname":"5ae6fdb32cdf4c1a","u_w":320,"msid":"com.havens1515.autorespondfree","js":"afma-sdk-a-v6.2.1","mv":"8011016.com.android.vending","isu":"B78F2F5C240A24F31F6EF9D6EBD74706","cipa":1,"bas_off":0,"format":"320x50_mb","oar":0,"net":"wi","app_name":"17.android.com.havens1515.autorespondfree","hl":"en","ad_pos":{"height":0,"visible":0,"y":0,"x":0,"width":0},"gnt":6,"u_h":569,"carrier":"31000","bas_on":0,"ptime":0,"u_audio":1});</script></head><body></body></html>

W/asset   ( 3220): deep redirect failure from 0x0103003e => 0x02060007, defStyleAttr=0x0101006c, defStyleRes=0x01030019, style=0x00000000

D/dalvikvm( 3220): GC_CONCURRENT freed 225K, 49% free 2928K/5639K, external 513K/519K, paused 2ms+7ms

D/dalvikvm( 3220): GC_EXTERNAL_ALLOC freed 2K, 49% free 2925K/5639K, external 513K/519K, paused 55ms

D/ViewConsistency( 3220): AbsListView android.widget.ListView@40516210 enabled= true

D/ViewConsistency( 3220): AbsListView android.widget.ListView@40516210 enabled= true 
```

然后

```
I/Ads     ( 3220): To get test ads on this device, call adRequest.addTestDevice("B78F2F5C240A24F31F6EF9D6EBD74706");

I/Ads     ( 3220): adRequestUrlHtml: <html><head><script src="http://media.admob.com/sdk-core-v40.js"></script><script>AFMA_getSdkConstants();AFMA_buildAdURL({"preqs":1,"session_id":"16659815784493691135","u_sd":1.5,"seq_num":"2","slotname":"5ae6fdb32cdf4c1a","u_w":320,"msid":"com.havens1515.autorespondfree","js":"afma-sdk-a-v6.2.1","mv":"8011016.com.android.vending","isu":"B78F2F5C240A24F31F6EF9D6EBD74706","cipa":1,"bas_off":0,"format":"320x50_mb","oar":0,"net":"wi","app_name":"17.android.com.havens1515.autorespondfree","hl":"en","ad_pos":{"height":0,"visible":0,"y":0,"x":0,"width":0},"gnt":6,"u_h":569,"carrier":"31000","bas_on":0,"ptime":400,"u_audio":1});</script></head><body></body></html> 
```

和

```
D/dalvikvm( 3505): Debugger has detached; object registry had 1 entries

W/ActivityThread( 3505): Application com.havens1515.autorespondfree can be debugged on port 8100...

D/szipinf ( 3505): Initializing inflate state

E/dalvikvm( 3505): Could not find class 'android.app.Notification$Builder', referenced from method com.havens1515.autorespondfree.AutoRespond.showNotification

W/dalvikvm( 3505): VFY: unable to resolve new-instance 15 (Landroid/app/Notification$Builder;) in Lcom/havens1515/autorespondfree/AutoRespond;

D/dalvikvm( 3505): VFY: replacing opcode 0x22 at 0x0031

D/dalvikvm( 3505): VFY: dead code 0x0033-00cd in Lcom/havens1515/autorespondfree/AutoRespond;.showNotification (Landroid/content/Context;)V

D/dalvikvm( 3505): GC_EXTERNAL_ALLOC freed 62K, 50% free 2706K/5379K, external 0K/0K, paused 40ms

I/Database( 3505): sqlite returned: error code = 0, msg = Recovered 14 frames from WAL file /data/data/com.havens1515.autorespondfree/databases/webview.db-wal

I/Database( 3505): sqlite returned: error code = 0, msg = Recovered 18 frames from WAL file /data/data/com.havens1515.autorespondfree/databases/webviewCache.db-wal

I/Ads     ( 3505): To get test ads on this device, call adRequest.addTestDevice("B78F2F5C240A24F31F6EF9D6EBD74706");

W/asset   ( 3505): deep redirect failure from 0x0103003e => 0x02060007, defStyleAttr=0x0101006c, defStyleRes=0x01030019, style=0x00000000

D/dalvikvm( 3505): GC_CONCURRENT freed 204K, 49% free 2926K/5639K, external 513K/519K, paused 2ms+4ms

D/dalvikvm( 3505): GC_EXTERNAL_ALLOC freed 24K, 49% free 2902K/5639K, external 513K/519K, paused 51ms

I/Ads     ( 3505): adRequestUrlHtml: <html><head><script src="http://media.admob.com/sdk-core-v40.js"></script><script>AFMA_getSdkConstants();AFMA_buildAdURL({"kw":[],"preqs":0,"session_id":"212234885725326360","u_sd":1.5,"seq_num":"1","slotname":"5ae6fdb32cdf4c1a","u_w":320,"msid":"com.havens1515.autorespondfree","js":"afma-sdk-a-v6.2.1","mv":"8011016.com.android.vending","isu":"B78F2F5C240A24F31F6EF9D6EBD74706","cipa":1,"bas_off":0,"format":"320x50_mb","oar":0,"net":"wi","app_name":"17.android.com.havens1515.autorespondfree","hl":"en","ad_pos":{"height":0,"visible":0,"y":0,"x":0,"width":0},"gnt":6,"u_h":569,"carrier":"31000","bas_on":0,"ptime":0,"u_audio":1});</script></head><body></body></html>
D/ViewConsistency( 3505): AbsListView android.widget.ListView@40536910 enabled= true

D/ViewConsistency( 3505): AbsListView android.widget.ListView@40536910 enabled= true

I/Ads     ( 3505): To get test ads on this device, call adRequest.addTestDevice("B78F2F5C240A24F31F6EF9D6EBD74706");

I/Ads     ( 3505): adRequestUrlHtml: <html><head><script src="http://media.admob.com/sdk-core-v40.js"></script><script>AFMA_getSdkConstants();AFMA_buildAdURL({"preqs":1,"session_id":"212234885725326360","u_sd":1.5,"seq_num":"2","slotname":"5ae6fdb32cdf4c1a","u_w":320,"msid":"com.havens1515.autorespondfree","js":"afma-sdk-a-v6.2.1","mv":"8011016.com.android.vending","isu":"B78F2F5C240A24F31F6EF9D6EBD74706","cipa":1,"bas_off":0,"format":"320x50_mb","oar":0,"net":"wi","app_name":"17.android.com.havens1515.autorespondfree","hl":"en","ad_pos":{"height":0,"visible":0,"y":0,"x":0,"width":0},"gnt":6,"u_h":569,"carrier":"31000","bas_on":0,"ptime":268,"u_audio":1});</script></head><body></body></html>

W/webcore ( 3505): Can't get the viewWidth after the first layout

W/webcore ( 3505): Can't get the viewWidth after the first layout 
```

在跟踪广告行为时从 logcat 获得以下信息：

```
I/Ads     ( 5877): AdLoader timed out after 60000ms while getting the URL.

D/webviewglue( 5877): nativeDestroy view: 0x1e94e8

I/Ads     ( 5877): onFailedToReceiveAd(A network error occurred.)

D/AutoRespondFree( 5877): onFailedToReceiveAd (A network error occurred.) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T01:46:16.583

让您的班级实施`AdListener`，以便您可以在日志中获得有关请求发生情况的更多信息。

```
public class MyClass extends Activity implements AdListener {
  private static final String LOG_TAG = "MyClass";

  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    // Get the ad.
    AdView adView = (AdView) findViewById(R.id.adView);

    // Set the AdListener.
    adView.setAdListener(this);

    // Your other code here.
    ...
  }

  /** Called when an ad is clicked and about to return to the application. */
  @Override
  public void onDismissScreen(Ad ad) {
    Log.d(LOG_TAG, "onDismissScreen");
    Toast.makeText(this, "onDismissScreen", Toast.LENGTH_SHORT).show();
  }

  /** Called when an ad was not received. */
  @Override
  public void onFailedToReceiveAd(Ad ad, AdRequest.ErrorCode error) {
    String message = "onFailedToReceiveAd (" + error + ")";
    Log.d(LOG_TAG, message);
    Toast.makeText(this, message, Toast.LENGTH_SHORT).show();
  }

  /**
   * Called when an ad is clicked and going to start a new Activity that will
   * leave the application (e.g. breaking out to the Browser or Maps
   * application).
   */
  @Override
  public void onLeaveApplication(Ad ad) {
    Log.d(LOG_TAG, "onLeaveApplication");
    Toast.makeText(this, "onLeaveApplication", Toast.LENGTH_SHORT).show();
  }

  /**
   * Called when an Activity is created in front of the app (e.g. an
   * interstitial is shown, or an ad is clicked and launches a new Activity).
   */
  @Override
  public void onPresentScreen(Ad ad) {
    Log.d(LOG_TAG, "onPresentScreen");
    Toast.makeText(this, "onPresentScreen", Toast.LENGTH_SHORT).show();
  }

  /** Called when an ad is received. */
  @Override
  public void onReceiveAd(Ad ad) {
    Log.d(LOG_TAG, "onReceiveAd");
    Toast.makeText(this, "onReceiveAd", Toast.LENGTH_SHORT).show();
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T12:00:24.303

我是个白痴。我在我的 Droid 2 上安装了一个我忘记的 adblock 应用程序（我已经有一段时间没有使用该设备了。）

很抱歉浪费您的时间！不过，我确实对您的答案投了赞成票，因为它确实帮助我意识到了问题所在。

# c# - 从 double 中获取小数部分

> ID：13038482
> 
> 赞同：98
> 
> 时间：2012-10-23T20:13:46.370
> 
> 标签：c#, .net

我想以整数的形式接收小数点后的数字。例如，只有 05 来自 1.05 或来自 2.50 只有 50**而不是**0.50

* * *

## 回答 #1

> 赞同：223
> 
> 时间：2014-09-03T10:23:59.107

最好的方法是：

```
var floatNumber = 12.5523;

var x = floatNumber - Math.Truncate(floatNumber); 
```

结果你可以随心所欲地转换

* * *

## 回答 #2

> 赞同：87
> 
> 时间：2012-10-23T20:16:21.620

```
var decPlaces = (int)(((decimal)number % 1) * 100); 
```

这假定您的数字只有两位小数。

* * *

## 回答 #3

> 赞同：43
> 
> 时间：2018-07-03T23:27:38.063

有一个比“Math.Truncate”方法更干净、更快捷的解决方案：

```
double frac = value % 1; 
```

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2015-07-13T18:47:34.767

**无舍入问题的解决方案：**

```
double number = 10.20;
var first2DecimalPlaces = (int)(((decimal)number % 1) * 100);
Console.Write("{0:00}", first2DecimalPlaces); 
```

**输出：** `20`

> 请注意，如果我们没有转换为十进制，它将输出`19`.

还：

*   对于`318.40`输出：（`40`而不是`39`）
*   对于`47.612345`输出：（`61`而不是`612345`）
*   对于`3.01`输出：（`01`而不是`1`）

> 如果您正在处理财务数字，例如，如果在这种情况下您试图获取交易金额的*美分*部分，请始终使用`decimal`数据类型。

**更新：**

如果将其作为字符串处理（基于@SearchForKnowledge 的答案），则以下内容也将起作用。

```
10.2d.ToString("0.00", CultureInfo.InvariantCulture).Split('.')[1] 
```

然后，您可以使用`Int32.Parse`将其转换为 int。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2012-10-23T20:22:28.390

**更好的方法 -**

```
 double value = 10.567;
        int result = (int)((value - (int)value) * 100);
        Console.WriteLine(result); 
```

**输出 -**

```
56 
```

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2015-08-05T12:01:19.523

最简单的变体可能是 Math.truncate()

```
double value = 1.761
double decPart = value - Math.truncate(value) 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2019-12-19T21:17:51.227

我猜这个帖子已经老了，但我不敢相信没有人提到过 Math.Floor

```
//will always be .02 cents
(10.02m - System.Math.Floor(10.02m)) 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-10-23T20:18:01.373

```
var result = number.ToString().Split(System.Globalization.NumberDecimalSeparator)[2] 
```

将其作为字符串返回（但您始终可以将其转换回 int），并假定该数字确实有一个“。” 某处。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-04-02T04:59:19.253

```
int last2digits = num - (int) ((double) (num /  100) * 100); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-11-10T20:12:46.320

```
 public static string FractionPart(this double instance)
    {
        var result = string.Empty;
        var ic = CultureInfo.InvariantCulture;
        var splits = instance.ToString(ic).Split(new[] { ic.NumberFormat.NumberDecimalSeparator }, StringSplitOptions.RemoveEmptyEntries);
        if (splits.Count() > 1)
        {
            result = splits[1];
        }
        return result;
    } 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-11-09T12:38:59.573

```
 string input = "0.55";
    var regex1 = new System.Text.RegularExpressions.Regex("(?<=[\\.])[0-9]+");
    if (regex1.IsMatch(input))
    {
        string dp= regex1.Match(input ).Value;
    } 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-10-25T20:48:21.970

```
var d = 1.5;
var decimalPart = Convert.ToInt32(d.ToString().Split('.')[1]); 
```

它给你`5`来自`1.5`:)

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2012-10-23T20:22:41.100

`.`您可以在将双精度转换为字符串后从您尝试使用函数获取小数的双精度中删除点，`Remove()`以便您可以对其进行所需的操作

考虑有一个双倍`_Double`的值`0.66781`，下面的代码将只显示点后面的数字，`.`它们是`66781`

```
double _Double = 0.66781; //Declare a new double with a value of 0.66781
string _Decimals = _Double.ToString().Remove(0, _Double.ToString().IndexOf(".") + 1); //Remove everything starting with index 0 and ending at the index of ([the dot .] + 1) 
```

**另一种解决方案**

您也可以使用`Path`以跨平台方式对字符串实例执行操作的类

```
double _Double = 0.66781; //Declare a new double with a value of 0.66781
string Output = Path.GetExtension(D.ToString()).Replace(".",""); //Get (the dot and the content after the last dot available and replace the dot with nothing) as a new string object Output
//Do something 
```

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2017-04-05T16:02:21.213

这是我为类似情况编写的扩展方法。我的应用程序将收到 2.3 或 3.11 格式的数字，其中数字的整数部分表示年，小数部分表示月。

```
// Sample Usage
int years, months;
double test1 = 2.11;
test1.Split(out years, out months);
// years = 2 and months = 11

public static class DoubleExtensions
{
    public static void Split(this double number, out int years, out int months)
    {
        years = Convert.ToInt32(Math.Truncate(number));

        double tempMonths = Math.Round(number - years, 2);
        while ((tempMonths - Math.Floor(tempMonths)) > 0 && tempMonths != 0) tempMonths *= 10;
        months = Convert.ToInt32(tempMonths);
    }
} 
```

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2021-04-26T14:56:46.583

在我的测试中，这比 Math.Truncate 答案慢 3-4 倍，但只有一个函数调用。也许有人喜欢它：

```
var float_number = 12.345;
var x = Math.IEEERemainder(float_number , 1) 
```

* * *

## 回答 #16

> 赞同：-2
> 
> 时间：2012-10-23T20:22:13.727

使用正则表达式：`Regex.Match("\.(?\d+)")`如果我在这里错了，请有人纠正我

* * *

## 回答 #17

> 赞同：-2
> 
> 时间：2015-04-18T14:16:57.810

这很简单

```
 float moveWater =  Mathf.PingPong(theTime * speed, 100) * .015f;
       int    m = (int)(moveWater);
       float decimalPart= moveWater -m ;

       Debug.Log(decimalPart); 
```

* * *

## 回答 #18

> 赞同：-2
> 
> 时间：2015-07-13T19:33:16.910

为什么不使用`int y = value.Split('.')[1];`？

该`Split()`函数将值拆分为单独的内容，然后`1`输出第二个值`.`

* * *

## 回答 #19

> 赞同：-19
> 
> 时间：2013-10-15T06:14:54.247

**更新的答案**

在这里，我给出了 3 种相同的方法。

**[1] 使用[Math.Truncate 的数学解法](https://msdn.microsoft.com/en-us/library/7d101hyf(v=vs.110).aspx)**

```
 var float_number = 12.345;
 var result = float_number - Math.Truncate(float_number); 
```

//输入：1.05
//输出：“0.050000000000000044”

// 输入：10.2
// 输出：0.19999999999999929

如果这不是您期望的结果，那么您必须将结果更改为您想要的形式（但您可能会再次进行一些字符串操作。）

**[2] 使用乘数 [这是 10 的 N 次方（例如 10² 或 10³），其中 N 是小数位数]**

```
 // multiplier is " 10 to the power of 'N'" where 'N' is the number 
       // of decimal places
       int multiplier = 1000;  
       double double_value = 12.345;
       int double_result = (int)((double_value - (int)double_value) * multiplier); 
```

// 输出 345

如果小数位数不固定，那么这种方法可能会产生问题。

**[3] 使用“正则表达式（REGEX）”**

在使用字符串编写解决方案时，我们应该非常小心。除某些情况外，这***不是可取的。***

如果您要***使用小数位进行一些字符串操作，那么这将是可取的***

```
 string input_decimal_number = "1.50";
    var regex = new System.Text.RegularExpressions.Regex("(?<=[\\.])[0-9]+");
    if (regex.IsMatch(input_decimal_number))
    {
        string decimal_places = regex.Match(input_decimal_number).Value;
    } 
```

// 输入：“1.05”
// 输出：“05”

// 输入：“2.50”
// 输出：“50”

// 输入：“0.0550”
// 输出：“0550”

[您可以在http://www.regexr.com/](http://www.regexr.com/)上找到有关 Regex 的更多信息

# python - 如何在 Django 1.3 Http 请求中获取用户的时区

> ID：13038485
> 
> 赞同：1
> 
> 时间：2012-10-23T20:14:00.967
> 
> 标签：python, django, timezone, httprequest, django-1.3

我读过*Django 1.4*中有很多时区支持，但是如何在***Django 1.3***中获取用户的时区？

一旦我有了时区，例如*'Europe\London'*或*'GMT+4:00'*，就很容易使用*中间件*将其设置到`request.META`字典中，以便每个请求都可以使用它......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T20:26:25.320

用户的时区通常对服务器不可用。如果您在[http://www.myhttp.info/](http://www.myhttp.info/)之类的内容中查看您自己的 Web 浏览器的请求标头，您会发现其中没有任何内容可以提供您所在时区的线索。

但是，如果您可以在客户端运行一些 Javascript，则可以使用`Date`类构造函数并在客户端`Date.UTC`检查本地时间和 UTC 之间的差异。该差异是当前时间偏移量，这是您可以可靠地做到的最好的。

# objective-c - ios设置屏幕用户界面

> ID：13038488
> 
> 赞同：1
> 
> 时间：2012-10-23T20:14:11.810
> 
> 标签：objective-c, ios

我正在尝试在我的应用程序中制作一个设置屏幕，就像 iPhone 内部存在的设置一样。单击设置时，我们会看到带有圆形边缘的不同部分，全白，一些选项有箭头，一些是开/关按钮。

苹果是如何做到这一点的？是`UITableView`吗？是否有任何关于如何使选项看起来相似的文档？或者有没有苹果设置屏幕实现的开源示例？

我想制作一个具有类似功能的设置屏幕，因此我想知道它是如何在设置屏幕上实现的。不幸的是，无法通过搜索找到这个。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T20:18:16.423

它是一个分组的 UITableView。

[分组表视图](https://stackoverflow.com/questions/5299539/grouped-tableview)

您几乎可以非常轻松地构建与 Apple 的设置应用程序类似的应用程序，特别是如果您使用情节提要和静态单元格。

如果单元格具有某种附件类型，您将需要设置其附件类型并推送新视图。无论如何，构建一个并不难，即使您采用古老的方式（iOS 5 之前）。如今，您可以非常快速地构建类似的东西。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-23T20:17:50.280

这是一个`UITableView`设置`style`为`UITableViewStyleGrouped`。

带箭头的单元格`UITableViewCellAccessoryDisclosureIndicator`用于`accessoryType`。开/关按钮称为开关，它们也可以用作电池配件

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T20:17:25.223

Settings 应用程序的 UI 基本上是一组具有“分组”样式的**UITableViewController 。**如果您没有使用过表格，您应该花一些时间阅读“ *[iOS 表格视图编程指南](https://developer.apple.com/library/ios/documentation/userexperience/conceptual/TableView_iPhone/AboutTableViewsiPhone/AboutTableViewsiPhone.html)*”。它涵盖了您需要了解的有关创建和使用表的所有信息。

# c - 识别使用 malloc() 分配的缓冲区

> ID：13038490
> 
> 赞同：4
> 
> 时间：2012-10-23T20:14:14.193
> 
> 标签：c, posix, c99

有什么方法可以确定缓冲区是否由“malloc”分配？像具有以下签名的函数：

```
bool is_malloced(void *buf); 
```

posix中是否存在这种机制？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T20:21:01.927

没有。C11 和 POSIX 都没有提供任何这样的机制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T20:28:43.623

嗯，如果你是一个认真的人，你实际上可以这样做：

```
Hash   *hsh;   /* global hash already initialized. */
void *custom_malloc(size_t size)
{
     void  *ptr;

     ptr = malloc(size);

    hash_add(hsh, ptr);
  return ptr;
}

/* tester */

_Bool malloced(void *ptr)
{
      if(hash_retrieve(hsh, ptr))
           return TRUE;
      return FALSE;
} 
```

当然做这样的事情是疯狂的，但你确实可以。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T22:11:23.413

模拟这种功能的一种简单方法是包装`malloc()`一个自定义函数，该函数：

*   分配一个缓冲区，例如大 4 个字节
*   在分配块的开头存储一些幻数（32位）
*   在将指针返回给调用者之前将指针递增 4 个字节

给定一个指针，可以`malloc`通过查找幻数来检查它是否被 'ed。

当然，它并不完美：

*   神奇的数字可能是偶然出现的。在包装的`free()`调用中将其设置为 null 会有所帮助。与指针等进行异或运算也可以使其更可靠。尽管如此，它仍然是一种启发式方法。
*   在具有内存保护的体系结构上，您可以在检查*未*分配的指针时触发页面错误。

尽管有所有缺点，但它仍然是一种有用的技术，我在调试嵌入式系统中的一些内存损坏时使用了几次。

如果我们打算`malloc()`用一些包装器替换，我们也可以构建一个已分配块的链表。更可靠，但也更复杂。

# jquery - .val() 没有设置值

> ID：13038498
> 
> 赞同：3
> 
> 时间：2012-10-23T20:14:51.057
> 
> 标签：jquery

我有一个名为 locEmailMsg 的文本输入字段：

```
<input type="text"
       class="phColor"
       data-placeholder="Your email address"
       maxlength="50"
       style="font-size: 14px; width: 232px;"
       id="locEmailMsg"> 
```

在我的`$(document).ready()`函数中，我需要做一些事情：设置输入的值，设置数据占位符属性，并删除 phColor 类。

```
$('#locEmailMsg').val(localStorage.email);
$('#locEmailMsg').attr('data-placeholder', localStorage.email);
$('#locEmailMsg').removeClass('phColor'); 
```

data-placeholder 属性设置正确（在 Firebug 中观察），但没有设置值，也没有删除类。为什么一个部分有效，而其他部分无效？

这是一个非常大的系统的一部分，但我已经在页面加载时逐步执行了所有脚本，并且在这个调用反转值集/类删除之后没有发生任何事情。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T20:30:07.033

它可以在这里与您的代码一起使用。

[http://jsfiddle.net/bWm2c/1/](http://jsfiddle.net/bWm2c/1/)

但是，如果再次出现具有相同 id 的项目，则只有第一个会受到影响。看这里：

[http://jsfiddle.net/bWm2c/2/](http://jsfiddle.net/bWm2c/2/)

输入与否无关紧要。ID 必须是唯一的。

我把它设置为超时，所以你可以看到变化

```
window.setTimeout(function() {
    var localStorage = { email: 'foo@bar.com' };

    $('#locEmailMsg')
        .val(localStorage.email)
        .attr('data-placeholder', localStorage.email)
        .removeClass('phColor');
}, 500);
​ 
```

这是失败的html（仅影响第一项）

```
<input type="text"
       class="phColor"
       data-placeholder="Your email address"
       maxlength="50"
       style="font-size: 14px; width: 232px;"
       id="locEmailMsg"
       value="novalue" />

<div id="locEmailMsg">dupid</div>

<input type="text"
       class="phColor"
       data-placeholder="Your email address"
       maxlength="50"
       style="font-size: 14px; width: 232px;"
       id="locEmailMsg"
       value="novalue" />
​ 
```

这是我看到您的代码不起作用的唯一方法。

**编辑**

在您的页面上运行此命令以确保您没有重复的 ID

[http://jsfiddle.net/bWm2c/4/](http://jsfiddle.net/bWm2c/4/)

```
$('[id]').each(function(){
  var ids = $('[id="'+this.id+'"]');
  if(ids.length>1 && ids[0]==this)
    alert('Multiple IDs #'+this.id);
});
​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T21:53:00.983

您的代码看起来不错，应该可以正常工作..如果它不起作用，那么一定有其他问题可能会干扰该行..

我会尝试跟随以检查失败的地方，

1.  `console.log`或`alert`value`localStorage.email`以查看该值是否正确。
2.  尝试`document.getElementById('locEmailMsg').value = localStorage.email;`确保它不是 jQuery 问题。

# mysql - sql仅获取这些日期之间的记录

> ID：13038502
> 
> 赞同：-1
> 
> 时间：2012-10-23T20:14:58.800
> 
> 标签：mysql, sql

在我的桌子上我有这​​个

```
start_date   end_date   record_id
2012-10-05   2012-11-05   1 
2012-10-06   2012-12-05   2 
2012-10-05   2012-09-05   3 
2012-11-05   2012-11-30   4 
2012-09-05   2012-11-21   5 
2012-10-05   2012-11-22   6 
```

如果今天的日期是`2010-10-05`我想选择范围内的所有记录，即今天或更早开始并且尚未达到 end_date

所以在这种情况下

```
2012-10-05   2012-11-05   1 
2012-10-06   2012-12-05   2 
2012-09-05   2012-11-21   5  // doesnt't end till 2012-11-21
2012-09-05   2012-11-22   6  // doesnt't end till 2012-11-22 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T20:17:28.370

```
SELECT * FROM TABLE
WHERE start_date < SYSDATE()
AND  end_date  > SYSDATE() 
```

假设您的`start_date`and`end_date`是`DATE`类型，否则您需要转换为`DATE`

# python - 验证 Django 中是否存在电子邮件

> ID：13038503
> 
> 赞同：2
> 
> 时间：2012-10-23T20:15:04.527
> 
> 标签：python, django, email, smtp, email-validation

> **可能重复：**
> [如何在不发送电子邮件的情况下检查电子邮件地址是否存在？](https://stackoverflow.com/questions/565504/how-to-check-if-an-email-address-exists-without-sending-an-email)

我正在寻找一种方法来验证特定电子邮件地址是否确实存在，即不仅要确保 name@domain.com 的格式正确，还要确保 bobsmith@gmail.com 确实存在并且不是虚构的.

本质上，我正在寻找某种方法来实现与这样的网站相同的功能：http: [//verify-email.org/](http://verify-email.org/)

我假设这需要向邮箱发送某种空电子邮件并检查收到的回复，但我不确定如何在不发送真实电子邮件的情况下发送查询电子邮件。

我找不到任何可以做到这一点的东西——所有搜索结果通常都充斥着关于如何使用正则表达式验证电子邮件是否以正确格式输入的帖子。

任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T21:03:53.857

或者，如果您不想采用 url 验证方法，您可以发送电子邮件并投票以获取回复。如果收件箱不存在，您将收到来自您发送电子邮件的域的电子邮件守护程序的自动回复。

当然，这并不能保证您会收到邮件程序守护程序的回复。

# c# - 将 SQL 表读入字典 >

> ID：13038510
> 
> 赞同：5
> 
> 时间：2012-10-23T20:15:45.147
> 
> 标签：c#, .net, vb.net, list, data-dictionary

我有一个如下所示的 SQL 表：

```
AAA, Amanda, Anthony
AAA, Anna, Andrew
BBB, Boris, Benji
BBB, Blondie, Bobby 
```

我正在尝试使用 SQL 数据阅读器来读取数据，然后将结果插入到`Dictionary<string, List<string[]>>`

预期结果是：

```
[Key]
   "AAA"
[Value]
   "Amanda", "Anthony"
   "Anna", "Andrew"
[Key]
   "BBB"
[Value]
   "Boris", "Benji"
   "Blondie", "Bobby" 
```

请帮忙：

```
using (SqlConnection cnn = new SqlConnection("connection"))
{
   using (SqlCommand cmd = new SqlCommand("command", cnn))
   {
      using (SqlDataReader rdr = cmd.ExecuteReader())
      {
         while (rdr.Read())
            {
               ... ?
            }
      {
   {
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T20:32:59.413

```
while (rdr.Read())
{
    if (dictionary.ContainsKey((string)rdr["column1"]){
        dictionary[(string)rdr["column1"]].Value.Add(new string[]{(string)rdr["column2"], (string)rdr["column3"]});
    } else {
        dictionary.Add((string)rdr["column1"]), new List<string>());
        dictionary[(string)rdr["column1"]].Value.Add(new string[]{(string)rdr["column2"], (string)rdr["column3"]});
    }
} 
```

这应该有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T20:24:49.157

这很简单，我想。通读您的数据表，并为每一行检查 [key] 是否存在于您的字典中。如果没有，请使用包含您的 [value] 的新列表添加它；否则，将 [value] 添加到位置 [key] 的列表中。

如果你对数据表进行排序，你可以使用经典的控制中断技术来加速这个过程——对于每个新的 [key]，开始累积一个 List，直到 [key] 发生变化，然后将 [key] 和 List 添加到你的字典中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T20:26:30.187

与此类似的东西：

```
 var dict = new Dictionary<string, List<string[]>>();
 while (rdr.Read())
 {
     // TODO: extract field1, field2, field3
     if(dict.ContainsKey(field1))
     {
         // Add the values to the existing list
         dict[field1].Add(new string [] {field2 , field3});
     }
     else
     {
         //Create a new list and set the initial value
         dict[field1] = new List<string[]> { new string[] { field2 , field3 } };
     }
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T20:27:26.197

可能是这样的？

```
myDict.Add(rdr["key"].ToString(), rdr["value"].ToString().Split(",").ToList()); 
```

未经测试，但它应该让你朝着正确的方向前进......

# jquery - 如何为 Masonry 创建良好的打印样式

> ID：13038511
> 
> 赞同：4
> 
> 时间：2012-10-23T20:15:49.613
> 
> 标签：jquery, css, jquery-masonry, jquery-isotope

我制作了一个网页，其中包含使用 jquery masonry 插件的不同内容的项目。我想为此页面创建一个好的打印样式。打印时，我想显示此框的列表（从上到下）。对于这些打印样式，我使用下面的 css。由于某种原因，并非所有项目都显示在印刷版中，只有前五个项目。

```
@media print {
   #container .item{ display:block !important; float:none !important; 
                     position:relative !important; left:  !important; top:auto !important;  
                     overflow:visible !important; width: 100% !important; 
                     height: 100px !important; clear: left !important;
   }        
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-19T14:59:13.120

作为使用 Masonry 的简单 2 列站点上的打印样式，这对我来说效果很好。

```
.masonry-brick[style]
{
position:relative !important;
display:block !important;
left:0 !important;
top:auto !important;
float:left;
}

#container[style]
{
height:auto !important;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T00:23:50.143

该`left`属性缺少一个值：

```
left:  !important; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-12T09:30:38.273

我有砌体项目作为`<figure>`包含`<a>`图像上的链接`<img>`。

```
<div id="masonry-container">
  <figure>
    <a>
      <img />
    </a>
  </figure>
  ...
</div> 
```

然后我这样解决：

```
 /* 
  Disable Masonry
  based on https://stackoverflow.com/a/13955084
  */

  #masonry-container {
    height:auto !important;
    max-width: 100%;
    text-align:center;
  }
  .masonry-item {
    position:relative !important;
    left:0 !important;
    top:auto !important;
    float: none !important;
    display: inline-block !important;
    padding: 0;
    margin-bottom: 3pt;
  }

  /* 
  Set items as inline-block at same height 
  */

  #masonry-container > figure,
  #masonry-container > figure > a,
  #masonry-container > figure > a > img {
    display: inline-block;
    height: 150pt;
    width: auto;
    max-width: 500pt;
  } 
```

# linux-kernel - 使用 qemu/kvm 启动 Linux 内核，参数如“-kernel, -initrd,-append”

> ID：13038514
> 
> 赞同：1
> 
> 时间：2012-10-23T20:15:56.673
> 
> 标签：linux-kernel, virtualization, qemu, kvm

在 qemu/kvm 中，我们可以设置参数 -kernel 带有内核映像的路径，-initrd 带有初始化 ram 磁盘的路径，以及 -append 带有用于引导内核的 cmdline。会不会和guest系统自带的linux内核镜像冲突？如何在客户机启动时跳过加载内核映像的重复过程？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T10:56:37.080

我猜你指的是你的内核 vmlinuz 映像和你的 init ram 磁盘上的 /boot/vmlinuz 内核映像。

引导过程是一个两（通常）步骤过程。一种。使用 qemu-kvm 二进制文件的初始引导（参数 -kernel）是将内核加载到 ram 和 initramfs 磁盘中。湾。然后，内核将尝试识别您的 initramfs 上的 /boot/vmlinuz 内核，并在您的 initramfs 映像中转轴（或 switch_root）到您的 /boot/vmlinuz 内核。

因此没有重复的过程，也没有与来宾（或主机）内核映像冲突。

如果您想为您的 initramfs 映像尝试一个新的内核映像，那么我建议您启动您的新内核映像并 chroot 到您的 initramfs 映像（在 /sys、/dev 和 /proc 上绑定挂载）。

您必须确保您的“新”内核映像可以正确读取 initramfs。

在附加参数上 - 不要忘记添加您的 initramfs 映像的内核路径

# c# - 无法在后面的代码中引用 PlaceHolder

> ID：13038515
> 
> 赞同：1
> 
> 时间：2012-10-23T20:15:58.063
> 
> 标签：c#, asp.net, placeholder

我正在构建一个包含转发器的 ASP.NET 用户控件。在 ItemTemplate 中，我放置了一个 PlaceHolder。只要数据源中的布尔字段为真，我就会尝试在占位符中显示组标题。

中继器工作正常，加载并显示除组头之外的所有数据。但是，Visual Studio 不允许我在后面的代码中引用 PlaceHolder。错误消息是“名称 'PlaceHolder1' 在当前上下文中不存在”。我查看了其他类似的问题并尝试使用 FindControl，但它返回 null。

```
 <%@ Control Language="C#" ClassName="Table1Control" AutoEventWireup="true"         CodeBehind="Table2View.ascx.cs" Inherits="CCC.Table2View" %>

        <table>
        <asp:Repeater ID="Table2List" runat="server" onitemdatabound="Table2List_ItemDataBound">
    <HeaderTemplate>

            <tr class="Table2HeaderRow">
                <th class = "Table2Col1Hdr">Test/Report Group</th>
                <th class = "Table2Col2Hdr">Agent</th>
                <th class = "Table2Col3Hdr">Disk Content</th>
                <th class = "Table2CriteriaSetHdr">
                    <table class="Table2CriteriaSetTable">
                        <tr class="Table2CriteriaSetInnerRow">
                            <td class = "Table2CriteriaSetTopHdr" colspan=3>Zone Diameter </td></tr>
                        <tr class="Table2CriteriaSetInnerRow">
                            <td class="Table2CriteriaSetSHdr">S</td>
                            <td class="Table2CriteriaSetIHdr">I</td>
                            <td class="Table2CriteriaSetRHdr">R</td>
                        </tr>
                    </table>
                </th>
                <th class = "Table2CriteriaSetHdr">
                    <table class="Table2CriteriaSetTable">
                        <tr class="Table2CriteriaSetInnerRow">
                            <td class = "Table2CriteriaSetTopHdr" colspan=3>MIC Interperetive </td></tr>
                        <tr class="Table2CriteriaSetInnerRow">
                            <td class="Table2CriteriaSetSHdr">S</td>
                            <td class="Table2CriteriaSetIHdr">I</td>
                            <td class="Table2CriteriaSetRHdr">R</td>
                        </tr>
                    </table>
                </th>
                <th class = "Table2Col5Hdr">Comments</th>
            </tr>

    </HeaderTemplate>

    <ItemTemplate>
        <asp:PlaceHolder ID="PlaceHolder1" runat="server"></asp:PlaceHolder>
        <tr class = "<%# "Table2ItemRow" + Eval("IsNewDrugId").ToString() %>" >
            <td class="Table2ItemCol1"><asp:Label runat="server" ID="lblId"><%#Eval("TRGroup")%></asp:Label></td>
            <td class="Table2ItemCol2"><asp:Label runat="server" ID="Label1" class="AgentName"><%#Eval("_Agent.Name")%></asp:Label></td>
            <td class="Table2ItemCol3"><asp:Label runat="server" ID="Label2"><%#Eval("DiskContent")%></asp:Label></td>
            <td class="Table2CriteriaSetItem">
                <table class="Table2CriteriaSetTable">
                    <tr class="Table2CriteriaSetInnerRow">
                        <td class="Table2ItemS"><asp:Label runat="server" ID="Label3"><%#Eval("ZoneDiameterS")%></asp:Label></td>
                        <td class="Table2ItemI"><asp:Label runat="server" ID="Label4"><%#Eval("ZoneDiameterI")%></asp:Label></td>
                        <td class="Table2ItemR"><asp:Label runat="server" ID="Label5"><%#Eval("ZoneDiameterR")%></asp:Label></td>
                    </tr>
                </table></td>
            <td class="Table2CriteriaSetItem">
                <table class="Table2CriteriaSetTable">
                    <tr class ="Table2CriteriaSetInnerRow">
                        <td class="Table2ItemS"><asp:Label runat="server" ID="Label6"><%#Eval("MICriteriaS")%></asp:Label></td>
                        <td class="Table2ItemI"><asp:Label runat="server" ID="Label7"><%#Eval("MICriteriaI")%></asp:Label></td>
                        <td class="Table2ItemR"><asp:Label runat="server" ID="Label8"><%#Eval("MICriteriaR")%></asp:Label></td>
                    </tr>
                </table></td>
            <td class="Table2ItemCol10"><asp:Label runat="server" ID="Label9"><%#Eval("Comment")%></asp:Label></td>
        </tr>
    </ItemTemplate>
</asp:Repeater>
</table> 
```

以及背后的代码：

```
protected void Table2List_ItemDataBound(object sender, RepeaterItemEventArgs e)
{
    //PlaceHolder1.Controls.Clear();  // Can't find this ???
    ///PlaceHolder groupHeader = (PlaceHolder)FindControl("PlaceHolder1");  // returns null???
    PlaceHolder groupHeader = (PlaceHolder)e.Item.FindControl("PlaceHolder1");  // as suggested by Servy, still returns null
    groupHeader.Controls.Clear();
    if(e.Item.ItemType == ListItemType.Item  || e.Item.ItemType == ListItemType.AlternatingItem)
    {
        Table2Row T2Data = (Table2Row)e.Item.DataItem;
        if (T2Data.IsNewGroup)
        {
            TableRow tr = new TableRow();
            tr.CssClass = "Table2GroupHeader";
            TableCell td = new TableCell();
            td.ColumnSpan = 6;
            Label lbl = new Label();
            lbl.Text = T2Data.GroupHeader;

            td.Controls.Add(lbl);
            tr.Controls.Add(td);
            groupHeader.Controls.Add(tr);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T20:22:47.877

您需要使用：`e.Item.FindControl("controlName")`因为控件在中继器中。

请记住，控件不只是直接在页面上，因此您将无法通过`FindControl`页面访问它。您将只能从基于行的事件访问它，该事件`Repeater`提供`RepeaterItemEventArgs`从后面的代码访问控件。

# java - android应用程序意外停止计数器

> ID：13038517
> 
> 赞同：1
> 
> 时间：2012-10-23T20:16:02.493
> 
> 标签：java, android, counter

我正在尝试为 android 制作一个计数器应用程序。它有 5 个用于显示数字的 TextView、一个计数器的图片和 3 个按钮。数字加 1 按钮、数字减 1 按钮和复位按钮。当我启动应用程序时，我立即收到应用程序意外停止的消息。我正在为 java 文件添加我的代码。有人能帮助我吗？

计数器.java：

```
public class Counter extends Activity{

    public int num=0;
    public TextView txt1,txt2,txt3,txt4,txt5;
    Button btnPlus, btnMinus, btnReset;

    public void addOne(){
        num++;
        if(num >= 100000)
            num = 0;
    }

    public void redOne(){
        num--;
        if(num <= -1)
            num = 0;
    }

    public void reset(){
        num = 0;
    }

    public void build(){
        txt1.setText(num%10);
        txt2.setText(num/10%10);
        txt3.setText(num/100%10);
        txt4.setText(num/1000%10);
        txt5.setText(num/10000%10);
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_counter);
        txt1 = (TextView) findViewById(R.id.num1);
        txt2 = (TextView) findViewById(R.id.num2);
        txt3 = (TextView) findViewById(R.id.num3);
        txt4 = (TextView) findViewById(R.id.num4);
        txt5 = (TextView) findViewById(R.id.num5);
        build();
        btnPlus = (Button) findViewById(R.id.plus);
        btnMinus = (Button) findViewById(R.id.minus);
        btnReset = (Button) findViewById(R.id.reset);
        btnPlus.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                addOne();
                build();
            }
        });
        btnMinus.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                redOne();
                build();
            }
        });
        btnReset.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                reset();
                build();
            }
        });
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_counter, menu);
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T20:27:05.897

当您调用 settext 时，您需要传递一个字符串值。

改用这个：

```
 txt1.setText(num%10+"");
    txt2.setText(num/10%10+"");
    txt3.setText(num/100%10+"");
    txt4.setText(num/1000%10+"");
    txt5.setText(num/10000%10+""); 
```

如上所述，您还应该检查您是否没有被零除。

# git - 自动获取和拉取 Debian 服务器

> ID：13038519
> 
> 赞同：1
> 
> 时间：2012-10-23T20:16:04.990
> 
> 标签：git, unix, automation, fetch

我有一个 Debian 服务器和一个 git repo (Assembla)。我想要实现的是拥有一个自动获取任何新版本并将其放入我们的“测试”主机的功能。

这意味着如果我在 repo 上推送新的更改，我应该在一分钟内看到它已经在运行的服务器上。

那可能吗？

我的服务器运行 Debian 6 Squeeze

**更新**：我还希望能够知道文件夹应该放在哪里（例如 /src 应该进入根文件夹）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T20:24:32.210

外壳脚本：

```
#!/bin/bash
dir=$1
cd $dir
git pull
cd - 
```

定时任务：

```
*/1 * * * * root /usr/bin/bash path_to_script somedir 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T20:28:31.870

您总是可以设置一个每隔几分钟更新一次的 crontab。像这样的东西：

```
*/5 * * * * /bin/git pull origin master 
```

我相信有更好的方法。但这将每 5 分钟运行一次 git 命令。

注意：我不熟悉 Git CLI 语法，因此请确保您正确编写。

# jubula - 在远程 Windows 机器上执行 Jubula 测试

> ID：13038528
> 
> 赞同：0
> 
> 时间：2012-10-23T20:16:34.083
> 
> 标签：jubula

我正在尝试让我的 Jubula 测试在远程 AUT 上运行。AUT 启动并且可以远程控制，但是当我实际运行测试时，这些步骤不会执行。

如果我在远程机器上安装 Jubula，并在本地运行测试，它们运行良好。

这是两台都关闭了防火墙的 Windows PC，所以我确信这不是防火墙问题。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T08:04:22.663

Jubula 论坛中有一个帖子可能对您的问题有所帮助：http: [//www.eclipse.org/forums/index.php/t/374796/](http://www.eclipse.org/forums/index.php/t/374796/)

也可能有一个很好的地方来跟进任何其他问题。

希望有帮助，亚历克斯

# java - 强制 Spring RestTemplate 使用 XmlConverter

> ID：13038529
> 
> 赞同：14
> 
> 时间：2012-10-23T20:16:45.973
> 
> 标签：java, xml, spring, resttemplate

我们正在与第三方集成，该第三方将内容类型标头为 text/html 的 xml 发送。我们计划使用 Spring 的 RestTemplate 将其映射到我们从 xsds 生成的类，但是 RestTemplate 无法找到合适的转换器来用于内容。第三方拒绝修复内容类型，因为它可能会破坏其他合作伙伴的集成。

Spring 的 RestTemplate 有没有办法强制它使用特定的转换器？我们基本上只是在做以下事情：

```
RestTemplate restTemplate = new RestTemplate();
XmlClass xmlClass = restTemplate.getForObject("http://example.com/", XmlClass.class); 
```

并得到以下异常：

> org.springframework.web.client.RestClientException：无法提取响应：在 org.springframework.web.client 中找不到响应类型 [XmlClass] 和内容类型 [text/html;charset=ISO-8859-1] 的合适 HttpMessageConverter。 HttpMessageConverterExtractor.extractData(HttpMessageConverterExtractor.java:84)

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-23T23:50:50.660

我们实施的解决方案是`Jaxb2RootElementHttpMessageConverter`在. 这并不理想，因为它创建了一个冗余的 jaxb 消息转换器，但它可以工作。`MediaType.TEXT_HTML``RestTemplate` `HttpMessageConverters`

```
RestTemplate restTemplate = new RestTemplate();
List<HttpMessageConverter<?>> messageConverters = new ArrayList<HttpMessageConverter<?>>();
Jaxb2RootElementHttpMessageConverter jaxbMessageConverter = new Jaxb2RootElementHttpMessageConverter();
List<MediaType> mediaTypes = new ArrayList<MediaType>();
mediaTypes.add(MediaType.TEXT_HTML);
jaxbMessageConverter.setSupportedMediaTypes(mediaTypes);
messageConverters.add(jaxbMessageConverter);
restTemplate.setMessageConverters(messageConverters); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-02-10T18:40:55.227

我没有看到发布如何使用自定义拦截器实际执行此操作的示例，因此这里有一个示例供参考：

```
public class MyXmlInterceptor implements ClientHttpRequestInterceptor {

@Override
public ClientHttpResponse intercept(HttpRequest request, byte[] body, ClientHttpRequestExecution execution) throws IOException {
    ClientHttpResponse response = execution.execute(request, body);
    HttpHeaders headers = response.getHeaders();

    // you'd want to check if the value needs to be changed
    if (headers.containsKey("Content-Type")) {
        headers.remove("Content-Type");
    }

    headers.add("Content-Type", "application/xml");

    return response;
} 
```

然后，您需要将拦截器添加到您的 RestTemplate 对象：

```
RestTemplate t = new RestTemplate();
t.getInterceptors().add(new MyXmlInterceptor()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T20:52:26.263

[您可以通过添加自定义拦截器http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/http/client/ClientHttpRequestInterceptor.html](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/http/client/ClientHttpRequestInterceptor.html)在解组发生之前更改内容类型标头吗？

# php - 从 PHP 中的 SOAPHeader 读取值

> ID：13038532
> 
> 赞同：1
> 
> 时间：2012-10-23T20:16:53.963
> 
> 标签：php, soap, soap-client

我正在编写一段 PHP 来使用 Web 服务。我正在使用类似的东西：

```
$client = new SoapClient("http://somewebservicesmx?WSDL",  array('trace' => 1));
$session = $client->SomeFuncion(); 
```

...这工作正常。

但是这个 web 服务在第一次调用中返回了关于肥皂头的重要数据。

我想从标头中读取这些值，并且尝试使用 simplexml_load_string，它只返回空。也尝试过：

```
$doc = new DOMDocument();
$doc->loadXML($soapLastResponse);
$value = $doc->getElementsByTagName("somenode");
$value = $value->item(0)->nodeValue; 
```

这似乎可行，但我想知道是否有“正确的方法”来实现这一目标。我想知道是否有一些函数可以在不使用`DOMDocument`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T20:34:10.200

我想这就是你要找的吗？

```
$soapClient->__getLastResponseHeaders(); 
```

它要求`'trace'=>true`在建设中`SoapClient`

[http://www.php.net/manual/en/soapclient.getlastresponseheaders.php](http://www.php.net/manual/en/soapclient.getlastresponseheaders.php)

编辑：我的困惑 - 推荐[SimpleXMLElement](http://php.net/manual/en/class.simplexmlelement.php)

# version-control - 我应该如何对我的程序进行版本控制？

> ID：13038534
> 
> 赞同：4
> 
> 时间：2012-10-23T20:17:05.540
> 
> 标签：version-control, version

我正在开发我的第一个更大的（Python）项目，我不知道我应该在哪个版本上发布它。它仍处于 alpha 阶段......我想？

这一直让我有点困惑，我应该如何确定我当前程序的版本？

如果我的程序还没有完成，我知道它是 alpha，但它应该是 1.0.0 alpha，0.5 alpha，我应该从 0.1 alpha 开始，什么时候从 alpha 变为 beta，等等？

另外，有v1.0.0，然后最终版本就像1.1.3，而不是1.0和最终版本像2.3，是不是有点愚蠢？确定版本是否有任何规则？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T20:26:22.713

它是否缺少功能，但在某些情况下基本上仍然有用？Α。它是否功能齐全，但可能有问题或未完善？贝塔。

如果它工作正常，做它声称的，并且稳定，称之为 1.0。

Alpha 的版本号应该小于 1.0.0，但它只是一个任意数字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T14:44:50.770

正如评论中提到的`cbuckley`，[semver.org](http://semver.org/)对版本​​控制有很好的解释。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T20:28:51.397

开源项目有 0.x 版本号导致稍后发布 1.0 版本的情况并不少见。一般来说，除非它是一个候选版本，否则我不会标记任何 1.0。所以在那之前，你可以将它标记为 0.xx，这个数字可以反映你认为你离发布质量有多近。

就我个人而言，当项目尽快发布 1.0 版本时，我发现它最有用。到那时，应该明确定义项目的哪些部分被认为已完成，并开放供其他人使用（生产？）。

# asp.net-mvc - 用任意内容封装可重用视图部分（即图块、portlet）的方法？

> ID：13038535
> 
> 赞同：4
> 
> 时间：2012-10-23T20:17:06.570
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我仍然对 MVC 感到困惑，并且在一个使用大量“图块”（你知道，通常的“带有标准化标题和一些内容的矩形部分”模式）用于视觉显示的网站上工作。没有什么花哨的，只是一种将内容放入框中以便于布局和导航的方法。目前，“瓷砖”（我的术语）是这样构建的：

```
<div class="tile">
    <div class="tile-header">
        <h2>Title</h2>
    </div>
    <div class="tile-body">
        (arbitrary content)
    </div>
</div> 
```

*注意：“任意内容”是指任何内容，无论是静态的还是动态的，所以不一定是我可以插入变量并传递给助手的东西，我需要更多的灵活性。*

我的问题是，用于封装此模式并使从代码调用更容易/更具表现力的最佳方法是什么？我知道部分视图，但我如何将任意正文内容传递给部分视图？（这可能只是我对 MVC 展示的有限了解）

我尝试像这样构建 Razor 助手：

```
@Tile.Begin("Title")
    (arbitrary content)
@Tile.End() 
```

但是 Razor 窒息，因为我不能包含“tile-body”关闭 div。（如果我这样做了，那么我必须将正文内容作为字符串变量传递，这并不总是可行的）

我可以看到这样的东西：

```
@using (Tile.Begin("Title")) {
    (arbitrary content)
} 
```

这对我来说似乎是最优雅的，虽然不像 @Tile.Begin() 和 @Tile.End() 调用那么容易扫描。据我了解，我必须创建一个类并实现 IDisposable，但是当我尝试从帮助类返回一串原始 HTML 标记时，它只是将编码的标记语法写入屏幕，所以我假设我会遇到同样的问题在这里？

感谢您的任何建议。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T20:49:52.660

好吧，我建议使用 Display/EditorTemplates 来生成动态图块。您甚至可以将它们与 html 助手（而不是 razor 助手）结合使用。

您对自定义 html 帮助程序的问题是您没有正确执行它。您必须使用 HtmlHelper 对象。正确的方法是这样的：

```
public static class TileExtension {

    public static TileHelper Tile(this HtmlHelper helper, string title) {
        helper.ViewContext.Writer.Write(
            "<div class=\"tile\"><div class=\"tile-header\"><h2>" + title + "</h2></div>"
            + "<div class=\"tile-body\">"
        );
        return new TileHelper(helper);
    }

    private class TileHelper : IDisposable {
        private HtmlHelper _helper;
        public TileHelper(HtmlHelper helper) { _helper = helper; }
        public void Dispose() {
           _helper.ViewContext.Writer.Write("</div></div>");
        }
    }
} 
```

然后你会像这样使用它`@using(Html.Tile("Title")) { // your content }`

确保密切关注静态关键字，以及`this`参数中关键字的使用。这些是使扩展工作所必需的。

此外，您应该将创建此类的命名空间添加到 web.config 的 pages/namespaces 元素中：

```
<pages>
    <namespaces>
        <add namespace="My.Name.Space" />
    </namespaces>
<pages> 
```

# android - iframe 视频不会在 Android 网络视图中进入全屏模式

> ID：13038536
> 
> 赞同：15
> 
> 时间：2012-10-23T20:17:15.693
> 
> 标签：android, iframe, webview, fullscreen

我目前正在开发基于网站的 Android 应用程序。iOS 应用程序已经存在，我必须尊重一些代码的统一性。

一切都差不多完成了，但我刚刚发现了一个有趣的问题：当对带有 iframe 视频（Youtube、Dailymotion）的页面使用 webview（我对显示的页面没有任何控制）时，它不会全屏显示，即使我按下播放器的按钮。

我已经尝试了在这里找到的几乎所有内容，但它仅指我知道您需要显示哪些页面的应用程序。

这是应用程序的 webActivity 部分的代码：

```
public class WebActivity extends Activity {
    String targetURL = "";
    String title = "";
    WebView wv;

    @Override
    public void onResume() { super.onResume(); CookieSyncManager.getInstance().startSync(); }
    @Override
    public void onPause() { super.onPause();  CookieSyncManager.getInstance().stopSync(); }

    /** Called when the activity is first created. */
    @SuppressLint("SetJavaScriptEnabled")
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        getWindow().requestFeature(Window.FEATURE_PROGRESS);
        //getWindow().requestFeature(Window.FEATURE_NO_TITLE);
        CookieSyncManager.createInstance(getApplicationContext());
        CookieSyncManager.getInstance().startSync();
        CookieManager.getInstance().setAcceptCookie(true);
        /**
         * TODO: WebView Cookie management.
         * Right now, a cookie is hardcoded here into the WebView instead of getting it from the API called by HttpClient when retrieving the JSON.
         * Need to make things cleaner.
         */
        CookieManager.getInstance().setCookie("http://www.blabla.fr/mobile/","gbapi=1; Domain=.www.blabla.fr"); 
        /**
         * Get parameters
         */
        Bundle b = getIntent().getExtras();
        if(b != null)
        {
            targetURL = b.getString("url");
            title = b.getString("title");
        }

        setTitle(title);
        setContentView(R.layout.activity_webview);

        wv = (WebView) findViewById(R.id.webview);

        WebSettings wvSettings = wv.getSettings();

        // WebView options
        wvSettings.setDefaultTextEncodingName("utf-8");
        wvSettings.setJavaScriptEnabled(true);
        wvSettings.setPluginState(PluginState.ON);
        wvSettings.setJavaScriptCanOpenWindowsAutomatically(true);
        wvSettings.setBuiltInZoomControls(true);
        final Activity activity = this;
        wv.setWebChromeClient(new WebChromeClient() {
            public void onProgressChanged(WebView view, int progress) {
                activity.setProgress(progress * 100);
            }
        });

        wv.setWebViewClient(new WebViewClient() {
            public void onReceivedError(WebView view, int errorCode, String description, String failingUrl) {
                Toast.makeText(activity, "Oh snap! " + description, Toast.LENGTH_SHORT).show();
            }
        });

        wv.loadUrl(targetURL);
    }
} 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T20:25:04.907

您将需要创建一个自定义 WebChromeClient 来处理 onShowCustomView 的两个版本（API 级别 14 中引入了此回调的新版本）以及 onHideCustomView。基本上会发生的是，当您尝试全屏播放视频时，您将看到一个与 VideoView 不同的视图。您需要将其附加到全屏 FrameLayout 并将其粘贴在布局层次结构的根部以覆盖整个屏幕。完成后，您需要再次将其删除。

这是我用来播放视频的版本

```
private class DerpChromeClient extends WebChromeClient implements MediaPlayer.OnCompletionListener, MediaPlayer.OnErrorListener {
    //@Override
    public void onShowCustomView(View view, int requestedOrientation, CustomViewCallback callback) {
        log.warn("onShowCustomView");
        showCustomView(view, callback);
    }

    private View mVideoProgressView;

    @Override
    public void onHideCustomView() {
        super.onHideCustomView();

        activity.removeFullscreenView();
        webView.setVisibility(View.VISIBLE);

        try {
            mCustomViewCallback.onCustomViewHidden();
        } catch (NullPointerException npe) {
            // occasionally Android likes to freak out and throw an unhandled NPE if it can't play the video
            // therefore we are not going to do anything but eat this exception so it fails gracefully
        }

        mCustomView = null;
        mVideoView = null;
    }

    @Override
    public void onShowCustomView(View view, CustomViewCallback callback) {
        super.onShowCustomView(view, callback);
        log.warn("onShowCustomView");
        showCustomView(view, callback);
    }

    private void showCustomView(View view, CustomViewCallback callback) {
        if (mCustomView != null) {
            callback.onCustomViewHidden();
            return;
        }

        mCustomView = view;
        mCustomViewCallback = callback;
        webView.setVisibility(View.GONE);

        if (view instanceof FrameLayout) {
            if (((FrameLayout)view).getFocusedChild() instanceof VideoView) {
                mVideoView = (VideoView)((FrameLayout)view).getFocusedChild();
            }
        }

        view.setLayoutParams(new FrameLayout.LayoutParams(FrameLayout.LayoutParams.MATCH_PARENT, FrameLayout.LayoutParams.MATCH_PARENT));
        view.setBackgroundColor(Color.BLACK);
        activity.displayFullscreenView(view);
    }

    @Override
    public boolean onConsoleMessage(ConsoleMessage cm) {
        log.warn("Console Message: " + cm.message() + " on line " + cm.lineNumber() + " of " + cm.sourceId());
        return super.onConsoleMessage(cm);
    }

    @Override
    public void onProgressChanged(WebView view, int newProgress) {
        super.onProgressChanged(view, newProgress);

        if (newProgress < 100) {
            if (loadingProgress.getVisibility() == ProgressBar.GONE) {
                loadingProgress.setVisibility(ProgressBar.VISIBLE);
            }
            loadingProgress.setProgress(newProgress);
        } else if (newProgress >= 100) {
            loadingProgress.setVisibility(ProgressBar.GONE);
        }
    }

    @Override
    public View getVideoLoadingProgressView() {
        if (mVideoProgressView == null) {
            LayoutInflater inflater = LayoutInflater.from(KnowledgeBaseFragment.this.getActivity().getApplicationContext());
            mVideoProgressView = inflater.inflate(R.layout.video_loading_progress, null);
        }

        return mVideoProgressView; 
    }

    @Override
    public boolean onError(MediaPlayer mp, int what, int extra) {
        // TODO Auto-generated method stub
        return false;
    }

    @Override
    public void onCompletion(MediaPlayer mp) {
        this.onHideCustomView();
    }
} 
```

请注意，我是在片段中执行此操作的，因此要使其真正全屏显示，我必须将其与活动紧密耦合，以便它可以将 FrameLayout 附加到整个视图层次结构的根部，而不仅仅是片段的根部。

以下是这些功能：

```
@Override
public void displayFullscreenView(View customView) {
    parentLayout.addView(customView);
    this.customView = customView;
}

@Override
public void removeFullscreenView() {
    if (customView != null) {
        customView.setVisibility(View.GONE);
        parentLayout.removeView(customView);
    }

    customView = null;
} 
```

这是另一个像你一样的问题：[WebView and HTML5 <video>](https://stackoverflow.com/questions/3815090/webview-and-html5-video)

# html - 正文不包含内容/与加权页脚结合

> ID：13038537
> 
> 赞同：0
> 
> 时间：2012-10-23T20:17:20.070
> 
> 标签：html, css

请在此处查看 jsFiddle：

[http://jsfiddle.net/sheriffderek/y7fPK/1/](http://jsfiddle.net/sheriffderek/y7fPK/1/)

```
html, body {
height: 100%;
}

.page-wrapper {
min-height: 100%;
height: auto !important;
height: 100%;
} 
```

和一个缓冲区和页脚......小提琴会更有意义。

粘性页脚运行良好，但向下滚动时正文未扩展到包含内容。

![在此处输入图像描述](../Images/1cc1975bada5a24f7eee25f13e421a0a.png)

VS。（向下滚动时）

![在此处输入图像描述](../Images/e99470aa4ab23190c19b829aeb2620af.png)
看到这个橙色了吗？红色是主体，HTML 是橙色......它没有越过视口。如果我从正文中删除 height: 100% ，这可以解决这个问题 - 但是页脚会跳到内容的末尾。似乎 100% 的高度只是视口的高度。这是有道理的...但我希望正文与 HTML 一样大...任何想法？

感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T22:09:56.190

隐藏在包装器上的一个简单溢出似乎对我有用。

这是一支笔。

[http://codepen.io/sheriffderek/pen/DiewF](http://codepen.io/sheriffderek/pen/DiewF)

**HTML：**

```
<html><body>

    <div class="wrapper">

      <header>
          HEADER
      </header>

      <section class="main-content">
          MAIN CONTENT
      </section> <!-- end .main-content -->

      <div class="footer-buffer">BUFFER</div>

    </div><!-- end .wrapper -->

    <footer>
        FOOTER
    </footer>

</body></html> 
```

**CSS：**

```
html, body {
  height: 100%;
}

.wrapper {
  min-height: 100%;
  height: auto !important; /* for IE 6 */
  height: 100%; /* for IE 6 */
  margin: 0 auto -4em;

  /* new addition */
  overflow: hidden; /* this seems to do the trick */
  /* remove this to see the problem */
}

footer, .footer-buffer {
  height: 4em;
} 
```

# asp.net - 新手：MVC3 认证/记住我

> ID：13038541
> 
> 赞同：2
> 
> 时间：2012-10-23T20:17:25.593
> 
> 标签：asp.net, asp.net-mvc-3

我是 MVC 的新手，所以这个问题可能是微不足道的。在我的登录操作中，我执行以下操作：

```
public ActionResult LogOn(UserModel userModel, string returnUrl)
    {
        ActionResult retvalue = null;
        UserProfile user = MyDatabaseAccess.Instance.GetAuthenticatedUser(userModel.EmailAddress, userModel.Password);
        if (user != null)
        {
            FormsAuthentication.SetAuthCookie(userModel.EmailAddress, userModel.RememberMe);
            Session["LoggedOnUser"] = user;
            if (Url.IsLocalUrl(returnUrl))
            {
                retvalue = Redirect(returnUrl);
            }
            else
            {
                retvalue = RedirectToAction("Home", "Home");
            }
        }
        else
        {
            retvalue = RedirectToAction("LogOn", "Account");
        }
        return retvalue;
    } 
```

此时，我的会话具有完整的 UserProfile 对象，并且我通过网站使用它，到目前为止一切正常。

下次用户访问该网站时，该用户已经通过身份验证（rememberme 设置为 true），并且 User.Identity.Name 具有之前通过身份验证的用户的电子邮件地址，这是正确的。问题是我想将 UserProfile 加载到会话中，就像在 LogOn 操作中一样。我想要一个我这样做的地方，而不是在每个 [授权] 行动中。

有没有这样的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T20:22:32.460

一种方法是创建一个 SecurityContext ，您可以通过它访问用户信息。然后，您可以将 SecurityContext 保留在会话中。如果用户已通过身份验证，但会话中不存在 SecurityContext，则您从 Db 读取数据并将其再次添加到会话中。

可能是这样的：

```
public static class SecurityContext
{
    public static UserProfile CurrentUser
    {
        get
        {
            var user = HttpContext.Current.Session["CurrentUser"] as UserProfile;

            if (user == null)
            {
                using (var ctx = new YourDbContext())
                {
                    user = ctx.User.SingleOrDefault(u => u.UserName == 
                               HttpContext.Current.User.Identity.Name);
                    HttpContext.Current.Session["CurrentUser"] = user;
                }
            }

            return user;
        }
        set
        {
            HttpContext.Current.Session["CurrentUser"] = value;
        }
    }
} 
```

在您的应用程序中的任何时候，您都可以通过调用访问您的用户配置文件`SecurityContext.CurrentUser`

当然，您仍然必须使用`[Authorized]`控制器/操作上的属性来确保用户已通过身份验证。SecurityContext 只是一个包装器，可以更轻松地访问有关经过身份验证的用户的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T20:32:33.550

更好的方法是实现自定义 IIdentity 和/或 IPrincipal。您可以将经常使用的信息存储在身份验证 cookie 中。如果信息不敏感（即您只使用它来显示用户名而不用于任何与安全相关的事情），那么您可以将其存储在您自己的 cookie 中。

这里有一篇很好的文章：

[http://www.bradygaster.com/custom-authentication-with-mvc-3.0](http://www.bradygaster.com/custom-authentication-with-mvc-3.0)

# apache - 如何使用 htaccess 从 url 中删除 %u

> ID：13038557
> 
> 赞同：0
> 
> 时间：2012-10-23T20:18:32.290
> 
> 标签：apache, .htaccess, mod-rewrite, url-rewriting

我收到来自浏览器的错误请求（下​​面的错误消息）以获取 url

错误的请求

您的浏览器发送了此服务器无法理解的请求。客户端发送了格式错误的主机头

最后我意识到上面有一个特殊字符“%u”。如何使用 .htaccess 删除特殊字符？

例如，我想更改 URL

[http://www.example.com/property-listings/A/B/C/D/E/F-%uG/H/I-101.html](http://www.example.com/property-listings/A/B/C/D/E/F-%uG/H/I-101.html)

至

[http://www.example.com/property-listings/A/B/C/D/E/FG/H/I-101.html](http://www.example.com/property-listings/A/B/C/D/E/F-G/H/I-101.html)

有什么想法吗。

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T14:07:24.947

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T03:51:14.493

尝试：

```
RewriteRule ^(.*)%u(.*)$ /$1$2 [L,R=301] 
```

# .net - Cruise Control .NET：使用带有多个参数的 cb:define

> ID：13038559
> 
> 赞同：4
> 
> 时间：2012-10-23T20:18:40.807
> 
> 标签：.net, build, cruisecontrol.net

这个问题很烦人，我已经反对它几个小时了。我正在尝试做的是使用 CCNet 中的配置预处理器来创建一个 XML 元素，该元素调用 CCNet 中的任务。我想我从根本上误解了一些东西。

我现在拥有的是这样的：

```
 <cruisecontrol xmlns:cb="urn:ccnet.config.builder">

         <cb:define name="myBuild">
            <devenv>
                <solutionfile>"$(projPath)"</solutionfile>
                <configuration>"$(releaseMode)"</configuration>
                <buildtype>Rebuild</buildtype>
                <executable>C:\Program Files (x86)\Microsoft Visual Studio 9.0\Common7\IDE\devenv.exe</executable>
                <buildTimeoutSeconds>2400</buildTimeoutSeconds>
                <version>VS2008</version>   
            </devenv>
        </cb:define> 
```

然后要使用它，我在项目中执行以下操作：

```
<cb:myBuild projPath="C:\sample.sln" releaseMode="Release" /> 
```

我得到的错误是

**[CCNET 服务器：错误] 内部错误：引用未知符号 'releasemode'**

然后是 ThoughtWorks dll 的巨大堆栈跟踪。

我的主要困惑在于为什么定义中的“$（projPath）”可以正常工作，但“$（releaseMode）”却不行。事实上，如果我删除项目中对“releaseMode”的所有引用，CCNet 会接受脚本，甚至构建它们。但是，它不起作用，因为并非我们所有的解决方案都具有“发布”模式，有些是专门命名的（出于某种原因，不要问我）。

任何关于正在发生的事情的帮助，或者更重要的是，如何解决这个问题将不胜感激。

我正在运行 1.8.2 版。此外，我们确实计划将实际构建脚本移至 NANT，但这是我们构建过程漫长道路上的第一步。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T19:41:26.550

我从您的部分构建了一个简单的配置文件，但它完美无缺：

```
<cb:define name="myBuild">
  <devenv>
    <solutionfile>"$(projPath)"</solutionfile>
    <configuration>"$(releaseMode)"</configuration>
    <buildtype>Rebuild</buildtype>
    <executable>C:\Program Files (x86)\Microsoft Visual Studio 9.0\Common7\IDE\devenv.exe</executable>
    <buildTimeoutSeconds>2400</buildTimeoutSeconds>
    <version>VS2008</version>   
  </devenv>
</cb:define>

<project name="a">
  <tasks>
    <cb:myBuild projPath="C:\sample.sln" releaseMode="Release" />
  </tasks>
</project> 
```

不知何故，我怀疑服务器上任何其他配置设置的错误。

`CCValidator.exe`如果您还没有这样做，可以简化故障排除使用。这样一来，潜在的问题来源就会少很多。您可以在您的`CruiseControl.NET\server`文件夹中找到它。尝试打开其中的配置文件，看看它是否显示任何错误。

如果是这样，请尝试注释掉或删除配置的所有部分以使其尽可能小，同时仍然重现问题。如果您仍然无法解决它，请发布该配置以供其他人查看。

# ruby-on-rails-3 - Rails 3 查看语法错误

> ID：13038560
> 
> 赞同：0
> 
> 时间：2012-10-23T20:18:41.603
> 
> 标签：ruby-on-rails-3

红宝石 1.9.3-p194

导轨 3.0.3

我今天遇到了 libcrypt 错误，经过数小时的故障排除后，我卸载了 rvm、ruby 和 gems。我重新安装了所有东西，但现在我的应用程序抛出错误。我没有对我的代码进行任何更改，但是在重新安装之前它运行良好：

```
ActionView::Template::Error (/home/username/apps/vits/app/views/layouts/application.html.erb:19: syntax error, unexpected ',', expecting ')'
if (current_user.admin == true, "Admin Menu", adminmenu_path...
/home/username/apps/vits/app/views/layouts/application.html.erb:19: syntax error, unexpected ',', expecting ')'
...er.admin == true, "Admin Menu", adminmenu_path) );@output_bu....
/home/username/apps/vits/app/views/layouts/application.html.erb:22: syntax error, unexpected keyword_do_block, expecting keyword_end
');@output_buffer.append_if_string=  flash.each do |name, msg|
/home/username/apps/vits/app/views/layouts/application.html.erb:22: syntax error, unexpected '|', expecting '='
');@output_buffer.append_if_string=  flash.each do |name, msg|
/home/username/apps/vits/app/views/layouts/application.html.erb:44: syntax error, unexpected keyword_ensure, expecting $end):
16:     <div id="header">
17:             <div class="wrap clear">                        
18:                 <% if current_user %>  
19:                     <%= link_to "Logout", logout_path %>  |  <%= link_to "Main Menu", usermenu_path %>  |  <%= link_to_if (current_user.admin == true, "Admin Menu", adminmenu_path) %>
20:                 <% end %>
21:             </div>
22: <%- flash.each do |name, msg| -%>
app/controllers/user_sessions_controller.rb:29:in `new' 
```

有任何想法吗？这对我来说是一个糟糕的 RoR 日。
提前致谢。-凯蒂

编辑添加整个 application.html.erb：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <title><%= h(yield(:title) || "Vendor Invoice Tracking System (VITS)") %></title>
    <link rel="stylesheet" href="stylesheets/scaffold.css" type="text/css" media="all" charset="utf-8" />
    <%= stylesheet_link_tag 'scaffold' %>
    <%= javascript_include_tag :defaults %>
    <%= javascript_include_tag "tablesort.js" %>
  </head>

  <body>
    <div id="siteholder">

    <div id="header">
            <div class="wrap clear">                        
                <% if current_user %>  
                    <%= link_to "Logout", logout_path %>  |  <%= link_to "Main Menu", usermenu_path %>  |  <%= link_to_if ((current_user.admin == true, "Admin Menu", adminmenu_path)) %>
                <% end %>
            </div>
<%- flash.each do |name, msg| -%>
<%= content_tag :div, msg, :id => "flash_#{name}" %></p>
<div class="clear"></div>
<%- end -%> 

        <% if current_user %>       
            <div id="content1">             
                <%= yield %>
            </div>

        <% else %>

            <div id="content">
                <div id="content1">
                </div>
                <%= yield %>
            </div>
        <% end %>

    </div>
  </body>
</html>' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T20:23:27.773

我认为问题在于这一行：

```
<%= link_to_if (current_user.admin == true, "Admin Menu", adminmenu_path) %> 
```

您不需要`== true`，只需：

```
<%= link_to_if (current_user.admin, "Admin Menu", adminmenu_path) %> 
```

会没事的。如果由于某种原因确实需要检查相等性，则需要额外的一对括号，例如：

```
<%= link_to_if ((current_user.role == "admin"), "Admin Menu", adminmenu_path) %> 
```

# vb.net - Excel 无法正确显示数组

> ID：13038562
> 
> 赞同：0
> 
> 时间：2012-10-23T20:18:50.810
> 
> 标签：vb.net, excel, automation

Excel似乎使用以下代码在列中一遍又一遍地显示数组的第一个元素

```
 Dim fileNum() As String = {"1", "2"}
    xlSourceRange = xlWorkSheet.Range("N2:N" & fileNum.Length + 1)
    xlSourceRange.Value2 = fileNum 
```

整个范围只填满 1。我怎样才能使数组中的每个元素都显示在列中，而不必手动分配循环中的每个单元格。如果这很重要，我正在使用 Microsoft.Office.Interlop.Excel。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T21:33:59.823

好的，现在我有了一个 IDE，所以我可以更聪明地回答。问题是数组 - 不幸的是，Excel 添加了基于二维数组的范围。对于您的具体示例，这段代码将为您提供所需的内容：

```
 Dim fileNum() As object = {{"1"}, {"2"}}
    xlSourceRange = xlWorkSheet.Range("N2:N" & fileNum.Length + 1)
    xlSourceRange.Value = fileNum 
```

希望这能解决问题！

# networking - Linux中进程上下文和中断上下文的同步

> ID：13038565
> 
> 赞同：3
> 
> 时间：2012-10-23T20:18:56.957
> 
> 标签：networking, tcp, synchronization, virtual-machine

我在研究提高虚拟机（VM）的 TCP/UDP 性能时遇到了一些问题，如果有人可以为我提供一些帮助或建议来解决我的问题，我将不胜感激。

RPS & RFS 在物理机上运行良好，但有时它们可​​能无法在 VM 上运行。例如，RFS 旨在向运行相应接收进程的 CPU 发送 IRQ。但是，当多个 vCPU 共享一个物理 CPU (pCPU) 时，每个 VM 的虚拟 CPU (vCPU) 并不总是在线（这里我们可以简单地假设 vCPU 调度是循环的。）。因此，即使目标用户级进程正在其上运行，将 IRQ 发送到脱机 vCPU 也没有意义。从理论上讲，将 NIC IRQ 发送到正在运行的 VM 的 vCPU 将缩小 NIC IRQ 处理延迟并提高 TCP/UDP 性能。因此，我为每个 VM 分配了一个几乎总是在线的虚拟协处理器 (co-vCPU)，并将 VM 的 NIC IRQ 固定到这个 co-vCPU。从VM中的Guest OS的角度来看，用户进程（例如 iperf) 在一个核心上运行，而 eth0 的 IRQ 上下文在另一个核心上运行。在我的实验中，它适用于 UDP，但不适用于 TCP。

我怀疑这是由于进程上下文和 IRQ 上下文之间的同步造成的。因为当我阅读linux中TCP层的一些源代码时，我发现IRQ上下文（例如net/ipv4/tcp_ipv4.c中的tcp_v4_rcv()）和用户上下文（例如net/ipv4/tcp.c中的tcp_recvmsg()）当他们访问内核中的缓冲区（receive_queue、backlog_queue、prequeue）时调用 lock_sock()/unlock_sock()。因此，有时 IRQ 无法访问被另一个运行用户级接收进程（iperf 服务器）的 vCPU 锁定的接收缓冲区，并且这个持有锁的 vCPU 已被 VM 监视器（VMM）或管理程序取消调度。

我不确定我是否清楚地描述了我的问题。无论如何，欢迎对此提出任何建议。

# javascript - 在 javascript animate 中使用 asp.net VB 变量

> ID：13038572
> 
> 赞同：2
> 
> 时间：2012-10-23T20:19:20.770
> 
> 标签：javascript, asp.net, sql

我从我的 sql 数据库中调用记录列表，然后将它们写入动态表。在此期间，我有一个变量（CountRecord），每次向表中添加新元素时都会递增。我想知道是否可以从我的 .js 文件中调用 CountRecord 并更改我的

```
$("#SubFirst").animate({height:525},"slow"); 
```

类似于

```
$("#SubFirst").animate({height:"<%=CountRecord%>*30px"},"slow"); 
```

我猜这个变量不会跨越不同的文件。所以我什至不知道这是否可能。如果有人知道这样做的不同方法，我愿意试一试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T12:08:18.973

如果您正在更新计数变量服务器端，那么您的方法是正确的，所有这些都是因为一个小的语法错误。

```
var heightToSet = "<%=CountRecord %>" * 30; 
$("#SubFirst").animate({height: heightToSet + "px"},"slow"); 
```

**编辑**

为了清楚起见，在这里回答，

我相信有问题的线应该是

```
<a onclick=" <%dim NumClicked=0 dim CountRecord =20 if NumClicked =0 then%> 
$('#SubFirst').animate({height:'<%=CountRecord%>'*30 + 'px'},'slow'); 
<%NumClicked=NumClicked+1 else %>$('#SubFirst').animate({height:525px},'slow'); 
<%NumClicked=0 end if%>" id="first" overflow: "hidden">People</a> 
```

# jquery - Phonegap Windows Phone 7 动态 HTML 加载和使用 jQuery 的跨域调用

> ID：13038573
> 
> 赞同：3
> 
> 时间：2012-10-23T20:19:21.540
> 
> 标签：jquery, cordova

好吧，我搜索了很多，我得到了很多使用 Phonegap 的 Android 开发者。几个问题：

1.  如何使用 jQuery 将本地 HTML 文件加载到 Phonegap 中的 div 中？就像是：

    $('#contentDiv').load(url, function(response){});

我知道可以使用`android_assets/www/html/file.html`. 在 Windows Phone 7 和 iOS 中这相当于什么？我试过`www/html/file.html`了，但我一直找不到 404。

1.  现在这是让我发疯的一个！基本 Ajax 发布到跨域。在 Phonegap 网站上，它说 Phonegap 没有跨域问题，因为它来自本地文件，但每次我点击错误处理程序并且状态为 0。

任何帮助将不胜感激。我知道有很多开发者试图做到这一点，而且一定有人破解了它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T20:08:01.413

好吧，对于所有可能会遇到这个问题的人。以下是如何使用加载文件和进行 ajax 调用。

1.  确保在 Cordova phonegap 的“deviceready”回调中加载所有初始化脚本。如果您不这样做，请尝试拨打类似的电话

$('#contentDiv').load(url, function(response){});

Cordova 不知道您尝试访问的 url 映射。Cordova 挂钩到 ajax 调用，并将在本地选择文件并将其提供给您的回调。如果 Cordova 未初始化（即设备就绪尚未触发），浏览器控件会将其视为远程获取，并将您置于通常的跨域问题并拒绝它。至少，这是我认为正在发生的事情。因此，在您对文件进行 ajax 调用之前，请确保您的设备就绪功能已触发。

1.  $.support.cors = 真；救援。在对远程资源进行 ajax 调用之前添加它。显然，步骤 1 应该是初始化本地脚本的步骤。

这是一个修改后的 index.js。这是做什么的？好吧，它会检查导航器是否是移动设备而不是台式机，并且还会设置设备是否使用cordova。

我正在使用 require.js 来加载我的模块。bootstrapper.js 文件将加载我的初始屏幕并执行所需的操作以获取 index.html 中的第一个屏幕。

```
var app = {
   // Application Constructor
   isCordova: false,
    initialize: function () {
        app.bindEvents();
    },
// Bind Event Listeners
//
// Bind any events that are required on startup. Common events are:
// `load`, `deviceready`, `offline`, and `online`.
bindEvents: function () {
    window.isCordova = app.isCordova;
    if (app.isMobile())
        document.addEventListener('deviceready', app.cordovaReady, false);
    else
        app.onReady();
},
cordovaReady: function () {
    window.isCordova = true;
    app.onReady();
},
// deviceready Event Handler
//
// The scope of `this` is the event. In order to call the `receivedEvent`
// function, we must explicity call `app.receivedEvent(...);`
onReady: function () {
    app.configureRequire();
    app.define3rdPartyModules();
    app.loadPlugins();
},
isMobile: function () {
    var testMobile = function (a) {
        return /(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(a) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0, 4))
    }
    window.isMobile = testMobile(navigator.userAgent || navigator.vendor || window.opera);
    return window.isMobile;
},
configureRequire: function () {
    requirejs.config({ baseUrl: 'js/app', paths: { 'filePath': '../../html'} });
},
define3rdPartyModules: function () {
    //this function defines a require js modules and attaches it to the root.

    define('jquery', [], function () { window.jQuery.support.cors = true; return window.jQuery; });
    define('ko', [], function () { return window.ko; });
    define('bootstrap', [], function () { return window.bootstrap; });
    define('amplify', [], function () { return window.amplify; });
    define('infuser', [], function () { return window.infuser; });
    define('moment', [], function () { return window.moment; });
    define('sammy', [], function () { return window.Sammy; });
    define('underscore', [], function () { return window._; });
    define('notifier', ['jquery', 'bootstrap'], function () { return window.Notification });

},
loadPlugins: function () {
    requirejs([], app.boot());
},
boot: function () {
    require(['bootstrapper'], function (bs) {
        bs.run();
    });
} 
```

};

请注意，我的基础库已经包含在 index.html 中，我只是为我的所有核心库创建了一个全局命名空间。我的应用程序特定文件的其余部分将由 require 按需加载。

请享用！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-30T17:50:22.667

var path = window.location.href; path = path.substring( 0 , path.indexOf('index.html') );

# php - 通过正则表达式标准php找到几个单词

> ID：13038574
> 
> 赞同：0
> 
> 时间：2012-10-23T20:19:24.910
> 
> 标签：php

我想用另一个替换一些字符串。我使用以下代码：

```
$mc = 'Hello I have these bages: [A-561],[A-123],[A-1],[A-5234]';
$medal = '<img src="1" />';
$bages = preg_replace('/^\[A-[0-9]+\]/i',$medal,$mc);
echo $bages 
```

它打印出这个：

```
Hello I have these bages: [A-561],[A-123],[A-1],[A-5234] 
```

如果我将 $mc 更改为

```
$mc = "[A-561],[A-123],[A-1],[A-5234]"; 
```

然后打印出来：

```
<img src="1" />,[A-123],[A-1],[A-5234] 
```

我不知道为什么会这样。我想将它们全部更改为我的替换字符串。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T20:21:51.453

正`^`则表达式中的 使正则表达式仅匹配字符串的开头。

`^`从正则表达式中删除：

```
$bages = preg_replace('/\[A-[0-9]+\]/i',$medal,$mc); 
```

# android - 将 Canvas 上的图像保存到 SurfaceView 中的文件

> ID：13038577
> 
> 赞同：3
> 
> 时间：2012-10-23T20:19:31.103
> 
> 标签：android, android-canvas

从我在 SO 上看到的情况来看，即使可能，我想做的事情也很困难，但我希望有人至少可以建议一种不那么迂回的方式来做我想做的事情。下面的代码将项目绘制到画布上，所有这些都在自定义 SurfaceView 中。我想要做的是，除了显示画布之外，将其上的所有内容保存到一个文件中以用于几个活动，但我似乎无法弄清楚如何。

```
public void draw()
{
    if(holder.getSurface().isValid()) {
        Canvas canvas = holder.lockCanvas();
        canvas.drawColor(0, Mode.CLEAR);
        drawSurface(canvas);
        canvas.translate(-56, 30);
        int i = 0;
        for(Picture a: accessories) {
            canvas.translate(0, a_offset[i]);
            if(a!=null) {
                canvas.drawPicture(a);
            }
            i++;
        }           
        holder.unlockCanvasAndPost(canvas);  
    }
}

private void drawSurface(Canvas canvas) {
    Rect rect = new Rect();
    rect.set(37*screenWidth/480, 146*screenHeight/800, (37 + 300)*screenWidth/480, (146 + 300)*screenHeight/800);
    canvas.drawBitmap(avatar, null, rect, null);
} 
```

我目前为保存文件所做的基本上是使用上述方法的副本，使用从位图（`canvas = new Canvas(bitmap)`而不是`holder.lockCanvas`）创建的 Canvas 并使用不同的数字来获得正确的位置和大小。我可以组合这些方法并至少给它们一些参数以避免使用不同的方法，但如果可能的话，我只想绘制图像并使用相同的画布保存文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T20:24:59.220

您不应该存储画布。您应该存储图像转换矩阵和图像本身。然后，如果您想检索，加载图像，加载其矩阵，将矩阵应用于图像，您应该没问题。

或者您可以尝试将画布对象本身存储为 blob 数据，然后尝试使用 blob 从数据库中重新创建它。我从来没有这样做过，在任何情况下都不会推荐它。

# ruby-on-rails - 部署 ROR 后的 Rails 管理员用户名和密码

> ID：13038582
> 
> 赞同：0
> 
> 时间：2012-10-23T20:19:45.360
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku, rails-admin

经过多天的尝试，我终于设法启动了我的应用程序，但现在面临一个问题。

该应用程序使用 rails admin 允许管理员用户（我希望......）控制应用程序中输出的对象。

但是，我已将应用程序推送到 Heroku，并删除了所有设计注册选项（我不希望其他人能够注册），并且由于数据库具有全新的表和干净的石板，因此我使用的登录详细信息我的本地主机不再工作。

有没有办法让我只使用控制台在我的新 Heroku 数据库中创建用户名和密码？

如果这不是正确的方法，那么我怎样才能最好地设置我的管理员用户？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T20:25:17.207

您可以使用控制台创建新用户，如下所示：

```
> User.create! email: 'foo@example.com', password: 'foobar', confirmation: 'foobar' 
```

您也可以`db/seeds.rb`在首次部署后将此代码添加到并运行 rake db:seeds（但不要忘记更改密码。

# excel - 从单元格值填充用户窗体上的组合框

> ID：13038589
> 
> 赞同：3
> 
> 时间：2012-10-23T20:20:09.290
> 
> 标签：excel, vba, ms-word

如何从单元格 B2 填充组合框（在用户窗体上）到用户选择输入的数量。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T20:35:30.917

对于一列值：

```
Me.myCombo.List = Worksheets("mySheet").Range("B2:B100").Value 
```

对于一行值：

```
Me.myCombo.List = Application.Transpose( _
          Worksheets("mySheet").Range("B2:M2").Value) 
```

# python - 无法编译 Cython 代码 - 无法识别的命令行选项“-mno-cygwin”

> ID：13038591
> 
> 赞同：0
> 
> 时间：2012-10-23T20:20:26.013
> 
> 标签：python, numpy, cygwin, cython

我正在尝试将一些 Python / Numpy 代码编译到 Cython 中以加快速度。我可以在我的桌面上很好地编译 - 我将我的 .pyx Cython 文件复制到我的笔记本电脑上运行它，在尝试编译后，我收到以下错误：

```
C:\Python27\MATH7450>python setup.py build_ext --inplace
running build_ext
cythoning heat.pyx to heat.c
building 'heat' extension
C:\strawberry\c\bin\gcc.exe -mno-cygwin -mdll -O -Wall -IC:\Python27\lib\site-pa
ckages\numpy\core\include -IC:\Python27\include -IC:\Python27\PC -c heat.c -o bu
ild\temp.win32-2.7\Release\heat.o
cc1.exe: error: unrecognized command line option '-mno-cygwin'
error: command 'gcc' failed with exit status 1 
```

我正在运行 Windows 7 64 位。我看到它使用的是草莓 perl。我安装了 32 位版本的草莓 perl。同样，它在我的台式机上运行良好，但在移植到笔记本电脑时出现这个奇怪的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T20:44:17.743

根据 Cython的[Windows 安装说明](http://wiki.cython.org/InstallingOnWindows)，推荐的编译器是免费的 Visual C++ 2008 Express，可以通过离线安装[Visual Studio 2008 Express iso](https://www.microsoft.com/en-gb/download/details.aspx?id=20682)进行安装。

或者[Cython 可以使用 MinGW 及其 gcc](http://wiki.cython.org/InstallingOnWindows)，尽管[据报道这是一条更困难的路线](http://coindoorinterlock.blogspot.co.uk/2012/04/installing-working-cython-on-windows.html)。

从您的问题中包含的输出来看，Cython 正在尝试使用*Strawberry Perl*发行版中包含的 MinGW 安装。

我的建议是安装*Visual C++ 2008 Express*，根据我的经验，它最适合编译 Cython 或其他 Python C 扩展模块。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T21:25:57.037

`-mno-cygwin`in`Python\Lib\distutils\cygwinccompiler.py`导致此问题：请参阅[使用 cython 和 mingw 编译产生 gcc：错误：无法识别的命令行选项 '-mno-cygwin'](https://stackoverflow.com/questions/6034390/compiling-with-cython-and-mingw-produces-gcc-error-unrecognized-command-line-o)或[http://korbinin.blogspot.com/2013/03/cython-mno-cygwin-problems.html](http://korbinin.blogspot.com/2013/03/cython-mno-cygwin-problems.html) . 我的 Python 发行版（Anaconda）`cygwinccompiler.py`没有。无论如何，在删除类`-mno-cygwin`定义中的所有内容后，`Mingw32CCompiler`您应该能够编译。

# c# - 从我的控制器获取信息到 onclick 确认（警报）

> ID：13038592
> 
> 赞同：5
> 
> 时间：2012-10-23T20:20:27.563
> 
> 标签：c#, jquery, asp.net-mvc, razor

我尝试确认销售，我需要有关产品的总和信息..

**我的观点**

```
@using (Html.BeginForm())
{
    @Html.ValidationSummary(true)
<fieldset>
    <legend>Card</legend>

    <div class="editor-label">
        @Html.LabelFor(model => model.CardModel.SerialNumber, "Serial No")
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.CardModel.SerialNumber, new { id = "sn" })
        @Html.ValidationMessageFor(model => model.CardModel.SerialNumber)
    </div>

      <p>
        <input type="submit" value="CardSale" id="btnSubmit"
        onclick="if (confirm('The owner dealer price is : **@Model.OwnerPrice** . Are you sure?')) { return true; } else { return false; }" />
    </p>

</fieldset>
} 
```

我尝试了这样的“ $.getJSON ”：

```
<script type="text/javascript">
$(document).ready(function() 
 {
  $("#btnSubmit").click(function ()
  {
        var serial = $("#sn");
        var price = "";
        var url = "";
        url = "@Url.Action("GetOwnerPrice","Card")/"+serial;

        $.getJSON(url,function(data)
        {   
            alert(data.Value);
        });
    });       
 }); 
```

在控制器上

```
 public ActionResult GetOwnerPrice(int sn)
    {
        var owner = db.Dealers.Single(s => s.DealerID == db.Dealers.Single(o => o.UserName == User.Identity.Name).OwnerDealerID);
        var ownerPrice = owner.ProductToSale.Single(pr => pr.ProductID == sn).SalePrice;

        return Json(ownerPrice, JsonRequestBehavior.AllowGet);
    } 
```

但我不知道如何将其返回到 onclick 确认消息或返回到我的 ViewModel 中。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T22:06:18.830

您编写它的方式，@Model.OwnerPrice 值必须在页面生成期间已知，因为模板引擎仅具有在模板数据合并时存在于模型中的值。

如果您在页面加载期间*确实*知道该值，那么只需完全按照您的方式使用模型中的值，如果用户进入此对话框，他们将看到正确的值。

如果在页面加载期间此确认对话框的值未知，那么您有正确的想法通过 Ajax 调用检索它。诀窍是在调用完成时使用新信息更新 DOM。您可以通过三个步骤完成此操作。首先，更改您的对话框：

第一的：

```
if (confirm('The owner dealer price is : ' + ownerDealerPrice + '. Are you sure?')) 
```

二：声明一个新的全局变量：

```
var ownerDealerPrice; 
```

第三：获取价格：

```
$.ajax({ url: "/GetOwnerPrice", type: "GET", data: "serial=" + serial })
.success(function (price) {ownerDealerPrice = price; }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T14:41:25.633

最后我拿了两个答案=）

我的观点：

```
@model oCc.IPToGo.ViewModel.CardSaleViewModel

@{
   ViewBag.Title = "Card Sale";
   var ownerDealerPrice = 0;
}

  @using (Html.BeginForm())
  {
    @Html.ValidationSummary(true)
<fieldset>
    <legend>Card</legend>

    <div class="editor-label">
        @Html.LabelFor(model => model.CardModel.SerialNumber, "Serial No")
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.CardModel.SerialNumber)
        @Html.ValidationMessageFor(model => model.CardModel.SerialNumber)
    </div>

      <p>
        <input type="submit" value="CardSale" />
    </p>

</fieldset>
}           
<script type="text/javascript">
$(document).submit(function() 
{
    var serial = "";
    serial = $("#CardModel_SerialNumber").val();
    var uurl = "";
    uurl = "@Url.Action("GetOwnerPrice","Card")/"+serial;

     $.ajaxSetup({ cache: false });

    $.ajax({ async: false , url: uurl,  dataype : 'json', method : 'GET'})
    .success(function (price) {ownerDealerPrice = price; 

    $.ajaxSetup({ cache: true }); 
   });
 return (confirm('The owner dealer price is : ' + ownerDealerPrice + '. Are you sure?'))
}); 
```

控制器代码

```
 public ActionResult GetOwnerPrice(string ID)
    {
        var currentDealer =  db.Dealers.Single(o => o.UserName == User.Identity.Name);
        var owner = db.Dealers.Single(s => s.DealerID ==currentDealer.OwnerDealerID);
        var card = db.Cards.Single(s => s.SerialNumber == ID);
        var ownerPrice = owner.ProductToSale.Single(pr => pr.ProductID == card.ProductID).SalePrice;

        return Json(ownerPrice, JsonRequestBehavior.AllowGet);
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T23:19:51.303

您是否尝试过使用**async = false的****$.ajax**？它将控制权返回到您的点击处理程序。就像是：

 **```
var tmp = 0;
$.ajax({ 
   async = false, 
   url = ..., 
   dataype = 'json',
   method = 'POST'})
   .complete(function(data) {
      tmp = data
   });
if(confirm("my message here: " + tmp)) {... } 
```**

# html - 孩子的不透明度低于父母

> ID：13038598
> 
> 赞同：0
> 
> 时间：2012-10-23T20:20:44.277
> 
> 标签：html, css, opacity

我想知道是否有任何方法可以让孩子比父母更透明。我需要`div`通过比`div`它包含的更多内容来制作一个节目，有什么方法可以用 CSS 实现这一点吗？

这就是我的目标：我有一个不透明度为 0.6 的背景，左边的元素有 0.8，所以它更暗，但我需要右边的元素更透明。为它设置比父级更少的 alpha 不起作用，它只是匹配其父级。

![在此处输入图像描述](../Images/401f4173b86373a09f4a45bfc3188fa3.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T20:23:04.930

它不能使用 CSS 2 来完成，但可以使用 CSS 3 来完成[http://www.css3.info/introduction-opacity-rgba/](http://www.css3.info/introduction-opacity-rgba/)
如果您使用[rgba 作为父级的背景颜色](https://www.google.com/webhp?rlz=1C1CHKZ_enEG430EG430&sourceid=chrome-instant&ie=UTF-8&ion=1#hl=en&sugexp=les;&gs_nf=3&tok=P0vDGXcN5Of8RELm3jmk5Q&pq=css3%20bnga&cp=7&gs_id=z&xhr=t&q=css3%20rgba&pf=p&safe=off&rlz=1C1CHKZ_enEG430EG430&sclient=psy-ab&oq=css3%20rb&gs_l=&pbx=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.&fp=5213d3a4531c870f&bpcl=35466521&ion=1&biw=1680&bih=925)，内部元素将不会得到不透明度。

不想用css3的话，除了把孩子放在父母外面，玩位置，别无他法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T20:25:51.233

根据您的情况，您可以尝试以下任何方法：

1.  给孩子`position:absolute`并使用 CSS 将其移动到您想要在父 div 前面的位置。
2.  将孩子或父母转换为图像，然后根据需要在另一个上使用不透明度。
3.  使用 CSS 3：[http ://www.css3.info/preview/opacity/](http://www.css3.info/preview/opacity/)

CSS 3 技术在各种浏览器中的兼容性：http: [//caniuse.com/css-opacity](http://caniuse.com/css-opacity)

# javascript - Python/Django：表单提交时打印消息

> ID：13038600
> 
> 赞同：1
> 
> 时间：2012-10-23T20:21:07.507
> 
> 标签：javascript, jquery, python, django

Django/Jquery 新手：

尝试打印“感谢您注册！” 提交表单后。

```
 <script type="text/javascript">
    $(function() {
      $("input[data-submit-item]").live("click", function() {
        var message = "Thanks for signing up!";
        $.ajax({
          type: "POST",
          url: "/add",
          data: {
            "text": $("#item").val(),
            "csrfmiddlewaretoken": $('input[name~="csrfmiddlewaretoken"]').val()
          },
          success: function(data) {

            $("#item-list").append(data);
            $("#confmessage").append(message);
            $("#item").val("");
          }
        });
      });
    });
  </script>
</head>
<body>
  <div id = "main-container">

          <h1>FooBar Baz</h1>
          <div id = 'signup-form'>
            <form>
              <input type="text" id="item" placeholder="Enter your email ..." />
              {% csrf_token %}
              <div><input type="submit" value="Sign Up" data-submit-item="true" /></div>
            </form>
              </div>
   <div id = "confmessage"></div>
                <p><strong>front</strong></p>
  <ul id="item-list">
    {% for item in line %}
      <li>{{ item.text }}</li>
    {% endfor %}
  </ul>
  <p><strong>back</strong></p>
  <p><a href="/remove">remove</a></p>
            </div>
          </div>
        </div>
      </div>
    </body>
    </html> 
```

这只是打印出所有输入电子邮件的列表，但不打印确认消息。这是此示例的修改：[https ://github.com/memcachier/memcachier_line/blob/master/templates/index.html](https://github.com/memcachier/memcachier_line/blob/master/templates/index.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T20:26:58.927

您只需要：

```
$("#confmessage").text(message); 
```

而不是使用`append`.

# java - 如何将按钮添加到已经可见的 jPanel？

> ID：13038601
> 
> 赞同：2
> 
> 时间：2012-10-23T20:21:09.933
> 
> 标签：java, swing, button, jpanel, actionlistener

我正在尝试将按钮添加到已经可见的 jPanel。但是，以下代码不起作用；我看不到第二个按钮。

```
 ja.addActionListener(new ActionListener () {
        public void actionPerformed(ActionEvent e) {

            klicks++;

            if(klicks == 35) {                  
                panel.add(nein);
                ja.setForeground( Color.red );
                frame.repaint();
                panel.repaint();                    
            }

            if(klicks > 35) {                   
                nein.setText("Beenden");
                ja.setText("FAIL");
            }
        }});
    } 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T20:23:50.153

您的问题非常模糊，但看起来您正在修改一个已经可见的面板（也就是说，已经添加到可见容器的层次结构中）。在这种情况下，您应该调用

```
panel.revalidate();
panel.repaint(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T20:24:48.983

从您提供的代码中不清楚您要做什么。你能发布整个代码吗？

您需要将按钮创建为新对象，例如：

```
JButton button1 = new JButton("button1"); 
```

然后将其添加到窗格中。

# r - Matlab 中的 areaint 与 R 中的 areaPolygon 或 areapl

> ID：13038602
> 
> 赞同：2
> 
> 时间：2012-10-23T20:21:13.560
> 
> 标签：r, matlab, gis, area, polygons

当我尝试在 Matlab 与 R 中计算多边形面积时，我得到了两组不同的值。在 Matlab 中，我使用了 areaint（参考椭圆体设置为 WGS84）。在 R 中，我在 lat-lon 上尝试了 geosphere::areaPolygon，在网格转换的欧几里得坐标上尝试了 splancs::areapl。R 结果彼此一致，但与 Matlab 计算不一致。两组平均有 25% 的差异（Matlab 较低）。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T00:12:57.220

显然，Matlab 的结果来自格式不正确的输入矩阵：areaint() 需要 (lat,lon)，而 R 输入的格式正确为 (lon,lat)。这适用于前面提到的任何 R 函数。

另见： [http ://r-sig-geo.2731867.n2.nabble.com/template/NamlServlet.jtp?macro=reply&node=7581419](http://r-sig-geo.2731867.n2.nabble.com/template/NamlServlet.jtp?macro=reply&node=7581419)

# r - 处理远程 R 会话

> ID：13038603
> 
> 赞同：3
> 
> 时间：2012-10-23T20:21:18.343
> 
> 标签：r, ssh, remote-server

由于内存限制，我正在处理的 R 会话位于远程集群上，并且数据是远程存储的。因此，我使用 notepad++ 来编辑我的文件，然后将它们粘贴到我的 SSH 会话中。与远程会话集成以利用代码完成和 RStudio 等编辑器中可用的其他功能的最佳方法是什么。关于处理远程连接的任何最佳实践建议？我想这对于大多数使用大型数据集的 R 用户来说一定是这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T07:36:29.973

来自：[http ://www.sciviews.org/_rgui/projects/Editors.html](http://www.sciviews.org/_rgui/projects/Editors.html)

著名的[**Vim**](http://www.vim.org)[编辑器现在还为 R 提供语法高亮显示。您可以在此处](http://www.vim.org/scripts/script.php?script_id=1048)获取集成 R 的插件。[对于 Windows，这里](http://www.vim.org/scripts/script.php?script_id=2991)有另一个使用 R-DCOM 的插件。这里有一个备用的多平台插件。还请查看 VIM 网站，因为那里还有其他 R 用户感兴趣的资源（请参阅[此处](http://vim.wikia.com/wiki/Script%3aList_of_R_Project_scripts)了解概述）。还有一个 R 包可以更好地在 Vim 中集成调试工具：[adtdbg](http://cran.r-project.org/web/packages/edtdbg/index.html)

# javascript - 将 JQuery-UI 可排序连接列表自定义配置保存到本地 Cookie

> ID：13038607
> 
> 赞同：4
> 
> 时间：2012-10-23T20:21:47.703
> 
> 标签：javascript, jquery, jquery-ui, cookies, jquery-ui-sortable

**如果您不想阅读整篇文章，请跳至底部的更新 #2。**

我使用 jquery-ui 连接列表创建了一个可自定义的 UI：http: [//jqueryui.com/sortable/#connect-lists](http://jqueryui.com/sortable/#connect-lists)

我现在想将用户的 UI 配置保存到他们本地机器上的 cookie 中，以便下次他们加载页面时，他们之前设置的布局将被加载，如本页所述： http: [//devheart.org/文章/jquery-customizable-layout-using-drag-and-drop/](http://devheart.org/articles/jquery-customizable-layout-using-drag-and-drop/)

问题是，在他的文章的第 2 部分讨论了如何保存多个连接列表的自定义配置之后，他忽略了在第 3 部分中包含多个连接列表，在那里他将代码实现到实际设计中。我已经能够让我页面上的所有内容都像该页面上的最后一个示例一样工作，但是每当我尝试修改代码以使用连接列表时，页面不再工作。

我了解代码在做什么背后的基本思想，但我不了解 JavaScript，并且在修改代码以使用连接列表方面没有成功。我希望知道 JavaScript 的人能够像第 2 部分那样轻松修改下面的代码以使用连接列表。

第 2 部分保存了多个连接列表的顺序，但不加载具有相应名称的外部 html 页面。

第 3 部分加载具有相应项目名称的外部 html 页面，但仅支持单个列表。

**第 2 部分中的连接列表代码：**

```
// Load items
function loadItemsFromCookie(name)
{
    if ( $.cookie(name) != null )
    {
        renderItems($.cookie(name), '#wrapper');
    }
    else
    {
        alert('No items saved in "' + name + '".');
    }
}

// Render items
function renderItems(items, container)
{
    var html = '';
    var columns = items.split('|');

    for ( var c in columns )
    {
        html += '<div class="column"><ul class="sortable-list">';

        if ( columns[c] != '' )
        {
            var items = columns[c].split(',');

           for ( var i in items )
            {
               html += '<li id="' + items[i] + '">Item ' + items[i] + '</li>';
            }
        }

        html += '</ul></div>';
    }

    $('#' + container).html(html);
} 
```

**第 3 部分中不支持连接列表的代码（尝试修改此代码以支持连接列表）：**

```
// Get items
function getItems(id)
{
return $('#' + id + '-list').sortable('toArray').join(',');
}

// Render items
function renderItems(id, itemStr)
{
    var list = $('#' + id + '-list');
    var items = itemStr.split(',')

    for ( var i in items )
    {
        html = '<li class="sortable-item';

        if ( id == 'splash' )
        {
            html += ' col3 left';
        }
        html += '" id="' + items[i] + '"><div class="loader"></div></li>';
        list.append(html);

        // Load html file
        $('#' + items[i]).load('content/' + items[i] + '.html');
    }
} 
```

**更新#1：**

我想我几乎拥有它，我只是无法让它从外部 html 文件中插入 html。它能够让它插入变量和纯文本，而不是外部 html。

```
// Render items
    function renderItems(items)
    {
        var html = '';

        var columns = items.split('|');

        for ( var c in columns )
        {
            html += '<div class="column';

            if ( c == 0 )
            {
                html += ' first';
            }

            html += '"><ul class="sortable-list">';

            if ( columns[c] != '' )
            {
                var items = columns[c].split(',');

                for ( var i in items )
                {
                    html += '<li class="sortable-item" id="' + items[i] + '">';

                    //---------This Line Isn't Working--------->
                    $('#' + items[i]).load(items[i] + '.html');
                    //---------This Line Isn't Working--------->

                    html += '</li>';
                }
            }

            html += '</ul></div>';
        }

        $('#example-2-3').html(html);
    } 
```

**更新#2：**

我一直在查找示例中每个 JavaScript 命令的确切作用，我想我已经找到了问题所在。我不能只加载页面，我需要将外部页面中的代码附加到 html 变量中。我想我需要使用 .get 命令，例如：

```
var pagedata = '';
.get(items[i] + '.html', function(pagedata); 
html += pagedata; 
```

任何人都知道完成此操作的正确语法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T18:28:08.177

我终于让代码工作了。这是完整的代码（不包括 jquery-ui 相关代码）。外部页面需要与列表 id 命名相同。

**HTML**

```
 <div id="example-2-3">

                <div class="column first">

                    <ul class="sortable-list">
                        <li class="sortable-item" id="id1"></li>
                        <li class="sortable-item" id="id2"></li>
                        <li class="sortable-item" id="id3"></li>
                    </ul>

                </div>

                <div class="column">

                    <ul class="sortable-list">
                        <li class="sortable-item" id="id4"></li>
                    </ul>

                </div>

                <div class="column">

                    <ul class="sortable-list">
                        <li class="sortable-item" id="id5"></li>
                        <li class="sortable-item" id="id6"></li>
                    </ul>

                </div>

    </div> 
```

**脚本**

```
$(document).ready(function(){

    window.onload = loadItemsFromCookie('cookie-2');
    // Get items
    function getItems(exampleNr)
    {
        var columns = [];

        $(exampleNr + ' ul.sortable-list').each(function(){
            columns.push($(this).sortable('toArray').join(','));                
        });

        return columns.join('|');
    }

    // Load items from cookie
    function loadItemsFromCookie(name)
    {
        if ( $.cookie(name) != null )
        {
            renderItems($.cookie(name));
        }
        else 
        {
            alert('No items saved in "' + name + '".');
        }   
    }

    // Render items
    function renderItems(items)
    {
        var html = '';
        var pagedata = '';

        var columns = items.split('|');

        for ( var c in columns )
        {
            html += '<div class="column';

            if ( c == 0 )
            {
                html += ' first';
            }

            html += '"><ul class="sortable-list">';

            if ( columns[c] != '' )
            {
                var items = columns[c].split(',');

                for ( var i in items )
                {
                    html += '<li class="sortable-item" id="' + items[i] + '">';

                    var pagedata = '';
                    var scriptUrl = items[i] + ".html"
                    $.ajax({
                        url: scriptUrl,
                        type: 'get',
                        dataType: 'html',
                        async: false,
                        success: function(data) {
                            result = data;
                            html += data;
                        } 
                    });

                    html += '</li>';
                }
            }

            html += '</ul></div>';
        }

        $('#example-2-3').html(html);
    }

    $('#example-2-3 .sortable-list').sortable({
        connectWith: '#example-2-3 .sortable-list',
        update: function(){
            $.cookie('cookie-2', getItems('#example-2-3'));
        }
    });

});

</script> 
```

# ios - iOS将IP地址转换为整数和向后

> ID：13038610
> 
> 赞同：0
> 
> 时间：2012-10-23T20:22:07.870
> 
> 标签：ios, string

假设我有一个 NSString NSString *myIpAddress = @"192.168.1.1"

我想将其转换为整数 - 将其递增然后将其转换回 NSString。

除了使用位掩码、移位和 sprintf 之外，iOS 是否有一种简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T20:26:32.467

这样的事情是我在[我的应用程序](http://clkuk.tradedoubler.com/click?p=23708&a=1613651&url=http://itunes.apple.com/gb/app/subnet-calc-pro/id303555213?mt=8&uo=4&partnerId=2003)中所做的：

```
NSArray *ipExplode = [string componentsSeparatedByString:@"."];
int seg1 = [ipExplode[0] intValue];
int seg2 = [ipExplode[1] intValue];
int seg3 = [ipExplode[2] intValue];
int seg4 = [ipExplode[3] intValue];

uint32_t newIP = 0;
newIP |= (uint32_t)((seg1 & 0xFF) << 24);
newIP |= (uint32_t)((seg2 & 0xFF) << 16);
newIP |= (uint32_t)((seg3 & 0xFF) << 8);
newIP |= (uint32_t)((seg4 & 0xFF) << 0);

newIP++;
NSString *newIPStr = [NSString stringWithFormat:@"%u.%u.%u.%u", 
        ((newIP >> 24) & 0xFF), 
        ((newIP >> 16) & 0xFF), 
        ((newIP >> 8) & 0xFF), 
        ((newIP >> 0) & 0xFF)]; 
```

# perl - 在 Perl 中使用“printf”格式化输出

> ID：13038611
> 
> 赞同：2
> 
> 时间：2012-10-23T20:22:10.823
> 
> 标签：perl

我正在尝试格式化我的输出，使其看起来像在列中。我正在尝试使用[printf](http://perldoc.perl.org/functions/printf.html)函数。

这是我所拥有的：

```
printf("%s %10s %12s %10s\n", "Qty", "Desc.", "Unit \$", "Total");

for ($he = 0; $he <= 6; $he++) {
    if (@quantity[$he] != 0) {
        printf("%d %10s %12.2f %10.2f\n", @quantity[$he], @selections[$he], @prices[$he], @prices[$he] * @quantity[$he])
    }
} 
```

我试图让循环`if`语句中的第二个 printf`for`与“Qty”、“Desc.”、“Unit \$”和“Total”对齐。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T20:26:28.190

您需要在两种格式中使用相同的数字：

```
printf("%3s %10s %15s %13s\n", "Qty", "Desc.", "Unit \$", "Total"); 
```

和

```
printf("%3d %10s %12.2f %10.2f\n", @quantity[$he], @selections[$he], @prices[$he], @prices[$he]*@quantity[$he]) 
```

注意 12.2 的意思是（12 位 + 1 点 + 2 位），这就是我在第一种格式中写 15 的原因。13号也是一样。

* * *

另请注意，您正在错误地访问数组元素。

而不是`@quantity[$he]`使用`$quantity[$he]`. 也就是说，将 替换`@`为`$`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T00:22:07.943

很久以前，Perl 主要用于格式化文件。尽管自 Perl 4.x 出现以来我还没有看到它在程序中使用过，但它仍然具有这些功能。

查看[perlform](http://perldoc.perl.org/perlform.html)文档、[format](http://perldoc.perl.org/functions/format.html)函数和[write](http://perldoc.perl.org/functions/write.html)函数。

我会给你一个关于代码是什么样子的例子，除非我已经多年没有这样做了。否则，使用该`printf`语句。您可以使用一种格式来限制文本字段的大小`%-10.10s`。这表示左对齐字符串，并将其填充到 10 个字符，但不超过 10 个字符。

我还建议你买一本关于***现代***Perl 的书。一个会教你[参考](http://perldoc.perl.org/perlreftut.html)的。

我已经重写了您的程序以使用引用。请注意，所有数据现在都在一个数组中，而不是分布在您希望将索引保持在一起的四个单独的数组中。

我可以通过说来谈论*主菜*。它更易于阅读和维护。`$item[1]``$item[1]->{ENTREE}`

另请注意，我已经更改了您的`for`循环。在你的，你必须知道你有七个项目。如果您添加了新项目，则必须更改循环。在我的，我`$#menu`用来获取我的菜单的最后一个索引。然后我使用`(0..$#menu)`自动从 0 循环到`@menu`数组中的最后一项。

而且，当你在它的时候：

*   注意`printf`语句格式。
*   注意 和 的`use strict;`使用`use warnings;`。这将捕获很多错误。
*   请注意我使用括号和花括号标记代码块的首选方式。这是首选方法。

而且，现在的程序：

```
use strict;
use warnings;

my @menu = (
    { ENTREE => "Hamburger",    PRICE => 3.49, QUANTITY => 3 },
    { ENTREE => "Frankfurter",  PRICE => 2.19, QUANTITY => 0 },
    { ENTREE => "French Fries", PRICE => 1.69, QUANTITY => 0 },
    { ENTREE => "Large Coke",   PRICE => 1.79, QUANTITY => 4 },
    { ENTREE => "Medium Coke",  PRICE => 1.59, QUANTITY => 0 },
    { ENTREE => "Small Coke",   PRICE => 1.39, QUANTITY => 0 },
    { ENTREE => "Onion Rings",  PRICE => 1.19, QUANTITY => 8 },
);

printf "%-3.3s %-10.10s %-6.6s %s\n\n", 'Qty', 'Desc.', 'Unit $', 'Total';

# Use $#menu to get the number of items in the array instead of knowing it's 6

foreach my $item (0..$#menu) {

    # Dereference $menu[$item] to make $menu_item a hash
    # This makes the syntax easier to read.
    my %menu_item = %{ $menu[$item] };

    if ( $menu_item{QUANTITY} ) {
        printf "%3d %-10.10s %9.2f %7.2f\n",
        $menu_item{QUANTITY}, $menu_item{ENTREE}, $menu_item{PRICE},
        $menu_item{QUANTITY} * $menu_item{PRICE};
    }
} 
```

输出：

```
Qty Desc.      Unit $ Total

  3 Hamburger  3.49   10.47
  4 Large Coke 1.79    7.16
  8 Onion Ring 1.19    9.52 
```

# php - Left Join PHP/SQL with LIKE and logical AND

> ID：13038613
> 
> 赞同：1
> 
> 时间：2012-10-23T20:22:16.643
> 
> 标签：php, mysql

我有以下 Mysql 查询，我试图运行左连接来定义带有图像表的页面表。

```
$query = mysql_query("SELECT * FROM pages
                    WHERE `fname` LIKE '%$fname%' AND `lname` LIKE '%$lname%' AND `city` LIKE '%$citysearch%' AND `state` LIKE '%$statesearch%' AND `activities` LIKE '%$locationsearch%' AND `startyr` LIKE '%$startyearsearch%' AND `endyr` LIKE '%$endyearsearch%'
                     LEFT JOIN `images.pgname` WHERE `pages.pgname` = 'images.pgname' LIMIT $start, $perpage
                "); 
```

我得到“警告：mysql_fetch_assoc() 期望参数 1 是资源，第 72 行给出的布尔值”

我想要做的是将页面表与图像表连接起来。pages 表有以下字段：fname、lname、city、state、activity、startyr、endyr、pgname

并且 images 表有以下字段：pgname, id, imageUrl, username

我想要做的是返回 pages.pgname 等于 images.pgname 的所有图像，并使用 imageUrl 返回图像的 URL。

欢迎任何和所有帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T20:26:57.050

看起来您正在尝试加入“images.pgname”列？您只能连接完整的表。此外，JOIN 必须在 WHERE 子句之前。

现在，让我们解读一下这个过程：如果您需要从多个表中选择值，您首先列出您想要选择的所有值。在这种情况下，即 a) 来自页面 ( `pages.*`) 的所有列和 b) 来自图像 ( ) 的 imageUrl `images.imageUrl`：

```
SELECT pages.*, images.imageUrl 
```

然后像往常一样指定要从中选择的表：

```
FROM pages 
```

然后你做连接。左连接意味着，数据库将*尝试*在另一个表（图像）中找到相应的行。该行不一定实际存在。但是，您可以通过指定表和定义连接的条件来执行连接：

```
LEFT JOIN images ON pages.pgname = images.pgname 
```

其余的保持不变：

```
WHERE pages.fname LIKE '%$fname%' AND pages.lname LIKE '%$lname%' AND pages.city LIKE '%$citysearch%' AND pages.state LIKE '%$statesearch%' AND pages.activities LIKE '%$locationsearch%' AND pages.startyr LIKE '%$startyearsearch%' AND pages.endyr LIKE '%$endyearsearch%'
LIMIT $start, $perpage 
```

* * *

但是，如果每页有多个图像，则需要以相反的方式加入：

```
SELECT pages.*, images.imageUrl
FROM images
JOIN pages ON pages.pgname = images.pgname
WHERE ... 
```

# int - 无法使用内存搜索程序找到给定值

> ID：13038614
> 
> 赞同：0
> 
> 时间：2012-10-23T20:22:16.710
> 
> 标签：int

我意识到 Stackoverflow 主要只处理代码，但这是一个特例。

我有一个简单的程序：

```
int main()
{
...
int a = SOME_HIGH_NUMBER;
...
} 
```

然后我使用 IDA PRO 和 Cheat Engine 等程序搜索值 (SOME_HIGH_NUMBER)，但从未找到。因为它是一个 int，所以我搜索 4 个字节。即使我搜索 2 个字节等，也永远找不到该特定值。是的，即使我点击“全部”选项卡，如搜索所有数据类型、数据大小等。

在过去的 10 年中，计算机的工作方式是否发生了重大升级，这使得在程序中搜索整数变得更加困难？几年前我使用过这类程序（内存搜索器），我总是能找到给定的整数。

请注意，即使我在全局范围内（在任何函数之外）声明我的 int ，它仍然找不到。一个解释，无论是否简短，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T20:26:45.130

这可能很明显，但是：您是否考虑了字节顺序？

我提到这一点是因为您说`SOME_HIGH_NUMBER`，并且找到两字节 int 的程序可能需要非直观输入来获取两字节 int。

# jsf - 绑定会杀死支持豆……我做错了什么？

> ID：13038615
> 
> 赞同：1
> 
> 时间：2012-10-23T20:22:19.330
> 
> 标签：jsf, jakarta-ee, primefaces

我有以下页面：

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:p="http://primefaces.org/ui"
  xmlns:h="http://java.sun.com/jsf/html">

<body>

    <ui:composition template="./templates/fireLeftMenuTemplate.xhtml">

        <ui:define name="left">
            <h:form>
                <p:menu model="#{gradingBean.courseMenu}"/>
            </h:form>
        </ui:define>

        <ui:define name="content">
            <h:form>
                <p:accordionPanel binding="#{gradingBean.assignmentView}"/>         
            </h:form>
        </ui:define>

    </ui:composition>

</body> 
```

分级豆：

```
@Named("gradingBean")
@ViewScoped
public class GradingBean {

@EJB
private AssignmentManager assignmentManager;

/*
 * The assignmentMenu, listing all assignments for each course currently
 * assisted by this grader
 */
private final DefaultMenuModel courseView = new DefaultMenuModel();
private final AccordionPanel assignmentView = new AccordionPanel();

public GradingBean() {
    FireLogger.logInfo("Created GradingBean for user {0}", FireUtil.getLoggedinUserEmail());
}

@PostConstruct
private void constructBean() {
    constructAssignmentView();
    constructCourseMenu();
    FireLogger.logInfo("Constructed bean");
}

private void constructAssignmentView() {

    Tab tab = new Tab();
    tab.setTitle("Hello");

    assignmentView.getChildren().add(tab);
    assignmentView.setRendered(true);

    FireLogger.logInfo("Constructed assignmentView");
}

private void constructCourseMenu() {

    /*
     * For now we default to just one course at a time, since we have not
     * implemented support for multiple courses as of yet.
     */
    Submenu defaultCourse = new Submenu();
    defaultCourse.setLabel("Objekt Orienterad Programmering IT");

    /*
     * add each assignment associated with this course
     */
    ExpressionFactory expressionFactory =
            FacesContext.getCurrentInstance()
            .getApplication()
            .getExpressionFactory();

    for (Assignment assignment : assignmentManager.getAll()) {

        MenuItem menuItem = new MenuItem();
        menuItem.setValue(assignment.getTitle());

        MethodExpression expression = expressionFactory.createMethodExpression(
                FacesContext.getCurrentInstance().getELContext(), "#{gradingBean.printstuff('yay!')}", String.class, new Class[0]);

        menuItem.setActionExpression(expression);
        defaultCourse.getChildren().add(menuItem);
    }
    courseView.addSubmenu(defaultCourse);

    FireLogger.logInfo("Constructed courseMenu");
}

public String printstuff(String stuff) {
    FireLogger.logInfo("Printing! " + stuff);
    return "hej";
}

public DefaultMenuModel getCourseMenu() {
    return courseView;
}

public AssignmentManager getAssignmentManager() {
    return assignmentManager;
}

public DefaultMenuModel getCourseView() {
    return courseView;
}

public AccordionPanel getAssignmentView() {
    return assignmentView;
}

public void setAssignmentManager(AssignmentManager assignmentManager) {
    this.assignmentManager = assignmentManager;
}

/**
 * Custom menuitem for the purpose of storing associated assignments and
 * information related to them.
 */
private class AssignmentMenuItem extends MenuItem {

    private static final long serialVersionUID = 1L;
    private Assignment assignment;

    public AssignmentMenuItem(Assignment assignment) {
        super();
        this.assignment = assignment;
        setValue(assignment.getTitle());
    }

    /**
     * Convenience method
     *
     * @param component
     */
    public void addChild(UIComponent component) {
        getChildren().add(component);
    }
}
} 
```

请不要介意代码质量，它是用于调试的。问题是这样的：每当我在 xhtml 页面上启用accordionPanel 标记时，与该页面关联的所有其他 bean 都会停止工作：例如，单击 courseView 菜单上的任何菜单项（在没有手风琴的情况下确实可以正常工作） ，除了重新加载页面什么都不做。所有其他 bean 操作绑定（包括在标头中生成的绑定）也是如此。

我在这里想念什么？如上所述，一旦我删除了手风琴面板标签，它就可以正常工作。我猜这与请求周期有关，但我不知道出了什么问题。

编辑：

按下菜单项（哪个无关紧要）的记录输出 2 次：

```
INFO: se.gu.fire.backend.GradingBean: Created GradingBean for user a@a.com
INFO: se.gu.fire.backend.GradingBean: Constructed assignmentView
INFO: se.gu.fire.backend.GradingBean: Constructed courseMenu
INFO: se.gu.fire.backend.GradingBean: Constructed bean

INFO: se.gu.fire.backend.GradingBean: Created GradingBean for user a@a.com
INFO: se.gu.fire.backend.GradingBean: Constructed assignmentView
INFO: se.gu.fire.backend.GradingBean: Constructed courseMenu
INFO: se.gu.fire.backend.GradingBean: Constructed bean 
```

注意循环似乎是如何被重置的，并且每当发生这种情况时 bean 都会重新加载......这也发生在此页面上与其他 bean 的所有其他绑定上。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T21:45:45.480

到目前为止发布的代码并未表明这一点（使用`@Named` `@ViewScoped`没有意义），但如果在`binding`完全值得的 JSF 视图范围托管 bean 的属性上使用该属性（带有`@ManagedBean` `@ViewScoped`），则症状是可以识别的。

该`binding`属性（如`id`属性和所有标记处理程序）在视图构建期间进行评估。默认情况下，视图（启用部分状态保存）构建在每个 HTTP 请求上。构建视图后，视图范围就可以使用了。视图范围的托管 bean 存储在那里。

但是，默认情况下，视图范围*在*视图构建期间不可用。这意味着在构建视图期间评估的任何引用视图范围 bean 的 EL 表达式都将创建一个全新且完全独立的视图范围 bean 实例，所有属性都设置为默认值。然后将其重用。

这个鸡蛋问题可以通过仅在请求范围的 bean 上使用属性来解决，或者通过将context 参数`binding`设置为关闭部分状态保存来解决。这已被报告为[JSF 问题 1492](http://java.net/jira/browse/JAVASERVERFACES-1492)，并在即将发布的 JSF 2.2 中得到修复。`web.xml``javax.faces.PARTIAL_STATE_SAVING``false`

### 也可以看看：

*   [即使已经实例化了 ManagedBean（例如在 AJAX 调用上），也会调用 @PostConstruct 方法](https://stackoverflow.com/questions/8804317/postconstruct-method-is-called-even-if-the-managedbean-has-already-been-instant/8804588#8804588)
*   [JSF2 Facelets 中的 JSTL...有意义吗？](https://stackoverflow.com/questions/3342984/jstl-in-jsf2-facelets-makes-sense)

# iphone - iOS 6 - 我可以在展开 segue 时返回数据吗？

> ID：13038622
> 
> 赞同：25
> 
> 时间：2012-10-23T20:22:34.447
> 
> 标签：iphone, objective-c, ios, xcode, segue

我使用情节提要工具创建了一个简单的展开转场。我在要展开的视图中创建了以下事件处理程序：

```
-(IBAction)quitQuiz:(UIStoryboardSegue *)segue {
    NSLog(@"SEGUE unwind");
} 
```

这会正确触发并展开 segue（消息被记录）。

当用户退出测验时，我想传回一些数据，并且一直在努力解决如何实现这一点。任何人都可以建议吗？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-10-28T09:21:00.933

谢谢杰夫。观看**WWDC 视频 407**后，我有一个明确的解决方案。

在作为展开目标的视图控制器中，您应该创建一个采用单个 UIStoryboardSegue 参数并返回 IBAction 的方法。UIStoryboardSegue 有一个返回源视图控制器的方法！这是取自视频的示例（感谢 Apple）。

```
- (IBAction)done:(UIStoryboardSegue *)segue {
    ConfirmationViewController *cc = [segue sourceViewController];
    [self setAccountInfo:[cc accountInfo]];
    [self setShowingSuccessView:YES];
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-26T15:50:57.153

[在演示文稿](https://developer.apple.com/videos/wwdc/2012/?id=407)的后半部分（编辑：从 37:20 开始）中很好地解释了从展开的 segue 中获取数据

特别是，在展开 segue 中，[segue sourceViewController] 是仍处于活动状态的视图控制器，展开事件源自该控制器，因此只需像往常一样访问您的属性。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-31T11:31:45.053

在正在关闭的控制器中添加函数 prepareForSeque。

-(void) **prepareForSegue** :(UIStoryboardSegue *)segue sender:(id) **sender**

*在调用unwind segue****之前***调用此函数（在您的示例中，您将其称为 quitQuiz）。如您所见，它还有一个**sender**参数，以便您可以找出谁调用了 unwind 并相应地收集相关数据。

 ***例如 WWDC 407 视频，如果单击重置按钮，则*不会*设置 accountInfo，如果单击完成按钮，则会设置。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-02T12:36:43.440

**是**的，
为此，您需要创建属性，其中包含要从另一个视图控制器发送的数据：

```
 - (IBAction)unwindSelectFriendsVC:(UIStoryboardSegue *)segue
    {
        if ([segue.sourceViewController isKindOfClass:[ChildVC class]]) {

            ChildVC *child = (ChildVC *) segue.sourceViewController;

            //here we are passing array of selected friends by arrSelectedFriends property
            self.arrFriendList = child.arrSelectedFriends;
            [self.tableView reloadData];
        }
    } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-23T20:32:31.020

设置一个委托并通知您的源视图控制器退出测验并发回数据。不要忘记将源视图控制器设置为目标视图控制器的委托。

```
// DestinationViewController.h
@protocol DestingationDelegate;
@interface 
...
@property (assign) id<DestinationDelegate> delegate;
...
@end

@protocol DestinationDelegate
-(void)didQuitQuiz:(NSDictionary*)infoDict;
@end

// DestinationViewController.m
-(IBAction)quitQuiz:(UIStoryboardSegue *)segue {
  NSLog(@"SEGUE unwind");
  if (self.delegate) [self.delegate didQuitQuiz:infoDict];
}

// SourceViewController.h
#import DestinationViewController.h
@interface SourceViewController : ViewController <DestinationDelegate>
....

// SourceViewController.m
-(void)didQuitQuiz:(NSDictionary *)infoDict {
    if (infoDict) {
       // do something with the data
    }
}

-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
   ...
   destinationViewController.delegate = self;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-23T20:31:03.447

在视图控制器之间传递数据通常使用协议来完成。这是一个例子：

在您的测验视图控制器标题中，声明一个类似的协议定义：

```
@protocol JBQuizViewControllerDelegate <NSObject>

@required
- (void)quizController:(id)controller didQuitWithState:(NSString *)state;

@end 
```

在呈现视图控制器的`prepareForSeque:`方法中，连接委托：

```
JBQuizViewController *destination = (JBQuizViewController *)segue.destinationViewController;
destination.delegate = self; 
```

然后，在您的呈现视图控制器中，处理委托协议的`quizController:didQuitWithState:`方法。

最后，一旦用户退出您的测验，您应该使用协议通知委托人，传递状态或您想要公开的任何数据。***

# c# - 使用 json.net/webapi 在 C# 中反序列化仅获取属性

> ID：13038623
> 
> 赞同：3
> 
> 时间：2012-10-23T20:22:37.773
> 
> 标签：c#, asp.net-mvc-4, asp.net-web-api, json.net

> **可能重复：**
> [使用 Json.net - ac# 对象的部分自定义序列化](https://stackoverflow.com/questions/5404303/using-json-net-partial-custom-serialization-of-a-c-sharp-object)

我有一个类，当使用 asp.net MVC 4 WebAPI 时，我成功地在 json.net 中序列化。该类有一个属性，它是一个字符串列表。

```
public class FruitBasket {
    [DataMember]
    public List<string> FruitList { get; set; }

    public int FruitCount {
        get {
            return FruitList.Count();
        }
    }
} 
```

在我的 Get 方法中，序列化正常，我得到一个空数组，即 JSON 中 FruitList 属性的 []。如果我在 PUT 请求的正文中使用相同的 json，我会在反序列化期间在 FruitCount 属性中收到错误，因为 FruitList 为空。

我希望 FruitList 属性（基本上是我的 get only 属性）序列化但不反序列化。json.net 是否可以通过设置或其他方式进行设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T20:55:09.203

我意识到这并不能回答您的问题，但可以解决正在生成的错误，因此可能会使担心自定义序列化无关紧要

为 FruitList 使用私有变量，在 get 和 set 中返回它，如果值为 null，则将私有变量设置为等于新列表。

```
public class FruitBasket
{
    private List<string> _fruitList;

    [DataMember]
    public List<string> FruitList
    {
        get
        {
            return _fruitList;
        }
        set
        {
            if (value == null)
            {
                _fruitList = new List<string>();
            }
            else
            {
                _fruitList = value;
            }
        }
    }

    public int FruitCount
    {
        get
        {
            return FruitList.Count();
        }
    }
} 
```

# unix - 尾随数字对 awk 脚本的正文有什么影响？

> ID：13038625
> 
> 赞同：5
> 
> 时间：2012-10-23T20:22:39.517
> 
> 标签：unix, text, awk

我有一个简单的 awk one 划线器，当匹配给定模式时，它会将下一行折叠到当前行上。这里是：

```
awk '/two/ { printf $1; next; } 1' test.txt 
```

使用以下输入：

```
one
two
three
four
five
six

one
two
three 
four 
```

你得到：

```
one
twothree
four
five
six

one
twothree 
four 
```

请注意，“三”与“二”折叠在一起，这是我想要发生的。我找到了这个解决方案（不记得在哪里），并且奇怪的是尾随的“1”似乎是导致预期效果的缺失部分。如果你把它拿出来，你会得到：

```
awk '/two/ { printf $1; next; }' test.txt 
twotwo 
```

作为结果。所以我的问题是，尾随的“1”是做什么的，它记录在哪里？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T20:28:34.877

对于`awk`, 1 表示为真，当表达式为真时，`awk`默认打印当前行。

例子 ：

*   `awk '1' /etc/passwd`将打印整个文件
*   `awk '0' /etc/passwd`不会**打印**整个文件

如果你擅长算术（或者你有想象力或编程技能），你可以用这种行为做很多技巧。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T20:28:38.937

“整个 Awk 单行代码末尾的 '1' 打印出修改后的行（它只是“print”的语法糖（它本身就是“print $0”的语法糖））”。

--[纸垫](http://www.catonmat.net/blog/update-on-famous-awk-one-liners-explained/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T20:51:42.820

你得到了你的具体问题的答案，但你发布的脚本是不安全的。printf 的第一个参数是格式字符串，而不是数据。您有时可以使用它来打印数据，但只有在脚本中硬编码时才能使用它，而不是从输入中读取数据时。看看如果您的输入恰好包含 printf 格式字符串会发生什么：

```
$ cat file
one
two%s
three
four

$ awk '/two/ { printf $1; next; } 1' file
one
awk: cmd. line:1: (FILENAME=file2 FNR=2) fatal: not enough arguments to satisfy format string
        `two%s'
            ^ ran out for this one 
```

编写脚本的正确方法是：

```
$ awk '/two/ { printf "%s",$1; next; } 1' file
one
two%sthree
four 
```

# c# - ASP.NET WebForms 自定义用户控件 - base.SaveViewState() 返回 null - 为什么？

> ID：13038627
> 
> 赞同：5
> 
> 时间：2012-10-23T20:22:44.893
> 
> 标签：c#, asp.net, user-controls, webforms, viewstate

我有一个自定义的用户控件，我正在使用它的主机动态创建控件，我遇到了一个奇怪的情况，我似乎丢失了 ViewState 信息。在 base.SaveViewState() 调用上重写的 SaveViewState 方法中，我希望它返回一个包含 ViewState 中所有内容的对象，但它返回的是 null。

```
protected override object SaveViewState()
{

    object[] tempState = new object[2];
    tempState[0] = base.SaveViewState(); //***suspected issue here, tempState[0] == null -- why?
    //? this.ViewState["CompanyID"] returns me the guid I'm expecting
    //... code instantiating and populating lstDataControlInfos
    tempState[1] = lstDataControlInfos;
    return tempState;
} 
```

我在该方法中设置了一个断点，我可以使用即时窗口查询 ViewState["CompanyID"] 并验证 ViewState 中确实存储了一个 CompanyID。也许我对 ViewState 有误解，但该调用不应该返回 ViewState 中已经存在的内容（包括我的 CompanyID）吗？这个问题在被覆盖的 LoadViewState 方法中成为回发问题，因为我不再有任何方法可以从 ViewState 中获取 CompanyID；它返回为空。

```
protected override void LoadViewState(object savedState)
{
    object[] tempState = (object[])savedState;
    //tempState[0] == null, as it was stored in the previous SaveViewState call
    //any reference to ViewState["CompanyID"] comes back null
    base.LoadViewState(tempState[0]);
} 
```

我提到我有动态控件，我在这个控件中序列化和反序列化 ViewState，这些似乎都工作正常。当我知道一个事实并且可以验证（通过即时窗口）在 SaveViewState 调用期间 ViewState 中有数据时，什么会导致 base.SaveViewState() 返回 null？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T20:31:05.430

将值保存到 ViewState 时，如果正在跟踪 ViewState，则该值被标记为脏。

跟踪从 TrackViewState 开始，它在 Initialize 之后和 Load 之前。

跟踪在 PreRender 之后的 SaveViewState 中结束。

如果在 ViewState 中设置值时未跟踪 ViewState，则在调用 SaveViewState 时不会保留它。这是一件好事：这意味着您可以在 Init 阶段使用 ViewState 而不会使序列化的 ViewState 膨胀。

当您将控件动态添加到树中时，您应该注意：

*   在将控件添加到控件树*之前*设置的值*不会*保留，即使在跟踪 ViewState 时添加控件也是如此。

*   如果您处于跟踪 ViewState 的阶段，则在将控件添加到控件树*后*设置的值*将保持不变。*

您在页面生命周期的哪个时间点设置 ViewState["CompanyID"]，您是在将控件添加到控件树之前还是之后这样做？

# abap - ABAP Objects - 访问消息类的类？

> ID：13038629
> 
> 赞同：3
> 
> 时间：2012-10-23T20:22:56.750
> 
> 标签：abap

在 ABAP Objects 类的标头信息中，我可以输入一个消息类以与`MESSAGE`语句一起使用。这就像`MESSAGE-ID`报表或函数池的语句。由于在生成的部分的任何地方都找不到我在标题数据中输入的消息类，我假设它是在某处生成到顶级[`CLASS-POOL`](http://help.sap.com/abapdocu_70/en/ABAPCLASS-POOL.htm)语句中的。

对于某些库（例如，BAL 应用程序日志记录），有必要使用变量或方法参数指定消息类。到目前为止，我已经定义了一个常量来指定消息类并使用该常量。我想知道是否可以以其他方式访问标头数据中指定的消息类，以便我可以摆脱那个冗余变量。

有没有人找到这样做的方法？

**编辑：**新方法应该比旧方法更容易 - 我还没有疯狂到添加一个`CLASS-CONSTRUCTOR`并执行一些数据库访问或`SEO_*`函数调用只是为了摆脱那个常量。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T09:15:23.693

我认为您需要`CLASS-CONSTRUCTOR`使用消息类设置类属性。

`MESSAGE`带有子句的语句具有设置系统变量`INTO`的副作用。`SY-`所以你可以把你的`CLASS-CONSTRUCTOR`东西像：

```
DATA: lf_dummy TYPE string.
MESSAGE s999 INTO lf_dummy.
af_msgid = sy-msgid. 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-26T18:11:19.520

我没有遇到任何语法来做你要求的事情。由于我在下面概述的原因，我可以相信 SAP 从来没有看到需要包含这样的功能。

根据我的经验，消息类是消息的属性，而不是引发它的对象的属性，因此它应该与消息的类型、编号和变量一起保存。例如，如果我的对象返回错误的编号，它也应该返回 id（类）。

从这个角度来看，我看不出为什么您需要知道分配给 ABAP-OO 类的消息类的原因，您只需要知道 ABAP-OO 类返回的消息的消息类。

我通常管理这个的方法是将我的消息提升到一个虚拟字段中，然后使用子例程将`sy-msg*`字段的内容填充到一个`BAPIRETURN`结构中。然后我将此`BAPIRETURN`结构返回给调用者。这样，消息的类型、id、编号和变量都保持在一起。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-28T19:37:54.123

您可以使用类构建器 API：

```
data the_class type ref to cl_oo_class.
create object the_class
  exporting
    clsname = `ZCL_SOMECLASS`.
data message_class type arbgb.
message_class = the_class->class-msg_id. 
```

# java - Java文件是系统独立的吗？

> ID：13038630
> 
> 赞同：0
> 
> 时间：2012-10-23T20:23:03.370
> 
> 标签：java

过去很多人都说Java是一种独立于系统的编程语言；可以使用适当的 OS JVM 在任何 OS 中运行（拦截）相同的 .class 文件。我的问题 - .java 文件本身也是系统独立的吗？即是在一个操作系统中编写（并且可以正确编译）的 .java 文件，可以在另一个操作系统中正确编译吗？如果没有，你有什么例子可以证明这一点吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T20:25:25.897

只要`.java`文件遵循 API 语法和正确的版本，它就可以在任何操作系统上编译，而不管它是在哪里编码的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T20:26:37.223

简短的回答，是的。长答案，yeeeeeeesss。

正如您对问题的评论所指出的，一个例外`jedwards`包括 Android，因为 Android SDK 中可用的库与 Sun 分发的 JDK 不同。这更像是 JVM 特定的区别，但由于 Android 在技术上是一个操作系统，所以它很重要。这也可以扩展到 Java ME 和 Java EE，但这仍然更多地依赖于 JDK/库，而不是依赖于操作系统。

另一个例外可能是您使用专有包下的类，例如`sun.*`or`com.sun.*`包中的类。然后它将依赖于*JVM*，但只要您使用正确版本的 Sun JVM，它仍然不会依赖于操作系统。

所以真的，严格来说，只要您使用的 JDK 版本可用于您的操作系统，并且您使用的任何本机库（想想 JNI）可用于您的操作系统，.java 文件就可以毫无问题地编译你的操作系统。现在它是否运行完全是另一个问题。

旁注：我们在上一份工作中同时使用 Mac OS X 10.4+、Ubuntu 8.04+ 和 Windows XP/Server 2003+ 进行软件开发，除了偶尔无法*运行*之外，它从未引起任何问题，但从来没有任何编译问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T20:27:32.230

the java compiler is ported to mac/win/linux and will generate a valid and *maybe* equal binary - cause it can have timestamps inside. and the .class format is universal so that any VM port will be able to read them correctly

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T20:30:38.970

答案取决于：

如果您犯了错误，源代码不是系统独立的。

一个例子：

您使用系统相关的字符编码编写 Sourcefile。如果将该文件传输到不存在该字符编码的另一个系统，则您的文件可能无法编译。这更像是一个编译器问题。

另一个例子：

如果您有一个带有系统依赖插件的定制 JVM，那么使用这些类的程序在其他系统上可能会变得不可用。这更像是一个类问题。

如果您使用正确的编码并且不导入 com.sun.* 或 com.apple.* 等平台依赖包，则 *.java 和 *.class 是独立的。

# csv - 如何使用 Super CSV 部分读取 CSV 文件

> ID：13038635
> 
> 赞同：3
> 
> 时间：2012-10-23T20:23:13.353
> 
> 标签：csv, supercsv

我有一个包含 24 列的 csv 文件。其中我只想阅读 3 列。我看到超级 CSV 是一个非常强大的库，但我不知道如何部分读取 CSV。[部分阅读](http://supercsv.sourceforge.net/examples_partial_reading.html)的链接已损坏。

请帮我提供一个工作示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T22:08:45.133

**更新：** SourceForge 重新上线！Super CSV 网站现在应该可以工作了：）

这是正确的链接，但是 SourceForge 项目网站现在已经关闭（根据[SourceForge 博客](https://sourceforge.net/blog/)）：

> 从今天 12:59 UTC 开始，我们经历了一次站点中断，导致整个站点出现一般连接问题。世界标准时间 15:12 时，站点连接已恢复，包括下载在内的大多数服务现已重新上线。但是，在我们继续诊断并确定此问题的根本原因时，一些服务处于脱机状态。仍然离线的服务是：
> 
> 项目网站（即 projectname.sourceforge.net 页面）和相关的外壳和数据库服务。这还包括通过 ssh 访问 sftp、scp 和 rsync。

所以你有几个选择：

*   在 SourceForge 上查看阅读示例的[源代码](https://sourceforge.net/p/supercsv/code/255/tree/trunk/super-csv/src/test/java/org/supercsv/example/Reading.java#l164)（这部分 SF 仍在工作）。左上角有一个下载文件的链接。

*   从 subversion 中查看项目源代码（您可以查看/运行上面列出的阅读示例以了解它是如何工作的，或者您甚至可以运行`mvn site:site`以在本地生成项目网站

*   查看来自 Google的[缓存页面](http://webcache.googleusercontent.com/search?q=cache%3aAQEq6jpg5dsJ%3asupercsv.sourceforge.net/examples_partial_reading.html+&cd=1&hl=en&ct=clnk)

我希望您喜欢使用 Super CSV - 如果您有任何其他问题，请随时在 SO 上或在SourceForge上的[项目帮助论坛上发布它们。](https://sourceforge.net/p/supercsv/discussion/718795/)

# jquery - 删除/切换 div

> ID：13038637
> 
> 赞同：-1
> 
> 时间：2012-10-23T20:23:19.830
> 
> 标签：jquery

如何通过单击删除 div，但隐藏或显示 ID 中具有名称或年龄的任何 div。

一个复选框应切换 ID 开头带有“name”的任何 div，另一个复选框应切换 ID 开头带有“age”的所有 div

```
<div id="container">
  <div id="name-254"></div>
  <div id="age-645"></div>
  <div id="name-142"></div>
  <div id="name-341"></div>
  <div id="age-341"></div>
  <div id="name-341"></div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T20:33:30.943

为了使`div`元素在您单击它们时自毁，您可以执行以下操作：

```
// Inside the #container, when somebody clicks a div
$("#container").on("click", "div", function(){
   // Remove that div
   $(this).remove(); 
});​​​​​ 
```

至于切换每组可见性的复选框：

```
// When somebody clicks on a checkbox
$(":checkbox").on("click", function(){
    // Reference for the checkbox, its name, and checked property (true|false)
    var chbx = $(this),
        name = chbx.attr("name"), 
        show = chbx.prop("checked");

    // Find elements whose id begins with the checkbox name
    // and set their toggle to true or false
    $("[id^=" + name + "]").toggle( show );
}); 
```

在这里查看它的实际效果：http: [//jsfiddle.net/6GBpW/3/](http://jsfiddle.net/6GBpW/3/)

# javascript - JSON 的可扩展性

> ID：13038640
> 
> 赞同：0
> 
> 时间：2012-10-23T20:23:27.880
> 
> 标签：javascript, json

1.  读取/解析 JSON 对象（例如通过`<script>`DOM 节点，例如 JSONP）是否是（大多数）浏览器的同步阻塞操作？

2.  在什么情况下，JSON 对象太大而无法对对象进行客户端操作（例如锁定浏览器、脚本运行速度太慢等）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T20:48:37.723

是的，解析 JSON 字符串是一个阻塞操作。（请注意，如果您正在使用来自 Web 服务的 JSONP，那么您不必明确地将字符串解析为 JS）。

您必须有一个*非常*大的 JSON 字符串才能成为现代浏览器的问题。如果您发现某个操作确实锁定了浏览器，您可以通过 web worker 避免这种情况，这允许阻塞操作在单独的线程中完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T20:33:30.857

1) 是的，解析 JSON 是阻塞的。非阻塞操作的标志是像这样传递回调：

```
$.get('/stuff/1', function (data) {
    // do stuff with `data`
}); 
```

而块操作通常是这样编写的

```
var stuff = JSON.parse(theData); 
```

如果`JSON.parse`是非阻塞的，它看起来像这样：

```
JSON.parse(theData, function (stuff) {
    // process `stuff`
}); 
```

解析 JSON 是一个非常快速的操作，因此它不需要是非阻塞的。

2）真的很大。解析 JSON，尤其是在具有本机`JSON.parse`方法的浏览器（几乎所有）中非常快。JSON 是一种简单的格式，因此可以快速解析。

# concurrency - 使用相同的 WebSocket 将消息推送到客户端

> ID：13038641
> 
> 赞同：0
> 
> 时间：2012-10-23T20:23:27.640
> 
> 标签：concurrency, websocket

我从 WebSockets 开始，我已经构建了一个聊天 web 应用程序作为练习，它是这样的：每个用户在到达聊天室时都有一个打开的 websocket 连接，当有新消息可用时，他们'重新简单地推送给每个用户。然后使用 javaScript 显示不同的消息。

现在，我试图通过创建一对一的聊天来进一步推动练习。基本上，将不再有一个独特的聊天室，而是私人聊天对话。用户应该能够从同一页面与不同的人交谈。（例如 Google 聊天或 Facebook 聊天）。在考虑了这样做的方法之后，我得出了两个解决方案：

*   打开多个 websocket 连接。（如果可能的话）
*   使用相同的连接来处理所有打开的对话。基本上，推送到客户端的每条消息都会带有一个字段，说明它属于哪个会话，然后一个 JavaScript 将处理正确会话下每条消息的显示。

对我来说，第二种解决方案似乎比第一种更好。所以，我的问题是：

```
1- Will this solution have any performance problems? (Lost messages...)
2- Is there any other-better way of doing this? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T07:05:10.747

要走的路取决于（恕我直言）您使用什么框架来进行此通信。我（和你一样）会选择多路复用（第二种选择），你使用一个连接来处理所有通信。

我假设您选择的框架支持发布/订阅和多路复用？

如果你愿意，我可以为你提供一个简单的例子。

问候 Uffe，XSockets 团队

# mysql - 用于搜索不到 1000 个数据条目的 Sphinx 或 MySQL 全文？

> ID：13038642
> 
> 赞同：0
> 
> 时间：2012-10-23T20:23:35.860
> 
> 标签：mysql, full-text-search, sphinx

我应该使用 Sphinx 或 MySQL 全文搜索不同表中不超过 1000 个数据库整体吗？

稍后我计划在地图上将匹配搜索关键字的条目显示为点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T20:51:43.497

一切都取决于您的使用水平和需求。我建议你从 MySQL 全文搜索开始——它更容易实现，并且会让你更快地投入生产。您可以随时根据您的需求计划升级。

# wcf - WCF 作为 BLL（中间层）和安全技术

> ID：13038646
> 
> 赞同：3
> 
> 时间：2012-10-23T20:23:59.253
> 
> 标签：wcf, security, model-view-controller

所以请耐心等待，我是 MVC 和 WCF 的新手。我已经有一组服务 (WCF) 公开了我的 BLL，我正在尝试从我的 MVC.net Web 应用程序中使用这些服务，但我不确定如何在这里执行安全操作。

这些是我的应用程序要求：

*   能够为 Web 应用程序上的每个用户使用不同的凭据来使用 WCF 服务
*   我的 BLL (WCF) 需要知道消费者在调用它（现在我只有 MVC 应用程序，但我计划向它添加 iOS 和 Andriod 调用，所以稍后我将向 WCF 端点添加 REST 服务）有什么设计模式吗？（或者我应该只使用soap标头来包含来电显示吗？我应该使用某种来电者密码还是什么？）
*   我需要一个像令牌或其他东西这样的安全机制，所以我不必在每次调用服务方法（WCF）时传递用户名和密码

到目前为止我所拥有的：

*   WCF 使用证书和自定义用户名验证器。
*   我已经使用合同接口而不是生成的代理手动编码代理：但我讨厌每次调用 WCF 服务时都必须验证用户名和密码的事实。我怎么能在这里使用代币？想知道在soap 标头上发送的给定令牌是否有效或尚未过期？我已经搜索了很多，没有教程/代码/示例足够清楚，我可以真正开始编码；（
*   我正在尝试缓存 ChannelFactory 但我应该吗？我的意思是，我需要为每个登录用户的每个合同缓存一个频道工厂；（可以吗？我可以在这里做什么？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T12:09:22.220

您是否应该为每个合同的每个用户缓存 ChannelFactory？

这取决于。有几个考虑因素。实例化通道工厂最多可能需要 70 毫秒。如果您重复执行此操作，如果您没有缓存 ChannelFactory 并在每次用户向您的 MVC 应用程序发出导致控制器操作调用 Web 服务的 http 请求时实例化一个（或多个），您将看到明显的性能下降。这表明缓存 channelFactory 将有利于速度。

另一方面，根据您拥有的用户数量，如果您正在缓存大量通道工厂（例如在静态字典中），您将开始使用大量内存 - 这可能会变成给你一个问题。

您必须决定动态实例化通道工厂（并正确关闭/中止它们及其包含的通道）的成本与增加托管 MVC 应用程序的应用程序池中的内存利用率相比是否太高了。

无论哪种方式，我强烈建议您在部署到生产环境之前分析您的应用程序。

# ruby-on-rails - 在 ruby on rails 中插入带有 null 的列值

> ID：13038648
> 
> 赞同：0
> 
> 时间：2012-10-23T20:24:07.800
> 
> 标签：ruby-on-rails, ruby-on-rails-3, null

我想自定义插入到控制器列中的值，并且我想在其中插入一个空值。这样 ：

```
@users.to = null 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T20:27:38.483

我相信你想要：

```
@user.to = nil 
```

您可能必须运行迁移以确保该列允许 NULL 值：

```
change_column :users, :to, :string, :null => true 
```

# php - 使用 PHP 脚本登录但无法正常工作？

> ID：13038651
> 
> 赞同：0
> 
> 时间：2012-10-23T20:24:28.890
> 
> 标签：php, html, mysql, database, login

下面是 index.html，它向用户显示密码和电子邮件输入表单

```
<!DOCTYPE html>
<html lang="en">
<head>

<title>Ryan Kelly</title>

<link href="css/bootstrap.min.css" rel="stylesheet">
<link href="main.css" rel="stylesheet">

<script src="http://code.jquery.com/jquery-latest.js"></script>
<script src="js/bootstrap.min.js"></script>

<script type="text/javascript">

var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-35774778-1']);
_gaq.push(['_trackPageview']);

(function() {
var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async =               true;
ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') +       '.google-analytics.com/ga.js';
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();

</script>

</head>
<body>
<?php include 'comments.php'; ?>

<div class="container">

<div class="centre">

<div class="well">
    <h1 class="titlecomment">Comment System</h1>

    <h4 class="instructions">Please login below with your username and      password</h4>

    <form class="form-horizontal">
  <div class="control-group">
  <label class="control-label" for="inputEmail">Email</label>
  <div class="controls">
  <input type="text" id="inputEmail" placeholder="Username" method="post">
  </div>
  </div>
  <div class="control-group">
  <label class="control-label" for="inputPassword" >Password</label>
  <div class="controls">
  <input type="password" id="inputPassword" placeholder="Password" method="post">
  </div>
  </div>
  <div class="control-group">
  <div class="controls">

   </div>
  </div>
  </form>

  <div class="greenbutton">
  <button type="submit" class="btn btn-success" method="login()">Login</button>
  </div>

  </div>
  <div class="footer">Created by Ryan Kelly</div>

  </div>

 </div> 
```

下面是检查电子邮件和密码然后将用户重定向到谷歌的 PHP 脚本，我只是重定向，因为我想看看它是否成功登录

```
 <?php        

            function login() {

    $connection = mysql_connect($host, $databaseUsername, $databasePassword);

    $username = $_POST['inputEmail'];
    $password = $_POST['inputPassword'];

    mysql_select_db($connection);

    $queryUsername = "SELECT * FROM login WHERE Username='$username'";
    $queryPassword = "SELECT * FROM login WHERE Password='$password'";

    $searchQuery = mysql_query($queryUsername);
    $searchQueryDatabase = mysql_query($queryPassword);

      if($searchQuery && $searchQueryDatabase = $username && $password) {

        header('Location: http://www.google.co.uk');
      }

}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T20:26:24.757

这是问题所在

```
if($searchQuery && $searchQueryDatabase = $username && $password) { 
```

您没有获取结果，并且`=`在您可能表示比较 ( ) 时也使用赋值 ( `==`)。

例如

尝试`$row = mysql_fetch_array($searchQueryDatabase);`

现在尝试类似

```
if($searchQuery && $row['Username'] == $username && $row['Password']==$password) { 
```

# javascript - 使用 Underscore debounce 重写 setInterval 函数

> ID：13038657
> 
> 赞同：1
> 
> 时间：2012-10-23T20:24:47.427
> 
> 标签：javascript, jquery, underscore.js

我正在重写我的 setInterval 任务，这样当我使用 Underscore.js debounce 跳转到我网站上的不同选项卡时，我不再需要 clearInterval。

我不断收到错误`_.debounce is not a function`。

这是我下面的原始工作代码。基本上，当标签为“PANO”时，我运行此功能，每50ms更改相机角度。当我重新单击“全景”选项卡时，clearInterval 会重置计时器。

```
clearInterval(timerID);
if (target == 'pano') {
   initialize();
   timerID = setInterval(function(){
     if (!hovering && !moved) {
       panoOptions.pov.heading += .5;      
       panoOptions.pov.heading = wrapAngle(panoOptions.pov.heading);
       panorama.setOptions(panoOptions);
     }
   },50);

  initialize();

} 
```

当我尝试重构我的代码以使用`._debounce`(http://underscorejs.org/#debounce) 时，我得到一个错误，如果我的方法是正确的，我不会。

```
timerID = _.debounce(function(){
  if (!hovering && !moved) {
    panoOptions.pov.heading += .5;      
    panoOptions.pov.heading = wrapAngle(panoOptions.pov.heading);
    panorama.setOptions(panoOptions);
  }
},50);

$("#pano_toggle").click(
  function(){
    console.log("CLICKED");
    timerID();
  }
); 
```

我基本上设置了一个单击侦听器，以便当用户单击按钮时，去抖动功能开始运行。我还添加`console.log("CLICKED")`了查看我的点击侦听器是否正常工作，但它没有收到点击。

关于我的逻辑在哪里失败的任何提示？

编辑：

我确保需要 Underscore.js：

```
require(["require", 
         "jquery", 
         "underscore",
         "lib/jquery/jquery.galleria",
         "gmaps!",
         "//assets.pinterest.com/js/pinit.js",
         "twitter_bootstrap/bootstrap-dropdown"], function(require, _){ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T20:55:56.800

您的要求语法不正确。模块按照它们在第一个数组中列出的顺序作为参数传递给您的函数。所以它应该看起来像这样：

```
require([
     "require", 
     "jquery", 
     "underscore",
     "lib/jquery/jquery.galleria",
     "gmaps!",
     "//assets.pinterest.com/js/pinit.js",
     "twitter_bootstrap/bootstrap-dropdown"
], function(require, $, _, galleria, ...){
     /* .... */
}); 
```

虽然，你不应该需要**require**本身。

# c - 使用 libmonkey 在 BSD 上进行动态 ELF 修补

> ID：13038665
> 
> 赞同：2
> 
> 时间：2012-10-23T20:25:16.750
> 
> 标签：c, linux, freebsd, elf

我使用了一些名为[libmonkey](https://github.com/mnunberg/libmonkey)的库，它为 Linux 上的动态 ELF 补丁提供了很好的接口。但是，我正在尝试在 FreeBSD 上运行它；编译通过，但我在运行时得到核心转储（gdb 指向标头偏移计算代码）。

我不熟悉 ELF，但在 linux 和 freebsd 上的头文件不应该是一样的吗？

有人知道发生了什么吗？

谢谢

# html - 通过电子邮件发送文件 - 多部分

> ID：13038676
> 
> 赞同：0
> 
> 时间：2012-10-23T20:25:56.770
> 
> 标签：html, forms, file, email, multipart

我想制作一个 HTML 文档，允许用户通过电子邮件发送文件。我读过我必须使用“multipart/form-data”。

```
<HTML>
<HEAD>
<TITLE>File test</TITLE>
</HEAD>
<BODY>

<FORM ACTION="mailto:user@mail.com" METHOD="POST" ENCTYPE="multipart/form-data">
Send a file
<BR><INPUT NAME="File" TYPE="file">
<BR><INPUT TYPE="submit" VALUE="Send">
</FORM>
</BODY>
</HTML> 
```

这是一个我无法修复的简单示例。我错过了什么？

编辑：问题是我收到的电子邮件没有任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T20:48:11.433

mailto: URI 方案在用于表单操作时，需要兼容的浏览器和电子邮件客户端的组合。这些在 WWW 上使用起来并不常见（另见[The Mythical Mailto:](http://isolani.co.uk/articles/mailto.html)）。

我不知道通过该方案支持*文件附件的**任何组合。*

 *您需要将 HTTP（或 HTTPS）URI 与服务器端表单处理程序一起使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T20:33:15.750

邮件将使用您机器中设置的默认邮件客户端成功发送。确保您已设置默认邮件客户端。例如：Outlook Express、Office Outlook。*

# java - 从 iOS 远程到 Java/Spring 后端

> ID：13038678
> 
> 赞同：0
> 
> 时间：2012-10-23T20:26:01.727
> 
> 标签：java, ios, json, spring, backend

在我们的应用程序中，我们有一个 Adob​​e Flex 客户端，它通过一个通过 Spring 公开的外观（使用 AMF）与我们的 Java/Spring 后端通信。

关于如何利用这个外观从 iOS 进行远程调用的任何建议？请注意，我更喜欢可从其他客户端（Android 等）重用的后端框架。

我听说过 JSON 和 RESTful Web 服务。是否有一种方法可以轻松地将现有外观服务公开为使用 JSON 进行对象序列化的 RESTFul Web 服务？

或者你会推荐一些不同的东西吗？

任何信息和/或指针将不胜感激！

更新：

所以到目前为止我们有一个选择：通过 Spring 的 JSON 请求和响应

有人想建议任何其他方式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T23:12:23.300

Spring主要通过使用注解来支持 JSON 请求和响应（例如，参见Spring In Practice 博客中的[这篇文章）。](http://springinpractice.com/2012/02/22/supporting-xml-and-json-web-service-endpoints-in-spring-3-1-using-responsebody/)

虽然我认为您不太可能通过现有的 AMF 外观，但我认为使用相同的基础 Spring 控制器创建 JSON-over-HTTP 外观可能非常简单（假设您使用的是 Spring MVC）。

编辑：您创建的 JSON-over-HTTP 外观是否真正 RESTful 很大程度上取决于您的实现。

# wpf - 将 XML 绑定到 ItemsSource 时应用动态 XPath 表达式

> ID：13038693
> 
> 赞同：2
> 
> 时间：2012-10-23T20:26:37.783
> 
> 标签：wpf, xml, xaml, data-binding, xpath

我有一个描述如何为用户输入构建 UI 元素的 XML 文档，并且我有包含一些数据和 XPath 表达式的数据对象。我有一个数据对象类型的 DataTemplate，它使用 HierarchicalDataTemplate 来构建基于 XML 的 UI，但我只想使用 XML 的一个子集。如果 XPath 表达式是静态的，我可以写：

```
<TreeView ItemsSource="{Binding Source={StaticResource dataProvider},
    XPath=/Static/XPath/Expression/*}" /> 
```

由于 XPath 表达式来自数据对象，因此使用数据绑定会很方便：

```
<TreeView ItemsSource="{Binding Source={StaticResource dataProvider},
    XPath={Binding Path=Data.XPathExpression}}" /> 
```

不幸的是，Binding MarkupExtension 不是从 DependencyObject 继承的，所以它的属性不是 DependencyProperty 并且不支持数据绑定。

绑定到 XML 数据时如何应用动态 XPath 表达式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T20:26:37.783

您可以创建一个 IMultiValueConverter，将 XML 数据和 XPath 表达式转换为新的 XML 数据：

```
public object Convert(object[] values, Type targetType, object parameter,
    CultureInfo culture)
{
    try
    {
        if (values.Length < 2) { return null; }

        var data = values[0] as IEnumerable;
        if (data == null) { return null; }

        var xPathExpression = values[1] as string;
        if (xPathExpression == null) { return null; }

        XmlDocument xmlDocument = data.Cast<XmlNode>()
            .Where(node => node.OwnerDocument != null)
            .Select(node => node.OwnerDocument)
            .FirstOrDefault();

        return (xmlDocument == null) ? null : 
            xmlDocument.SelectNodes(xPathExpression);
    }
    catch (Exception) { return null; }
}

public object[] ConvertBack(object value, Type[] targetTypes,
    object parameter, System.Globalization.CultureInfo culture)
{
    throw new NotImplementedException();
} 
```

然后，使用 MultiBinding 将 ItemsSource 绑定到 XML 数据和带有转换器的动态 XPathExpression：

```
<TreeView>
    <TreeView.Resources>
        <this:XmlXPathConverter x:Key="xmlXPathConverter" />
    </TreeView.Resources>
    <TreeView.ItemsSource>
        <MultiBinding Converter="{StaticResource xmlXPathConverter}">
            <Binding Source="{StaticResource dataProvider}" />
            <Binding Path="Data.XPathExpression" />
        </MultiBinding>
    </TreeView.ItemsSource>
</TreeView> 
```

# php - PHP RegEx 否定词

> ID：13038695
> 
> 赞同：0
> 
> 时间：2012-10-23T20:26:41.370
> 
> 标签：php, html, regex, image, regex-lookarounds

我的 preg_replace 模式正则表达式代码在这里..

```
/<img(.*?)src="(.*?)"/ 
```

这是我的替换代码..

```
<img$1src="'.$path.'$2" 
```

所以我想否定/排除一个条件..如果 img 标签有一个**rel="customimg"**，不要 preg_replace 所以跳过它..

示例：跳过此行

```
<img rel="customimg" src="http.."> 
```

什么可能会添加到这个正则表达式模式？

我搜索了另一个帖子，但我不能完全..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T20:28:48.507

添加负前瞻：

```
/<img(?![^>]*\srel="customimg")(.*?)src="(.*?)"/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T20:48:04.330

因为`src`参数可能使用单引号或双引号，我建议你使用

```
preg_replace(
  "/(<img\b(?!.*\brel=[\"']customimg[\"']).*?\bsrc=)([\"']).*?\2/i",
  "$1$2" . $path . "$2",
  $string); 
```

### 编辑：

要添加 url 前缀而不是完整的 url 替换，请使用

```
preg_replace(
  "/(<img\b(?!.*\brel=[\"']customimg[\"']).*?\bsrc=)([\"'])(.*?)\2/i",
  "$1$2" . $path . "$3$2",
  $string); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T20:55:26.863

因为我只看到正则表达式“解决方案”进来。这是使用 DOMDocument 的答案：

```
<?php
$path = 'the/path';

$doc = new DOMDocument();
@$doc->loadHTML('<img rel="customimg" src="/image.jpgm"><img src="/image.jpg">');
$xpath = new DOMXPath($doc);
$imageNodes = $xpath->query('//img[not(@rel="customimg")]');

foreach ($imageNodes as $node) {
    $node->setAttribute('src', $path . $node->getAttribute('src'));
} 
```

演示：[http ://codepad.viper-7.com/uID5wz](http://codepad.viper-7.com/uID5wz)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T20:30:04.337

看起来这样做会更容易/更有表现力

```
if(strpos($haystackString, '"customimg"') === false) // The === is important
{
 // your preg_replace here
} 
```

编辑：感谢您指出缺少参数的家伙

# javascript - 从 Qt 应用程序转换为 Web 应用程序的建议

> ID：13038709
> 
> 赞同：5
> 
> 时间：2012-10-23T20:27:19.020
> 
> 标签：javascript, html, qt, wt

我目前有一个基于 Qt 的 GUI 应用程序，它简单地提供了一个图形仪表板（指标、图表等），显示另一个应用程序通过 TCP 连接提供的实时数据。出于架构和安全原因，我被告知不再允许我的 TCP 连接，并且 HTTPS websocket 将是我唯一的管道。有人建议我使用 HTML5 和 Javascript 将我的应用程序转换为网络应用程序。但是，我不是网络程序员，但可能会认为这是学习新技术的机会。在做出决定之前，我想更好地了解情况。所以，我认为我的选择是：

1.  将我的应用程序转换为网络应用程序，为我提供基于网络的应用程序的所有优点/缺点。对我来说还有更多的工作，因为它是一项新技术，而且我已经让 Qt/TCP 版本运行良好。如果这是建议的方法，任何有关开发环境/工具的建议将不胜感激。

2.  将我当前的 Qt 应用程序转换为客户端 HTTPS 连接而不是 TCP 连接。不确定这是可能的。从我读过的内容来看，QtWebKit 可能无法做到这一点。看起来很奇怪？

也许还有另一个我没有考虑的选择？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T12:37:06.973

您还可以使用混合方法，使用 WT 库。它基于 c++（和 QT 启发）。它有一个不错的工具包并支持 websockets。

[http://www.webtoolkit.eu/wt/examples/](http://www.webtoolkit.eu/wt/examples/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T10:33:33.810

移植需要大量工作。在 Qt 方面，至少有两种 WebSockets 实现：

1.  [QtWebSocket](https://gitorious.org/qtwebsocket)，基于 Qt 的 websocket 服务器实现和 websocket 客户端的 alpha 状态实现。
2.  [WebSocket++](https://github.com/zaphoyd/websocketpp)，基于 Boost 的 websocket 服务器和客户端实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T12:51:02.247

我最近刚刚经历了一个类似的工作练习。我们决定使用 Google Web Toolkit (GWT) 框架来开发我们的 Web 应用程序。它完全基于 Java，这意味着您（几乎）用 Java 编写所有内容，GWT 编译器会为您将其转换为 Javascript。我们使用 GWT-EventService 插件将数据从服务器推送到客户端。

我希望我在开始之前就知道这个 WT 库，这看起来很有趣。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-10T10:11:16.613

您还可以查看[QWebSockets](http://doc.qt.io/qt-5/qtwebsockets-index.html)，它是 websocket 的纯 Qt 实现，供客户端和服务器使用。

更新：这个库现在是 Qt 的一个组成部分

# java - 从段落中提取给定的子字符串

> ID：13038711
> 
> 赞同：2
> 
> 时间：2012-10-23T20:27:24.253
> 
> 标签：java, substring

我想执行以下功能：

从给定的段落中提取给定的字符串，例如

```
String str= "Hello this is paragraph , Ali@yahoo.com . i am entering  random  email here as this one  AHmar@gmail.com " ; 
```

我要做的是解析整个段落，阅读电子邮件地址，并打印他们的服务器名称，我已经尝试过使用`for` 循环`substring` 方法，确实使用 过`indexOf`，但可能是我的逻辑不太好，有人可以请帮帮我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T20:30:46.387

对于这种情况，您需要使用正则表达式。

试试下面的正则表达式： -

```
String str= "Hello this is paragraph , Ali@yahoo.com . i am " +
            "entering  random  email here as this one  AHmar@gmail.com " ;

Pattern pattern = Pattern.compile("@(\\S+)\\.\\w+");
Matcher matcher = pattern.matcher(str);
while (matcher.find()) {
     System.out.println(matcher.group(1));
} 
```

**输出**： -

```
yahoo
gmail 
```

**更新**： -

这是带有`substring`和的代码`indexOf`：-

```
 String str= "Hello this is paragraph , Ali@yahoo.com . i am " +
        "entering  random  email here as this one  AHmar@gmail.com " ;

   while (str.contains("@") && str.contains(".")) {

        int index1 = str.lastIndexOf("@");  // Get last index of `@`
        int index2 = str.indexOf(".", index1); // Get index of first `.` after @

        // Substring from index of @ to index of .      
        String serverName = str.substring(index1 + 1, index2);
        System.out.println(serverName);

        // Replace string by removing till the last @, 
        // so as not to consider it next time
        str = str.substring(0, index1);

    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T20:29:39.117

您需要使用正则表达式来提取电子邮件。从[这个](http://docs.oracle.com/javase/tutorial/essential/regex/test_harness.html)测试工具代码开始。接下来，构建您的正则表达式，您应该能够提取电子邮件地址。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T20:31:11.203

试试这个：-

```
 String e= "Hello this is paragraph , Ali@yahoo.com . i am entering random email here as this one AHmar@gmail.comm";
  e= e.trim();  
  String[] parts = e.split("\\s+");  
  for (String e: parts) 
  {
  if(e.indexOf('@') != -1)
  {
   String temp = e.substring(e.indexOf("@") + 1); 
  String serverName = temp.substring(0, temp.indexOf(".")); 
  System.out.println(serverName);        }} 
```

# statistics - 为什么交互属性可以提高线性回归的性能

> ID：13038716
> 
> 赞同：4
> 
> 时间：2012-10-23T20:27:41.403
> 
> 标签：statistics, weka, regression

我正在使用线性回归模型研究 Weka。我意识到，通过将数据集中的两个相关属性相乘并将其添加为额外属性，我可以提高线性回归的性能。但是，我不明白为什么！为什么我将两个相关属性相乘会有更好的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T21:09:55.940

这表明您正在逼近的函数在原始输入中不是线性的，而是在他们的乘积中。实际上，您已经重新发明了多元[多项式回归](https://en.wikipedia.org/wiki/Polynomial_regression)。

例如，假设您要逼近的函数的形式为*y* = *a* × *x* ² + *b* × *x* + *c*。*仅适用于x*的线性回归模型不会给出好的结果，但是当您同时输入*x* ² 和*x*时，它可以学习正确*的 a*和*b*。

*在多元设置中也是如此：一个函数在x* [1]和*x* [2]中可能不是线性的，但它可能在*x* [1] × *x* [2]中，您称之为“交互属性”。（我知道这些是叉积特征或特征连接；它们是 SVM 中的多项式内核计算的内容，这就是 SVM 比线性模型更强大的学习者的原因。）

# sql - 逗号分隔的平面文件源

> ID：13038723
> 
> 赞同：0
> 
> 时间：2012-10-23T20:28:10.123
> 
> 标签：sql, ssis

我有一个使用逗号分隔的文本文件

在 SSIS 中很简单，但我的源平面文件中有以下行：

```
Desc,Curr,Desc,ID,Quantity  
05969A105   ,CU,BANCORP INC, THE DEL COMMON   ,1,2126 
```

我的 Desc 列中有一个逗号，我不确定如何忽略该逗号

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T20:51:08.620

AFAIK，你不能在 SSIS（或我曾经使用过的任何其他应用程序）中做任何事情来处理这个问题，因为它只是坏数据。如果您需要保留逗号分隔符，那么您需要让数据提供者使用文本分隔符（例如双引号）来包装数据。可以告诉 SSIS 什么是文本分隔符，并自动将这些字符从数据中剥离。

当然，这可能会引发“但文本可能需要包含双引号！”的问题，在这种情况下，最好将分隔符更改为其他内容，例如制表符或管道。

# java - @GenericGenerator(name = "generator", strategy = "foreign") 到标准 JPA 2

> ID：13038724
> 
> 赞同：4
> 
> 时间：2012-10-23T20:28:20.390
> 
> 标签：java, hibernate, jpa-2.0

我想知道是否有标准的方法来转换这样的东西

```
@GenericGenerator(name = "generator", strategy = "foreign", parameters = @Parameter(name = "property", value = "user"))
@Id
@GeneratedValue(generator = "generator")
@Column(name = "id", unique = true, nullable = false)
public Integer getId() {
    return this.id;
} 
```

到没有休眠的标准 JPA 2 模型

编辑：让我们看看两个实体（我只保留了带注释的有趣部分）

```
@Entity
@Table(name = "author", catalog = "test")
public class Author implements java.io.Serializable {

    @GenericGenerator(name = "generator", strategy = "foreign", parameters = @Parameter(name = "property", value = "user"))
    @Id
    @GeneratedValue(generator = "generator")
    @Column(name = "id", unique = true, nullable = false)
    public Integer getId() {
        return this.id;
    }

    public void setId(Integer id) {
        this.id = id;
    }

    @OneToOne(fetch = FetchType.LAZY)
    @JsonBackReference
    @PrimaryKeyJoinColumn
    public User getUser() {
        return this.user;
    } 
```

和

```
@Entity
@Table(name = "user", catalog = "test")
public class User implements java.io.Serializable {
    @OneToOne(fetch = FetchType.LAZY, mappedBy = "user")
    public Author getAuthor() {
        return this.author;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-13T20:50:41.983

也许您希望这些实体具有完全相同的 ID。如果是这样，只需添加作者类

```
 @OneToOne @MapsId
        public User getUser() {
        return this.user;
    } 
```

`@MapsId`注释可以解决问题。您可以在那里查看[http://docs.oracle.com/javaee/6/api/javax/persistence/OneToOne.html](http://docs.oracle.com/javaee/6/api/javax/persistence/OneToOne.html)（示例2）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T20:35:14.663

我只使用 JPA 模型，所以我不确定这是否链接到序列（序列）。如果是这样，那么它应该如下所示：

```
@Entity
@Table(name = "project", schema = "a_schema" )
@SequenceGenerator(name = "project_id_seq_generator", sequenceName = "a_schema.project_id_sequence")
public class MyObject {

    @Id @GeneratedValue(strategy = GenerationType.AUTO, generator = "project_id_seq_generator")
    @Column(name = "project_id")
    private Long projectID;
//...
} 
```

希望这可以帮助！

# android - 意图打开浏览器在tabhost上不起作用

> ID：13038735
> 
> 赞同：0
> 
> 时间：2012-10-23T20:28:53.380
> 
> 标签：android, android-intent, android-tabhost

我想在用户单击选项卡时打开浏览器，这是我正在使用的代码

```
public void onTabChanged(String tabId) {
            if (tabId.equals(tabSpecdiwan)) {
                String diwan = "http://j.mp/RIShjZ";
                Intent a = new Intent(Intent.ACTION_VIEW);
                a.setData(Uri.parse(diwan));
                startActivity(a);
            } 
            else   {}

          } 
```

更新：我使用 else if 语句更新了代码以显示警报对话框 if (!tabId.equals(tabSpecdiwan))（注意 tabId 之前的“！”），并且当我单击任何选项卡（包括 tabSpecdiwan）时，else if 语句正在工作。 .

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T12:29:06.760

因此，在多次尝试了解问题所在之后，@CommonsWare 提出了一个想法，看看问题出在哪里，所以我构建了一个 else if 语句（请参阅我的更新）并将警报对话框的内容设置为显示tabId .setMessage(tabId)，问题是我写的是tabSpecdiwan而不是“tabSpecdiwan”

```
TabHost tabHost = getTabHost();

final TabSpec tabSpecdiwan = tabHost
.newTabSpec("tabSpecddiwann") 
```

# windows - 如何在没有 GUI 的情况下运行 makecert.exe？

> ID：13038739
> 
> 赞同：9
> 
> 时间：2012-10-23T20:29:16.440
> 
> 标签：windows, user-interface, automation, certificate, makecert

我最近遇到了一个以自动方式生成自签名证书的问题。每当我运行 makecert.exe 时，我都会弹出一个输入证书密码的窗口。但是，这些证书永远不会分发，所以我不需要密码或任何东西。

如何在不需要 GUI 的情况下让 makecert.exe 工作？

如果有帮助，我的命令行采用这种形式：

> makecert.exe mycert.cer -r -n "CN=random-hex-number" -$ individual -sv private.pkv -pe -cy end

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T21:34:07.840

我没有解决根本问题，但找到了解决它的方法。当您不提供私钥时，它只会提示您输入密码。通过预先生成私钥并将其作为 PVK 传递，它现在不会提示输入密码。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-23T20:41:14.740

将证书和私钥放在一个文件夹中。然后使用 pvk2pfx 工具将它们组合成一个文件。然后当你准备安装时使用 @pushd "%~dp0" @start "" /b (command) "%~dp0"

pushd 将其保存在 files 目录中，并 start "" /b 运行程序而不调出界面。

# r - 如何将不同的函数应用于列表中每个矩阵的不同行？

> ID：13038740
> 
> 赞同：0
> 
> 时间：2012-10-23T20:29:17.570
> 
> 标签：r, list, function, matrix

我有一个列表，其中包含几个具有相同行数（4）的矩阵。现在我想应用像 log2(row/something) 这样的函数来表示第 1 行和第 4 行，以及像 log2(row/something else) 这样的函数来表示第 2 行和第 3 行。

在代码中：

```
# Create list with 2 matrices with 4 rows
l<-list(a=matrix(1:16,nrow=4),b=matrix(17:32,nrow=4))

# Now I thought it might be possible to
nl <- lapply(l, function(x){
  log2(x[c(1,4),]/14)
  log2(x[2:3,]/23)
}) 
```

但结果是只`lapply`执行了中的最后一个函数。我还认为有可能：

```
nl <- l
lapply(nl, function(x) x[c(1,4),]) <- lapply(l, function(x) log2(x[c(1,4),]/14))
lapply(nl, function(x) x[2:3,]) <- lapply(l, function(x) log2(x[2:3,]/23)) 
```

但 R 真的不喜欢这种创造性的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T20:40:35.733

您的第一个解决方案应该可以工作，只是现在该函数只返回最后一部分。一点点改变应该有效吗？

```
l<-list(a=matrix(1:16,nrow=4),b=matrix(17:32,nrow=4))

nl <- lapply(l, function(x){
  x[c(1,4),] <- log2(x[c(1,4),]/14)
  x[2:3,] <- log2(x[2:3,]/23)
  return(x)
}) 
```

# javascript - 从 iframe 获取文本

> ID：13038742
> 
> 赞同：3
> 
> 时间：2012-10-23T20:29:32.037
> 
> 标签：javascript, dom, iframe

我有以下 HTML

```
<iframe id ="myIframe">
     #document
         <head>...</head>
        <body>Text I want to get is here</body>
</iframe> 
```

我只知道 iframe 的 id。使用 JavaScript，如何从正文中提取文本？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-23T20:33:30.613

假设您的 iframe 与您的 HTML 在同一个域中：

```
var myIFrame = document.getElementById("myIframe");
var content = myIFrame.contentWindow.document.body.innerHTML; 
```

否则，您将面临一些[同源策略](http://javascript.info/tutorial/same-origin-security-policy)问题。

# macos - Mac OS X 10.6：OpenSSL 库

> ID：13038753
> 
> 赞同：0
> 
> 时间：2012-10-23T20:30:21.317
> 
> 标签：macos, unix, openssl

我在 Mac 上收到了一个旧代码并尝试在 OS X 10.6 上编译它，在代码中很少调用 OpenSSL 库（例如 SSL_write()）我在这些文件中添加了标题（#include）并检查了我的OpenSSL 的版本向我显示“0.9.8r”（我知道 Apple 有它自己的这个库 crypto' 框架）但是为什么我得到链接错误是这样的：

```
 sockets::TcpSocket::TryWrite(char const*, unsigned long) in TcpSocket.o 
```

我知道代码应该针对这个库编译，`/usr/lib`但它没有，我是否缺少 Xcode 中的路径或其他设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T00:47:34.113

/usr/bin 中没有库。我假设你的意思是/usr/lib。但是，您通常不会针对 /usr/lib 进行编译。您通常针对特定的 SDK 进行编译，该 SDK 有自己的 /usr/lib 和 /usr/include 副本。你使用的SDK头文件一般是在`-isysroot`参数中传入的。如果你在 Xcode 中构建，这些设置主要是通过“Base SDK”和“OS X Deployment Target”设置的。不过，如果没有更多关于你如何构建的细节，我不确定还能指点你哪里。特别是，相关文件的编译和链接行是什么样的？

* * *

在 Xcode 中，不要尝试通过路径链接特定的系统库。您应该始终使用构建设置的“链接阶段”面板链接到系统库，并从 SDK 库列表中进行选择。在“链接阶段”面板中选择特定路径几乎总是会导致问题。

# android-layout - 如何在android中获取屏幕宽度和长度？

> ID：13038754
> 
> 赞同：0
> 
> 时间：2012-10-23T20:30:22.613
> 
> 标签：android-layout, android-button

我想在显示屏中间显示 9 个按钮，每行三个。总之，一个由屏幕中间显示的 9 个小按钮组成的大方块。所以我想我需要知道屏幕大小才能显示按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T05:44:27.187

您只需要为此使用 Tablelayout 或 Linerlayout。但如果需要知道屏幕尺寸，则如下所示：

```
Display display = getWindowManager().getDefaultDisplay();
int width = display.getWidth();  
int height = display.getHeight(); 
```

如果您不在 Activity 中，您可以通过 WINDOW_SERVICE 获得默认显示：

```
 WindowManager wm = (WindowManager) ctx.getSystemService(Context.WINDOW_SERVICE);
    Display display = wm.getDefaultDisplay(); 
```

# asp.net - 更改默认 JSON 序列化程序

> ID：13038755
> 
> 赞同：1
> 
> 时间：2012-10-23T20:30:35.337
> 
> 标签：asp.net, web-services

ASP.NET 默认的 json 序列化器很慢，而且我需要很多性能，所以我想使用[ServiceStack.Text Serializer](https://github.com/ServiceStack/ServiceStack.Text)，有没有办法可以使用该序列化器而不是默认的序列化器？

如果我向我的 ASMX 文件发送 JSON 请求，并返回一个对象，它将使用 Microsoft 的慢速实现对其进行序列化。

我想我总是可以返回一个字符串，并手动序列化，但我只想知道它是否可能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-17T11:30:35.113

查看此链接：http: [//msdn.microsoft.com/library/bb763183%28v=vs.100%29.aspx](http://msdn.microsoft.com/library/bb763183%28v=vs.100%29.aspx)

基本上你需要把你的自定义转换器放在 web.config 的配置标签中：

```
<configuration>
  <system.web.extensions>
    <scripting>
      <webServices>
        <jsonSerialization maxJsonLength="50">
          <converters>
            <add name="MyCustomConverter" 
              type="MyCompany.ConvertersNameSpace.MyTypeConverter"/>
          </converters>
        </jsonSerialization>
      </webServices>
    </scripting>
  </system.web.extensions>
</configuration> 
```

由于 JavascriptSerializer 需要告知支持哪些类，我认为 asp.net 将假定您的序列化器而不是默认序列化器。

# c - 在不相关的 DLL 中“找不到入口点”的原因？

> ID：13038756
> 
> 赞同：3
> 
> 时间：2012-10-23T20:30:35.583
> 
> 标签：c, qt, visual-studio-2008, glib, matlab-deployment

在您将此问题视为重复之前，此问题与 SO 上的许多其他类似问题不同，因为错误消息中的**函数**与**DLL****完全无关**。

 **### 应用程序和版本信息

我在 Visual Studio 2008 RTM 中有一个 32 位应用程序，它使用 MATLAB Compiler 4.17 (R2012a) 生成的 DLL、Glib（2.32.4，来自 GStreamer SDK 2012.9 32 位的二进制文件）和 Qt（4.8.3-vs2008 )，全部在 Windows 7 x64 SP1 上运行。

### 问题

**调试版本运行良好**，但在发布时我得到了臭名昭著`The procedure entry point libXXXInitialize could not be located in the dynamic link library libglib-2.0-0.dll.`的奇怪之处在于这个 libXXXInitialize 函数（它确实存在于基于 MATLAB 的 DLL 中）与libglib-2.0-0.dll**完全无关。**

### 我的研究

我检查了明显的，确保所有库都是用 VS2008 编译的（除了用 mingw 编译的 GStreamer/GLib，但由于它是直接 C 应该没有任何问题），并检查 DLL 中的任何其他版本小路。似乎它一定是某种链接器问题。

### 更新 1

在 Dependency Walker x86 中，它显示这`libXXXInitialize`是一个未解析的（父）导入，不仅来自 libglib-2.0-0.dll，而且还来自所有其他 GLib/GStreamer DLL，但是该函数在应该在的 DLL 中正确解析找到，libXXX.dll。

### 更新 2

我删除了对 MATLAB Compiler Runtime 的调用`libXXXInitialize`和调用`mclInitializeApplication`，现在无法从 glib DLL 解析该函数​​。

**但是我找到了一个解决方案**（至少是临时的），将链接器选项从更改[`/OPT:REF`](http://msdn.microsoft.com/en-us/library/bxwfs976%28v=vs.90%29.aspx)为`/OPT:NOREF`修复问题（因此链接器“*保留从未引用的函数和/或数据*）。奇怪的是，我当然`mclInitializeApplication`明确地使用了该函数，并且如果我打开`/VERBOSE:REF`，它不会显示它被删除。

### 更新 3

[终于在binutils](http://sourceware.org/bugzilla/show_bug.cgi?id=12633)的 bugtracker 上在其他地方发现了这一点。我在作为 GStreamer SDK 的一部分的[MSVC2010 属性表中找到了它。](http://cgit.freedesktop.org/gstreamer-sdk/cerbero/tree/data/vs/msvc/common.props#n15)建议的解决方法是我已经在做的，禁用 OptimizeReferences。

如果有人能告诉我为什么会这样，我会将其标记为答案。**

# php - 通过javascript进行的Jquery引导脚本路径更新不起作用

> ID：13038762
> 
> 赞同：0
> 
> 时间：2012-10-23T20:31:04.413
> 
> 标签：php, jquery, symfony, routing, twig

我在 symfony2.0 中有一个使用 twig 的路径函数生成的链接，例如：

```
<a id="aBtn" href="{{ path("SomeController_someControllerAction",{'section_id':
    section_id, 'period_id': period.getId }) }}>A link</a> 
```

而且我还有一些javascript，每次用户更改页面上的部分时都会更新生成的URL的“section_id”部分：

```
function updateSectionId(id){
  var aBtn = $("#aBtn");
  var href = aBtn.attr('href');
  var splitted = href.split("/");
  splitted[splitted.length-2] = id; //My routing puts the period_id at that position
  //(Yes i know its pretty hardcoded...)
  aBtn.attr('href',splitted.join("/"));
} 
```

我已经验证并且链接已更新为相应的 section_id。

但是，调试收到此请求的操作我发现它*总是*收到 section_id = 1。

```
public function newQuestionDialogAction($period_id, $section_id){
  //$period_id = 1 ALWAYS, regardless of href value on the link. 
```

我真的一无所知......我在树枝的路线生成中遗漏了什么吗？

编辑：这是路线配置

```
SomeController_someControllerAction:
    pattern: /{period_id}/section/{section_id}/someControllerAction
    defaults: { _controller: "SomeBundle:SomeController:someControllerAction" }
    requirements:
      _method: GET 
```

EDIT2：我有一种预感，这个问题的根源是 jquery-bootstrap 插件“Modal 2”，用于向服务器执行 ajax 请求。如果我发现问题，我会告诉你。谢谢！

[https://github.com/Nikku/jquery-bootstrap-scripting](https://github.com/Nikku/jquery-bootstrap-scripting)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T03:47:25.517

所以问题确实出在我的javascript上，解决方案非常简单。我在这里发帖以防有人偶然发现 jquery bootstrap 库存在同样的问题。

一旦你打电话

```
$(document).controls() 
```

每个元素上的所有“open-dialog”类都被删除，因此无论您调用多少次 $(document).controls() 它都不会使用正确的 href 更新 onClick 事件。解决方法是在再次调用 $(document).controls() 之前添加“open-dialog”类。

```
$("#some-element").addClass("open-dialog");
$(document).controls(); 
```

所以，就我而言，解决方案是更新我的 updateSectionId 方法

```
function updateSectionId(id){
  var aBtn = $("#aBtn");
  var href = aBtn.attr('href');
  var splitted = href.split("/");
  splitted[splitted.length-2] = id; //My routing puts the period_id at that position
  //(Yes i know its pretty hardcoded...)
  aBtn.attr('href',splitted.join("/"));
  //Add open-dialog class and call controls to reattach the href
  aBtn.addClass("open-dialog");
  $(document).controls();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T21:01:20.507

查看浏览器中的链接。它真的会以正确的 ID 进入新页面吗？如果没有，您的 javascript 有问题。

# javascript - 为什么我的 window.dialogArguments 未定义

> ID：13038764
> 
> 赞同：1
> 
> 时间：2012-10-23T20:31:08.557
> 
> 标签：javascript, asp.net, modal-dialog

我需要在模式对话框中打开一个 .aspx 页面。这是我用来打开对话框的 JS 代码：

```
 if (url) {
            var fullPath = url + "/Validation.aspx";
        }
        else {
            alert("Could not find the location of the merge dialog.  Please contact your System admin and have them update the configuration entity.");
            return;
        }

        var features = "unadorned:yes;scroll:yes;resizable:yes;status:yes;dialogHeight:480px;dialogWidth:480px;";

        var args = {
            selected: selectedIds,
            page: pageIds,
            fetchXml: xml,
            entity: "xyz"
        };

        window.showModalDialog(fullPath, args, features); 
```

在我的validation.aspx 页面中，我需要能够获取JS 参数，将它们分配给隐藏字段，然后重新发布，这样我就可以在服务器端使用这些参数值。

这是我的 .aspx 页面中的 JS 代码：

```
window.onload = function(){        
    if (!window.dialogArguments)
        return;

        var args = window.dialogArguments;
        ...
} 
```

我在整个网络上看到了大量这样的例子。 **但是...我的 window.dialogArguments 在我的 .aspx 页面中始终未定义。是什么赋予了？有人有任何想法或解决方案吗？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T22:09:19.023

我在这里的假设是 ASPX 对话框页面是跨域打开的。

这意味着您的父页面位于一个域中，即：`http://abc/page.html`，而您的子对话页面位于另一个域中，例如：`http://def/dialog.html`。

如果是这种情况，似乎对访问 dialogArguments 和 returnValue 有限制。例如，查看有关[此先前答案](https://stackoverflow.com/questions/3587892/asp-net-cross-domain-modal-window-window-showmodaldialog-parameter-value-alw)的评论。

# jquery - 如何使 Highcharts 向下钻取以处理多个列

> ID：13038765
> 
> 赞同：0
> 
> 时间：2012-10-23T20:31:07.947
> 
> 标签：jquery, highcharts

这是来自 Highcharts 论坛的一个老问题， [http://www.google.com/url? sa=t&rct=j&q=&esrc=s&source=web&cd=2&ved=0CC4QFjAB&url=http%3A%2F%2Fwww.highslide.com%2Fforum %2Fviewtopic.php%3Ff%3D9%26t%3D16573&ei=J_2GUM7fEoSC9QT0lICoCA&usg=AFQjCNGq_GxmSd0YUxWUyy96UHLZA0zb9w&sig2=RzAkhldNbvCowk8I1kmRVg](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=2&ved=0CC4QFjAB&url=http%3A%2F%2Fwww.highslide.com%2Fforum%2Fviewtopic.php%3Ff%3D9%26t%3D16573&ei=J_2GUM7fEoSC9QT0lICoCA&usg=AFQjCNGq_GxmSd0YUxWUyy96UHLZA0zb9w&sig2=RzAkhldNbvCowk8I1kmRVg)

我今天正在实施它，并且论坛帖子上的解决方案有效。但是，我需要制作一个自定义解决方案，它是具有 3 列的 2 级向下钻取图表。澄清一下，论坛上提供的解决方案仅适用于第一个图表上的 2 列，然后是钻取上的 1 列。我的图表在初始图表和细分图表上都需要 3 列。

我不太了解向下钻取转换及其工作原理，因此我很难自定义代码。实现中也有相当多的重复代码，所以如果有人对 Highcharts 深入了解有更好的理解，请随时分享一些关于如何使其工作的建议。

代码的关键部分是

```
 var drilldown = this.drilldown;

            if (drilldown) { // drill down
               setChart(drilldown.name, drilldown.categories, drilldown.data, drilldown.color);
            } else { // restore
                 setChart(name, categories, data);

             } 
```

和 setChart()：

```
function setChart(name, categories, data) {
        chart.counters.color = 0;
        chart.xAxis[0].setCategories(categories);
        while (chart.series.length > 0){
            chart.series[0].remove(true);
        }
        for (var i = 0; i < data.length; i++) {
            chart.addSeries({
                name: name[i],
                data: data[i]
            });
        }
    } 
```

如何确定 this.drilldown 和 setChart() 的输入是使其正确的关键。

我试过的小提琴是：http: [//jsfiddle.net/dTkh4/2/](http://jsfiddle.net/dTkh4/2/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T02:49:02.407

答案在

```
var drilldown = this.drilldown;

if (drilldown) { // drill down
   setChart(drilldown.name, drilldown.categories, drilldown.data);

} else { // restore
   setChart([name1, name2, name3], categories1, [data1, data2, data3]);
} 
```

要使钻取视图显示 3 个拆分列，drilldown.name 和 Drilldown.data 需要是 3 个嵌套数组，并且每个子数组都有每个类别的值。对于还原部分，添加 name3 以在还原时显示 3 列而不是 2。

# hibernate - Hibernate 映射多对一复合键

> ID：13038768
> 
> 赞同：4
> 
> 时间：2012-10-23T20:31:31.123
> 
> 标签：hibernate, hibernate-mapping

我正在尝试映射具有多对一关系的复合键。 [这是我的 SQL Server 架构，带有标识 ID 字段。](http://i.stack.imgur.com/ZNPol.png)

以下是我的映射文件：

对于机构登录警报表：

```
<hibernate-mapping>
<class name="AgencyLoginAlert" table="AGENCY_ALERTS">
    <id name="agencyAlertsGID" type="integer">
        <column name="AGENCY_ALERTS_GID" />
        <generator class="identity" />
    </id>
    <property name="createdByName" type="string">
        <column name="CREATED_BY_NAME" length="30" />
    </property>
    <property name="creationDatetime" type="date">
        <column name="CREATION_DATETIME" />
    </property>
    <property name="lastUpdatedByName" type="string">
        <column name="LAST_UPDATED_BY_NAME" length="30" />
    </property>
    <property name="lastUpdatedDatetime" type="date">
        <column name="LAST_UPDATED_DATETIME" />
    </property>
    <property name="startDisplayDatetime" type="date">
        <column name="START_DISPLAY_DATETIME" />
    </property>
    <property name="endDisplayDatetime" type="date">
        <column name="END_DISPLAY_DATETIME" />
    </property>
    <property name="messageCategoryCode" type="string">
        <column name="MESSAGE_CATEGORY_CODE" length="6" />
    </property>
    <property name="messageTitle" type="string">
        <column name="MESSAGE_TITLE" length="250" />
    </property>
    <property name="messageStatusCode" type="string">
        <column name="MESSAGE_STATUS_CODE" length="10" />
    </property>
    <property name="messageBodyText" type="string">
        <column name="MESSAGE_BODY_TEXT" length="2048" />
    </property>

    <set name="agencyLoginAlertState" table="AGENCY_ALERT_STATE" inverse="true" lazy="true" fetch="select">
        <key>
            <column name="AGENCY_ALERTS_GID" not-null="true" />
        </key>
        <one-to-many class="AgencyLoginAlertState" />
    </set>
</class> 
```

对于机构登录警报状态表：

```
<hibernate-mapping>
<class name="AgencyLoginAlertState" table="AGENCY_ALERTS">
    <composite-id>
          <key-many-to-one name="agencyAlertsGID" class="AgencyLoginAlert">
                <column name="AGENCY_ALERTS_GID" />
          </key-many-to-one>
          <key-property name="stateCode" type="string">
              <column name="STATE_CODE" length="2" />
        </key-property>
    </composite-id>
    <many-to-one name="agencyLoginAlert" class="AgencyLoginAlert" fetch="select" insert="false" update="false">
        <column name="AGENCY_ALERTS_GID" not-null="true" />
    </many-to-one>
</class> 
```

我收到以下错误：

```
 org.hibernate.MappingException: Foreign key (FK416A6411D6548611:AGENCY_ALERTS
 [AGENCY_ALERTS_GID])) must have same number of columns as the referenced primary key 
(AGENCY_ALERTS [AGENCY_ALERTS_GID,STATE_CODE]) 
```

有什么建议么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T14:02:55.643

您的映射文件`AgencyLoginAlertState`引用了错误的表。它说：

```
<class name="AgencyLoginAlertState" table="AGENCY_ALERTS"> 
```

由于两个类都映射到同一个表，Hibernate 的映射器在该表的主键定义上发生冲突。根据您的数据库架构，该行应该是：

```
<class name="AgencyLoginAlertState" table="AGENCY_ALERT_STATE"> 
```

# c# - 在 WebMatrix 中单独获取发布的文件

> ID：13038772
> 
> 赞同：1
> 
> 时间：2012-10-23T20:31:49.210
> 
> 标签：c#, html, file, webmatrix

我在分隔用户可能发布到单独输入类型 =“文件”字段的文件时遇到问题。我试过了：

```
var UploadedPicture = Request.Files[0];
    if(Path.GetFileName(UploadedPicture.FileName) != String.Empty)
    {
        var ContentType = UploadedPicture.ContentType;
        var ContentLength = UploadedPicture.ContentLength;
        var InputStream = UploadedPicture.InputStream;
        Session["gMugshot"] = new byte[ContentLength];
        InputStream.Read((byte[])Session["gMugshot"], 0, ContentLength);
    }
    else
    {
        Session["gMugshot"] = new byte[0];
    } 
```

但这只会得到一个文件。我试过了

```
foreach (HttpPostedFile postedFile in Request.Files)
        {
            int contentLength = postedFile.ContentLength;
            string contentType = postedFile.ContentType;
            string fileName = postedFile.FileName;

            postedFile.SaveAs(@"c:\test\file" + index + ".tmp");
        } 

    } 
```

但这并没有将它们分开（另外，我不想保存文件，我只想将它存储在数据库中，但这部分没问题）。他们每个人都需要进入单独的数据库字段。我可以使用单个图像进行此操作，但不知道如何使用多个图像。如果可能的话，我想使用`input type="file"`字段而不是`FileUpload.GetHtml(initialNumberOfFiles:1, allowMoreFilesToBeAdded:false, includeFormTag:false)`助手。

是否可以通过输入元素的 ID 检索它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T08:23:41.623

当您将多个 input type=file 元素添加到页面时，上传的文件在 Request.Files 集合中可用。您可以在代码显示时对其进行迭代，并对集合中的每个文件执行您喜欢的任何操作：

```
if(Request.Files.Count > 0){
    foreach(var file in Request.Files){
        ...
    }
} 
```

如果您有不同的输入 type=file 用于特定目的，您可以通过提供 name 属性来识别它们：

```
<input type=file name="file1" />
<input type=file name="file2" />
<input type=file name="file3" /> 
```

name 属性中的值在[Request.Files.AllKeys](http://msdn.microsoft.com/en-us/library/system.web.httpfilecollection.allkeys.aspx)中可用，这是一个字符串数组，因此您可以通过索引引用每个项目，例如

```
if(IsPost && Request.Files.Count > 0){
    var file3 = Request.Files[Array.IndexOf(Request.Files.AllKeys, "file3")];
    if(file3.ContentLength > 0){
        //there is a file there
    }
} 
```

# c# - 如何在 C# 中读取/写入进程输入/输出

> ID：13038773
> 
> 赞同：1
> 
> 时间：2012-10-23T20:31:49.657
> 
> 标签：c#, .net, process, system.diagnostics

我有一个控制台应用程序，它提示我想通过 Windows 窗体应用程序的 System.Diagnostics.Process.Start() 方法从 C# 调用的各种信息，但我不能让它正常工作。作为一个简单的示例，假设我想通过 Windows 窗体应用程序捕获 FirstName 和 LastName，然后像这样动态地将它们传递给控制台应用程序：

1.  表单应用程序启动，用户键入名字和姓氏的值，然后单击按钮提交
2.  它为控制台应用程序调用 Process.Start
3.  控制台应用程序写出“输入您的名字”
4.  Forms 应用程序读取此提示，确定它需要使用它收集的 FirstName 值进行响应，并将其写入控制台应用程序的输出
5.  控制台应用程序接受输入并响应下一个提示“输入您的姓氏”
6.  Forms 应用程序读取此提示，确定它需要使用它收集的 LastName 值进行响应，并将其写入控制台应用程序的输出
7.  控制台应用程序现在拥有它需要的所有信息并继续其愉快的方式

感谢您的任何见解，这根本不是我与之合作过的领域

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T20:45:40.733

在 WinForms 应用程序中，您可以使用 Process.StandardOutput 属性返回的 StreamReader 从控制台应用程序读取输出，并使用 Process.StandardInput 属性返回的 StreamWriter 将输入写入控制台应用程序。

顺便说一句，您是否自己开发了控制台应用程序（或拥有项目文件）？如果是这样，我建议使用更好的 IPC 形式，例如使控制台应用程序成为 EXE 的 DLL，或者使用 WCF 或类似的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T20:46:06.457

看[`Process.StandardOutput`](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.standardoutput.aspx)和[`Process.StandardInput`](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.standardinput.aspx)和[`Process.StandardError`](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.standarderror.aspx)。

您需要从`Process.StandardOutput`. 当你读到“'输入你的名字””然后你写名字`Process.StandardInput`等等。

请注意，子进程也可以写入它`StandardError`，您可能需要在不同的线程中读取它，以便您可以同时从两者读取

在`Java`那里[`expect4j`](http://code.google.com/p/expect4j/)，这很容易。我很确定我在 .net 上看到了一些东西，但我现在无法找到它。

编辑：[Creating a Child Process with Redirected Input and Output](http://msdn.microsoft.com/en-us/library/ms682499%28v=vs.85%29.aspx)似乎是 MSDN 上关于此主题的一篇好文章

# css - CSS 滚动画廊不允许我添加链接

> ID：13038777
> 
> 赞同：0
> 
> 时间：2012-10-23T20:31:58.800
> 
> 标签：css, scroll

所以我在这里有这个滚动缩略图库：

[http://www.thewiredlife.net/kelseytest/testing.html](http://www.thewiredlife.net/kelseytest/testing.html)

它开始时很棒，但是一旦第一张图像通过，其余图像就会停止。这只发生在我添加到图像的链接时，这是需要的。

这只是一个测试文件，因此 CSS 不是外部的。太懒了呵呵。

有什么想法可以让它们不断滚动吗？

# python - Python 中的闭包和循环

> ID：13038779
> 
> 赞同：2
> 
> 时间：2012-10-23T20:32:27.920
> 
> 标签：python, closures

> **可能的重复：**
> [Python 中的词法闭包](https://stackoverflow.com/questions/233673/lexical-closures-in-python)

假设我有以下代码

```
callbacks = []
for i in range(10):
  callbacks.append(lambda x: i) 
```

中的所有函数都`callbacks`将返回`i`. 如何创建*在创建时返回 i 的当前值的*回调？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T20:34:59.000

```
for i in range(10):
  callbacks.append(lambda x = i : x) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T20:36:10.623

```
In [113]: callbacks=[]

In [114]: for i in range(10):
    callbacks.append(lambda x=i:x**2)
   .....:     
   .....:     

In [117]: callbacks[0]()
Out[117]: 0

In [118]: callbacks[1]()
Out[118]: 1

In [119]: callbacks[2]()
Out[119]: 4

In [120]: callbacks[4]()
Out[120]: 16 
```

# cloud - 在云中管理和调度 VM

> ID：13038782
> 
> 赞同：0
> 
> 时间：2012-10-23T20:32:39.117
> 
> 标签：cloud, virtual-machine, scheduling, opennebula

现在我要设计一个在云上运行的系统（几个虚拟机），具体来说，这个系统可以根据工作负载动态启动/停止虚拟机，并且可以调度分配给虚拟机的任务。最初使用命令行运行的任务，即 {./exec -input -output} 我在互联网上搜索了很多，但仍然感到困惑。所以我想问：

1.  有没有我可以使用的图书馆？最好是免费的。
2.  调度和管理的主节点在哪里？是我的机器（笔记本电脑）还是云上的某个虚拟机？
3.  机器如何相互通信？我应该设计协议，还是上面提到的库涵盖了它？
4.  我应该修改任务的输入和输出吗？或者任务可以在不进行任何修改的情况下移植？

我知道这个主题非常广泛，我应该自己阅读更多内容，但我非常感谢任何提示、方向和推荐读物。

# google-drive-api - 返回的最大ChangeId 不一致？

> ID：13038784
> 
> 赞同：1
> 
> 时间：2012-10-23T20:32:45.793
> 
> 标签：google-drive-api

我正在使用驱动器更改提要查找 Google Drive 中文件的更改。我一直在经历一些不一致。我刚刚使用此处找到的 API Explorer 进行了测试：

[https://developers.google.com/drive/v2/reference/changes/list](https://developers.google.com/drive/v2/reference/changes/list)

在一个用户上，返回的最大更改 ID 是 1208，尽管将 startChangeId 设置为 1208 时，请求返回了 6 个条目，包括 1208 的更改，并且每个更改都高于 1208。我还有标志 includeDeleted = true，includeSubscribed = false .

然后我尝试了另一个用户，返回的 ID 是 136023。当使用与上述相同参数的这个值时，Drive 返回了 0 个条目，这是我所期望的。

然后我尝试了第三个用户，返回的 ID 为 8267。然后使用与上述相同的参数再次设置调用 Drive 返回 1 个条目，其更改 ID 为 8267。

请注意，所有三个帐户都是测试域上的测试帐户，其中没有文档被修改或共享。

因此，三个用户三个结果进行了相同的调用。这是预期的还是更好的问题，在拨打这个电话时我应该期待什么。在文档中它声明：“更改 ID 以开始列出更改。（字符串）”。当它说 from 并且您返回最高 ID 时，我希望返回 0 个结果。

谢谢。

# javascript - 加载帖子后，wordpress运行脚本

> ID：13038785
> 
> 赞同：0
> 
> 时间：2012-10-23T20:32:47.650
> 
> 标签：javascript, jquery, wordpress

我有一个 wordpress 主题，它有一个动态元素，在加载帖子时由 javascrip(jquery)t 调整大小（单个帖子，而不是列表页面）

所以：

```
<div class='some-div'> 
```

```
<div class='content'>
<?php /* code to load posts */ ?>
</div> 
```

目前，我使用 javascript 获得了 div.content 的高度，并将该高度应用于另一个 div.some-div

问题是在慢速连接上，高度计算是在内容加载之前完成的

所以，我需要的是仅在帖子完成加载后才运行 javascript 函数

目前我正在延迟函数，将脚本放在页脚，并使用'defer'属性，但我仍然会发生

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T20:46:55.397

您为什么不尝试先将该 div 的内容保存到变量中，例如

```
var my_js_var = <?php echo $content ?> ; 
```

然后只说只有当存储到您的 div 中的内容等于您的“my_js_var”时才调用 resize div 函数

```
//Would be something like:
var my_content = <?php echo $content ?> ; //Downloading the content

//Timer to constantly check if the div is loaded correctly
var timer = window.setTimeout('refresh()',100)

function refresh () {
//if the content of your div is equal to 'my_content' variable
//then call the resize function of the div
//finally clear the timeout [clearTimeout(timer)] 
```

}

没有测试出来

告诉我它是否有效..

最好的祝福

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T04:46:17.827

您可以在 onload 事件中运行您的计算，以确保您帖子中的图像、文本等已完成加载。

```
<body onload="YourCalculationFunctionHere"> 
```

不要使用 jquery 的 .ready() 方法进行计算，因为它会在加载 DOM 后运行，而不是在加载页面（包括图像、文本等）后运行。

[http://www.w3schools.com/jsref/event_onload.asp](http://www.w3schools.com/jsref/event_onload.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T11:54:22.893

只是为了回答任何人有同样的问题。

我在 dom 加载之前运行了这个函数，一个简单的错误很容易解决。

采用

```
$(function(){
  // code here
}); 
```

作为简写`$(document).ready`

# objective-c - NSImageView 没有使用 ARC 释放

> ID：13038786
> 
> 赞同：2
> 
> 时间：2012-10-23T20:32:50.110
> 
> 标签：objective-c, macos, cocoa, nsimageview

我对 Cocoa 开发很陌生，我可能不太清楚 ARC 是如何工作的。

我的问题是，当我使用 NSImageView 时，它没有按我的意愿被释放，所以程序正在泄漏内存。

```
__block CMTime lastTime = CMTimeMake(-1, 1);
__block int count = 0;
[_imageGenerator generateCGImagesAsynchronouslyForTimes:stops
                                      completionHandler:^(CMTime requestedTime, CGImageRef image, CMTime actualTime,
                                                                AVAssetImageGeneratorResult result, NSError *error)
     {
         if (result == AVAssetImageGeneratorSucceeded)
         {
             if (CMTimeCompare(actualTime, lastTime) != 0)
             {
                 NSLog(@"new frame found");
                 lastTime = actualTime;
             }
             else
             {
                 NSLog(@"skipping");
                 return;
             }

             // place the image onto the view
             NSRect rect = CGRectMake((count+0.5) * 110, 100, 100, 100);

             // the problem is here!!! ImageView object gets allocated, but never released by the program even though I'm using ARC 

             NSImageView *imgV = [[NSImageView alloc] initWithFrame:rect];

             [imgV setImageScaling:NSScaleToFit];
             NSImage *myImage = [[NSImage alloc] initWithCGImage:image size:(NSSize){50.0,50.0}];
             [imgV setImage:myImage];
             [self.window.contentView addSubview: imgV];
         }

         if (result == AVAssetImageGeneratorFailed)
         {
             NSLog(@"Failed with error: %@", [error localizedDescription]);
         }
         if (result == AVAssetImageGeneratorCancelled)
         {
             NSLog(@"Canceled");
         }
         count++;
     }]; 
```

因此，当我再次返回此块以生成新图像并显示它们时，一切正常，除了我的程序内存使用量因创建的视图数量而增加。

如果有人可以帮助我，我将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T21:22:42.740

您的问题是，当您生成新的时，您不会删除您`subviews`的 - 确保您使用以下内容删除`subviews`之前的内容：

```
NSArray *viewsToRemove = [self.contentView subviews];
for (NSView *v in viewsToRemove) {
    [v removeFromSuperview];
} 
```

所以你的问题与实际的使用无关`ARC`。每次您创建一个`NSImageView`并将其添加到 contentView 时，您有责任在添加一系列新的之前删除它们。请注意，将这些视图添加到`contentView`将增加`ref count`1 并将它们从 contentView 中删除将使引用计数减少 1 导致系统释放这些视图的内存使用量（因为顺便说一句，没有其他东西可以保留您的视图）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T21:21:29.897

有问题的代码：

```
[self.window.contentView addSubview: imgV]; 
```

你已经分配了一个 NSImageView。并继续将其添加到视图中。您永远不会删除它，这意味着视图正在创建对同一对象的不同实例的许多引用，所有这些引用都分配了它们自己的一块内存。

**解决方案：**您需要跟踪视图，以确保以后可以将其删除。通常，我使用类扩展。

例如：

```
@interface ClassName() {
    NSImageView* m_imgV;
}
@end

....

// place the image onto the view
NSRect rect = CGRectMake((count+0.5) * 110, 100, 100, 100);

if (m_imgV) {
    [m_imgV removeFromSuperView];
}
m_imgV = [[NSImageView alloc] initWithFrame:rect];

[m_imgV setImageScaling:NSScaleToFit];
NSImage *myImage = [[NSImage alloc] initWithCGImage:image size:(NSSize){50.0,50.0}];
[m_imgV setImage:myImage];
[self.window.contentView addSubview:m_imgV]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T01:01:20.810

我整天都在与这个问题作斗争，终于找到了方法。出于某种原因，程序希望我添加一个完整的函数，如下所示：

```
// remove all the view from the superview
// and clean up a garbage array
-(void) killAllViews
{
   for (NSImageView *iv in _viewsToRemove)
   {
      [iv removeFromSuperview];
   }
   [_viewsToRemove removeAllObjects]; // clean out the array
} 
```

其中 _viewsToRemove 是一个 NSImageViews 数组，每次我的块生成新图像并将它们添加到视图时，我都会填充它。

仍然不明白为什么只是将我的 killAllViews 方法中的纯代码添加到程序中的某个地方不能解决问题。现在我基本上也在做同样的事情，只是调用这个方法。

# wix - WiX / MSI 引用来自 C++ 中的自定义操作的文件

> ID：13038788
> 
> 赞同：0
> 
> 时间：2012-10-23T20:32:52.440
> 
> 标签：wix, windows-installer, custom-action

有没有办法引用在 wix 代码上声明的文件，例如：

```
<DirectoryRef Id="MAIN_INSTALLLOCATION">
      <Component Id="CMP_config_system" Guid="a430710e-a95b-48d7-acbe-3bf4e6b2c8fc">
        <File Id="FILE_config_system" KeyPath="yes" Source="config_system.ini"/>
      </Component>
</DirectoryRef> 
```

例如，在用 C++ 编码的自定义操作中（见问号）

```
UINT __stdcall entryPoint(MSIHANDLE hInstall)
{
   //...
   LPWSTR filePath = NULL;
   hr = WcaGetProperty(???, &filePath);
   //...
} 
```

那么这种方式可以根据不同的内容打开和编辑该文件吗？

**编辑与@NC1 公开的相同方法，但使用 WiX API**

```
// ...
const std::wstring APPDATA_DIR     = L"AppDataDir";
const std::wstring CONFIG_SYSTEM   = L"config_system.ini";

LPWSTR path = NULL;
hr = WcaGetProperty(APPDATA_DIR.c_str(), &path);
ExitOnFailure(hr, "Failed to get Path");

config_system_path = std::wstring(path) + CONFIG_SYSTEM;
//... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T08:35:16.733

我就是这样做的。我的自定义操作是在安装文件之后安排的，所以我得到了安装它的目录并附加了我想编辑的文件（对我来说是文本文件），不确定这是否是唯一的方法，但它对我有用。

```
HRESULT hr = S_OK;
UINT er = ERROR_SUCCESS;
char szLocation[MAX_PATH];
LPWSTR szInstallLocation = NULL;
CString lpszString;

hr = WcaInitialize(hInstall, "NAMEOFCUSTOMACTION");
ExitOnFailure(hr, "Failed to initialize");

WcaLog(LOGMSG_STANDARD, "Initialized.");

hr = WcaGetProperty(L"MAIN_INSTALLLOCATION",&szInstallLocation);
ExitOnFailure(hr, "failed to get install location");

wcstombs(szLocation, szInstallLocation, 260);
strcat(szLocation, "\config_system.ini"); 
```

然后哪里`szLocation`会有完整的路径。希望这可以帮助

# javascript - Asp.net 开发和客户端操作集成

> ID：13038789
> 
> 赞同：3
> 
> 时间：2012-10-23T20:32:53.197
> 
> 标签：javascript, asp.net, web-applications, frameworks, client-side

我一直在使用 prado 框架很短的时间。在某些项目中，我可能需要在 Microsoft 的 Web 工具平台上进行开发。我可以像在 prado 中那样轻松地将我熟悉的 javascript（原型、jquery 或其他）与 ASP.Net 集成吗？或者是否有针对 Web 浏览器客户端操作的 Microsoft 特定解决方案？我开发涉及大量填充输入表单的数据库应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T20:53:09.580

虽然可以使用 ASP.NET 的许多内置功能来处理客户端行为，但当然不建议这样做。

因此，使用现有脚本将是处理这种情况的首选方法。

显然，您可能需要进行一些更改，但如果您可以让 ASP.NET 呈现您现在拥有的相同标记，那么这些更改应该是最小的，甚至不存在。

# cloud-foundry - Chef 用于将服务部署到 Cloud Foundry 中？

> ID：13038791
> 
> 赞同：0
> 
> 时间：2012-10-23T20:33:05.863
> 
> 标签：cloud-foundry

与 Cloud Foundry 的部署方式无关？这是我们在新的 cloudfoundry 安装中查看诸如[此](https://github.com/cloudfoundry-collaboration/vcap-services/wiki/How-to-add-a-system-service-to-Cloud-Foundry---step-by-step-guide)指南和目录内容之类的指南的印象。`.../cloudfoundry/vcap/dev_setup/cookbooks`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T13:35:59.110

是的，Chef 广泛用于创建 VCAP 部署。

# php - 使用目标属性将表单发布到 php 脚本到 iframe

> ID：13038796
> 
> 赞同：1
> 
> 时间：2012-10-23T20:33:09.913
> 
> 标签：php, html, forms, iframe

我正在处理一个 php/HTML Web 项目，并且我有一个包含输入类型文件的表单，该文件应该发布到 PHP 脚本以将图像上传到服务器。在表单标记中，我使用 target 属性来定位 iframe，以便它可以模拟 AJAX 样式的帖子，即它发布到 iframe，因此 iframe 无需刷新主页即可完成工作。

下面是我正在使用的表格。

```
 <form method="post" action="phpHandler/image-uploader.php" target="image_upload_frame">
<table>
    <tr>
       <td>
          Image Title:
       </td>
       <td>
         <input type="text" id="txtImageTitle" name="txtImageTitle" />
      </td>
   </tr>
   <tr>
     <td>
         Image File:
     </td>
     <td>
         <input type="file" id="txtImageFile" name="txtImageFile" />
     </td>
   </tr>
</table> 
```

下面是iframe

```
<iframe id="image_upload_frame" name="image_upload_frame"></iframe> 
```

下面是表单应该发布到的 PHP 脚本。

```
echo "posting";
    $title = $_POST['txtImageTitle'];
    $tempName = $_FILES['txtImageFile']['name'];

    writeToLog("Image Title:" . $title);
    writeToLog("Temp Name: $tempName\n");

    $data = var_export($_POST, true);
    $fileData = var_export($_FILES, true);

    writeToLog($data);
    writeToLog($fileData);

    function writeToLog($message)
    {
        $fh = fopen('log.txt', 'a');
        fwrite($fh, $message);
        fclose($fh);
    } 
```

PHP 脚本正在执行，但 $_FILES 和 $_POST 数组为空。

我尝试将 iframe 更改为包含指向 php 脚本的 src 属性，并从表单中删除了该操作，但这似乎甚至没有执行 PHP 脚本。

感谢您的任何帮助，您可以提供。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T20:37:54.387

添加

```
enctype="multipart/form-data" 
```

到

```
 <form method="post" action="phpHandler/image-uploader.php" target="image_upload_frame"> 
```

# php - 使用 SOAP 客户端从 PHP 在 Dynamics CRM 上创建用户帐户

> ID：13038797
> 
> 赞同：0
> 
> 时间：2012-10-23T20:33:11.183
> 
> 标签：php, soap, dynamics-crm, dynamics-crm-4

我正在编写一个 PHP 代码，它将使用 SOAP 客户端在 Microsoft Dynamics CRM 4 API 上创建一个用户帐户。在 API 的字段集中，必填字段中有多种类型的字段（字符串、布尔值、查找和选择列表）。所以我正在发送带有这些字段值的请求。除类型为“picklist”的字段外，所有字段均由 CRM 服务器处理。他们来到服务器空白。我不知道为什么。请在语法等方面提供帮助，以在 CRM 上创建包含选项列表类型字段的用户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T08:53:55.453

设置属性时是否使用 Picklist 类？

例如（取自[微软论坛](http://social.microsoft.com/Forums/en/crmdevelopment/thread/3b531c4c-ba86-4298-baa8-6698047232a1)）：

```
DynamicEntity entity = new DynamicEntitty("name of your entity");
entity["picklist field"] = new Picklist(<integer value of picklist>); 
```

# webview - WebView.InvokeScript 总是返回空字符串

> ID：13038804
> 
> 赞同：2
> 
> 时间：2012-10-23T20:33:23.267
> 
> 标签：webview, windows-8

我遇到了 WebView 控件的问题。我正在开发 Windows 8 Metro Style 应用程序，我试图在 WebView 的内容中调用脚本，但它总是返回空字符串。

我也尝试将其设为 "WebView.InvokeScript("eval", new string[] { "document.getElementById('contentDiv').offsetHeight" }) 但它的工作原理相同 - 空字符串。我真的没有猜到这里出了什么问题。

```
public void Sethtml(string html) {
            var toSet = string.Format(Style, html);
            wv.LoadCompleted += wv_LoadCompleted;
            wv.NavigateToString(toSet);

        }

void wv_LoadCompleted(object sender, Windows.UI.Xaml.Navigation.NavigationEventArgs e)
        {
            WebView wv = sender as WebView;
            string height = wv.InvokeScript("heightFun", new string[0]); 
        }
 public static readonly string Style = @"<!DOCTYPE html>
                                               <html>
                                               <head>
                                               <title></title>
                                               <style>
                                               body {{
                                               font-family: Segoe UI; 
                                               }}
                                               </style>
                                               <script type='text/javascript'>
                                                var heightFun = function() {{ 
                                                   return document.getElementById('contentDiv').offsetHeight;
                                                }}
                                               </script>
                                               </head>

                                               <body>
                                                   <div id='contentDiv'>
                                                       {0}
                                                   </div>
                                               </body>"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-30T17:53:06.023

刚刚通过上一个答案的提示解决了这个问题。

确保您的返回值是一个字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T08:32:54.087

您必须使用`window.external.notify`来发回一个值。请参阅论坛帖子： [http ://social.msdn.microsoft.com/Forums/en-US/winappswithnativecode/thread/ac390a6a-d4ad-408c-8b13-93f9694cbabe](http://social.msdn.microsoft.com/Forums/en-US/winappswithnativecode/thread/ac390a6a-d4ad-408c-8b13-93f9694cbabe)

# wordpress - wordpress 网站上的静态 PHP 应用程序目录

> ID：13038807
> 
> 赞同：0
> 
> 时间：2012-10-23T20:33:30.193
> 
> 标签：wordpress

我在 wordpress 网站上设置包含 php 文件的目录时遇到问题。

我了解如何使用模板来包含自定义 php 文件，但我想要做的是访问 php 文件，就好像没有安装 wordpress 一样。现在，当我创建一个新目录（dir1）并将 index.php 文件放在该文件夹中时，然后尝试通过转到 www.test.com/dir1 进行查看，它会显示一个项目符号列表，其中包含指向标题、背景和更新的链接在底部带有用于搜索网站的文本输入。

我不确定这是否需要在我的 cPanel 中配置，或者它是否是 wordpress 设置，或者即使它是 htaccess 问题。

请帮我弄清楚我需要做什么，或者至少帮我把我想做的事情用语言表达出来。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T00:51:32.217

通常安装在根目录中的 Wordpress 对放入非 wp 目录的任何内容都没有影响。您可以从根文件夹粘贴您的 .htaccess 文件吗？你的 /dir1/ 有任何 .htaccess 吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T19:22:56.817

呸，我想通了。

每当我将 FTP 文件上传到我的服务器上时，它都会使所有者/组成为“root”

在我使用 WinSCP 更改我的用户以匹配每个网站后，它运行良好。

cPanel 很痛苦。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T04:10:30.547

Wordpress 与现有文件夹/文件无关。以下是您可以尝试的一些步骤。

1.  确保您的**/dir1 没有 .htaccess**，或者**如果您有并且需要它，请继续执行后续步骤。**
2.  在.htaccess 文件**的重写引擎**中添加一些内容。您可以添加如下内容：

RewriteCond %{REQUEST_FILENAME} !-d**和/或**RewriteCond %{REQUEST_FILENAME} !-d

**或者**

RewriteCond %{HTTP_HOST} !dir1

我希望这有帮助。

# python - 我的字典有什么问题吗？

> ID：13038810
> 
> 赞同：0
> 
> 时间：2012-10-23T20:33:33.383
> 
> 标签：python

我正在运行以下代码来计算一个单词在文本文件中出现的次数。

```
def print_words(filename):
    f = open(filename, 'rU')
    dict={}
    for line in f:
       words=line.split()
       for word in words:
          if dict.get(word):
              dict[word]=dict[word]+1
          else: 
              dict[word]=1
    ke = sorted(dict.keys())
    for k, v in ke: print k, v 
```

字典文件应该包含每个单词及其计数。我能够让它正常工作。但我没有排序

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T20:48:29.187

其他答案指出了问题所在。如果您使用的是 python 2.7+，这是一种更简单的方法，使用模块中的[`Counter`](http://docs.python.org/library/collections.html#collections.Counter)类`collections`。

```
from collections import Counter

def print_words(filename):
    with open(filename, 'rU') as f:
        counts = Counter(f.read().split())
    for k, v in sorted(counts.items()):
        print k, v 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T20:36:39.547

代替

```
ke = sorted(dict.keys())
for k, v in ke: print k, v 
```

尝试：

```
for k in sorted(dict.keys()):
    print k, dict[k] 
```

`sorted(dict.keys())`将返回仅包含键的排序列表（因为这就是您提供的全部内容）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T20:36:42.540

`sorted(dict.keys())`返回仅包含键的排序列表。您的 for 循环错误地期望在同一列表中找到值。请尝试以下代码：

```
for k in ke:
    print k, dict[k] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-23T21:42:49.770

对于 2.5 和 2.6 兼容的解决方案，请使用[`defaultdict`](http://docs.python.org/release/2.6.8/library/collections.html#collections.defaultdict)：

```
from collections import defaultdict
counter = defaultdict(int)

for word in f.read().split():
    counter[word] += 1 
```

这将返回一个字典（实际上是一个子类，但使用方式相同），您可以在其中查找`counter['someword']`（返回一个整数）。

工作原理：如果请求的键不存在，则使用给定函数的返回值创建它。在这种情况下，`int()`，即`0`。另请参阅上面链接的文档中的示例部分。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-23T21:07:14.817

根据更重要的内容 - 顺序或计数 - 您可以使用[集合模块](http://docs.python.org/library/collections.html)中的[有序字典](http://docs.python.org/library/collections.html#collections.OrderedDict)或[计数器字典](http://docs.python.org/library/collections.html#collections.Counter)

OrderedDict 按照添加顺序记住元素；Counter - 计算元素

对于前者，你可以做类似的事情

```
>>> words = open(filename).read().split()
>>> counters = OrderedDict([(word, words.count(word)) 
                            for word in sorted(list(set(words)))]) 
```

您将获得带有计数器的排序字典 - 只需 2 行。

# shell - 用于解锁 PGP 文件的 Linux / Windows Shell 脚本

> ID：13038811
> 
> 赞同：0
> 
> 时间：2012-10-23T20:33:34.513
> 
> 标签：shell, dos, windows-shell, pgp, openpgp

我有一系列从 FTP 服务器下载 PGP 文件的脚本。然后我使用 PGPKeys 使用私钥解压缩这些文件。然后，一个 SQL Server 作业会提取解压缩的文件，该作业会将数据附加到我们的数据库中。我想自动化整个过程。是否有使用 shell 脚本（Linux 或 Windows）解压缩 PGP 锁定文件的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T21:37:12.473

这是一项完美的自动化任务，我可以在 Linux 中为您提供帮助。

首先，您可以使用[wget](http://www.gnu.org/software/wget/ "wget")下载文件

```
wget ftp://website.com/yourpgparchive.zip 
```

如果您的 ftp 网站需要经过身份验证的访问，请使用

```
wget --ftp-user=USER --ftp-password=PASSWORD ftp://ftp.site/archive.zip.pgp 
```

然后你需要[gpg](http://www.gnupg.org/documentation/manpage.en.html "gpg")（开源 PGP 实现）来解密文件

```
gpg -o file.zip -d file.zip.gpg 
```

（如果您需要有关如何导入密钥并开始使用 gpg 的建议，请[点击此处](http://irtfweb.ifa.hawaii.edu/~lockhart/gpg/gpg-cs.html "这里")）

然后你可以解压文件

```
unzip file.zip 
```

您可能需要安装*gnupg*并从包管理器中*解压缩。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T21:15:59.960

是的，[**GPG**](http://www.gnupg.org/documentation/manpage.en.html)。在您的情况下，它只是`gpg -d filename`（或只是`gpg -d`从标准输入读取）。

而且，您可能想说的是*解密*而不是*解压缩*和*加密*而不是*锁定*。

# java - 使用 Java Swing 的管道连接器

> ID：13038812
> 
> 赞同：3
> 
> 时间：2012-10-23T20:33:41.580
> 
> 标签：java, swing, pipe

如何使用 Java Swing 实现管道连接器，如 Yahoo 管道。或者 Java Swing 中的任何其他类型的接线，就此而言。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T20:47:12.167

下面是一个在 java中使用`PipedReader`and的例子：`PipedWriter`

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.PipedReader;
import java.io.PipedWriter;
/**
 * @date 1st May, 2011
 * @author sanju.org
 *
 * To demonstrate the use of piped character streams.
 * Example program for piped character stream in java.
 *
 */

public class PipedReaderExample {

    public static void main(String args[]) throws IOException{
        PipedReader reader = new PipedReader();
        PipedWriter writer = new PipedWriter(reader);
        Thread readerThread = new Thread(new ReaderThread(writer));
        Thread writerThread = new Thread(new WriterThread(reader));
        readerThread.start();
        writerThread.start();
    }

}

class ReaderThread implements Runnable{
    PipedWriter writer;
    public ReaderThread(PipedWriter writer){
        this.writer = writer;
    }

    public void run() {
        InputStreamReader streamReader = new InputStreamReader(System.in);
        BufferedReader bufferedReader = new BufferedReader(streamReader);
        try {
            while (true) {
                //sample implementation reading from console
                //real implementation can be reading from a socket or a file
                //or from server side code
                String line = bufferedReader.readLine();
                writer.write(line);
            }
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
}

class WriterThread implements Runnable{
    PipedReader reader;
    public WriterThread(PipedReader reader){
        this.reader = reader;
    }

    public void run() {
        while(true){
            try {
                char c;
                while( (c = (char)reader.read()) != -1){
                    //write your business logic here
                    //could be writing into a file
                    //could be processing the date
                    System.out.println(c);
                }

            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    }
} 
```

至于在`PipedReader/Writer`课堂上使用雅虎，我猜你会阅读他们的 API 来连接到 url 等

以下是与`PipedReader`和`PipedWriter`（教程和信息的组合）相关的其他链接列表，可能会有所帮助：

*   [Java IO：管道](http://tutorials.jenkov.com/java-io/pipes.html)
*   [Java IO：管道读取器](http://tutorials.jenkov.com/java-io/pipedreader.html)
*   [PipedReader PipedWriter 示例](http://examples.javacodegeeks.com/core-java/io/file/pipedreader-pipedwriter-example)（JavaCodeGeeks 示例）
*   [PipedReader 和 PipedWriter 和线程](http://www.java2s.com/Code/Java/File-Input-Output/PipedReaderandPipedWriterandthread.htm)（Java2s 示例）

至于 Swing 方面，要显示从管道接收到的数据，您需要使用`TextComponent`其中一个：

*   [如何使用文本区域](http://docs.oracle.com/javase/tutorial/uiswing/components/textarea.html)
*   [如何使用编辑器窗格和文本窗格](http://docs.oracle.com/javase/tutorial/uiswing/components/editorpane.html)

每个都有一个`setText(...)`允许您设置其内容的

**参考：**

*   [http://cleanjava.wordpress.com/2011/05/01/use-of-pipedreader-and-pipedwriter-in-java/](http://cleanjava.wordpress.com/2011/05/01/use-of-pipedreader-and-pipedwriter-in-java/)

# git - 本地克隆对 Git 有何影响？

> ID：13038819
> 
> 赞同：5
> 
> 时间：2012-10-23T20:34:22.260
> 
> 标签：git

Git 假设`-l`何时从本地文件系统请求克隆，可能是为了加快克隆速度并节省磁盘空间。这种克隆的含义是什么？如果我克隆一个存储库两次，然后对其中一个进行提交，那么更改是否会在另一个克隆中可见？我想知道Git是否小心复制写入。如果原始存储库是只读的，那么这会给克隆带来问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T20:39:18.637

联机帮助页`git clone`指出：`-l`

> 当要克隆的存储库位于本地计算机上时，此标志绕过正常的“git 感知”传输机制，并通过复制 HEAD 以及 objects 和 refs 目录下的所有内容来克隆存储库。.git/objects/ 目录下的文件被硬链接以尽可能节省空间。

这意味着您将获得所有 Git 对象的硬链接，这没有任何实际意义，因为这些对象无论如何都是不可变的，而且一旦创建，Git 就不会更新它们。您还可以获得实际副本`HEAD`和其他符号引用，因此在一个存储库中对它们的更改将*不会*在其他存储库中看到。如果您提交更改，则会在下面创建一些*新*`.git/objects`对象，并且`HEAD`引用将更新为指向最新提交（这将是新创建的对象之一）；不会更新现有对象，因此您不必担心硬链接。

手册页说明了一个含义，这可能很有趣：

> 要强制复制而不是硬链接（如果您尝试备份存储库，这可能是可取的），但仍然避免通常的“git 感知”传输机制，可以使用 --no-hardlinks。

硬链接的缺点是它们引用磁盘上相同的实际 inode，因此如果一个 Git 对象损坏，则硬链接到它的所有本地克隆都将具有损坏的对象。如果没有硬链接，您将拥有所有对象的实际备份副本。

# jruby - 鉴于内存充足，JRuby 1.7.0 不会安装 bundler

> ID：13038820
> 
> 赞同：2
> 
> 时间：2012-10-23T20:34:27.410
> 
> 标签：jruby, jrubyonrails

我安装了jruby

```
rvm install jruby-1.7.0 
```

当它尝试创建 gemsets 时内存不足，所以我开始尝试使用新版本安装 bundler，这就是我得到的

```
~>gem install bundler
Error: Your application used more stack memory than the safety cap of 2048K.
Specify -J-Xss####k to increase it (#### = cap size in KB).
Specify -w for full StackOverflowError stack trace 
```

所以我向上移动了内存，但我仍然什么都没有，有一大块内存

```
~>JRUBY_OPTS=-J-Xss1024m gem install bundler
Error: Your application used more stack memory than the safety cap of 1024M.
Specify -J-Xss####k to increase it (#### = cap size in KB).
Specify -w for full StackOverflowError stack trace 
```

这还不够，我运行的应用程序还不够

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-24T22:57:04.667

```
rvm get 1.15.11
rvm reinstall jruby-head 
```

这似乎是一个 rvm 问题： [http](http://jira.codehaus.org/browse/JRUBY-6948) ://jira.codehaus.org/browse/JRUBY-6948和[https://github.com/jruby/jruby/issues/331#issuecomment-9120273](https://github.com/jruby/jruby/issues/331#issuecomment-9120273)

# ruby-on-rails - rails - jasmine - “注意：Gem.available？已弃用，请使用 Specification::find_by_name。”

> ID：13038822
> 
> 赞同：0
> 
> 时间：2012-10-23T20:34:35.530
> 
> 标签：ruby-on-rails, ruby, jasmine

我刚开始使用 Jasmine。

安装后，我们现在在我们的测试套件中得到它：

```
NOTE: Gem.available? is deprecated, use Specification::find_by_name.  
It will be removed on or after 2011-11-01\.  
Gem.available? called from /home/durrantm/.rvm/gems/ruby-1.9.3-p194@dmstaffing/
gems/jasmine-1.0.2.1/lib/jasmine/base.rb:64. 
```

我不确定消息来自哪里，或者我会改变什么来修复它并删除警告？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T21:12:14.417

您似乎正在使用旧版本的 Jasmine gem，它正在调用现已弃用的`.available?`方法。Jasmine 1.2.1 是最新的稳定 gem 版本。您似乎也没有使用 Bundler，因此请确保使用命令切换到您当前用于项目的 gemset（看起来像是 dmstaffing）`rvm 1.9.3-p194@dmstaffing`，然后运行`gem install jasmine -v '1.2.1'`。我建议在 gemsets 上使用 Bundler，因为我发现它更动态且易于更改。如果您想使用 bundler 来管理您的依赖项，请确保已安装它，然后在您的项目目录中创建一个 Gemfile。如果您想从 ruby​​gems.org 获取您的宝石，请确保您拥有：

```
source "http://rubygems.org" 
```

然后在 Gemfile 的开头明确指定您希望使用的最新 gem 版本：

```
gem "jasmine", "~> 1.2.1" 
```

或者从 Jasmine 源代码中获取当前稳定的 gem：

```
gem "jasmine", :git => "git://github.com/pivotal/jasmine.git", :branch => "1.2.rc1" 
```

或者如果你觉得勇敢，你可以随时抓住开发分支：

```
gem "jasmine", :git => "git://github.com/pivotal/jasmine.git", :branch => "master" 
```

然后运行`bundle install`。当前版本的 Jasmine 不再包含导致问题的代码，因此不应再发出警告。始终指定您的 gem 版本以避免以后出现依赖性问题是一个很好的做法。

# c# - 如何在asp.net下异步运行持久的进程？

> ID：13038823
> 
> 赞同：7
> 
> 时间：2012-10-23T20:34:36.743
> 
> 标签：c#, asp.net, .net, long-running-processes

.net 4.5，asp.net mvc：从 ASP.NET 应用程序运行持久进程（1-2 分钟）的最佳方法是什么，因为它应该在单线程环境中运行，我的意思是该进程是为一次只有一个用户，所有其他用户的执行必须等到当前执行完成？场景如下：用户单击运行某种持久计算的按钮，http响应立即返回给用户，然后用户必须手动请求计算的状态与单独的请求。Asp.net http 会话中止不应该导致进程终止，它应该继续下去。该进程可能在相同或不同的服务器上运行。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-06-09T07:31:37.027

我将向您展示如何使用[http://hangfire.io](http://hangfire.io)执行此任务- 在 ASP.NET 应用程序中执行即发即弃、延迟和重复任务的非常简单的方法。无需 Windows 服务。

首先，通过 NuGet 安装包。如果您有任何问题，请参阅官方文档中的[快速入门](http://docs.hangfire.io/en/latest/quick-start.html)指南。

```
PM> Install-Package Hangfire 
```

打开您的 OWIN Startup 类并添加以下行：

```
public void Configure(IAppBuilder app)
{
    GlobalConfiguration.Configuration.UseSqlServerStorage("connection_string");

    app.UseHangfireDashboard();
    app.UseHangfireServer();
} 
```

然后编写将执行长时间工作的方法（我应用属性一次只执行一个方法）：

```
[DisableConcurrentExecution]
public void LongRunning()
{
    // Some processing stuff
} 
```

然后在后台调用一个方法作为即发即弃立即响应用户：

```
public ActionResult Perform()
{
    BackgroundJob.Enqueue(() => LongRunning());
    return View();
} 
```

如果您想通知用户作业完成，请考虑使用 SignalR 并`LongRunning`相应地附加该方法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-06-06T04:45:15.620

.Net 4.5.2 添加了可用于安排任务的[QueueBackgroundWorkItem 。](http://msdn.microsoft.com/en-us/library/system.web.hosting.hostingenvironment.queuebackgroundworkitem.aspx)如果您不控制服务器（重新启动时），appPool 关闭的 90 秒默认延迟将不起作用（除非您可以检测到任务未完成并在另一台服务器上运行它）。有关更多详细信息，请参阅“ [QueueBackgroundWorkItem 以在 ASP.NET 中可靠地调度和运行后台进程](http://bit.ly/1kCCHYd)”

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-23T20:44:12.493

我建议使用[NServiceBus](http://nservicebus.com/)之类的产品来卸载处理并以单线程模式运行它。这样做的好处是所有请求都将按顺序处理，并且可以从 Web 服务器卸载处理，因为您真的不希望在 Web 服务器上发生长时间运行的进程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-11-12T22:06:40.580

如果您控制服务器，并且需要像 Hangfire 这样的完整框架更简单，您可以制作控制台应用程序（.exe），并制作任何东西......然后您可以使用[Process.Start](https://docs.microsoft.com/en-us/dotnet/api/system.diagnostics.process.start?view=netframework-4.7.2)方法调用 .exe，您可以从 SQL Server 调用 .exe 到服务等。

# oracle - 将 SQL*Plus 配置为只返回数据

> ID：13038825
> 
> 赞同：4
> 
> 时间：2012-10-23T20:34:52.843
> 
> 标签：oracle, shell, unix, plsql, sqlplus

我需要编写一个简单的 shell 函数，从 Oracle DB 中返回单个字段。把它想象成例子`SELECT 'ABC' FROM dual;`，ABC就是我所追求的。

这是我的功能：

```
function getSomeOraVal
{
sqlplus $USER/$PASSWD@$ORADB<<!!

SET sqlprompt '' 
SET sqlnumber off 

SET verify off
SET pages 0
SET echo off
SET head on
SET feedback off
SET feed off
SET serveroutput on
SET escape '\'

VARIABLE  v_someVal VARCHAR2(30);

BEGIN
SELECT 'ABC' INTO v_someVal FROM dual;
END;
/

SELECT :v_someVal FROM dual;

!!
} 
```

但是，我想将 sqlplus 输出（仅数据 -> 'ABC'）通过管道传输到一个 shell 变量中，然后该函数返回该变量并可以从其他 shell 脚本中调用。不幸的是，sqlplus 返回一大堆垃圾，例如顶部的“Welcome to Oracle”和底部的“Disconnected...”。

如何从 SQL 结果集中提取数据，或者在这种情况下提取单个值并将其传递给 UNIX 变量，以便在 shell 中进行进一步操作？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T20:54:25.877

在这个 askTom 线程中有几种不同的方法[将值从 SQL*Plus 返回到 shell 脚本](http://asktom.oracle.com/pls/asktom/f?p=100:11:0%3a%3a%3a%3aP11_QUESTION_ID:430819636473)。

一种常见的方法是除了要返回的值之外选择一个常量标记（在 Tom 的示例中，即字符串“KEEP”），然后使用 sed（或您最喜欢的命令行解析器）来提取数据'实际上对

```
#!/bin/ksh

x=`sqlplus / <<endl | grep KEEP | sed 's/KEEP//;s/[   ]//g'
select 'KEEP' , max(sal) from emp;
exit
endl`

echo the answer is $x 
```

该线程还讨论了 其他方法，例如允许您[读取多行输出的方法。](http://asktom.oracle.com/pls/asktom/f?p=100:11:0%3a%3a%3a%3aP11_QUESTION_ID:430819636473#43031707677401)

如果您不希望打印标题，则应指定

```
set head off 
```

在您的 SQL*Plus 脚本中 - 如果您不想要标题，我不确定您为什么要在脚本中显式设置标题...您想保留标题的某些部分吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-06T13:39:44.950

根据贾斯汀的回答（这很好），当您只需要选择一个数字（或令牌）时，我认为这个版本更短但更易读：

```
x=`sqlplus -S / <<< "select 'KEEP' , max(sal) from emp;" | awk '/KEEP/{print $2}'` 
```

# php - 无法访问图像 symfony 500error 如何解决？

> ID：13038828
> 
> 赞同：0
> 
> 时间：2012-10-23T20:34:59.390
> 
> 标签：php, symfony1

我的 symfony 丢弃 500 错误，因为我无法访问图像，但为什么呢？我该如何解决？

就是这样：`http://localhost/testing/callgirl/web/images/signs-icons/bullet-list-square.png` 但我可以在我的本地主机上找到它，但它会丢弃 500 错误，因为它不能......

问题是什么？

```
500 | Internal Server Error | ErrorException
Cannot access image.

stack trace
at ()
in SF_ROOT_DIR\apps\frontend\lib\ImageFile.class.php line 27 ...
at ImageFile->__construct('http://localhost/testing/callgirl/web/images/signs-icons/bullet-list-square.png')
in SF_ROOT_DIR\apps\frontend\lib\ImageManager.class.php line 150 ...
at ImageManager::loadStockImage('signs-icons/bullet-list-square.png')
in SF_ROOT_DIR\apps\frontend\lib\helper\ImageHelper.php line 123 ...
at stock_img_tag('signs-icons/bullet-list-square.png')
in SF_ROOT_DIR\apps\frontend\modules\userEntry\templates\signUpSuccess.php line 80 ...
at require('D:\xampplite\htdocs\testing\callgirl\apps\frontend\modules\userEntry\templates\signUpSuccess.php')
in SF_ROOT_DIR\lib\vendor\lib\view\sfPHPView.class.php line 75 ...
at sfPHPView->renderFile('D:\xampplite\htdocs\testing\callgirl\apps\frontend\modules/userEntry/templates/signUpSuccess.php')
in SF_ROOT_DIR\lib\vendor\lib\view\sfPHPView.class.php line 185 ...
at sfPHPView->render()
in SF_ROOT_DIR\lib\vendor\lib\filter\sfExecutionFilter.class.php line 155 ...
at sfExecutionFilter->executeView('userEntry', 'signUp', 'Success', array('values' => array()))
in SF_ROOT_DIR\lib\vendor\lib\filter\sfExecutionFilter.class.php line 116 ...
at sfExecutionFilter->handleView(object('sfFilterChain'), object('userEntryActions'), 'Success')
in SF_ROOT_DIR\lib\vendor\lib\filter\sfExecutionFilter.class.php line 47 ...
at sfExecutionFilter->execute(object('sfFilterChain'))
in SF_ROOT_DIR\lib\vendor\lib\filter\sfFilterChain.class.php line 53 ...
at sfFilterChain->execute()
in SF_ROOT_DIR\apps\frontend\lib\callgirlFirstViewFilter.class.php line 58 ...
at callgirlFirstViewFilter->execute(object('sfFilterChain'))
in SF_ROOT_DIR\lib\vendor\lib\filter\sfFilterChain.class.php line 53 ...
at sfFilterChain->execute()
in SF_ROOT_DIR\lib\vendor\lib\filter\sfRenderingFilter.class.php line 33 ...
at sfRenderingFilter->execute(object('sfFilterChain'))
in SF_ROOT_DIR\lib\vendor\lib\filter\sfFilterChain.class.php line 53 ...
at sfFilterChain->execute()
in SF_ROOT_DIR\lib\vendor\lib\controller\sfController.class.php line 238 ...
at sfController->forward('userEntry', 'signUp')
in SF_ROOT_DIR\lib\vendor\lib\controller\sfFrontWebController.class.php line 48 ...
at sfFrontWebController->dispatch()
in SF_ROOT_DIR\lib\vendor\lib\util\sfContext.class.php line 170 ...
at sfContext->dispatch()
in SF_ROOT_DIR\web\frontend_dev.php line 15 ... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T07:20:46.953

好吧，你知道，stacktrace 在这里让你知道在 php 向你发送异常之前发生了什么。您只需要仔细阅读它，您就会发现问题所在。这该死的容易，你不需要我们。

看：

*   您需要查看 80 行附近的内容`apps\frontend\modules\userEntry\templates\signUpSuccess.php`。
*   似乎您调用了`stock_img_tag`从 helper调用的函数`ImageManager`。
*   当您使用 加载此图像时`loadStockImage`，它会尝试访问真实图像。
*   `ImageFile.class.php`当您的类在您的硬盘驱动器上找不到图像时，它似乎在其构造函数中引发了异常。

你看，我刚刚阅读了堆栈跟踪。

# php - 从 mySQL 表中获取信息

> ID：13038831
> 
> 赞同：0
> 
> 时间：2012-10-23T20:35:04.707
> 
> 标签：php, mysql, get

我正在尝试使用一个表单，我希望当用户提交此表单时 mySQL 进入我的数据库并获取与登录用户匹配的帐户 ID。我在获取用户名时没有问题，但我没有'不知道如何使用用户名从 mySQL 获取帐户 ID。

所以我要问的是如何告诉 mySQL 去获取与登录的用户名匹配的帐户 ID，然后将帐户 ID 保存在变量中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T20:46:04.843

假设这是表的结构：

```
user:  id|username|otherInfo

select id from user where username='your submitted username'; 
```

从结果集中提取并做任何事情

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T21:09:56.043

这里详细说明，假设是表的结构：

```
user:  account_id|username|otherInfo

//get your posted value(s) and maybe sanitize a bit
$username=htmlentities($_POST['username']);

/* assuming you set up your db connection, using PDO for this example, i'll
 * call that variable $db
 */

//use prepared statement
$pstmt=$db->prepare("select * from user where username=:username");
$pstmt->execute(array(':username'=>$username));
while($row=$pstmt->fetch(PDO::FETCH_ASSOC)){
    $id=$row['account_id']; //extracted id        
} 
```

# android - 空时带有水平线的Android列表视图

> ID：13038839
> 
> 赞同：0
> 
> 时间：2012-10-23T20:35:33.293
> 
> 标签：android, android-layout, android-listview

我的 Android 应用程序中有一个 Listview，当列表为空时，我希望有一些水平线向用户表明这是一个列表。我知道 ListView 上有 setEmptyView 方法，但如果我希望有水平线的列表行，我不确定在该视图中放置什么。我将如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T20:43:19.320

为空列表设置一堆水平线是 iOS 惯例。如果您希望您的应用程序更好地适应 Android，您应该设置其他内容。也许通知用户有错误或列表中没有项目。如果您使用的是`ListActivity`. 您需要做的就是创建一个视图并为其指定 id `@android:id/empty`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T20:47:34.460

将 listView 放入 FrameLayout 并在该 Frame 中添加另一个视图。如果列表中有任何项目隐藏其 (visiblity="gone") 并显示另一个视图。

或者如果您没有项目返回其他类型的视图，则更改您的适配器以在您的适配器中返回多个 ViewType

# text - 为什么文本总是以画布为中心

> ID：13038840
> 
> 赞同：0
> 
> 时间：2012-10-23T20:35:39.047
> 
> 标签：text, svg, fabricjs

加载 SVG 并将其渲染到画布时，路径组中包含的文本始终居中。在下面的示例中，文本应放在左上角。

**SVG：**

```
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.0//EN" "http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd">
<svg version="1.0" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
     width="269.29px" height="269.29px" viewBox="0 0 269.29 269.29" xml:space="preserve">
<text transform="matrix(1 0 0 1 7.5107 14.2222)" font-family="Arial" font-size="12">Text in the corner</text>
</svg> 
```

**JS：**

```
fabric.loadSVGFromURL(uri, function (svg, options) {
            var group = new fabric.PathGroup(svg, options);
            canvas.add(group);
        }); 
```

路径组中的任何矩形、圆形等都将按预期显示。那么为什么我的文字没有正确显示呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T01:01:01.230

我没有使用过fabric.js，但您可能缺少`x`and`y`属性。另外，添加`text-anchor="start"`以便更容易定位：

```
<text transform="matrix(1 0 0 1 7.5107 14.2222)" font-family="Arial" font-size="12" text-anchor="start" x="0" y="0">Text in the corner</text> 
```

# javascript - Encodeuricomponent 在 Rails 中对其进行解码

> ID：13038841
> 
> 赞同：4
> 
> 时间：2012-10-23T20:35:40.320
> 
> 标签：javascript, ruby-on-rails, ajax, url, encoding

通常 rails 会神奇地解码所有`params`. 现在我得到了一个 javascript，它执行`params="value="+encodeURIComponent('ab#cd');`然后调用`http://server/controller?value=ab%23cd`. 如果我`params[:value]`在我的控制器中访问，它包含`ab%23cd`而不是`ab#cd`我所期望的。

如何解决这个问题？为什么rails没有自动解码这个参数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-28T14:49:09.773

Rails 使用以下逻辑“自动”处理参数。

如果请求是 GET，它将解码查询字符串中的任何内容：

```
GET http://server/controller?value=ab%23cd
  On the server this will generate params['value'] as ab#cd 
```

如果请求是带有查询字符串的 POST，则不会对其进行解码：

```
POST http://server/controller?value=ab%23cd
  On the server this will generate params['value'] as ab%23cd 
```

如果请求是带有数据参数的 POST，它将对其进行解码：

```
POST http://server/controller
  data: value=ab%23cd
  On the server this will generate params['value'] as ab#cd 
```

我怀疑你看到这个问题是因为你包含了一个带有`POST`请求而不是`GET`请求的查询字符串，所以 Rails 没有解码查询字符串。

# redis - Redis 建模

> ID：13038842
> 
> 赞同：0
> 
> 时间：2012-10-23T20:36:02.910
> 
> 标签：redis

为以下场景建模的最佳方法是什么？用户有多个投资组合，每个投资组合都有多只股票。

我想出了以下几点：

股票将如下所示

stk：1 {名称：A，股票代码：val，扇区：val ..}
stk：2 {名称：B，股票代码：val，扇区：val ..}

用户可以是如下哈希：（将用户的投资组合单独存储为一组更好吗？）

用户：1 {k1：val1，k2：val2，投资组合：“价值|增长|短期”}
用户：2 {k1：val3，k2：val4，投资组合：“价值|防御|便士”}

投资组合中的股票可以设置
user:1:value (1,3)
user:2:value (2,3,4)
user:1:short term (1,5)
user:2:penny (4)

为了为用户添加/删除投资组合，它需要'HGET user：n投资组合'后跟一个HSET

随着用户和投资组合数量的增长，这是一种很好的建模方式吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T18:11:09.227

如果用户可以拥有多种投资组合类型，那么最好将它们分成自己的集合。

```
sadd user:1:portfolios value growth "short term" 
```

这使得从用户中删除投资组合就像调用`srem user:1:portfolios value`集合一样简单（当然还有删除“user:ID:TYPE”集合）。

当您想根据投资组合类型为用户查找股票时，您可以使用`sunionstore`and`sort`命令（Ruby 中的示例）执行此操作：

```
keys = redis.smembers('user:1:portfolios').map do |type|
  "user:1:#{type}"
end

redis.multi do |r|
  r.sunionstore "user:1:stocks:_tmp", *keys
  r.sort "user:1:stocks:_tmp", get: ["stk:*->name", "stk:*->ticket"]
  r.del "user:1:stocks:_tmp"
end 
```

`stk:*->name`将仅返回`name`. 如果要获取散列中的所有条目，请使用“KEY->HASHKEY”语法指定每个条目。

[http://redis.io/commands/sort](http://redis.io/commands/sort)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T12:30:34.440

没有最好的建模方法：这完全取决于您的访问路径。

例如，如果您从用户的角度系统地访问数据，您的提案将很有效。如果你想知道哪些用户在他们的投资组合中有特定的股票，那将是非常糟糕的。所以我的建议是列出所有预期的访问路径并检查它们是否被数据结构覆盖。

假设您只需要用户视角，我宁愿将投资组合物化为单独的集合，而不是将序列化列表存储在用户哈希中：它们将更易于维护。因为您可以使用流水线（或脚本）在一次往返中运行多个命令，所以没有真正的开销。

# magento - Magento 不重建产品图像缓存，某些页面加载带有 url 扩展名 ?_SID=U

> ID：13038847
> 
> 赞同：6
> 
> 时间：2012-10-23T20:36:38.987
> 
> 标签：magento, caching, permissions

网站：cart.oldfloridian.com

清除 Magento 的图像缓存后，该站点似乎无法重建图像缓存，并且某些页面正在加载 url 扩展名 ?___SID=U。所有产品图片都是空白的，并且看起来正在停止进一步加载网站（这些页面上没有页脚或侧边栏加载）。

好像是权限问题？相关文件夹（媒体）当前递归设置为 777。但我仍然遇到问题。

我已经阅读了所有可能的内容，但没有找到解决方案。将 php.ini.sample 中的内存限制更改为 512M。.htaccess 也有两个区域来定义这个，设置为 64M 和 256M - 这会改变什么吗？

有什么建议吗？

可能是这个？- [http://codepoets.co.uk/2011/magento-not-finding-product-images-solution/](http://codepoets.co.uk/2011/magento-not-finding-product-images-solution/) 我手动重命名文件夹（不是文件），因为我是 SQL 新手。没变。

任何帮助表示赞赏。谢谢！

编辑：

好的，所以我的主机从我清除缓存的前一天将站点恢复为备份，起初这似乎做了一些事情，但它只返回了某些图像。看起来 Magento 仍然无法重建缓存，只是现在它在缓存中有一些东西而不是死空。我应该再试一次以前没有奏效的所有方法吗？删除缓存文件夹等？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-27T00:18:55.647

我遇到了这个确切的问题，并意识到我忘记在我的本地服务器上安装/启用 gd 库，它是一个负责图像/拇指缓存重新创建的库，因此请检查 gd2 是否在 apache mudules 中启用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-23T10:16:27.847

*   媒体文件夹权限 777
*   删除了媒体文件夹下的htaccess文件
*   清除缓存
*   缓存文件夹可写
*   重建所有索引

就我而言，我解决了在 .htaccessOLD 中重命名 .htaccess

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-20T11:47:48.967

检查剩余的磁盘空间。

我之前遇到过完全相同的症状，这是因为没有剩余的磁盘空间来存储新的缓存项。

# c++ - 具有负大小的新运算符

> ID：13038860
> 
> 赞同：6
> 
> 时间：2012-10-23T20:37:37.580
> 
> 标签：c++

在 C++11 中，如果我们尝试使用全局运算符 new 分配具有负大小的数组，它将抛出 std::bad_array_new_length，但是 C++98 / C++03 呢？是 UB 还是会抛出 std::bad_alloc？

```
int main()
{
   int* ptr = new int[-1];
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T20:47:15.537

如果 C++03 标准的大小为负 5.3.4p6，则程序不正确：

> direct-new-declarator 中的每个常量表达式都应是一个整数常量表达式 (5.19)，并计算为**严格的正值**。direct-new-declarator 中的表达式应具有**非负值**的整数或枚举类型 (3.9.1) 。

上面的引用涵盖了`new T[a][b];`，其中`b`是根据语法的*常量表达式*`a`，并且是*表达式*（仅第一个维度）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T20:39:13.300

你得到这个`int a[-1]`：

```
prog.cpp: In function ‘int main()’:
prog.cpp:4: error: size of array ‘b’ is negative 
```

这对于`int* a = new int[-1]`（运行时错误）：

```
terminate called after throwing an instance of 'std::bad_alloc'
  what():  std::bad_alloc 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-23T20:41:02.467

new[] 的定义指出它需要一个无符号整数，也类型定义为`size_t`. 所以那*不应该*编译。

请参阅此处[http://en.cppreference.com/w/cpp/types/size_t](http://en.cppreference.com/w/cpp/types/size_t)（这是一个无符号整数）。

# wpf - 如何在增加窗口高度时增加 WPF 中控件的高度？

> ID：13038862
> 
> 赞同：2
> 
> 时间：2012-10-23T20:37:49.837
> 
> 标签：wpf, stackpanel

假设有一个 WPF 窗口，`StackPanel`其中有一个控件（`WebBrowser`在我的例子中是 ）。当我增加窗口的高度时，我希望它的高度增加。我能够在宽度方面产生效果，但在高度方面却不行。

xaml（不起作用）：

```
<Window Height="700">
    <StackPanel Height="Auto">
        <WebBrowser x:Name="browser" Height="Auto" MinHeight="410" />
    </StackPanel>
</Window> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T06:07:57.990

为什么不使用`Grid`then 而不是（或者，如果确实需要，`StackPanel`您也可以使用），请参见下面的代码片段：`StackPanel``Grid`

**XAML：**

```
<Window Height="700">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition />
        </Grid.ColumnDefinitions>
        <WebBrowser x:Name="browser" Height="Auto" MinHeight="410" />
    </Grid>
</Window> 
```

# git - 从heroku克隆它后尝试推动heroku时的问题

> ID：13038863
> 
> 赞同：1
> 
> 时间：2012-10-23T20:37:52.680
> 
> 标签：git, heroku, github, git-clone

我从 heroku 克隆了一个项目，该项目由我公司的另一位开发人员开发。`heroku git:clone -a "project name"`我使用：命令从 heroku 克隆了该项目 。我为该项目添加了一些新功能并修复了一些错误。现在，我的本地服务器上的一切都运行良好。但是，现在，当我尝试再次使用将更改推送到heroku时： `git push heroku master`它显示以下错误：

**权限被拒绝（公钥）。致命：远端意外挂断**

好吧，当我尝试使用远程添加它时：**git remote add heroku git@heroku.com:{project_name}.git**然后它显示：**致命：远程 heroku 已经存在。**

确切的问题是什么？有人可以帮忙吗？在此先感谢您提供任何帮助和线索。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T21:21:55.780

```
 heroku keys:add 
```

我不得不运行这个命令。然后一切都按预期完美运行！

# php - 如何打印四舍五入的百分比

> ID：13038866
> 
> 赞同：1
> 
> 时间：2012-10-23T20:38:01.880
> 
> 标签：php, echo

你好，我正在寻找 %。首先我找到了秒

```
 $tm=sum_the_time($d_duration); 
 $d_seconds='0';
 list($hour,$minute,$second) = explode(':', $tm);
    $d_seconds += $hour*3600;
    $d_seconds += $minute*60;
    $d_seconds += $second;

     $total_second=$c_seconds+$p_seconds+$t_seconds+$b_seconds+$d_seconds;

 $c_seconds=$c_seconds*100/$total_second;
 $p_seconds=$p_seconds*100/$total_second;
 $t_seconds=$t_seconds*100/$total_second;
 $b_seconds=$b_seconds*100/$total_second;
 $d_seconds=$d_seconds*100/$total_second;

 echo $c_seconds; 
```

结果是 10.754504504505，我将如何像 10.7 一样打印此代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T20:50:01.243

您可以尝试使用**printf()**函数：

```
printf("%.1f", $c_seconds); 
```

或者，**number_format()**：

```
echo number_format( $c_seconds, 1 ); 
```

这两个函数将对您的数字进行四舍五入（在您的示例中将返回 10.8），因此，如果您只想截断到第一个小数位（结果等于 10.7），您可以使用以下命令：

```
echo substr($c_seconds, 0, strpos($c_seconds, ".") + 2); 
```

实际上，您可以使用[这个问题](https://stackoverflow.com/questions/3833137/how-to-make-number-format-not-to-round-numbers-up)的解决方案来更好地使用**number_format()**并获得您想要的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T20:39:48.490

```
echo sprintf('%0.1f', $c_seconds); 
```

相关文档：http: [//php.net/sprintf](http://php.net/sprintf)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T20:40:20.277

[http://php.net/manual/en/function.number-format.php](http://php.net/manual/en/function.number-format.php) numberformat 可能是您正在寻找的。

# android - 使用支持库时 LoaderManager 出错

> ID：13038869
> 
> 赞同：7
> 
> 时间：2012-10-23T20:38:13.803
> 
> 标签：android, android-loadermanager, android-cursorloader

我正在尝试将我的代码从使用游标转换为使用 CursorLoaders。为了支持旧版本的 Android，我安装了支持库，而不是导入 android.content.CursorLoader，而是导入 android.support.v4.content.CursorLoader。现在编译好的代码抛出了两个错误。当我实现它时，第一个错误出现在 LoaderManager 上。错误是：LoaderManager 无法解析为类型。第二个错误是调用 initLoader。错误是：LoaderManager 类型中的方法 initLoader(int, Bundle, LoaderManager.LoaderCallbacks) 不适用于参数（int, Bundle, MyList）。这是我的代码：

```
public class MyList extends ListActivity implements LoaderManager.LoaderCallbacks<Cursor> {

private static final String[] PROJECTION = new String[] { "_id", "fieldname" };
private static final int LOADER_ID = 0;
private static final String MYTABLE_BASEPATH = "MyTable_tbl";
private static final String AUTHORITY = "SQLData";
public static final Uri MY_URI = Uri.parse("content://" + AUTHORITY + "/" + MYTABLE_BASEPATH);
private SimpleCursorAdapter mAdapter;

@SuppressWarnings("deprecation")
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    Intent myData = getIntent();
    Bundle info = myData.getExtras();

    if (info != null){
        Cursor c;
        String[] dataColumns = { "fieldname" };
        int[] viewIDs = { R.id.mylist1 };

        SimpleCursorAdapter adapter;            
        adapter = new SimpleCursorAdapter(this, R.layout.mylist, null, dataColumns, viewIDs, CursorAdapter.FLAG_REGISTER_CONTENT_OBSERVER);
        setListAdapter(adapter);
        getLoaderManager().initLoader(0, info, this);
    }

}

public Loader<Cursor> onCreateLoader(int id, Bundle args) {
    String selection = "level = '" + args.getString("Level") + "'";
    return new CursorLoader(this, MY_URI,
            PROJECTION, selection, null, null); 
}

public void onLoadFinished(Loader<Cursor> loader, Cursor cursor) {
    switch (loader.getId()) {
      case LOADER_ID:
        mAdapter.swapCursor(cursor);
        break;
    }

}

public void onLoaderReset(Loader<Cursor> loader) {
    mAdapter.swapCursor(null);

} 
```

}

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-23T21:49:10.647

为了返回`android.support.v4.app.LoaderManager`，您需要使用[getSupportLoaderManager()](http://developer.android.com/reference/android/support/v4/app/FragmentActivity.html#getSupportLoaderManager%28%29)。不幸的是，此方法不适用于`ListActivity`. 这可能会对您有所帮助： [How to get LoaderManager in a ListActivity](https://stackoverflow.com/questions/7834647/how-to-get-loadermanager-in-a-listactivity)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-26T17:06:59.470

> **LoaderManager 无法解析为 type**。可以解决添加导入：

```
import android.support.v4.app.LoaderManager; 
```

就像马塞洛指出的那样，使用`getSupportLoaderManager()`而不是`getLoaderManager()`

# c++ - 编译 mips32 时出错

> ID：13038870
> 
> 赞同：1
> 
> 时间：2012-10-23T20:38:22.423
> 
> 标签：c++, gcc, mips32

我正在尝试在虚拟机中编译 MIPS32 代码。程序的其余部分是用 C 代码完成的。这里有问题的代码：

```
"# include "ordenamiento.h"

"# a0 is the pointer to char **, a1 is the start (int), a2 is the end (int)
.overall stoogeSort

.Set noreorder

.cpload $t9

.September reorder

.cprestore

.ent stoogeSort

"#arming the stack
stoogeSort: 
addiu $ sp, -32 

sw $ fp, 28 ($ sp) 
$ sw gp, 24 ($ sp) 
move $ fp, $ sp 
sw $ a0, 32 ($ sp)
sw $ a1, 36 ($ sp) 
sw $ a2, 40 ($ sp) 
b CMP 
FinComp: bgt $ t0, $ zero, noswap 
Swap: addu $ t2, $ a0, $ a1 
----
----
----
. stoogeSort end 
```

问题是当编译如下 gcc-c-O0 stoogeSort.S 给我以下错误：

```
stooge.s: 1: Warning: line numbers must be positive, line number 0 rejected
stooge.s: 9: Error: illegal operands `sw $ a0, 32 ($ sp) '
stooge.s: 10: Error: illegal operands `sw $ a1, 36 ($ sp) '
stooge.s: 11: Error: illegal operands `sw $ a2, 40 ($ sp) '
stooge.s: 12: Error: unrecognized opcode `ba CMP '
stooge.s: 13: Error: illegal operands `bgt $ t0, $ zero, noswap '
stooge.s: 14: Error: illegal operands `addu $ t2, $ a0, $ a1 '
stooge.s: 15: Error: illegal operands `addu $ t3, $ a0, $ a2 ' 
```

我究竟做错了什么？为什么我会收到这些错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T06:56:40.143

既然您已经得到了问题的答案，最好将其发布在这里，以便对遇到同样问题的人有所帮助。

我在这里为您发布答案。

**问题是失踪`"# include <mips/regdef.h>"`**

# c++ - 使用 WriteFile 函数写入 XML 文件

> ID：13038872
> 
> 赞同：0
> 
> 时间：2012-10-23T20:38:42.147
> 
> 标签：c++, visual-studio-2010, winapi

我正在尝试使用 WinAPI 函数将数据写入 UNICODE XML 文件`WriteFile`。我正在使用下一个代码进行编写：

```
WriteFile(hFile, t, sizeof(wchar_t) * (wcslen(t)), &wr, NULL); 
```

指针`t`在哪里。`wchar_t`写入数据后，我在 VS 中打开 XML 文件并获得类似二进制文件的内容，查看快照。正常吗？以及如何在 VS 中像普通 XML 文件一样查看这个文件（在 nodepade 中它看起来像 XML，但没有格式化）。我能意识到吗？ ![在此处输入图像描述](../Images/e805c1fdf2e51ba829dfea15230f69e6.png)

# c# - 从 HTML 代码中解析以下内容？

> ID：13038873
> 
> 赞同：1
> 
> 时间：2012-10-23T20:38:45.887
> 
> 标签：c#, regex

我将如何解析以下内容：

```
wr("website-url.com</span>") 
```

使用来自 HTML 代码的正则表达式？

似乎无法弄清楚如何提取`website-url.com`

位于 HTML 中的整个 JavaScript：

```
<script type="text/javascript">wr("<span>maddog");wr("@");wr("website-url.com</span>")</script> 
```

尝试过正则表达式，例如：

```
wr("(.+?)\s*<\/span>") 
```

但似乎无法让它工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T20:58:27.157

```
string a = <script type="text/javascript">wr("<span>maddog");wr("@");wr("website-url.com</span>")</script>;
string[] b= a.replace("script type="text/javascript">","").replace("</script>","").split(';').ToArray();
string c = b.Last();
string d = c.replace("wr(","").replace("</span",""); 
```

d 是最终结果，但您可以修改代码以处理字符串中的双引号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T21:19:12.553

您获得此 javascript 的站点似乎不希望您解析其 html。它使用 javascript 函数创建动态 html `wr`。下面是执行此 javascript 并解析结果代码的代码。但是我不能说这是一个简单的跟踪代码

```
public void Test()
{
    //C# object which will be accessed by javascript
    var csharpObj = new MyCSharpObject();

    //Create Javascript object
    Type scriptType = Type.GetTypeFromCLSID(Guid.Parse("0E59F1D5-1FBE-11D0-8FF2-00A0D10038BC"));
    dynamic obj = Activator.CreateInstance(scriptType, false);
    obj.Language = "Javascript";
    obj.AddObject("csharp", csharpObj);

    //Load Html (your string in question)
    string html = @"<script type=""text/javascript"">wr(""<span>maddog"");wr(""@"");wr(""website-url.com</span>"")</script>";
    HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();
    doc.LoadHtml(html);

    //Create "wr" function
    string script = "function wr(s){csharp.wr(s);}";

    //Get the text of script tag                
    script += doc.DocumentNode.SelectSingleNode("//script").InnerText;

    //Execute script
    obj.Eval(script);

    //Load the string created by javascript execution
    doc.LoadHtml(csharpObj.Output);

    //tada.....
    var eMailAddress = doc.DocumentNode.InnerText;

    Console.WriteLine(eMailAddress);
}

[ComVisible(true)]
public class MyCSharpObject
{
    public string Output = "";
    public void wr(string s)
    {
        Output += s;
    }
} 
```

**- - - - 编辑 - - - -**

> 我不确定如何编写“获取所有 wr(*) 字符串

尽管您似乎想要这样的解决方案，但我不会依赖正则表达式来解析 html

```
public void Test2()
{
    string html = @"<script type=""text/javascript"">wr(""<span>maddog"");wr(""@"");wr(""website-url.com</span>"")</script>";

    var parsedHtml = String.Join("",Regex.Matches(html, @"wr\(\""(.+?)\""\)")
                                            .Cast<Match>()
                                            .Select(m => m.Groups[1].Value));

    HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();
    doc.LoadHtml(parsedHtml);
    var eMailAddress = doc.DocumentNode.InnerText;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T21:38:45.763

这个想法是：

*   使用一个正则表达式获取所有 wr(*) 字符串。
*   删除引号 (")
*   删除`<span>`和`</span>`

这是Python中的解决方案。

```
import re

def geturl(text):
    '''
    Get all the wr(*) strings.
    Remove quotes.
    Remove <span> and </span>
    '''
    regex = re.compile(r'wr\(([^)]*)\)')
    match = regex.findall(xx)
    url = ''.join([s.replace('"', '') for s in match])
    url = url.replace('<span>', '').replace('</span>', '')
    return url

if __name__ == '__main__':
    xx = '''<script type="text/javascript">wr("<span>maddog");wr("@");wr("website-url.com</span>")</script>'''
    url = geturl(xx)
    print url 
```

给`maddog@website-url.com`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-23T20:41:22.467

如果您正在使用正则表达式来解析 HTML，那么您可能正在做一些您可能正在做简单的事情的艰难方式。在 C# 中，尝试使用[HTML Agility Pack](http://htmlagilitypack.codeplex.com/)。另见关于此事的[最终问题](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags)。

# objective-c - 在 Objective-c 中使用调度队列

> ID：13038875
> 
> 赞同：0
> 
> 时间：2012-10-23T20:38:47.033
> 
> 标签：objective-c, ios, multithreading, core-data, grand-central-dispatch

我对 IOS 很陌生，我正在从 Web 服务获取数据。我将这些数据存储到核心数据中。目前，我正在第一个视图控制器（tableview）中加载我的所有数据。但这需要大约 10 分钟才能填满 tableview 并将所有数据存储在核心数据库中。所以我想知道最佳实践是什么。所以我想使用调度队列。但是最好的使用方法是什么？

*   第一种方法

    1.  首先存储来自第一个视图的数据
    2.  用这些数据填充表格视图
    3.  将其余数据存储在数据库中。

但是，如果您转到下一个视图并且没有加载所有数据怎么办？

*   第二种方法

    1.  从第一个视图存储数据
    2.  用这些数据填充表格视图？
    3.  当用户转到第二个视图时，存储第二个视图的数据
    4.  使用此数据加载第二个视图。

您始终正确存储数据，但用户仍然需要等待才能使用该应用程序。（因为没有为该视图加载数据。）

目前我正在使用第一种方法。并使用调度队列。我正在这样使用它。

```
- (void)fetch1:(UIManagedDocument *)document
{
    dispatch_queue_t fetchQ = dispatch_queue_create("NewsFetch", NULL);
    dispatch_async(dispatch_get_main_queue(), ^{
        //store data in core database for firstViewController and save document.
        [document saveToURL:document.fileURL forSaveOperation:UIDocumentSaveForOverwriting completionHandler:NULL];
        [self loadFirstTableView];
        [self fetch2];
    });
    dispatch_release(fetchQ);

}
- (void)fetch2:(UIManagedDocument *)document
{
    dispatch_queue_t fetchAlbum = dispatch_queue_create("Album fetcher", NULL);
    dispatch_async(fetchAlbum, ^{
       //store data for secondViewController
        [document saveToURL:document.fileURL forSaveOperation:UIDocumentSaveForOverwriting completionHandler:NULL];

    dispatch_release(fetchAlbum);
} 
```

有谁能够帮我？

亲切的问候

**编辑**

我如何从 web 服务获取数据的方式如下。

```
 NSArray *news = [GenkData getNews]; //gets all the data from webservice as JSON
        for (NSDictionary *genkInfo in news) {
            [News newsWithGenkInfo:genkInfo  inManagedObjectContext:document.managedObjectContext];
        }
        [document saveToURL:document.fileURL forSaveOperation:UIDocumentSaveForOverwriting completionHandler:NULL]; 
```

这就是我设置表格视图的方式。

```
- (void)setupFetchedResultsController // attaches an NSFetchRequest to this UITableViewController
{
    NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:@"News"];

    request.sortDescriptors = [NSArray arrayWithObjects:[NSSortDescriptor sortDescriptorWithKey:@"date" ascending:YES],nil];

    self.fetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:request
                                managedObjectContext:self.genkDatabase.managedObjectContext
                                sectionNameKeyPath:nil
                                cacheName:nil];

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T20:44:43.243

当你遇到性能问题时，你的第一反应**不**应该是引入多线程。这增加了不应掉以轻心的额外复杂性，并且需要非常仔细地关注架构。

相反，我*强烈建议*您看一下 Ray Wenderlich 关于连接`NSFetchedResultsController`到`UITableView`.

`NSFetchedResultsController`允许您仅加载您需要的数据，并在用户请求时自动获取批量内容。它会节省你的记忆；这将花费更少的时间；它会让您的用户满意。

在此处查看教程：[http ://www.raywenderlich.com/999/core-data-tutorial-how-to-use-nsfetchedresultscontroller](http://www.raywenderlich.com/999/core-data-tutorial-how-to-use-nsfetchedresultscontroller)

**编辑**

因此，根据您的编辑，这就是我设计您的要求的方式。

1.  您应该使用异步 HTTP 请求从 Web 服务中获取数据。使用起来很简单，`NSURLRequest`像这样的库[`AFNetworking`](https://github.com/AFNetworking/AFNetworking)使这变得更加容易。

2.  既然您是从 Web 服务获取数据，那么您真的需要将该数据插入到 Core Data 中吗？更简单的方法是简单地缓存 HTTP 响应，然后直接从中加载表视图。

3.  现在您已经有了 HTTP 响应，请告诉`UITableView`重新加载。当它重新加载时，您使用委托方法向它提供表数据。如果你不使用 Core Data，你就不需要再搞砸了`NSFetchedResultsController`。

如果您的 Web 服务返回大量数据，您可能应该编写一些分页机制来批量获取结果。它会像这样工作：当用户到达表格视图的末尾时，您将发送另一个请求以获取接下来的 25 个项目。一般的经验法则：在需要之前不要获取数据。

最后，通过所有这些获取，您将想要告诉您的用户发生了什么。检查一下[`SVProgressHUD`](https://github.com/samvermette/SVProgressHUD)。

希望有帮助。

# asp.net - 在不同服务器上的 Web 应用程序之间共享会话状态

> ID：13038876
> 
> 赞同：2
> 
> 时间：2012-10-23T20:39:03.087
> 
> 标签：asp.net, iis

是否可以在不同服务器上的 Web 应用程序之间共享会话状态？其中一个网站使用会话状态来维护用户凭据/信息会话状态，另一个是使用表单身份验证来维护此信息。在不使用会话存储修改网站的情况下，使用表单身份验证的网站是否可以读取/访问另一台服务器上的会话状态？如果不是，我认为这是答案，如果它们在同一台服务器上运行，是否有可能？（即相同的应用程序池）？

注意：两个应用程序在同一个域名下（其中一个是子域）

*请注意，之所以问这个问题是因为客户正在请求两个网站之间的“单点登录”方法。我们正在使用表单身份验证，而另一个站点（我们目前无法修改）正在会话中维护凭据/登录信息*

ASP.NET 4 IIS 7.5

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-21T11:25:22.530

假设后者，你可以尝试这样的事情：

首先，确保所有应用程序都在同一个域中运行。如果没有，所有赌注都取消。我不知道是否有一种简单的方法来配置会话 cookie 的域属性，所以你可能必须自己做，通过将 cookie 域属性设置为域：

```
Response.Cookies["ASP.NET_SessionId"].Domain = ".mydomain.com"; 
```

您需要确保每个应用程序都配置为使用公共状态服务器或数据库支持的会话。

请点击链接：[如何跨子域共享会话状态](http://support.microsoft.com/kb/2527105)

# python - AttributeError 'myClass' 对象没有属性 'myList'

> ID：13038878
> 
> 赞同：0
> 
> 时间：2012-10-23T20:39:03.943
> 
> 标签：python, inheritance, attributeerror

我正在运行 Windows 7，使用 python 2.7.3，我收到一个我无法弄清楚原因的继承错误。我已经做了很多搜索，但到目前为止还没有找到太多相关的东西。

我的问题是，当我尝试从一个类继承到另一个类时，我不断收到 AttributeError。我的基本结构是这样的：

```
# pymyClass.py
class myClass(object):
    def __init__(self,aList=None):
        if aList is not None:
            myList = aList
        else:
            myList = ['','','','','']

    def reset(self,aList=None):
        if aList is not None:
            myList = aList
        else:
            myList = ['','','','','']
    #other methods operate without issue

# pymySecondClass.py
import pymyClass
class mySecondClass(pymyClass.myClass):
    def __init__(self,aList=None):
        pymyClass.myClass(aList)

# pymyThirdClass.py
import pymySecondClass
class myThirdClass(pymySecondClass.mySecondClass):
    def __init__(self,aList=None):
        pymySecondClass.mySecondClass(aList)

    def useList(self,aList=None):
        self.reset(aList)
        print self.myList

#pymyObj.py
import pymyThirdClass

myObj = pymyThirdClass.myThirdClass(['a','b','c','1','2'])
myObj.useList() 
```

...但是当我调用实例化 myThirdClass() 并调用 useList() 时，它会出错，说，

```
AttributeError: 'myThirdClass' object has no attribute 'myList' 
```

我实际上在这里编译了我的示例，并遇到了同样的问题，所以我认为继承不能按我期望的方式工作。我已经检查了 python 文档，但可能还不够接近？如果有人可以在这里帮助我，将不胜感激。

我想我可能不得不在 myThirdClass 构造函数中手动包含字段“myList”，但这似乎非常糟糕。提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T20:40:46.880

你从来没有真正附加`myList`到任何地方的实例。为此（在方法内），您需要执行以下操作：

```
self.myList = ... 
```

而不仅仅是：

```
myList = ... 
```

其中`self`是传递给方法的第一个参数的常规名称。

* * *

您在派生类上调用基类时也遇到了一些问题。

```
class Foo(object):
   def __init__(self):
      print "I'm a Foo"

class Bar(Foo):
   def __init__(self):
      print "I'm a Bar"
      #This is one way to call a method with the same name on a base class
      Foo.__init__(self) 
```

有些人不喜欢这样做——`Foo.__init__(self)`那些人使用[`super`](http://docs.python.org/library/functions.html#super)（[只要](http://rhettinger.wordpress.com/2011/05/26/super-considered-super/)[你知道自己在做什么，这也可以](https://fuhm.net/super-harmful/)）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T20:42:06.003

你忘记了自我：

```
# pymyClass.py
class myClass(object):
    def __init__(self,aList=None):
        if aList is not None:
            self.myList = aList
        else:
            self.myList = ['','','','','']

    def reset(self,aList=None):
        if aList is not None:
            self.myList = aList
        else:
            self.myList = ['','','','',''] 
```

如果没有这个 mylist 在 if 子句之后被“销毁”。

# java - 使用 ArrayList 作为值填充 HashTable

> ID：13038880
> 
> 赞同：3
> 
> 时间：2012-10-23T20:39:15.033
> 
> 标签：java, arraylist, hashtable

我在我的程序中创建 HashTable 时遇到问题，我正在创建 WordLadder 游戏。基本上我希望我的 HashTable 包含唯一单词的键，而值是一个字母差异的单词。问题是，当我打印出来检查我放入的内容时，它会完美地打印出我想要的内容，但是当我返回 HashTable 时，它​​会让我胡说八道。

我生成 HashTable 的代码如下：

```
public Hashtable<String, ArrayList<String>> findNeighbors(){
      Hashtable<String, ArrayList<String>> data = new Hashtable<String, ArrayList<String>>();
      ArrayList<String> neighb = new ArrayList<String>();
      for(int i=0; i < 5; i++){
       for(int j=0; j < 5; j++){
        if (isNeighbor(words.get(i), words.get(j))) {
         neighb.add(words.get(j));
        }
       }
       data.put(words.get(i), neighb);
       //System.out.println(words.get(i)+ " "+data.get(words.get(i))); <This Works perfectly fine
       System.out.println(data.toString()); //<This returns nonsense
       neighb.clear();
      }

      return data;
     }

public boolean isNeighbor(String a, String b){
      int diff = 0;
      for (int i = 0; i < a.length(); i++){
       if(a.charAt(i) != b.charAt(i)){
        diff++;
       }
      }
      return diff==1;
     } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T20:42:24.097

您不能使用相同的参考来放置`HashTable`所有键。每次调用`clear()`它都会清除您添加的列表，该列表对于所有键都是相同的。`So create ArrayList for each key`

```
 for(int i=0; i < 5; i++){
  ArrayList<String> neighb = new ArrayList<String>();<-- Move inside loop
   for(int j=0; j < 5; j++){
    if (isNeighbor(words.get(i), words.get(j))) {
     neighb.add(words.get(j));
    }
   }
   data.put(words.get(i), neighb);
   //System.out.println(words.get(i)+ " "+data.get(words.get(i))); <This Works perfectly fine
   System.out.println(data.toString()); //<This returns nonsense

  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T20:41:22.647

看`neighb.clear();`，你正在调用你放在 Hashtable 中的同一个对象。将列表放入 Hashtable 后，您很快就会清除列表。可能你想创建一个新的本地数组列表，将所有元素添加到新的数组列表中添加然后在 Hashtable 中添加新的数组列表，然后清除你的`neighb`例如

```
 List<String> newList = new ArrayList<String>();
      newList.addAll(neighb);
      data.put(words.get(i), newList);
      newList.clear(); 
```

# jquery - 单击外部和链接时的Jquery切换表

> ID：13038883
> 
> 赞同：1
> 
> 时间：2012-10-23T20:39:22.330
> 
> 标签：jquery, toggle

这可能以前已经解决了，但我找不到确切的情况。我有这个按钮，点击后可以切换表格。但是，我也有一个处理程序，用于在 div 外部单击以将其关闭。所以现在当用户点击链接时，切换事件不再触发。

[JSFIDDLE](http://jsfiddle.net/zL2wb/1/)

```
<div style="width:110px;">
    <a class="zui-sel-wrapper" id="EQA">
    <span class="zui-sel-def" id="attr-val">Toggle</span>
    <span class="zui-sel-arr">&darr;</span>
    </a>
</div>

<table id="EQAtbl" width="340" cellpadding="0" cellspacing="0" border="1">
    <tr>
    <td>Alpha</td>
    <td>Bravo</td>
    <td>Charly</td>
    </tr>
</table>

$(document).mouseup(function (e) {
    if ($("#EQAtbl").has(e.target).length === 0) {
        $('#EQA').removeClass('zui-sel-state-focus');
        $("#EQAtbl").hide();
    }
});
$(document).ready(function(){
    $('#EQA').click(function(){
        $('#EQAtbl').toggle();
        $(this).toggleClass('zui-sel-state-focus');
    });

    $('#EQA').blur(function(){
        $(this).removeClass('zui-sel-state-focus');
    });
});​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T21:01:17.327

因为你的逻辑是矛盾的。

在你的鼠标上

```
if ($("#EQAtbl").has(e.target).length === 0) { // hide 
```

但是在您的点击中将其切换回来，所以它当然不会切换..该跨度不在您的表格中..所以它隐藏了它..然后它在点击事件中切换回来

```
$('#EQA').click(function(){
    $('#EQAtbl').toggle();
   $(this).toggleClass('zui-sel-state-focus');
}); 
```

您可以添加支票

```
$(document).mouseup(function (e) { 
    if ($("#EQAtbl").has(e.target).length === 0 && !$('#EQA').has(e.target).length > 0) {
        $('#EQA').removeClass('zui-sel-state-focus');
        $("#EQAtbl").hide();
    }
}); 
```

[http://jsfiddle.net/LuRKX/](http://jsfiddle.net/LuRKX/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T21:06:36.657

这是解决方案：

```
$(document).mouseup(function (e) {
    if ($(e.target).has("#attr-val").length > 0) { //<-- you had wrong logic here
        $('#EQA').removeClass('zui-sel-state-focus');
        $("#EQAtbl").hide();
    }
}); 
```

[http://jsfiddle.net/fAtL2/](http://jsfiddle.net/fAtL2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T20:54:43.117

第一件事是..你已经设置了**可见性：隐藏**到表中..

`.toggle()` 将**显示/隐藏**div .. 它不会对`visibility:hidden ;`

`.blur()` 仅适用于输入元素..对锚点没有任何影响

在 DOM Ready 中移动 mouseOver 代码...并使用**.on()** 附加事件

```
$(document).ready(function() {
    $('#EQA').on('click', function(e) {
        e.preventDefault();
        debugger;
        $('#EQAtbl').toggle();
        $(this).toggleClass('zui-sel-state-focus');
    });

    $('#EQA').on('blur', function() {
        $(this).removeClass('zui-sel-state-focus');
    });
    $(document).mouseup(function(e) {
        if ($("#EQAtbl").has(e.target).length === 0) {
            $('#EQA').removeClass('zui-sel-state-focus');
            $("#EQAtbl").hide();
        }
    });
});​ 
```

[检查小提琴](http://jsfiddle.net/sushanth009/zL2wb/3/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T20:55:01.677

你的意思是：你[的JSFIDDLE](http://jsfiddle.net/yosafatade/zL2wb/2/)？尝试`visibility: hidden`在你的 CSS中编辑你的

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-23T20:56:15.830

我想说，不要仅仅为了简单而使用切换 jquery 提供它。定义你自己的切换功能总是更好，因为有时（同样在你的情况下）我们希望切换遵循更人性化的逻辑方式。

```
 $('#EQA').click(function(){
        //if this.hide then set this.show
        //if this.show then set this.hide
        //class can be toggled by use of hasClass method
         //this.hasClass then remove else add
    }); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-23T21:06:28.247

[看到这个小提琴](http://jsfiddle.net/8nKAT/1/)。我认为代码几乎是不言自明的。

```
$(document).ready(function(){

    $(document).mouseup(function (e) {
        if ($("#EQAtbl").has(e.target).length === 0 && $("#EQA").has(e.target).length === 0) {
            $('#EQA').removeClass('zui-sel-state-focus');
            $("#EQAtbl").hide();
            $("#EQAtbl").removeClass('shown');
        }
    });

    $('#EQA').click(function(){
        $(this).toggleClass('zui-sel-state-focus');
        if ($("#EQAtbl").hasClass('shown')){
            $('#EQAtbl').hide();
            $("#EQAtbl").removeClass('shown');
        }
        else{
            $('#EQAtbl').show();
            $("#EQAtbl").addClass('shown');
        }
    });

});​ 
```

# ios - 适用于 iOS 的 Cocos2D 2.0 模板在 Mac Pro 上崩溃，但不是 MacBook Pro

> ID：13038887
> 
> 赞同：0
> 
> 时间：2012-10-23T20:39:28.533
> 
> 标签：ios, cocos2d-iphone

请帮忙！

我刚刚下载了适用于 iPhone 的 Cocos2D 2.0 并将模板安装到 Xcode 4.5 中，该 Xcode 4.5 在 Mac Pro (ATI Radeon HD 5770) 上运行 10.8.2。我从模板创建了一个项目，构建并运行它。启动画面显示在模拟器上，然后应用程序在 initWithDepthFormat 中的 CCES2Renderer.m 中出现 SIGABRT 终止：

```
if( ! sharegroup )
    context_ = [[EAGLContext alloc] initWithAPI:kEAGLRenderingAPIOpenGLES2]; 
```

我尝试使用 Cocos2D 的任何项目，包括测试 cocos2d-ios 项目在我的 Mac Pro 上都做同样的事情......但是......在我的 MacBook Pro 上完美运行。

有没有人有任何想法发生了什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T17:54:55.260

原来问题出在 Xcode 4.5 中的 iOS 模拟器上。

我下载了 Xcode 4.5.1，它不再崩溃。

# android - WebView 不会显示在对话框中

> ID：13038890
> 
> 赞同：0
> 
> 时间：2012-10-23T20:39:51.413
> 
> 标签：android, webview, dialog

我在对话框中遇到了 WebView 的问题。我尝试了许多不同的技巧，但没有任何效果。所以，我的问题是我无法在自定义对话框中加载 WebView。它打开对话框并且没有给出任何错误，但对话框不会“填充”网络视图。它只显示对话框的标题。

AlertDialog.Builder 确实在对话框中打开 webview，但在单击输入字段时不会打开键盘。如果我打开键盘，它会出现在对话框的后面。（这似乎是已知的错误......）

```
Dialog alert = new Dialog(Activity.this );

        LayoutInflater inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View view = inflater.inflate(R.layout.web, null);

        alert.setContentView(view);
        alert.setTitle("WebView");
        alert.setCancelable(true);

        WebView w = (WebView) view.findViewById(R.id.web);
        w.setWebViewClient(new WebViewClient() );
        w.getSettings().setUserAgentString("useri");
        w.loadUrl("http://google.com");

        alert.show(); 
```

和 R.layout.web 文件：

```
<?xml version="1.0" encoding="utf-8"?>

<WebView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/web"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:minHeight="9999dp"
    android:minWidth="9999dp" /> 
```

如何在对话框中打开网页视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T22:27:39.207

尝试以编程方式将 WebView 添加到 Dialog 而不是使用 XML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T19:31:43.717

您不应该**将**minHeight 和 minWidth 设置为如此荒谬的值。删除这些，它应该可以工作。将 WebView 设置为 Fill 父级可能会更好，以便它填充整个 Dialog（如果这是你想要的）。

# c# - Return id of resource, if i know name of resource

> ID：13038895
> 
> 赞同：16
> 
> 时间：2012-10-23T20:40:28.480
> 
> 标签：c#, mono, xamarin.android, mvvmcross

How i can return id of resource, if i know name of resource?

Something like this:

```
String mDrawableName = "myappicon";
int resID = getResources().getIdentifier(mDrawableName , "drawable", getPackageName()); 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-10-23T21:19:38.793

In MonoDroid, that code translates to something like:

```
 var resourceId = Resources.GetIdentifier(mDrawableName.ToLower(), "drawable", PackageName); 
```

However, I personally don't use GetIdentifier as it's not recommended in Android - so I use Reflection instead:

```
 var resourceId = (int)typeof(Resource.Drawable).GetField(mDrawable).GetValue(null); 
```

although that code should definitely have some try/catch error checking added for arbitrary strings!

# javascript - 包含库时控制台出错

> ID：13038896
> 
> 赞同：0
> 
> 时间：2012-10-23T20:40:33.287
> 
> 标签：javascript, ember.js

我开始学习 EmberJS，我在控制台中看到了这个错误：

```
Uncaught TypeError: Cannot call method 'proto' of undefined ember-1.0.pre.min.js:17 
```

似乎只是通过包含库我得到了那个错误。有谁知道我为什么会这样？

**编辑：添加 HTML 标记**

```
<!doctype html>

  <html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

    <title></title>
    <meta name="description" content="">
    <meta name="author" content="">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="apple-touch-icon" href="/apple-touch-icon.png">
    <link rel="stylesheet" href="css/style.css?v=2">

    <!--[if lt IE 9]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <script type="text/x-handlebars">
      {{#view App.MyView}}
        <h1>Hello world!</h1>
      {{/view}}
    </script>

    <!-- The missing protocol means that it will match the current protocol, either http or https. If running locally, we use the local jQuery. -->
    <script src="js/libs/jquery-1.7.2.min.js"></script>
    <script>window.jQuery || document.write('<script src="js/libs/jquery-1.7.2.min.js"><\/script>')</script>
  <script src="js/libs/handlebars-1.0.0.beta.6.js"></script>
  <script src="js/libs/ember-1.0.pre.js"></script>
  <script src="js/app.js"></script>
  </body>
  </html> 
```

文件中还有这个JS `app.js`：

```
var App = Em.Application.create();

App.MyView = Em.View.extend({
  mouseDown: function() {
  window.alert("hello world!");
}
}); 
```

但它已被删除，HTML 中的所有模板部分也已删除，但我仍然遇到相同的错误（：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T06:09:08.053

来自[Ember 文档](http://emberjs.com/documentation/)：

> 每个 Ember 应用程序都应该有一个 Ember.Application 实例。该对象将作为应用程序中所有其他类和实例的全局可访问命名空间

这里的关键是“全球”。这是一个应用程序的示例：

```
window.App = Ember.Application.create(); 
```

你的问题是你的`var`-keyword `Application.create`。删除它并添加`Window`以使错误消失。

# perl - 在 Perl 中使用“printf”获取固定宽度的列输出

> ID：13038898
> 
> 赞同：-3
> 
> 时间：2012-10-23T20:40:35.587
> 
> 标签：perl

> **可能重复：**
> [在 Perl 中使用“printf”格式化输出](https://stackoverflow.com/questions/13038611/formatting-output-with-printf-in-perl)

```
my @selections = ("Hamburger","Frankfurter","French Fries","Large Coke","Medium Coke","Small Coke","Onion Rings");
my @prices = (3.49, 2.19, 1.69, 1.79, 1.59, 1.39, 1.19);
my @quantity = (3, 0, 0, 4, 0, 0, 8);

printf("%s %10s %12s %10s\n", "Qty", "Desc.", "Unit \$", "Total");

for($meh = 0; $meh <= 6; $meh++)
{
    if($quantity[$meh] != 0)
    {
        printf("%d %10s %9.2f %7.2f\n", $quantity[$meh], $selections[$meh], $prices[$meh], $prices[$meh]*$quantity[$meh])
    }
} 
```

我不知道如何使列对齐。我遵循了另一个帖子的建议，但它仍然无法正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T20:52:33.977

问题是您的字符串长度超过 10 个字符，并且 Perl 不会剪切它们，除非您指定最大宽度，该宽度在字符串的点之后 ( `%10.10s`) 给出。此外，您可能希望使用负数，以便它们向左对齐 ( `%-10.10s`)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T00:16:43.703

很久以前，Perl 主要用于格式化文件。尽管自 Perl 4.x 出现以来我还没有看到它在程序中使用过，但它仍然具有这种功能。

查看[perlform](http://perldoc.perl.org/perlform.html)文档、[format](http://perldoc.perl.org/functions/format.html)函数和[write](http://perldoc.perl.org/functions/write.html)函数。

我会给你一个关于代码是什么样子的例子，除非我已经多年没有这样做了。否则，使用该`printf`语句。您可以使用一种格式来限制文本字段的大小`%-10.10s`。这表示左对齐字符串，并将其填充到 10 个字符，但不超过 10 个字符。

我还建议你买一本关于***现代***Perl 的书。一个会教你[参考](http://perldoc.perl.org/perlreftut.html)的。

我已经重写了您的程序以使用引用。请注意，所有数据现在都在一个数组中，而不是分布在您希望将索引保持在一起的四个单独的数组中。

我可以通过说来谈论*主菜*。它更易于阅读和维护。`$item[1]``$item[1]->{ENTREE}`

另请注意，我已经更改了您的`for`循环。在你的，你必须知道你有七个项目。如果您添加了新项目，则必须更改循环。在我的，我`$#menu`用来获取我的菜单的最后一个索引。然后我使用`(0..$#menu)`自动从 0 循环到`@menu`数组中的最后一项。

```
use strict;
use warnings;
use Data::Dumper;

my @menu = (
    { ENTREE => "Hamburger",    PRICE => 3.49, QUANTITY => 3 },
    { ENTREE => "Frankfurter",  PRICE => 2.19, QUANTITY => 0 },
    { ENTREE => "French Fries", PRICE => 1.69, QUANTITY => 0 },
    { ENTREE => "Large Coke",   PRICE => 1.79, QUANTITY => 4 },
    { ENTREE => "Medium Coke",  PRICE => 1.59, QUANTITY => 0 },
    { ENTREE => "Small Coke",   PRICE => 1.39, QUANTITY => 0 },
    { ENTREE => "Onion Rings",  PRICE => 1.19, QUANTITY => 8 },
);

printf "%-3.3s %-10.10s %-6.6s %s\n\n", 'Qty', 'Desc.', 'Unit $', 'Total';

# Use $#menu to get the number of items in the array instead of knowing it's 6

foreach my $item (0..$#menu) {

    # Dereference $menu[$item] to make $menu_item a hash
    # This makes the syntax easier to read.
    my %menu_item = %{ $menu[$item] };

    if ( $menu_item{QUANTITY} ) {
        printf "%3d %-10.10s %9.2f %7.2f\n",
        $menu_item{QUANTITY}, $menu_item{ENTREE}, $menu_item{PRICE},
        $menu_item{QUANTITY} * $menu_item{PRICE};
    }
} 
```

输出：

```
Qty Desc.      Unit $ Total

  3 Hamburger  3.49   10.47
  4 Large Coke 1.79    7.16
  8 Onion Ring 1.19    9.52 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T22:45:28.403

如果您希望根据动态输入数据精确对齐列，则需要对行进行两次传递。第一次通过，记录每列的最大长度。然后使用这些长度构造一个格式字符串。最后，使用该格式字符串打印每一行。

```
use strict;
use warnings;

my @selections = ("Hamburger","Frankfurter","French Fries","Large Coke","Medium Coke","Small Coke","Onion Rings");
my @prices = (3.49, 2.19, 1.69, 1.79, 1.59, 1.39, 1.19);
my @quantity = (3, 0, 0, 4, 0, 0, 8);

my @rows;
push @rows, ["Qty", "Desc.", "Unit \$", "Total"];

# construct table data as a two-dimensional array
for (my $meh = 0; $meh < @selections; $meh++) {
    next unless $quantity[$meh];
    push @rows, [$quantity[$meh], $selections[$meh], $prices[$meh], $prices[$meh]*$quantity[$meh]];
}

# first pass over rows: compute the maximum width for each column
my @widths;
for my $row (@rows) {
    for (my $col = 0; $col < @$row; $col++) {
        $widths[$col] = length $row->[$col] if length $row->[$col] > ($widths[$col] // 0);
    }
}

# compute the format. for this data, it works out to "%-3s %-11s %-6s %-5s\n"
my $format = join(' ', map { "%-${_}s" } @widths) . "\n";

# second pass: print each row using the format
for my $row (@rows) {
    printf $format, @$row;
} 
```

这产生了这个输出：

```
Qty Desc.       Unit $ Total
3   Hamburger   3.49   10.47
4   Large Coke  1.79   7.16 
8   Onion Rings 1.19   9.52 
```

# java - 列中显示的文本未显示在单元格的正确位置

> ID：13038900
> 
> 赞同：0
> 
> 时间：2012-10-23T20:40:47.017
> 
> 标签：java, swt, tableviewer

在我表的第一列中，显示的值从左边缘偏移。

例子

![在此处输入图像描述](../Images/ce660a0a7af729f0c71027da42bbb5af.png)

注意日期值与 ItemId 值相比的偏移量

```
TableViewerColumn col = new TableViewerColumn(this , SWT.NONE);
  col.getColumn().setWidth(125);
  col.getColumn().setText("Date Created");
  col.setLabelProvider(new ColumnLabelProvider() {
    @Override
    public String getText(Object element) {
       AplotSaveDataModel.SaveData p = (AplotSaveDataModel.SaveData) element;
      return p.getDateTime();
    }
  });

  col = new TableViewerColumn(this , SWT.NONE);
  col.getColumn().setWidth(100);
  col.getColumn().setText("ItemId");
  col.setLabelProvider(new ColumnLabelProvider() {
    @Override
    public String getText(Object element) {
       AplotSaveDataModel.SaveData p = (AplotSaveDataModel.SaveData) element;
      return p.getItemId();
    }
  }); 
```

查看上面的代码，我不明白为什么它们会有所不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T06:38:01.657

这是使用 Windows 时非常烦人的 SWT 错误之一。[这](https://bugs.eclipse.org/bugs/show_bug.cgi?id=43910)是错误报告。在 Windows 中，如果表格包含不在第一列中的图像，则第一列将显示此“间隙”。

您可以通过跳过第一列（不使用它）并将其宽度设置为零来使用脏修复。

据我没记错，这会在使用 MacOS 时引入一些小故障。

* * *

[这里](https://stackoverflow.com/a/12644234/1449199)也有一个非常hacky的解决方法。

# phpunit - phpunit 中的 assertTextPresent 等价物

> ID：13038905
> 
> 赞同：1
> 
> 时间：2012-10-23T20:41:13.147
> 
> 标签：phpunit, assertions

我正在尝试测试长网页中某处是否存在字符串。如果找不到字符串，则使用 PHPUnit 的 assertRegExp 打印出整个页面，然后完成`matches PCRE pattern "/xxxxxx/".`根据[文档](http://www.phpunit.de/manual/3.6/en/writing-tests-for-phpunit.html#writing-tests-for-phpunit.assertions.assertRegExp)，我应该能够指定一条消息，如果测试失败，该消息将被打印出来。该消息被打印出来，然后是整页源代码。我想做的只是打印消息。在我以前使用的应用程序中使用 Selenium，`assertTextPresent`它只会打印出确认文本是否找到/未找到，而不会填满我的屏幕。我已经尝试将它包装`assertRegExp`在一个 try-catch 中，但它并没有改变任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T08:54:39.030

您可以尝试`assertContains()`代替`assertRegexp()`.

PHPUnit 负责打印出失败的文本，这与一种断言方法不同。它可能会起作用。

如果没有，请在[PHPUnit 的问题跟踪器](https://github.com/sebastianbergmann/phpunit/issues)上打开一个关于 PHPUnit 打印过多的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-10T12:06:29.883

我使用 getBodyText() 方法获取所有页面内容，然后使用 assertTextPresent() 检查模式是否存在。

```
 $this->assertTextPresent($this->getBodyText(), 'text to find'); 
```

该解决方案已使用最新的 phpunit 4.7 进行了积极测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-11T18:23:25.257

我用`assertTrue(stripos($haystack, $needle) !== false, 'Failed assertion message');`

# c# - 如何自动更改 Silverlight 文本框中的文本？

> ID：13038909
> 
> 赞同：0
> 
> 时间：2012-10-23T20:41:22.490
> 
> 标签：c#, silverlight, xaml, mvvm, caliburn.micro

我在 silverlight 5 项目中使用 MVVM/Caliburn.Micro，我需要自动将用户在 silverlight 文本框中输入的文本更改为大写。

首先，我认为我可以将 ViewModel 上的支持变量设置为大写，并且双向绑定会更改文本。那没有用（尽管我相信如果我使用失去焦点事件会这样做，但我不能这样做，因为我还必须为 KeyUp 做其他事情，并且附加两个事件会导致 xaml 错误）

由于那不起作用，我尝试在 KeyUp 事件上调用方法。这在*技术上*是可行的，但是由于它正在替换文本，因此会将光标放回开头，因此用户最终会向后键入。

这似乎是相当简单的功能——如何将用户输入的文本转换为大写？我错过了一些简单的事情吗？

这是我现有的代码。xml:

```
<TextBox x:Name="SomeName" cal:Message.Attach="[Event KeyUp] = [Action ConvertToUppercase($eventArgs)]" /> 
```

查看型号：

```
public void ConvertToUppercase(System.Windows.Input.KeyEventArgs e)
{
     SomeName = _someName.ToUpper();
     //Other code that doesn't concern uppercase
} 
```

**编辑替代解决方案：** McAden 提出了一个很好的通用解决方案。我也几乎同时意识到有一个替代解决方案（只需将文本框作为参数传递给大写方法并移动光标），所以这里也是代码：

xml:

```
<TextBox x:Name="SomeName" cal:Message.Attach="[Event KeyUp] = [Action ConvertToUppercase($source, $eventArgs)]; [Event KeyDown] = [Action DoOtherStuffThatIsntQuestionSpecific($eventArgs)]" /> 
```

cs方法：

```
public void ConvertToUppercase(TextBox textBox, System.Windows.Input.KeyEventArgs e)
{
    //set our public property here again so the textbox sees the Caliburn.Micro INPC notification fired in the public setter
    SomeName = _someName.ToUpper();

    //move the cursor to the last so the user can keep typing
    textBox.Select(SomeName.Length, 0);
} 
```

当然还有 cs 标准 Caliburn.Micro 属性：

```
private String _someName = "";
public String SomeName
{
    get
    {
        return _someName;
    }
    set
    {
        _someName = value;
        NotifyOfPropertyChange(() => SomeName);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T21:08:42.580

[如此处所述，](https://stackoverflow.com/questions/4097597/character-casing-in-silverlight-4-textbox)创建一个 ToUpper EventTrigger 。还为您尝试完成的任何其他功能创建另一个。在 xaml 中添加它们：

```
<TextBox Text="{Binding SomeName, Mode=TwoWay}">
    <i:Interaction.Triggers>
        <i:EventTrigger EventName="TextChanged">
            <myBehaviors:UpperCaseAction/>
        </i:EventTrigger>
        <i:EventTrigger EventName="TextChanged">
            <myBehaviors:MyOtherAction/>
        </i:EventTrigger>
    </i:Interaction.Triggers>
</TextBox> 
```

**编辑**：我已经使用以下方法完全测试了这个解决方案（*不涉及代码隐藏*）

大写动作：

```
public class UpperCaseAction : TriggerAction<TextBox>
{
    protected override void Invoke(object parameter)
    {
        var selectionStart = AssociatedObject.SelectionStart;
        var selectionLength = AssociatedObject.SelectionLength;
        AssociatedObject.Text = AssociatedObject.Text.ToUpper();
        AssociatedObject.SelectionStart = selectionStart;
        AssociatedObject.SelectionLength = selectionLength;
    }
} 
```

其他行动：

```
public class OtherAction : TriggerAction<TextBox>
{
    Random test = new Random();

    protected override void Invoke(object parameter)
    {
        AssociatedObject.FontSize = test.Next(9, 13);
    }
} 
```

XAML 命名空间（*本例中的 TestSL 是我的测试项目的命名空间 - 酌情使用您的命名空间*）：

```
xmlns:local="clr-namespace:TestSL"
xmlns:i="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity" 
```

XAML 文本框

```
<Grid x:Name="LayoutRoot" Background="LightGray" Width="300" Height="200">
    <TextBox TextWrapping="Wrap" VerticalAlignment="Center" HorizontalAlignment="Center" Margin="10" Width="100">
        <i:Interaction.Triggers>
            <i:EventTrigger EventName="TextChanged">
                <local:UpperCaseAction />
            </i:EventTrigger>
            <i:EventTrigger EventName="TextChanged">
                <local:OtherAction />
            </i:EventTrigger>
        </i:Interaction.Triggers>
    </TextBox>
</Grid> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-20T12:49:59.670

大写转换器.cs：

```
namespace MyProject.Converters
    {
        /// <summary>
        /// A upper case converter for string values.
        /// </summary>
        public class UpperCaseConverter : IValueConverter
        {
            public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
            {
                return ConvertToUpper(value);
            }

            public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
            {
                return ConvertToUpper(value);
            }

            private string ConvertToUpper(object value)
            {
                if (value != null)
                {
                    return value.ToString().ToUpper();
                }
                return null;
            }
        }
    } 
```

AppResources.xaml：

```
<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:conv="clr-namespace:MyProject.Converters;assembly=MyProject"
    mc:Ignorable="d"
    >

    <!-- Converters -->
    <conv:UpperCaseConverter x:Key="UpperCaseConverter"/>

</ResourceDictionary> 
```

MyFormView.xaml：

```
<UserControl>
    <TextBox Text="{Binding myText, Mode=TwoWay, Converter={StaticResource UpperCaseConverter}}" />
</UserControl> 
```

# git - 如何从 Intellijj IDEA 项目中的 Git 索引中删除文件？

> ID：13038914
> 
> 赞同：3
> 
> 时间：2012-10-23T20:42:10.983
> 
> 标签：git, intellij-idea

如何使用 Intellijj IDEA 工具从 Intellijj IDEA 项目中的 Git 索引中删除文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-18T16:12:44.163

我认为您可以以这种方式对 IntelliJ 进行的唯一操作是使用“修改提交”功能。

当您下次提交时，会出现一个名为“修改提交”的复选框（右上角）。如果您选择它，它将允许您更改提交消息并将文件添加到先前的提交。

至于对索引的进一步操作，例如撤消一些提交。看看命令行和 git reset 命令。

```
git help reset 
```

# ios - 如何使用找到的人脸坐标（核心图像）

> ID：13038915
> 
> 赞同：3
> 
> 时间：2012-10-23T20:42:14.650
> 
> 标签：ios

```
 UIImage* image = [UIImage imageNamed:@ "face.png" ];  
    UIImageView testImage = [[UIImageView alloc] initWithImage: image];  
    [testImage setTransform:CGAffineTransformMakeScale(1, -1)];  
    [[[UIApplication sharedApplication] delegate].window setTransform:  
CGAffineTransformMakeScale(1, -1)];  
    [testImage setFrame:CGRectMake(0, 0, testImage.image.size.width,  
testImage.image.size.height)];  
    [self.view addSubview:testImage];  

    CIImage* ciimage = [CIImage imageWithCGImage:imag​​e.CGImage];  
    NSDictionary* opts = [NSDictionary dictionaryWithObject:  
CIDetectorAccuracyHigh forKey:CIDetectorAccuracy];  
    CIDetector* detector = [CIDetector detectorOfType:CIDetectorTypeFace  
context:nil options:opts];  
    NSArray* features = [detector featuresInImage:ciimage];  

    for  (CIFaceFeature *faceFeature in features)
    {  

        CGFloat faceWidth = faceFeature.bounds.size.width;  

        UIView* faceView = [[UIView alloc] initWithFrame:faceFeature.bounds];                    

        faceView.layer.borderWidth = 1;  
        faceView.layer.borderColor = [[UIColor redColor] CGColor];  

        [self.view addSubview:faceView];          
    } 
```

我怎样才能找到面部坐标？

我尝试使用`facefeature.bounds.origin.x`和`facefeature.bounds.origin.y`

但有时，它不是正确的坐标

我怎样才能找到坐标？

------------------2016/04/10-----------------这是我的问题 ios x,y 是与c#相反

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T20:59:58.093

这是它背后的基本思想，CIDetector 允许您从图像中推断出左眼、右眼和嘴巴的点。从中我们可以做一些基本的数学运算来创建一个跨越这些点的矩形，例如

```
for  (CIFaceFeature *faceFeature in features)
{
    CGPoint lefteye = faceFeature.leftEyePosition;
    CGPoint righteye = faceFeature.rightEyePosition;
    CGPoint mouth = faceFeature.mouthPosition;
    //Face Rectangle
    CGRect faceRectangle = CGRectMake(lefteye.x, lefteye.y, righteye.x - lefteye.x, mouth.y - righteye.y);
    //Face Center
    CGPoint faceCenter = CGPointMake(faceRectangle.origin.x + (faceRectangle.size.width / 2), faceRectangle.origin.y + (faceRectangle.size.height / 2));
    UIView* faceView = [[UIView alloc] initWithFrame:faceRectangle];

    faceView.layer.borderWidth = 1;
    faceView.layer.borderColor = [[UIColor redColor] CGColor];

    [self.view addSubview:faceView];          
} 
```

请记住，我现在不是在计算机上为您测试这部分功能，但我相信探测器输出的坐标与输入图像的分辨率相符。当尝试使用 iOS 的点坐标系统将创建矩形应用到屏幕视图时，这会导致不准确。话虽如此，您所要做的就是通过`convertRect`函数运行新创建的矩形以获得正确的坐标。

# iphone - 导航 plist 和设置对象

> ID：13038919
> 
> 赞同：0
> 
> 时间：2012-10-23T20:42:34.830
> 
> 标签：iphone, objective-c, ios, plist, nsmutabledictionary

我有一个资源文件（plist）添加到我的项目中。我目前正在编写某种“助手”来读写它。我有 3 个 get 和 3 个 set 方法。第一个返回顶部的对象，第二个返回另一个字典中的对象（参见代码），第三个返回任何给定深度的对象我只需要指定节点名称就可以到达那里。（希望你能理解我）

问题来自于二传手。设置“表面”对象没什么大不了的，设置另一个字典中的对象也是如此。当我尝试将对象设置在某个深度时，问题就来了。在我写任何其他内容之前，我将发布代码，以便您理解我在说什么。

fullContent 是一个`NSMutableDictionary`包含文件。

```
//This one is easy, just return the object for the key.
- (id)getSurfaceObjectForKey:(NSString*)key
{
    return [fullContent objectForKey:key];
}

//Hope you understand this one. Main parent is a string with the name of the first node. It gets a dictionary out of my plist and returns an object for key (I have a dictionary structured plist)
- (id)getMainParentChildObjectForKey:(NSString*)key
{
    NSAssert(!mainParent, @"Main parent must not be nil");

    return [[fullContent objectForKey:mainParent] objectForKey:key];
}

//This one gets the element at any given depth I just have to pass in an array containing node names
- (id)getObjectForKey:(NSString *)key atDepthWithChildren:(NSArray *)children
{
    id depthElement = fullContent;

    for (int i = 0; i < children.count; i++)
        depthElement = [depthElement objectForKey:[children objectAtIndex:i]];

    return [depthElement objectForKey:key];
}

//Sets a top (surface) object
- (void)setSurfaceObject:(id)object ForKey:(NSString *)key
{
    [fullContent setObject:object forKey:key];
    [self writePlistContent];
}

//Sets an object inside a dictionary (mainParent - string with the name of dictionary node)
- (void)setMainParentChildObject:(id)object forKey:(NSString *)key
{
    [[fullContent objectForKey:mainParent] setObject:object forKey:key];
    [self writePlistContent]; //Self explanatory. I write this to file
}

//This is where my problem comes. How do I save this to plist without making any other changes to it? Im guessing I have to rebuild it from inside up?
- (void)setObject:(id)object forKey:(NSString *)key atDepthWithChildren:(NSArray *)children
{
    id depthElement = fullContent;

    for (int i = 0; i < children.count; i++)
        depthElement = [depthElement objectForKey:[children objectAtIndex:i]];

    [depthElement setObject:object forKey:key]; //I set the desired object but I dont know how to save it

    for (int i = 0; i < children.count - 1; i++)
    {
        //Here i guess i would have to build the NSDictionary from inside out. Using a NSMutable array perhaps?
    }
} 
```

我希望你能理解我的问题。我希望我不要把事情复杂化太多。我真的很累，现在已经将近 24 小时了，想不出解决这个问题的方法。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T21:01:30.537

我不明白你为什么不只使用你的：

```
[self writePlistContent]; 
```

保存它。

当然，它会保存 plist 的全部内容。

# sharepoint - 使用 ssis 将数据传输到共享点

> ID：13038926
> 
> 赞同：0
> 
> 时间：2012-10-23T20:43:48.510
> 
> 标签：sharepoint

是否可以将数据从 SSIS 传输到 SharePoint 并将 csv 放在共享点列表中。我尝试使用 ssis 自动执行此操作，并且由于某种原因，当我在计划任务下执行包时，包将不会运行....如果我创建计划任务并运行 dtexec （和包路径），这将不会在计划任务，但如果我使用 .bat 文件并输入相同的命令脚本，它将运行。我正在使用可以访问共享点站点的凭据。似乎没有办法自动将 csv 文件放到共享点上。

[http://social.msdn.microsoft.com/Forums/en/sharepoint2010programming/thread/905fd9fb-ae70-4335-9628-d28d040f0bdc](http://social.msdn.microsoft.com/Forums/en/sharepoint2010programming/thread/905fd9fb-ae70-4335-9628-d28d040f0bdc) http://social.msdn.microsoft.com/Forums/en/sharepointdevelopment/thread/d59bbc46 -27b4-468e-9ed6-70435200bef2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T09:31:38.003

虽然我还没有在生产环境中使用它的需要，但我相信这个自定义组件会满足您的需求 :) [http://ssisctc.codeplex.com/wikipage?title=SharePoint](http://ssisctc.codeplex.com/wikipage?title=SharePoint) List Destination&referringTitle=Home

# javascript - 任何人都可以帮我找到一个在鼠标移动事件时在谷歌地图上弹出信息窗口的例子吗？

> ID：13038927
> 
> 赞同：0
> 
> 时间：2012-10-23T20:43:51.713
> 
> 标签：javascript, google-maps

我想知道是否有任何我可以参考的 javascript 示例：我使用 Oracle APEX 构建了一个 Google 地图 javascript。在这个应用程序中，我需要让我的 javascript 代码以这种方式工作，每当我的鼠标移动到谷歌地图上的一个大头针图标时，信息窗口就会弹出，当鼠标移开时，信息窗口就会消失。我对javascript不熟悉，我希望我能知道我可以使用哪个术语在论坛中搜索以查找示例。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-08T12:31:59.790

像这样的东西：

```
google.maps.event.addListener(marker, 'mouseover', function() {
    infowindow.open(map,marker);
}); 
```

[https://developers.google.com/maps/documentation/javascript/examples/infowindow-simple](https://developers.google.com/maps/documentation/javascript/examples/infowindow-simple)

# web-services - 如何在 Eclipse 中为 spring 3.1 自动装配引用另一个项目？

> ID：13038928
> 
> 赞同：1
> 
> 时间：2012-10-23T20:43:58.623
> 
> 标签：web-services, spring, spring-mvc, annotations

我正在使用tomcat 6x，带有注释的spring 3.1，cxf 2.2x。我有一个 Web 服务项目，我们称之为我在主项目中引用的 wsproject，我们称之为 myproject。我使用 Eclipse 中的 configurebuildpath 将 wsproject 的项目引用添加到 myproject 中。我一切正常，并且能够从主项目转到 Web 服务项目中的代码。

但是，现在，当我尝试将服务（例如 myservice 从 wsproject 自动装配到控制器中）时，例如 myproject 中的 mycontroller，spring 会抛出此错误：

**没有为依赖项找到类型为 [com.service.MyService] 的匹配 bean：预计至少有 1 个 bean 有资格作为此依赖项的自动装配候选者。依赖注释：{}**

我在 servlet-context.xml 中有这个：

```
<annotation-driven />
...
<context:annotation-config/>
<context:component-scan base-package="com.myproject" />

 <beans:import resource="classpath*:/WEB-INF/spring/serviceServlet/service-context.xml"/>
<context:component-scan base-package="com.service.myService"/>  

<beans:bean id="myService" class="com.service.myServiceImpl">
    <beans:property name="myService" ref="myService" />
</beans:bean> 
```

在 MyController 类中我有：

```
@Controller
public class MyController {
    @Autowired
    private MyService myService;
... 
```

在我拥有的服务上：

```
 @Service
    @WebService(targetNamespace = "http://...")
    public interface MyService {

//more methods ... 
```

但似乎 Spring 出于某种原因找不到其他项目。因此，当我启动应用程序时，我会在加载时收到此错误。任何想法这里有什么问题？

我确实将项目导入 STS，在 spring explorer 下我可以看到这个额外的服务上下文没有加载，所以这似乎是问题的根本问题。此处未正确配置某些内容。

**后果：**

我实际上并没有指向第二个项目中的代码，即使 eclipse 似乎正在使用它。当我在 Maven 中删除原始战争依赖项时，出现了编译错误。因此，即使 eclipse 在服务项目中的断点处停止，该代码实际上并没有运行。我不知道那是怎么回事，但确实如此。

所以，我删除了服务项目作为对客户端项目的引用，将其打包为一个战争并在 tomcat 上运行它。这解决了我的参考问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T21:04:23.033

我会做一些不同的事情。我会在两个项目中创建一个弹簧配置。给它一个不同的名字，比如`service-context.xml`. 然后在主配置中导入其他配置。

```
<annotation-driven/>
...
<import resource="classpath:service-context.xml"/>
<context:annotation-config/>
<context:component-scan base-package="com.myproject"/> 
```

如果在构建路径配置中正确引用了您的其他项目，这应该可以工作。

无论如何，如果你想用依赖项构建项目（不仅是你的其他项目，还有 spring 依赖项），你真的想看看[Maven](http://maven.apache.org/)和 m2eclipse 插件。我不会在这里给出完整的教程，因为已经有很多可用的了。`pom.xml`如果您阅读一些基础知识并决定使用它，我可以为您提供一些帮助。

# jquery - 存储从 jQuery.POST 作为答案接收的数据

> ID：13038931
> 
> 赞同：1
> 
> 时间：2012-10-23T20:44:16.220
> 
> 标签：jquery

我需要将收到的所有数据保存为 POST 函数的答案。

```
jQuery.post( url [, data] [, success(data, textStatus, jqXHR)] [, dataType] ) 
```

如果我理解正确，函数调用 url (something.php) 并以**data**响应。有什么办法可以将接收到的数据存储在我的硬盘上？或者也许将接收到的数据发送到我的服务器上的其他地方，我可以将它们存储在 DBS 中，或者以其他方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T20:49:42.080

```
jQuery.post('/someurl.php',
    {one:'value1',two:'value2'},
    function( response ) { alert(response); } ); 
```

在 someurl.php 上，您将通过以下方式获得这些值：

```
$oneValue = $_POST['one'];
$twoValue = $_POST['two'];

echo '{success:1}'; 
```

如何保存它们取决于 PHP 代码。

**编辑** JavaScript 具有访问本地计算机的特定限制。否则任何黑客的脚本都可以将文件保存到您的计算机上，这是我们不希望的。

您在上面的评论中提到了 localhost ，这听起来很可能是最好的方法。发布到站点，获取响应，然后将响应发布到您的本地主机服务器，您可以访问服务器端代码以便能够将其保存到您的计算机。就像是：

```
jQuery.post('/someurl.php', {}, function( data ) { 
    jQuery.post('http://localhost/save.php', data, function() { alert('saved'); ]);
} ); 
```

# ruby-on-rails - 在rails中，我将如何根据全局设置输出正在使用的视图文件的名称

> ID：13038933
> 
> 赞同：1
> 
> 时间：2012-10-23T20:44:26.227
> 
> 标签：ruby-on-rails

我想设置一个全局变量，例如 SHOW_VIEW_FILES ，当设置为 true 时，将`__FILE__`在视图文件的顶部输出（基本上是为了让我们可以快速看到哪些文件被使用而不是跟踪代码）？正在考虑可能有一个字符串被附加到视图输出并且可以将它添加到那里的顶部。

或者在每个视图文件的顶部自动注入对方法的调用？像这样的东西是否已经存在-我认为它应该像单线。

关于如何完成这项工作的任何想法？更好的方法是抑制正常输出并输出树结构（显然不仅仅是单线）。

提前谢谢

# javascript - 使用 JavaScript 将笛卡尔 (ECEF) 转换为 WGS84 (Lat/Long Decimal)

> ID：13038937
> 
> 赞同：2
> 
> 时间：2012-10-23T20:44:41.827
> 
> 标签：javascript, mapping, geospatial

我有一个 javascript 文件正在读取包含笛卡尔坐标的文本文件。我可以解析出 X、Y、Z 值；但是我需要将这些转换为十进制格式的纬度/经度。这些输出值将用于谷歌地图标记。

我一直在研究，肯定有很多关于将纬度/经度转换为笛卡尔的指南，但是我需要它来反方向工作。

尝试了一些类似的东西：

```
//convert to lat long dec
var tmp = cartZ/6371;
//convert to radians
var tmpR = tmp * Math.PI / 180;
var lat = Math.asin(tmpR);
latFinal = lat * 180 / Math.PI;
alert (latFinal); 
```

通常这是完全错误的......不确定我是否走在正确的轨道上！

如果有人在使用 javascript 之前已经这样做了，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T19:21:20.113

我最终使用了以下内容：[javascript 例程](http://clynchg3c.com/Software/jscript.htm)

正是我需要的。希望这篇文章对其他人有所帮助。谢谢！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T20:53:22.147

您可以尝试使用[proj4js](http://trac.osgeo.org/proj4js/)库为您进行转换。看到[这个问题](https://stackoverflow.com/questions/11051749/longitude-latitude-wgs84-to-polyconic-transformation-conversion/11052943)- 投影是不同的，但你应该能够弄清楚。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-06T23:45:05.520

npmjs.org 上有这个方便的库可以为您完成。一旦你安装了它（使用 npm 和 browserify），你可以使用：

```
var projector = require('ecef-projector');
var xyz = projector.project(37.8043722, -122.2708026, 0.0);
console.log(xyz);  
// output: [ -2694044.4111565403, -4266368.805493665, 3888310.602276871 ]

var gps = projector.unproject(xyz[0], xyz[1], xyz[2]);
console.log(gps);
// output: [ 37.8043722, -122.27080260000001, 0.0 ] 
```

使用它，您可以两种方式进行投影。

# php - mysql PHP查询中的列名无效

> ID：13038942
> 
> 赞同：2
> 
> 时间：2012-10-23T20:45:02.293
> 
> 标签：php, sql-server, database

我让以下表单正常工作并填充 MySQL DB。从那以后，我在我的数据库中添加了一个新字段“类型”，并将其添加到表单中。但是现在当我尝试添加一个新条目时，它会显示“无效的列名'类型'”。任何帮助将不胜感激。

```
<script>
      $(document).ready(function() {
        $("#datepicker").datepicker();
      });
      </script>

  <script>
$(document).ready(function() {
$("#datepicker2").datepicker();
});
</script>

 </head>
 <body>
 <?php 
 // if there are any errors, display them
 if ($error != '')
 {
 echo '<div style="padding:4px; border:1px solid red; color:red;">'.$error.'</div>';
 }
 ?> 

  <form action="" method="post">
 <div>
 <label for="Posted"><strong>Posted: </strong> </label>
 <input id="datepicker"  name="posted" value="<?php echo $Posted; ?>" /><br/><br/>

 <label for="Ends"><strong>Ends: </strong> </label>
 <input id="datepicker2"  name="ends" value="<?php echo $Ends; ?>" /><br/><br/>

 <label for="Position"><strong>Position: </strong></label>
  <input type="text" name="position" value="<?php echo $Position; ?>" /><br/><br/>

  <label for="Location"><strong>Location: </strong> </label>
 <select name="location">
  <option value=" ">Select...<?php echo $Location; ?></option>
  <option value="Fargo">Fargo</option>
  <option value="Grand Forks">Grand Forks</option>
</select><br/><br/>

<label for="Application Type"><strong>Application Type: </strong> </label>
  <select name="type">
  <option value=" ">Select...<?php echo $Type; ?></option>
  <option value="Driver">Driver</option>
  <option value="Employee">Employee</option>
</select><br/><br/>

 <label for="Hours"><strong>Hours: </strong> </label>
 <input type="text" name="hours" value="<?php echo $Hours; ?>" /><br/><br/>

 <label for="Pay"><strong>Pay: </strong> </label>
 <input type="text" name="pay" value="<?php echo $Pay; ?>" /><br/><br/>

 <label for="Benefits"><strong>Benefits: </strong> </label>
 <textarea cols="60" rows="2" name="benefits" value="<?php echo $Benefits; ?>" ><?php echo $Benefits; ?></textarea><br/><br/>

 <label for="Description"><strong>Description: </strong> </label>
 <textarea cols="60" rows="3" name="description" value="<?php echo $Description; ?>" ><?php echo $Description; ?></textarea><br/><br/>

 <input type="submit" name="submit" value="Submit">
 </div>
 </form> 
 </body>
 </html>
 <?php 
 }

 // connect to the database
 include('connect-db.php');

 // check if the form has been submitted. If it has, start to process the form and save it to the database
 if (isset($_POST['submit']))
 { 
 // get form data, making sure it is valid

 function ms_escape_string($data) {
        if ( !isset($data) or empty($data) ) return '';
        if ( is_numeric($data) ) return $data;

        $non_displayables = array(
            '/%0[0-8bcef]/',            // url encoded 00-08, 11, 12, 14, 15
            '/%1[0-9a-f]/',             // url encoded 16-31
            '/[\x00-\x08]/',            // 00-08
            '/\x0b/',                   // 11
            '/\x0c/',                   // 12
            '/[\x0e-\x1f]/'             // 14-31
        );
        foreach ( $non_displayables as $regex )
            $data = preg_replace( $regex, '', $data );
        $data = str_replace("'", "''", $data );
        return $data;
    }

    ms_escape_string($_POST);

     $posted=$_POST['posted'];
     $ends=$_POST['ends'];
     $type=$_POST['type'];
     $position=$_POST['position'];
     $location=$_POST['location'];
     $hours=$_POST['hours'];
     $pay=$_POST['pay'];
     $benefits=$_POST['benefits'];
     $description=$_POST['description'];

 // check to make sure all fields are entered
 if ($posted == '' || $ends == '' || $type == '' || $position == '' || $location == '' || $hours == '' || $pay == '' || $benefits == '' || $description == '')
 {
 // generate error message
 $error = 'ERROR: Please fill in all required fields!';

 // if any fields are blank, display the form again
 renderForm($posted, $ends, $type, $position, $location, $hours, $pay, $benefits, $description, $error);
 }
 else
 {
 // save the data to the database
    $SQL = "INSERT INTO JobPosting (posted, ends, type, position, location, hours, pay, benefits, description) VALUES ('$posted', '$ends', '$type', '$position', '$location', '$hours', '$pay', '$benefits', '$description')";

     $result = mssql_query($SQL) 
        or die (mssql_get_last_message());  

 // once saved, redirect back to the view page
 header("Location: view.php"); 
 }
 }
 else
 // if the form hasn't been submitted, display the form
 {
 renderForm('','','','','','','','','','');
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T20:47:50.030

您将需要转义`type`查询中的列名，即`type`因为`type`它是 MySQL 语法中的保留工作。

你到底是怎么逃避`标记的？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T20:50:23.290

`type`是 MS SQL 中的保留字。这意味着它用于其他 MS SQL 操作。`select`同样，如果您有一个名为or的列，您会遇到麻烦`group`

您可以使用方括号对保留字进行转义：`[]`

```
$SQL = "INSERT INTO JobPosting (posted, ends, [type], position, location, hours, pay, benefits, description) VALUES ('$posted', '$ends', '$type', '$position', '$location', '$hours', '$pay', '$benefits', '$description')"; 
```

# rest - RESTful API URI 设计

> ID：13038943
> 
> 赞同：13
> 
> 时间：2012-10-23T20:45:03.910
> 
> 标签：rest, uri, restful-url, restful-architecture

我正在寻找有关 RESTful API 的 URI 设计的方向。我将有几个嵌套的链接资源，目前我的 URI 设计类似于这篇文章：[Hierarchical RESTful URL design](https://stackoverflow.com/questions/7833548/hierarchical-restful-url-design)

以下示例不是我正在构建的，但我认为很好地说明了我的情况。（假设一个节目只能属于一个网络）。

```
/networks [GET,POST]
/networks/{network_id} [GET,PUT]
/networks/{network_id}/shows [GET,POST]
/networks/{network_id}/shows/{show_id} [GET,PUT]
/networks/{network_id}/shows/{show_id}/episodes [GET,POST]
/networks/{network_id}/shows/{show_id}/episodes/{episode_id} [GET,PUT] 
```

我的情况将通过关联进一步发展两个层次，但所有关联都是一对多的。我正在考虑将其切换为类似于以下内容：

```
/networks [GET,POST]
/networks/{network_id} [GET,PUT]
/networks/{network_id}/shows [GET,POST]

/shows [GET]
/shows/{id} [GET,PUT]
/shows/{id}/episodes [GET,POST]

/episodes [GET]
/episodes/{id} [GET,PUT] 
```

我的问题是：

1.  第二个示例是有效的 REST 设计吗？
2.  我应该考虑实现这两条路径吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T20:51:33.540

第二个例子对我来说很好。URL 是对资源的描述，并且使用了正确的 HTTP 动词。

如果有意义的话，让多个 URL 指向同一个资源是完全可以的。但更重要的是，确保资源包含`<link />`将节目与网络、剧集与节目等相关联的元素。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-01-09T15:30:59.020

这里真正的问题是：您的第二个示例是否满足 URI 标准？URI 标准规定，路径包含分层部分，查询包含非分层部分，但是 afaik。它没有说明如何在您的情况下设计 URI 结构。REST 统一接口约束有一个 HATEOAS 部分，这意味着您应该在您的情况下发回指向上层和下层资源的链接。您应该使用元数据注释这些链接，这些元数据可以由客户端处理，因此它会知道链接是关于什么的。所以在实践中URI结构并不重要......

`GET /shows/123`

```
{
    "label": "The actual show",
    "_embedded": {
        "episodes": [
            {
                "label":  "The first episode of the actual show",
                "_embedded": {
                    "associations": [
                        //...
                    ]
                },
                "_links": {
                    "self": {
                        "label": "Link to the first episode of the actual show",
                        "href": "/episodes/12345"
                    },
                    "first": {
                        "href": "/episodes/12345"
                    },
                    "duplicate": {
                        "href": "/networks/3/shows/123/episodes/12345"
                    },
                    "up": {
                        "label": "Link to the actual show",
                        "href": "/shows/123"
                    },
                    "next": {
                        "label": "Link to the next episode of the actual show"
                        "href": "/episodes/12346"
                    },
                    "previous": null,
                    "last": {
                        "href": "/episodes/12350"
                    }
                }
            }//,
            //...
        ]
    },
    "_links": {
        "self": {
            "label": "Link to the actual show",
            "href": "/shows/123"
        },
        "duplicate": {
            "href": "/networks/3/shows/123"
        },
        "up": {
            "label": "Link to the actual network",
            "href": "/networks/3"
        },
        "collection": {
            "label": "Link to the network tree",
            "href": "/networks"
        },
        "next": {
            "label": "Link to the next show in the actual network",
            "href": "/shows/124"
        },
        "previous": {
            "label": "Link to the previous show in the actual network",
            "href": "/shows/122"
        }
    }
} 
```

现在这只是 HAL+JSON 中带有 IANA 链接关系的测试版，但您也可以将 JSON-LD 与 RDF 词汇表（例如 schema.org+hydra）一起使用。这个例子只是关于层次结构（上，第一个，下一个，上一个，最后一个，集合，项目等...），但您应该添加更多元数据，例如哪个链接指向网络，哪个链接指向一个节目，以及哪个链接一集，等等......所以您的客户将从元数据中知道内容是关于什么的，例如，他们可以使用链接自动导航。这就是 REST 的工作方式。所以 URI 结构对客户端来说并不重要。（如果你想让你的响应更紧凑，你也可以使用紧凑的 URI 和 URI 模板。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T21:17:37.937

URI 是“可以命名的任何信息”

您的问题是与域相关的问题，只有知道您使用 URI 命名的资源的人才能真正回答。

尝试猜测您的域时想到的问题是，“节目”真的依赖于“网络”吗？

您的域中的网络是什么？节目和网络是什么关系？只是单纯的播过节目的人吗？还是更多地与生产信息有关？

我相信您的示例 2 更合适。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-23T21:03:00.310

考虑到您在以下层次结构中有一对多关系：

```
network --> shows --> episodes 
```

我认为第二种设计没有向服务器端提供足够的信息来处理您的请求。例如，如果您有以下数据：

```
Network id  show_id episode_id
    1         1        1
    1         2        1
    1         1        2 
```

第一个详细的设计将在 HTTP 请求中提供足够的信息来获取数据：`/networks/1/shows/1/episodes/1`

相反，第二种设计将具有：

```
/episodes/1 
```

在第二种设计中，服务器端无法知道您是指数据中的第 1 行还是第 2 行

要回答您的问题：

1.  恕我直言，第二个设计对于您的示例可能不是有效的 REST 设计。一种解决方法可能是传递查询参数

2.  我认为设计 1 是自给自足的

**更新：请忽略我上面的回答**

1.  第二种设计是您示例的有效 REST 设计
2.  只有设计2就足够了

此外：

```
/networks
/networks/{id}

/shows
/shows/{id}

/episodes
/episodes/{id} 
```

应该有足够数量的 REST URL

或者换句话说，以下 URL 将是多余的：

```
/networks/{network_id} [GET,PUT]
/networks/{network_id}/shows [GET,POST]

/shows/{id}/episodes [GET,POST] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-09T17:32:23.347

我认为第二个选项是好的，但如果你想验证关系，我会考虑第一个选项。例如，当您使用不同的网络获得一集时，这可能意味着该集在您的请求之前已被修改，因此您可能需要使用 422 响应，对于其他服务也是如此。有了这个，您可以确定您想要工作的实体涉及其父级。

PD：对不起我的英语。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-23T21:21:07.810

我认为我们应该尽可能简单地保持 REST API URL。

例如[https://www.yoursite.com/api/xml/1.0/](https://www.yoursite.com/api/xml/1.0/)

这里我以 1.0 版的 XML API 为例。请记住为将来的更新使用 API 的版本。

您可以检查客户端请求的方法。

```
e.g. tag

<method>getEpisodes</method> 
```

# sqlite - Trac sqlite日期查询

> ID：13038948
> 
> 赞同：2
> 
> 时间：2012-10-23T20:45:19.967
> 
> 标签：sqlite, datetime, timestamp, trac

我正在为我的门票生成一份包含创建日期的报告，这真是太棒了。

这是我的sqlite查询（我直接查询数据库）

```
.header on
.mode csv
.output opentickets.csv
SELECT DISTINCT
   id AS ticket, summary, status, priority, t.type AS type, 
   owner, time as created

  FROM ticket t, ticket_custom q
  LEFT JOIN enum p ON p.name = t.priority AND p.type = 'priority'
  WHERE t.id = q.ticket AND status <> 'closed'
 ORDER BY  priority, time; 
```

但是我在创建时得到的值是垃圾：我得到 1341324096360000 当我应该得到 2012-07-03

我试过 unix 纪元时间转换...查询：

```
.header on
.mode csv
.output opentickets.csv
SELECT DISTINCT
   id AS ticket, summary, status, priority, t.type AS type, 
   owner, datetime(time, 'unixepoch') as created

  FROM ticket t, ticket_custom q
  LEFT JOIN enum p ON p.name = t.priority AND p.type = 'priority'
  WHERE t.id = q.ticket AND status <> 'closed'
 ORDER BY  priority, time; 
```

我得到：-1413-03-01 13:07:12

我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T12:57:38.357

CL 是正确的，时间以微秒为单位存储。您可以在[架构](http://trac.edgewall.org/wiki/TracDev/DatabaseSchema/TicketSystem)中看到时间字段是 int64 并且在.12 的[发行说明](http://trac.edgewall.org/wiki/TracDev/ReleaseNotes/0.12)中说他们已将时间从“自纪元以来的秒数”更改为“自纪元以来的微秒数”。

至于我在 Trac 查询中显示时间的经验，我不需要进行任何转换。这是我用来显示过去 7 天所有更改票证的查询。如您所见，我将工单更改时间显示为选择的一部分，并且 Trac 正确格式化了它。Trac 将自动将创建、修改、日期、时间字段格式化为日期和/或时间。有关更多详细信息，请参阅此[Trac wiki 页面](http://trac.edgewall.org/wiki/TracReports#Automaticallyformattedcolumns)。

```
 SELECT 
tc.Ticket AS ticket, 
tc.Time as time, 
c.value as  __group__,
ifnull(tc.Newvalue,0) as total,
tc.Author  AS author,         
tc.Field as field     
from ticket_change tc 
LEFT JOIN ticket t on t.id = tc.ticket
LEFT JOIN ticket_custom c on c.ticket = tc.ticket and c.name= 'customer'
LEFT JOIN ticket_custom tt on tt.ticket = tc.ticket and tt.name = 'totalhours'
where field = 'hours' and c.Value is not null
and tc.Time > strftime('%s',CURRENT_DATE-7) +0
and tc.Time < strftime('%s',CURRENT_DATE) +0
and tc.Author = $USER
and tt.value is not null 
```

如果您想做一些特殊的格式化，请按时查看[SQLite 文档](http://www.sqlite.org/lang_datefunc.html)，但这里有一个简单的示例

```
strftime('%m/%d/%Y', time / 1000000, 'unixepoch', 'localtime') 
```

我希望这有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T08:17:32.763

Unix 时间戳以秒为单位，但这些值似乎是微秒：

```
> SELECT datetime(1341324096360000 / 1000000, 'unixepoch');
2012-07-03 14:01:36 
```

# matlab - 将参数传递给 Matlab 中的函数时使用 varargin？

> ID：13038949
> 
> 赞同：0
> 
> 时间：2012-10-23T20:45:21.967
> 
> 标签：matlab

我有一个名为 viewcsi(varargin) 的函数，我想最多传入三个变量。第一个是我制作的 MBSspectrum 类，然后是一个字符串和一个数字。

viewcsi 是一个回调，它的调用方式如下：

```
...'ButtonDownFcn','viewcsi(''pickvox_cb'', sp_viewcsi)'); 
```

sp_viewcsi 是我制作的 MBSspectrum 类，位于工作区中。我希望能够添加另一个名为 counter 的参数，它是 double 类型的整数。

我想做这样的事情：

```
...'ButtonDownFcn','viewcsi(''pickvox_cb'', sp_viewcsi, counter)'); 
```

或者

```
...'ButtonDownFcn', {@viewcsi, 'pickvox_cb', 'sp_viewcsi', counter)'); 
```

但是当我做最后两件事时，这些都不起作用，因为它们不会将“sp_viewcsi”保留为一个类，而是将其视为一个字符串。我能做些什么来解决这个问题？我有一种感觉，这很容易，但我无法弄清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T05:56:26.710

`ButtonDownFcn`只会传递两个参数。你可以骗它说

```
...'ButtonDownFcn',@(a,b)viewcsi(a,b, counter)); 
```

这样回调将传递它`a`和`b`，而 Matlab 会将 . 的当前值传递给它`counter`。

另请参阅有关[传递额外参数](http://www.mathworks.nl/help/optim/ug/passing-extra-parameters.html)的文档。

# shopify - line_item 标题中的转义引号 shopify 破坏 API 提要

> ID：13038952
> 
> 赞同：3
> 
> 时间：2012-10-23T20:45:37.400
> 
> 标签：shopify

我正在为客户端实现编写中间件，并注意到订单回调/付费挂钩中的一些 JSON 未正确验证，因为正文中包含双引号。

这破坏了客户端 JSON 反序列化，因为 webhook HTTP POST 正文中的双引号没有被转义。

除了强迫客户从标题中删除双引号之外，我还能做些什么吗？

# ruby-on-rails - 用于 MySQL、PostgreSQL 或 SQLite3 上 Rails 引擎的 NoSQL

> ID：13038957
> 
> 赞同：1
> 
> 时间：2012-10-23T20:45:58.713
> 
> 标签：ruby-on-rails, database-design, nosql, gem

我正在编写一个 Rails 引擎来销售您自己网站上的活动门票。我正在实施门票折扣。我们将有很多潜在的折扣：

*   10% 折扣所有门票
*   购买 x 票或更多票可享受 10% 的折扣
*   买x送一
*   购买减 5 美元
*   购买 x 票或以上可减 $5
*   等等

我有一个折扣表，对于正在进行的每种折扣，我需要存储多种属性。我想我一般都喜欢回避 STI，因为我们正在进行的折扣种类繁多，而且在处理类似类型的折扣时很容易混淆数据。

我希望在 postgresql 中有一个使用 hstore 的属性列。但我还必须提供对 MySQL 和 SQLite 的支持。是否有一些简单的跨数据库兼容方法可以在任何给定的 SQL 数据库中存储类似 NoSQL 的数据？我应该用 Ruby 序列化所有内容吗？（我不会经常需要针对该列中的特定属性运行查询。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T13:38:06.957

为了支持所有这些数据库，您需要将数据直接序列化为 JSON，并且可能构建您自己的模拟索引的表。

如果您只能支持一个 DB，我会使用 PostgreSQL，因为它提供了一些在这里有用的 NoSQL 功能，包括将 JSON 存储为一种数据类型，以及在列中对 JSON 元素进行索引。您还可以将数组存储为数据类型，再次使用数组元素的索引或哈希（hstore 功能）。

*   来自 LWN[的 Postgres 中的 JSON 功能](https://lwn.net/Articles/497069/)
*   [关于 Rails 4 的博客，](http://blog.remarkablelabs.com/2012/12/a-love-affair-with-postgresql-rails-4-countdown-to-2013)包括 Postgres hstores 和数组的使用。

Rails 3 和 Django (pre 1.8) 通过 gems/packages 支持这种高级特性。

Rails 4 和[Django 1.8+](https://realpython.com/blog/python/fun-with-djangos-new-postgres-features/)直接支持其中一些特性，包括Django 1.9 中的[JSON 字段](http://orokusaki.posthaven.com/djangos-new-jsonfield-is-awesome)。

# python - Python：在元组列表中插入计数

> ID：13038963
> 
> 赞同：1
> 
> 时间：2012-10-23T20:46:31.153
> 
> 标签：python, list, insert, count, tuples

我正在尝试在元组列表中插入“计数”（从 0 开始）。我有这样的事情：

```
list = [(1, 'Cat', 200, 3.2), (4, 'Dog', 204, 4.1), (2, 'Rabbit', 519, 2.0)] 
```

我希望它是这样的：

```
list = [(1, 'Cat', 200, 0, 3.2), (4, 'Dog', 204, 1, 4.1), (2, 'Rabbit', 519, 2, 2.0)] 
```

我试过这样的事情：

```
>>> i = 0
>>> for line in list:
...     list.insert(-2,i)
...     i+=1
...     print list 
```

但它会在元组之间插入所有计数，这不是我想要的。任何人都可以帮助一个在这个问题上苦苦挣扎的 Python 初学者吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T20:49:08.147

如果`x`是一个元组，那么`i`可以通过切片元组并将其连接在一起，将计数插入到请求的位置：

```
x[:3] + (i,) + x[3:] 
```

`(i,)`创建单元素元组的（有些尴尬的）语法在哪里。例如

```
>>> x = (1, 'Cat', 200, 3.2)
>>> x[:3] + (0,) + x[3:]
(1, 'Cat', 200, 0, 3.2) 
```

请注意，这会创建一个新元组。您不能在 Python 中修改现有的元组；为此，您需要一份清单。

您的代码在元组之间插入计数的原因是您混淆了`list`and`line`变量；您正在`list`对其元素进行操作。

（但是当您发现自己在处理五元素元组时，您应该开始考虑使用任意`namedtuple`类或自定义类。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T20:55:31.543

```
In [11]: lis=[(1, 'Cat', 200, 3.2), (4, 'Dog', 204, 4.1), (2, 'Rabbit', 519, 2.0)]

In [12]: lis=map(list,lis) #convert tuples to list

In [13]: lis       #now lis is list of lists instead of list of tuples
Out[13]: 
[[1, 'Cat', 200, 3.2000000000000002],
 [4, 'Dog', 204, 4.0999999999999996],
 [2, 'Rabbit', 519, 2.0]]

#use enumerate() for indexes, no need of manual indexing

In [14]: for i,x in enumerate(lis):
    x.insert(-1,i)                #insert at -1 not -2
   ....:     
   ....:     

In [15]: lis
Out[15]: 
[[1, 'Cat', 200, 0, 3.2000000000000002],
 [4, 'Dog', 204, 1, 4.0999999999999996],
 [2, 'Rabbit', 519, 2, 2.0]] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T20:50:50.230

您不能修改元组。在里面使用列表。也尽量不要在其他类之后命名变量（列表是类名）。

```
data = [[1, 'Cat', 200, 3.2], [4, 'Dog', 204, 4.1], [2, 'Rabbit', 519, 2.0]]
for index, line in enumerate(data):
    line.insert(-1,index)
    print(data) 
```

如果您想从原始元组列表中删除，一种简单的方法是在循环中制作副本：

```
newdata=[]
for index, line in enumerate(data):
    linecopy = list(line)
    linecopy.insert(-1,index)
    newdata.append(linecopy)
    print(newdata) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-23T21:02:41.527

元组是不可变的（这意味着它们在创建后无法更改）。您将需要创建一个新元组并存储它。试试这个：

```
def insert_counts(old_list):
    new_list = []
    i=0
    for old_tuple in old_list:
        new_tuple = (old_tuple[0:2] + (i,) + old_tuple[2:])
        new_list.append(new_tuple)
        i+=1
    return new_list 
```

# sql - SQL Server - 在带有文本和数字的 varchar 字段中的两个数字范围之间进行选择

> ID：13038964
> 
> 赞同：3
> 
> 时间：2012-10-23T20:46:31.487
> 
> 标签：sql, sql-server-2008, sql-server-2005, sql-server-2008-r2, sql-server-2000

我有一张表格，其数字范围为 0-2000000。如果我执行 BETWEEN 50 AND 100，我可以使用 between 语句来获取事物的记录。这很有效。

但我遇到的问题是，如果字符串中有任何记录为“1FD32”，那么此列是一个 varchar，我无法在它之间进行选择。SQL 服务器无法转换“BETWEEN 50 AND 100”，因为它正在寻找一个 int。我怎样才能得到这些范围之间的所有记录，并忽略其中的任何字母？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T20:56:01.993

如果要进行数值比较，保证没有错误的唯一方法是使用`CASE`语句。这是唯一保证评估顺序的 SQL 语句（当不与聚合函数一起使用时）。

因此，这是可以工作的代码：

```
select *
from t
where (case when isnumeric(col) = 1 then cast(col as bigint) end) between 20 and 100 
```

请注意，如果您的数字包含小数点，那么您将需要使用`DECIMAL`or`FLOAT`来代替。

# git - 学校项目是否需要 DVCS？

> ID：13038970
> 
> 赞同：0
> 
> 时间：2012-10-23T20:47:03.993
> 
> 标签：git, svn, version-control, mercurial, google-code

我们将开始一个简单的 web 服务项目，其中包含一些 JSP/servlet 代码作为课程的一部分。我们是一个由 4 人组成的团队，其中 3 人从未使用过版本控制软件。我计划在 google 代码上托管该项目，以便我们可以按时工作，并且仍然可以访问代码、版本控制等。我需要在 SVN 和 Mecurial/GIT 之间进行选择。鉴于代码相当小，选择 DVCS 而不是 SVN 有什么特别的优势吗？与 Git/Mercurial 相比，我觉得学习 SVN 更容易。

PS：GUI 客户端将使生活更轻松。Git有什么好的吗？

PPS：我稍微倾向于 DVCS，因为我想学习它，嘿！学年是最好的学习时间！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T03:31:57.507

与之前的答案相反，我强烈建议**不要使用 Git**，至少现在。我懒得重复[我的观点](https://softwareengineering.stackexchange.com/questions/114249/git-what-gotchas-should-newcomers-to-version-control-be-aware-of/114312#114312)并再次与 Git 狂热分子开始火热。但是 - 对于大多数团队来说，选择 Git 作为第一个 SCM（和 DVCS）是**最糟糕**的选择。

> 与 Git/Mercurial 相比，我觉得学习 SVN 更容易

SVN 和 Hg 的学习曲线可能被认为几乎相等（双方都有一些不同的头痛）

> 鉴于代码相当小，选择 DVCS 而不是 SVN 有什么特别的优势吗？

无需重复讨论很多次点（感谢@AD7six 的链接） - 是的，有......*一些*......

1.  使用 Subversion，您（团队）必须拥有并维护至少一台中央服务器并对其进行访问。有了 Mercurial，`hg serve`每个人都可以按需进行 p2p 通信
2.  新手可以很容易地踩上 SVN-rake（很多时候提到“Merge Hell”，fe）：它仅部分取决于代码库大小，它主要是工作流，取决于样式：长时间分支没有进程内同步，树- 对代码进行大量重构的冲突（早期阶段的常见情况），忽略分支和巨大的难以管理的提交（“主干必须始终工作”的口头禅）

* * *

从另一个 POV：

1.  CVCS（作为类和 SVN 作为“同类最佳”）将在企业中生活和使用很多年（IMNSHO） - 并且能够以良好的方式使用 Subversion 将永远是加分项

2.  Subversion*自动*教授设计和规划中的纪律和准确性，而在 DVCS 中它只是协议，而不是要求（在某种程度上，当然）

待定

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T01:44:09.563

两个最大的选择是在 git 和 Subversion 之间。Git 是分布式版本控制系统，而 Subversion 是集中式的。正如我告诉许多人的那样，它们是不同的，没有一个更好，也没有一个更差。每个人都有自己的优势，视情况而定。

Subversion 更容易使用，并且有更好的文档。Git 的复杂性来自它是一个分布式系统，因此您拥有本地存储库和远程存储库，这意味着您现在要向两个存储库发送更新。这对于许多人来说可能会变得相当混乱——尤其是对版本控制系统不熟悉的人。

我建议您下载 Subversion，并阅读[Subversion 在线手册](http://svnbook.red-bean.com/en/1.7/index.html)并尝试使用它。这并不是说要使用 Subversion。这只是为了让您了解如何使用版本控制系统。

现在，为了满足那些 Git 粉丝：与 Subversion 相比，Git 有一个很大的优势：它是分布式的。在 Subversion 中，您必须有一个集中式存储库。这意味着设置一个 Apache 服务器，或者至少在`svnserve`任何人都可以访问的机器上运行 Subversion 服务器进程。你身边有一个这样的人吗？大多数小团队都没有。

Git 在像您这样的情况下大放异彩的地方在于您不需要运行 Git 的集中式服务器。每个人都有整个存储库的副本，您可以直接在团队成员之间传递更新，而无需将您的更改签入中央服务器。[您可以通过电子邮件](http://git-scm.com/2010/03/10/bundles.html)相互发送 Git 补丁。或者，您甚至可以使用[Dropbox](http://tumblr.intranation.com/post/766290743/using-dropbox-git-repository)中的集中式 Git 存储库并从那里推送和拉取本地副本。（永远不要直接使用该存储库！）。主要问题是确保团队中的每个人都获得与其他人相同的更新。如果您不小心，这就是 Git 可能崩溃的地方。

现在，如果您碰巧有一个集中式服务器，并且使用 Subversion，那么设置一个 Subversion 存储库服务器非常简单。Subversion`svnserve`是一个非常轻量级的服务器，它可以设置为[Windows 服务](http://tortoisesvn.net/docs/nightly/TortoiseSVN_en/tsvn-serversetup-svnserve.html#tsvn-serversetup-svnservice)。如果您更喜欢 Apache httpd 作为服务器，您可以从许多不同的来源获得免费的 Subversion 服务器包。这里有几个：

*   **[VisualSVN](http://visualsvn.com)**：仅限 Windows。免费，除非您想做一些花哨的事情，例如使用 LDAP、Active Directory 或 SSL。¹
*   **[UberSVN](http://www.wandisco.com/ubersvn)**：适用于 Windows、Mac 或 Linux。与 VisualSVN 相同的限制。¹
*   **[CollabNet Subversion Edge](http://www.collab.net/products/subversion)**：完全开源的解决方案。不像其他两个那样容易设置，但也不是那么困难。这可以为用户帐户使用 LDAP/Active Directory，并且设置 SSL 证书非常简单。

* * *

¹这些软件包是完整的 Apache httpd 和 Subversion 软件包，它们都组合成一个简单的安装。如果您放弃 GUI 前端，您可以自己设置 LDAP/Active Directory 或 SSL。*如果不为专业*版付费，您将无法使用前端来执行此操作。但是，我不确定他们的许可协议到底是怎么说的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T19:38:29.093

如果你们中的大多数人以前没有使用过任何版本控制软件，我建议你从 Mercurial 开始。Git 是 Mercurial 的大哥，可能有点吓人。

使用版本控制有两个主要规则：

1.  早点入住，经常入住。
2.  不要提交损坏的代码。

如果没有分布式版本控制，这些规则将相互强烈冲突。

你需要一个非常成熟和纪律严明的团队来使用 Subversion 来完成这项工作。

使用 Mercurial 或 Git，开发人员每小时会多次提交他们的私有克隆。一旦他们满意并且他们的代码稳定，他们就会从中央存储库中提取最新的更改。如果该合并成功，您的版本将成为新的“主干”、“主控”或“默认”，同时保留两个流的历史记录。

查看 Joel Spolsky 的[HgInit](http://hginit.com)了解全文。另请查看[Bitbucket](http://bitbucket.org)；他们为最多五人的团队提供免费的 Git 或 Mercurial 托管。当然，还有[github](http://github.com)。

# c# - 通过 Windows 窗体应用程序启用控制台应用程序

> ID：13038973
> 
> 赞同：-1
> 
> 时间：2012-10-23T20:47:17.800
> 
> 标签：c#, winforms, console-application

我不打算详细说明为什么要这样做，而不是让主应用程序完成这项工作。我认为目前对我来说更容易。但我将来不会使用这种技术。

在我的例子中，主窗体有一个打开另一个窗体的按钮。在第二个中，您可以调整控制台应用程序的数量、暂停、恢复和停止工作（听起来完全没用（也许很愚蠢），但是，就像我说的，我不会详细说明原因）。这意味着应用程序必须能够访问整个程序的所有变量和资源，反之亦然。

我知道如何通过主表单启动新表单，但我不知道如何启动控制台应用程序。

编辑：

我忘了提到，控制台应用程序是解决方案的一部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T21:19:37.370

您的要求有点模糊；“应用程序必须能够访问整个程序的所有变量和资源，反之亦然”。“变量和资源”不能跨进程共享，您将需要某种形式的进程间通信。

如果您的控制台应用程序只需要与调用表单应用程序进行通信，表明 RPC 已成功，则在控制台应用程序中使用退出代码，请参阅：[如何将值从控制台应用程序返回到 .NET 中的服务？](https://stackoverflow.com/questions/1589279/how-do-i-return-a-value-from-a-console-application-to-a-service-in-net)

否则之前已经回答过：[Getting the output from Console window into Winform application](https://stackoverflow.com/questions/6650086/getting-the-ouput-from-console-window-into-winform-application?rq=1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T20:52:48.173

如果您想在两个进程之间进行通信，请在此处查看此库：

[https://github.com/TheCodeKing/XDMessaging.Net](https://github.com/TheCodeKing/XDMessaging.Net)

它允许您从一个应用程序向另一个应用程序发送消息。例如，App1在“randomkey”通道上向ConsoleApp1发送“stop”消息，ConsoleApp1可以在“randomkey”通道上监听并拦截“stop”消息并停止其当前处理。

如果您只想打开控制台窗口，只需使用 System.Diagnostics.Process.Start();

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T20:48:43.603

您可以直接调用 Main 。但请注意不要直接在 UI 线程上执行此操作！

```
SomeConsoleApp.Main(new string[]{"-O", "File 1.txt", "-some-parameter"}); 
```

或者，如果您只有一个 exe，您可以执行以下操作：

```
System.Diagnostics.Process.Start("someconsoleapp.exe"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-23T20:50:27.987

您需要创建一个控制台模拟器（耗时且难以正确设置），或者在另一个进程中启动 cmd.exe 并使用远程过程调用[（或另一种进程间通信方法）](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365574%28v=vs.85%29.aspx)在两个进程之间进行通信

# static - 使用 PowerMock 通过 @InjectMocks 模拟静态属性

> ID：13038976
> 
> 赞同：4
> 
> 时间：2012-10-23T20:47:38.957
> 
> 标签：static, controller, mocking, mockito, powermock

我正在使用 PowerMock 和 Mockito 来测试 Spring 控制器。

我定义了 TestController 类（见下文，Snipper #1），并为它定义了一个单元测试（见下文，Snipper #2）。但是当我尝试对它进行单元测试时，我得到了一个异常（见下文，Snipper #3）。

如果我删除 @InjectMocks，删除定义时的 TestController 实例化，并在测试函数中执行 controllerUT = new TestController()，它工作正常（见下文，Snipper #4）。

这让我相信在@InjectMocks 之前不会发生静态替换，我的问题是这是事情的工作方式，还是我做错了什么？有没有更好的方法来设计代码以避免这个问题？我猜人们使用静态日志分配（我没有发明这个）所以之前一定有人遇到过这个问题......

谢谢！

**片段#1**

```
@Controller
@RequestMapping("/api/test")
public class TestController {
    private static final Logger LOG = LoggerFactory.getLogger(TestController.class);

    @Autowired
    private GeneralService generalService;

    @RequestMapping(method=RequestMethod.GET)
    public void doSomethingUseful(
        HttpServletRequest request,
        HttpServletResponse response) {
    // nothing userful to do right now
    }
} 
```

**片段#2**

```
@RunWith(PowerMockRunner.class)
@PrepareForTest({TestController.class, LoggerFactory.class})
public class TestControllerTest {
    @InjectMocks
    private TestController controllerUT = new TestController();

    @Mock
    private GeneralService service;

    @Mock
    private Logger loggerMock;

    @Mock
    private HttpServletRequest request;
    @Mock
    private HttpServletResponse response;

    @Before
    public void setUp() {
        PowerMockito.mockStatic(LoggerFactory.class);
        when(LoggerFactory.getLogger(any(Class.class))).
            thenReturn(loggerMock);
    }

    @Test
    public void doSomethingUsefulTest() {
        controllerUT.doSomethingUseful(request, response);
        assert(true);
    }
} 
```

**片段#3**

```
Failed to auto configure default logger context
Reported exception:
ch.qos.logback.core.joran.spi.JoranException: Parser configuration error occurred
    at ch.qos.logback.core.joran.event.SaxEventRecorder.buildSaxParser(SaxEventRecorder.java:86)
    at ch.qos.logback.core.joran.event.SaxEventRecorder.recordEvents(SaxEventRecorder.java:57)
    at ch.qos.logback.core.joran.GenericConfigurator.doConfigure(GenericConfigurator.java:132)
    at ch.qos.logback.core.joran.GenericConfigurator.doConfigure(GenericConfigurator.java:96)
    at ch.qos.logback.core.joran.GenericConfigurator.doConfigure(GenericConfigurator.java:55)
    at ch.qos.logback.classic.util.ContextInitializer.configureByResource(ContextInitializer.java:75)
    at ch.qos.logback.classic.util.ContextInitializer.autoConfig(ContextInitializer.java:148)
    at org.slf4j.impl.StaticLoggerBinder.init(StaticLoggerBinder.java:84)
    at org.slf4j.impl.StaticLoggerBinder.<clinit>(StaticLoggerBinder.java:54)
    at org.slf4j.LoggerFactory.bind(LoggerFactory.java:128)
    at org.slf4j.LoggerFactory.performInitialization(LoggerFactory.java:108)
    at org.slf4j.LoggerFactory.getILoggerFactory(LoggerFactory.java:279)
    at org.slf4j.LoggerFactory.getLogger(LoggerFactory.java:252)
    at org.slf4j.LoggerFactory.getLogger(LoggerFactory.java:265)
    at com.basicservice.controller.TestController.<clinit>(TestController.java:39)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:169)
    at javassist.runtime.Desc.getClassObject(Desc.java:43)
    at javassist.runtime.Desc.getClassType(Desc.java:152)
    at javassist.runtime.Desc.getType(Desc.java:122)
    at javassist.runtime.Desc.getType(Desc.java:78)
    at com.basicservice.controller.TestControllerTest.<init>(TestControllerTest.java:44)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl.createTestInstance(PowerMockJUnit44RunnerDelegateImpl.java:188)
    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl.createTest(PowerMockJUnit44RunnerDelegateImpl.java:173)
    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl.invokeTestMethod(PowerMockJUnit44RunnerDelegateImpl.java:195)
    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl.runMethods(PowerMockJUnit44RunnerDelegateImpl.java:148)
    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$1.run(PowerMockJUnit44RunnerDelegateImpl.java:122)
    at org.junit.internal.runners.ClassRoadie.runUnprotected(ClassRoadie.java:34)
    at org.junit.internal.runners.ClassRoadie.runProtected(ClassRoadie.java:44)
    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl.run(PowerMockJUnit44RunnerDelegateImpl.java:120)
    at org.powermock.modules.junit4.common.internal.impl.JUnit4TestSuiteChunkerImpl.run(JUnit4TestSuiteChunkerImpl.java:102)
    at org.powermock.modules.junit4.common.internal.impl.AbstractCommonPowerMockRunner.run(AbstractCommonPowerMockRunner.java:53)
    at org.powermock.modules.junit4.PowerMockRunner.run(PowerMockRunner.java:42)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: java.lang.ClassCastException: org.apache.xerces.jaxp.SAXParserFactoryImpl cannot be cast to javax.xml.parsers.SAXParserFactory
    at javax.xml.parsers.SAXParserFactory.newInstance(SAXParserFactory.java:128)
    at ch.qos.logback.core.joran.event.SaxEventRecorder.buildSaxParser(SaxEventRecorder.java:79)
    ... 42 more 
```

**片段#4**

```
@RunWith(PowerMockRunner.class)
@PrepareForTest({TestController.class, LoggerFactory.class})
public class TestControllerTest {
    private TestController controllerUT;

    @Mock
    private GeneralService service;

    @Mock
    private Logger loggerMock;

    @Mock
    private HttpServletRequest request;
    @Mock
    private HttpServletResponse response;

    @Before
    public void setUp() {
        PowerMockito.mockStatic(LoggerFactory.class);
        when(LoggerFactory.getLogger(any(Class.class))).
            thenReturn(loggerMock);
    }

    @Test
    public void doSomethingUsefulTest() {
        controllerUT = new TestController();
        controllerUT.doSomethingUseful(request, response);
        assert(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T23:22:43.287

要记住的一件事是`@InjectMocks`尊重静态和最终字段，即它不会在静态或最终字段中注入模拟。另请注意，PowerMock 必须生成一个新的 ClassLoader 才能“检测”类，这可能解释了片段 #3。

虽然我没有探讨你项目的细节，但我相信如果你想使用 PowerMock，你可能想准备所有的 Logback/slf4j 类。请记住，Powermock 和 Mockito 是不同的项目，可能无法像人们想象的那样协同工作。

# multithreading - 结合英特尔 IPP 和 TBB

> ID：13038977
> 
> 赞同：0
> 
> 时间：2012-10-23T20:47:40.447
> 
> 标签：multithreading, tbb, intel-ipp

我试图通过结合 IPP 和 TBB 来进一步改进我的图像调整算法。我可以完成此任务的两种方法是：

1.  使用没有 TBB 的 IPP
2.  在 parallel_for 循环中使用 IPP 和 TBB

我的问题是我已经对应用程序进行了编码，并且得到了正确的结果。但令人惊讶的是，当它们组合在一起时，我的计算时间会更大。为避免混乱，我只在此处粘贴部分代码。但如果需要，我可以提供整个代码。对于我只使用 IPP 的第一种情况，代码如下：（算法的基础是从英特尔 TBB 图像调整示例代码中借用的）

```
ippiResizeSqrPixel_8u_C1R(src, srcSize, srcStep, srcRoi, dst, dstStep, dstRoi, 
m_nzoom_x,m_nzoom_y,0, 0, interpolation, pBufferWhole); 
```

parallel_for 循环如下所示：

```
parallel_for(
    blocked_range<size_t>(0,CHUNK),
    [=](const blocked_range<size_t> &r){
        for (size_t i= r.begin(); i!= r.end(); i++){
            ippiResizeSqrPixel_8u_C1R(src+((int)(i*srcWidth*srcHeight)), srcSize, 
srcStep, srcRoi, dst+((int)(i*dstWidth*dstHeight)), dstStep, dstRoi, 
m_nzoom_x,m_nzoom_y,0, 0, interpolation, pBuffer);
        }
    }
); 
```

`src`并且`dst`是指向源图像和目标图像的指针。当使用 TBB 时，图像被划分为多个`CHUNKS`部分，parallel_for 循环遍历所有部分，`CHUNKS`并使用 IPP 函数独立调整每个 CHUNK 的大小。`dstHeight`、`srcHeight`、`srcRoi`和的值`dstRoi`被修改以适应图像的分区，并且`src+((int)(i*srcWidth*srcHeight))`和`dst+((int)(i*dstWidth*dstHeight))`将指向源和目标图像中每个分区的开始。

显然，IPP 和 TBB 可以以这种方式组合——因为我得到了正确的结果——但让我感到困惑的是，与单独使用 IPP 相比，当它们组合时计算时间会变差。关于可能是什么原因，或者我如何解决这个问题的任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T02:16:04.483

在您的代码中，每个并行化任务都`parallel_for`包含多个`ippiResizeSqrPixel`调用。与只调用一次的串行版本相比，这可能是毫无意义的开销，因为此类函数可能包含准备阶段（例如，设置插值系数表），并且它通常旨在一次处理大内存块以提高运行时效率。（但我不知道 IPP 实际上是如何做的。）

我建议你遵循并行结构：

```
parallel_for(
  // Range = src (or dst) height of image.
  blocked_range<size_t>(0, height),
  [=](const blocked_range<size_t> &r) {
    // 'r' = vertical range of image to process in this task.
    // You can calculate src/dst region from 'r' here,
    // and call ippiResizeSqrPixel once per task.
    ippiResizeSqrPixel_8u_C1R( ... );
  }
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T20:50:41.630

事实证明，一些 IPP 函数自动使用多线程。对于此类功能，使用 TBB 不会获得任何改进。显然`ippiResizeSqrPixel_8u_C1R( ... )`功能是这些功能之一。当我禁用除一个之外的所有内核时，两个版本的表现都一样好。

# tomcat - 如何获取有关“无法找到请求目标的有效证书路径”的更多信息

> ID：13038978
> 
> 赞同：0
> 
> 时间：2012-10-23T20:47:43.777
> 
> 标签：tomcat, ssl, alfresco, keytool

我有我的 SSL 密钥对，我想在 Alfresco 中使用。我使用 keytool 创建了一个密钥库，将它们导入其中。然后在 server.xml 中，我将密钥库和密码更改为我的新密钥库。

一切看起来都很好，我可以在没有警告或任何东西的情况下看到 https。但是当我看到标准输出日志时，出现大量错误`"unable to find valid certification path to requested target"`

我知道密钥有问题，并且导致此错误的原因有很多。但无论如何我可以跟踪更多信息，例如“tomcat 正在尝试查找证书的路径？” 或“他正在寻找哪个证书？”

谢谢

更新：我发现错误来自 solr，搜索功能不起作用。寻求更多信息...

更新2：实际上布鲁诺先生是对的，我在密钥库中添加了密钥，但在导入这些证书后忘记了信任库（有点困惑这个东西是如何工作的），现在错误变为：

```
org.alfresco.repo.search.impl.lucene.LuceneQueryParserException: 09250017 Request failed 401 \/solr\/alfresco\/alfresco 
```

# tsql - 传递给 LEFT 或 SUBSTRING 函数的长度参数无效

> ID：13038982
> 
> 赞同：11
> 
> 时间：2012-10-23T20:48:08.173
> 
> 标签：tsql

我有以下描述：“示例产品制造商产品名称 XYZ - 尺寸”，我只想从中获取值“产品名称 XYZ”。如果这只是一行，我只使用 SUBSTRING 就没有问题，但我有数千条记录，尽管所有产品的初始值 Sample Product Maker 都相同，但 Product Name 可能不同，并且我不想要任何东西之后连字符。

到目前为止，我在这个问题的标题中产生了错误。

```
SELECT i.Itemid,
       RTRIM(LTRIM(SUBSTRING(i.ShortDescription, 25, (SUBSTRING(i.ShortDescription, 25, CHARINDEX('-', i.ShortDescription, 25)))))) AS ProductDescriptionAbbrev,
       CHARINDEX('-', i.ShortDescription, 0) - 25  as charindexpos
FROM t_items i 
```

我收到“参数数据类型 varchar 对子字符串函数的参数 3 无效”

如您所见，我得到了 sql 语句最后一行的值，但是当我尝试将其插入 SUBSTRING 函数时，我遇到了各种问题。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-23T21:55:15.383

很有可能您有缺少“-”的行，这会导致您的错误。试试这个...

```
SELECT i.Itemid,
    SUBSTRING(i.ShortDescription, 22, CHARINDEX('-', i.ShortDescription+'-', 22)) AS ProductDescriptionAbbrev,
FROM t_items i 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T20:57:23.367

您的第一次调用`SUBSTRING`指定长度为`SUBSTRING(i.ShortDescription, 25, CHARINDEX('-', i.ShortDescription, 25))`.

你可以试试：

```
declare @t_items as Table ( ItemId Int Identity, ShortDescription VarChar(100) )
insert into @t_items ( ShortDescription ) values
  ( 'Sample Product Maker Product Name XYZ - Size' )

declare @SkipLength as Int = Len( 'Sample Product Maker' )

select ItemId,
  RTrim( LTrim( Substring( ShortDescription, @SkipLength + 1, CharIndex( '-', ShortDescription, @SkipLength ) - @SkipLength - 1 ) ) ) as ProductDescriptionAbbrev
  from @t_items 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T21:01:26.497

您还可以删除`Sample Product Maker`文本并从那里开始：

```
SELECT RTRIM(LEFT(
    LTRIM(REPLACE(i.ShortDescription, 'Sample Product Maker', '')),
        CHARINDEX('-', LTRIM(REPLACE(i.ShortDescription, 'Sample Product Maker', 
    '' ))) - 1))
AS ShortDescription 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-23T22:04:23.203

问题是您的外部调用`SUBSTRING`正在从`SUBSTRING`第三个参数中的内部调用传递一个字符数据类型。

```
 +--This call does not return an integer type
SELECT i.Itemid,                                  V
   RTRIM(LTRIM(SUBSTRING(i.ShortDescription, 25, (SUBSTRING(i.ShortDescription, 25, CHARINDEX('-', i.ShortDescription, 25)))))) AS ProductDescriptionAbbrev,
   CHARINDEX('-', i.ShortDescription, 0) - 25  as charindexpos
FROM t_items i 
```

第三个参数必须评估为您想要的长度。也许你的意思是`LEN(SUBSTRING(...))`？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-23T21:40:51.470

好像你想要这样的东西（22，而不是 25）：

```
SELECT i.Itemid, 
       RTRIM(LTRIM(SUBSTRING(i.ShortDescription, 22, CHARINDEX('-', i.ShortDescription)-22))) AS ProductDescriptionAbbrev, 
       CHARINDEX('-', i.ShortDescription)-22 as charindexpos
FROM t_items i 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-14T16:18:04.187

你要：

```
LEFT(i.ShortDescription, isnull(nullif(CHARINDEX('-', i.ShortDescription),0) - 1, 8000)) 
```

请注意，一个好的做法是将`charindex(...)`'s 和`patindex(...)`'s 包装起来`nullif(...,0)`，然后根据需要处理 null 情况（有时 null 是正确的结果，在这种情况下，我们想要所有文本，所以我们`isnull(...,8000)`想要的长度）。

# c++ - 在 constexpr 抛出的异常中使用副作用是否合法？

> ID：13038985
> 
> 赞同：15
> 
> 时间：2012-10-23T20:48:15.223
> 
> 标签：c++, c++11, assert, language-lawyer, constexpr

通常， constexpr 必须没有副作用。但是，我刚刚发现可以在抛出异常的构造函数中使用副作用。该技术可用于模拟 constexpr 函数的 assert()，如下面的程序所示。

```
#include <iostream>
#include <cstdlib>
#include <stdexcept>

struct constexpr_precond_violated : std::logic_error
{
  constexpr_precond_violated(const char* msg) :
    std::logic_error(msg)
  {
    std::cerr << msg << '\n';
    abort(); // to get a core dump
  }
};

#define TO_STRING_IMPL(x) #x
#define TO_STRING(x) TO_STRING_IMPL(x)

#define CONSTEXPR_PRECOND(cond, value) \
  ((!(cond)) ? throw constexpr_precond_violated( \
    "assertion: <" #cond "> failed (file: " \
    __FILE__ ", line: " TO_STRING(__LINE__) ")")    \
   : (value))

constexpr int divide(int x, int y)
{
  return CONSTEXPR_PRECOND(y != 0, x / y);
}

int main(int argc, char** argv)
{
  // The compiler cannot know argc, so it must be evaluated at runtime.
  // If argc is 2, the precondition is violated.
  return divide(100, argc - 2);
} 
```

我用 g++ 4.7.2 和 clang++ 3.1 对其进行了测试。当先决条件失败时，您将获得错误位置和核心转储。

```
./constexpr_assert some_arg
assertion: <y != 0> failed (file: constexpr_assert.cpp, line: 26)
Aborted (core dumped) 
```

所以它适用于当前的编译器，但它是合法的 C++11 吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-23T21:58:17.330

这是合法的。

对于每个`constexpr`函数，必须有一些导致常量表达式的参数值（第 7.1.5/5 节）：

> 对于一个`constexpr`函数，如果不存在函数参数值使得函数调用替换会产生一个常量表达式（5.19），那么程序是非良构的；无需诊断。

请注意，这并不意味着*每个*可能的参数值都必须产生一个常量表达式。`divide`显然有一些导致常量表达式的参数值：`divide(1, 1)`是一个简单的例子。所以，这个定义显然是有效的。

但是可以`divide(1, 0)`叫吗？是的，它可以。`constexpr`调用函数或“普通”函数（第 7.1.5/7 节）几乎没有区别：

> 对函数的调用在所有方面都`constexpr`与对等价的非函数的调用产生相同的结果，只是对函数的调用可以出现在常量表达式中。`constexpr``constexpr`

请注意，对`constexpr`函数的调用*可以*出现在常量表达式中，但没有什么可以阻止它们不产生常量表达式。这是为了让人们可以调用`constexpr`带有编译时和运行时参数的函数（否则有用性`constexpr`将受到限制）。

为了完整起见，让我们看看是什么构成了常量表达式（§5.19/2）：

> *条件表达式*是*核心常量表达式*，除非它涉及以下之一作为潜在评估的子表达式（第 3.2 节），但逻辑与（第 5.14 节）、逻辑或（第 5.15 节）和条件（第 5.16 节）操作的子表达式未评估的不被视为 [...]。

所以，`divide(1, 1)`是一个常量表达式，但`divide(1, 0)`不是。如果您`divide(1, 0)`在模板参数中使用，则程序格式错误。但除此之外还好。

# r - 时间序列数据：如何根据 t0 中特定变量的值对 t-1 和 t+1 进行编码？

> ID：13038992
> 
> 赞同：0
> 
> 时间：2012-10-23T20:48:46.590
> 
> 标签：r, variables, dataframe, time-series

我有兴趣了解外国投资等特定因素在变化前后 5 年的表现，例如内战爆发。

这是*我的数据的结构*（这里不包括因素）：

```
year country   change  time  
2001 A         0       ? (-1)
2002 A         1       0     
2003 A         0       ? (+1)
2004 A         0       ? (+2)    
2002 B         0       ? (-2)
2003 B         0       ? (-1)
2004 B         1       0
... 
```

我正在寻求用括号中的相应值替换问号，例如，更改前一年的“-1”（t-1）和更改后的一年（t+1）的“+1”。变化的存在用 1 编码。

你会怎么做？我很感激任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T22:40:14.293

```
> dat <- read.table(text="year country   change  time  
+ 2001 A         0       ?(-1)
+ 2002 A         1       0     
+ 2003 A         0       ?(+1)
+ 2004 A         0       ?(+2)    
+ 2002 B         0       ?(-2)
+ 2003 B         0       ?(-1)
+ 2004 B         1       0
+ ", header=TRUE)
> with(dat, tapply(change, country, 
                              function(x) seq(length(x))-which(x==1) ) )
$A
[1] -1  0  1  2

$B
[1] -2 -1  0

> dat$time <-unlist( with(dat, tapply(change, country, 
                              function(x) seq(length(x))-which(x==1) ) ) )
> dat
  year country change time
1 2001       A      0   -1
2 2002       A      1    0
3 2003       A      0    1
4 2004       A      0    2
5 2002       B      0   -2
6 2003       B      0   -1
7 2004       B      1    0
> 
```

稍微不那么复杂的是使用`ave`而不是`unlist(tapply(...))`

```
> dat$time <- with(dat, ave(change, country, FUN=function(x) seq(length(x))-which(x==1) ) )
> dat
  year country change time
1 2001       A      0   -1
2 2002       A      1    0
3 2003       A      0    1
4 2004       A      0    2
5 2002       B      0   -2
6 2003       B      0   -1
7 2004       B      1    0 
```

# json - ClassCastException 使用带有自定义对象的球衣作为响应

> ID：13038994
> 
> 赞同：0
> 
> 时间：2012-10-23T20:48:58.687
> 
> 标签：json, jakarta-ee, jersey

我得到一个 ClassCastException

```
java.lang.ClassCastException: java.lang.String cannot be cast to com.mcruiseon.common.contracts.IRegistrationResponse
    at com.mcruiseon.common.message.response.RegistrationResponse.getRegistrationResponse(RegistrationResponse.java:43)
    at com.mcruiseon.carpool4all.RegistrationService.post(RegistrationService.java:81) 
```

基于泽西岛的服务代码

```
@POST
@Path ("Request")
@Consumes({ MediaType.APPLICATION_JSON })
public Response post(JAXBElement<ClientIdentityConcrete> element) {
    RegistrationRequest request = new RegistrationRequest((ClientIdentityConcrete)(element.getValue()));
    RegistrationResponse response ;
    try {
        clientSession = new ClientSession(God.mCruiseOnServer) ;
    } catch (InvalidServerDNSorIPException e) {
        e.printStackTrace();
        return Response.serverError().build() ;
    }
    sessionKey = sessionManager.setClientSession(clientSession) ;
    clientSession.setSessionKey(sessionKey) ;

    clientSession.getSendQueue().sendRequest(request) ;
    try {
        response = (RegistrationResponse)clientSession.waitAndGetResponse(request) ;
    } catch (WaitedLongEnoughException e) {
        return Response.serverError().build() ;
    } catch (UnableToResolveResponseException e) {
        return Response.serverError().build() ;
    }

// Getting Exception in line below
    return Response.ok(response.getRegistrationResponse()).build();
} 
```

支持代码

```
public IRegistrationResponse getRegistrationResponse() {
        return ((IRegistrationResponse) super.getMessage());
    }

public interface IRegistrationResponse {
    public String getIdentityHash() ;
    public String getSessionKey() ;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T03:59:36.397

我的服务器返回一个字符串，我忘记用最新的 jar 上传我的服务器。一旦我这样做了，ClassCastException 就消失了。

# .net - .Net DropDownList 验证可能选择的子集？

> ID：13038995
> 
> 赞同：1
> 
> 时间：2012-10-23T20:49:03.150
> 
> 标签：.net, validation

我在 .Net Web 表单上有一个 DropDownList 选择，需要根据表单上的其他操作验证特定选择。具体来说，我需要根据 CheckBox 组件进行验证。我正在查看[CompareValidator](http://msdn.microsoft.com/en-us/library/db330ayw%28v=vs.80%29.aspx)，但如果没有大量黑客攻击，它似乎是不可能的。我可以通过内置或自定义 .Net 验证器启用此要求，还是必须通过 JavaScript 或代码隐藏对行为进行编码？

非常感谢！

# windows-7 - 你能用 VS 2012 在 Windows 7 上构建 Win 8 应用吗？

> ID：13038996
> 
> 赞同：17
> 
> 时间：2012-10-23T20:49:05.393
> 
> 标签：windows-7, windows-8, visual-studio-2012

我在 Windows 7 上安装了专业版 VS 2012。当我开始新项目时，VS 2010 上确实没有新类型。当我尝试按照以下方式创建 WRL 组件时：-

[http://msdn.microsoft.com/en-us/library/vstudio/jj155856.aspx](http://msdn.microsoft.com/en-us/library/vstudio/jj155856.aspx)

尝试安装模板时出现 HRESULT 异常。

简单的问题：这甚至可以在 Windows 7 上运行吗？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-10-23T21:23:20.957

[Windows 应用商店应用入门](http://msdn.microsoft.com/en-us/library/windows/apps/br211386.aspx)：

" **Windows 应用商店应用程序开发仅在 Windows 8 上受支持。您不能在 Windows 7 或 Windows Server 2012 上开发 Windows 应用商店应用程序。** "

所以不，它不适用于 Windows 7。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-16T12:49:51.577

您无法在 Windows 7 上开发 Windows 应用商店应用程序，您需要 Windows 8 和 Visual Studio 2012。有一个名为 Visual Studio Express 2012 for Windows 8 的免费版本的 Visual Studio。它可以让您制作 Windows 应用商店应用程序。如果您在 Windows 7 上安装 Visual Studio，它会阻止 Windows 应用商店应用程序的开发。所以我想告诉您的是，您需要 Windows 8 或 Windows Server 2012 来开发 Windows 应用商店应用程序。

您可以免费下载适用于 Windows 8 的 Visual Studio Express 2012：

[http://microsoft.com/express](http://microsoft.com/express)

您还可以免费获得 90 天的 Windows 8 试用版：

[http://msdn.microsoft.com/en-us/evalcenter/jj554510.aspx](http://msdn.microsoft.com/en-us/evalcenter/jj554510.aspx)