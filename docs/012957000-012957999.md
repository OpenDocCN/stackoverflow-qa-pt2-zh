# StackOverflow 问答 12957000-12957999

# .net - OAuth2.0 中的身份验证以及它如何与 OpenId 一起使用

> ID：12957006
> 
> 赞同：4
> 
> 时间：2012-10-18T14:29:40.127
> 
> 标签：.net, openid, oauth-2.0, dotnetopenauth

好的 寻求指导

我正在考虑设置一个中央身份验证和授权服务器，以便使用 DotNetOpenAuth 登录和访问我们的 Api。

到目前为止

OpenId -> Authentication
OAuth -> Authorization OK ...然后它变得一团糟。

OpenId 具有 OAuth 的扩展。（那么是否非常需要 Connect And Auth2.0！）
OpenId Connect 有点像 Auth2.0 ？

OAuth2.0 允许 Authentication
[Hueinverse](http://hueniverse.com/2010/05/introducing-oauth-2-0/)提到 OAuth2.0 有一个新的用户名和密码流程

> 用户名和密码流 - 用于用户信任客户端处理其凭据但客户端仍然不希望存储用户的用户名和密码的情况。此流程仅适用于用户和客户端之间存在高度信任的情况。

但是从谷歌提到的[协议来看](https://developers.google.com/accounts/docs/GettingStarted)

> OAuth 2.0 是适用于所有 Google API 的全新简化授权协议。OAuth 2.0 依靠 SSL 来保证安全性，而不是要求您的应用程序直接进行加密签名。此协议允许您的应用程序请求访问与用户的 Google 帐户关联的数据。

身份验证似乎没有被提及。

使用 DotnetOpenAuth 它使用其 OpenId 库进行 OAuth2.0 身份验证。

所以...有人可以帮我弄清楚 OpenId Connect 和 OAuth 2.0 的详细信息吗！！:)

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-07-08T06:22:46.330

OAuth 用于授权。OpenIDConnect 用于身份验证。

OpenIDConnect（不是 OpenID）建立在 OAuth2 之上。

在 OAuth 中，客户端会收到一个访问令牌，该令牌可用于访问服务器端资源（例如服务器 API）。拥有访问令牌并不意味着我们验证用户身份。它仅授予您对属于该用户的资源的访问权限。

在 OpenIDConnect 中，客户端会收到一个名为“ID Token”的类似令牌，它采用 JWT 形式。客户端可以通过它的数字签名验证这个令牌，并从这个 ID 令牌中获取用户 ID 信息。

OAuth 支持多种[授权类型](https://oauth.net/2/grant-types/)。您提到的一种是“密码授予类型”，授权服务器信任客户端应用程序并让它处理用户凭据（例如密码）。

更常见的授权类型是授权代码流，用户在授权服务器登录页面（授权端点）提交他/她的凭据。如果您有“使用您的 Google/Facebook 帐户登录”的经验，您应该更好地了解它是如何工作的。

# maven - Mantis 集成到 Maven

> ID：12957007
> 
> 赞同：4
> 
> 时间：2012-10-18T14:29:41.903
> 
> 标签：maven, maven-plugin, bug-tracking, mantis

除了[maven-changes-plugin](http://maven.apache.org/plugins/maven-changes-plugin/usage.html)之外，是否存在用于 Mantis 集成的 Maven 插件？
想法是连接到[Mantis SOAP API](http://www.mantisbt.org/wiki/doku.php/mantisbt%3afaq#does_mantisbt_provide_a_webservice_interface)以提供与 MantisBT 的更多交互。
例如，您可以：

*   创建一个问题
*   创建一个项目
*   创建项目的版本
*   等等

已经存在一个 Java API 来为 Mantis 提供客户端 Web 服务：**[biz.futureware.mantis:mantis-axis-soap-client](http://search.maven.org/#search|gav|1|g%3A%22biz.futureware.mantis%22%20AND%20a%3A%22mantis-axis-soap-client%22)**。

[提供Mantis 集成](http://www.mantisbt.org/wiki/doku.php/mantisbt%3afaq#integration)的其他方式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T15:06:31.580

我最终开始开发一个名为[**mantis-maven-plugin 的插件**](https://github.com/ghusta/mantis-maven-plugin)，托管在 GitHub 上。

这个插件将 Maven 连接到 Mantis SOAP API。
到目前为止，该插件能够：

1.  **add-project-version** : 创建项目的版本
2.  **display-project-versions**：显示项目的版本
3.  **display-version** : 显示 Mantis 服务器的版本

如果有人想贡献，请不要犹豫克隆项目：[https](https://github.com/ghusta/mantis-maven-plugin) ://github.com/ghusta/mantis-maven-plugin 。

# visual-studio-2008 - 相当于 VS2008 的 Slowcheetah

> ID：12957011
> 
> 赞同：3
> 
> 时间：2012-10-18T14:29:47.007
> 
> 标签：visual-studio-2008, app-config, slowcheetah

我一直在寻找一种方法来进行 app.config 转换。我找到[了 SlowCheetah](http://visualstudiogallery.msdn.microsoft.com/69023d00-a4f9-4a34-a6cd-7e854ba318b5)，但看起来 SlowCheetah 不支持 VS 2008。是否有任何插件等效于 VS 2008 的 SlowCheetah？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T05:34:33.950

SlowCheetah 所依赖的 XDT 转换需要 .NET 4.0。由于 .NET 4.0 是在 VS2008 之后，我们无法真正添加对 VS2008 的支持。另外我认为 VS2010 中的可扩展性模型与 VS2008 相比有很大的变化。

# c# - 更改控件的边界

> ID：12957014
> 
> 赞同：3
> 
> 时间：2012-10-18T14:29:59.420
> 
> 标签：c#, .net

我在设置控件的自定义边框时遇到问题。只要我得到这种行为，这个边框就可以用 DrawRectangle、DrawBorder 或其他任何东西来完成

![在此处输入图像描述](../Images/78fead1e7b3a75b6378ab390a33335e9.png)

显然，最暗的边界是先前边界所在的位置。它周围的其他边界试图模仿淡出（或其他）。现在，最具挑战性的事情是我无法覆盖 OnPaint 或扩展任何其他控件。这必须适用于所有控件！这是我的扩展器提供程序的一部分，我在控件具有焦点时设置了这些边界（例如 Google Chrome）。

到目前为止，我已经想出了这个......在扩展器提供程序字典中添加控件时，我连接了 Enter 和 Leave 控制事件。在那里，我得到了触发事件的控件的父级，并在该表单上绘制了这 3 个矩形。这样我就在非客户区域对绘画进行了分类。剩下的就是绘制实际的控制边界。我已经尝试过但无济于事。

我还连接了该控件的绘制事件，但 ControlPaint.DrawBorder() 不起作用。

好的，这是在 Enter 和 Leave 时调用的方法。

```
private void BojajGlow(Graphics gfx, Graphics gfxCtrl, Control parent, Control kontrola, bool novi)
    {
        Rectangle[] rect = new Rectangle[3];
        for (int i = 0; i < 3; i++)
        {
            int x = kontrola.Location.X - (i + 1);
            int y = kontrola.Location.Y - (i + 1);
            int w = kontrola.Size.Width + 2 * (i + 1) - 1;
            int h = kontrola.Size.Height + 2 * (i + 1) - 1;
            rect[i] = new Rectangle(x, y, w, h);
        }

        if (novi)
        {
            Color boja = DohvatiOpcije(kontrola).Boja;
            for (int i = 0; i < 3; i++)
            {
                if (i > 0)
                    boja = Posvjetli(95, ControlPaint.Light(boja));
                Pen olovka = new Pen(boja);
                olovka.EndCap = olovka.StartCap = LineCap.Round;
                olovka.Width = 1;

                GraphicsPath gfxPath = new GraphicsPath();
                gfxPath.AddRectangle(rect[i]);

                gfx.DrawPath(olovka, gfxPath);
            }
        }
        else
        {
            for (int i = 0; i < 3; i++)
            {
                Pen olovka = new Pen(parent.BackColor);
                olovka.EndCap = olovka.StartCap = LineCap.Round;
                olovka.Width = 1;

                GraphicsPath gfxPath = new GraphicsPath();
                gfxPath.AddRectangle(rect[i]);

                gfx.DrawPath(olovka, gfxPath);
            }
        }
    } 
```

从 Enter 事件中，它将像这样被调用

```
if (((Control)sender).Parent != null)
            BojajGlow(Graphics.FromHwnd(((Control)sender).Parent.Handle), Graphics.FromHwnd(((Control)sender).Handle), ((Control)sender).Parent, (Control)sender, true); 
```

有人对此有任何有价值的意见吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T15:39:00.367

在 winforms 中，您可能需要创建自己的自定义控件，继承自 TextBox 控件。在您的控件中，您可以根据控件状态（例如它是否具有焦点）来实现 OnPaint。

至于在控件之外绘图，不要。它只会让你感到沮丧。而是使用控件内的表单背景颜色绘制三个边框，并在需要它们发光时将它们更改为突出显示的颜色。

希望这可以帮助。

# bash - 符号链接捕获用户输入

> ID：12957016
> 
> 赞同：0
> 
> 时间：2012-10-18T14:30:00.547
> 
> 标签：bash, symlink

我想用 name 创建一个符号链接`xyz`，然后捕获用户提供的输入，包括符号链接名称。

示例：如果用户键入：

```
xyz load aab\1.0.5 
```

我想拥有`xyz load aab\1.0.5`一个可以做更多事情的字符串。

我为什么要问？（您可以跳过阅读的内容）

在这种情况下，我会将此字符串的部分内容与目录名称进行比较，或者

1.  如果没有匹配，给用户一个警告，或者
2.  以其他方式执行命令。

我想要做的是劫持`module`命令。

编辑：我想我应该使用别名。

编辑2：澄清

我想要做的确切的事情是：当用户键入`module load program`或`module load program/2.3.3`. 在我知道他们请求的版本是否可用于特定平台之前，我不希望命令执行。我可以通过查看文件夹来检查可用的版本`/app/firefox/.sys/@sys/`。

潜在的“问题”是以`module`一种使所有模块都可用于 SLES 10 和 11 以及 32 位和 64 位的方式设置的，因此在某些情况下，用户会尝试加载其平台上不可用的版本。

我现在意识到一个问题：如果他们不输入版本，那么它将选择默认版本。但我不知道如何使用脚本轻松找出默认版本。grepping`module appname avail`以获取其中包含“（默认）”的版本不起作用，因为它是其他东西，然后是打印结果的模块。例如`module firefox avail >> result.text`给出一个空文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T15:33:23.460

不确定我的问题是否正确，但可能是您正在尝试“挂钩”特定命令。在这种情况下，您可以使用挂钩脚本来执行此操作，并使用与您要挂钩的命令相同的名称链接到它，这些命令出现在真实命令之前的 $PATH 中，因此您可以决定是否调用真实命令命令。

例如：

（警告：这是另一个*危险而丑陋的黑客攻击*）

$猫钩

```
#!/bin/bash
# hook for some commands

echo $0

cmd=$(basename "$0")
echo "called as $cmd"

if [[ $cmd = "module" ]]
then
    realcmd=/usr/bin/module

    # verify parameters

    # then call real command
    $realcmd "$@"
    rc=$?
    exit $rc
else
    echo "???" 1>&2
    exit 1
fi 
```

$chmod a+x 钩子

$ln -s 钩子模块

$PATH=.:$PATH 模块 arg1 arg2

# quartz-scheduler - Quartz 作业 - 不允许在组范围内并发执行？

> ID：12957019
> 
> 赞同：2
> 
> 时间：2012-10-18T14:30:13.340
> 
> 标签：quartz-scheduler

使用 Quartz，我希望很少有工作（比如大约 10 个）作为链执行 - 即不是同时执行。它们应该在“会计日更改”事件发生后执行，但由于它们都访问同一个数据库，我不希望它们一起开始。我希望它们按顺序执行（顺序无关紧要）。

我有一个想法将它们放入一个组中 - 说“account_day_change_jobs”并以某种方式配置 Quartz 为我完成剩下的工作:-) 意味着 - 依次运行组中的所有作业。我尝试了 API 文档（1.8 和 2.1），尝试了谷歌但没有找到任何东西。

可能吗？甚至合理吗？其他想法如何实现我想要的行为？

非常感谢您的任何想法:-) 汉斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-18T04:19:02.070

下面的 Trigger Listener 类应该重新安排任何尝试在已配置侦听器的另一个作业正在运行时执行的作业。我只是对它进行了轻微的测试，但对于简单的情况，它应该是合适的。

```
public class SequentialTriggerListener extends TriggerListenerSupport {

private JobKey activeJob;
private Scheduler activeScheduler;
private Queue<JobDetail> queuedJobs = new ConcurrentLinkedQueue<JobDetail>();

public String getName() {
    return "SequentialTriggerListener";
}

public boolean vetoJobExecution(Trigger trigger, JobExecutionContext context) {
    synchronized (this) {
        if (activeJob != null) {
            getLog().debug("Queueing Sequential Job - " + context.getJobDetail().getKey().getName());
            JobDetail jd = context.getJobDetail();
            activeScheduler = context.getScheduler();
            jd = JobBuilder.newJob().usingJobData(jd.getJobDataMap()).withIdentity(getName() + ":" + jd.getKey().getName(), jd.getKey().getGroup())
                    .ofType(jd.getJobClass()).build();
            queuedJobs.add(jd);
            return true;
        } else {
            activeJob = trigger.getJobKey();
            getLog().debug("Executing Job - " + activeJob.getName());
            return false;
        }
    }
}

public void triggerMisfired(Trigger trigger) {
    triggerFinalized(trigger);
}

public void triggerComplete(Trigger trigger, JobExecutionContext context, CompletedExecutionInstruction triggerInstructionCode) {
    triggerFinalized(trigger);
}

protected void triggerFinalized(Trigger trigger) {
    synchronized (this) {
        try {
            if (trigger.getJobKey().equals(activeJob)) {
                getLog().debug("Finalized Sequential Job - " + activeJob.getName());
                activeJob = null;
                JobDetail jd = queuedJobs.poll();
                if (jd != null) {
                    getLog().debug("Triggering Sequential Job - " + jd.getKey().getName());
                    activeScheduler.scheduleJob(jd,TriggerBuilder.newTrigger().forJob(jd).withIdentity("trigger:" + jd.getKey().getName(), jd.getKey().getGroup())
                            .startNow().withSchedule(SimpleScheduleBuilder.simpleSchedule().withRepeatCount(0).withIntervalInMilliseconds(1)).build());
                }
            } else {
                // this should not occur as the trigger finalizing should be the one we are tracking.
                getLog().warn("Sequential Trigger Listener execution order failer");
            }
        } catch (SchedulerException ex) {
            getLog().warn("Sequential Trigger Listener failure", ex);
        }
    }

} 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T00:26:39.847

自从我使用石英以来已经很长时间了，但是我会尝试注册两个[工作听众](http://quartz-scheduler.org/documentation/quartz-2.1.x/cookbook/JobListeners)来收听两个不同的组

基本思想是从组/列表（“todayGroup”）中触发一个作业，'（“todayGroup”）作业侦听器检测完成情况好坏。然后开始列表中的下一个作业。但是，它将“刚刚完成”的作业保存回（“tomorrowGroup”）下的调度程序中。

```
public class MyTodayGroupListener extends JobListenerSupport {

    private String name;

    private static String GROUP_NAME = "todayGroup";

    public MyOtherJobListener(String name) {
    this.name = name;
    }

    public String getName() {
    return name;
    }

    @Override
    public void jobWasExecuted(JobExecutionContext context,
        JobExecutionException jobException) {
        Scheduler sched = context.getScheduler();
        // switch the job to the other group so we don't run it again today.
        JobDetail current = context.getJobDetail();
        JobDetail tomorrows  = current.getJobBuilder().withIdentity(current.getKey().getName(), "tomorrow").build();
        sched.addJob(tomorrows,true);

        //see if there is anything left to run
        Set<JobKey> jobKeys = sched.getJobKeys(groupEquals(GROUP_NAME ));
        Iterator<JobKey> nextJob = null;
        if(jobKeys != null && !jobKeys.isEmpty() ){
            nextJob = jobKeys.iterator();
        }
        if(nextJob != null){
            // Define a Trigger that will fire "now" and associate it with the first job from the list
            Trigger trigger = newTrigger()
                .withIdentity("trigger1", "group1")
                .startNow()
                .forJob(nextJob =.next())
                .build();

            // Schedule the trigger
            sched.scheduleJob(trigger);
        }

    }
} 
```

同样，您将需要两个“组触发器”，它们将在您想要的给定时间从各自的组中触发第一个作业。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-13T17:52:30.517

```
public class TriggerGroupDisallowConcurrentExecutionTriggerListener : ITriggerListener
{
    private IScheduler activeScheduler;
    private readonly object locker = new object();
    private ConcurrentDictionary<string, JobsQueueInfo> groupsDictionary = new ConcurrentDictionary<string, JobsQueueInfo>();

    public string Name => "TriggerGroupDisallowConcurrentExecutionTriggerListener";

    public Task TriggerComplete(ITrigger trigger, IJobExecutionContext context, SchedulerInstruction triggerInstructionCode, CancellationToken cancellationToken = default)
    {
        //JobKey key = context.JobDetail.Key;
        //Console.WriteLine($"{DateTime.Now}: TriggerComplete. {key.Name} - {key.Group} - {trigger.Key.Name}");

        TriggerFinished(trigger, cancellationToken);
        return Task.CompletedTask;
    }

    public Task TriggerFired(ITrigger trigger, IJobExecutionContext context, CancellationToken cancellationToken = default)
    {
        //JobKey key = context.JobDetail.Key;
        //Console.WriteLine($"{DateTime.Now}: TriggerFired. {key.Name} - {key.Group} - {trigger.Key.Name}");

        return Task.CompletedTask;
    }

    public Task TriggerMisfired(ITrigger trigger, CancellationToken cancellationToken = default)
    {
        //JobKey key = trigger.JobKey;
        //Console.WriteLine($"{DateTime.Now}: TriggerMisfired. {key.Name} - {key.Group} - {trigger.Key.Name}");

        TriggerFinished(trigger, cancellationToken);
        return Task.CompletedTask;
    }

    public Task<bool> VetoJobExecution(ITrigger trigger, IJobExecutionContext context, CancellationToken cancellationToken = default)
    {
        //JobKey key = context.JobDetail.Key;
        //Console.WriteLine($"{DateTime.Now}: VetoJobExecution. {key.Name} - {key.Group} - {trigger.Key.Name}");

        lock (locker)
        {
            //if (!groupsDictionary.ContainsKey(context.JobDetail.Key.Group))
            //{
            groupsDictionary.TryAdd(context.JobDetail.Key.Group, new JobsQueueInfo { QueuedJobs = new ConcurrentQueue<IJobDetail>(), ActiveJobKey = null });
            var activeJobKey = groupsDictionary[context.JobDetail.Key.Group].ActiveJobKey;
            //}

            if (activeJobKey != null && activeJobKey != context.JobDetail.Key)
            {
                var queuedJobs = groupsDictionary[context.JobDetail.Key.Group].QueuedJobs;
                if (queuedJobs.Any(jobDetail => jobDetail.Key.Name == context.JobDetail.Key.Name) == true)
                {
                    //NOTE: Джоба уже есть в очереди, нет необходимости её добавлять повторно
                    return Task.FromResult(true);
                }
                else
                {
                    //NOTE: Добавить джобу в очередь на выполнение, и не выполнять её сейчас, т.к. она будет выполнена как только подойдёт её очередь
                    activeScheduler = context.Scheduler;
                    var newJob = JobBuilder.Create(context.JobDetail.JobType).WithIdentity(context.JobDetail.Key).Build();
                    queuedJobs.Enqueue(newJob);

                    return Task.FromResult(true);
                }
            }

            groupsDictionary[context.JobDetail.Key.Group].ActiveJobKey = trigger.JobKey;

            return Task.FromResult(false);
        }
    }

    protected void TriggerFinished(ITrigger trigger, CancellationToken cancellationToken = default)
    {
        lock (locker)
        {
            try
            {
                if (!groupsDictionary.ContainsKey(trigger.JobKey.Group))
                {
                    return;
                }

                var queuedJobs = groupsDictionary[trigger.JobKey.Group].QueuedJobs;
                if (queuedJobs.TryDequeue(out IJobDetail jobDetail))
                {
                    //Console.WriteLine($"dequeue - {jobDetail.Key.Name}");

                    var task = activeScheduler.TriggerJob(jobDetail.Key, cancellationToken);
                    task.ConfigureAwait(false);
                    task.Wait(cancellationToken);

                    groupsDictionary[trigger.JobKey.Group].ActiveJobKey = jobDetail.Key;
                }
                else
                {
                    groupsDictionary[trigger.JobKey.Group].ActiveJobKey = null;
                }
            }
            catch (SchedulerException ex)
            {
                throw;
            }
        }
    }

    private class JobsQueueInfo
    {

        public ConcurrentQueue<IJobDetail> QueuedJobs { get; set; }

        public JobKey ActiveJobKey { get; set; }
    }
} 
```

# java - 我如何知道我是否使用了正确版本的 Triple Des 算法实现？

> ID：12957022
> 
> 赞同：1
> 
> 时间：2012-10-18T14:30:18.790
> 
> 标签：java, encryption, tripledes

我在互联网上搜索了 Java 的 Triple Des 算法实现。

我找到了很多解决方案并选择了一个（对我来说文档更好的那个）。我测试并工作正常。

然后，我搜索了 Java 的 AES 算法实现。并找到了一个好的。与 Triple Des 算法的实现非常相似，但并不完全相同。

所以我想，如果我使用 AES 算法实现但将密码实例参数从“AES”更改为“DESede”，会附加什么？我进行了更改，测试了代码并且工作正常。但是，返回的字符串与我之前的 Triple Des 算法实现中返回的字符串不同。

所以，就像标题说的那样，我怎么知道我是否使用了正确版本的 Triple Des 算法实现？

这是第一个实现：

```
public String encrypt(SecretKey key, String stringIn){

    String outString = "";      

    if (stringIn.isEmpty() || stringIn.toUpperCase().equals("NULL")){
        return "";
    }

    try {   

        if (key == null)
            key = this.key;

        InputStream in = new ByteArrayInputStream(stringIn.getBytes("UTF-8"));

        ByteArrayOutputStream out = new ByteArrayOutputStream();

        // Create and initialize the encryption engine
        Cipher cipher = Cipher.getInstance("DESede");
        cipher.init(Cipher.ENCRYPT_MODE, key);

        // Create a special output stream to do the work for us
        CipherOutputStream cos = new CipherOutputStream(out, cipher);

        // Read from the input and write to the encrypting output stream
        byte[] buffer = new byte[2048];

        int bytesRead;

        while ((bytesRead = in.read(buffer)) != -1) {
            cos.write(buffer, 0, bytesRead);
        }

        cos.close();

        // For extra security, don't leave any plaintext hanging around memory.
        java.util.Arrays.fill(buffer, (byte) 0);

        outString = out.toString();

    } catch (UnsupportedEncodingException e) {

        e.printStackTrace();

    } catch (NoSuchAlgorithmException e) {

        e.printStackTrace();

    } catch (NoSuchPaddingException e) {

        e.printStackTrace();

    } catch (InvalidKeyException e) {

        e.printStackTrace();

    } catch (IOException e) {

        e.printStackTrace();

    } finally {

        return outString;
    }

} 
```

这是第二个：

```
public String encrypt(SecretKey key, String stringIn){

    String outString = "";      

    if (stringIn.isEmpty() || stringIn.toUpperCase().equals("NULL")){
        return "";
    }

    try {   

        if (key == null)
            key = this.key;

        Cipher ecipher = Cipher.getInstance("DESede");

        ecipher.init(Cipher.ENCRYPT_MODE, key);

        byte[] bytes = stringIn.getBytes("UTF8");

        byte[] encVal = ecipher.doFinal(bytes);

        outString = new sun.misc.BASE64Encoder().encode(encVal);

    } catch (UnsupportedEncodingException e) {

        e.printStackTrace();

    } catch (NoSuchAlgorithmException e) {

        e.printStackTrace();

    } catch (NoSuchPaddingException e) {

        e.printStackTrace();

    } catch (InvalidKeyException e) {

        e.printStackTrace();

    } catch (IOException e) {

        e.printStackTrace();

    } finally {

        return outString;
    }

} 
```

这是测试用例：

```
 String In: 6985475896580019
    String Returned when I Encripted with First code: Kœ¼i …€‡ä«‘]<žéù âpU
    String Returned when I Encripted with Second code: w1ujopasjH6ccFKgUtOgansFNBtxbWe8YwDhso2pZN8= 
```

对不起我糟糕的英语。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T00:44:43.180

`cipher.init(mode,key)` generates a random IV. This is actually the most secure way of using it; you should use `.getIV()` and return that with the encrypted text (which is also automatic; Java tacks it onto the first few bytes of the cryptostream, which is how they decrypt OK). Different IV changes the result just as much as a different key, but it doesn't need to be secret, it's just to make sure identical things don't encrypt identically.

To force an IV for comparing algorithms, or for decrypting with a known one not included, use `cipher.init(mode,key,new IvParameterSpec(iv))`

# visual-c++ - 测试 - 在创建期间执行 C++/CLR 类项目

> ID：12957030
> 
> 赞同：0
> 
> 时间：2012-10-18T14:30:40.497
> 
> 标签：visual-c++, clr

我正在尝试创建一个 C++/CLR 类项目，我想知道如果没有入口点（即没有 main），您将如何测试您编写的类代码？我正在使用 VS2010 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T14:32:21.797

通常的方法是使用单元测试框架，例如 xunit 或 nunit。

Xunit 似乎是当今最流行的...

[http://xunit.codeplex.com/](http://xunit.codeplex.com/)

这将为您提供一个 GUI 来运行单元测试，或者如果您愿意，您可以从命令行运行测试。

# jquery - jQuery重新绑定.click？

> ID：12957031
> 
> 赞同：0
> 
> 时间：2012-10-18T14:30:41.810
> 
> 标签：jquery

我有多次点击，一旦点击就必须取消绑定，但我需要重新绑定链接的按钮。

这是一个例子：

```
$('.001').click(function(){
      jQuery(this).unbind('click');
      jQuery('.hide').hide();
      jQuery('.show').show();
      jQuery(this).find('.show').hide();
      jQuery(this).find('.hide').load('pages/001.html');
      jQuery(this).find('.hide').show();

    }); 

    $('.002').click(function(){
      jQuery(this).unbind('click');
      jQuery('.hide').hide();
      jQuery('.show').show();
      jQuery(this).find('.show').hide();
      jQuery(this).find('.hide').load('pages/002.html');
      jQuery(this).find('.hide').show();
    }); 
```

因此，当我单击 .001 时，它会加载一个带有不同 jQuery 动作的页面（滑块），所以我必须取消对 .001 的单击（因此是 jQuery(this).unbind('click');），但是当我点击 .002 时，我必须重新绑定 .click on .001。这必须使用 vars 完成，因为它可以从 001 到 999。

有小费吗 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T14:47:51.020

您不需要一次又一次地绑定和重新绑定处理程序。只需将激活项的标识符存储在某处，然后在每个单击处理程序中检查它。像这样：

```
var active;
$('.some_class').click(function() {
  if (this.className === active) {
    return false;
  }
  active = this.className;
  ...
}); 
```

此外，我强烈建议为所有相关项目分配一个且只有一个函数作为事件处理程序，基于外部属性分叉其操作。像这样：

```
<a class="first" data-url-to-go="/first.html">Some Link</a>
<a class="second" data-url-to-go="/second.html">Some Other Link</a>
...
var active;
$('.first, .second').click(function() {
  if (this.className === active) {
    return false; 
  }
  active = this.className;
  var $this = $(this), 
      url = $this.data('urlToGo');
  ...
}); 
```

这是一个说明这个概念的[**JS Fiddle 。**](http://jsfiddle.net/2LmRe/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-18T14:37:25.207

```
for(i=1;i<1000;i++){
    var query_str
    var page_to_load;
    if(i<10){
        query_str = ".00"+i
        page_to_load = "pages/00" + i + ".html"
    }
    else if(i>10 && i<100){
        query_str = ".0"+i
        page_to_load = "pages/0" + i + ".html"
    }
    else{
        query_str = "."+i
        page_to_load = "pages/" + i + ".html"
    }

     $(quer_str).click(function(){
      jQuery(this).unbind('click');
      jQuery('.hide').hide();
      jQuery('.show').show();
      jQuery(this).find('.show').hide();
      jQuery(this).find('.hide').load(page_to_load);
      jQuery(this).find('.hide').show();

    }); 

} 
```

这不会是好的表现，但这是你要求的

# tridion - 如何扩展 Tridion.Cme.Commands.Open.prototype._execute() 的默认行为？

> ID：12957032
> 
> 赞同：6
> 
> 时间：2012-10-18T14:30:44.163
> 
> 标签：tridion, tridion-2011

我编写了一个 GUI 扩展，它为 SDL Tridion CME 中的许多项目视图（例如组件、页面和模式等）添加了一个附加选项卡。我还编写了一些 JavaScript，如果在加载视图时在 URL 中指定了选项卡名称，它们会直接加载该选项卡。

结果是，如果页面加载时添加了选项卡名称，如下所示：

```
http://localhost/WebUI/item.aspx?tcm=64#id=tcm:1-48-64&tab=InfoTab 
```

而不是默认的

```
http://localhost/WebUI/item.aspx?tcm=64#id=tcm:1-48-64 
```

信息选项卡将加载在顶部，而不是常规选项卡。这是使用以下代码片段执行的，效果很好：

```
$evt.addEventHandler($display, "start", onDisplayStarted);

// This callback is called when any view has finished loading
function onDisplayStarted() {

    $evt.removeEventHandler($display, "start", onDisplayStarted);
    var tabname = $url.getHashParam("tab");
    if (tabname != '') {
        var tabControl = $controls.getControl($("#MasterTabControl"), "Tridion.Controls.TabControl");
        tabControl.selectItem(tabname);        
    }
} 
```

现在我想创建一个上下文菜单项来打开项目并使用我的新功能链接到选项卡。我的第一个想法是自己构建项目 URL，然后在我的执行方法中打开一个新窗口。因此，我查看`Open.prototype_execute()`了 GUI 标准功能中的默认功能。这存储在`navigation.js`CME 的文件中，并由该`Tridion.Cme.Commands.Open.prototype._execute`方法执行。代码比我预期的要复杂得多，因为它处理共享项目和权限等。

我不只是将所有这些代码复制到我自己的函数中，而是想知道是否有一种方法可以优雅地扩展现有`Open.prototype_execute()`函数并将我的“&tab=MyTab”附加到`$cme.Popups.OPEN_ITEM_OPTIONS.URL`我自己函数的常量中。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T12:45:52.053

最后，Open 命令用于`$config.getEditorUrl(item_type)`获取项目视图的 url（item_type -`$const.ItemType.COMPONENT`等）。这部分功能没有扩展点，但您始终可以尝试覆盖它，风险自负。

# xml - SAML - 为服务提供商生成元数据文件

> ID：12957033
> 
> 赞同：1
> 
> 时间：2012-10-18T14:30:44.760
> 
> 标签：xml, metadata, single-sign-on, saml-2.0

我有一些代码块，但不确定如何连贯地使用它们。

我们的办公室 (IdP) 将使用 box.com (SP) 使用 simplesamlphp，我们应该为他们提供一个元数据文件以进行 SSO 握手。他们为我们提供了这个示例文件：[查看这里](https://www.box.com/shared/3isa8qvvqn)

看着它，我不确定要改变什么（除了 x509 证书块）。在使用 SAML 之前，我没有处理过这么复杂的事情。该文件中的所有内容都是必需的吗？如果不是，哪些部分是必须修改的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T13:12:05.333

在我的本地机器上运行这个页面就可以了；

http://127.0.0.1/simplesaml/www/admin/metadata-converter.php（您的网址可能因虚拟主机地址而异）

我输入上面链接中提供的 XML 示例代码，然后将其粘贴到此页面上提供的文本区域字段中。提交，它被转换为必要的 saml20-sp-remote.php 代码。

# php - Magento：自定义产品列表缺少页面选择

> ID：12957035
> 
> 赞同：0
> 
> 时间：2012-10-18T14:30:59.247
> 
> 标签：php, model-view-controller, templates, magento, content-management-system

我编写了一个控制器，它根据请求的类别和属性过滤器生成产品集合。

我使用以下代码生成渲染：

```
public function AfficherCollection($collection){
 if ($collection){
  Mage::getSingleton('catalog/product_visibility')->addVisibleInCatalogFilterToCollection($collection);       
  $magento_block = Mage::getSingleton('core/layout');
  $productsHtml  = $magento_block->createBlock('catalog/product_list');
  $productsHtml ->setTemplate('catalog/product/list.phtml')->setCollection($collection);
  echo $productsHtml->toHTML();
 }  
} 
```

渲染效果很好，但问题是缺少页面选择器。但是如果我用`?p=2`in page 参数调用我的页面；我有想要的产品，所以没有任何功能问题，但仍然存在页面布局问题。

你有想法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T15:25:25.877

为什么你完全绕过标准的 magento 功能和框架？

您应该使用magento框架的布局层。处理所有product_list逻辑的是他：

参见例如 catalog.xml 布局文件：

```
<catalog_category_view>
    <reference name="content">
        <block type="catalog/category_view" name="category.products" template="catalog/category/view.phtml">
            <block type="catalog/product_list" name="product_list" template="catalog/product/list.phtml">
                <block type="catalog/product_list_toolbar" name="product_list_toolbar" template="catalog/product/list/toolbar.phtml">
                    <block type="page/html_pager" name="product_list_toolbar_pager"/>
                    [...] 
```

可以看到分页器是通过 XML 布局更新添加的

# c# - LINQ to Entities 无法识别方法 'System.String[] ToArray[String]

> ID：12957039
> 
> 赞同：3
> 
> 时间：2012-10-18T14:31:11.030
> 
> 标签：c#, entity-framework, linq-to-entities, group-by

我有近 100 万条数据，我绝对不想将它们全部查询到内存然后对它们进行分组，所以我尝试了这个，但是 linq2Entity 无法识别 string.join()、IEnumerable.toList() 或相同的事物

```
 var capaHrs = (
                from newsPerHr in _dbRawDataContext.CapacityPerHours
                where newsPerHr.StreamDT >= this.BeginDateTime
                                && newsPerHr.StreamDT < this.EndDateTime
                                && newsPerHr.ServerName == this.ServerName
                group newsPerHr by newsPerHr.StreamDT into grp
                let MsgSizeTotal = (from i in grp select i.MsgSize).Sum(x => (int)x)
                let MNumber = (from i in grp select i.MsgNumber).Sum(x => (int)x)
                let Feeds = (from i in grp select i.FeedName).ToArray()
                select new 
                {
                    ServerName = ServerName,
                    FeedName = Feeds,
                    StreamDT = grp.Key,
                    MsgSize = MsgSizeTotal,
                    MsgNumber = MNumber
                }).ToList();

            _capacityData = capaHrs.Select(x => new CapacityPerHour {
                ServerName = x.ServerName,
                FeedName = string.Join(", ",x.FeedName),
                StreamDT = x.StreamDT,
                MsgSize = x.MsgSize,
                MsgNumber = x.MsgNumber
            }).ToList(); 
```

如何使它工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T14:40:08.233

它只需要几个更改：

1.  删除`ToArray`了 Feed 声明中的
2.  按匿名类型分组，因此您可以包含多个属性，`ServerName`并且`StreamDT`

试试这个：

```
var capaHrs = (
                from newsPerHr in _dbRawDataContext.CapacityPerHours
                where newsPerHr.StreamDT >= this.BeginDateTime
                                && newsPerHr.StreamDT < this.EndDateTime
                                && newsPerHr.ServerName == this.ServerName
                group newsPerHr by new { newsPerHr.ServerName, newsPerHr.StreamDT } into grp
                let MsgSizeTotal = grp.Sum(x => (int)x.MsgSize)
                let MNumber = grp.Sum(x => (int)x.MsgNumber)
                let Feeds = (from i in grp select i.FeedName)
                select new 
                {
                    ServerName = grp.Key.ServerName,
                    FeedName = Feeds,
                    StreamDT = grp.Key.StreamDT,
                    MsgSize = MsgSizeTotal,
                    MsgNumber = MNumber
                }).ToList();

_capacityData = capaHrs.Select(x => new CapacityPerHour {
                ServerName = x.ServerName,
                FeedName = string.Join(", ",x.FeedName),
                StreamDT = x.StreamDT,
                MsgSize = x.MsgSize,
                MsgNumber = x.MsgNumber
            }).ToList(); 
```

# php - wp_ajax_ 使用面向对象的操作处理程序的操作？

> ID：12957040
> 
> 赞同：0
> 
> 时间：2012-10-18T14:31:12.387
> 
> 标签：php, ajax, wordpress, namespaces, include

我正在尝试将 ajax 操作传递给 /wp-admin/admin-ajax.php，但是我似乎无法让它调用任何使用类来封装命名空间的函数。我收到以下错误：

```
Warning:  call_user_func_array() expects parameter 1 to be a valid callback, class 'PHP_faq_backend' not found in /wp-includes/plugin.php 
```

我的操作如下：

```
add_action('wp_ajax_edit_form', array('PHP_faq_backend', 'edit_form')); 
```

显然我不想通过修改 admin-ajax.php 文件来强制执行此操作，但是如何加载我的类文件以便该操作起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T20:02:20.157

确保将类文件包含在 Wordpress 主题（functions.php）或插件中的某个位置。

我通常使用这样的东西；

```
<?php
class Some_Class {

    public function __construct() {
        //logged in users
        add_action('wp_ajax_some_method', array($this,'some_method'));
        //non logged in users
        add_action('wp_ajax_nopriv_some_method', array($this,'some_method'));
    }

    public function some_method(){
        //check nonce values etc
        if ( ! isset( $_REQUEST['some_nonce'] ) || ! wp_verify_nonce( $_REQUEST['some_nonce'], 'class_some_nonce' ) ) {
            wp_die(__('Naughty', 'some-class-textdomain'));
        }

        //proceed with post data validation - then execute method
    }

}

$some_class_instance = new Some_Class();
?> 
```

以上用于从类实例中注册操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T14:47:19.070

错误消息的最后一部分是您的第一条线索。我在多个版本的 WP 上遇到过同样的问题。在某些环境中，安装无法识别第三方类。你可以做几件事来尝试解决这个问题：

1.  检查你的类文件的权限，看看你是否有足够的权限
2.  检查您的类是否正在加载，例如将它们明确包含在您的 functions.php 文件中（不是理想或推荐的方法）

我发现一直有效的一个解决方案是：

1.  创建需要通过插件管理器激活的骨架插件
2.  您的插件文件应该包含您想要使用的所有类。
3.  激活您的插件。完毕。

这种方法可以通过几种不同的方式来实现；第一个是您可以定义一个驻留在当前主题目录中的插件目录 - 这可以让您将所有文件放在一起；二是走正常路线，在`wp-content/plugins/my-skeleton-plugin`. 如果您使用这种方法，这里有一个骨架插件可以帮助您入门：

```
<?php
/*
Plugin Name: Skeleton Plugin Base
Plugin URI: http://www.yourdomain.com
Description: This is a base plugin to use as a template for other plugins.
Author: Author Name
Version: v0.0.1
Author URI: http://www.yourdomain.com
*/

    # +------------------------------------------------------------------------+
    # PLUGIN URL AND PATH CONSTANTS
    # +------------------------------------------------------------------------+
    /**
     * Don't depend on WP to always provide a consistent directory/path to use.
     * Extrapolate one the location of this file. The reason for this is that some
     * themes might re-locate the plugins and themes directory to another folder
     * and therefore break the normal WP structure.
     */
    define( DS, DIRECTORY_SEPARATOR, true );

    $PLUGIN_URL = WP_PLUGIN_URL . DS . str_replace( basename( __FILE__ ),'', plugin_basename(__FILE__) ); 
    $PLUGIN_DIR = dirname(__FILE__);

    define( MY_PLUGIN_URL, $PLUGIN_URL, true );
    define( MY_PLUGIN_DIR, $PLUGIN_DIR, true );

    # +------------------------------------------------------------------------+
    # INCLUDES
    # +------------------------------------------------------------------------+
    /**
     * Include the plugin.
     */
    // Use include() if you prefe
    include_once( MY_PLUGIN_DIR . '/inc/classes/my_skeleton_plugin.class.php' );

    try
    {

        /**
         * Initialize the plugin
         */

    }
    catch( Exception $e )
    {
        throw $e;
    } 
```

# javascript - Javascript：在成员函数中访问类的成员变量（数组）

> ID：12957045
> 
> 赞同：4
> 
> 时间：2012-10-18T14:31:29.397
> 
> 标签：javascript

我正在尝试访问一个类的成员变量，该变量是类的成员函数中的一个数组，但出现错误：

> 无法读取`'length'`未定义的属性

班级：

```
function BasicArgs(){
  var argDataType = new Uint8Array(1);
  var argData = new Uint32Array(1);
} 
```

会员功能：

```
BasicArgs.prototype.getByteStreamLength = function(){
  alert(this.argData.length);
  return i;
} 
```

这是一个例子，但我在很多地方都遇到过。像整数这样的变量很容易访问，但大多数时候问题出在数组上。帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T14:33:01.623

您需要`this`在构造函数中创建对象的属性。

```
function BasicArgs(){
    this.argDataType = new Uint8Array(1);
    this.argData = new Uint32Array(1);
} 
```

原型函数无法直接访问构造函数的变量范围。

然后一定要使用`new`来调用构造函数。

```
var ba = new BasicArgs();

ba.getByteStreamLength(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T14:33:31.233

您可以访问函数的私有变量

修改后的代码：

```
 function BasicArgs(){
      this.argDataType = new Uint8Array(1);
     this.argData = new Uint32Array(1);
    }

    BasicArgs.prototype.getByteStreamLength = function(){
       alert(this.argData.length);
        return i;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T14:34:11.543

声明`var argData`不会在对象上创建属性。它只是创建一个局部变量，一旦构造函数退出，该变量就会消失。你需要做

`this.argData = new Uint32Array(1)`

反而。

# google-analytics - 清理“脏”谷歌分析自定义变量键？

> ID：12957046
> 
> 赞同：1
> 
> 时间：2012-10-18T14:31:31.713
> 
> 标签：google-analytics

有没有办法在我的自定义变量中过滤/防止以下类型的意外行为（理想情况下只有一行`1\. Page Type`）？

![在此处输入图像描述](../Images/de3854b12fc51dfeb07bf6430c03f0ca.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-18T09:10:56.353

您可以使用以下方法删除意外的自定义变量：

```
_deleteCustomVar() 
```

此方法删除分配给提供的索引的变量（如果存在）。例如，您可以设置访问者级别的自定义变量，然后决定不再使用此访问者级别的变量。

```
_gaq.push(['_deleteCustomVar', 1]); 
```

以下是详细信息： [https ://developers.google.com/analytics/devguides/collection/gajs/methods/gaJSApiBasicConfiguration#_gat.GA_Tracker_._deleteCustomVar](https://developers.google.com/analytics/devguides/collection/gajs/methods/gaJSApiBasicConfiguration#_gat.GA_Tracker_._deleteCustomVar)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T21:17:06.207

一旦数据在报告中，它就是最终的。再也无法从 Google Analytics 中删除这些数据了。如果需要，您始终可以使用报告过滤器将其删除，但大多数情况下最好忽略它们。

您可以尝试阻止该信息再次进入。只需确保您设置自定义变量的所有位置都对自定义变量使用相同的名称。您可能有一些页面同时使用这两个词，因此只需查看设置了自定义变量的页面并尝试将其更改为使用“页面类型”而不是“页面类型”。

其他的数量很少，可能是在开发环境中进行的一些测试。所以你只需要忽略它们。

# .net - 是不是改“http://tempuri.org/”的引用只是缺乏专业性还是更多？

> ID：12957047
> 
> 赞同：2
> 
> 时间：2012-10-18T14:31:32.437
> 
> 标签：.net, web-services, namespaces

在任何 Web 服务中更改**“http://tempuri.org/”**默认引用的原因仅仅是为了：

> 1：表明我了解命名空间。
> 
> 2：为了表现专业。

如果它在技术方面没有任何***好处***，

我们为什么要继续更改它，这可能最终会显示一些错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T18:01:49.390

您对您的 Web 服务没有说太多，但通常命名空间仅在与 XSD 结合使用时才有用。如果您使用的是 XSD，那么命名空间很有用，原因与它们在 C 风格语言（C#、Java、C++）中的用处相同——将您的“类”与其他程序区分开来。

如果您的 Web 服务的使用者正在尝试与另一个 Web 服务构建混搭，并且该程序员需要将来自您的服务的 XML 与来自另一个服务的 XML 结合起来，那么这些命名空间开始变得非常重要（特别是如果另一个 Web 服务有，例如你的，选择不改变默认的命名空间）。

或者，更简洁地说：

> *一个 XML 实例可能包含来自多个 XML 词汇表的元素或属性名称。如果每个词汇表都有一个名称空间，则可以解决同名元素或属性之间的歧义。*
> [http://en.wikipedia.org/wiki/XML_namespace](http://en.wikipedia.org/wiki/XML_namespace)

就个人而言，我发现命名 XML 命名空间是一个将我的代码与人群区分开来的机会。花时间和精力给你的代码起一个正确的名字会给其他专业人员一种印象，即你已经花时间和精力来正确编码。可以这样想：如果您有一个带有名为 的函数的 API `fUnctiontodoSomeThin()`，您可能会对它的功能感到满意，但您中的一部分人会想知道为什么程序员没有花时间和精力正确/一致地拼写和使用大写字母. 也许他/她没有花时间将他们的数据库调用包装在 try/catch 块中？这可能会导致我去寻找另一个 API（当然，其他一切都是平等的）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T22:08:55.003

我们使用命名空间作为向客户端应用程序发出信号的一种方式，即服务合同或数据合同已在发布之间进行了重大更改（即返回类型已更改，参数顺序已更改等）。否则，您的客户端应用程序将继续尝试解析返回的值，就好像它们在旧合同中一样。解析将失败，并出现令人费解且难以理解的错误消息。或者更糟糕的是，解析可以通过交换值成功（即更改数据协定中两个字符串属性的顺序）。

有关[WCF 服务版本控制](http://msdn.microsoft.com/en-us/library/ms731060.aspx)的更多信息。

# visual-studio-2010 - 如何在 Visual Studio 中创建 MVC Ext.Net 项目？

> ID：12957048
> 
> 赞同：1
> 
> 时间：2012-10-18T14:31:51.280
> 
> 标签：visual-studio-2010, visual-studio, model-view-controller, ext.net

这是我第一次使用 Ext.Net，我只是不知道如何设置。

当我打开 Visual Studio 时，我是要创建一个新的“项目”还是“网站”？

选择“项目”让我可以选择使用 MVC，但我不知道如何从那里使用 Ext.Net。

我能找到的关于 Ext.Net 入门的一点信息告诉我创建一个网站，这样我就可以将“ResourceManager”和“Window”拖到一个 .aspx 页面上。但是，我不知道如何从那里使它成为 MVC。

如果有人能给我一些基本步骤来让一个空白网站运行，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T02:59:26.730

检查这个问题

[如何在 VS2012 MVC4 项目中设置 Ext.NET 2.0？](https://stackoverflow.com/questions/12860727/how-to-setup-ext-net-2-0-in-a-vs2012-mvc4-project)

如果有问题再问

# c# - 在 C# 中什么都不做关键字？

> ID：12957049
> 
> 赞同：13
> 
> 时间：2012-10-18T14:31:58.157
> 
> 标签：c#

C# 中是否有“什么都不做”的关键字？

例如，我想使用三元运算符，其中一个操作是不采取任何操作：

```
officeDict.ContainsKey("0") ? DO NOTHING : officeDict.Add("0","") 
```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-10-18T14:32:56.410

不，没有这样的关键字。此外，`?:`操作员并不是用来决定*动作*的。它用于决定*价值*（或者，更专业地说，*价值表达*）。

您真的非常想使用 if 条件来进行此类决策：

```
if (!officeDict.ContainsKey("0"))
    officeDict.Add("0", ""); 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-10-18T14:38:25.473

正如其他人所指出的，`if`在这里使用语句更为惯用。

但要回答您的问题，您可以使用 lambda 和委托：

```
// Bad code, do not use:
(officeDict.ContainsKey("0") ? (Action)(() => { }) : () => officeDict.Add("0", ""))(); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-18T14:41:24.740

撇开这是一个坏主意这一事实不谈，您实际上可以使用属性创建一个“DoNothing”方法来有条件地发出方法调用（请注意，这依赖于您不#define a 'NEVER'条件的约定。）由于 ConditionalAttribute，不会发出对该方法的调用，并且您基本上有一个“nop”代码部分。

```
 [Conditional("NEVER")] 
       public void DoNothing() 
       { 
       } 
```

尽管如此，正如其他几个人已经指出的那样，不建议这样做。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-10-18T14:33:17.753

如果您只想在其中一种情况下做某事，为什么要使用三元运算符？为什么不直接反转条件并使用 if 语句？

```
if (!officeDict.ContainsKey("0"))
{
    officeDict.Add("0","")
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-10-18T14:32:59.643

三元运算符用于*表达式*，而不是语句。

你想要一个`if`声明。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-10-18T14:34:02.247

为什么不直接使用 if 语句，所以代码如下所示：

```
if(!officeDict.ContainsKey("0"))
    officeDict.Add("0","") 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-10-18T14:33:12.433

为什么不写一个简单的`if`呢？

```
if (!officeDict.ContainsKey("0"))
    officeDict.Add("0","") 
```

它将更具可读性。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-10-18T14:33:24.710

您为什么不为此使用 IF 语句？

```
if(!officeDict.ContainsKey("0")) officeDict.Add("0",""); 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-10-18T14:33:59.383

请改用 if 语句。

```
if (!officeDict.ContainsKey("0")) 
{
    officeDict.Add("0","")
} 
```

* * *

## 回答 #10

> 赞同：-3
> 
> 时间：2012-10-18T14:35:15.747

试试这个（笑）

```
 if (officeDict.ContainsKey("0")) 
       Thread.Sleep(1) 
   else
       officeDict.Add("0","") 
```

# database - 子选择是否使 SQlite 忽略不同之处？

> ID：12957050
> 
> 赞同：0
> 
> 时间：2012-10-18T14:31:58.423
> 
> 标签：database, sqlite, select, subquery

我们在 SQLite（版本 3）中面临一个奇怪的行为。

我们有一个车辆表，其中两列分别引用了一个引擎和一个齿轮。当然，可能有不止一种车辆具有相同的发动机齿轮组合。

我现在想找到车辆发动机和齿轮的独特组合（并将其用于插入 => 这就是为什么 randomblob(36)）。

例子：

```
Vehicle | EngineId | GearId 
-----------------------------
    1   |     1    |    1
    1   |     1    |    2
    1   |     2    |    1
    1   |     2    |    2
    1   |     1    |    2
    1   |     1    |    2 
```

以下 select 语句导致行数过多：

```
 Select randomblob(36), tmp.EngineId, tmp.GearId from (Select distinct EngineId, GearId from tblVehicle order by EngineId, GearId) as tmp; 

RandomId| EngineId | GearId 
-----------------------------
    1   |     1    |    1
    2   |     1    |    2
    3   |     2    |    1
    4   |     2    |    2
    5   |     1    |    2
    6   |     1    |    2 
```

但预期的结果只是：

```
RandomId| EngineId | GearId 
-----------------------------
    1   |     1    |    1
    2   |     1    |    2
    3   |     2    |    1
    4   |     2    |    2 
```

如果我将 randomblob(36) 替换为常数，则结果如预期（当然没有随机 ID）。

Select 2, tmp.EngineId, tmp.GearId from (Select distinct EngineId, GearId from tblVehicle order by EngineId, GearId) 作为tmp；

有人可以解释一下 SQLite 的这种行为吗？这是预期的行为吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T15:47:31.783

这是一个错误。

我可以用 SQLite 3.6.23.1 重现这个，但不能用 3.7.15 重现，所以它已经修复了。

# assembly - 使用 strcpy 进行逆向工程（堆栈溢出攻击）

> ID：12957052
> 
> 赞同：0
> 
> 时间：2012-10-18T14:32:03.090
> 
> 标签：assembly, x86

c代码是这样的，

```
void foo (char *x){
    int buf[1];
    strcpy((char *) buf, x);
}

void callfoo() {
    foo("abcdefghi");
} 
```

并且汇编代码 foo 的一部分是

```
leal 0xfffffffc(%ebp), %eax
pushl %eax
call 80483c4 <strcpy>
movl %ebp, %esp
popl %ebp
ret 
```

我希望 strcpy 得到 %eax 用 buf 填充，所以它填充到 %ebp-4、%ebp、%ebp+4(old %ebp) %ebp+8(foo 的返回地址).... . 我的攻击字符串是“abcdefghi”

缓冲区将被填满的情况下，

```
%ebp-0x4 = 64636261
%ebp = 68676665
%ebp+0x4 = 08040069 
```

但是解决方案说它会填满 %ebp ~ %ebp+0x8。我误解了堆栈结构？

解决方案说，

```
B. Immediately before the ret instruction at address of foo, what is the value of the frame pointer register %ebp?

%ebp = 0x68676665

C. Immediately after the ret instruction of foo, what is the value of the program counter register %eip?

%eip = %ebp+8(it is changed by strcpy) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T06:37:34.907

我误解了推送指令。

推送指令是

```
pushl %ebp 
```

和

```
subl 0x4, %esp
movl %ebp, (%esp) 
```

所以 strcpy 被填充到 %ebp ~ %ebp+0x8

# c# - 在 Monodroid 中通过 BluetoothSocket 传递有符号字节数组

> ID：12957055
> 
> 赞同：0
> 
> 时间：2012-10-18T14:32:18.380
> 
> 标签：c#, java, xamarin.android

我在使用 Monodroid 通过蓝牙向设备发送命令时遇到了一个有趣的问题。

我正在使用这个 Monodroid 方法：

BluetoothSocket.OutputStream.Write(byte[] buffer, int offset, int count);

我需要发送以下 8 字节帧：

*   0x51
*   0x26
*   0x0
*   0x0
*   0x0
*   0x0
*   0xFFFFFFA3
*   0x0

问题是 0xFFFFFFA3 是有符号字节 (-93)，所以这意味着我需要使用 C#.NET 的 sbyte 而不是 byte 来创建要传递给 Write 方法的数组。

但是，我不能将 sbyte[] 数组传递给 Write 方法，我只能传递一个 byte[] 数组。C#.NET 不允许我将 0xFFFFFFA3 放在一个字节中，因为它已签名。

我该怎么做才能通过套接字传递命令？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T14:48:57.313

0xFFFFFFA3 是 Int32 的大小，这可能是编译器抱怨的原因。您应该能够只指定一个字节值 0xA3。

# groovy - 如何从jira（groovy）中的工作流转换屏幕访问附件

> ID：12957057
> 
> 赞同：0
> 
> 时间：2012-10-18T14:32:21.173
> 
> 标签：groovy, workflow, jira, transition

在工作流转换中，我有一个带有“附加文件”输入的屏幕。在后期功能中，我想访问附件（如果有）并使用该文件作为附件创建另一个问题。

我试图通过 ServletActionContext.getRequest() 来实现这一点，但我似乎无法以这种方式获取上传的文件。HttpServletRequest 没有 getPart() 函数。

是否有从后期功能访问附件的官方方法？

提前谢谢了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T09:42:00.260

感谢Naykipap的[这个回答，我找到了一个可行的解决方案。](https://answers.atlassian.com/questions/98885/how-to-access-attached-file-from-workflow-transition-screen-in-jira-with-groovy%20 "Atlassian 答案")这是我想出的：

```
// copy attachments uploaded in screen to new issue
def changeItems = transientVars["changeItems"]
def uploadChanges = changeItems.findAll { item -> item.getField() == "Attachment" && item.getFieldType() == "jira" }

uploadChanges.each { uploadChange ->
  def Attachment attachment = attachmentManager.getAttachment(uploadChange.getTo()?.toLong())
  if (attachment) {
    def filePath = PathUtils.joinPaths(pathManager.attachmentPath, currentIssue.projectObject.key, currentIssue.key, attachment.id.toString())
    def atFile = new File(filePath)
    if (atFile.canRead()) {
        log.debug("Cloning attachment ${attachment.filename}")
        attachmentManager.createAttachmentCopySourceFile(atFile, attachment.filename, attachment.mimetype, attachment.author, newIssue, [:], attachment.created)
    }
  }
} 
```

**重要提示：**必须在问题保存到 db 后执行脚本。否则，transientVars 中没有 changeItems 和/或附件未保存到磁盘。我把它移到了处决的最后，对我来说效果很好。

# deployment - 配置war文件

> ID：12957058
> 
> 赞同：2
> 
> 时间：2012-10-18T14:32:26.173
> 
> 标签：deployment, configuration, jboss, war

我的最终目标很简单。我正在构建一个包含三个组件的网站：移动界面、管理 Web 界面和 Web 用户界面。我计划将这些模块中的每一个放入单独的 WAR 文件中，并与 EJB 模块和可能的公共库模块一起，将它们全部捆绑到 EAR 中，以便在 JBoss AS 7.1 上部署。

但首先，我可以部署一个非常简单的 WAR 文件并让它工作吗？不！

我的战争文件具有以下结构：

项目-mobile.war：

```
 META-INF/MANIFEST.MF
   WEB-INF/jboss-web.xml
   WEB-INF/classes/org/dobbo/project/mobile/Accounts.class
   index.html 
```

manifest.mf 文件内容如下：

```
 Manifest-Version: 1.0
  Ant-Version: Apache Ant 1.8.0
  Created-By: 1.6.0_18-b18 (Sun Microsystems Inc.)
  Built-By: steve 
```

jboss-web.xml 文件的内容是：

```
<?xml version="1.0"?>
<jboss-web>
  <context-root>/mobile</context-root>
</jboss-web> 
```

Accounts.java 文件基于[https://docs.jboss.org/author/display/AS71/Java+API+for+RESTful+Web+Services+(JAX-RS)](https://docs.jboss.org/author/display/AS71/Java+API+for+RESTful+Web+Services+%28JAX-RS%29)中的 Library.java 示例 我确实做了一些更改，添加了 Application 子类化和 AppicationPath 注释，因为这让我在部署工作方面更进一步。

```
package org.dobbo.<project>.mobile;

import javax.ws.rs.*;
import javax.ws.rs.core.Application;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

@ApplicationPath("/accounts")
@Consumes({"application/xml"})
@Produces({"application/xml"})
public class Accounts
    extends Application {

    ...

    @GET
    @Path("/list")
    public Collection<UUID> getAccounts() {
    Collection<UUID> list = uuids.values();

    log.info("getAccounts: " + list);
    return list;
    }

    ...
} 
```

到目前为止，一切都很好。

当我部署时，我将以下内容记录到 JBoss 控制台（时间戳和日志级别信息已删除）：

```
[org.jboss.as.repository] (management-handler-thread - 12) JBAS014900: Content added at location /home/jboss/jboss-7.1.1/standalone/data/content/11/e8cdaea9dfa4e984ada3e22b0c890970f0ba75/content
[org.jboss.as.server.deployment] (MSC service thread 1-3) JBAS015877: Stopped deployment sokoban-mobile.war in 60ms
[org.jboss.as.server.deployment] (MSC service thread 1-1) JBAS015876: Starting deployment of "project-mobile.war"
[org.jboss.web] (MSC service thread 1-2) JBAS018210: Registering web context: /mobile
[org.jboss.as.server] (management-handler-thread - 12) JBAS018565: Replaced deployment "project-mobile.war" with deployment "project-mobile.war" 
```

到目前为止，一切似乎都很好。但是当我将浏览器指向 jboss-server:8080/mobile/accounts/list 时，我得到一个：

```
HTTP Status 404 - Could not find resource for relative : /list of full path: http://jboss-server:8080/mobile/accounts/list

type Status report

message Could not find resource for relative : /list of full path: http://jboss-server:8080/mobile/accounts/list

description The requested resource (Could not find resource for relative : /list of full path: http://jboss-server:8080/mobile/accounts/list) is not available. 
```

但是，有些东西正在起作用，因为将浏览器指向 jboss-server:8080/mobile/ 成功返回了也包含在 WAR 文件中的 index.html 文件。

这可能只是我的一个简单的配置错误，但我无法终生解决。非常感谢所有不厌其烦地阅读此问题的人，更感谢您发布您的任何想法。

史蒂夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T16:51:54.250

日志显示未加载 REST 资源。

资源缺少`@Path`注释。

您需要`Application`带有`@ApplicationPath`注释的类（该类将为空）。

然后您需要将`@Path`注释添加到您的资源类（`Accounts`对于您的情况）

所以你将拥有：

```
@ApplicationPath("/")
public class AccountApp
    extends Application {} 
```

和：

```
@Path("accounts")
@Consumes({"application/xml"})
@Produces({"application/xml"})
public class Accounts{

    ...

    @GET
    @Path("/list")
    public Collection<UUID> getAccounts() {
    Collection<UUID> list = uuids.values();

    log.info("getAccounts: " + list);
    return list;
    }

    ...
} 
```

# c++ - 在不知道文件名的情况下对外部头文件使用 cmake 的 automoc

> ID：12957059
> 
> 赞同：3
> 
> 时间：2012-10-18T14:32:25.693
> 
> 标签：c++, qt4, cmake, automocking

本质上，我希望能够 moc 不属于 cmake 中任何目标的头文件，但额外的困难是我不知道这些头文件的文件名。

实际项目非常复杂，并且是自动构建系统的一部分。下面是一个简单的例子。考虑一个结构如下的项目：

CMakeLists.txt
src/lib/source.cpp
src/lib/CMakeLists.txt
src/include/some_header.hpp # 包含在 source.cpp

中 main CMakeLists.txt 的内容：

```
cmake_mimimum_required(VERSION 2.8.6)
project("automoctest")
add_subdirectory(src/lib) 
```

src/lib/CMakeLists.txt 的内容：

```
include_directories(${CMAKE_HOME_DIRECTORY}/src/include)
find_package(Qt4 4.8 REQUIRED QtCore)
include(UseQt4)
include_directories(${CMAKE_CURRENT_BINARY_DIR})
add_library(foo SHARED source.cpp)
target_link_libraries(foo ${QT_LIBRARIES})
set_target_properties(foo PROPERTIES AUTOMOC true) 
```

在 source.cpp 中，文件 some_header.hpp 包含如下：

```
#include "some_header.hpp" 
```

问题：
文件 some_header.hpp 包含一个 Q_OBJECT 并且有一些信号，所以 moc 需要发挥它的魔力。但是由于标头不在实际项目中，因此标头不会被嘲笑。我什至不知道 some_header.hpp 的文件名，所以我不能专门添加它来模拟。显然，即使源文件包含其中之一，AUTOMOC 也不会检查 include_directories 中的可模拟文件。

我尝试过的（不成功）：

*   如 cmake 文档中所述，在 source.cpp 中使用 #include moc_some_header.cpp 。这会导致错误，其中 cmake 抱怨它找不到 some_header{.h,.hpp,.hxx,.H}
*   将 CMAKE_AUTOMOC_RELAXED_MODE 设置为 true。即使从文档中不清楚这实际上是做什么的。反正没什么区别。
*   将 AUTOMOC_MOC_OPTIONS 设置为 -Isrc/include 或 -I/path/to/project/src/include 或 -I${CMAKE_HOME_DIRECTORY}/src/include
    不会做任何我能看到的事情。

AUTOMOC 的伟大之处在于我不需要知道哪些文件实际上需要被模拟。但是，在这种情况下，我需要知道我的源文件中包含的所有可能包含 Q_OBJECT 的标头。

有没有办法告诉 AUTOMOC 究竟在哪里寻找可模拟文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T23:54:56.120

你真的设置`AUTOMOC_MOC_OPTIONS`到`-Isrc/include`，还是到`-I/path/to/myproject/src/include`？前者可能不存在。

* * *

我一直使用 MOC 宏；它看起来像是`AUTOMOC`内置在 CMake 中的新东西。

我通常在创建库或可执行文件时包含所有标题 - 即

```
add_library(foo SHARED source.cpp ../include/some_header.hpp ) 
```

我*认为*这将允许`AUTOMOC`工作。它将具有`make`按预期工作的额外好处 - 当标题更改时重建您的库。

如果您确实无法提前将文件添加到`add_library`命令中，那么我认为您必须编写一个 cmake 函数`#include`来`source.cpp`搜索`Q_OBJECT`. 如果它们匹配，请将它们添加到变量中 - 也许`EXTRA_MOCS`. 然后，这`add_library`条线变成

```
add_library(foo SHARED source.cpp ${EXTRA_MOCS} ) 
```

# c# - 如何解决此 url 重写问题？

> ID：12957060
> 
> 赞同：1
> 
> 时间：2012-10-18T14:32:45.477
> 
> 标签：c#, url-rewriting

我有以下两条规则

***规则1：***

```
<rule name="DirectoryRewrite" stopProcessing="true">
    <match url="(.*)/?$" />
    <conditions>
        <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
        <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
        <add input="{URL}" pattern="\.aspx" negate="true" />
        <add input="{URL}" pattern="\.ashx" negate="true" />
        <add input="{URL}" pattern="\.asmx" negate="true" />
        <add input="{URL}" pattern="\.axd$" negate="true" />
    </conditions>
    <action type="Rewrite" url="/Views/{R:1}/default.aspx" />
</rule> 
```

***规则 2：***

```
<rule name="RootRewrite" stopProcessing="true">
    <match url="(.*)" />
    <conditions>
        <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
        <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
        <add input="{URL}" pattern="\.aspx" negate="true" />
        <add input="{URL}" pattern="\.ashx" negate="true" />
        <add input="{URL}" pattern="\.asmx" negate="true" />
        <add input="{URL}" pattern="\.axd$" negate="true" />
        <add input="{REQUEST_FILENAME}.aspx" matchType="IsFile" />
    </conditions>
    <action type="Rewrite" url="/Views/{R:1}.aspx" />
</rule> 
```

`user`我的根目录中有一个文件夹，其中包含`settings.aspx`& `default.aspx`，并且 root 也包含一些文件，即`faq.aspx &` `contact.aspx`.

如果有人进入，这就是我想要实现的目标

> site.com/user

然后使用规则 1 将其带到用户目录，如果有人键入，则以同样的方式

> site.com/terms

，它应该把它们带到terms.aspx。到目前为止，规则一工作正常，它重定向到给定的目录，但是当我试图访问根目录（即`terms`或`contact`）中的页面时，它会将它们与规则 1 匹配并尝试查找`terms`或`contact`目录，但一无所获返回`The resource cannot be found.`

你能指出我做错了什么吗？

# c# - 如何在 .csproj 文件中使用 MSBuild 条件测试编译器指令？

> ID：12957061
> 
> 赞同：17
> 
> 时间：2012-10-18T14:32:47.367
> 
> 标签：c#, msbuild, csproj, compiler-directives

我对 .csproj 文件中的功能和条件完全陌生，因此感谢所有帮助。

我想要做的是检查当前配置中的特定编译器指令。一个示例如下所示：

```
<Choose>
    <When Condition= [current configuration has CONST-1 compiler constant defined] >
        ...
    </When>
    <When Condition= [current configuration has CONST-2 compiler constant defined] >
        ...
    </When>
</Choose> 
```

我不知道这是否可能。如果有更好的方法来做我要求的事情，请告诉我。无论哪种方式，我都想测试**独立**于配置的条件。

**编辑**

我真正想要的是一个我可以轻松编辑的值，最好是在 Visual Studio 中，我也可以在不考虑配置的情况下检查它。我考虑了编译器常量，因为您可以在 VS 的项目属性中轻松更改它们。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-18T15:10:44.487

编译器常量设置为属性“DefineConstants”，因此您应该能够评估该属性。您的`Choose`语句需要在定义常量或目标内部的 PropertyGroups 之后进行。

```
<Choose>
    <When Condition="$(DefineConstants.Contains(CONST-1))">
        ...
    </When>
    <When Condition="$(DefineConstants.Contains(CONST-2))">
        ...
    </When>
</Choose> 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-12-02T22:10:36.237

如果您使用 MSBuild 4 或更高版本，我建议使用正则表达式而不是 String.Contains()。这样做的原因是即使 String.Contains() 通常运行良好，但在某些情况下您可能会遇到问题。

例如：

在代码中使用指令 CONST-1 和 CONST-12 时考虑大小写。但是，您决定只为当前构建定义 CONST-12 指令。即使没有定义 CONST-1，
现在也会`Condition="$(DefineConstants.Contains('CONST-1'))"`计算。`True`

解决方案`RegularExpressions.RegEx`：

```
<When Condition="$([System.Text.RegularExpressions.Regex]::IsMatch($(DefineConstants), '^(.*;)*CONST-1(;.*)*$'))">
...
</When> 
```

总而言之，您可以小心确保不使用作为另一个子字符串的指令，或者您可以使用正则表达式而完全不用担心。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-10-08T20:00:31.203

要添加到此处发布的其他答案，您可以解决此问题的另一种方法是用分号包装 DefineConstants 属性，以保证“;CONST-1;” 当且仅当定义了“CONST-1”常量时，才会包含在 DefineConstants 中。如果没有分号，您可以将 CONST-100 或 UNCONST-1，但不是 CONST-1 作为变量，并且它的计算结果为真。

```
<PropertyGroup>
    <DefineConstants2>;$(DefineConstants);</DefineConstants2>
    <Foo Condition="'$(DefineConstants2.Contains(`;CONST-1;`))'">It worked</Foo>
    <Bar>$(Foo)</Bar> <!--It worked-->
</PropertyGroup> 
```

# php - 使用定位从 HTML + CSS 创建 PDF

> ID：12957062
> 
> 赞同：0
> 
> 时间：2012-10-18T14:32:52.263
> 
> 标签：php, pdf

我想从我的 PHP (HTML+CSS) 创建一个 PDF 文件，但我用 CSS 定位 DIV，我尝试了许多 PHP 库，没有人能让我 100% 与 HTML 相同。

我定位的 div 总是在未定位的项目下。

您能告诉我如何将图片和 2 个文本定位到我应该使用哪种库的指定位置吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T21:32:54.953

最终的解决方案是将 HTML 导出为 JPG 文件，而不是使用 GD 库在其上编写 PHP 变量，而不是使用 mPDF 库导出为 PDF。

希望这种方式可以帮助您获得与 HTML 相同的内容。

# c++ - Qt ui 文件未编译为 C++ 头文件

> ID：12957073
> 
> 赞同：1
> 
> 时间：2012-10-18T14:33:23.807
> 
> 标签：c++, visual-studio-2010, qt

我在 Visual Studio 2010 中创建了一个 Qt 应用程序项目。它包含以下文件

```
Form Files
  mainwindow.ui
Header Files
  mainwindow.h
Source Files
  mainwindow.cpp 
```

它还使用生成的代码文件，名为`ui_mainwindow.h`. 据我所知，应该重新生成此文件以响应对 .ui 文件所做的更改。但是，如果我在 Designer 中打开 ui 文件并进行更改，则应用程序中不会出现任何更改。

我必须在 Qt Designer 中转到 Form -> View Code -> Save As 并手动保存 ui_mainwindow.h 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T14:44:45.890

`.ui`文件应定义自定义构建工具以`uic`在其上使用并生成适当的`ui_*.h`文件。

自定义构建工具命令行可能如下所示：

```
uic.exe "$(InputPath)" -o "ui_$(InputName).h" 
```

此外，为了正确检测依赖关系并清理命令删除生成的文件，添加`ui_$(InputName).h`到自定义构建工具输出。

不要忘记对所有配置和平台进行更改。

虽然，这样做的正确方法是创建适当的`.pro`文件，然后使用`qmake -tp vc project.pro`. 所有编译器和链接器设置都应在文件中进行调整，而不是在每次更改文件`.pro`后应重新生成的 Visual Studio 项目中。`.pro`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T14:50:29.967

i mean no offense but have you saved the .ui file before running the project?

when i need to edit the ui files, i change them with the designer and when i want to run it, it will recompile/moc/whatever the changed ui file and their .h/.cpp file as well.

# php - 发送 UTF8 标头时页面上的黑色菱形问号字符

> ID：12957075
> 
> 赞同：1
> 
> 时间：2012-10-18T14:33:27.693
> 
> 标签：php, mysql, utf-8, character-encoding

我在 MySQL 4.1 服务器上有一个旧数据库，数据库包含一些用户输入的内容，我已将此数据库复制到新的 MySQL 5 服务器，当我查看打印内容的页面时，我看到带有问题的黑色菱形字符标记在中间。这仅在新服务器上显示。

如果我将此标题添加到页面，菱形不再显示：

```
header('Content-Type: text/html; charset=iso-8859-1'); 
```

如果我取出该标头，则服务器会发送一个如下所示的默认标头，并且菱形会重新出现

> 内容类型：文本/html；字符集=UTF8

我怎样才能在数据库中解决这个问题（例如表格上的某种转换），这样我就不必把这个标题放在我的所有页面中？

更多信息：我使用 mysqldump 从旧服务器导出数据库，然后使用 CentOS mysql 命令行导入它。我也尝试过使用 phpMyAdmin 导出，但结果相同。

编辑：

查看我的 mysqldump 文件，我可以看到所有 CREATE TABLE 语句都有 charset = Latin1，所以我认为我正在寻找一种以 UTF8 导出数据库的方法。我已经尝试将此选项添加到 mysqldump 但它没有任何效果，转储仍然显示 Latin1：

> --默认字符集=utf8

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T14:36:50.997

连接到数据库后尝试设置字符集：

```
mysql_set_charset("utf8"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-24T20:00:52.943

Trevor 所说的对我有用，但 Mysqli 除外。

```
$mysqli->set_charset("utf8"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T14:39:27.737

连接mysql数据库后使用下面的查询。

```
mysql_query("SET NAMES utf8"); 
```

希望这有帮助！

# rvm - 如何通过 net-ssh 在服务器上创建 RVM 环境？

> ID：12957078
> 
> 赞同：0
> 
> 时间：2012-10-18T14:33:39.983
> 
> 标签：rvm, capistrano, net-ssh, rvm-capistrano

我有一个脚本，它正在我的服务器上安装 Ruby/RVM（以及更多），以准备好部署 Rails 项目的环境。该脚本在 ruby​​ 中，并使用 net-ssh 库来完成这项工作。

在安装了 RVM、Ruby 之后，我想创建项目 Gemset：

```
connection do |conn|
  logger("Create RVM environment #{ruby_version}@#{project_name}")
  conn.exec!("#{rvmsudo_path} #{rvm_path} gemset create #{project_name}")   
end 
```

我在下面创建了我的 gemset，一切都很好：

> /usr/local/rvm/gems/ruby-1.9.3-p286@my_project_name

这是我的 rvm/ruby 的 Capistrano 设置：

```
set :rvm_type, :system
set :rvm_ruby_string, ENV['GEM_HOME'].gsub(/.*\//,"") 
```

当我尝试使用 capistrano 进行部署时，我得到：

> /usr/local/rvm/environments/ruby-1.9.3-p286@my_project_name：权限被拒绝

该文件夹中实际上缺少环境文件“ruby-1.9.3-p286@my_project_name”。我需要登录服务器并导航到我的项目，以便 .rvmrc 文件触发环境的创建（rvm --create my_project_name）。我想避免这最后一步。你知道如何触发这个环境的创建吗？（我虽然在创建 Gemset 时会创建它）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T02:43:45.107

RVM 支持通过 capistrano 安装自身，安装 rubies 和创建 gemset，你应该使用它：

*   [https://rvm.io/integration/capistrano/#install_rvm](https://rvm.io/integration/capistrano/#install_rvm)
*   [https://rvm.io/integration/capistrano/#install_ruby](https://rvm.io/integration/capistrano/#install_ruby)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T11:22:19.817

基本上需要加载 RVM 环境才能远程编写脚本。 [https://rvm.io/workflow/scripting/](https://rvm.io/workflow/scripting/)

您可以使用 net-ssh 运行以下命令来执行此操作：

```
conn.exec!("source "/usr/local/rvm/scripts/rvm; rvm --create ruby-1.9.3-p286@my_project_name") 
```

它将创建您的环境和相关的 gemset。

# sql - SQL 对象存储——最佳实践

> ID：12957083
> 
> 赞同：0
> 
> 时间：2012-10-18T14:33:45.570
> 
> 标签：sql, database-design

我正在寻找一种将 JavaScript 对象存储在 MySQL 样式数据库中的方法。

我想让数据库设置来处理对象、它们的属性，甚至对象引用。

给我以下语法：

```
<object> := list of atributes

<attribute> := integer
            | string
            | boolean
            | object-reference
            | list of attributes 
```

这样做有没有标准的方法或最佳实践？

我想使用数据库布局来启用基于属性值的过滤。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T20:02:18.567

您发现难以存储对象的原因是因为[对象关系阻抗不匹配](http://www.agiledata.org/essays/impedanceMismatch.html)

> 面向对象范式基于经过验证的软件工程原理。然而，关系范式是基于经过验证的数学原理。由于底层范式不同，这两种技术不能无缝地协同工作。
> 
> 当您查看首选的访问方法时，阻抗不匹配变得很明显：使用对象范例，您可以通过它们的关系遍历对象，而使用关系范例，您可以连接表的数据行。

如果您被关系数据库困住，那么您将不得不在对象模型和关系模型之间执行映射。如果您确定以您描述的方式存储对象，那么您可能必须更改为[对象数据库](http://en.wikipedia.org/wiki/Object_database)

我已经阅读了涵盖这个主题的[敏捷数据库技术](http://www.ambysoft.com/books/agileDatabaseTechniques.html)，但我相信还有很多其他的。网上也有很多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T18:42:02.140

据我所知mysql是一个关系数据库。它不支持以您需要的方式存储对象。您只需序列化对象并存储它。不可能进行诸如访问属性之类的操作。然而，除了 mysql，我记得在谷歌上打过其他处理对象的数据库引擎。 [维基百科上的对象数据库](http://www.google.com.tr/url?sa=t&rct=j&q=object%20database&source=web&cd=1&cad=rja&ved=0CB0QFjAA&url=http%3A%2F%2Fen.wikipedia.org%2Fwiki%2FObject_database&ei=JEyAUOOHE8XXsgb2Vw&usg=AFQjCNHzv7TAVteb4KYca2GXrJnd02FIEQ)

# jsp - 使用 Servlet/jsps 导出到 PDF 以在 Web 应用程序中打印选项

> ID：12957086
> 
> 赞同：3
> 
> 时间：2012-10-18T14:33:47.413
> 
> 标签：jsp, servlets

我的应用程序是一个基于 Web 的报告工具。这些报告是根据从 jsps 接收的一些输入参数生成的。结果通过 Servlet 处理，然后使用 jsps 再次显示回来。

现在在报告页面上，我们需要一个按钮，单击该按钮会将生成的报告导出为 pdf 以供打印。但我对如何做到这一点束手无策。

有人可以帮我吗？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T10:15:33.237

单击“导出到 PDF”按钮，再次将页面提交到同一个 servlet，但在 servlet 的 doPost 方法结束时，将以下代码写为

```
if(request.getParameter("exportPDFButtonName") != null) {
     response.setContentType("application/pdf");
     response.addHeader("Content-Disposition", "attachment; filename=reportfile.pdf");
} 
```

# c# - 网络接口速度

> ID：12957089
> 
> 赞同：1
> 
> 时间：2012-10-18T14:33:53.940
> 
> 标签：c#, windows-xp

我想获取我的网络接口的名称、速度和 MAC 地址。

```
 var searcher = new ManagementObjectSearcher { Scope = GetConnectedScope(target, "cimv2") };

        try
        {
           searcher.Query = new ObjectQuery("SELECT MACAddress, Speed, Name FROM Win32_NetworkAdapter");

            var nicList = new List<NetworkInterfaceModel>();
            foreach (var item in searcher.Get())
            {
                nicList.Add(new NetworkInterfaceModel
                {
                    NetworkInterfaceName = (string)item["Name"],
                    NetworkInterfaceSpeed = (double)(item["Speed"] != null ? (ulong) item["Speed"] : 0)/1000/1000,
                    MacAddress = (string)item["MACAddress"]
                });
            } 
```

对于 Windows 7 和 Vista，它工作得很好，但对于 XP 和 Windows Server 2003，它并没有加快速度。如何获得 XP 和 Server 2003 的速度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T15:19:33.317

`Win32_NetworkAdapter`不支持`speed`XP 下的属性，根据[http://msdn.microsoft.com/en-us/library/windows/desktop/aa394216(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394216(v=vs.85).aspx)：

> Windows Server 2003、Windows XP、Windows 2000 和 Windows NT 4.0：此属性尚未实现。默认情况下它返回一个 NULL 值。

相反，请使用`CIM_NetworkAdapter`具有相同属性的类。

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa387931(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa387931(v=vs.85).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-13T11:42:33.803

您可以使用 windows cmd 获取网络名称：

```
Process p = new Process();
p.StartInfo.FileName = "netsh.exe";
p.StartInfo.Arguments = "wlan show interfaces";
p.StartInfo.UseShellExecute = false;
p.StartInfo.RedirectStandardOutput = true;
p.Start();
string s = p.StandardOutput.ReadToEnd();
string s1 = s.Substring(s.IndexOf("SSID"));
s1 = s1.Substring(s1.IndexOf(":"));
s1 = s1.Substring(2, s1.IndexOf("\n")).Trim();
p.WaitForExit();

namelabel.Text = s1; 
```

对于 MAC 地址：

```
 IPAddress IP = IPAddress.Parse("192.168.1.1");
 byte[] macAddr = new byte[6];
 uint macAddrLen = (uint)macAddr.Length;
 UInt32 nRet = 0;
 uint nAddress = BitConverter.ToUInt32(IP.GetAddressBytes(), 0);
 nRet = SendARP(nAddress, 0, macAddr, ref macAddrLen);
 if (nRet == 0)
 {
     string[] sMacAddress = new string[(int)macAddrLen];

     for (int i = 0; i < macAddrLen; i++)
     {
         sMacAddress[i] = macAddr[i].ToString("x2");
         string macAddress += sMacAddress[i] + (i < macAddrLen - 1 ? ":" : "");

     }
 } 
```

关于速度，您可以使用以下代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;
using System.Net.NetworkInformation; 
```

首先添加一个 timerInteval（你想以多快的速度更改为新值）一个 NetworkInteface 和一个计时器：

```
private const double timerUpdate = 1000;
private NetworkInterface[] nicArr;
private Timer timer; 
```

然后在启动时继续使用以下组件：

```
public Form1()
    {
        InitializeComponent();
        InitializeNetworkInterface();
        InitializeTimer();
    } 
```

组件：

```
private void InitializeNetworkInterface()
{
    // Grab all local interfaces to this computer
    nicArr = NetworkInterface.GetAllNetworkInterfaces();

    // Add each interface name to the combo box
    for (int i = 0; i < nicArr.Length; i++)
        comboBox1.Items.Add(nicArr[i].Name); //you add here the interface types in a combobox and select from here WiFi, ethernet etc...

    // Change the initial selection to the first interface
    comboBox1.SelectedIndex = 0;
}
private void InitializeTimer()
{
     timer = new Timer();
     timer.Interval = (int)timerUpdate;
     timer.Tick += new EventHandler(timer_Tick);
     timer.Start();
 } 
```

计时器的滴答声

```
void timer_Tick(object sender, EventArgs e)
{
    UpdateNetworkInterface();                
} 
```

有了这个空白，您可以更新 ping：

```
public void UpdatePing()
{     
    try
    {
        Ping myPing = new Ping();
        PingReply reply = myPing.Send(textBox1.Text, 1000);
        if (reply != null)
        {
            label17.Text = reply.Status.ToString();
            label18.Text = reply.RoundtripTime.ToString();                    
        }
    }
    catch
    {
        label17.Text = "ERROR: You have Some TIMEOUT issue";
        label18.Text = "ERROR: You have Some TIMEOUT issue";                
    }
} 
```

最后用它来显示网络形式的速度：

```
private void UpdateNetworkInterface()
{
    // Grab NetworkInterface object that describes the current interface
    NetworkInterface nic = nicArr[comboBox1.SelectedIndex];

    // Grab the stats for that interface
    IPv4InterfaceStatistics interfaceStats = nic.GetIPv4Statistics();

    // Calculate the speed of bytes going in and out
    // NOTE: we could use something faster and more reliable than Windows Forms Tiemr
    //       such as HighPerformanceTimer http://www.m0interactive.com/archives/2006/12/21/high_resolution_timer_in_net_2_0.html

    // Update the labels
    speedlbl.Text = nic.Speed.ToString();
    interfaceTypelbl.Text = nic.NetworkInterfaceType.ToString();            
    bytesReceivedlbl.Text = interfaceStats.BytesReceived.ToString();
    bytesSentlbl.Text = interfaceStats.BytesSent.ToString();

    int bytesSentSpeed = (int)(interfaceStats.BytesSent - double.Parse(label10.Text)) / 1024;
    int bytesReceivedSpeed = (int)(interfaceStats.BytesReceived - double.Parse(label11.Text)) / 1024;

    bytescomelbl.Text = bytesSentSpeed.ToString() + " KB/s";
    bytessentlbl.Text = bytesReceivedSpeed.ToString() + " KB/s";

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-12T18:08:05.477

```
using System.Net;
foreach (NetworkInterface netInterface in NetworkInterface.GetAllNetworkInterfaces()) {
    Debug.WriteLine(netInterface.Name); // Name
    Debug.WriteLine(netInterface.Speed); // Speed
    Debug.WriteLine(netInterface.GetPhysicalAddress().ToString()); // MAC
} 
```

# node.js - Redis'客户端关闭连接'错误

> ID：12957090
> 
> 赞同：1
> 
> 时间：2012-10-18T14:33:55.650
> 
> 标签：node.js, redis

我刚刚启动了一个在 redis 上运行的站点。

几个小时后，redis 停止工作，我必须重新启动服务器才能让它再次工作。

这是日志显示的内容：

```
[3336] 18 Oct 17:59:18 - DB 0: 1339 keys (1337 volatile) in 512 slots HT.
[3336] 18 Oct 17:59:18 - 5 clients connected (0 slaves), 1903440 bytes in use
[3336] 18 Oct 17:59:21 - Client closed connection
[3336] 18 Oct 17:59:23 - DB 0: 1341 keys (1339 volatile) in 512 slots HT.
[3336] 18 Oct 17:59:23 - 4 clients connected (0 slaves), 1896008 bytes in use 
```

当“客户端关闭连接”出现在日志中时，它就停止了工作。

知道为什么会发生这种情况吗？

**更新：它再次关闭。这次我检查了内存，它超过了 3.5 GB。这有什么关系吗？**

# c# - 在不迭代的情况下检索所有 id？

> ID：12957091
> 
> 赞同：0
> 
> 时间：2012-10-18T14:33:58.360
> 
> 标签：c#, sqlite, .net-4.0

我的 SQLite 数据库中有一张包含近 200 万条记录的表，其中一些记录的生日为空，我想使用另一个数据库中的数据进行修复，因为两者的 id 相同，我可以在此更新中引用它。

但是我有一个阅读问题，我相信我会有另一个更新它。

阅读问题，有没有办法从结果中获取所有 id 而不必 1 by 1 读取？

正在执行的查询是（生日被索引）：

```
SELECT id FROM personal WHERE birthday IS NULL OR birthday = '' 
```

目前我这样做是为了检索所有 id（前 300k 条记录需要大约 3 分钟，然后对于 250k 记录增加到大约 9 分钟，并不断增加延迟）：

```
while (reader.Read())
{
    ids.Add(reader.GetInt32(0));
} 
```

在我将重用 ids 列表以使用正确的生日对每条记录执行更新之后，我假设我会遇到同样的问题，通过插入 1 x 1 来完成它需要很长时间，这将我们带到什么我相信这将是第二个问题。

有没有一种快速的方法可以用所需的数据更新所有记录？

**注意：我将读取更新 SQLITE 的生日将来自远程 MySQL 服务器，因此我无法链接 2 合 1 查询，如更新选择等。**

表格格式为：

```
id
first_name
last_name
birthday
email
status 
```

**当我在 SQLite Admin 上运行相同的查询时，需要 2371 毫秒才能吐出所有数据，所以我认为我一定是读错了，或者一读一读一定会伤害它真的很糟糕。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T14:42:34.147

在您的数据库上执行此 SQL。无需遍历所有记录。它只需一个动作即可完成您所需要的一切：

```
UPDATE
    Persons
SET
    Persons.birthday = OtherTable.birthday
FROM
    Persons
INNER JOIN
    OtherTable
ON 
    Persons.ID = OtherTable.ID
WHERE 
    Persons.birthday IS NULL OR Persons.birthday = '' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T14:41:55.143

您可以尝试使用[该`DataAdapter.Fill`方法](http://msdn.microsoft.com/en-us/library/system.data.common.dataadapter.fill.aspx)读取 a`DataTable`或 a中的所有数据`DataSet`。

我不确定这是否会更快，但这可能值得一试。

假设您有一个`DbCommand`名为 的实例`cmd`，代码可能是：

```
var table = new DataTable();
var adapter = new SqlDataAdapter(cmd);
adapter.Fill(table); 
```

*（我认为你必须使用 SqliteDataAdapter - 我不知道它是如何调用 SQLite 的）*

在此之后，`table`应该有一列并包含您需要的所有数据。

如果这仍然很慢，我会尝试其他事情：

*   批量处理数据（例如一次 100 或 1000 个项目，基于 PK id）
*   如果可能，尝试在不使用 C# 的情况下执行此操作（例如，在 MySQL 中进行数据导入，在那里运行`UPDATE`with`JOIN`然后将数据带回 SQLite）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T14:47:54.523

您可以一次调用检索数据集中的所有行。

```
 using (SqlConnection cnn = new SqlConnection("connection_string_here"))  
    {
         SqlDataAdapter da = new SqlDataAdapter("SELECT id FROM personal 
WHERE birthday IS NULL OR   birthday = ''", cnn); 
         DataSet ds = new DataSet(); 
         da.Fill(ds, "personal"); 

         List<string> pids = new List<string>();
         foreach(DataRow row in ds.Tables["personal"].Rows)
         {
           pids.Add(row["id"].ToString());
           // similarly you can update row objects here.
         }
        } 
```

在数据集中执行更新，然后使用数据集对象保存更改。

[http://support.microsoft.com/kb/301248](http://support.microsoft.com/kb/301248)

[http://www.datadirect.com/resources/ado-net/sqlserver-code-examples/updating-dataset.html](http://www.datadirect.com/resources/ado-net/sqlserver-code-examples/updating-dataset.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T16:23:09.577

[您可以使用GROUP_CONCAT](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)将 ID 列表检索为逗号分隔的字符串，然后将其拆分为整数数组。就像是：

`SELECT GROUP_CONCAT(id) FROM personal WHERE birthday IS NULL OR birthday = ''`

然后在您的代码中执行以下操作：

```
var ids = myStringOfIDs.Split(',').Select(val => int.Parse(val)); 
```

对于更新，一种方法是进行[批量更新](http://msdn.microsoft.com/en-us/library/aadf8fk2.aspx)。

# google-places-api - JSON 结果 - 存储 ID 和/或参考

> ID：12957095
> 
> 赞同：1
> 
> 时间：2012-10-18T14:34:02.177
> 
> 标签：google-places-api

我正在尝试为一个非常具体的搜索参数构建一个简单的评论网站，我可以从 Google Places API 中提取信息。我知道除了 Google 说的我可以存储之外，我无法存储任何信息，而且听起来我只能存储“reference”参数和“id”参数。

在为从 Google 返回的地方创建评论后，我需要存储一些标识符，以便当其他人通过我的网站搜索 Google 地方时，我可以对我的数据库进行 AJAX 调用并提取该地方的所有评论。

最终，我的问题是，我应该存储哪个密钥？或两者？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T23:34:40.270

根据[文档](https://developers.google.com/places/documentation/search)：

> **`id`**包含一个唯一的稳定标识符来表示这个地方。此标识符可能不会用于检索有关此地点的信息，但可以保证跨会话有效。它可用于合并有关此地点的数据，并在单独的搜索中验证地点的身份。
> 
> **`reference`**包含一个唯一令牌，您可以使用该令牌在“地点详细信息”请求中检索有关此地点的其他信息。您可以存储此令牌并在以后随时使用它来刷新有关此地点的缓存数据，但不能保证在不同搜索中为任何给定地点返回相同的令牌。

`reference`存储两者、从 Google Places 检索评论并将`id`您的地方评论分组到您的数据库中是有意义的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-07T13:09:40.010

自 2014 年 6 月 24 日起，不推荐使用*id*和*reference*字段。应改为使用 placeId（用于请求）和 place_id（用于响应）。

> Places API 当前在所有响应中返回 place_id，并在 Place Details 和 Place Delete 请求中接受**placeid 。**2015 年 6 月 24 日之后不久，API 将停止在响应中返回 id 和 reference 字段。一段时间后，API 将不再接受请求中的引用。我们建议您尽快更新代码以使用新的地点 ID 而不是 id 和参考。

# java - 无法理解为什么我不能在方法之外修改变量？

> ID：12957096
> 
> 赞同：2
> 
> 时间：2012-10-18T14:34:03.573
> 
> 标签：java, scope

```
public class test {

    public static void main(String[] args) throws Exception {

        final int num = 111;

        new Thread() {
            @Override
            public void run() {
                num = 222;
            }
        }.start();

    }
} 
```

我想改变它的值，`num`但是我只能这样做，如果我将它设置为`final`不允许我修改它。在其他语言（例如 C）中，我们可以使用指针，但 Java 不能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T14:37:28.193

Java 既没有闭包也没有指针。

一个解决方案是使类中的 num 为静态：

```
public class test {
    static int num = 111;
    public static void main(String[] args) throws Exception {
        new Thread() {
            @Override
            public void run() {
                num = 222;
            }
        }.start();
    }
} 
```

另一种解决方案是使用像[AtomicInteger](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/atomic/AtomicInteger.html)这样的对象。您不能更改变量的值，但可以更改值的内容：

```
public class test {
    public static void main(String[] args) throws Exception {
        final AtomicInteger num = new AtomicInteger(111);
        new Thread() {
            @Override
            public void run() {
                num.set(222);
            }
        }.start();
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T14:38:29.327

# 为什么这是不允许的

`main`是一种方法。与其他编程语言一样，当方法返回时，在其主体中声明的所有变量都超出范围，并且访问它们具有未定义的行为。在某些情况下，它们曾经所在的内存位置将不再有效。

显然这是一个问题。`num`如果您在返回后尝试更改`main`，您可能会覆盖不再属于的堆栈部分`num`。Java 对这种困难情况的反应是对如何共享变量引入限制：它们必须是最终的。然后，Java 可以安全地定位它们，即使在函数返回后，读取它们也会产生一致的结果。

与此问题等效的 C 语言是在其范围之外存储和使用局部变量的地址，这是所有 C 程序员都被教导永远不要做的事情。

要绕过它，请声明`num`为 的成员`test`，创建一个实例并将其传递给它。这消除了对局部变量的依赖，从而消除了`final`限制。

```
public class test
{
    int num = 111;

    public static void main(String[] args) throws Exception
    {
        test t = new test();
        (new Thread(t) {
            test mytest;
            Thread(test t)
            {
                mytest = t;
            }

            @Override
            public void run() {
                mytest.num = 222;
            }
        }).start();
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-18T14:38:58.363

好吧，如果您在函数外部声明变量，则可以访问它。像这样：

```
public class test {

private static int num = 111;

    public static void main(String[] args) throws Exception {

        new Thread() {
            @Override
            public void run() {
                num = 222;
            }
        }.start();

    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-18T14:36:08.193

您正在创建`new Thread() {`类作为内部类。如果不将它们声明为 final，则无法访问外部类变量。

您不能更改最终变量引用。

有两种方法可以做到这一点，

1) 将 num 设为静态

2) 将 num 包裹在一个对象内（即使您将引用定义为 final，您也可以更新对象的状态）。

注意：两者都不是线程安全的。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-18T14:37:26.620

是的，你不能在这里赢！您需要将其设置为 final 才能访问它，但是您将无法对其进行修改。你需要看看不同的方法。

# razor - 如果其他逻辑在 Razor DisplayFor vs TextBoxFor MVC4

> ID：12957101
> 
> 赞同：4
> 
> 时间：2012-10-18T14:34:15.047
> 
> 标签：razor, asp.net-mvc-4

如果设置了某个变量，我希望某个字段成为文本框，如果不是，我希望该字段仅显示值，但该值不可编辑。

我将一些 if else 逻辑放入我的视图中，并且该值不会显示。我在这里错过了什么吗？

```
 @{
                if (isFlagSet) {
                    Html.TextBoxFor(m => m.HostpitalFinNumber, new { @Value = Model.HostpitalFinNumber });
                    Html.ValidationMessageFor(m => m.HostpitalFinNumber);
                }
                else {
                    Html.DisplayTextFor(m => m.HostpitalFinNumber);
                }
            } 
```

更新...

我将代码更改为

```
 @if (isFlagSet) {
                    Html.TextBoxFor(m => m.HostpitalFinNumber);
                    Html.ValidationMessageFor(m => m.HostpitalFinNumber);
            }
            else {
                    Html.DisplayFor(m => m.HostpitalFinNumber);
            } 
```

以下是正在生成的 HTML。请注意如何为 Phone 而不是为医院鳍写入输入值。热确定为什么会这样。

```
 <tr><td>
        <label for="Phone">Phone</label>
        </td>
        <td>
        <input Value="4124880798" id="Phone" name="Phone" type="text" value="4124880798" />
    </td></tr>
    <tr><td>
        <label for="HostpitalFinNumber">HostpitalFinNumber</label>              
        </td>
        <td>

    </td></tr> 
```

回答

我忘了把 @ 放在我的 html 助手前面并去掉分号。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-18T14:44:07.233

您的 Razor 语法错误，正确的语法是（您不需要周围的`@{ }`）：

```
@if (isFlagSet) {
    @Html.TextBoxFor(m => m.HostpitalFinNumber)
    @Html.ValidationMessageFor(m => m.HostpitalFinNumber)
}
else {
    @Html.DisplayTextFor(m => m.HostpitalFinNumber)
} 
```

Html 助手不会直接写入响应（名称以 开头的除外`Render`），因此您需要使用 将`@`生成的 HTML 写入输出。

请注意，您不需要使用表达式手动设置值，`new { @Value = Model.HostpitalFinNumber }`因为它`Html.TextBoxFor`会处理它。

# css - 在 adobe edge animate 中加载外部 css 文件

> ID：12957102
> 
> 赞同：4
> 
> 时间：2012-10-18T14:34:17.263
> 
> 标签：css, jquery-animate, adobe-edge

要加载外部 js 文件，您可以使用 yepnope，如 schown [here](http://chrisgannon.wordpress.com/2012/09/01/loading-external-javascript-in-adobe-edge-animate-the-easy-way/#comment-232)。

但是当我在 stage-composition-ready-window 中定义一个这样的 .css 文件时：

```
 yepnope({nope:['mystyle.css']}); 
```

生成的源代码中集成了正确的加载代码，但 css 不起作用。

有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T19:53:33.193

使用 jQuery 本身调用外部源文件的解决方案不能满足您的需要吗？

```
$("<link rel='stylesheet' type='text/css' href='mystyle.css'>").appendTo("#Stage"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-27T19:46:37.700

您使用论点的“否”属性是否有特殊原因？我是 Edge Animate 扩展库“Edge Commons”的创建者，我们一直在 Animate 中使用 CSS 文件。这是官方文档，关于如何加载 lib 和依赖的 CSS 文件：[http ://www.edgedocks.com/edgecommons#anchor_edgecommons_22](http://www.edgedocks.com/edgecommons#anchor_edgecommons_22)

我们的默认 yepnope 调用如下所示：

```
// compositionReady
yepnope({
  load: "path/style.css",
  complete: function() {
    // Do something when loading is complete
  }
}); 
```

希望有帮助。

顺便说一句：“sym.$()”中不需要前面的“sym”。后者是来自 Animate 的特殊修改的 jQuery 选择器函数，用于从特定符号中获取子（元素）。只需要解析 DOM 中的真实 id（看起来像“Stage_mySymbol_Rectangle”而不是“Rectangle”）。但是你仍然可以使用常规的 $() 函数来使用全局 jQuery 版本......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-29T12:49:11.123

您需要将上面的行与“sym”一起使用。字首：

```
sym.$("<link rel='stylesheet' type='text/css' href='mystyle.css'>").appendTo("#Stage"); 
```

# apache-commons-dbcp - Apache DBCP 可以在每次使用时验证连接吗？

> ID：12957103
> 
> 赞同：2
> 
> 时间：2012-10-18T14:34:19.890
> 
> 标签：apache-commons-dbcp

我们的生产人员声称他们非常确定 Apache DBCP 连接池系统会在每次使用时验证连接，也就是说，每次在通过该连接发出查询之前。[但是http://commons.apache.org/dbcp/configuration.html](http://commons.apache.org/dbcp/configuration.html)上的 DBCP 配置似乎没有提供任何可以默认获得的此类选项。似乎只有两个选择是获得连接或返回连接。

该团队声称他们使用名为 DynaTrace 的工具确定了这一点。

有人可以对此有所了解吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T10:12:31.740

我在使用`testOnBorrow`（每次从池中请求连接时都会发出验证查询）并为每个语句请求新连接时看到类似的东西。共享导出的 dynaTrace 会话（如果您可以访问它）可以帮助诊断此问题。

# objective-c - 使用后台线程的进度更新 UIAlertView

> ID：12957105
> 
> 赞同：3
> 
> 时间：2012-10-18T14:34:35.570
> 
> 标签：objective-c

XCode 4.5、iPad 开发、iOS6

嗨，我希望你能帮助一个新手开发者！如果已经回答了这个问题，但我在搜索过程中找不到，请提前道歉！

我正在开发一个需要将大量数据导入核心数据的应用程序。导入例程工作正常（警报显示“请稍候”和活动监视器，而例程在后台运行）但我想向用户提供有关导入进度的更详细的反馈（例如“XX% 已导入”）。以下代码启动了该过程，并且 -

```
- (IBAction)import:(id)sender{

[self showWaiting];

[self performSelectorInBackground:(@selector(callGrouper)) withObject:nil];

}

-(void)showWaiting{

alertMsg = @"Please Wait....";
waitAlert = [[UIAlertView alloc] initWithTitle:alertMsg message:nil delegate:self  cancelButtonTitle:nil otherButtonTitles: nil];

[waitAlert show];     

UIActivityIndicatorView *indicator = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhiteLarge];

indicator.center = CGPointMake(waitAlert.bounds.size.width / 2, waitAlert.bounds.size.height - 50); 

[indicator startAnimating];
[waitAlert addSubview:indicator];    

}

-(void)callGrouper{

ImportRoutine *firstTest = [[ImportRoutine alloc] init];

[firstTest runImport:managedObjectContext];

 [waitAlert dismissWithClickedButtonIndex:0 animated:TRUE];

UIAlertView *alert = [[UIAlertView alloc]initWithTitle: @"iPad Application"
                                               message: @"Import complete!"
                                              delegate: self
                                     cancelButtonTitle:@"Ok"
                                     otherButtonTitles:nil];

[alert show];

} 
```

在 ImportRoutine （单独的类）中，我有收集导入百分比数据的代码，但是如何将此消息传递回主线程，以便我可以更新“alertMsg”，进而更新 UIAlertView？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T14:40:27.723

您可以使用 GCD（大型中央调度）将代码块分派回主线程：

```
dispatch_async(dispatch_get_main_queue(), ^{

    // code here to update UI
}); 
```

包含调度调用的方法范围内的任何对象都会被保留，这使得将对象传递回主线程变得容易，而无需担心在您有机会处理数据之前后台线程与其对象一起被释放. 复制本地范围内的原始值（也称为 int、float、double 等），因此如果将 int 设置为 5，则调度一个块，在其中打印 int 的值，然后立即将 int 设置为 10，即使在您将 int 设置为 10 之后执行该块，它仍然会打印 5。请注意，您不能同时在两个线程中改变相同的可变对象（例如 `NSMutableArray 或 NSMutableDictionary），或者在一个线程中改变枚举另一个而不会崩溃，所以你'

`dispatch_async()`, 不像`dispatch_sync()`, 在继续执行之前不会等待分派的代码完成，这很好，因为您的后台线程不需要关心 UI 中的事情是否已经完成。

`ImportRoutine`只要您的 UIAlertView 在视图控制器类之外是可寻址的，您就可以将调度调用粘贴在计算进度的类的方法中。或者，如果您想更紧密地遵循模型-视图-控制器设计原则，您可以在视图控制器中创建一个类似的方法：

```
- (void)updateProgressToPercentComplete:(double)percent {
    if ([NSThread currentThread] != [NSThread mainThread]) {
        dispatch_async(dispatch_get_main_queue(), ^{
            // update code or call to method that is guaranteed to be on the main thread.
        }
    }
    else {
        // update code or call to method that is guaranteed to be on the main thread.
    }
} 
```

如果你已经进入文档，现在你都喜欢“哦，我的天哪，Objective-C 块是有史以来最酷的东西”，你可以修改上面的方法，这样你就不需要两次编写相同的更新代码：

```
- (void)updateProgressToPercentComplete:(double)percent {
    void (^updateProgressBlock)(void) = ^{
        // update code
    };
    if ([NSThread currentThread] != [NSThread mainThread]) {
        dispatch_async(dispatch_get_main_queue(), updateProgressBlock());
    }
    else {
        updateProgressBlock();
    }
} 
```

顺便说一句，我在您的`-callGrouper`代码中注意到您正在使用现有的 managedObjectContext 我假设您在后台线程的主线程上创建...大多数核心数据不是线程安全的，因此您需要非常小心，否则您将到处崩溃。您最好在后台线程上创建辅助托管对象上下文，然后将更改合并到主线程上的上下文中（或保存在后台线程上并在主线程上重新获取）。

**编辑：**
基本流程：从您的视图控制器开始您的后台进程并传入一个进度块。-> 后台线程中的导入类定期执行您的进度块 -> 在您的进度块内，您分派回主线程以更新 UI。

在您的 ImportRoutine 类中添加一个属性声明，如下所示：

```
@property (nonatomic, strong) void (^progressBlock)(NSUInteger); 
```

这意味着一个名为的属性`progressBlock`接受一个无符号整数 (0-100) 并且不返回任何内容 (void)。您应该使用类扩展将此属性设为私有。

然后你会想在你的导入类中创建一个方法，如下所示：

```
- (void)callGrouper:(void (^)(NSUInteger))progress {
    [self setProgressBlock:progress];
    // Your import code
} 
```

在您接收进度更新的方法中，调用 progressBlock 并将您的进度作为 0 到 100 之间的数字传递：

```
if ([self progressBlock] != nil) {
    [self progressBlock](progressValue);
} 
```

请注意，我检查以确保进度块不为零。如果你试图执行一个 NULL 块，你会崩溃和烧毁。

然后，您可以在视图控制器中已经拥有的导入例程调用中将块作为对象传入，并在块内分派回主队列并更新您的进度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T14:48:48.070

您可以使用：

```
[self performSelectorOnMainThread:@selector(yourSelector) withObject:anObjectIfYouNeedToSendOne waitUntilDone:YES/NO]; 
```

UI 在主线程上运行，因此您可以再次访问您的 UIAlertView 或其他 UI 对象。

# android - error in passing to new activity from a list view

> ID：12957111
> 
> 赞同：2
> 
> 时间：2012-10-18T14:34:53.680
> 
> 标签：android, android-intent, android-activity

i have a listview and when i click on an item it display a message and then when i click "ok" i want to pass to another activity, this my code:

```
 public void onItemClick(AdapterView<?> parent, View view, int position,
                long id) {
// TODO Auto-generated method stub
 ServerContent item = listAdapter.getItem(position);
Log.e("onitemclick","listadapter");
item.select();

newactivity n = new newactivity();
   Intent newActivity = new Intent();     
startActivity(newActivity);
            } 
```

and i add this in the manifest.xml

```
<activity android:label="@string/app_name" android:name="newactivity"/> 
```

this the newactivity :

```
public class newactivity {
    Intent intent;
    protected void onCreate(Bundle savedInstanceState) {

         intent = getIntent();
         intent.addCategory("category");
        //String value = intent.getStringExtra("key"); //if it's a string you stored.
}

    private Intent getIntent() {
        // TODO Auto-generated method stub
        Intent n = new Intent();
        n.addCategory("  ");
        return n;
    } 
```

i got those errors

```
10-18 11:01:02.277: W/dalvikvm(333): threadid=1: thread exiting with uncaught exception (group=0x40015560)
10-18 11:01:02.297: E/AndroidRuntime(333): FATAL EXCEPTION: main
10-18 11:01:02.297: E/AndroidRuntime(333): android.content.ActivityNotFoundException: No Activity found to handle Intent {  }
10-18 11:01:02.297: E/AndroidRuntime(333):  at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1409)
10-18 11:01:02.297: E/AndroidRuntime(333):  at android.app.Instrumentation.execStartActivity(Instrumentation.java:1379)
10-18 11:01:02.297: E/AndroidRuntime(333):  at android.app.Activity.startActivityFromChild(Activity.java:3067)
10-18 11:01:02.297: E/AndroidRuntime(333):  at android.app.Activity.startActivityForResult(Activity.java:2847)
10-18 11:01:02.297: E/AndroidRuntime(333):  at android.app.Activity.startActivity(Activity.java:2933)
10-18 11:01:02.297: E/AndroidRuntime(333):  at com.upnpexample.BrowseServerActivity$1$1.onItemClick(BrowseServerActivity.java:227)
10-18 11:01:02.297: E/AndroidRuntime(333):  at android.widget.AdapterView.performItemClick(AdapterView.java:284)
10-18 11:01:02.297: E/AndroidRuntime(333):  at android.widget.ListView.performItemClick(ListView.java:3513)
10-18 11:01:02.297: E/AndroidRuntime(333):  at android.widget.AbsListView$PerformClick.run(AbsListView.java:1812)
10-18 11:01:02.297: E/AndroidRuntime(333):  at android.os.Handler.handleCallback(Handler.java:587)
10-18 11:01:02.297: E/AndroidRuntime(333):  at android.os.Handler.dispatchMessage(Handler.java:92)
10-18 11:01:02.297: E/AndroidRuntime(333):  at android.os.Looper.loop(Looper.java:123)
10-18 11:01:02.297: E/AndroidRuntime(333):  at android.app.ActivityThread.main(ActivityThread.java:3683)
10-18 11:01:02.297: E/AndroidRuntime(333):  at java.lang.reflect.Method.invokeNative(Native Method)
10-18 11:01:02.297: E/AndroidRuntime(333):  at java.lang.reflect.Method.invoke(Method.java:507)
10-18 11:01:02.297: E/AndroidRuntime(333):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
10-18 11:01:02.297: E/AndroidRuntime(333):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
10-18 11:01:02.297: E/AndroidRuntime(333):  at dalvik.system.NativeStart.main(Native Method)
10-18 11:01:05.376: I/Process(333): Sending signal. PID: 333 SIG: 9 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T14:41:53.230

Activityname mustbe like this `.newactivity`

justchange like this

```
 <activity android:label="@string/app_name" android:name=".newactivity"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T14:42:51.180

I hope its not a typo:

```
 <activity android:label="@string/app_name" android:name="newactivity"/> 
```

There is no "." here before the activity name. It should be like:

```
 <activity android:label="@string/app_name" android:name=".newactivity"/> 
```

or you can even specify full qualified name of the activity eg.

```
 <activity android:label="@string/app_name" android:name="com.yourproject.activity.newactivity"/> 
```

# c - 使用 CUDA 进行大整数加法

> ID：12957116
> 
> 赞同：11
> 
> 时间：2012-10-18T14:35:01.887
> 
> 标签：c, cuda, gpgpu, thrust

我一直在 GPU 上开发一种加密算法，目前坚持使用一种算法来执行大整数加法。大整数以通常的方式表示为一堆 32 位字。

例如，我们可以使用一个线程来添加两个 32 位字。为简单起见，假设要添加的数字具有相同的长度和每个块的线程数 == 字数。然后：

```
__global__ void add_kernel(int *C, const int *A, const int *B) {
     int x = A[threadIdx.x];
     int y = B[threadIdx.x];
     int z = x + y;
     int carry = (z < x);
     /** do carry propagation in parallel somehow ? */
     ............

     z = z + newcarry; // update the resulting words after carry propagation
     C[threadIdx.x] = z;
 } 
```

我很确定有一种方法可以通过一些棘手的缩减程序进行传播，但无法弄清楚..

我查看了[CUDA 推力扩展](http://code.google.com/p/cuda-thrust-extensions/source/browse/trunk/big+integer/)，但似乎还没有实现大整数包。也许有人可以给我一个提示如何在 CUDA 上做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-21T18:35:14.817

你是对的，进位传播可以通过前缀和计算来完成，但是为这个操作定义二进制函数并证明它是关联的（需要并行前缀和）有点棘手。事实上，该算法（理论上）用于[超前进位加法器](http://en.wikipedia.org/wiki/Carry-lookahead_adder)。

假设我们有两个大整数 a[0..n-1] 和 b[0..n-1]。然后我们计算 (i = 0..n-1)：

```
s[i] = a[i] + b[i]l;
carryin[i] = (s[i] < a[i]); 
```

我们定义了两个函数：

```
generate[i] = carryin[i];
propagate[i] = (s[i] == 0xffffffff); 
```

具有相当直观的含义：generate[i] == 1 表示进位在位置 i 生成，而propagate[i] == 1 表示进位将从位置 (i - 1) 传播到 (i + 1)。我们的目标是计算用于更新结果和 s[0..n-1] 的函数 carryout[0..n-1]。可以递归地计算进位，如下所示：

```
carryout[i] = generate[i] OR (propagate[i] AND carryout[i-1])
carryout[0] = 0 
```

这里进位 [i] == 1 如果进位是在位置 i 生成的，或者它有时更早生成并传播到位置 i。最后，我们更新结果总和：

```
s[i] = s[i] + carryout[i-1];  for i = 1..n-1
carry = carryout[n-1]; 
```

现在很容易证明进位函数确实是二进制关联的，因此并行前缀和计算适用。为了在 CUDA 上实现这一点，我们可以将两个标志 'generate' 和 'propagate' 合并到一个变量中，因为它们是互斥的，即：

```
cy[i] = (s[i] == -1u ? -1u : 0) | carryin[i]; 
```

换句话说，

```
cy[i] = 0xffffffff  if propagate[i]
cy[i] = 1           if generate[i]
cy[u] = 0           otherwise 
```

然后，可以验证以下公式计算进位函数的前缀和：

```
cy[i] = max((int)cy[i], (int)cy[k]) & cy[i]; 
```

对于所有 k < i。下面的示例代码显示了 2048 字整数的大加法。在这里，我使用了 512 个线程的 CUDA 块：

```
// add & output carry flag
#define UADDO(c, a, b) \ 
     asm volatile("add.cc.u32 %0, %1, %2;" : "=r"(c) : "r"(a) , "r"(b));
// add with carry & output carry flag
#define UADDC(c, a, b) \ 
     asm volatile("addc.cc.u32 %0, %1, %2;" : "=r"(c) : "r"(a) , "r"(b));

#define WS 32

__global__ void bignum_add(unsigned *g_R, const unsigned *g_A,const unsigned *g_B) {

extern __shared__ unsigned shared[];
unsigned *r = shared; 

const unsigned N_THIDS = 512;
unsigned thid = threadIdx.x, thid_in_warp = thid & WS-1;
unsigned ofs, cf;

uint4 a = ((const uint4 *)g_A)[thid],
      b = ((const uint4 *)g_B)[thid];

UADDO(a.x, a.x, b.x) // adding 128-bit chunks with carry flag
UADDC(a.y, a.y, b.y)
UADDC(a.z, a.z, b.z)
UADDC(a.w, a.w, b.w)
UADDC(cf, 0, 0) // save carry-out

// memory consumption: 49 * N_THIDS / 64
// use "alternating" data layout for each pair of warps
volatile short *scan = (volatile short *)(r + 16 + thid_in_warp +
        49 * (thid / 64)) + ((thid / 32) & 1);

scan[-32] = -1; // put identity element
if(a.x == -1u && a.x == a.y && a.x == a.z && a.x == a.w)
    // this indicates that carry will propagate through the number
    cf = -1u;

// "Hillis-and-Steele-style" reduction 
scan[0] = cf;
cf = max((int)cf, (int)scan[-2]) & cf;
scan[0] = cf;
cf = max((int)cf, (int)scan[-4]) & cf;
scan[0] = cf;
cf = max((int)cf, (int)scan[-8]) & cf;
scan[0] = cf;
cf = max((int)cf, (int)scan[-16]) & cf;
scan[0] = cf;
cf = max((int)cf, (int)scan[-32]) & cf;
scan[0] = cf;

int *postscan = (int *)r + 16 + 49 * (N_THIDS / 64);
if(thid_in_warp == WS - 1) // scan leading carry-outs once again
    postscan[thid >> 5] = cf;

__syncthreads();

if(thid < N_THIDS / 32) {
    volatile int *t = (volatile int *)postscan + thid;
    t[-8] = -1; // load identity symbol
    cf = t[0];
    cf = max((int)cf, (int)t[-1]) & cf;
    t[0] = cf;
    cf = max((int)cf, (int)t[-2]) & cf;
    t[0] = cf;
    cf = max((int)cf, (int)t[-4]) & cf;
    t[0] = cf;
}
__syncthreads();

cf = scan[0];
int ps = postscan[(int)((thid >> 5) - 1)]; // postscan[-1] equals to -1
scan[0] = max((int)cf, ps) & cf; // update carry flags within warps
cf = scan[-2];

if(thid_in_warp == 0)
    cf = ps;
if((int)cf < 0)
    cf = 0;

UADDO(a.x, a.x, cf) // propagate carry flag if needed
UADDC(a.y, a.y, 0)
UADDC(a.z, a.z, 0)
UADDC(a.w, a.w, 0)
((uint4 *)g_R)[thid] = a;
} 
```

请注意，宏 UADDO / UADDC 可能不再需要，因为 CUDA 4.0 具有相应的内在函数（但我不完全确定）。

另请注意，虽然并行归约速度非常快，但如果您需要连续添加几个大整数，最好使用一些冗余表示（在上面的评论中建议），即首先将添加的结果累加到64 位字，然后在“一次扫描”的最后进行一次进位传播。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-21T21:17:44.297

除了@asm，我想我也会发布我的答案，所以这个 SO 问题可以是一种思想库。与@asm 类似，我检测并存储进位条件以及“结转”条件，即。当中间字结果全为 1 (0xF...FFF) 时，如果进位传播到该字中，它将“携带”到下一个字。

我的代码中没有使用任何 PTX 或 asm，因此我选择使用 64 位无符号整数而不是 32 位，以实现 2048x32 位的能力，使用 1024 个线程。

与@asm 的代码更大的区别在于我的并行进位传播方案。我构造了一个位压缩数组（“进位”），其中每个位表示从 1024 个线程中的每个线程的独立中间 64 位相加生成的进位条件。我还构造了一个位压缩数组（“carry_through”），其中每个位代表各个 64 位中间结果的进位条件。对于 1024 个线程，这相当于每个位压缩数组的 1024/64 = 16x64 位字的共享内存，因此共享内存的总使用量为 64+3 个 32 位数量。使用这些位压缩数组，我执行以下操作来生成组合的传播进位指示符：

```
carry = carry | (carry_through ^ ((carry & carry_through) + carry_through); 
```

（注意进位左移一位：carry[i]表示a[i-1] + b[i-1]的结果产生了进位）解释如下：

1.  进位和进位通的按位与生成候选，其中进位将与一个或多个进位条件序列交互
2.  将第一步的结果添加到进位通过生成一个结果，该结果已更改位，这些位表示将受到进位传播到进位通过序列影响的所有字
3.  对 carry_through 进行异或加上步骤 2 的结果显示受影响的结果，用 1 位表示
4.  对第 3 步的结果和普通进位指示符进行按位或运算，得出一个组合进位条件，然后将其用于更新所有中间结果。

请注意，步骤 2 中的添加需要另一个多字添加（对于由超过 64 个字组成的大整数）。我相信这个算法是有效的，它已经通过了我提出的测试用例。

这是实现此功能的示例代码：

```
// parallel add of large integers
// requires CC 2.0 or higher
// compile with:
// nvcc -O3 -arch=sm_20 -o paradd2 paradd2.cu
#include <stdio.h>
#include <stdlib.h>

#define MAXSIZE 1024 // the number of 64 bit quantities that can be added
#define LLBITS 64  // the number of bits in a long long
#define BSIZE ((MAXSIZE + LLBITS -1)/LLBITS) // MAXSIZE when packed into bits
#define nTPB MAXSIZE

// define either GPU or GPUCOPY, not both -- for timing
#define GPU
//#define GPUCOPY

#define LOOPCNT 1000

#define cudaCheckErrors(msg) \
    do { \
        cudaError_t __err = cudaGetLastError(); \
        if (__err != cudaSuccess) { \
            fprintf(stderr, "Fatal error: %s (%s at %s:%d)\n", \
                msg, cudaGetErrorString(__err), \
                __FILE__, __LINE__); \
            fprintf(stderr, "*** FAILED - ABORTING\n"); \
            exit(1); \
        } \
    } while (0)

// perform c = a + b, for unsigned integers of psize*64 bits.
// all work done in a single threadblock.
// multiple threadblocks are handling multiple separate addition problems
// least significant word is at a[0], etc.

__global__ void paradd(const unsigned size, const unsigned psize, unsigned long long *c, const unsigned long long *a, const unsigned long long *b){

  __shared__ unsigned long long carry_through[BSIZE];
  __shared__ unsigned long long carry[BSIZE+1];
  __shared__ volatile unsigned mcarry;
  __shared__ volatile unsigned mcarry_through;

  unsigned idx = threadIdx.x + (psize * blockIdx.x);
  if ((threadIdx.x < psize) && (idx < size)){
    // handle 64 bit unsigned add first
    unsigned long long cr1 = a[idx];
    unsigned long long lc = cr1 + b[idx];
    // handle carry
    if (threadIdx.x < BSIZE){
      carry[threadIdx.x] = 0;
      carry_through[threadIdx.x] = 0;
      }
    if (threadIdx.x == 0){
      mcarry = 0;
      mcarry_through = 0;
      }
    __syncthreads();
    if (lc < cr1){
      if ((threadIdx.x%LLBITS) != (LLBITS-1))  
        atomicAdd(&(carry[threadIdx.x/LLBITS]), (2ull<<(threadIdx.x%LLBITS)));
      else atomicAdd(&(carry[(threadIdx.x/LLBITS)+1]), 1);
      }
    // handle carry-through
    if (lc == 0xFFFFFFFFFFFFFFFFull) 
      atomicAdd(&(carry_through[threadIdx.x/LLBITS]), (1ull<<(threadIdx.x%LLBITS))); 
    __syncthreads();
    if (threadIdx.x < ((psize + LLBITS-1)/LLBITS)){
      // only 1 warp executing within this if statement
      unsigned long long cr3 = carry_through[threadIdx.x];
      cr1 = carry[threadIdx.x] & cr3;
      // start of sub-add
      unsigned long long cr2 = cr3 + cr1;
      if (cr2 < cr1) atomicAdd((unsigned *)&mcarry, (2u<<(threadIdx.x)));
      if (cr2 == 0xFFFFFFFFFFFFFFFFull) atomicAdd((unsigned *)&mcarry_through, (1u<<threadIdx.x));
      if (threadIdx.x == 0) {
        unsigned cr4 = mcarry & mcarry_through;
        cr4 += mcarry_through;
        mcarry |= (mcarry_through ^ cr4); 
        }
      if (mcarry & (1u<<threadIdx.x)) cr2++;
      // end of sub-add
      carry[threadIdx.x] |= (cr2 ^ cr3);
      }
    __syncthreads();
    if (carry[threadIdx.x/LLBITS] & (1ull<<(threadIdx.x%LLBITS))) lc++;
    c[idx] = lc;
  }
}

int main() {

  unsigned long long *h_a, *h_b, *h_c, *d_a, *d_b, *d_c, *c;
  unsigned at_once = 256;   // valid range = 1 .. 65535
  unsigned prob_size = MAXSIZE ; // valid range = 1 .. MAXSIZE
  unsigned dsize = at_once * prob_size;
  cudaEvent_t t_start_gpu, t_start_cpu, t_end_gpu, t_end_cpu;
  float et_gpu, et_cpu, tot_gpu, tot_cpu;
  tot_gpu = 0;
  tot_cpu = 0;

  if (sizeof(unsigned long long) != (LLBITS/8)) {printf("Word Size Error\n"); return 1;}
  if ((c = (unsigned long long *)malloc(dsize * sizeof(unsigned long long)))  == 0) {printf("Malloc Fail\n"); return 1;}

  cudaHostAlloc((void **)&h_a, dsize * sizeof(unsigned long long), cudaHostAllocDefault);
  cudaCheckErrors("cudaHostAlloc1 fail");
  cudaHostAlloc((void **)&h_b, dsize * sizeof(unsigned long long), cudaHostAllocDefault);
  cudaCheckErrors("cudaHostAlloc2 fail");
  cudaHostAlloc((void **)&h_c, dsize * sizeof(unsigned long long), cudaHostAllocDefault);
  cudaCheckErrors("cudaHostAlloc3 fail");

  cudaMalloc((void **)&d_a, dsize * sizeof(unsigned long long));
  cudaCheckErrors("cudaMalloc1 fail");
  cudaMalloc((void **)&d_b, dsize * sizeof(unsigned long long));
  cudaCheckErrors("cudaMalloc2 fail");
  cudaMalloc((void **)&d_c, dsize * sizeof(unsigned long long));
  cudaCheckErrors("cudaMalloc3 fail");
  cudaMemset(d_c, 0, dsize*sizeof(unsigned long long));

  cudaEventCreate(&t_start_gpu);
  cudaEventCreate(&t_end_gpu);
  cudaEventCreate(&t_start_cpu);
  cudaEventCreate(&t_end_cpu);

  for (unsigned loops = 0; loops <LOOPCNT; loops++){
  //create some test cases
  if (loops == 0){
  for (int j=0; j<at_once; j++)
  for (int k=0; k<prob_size; k++){
    int i= (j*prob_size) + k;
    h_a[i] = 0xFFFFFFFFFFFFFFFFull;
    h_b[i] = 0;
    }
    h_a[prob_size-1] = 0;
    h_b[prob_size-1] = 1;
    h_b[0] = 1;
  }
  else if (loops == 1){
  for (int i=0; i<dsize; i++){
    h_a[i] = 0xFFFFFFFFFFFFFFFFull;
    h_b[i] = 0;
    }
    h_b[0] = 1;
  }
  else if (loops == 2){
  for (int i=0; i<dsize; i++){
    h_a[i] = 0xFFFFFFFFFFFFFFFEull;
    h_b[i] = 2;
    }
    h_b[0] = 1;
  }
  else {
  for (int i = 0; i<dsize; i++){
    h_a[i] = (((unsigned long long)lrand48())<<33) + (unsigned long long)lrand48();
    h_b[i] = (((unsigned long long)lrand48())<<33) + (unsigned long long)lrand48();
    }
  }
#ifdef GPUCOPY
  cudaEventRecord(t_start_gpu, 0);
#endif
  cudaMemcpy(d_a, h_a, dsize*sizeof(unsigned long long), cudaMemcpyHostToDevice);
  cudaCheckErrors("cudaMemcpy1 fail");
  cudaMemcpy(d_b, h_b, dsize*sizeof(unsigned long long), cudaMemcpyHostToDevice);
  cudaCheckErrors("cudaMemcpy2 fail");
#ifdef GPU
  cudaEventRecord(t_start_gpu, 0);
#endif
  paradd<<<at_once, nTPB>>>(dsize, prob_size, d_c, d_a, d_b);
  cudaCheckErrors("Kernel Fail");
#ifdef GPU
  cudaEventRecord(t_end_gpu, 0);
#endif
  cudaMemcpy(h_c, d_c, dsize*sizeof(unsigned long long), cudaMemcpyDeviceToHost);
  cudaCheckErrors("cudaMemcpy3 fail");
#ifdef GPUCOPY
  cudaEventRecord(t_end_gpu, 0);
#endif
  cudaEventSynchronize(t_end_gpu);
  cudaEventElapsedTime(&et_gpu, t_start_gpu, t_end_gpu);
  tot_gpu += et_gpu;
  cudaEventRecord(t_start_cpu, 0);
  //also compute result on CPU for comparison
  for (int j=0; j<at_once; j++) {
    unsigned rc=0;
    for (int n=0; n<prob_size; n++){
      unsigned i = (j*prob_size) + n;
      c[i] = h_a[i] + h_b[i];
      if (c[i] < h_a[i]) {
        c[i] += rc;
        rc=1;}
      else {
        if ((c[i] += rc) != 0) rc=0;
        }
      if (c[i] != h_c[i]) {printf("Results mismatch at offset %d, GPU = 0x%lX, CPU = 0x%lX\n", i, h_c[i], c[i]); return 1;}
      }
    }
  cudaEventRecord(t_end_cpu, 0);
  cudaEventSynchronize(t_end_cpu);
  cudaEventElapsedTime(&et_cpu, t_start_cpu, t_end_cpu);
  tot_cpu += et_cpu;
  if ((loops%(LOOPCNT/10)) == 0) printf("*\n");
  }
  printf("\nResults Match!\n");
  printf("Average GPU time = %fms\n", (tot_gpu/LOOPCNT));
  printf("Average CPU time = %fms\n", (tot_cpu/LOOPCNT));

  return 0;
} 
```

# extjs - 未找到 Ext.img 和 404

> ID：12957120
> 
> 赞同：1
> 
> 时间：2012-10-18T14:35:05.670
> 
> 标签：extjs, extjs4, image

只是一个简单的问题，但我搜索了几个小时：如何在 Ext.img 中找不到 404？

我没有在文档中找到错误事件或类似的东西，尝试一些代码但没有任何工作......

祝你今天过得愉快，

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T18:16:30.400

我从来没有尝试过这个，但是`Ext.Img`有一个接受 a 的[加载器](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.AbstractComponent-cfg-loader)配置`Ext.ComponentLoader`，所以你可以试试这个：

```
Ext.create('Ext.Img',{
  //other config,
  loader : {
   url : 'src.jpeg',
   autoLoad : true,
   callback : function(img, success, response, opts)
   {
      if(!success)
      {
           //do whatever
      }
   }
  }
}); 
```

# c# - WPF - 一次播放媒体元素的限制

> ID：12957121
> 
> 赞同：0
> 
> 时间：2012-10-18T14:35:06.490
> 
> 标签：c#, wpf, performance, mediaelement

我有在文件夹中搜索视频的功能。对于该文件夹中的每个视频文件，我正在添加 MediaElement 并开始播放。当我有 cca​​ 10 视频时，一切都很好。然后我添加了一些视频，将视图元素从网格更改为画布（因为性能），现在一些媒体元素没有显示（它们应该在的地方有空白）。这不是一个相同的视频。大多数情况下，这些发生在稍后处理的视频上，但并非总是如此。有谁知道哪里有问题？我认为这不是性能问题，因为其余视频都可以正常播放并且应用程序运行良好。那么有一些限制吗？或者我做错了什么？测试视频是 .wmv 和低质量 (320x240)。

看法：

```
<Canvas x:Name="mainCanvas">
            <ScrollViewer HorizontalScrollBarVisibility="Auto" Width="1680" Height="750">
                <Canvas x:Name="videoCanvas">
                </Canvas>
            </ScrollViewer>
</Canvas> 
```

和 MainWindow.xaml.cs 中的代码

```
 public MainWindow()
        {
            InitializeComponent();

            this.WindowStyle = WindowStyle.None;
            this.WindowState = WindowState.Maximized;

            getAllVideosFromFolder(System.IO.Path.GetFullPath(@"Videos\"));
        }

        private void getAllVideosFromFolder(string path)
        {
            try
            {
                var videoFiles = DirectoryHelper.GetFilesByExtensions(new DirectoryInfo(path), ".wmv", ".mp4", ".avi", ".mov");
                int i = 0, j = 0;

                foreach (var item in videoFiles)
                {
                    MediaElement melem = createMediaElementForPreview(item.FileName);

                    Canvas.SetTop(melem, i * 250);
                    Canvas.SetLeft(melem, j * 340);
                    videoCanvas.Children.Add(melem);

                    i++;
                    if (i > 2)
                    {
                        i = 0;
                        j++;
                    }

                    videos.Add(videoClass);
                }
                videoCanvas.Width = j * 340;
            }
            catch (Exception ex)
            {
                MessageBox.Show(ex.Message);
            }
        }

        private MediaElement createMediaElementForPreview(string sourcePath)
        {
            MediaElement melem = new MediaElement();
            melem.LoadedBehavior = MediaState.Manual;
            melem.Source = new Uri(sourcePath, UriKind.Relative);
        melem.Width = 320;
        melem.Height = 240;
        melem.Volume = 0;
        melem.Play();
        melem.MouseDown += melem_MouseDown;
        return melem;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T17:11:16.757

没有问题。MediaElement 完全是狗屎，有许多灾难性的错误。只要您只使用一种媒体元素和质量差的视频就可以了。

求助于您自己的 DirectShow 解决方案或查看 WPF MediaKit。

# java - 我将如何在 Java 中迭代堆栈

> ID：12957123
> 
> 赞同：19
> 
> 时间：2012-10-18T14:35:11.450
> 
> 标签：java, iterator, stack

我想知道如何在 Stack 类中使用迭代器。如何为它创建一个迭代器类？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-18T14:36:41.043

只需`Iterator`通过[`iterator()`](http://docs.oracle.com/javase/7/docs/api/java/util/Vector.html#iterator%28%29)：

```
Stack<YourObject> stack = ...

Iterator<YourObject> iter = stack.iterator();

while (iter.hasNext()){
    System.out.println(iter.next());
} 
```

或者，如果您只想打印它们，请使用[增强的 for 循环](https://blogs.oracle.com/CoreJavaTechTips/entry/using_enhanced_for_loops_with)：

```
for(YourObject obj : stack)
{
    System.out.println(obj);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-18T14:39:59.843

你可以这样做：

```
for (Iterator<MyObject> iterator = stack.iterator(); iterator.hasNext();) {
   MyObject myObject = iterator.next();
   myObject.doStuff();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T14:44:31.347

听起来您实现了一个自定义堆栈类。您的“某物”应该实现`Iterable`接口并提供`Iterator`.

```
public class MySomethingThatIsAStack<T> implements Iterable<T> {

   @Override
   public Iterator<T> iterator() {
     return new Iterator<T>() {
         // your implementation of the iterator, namely the
         // methods hasNext, next and remove
     }
   }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-18T14:39:19.597

```
Stack<Object> myStack; // obtain your Stack object

Iterator iterator = myStack.iterator();
while (iterator.hasNext()) {
   Object object = iterator.next();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-18T14:45:00.357

`I am working on something that is implementing a stack using queues`

这是否意味着您没有使用 Java`Stack`实现？ [http://docs.oracle.com/javase/6/docs/api/java/util/Stack.html](http://docs.oracle.com/javase/6/docs/api/java/util/Stack.html) 它基于向量而不是队列。

如果您使用的是 Java`Stack`实现，则可以像其他答案一样使用迭代器。否则，如果那是自定义的`Stack`，则必须实现`Iterable`接口。然后你可以做类似其他答案的事情。

# c# - 问答游戏应用

> ID：12957125
> 
> 赞同：-1
> 
> 时间：2012-10-18T14:35:13.743
> 
> 标签：c#

我是 C# 编程的新手，所以我需要在这里询问 C# 专家，我应该使用什么技术来开发我计划开发的问答游戏应用程序。我希望我的测验应用程序是这样的：

> 1.) 英国的首都是哪里？
> 一种。伦敦
> B. 华盛顿特区
> C. 东京
> D. 马尼拉
> 
> 2.) 俄罗斯的首都是哪里？
> 一种。曼谷
> B. 北京
> C. 伊斯兰堡
> D. 莫斯科
> 
> ETC....

我希望使用 Rand() 随机生成问题。问题应该是随机放置的，而不是按照我在这里设置的顺序，但我声明的这 4 个选项仍然是唯一显示在测验集中的选项。如果你有任何教程的链接，请给我，以便我学习。我真的很喜欢开发这个应用程序，但我没有任何线索来开始这个。任何帮助都非常感谢。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T14:50:16.970

有许多不同的方法可以做到这一点。如果您想要能够轻松维护问题和答案的选项，那么执行此操作的方法是将它们放在一个[XML 文件](http://en.wikipedia.org/wiki/XML)中。然后，您可以使用[XMLDocument](http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.aspx)在运行时加载问题和答案。您的 XML 文件看起来像这样：

```
<?xml version="1.0" ?>
<quiz>
    <question>
         What is the capital city of Russia?
         <answers>
             <correctAnswer>Moscow</correctAnswer>
             <wrongAnswer>Bangkok</wrongAnswer>
             <wrongAnswer>Beijing</wrongAnswer>
             <wrongAnswer>Islamabad</wrongAnswer>
         </answers>
    </question>
</quiz> 
```

[您可以使用XMLDocument](http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.aspx)在 C# 中解析它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T14:51:55.750

首先你应该明白你的问题。只需检查您的要求并考虑对象即可。你当然有“问题”和“答案”。每个问题*有*4 个可能的答案，只有一个是正确的。所以第一个非常简单的方法看起来像这样。

```
class Question
{
    public string QuestionText{ get; set; }
    public string AnswerA { get;set }
    public string AnswerB { get;set }
    public string AnswerC { get;set }
    public string AnswerD { get;set }
} 
```

这是一个好的开始，但并不完美。您现在也可以在此问题对象中存储正确答案。但是为了充分利用这个新属性，让我们的答案更有活力是有意义的。

```
class Question
{
    public Question()
    {
        Answers = new string[4];
    }
    public string QuestionText{ get; set; }
    public string[] Answers { get;set; }
    public int CorrectAnswer {get;set; }
} 
```

所以有了这个小对象，我们现在可以像这样创建所有问题：

```
var question = new Question();
question.QuestionText = "What color is snow?";
question.Answers[0] = "Red";
question.Answers[1] = "Yellow";
question.Answers[2] = "White";
question.Answers[3] = "Green";
question.CorrectAnswer = 2;

// ... more questions

var listOfQuestions = new List<Question>();
listOfQuestions.Add(question); 
```

如何随机排序是另一个在 SO 上不难找到的话题。

我个人喜欢 icemaninds 的想法，您可以使用他的答案来改进我的基本方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-18T15:05:27.077

您的预期数据源是什么，它有多大？如果您可以定义数据源的格式，我建议您使用一个文本文件，其中每行包含三个或四个字段，由某种分隔符分隔。这些字段可以是问题、正确答案，以及指示问题和答案都属于的类别的字符列表，或者是问题的类别列表和答案的类别列表。

为了澄清最后一点，在许多多项选择题测试中，如果一个人简单地从 25 个问题中随机选择 10 个问题，然后为每个问题从池中打印三个随机答案以及正确答案，则可能会结束提出这样的问题：“三角形有几条边？（a）正方形（b）欧几里得（c）三个（d）菱形”。一个*计算！*几十年前的杂志文章提供了一个多项选择测验生成器，它通过所谓的“区分”解决了这个问题——将类别附加到问题和答案，并且为每个问题只选择适合问题类别的答案。我不记得那篇文章是怎么做的，但为了简化编码和数据输入，我建议您识别问题和答案的类别，并为每个选择一个字母。对于上述问题，一个合理的类别可能是“写出小于 13 的整数”，因此如果任意决定使用字符“Q”，那么问题和答案都会有一个“Q”类别。在许多情况下，一个单一的问答类别就足够了（我认为'*程序有效，但在某些情况下，可能需要允许更复杂的东西（例如，对于“具有四个边且成对对边相等的形状是：”，提供“五边形”作为选项可能是合理的，但可能不是“正方形”、“矩形”或“菱形”）。*

 *在数据集的设计中还有一些问题需要考虑，例如它应该如何处理多个问题可能具有相同答案的可能性，以及答案应该以随机顺序还是一致顺序列出（例如“如何五边形有很多边”，最好将答案列为“（a）三（b）五（c）六（d）八”而不是“（a）八（b）五（c）六(d) 三")。*

# php - 使用标签创建正则表达式？

> ID：12957132
> 
> 赞同：0
> 
> 时间：2012-10-18T14:35:31.750
> 
> 标签：php, javascript, regex

(000) 000-0-000 和 +00 (000) 000-00-00 页上有三行，所以我写了一个正则表达式来搜索它们`/([\+]?[0-9]+\s)?[\(][0-9]+[\)]?[\s][0-9-]+/`，但是第三个字符串包含在标签中`<strong>(0000)</strong><span>00-00-00</span>`如何修改表达式碰到第三排？

```
function PhoneReplace(){
            var src = $('body').html().replace(/([\+]?[0-9]+\s)?[\(][0-9]+[\)]?[\s][0-9-]+/g, '098 907 23 42');
            $('body').html(src);

        }; 
```

标签不能删除，我必须更换

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T14:40:52.867

不要在现有的正则表达式中捕捉到这种情况。相反，在应用电话号码表达式之前修改字符串，即删除标签。有很多方法可以做到这一点，例如使用 DOM 解析器，正则表达式可能不是最好的工具。你可以做

```
var results = input.replace(/<[^>]+>/g,"").match(myPhoneNumberExpression); 
```

删除所有类似标签的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T15:33:00.570

```
var s = '<strong>(0000)</strong><span>00-00-00</span>';
var n = '', result;
var regex = /(\+?\d+)/g;
while ((result = regex.exec(s))) { 
  n += result[1];
} 
document.writeln(n); 
```

**[在此处](http://jsfiddle.net/2nBvw/)**检查此代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T14:43:25.777

您可以使用`document.body.innerText`或`document.body.textContent`获取 HTML 的文本内容（不带标签），然后可以应用您的 phone# 正则表达式。

如果文本内容没有帮助，那么[从文本 JavaScript 中剥离 HTML](https://stackoverflow.com/questions/822452/strip-html-from-text-javascript)解释了从 HTML 字符串中删除标签的几种（hacky）方法。

# uitableview - 嵌入在 cell.accessoryVIew 中的 UIButton 没有响应

> ID：12957133
> 
> 赞同：1
> 
> 时间：2012-10-18T14:35:38.843
> 
> 标签：uitableview, uibutton

我正在使用“动态原型”`UITableview`为其生成表格单元格，如下所示

```
-(UITableViewCell*)populateFeatureCell:(UITableView*)tableView row:(NSUInteger)row {

    NSString *CellIdentifier = @"FeatureCell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    SKProduct *product = [STLNavigatorIAPHelper productAtIndex:row];
    if (product != nil) {
        cell.textLabel.text = [product localizedTitle];
        UIButton *buyButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
        buyButton.frame = CGRectMake(0, 0, 72, 37);
        [buyButton setTitle:NSLocalizedString(@"BUY", nil) forState:UIControlStateNormal];
        buyButton.tag = row;
        [buyButton addTarget:self action:@selector(buyButtonTapped:) forControlEvents:UIControlEventTouchUpInside];
         cell.accessoryType = UITableViewCellAccessoryNone;
         cell.accessoryView = buyButton;
    }

    [cell setUserInteractionEnabled:YES];

    return cell;
} 
```

我可以看到表格中的单元格，但该单元格不响应任何事件。请注意，该函数`buyButtonTapped`也已定义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T17:58:13.517

at index path 的表行是第一个命中。

您可以在那里处理或传递给按钮。

# java - 限制选中复选框的数量

> ID：12957134
> 
> 赞同：0
> 
> 时间：2012-10-18T14:35:37.273
> 
> 标签：java, swing, user-interface, checkbox, jcheckbox

我正在编写一个有多个项目可供测试的 Java 应用程序。但是——由于硬件限制，我只能并行测试 4 个设备。我想知道——总的来说——我怎样才能让 Java 将所选项目的数量限制为只有四个（无论选择哪个）？我正在阅读 Java 文档，但似乎找不到答案。

我对Java相当陌生——所以请原谅我的无知。我只需要一个关于从哪里/如何开始的线索。

如何限制 Java 中选中的复选框数量？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T14:45:01.807

如果您使用的是 Swing，请先创建一个 JCheckBox[] 数组并用复选框填充它。然后创建带有选中复选框数量的 ChangeListener 和全局变量。将此侦听器添加到所有复选框。在 ChangeListener 的`stateChanged()`方法中，将全局变量增加或减少 1。如果变量达到 4，则使用 setEnabled(false) 禁用所有复选框，除了选中的复选框。当您将变量从 4 减少到 3 时，请将它们设置为启用。

这是关于 ChangeListener 的好例子： [http ://www.java2s.com/Code/Java/Event/CheckBoxItemListener.htm](http://www.java2s.com/Code/Java/Event/CheckBoxItemListener.htm)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T14:38:31.633

我会创建一个全局变量来保存已启动设备的数量。

单击复选框时，在其事件处理程序中，如果已选中则添加到变量中，如果未选中则减去。

当然，在允许检查另一个值之前，您会在添加该值小于 5 (0 - 4) 之前进行检查。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T14:41:44.907

跟踪所有复选框。在监听器的 stateChanged() 中添加对以下检查的调用：

*   循环并查询所有复选框的状态并计算检查了多少。
*   如果选中的复选框数量等于或大于 4，则再次循环所有复选框并禁用所有未选中的复选框。
*   否则，如果复选框的数量少于 4 个，则启用所有复选框。

增加/减少复选框数量的全局计数似乎更有效，但在处理 UI 时增益可以忽略不计。我会说最好进行防御性编码，以避免极端情况和错误试图跟踪状态信息，而不是仅仅轮询它。

对于防御性编程，您还希望验证来自 UI 的输入以检查复选框的数量是否小于或等于 4。

# c# - 在独立应用程序中模拟 IIS DefaultAppPool

> ID：12957141
> 
> 赞同：2
> 
> 时间：2012-10-18T14:35:59.407
> 
> 标签：c#, sql-server-2008, iis, impersonation

我的问题的描述听起来有些复杂，是什么让我认为我的方法有缺陷，所以我也会欣赏任何更好的想法。

**简短的介绍：**

给定到 MSSQL 2008 DB 的连接字符串和部署在 IIS6 上的网站名称，我想以编程方式验证网站是否能够连接到数据库。

**详细描述：**

1.  我有 MSSQL Server 数据库，我们称之为`portal_db`.
2.  我在 IIS6 上部署了一个应用程序，名为`portal`. 我可以通过 url 访问它`http://localhost/portal`。在 Web.config 文件中，我指定了到我的数据库的连接字符串，如下所示：`"server=(local)\SQLEXPRESS;trusted_connection=yes;database=portal_db"`
3.  Web 应用程序正在使用`System.Data.SqlClient.SqlConnection`没有任何包装器、ORM、映射等任何东西来访问数据库。
4.  网站配置为在 appool 中运行`PortalAppPool`。它`ApplicationPoolIdentity`用作安全上下文。
5.  无法轻松修改 Web 应用程序代码（尤其是它访问数据库的方式）

当我的 Web 应用程序尝试连接到数据库时，它要么成功要么失败，具体取决于用户`IIS APPPOOL\PortalAppPool`是否在 MSSQL 数据库中配置。这是我理解的一部分，但是在部署我的应用程序时，我经常忘记在数据库中为 apppool 虚拟帐户创建新用户/登录名。所以我想做的是从单独的、独立的控制台应用程序（最好用 C# 编写，但不一定）验证我的 Web 应用程序是否可以访问数据库，方法如下：

1.  读取连接字符串`Web.config`
2.  读取应用程序池标识设置（由目录服务 API 管理）
3.  使用在应用程序池中定义的凭据模拟身份（使用我在此处找到的模拟类：http: [//platinumdogs.me/2008/10/30/net-c-impersonation-with-network-credentials/](http://platinumdogs.me/2008/10/30/net-c-impersonation-with-network-credentials/)它使用在许多其他地方找到的想法, 包括 MSDN)
4.  `SqlConnection`使用读取的连接字符串打开`Web.config`

它归结为以下代码段：

```
using (new Impersonator("IIS APPPOOL\\PortalAppPool", "", ""))
{
    SqlConnection conn = new SqlConnection(databaseConnectString);
    conn.Open();
} 
```

当我的应用程序池安全上下文设置为除特定用户、本地系统等之外的任何其他值时，一切都运行良好`AppPoolIdentity`。当我更改传递`Impersonator`给我的用户名和密码的凭据时，我得到了想要的结果（当我没有数据库中的登录映射，添加一个后一切正常）。但我似乎无法模拟`IIS APPPOOLS\PortalAppPool`虚拟帐户 - 只是不知道应该传递哪些参数`LogonUser`- 如果它甚至不可能，我不会感到惊讶。也许我过于关注模拟方法（我正在使用它来访问其他用户的注册表项和服务并且效果很好），也许有一些更好的方法。

如果您有任何其他更好的想法，或者需要对此问题进行更多解释，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T15:08:06.533

我认为您不能模拟虚拟帐户（IIS 服务帐户）。它们是主要用于 IIS 安全的特殊服务帐户设置。它们仅用于本地服务，不能附加到任何域。Windows Server 2008 R2 和 Windows 7 中的虚拟帐户是“托管本地帐户”，提供以下功能以简化服务管理：

*   无需密码管理。
*   在域环境中使用计算机身份访问网络的能力。

您不能“登录”虚拟帐户，Windows 出于安全目的使用它们：

如果你有时间，一些简单的阅读：

*   [这简要概述了 MSA 和虚拟帐户](http://weblogs.asp.net/owscott/archive/2010/04/21/managed-service-accounts-msa-and-virtual-accounts.aspx)
*   [MSA 和虚拟账户的区别](http://social.technet.microsoft.com/wiki/contents/articles/391.managed-service-accounts-msas-versus-virtual-accounts-in-windows-server-2008-r2.aspx)
*   [每个细节以及如何管理它们](http://technet.microsoft.com/en-us/library/dd548356%28WS.10%29.aspx)

为了解决您最初的问题，您可以构建一个可以执行相同逻辑的应用程序，但检查 sql 服务器是否具有正确的用户设置，而不是简单地尝试使用该帐户登录。

# windows - WFP 内核模式驱动程序的 DriverEntry 在某些机器上的调用方式不同？

> ID：12957150
> 
> 赞同：1
> 
> 时间：2012-10-18T14:36:32.727
> 
> 标签：windows, driver, wfp, windows-kernel

我已经为我自己的应用程序向 Windows 过滤平台 MSNMNTR 示例添加了一些代码，但它仍然具有相同的结构。我已经为 Win8 64 位编译了驱动程序和应用程序，并对驱动程序进行了生产签名。在我构建代码的（虚拟）机器上，该示例工作正常并且可以正确监控。当我将 inf、sys 和 exe 复制到另一台机器时，示例不会监控。通过 traceview 输出，我可以看到在第二台机器上，没有调用 DriverEntry()，因此从未设置过流控制。两台机器都运行的是Win8的发布版。这似乎不是我的新代码的问题，因为驱动程序在 #1 机器上运行良好，而且它似乎不是签名问题，因为当我关闭机器 #2 上的签名强制时，我仍然有问题。代码的发布版本和调试版本都有相同的问题。我用来设置和运行代码的步骤如下。有哪些事情可能会导致这种行为？

1.  将驱动程序 .pdbs 复制到 traceview 的文件夹中。
2.  右键单击 .inf 并选择“安装”
3.  从提升的命令提示符运行“net start msnmntr”。
4.  以管理员身份启动 traceview。
5.  从提升的命令提示符运行“monitor monitor "C:\Program Files\Internet Explorer\iexplore.exe"”。

PS我还没有把windbg放在这个上面，但我会在我尝试后立即用结果更新问题。

**编辑添加：**好的，我在两台机器上运行了内核模式调试器并看到了行为差异。首先，两台机器都调用了 DriverEntry。我错了。但是，在代码工作的机器上（即监控网络流量），DriverEntry 在 monitor.exe 运行时被调用（上面的第 5 步），而在代码不工作的机器上，**DriverEntry**在“net start msnmntr”时被调用（上面的步骤 3) 被执行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T19:21:13.040

问题是我没有在第二台机器上通过“monitor addcallouts”安装标注。由于这是一次性步骤，我忘记了我几周前在原始机器上做过的。

# c++ - 在 C++ 中以非常快速的方式检查数组元素是否已更改并更新大型数组的值

> ID：12957152
> 
> 赞同：1
> 
> 时间：2012-10-18T14:36:39.287
> 
> 标签：c++, rhapsody

我有以下代码：

```
const int size=9;
mtype array[size];
array[0]...
array[0].Value=me->getRootInstance()->A();
array[0]...

...

array[3000]...
array[3000].Value=me->getRootInstance()->A3000();
array[3000]...

while(Logging::getLogging()){ 

   if(!areEqual(array[0].Value,me->getRootInstance()->A())){array[0].Value=me->getRootInstance()->A(); saveValue(array[0]);}
   ...
   if(!areEqual(array[3000].Value,me->getRootInstance()->A3000())){array[3000].Value=me->getRootInstance()->A3000(); saveValue(array[3000]);}

}
return 0; 
```

结构数组在开始时被初始化并检查更改。如果发生更改，则应更新数组中的值。问题是当前代码非常慢，我知道每 100 毫秒就会发生一次更改。对于小型阵列，它工作正常。然而，如果数组很大（3000 个元素），更新时间延迟超过 3 秒。有没有更好的方法来比较和更新数组的元素？

areEqual 函数如下所示：`return fabs(a - b) < 0.000000000001;`

saveValues() 看起来像这样：

```
OMGuard _omGuard(r_omGuard); 
int tc = clock()-Logging::getStarttime(); //clicks 
double seconds = ((double)tc)/CLOCKS_PER_SEC;   

mtype *newstruct = new mtype();   

newstruct->Calltime = seconds;
newstruct->Name = melem.Name;
newstruct->Value = melem.Value;   
newstruct->GUID = melem.GUID;  
newstruct->ReqName = melem.ReqName;
newstruct->ReqGUID = melem.ReqGUID;

monitoredlist.add(newstruct); 
```

感谢您的任何帮助！问候编辑

# android - 在 GDB 中捕获未初始化/未重置的变量

> ID：12957155
> 
> 赞同：1
> 
> 时间：2012-10-18T14:36:43.390
> 
> 标签：android, android-ndk, gdb, profiling, instrumentation

带有原生组件的 Android 项目。我正在使用第三方库，我怀疑存在未初始化或未重置变量的错误。相同的调用序列（根据接口定义应该是等价的）产生不同的结果。

我有图书馆的资源，但我不想深入研究它们（它真的很大而且很复杂）。有没有办法利用像 GDB 这样的东西来比较一段代码的两次运行——看看变量状态是否在任何时候发散？它不应该——代码完全在内存中，没有 I/O 或随机性。

# fitnesse - FitNEsse 版本 20110104 及更高版本 - 快多少？

> ID：12957157
> 
> 赞同：0
> 
> 时间：2012-10-18T14:36:42.530
> 
> 标签：fitnesse

我试图说服我的管理层升级到新版本的 FitNesse（我们现在正在运行 20070619）我在雅虎群看到 Bob 叔叔的消息

[http://tech.groups.yahoo.com/group/fitnesse/message/16752](http://tech.groups.yahoo.com/group/fitnesse/message/16752)

说那是“它*快得多*”。- 但我想知道是否有人有任何指标，与旧指标相比它有多快？谢谢！O。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T21:38:54.937

您使用的是 Slim 还是 Fit 风格的桌子？页面有多大？当解析器被重写时，我们看到了显着的改进。旧的解析器是基于正则表达式的，在大页面上速度很慢。新的解析器是更合适的解析器并且效率更高。

如果我必须在上面加上一个特定的数字，我会说它快 40% 以上，但你的里程可能会根据你的测试编写方式而有所不同。

综上所述，新版本中有很多很棒的功能。尽管如果您使用的是 2007 版本，那么大多数改进都与 Slim 有关，后者是在 2007 年之后推出的。解析器的改进将在那里，您可能会喜欢其他一些更新（测试历史、模板、新的主题功能， ETC）。

# javascript - 用鼠标单击/箭头键突出显示线条

> ID：12957158
> 
> 赞同：1
> 
> 时间：2012-10-18T14:36:45.613
> 
> 标签：javascript, jquery, html, css, highlight

不久前，我问了一个关于如何[在 mouseover 上突出显示文本行的](https://stackoverflow.com/questions/11994696/highlight-lines-of-text-on-mouseover/11995086)问题。然而，当我使用它一段时间后，我注意到这个系统有一些缺陷。其中之一是用户在切换到新选项卡/移动鼠标做其他事情后会忘记他们在哪里。

这就是为什么我想做同样的事情，除了鼠标点击，或者更好的是，键盘上的箭头键。

我不知道这是否可能，因为我没有使用 jQuery 的经验。如果有人知道这样的脚本，或者如果有人可以给我写一个，那就太好了！

提前谢谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T01:48:56.940

这是这个 jquert 部分

```
$(document).ready(function() {
  $(".textWrapper").click(function(e) {
      var relativePos = e.pageY - this.offsetTop;
      var textRow = (Math.ceil(relativePos / 18) * 18) - 18;
      $(".highlight", this).css("top", textRow + "px");
      $(".highlight", this).show();
  });
}); 
```

当然还有 js fiddle [http://jsfiddle.net/gFTrS/8/](http://jsfiddle.net/gFTrS/8/)

对于箭头键，这有点棘手，因为我需要一种方法来计算段落中的行数

# css - CSS背景颜色和png图像

> ID：12957163
> 
> 赞同：1
> 
> 时间：2012-10-18T14:36:58.880
> 
> 标签：css

它可能需要一种解决方法或额外的元素来实现，但我还是会问。

我有一个简单的图像。图像沿对角线分成两部分。顶部是纯色，底部是透明的。如果我应用以下代码，背景颜色会填充图像的透明度。有没有办法定位颜色或不让它显示在我的图像区域的位置，而只是填充元素的其余部分？

```
#content:before {
    position: absolute;
    z-index: -1;
    bottom: -35px;
    content: "";
    width: 35px;
    height: 465px;
    left: -35px;
    background: #121314 url(library/images/content-fold-left.png) 0 bottom no-repeat;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T14:56:43.997

使用 CSS3 渐变：

```
html, body {
  height: 100%;
}

body {
  background: -webkit-gradient(linear, 50% 0%, 50% 100, color-stop(100%, rgba(0, 0, 0, 0)), color-stop(100%, #fa8072));
  background: -webkit-linear-gradient(top, rgba(0, 0, 0, 0) 100px, #fa8072 100px);
  background: -moz-linear-gradient(top, rgba(0, 0, 0, 0) 100px, #fa8072 100px);
  background: -o-linear-gradient(top, rgba(0, 0, 0, 0) 100px, #fa8072 100px);
  background: linear-gradient(top, rgba(0, 0, 0, 0) 100px, #fa8072 100px);
} 
```

这是一个[演示](http://codepen.io/bookcasey/pen/zfidk)。

你会注意到我使用了 Sass 和 Compass。不同的渐变语法是一场噩梦，但是使用 Sass 和 Compass，你所要做的就是：

```
body
  +background(linear-gradient(top, rgba(0,0,0,0) 100px, salmon 100px)) 
```

它将为您编译所有供应商前缀和不同的旧语法。

# asp.net-mvc - MVC 在测试方法中获取查看 HTML 输出

> ID：12957164
> 
> 赞同：2
> 
> 时间：2012-10-18T14:37:00.903
> 
> 标签：asp.net-mvc, asp.net-mvc-4

如何在我的测试方法中获得生成的 HTML（视图）？

我有以下内容：

控制器：

```
public ActionResult Index()
{
    ViewBag.Message = "Welcome to ASP.NET MVC!";

    return View();
} 
```

看法：

```
@{
    ViewBag.Title = "Home Page";
}

<h2>@ViewBag.Message</h2>
<p>
    To learn more about ASP.NET MVC visit <a href="http://asp.net/mvc" title="ASP.NET MVC Website">http://asp.net/mvc</a>.
</p> 
```

测试：

```
 [TestMethod]
    public void HomeControllerReturnsView()
    {
        // Arrange
        var controller = new HomeController();

        // Act
        var result = controller.Index() as ViewResult;

        using (StringWriter sw = new StringWriter())
        {
            ViewEngineResult viewResult = ViewEngines.Engines.FindPartialView(controller.ControllerContext, "Home");
            ViewContext viewContext = new ViewContext(controller.ControllerContext, viewResult.View, controller.ViewData, controller.TempData, sw);
            viewResult.View.Render(viewContext, sw);

            var test = sw.GetStringBuilder().ToString();
        }
    } 
```

仅供参考：当我在调试 controller.HttpContext 和 controller.RouteData 中运行它时为空。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T14:47:02.010

您可以使用[RazorGenerator](http://razorgenerator.codeplex.com/)在单元测试中执行视图。这是一篇[博](http://blog.davidebbo.com/2011/06/unit-test-your-mvc-views-using-razor.html)文，其中 David Ebbo 说明了这一点。

但那些不再是单元测试。它们是集成测试，您可以使用[Watin](http://watin.org/)等工具来对应用程序执行集成测试。

# .net - 在视图之间绑定 HttpPostedFileBase

> ID：12957166
> 
> 赞同：1
> 
> 时间：2012-10-18T14:37:04.073
> 
> 标签：.net, asp.net-mvc

是否可以在视图之间传递 HttpPostedFileBase 文件以填充文本框 type="file"？

我基本上有一个上传 texbox，可以在一个页面上将文件上传到服务器。

在下一页我们可以修改表单中提交的所有数据，包括图像。此页面有一个返回按钮，需要将所有数据传回原始页面，包括图像。

那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T14:38:58.130

出于安全原因，不可能通过 javascript 或在服务器上创建页面时提供文件输入框的值。所以，不，你将无法做到这一点。

相反，在文件上传后，只需在常规 div 标签中写入您希望在下一页显示的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T14:38:45.970

不。

相反，您可以将它存储在服务器上的某个位置（例如，临时目录、会话状态或数据库），并将标识符传递给下一步。

# ios - gdb 无法在 iphone 5.1.1 上加载共享库

> ID：12957171
> 
> 赞同：2
> 
> 时间：2012-10-18T14:37:17.690
> 
> 标签：ios, load, gdb, shared-libraries

我正在尝试在 iOS 上转储已执行应用程序的内存（使用 gdb）。但是 gdb 不能转储任何数据。（确切地说，转储的数据是用 0x00 填充的。）

根据其他网站上的说明，当 gdb 附加到进程时，将开始加载共享库。但是，mime 不加载库。

以下是附加到进程时的确切消息。

> root# gdb -p 4570 GNU gdb 6.3.50.20050815-cvs（2011 年 5 月 20 日星期五 08:08:42 UTC）版权所有 2004 Free Software Foundation, Inc. GDB 是自由软件，受 GNU 通用公共许可证保护，欢迎您使用在某些条件下更改和/或分发其副本。键入“显示复制”以查看条件。GDB 绝对没有任何保证。键入“显示保修”以获取详细信息。此 GDB 配置为“--host=arm-apple-darwin9 --target=”。/private/var/root/4570：没有这样的文件或目录附加到进程 4570。0x35f9f004 in ?? () (gdb)

仅供参考，我的 iPhone 是 4S，iOS 是 5.1.1。我错过了 gdb 的任何设置吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-12T03:20:08.657

要解决这个问题，请将[http://cydia.radare.org](http://cydia.radare.org)添加到 cydia 源并下载最新的 GNU 调试器（build 1708）。GDB build 1708 适用于 iOS 5.0+

# sql - 合并类似数据的列

> ID：12957175
> 
> 赞同：1
> 
> 时间：2012-10-18T14:37:29.920
> 
> 标签：sql, sql-server

我正在使用将多个表（4 个 INNER JOINS 和一个 OUTER LEFT JOIN）捆绑在一起的旧数据库；正因为如此以及表必须如何连接在一起，所以整合数据真的很困难。我已经做到了这一点：

```
+---------------------------------------------------------------------------+
| EmployeeName | HireDate | Title | Mandatory30 | Mandatory90 | MandatoryPA |
+---------------------------------------------------------------------------+
| Stewart, P.  | 1/1/01   | CO    | 1/1/02      | NULL        | NULL        |
| Stewart, P.  | 1/1/01   | CO    | NULL        | 1/2/12      | NULL        |
| Frakes, J.   | 5/5/05   | XO    | 5/5/05      | NULL        | NULL        |
| Frakes, J.   | 5/5/05   | XO    | NULL        | 5/6/05      | NULL        |
+---------------------------------------------------------------------------+ 
```

如何将其合并为更接近以下内容的内容？

```
+---------------------------------------------------------------------------+
| EmployeeName | HireDate | Title | Mandatory30 | Mandatory90 | MandatoryPA |
+---------------------------------------------------------------------------+
| Stewart, P.  | 1/1/01   | CO    | 1/1/02      | 1/2/12      | NULL        |
| Frakes, J.   | 5/5/05   | XO    | 5/5/05      | 5/6/05      | NULL        |
+---------------------------------------------------------------------------+ 
```

这些 MandatoryN 字段实际上有 5 个，但希望这不会对解决方案产生太大影响。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T14:39:54.350

尝试这样的事情：

```
SELECT EMPLOYEENAME, 
       HIREDATE, 
       TITLE, 
       Max(MANDATORY30) AS Mandatory30, 
       Max(MANDATORY90) AS Mandatory90, 
       Max(MANDATORYPA) AS MandatoryPA 
  FROM TABLE 
 GROUP BY EMPLOYEENAME, 
          HIREDATE, 
          TITLE 
```

您可以根据需要添加任意数量的字段。

# lucene - 如何在 lucene 查询中指定文档的类型？

> ID：12957176
> 
> 赞同：0
> 
> 时间：2012-10-18T14:37:30.673
> 
> 标签：lucene, mime-types, alfresco, cmis

我只想在 Alfresco 3.4.7 上的 lucene 搜索中检索没有 wiki、博客……的“cmis:document”，但我不知道如何。

```
TYPE:"cmis:document" 
```

不起作用。

有没有办法在查询中指定多个 mimetypes ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T15:25:28.060

Alfresco 支持不同的查询方案，并且只对[CMIS 查询](http://wiki.alfresco.com/wiki/CMIS_Query_Language)`cmis:document`有意义。[Lucene 查询](http://wiki.alfresco.com/wiki/Search#Lucene)使用 Alfresco 域模型而不是其 CMIS 视图：

```
TYPE:"cm:content" AND -TYPE:"cm:folder" 
```

然后，如果您想[按 MIME 类型](http://wiki.alfresco.com/wiki/Search#Finding_nodes_by_content_mimetype)过滤：

```
@\{http\://www.alfresco.org/model/content/1.0\}content.mimetype:text/plain 
```

或者：

```
@cm\:content.mimetype:text/plain 
```

# c# - C# - 处理保存多个配置（和实时访问数据）的最佳方式

> ID：12957182
> 
> 赞同：1
> 
> 时间：2012-10-18T14:37:49.810
> 
> 标签：c#

所以我看到了很多关于存储设置的最佳方法的问题，但还没有真正看到任何与我的情况有关的问题。

基本上我今天的应用程序有一个设置选项卡，其中包含大约 75 个选项/设置。用户基本上可以拥有这些设置的不同“副本”（想想：当您选择它时，所有 75 个选项都设置为相关联的 .xml 文件中的任何内容）。

现在我只是使用 XML 存储设置。问题是当我的应用程序需要访问设置时，它实际上是直接访问 UI（复选框等...）

我的问题：我应该基本上为每个控件创建一个“已更改”事件，然后更新适当的设置结构（并且仅在用户点击保存时保存）？

我担心我不应该直接访问 UI，而今天它在整个应用程序中都在这样做。我想确定我的新解决方案是合适的/C# 是如何设计的。

提前致谢！〜乔什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T15:45:27.213

听起来您想要一个代表配置的类。序列化到/从 XML 允许您将其存储在文件或数据库中。

静态单例可以为应用程序提供当前活动配置的值。应用程序不应在每次需要时检查不可见表单上的 UI 元素以获取设置。

设计设置表单以便它处理配置的实例允许它用于显示/更新活动配置或保存的配置。它应该简化让用户加载配置、修改配置并将其保存为新配置的过程。

通常，75 是单个选项卡要管理的许多设置。

# maven - Apache Archiva 没有缓存？

> ID：12957186
> 
> 赞同：1
> 
> 时间：2012-10-18T14:37:59.810
> 
> 标签：maven, archiva

我刚刚设置了 Archiva，我正在测试它。我正在尝试获取`mysql-connector-java`并且我希望它不会在内部存储库中找到它，从中央存储库下载它然后缓存它。

但是，当我检查`<archiva>/data/repositories/internal`时，它是空的。*管理页面中的浏览*也是空的，*搜索*不会返回任何内容。

我假设这意味着它没有存储工件，并且下次它将再次从中央存储库中获取它。我还假设我没有得到任何帮助，所以一些帮助会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T15:11:37.763

我的错 - 我为存储库使用了错误的 URL。我有`http://myrepo:8080/archiva`并且它需要，`http://myrepo:8080/archiva/repository/internal`所以它会直接去中央回购。现在工作正常。

# html - 在页面中心对齐很多div，有没有更简单的方法？

> ID：12957192
> 
> 赞同：0
> 
> 时间：2012-10-18T14:38:14.917
> 
> 标签：html, css

我的代码如下所示：

```
<div id="divone"><div class="content">Content here</div></div>
<div id="divtwo"><div class="content">Content here</div></div>
<div id="divthree"><div class="content">Content here</div></div>
<div id="divfour"><div class="content">Content here</div></div>
<div id="divfive"><div class="content">Content here</div></div>
<div id="divsix"><div class="content">Content here</div></div> 
```

的CSS：

```
.content { width:960px; margin:auto;}
#divone { background-image: url(bg1.png); background-repeat: repeat;}
#divtwo { background-image: url(bg2.png); background-repeat: repeat;}
#divthree { background-image: url(bg1.png); background-repeat: repeat;}
#divfour { background-image: url(bg1.png); background-repeat: repeat;}
#divfive { background-image: url(bg1.png); background-repeat: repeat;}
#divsix { background-image: url(bg1.png); background-repeat: repeat;} 
```

我做了一个 jsfiddle 让你了解我在做什么[http://jsfiddle.net/64H5p/](http://jsfiddle.net/64H5p/)

有没有更简单的方法而不添加`.content`每次我希望 div 对齐到中心的时间？我正在处理的网站每页大约有 100 个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T14:40:42.183

您可以创建一个容器 div，以 margin: 0 auto 居中，然后将 div 放入其中，每个 100% 宽度

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T14:54:17.580

在你的 CSS 代码中试试这个

```
div[id^='div'] div { 
  width:120px;
  margin:auto;
} 
```

[演示](http://jsfiddle.net/64H5p/3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T14:42:33.740

为什么不只`text-align:center;`在每个外包装 div 上使用？(divone, divtwo, ...)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T14:44:08.407

```
 #divone, #divtwo, #divthree, #divfour, #divfive, #divsix {
     width:960px; 
     margin:0 auto;
 } 
```

您可以组合选择器。

如果您仍然想在 中包含 a `div`，`#divone`您`#divtwo`可以使用这样的选择器：`#divone div, #divtwo div, #divthree div, ... {}`

[演示](http://jsfiddle.net/64H5p/2/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-18T14:46:41.483

我为你做了这个 jfiddle：

[http://jsfiddle.net/4V68d/](http://jsfiddle.net/4V68d/)

看一看

或者看这里：

```
<div class="content">
<div id="divone">Content here</div>
<div id="divtwo">Content here</div>
<div id="divthree">Content here</div>
<div id="divfour">Content here</div>
<div id="divfive">Content here</div>
<div id="divsix">Content here</div>
</div>​

.content {margin:auto;}
.content div{text-align: center;}
#divone { background-image: url(bg1.png); background-repeat: repeat; background-color:red;}
#divtwo { background-image: url(bg2.png); background-repeat: repeat;background-color:blue;}
#divthree { background-image: url(bg1.png); background-repeat: repeat;background-color:yellow;}
#divfour { background-image: url(bg1.png); background-repeat: repeat;background-color:green;}
#divfive { background-image: url(bg1.png); background-repeat: repeat;background-color:pink;}
#divsix { background-image: url(bg1.png); background-repeat: repeat;background-color:grey;}​ 
```

如果您希望只有**其中一些**与中心对齐，请向要与中心对齐的 div 添加一个类

像：

```
<div id="divone" class="centered">Content here</div>

.centered {margin: 0px auto;} 
```

# ajax - Spring MVC 3.0 - 限制通过调度程序 servlet 路由的内容

> ID：12957193
> 
> 赞同：1
> 
> 时间：2012-10-18T14:38:14.897
> 
> 标签：ajax, spring, model-view-controller, rest

我想使用 Spring MVC 3.0 为 AJAX 事务构建接口。我希望结果以 JSON 形式返回，但我不一定希望使用 JSP 构建网页。我只希望通过 DispatcherServlet 拦截/路由对控制器的请求，并且项目的其余部分继续像没有 Spring 集成的常规 Java webapp 一样运行。

我的想法是将 web.xml 中的 servlet-mapping url 模式定义为类似于“/controller/*”，然后在我的控制器中将类级别 @RequestMapping 设置为类似于 @RequestMapping("/controller/colors") ，最后在方法级别，有 @RequestMapping(value = "/controller/colors/{name}", method = RequestMethod.GET)。

唯一的问题是，我不确定是否需要在所有 RequestMappings 中继续添加“/controller”，无论我尝试什么组合，我都会不断收到 404 requested resource not available 错误。

这里的最终目标是让我能够在 Web 浏览器中输入“http://localhost:8080/myproject/controller/colors/red”并将 RGB 值作为 JSON 字符串取回。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T15:23:15.547

您需要在任何地方添加整个路径是不正确的，路径是累积的-

如果您有`/controller/*`Spring 的 DispatcherServlet 的 servlet 映射，那么任何调用`/controller/*`都将由 DispatcherServlet 现在处理，您只需要处理 中的其余路径信息`@RequestMapping`，因此您的控制器可以

```
@Controller
@RequestMapping("/colors")
public class MyController{

 @RequestMapping("/{name} 
 public String myMappedMethod(@PathVariable("name") String name, ..){
 }

} 
```

所以现在，这个方法将由对`/controller/colors/blue`etc的调用来处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T15:15:46.617

> 我不一定要使用 JSP 构建网页

Spring MVC 提供了许多[视图模板集成选项](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/view.html)，从直通到原始 html 到 Velocity 和 Freemarker 等丰富的模板引擎。也许这些选项之一将适合您正在寻找的东西。

# php - 我的数据不会保存到 SQL

> ID：12957194
> 
> 赞同：0
> 
> 时间：2012-10-18T14:38:18.147
> 
> 标签：php, mysql

为什么我的数据不能进入我的 sql 数据库？我知道我已连接到数据库。而且我知道发布的数据正在到达此页面，因为我可以回显它。!emptys 的行有问题。当我输入 yyy 但不是 xxx 的值时，我收到“请填写所有字段”消息。但是，如果我将两者都留空，或者只输入 xxx 的值，我什么也得不到。当我为两者输入值时，我确实收到了“失败”消息，因此数据没有被插入到 sql 中。

```
if (isset($_POST['xxx']) && ($_POST['yyy']))  {
$xxx = $_POST['xxx'];
$age = $_POST['yyy'];
    if (!empty($xxx) && !empty($yyy)) {

    $query = "INSERT INTO test VALUES ('".mysql_real_escape_string($child_name)."',
    '".mysql_real_escape_string($age)."')";
        if ($query_run = mysql_query($query)) {
        echo 'Data inserted.';
        } else {
            echo 'Failed.';
        }
} else {
    echo 'Please fill out all fields';
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T14:40:15.693

首先更正您的`isset`陈述`yyy`

```
if (isset($_POST['xxx']) && isset($_POST['yyy'])) 
```

第二次更正：

`$yyy = $_POST['yyy'];`代替`$age = $_POST['yyy'];`

第三次更正：

`if (mysql_query($query))`代替`if ($query_run = mysql_query($query))`

因为`mysql_query()`回报`bool`

`echo mysql_error();`而不是`echo 'Failed.';` 得到你的mysql错误！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T14:41:31.123

检查您的 php 和 mysql 错误。

```
<?php

echo (mysql_error());
error_report(E_ALL);

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T14:41:38.767

检查查询并尝试此代码并将其重命名为`('id', 'field name')`：

```
 $query = "INSERT INTO test ('id', 'field name') VALUES ('". mysql_real_escape_string($child_name) ."', '". mysql_real_escape_string($age) ."')"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T14:42:06.457

您是否尝试过手动查询？

在发送之前回显查询并尝试在 phpmyadmin 中运行它

也添加`echo mysql_error();`查看错误

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-18T14:42:48.950

几个问题：

```
1\.  if (isset($_POST['xxx']) && ($_POST['yyy']))  { //needs to be
    if (isset($_POST['xxx']) || isset($_POST['yyy']))  {

2\.  if (!empty($xxx) && !empty($yyy)) { //needs to be
    if ( !empty($xxx)) ||  !empty($age) ) { 

3\.  if ($query_run = mysql_query($query)) { //whats $query_run? 
```

`mysql_query($query)``TRUE`如果查询成功则返回 a 。参考[手册](http://php.net/manual/en/function.mysql-query.php)

# java - SSL 安全异常 [Security:090542] 问题=> 来自服务器的无效 API 密钥响应

> ID：12957198
> 
> 赞同：1
> 
> 时间：2012-10-18T14:38:27.343
> 
> 标签：java, web-services, web

您好网络服务专业人士，

我遇到了这个 ssl 异常 [Security:090542] 问题。这是整个消息

> 原因：javax.net.ssl.SSLKeyException: [Security:090542]Certificate chain received from localhost - 127\. . . --> api.company.com 不受信任，导致 SSL 握手失败。检查证书链以确定它是否应该被信任。如果应该信任它，则更新客户端信任的 CA 配置以信任签署对等证书链的 CA 证书。如果您要连接到使用演示证书（默认 WLS 服务器行为）的 WLS 服务器，并且希望此客户端信任演示证书，则在此客户端的命令行上指定 -Dweblogic.security.TrustKeyStore=DemoTrust。

我想就如何解决这个问题征求您的意见。我不确定如何解决这个问题。我应该将 AccessKey 从 Java 字符串转换为 XML 吗？如果是这样，这样做的方法是什么？或者我面临的主要问题是什么？感谢您的所有意见。这是与问题相关的 SOAP 需求消息部分。

```
<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:xsd="http://www.w3.org/2001/XMLSchema"
xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
<soap:Body>
<SendEmployee xmlns="http://api.company.com/">
<request accessKey="string"> 
```

这是我与 accessKey 相关的代理类

```
public class SendEmployeeRequest {
    /**
     * Sets the value of the accessKey property.
     * 
     * @param value
     *     allowed object is
     *     {@link String }
     *     
     */
    public void setAccessKey(String value) {
        this.accessKey = value;
    }
} 
```

* * *

在将字符串 AccessKey 发送到 web 服务进行身份验证的主要 Java 程序中，我有 2 行代码来设置供应商提供给我的 API Accesskey。

```
SendEmployeeRequest employeeRequest = objectFactory.createSendEmployeeRequest();
employeeRequest.setAccessKey("nOzbwpMGMbeEXTU="); 
```

# android - 在 Android 中连接到指定的 WiFi 网络

> ID：12957204
> 
> 赞同：3
> 
> 时间：2012-10-18T14:38:48.907
> 
> 标签：android, wifi, wifimanager

> **可能重复：**
> [如何以编程方式连接到android中的特定wifi网络？](https://stackoverflow.com/questions/8818290/how-to-connect-to-a-specific-wifi-network-in-android-programmatically)

我知道有几个像这样的问题，但我已经尝试了我在 stackoverflow 和其他网站上找到的所有东西，但没有任何东西可以解决我的问题。

我正在从一个设备创建一个接入点，并尝试以编程方式从另一台设备连接到它。两个设备上的 WifiConfiguration 完全相同。我能够找到网络，但它无法连接到它！我很确定 AP 不是问题，因为我可以通过默认的 Android wifi 设置（手动输入密码等）连接到它。

//当通过startScan()找到网络时，我尝试连接：

```
WifiConfiguration wc=new WifiConfiguration();
wc.SSID="\"my_ssid\"";
wc.preSharedKey = "\"my_password\"";
wc.status = WifiConfiguration.Status.ENABLED;
wc.allowedGroupCiphers.set(WifiConfiguration.GroupCipher.TKIP);
wc.allowedGroupCiphers.set(WifiConfiguration.GroupCipher.CCMP);
wc.allowedKeyManagement.set(WifiConfiguration.KeyMgmt.WPA_PSK);
wc.allowedPairwiseCiphers.set(WifiConfiguration.PairwiseCipher.TKIP);
wc.allowedPairwiseCiphers.set(WifiConfiguration.PairwiseCipher.CCMP);
wc.allowedProtocols.set(WifiConfiguration.Protocol.RSN);
wc.allowedProtocols.set(WifiConfiguration.Protocol.WPA);

int netId=wifi.addNetwork(wc);
wifi.enableNetwork(netId, true); 
```

addNetwork() 正在返回一个有效的网络 ID。我没有收到任何错误。它只是不连接。

我已经尝试将 WifiConfiguration 更改为 OPEN，以及其他几件事，但没有任何效果。wifi也开启了。如果有人可以帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T15:43:56.447

经过不断的尝试/失败测试，​​我得到了解决方案。SSID 和密码（预共享密钥）必须在**客户端的引号之间！**. AP的Wifi配置中的SSID和密码**不需要引号**。

更改后，它开始工作。

每天我都对 Android 中的这种“向导”解决方案感到更加失望......

# .net - 带有 cer 文件的 X509Certificate2 ctor

> ID：12957209
> 
> 赞同：3
> 
> 时间：2012-10-18T14:39:08.297
> 
> 标签：.net, ssl, passwords, certificate, x509certificate2

我在 .Net 中面临 2 路 ssl 配置的一些问题。不知何故，当我在构造函数中使用 .cer 文件和密码创建 X509Certificate2 对象时，密码被忽略（我输入了错误的密码并且它起作用了 - 响应成功返回）。另一方面，当我使用 .p12 文件时，行为符合预期（密码错误导致结果不成功）

有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T05:43:18.983

.cer 文件仅包含（通常情况下）未加密形式的 X509 证书。在这种情况下，解码证书不需要密码。我想 X509Certificate2 构造函数尝试确定 Byte[] 参数的编码格式，并在不需要时忽略密码参数。而且很可能在创建后，`PrivateKey`对象的属性是`null`.

加载 .cer 文件时，您应该使用仅采用 1 Byte[] 参数的构造函数。该构造函数的文档清楚地指定了支持的数据格式：

> 此构造函数使用字节数组中的证书信息创建一个新的 X509Certificate2 对象。字节数组可以是二进制 (DER) 编码或 Base64 编码的 X.509 数据。字节数组也可以是 PKCS7（Authenticode）签名文件；签名者证书用于创建对象。

[PKCS#12 格式](http://www.rsa.com/rsalabs/node.asp?id=2138)（.p12 或 .pfx 文件）是证书和私钥的容器格式。在这种情况下，需要密码才能解密加密的私钥。实际上，在 X509Certificate2 构造函数文档中指定了 PKCS#12 文件的行为：

> 此构造函数与包含证书私钥的 PKCS12 (PFX) 文件一起使用。使用正确的密码调用此构造函数会解密私钥并将其保存到密钥容器中。

# ruby-on-rails-3 - Rails 3 to_i 方法替代

> ID：12957210
> 
> 赞同：0
> 
> 时间：2012-10-18T14:39:09.123
> 
> 标签：ruby-on-rails-3, string, methods, integer, type-conversion

我有一个字符串变量`codigo = "0001"`，我想将其转换为整数并将其值增加 1，我曾经这样做过，`codigo.to_i += 1`但显然该方法在 Rails 3 中已被弃用。Rails 3 现在的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T15:30:43.753

这里的基本问题是您的变量`codigo`, 是一个字符串。

`codigo.to_i`将返回一个整数，但它不会改变它所调用的变量的类型，所以它仍然是一个字符串，你刚刚调用了一个返回整数的方法。

`codigo.to_i + 1`将返回 2。

`codigo.to_1 += 1`将产生错误，因为返回值不在任何变量中，因此不能递增。

因此，要将变量转换为整数并递增，请执行以下操作：

```
codigo = codigo.to_i
codigo += 1 
```

如果它更有意义，您也可以在一行中执行此操作：

```
codigo = codigo.to_i + 1 
```

# regex - 在不支持时模仿前瞻

> ID：12957212
> 
> 赞同：0
> 
> 时间：2012-10-18T14:39:15.643
> 
> 标签：regex

我想匹配封装在`<?`and中的所有文本`?>`。我发现了一种使用前瞻的相当简单的方法：

```
<\?([^?]|\?(?!>))*\?> 
```

不幸的是，我正在为其编写正则表达式的工具不支持前瞻。有没有解决的办法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T14:59:14.143

对于您的具体情况，您可以简单地使重复变得不贪婪：

```
<\?(.*?)\?> 
```

这只会持续到第一个`?>`。之前的任何单曲`?`都将被 覆盖`.*`，但是当引擎遇到第一个`?>`时它将停止。

请注意（除非您使用`DOTALL`修饰符）这不适用于跨多行的部分。如果你不能使用修饰符，这将（独立于平台）：

```
<\?((.|[\r\n])*?)\?> 
```

# google-drive-api - 将 Google Drive 解决方案整合到现有的 Android 应用项目中？

> ID：12957214
> 
> 赞同：1
> 
> 时间：2012-10-18T14:39:18.093
> 
> 标签：google-drive-api

我有一个已经在 Google Play 上发布的现有 Android 应用程序项目，现在我想在我的应用程序中加入使用 Google Drive 的可能性，以便在应用程序首次打开或加载。像这样我解放了安装此应用程序的手机的内部记忆（所有图像都存储在应用程序的资源中，实际上是>〜20MB）。我已经阅读了很多关于 Google Drive SDK 或 API 主题的论坛，我可以说我有点迷失了为我目前的应用程序管理它的方式。一些想法或建议将非常非常非常感激。

非常感谢你）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T02:11:15.637

有关如何将您的 Android 应用程序与 Google Drive SDK 集成的基础知识，请参阅此问题：[Access to Google Drive from self-implemented Android application](https://stackoverflow.com/questions/12556687/access-to-google-drive-from-self-implemented-android-application/12888877#12888877)

在其中，我参考了一个关于如何开始的优秀 Google+ 教程，并且很容易将这些概念应用到现有应用程序中。（我也是这样做的。）在开始之前，注册 Google API ( [https://code.google.com/apis/console/](https://code.google.com/apis/console/) )，进入 API 控制台，然后打开 Google Drive API 和驱动 SDK。这将使编码变得更加顺畅。如果您有任何问题，请告诉我。

针对您与 *.jpg 文件相关的具体案例的一个附录是，您可以设置 MIME 类型以严格获取图片。它会是这样的：

```
 request = service.files().list(); // .setQ("mimeType=\"text/plain\""); 
```

不幸的是 setQ 被注释掉了，因为当我使用它时它不会返回任何结果。`image/jpeg`但是，您可能对MIME 类型有更好的运气。

# javascript - jquery .slidetoggle() 和 .toggle() 一起，第一次点击什么都不做，然后再工作

> ID：12957216
> 
> 赞同：4
> 
> 时间：2012-10-18T14:39:22.343
> 
> 标签：javascript, jquery

我正在尝试创建一个类似手风琴的界面，但可以同时打开多个部分。此外，除了扩展部分内容以供查看之外，我还将图像交换为单击的“标题”。一切正常，但第一次点击每个“标题”什么都不做。每次后续点击都按预期工作。

这是我设置的小提琴的链接：http: [//jsfiddle.net/kJ8t6/5/](http://jsfiddle.net/kJ8t6/5/)

任何帮助将不胜感激。从昨天开始，我一直在努力解决这个问题，并且不得不转向其他事情。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T14:41:58.297

您不需要绑定额外的`click`事件，因为[`toggle`](http://api.jquery.com/toggle-event/)已经是鼠标单击事件。但是，您应该考虑到该`toggle`事件现在已被弃用，因此请谨慎使用它。

```
$("#imgDeliver").toggle(function() {
    $(this).attr("src", "...");
    $('#conDeliver').slideToggle();
}, function() {
    $(this).attr("src", "...");
    $('#conDeliver').slideToggle();
}); 
```

**演示：http:** [//jsfiddle.net/kJ8t6/6/](http://jsfiddle.net/kJ8t6/6/)

# c++ - 调用从另一个函数 c++ 定义的函数

> ID：12957218
> 
> 赞同：1
> 
> 时间：2012-10-18T14:39:27.143
> 
> 标签：c++

我想知道，如何在我定义一个函数的地方创建一个函数。然后我可以调用定义的函数。让我举个例子。

```
void funcToCall() {
    std::cout<<"Hello World"<<std::endl;
}

void setFuncToCall(void func) {
    //Define some variable with func
}

void testFuncCall() {
    //Call function that has been defined in the setFuncToCall
}

setFuncToCall(funcToCall()); //Set function to call
testFuncCall(); //Call the function that has been defined 
```

我希望你明白我在这里想要做什么。但我不知道如何把它归结为正确的代码:-)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T14:43:11.210

你需要一个函数指针。如果您`typedef`先使用函数指针，则使用它们会更容易。

```
typedef void (*FuncToCallType)();

FuncToCallType globalFunction; // a variable that points to a function

void setFuncToCall(FuncToCallType func) {
    globalFunction = func;
}

void testFuncCall() {
    globalFunction();
}

setFuncToCall( funcToCall ); //Set function to call,NOTE: no parentheses - just the name 
testFuncCall(); //Call the function that has been defined 
```

正如其他答案所建议的那样，您也可以使用函数等对象。但这需要运算符重载（即使它仍然对您隐藏）并且通常与模板一起使用。它提供了更大的灵活性（您可以在将对象传递给函数之前为对象设置一些状态，并且对象`operator()`可以使用该状态），但在您的情况下，函数指针可能同样好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T14:43:27.570

函数指针的 C 语法有点奇怪，但我们开始吧：

```
// this is a global variable to hold a function pointer of type: void (*)(void)
static void (*funcp)(void); 
// you can typedef it like this:
//typedef void (*func_t)(void); 
// - now `func_t` is a type of a pointer to a function void -> void

// here `func` is the name of the argument of type `func_t` 
void setFuncToCall(void (*func)(void)) { 
// or just: void setFuncToCall(func_t func) {
    //Define some variable with func
    ...
    funcp = func;
}

void testFuncCall(void) {
    //Call function that has been defined in the setFuncToCall
    funcp();
}

setFuncToCall(funcToCall);  // without () !
testFuncCall(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-18T14:47:05.380

您要使用的是回调，并且已经回答了她：[Callback functions in c++](https://stackoverflow.com/questions/2298242/callback-functions-in-c)

我建议你使用`std::tr1::function`（广义回调）

# java - 生成介于 0 和某个值之间的随机整数，其中一半在集合 (0,5] 中，另一半在 (5,x]

> ID：12957219
> 
> 赞同：1
> 
> 时间：2012-10-18T14:39:27.747
> 
> 标签：java, random, numbers

我正在寻找一种从 0-x 生成随机整数的方法，其中 x 由人类用户在运行时定义。但是，这些数字中的一半必须大于零且小于或等于 5 (0,5]，而另一半必须在 [6,x] 的集合中。

我知道下面的代码会从 0-x 生成一个数字。主要问题是确保其中一半在 (0,5] 的集合中

```
 Math.random() * x; 
```

我不是在找人为我做这件事，只是在寻找一些提示。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T14:44:10.243

您可以先掷硬币，然后根据该硬币生成上限或下限：

```
final Random rnd = new Random();
while (true)
  System.out.println(rnd.nextBoolean()? rnd.nextInt(6) : 6 + rnd.nextInt(x-5)); 
```

或者，使用笨重的`Math.random()`（在范围的边缘肯定会遇到麻烦）：

```
while (true)
  System.out.println(Math.floor(
     math.random() < 0.5 ? (Math.random() * 6) : (6 + (x-5) * Math.random())
  )); 
```

仅将其视为提示:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T14:43:55.380

我会这样做：

```
 double halfX= x / 2.0;
double random = Math.random() * x; 
if( random< halfX ) {
    random = random*5.0/(halfX);
} else {
    random = (random/halfX - 1) * (x-5.0) + 5.0 ;
} 
```

我觉得现在很好。这不太容易理解和可读，但每次调用只有一次随机调用。除了 MarkoTopolnic 指出的事实之外：用户需要一个整数......我必须计算四舍五入对分布的影响。

这绝对不容易......我的头疼，所以我能想出最好的：

```
double halfX= x / 2.0 + 1.0;
double random = Math.random() * (x+2.0); 
int randomInt;
if( random< halfX ) {
    randomInt = (int) (random*6.0/(halfX)); //truncating, means equal distribution from 0-5
} else {
    randomInt = (int) ((random/halfX - 1.0) * (x-5.0) + 6.0) ; //notice x-5.0, this range before truncation is actually from 6.0 to x+1.0, after truncating it gets to [6;x], as this is integer
} 
```

第二部分我不确定...睡几个小时就可以了...我希望意图和逻辑很清楚...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T17:22:29.447

如果有人好奇，这是我根据 Marko 的解决方案提出的解决方案。

我为该程序的另一部分定义了以下类。

```
public class BooleanSource
{
private double probability;

BooleanSource(double p) throws IllegalArgumentException
{
    if(p < 0.0)
        throw new IllegalArgumentException("Probability too small");
    if(p > 1.0)
        throw new IllegalArgumentException("Probability too large");
    probability = p;
}

public boolean occurs()
{
    return (Math.random() < probability);
}
} 
```

With that, I did the following

```
 private static void setNumItems(Customer c, int maxItems)
{
            BooleanSource numProb = new BooleanSource(0.5);
            int numItems;

            if(numProb.occurs())
            {
                double num = (Math.random()*4)+1;
                numItems = (int) Math.round(num);
            }
            else
            {
                double num = 5 + (maxItems-5)*Math.random();
                numItems = (int) Math.round(num);
            }

            c.setNumItems(numItems);
} 
```

# magento - Magento 获取未加盐的 md5 密码

> ID：12957222
> 
> 赞同：0
> 
> 时间：2012-10-18T14:39:33.317
> 
> 标签：magento, md5, password-encryption

我正在尝试将 magento 中的数据迁移到另一个数据库，在该数据库中我使用普通的 md5 哈希存储密码，在 Magento 中导出密码时的问题是使用

```
$passHash = $user->getPasswordHash(); 
```

返回使用加盐 md5 加密的密码。

有没有办法获得未加盐的 md5 哈希？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T15:23:28.773

不，您将永远无法反转哈希。理论上有可能使用某种 md5 反转彩虹表（http://en.wikipedia.org/wiki/Rainbow_table），但并不是一种真正稳定的方法。

如果在新系统中您可以使用与 Magento 中相同的盐，或者可能要求您的客户输入新密码，也许一个选项可能是？

# php - 使用 PHP 和 MySQL 在 Google 地图上显示多个标记

> ID：12957225
> 
> 赞同：2
> 
> 时间：2012-10-18T14:39:47.310
> 
> 标签：php, mysql, google-maps, google-maps-api-3

我尝试使用 PHP 和 MySQL 在 Google 地图上显示多个标记。下面的代码使用PHP连接数据库，获取经纬度。

问题是地图没有显示，但是一旦我删除了这条线，它就可以在没有得到标记的情况下工作：`"var liste_des_points=[<?php echo $listeDesPoints; ?>];"`。我认为问题在于PHP格式。

请帮我解决一下这个 。

```
 <%@ page language="java" contentType="text/html; charset=UTF-8"
pageEncoding="UTF-8"%>
     <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
    <?php

     $connexion=mysql_connect("localhost", "root", "") or die(mysql_error());
     mysql_select_db("survey",$connexion) or die(mysql_error());

     $result = mysql_query("SELECT latitude, longitude FROM appreciation order by id");

     $listeDesPoints='';
     while($row = mysql_fetch_array($result)){
     if($listeDesPoints!='') $listeDesPoints.=','; 
     $listeDesPoints.='['.$row['latitude'].','.$row['longitude'].']';
     }

     mysql_close($connexion);
   ?>

     <html>
        <head>
          <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
          <style type="text/css">
           html { height: 100% }
           body { height: 100%; margin: 0; padding: 0 }
           #map_canvas { height: 100% }
           </style>
           <script type="text/javascript"
           src="http://maps.googleapis.com/maps/api/js?key=AIzaSyB3is760vHXhki9vS_LpiWAig8a33GP3CY&sensor=false">
           </script>
        <script type="text/javascript">
         function initialize() {
            var optionsCarte = {
              center: new google.maps.LatLng(34.02,-6.83),
              zoom: 8,
              mapTypeId: google.maps.MapTypeId.ROADMAP
            };
            var map = new     google.maps.Map(document.getElementById("map_canvas"),
            optionsCarte);

            var liste_des_points=[<?php echo $listeDesPoints; ?  >];

            var i=0,li=liste_des_points.length;
            while(i<li){
            new google.maps.Marker({
                   position: new google.maps.LatLng(liste_des_points[i][0], liste_des_points[i][1]),
                   map: map,
            });
            i++;
            }

          }
        </script>
      </head>
      <body onload="initialize()">
        <div id="map_canvas" style="width:100%; height:100%">    </div>
      </body>
      </html> 
```

# python - 如何在机器人框架的日志文件中嵌入 URL

> ID：12957228
> 
> 赞同：1
> 
> 时间：2012-10-18T14:39:52.373
> 
> 标签：python, robotframework

在机器人框架中，我正在加载一个库作为关键字。

这些关键字是库中的方法。

我知道我可以使用简单的打印语句将信息直接发送到机器人框架日志文件。

但是当我的方法在与日志文件相同的目录中创建一个文件时，如何在日志文件中创建指向它的链接？

例子：

机器人框架文件：

```
| *Setting* |
| Library | Testtools
| *Test Case* |
|                   | LogMe 
```

库文件：TestTools.py

```
def LogMe(self):
    file = open('testfile.txt', 'w+')
    file.write("Line of text")
    file.close()
    print "The test file is found at http://testfile.txt"   #This line is where I need help 
```

我需要知道如何在机器人框架将创建的日志中添加指向我新创建的文件的链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T19:04:11.840

结果很简单。只需将*HTML*添加到打印的字符串中，robot 框架就会将其视为预先格式化的文本。

我需要做的就是将代码的最后一行更改为：

```
print "*HTML* The test file is found at <a href=testfile.txt>this location</a>" 
```

这一切都有效。

啊！

# iphone - 在 Storyboard 中使用自定义推送 Segue

> ID：12957231
> 
> 赞同：12
> 
> 时间：2012-10-18T14:40:01.997
> 
> 标签：iphone, objective-c, ios, xcode

在 iPhone 中，当我们在 Storyboard 中使用 push Segue 时，它​​总是从 导航`right`到`left`。我们可以实现它导航`left`到`right`或`down`到的任何机制`top`吗？

我知道如何创建`Custom`Segue，但它不像`Push`. 你能帮助我吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-18T19:45:23.340

如果您正在为 iOS 5 开发 App，您可以创建一个实现 UIStoryboardSegue 的类（具有自定义 segue），然后`Perform`以这种方式覆盖该方法：

```
-(void)perform {

    UIViewController *sourceViewController = (UIViewController*)[self sourceViewController];
    UIViewController *destinationController = (UIViewController*)[self destinationViewController];

    CATransition* transition = [CATransition animation];
    transition.type = kCATransitionPush; 
    transition.subtype = kCATransitionFromLeft; 

    [sourceViewController.navigationController.view.layer addAnimation:transition forKey:kCATransition];
    [sourceViewController.navigationController pushViewController:destinationController animated:NO];
} 
```

# arrays - 将数组组合成一个字符串（matlab）

> ID：12957234
> 
> 赞同：2
> 
> 时间：2012-10-18T14:40:07.973
> 
> 标签：arrays, string, matlab

我有以下内容：

```
A = [1 2 5; 1 5 7];

B = A(1,:); 
```

我输出 B：

```
B = A(1,:);

B =

 1     2     5 
```

我希望将 B 中包含的内容组合成一个字符串：

```
1/2/5 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T14:42:22.027

您可以使用`sprintf`：

```
sprintf('%d/',B) 
```

这会给你几乎你想要的，它最终会有不必要`/`的。

```
>> sprintf('%d/',B)

ans =

1/2/5/ 
```

如果要删除它：

```
st = sprintf('%d/',B);
st(end) = []; 
```

正如@hmuster 正确指出的那样，可以使用`\b`退格符来做到这一点。

```
st = [sprintf('%d/',B) sprintf('\b')]; 
```

但是，正如@AndrewJanke 正确指出的那样，如果将此字符串写入管道或文件中，则可能会出现问题。所以请谨慎使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T14:43:29.077

如果您希望它正确完成（IE 可重用），有两个步骤：

1.  [将您的数字转换为字符串（这将允许以后使用http://www.mathworks.com/help/matlab/ref/num2str.html](http://www.mathworks.com/help/matlab/ref/num2str.html)正确转换疯狂的值`num2str`

2.  水平连接字符串（您可以使用 MATLAB 连接属性 A = [BC]），但功​​能方式是`strcat` [http://www.mathworks.com/help/matlab/ref/strcat.html](http://www.mathworks.com/help/matlab/ref/strcat.html)

# objective-c - 如何释放分配的条形按钮项

> ID：12957235
> 
> 赞同：0
> 
> 时间：2012-10-18T14:40:10.573
> 
> 标签：objective-c, ios, uibarbuttonitem

我可以自动释放以下内容吗？

```
self.navigationItem.leftBarButtonItem = [[[UIBarButtonItem alloc] initWithCustomView:backButton] autorelease]; 
```

它可以工作并删除我收到的分析器警告。如果没有，我将如何正确发布它。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T14:41:35.177

这是正确的方法（尽管现在正确的方法是使用 ARC）。

一种可接受的替代方案（在非 ARC 环境中）是：

```
UIBarButtonItem *barButton = [[UIBarButtonItem alloc] initWithCustomView:backButton];
self.navigationItem.leftBarButtonItem = barButton;
[barButton release]; 
```

navigationItem 的设置器保留按钮本身，因此必须释放 alloc/init 返回的对象，以便以所述方式之一平衡保留计数（alloc/init 返回的对象保留计数为 1，并且设置器将 +1 添加到）。

这绝对**不**推荐：

```
[self.navigationItem.leftBarButtonItem release]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T14:42:21.470

这是对的。

leftBarButtonItem 是一个保留 UIBarButtonItem 的属性，所以是的，这是一个好方法。

如果没有自动释放消息，它将导致内存泄漏。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T14:43:53.710

这是正确的，你也可以这样做

```
UIBarButtonItem *item = [[[UIBarButtonItem alloc] initWithCustomView:backButton];
self.navigationItem.leftBarButtonItem = item;
[item release]; 
```

# javascript - 在 node.js 中使用“网页”Phantom 模块

> ID：12957239
> 
> 赞同：17
> 
> 时间：2012-10-18T14:40:23.053
> 
> 标签：javascript, node.js, rendering, phantomjs

我正在尝试将 PhantomJS 脚本包装在 node.js 进程中。幻影脚本从命令行提供的参数中获取一个 url 并输出一个 pdf（非常类似于 pahntom 安装中包含的 rasterize.js 示例）。

我拥有的幻影脚本运行良好，如果可能的话，只是我的雇主想要一个节点脚本。没问题，我可以使用[node-phantom](https://github.com/alexscheelmeyer/)节点模块来包装它。

但现在我遇到了一个绊脚石，我的幻影脚本有：

```
var page = require('webpage').create(); 
```

因此，node.js 试图找到一个名为“webpage”的模块，“webpage”模块内置于幻像安装中，因此节点无法找到它。据我所知，没有名为“网页”的 npm 模块。

“网页”是这样使用的：

```
page.open(address, function (status) {

    if (status !== 'success') {

        // --- Error opening the webpage ---
        console.log('Unable to load the address!');

    } else {

        // --- Keep Looping Until Render Completes ---
        window.setTimeout(function () {
            page.render(output);
            phantom.exit();
        }, 200);
    }
}); 
```

其中 address 是在命令行中指定的 url，而 output 是另一个参数，即文件的名称和类型。

谁能帮我吗？这是一个相当抽象的问题，所以说实话，我并不期待太多，但值得一试。

谢谢。

编辑 - 大约 2 小时后

我现在有这个抛出一个PDF：

```
var phanty = require('node-phantom');

var system = require('system');

phanty.create(function(err,phantom) {

    //var page = require('webpage').create();

    var address;
    var output;
    var size;

    if (system.args.length < 4 || system.args.length > 6) {

        // --- Bad Input ---

        console.log('Wrong usage, you need to specify the BLAH BLAH BLAH');
        phantom.exit(1);

    } else {

        phantom.createPage(function(err,page){

            // --- Set Variables, Web Address, Output ---
            address = system.args[2];
            output = system.args[3];
            page.viewportSize = { width: 600, height: 600 };

            // --- Set Variables, Web Address ---
            if (system.args.length > 4 && system.args[3].substr(-4) === ".pdf") {

                // --- PDF Specific ---
                size = system.args[4].split('*');
                page.paperSize = size.length === 2 ? { width: size[0], height: size[1], margin: '0px' }
                                                   : { format: system.args[4], orientation: 'portrait', margin: '1cm' };
            }

            // --- Zoom Factor (Should Never Be Set) ---
            if (system.args.length > 5) {
                page.zoomFactor = system.args[5];
            } else {
                page.zoomFactor = 1;
            }

            //----------------------------------------------------

            page.open(address ,function(err,status){

                if (status !== 'success') {

                    // --- Error opening the webpage ---
                    console.log('Unable to load the address!');

                } else {

                    // --- Keep Looping Until Render Completes ---
                    process.nextTick(function () {
                        page.render(output);
                        phantom.exit();
                    }, 200);
                }

            });

        });
    }
}); 
```

但！这不是正确的尺寸！使用 phantom 'webpage' create() 函数创建的页面对象在传递 URL 之前如下所示：

![幻影返回页面](../Images/c76d1c6fda712d5cc577e52bf6628819.png)

而我在我的节点脚本中，看起来像这样：

![我的页面](../Images/0934adbdf7095bb9ad9fc149db446c9b.png)

是否可以对属性进行硬编码以实现 A4 格式？我缺少什么属性？

我好近！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-18T14:57:49.910

It should be something like:

```
var phantom=require('../node-phantom');
phantom.create(function(error,ph){
  ph.createPage(function(err,page){
    page.open(url ,function(err,status){
      // do something
    });
  });
}); 
```

Your confusion here is because you want to reuse the same concepts and metaphors from your PhantomJS script. It does not work that way. I suggest that you spend some time studying the included tests of node-phantom, see [https://github.com/alexscheelmeyer/node-phantom/tree/master/test](https://github.com/alexscheelmeyer/node-phantom/tree/master/test).

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-02-24T22:55:19.100

使用[https://github.com/sgentle/phantomjs-node](https://github.com/sgentle/phantomjs-node)我在 nodejs 中使用 phantom 制作了一个 A4 页面，代码如下：

```
phantom.create(function(ph){
    ph.createPage(function(page) {
        page.set("paperSize", { format: "A4", orientation: 'portrait', margin: '1cm' });
        page.open("http://www.google.com", function(status) {
            page.render("google.pdf", function(){
                console.log("page rendered");
                ph.exit();
            })
        })
    })

}); 
```

边注：

page.set() 函数采用您在 rasterize.js 示例中设置的任何变量。查看上面的 paperSize 是如何设置的，并将其与 rasterize.js 中的相关行进行比较

# c - 如何在 Mac OS 命令行 C 程序中获取键盘状态？

> ID：12957243
> 
> 赞同：1
> 
> 时间：2012-10-18T14:40:26.907
> 
> 标签：c, macos

我希望程序持续输出数据，同时检测键盘状态并做出响应，而不阻塞循环。我想我在 Windows 上看到过类似的东西。Mac OS上有类似的东西吗？

# asp.net-mvc-4 - ASP.NET MVC4 WebApi 中 WCF UriTemplate 的等价物

> ID：12957244
> 
> 赞同：0
> 
> 时间：2012-10-18T14:40:33.413
> 
> 标签：asp.net-mvc-4, asp.net-web-api, wcf-web-api

我正在迁移一个 WebApi 项目（从预览版，即 WCF WebApi 到最终版本，即 ASP.NET MVC4 WebApi）。

在 WCF WebApi 中，为所有服务操作定义了 URI 模板，例如：

```
[WebGet(UriTemplate = "{movieGenreId}/movies")] 
```

光是我介意我在这个项目中有几十个。如何在无需在路由表中注册数十个条目的情况下将其转换为 MVC4 WebApi？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T14:50:11.817

您可以使用 Web API 项目的优秀属性路由：

*   这是 GitHub 上的源代码（MVC 和 Web API） - [https://github.com/mccalltd/AttributeRouting](https://github.com/mccalltd/AttributeRouting)

*   这是 Web API 中属性路由的简短介绍 - [http://www.strathweb.com/2012/05/attribute-based-routing-in-asp-net-web-api/](http://www.strathweb.com/2012/05/attribute-based-routing-in-asp-net-web-api/)

*   这是属性路由 Web API 包的 Nuget - [http://nuget.org/packages/AttributeRouting.WebApi/3.1.2](http://nuget.org/packages/AttributeRouting.WebApi/3.1.2)

将 UriTemplates 转换为属性路由应该几乎与搜索和替换一样简单。

如果您不愿意在项目中包含属性路由库，那么不幸的是，唯一的另一种方法是 - 正如您所说 - 注册数十条路由。

# ruby-on-rails - 为什么我的 Devise gem 中的可恢复模块不起作用？

> ID：12957245
> 
> 赞同：0
> 
> 时间：2012-10-18T14:40:34.973
> 
> 标签：ruby-on-rails, devise, password-recovery

我有带有下一个代码的 UserMailer 类：

用户.rb：

```
 devise :database_authenticatable, :registerable,
:recoverable, :rememberable, :trackable, :validatable

  -----------------

 class UserMailer < ActionMailer::Base

 default :from => "denys.medynskyi@gmail.com"

 def password_reset(user, password)
   @user = user
   @password = password
  mail(:to => user.email,
     :subject => 'Password Reset Notification')
  end

  def congrats_email(user)
    mail(to: user.email, subject: "Welcome Message")
 end

 end 
```

setup_mail.rb：

```
 ActionMailer::Base.smtp_settings = {
   :address              => "smtp.gmail.com",
   :port                 => 587,
   :domain               => "gmail.com",
   :user_name            => "denys.medynskyi",
   :password             => "********",
   :authentication       => "plain",
   :enable_starttls_auto => true
    } 
```

并来自 devise.rb：

```
Devise.setup do |config|
  # ==> Mailer Configuration
  config.mailer_sender = "UserMailer"
end 
```

在忘记密码提交后，我转到某个页面，但它没有显示任何通知，并且没有发送电子邮件。

我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T15:24:41.783

I'm not 100% sure this is the cause of any or all of your problems, but if you're trying to work with `Devise`, overriding some of the default mailer behavior but not *all* of it, you should inherit from `Devise::Mailer` rather than `ActionMailer::Base`.

So

```
class UserMailer < Devise::Mailer 
```

Edit: The method that `Devise` calls in `Devise::Mailer` to render the password reset mail template is `reset_password_instructions`. So your method isn't even overwriting that. Also, the way `Devise` works, it's the resource that eventually calls the method that sends the instructions e-mail. The job of the `reset_password_instructions` method is just to generate the e-mail from the view template. So it looks to me like the code you've got above isn't really working with the normal `Devise` flow. What calls `password_reset` in your app?

# jsp - 我的查询字符串为空

> ID：12957246
> 
> 赞同：1
> 
> 时间：2012-10-18T14:40:36.380
> 
> 标签：jsp, query-string

我有一个`jsp`文件，我使用以下 url 发送两个参数。

```
var url = 'abc_user_history.jsp?where='+where+'&stock_number=' + StockNumber;
window.open(url, 'Special_Value_History','toolbar=no,location=no,directories=no,status=no, menubar=no,scrollbars=yes,resizable=yes,width=1500,height=900'); 
```

在这里，我只得到`stock_number`， where is always `null`... 在我有一些 SQL 查询的地方，例如：

```
where=where stock_id like '4575%' and stock_name like 'abc%' 
```

在`abc_user_history.jsp`我总是有 where as `null`。但是我能够获得`stock_number`价值。请建议如何将值传递给...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T15:20:32.397

这里有这么多反模式，我不知道从哪里开始：|

如果您确实需要 where 参数是一个单一的动态参数，您可以传递一个字符串，其中所有对 field=value 由自定义分隔符分隔，然后在 Java 中解析它们（使用 StringTokenizer）并将它们安装在 Where动作中的条件。

where 变量的示例：

where="stock_id:::'4575%';;;stock_name:::'abc%';;;" （::: 表示字段名称已结束，其起始值，;;; 表示该对已结束，您最终将开始读取新对）。

当然，如果您的某些值包含“;;;”，这将中断 或“:::”（你应该先用 javascript 清理它们）。

顺便说一句，这不好，因为您不应该将您的 java 挂载字符串连接到查询字符串，而是将您的标记化值注入 PreparedStatement（因此 PreparedStatement 将为您检查和清理它们）。

但我建议将每个参数作为单个参数传递（不是 ?where= 而是 ?stock_id=xxx&stock_name=yyy&... 在您的 URL 中）。

你应该使用 POST 来发布表单，而不是 GET，它应该只用于阅读页面，而不是发布东西（不能使用 window.open()，但你可以从带有 target="_blank" 的锚点发布表单和 onclick="javascript:document.getElementById['myForm'].submit();")

希望有帮助...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T15:23:55.063

在get params中传query是很危险的，在java中搜索parameterized query，上面有很多文档。你是从javascript调用jsp页面吗？请注意字符串中的引号。

# java - 在支持 Java 类中访问 JSF 中的复合组件属性

> ID：12957250
> 
> 赞同：0
> 
> 时间：2012-10-18T14:40:50.573
> 
> 标签：java, jsf, jsf-2, el, composite-component

我以这种方式访问​​我的复合组件的属性：

```
enum PropertyKeys {comments, currentUserUsername}

@SuppressWarnings("unchecked")
private <T> T getAttribute(PropertyKeys propertyKey){
    return (T) getStateHelper().eval(propertyKey);
}

private <T> void setAttribute(PropertyKeys propertyKey, T value){
    getStateHelper().put(propertyKey, value);
}

private List<Comment> getComments() {
    return getAttribute(PropertyKeys.comments);
}

private String getCurrentUserUsername() {
    return getAttribute(PropertyKeys.currentUserUsername);
} 
```

当我以这种方式传递用户名时，这适用于列表（评论）但不适用于字符串（CurrentUserUsername）：

```
<tr:commentBox comments="#{main.comments}" currentUserUsername="Hans" [...] /> 
```

但是当我这样通过时：

```
<tr:commentBox comments="#{main.comments}" currentUserUsername="#{'Hans'}" [...] /> 
```

有用。

我不希望任何将使用我的组件的人都必须将字符串作为 EL...

有没有解决方案，所以我可以像第一个片段一样传递字符串？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T16:40:03.450

我找到了一个workarround，但我认为我不应该这样做..：

```
@SuppressWarnings("unchecked")
private <T> T getAttribute(PropertyKeys propertyKey){
    T result = (T) getStateHelper().eval(propertyKey);

    if (result == null) {
        result = (T) this.getAttributes().get(propertyKey + "");
    }

    return result;
} 
```

# django - 导入 django_tables2 错误：未解决的导入

> ID：12957252
> 
> 赞同：1
> 
> 时间：2012-10-18T14:40:57.563
> 
> 标签：django, django-forms, django-views

谁能帮我。我刚刚使用easy_install安装了django-tables2，当我尝试`import django_tables2 as tables`在forms.py中它给我错误`unresolved import: tables`然后我尝试再次重新安装django_tables2并给我如下所示的结果。

```
$ easy_install django_tables2
Searching for django-tables2
Best match: django-tables2 0.13.0
Processing django_tables2-0.13.0-py2.7.egg
django-tables2 0.13.0 is already the active version in easy-install.pth

Using c:\python27\lib\site-packages\django_tables2-0.13.0-py2.7.egg
Processing dependencies for django-tables2
Finished processing dependencies for django-tables2 
```

非常感谢您的帮助。

更新的问题。

我仍在努力解决这个问题。我发布了一个关于为什么我无法导入的新错误。通过使用`python manage.py shell`我得到这个错误。我不知道那是什么意思。

```
$ python
Python 2.7.3 (default, Apr 10 2012, 23:31:26) [MSC v.1500 32 bit (Intel)] on win32
Type "help", "copyright", "credits" or "license" for more information.
>>> import django_tables2
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
File "build\bdist.win32\egg\django_tables2\__init__.py", line 3, in <module>
File "build\bdist.win32\egg\django_tables2\tables.py", line 4, in <module>
File "c:\Python27\lib\site-packages\django\db\__init__.py", line 11, in <module>
if DEFAULT_DB_ALIAS not in settings.DATABASES:
File "c:\Python27\lib\site-packages\django\utils\functional.py", line 184, in inner
self._setup()
File "c:\Python27\lib\site-packages\django\conf\__init__.py", line 40, in _setup
raise ImportError("Settings cannot be imported, because environment variable %s is         undefined." % ENVIRONMENT_VARIABLE)
ImportError: Settings cannot be imported, because environment variable     DJANGO_SETTINGS_MODULE is undefined. 
```

任何人都可以帮助我吗？：（非常感谢您的帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-08T14:28:23.300

django_tables 要求您实际上是在 django-"primed" python 环境中运行。您可以通过转到项目目录并键入来访问它

```
python manage.py shell 
```

然后你可以毫无问题地导入 django_tables2 。

有关更多信息，请查看以下内容： [https ://docs.djangoproject.com/en/dev/ref/django-admin/](https://docs.djangoproject.com/en/dev/ref/django-admin/)

请注意，这不是关于管理模板站点（尽管有 url），而是关于 django-admin.py（系统范围）和 manage.py（项目范围）“帮助程序”应用程序。manage.py shell 实际上启动了一个标准的 python shell，其中包含几个预加载的环境变量和一些导入。

# powershell - 过滤powershell中的最后一个环回适配器

> ID：12957253
> 
> 赞同：1
> 
> 时间：2012-10-18T14:41:09.170
> 
> 标签：powershell

我正在编写/编辑/破解一个 powershell 脚本来添加环回适配器。

一旦我添加了新的环回适配器，我需要处理它。我目前这样做：

```
$nic = Get-WmiObject Win32_NetworkAdapterConfiguration -Filter "Description='Microsoft Loopback Adapter'" 
```

但这仅在当前没有任何环回适配器时才有效。如果我已经有一个，然后添加另一个，那么这将返回第一个。我想要的是此列表中的*最后一个*（或最近的）一个，我想取回“Microsoft Loopback adapter #2”，在我想要“Microsoft Loopback adapter #3”之后的时间，等等......

```
DHCPEnabled      : False
IPAddress        : {192.168.1.90}
ServiceName      : msloop
Description      : Microsoft Loopback Adapter
Index            : 17

DHCPEnabled      : True
IPAddress        : {169.254.115.94, fe80::bc90:a8ba:b435:735e}
DefaultIPGateway :
DNSDomain        :
ServiceName      : msloop
Description      : Microsoft Loopback Adapter #2
Index            : 18 
```

这在powershell中可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T16:31:57.010

根据您的结果，我发现对 ServiceName 进行过滤会更可靠：

```
Get-WmiObject Win32_NetworkAdapterConfiguration -Filter "ServiceName='msloop'" | 
Sort-Object Index | 
Select-Object -Last 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T15:58:04.373

尝试这样的事情：

```
Get-WmiObject Win32_NetworkAdapterConfiguration -Filter "Description='Microsoft Loopback Adapter'" | Sort-Object Index -descending | Select-Object -first 1 
```

获取描述为“Microsoft Loopback Adapter”的所有实例，按索引值降序对它们进行排序，然后选择顶部的一个。

# jquery - OnChange() 不会在 JQuery UI 按钮集中触发

> ID：12957262
> 
> 赞同：0
> 
> 时间：2012-10-18T14:41:31.763
> 
> 标签：jquery, jquery-ui

我在 aspx 页面上使用 JQuery Buttonset。我一直在本地机器上成功运行该页面。当我选择两个选项之一时，将调用 alarmChanged() 方法。当我将它部署到 win2008 服务器时，不再触发 onchange。标记如下所示：

```
<td id="ButtonSetMenu" class="buttonSet">
  <div id="AlarmTypeOptions" > 
    <div>
      <input type="radio" id="H" value="1" name="radio" onchange="alarmChanged()"/>
      <label for="H">
        <span id="H" style='background: transparent'">H</span>
        <span style="background:transparent;"> 3</span>
      </label>
    </div>
    <div>
      <input type="radio" id="L" value="2" name="radio" onchange="alarmChanged()"/>
      <label for="L">
        <span id="L" style='background: transparent'">L</span>
        <span style="background:transparent;"> 3</span>
      </label>
    </div>
  </div>  
</td> 
```

关于可能导致这种情况的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T07:33:08.133

您可以使用 jQuery`.change()`事件

```
$('#AlarmTypeOptions :radio').change(function () {
    // do something
    alert($('#AlarmTypeOptions :radio:checked').val());
}); 
```

# android - 如何在android中自动从给定的url获取图像和一些文本？

> ID：12957266
> 
> 赞同：2
> 
> 时间：2012-10-18T14:41:37.887
> 
> 标签：android, url

在 facebook 上，如果我们分享一些 url，facebook 会自动从 url 中获取图像和一些初始文本。知道如何在 android 应用程序中实现这一点（自动从 url 获取图像和一些文本）。

任何帮助将不胜感激。谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T15:05:32.007

您可以为 url 制作一个简单的 HttpRequest，然后过滤 HTML 代码以获取所需的内容。

HttpRequest 的[示例代码-](https://stackoverflow.com/a/6503817/1147466)

```
HttpClient httpclient = new DefaultHttpClient(); // Create HTTP Client
HttpGet httpget = new HttpGet("http://example.com"); // Set the action you want to do
HttpResponse response = httpclient.execute(httpget);
HttpEntity entity = response.getEntity(); 
InputStream is = entity.getContent();
String line = null;
while ((line = reader.readLine()) != null) 
     { sb.append(line + "\n"); }

String resString = sb.toString(); 
is.close(); 
```

Facebook、Google+ 使用元标记作为与图像共享的短信息。对于图像，查找第一个`<img>`标签，然后从中删除 src="" 以获取 url。然后从给定的图像 url 执行 AsyncDownload 以生成可绘制对象 -

```
try
    {
       InputStream is = (InputStream) new URL(src).getContent();
       Drawable d = Drawable.createFromStream(is, "src name");
        return d;
    }catch (Exception e) {  
        return null;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T15:06:57.923

您可以尝试使用 Aquery（类似于 JQuery，但适用于移动设备），该库将为您提供延迟加载技术

```
 OR 
```

您可以创建一个可以以 JSON 形式返回数据的 Web 服务，然后您只需解析 JSON 并获取图像和文本！

希望这可以帮助！！！！！

# javascript - 在javascript中设置父节点

> ID：12957267
> 
> 赞同：0
> 
> 时间：2012-10-18T14:41:39.577
> 
> 标签：javascript, parent, xmlnode

当我通过执行 object.cloneNode(true) 在 javascript 中克隆对象时， parentNode 在新副本中为空。我试图设置它但没有成功。我的代码如下所示：

```
old_DataRoot = DataRoot.cloneNode(true);
old_DataRoot.parentNode=DataRoot.parentNode.cloneNode(true); 
```

也试过：

```
 old_DataRoot = DataRoot.cloneNode(true);
    old_DataRoot.parentNode.appendChild(DataRoot.parentNode.cloneNode(true)); 
```

这两个选项都给了我“old_DataRoot.parentNode 为空或不是对象”我做错了什么？

非常感谢，约尼。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T14:45:01.507

是的，没错，`parentNode`是一个只读属性。

在第二种情况下，您需要知道只有一个节点附加到 DOM。它`dataRoot`仍然有父节点，克隆的结果（你称之为`old_DataRoot`）是未附加的：

```
dataRoot.parentNode.appendChild(newDataRoot = dataRoot.cloneNode(true)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T14:45:48.053

这是你想要做的吗？

```
old_DataRoot = DataRoot.cloneNode(true);
DataRoot.parentNode.appendChild(old_DataRoot); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T15:00:27.940

如果你正在尝试

> 备份原始 DataRoot 以便以后恢复。

然后考虑

```
// Backup
var DataRootBackup = {
    nodes: DataRoot.cloneNode(true),
    parent: DataRoot.parentNode
};

// Restore
DataRootBackup.parent.appendChild( DataRootBackup.nodes ); 
```

# php - 查找和删除DIV，用php编写的页面

> ID：12957268
> 
> 赞同：-5
> 
> 时间：2012-10-18T14:41:41.880
> 
> 标签：php, html

我正在努力寻找去哪里删除网页上的 div。该页面是用 php 编写的，因此当我转到元素检查器时，我可以找到 div 并将其删除，但显然这不会保存，我需要在后端对其进行编辑。这就是我卡住的地方，因为我不知道在哪里可以找到我需要删除的代码。

我是 php 新手，所以那里有一些代码。我正在尝试删除此页面上的 2.40 英镑，因为它显示了两次。 [http://chumpspotter.com/chinapalace/?page_id=5](http://chumpspotter.com/chinapalace/?page_id=5) 我也试图删除表单中的 <.br> 但我不知道它的存储位置。任何帮助将非常感激！

这是代码：

```
>  </td>
>  <td><span class='pricedisplay'>&#163;2.60</span></td>
>  <td class="wpsc_product_price wpsc_product_price_0"><span class="pricedisplay"><span
> class='pricedisplay'>&#163;2.60</span></span></td>
>  <td class="wpsc_product_remove wpsc_product_remove_0">
>  <form action="http://chumpspotter.com/chinapalace/?page_id=5" method="post" class="adjustform remove">
>  <input type="hidden" name="quantity" value="0" /><br />
>  <input type="hidden" name="key" value="0" /><br />
>  <input type="hidden" name="wpsc_update_quantity" value="true" /><br />
>  <input type="submit" value="Remove" name="submit" /><br />
>  </form> 
```

我想删除其中一个“span class=pricedisplay”，但不知道我会在 .php 中的哪个位置查找此内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T18:59:23.770

我建议这些解决方案：

1.  如果该网站是您的，或者无论如何您可以在该页面上工作，请不要`echo`跨度。
2.  如果您无法控制页面，则可能需要使用正则表达式，这无论如何都太复杂了。
3.  如果您不想使用正则表达式，只需将 替换为`<span class="pricedisplay">`不显示输入的跨度：`<span style="display:none;">`。如果您无法修改页面，这是一个简单但功能强大的解决方案。

要删除`<.br>`只需在普通文本编辑器中打开 PHP 代码并使用该`Find and Replace`功能，这很容易。

# php - 在 Nginx 中使用 mail() 导致 504 Gateway Time-out

> ID：12957269
> 
> 赞同：7
> 
> 时间：2012-10-18T14:41:42.510
> 
> 标签：php, email, nginx, debian, sendmail

我刚刚在 debian 6 上安装了 php、mysql、nginx、sendmail。

现在 PHP 页面工作正常。但是当我尝试使用一个简单的`mail()`测试时：

例子：`mail($to, $sub, $msg)`

完成时间太长（大约 30 多秒）然后让我`504 Gateway Time-out`进入我的浏览器。

有趣的是电子邮件实际上是发送的。

顺便说一句，这是日志中的错误： `upstream timed out (110: Connection timed out) while reading response header from upstream`

有谁知道是什么导致了这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-04T08:32:02.420

我认为你的sendmail的问题。我建议安装 Postfix 而不是 sendmail 并在`php.ini`. 然后检查你的`mail()`功能。

您也可以尝试直接使用 sendmail 而不是使用 mail- 功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-16T17:34:21.117

听起来像是 php 联系邮件服务器的能力的问题。您是否验证了以下内容：

iptables 已关闭（或任何其他防火墙）

显示以下内容：

发送邮件配置文件

以及以下命令的输出

`netstat -punta`（这里不叫你名字；））

# c# - HttpListenerReponse 和 PHP POST 请求

> ID：12957274
> 
> 赞同：0
> 
> 时间：2012-10-18T14:41:48.767
> 
> 标签：c#, php, httplistener

这是数据包的外观

```
HTTP/1.1 200 OK
Content-Encoding: gzip
Vary: Accept-Encoding
Date: Thu, 18 Oct 2012 13:52:49 GMT
Server: LiteSpeed
Connection: close
X-Powered-By: PHP/5.3.10
Content-Type: text/html
Content-Length: 35 
```

和

```
HTTP/1.1 200 OK
Content-Length: 35
Content-Type: text/html
Content-Encoding: gzip
Vary: Accept-Encoding
Server: Microsoft-HTTPAPI/2.0
Date: Thu, 18 Oct 2012 14:17:13 GMT
Connection: close 
```

两者的 GZIP 输出是相同的，但使用 PHP 生成的顶部的输出有效，而生成的 HttpListenerResponse 的底部不使用 POST 请求，即使您可以在浏览器中查看两者。我也不叫跨域/端口。

如何使第二个请求起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T18:31:02.540

添加了一些标题删除了一些标题一切都开始工作了！您需要允许访问控制来源，否则它将仅适用于 IE。

# c# - “TextBox”类型的控件“ctl07”必须放在带有 runat=server 的表单标记内。

> ID：12957280
> 
> 赞同：1
> 
> 时间：2012-10-18T14:42:07.260
> 
> 标签：c#, asp.net, .net, runatserver

我有一个问题，你可以在标题中看到。

```
 <form id="form1" runat="server">
    <div>
        <br />
        <asp:GridView ID="GridView1" runat="server">
        </asp:GridView>
        <asp:TextBox ID="mac_id" runat="server"></asp:TextBox>
        <asp:Button ID="Button1" runat="server" onclick="Button1_Click" 
            Text="Temp Ekle" />
    </div>
    </form> 
```

在 aspx.cs 中，我创建了一个表，并将数据库中的一些值插入到这个名为“mac_id”的文本框中。

```
TableCell cel = new TableCell();
mac_id.Text = Convert.ToString(myDataTable.Rows[0][2]);
cel.Controls.Add(mac_id);
rw.Cells.Add(cel); 
```

它在表单标签内，它是 runat="server"。这是使用 mac_id 文本框的代码。没有操作该文本框的代码。我只想向用户显示 id。我没有使用任何渲染控件或文本框有的东西。我也检查了其他解决方案，但他们都在使用渲染或作家我不是那是因为我打开了一个新问题。我希望我能解释我的问题。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T17:41:29.920

您可以通过覆盖 VerifyRenderingInServerForm 来避免这种情况

```
public override void VerifyRenderingInServerForm(Control control)
{
  /* Confirms that an HtmlForm control is rendered for the specified ASP.NET
     server control at run time.
     Hence, no exception. */
} 
```

# winforms - 摆脱单一实例安装的“无法验证发布者” - 可能吗？

> ID：12957281
> 
> 赞同：5
> 
> 时间：2012-10-18T14:42:11.353
> 
> 标签：winforms, visual-studio-2010, visual-studio, code-signing

我有一个我开发并运行的 Windows Forms (C#, SQL Server) 应用程序，一切都很好，除了当我尝试**在我自己的开发工作站上**`Release`运行它的.exe时，它​​发出*“无法验证发布者”*警告。

 ***（当我在模式下从 Visual Studio 运行此应用程序时`Debug`，我没有收到此警告）

我知道[代码签名](https://stackoverflow.com/a/1427930/1731850)，但这个应用程序将只安装在一**台机器**上（直接由我，在客户端的机器上），所以我想也许有一种方法可以摆脱这个警告而不必签署 EXE ，类似于 Microsoft 从 Visual Studio 运行时出现的异常？

注意：仅在单台机器上安装。

这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T13:41:56.877

您是否有机会从网络共享中运行它？

如果是这样，请尝试将其复制到`C:\`文件夹中，看看是否可以解决问题。***

# css - 如何隐藏图像地图区域上的光标

> ID：12957282
> 
> 赞同：2
> 
> 时间：2012-10-18T14:42:10.840
> 
> 标签：css, html, cursor, imagemap, area

[jsFiddle](http://jsfiddle.net/Sqghz/)

我正在为触摸屏制作 Web 应用程序。这意味着我不需要在屏幕上使用鼠标！

我`cursor:none;`用来隐藏整个页面中的光标，但不知何故这不适用于图像地图区域。

每个区域制作如下：

```
<area shape="rect" onclick="buttonPressed_DigitalKeyboard('Q');" coords="14,13,94,93" alt="" href="#"> 
```

当我删除时，光标确实会变为普通指针，`href="#"`但 href 是验证所必需的。

有关示例，请参[见此 Fiddle](http://jsfiddle.net/Sqghz/)

有什么建议么？

* * *

[编辑] 我忘了提：我仅限于谷歌浏览器！（HTML5 文件系统支持和我正在使用的一些其他选项）

* * *

[编辑 2]

技巧：使用 Greger 提到的不透明度为 1 的 1x1 像素似乎也不起作用
[jsFiddle 2](http://jsfiddle.net/Sqghz/5/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T14:55:19.613

[http://jsfiddle.net/BaEks/](http://jsfiddle.net/BaEks/)

添加光标：无；用于区域标签

或者：

```
* {
  cursor: none;
} 
```

[更新]

使用 javascript 代替地图/区域标签

例子：

```
$("img#appkeyboard").click(function(e) {
    var off = $(this).offset();
    var cx = e.clientX - off.left;
    var cy = e.clientY - off.top;
    if (cy > 17 && cy < 99) { // 1 row
        if (cx > 17 && cx < 99) {
            alert("button Q is pressed!");
        } else if (cx > 56 && cx < 202) {
            alert("button W is pressed!");
        }
        // ....
    } else if (cy > 114 && cy < 195) { // 2 row
        if (cx > 52 && cx < 135) {
            alert("button A is pressed!");
        } else if (cx > 155 && cx < 237) {
            alert("button S is pressed!");
        }
        // ....
    } else if (cy > 211 && cy < 291) { // 3 row
        if (cx > 90 && cx < 170) {
            alert("button Z is pressed!");
        }
        // ....
    }
}); 
```

见：http: [//jsfiddle.net/RadVp/1/](http://jsfiddle.net/RadVp/1/)

# r - R for循环和一系列图：始终获得相同的图

> ID：12957284
> 
> 赞同：2
> 
> 时间：2012-10-18T14:42:17.640
> 
> 标签：r, for-loop, ggplot2

我正在尝试从以下数据集和 for 循环中获取一系列图：

```
> head(all5new[c(6,70,22:23)])#This is a snapshot of my dataset. There is more species, see below.
   setID         fishery blackdog smoothdog
11     1 TRAWL-PAND.BOR.        0         0
12     1 TRAWL-PAND.BOR.        0         0
13     1   TRAWL-REDFISH        0         0
14     1 TRAWL-PAND.BOR.        0         0
21    10 TRAWL-PAND.BOR.        0         0
22    10 TRAWL-PAND.BOR.        0         0

> elasmo #This is the list of the species for which I would like to have individual barplots
 [1] "blackdog"     "smoothdog"    "spinydog"     "mako"         "porbeagle"   
 [6] "blue"         "greenland"    "portuguese"   "greatwhite"   "mackerelNS"  
[11] "dogfish"      "basking"      "thresher"     "deepseacat"   "atlsharp"    
[16] "oceanicwt"    "roughsagre"   "dusky"        "sharkNS"      "sand"        
[21] "sandbar"      "smoothhammer" "tiger"        "wintersk"     "abyssalsk"   
[26] "arcticsk"     "barndoorsk"   "roundsk"      "jensensk"     "littlesk"    
[31] "richardsk"    "smoothsk"     "softsk"       "spinysk"      "thorny"      
[36] "whitesk"      "stingrays"    "skateNS"      "manta"        "briersk"     
[41] "pelsting"     "roughsting"   "raysNS"       "skateraysNS"  "allSHARK"    
[46] "allSKATE"     "PELAGIC" 
```

这是我的 for 循环。当我为一个物种运行它时，代码运行良好，但是当我为所有物种运行它时，我总是得到相同的条形图。我知道它必须只是在代码中某处添加例如 [[i]] 的快速修复，但我尝试了不同的东西但没有任何成功。

```
for (i in elasmo) {

  # CALUCLATE THE CATCH PER UNIT OF EFFORT (KG/SET) FOR ALL SPECIES FOR EACH FISHERY
  test<-ddply(all5new,.(fishery),summarize, sets=length(as.factor(setID)),LOGcpue=log((sum(i)/length(as.factor(setID)))))

  #TAKE THE FIRST 10 FISHERY WITH THE HIGHEST LOGcpue
  x<-test[order(-test$LOGcpue)[1:10],]

  #REORDER THE FISHERY FACTOR ACCORDINGLY (FOR GGPLOT2, TO HAVE EACH LEVEL IN ORDER)
  list<-x$fishery
  x$fishery <- factor(x$fishery, levels =list)

  #BAR PLOT
  graph<-ggplot(x, aes(fishery,LOGcpue)) + geom_bar() + coord_flip() +
  geom_text(aes(label=sets,hjust=0.5,vjust=-1),size=4,angle = 270)

  #SAVE GRAPH IN NEW DIR
  ggsave(graph,filename=paste("barplot",i,".png",sep=""))
} 
```

这是融化后我的数据集的一个子集：[mydata](https://www.dropbox.com/s/7814js3po36jf48/data.RData)。

```
> data.melt<-melt(all5new, id.vars=c("tripID","setID","fishery"), measure.vars = c(22:23))
> head(data.melt);dim(data.melt)
  tripID setID         fishery variable value
1      1     1 TRAWL-PAND.BOR. blackdog     0
2      1     1 TRAWL-PAND.BOR. blackdog     0
3      1     1   TRAWL-REDFISH blackdog     0
4      1     1 TRAWL-PAND.BOR. blackdog     0
5      1    10 TRAWL-PAND.BOR. blackdog     0
6      1    10 TRAWL-PAND.BOR. blackdog     0
[1] 350100      5 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T16:10:08.540

这是我用于生成大量图表的工作流程，适用于您的数据集（或者，我对它的解释）。`plyr`我认为，这很好地说明了 的力量。对于您的应用程序，我认为计算时间并不重要。对您来说更重要的是生成易于阅读的代码，我认为 plyr 对此有好处。

```
#Load packages
require(plyr)
require(reshape)
require(ggplot2)

#Recreate your data set, with only two species
setID <- rep(1:5, each=4, times=1)
fishery <- gl(10, 2)
blackdog <- sample(1:5, size=20, replace=TRUE)
smoothdog <- sample(1:5, size=20, replace=TRUE)
df <- data.frame(setID, fishery, blackdog, smoothdog)

#Melt the data frame
dfm <- melt(df, id.vars <- c("setID", "fishery"))

#Calculate LOGcpue for each fish at each fishery

cpueDF <- ddply(dfm, c("fishery", "variable"), summarise, LOGcpue = log(sum(value)/length(value)))

#Plot all the data in one (potentially huge) faceted plot.
#(I often use huge plots like this for onscreen analysis 
#  - obviouly it can't be printed in practice, but you can get a visual overview of the data)
ggplot(cpueDF, aes(x=fishery, y=LOGcpue)) + geom_bar() + coord_flip() + facet_wrap(~variable)
ggsave("giant plot.pdf", height=30, width=30, units="in")

#Print each plot individually to screen, and save it, and put it in a list
printGraph <- function(df) {
  p <-ggplot(df, aes(x=fishery, y=LOGcpue)) +
geom_bar() + coord_flip()
  print(p)
  fn <- paste(df$variable[1], ".png")
  ggsave(fn)
  printGraph <- p
}
plotList <- dlply(cpueDF, .(variable), printGraph)

#Now pick out the top n fisheries for each fish
cpueDFtopN <- ddply(cpueDF, .(variable), function(x) head(x[order(x$LOGcpue, decreasing=T),], n=5))
ggplot(cpueDFtopN, aes(x=fishery, y=LOGcpue)) + geom_bar() + 
  coord_flip() + facet_wrap(~variable, scales="free") 
```

![在此处输入图像描述](../Images/5a19170f90c5ef020283ef16ecf8ae35.png)

# asp.net - asp.net 在打开弹出窗口之前检查 url 是否存在

> ID：12957295
> 
> 赞同：1
> 
> 时间：2012-10-18T14:42:38.750
> 
> 标签：asp.net

目前我有以下在 ButtonClick 上运行的代码：

```
Page.ClientScript.RegisterStartupScript(this.GetType(), "OpenWindow", 
"window.open('" + DocumentData.Tables[0].Rows[0]["WebAddress"].ToString() 
                + "','_blank');", true); 
```

它打开带有来自数据库的给定链接的弹出窗口（通常是文档或图像或视频的链接）。但是我需要稍微修改一下代码，我不知道应该使用哪些方法：

1）我需要检查 url 是否真的存在（如果 URL 是响应式的），如果不是，则不打开弹出窗口，但显示一些消息。这里不知道怎么检查Url是否存在？例如，如果 url 类似于 www.thesitedoesntexists.com，则不要加载弹出窗口。

2) 如果 url 的格式为 www.yahoo.com 而不是[http://www.yahoo.com](http://www.yahoo.com)或[https://someurl.com](https://someurl.com)，则上述内容不起作用。

如果我的 Web 应用程序`www.myapplication.com`在上述场景中，系统会打开 url`www.myapplication.com/www.yahoo.com`而不是`www.yahoo.com`. 如何处理？它可能与问题＃1有关。这是主要问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T14:46:13.113

以下代码（未经测试）应完成这些任务：

1.  将验证 url 是否已定义
2.  将确保它具有 http:// 或 https://
3.  将通过 HttpRequest 验证 URL 是否存在
4.  将显示加载了 URL 的弹出窗口，或者如果 URL 未定义或不存在，则会显示警告警报。

按钮单击处理程序代码：

```
string url = DocumentData.Tables[0].Rows[0]["WebAddress"].ToString();
string script;

if (!string.IsNullOrEmpty(url))
{
    // prepend http to url if it isn't there.
    if(!url.ToLower().StartsWith("http://") || !url.ToLower().StartsWith("https://"))
    {
        url = "http://" + url;
    }

    // verify URL exists:
    if (UrlExists(url))
    {
        script = "window.open('" + url  + "','_blank');";   
    }
    else
    {
        script = "alert('URL does not exist')";
    }
}
else
{
    script = "alert('No URL specified!')";
}

Page.ClientScript.RegisterStartupScript(this.GetType(), "WindowScript", script, true); 
```

并在您的类中定义以下 URL 检查方法：

```
public static bool UrlExists(string url)
{
   try
   {
      var request = WebRequest.Create(url) as HttpWebRequest;
      if (request == null) return false;
      request.Method = "HEAD";
      using (var response = (HttpWebResponse)request.GetResponse())
      {
         return response.StatusCode == HttpStatusCode.OK;
      }
   }
   catch (UriFormatException)
   {
      //Invalid Url
      return false;
   }
   catch (WebException)
   {
      //Unable to access url
      return false;
   }
} 
```

我将 UrlExists 方法完全归功于： [http ://paigecsharp.blogspot.ca/2011/01/verify-url-exists.html](http://paigecsharp.blogspot.ca/2011/01/verify-url-exists.html)

# php - 如何删除 PHP 字符串变量上的字符“�”

> ID：12957296
> 
> 赞同：0
> 
> 时间：2012-10-18T14:42:39.467
> 
> 标签：php, encoding

我试图从字符串变量中删除一个出现在空格之间的字符，我使用了一些 PHP 函数来做到这一点，`str_replace`但没有任何反应。

下面是一个例子，我通过 var_dump PHP 函数来展示它：

```
string '�I�N�S�E�R�T� �[�d�b�o�]� 
```

如果有人能告诉我这样做的方法，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T14:44:54.817

那是一个简单的字符串翻译操作（[Demo](http://codepad.org/E4sYOdrG)）：

```
$string = '�I�N�S�E�R�T� �[�d�b�o�]�';
echo strtr($string, array('�' => '')); 
```

输出：

```
INSERT [dbo] 
```

但是，您可能会遇到问题，即实际上不知道哪个字符需要您首先正确获取字符串。因此，在之后更换它只是错误的地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T14:47:43.603

你可以试试：

```
$str = '�I�N�S�E�R�T� �[�d�b�o�]�';
$filtered_str = filter_var($str, FILTER_SANITIZE_STRING, FILTER_FLAG_STRIP_LOW | FILTER_FLAG_STRIP_HIGH) 
```

[演示](http://codepad.org/xlcXOLuM)。请参阅：[filter-var](http://php.net/manual/en/function.filter-var.php)和[filter.filters.sanitize](http://www.php.net/manual/en/filter.filters.sanitize.php)

# c++ - 序列化枚举的正确且可移植的方法

> ID：12957301
> 
> 赞同：3
> 
> 时间：2012-10-18T14:42:49.553
> 
> 标签：c++, c

我需要序列化要通过网络发送的枚举值。发送部分使用 C 语言并在 8 位微控制器上运行，没有可用的协议缓冲区或类似库。接收部分使用 C++ (Linux)。我尝试了以下方法：

```
enum enum_x {
    V1 = 1,
    V2 = 2,
};

enum enum_y {
    V3 = 1,
    V4 = 2,
    V5 = 3,
};

enum enum_z {
    V6 = 1,
    V7 = 2,
    V8 = 3,
};

uint8_t serialize_enums(enum_x x, enum_y y, enum_z z) {
    return x * 100 + y * 10 + z;
} 
```

但这似乎无效。它在我的 Linux 机器上工作正常，但在 8 位系统上结果不正确（y 值似乎存储为 z 并且 z 值丢失）。我试图添加演员表：

```
return (uint8_t)x * 100 + (uint8_t)y * 10 + (uint8_t)z; 
```

但它没有帮助。什么是正确的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T14:49:44.940

If you want to send them in an `8-bit` field, allow for values between 0-3 for each `enum`, I would do something like this:

```
#include <iostream>
#include <cstdint>

struct s_enum_t
{
   s_enum_t(
      int x,
      int y,
      int z)
      : x_(x)
      , y_(y)
      , z_(z)
   {}

   union
   {
      struct
      {
         uint8_t x_ : 2;
         uint8_t y_ : 2;
         uint8_t z_ : 2;
         uint8_t spare_ : 2;
      };
      uint8_t val;
   };
};

int main()
{
   s_enum_t v(1, 1, 1);

   std::cout << v.val << "\n";
} 
```

That will get the values laid out in a very specific manner. When sending between different systems you have to be aware of the endian scheme for each system though.

To clarify, with each individual enumerated value laid out in `2-bits`, it becomes easier to troubleshoot issues between the sending and receiving systems. In this particular case, you have to be familiar with how this will be laid out on each system (by the compiler) to know how to properly decode the values. Having individual values in a bitfield that can be printed out (for debugging purposes) allows you to easily identify which fields are which when doing the initial system integration testing.

# php - 会话未在 php 函数中创建

> ID：12957307
> 
> 赞同：2
> 
> 时间：2012-10-18T14:43:15.877
> 
> 标签：php, session

我正在尝试使用 ajax 和 php 函数在 php 中创建一个登录页面。我正在尝试在函数中创建一个会话。我无法让它发挥作用。这基本上就是我想要做的

ajax代码是

```
$.post("process.php?do=createSession", 
function(data) {alert("Data Loaded: " + data);}); 
```

在 process.php 我得到了这个脚本

```
include ( 'bod_function.php' ); 
$process_func = $_REQUEST['do'];
echo BODeal::$process_func(); 
```

在 bod_function.php 我得到了这个运行

```
class BODeal {
public static function createSession() {
    session_start();
    $_SESSION['test']='Success';
    return 'yeah';
   }
} 
```

我让警报框运行并说`'yeah'`但是`$_SESSION['test']`是空的。没有创建会话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T14:48:47.783

会话需要在您打开的每个新页面中开始。我认为您想要做的是从您调用的页面开始会话并将其留空。然后，当您进行 AJAX 调用时，您将需要再次启动会话，就像您一样，然后设置：

```
$_SESSION['test']='Success'; 
```

When you have a session in PHP each page that is included in the session needs a call to [`session_start()`](http://us1.php.net/manual/en/function.session-start.php) before the global `$_SESSION` can be accessed.

# ruby-on-rails-3 - Rails 3 的多态 has_one 关联和多重继承

> ID：12957308
> 
> 赞同：0
> 
> 时间：2012-10-18T14:43:22.543
> 
> 标签：ruby-on-rails-3, inheritance, polymorphic-associations, has-one

我看过一些处理这个问题的帖子，并试图确定最佳解决方案。

从语义上讲，我想要一个与调查具有一对一关系的客户模型。有不同类型的调查具有不同的领域，但我想在它们之间共享大量代码。由于不同的字段，我想要用于调查的不同数据库表。无需搜索不同类型的调查。感觉就像我想要 Client 表中的外键用于快速检索和潜在的调查加载。

所以理论上我*想*我想要多态的 has_one 和多重继承是这样的：

```
class Client < ActiveRecord::Base
  has_one :survey, :polymorphic => true
end

class Survey
  # base class of shared code, does not correspond to a db table
  def utility_method
  end
end

class Type1Survey < ActiveRecord::Base, Survey
  belongs_to :client, :as => :survey
end

class Type2Survey < ActiveRecord::Base, Survey
  belongs_to :client, :as => :survey
end

# create new entry in type1_surveys table, set survey_id in client table
@client.survey = Type1Survey.create()

@client.survey.nil?            # did client fill out a survey?
@client.survey.utility_method  # access method of base class Survey
@client.survey.type1field      # access a field unique to Type1Survey

@client2.survey = Type2Survey.create()
@client2.survey.type2field     # access a field unique to Type2Survey
@client2.survey.utility_method 
```

现在，我知道 Ruby 不支持多重继承， :has_one 也不支持 :polymorphic。那么有没有一种干净的 Ruby 方法来实现我的目标？我觉得它几乎就在那里...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T15:22:41.507

这是我将如何做到这一点：

```
class Client < ActiveRecord::Base
  belongs_to :survey, :polymorphic => true
end

module Survey
  def self.included(base)
    base.has_one :client, :as => :survey
  end

  def utility_method
     self.do_some_stuff
  end
end

Type1Survey < ActiveRecord::Base
  include Survey

  def method_only_applicable_to_this_type
    # do stuff
  end
end

Type2Survey < ActiveRecord::Base
  include Survey
end 
```

# android - 模拟器没有运行

> ID：12957309
> 
> 赞同：3
> 
> 时间：2012-10-18T14:43:23.197
> 
> 标签：android, android-emulator

我已经使用 api 16 创建了一个与地图相关的应用程序，一旦运行此应用程序就会弹出此错误。

```
 [2012-10-18 20:05:26 - Maps] Android Launch!
      [2012-10-18 20:05:26 - Maps] adb is running normally.
      [2012-10-18 20:05:26 - Maps] Performing com.example.maps.MainActivity activity launch
      [2012-10-18 20:05:29 - Maps] Launching a new emulator with Virtual Device 'andi'
      [2012-10-18 20:05:38 - Emulator] could not get wglGetExtensionsStringARB
      [2012-10-18 20:05:38 - Emulator] could not get wglGetExtensionsStringARB
      [2012-10-18 20:05:38 - Emulator] could not get wglGetExtensionsStringARB
      [2012-10-18 20:05:38 - Emulator] could not get wglGetExtensionsStringARB
      [2012-10-18 20:05:38 - Emulator] could not get wglGetExtensionsStringARB
      [2012-10-18 20:05:38 - Emulator] could not get wglGetExtensionsStringARB
      [2012-10-18 20:05:38 - Emulator] could not get wglGetExtensionsStringARB
      [2012-10-18 20:05:38 - Emulator] Failed to create Context 0x3005
      [2012-10-18 20:05:38 - Emulator] could not get wglGetExtensionsStringARB
      [2012-10-18 20:05:38 - Emulator] emulator: WARNING: Could not initialize OpenglES emulation, using software renderer.
      [2012-10-18 20:05:38 - Emulator] emulator: WARNING: Requested RAM size of 1024MB is too large for your environment, and is reduced to 768MB.
      [2012-10-18 20:05:38 - Emulator] Failed to allocate memory: 1455
      [2012-10-18 20:05:38 - Emulator] 
      [2012-10-18 20:05:38 - Emulator] This application has requested the Runtime to terminate it in an unusual way.
      [2012-10-18 20:05:38 - Emulator] Please contact the application's support team for more information. 
```

当我使用 api 14 运行此应用程序时，它可以工作，但不能在 api 15 和 16 上工作

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-28T08:29:57.140

我将虚拟设备的 VM 堆更改为更高的值 - 这为我解决了崩溃问题。现在的值是：10.1" WXGA 1280 x 800，Android 4.1.2，Intel Atom，Ram 1024，VM Heap 128，内部存储 300 MB，SD 300 MB 此外，我在 eclipse 中更改了内存的启动设置。 ini，但我不确定这是否与问题有关。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-30T14:06:37.253

好的，我知道这对您来说为时已晚，但它可能对其他人有所帮助。我尝试了所有给出的解决方案，但没有一个对我有用

谷歌把我带到这里 [http://code.google.com/p/android/issues/detail?id=33336](http://code.google.com/p/android/issues/detail?id=33336) 给出的解决方案适用于许多人，但不适用于我。我把它包括在这里，因为也许对你有帮助

openGL 在错误的文件夹中： \tools 而不是 \tools\lib 将以下文件复制到工具文件夹：

```
libEGL_translator.dll
libGLES_CM_translator.dll
libGLES_V2_translator.dll
libOpenglRender.dll 
```

然而，在帖子末尾使用“Zachary 的技术”对于那些无法完成这项工作的人。去获取进程监视器（[http://technet.microsoft.com/en-us/sysinternals/bb896645](http://technet.microsoft.com/en-us/sysinternals/bb896645)）。为“进程名称”+“包含”+“模拟器”添加过滤器：* 开始捕获 * 启动模拟器 * 等到收到失败消息 * 停止捕获

搜索 (ctrl + f) 捕获无法加载的 dll 之一，例如“libOpenglRender”。您可能会看到多次尝试在多个目录中定位此文件，结果是“未找到名称”或“未找到路径”。

使用这个我发现我遇到了 atiglpxx.dll 的问题

我在我的 Windows 设备管理器上查看了我的显示适配器，并从 AMD [http://support.amd.com/us/psearch/Pages/psearch.aspx?type=2.4下载了我的 ATI Modility Radeon HD 2400 XT 驱动程序.2&product=2.4.2.3.15&contentType=GPU+Download+Detail&ostype=Windows+8+-+32-Bit+Edition&keywords=&items=20](http://support.amd.com/us/psearch/Pages/psearch.aspx?type=2.4.2&product=2.4.2.3.15&contentType=GPU+Download+Detail&ostype=Windows+8+-+32-Bit+Edition&keywords=&items=20)

安装后，我不再收到“无法获取 wglGetExtensionsStringARB”消息

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T14:49:58.110

Disable **GPU emulation** by setting it to off in the AVD preferences or by adding `-gpu off` to command line

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T15:01:44.277

转到您的 AVD 管理器，选择您尝试使用的 AVD，然后将 Target 下拉列表更改为“Google APIs (Google Inc.) - API Level 16”。然后保存并重新启动。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-18T14:51:41.970

也许，您的应用程序需要 OpenGL 2.0，模拟器直到最近才支持它。

[Android OpenGL ES 2.0 模拟器](https://stackoverflow.com/questions/8941016/android-opengl-es-2-0-emulator) 检查此链接

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-07-20T00:43:28.113

您必须使用您的 android 设备规范，如 RAN、Heap 和其他规范。

很难告诉你哪个必须设置为什么。在我的情况下，我将 RAM 设置为 512 和堆 128 以使其工作。

# c# - c#如何逐行读取和写入多行文本框？

> ID：12957318
> 
> 赞同：19
> 
> 时间：2012-10-18T14:43:46.407
> 
> 标签：c#, string, text, textbox, line

我有一个简单的程序，它具有在我按下按钮时从多行文本框中读取一行的功能，我要做的是这段代码：

```
TextReader read = new System.IO.StringReader(textBox1.Text);
int rows = 100;

string[] text1 = new string[rows];
for (int r = 1; r < rows; r++)
{
    text1[r] = read.ReadLine();
} 
```

因此，当单击 button1 时，代码将如下所示：

```
textBox2=text1[1]; 
```

[1] 表示第一行我如何通过单击自动完成？或单击第一行到 textBox2 第二行到 textBox3 .....等..

PLZ我想要代码，我应该把它放在哪里^_^

或者如果有其他方法可以做到这一点

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-18T14:46:06.473

物业[Lines](http://msdn.microsoft.com/en-us/library/system.windows.forms.textboxbase.lines.aspx)为您服务

```
if(textBox1.Lines.Length > 0)
    textBox2.Text=textBox1.Lines[0]; 
```

或者，将您的文本框排序在一个临时数组中并在它们上循环（当然我们应该始终检查 textBox1 中存在的行数）

```
TextBox[] text = new TextBox[] {textBox2, textBox3, textBox4};
if(textBox.Lines.Length >= 3)
{
    for(int x = 0; x < 3; x++) 
       text[x] = textBox1.Lines[x];
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-01-31T04:16:01.057

简单的编程从 C# 中的多行文本框读取和写入一行一行

一行一行地写：

```
textbox1.AppendText("11111111+");
textbox1.AppendText("\r\n222222222");
textbox1.AppendText("\r\n333333333");
textbox1.AppendText("\r\n444444444");
textbox1.AppendText("\r\n555555555"); 
```

逐行阅读：

```
for (int i = 0; i < textbox1.Lines.Length; i++)
{
    textbox2.Text += textbox1.Lines[i] + "\r\n";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-10T13:11:00.543

您可以使用以下代码段从多行文本框中读取逗号分隔和换行符分隔的值 -

```
 if (!string.IsNullOrEmpty(Convert.ToString(txtBoxId.Text)))
        {
            string IdOrder = Convert.ToString(txtBoxId.Text.Trim());

            //replacing "enter" i.e. "\n" by ","
            string temp = IdOrder.Replace("\r\n", ",");            

            string[] ArrIdOrders = Regex.Split(temp, ",");

            for (int i = 0; i < ArrIdOrders.Length; i++)
            {
              //your code
            }
         } 
```

我希望这会对你有所帮助。

# video - ffmpeg幻灯片无法正常工作

> ID：12957320
> 
> 赞同：2
> 
> 时间：2012-10-18T14:43:54.677
> 
> 标签：video, ffmpeg

我正在尝试基于两个图像（'ocean001.jpg' 和'ocean002.jpg'）创建一个简单的幻灯片视频。我正在使用 ffmpeg 文档中列出的命令，但我总是得到一个持续 15 秒的空白（例如黑色）视频文件。

我已检查确认这两个图像文件的大小相同。两者都是 1024x768px。也没有报告错误。

谁能告诉我我做错了什么？

这是我正在使用的命令的输出：

```
ffmpeg -f image2 -r 1/15 -i ocean%03d.jpg -vcodec libx264 out.mp4 
```

以下是上述命令的输出：

```
ffmpeg version 1.0 Copyright (c) 2000-2012 the FFmpeg developers
  built on Sep 29 2012 11:22:50 with gcc 4.7.1 (GCC) 20120721 (prerelease)
  configuration: --prefix=/usr --enable-libmp3lame --enable-libvorbis --enable-libxvid --enable-libx264 --enable-libvpx --enable-libtheora --enable-libgsm --enable-libspeex --enable-postproc --enable-shared --enable-x11grab --enable-libopencore_amrnb --enable-libopencore_amrwb --enable-libschroedinger --enable-libopenjpeg --enable-librtmp --enable-libpulse --enable-libv4l2 --enable-gpl --enable-version3 --enable-runtime-cpudetect --disable-debug --disable-static
  libavutil      51\. 73.101 / 51\. 73.101
  libavcodec     54\. 59.100 / 54\. 59.100
  libavformat    54\. 29.104 / 54\. 29.104
  libavdevice    54\.  2.101 / 54\.  2.101
  libavfilter     3\. 17.100 /  3\. 17.100
  libswscale      2\.  1.101 /  2\.  1.101
  libswresample   0\. 15.100 /  0\. 15.100
  libpostproc    52\.  0.100 / 52\.  0.100
Input #0, image2, from 'ocean%03d.jpg':
  Duration: 00:00:30.00, start: 0.000000, bitrate: N/A
    Stream #0:0: Video: mjpeg, yuvj444p, 1024x768 [SAR 72:72 DAR 4:3], 1 tbr, 0.07 tbn, 0.07 tbc
[libx264 @ 0x22debc0] using SAR=1/1
[libx264 @ 0x22debc0] using cpu capabilities: MMX2 SSE2Fast SSSE3 FastShuffle Cache64
[libx264 @ 0x22debc0] profile High, level 3.1
[libx264 @ 0x22debc0] 264 - core 124 - H.264/MPEG-4 AVC codec - Copyleft 2003-2012 - http://www.videolan.org/x264.html - options: cabac=1 ref=3 deblock=1:0:0 analyse=0x3:0x113 me=hex subme=7 psy=1 psy_rd=1.00:0.00 mixed_ref=1 me_range=16 chroma_me=1 trellis=1 8x8dct=1 cqm=0 deadzone=21,11 fast_pskip=1 chroma_qp_offset=-2 threads=1 sliced_threads=0 nr=0 decimate=1 interlaced=0 bluray_compat=0 constrained_intra=0 bframes=3 b_pyramid=2 b_adapt=1 b_bias=0 direct=1 weightb=1 open_gop=0 weightp=2 keyint=250 keyint_min=1 scenecut=40 intra_refresh=0 rc_lookahead=40 rc=crf mbtree=1 crf=23.0 qcomp=0.60 qpmin=0 qpmax=69 qpstep=4 ip_ratio=1.40 aq=1:1.00
Output #0, mp4, to 'out.mp4':
  Metadata:
    encoder         : Lavf54.29.104
    Stream #0:0: Video: h264 ([33][0][0][0] / 0x0021), yuvj420p, 1024x768 [SAR 1:1 DAR 4:3], q=-1--1, 1 tbn, 0.07 tbc
Stream mapping:
  Stream #0:0 -> #0:0 (mjpeg -> libx264)
Press [q] to stop, [?] for help
frame=    2 fps=0.0 q=17.0 Lsize=     215kB time=00:00:30.00 bitrate=  58.7kbits/s    
video:214kB audio:0kB subtitle:0 global headers:0kB muxing overhead 0.363298%
[libx264 @ 0x22debc0] frame I:1     Avg QP:16.68  size:132919
[libx264 @ 0x22debc0] frame P:1     Avg QP:14.27  size: 85767
[libx264 @ 0x22debc0] mb I  I16..4:  0.0% 100.0%  0.0%
[libx264 @ 0x22debc0] mb P  I16..4:  8.1% 82.9%  9.0%  P16..4:  0.0%  0.0%  0.0%  0.0%  0.0%    skip: 0.0%
[libx264 @ 0x22debc0] 8x8 transform intra:91.5% inter:100.0%
[libx264 @ 0x22debc0] coded y,uvDC,uvAC intra: 97.6% 96.7% 80.8% inter: 100.0% 100.0% 100.0%
[libx264 @ 0x22debc0] i16 v,h,dc,p:  1%  3%  1% 96%
[libx264 @ 0x22debc0] i8 v,h,dc,ddl,ddr,vr,hd,vl,hu: 12% 18% 28%  7%  5%  5%  7%  7% 11%
[libx264 @ 0x22debc0] i4 v,h,dc,ddl,ddr,vr,hd,vl,hu: 26% 16% 12%  8% 10%  8%  6%  8%  5%
[libx264 @ 0x22debc0] i8c dc,h,v,p: 39% 25% 16% 20%
[libx264 @ 0x22debc0] Weighted P-Frames: Y:0.0% UV:0.0%
[libx264 @ 0x22debc0] kb/s:58.32 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T08:20:25.200

您还必须在输出上设置速率

```
ffmpeg -r 1/15 -i ocean%03d.jpg -r 30 out.mp4 
```

# php - 无法让查询工作

> ID：12957327
> 
> 赞同：0
> 
> 时间：2012-10-18T14:44:06.137
> 
> 标签：php, mysql, sql, mysqli

我有一个包含 3 个表（成员、船、船类型）的数据库，并且在下面的方法中，其中两个受到影响。我想要列出在会员上注册的所有船只，但代码有问题（至少是 SQL，但我怀疑这还不是全部）。

提前致谢。

**船处理程序.php：**

```
public function GetMembersBoats($memberId) {

    $query = "SELECT b.boatId, b.length, bt.type
                  FROM boat AS b
                      INNER JOIN member AS m
                          ON b.memberId = m.memberId
                              WHERE m.memberId = ?
                      INNER JOIN boatType AS bt
                          ON b.boatTypeId = bt.boatTypeId
                      GROUP BY b.boatId";

    $stmt = $this->m_db->Prepare($query);
    $stmt->bind_param('i', $memberId);

    $boats = $this->m_db->GetBoats($stmt);
} 
```

**数据库.php：**

```
public function GetBoats($stmt) {
    $boats = array(
            0 => array(),
            1 => array(),
            2 => array()
        );

    $stmt->execute();

    $stmt->bind_result($boatId, $length, $type);

    while ($stmt->fetch()) {
        array_push($boats[0], $boatId);
        array_push($boats[1], $length);
        array_push($boats[2], $type);
    }

    $stmt->Close();

    return $boats;
} 
```

### 受影响的表：

*   **船：** boatId，boatTypeId，长度，memberId
*   **船型：**船型ID，类型

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T14:45:34.710

该`WHERE`子句必须列在表引用之后。您必须在 and 之后将 移到表`WHERE m.memberId = ?`引用的末尾，如下所示：`FROM``JOIN`

```
SELECT b.boatId, b.length, bt.type
FROM boat AS b
      INNER JOIN member AS m
          ON b.memberId = m.memberId

      INNER JOIN boatType AS bt
          ON b.boatTypeId = bt.boatTypeId
WHERE m.memberId = ?
GROUP BY b.boatId 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T14:48:07.970

在 on 子句中，只需将 'where' 替换为 'and'：

```
SELECT b.boatId, b.length, bt.type
              FROM boat AS b
                  INNER JOIN member AS m
                      ON b.memberId = m.memberId
                          AND m.memberId = ?
                  INNER JOIN boatType AS bt
                      ON b.boatTypeId = bt.boatTypeId
                  GROUP BY b.boatId 
```

# hibernate - Grails：获取/解决“无法将数据库状态与会话同步”？

> ID：12957329
> 
> 赞同：0
> 
> 时间：2012-10-18T14:44:07.157
> 
> 标签：hibernate, session, grails

这个问题的根源是，什么会导致同步失败？这是一条通用消息，仅表示“出了点问题”，还是会话本身确实有问题？ **有一些具有相似标题的线程，但似乎没有一个真正解决为什么 hibernate 无法同步会话**，这只是人们忽略的错误消息的一部分。

我的具体案例/详细信息（尽管它与上述问题确实相切）：

在数据导入期间（20-120 分钟），我正在进行大量处理。直到整个域对象集被构建并验证一致性后，持久性才开始。在这段时间里，我构建了大约 200,000 个域对象。在该过程结束时，它会在它们之间循环，将它们全部保存到数据库中，并（出于性能原因）在每 50 或 100 个对象后刷新/清除会话。一旦持久化开始，域对象就不会改变。

这一切都发生在单个服务调用、单个事务中。我也无法在我的测试系统上重现它，它只发生在生产中。

我正在使用`domainObj.save()`而不是`session.saveOrUpdate(domainObj)`，我唯一一次手动触摸会话是在一组更新后刷新/清理它：

```
def session = sessionFactory.currentSession
session.flush()
session.clear() 
```

这是抛出异常的地方。

同步失败消息之后立即是（可能是结果，但可能与原因有关）：

```
Could not execute JDBC batch update; SQL [insert into domainB(field1, field2, etc) values (?, ?, ?)];  
nested exception is org.hibernate.exception.ConstrainViolationException: Could not execute JDBC batch update 
```

我意识到这个 ConstrainViolation（是的，“constrain”而不是“constraint”）似乎是一个数据错误，但是数据集一直在工作，并且没有更改导入文件或代码，就开始抛出这个错误。它还在其他系统上继续工作，所以我已经在一定程度上排除了数据错误。

由于对象关系的性质，我几乎可以肯定相同的对象会被多次保存。这是性能改进的另一个地方，但我认为是无关的，因为一旦对象被保存，它应该分配它的 ID，并且重新保存不应该导致错误。

在这一点上我已经离题了，我不希望有人为我解决我的问题，但希望有人明确了解同步会话而不是“你确定你没有插入重复数据吗？ " 因为我尽可能确定（使用受约束的唯一字段作为查找要保存的域对象的键来迭代 Hashmap.keySet()）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T12:15:03.507

不幸的是，我仍然不知道如何实际调试“无法将数据库状态与会话同步”，但我最终能够解决这个问题。

显然，数据库使用的 Oracle 表空间并未设置为增长，而是已填满。一旦表空间被设置为“可扩展”，这个错误就消失了。我非常怀疑这会帮助遇到同样问题的其他人，因为错误消息不适用，但是，你永远不知道。

# ios - 从 klazuka/Kal 日历中删除默认选择

> ID：12957331
> 
> 赞同：0
> 
> 时间：2012-10-18T14:44:07.500
> 
> 标签：ios, cocoa-touch, uiview

有人用这个日历吗？有没有办法从中删除第一天的选择？我想在更改日期时在日历框架上放置一个动画（显示/隐藏），但是当月份更改时，此事件也会触发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T08:22:06.133

已解决，只需删除 self.selectedTile = [frontMonthView firstTileOfMonth]; 从 KalGridView 文件上的幻灯片方法

# symfony - 无法在没有段错误的情况下在资产中使用过滤器 uglifyjs

> ID：12957333
> 
> 赞同：2
> 
> 时间：2012-10-18T14:44:16.223
> 
> 标签：symfony, assetic, uglifyjs

看来我不能**`uglifyjs`**在 Symfony2 上下文中使用带有资产的过滤器，因为它似乎会导致**分段错误**。

```
php app/console assetic:dump 
Dumping all dev assets.
Debug mode is off.

16:35:02 [file+] ...../../web/css/compiled_50f84d1.css
16:35:02 [file+] ...../../web/js/compiled_e371e27.js

Segmentation fault: 11 
```

我的配置看起来像：

```
assetic:
    debug:            false
    use_controller:   false
    read_from:        %kernel.root_dir%/../web
    write_to:         %kernel.root_dir%/../web
    bundles: []                                 # disable bundles parsing
    node:             /usr/local/bin/node

    filters:
        cssmin: ~
        uglifyjs: ~ 
```

我的观点：

```
{% javascripts 'js/all.js' 'js/player.js' filter='uglifyjs' output='js/compiled_*.js' %}
    <script src="{{ asset_url }}"></script>
{% endjavascripts %} 
```

一旦我禁用过滤器，我就不再有错误。我有一个全新的节点安装，我有`uglify-js@1.3.3 node_modules/uglify-js`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T20:38:28.280

我不知道这是否会对您有所帮助，但这就是我`uglifyjs`在我的设置中`config_prod.yml`使其仅在生产中工作的方式：

```
assetic:
    filters:
        uglifyjs:
            bin: /usr/local/bin/uglifyjs
            no_copyright: true
            apply_to: ["\.coffee$", "\.js$"] 
```

感谢`apply_to`您不需要`filter='uglifyjs'`在`{% javascripts ... %}`标签中使用。

# symfony - 在 Symfony 2 中禁用输入值的自动翻译

> ID：12957336
> 
> 赞同：4
> 
> 时间：2012-10-18T14:44:23.047
> 
> 标签：symfony, symfony-2.1

Symfony2 自动转换十进制或整数类型的输入字段值。我的应用程序有两种语言：阿拉伯语和英语我创建了一个具有以下字段的实体：

```
/**
 * @var float $price
 *
 * @ORM\Column(name="price", type="decimal", scale=2, nullable=true)
 * 
 * @Assert\Regex(pattern="/^[0-9]+(\.\d{1,2})?$/",message="Incorrect price.")
 * @Assert\Type(type="float")
 * @Assert\Min(0)
 */
private $price; 
```

在表单中，我让 sf 猜测字段类型：

```
$builder->add('price') 
```

我加载表单以在阿拉伯语界面中编辑此实体。在我看到的价格字段中，`١٢٫٤`而不是`12.40`. 我无法保存表单，因为 HTML5 验证失败。如果我在当前字段中输入 12.40 并保存实体，将保存 12，而不是 12.40。

为什么？如何禁用它？如何验证阿拉伯数字？有什么建议么？

**编辑：**已解决，见下文

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T18:30:32.967

我找到了为什么会发生[在这里](https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Form/Extension/Core/Type/IntegerType.php)的答案 正如你所见，symfony 为这些小部件类型注册了一个 ViewTransformer：

```
 $builder->addViewTransformer(
        new IntegerToLocalizedStringTransformer(
            $options['precision'],
            $options['grouping'],
            $options['rounding_mode']
    )); 
```

电流互感器将整数值转换为本地化字符串。`number`小部件 (NumberToLocalizedStringTransformer) 和小部件 (MoneyToLocalizedStringTransformer) 也会发生这种情况`money`。

所以我认为需要注册一个不会使用 ViewTransformer 的新 FieldType。

**编辑：**我解决了这个问题，只是禁用了国际扩展，现在所有数字字段都使用默认的英文数字。如果启用 intl 扩展，则应在输入值中仅使用本地化数字，这是默认行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-05T14:36:41.983

这是一篇旧帖子，但我希望我的回答能帮助任何遇到这个问题的人。您可以使用表单类型中的数据转换器手动将默认语言环境设置为英语，而不是像上面建议的那样禁用 intl 扩展，这将使字段以英语数字显示。

1）使用[数据转换](https://symfony.com/doc/3.4/form/data_transformers.html)器中断（挂钩）显示现场数据的过程。

2)[手动将 Locale 设置为 English](https://symfony.com/doc/3.4/components/intl.html#locales)。

这是我对表单类型中的 dateOfBirth 字段所做的：

```
$builder -> add(
  $builder -> create(
    'dateOfBirth', DateType::class, array(
      'label' => 'Date of Birth',
      'widget' => 'single_text',
      'required' => false,
      'html5' => false,
      'attr' => ['class' => 'form-control']
    )) -> addModelTransformer(new CallbackTransformer(
    function($dateOfBirth) {
      \Locale::setDefault('en');
      return $dateOfBirth;
    },
    function($dateOfBirth) {
      return $dateOfBirth;
    }
  ))
);
```

# asp.net - msdeploy 和 setparameters.xml

> ID：12957337
> 
> 赞同：1
> 
> 时间：2012-10-18T14:44:24.630
> 
> 标签：asp.net, parameters, msbuild, msdeploy

我遇到了 msdeploy 使用的 SetParameters.xml 文件的问题。

在我的网站中，我创建了一个 parameters.xml 文件，其中包含以下内容：

```
<parameters>
    <parameter name="enableRule" defaultValue="DoNotDeleteRule"></parameter>
</parameters> 
```

在部署包的构建过程中，此参数被添加到 setParameters.xml 文件中，该文件如下所示：

```
<parameters>
  <setParameter name="IIS Web Application Name" value="mywebsite/myservice/>
  <setParameter name="enableRule" value="DoNotDeleteRule" />
</parameters> 
```

然而，当我运行 msdeploy（使用包的 cmd）时，该参数被忽略。我尝试通过添加 -setParamFile 属性来调用 cmd，但这没有任何区别......

有人可以帮我弄这个吗 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T07:16:55.910

您将[MSDeploy“参数”](http://technet.microsoft.com/en-us/library/dd569084%28v=WS.10%29.aspx)的概念与[msdeploy.exe 参数](http://technet.microsoft.com/en-us/library/dd569089%28v=WS.10%29.aspx)混淆了。后者包含无法使用前者指定的功能。例如“verb”、“source”、“dest”、“enableLink”等

您唯一的选择是将“-enableRule:DoNotDeleteRule”作为实际命令行参数传递给 msdeploy.exe（我相信将其添加到`cmd`文件调用的末尾也足够了）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-09T01:30:54.967

您可以使用选项 -setParamFile 我正在使用它： -setParamFile=file.xml 并出现错误，但使用 -setParamFile:file.xml 取得了成功

注意 : 而不是 = 就像 doco 说的那样

# windows-phone-7 - 我的 Shoutcast 流不使用 WP7 MediaElement 播放

> ID：12957339
> 
> 赞同：2
> 
> 时间：2012-10-18T14:44:25.487
> 
> 标签：windows-phone-7, streaming, mediaelement, shoutcast

我需要有关此问题的帮助，我正在尝试使用 Windows Phone 7.5 中的 MediaElement 播放音频流

代码很简单

```
<MediaElement Source="http://ghost.wavestreamer.com:9122/listen.mp3" AutoPlay="True" /> 
```

但是没有音频被播放！

这是我要播放的流 [http://ghost.wavestreamer.com:9122/listen.mp3](http://ghost.wavestreamer.com:9122/listen.mp3)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T05:24:29.807

***这些链接可以帮助您了解问题并创建您的应用程序。*** 

**在 Windows Phone 7 中添加媒体元素？** [在 Windows Phone 7 中添加媒体元素？](https://stackoverflow.com/questions/3287360/adding-media-element-in-windows-phone-7)

**媒体元素不在 Windows Phone 7 中播放音频？** [媒体元素不在 Windows Phone 7 中播放音频？](https://stackoverflow.com/questions/3288744/media-element-doesnt-play-audio-in-windows-phone-7)

**为 Windows Phone 7 使用平滑流媒体元素** [http://blogs.msdn.com/b/giuseppeguerrasio/archive/2010/12/06/using-smooth-streaming-media-element-for-windows-phone-7.aspx](http://blogs.msdn.com/b/giuseppeguerrasio/archive/2010/12/06/using-smooth-streaming-media-element-for-windows-phone-7.aspx)

**克服 Windows Phone 7 MediaElement 限制** [http://spacemigas.wordpress.com/2011/04/07/overcoming-windows-phone-7-mediaelement-limitations/](http://spacemigas.wordpress.com/2011/04/07/overcoming-windows-phone-7-mediaelement-limitations/)

**在 WP7 中从休眠/墓碑状态恢复流式音频** [http://www.developer.nokia.com/Community/Wiki/Resuming_streaming_audio_from_Dormant/Tombstone_state_in_WP7](http://www.developer.nokia.com/Community/Wiki/Resuming_streaming_audio_from_Dormant/Tombstone_state_in_WP7)

**在完全下载之前使用 MediaElement 播放音频和可怕的 AG_E_NETWORK_ERROR** [http://forums.silverlight.net/t/227000.aspx](http://forums.silverlight.net/t/227000.aspx)

# django - 如何创建数据库表的二维列表并在模板中对其进行评估？

> ID：12957344
> 
> 赞同：0
> 
> 时间：2012-10-18T14:44:39.717
> 
> 标签：django, list, django-views

我有一个模型类，House，有几列。我想获取该表的所有条目以及所有列，并将它们显示在模板的表中。

首先，我如何将我需要的所有信息从数据库中提取出来（并放入二维列表中？），我可以使用什么标签来访问表中的特定数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T14:51:08.703

[就像这里](https://docs.djangoproject.com/en/dev/topics/db/queries/#retrieving-all-objects)所说的那样简单

所以，实际上：

```
all_houses = Houses.objects.all() 
```

将为您提供数据库中的所有条目。

从视图中，将该变量传递给模板上下文，然后在模板中：

```
{% for house in all_houses %}
    {{ house.<column_name> }}
{% endfor %} 
```

让我解释一下这段代码：一旦将所有条目传递给模板，就可以使用 {% for %} 循环它们

{{ 屋。}} 意味着您可以从所需的列（ column_name ）中提取所需的值并将其放置在您想要的任何位置（显然是从 for 循环中），这样您就可以拥有（例如）{{ house.price }}， {{ house.bathrooms }} 等等，对于您在“all_entries”中的每个条目

# wpf - 如何将绑定的 ConverterParameter 属性绑定到 DependencyProperty

> ID：12957347
> 
> 赞同：1
> 
> 时间：2012-10-18T14:44:49.833
> 
> 标签：wpf, binding, ivalueconverter

我正在`UserControl`为我的 WPF 应用程序构建一个，它允许用户浏览搜索返回的数据页面。我必须减少应用程序的内存使用量，并且根据条件，搜索可以返回大量数据。

该窗口`RadGridView`现在包含一个 Telerik 控件，并将包含这个新的`UserControl`. 新控件将具有用于返回数据的第一页、上一页、另一个用于下一页、还有一个用于最后一页的按钮，以及`ComboBox`用于转到特定页码的按钮。

我想启用或禁用按钮，以便仅当当前页面不是第一页时才启用第一页按钮和上一页按钮，并且仅当当前页面不是时才启用下一页按钮和最后一页按钮最后。

现在，我创建了两个`IValueConverter`在我的应用程序中实现的类，它们进行比较。他们将`value`参数`Parameter`与`Convert`方法中的参数进行比较。这适用于第一页和上一页按钮，因为我比较为零。下一页和最后一页按钮可能会分崩离析。

有`UserControl`一个`DependencyProperty`表示匹配查询条件的数据页数。如果参数小于参数，我有一个`IValueConverter`返回。我可以将的 ConvertParameter 属性绑定到数字页吗？还是我必须添加另一个属性来表明可以启用这些按钮？`true``value``parameter``Binding``DependencyProperty`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T14:55:22.343

您正试图滥用 IValueConverter 将多个值转换为一个值。为此使用实现`IMultiValueConverter`并像这样使用它。

```
 <MultiBinding Converter="{your IMultiValueConverter implementation}"
                  Mode="OneWay">
        <Binding Path="Property1" />
        <Binding Path="Property2" />
    </MultiBinding> 
```

[http://msdn.microsoft.com/en-us/library/system.windows.data.imultivalueconverter.aspx](http://msdn.microsoft.com/en-us/library/system.windows.data.imultivalueconverter.aspx)

# html - 如何使用 check_box_tag 检查 Haml 中的复选框

> ID：12957348
> 
> 赞同：12
> 
> 时间：2012-10-18T14:44:49.770
> 
> 标签：html, ruby, checkbox, haml

有人可以告诉我如何将这些复选框设置为选中吗？我敢肯定这很简单，但经过一个小时的尝试，我想我需要问一下！谢谢！

```
= form_tag movies_path, :id => 'ratings_form', :method => :get do
  Include: 
  - @all_ratings.each do |rating|
    = rating
    = check_box_tag "ratings[#{rating}]", 
  = submit_tag 'Refresh', :id => 'ratings_submit' 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-18T14:47:47.020

参考[check_box_tag](http://api.rubyonrails.org/v2.3.8/classes/ActionView/Helpers/FormTagHelper.html#M002246)

```
check_box_tag "ratings[#{rating}]",  1, !!(rating.rating) 
```

你`2nd parameter`必须是`value`复选框

你`3rd parameter`必须是一个`boolean condition`返回`true/false`并依赖于它的复选框是`checked/unchecked`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-28T01:01:07.397

```
check_box_tag "ratings[#{rating}]",  1, @selected.include?("#{rating}") 
```

where`@selected`是一个包含选定元素的数组。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-19T00:41:57.613

在行尾对 Checked 使用 true 或对 Unchecked 使用 false

```
check_box_tag "ratings[#{rating}]", true #checked 
```

或者

```
check_box_tag "ratings[#{rating}]", false #unchecked 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-02-16T23:11:05.473

根据 api dock，复选框标签采用以下选项：

`check_box_tag(name, value = "1", checked = false, options = {})`

这意味着第一个值是名称，第二个值是“值”，第三个值是该框是否被选中，默认为 false。因此，为了选中或取消选中该框，您可以执行以下操作：

```
- if (some condition)
  = check_box_tag "ratings[#{rating}]", "anystring", true
- else 
  = check_box_tag "ratings[#{rating}]" 
```

第二行只是将一个随机字符串放入 value 字段中，因为在这种情况下它无关紧要。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-05T14:36:53.833

基于萨利的答案。奇怪的是，`check_box_tag`返回一个没有标签文本的复选框。如果您正在迭代数组，以下是显示文本的方法。

```
- Puppies.each do |puppy|
  = check_box_tag(puppy.name, puppy.name, puppy.goodboy?)
  = puppy.name 
```

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2015-07-14T09:00:54.663

```
= check_box_tag "ratings[#{rating}]",{},{:checked => ""} 
```

# java - Java 上的 RFID 错误

> ID：12957351
> 
> 赞同：-1
> 
> 时间：2012-10-18T14:44:58.997
> 
> 标签：java, windows-mobile

我在 RFID 扫描仪上运行的 java 应用程序遇到了这个问题。我已经添加了课程。但似乎找不到类中的方法。有人知道吗？

```
 Exception in thread "xShadow-1" java.lang.NoSuchMethodError: ReadEventCallback
    at symbol.RFIDBase.RFID_EnableReadTagInventoryCallback()
    at symbol.RFIDReader$RFIDActions.readTag()
    at symbol.RFIDReader$RFIDActions.readTag()
    at com.vmt.plugins.symbol.barcodescanner.services.ScannerImplementation$RfidTriggerListener.actio    nPerformed()
    at symbol.RFIDReader$RFIDActions.TriggerCallback() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T14:46:07.550

```
 Exception in thread "xShadow-1" java.lang.NoSuchMethodError: ReadEventCallback 
```

看来您在类路径中的 jar 版本错误。我建议确保您拥有的代码与您在类路径中拥有的 jar 版本兼容。

# linq - 未设置 LINQ 对象引用

> ID：12957355
> 
> 赞同：0
> 
> 时间：2012-10-18T14:45:02.463
> 
> 标签：linq, object, reference

搜索从数据网格中选择的项目（在 Guid 上）时，我收到“对象引用未设置为对象的实例”错误。我已经检查过该项目是否正确返回了 Guid（通过将其写入页面上的标签），但是在我的 linq 查询中（我假设）我比较不正确。

ctx 是域数据源，我知道我试图删除的元素存在。

```
 private void medItemRemove_Click(object sender, RoutedEventArgs e)
    {

            MedicineInventory M = (MedicineInventory)medicineInventoryDataGrid.SelectedItem;
            Guid Mid = M.MedicineInventoryId;
            MedicineInventory toRemove = new MedicineInventory();
            toRemove = (from a in ctx.MedicineInventories where (a.MedicineInventoryId == Mid) select a).Single();
            ctx.MedicineInventories.Remove(toRemove);
            ctx.SubmitChanges();

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T14:48:00.753

我认为您的问题正在发生，因为您正在创建一个新的`MedicineInventory`.

替换这个：

```
MedicineInventory toRemove = new MedicineInventory(); 
```

有了这个：

```
var toRemove = ctx.MedicineInventories.Single(mi => mi.MedicineInventoryId == Mid); 
```

**更新：**

当它返回错误消息*“序列不包含元素”*时，这是因为 EF 在数据库中找不到与您在`where`子句中使用的相同 Guid 的行。在这种情况下，为了避免异常，你可以试试这行代码：

```
var toRemove = ctx.MedicineInventories.SingleOrDefault(
                                                  mi => mi.MedicineInventoryId == Mid); 
```

`if`如果不是，则使用 an删除`NULL`：

```
if(toRemove != null)
{
    ctx.MedicineInventories.Remove(toRemove);

    ctx.SubmitChanges();
}
else
{
    // Only you know what to do! :-)
} 
```

> [SingleOrDefault](http://msdn.microsoft.com/en-us/library/bb342451.aspx)返回序列的唯一元素，`NULL`如果序列为空，则返回默认值（在这种情况下）；如果序列中有多个元素，此方法将引发异常。

* * *

注意：您比较 Guid 的方式是正确的，因为`==`在 Guid 上重载，因此您不需要比较字符串表示形式。

请参阅[http://msdn.microsoft.com/en-us/library/system.guid.op_equality%28v=vs.110%29.aspx#Y474](http://msdn.microsoft.com/en-us/library/system.guid.op_equality%28v=vs.110%29.aspx#Y474)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T14:50:07.517

在任何时候都是空的吗？

```
toRemove = (from a in ctx.MedicineInventories where (a != null && a.MedicineInventoryId == Mid) select a).Single(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T14:50:34.350

重写你的代码如下：

```
private void medItemRemove_Click(object sender, RoutedEventArgs e)
{

    MedicineInventory M = (MedicineInventory)medicineInventoryDataGrid.SelectedItem;
    Guid Mid = M.MedicineInventoryId;
    MedicineInventory toRemove = (from a in ctx.MedicineInventories where (a != null && a.MedicineInventoryId == Mid) select a).SingleOrDefault();
    if (toRemove != null){
       ctx.MedicineInventories.Remove(toRemove);
       ctx.SubmitChanges();
    }
    else { .... } // code if toRemove is null

 } 
```

# c++ - 在 .cpp 文件上链接静态库

> ID：12957357
> 
> 赞同：0
> 
> 时间：2012-10-18T14:45:09.000
> 
> 标签：c++, c, gcc, static-libraries, .a

我正在尝试编译一些代码，这些代码使用在名为 staticlib.a 的静态库中实现的函数。我还有名为 staticlib.h 的头文件，其中包含该函数的声明。我的 main，包含在 main.c 文件中，其中包括 staticlib.h，只调用该函数而不调用其他函数。所以我用 gcc main.c staticlib.a 编译，一切正常。我需要 c++ 的一些特性，但如果我在 main.cpp 中正确更改 main.c 并以相同的方式编译 gcc main.cpp staticlib.a，则会发生对我的函数的未定义引用。我怎样才能使它起作用？为什么会出现这个问题？在我访问过的任何网站中，我都找不到真正的解释……谢谢您的所有回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T14:49:05.560

您必须将库中的函数定义为“C”函数，而不是 C++ 函数 - 在 main.cpp 中执行此操作

```
extern "C"
{
#include "staticlib.h"
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T14:50:26.707

C 和 C++ 编译不同，C++ 使用名称修饰（在目标文件中嵌入 C++ 类型信息）。要停止此行为以便您可以从 C++ 链接到 C 代码，您可以在包含 C 头文件时在 C++ 中使用 extern C 语法。

请看这里 [http://www.cplusplus.com/forum/general/1143/](http://www.cplusplus.com/forum/general/1143/)

# .net - LimitedConcurrencyLevelTask Scheduler 的奇怪行为

> ID：12957359
> 
> 赞同：2
> 
> 时间：2012-10-18T14:45:18.473
> 
> 标签：.net, task-parallel-library

我在使用 TPL 和 custom 时有一种奇怪的行为`LimitedConcurrencyLevelTaskScheduler`。基本上，我有一个包含几行的输入文件。必须读取、解析每一行并处理其数据。处理后，我得到了一个输出字符串，该字符串应该写回到与输入文件相同的位置的输出文件中。目前我正在创建一个调度程序任务，它读取一行输入，创建一个计算任务（执行计算并将输出字符串写入缓冲区）传递字符串和每行的行号，创建一个转储的假脱机任务定期将缓冲区写入文件，然后等待所有任务终止。

我正在使用 a `LimitedConcurrencyLevelTaskScheduler`，因为我需要限制正在运行的线程的实际数量。

问题似乎是，当我运行的线程数量非常少（1或2）时，任务按行号顺序（从初始行到最后一行）安排，但以相反的顺序执行（从最终到初始）。这对我来说是个问题，因为假脱机线程直到最后才能转储缓冲区（因为必须以正确的顺序打印行），所以用户在 99% 的进度之前无法看到任何输出。

[我从 MSDN](http://msdn.microsoft.com/en-us/library/dd997402.aspx)阅读了这篇文章， 了解到 a`ThreadPool`有 FIFO 全局队列，但是每个线程都有一个用于执行任务的 LIFO 本地队列。这可能意味着为了避免这种奇怪的行为，我不应该使用`ThreadPool`and 自己写一个？这样对吗？有人有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T15:54:53.063

是的，这是正确的。我建议您使用 PLINQ 来处理文件中的行。PLINQ 可以保持顺序并使用精确程度的并行性。

# apache - Apache HtAccess AddHandler 以服务器名或 ip 为条件

> ID：12957362
> 
> 赞同：3
> 
> 时间：2012-10-18T14:45:25.190
> 
> 标签：apache, .htaccess

我在 Site5 托管我的登台和生产服务器，这是一个相对较好的托管 IMO。问题不在于它们的质量，而在于与 PHP 版本相关的问题。

我们的开发服务器使用的是 PHP 5.3，这是一个很好的版本，5.4 太新了，我们还不想使用它的功能，还不够普及。

问题是，Site5 默认使用 PHP 5.2，但您可以使用 HTACCESS AddHandler 语句更改为 5.3。在 Site5 上运行良好，但是当我们将该语句保留在 HTAccess 文件中时，我们的开发服务器崩溃。

如果您使用 SVN/Git 来部署您的 Web 应用程序，您知道您总是在任何地方保留相同的文件，所以这就是它的痛处，我似乎找不到任何关于 AddHandler 的 HTACCESS 文件的条件语句。我可以轻松地在重写引擎上编写条件，但我找不到任何看起来和行为如下的东西：

```
#<If SERVERNAME == "targethost.com">
#    PHP 5.3 configuration for site5
#    AddHandler application/x-httpd-php53 .php
#</If> 
```

有人有解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-06T15:33:03.383

从 Apache 2.4 开始，您可以在 .htaccess 文件中使用此表达式：

```
<If "%{HTTP_HOST} == 'example.com'">
    AddHandler application/x-httpd-php53 .php
</If> 
```

[https://httpd.apache.org/docs/2.4/expr.html#examples](https://httpd.apache.org/docs/2.4/expr.html#examples)

请注意，这在 Apache 2.2 中不起作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T13:36:09.267

我遇到了同样的问题，在 .htaccess 中找不到解决方案。您可能已经看过[这种](https://webmasters.stackexchange.com/questions/22738/conditional-addhandler-directive)解决方案，但它对我不起作用。

由于我使用 Capistrano 在 Site5 主机上部署我的应用程序，因此我决定在每次部署完成时更改 .htaccess，方法是在我的部署设置文件中添加一行，该文件只需运行一个 shell 命令：

```
run "echo 'AddHandler application/x-httpd-php53 .php' >> #{release_path}/public/.htaccess" 
```

注意：#{release_path} 是我的应用程序的根路径。

我询问了 Site5 的支持，但不幸的是，他们无法向我推荐一个。

# jquery - Rails :remote => true 对文档对象进行操作？

> ID：12957364
> 
> 赞同：1
> 
> 时间：2012-10-18T14:45:26.077
> 
> 标签：jquery, ruby-on-rails

我有以下内容`index.js.erb`：

```
$(function () {
  var $team = $('#createTeam'),
      $user = $('#createUser'),
      $userPanel = $('.createUserPanel'),
      $teamPanel = $('.createTeamPanel');

  $user.click(function(){
    $userPanel.append('<%= j render 'form_user' %>').fadeIn('slow');
    $(this).fadeOut();
  });

  $team.click(function(){
    $teamPanel.append('<%= j render 'form_team' %>').fadeIn('slow');
    $(this).fadeOut();
  });
})(); 
```

与我的这些链接一起使用`index.html.erb`：

```
<%= link_to "+", "#", 'data-action' =>"create",'data-target'=> "team", id: "createTeam", remote: true %>

<%= link_to "+", "#", 'data-action' =>"create",'data-target'=> "user", id: "createUser", remote: true %> 
```

当我第一次单击任何一个链接时，什么都没有发生，但是在连续的第二次和第三次单击时，两种形式都会出现。每次单击链接后，按钮应淡出，表单应显示在单独的 div 中。

所需的实现是当单击*任*一链接时，`form_*`将出现，并且按钮将淡出。我如何实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T14:29:26.253

问题是您正在调用javascript，然后加载并将事件绑定到您的元素。这就是第二次点击有效的原因——点击事件在第一次点击后绑定，“调用”要加载的 javascript。

看起来您不需要 AJAX 调用中的任何动态内容。您可以从 link_to 帮助器中删除“remote: true”选项，只需将 index.js.erb 的内容放在 index.html.erb 中（可能在底部或 :script 内容块中）

我通常不会最终使用远程助手的东西，但是，把它想象成一个 AJAX 调用，你想对一个动作发出请求，处理它，并返回一些关于发生了什么的信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T17:07:36.283

所以这里发生的事情如下：

您单击向#index 控制器操作发送请求的链接之一。这将返回 index.js.erb。

第一次返回时，什么都没有发生，因为 JS 刚刚加载，所以就 JS 而言，还没有发生任何事情。您需要添加一些内容，`index.js.erb`以便在最初加载 JS 时调用附加操作。

至于同时出现的两种形式，您可能必须更具体地确定要附加的内容。当您调用 append 时，您似乎同时选择了这两个类。也许您可以`index.html.erb`在问题中包含更多内容。

# php - 内联 PHP 标记未关闭

> ID：12957366
> 
> 赞同：1
> 
> 时间：2012-10-18T14:45:29.593
> 
> 标签：php, html, css

我在 html 中包含 php 以根据一些变量更改背景图像。因此我`img-set()`在body标签中调用函数。该功能工作正常。但是在函数运行后 html 代码会中断。我认为这是一些无法解决的语法问题。

```
<body style="background:url(images/<?php $obj->set_img();?>); -webkit-background-size: cover;-moz-background-size: cover;-o-background-size: cover;background-size: cover;"> 
```

Web 浏览器源代码中的输出如下所示：

```
<body style="background:url(images/music7.jpg 
```

显示图像名称后中断。为什么这样 ？？

这里是 set_img() 函数

```
function set_img()
{
$ctr = date("d");
$arr7 = array("7","18","29");
$status = 0;

foreach($arr7 as $value){
if($ctr == $value){
echo "music7.jpg";
$status = 7;
}}
if(!$status) echo "music1.jpg";
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T01:43:49.580

`<?php set_img();?>`不使用`<?php $obj->set_img();?>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T00:01:50.713

```
<body style="background:url(images/<?php set_img();?>); -webkit-background-size: cover;-moz-background-size: cover;-o-background-size: cover;background-size: cover;"> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T14:49:48.360

There's probably a problem with your set_img() function causing the rest of the page to stop rendering. Look at the code after you output the image. A quick test to see if the error is due to your function is to remove that php block and see if the page renders fine.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T16:55:34.367

听起来像是一个无声的 PHP 错误。有时可能很难检测到。尝试检查您的 Apache 错误日志，`/var/log/Apache2`它应该会说明导致 PHP 中断的错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-18T21:19:45.440

我认为也有一个未渲染的异常。

但是当我看到 set_img 函数时，我无法想象它怎么会抛出任何异常。可能是 $obj 没有实例化正确的类？

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-10-18T14:51:51.267

我认为您的网址周围可能缺少引号。尝试：

```
<body style="background:url('imges/music7.jpg')"> 
```

# jquery - 为什么 wrapAll() 复制 javascript 代码？

> ID：12957378
> 
> 赞同：0
> 
> 时间：2012-10-18T14:46:08.400
> 
> 标签：jquery

[我有一个 javascript 代码，你可以在这里](http://jsfiddle.net/XwQnp/)看到它的 jsfiddle 。

当用新的 div 包装所有 .inner 元素时，似乎 jquery 复制了 javascript 代码（所以你可以在运行时看到两个警报）。这是正常行为`wrapAll()`还是错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T14:51:12.543

这可能是因为`<script>`当你包装它时，你在元素中的标签被重新评估，因为 dom 被重写，因此添加了另一个`click`回调。`<script>`解决方案是将带有回调的代码移到`click`div 之外。

```
<script language="javascript">
   $(".inner span").click(function() {
     alert(1);
   });
</script>
<div class="inner">
  <span>Hello</span>
</div> 
```

# ios - 缩小 Xcode Simulator (Retina 4 inch)

> ID：12957380
> 
> 赞同：23
> 
> 时间：2012-10-18T14:46:16.607
> 
> 标签：ios, xcode, ios-simulator, retina-display

我正在使用 macbook Air 并使用 iphone Simulator。我改成Retina 4寸，模拟器的屏幕变大了！有没有办法减小尺寸？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-10-18T14:48:53.680

您可以使用以下快捷方式对其进行缩放：

*   `⌘</kbd>+`1`: 100%`
*   `⌘</kbd>+`2`: 75%`
*   `⌘</kbd>+`3`: 50%`
*   `⌘</kbd>+`4`: 33%`
*   `⌘</kbd>+`5`: 25%`

或者在 iOS 模拟器中：`Window > Scale > ...`

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-18T14:47:41.177

iOS 模拟器的窗口菜单有一个选项可以将模拟器显示为 50%、75% 或 100%。尝试较小的值之一以使其适合。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-09-15T18:08:05.797

现在使用 Xcode 9-Simulator 更加灵活。

您可以选择和拖动任何角落或模拟器来调整它的大小并根据您的要求进行设置。

![在此处输入图像描述](../Images/d423e909771ad6cb7840c37c67c3e033.png)

还有其他几种方法可以扩展您的模拟器。

**使用终端命令**
按照以下步骤使用终端命令扩展模拟器

1.  关闭/退出模拟器。（如果打开）
2.  打开`Terminal`应用程序（使用 Spotlight 搜索，按下`⌘ + SPACE`以打开 Spotlight 搜索）
3.  复制以下文本并将其粘贴到终端光标旁边。

`defaults write ~/Library/Preferences/com.apple.iphonesimulator SimulatorWindowLastScale "0.3"`

4.  打开“模拟器”（使用 Xcode 运行您的 iOS 项目）。

你会发现模拟器规模更新。

**Xcode 菜单中的模拟器缩放选项**：

> 菜单栏 >> 窗口 >> 缩放 >> “这里有模拟器缩放的可用选项”

这是参考快照： ![在此处输入图像描述](../Images/24bd22f81931bb3e5abf7c6f9693afb7.png)

# php - 如何在不同的 PHP 文件中使用实例化对象

> ID：12957384
> 
> 赞同：2
> 
> 时间：2012-10-18T14:46:26.457
> 
> 标签：php, object, instantiation

这是一个非常基本的 php 问题：假设我有 3 个文件，file1、file2、file3。

在 file1 中，我声明了一个名为 Object 的类。在file2中，我有一个实例化Object的方法，调用它$object，调用这个方法Method

在file2中，这个方法看起来像

```
public function Method(){
$object = new Object;
...
require_once(file3);
$anotherobject = new AnotherObject;
$anotherobject->method();

} 
```

最后，在文件 3 中，我声明了另一个 AnotherObject。那么，如果我在 file3 中有一个方法“方法”，我可以直接引用 $object 的属性，还是可以只访问 Object 的静态方法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-18T14:51:59.347

这不是应该如何编写体面的 OOp。给每个班级自己的文件。据我了解，您有 3 个包含类的文件，并且想要使用实例化对象。使用**依赖注入**来构造相互依赖的类。

例子：

**文件1.php**：

```
class Object
{
   public function SomeMethod()
   {
      // do stuff
   }
} 
```

**file2.php**，使用实例化对象：

```
class OtherObject
{
   private $object;

   public function __construct(Object $object)
   {
      $this->object = $object;
   }

   // now use any public method on object
   public AMethod()
   {
      $this->object->SomeMethod();
   }
} 
```

**file3.php**，使用多个实例化对象：

```
class ComplexObject
{
   private $object;
   private $otherobject;

   public function __construct(Object $object, OtherObject $otherobject)
   {
      $this->object = $object;
      $this->otherobject = $otherobject;
   }
} 
```

将所有这些结合在一个引导文件或某种程序文件中：

**程序.php**：

```
// with no autoloader present:
include_once 'file1.php';
include_once 'file2.php';
include_once 'file3.php';

$object = new Object();
$otherobject = new OtherObject( $object );

$complexobject = new ComplexObject( $object, $otherobject ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T14:52:25.847

范围`$object`当然限于方法。文件 3 是从方法中调用的，所以我认为是的，如果使用`include()`. 但是，从方法内部使用`require_once()`，让我提出其他问题，如果 file3 先前包含在其他地方，因此不包含在方法中，则它可能无法利用显示的方法中的变量。

# c - 汇编中无符号 32 位整数的左移

> ID：12957388
> 
> 赞同：1
> 
> 时间：2012-10-18T14:46:43.440
> 
> 标签：c, assembly, bit, unsigned, shift

使用“sall”指令在汇编中左移的快速问题。

据我了解，“sall rightop，leftop”将转换为“leftop = leftop << rightop”，因此取一个整数并将位向左移动4个空格将导致乘以2 ^ 4。

但是当整数是无符号的 32 位整数时会发生什么，例如：

1111 1111 1111 1111 1111 0000 0010 0010

在这种情况下，左移会变成 1111 1111 1111 1111 0000 0010 0010 0000 吗？

显然这不是乘以 2^4。

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T14:53:00.243

它是乘以`2^4`, 模`2^32`:

```
n = (n * 2^4) % (2 ^ 32) 
```

在这种情况下，您可以通过执行左移然后进行屏蔽来检测“移出”的位

```
dropped = (n >> (32-4)) & (1<<4-1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T15:03:31.357

左移 ( `SAL`, `SHL`) 只会丢失左边的位。右边的位用 0 填充。如果任何丢失的位为 1，则在乘法方面存在溢出和错误结果。您`S*L`用于非负值和负值。

常规右移 ( `SHR`) 的工作方式完全相同，但方向相反，左边的位被 0 填充，右边的位丢失。结果被有效地舍入/截断为 0。您使用`SHR`非负值，因为它不保留值的符号（0 被写入其中）。

算术右移 ( `SAR`) 略有不同。最高有效位（=最左位，符号位）不会被 0 填充。它会被其先前的值填充，从而保留该值的符号。另一个显着的区别是，如果该值为负数，则右侧丢失的位会导致向负无穷大而不是 0 舍入。

# javascript - 带有 html 内容的 qTip2

> ID：12957390
> 
> 赞同：2
> 
> 时间：2012-10-18T14:46:47.833
> 
> 标签：javascript, jquery, qtip2

我在使用[qTip2](http://craigsworks.com/projects/qtip2/)让带有 html 内容的弹出窗口工作时遇到了一些麻烦。显示的弹出窗口是空白的，我不知道为什么。

这是我的javascript：

```
$('.tooltip').qtip({
    content: {
        text: function(api){
            $(this).next('.tooltip-content');
        }
    }
});​ 
```

我的html是：

```
<a class="tooltip"></a>
<div class="tooltip-content"><strong>this is some tooltip</strong> content. <em>italic</em></div>​ 
```

我已经设置了一个 jsfiddle 来显示我的问题 - **[http://jsfiddle.net/tajsy/](http://jsfiddle.net/tajsy/)**

我计划在一个页面上有很多这些工具提示，所以我想将链接和隐藏的 div 与它的内容配对。

有人可以告诉我哪里出错了吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-18T14:49:59.070

Since you are using a function, you need to return the element:

```
 text: function(api){
     return $(this).next('.tooltip-content');
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-20T10:16:01.237

qtip2 内联 HTML [http://jsfiddle.net/uaR3m/20/](http://jsfiddle.net/uaR3m/20/)

```
 $('a').each(function() {
     $(this).qtip({
         content: {
             text: function(api){
             return $($(this).attr('href'));
             }

         }
     });
 }); 
```

# c# - 使用多重绑定在 WPF 中设置自定义附加属性

> ID：12957391
> 
> 赞同：1
> 
> 时间：2012-10-18T14:46:48.500
> 
> 标签：c#, wpf, xaml, dependency-properties

我有一个 MVVM WPF 项目，我正在尝试使用多转换器设置自定义附加属性的值，它应该传递 DataContext (ViewModel) 的属性和元素上的另一个自定义附加属性。

我可以使用 xaml 属性语法直接将属性绑定到视图模型，但是我无法理解如何使用多转换器设置附加属性的值。

```
<StackPanel>
    <StackPanel.Resources>
        <example:HelpTextConverter x:Key="ConvertHelpText"></example:HelpTextConverter>
    </StackPanel.Resources>

    <!-- shows binding the help text properties directly to the ViewModel's property -->
    <Border example:HelpTextProperties.HelpText="{Binding HelpText}"></Border>

    <!--how to set the HelpText attached property as the result of passing the DataContext.HelpText and the HelpTextProperties.ShowHelpText property to the HelpTextConverter?-->
    <Border>
        <example:HelpTextProperties.HelpText>
            <!--does not compile-->
        </example:HelpTextProperties.HelpText>
    </Border>

</StackPanel> 
```

下面的附加属性和 IMultiValueConverter 的代码。

```
class HelpTextProperties
{
    public static readonly DependencyProperty ShowHelpTextProperty =
        DependencyProperty.RegisterAttached("ShowHelpText", typeof(bool), typeof(HelpTextProperties),
            new UIPropertyMetadata(false));

    public static bool GetShowHelpText(UIElement target)
    {
        return (bool)target.GetValue(ShowHelpTextProperty);
    }

    public static void SetShowHelpText(UIElement target, bool value)
    {
        target.SetValue(ShowHelpTextProperty, value);
    }

    public static readonly DependencyProperty HelpTextProperty =
        DependencyProperty.RegisterAttached("HelpText", typeof(LabelVM), typeof(HelpTextProperties),
        new UIPropertyMetadata(null));

    public static LabelVM GetHelpText(UIElement target)
    {
        return (LabelVM)target.GetValue(ShowHelpTextProperty);
    }

    public static void SetHelpText(UIElement target, LabelVM value)
    {
        target.SetValue(ShowHelpTextProperty, value);
    }
}

class HelpTextConverter : IMultiValueConverter
{
    /// <summary>
    /// returns the label in values[0] if values[1] is true
    /// </summary>
    public object Convert(object[] values, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        LabelVM labelVM = (LabelVM)values[0];
        if (values[0] == DependencyProperty.UnsetValue) { return null; }
        if (values[1] is bool)
        {
            if ((bool)values[1]) { return labelVM; }
        }
        return null;
    }

    public object[] ConvertBack(object value, Type[] targetTypes, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

谢谢你尽你所能的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T17:12:38.663

你可以试试这个并适应你的代码：

```
 <Border>
        <example:HelpTextProperties.HelpText>
            <MultiBinding Converter="{StaticResource ResourceKey=ConvertHelpText}">
                <Binding Path="HelpText"/> <!--The property that you wants, from DataContext or Dependency Property-->
                <Binding Path="ShowLabel"/> <!--Same thing, the property that you wants-->
            </MultiBinding>
        </example:HelpTextProperties.HelpText>
    </Border> 
```

这是用于设置多绑定转换器，但我认为您可以从“MainViewModel”或主窗口的视图模型中管理此行为。也许可以更简单，或者触发。希望这对你有帮助...

# objective-c - TableView 不允许字典中的“部分”

> ID：12957392
> 
> 赞同：0
> 
> 时间：2012-10-18T14:46:56.017
> 
> 标签：objective-c, ios

我想遍历一个 json 项目列表以在我的分段 tableView 中使用。为此，我想重组数据以设置部分-> 数组，其中数组包含会话数组。

首先，我不知道这是否是首选方法，可能有更简单的方法。我不断收到错误消息，即我不允许在字典中使用“部分”作为标识符。此外，当我使用“部分”以外的其他内容时，字典会不断被覆盖。

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {

NSString *day = _json[@"days"][3];
NSString *key;
NSUInteger count = 0;
NSMutableArray *sessionList = [[NSMutableArray alloc] init];

NSArray *timeslotsSorted = [[_json[@"schedule"][day] allKeys]
                            sortedArrayUsingSelector:@selector(localizedCaseInsensitiveCompare:)];

NSArray *locationsSorted = [[_json[@"schedule"][day][timeslotsSorted[section]] allKeys]
                            sortedArrayUsingSelector:@selector(localizedCaseInsensitiveCompare:)];

for (key in locationsSorted) {
    NSDictionary *temp = _json[@"schedule"][day][timeslotsSorted[section]][key];
    if ([temp isKindOfClass:[NSDictionary class]]) {
        [sessionList addObject:temp[@"title"]]; //test array 
        count++;
    }

}

_sessionDict = @{
    section: sessionList
};

return count;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T14:54:24.163

您正在做所有工作以在错误的位置构建数据结构。假设您的数据中有 10 个部分。这将调用该`tableView: numberOfRowsInSection`方法 10 次，这使得这是一个非常低效的地方来做很多工作。您还必须实现返回要显示的部分数量的方法，以及显示每一行的方法。

我将在该`viewWillLoad`方法中构建我的数据结构，然后将其本地存储并在所有`tableView`方法中重用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T14:58:58.810

i don't really know that your `timeslotsSorted` and `locationsSorted` contain right items, but lets say they do. I would recommend you to have this sorting before
`- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section` and
`- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView;` are called.

Lets say, you received JSON, so you have to parse it as you do, and then call `[tableView reloadData]` or reload visible cells with animations.

and then your tableView data source methods will be called and you will do something like:

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return [sessionList count];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    NSString* key = [self.sessionList objectAtIndex:section];
    return [[self.secions objectForKey:key] count]; 
} 
```

and don't forget to make strong properties for `self.sections` and `self.sessionList`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T14:54:02.090

首先，这就是 NSInteger：

```
typedef int NSInteger; 
```

您必须将其包装到一个对象中。就像是：

```
[NSNumber numberWithInteger:section] 
```

而不是将它添加到您的字典中。

# php - 语言文件不能与其他目录中的文件一起使用

> ID：12957398
> 
> 赞同：-2
> 
> 时间：2012-10-18T14:47:05.757
> 
> 标签：php

我在一个网站上工作，并想让它成为多种语言。
我在互联网上找到了一个多语言脚本。
我添加了文件并将 php 重定向到我的网站。
它适用于我的根目录中的页面，但它似乎不适用于位于我根目录中其他目录中的 php 文件。
root/main.php 工作正常，但 root/admin/admin.php 无法正常工作。
它给出了服务器找不到我的 lang 文件的错误。
我的 lang 文件位于 root/lang/ 中，而 php 脚本位于 root/include/session.php 中。

这里是脚本的副本

```
session_start();

if(isSet($_GET['lang']))
{
$lang = $_GET['lang'];

// register the session and set the cookie
$_SESSION['lang'] = $lang;

setcookie("lang", $lang, time() + (3600 * 24 * 30));
}
else if(isSet($_SESSION['lang']))
{
$lang = $_SESSION['lang'];
}
else if(isSet($_COOKIE['lang']))
{
$lang = $_COOKIE['lang'];
}
else
{
$lang = 'en';
}

switch ($lang) {
  case 'en':
  $lang_file = 'lang.en.php';
  break;

  case 'nl':
  $lang_file = 'lang.nl.php';
  break;

  default:
  $lang_file = 'lang.en.php';

 }
 include_once 'lang/'.$lang_file; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T15:22:24.767

您只需包含相对于当前脚本 (session.php) 的相对路径

```
include_once dirname(__FILE__).'/lang/lang.en.php'; 
```

# html - 使用 jQuery.val() 和 Modernizr Webshims Lib 检索值时遇到问题

> ID：12957399
> 
> 赞同：0
> 
> 时间：2012-10-18T14:47:09.600
> 
> 标签：html, firefox, modernizr, polyfills, shim

我正在使用 Modernizr plus [Webshims](http://afarkas.github.com/webshim/demos/)使我能够为尚不支持该选项的浏览器使用 type="number" 类型。它工作正常，但我无法使用 jQuery 访问数字输入字段的值 [稍后我将分享我正在使用的代码]。

在 Chrome（不需要 polyfill）中，我可以使用 val() 检索值。在 Firefox（确实需要 polyfill）中，如果我不使用 webshim polyfill，我也可以检索该值。

但是，一旦我使用 webshims，我就无法再检索该值。

这是我正在使用的代码：

在标签之前，我有以下内容：

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script src="http://localhost/bp2/wp-content/themes/method/custom/js/modernizr.custom.65840.js">      </script>
<script src="http://localhost/bp2/wp-content/themes/method/custom/js/webshims/polyfiller.js">   </script>
<script>
jQuery.webshims.polyfill('forms forms-ext');
jQuery(document).ready(function($) {
 $('select, input', window.parent.document).change(function() {
    var test = $('#test135').val();
    console.log(test135);
}).trigger('change');
});

</script> 
```

在内容部分，我添加了以下内容：

```
<input id="test" type="number" placeholder="Test2" max="360" min="0" step="30"> 
```

知道如何让它工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T22:34:11.687

这不应该是：

```
console.log(test); 
```

# visual-studio-2010 - TFS：待更改 - 工作项屏幕过早关闭代码审查

> ID：12957400
> 
> 赞同：1
> 
> 时间：2012-10-18T14:47:10.543
> 
> 标签：visual-studio-2010, tfs

我有一个奇怪的 TFS 问题，我的团队中似乎没有其他人遇到过。据我所知，我是团队中唯一喜欢使用 Pending Changes 窗口的人，所以我假设问题就在那里。

在我通过代码审查后，我将导航到待定更改窗口的工作项选项卡。我将选中“签入操作”框并选择“关联”。代码审查立即进入关闭状态，并在审查历史记录中显示我代表审查者关闭了审查。然后我无法签入我的代码，因为审查现在处于关闭状态。我得到签入验证，工作项 #### 的签入操作不受支持。如果我刷新视图，我尝试关联的评论现在消失了。

我签到的唯一方法是重新打开评论，将其分配给我自己，然后将其设置为已解决状态。它保留了之前和现在的关联，现在审查处于正确的状态，我终于可以检查我的代码了。你可以想象这个例程已经过时了。有任何想法吗？

编辑：顺便说一句VS2010

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T19:12:48.383

想我明白了。您可以选择待更改屏幕使用的查询。我的查询正在寻找未处于关闭状态的代码审查。一旦关联代码审查，它就会关闭并退出查询结果。如果在工作项屏幕中未检查任何内容，即使代码审查已关联，挂起的更改窗口也不会让您签入。

我对要使用的窗口进行了新查询，以查找我创建的在过去 7 天内已解决的代码审查。我希望我能看到我的开放代码审查，但考虑到屏幕的限制，这似乎是最好的解决方案。

# coldfusion - 可汗学院 API

> ID：12957404
> 
> 赞同：-3
> 
> 时间：2012-10-18T14:47:28.073
> 
> 标签：coldfusion, khan-academy

我想请我的学生在 khanacademy.org 上将我添加为他们的教练。

问：我可以从可汗学院的 API 获得什么样的数据？我可以获取他们观看过的视频或他们的徽章吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-18T15:11:12.087

我用谷歌搜索了 3 秒才找到这个

从他们的文档中-

他们看过的视频[https://github.com/Khan/khan-api/wiki/Khan-Academy-API-Methods#wiki-user-videos](https://github.com/Khan/khan-api/wiki/Khan-Academy-API-Methods#wiki-user-videos)

他们获得的徽章 - [https://github.com/Khan/khan-api/wiki/Khan-Academy-API-Methods#wiki-badges](https://github.com/Khan/khan-api/wiki/Khan-Academy-API-Methods#wiki-badges)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T15:12:44.440

来自：[卡恩 API Explorer](https://github.com/Khan/khan-api/wiki/Khan-Academy-API)

> 经过身份验证的 api 调用将为您提供有关登录用户（学生或教练/家长）的信息，例如观看的视频、完成的练习、播放列表进度等。此存储库的 README 包含用于经过身份验证的 api 调用的有用说明（和 python 脚本）。试试看！

# javascript - 未定义条目上的 Math.max 和 Math.min NaN

> ID：12957405
> 
> 赞同：20
> 
> 时间：2012-10-18T14:47:32.447
> 
> 标签：javascript, jquery

在 JavaScript中将值传递给`Math.max`or`Math.min`函数时，它们分别返回输入中的最大值和最小值。

但是，如果输入了一条未定义的数据，例如

```
Math.max(5,10,undefined); 
```

返回的结果是`NaN`。有没有一种简单的方法可以使用 JS/jQuery 来解决这个问题？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-18T14:49:28.400

I assume the `undefined` is actually some variable.

You can substitute `-Infinity` for any `NaN` value to ensure a number.

```
var foo;

Math.max(5, 10, isNaN(foo) ? -Infinity : foo); // returns 10 
```

Same concept can be used on `Math.min`, but with `Infinity`:

```
var foo;

Math.min(5, 10, isNaN(foo) ? Infinity : foo); // returns 5 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-18T14:52:45.550

编写自己的`max`函数：

```
function max() {
    var par = []
    for (var i = 0; i < arguments.length; i++) {
        if (!isNaN(arguments[i])) {
            par.push(arguments[i]);
        }
    }
    return Math.max.apply(Math, par);
} 
```

或更短的使用[数组过滤](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/filter)：

```
function max() {
    var args = Array.prototype.slice.call(arguments);
    return Math.max.apply(Math, args.filter(function(val) {
       return !isNaN(val);
    }));
} 
```

用法：

```
max(5, 10, undefined);   // output: 10 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-11-11T00:24:50.117

它很简单：

```
// ES6 (returns: 10)
Math.max(...[5, 10, undefined].filter(Number.isFinite)) 
```

或者：

```
// ES5 (returns: 10)
Math.max.apply(null, [5, 10, undefined].filter(Number.isFinite)) 
```

我认为它是可读的，并且只是传达了它的目的。

说明：我们利用, 过滤掉未定义的值，然后将其作为参数传递给函数，在 ES6 中使用[扩展运算符](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_syntax)，或者在 ES5 中使用方法。[`Number`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number) [`primitive wrapper object`](https://developer.mozilla.org/en-US/docs/Glossary/Primitive#Primitive_wrapper_objects_in_JavaScript)[`Math.max`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/max)[`Function.prototype.apply()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/apply)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-18T14:58:35.567

Check that each number is defined before passing it to `max`. Use an sentinel value as a default (such as `-Infinity`). For min you would want to use `Infinity`:

```
var a = 5;
var b = 10;
var c = undefined;

var defaultForMax = function (num) {
    return typeof num === 'number' ? num : -Infinity;
};

c = defaultForMax(c); // c is now -Infinity

Math.max(a, b, c); // 10 
```

[http://jsfiddle.net/QTckE/](http://jsfiddle.net/QTckE/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-01-20T01:44:11.307

```
// Returns largest numeric value; excludes NaN's.
function getMax(...args) {
 return Math.max(...args.filter(Number.isFinite));
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-05-27T04:33:40.773

在 Math.max 中使用 falsy

```
var foo;

Math.max(5, 10, !isNaN(foo) && foo); 
```

```
var foo;

Math.min(5, 10, !isNaN(foo) && foo); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-04-12T13:22:00.753

在我看来更简单，如果您不介意使用 d3，您可以执行以下操作：

```
d3.max([5,10,undefined]) // 10 
```

**从 d3 文档（[https://github.com/d3/d3-array#statistics](https://github.com/d3/d3-array#statistics)）：**

使用自然顺序返回给定迭代中的最小值。

...

**与内置的 Math.min 不同，此方法忽略 undefined、null 和 NaN 值；这对于忽略丢失的数据很有用。**此外，元素的比较使用自然顺序而不是数字顺序。例如，字符串 [“20”, “3”] 的最小值是“20”，而数字 [20, 3] 的最小值是 3。

# tridion - 防止部署传输包

> ID：12957410
> 
> 赞同：4
> 
> 时间：2012-10-18T14:47:48.120
> 
> 标签：tridion, tridion-2011

我们正在使用 Tridion 2011 SP1。内容交付在 .Net 中。

我们只想让搜索引擎可以使用传输包。该搜索引擎将从传输包中提取所需的内容/元数据并将其编入索引。搜索引擎安装在不同的域/服务器上。

为此，我们要配置一个发布目标，它将内容发布到搜索引擎的服务器，但不会部署内容。只有传输包将在某些文件夹中可用（传入\成功）。我们可以使用 HttpUpload.aspx 并通过禁用 cd_storage_config 或 cd_deployer_conf 中的一些设置来做到这一点。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-18T14:56:36.027

对此的标准方法是扩展 CD 存储过程。[您可以在http://www.sdltridionworld.com/articles/sdltridion2011/tutorials/extending-content-delivery-storage-sdltridion-2011-1.aspx](http://www.sdltridionworld.com/articles/sdltridion2011/tutorials/extending-content-delivery-storage-sdltridion-2011-1.aspx)找到一个很好的解释

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T20:14:26.333

我认为@Jeremy 的方法是***正确***的答案，但是如果用 Java 编写存储机制听起来太费力，您可以只允许将项目发布到文件系统，并安排一个简单的脚本来每天删除所有文件/每小时以节省磁盘空间。

这不需要与 SDL Tridion 进行集成。

# c# - 如何使用 c# 在选中的列表框中显示带有名称（作为对象）的图标？

> ID：12957420
> 
> 赞同：0
> 
> 时间：2012-10-18T14:48:28.360
> 
> 标签：c#, .net, icons

我正在尝试将图标和名称添加到选中列表中。尝试将其作为对象传递，从 exe 中提取图标并将名称硬编码，但问题是我看不到图标和名称。

```
 public class ModuleOption
    {
        private readonly string _name;
        public string name  { get { return _name; } }

        private readonly Icon _icon;
        public Icon Icon { get { return _icon; } }

        public ModuleOption(string name, Icon icon)
        {

            _name = name;
            _icon = icon;
        }

    } 
```

# .net - Automapper 中通过 LINQ 将集合映射到标量的约定

> ID：12957423
> 
> 赞同：1
> 
> 时间：2012-10-18T14:48:36.207
> 
> 标签：.net, automapper, automapper-2

Automapper 已经做了一些很好的约定，例如通过命名约定映射子属性，例如，如果属性上存在这样的属性，则`OrderTotal`映射自。`Order.Total`

我想知道是否有办法用 LINQ 运算符名称做类似的事情。例如，如果我有一个名为 的集合`IEnumerable<Appointment>`，那么如果在我的目标类型上我有一个名为Appointment 的属性并自动调用 AutoMapper `Appointments`，那就太好了。`AppointmentFirst``First()`

目前有没有办法做这样的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T18:37:17.403

没有开箱即用的支持。但是，您可以通过使用[自定义类型转换器来实现它。](https://github.com/AutoMapper/AutoMapper/wiki/Custom-type-converters)

# jquery - 使用数据表进行分页

> ID：12957424
> 
> 赞同：0
> 
> 时间：2012-10-18T14:48:37.830
> 
> 标签：jquery, datatables

我正在使用数据表在页面上显示一些信息，并且我正在将点击事件动态绑定到表的行。它适用于第一页，但是当我导航到第二页时，不会触发 click 事件。我不能使用 .live() 或 .delegate() 因为我的应用程序是单页应用程序，据我所知，这些函数为现在和将来匹配当前选择器的所有元素附加一个事件处理程序。那么，有人可以给我一些合适的解决方案吗？

一种解决方案是在数据表启动之前声明点击事件。

有人可以为我提供这个解决方案的工作示例吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T15:28:19.853

将您的 jquery 操作放在数据表的 **fnDrawCallback**选项中

```
$("#view_users_table").dataTable( { 

   "fnDrawCallback": function() {
            $('.role_cell').css('width','60px');
   }
}); 
```

# xml - 使用带有 xml prettyPhoto url 的 ExternalInterface

> ID：12957425
> 
> 赞同：1
> 
> 时间：2012-10-18T14:48:38.570
> 
> 标签：xml, actionscript-3, externalinterface

我一直在尝试`ExternalInterface`通过 xml 文件将信息的变量传递到 Flash AS3 中，但无法弄清楚如何让数据随着每次新选择而改变。

我设法让它调用`ExternalInterface`并使用初始数据，但我似乎无法让它改变。

我在 HTML 中有以下代码，用于 PrettyPhoto 灯箱，到目前为止它按预期工作：

```
<script type="text/javascript" charset="utf-8">
  $(document).ready(function(){
$("a[rel^='prettyPhoto']").prettyPhoto({hideflash: false, allow_resize: true, callback: function() {PAYPAL.apps.MiniCart.hide(null);}
});
});
function launchPrettyPhoto(urlContent) {
        $.prettyPhoto.open(urlContent);
     }
</script> 
```

要调用 xml 数据，我有许多字段表示图像、拇指、标题、描述，以及用于激活灯箱的链接的 url，如下所示：

```
function loadXML(event:Event):void {
xml=new XML(event.target.data);
var total:Number=xml.pic.length();
for (var i:int = 0; i < total; i++) {
    thumbs[i]=xml.pic.thumb.text()[i];
    images[i]=xml.pic.image.text()[i];
    titles[i]=xml.pic.title.text()[i];
    descriptions[i]=xml.pic.desc.text()[i];
    wwwlink[i]=xml.pic.link.text()[i];
}
loadThumbs();
trace("loading thumbs");    
loader.removeEventListener(Event.COMPLETE, loadXML);
} 
```

在图像的每次更改中，数据都会通过以下几点进行更新，其中（理想情况下）`ExternalInterface`“url”也应该更改，这是我遇到的问题。

在每个新的选择中，数据都会被传递：

```
mainLoader.load(mainRequest);
title_txt.text = titles[theImg]; //Output title
desc_txt.text = descriptions[theImg]; Output Description
link_txt.htmlText = wwwlink[theImg]; Output URL 
```

我有一个按钮来调用启动`ExternalInterface`下面的函数：

```
function callPrettyPhoto(url:String):void{
trace("Calling lightbox");
if (ExternalInterface.available) {
    // ExternalInterface calls function
    ExternalInterface.call("launchPrettyPhoto", url);
}
trace(ExternalInterface.call);
}

function initCall(event:MouseEvent):void {
// Call ExternalInterface
callPrettyPhoto(xml.pic.link.text());
} 
```

就目前而言，一切正常，除了当我更改图像时它无法更新或更改“url”，其余的工作都在它相应地更新所有内容并根据需要调用灯箱。

从我所见，下面的行是发起者，因为它似乎引用了 xml 文件中的第一个 url，并且无法更新其余部分：

```
callPrettyPhoto(xml.pic.link.text()); 
```

我已经尝试过，但无法完全将其提交并希望您有经验的输入到我哪里出错了。

**XML**

```
<images>
<pic>
    <image>images/01_00_00.jpg</image>
    <thumb>images/_t01_00_00.jpg</thumb>
    <title>First Picture</title>
    <desc>Typical description</desc>
    <link><![CDATA[http://www.website.com/_i01_00_01.html?iframe=true&width=100%&height=100%]]></link>
</pic>
</images> 
```

# spss - 合并计数频率SPSS

> ID：12957426
> 
> 赞同：2
> 
> 时间：2012-10-18T14:48:39.960
> 
> 标签：spss

我正在研究由多个响应问题组成的数据集。我想对所有变量运行计数频率并合并图表，以便显示选中该框的人的百分比。我无法弄清楚如何让 SPSS 进行多次计数并合并输出图。有人有一些见识吗？

数据集成立

```
q1 q2 q3 q4 q5
1  -  1  1  1
1  1  1  1  1
1  1  -  1  1
1  -  -  1  - 
```

所以我试图输出的图表将包含变量并输出：

```
q1==== 100%
q2==    50%
q3==    50%
q4==== 100%
q5===  75% 
```

我曾尝试将响应合并到一个变量，但这会导致未对齐数据。这可以通过重新编码来实现吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T13:05:25.827

使用数据 > 定义多个响应集，而不是 MULT RESPONSE。然后您可以在图表生成器中使用多响应变量，如果您有自定义表格选项，您也可以在构建表格时使用它。但是，以这种方式定义的集合定义不能在 MULT RESPONSE 过程中使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T13:26:19.317

为了说明[Jon](https://stackoverflow.com/a/12974907/604456)和 Lanelor 的出色建议，从您的数据开始；

```
data list fixed / q1 TO q5 1-5.
begin data
1  111
11111
11 11
1  1 
end data.
dataset name mr. 
```

我通常不会将其保留为缺失数据，而是在缺少值的情况下重新编码为零（这会改变图表中案例的处理方式 - 所以它确实会产生影响）；

```
recode q1 TO q5 (SYSMIS = 0). 
```

然后，您可以定义多个响应集并将其包含在通过图表构建器构建的图表中。

```
* Define Multiple Response Sets.
MRSETS
  /MDGROUP NAME=$qs CATEGORYLABELS=VARLABELS VARIABLES=q1 q2 q3 q4 q5 VALUE=1
  /DISPLAY NAME=[$qs].

*Make the chart - can use chart builder GGRAPH to include multiple response sets.
GGRAPH
  /GRAPHDATASET NAME="graphdataset" VARIABLES=$qs[name="qs"] COUNT()[name=
  "COUNT"] MISSING=LISTWISE REPORTMISSING=NO
  /GRAPHSPEC SOURCE=INLINE.
BEGIN GPL
 SOURCE: s=userSource(id("graphdataset"))
 DATA: qs=col(source(s), name("qs"), unit.category())
 DATA: COUNT=col(source(s), name("COUNT"))
 GUIDE: axis(dim(1), label("$qs"))
 GUIDE: axis(dim(2), label("Count"))
 SCALE: cat(dim(1), include("q1", "q2", "q3", "q4", "q5"))
 SCALE: linear(dim(2), include(0))
 ELEMENT: interval(position(qs*COUNT), shape.interior(shape.square))
END GPL. 
```

同样，如果创建[Lanelor](https://stackoverflow.com/a/12974780/604456)建议的表；

```
MULT RESPONSE GROUPS=$q1toq5 (q1 q2 q3 q4 q5 (1))
  /FREQUENCIES=$q1toq5. 
```

您可以在表格中选择所需的统计数据，然后右键单击并从这些选择中生成一个图表（在屏幕截图之后，它包括它在我的机器上使用我的个人图表模板生成的图表）；

![在此处输入图像描述](../Images/83a58839ba72255ce716660ea28500aa.png)

![在此处输入图像描述](../Images/c6c9c1d3b73a00c3c5f832b06a8f6ff5.png)

GGRAPH 和 MRSETS 命令更强大，允许对绘图进行更多自定义，但 Lanelor 的建议对于一些快速 EDA 来说是很好的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T12:57:45.463

从菜单中：Analyze->Multiple Response->Define Variable Set->Move to "Selected" q1 to q5，检查二分法类型并输入要计数的数字（在示例中为 1）。选择一个名称并确认。然后Analyze->Multiple Response->Frequencies-> /name of the created set/。

如果您必须重复许多变量，请查看 SPSS 中的语法编码，例如：

```
MULT RESPONSE GROUPS=$q1toq5 (q1 q2 q3 q4 q5 (1))
  /FREQUENCIES=$q1toq5\. 
```

# java - JFrame 调用多个并发线程来更新调用者 JFrame 中的 JProgressBar

> ID：12957427
> 
> 赞同：4
> 
> 时间：2012-10-18T14:48:43.600
> 
> 标签：java, multithreading, swing, synchronization, event-dispatch-thread

事情是这样的：我有一个用于 Java 应用程序主窗口的 JFrame，它包含一个带有多个 JProgressBar 的面板。我想为每个 JProgressBar 启动一个线程，它将自己启动另一个线程。当任何这个“辅助”线程完成时，我想更新我的 JFrame 中的 JProgressBar。此外，在安排这一切之前，由于我不希望用户能够单击 JFrame 上的任何内容，因此我还想在 JFrame 中设置一些按钮 setEnabled(false)。简单的？

```
ActivarBotones abFalse = new ActivarBotones(false);
abFalse.start();
try {
    abFalse.join();
} catch (InterruptedException e1) {
    // TODO Auto-generated catch block
    e1.printStackTrace();
}

EstablecerConexiones ec = new EstablecerConexiones();
ec.start();
try {
    ec.join();
} catch (InterruptedException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}

ActivarBotones abTrue = new ActivarBotones(true);
abTrue.start(); 
```

两个问题。

1.  如果我从上面运行代码，则没有任何更新。如果我只启动 ec 线程，一切正常。

2.  我对同步知之甚少，也不知道我应该怎么做才能同时启动所有“主”线程。

有什么线索吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T22:50:06.097

这是一个小样本，我认为它不能回答你所有的问题，但它展示了基本概念（有一个生病的妻子并照顾一个 6 个月大的孩子，用一只手打字：P）

```
public class ThreadedProgress {

    public static void main(String[] args) {
        new ThreadedProgress();
    }

    public ThreadedProgress() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                JPanel progressPane = new JPanel(new GridBagLayout());
                JProgressBar progressBar = new JProgressBar(0, 100);
                progressPane.add(progressBar);

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(progressPane);
                frame.setSize(200, 200);
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);

                new Thread(new MainThread(progressBar)).start();

            }

        });
    }

    public interface CallBack {
        public void done(Runnable runnable);
    }

    public static class MainThread implements CallBack, Runnable {

        public static final Object UPDATE_LOCK = new Object();
        public static final Object WAIT_LOCK = new Object();
        private List<Runnable> running = new ArrayList<>(25);
        private List<Runnable> completed = new ArrayList<>(25);
        private final JProgressBar progressBar;

        public MainThread(JProgressBar progressBar) {
            this.progressBar = progressBar;
        }

        @Override
        public void done(Runnable runnable) {
            synchronized (UPDATE_LOCK) {
                running.remove(runnable);
                completed.add(runnable);
            }
            int count = running.size() + completed.size();
            updateProgress(completed.size(), count);
            synchronized (WAIT_LOCK) {
                WAIT_LOCK.notify();
            }
        }

        protected void updateProgress(final int value, final int count) {
            SwingUtilities.invokeLater(new Runnable() {
                @Override
                public void run() {
                    int progress = Math.round(((float) value / (float) count) * 100f);
                    progressBar.setValue(progress);
                }
            });
        }

        @Override
        public void run() {
            for (int index = 0; index < 5; index++) {
                ChildSpawn spawn = new ChildSpawn(this);
                running.add(spawn);
            }
            for (Runnable runnable : running) {
                new Thread(runnable).start();
            }

            while (running.size() > 0) {
                synchronized (WAIT_LOCK) {
                    try {
                        WAIT_LOCK.wait();
                    } catch (InterruptedException ex) {
                    }
                }
            }
            System.out.println("I'm all done");
        }
    }

    public static class ChildSpawn implements Runnable {

        private CallBack callBack;

        public ChildSpawn(CallBack callBack) {
            this.callBack = callBack;
        }

        @Override
        public void run() {
            try {
                Thread.sleep((long)Math.round(Math.random() * 5000));
            } catch (InterruptedException ex) {
            }

            callBack.done(this);            
        }

    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T14:59:54.817

**`ActivarBotones`线程未完成。**

如果它在您不运行该线程时有效，那么该线程中的某些内容未完成。否则，它将通过`EstablecerConexiones`线程。由于您`.join()`在启动该线程后调用它，因此在该线程完成之前代码不会继续。所以那里一定有什么东西阻塞或陷入循环。

`ActivarBotones`在调试模式下运行您的应用程序并在线程中放置一个断点。追踪它，看看为什么它没有完成。

对于您的第二个问题，如果您启动每个主线程但在它们全部启动之前不加入它们，它们将全部同时运行。当然，这大大简化了事情。许多人更喜欢使用执行器服务来控制他们的线程。您还必须担心线程安全实现，以免遇到同步问题。最后，如果您正在与 Swing 组件交互，那么所有这些都需要在专用的事件调度线程上完成。

# model-view-controller - MVC，控制器 - 用例

> ID：12957428
> 
> 赞同：0
> 
> 时间：2012-10-18T14:48:45.200
> 
> 标签：model-view-controller, controller, use-case

我了解到您应该将 MVC-OOD 中的控制器类设置为一个用例，从上到下只使用一种运行 MVC 类的方法。

是否可以在一个控制器中使用不同的方法来获得更多控制和更好的概览？

假设您想运行一个控制器，该控制器将显示一个登录表单（从视图中获取 html 等）。如果用户未登录，同一控制器还将显示注销按钮。这可以通过控制器中的单个方法完成，但使用两种方法似乎更好。如果您想要登录表单，则调用一种方法，如果您想注销按钮，则调用一种方法。（只是一个例子）

那么，专业人士怎么说。每个控制器应该只包含一个“用例”方法，还是可以包含多个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T15:23:58.387

> [**TL;DR——**你误解了 MVC 设计模式并且做错了。]

控制器不负责呈现界面，也不负责表示逻辑。控制器不*显示*任何内容。相反，每个控制器的方法处理不同用户的请求。它从所述请求中提取数据并将其传递给模型层和关联的视图。

关于显示什么以及如何显示的决定在视图的范围内。视图包含 MVC 模式中的表示逻辑。在 Web 应用程序的上下文中，视图创建响应。他们可以从多个模板组成一个模板，或者只发送一个 HTTP 标头。

控制器可以通过将请求的某些特定值传递给该视图来向关联视图发出信号，但视图中的大多数决策都是基于视图从模型层中的不同服务请求的信息。

控制器的方法基于用户可以发送的请求类型。例如，在身份验证表单中，它可能是：`GET /login`和/或`POST /login`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T19:34:27.383

重要的是要记住 MVC 的两件事，首先，它是一个面向对象的架构，其次，它应该用于分离关注点。

关注点分离与抽象有关，它是为了帮助我们理解手头的代码部分。模型和视图都是相关对象的集合/域。每个对象都是完全完整的并且与其领域相关。

您将在视图中找到具有按钮、图像、文本输入等类型的对象，并且您将在模型中找到与业务相关的对象（用户、帐户、配置文件等）。

您的模型中的对象集合往往不会做太多事情，它们需要逻辑将对象连接在一起。（或者简单地将简单的单对象请求委托给正确的对象）

Controller 为您的模型提供接口，并包含与模型相关的业务逻辑以及模型对象之间的交互。您的模型将有一个控制器，并且控制器将有多个与您的用例保持一致的方法。

# postgresql - 比较同一数据库中表之间的数据

> ID：12957432
> 
> 赞同：0
> 
> 时间：2012-10-18T14:48:55.903
> 
> 标签：postgresql

我的要求是我必须比较同一数据库中具有相同架构的两个不同表之间的数据，

目前我在同一个表的不同字段中进行比较，如果某些验证失败，错误将存储在一个表中，例如：

```
 IF (NEW.vision IS NULL and new.vispres IS NOT NULL)                   
      THEN INSERT INTO exception_detail( noces,exception) VALUES                        
      (new.no,'please check the values if vision is null then vispres should also be null');
    END IF; 
```

我想对相同元素的两个表进行相同类型的比较（否），例如

```
 IF (TABLE1.NEW.vispres IS NULL and TABLE2.new.vispres IS NOT NULL)                   
      THEN INSERT INTO exception_detail( noces,exception) VALUES                          
      (new.no,'please check the values if vispres is null for number 5 in table 1   then vispres should also be null for number 5 in Table 2 ');
    END IF; 
```

请帮助提前谢谢

我可以做类似的事情：

```
 SELECT q1.* FROM TABLE1 q1
       INNER JOIN TABLE2 q2 ON (q1.noces = q2.noces); 
```

我认为它将给出两个表中 noces 相同的所有记录

现在我想继续比较输出的每一行，如果数据不同，它必须抛出异常，是否有可能：

```
 foreach row of above output{

          if (q1.name != q2.name)
          Do something ;

        if (q2.address < q1.address)
         Do something ;

         } 
```

但这一切都必须在一个查询或触发器中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T10:56:58.833

我会看三个案例。

1.  ID相同，但数据不同

2.  在 table_b 中找不到 table_a 中的 ID

3.  在 table_a 中找不到 table_b 中的 ID

SQL 可能如下所示：

```
SELECT (r).* FROM ( -- Wrapper query
   SELECT a as r
     FROM table_a a
     JOIN table_b b ON a.id = b.id AND a <> b
   UNION ALL
   SELECT a as r
     FROM table_a a
LEFT JOIN table_b b ON a.id = b.id
    WHERE b.id IS NULL
   UNION ALL
   SELECT b AS r
     FROM table_b b
LEFT JOIN table_a a ON a.id = b.id
    WHERE a.id IS NULL
) t; 
```

可以将它折叠成一个案例和一个完整的外部连接，但这应该会给你一个基本的想法。

# entity-framework - 如何插入外键

> ID：12957438
> 
> 赞同：0
> 
> 时间：2012-10-18T14:49:04.320
> 
> 标签：entity-framework

我有 2 个班 Bill 和 BillType。每个 Bill 都应该有一个 BillType，TypeId 应该是一个 FK。使用 Code First，向我的数据库表 Bills 添加一个名为 BillType_TypeId 的列，该列与表 BillTypes 具有 FK 关系。

```
public class Bill
{
    [Key]
    public int BillId { get; set; }

    [Required, MaxLength(100)]
    public string Name { get; set; }

    [Required]
    public decimal Amount { get; set; }

    public System.DateTime DueDate { get; set; }

    [Required]
    public Guid UserId { get; set; }
}

public class BillType
{
    [Key]
    public int TypeId { get; set; }

    [Required, MaxLength(100)]
    public string Name { get; set; }

    public virtual List<Bill> Bills { get; set; }
} 
```

当我需要将 TypeId 插入 Bills 表时，我的问题就出现了。我一直在使用此代码插入：

```
public class BillActions
{
    private BillContext _db = new BillContext();

    public Boolean InsertNewBill(int billType, string name, decimal amount, DateTime dueDate, Guid userId)
    {
        var bill = new Bill {                
            xxx                              <-- problem is here
            Name = name,
            Amount = amount,
            DueDate = dueDate,
            UserId = userId 
        };

        _db.Bills.Add(bill);

        _db.SaveChanges();
        return true;
    }
} 
```

没有公开的对象等于 int billType。我不确定如何在保持 FK 约束的同时添加它。我该如何做到这一点。另外，我正在使用 Entity Framework 5。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T14:55:52.310

您可以更新您的类以公开 BillType 参考：

```
public class Bill
{
    [Key]
    public int BillId { get; set; }

    [Required, MaxLength(100)]
    public string Name { get; set; }

    [Required]
    public decimal Amount { get; set; }

    public System.DateTime DueDate { get; set; }

    [Required]
    public Guid UserId { get; set; }

    public int BillTypeId {get;set;}
    public BillType BillType {get;set;}
} 
```

然后你的创建：

```
 var bill = new Bill {                
        BillTypeId = billType,
        Name = name,
        Amount = amount,
        DueDate = dueDate,
        UserId = userId 
    }; 
```

如果你不想在账单上暴露 BillType 的引用，你还可以添加一个流畅的映射：

```
 modelBuilder.Entity<BillType>()
            .HasMany(bt => bt.Bills)
            .WithOptional()
            .HasForeignKey(bt => bt.BillTypeId); 
```

# ncurses - Ncurses：F1-F5 键

> ID：12957439
> 
> 赞同：2
> 
> 时间：2012-10-18T14:49:05.997
> 
> 标签：ncurses, curses

我在curses.h 中有一个带有功能键的问题。我在不同的网站/教程上看到了这个小程序

```
#include <ncurses.h>

int main()
{       int ch;

    initscr();                      /* Start curses mode            */
    raw();                          /* Line buffering disabled      */
    keypad(stdscr, TRUE);           /* We get F1, F2 etc..          */
    noecho();                       /* Don't echo() while we do getch */

    printw("Type any character to see it in bold\n");
    ch = getch();
    while (ch != KEY_F(1))
    {
            if(ch == KEY_F(1))      
                    printw("F1 Key pressed: Ending program.\n");

            else
            {       printw("The pressed key is ");
                    attron(A_BOLD);
                    printw("%c\n", ch);
                    attroff(A_BOLD);
            }

            refresh();     

            ch = getch();

    }
    printw("end\n");
    endwin();                       /* End curses mode                */

    return 0;
} 
```

F6-F12 键工作正常，返回的代码也很好（例如：如果按下 F6，则为 270）。但是，如果我按 F5 不会返回 269，就像它应该是的那样，而是发生以下情况（仅通过按 F5 一次）：

```
Type any character to see it in bold
The pressed key is ^[
27
The pressed key is [
91
The pressed key is 1
49
The pressed key is 5
53
The pressed key is ~
126 
```

所以我认为整个逃生序列都回来了。我在互联网上阅读了有关此问题的信息，有两次提示将 TERM 变量更改为 xterm 或 vt100。所以我尝试将 TERM 更改为 vt 220 和 xterm，但没有任何改变。当我将其更改为 vt100 时，F6-F12 也不起作用。

任何人都可以帮助我如何识别用户是否按 F1-F5？可以很好地识别回车、退格、向上、向下等键。

最好的祝福

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T13:36:10.220

听起来`terminfo`您的终端发送的内容与实际执行的内容之间存在分歧。可能是由于`terminfo`目标机器上的文件不正确、`$TERM`设置错误或其他原因造成的。

我会先比较什么

```
$ infocmp -L 
```

在目标机器上说，与终端在运行时实际发送的内容相比，例如，`cat`.

如果您正在运行*xterm*，也许您有一个`~/.Xresources`翻译功能键的文件。VMS 用户通常会以这种方式重新映射 F1 - F5 键。许多终端仿真器（如 Putty）也有重新映射这些键的选项。

# java - JAVA：json + websocket

> ID：12957440
> 
> 赞同：4
> 
> 时间：2012-10-18T14:49:06.837
> 
> 标签：java, json, websocket

我正在与朋友一起创建编程项目。我们把它分成两部分，我负责客户端（简单的窗口应用程序），他负责服务器。我应该在 websocket 的帮助下将 JSON 对象发送到他的服务器（他给了我信息，我应该发送什么[http://pastebin.com/dmYBtN25](http://pastebin.com/dmYBtN25)）。我知道如何创建 json 对象，但对我来说问题是如何将 websocket lib 与 json 结合使用（目前我正在使用 weberknecht 和 json-lib ）。下面是我发现的一个示例，可能是我的客户的基础。我会很高兴获得提示和帮助，或者只是简单的示例如何做到这一点。

```
import java.net.URI;
import java.net.URISyntaxException;

import de.roderick.weberknecht.WebSocket;
import de.roderick.weberknecht.WebSocketConnection;
import de.roderick.weberknecht.WebSocketEventHandler;
import de.roderick.weberknecht.WebSocketException;
import de.roderick.weberknecht.WebSocketMessage;

public class App {
    public static void main(String[] args) {

    try {
        URI url = new URI("ws://127.0.0.1/test");
        WebSocket websocket = new WebSocketConnection(url);

        // Register Event Handlers

        websocket.setEventHandler(new WebSocketEventHandler() {
            public void onOpen() {
                System.out.println("--open");
            }

            public void onMessage(WebSocketMessage message) {
                System.out.println("--received message: "
                        + message.getText());
            }

            public void onClose() {
                System.out.println("--close");
            }
        });

        // Establish WebSocket Connection
        websocket.connect();

        // Send UTF-8 Text
        websocket.send("hello world");

        // Close WebSocket Connection
        websocket.close();
    } catch (WebSocketException wse) {
        wse.printStackTrace();
    } catch (URISyntaxException use) {
        use.printStackTrace();
    }
} 
```

}

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T16:05:00.240

你有没有尝试过：

```
websocket.send("{\"firstName\": \"John\"}" /* stick your JSON here */); 
```

如果您知道如何创建应该这样做的 JSON。

如何使用 google gson 创建 JSON 的示例：

```
import com.google.gson.Gson;
import com.google.gson.GsonBuilder;

/**
 * @author jadlr
 */
public class UserConnected {

private static final Gson GSON = new GsonBuilder().setPrettyPrinting().create();

private final int event;
private final String cookie;
private final From from;
private final Channel channel;

public UserConnected(int event, String cookie, From from, Channel channel) {
    this.from = from;
    this.cookie = cookie;
    this.event = event;
    this.channel = channel;
}

public int getEvent() {
    return event;
}

public String getCookie() {
    return cookie;
}

public From getFrom() {
    return from;
}

public String toJson() {
    return GSON.toJson(this, UserConnected.class);
}

public static class From {

    private final int id;
    private final String userId;

    public From(int id, String userId) {
        this.id = id;
        this.userId = userId;
    }

    public int getId() {
        return id;
    }

    public String getUserId() {
        return userId;
    }

}

public static class Channel {

    private final int id;
    private final String name;

    public Channel(int id, String name) {
        this.id = id;
        this.name = name;
    }

    public int getId() {
        return id;
    }

    public String getName() {
        return name;
    }

}

public static void main(String[] args) {

    UserConnected userConnected = new UserConnected(0, "cookie123", new From(1, "user"), new Channel(1, "channel"));
    System.out.println(userConnected.toJson());

}

} 
```

# c# - 如何通过 JavaScript Asp.net 回发服务器

> ID：12957442
> 
> 赞同：2
> 
> 时间：2012-10-18T14:49:17.720
> 
> 标签：c#, asp.net, postback

```
namespace KetBanBonPhuong.Controls.Default
{
     public partial class SugFriends : System.Web.UI.UserControl
    {
        private string Uid;

        protected void Page_Load(object sender, EventArgs e)
        {
            if (Request.Cookies["UId"] != null)
        {
            string value = Request.Cookies["UId"].Value;
            Uid = UserService.GetId_Cookie(value);
        }
        else
        {
            Uid = Session["Id"].ToString();
        }
        LoadListSuggest();
    }

    private void LoadListSuggest()
    {
        string str = "";
        List<RankByUser> list = new List<RankByUser>();
        list = RankByUserService.GetListRank(Uid);
        foreach (RankByUser rank in list)
        {
            str += "<li><div class=\"sug_acc\">"
                + "<a href=\"/" + rank.Link + ".aspx\"><img src=\"" + rank.Avatar + "\" alt=\"avatar\"/></a>"
                + "<a href=\"/" + rank.Link + ".aspx\" class=\"sug_name\">" + rank.LastName + " " + rank.FirstName + "</a>"
                + "</div>"
                + "<div class=\"rank\">"
                + "<a href=\"#\" title=\"Xem chi tiết\" class=\"num\">rank: " + rank.Rank + "</a>"
                + "<a href=\"#\" class=\"button mycoblue\">Kết bạn</a>"
                + "</div></li>";
        }
            ltrListSug.Text = str;
        }
    }
}` 
```

`SugFriends.ascx`这是一个正在添加的用户控件`Default.Master`

当我点击`"a.button"`回发事件到服务器时？（我想向数据库插入数据，我使用了 Sql server）

怎么做？让标签成为`onclick`“喜欢”的事件`LinkButton: Onclick()`？

感谢您的帮助！我找到了解决这个问题的方法！我为每个标签 a 使用 Ajax onclick，事件发布 Ajax.aspx，在这里我可以使用数据库编写代码！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T14:58:34.163

Add an `onclick="(javascript:__doPostBack('','');"` attribute to the `<a>` tag to perform a postback via Javascript. Like this:

```
 + "<a href=\"#\" class=\"button mycoblue\" onclick=\"(javascript:__doPostBack('','');\">Kết bạn</a>" 
```

[More details here](https://stackoverflow.com/questions/1305954/asp-net-postback-with-javascript)

* * *

Response to comment:

Try creating a button on the page `<asp:Button ID="btnPlaceHolder" Visible="False" runat="server" />` and then do what I said in this solution but instead use `__doPostBack('<%=btnPlaceHolder.UniqueID %>', '')`

From there, you can use the method block `Private Sub btnPlaceHolder_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles btnPlaceHolder.Click` to run the code you want on postback.

# sql - SQL How to group a table with special condition and join to another table

> ID：12957446
> 
> 赞同：0
> 
> 时间：2012-10-18T14:49:28.043
> 
> 标签：sql, sql-server-2008, group-by

i have Table PRICE

```
CodePrice  CodeClient  TheZone Tempo W_Begin W_End Price
A_0_49       88989       1       1      0      49   20
A_50_99      60000       1       1      50     99   10
B_0_49       88989       2       1      0      49   30
C_0_49       50000       3       4      0      49   40 
```

Table Ordre

```
 NoID  CodeClient    Cp   Agence  TheZone Tempo Weight 
    01      88989     44   bidon      1      1     12
    02      60000     49   toto       2      2     10
    03      60000     49   bigoi      1      1     56
    04      88989     49   titi       3      3     8
    05      50000     44   bidon      1      1     5 
```

How can i show the result like this:

```
CodePrice   TheZone Tempo W_Begin W_End  SUm_Weight  SUM_Price  CountIDOrdre  CP   Agence
  A_0_49        1       1      0      49       17         40          2         44    bidon
  A_50_99       1       1      50     99       56         10          1         49    bigoi
  B_0_49        2       1      0      49       0          0           0         null  null
  C_0_49        3       4      0      49       0          0           0         null  null 
```

in 1 SQL Syntax (1 Step).

Nowdays i make it in 2 step

```
SELECT CodePrice
      ,CodeClient
      ,TheZone         
      ,Tempo   
      ,W_Begin
      ,W_End
      ,Price          
  FROM PRICE
  LEFT JOIN T_TARIF_ZONE ON PRICE.ZONE = T_TARIF_ZONE.NO_ID     
  LEFT JOIN CLIENT ON PRICE.CodeClient= CLIENT.CODE_CL     

  WHERE CodeClient= @NO_CLIENT AND TheZone = @ZONE AND UNITE = @UNITE 
  AND (Tempo   IN (SELECT ParsedString From dbo.ParseStringList(@ModLiv)))

  ORDER BY MONTANT 
```

after i select the price, now i can group the ordre on each price depends on Weight, zone, and another variable

```
SELECT count(NoID) as LVId            
      ,sum(Weight)as Tot_Poids        
      ,sum(Price) as Tot_Prix      

  FROM [Ordre]
  WHERE Weight>= @TR_DEB AND Weight<= @TR_FIN AND LE_ZONE = @LE_ZONE AND ENLEV_UNITE = @ENLEV_UNITE 
        AND DATE_CLOTURE >= @Date_Deb AND DATE_CLOTURE <= @Date_Fin AND STATUT_LV = 2 AND FACTURATION = @FACTURATION

  HAVING count([NOID]) > 0 
```

# asp.net - Rules of thumb when storing large amounts of data in a database

> ID：12957447
> 
> 赞同：2
> 
> 时间：2012-10-18T14:49:30.053
> 
> 标签：asp.net, database, sql-server-2008

I am thinking about creating an online journal that will hold large amounts of text. I am looking at purchasing one of go-daddys packages that comes with a database of 200mb. So are there any rules of thumb when it comes to storing large amounts of text in a database?

Or would it be better if I stored the data in text files and then request the specific file when it is needed?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T17:14:55.743

基本上，您将每个数据行的总最大大小相加，然后将其乘以预期的行数。

该脚本将使您对行大小有一个很好的了解。

```
 SELECT  OBJECT_NAME(sc.[id]) TableName,
    COUNT(sc.name) NumberColumns,
    SUM(sc.length) + 96 MaxRowLength,
    8060 / (SUM(sc.length) + 96) AS RecordsPerPageFROM  syscolumns sc
    INNER JOIN sysobjects so ON sc.[id] = so.[id]WHERE  OBJECT_NAME(sc.id) = 'Blah'GROUP BY OBJECT_NAME(sc.[id])ORDER BY SUM(sc.length) DESC 
```

此链接将为您提供更多信息 [http://www.simple-talk.com/sql/database-administration/estimating-disk-space-requirements-for-databases/](http://www.simple-talk.com/sql/database-administration/estimating-disk-space-requirements-for-databases/)

# php - getting hasMany records of a HABTM relationship

> ID：12957458
> 
> 赞同：0
> 
> 时间：2012-10-18T14:49:51.397
> 
> 标签：php, cakephp

I have tables: `categories` HABTM `sculptures` hasMany `images`

from the `CategoriesController#find()` produces an array like so:

```
array(
    'Category' => array(
        'id' => '3',
        'name' => 'Modern',
    ),
    'Sculpture' => array(
        (int) 0 => array(
            'id' => '25',
            'name' => 'Ami',
            'material' => 'Bronze',
            'CategoriesSculpture' => array(
                'id' => '18',
                'category_id' => '3',
                'sculpture_id' => '25'
            )
        ),
         (int) 1 => array(
                'id' => '26',
                'name' => 'Charis',
                'material' => 'Bronze',
                'CategoriesSculpture' => array(
                    'id' => '19',
                    'category_id' => '3',
                    'sculpture_id' => '26'
                )
            )
    )
) 
```

I'd like to be able to get the images related to sculpture in the array as well if this is possible?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T16:23:05.293

执行此操作的简单方法是在调用`find()`（[示例](http://api20.cakephp.org/class/model#method-Modelfind)）时将递归设置为 2。这将告诉`find()`连接所有关联模型以及与关联模型关联的模型。

但是，这种方法可能会导致您的数据集变得非常大，因此更好的方法是在包含更深层次的关联时使用可包含的[行为。](http://book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html#containing-deeper-associations)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T16:57:51.563

使用 CakePHP 的[Containable Behavior](http://book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html)。在阅读了它并按照说明进行操作后，您的发现应该如下所示：

```
$this->Category->find('all', array(
    'contain' => array(
        'Sculpture' => array(
            'Image'
        )
    )
)); 
```

在您的类别模型中，您需要：

```
public $actsAs = array('Containable');
public $recursive = -1; //can set this in many places, but it must be -1 for the Containable find to work. 
```

# ruby-on-rails - Rails LIMIT per GROUP

> ID：12957459
> 
> 赞同：1
> 
> 时间：2012-10-18T14:49:52.197
> 
> 标签：ruby-on-rails, postgresql, activerecord, ruby-on-rails-3.2

I am trying to get records of each category limited to 5, but I ended up returning only 5 records.

How can I translate this sql statement in Rails ActiveRecord?

```
SELECT *
FROM "jobs" a
WHERE (
  SELECT COUNT(*)
  FROM jobs
  WHERE ID = a.ID
) <= 5
AND jobkey_confirmation IS NOT NULL
AND EXTRACT(MONTH from created_at) = EXTRACT(MONTH from now()) 
```

I was just able to do the following, which returned only 5 records as mentioned above:

```
scope :confirmed_this_month, where("jobkey_confirmation IS NOT NULL AND EXTRACT(MONTH from created_at) = EXTRACT(MONTH from now())").group("category").limit(5).order("created_at DESC") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T15:03:11.510

你可以使用 find_by_sql 吗？

```
Job.find_by_sql('SELECT * FROM "jobs" a WHERE (SELECT COUNT(*) FROM jobs WHERE ID = a.ID ) <= 5 AND jobkey_confirmation IS NOT NULL AND EXTRACT(MONTH from created_at) = EXTRACT(MONTH from now())) 
```

或者您是否希望用 AR Calls 完全取代它？

-- 从评论中提取代码----

```
def self.limited_grouped_jobs 
    find_by_sql("SELECT * FROM jobs a WHERE (SELECT COUNT(*) FROM jobs WHERE ID = a.ID ) <= 5 AND jobkey_confirmation IS NOT NULL AND EXTRACT(MONTH from created_at) = EXTRACT(MONTH from now())")
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T15:06:58.763

```
select j.*
from
    jobs j
    inner join (
        select
            row_number() over (partition by category_id order by id) rn,
            id
        from jobs
        where
            jobkey_confirmation IS NOT NULL
            AND EXTRACT(MONTH from created_at) = EXTRACT(MONTH from now())
    ) i on i.id = j.id
where rn <= 5 
```

# iphone - Synchronize Directory of Files Between Server and iOS Application

> ID：12957463
> 
> 赞同：8
> 
> 时间：2012-10-18T14:49:59.513
> 
> 标签：iphone, objective-c, ios

I am building an internal iOS application (so - it won't ever be in the app store), and I need to keep a directory of content synchronized between a server and each of the instances of the iOS application. This would be easy enough if I just wanted to delete and re-download this content each time, but I would rather use something similar to rsync to only download the elements that have changed.

I haven't found any good way to utilize rsync. I considered looking at Objective-Git as a possibility here, but at a quick glance it looked like there is still a lot of the support for remote repositories that isn't supported yet.

As a final note, while this won't be in the app store, I will not be jailbreaking these devices and I would prefer to not rely on any private API's (although if there was an elegant solution that utilized private API's I might consider it).

Thoughts?

ADDITIONAL NOTE: This needs to be an isolated solution. I won't be relying on outside services (like Dropbox, Box.net, etc...). This needs to work solely between the device and the server (which is on a local network with the device).

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T10:20:22.863

使用 HTTP 列出服务器上每个文件夹的内容。将每个文件的最后修改时间与设备上的比较，并识别添加/删除的文件。获取添加和修改的文件，删除已删除的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T00:01:51.293

听起来您可能正在要求一个已经这样做的库，但是如果您没有找到一个库，那么使用服务器上的 stat(2) 和相同或更高版本从头开始编写它显然是相当容易的- iOS 设备上的等效级别。让 iPhone 将带有修改日期的文件树发送到服务器，并返回一个插入/删除/更新操作列表，以处理每个文件的 url（或其他），以便您可以在后台线程上逐步执行它们。让来自服务器的新/更新文件的信息包括服务器具有的 mod 日期，以便您可以在 iOS 设备上将其设置为相同，并在向服务器询问每个文件的状态时发送该日期（使用文件系统来存储它，但它可以工作）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T20:11:43.030

为什么不直接设置一个 RESTful 接口并通过 HTTP 来做呢？这样您就可以轻松地查询修改时间以确定是否需要更新客户端或服务器文件。您可能还想跟踪客户端上的哪些文件已同步，以便您可以轻松知道要添加或删除哪些文件。这可以通过一个简单的 .sync 文件或使用 plist / sqlite / 等来完成。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-27T05:34:25.687

如果您考虑使用 FTP，可以使用一些非常先进的客户端库。

例如，[iOS Chilkat 包](http://www.chilkatsoft.com/downloads_ios.asp)包含一个支持双向同步的 FTP 客户端库。它不是免费的，但很便宜——而且你会得到一大堆其他东西，这些东西有一天可能会被证明是有用的。这是一个 iOS 拉下所有添加和更改的示例（模式 2）：

[http://www.example-code.com/ios/ftp_syncLocalTree.asp](http://www.example-code.com/ios/ftp_syncLocalTree.asp)

一个警告 - 仅从示例来看，它似乎没有同步删除。如果这是一项要求，您可以在同步后立即自行完成，而无需付出太多努力。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-24T14:23:59.533

考虑到最初的问题， acrosync（请参阅[https://acrosync.com/library.html](https://acrosync.com/library.html)）似乎很合适，但是我自己还没有使用它。

# c# - Razor 从输入类型文本中读取文本文件到内存

> ID：12957466
> 
> 赞同：1
> 
> 时间：2012-10-18T14:50:09.247
> 
> 标签：c#, asp.net-mvc, file-upload

试图从用户选择的文本文件中将文本读入内存

模型：

```
public HttpPostedFileBase File { get; set; } 
```

看法

```
<form action="" method="post" enctype="multipart/form-data" id="MyForm">
                @Html.TextBoxFor(m => m.File, new { type = "file" })
                 <input type="submit" name="btnSubmit" id="ProcessAll" value="Process All" />
            </form> 
```

控制器：

```
[HttpPost]
    public ActionResult FileToFasta(F2FModel model)
{
//Need to read file to a string without uploading it
return View(model);
} 
```

有什么想法吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T14:51:10.500

```
new StreamReader(model.File.InputStream).ReadToEnd() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T14:52:49.003

使用 System.IO 命名空间。

```
var sw = new StreamReader(model.File.InputStream);
var text = sw.ReadToEnd();
sw.Close(); 
```

# mpmovieplayercontroller - It does not work when I use MPMoviePlayerController to play mp4

> ID：12957475
> 
> 赞同：0
> 
> 时间：2012-10-18T14:50:29.840
> 
> 标签：mpmovieplayercontroller, mp4, xcode4.5

```
NSURL *fileURL=[NSURL fileURLWithPath:[NSString stringWithFormat:@"%@/start.m4v",  [[NSBundle mainBundle]  resourcePath]]];    
MPMoviePlayerController *moviePlayerController=[[MPMoviePlayerController alloc]initWithContentURL:fileURL];
[[NSNotificationCenter defaultCenter]addObserver:self selector:@selector(moviePlaybackComplete:) name:MPMoviePlayerPlaybackDidFinishNotification object:moviePlayerController];
[moviePlayerController prepareToPlay];
[self.view addSubview:moviePlayerController.view];
moviePlayerController.fullscreen=YES;
[moviePlayerController play];
moviePlayerController.scalingMode=MPMovieScalingModeFill; 
```

It dose not work.Always white,nothing at all!What's wrong?

# c++ - What is the previous value in this loop?

> ID：12957476
> 
> 赞同：4
> 
> 时间：2012-10-18T14:50:32.417
> 
> 标签：c++

Here is part of my code. The rest is just the function definitions. I have an array of 20 x 20 that records the temperature of a plate. I need to reiterate through a loop until no cell in the array changes more than 0.1 degree (I refresh the values through every iteration) How would you monitor the largest change for any cell in an array in order to determine when to stop iterating? Right now I have tried this, but it doesn't output correctly. I believe it is because I am incorrectly defining my previous one to compare the current one with.

```
while (true)
{
    bool update = false;
    for (int a = 1; a < array_size -1; a++)
    {
        for (int b = 1; b < array_size -1; b++)
        {             
            hot_plate[a][b] = sum_cell(hot_plate, a, b);

        }
    } 

    for (int a = 1; a < array_size-1; a++)
    {
        for (int b = 1; b < array_size-1; b++)
        {
            hot_plate_next[a][b]=sum_cell(hot_plate_next, a,b);
            if (abs(hot_plate_next[a][b] - hot_plate[a][b]) > 0.1)
            {
                update = true;
            }
            hot_plate_next[a][b] = hot_plate[a][b];
            cout << hot_plate[a][b] << " ";
        }  
    }

    if (!update) {
        break;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T15:01:47.843

问题是`update`当单元格的变化*较小*时您会覆盖。在这种情况下，任何变化较小的单元格都将停止迭代。

像这样构造你的循环：

```
float largest_change = 0.0f;
do {
    largest_change = 0.0f;

    for (...) {
        float new_value = ...
        float change = abs(new_value - hot_plate[a][b]);
        if (change > largest_change)
            largest_change = change;
        hot_plate[a][b] = change;
    }
} while (largestChange > 0.1f); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T14:58:39.850

When you put:

```
 if (abs(hot_plate_next[a][b] - hot_plate[a][b]) < 0.1)
        {
            update = false;
        } 
```

inside the 2nd nested for-loop, you are setting "update" to false if ANY of the cells have a difference less than 0.1 between current and previous checks, instead of ALL cells like you wanted.

Update your code as follows:

```
 bool update = false; 
```

and

```
 if (abs(hot_plate_next[a][b] - hot_plate[a][b]) > 0.1)
    {
        update = true;
    } 
```

(I would have put >=, but you said "until no cell in the array changes more than 0.1 degree")

Edit as per request: to output the matrix cleanly, add the following line:

```
 cout << "\n"; 
```

here:

```
for (int a = 1; a < array_size-1; a++)
{
    for (int b = 1; b < array_size-1; b++)
    {
        hot_plate_next[a][b]=sum_cell(hot_plate_next, a,b);
        if (abs(hot_plate_next[a][b] - hot_plate[a][b]) > 0.1)
        {
            update = true;
        }
        hot_plate_next[a][b] = hot_plate[a][b];
        cout << hot_plate[a][b] << " ";
    }  
    cout << "\n"; // Add this line
} 
```

# authentication - Bing Maps private TileSource

> ID：12957479
> 
> 赞同：1
> 
> 时间：2012-10-18T14:50:34.973
> 
> 标签：authentication, bing-maps, basic-authentication

I'm using Bing Maps with an extra TileSource. All works well, except that I need to make the tiles private, as they're different for each user. Authentication/Authorization is provided via HttpBasicAuth

I don't see any way to send an Authorization header with the tiles without messing with the Bing library.

What are my options?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T14:50:34.973

The only thing I can think of is to send the Authorization header in the URL. As long as the channel is secure (HTTPS), I think that could work, though it's not elegant.

# java - Bean 验证中的约束组

> ID：12957482
> 
> 赞同：0
> 
> 时间：2012-10-18T14:50:39.577
> 
> 标签：java, jsf, bean-validation

```
@NotNull(message = "{email.error}")
@Valid(message = "{email.error}")
private String email;

@NotNull(message = "{password.error}")
@Size(min = 8, max = 16, message = "{password.error}")
private String password; 
```

反正有没有对属于单个属性的约束进行分组？因此，如果一个约束没有通过，这将引发有问题的错误。如果多个约束无效，这仍然只会抛出这一个错误。让我说明一下我所追求的类型：

```
@List(constraints = {
    @NotNull, 
    @Valid
}, message = "{email.error}")
private String email;

@List(constraints = {
    @NotNull,
    @Size(min = 8, max = 16)
}, message = "{password.error}")
private String password; 
```

是否提供了类似的东西，或者我必须为此创建自己的验证器？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T17:29:30.857

您可能正在寻找组分别组序列功能。检查文档。有很多例子。

关于您的示例， String 上的 @Valid 没有意义。此注释用于级联验证。如果您想了解更多信息，请再次查看文档。像@List 这样的注释也不存在，甚至不会编译。

# winforms - DevExpress MemoEdit 布局问题

> ID：12957484
> 
> 赞同：0
> 
> 时间：2012-10-18T14:50:46.253
> 
> 标签：winforms, c#-4.0, devexpress

我想在两列中显示备忘录编辑中的一些文本。文本的解析工作正常，因为当我在记事本中看到解析的文本或在 Visual Studio 中调试它时，它会在两列中显示它，因此文本的格式完全符合我的需要。问题是当它显示在 MemoEdit 中时，它不保持格式（我认为这是因为它对文本使用不同的字体，而不是固定大小宽度的字体，因为空格比普通字符小） . 我将字体更改为一些固定大小宽度的字体并正确显示，但问题是我需要使用与应用程序使用的字体相同的字体。MemoEdit 上是否有任何属性可以帮助我在不更改字体的情况下实现我想要的行为？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T12:41:39.057

您可以在 GUI 中激活**GridView.OptionsView**属性的**RowAutoHeight**选项，您可以按如下方式进行实际设置：

 **```
gridView1.OptionsView.RowAutoHeight = true; 
```

您还可以使用**CalcRowHeight**事件处理程序来调整 gridview 行的高度。检查参考链接。

参考这些 DevExpressfourm 线程 -
[网格行和文本的自动高度 WordWrap](http://www.devexpress.com/Support/Center/KB/p/a8.aspx)
[GridControl 行高（单元格高度）](http://devexpress.com/Support/Center/p/CQ24983.aspx)
[在运行时更改行高](http://www.devexpress.com/Support/Center/p/Q135099.aspx)**

# php - 验证数组中发送的复选框

> ID：12957485
> 
> 赞同：3
> 
> 时间：2012-10-18T14:51:02.620
> 
> 标签：php

我有一个带有多个复选框的表单，我想将其放入一个数组中。我通过此处提供的示例进行操作：[http ://www.kavoir.com/2009/01/php-checkbox-array-in-form-handling-multiple-checkbox-values-in-an-array.html](http://www.kavoir.com/2009/01/php-checkbox-array-in-form-handling-multiple-checkbox-values-in-an-array.html)

所以我准备了文件：

复选框.php：

```
<form action="checkboxes2.php" method="post">
<input type="checkbox" name="tags[]" value="1" />1<br>
<input type="checkbox" name="tags[]" value="2" />2<br>
<input type="checkbox" name="tags[]" value="3" />3<br>
<input type="checkbox" name="tags[]" value="4" />4<br>
<input type="submit" value="Send" />
</form> 
```

复选框2.php：

```
<?php
print_r($_POST["tags"]);
?> 
```

很简单...我意识到我应该只获取这些文本框的值，而不是它们是否被选中。但我仍然收到此错误：

```
Undefined index: tags in checkboxes2.php on line 2 
```

我完全不知道我在这里做错了什么。我通过上面链接中的示例进行了所有操作（主要是复制/粘贴和更改某些部分，例如添加提交按钮），但我没有得到示例中所示的输出。我至少应该得到每个复选框的值，对吧？

我想要做什么：我想检查复选框数组，查看哪些已被选中，然后将“是”或“否”添加到第二个数组中，如下所示：

```
<?php
  $number1 = $_POST["tags"];
  $number2 = array();

  foreach($number1 as $number1_output)
  {
    if(isset($number1_output))
    {
      $number2[] = "yes";
    }
    else
    {
      $number2[] = "no";
    }
  }

  print_r($number2);
?> 
```

嗯......它只工作了一半。只有已选中的复选框才会添加到数组中。因此，如果我选择“3”和“4”，我会得到：

```
Array ( [0] => yes [1] => yes ) 
```

处理数组中的复选框并验证它们的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T14:57:51.290

Checkboxes which are not selected to do not send anything when the form submits. That means if NONE of those `tags` checkboxes are selected, there will be no `tags` attribute in the $_POST array.

As such, your code should be

```
<?
if ($_SERVER['REQUEST_METHOD'] == 'POST') {
   if (isset($_POST['tags'])) {
      print_r($_POST['tags']);
   }
}
?> 
```

The first line verifies that a POST has actually taken place, and the second line verifies that there's actually any data to dump out.

For the rest of your code, the isset is rather pointless... Since a checkbox is only present in the POST data if it was selected, there's no point in doing the isset() within your foreach loop - there'd be nothing to foreach on if there were no checkboxes, so by definition everything in the foreach will be isset() == true anyways.

As such, your foreach loop will only produce `yes` values, never a `no`.

A better workaround is to specify array keys within your form:

```
<input type="checkbox" name="tags[1]" value="1" />
<input type="checkbox" name="tags[2]" value="2" />
etc... 
```

then have

```
<?php
if (b blah blah blah verify post stuff) {
    for ($i = 1; $i <= $max_tags_allowed; $i++) {
      if (isset($_POST['tags'][$i])) {
          $message2[] = 'yes';
      } else {
          $message2[] = 'no';
      }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T15:06:15.367

或者，如果您希望复选框在未选中时也发送值，您可以在复选框之前添加一个隐藏输入字段：

```
<input type="hidden" name="tag[1]" value="off" />
<input type="checkbox" name="tag[1]" value="on /> 
```

因为复选框仅在设置时才发送，但它会覆盖隐藏，因为它稍后在 HTML 中，您现在将始终`tag[1]`设置为“关闭”或“打开”，具体取决于该框是否被选中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T15:42:02.200

在您的 checkboxes.php 中：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<title>My form</title>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script type="text/javascript" languaje="javascript">
$(document).ready(function() {
  $('.checkbox').click(function(){
    var values="";
    $('.checkbox:checked').each(function(index) {           
        values+=$(this).val();
        $('#tagsVal').val(values);
    });
  });
});
</script>
</head>
<body>
  <form action="checkboxes2.php" method="post">
   <input type="checkbox" name="tags1" value="1" class="checkbox"/>1<br><!--Notice the class="checkbox" attribute is important for the jquery function-->
   <input type="checkbox" name="tags2" value="2" class="checkbox"/>2<br>
   <input type="checkbox" name="tags3" value="3" class="checkbox"/>3<br>
   <input type="checkbox" name="tags4" value="4" class="checkbox"/>4<br>
   <input type="hidden" name="tagsVal" id="tagsVal" value="" />
   <input type="submit" value="Send" />
  </form>
</body>
</html> 
```

因此，您将在 $_POST['tagVal'] 中获得什么，您将获得您的价值观。如果选中复选框 1,3 和 4，您将得到一个字符串 134。在您的 checkboxes2.php 中，您只需在需要时将字符串拆分为数组。

```
$arr1 = str_split($_POST['tagVal']); 
```

问候路易斯

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T15:04:45.617

首先创建一个包含所有可能键的“否”数组，如下所示：

```
$no = array(0 => "no", 1 => "no"); // or array("no", "no"); 
```

然后你可以得到你想要的数组：

```
$checkValues = array_flip($_POST["tags"]) + $no; 
```

这样，$_POST["tags"] 中的值将成为键，并且 + 运算符合并保留键的两个数组，如果它们存在于第一个数组中，也会省略第二个数组中的值。这样你就可以像这样检查：

```
$fourthChecked = $checkValues[4] !== "no"; 
```

我认为它比其他答案简单得多。祝你好运！

# magento - Magento 密码在我的自定义模块中加密

> ID：12957490
> 
> 赞同：3
> 
> 时间：2012-10-18T14:51:11.917
> 
> 标签：magento

我是 magento 的新手。

在我的站点中，我想创建新的配置文件模块。

在我的新模块中也有这样的字段

*   当前密码
*   新密码
*   确认新密码。

默认情况下，存储的密码像这样加密密码`24d2f566950ed1af94c01d1ec5ce0f48:2e`。

我的问题是`How to encrypt password like this in magento?`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T15:16:14.847

要获得像 Magento 这样的密码哈希，您可以使用 Core 中的加密模型，如下所示：

```
$password = 'test';
$encrypted = Mage::getSingleton('core/encryption')->getHash($password); 
```

如果您想使用普通密码验证加密值，您可以使用相同的模型：

```
Mage::getSingleton('core/encryption')->validateHash($password, $encrypted); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-08T12:40:57.590

将数据库“admin_user”表中的 encpt 密码替换为所有默认设置：

临时密码：admin123#

encpt 密码：3bfea6f5ac1c57c3ce9a9165338cbc5c:CA1Byy3NifFoWVhjBxI3mD2bgAnj4qn7

有时它在 Chrome 上不起作用： [http](http://www.customerparadigm.com/easy-fix-for-chrome-magento-admin-login/) ://www.customerparadigm.com/easy-fix-for-chrome-magento-admin-login/ 谢谢

# css - 放置在表格单元格中时出现奇怪的 iframe 高度行为

> ID：12957491
> 
> 赞同：6
> 
> 时间：2012-10-18T14:51:16.273
> 
> 标签：css, google-chrome, iframe, height, css-tables

`iframe`放置在表格单元格中时，我遇到了高度问题。Firefox 和 Chrome 将其最小高度设置为 ，`150px`而 Internet Explorer 处理较低的高度。当单元格的高度大于`150px`时，`iframe`很好地跟随。

有趣的是，当放置在 a 内时，`div`它的高度是正确的，无论`div`' 高度是否小于`150px`但在表格单元格内的高度似乎遵循其自己的规则（由浏览器设置）。

[这是一个 JSFiddle](http://jsfiddle.net/UP9Th/1/)

示例`iframe`测试如下：

1.  `iframe`在一个`div`高度小于 150px
2.  `iframe`在高度小于 150px 的表格单元格中
3.  `iframe`在一个`div`高度超过 150px
4.  `iframe`在高度超过 150px 的表格单元格中

## 附加限制

因为它似乎`iframe`在放置在`div`一个很好的解决方案中时工作正常，但我无法控制 HTML，因为它是`iframe`在表格单元格中呈现的第三方控件的一部分。Javascript 操作当然总是一种选择，但我想只使用 CSS 来解决这个问题。而且由于容器的高度也是由第三方控制的，所以我不能将`iframe`' 高度更改为固定高度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T17:59:06.187

表格单元格中 iframe 的 150 像素限制已报告为 Gecko/Webkit 浏览器引擎中的错误：

[https://bugzilla.mozilla.org/show_bug.cgi?id=253363](https://bugzilla.mozilla.org/show_bug.cgi?id=253363)

[https://bugzilla.mozilla.org/show_bug.cgi?id=324388](https://bugzilla.mozilla.org/show_bug.cgi?id=324388)

Telerik RAD 控制开发团队也对此进行了评论（请参阅[此处](http://www.telerik.com/community/forums/aspnet-ajax/window/minimum-height-browser-inconsistency.aspx#1277509)）。我还没有找到确定 150px 是强制性最小值的确切原因，但它确实解释了您所看到的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T15:21:52.957

您可以尝试将表及其子项设置为`display: block`.

[http://jsfiddle.net/willemvb/aM2Fx/](http://jsfiddle.net/willemvb/aM2Fx/)

```
table,
tbody,
tr,
td{
    position: relative;
    display: block;
    width: 100%;
    height: 100%;   
} 
```

或者您可以在表格上使用*相对*定位，在 iframe 上使用*绝对定位。*

[http://jsfiddle.net/eeZHZ/](http://jsfiddle.net/eeZHZ/)

```
table
{
    width: 100%;
    height: 100%;
    position: relative;
}

table iframe {
    position: absolute;
    top: 0;
} 
```

# c++ - 为使用 OpenCV 的 C++ 代码编写 Python 绑定

> ID：12957492
> 
> 赞同：29
> 
> 时间：2012-10-18T14:51:16.487
> 
> 标签：c++, python, boost, opencv, boost-python

我正在尝试为一些使用 OpenCV 的 C++ 代码编写一个 python 包装器，但是我很难将结果（一个 OpenCV C++ Mat 对象）返回给 python 解释器。

我查看了 OpenCV 的源代码，发现文件 cv2.cpp 具有转换函数，可以在 PyObject* 和 OpenCV 的 Mat 之间来回转换。我使用了这些转换函数，但是当我尝试使用它们时遇到了分段错误。

我基本上需要一些关于如何连接使用 OpenCV 的 python 和 C++ 代码的建议/示例代码/在线参考，特别是能够将 OpenCV 的 C++ Mat 返回到 python 解释器，或者关于如何/从哪里开始调查原因的建议的分段错误。

目前我正在使用 Boost Python 来包装代码。

提前感谢任何回复。

相关代码：

```
// This is the function that is giving the segmentation fault.
PyObject* ABC::doSomething(PyObject* image)
{
    Mat m;
    pyopencv_to(image, m);  // This line gives segmentation fault.

    // Some code to create cppObj from CPP library that uses OpenCV
    cv::Mat processedImage = cppObj->align(m);

    return pyopencv_from(processedImage);
} 
```

以下是取自 OpenCV 源代码的转换函数。转换代码在带有“if (!PyArray_Check(o)) ...”的注释行中给出了分段错误。

```
static int pyopencv_to(const PyObject* o, Mat& m, const char* name = "<unknown>", bool allowND=true)
{
    if(!o || o == Py_None)
    {
        if( !m.data )
            m.allocator = &g_numpyAllocator;
        return true;
    }

    if( !PyArray_Check(o) ) // Segmentation fault inside PyArray_Check(o)
    {
        failmsg("%s is not a numpy array", name);
        return false;
    }

    int typenum = PyArray_TYPE(o);
    int type = typenum == NPY_UBYTE ? CV_8U : typenum == NPY_BYTE ? CV_8S :
               typenum == NPY_USHORT ? CV_16U : typenum == NPY_SHORT ? CV_16S :
               typenum == NPY_INT || typenum == NPY_LONG ? CV_32S :
               typenum == NPY_FLOAT ? CV_32F :
               typenum == NPY_DOUBLE ? CV_64F : -1;

    if( type < 0 )
    {
        failmsg("%s data type = %d is not supported", name, typenum);
        return false;
    }

    int ndims = PyArray_NDIM(o);
    if(ndims >= CV_MAX_DIM)
    {
        failmsg("%s dimensionality (=%d) is too high", name, ndims);
        return false;
    }

    int size[CV_MAX_DIM+1];
    size_t step[CV_MAX_DIM+1], elemsize = CV_ELEM_SIZE1(type);
    const npy_intp* _sizes = PyArray_DIMS(o);
    const npy_intp* _strides = PyArray_STRIDES(o);
    bool transposed = false;

    for(int i = 0; i < ndims; i++)
    {
        size[i] = (int)_sizes[i];
        step[i] = (size_t)_strides[i];
    }

    if( ndims == 0 || step[ndims-1] > elemsize ) {
        size[ndims] = 1;
        step[ndims] = elemsize;
        ndims++;
    }

    if( ndims >= 2 && step[0] < step[1] )
    {
        std::swap(size[0], size[1]);
        std::swap(step[0], step[1]);
        transposed = true;
    }

    if( ndims == 3 && size[2] <= CV_CN_MAX && step[1] == elemsize*size[2] )
    {
        ndims--;
        type |= CV_MAKETYPE(0, size[2]);
    }

    if( ndims > 2 && !allowND )
    {
        failmsg("%s has more than 2 dimensions", name);
        return false;
    }

    m = Mat(ndims, size, type, PyArray_DATA(o), step);

    if( m.data )
    {
        m.refcount = refcountFromPyObject(o);
        m.addref(); // protect the original numpy array from deallocation
                    // (since Mat destructor will decrement the reference counter)
    };
    m.allocator = &g_numpyAllocator;

    if( transposed )
    {
        Mat tmp;
        tmp.allocator = &g_numpyAllocator;
        transpose(m, tmp);
        m = tmp;
    }
    return true;
}

static PyObject* pyopencv_from(const Mat& m)
{
    if( !m.data )
        Py_RETURN_NONE;
    Mat temp, *p = (Mat*)&m;
    if(!p->refcount || p->allocator != &g_numpyAllocator)
    {
        temp.allocator = &g_numpyAllocator;
        m.copyTo(temp);
        p = &temp;
    }
    p->addref();
    return pyObjectFromRefcount(p->refcount);
} 
```

我的python测试程序：

```
import pysomemodule # My python wrapped library.
import cv2

def main():
    myobj = pysomemodule.ABC("faces.train") # Create python object. This works.
    image = cv2.imread('61.jpg')
    processedImage = myobj.doSomething(image)
    cv2.imshow("test", processedImage)
    cv2.waitKey()

if __name__ == "__main__":
    main() 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-10-19T10:50:55.900

我解决了这个问题，所以我想我会在这里与可能有同样问题的其他人分享。

基本上，为了摆脱分段错误，我需要调用 numpy 的 import_array() 函数。

从 python 运行 C++ 代码的“高级”视图是这样的：

假设您`foo(arg)`在 python 中有一个函数，它是某个 C++ 函数的绑定。当您调用`foo(myObj)`时，必须有一些代码将 python 对象“myObj”转换为您的 C++ 代码可以执行的形式。此代码通常是使用 SWIG 或 Boost::Python 等工具半自动创建的。（我在下面的示例中使用 Boost::Python。）

现在，`foo(arg)`是一些 C++ 函数的 python 绑定。这个 C++ 函数将接收一个通用`PyObject`指针作为参数。您将需要 C++ 代码将此`PyObject`指针转换为“等效”C++ 对象。在我的例子中，我的 python 代码将 OpenCV 图像的 OpenCV numpy 数组作为参数传递给函数。C++ 中的“等价”形式是 OpenCV C++ Mat 对象。OpenCV 在 cv2.cpp（转载如下）中提供了一些代码，用于将`PyObject`指针（表示 numpy 数组）转换为 C++ Mat。简单的数据类型如 int 和 string 不需要用户编写这些转换函数，因为它们是由 Boost::Python 自动转换的。

`PyObject`指针转换为合适的 C++ 形式后，C++ 代码就可以对其进行操作。当数据必须从 C++ 返回到 python 时，会出现类似的情况，需要 C++ 代码将数据的 C++ 表示形式转换为某种形式的`PyObject`. Boost::Python 将负责将其余的转换`PyObject`为相应的 python 形式。当`foo(arg)`在python中返回结果时，它是python可以使用的形式。而已。

下面的代码显示了如何包装一个 C++ 类“ABC”并公开其方法“doSomething”，该方法从 python 中获取一个 numpy 数组（用于图像），将其转换为 OpenCV 的 C++ Mat，进行一些处理，将结果转换为 PyObject *，并将其返回给 python 解释器。您可以公开任意数量的函数/方法（请参阅下面代码中的注释）。

abc.hpp：

```
#ifndef ABC_HPP
#define ABC_HPP

#include <Python.h>
#include <string>

class ABC
{
  // Other declarations 
    ABC();
    ABC(const std::string& someConfigFile);
    virtual ~ABC();
    PyObject* doSomething(PyObject* image); // We want our python code to be able to call this function to do some processing using OpenCV and return the result.
  // Other declarations
};

#endif 
```

abc.cpp：

```
#include "abc.hpp"
#include "my_cpp_library.h" // This is what we want to make available in python. It uses OpenCV to perform some processing.

#include "numpy/ndarrayobject.h"
#include "opencv2/core/core.hpp"

// The following conversion functions are taken from OpenCV's cv2.cpp file inside modules/python/src2 folder.
static PyObject* opencv_error = 0;

static int failmsg(const char *fmt, ...)
{
    char str[1000];

    va_list ap;
    va_start(ap, fmt);
    vsnprintf(str, sizeof(str), fmt, ap);
    va_end(ap);

    PyErr_SetString(PyExc_TypeError, str);
    return 0;
}

class PyAllowThreads
{
public:
    PyAllowThreads() : _state(PyEval_SaveThread()) {}
    ~PyAllowThreads()
    {
        PyEval_RestoreThread(_state);
    }
private:
    PyThreadState* _state;
};

class PyEnsureGIL
{
public:
    PyEnsureGIL() : _state(PyGILState_Ensure()) {}
    ~PyEnsureGIL()
    {
        PyGILState_Release(_state);
    }
private:
    PyGILState_STATE _state;
};

#define ERRWRAP2(expr) \
try \
{ \
    PyAllowThreads allowThreads; \
    expr; \
} \
catch (const cv::Exception &e) \
{ \
    PyErr_SetString(opencv_error, e.what()); \
    return 0; \
}

using namespace cv;

static PyObject* failmsgp(const char *fmt, ...)
{
  char str[1000];

  va_list ap;
  va_start(ap, fmt);
  vsnprintf(str, sizeof(str), fmt, ap);
  va_end(ap);

  PyErr_SetString(PyExc_TypeError, str);
  return 0;
}

static size_t REFCOUNT_OFFSET = (size_t)&(((PyObject*)0)->ob_refcnt) +
    (0x12345678 != *(const size_t*)"\x78\x56\x34\x12\0\0\0\0\0")*sizeof(int);

static inline PyObject* pyObjectFromRefcount(const int* refcount)
{
    return (PyObject*)((size_t)refcount - REFCOUNT_OFFSET);
}

static inline int* refcountFromPyObject(const PyObject* obj)
{
    return (int*)((size_t)obj + REFCOUNT_OFFSET);
}

class NumpyAllocator : public MatAllocator
{
public:
    NumpyAllocator() {}
    ~NumpyAllocator() {}

    void allocate(int dims, const int* sizes, int type, int*& refcount,
                  uchar*& datastart, uchar*& data, size_t* step)
    {
        PyEnsureGIL gil;

        int depth = CV_MAT_DEPTH(type);
        int cn = CV_MAT_CN(type);
        const int f = (int)(sizeof(size_t)/8);
        int typenum = depth == CV_8U ? NPY_UBYTE : depth == CV_8S ? NPY_BYTE :
                      depth == CV_16U ? NPY_USHORT : depth == CV_16S ? NPY_SHORT :
                      depth == CV_32S ? NPY_INT : depth == CV_32F ? NPY_FLOAT :
                      depth == CV_64F ? NPY_DOUBLE : f*NPY_ULONGLONG + (f^1)*NPY_UINT;
        int i;
        npy_intp _sizes[CV_MAX_DIM+1];
        for( i = 0; i < dims; i++ )
        {
            _sizes[i] = sizes[i];
        }

        if( cn > 1 )
        {
            /*if( _sizes[dims-1] == 1 )
                _sizes[dims-1] = cn;
            else*/
                _sizes[dims++] = cn;
        }

        PyObject* o = PyArray_SimpleNew(dims, _sizes, typenum);

        if(!o)
        {
            CV_Error_(CV_StsError, ("The numpy array of typenum=%d, ndims=%d can not be created", typenum, dims));
        }
        refcount = refcountFromPyObject(o);

        npy_intp* _strides = PyArray_STRIDES(o);
        for( i = 0; i < dims - (cn > 1); i++ )
            step[i] = (size_t)_strides[i];
        datastart = data = (uchar*)PyArray_DATA(o);
    }

    void deallocate(int* refcount, uchar*, uchar*)
    {
        PyEnsureGIL gil;
        if( !refcount )
            return;
        PyObject* o = pyObjectFromRefcount(refcount);
        Py_INCREF(o);
        Py_DECREF(o);
    }
};

NumpyAllocator g_numpyAllocator;

enum { ARG_NONE = 0, ARG_MAT = 1, ARG_SCALAR = 2 };

static int pyopencv_to(const PyObject* o, Mat& m, const char* name = "<unknown>", bool allowND=true)
{
    //NumpyAllocator g_numpyAllocator;
    if(!o || o == Py_None)
    {
        if( !m.data )
            m.allocator = &g_numpyAllocator;
        return true;
    }

    if( !PyArray_Check(o) )
    {
        failmsg("%s is not a numpy array", name);
        return false;
    }

    int typenum = PyArray_TYPE(o);
    int type = typenum == NPY_UBYTE ? CV_8U : typenum == NPY_BYTE ? CV_8S :
               typenum == NPY_USHORT ? CV_16U : typenum == NPY_SHORT ? CV_16S :
               typenum == NPY_INT || typenum == NPY_LONG ? CV_32S :
               typenum == NPY_FLOAT ? CV_32F :
               typenum == NPY_DOUBLE ? CV_64F : -1;

    if( type < 0 )
    {
        failmsg("%s data type = %d is not supported", name, typenum);
        return false;
    }

    int ndims = PyArray_NDIM(o);
    if(ndims >= CV_MAX_DIM)
    {
        failmsg("%s dimensionality (=%d) is too high", name, ndims);
        return false;
    }

    int size[CV_MAX_DIM+1];
    size_t step[CV_MAX_DIM+1], elemsize = CV_ELEM_SIZE1(type);
    const npy_intp* _sizes = PyArray_DIMS(o);
    const npy_intp* _strides = PyArray_STRIDES(o);
    bool transposed = false;

    for(int i = 0; i < ndims; i++)
    {
        size[i] = (int)_sizes[i];
        step[i] = (size_t)_strides[i];
    }

    if( ndims == 0 || step[ndims-1] > elemsize ) {
        size[ndims] = 1;
        step[ndims] = elemsize;
        ndims++;
    }

    if( ndims >= 2 && step[0] < step[1] )
    {
        std::swap(size[0], size[1]);
        std::swap(step[0], step[1]);
        transposed = true;
    }

    if( ndims == 3 && size[2] <= CV_CN_MAX && step[1] == elemsize*size[2] )
    {
        ndims--;
        type |= CV_MAKETYPE(0, size[2]);
    }

    if( ndims > 2 && !allowND )
    {
        failmsg("%s has more than 2 dimensions", name);
        return false;
    }

    m = Mat(ndims, size, type, PyArray_DATA(o), step);

    if( m.data )
    {
        m.refcount = refcountFromPyObject(o);
        m.addref(); // protect the original numpy array from deallocation
                    // (since Mat destructor will decrement the reference counter)
    };
    m.allocator = &g_numpyAllocator;

    if( transposed )
    {
        Mat tmp;
        tmp.allocator = &g_numpyAllocator;
        transpose(m, tmp);
        m = tmp;
    }
    return true;
}

static PyObject* pyopencv_from(const Mat& m)
{
    if( !m.data )
        Py_RETURN_NONE;
    Mat temp, *p = (Mat*)&m;
    if(!p->refcount || p->allocator != &g_numpyAllocator)
    {
        temp.allocator = &g_numpyAllocator;
        m.copyTo(temp);
        p = &temp;
    }
    p->addref();
    return pyObjectFromRefcount(p->refcount);
}

ABC::ABC() {}
ABC::~ABC() {}
// Note the import_array() from NumPy must be called else you will experience segmentation faults.
ABC::ABC(const std::string &someConfigFile)
{
  // Initialization code. Possibly store someConfigFile etc.
  import_array(); // This is a function from NumPy that MUST be called.
  // Do other stuff
}

// The conversions functions above are taken from OpenCV. The following function is 
// what we define to access the C++ code we are interested in.
PyObject* ABC::doSomething(PyObject* image)
{
    cv::Mat cvImage;
    pyopencv_to(image, cvImage); // From OpenCV's source

    MyCPPClass obj; // Some object from the C++ library.
    cv::Mat processedImage = obj.process(cvImage);

    return pyopencv_from(processedImage); // From OpenCV's source
} 
```

使用 Boost Python 创建 python 模块的代码。我从[http://jayrambhia.wordpress.com/tag/boost/](http://jayrambhia.wordpress.com/tag/boost/)获取了这个和以下 Makefile ：

pysomemodule.cpp：

```
#include <string>    
#include<boost/python.hpp>
#include "abc.hpp"

using namespace boost::python;

BOOST_PYTHON_MODULE(pysomemodule)
{
    class_<ABC>("ABC", init<const std::string &>())
      .def(init<const std::string &>())
      .def("doSomething", &ABC::doSomething) // doSomething is the method in class ABC you wish to expose. One line for each method (or function depending on how you structure your code). Note: You don't have to expose everything in the library, just the ones you wish to make available to python.
    ;
} 
```

最后，Makefile（在 Ubuntu 上成功编译，但应该可以在其他地方工作，可能需要进行最小的调整）。

```
PYTHON_VERSION = 2.7
PYTHON_INCLUDE = /usr/include/python$(PYTHON_VERSION)

# location of the Boost Python include files and library
BOOST_INC = /usr/local/include/boost
BOOST_LIB = /usr/local/lib

OPENCV_LIB = `pkg-config --libs opencv`
OPENCV_CFLAGS = `pkg-config --cflags opencv`

MY_CPP_LIB = lib_my_cpp_library.so

TARGET = pysomemodule
SRC = pysomemodule.cpp abc.cpp
OBJ = pysomemodule.o abc.o

$(TARGET).so: $(OBJ)
    g++ -shared $(OBJ) -L$(BOOST_LIB) -lboost_python -L/usr/lib/python$(PYTHON_VERSION)/config -lpython$(PYTHON_VERSION) -o $(TARGET).so $(OPENCV_LIB) $(MY_CPP_LIB)

$(OBJ): $(SRC)
    g++ -I$(PYTHON_INCLUDE) -I$(BOOST_INC) $(OPENCV_CFLAGS) -fPIC -c $(SRC)

clean:
    rm -f $(OBJ)
    rm -f $(TARGET).so 
```

成功编译库后，目录中应该有一个文件“pysomemodule.so”。将此 lib 文件放在 python 解释器可以访问的位置。然后，您可以导入此模块并创建上述“ABC”类的实例，如下所示：

```
import pysomemodule

foo = pysomemodule.ABC("config.txt") # This will create an instance of ABC 
```

现在，给定一个 OpenCV numpy 数组图像，我们可以使用以下命令调用 C++ 函数：

```
processedImage = foo.doSomething(image) # Where the argument "image" is a OpenCV numpy image. 
```

请注意，您将需要 Boost Python、Numpy 开发以及 Python 开发库来创建绑定。

以下两个链接中的 NumPy 文档在帮助理解转换代码中使用的方法以及为什么必须调用 import_array() 方面特别有用。特别是，官方 numpy 文档有助于理解 OpenCV 的 python 绑定代码。

[http://dsnra.jpl.nasa.gov/software/Python/numpydoc/numpy-13.html](http://dsnra.jpl.nasa.gov/software/Python/numpydoc/numpy-13.html) [http://docs.scipy.org/doc/numpy/user/c-info.how-to-extend.html](http://docs.scipy.org/doc/numpy/user/c-info.how-to-extend.html)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-03-24T15:01:22.090

我希望这可以帮助人们寻找一种快速简便的方法。

这是我为使用 OpenCV 的 Mat 类以尽可能少的痛苦公开代码而编写的开放 C++ 代码的[github 存储库。](https://github.com/Algomorph/pyboostcvconverter)

[更新] 此代码现在适用于**OpenCV 2.X**和**OpenCV 3.X**。现在还提供对 Python 3.X 的CMake 和~~实验性支持。~~

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-08T16:27:51.593

一种选择是将代码直接实现到 modules/python/src2/cv2.cpp 作为 python 绑定的自定义分支。

'OpenCV 构建系统会将其捆绑到单个“cv2”中。贡献模块的例子在[这里](https://github.com/opencv/opencv_contrib/tree/master/modules)。[https://github.com/opencv/opencv/issues/8872#issuecomment-307136942](https://github.com/opencv/opencv/issues/8872#issuecomment-307136942)

# spring-security - Spring Security - 如果外部身份验证失败/不存在，则有条件地使用表单登录

> ID：12957495
> 
> 赞同：1
> 
> 时间：2012-10-18T14:51:22.460
> 
> 标签：spring-security, pre-authentication

我需要的设置是一个（启用了弹簧安全性的）webapp，它既可以进行预身份验证（使用 pubcookie），也可以启用“开发”模式，这样我就可以忽略 pubcookie 并显示登录表单。自然，开发模式将在生产中关闭，应用程序将位于运行 mod_pubcookie 的 Apache 后面，但对于开发/质量检查，我真的不需要外部身份验证机制。

仅当 (1) 没有 REMOTE_USER 请求标头（意味着我们没有通过 pubcookie）时，才会出现登录表单；AND (2) dev-mode 在属性文件中打开。

我的问题：这可以在 spring security XML 文件中配置，还是我需要将它纳入代码？（我该怎么做？）

谢谢，

D.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T15:24:45.517

您可以编写自己的自定义过滤器并在您的安全上下文中指定它。由于它是您的自定义过滤器，您可以从属性文件中获取请求对象和配置。

如果您发现 REMOTE_USER 和 dev-mode on 然后在安全上下文持有者中设置身份验证。

要实现自定义过滤器，请参阅[链接](http://krams915.blogspot.in/2010/12/spring-security-mvc-integration-using_26.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T15:44:14.033

好的，所以我所做的是使用 Spring Profiles 为“dev”和“prod”创建两个单独的配置文件，其中我使用了不同的 http 和 authentication-manager 元素。

springsource 的这篇博文帮助很大：

[http://blog.springsource.com/2011/02/11/spring-framework-3-1-m1-released/](http://blog.springsource.com/2011/02/11/spring-framework-3-1-m1-released/)

只需注意他说您可以在调度程序 servlet 的 init-param 元素中声明配置文件的位置 - 这对我不起作用，因此我使用 web.xml 中的全局上下文参数来声明我的配置文件：

```
<context-param>
    <param-name>spring.profiles.active</param-name>
    <param-value>dev</param-value>
</context-param> 
```

D.

# c++ - C++11 枚举类实例化

> ID：12957499
> 
> 赞同：4
> 
> 时间：2012-10-18T14:51:40.800
> 
> 标签：c++, c++11, visual-studio-2012, construction, enum-class

我遇到了以下形式的枚举类变量实例化，它在 VS2012 下编译时没有任何警告或错误：

```
UINT32 id;
enum class X {apple, pear, orange};
X myX = X(id); 
```

此外，将`X(id)`作为参数发送给期望编译的 X 类型参数的函数。我不确定结果是否总是正确的，或者它只是一个奇怪的编译器行为。

但是，尝试执行`X myX(id);`上述操作会导致编译错误：

> > 错误 C2440：“正在初始化”：无法从“UINT32”转换为“X”。转换为枚举类型需要显式转换（static_cast、C 样式转换或函数样式转换）。

阅读 C++11 标准并没有帮助我理解。所以我有两个关于这个问题的问题：

1.  是否可以构造一个以整数类型作为参数的枚举类对象？
2.  如果 1 为真，为什么`X myX(id)`不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T15:23:40.913

您没有使用该语法构建枚举。相反，您正在使用另一种显式转换语法来转换 from `UINT32`to `enum class X`。例如，可以将 double 显式转换为 int，如下所示：

```
double p = 0.0;
int f = int(p) 
```

有关可以在 c++ 中使用的所有各种强制转换语法，请参阅[此堆栈溢出帖子。](https://stackoverflow.com/questions/32168/c-cast-syntax-styles)

您的代码可以等效地使用更常见的强制转换语法编写，如下所示：

```
UINT32 id;
enum class X {apple, pear, orange};
X myX = (X)id; 
```

# c++ - C++ 检查元素是否为 std::vector

> ID：12957506
> 
> 赞同：2
> 
> 时间：2012-10-18T14:51:47.163
> 
> 标签：c++, types, vector

我想遍历一个向量并检查元素是向量还是字符串。我还需要一种将不同的向量传递给函数的方法。像这样的东西：

```
using namespace std;
string toCustomString(<some vector> vec) {
    string ret = "";
    for(size_t i = 0; i < vec.length(); ++i) 
        if (vec[i] == %vector%)
            ret += toCustomString(vec[i]);
        else //if type of vec[i] is string
            ret += "foo"+vec[i]+"bar";
    }
    return ret;
} 
```

*   好吧，首先我需要知道如何正确检查 vec[i] 是否为 std::vector

*   然后我需要知道如何定义函数的参数以接受任何类型的（多维）向量

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T14:55:27.603

`std::vector`只能包含一种类型——即`T`in `std::vector<T>`，可以通过 member 访问`value_type`。

您可能正在寻找的是模板专业化：

```
template<typename T>
string toCustomString(std::vector<T> vec) {
    // general case
}

template<>
string toCustomString<std::string>(std::vector<std::string> vec) {
    // strings
} 
```

（如果你想对所有向量进行部分专业化，那么你需要将它提升到一个结构中）

如果您真的想在向量中存储字符串和向量，请查看 Boost.Variant 和 Boost.Any

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T14:59:54.743

通常，例如，您`<some vector> vec`的类型*为* `vector<string>` *or* `vector<vector<string>>`。

为了声明变量，您需要它的类型，并且它的类型还准确地指定了它存储的内容。

现在，您可以使用[Boost.Variant](http://www.boost.org/doc/libs/1_51_0/doc/html/variant.html)（或滚动您自己的可区分联合）来解决此问题，如下所示：

```
typedef boost::variant<std::string, std::vector<std::string>> Vec_of_StringOrVec; 
```

但是 Dirk Holsopple 是正确的，这不是惯用的 C++，您最好寻找一种不同的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T15:14:29.170

正如大家所说，C++ 中的向量只有一种类型。没有必要也没有必要依次检查每个元素的类型，这也很好，因为没有办法做到这一点。相反，您要做的是在参数类型上重载函数。像这样的东西：

```
string toCustomString(const string &str) {
    return "foo" +str + "bar";
}

template <typename T>
string toCustomString(const std::vector<T> &vec) {
    string ret;
    for(size_t i = 0; i < vec.size(); ++i) 
        ret += toCustomString(vec[i]);
    return ret;
} 
```

现在，如果有人传入，`vector<string>`则`toCustomString`调用`toCustomString(vec[i])`将选择`toCustomString(const string &str)`重载。

如果有人将 a`vector<int>`传入`toCustomString`，则代码将无法编译，因为（当前）没有`toCustomString(int)`重载 [*]。

如果有人通过 a `vector<vector<string>>`to `toCustomString`then`toCustomString(vec[i])`将通过 a `vector<string>`，见上文。

在所有三种情况下，都会调用*不同* `toCustomString`的函数。在第一种情况下它是`toCustomString<string>(const vector<string>&)`，这是`toCustomString`与第三种情况不同的模板实例化，`toCustomString<vector<string>>(const vector<vector<string>>&)`。中间情况尝试实例化`toCustomString<int>`，但由于`toCustomString(v[i])`不匹配它知道的任何函数而失败。

所有这些都是在编译时确定的。模板的重点是创建多个函数（或类），它们之间有特定的差异。在这种情况下，区别在于传入的向量类型。

[*] 这似乎符合您的要求，即`vec[i]`必须是*向量*或*字符串*，而不是任何第三个选项。例如，如果您希望 a 的返回值为`vector<something_else>`空，则可以添加一个包罗万象的模板：

```
template <typename T> 
string toCustomString(const T &) { 
    return string(); 
} 
```

当然，您可以为要处理的任何其他类型添加更多重载。

# user-interface - Kinect/XNA 中的图形用户界面？

> ID：12957512
> 
> 赞同：0
> 
> 时间：2012-10-18T14:52:04.603
> 
> 标签：user-interface, xna, kinect, xbox360

我知道这可能不是发帖的正确位置，但是，我完全没有想法。:(你们中有人知道如何为 Kinect 创建漂亮的 GUI 的框架/信息吗？我正计划使用 C# 并正在考虑使用 Kinesis.IO，但转换和兼容性似乎令人头疼。会XNA Framework 为我做吗？我用谷歌搜索了好几次，似乎找不到任何好的想法。请告诉我！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T20:45:09.543

[https://neoforce.codeplex.com/](https://neoforce.codeplex.com/)

Neoforce 与 360 兼容，我没有在它上面使用过，但它非常适合我在 PC 上的项目。

# spring - 使用 Apache 的反向代理和码头内应用程序背后的静态内容

> ID：12957513
> 
> 赞同：1
> 
> 时间：2012-10-18T14:52:09.663
> 
> 标签：spring, apache, proxy, jetty

我的应用程序是基于 spring 的，由 jetty 提供服务。当前设置如下所示。

Apache -> 反向代理 -> Embedded Jetty -> 应用程序

当我在没有反向代理的情况下直接访问应用程序（*http://127.0.0.1:15000*）时，会加载静态资源（css、.js 等），但如果我通过反向代理访问它（*https://127.0.0.1/app /* ) 它不起作用。

这是我的配置。

**apache2.conf**

```
ProxyPass /app/ http://127.0.0.1:15000/
ProxyPassReverse /app/ http://127.0.0.1:15000/
SSLProxyEngine on 

RewriteEngine On
RewriteRule /app$ /app/ [R] 
```

**spring-servlet.xml**

```
 ...
 <mvc:default-servlet-handler />
 <mvc:resources mapping="/resources/**" location="/resources/" />
 ... 
```

我希望以两种方式传递静态内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-05T07:06:24.587

我知道这为时已晚。但是对于可能最终出现在这里的任何人，将映射添加到您的资源路径将解决问题。

```
ProxyPass /app/resources http://127.0.0.1:15000/app/resources
ProxyPassReverse /app/resources http://127.0.0.1:15000/app/resources 
```

这应该在您现有的映射之前添加。（首先读取最长的 URL，因为首先读取哪个映射，获胜）

# android - 如何解决 Android Bitmap 内存效率低下的问题？

> ID：12957517
> 
> 赞同：0
> 
> 时间：2012-10-18T14:52:24.710
> 
> 标签：android

我们正在开发一个原生 Android 应用程序，该应用程序处理来自手机图库的大图像 (5MP+)，最终编码为 base 64，JSON 化并发送到上游服务器。我们使用了其他 StackOverflow 问题中给出的一些指导。我们努力将内存使用量降至最低，密切关注 logcat、调试等。虽然我们已经控制了“80% 用例”，但在某些情况下（当用户选择例如，一张照片，然后取消，选择另一张照片）。

我们发现，当导入 5MP 位图时，其在堆中的大小会翻两番（即 7Mb jpeg 在内存中变为 28Mb）。我们已经使用技巧尽可能高效地转换为 Base64。我们已经确保 JSON 解析器没有泄漏等等。

所以回到我原来的问题，有没有办法绕过Android的位图处理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T15:11:53.860

> 最终编码 base 64，JSON 化并发送到上游服务器

重写您的 Web 应用程序以支持二进制有效负载，这样您就不必做这样荒谬的事情了。在一个请求中上传 JSON 编码的元数据，然后根据需要在单独的请求中上传原始格式的图像。或者，使用分段上传在一张照片中完成这两项操作，使图像保持原始格式。

> 我们发现，当导入 5MP 位图时，其在堆中的大小会翻两番（即 7Mb jpeg 在内存中变为 28Mb）

那是因为PNG、JPEG等都是压缩的，图像需要解压缩才能显示。

> 有没有办法绕过Android的位图处理？

你没有说你是否试图显示图像。如果是，请使用`BitmapFactory`适当`BitmapFactory.Options`的缩放图像。

如果您不尝试显示图像，则在重写 Web 应用程序以接受二进制有效负载后，您不需要将整个图像加载到内存中。只需以它已经存在的格式上传它，一次读取块（例如，8KB）以写入`OutputStrem`您的`HTTP PUT`（或其他）以进行上传。

# wpf - 在代码隐藏文件中执行单元测试

> ID：12957518
> 
> 赞同：1
> 
> 时间：2012-10-18T14:52:25.827
> 
> 标签：wpf, unit-testing, nunit, code-behind

我正在使用 MVVM 模式实现 WPF 应用程序。

该应用程序基本上是一个通信面板（comms 面板），上面放置了控制部件（例如，拨号盘、内部通信线路等）。控件小部件也已使用 MVVM 模式实现，因为这使我们能够轻松地单独测试它们。

几个小时前，我在[这里](https://stackoverflow.com/questions/12952871/binding-a-variable-inside-a-viewmodel-to-a-different-variable-in-another-viewmod)发帖是因为我在连接 DialPad 和 CommsPanels 视图模型之间遇到问题。在与另一位 SO 成员长时间交谈后，我设法使链接正常工作。但是，在此过程中，我对 DialPad 代码进行了大量修改，例如删除其模型并将视图模型代码移动到代码隐藏文件中。问题是，不是我的单元测试不起作用，主要是因为每次我尝试实例化从 UserControl 继承的 DialPad 代码隐藏类时，NUnit 都会引发异常。有没有办法为从 WPF 类（例如 UserControl）继承的类编写单元测试？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-06-30T07:06:36.213

一种选择是从后面的代码中获取重要的代码并将其放入它自己的类（不继承自`UserControl`），然后由后面的代码包装。

# c# - 回发在 Safari 中单击鼠标时不起作用

> ID：12957519
> 
> 赞同：2
> 
> 时间：2012-10-18T14:52:29.557
> 
> 标签：c#, javascript, asp.net, safari

所以我有一个下拉上下文框，我用它来选择我要使用的项目。

现在一切似乎都可以在除 Safari 之外的所有浏览器上运行。如果您专注于该框并输入名称并按Enter键，我有一个在Safari中可以正常工作的类型功能。但是我的问题是鼠标点击。如果我从下拉列表中选择一个项目并单击它，则回发在我按键盘上的 Enter 之前不起作用。

这是我的`.ascx.cs`文件

```
...
if (cboContext.Visible)
    {
        string postBackFunction = "function contextPostback() {\n"
        + "var newValue = document.getElementById(\"" + cboContext.ClientID + "\").value;\n"
        + "if (newValue != " + cboContext.SelectedValue + ") " + Page.ClientScript.GetPostBackEventReference(cboContext, "") + ";\n}";

        Page.ClientScript.RegisterClientScriptBlock(typeof(string), "contextPostback", postBackFunction, true);

        if (Request.UserAgent.ToLower().IndexOf("chrome") > -1)
        {
            cboContext.Attributes.Add("onkeypress", "if (typeAhead(event,'" + cboContext.ClientID + "') == 1) contextPostback();");
            cboContext.Attributes.Add("onclick", "contextPostback();");
        }
        else if (Request.UserAgent.ToLower().IndexOf("safari") > -1)
        {
            cboContext.Attributes.Add("onclick", "contextPostback();");
            cboContext.Attributes.Add("onkeypress", "if (typeAhead(event,'" + cboContext.ClientID + "') == 1) contextPostback();");
            cboContext.Attributes.Add("onkeydown", "if (typeAhead(event,'" + cboContext.ClientID + "') == 1) contextPostback();");
            cboContext.Attributes.Add("onkeyup", "if (typeAhead(event,'" + cboContext.ClientID + "') == 1) contextPostback();");
        }
        else
        {

            cboContext.Attributes.Add("onkeydown", "if (typeAhead(event,'" + cboContext.ClientID + "') == 1) contextPostback();");
            cboContext.Attributes.Add("onclick", "contextPostback();");
        }
    } 
```

这是 typeAhead() 函数

```
function typeAhead(e, nextFocus) {

//don't trap Ctrl+keys
if ((window.event && !window.event.ctrlKey) || (e && !e.ctrlKey)) {

    // timer for current event
    var now = new Date();

    ....
    if (inputBuffer.accumString == "" || now - inputBuffer.last < inputBuffer.delay) {
        //check for browsers
        var is_chrome = navigator.userAgent.toLowerCase().indexOf('chrome') > -1;
        var is_safari = navigator.userAgent.toLowerCase().indexOf('safari') > -1;
        // make shortcut event object reference
        var evt = e || window.event;
        // get reference to the select element
        var selectElem = evt.target || evt.srcElement;
        // get typed character ASCII value
        var charCode = evt.keyCode || evt.which;
        // get the actual character, converted to uppercase
        var newChar = "";
        // get reference to the actual form selection list
        // added cross browser fix to enable the context switcher to work properly
        if (is_chrome) {
            var selection = document.getElementById("ctl00_ContextSwitch1_cboContext").selectedIndex;
        }
        else {
            var selection = document.getElementById(nextFocus);
        }
.... 
```

现在我在 chrome 浏览器的 typeAhead 中有一个部分，但是我为 safari 所做的一切似乎都不允许我使用鼠标单击来选择一个项目。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T15:08:50.037

简单的修复。safari 承认`onchange`，所以一旦我添加了它，它就可以正常工作。

# excel - 如何使用 XLSX 流启动 Excel

> ID：12957521
> 
> 赞同：0
> 
> 时间：2012-10-18T14:52:32.977
> 
> 标签：excel, openxml, excel-2010

我在内存中构建了一个 XLSX 文档。

我想向用户显示文档*而不必保存临时文件*。

在过去，我会简单地自动化 Excel，并制作

```
xl.Visible = true; 
```

并且用户会看到它 - 没有临时文件乱扔他们的计算机。

但我希望标准化一个代码库，用于[服务器端创建 Excel 文档和交互式创建 Excel 文档](http://epplus.codeplex.com/)。在服务器上，我会将 Stream 向下发送`HttpResponse`，或者作为 SMTP 附件发送，然后完成。

现在我需要一种将内容*流式传输*到客户端 Excel 的方法。

# android - Android ICS 电容式按键

> ID：12957523
> 
> 赞同：0
> 
> 时间：2012-10-18T14:52:46.630
> 
> 标签：android, button, android-4.0-ice-cream-sandwich

我一直在寻找它几个小时，但我还没有找到任何东西。

谁能告诉我 Android ICS 中带有两个方块的电容按钮的键码或名称？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T14:57:37.673

It's the "Recent Apps" button, but to the best of my knowledge it's in the same category as the Home button in that it cannot and should not have its functionality overridden by a third-party application.

Even if it *is* possible to override, I would strongly advise against it.

See also: [Handle Recent apps click](https://stackoverflow.com/a/11122909/321697), and [KEYCODE_APP_SWITCH](https://stackoverflow.com/a/12039141/321697)

# google-drive-api - 在 google drive api 中复制文档内容

> ID：12957524
> 
> 赞同：0
> 
> 时间：2012-10-18T14:52:47.347
> 
> 标签：google-drive-api

我需要使用 Google Drive Api for Java 将文档的内容复制到另一个文档中，两者都存储在谷歌驱动器中。我可以上传或下载文档，但我不知道如何将文档的内容*直接传输*到另一个文档中。我想到了这样的事情：

```
public void copyContent(String sourceId, String destinationId) {
   File sourceFile = service.files().get(sourceId).execute();
   AbstractInputStreamContent content = null; //sourceFile.getContent()??? :-(

   File destinationFile = service.files().get(destinationId).execute();
   service.files().update(destinationId, destinationFile, content).execute();
} 
```

有办法将文件内容作为 AbstractInputStreamContent 获取吗？或者它是否存在另一种复制内容的方法？我需要一个无需导出/上传文档的解决方案，因为我注意到了一些转换问题。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T16:11:29.227

您可以使用`files.copy`Drive API 的方法来创建现有文档的副本：

[https://developers.google.com/drive/v2/reference/files/copy](https://developers.google.com/drive/v2/reference/files/copy)

# c - 当父母发生事情时，父母进程如何告诉孩子做某事？

> ID：12957527
> 
> 赞同：0
> 
> 时间：2012-10-18T14:52:52.960
> 
> 标签：c, sockets, tcp, fork, pipe

我需要帮助来使父进程和子进程在充当`fork()`TCP 服务器程序的一部分时相互交谈。让我们调用 TCP 服务器的父 A 和子 B。A 从客户端接收数据，B 自动向该客户端发送数据。当 A 收到“hi”时，B 应该说“hello”。问题是，`pipe()`似乎不起作用，A 需要告诉 B 客户端发送了需要回复的内容。我已经阅读了有关共享内存的信息，但它似乎对我的使用并不实用。

请就如何实现这一点提出一些建议。我能够从 TCP 套接字的两端发送用户提示的消息，但我无法让客户端自动回复。

由于某些原因，我无法完全披露整个代码。这里有一些：

主要的：

```
int fd[2];
char bufout[10];
char bufin[10];
if (pipe2(fd,O_NONBLOCK) < 0) puts("Warning: Pipes not Running");

int id = fork();
if (id == -1) {
    perror("fork: ");
    return 1;
} 
```

家长：

```
printf("Client %s connected. \n",cli_ip);     
        while(1){
            memset(mesg,0,sizeof(mesg));
            if( recvfrom(connfd,mesg,sizeof(mesg),0,(struct sockaddr *)&cliaddr,&len) > 0 ){

                    printf("From %s port %d: %s",cli_ip,ntohs(cliaddr.sin_port),mesg);
                    if (strncmp(mesg,"hi",4) == 0) {
                        printf("%s hi you\n",cli_ip);
                        close(fd[0]);
                        write(fd[1],"hi",sizeof("hi"));

                    }
            }
            else {
                    printf("Client %s disconnected. \n",cli_ip);      
                    break;
            }
        } 
```

孩子：

```
while (1){
        close(fd[1]);
        if (read(fd[0],bufin,sizeof(bufin))) sendto(sockfd,"hello\r",strlen("hello\r"),0,(const struct sockaddr *)&servaddr,len);

        strcpy(bufin,"");

    } 
```

好吧，“管道未运行”消息没有出现，这是给定的。我觉得这是因为沿途有些东西被挡住了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T14:55:49.147

您可以在 C 中实现一个基本的基于 UDP 的消息传递机制（确保它在单独的线程中运行）。那个时候，当 A 发生什么事情时，可以通过数据报通知 B。B也一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T15:07:35.147

您可以创建环回套接字并将它们用于 IPC。 [这](http://www.cs.cf.ac.uk/Dave/C/node28.html)是一个很好的参考。

# jquery - 如何通过ajax重新加载数据

> ID：12957528
> 
> 赞同：0
> 
> 时间：2012-10-18T14:52:56.127
> 
> 标签：jquery, ajax, database, servlets

> **可能重复：**
> [如何使用 Servlet 和 Ajax？](https://stackoverflow.com/questions/4112686/how-to-use-servlets-and-ajax)

我有以下代码：

```
public class IndexServlet extends HttpServlet {

    MoodService moodService;

    public IndexServlet() {
        moodService = new MoodService();
    }

    /**
     * Accepts the request and sends it to the dispatcher which takes the database data and presents it as HTML
     */
    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        List<Mood> moodList = moodService.findLastMoods(25); //my way of getting data from database

        req.setAttribute("moodList", moodList);

        RequestDispatcher requestDispatcher =req.getRequestDispatcher("index.jsp");
        requestDispatcher.forward(req, resp);

    }

} 
```

和 index.jsp 文件：

```
<html>

<head>
    <title>Previous 25 entries:</title>
    <style type="text/css">
        #container {width:1200px; margin-left:auto; margin-right: auto;}
        #tableheader {width:900px; text-align: center;}
     .field {text-align:center; width:300px;}
    </style>

</head>

<body style="background-color: black;">
<div id="container">

    <table border="1" bordercolor="#FFCC00"  width="900" height="80" cellpadding="3" cellspacing="3" style="border-top-left-radius: 15px; border-top-right-radius: 15px; text-align: center; margin-left:auto; margin-right: auto; background-color:#FFFFCC; font-size: 33px; font-family: Monotype Corsiva ">

        <tr>
            <td style="border-top-left-radius: 10px; border-top-right-radius: 10px;">PREVIOUS 25 ENTRIES:</td>
        </tr>

    </table>

    <%
        List<Mood> moodList = (List<Mood>) request.getAttribute("moodList");
        for (Mood mood : moodList) {

            Integer a = mood.getMoodId();
            String moodId = new String();

            switch (a) {

                case 1:
                    moodId = "Happy";
                    break;

                case 2:
                    moodId = "Sad";
                    break;

                case 3:
                    moodId = "Lonely";
                    break;

                case 4:
                    moodId = "Angry";
                    break;

                case 5:
                    moodId = "In Love";
                    break;

                case 6:
                    moodId = "Content";
                    break;
            } %>

    <table id="table" border="1" bordercolor="#FFCC00"  width="900" cellpadding="3" cellspacing="3" style="text-align: center; margin-left:auto; margin-right: auto; background-color:#FFFFCC;">

        <tr>
            <td class="field"> <%=mood.getUserId()%></td>
            <td  class="field"> <%=moodId%></td>
            <%Date date = new Date(mood.getTime());
                SimpleDateFormat sdf = new SimpleDateFormat("dd:MM:yyyy hh:mm:ss");
                String sDate = sdf.format(date);
            %>
            <td  class="field"> <%=sDate%></td>

        </tr>

    </table>
    <%
        }
    %>

</div>
</body>

</html> 
```

我的问题是：

如何在其中实现 AJAX，以便每 30 秒用新数据刷新表，显示数据库中的最后 25 个条目？我更喜欢使用 jquery，看看到目前为止我用它所做的一切都比没有 jquery 简单得多......

我对 AJAX**一无所知**，这实际上是我第一次使用它（我刚刚开始学习），所以如果有人能给我一个关于如何做到这一点的分步教程，我将不胜感激。（或者至少告诉我可以做我想做的代码，我可以对它进行逆向工程，可能:)）

MoodService 是我自己的处理数据库的类（它如何工作与这种情况无关，唯一重要的是我需要在加载站点后将数据重新加载到表中）。

谢谢您的帮助！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T15:07:58.547

你需要三样东西：

1.  进行 AJAX 调用以获取数据。
2.  调度程序将返回一个 JSON 对象，您可以解析和绘制页面。
3.  30 秒后再次进行 AJAX 调用，清空 JSP 中已有的表并使用新响应重新绘制它。

    1.  第一点指南： http: [//api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

    $.ajax({ type: "POST", url: "some.php", data: { name: "John", location: "Boston" } }).done(function( msg ) { alert("数据保存： " + 味精); });

    1.  您可以使用[Jackson API](http://jackson.codehaus.org/)将 Java 对象转换为 JSON 对象。

此处指南：[http ://www.mkyong.com/java/jackson-streaming-api-to-read-and-write-json/](http://www.mkyong.com/java/jackson-streaming-api-to-read-and-write-json/)

要绘制页面，您需要在 Javascript 中创建元素。您可以通过使用 jQuery 中的 .append() 等来做到这一点。

1.  使用 setTimeout(functionToMakeAJAXCall, 30000); //30 秒

我很难格式化它，有人可以帮忙吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T14:56:45.307

我建议你看看这个非常简单实用的教程：

[如何使用 Servlet 和 Ajax](https://stackoverflow.com/questions/4112686/how-to-use-servlets-and-ajax)

# wpf - WPF 动画 - 如何从特定时间开始动画

> ID：12957530
> 
> 赞同：1
> 
> 时间：2012-10-18T14:53:01.153
> 
> 标签：wpf

我有一个带有关键帧动画的故事板。
如何从特定时间而不是从一开始就开始？

谢谢

**更新**
没关系，找到答案 - 将 BeginTime 设置为我希望它开始的时间的负数

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T15:00:38.063

没关系，找到答案 - 将 BeginTime 设置为我希望它开始的时间的负数

# extjs - extjs 树视图 - 以编程方式引用节点

> ID：12957532
> 
> 赞同：1
> 
> 时间：2012-10-18T14:53:03.410
> 
> 标签：extjs

我已经定义了一个 TreeView，当它被渲染到 HTML 页面时，第一个元素是一个带有我的 TreeView id 的 DIV：

```
<div id="levelTreePanel" class="x-panel x-tree-panel x-tree-lines x-grid 
x-grid-header-hidden x-panel-default" style="height: 120px; width: 320px; " 
role="presentation">
...
</div> 
```

在它下面有一些嵌套的 DIV，ID 像“treeview-xxxx”和“ext-genxxxx”然后有一个表在表的单元格中是呈现我的树数据中的每个节点的 Div。我希望能够从 Javascript 中引用代表我的节点的这些 Div，但生成的 Node-Div 根本没有 Id。我尝试将“id”属性分配给 Tree 数据的节点，但这些属性不会在生成的 HTML 上的任何位置呈现。

有没有办法让框架将 Id 值分配给树的节点？这是“childEls”或“tpl”属性的用途吗？

# c# - asp.net mvc 中的依赖注入，图像由 .net 进程提供

> ID：12957533
> 
> 赞同：0
> 
> 时间：2012-10-18T14:53:06.237
> 
> 标签：c#, asp.net, asp.net-mvc, structuremap

我目前没有代码，但我想知道是否有人可以回答这个问题。

在我的 asp.net MVC 应用程序中，我使用结构映射进行依赖注入。

当我这样做时，我注意到所有请求都通过 asp.net 进程，甚至图像也通过 asp.net 管道提供。

这通常是这种情况还是仅当我使用 IoC 容器并且必须使用结构图来控制对象创建时？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T14:55:25.363

通常这应该与 DI 框架无关。这与您在 IIS 中使用的是集成管道模式还是经典模式更相关。如果您的 web.config 中有以下设置，也可能是这种情况：

```
<modules runAllManagedModulesForAllRequests="true"> 
```

# css - 在图案背景上包裹盒子阴影效果

> ID：12957535
> 
> 赞同：0
> 
> 时间：2012-10-18T14:53:08.763
> 
> 标签：css

我正在尝试制作 Warp box-shadow 效果，但我发现的所有指南似乎只适用于一种颜色背景。我的问题是背景是一种图案，而且宽度也不是固定的，所以 png 图像不会真正起作用。

[http://jsfiddle.net/r8K8Z/](http://jsfiddle.net/r8K8Z/)

示例取自： http: [//lokeshkhinchi.wordpress.com/2010/12/10/warp-shadow-using-css-3/](http://lokeshkhinchi.wordpress.com/2010/12/10/warp-shadow-using-css-3/)

# c# - 如何在没有明确指定或使用重载的情况下 Moq 在其签名中具有可选参数的方法？

> ID：12957537
> 
> 赞同：134
> 
> 时间：2012-10-18T14:53:09.603
> 
> 标签：c#, unit-testing, moq

给定以下界面：

```
public interface IFoo
{
    bool Foo(string a, bool b = false);
} 
```

尝试使用 Moq 模拟它：

```
var mock = new Mock<IFoo>();
mock.Setup(mock => mock.Foo(It.IsAny<string>())).Returns(false); 
```

在编译时给出以下错误：

> 表达式树可能不包含使用可选参数的调用或调用

我发现上面提到的问题是 Moq 问题列表中的一个[增强功能](http://code.google.com/p/moq/issues/detail?id=284)，它似乎已分配给 4.5 版本（无论何时）。

我的问题是：鉴于上述情况不会很快得到解决，我该怎么办？我的选择是否只能在每次模拟时显式设置可选参数的默认值（这会破坏首先指定一个的点）或创建没有布尔的重载（就像我会做的那样在 C# 4) 之前？

或者有没有人遇到过更聪明的方法来克服这个问题？

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2012-10-19T16:41:35.527

我相信您现在唯一的选择是`bool`在`Foo`.

我不认为它违背了指定默认值的目的。默认值是为了方便调用代码，但我认为你应该在测试中明确。假设您可以省略指定`bool`参数。如果将来有人将默认值更改为`b`to会发生`true`什么？这将导致测试失败（这是理所当然的），但由于隐藏的假设`b`是`false`. 显式指定`bool`参数还有另一个好处：它提高了测试的可读性。浏览过它们的人会很快知道有一个`Foo`函数接受两个参数。那是我的 2 美分，至少 :)

至于每次模拟时都指定它，不要重复代码：在函数中创建和/或初始化模拟，这样你就只有一个变化点。如果你真的想要，你可以通过将`Foo`'s 参数复制到这个初始化函数中来克服 Moq 的明显缺点：

```
public void InitFooFuncOnFooMock(Mock<IFoo> fooMock, string a, bool b = false)
{
    if(!b)
    {
        fooMock.Setup(mock => mock.Foo(a, b)).Returns(false);
    }
    else
    {
        ...
    }
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-03-28T13:57:30.100

今天刚遇到这个问题，起订量不支持这个用例。因此，对于这种情况，似乎覆盖该方法就足够了。

```
public interface IFoo
{
    bool Foo(string a);

    bool Foo(string a, bool b);
} 
```

现在这两种方法都可用，这个例子可以工作：

```
var mock = new Mock<IFoo>();
mock.Setup(mock => mock.Foo(It.IsAny<string>())).Returns(false); 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2019-12-10T15:04:36.183

使用 Moq 版本 4.10.1 我已经能够执行以下操作

带接口：

```
public interface IFoo
{
    bool Foo(string a, bool b = false);
} 
```

和模拟

```
var mock = new Mock<IFoo>();
mock.Setup(mock => mock.Foo(It.IsAny<string>(), It.IsAny<bool>())).Returns(false); 
```

用第一个参数解决对 Foo 的调用 OK

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-01T18:57:53.420

就我而言，我的问题是我忘记包含`It.IsAny<string>()`对我的可选参数之一的调用。一旦我`It.Is...`调用了所有参数（包括可选参数），它就编译得很好。

# javascript - javascript优化以避免函数上下文

> ID：12957540
> 
> 赞同：0
> 
> 时间：2012-10-18T14:53:21.910
> 
> 标签：javascript, performance

我有以下代码（为清楚起见进行了整理）：

```
if ( typeof CPM == "undefined" || !CPM) {var CPM={};}

(function(){
  CPM.process = {
    createStyles: function() {
      //Do style processing
      alert("processing styles");
    },
    createClasses = {
      //Do style processing
      alert("processing classes");      
    },
    init: function(){CPM.process.createStyles()}
  };
})(); 
```

init 是公司使用的约定，出于其他原因必须存在。我要避免的是对 init 的附加函数调用。是否有另一种方法来编写相同的 init 并避免创建函数上下文？像：

```
init: CPM.process.createStyles 
```

以上失败，但我试图看看是否有任何其他方式来实现优化

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T14:58:47.390

直接设置`init: CPM.process.createStyles`失败，因为在键分配时尚`CPM.process`未定义。`init`您需要分两步构建您的对象：

```
 CPM.process = {
    createStyles: function() {
      //Do style processing
      alert("processing styles");
    },
    createClasses = {
      //Do style processing
      alert("processing classes");      
    }
  };
  CPM.process.init = CPM.process.createStyles; 
```

或者您可以使用外部函数定义并将其分配给两个键：

```
 function createStyles() {
    //Do style processing
    alert("processing styles");
  }
  CPM.process = {
    createStyles: createStyles,
    createClasses = {
      //Do style processing
      alert("processing classes");      
    },
    init: createStyles
  }; 
```

# django - 使用基于类的视图查询多个模型

> ID：12957542
> 
> 赞同：3
> 
> 时间：2012-10-18T14:53:27.377
> 
> 标签：django, django-class-based-views

我想解决以下情况。

我有一个包含*活动*用户信息的侧面板。为此，需要将 UserInfo 模型的实例传递给视图。

此外，我想将一些其他模型实例传递给页面（例如，购买、收藏等）。

我知道通过覆盖 get_context_data 很容易做到这一点。

```
def get_context_data(self, **kwargs):
    kwargs['purchases'] = Purchases.objects.get(id=1)
    kwargs['favourites'] = Favourites.objects.get(id=1)
    .... etc
    return super(UploadFileView, self).get_context_data(**kwargs) 
```

所以我的问题是-为此使用的最佳/最合适的 CBV 是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T19:58:19.377

这并不完全是 a `DetailView`，因为您有多个对象，但它既不是 a `ListView`，也不是 a`FormView`或其子对象。

由于您没有从中获得任何收益，因此简单的[TemplateView](http://django.readthedocs.org/en/latest/ref/class-based-views/base.html#templateview)可能是要走的路。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T18:01:56.360

如果您在多个视图中查询相同的 UserInfo、Purchase、Favorites 等，请创建一个可以重复使用的 Mixin。

```
class CommonUserInfoMixin (object):
    def get_context_data(self, **kwargs):
        context = super(OrgContextMixin, self).get_context_data(**kwargs)
        ... # Add more to context object 
```

然后你可以在你的普通列表、详细信息、更新等 CBV 中使用它

```
class ItemList(CommonUserInfoMixin, ListView):
    .... 
```

# c++ - libjpeg：如何获得正确的图像解压缩大小？

> ID：12957543
> 
> 赞同：2
> 
> 时间：2012-10-18T14:53:27.380
> 
> 标签：c++, jpeg, compression, libjpeg

我有这样一个常见的代码：

```
struct jpeg_decompress_struct cinfo;
jpeg_create_decompress(&cinfo);
jpeg_stdio_src(&cinfo, infile);
jpeg_read_header(&cinfo, TRUE);

cinfo.scale_num = ?;
cinfo.scale_denom = ?;

needed_width = cinfo.output_width;
needed_height = cinfo.output_height; 
```

如何获取**scale_num**和**scale_denum**参数以将图像缩放到所需的大小。例如，我想将它缩小一倍。

如果我设置`scale_num = 1`，`scale_denom = 2`. 结果是：（1802 x 1237）到（258 x 194）

文档说：

```
Scale the image by the fraction scale_num/scale_denom.  Default is
1/1, or no scaling.  Currently, the only supported scaling ratios
are 1/1, 1/2, 1/4, and 1/8. 
```

但是当我设置这样的比例时，我没有得到所需的结果。

所以**问题**是： **如何设置`scale_num`和`scale_denom`获取与需要的最大相似大小的图像。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T15:19:03.193

您应该调用 jpeg_calc_output_dimensions(cinfo) 以获得正确的 output_width 和 output_height 值。

计算系数 scale_denom 我通常做这样的事情：

```
unsigned int intlog2(unsigned int val) {
 int targetlevel = 0;
 while (val >>= 1) ++targetlevel;
 return targetlevel;
}

// ....
// for example, 
const int width = 5184;
const int height = 3456;

unsigned int needed_width = 640;
unsigned int needed_height = 480;

unsigned int wdeg = intlog2(width / needed_width);
unsigned int hdeg = intlog2(height / needed_height);

unsigned int scale_den = std::min(1 << (std::min)(wdeg, hdeg), 8);

unsigned int result_width = width / scale_den;
unsigned int result_height = height / scale_den; 
```

# java - 无法从 UDP 多播接收字符串

> ID：12957544
> 
> 赞同：2
> 
> 时间：2012-10-18T14:53:27.830
> 
> 标签：java, networking, udp, ip, datagram

我在从多播接收字符串时遇到一些问题。这是我第一次在 Java 中使用 UDP 多播。

我正在通过 LAN 制作多客户端应用程序。所以我使用本地 IP 地址。我需要客户端找到服务器的 IP 地址，以便他们可以发送数据、请求等。

我让服务器每 5 秒用他自己的 IP 作为字符串发送一个多播。客户应该能够收到它。问题是他们没有收到任何东西。我正在使用 2 台设备进行测试，所以我不需要使用 localhost。

这是我的一些代码： 服务器端：

公共类 MulticastIpSender 扩展 Thread{

```
private String serverIp;
private int port;
private String multicastAddress;
private long WAITING_TIME = 5000;  // 5 seconden

private DatagramSocket socket;

public MulticastIpSender(String serverIp, int port, String multicastAddress) throws SocketException {
    super();
    this.serverIp = serverIp;
    this.port = port;
    this.multicastAddress = multicastAddress;
    socket = new DatagramSocket(port);
}

public void run() {
    while(true){
        try {
            byte[] buf = new byte[256];
            buf = serverIp.getBytes();
            InetAddress group = InetAddress.getByName(multicastAddress);
            DatagramPacket packet = new DatagramPacket(buf, buf.length, group, port);
            socket.send(packet);
            System.out.println("sent IP("+serverIp+") to group("+group+") on port "+port);
            sleep(WAITING_TIME);

        } catch (UnknownHostException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }

} 
```

}

我把这个方法放在主类中：

```
private void sendIpAddressToListeners() {
    try {
        multicastIpSender = new MulticastIpSender(serverIp,PORT,"230.0.0.1");
        multicastIpSender.run();
    } catch (SocketException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

}

我得到这样的serverIp：

```
 String hostName = InetAddress.getLocalHost().getHostName();
        InetAddress addrs[] = InetAddress.getAllByName(hostName);
if (!addr.isLoopbackAddress() && addr.isSiteLocalAddress()) {
        myIp = addr.getHostAddress();
        }
        }
        System.out.println ("\nIP = " + myIp);
        return myIp; 
```

在这个设备上它给了我 192.168.1.2

客户端：

```
multicastSocket = new MulticastSocket(PORT);
        InetAddress address = InetAddress.getByName(MULTICAST_ADDRESS);
        multicastSocket.joinGroup(address);

        DatagramPacket serverIpPacket;
        byte[] buf = new byte[256];
        serverIpPacket = new DatagramPacket(buf, buf.length);
        while(receivedIp ==null){
            multicastSocket.receive(serverIpPacket);
            receivedIp = new String(serverIpPacket.getData(), 0, serverIpPacket.getLength());
            System.out.println("received server ip: " + receivedIp);
        } 
```

！！服务器和客户端的 PORT = 4445

我希望有人可以帮助我，或者可以解释一个更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T14:55:47.220

在广播地址上发送一个普通的 DatagramPacket，该数据包将被本地网络中的所有主机接收（具有相同的网络配置，重要部分是掩码）

使用计算器检查您的广播地址，这个很好用： http: [//www.subnet-calculator.com/](http://www.subnet-calculator.com/)

# android - 具有自定义布局 getCheckedItemPositions 的 Android ListView

> ID：12957553
> 
> 赞同：0
> 
> 时间：2012-10-18T14:53:59.203
> 
> 标签：android, listview, checkbox, baseadapter

我有一个`ListView`自定义布局，`CheckBox`可以选择多个要删除的项目，但`list.getCheckedItemPositions()`总是返回 0。

我无法找出我错过了什么。`CheckBox`当用户将 a 检查为 true 以便`getCheckedItemPositions`返回它们时，如何填充检查项目列表？

**列表显示**

```
<ListView
    android:id="@android:id/list"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_above="@+id/footer"
    android:choiceMode="multipleChoice"
    android:clickable="true"
    android:layout_below="@+id/adViewHolder" /> 
```

**排**

```
<LinearLayout
    android:id="@+id/recording_play_holder"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_centerVertical="true"
    android:layout_marginRight="5dip"
    android:orientation="vertical" >

    <ImageView
        android:id="@+id/recording_play_button"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical"
        android:src="@drawable/play" />

    <CheckBox
        android:id="@+id/multi_checkBox"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical"
        android:focusable="false"
        android:focusableInTouchMode="false" />

</LinearLayout> 
```

**适配器**

```
public RecordingsAdapter(Context context, ListActivity a, ArrayList<MyObject> items) {
    mContext = context;
    mItems = items;
    mActivity = a;
    inflater = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    checkBoxState=new boolean[items.size()];

 }
 ..................
 ................
 @Override
 public View getView(final int position, View convertView, ViewGroup parent) {
     View vi = convertView;
     if(convertView==null) {
         vi = inflater.inflate(R.layout.recording_list_item, null);
     }   

     final CheckBox multi_checkBox = (CheckBox) vi.findViewById      (R.id.multi_checkBox);
     multi_checkBox.setChecked(checkBoxState[position]);
     multi_checkBox.setOnClickListener(new View.OnClickListener() {

         public void onClick(View v) {
             if(((CheckBox)v).isChecked()) {
                 checkBoxState[position]=true;                  
                 v.setSelected(true);                   
             } else{
                 checkBoxState[position]=false;
                 v.setSelected(false);
             }            
         }
    });

    return vi;

} 
```

**活动**

```
SparseBooleanArray checkedItemPositions = list.getCheckedItemPositions();  
Log.i("recorded_file_delete list.getCheckedItemPositions()", String.valueOf(list.getCheckedItemPositions().size())); 
int itemCount = list.getCount();  
Log.i("recorded_file_delete", String.valueOf(itemCount)); 
for(int i=itemCount-1; i >= 0; i--){                  
    if(checkedItemPositions.get(i)){                   
        boolean deleted = f.delete();
        if(deleted) {
            Asr.recordingsCache.removeRecordingFile(f);
            Log.i("recorded_file_delete", String.valueOf(deleted)); 
        }    
    }          
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-16T10:11:02.670

您还需要将所选项目设置为列表视图已知。尝试使用这个- `listView.setItemChecked(position,true);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-12T06:30:28.417

利用：

```
SparseBooleanArray arraySparse = myGridView.getcheckeditempositions();

for(int i=0;i<arraySparse.size();i++){
//Shows values boolean of keys 
     Log.d("MI_APP",""+arraySparce.valueAt(i));
//Shows keys id or position of your element in the GridView
     Log.d("MI_APP",""+arraySparce.keyAt(i));
} 
```

问候！

# amcharts - 使用 Amcharts Javascript 的数字格式

> ID：12957560
> 
> 赞同：11
> 
> 时间：2012-10-18T14:54:15.910
> 
> 标签：amcharts

Amchart 给了我惊人的 HTML 图形，但是......

如何格式化数轴？目前它显示我 65,000，我需要像 65000 这样的值。没有逗号！

谢谢！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-18T14:54:15.910

我解决了这个问题！

投入`AmCharts.ready(function(){`_

```
chart.numberFormatter = {
  precision:-1,decimalSeparator:",",thousandsSeparator:""
}; 
```

所有数字格式都发生在那里！

* * *

```
var chart = AmCharts.makeChart("chartdiv", {
        [...]
        "numberFormatter": {
            "precision": -1,
            "decimalSeparator": ",",
            "thousandsSeparator": ""
        }
    }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-07-11T17:31:29.970

如果您需要格式化确定的数字：

```
var formatted = AmCharts.formatNumber(number, 
{
     precision: chart.precision,
     decimalSeparator: chart.decimalSeparator,
     thousandsSeparator: chart.thousandsSeparator
}, 2); 
```

> formatNumber（数字，格式化程序，zeroCount）
> 
> 使用提供的设置返回字符串格式化程序。Formatter 是一个对象，定义了精度、decimalSeparator 和数千个Separator，例如：{precision: 2, decimalSeparator: '.', crowdSeparator: ','}; 如果您不需要调整精度，请将其设置为 -1。zeroCount 定义应在逗号后添加多少个零（在格式化货币时很有用）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-24T09:05:56.877

放这个，它将从数千个中删除（参考[文档](http://docs.amcharts.com/2/javascriptcharts/AmChart)）

```
"numberFormatter": {precision:-1, decimalSeparator:',', thousandsSeparator:''}, 
```

# javascript - javascript 重定向表单在 Chrome/Safari 中工作，但在 Firefox/IE 中也没有

> ID：12957563
> 
> 赞同：1
> 
> 时间：2012-10-18T14:54:17.017
> 
> 标签：javascript, redirect, passwords

在访问者输入促销活动的访问代码后，我正在尝试创建重定向。它在 OS X Chrome & Safari 和 Windows Chrome 中运行良好，但在 OS X Firefox 或 Windows IE & Firefox 中运行良好。

网站位于[https://www.preciousmetals.com/offer12](https://www.preciousmetals.com/offer12)

我脑子里有这个脚本……</p>

```
<script type="text/javascript">
    function checkCode() {
        if (this.password.value.toLowerCase() == 'AAL1012'.toLowerCase()) { 
            window.location='https://www.preciousmetals.com/special-offer-12.html'; 
        } 
        else { 
            alert('Wrong Access Code!'); 
        } 
        return false;
    }
    </script> 
```

而这在体内……</p>

```
<form onsubmit="return checkCode()">
                                <h3 style="text-align: center;">
                                    Enter Access Code To Proceed
                                </h3>
                                <div style="text-align: center;">
                                    <input type="password" id="password" />
                                    <input  type="submit" value="Proceed"  />
                                </div>
                            </form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T15:08:43.520

你真的不应该用这样的 javascript 验证密码。这是一个很大的安全问题。

如果你想这样做，试试这个：

```
<h3 style="text-align: center;">
    Enter Access Code To Proceed
</h3>
<div style="text-align: center;">
    <input type="password" id="password" />
    <button onClick="checkCode();return false;" type="button">Proceed</button>
</div> 
```

请注意，我删除了表单并替换了按钮代码

# php - PHP MySQL文件上传脚本不起作用

> ID：12957566
> 
> 赞同：0
> 
> 时间：2012-10-18T14:54:21.353
> 
> 标签：php, mysql, file-upload

我在一个网站上使用以下脚本，它运行良好 - 在此处询问后。我现在试图把它放到另一个站点，它给了我错误 Mysql error: No database selected any ideas? 非常感谢您的帮助我对这些东西很陌生。从安全的角度来看，我知道脚本并不是最好的——我正在努力解决这个问题！

```
<?php 

 require_once('../Connections/BrightLights.php');

 //This is the directory where images will be saved 
 $target = "images/"; 
 $target = $target . basename( $_FILES['photo']['name']); 

 //This gets all the other information from the form 
 $name=$_POST['name']; 
 $caption=$_POST['caption']; 
 $live=$_POST['live']; 
 $photo=($_FILES['photo']['name']); 

 //Writes the information to the database 
    mysql_query("INSERT INTO `gallery` VALUES ('', '$name', '$caption', '$photo', '$live')") ;  
    if( mysql_errno() != 0){
     // mysql error
     // note: message like this should never appear to user, should be only stored in log
     echo "Mysql error: " . htmlspecialchars( mysql_error());
     die();
}

 //Writes the photo to the server 
 if(move_uploaded_file($_FILES['photo']['tmp_name'], $target)) 
 { 

 //Tells you if its all ok 
 echo "The file ". basename( $_FILES['uploadedfile']['name']). " has been uploaded, and your information has been added to the directory"; 
 } 
 else { 

 //Gives and error if its not 
 echo "Sorry, there was a problem uploading your file."; 
 } 
 ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T14:56:57.967

在您查询数据库之前，您必须先连接并选择数据库，然后您才能查询它。用这个：

```
mysql_connect(hostname, username, password) or die(mysql_error());
mysql_select_db(database_name); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T14:57:18.530

当您忘记选择数据库`mysql_select_db()`并调用时，通常会出现“未选择数据库”错误`mysql_query()`

# c# - 使用 linq 过滤分层列表

> ID：12957567
> 
> 赞同：4
> 
> 时间：2012-10-18T14:54:22.840
> 
> 标签：c#, linq, expression-trees

这是我的产品模型

```
public class Product
{
    public string Name{ get; set; }

    public int ProductNumber{ get; set; }

    public List<Product> ProductList { get; set; }
}

//// below is the structure of the list
IList<Product> rootList = new List<Product>
            {
                new Product 
                { 
                    ProductNumber = 1, Name = "A", 
                    ProductList = new List<Product> { new Product { ProductNumber = 2, Name = "A1", 
                        ProductList = new List<Product> { new Product { ProductNumber = 3, Name = "A2", ProductList = new List<Product>()} }}  
                    }
                },

                new Product 
                { 
                    ProductNumber = 4, Name = "B", 
                    ProductList = new List<Product> { new Product { ProductNumber = 5, Name = "B1", 
                        ProductList = new List<Product> { new Product { ProductNumber = 6, Name = "B2", ProductList = new List<Product>()} }}  
                    }
                },

                 new Product 
                { 
                    ProductNumber = 7, Name = "C", 
                    ProductList = new List<Product> { new Product { ProductNumber = 8, Name = "C1", 
                        ProductList = new List<Product> { new Product { ProductNumber = 9, Name = "C2", ProductList = new List<Product>()} }}  
                    }
                }
            }; 
```

我需要过滤上面包含 ProductNumber 小于 5 的列表，即。输出应为产品编号小于 5 的产品列表。

有可用的扩展吗？请帮忙。

这是我的预期结果

```
 Product 
            { 
                ProductNumber : 1, 
                Name : "A", 
                ProductList : { { 
                          ProductNumber : 2, 
                          Name : "A1", 
                          ProductList :{ { 
                                  ProductNumber = 3, 
                                  Name : "A2", 
                                  ProductList : null} }}  
                }
            },

            Product 
            { 
                ProductNumber : 4, 
                Name : "B"
                ProductList : null
            } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T15:00:23.783

拼凑一个“扁平化这棵树”的类似 LINQ 的函数是相当容易的

```
public static IEnumerable<T> Flatten<T>(
    this IEnumerable<T> source,
    Func<T, IEnumerable<T>> childSelector)
{
    HashSet<T> added = new HashSet<T>();
    Queue<T> queue = new Queue<T>();
    foreach(T t in source)
        if (added.Add(t))
            queue.Enqueue(t);
    while (queue.Count > 0)
    {
        T current = queue.Dequeue();
        yield return current;
        if (current != null)
        {
            IEnumerable<T> children = childSelector(current);
            if (children != null)
                foreach(T t in childSelector(current))
                    if (added.Add(t))
                        queue.Enqueue(t);
        }
    }
} 
```

然后您可以在常规 LINQ 中使用它，例如

```
var lessThanFive = rootList
    .Flatten(p => p.ProductList)
    .Where(p => p.ProductNumber < 5)
    .ToList(); 
```

**编辑**：从您的编辑中，我可以看出这不是您想要的。（您不想要产品列表，您想要产品树......）我将把它留在这里，因为我非常喜欢它作为我*认为*你的问题的解决方案，但我会有想想你的新问题...

**编辑**：如果您不介意修改原始对象，可以按如下方式使用：

```
rootList = rootList.Where(p => p.ProductNumber < 5).ToList();
foreach (var pr in rootList.Flatten(p => p.ProductList))
    pr.ProductList = pr.ProductList.Where(p => p.ProductNumber < 5).ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T19:13:14.013

你需要这样的东西：

```
public static class EnumerableExtensions
{
    public static IEnumerable<TR> Recur<T, TR>(
        this IEnumerable<T> source, 
        Func<T, bool> filter, 
        Func<T, IEnumerable<T>> recursor, 
        Func<T, IEnumerable<T>, TR> resultor)
    {
        foreach(var t in source)
            if (filter(t))
                yield return resultor(t, recursor(t));
    }
} 
```

你会这样称呼它：

```
var q = rootList.Recur(
    p => p.ProductNumber < 5,
    p => p.ProductList,
    (p, cs) => new 
    {
        p.ProductNumber, 
        p.Name,
        ProductList = cs 
    }); 
```

# javascript - 删除具有特定字符串的类

> ID：12957572
> 
> 赞同：-2
> 
> 时间：2012-10-18T14:54:36.293
> 
> 标签：javascript, jquery

我需要删除具有特定字符串的类。
我确实尝试了以下方法，但它不起作用。

```
<body class="myClass someStringAndOtherString"></body>

$('body').removeClass('class', ':contains("someString")'); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T14:56:07.640

要删除类“someString”，请执行以下操作：

```
$('body').removeClass('someString'); 
```

如果找到“someString”类，则删除所有类：

```
$('body').hasClass('someString').removeAttr('class'); 
```

要删除包含字符串的类：

[现场演示](http://jsfiddle.net/JKuPD/)

```
// test if someString is present
if( $('body').attr('class').indexOf('someString') != -1){
     // get classes as array
     var classes = $('body').attr('class').split(' ');
     // loop over array
     for(i=0;i< classes.length; i++){
          // is this class a class that contains someString?
          if(classes[i].indexOf('someString') != -1){
              // remove said class
              $('body').removeClass(classes[i]);
          }
     }
} 
```

或者这里是一个函数：

[现场演示](http://jsfiddle.net/Y9hUR/1/)

```
function removeClassesThatContainString(selector, someString){
    var $selector = $(selector),
        classAttr = $selector.attr('class');
    if(classAttr.indexOf(someString) != -1){
        var classes = classAttr.split(' ');
        for(i=0; i<classes.length; i++){            
            if(classes[i].indexOf(someString) != -1){
                $selector.removeClass(classes[i]);
            }
        }
    }
} 
```

那么它将是：

```
removeClassesThatContainString('body', 'someString'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T15:01:05.123

```
$('body').removeClass('someString'); 
```

如果该类将存在于多个地方：

```
$('.someString').removeClass('someString'); 
```

*编辑* 对新问题的回答：

```
$('[class*="someString"]').each(function () 
  var classes = $(this).attr('class').split(' ');
  for(var i = 0; i < classes.length; ++i) {
    if(classes.indexOf('someString') >= 0) {
      $(this).removeClass('classes[i]);
    }
  }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T15:30:08.280

你可以试试这段代码。

```
$('body').removeClass(function(i,c){var classes=c.split(' ');for(var i=0;i<classes.length;i++){if(/someString/.test(classes[i]))return classes[i];}}); 
```

它将删除诸如 someStringAndOtherString、thissomeString 和 someString 之类的类。

在多个类的情况下，它只会删除匹配的一个，因此，在您的示例中，它将单独保留“myClass”类。

# c - 为什么 C 标准定义了一个短的数据类型范围？

> ID：12957574
> 
> 赞同：5
> 
> 时间：2012-10-18T14:54:47.510
> 
> 标签：c

C99 标准以下列方式定义数据类型的范围：

```
— minimum value for an object of type signed char
SCHAR_MIN -127 // −(2^7 − 1)
— maximum value for an object of type signed char
SCHAR_MAX +127 // 2^7 − 1
— maximum value for an object of type unsigned char
UCHAR_MAX 255 // 2^8 − 1
— minimum value for an object of type char
CHAR_MIN see below
— maximum value for an object of type char
CHAR_MAX see below
— maximum number of bytes in a multibyte character, for any supported locale
MB_LEN_MAX 1
— minimum value for an object of type short int
SHRT_MIN -32767 // −(2^15 − 1)
— maximum value for an object of type short int
SHRT_MAX +32767 // 2^15 − 1
— maximum value for an object of type unsigned short int
USHRT_MAX 65535 // 2^16 − 1
— minimum value for an object of type int
INT_MIN -32767 // −(2^15 − 1)
— maximum value for an object of type int
INT_MAX +32767 // 2^15 − 1
— maximum value for an object of type unsigned int
UINT_MAX 65535 // 2^16 − 1
— minimum value for an object of type long int
LONG_MIN -2147483647 // −(2^31 − 1)
— maximum value for an object of type long int
LONG_MAX +2147483647 // 2^31 − 1
— maximum value for an object of type unsigned long int
ULONG_MAX 4294967295 // 2^32 − 1 
```

如果我们看到负范围，它实际上可能比这里根据允许的二进制恭维表示定义的范围大一。为什么它们是这样定义的？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-18T15:17:06.877

> 如果我们看到负值范围，它实际上可能比此处根据允许的二进制补码表示定义的值多一。为什么它们是这样定义的？

因为 C 也是为旧的（和新的！）架构设计的，它*不一定*对有符号整数使用二进制补码表示。C11 标准确实允许三种表示形式（其中适用的是实现定义的）：

> ## § 6.2.6.2 整数类型
> 
> 如果符号位为 1，则该值应通过以下方式之一进行修改：
> 
> — 符号位 0 的对应值被取反（*符号和幅度*）
> — 符号位的值为 -(2 ^M )（*二进制补码*）；
> — 符号位的值为 −(2 ^M − 1)（*个数补码*）。

所以，用一个的补码表示，最小值是`-(2^M - 1)`。但是，有一个例外：C99 可选类型`intxx_t`，保证以二进制补码表示形式存储（这就是为什么存在可选类型：C 标准不强制这种表示形式）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-18T14:59:46.703

因为不需要二进制补码。C99 可以在具有符号位和幅度或补码的体系结构上实现。

# php - 如何从 twitter 的 JSON 响应中访问元素？

> ID：12957575
> 
> 赞同：-6
> 
> 时间：2012-10-18T14:54:49.193
> 
> 标签：php, twitter, json

从 Twitter 的以下回复中，我如何访问`'followers_count'`？

```
array(1) { 
    [0]=> object(stdClass)#1 (21) { 
        ["created_at"]=> string(30) "Mon Oct 15   19:20:28 +0000 2012" 
        ["id"]=> int(257923917879070721) 
        ["id_str"]=> string(18) "257923917879070721" 
        ["text"]=> string(127) "As open enrollment begins, Medicare is getting stronger â€“ but Rep. Ryan wants to dismantle it. My op-ed: http://t.co/DUEYxQOt"  
        ["source"]=> string(3) "web"  
        ["truncated"]=> bool(false)  
        ["in_reply_to_status_id"]=> NULL  
        ["in_reply_to_status_id_str"]=> NULL  
        ["in_reply_to_user_id"]=> NULL  
        ["in_reply_to_user_id_str"]=> NULL  
        ["in_reply_to_screen_name"]=> NULL  
        ["user"]=> object(stdClass)#2 (38) {  
            ["id"]=> int(16789970)  
            ["id_str"]=> string(8) "16789970"  
            ["name"]=> string(18) "Senator Harry Reid"  
            ["screen_name"]=> string(11) "SenatorReid"  
            ["location"]=> string(15) "Searchlight, NV"  
            ["url"]=> string(22) "http://reid.senate.gov"  
            ["description"]=> string(108) "News from the office of Nevada Senator Harry Reid, the U.S. Senate Majority Leader. (EspaÃ±ol: @SenadorReid)"  
            ["protected"]=> bool(false)  
            ["followers_count"]=> int(67261)  
            ["friends_count"]=> int(126)  
            ["listed_count"]=> int(3712)  
            ["created_at"]=> string(30) "Wed Oct 15 19:42:08 +0000 2008"  
            ["favourites_count"]=> int(1)  
            ["utc_offset"]=> int(-18000)  
            ["time_zone"]=> string(5) "Quito"  
            ["geo_enabled"]=> bool(false)  
            ["verified"]=> bool(true)  
            ["statuses_count"]=> int(1556)  
            ["lang"]=> string(2) "en"  
            ["contributors_enabled"]=> bool(false)  
            ["is_translator"]=> bool(false)  
            ["profile_background_color"]=> string(6) "233E6D"  
            ["profile_background_image_url"]=> string(70) "http://a0.twimg.com/profile_background_images/4744650/reid_twitter.jpg"  
            ["profile_background_image_url_https"]=> string(72) "https://si0.twimg.com/profile_background_images/4744650/reid_twitter.jpg"  
            ["profile_background_tile"]=> bool(false)  
            ["profile_image_url"]=> string(66) "http://a0.twimg.com/profile_images/81906216/reid_square_normal.jpg"  
            ["profile_image_url_https"]=> string(68) "https://si0.twimg.com/profile_images/81906216/reid_square_normal.jpg"  
            ["profile_banner_url"]=> string(63) "https://si0.twimg.com/brand_banners/SenatorReid/1323385337/live"  
            ["profile_link_color"]=> string(6) "004CB4"  
            ["profile_sidebar_border_color"]=> string(6) "6383A3"  
            ["profile_sidebar_fill_color"]=> string(6) "AFC4DA"  
            ["profile_text_color"]=> string(6) "333333"  
            ["profile_use_background_image"]=> bool(true)  
            ["default_profile"]=> bool(false)  
            ["default_profile_image"]=> bool(false)  
            ["following"]=> NULL  
            ["follow_request_sent"]=> NULL  
            ["notifications"]=> NULL } ["geo"]=> NULL  
            ["coordinates"]=> NULL  
            ["place"]=> NULL  
            ["contributors"]=> NULL  
            ["retweet_count"]=> int(88)  
            ["entities"]=> object(stdClass)#3 (3) {  
                ["hashtags"]=> array(0) { }  
                ["urls"]=> array(1) {  
                    [0]=> object(stdClass)#4 (4) {  
                        ["url"]=> string(20) "http://t.co/DUEYxQOt"  
                        ["expanded_url"]=> string(21) "http://huff.to/TshePO"  
                        ["display_url"]=> string(14) "huff.to/TshePO"  
                        ["indices"]=> array(2) {  
                            [0]=> int(105)  
                            [1]=> int(125) 
                        } 
                } 
            } 
            ["user_mentions"]=> array(0) { } 
        } 
        ["favorited"]=> bool(false) 
        ["retweeted"]=> bool(false) 
        ["possibly_sensitive"]=> bool(false) 
    } 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T15:01:37.940

要轻松阅读您的 var_dump，您可以安装 x-debug：http: [//xdebug.org/](http://xdebug.org/)。

并访问您的信息，它是：

```
$followersCount = $twitterResponse[0]->user->followers_count 
```

以你为例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T15:05:50.183

```
$response[0]["user"]["followers_count"] 
```

# powershell - 如何将多个命令通过管道传输到 CSV 文件 [Powershell]

> ID：12957576
> 
> 赞同：1
> 
> 时间：2012-10-18T14:54:50.333
> 
> 标签：powershell

我正在尝试获取我们服务器上所有文件夹的文件夹信息和安全信息。但是我在这里对Powershell并不熟悉。介意帮助新手吗？

如何将安全 acl 通过管道传输到文本文件中？除了文件夹名称、大小、子文件夹计数的成员对象吗？

```
# Step 1 Get Folder Path 
function Select-Folder($message='Select a folder', $path = 0) { 
    $object = New-Object -comObject Shell.Application  

    $folder = $object.BrowseForFolder(0, $message, 0, $path) 
    if ($folder -ne $null) { 
        $folder.self.Path 
    } 
} 

#Step 2:Search For Directories
$dirToAudit = Get-ChildItem -Path (Select-Folder  'Select some folder!') -recurse | Where {$_.psIsContainer -eq $true}

foreach ($dir in $dirToAudit)
{

#Step 3: Output: [Folder Path, Name, Security Owner, Size, Folder Count]
#Pipe To CSV Text File
    Get-Acl -Path $dir.FullName | Select-Object PSPath, Path,Owner | export-csv C:\temp\SecurityData.csv
    #I also want the Folder path, Size and SubFolder Count
}

#Step 4: Open in Excel 
invoke-item -path C:\temp\SecurityData.csv 
```

以下是我发现对这个主题有用的一些网站：http: [//blogs.msdn.com/b/powershell/archive/2007/03/07/why-can-ti-pipe-format-table-to-export-csv -and-get-something-useful.aspx](http://blogs.msdn.com/b/powershell/archive/2007/03/07/why-can-t-i-pipe-format-table-to-export-csv-and-get-something-useful.aspx)

[http://www.maxtblog.com/2010/09/to-use-psobject-add-member-or-not/](http://www.maxtblog.com/2010/09/to-use-psobject-add-member-or-not/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T17:15:31.873

这项任务并不是特别容易。首先，您需要创建一个包含所需属性的自定义对象。这些属性将通过不同的命令添加，例如：

```
$objs = Get-ChildItem . -r | 
            Where {$_.PSIsContainer} | 
            Foreach {new-object psobject -prop @{Path=$_.FullName;Name=$_.Name;FolderCount=$_.GetDirectories().Length}}
$objs = $objs | Foreach { Add-Member NoteProperty Owner ((Get-Acl $_.Path).Owner) -Inp $_ -PassThru}

$objs | Export-Csv C:\temp\data.csv 
```

获取文件夹大小将需要一些额外的工作来计算。

# python - 如何在 cv2 和 python 中使用霍夫圆？

> ID：12957577
> 
> 赞同：12
> 
> 时间：2012-10-18T14:54:52.697
> 
> 标签：python, opencv, geometry, hough-transform

我有以下代码，我想检测圆圈。

```
 img = cv2.imread("act_circle.png")
   gray = cv2.cvtColor(img,cv2.COLOR_BGR2GRAY)
   circles = cv2.HoughCircles(gray,cv2.CV_HOUGH_GRADIENT) 
```

看起来它没有该属性，错误如下

```
'module' object has no attribute 'CV_HOUGH_GRADIENT' 
```

有人知道这个隐藏参数在哪里吗？

谢谢

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-18T15:11:18.213

`CV_HOUGH_GRADIENT`属于`cv`模块，所以你需要导入：

```
import cv2.cv as cv 
```

并将您的函数调用更改为

```
circles = cv2.HoughCircles(gray,cv.CV_HOUGH_GRADIENT) 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2015-09-01T07:34:53.063

就我而言，我使用的是 opencv 3.0.0，它的工作方式如下：

```
circles = cv2.HoughCircles(gray_im, cv2.HOUGH_GRADIENT, 2, 10, np.array([]), 20, 60, m/10)[0] 
```

即，而不是`cv2.cv.CV_HOUGH_GRADIENT`，我只使用了`cv2.HOUGH_GRADIENT`。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-10-04T10:45:26.443

如果您使用 OpenCV 3，请使用以下代码：

```
img = cv2.imread("act_circle.png")
gray = cv2.cvtColor(img,cv2.COLOR_BGR2GRAY)
circles = cv2.HoughCircles(gray,cv2.HOUGH_GRADIENT) # change here 
```

# python - 将 yerr/xerr 绘制为阴影区域而不是误差线

> ID：12957582
> 
> 赞同：175
> 
> 时间：2012-10-18T14:20:47.523
> 
> 标签：python, matplotlib

在 matplotlib 中，如何将误差绘制为阴影区域而不是误差线？

例如：

[![在此处输入图像描述](../Images/25c4dd46f5de7394949cfdbccbbbb230.png)](https://i.stack.imgur.com/skJ5O.png)

而不是

[![在此处输入图像描述](../Images/09a34d5fc0ef7354f70c3b674c4ecec8.png)](https://i.stack.imgur.com/CV5i6.gif)

* * *

## 回答 #1

> 赞同：180
> 
> 时间：2012-10-18T15:44:22.457

忽略示例图中点之间的平滑插值（这将需要进行一些手动插值，或者只是具有更高的数据分辨率），您可以使用[`pyplot.fill_between()`](https://matplotlib.org/3.1.3/api/_as_gen/matplotlib.pyplot.fill_between.html)：

```
from matplotlib import pyplot as plt
import numpy as np

x = np.linspace(0, 30, 30)
y = np.sin(x/6*np.pi)
error = np.random.normal(0.1, 0.02, size=y.shape)
y += np.random.normal(0, 0.1, size=y.shape)

plt.plot(x, y, 'k-')
plt.fill_between(x, y-error, y+error)
plt.show() 
```

![在此处输入图像描述](../Images/a323d390a9c603f9c8c19d487f27032e.png)

另请参阅[matplotlib 示例](http://matplotlib.org/examples/pylab_examples/fill_between_demo.html)。

* * *

## 回答 #2

> 赞同：150
> 
> 时间：2012-10-31T12:27:51.640

这[与 Evert 提供的答案基本相同](https://stackoverflow.com/a/12958534/17523)，但扩展到展示一些很酷的选项`fill_between`

![在此处输入图像描述](../Images/5b146e2321842e07f57a4304ab74c0ed.png)

```
from matplotlib import pyplot as pl
import numpy as np

pl.clf()
pl.hold(1)

x = np.linspace(0, 30, 100)
y = np.sin(x) * 0.5
pl.plot(x, y, '-k')

x = np.linspace(0, 30, 30)
y = np.sin(x/6*np.pi)
error = np.random.normal(0.1, 0.02, size=y.shape) +.1
y += np.random.normal(0, 0.1, size=y.shape)

pl.plot(x, y, 'k', color='#CC4F1B')
pl.fill_between(x, y-error, y+error,
    alpha=0.5, edgecolor='#CC4F1B', facecolor='#FF9848')

y = np.cos(x/6*np.pi)    
error = np.random.rand(len(y)) * 0.5
y += np.random.normal(0, 0.1, size=y.shape)
pl.plot(x, y, 'k', color='#1B2ACC')
pl.fill_between(x, y-error, y+error,
    alpha=0.2, edgecolor='#1B2ACC', facecolor='#089FFF',
    linewidth=4, linestyle='dashdot', antialiased=True)

y = np.cos(x/6*np.pi)  + np.sin(x/3*np.pi)  
error = np.random.rand(len(y)) * 0.5
y += np.random.normal(0, 0.1, size=y.shape)
pl.plot(x, y, 'k', color='#3F7F4C')
pl.fill_between(x, y-error, y+error,
    alpha=1, edgecolor='#3F7F4C', facecolor='#7EFF99',
    linewidth=0)

pl.show() 
```

# python - 设计模式：继续

> ID：12957586
> 
> 赞同：0
> 
> 时间：2012-10-18T14:55:19.113
> 
> 标签：python, design-patterns, refactoring

如果您将模式定义为一种巧妙的技巧，可以帮助您以一种优雅且可能更具可读性的方式解决编程问题[[1]](http://www.youtube.com/watch?v=Er5K_nR5lDQ&feature=plcp)。使用该`continue`语句的设计模式是什么（如果要避免深度嵌套的`if`语句）？

```
for item in items:
    if is_for_sale(item):
        cost=compute_cost(item)
        if cost<=wallet.money:
            buy(item)

for item in items:
    if not is_for_sale(item):
        continue
    cost = compute_cost(item)
    if cost > wallet.money:
        continue
    buy(item) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T15:07:54.380

这不是设计模式。但是当你有很多嵌套循环，并且不清楚那里发生了什么时，那就是代码异味。我建议在这里做的是两个重构 - [Extract Method](http://martinfowler.com/refactoring/catalog/extractMethod.html)和[Replace Nested Conditional With Guard](http://martinfowler.com/refactoring/catalog/replaceNestedConditionalWithGuardClauses.html)。

首先，提取项目处理以显示您在做什么：

```
for(item in items)
   try_to_buy(item) 
```

然后以新方法应用警卫：

```
def try_to_buy(item):
   if not is_for_sale(item):
       return

   if compute_cost(item) > wallet.money:
       return

   buy(item) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T14:59:35.467

这有点偏离主题，但如果您正在寻找简化代码的方法，您可以这样做：

```
items_for_sale = (item for item in items if is_for_sale(item))
for item in items_for_sale:
    if compute_cost(item) <= wallet.money:
        buy(item) 
```

就您最初的问题而言，我只会使用 a`continue`如果它可以防止缩进多行。如果您的 if 语句中只有一行，那么`continue`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T15:29:34.643

我不知道你为什么说`continue`没有大量使用，因为我至少在不满足条件时使用它来继续，而不是检查所有条件，这样代码是平坦的并且`Flat is better than nested.`

有时我使用异常来指示状态变化并从深度嵌套的内部循环或函数中出来，例如

```
class MyException(Exception): pass

for item in items:
   try:
       for user in item.users:
           check_user(user)
   except MyException:
       continue

def check_user(user):
    if user.bad:
        raise MyException("bad user") 
```

# active-directory - 在 dsquery 输出中添加逗号

> ID：12957589
> 
> 赞同：2
> 
> 时间：2012-10-18T14:55:22.377
> 
> 标签：active-directory, dsquery

所以我正在编写一个将由计划任务运行的批处理文件。该文件针对 AD 中用户的某些属性执行 DSQuery。

这是我的查询：

```
dsquery user ou=org_unit,dc=company,dc=local -name * -limit 0 | dsget user -dn -email -tel >a.txt 
```

所以我的问题是如何用逗号分隔输出？它在文本文件中以漂亮的列显示，但它会被其他东西解析出来以输入到数据库中，并且解析规则依赖于逗号。

我需要转这个：

```
CN=USER NAME,OU=ORG_UNIT,OU=ANOTHER_ORG_UNIT,DC=DOMAINROOT,DC=LOCAL (111)111-1111 email@email.com 
```

进入这个：

```
CN=USER NAME,OU=ORG_UNIT,OU=ANOTHER_ORG_UNIT,DC=DOMAINROOT,DC=LOCAL, (111)111-1111,  email@email.com 
```

那么如何编辑我的查询以使其输出我需要的内容，如图所示？还有什么我可以运行的可以为我做的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T15:57:48.773

没关系。想出一个 CSVDE 查询来运行它。

```
csvde -m -f test.txt -d "ou=org_unit,dc=domainroot,dc=local" -r objectCategory=Person -l mail,telephoneNumber 
```

以我需要的格式返回我需要的内容。

# objective-c - 观察者通知的 NSNotification 顺序

> ID：12957590
> 
> 赞同：22
> 
> 时间：2012-10-18T14:55:24.120
> 
> 标签：objective-c, ios, nsnotificationcenter

如果我有几个类观察一个特定的 NSNotification，那么在发布通知时，观察者的通知顺序是什么？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-18T15:34:24.800

无法保证发出什么订单通知。如果您需要排序，您可能希望创建一个类来侦听一个通知并发送多个有序通知，其他类可以改为侦听。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-18T15:41:41.397

订单未定义。Apple 管理一个观察者列表，每当发布通知时，它们都会遍历列表并通知每个注册的观察者。该列表可能是一个数组或字典或完全不同的东西（例如结构的链表），并且由于可以在运行时随时添加和删除观察者，因此列表也可能随时更改，因此即使您知道如何该列表目前已实施，您永远不能依赖任何特定的顺序。此外，任何 OS X 更新都可能导致列表内部结构发生变化，适用于 10.7 的内容可能不适用于 10.8 或 10.6。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-04T20:12:45.630

我已经对其进行了测试，看起来对象是按**addObserver**方法排序的

此测试的控制台输出是：

```
2016-04-04 22:04:02.627 notificationsTest[1910:763733] controller 8
2016-04-04 22:04:02.629 notificationsTest[1910:763733] controller 1
2016-04-04 22:04:02.629 notificationsTest[1910:763733] controller 2 
```

**AppDelegate.m**

```
#import "AppDelegate.h"

#import "ViewController.h"
#include <stdlib.h>

@interface AppDelegate ()

@property (strong, readwrite, nonatomic) NSTimer *timer;

@property (strong, readwrite, nonatomic) NSMutableArray *array;

@end

@implementation AppDelegate

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {

    self.array = [NSMutableArray array];

    ViewController *vc3 = [ViewController new]; vc3.index = 8;
    ViewController *vc1 = [ViewController new]; vc1.index = 1;
    ViewController *vc2 = [ViewController new]; vc2.index = 2;

    [self.array addObject:vc1];
    [self.array addObject:vc3];
    [self.array addObject:vc2];

    self.timer = [NSTimer scheduledTimerWithTimeInterval:2 target:self selector:@selector(sendNotification:) userInfo:nil repeats:YES];

    return YES;
}

- (void)sendNotification:(NSNotification *)notification {

    [[NSNotificationCenter defaultCenter] postNotificationName:kNotificationTitle1 object:nil];

}

@end 
```

**视图控制器.m**

```
#import "ViewController.h"

#import "AppDelegate.h"

@interface ViewController ()

@property (assign, readwrite, nonatomic) NSInteger index;

@end

@implementation ViewController

- (instancetype)init
{
    self = [super init];
    if (self) {

        [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(respondToNotification:) name:kNotificationTitle1 object:nil];

    }
    return self;
}

- (void)respondToNotification:(NSNotification *)notification {

    NSLog(@"controller %ld", self.index);

}

@end 
```

# python - Pandas：将具有重复行名的数据重塑为列

> ID：12957593
> 
> 赞同：4
> 
> 时间：2012-10-18T14:55:31.870
> 
> 标签：python, pandas

我有一个有点像这样的数据集（显示的第一行）：

```
Sample  Detector        Cq
P_1   106    23.53152
P_1   106    23.152458
P_1   106    23.685083
P_1   135        24.465698
P_1   135        23.86892
P_1   135        23.723469
P_1   17  22.524242
P_1   17  20.658733
P_1   17  21.146122 
```

“Sample”和“Detector”列都包含重复值（“Cq”是唯一的）：准确地说，每个“Detector”对于每个样本出现 3 次，因为它是数据中的重复。

我需要做的是：

*   重塑表格，使列包含样本和行检测器
*   重命名重复的列，以便我知道它是哪个副本

我认为这`DataFrame.pivot`可以解决问题，但由于重复数据而失败。最好的方法是什么？重命名重复项，然后重塑，还是有更好的选择？

编辑：我考虑了一下，我认为最好说明目的。我需要为每个“样本”存储其“检测器”的平均值和标准偏差。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T16:37:35.603

看起来您可能正在寻找的是分层索引数据框[[link]](http://pandas.pydata.org/pandas-docs/stable/indexing.html#hierarchical-indexing-multiindex)。

像这样的东西会起作用吗？

```
#build a sample dataframe
a=['P_1']*9
b=[106,106,106,135,135,135,17,17,17]
c = np.random.randint(1,100,9)
df = pandas.DataFrame(data=zip(a,b,c), columns=['sample','detector','cq'])

#add a repetition number column
df['rep_num']=[1,2,3]*( len(df)/3 )

#Convert to a multi-indexed DF
df_multi = df.set_index(['sample','detector','rep_num'])

#--------------Resulting Dataframe---------------------

                             cq
sample detector rep_num    
P_1    106      1        97
                2        83
                3        81
       135      1        46
                2        92
                3        89
       17       1        58
                2        26
                3        75 
```

# c# - 访问 COM 组件时出错

> ID：12957595
> 
> 赞同：30
> 
> 时间：2012-10-18T14:55:33.870
> 
> 标签：c#, com, ms-word, office-2007

我为 Microsoft Office Word 构建了一个加载项。当 Word 以管理员身份运行时使用加载项没有问题，但当它不以管理员身份运行时，访问功能区元素有两个常见异常。

第一个例外：

```
Unable to cast COM object of type 'System.__ComObject' to interface type 'Microsoft.Office.Core.IRibbonUI'. This operation failed because the QueryInterface call on the COM component for the interface with IID '{000C03A7-0000-0000-C000-000000000046}' failed due to the following error:  could not be found. (Exception from HRESULT: 0x80030002 (STG_E_FILENOTFOUND)).
   at Microsoft.Office.Core.IRibbonUI.InvalidateControl(String ControlID) 
```

当控件被以下代码无效时，会发生此错误：

```
ribbon.InvalidateControl("control-id"); 
```

第二个例外：

```
Unable to cast COM object of type 'Microsoft.Office.Interop.Word.ApplicationClass' to interface type 'Microsoft.Office.Interop.Word._Application'. This operation failed because the QueryInterface call on the COM component for the interface with IID '{00020970-0000-0000-C000-000000000046}' failed due to the following error:  could not be found. (Exception from HRESULT: 0x80030002 (STG_E_FILENOTFOUND)).
   at Microsoft.Office.Interop.Word.ApplicationClass.get_Selection() 
```

此错误发生在以下代码的最后一行：

```
object wdStory = Word.WdUnits.wdStory;
object wdMove = Word.WdMovementType.wdMove;
WrdApp.Selection.EndKey(ref wdStory, ref wdMove) 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-10-18T20:02:42.107

问题解决了！

我之前安装过Office 2010，所以Windows Registry有一些不一致的地方。要修复它们，请打开`regedit`并从错误中查找 CLSID。

对于第二个错误，您会发现类似的内容：

```
HKEY_CLASSES_ROOT\Interface\{00020970-0000-0000-C000-000000000046} 
```

使用子键：

*   ProxyStubClsid
*   ProxyStubClsid32
*   类型库

看看 里面的`(Default)`和`Version`值`TypeLib`。

现在找到下面的节点，使用`(Default)`值 as `<TypeLib ID>`。

`HKEY_CLASSES_ROOT\TypeLib\<TypeLib ID>\<version>`

作为此元素的子元素，您会发现多个元素，其中一个是`Version`第一个注册表的。如果你检查其他元素，你会发现它们没有指向任何东西。**删除其他！！！**解决了！

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-10-13T17:37:44.277

升级到最新的 Office 版本后，我开始遇到同样的异常。我尝试了一些建议的修复方法，包括以类似于@Victor 描述的方式清理注册表。

最终的帮助（即使它可能是多种因素的组合）是“修复”安装：

`Programs and Features`→ 最新`Office`版本 → `Repair`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-01-19T10:05:04.940

办公室维修为我工作。在我的情况下，我安装了 Project，我认为它更改了配置，并且无法调用将数据从 Excel 工作簿迁移到 SQL 的过程

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-08T00:53:01.523

@Victor 你让我走上了正确的道路。我的问题不是注册表中的多个值，而是 Office365 从未添加的缺失值。多亏了你，我才能找到自己的解决方案。一千多谢。

[任何仍在寻找解决方案的人都可以在这里找到详细信息。](https://stackoverflow.com/questions/35782002/solved-outlook-com-not-registered)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-20T05:14:47.410

我今天在使用 VS2015 和 Office 2013 时遇到了同样的问题。将平台目标更改为 x64 对我有用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-09-17T06:46:29.223

只需安装 Office 2010 / MS word / .NET 可编程性支持。

# javascript - 在javascript中将矩阵切成2个数组

> ID：12957596
> 
> 赞同：1
> 
> 时间：2012-10-18T14:55:39.747
> 
> 标签：javascript

我试图对矩阵进行切片，以便最终得到数组。所以给定以下矩阵 [[1,2],[3,4],[102,5]] 是否有办法对其进行切片，以便我最终得到 [1,3,102] 和 [2,4,5] ?
也许它不是一片，而是别的什么？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T15:00:28.887

尝试使用[该`Array.reduce(...)`方法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/Reduce)，因为函数式编程很酷！

```
function splitMatrix(matrix) {
  return matrix.reduce(function(acc, x) {
    acc[0].push(x[0]);
    acc[1].push(x[1]);
    return acc;
  }, [[],[]]);
}

splitMatrix([[1,2],[3,4],[102,5]]); // => [[1,3,102], [2,4,5]] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T15:00:29.020

```
var matrix = [[1,2],[3,4],[102,5]];
var arr1 = [];
var arr2 = [];

for(var i=0; i < matrix.length; i++){
    arr1.push(matrix[i][0];
    arr2.push(matrix[i][1];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T15:00:14.727

```
a = [[1,2],[3,4],[102,5]]
a1 = []
a2 = []
for(i = 0, i< a.length, i++){
    a1[i] = a[i][0]
    a2[i] = a[i][1]
} 
```

# html - 如何自动化 html5 ui 测试

> ID：12957597
> 
> 赞同：3
> 
> 时间：2012-10-18T14:55:45.253
> 
> 标签：html, ui-automation

我一直在使用 Xcode 的工具在我们团队一直在开发的 IOS 应用程序上运行 UI 自动化。我刚刚被要求开始对一些 HTML5 android 应用程序进行 UI 测试，并且一直在寻找实现这一目标的方法。我们的用户群将只能使用 Google chrome。我看过 Selenium，但这似乎是一个 Firefox 插件，并且不允许将 Firefox 加载到我们的开发 PC 上。我查看了其他各种替代方案，但得出的结论是，最好从使用它的人那里获得建议

任何人都可以提出一个等效于 Xcode 的解决方案，即：-

1.  记录通过应用程序的 UI 旅程
2.  识别屏幕上存在的图标、按钮字段等
3.  识别屏幕上图标、按钮等的位置
4.  返回每次运行的日志

# ios - 我怎么能播放不同的音频文件，因为它们只是一个文件？带着无声的片段

> ID：12957599
> 
> 赞同：0
> 
> 时间：2012-10-18T14:55:47.147
> 
> 标签：ios, core-audio, avaudioplayer

我想播放不同的音频文件，因为它们只是一个文件。例如，我有五个 mp3 文件：

*   10 秒的 audio1.mp3
*   30 秒的 audio2.mp3
*   10 秒的 audio3.mp3
*   20 秒的 audio4.mp3
*   30 秒的 audio5.mp3

然后我想按顺序播放 5 个文件，但在这些文件中间没有声音：

[音频 1，静音 100 秒，音频 2，静音 20 秒，音频 3，音频 4，静音 5 秒，音频 5]

我认为它可能发生的主要问题是处于沉默的“暂停”状态（因为我不想记录沉默）。

谢谢你。

# iphone - 我如何在 iphone 的 pjsip 中处理在线状态

> ID：12957602
> 
> 赞同：0
> 
> 时间：2012-10-18T14:55:52.860
> 
> 标签：iphone, pjsip

我们正在开发一个应用程序，我们使用 pjsip 提供 VOIP 功能。我们在注册过程和添加朋友方面做得很好。但是我们面临着一些关于朋友在线状态的问题。

我详细解释了我的问题..假设'user1'登录并且有一个朋友'user2'然后user2离线它是正确的（b'coz user2仍然没有登录）当user2登录并且有一个朋友user1然后user1在线它是正确的（b'coz user1 已登录）但 user2 未在线显示在 user1 的朋友中

任何人都可以解决我的问题，我在这里呆了三天。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T03:23:25.017

这是一个使用 PJSUA 应用程序的简单练习，它应该可以帮助您解决问题

1.  启动 PJSUA 应用程序（在默认端口上）。将此称为 pjsua-app1。
2.  在另一个端口上启动另一个 PJSUA 实例。将此称为 pjsua-app2。
3.  到 pjsua-app1 添加账户 user1@abcd:p，到 pjsua-app2 添加账户 user2@abcd:q
4.  到 pjsua-app1 添加好友 user2 并添加到 pjsua-app2 好友 user1
5.  在这两个应用程序上订阅存在。
6.  如果他们已登录，您应该可以在线看到他们

# python - 将 pygame 中的图像转换为 RGB 值的二维数组

> ID：12957603
> 
> 赞同：7
> 
> 时间：2012-10-18T14:55:55.837
> 
> 标签：python, pygame, rgb

如何将 pygame 中的表面对象转换为 RGB 值的二维数组（每个像素一个值）？我已阅读有关 PixelArrays 和 Surfarrays 的文档，但似乎找不到我的问题的答案。例子非常受欢迎。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-18T16:46:59.500

pygame[文档](http://www.pygame.org/docs/ref/pixelarray.html)说，给定一个表面对象，您可以创建一个包装器，通过调用模块的方法`PixelArray`来提供对其像素的直接 2D 数组访问：`PixelArray()`

```
pxarray = pygame.PixelArray(surface) 
```

*从逻辑上讲*，`PixelArray`对象是存储为整数的 RGB 值的二维数组。

> 可以`PixelArray`为像素项分配原始整数值、 `pygame.Color`实例（用于颜色表示的对象）或`(r, g, b[, a])`元组。
> 
> ```
> pxarray[x, y] = 0xFF00FF
> pxarray[x, y] = pygame.Color(255, 0, 255)
> pxarray[x, y] = (255, 0, 255) 
> ```

它还提到：

> 但是，只返回一个像素的整数值。因此，要将像素与特定颜色进行比较，首先需要使用为其创建对象的[`Surface.map_rgb()`](http://www.pygame.org/docs/ref/surface.html#pygame.Surface.map_rgb) 方法来映射颜色。`Surface``PixelArray`

这意味着您需要使用该`Surface.map_rgb()`方法从`PixelArray`整数值中获取 RGB 元组，只要您没有对数组进行赋值，即*读取*像素值时，就像在以下条件中所做的那样：

> `# Check, if the first pixel at the topleft corner is blue`
> `if pxarray[0, 0] == surface.map_rgb((0, 0, 255)):`
>     `...`

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-03-12T05:04:18.257

将 Surface 包装在[PixelArray](https://www.pygame.org/docs/ref/pixelarray.html)中后，[unmap_rgb](https://www.pygame.org/docs/ref/surface.html#pygame.Surface.unmap_rgb)函数可以将像素转换为[pygame.Color](https://www.pygame.org/docs/ref/color.html)对象。

例如：

```
import pygame
pygame.init()
image = pygame.image.load('example.png')
pixel = pygame.PixelArray(image)
center = int(image.get_width()/2), int(image.get_height()/2)
colour = image.unmap_rgb(pixel[center])
print(str(colour)) 
```

编辑：要将所有这些 pygame.Color 对象完全转换为 RGB 元组的二维数组，您可以使用以下代码：

```
import pygame
pygame.init()
image = pygame.image.load('example.png')
pixel = pygame.PixelArray(image)

color_array = [[image.unmap_rgb(pixel[x, y]) for x in range(0, image.get_width())] for y in range(0, image.get_height())]

rgb_array = [[(column.r, column.g, column.b) for column in row] for row in color_array]

print(str(rgb_array)) 
```

请注意，如果您要使用 map_rgb （如另一个答案中所建议的那样），您可能必须针对超过 1600 万个 map_rgb 调用测试每个像素（每个像素对应 256 * 256 * 256 个可能的 RGB 值）。如果您还想要 alpha 值，则将可能值再乘以 256。使用 map_rgb 的另一种策略可能是从 (256 ** n) 个可能值创建查找表，并根据表检查每个像素。虽然可以做到这一点，但这里提供的代码似乎更有效。

# command-line - 为特定分支创建 mercurial 日志

> ID：12957604
> 
> 赞同：32
> 
> 时间：2012-10-18T14:55:59.777
> 
> 标签：command-line, mercurial

是否可以仅针对单个分支与整个存储库进行更改。我们在不同的分支上进行并行开发，并且不希望日志中另一个构建的更改。

```
hg log -r %baseversion%:%releaseversion% --style changelog >> hglog.txt 
```

我尝试这样做，但它拉动了基本标记和发布标记之间的所有更改。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-10-18T15:00:09.013

如果您使用正确的 hg 分支，那么您应该能够使用 --only-branch 选项：

```
hg log --only-branch my_branch 
```

这将仅显示给定分支的变更集。

*编辑*：看起来“--only-branch”已被弃用，但根据您使用的 mercurial 版本，它仍然存在。请参阅[https://www.mercurial-scm.org/repo/hg/help/log](https://www.mercurial-scm.org/repo/hg/help/log)。如果您的 mercurial 太新，您可能只有“-b”/“--branch”选项。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2015-07-07T18:42:38.573

此外，要仅显示当前分支的日志，您可以使用点而不是当前分支名称`hg log --branch .`

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-10-18T18:51:17.877

跟进@criswell

有趣，`hg help log`对“--only-branch”选项一无所知，但请注意`-b|--branch BRANCHNAME` 另外，对于最坏的情况，revsets 中的 branch() 函数

# ios - iOS 崩溃日志，回溯不可用

> ID：12957605
> 
> 赞同：6
> 
> 时间：2012-10-18T14:56:02.163
> 
> 标签：ios, crash

## 概括

自从我们的应用程序的最后一次更新发布以来，许多用户开始抱怨应用程序不再启动。我们收到了来自 2 个不同用户的崩溃日志和控制台日志，以及崩溃的视频。

我们的应用程序不会在每台设备上崩溃，但是当它崩溃时，它会在点击图标的一秒钟内每次崩溃（视频显示了这一点以及朋友的电话）。

崩溃日志很奇怪，因为它不包含回溯，并且帧指针（R7）是 0x00000000。我们对这次更新没有太大的改变，我们所做的任何改变都不会像这样破坏堆栈。此外，重新安装该应用程序可以解决该问题。这使我们相信错误不在我们的代码中，而是在可能在某处损坏的二进制文件中。

## 细节

根据一些用户的说法，自上次更新以来，我们的应用程序在启动时崩溃。我们无法重现此问题，但收到了其中一位用户的崩溃日志。日志来自用户的硬盘驱动器（~/Library/Logs/CrashReporter/MobileDevice/）。我直接从遇到同样问题的朋友的电话中看到了同样的事情。

一旦我们的应用程序从 iOS 接收控制权，就会发生这种崩溃（请参阅更新）。但是，崩溃日志不包含回溯，并指出在未知线程上发生了错误。我尝试象征日志，但显然没有什么象征意义。

这似乎是某种空指针错误，但为什么没有回溯？什么可能导致这种类型的错误，我可以做些什么来重现/解决它？

```
Incident Identifier: 984C8208-F4B4-4325-90B3-C9BE371E1A12
CrashReporter Key:   c512972e5cd00e75d8d7a6ddb59ff9a08946fd7b
Hardware Model:      iPad3,3
Process:         MyApp [3224]
Path:            /var/mobile/Applications/A0AEAA1D-7E5D-4BDC-8C9F-EA5FF4595059/MyApp.app/MyApp
Identifier:      MyApp
Version:         ??? (???)
Code Type:       ARM (Native)
Parent Process:  launchd [1]

Date/Time:       2012-10-18 09:27:06.158 +0200
OS Version:      iOS 6.0 (10A403)
Report Version:  104

Exception Type:  EXC_BAD_ACCESS (SIGSEGV)
Exception Codes: KERN_INVALID_ADDRESS at 0x00000000
Highlighted Thread:  0

Backtrace not available

Unknown thread crashed with ARM Thread State (32-bit):
    r0: 0x000e64e0    r1: 0x7f8940c0      r2: 0x00000000      r3: 0x3c56cb88
    r4: 0x2fd1bd34    r5: 0x00000000      r6: 0x00000000      r7: 0x00000000
    r8: 0x2fd1bd3c    r9: 0x3c5688a8     r10: 0x00000000     r11: 0x00000000
    ip: 0x80000028    sp: 0x2fd1bd40      lr: 0x2fe9a8d7      pc: 0x000e64e0
  cpsr: 0x60000010

Binary Images:
   0xe5000 -   0x170fff +MyApp armv7  <15fd2c3131d03790bcd321411a241390> /var/mobile/Applications/A0AEAA1D-7E5D-4BDC-8C9F-EA5FF4595059/MyApp.app/MyApp
0x2fe96000 - 0x2feb6fff  dyld armv7  <75594988728831d98e1f7c4c7b7ca29d> /usr/lib/dyld
[...] 
```

## 更新

同一用户发送给我的视频表明应用程序在介绍动画开始*之前就崩溃了。*所以在应用程序实际运行之前（或我们的应用程序运行的第一行代码之一）。

在 ARMv6/7 架构中，R7 寄存器保存帧指针。它应该指向前一个堆栈帧，但在我们的例子中是 0x00000000。很多寄存器实际上是空的。什么可能导致这种情况？

此外，崩溃非常一致。*每次*点击图标后一秒钟内都会崩溃。至少对于这个特定的用户。我们收到了更多但不太具体的关于应用程序“未启动”的报告。重新安装应用程序可以解决用户遇到的任何问题。

控制台日志也没有显示太多，只是这样：

它开始听起来很像通过 App Store 更新会破坏二进制文件，但仅在更新时：

[http://www.pcworld.com/article/258827/updated_apps_crashing_heres_what_you_need_to_know.html](http://www.pcworld.com/article/258827/updated_apps_crashing_heres_what_you_need_to_know.html)

[http://www.marco.org/2012/07/04/app-store-corrupt-binaries](http://www.marco.org/2012/07/04/app-store-corrupt-binaries)

我已向 Apple 的技术服务部门发送请求以帮助解决此问题。我会在这里报告。

## 苹果技术服务更新

我发布了一个错误报告，他们要求提供崩溃时间的控制台日志。我已经为他们提供了一个，据我了解，它并没有太多用处。除了：

```
2012-10-23 09:14:18 +0000 backboardd Application 'UIKitApplication:com.company.myapp[0xdd31]' exited abnormally with signal 11: Segmentation fault: 11 
```

技术部门也不知道如何处理这个问题，但建议我们不要在没有任何代码更改的情况下上传新的二进制文件。没有办法测试问题是否消失（wtf），如果它不起作用，它会让用户更加不安。

仍在等待我的错误报告的答案...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T10:52:25.213

在联系 Apple 技术支持后，我们被要求提交一份描述此问题的错误报告。我们已经上传了这个版本的崩溃报告、控制台日志、来自 Xcode 的存档和来自 iTunes 的这个版本的 IPA 文件（App Store 文件）。

等待了大约一周后，我们今天收到了来自技术支持的以下电子邮件：

> 你好，
> 
> 我想让您知道，对于导致安装了您的应用更新的客户崩溃的问题，我们已经修复了该问题。
> 
> 安装更新后遇到崩溃的客户可以通过在 App Store 中再次更新应用来解决问题。这将安装应用程序的固定版本。
> 
> 您的应用程序的更新应该会出现在 App Store 中。更新将重新安装应用程序的当前版本，并修复与错误安装相关的任何崩溃。所有应用程序保存的数据都不会受到更新的影响。
> 
> 如果您没有看到您的应用程序的更新，或者在安装更新后仍然看到崩溃，请告诉我。
> 
> 如果您对因此问题而收到的任何评论有疑虑，请通过 [http://itunesconnect.apple.com/WebObjects/iTunesConnect.woa/wa/jumpTo?page=contactUs&contactfaq=customerreviewremovalrequest](http://itunesconnect.apple.com/WebObjects/iTunesConnect.woa/wa/jumpTo?page=contactUs&contactfaq=customerreviewremovalrequest)直接联系商店团队 和参考票号[我的号码]。

我们与安装了该应用程序崩溃版本的朋友进行了核实。他确认他下载了更新，这解决了问题。到目前为止，Apple 创建的更新*并未出现在 iTunes Connect 中，但它显然有效。*

我对 Apple 提供的服务感到满意。我猜事情偶尔会出错，即使是苹果之神也会出错。太糟糕了，我们的用户并不总是那么宽容（尽管大多数是）。似乎苹果甚至在没有询问的情况下为我们删除了所有 1 星评论。我们目前无法检查它，因为 AppFigures 目前因桑迪飓风而停机……

# c# - 是否可以检查缓存的正则表达式的数量？

> ID：12957612
> 
> 赞同：11
> 
> 时间：2012-10-18T14:56:19.427
> 
> 标签：c#, .net, regex

> Regex.CacheSize 属性 获取或设置已编译正则表达式的当前静态缓存中的最大条目数。
> 
> Regex 类维护在 >static 方法调用中使用的已编译正则表达式的内部缓存。如果在 set 操作中指定的值小于当前的 >cache 大小，则缓存条目将被丢弃，直到缓存大小等于指定的 >value。
> 
> 默认情况下，缓存包含 15 个已编译的静态正则表达式。您的应用程序通常不必修改缓存的大小。仅当您想要关闭缓存或拥有异常大的缓存时才使用 CacheSize 属性。

所以我想深入了解缓存中当前的表达式数量。任何人都知道这是否/如何可能？

想法是我现在重用 < 15 个，所以不想摆弄`CacheSize`，但希望能够在某个时候检查实际的缓存使用情况以记录是否达到最大值（随着正则表达式使用的扩展）或动态调整`CacheSize`。

`CacheSize`或者，对于简单地将增加到某个任意大的数字的开销有何评论？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-18T15:11:00.450

反编译（`mscorlib`4.0）显示缓存是 的`internal`链表`CachedCodeEntry`，因此您不会在没有反射的情况下得到它。

增加最大缓存大小的开销将是：

1.  存储缓存条目的内存成本；最大值的使用只是在`Regex`创建时这样的逻辑：

    *   一般来说，我们在缓存吗？
        *   如果是这样，缓存这个正则表达式
        *   我们现在是否超过了最大缓存大小？
            *   如果是这样，删除最后一个缓存条目

2\. 遍历缓存寻找匹配的成本增加

只要你的数字不荒谬，你应该可以提高它。

这是您检索当前缓存大小所需的反射代码：

```
 public static int RegexCacheSize()
    {
        var fi = typeof(Regex).GetField("livecode", BindingFlags.Static 
                                                  | BindingFlags.NonPublic);
        var coll = (ICollection)(fi.GetValue(null));

        return coll.Count;
    } 
```

我们使用强制转换`ICollection`来避免必须强制转换为内部类型的泛型列表的复杂性。

# c# - EXT JS - 保持网格过滤

> ID：12957614
> 
> 赞同：1
> 
> 时间：2012-10-18T14:56:25.027
> 
> 标签：c#, asp.net-mvc, extjs, extjs4.1

如何存储应用于 EXTJS 网格的过滤器？

假设我有一个带有网格的页面 A。我过滤网格，转到 B 页，然后下次我在 A 页时，我想应用相同的过滤器吗？

它在 MVC 应用程序上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T16:47:09.553

`grid.getStore().filters`会给你的混合过滤器集合应用于你的网格。将第一个或全部保存在某处，然后使用

```
store.filter(...) 
```

# angularjs - AngularJS 控制器和“使用严格”

> ID：12957625
> 
> 赞同：28
> 
> 时间：2012-10-18T14:56:49.193
> 
> 标签：angularjs, jshint, use-strict

我最近开始使用 JSHint，它要求我使用“use strict”的函数形式。从那时起，AngularJS 抛出一个错误：

“错误：参数 'webAddressController' 不是函数，未定义”

当我删除“使用严格”的功能形式时，控制器加载正常。

**控制器：**

```
(function () {
    "use strict";

    function webAddressController($scope, $rootScope, web_address_service) {
             // Do things
    }

}()); 
```

有人对这里发生的事情有任何见解吗？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-10-19T03:28:28.197

首先，我想说 pkozlowski 真的很了解他在 Angular 的工作，但这实际上并不是一个 Angular 问题，而是一个闭包问题。

Angular 在两个地方寻找控制器：

1.  在自己的通过 Module.controller() 注册的控制器注册表中
2.  在*全局*变量（或全局函数声明）中

问题是“use strict”闭包中的所有内容都不是全局的。它在包含它的匿名函数中被封装和私有化。

```
(function() {
   // nothing in here is global or even public.
   // "use strict" or not.

   "use strict"; // this is mostly irrelevant.

   // this will not work, because it's wrapped and not global
   function ThisDoesntWork($scope) {
   };

   // window is the global root variable. So this works.
   window.ThisWorks = function($scope) {

   };

   // this will work, because it's explicitly registering the controller
   // presuming app is your Module variable from outside of the closure.
   app.controller('ThisIsBest', function($scope) {

   });

})();

//this works because it's global.
function ThisAlsoWorks($scope) {

}

// if you declare a global var, then set it inside
// of your closure, you're good to go too.
var ThisWillWorkToo;

(function {
    //here we're setting it again.
    ThisWillWorkToo = function($scope) {
    };
})();

// if you're really crazy you can even do this...
 var ThisWillWorkButItsWeird = (function() {
      "use strict";

       function ThisWillWorkButItsWeird($scope) {

       }

       return ThisWillWorkButItsWeird;
  })(); 
```

归根结底，您可以将“use strict”放在任何函数中，或者如果您愿意，也可以放在文件级别。“使用严格”本身并没有为您破坏任何东西。如您所见，有上千种注册控制器的方法。最好的选择可能是按照建议使用 .controller 方法显式注册它们。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-10-18T17:42:00.280

我想 JSHint 在这里试图告诉你的是避免使用全局变量（这显然是一个非常好的做法！）。

AngularJS 对解决相同问题（即避免使用全局变量）的看法略有不同，并允许您在模块中定义控制器（使用全局`angular`命名空间）。您可以使用如下模块重写您的示例：

```
angular.module('myApp',[]).controller('webAddressController', function($scope) {
    // Do things
}); 
```

这是在实践中说明这一点的 jsFiddle：http: [//jsfiddle.net/t3vBE/1/](http://jsfiddle.net/t3vBE/1/)

使用这种方法，您不会使用控制器构造函数污染全局命名空间。

`angular`如果要使用严格模式，则需要更改 JSHint 配置以允许全局变量。或者，您也可以将整个代码（再次使用模块）包装到一个立即执行的函数中：

```
(function () {
    "use strict";

angular.module('myApp',[]).controller('webAddressController', function($scope) {

    $scope.name = 'World';
    // Do things
});

}());​ 
```

这是 jsFiddle：http: [//jsfiddle.net/t3vBE/4/](http://jsfiddle.net/t3vBE/4/)

对我来说，这只有在你想定义纯 JavaScript、“帮助”函数时才有意义，否则我会依赖 AngularJS 服务。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-08-01T21:30:32.707

如果您的角度模块已经在其他地方加载，另一种方法是 @pkzolowski 正在做的事情：

```
var app = angular.module('myApp');
app.controller(...);
app.service(...);
... 
```

它基于此处的评论： [angularjs为不同文件中的同一模块定义服务](https://stackoverflow.com/questions/23378175/angularjs-defining-services-for-the-same-module-in-different-files)

> 请注意，使用 angular.module('myModule', []) 将创建模块 myModule 并覆盖任何名为 myModule 的现有模块。使用 angular.module('myModule') 检索现有模块。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-05-12T15:23:41.287

你有没有试过在 (function()

```
"use strict"; // <-- add it here
(function () {
    //"use strict"; <-- remove from here

    function webAddressController($scope, $rootScope, web_address_service) {
         // Do things
    }

}()); 
```

我的回答是基于我看到的[Yeoman生成的文件](http://yeoman.io)

# c++ - c++对象的虚函数调用

> ID：12957628
> 
> 赞同：3
> 
> 时间：2012-10-18T14:56:52.673
> 
> 标签：c++, object, polymorphism

在 Bruce Eckel “Thinking in C++”的帮助下学习 C++。坚持练习 30。这里是：

> 如果对按值传递的对象的函数调用不是早期绑定的，则虚拟调用可能会访问不存在的部分。这可能吗？编写一些代码来强制进行虚拟调用，看看这是否会导致崩溃。要解释这种行为，请检查按值传递对象时会发生什么。

我可以理解为对象调用虚函数的结果，但是如果没有调用适当的构造函数，我无法理解如何强制编译器执行此操作。

有没有办法在不调用适当的构造函数或运算符（用于类型转换）的情况下将一个对象视为另一个对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T15:06:22.583

Bruce 试图说明*对象切片*，即多态对象按值传递的情况。

您可以这样做：

```
#include <iostream>
using namespace std;
struct hello {
    virtual void say() { cout << "hello" << endl; }
};
struct world : public hello {
    virtual void say() { cout << "world" << endl; }
};
void force(hello h) {
    h.say();
}
int main() {
    world w;
    w.say();
    force(w);
    return 0;
} 
```

此代码输出（[链接到 ideone](http://ideone.com/mD0DT)）

```
world
hello 
```

即使您希望类型的对象是`world`"say" `world`，而不是`hello`. C++ 编译器很聪明地注意到它`w`是按值传递`hello`的，因此它会调整 vtable 以避免调用派生类中的方法。

* * *

测试您是否了解通过引用传递的奖励练习：您可以修改我的代码以使其打印`world` `world`吗？您可以插入单个字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T14:59:35.493

尽管没有适当的运算符就无法将对象从一种类型转换为另一种类型，但您可以使用指针并使用 static_cast<> 或 dynamic_cast<> 或 reinterpret_cast<> 进行强制转换

# c# - Loading richtextbox content from xml

> ID：12957631
> 
> 赞同：1
> 
> 时间：2012-10-18T14:57:08.600
> 
> 标签：c#, .net, winforms

I have a RichTextBox where the user can format the text and save as an xml document. I save the RichtextBox.Rtf content in my xml document. When i try to load the saved data from xml. The RichTextBox doesn't format the text based on the Rtf content from XML.

Sample Code used for creating XML

```
XmlTextWriter objXmlWriter = new XmlTextWriter(path, null);
objXmlTextWriter.Formatting = Formatting.Indented;
objXmlTextWriter.WriteStartDocument();    
objXmlTextWriter.WriteStartElement("MyData");

RichTextBox tBox = (RichTextBox)sender;
objXmlWriter.WriteStartElement("RcText");
objXmlWriter.WriteString(tBox.Rtf);
objXmlWriter.WriteEndElement();

objXmlWriter.WriteEndDocument();
objXmlWriter.Flush();
objXmlWriter.Close(); 
```

Sample Code used for reloading the RichTextBox from XML

```
XmlDocument xDoc = new XmlDocument();
xDoc.Load(selPath);
XmlNodeList oDescendant = doc.SelectNodes("/MyData");
foreach (XmlNode xn in oDescendant)
{
    ID++;

    RichTextBox rcTxt = new RichTextBox();
    rcTxt.Name = "rtd" + ID;

    rcTxt.Rtf = xn["RcText"].InnerText;
} 
```

Sample content as seen after loading the content to richtext from XML.

```
{\rtf1\ansi\ansicpg1252\deff0\deflang1033{\fonttbl{\f0\fnil\fcharset0 Microsoft Sans Serif;}}
\viewkind4\uc1\pard\f0\fs17 Sample \b Text\b0\par
} 
```

I am not sure where I am wrong. Please give your suggestions.

I tried searching for some similar cases but was not helpful. Some of the links which i referred : [Code Project Link](http://www.codeproject.com/Articles/12932/Saving-and-Restoring-RichTextBox-Formatted-Text-Al)

# c# - Embedded Razor views are not found after Deployment (IIS)

> ID：12957632
> 
> 赞同：4
> 
> 时间：2012-10-18T14:57:14.553
> 
> 标签：c#, asp.net-mvc, iis, embedded-resource

I am currently working on a project which features a plugin-like system. Once the web project starts up it looks for plugin dlls and build up the GUI. The dlls contain embedded views, and embedded resources like pictures or javascripts.

*   I use RazorGenerator(VS Plugin) to generate the cs files from the views, The build action of the views is set to 'embedded resource' and the custom tool is set to 'RazorGenerator'

*   I use a custom Virtual Path Provider (a very similar to this [one](https://stackoverflow.com/questions/7746253/using-custom-virtualpathprovider-to-load-embedded-resource-partial-views))

*   I register my virtual path provider with this workaround i found on the net (it is a must since it is not working as intented if i dont use this):

    ```
     var assemblyResourceProvider = new AssemblyResourceProvider();
        var hostingEnvironmentInstance = (HostingEnvironment)typeof(HostingEnvironment).InvokeMember("_theHostingEnvironment", BindingFlags.NonPublic | BindingFlags.Static | BindingFlags.GetField, null, null, null);
        if (hostingEnvironmentInstance == null)
            return;

        var mi = typeof(HostingEnvironment).GetMethod("RegisterVirtualPathProviderInternal", BindingFlags.NonPublic | BindingFlags.Static);
        if (mi == null)
            return;

        mi.Invoke(hostingEnvironmentInstance, new object[] { assemblyResourceProvider }); 
    ```

*   I use this at my RouteConfig.cs to make the embedded script and picture files work:

    ```
     routes.IgnoreRoute("{*staticfile}", new { staticfile = @".*\.(css|js|gif|png|jpg|exe)(/.*)?" }); 
    ```

*   I add these lines (there are more) to my web.config to tell asp to use my path provider for my embedded sources:

    ```
     <add name="AspNetStaticFileHandler-PNG" path="*.png" verb="GET,HEAD" type="System.Web.StaticFileHandler"/> 
    ```

*   I use the Boc.Web.PrecompiledViews dll to register the path attributes generated by RazorGenerator

    ```
    BoC.Web.Mvc.PrecompiledViews.ApplicationPartRegistry.Register(assembly); 
    ```

Everything is working as intended in Visual Studio. The views and resources embedded in a dll are showing and working flawlessly. I also use IIS 7.5 to run my web app from Visual Studio. All of the possibilities work:

*   it works if i give the virtual path generated by Razor Generator (ex: "~/Views/ViewTest/Test)
*   it works if i give the Dll resources path which uses my resourceprovider (ex: "DllResources/ViewTest.dll/Views/ViewTest/Test.cshtml)

However, after i deploy my web app and run it using IIS 7.5, the Views(only the views!) are not showing! If i address the views with the virtual path (option 1), IIS gives this error message:

```
 The view 'Index' or its master was not found or no view engine supports the searched locations. The following locations were searched: 
```

if i address the views with the DllResources path (option 2), IIS gives this error message:

```
 The file '/Views/ViewTest/DllResources/EmbeddedResourceTest/Views/ViewTest/Test.cshtml' has not been pre-compiled, and cannot be requested. 
```

I dont know what to do now to make it work. I have tried to replace every single step with other solutions. The result is still the same. Flawlessly working in VS, but the views are not showing after deployment.

Is it some config for the IIS what is missing? am i missing something from the web.config? Please help me with this issue.

Thanks, Norbert

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T06:50:34.500

好的，经过 1 周的痛苦，我终于想出了解决方案。问题在于 Web 项目的发布。这是我所做的：

我一直在 Microsoft.Net 文件夹中使用 aspnet_compiler 发布我的 Web 应用程序。这是由成功的 Web 项目构建触发的构建后事件。我删除了这个事件，并将其替换为 Web 项目的 .csproj 文件中的“AfterBuild”脚本。[我在这个问题](https://stackoverflow.com/questions/2774955/visual-studio-publish-project-from-command-line)上找到了脚本。使用这种新的发布方法，嵌入式视图最终会显示出来。

希望这对将来的某人有所帮助。

问候，

# android - Android: Return to home screen

> ID：12957634
> 
> 赞同：2
> 
> 时间：2012-10-18T14:57:21.603
> 
> 标签：android, homescreen

I have the following scenario: -

App loads, an intitial password logon screen appears. Once the user is logged on, they are then taken to a second screen. If they hit the back button on the second screen, I use the following code to take them to the home page of the device: -

```
 Intent intent = new Intent(Intent.ACTION_MAIN);
        intent.addCategory(Intent.CATEGORY_HOME);
        startActivity(intent); 
```

The issue is that when I start the app again, it starts from this second screen. I want it to start from the logon screen again.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T15:00:09.830

`finish()`你的第二个活动就在回家之前。

```
 finish();
    Intent intent = new Intent(Intent.ACTION_MAIN);
    intent.addCategory(Intent.CATEGORY_HOME);
    startActivity(intent); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T15:22:02.610

为什么不直接调用`finish()`第二个活动？您不需要通过 callind 将用户重定向到主屏幕`startActivity()`。如果您的第一个（登录）活动启动了第二个活动并调用`finish()`了自己，那么您的活动堆栈中只有一个活动（第二个活动）。如果你调用`finish()`那个，你的活动堆栈中就没有任何东西了，你的应用程序就会结束。

不需要将用户重定向到主屏幕的额外代码。

# sql - Sql query to insert datetime in SQL Server

> ID：12957635
> 
> 赞同：163
> 
> 时间：2012-10-18T14:57:22.977
> 
> 标签：sql, sql-server-2008, datetime

I want to insert a `datetime` value into a table(SQL Server) using the sql query below

```
insert into table1(approvaldate)values(18-06-12 10:34:09 AM); 
```

But I get this Error msg. `Incorrect syntax near '10'.`

I tried it with the quotes

```
insert into table1(approvaldate)values('18-06-12 10:34:09 AM'); 
```

I get this error message `Cannot convert varchar to datetime`

Kindly help! Thanks.

* * *

## 回答 #1

> 赞同：275
> 
> 时间：2012-10-18T14:59:45.827

您将希望在 SQL Server 中使用 YYYYMMDD 来确定明确的日期。

```
insert into table1(approvaldate)values('20120618 10:34:09 AM'); 
```

如果您与`dd-mm-yy hh:mm:ss xm`格式结婚，则需要使用具有特定样式的 CONVERT。

```
insert into table1 (approvaldate)
       values (convert(datetime,'18-06-12 10:34:09 PM',5)); 
```

**`5`**这是意大利日期的风格。嗯，不仅仅是意大利人，这就是它在[Books Online](http://msdn.microsoft.com/en-us/library/ms187928.aspx)中所体现的文化。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2012-10-18T15:02:47.317

字符串文字的一个更加独立于语言的选择是国际标准[ISO 8601](http://en.wikipedia.org/wiki/ISO_8601)格式“YYYY-MM-DDThh:mm:ss”。我使用下面的 SQL 查询来测试格式，它确实适用于[sys.syslanguages](http://technet.microsoft.com/en-us/library/ms190303.aspx)中的所有 SQL 语言：

```
declare @sql nvarchar(4000)

declare @LangID smallint
declare @Alias sysname

declare @MaxLangID smallint
select @MaxLangID = max(langid) from sys.syslanguages

set @LangID = 0

while @LangID <= @MaxLangID
begin

    select @Alias = alias
    from sys.syslanguages
    where langid = @LangID

    if @Alias is not null
    begin

        begin try
            set @sql = N'declare @TestLang table (langdate datetime)
    set language ''' + @alias + N''';
    insert into @TestLang (langdate)
    values (''2012-06-18T10:34:09'')'
            print 'Testing ' + @Alias

            exec sp_executesql @sql
        end try
        begin catch
            print 'Error in language ' + @Alias
            print ERROR_MESSAGE()
        end catch
    end

    select @LangID = min(langid)
    from sys.syslanguages
    where langid > @LangID
end 
```

根据 Microsoft TechNet 中的[字符串文字日期和时间格式](http://technet.microsoft.com/en-us/library/ms180878%28v=sql.105%29.aspx#StringLiteralDateandTimeFormats)部分，标准 ANSI 标准 SQL 日期格式“YYYY-MM-DD hh:mm:ss”应该是“多语言”。但是，使用相同的查询，ANSI 格式并不适用于所有 SQL 语言。

例如，在丹麦语中，您会遇到许多如下错误：

> 丹麦语语言错误 将 varchar 数据类型转换为 datetime 数据类型导致值超出范围。

如果要在 C# 中构建查询以在 SQL Server 上运行，并且需要以 ISO 8601 格式传递日期，请使用[Sortable "s" 格式说明符](https://docs.microsoft.com/en-us/dotnet/standard/base-types/standard-date-and-time-format-strings)：

```
string.Format("select convert(datetime2, '{0:s}'", DateTime.Now); 
```

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2015-06-10T16:57:01.840

Management Studio 创建如下脚本：

```
insert table1 (foodate) values(CAST(N'2012-06-18 10:34:09.000' AS DateTime)) 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2013-10-24T06:12:58.087

你需要像这样添加它

```
insert into table1(date1) values('12-mar-2013'); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-02-28T17:45:52.243

无需使用转换。只需将其列为 ISO 8601 格式的引用日期即可。
像这样：

```
select * from table1 where somedate between '2000/01/01' and '2099/12/31' 
```

分隔符必须是 a`/`并且需要用单`'`引号括起来。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-09-28T09:02:13.943

如果您通过任何编程语言存储值

这是 C# 中的示例

要存储日期，您必须先转换它，然后再存储它

```
insert table1 (foodate)
   values (FooDate.ToString("MM/dd/yyyy")); 
```

FooDate 是日期时间变量，其中包含您格式中的日期。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-11-12T14:21:02.290

我遇到了一个更普遍的问题：获取不同的（不一定是已知的）日期时间格式并将它们插入到日期时间列中。我已经使用这个语句解决了它，它最终变成了一个标量函数（与 ODBC 规范、美国、ANSI 和英国\法国日期样式相关 - 可以扩展）：

```
insert into <tableName>(<dateTime column>) values(coalesce 
(TRY_CONVERT(datetime, <DateString, 121), TRY_CONVERT(datetime, <DateString>, 
101), TRY_CONVERT(datetime, <DateString>, 102), TRY_CONVERT(datetime, 
<DateString>, 103))) 
```

# php - how to query prolog source file using php

> ID：12957636
> 
> 赞同：0
> 
> 时间：2012-10-18T14:57:23.913
> 
> 标签：php, prolog, swi-prolog

i have a site made using PHP and backend mysql. There is a prolog file (.pro extension) which I would like to integrate with this site.

My prolog source file can be queried like this -

```
myprolog(Input, Output). 
```

So I give prolog Input, and it returns its result by binding it to Output.

I am expecting one of my php pages, says callprolog.php to query this prolog source file by passing the `Input`, and then store the result from `Ouput` into a php variable for further processing.

Implementations - PHP 5, MySQL, SWI Prolog.

Please let me know how to establish this connection betwen the php file and prolog source, pass/get data to/from prolog/php file.

Thank you!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T08:22:42.003

我已经完成了一些需要在 php 和 prolog(.pl) 文件之间建立连接的项目。我就是这样做的：我使用了这样的 php [exec](http://php.net/manual/en/function.exec.php)函数：

```
exec(prolog_path -f $your_file_name.pro  -g your_predicate/query_goes_here) 
```

上面这行代码的作用是定义你的 prolog bin 文件所在的位置，告诉 prolog 需要查阅的文件的名称，然后输入所需的查询。因此，在您的情况下，上面的代码行将如下所示：

```
exec("\"c:/program files/swipl/bin/swipl.exe\"" -f your_prolog_filename.pro -g myprolog(Input,Output)) 
```

您可能需要更改序言路径，但这就是我实现 php-prolog 连接的方式。请阅读我提供给您的链接中的 exec 函数是如何工作的。

# javascript - Backbone.Models: How to do deep toJSON serialization with embedded Collections?

> ID：12957639
> 
> 赞同：5
> 
> 时间：2012-10-18T14:57:33.523
> 
> 标签：javascript, backbone.js

I have a Backbone Model that contains a collection:

```
var Stream =  Backbone.Model.extend({
    defaults: {
        dummyField: "1",
        excludedUsers: new Backbone.Collection()
    }
});

var s = new Stream;
s.get('excludedUsers').add( {name:'Stefan'} );
console.log(s.toJSON()) 
```

yields:

```
{ dummyField: '1',
  excludedUsers: 
   { length: 1,
     models: [ [Object] ],
     _byId: {},
     _byCid: { c1: [Object] } } } 
```

instead of the "expected":

```
 { 
      dummyField: '1',
      excludedUsers: [ {name:'Stefan'} ]
 } 
```

because Backbone isn't deeply JSONing the Model. The only way of working around is to [override the toJSON method](https://stackoverflow.com/questions/11958747/backbone-js-overwritting-tojson) on the Stream's prototype but that won't help for other cases. Is there a general/better solution (besides the heavy [Backbone.Relational](https://github.com/PaulUithol/Backbone-relational) plugin) already?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T15:00:54.787

您可能希望`Backbone.Collection.toJSON()`直接覆盖该函数或创建一个新集合，将所有其他集合扩展到其中：

```
var MyDefaultCollection = Backbone.Collection.extend({
    toJSON: function() {
        //Your code here
    }
});
var Stream = Backbone.Model.extend({
    defaults: {
        dummyField: "1",
        excludedUsers: new MyDefaultCollection()
    }
});
//You could also extend it
var NewCollection = MyDefaultCollection.extend({
    //custom code here
}); 
```

这只是理论，我从未编写过代码，因此欢迎对我的想法提出任何反馈:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-11T12:07:14.920

```
function flattenModel(model) {
    return _.mapValues(model.attributes, flatten);
}

function flattenCollection(collection) {
    return collection.map(flattenModel);
}

function flatten(object) {
    if (object instanceof Backbone.Model) {
        return flattenModel(object);
    } else if (object instanceof Backbone.Collection) {
        return flattenCollection(object);
    }

    return object;
} 
```

这将返回一个对象，然后：

```
JSON.stringify(flatten(model)) 
```

请注意， _. [mapValues](https://lodash.com/docs#mapValues)是 lodash 提供的一个方便的方法，因此您应该使用该方法或仅​​移植该方法。

# java - 在android中设置重复警报

> ID：12957645
> 
> 赞同：5
> 
> 时间：2012-10-18T14:57:52.737
> 
> 标签：java, android, android-alarms

我正在尝试在 android 中设置一个重复警报，最终将在用户指定的时间响起。然而，一旦设置了闹钟，它就会立即响起，即使我确保在设置闹钟之前不会响起闹钟。例如，我将下面的代码设置为在 10:43 发出警报，所以我将警报设置为 10:41，但警报立即响起。有任何想法吗？提前致谢。

```
 public class Alarm extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {
        PowerManager pm = (PowerManager) context
                .getSystemService(Context.POWER_SERVICE);
        PowerManager.WakeLock wl = pm.newWakeLock(
                PowerManager.PARTIAL_WAKE_LOCK, "");
        wl.acquire();

        Toast.makeText(context, "Alarm !!!!!!!!!!", Toast.LENGTH_LONG).show(); // For

        Intent scheduledIntent = new Intent(context,ReminderMessage.class);
        scheduledIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        context.startActivity(scheduledIntent);
        // example

        wl.release();
    }

    public void SetAlarm(Context context) {
        AlarmManager am = (AlarmManager) context
                .getSystemService(Context.ALARM_SERVICE);

        Date dat = new Date();
        Calendar cal_alarm = Calendar.getInstance();
        Calendar cal_now = Calendar.getInstance();
        cal_now.setTime(dat);
        cal_alarm.setTime(dat);
        cal_alarm.set(Calendar.HOUR_OF_DAY, 10);
        cal_alarm.set(Calendar.MINUTE, 43);
        cal_alarm.set(Calendar.SECOND, 0);

        if(cal_alarm.before(cal_now)){
            cal_alarm.add(Calendar.DATE, 1);
        }

        Intent i = new Intent(context, Alarm.class);
        PendingIntent pi = PendingIntent.getBroadcast(context, 0, i, 0);
        am.setRepeating(AlarmManager.RTC_WAKEUP, System.currentTimeMillis(), cal_alarm.getTimeInMillis() , pi); // Millisec * Second * Minute
    }

    public void CancelAlarm(Context context) {
        Intent intent = new Intent(context, Alarm.class);
        PendingIntent sender = PendingIntent
                .getBroadcast(context, 0, intent, 0);
        AlarmManager alarmManager = (AlarmManager) context
                .getSystemService(Context.ALARM_SERVICE);
        alarmManager.cancel(sender);
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-18T15:10:40.980

我认为你的线路：

```
am.setRepeating(AlarmManager.RTC_WAKEUP, System.currentTimeMillis(), cal_alarm.getTimeInMillis() , pi); // Millisec * Second * Minute 
```

是立即触发警报，第二个参数是预定时间，第三个是周期。所以如果你想让你的闹钟在 cal_alarm 时间响起，你想使用类似的东西：

```
am.setRepeating(AlarmManager.RTC_WAKEUP, cal_alarm.getTimeInMillis(), 1000*60*5 , pi); // Millisec * Second * Minute 
```

这应该在 cal_alarm 时间响起，并每 5 分钟重复一次。

[AlarmManager.SetRepeating API 文档](http://developer.android.com/reference/android/app/AlarmManager.html#setRepeating%28int,%20long,%20long,%20android.app.PendingIntent%29)

# wicket - 如何使用 Wicket 6 在服务器端转发页面请求

> ID：12957648
> 
> 赞同：2
> 
> 时间：2012-10-18T14:58:00.503
> 
> 标签：wicket, forward

在某些情况下，我必须将一个 Wicket 页面的请求传递给**服务器端的**另一个 Wicket 页面，即在浏览器地址栏中**转发**维护 URL，但将页面参数传递给第二个页面。

在 Wicket 1.5 之前，我可以做

```
public MyPage(PageParameters params) {
    // some logic here to decide whether and where to forward
    setRedirect(false);
    setResponsePage(MyOtherPage.class, params);
} 
```

由于`setRedirect(boolean)`不再存在，有没有办法在以后的 Wicket 版本中实现服务器端转发？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T15:24:14.807

一位同事刚刚在这里找到了解决方案：http: [//mail-archives.apache.org/mod_mbox/wicket-users/201203.mbox/%3CCAMomwMr2fkO38E3d9RTk5TEmuf0Vx66F46F8eYs84Bb3bVtPgA@mail.gmail.com%3E](http://mail-archives.apache.org/mod_mbox/wicket-users/201203.mbox/%3CCAMomwMr2fkO38E3d9RTk5TEmuf0Vx66F46F8eYs84Bb3bVtPgA@mail.gmail.com%3E)

现在它是：

```
RequestCycle.get().scheduleRequestHandlerAfterCurrent(new RenderPageRequestHandler(new PageProvider(MyOtherPage.class, params), RenderPageRequestHandler.RedirectPolicy.NEVER_REDIRECT)); 
```

一段可怕的代码......看起来一点也不优雅，但有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-30T17:47:29.940

在 Wicket 6 上，您可以以更简单的方式重定向到另一个页面，`RestartResponseAtInterceptPageException`在页面代码中的任何位置抛出：

```
throw new RestartResponseAtInterceptPageException(WicketPage.class) 
```

它对我来说很好......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-06T21:01:46.880

您应该能够简单地执行以下操作：

```
throw new RestartResponseException(MyOtherPage.class, params); 
```

# iis-6 - 当应用程序关闭时，证书将从机器密钥集中删除

> ID：12957653
> 
> 赞同：0
> 
> 时间：2012-10-18T14:58:13.630
> 
> 标签：iis-6, keystore, x509certificate2

我正在尝试将证书部署到 windows-my 商店中，以便在 IIS6.0 中将其用于 SSL。当应用程序运行时，我在 SSLDiag 输出中看不到任何错误，并且一切正常，但是一旦我关闭应用程序 SSLDiag 就会显示错误：

```
#WARNING: You have a private key that corresponds to this certificate 
but CryptAcquireCertificatePrivateKey failed 
```

我检查了机器密钥集，并注意到在我关闭应用程序后，它会使用已创建的密钥删除文件。这是我检查的位置：

```
C:\Documents and Settings\All Users\Application Data\Microsoft\Crypto\RSA\MachineKeys 
```

如何在机器密钥集中保留创建密钥文件？

这是我正在使用的代码：

```
 using(var openFileDialog = new OpenFileDialog())
        {
            if (openFileDialog.ShowDialog() == DialogResult.OK)
            {
                var password = "password";
                var certificate = new X509Certificate2(openFileDialog.FileName, password, X509KeyStorageFlags.MachineKeySet | X509KeyStorageFlags.Exportable);
                var keystore = new X509Store(StoreName.My, StoreLocation.LocalMachine);
                keystore.Open(OpenFlags.MaxAllowed);
                keystore.Add(certificate);
                keystore.Close();
            }
        } 
```

我尝试了 X509KeyStorageFlags 的不同变体，但一旦我关闭应用程序，该文件仍会从机器键集中删除。为什么文件被删除，我该如何防止它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T15:48:28.790

我找到了解决方案：

```
certificate.PrivateKey.PersistKeyInCsp = true; 
```

这使私钥保留在机器密钥集中。我想当 X509Certificate2 对象释放其资源时，密钥已被删除。

# sql - 如何在 Oracle 中编写此查询？

> ID：12957660
> 
> 赞同：-1
> 
> 时间：2012-10-18T14:58:37.703
> 
> 标签：sql, oracle, join

我有两列（都是主要的）[PLAYER_ID] [LEAUGE_ID]

像这样的东西：

```
Player_id      League_id
2139            8
2153            8
2302            10
2441            8
2441            10  
2441            16 
```

我正在尝试找到只在 8 和 10 中打球的同一个球员，所以虽然 2441 打了 16，但我们需要忽略它。

根据上表，我试图只找到：

```
Player_id     League_id_1     League_id_2
2441          8               10 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T15:21:57.030

尝试

```
select t1.player_id, t1.league_id league_id_1, t2.league_id league_id_2
  from table1 t1
  join table1 t2 on t1.player_id = t2.player_id
 where t1.league_id = 8
   and t2.league_id = 10 
```

[这](http://www.sqlfiddle.com/#!4/cbbb0/3)是一个小提琴

# perl - LDAP 认证 CGI

> ID：12957662
> 
> 赞同：0
> 
> 时间：2012-10-18T14:58:41.753
> 
> 标签：perl, unix, tomcat, ldap, cgi

我有一个简单的网页部署到 tomcat，它根据用户选择运行某些 shell 脚本。这些页面是用 html 和 cgi/perl 编写的。

我们已经有一个工作的 ldap 服务器和目录。我需要能够为我创建的网页添加安全性，以便在尝试访问主页或任何子页面时要求用户使用他们的 ldap 帐户登录。

如何将 ldap 身份验证添加到我的网页？

请非常具体，因为我对所有这些都是新手。包括代码的分步说明将不胜感激。谢谢你

我在google上做了很多研究，但是所有的解决方案都是通用的，我不知道从哪里开始。

这是一篇很好的文章，但我不确定我应该将我与 ldap 的连接和绑定（我的哪些页面）放在哪里？如何确保身份验证也适用于子页面或将来创建的任何其他页面？

[http://www.perlmonks.org/?node_id=32196](http://www.perlmonks.org/?node_id=32196)

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T14:50:32.867

> 这是一篇很好的文章，但我不确定我应该将我与 ldap 的连接和绑定（我的哪些页面）放在哪里？如何确保身份验证也适用于子页面或将来创建的任何其他页面？

您现在正在向您的应用程序添加状态。您最初可能会考虑在 tomcat 中实现您的身份验证 (authn) 和授权 (authz)，而不是在您的应用程序中。

如果您决定不在 tomcat 中实现，而选择在 perl 中实现，那么您刚刚决定为您的应用程序添加状态，这意味着您需要添加某种会话处理。看看 CGI::Session，CPAN 上还有很多其他的会话处理模块。避免使用 Apache::Session。如果事务运行时间长，它的锁处理可能会导致很多痛苦。在 cookie 中使用会话密钥。通过 SSL 发送所有内容。如果您不使用 SSL，那么破解者可以拦截您的会话密钥，然后劫持会话。

设置好会话基础结构后，您需要创建登录机制，通常是带有用户名和密码的表单。当提交该表单时，其背后的 CGI 会对密码进行魔术加密，然后执行 LDAP 舞蹈：

1.  连接到目录服务器是没有连接已经存在。

2a. 匿名或作为应用用户绑定到服务器，通过CN搜索用户，使用DN和密码绑定为用户

或者

2b。从用户名计算 DN，与 DN 和加密的密码绑定。

通常，第 3 步是检查用户记录中的某些授权指示符，它可能是是/否访问指示符，或者它可能是角色或权限列表。

如果用户成功通过身份验证和授权，则将一些授权信息写入用户的会话。

然后，您的应用程序的每个后续页面都将检查用户是否已登录和/或是否具有使用该页面的适当授权。如果未经授权，您可以将他们发送回登录后登录页面，如果他们未登录，则可以将其发送回登录页面。

Basically, you just replacing the usual "query the user table of the database" with a query to an LDAP to a directory server.

# spotify - Can I view the manifest version of my spotify app in the Spotify player?

> ID：12957664
> 
> 赞同：1
> 
> 时间：2012-10-18T14:58:42.187
> 
> 标签：spotify

I'm trying to determine if an update to my Spotify application has gone live after submission.

Is there a way to inspect this value via the Spotify player? If not, how can I user the API to programmatically access this information so it can be displayed through my app?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T14:39:24.243

最新版本的 Spotify 播放器（今天刚刚上线）现在将此信息放在“开发”菜单的顶部。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T08:52:00.237

在包管理器（开发人员 -> 显示包管理器）中，您可以查看可用的应用程序并查看它的版本号。还有一个“清单”选项，但至少在我的 Spotify 版本中它什么也没显示。但是我想看到版本号对你来说就足够了。

# c++ - 在 matlab mex 代码中抑制 mexPrintf

> ID：12957673
> 
> 赞同：0
> 
> 时间：2012-10-18T14:59:07.773
> 
> 标签：c++, matlab, io, printf, mex

我有从我的 matlab 脚本调用的 mex 代码。为了调试代码，我放了很多 mexPrintf 语句，但出于计时目的，现在我不希望在 mex 代码调用中发生任何 I/O（因为 I/O 需要很多时间）。在我的代码中抑制 mexPrintf 调用的最简单和最好的方法是什么，以便根本不执行这些语句，而不必删除/注释掉这些语句？（我不想删除/注释掉这些语句并重新编译我的 mex 代码，因为我以后可能需要这些调试语句，而且我不想继续一遍又一遍地修改和构建我的代码） .

是否有任何编译器开关可以解决问题？或一些预处理器语句？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T15:10:35.923

你不能`mexPrintf`关闭。您需要修改您的代码。定义例如`DEBUG`标志来决定，什么时候要打印，什么时候不打印。例如，具有正常`printf`功能

```
#include <stdio.h>
#include <stdlib.h>

//#define DEBUG
#ifdef DEBUG
#define MPRINT(...) printf(__VA_ARGS__);
#else
#define MPRINT(...)
#endif

int main()
{
  MPRINT("%d\n", 5);
} 
```

如果您现在运行它，则不会打印任何内容。但是，如果您取消注释该`#define DEBUG`语句，则会打印 5。

或者，您可以`mexPrintf`在此类子句中包含所有调用：

```
#ifdef DEBUG
mexPrintf(...);
#endif 
```

`DEBUG`同样，如果未定义，则不会打印任何内容。但这是更多的工作。

`if`您也可以通过使用普通语句并将参数传递给mex 文件来执行类似的操作，而无需重新编译`verbose`mex 文件。`if`但是，如果您过于频繁地执行该语句，这仍然会对性能产生一些影响。所以去争取`DEBUG`更多 - 这是做这件事的标准方法。

# java - 体验 Vaadin touchkit

> ID：12957676
> 
> 赞同：8
> 
> 时间：2012-10-18T14:59:16.977
> 
> 标签：java, android, iphone, vaadin, vaadin-touchkit

我即将开始一个新的移动应用程序项目，我在 iOS 或 Android 开发方面没有太多经验，但我在不同场合使用 Vaadin 进行演示层。该应用程序对于移动客户端很可能是轻量级的，但对于后端服务器（jboss）来说更重。我觉得有点失落，所以我问你。

**问题：**与其他框架/从头开始构建相比，使用 Vaadin touchkit 有哪些缺点？哪里可能出现问题？欢迎任何意见和建议！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-20T13:27:51.517

我目前正在使用 Vaadin TouchKit 开发一个小型应用程序，一旦它投入生产，将拥有数百名用户。我无法在生产中找到任何使用 Vaadin Touchkit 实现的公开可用的应用程序，因此我将在此处列出的内容仅基于我个人对该技术的经验。

**与原生应用程序相比的缺点：**

*我假设这就是您所说的“从头开始构建”。*

由于这是网络技术，您的应用程序性能将始终与用户 Internet 连接的质量密切相关。如果您必须渲染包含大量组件和细节的大型 UI，它会比在本机应用程序中执行此操作要慢。如果用户连接不好，速度会慢很多。或者，如果连接不可用，那么您的应用程序几乎会变得不可用。有一种方法可以使用 HTML5-cache 在 Vaadin Touchkit 应用程序中提供离线模式，但它对于存储大型数据集并不是很有用，因为缓存比 Android SQLite 数据库有更多的限制。对于简单的 UI 内容，它可能是可行的，但在我看来，存储数据以供离线访问几乎是不可能的。

除了上述几点之外，我没有遇到任何缺失的功能，因为您可以随时在服务器端使用任何 Java 库，并且您的应用程序将在 servlet 容器中安全运行。

**与原生应用程序相比的优势：**

*你没有特别要求好处，但我想这是任何意见和建议。*

您的 Vaadin Touchkit 应用程序基本上可以在 2010 年之后推出的任何中高端移动设备上运行，基本上只排除了 Windows Phone OS 的设备，因为 Internet Explorer 不使用 WebKit 进行渲染，据我所知其他浏览器不可用。由于这是一个 Web 应用程序，它不排除 Internet Explorer 以外的任何其他桌面浏览器。通过创建一个应用程序，您可以支持大约 80-95% 的用户。

如前所述，您的应用程序可以使用托管环境支持的任何 Java 库、任何内部 API、任何身份验证方法，这对于本机移动应用程序来说并不容易实现。这可以通过出色的软件工程来克服，但需要大量的开发人员资源，更不用说您仍然坚持为每个平台单独做这件事。

当然，与维护原生应用程序相比，servlet 应用程序的维护要简单得多：部署一次，所有用户无需执行任何操作即可获得更改。没有应用商店，没有版本控制，没有麻烦。

**Vaadin TouchKit 与其他 Web 开发相比：**

我完全不熟悉不使用 Vaadin 的 Web 应用程序开发，所以我不会告诉你与其他现代 Web 应用程序技术和框架相比，它是否是一种可行的方法。我要说的是，根据我的经验，如果您通常熟悉 Java 开发和桌面应用程序开发，Vaadin 可以让创建 UI 和后端功能变得更容易和更容易掌握。

* * *

总而言之，不要急于使用 Vaadin TouchKit 创建您的任务关键型应用程序，至少要使用它进行原型设计，并了解它的性能和限制。对于某些类型的应用程序，它可能是最好的解决方案之一。对于某个比另一个更大的群体来说，这可能是最糟糕的群体之一。它不是一个非常成熟或普遍采用的框架，但它很有用。我很高兴听到更多关于您计划的应用程序类型的信息，并帮助您确定是否有任何使用 Vaadin TouchKit 的热门话题。

PS 你可能已经遇到过这个问题，但是这个文档打开了其中一个 TouchKit 演示应用程序的内容：

[http://demo.vaadin.com/vornitologist/VAADIN/tutorial/touchkit-tutorial.html](http://demo.vaadin.com/vornitologist/VAADIN/tutorial/touchkit-tutorial.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T18:01:17.027

我刚刚在我的 android 手机上试用了 vaadin touchkit 示例，现在我明白了为什么在某些情况下我更喜欢原生软件而不是 html。试试看 - 不要被好看的样式所迷惑，尝试使用它，这就是应用程序的用途。就我而言，我无法承受非响应式 GUI 或不平滑滚动列表。同样，对于一个简单的画廊 - JavaScript/HTML 解决方案是完美的 :) 所以正确的方式是混合方式！（恕我直言）

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-12-14T14:32:14.207

Vaadin Touchkit 提供了非常好的用户体验，并为应用程序提供了广泛的 UI 组件。它的默认 iOS 主题几乎提供了类似 iOS 的 UI，它还提供了许多其他主题。
但这不会像特定平台的移动应用程序那样流畅。因为最终它不会完全利用移动平台功能的真正力量，因为它最终将在移动网络浏览器中运行。与原生移动应用程序相比

查找有关 vaadin touchkit 的更多详细信息，并与 ZK Mobile 和本机平台特定应用程序等类似技术进行比较。：http: [//jtechnoprojects.blogspot.in/2012/12/vaadin-touchkit-vs-zk-mobile-vs.html](http://jtechnoprojects.blogspot.in/2012/12/vaadin-touchkit-vs-zk-mobile-vs.html)

# javascript - Adding different json_data.ajax.success handlers for different node types in Jstree

> ID：12957677
> 
> 赞同：0
> 
> 时间：2012-10-18T14:59:17.230
> 
> 标签：javascript, ajax, jquery, jstree

I want to represent a tree-structure using [Jstree](http://www.jstree.com). I am facing the problem that the server does not returns the data in a jstree-compliant format - it's just ordinary Json.

One solution that I implemented is to use the [`json_data.ajax.success`](http://www.jstree.com/documentation/json_data) callback to modify the data in order to bring it to the required format. However, this function does not get context information - therefore, I don't know what node is being loaded and don't know how I have to transform the received data.

I have seen that there is a [`types`](http://www.jstree.com/documentation/types) plugin that allows different behaviour between nodes - for example, displaying a corresponding icon. Is it possible to use this plugin to add different ajax-success-handlers for each node type? If not, what other solutions are there?

```
$("#tree").jstree({
    "plugins": ["json_data", "themes", "types"],
    "json_data": {
        "ajax": {
            "url": function (n) {   // want to make this type-dependent.
                if (n === -1) {
                    return "...";
                } else if ( ... ) {
                    return "...";
                }
            },
            "success": function (data) {    // want to make this type-dependent
                var result = [];
                $.each(data, function (index, value) {
                    "data": "......",
                    "attr": {
                        "id": ".................",
                        "rel":  "..............."
                    }
                });
                return result;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T21:18:38.507

You can create json data for jsTree on a server site and then process it one more time on the server to add whatever attributes for jsTree and then you can use types plugin.

# ruby - Guardfile 中 m[1] 的意义是什么？

> ID：12957681
> 
> 赞同：0
> 
> 时间：2012-10-18T14:59:24.067
> 
> 标签：ruby, tdd, guard

从[Guardfile 示例](https://github.com/guard/guard/wiki/Guardfile-examples)：

```
watch(%r{^app/(.+)\.rb})    { |m| "spec/#{m[1]}_spec.rb" }
watch(%r{^lib/(.+)\.rb})    { |m| "spec/lib/#{m[1]}_spec.rb" } 
```

的值`m`代表什么？好像是一个长度为2的数组，存放完整路径和相对路径...

是如何`m`产生的？它来自 Guard 还是 Ruby？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T15:09:24.793

`m[1]`将是正则表达式匹配中的第一个捕获组。从正则表达式中，这是文件的名称（不带扩展名。）

这实际上在自述文件中进行了解释：

```
guard :rspec do
  watch(%r{^lib/(.+)\.rb$})     { |m| "spec/lib/#{m[1]}_spec.rb" }
end 
```

> 在此示例中，正则表达式捕获组 (.+) 用于将 lib 文件夹中的文件更改转换为 spec 文件夹中的测试用例。正则表达式监视模式与 Regexp#match 匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T15:07:06.843

m 是来自正则表达式的匹配项。有关详细信息，请参阅[http://www.ruby-doc.org/core-1.9.3/Regexp.html#method-i-match](http://www.ruby-doc.org/core-1.9.3/Regexp.html#method-i-match) 。

基本上 m[1] 用于获取匹配的文件的名称，以运行相应的规范。

# vba - Microsoft Excel 宏的 VBA 编程

> ID：12957683
> 
> 赞同：1
> 
> 时间：2012-10-18T14:59:34.173
> 
> 标签：vba, excel

通过 Visual Basic 编辑器实现宏时，出现错误“编译错误：过程太长”............我想知道为什么宏的大小有限制，有什么办法吗增加允许的大小。我的宏非常大（基于大约 150 种不同的情况），由于这个错误，我将不得不将任务分配给大约 8 个宏。反正周围有吗？

将感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T16:49:46.823

您可以推测限制子例程的文本大小的逻辑 - 也许他们认为没有必要让 subs 太长 - 也许他们这样做会获得一些轻微的性能提升 - 也许这只是一个有目的的限制以防止人们从录制可笑的长宏。但无论如何，从脚本/编程的角度来看，无论如何最好不要有可怕的潜艇。并且使用循环，您不需要在其中包含那么多文本的子。所以我的假设是，当使用循环会更好、更有效时，他们希望阻止人们依赖录制的宏。但这只是一个假设。祝你好运。

# java - 使用存储在会话中的用户 ID 进行身份验证 - 安全风险/不良做法？

> ID：12957686
> 
> 赞同：0
> 
> 时间：2012-10-18T14:59:35.873
> 
> 标签：java, security, glassfish, jersey

我正在为非关键数据开发一个小型 REST 网络服务，主要由智能手机应用程序访问。为了限制用户对其个人数据的访问（授权不需要组或角色），我需要实现某种基本身份验证。

由于服务将通过 HTTP 访问，因此使用 HTTP-Authentification 似乎不是一个好主意，因为用户名和密码将在每个请求中以明文形式发送，并且需要存储在客户端设备上。

因此，我的想法是通过以下方式实现身份验证：

1.  用户使用我的网络服务的登录方法通过他们的用户名/密码登录
2.  此方法检查用户名/密码组合的有效性（基于包含加盐和散列密码的数据库）
3.  如果登录成功，则将用户的id（数据库表的主键）作为属性存储在会话中
4.  在以下请求中，此属性用于对用户进行身份验证

在代码中，我的登录方法如下所示：

```
User user = this.authentificate(username, password);
HttpSession session = request.getSession(true);
if (user != null)
   session.setAttribute("UserId", user.getId());
else
   session.invalidate(); 
```

之后，我将能够根据会话对用户进行身份验证：

```
int userId = (int) request.getSession().getAttribute("UserId");
User currentUser = getUserById(userId); 
```

这种方法是否可以被视为“安全”（不可能进行简单的会话劫持 - 据我了解[https://stackoverflow.com/a/5838191/232175](https://stackoverflow.com/a/5838191/232175)，属性值不会离开服务器）？
有什么缺点或替代方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T15:30:20.383

关于在会话中存储用户标识，我认为可以，但是您还有另一个问题。

首先，我假设登录方法将通过 HTTPS，否则用户名和密码将以明文形式发送到登录方法，而您又回到了之前遇到的相同问题。

其次，如果登录方法是通过 HTTPS，那么会话 cookie 将是一个 HTTPS cookie，并且所有其他 API 调用也需要通过 HTTPS。如果后续调用是通过 HTTP 进行的，他们将获得一个新的会话 cookie，并且用户 ID 在该会话中将不可用。

如果您真的想要没有 HTTPS 的安全身份验证，则需要使用共享秘密签名方案（例如 HMAC）或 RSA 等非对称签名系统来让客户端签署请求，然后在服务器端验证这些签名请求。

# c# - 在 Unity 中获取截获对象的原始类型

> ID：12957688
> 
> 赞同：1
> 
> 时间：2012-10-18T14:59:40.153
> 
> 标签：c#, .net, unity-container

如何获取被 Unity 的 VirtualMethodInterceptor 拦截的代理对象的“原始”类型？我有类似的东西：

```
T obj = (T)Intercept.NewInstance(typeof(T), new VirtualMethodInterceptor(), new[] { new MyInterceptor() }); 
```

那么当我询问它的类型时，`obj`它将类似于`DynamicModule.ns.Wrapped_TheRealType_7615f35579e1442192a7aaf806733b7b`

如何`TheRealType`通过代码获取 's Type？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T15:23:24.953

您可以降低生成类型的继承层次结构，直到找到正确的类型。

```
Type original = target.GetType();
while (original.Name.StartsWith("Wrapped_"))
{
  original = original.BaseType;
} 
```

不漂亮，但它应该可以解决问题。

# asp.net - 使用asp.net根据用户角色显示/隐藏css菜单项

> ID：12957689
> 
> 赞同：1
> 
> 时间：2012-10-18T14:59:41.407
> 
> 标签：asp.net, css

我有 css 布局：一列固定宽度布局，来自[maxdesign.com](http://www.maxdesign.com.au/articles/css-layouts/)

我有两个定义如下的菜单项：

```
<div id="navigation">
        <ul>
            <li><a href="#">Data Entry</a></li>
            <li><a href="#">Reports</a></li>
        </ul>
    </div> 
```

现在，假设我有两个角色：`guest`和`operator`，并且我希望例如，如果具有角色的用户`guest`已登录，则仅`Report`显示菜单中的项目，如果用户`operator`已登录，则显示两个选项.

我怎样才能做到这一点？

**编辑：**

根据您的回复，我将使用服务器端逻辑来处理此问题：

```
<div id="navigation">
        <ul>
            <li><asp:LinkButton ID="lkbDataEntry" runat="server">Data Entry</asp:LinkButton></li>
            <li><asp:LinkButton ID="lkbReports" runat="server">Reports</asp:LinkButton></li>                
        </ul>
    </div> 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T15:07:19.937

您可以为菜单元素提供一个 ID 属性，然后在代码隐藏中使用[RegisterClientSideScriptBlock](http://msdn.microsoft.com/en-us/library/bahh2fef.aspx)或使用[Response.Write](http://msdn.microsoft.com/en-us/library/ms525585%28v=vs.90%29.aspx)将 JavaScript 发送到客户端以根据某些条件隐藏（或显示）元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T15:10:15.830

你可以把它放在 Page_Load..

```
 Dim cs As ClientScriptManager = Page.ClientScript

    If Not cs.IsClientScriptBlockRegistered(Me.GetType(), "RoleVariable") Then
        Dim js As New String
        js = "var _role = " & role & ";"
        cs.RegisterStartupScript(Me.GetType(), "RoleVariable", js, True)
    End If 
```

从那里，您将拥有 Javascript 领域中的角色，您可以在其中操纵所需项目的可见性。

所以...

```
<script type="text/javascript">
    function hideStuff() {
        if (_role === "operator") {
            // hide/show your elements here
        }
        else if (_role === "guest") {
            // hide/show your elements here
        }
    }
</script> 
```

*请记住，这种方法都是客户端的，因此如果他们真的*想的话，其他开发人员很容易操作。但另一方面，它是最简单的。不要在高度安全的情况下使用这种方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T15:14:46.783

像这样简单的东西怎么样？

```
<% if(Page.User.IsInRole("operator") || Page.User.IsInRole("guest")) { %>
<div id="navigation">
        <ul>
            <% if(Page.User.IsInRole("operator")) { %>
            <li><a href="#">Data Entry</a></li>
            <% } %>
            <li><a href="#">Reports</a></li>
        </ul>
    </div>
<% } %> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T15:08:25.300

我不是 100% 认为您可以（或应该）使用样式表进行逻辑操作。您可能需要一些 javascript，然后根据来宾或操作员决定显示哪种样式

# java - Java中printf/format的变量/参数化宽度（使用*或其他东西？）

> ID：12957692
> 
> 赞同：1
> 
> 时间：2012-10-18T14:59:49.913
> 
> 标签：java, printf, string-formatting

> **可能重复：**
> [Java printf 使用可变字段大小？](https://stackoverflow.com/questions/2550123/java-printf-using-variable-field-size)

我有一段时间没有使用 Java，所以我正在寻找一种在格式化/打印输出时在/中指定*可变*宽度的方法。我的示例显示了整数的使用，但我当然希望它也适用于其他类型。`format``printf`

例如，类似的东西

```
int val = 8;
int wid = 5;

System.out.printf("%"*d\n", wid, val); 
```

我可以使用这种变通方法，这很丑陋：

```
System.out.printf("%"+wid+"d\n", val); 
```

变量字段宽度说明符是否`*`已从 Java 中删除？这个 old'ish [page](http://www.sharkysoft.com/archive/printf/docs/javadocs/lava/clib/stdio/doc-files/specification.htm)，第 1.3.1 节，显示了使用（就像它会在 C 中使用一样），但我无法让它工作，导致：

```
java.util.UnknownFormatConversionException: Conversion = '*' 
```

我也找不到更多最近的参考资料，这确实有效。

除了我上面的解决方法之外，还有更简单的方法吗？

在发布之前我确实环顾四周，遇到了这个大约 2 岁的 SO 问题[Java printf using variable field size?](https://stackoverflow.com/questions/2550123/java-printf-using-variable-field-size) 但这是最后的决定吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T16:04:02.780

格式说明符的一般语法是

> %[参数][标志][宽度][.precision][长度]类型

除了 printf，您还可以使用

> String.format("%"+wid+"d",val);

是的，如果您使用 Java 格式化程序，这些是唯一的方法。

# version-control - 是否有可以很好地处理大型二进制文件的分布式版本控制系统？

> ID：12957700
> 
> 赞同：2
> 
> 时间：2012-10-18T15:00:11.600
> 
> 标签：version-control, dvcs, binaryfiles

几个月前，我们从 Subversion 切换到了 Git（主要是因为 Git 速度更快、分支更方便，而且通常痛苦更少）。过了一段时间，我们才意识到 Git 非常不适合具有大二进制文件的项目。例如，像 GitHub 或 Bitbucket 这样的 Git 托管站点不喜欢支持超过 1 GB 的存储库大小，因为这样的存储库会占用服务器上的*大量*系统资源。即使在我们的台式机上，一些带有大型二进制艺术品（如 100MB Photoshop 文件）的存储库也会占用大量内存和 CPU 资源。似乎共识是这些大的二进制文件不属于代码存储库，至少就 Git 而言。

是否有分布式版本控制系统可以很好地处理大型二进制文件，而不需要额外的内存或 CPU？我说的是数百 MB 的文件大小和 1 GB 到 10 GB 的存储库大小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T18:44:13.283

带有大文件扩展名的 Mercurial 有一些小故障，但无论如何对您的情况来说**效果更好**

# performance - 需要优化这个 matlab 代码。矢量化是否有帮助？

> ID：12957703
> 
> 赞同：-1
> 
> 时间：2012-10-18T15:00:15.800
> 
> 标签：performance, matlab, optimization, for-loop, vectorization

> **可能重复：**
> [优化重复出现的 matlab 代码](https://stackoverflow.com/questions/12895609/optimization-a-recurring-matlab-code)

向量化是优化这段代码的好选择吗？什么标准决定我们是否对代码进行矢量化？还有什么可以做的？

```
function [oddNodes] = pointInPolygon (point,thePolygon)
% determine if a point is in the polygon (faster than matlab "inpolygon"
% command

 polyPoints=size(thePolygon,1);     %number of polygon points
 oddNodes = false;

j=polyPoints;
x=point(1); y=point(2);

for i=1:polyPoints
if (thePolygon(i,2)<y && thePolygon(j,2)>=y ||  thePolygon(j,2)<y && thePolygon(i,2)>=y)
    if (thePolygon(i,1)+(y-thePolygon(i,2))/(thePolygon(j,2)-thePolygon(i,2))*(thePolygon(j,1)-thePolygon(i,1))<x)
        oddNodes=~oddNodes;
    end
end
j=i; 
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T15:42:23.150

请做一些研究，谷歌上有用的点击量简直是压倒性的：

1.  [http://www.softsurfer.com/Archive/algorithm_0103/algorithm_0103.htm](http://www.softsurfer.com/Archive/algorithm_0103/algorithm_0103.htm)
2.  [http://www.mathworks.com/matlabcentral/fileexchange/10391-fast-points-in-polygon-test](http://www.mathworks.com/matlabcentral/fileexchange/10391-fast-points-in-polygon-test)
3.  [地理围栏 - 点内/外多边形](https://stackoverflow.com/questions/924171/geo-fencing-point-inside-outside-polygon)
4.  [http://www.mathworks.com/matlabcentral/fileexchange/12744-distance-from-a-point-to-polygon](http://www.mathworks.com/matlabcentral/fileexchange/12744-distance-from-a-point-to-polygon)

等等

话虽如此：您的代码建议您只想确定一个*点*是否位于多边形内。在那种情况下，为什么要麻烦，因为`inpolygon`可以在 5 秒内确定百万顶点多边形。

现在，如果您想为大量点执行此操作，但多边形中的顶点不多（或相反），您最好将点数**组**传递给函数：

```
function in = pointInPolygon(points, poly)

    nn = size(poly,1);
    in = false(nn,1);

    for ii = 1:size(points,2)

        x = points(ii,1);
        y = points(ii,2);

        yn = false;
        for jj = 1:size(poly,1)

            if (poly(jj,2)<y && poly(nn,2)>=y || ...
                poly(nn,2)<y && poly(jj,2)>=y)

                if (poly(jj,1)+(y-poly(jj,2))/(poly(nn,2)-poly(jj,2))*...
                   (poly(nn,1)-poly(jj,1))<x)
                    yn = ~yn;
                end

            end
            nn = jj;
        end

        in(ii) = yn;

    end

end 
```

因为这使 Matlab 能够在两个循环中使用 JIT。一个简单的测试：

```
poly = rand(6e6,2);
poly = [poly ; poly(1,:)];

xy   = rand(1e3,2);

tic         
    in = pointInPolygon(xy, poly);
toc 
```

结果：

```
Elapsed time is 0.324801 seconds. 
```

现在，如果你想对*大量*的点进行测试，在多边形中有*大量*的顶点，你最好将所有这些都翻译成 C 语言并编写一个 mex 文件。毕竟这是一个相当繁重的算法，当你对它也提出了很高的要求时，你将不得不切换你的工具集。

# xcode - 如何设置按钮位置？

> ID：12957704
> 
> 赞同：3
> 
> 时间：2012-10-18T15:00:16.030
> 
> 标签：xcode, ipad

我正在开发一个 iPad 应用程序。在主屏幕上有 6 个在 IB 中创建的按钮。我想从代码中动态排列它们，但我不能。已经尝试设置对象的框架/中心，但它们没有移动。

我有一个包含按钮插座的数组，并将它们排列在一个 for 循环中。有什么建议吗？

谢谢！

编辑：

这是一些代码（不是全部，但其余的现在无关紧要），我如何遍历按钮。按钮插座已正确设置。按钮的标题正确更改，我也可以隐藏/显示按钮，但不能隐藏/显示位置。

如果我只是尝试一些虚拟代码，例如： `tempBtn.frame = CGRectMake(100.0, 200.0, 60.0, 40.0);` 没有任何变化（但我怀疑所有 6 个按钮都应该在同一位置）

```
// I have this array, which contains the button outlets

tAddBtnArray = [NSArray ArrayWithObjects:tAddBtn1,tAddBtn2,tAddBtn3,tAddBtn4,tAddBtn5,tAddBtn6, nil];

//I loop through the array, set button title, and trying to change the y position
 for(int i=0;i<6;i++){
        UIButton *tempBtn = [tAddBtnArray objectAtIndex:i];
        [tempField setText:@"Set some title"];
  } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T15:08:18.577

您可以通过这种方式以编程方式添加 uibbutons：

```
 UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
[button addTarget:self 
           action:@selector(yourMethod:)
 forControlEvents:UIControlEventTouchDown];
[button setTitle:@"Jesus Gil y Gil" forState:UIControlStateNormal];
button.frame = CGRectMake(100.0, 200.0, 60.0, 40.0);
[view addSubview:button]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T17:53:57.860

我打赌我知道它是什么。您是否在 xib 文件上启用了自动布局？如果是这样，则正在设置框架，然后正在评估约束，这会将按钮移回分配它们的位置。

你有两个选择：

1.  关闭自动布局，以便您可以自己管理框架。
2.  保持自动布局打开，但更新约束和框架。

我建议关闭自动布局，但我并不是特别喜欢它，所以这只是一种偏好。

# build - 是否可以在多模块 Gradle 构建中跳过 buildSrc 项目？

> ID：12957714
> 
> 赞同：0
> 
> 时间：2012-10-18T15:00:39.327
> 
> 标签：build, gradle

我们正处于从复杂的 Maven 构建系统迁移到更简单的 Gradle 构建系统的早期阶段。不幸的是，我将一些我们自己的自定义 Maven 插件扩展放入 /buildSrc。

是否可以使用 Gradle 跳过内部 buildSrc 项目？此时我宁愿不构建此目录中的内容。

最终它将被我们自己的自定义 Gradle 插件所取代，但现在我最好完全跳过这个项目。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T16:34:42.603

`buildSrc`目录一存在就会生成。所以最好的方法是删除或重命名该目录。

另一种选择是添加一个`buildSrc/build.gradle`包含`tasks.all { enabled = false }`. 不过，这与完全跳过该项目并不完全相同。

# entity-framework - 实体框架如何跟踪加载的实体？他们的生命周期是什么？

> ID：12957715
> 
> 赞同：7
> 
> 时间：2012-10-18T15:00:39.373
> 
> 标签：entity-framework

我对实体框架比较陌生，我能找到的所有文档或书籍都在谈论如何使用框架，或者应该使用哪种模型，但没有深入解释框架是如何工作的。

例如，当我通过 LINQ 查询或框架方法从数据库加载实体时，这些实体是线程安全的吗？换句话说，它们可以与其他线程共享吗？如果是这样，EF如何控制一致性？

当控制脱离上下文时，这些实体是消失了还是仍在记忆中？在 .SaveChanges 之后，那些实体消失了吗？生命周期是什么？

请EF专家详细解释以上几点。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T15:05:48.467

已加载实体的生命周期或多或少与加载它们的实体上下文相关。因此，在许多示例中，您将看到：

```
using (var ctx = new Context())
{
    // ... do work
}   // The context gets disposed here. 
```

一旦上下文被释放（例如在语句的末尾`using`），您不应再将在上下文中加载的实体视为可以从它们加载附加信息。例如，不要尝试访问它们的导航属性。为避免出现问题，我通常发现最好创建一个 DTO，它只包含我希望人们能够使用的确切数据，并且将其作为`using`声明中唯一的值。

```
using (var ctx = new Context())
{
    var q = from p in ctx.People
            select new PersonSummary{Name = p.Name, Email = p.Email};
    return q.ToList(); // This will fully evaluate the query, 
                       // leaving you with plain PersonSummary objects.
} 
```

实体上下文不是线程安全的，因此即使在上下文的生命周期内，也不应该尝试从多个线程中为绑定到同一上下文的对象加载导航属性等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T15:15:19.003

> *例如，当我通过 LINQ 查询或框架方法从数据库加载实体时，这些实体是线程安全的吗？换句话说，它们可以与其他线程共享吗？如果是这样，EF如何控制一致性？*

ObjectContext 类并不安全。每个线程必须有一个对象上下文或创建自己的线程同步过程。这样，一致性由 ObjectContext 管理，因为它跟踪所有对象的状态。

> *当控制脱离上下文时，这些实体是消失了还是仍在记忆中？在 .SaveChanges 之后，那些实体消失了吗？生命周期是什么？*

ObjectContext 类继承自 IDisposable 接口，因此您可以并且应该在使用实体框架时使用 USING 语句。这样，在您关闭 using 语句后它们就消失了。如果您*不*处理它们一直被跟踪的上下文，则只会更改它们的状态。释放 ObjectContext 实例还将确保正确释放数据库连接并且不会泄漏数据库连接。

所以，最大的问题是：

**EF应该住在哪里，什么时候？**

这些[ORM](http://en.wikipedia.org/wiki/Object-relational_mapping)应该被视为工作单元模式，也就是说，ORM 对象应该一直存在到业务任务完成。

在我的特定场景中，我使用像[Windsor这样的](http://docs.castleproject.org/Default.aspx?Page=MainPage&NS=Windsor&AspxAutoDetectCookieSupport=1)*[IoC](http://en.wikipedia.org/wiki/Inversion_of_control)*容器来为我完成繁重的工作。例如，在 ASP.NET MVC 应用程序中，Windsor 可以为*每个 Web 请求创建一个上下文*。有了这个，您不必在整个代码中编写大量语句。你可以在这里读更多关于它的内容：*`using`*

 *[温莎教程 - 第七部分 - 生活方式](http://stw.castleproject.org/Windsor.Windsor-Tutorial-Part-Seven-Lifestyles.ashx)

* * *

这是一个链接，直接从帮助在 Microsoft 构建框架的人那里更详细地解释它：

[实体框架对象上下文生命周期对比 Linq to Sql 数据上下文生命周期](http://patrickdesjardins.com/blog/entity-framework-object-context-life-cycle-compared-to-linq-to-sql-data-context-life-cycle)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-03T16:14:33.057

You can write a test application to observe the behavior of the context tracker.

If you retrieve an entity from a context, then dispose of that context, then create a new instance of the context and attempt to save a change to the entity you retrieved earlier, it will complain that it is already tracking an entity with that ID.*

# symfony - 无法使用 Fr3d LDAP Bundle 登录 LDAP（注册有效）

> ID：12957718
> 
> 赞同：2
> 
> 时间：2012-10-18T15:00:46.967
> 
> 标签：symfony, fr3dldapbundle

我正在努力将 Fr3d LDAP Bundle（带有 FOSUserbundle）实现到 Symfony 中。我第一次能够登录并在数据库中注册。虽然现在我遇到了无法第二次登录的问题。它只是抛出“错误的用户名和密码”。这是我的配置：

配置.yml

```
fos_user:
   db_driver: orm
   firewall_name: main
   user_class: example\AcmeBundle\Entity\User

fr3d_ldap:
   driver:
      host: ldap.example.de
      port: 389
      useSsl: false;

user:
    baseDn: ou=people, dc=example, dc=de
    attributes:
      - { ldap_attr: uid,  user_method: setUsername }
      - { ldap_attr: mail,  user_method: setEmail }
    filter: (objectClass=*) 
```

安全.yml

```
security:
   firewalls:
      main:
         pattern: ^/
         fr3d_ldap: ~
         form_login:
           always_use_default_target_path: true
           default_target_path: /profile
           provider: chain_provider
         logout:       true
         anonymous:    true

   providers:
      chain_provider:
        chain:
          providers: [fos_userbundle, fr3d_ldapbundle]
      fr3d_ldapbundle:
          id: fr3d_ldap.security.user.provider    
      fos_userbundle:
          id: fos_user.user_manager    

  encoders:
     example\AcmeBundle\Entity\User : plaintext

  access_control:
      - { path: ^/login$, role: IS_AUTHENTICATED_ANONYMOUSLY }
      - { path: ^/register, role: IS_AUTHENTICATED_ANONYMOUSLY }
    - { path: ^/resetting, role: IS_AUTHENTICATED_ANONYMOUSLY }
    - { path: ^/admin/, role: ROLE_ADMIN }

  role_hierarchy:
      ROLE_ADMIN:       ROLE_USER
      ROLE_SUPER_ADMIN: ROLE_ADMIN 
```

我搜索并尝试了我在网上可以找到的所有内容，但由于几乎所有文档都很旧，我找不到任何东西。

**编辑** 实际上我的一位同事刚刚找到了答案。

为了让我们的 LDAP 识别用户，您需要通过“uid=”提供带有 uid 的绑定。我们现在通过给过滤器另一个参数来解决这个问题，如下所示：

```
user:
    baseDn: ou=people, dc=example, dc=de
    attributes:
      - { ldap_attr: uid,  user_method: setUsername }
      - { ldap_attr: mail,  user_method: setEmail }
    filter: (&(objectClass=Person)(uid=%s)) 
```

对不起给您带来不便！

# sql - 用户映射 SQL Management Studio

> ID：12957725
> 
> 赞同：0
> 
> 时间：2012-10-18T15:01:16.453
> 
> 标签：sql, ssms

我正在使用 sp_addrolemember 过程来授予用户访问权限。该命令有效，但谁能解释为什么在其属性中的“用户映射”下未选中“映射”复选框？或者有没有办法检查这个框？

我正在使用带有 Python 的 HTML 界面来为用户提供访问权限，但如果我进入 SQL Management Studio，就会感到困惑，因为看起来他们在滚动浏览该用户的映射时没有权限。

```
USE [105494-0000] EXEC sp_addrolemember 'permission', 'user_name' 
```

![在此处输入图像描述](../Images/37d528bd306438ab1968e05ddb3f2084.png)

![在此处输入图像描述](../Images/8849f5f8d6ee8147bf9da0aacfafdcf2.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T15:49:18.417

您必须先创建用户

```
CREATE USER [testUser] FOR LOGIN [testLogin] 
```

然后

```
EXEC sp_addrolemember N'db_datareader', N'testUser' 
```

# android - Canvas.drawBitmap 超高cpu消耗

> ID：12957730
> 
> 赞同：0
> 
> 时间：2012-10-18T15:01:27.720
> 
> 标签：android, performance

我有一个简单的 Android 应用程序，它由一个 View 组成，它包含一个 Gallery 小部件。在创建视图时，我将 10 个图像加载到 Gallery 对象。

图像转换期间的 FPS（当我向右滑动下一张图像，向左滑动上一张时）*很低*- 它只是不流畅。

我使用 eclipse 中内置的 Method profiling 函数来分析应用程序，并注意到它`Canvas.drawBitmap`消耗了大量的 CPU。

我目前的目标是 Android 2.3.3，所以`hardwareacceleration`无关紧要。

此外，对位图进行下采样并没有改变任何东西——即使是在大规模下采样时也是如此。

目前使用三星 Galaxy TAB

对此有何见解？

# android - 以编程方式安装自签名证书

> ID：12957731
> 
> 赞同：5
> 
> 时间：2012-10-18T15:01:28.490
> 
> 标签：android, ssl, https, certificate, x509certificate

我正在启动 KeyChain 意图，用于安装我在内存中作为 X509Certificate 对象的自签名证书（由 X509TrustManager 获得，由 checkServerTrusted 方法获得）。使用此代码：

```
Intent intent = KeyChain.createInstallIntent();
intent.putExtra(KeyChain.EXTRA_CERTIFICATE, certs[0].getEncoded());
intent.putExtra(KeyChain.EXTRA_NAME, "certificate");
context.startActivityForResult(intent,  0); 
```

新活动启动，我可以收到消息“证书已安装”，但我无法通过安全证书列表找到它，并且在尝试连接到该主机时，它似乎没有安装。

关于如何解决它的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T15:51:51.063

您提到的安全证书列表屏幕仅包含您已添加到 Android 设备的受信任 CA 证书列表。（注：系统证书列表为设备厂商设置的可信CA列表）。没有屏幕（至少在非 root 手机上）可以显示 KeyChain 的证书。

为了让应用程序访问证书/密钥，它需要向操作系统请求许可。为此，KeyChain 类有一个名为 choosePrivateKeyAlias 的方法，它向用户显示一个活动，以选择应用程序可以访问的证书。此活动应列出您使用上述方法安装的所有导入证书。

有关详细信息，请参阅下面的链接。

[统一 ICS 中的密钥存储访问](http://android-developers.blogspot.com/2012/03/unifying-key-store-access-in-ics.html)

# java - 在 java web 设置中，如何实现 TXT/CSV 下载？

> ID：12957742
> 
> 赞同：0
> 
> 时间：2012-10-18T15:02:04.723
> 
> 标签：java, jakarta-ee

例如，我已经在后端并且我有数据（SomeObject 列表）并且我希望它被下载（而不是重定向到页面）。我不确定如何实现它。

问题：

1.  我应该首先（在服务器中）创建一个实际的 CSV 文件并让用户下载它（下载后删除）还是有办法让用户在不制作任何物理文件的情况下下载它？

2.  有熟悉cubby的吗？还是 Java Web 操作/操作结果？我似乎无法在服务器操作中获取请求/响应对象：/ 谢谢。

# ruby-on-rails - 我不应该在 `included do ... end` 块中包含什么？

> ID：12957743
> 
> 赞同：9
> 
> 时间：2012-10-18T15:02:33.880
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, module, activesupport

我正在使用 Ruby on Rails 3.2.2。我正在使用 RoR [ActiveSupport::Concern](http://api.rubyonrails.org/classes/ActiveSupport/Concern.html)功能实现一个模块并将其包含在我的课程中。它使`included do ... end`内部声明的块生成代码可用，以便在包含模块的类的类上下文中执行。

我的疑问是：*我**不**应该在`included do ... end`块中包含什么？*也就是说，例如，进行以下操作是否是“常见”/“良好”做法？

```
module MyModule
  extend ActiveSupport::Concern

  class MyModuleClass
    attr_accessor :attr1, :attr2, :attr3

    def initialize(attrs)
     @attr1 = attrs[:attr1]
     @attr2 = attrs[:attr2]
     @attr3 = attrs[:attr3]
    end
  end

  included do
    @my_module_class = MyModuleClass.new(some_attrs)
  end
end 
```

*更多*，将是`@my_module_class`作为包含类中的属性的变量`MyModule`（*顺便说一句*：我想让它*仅*在内部`@my_module_class`“可见”*`MyModule` ，因为它仅用于该模块）？是否有一些关于如何处理我试图在`included do ... end`上述代码块中实例化的情况的“高级”示例或教程？你有什么建议？*

 ** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T15:14:57.017

@my_class 将是 MyClass 的一个实例，而不是 MyModule。如果你想让 MyClass 的所有实例成为 MyModule 的一个实例，你应该写：

```
 include MyModule 
```

在类定义中。

如果您在编辑之前查看此问题的原始版本，我认为我的回答是有道理的。

**编辑1：**

让我们添加到您的示例中，并假设您有一个名为 Foo 的类：

```
class Foo
    include MyModule
end 
```

您想创建一个与 Foo 关联的 MyModuleClass 实例，但听起来您并不想真正修改 Foo 或授予它访问 MyModuleClass 的权限。我建议您使用哈希表：

```
module MyModule
    # ...

    @hash = {}
    class << self
        attr_accessor :hash
    end

    included do
        MyModule.hash[self] = MyModuleClass.new(some_attrs)
    end
end 
```

我认为这会起作用，并且它避免了向`Foo`类对象添加实例变量。从技术上讲，ruby 代码的任何部分都可以访问 MyModule.hash，但是您应该在源代码中添加注释，告诉人们不要这样做，并且不要宣传哈希存在。*

# c# - datagridview 可以在 web 应用程序上使用吗

> ID：12957749
> 
> 赞同：0
> 
> 时间：2012-10-18T15:02:51.417
> 
> 标签：c#, datagridview

在我的网页中，我使用了一个 gridview 来显示数据。现在的问题是gridview标题是动态的（即）它需要当前月份并显示最近两个月的标题。比如八月和九月。一切正常，但我无法进行排序。由于 sortexpression 仅采用数据库字段名称（现在是 August 和 september）。所以我的一位朋友建议使用datagridview。而且我不知道datagridview 或datagrid。我力求获得使用这些的示例代码。如果你们知道，请告诉我。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T15:10:52.260

不，这是一个winform控件。如果您想使用 DataGrid，只需查看一些代码示例 - MSDN 将是一个很好的起点。如果这不是您所需要的，您可以尝试在网络上提供现成的解决方案。只是要做一些研究。

# c++ - Boost::spirit 错误地处理带有分支的规则

> ID：12957750
> 
> 赞同：1
> 
> 时间：2012-10-18T15:03:09.123
> 
> 标签：c++, boost, boost-spirit, boost-variant

我编写了下面列出的代码。编译器向我报告一个错误：'3 个重载都不能转换所有参数类型'。

我使用 MSVC 11.0 和 Boost 1.51.0。表达式的每个分支都`m_oQueryIterationExpression`可以正常工作，但它们不能一起工作。有什么线索吗？

```
#include <boost/spirit/include/qi.hpp>
#include <boost/tuple/tuple.hpp>
#include <boost/variant/recursive_variant.hpp>

namespace Ns
{
    struct Regexp     { std::string m_strEntity; };
    struct String     { std::string m_strEntity; };
    struct Identifier { std::string m_strEntity; };

    typedef int Number;

    typedef std::string Operation;
    typedef boost::variant<Regexp, Number, String, Identifier> Operand;
    typedef boost::tuple<Operation, boost::optional<std::vector<Operand> > > OperationWithOperands;

    struct QueryConcatenation;

    typedef boost::tuple<boost::recursive_wrapper<QueryConcatenation>, boost::optional<char> > typeA;
    typedef std::vector<std::vector<OperationWithOperands> > typeB;

    typedef boost::variant<typeA, typeB> QueryIteration;

    struct QueryConcatenation {
        typedef std::vector<QueryIteration> TEntity;
        TEntity m_oEntity;
    };
}

int main()
{
    using namespace Ns;
    namespace qi = boost::spirit::qi;

    qi::rule<char*, QueryConcatenation()>                                m_oQueryConcatenationExpression;
    qi::rule<char*, QueryIteration()>                                    m_oQueryIterationExpression;
    qi::rule<char*, std::vector<std::vector<OperationWithOperands> >() > m_oQueryNode;

    m_oQueryIterationExpression %= 
        qi::attr_cast<typeA, typeA>( '(' >> m_oQueryConcatenationExpression >> ')' >> -(qi::char_("*+?")) )
        | m_oQueryNode;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T23:49:46.533

好吧，问题是，您的分配**是**模棱两可的，编译器只是让您知道。走着瞧吧：

```
typedef boost::tuple<
            boost::recursive_wrapper<STreeConstructionRuleQueryConcatenation>, 
            boost::optional<char>
        > typeA;
typedef std::vector<std::vector<STreeConstructionRuleOperationWithOperands> > typeB;

typedef boost::variant<typeA, typeB> typeAB;
typedef typeAB STreeConstructionRuleQueryIteration; 
```

现在让我们看看一些规则中的属性兼容性：

```
qi::rule<Iterator, typeA(),  ascii::space_type> ruleA;
qi::rule<Iterator, typeB(),  ascii::space_type> ruleB;
qi::rule<Iterator, typeAB(), ascii::space_type> ruleAB;

// these are intended to compile, and they do:
ruleA  %= ( '(' >> m_oQueryConcatenationExpression >> ')' >> -(qi::char_("*+?")) );
ruleB  %= m_oQueryNode;
// so far, so good

// ---- Now, ideally we like the assignments to be mutually exclusive:

// This fails to assign, good! :
// ruleB  %= ( '(' >> m_oQueryConcatenationExpression >> ')' >> -(qi::char_("*+?")) );

// But HERE is the surprise:
ruleA  %= m_oQueryNode; // uhoh m_oQueryNode can be assigned to a typeA attribute as well 
```

这就是在解析器表达式的第二个分支上使变体的初始化模棱两可的原因：它可能是任何一个！

幸运的是，有一个非常简单的解决方案：只需明确类型即可：

```
qi::rule<Iterator, typeAB(), ascii::space_type> ruleAB;
ruleAB %= ruleA | ruleB; 
```

您会看到，通过使子规则公开变体的*显式*类型成员，您消除了所有疑问（完全匹配对编译器来说很好）。可以达到相同的效果：

```
ruleAB %= qi::attr_cast_type<typeA, typeA>( '(' >> m_oQueryConcatenationExpression >> ')' >> -(qi::char_("*+?")) ) | ruleB; 
```

这消除了对另一个子规则的需要，但以易读性为代价，IMO。

这是您的完整原始代码，用子规则修复：http: [//liveworkspace.org/code/5a7a8046b713beefba211a6a54219368](http://liveworkspace.org/code/5a7a8046b713beefba211a6a54219368)（更改命名...）

# visual-studio-2010 - 我可以禁用或更改单个 ReSharper 快捷方式吗？

> ID：12957753
> 
> 赞同：21
> 
> 时间：2012-10-18T15:03:14.410
> 
> 标签：visual-studio-2010, resharper

我正在使用 VS 2010，并且有一个我非常喜欢的快捷方式，这是我自己设置的快捷方式：ctrl + shift + Q 以便删除所有未使用的使用并对剩余的使用进行排序。我安装了 ReSharper，它覆盖了我的 VS 快捷方式，因此按 ctrl + shift + Q 将生成注释 (/**/)。

有什么办法可以禁用这个单一的快捷方式？（或将其更改为任何其他允许我使用旧组合键的组合键？

我尝试了这个解决方案：[如何在 ReSharper 中更改给定命令的快捷键？](https://stackoverflow.com/questions/1657579/how-to-change-shortcut-keys-for-a-given-command-in-resharper)但我的快捷方式仍设置在我的 VS 配置中。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-10-20T16:09:29.483

1.  去`Tools > Options > Environment > Keyboard`
2.  搜索一个名为`ReSharper.ReSharper_BlockComment`
3.  删除当前快捷方式或为 ReSharper 命令重新分配另一个快捷方式。

我猜您已经在全局上下文中设置了快捷方式，而 ReSharper 已在*文本编辑器*上下文中为其命令分配了快捷方式。当您在编辑代码时调用快捷方式时，后者优先。

此外，请考虑查看 ReSharper 自己的[Code Cleanup](https://www.jetbrains.com/help/resharper/Code_Cleanup__Index.html)，它负责处理未使用的指令、其他冗余项和格式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-03T14:18:26.957

详细说明步骤：

假设您要更改“Ctrl +Q”的绑定

1.  打开工具选项环境键盘

2.  在“按下快捷键”下输入：Ctrl + Q

3.  这将向您显示当前绑定到此快捷方式的所有命令

4.  然后在“显示命令包含窗口”中搜索命令并删除分配（对于您想要的上下文）。

5.  请注意，根据上下文，多个命令可以绑定到快捷方式，因此请确保删除您需要的任何内容

6.  然后通过重复上面的步骤 2 验证绑定是否消失

7.  最后搜索要绑定快捷方式的新命令，然后输入快捷方式并将其绑定到要使用 ASSIGN 的上下文中

# python - 从python中的文本文件中读取文本

> ID：12957754
> 
> 赞同：0
> 
> 时间：2012-10-18T15:03:15.813
> 
> 标签：python, text-files

我很难弄清楚如何轻松地从文本文件中导入文本，或者至少是一种令人难忘的方法。我正在尝试制作一个侮辱用户（对于学校）的程序，它从一个文本文件中引入一个单词/s，从第二个文件中添加另一个单词/s，从第三个文本文件中添加最后一个单词/s.. .

我很难找到一种编码方法来执行此操作...我启动并运行随机数来选择我只需要知道如何访问文本文件中的字符串或文本的文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T15:06:36.880

最简单的方法是使用`with`语句。它会为您关闭文件。

```
with open("file.txt") as f:
    for line in f:
        # do something with line 
```

或者直接将数据读入列表：

```
with open("file.txt") as f:
    lines = list(f)
# do something with lines 
```

# php - 使用 postgress 在 zend 框架中按日期分组

> ID：12957757
> 
> 赞同：0
> 
> 时间：2012-10-18T15:03:47.880
> 
> 标签：php, zend-framework, postgresql

所以我有以下查询：

```
public function findByDateCreated($date){
        $select = $this->select();
        $select->where('dtcreated = ?', $date);
        $select->group('date');
        $rows = $this->fetchAll($select);
        if(count($rows) > 0){
            return $rows[0];
        }else{
            return false;
        }
    } 
```

引发错误：

```
500: SQLSTATE[42703]: Undefined column: 7 ERROR: column "date" does not exist LINE 1: ...E (dtcreated = '2012-10-17 14:26:41.575479') GROUP BY "date" ^ 
```

我的问题是：

我如何按日期分组以便我得到：

```
17-10-2012
One item
two item
three item

16-10-2012
oneitem
twoitem
threeitem 
```

等等？

**我看不出这有什么帮助，但是：**

```
create table users_notifications(
    id  int primary key default nextval('users_notifications_id_seq') not null,
    userid int not null references users(id),
    itemid int not null,
    itemtype varchar(75),
    dtcreated timestamp not null default now(),
    dtupdated timestamp default now(),
    message text,
    flag boolean,
    flagnew boolean
); 
```

这就是桌子的样子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T15:38:22.193

该错误是因为您没有调用列`date`，因此您无法按此分组。

试试这个：

```
$select->group(new Zend_Db_Expr("date_trunc('hour', dtcreated)")); 
```

这会将所有日期时间截断为仅年、月、日组件，然后按这些结果值分组。

# objective-c - 不同 OS X 版本的不同笔尖

> ID：12957759
> 
> 赞同：0
> 
> 时间：2012-10-18T15:03:52.163
> 
> 标签：objective-c, xcode, macos, interface-builder

是否有可能以某种方式为不同的 OS X 版本提供不同的 nib 文件？因为例如 10.6 没有自动布局功能，而在 10.7 和 10.8 上它是一个很棒的功能。因此，如果可能的话，我可以为 10.6 创建一个笔尖，为 10.7 和 10.8 创建另一个笔尖。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T15:36:24.500

当然。只需创建不同的 NIB 文件，例如在这些文件的名称末尾添加版本，然后在运行时找出当前系统正在运行的 OS X 版本，并以编程方式为 OS X 版本加载正确的库。

不过，为您的应用程序的“主要”NIB 这样做会相当困难（有可能，我以前做过，但我不推荐它）。只需使您的主 NIB 10.6 兼容，并且只将主菜单以及应用程序委托放入其中（如果您希望它由 NIB 文件创建而不是通过编程方式创建）。将所有窗口、视图和其他 UI 元素放入单独的 NIB 文件中，然后在您的应用程序委托中，以编程方式在回调中加载 NIB 文件，例如`applicationDidFinishLaunching:`

只需查看[Apple 的 NIB 文件文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/LoadingResources/CocoaNibs/CocoaNibs.html)，然后搜索“以编程方式加载 Nib 文件”。有一些有用的链接指向所需的方法，以及一些简单常见情况的示例代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T15:24:58.887

Yes, just supply different NIB filenames when loading them. The one place where you can't do this is the application NIB, but it should be free of UI elements beside the menu bar, so just leave it springs-and-struts (ie not autolayout).

This may involve overriding `makeWindowControllers` or `windowNibName` on `NSDocument`, for example, in order to work on the NIB filename. See the documentation for more information about solving this for a particular class - it is definitely doable.

# ios - 带有自定义路线的自定义地图

> ID：12957762
> 
> 赞同：1
> 
> 时间：2012-10-18T15:04:21.540
> 
> 标签：ios, xcode, geolocation, maps

我开始开发一个带有自定义地图的应用程序，它必须允许自定义路线（因为中间没有街道）。我发现了很多关于自定义地图（route-me、cloudmade、mapbox）的信息，但我没有找到关于如何在自定义地图上添加一些自定义路线的信息。

例如：在一个非常大的购物中心，顾客将从他当前的位置前往购物中心的另一家商店。

所以 google_maps 没有这个购物中心（任何购物中心）的详细结构，这就是为什么我必须创建一个自定义的。从当前位置到 locationX 的自定义路线也是如此。它必须在自定义地图上显示。

有任何想法吗？

# security - 什么是“代码替换（OAuth 登录）”威胁？

> ID：12957775
> 
> 赞同：4
> 
> 时间：2012-10-18T15:05:03.990
> 
> 标签：security, oauth-2.0

来自[**OAuth 2.0 威胁模型和安全注意事项**草案](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-threatmodel-08#section-4.4.1.13)：

> **4.4.1.13。威胁：代码替换（OAuth 登录）**
> 
> 攻击者可能会尝试使用受害者的身份登录应用程序或网站。依赖 OAuth 保护的服务 API 提供的身份数据来登录用户的应用程序很容易受到这种威胁。这种模式可以在所谓的“社交登录”场景中找到。
> 
> 作为先决条件，资源服务器提供 API 以获取有关用户的个人信息，这些信息可以解释为已获得用户身份。从这个意义上说，客户端将资源服务器 API 视为“身份”API。客户端利用 OAuth 获取身份 API 的访问令牌。然后它查询身份 API 以获取标识符并使​​用它来查找其内部用户帐户数据（登录）。客户端假设因为它能够获得有关用户的信息，所以用户已经通过了身份验证。
> 
> 如果客户端使用授权类型“代码”，攻击者需要从目标客户端应用程序使用的同一身份提供者收集相应受害者的有效授权代码。攻击者诱使受害者使用与目标应用程序相同的身份提供者登录恶意应用程序（对身份提供者来说可能是合法的）。这导致身份提供者的授权服务器为相应的身份 API 颁发授权代码。然后恶意应用程序将此代码发送给攻击者，攻击者进而触发目标应用程序内的登录过程。攻击者现在操纵授权响应并用他们的代码（绑定到他们的身份）代替受害者的代码。然后客户端将此代码交换为访问令牌，这反过来又被身份 API 接受，因为相对于资源服务器的受众是正确的。但是由于身份API返回的标识符是由访问令牌中的身份确定的（根据受害者的代码颁发），因此攻击者以受害者的身份登录目标应用程序。
> 
> 影响：攻击者可以访问应用程序和应用程序内的用户特定数据。
> 
> 对策：
> 
> *   所有客户端都必须在每个请求中指明其客户端 ID，以交换访问令牌的授权代码。授权服务器必须验证是否已将特定授权代码颁发给特定客户端。如果可能，应事先对客户端进行身份验证。
>     
>     
> *   客户端应使用适当的协议，例如 OpenID (cf. [openid]) 或 SAML (cf. [OASIS.sstc-saml-bindings-1.1]) 来实现用户登录。两者都支持对客户端的受众限制。

这让我很困惑：“攻击者需要从目标客户端应用程序使用的同一身份提供者那里收集相应受害者的有效授权代码”。什么是“相应的受害者”以及“身份提供者”在此和后续使用中的含义是什么？

整个攻击描述是模糊的。我开始将其理解为“不应使用 OAuth 2.0 来实现用户登录”，但这是否意味着 Facebook 等主要平台容易受到攻击？并且易受什么影响，究竟是什么？

我可能只需要澄清本段中使用的一些术语。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-18T17:04:24.463

我自己找到了答案。本节中的措辞有点混乱，但攻击非常简单。“身份提供者”是用于验证用户身份的资源服务器的名称。

基本上，这是使用为客户端应用程序颁发的身份验证代码来获取不同应用程序的访问令牌的情况。我试图以更清晰的方式概述这些步骤。

1.  攻击者注册恶意客户端（例如注册到 Facebook 的应用程序）。
2.  受害者用户被诱骗使用“通过第三方登录”按钮（例如“登录 Facebook”）登录恶意客户端，从而触发 OAuth 2.0 授权码流。
3.  恶意客户端获取授权码。
4.  攻击者将刚刚获得的授权码用于另一个应用程序，并以受害者用户的身份获得对该应用程序的访问权限。

只有在 authorization_codes 未绑定到特定客户端时，才能执行第 4 步。颁发给客户端的身份验证代码只能由同一客户端用于获取访问令牌。

当然，Facebook 并不容易受到攻击，因为这只需要授权服务器的基本检查即可失败。

# excel - 找到组合后在 VBA 中过滤

> ID：12957778
> 
> 赞同：0
> 
> 时间：2012-10-18T15:05:12.477
> 
> 标签：excel, filtering, combinations, vba

在这个网站上得到一些帮助后，我现在正在寻找更多。这是我以前的帖子：[在 excel 中堆叠和分层框](https://stackoverflow.com/questions/12950671/stacking-and-layering-boxes-in-excel/12951510#comment17564550_12951510)

我现在能够做出所有可能的组合。但是我的下一步是设置一些参数。我的意思是盒子的高度和重量。如果我要按框名称（A，B，....）在 A 列中的“Sheet2”上放置 B 列重量（kg）和 C 列高度（毫米）。然后在“Sheet3”上放置我的最大身高和最大体重。B2 最大重量为 30 公斤，C3 最大高度为 500 毫米。

我怎样才能让我的宏检查这些参数，如果它们确实适合它们，它们会像我之前的问题一样放在列中，如果它超过我的体重或身高，它不会打扰放置它。

希望尽快听到 :) 开始享受 e​​xcel！

* * *

编辑：

```
Box name    Weight  height
A              1    0.12
B              5    0.92
C              3    0.5
D              2    0.34 
```

........ETC

这就是我放置输入信息的方式。我想要很多盒子，甚至多达 100 个

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T02:41:46.650

作为对先前解决方案的增强

输入格式（请在学习我的代码后实现您自己的输入/输出farmat）

```
<num of box>   <box name 1>  <box name 2> ... <box name N>
<max height>   <height 1>    <height 2>...  
<max weight>   <weight 1>    <weight 2> ...
<output result 1>
<output result 2>
.
.
. 
```

样本输入和输出

```
3   A   B   C   D   E
7.7 3   1   1   1   2
5.5 2   1   2   3   3
A                   
B                   
AB                  
C                   
AC                  
BC                  
ABC                 
D                   
AD                  
BD                  
CD                  
E                   
AE                  
BE                  
CE 
```

不限于整数，可以使用浮点数

代码：

```
 Function stackBox()
    Dim ws As Worksheet
    Dim width As Long
    Dim height As Long
    Dim numOfBox As Long
    Dim optionsA() As Variant
    Dim results() As Variant
    Dim str As String
    Dim outputArray As Variant
    Dim i As Long, j As Long
    Dim currentSymbol As String
    '------------------------------------new part----------------------------------------------
    Dim maxHeight As Double
    Dim maxWeight As Double
    Dim heightarray As Variant
    Dim weightarray As Variant
    Dim totalHeight As Double
    Dim totalWeight As Double
    '------------------------------------new part----------------------------------------------

    Set ws = Worksheets("Sheet1")
    With ws
        'clear last time's output
        height = .Cells(.Rows.Count, 1).End(xlUp).row
        If height > 3 Then
            .Range(.Cells(4, 1), .Cells(height, 1)).ClearContents
        End If

        numOfBox = .Cells(1, 1).Value
        width = .Cells(1, .Columns.Count).End(xlToLeft).Column
        If width < 2 Then
            MsgBox "Error: There's no item, please fill your item in Cell B1,C1,..."
            Exit Function
        End If

        '------------------------------------new part----------------------------------------------
        maxHeight = .Cells(2, 1).Value
        maxWeight = .Cells(3, 1).Value
        ReDim heightarray(1 To 1, 1 To width - 1)
        ReDim weightarray(1 To 1, 1 To width - 1)
        heightarray = .Range(.Cells(2, 2), .Cells(2, width)).Value
        weightarray = .Range(.Cells(3, 2), .Cells(3, width)).Value
        '------------------------------------new part----------------------------------------------

        ReDim optionsA(0 To width - 2)
        For i = 0 To width - 2
            optionsA(i) = .Cells(1, i + 2).Value
        Next i

        GenerateCombinations optionsA, results, numOfBox

        ' copy the result to sheet only once
        ReDim outputArray(1 To UBound(results, 1) - LBound(results, 1) + 1, 1 To 1)
        Count = 0
        For i = LBound(results, 1) To UBound(results, 1)
            If Not IsEmpty(results(i)) Then
                'rowNum = rowNum + 1
                str = ""
                totalHeight = 0#
                totalWeight = 0#
                For j = LBound(results(i), 1) To UBound(results(i), 1)
                    currentSymbol = results(i)(j)

                    str = str & currentSymbol 'results(i)(j) is the SYMBOL e.g. A, B, C

                    'look up box's height and weight , increment the totalHeight/totalWeight
                    updateParam currentSymbol, optionsA, heightarray, weightarray, totalHeight, totalWeight

                Next j
                If totalHeight < maxHeight And totalWeight < maxWeight Then
                    Count = Count + 1
                    outputArray(Count, 1) = str
                End If

            '.Cells(rowNum, 1).Value = str
            End If
        Next i
        .Range(.Cells(4, 1), .Cells(UBound(outputArray, 1) + 3, 1)).Value = outputArray
    End With

End Function

Sub updateParam(ByRef targetSymbol As String, ByRef symbolArray As Variant, ByRef heightarray As Variant, ByRef weightarray As Variant, ByRef totalHeight As Double, ByRef totalWeight As Double)
Dim i As Long
Dim index As Long
index = -1
For i = LBound(symbolArray, 1) To UBound(symbolArray, 1)
    If targetSymbol = symbolArray(i) Then
        index = i
        Exit For
    End If
Next i

If index <> -1 Then
    totalHeight = totalHeight + heightarray(1, index + 1)
    totalWeight = totalWeight + weightarray(1, index + 1)
End If
End Sub

Sub GenerateCombinations(ByRef AllFields() As Variant, _
                                             ByRef Result() As Variant, ByVal numOfBox As Long)

  Dim InxResultCrnt As Integer
  Dim InxField As Integer
  Dim InxResult As Integer
  Dim i As Integer
  Dim NumFields As Integer
  Dim Powers() As Integer
  Dim ResultCrnt() As String

  NumFields = UBound(AllFields) - LBound(AllFields) + 1

  ReDim Result(0 To 2 ^ NumFields - 2)  ' one entry per combination
  ReDim Powers(0 To NumFields - 1)          ' one entry per field name

  ' Generate powers used for extracting bits from InxResult
  For InxField = 0 To NumFields - 1
    Powers(InxField) = 2 ^ InxField
  Next

 For InxResult = 0 To 2 ^ NumFields - 2
    ' Size ResultCrnt to the max number of fields per combination
    ' Build this loop's combination in ResultCrnt

    ReDim ResultCrnt(0 To NumFields - 1)
    InxResultCrnt = -1
    For InxField = 0 To NumFields - 1
      If ((InxResult + 1) And Powers(InxField)) <> 0 Then
        ' This field required in this combination
        InxResultCrnt = InxResultCrnt + 1
        ResultCrnt(InxResultCrnt) = AllFields(InxField)
      End If
    Next

    If InxResultCrnt = 0 Then
        Debug.Print "testing"
    End If
    'additional logic here
    If InxResultCrnt >= numOfBox Then
        Result(InxResult) = Empty

    Else
         ' Discard unused trailing entries
        ReDim Preserve ResultCrnt(0 To InxResultCrnt)
        ' Store this loop's combination in return array
        Result(InxResult) = ResultCrnt
    End If

  Next

End Sub 
```

# php - simplexml_load_file 文档为空

> ID：12957779
> 
> 赞同：2
> 
> 时间：2012-10-18T15:05:12.677
> 
> 标签：php, xml-parsing, simplexml

我正在从 RSS 提要中提取信息：

[http://search.library.utoronto.ca/UTL/index?Ntt=starcraft&Ntk=Anywhere&Ntx=mode+matchallpartial&N=0&Nu=p_work_normalized&Np=1&rss=1](http://search.library.utoronto.ca/UTL/index?Ntt=starcraft&Ntk=Anywhere&Ntx=mode+matchallpartial&N=0&Nu=p_work_normalized&Np=1&rss=1)

如果您使用浏览器导航到该页面，您会得到一个漂亮的 xml 页面。

但是，如果我这样做

```
simplexml_load_file("the above url"); 
```

在php中，我得到

```
1: parser error : Document is empty
1: parser error : Start tag expected, '<' not found in my_file 
```

那么为什么浏览器能得到它而PHP却不能呢？

如果我这样做`file_get_contents("the above url")`，该函数将失败并返回 FALSE。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T15:14:01.027

该站点正在阻止来自 PHP 的请求。

第一次运行

```
<?php
ini_set('user_agent', 'Mozilla/5.0 (Windows NT 6.1; WOW64; rv:16.0) Gecko/20100101 Firefox/16.0'); 
```

（或其他一些有效的用户代理），它会工作。

# sql - 为只有一个匹配的Between查询索引SQL？

> ID：12957781
> 
> 赞同：11
> 
> 时间：2012-10-18T15:05:17.717
> 
> 标签：sql, indexing, between

我们有一个包含超过 200 万行的表，其中所有针对它的查询都将是使用`Column1`and的 Between 查找`Column2`。此外，只有一种可能的结果。例如...

```
Col1     Col2
1        5
6        10
11       15

select * from table1 where 8 between Col1 and Col2 
```

我目前在`Col1`和上有一个唯一的聚集索引`Col2`。到目前为止，我一直无法弄清楚如何进一步调整查询和索引以最小化处理的行。执行计划目前报告在找到唯一正确答案时处理的成本接近 0.5 和 113k 行。

我可能会忽略哪些选项？

根据要求，当前执行计划的一些细节：

```
Operation
 Clustered Index Seek
Predicate
 CONVERT_IMPLICIT(bigint,[@2],0)<=[Col2]
Seek Predicate
 Seek Keys[1]: End: Col1 <= Scalar Operator(CONVERT_IMPLICIT(bigint,[@1],0)) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-18T15:18:01.670

范围总是不重叠的吗？你提到总是只有一场比赛。如果是，您可以将其写为：

```
SELECT * FROM table1 
   WHERE 8 <= Col2 
   ORDER BY Col2 ASC
   LIMIT 1 
```

这将为您提供最低值`Col2`高于 8 的行 - 这是您感兴趣的范围。该索引仅在 上需要`Col2`，并且成本应该很小。

由于您没有提及您正在使用的 DBMS，因此`LIMIT 1`应将其替换为您的 DB 用于获取前 N 个结果的任何内容。

您必须检查`Col1 <= your_value`代码以确保您要查找的值确实在该范围内。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T22:04:10.910

我想我已经找到了答案。我必须首先在 Col1 上创建唯一聚集索引，然后在 Col2 上创建唯一非聚集索引。然后必须更新查询以强制对每个索引进行查找。

```
select * from table1 where Col1 = 
    (select max(Col1) from table1 where Col1 <= 8)
and Col2 = 
    (select min(Col2) from table1 where Col2 >= 8) 
```

执行计划现在报告 0.0098 成本和 1 行已处理。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T15:12:45.360

```
select * from table1 where Col1 <= 8 and Col2 >= 8 
```

也许两列的“之间”会导致问题。

此外，您应该在两列（Col1、Col2）上只有 1 个复合索引。

# emacs - 从 Emacs CEDET/semantic 中的键盘自动完成

> ID：12957786
> 
> 赞同：5
> 
> 时间：2012-10-18T15:05:43.803
> 
> 标签：emacs, autocomplete, cedet

在 CEDET 语义中寻找不同的完成方法（[来自 Bazaar 存储库的新版本](http://cedet.sourceforge.net/bzr-repo.shtml)），我看到我有以下选项（Alex Ott 在[他的配置文件](https://github.com/alexott/emacs-configs/blob/master/rc/emacs-rc-cedet.el)中建议的键盘绑定）

*   `C-c ?`( `semantic-ia-complete-symbol`)
*   `C-return`( `semantic-ia-complete-symbol-menu`)
*   `C-c , l`( `semantic-analyze-possible-completions`)

但是，它们似乎都没有让我**选择使用****键盘**方便地在可能的完成之间进行选择。

例如， ( `semantic-ia-complete-symbol-menu`) 打开一个菜单，我可以在其中选择不同的选项，但据我所知，它需要我使用鼠标（我试图`C-n, C-p, M-n, M-p`导航菜单但没有成功）。

另一方面 ( `semantic-ia-complete-symbol`) 打开另一个带有选项的缓冲区。我也可以使用鼠标来选择所需的自动完成，但我想使用键盘来代替。

此外，在 CEDET 的早期版本中，有一个变量 ( `semantic-complete-inline-analyzer-displayor-class`) 允许我在多个自动完成选项之间进行选择（例如 ( `semantic-displayor-ghost`)，或者更优雅的覆盖作为**工具提示**），但这个变量似乎不再存在。

以防万一，我主要使用 C++ 文件。

## 更新：

似乎允许我循环浏览自动完成的唯一方法是`C-c , space`( `semantic-complete-analyze-inline`)，我可以使用`TAB`它来自动完成，但它没有显示可供我选择的可能自动完成的**菜单。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T13:28:05.793

在 CEDET 的新版本中，建议使用自动完成或类似的包。您可以添加`ac-semantic`到`ac-sources`，然后自动完成将使用语义作为完成的数据源。新版本的 Emacs/CEDET 文章，提到了这个设置并显示了必要的代码。请尝试一下

# java - JSF 特立尼达 selectOneChoice UI 组件

> ID：12957789
> 
> 赞同：1
> 
> 时间：2012-10-18T15:05:55.320
> 
> 标签：java, jsf, trinidad

这是我的 .xhtml 文件

```
<tr:selectOneChoice >
   <f:selectItems value="#{bean.items}"/>
</tr:selectOneChoice> 
```

我希望能够识别客户端的不同选项。在我的支持 bean 中，每个选项都有布尔值。

是否可以在客户端实际识别这些选项？

bean 代码如下所示：

```
public List<SelectItem> getItems(Menu menu) {
    List<SelectItem> list = new ArrayList();
    SelectItem selectItem = new SelectItem(new MyObj("some string",false), "label");
    list.add(selectItem);
    return list;
} 
```

MyObj 类包含我希望能够在客户端看到的标志。

有人知道怎么做吗？

谢谢 ，

约翰。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T08:44:34.750

为什么不创建一个`List`of `MyObj`，遍历列表并使用`itemDisabled`on 属性`f:selectItem`。

```
<tr:selectOneChoice>
  <tr:forEach items="#{bean.myObjList}" var="myObj">
    <f:selectItem itemLabel="#{myObj.label}"
                  itemValue="#{myObj.value}"
                  itemDisabled="#{myObj.flag}"/>
  </tr:forEach>
</tr:selectOneChoice> 
```

# java - android更好的保存图像选项？

> ID：12957793
> 
> 赞同：2
> 
> 时间：2012-10-18T15:06:16.503
> 
> 标签：java, android

目前我正在使用压缩方法将使用android手机上的相机硬件拍摄的图像保存到SD卡。

```
try {
BitmapFactory.Options options=new BitmapFactory.Options();
options.inSampleSize = 10;
Bitmap myImage = BitmapFactory.decodeByteArray(imageData, 0,
imageData.length,options);

fileOutputStream = new FileOutputStream(
sdImageMainDirectory.toString() +"/"+fileName+".png");

BufferedOutputStream bos = new BufferedOutputStream(
fileOutputStream); 
myImage.compress(CompressFormat.PNG, 100, bos);
bos.flush();
bos.close(); 
```

现在这工作得很好，但是，它保存的图像质量几乎不值得一开始就拍照。我正在寻找一种更好的方法来以更高的质量保存图片。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T15:23:26.310

```
options.inSampleSize = 10; 
```

这是您的质量损失：这将创建一个 1/10 英寸的`heigth`图像`width`

从文档：

> 如果设置为大于 1 的值，则请求解码器对原始图像进行二次采样，返回较小的图像以节省内存。样本大小是对应于解码位图中的单个像素的任一维度中的像素数。例如， inSampleSize == 4 返回的图像是原始宽度/高度的 1/4，像素数的 1/16。任何 <= 1 的值都被视为 1。注意：解码器将尝试满足此请求，但生成的位图可能具有与所请求的尺寸不同的尺寸。此外，2 的幂通常更快/更容易让解码器兑现。

# javascript - 使用 jquery 切换 div

> ID：12957798
> 
> 赞同：-1
> 
> 时间：2012-10-18T15:06:29.403
> 
> 标签：javascript, jquery, html, ajax, jquery-ui

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"></script>
<script type="text/javascript" language="javascript">

// when the document has finished loading, get the data
$(document).ready(GetData());

function GetData() {

    $.ajax({
        beforSend: function () {
            $('#loadingDiv').css('display', 'block')
        },
        complete: function () {
            $('#loadingDiv').css('display', 'none')
        },
        type: "GET",
        url: "/Integrationsonify/Data.aspx",
        data: dataObject,
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function (data) {

            var header = $("#accordion");

            $.each(data, function () {

                header.append("<a href='javascript:toggleDiv();'>" + this.Name + " </a>", "<div id='myContent' style='display:none'>" + "<ul>", "<li>" + this.Id + "</li>", "<li>" + this.SName + "</li>", "</ul>" + "</div");

            });
        },
        error: function () {
            alert("There was an error while rendering the page. Please contact the Admin for details");
        }

    });

   }
   function toggleDiv() {

                  $("#myContent").toggle();

   }

</script>
<div id="loadingDiv" style="display: block;">
    hi
</div>
<div id="accordion">

</div> 
```

我无法切换 myContent div ..是因为它是在 ajax 调用中创建的吗？显示了 div，但是如果我为页面做一个查看源，我在手风琴 div 中看不到任何数据..但是在浏览器的 ui 端，我至少可以看到数据..谢谢，我很抱歉，我知道它是非常基本的问题，但我现在需要尽快找到解决方法，所以请指导我......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T15:22:29.057

使用`beforeSend`而不是`beforSend`. 你应该使用`hide()`and`show()`来隐藏/显示你的 div，它更清晰。

**编辑 ：**

我不知道您期望什么数据，因此我无法真正帮助您，但请尝试以这种方式调试它：

*   如果您使用的是 chrome，请右键单击页面上的任意位置，然后单击“检查此元素”（或类似的 smthg）
*   如果您在 firefox 中，请下载 firebug 扩展
*   如果您在 IE 中，请下载以前的浏览器之一

你会在网上找到一些用这个工具调试js的方法，如果你做很多js会很有帮助。

只是一个建议，当你使用 jQuery 时尝试以这种方式插入 HTML，它的可读性更高，你可以调试它：

```
header.append(
    $('<a/>').click(function() {
        toggleDiv();
        return false;
    }),
    $('<div id="myContent"/>').hide().append(
        $('<ul/>').append(
            $('<li/>').text(this.Id),
            $('<li/>').text(this.SName)
        )
    )
); 
```

**编辑 2：**

抱歉，我没有仔细考虑，应该是：

```
$('<a/>').click(function() {
    toggleDiv($(this));
    return false;
}) 
```

在您的 toggleDiv 函数中：

```
function toggleDiv ($elem) {
    $elem.next().toggle();
} 
```

我认为这会奏效

**编辑 3：**

当然你应该放`$('<div class="myContent"/>')`，因为 HTML 规范禁止具有相同 id 的多个元素。然后，您的选择器变为`$('.myContent')`并返回多个元素

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T15:23:56.140

I just replaces (,) with (+) and it started working ..weird!!!

# php - 如何在没有 html 的情况下解析 curl 响应？

> ID：12957800
> 
> 赞同：0
> 
> 时间：2012-10-18T15:06:38.077
> 
> 标签：php, curl, html-parsing

所以我从 curl 得到的响应是`<body>`.

它以标签开头而`<input >`不是`<html><head><body>`.

我该如何解析它？我试过 simple_html_dom 没有结果，我应该改用正则表达式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T15:10:54.173

尝试使用[DOMDocument](http://php.net/manual/en/class.domdocument.php)对象，该`loadHTML`方法应该接受 html 片段并为您进行解析。

```
$doc = new DOMDocument;
$doc->loadHtml($fragment);
$html = $doc->saveHTML(); 
```

注意通过解析格式错误的 html 生成的潜在警告。

# python - Matplotlib 在框架内放置文本，例如字幕

> ID：12957801
> 
> 赞同：27
> 
> 时间：2012-10-18T15:06:44.223
> 
> 标签：python, matplotlib, title

到目前为止，我已将字幕放在框架上方，如下所示：

![在此处输入图像描述](../Images/ea92bbbf10bf4cea0f9d996a74f22c03.png)

如何将框架**上方的字幕****放入框架中？**

到目前为止，我有一个解决方案，它只打印一个文本并通过计算 xlim 和 ylim 将其设置在正确的位置。然而，这很容易出错，如果文本不同，它看起来很糟糕。有没有办法将附加标签设置到框架中？或者只是将文本放在框架下方并居中？如果我不需要知道框架内显示的数据，那将非常方便。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-10-18T16:01:09.960

您使用的解决方案`text`也是我的首选解决方案。但是，您不需要根据 xlim 和 ylim 计算位置。如果您设置`transform=ax.transAxes`用于定位的坐标，则文本将被视为相对于轴边界框（0,0 是左下角）。像这样：

```
data = range(1,10);
fig = figure()
for i in range(6):
    ax = fig.add_subplot(2,3,i)

    ax.text(.5,.9,'centered title',
        horizontalalignment='center',
        transform=ax.transAxes)

    ax.plot(data)
show() 
```

![绘图显示相对于轴边界框的文本。](../Images/c1a810878a844a33599fd345d89f4ab2.png)

希望有帮助！

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2012-10-18T16:01:31.473

你考虑过`axes.title`吗？[您可以在此处](http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.title)查看它的文档。您还可以将 x 和 y 坐标作为关键字参数传递`ax.title("my title", x=0.5, y=0.6)`。

希望这可以帮助。

# ruby-on-rails - 为什么在开发中预编译 Rails javascript 资产？

> ID：12957804
> 
> 赞同：0
> 
> 时间：2012-10-18T15:06:56.880
> 
> 标签：ruby-on-rails, sprockets

我在开发中编译 js 文件时遇到问题。

我有一个 application.js 文件，其中包含多个其他文件，如下所示：

```
//=require_tree . 
```

目录中的文件是

```
app/assets/javascripts/user_row.coffee
app/assets/javascripts/index.coffee 
```

每当我对其中一个文件进行更改时，都会在 app/assets/javascripts 目录中创建相应的 js 文件，因此我更改了 user_row.coffee 并得到：

```
app/assets/javascripts/user_row.js 
```

这是在开发模式下，具有默认资产配置（我没有从 rails 生成器创建的 development.rb 更改）。

如果我再次更改 user_row.coffee 文件，它会被忽略，并且已经存在的 js 文件会包含在 application.js 中。

我不明白为什么这些 js 文件是在 app/assets/javascript 目录中创建的，而不是在 tmp/cache/...

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T15:44:15.173

您应该命名咖啡文件`name.js.coffee`，而不仅仅是`name.coffee`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T04:51:05.270

事实证明这是节点 v0.8.9 的问题。我使用 node 作为 javascript 运行时，从 v0.8.9 更新到 v0.8.16 后，问题就消失了。

# objective-c - 由于将消息发送到已释放的实例，导航栏中的标题崩溃

> ID：12957807
> 
> 赞同：-1
> 
> 时间：2012-10-18T15:07:01.327
> 
> 标签：objective-c, ios, memory-management

我有以下代码`viewDidLoad`（在导航栏中设置标题）因“发送到已释放实例的消息”错误而崩溃：

```
UILabel * label = [[[UILabel alloc] initWithFrame:CGRectMake(0,0,45,45)] autorelease];

label.textColor = [UIColor whiteColor];
label.backgroundColor=[UIColor clearColor];
label.font = [UIFont boldSystemFontOfSize:20];
label.font = [UIFont fontWithName:@"Mayfield Regular" size:15];
self.navigationItem.titleView = label;

label.text=@"SEARCH"; //CUSTOM TITLE
[label sizeToFit];
[label release]; 
```

我该如何解决这个问题？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T15:09:54.770

```
UILabel * label = [[[UILabel alloc] initWithFrame:CGRectMake(0,0,45,45)] autorelease]; 
```

而不是释放

```
[label release]; 
```

这显然是错误的。您要么使用自动发布，要么使用发布。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T15:10:04.817

您正在过度释放标签。你打电话给`autorelease`你发布的第一行，然后你也打电话给`release`你发布的最后一行。只做其中之一。

# playorm - 当我的映射类位于单独的 jar 文件中时，playorm 启动异常

> ID：12957815
> 
> 赞同：1
> 
> 时间：2012-10-18T15:07:28.180
> 
> 标签：playorm

当我在同一个项目中运行我的 playOrm junit 测试时，我有 nosql.Persistence 类（以及我的映射实体）它运行良好。但是，我需要使用我的 DAO 和我的 find 方法将我的实体打包到一个 jar 文件中。当我从其他项目中使用这个 dao 时，我得到了下面的异常。

没有线索。关于从哪里开始寻找的任何想法？

```
java.lang.RuntimeException: Failure scanning class(see chained exception)=class com.alvazan.orm.api.z8spi.meta.DboTableMeta
    at com.alvazan.orm.layer0.base.MyClassAnnotationDiscoveryListener.scanClass(MyClassAnnotationDiscoveryListener.java:44)
    at com.alvazan.orm.layer0.base.MyClassAnnotationDiscoveryListener.discovered(MyClassAnnotationDiscoveryListener.java:34)
    at com.impetus.annovention.Discoverer.discoverAndIntimateForClassAnnotations(Discoverer.java:197)
    at com.impetus.annovention.Discoverer.discover(Discoverer.java:155)
    at com.alvazan.orm.layer0.base.BaseEntityManagerFactoryImpl.rescan(BaseEntityManagerFactoryImpl.java:80)
    at com.alvazan.orm.layer0.base.BaseEntityManagerFactoryImpl.setup(BaseEntityManagerFactoryImpl.java:131)
    at com.alvazan.orm.impl.bindings.BootstrapImpl.createInstance(BootstrapImpl.java:51)
    at com.alvazan.orm.api.base.Bootstrap.create(Bootstrap.java:53)
    at com.alvazan.orm.api.base.Bootstrap.create(Bootstrap.java:48)
    at com.alvazan.orm.api.base.Bootstrap.create(Bootstrap.java:45)
    at com.alvazan.orm.api.base.Bootstrap.create(Bootstrap.java:41)
    at com.s1mbi0se.dmp.da.dao.PlayOrmConfiguration.init(PlayOrmConfiguration.java:40)
    at com.s1mbi0se.dmp.da.dao.PlayOrmConfiguration.getEntityManager(PlayOrmConfiguration.java:46)
    at com.s1mbi0se.dmp.da.dao.AbstractDao.getEm(AbstractDao.java:10)
    at com.s1mbi0se.dmp.da.dao.UserDao.insertOrUpdateUser(UserDao.java:15)
    at com.s1mbi0se.dmp.module.UserModule.persistData(UserModule.java:101)
    at com.s1mbi0se.dmp.processor.mapred.SelectorReducer.reduce(SelectorReducer.java:55)
    at com.s1mbi0se.dmp.processor.mapred.SelectorReducer.reduce(SelectorReducer.java:1)
    at org.apache.hadoop.mapreduce.Reducer.run(Reducer.java:176)
    at org.apache.hadoop.mapred.Task$NewCombinerRunner.combine(Task.java:1502)
    at org.apache.hadoop.mapred.MapTask$MapOutputBuffer.sortAndSpill(MapTask.java:1436)
    at org.apache.hadoop.mapred.MapTask$MapOutputBuffer.flush(MapTask.java:1298)
    at org.apache.hadoop.mapred.MapTask$NewOutputCollector.close(MapTask.java:699)
    at org.apache.hadoop.mapred.MapTask.runNewMapper(MapTask.java:766)
    at org.apache.hadoop.mapred.MapTask.run(MapTask.java:370)
    at org.apache.hadoop.mapred.LocalJobRunner$Job.run(LocalJobRunner.java:212)
Caused by: com.google.inject.ProvisionException: Guice provision errors:

1) Error injecting constructor, java.lang.ExceptionInInitializerError
  at com.alvazan.orm.impl.meta.data.MetaClassSingle.<init>(MetaClassSingle.java:22)
  while locating com.alvazan.orm.impl.meta.data.MetaClassSingle

1 error
    at com.google.inject.internal.InjectorImpl$4.get(InjectorImpl.java:987)
    at com.alvazan.orm.impl.meta.data.MetaInfo.findOrCreate(MetaInfo.java:60)
    at com.alvazan.orm.impl.meta.scan.ScannerForClass.addClass(ScannerForClass.java:57)
    at com.alvazan.orm.layer0.base.MyClassAnnotationDiscoveryListener.scanClass(MyClassAnnotationDiscoveryListener.java:42)
    ... 25 more
Caused by: java.lang.ExceptionInInitializerError
    at com.alvazan.orm.impl.meta.data.MetaAbstractClass.<init>(MetaAbstractClass.java:17)
    at com.alvazan.orm.impl.meta.data.MetaClassSingle.<init>(MetaClassSingle.java:22)
    at com.alvazan.orm.impl.meta.data.MetaClassSingle$$FastClassByGuice$$29abb300.newInstance(<generated>)
    at com.google.inject.internal.cglib.reflect.$FastConstructor.newInstance(FastConstructor.java:40)
    at com.google.inject.internal.DefaultConstructionProxyFactory$1.newInstance(DefaultConstructionProxyFactory.java:60)
    at com.google.inject.internal.ConstructorInjector.construct(ConstructorInjector.java:85)
    at com.google.inject.internal.ConstructorBindingImpl$Factory.get(ConstructorBindingImpl.java:254)
    at com.google.inject.internal.InjectorImpl$4$1.call(InjectorImpl.java:978)
    at com.google.inject.internal.InjectorImpl.callInContext(InjectorImpl.java:1024)
    at com.google.inject.internal.InjectorImpl$4.get(InjectorImpl.java:974)
    ... 28 more
Caused by: java.lang.ClassCastException: com.alvazan.orm.api.z8spi.meta.TypedRow_$$_javassist_0 cannot be cast to javassist.util.proxy.Proxy
    at com.alvazan.orm.api.z8spi.meta.DboTableMeta.testInstanceCreation(DboTableMeta.java:93)
    at com.alvazan.orm.api.z8spi.meta.DboTableMeta.<clinit>(DboTableMeta.java:84)
    ... 38 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T15:31:00.320

您遇到了某种类加载问题。创建 NoSqlEntityManagerFactory 时可能需要传入类加载器。你在这里处理这段代码

```
static {
    ProxyFactory f = new ProxyFactory();
    f.setSuperclass(TypedRow.class);
    f.setInterfaces(new Class[] {NoSqlTypedRowProxy.class});
    f.setFilter(new MethodFilter() {
        public boolean isHandled(Method m) {
            // ignore finalize()
            if(m.getName().equals("finalize"))
                return false;
            else if(m.getName().equals("equals"))
                return false;
            else if(m.getName().equals("hashCode"))
                return false;
            return true;
        }
    });
    Class clazz = f.createClass();
    testInstanceCreation(clazz);

    typedRowProxyClass = clazz;

    NAME_PATTERN = Pattern.compile("[a-zA-Z_][a-zA-Z_0-9]*");
}

private static Proxy testInstanceCreation(Class<?> clazz) {
    try {
        Proxy inst = (Proxy) clazz.newInstance();
        return inst;
    } catch (InstantiationException e) {
        throw new RuntimeException("Could not create proxy for type="+clazz, e);
    } catch (IllegalAccessException e) {
        throw new RuntimeException("Could not create proxy for type="+clazz, e);
    }
} 
```

注意它位于静态初始化块中，因此将运行一次，并且此代码在正常情况下始终有效。例如，如果您有一个在一个 ClassLoader 中创建的 Car 类，并且在另一个类加载器中创建了同一个 Car 类，您实际上可以像这样 (Car)car 进行强制转换并获得一个 classCastException，因为该汽车是一个 Car类加载器不是其他类加载器的 Car。

好的，所以第 1 步是在创建 NoSqlEntityManagerFactory 时尝试传入您自己的类加载器，这样您就知道正在使用哪个类加载器。查看我上面的代码，我不确定哪个类加载器正在创建代理，所以我需要检查它以确保它是同一个类加载器。

一个大问题是 hadoop 是否已经在使用另一个类加载器中加载的 javassist，或者您是否将 javassist 作为 mapreduce 作业的一部分发送？

编辑：好的，另外，您还需要为 javassist 设置线程 Context Loader....我将在 PlayOrm 中修复此问题，因此在下一个版本中您不必...现在执行此操作

1.  调用 Thread.currentThread.setContextClassLoader(yourClassloader)
2.  调用 Bootstrap.create 并将其传递给 SAME 类加载器
3.  验证 javassist 是从同一个类加载器加载的

这是我找到关于哪个类加载器 javassist 正在使用的信息供您参考的代码

```
 protected ClassLoader getClassLoader0() {
591         ClassLoader loader = null;
592         if (superClass != null && !superClass.getName().equals("java.lang.Object"))
593             loader = superClass.getClassLoader();
594         else if (interfaces != null && interfaces.length > 0)
595             loader = interfaces[0].getClassLoader();
596  
597         if (loader == null) {
598             loader = getClass().getClassLoader();
599             // In case javassist is in the endorsed dir
600             if (loader == null) {
601                 loader = Thread.currentThread().getContextClassLoader();
602                 if (loader == null)
603                     loader = ClassLoader.getSystemClassLoader();
604             }
605         }
606 
607         return loader;
608     } 
```

院长

# javascript - IE9中未定义的jQuery选择框val

> ID：12957818
> 
> 赞同：0
> 
> 时间：2012-10-18T15:07:41.933
> 
> 标签：javascript, jquery

我现在面临一个超过 2 小时的错误。我有一个 javascript 代码（从 json 生成）任务和子任务的两级选择框。

我只是发现这段代码不适用于 IE9 和其他版本，我无法找出原因。

我创建了一个 JsFiddle 来向您展示我的代码 [http://jsfiddle.net/jkU6Y/18/](http://jsfiddle.net/jkU6Y/18/)

目标只是找到要通过 ajax 发送的子任务 ID，或者如果未选择子任务，则找到任务 ID。

在 IE 上，我无法获取此值，它返回未定义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T09:26:32.030

我清理了我的代码，现在它可以工作了，所以我认为问题出在这样一个事实，即两个或多个元素在某些情况下可能具有相同的 ID。

感谢您的帮助 cbayram 和 Jan Dvorak，祝您有美好的一天！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T15:21:21.990

document.write 不会注册您在 IE 中使用 DOM 编写的 HTML。尝试将其附加到正文：

```
$("body").append($(html)); 
```

# javascript - 如何在 TypeScript 项目中重用现有的 C# 类定义

> ID：12957820
> 
> 赞同：129
> 
> 时间：2012-10-18T15:07:46.300
> 
> 标签：javascript, typescript

我将开始`TypeScript`在我的 HTML 客户端项目中使用，该项目属于 MVC 项目，并且已经存在实体框架域模型。我希望我的两个项目（客户端和服务器端）完全分开，因为两个团队将为此工作...... JSON 和 REST 用于来回通信对象。

当然，我`domain`在客户端的对象应该与服务器端的对象匹配。过去，我通常手动完成此操作。有没有办法重用我的 C# 类定义（特别是`POJO`我的域模型中的类）来在 TypeScript 中创建相应的类？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-10-18T16:27:06.960

目前没有任何东西可以将 C# 映射到 TypeScript。如果您有很多 POCO，或者您认为它们可能会经常更改，您可以创建一个转换器 - 一些简单的...

```
public class MyPoco {
    public string Name { get; set; }
} 
```

至

```
export class MyPoco {
    public Name: string;
} 
```

Codeplex 上也有[关于从 C# 自动生成](https://typescript.codeplex.com/discussions/406685)的讨论。

为了保持更新，TypeLite 可以从 C# 生成 TypeScript 接口：

[http://type.litesolutions.net/](http://type.litesolutions.net/)

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2014-06-18T15:33:01.630

[Web Essentials](http://vswebessentials.com/features/typescript)允许`.d.ts`在保存时将 C# 文件编译为 TypeScript 文件。`.ts`然后你可以从你的文件中引用定义。

![在此处输入图像描述](../Images/58dd737f9da49647c3483234c588adcd.png)

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2016-10-04T19:30:24.153

如果你使用 vscode，你可以使用我的扩展[csharp2ts](https://marketplace.visualstudio.com/items?itemName=rafaelsalguero.csharp2ts)，它就是这样做的。

您只需选择粘贴的 C# 代码并`Convert C# to TypeScript`从命令面板运行命令 [![在此处输入图像描述](../Images/1a29e4011443746eb2e1cb2e31e56bea.png)](https://i.stack.imgur.com/OOk1R.gif) 转换示例：

```
public class Person
{
    /// <summary>
    /// Primary key
    /// </summary>
    public int Id { get; set; }

    /// <summary>
    /// Person name
    /// </summary>
    public string Name { get; set; }
} 
```

至

```
export interface Person
{
    /**Primary key */
    Id : number;

    /**Person name */
    Name : string;
} 
```

* * *

## 回答 #4

> 赞同：27
> 
> 时间：2013-04-10T21:36:38.590

上面的 TypeLite 和 T4TS 看起来都不错，刚刚选了一个，TypeLite，分叉了它以获得支持

*   **值类型**，
*   **可空值**
*   **camelCasing**（TypeScript 根文档使用骆驼，这与 C# 一起使用太好了）
*   **公共字段**（喜欢干净和可读的 POCO，也使 C# 编译器变得容易）
*   **禁用模块生成**

然后我需要 C#**接口**，并认为是时候烘焙我自己的东西并编写了一个简单的 T4 脚本来满足我的需要。它还包括**Enums**。无需回购，只需 < 100 行 T4。

**用法**
没有库，没有 NuGet，只有这个简单的 T4 文件 - 在 Visual Studio 中使用“添加项目”并选择任何 T4 模板。然后将其粘贴到文件中。用“ACME”调整每一行。为每个 C# 类添加一行

```
<#= Interface<Acme.Duck>() #> 
```

顺序很重要，任何已知类型都将用于以下接口。如果您只使用接口，则文件扩展名可以是*.d.ts*，对于枚举，您需要一个*.ts*文件，因为实例化了一个变量。

**定制**
破解脚本。

```
<#@ template debug="true" hostSpecific="true" language="C#" #>
<#@ output extension=".ts" #>
<#@ Assembly Name="System.Core.dll" #>
<#@ assembly name="$(TargetDir)ACME.Core.dll" #>
<#@ import namespace="System" #>
<#@ import namespace="System.Reflection" #>
<#@ import namespace="System.Collections.Generic" #>
<#@ import namespace="System.Text" #>
<#@ import namespace="System.Linq" #>

<#= Interface<Acme.Bunny>() #>
<#= Interface<Acme.Duck>() #>
<#= Interface<Acme.Birdy>() #>
<#= Enums<Acme.CarrotGrade>() #>
<#= Interface<Acme.LinkParticle>() #>

<#+  
    List<Type> knownTypes = new List<Type>();

    string Interface<T>()
    {   
        Type t = typeof(T);     
        var sb = new StringBuilder();
        sb.AppendFormat("interface {0} {{\n", t.Name);
        foreach (var mi in GetInterfaceMembers(t))
        {
            sb.AppendFormat("  {0}: {1};\n", this.ToCamelCase(mi.Name), GetTypeName(mi));
        }
        sb.AppendLine("}");
        knownTypes.Add(t);
        return sb.ToString();
    }

    IEnumerable<MemberInfo> GetInterfaceMembers(Type type)
    {
        return type.GetMembers(BindingFlags.Public | BindingFlags.Instance)
            .Where(mi => mi.MemberType == MemberTypes.Field || mi.MemberType == MemberTypes.Property);
    }

    string ToCamelCase(string s)
    {
        if (string.IsNullOrEmpty(s)) return s;
        if (s.Length < 2) return s.ToLowerInvariant();
        return char.ToLowerInvariant(s[0]) + s.Substring(1);
    }

    string GetTypeName(MemberInfo mi)
    {
        Type t = (mi is PropertyInfo) ? ((PropertyInfo)mi).PropertyType : ((FieldInfo)mi).FieldType;
        return this.GetTypeName(t);
    }

    string GetTypeName(Type t)
    {
        if(t.IsPrimitive)
        {
            if (t == typeof(bool)) return "bool";
            if (t == typeof(char)) return "string";
            return "number";
        }
        if (t == typeof(decimal)) return "number";            
        if (t == typeof(string)) return "string";
        if (t.IsArray)
        {            
            var at = t.GetElementType();
            return this.GetTypeName(at) + "[]";
        }
        if(typeof (System.Collections.IEnumerable).IsAssignableFrom(t)) 
        {
            var collectionType = t.GetGenericArguments()[0]; // all my enumerables are typed, so there is a generic argument
            return GetTypeName(collectionType) + "[]";
        }            
        if (Nullable.GetUnderlyingType(t) != null)
        {
            return this.GetTypeName(Nullable.GetUnderlyingType(t));
        }
        if(t.IsEnum) return "number";
        if(knownTypes.Contains(t)) return t.Name;
        return "any";
    }

    string Enums<T>() // Enums<>, since Enum<> is not allowed.
    {
        Type t = typeof(T);        
        var sb = new StringBuilder();        
        int[] values = (int[])Enum.GetValues(t);
        sb.AppendLine("var " + t.Name + " = {");
        foreach(var val in values) 
        {
            var name = Enum.GetName(typeof(T), val);
            sb.AppendFormat("{0}: {1},\n", name, val);
        }
        sb.AppendLine("}");
        return sb.ToString();
    }
#> 
```

脚本的下一个级别是从 MVC JsonController 类创建服务接口。

* * *

## 回答 #5

> 赞同：19
> 
> 时间：2013-03-12T09:36:15.497

这是我解决它的方法。使用属性声明您的 C# 类，然后将生成 .d.ts 文件（使用 T4 转换）。[nuget 上](http://nuget.org/packages/T4TS)有一个包，源代码[在 github 上可用](https://github.com/cskeppstedt/t4ts)。我仍在从事该项目，但支持非常广泛。

* * *

## 回答 #6

> 赞同：19
> 
> 时间：2015-12-31T09:57:45.483

如果您使用的是 Visual Studio，请添加 Typewriter 扩展。

[Visual Studio 画廊](https://visualstudiogallery.msdn.microsoft.com/e1d68248-f30e-4a5d-bf18-31399a0bcfa6)

[网站/文档](http://frhagn.github.io/Typewriter/index.html)

**更新**

在VS 2015 中安装[Web Essentials](http://vswebessentials.com/)后，您可以右键单击类文件，然后从上下文菜单 > Web Essentials > 创建 Typescript Intellisense 文件。

* * *

## 回答 #7

> 赞同：17
> 
> 时间：2016-01-14T11:00:30.590

试试 Reinforced.Typings 框架。似乎它解决了你的问题。

1.  [从NuGet](https://www.nuget.org/packages/Reinforced.Typings/)安装它
2.  导航到您的 POCO 并在`[TsInterface]`其上方添加属性

    ```
    using Reinforced.Typings.Attributes;
    namespace YourNamespace {
        [TsInterface]
        public class YourPoco
        {
            public int YourNumber { get;set; }
            public string YourString { get;set; }
            public List<string> YourArray { get;set; }
            public Dictionary<int, object> YourDictionary { get;set; }
        }
    } 
    ```

3.  重建你的项目
4.  在文件中找出生成的 TypeScript 代码`%Your_Project_Directory%/Scripts/project.ts`并将其手动添加到项目中

    ```
    module YourNamespace {
        export interface IYourPoco
        {
            YourNumber: number;
            YourString: string;
            YourArray: string[];
            YourDictionary: { [key: int]: any };
        }
    } 
    ```

5.  对所有 POCO 执行相同的操作，并`project.ts`在其他 TypeScript 代码中引用。

[在文档 wiki](https://github.com/reinforced/Reinforced.Typings/wiki)中查看更多详细信息

* * *

## 回答 #8

> 赞同：10
> 
> 时间：2013-03-19T19:59:24.227

我创建了一个小实用程序，可以从 C# 类生成 TypeScript 接口。以[NuGet 包](https://nuget.org/packages/TypeLite)的形式提供。详细文档可以在[项目网页上](http://type.litesolutions.net/)找到。

* * *

## 回答 #9

> 赞同：9
> 
> 时间：2016-10-21T20:06:32.663

请看看这个图书馆[打字机](http://frhagn.github.io/Typewriter/pages/examples.html)

它不仅可以转换类、枚举、接口等，还可以转换 api-controllers，这简直太棒了..

另外，只要您保存源 .cs 文件，它就会这样做，因此我不必触发任何外部工具。保存 .cs 即可获得更新的 .ts

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2013-02-01T01:11:53.473

I have a little solution which uses T4 templates ([view source](https://bitbucket.org/JamesDiacono/jdiacono/src/tip/JDiacono/TypeScript)).

You go from any CLR POCO:

```
public class Parent : Person
{
    public string Name { get; set; }
    public bool? IsGoodParent { get; set; }
    public virtual ICollection<Child> Children { get; set; }
} 
```

To a TypeScript interface:

```
///<reference path="Child.d.ts" />
///<reference path="Person.d.ts" />
interface Parent extends Person {
    Name : string;
    IsGoodParent? : bool;
    Children : Child[];
} 
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2016-11-01T17:38:43.483

如果您需要为每个生成的 TypeScript 类/接口创建一个单独的文件（即以“每个文件一个类”的方式），您可以尝试[TypeGen](https://www.nuget.org/packages/TypeGen/)。它是一个工具，你可以从包管理器控制台使用它来根据你的 C# 类/枚举生成 TypeScript 文件。目前支持：

*   导出枚举；将 POCO 导出为 TS 类或接口
*   遗产
*   泛型类型
*   集合/嵌套集合类型

加上一些额外的功能。它也是开源的（你可以在[github](https://github.com/jburzynski/TypeGen)上查看）。

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2016-07-28T11:05:31.120

你也可以使用这个：[https ://github.com/pankleks/TypeScriptBuilder](https://github.com/pankleks/TypeScriptBuilder)

这个小库基于 C# 类型生成 TypeScript 类型定义。直接在您的后端 C# 项目中使用它来为您的前端 TypeScript 项目生成代码。您还可以编写小型控制台应用程序，通过预构建工具生成代码。

**适用于完整和 NET Core 框架！**

通过 nuget 安装： `Install-Package TypeScriptBuilder`

## 支持的功能

*   解决类型依赖
*   泛型
*   类型继承
*   命名空间（模块）
*   枚举
*   可空类型
*   字典转换（到强类型 TS 索引对象）
*   代码生成控制属性集
*   `any`对于无法转换的类型

更多描述：[https ://github.com/pankleks/TypeScriptBuilder/blob/master/README.md](https://github.com/pankleks/TypeScriptBuilder/blob/master/README.md)

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2015-11-03T08:47:47.660

您可以使用开源项目[NSwag](http://nswag.org)：在 GUI 中，您可以从现有的 .NET DLL 中选择 .NET 类并为其生成 TypeScript 接口。

该项目还提供命令行工具和对 T4 模板的支持以及为 Web API 控制器生成客户端代码...

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2014-06-11T01:42:44.777

反过来呢？

查看[errecruit TypeScript Translator](https://github.com/erecruit/TsT)。它带有随时可用的 C# 支持，但实际上是基于模板的（使用 Nunjucks 进行渲染），这意味着它可以生成其他任何东西——VB.NET、F#、C++、XML、SQL——任何你可以用模板编码的东西。

可用作 .NET 控制台程序、NodeJS 程序（适用于那些不在 Windows 上的程序）或[Visual Studio 扩展](http://visualstudiogallery.msdn.microsoft.com/c61f8a99-cc0b-4b2e-8913-f00626c92a21)，并具有生成时保存功能。并包括 MSBuild 支持，只是为了让您的构建服务器满意。:-)

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2015-12-18T15:56:35.233

伙计们看看[https://github.com/ Enhanced/](https://github.com/reinforced/) **Reinforced.Typings**。过去几天我一直在玩 typelite 和 t4 模板，最终完成了这个项目。它超级简单，就像一个魅力。直接拿到包，修改配置文件（大概10秒），build。一切都会自动完成，没有任何问题。祝福作者！

T4 模板的坏处在于，一旦您从 VS 构建，扫描的程序集就会被锁定，您必须重新启动 VS（这有多傻？）。T4 Toolbox + 一些 VS 清理指令中有一些解决方法，但这些都不适合我。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2016-02-25T11:15:52.203

我喜欢citykid的解决方案。我把它延长了一点。因此，解决方案也是基于 T4 模板的代码生成技术。

它可以生成常见的 TypeScript 类型和环境声明。

它支持继承和接口实现。

支持泛型、数组和列表作为类型字段。

它还转换为配置中未明确提及的 TypeScript 类型（例如，我们导入类型 A，在 TS 输出中您可以找到一些其他类型：字段类型、基本类型和接口）。

您还可以覆盖类型的名称。

也支持枚举。

使用示例（您可以在项目存储库中找到它）：

```
// set extension of the generated TS file
<#@ output extension=".d.ts" #>

// choose the type of TS import TsMode.Ambient || TsMode.Class
<# var tsBuilder = new TsBuilder(TsMode.Ambient); #>

// reference assembly with the c# types to be transformed
<#@ assembly name="$(SolutionDir)artifacts\...\CsT4Ts.Tests.dll" #>

// reference namespaces
<#@ import namespace="CsT4Ts.Tests" #>
<#
    //add types to processing
    tsBuilder.ConsiderType(typeof(PresetDTOBase), "PresetBase");
    tsBuilder.ConsiderType(typeof(PresetDTO), "Preset");
    tsBuilder.ConsiderType(typeof(TestInterface<,>));
#>

// include file with transformation algorithms
<#@ include file="CsT4Ts.t4" #> 
```

你会得到一个输出

```
//CsT4Ts.Tests.PresetDTOBase => PresetBase
// CsT4Ts.Tests.PresetDTO => Preset
// CsT4Ts.Tests.TestInterface`2 => TestInterface
// CsT4Ts.Tests.TestEnum => TestEnum

declare class PresetBase
{
    PresetId: string;
    Title: string;
    InterviewDate: string;
}

declare class Preset extends PresetBase
{
    QuestionsIds: string[];
}

declare interface TestInterface<TA, TB>
{
    A: string;
    B: number;
    C: TestEnum;
    D: TestEnum[];
    E: number[];
    F: TA;
    G: TB[];
}

declare enum TestEnum
{
    Foo = 10,
    Boo = 100
} 
```

在此处查看完整的解决方案：[https ://bitbucket.org/chandrush/cst4ts](https://bitbucket.org/chandrush/cst4ts)

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2017-05-01T14:32:44.550

我也很喜欢@citykid 的回答，所以我将它扩展为一次做一个完整的命名空间。只需将 POCO 类放入命名空间，然后重建 T4 模板。我希望我知道如何为每个文件生成单独的文件，但这不是世界末日。

您需要引用顶部的 .DLL 文件（您想要的类所在的位置），并且您需要提及命名空间。所有要编辑的行都标有 ACME。向@citykid 致敬，感谢！

```
<#@ template debug="true" hostSpecific="true" language="C#" #>
<#@ output extension=".ts" #>
<#@ Assembly Name="System.Core.dll" #>
<#@ assembly name="$(TargetDir)YOUR_DLL_NAME_HERE_ACME.dll" #>
<#@ assembly name="$(TargetDir)YOUR_OTHER_DLL_NAME_HERE_ACME.dll" #>
<#@ assembly name="$(TargetDir)YOUR_OTHER_DLL_NAME_HERE_ACME.dll" #>
<#@ assembly name="$(TargetDir)YOUR_OTHER_DLL_NAME_HERE_ACME.dll" #>
<#@ import namespace="System" #>
<#@ import namespace="System.Reflection" #>
<#@ import namespace="System.Collections.Generic" #>
<#@ import namespace="System.Text" #>
<#@ import namespace="System.Linq" #>
<#@ import namespace="System.Reflection" #>

<#= Process("My.Very.Special.Namespace.ACME") #>
<#= Process("My.Other.Very.Special.Namespace.ACME") #>
<#= Process("My.Other.Very.Special.Namespace.ACME") #>
<#= Process("My.Other.Very.Special.Namespace.ACME") #>

<#+  

    List<Type> knownTypes = new List<Type>();

    string Process(string nameSpace) {
      var allass = AppDomain.CurrentDomain.GetAssemblies();
      var ss = "";
      foreach (var ass in allass)
      {
         ss += ProcessAssembly(ass, nameSpace);
      }
      return ss;
    }

   string ProcessAssembly(Assembly asm, string nameSpace) {
      try {
            Type[] types;
            try
            {
                types = asm.GetTypes();
            }
            catch (ReflectionTypeLoadException e)
            {
                types = e.Types;
            }
            var s = "";
            foreach (var t in types.Where(t => t != null))
            {
               try {

               if (String.Equals(t.Namespace, nameSpace, StringComparison.Ordinal))
               {
                    s += InterfaceOfType(t);
               }

               } catch (Exception e)
               {
               }
            }
            return s;      
      }
      catch (Exception ee2) {
        return "// ERROR LOADING TYPES: " + ee2;
      }

   }

    string InterfaceOfType(Type T)
    {   
        Type t = T;     
        var sb = new StringBuilder();
        sb.AppendFormat("interface {0} {{\r\n", t.Name);
        foreach (var mi in GetInterfaceMembers(t))
        {
            sb.AppendFormat("  {0}: {1};\r\n", this.ToCamelCase(mi.Name), GetTypeName(mi));
        }
        sb.AppendLine("}");
        knownTypes.Add(t);
        return sb.ToString();
    }

    string Interface<T>()
    {   
        Type t = typeof(T);     
        var sb = new StringBuilder();
        sb.AppendFormat("interface {0} {{\n", t.Name);
        foreach (var mi in GetInterfaceMembers(t))
        {
            sb.AppendFormat("  {0}: {1};\r\n", this.ToCamelCase(mi.Name), GetTypeName(mi));
        }
        sb.AppendLine("}");
        knownTypes.Add(t);
        return sb.ToString();
    }

    IEnumerable<MemberInfo> GetInterfaceMembers(Type type)
    {
        return type.GetMembers(BindingFlags.Public | BindingFlags.Instance)
            .Where(mi => mi.MemberType == MemberTypes.Field || mi.MemberType == MemberTypes.Property);
    }

    string ToCamelCase(string s)
    {
        if (string.IsNullOrEmpty(s)) return s;
        if (s.Length < 2) return s.ToLowerInvariant();
        return char.ToLowerInvariant(s[0]) + s.Substring(1);
    }

    string GetTypeName(MemberInfo mi)
    {
        Type t = (mi is PropertyInfo) ? ((PropertyInfo)mi).PropertyType : ((FieldInfo)mi).FieldType;
        return this.GetTypeName(t);
    }

    string GetTypeName(Type t)
    {
        if(t.IsPrimitive)
        {
            if (t == typeof(bool)) return "boolean";
            if (t == typeof(char)) return "string";
            return "number";
        }
        if (t == typeof(decimal)) return "number";            
        if (t == typeof(string)) return "string";
        if (t.IsArray)
        {            
            var at = t.GetElementType();
            return this.GetTypeName(at) + "[]";
        }
        if(typeof (System.Collections.IEnumerable).IsAssignableFrom(t)) 
        {
            var collectionType = t.GetGenericArguments()[0]; // all my enumerables are typed, so there is a generic argument
            return GetTypeName(collectionType) + "[]";
        }            
        if (Nullable.GetUnderlyingType(t) != null)
        {
            return this.GetTypeName(Nullable.GetUnderlyingType(t));
        }
        if(t.IsEnum) return "number";
        if(knownTypes.Contains(t)) return t.Name;
        return "any";
    }

    string Enums<T>() // Enums<>, since Enum<> is not allowed.
    {
        Type t = typeof(T);        
        var sb = new StringBuilder();        
        int[] values = (int[])Enum.GetValues(t);
        sb.AppendLine("var " + t.Name + " = {");
        foreach(var val in values) 
        {
            var name = Enum.GetName(typeof(T), val);
            sb.AppendFormat("{0}: {1},\r\n", name, val);
        }
        sb.AppendLine("}");
        return sb.ToString();
    }
#> 
```

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2017-01-10T11:50:33.763

您也可以使用 Bridge.net。从 1.7 版开始，它支持为 C# 类型生成 TypeScript 定义。请参阅[http://bridge.net/docs/generate-typescript-definitions/](http://bridge.net/docs/generate-typescript-definitions/)

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2013-02-01T02:47:18.923

我的解决方案是编写一个小的 codegen 实用程序，它只需要一个项目程序集（和引用程序集）并开始扫描涉及 typescript 和 c# 之间交互的类型。此实用程序将两个 javascript 都输出为 d.ts ...该工具在构建后事件中被调用...就像一个魅力！

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2019-08-25T08:22:51.657

如果你想通过 node.js 转换它，那么你可以使用这个包（csharp-to-typescript）。 [https://www.npmjs.com/package/csharp-to-typescript](https://www.npmjs.com/package/csharp-to-typescript)

源代码：[https ://github.com/YuvrajSagarRana/csharp-to-typescript](https://github.com/YuvrajSagarRana/csharp-to-typescript)

```
eg: 
// After installation, import the package.
var { CsharpToTs, getConfiguration } = require("csharp-to-typescript");

// Use CsharpToTs to convert your source code a. Method one give your source code as string:
const sourceCodeInString =   `public class Address
{
  public int Id {get; set;}
  public string Street { get; set; }
  public string City { get; set; }
}`

var outputTypescript = CsharpToTs(sourceCodeInString, getConfiguration());
console.log(outputTypescript);

// Output is

export class Address
{
  Id: number;
  Street: string;
  City: string;
} 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2019-01-29T06:27:55.980

[在 SDLC 期间， ASP.NET Web API 客户端生成器](https://github.com/zijianhuang/webapiclientgen)可能比 swagger 工具链和其他工具更方便、开销更少。

虽然程序员通常使用 WebApiClientGen 来生成客户端 API 代码，但该项目还提供了 POCO2TS.exe，这是一个命令行程序，可以从 POCO 类生成 TypsScript 接口。您可以使用 Poco2ts.exe 或 poco2ts 组件将代码生成与构建管道集成。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2020-08-18T12:58:13.377

我在开发者社区页面上写了一个关于这个的功能请求：

[https://developercommunity.visualstudio.com/idea/1153873/reuse-existing-net-classes-for-typescript-definiti.html](https://developercommunity.visualstudio.com/idea/1153873/reuse-existing-net-classes-for-typescript-definiti.html)

正如您在此处的答案中看到的那样，有许多项目试图解决这个问题，但不幸的是，其中许多项目都是单个开发人员项目，在此过程中不再受到支持。我认为如果 Microsoft 维护其中一个项目，创建一个`.NET`to`TypeScript`生成器，那将是非常整洁的。

其中，一些仍在维护，但严重依赖于单个开发人员：

精简版：

[https://bitbucket.org/LukasKabrt/typelite/src/default/](https://bitbucket.org/LukasKabrt/typelite/src/default/)

TypeScript 定义生成器：

[https://marketplace.visualstudio.com/items?itemName=MadsKristensen.TypeScriptDefinitionGenerator](https://marketplace.visualstudio.com/items?itemName=MadsKristensen.TypeScriptDefinitionGenerator)

打字机：

[https://github.com/frhagn/Typewriter](https://github.com/frhagn/Typewriter)

类型生成：

[https://github.com/jburzynski/TypeGen](https://github.com/jburzynski/TypeGen)

强化。打字：

[https://github.com/stressed/Reinforced.Typings](https://github.com/reinforced/Reinforced.Typings)

我的建议是选择一个您从一开始就希望停止维护并准备切换到当前维护的项目的项目。我会选择使用注释并交叉手指的东西，如果该项目不再受支持，我可以用其他东西简单地替换该标签。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2016-12-21T13:53:12.260

如果有兴趣，您可以使用[TypedRpc](https://www.nuget.org/packages/TypedRpc/)。它的目的不仅是在 TypeScript 中创建接口，而且是使用 JsonRpc 协议在 .Net 中创建与服务的所有通信。

服务器中的类示例：

```
[TypedRpc.TypedRpcHandler]
public class RpcServerExample
{
    public String HelloWorld()
    {
        return "Hello World!";
    }
} 
```

生成的 TypeScript 代码的用法：

```
/// <reference path="Scripts/TypedRpc.ts" />

let rpc: TypedRpc.RpcServerExample = new TypedRpc.RpcServerExample();

var callback = function(data, jsonResponse) {
    console.log(data);
};

rpc.HelloWorld().done(callback).fail(callback); 
```

查看[https://github.com/Rodris/TypedRpc](https://github.com/Rodris/TypedRpc)了解如何使用它的其他示例。

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2020-06-12T09:29:35.530

如果您使用的是 VSCode，您可以查看[C# 到 TypeScript的扩展](https://marketplace.visualstudio.com/items?itemName=adrianwilczynski.csharp-to-typescript)

![将 C# 类转换为 TypeScript 接口](../Images/460eda2873518c9c366950632410738f.png)

只需单击一下，即可了解如何将其从 C# 代码转换。当然，并不是所有的类都会被转换，比如工厂，但对于客户端来说已经足够了。我们只需要数据的形状。有时如果我需要使用访问者模式，我会用我需要的其他方法来装饰。这样做只用了 5 秒钟。与上面的一分钟相比，我可以说这是一个巨大的胜利。

[在我的博客文章](https://trungk18.com/experience/convert-csharp-class-to-typescript-class/)中查看更多详细信息

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2021-05-28T16:54:15.953

我使用一个小的自定义 DSL，它生成 TypeScript 和 C# DTO/POCO 类。DSL 如下所示：

```
output CSharp
output TypeScript

namespace MyLibrary.Logic.DataModel.DTOs

class Something

property int ID
property string Name
property DateTime DateTime
property int ForeignKeyID 
```

这样我就有了一个 DTO 模型，它有一个单一的源（DSL）并且位于两个 C# 和 TypeScript 逻辑模型之间。

然后我编写了一个 C# 和 TypeScript DTOFactory 类，该类具有负责在 DTO 和逻辑模型对象之间进行转换的方法。（DTO 生成的一部分是序列化方法，这些方法转换为匿名 JSON 适合类型以进行序列化或存储在 IndexedDB 中。）

通过这样做，只要两边的模型发生变化，我就会得到编译错误，直到双方再次匹配。

# node.js - NodeJS 中的全局变量与 require.cache

> ID：12957821
> 
> 赞同：6
> 
> 时间：2012-10-18T15:07:50.357
> 
> 标签：node.js, global-variables, require

我知道`global`在节点中不鼓励使用该变量，但假设我需要全局存储一些数据，这是一种更糟糕的方法：

1.  使用[全局](http://nodejs.org/api/globals.html#globals_global)

2.  直接使用[require缓存](http://nodejs.org/api/globals.html#globals_require_cache)来存储一个对象，即

    `require.cache["myGlobalVar"] == {};`

我怀疑选项 2 更糟，因为 require 缓存旨在用于模块。

更多细节：我考虑过使用 require("myLibrary").myGlobalVar 但这需要让所有调用它的文件都可以访问 myLibrary，这在实践中可能是不可能的。我正在制作一个代码覆盖工具，因此我可以期望用户在他们的开发/测试模块中安装“myLibrary”，但不一定在他们的 src node_modules 目录中，检测代码文件将引用该目录。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-18T16:00:09.043

为什么不直接创建一个所有其他代码都可以引用的内存缓存呢？

```
var memoryCache = module.exports = function () {
    var cache = {};
    return {
        get: function (key) { return cache[key]; },
        set: function (key, val) { cache[key] = val; }
    }
} 
```

然后，您可以通过要求从任何地方使用缓存。

```
var cache = require('../cache/memoryCache')();
cache.set('1234', 'value I want to share');
cache.get('1234');  // 'value I want to share' 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-11-03T22:01:18.387

比尔的答案对我不起作用，因为它实际上**不能***“通过要求从任何地方”*使用。这是因为它导出了一个在每个要求上调用的函数，因此每次都创建一个空白的新（空）缓存。

解决方案是导出函数的实例......

```
// cache/memoryCache.js
module.exports = function () {
    var cache = {};
    return {
        get: function (key) { return cache[key]; },
        set: function (key, val) { cache[key] = val; }
    }
}(); 
```

...然后每次都需要那个实例。

```
// some other file
var cache = require('../cache/memoryCache');
cache.set('1234', 'value I want to share');
cache.get('1234');  // 'value I want to share' 
```

（注意区别：括号“（）”现在位于模块中函数定义的末尾，而不是在 require 之后。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-06T05:12:39.800

每次需要缓存文件时，都会再次触发该函数并再次初始化缓存对象。

`var cache = {}`

为了解决这个问题，我们可以实现如下所述的缓存：

```
//cache.js
module.exports = {
    cache: {},
    get: function (key) { return this.cache[key]; },
    set: function (key, val) { this.cache[key] = val; },
    dumpCache: function () { return this.cache } // this just for testing purpose
} 
```

```
// index.js

var cache = require('./cache');

cache.set('12', 'Hey');
console.log(cache.get('12'));
console.log(cache.dumpCache()); 
```

# version-control - 之后标签移动

> ID：12957824
> 
> 赞同：1
> 
> 时间：2012-10-18T15:07:58.263
> 
> 标签：version-control, perforce, p4v

在我的 Perforce 工作区中只有一个文件`squirtle.txt`。在 Windows Explorer 中，我将其重命名为`blastoise.txt`Notepad 并对其进行了一些更改。在 P4V 中，我运行了协调离线工作，现在在我的更改列表中，我将文件`squirtle.txt`标记为“已删除”并`blastoise.txt`标记为“添加”。

我听说最好通知 Perforce`blastoise.txt`是从 进化而来的 `squirtle.txt`，这样如果检查了blastoise，squirtles 的历史就会列在下面。我如何通知 Perforce 这一举动？

那是一个例子。在我的实际情况下，我已经移动了数十个文件，包括重命名和移动文件夹。

* * *

**编辑**：有人告诉我，我不应该敢在 Windows 资源管理器中重命名文件，而是使用特殊的 Perforce 命令来重命名[`p4 move`](http://kb.perforce.com/article/7/renaming-files)。别管我应该做什么，我现在的情况该怎么办？

有`p4 moved squirtle.txt blastoise.txt`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T15:15:47.857

在 P4V 中，转到屏幕右侧的 Pending 选项卡并从默认更改列表中选择 squirtle.txt 和 blastoise.txt，然后右键单击并选择 Revert 以撤销您在 P4V 之外所做的更改。

还是在 P4V 中，在 depot 树中选择 squirtle.txt 并右键单击，然后选择“Rename / Move ...”对其进行重命名。

# c++ - Alglib 库(C++)

> ID：12957831
> 
> 赞同：2
> 
> 时间：2012-10-18T15:08:26.923
> 
> 标签：c++, fft, alglib

我需要有关库 Alglib 的帮助，即 FFT。据我了解，输入是一个字符串，输出是一样的。

```
complex_1d_array z = "[1i,1i,1i,1i]"; - input 
```

我可以将输入作为数组吗？提前致谢。

# jquery-ui - jquery-UI Datepicker 在 div 上时不会自动翻译

> ID：12957832
> 
> 赞同：3
> 
> 时间：2012-10-18T15:08:34.623
> 
> 标签：jquery-ui, localization, jquery-ui-datepicker

当我加载我的页面时，我的 div 上的日期选择器总是以英语显示，我必须单击它才能以其他语言显示，正如您在这个小提琴中看到的那样：http: [//jsfiddle.net/bFHxf/](http://jsfiddle.net/bFHxf/)

如果您从 div 更改为 input 则没有问题，因为您必须单击它才能显示...这是某种功能还是错误？

任何解决方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T15:25:08.773

我将您的代码包装在`$(document).ready()`函数中，这似乎可以解决问题。

[http://jsfiddle.net/qtNyr/](http://jsfiddle.net/qtNyr/)

希望有帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T15:24:58.153

我认为您过早地初始化日期选择器。

如果您等到文件加载完毕，它应该可以工作。您可以通过使用包围现有的 JavaScript 代码来做到这一点

```
$(function() { existing code goes here }); 
```

所以结果可能如下所示：

```
$(function(){
$.datepicker.setDefaults( $.datepicker.regional[ "nl" ] );
$('#date').datepicker({
            numberOfMonths: 2,
            showButtonPanel: true,
            dateFormat : 'dd/mm/yy'
        });
​})​ 
```

[链接到 jsFiddle](http://jsfiddle.net/JhcmJ/)

# excel - 屏幕更新不翻转

> ID：12957833
> 
> 赞同：1
> 
> 时间：2012-10-18T15:08:38.263
> 
> 标签：excel, excel-2007, excel-2010, vba

在 Excel 2010 中，如下所述的方法，ScreenUpdating 工作正常。但在 2007 年，它没有翻转，并且工作表操作可以直观地看到。

### VBA 用法：

```
Dim scrup As Boolean: scrup = DisableScreenUpdating(Application.ScreenUpdating) 
```

### 方法声明：

```
Function DisableScreenUpdating(val As Boolean) As Boolean
   '''''''''''''''''''''''''''''''''''''''''''''''''
   ' Disable ScreenUpdating, for seemless operation
   If val Then
      Application.ScreenUpdating = False
   End If
   '''''''''''''''''''''''''''''''''''''''''''''''''

   DisableScreenUpdating = val
End Function 
```

### 问题：

我在 2007 年缺少什么 2010 年假设或正常工作？

*   仍在跟踪该错误，因为它仍在文件的 1 个版本上发生，但其他两个版本不会。这些版本都具有相同的代码库，但基于各种设置更改最终用户的表示。

### 笔记：

*   请不要专注于“我为什么要这样做”，以及更多什么情况会导致 ScreenUpdating 方法不会从 更改`True`为`False`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T20:44:42.813

您可以尝试消除条件，看看问题是否仍然存在。这样你就会知道它是否与条件或'val'有关。

```
Function DisableScreenUpdating() As Boolean
  Application.ScreenUpdating = False
  DisableScreenUpdating = True
End Function 
```

假设这会使您的错误消失，那么我将专注于通话....

```
DisableScreenUpdating(Application.ScreenUpdating) 
```

也许这个错误与读取 ScreenUpdating 属性有关，然后是 write。这只是一个猜测。

另外，我会在您的项目中搜索 Application.ScreenUpdating 的任何其他用法。可能有一些其他代码导致更新返回 True。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T17:54:15.907

我已经看到了这个错误......但是该语句有效，只有 VBA 编辑器没有看到更改。但是，您可以通过分配一个变量然后在 VBA 编辑器中读取它来查看更改。

```
 >Sub testing()
    >Dim i As Long
    >
    >Application.ScreenUpdating = False
    >i = Application.ScreenUpdating
    >MsgBox "Assigned to i...real value = " & CBool(i)
    >
    >Application.ScreenUpdating = True
    >i = Application.ScreenUpdating
    >MsgBox "Value of Application.ScreenUpdating = " & CBool(i)
    >End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T18:23:09.993

一方面，是否有启用 ScreenUpdating 的功能？您的代码只会禁用它。这是用我使用的代码修改的代码：

```
Dim scrup As Boolean: scrup = DisableScreenUpdating(Not Application.ScreenUpdating)

'Disable ScreenUpdating, for seemless operation
Function DisableScreenUpdating(val As Boolean) As Boolean
  With Application
    If .ScreenUpdating = val Then  'Gets rid of flashes for changing it to the same
      .ScreenUpdating = Not val
    End If

    'Doesn't matter what happens above, this is based on what Excel would send back
    DisableScreenUpdating = Not .ScreenUpdating
  End With
End Function 
```

# objective-c - 运行时调试问题

> ID：12957835
> 
> 赞同：1
> 
> 时间：2012-10-18T15:08:47.407
> 
> 标签：objective-c, debugging, xcode4.4

我已经为我一直在制作的钻取表应用程序编写了一些代码，但该应用程序仅在运行时崩溃。Xcode 在构建应用程序时没有给我任何错误。调试器输出：

> 2012-10-18 10:58:26.513 秒[474:c07]-[NavController setItems:]: 无法识别的选择器>发送到实例 0xc217a00 2012-10-18 10:58:26.515 秒[474:c07] *** 终止应用程序到期to uncaught exception >'NSInvalidArgumentException', reason: '-[NavController setItems:]: unrecognized selector sent >to instance 0xc217a00' *** First throw call stack: (0x14b8022 0xeb8cd6 0x14b9cbd 0x141eed0 0x141ecb2 0x3fbe 0xe2a1e 0x41401 0x41670 0x41836 >0xbfc9dd8 0x4872a 0x19596 0x1a274 0x29183 0x29c38 0x1d634 0x13a2ef5 0x148c195 0x13f0ff2 >0x13ef8da 0x13eed84 0x13eec9b 0x19c65 0x1b626 0x1d40 0x1cd9) 终止调用抛出异常

我想我知道错误在于 NavController.m ，其中：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    NSString* path = [[NSBundle mainBundle] pathForResource:@"Data" ofType:@"plist"];
    MasterViewController* root = (MasterViewController*)self.topViewController;
    NSDictionary* thelist = [NSDictionary dictionaryWithContentsOfFile:path];
    root.items = [thelist objectForKey:@"Items"];
    root.navigationItem.title = [thelist objectForKey:@"name"];
} 
```

顺便说一句，我制作了这样的数组项： (nonatomic, retain) NSArray* items;

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T15:24:57.327

The app crashes, because of the following line:

```
root.items = [thelist objectForKey:@"Items"]; 
```

This line is just a shortcut for writing:

```
[root setItems:[thelist objectForKey:@"Items"]]; 
```

And the runtime complains that there is no method `setItems:` found. The reason why there is compile error is because you tell the compiler that `root` is of class `MasterViewController`, however, that is not true. At runtime the obj-c runtime finds out that `root` is in fact of class `NavController` and it seems like `NavController` has no `setItems:` method.

In other words, this line is wrong:

```
MasterViewController* root = (MasterViewController*)self.topViewController; 
```

You lie about the class; `self.topViewController` returns an object that is of class `NavController`, yet you force the compiler to treat it as `MasterViewController` which will fail as soon as you call a method that is not found for `NavController`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T15:20:00.293

问题大概出在这里：

```
MasterViewController* root = (MasterViewController*)self.topViewController; 
```

`self.topViewController`可能不是 MasterViewController 的实例，而是 NavController 实例，然后就可以了。

# winapi - EnumWindows 奇怪的行为

> ID：12957839
> 
> 赞同：0
> 
> 时间：2012-10-18T15:08:52.353
> 
> 标签：winapi, mfc, visual-studio-2012

我正在尝试在 Windows 8 上将 MFC 与 Visual Studio 2012 一起使用。我有以下代码：

```
BOOL CALLBACK EWP(HWND hwnd, LPARAM lParam)
{
    int txtlen = GetWindowTextLengthW(hwnd);
    std::wstring s;
    s.reserve(txtlen + 1);
    GetWindowText(hwnd, const_cast<wchar_t*>(s.c_str()), txtlen);

    return TRUE;
}

EnumWindows(EWP, 0); 
```

发生的情况是第一个字符串以“Task Switchin”的形式出现，其余的以“”形式出现。我得到了大约 330 个这样的字符串。我也尝试过不使用那种奇怪的字符串方法，只使用 char buff[300]，同样的故事。

有人可以告诉我发生了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T15:18:29.587

您对 GetWindowText() 的最后一个论点是错误的。从该论点的 MSDN 文章描述中：

> 指定要复制到缓冲区的最大字符数，**包括 NULL 字符**。如果文本超出此限制，则将其截断。

通过`txtlen+1`修复。

# javascript - 点击链接提交表单模拟特定按钮

> ID：12957842
> 
> 赞同：2
> 
> 时间：2012-10-18T15:08:58.217
> 
> 标签：javascript, jquery, html, dom

我有一个带有表格和 2 个提交按钮的 html 表单

```
<input type="image" name="button1" value="First Button" src="some_image.png">
<input type="image" name="button2" value="Second Button" src="some_image.png"> 
```

我有一个链接，我想模拟点击第一个按钮

```
<a name="link_to_button" value="First Button" href="#" onclick="$(this).parents('form').submit();">test submit</a> 
```

我想要 2 个链接，一个模拟单击每个提交按钮的链接，以便我可以在服务器上区分单击了哪个链接。谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T18:52:32.007

您可以为按钮输入 ID（例如 imgBtn1 和 imgBtn2），然后您可以将 Anchor 代码更改为：

```
<a name="link_to_button" value="First Button" href="#" onclick="$('#imgBtn1').click();">test submit 1</a>

<a name="link_to_button" value="Second Button" href="#" onclick="$('#imgBtn2').click();">test submit 2</a> 
```

# cakephp - 在 cakephp 中将表添加到自定义查询

> ID：12957843
> 
> 赞同：1
> 
> 时间：2012-10-18T15:09:01.230
> 
> 标签：cakephp

我试图在 cakephp 中复制以下查询：

```
SELECT *
FROM uploads, proposals
WHERE proposals.id = uploads.proposal_id AND proposals.tender_id = 10 
```

我在 Upload 模型中使用 find 方法，条件如下：

```
$conditions = array(
  'Proposal.id' => $id,
  'AND' => array(
    'Upload.proposal_id' => 'Proposal.id'
  )
);
return($this->find('list', array('conditions' => $conditions))); 
```

但我得到了这个查询

```
SELECT `Upload`.`id`, `Upload`.`title` 
FROM `kumalabs_lic`.`uploads` AS `Upload` 
WHERE `Proposal`.`id` = 10 AND `Upload`.`proposal_id` = 'Proposal.id' 
```

如您所见，提案表丢失了，有人可以解释一下如何进行此查询吗？

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T15:23:52.350

我建议您为此使用可链接行为。它比 CakePHP 中默认的连接方式要容易得多。它适用于最新版本的 CakePHP 以及 1.3。

[CakePHP 可链接行为](https://github.com/rafaelbandeira3/linkable)

然后你会修改你的 find 看起来像这样：

```
return($this->find('list', array(
    'link' => array('Proposal'),
    'conditions' => array(
            'Proposal.id' => $id,
    ),
    'fields' => array(
            'Upload.*',
            'Proposal.*',
    ),
))); 
```

CakePHP 会自动加入你的主/外键，所以不需要

```
'Upload.proposal_id' => 'Proposal.id' 
```

健康）状况。

虽然你不需要那个条件，但我也想指出你做错了。这就是你在 CakePHP 中做 AND 和 OR 的方式

```
 'conditions' => array(
                'and' => array(
                    'field1' => 'value1', // Both of these conditions must be true
                    'field2' => 'value2'
                ),
                'or' => array(
                    'field1' => 'value1', // One of these conditions must be true
                    'field2' => 'value2'
                ),
        ), 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T15:16:09.217

我不熟悉那个 JOIN 语法，但我相信它等于：

```
SELECT *
FROM uploads
INNER JOIN proposals ON proposals.id = uploads.proposal_id
WHERE proposals.tender_id = 10 
```

...所以你需要类似的东西：

```
// Untested
$conditions = array(
    'Proposal.id' => $id,
    'joins' => array(
        array(
            'alias' => 'Proposal',
            'table' => 'proposals',
            'type' => 'INNER',
            'conditions' => 'Proposal.id = Upload.proposal_id',
        ),
    ),
); 
```

当然，这是你的 JOIN 的直接翻译。如果您的模型正确相关，那么这一切都应该自动发生。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T15:45:42.680

`'contain'`如果模型有关联，CakePHP 会自动按关键字加入表格。试试下面的代码：

```
public function getProposalsFromTender($id){
   $data = $this->find('all', array(
      'conditions' => array('Proposal.id' => $id),
      'fields' => array('Upload.*', 'Proposal.*'),
      'contain' => array('Proposal')
  ));
  return($data);
} 
```

注意：CakePHP 使用显式连接而不是隐式连接`...from proposals, uploads...`

# javascript - jsp中的文本框，只允许文本、数字和逗号

> ID：12957844
> 
> 赞同：-4
> 
> 时间：2012-10-18T15:09:04.053
> 
> 标签：javascript, jsp

jsp 中的文本框，只允许文本数字和逗号。

这是为了分隔用户标识。

每个用户 ID 的长度必须为 8 个字符，我需要在文本框中输入多个用户 ID。

例如：

**正确的格式如下**

asakthi1,psubhadr,tpradee4

**它不应该像结束一样**（结尾有逗号。）**（格式不正确）**

asakthi1,psubhadr,tpradee4,

这是我需要使用 javascript 来完成的。（请不要使用 Jquery。）

我对此摸不着头脑..任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T15:24:26.950

You could attach an `onchange` event handler to the `<input type="text">` that will perform the validation using a regular expression like, for instance, this one: `^(([A-Za-z0-9]{8}),)*[A-Za-z0-9]{8}$`.

If a username is a combination of 8 letters or numbers, this expression would accept any number of usernames followed by comma, and at least one final username without a comma. Notice the `{8}` element forces a match of exactly 8 characters.

If validation fails, it's up to you how to show it to the user. This example will be showing an alert and clearing the input.

```
<input type="text" onchange="if (!validate(this.value)) { alert('incorrect value'); this.value = ''; }">

<script>
function validate​(value){
    return value.match(new RegExp("^(([A-Za-z0-9]{8}),)*[A-Za-z0-9]{8}$")) != null;
}​
</script> 
```

Here is a sample [JSFiddle](http://jsfiddle.net/56LDy/1/) to see the expression at work.

# ef-code-first - 验证错误消息和 EF Fluent API

> ID：12957846
> 
> 赞同：0
> 
> 时间：2012-10-18T15:09:05.643
> 
> 标签：ef-code-first, asp.net-mvc-4

我正在使用带有 Code First 的 MVC 4 并且刚刚开始使用 Fluent API，但是我找不到任何地方提到如何提供验证错误消息？这只能通过使用数据注释来完成吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T15:10:33.147

可能是使用数据注释。另一种可能性是使用不同的验证框架，例如[FluentValidation.NET](http://fluentvalidation.codeplex.com/)，它允许您在验证器规则中指定错误消息。

# lua - 如何在 Lua 中查找和替换包含特定字符的单词？

> ID：12957852
> 
> 赞同：2
> 
> 时间：2012-10-18T15:09:30.863
> 
> 标签：lua

我有一串“单词”，像这样：`fIsh mOuntain rIver`. 单词用空格分隔，我在字符串的开头和结尾添加了空格以简化“单词”的定义。

我需要将任何包含`A`,`B`或`C`, 的单词替换为`1`, 任何包含`X`,`Y`或`Z`的单词`2`, 并将所有剩余单词替换为`3`, 例如：

```
 the CAT ATE the Xylophone 
```

首先，将包含`A`、`B`或的单词替换`C`为`1`，字符串变为：

```
 the 1 1 the Xylophone 
```

接下来，将包含`X`、`Y`或的单词替换`Z`为`2`，字符串变为：

```
 the 1 1 the 2 
```

最后，它将所有剩余的单词替换为`3`，例如：

```
 3 1 1 3 2 
```

最终输出是一个只包含数字的字符串，中间有空格。

*   单词可能包含任何类型的符号，例如：`$5鱼fish`可以是一个单词。定义单词开头和结尾的唯一特征是空格。
*   匹配是按顺序找到的，这样可能包含两个匹配的单词，例如`ZebrA`，简单地替换为`1`。
*   该字符串采用 UTF-8 格式。

如何用数字替换包含这些特定字符的所有单词，最后用 替换所有剩余单词`3`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-18T15:27:22.647

试试下面的代码：

```
function replace(str)
  return (str:gsub("%S+", function(word)
    if word:match("[ABC]") then return 1 end
    if word:match("[XYZ]") then return 2 end
    return 3
  end))
end

print(replace("the CAT ATE the Xylophone")) --> 3 1 1 3 2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T15:17:02.880

slnunicode[模块](http://files.luaforge.net/releases/sln/slnunicode)提供 UTF-8 字符串函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T20:37:40.513

The `gsub` function/method in Lua is used to replace strings and to check out how times a string is found inside a string. `gsub(string old, string from, string to)`

```
local str = "Hello, world!"

newStr, recursions = str:gsub("Hello", "Bye"))
print(newStr, recursions) 
```

> Bye, world!    1

newStr being "Bye, world!" because `from` was change to `to` and recursions being 1 because "Hello" (`from`) was only founds once in str.

# java - 测试探查器的任何好的测试示例？

> ID：12957853
> 
> 赞同：0
> 
> 时间：2012-10-18T15:09:41.003
> 
> 标签：java, profiler

为了了解有关测试的更多信息，我们将在一个更大的项目上使用分析器（以实际获取一些值和测量值），并且由于我们自己没有任何大型项目，因此我们不得不使用其他东西。有什么好的建议吗？也许测试 JUnit？（不是“使用”JUnit）？

编辑：不寻找任何特定的数据，只是......一些东西......问题是所有这些都是新的，所以它有点令人困惑。关键是要稍微习惯使用探查器等测试工具。换句话说，没有必要对实际程序了解太多，因为程序并不重要，获得的数据也不是太重要，而且主要应该只是证明你实际上可以把东西拿出来的测试。所以我应该如何进行有点令人困惑，因为我不习惯大型实际程序。

我可以只下载普通的 java 文件，然后用 NetBeans（或类似的）运行/配置它们，而不必做或关心一堆东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T15:21:25.737

这取决于您要分析的数据类型。但是如果你没有一个“更大的项目”，最好的方法是在网络上找到一些适合你想要的开源项目。

编辑：我从不使用 NetBeans 进行配置，所以我不能告诉你这个工具，但如果你不关心这个工具，你可以开始尝试使用 VisualVM（包含在 JDK 中），它是一个监控 JVM 的工具. 它非常有用，如果您已经运行 java 应用程序（如 NetBeans），则无需下载额外的应用程序。

在他们的网站上使用的工具描述：VisualVM 监控应用程序 CPU 使用率、GC 活动、堆和永久代内存、加载的类的数量和正在运行的线程。

[VisualVM 网站](http://visualvm.java.net/)

如果您真的想使用一些源代码进行分析，一个带有 main 的小型 java 应用程序就可以完成这项工作，但这又取决于您要分析的数据/数据量。也许你可以在网上找到一些用java编写的“测试应用程序”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T02:58:14.820

好吧，我有[*我的标准方案*](http://sourceforge.net/projects/randompausedemo/)。它是用 C++ 编写的，但用 Java 重新编码应该不会超过一两天。警告：该场景本身不是关于测量的，而是关于性能调整的，这根本不是一回事。

这表明严重的代码通常包含多个性能问题，如果你真的想让它快速运行，分析器不一定是最好的工具。

# ios - 重置 iOS 模拟器的最佳方法

> ID：12957856
> 
> 赞同：-1
> 
> 时间：2012-10-18T15:09:48.140
> 
> 标签：ios, ios-simulator, xcode4.5

当正在开发的应用程序在模拟器中运行时，xCode 4.5 偶尔会在构建和运行时挂起。预期的响应是模拟器中运行的应用程序将停止，新构建将在模拟器中启动。此状态将不允许 xCode 停止任务或关闭/退出。xCode 响应正在处理的任务并且不会停止这些任务。除了强制退出 xCode 之外，还有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T15:13:03.667

实际上退出模拟器 99% 的时间都可以解决问题。右键单击模拟器图标->退出

Xcode 将构建新版本并在模拟器中启动它

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T16:49:52.877

在某些情况下退出模拟器并没有帮助，那么您应该这样做

`iOS Simulator->Reset Content and Settings...`

会杀死模拟器上的所有应用程序，但有时它非常有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T15:09:48.140

xCode 不允许退出操作，因为任务正在运行并且不会停止或在当前状态下构建。

忽略 xCode 状态 在 xCode 的设备方案中更改模拟器类型 在新模拟器中构建/运行应用程序，这可能会导致开发人员的应用程序在模拟器中崩溃。将设备方案更改回原始选择。构建/运行应用程序

# django - 如何将 django ajax 数据传递给模板？

> ID：12957869
> 
> 赞同：0
> 
> 时间：2012-10-18T15:10:25.957
> 
> 标签：django, templates, jquery

我正在尝试通过 ajax 将二维数组传递给模板。我设法在点击时从服务器获取数据，但我不知道如何在模板中处理这些数据。例如，如果我将返回的“数据”放入一个 div 中，那么它只会列出第一列。如何访问特定数据，例如：

```
{% for printers in printer_list %}
    {{ printer.email }}
{% endfor %} 
```

Javascript：

```
$(".printersToggle").click(function() {
    $.get("/ajax", function(data) {
        /* What goes here? */
    });
}); 
```

视图.py：

```
def ajax_test(request):
    if request.is_ajax():
        printer_list = User.objects.all()
    else:
        printer_list = "Not ajax"
    return HttpResponse(printer_list)
    # Am I doing this bit right? 
```

网址.py：

```
url(r'^ajax$','website.views.ajax_test'), 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T01:01:55.173

**视图.py**

下面我们接收一个 AJAX POST 并根据“VarID”过滤一个对象，并构建一个字典列表，每个字典都包含一个 OptionID、OptionValue 和 OptionLabel 值。最后，您应该在 json 中转换您想要的任何列表或字典或组合。

```
 def currentoptions(request):
        if request.is_ajax():
            currentOptions = Option.objects.filter(VariableID=int(request.POST['VarID']))
            response = []
            for i in currentOptions:
                vallabel = {}
                vallabel['OptionID'] = i.id
                vallabel['OptionValue'] = i.Value
                vallabel['OptionLabel'] = i.Label
                response.append(vallabel)
            json = simplejson.dumps(response)
            return HttpResponse(json, mimetype="text/json")
        else:
            pass 
```

**出于 CSRF 原因需要 Javascript。**

```
<script type="text/javascript"> 
jQuery(document).ajaxSend(function(event, xhr, settings) {
    function getCookie(name) {
        var cookieValue = null;
        if (document.cookie && document.cookie != '') {
            var cookies = document.cookie.split(';');
            for (var i = 0; i < cookies.length; i++) {
                var cookie = jQuery.trim(cookies[i]);
                // Does this cookie string begin with the name we want?
                if (cookie.substring(0, name.length + 1) == (name + '=')) {
                    cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                    break;
                }
            }
        }
        return cookieValue;
    }
    function sameOrigin(url) {
        // url could be relative or scheme relative or absolute
        var host = document.location.host; // host + port
        var protocol = document.location.protocol;
        var sr_origin = '//' + host;
        var origin = protocol + sr_origin;
        // Allow absolute or scheme relative URLs to same origin
        return (url == origin || url.slice(0, origin.length + 1) == origin + '/') ||
            (url == sr_origin || url.slice(0, sr_origin.length + 1) == sr_origin + '/') ||
            // or any other URL that isn't scheme relative or absolute i.e relative.
            !(/^(\/\/|http:|https:).*/.test(url));
    }
    function safeMethod(method) {
        return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));
    }

    if (!safeMethod(settings.type) && sameOrigin(settings.url)) {
        xhr.setRequestHeader("X-CSRFToken", getCookie('csrftoken'));
    }
});
</script> 
```

**用于您的特定 AJAX 请求的 Javascript。**

为了在列表中显示 dicts 中的值，我们将遍历 AJAX 请求成功返回的数据。JS 函数是用 jQuery 完成的。

```
function AddOptions(VarID){
           $.ajax({
                type:"POST",
                url:"{% url builder.views.currentoptions %}",
                data: {VarID: VarID},
                success: function(data){
                $('#OptionTable > tbody > tr').remove();
                  $.each(data, function(index) {
                  $('#OptionTable > tbody:last').append('<tr id=Option_'+data[index].OptionID+'><td>'+data[index].OptionValue+'</td><td>'+data[index].OptionLabel+'</td><td><a href="#" onClick="deleteOption('+data[index].OptionID+')"><i class="icon icon-remove"></i></a>');
                  });
                }
              });
           } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T15:23:10.003

这必须使用 javascript 来完成。一旦在服务器上生成模板并将页面显示在访问者的 Web 浏览器中，它只不过是带有 JavaScript 的 HTML。为了操作页面，您需要使用 JavaScript。

# ruby - 在 Ruby 中将覆盖文本添加到 gstreamer 视频

> ID：12957870
> 
> 赞同：3
> 
> 时间：2012-10-18T15:10:32.243
> 
> 标签：ruby, overlay, gstreamer, gtk2, ruby-gnome2

我编写了这个非常简单的视频播放器，它在 Ruby 中使用 gstreamer 和 gtk2。

```
require 'gtk2'
require 'gst'

if ARGV.size != 1
  puts "Usage: #{$0} <file>"
  exit 0
end

class VideoWidget < Gtk::DrawingArea
  def initialize(file)
    super()

    @playbin = Gst::ElementFactory.make('playbin2')

    @video = Gst::ElementFactory.make('xvimagesink')
    @video.force_aspect_ratio = true

    @overlay = Gst::ElementFactory.make('textoverlay')    
    @overlay.text = 'Foo bar'

    @playbin.text_sink = @overlay
    @playbin.video_sink = @video
    @playbin.audio_sink = Gst::ElementFactory.make('autoaudiosink')
    @playbin.signal_connect('notify') do
      @playbin.video_sink.xwindow_id = self.window.xid if self.window
      @playbin.video_sink.expose
    end
    @playbin.uri = "file://#{File.absolute_path(file)}"
    @playbin.ready
  end

  def play
    @playbin.play
  end

  def pause
    @playbin.pause
  end

  def stop
    @playbin.stop
  end

  def seek(time)
    @playbin.seek(1.0, Gst::Format::TIME,
                  Gst::Seek::FLAG_FLUSH | Gst::Seek::FLAG_KEY_UNIT,
                  Gst::Seek::TYPE_CUR, time * Gst::SECOND,
                  Gst::Seek::TYPE_NONE, -1);
  end
end

window = Gtk::Window.new
video = VideoWidget.new(ARGV.first)

buttonbox = Gtk::HButtonBox.new

button = Gtk::Button.new(Gtk::Stock::MEDIA_PLAY)
button.signal_connect('clicked') { video.play }
buttonbox.add(button)

button = Gtk::Button.new(Gtk::Stock::MEDIA_PAUSE)
button.signal_connect('clicked') { video.pause }
buttonbox.add(button)
button = Gtk::Button.new(Gtk::Stock::MEDIA_STOP)
button.signal_connect('clicked') { video.stop }
buttonbox.add(button)

button = Gtk::Button.new(Gtk::Stock::MEDIA_REWIND)
button.signal_connect('clicked') { video.seek(-10) }
buttonbox.add(button)

button = Gtk::Button.new(Gtk::Stock::MEDIA_FORWARD)
button.signal_connect('clicked') { video.seek(10) }
buttonbox.add(button)

hbox = Gtk::HBox.new
hbox.pack_start(buttonbox, false)

vbox = Gtk::VBox.new
vbox.pack_start(video)
vbox.pack_start(hbox, false)

window.add(vbox)
window.signal_connect('destroy') do
  video.stop
  Gtk.main_quit 
end
window.set_default_size(640, 480)
window.window_position = Gtk::Window::POS_CENTER
window.show_all

Gtk.main 
```

它有效，但我想在视频上显示一些文字。我尝试使用 gstreamer 元素`textoverlay`，但我没有想出在管道中链接这个元素。有人有想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T16:44:39.733

好的，我找到了解决方案：

我需要创建一个带有幽灵垫的 Gst bin 元素：

```
@playbin = Gst::ElementFactory.make('playbin2')
@video   = Gst::ElementFactory.make('xvimagesink')
@audio   = Gst::ElementFactory.make('autoaudiosink')
@overlay = Gst::ElementFactory.make('textoverlay')

bin = Gst::Bin.new
bin.add(@overlay)
ghost_pad = Gst::GhostPad.new('sink', @overlay.get_pad('video_sink'))
bin.add_pad(ghost_pad)
bin.add(@video)
@overlay.link(@video)

@playbin.video_sink = bin
@playbin.audio_sink = @audio

@playbin.ready

@overlay.text = 'Fukc yeah!' 
```

# sencha-touch - 自定义 xtypes 作为 ext.listview 中的单元格

> ID：12957883
> 
> 赞同：2
> 
> 时间：2012-10-18T15:11:04.340
> 
> 标签：sencha-touch, extjs, sencha-touch-2, sencha-touch-theming

我正在使用 sencha touch 2 并没有在 sencha 论坛中获得帮助，所以我希望你们能帮助我。

我想创建一个包含自定义项目的列表。在这个自定义项目中，我想要一个带有按钮作为项目的水平滚动列表视图。我试图做它 component.DataItem 但它对我不起作用。我还尝试在列表中添加自定义 xtype 作为项目，但这不起作用。

我认为这是一个简单的任务，但煎茶触摸对我来说是一个挑战。

所以请帮助我并告诉我，我怎样才能得到像这张照片所示的视图。

![我的煎茶触摸 2 目标](../Images/cffd666d76be6c8a619fe5035f05cd06.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T15:57:35.057

您将要使用组件数据视图，而不是标准列表。本质上，您将需要首先定义一个 Ext.dataview.component.DataItem，然后将其实现到 DataView 中。下面是 DataView 指南中引用的 DataView 中按钮的简单示例：http://docs.sencha.com/touch/2-0/#!/guide/ [dataview](http://docs.sencha.com/touch/2-0/#!/guide/dataview)

***首先创建数据项：***

```
Ext.define('MyApp.view.DataItemButton', {
    extend: 'Ext.dataview.component.DataItem',
    requires: ['Ext.Button'],
    xtype: 'dataitembutton',    
    config: {
        nameButton: true,    
        dataMap: {
            getNameButton: {
                setText: 'name'
            }
        }
    },    
    applyNameButton: function(config) {
        return Ext.factory(config, Ext.Button, this.getNameButton());
    },    
    updateNameButton: function(newNameButton, oldNameButton) {
        if (oldNameButton) {
            this.remove(oldNameButton);
        }

        if (newNameButton) {
            this.add(newNameButton);
        }
    }
}); 
```

*   我们必须为每个项目扩展 Ext.dataview.component.DataItem。这是一个处理每个项目的记录处理的抽象类。
*   在扩展下方，我们需要 Ext.Button。这仅仅是因为我们要在 item 组件中插入一个按钮。
*   然后我们为这个 item 组件指定 xtype。
*   在我们的配置块中，我们定义了 nameButton。这是我们添加到此组件的自定义配置，它将被类系统转换为按钮。我们默认将其设置为 true，但这也可以是配置块。这个配置会自动为我们的 nameButton 生成 getter 和 setter。
*   接下来我们定义dataMap。dataMap 是记录数据和该视图之间的映射。getNameButton 是您要更新的实例的 getter；所以在这种情况下，我们要获取该组件的 nameButton 配置。然后在那个块中，我们给它那个实例的setter；在这种情况下是 setText 并给它我们正在传递的记录的字段。因此，一旦这个 item 组件获得了一条记录，它将获得 nameButton，然后使用记录的 name 值调用 setText。
*   然后我们为我们的nameButton 定义apply 方法。apply 方法使用 Ext.factory 将传递的配置转换为 Ext.Button 的实例。然后返回该实例，这将导致调用 updateNameButton。updateNameButton 方法只是简单地删除旧的 nameButton 实例（如果存在），并添加新的 nameButton 实例（如果存在）。

***现在创建数据视图：***

```
Ext.create('Ext.DataView', {
    fullscreen: true,

    store: {
        fields: ['name', 'age'],
        data: [
            {name: 'Jamie Avins',  age: 100},
            {name: 'Rob Dougan',   age: 21},
            {name: 'Tommy Maintz', age: 24},
            {name: 'Jacky Nguyen', age: 24},
            {name: 'Ed Spencer',   age: 26}
        ]
    },

    useComponents: true,
    defaultType: 'dataitembutton'
}); 
```

在您的情况下，您需要使用水平滚动列表，而不是使用 DataItem 的按钮。这是我从这个答案中找到的一个例子：[水平滚动列表](https://stackoverflow.com/questions/10655790/horizontal-scrolling-list)

```
var list = Ext.create('Ext.DataView',{
   store: store,
   itemTpl: new Ext.XTemplate('<img src="{icon}" />'),
   inline: { wrap: false },
   scrollable: {
     direction: 'horizontal',
     directionLock: true
   }
}); 
```

请注意，您可能还必须在第二个数据视图中使用组件才能实现带有图像的按钮

# javascript - 按文本查找 div 并删除文本

> ID：12957886
> 
> 赞同：-6
> 
> 时间：2012-10-18T15:11:18.763
> 
> 标签：javascript, jquery, html

如何找到包含特定文本的 div 并从 div 中删除此文本。例如

```
<div>
DeleteText
<span>Something text</span>
<div>Something span inner text </div>
</div> 
```

我需要**按文本**查找 div （例如 DeleteText）并从 div 中仅删除此文本。我该怎么做。

只应删除 DeleteText。所有其他 html 元素和内容应保持原样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T15:18:53.487

使用[**:contains**](http://api.jquery.com/contains-selector/)选择 div，然后过滤内容并删除节点。

```
$("div:contains('DeleteText')").contents().filter(function () {
    return (this.nodeType == 3 && $.trim(this.nodeValue) == 'DeleteText');
}).remove(); 
```

**演示：http:** [//jsfiddle.net/YkEy5/](http://jsfiddle.net/YkEy5/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T15:14:10.863

### 您需要为此使用[`:contains()`](http://api.jquery.com/contains-selector/)选择器。

您可以`DeleteText`通过以下方式找到：

```
$("div:contains('DeleteText')").html(""); 
```

要仅删除**text**，您可以使用此功能：

```
function removeText(element){
    var newElement = $('<' + element[0].nodeName + '/>');
    element.children().each(function(){
        newElement.append(this);
    });
    element.replaceWith(newElement);
} 
```

现在**结合两者**，你得到这个：

```
removeText($("div:contains('DeleteText')")); 
```

### 小提琴：http: [//jsfiddle.net/DwTmp/](http://jsfiddle.net/DwTmp/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T15:15:28.170

:包含()

这个选择器的文档在这里： [http ://api.jquery.com/contains-selector/](http://api.jquery.com/contains-selector/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T15:15:31.400

`$('div:contains("something span inner text")');`应该找到你的 div 项目

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-18T15:15:40.807

```
$("div:contains('DeleteText')").html(''); 
```

> 匹配的文本可以直接出现在所选元素中、该元素的任何后代中，或者它们的组合中。与属性值选择器一样，:contains() 括号内的文本可以写成裸词或用引号括起来。文本必须具有匹配的大小写才能被选中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-18T15:15:48.537

在下面试试这个

```
$('div:contains("sometext")').html('') 
```

这会查找带有“sometext”的 div 并放置空文本

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-18T15:16:05.283

你可以用 jQuery 做到这一点：

```
$("div[innerHTML=Something inner text]") 
```

# curve-fitting - von Karman 曲线拟合到现场测量的风谱

> ID：12957887
> 
> 赞同：1
> 
> 时间：2012-10-18T15:11:22.213
> 
> 标签：curve-fitting, spectrum

因此，对于这个风监测项目，我从几个 3d 声波风速计获取数据，特别是 2 RMYoung 81000。数据输出是数字化的，采样频率为 10Hz，周期为 10 分钟。经过所有的预处理（坐标旋转，趋势去除......），我得到了 3 个正交时间序列的湍流数据。现在，我正在使用 2 小时测量的固定数据，窗口为 4096 个点，重叠率为 50%，以获得所有三个方向的频谱。获得频谱后，我应用对数频率平滑算法，该算法以对数间隔对获得的频谱进行平均。

我有两个问题：

1.  我从测量中获得的频谱显示出最高频率的明显下降趋势，如附图所示。我想知道这种能量损失是否与声波风速计的内部过滤器有关？或者还有什么？有没有办法补偿这种损失或更好地考虑频谱直到“中断频率”？

[http://i.stack.imgur.com/B11uP.png](http://i.stack.imgur.com/B11uP.png)

1.  当应用曲线拟合算法根据 von Karman 方程确定积分长度尺度时，正确的程序是什么：曲线拟合原始数据，这会给更高频率的数据点更多的权重？或者使用对数频率平滑数据来近似冯卡曼方程，对数尺度中的数据给予相同的权重？在某些情况下，我使用这两种方法获得了非常不同的积分长度尺度估计值（例如：原始 -> Lu=113.16 Lv=42.68 Lw=9.23；频率平滑 -> Lu=148.60 Lv=30.91 Lw=14.13）。

使用对数频率平滑和原始数据进行曲线拟合：http: [//i.imgur.com/VL2cf.png](http://i.imgur.com/VL2cf.png)

如果有不清楚的地方，请告诉我。我在这个领域相对较新，我可能在我的方法中犯了一些错误，所以如果你能给我一些建议或提示，那就太棒了。

# tfs - 导入修正的工作项类型失败并出现 XML 验证错误

> ID：12957888
> 
> 赞同：0
> 
> 时间：2012-10-18T15:11:24.720
> 
> 标签：tfs, xml-validation, tfs-workitem

我正在尝试将建议值列表添加到 TFS 中特定工作项类型的字段中。

我已经成功地使用 witexport 来生成与工作项类型相关的 .xml

witexport /f "filename" /t "tfsuri" /p "tfsproject" /n "workitemtype" 并使用以下语法进行 import witimport /f "fielname" /t "tfsuri" /p "tfsproject"

但是当我尝试重新导入时，由于以下 Xml 验证错误的几个实例而失败。

第 n 行第 n 列的 Xml 验证错误：元素不能包含空格。内容模型为空

这一行的 xml 看起来像

`<Control Type="WebpageControl" LabelPosition="Top" Dock="Fill">`

第 n 行第 n 列的 Xml 验证错误：元素“控件不能包含子元素“LinksControlOptions”，因为父元素的内容模型为空

`<Tab Label="All Links"> <Control Type="LinksControl" LabelPosition="Top" Name="OtherLinks"> <LinksControlOptions> <LinkColumns>`

错误（行号）与我所做的更改相差无几，因此我决定尝试简单地导出和导入而不进行任何更改，但仍然收到与上述相同的错误。

非常感谢任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T14:49:51.627

我已经通过 Visual Studio 中的 IDE 导出和导入工作项类型来解决问题。

工具 - 流程编辑器 - 工作项类型 - 导入/导出 WIT

导出阶段的关键步骤是对问题“您是否希望包括全球列表定义”选择“否”。

然后我能够进行更改并成功重新导入

# asp.net-mvc - 在 MVC 中一次不能上传多个文件

> ID：12957889
> 
> 赞同：0
> 
> 时间：2012-10-18T15:11:25.957
> 
> 标签：asp.net-mvc, vb.net, asp.net-mvc-3

我发布到以下控制器操作：

```
<EmployeeAuthorize()>
<HttpPost()>
Function SendNewMessage(ByVal files1 As HttpPostedFileBase, ByVal files2 As HttpPostedFileBase) As JsonResult

    Debug.Print("files1=" + files1.ToString)
    Debug.Print("files2=" + files2.ToString)

    Dim result = New Dictionary(Of String, String)

    Dim fileName = Path.GetFileName(files1.FileName)
    Dim filePath = Path.Combine(Server.MapPath("~/App_Data/uploads"), fileName)

    files1.SaveAs(filePath)

    Dim fileName2 = Path.GetFileName(files2.FileName)
    Dim filePath2 = Path.Combine(Server.MapPath("~/App_Data/uploads"), fileName)

    files2.SaveAs(filePath)

    Return Json(result)

End Function 
```

我收到一条错误`Debug.Print("files2=" + files2.ToString)`消息，上面写着“ `NullReferenceException Object reference not set to an instance of an object.`”

这是我正在使用的视图：

```
 @Using Html.BeginForm("SendNewMessage", "Message", FormMethod.Post, New With {.id = "sendForm", .enctype="multipart/form-data"})

            @<div class="sendBox">

                <h2 style="margin: 10px 0 0 0;">Attachments:</h2>
                <label>Attachment 1: &nbsp;<input type="file" name="files1" id="file1" class="files"/></label>
                <label>Attachment 2: &nbsp;<input type="file" name="files2" id="file2" class="files"/></label>
                <label>Attachment 3: &nbsp;<input type="file" name="files3" id="file3" class="files"/></label>

                <input type="submit" value="Send" />

        </div>

        End Using 
```

第一个文件很好 ( `files1`)。为什么我不能上传多个文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T17:52:04.193

在您的代码中，您`fileName`两次使用相同的变量。`filePath`您使用两次的变量也是如此。所以替换：

```
Dim fileName2 = Path.GetFileName(files2.FileName)
Dim filePath2 = Path.Combine(Server.MapPath("~/App_Data/uploads"), fileName)
files2.SaveAs(filePath) 
```

和：

```
Dim fileName2 = Path.GetFileName(files2.FileName)
Dim filePath2 = Path.Combine(Server.MapPath("~/App_Data/uploads"), fileName2)
files2.SaveAs(filePath2) 
```

# java - Play Framework 2 对来自 Web 服务的数据进行分页

> ID：12957890
> 
> 赞同：0
> 
> 时间：2012-10-18T15:11:34.113
> 
> 标签：java, playframework, playframework-2.0

有几个 Play Framework 分页问题，​​但都在使用 JPA 或 ebean。我需要对从 Web 服务返回的数据进行分页。有没有办法用播放分页模块来做到这一点，还是我坚持使用 jQuery？我也是新手，Java 来自 asp.net MVC。Web 服务正在返回我正在查询的任何模型的列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T06:49:28.533

您不应该在 Play 的控制器中对来自 Web 服务的结果进行分页，因为它不是最佳的，请考虑 3 个场景（按此顺序）

假设您想一次显示 10 个项目，但您的生成器为示例查询返回 100.000（这意味着 10.000 个页面）

1.  分页应该由数据生成器（在本例中为 Web 服务）完成，因此您应该发送一个包含 data:`what are you looking for`和`how big page you want to get`ie `which page you need`:的查询`?q=pagination&size=10&page=123`。这将响应第 123 页上的 10 项列表。如果您有可能更改 Web 服务以添加分页，这是最好的选择。
2.  如果 Web 服务不提供分页，则一次获取所有结果并使用 jQuery 对其进行分页。因此，如果您将获得 100.000 个项目的集合，请将它们全部发送到客户端，并确保每次页面更改都不会导致查询 Web 服务。糟糕的选择，但仍然比下一个好。
3.  您可以迭代返回的结果以轻松地将其拆分为页面、计算总金额等。如果您将使用控制器对其进行分页，则在每次页面更改时它将获取 100.000 个项目，然后拆分为仅显示其中的 10 个. 戏剧 ：）

因此，如果您不能使用第一个选项并且不想使用 jQuery，请在您的服务器上对结果进行一些缓存（即，通过将结果作为单独的行存储在数据库中） - 在这种情况下，您将能够使用Ebean 用于本地搜索和寻呼。

# tsql - TSQL 拆分逗号分隔字符串

> ID：12957891
> 
> 赞同：1
> 
> 时间：2012-10-18T15:11:37.063
> 
> 标签：tsql, list, stored-procedures

我正在尝试创建一个存储过程，该过程将拆分网页上的 3 个文本框，这些文本框具有用户输入，其中都有逗号分隔的字符串。我们的表中有一个名为“combined_name”的字段，我们必须搜索名字和姓氏以及任何已知的错误或昵称等，例如 @p1: 'grei,grie' @p2: 'joh,jon,j.. ' p3: 是空的。

第三个框的原因是在我设置了基础知识之后，我们将不包含、开头、结尾和 IS 来进一步缩小我们的结果。

所以我希望得到所有包含这些的任何组合的记录。我最初是在 LINQ 中编写的，但它不起作用，因为您无法查询列表和数据集。数据集太大（130 万条记录）无法放入列表中，因此我必须使用存储过程，无论如何这可能会更好。

我是否必须使用 2 个 SP，一个用于拆分每个字段，一个用于选择查询，或者可以用一个来完成吗？我在 tsql 中使用什么函数来包含？我尝试使用 IN win a 查询，但无法弄清楚它如何与多个参数一起工作。

请注意，这将是一个访问受限的内部站点，因此担心 sql 注入不是优先事项。

我确实尝试了动态 SQL，但没有得到正确的结果：

```
 CREATE PROCEDURE uspJudgments @fullName nvarchar(100) AS
   EXEC('SELECT *
         FROM   new_judgment_system.dbo.defendants_ALL 
         WHERE  combined_name IN (' + @fullName + ')')
GO

EXEC uspJudgments @fullName = '''grein'', ''grien''' 
```

即使这确实检索到了正确的结果，如何使用 3 个参数来完成？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T07:23:27.090

您可以尝试使用[它](https://stackoverflow.com/questions/10914576/tsql-split-string)来拆分字符串并获取字符串表。然后要拥有所有组合，您可以使用这两个表的完全连接。然后做你的选择。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-07-09T11:13:18.367

这是我设置的表值函数：

```
ALTER FUNCTION [dbo].[Split] (@sep char(1), @s varchar(8000)) 
RETURNS table
AS
RETURN (     
    WITH splitter_cte AS (       
        SELECT CHARINDEX(@sep, @s) as pos, 0 as lastPos       
        UNION ALL      
        SELECT CHARINDEX(@sep, @s, pos + 1), pos       
        FROM splitter_cte       
        WHERE pos > 0     
    )     
    SELECT SUBSTRING(@s, lastPos + 1,                      
        case when pos = 0 then 80000                      
        else pos - lastPos -1 end) as OutputValues     
        FROM splitter_cte   
        )
) 
```

# itextsharp - ITextSharp - 添加水印；使 PDF 可编辑 - FormFlatening = false

> ID：12957894
> 
> 赞同：0
> 
> 时间：2012-10-18T15:11:44.350
> 
> 标签：itextsharp

我们有大量的 PDF 文件，我们正在创建一个网站以允许用户下载它们，当他们需要时，我们希望：

1.  在上面加上他们的名字的水印。
2.  我们希望表单字段保持打开状态，以便他们输入信息。
3.  我们希望能够打印和保存文档

当我将水印放在文档上然后打开它时，我收到来自 Adob​​e 的消息：

> “文档自创建以来已更改，无法再使用扩展功能。请联系作者...”

根据“iText-in-Action”一书，这是一个安全问题（第 8 章）。似乎有两种方法可以打开它们：

1.  删除使用权：这打破了上面的#3。
2.  以附加模式打开它：修改它并使用“FormFlatening = false”或true保存都没有关系，如果我在表单上放置水印，则字段不再可编辑。

Adobe 的错误消息确实描述了问题，我已经修改了带有水印的文档内容，因此表单字段被阻止。我尝试打开将水印放在上面的文档并将其保存到新文件中，然后将其关闭。然后重新打开它并尝试取消阻止表单字段，但它不起作用。

有谁知道这是否可能？我读过一些关于模板的东西；我不知道这是否是一个解决方案，因为需要将文档转换为模板？有谁知道这是否有帮助？

下面是我使用图像作为水印的代码示例，尽管我也尝试过添加文本：

```
 PdfReader reader = new PdfReader(sourceFile.FullName);
        //reader.RemoveUsageRights();

        var fileStream = new FileStream(outputPath, FileMode.Create, FileAccess.ReadWrite);

        PdfStamper pdfStamper = new PdfStamper(reader, fileStream, '\0', true);

        Image image = Image.GetInstance(imagePath);
        image.SetAbsolutePosition(250, 300);

        for (int i = 1; i <= reader.NumberOfPages; i++) // Must start at 1 because 0 is not an actual page.
        {
            PdfContentByte pdfPageContents = pdfStamper.GetUnderContent(i);

            pdfPageContents.AddImage(image);
        }

        pdfStamper.FormFlattening = false; // enable this if you want the PDF flattened. 
        //bool have = pdfStamper.PartialFormFlattening("test");
        pdfStamper.Close(); // Always close the stamper or you'll have a 0 byte stream. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T06:36:44.190

启用 Reader 的文档使用 Adob​​e 拥有的私钥进行数字签名。如果 Adob​​e Reader 可以使用 Adob​​e 的公钥验证该签名，则启用额外功能（例如，允许您保存已填写的表格）。

添加水印不是您可以对数字签名文档执行的操作的一部分。如果不使触发阅读器启用的数字签名无效，您绝对无法实现您想要的。

简而言之：您正在尝试做一些不可能的事情。您只能通过使用 Adob​​e 软件来实现这一点，因为您需要 Adob​​e 的私钥在破解后“恢复”阅读器启用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T13:52:30.500

好建议。

每次我重新启动计算机时，A​​dobe 都会抱怨需要更新。我想要的最后一件事是被黑客困住，这在未来可能行不通。

我的一个尝试是在 PDF 的不同图层上创建水印，希望它不会将其视为更改 PDF 的文本图层，但这不起作用。我的老板想从原始 PDF 中抓取文本并将其复制到新文档中，然后在其上添加水印。即使我创建了一个新的 PDF，它仍然认为它正在修改它，并且这些字段仍然不可编辑。

仍然卡住

# mongodb - 在 MongoDB 中的嵌入对象数组中搜索

> ID：12957901
> 
> 赞同：0
> 
> 时间：2012-10-18T15:12:10.667
> 
> 标签：mongodb

给定学校对象的这种结构：

```
{ 
  "grade_spans" : 
  {
       "0": { 
         "grade_span_key" : "K_5",
         "name":  "Elementary School"
       }, 
       "1": { 
         "grade_span_key" : "6_8",
         "name":  "Junior High-School"
       }
  }
} 
```

如何为给定的 Grade_span_key 找到学校？

```
db.schools.find({ "grade_span_key": "K_5" }) 
```

返回空。

**更新**：对不起，我错误地复制了结构。它实际上是一个嵌入式对象而不是一个集合。

**更新 #2**：我使用了一个不正确的原则 2 注释：@MongoDB\EmbedMany(strategy="set")。我将策略更改为 pushAll （这是默认设置）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T15:15:19.947

您应该使用属性的完整路径，以点分表示。

```
> db.schools.find({"grade_spans.grade_span_key": "K_5"})
{
    "_id" : ObjectId("50801cc5ab582e310adc0e41"),
    "grade_spans" : [
        {
            "grade_span_key" : "K_5",
            "name" : "Elementary School"
        },
        {
            "grade_span_key" : "6_8",
            "name" : "Junior High-School"
        }
    ]
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T15:37:30.320

如果此字段只是嵌入到主文档中，@sergios 答案将可以正常工作，并且不清楚为什么他的查询不起作用，因为您没有提供仅嵌入结构的文档结构示例。

同样正如@JohnnyHK 所说，将该对象重建为一个数组，因为在这种情况下动态键会更难。

如果您正在寻找从嵌入文档而不是完整文档中挑选出匹配的行。这有点困难，但有可能：

```
db.schools.aggregate({
    {$unwind: "$grade_spans"}, 
    {$match: {"grade_spans.grade_span_key": "K_5"}}, 
    {$group: {_id: "$_id", grade_spans: {$push: "$grade_spans"}}}
}) 
```

像上面这样的东西应该返回结构的文档：

```
{
    _id: {},
    grade_spans:[{
        "grade_span_key" : "K_5",
        "name" : "Elementary School"        
    }]
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-23T12:47:01.967

鉴于这种结构：

```
{ 
    "grade_spans" : {
        "0": {  "grade_span_key" : "K_5",
                "name":  "Elementary School" }, 
        "1": {  "grade_span_key" : "6_8",
                "name":  "Junior High-School" }
    }
} 
```

您可以尝试使用 map/reduce 功能：

```
var mapFunction = function() {
    for (var i in this.grade_spans) {
        // Add the name of the school in a list
        var schools = [];
        schools[0] = this.grade_spans[i].name;

        // Create out object : { schools : ["Elementary School"] } or { schools : ["Junior High-School"] }
        var out = {};
        out.schools = schools;

        // Create key (K_5 or 6_8)
        var key = this.grade_spans[i].grade_span_key;
        emit(key, out);
    }
};

var reduceFunction = function(key, values) {
    var schools = [];
    for (var i = 0; i < values.length; i++) {
        schools.push.apply(schools, values[i].schools);
    }
    return {schools:schools};
}

db.schools.mapReduce(
    mapFunction,
    reduceFunction,
    { out: "map_reduce_grade_spans", sort: {_id:1} }
) 
```

进而 ：

```
db.map_reduce_grade_spans.find({_id:"K_5"}); 
```

# java - cookie.setMaxAge 奇怪的行为

> ID：12957902
> 
> 赞同：0
> 
> 时间：2012-10-18T15:12:17.000
> 
> 标签：java, jsp, jakarta-ee, servlets, cookies

我在一个基于 jsp 的网站工作，该网站需要启用 cookie 才能导航它（它是一个内部站点，它不会暴露在互联网上）。

用户第一次访问将返回 302 到请求的相同 url，并设置一个小时的 cookie。

我`Cookie.setMaxAge(60*60);`用来设置到期日期。

对于某些浏览器的某些版本，我的行为非常奇怪，它们会永远重定向。（有些工作，有些不工作）。

经过大量调查，我们发现服务器中的时间设置不正确，并且它的时间设置为过去两个半小时，导致cookie可能“过期”为它已设置。（这是我的疑问）

不幸的是，这是一个生产服务器，我无法轻松更改它（正在请求它，但需要一些时间）。

为了确认这是问题所在，我将客户端机器的时间更改为过去两个半小时，它开始在该机器上正常工作。

我的问题是：

1.  什么信息被发送到浏览器（关于 cookie 到期
    日期），它是绝对日期还是相对于当前时间？
2.  如果它们与到期日期一起过期，浏览器是否会发送 cookie，或者浏览器是否在过期时不发送它们？（我认为是第二种选择）。
3.  因为我在使用某些浏览器时遇到了问题并且它与其他浏览器一起工作，所以不知道究竟是应用服务器还是浏览器中的问题？

**[编辑]**

在按照 Arham 的建议阅读 RFC 6265 后，服务器可以将到期日期设置为绝对或相对。如果两者都存在，则相对优先。我正在使用的应用服务器正在使用绝对值设置 cookie（这可能是错误的），所以我不明白它在某些浏览器上是如何工作的。

**[/编辑]**

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T15:29:32.437

1.  根据 RFC 1123，日期以“Wdy, DD Mon YYYY HH:MM:SS GMT”的形式指定。
2.  根据 RFC 6265，cookie 的过期时间与浏览器收到 cookie 的时间有关。
3.  浏览器会在 cookie 过期后删除它，因此它无法将相同的 cookie 发送到服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T16:20:39.943

javascript cookie 怎么样？

[http://www.w3schools.com/js/js_cookies.asp](http://www.w3schools.com/js/js_cookies.asp)

# javascript - 使用javascript修改一类元素的样式

> ID：12957904
> 
> 赞同：1
> 
> 时间：2012-10-18T15:12:18.670
> 
> 标签：javascript, html, css

> **可能重复：**
> [从 Javascript 更改 CSS 规则集](https://stackoverflow.com/questions/1409225/changing-a-css-rule-set-from-javascript)

我正在我的 jsp 页面中创建一个具有相同类名的元素列表。假设我正在创建 4 个与“someName”具有相同类名的元素。现在，我想使用 javascript.ie 动态修改这些元素的样式。即，当类的样式发生更改时，它应该反映在类名引用的所有元素中。此外，我必须使用 IE8 来执行此操作。这可以实现吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T15:17:11.260

简短的回答：是的

啊你也想知道怎么做？你为什么不问怎么做？

我给你一个 jQuery 的例子

```
$(".someName").css("background-color","green:); 
```

这将改变具有类“someName”的所有元素的背景颜色

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T15:20:48.870

最好的方法是为相关元素添加一个额外的类。

Javascript

```
var elements =  document.getElementsByClassName('oldClass');
for(var i = 0;i<elements.length;i++){
    elements[i].className += ' newClass' //dont forget the first space
} 
```

CSS

```
oldClass{color:red;}
newClass{color:white; font-weight:bold;} 
```

jQuery 解决方案更优雅，但您也可以使用普通的 ol' javascript 来完成。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-18T15:18:57.530

一般来说，我会按照@sven-bieder 的建议做，但要回答你的具体问题：查看这个答案[https://stackoverflow.com/a/1409250/45948](https://stackoverflow.com/a/1409250/45948)

# spring - 游戏的春季活动..它可以处理吗？

> ID：12957905
> 
> 赞同：2
> 
> 时间：2012-10-18T15:12:21.417
> 
> 标签：spring, spring-3

我正在考虑实现平板游戏，并且正在考虑针对游戏服务器端的各种解决方案。

游戏基本上循环通过一组状态，这些状态触发消息事件发送给客户端。消息发送是通过另一个 API 完成的。因此，事件侦听器将特定事件委托给消息发送者。

另一个侦听器处理传入的部分，但我只关心在状态更改时发送引发事件。

我看过 JMS 和 Spring 事件，我喜欢 Spring 事件，因为它们干净整洁，但不确定它们在服务器上如何应对。JMS 似乎很大，因为我大部分时间只听内部事件，不确定如果事情发生变化它们会如何工作.. 嗯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T15:49:27.030

说到春天，你可能会喜欢 AspectJ。“Spring in Action”一书中以非常好的方式描述了面向方面的事件处理方式。Spring AOP 可以帮助你。

# java - 在 Java 中分配 final 字段

> ID：12957910
> 
> 赞同：3
> 
> 时间：2012-10-18T15:12:36.813
> 
> 标签：java, final

我正在研究一个类，该类具有一些带有`final`访问修饰符的字段，例如：`final textField`并且由于某种原因我被允许分配给它们。当我将它们更改为时，`static final`我不能再为它们分配任何东西（它抱怨它们是最终的，就像它应该首先完成的那样）。任何想法为什么会发生这种情况？

第一种情况的示例：

```
final LabelField label_title;

label_title = new LabelField(
        "Press the button to launch the speed test",
        LabelField.FIELD_HCENTER); 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-18T15:14:38.560

您可以`final`在构造函数中分配字段，但不能在构造函数中分配`static final`字段。在任何情况下，您都不应该更改构造函数中的静态字段。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-18T15:26:48.747

当字段定义为`final`时，必须在构造对象时对其进行初始化，即您可以在构造函数中为其赋值。

一个`static`字段属于类本身，即每个类一个。因此，一个`static final`字段在每个对象一个的构造函数中是不可分配的。

希望它对你有意义！

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-18T15:18:27.437

final 成员的值不能更改。但允许在构造函数中初始化最终实例字段。班级成员不允许这样做。下一个片段显示了允许和不允许的内容：

```
public class Final {

    final static Integer INT1;  // compile error
    final static Integer INT2 = new Integer(2);
    final Integer int3;
    final Integer int4 = new Integer(4);

    public Final() {
        int3 = new Integer(3);
        int3 = new Integer(3); // compile error
    }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-18T15:14:57.047

来自[`JLS - final fields`](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.3.1.2)： -

> 可以将字段声明为最终字段（第 4.12.4 节）。类和实例变量（静态和非静态字段）都可以声明为 final。
> 
> 如果在其中声明它的类的静态初始化程序（第 8.7 节）没有明确地分配（第 16.8 节）一个空白 final（第 4.12.4 节）类变量，则这是一个编译时错误。
> 
> 必须在声明它的类的每个构造函数（第 8.8 节）的末尾明确分配一个空白的最终实例变量（第 16.9 节）；否则会发生编译时错误。

因此，`JLS`明确指定您应该`static final`在静态初始化程序块中分配您的字段。您不能在任何构造函数中分配它们。

因此，如果您有一个`static final`字段，您应该就地初始化它们，或者您可以使用 a`Static Initializer Block`来初始化它们。

此外，您可以`final`在构造函数中分配字段，前提是您以后不要在任何地方更改分配。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-18T15:22:53.333

静态字段属于类，它（应该）在类加载后立即初始化，如果它是 final 则必须初始化（需要分配值）。

当有人需要实例化类时调用构造函数。现在，如果您在构造函数中更改该静态最终字段的值，则意味着您正在尝试更改（或重新分配）它的值。

但是在静态初始化程序 ( `static { /* assign value here */ }`) 中这样做应该没问题，这意味着初始化类。

# java - 使用依赖注入实现数据访问 API

> ID：12957911
> 
> 赞同：2
> 
> 时间：2012-10-18T15:12:37.313
> 
> 标签：java, web-services, api, dependency-injection, guice

我是编写 API 的新手，做了一些研究并意识到要完成我想要的事情，我需要使用依赖注入来完成它。我正在编写一个具有两个数据源的 android 应用程序。一种是通过 Web 服务公开，另一种是 SQLlite。SQLlite 在没有数据连接可用时用作备份（暂时只对 API 的 webservice 部分感兴趣会重构）。我想编写一个 API，为其提供一个抽象层，根据所需的模型调用正确的数据访问类。因此，我有一个描述 api 应实现的方法的接口，称为 IDataAccess（仅对 getAll 感兴趣，目的是弄清楚要做什么）。

```
public interface IDataAccess {  
    public <T> List <T> getAll ();  
    public <T> T getById (int id);
}//end  IDataAccess 
```

我正在使用 Guice 进行依赖注入。guice 模块是：

```
public class Data extends AbstractModule {
    public void configure () {
        bind (IDataAccess.class).to(UserData.class);
    }
} 
```

IDataAccess 的实现是（注意我使用的是 Jersey 客户端 API）：

```
public class UserData extends DataAccessManager implements IDataAccess {    
    @SuppressWarnings("unchecked")
    public List <User> getAll () {
        WebResource webResource = client.resource (WebResourceURL.URL_USER_ALL);
        ClientResponse response = webResource.accept(MediaType.APPLICATION_JSON).get(ClientResponse.class);
        if (response.getStatus () == 200)
            return response.getEntity(new GenericType <List <User>> () {}) ;
        else
            return null;        
    }//end getAllUsers method
} 
```

我有一个类可以加载和实例化所需的任何资源。它还返回一个名为 DataAccessFactory 的 DataManager 实例。

```
public class DataAccessFactory {
    private Client client;
    private static DataAccessFactory instance;
    private DataAccessFactory() {
        client = Client.create();
    }
    public static DataAccessFactory getInstance() {
        /*
         * check if instance  variable is instantiated.
         * if it is not then instantiated it and returns
         * created instance.
         */
        if (instance == null) {
            instance = new DataAccessFactory();
            return instance;
        } else
            return instance;
    }//end getInstance method
    public DataAccessManager createDataAccessManager() {
        return new DataAccessManager(client);
    }//end createDataAccessManager method
} 
```

然后我有实际的 DataAccessManager 类：

```
public class DataAccessManager {
    protected Client client;
    protected DataAccessManager (Client client)n{
        this.client = client;
    }//end constructor 
    public <T>  List <Object> getAll(T t) {
        Data module = new Data ();
        Injector injector = Guice.createInjector(module);
        IDataAccess data = (IDataAccess) injector.getInstance(t.getClass());
        return (List<Object>) data;
    }//end fetchAllUser method
} 
```

要在此类上调用用户模型，我会执行以下操作：

```
@Test
public void fetchUser () {
        DataAccessManager m = DataAccessFactory.getInstance().createDataAccessManager();
        List<User> user = (List<User>)  m.getAll(new Userdata ());
        if (user == null)
            assertEquals(1, 2);
        else
            assertEquals(1, 1);
} 
```

理想情况下，我现在想要做的是，调用 UserData 来获取所有 User 对象或 OrderData（在编写实现时）类来获取所有订单对象等。

问题是这给出了一个错误：

> 无法从列表投射到列表

.我怎样才能解决这个问题或重组它以使其有意义？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T16:15:05.730

1) You are creating an injector (`Guice.createInjector`) per request. Injector creation is expensive and should normally be done during application loading. You should see DI as a bootstrap mechanism and keep it simple.

2) You don't need the DataAccessFactory. First there is no need for a factory as the createDataAccessManager instantiation does not require any logic and secondly Guice could also take care of the factory pattern.

I would personally keep it simple and inject with Guice directly the `UserData` instance into each service that needs it, without using the rather complicated Abstraction approach showed here. Still, it does not solve the problem of dealing with network issues. My guess is that each data access class will have to deal with connectivity in a specific way, so the logic should be directly here.

For the list casting problem, see [http://docs.oracle.com/javase/tutorial/java/generics/subtyping.html](http://docs.oracle.com/javase/tutorial/java/generics/subtyping.html)

If you will continue that way, I would recommend to read about [erasure](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&sqi=2&ved=0CB4QFjAA&url=http://docs.oracle.com/javase/tutorial/java/generics/erasure.html&ei=tyqAUMiFLtDOsgb_mIHwBQ&usg=AFQjCNEBnOVe2r3hRwjUknNy696Du68q-Q&sig2=jXNXYSeR2RQlnOOoNhLJvA) also.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T16:33:13.367

这是您经常遇到的问题。我们期望 as `String`is-a `Object`，`List<String>`is-a`List<Object>`也是真的。但事实并非如此。这就是为什么此类演员不起作用的原因：

```
@Test
public void fetchUser () {
//...
List<User> user = (List<User>)  m.getAll(new Userdata ());
//..
} 
```

我建议重写该`DataAccessManager.getAll()`方法以返回正确的列表。

`DataAccessManager.getAll()`作为记录，我在方法中发现了一个错字。我认为当你写`return (List<Object>) data;`的时候你宁愿写，`return List<Object> data.getAll();`否则你不能将 IDataAccess 转换为 List。

为了摆脱这种铸造地狱，我建议向`IDataAccess`接口及其实现添加一个类型：

```
public interface IDataAccess<T> {  
    public List <T> getAll ();  
    public T getById (int id);
}//end  IDataAccess

public class UserData extends DataAccessManager<User> implements IDataAccess<User> {
// your implementation
} 
```

我还要澄清 DataAccesManager 本身：

```
public class DataAccessManager<T> {
    //fields and constructors
    public List<T> getAll(IDataAccess<T> access) { //this is how the test suggests you want to use this method
        Data module = new Data ();
        Injector injector = Guice.createInjector(module);
        IDataAccess<T> data = (IDataAccess<T>) injector.getInstance(access.getClass()); //why is this line important? why don't you use the access parameter instead?
        return data.getAll();
    }
} 
```

# c++ - std::normal_distribution 运行时错误“整数除以零”

> ID：12957916
> 
> 赞同：1
> 
> 时间：2012-10-18T15:13:00.297
> 
> 标签：c++, random, std, normal-distribution

```
// construct a trivial random generator engine from a time-based seed:
unsigned seed = std::chrono::system_clock::now().time_since_epoch().count();
std::default_random_engine generator (seed);

std::normal_distribution<int> distribution (132,20);

std::cout << "some Normal-distributed results:" << std::endl;
for (int i=0; i<10; ++i)
  std::cout << distribution(generator) << std::endl; 
```

从[cplusplus](http://www.cplusplus.com/reference/std/random/normal_distribution/)的这个代码示例中，我得到运行时错误“整数除以零”。我唯一改变的是 normal_distribution from `double`to的类型`int`及其均值和标准差。

有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T15:27:35.843

to 的模板参数[`std::normal_distribution`](http://en.cppreference.com/w/cpp/numeric/random/normal_distribution)必须是浮点类型（`float`、`double`或`long double`）。使用其他任何东西都会导致未定义的行为。

由于正态分布是连续分布，因此在使用`int`类型时您期望它做什么并不十分清楚。也许你可以通过使用`normal_distribution<double>`并将结果四舍五入来得到你想要的结果`int`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-23T14:03:24.760

您可以使用`binomial_distribution`默认概率值 0.5。 [关联](http://www.cplusplus.com/reference/random/binomial_distribution/binomial_distribution/)

它将返回 [0,t] 范围内的整数值，平均值为 t/2（如果 t 偶数为 (t+1)/2，则 (t-1)/2 的概率相等）。您可以相应地设置 t 的值，并在需要时通过在结果中添加一个常数来进行移位。

二项分布是正态分布的离散近似（[链接](http://en.wikipedia.org/wiki/Binomial_distribution#Normal_approximation)）。理论上，正态分布没有下限/上限。

我更喜欢在原始包装上使用以下薄包装：

```
template <typename T>
class NormalDistribution {
private:
  std::mt19937 mt;
  std::normal_distribution<T> dis;
public:
  NormalDistribution(T mu, T sigma):dis(mu, sigma) {
    std::random_device rd;
    mt.seed(rd());
  }

  NormalDistribution(T mu, T sigma, unsigned seed ):dis(mu, sigma) {
    mt.seed(seed);
  }

  T random() {
   return dis(mt);
  }
};

template <>
class NormalDistribution<int> {
private:
  std::mt19937 mt;
  std::binomial_distribution<int> dis;
  int _min;
public:
  NormalDistribution(int min, int max):dis(max-min) {
    std::random_device rd;
    mt.seed(rd());
  }

  NormalDistribution(int min, int max, unsigned seed):dis(max-min), _min(min) {
    mt.seed(seed);
  }

  int random() {
   return dis(mt)+_min;
  }
}; 
```

# ios - 为什么在 Cocos2D 2.0 支持 NPOT 纹理时使用纹理图集？

> ID：12957918
> 
> 赞同：0
> 
> 时间：2012-10-18T15:13:04.233
> 
> 标签：ios, memory, cocos2d-iphone, atlas, texturepacker

据我所知，从 Cocos2D 2.0 开始，1025*1025 纹理使用的内存并不比 1024*1024 纹理多 4 倍，只是按比例增加。

如果我把我的纹理放到图集中，几乎总是有一些未使用的空间。这是浪费的。（更不用说 iOS5 POT 纹理内存错误，它使 POT 纹理图集浪费了 33% 以上的内存。）但如果我只是按原样使用我的纹理，那么就不会浪费内存。在我看来，Texture Atlases 的唯一优势是能够使用 SpriteBatchNode。但我的应用程序内存严重受限，我只支持支持 NPOT 纹理的设备。我知道 NPOT 纹理处理有点慢，但节省内存对我来说是最重要的。

我可能错了，请确认我，或者告诉我为什么我错了。谢谢！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T19:36:58.973

您应该针对最坏的情况进行设计。假设错误始终存在，并相应地设计您的应用程序的内存使用情况。不知道该错误是否会消失、重新出现，或者是更新的 iOS 版本引入的更严重的错误。

骑在内存完全使用的边缘并不是一个好主意，您总是必须留下一个阈值以允许偶尔出现奇怪的情况。新的 iOS 版本可能会引入另一个错误，占用更多内存，用户可能在后台运行的应用程序会占用更多内存，随着时间的推移可能会出现微小的内存泄漏等。

此外，CCSpriteBatchNode 可以用于任何纹理，而不仅仅是纹理图集。

# python - Python中字典中行拆分的制表符

> ID：12957921
> 
> 赞同：1
> 
> 时间：2012-10-18T15:13:18.467
> 
> 标签：python, dictionary, line-breaks

我正在尝试运行一个 python 程序，该程序可以从一个文件中运行一个字典，其中包含一个单词列表，每个单词都有一个分数和标准差。我的程序如下所示：

```
theFile = open('word-happiness.csv' , 'r')

theFile.close()

def make_happiness_table(filename):
   '''make_happiness_table: string -> dict
      creates a dictionary of happiness scores from the given file'''
   with open(filename) as f:
      d = dict( line.split('    ')  for line in f)
   return d

make_happiness_table("word-happiness.csv")

table = make_happiness_table("word-happiness.csv")
(score, stddev) = table['hunger']
print("the score for 'hunger' is %f" % score) 
```

我的 .csv 文件格式为

```
word{TAB}score{TAB}standard_deviation 
```

我正在尝试以这种方式创建字典。如何创建这样的字典，以便从函数中打印诸如“饥饿”之类的单词并获取其分数和标准偏差？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T15:15:46.080

```
def make_happiness_table(filename):
   with open(filename) as f:
      d = dict()
      for line in f:
         word,score,std = line.split() #splits on any consecutive runs of whitspace
         d[word]=score,std # May want to make floats:  `d[word] = float(score),float(std)`
   return d 
```

请注意，如果您`word`可以在其中包含一个`tab`字符，但您保证只有 3 个字段（word、score、std），您可以从右侧（`str.rsplit`）拆分字符串，只拆分两次（导致 3 个字段在结束）。例如`word,score,std = line.rsplit(None,2)`。

正如上面评论中提到的，您还可以使用该`csv`模块来读取这些类型的文件——`csv`如果您的字段可以被“引用”，那真是太棒了。例如：

```
"this is field 0" "this is field 1" "this is field 2" 
```

如果您没有这种情况，那么我发现它`str.split`工作得很好。

* * *

另外，不相关，但是您的代码调用`make_happiness_table`了两次（第一次您没有将返回值分配给任何东西）。第一个调用是无用的（它所做的只是读取文件并构建一个您永远无法使用的字典）。最后，脚本开头的`open`ing 和`close`ing也只是一种浪费，因为你没有对那里的文件做任何事情。`theFile`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T15:18:47.967

如果您确定您的单词没有空格，您可以拆分行，例如

```
word, score, stddev = line.split() 
```

但是，如果单词可以有空格，请使用制表符`\t`进行拆分，例如

```
word, score, stddev = line.split('\t') 
```

但是对于一个非常通用的情况，当单词本身可能有选项卡时，请使用 csv 模块

```
reader = csv.reader(filename, dialect='excel-tab')
for word, score, stddev  in reader:
    ... 
```

然后你可以创建单词和分数的字典，stddev 例如

```
word_dict[word] = (score, stddev) 
```

# iphone - 如何将 UIButton 定位到 UIToolbar 的最右侧？

> ID：12957923
> 
> 赞同：0
> 
> 时间：2012-10-18T15:13:27.903
> 
> 标签：iphone, xcode, user-interface, uibutton

> **可能重复：**
> [如何调整 UIToolBar 左右填充](https://stackoverflow.com/questions/6021138/how-to-adjust-uitoolbar-left-and-right-padding)

正如您在附图[1](https://i.stack.imgur.com/92pK9.png)中看到的那样，有一些填充物阻止 UIButton 一直向右移动。如何将按钮一直放在右侧，使其接触到屏幕的右侧？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T15:59:32.063

`flexible Space Bar Button`在 xib 或 Storyboard 中的按钮之前使用。

# asp.net - 按钮已禁用但看起来很活跃

> ID：12957924
> 
> 赞同：10
> 
> 时间：2012-10-18T15:13:36.787
> 
> 标签：asp.net, html, css, cross-browser

所以我有一个当前设置为禁用的按钮，在 IE 中它是灰色的，但在 Firefox、Chrome 和 Safari 中，它被禁用但看起来仍然处于活动状态。

按钮代码

```
<tr valign="middle">
    <td colspan="2" style="width: 100%">
        <asp:Button ID="DownloadButton" runat="server" Text="Download" Width="85px" CssClass="ESTableHeaderL" OnClick="DownloadButton_Click" />
    </td>      
  </tr> 
```

我的代码在后面

```
protected void DownloadButton_Click(object sender, EventArgs e)
{        
    if (ddBusinessMonth.Items.Count == 0)
    {
        DownloadButton.Enabled = false;
        ShowClientMessageBox("No Data found for downloading");
    }
....

} 
```

有什么办法可以让它看起来和 IE 一样吗？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-18T15:16:11.523

: [**disabled 选择器**](http://reference.sitepoint.com/css/pseudoclass-disabled)可以与 CSS3 一起使用

```
input[type="button"]:disabled
{
background:#dddddd;
} 
```

浏览器兼容性：

```
 IE8+ FF1.5+ SA3.1+ OP9.2+ CH2+ 
```

**对于 ASP.NET：**

将 CssClass 属性添加到服务器端按钮并将其引用到包含上述 CSS 的类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T15:19:17.373

如果它被禁用，您可以以编程方式分配一个 CSS 类

```
if (ddBusinessMonth.Items.Count == 0)
    {
        DownloadButton.Enabled = false;
        DownloadButton.CssClass = "disabledbutton";
        ShowClientMessageBox("No Data found for downloading");
    } 
```

css

```
.disabledbutton{
    background-color:#ddd;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-15T14:04:24.787

框架 4 以不同的方式呈现控件。将以下内容添加到您的 we.config 中，禁用的按钮将像往常一样变灰。

```
<pages controlRenderingCompatibilityVersion="3.5"/> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-05T19:22:59.680

无需使用自定义 CSS 类（不反对样式表）的快速方法，可以在后面的代码中完成。以下会将您的下载按钮的背景颜色设置为绿色（我认为它是绿色的，我是色盲 :-| ）：

```
DownloadButton.Attributes.Add("style", "background-color:#28C523"); 
```

# pdf - PDF有损压缩

> ID：12957925
> 
> 赞同：5
> 
> 时间：2012-10-18T15:13:38.920
> 
> 标签：pdf, compression, size

我正在寻找可以压缩 PDF 的库或命令行程序。

压缩速度和文件大小非常重要。

PDF 中充满了非常大的打印质量图像。

Adobe Acrobat 进行高质量、快速压缩，但不允许通过编程接口保存“缩小尺寸的 pdf”。

Ghostscript 的高质量压缩是否需要太长时间（分钟）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T20:30:49.903

如果可以选择商业图书馆，您可以尝试[Amyuni PDF Creator](http://www.amyuni.com/en/developer/pdfcreator/features/)。有 .net 版本（C#/VB.Net 等）和 ActiveX 版本（用于 C++/Delphi/VB/PHP 等）。

您可以遍历每个页面的所有对象，选择那些是图像的对象，并减小它们的大小。你有几种可能性：

1.  设置较低的压缩率。
2.  下采样（提取图像，将其重新调整为较低的分辨率，然后将其放回文件中）
3.  结合前两者。

以下是使用 Amyuni PDF Creator .Net 的 C# 中第一个选项的代码外观：

```
//open a pdf document
document.Open("c:\\temp\\myfile.pdf","");
IacPage page1 = document.GetPage (1);
Amyuni.PDFCreator.IacAttribute attribute = page1.AttributeByName ("Objects");
// listobj is an array list of graphic objects
System.Collections.ArrayList listobj = (System.Collections.ArrayList) attribute.Value;
foreach ( object pdfObj in listobj )
{
    if ((IacObjectType)pdfObj.AttributeByName("ObjectType").Value == IacObjectType.acObjectTypePicture)
    {
        if ((IacImageCompressionConstants)pdfObj.AttributeByName("Compression").Value == IacImageCompressionConstants.acCompressionJPegMedium)
            pdfObj.AttributeByName("Compression").Value = IacImageCompressionConstants.acCompressionJPegLow;

        if ((IacImageCompressionConstants)pdfObj.AttributeByName("Compression").Value == IacImageCompressionConstants.acCompressionJPegHigh)
            pdfObj.AttributeByName("Compression").Value = IacImageCompressionConstants.acCompressionJPegMedium;
        // (...)
    }
} 
```

*通常的免责声明适用*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T21:07:51.437

您可能想为您的任务尝试[Docotic.Pdf 库](https://bitmiracle.com/pdf-library/)。

这是一个缩放所有宽度或高度大于或等于 256 的图像的代码。然后使用 JPEG 压缩对缩放的图像进行编码，质量设置为 65。

```
public static void RecompressToJpeg(string path, string outputPath)
{
    using (PdfDocument doc = new PdfDocument(path))
    {
        foreach (PdfImage image in doc.Images)
        {
            // image that is used as mask or image with attached mask are
            // not good candidates for recompression
            if (!image.IsMask && image.Mask == null && (image.Width >= 256 || image.Height >= 256))
                image.Scale(0.5, PdfImageCompression.Jpeg, 65);
        }

        doc.Save(outputPath);
    }
} 
```

[您也可以使用RecompressWithJpeg](https://bitmiracle.com/pdf-library/help/pdfimage.recompresswithjpeg2.html)方法之一（或其他方法之一）仅重新压缩图像而不更改其大小`RecompressXXX`。

[并且可以使用ResizeTo](https://bitmiracle.com/pdf-library/help/pdfimage.resizeto2.html)方法之一将图像调整为指定的宽度和高度。请注意，在后一种情况下，您需要考虑纵横比。

免责声明：我为图书馆的供应商工作。

# c# - 解析表达式（带有自定义函数和操作）

> ID：12957926
> 
> 赞同：5
> 
> 时间：2012-10-18T15:13:40.567
> 
> 标签：c#, .net, expression-trees, postfix-notation

我有一个字符串，其中包含一个自定义表达式，我必须解析和评估：

例如：

```
(FUNCTION_A(5,4,5) UNION FUNCTION_B(3,3)) 
INTERSECT (FUNCTION_C(5,4,5) UNION FUNCTION_D(3,3)) 
```

FUNCTION_X 表示在 C# 中实现并返回 ILists 的函数。UNION 或 INTERSECT 是应该应用于列表的自定义函数，这些函数是从这些函数返回的。

Union 和 intersect 是通过 实现的`Enumerable.Intersect/Enumerable.Union`。

如何以优雅和可扩展的方式实现解析和评估？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T15:44:36.720

这取决于您的表达式将变得多么复杂，将有多少不同的运算符可用，以及大量不同的变量。无论您采用哪种方式，您都可能需要首先确定您的迷你语言的[语法。](http://en.wikipedia.org/wiki/Formal_grammar)

对于简单的语法，您可以编写一个自定义解析器。在许多计算器和类似应用程序的情况下，[递归下降](http://en.wikipedia.org/wiki/Recursive_descent_parser)解析器的表达能力足以处理语法并且编写起来很直观。链接的 Wikipedia 页面提供了示例语法和 C 解析器的实现。Eric White 还有[一篇](http://blogs.msdn.com/b/ericwhite/archive/2010/07/30/building-a-simple-recursive-descent-parser.aspx)关于在 C# 中构建递归下降解析器的博文。

对于更复杂的语法，您可能希望跳过自己创建它的工作并使用[lex](http://en.wikipedia.org/wiki/Lex_%28software%29) / [yacc](http://en.wikipedia.org/wiki/Yacc)类型的词法分析器和解析器工具集。[通常，您将EBNF](http://en.wikipedia.org/wiki/Ebnf)或类似语法的语法作为输入提供给这些语法，它们将生成为您解析输入所需的代码。解析器通常会返回一个您可以遍历的[语法树](http://en.wikipedia.org/wiki/Abstract_syntax_tree)，允许您为输入流中的每个标记（树中的每个节点）应用逻辑。对于 C#，我使用过[GPLex](http://plas.fit.qut.edu.au/gplex/)和[GPPG](http://plas.fit.qut.edu.au/gppg/) ，但也可以使用其他的，例如[ANTLR 。](http://en.wikipedia.org/wiki/Antlr)

## 基本解析概念

通常，您希望能够将输入中的每个项目拆分为一个有意义的标记，并基于这些标记构建一个树。构建树后，您可以遍历树并在每个节点处执行必要的操作。for 的语法树`FUNCTION_A(5,4,5) UNION FUNCTION_B(3,3)`可能如下所示，其中节点类型用大写字母表示，它们的值在括号中：

```
 PROGRAM
                           |
                           |
                         UNION
                           |
            ------------------------------
           |                              |
  FUNCTION (FUNCTION_A)          FUNCTION(FUNCTION_B)
        |                                 |
  -------------                       ----------
 |      |      |                     |          |
INT(5) INT(4) INT(5)                INT(3)     INT(3) 
```

解析器需要足够聪明，才能知道当`UNION`找到 a 时，需要为其提供两个联合项目，等等。给定这棵树，您将从根 ( `PROGRAM`) 开始并进行深度优先遍历。在`UNION`节点处，动作将是首先访问所有子节点，然后将结果合并在一起。在一个`FUNCTION`节点上，操作将首先访问所有子节点，找到它们的值，并将这些值用作函数的参数，然后根据这些输入评估函数并返回值。

对于所有令牌，对于您可以提出的任何表达式，这将继续。通过这种方式，如果您花时间让解析器生成正确的树，并且每个节点都知道如何执行它需要的任何操作，那么您的设计非常可扩展并且可以处理与其设计的语法匹配的任何输入。

# php - 在单独的关键字表中搜索匹配最多的 id

> ID：12957927
> 
> 赞同：0
> 
> 时间：2012-10-18T15:13:42.757
> 
> 标签：php, mysql, search, query-optimization

想象一下你有两张桌子

```
 table: name            table: keyword
 id   name              nameId   keyword
 1    dude1             1        blue
 2    dude2             1        tall
                        2        blue
                        2        short 
```

我的目标是，如果您搜索 blue and tall，结果将是：

```
name   matches
dude1  2
dude2  1 
```

我也在使用 PHP，但我想尽可能多地使用 MySQL。有任何想法吗？指出我正确的方向会很好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T15:15:48.763

您需要使用连接两列`INNER JOIN`（*如果您只想要在另一个表上至少匹配的记录，那就是它，否则使用`LEFT JOIN`*）并将它们链接到`name.id = keyword.nameid`. 使用聚合函数`COUNT`并按名称对它们进行分组。

```
SELECT a.name, COUNT(b.nameID)
FROM name a INNER JOIN keyword b
        on a.id = b.nameID
WHERE b.keyword = 'tall' or
      b.keyword = 'blue'
GROUP BY a.name 
```

或者

```
SELECT a.name, COUNT(b.nameID)
FROM name a INNER JOIN keyword b
        on a.id = b.nameID
WHERE b.keyword IN ('tall','blue') 
GROUP BY a.name 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/bd9b4/7)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T15:24:54.863

```
select n.name, `matches`
from
    name n
    inner join (
        select id, count(*) as `matches`
        from
            name n
            inner join
            keyword k on n.id = k.nameId
        where keyword in ('blue', 'tall')
        group by id
    ) s on s.id = n.id
order by name 
```

# c# - 是否有任何在 Windows 窗体应用程序中使用 CefGlue 或 CefSharp 的示例且设置最少？

> ID：12957930
> 
> 赞同：12
> 
> 时间：2012-10-18T15:13:55.333
> 
> 标签：c#, winforms, webkit, cefsharp

我（仍在）使用 Visual Studio 2005 并希望在 ac#winforms 应用程序中嵌入 webkit 浏览器，最好作为 winforms 控件。

我正在寻找一个简单的 CefGlue 或 CefSharp 示例以开始使用，以及最少的必要 dll。我无法理解 GitHub 上的 CefSharp 示例。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-15T11:01:30.273

这很容易，但非常遗憾地记录在案。

为了让它工作，我制作了一个新的 Forms 应用程序，并在我的表单中添加了一个 toolstripContainer。还在我的项目中添加了对 CefSharp.dll 和 CefSharp.WinForms.dll 的引用。

这是我班级的代码：

```
public partial class frmBrowser : Form, IRequestHandler
{
    private readonly WebView web_view;

    public frmBrowser()
    {
        InitializeComponent();
        web_view = new WebView("http://stackoverflow.com", new BrowserSettings());
        web_view.Dock = DockStyle.Fill; 
        web_view.RequestHandler = this;
        tsContainer.ContentPanel.Controls.Add(web_view);
    }

    #region IRequestHandler Members

    bool IRequestHandler.OnBeforeBrowse(IWebBrowser browser, IRequest request,
                               NavigationType naigationvType, bool isRedirect)
    {
        System.Diagnostics.Debug.WriteLine("OnBeforeBrowse");
        return false;
    }

    bool IRequestHandler.OnBeforeResourceLoad(IWebBrowser browser,
                                     IRequestResponse requestResponse)
    {
        System.Diagnostics.Debug.WriteLine("OnBeforeResourceLoad");
        IRequest request = requestResponse.Request;

        if (request.Url.EndsWith("header.png"))
        {
            MemoryStream stream = new System.IO.MemoryStream();

            FileStream file = new FileStream(@"C:\tmp\header.png", FileMode.Open, FileAccess.Read, FileShare.Read);
            byte[] bytes = new byte[file.Length];
            file.Read(bytes, 0, (int)file.Length);
            stream.Write(bytes, 0, (int)file.Length);
            file.Close();

            requestResponse.RespondWith(stream, "image/png");
        }

        return false;
    }

    void IRequestHandler.OnResourceResponse(IWebBrowser browser, string url,
                                   int status, string statusText,
                                   string mimeType, WebHeaderCollection headers)
    {
        System.Diagnostics.Debug.WriteLine("OnResourceResponse");
    }

    #endregion
} 
```

具有请求处理程序的区域是可选的，这是您想要影响调用的时候。在我的示例中，我将对标题图像的调用重新路由到我的 c 驱动器上的图像。

这就是你需要的代码。您还需要将以下文件添加到可执行文件的文件夹中：

*   avcodec-54.dll
*   avformat-54.dll
*   avutil-51.dll
*   铬.pak
*   icudt.dll
*   libcef.dll
*   libEGL.dll
*   libGLESv2.dll
*   语言环境文件夹

其中一些文件是可选的，具体取决于你想对它们做什么，但你可以用谷歌搜索。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-26T16:23:47.673

CefGlue（CEF1 的过时版本）和 Xilium.CefGlue (CEF3) 已经包含演示应用程序。Xilium.CefGlue 包含两个演示应用程序 - 第一个（称为 CefGlue.Demo 在 winforms 下的 windows 上工作并在 linux 上使用 GtkSharp）和 CefGlue.Client - 也是非常简单的仅限 winforms 的演示程序。所以 CefGlue.Client 已经有了非常简单的 winforms 控件。

UPD：针对 .NET 2.0 的 Xilium.CefGlue 程序集。Xilium.CefGlue.Client 针对 .NET 3.5 客户端配置文件。但总的来说，它不使用任何 3.5 特定的并且可以修复。但我建议使用最低 .NET 4.0 运行时，因为它有更好的 GC。在生产中安装 2.0 而不是 4.0 没有任何意义。

# jquery - jCryption jQuery 插件的 IE 9、IE 8 Comp 错误 - 由于缓存而未生成密钥对

> ID：12957931
> 
> 赞同：1
> 
> 时间：2012-10-18T15:13:59.897
> 
> 标签：jquery, internet-explorer, caching, internet-explorer-9, jcryption

我发现 Internet Explorer 9 和 Internet Explorer 8 Comp（到目前为止）与 jQuery 插件 jCryption 存在问题。在所述 IE 版本中第一次调用该页面可以正常工作。对页面的后续调用只会调用*握手*，而忽略*密钥对生成。*问题是这些版本的 IE 如何处理缓存。

我查看了 jCryption 的源代码，这里是调用*密钥对生成*的代码集：

```
/**
* Gets the data from the specified url, and converts it into a RSA keypair
* @param {string} url The URL to contact
* @param {string} data The JSON data
*/
$.getJSON(url, function(data) {
                var keys = new jCryptionKeyPair(data.e, data.n, data.maxdigits);
                if($.isFunction(callback)) {
                        callback.call(this, keys);
                }
        }); 
```

我将它的请求从 GET 更改为 POST，这有效地禁用了此请求的缓存。

```
$.ajax({
        url: url,
        dataType: 'json',
        type: "POST",
        success: function(data) {
                         var keys = new jCryptionKeyPair(data.e, data.n, data.maxdigits);
                         if ($.isFunction(callback)) {
                                 callback.call(this, keys);
                         }
                 }
        }); 
```

*握手*代码类似，因为它也发出一个 jQuery Ajax POST 请求。

# flash - 在 Flash Media Server 中为 Streams 和 FileObjects 使用 VirtualDirectory

> ID：12957937
> 
> 赞同：1
> 
> 时间：2012-10-18T15:14:19.480
> 
> 标签：flash, flash-media-server

我有一个应用程序，它不将其流保存在其应用程序目录中，而是通过在我的 application.xml 中使用以下内容保存在其他地方：

```
<Application>
<StreamManager>
    <VirtualDirectory>
          <!-- Specifies application specific virtual directory mapping for streams.   -->
        <Streams>/;C:\pathtomystreams</Streams>
    </VirtualDirectory>
</StreamManager>
</Application> 
```

这工作得很好。现在，我要做的是获取该目录中的流列表。我知道如何做到这一点的唯一方法是使用 File 对象，创建我的流文件夹的 File 对象，然后调用 File.list()。

Adobe 帮助提到我也可以将虚拟目录用于 File 对象： http: [//livedocs.adobe.com/flashmediaserver/3.0/hpdocs/index.html](http://livedocs.adobe.com/flashmediaserver/3.0/hpdocs/index.html)

```
<FileObject>
    <VirtualDirectory>/;C:\pathtomystreams</VirtualDirectory>
</FileObject> 
```

Adobe 帮助在这里没有提到 FileObject 标记应该嵌套在哪里，但是查看 vHosts Application.xml 指出它应该在 Application/ScriptEngine 中。我还在 vHosts Application.xml 中将 FileObject 元素的覆盖属性设置为“yes”。

但我只是没有找到正确的道路。当我在 main.asc 中编写这样的代码时：

```
var f = new File("/mystream.flv");
trace(f.toString()); 
```

结果跟踪读取*C:\\mystream.flv*而不是*C:\pathtomystreams\mystream.flv* 有趣的是，它还忽略了我可能添加到 vHosts Application.xml 中的任何 VirtualPath

可能我缺少一些配置设置。有谁知道我在这里可能会错过什么，或者我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T09:40:51.897

我忽略的 Server.xml 中确实有另一个配置设置：

```
<Root> 
    <Server> 
        <Security> 
            <!-- This is disabled by default. -->
            <VirtualDirectoryForFile enable="true"/>
        </Security>
    </Server>
<Root> 
```

The element VirtualDirectoryForFile has to be enabled to get it to work. So you have to make sure to have the override attribute set to true in the vHost.xml, and make sure that the enable attribute on VirtualDirectorForFile in the Server.xml is set to true.

# bash - 在 Shell 脚本中输出复制文件的名称

> ID：12957942
> 
> 赞同：0
> 
> 时间：2012-10-18T15:14:39.903
> 
> 标签：bash, shell, unix, output

我正在编写一个 bash 脚本来将配置文件复制到相应的目录中。我想输出我复制给用户的文件的名称。这是我到目前为止所拥有的：

```
CONFIG_DIR="/home/stackoverflow/app/configs"
CONFIG_FILE="*.config"

cp $CONFIG_FILE $CONFIG_DIR

echo "$CONFIG_FILE was copied to $CONFIG_DIR" 
```

我从中得到的输出是：

```
*.config was copied to /home/stackoverflow/app/configs 
```

假设 stackoverflow.config 是脚本运行目录中唯一的 .config 文件。我想说：

```
stackoverflow.config was copied to /home/stackoverflow/app/configs 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T15:19:40.083

添加 -v 以复制并让它打印所有文件名（每行一个名称）或将 echo 更改为

```
echo $CONFIG_FILE was copied to $CONFIG_DIR 
```

即删除双引号（在此示例中它们不是必需的）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T15:17:59.433

移动`$CONFIG`引号外部，以允许 shell 扩展其通配符：

```
echo $CONFIG_FILE "was copied to $CONFIG_DIR" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T15:27:16.610

```
CONFIG_DIR="/home/stackoverflow/app/configs"
for file in *.config
do
    cp $file $CONFIG_DIR
    echo $file was copied to $CONFIG_DIR
done 
```

# css - 带纹理背景的 CSS 点前导

> ID：12957952
> 
> 赞同：4
> 
> 时间：2012-10-18T15:15:08.780
> 
> 标签：css, list

如何在带纹理的背景上添加 CSS 点前导符？

我熟悉在元素之间添加点前导符，但是我找不到一种方法可以让我在文本位于带纹理的背景上时添加它们。

但是，因为菜单是动态的，所以元素不会有一个永久的位置。由于它们不是永久性的，我不能使用背景图像来使我的点工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T13:07:36.150

您可以使用浮点数和`display:block;overflow:hidden`.

如果浮动（左和右）放置在具有上述样式的块之前，它们将使该块的宽度等于父级的宽度减去它们的宽度。

所以，这里是[dabblet 的实时示例](http://dabblet.com/gist/4161142)——你可以用几乎任何标记来实现它，并在领导元素上使用任何样式（背景而不是虚线边框）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-04T14:39:43.760

我做了一个小实验：

**[http://jsfiddle.net/Tymek/5QYEz/](http://jsfiddle.net/Tymek/5QYEz/)**

HTML

```
<ul class="leaders">
    <li>
        <span class="description">Pierwszy punkt</span>
        <span class="destination">2</span>
    </li>
    <li>
        <span class="description">Drugi element listy</span>
        <span class="destination">5</span>
    </li>
</ul> 
```

CSS

```
ul.leaders {
    list-style: none;
    margin-top: -0.3em;
}

ul.leaders li {
    height: 1.2em;
    display: block;
    border-bottom: 1px dotted #000;
}

ul.leaders .description,
ul.leaders .destination {
    display: block;
    margin: 0.3em 0 -0.3em 0;
    background: #fff;
}

ul.leaders .description {
    float: left;
    padding-right: 0.2em;
}

ul.leaders .destination {
    float: right;
    padding-left: 0.2em;
} 
```

​</p>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T15:05:38.350

OP 在使用带纹理的背景时寻求帮助，简单地用背景颜色掩盖元素将无法满足 OP 的要求。我也遇到了同样的问题。w3.org 上的建议也不满足这个要求。：/

# ipad - Ipad -webkit-box-flex 超级慢

> ID：12957955
> 
> 赞同：1
> 
> 时间：2012-10-18T15:15:15.050
> 
> 标签：ipad, css, webkit

我有一个奇怪的问题，Ipad 上有灵活的盒子。

我真的很喜欢`-box-flex`css3 中的期货，但是，

当我`-webkit-box-flex: 1` 在页面上使用时，我的 HTML5 网站非常非常慢，尤其是当我尝试显示页面上已经存在的弹出框时，我可以感觉到它，我只是显示/隐藏该框。

我的 CSS 前：

```
 -webkit-box-flex: 1,
   box-flex: 1 
```

我使用的 flex 框越多，网站越慢，如果我删除所有 flex 并添加 static`width`和 use `float`，一切正常。

有人也有这个问题吗？它是 webkit 错误还是其他什么。有人有修复或替代方式来使用 flex 吗？

我也发现了这个信息：

[http://css-tricks.com/old-flexbox-and-new-flexbox/](http://css-tricks.com/old-flexbox-and-new-flexbox/)

他们建议使用的地方，`display: flex;`而`display: box;`不是

`-webkit-box-flex: 1`使用`-webkit-flex: 1`

我已经尝试过，并且在我使用 chrome（桌面）时确实有帮助，但是 Ipad safari 似乎不支持新的`-webkit-flex`

我非常感谢在我的情况下我能做的任何帮助或建议。

谢谢 ！！

# asp.net-mvc - 如何在 Ninject 中使用 griffin.mvccontrib.localization

> ID：12957969
> 
> 赞同：2
> 
> 时间：2012-10-18T15:15:49.013
> 
> 标签：asp.net-mvc, localization, ninject, autofac, griffin.mvccontrib

我正在尝试在我的 Asp.net MVC 应用程序中使用 MVC Contrib Localization，现在我让它处理资源文件，但我想将它与 Sql Server 一起使用，

我正在查看本教程： http: [//www.codeproject.com/Articles/352583/Localization-in-ASP-NET-MVC-with-Griffin-MvcContri](http://www.codeproject.com/Articles/352583/Localization-in-ASP-NET-MVC-with-Griffin-MvcContri)

但它使用 Autofac 作为 IoC 容器，我不明白，有人用过 Ninject 吗？或者任何人都知道如何将此 Autofac 代码转换为 Ninject：

```
// Loads strings from repositories.
builder.RegisterType<RepositoryStringProvider>().AsImplementedInterfaces().InstancePerLifetimeScope();
builder.RegisterType<ViewLocalizer>().AsImplementedInterfaces().InstancePerLifetimeScope();

// Connection factory used by the SQL providers.
builder.RegisterInstance(new AdoNetConnectionFactory("DemoDb")).AsSelf();
builder.RegisterType<LocalizationDbContext>().AsImplementedInterfaces().InstancePerLifetimeScope();

// and the repositories
builder.RegisterType<SqlLocalizedTypesRepository>().AsImplementedInterfaces().InstancePerLifetimeScope();
builder.RegisterType<SqlLocalizedViewsRepository>().AsImplementedInterfaces().InstancePerLifetimeScope(); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T02:48:20.130

我目前正在尝试使用 Ninject.Web.MVC NuGet 包做同样的事情。

我不确定 Ninject 是否有类似的东西，`.AsImplementedInterfaces()`但是如果没有，您仍然可以自己绑定接口，它只是更多的手动工作，查看 Griffin.MvcContrib 的类以及它们实现的接口。

放入 NinjectWebCommon RegisterServices 方法的一个示例是：

```
private static void RegisterServices(IKernel kernel)
{
    kernel.Bind<ILocalizedStringProvider>()
           .To<RepositoryStringProvider>().InRequestScope();
...
} 
```

`InRequestScope`扩展名（[https://github.com/ninject/Ninject.Web.Common/wiki/Inrequestscope](https://github.com/ninject/Ninject.Web.Common/wiki/Inrequestscope)），从我目前所读到的，是我能看到的最接近AutoFac `.InstancePerLifetimeScope()` [http://code.google.com /p/autofac/wiki/InstanceScope](http://code.google.com/p/autofac/wiki/InstanceScope)

至于`.RegisterInstance(new AdoNetConnectionFactory("DemoDb")).AsSelf();`

Ninject有一种`.ToSelf()`方法，但我自己还不完全确定这条线在做什么。

# titanium - java.lang.IllegalArgumentException：已添加：Lorg/w3c/dom/UserDataHandler；

> ID：12957970
> 
> 赞同：0
> 
> 时间：2012-10-18T15:15:56.690
> 
> 标签：titanium, titanium-mobile, titanium-modules

我尝试将我的模块（适用于 Android）集成到钛应用程序。

我集成它，在我添加到 tiapp.xml 之后：

```
<modules>
        <module platform="android" version="1">com.android.manager</module>
 </modules> 
```

我得到错误：

```
[ERROR] System Error while compiling Android classes.dex
[ERROR] 
[ERROR] UNEXPECTED TOP-LEVEL EXCEPTION:
[ERROR] java.lang.IllegalArgumentException: already added: Lorg/w3c/dom/UserDataHandler;
[ERROR]     at com.android.dx.dex.file.ClassDefsSection.add(ClassDefsSection.java:123)
[ERROR]     at com.android.dx.dex.file.DexFile.add(DexFile.java:163)
[ERROR]     at com.android.dx.command.dexer.Main.processClass(Main.java:486)
[ERROR]     at com.android.dx.command.dexer.Main.processFileBytes(Main.java:455)
[ERROR]     at com.android.dx.command.dexer.Main.access$400(Main.java:67)
[ERROR]     at com.android.dx.command.dexer.Main$1.processFileBytes(Main.java:394)
[ERROR]     at com.android.dx.cf.direct.ClassPathOpener.processArchive(ClassPathOpener.java:245)
[ERROR]     at com.android.dx.cf.direct.ClassPathOpener.processOne(ClassPathOpener.java:131)
[ERROR]     at com.android.dx.cf.direct.ClassPathOpener.process(ClassPathOpener.java:109)
[ERROR]     at com.android.dx.command.dexer.Main.processOne(Main.java:418)
[ERROR]     at com.android.dx.command.dexer.Main.processAllFiles(Main.java:329)
[ERROR]     at com.android.dx.command.dexer.Main.run(Main.java:206)
[ERROR]     at com.android.dx.command.dexer.Main.main(Main.java:174)
[ERROR]     at com.android.dx.command.Main.main(Main.java:91)
[ERROR] 1 error; aborting 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T13:55:12.483

主要问题是：{code} @Kroll.module(name="SensorManager", id="com.android.manager") 中的名称不一样：com.android.manager.Name ……

# c++ - 如何让 crosstool-ng C++ 编译器工作

> ID：12957977
> 
> 赞同：5
> 
> 时间：2012-10-18T15:16:15.237
> 
> 标签：c++, linux, arm, cross-platform, crosstool-ng

我正在尝试让 crosstool-ng 同时使用 C 和 C++。即使我在使用 menuconfig 时选择了 C++，它似乎也没有构建。gcc 编译器按预期工作，但不是 g++

我不确定我做错了什么，所以任何帮助将不胜感激。

我按照此处找到的步骤操作： [使用 Crosstool-NG 构建嵌入式 ARM 系统](http://briolidz.wordpress.com/2012/02/07/building-embedded-arm-systems-with-crosstool-ng/)

```
$ arm-unknown-linux-gnueabi-cpp main.cpp -o test
arm-unknown-linux-gnueabi-cpp: main.cpp: C++ compiler not installed on this system 
```

注意：在 bin 目录中没有`arm-unknown-linux-gnueabi-g++`找到。我尝试过跨工具版本 1.16.0 和 1.15.3

```
arm-unknown-linux-gnueabi-cpp -v
Using built-in specs.
Target: arm-unknown-linux-gnueabi
Configured with: /opt/crossArm/.build/src/gcc-4.3.2/configure --build=i686-build_pc-linux-gnu --host=i686-build_pc-linux-gnu --target=arm-unknown-linux-gnueabi --prefix=/opt/crossArm/.build/arm-unknown-linux-gnueabi/buildtools --with-local-prefix=/home/jgarvin/x-tools/arm-unknown-linux-gnueabi/arm-unknown-linux-gnueabi/sysroot --disable-libmudflap --with-sysroot=/home/jgarvin/x-tools/arm-unknown-linux-gnueabi/arm-unknown-linux-gnueabi/sysroot --enable-shared --with-pkgversion='crosstool-NG 1.16.0' --with-float=soft --enable-__cxa_atexit --with-gmp=/opt/crossArm/.build/arm-unknown-linux-gnueabi/buildtools --with-mpfr=/opt/crossArm/.build/arm-unknown-linux-gnueabi/buildtools --enable-target-optspace --disable-libgomp --disable-libmudflap --disable-nls --disable-multilib --enable-languages=c
Thread model: posix
gcc version 4.3.2 (crosstool-NG 1.16.0) 
```

### 代码

```
#include<iostream>

using namespace std;

int main(){
   cout<<"Hello World"<<endl;
return 0;
} 
```

在我的`build.log`文件中，我看到 C++ 选项已打开

```
[DEBUG]    CT_CC_SUPPORT_CXX=y 
```

我也在`config.log`：

```
configure:3030: $? = 0
configure:3019: gcc -v >&5
Using built-in specs.
COLLECT_GCC=gcc
COLLECT_LTO_WRAPPER=/usr/lib/gcc/i686-linux-gnu/4.6/lto-wrapper
Target: i686-linux-gnu
Configured with: ../src/configure -v --with-pkgversion='Ubuntu/Linaro 4.6.3-1ubuntu5' --with-bugurl=file:///usr/share/doc/gcc-4.6/README.Bugs --enable-languages=c,c++,fortran,objc,obj-c++ --prefix=/usr --program-suffix=-4.6 --enable-shared --enable-linker-build-id --with-system-zlib --libexecdir=/usr/lib --without-included-gettext --enable-threads=posix --with-gxx-include-dir=/usr/include/c++/4.6 --libdir=/usr/lib --enable-nls --with-sysroot=/ --enable-clocale=gnu --enable-libstdcxx-debug --enable-libstdcxx-time=yes --enable-gnu-unique-object --enable-plugin --enable-objc-gc --enable-targets=all --disable-werror --with-arch-32=i686 --with-tune=generic --enable-checking=release --build=i686-linux-gnu --host=i686-linux-gnu --target=i686-linux-gnu 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T00:34:34.357

来自，[http://briolidz.wordpress.com/2012/02/07/building-embedded-arm-systems-with-crosstool-ng/](http://briolidz.wordpress.com/2012/02/07/building-embedded-arm-systems-with-crosstool-ng/)

> 通过运行 menuconfig 界面来优化您的配置：
> 
> $ ./ct-ng 菜单配置

在这一步中，导航到**C 编译器**菜单。然后您可以选择*C++*或取消选择*Java*、*Fortran*等。由于**crosstool-ng**只是一堆脚本和补丁文件，因此开发构建破坏事物的情况很少见。*您可以随时从hg*存储库中提取。

> hg 克隆[http://crosstool-ng.org/hg/crosstool-ng](http://crosstool-ng.org/hg/crosstool-ng)
> cd crosstool-ng
> ./bootstrap
> make
> sudo make install

这将有最新的修复。我已经使用这种方法多次构建了支持 C++ 的 arm 交叉编译器 [包括来自 x86_64 主机的 Mingw 和 i386 的*加拿大交叉编译器]。*

**编辑：**我看到*wordpress*链接建议本地安装*ct-ng*。上面的命令进行完整安装，将东西放在*/usr/local*中。此外，似乎 OP 确实尝试设置 menuconfig 的 C++ 选项。尝试更改*sjlj*值，使用最新版本的*ct-ng*并安装它。这为我在 Ubuntu 上生成了一个 ARM Linux C++ 交叉编译器。*build.log*输出有助于确定*ct-ng*是否决定某些配置是不可能的。

最后，邮件列表*crossgcc@sourceware.org*不需要订阅 afaik。[http://sourceware.org/ml/crossgcc/](http://sourceware.org/ml/crossgcc/)上的档案可能会有所帮助。如果您仍然有问题，我相信邮件列表中的某个人将能够为您提供帮助。

~~**编辑：**使用最新的*ct-ng*安装尝试，~~

> ~~$ ct-ng arm-cortex_a15-linux-gnueabi #Alternate *arm-yem-linux-gnueabi*
> $ ct-ng menuconfig # 调整你的处理器、gcc 版本等
> $ ct-ng build # 去喝杯咖啡（或者继续工作别的东西）。~~

抱歉，您的主机编译器是用 Linaro 制作的。我对你的编辑读得太多了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-01-09T22:29:57.110

我有类似的问题。事实证明，我正在查看错误的 bin 目录`.build`。工具链的最终版本安装在`~/x-tools`...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-11T14:20:56.113

如果您仍在寻找有关在 arm 平台上编译 c++ 的答案：

安装 crosstool-ng：

```
tar xjf <ct-ng archive>
cd crosstool-ng-<numversion>
# reset of LD_LIBRARY_PATH is required to avoid issues with crosstool-ng
unset LD_LIBRARY_PATH
./configure prefix=<installDir>
#example ./configure prefix=/opt/cross-rpi
make
make install
#required to make sure you get the right on in case
export PATH=<installDir>/bin:$PATH
#check what version is on now.
which ct-ng 
```

现在创建并启动配置：

```
mkdir chain-build #the directory hosting the build files of your cross compil chain
cd chain-build
ct-ng menuconfig 
```

设置选项与 arm 平台相关，其中包括：

**路径和其他选项**

*   配置最大日志级别以查看**WARN**而不是**INFO**，这完全使日志混乱，并且在我看来使它们难以使用，对于通常的用例来说噪音太大了。

**目标选项 操作系统**

*   目标架构

    *   手臂
*   系统

    *   linux

**二进制实用程序** - 选择 binutils 的最新版本

**C 编译器**

*   GCC : 选择**Show linaro Versions**然后选择最新的 linaro gcc (根据经验，比非 linaro 更稳定)

*   C++：检查一下 ![c++ 检查](../Images/5fa387d801f0fa8b889bf05bc05a90d3.png)

现在构建你的工具链

```
ct-ng build
# once done check the content of the bin dir
ls <yourChainInstallDir>/x-tools/arm-unknown-linux-gnueabi/bin 
```

你应该得到这样的东西： ![二进制文件](../Images/458b04ddc1208ee695cc1ad48c9244a9.png)

要编译 c++ 代码，你应该只需要 g++。要检查 g++ (for arm) 是否正常工作，请输入

```
arm-unknown-linux-gnueabi-g++ -v 
```

你应该得到类似的东西：

```
Using built-in specs.
COLLECT_GCC=x-tools/arm-unknown-linux-gnueabi/bin/arm-unknown-linux-gnueabi-g++
COLLECT_LTO_WRAPPER=/opt/cross1.19/x-tools/arm-unknown-linux-gnueabi/libexec/gcc/arm-        unknown-linux-gnueabi/4.8.2/lto-wrapper
Target: arm-unknown-linux-gnueabi
[...]
blahblah
[...]
gcc version 4.8.2 20130603 (prerelease) (crosstool-NG 1.19.0) 
```

收到此消息后，您应该没问题。

唯一需要注意的另一件事是，您是否拥有编译代码所需的所有**库。**

例如，在 Raspberry-pi（使用 Raspbian）上，一些库必须从**/lib**和**/usr/lib**手动导入（然后放入您的 LD_LIBRARY_PATH 中）。

有时，gcc 或 g++ 的包含不会复制到工具链的包含目录中（使用 crosstool-ng 时，会出现几次问题），因此您需要从 /usr/include 目录中获取包含。

# html - 屏幕像素和照片像素

> ID：12957978
> 
> 赞同：0
> 
> 时间：2012-10-18T15:16:38.473
> 
> 标签：html, mobile

我有一部手机，它的硬件规格说它有 900x480 的分辨率，所以我做了一个 480px 宽度的图片嵌入到一个 html 文件中。然后我用手机打开那张图片，发现图片放不下屏幕，明显比屏幕大。

那有什么问题？我希望 480px 宽度的图片适合没有滚动条的屏幕，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T15:24:53.953

您可以使用 100% 宽度来填充没有滚动条的屏幕：

```
<img src="url" class="myImg" />

.myImg
{
  width:100%;
} 
```

# c# - 使用c#获取word消息框内容

> ID：12957982
> 
> 赞同：3
> 
> 时间：2012-10-18T15:17:05.110
> 
> 标签：c#, visual-studio-macros

我有一个 ac# 应用程序，它正在打开一个 word 文档，运行一个 .bas 宏，然后关闭 word。所有这些工作正常。宏生成 2 个带有宏结果的消息框对话框。我想将这些消息传达给我的 c# 应用程序。我怎样才能做到这一点？

这是我的代码：

```
 // Object for missing (or optional) arguments.
        object oMissing = System.Reflection.Missing.Value;

        // Create an instance of Word, make it visible,
        // and open Doc1.doc.
        Word.Application oWord = new Word.Application();
        oWord.Visible = true;
        Word.Documents oDocs = oWord.Documents;
        object oFile = @"c:\\Macro.docm";

        // Open the file.
        Word._Document oDoc = oDocs.Open(ref oFile, ref oMissing,
            ref oMissing, ref oMissing, ref oMissing, ref oMissing,
            ref oMissing, ref oMissing, ref oMissing, ref oMissing,
            ref oMissing, ref oMissing, ref oMissing, ref oMissing,
            ref oMissing, ref oMissing);

        // Run the macro.
        oWord.GetType().InvokeMember("Run",
        System.Reflection.BindingFlags.Default |
        System.Reflection.BindingFlags.InvokeMethod,
        null, oWord, new Object[] { "MyMacro" });

        // Quit Word and clean up.
        oDoc.Close(ref oMissing, ref oMissing, ref oMissing);
        System.Runtime.InteropServices.Marshal.ReleaseComObject(oDoc);
        oDoc = null;
        System.Runtime.InteropServices.Marshal.ReleaseComObject(oDocs);
        oDocs = null;
        oWord.Quit(ref oMissing, ref oMissing, ref oMissing);
        System.Runtime.InteropServices.Marshal.ReleaseComObject(oWord);
        oWord = null;

        return "all done!"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T15:26:08.560

我过去为此使用的解决方案不适合胆小的人。它基本上涉及使用良好的老式 Windows API 调用来查找消息框，然后枚举其“窗口”（控件），直到找到带有所需文本的控件。

如果消息框始终具有相同的标题，您应该能够使用 API 调用 FindWindowEx 来定位窗口。一旦你有了它的窗口句柄，你就可以使用 EnumChildWindows 来运行它的控件，直到你找到你想要的那个。您通常可以使用 GetWindowText 或 GetClassName 或两者的组合来限定正确的控件。一般来说，控件的文本应该可以使用 GetWindowText，但我不知道 MS 用于这个特定窗口的控件是什么。

祝你好运！

[FindWindowEx 示例](https://stackoverflow.com/questions/5673099/c-sharp-get-child-handles-using-findwindowex-by-name-and-ordinal-number)

[EnumChildWindows 示例](https://stackoverflow.com/questions/1363167/how-can-i-get-the-child-windows-of-a-window-given-its-hwnd)

# jsf - 是否可以使用 UIInput 值中的参数调用方法？

> ID：12957987
> 
> 赞同：0
> 
> 时间：2012-10-18T15:17:13.473
> 
> 标签：jsf, jsf-2, properties, primefaces

我有这个支持bean：

```
@ManagedBean(name="testController")
public class TestController {
    private String foo = "fooTest";
    private List<A> alist;

    public A fetchAlist(int index)  {
        alist = ListInflater.get(alist, A.class, index); //only used for incrementing list

        return alist.get(index);
    }

    public String getFoo() {
        return foo;
    }

    public void setFoo(String foo) {
        this.foo = foo;
    }
} 
```

我想通过访问 fetchAlist(x) 作为页面中的属性来调用 A 类中的属性，如下所示：

```
<html xmlns="http://www.w3.org/1999/xhtml"  
    xmlns:h="http://java.sun.com/jsf/html"  
    xmlns:f="http://java.sun.com/jsf/core"  
    xmlns:p="http://primefaces.org/ui"> 

 <h:head><title>Test</title></h:head>
 <h:body>
  <h:form>
    Test List
    <p:inputText value="#{testController.fetchAlist(2).aparam}" /><br /><br />
  </h:form>
</h:body>
</html> 
```

不幸的是，这还不起作用，因为 EL 将此列表理解为属性，但它不是属性而是方法。有没有可能实现这样的调用？

**[更新]**
我发现这一切都适用于**h:inputText**，所以也许这是一个 PrimeFaces 错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T15:35:26.903

您可以只使用大括号符号按索引引用列表项：

```
@ManagedBean
public class TestController {

    private List<A> alist;

    @PostConstruct
    public void init() {
        alist = createItSomehow();
    }

    public List<A> getAlist()  {
        return alist;
    }

} 
```

和：

```
<p:inputText value="#{testController.alist[2].aparam}" /> 
```

如果您出于某种原因更喜欢执行每个列表项的延迟加载，那么您最好的选择是提供一个自定义`List`实现，您可以在其中完成所需的工作`List#get(int)`方法。

# matlab - matlab更改uigetdir的设置

> ID：12957989
> 
> 赞同：1
> 
> 时间：2012-10-18T15:17:27.203
> 
> 标签：matlab, user-interface

如何更改行的大小和字体颜色：“请选择相机的目录”？

```
camera_folder_name = uigetdir('C:\', 'Please choose the directory of the camera'); 
```

它是如此之小：/

![在此处输入图像描述](../Images/225dd7644c9ae9da1c4d8d5d49daf471.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T15:57:26.437

*简而言之：你不能改变它，至少在官方上是这样*

Matlab 仅调用打开文件对话框的 Windows API 函数。字体大小在 Windows 用户首选项中确定。可能有一些[未记录](http://www.undocumentedmatlab.com)的东西，但像往常一样，谨慎使用这些东西。

# java - jsp中的动态图像

> ID：12957990
> 
> 赞同：0
> 
> 时间：2012-10-18T15:17:37.723
> 
> 标签：java, image, spring, spring-mvc

我尝试使用 Spring mvc 控制器以动态方式生成图像。

```
@Controller
@RequestMapping("/")
public String generateMik(final HttpServletResponse response){
...
BufferdImage image = new BufferedImage(width, height, BufferedImage.TYPE_INT_RGB);
...

response.setContentType("image/png");
try {
    OutputStream os = response.getOutputStream();
    ImageIO.write(buffer, "png", os);
    os.flush();
    os.close();
...
} 
```

我在 .jsp 中展示了这张图片：

```
<img src="picture" id="picture"> 
```

一切正常，图片显示在我的浏览器中，但我遇到了一个异常，我不知道正常解决这个问题的原因（我不想捕捉这个异常）。

```
org.apache.catalina.core.ApplicationDispatcher invoke
SEVERE: Servlet.service() for servlet jsp threw exception
java.lang.IllegalStateException: getOutputStream() has already been called for this response
at org.apache.catalina.connector.Response.getWriter(Response.java:626)
at org.apache.catalina.connector.ResponseFacade.getWriter(ResponseFacade.java:215)
at org.apache.jasper.runtime.JspWriterImpl.initOut(JspWriterImpl.java:125)
at org.apache.jasper.runtime.JspWriterImpl.flushBuffer(JspWriterImpl.java:118)
at org.apache.jasper.runtime.PageContextImpl.release(PageContextImpl.java:190)
... 
```

我的问题是：我如何以可能简单的方式生成动态图片？我不想临时保存图片。也许放在模型 outputStream 并在 jsp 中以某种神奇的方式显示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T15:31:01.880

我认为这是由于您在控制器方法中有返回参数，该参数要求 spring 将请求转发到特定视图。

您应该将返回类型设为 void。

```
public void generateMik(final HttpServletResponse response) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T16:06:51.797

您需要注释将`@RequestMapping`图像写入流的方法，`@ResponseBody`以告诉 Spring MVC 不要尝试查找用于呈现响应的视图。您可以`@ResponseBody`在自己处理写入输出流的任何方法上使用。

由于您的`@RequestMapping`方法返回 a `String`，因此 Spring 将您的方法的响应值解释为它应该在呈现响应时使用的视图的名称。

您看到异常是因为您正在写入（并关闭）响应流，然后 Spring MVC 尝试调用视图类以写入相同的响应流。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T15:28:38.980

这对我来说很好用：

```
@RequestMapping(value = "/img", method = RequestMethod.GET)
public @ResponseBody void getImage(HttpServletResponse response)
{
    BufferedImage image = new BufferedImage(100, 100, BufferedImage.TYPE_INT_RGB);

    response.setContentType("image/png");
    OutputStream out;
    try
    {
        out = response.getOutputStream();
        ImageIO.write(image, "png", out);
        out.close();
    }
    catch (IOException ex)
    {
        Logger.getLogger(IndexController.class.getName()).log(Level.SEVERE, null, ex);
    }
} 
```

但是，我 99.8% 肯定有更聪明的方法可以做到这一点。

# entity-framework - EF5：手动表映射

> ID：12957991
> 
> 赞同：1
> 
> 时间：2012-10-18T15:17:39.217
> 
> 标签：entity-framework, entity-framework-5

如何使用 Code First 方法在 Entity Framework 5 中进行手动表映射？

我所说的表映射是将数据库中的表名关联到具有不同名称的实体类。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T15:31:11.333

这很简单。

```
[Table("Foo")]
public class Bar {
      // properties
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T15:51:07.310

对于流利的 api：

```
 protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<MyEntity>().ToTable("MyTargetTable");
    } 
```

# file - WinAVR 和本机 Windows 控制台应用程序

> ID：12957992
> 
> 赞同：3
> 
> 时间：2012-10-18T15:17:40.197
> 
> 标签：file, gcc, makefile, winavr

我对 C 语言不是很有经验，但我一直很高兴地在一些使用 WinAVR 的业余项目中破解固件。我有视力障碍，所以我更喜欢使用 make 文件和命令行，而不是图形混乱的 IDE。

有时我想在 Windows 控制台提示符下抛出一个算法，用一些 printf 语句来告诉我发生了什么。但我不想安装 GCC 的本机 Windows 变体并弄乱我正在工作的 WinAVR 安装。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T19:27:14.340

我认为[http://www.cygwin.com/](http://www.cygwin.com/)将是一个不错的选择.. 您可以安装 cygwin，然后安装 gcc 安装 cygwin。如果你愿意，你可以拥有所有的 unix 工具

# sql - 如何在 PostgreSQL 中使用具有多个值的 SQL LIKE 条件？

> ID：12957993
> 
> 赞同：49
> 
> 时间：2012-10-18T15:17:39.573
> 
> 标签：sql, postgresql, postgresql-9.1

是否有任何更短的方法来查找多个匹配项：

```
 SELECT * 
 from table 
 WHERE column LIKE "AAA%" 
    OR column LIKE "BBB%" 
    OR column LIKE "CCC%" 
```

这个问题适用于 PostgreSQL 9.1，但如果有一个通用的解决方案会更好。

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-10-18T15:20:36.283

也许使用`SIMILAR TO`会起作用？

```
SELECT * from table WHERE column SIMILAR TO '(AAA|BBB|CCC)%'; 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-10-18T22:10:53.233

[按照@maniek 今天早些时候展示的](https://stackoverflow.com/a/12953273/398670)`LIKE ANY(ARRAY['AAA%', 'BBB%', 'CCC%'])`这个很酷的技巧使用。

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2012-10-19T12:14:40.247

使用数组或集合比较：

```
create table t (str text);
insert into t values ('AAA'), ('BBB'), ('DDD999YYY'), ('DDD099YYY');

select str from t
where str like any ('{"AAA%", "BBB%", "CCC%"}');

select str from t
where str like any (values('AAA%'), ('BBB%'), ('CCC%')); 
```

如果要匹配任何订单，也可以使用正则表达式来做一个`AND`不容易的事情：

```
select str from t
where str like all ('{"%999%", "DDD%"}');

select str from t
where str like all (values('%999%'), ('DDD%')); 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2019-06-19T21:38:40.150

您可以使用正则表达式运算符 ( **~** )，由 ( **|** ) 分隔，如[模式匹配中所述](https://www.postgresql.org/docs/9.3/functions-matching.html)

```
select column_a from table where column_a ~* 'aaa|bbb|ccc' 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-10-09T13:48:55.560

以下查询帮助了我。`LIKE`您可以使用 ，而不是使用`~*`。

```
select id, name from hosts where name ~* 'julia|lena|jack'; 
```

* * *

## 回答 #6

> 赞同：-5
> 
> 时间：2018-08-06T18:31:08.653

如果您实际上不需要通配符，则可以使用 IN。

SELECT * from table WHERE column IN ('AAA', 'BBB', 'CCC')

# mysql - Yii $connection = Yii::app()->db 很慢

> ID：12957995
> 
> 赞同：2
> 
> 时间：2012-10-18T15:17:48.737
> 
> 标签：mysql, database, yii

我在后台使用 mysql 数据库重新“安装”了 yii。

如果我想从应用程序获取数据库连接：

```
$connection = Yii::app()->db; 
```

这需要大约 1 秒钟。

有什么技巧可以加快速度吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T05:51:42.937

调试以查找连接到数据库中使用的时间。

使用[WebGrind](http://code.google.com/p/webgrind/)对其进行测试。

我已经测试过我的情况大约需要 10 毫秒。

# javascript - 如何访问使用 Javascript 中的对象工厂创建的对象范围内的方法

> ID：12957998
> 
> 赞同：0
> 
> 时间：2012-10-18T15:17:51.950
> 
> 标签：javascript, scope

我很难理解 JS 中的变量范围。有没有一种方法可以访问使用类似于下面示例的对象工厂创建的对象的实例变量？

```
function Renderer(id, options) {
    var id = id;
    var options = options;

    return {
        render: function(selector) {
            $(selector).each(function(index) {
                this.renderOptions(); //This does not reference the Renderer, but the html element selected by jQuery.
            });
        },
        renderOptions: function() {
            console.log(this.options);
        }
    }
}

var myRenderer = new Renderer('test', [1, 2, 3, 5, 8, 13]); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T15:21:36.063

您只需要保留对对象的命名引用，因为`this`在每次方法调用时都会重新定义，并且通常指向回调中的错误上下文：

```
var instance = {
    render: function(selector) {
        $(selector).each(function(index) {
            instance.renderOptions();
        });
    },
    ...
}
return instance; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T15:20:16.330

修改后的代码

```
function Renderer(id, options) {
    var id = id;
    var options = options;

    return {
        render: function(selector) {
            var self = this;
            $(selector).each(function(index) {
                self.renderOptions();  // here this is a reference of dom element.
            });
        },
        renderOptions: function() {
            console.log(this.options);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T15:38:28.143

由于`var options...`在 的范围内`Renderer`，您可以简单地`options`在`renderOptions`函数内部使用。

`this`正如其他海报所提到的，您还需要创建对 的引用。

```
function Renderer(id, options) {
    var id = id;
    var options = options;

    return {
        render: function(selector) {
            var self = this;
            $(selector).each(function(index) {
                self.renderOptions();
            });
        },
        renderOptions: function() {
            console.log(options);
        }
    }
} 
```

而且，如果我正确阅读了这段代码的意图，您可能希望将对元素的引用传递给`renderOptions`函数：

```
function Renderer(id, options) {
    var id = id;
    var options = options;

    return {
        render: function(selector) {
            var self = this;
            $(selector).each(function(index) {
                self.renderOptions(this);
            });
        },
        renderOptions: function(ele) {
            $(ele).css(options); // or whatever you plan to do.
        }
    }
} 
```