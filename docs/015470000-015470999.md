# StackOverflow 问答 15470000-15470999

# linux - 在tmux中绑定Ctrl+Tab和Ctrl+Shift+Tab

> ID：15470001
> 
> 赞同：54
> 
> 时间：2013-03-18T04:55:35.170
> 
> 标签：linux, putty, tmux, xterm, gentoo

我正在尝试让`ctrl`+`tab`和`ctrl`+ `shift`+`tab`绑定在 tmux 会话中工作（我也在使用 PuTTY）。

我已经经历了不得不重新编译 PuTTY 以便它能够正确发送的`ctrl`痛苦`shift` 。使用`ctrl`+后`v`，我可以看到`^[[27;5;9~`并`^[[27;6;9~`分别发送给`ctrl`+`tab`和`ctrl`++ 。有什么办法可以让这些绑定到 tmux 中的下一个窗口和上一个窗口？`shift``tab`

编辑：经过一些研究，我想我可能必须配置 xterm 以包含这些键码。知道我会怎么做吗？

Edit2：所以我发现我可以检索 infocmp 并重新编译它。我添加了

`kctab=\E[27;5;9~, kcstab=\E[27;6;9~,`

到最后，除了现在它给了我一个错误。“**条目不以第一列中的终端名称开头**”

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-03-18T06:59:16.790

*tmux*的最新“未发布”版本会在您让终端发送它们后自动识别这些 xterm 样式的键序列（无需更改您的 terminfo 条目）。下一个版本（1.8？）也应该有这个支持。使用适当的*tmux* ¹构建，您所要做的就是绑定*tmux*配置中的键：

```
bind-key C-Tab next-window
bind-key C-S-Tab previous-window 
```

您仍然需要在这些键之前键入前缀键。

（注意：`~/.tmux.conf`仅在服务器启动时处理。如果您对其进行更改，您将需要退出所有会话并重新启动服务器，或者使用（例如）`tmux source ~/.tmux.conf`让现有服务器重新处理文件。）

此外，如果您希望*tmux*将这些（和其他）xterm 样式的键序列传递给在*tmux*内部运行的程序，那么您将需要启用`xterm-keys`window 选项。

```
set-option -gw xterm-keys on 
```

（如果您愿意，可以使用`-w`而不是在每个窗口上执行此操作`-gw`。）

* * *

如果您希望能够在不输入前缀的情况下使用这些键，那么您可以使用“无前缀”绑定：

```
bind-key -n C-Tab next-window
bind-key -n C-S-Tab previous-window 
```

不过，这或多或少会将密钥“专用”给*tmux*。*在tmux*中运行的任何程序都很难键入这些键（例如，您必须使用*tmux*命令`send-keys C-Tab`——正常情况下，`xterm-keys`必须启用才能发送这些 xterm 样式的键序列）。

* * *

您的 terminfo 条目编辑的问题可能是因为命名终端类型的行之后的每一行都需要以 Tab 开头。不以制表符开头的行是新终端条目的开始。从技术上讲，NL TAB 序列基本上是这种文件格式的续行；每个条目都是一个逻辑行。

此外，如果您要重新定义 terminfo 条目，请务必`-x`与*infocmp*和*tic*一起使用以保留用户定义的功能（其中一些是相当标准的）。

* * *

^(1即从)[sf.net的](http://sourceforge.net/p/tmux/tmux-code/ci/master/tree/)[*tmux*](http://sourceforge.net/p/tmux/tmux-code/ci/master/tree/) Git 存储库中的最新代码构建（在可克隆 URL 处`git://git.code.sf.net/p/tmux/tmux-code`）。

# tcp - 大型以太网帧（超大型）？

> ID：15470003
> 
> 赞同：0
> 
> 时间：2013-03-18T04:55:43.977
> 
> 标签：tcp, wireshark, ethernet

我正在分析我用 WireShark 捕获的日志，我惊讶地发现我们内部使用的一个应用程序只与另一台主机（都连接到一个私有的内部集线器）发送/接收巨大的帧（按订单15K)。我认为巨型帧的最大值是 9K。如何生成这些帧？该应用程序使用 tcp。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T18:15:31.630

> 该应用程序使用 tcp。

...并且以太网适配器可能正在执行[Large Segment Offload](https://en.wikipedia.org/wiki/Large_segment_offload)或[Large Receive Offload](https://en.wikipedia.org/wiki/Large_receive_offload)，在这种情况下，libpcap/WinPcap 使用的捕获机制（tcpdump/WinDump、Wireshark 等用于捕获流量）提供给库和应用程序可能是对应于多个“在线”数据包的“假”数据包。

# python - Python - 使用 Popen 执行具有多个条件的查找

> ID：15470005
> 
> 赞同：5
> 
> 时间：2013-03-18T04:55:59.843
> 
> 标签：python, subprocess, popen

我想执行`find`多个条件，例如：查找**foo**排除隐藏文件：

```
find . -type f \( -iname '*foo*' ! -name '.*' \) 
```

Python代码：

```
import subprocess

cmd = ["find", ".", "-type", "f", "(", "-iname", "*foo*", "!", "-name", ".*", ")"]
sp = subprocess.Popen(cmd, stdout=subprocess.PIPE, stderr=subprocess.PIPE)
print sp.communicate()[0].split() 
```

有人可以解释我错过了什么吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-05T17:56:22.043

我也遇到了这个问题，我相信你现在已经弄清楚了，但我想我会权衡一下，以防其他人遇到同样的问题。来发现，这是由于Python在使用Popen时实际在做什么（当使用shell = True时，python基本上只是使用 /bin/sh -c 来传递您的命令（[Python的 subprocess.Popen() 结果与命令行不同？](https://stackoverflow.com/questions/9231074/pythons-subprocess-popen-results-differ-from-command-line)）。shell 默认为 False，因此如果您省略此选项或将其设置为 False，则将使用“可执行”中指定的任何内容。文档在此处更详细地介绍：[https://docs.python .org/2/library/subprocess.html#subprocess.Popen](https://docs.python.org/2/library/subprocess.html#subprocess.Popen)

这些方面的东西应该起作用

```
import subprocess
cmd = 'find . -type f -iname "*foo*" ! -name ".*"'
sp = subprocess.Popen(cmd, shell=True, stdout=subprocess.PIPE, stderr=subprocess.PIPE)
print sp.communicate()[0].split() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-20T21:04:59.830

在 python 3.7 subprocess.run() 中，您可以将空格上的 cmd 拆分为一个列表，字符串就可以了。

尽管[subprocess.run()](https://docs.python.org/3/library/subprocess.html#subprocess.run)文档中没有任何内容。

我无法将命令扩展为列表以工作，而字符串工作正常。

```
cmd = "find . -type f -iname \*foo\* ! -name .\\*"
print(cmd)
ret = subprocess.run(cmd, shell=True, capture_output=True)
print(ret) 
```

测试：

```
$ find . -type f -iname \*foo\* ! -name .\*
./foobar.txt
./barfoo.txt

$ ./findfoo.py
find . -type f -iname \*foo\* ! -name .\*
CompletedProcess(args='find . -type f -iname \\*foo\\* ! -name .\\*',
 returncode=0, stdout=b'./foobar.txt\n./barfoo.txt\n', stderr=b'') 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-18T05:08:08.193

至少，需要逃避那里的*。

在第二个通过反斜杠转义 ( 和 ) （将 "\\(" 和 "\\)" 传递给 shell）

```
cmd = ["find", ".", "-type", "f", "\\(", "-iname", "\\*foo\\*", "!", "-name", ".\\*", "\\)"] 
```

甚至只是摆脱那些（和） -

```
cmd = ["find", ".", "-type", "f", "-iname", "\\*foo\\*", "!", "-name", ".\\*"] 
```

应该可以正常工作

# php - 无需提交即可发出请求 - PHP、AJAX 和 Javascript

> ID：15470009
> 
> 赞同：0
> 
> 时间：2013-03-18T04:56:07.213
> 
> 标签：php, javascript, ajax

我仍然是 PHP 编程的初学者。我需要有关如何提示所选日期的帮助。一个简单的网页，允许用户在单击提交按钮后选择日期（通过 javascript）。我想提示用户日期，但它所做的是打开一个新页面并显示当前页面。

我的 PHP 文件：`rcl_stock_allocation.php`

```
<html>
    <head>
        <LINK REL=StyleSheet HREF="inc/style.css" TYPE="text/css" MEDIA=screen>
        <LINK REL=StyleSheet HREF="inc/cal_styles.css" TYPE="text/css" MEDIA=screen>
        <script type="text/javascript"  language="javascript" src="inc/myCalendar.js"></script>
        <script type="text/javascript" src="inc/jquery-1.9.1.js"></script>
        <script type="text/javascript">
            function popCal(ThisValue){
                calpop  = new Epoch('epoch_popup','popup',document.getElementById(ThisValue));
                calpop.toggle();
            }
        </script>
        <title>RCL Stock Allocation</title>
    </head>
    <body>
        <?php
        echo "<form name='rcl_stock_allocation' action='' method='get' target=_blank >";
        echo "<table border = '0'>";
        echo "<tr><td colspan='2'><font size='2' ><b>RCL Stock Allocation for Bookshop</b></font></td></tr>";
        print "<tr><td></br></td></tr>";
        print <<<menu1
        <tr><td align=right >Date of Transaction</td><td> <input type="text" id ="transactionDate" name="transactionDate" class = graytextbox readonly=true style='width:80px; text-align:center' value = '$transactionDate' />&nbsp;<a href=# onclick="popCal('transactionDate');">&nbsp;Date Picker</a>

menu1;
        print "</td></tr>";
        echo "<tr><td></td><td><input type='submit' name='load_data' id='load_data' value='Load Stocks' /></td></tr>";
        echo "</table>";
        echo "</form>";
        //echo "lloyd";
        ?>

    </body>
</html> 
```

这是我的javascript：`rcl_stkall.js`

```
$(function() {
            $('.error').hide();
            $(".load_data").click(function() {
                $('.error').hide();
                var transactionDate = $("input#transactionDate").val();
                if(transactionDate == ""){
                    $("label#transactionDate").show();
                    $("input#transactionDate").focus();
                    return false;
                }
                var dateOfTransaction = 'date=' + transactionDate;
                alert(dateOfTransaction); return false;
            });
        }); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T05:11:39.160

以下是一些基础知识：

当您启动表单时，删除 'target=_blank' - 这不是必需的。

然后，您可以通过阻止默认提交操作来阻止表单提交。在 '$(function() {' 中将此添加到您的 JS

```
$('#rcl_stock_allocation').on('submit', function(e) {
    e.preventDefault();
    // add code here to show prompt the user of the date 
}); 
```

如果您需要在用户被提示日期后提交表单，请使用：

```
$('#rcl_stock_allocation').submit(); 
```

完成发送表格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T05:36:49.090

把类型='按钮'

```
 <input type='button' name='load_data' id='load_data' value='Load Stocks' /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T05:57:02.127

首先，您使用 id="load_data" 作为提交按钮，所以

试试这个，

$(".load_data").click(function() { 应该是

$("#load_data").click(function() {

# c# - 在自定义 INotifyPropertyChanged 类中访问 ListViewItems

> ID：15470013
> 
> 赞同：0
> 
> 时间：2013-03-18T04:56:27.933
> 
> 标签：c#, wpf, listview, inotifypropertychanged

我有一个`ListView`带边界`ItemsSource`和一个`GridViewColumns`来显示给定项目属性的。以下是重要部分的片段：

```
<ListView Name="listView1" ItemsSource="{Binding Path=listItemCollection}" DataContext="{Binding ListItem}">
    <ListView.View>
        <GridView x:Name="gridViewMain">
            <GridViewColumn x:Name="listViewItemNumberColumn" Width="50">
                <GridViewColumnHeader>#</GridViewColumnHeader>
                <GridViewColumn.CellTemplate>
                    <DataTemplate>
                        <TextBlock x:Name="idTextBlock" KeyboardNavigation.IsTabStop="False" HorizontalAlignment="Center" Text="{Binding Path=Id}"/>
                    </DataTemplate>
                </GridViewColumn.CellTemplate>
            </GridViewColumn>

            <GridViewColumn x:Name="listViewItemNameColumn" Width="500">
                <GridViewColumnHeader>Name</GridViewColumnHeader>
                <GridViewColumn.CellTemplate>
                    <DataTemplate>
                        <TextBox x:Name="nameTextBox" TextChanged="nameTextBox_TextChanged" Text="{Binding Path=ItemName, UpdateSourceTrigger=PropertyChanged}"/>
                    </DataTemplate>
                </GridViewColumn.CellTemplate>
            </GridViewColumn>
            ... 
```

我希望能够专注于用户选择的特定字段/文本框`ListViewItem`。我可以`ListViewItem`使用以下代码从给定索引中找到：

```
listView1.ItemContainerGenerator.ContainerFromIndex(i); 
```

到目前为止一切都很好。直到我想真正访问`ListViewItem`. 它没有返回我期望的一组控件，而是`ListViewItem.Content`返回我的自定义类`ListItem`。这是该类的外观片段：

```
public class ListItem : INotifyPropertyChanged {
    public event PropertyChangedEventHandler PropertyChanged;

    public TextBlock idTextBlock;
    public GridView gridViewMain;

    public bool Selected { get; set; }
    public string ItemName { get; set; } 
```

我完全迷失了如何将注意力集中在一个`nameTextBox`文本框控件上`ListViewItem.`

是否有可能以某种方式将 和 等控件链接`nameTextBox`到`idTextBlock`我的自定义`ListItem`类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T05:24:07.590

ListView SelectedItem 中有一个属性。您需要将其绑定到。

在你看来

```
<ListView Name="listView1" ItemsSource="{Binding Path=listItemCollection}" SelectedItem="{Binding SelectedListItem}" DataContext="{Binding ListItem}"> 
```

在你有 listItemCollection 的类中，添加一个 SelectedListItem 变量。

```
public ListViewItem SelectedListViewItem {get; set;} 
```

**编辑：**

删除列表视图。使用 DataGridOnly。

XAML：

```
<DataGrid ItemsSource="{Binding MyItems}" SelectedItem="{Binding SelectedItem}">
     <DataGrid.Columns>
         <DataGridTextColumn Binding="{Binding Name}" Header="Name" Width="175" />
         <DataGridTextColumn Binding="{Binding Path}" Header="Path" Width="75" />
     </DataGrid.Columns>
</DataGrid> 
```

视图模型：

```
ObservableCollection<MyItem> MyItems {get; set;}
MyItem SelectedItem {get; set;}

public class MyItem : INotifyPropertyChanged
{
    public string Name {get; set;}
    public string Path {get; set;}
} 
```

# iphone - 何时使用可转换数据类型与关系核心数据

> ID：15470014
> 
> 赞同：2
> 
> 时间：2013-03-18T04:56:29.007
> 
> 标签：iphone, ios, core-data, data-modeling

这是一个新手类型的问题，但我被困在如何在 iOS 的 Core Data 上下文中做到这一点。

我有一个我想使用的数据类型，称为Measurement，它由一个单位（字符串）和一个值（双精度）组成。我有另一个类 PhysicalAttributes，它有许多属性，其中一些是原始数据类型，而一些（大多数）应该是 Measurement 类型。

在 Core Data 中，我创建了一个名为 Measurement 的实体和一个名为 PhysicalAttributes 的实体。

如果我不使用 Core Data，我会有一个类似的类：

```
@interface PhysicalAttributes : NSObject

@property (nonatomic) Measurement *height ;
@property (nonatomic) Measurement *weight ;

// etc.

@end 
```

但是我无法确定在 Core Data 中是否应该使用称为身高、体重等的关系，或者使用可转换的数据类型并以这种方式对其进行建模。将其称为关系并不合适，因为Measurement 实际上是一种数据类型。

我能找到的所有使用核心数据的例子都没有真正给出类似上面的例子。

任何帮助/指针表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T05:10:21.700

你真的想要测量吗？也许作为一个抽象类或协议，但您可能需要 Weight 和 Height 类，否则，Measurement 中的可能类型将变得非常丑陋。

我同意你的观点，因为它会让你觉得在这样的事情上使用关系很脏，但是，另一种看待它的方式是，这些测量可能是在某个时间点被捕获的，所以你也可以添加一个时间戳。

Martin Fowler 的《[分析模式](https://rads.stackoverflow.com/amzn/click/com/0201895420)》一书详细讨论了这一点，并归结为为这些事情上课（这是正确的）。

# php - 如何在 AWS EC2 服务器中编写 cron 作业

> ID：15470016
> 
> 赞同：24
> 
> 时间：2013-03-18T04:56:32.913
> 
> 标签：php, crontab

我在 AWS EC2 中创建了一个 cron 作业，但它不工作。

我按照以下步骤创建 cron 选项卡：

*   第 1 步：我登录到 AWS EC2 Instace
*   第2步：`crontab -e`
*   第 3 步：插入模式
*   第 4 步：我输入`* * * * * php/var/www/html/welcome.php`（每分钟运行一次）
*   第 5 步：`:wq`

Cron 选项卡已创建但未运行。

如果有任何 PHP 脚本意味着请提供给我，请任何人帮助我。我需要在每颗星之间留出空格吗？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-03-18T10:28:30.060

首先，您需要在`php`and之间放置一个空格`/var`：

从

```
* * * * * php/var/www/html/welcome.php 
```

到

```
* * * * * php /var/www/html/welcome.php
             ^ 
```

那么，你最好使用`/bin/php`而不是仅仅使用`php`. 要确定`php`可执行文件的位置，`which php`请在控制台中键入，它将为您提供文件路径。所以它会变成这样：

```
* * * * * /bin/php /var/www/html/welcome.php
          ^^^^^^^^ 
```

更多的东西：

*   检查 crontab 是否正确保存？键入`crontab -l`。您的新 crontab 行应该在那里。
*   脚本完全在这个目录中吗？试试`ls -l /var/www/html/welcome.php`。
*   如果您从控制台执行，脚本是否正在执行？试试看`/bin/php var/www/html/welcome.php`是脚本问题还是crontab问题。
*   脚本有执行模式吗？尝试`chmod 755 /var/www/html/welcome.php`

让我们保持更新，以便我们找到可能导致错误的原因。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-11T08:49:46.693

可能为时已晚，但无论如何，如果您打算每分钟运行一次脚本，则命令可能应该是

```
* * * * * php /var/www/html/welcome.php 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-18T05:06:24.760

据我所知，在 EC2 上运行 cron 与在任何 *nix 服务器上运行没有任何不同。我会检查系统消息是否有任何错误。您还可以将 stderr/stdout 重定向到文件，如

```
 * * * * * <your script>  >> /var/tmp/out.log 2>&1 
```

并检查初学者的任何问题。

# architecture - Hadoop 2.x 行：“Alpha”如何成为“alpha”

> ID：15470020
> 
> 赞同：3
> 
> 时间：2013-03-18T04:56:46.900
> 
> 标签：architecture, hadoop

从 hadoop 网站上的发布页面：

> “与 hadoop-2.x 系列中的先前版本一样，此版本仍被视为 alpha，主要是因为某些 API 尚未完全成熟，我们预计未来会出现一些变化。”</p>

2.x 线有多“alpha”？我们正在从 AWS (1.0.3) 转移到我们自己的 10 台服务器集群上，自然我们想要最新最好的，但不需要生活在最前沿（我们只想处理一些数据，你知道！） .

那么“阿尔法”是怎样的“阿尔法”呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T07:21:09.827

我会说 YARN 是新的并且是一个彻底的改变，所以你可能想要更加小心地使用它。大多数其他更改是增量的。您可以使用像 Claudera 的 CDH4 这样的发行版，它在 Hadoop 2.x 上支持 Hadoop 1.x map-reduce

# magento - Magento：如何更改 USPS 运输标题？

> ID：15470024
> 
> 赞同：0
> 
> 时间：2013-03-18T04:57:05.883
> 
> 标签：magento, e-commerce, magento-1.7, shipping, usps

例如，我想改成`First-Class Mail International Large Envelope`说`First-Class Mail International Large Envelope (tracking not available)`

我已经在网上阅读了一些关于如何做到这一点的不同方法，但它们都不适合我。如果有人提供有效的答案，我可以付款！

如果重要的话，我正在使用`Magento version 1.7.0.2`并且也在使用该模块。`OneStepCheckout`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T05:04:36.513

运输模块的标题可以在相应模块的`etc/system.xml`. 在其中搜索`First-Class Mail International Large Envelopebe`并根据需要进行更改。

# c++ - 程序的奇怪行为

> ID：15470025
> 
> 赞同：1
> 
> 时间：2013-03-18T04:57:17.803
> 
> 标签：c++, mpi, hdf5

我有一个 MPI 程序，它使用 HDF5 库进行并行 I/O。我在调试时遇到了一个奇怪的问题。我已经使用 valgrind 对一个简单的测试用例进行了内存泄漏测试，并且没有报告错误。然后我尝试使用 120、240、360 和 480 核的另一个测试用例。除了出现此错误的 120 核案例外，所有案例都运行：

```
 MPI: MPI_COMM_WORLD rank 108 has terminated without calling MPI_Finalize()
 MPI: aborting job
 MPI: Received signal 9 
```

我对此感到困惑。错误是什么意思？会不会是因为内存不够？

# jquery - JQuery UI 拖放两个 div

> ID：15470027
> 
> 赞同：2
> 
> 时间：2013-03-18T04:57:59.257
> 
> 标签：jquery, user-interface, drag-and-drop, swap

试图拖放（交换）两个 div（包含几个子 div）。

这是我的 jsfiddle 尝试：http: [//jsfiddle.net/VhB4n/3/](http://jsfiddle.net/VhB4n/3/)

似乎我希望一起拖动的子 div（因为在父 div 上启用了拖动）可以独立拖放。是否可以将 header 和 body div (Hdr1 & Body1) 拖放在一起并与其他 Hdr2 和 Body2 div 交换？

谢谢。

代码如下：

```
<!DOCTYPE html>
<html>
<head>
    <title>CurveDiv</title>
    <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
    <script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>
    <style>

        .cTracks {
            position: absolute;
            left: 100px;
            top: 10px;
            width: 500px;
            height:700px;
            border: 1px solid #000000;
        }
        .sTrack {
            float: left;
            width: 212px;
            height: 700px;
            border: 1px solid #000000;
        }
        .sTrackHdr {
            position: relative;
            top: 0px;
            left: 0px;
            width: 212px;
            height: 100px;
            border: 1px solid #ff0000;
        }
        .sTrackBody {
            position: relative;
            top: 0px;
            left: 0px;
            width: 212px;
            height: 600px;
            border: 1px solid green;
        }
    </style>
    <script>
        $(function() {
            $( ".sTrack" ).sortable();

            $( ".sTrack" ).disableSelection();
        });
    </script>
</head>
<body>
    <div id="curveTracks" class="cTracks">
        <div id="singleTrack" class="sTrack">
            <div id="singleTrackHdr" class="sTrackHdr">
                Header1
            </div>
            <div id="singleTrackBody" class="sTrackBody">
                Body1
            </div>
        </div>

        <div id="singleTrack1" class="sTrack">
            <div id="singleTrackHdr1" class="sTrackHdr">
                Header2
            </div>
            <div id="singleTrackBody1" class="sTrackBody">
                Body2
            </div>
        </div>

    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T05:26:39.180

您可以一起交换标题和正文。您需要做的就是用一个额外的 div 包装标题和正文。

在这种情况下，您的代码如下所示：

```
<body>
    <div id="curveTracks" class="cTracks">
        <div id="singleTrack" class="sTrack">
            <div>
                 <div id="singleTrackHdr" class="sTrackHdr">
                     Header1
                 </div>
                 <div id="singleTrackBody" class="sTrackBody">
                     Body1
                 </div>
            </div>
        </div>

        <div id="singleTrack1" class="sTrack">
            <div>
                <div id="singleTrackHdr1" class="sTrackHdr">
                    Header2
                </div>
                <div id="singleTrackBody1" class="sTrackBody">
                    Body2
                </div>
            </div>
        </div>
    </div>
</body> 
```

javascript 代码无需更改。

注意：当您不单独移动标题和正文时就是这种情况。

# jsp - 无法在 JSP 中打印实际值“request.getparameterValues”

> ID：15470035
> 
> 赞同：-1
> 
> 时间：2013-03-18T04:58:43.827
> 
> 标签：jsp, servlets

当我通过以下代码通过 Servlet 调度 JSP 页面时：

```
String[] UserList = ViewAllUserBasedOnRights(UserViewBy);
request.getRequestDispatcher("/test/TestGetParameterValues.jsp?UserList="+UserList+"").forward(request, response); 
```

JSP 页面显示“ **[Ljava.lang.String;@8b3f2a** ”。

在此方法中，“ `ViewAllUserBasedOnRights();`”值是从我的数据库中收集的，它将返回一个`NULL`或一组`Strings`.

细节：

```
public static String[] ViewAllUserBasedOnRights(String UserName) throws Exception{
                String[] retVal = null;
                Connection con=null;
                try{
                con= DatabaseConnectionManager.getDatabaseConnectionManager().getConnection(DatabaseConnectionManager.EAGRO_APP_DB);
                con.setAutoCommit(false);
                Statement stmt = (Statement) con.createStatement();
                Statement stmt1 = (Statement) con.createStatement();
                String SQLStringCount = "....";
                try(ResultSet rs = stmt.executeQuery(SQLStringCount)){
                    int count = -1;
                    while(rs.next()){
                        count = Integer.parseInt(rs.getString("COUNT"));
                    }
                    if(count > 0){
                        String SQLString =".....";

                    System.out.println("SQLString: "+SQLString);
                    try(ResultSet rs1 = stmt1.executeQuery(SQLString)){
                        ArrayList<String> stringList = new ArrayList<String>(); 
                        while(rs1.next()){
                            stringList.add(rs1.getString("USER_NAME"));
                        }
                        String[] temp = new String[stringList.size()];
                        retVal = (String[]) stringList.toArray(temp);
                        con.commit();
                        rs1.close();

                    }catch(SQLException e){
                        try{
                            if(con!=null)
                                extracted(con);
                            }catch(Exception ex){}
                        }
                }
            }catch(SQLException e){
                try{
                    if(con!=null)
                        extracted(con);
                    }catch(Exception ex){}
                }

            }catch(SQLException e){
                try{
                    if(con!=null)
                        extracted(con);
                    }catch(Exception ex){}
                }
            return retVal;
        } 
```

我的 JSP 页面的代码，它非常简单，只需我捕获值并打印：

```
<%
String[] UserList;
UserList = (String[])request.getParameterValues("UserList");
for(int i = 0; i < UserList.length; i++){
%>
<tr>
<td style="border:1px solid black;" align="center"><%=i+1%>
</td>
<td style="border:1px solid black;" align="left" ><%=UserList[i]%>
</td>
</tr>
<% } %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T07:22:23.290

jsp中不推荐使用scriptlet，可以使用jstl标签

```
<c:forEach items="UserList" var="temp">
   ${temp}
</c:forEach> 
```

并导入`<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>`

在使用之前

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T15:19:38.500

谢谢大家，我得到了解决方案，我在下面的 Servlet 和 JSP 页面上进行了编辑

Servlet 中的更改：

```
String[] UserList = ViewAllUserBasedOnRights(UserViewBy);
request.setAttribute("userList", UserList);
request.getRequestDispatcher("/test/TestGetParameterValues.jsp").forward(request, response); 
```

在 JSP 页面中更改：

```
<%
String[] UserList = null;
if(request.getAttribute("UserList")!= null){
UserList = new String[((String[])request.getAttribute("UserList")).length];
UserList = ((String[])request.getAttribute("UserList"));
}
for(int i = 0; i < UserList.length; i++){
%>
<tr>
    <td style="border:1px solid black;" align="center"><%=i+1%>
    </td>
    <td style="border:1px solid black;" align="left" ><%=UserList[i]%>
    </td>
</tr>
<% } %> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T09:12:20.323

从您的代码中，我看到您`ArrayList`在迭代时创建了一个`ResultSet`，然后创建了 String 数组来发送值。

因为，您正在将请求转发给 JSP，您应该将`ArrayList`请求对象作为请求对象发送给 JSP，然后在那里对其进行迭代。

从方法而不是数组返回`ArrayList`( )。`return stringList;``ViewAllUserBasedOnRights(UserViewBy)``String`

转发页面时：

```
List<String> userList = ViewAllUserBasedOnRights(UserViewBy);
request.setAttribute("userList", userList);
request.getRequestDispatcher("/test/TestGetParameterValues.jsp").forward(request, response); 
```

JSP：

```
<%
List<String> userList;
int nSize=0;
userList = (ArrayList<String>)request.getAttribute("userList");
if(userList!=null){
nSize= userList.size();
}

for(int i = 0; i < nSize; i++){
%>
<tr>
<td style="border:1px solid black;" align="center"><%=i+1%>
</td>
<td style="border:1px solid black;" align="left" ><%=userList.get(i)%>
</td>
</tr>
<% } %> 
```

# php - MySQL + PHP：为另一个表的每个结果选择一个表中的所有结果

> ID：15470037
> 
> 赞同：3
> 
> 时间：2013-03-18T04:58:47.510
> 
> 标签：php, mysql, sql

我的数据库中有以下两个表：

```
TABLE 1: Specials
---------------------------------------------
| Special ID | Special Name | Special Image |
 --------------------------------------------
|     1      |   Special 1  |     1.jpg     |   
|     2      |   Special 2  |     2.jpg     |
|     3      |   Special 3  |     3.jpg     |
---------------------------------------------

TABLE 2: Special Items
---------------------------
| Item ID | Item Name     |
---------------------------
|     1      |   Service  | 
|     2      |    Clean   |
|     3      |     Dry    |
--------------------------- 
```

从数据库中提取时，我正在寻找一种方法来实现这一点（第 4 列将是一个下拉列表）：

```
EDIT SPECIALS (Columns 1-3: Table 1) (Column 4: All results from Table 2)
-------------------------------------------------------------------
| Special ID | Special Name | Special Image | Items               |
-------------------------------------------------------------------
|     1      |   Special 1  |     1.jpg     | Service, Clean, Dry |      
|     2      |   Special 2  |     2.jpg     | Service, Clean, Dry | 
|     3      |   Special 3  |     3.jpg     | Service, Clean, Dry |
------------------------------------------------------------------- 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T05:00:23.210

利用`MySQL GROUP_CONCAT()`能够连接行的方法。

```
SELECT  a.*,
        (SELECT GROUP_CONCAT(ItemName) FROM SpecialItems) ItemList
FROM    Specials a 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/98daa/1)
*   [GROUP_CONCAT()](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)

输出

```
╔════════════╦══════════════╦═══════════════╦═══════════════════╗
║ SPECIAL ID ║ SPECIAL NAME ║ SPECIAL IMAGE ║     ITEMLIST      ║
╠════════════╬══════════════╬═══════════════╬═══════════════════╣
║          1 ║ Special 1    ║ 1.jpg         ║ Service,Clean,Dry ║
║          2 ║ Special 2    ║ 2.jpg         ║ Service,Clean,Dry ║
║          3 ║ Special 3    ║ 3.jpg         ║ Service,Clean,Dry ║
╚════════════╩══════════════╩═══════════════╩═══════════════════╝ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T05:01:18.363

使用`GROUP_CONCATE`MySQL，它将帮助您将结果与逗号分隔符结合起来。

**`[`Example`](http://www.w3resource.com/mysql/aggregate-functions-and-grouping/aggregate-functions-and-grouping-group_concat.php)`**

# oauth-2.0 - Box OAuth2：在登录页面单击“返回应用程序”按钮时返回 404 错误

> ID：15470039
> 
> 赞同：0
> 
> 时间：2013-03-18T04:58:55.730
> 
> 标签：oauth-2.0, box-api

当我单击 Box OAuth2 登录页面中的“返回应用程序”按钮时，我检索到了 HTTP 404 错误。

我使用 fiddler 检查 HTTP 请求，它发送“GET [https://api.box.com/oauth2/](https://api.box.com/oauth2/) ”，返回 404 Not Found。

所以我不确定“返回应用程序”按钮是否像“取消登录”功能或其他功能？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T06:41:46.557

redirect_uri 需要在您的应用程序的设置中设置，以便页面知道重定向回的位置。

# android - 三星galaxy ace表面视图/相机错误

> ID：15470041
> 
> 赞同：0
> 
> 时间：2013-03-18T04:59:17.753
> 
> 标签：android, android-camera

我正在编写一个应该与三星银河王牌兼容的应用程序。我有以下代码：

```
mPreview = (SurfaceView)findViewById(R.id.preview);
mPreview.getHolder().addCallback(this);
mPreview.getHolder().setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
mCamera.setDisplayOrientation(0);           
mCamera = Camera.open(); 
```

它崩溃在

```
mCamera.setDisplayOrientation(0); 
```

并给出以下错误：

```
/AndroidRuntime(18011): Caused by: java.lang.NullPointerException 
```

我尝试将值设置为 90、180、270 和 360，但似乎没有任何方法可以解决此问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T10:48:53.513

这是因为 mCamera 为空。

你应该`setDisplayOrientation()`在之后打电话`Camera.open()`。

它是在 Android 开发者网站 ( [http://developer.android.com/reference/android/hardware/Camera.html](http://developer.android.com/reference/android/hardware/Camera.html) ) 中编写的。

# neo4j - 如何使用 spring-data-neo4j 启用 Neo4j REST Streaming

> ID：15470043
> 
> 赞同：0
> 
> 时间：2013-03-18T04:59:28.110
> 
> 标签：neo4j, spring-data-neo4j

我正在使用[spring-data-neo4j](http://www.springsource.org/spring-data/neo4j)访问 Neo4j 数据库。我想启用 REST[流](http://docs.neo4j.org/chunked/snapshot/rest-api-streaming.html)以提高我的 Neo4j 交互的性能。

谁能指导我如何通过 spring-data-neo4j 来利用流媒体？即我如何告诉spring数据将`'stream=true'`每个REST请求中的标头发送到Neo4j服务器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T07:48:05.023

默认情况下已启用它。

您可以通过 System 属性控制它：`org.neo4j.rest.stream=true`

[https://github.com/neo4j/java-rest-binding#configuration-system-properties](https://github.com/neo4j/java-rest-binding#configuration-system-properties)

# c# - 从 datagridview 返回的空值

> ID：15470052
> 
> 赞同：0
> 
> 时间：2013-03-18T05:01:10.027
> 
> 标签：c#, c#-4.0, datagridview

我在数据库中有一个表，其中作者姓名与他们的谷歌引文一起存储。多个作者用逗号分隔。我使用以下代码将它们拆分并在数据网格视图中显示：

```
foreach (DataRow row in dataTable.Rows)
{
   int GSCitations;
   {
        string paper = Convert.ToString(row[1]);
        Int32.TryParse(Convert.ToString(row[2]), out GSCitations);
        string str = Convert.ToString(row[0]);
        string[] result = str.Split(new Char[] { ',' });
        foreach (string author in result)
        {
            dataGridView1.Rows.Add(id, author, paper, GSCitations);
            id++;
        }

   } 
```

然后我从数据网格视图中选择它们并尝试使用以下代码将它们存储在数据库中：

```
foreach (DataGridViewRow row in dataGridView1.Rows)
 {
        try
         {
         mysqlStatement = "INSERT INTO test1(ID, Authors,Paper, GSCitations) VALUES('" + row.Cells[0].Value + "','" + row.Cells[1].Value + "','" + row.Cells[2].Value + "','" + row.Cells[3].Value +"');";
         mySqlCommand = new MySqlCommand(mysqlStatement, mySqlConnection);
         mySqlCommand.ExecuteNonQuery();     
         }

        catch(Exception excep)
        {
         MessageBox.Show(excep.ToString()); 
        }
  } 
```

但它抛出异常，该 id 为空。由于 id 是主键，它不能为空。在数据网格视图中，没有 id 为空，但在存储它时返回空 id，就在一组作者被拆分之后。我的意思是，如果第一篇论文是由四位作者撰写的。它在 4 行之后立即返回 null，然后在每组之后以此类推。请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T05:57:20.173

需要正确调试代码并查看完整代码以给出这种行为的确切原因，但如果你只是想让它工作，试试这个

```
foreach (DataGridViewRow row in dataGridView1.Rows)
 {
        if(row == null || row.Cells[0].Value == null)
           continue;

        try
         {
            mysqlStatement = "INSERT INTO test1(ID, Authors,Paper, GSCitations) VALUES('" + row.Cells[0].Value + "','" + row.Cells[1].Value + "','" + row.Cells[2].Value + "','" + row.Cells[3].Value +"');";
            mySqlCommand = new MySqlCommand(mysqlStatement, mySqlConnection);
            mySqlCommand.ExecuteNonQuery();     
         }

        catch(Exception excep)
        {
            MessageBox.Show(excep.ToString()); 
        }
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T05:51:21.957

尝试将您的单元格 [索引] 更改为单元格 [列名]，我猜索引是您的 ID 列返回 null 的原因

```
mysqlStatement = "INSERT INTO test1(ID, Authors,Paper, GSCitations) 
VALUES('" +row.Cells[YOUR COLUMN NAME].Value + "','" + 
row.Cells[YOUR COLUMN NAME].Value + "','" + 
row.Cells[YOUR COLUMN NAME].Value + "','" + 
row.Cells[YOUR COLUMN NAME].Value +"');"; 
```

# xml - 为什么eclipse会闪烁并且在编辑器中加载XML很慢？

> ID：15470053
> 
> 赞同：7
> 
> 时间：2013-03-18T05:01:13.053
> 
> 标签：xml, eclipse, performance, editor, flicker

我的 android ADT Eclipse 已进入每次在 XML 编辑器之间切换时速度很慢的状态。此外，*Reload Dependencies*和*Turn Grammar Constraints Off*工具栏按钮会闪烁。我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T06:43:56.010

您正在使用 Eclipse 4.2 或 4.2.1，在基于 XML 的编辑器之间切换时存在[已知的性能问题。](https://bugs.eclipse.org/bugs/show_bug.cgi?id=394588)使用更新管理器升级到 Eclipse 4.2.2。

编辑：同时 Eclipse 4.3 已经发布了更多的性能修复。建议大家再次升级。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-27T10:44:08.937

也许您的操作使您的内存不足。因此您可以转到安装了 eclips 的 eclips.ini 文件并打开它。你会看到这样的：

```
-startup
plugins/org.eclipse.equinox.launcher_1.3.0.v20130327-1440.jar
--launcher.library
plugins/org.eclipse.equinox.launcher.gtk.linux.x86_64_1.1.200.v20140116-2212
-product
org.eclipse.epp.package.jee.product
--launcher.defaultAction
openFile
-showsplash
org.eclipse.platform
--launcher.XXMaxPermSize
256m
--launcher.defaultAction
openFile
--launcher.appendVmargs
-vmargs
-Dosgi.requiredJavaVersion=1.6
-XX:MaxPermSize=256m
-Xms40m
-Xmx512m 
```

然后将 Xmx512m 增加到 1024 和 XX:MaxPermSize=256m 到 XX:MaxPermSize=1024m 。希望有帮助。

# java - 如何读取 SQL Server Compact Edition 文件（SDF+Java）？

> ID：15470056
> 
> 赞同：1
> 
> 时间：2013-03-18T05:01:29.277
> 
> 标签：java, sql-server-ce

谁能告诉我如何从`.sdf`Java 文件中读取数据？

Java中是否有与此兼容的驱动程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-04T09:15:36.233

不，Java 中没有驱动程序，SQL Server Compact 只能在 Windows 平台上运行。您必须通过某些服务（WCF/Web API 或类似服务）在 Windows 机器上公开数据

# mysql - 在 mysql 中使用 EXPLAIN 时 selecttype 和 type 是什么以及如何使用这些结果提高性能

> ID：15470065
> 
> 赞同：0
> 
> 时间：2013-03-18T05:02:13.503
> 
> 标签：mysql

我在某些地方看到我们可以通过使用 EXPLAIN 关键字在 mysql 中看到查询详细信息。我可以看到细节。但是`selecttype`和`type`和`possiblekeys`到底说了什么？以及如何使用提供的详细信息来提高查询的性能`EXPALIN`。

提前致谢....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T05:06:05.343

[你可以从这里](http://dev.mysql.com/doc/refman/5.0/en/explain-output.html)得到一些想法..

# php - 允许脚本与 SESSION 身份验证一起运行

> ID：15470073
> 
> 赞同：0
> 
> 时间：2013-03-18T05:03:34.933
> 
> 标签：php, sqlite, session, session-storage

我有一个 php 脚本，如果文本框表单中的条目与数据库中的任何内容匹配，则创建一个会话：

```
 $name= $_POST['name']; 

 $db= new  PDO('sqlite:people.db'); 
 $query = "SELECT * from names WHERE name= '$name'";
 $results = $db->Query($query)->fetchAll(); 

 $allow= count($results); 

 if ( $table  > 0 )
    {
    session_start();
    $enable= 1;
    $_SESSION['enabled'] = $enable;
    } 
```

另一个脚本是这样的：

```
 if (isset($_SESSION))
{

 $code= $_POST['code']; 
 $db= new  PDO('sqlite:Properties1.db'); 
 $query = "SELECT * from properties WHERE postcode = '$postcode'";
 $results = $db->Query($query)->fetchAll(); //fetchAll puts results into an array

  $allow= count($results); //count the rows in the results array

 if ( $rowcount > 0 )
 {
 do this
 } 
```

但是第二个脚本没有接听会话

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T05:17:31.413

`if (isset($_SESSION))`这将始终返回 1 并且 if 条件将始终执行。因为`$_SESSION`它是**超级全球性**的，而且它总是通过脚本设置。

尝试如下检查，

```
if (isset($_SESSION['enabled']))
{ 
```

# php - 如何使用 POST 方法从 Android 获取带有 php 的 Json DATA？

> ID：15470081
> 
> 赞同：0
> 
> 时间：2013-03-18T05:04:29.567
> 
> 标签：php, android, json

我正在尝试与 php 服务器和 android 通信

这是我的 JAVA 文件和 php

// 使用 gson 库将数据转换为 Json。-> 没关系！

```
 String str = new TOJSON().tojson("testName", "TestPW", "testEmail", 77);

   USERDATA userdata = gson.fromJson(new HTTPCONNECTION().httpPost("http://testsever.com/test.php", str).toString(), USERDATA.class);

   textView textView = (TextView)findViewById(R.id.textView1);
   textView.setText(userdata.getName()); 
```

* * *

//连接php服务器

```
public class HTTPCONNECTION {

    public String httpPost(String url, String str){
        HttpClient client = new DefaultHttpClient();
        HttpConnectionParams.setConnectionTimeout(client.getParams(), 30000);
        HttpResponse response;

        try {
            HttpPost httppost = new HttpPost(url);
            StringEntity entity = new StringEntity(str, "UTF-8");
            entity.setContentType("application/json");
            httppost.setEntity(entity);

            HttpResponse httpResponse = client.execute(httppost); 
            HttpEntity httpEntity = httpResponse.getEntity();
            Log.v("OWL", EntityUtils.toString(httpEntity));

            return EntityUtils.toString(httpEntity);
        }

        catch (ClientProtocolException e) {
            e.printStackTrace();
            return null;
        } 
        catch (IOException e) {
            e.printStackTrace();
            return null;
        }
} 
```

* * *

和php文件获取json数据并发送json数据进行测试

```
$value = json_decode(stripslashes($_POST), true);
echo (json_encode($value)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T05:19:19.467

在我的情况下，我使用 PHP

```
 $_POST = json_decode(file_get_contents("php://input")); 
```

在Android方面

```
StringEntity se = new StringEntity(jsonObject.toString(),
                    HTTP.UTF_8);
se.setContentType(new BasicHeader(HTTP.CONTENT_TYPE,
                    "application/json"));
request.setEntity(se); 
```

PHP 手册 -[输入/输出 PHP 流](http://php.net/manual/bg/wrappers.php.php)

从 Android 向服务器发送 POST JSON 数据的完整函数源

```
public static void restApiJsonPOSTRequest(
            final DefaultHttpClient httpclient, final HttpPost request,
            final JSONObject jsonObject, final Handler responder,
            final int responseCode, final int packetSize) {

        new Thread(new Runnable() {

            @Override
            public void run() {
                try {
                    try {

                        StringEntity se = new StringEntity(jsonObject
                                .toString(), HTTP.UTF_8);
                        se.setContentType(new BasicHeader(HTTP.CONTENT_TYPE,
                                "application/json"));
                        request.setEntity(se);

                        HttpResponse response = httpclient.execute(request);
                        HttpEntity entity = response.getEntity();
                        if (entity != null) {
                            ByteArrayOutputStream baos = new ByteArrayOutputStream();
                            DataInputStream dis = new DataInputStream(entity
                                    .getContent());
                            byte[] buffer = new byte[packetSize];// In bytes
                            int realyReaded;
                            double contentSize = entity.getContentLength();
                            double readed = 0L;
                            while ((realyReaded = dis.read(buffer)) > -1) {
                                baos.write(buffer, 0, realyReaded);
                                readed += realyReaded;
                                sendDownloadingMessage(responder,
                                        (double) contentSize, readed);
                            }
                            sendCompleteMessage(responder,
                                    new InternetResponse(baos, responseCode,
                                            request.getURI().toString()));
                        } else {
                            sendErrorMessage(responseCode, responder,
                                    new Exception("Null"), request.getURI()
                                            .toString());
                        }
                    } catch (ClientProtocolException e) {
                        sendErrorMessage(responseCode, responder, e, request
                                .getURI().toString());
                    } catch (IOException e) {
                        sendErrorMessage(responseCode, responder, e, request
                                .getURI().toString());
                    } finally {
                        httpclient.getConnectionManager().shutdown();
                    }
                } catch (NullPointerException ex) {
                    sendErrorMessage(responseCode, responder, ex, request
                            .getURI().toString());
                }
            }
        }).start();
    } 
```

或不同的方式

```
public static void postJSONObject(final String url,
            final Handler responder, final int responseCode,
            final int packetSize, final JSONObject jsonObject,
            final URLConnection connection) {

        new Thread(new Runnable() {

            @Override
            public void run() {
                System.out.println(connection);
                sendConnectingMessage(responder);
                PrintWriter writer = null;
                ByteArrayOutputStream baos = new ByteArrayOutputStream();
                try {

                    HttpURLConnection htt = (HttpURLConnection) connection;
                    htt.setRequestMethod("POST");
                    OutputStream output = connection.getOutputStream(); // exception
                                                                        // throws
                                                                        // here
                    writer = new PrintWriter(new OutputStreamWriter(output,
                            "UTF-8"), true); // true = autoFlush, important!
                    String strJson = jsonObject.toString();
                    output.write(strJson.getBytes("UTF-8"));
                    output.flush();
                    System.out.println(htt.getResponseCode());
                    // Read resposne
                    baos = new ByteArrayOutputStream();
                    DataInputStream dis = new DataInputStream(
                            connection.getInputStream());
                    byte[] buffer = new byte[packetSize];// In bytes
                    int realyReaded;
                    double contentSize = connection.getContentLength();
                    double readed = 0L;
                    while ((realyReaded = dis.read(buffer)) > -1) {
                        baos.write(buffer, 0, realyReaded);
                        readed += realyReaded;
                        sendDownloadingMessage(responder, (double) contentSize,
                                readed);
                    }
                    sendCompleteMessage(responder, new InternetResponse(baos,
                            responseCode, url));
                } catch (Exception e) {
                    sendErrorMessage(responseCode, responder, e, url);

                } finally {
                    if (writer != null) {
                        writer.close();
                    }
                }

            }
        }).start();
    } 
```

# uitextview - 设置 UITextView ios 的边框

> ID：15470084
> 
> 赞同：2
> 
> 时间：2013-03-18T05:04:37.057
> 
> 标签：uitextview, border, layer, shadow

我有一个程序：

```
 [textView setFont:[UIFont fontWithName:@"ArialMT" size:20]];
            [textView setEditable:NO];
            [textView setScrollEnabled:NO];
            [textView.layer setMasksToBounds:NO];
            [textView.layer setBorderColor: [[UIColor lightGrayColor] CGColor]];
            [textView.layer setBorderWidth:1.0f];
            textView.layer.shadowColor = [[UIColor lightGrayColor]CGColor];
            textView.layer.shadowOpacity = 1.0f;
            textView.layer.shadowRadius = 5.0f;
            [textView.layer setShadowOffset:CGSizeMake(2, 2)]; 
```

这段代码为 UITextView 设置了阴影和边框，但是如何设置 textview 的边框不包括顶线，只为左、右和底线设置边框？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-12T07:17:20.330

这会做你想做的事，而且使用和集成非常简单：[https ://github.com/99centsappdevelopment/JSTextView](https://github.com/99centsappdevelopment/JSTextView)

# c# - 如何在 jquery easy ui CRUD DataGrid 中绑定 Web 服务

> ID：15470088
> 
> 赞同：2
> 
> 时间：2013-03-18T05:05:14.980
> 
> 标签：c#, jquery, asp.net, web-services, jquery-easyui

我正在使用 jQuery EasyUI CRUD 数据网格在 c# asp.net 中开发一个网站。但是我需要用我的 Web 服务替换 .php 文件来绑定数据网格，如下面的代码片段所示。请建议我这样做。

```
 <table id="dg" title="My Users" style="width:700px;height:250px"  
            toolbar="#toolbar" pagination="true" idField="id"  
            rownumbers="true" fitColumns="true" singleSelect="true">  
        <thead>  
            <tr>  
                <th field="firstname" width="50" editor="{type:'validatebox',options:{required:true}}">First Name</th>  
                <th field="lastname" width="50" editor="{type:'validatebox',options:{required:true}}">Last Name</th>  
                <th field="phone" width="50" editor="text">Phone</th>  
                <th field="email" width="50" editor="{type:'validatebox',options:{validType:'email'}}">Email</th>  
            </tr>  
        </thead>  
    </table>  

<script type="text/javascript">  
        $(function(){  
            $('#dg').edatagrid({  
                url: 'get_users.php',  
                saveUrl: 'save_user.php',  
                updateUrl: 'update_user.php',  
                destroyUrl: 'destroy_user.php'  
            });  
        });  
    </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-27T09:22:07.597

您可以将 jQuery Ajax 与 jTemplate 一起使用。

```
$.ajax({
    url: "Your webservice path",
    type: "POST",
    data: "JSON formated data to pass in the webservice",
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    cache: false,
    success: function (data) {
       //You can further use jTemplate to output the data.
    },
    error: function (data) {
    }
}); 
```

以下链接显示了 jTemplate 的一个简单示例：http: [//www.codeproject.com/Articles/45759/jQuery-jTemplates-Grid](http://www.codeproject.com/Articles/45759/jQuery-jTemplates-Grid)

# jquery - Adipoli jQuery 覆盖文本

> ID：15470089
> 
> 赞同：1
> 
> 时间：2013-03-18T05:05:16.383
> 
> 标签：jquery, hover

我正在使用 Adipoli jquery 插件进行图像叠加（从灰色到彩色..但现在我也想添加一个文本标题.. [http://jobyj.in/adipoli/](http://jobyj.in/adipoli/)它说它有一个文本叠加功能（在可用选项）但不知道如何在 html 中的图像上添加文本。

```
<script type="text/javascript">      
    $(function()
    {
        $('.row6').adipoli(
        {
            'overlayText' : '<b>overlayText</b>',
            'startEffect' : 'grayscale',
            'hoverEffect' : 'normal',
        });
    }); 
</script> 
```

html代码如下：

```
<div class="box1"><a href="#"><img class="img-style row6" src="images/imagen_box1.jpg" /></a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T05:17:24.007

在 'hoverEffect':'normal' 属性之后

不需要昏迷（，）..

```
$('.row6').adipoli(
            {
                'overlayText' : '<b>overlayText</b>',
                'startEffect' : 'grayscale',
                'hoverEffect' : 'normal'
            }); 
```

# c# - 在 C# 中将 Exe 文件作为嵌入式资源运行

> ID：15470090
> 
> 赞同：17
> 
> 时间：2013-03-18T05:05:23.173
> 
> 标签：c#, resources, embed, exe

我有一个第 3 方 EXE。我只需要从我的 C# 应用程序中运行它。

我的主要目标是从我的 C# 文件中为第 3 方可执行文件提供版权。

有没有更好的方法来做到这一点。？

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-18T05:30:22.897

1.  首先将嵌入的可执行文件作为资源文件添加到您现有的资源文件中，如果您没有，则需要[将现有项添加到您的项目，并选择资源文件]
2.  在资源编辑器页面添加可执行文件时，选择类型为[Files]，然后找到嵌入的可执行文件并添加。例如名为“subexe.exe”的文件，则资源设计cs文件将添加以下代码：

    ```
    internal static byte[] SubExe {
            get {
                object obj = ResourceManager.GetObject("SubExe", resourceCulture);
                return ((byte[])(obj));
            }
        } 
    ```

3.  添加一个方法来访问你的资源，这也很简单，只需在你的资源设计器cs文件中添加以下代码

    ```
     public static byte[] GetSubExe()
        {
            return SubExe;
        } 
    ```

4.  在您的主要可执行源代码中，添加以下内容以读取资源并将其写入新文件

    ```
     string tempExeName = Path.Combine(Directory.GetCurrentDirectory(), "A3E5.exe");

    ```
     using(FileStream fsDst = new FileStream(tempExeName,FileMode.CreateNew,FileAccess.Write))
        {
            byte[] bytes = Resource1.GetSubExe();

            fsDst.Write(bytes, 0, bytes.Length);
        } 
    ``` 
    ```

5.  使用进程运行新的可执行文件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-31T16:44:19.897

可以写一个更简单的

```
私有无效提取资源（字符串 resName，字符串 fName）
 {
      对象 ob = Properties.Resources.ResourceManager.GetObject(resName, originalCulture);
      byte[] myResBytes = (byte[])ob;
      使用 (FileStream fsDst = new FileStream(fName, FileMode.CreateNew, FileAccess.Write))
      {
         字节 [] 字节 = myResBytes;
         fsDst.Write(bytes, 0, bytes.Length);
         fsDst.Close();
         fsDst.Dispose();
      }
}

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-02T18:26:11.500

右键单击您的项目解决方案资源管理器然后添加现有项目在对话框中选择可执行文件然后转到您的exe路径并将您的exe添加到您的项目中..然后如果您想在按钮单击事件上启动您的exe然后编写此代码很简单简单的 ...

```
private void button_Click(object sender, EventArgs e)
        {
            System.Diagnostics.Process.Start("fire.EXE");
        } 
```

# ruby-on-rails - 从rails模型对象中删除属性的正确方法

> ID：15470092
> 
> 赞同：3
> 
> 时间：2013-03-18T05:05:50.827
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

使用我们的 rails 3.2.12 应用程序的客户模型中有电话属性。我们想在检索客户时删除电话属性。这是我们所做的：

```
@customers = Customer.all
@customers.delete :phone 
```

但是有错误：

```
delete_all doesn't support limit scope 
```

从模型对象中删除属性的正确方法是什么？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T05:56:42.280

您可以使用它`Customer.select('name, address')`来仅检索您想要的字段。请注意，您传递了一个带有逗号分隔字段的字符串。

这将生成一个这样的 SQL 请求

```
SELECT customer.name, customer.address FROM customer 
```

然后，您只获取您想要的数据，而不将其从数据库中删除（这是您最初的调用试图做的）。

我最初的回复显示 pluck 的使用不正确，它只适用于单列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-08T09:12:16.117

我知道您使用的是 Rails 3.2.12，但在 Rails 4 中 pluck 也[适用于多列](http://apidock.com/rails/v4.0.2/ActiveRecord/Calculations/pluck)，允许类似

```
Customer.pluck(:name, :address) 
```

# hibernate - grails 没有错误并验证为 true 但不保存。休眠无更新

> ID：15470098
> 
> 赞同：4
> 
> 时间：2013-03-18T05:06:34.683
> 
> 标签：hibernate, grails, grails-orm

grails 没有错误并验证为 true 但不保存。

我有一个调用 .save() 的方法，但不将数据保存在数据库中。我试过ff：

1.  称为 FailOnError: true 但不显示任何失败的内容
2.  validate()，它确实返回 true
3.  hasErrors()，它确实返回 true put
4.  put return objectInstance 并显示该值已更改
5.  设置冲洗：假

但是在上述所有内容中没有显示任何验证失败，它仍然不会保存在数据库中。我尝试记录休眠状态，但它没有显示该实例的“更新”方法。Mayeb 这就是为什么没有更新发生的原因。但我最大的问题是为什么？为什么在没有错误或任何东西的情况下不调用更新？我错过了什么。谢谢。

这是我的控制器代码：

```
def obpViewFlow = {

    start {
        action {
            def caseInstance = CmCase.get(params.caseId as Long)
            .....
        }
        on("success").to 'obpViewCase'
        on(Exception).to 'obpViewCase'
    }

    obpViewCase {
        on("edit").to 'edit'
        on("cancel").to 'cancel'
    }

    edit {
        redirect( action:"obpEdit", controller:"olderBlind", params:[caseId: flow.obpCaseInstance.olderBlind.cmCaseIdCmCase])
    }

    cancel {
        redirect( action:"obpView", controller:"olderBlind", params:[caseId: flow.obpCaseInstance.olderBlind.cmCaseIdCmCase])
    }def obpViewFlow = {

    start {
        action {
            def caseInstance = CmCase.get(params.caseId as Long)
            ObpCase obpCaseInstance = caseService.getObpCase(caseInstance)

            // set obpCaseInstance to flow scope, instance for view state
            flow.obpCaseInstance = obpCaseInstance
            if (params.created) {
                flash.message = "OBP Case has been successfully saved."
            }
        }
        on("success").to 'obpViewCase'
        on(Exception).to 'obpViewCase'
    }

    obpViewCase {
        on("edit").to 'edit'
        on("cancel").to 'cancel'
    }

    edit {
        redirect( action:"obpEdit", controller:"olderBlind", params:[caseId: flow.obpCaseInstance.olderBlind.cmCaseIdCmCase])
    }

    cancel {
        redirect( action:"obpView", controller:"olderBlind", params:[caseId: flow.obpCaseInstance.olderBlind.cmCaseIdCmCase])
    }
}

def obpEditFlow = {

    start {
        action {
            def caseInstance = CmCase.get(params.caseId as Long)
            flow.appDate = caseInstance.applicationDate
            ObpCase obpCaseInstance = caseService.getObpCase(caseInstance)

            // set obpCaseInstance to flow scope, instance for view state
            flow.obpCaseInstance = obpCaseInstance

            // get the following list to populate dropdown fields
            def residenceTypeList = ResidenceType.list()
            def visualImpairmentCauseList = VisualImpairmentCause.list()
            def referralSourceList = ReferralSource.list()

            [residencesType: residenceTypeList, visualImpairmentsCause: visualImpairmentCauseList, referralSources: referralSourceList]
        }
        on("success").to 'obpEditCase'
        on(Exception).to 'obpEditCase'
    }

    obpEditCase {
        on("save") {

            this.bindObpFields(flow, caseService, params)
            if (!this.bindAndValidateConstraints(flow, caseService, params)) {
                flow.olderBlindInstance = flow.obpCaseInstance.olderBlind
                return error()
            }
        }.to 'save'

        on("cancel").to 'cancel'
    }

    save {
        action {
            def obpCaseInstance = flow.obpCaseInstance
            try {
                HttpSession theSession = request.getSession();

                def obpCase = caseService.saveUpdateObpCase(obpCaseInstance, theSession.currentUser)

            }
            catch(Exception ie) {
                flow.exceptionMessage = ie.getMessage()
                throw ie
            }
        }

        on("success").to 'finish'
        on(Exception).to 'handleError'
    }

    finish {
    def obpViewFlow = {

    start {
        action {
            def caseInstance = CmCase.get(params.caseId as Long)
            ObpCase obpCaseInstance = caseService.getObpCase(caseInstance)

            // set obpCaseInstance to flow scope, instance for view state
            flow.obpCaseInstance = obpCaseInstance
            if (params.created) {
                flash.message = "OBP Case has been successfully saved."
            }
        }
        on("success").to 'obpViewCase'
        on(Exception).to 'obpViewCase'
    }

    obpViewCase {
        on("edit").to 'edit'
        on("cancel").to 'cancel'
    }

    edit {
        redirect( action:"obpEdit", controller:"olderBlind", params:[caseId: flow.obpCaseInstance.olderBlind.cmCaseIdCmCase])
    }

    cancel {
        redirect( action:"obpView", controller:"olderBlind", params:[caseId: flow.obpCaseInstance.olderBlind.cmCaseIdCmCase])
    }
}

def obpEditFlow = {

    start {
        action {
            def caseInstance = CmCase.get(params.caseId as Long)
            flow.appDate = caseInstance.applicationDate
            ObpCase obpCaseInstance = caseService.getObpCase(caseInstance)

            // set obpCaseInstance to flow scope, instance for view state
            flow.obpCaseInstance = obpCaseInstance

            // get the following list to populate dropdown fields
            def residenceTypeList = ResidenceType.list()
            def visualImpairmentCauseList = VisualImpairmentCause.list()
            def referralSourceList = ReferralSource.list()

            [residencesType: residenceTypeList, visualImpairmentsCause: visualImpairmentCauseList, referralSources: referralSourceList]
        }
        on("success").to 'obpEditCase'
        on(Exception).to 'obpEditCase'
    }

    obpEditCase {
        on("save") {

            this.bindObpFields(flow, caseService, params)
            if (!this.bindAndValidateConstraints(flow, caseService, params)) {
                flow.olderBlindInstance = flow.obpCaseInstance.olderBlind
                return error()
            }
        }.to 'save'

        on("cancel").to 'cancel'
    }

    save {
        action {
            def obpCaseInstance = flow.obpCaseInstance
            try {
                HttpSession theSession = request.getSession();

                def obpCase = caseService.saveUpdateObpCase(obpCaseInstance, theSession.currentUser)

            }
            catch(Exception ie) {
                flow.exceptionMessage = ie.getMessage()
                throw ie
            }
        }

        on("success").to 'finish'
        on(Exception).to 'handleError'
    }

    finish {

        redirect( action:"obpView", controller:"olderBlind", params:["created": "created", caseId: flow.obpCaseInstance.olderBlind.cmCaseIdCmCase])
    }

    handleError() {
        action {
            return success()
        }

        on("success").to 'obpEditCase'
    }

    cancel {
        redirect( action:"obpView", controller:"olderBlind", params:[caseId: flow.obpCaseInstance.olderBlind.cmCaseIdCmCase])
    }
}
        redirect( action:"obpView", controller:"olderBlind", params:["created": "created", caseId: flow.obpCaseInstance.olderBlind.cmCaseIdCmCase])
    }

    handleError() {
        action {
            return success()
        }

        on("success").to 'obpEditCase'
    }

    cancel {
        redirect( action:"obpView", controller:"olderBlind", params:[caseId: flow.obpCaseInstance.olderBlind.cmCaseIdCmCase])
    }
}
}

def obpEditFlow = {

    start {
        action {
            def caseInstance = CmCase.get(params.caseId as Long)
            ....
        }
        on("success").to 'obpEditCase'
        on(Exception).to 'obpEditCase'
    }

    obpEditCase {
        on("save") {

            this.bindObpFields(flow, caseService, params)
            if (!this.bindAndValidateConstraints(flow, caseService, params)) {
                flow.olderBlindInstance = flow.obpCaseInstance.olderBlind
                return error()
            }
        }.to 'save'

        on("cancel").to 'cancel'
    }

    save {
        action {
            def obpCaseInstance = flow.obpCaseInstance
            try {
                HttpSession theSession = request.getSession();

                def obpCase = caseService.saveUpdateObpCase(obpCaseInstance, theSession.currentUser)

            }
            catch(Exception ie) {
                flow.exceptionMessage = ie.getMessage()
                throw ie
            }
        }

        on("success").to 'finish'
        on(Exception).to 'handleError'
    }

    finish {

        redirect( action:"obpView", controller:"olderBlind", params:["created": "created", caseId: flow.obpCaseInstance.olderBlind.cmCaseIdCmCase])
    }

    handleError() {
        action {
            return success()
        }

        on("success").to 'obpEditCase'
    }

    cancel {
        redirect( action:"obpView", controller:"olderBlind", params:[caseId: flow.obpCaseInstance.olderBlind.cmCaseIdCmCase])
    }
} 
```

这是我的保存服务代码

```
def CmCase saveUpdateCase(CmCase caseInstance, Users currentUser) {
    if (!caseInstance.save(flush:true)) {

        if (log.isDebugEnabled()) {
            caseInstance.errors.allErrors.each { log.debug it }
        }

        throw new CaseException(message: "case.cmCase.exception", caseInstance: caseInstance)
    }
    return caseInstance
} 
```

Hibernate 在执行其他查询但不更新时显示所有选择和插入。

# c# - 作为程序的一部分在运行时编译代码

> ID：15470102
> 
> 赞同：2
> 
> 时间：2013-03-18T05:06:57.090
> 
> 标签：c#

编写此代码片段是为了在运行时编译代码。编译后的代码与任何其他程序一样工作。反射可以访问。我想做一些不同的事情。

```
using System;
using System.Collections.Generic;
using System.Linq;
using Microsoft.CSharp;
using System.CodeDom.Compiler;

class Program
{
    static void Main(string[] args)
    {
        var csc = new CSharpCodeProvider(new Dictionary<string, string>() { { "CompilerVersion", "v3.5" } });
        var parameters = new CompilerParameters(new[] { "mscorlib.dll", "System.Core.dll" }, "foo.exe", true);
        parameters.GenerateExecutable = true;
        CompilerResults results = csc.CompileAssemblyFromSource(parameters,
        @"using System.Linq;
            class Program {
              public static void Main(string[] args) {
                var q = from i in Enumerable.Range(1,100)
                          where i % 2 == 0
                          select i;
              }
            }");
        results.Errors.Cast<CompilerError>().ToList().ForEach(error => Console.WriteLine(error.ErrorText));
    }
} 
```

例如 ：

我的代码是 Textbox1.Text="123"; 它在文件或数据库中。

有一个表格。表格中有一个文本框。我想在运行时使用字符串代码作为我的程序的一部分。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-18T06:18:49.210

为此，您可以将函数名称更改为 string_Function 而不是 Main。将上述代码片段另存为 .cs 文件。说 Code_Snippet.cs。现在将此文件添加到您的 MainProject。无论您想在哪里使用此代码片段，您都必须编写代码行，例如 Code_Snippet.String_Function(TextBox.Text);

# hadoop - 生成 Behemoth 语料库时出错

> ID：15470103
> 
> 赞同：0
> 
> 时间：2013-03-18T05:07:03.220
> 
> 标签：hadoop, behemoth

我是 hadoop 和巨兽的新手，我按照[https://github.com/DigitalPebble/behemoth/wiki/tutorial](https://github.com/DigitalPebble/behemoth/wiki/tutorial)上的教程使用以下命令为文本文档生成巨兽语料库：

sudo bin/hadoop jar /home/madhumita/behemoth/core/target/behemoth-core-*-job.jar com.digitalpebble.behemoth.util.CorpusGenerator -i /home/madhumita/Documents/testFile -o /home/madhumita /巨兽/testGateOpCorpus

我收到错误消息：

错误 util.CorpusGenerator：输入不存在：/home/madhumita/Documents/testFile

每次我运行命令时，虽然我已经用 gedit 检查了路径是否正确。我在网上搜索了任何类似的问题，但我找不到任何类似的问题。关于它为什么会发生的任何想法？如果 .txt 文件格式不可接受，那么所需的文件格式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T14:54:40.197

好的，我设法解决了这个问题。所需的输入路径是hadoop分布式文件系统上文件的路径，而不是本地机器上的路径。

所以首先我将本地文件复制到 HDFS 上的 /data/test.txt 并将此路径作为输入参数。命令如下：

```
 sudo bin/hadoop fs -copyFromLocal /home/madhumita/Documents/testFile/test.txt /docs/test.txt

    sudo bin/hadoop jar /home/madhumita/behemoth/core/target/behemoth-core-*-job.jar com.digitalpebble.behemoth.util.CorpusGenerator -i /docs/test.txt -o /docs/behemoth/test 
```

这解决了这个问题。感谢所有试图解决问题的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-04T11:02:56.470

要直接从本地文件系统生成 Behemoth 语料库，请使用文件协议引用它。`(file:///)`

```
hadoop jar core/target/behemoth-core-*-job.jar com.digitalpebble.behemoth.util.CorpusGenerator -i "file:///home/madhumita/Documents/testFile/test.txt" -o "/docs/behemoth/test" 
```

# php - 发布到前页后返回（graph api facebook php sdk）

> ID：15470106
> 
> 赞同：1
> 
> 时间：2013-03-18T05:07:33.233
> 
> 标签：php, javascript, facebook, facebook-graph-api, facebook-php-sdk

**关闭**

只需删除

```
echo("<script> top.location.href='" . $auth_url . "'</script>"); 
```

和

```
 change define('REDIRECT_URI 
```

您好，这是我的第一个问题，我对 facebook graph api 有一些问题。
我在画布页面中从我的网站申请更新状态。
这是代码

```
define('APP_ID', 'numbernumbernumber');
define('APP_SECRET', 'codecodecode');
define('REDIRECT_URI', 'canvaspagecanvanvaspage');
define('SCOPE','publish_actions,publish_stream');

require 'includes/php-sdk/facebook.php';

$facebook = new Facebook(array(
        'appId' => APP_ID,
        'secret' => APP_SECRET,
        'cookie' => true,
        'display' => 'touch'
    ));

$facebook->setAccessToken($access_token);
$user_id = $facebook->getUser();

$user = $facebook->getUser();
$access_token = $facebook->getAccessToken();

if ($user) {
try {
    $user_profile = $facebook->api('/me');
} catch (FacebookApiException $e) {
    error_log($e);
    $user = null;
}
}

$auth_url = "https://www.facebook.com/dialog/oauth?client_id=". APP_ID . "&redirect_uri=" . urlencode(REDIRECT_URI)."&scope=".SCOPE;

$signed_request = $_REQUEST["signed_request"];
list($encoded_sig, $payload) = @explode('.', $signed_request, 2);
$data = json_decode(base64_decode(strtr($payload, '-_', '+/')), true);
if (empty($data["user_id"])) {
    echo("<script> top.location.href='" . $auth_url . "'</script>");
}
$access_token=$data["oauth_token"]; 
```

在 html 文档中：

```
 <div id="fb-root"></div>
    <script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/id_ID/all.js#xfbml=1&appId=numbernumbernumber";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
    <div class="fb-login-button" autologoutlink="true"  onlogin="require('./log').info('onlogin callback')" data-show-faces="false" data-width="200" data-max-rows="1"></div><br >

<form enctype="multipart/form-data" action="https://graph.facebook.com/me/feed?message&access_token=<? echo $access_token ?>" method="post">

<br/>Write your status : 
<input name="message" type="text" value="">
<input type="submit" value="Kirim" /><br/></form> 
```

1.  发布状态成功后，画布（或画布中的 iframe 不再返回）
    [http://i.stack.imgur.com/4AZ7N.jpg](http://i.stack.imgur.com/4AZ7N.jpg) -> 发布成功
    [http://i.stack.imgur.com/OZbPX.jpg](http://i.stack.imgur.com/OZbPX.jpg) - > 但是画布页面？
    请帮我....

2.  如果我打开画布页面，它会打开画布页面......如果我打开指向我的网站的链接，它总是重定向到画布页面。请帮助我不要重定向到画布页面。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T21:31:27.320

你能给我链接看看它现在是如何工作的吗？

如果您在画布页面上工作，则不能离开画布页面，如果要将它们发送到您的站点，则需要打开一个新窗口。

# php - MySql Join 查询左连接

> ID：15470114
> 
> 赞同：1
> 
> 时间：2013-03-18T05:08:27.687
> 
> 标签：php, mysql, sql

我的表名**学生** 有字段**student_id、house_id** 等。以及科目、房屋、学生科目

我正在使用这个查询

```
SELECT students_subjects.student_id,students.house_id,students_subjects.subject_id,subjects.subject_name,students.rollno,students.first_name, students.last_name FROM 
students_subjects LEFT JOIN students on students_subjects.student_id=students.id
LEFT JOIN subjects on students_subjects.subject_id=subjects.id  WHERE students_subjects.class_years_section_id=1 
```

这对我来说很好..

现在我也想从房屋表中获取房屋名称

我试过这个查询

```
SELECT students_subjects.student_id,students.house_id,houses.house_name, students_subjects.subject_id,subjects.subject_name,students.rollno,students.first_name, students.last_name FROM 
students_subjects LEFT JOIN students on students_subjects.student_id=students.id
LEFT JOIN subjects on students_subjects.subject_id=subjects.id 
```

在students.house_id=houses.id 上LEFT JOIN 房屋，其中students_subjects.class_years_section_id=1

```
AND students_subjects.school_session_id=1 AND students.is_active=1 
```

它给了我 house_name = NULL

谁能告诉我如何获得房屋名称。使用连接查询

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-18T05:10:28.267

查询中的错误是由`LEFT JOIN`after`WHERE`子句的关键字引起的，

```
SELECT  students_subjects.student_id,
        students.house_id,
        students_subjects.subject_id,
        subjects.subject_name,
        students.rollno,
        students.first_name, 
        students.last_name 
FROM    students_subjects 
        LEFT JOIN students 
            on students_subjects.student_id=students.id
        LEFT JOIN subjects 
            on students_subjects.subject_id=subjects.id
        LEFT JOIN houses 
            on students.house_id=houses.id
WHERE   students_subjects.class_years_section_id = 1 AND 
        students_subjects.school_session_id = 1 AND 
        students.is_active = 1 
```

请记住，`JOIN`s 是`FROM`条款的一部分。

* * *

**更新 1**

```
SELECT  b.student_id,
        a.house_id,
        b.subject_id,
        c.subject_name,
        a.rollno,
        a.first_name, 
        a.last_name,
        d.house_name            
FROM    students a
        INNER JOIN students_subjects b
            ON b.student_id = a.id
        INNER JOIN subjects  c
            ON b.subject_id = c.id
        INNER JOIN houses d
            ON a.house_id = d.id
WHERE   b.class_years_section_id = 1 AND 
        b.school_session_id = 1 AND 
        a.is_active = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T05:14:16.530

你错过了放置`WHERE`条款，试试这个：

```
SELECT students_subjects.student_id,students.house_id,students_subjects.subject_id,subjects.subject_name,students.rollno,students.first_name, students.last_name 
FROM students_subjects 
     LEFT JOIN students ON students_subjects.student_id=students.id
     LEFT JOIN subjects ON students_subjects.subject_id=subjects.id  
     LEFT JOIN houses ON students.house_id=houses.id
WHERE students_subjects.class_years_section_id=1 
AND students_subjects.school_session_id=1 AND students.is_active=1 
```

# asp.net - 所有 MVC 页面都失败，并显示已添加具有相同键的项目的消息

> ID：15470118
> 
> 赞同：3
> 
> 时间：2013-03-18T05:09:02.417
> 
> 标签：asp.net, asp.net-mvc-3, asp.net-mvc-4

最终，我试图解决[加载任何 MVC 页面失败中引用的相同问题，并出现错误“已添加具有](https://stackoverflow.com/questions/13321205/loading-any-mvc-page-fails-with-the-error-an-item-with-the-same-key-has-already)[相同密钥的项目。”</a> 和已添加具有相同密钥的项目](http://forums.asp.net/t/1843922.aspx/1?+An+item+with+the+same+key+has+already+been+added+exception+thrown+fixed+by+recycling+app+pool)。第一个链接的副本是[All MVC pages failed with the message an item with the same key has been added](http://dotnetforum.net/topic/62125-all-mvc-pages-fail-with-the-message-an-item-with-the-same-key-has-already-been-added)但它有一些额外的相关信息，确认它只影响 MVC 页面，而 webforms 和应用程序的其他方面处理使用 appSettings 继续正常工作。

我现在已经在生产环境中看到了四次，并且在任何其他环境（开发、测试、UAT）中都没有看到过。我仔细检查和调试了 System.Web.WebPages 的源代码和 MVC 堆栈的相关部分，但没有遇到任何突出的问题。这个问题在从 MVC3 迁移到 MVC4 时仍然存在，并且来自 aspnetwebstack.codeplex.com 的最新变更集似乎没有解决这个问题。

问题的快速总结：

*   每个 MVC 页面都受到影响并且完全无法使用
*   WebForms 和使用 appSettings 的应用程序的其他方面继续正常工作
*   只有重新启动 appPool 才能解决此问题
*   至少一次，正如上面一篇文章中所引用的，这发生在 IIS 定期回收 appPool 之后
*   这在低流量和高流量期间都发生过
*   这发生在多台生产服务器上，但该问题在任何给定时间仅影响单个服务器，因为其他服务器继续提供 MVC 页面

有问题的代码行是`var items = new Lazy<Dictionary<object, object>>(() => appSettings.AllKeys.ToDictionary(key => key, key => (object)appSettings[key], comparer));`，但是当通过从`items` AppSettings 变量中请求一个值来强制延迟初始化时会发生这种情况，该变量来自 System.Web.WebConfigurationManager.AppSettings，它是对 System.Configuration.ConfigurationManager.AppSettings 的直接静态引用。所以我相信这条线相当于：`var items = new Lazy<Dictionary<object, object>>(() => System.Configuration.ConfigurationManager.AppSettings.AllKeys.ToDictionary(key => key, key => (object)appSettings[key], comparer));`

我很少怀疑框架问题，但似乎 appSettings 有两个相同的不同键（与支持同一键的多个值的 NameValueCollection 不同）。MVC 堆栈中使用的`comparer`是 StringComparer.OrdinalIgnoreCase，它似乎与配置系统使用的匹配。`ToDictionary()`如果这是一个框架问题，当使用扩展方法将 NameValueColleciton 强制放入字典时，MVC 堆栈似乎非常无情。我相信使用`appSettings.AllKeys.Distinct().ToDictionary(...)`可能会允许 MVC 堆栈像应用程序的其余部分一样正常运行，并且忽略重复键的可能性。这种无情的性质似乎也促成了[WebConfigScopeDictionary 中 NullReferenceException 中描述的问题](https://stackoverflow.com/questions/14577735/nullreferenceexception-in-webconfigscopedictionary)

```
Server stack trace: 
   at System.Collections.Generic.Dictionary`2.Insert(TKey key, TValue value, Boolean add)
   at System.Linq.Enumerable.ToDictionary[TSource,TKey,TElement](IEnumerable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer)
   at System.Web.WebPages.Scope.WebConfigScopeDictionary.<>c__DisplayClass4.<.ctor>b__0()
   at System.Lazy`1.CreateValue()
Exception rethrown at [0]: 
   at System.Lazy`1.get_Value()
   at System.Web.WebPages.Scope.WebConfigScopeDictionary.TryGetValue(Object key, Object& value)
   at System.Web.Mvc.ViewContext.ScopeGet[TValue](IDictionary`2 scope, String name, TValue defaultValue)
   at System.Web.Mvc.ViewContext.ScopeCache..ctor(IDictionary`2 scope)
   at System.Web.Mvc.ViewContext.ScopeCache.Get(IDictionary`2 scope, HttpContextBase httpContext)
   at System.Web.Mvc.ViewContext.GetClientValidationEnabled(IDictionary`2 scope, HttpContextBase httpContext)
   at System.Web.Mvc.Html.FormExtensions.FormHelper(HtmlHelper htmlHelper, String formAction, FormMethod method, IDictionary`2 htmlAttributes)
   at ASP._Page_Areas_Client_Views_Equipment_Index_cshtml.Execute()
   at System.Web.WebPages.WebPageBase.ExecutePageHierarchy()
   at System.Web.Mvc.WebViewPage.ExecutePageHierarchy()
   at System.Web.WebPages.WebPageBase.ExecutePageHierarchy(WebPageContext pageContext, TextWriter writer, WebPageRenderingBase startPage)
   at System.Web.Mvc.ViewResultBase.ExecuteResult(ControllerContext context)
   at System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<InvokeActionResultWithFilters>b__17()
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionResultWithFilters(ControllerContext controllerContext, IList`1 filters, ActionResult actionResult)
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<BeginInvokeAction>b__22(IAsyncResult asyncResult)
   at System.Web.Mvc.Controller.<>c__DisplayClass1d.<BeginExecuteCore>b__18(IAsyncResult asyncResult)
   at System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass4.<MakeVoidDelegate>b__3(IAsyncResult ar)
   at System.Web.Mvc.Controller.EndExecuteCore(IAsyncResult asyncResult)
   at System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass4.<MakeVoidDelegate>b__3(IAsyncResult ar)
   at System.Web.Mvc.MvcHandler.<>c__DisplayClass8.<BeginProcessRequest>b__3(IAsyncResult asyncResult)
   at System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass4.<MakeVoidDelegate>b__3(IAsyncResult ar)
   at System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
   at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) 
```

为了将我的问题与已经提出的问题区分开来，我会问是否有人看到配置系统因多个重复键而损坏，或者 NameValueCollection.AllKeys 返回两个相同的键？我知道您可以在配置文件中定义多个键，但最后一个键获胜，并且该场景不会重现此问题。

虽然我不是一个人多次看到这种行为，但描述这个问题的帖子相对较少，所以我也怀疑这可能是配置/环境问题，但同样，服务器将运行几个月而没有遇到此问题，并且appPool 重新启动会立即纠正问题。

如果服务器开始看到此错误，我已通过强制重新启动 appPool 来缓解此问题，但管理层对这种“hacky”解决方案不满意，因为某些用户仍会遇到错误。

帮助？！？！？

编辑：

这是一个人为的、俗气的测试，可以重现该场景，但无助于解决问题。它发生在大约。20% 的测试运行。该代码将因其他线程原因而崩溃，但令人感兴趣的是“已添加相同的键”错误。

```
[TestClass]
public class UnitTest1
{
    readonly NameValueCollection _nameValueCollection = new NameValueCollection();
    private Lazy<Dictionary<object, object>> _items;

    [TestMethod]
    public void ReproduceSameKeyHasAlreadyBeenAdded()
    {
        Thread[] threads = new Thread[1000];
        for (int i = 0; i < 1000; i++)
        {
            ThreadStart threadStart = AddEntry;
            Thread thread = new Thread(threadStart);
            threads[i] = thread;
        }
        foreach (var thread in threads)
            thread.Start();
        Thread.Sleep(100);
        _items = new Lazy<Dictionary<object, object>>(() => _nameValueCollection.AllKeys.ToDictionary(key => key, key => (object)_nameValueCollection[key], ScopeStorageComparer.Instance));

        object value;
        _items.Value.TryGetValue("4", out value); // approx. 20% of time, blows up here with mentioned error
        Assert.IsTrue(value != null);
    }

    private int _counter;
    private void AddEntry()
    {
        _counter++;
        try
        { // add a bunch of even keys, every other one a duplicate
            _nameValueCollection.Add((_counter%2) == 0 ? _counter.ToString() : (_counter + 1).ToString(), "some value");
        }
        catch {}
    }
}

StackTrace:
       at System.ThrowHelper.ThrowArgumentException(ExceptionResource resource)
       at System.Collections.Generic.Dictionary`2.Insert(TKey key, TValue value, Boolean add)
       at System.Linq.Enumerable.ToDictionary[TSource,TKey,TElement](IEnumerable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer)
       at UnitTestProject1.ReproduceSameKeyHasAlreadyBeenAdded.<TestMethod1>b__0() in c:\Git\AspNetWebStack\aspnetwebstack\UnitTestProject1\UnitTest1.cs:line 37
       at System.Lazy`1.CreateValue() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-02T01:29:52.260

We came across this same issue and finally tracked it down to dynamic updating of the ConfigurationManager.AppSettings collection. I have posted a full answer here: [https://stackoverflow.com/a/17415830/2423407](https://stackoverflow.com/a/17415830/2423407)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T12:45:09.570

您是否绝对肯定错误发生在您正在初始化项目的行上，而不是正在使用项目添加到其他字典的行上（我认为是静态的）。

对我来说，最有可能发生这种情况的方式是，如果代码是并行执行的（由两个并发用户），而第二个执行导致异常。

作为一般的解决方法，我通常使用所有配置参数初始化一个强类型类作为[自动启动提供程序](http://weblogs.asp.net/scottgu/archive/2009/09/15/auto-start-asp-net-applications-vs-2010-and-net-4-0-series.aspx)（并添加一些值的强类型类型检查，例如检查 int 是否为 int 等）以避免运行时错误。

这具有在热身时加载它们的双重好处，而不是在用户想要信息（更好的响应性能）时加载，并且据说它们也可以保证线程安全。

See if that doesn't fix your issue. If you do not want to do that I would at the very least try to execute the code that is failing for you with multiple threats hitting it, as my guess would be that you will see your error occur fairly reliably.

# java - 如何在 ListView 中“锚定”标题视图

> ID：15470121
> 
> 赞同：0
> 
> 时间：2013-03-18T05:09:29.293
> 
> 标签：java, android, listview, view, header

我正在尝试为我的列表视图“锚定”标题视图，这意味着当我向下滚动列表时，我不希望标题随之滚动。我希望标题始终保持静止。众所周知，这是一个用于将标头放置到 Listview 的小代码片段：

```
 lv = (ListView)v.findViewById(R.id.lv1);

                View header = (View)inflater.inflate(R.layout.listview_header, null);
                lv.addHeaderView(header); 
```

我提前感谢您提供的所有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T05:14:06.373

a 的标题`ListView`将始终与`ListView`. 您可以做的最简单的事情是创建一个布局，例如，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:gravity="center"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="0dip"
        android:layout_weight="1"
        android:orientation="vertical" >

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="@drawable/phone_thing_comment_bg"
            android:gravity="center"
            android:paddingBottom="5dp"
            android:paddingLeft="9dp"
            android:paddingRight="9dp"
            android:paddingTop="5dp" >

            <EditText
                android:id="@+id/editFilterList"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_margin="4dp"
                android:background="@drawable/phone_thing_comment_box"
                android:drawableLeft="@drawable/filter_search_icon"
                android:drawablePadding="5dp"
                android:hint="Type Friends Name"
                android:inputType="text"
                android:maxLines="1"
                android:textColor="#ff333333"
                android:textColorHint="#ff78797d"
                android:textCursorDrawable="@null" >
            </EditText>
        </LinearLayout>

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:orientation="vertical" >

            <ListView
                android:id="@+id/list"
                android:layout_width="fill_parent"
                android:layout_height="0dip"
                android:layout_weight="1"
                android:cacheColorHint="@android:color/transparent"
                android:divider="#000000"
                android:dividerHeight="0dp"
                android:fadingEdge="none"
                android:persistentDrawingCache="scrolling"
                android:scrollbars="none" >
            </ListView>

            <TextView
                android:id="@android:id/empty"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:gravity="center"
                android:padding="10dp"
                android:text="@string/no_friends"
                android:textColor="#f1f1f1"
                android:textSize="15sp"
                android:textStyle="bold"
                android:visibility="gone" >
            </TextView>
        </LinearLayout>
    </LinearLayout>

</LinearLayout> 
```

这样，在此示例中，`EditText`始终在顶部可见，并且仅在`ListView`滚动条上可见。

# hadoop - 恢复如何在 HBase 中工作

> ID：15470122
> 
> 赞同：0
> 
> 时间：2013-03-18T05:09:31.683
> 
> 标签：hadoop, hbase

我想实际观察 HBase 中的恢复是如何工作的，我使用了以下代码片段

```
 Put p=new Put(Bytes.toBytes("name10"));
    p.setWriteAheadLog(true);
    p.add(Bytes.toBytes("cf"), Bytes.toBytes("name"),Bytes.toBytes("Some Value 10"));
    table.setAutoFlush(true);
    table.put(p); 
```

执行上述代码后，我重新启动了我的 VM **（不停止 HBase）**并启动了 HBase，当我扫描此表时，Rowkey name10 没有出现。而当我正确**停止**HBase 实例并**重新启动 VM**时，它显示完美（因为 HBase 从 MemStore 将数据推送到 HBase 表中）。
虽然，我的 WAL 已启用，但它无法恢复。我的理解有什么错误吗？
WAL 文件将存储在哪里？我在本地文件系统上使用 HBase 而不是 HDFS ......我在哪里可以检查 WAL 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T06:33:15.133

试试这个：

将数据放入表中后。从 hbase shell 运行“flush tablename”。然后检查

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T10:23:34.840

WAL 文件存储在 .logs 文件夹（隐藏）中。在独立模式下，写入 WAL 需要时间，而在伪分布式模式下，它可以正常工作

# php - 获取css源（url）的加载时间

> ID：15470125
> 
> 赞同：3
> 
> 时间：2013-03-18T05:09:47.773
> 
> 标签：php

我想以毫秒为单位获取一个 url 的加载时间。它可以是 css、js 或 img url。例如像这样 - `http://images.apple.com/global/nav/styles/navigation.css`。

我想我需要为此使用 curl，这是我目前的方法：

```
$url1 = 'http://images.apple.com/global/nav/styles/navigation.css';
$curl1 = curl_init();       
curl_setopt($curl1, CURLOPT_URL, $url1); 
curl_setopt($curl1, CURLOPT_RETURNTRANSFER, TRUE); 
curl_exec($curl1); 
$contime1 = curl_getinfo($curl1, CURLINFO_TOTAL_TIME); 
```

我从这种方法获得的值太大（我将它与来自 pingdom 的值进行比较）。有人可以建议我使用适当的 curl 函数，或者另一种计算方式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T05:20:21.497

使用`microtime()`功能

[microtime()](http://php.net/manual/en/function.microtime.php)手册

**对于前。**

```
<?php
    $time = microtime(true);
    file('http://images.apple.com/global/nav/styles/navigation.css');
    echo "Time : ".(microtime(true) - $time)." Seconds";
?> 
```

**输出**

```
Time : 0.31984090805054 Seconds 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T05:22:30.227

```
$time = microtime(true); // Gets microseconds
file('http://images.apple.com/global/nav/styles/navigation.css');
echo "Time Elapsed: ".(microtime(true) - $time)."s"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T05:22:49.673

**使用微时间和文件获取内容**

```
<?php

$url = 'http://images.apple.com/global/nav/styles/navigation.css';
$total_time = get_load_time($url) . '';
echo 'Data retrieved in ' . $total_time . ' seconds.';

function get_load_time($url) {
  $time1 = explode(' ', microtime());
  $start = $time1[1] + $time1[0];
  @file_get_contents($url);
  $time2 = explode(' ', microtime());
  $finish = $time2[1] + $time2[0];
  return round(($finish - $start), 4);
}

?> 
```

// 样本输出

```
Data retrieved in 1.7756 seconds. 
```

# ruby-on-rails - Rails 模态表单 - 无法在模态中显示验证错误

> ID：15470126
> 
> 赞同：2
> 
> 时间：2013-03-18T05:09:51.610
> 
> 标签：ruby-on-rails, validation, modal-dialog

**编辑：**我忘了提到我在模型级别使用验证，而且效果很好。因此，验证阻止了模式表单被提交（并且 ajax:error 被调用），但我没有运气处理生成的错误对象并正确显示错误。现在我只使用占位符文本（“FORM HAS ERRORS”）。同样，验证和显示错误在我的非模态（非 ajax）表单（我使用部分错误消息）中工作正常。我真的希望我可以在我的模态对话框中渲染那个部分，你会认为这很简单。

我正在为此拔头发。

我有一个“添加游览”表单，在该表单中，您可以从数据库中选择建筑物以添加到游览中（我正在使用 jquery tokeninput 来搜索和选择建筑物）。所有这些都很好。

我通过提供“添加建筑物”链接为用户添加了添加新建筑物的功能，该链接会显示一个模式表单。我处理了结果，一切都很好（建筑被保存，模态被解雇，令牌被添加等等）。

除了以模态形式进行验证外，一切都很好。. . 这根本不起作用。我尝试过 client_side_validations，我尝试过编写咖啡脚本来遍历控制器返回的错误对象等。

无论如何，我已经尝试了我所知道的一切尝试，所以现在我要向你们寻求帮助。现在我只是在咖啡脚本文件中有占位符错误处理代码（它只是以非常基本的方式显示“FORM HAS ERRORS”）。我放弃了之前的所有尝试来制作这项工作，因为它变得越来越丑陋，我真的只是在寻找最好的方法来做到这一点。

以下是相关文件。

building.js.coffee

```
$ ()->
  $("form.new_building").on "ajax:success", (event, data, status, xhr) ->
    $("form.new_building")[0].reset()
    $('#new-building-modal').modal('hide')
    fulladdress = "#{data.address} (#{data.name}, #{data.city}, #{data.zip})"
    $('#tour_building_tokens').tokenInput("add", {id: data.id, address: fulladdress} )

  $("form.new_building").on "ajax:error", (event, xhr, status, error) ->
    $('#display_errors').append('<font color="red"><strong>FORM HAS ERRORS</strong></font><br><br>')
    $('#display_errors').show() 
```

建筑物控制器.rb

```
....

def create
    @building = Building.new(params[:building])

    respond_to do |format|
      if @building.save
        format.html { redirect_to @building, notice: 'Building Created!' }
        format.json { render json: @building, status: :created, location: @building }
      else
        format.html { render 'new' }
        format.json { render json: @building.errors, status: :unprocessable_entity }
      end
    end
end 
```

新的.html.erb

```
<% provide(:title, 'Add Tour') %>

<h1>Add Tour</h1>

<div class="row">
    <div class="span6 offset3">
        <%= form_for(@tour) do |f| %>

            <%= render 'fields', f: f %>

            <%= link_to 'Add Building', '#new-building-modal', 'data-toggle' => "modal" %>

            </br>
            </br>

            <%= f.submit "Add Tour", class: "btn btn-large btn-primary" %>
        <% end %>
    </div>
</div>

<div id='new-building-modal' class='modal hide fade'>

            <div class = "modal-body">

                <%= form_for(Building.new, remote:true, html: {"data-type" => :json}) do |f| %>

                    <div id="display_errors" style="display:none;">
                    </div>

                    <%= f.label :name %>
                    <%= f.text_field :name %>

                    <%= f.label :address %>
                    <%= f.text_field :address %>

                    <%= f.label :city %>
                    <%= f.text_field :city %>

                    <%= f.label :zip %>
                    <%= f.text_field :zip %>

            </div>

            <div class = "modal-footer">

                    <%= f.submit "Add Building", class: "btn btn-large btn-primary" %>
            </div>

                <% end %>
</div> 
```

哦，我还有一个共享的错误消息部分，我现在没有使用这个模态（因为我无法让模态“刷新”以显示错误）。在一个完美的世界中，我会在模态中使用相同的部分，因为它与我的其他非模态形式配合得很好。

这是部分（同样，当前在上面的代码中没有呈现它）。

```
<% if object.errors.any? %>
<div id="error_explanation">
    <div class="alert alert-error">
        The form contains <%= pluralize(object.errors.count, "error") %>.
    </div>
    <ul>
        <% object.errors.full_messages.each do |msg| %>
            <% if msg != "Password digest can't be blank" %>
                <li>* <%= msg %></li>
            <% end %>
        <% end %>
    </ul>
</div> 
```

提前感谢任何人都可以提供的任何帮助。我需要尽可能多的细节。我在 Stack Overflow 上研究过相关问题，每次我认为我很接近时，我都会空手而归。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T03:48:37.613

感谢[muttonlamb](https://stackoverflow.com/users/1849245/muttonlamb)为我指明了正确的方向。我有 50% 的把握肯定它必须通过解析 JSON 来做点什么，他说服我继续走这条路。具有讽刺意味的是，正是[这个 SO 问题](https://stackoverflow.com/questions/5323620/rails-3-unobtrusive-javascript-handle-json-response)帮助我得到了最终答案。这个问题的答案，包括将错误打印到控制台，正是我想要的。事实证明，我解析错误并没有太多。. . 我正在解析错误的对象。这是最终的有效实现。. .

新的咖啡脚本（注意我如何根据需要显示、隐藏和清除 div）：

```
$ ()->
  $("form.new_building").on "ajax:success", (event, data, status, xhr) ->
    $("form.new_building")[0].reset()
    $('#new-building-modal').modal('hide')
    fulladdress = "#{data.address} (#{data.name}, #{data.city}, #{data.zip})"
    $('#tour_building_tokens').tokenInput("add", {id: data.id, address: fulladdress} )
    $('#error_explanation').hide()

  $("form.new_building").on "ajax:error", (event, xhr, status, error) ->
    errors = jQuery.parseJSON(xhr.responseText)
    errorcount = errors.length
    $('#error_explanation').empty()
    if errorcount > 1
      $('#error_explanation').append('<div class="alert alert-error">The form contains ' + errorcount + ' errors.</div>')
    else
      $('#error_explanation').append('<div class="alert alert-error">The form contains 1 error</div>')
    $('#error_explanation').append('<ul>')
    for e in errors
      $('#error_explanation').append('<li>' + e + '</li>')
    $('#error_explanation').append('</ul>')
    $('#error_explanation').show() 
```

新观点：

```
<% provide(:title, 'Add Tour') %>

<h1>Add Tour</h1>

<div class="row">
    <div class="span6 offset3">
        <%= form_for(@tour) do |f| %>

            <%= render 'fields', f: f %>

            <%= link_to 'New Building', '#new-building-modal', 'data-toggle' => "modal" %>

            </br>
            </br>

            <%= f.submit "Add Tour", class: "btn btn-large btn-primary" %>
        <% end %>
    </div>
</div>

<div id='new-building-modal' class='modal hide fade'>

            <div class = "modal-header">
                <div id="error_explanation" style="display:none;">
                </div>
            </div>

            <div class = "modal-body">

                <%= form_for(Building.new, remote:true, html: {"data-type" => :json}) do |f| %>

                    <%= f.label :name %>
                    <%= f.text_field :name %>

                    <%= f.label :address %>
                    <%= f.text_field :address %>

                    <%= f.label :city %>
                    <%= f.text_field :city %>

                    <%= f.label :zip %>
                    <%= f.text_field :zip %>

            </div>

            <div class = "modal-footer">

                    <%= f.submit "Add Building", class: "btn btn-large btn-primary" %>
            </div>

                <% end %>
</div> 
```

新控制器：

```
def create
     @building = Building.new(params[:building])

    respond_to do |format|
      if @building.save
        format.html { redirect_to @building, notice: 'Building Created!' }
        format.json { render json: @building, status: :created, location: @building }
      else
        format.html { render 'new' }
        format.json { render json: @building.errors.full_messages, status: :unprocessable_entity }
        end
    end
  end 
```

最后，为了在添加错误时防止模式滚动（我希望它自动调整大小），我添加了这个 CSS：

```
#new-building-modal {
    max-height: 600px;
} 
```

希望所有这些细节可以防止其他人不得不在愚蠢的模态验证错误上浪费近一周的时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T05:49:13.770

该问题看起来像您的 ajax 请求错误部分没有运行。

原因是这样，您要查找的错误可能类似于“找不到页面”或其他一些 HTTP 错误。

在您的控制器中，HTTP 请求仍然会成功，即它仍然会返回数据。

您处理是否存在错误的逻辑应该在 ajax 成功块中。

希望这是有道理的

```
$ ()->
  $("form.new_building").on "ajax:success", (event, data, status, xhr) ->
    $("form.new_building")[0].reset()
    $('#new-building-modal').modal('hide')
    fulladdress = "#{data.address} (#{data.name}, #{data.city}, #{data.zip})"
    $('#tour_building_tokens').tokenInput("add", {id: data.id, address: fulladdress} ) 
```

您需要检查本节中的错误变量。

# javascript - 如何动态调整 Jquery 的大小

> ID：15470128
> 
> 赞同：2
> 
> 时间：2013-03-18T05:09:54.697
> 
> 标签：javascript, jquery, html, css

我们如何动态调整 Jquery 的大小？

```
<div id="siteOptWrap">

</div>

   $('#siteOptsWrap').resizable({
        distance: 10,
        handles: "n",
        ghost: true,
        animate: true,
        maxHeight: '600',
        //animateDuration: "fast",
    }); 
```

--这是我试图调整大小的地方

```
 $('#siteOptsWrap').resizable().resize({ 'height': '25px' }); 
```

我真的很想能够减轻调整大小。我在做什么我有一个菜单，我想在大约 30% 的屏幕上显示，并且在窗口加载后大约 5 秒我想简化菜单。

--这是一个显示页面最底部菜单的图像，它是一个标签 jquery 控件，它包含在可调整大小的 jquery 中。

我需要在大约 5 秒后放松底部菜单，以便用户不必这样做即可开始工作。

![在图像底部使用缓动调整大小的菜单](../Images/9f4440c1429640dd0e2028442ad8f32d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T05:13:32.977

如果要更改元素的高度，则需要使用[.css()](http://api.jquery.com/css/)，而不是用于添加事件处理程序的[.resize 。](http://api.jquery.com/resize/)`resize`

```
$('#siteOptsWrap').resizable().css({ 'height': '25px' }); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/jH8N2/)

# android - Android：如何使对话框在模拟器/真手机上看起来一样

> ID：15470133
> 
> 赞同：0
> 
> 时间：2013-03-18T05:10:30.660
> 
> 标签：android, background, dialog

在我的 T-mobile MOVE 上，对话框有黑色背景和黑色文本 - 不好。

在模拟器上，所有对话框都有白色背景和黑色文本。

如何解决这个问题？为什么会这样？我应该为对话框明确设置背景吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T09:25:10.577

正如 Royston 所说，您必须制作自定义对话框。要删除黑角，请使用以下行 super(context, android.R.style.Theme_Translucent_NoTitleBar);

而不是制作自定义样式。自定义对话框的一个简单示例如下

```
public class customDialog extends Dialog implements android.view.View.OnClickListener{

Context context = null;
    public customDialog(Context context, String etc ) {
        super(context, android.R.style.Theme_Translucent_NoTitleBar);
        this.context = context;
        setBasicContents();
    }

    private void setBasicContents() {
        this.setContentView(R.layout.custom_dialog);
        this.findViewById(R.id.btn_ok).setOnClickListener(this);
        this.findViewById(R.id.btn_cancel).setOnClickListener(this);
        ((RelativeLayout)this.findViewById(R.id.img_bg_tranperant)).
        setBackgroundColor(Color.argb(166, 0, 0, 0));
    }

        @Override
        public void onClick(View v) {
            switch (v.getId()) {
                case R.id.btn_ok:
                    anythingyouwant();
                    break;
                case R.id.btn_cancel:
                    this.dismiss();
                    break;

                default:
                    break;
                }
      }
} 
```

一条线

```
 ((RelativeLayout)this.findViewById(R.id.parent_layout)).
            setBackgroundColor(Color.argb(166, 0, 0, 0)); 
```

很重要。它采用对话框 xml 的父布局并将其背景设置为小透明。因此，当用户看到对话框时，后屏幕会变暗。除了这个布局之外，对话框 xml 将包含两个按钮和一个 textView 来显示消息。您可以根据您的要求自定义此自定义类和 xml。

谢谢，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T05:42:20.883

基本上，如果您`Dialog`在 Android 中使用默认设置，那么由于每个供应商都为其对话框设置了颜色和背景，因此它们看起来会有所不同。例如，三星对话框与默认的 Nexus 设备对话框完全不同。

对你来说最好的选择是定义你自己的颜色和主题，让对话框在所有设备上看起来都一样。否则，为供应商希望显示的新外观对话框做好准备。

# ios - UIImageView 与 UIScrollView 的 viewForZoomingInScrollView 同步缩放：

> ID：15470135
> 
> 赞同：0
> 
> 时间：2013-03-18T05:10:40.470
> 
> 标签：ios, uiscrollview, uiimageview, scroll, sync

我正在开发某种自定义地图，它将在地图内容上方显示附加信息（我将其称为叠加）。但是叠加渲染非常困难，所以我只渲染用户此时可以在屏幕上看到的部分。但是当用户缩放或平移地图时，我也想要叠加缩放和平移（当然，无需重新渲染，因为它需要时间来完成）。所以我的叠加层是`UIView`子`UIImageView`视图。在用户平移期间，我查找`contentOffset`更改（地图内容显示在 上`UIScrollView`）并将我的移动`imageView`到该偏移量（更改`origin`它的`frame`），所以这非常快。当用户从屏幕上分离手指时，我将初始设置`frame`为`imageView`并重新渲染它。我怎样才能用缩放做类似的事情？我尝试监视`zoomScale`更改`contentOffset`，但是`imageView`移动不像地图内容。任何建议如何做都会对我有用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T08:10:52.533

我通过问题解决了我的问题。我没有计算偏移量和缩放比例，而是将叠加层添加到地图内容中作为子视图，因此它可以很好地移动和缩放。当用户从地图上分离手指时，我将其从超级视图中删除并重新渲染

# php - 获取特定的 imap 文件夹名称 PHP

> ID：15470140
> 
> 赞同：1
> 
> 时间：2013-03-18T05:11:33.413
> 
> 标签：php, email, imap

我需要获取 imap 文件夹名称，通常我会这样做

```
<?php
$mbox = imap_open(SERVER,USERNAME,PASSWORD)
      or die("can't connect: " . imap_last_error());

$list = imap_getmailboxes($mbox, SERVER, "*");
if (is_array($list)) {
    foreach ($list as $key => $val) {
        echo "($key) ";
        echo imap_utf7_decode($val->name) . ",";
        echo "'" . $val->delimiter . "',";
        echo $val->attributes . "<br />\n";
    }
} else {
    echo "imap_getmailboxes failed: " . imap_last_error() . "\n";
}

imap_close($mbox);
?> 
```

它会给我们一个邮箱名称数组，但我需要得到的是特定的邮箱名称。

例如：对于电子邮件发送的项目，一些服务器给了我`Sent Items`和其他一些`Sent`。所以它取决于服务器。

我的要求是我需要搜索`Inbox`and `Sent Items`。

实现这一目标的最可取的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T05:58:32.227

这是一个非常棘手的问题。文件夹名称完全是`dependent on servers implementation`. 不同的邮件程序有不同的文件夹名称模式。如果您打算将此代码用于通用目的，那么就`no solution`可以了。无法通过名称识别文件夹类型。

即使对于特定的邮件，由于以下原因，也很难识别已发送邮件文件夹：

> 如果您计划进行正则表达式或模式匹配，那么用户可以自由创建一个用户文件夹，其名称如下：Sent Ansh 或 SentMailAnsh 或 AnshSentMail
> 
> 其次，IMAP 的 Outlook（我想是 2010 年）等客户端使您可以灵活地将已发送邮件邮件存储在特定文件夹中，因此即使系统有一个名为“已发送邮件”的文件夹，用户可能更愿意将这些邮件存储在一个名为“ AnshSend"

所以我建议你根据你的要求分析情况。

# c#-4.0 - 账单过滤仅返回默认的 10 条排序记录，而不从 QBO 进行任何过滤

> ID：15470150
> 
> 赞同：0
> 
> 时间：2013-03-18T05:13:15.657
> 
> 标签：c#-4.0, intuit-partner-platform, quickbooks-online, intuit

请找到以下用于过滤账单的代码，即使我通过了 resultperpage>10，它也只返回 10 条排序记录。

```
public IEnumerable<Intuit.Ipp.Data.Qbo.Bill> FilterBills(DataServices dataServices, int startPage, int resultsPerPage, DateTime After, DateTime Before)
    {
Intuit.Ipp.Security.OAuthRequestValidator oAuthRequestValidator = ((Intuit.Ipp.Security.OAuthRequestValidator)dataServices.ServiceContext.RequestValidator);

            OAuthConsumerContext consumerContext = new OAuthConsumerContext
            {
                ConsumerKey = oAuthRequestValidator.ConsumerKey,
                SignatureMethod = SignatureMethod.HmacSha1,
                ConsumerSecret = oAuthRequestValidator.ConsumerSecret
            };

            OAuthSession oSession = new OAuthSession(consumerContext, "https://oauth.intuit.com/oauth/v1/get_request_token",
                        "https://workplace.intuit.com/Connect/Begin",
                        "https://oauth.intuit.com/oauth/v1/get_access_token");

            oSession.AccessToken = new TokenBase
            {
                Token = oAuthRequestValidator.AccessToken,
                ConsumerKey = oAuthRequestValidator.ConsumerKey,
                TokenSecret = oAuthRequestValidator.AccessTokenSecret
            };

            var body = "PageNum={0}&ResultsPerPage={1}&Filter=LastUpdatedTime :AFTER: {2} :AND: LastUpdatedTime :BEFORE: {3} & Sort=LastUpdatedTime HighToLow";
            body = String.Format(body, startPage, resultsPerPage, After.ToString("yyyy-mm-ddTHH:MM:ssz"), Before.ToString("yyyy-mm-ddTHH:MM:ssz"));

            IConsumerRequest conReq = oSession.Request();
            conReq = conReq.Post().WithRawContentType("application/x-www-form-urlencoded").WithRawContent(System.Text.Encoding.ASCII.GetBytes(body)); ;
            conReq = conReq.ForUrl(dataServices.ServiceContext.BaseUrl + "bills/v2/" + dataServices.ServiceContext.RealmId);
            conReq = conReq.SignWithToken();

            Intuit.Ipp.Data.Qbo.SearchResults searchResults = (Intuit.Ipp.Data.Qbo.SearchResults)dataServices.ServiceContext.Serializer.Deserialize<Intuit.Ipp.Data.Qbo.SearchResults>(conReq.ReadBody());
            IEnumerable<Intuit.Ipp.Data.Qbo.Bill> SearchResult = ((Intuit.Ipp.Data.Qbo.Bills)(searchResults.CdmCollections)).Bill;
            return SearchResult;
 } 
```

发送请求后，我将响应作为 10 个已排序的账单记录而没有出现任何错误。我正在使用 IPDotNetDevKit 2.1.12.0 版本。

请查看此过滤问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T20:06:33.133

在上面的示例中，OAuth 参数在请求正文中传递并覆盖您的请求正文，因此它默认为 PageNum=1&ResultsPerPage=20。此外，日期格式不正确。这是一个可以工作的代码示例。

```
public IEnumerable<Intuit.Ipp.Data.Qbo.Bill> FilterBills(DataServices dataServices, int startPage, int resultsPerPage, DateTime After, DateTime Before)
{
    StringBuilder requestXML = new StringBuilder();
    StringBuilder responseXML = new StringBuilder();

    var requestBody =
        "PageNum={0}&ResultsPerPage={1}&Filter=LastUpdatedTime :AFTER: {2} :AND: LastUpdatedTime :BEFORE: {3}&Sort=LastUpdatedTime HighToLow";
    requestBody = String.Format(requestBody, startPage, resultsPerPage, After.ToString("yyyy-MM-ddThh:mm:sszzz"),
                            Before.ToString("yyyy-MM-ddThh:mm:sszzz"));

    HttpWebRequest httpWebRequest =
        WebRequest.Create(dataServices.ServiceContext.BaseUrl + "bills/v2/" +
                            dataServices.ServiceContext.RealmId) as HttpWebRequest;
    httpWebRequest.Method = "POST";
    httpWebRequest.ContentType = "application/x-www-form-urlencoded";
    httpWebRequest.Headers.Add("Authorization", GetDevDefinedOAuthHeader(httpWebRequest, requestBody));
    requestXML.Append(requestBody);
    UTF8Encoding encoding = new UTF8Encoding();
    byte[] content = encoding.GetBytes(requestXML.ToString());
    using (var stream = httpWebRequest.GetRequestStream())
    {
        stream.Write(content, 0, content.Length);
    }
    HttpWebResponse httpWebResponse = httpWebRequest.GetResponse() as HttpWebResponse;
    using (Stream data = httpWebResponse.GetResponseStream())
    {
        Intuit.Ipp.Data.Qbo.SearchResults searchResults =
            (Intuit.Ipp.Data.Qbo.SearchResults)
            dataServices.ServiceContext.Serializer.Deserialize<Intuit.Ipp.Data.Qbo.SearchResults>(
                new StreamReader(data).ReadToEnd());
        return ((Intuit.Ipp.Data.Qbo.Bills) searchResults.CdmCollections).Bill.ToList();
    }
}

private string GetDevDefinedOAuthHeader(HttpWebRequest webRequest, string requestBody)
{

    OAuthConsumerContext consumerContext = new OAuthConsumerContext
    {
        ConsumerKey = consumerKey,
        ConsumerSecret = consumerSecret,
        SignatureMethod = SignatureMethod.HmacSha1,
        UseHeaderForOAuthParameters = true

    };

    consumerContext.UseHeaderForOAuthParameters = true;

    OAuthSession oSession = new OAuthSession(consumerContext, "https://www.example.com",
                            "https://www.example.com",
                            "https://www.example.com");

    oSession.AccessToken = new TokenBase
    {
        Token = accessToken,
        ConsumerKey = consumerKey,
        TokenSecret = accessTokenSecret
    };

    IConsumerRequest consumerRequest = oSession.Request();
    consumerRequest = ConsumerRequestExtensions.ForMethod(consumerRequest, webRequest.Method);
    consumerRequest = ConsumerRequestExtensions.ForUri(consumerRequest, webRequest.RequestUri);
    if (webRequest.Headers.Count > 0)
    {
        ConsumerRequestExtensions.AlterContext(consumerRequest, context => context.Headers = webRequest.Headers);
        if (webRequest.Headers[HttpRequestHeader.ContentType] == "application/x-www-form-urlencoded")
        {
            Dictionary<string, string> formParameters = new Dictionary<string, string>();
            foreach (string formParameter in requestBody.Split('&'))
            {
                formParameters.Add(formParameter.Split('=')[0], formParameter.Split('=')[1]);
            }
            consumerRequest = consumerRequest.WithFormParameters(formParameters);
        }
    }

    consumerRequest = consumerRequest.SignWithToken();
    return consumerRequest.Context.GenerateOAuthParametersForHeader();
} 
```

# ibm-sbt - 使用 oAuth 将数据上传到 ibm 连接

> ID：15470152
> 
> 赞同：0
> 
> 时间：2013-03-18T05:13:25.870
> 
> 标签：ibm-sbt

我们希望社交名流（Web 应用程序名称）用户数据按用户活动流上传到 IBM-Connections。它需要适当的 OAuth 机制。为了实现这一点，我们正在开发 OAuth，以便为每个 IBM Connections 用户明智地获取 OAuth 令牌和 OAuth Secrete。

我们借助 IBM 文档中提到的命令创建了 AppID、Appkey 和 AppSecrete。 [http://www-10.lotus.com/ldd/lcwiki.nsf/xpDocViewer.xsp?lookupName=IBM+Connections+4.0+documentation#action=openDocument&res_title=Registering_an_OAuth_client_with_a_provider_ic40&content=pdcontent](http://www-10.lotus.com/ldd/lcwiki.nsf/xpDocViewer.xsp?lookupName=IBM+Connections+4.0+documentation#action=openDocument&res_title=Registering_an_OAuth_client_with_a_provider_ic40&content=pdcontent)

现在我们需要 requestTokenURL、authorizationURL、accessTokenURL 来获取每个 IBM Connection 用户的访问令牌和访问密钥。

请给我提意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T20:32:16.623

授权 URL 应为 https://:/oauth2/endpoint/connectionsProvider/authorize

访问令牌 URL 应为 https://:/oauth2/endpoint/connectionsProvider/token

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T06:05:41.143

oAuth2.0 不再有 requestToken。只有to token uri的

对于我们的测试连接环境，端点是 [https://connections4.e-office.com/oauth2/endpoint/connectionsProvider/authorize](https://connections4.e-office.com/oauth2/endpoint/connectionsProvider/authorize) [https://connections4.e-office.com/oauth2/endpoint/connectionsProvider/token](https://connections4.e-office.com/oauth2/endpoint/connectionsProvider/token)

您可以在这里找到更多详细信息，它是关于 smartcloud 但您可以找到一些很好的信息 [http://www-10.lotus.com/ldd/appdevwiki.nsf/xpViewTags.xsp?categoryFilter=OAuth%202.0](http://www-10.lotus.com/ldd/appdevwiki.nsf/xpViewTags.xsp?categoryFilter=OAuth%202.0)

# git - 为什么 repo sync 对于某些 repos 需要很长时间

> ID：15470154
> 
> 赞同：3
> 
> 时间：2013-03-18T05:13:36.313
> 
> 标签：git, repository

我正在使用以下命令来同步 repos

```
repo sync -j5 
```

但是同步一些 repos 或一些树需要很长时间。假设我正在同步树`A`，当我切换到树`B`并尝试`repo sync`在那里同步时，需要两倍以上的时间。
有人可以帮我理解为什么会这样并帮助我解决这个问题吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-31T10:45:28.950

尝试使用以下命令，这里 -c 可以减少时间

```
repo sync -c -j5 
```

这里`-c`用作清单中定义的当前分支。所以其他数据不会被获取

# c - Linux，使用Socket和读写功能，数据可以分片吗？

> ID：15470155
> 
> 赞同：2
> 
> 时间：2013-03-18T05:13:37.023
> 
> 标签：c, linux, sockets, network-programming, system-calls

在 Linux 中，

我正在使用客户端-服务器结构编写简单的聊天程序。它也包括文件传输功能。

我设计了客户端将文件数据传输到服务器时使用的格式。

（1 字节显示这是文件数据）（2 字节信息用于区分发送方、接收方）（1 字节表示当前发送数据的大小）（DATA.......）

以上信息将保存在`buf[]`( `char[]`)

当然，sender 使用 write 调用发送文件数据，receiver 使用 read 调用接收文件数据。

我想知道上述格式在使用套接字描述符读取、写入函数时是否会分片。

例如，发件人写`sbuf[] = "abcdefgh"`。`rbuf[] = "abcdefgh"`接收器总是读吗？或`rbuf[]`可能是`= "a"`或`"ab"`或或`"abc"`或`"abcd"`或......什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T04:46:30.800

是的，它可以，而且可能会。您应该考虑使用 recv 和 send 而不是 read 和 write。使用 recv 您可以设置选项 MSG_WAITALL，这将使读取块直到可以返回全部数据量。（对于 SOCK_STREAM）请查看 man recv/send 以获取更多信息。

# java - Achartengine getRange 方法问题

> ID：15470166
> 
> 赞同：0
> 
> 时间：2013-03-18T05:15:16.173
> 
> 标签：java, android, eclipse, graph, achartengine

我在使用 Achartengine 的 XYSeries getRange(double, double, int) 方法时遇到问题。

我是 Java 编程的新手，所以这个问题让我感到困惑。

我不确定如何使用它，因为我在尝试时总是出错！在它前面从 getRange 获取值的对象是什么？IE：

*这里的对象*.getRange(double, double, int);

我是否也将其设置为等于某个值？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T06:01:15.070

> 在它前面从 getRange 获取值的对象是什么？

```
 XYSeries.getRange(double start, double stop, int beforeAfterPoints); 
```

根据给定的开始和结束返回 x 和 y 值的子图

> 我是否也将其设置为等于某个值？

像这样使用它：

```
SortedMap<Double, Double> map = XYSeries.getRange(double start, double stop, int beforeAfterPoints); 
```

为 x 值获取 y

```
map.get(X_Value); 
```

链接：

[XY系列类](http://www.achartengine.org/content/javadoc/org/achartengine/model/XYSeries.html)

[查看子地图](http://www.java2s.com/Tutorial/Java/0140__Collections/ViewingSubMaps.htm)

希望这对您有所帮助。

# python - 使用 Python-Django 将 CSV 文件导入 PostgreSQL 数据库

> ID：15470167
> 
> 赞同：7
> 
> 时间：2013-03-18T05:15:19.560
> 
> 标签：python, django, postgresql, etl, pygrametl

**注意：**向下滚动到*背景*部分以获取有用的详细信息。假设项目使用 Python-Django 和 South，如下图所示。

**导入以下 CSV 的最佳方法是什么**

```
"john","doe","savings","personal"
"john","doe","savings","business"
"john","doe","checking","personal"
"john","doe","checking","business"
"jemma","donut","checking","personal" 
```

**进入具有相关表*Person*、*Account*和*AccountType*的 PostgreSQL 数据库，考虑：**

1.  管理员用户可以通过自定义 UI 实时更改数据库模型和 CSV 导入表示
2.  普通用户导入 CSV 文件时使用保存的 CSV 到数据库的表/字段映射

**到目前为止，已经考虑了两种方法**

1.  *ETL-API 方法*：为 ETL API 提供电子表格、我的 CSV 到数据库的表/字段映射以及到目标数据库的连接信息。然后 API 将加载电子表格并填充目标数据库表。看着 pygrametl 我不认为我的目标是可能的。事实上，我不确定是否有任何 ETL API 可以做到这一点。
2.  *行级插入方法*：解析 CSV 到数据库的表/字段映射，解析电子表格，并以“连接顺序”生成 SQL 插入。

**我实现了第二种方法，但在算法缺陷和代码复杂性方面苦苦挣扎。那里有没有我想要的python ETL API？还是一种不涉及重新发明轮子的方法？**

* * *

**背景**

我工作的公司正在寻求将托管在共享点中的数百个特定于项目的设计电子表格移动到数据库中。通过允许管理员为每个项目定义/建模数据库、在其中存储电子表格并定义浏览体验，我们即将完成满足需求的 Web 应用程序。在这个完成阶段，过渡到商业工具不是一种选择。将 Web 应用程序视为 django-admin 的替代方案，尽管它不是，它具有 DB 建模 UI、CSV 导入/导出功能、可定制的浏览和模块化代码来解决项目特定的定制问题。

实现的 CSV 导入界面既麻烦又麻烦，所以我试图获得反馈并找到替代方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T16:17:06.227

如何将问题分成两个独立的问题？

在数据库中创建一个`Person`代表一个人的类。这可以使用 Django 的 ORM，或者扩展它，或者你可以自己做。

现在你有两个问题：

1.  从 CSV 中的一行创建一个`Person`实例。
2.  `Person`将实例保存到数据库。

现在，不仅仅是 CSV-to-Database，您还拥有 CSV-to-Person 和 Person-to-Database。我认为这在概念上更清洁。当管理员更改架构时，会更改人员到数据库端。当管理员更改 CSV 格式时，他们正在更改 CSV-to-Database 端。现在你可以分别处理每一个。

这有帮助吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T17:53:02.403

我几乎每个月都在工作中编写导入子系统，并且当我执行此类任务时，我之前写过很多 django-data-importer。这个导入器像 django 表单一样工作，并且具有 CSV、XLS 和 XLSX 文件的阅读器，可为您提供字典列表。

使用 data_importer 阅读器，您可以将文件读取到 dicts 列表中，并使用 for 和 save 行进行数据库迭代。使用导入器，您可以做同样的事情，但可以验证行的每个字段，记录错误和操作，并在最后保存。

请看一下[https://github.com/chronossc/django-data-importer](https://github.com/chronossc/django-data-importer)。我很确定它会解决您的问题，并从现在开始帮助您处理任何类型的 csv 文件:)

为了解决您的问题，我建议将数据导入器与 celery 任务一起使用。您可以通过一个简单的界面上传文件并触发导入任务。Celery 任务会将文件发送到导入器，您可以验证行，保存它，为它记录错误。通过一些努力，您甚至可以为上传工作表的用户展示任务进度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T04:58:12.487

我最终后退几步，使用可更新的 SQL 视图解决了奥卡姆剃刀的这个问题。这意味着一些牺牲：

1.  移除：South.DB 依赖的实时模式管理 API、动态模型加载和动态 ORM 同步
2.  手动定义 models.py 和初始南迁移。

这允许一种将平面数据集 (CSV/Excel) 导入规范化数据库的简单方法：

1.  在 models.py 中为每个电子表格定义非托管模型
2.  在遵循电子表格字段布局的初始南迁移中将这些映射到可更新的 SQL 视图（INSERT/UPDATE-INSTEAD SQL RULE）
3.  遍历 CSV/Excel 电子表格行并执行`INSERT INTO <VIEW> (<COLUMNS>) VALUES (<CSV-ROW-FIELDS>);`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-31T01:11:27.317

这是我在 github 上找到的另一种方法。基本上它会检测架构并允许覆盖。它的整个目标是只生成要由 psql 和/或任何驱动程序执行的原始 sql。

[https://github.com/nmccready/csv2psql](https://github.com/nmccready/csv2psql)

```
 % python setup.py install
  % csv2psql --schema=public --key=student_id,class_id example/enrolled.csv > enrolled.sql
  % psql -f enrolled.sql 
```

还有很多选项可以进行更改（从许多现有的列创建主键）和合并/转储。

# iphone - 无法从另一个应用程序中启动 Google 地图应用程序

> ID：15470169
> 
> 赞同：0
> 
> 时间：2013-03-18T05:15:26.310
> 
> 标签：iphone, ios, google-maps, mkmapview

我正在尝试从 iOS 应用程序中打开 Google 地图应用程序。

我正在使用这段代码：

```
[[UIApplication sharedApplication] canOpenURL: [NSURL URLWithString:@"comgooglemaps://?center=40.765819,-73.975866&zoom=14&views=traffic"]]; 
```

但它不工作。谁能告诉我是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T05:20:32.723

首先`canOpenURL`不会打开应用程序。它只是检查应用程序是否可以打开应用程序。改用`openURL`方法。

```
if([[UIApplication sharedApplication] canOpenURL: [NSURL URLWithString:@"comgooglemaps://?center=40.765819,-73.975866&zoom=14&views=traffic"]])
{
  [[UIApplication sharedApplication] openURL: [NSURL URLWithString:@"comgooglemaps://?center=40.765819,-73.975866&zoom=14&views=traffic"]];
} 
```

**笔记：**

用于使用 URL Scheme 打开第三方应用程序。它应该安装在设备上。

> **可以打开网址：**
> 
> 返回应用程序是否可以打开给定的 URL 资源。
> 
> `- (BOOL)canOpenURL:(NSURL *)url`
> 
> *参数*
> 
> **网址**
> 
> ```
> A URL object that identifies a given resource. The URL’s scheme—possibly a custom scheme—identifies which application can 
> ```
> 
> 处理网址。
> 
> **返回值**
> 
> 如果没有可以接受 URL 的应用程序可用，则为 NO；否则，返回 YES。
> 
> *讨论*
> 
> 该方法保证如果调用 openURL: 会启动另一个应用程序来处理它。它不保证完整的 URL 是有效的。

* * *

> **打开网址**：
> 
> 打开指定 URL 处的资源。
> 
> `- (BOOL)openURL:(NSURL *)url`
> 
> *参数*
> 
> **网址**
> 
> ```
> An object representing a URL (Universal Resource Locator). UIKit supports the http:, https:, tel:, and mailto: schemes. 
> ```
> 
> **返回值**
> 
> 如果成功打开该 URL 定位的资源，则为 YES；否则否。
> 
> *讨论*
> 
> URL 可以定位同一应用程序或其他应用程序中的资源。如果资源是另一个应用程序，调用此方法可能会导致调用应用程序退出，以便启动另一个应用程序。
> 
> 您可以调用 canOpenURL: 在调用此之前验证是否有应用程序可以处理它。

请参考[UIApplication 类](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIApplication_Class/Reference/Reference.html)。

# hibernate - 以编程方式获取缓存名称

> ID：15470172
> 
> 赞同：2
> 
> 时间：2013-03-18T05:15:50.520
> 
> 标签：hibernate, ehcache

在我的应用程序中，我使用 ehcache 二级缓存。在该应用程序中，我在向 db 添加一些数据后删除了 ehcache。在这里我发送了我的 ehcache.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<ehcache xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:noNamespaceSchemaLocation="ehcache.xsd" updateCheck="false"
monitoring="autodetect" dynamicConfig="true">
<diskStore path="java.io.tmpdir"/>
<defaultCache
        maxElementsInMemory="100000"
        eternal="false"
        timeToIdleSeconds="10"
        timeToLiveSeconds="10"
        overflowToDisk="false" 
        memoryStoreEvictionPolicy="LFU"
        />
<cache 
name="com.model.Customer"
maxElementsInMemory="100000"
eternal="false"
timeToIdleSeconds="10"
timeToLiveSeconds="10"
overflowToDisk="false" 
memoryStoreEvictionPolicy="LFU"
/>
<cache
name="com.model.Friend"
maxElementsInMemory="100000"
eternal="false"
timeToIdleSeconds="10"
timeToLiveSeconds="10"
overflowToDisk="false" 
memoryStoreEvictionPolicy="LFU"
/>
</ehcache> 
```

现在我想使用此代码删除 cahche

```
CacheManager manager = CacheManager.getInstance();
Cache cache = manager.getCache();
cache.removeAll(); 
```

所以我需要缓存名称。那么如何获得我的缓存名称？请帮助我任何一个是的缓存配置正确。这是我插入数据的java代码

```
Transaction trns = null;
Session session = HibernateUtil.getFirstFactory().openSession();
try 
{
 Customer cus=new Customer();
 cus.setName(name);
 cus.setMobile(Long.parseLong(mno));
 trns = session.beginTransaction();
 Query query=  session.createQuery("from Customer where name=? or mobile=?");  
 query.setParameter(0, cus.getName());
 query.setParameter(1, cus.getMobile());
 cus=(Customer)query.uniqueResult();
 if(cus==null)
 {
  cus=new Customer(name,Long.parseLong(mno),f);
  session.save(cus);
  session.getTransaction().commit();
 } 
} 
catch (Exception e) 
{
 if(trns != null){
 trns.rollback();
}
e.printStackTrace();
} finally{
  CacheManager manager = CacheManager.getInstance();
  String[] names = manager.getCacheNames();
  System.out.println("length="+names.length);//here the output is length=0
  for (int i=0;i<names.length;i++)//so the control terminate the loop so the cache does   not remove anything
  {
System.out.println("name="+names[i]);
    Cache cache = manager.getCache(names[i]);
    cache.removeAll();
  }
  session.flush();
  session.close();
} 
```

这是我的客户班

```
 private Long cid;
private String name;
private Long mobile;
private Set<Friend> friends = new HashSet<Friend>(0);

public Customer(String name, Long mobile,Set<Friend> friends) {
    this.name = name;
    this.mobile = mobile;
    this.friends=friends;
}

public Customer() {}

public Long getCid() {
    return cid;
}
public void setCid(Long cid) {
    this.cid = cid;
}
public String getName() {
    return name;
}
public void setName(String name) {
    this.name = name;
}

public Long getMobile() {
    return mobile;
}

public void setMobile(Long mobile) {
    this.mobile = mobile;
}

public Set<Friend> getFriends() {
    return friends;
}

public void setFriends(Set<Friend> friends) {
    this.friends = friends;
} 
```

这是我的 Customer.hbm.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-mapping PUBLIC
"-//Hibernate/Hibernate Mapping DTD 3.0//EN"
 "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping>
<class name="com.model.Customer" table="customer">
<cache usage="read-write"/>

    <id column="cid" name="cid" type="java.lang.Long"  >
        <generator class="native"/>
    </id>
        <property name="name"  />
        <property name="mobile" index="msisdn"/>

    <!--  <set name="cards" table="t_customer_card" cascade="all">
        <key column="code" not-null="true"/>
        <many-to-many class="com.asta.model.Card" column="cid" unique="true" />
    </set>  -->
      <set name="friends" table="customer_friends" cascade="all" lazy="false">
        <key column="cid" not-null="true"/>
        <many-to-many class="com.model.Friend" column="fid" unique="true" />
    </set>      
</class>

 </hibernate-mapping> 
```

我不知道我错在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:43:03.780

缓存名称应与您在 xml 文件中声明的名称完全相同，例如：`com.model.Customer`.

您可以随时致电`CacheManager.getCacheNames()`获取完整列表。

# python - Python：list.extend 不改变原始变量

> ID：15470175
> 
> 赞同：21
> 
> 时间：2013-03-18T05:16:32.740
> 
> 标签：python, list, extend

我想知道 Python 中是否有一种方法可以使用`.extend`，但不更改原始列表。我希望结果看起来像这样：

```
>> li = [1, 2, 3, 4]  
>> li
[1, 2, 3, 4]  
>> li.extend([5, 6, 7])
[1, 2, 3, 4, 5, 6, 7]  
>> li
[1, 2, 3, 4] 
```

我试图用谷歌搜索这几种不同的方法，但我找不到正确的词来描述它。Ruby 有类似的东西，如果你真的想改变原始列表，你会做类似的事情：`li.extend!([5,6,7])`否则它只会给你结果而不改变原始列表。Python中是否存在同样的事情？

谢谢！

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-03-18T05:20:39.190

Python 中的`+`运算符被重载以连接列表，那么如何：

```
>>> li = [1, 2, 3, 4]
>>> new_list = li + [5, 6, 7]
>>> new_list
[1, 2, 3, 4, 5, 6, 7] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T05:23:27.010

我知道这很尴尬，但它有效：

```
a = [1,2,3]
b = list(a)
b.extend([4,5]) 
```

# android - 在android中解析json数据时有什么方法可以使用where子句

> ID：15470178
> 
> 赞同：0
> 
> 时间：2013-03-18T05:16:48.873
> 
> 标签：android, json

我正在开发**Android**应用程序，因为我需要解析**json**数据。我的json 格式是这样的：

```
[
 {
"product": {
  "id": "120",
  "name":"prod1name"
  "description":"prod1description"
  },
   "product": {
  "id": "121",
  "name":"prod2name"
  "description":"prod2description"
  }   
 }
] 
```

我的解析代码：

```
JSONArray array=new JSONArray(text);
for(int i=0;i<array.length();i++)
{                   
    JSONObject json = array.getJSONObject(i);
    myJson = json.getJSONObject("product");
    productname.add(myJson.getString("name"));
    productdesc.add(myJson.getString("description"));
} 
```

现在我的疑问是：**是否有任何获取数据为：获取产品名称，其中 id=120** 任何人请帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T05:44:46.220

像这样的东西......我还没有测试过，但它应该让你开始。

```
JSONArray array=new JSONArray(text);
Map<String, Map<String, String>> data = new Map<String, Map<String, String>>
for(int i=0;i<array.length();i++)
{                   
    JSONObject json = array.getJSONObject(i);
    myJson = json.getJSONObject("product");
    Map<String, String> product = new Map<String, String>
    product.put("name", myJson.getString("name"))
    product.put("description", myJson.getString("description"))
    data.put(myJson.getString("id"), product)
}
product_name = data.get("120").get("name") 
```

# tomcat - tomcat 7管理器应用程序访问被拒绝

> ID：15470179
> 
> 赞同：5
> 
> 时间：2013-03-18T05:16:49.883
> 
> 标签：tomcat, tomcat7

当我第一次进入管理器应用程序`http://localhost:8080/manager/html`时，有一个浏览器提示登录窗口，要求输入用户名和密码。输入错误的用户名和密码，页面返回403（拒绝访问）。

所以我google了一下，设置如下：

```
<role rolename="manager-gui" />
<user username="admin" password="tomcat" roles="manager-gui"/>
<!-- these 2 lines was there before my editing -->
<user password="tom" roles="manager-script,admin" username="tom"/>
<user password="tomcat" roles="manager-script,admin" username="tomcat"/> 
```

重启tomcat后，本次manager app直接显示403页面，无需输入用户名和密码。所以我有点困惑。此管理器应用程序使用哪种身份验证？以及如何登录管理器应用程序？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T02:18:51.820

这与浏览器及其保留活动登录的策略有关。对于 Firefox，您可以转到“工具”->“清除最近历史记录...”并清除“活动登录”。之后刷新您的经理应用程序将弹出您要求的提示。

干杯，β

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-09-14T22:12:51.057

默认情况下，Tomcat 7 使用

> LockOutRealm

：这意味着用户名在 5 次登录失败后被锁定。

## 解决方案

将另一个用户添加到 tomcat-users.xml。

```
<?xml version='1.0' encoding='cp1252'?>
<tomcat-users>
<role rolename="manager-gui"/>
<user username="admin" password="admin" roles="manager-gui"/>
</tomcat-users> 
```

我建议保持 XML 文件干净，就像上面的例子一样。希望能帮助到你。

# instagram - Instagram 用户名的字符数限制

> ID：15470180
> 
> 赞同：56
> 
> 时间：2013-03-18T05:16:50.503
> 
> 标签：instagram

有人知道 Instagram 用户名的字符数限制吗？谷歌未能向我返回任何答案。

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2013-06-13T12:50:16.733

限制 - 30 个符号。用户名只能包含字母、数字、句点和下划线。

# ios - 在另一个 UIView 之上添加具有自己的 UIViewController 的 UIView

> ID：15470181
> 
> 赞同：0
> 
> 时间：2013-03-18T05:17:13.810
> 
> 标签：ios, objective-c, uiview, uiviewcontroller

我想提出一个`UIView`在另一个之上`UIView`。我想以这样的方式做到这一点，以便子视图将拥有自己的`UIViewController`. 这可能吗？

所以我应该能够向子视图添加一个按钮：

```
UIButton *closeButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
...
[closeButton addTarget:self action:@selector(closeMe) forControlEvents:UIControlEventTouchUpInside]; 
```

`closeMe` 作为子视图的 ViewController 中的一个方法。

在我的测试代码中，当用户点击关闭按钮时，它会因未定义的选择器而崩溃，因为父视图的 ViewController 没有`closeMe`方法。

编辑：

对不起，我提到的`closeMe`方法只是作为一个例子。对于这个子视图，我还需要支持许多其他方法（例如处理视图旋转），而拥有自己的 ViewController 的子视图的目标是封装。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T05:31:58.143

--> 使用 UIView 子类的自定义视图制作您的 ChildView。
-->将此自定义视图添加为您的视图中的子视图
-->然后使用它`Protocol`来实现您的任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T05:41:11.130

它像你试图创建一个 modalView 一样受伤？

这是 modalViews 的直接示例：http: [//timneill.net/2010/09/modal-view-controller-example-part-1/](http://timneill.net/2010/09/modal-view-controller-example-part-1/)

我还喜欢做的是在 NSMutableArray 中弹出我的所有 viewController 并将其设为属性（非原子，保留），这样您就可以通过分层方式从应用程序中的几乎任何地方轻松访问它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T05:41:34.270

我认为您的子视图是自定义视图，然后您可以使用委托/协议。你不想要单独的视图控制器。

[检查这个](https://stackoverflow.com/questions/15361391/trigger-a-method-in-uiviewcontroller-from-its-view/15363649#15363649)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T06:57:11.260

视图控制器和视图具有并行层次结构。您可以将视图控制器添加为彼此的子级。您的父视图控制器可以加载其子视图控制器，然后将其子视图控制器的视图安装在它自己的视图中。

```
UIViewController  --→  UIView
       ↑                 ↑
       | parent vc       | superview
       |                 |
UIViewController  --→  UIView 
```

但是如果你只是添加一个子视图，你可能不需要子视图控制器。

# java - java是纯面向对象的吗？

> ID：15470184
> 
> 赞同：5
> 
> 时间：2013-03-18T05:17:24.150
> 
> 标签：java

我们说java不是纯粹面向对象的，因为原始数据类型不是对象。但是在下面的代码中，对象是如何保存原始数据类型的？

```
public class Test{

    public Object meth(Object obj){
        System.out.println(obj instanceof Object);//It prints true
        System.out.println("Value = "+obj);//It prints "Value = 1"
        return obj;
    }

    public static void main(String[] args) {
        int a = 1;
        System.out.println(new Test().meth(a));
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-18T05:20:48.720

它被称为[自动装箱](http://docs.oracle.com/javase/tutorial/java/data/autoboxing.html)。基本上，当您在要求它们是对象的上下文中使用原始数据类型时，Java 编译器会为您将它们转换为对象。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-18T05:23:37.887

由于 Java 中有 8 种基本类型，因此它不是纯粹的面向对象语言。但是原始类型使 Java 更高效。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-18T06:20:43.200

Java 是纯面向对象的，因为 Java 中的每件事都被视为对象。然而，Java 并不是纯粹的面向对象，因为它仍然支持违反 OOP 哲学的原始数据类型。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-18T05:21:28.590

因为原始类型被自动装箱（用java术语）到目标类型。例如，int 被包装在一个整数对象中。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-18T05:23:53.067

是的，你是对的...Java 不是纯面向对象的，因为它支持原始数据类型，例如 int、byte、long... 等，它们不是对象...

以上概念称为***自动装箱***。

> **自动装箱：**自动装箱是 Java 编译器在基本类型与其对应的对象包装类之间进行的自动转换

来源：[http ://docs.oracle.com/javase/tutorial/java/data/autoboxing.html](http://docs.oracle.com/javase/tutorial/java/data/autoboxing.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-04-17T13:04:57.037

因为如果使用原语 java 不是纯粹面向对象的。有关更多详细信息，请点击此[链接](http://vhariprasath.blogspot.in/2014/04/is-java-purely-object-oriented.html)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-09-30T09:44:43.300

ava 不是纯面向对象的，因为它支持原始数据类型，例如 int、byte、long 它的 True ，但是我们在 java 中有类似 Integer Character 类的类，隐式完成从原始到这些类的转换称为自动装箱。这也可以明确地完成。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-10-20T10:35:42.780

由于以下原因，Java 不是纯面向对象的语言。

1.  Java 支持原始数据类型。
2.  Java支持静态，这些属于类而不是对象。
3.  java支持枚举。

根据 OOP，一切都应该是一个对象。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-01-08T15:27:56.347

在您的上下文中，它被**称为自动装箱**，因为您只是将非原始值传递给 Object 参数，它会自动将其转换为对象类型。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-06-08T12:50:19.477

Java不是纯粹的面向对象的编程语言以满足编程语言是面向对象然后它满足oops概念封装/数据隐藏继承多态抽象所有预定义的类型都是对象所有操作都是通过向对象发送消息来执行的所有用户定义的类型都是对象。这些是东西。有人说java支持原始数据类型，如int，float，所以它不是面向对象的，但即使它基于Wrapper类INTGER，FLOAT东西java支持静态关键字它不遵循oops所以java不是纯面向对象的语言

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-09-19T16:46:37.793

不，这不是因为数据类型不是类，不像 c# 中的数据类型是类。是的，包装类稍后在 java 中引入，但是有自动装箱和装箱的概念，这使情况变得复杂。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-06-03T14:33:57.287

是的。Java 不是纯粹的面向对象的，因为它包含不是对象的原始数据类型。在您的情况下，您将 int 值传递给函数。它起作用的原因是**自动装箱**. 以下提供的链接可能有助于更好地理解自动装箱。 [点击这里](https://coderanch.com/t/417622/certification/Golden-Rules-widening-boxing-varargs)

# svn - svn checkout：未找到存储库

> ID：15470187
> 
> 赞同：6
> 
> 时间：2013-03-18T05:17:36.387
> 
> 标签：svn, repository, svn-checkout, svnserve

我注意到 SVN 运行良好，直到我重新启动我的机器（Mac OS X）。然后，当我这样做时`svn checkout svn://10.0.0.9/testA`，我得到了错误`svn: No repository found in 'svn://10.0.0.9/testA'`。

`svn info`产生以下内容：

```
Path: .
URL: svn://10.0.0.9/testA
Repository Root: svn://10.0.0.9
Repository UUID: e5a0987c-ab12-4088-82c5-263f6c00c66a
Revision: 3
Node Kind: directory
Schedule: normal
Last Changed Author: Mika
Last Changed Rev: 3
Last Changed Date: 2013-03-15 14:55:57 +0400 (Fri, 15 Mar 2013) 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-19T08:07:01.343

我发现我需要终止该`svnserve`进程并重新启动它。

在终端上：

//查找并杀死进程

```
ps -ef  | grep svnserve
sudo kill processID. 
```

只是一个真实世界的例子如下所示：

```
root@debian:/home/arun# ps -ef | grep svnserv
root      2697     1  0 13:23 ?        00:00:00 svnserve -d
root      2935  2574  0 14:20 pts/1    00:00:00 grep svnserv
root@debian:/home/arun# kill 2697 
```

//启动服务器

```
svnserve -d -r <path to repository> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T09:04:03.687

如果`/testA`存储库 URL 中的路径（缩短的路径），您必须修复 -r（存储库根）值

来自[文档](http://tortoisesvn.net/docs/nightly/TortoiseSVN_en/tsvn-serversetup-svnserve.html)：

> 您还可以通过使用 --root 开关设置根位置并限制对服务器上指定目录的访问来提高安全性并节省使用 svnserve 输入 URL 的时间：

`svnserve.exe --daemon --root drive:\path\to\repository\root`

drive:\path\to\repository\root 是存储库（存储库）的父目录的路径，而不是存储库本身的路径

# wpf - 如何在不改变任何主题的情况下制作加载栏？

> ID：15470189
> 
> 赞同：2
> 
> 时间：2013-03-18T05:17:51.587
> 
> 标签：wpf, c#-4.0, progress-bar, wpf-4.0

我使用 a `ProgressBar`，但是当我更改其主题时，它看起来会有所不同。

我将windows主题从个性化选项（即右键单击桌面）更改为windows经典主题（即基本和高对比度主题），如下所示：

```
<StackPanel VerticalAlignment="Center" HorizontalAlignment="Center"
            Background="Transparent">
    <ProgressBar IsIndeterminate="True" Height="20" Width="300"
                 VerticalAlignment="Center" BorderThickness="0"
                 BorderBrush="Transparent" HorizontalAlignment="Center"
                 Foreground="#0A8098" >
        <ProgressBar.Background>
            <ImageBrush ImageSource="/ClientApplication;component/Images/ProgressBackground.png"/>
        </ProgressBar.Background>
        <ProgressBar.Clip>
            <RectangleGeometry RadiusX="20.5" RadiusY="20.5" Rect="0,0,300,19"/>
        </ProgressBar.Clip>
    </ProgressBar>

    <TextBlock Text="LOADING PLEASE WAIT" Margin="0 10 0 0" VerticalAlignment="Center"
               HorizontalAlignment="Center" Foreground="#FFFFFF" />
</StackPanel> 
```

和图像：

![经典主题](../Images/e25965d0accd3a6a571ce006ba29f9b6.png)

然后我再次将 windows 经典主题更改为 windows 7（即 aero 主题），

![航空主题](../Images/81f815b15150d3de5fb1859e2a3a59c8.png)

但我想要第一个但不影响/改变主题。

知道该怎么做吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T20:36:17.887

The `ProgressBar` is dependent on Windows Themes. You could just create your own progress bar and show/hide it when you want.

The only drawback is that you need to manually write some logic if you want it to be tied to a progress percentage.

With WPF, you can draw out your own progress bar and animate it as you like.

```
<Rectangle Name="LoadingRectangle" Stroke="Black" Fill="#C0000000" Visibility="{Binding Path=LoadingIcon}" />
<Canvas Name="LoadingIcon" RenderTransformOrigin="0.5,0.5" Width="120" Height="120" Visibility="{Binding Path=LoadingIcon}" >     

<Ellipse Width="19.5" Height="19.5" Canvas.Left="20.1696" Canvas.Top="9.76358" Stretch="Fill" Fill="DarkGoldenrod"/>        
<Ellipse Width="18" Height="18" Canvas.Left="2.86816" Canvas.Top="29.9581" Stretch="Fill" Fill="DarkGoldenrod" OpacityMask="#E9000000" />        
<Ellipse Width="17" Height="17" Canvas.Left="5.03758e-006" Canvas.Top="57.9341" Stretch="Fill" Fill="DarkGoldenrod" OpacityMask="#E1000000" />         
<Ellipse Width="16" Height="16" Canvas.Left="12" Canvas.Top="85" Stretch="Fill" Fill="DarkGoldenrod" OpacityMask="#D2000000" />         
<Ellipse Width="15" Height="15" Canvas.Left="37" Canvas.Top="102" Stretch="Fill" Fill="DarkGoldenrod" OpacityMask="#BC000000" />         
<Ellipse Width="14" Height="14" Canvas.Left="66" Canvas.Top="101" Stretch="Fill" Fill="DarkGoldenrod" OpacityMask="#9C000000" />         
<Ellipse Width="13" Height="13" Canvas.Left="91" Canvas.Top="86" Stretch="Fill" Fill="DarkGoldenrod" OpacityMask="#7B000000" />         
<Ellipse Width="11" Height="11" Canvas.Left="106" Canvas.Top="65" Stretch="Fill" Fill="DarkGoldenrod" OpacityMask="#49000000" />         
<Ellipse Width="10" Height="10" Canvas.Left="104" Canvas.Top="39" Stretch="Fill" Fill="DarkGoldenrod" OpacityMask="#27000000" />         
<Ellipse Width="21.835" Height="21.862" Canvas.Left="47.2783" Canvas.Top="0.5" Stretch="Fill" Fill="DarkGoldenrod"></Ellipse>

<Canvas.RenderTransform>         
<RotateTransform x:Name="SpinnerRotate" Angle="0" />         
</Canvas.RenderTransform>         
<Canvas.Triggers>

<EventTrigger RoutedEvent="ContentControl.Loaded">         
<BeginStoryboard>         
<Storyboard>   

<DoubleAnimation Storyboard.TargetName="SpinnerRotate" Storyboard.TargetProperty="(RotateTransform.Angle)" From="0" To="360" Duration="0:0:01" RepeatBehavior="Forever" />  

</Storyboard>         
</BeginStoryboard>         
</EventTrigger>         
</Canvas.Triggers>         
</Canvas> 
```

# c# - 使用 OpenSSL 的 AES-256/CBC 加密和 C# 中的解密

> ID：15470190
> 
> 赞同：4
> 
> 时间：2013-03-18T05:18:08.703
> 
> 标签：c#, cryptography, aes, aescryptoserviceprovider

我是密码学的新手。我的要求是解密/加密使用 openssl 加密/解密的文本。我们使用的算法是 Openssl 中的 aes-256-cbc。所以，我试图在我的应用程序中实现相同的功能。到目前为止，经过大量谷歌搜索后，我所能做的就是..

```
private static string Encryptor(string TextToEncrypt)
{
    //Turn the plaintext into a byte array.
    byte[] PlainTextBytes = System.Text.ASCIIEncoding.ASCII.GetBytes(TextToEncrypt);            

    //Setup the AES providor for our purposes.
    AesCryptoServiceProvider aesProvider = new AesCryptoServiceProvider();

    aesProvider.BlockSize = 128;
    aesProvider.KeySize = 256;  
    //My key and iv that i have used in openssl
    aesProvider.Key = System.Text.Encoding.ASCII.GetBytes(strKey);
    aesProvider.IV = System.Text.Encoding.ASCII.GetBytes(strIV);  
    aesProvider.Padding = PaddingMode.PKCS7;
    aesProvider.Mode = CipherMode.CBC;

    ICryptoTransform cryptoTransform = aesProvider.CreateEncryptor(aesProvider.Key, aesProvider.IV);            
    byte[] EncryptedBytes = cryptoTransform.TransformFinalBlock(PlainTextBytes, 0, PlainTextBytes.Length);
    return Convert.ToBase64String(EncryptedBytes);                        
}

private static string Decryptor(string TextToDecrypt)
{
    byte[] EncryptedBytes = Convert.FromBase64String(TextToDecrypt);

    //Setup the AES provider for decrypting.            
    AesCryptoServiceProvider aesProvider = new AesCryptoServiceProvider();
    //aesProvider.Key = System.Text.Encoding.ASCII.GetBytes(strKey);
    //aesProvider.IV = System.Text.Encoding.ASCII.GetBytes(strIV);
    aesProvider.BlockSize = 128;
    aesProvider.KeySize = 256;  
    //My key and iv that i have used in openssl
    aesProvider.Key = System.Text.Encoding.ASCII.GetBytes(strKey);
    aesProvider.IV = System.Text.Encoding.ASCII.GetBytes(strIV);  
    aesProvider.Padding = PaddingMode.PKCS7;
    aesProvider.Mode = CipherMode.CBC;

    ICryptoTransform cryptoTransform = aesProvider.CreateDecryptor(aesProvider.Key, aesProvider.IV);
    byte[] DecryptedBytes = cryptoTransform.TransformFinalBlock(EncryptedBytes, 0, EncryptedBytes.Length);
    return System.Text.Encoding.ASCII.GetString(DecryptedBytes);
} 
```

我的 openssl 命令是

```
openssl aes-256-cbc -e -nosalt -a -in  inputfile.txt -out  output.txt -k key -iv ivkey 
```

我的密钥长度是 32digits，iv 是 16digits

谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T13:44:08.200

首先，阅读`man enc`openssl。`-iv`使用时被忽略`-k`。你可能想要资本`-K`。其次，与 openssl 工具一起使用时，key 和 iv 值是十六进制的，如果您的 C# 使用与命令行相同的字符串，那么您需要进行[适当的转换](https://stackoverflow.com/questions/311165/how-do-you-convert-byte-array-to-hexadecimal-string-and-vice-versa)而不是`Encoding.ASCII.GetBytes`（无论如何，7 位编码永远不是正确的答案）。

对于您的纯文本，您不妨使用`Encoding.UTF8.GetBytes/GetString`它，因为它向后兼容 ASCII。

如果出于某种原因您实际上想使用小写字母`-k`，即生成密钥和 iv 的密码，则要困难得多，因为 openssl 使用它自己的密钥派生方案。`-nosalt`此外，与标志一起使用是危险的。

> **-nosalt**：在密钥派生例程中不使用盐。除非出于测试目的或与 OpenSSL 和 SSLeay 的旧版本兼容，否则不应使用此选项。

这是危险的原因之一，因为 IV 不应该被预测或重复用于 AES-CBC，如果您不使用盐，密码将始终生成具有相同 IV 的相同密钥来打开您最多可以进行多次攻击，并且可以泄露有关明文的信息。

[您可以从这篇博文Decrypting OpenSSL AES files in C#](http://deusty.blogspot.com/2009/04/decrypting-openssl-aes-files-in-c.html)中了解如何从密码短语、与 openssl 相同的密钥和 IV 派生，尽管它是专门针对 AES-128 的，但评论会引导您了解如何针对 aes-256 进行修改，来自`man EVP_BytesToKey`：

```
Hash0 = ''
Hash1 = MD5(Hash0 + Password + Salt)
Hash2 = MD5(Hash1 + Password + Salt)
Hash3 = MD5(Hash2 + Password + Salt)

Key = Hash1 + Hash2
IV = Hash3 
```

# sql - 如何在sql中使用order by with union all？

> ID：15470191
> 
> 赞同：73
> 
> 时间：2013-03-18T05:18:10.933
> 
> 标签：sql, sql-server

我尝试了下面给出的 sql 查询：

```
SELECT * FROM (SELECT * 
FROM TABLE_A ORDER BY COLUMN_1)DUMMY_TABLE
UNION ALL 
SELECT * FROM TABLE_B 
```

它会导致以下错误：

> ORDER BY 子句在视图、内联函数、派生表、子查询和公用表表达式中无效，除非还指定了 TOP 或 FOR XML。

我需要在 union all 中使用 order by。我该如何做到这一点？

* * *

## 回答 #1

> 赞同：128
> 
> 时间：2013-03-18T05:19:14.320

```
SELECT  * 
FROM 
        (
            SELECT * FROM TABLE_A 
            UNION ALL 
            SELECT * FROM TABLE_B
        ) dum
-- ORDER BY ..... 
```

但是如果您想从`Table_A`结果列表的顶部获取所有记录，您可以添加用户定义值，您可以将其用于排序，

```
SELECT  * 
FROM 
        (
            SELECT *, 1 sortby FROM TABLE_A 
            UNION ALL 
            SELECT *, 2 sortby FROM TABLE_B
        ) dum
ORDER   BY sortby 
```

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2015-05-25T15:16:11.153

你真的不需要括号。可以直接排序：

```
SELECT *, 1 AS RN FROM TABLE_A
UNION ALL 
SELECT *, 2 AS RN FROM TABLE_B
ORDER BY RN, COLUMN_1 
```

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2017-06-20T05:43:48.540

不是 OP 的直接响应，但我想我会在这里响应 OP 的 ERROR 消息，这可能会完全指向另一个方向！

一旦检索到记录集并对批次进行排序，所有这些答案都指的是**整体ORDER BY。**

如果您想独立地按 UNION 的**每个部分**排序，并且仍然让它们“加入”在同一个 SELECT 中怎么办？

```
SELECT pass1.* FROM 
 (SELECT TOP 1000 tblA.ID, tblA.CustomerName 
  FROM TABLE_A AS tblA ORDER BY 2) AS pass1
UNION ALL 
SELECT pass2.* FROM 
  (SELECT TOP 1000 tblB.ID, tblB.CustomerName 
   FROM TABLE_B AS tblB ORDER BY 2) AS pass2 
```

请注意，TOP 1000 是一个任意数字。使用足够大的数字来捕获您需要的所有数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-16T14:14:39.883

有时您需要执行以下操作：

根据排序从表 1 中拉出前 5名，
根据另一种排序从表 2中拉出后 5 名，
然后将它们合并在一起。

**解决方案**

```
select * from (
-- top 5 records
select top 5 col1, col2, col3 
from table1 
group by col1, col2
order by col3 desc ) z 

union all

select * from (
-- bottom 5 records 
select top 5 col1, col2, col3 
from table2 
group by col1, col2
order by col3 ) z 
```

这是我能够绕过错误并为我工作的唯一方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-05-14T19:58:44.903

SELECT * FROM (SELECT * FROM TABLE_A ORDER BY COLUMN_1)DUMMY_TABLE UNION ALL SELECT * FROM TABLE_B ORDER BY 2;

***2 是这里的列号.. 在 Oracle SQL 中，您可以使用要对数据进行排序的列号***

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2020-10-13T13:36:22.740

```
select CONCAT(Name, '(',substr(occupation, 1, 1), ')') AS f1
from OCCUPATIONS
union
select temp.str AS f1 from 
(select count(occupation) AS counts, occupation, concat('There are a total of ' ,count(occupation) ,' ', lower(occupation),'s.') As str  from OCCUPATIONS group by occupation order by counts ASC, occupation ASC
 ) As temp
 order by f1 
```

# android - 如何在android中确认密码？

> ID：15470193
> 
> 赞同：1
> 
> 时间：2013-03-18T05:18:47.377
> 
> 标签：android, passwords, password-confirmation

我有两个编辑文本，一个用于输入密码，另一个用于确认此密码。这些编辑文本的最大长度为 5。

```
confirmPwdEdiText.addTextChangedListener(new TextWatcher() {
 public void afterTextChanged(Editable s) {}
 public void beforeTextChanged(CharSequence s, int start, int count,
     int after) { }

 public void onTextChanged(CharSequence charSequence, int start, int before, int count)        
 {

   String pwd = passwordEdiText.getText().toString();
   String confirmaion = charSequence.toString();
   if ((pwd == null || pwd.trim().length() <= 0) &&  confirmaion.trim().length() > 0) {
           Toast.makeText(context,"Enter password",Toast.LENGTH_SHORT).show();
   } 
   else if (pwd != null && pwd.trim().length() > 0 ) {
      if(confirmaion.trim().length() == pwd.length()) {
         if (pwd.equals(confirmaion)) {
            password = pwd;
            Toast.makeText(context,"Passwords match",Toast.LENGTH_SHORT).show();
         } 
         else {
            Toast.makeText(context,"Passwords do not match",Toast.LENGTH_SHORT).show();
         }
      }
   }
 }
}); 
```

当我使用它来确认密码时，删除密码时再次显示“密码不匹配”吐司。如何在**不使用按钮单击或任何其他**方式的情况下以有效的方式确认密码？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T05:24:00.897

您可以添加一个按钮和按钮的 onClick 侦听器来验证您的密码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T05:29:14.227

您可以使用 TextWatcher

```
et1.addTextChangedListener(new TextWatcher() {
            @Override
            public void onTextChanged(CharSequence s, int start, int before, int count) {

                // TODO Auto-generated method stub
            }

            @Override
            public void beforeTextChanged(CharSequence s, int start, int count, int after) {

                // TODO Auto-generated method stub
            }

            @Override
            public void afterTextChanged(Editable s) {

                // TODO Auto-generated method stub
            }
        }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-20T12:01:53.610

参考这个简单的示例，如果两个字符串都不为空或为空，您将了解其比较旧密码与新密码的简单逻辑，否则检查新旧密码长度的长度并比较两个密码是否相等。

如果您选择简单验证，则可以使用此选项

```
 @Override
public void afterTextChanged(Editable s) {

    System.out.println(s.toString());
    String oldPass = oldPassword.getText().toString();
    String newPass = newPassword.getText().toString();
    String confirmPass = confirmPassword.getText().toString();
    if (!oldPass.equals("") && !newPass.equals("") && oldPass.equals(newPass)) {
        Toast.makeText(getContext(), "Choose Different Password than Old Password", Toast.LENGTH_SHORT).show();
    }
    else if (!newPass.equals("") && !confirmPass.equals("") && !newPass.equals(confirmPass) && newPass.length()==confirmPass.length())
    {
        Toast.makeText(getContext(), "Choose same as New Password", Toast.LENGTH_SHORT).show();
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-07-19T02:39:43.137

尝试这个

```
 private boolean checkPasswordNotMatch() {
            String pass=signupInputPassword.getText().toString();
            String cpass=signupInputPassword2.getText().toString();
            if (!pass.equals(cpass)) {
                signupInputLayoutPassword2.setErrorEnabled(true);
                signupInputLayoutPassword2.setError(getString(R.string.err_msg_password_confirm));
                signupInputLayoutPassword.setErrorEnabled(true);
                signupInputLayoutPassword.setError(getString(R.string.err_msg_password_confirm));
                return false;
        }
            signupInputLayoutPassword.setErrorEnabled(false);
            return true;
        } 
```

# ios - NSThread 显示 SIGABRT

> ID：15470195
> 
> 赞同：-1
> 
> 时间：2013-03-18T05:19:15.033
> 
> 标签：ios, objective-c

我是 IOS 新手，我需要在我的程序中实现 NSThread，但是当它调用它时会显示 SIGABRT 错误。我当前的代码如下

XMLParser.m

```
-(void)loadXML
{
    categories =[[NSMutableArray alloc]init];
    NSString *filepath =[[NSBundle mainBundle]pathForResource:@"cd_catalog" ofType:@"xml"];
    NSData *data =[NSData dataWithContentsOfFile:filepath];
    parser=[[NSXMLParser alloc]initWithData:data];
    parser.delegate =self;
    [parser parse];
} 
```

视图控制器.m

```
- (void)viewDidLoad
{
    xmlParser =[[XMLParser alloc]init];
    NSThread *myThread =[[NSThread alloc]initWithTarget:self selector:@selector(loadXML) object:nil];
    [myThread start];
    [super viewDidLoad];
} 
```

请告诉我我的程序有什么问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T05:29:34.383

使用此代码解决您的问题...

**视图控制器.m**

```
- (void)viewDidLoad
{
    NSThread *myThread =[[NSThread alloc]initWithTarget:self selector:@selector(doParsing) object:nil];
    [myThread start];
    [super viewDidLoad];
}
-(void)doParsing
{
    xmlParser =[[XMLParser alloc]init];
    [xmlParser loadXML];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T05:27:08.953

`NSThread`您可以使用启动线程而不是创建对象

```
//performSelectorInBackground:withObject: is NSObject's method
[self performSelectorInBackground:@selector(loadXML) withObject:nil]; 
```

我没有发现任何错误代码，但[启用`NSZombie`](https://stackoverflow.com/q/2190227/468724)并查看导致此问题的对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T05:33:13.913

loadXML 未在 ViewController 上定义，因此您的线程代码应更改为使用 XMLParser 的实例而不是 self ，如下所示：

```
XMLParser *parser = [[XMLParser alloc] init];
NSThread *thread = [[NSThread alloc] initWithTarget:parser selector:@selector(loadXML) object:nil];
[thread start]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-25T08:26:49.810

由于 Apple 引入了 GCD，您可以在不创建任何`NSThread`实例的情况下解决它。

```
dispatch_async(dispatch_get_global_object(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
  [self loadXML];
}); 
```

# php - 此 PDO::FETCH_ASSOC` 查询跳过返回的第一个结果

> ID：15470197
> 
> 赞同：3
> 
> 时间：2013-03-18T05:19:18.250
> 
> 标签：php, pdo, fetch

我正在过渡到 PDO 准备好的语句，并且我在使用语句的基本`SELECT`查询的语法方面遇到了问题`WHILE`。

下面的`foreach`语句回显了正确的结果，但`PDO::FETCH_ASSOC`查询跳过了返回的第一个结果（因此它总是回显比应有的结果少一个）。

**PDO::FETCH_ASSOC**

```
$stmt = $conn->prepare("SELECT * FROM products"); 
$stmt->execute();
$row = $stmt->fetch();
while($row = $stmt->fetch(PDO::FETCH_ASSOC)) { 
    echo $row['product_name'].' '.$row['price'].' '.$row['color'], "<br />"; 
} 
```

**前锋**

```
foreach($conn->query('SELECT * FROM products') as $row) {
    echo $row['product_name'].' '.$row['price'].' '.$row['color'], "<br />";  
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-18T05:21:15.377

您已经在 while 循环之前获取了第一行`$row = $stmt->fetch();`。如果删除此行，它将按预期工作。

由于 while 循环将`$row`在每次迭代时覆盖，看起来您从第二行开始，但发生的是`$row`第一次 while 循环迭代的值被覆盖。

要让循环按照您编写的方式工作，您需要使用[do-while](http://php.net/manual/en/control-structures.do.while.php)构造：

```
$row = $stmt->fetch();
do {
     echo $row['product_name'].' '.$row['price'].' '.$row['color'], "<br />";
} while($row = $stmt->fetch(PDO::FETCH_ASSOC)); 
```

这里的值`$row`将首先打印，然后再被`while`条件覆盖。

> 在这种特殊情况下，当没有任何结果时，我不想回显任何内容

如果是这种情况，请先检查您的查询是否返回任何结果。在这里，我在检查中是明确的，因为如果您删除了 external `if`，您的`while`循环仍然会遵循您的意图 - 也就是说，如果没有任何结果，它不会回显任何内容。

但是，在您的代码中有明确的意图总是好的：

```
if ($stmt->columnCount()) {
   while($row = $stmt->fetch(PDO::FETCH_ASSOC)) { 
       echo $row['product_name'].' '.$row['price'].' '.$row['color'], "<br />"; 
   }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-18T05:20:55.523

不要做`$row = $stmt->fetch()`之前的循环。

# android - XML Parser DOM 引起：java.lang.NullPointerException

> ID：15470200
> 
> 赞同：2
> 
> 时间：2013-03-18T05:19:54.117
> 
> 标签：android, android-parser

我正在编写一个程序，在该程序中我使用 XMLParser 来解析 DOM 元素中的数据，但是每当我运行我的程序时，都会得到：**不幸的是 App has Stopped**

Logcat 说：

```
 03-18 10:41:11.266: I/System.out(843): Getting DOM Element(s):- null
03-18 10:41:11.266: D/AndroidRuntime(843): Shutting down VM
03-18 10:41:11.266: W/dalvikvm(843): threadid=1: thread exiting with uncaught exception (group=0x40a70930)
03-18 10:41:11.287: E/AndroidRuntime(843): FATAL EXCEPTION: main
03-18 10:41:11.287: E/AndroidRuntime(843): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.androidhive/com.example.androidhive.CustomizedListViewPackage}: java.lang.NullPointerException
03-18 10:41:11.287: E/AndroidRuntime(843):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
03-18 10:41:11.287: E/AndroidRuntime(843):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
03-18 10:41:11.287: E/AndroidRuntime(843):  at android.app.ActivityThread.access$600(ActivityThread.java:141)
03-18 10:41:11.287: E/AndroidRuntime(843):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
03-18 10:41:11.287: E/AndroidRuntime(843):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-18 10:41:11.287: E/AndroidRuntime(843):  at android.os.Looper.loop(Looper.java:137)
03-18 10:41:11.287: E/AndroidRuntime(843):  at android.app.ActivityThread.main(ActivityThread.java:5039)
03-18 10:41:11.287: E/AndroidRuntime(843):  at java.lang.reflect.Method.invokeNative(Native Method)
03-18 10:41:11.287: E/AndroidRuntime(843):  at java.lang.reflect.Method.invoke(Method.java:511)
03-18 10:41:11.287: E/AndroidRuntime(843):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-18 10:41:11.287: E/AndroidRuntime(843):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-18 10:41:11.287: E/AndroidRuntime(843):  at dalvik.system.NativeStart.main(Native Method)
03-18 10:41:11.287: E/AndroidRuntime(843): Caused by: java.lang.NullPointerException
03-18 10:41:11.287: E/AndroidRuntime(843):  at com.example.androidhive.CustomizedListViewPackage.onCreate(CustomizedListViewPackage.java:52)
03-18 10:41:11.287: E/AndroidRuntime(843):  at android.app.Activity.performCreate(Activity.java:5104)
03-18 10:41:11.287: E/AndroidRuntime(843):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
03-18 10:41:11.287: E/AndroidRuntime(843):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
03-18 10:41:11.287: E/AndroidRuntime(843):  ... 11 more 
```

CustomizedListViewPackage.java：

```
 import java.util.ArrayList;
import java.util.HashMap;

import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.NodeList;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ListView;

    public class CustomizedListViewPackage extends Activity {
// All static variables
static final String URL = "http://erachnida.net/android/packages.xml";
// XML node keys
static final String KEY_SONGS = "songs"; // parent node
static final String KEY_ID = "id";
static final String KEY_TITLE = "title";
static final String KEY_OFFER = "offer";
static final String KEY_DETAIL = "detail";
static final String KEY_CHECKS = "checks";
static final String KEY_DRINK = "drink";
static final String KEY_SERVICE = "service";
static final String KEY_FOOD = "food";
static final String KEY_INTERNET = "internet";
static final String KEY_RATES = "rates";
static final String KEY_DURATION = "duration";
static final String KEY_THUMB_URL = "thumb_url";

ListView lists;
LazyAdapterPackage adapters;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main_package);

    final ArrayList<HashMap<String, String>> songsLists = new ArrayList<HashMap<String, String>>();

    XMLParser parser = new XMLParser();
    String xml = parser.getXmlFromUrl(URL); // getting XML from URL
    Document doc = parser.getDomElement(xml); // getting DOM element
    System.out.println("Getting DOM Element(s):- " + doc); // getting null here
    // Getting null pointer in below line(line number - 52)
    NodeList nl = doc.getElementsByTagName(KEY_SONGS);
    // looping through all song nodes <song>
    for (int i = 0; i < nl.getLength(); i++) {
        // creating new HashMap
        HashMap<String, String> map = new HashMap<String, String>();
        Element e = (Element) nl.item(i);
        // adding each child node to HashMap key => value
        map.put(KEY_ID, parser.getValue(e, KEY_ID));
        map.put(KEY_TITLE, parser.getValue(e, KEY_TITLE));
        map.put(KEY_OFFER, parser.getValue(e, KEY_OFFER));
        map.put(KEY_DETAIL, parser.getValue(e, KEY_DETAIL));
        map.put(KEY_CHECKS, parser.getValue(e, KEY_CHECKS));
        map.put(KEY_DRINK, parser.getValue(e, KEY_DRINK));
        map.put(KEY_SERVICE, parser.getValue(e, KEY_SERVICE));
        map.put(KEY_FOOD, parser.getValue(e, KEY_FOOD));
        map.put(KEY_INTERNET, parser.getValue(e, KEY_INTERNET));
        map.put(KEY_RATES, parser.getValue(e, KEY_RATES));
        map.put(KEY_DURATION, parser.getValue(e, KEY_DURATION));
        map.put(KEY_THUMB_URL, parser.getValue(e, KEY_THUMB_URL));

        // adding HashList to ArrayList
        songsLists.add(map);
    }

    lists=(ListView)findViewById(R.id.list);

    // Getting adapter by passing xml data ArrayList
    adapters=new LazyAdapterPackage(this, songsLists);        
    lists.setAdapter(adapters);

    // Click event for single list row
    lists.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            HashMap<String, String> map = songsLists.get(position);
            Intent in = new Intent(CustomizedListViewPackage.this,com.example.androidhive.SingleViewPackage.class);
            in.putExtra(KEY_TITLE, map.get(KEY_TITLE));
            in.putExtra(KEY_OFFER, map.get(KEY_OFFER));
            in.putExtra(KEY_DETAIL, map.get(KEY_DETAIL));
            in.putExtra(KEY_CHECKS, map.get(KEY_CHECKS));
            in.putExtra(KEY_DRINK, map.get(KEY_DRINK));
            in.putExtra(KEY_SERVICE, map.get(KEY_SERVICE));
            in.putExtra(KEY_FOOD, map.get(KEY_FOOD));
            in.putExtra(KEY_INTERNET, map.get(KEY_INTERNET));
            in.putExtra(KEY_RATES, map.get(KEY_RATES));
            in.putExtra(KEY_DURATION, map.get(KEY_DURATION));
            in.putExtra(KEY_THUMB_URL, map.get(KEY_THUMB_URL));
            startActivity(in);  

        }
    });     
}   
} 
```

请参见下面的代码 XMLParser.java：

```
 public class XMLParser {

// constructor
public XMLParser() {

}

/**
 * Getting XML from URL making HTTP request
 * @param url string
 * */
public String getXmlFromUrl(String url) {
    String xml = null;

    try {
        // defaultHttpClient
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);

        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        xml = EntityUtils.toString(httpEntity);

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
    // return XML
    return xml;
}

/**
 * Getting XML DOM element
 * @param XML string
 * */
public Document getDomElement(String xml){
    Document doc = null;
    DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
    try {

        DocumentBuilder db = dbf.newDocumentBuilder();

        InputSource is = new InputSource();
            is.setCharacterStream(new StringReader(xml));
            doc = db.parse(is); 

        } catch (ParserConfigurationException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        } catch (SAXException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        } catch (IOException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        }

        return doc;
}

/** Getting node value
  * @param elem element
  */
 public final String getElementValue( Node elem ) {
     Node child;
     if( elem != null){
         if (elem.hasChildNodes()){
             for( child = elem.getFirstChild(); child != null; child = child.getNextSibling() ){
                 if( child.getNodeType() == Node.TEXT_NODE  ){
                     return child.getNodeValue();
                 }
             }
         }
     }
     return "";
 }

 /**
  * Getting node value
  * @param Element node
  * @param key string
  * */
 public String getValue(Element item, String str) {     
        NodeList n = item.getElementsByTagName(str);        
        return this.getElementValue(n.item(0));
    }
    } 
```

*在多个 ListView 类中使用单个 XMLParser 类，例如在此应用程序中的 CustomizedListView.java 和 CustomizedListViewPackage.java*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T05:40:45.757

尝试这个

```
String xml = parser.getXmlFromUrl(URL);
DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
DocumentBuilder builder = factory.newDocumentBuilder();
Document dom = builder.parse(xml);
Element root = dom.getDocumentElement(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T05:58:54.303

如在日志中：

> 获取 DOM 元素：- null

意味着你没有从服务器获取数据。将您的方法更改`getXmlFromUrl`为使用以获取`InputStream`然后从中读取数据作为 String ：

```
public String getXmlFromUrl(String url) {
        String xml = null;
        InputStream content = null;
        try {
          HttpClient httpclient = new DefaultHttpClient();
          HttpResponse response = httpclient.execute(new HttpGet(url));
          content = response.getEntity().getContent();
        } catch (Exception e) {
           e.printStackTrace();
        }
        // return XML
        return inputStreamToString(content).toString();
    }

    private StringBuilder inputStreamToString(InputStream is) {
        String line = "";
        StringBuilder xml = new StringBuilder();

        BufferedReader rd = new BufferedReader(new InputStreamReader(is));
        try {
            while ((line = rd.readLine()) != null) { 
                xml.append(line); 
            }
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        return xml;
    } 
```

# php - 在另一个类中调用类的对象

> ID：15470207
> 
> 赞同：1
> 
> 时间：2013-03-18T05:20:33.897
> 
> 标签：php, mysql

我是 OOP 的新手。我在程序编程方面工作了很多。所以我现在有点麻烦。你能告诉我如何在另一个类中调用一个类的对象，然后我可以使用该对象访问该类的所有变量和函数。

例如

我有一类 DBconnection。我在里面写了我的数据库查询。现在我有另一个名为用户的类。现在我需要访问 User 类中的 db 查询，当然我需要 DBconnection 类的对象来访问所有 db 查询。我能做什么请帮忙

我编写的示例代码如下：

```
**DBConnection class**

class DBConnection
    {
        public $SITEURL;
        public $servername;
        public $username;
        public $password;
        public $dbname;
        public $objDbConnect;

        function DBConnection(){
            $this->SITEURL=Configuration::SITEURL;
            $this->servername=Configuration::servername;
            $this->username=Configuration::username;
            $this->password=Configuration::password;
            $this->objDbConnect=mysql_connect($this->servername,$this->username,$this->password);
                if($this->objDbConnect){
                    mysql_select_db($this->dbname);
                }
            }
    function InsertRecord($pStrTableName,$pArrField,$pArrValue)
    {

    $strSql="insert into $pStrTableName (";

    $intFieldSize=count($pArrField);
    for($i=0;$i<$intFieldSize;$i++)
    {
        if($i==$intFieldSize-1)
        {
            $strSql.=$pArrField[$i];
        }
        else
        {
            $strSql.=$pArrField[$i].",";
        }
    }
    $strSql.=") values (";

    $intFieldSize=count($pArrValue);
    for($i=0;$i<$intFieldSize;$i++)
    {
        if($i==$intFieldSize-1)
        {
            $strSql.="'".$pArrValue[$i]."'";
        }
        else
        {
            $strSql.="'".$pArrValue[$i]."'".",";
        }
    }
    $strSql.=")";
    if(mysql_query($strSql))
    {
        return 1;
    }
    else
    {
        return 0;   
    }

}

} 

**Users class**

class Users{

        var $username,
            $userpassword,
            $email,

        function User(){

        }

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T05:24:10.833

你可以在你的第二个类中声明你的类的一个对象并像使用它一样使用它

```
$c= new DBConnection();
$c->InsertRecord('Parameters here etc');
echo $c->username; //and other public variables similarly 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T05:27:07.200

**DBConnection 类**

类 DBConnection {

```
 public $SITEURL;
    public $servername;
    public $username;
    public $password;
    public $dbname;
    public $objDbConnect;

    function DBConnection(){
        $this->SITEURL=Configuration::SITEURL;
        $this->servername=Configuration::servername;
        $this->username=Configuration::username;
        $this->password=Configuration::password;
        $this->objDbConnect=mysql_connect($this->servername,$this->username,$this->password);
            if($this->objDbConnect){
                mysql_select_db($this->dbname);
            }
        }
function InsertRecord($pStrTableName,$pArrField,$pArrValue)
{

$strSql="insert into $pStrTableName (";

$intFieldSize=count($pArrField);
for($i=0;$i<$intFieldSize;$i++)
{
    if($i==$intFieldSize-1)
    {
        $strSql.=$pArrField[$i];
    }
    else
    {
        $strSql.=$pArrField[$i].",";
    }
}
$strSql.=") values (";

$intFieldSize=count($pArrValue);
for($i=0;$i<$intFieldSize;$i++)
{
    if($i==$intFieldSize-1)
    {
        $strSql.="'".$pArrValue[$i]."'";
    }
    else
    {
        $strSql.="'".$pArrValue[$i]."'".",";
    }
}
$strSql.=")";
if(mysql_query($strSql))
{
    return 1;
}
else
{
    return 0;   
} 
```

}

}

**用户类**

类用户{

```
 var $username;
    var $userpassword;
    var $email;
    var $dbcon;

public function __construct()
{
    //create an object
    $this->dbconn = new DBConnection();

    //get user name from dbconnection class
    echo $this->dbconn->username;

}

    function User(){

    } 
```

}

//为用户类创建对象

$user = 新用户（）；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T05:29:43.373

```
**DBConnection class**

class DBConnection
    {
        public $SITEURL;
        public $servername;
        public $username;
        public $password;
        public $dbname;
        public $objDbConnect;

        function DBConnection(){
            $this->SITEURL=Configuration::SITEURL;
            $this->servername=Configuration::servername;
            $this->username=Configuration::username;
            $this->password=Configuration::password;
            $this->objDbConnect=mysql_connect($this->servername,$this->username,$this->password);
                if($this->objDbConnect){
                    mysql_select_db($this->dbname);
                }
            }

    public static function getConnection(){
        if(!empty($this)){
         return $this;
        }
        return new DBConnection();
    }

    function InsertRecord($pStrTableName,$pArrField,$pArrValue)
    {

    $strSql="insert into $pStrTableName (";

    $intFieldSize=count($pArrField);
    for($i=0;$i<$intFieldSize;$i++)
    {
        if($i==$intFieldSize-1)
        {
            $strSql.=$pArrField[$i];
        }
        else
        {
            $strSql.=$pArrField[$i].",";
        }
    }
    $strSql.=") values (";

    $intFieldSize=count($pArrValue);
    for($i=0;$i<$intFieldSize;$i++)
    {
        if($i==$intFieldSize-1)
        {
            $strSql.="'".$pArrValue[$i]."'";
        }
        else
        {
            $strSql.="'".$pArrValue[$i]."'".",";
        }
    }
    $strSql.=")";
    if(mysql_query($strSql))
    {
        return 1;
    }
    else
    {
        return 0;   
    }

}

} 

**Users class**

class Users{

        var $username,
            $userpassword,
            $email,

        function User(){
             $db = DBConnection::getConnection();
             $db->InsertRecord($x, $x, $x);
        }

        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T05:34:04.633

1\. 您可以将您的类 DBConnection 更改为[singleton](http://en.wikipedia.org/wiki/Singleton_pattern)。并像这样在 User 中调用您的课程`DBConnection::getInstance()->InsertRecord(...)`。这简单。但不推荐。

2\. 您可以将您的 DBConnection 实例推送到用户内部。像这样

```
class Users{
    var $db_connection;

    function __construct($db_connection){
        $this->db_connection = $db_connection;
    }

$db_connection = new DBConnection(...);
$user = new User($db_connection); 
```

3\. 您可以在 User 类中实例化新的 DBCONnection。就像@Sundar 的回答一样。

PS 不要使用[旧的构造样式](http://php.net/manual/en/language.oop5.decon.php)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-18T05:45:12.593

您可以在 User 类中保留对 DBConnection 的引用（在构造函数中传递它）。

```
private $dbConn;

function __contruct($dbConnRef) {
    $this->dbConn = $dbConnRef;
}

public function storeSelf() {
    $this->dbConn->InsertRecord(...);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-18T05:53:41.073

最好的方法是使用单例模式。下面是一个例子

```
class DBConnection
{
    private static $instance = null;

    private function __construct() {

    }

    /*
     * @return DBConnection
     */
    public static function get_db()
    {
        if ( empty(self::$instance) ) self::$instance = new DBConnection();

        return self::$instance;
    }

    public function query()
    {

    }
}

class User
{

    function testfunc()
    {
        $db = DBConnection::get_db();
        $db->query();
    }
} 
```

# eclipse - 在 Activiti 上生成单元测试时出错

> ID：15470212
> 
> 赞同：0
> 
> 时间：2013-03-18T05:20:47.960
> 
> 标签：eclipse, business-process-management, activiti

当我在运行“生成单元测试”时尝试执行 activiti BPM 时，我在运行单元测试时创建的 Java 文件中出现错误 ![在此处输入图像描述](../Images/d012af41ce7bd200f36c6c329db381ff.png)

我正在使用 eclipse juno 和 fedora 操作系统

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T05:48:01.353

您需要将 junit 库添加到您的项目中。属性->java构建路径->库->添加库

# java - 对象变量的Java数组变化

> ID：15470218
> 
> 赞同：0
> 
> 时间：2013-03-18T05:21:04.867
> 
> 标签：java, arrays, object

我是 Java 新手。这是给出一个错误。

```
private class applicantInfo {
    int Id;
    double quality;
}
private class allApplicants {
    applicantInfo[] applicantArr = new applicantInfo[20];
}
public void newGame {
    allApplicants applicants = new allApplicants();
    applicants.applicantArr[0].Id = 5;
} 
```

我在`applicants.applicantArr[0].Id = 5;`.

我想做的与C中的类似：

```
typedef struct _applicantInfo{
    int Id;
    double quality;
} applicantInfo;

typedef struct _allApplicants {
    applicantInfo applicantArr[20];
} allApplicants;

int main () {
    allApplicants applicants;
    applicants.applicantArr[0].Id = 5;  
} 
```

我怎样才能在 Java 中做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T05:28:10.693

Java 和 C 数组之间的区别在于 C 初始化 Array 中的所有值，而 Java 将它们设置为 null。所以当你打电话

```
applicants.applicantArr[0].Id = 5; 
```

您将收到 NullPointerException，因为申请人.applicantArr[0] 为空。您需要创建一个新的申请者信息并将其放入数组中，然后才能访问它：

```
allApplicants applicants = new allApplicants();
applicants.applicantArr[0] = new applicantInfo();
applicants.applicantArr[0].Id = 5; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T05:26:28.800

您需要在 newGame() 中执行此操作：

```
applicantInfo item = new applicantInfo();//first create a applicantInfo object
item.Id= 5;//set the object properties
applicants.applicantArr[0]= item;//assign the object to the array 
```

这是因为数组的工作方式`Java`与`C`. 看看[这个](https://stackoverflow.com/questions/5564423/arrays-in-java-and-how-they-are-stored-in-memory)

还有一个[教程](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/arrays.html)可以帮助您入门。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T07:46:15.270

我会为您的代码建议一个带有注释和 TODO 的高级结构，您可以填写详细信息。最后一部分，我建议`newGame`方法的结构，将帮助您摆脱遇到的错误。

类的结构`ApplicantInfo`：

```
public class ApplicantInfo {
    private int ID;
    private double quality;

    // Constructor to create an instance with the specified ID value
    public ApplicantInfo(int id){
        // TODO: Initialize the value for ID field
    }

    // Method to get the value for ID
    public int getID(){
        // TODO: return value of ID field
    }

    // Method to set the value for ID
    public void setID(int id){
        // TODO: set the value for ID field
    }

    // Getter and setter methods for "quality" 
    // on the lines of the above methods
} 
```

类的结构`AllApplicants`：

```
public class AllApplicants {
    private ApplicantInfo[] applicantArr = new ApplicantInfo[20];

    // Method to get the applicant info at a given index
    public ApplicantInfo getApplicant(int index){
        // TODO: Get the applicant from the array present at the specified index
    }

    // Method to add an applicant info at a given index
    public boolean addApplicant(ApplicantInfo applicant, int index){
        // TODO: Try to add the specified applicant to the array at the specified index
        // Return true to indicate that the applicant was successfully added, 
        // Return false to indicate that an applicant is already present at the specified index
    }
} 
```

因为这只是`newGame`方法结构的骨架：

```
public void newGame {
    AllApplicants applicants = new AllApplicants();

    // In order to achieve doing "applicants.applicantArr[0].Id = 5;", you
    // need to do the following.

    // Create a new applicant info with ID as 5
    ApplicantInfo applicant = new ApplicantInfo(5);

    // Add the applicant to the applicant array at index 0
    applicants.addApplicant(applicant, 0);
} 
```

除了阅读@codeman 提到的数组之外，您可能还想看看[Java Naming Convention](http://java.about.com/od/javasyntax/a/nameconventions.htm)

# android - 将二进制流转换为字节？

> ID：15470221
> 
> 赞同：1
> 
> 时间：2013-03-18T05:21:34.477
> 
> 标签：android, file, byte, binary-data

我有二进制流，我希望它以字节为单位。之后，我想将其下载到 SD 卡中。

我的网络服务：

```
 POST /**********Mobile/**********.asmx HTTP/1.1
    Host: ***.***.*.*
    Content-Type: text/xml; charset=utf-8
    Content-Length: length
    SOAPAction: "http://tempuri.org/GetDocument"

    <?xml version="1.0" encoding="utf-8"?>
    <soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns:xsd="http://www.w3.org/2001/XMLSchema" 
    xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">

    <soap:Body>
        <GetDocument xmlns="http://tempuri.org/">
           <DocumentID>string</DocumentID>
       </GetDocument>
    </soap:Body>
 </soap:Envelope>
HTTP/1.1 200 OK
Content-Type: text/xml; charset=utf-8
Content-Length: length

<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"      
xmlns:xsd="http://www.w3.org/2001/XMLSchema"     
xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
<soap:Body>
  <GetDocumentResponse xmlns="http://tempuri.org/">
    <GetDocumentResult>string</GetDocumentResult>
  </GetDocumentResponse>
</soap:Body>
</soap:Envelope> 
```

我正在尝试的是

```
 SoapObject DocumentRequest = new SoapObject(NAMESPACE, GET_DOCUMENT_METHOD);

        DocumentRequest.addProperty("DocumentID", ID);
        Log.i("DocumentID", ID);

        SoapSerializationEnvelope Envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
        Envelope.dotNet = true;
        Envelope.setOutputSoapObject(DocumentRequest);
        HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
        androidHttpTransport.debug = true;

        androidHttpTransport.call(SOAP_ACTION_GETDOCUMENT, Envelope);

        SoapPrimitive DocumentResponse = (SoapPrimitive)Envelope.getResponse();
        Log.i("DocumentResponse", DocumentResponse.toString());

        String DocAsString = DocumentResponse.toString();

        byte[] decodedString = DocAsString.getBytes();

        Bitmap decodedByte = BitmapFactory.decodeByteArray(decodedString, 0, decodedString.length);
        ImageView DisplayDoc= (ImageView)findViewById(R.id.displayimage);
        DisplayDoc.setImageBitmap(decodedByte);
} 
```

我得到二进制流作为字符串是正确的还是我需要使用base64binary。如果是这样，请让我知道下载图像/.pdf/word 文档的正确方法。我已经完成了差异搜索，但没有用。谢谢

编辑：

```
SoapPrimitive DocumentResponse = (SoapPrimitive)Envelope.getResponse();
        Log.i("DocumentResponse", DocumentResponse.toString());

        String DocAsString = DocumentResponse.toString();

        byte[] decodedString = Base64.decode(DocAsString, Base64.DEFAULT);

        /*Bitmap decodedByte = BitmapFactory.decodeByteArray(decodedString, 0, decodedString.length);
        ImageView DisplayDoc= (ImageView)findViewById(R.id.displayimage);
        DisplayDoc.setImageBitmap(decodedByte);*/

         File direct = new File(Environment.getExternalStorageDirectory() + "/Downloads");

         if(!direct.exists())  {
             direct.mkdir(); }
        File photo=new File(Environment.getExternalStorageDirectory() + "/Downloads", ID);

         if (photo.exists()) {
              photo.delete(); }

     try {
       FileOutputStream fos=new FileOutputStream(photo.getPath());

       fos.write(decodedString);
       fos.close();

       ContentValues values= new ContentValues();

       System.out.println(values);

     }
     catch (java.io.IOException e) 
     {
       Log.e("PictureDemo", "Exception in photoCallback", e);
     }
    }
    catch(Exception e) {
        e.printStackTrace();
        Toast.makeText(getApplicationContext(), " Network Exception : " + e
                + "Please check network connectivity.", Toast.LENGTH_LONG).show();
    }
} 
```

已编辑，Web 服务响应

```
 03-19 10:58:57.797: D/dalvikvm(789): GC_FOR_ALLOC freed 57K, 4% free 6912K/7171K, paused 53ms
03-19 10:58:57.807: I/dalvikvm-heap(789): Grow heap (frag case) to 7.313MB for 488976-byte allocation
03-19 10:58:57.957: D/dalvikvm(789): GC_CONCURRENT freed 1K, 4% free 7388K/7687K, paused 4ms+14ms
03-19 10:58:58.357: D/gralloc_goldfish(789): Emulator without GPU emulation detected.
03-19 10:58:58.497: W/TextLayoutCache(789): computeValuesWithHarfbuzz -- need to force to single run
03-19 10:59:02.327: D/InputEventConsistencyVerifier(789): KeyEvent: ACTION_UP but key was not down.
03-19 10:59:02.327: D/InputEventConsistencyVerifier(789):   in android.widget.EditText@41054cd8
03-19 10:59:02.327: D/InputEventConsistencyVerifier(789):   0: sent at 2335155000000, KeyEvent { action=ACTION_UP, keyCode=KEYCODE_TAB, scanCode=15, metaState=0, flags=0x8, repeatCount=0, eventTime=2335155, downTime=2335119, deviceId=0, source=0x101 }
03-19 10:59:04.488: I/LoginDetail(789): Username jarnail@sassypuma.comPassword admin
03-19 10:59:04.537: D/dalvikvm(789): GC_FOR_ALLOC freed 71K, 3% free 7634K/7815K, paused 40ms
03-19 10:59:04.937: I/myLogin(789): 1
03-19 10:59:05.357: D/dalvikvm(789): GC_CONCURRENT freed 360K, 7% free 7698K/8199K, paused 7ms+23ms
03-19 10:59:05.547: I/AllFolders(789): anyType{TreeData=anyType{ID=13002; FolderName=My Drive; ParentID=0; CreatedBy=1; }; TreeData=anyType{ID=13006; FolderName=Testing1; ParentID=0; CreatedBy=1; }; TreeData=anyType{ID=13007; FolderName=Testing123; ParentID=0; CreatedBy=1; }; }
03-19 10:59:05.547: I/System.out(789): 3
03-19 10:59:06.057: D/dalvikvm(789): GC_CONCURRENT freed 362K, 7% free 7761K/8263K, paused 31ms+7ms
03-19 10:59:06.217: W/TextLayoutCache(789): computeValuesWithHarfbuzz -- need to force to single run
03-19 10:59:06.627: W/IInputConnectionWrapper(789): finishComposingText on inactive InputConnection
03-19 10:59:08.307: I/FolderID(789): 13002
03-19 10:59:08.307: I/User_ID(789): 1
03-19 10:59:08.367: D/dalvikvm(789): GC_FOR_ALLOC freed 16K, 5% free 7874K/8263K, paused 45ms
03-19 10:59:08.377: I/dalvikvm-heap(789): Grow heap (frag case) to 8.036MB for 262160-byte allocation
03-19 10:59:08.417: D/dalvikvm(789): GC_FOR_ALLOC freed 3K, 6% free 8127K/8583K, paused 44ms
03-19 10:59:08.917: I/SubFolders(789): anyType{FileFolderDetails=anyType{ID=13003; Name=Doc file; URL=anyType{}; SubjectType=Folder; }; FileFolderDetails=anyType{ID=13004; Name=My Pics; URL=anyType{}; SubjectType=Folder; }; FileFolderDetails=anyType{ID=13005; Name=Testing; URL=anyType{}; SubjectType=Folder; }; FileFolderDetails=anyType{ID=13075; Name=satnam; URL=anyType{}; SubjectType=Folder; }; FileFolderDetails=anyType{ID=13080; Name=Saini; URL=anyType{}; SubjectType=Folder; }; FileFolderDetails=anyType{ID=13084; Name=Jelly; URL=anyType{}; SubjectType=Folder; }; FileFolderDetails=anyType{ID=13092; Name=pushie; URL=anyType{}; SubjectType=Folder; }; FileFolderDetails=anyType{ID=13096; Name=Jarnail_Testing; URL=anyType{}; SubjectType=Folder; }; FileFolderDetails=anyType{ID=13099; Name=amarjeet; URL=anyType{}; SubjectType=Folder; }; FileFolderDetails=anyType{ID=13101; Name=Kaam; URL=anyType{}; SubjectType=Folder; }; FileFolderDetails=anyType{ID=13103; Name=tajmehal; URL=anyType{}; SubjectType=Folder; }; FileFolderDetails=anyType{ID=13105; Name=TextArea; URL=anyType{}; SubjectType=Folder; }; FileFolderDetails=anyType{ID=13107; Name=TextArea1; URL=anyType{}; SubjectType=Folder; }; FileFolderDetails=anyType{ID=13109; Name=TextArea2; URL=anyType{}; SubjectType=Folder; }; FileFolderDetails=anyType{ID=13115; Name=TextArea3; URL=anyType{}; SubjectType=Folder; }; FileFolderDetails=anyType{ID=13121; Name=TextArea5; URL=anyType{}; SubjectType=Folder; }; FileFolderDetails=anyType{ID=13124; Name=Check Char; URL=anyType{}; SubjectType=Folder; }; FileFolderDetails=anyType{ID=13128; Name=amitestinggggg; URL=anyType{}; SubjectType=Folder; }; FileFolderDetails=anyType{ID=13132; Name=kkk; URL=anyType{}; SubjectType=Folder; }; FileFolderDetails=anyType{ID=13136; Name=hhhhhhhhhhhhhhhhhh; URL=anyType{}; SubjectType=Folder; }; FileFolderDetails=anyType{ID=13140; Name=ravitevffvvgfdcvgbgvf; URL=anyType{}; SubjectType=Folder; }; FileFolderDetails=anyType{ID=13144; Name=DMS3.0_Title_Page; URL=anyType{}; SubjectType=Folder; }; FileFolderDetails=anyType{ID=20; Name=office.jpg; URL=InterLogicsMobile/image/Tulips.jpg; SubjectType=File; }; FileFolderDetails=anyType{ID=21; Name=Capture.PNG; URL=InterLogicsMobile/image/Tulips.jpg; SubjectType=File; }; FileFolderDetails=anyType{ID=22; Name=groups.jpg; URL=InterLogicsMobile/image/Tulips.jpg; SubjectType=File; }; FileFolderDetails=anyType{ID=23; Name=Capture1.PNG; URL=InterLogicsMobile/image/Tulips.jpg; SubjectType=File; }; FileFolderDetails=anyType{ID=99; Name=Content4Work.pdf; URL=InterLogicsMobile/image/Tulips.jpg; SubjectType=File; }; FileFolderDetails=anyType{ID=109; Name=Rohit.docx; URL=InterLogicsMobile/image/Tulips.jpg; SubjectType=File; }; FileFolderDetails=anyType{ID=115; Name=Chrysanthemum.jpg; URL=InterLogicsMobile/image/Tulips.jpg; SubjectType=File; }; FileFolderDetails=anyType{ID=123; Name=DMS_Drag_and_Drop(2).doc; URL=InterLogicsMobile/image/Tulips.jpg; SubjectType=File; }; FileFolderDetails=anyType{ID=124; Name=Tulips.jpg; URL=InterLogicsMobile/image/Tulips.jpg; SubjectType=File; }; FileFolderDetails=anyType{ID=125; Name=Jellyfish.jpg; URL=InterLogicsMobile/image/Tulips.jpg; SubjectType=File; }; FileFolderDetails=anyType{ID=126; Name=Koala.jpg; URL=InterLogicsMobile/image/Tulips.jpg; SubjectType=File; }; FileFolderDetails=anyType{ID=127; Name=Lighthouse.jpg; URL=InterLogicsMobile/image/Tulips.jpg; SubjectType=File; }; FileFolderDetails=anyType{ID=128; Name=Jellyfish.jpg; URL=InterLogicsMobile/image/Tulips.jpg; SubjectType=File; }; FileFolderDetails=anyType{ID=129; Name=Jellyfish.jpg; URL=InterLogicsMobile/image/Tulips.jpg; SubjectType=File; }; FileFolderDetails=anyType{ID=130; Name=Jellyfish.jpg; URL=InterLogicsMobile/image/Tulips.jpg; SubjectType=File; }; FileFolderDetails=anyType{ID=131; Name=Jellyfish.jpg; URL=http
03-19 10:59:08.917: I/System.out(789): 41
03-19 10:59:09.527: D/dalvikvm(789): GC_CONCURRENT freed 571K, 9% free 8012K/8711K, paused 23ms+26ms
03-19 10:59:12.787: D/dalvikvm(789): GC_FOR_ALLOC freed 11K, 5% free 8352K/8711K, paused 49ms
03-19 10:59:12.857: D/dalvikvm(789): GC_FOR_ALLOC freed 1K, 3% free 8712K/8967K, paused 50ms
03-19 10:59:12.937: D/dalvikvm(789): GC_FOR_ALLOC freed <1K, 4% free 9163K/9479K, paused 48ms
03-19 10:59:15.427: I/System.out(789): 13003
03-19 10:59:15.427: I/DocumentID(789): 13003
03-19 10:59:15.837: D/dalvikvm(789): GC_CONCURRENT freed 328K, 5% free 9581K/10055K, paused 23ms+5ms
03-19 10:59:15.867: I/DocumentResponse(789): UEsDBBQABgAIAAAAIQAJJIeCgQEAAI4FAAATAAgCW0NvbnRlbnRfVHlwZXNdLnhtbCCiBAIooAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAC0lE1Pg0AQhu8m/geyVwPbejDGlPag9ahNrPG8LkPZyH5kZ/v17x1KS6qhpVq9kMAy7/vMCzOD0UqX0QI8KmtS1k96LAIjbabMLGWv08f4lkUYhMlEaQ2kbA3IRsPLi8F07QAjqjaYsiIEd8c5ygK0wMQ6MHSSW69FoFs/407IDzEDft3r3XBpTQAT4lBpsOHgAXIxL0M0XtHjmsRDiSy6r1+svFImnCuVFIFI+cJk31zirUNClZt3sFAOrwiD8VaH6uSwwbbumaLxKoNoInx4Epow+NL6jGdWzjX1kByXaeG0ea4kNPWVmvNWAiJlrsukOdFCmR3/QQ4M6xLw7ylq3RPt31QoxnkOkj52dx4a46rppLbYq+12gxAopFNMvv6CcVfouFXuRFjC+8u/UeyJd4LkNBpT8V7CCYn/MIxGuhMi0LwD31z7Z3NsZI5Z0mRMvHVI+8P/ou3dgqiqYxo5Bz4oaFZE24g1jrR7zu4Pqu2WQdbizTfbdPgJAAD//wMAUEsDBBQABgAIAAAAIQAekRq38wAAAE4CAAALAAgCX3JlbHMvLnJlbHMgogQCKKAAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAjJLbSgNBDIbvBd9hyH032woi0tneSKF3IusDhJnsAXcOzKTavr2jILpQ217m9OfLT9abg5vUO6c8Bq9hWdWg2JtgR99reG23iwdQWchbmoJnDUfOsGlub9YvPJGUoTyMMaui4rOGQSQ+ImYzsKNchci+VLqQHEkJU4+RzBv1jKu6vsf0VwOamabaWQ1pZ+9AtcdYNl/WDl03Gn4KZu/Yy4kVyAdhb9kuYipsScZyjWop9SwabDDPJZ2RYqwKNuBpotX1RP9fi46FLAmhCYnP83x1nANaXg902aJ5x687HyFZLBZ9e/tDg7MvaD4BAAD//wMAUEsDBBQABgAIAAAAIQB8O5c5IgEAALkDAAAcAAgBd29yZC9fcmVscy9kb2N1bWVudC54bWwucmVscyCiBAEooAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKyTTU+EMBCG7yb+B9K7FFZdjdmyFzXZq67x3C1TaISWdMYP/r0VswrKogcuTWaavs/TSbtav9VV9AIejbOCpXHCIrDK5cYWgj1sb08uWYQkbS4rZ0GwFpCts+Oj1R1UksIhLE2DUUixKFhJ1FxxjqqEWmLsGrBhRztfSwqlL3gj1ZMsgC+SZMl9P4Nlg8xokwvmN/kpi7ZtE8h/ZzutjYJrp55rsDSC4AhE4WYYMqUvgATbd+Lgyfi4wuKAQm2Ud+g0xcrV/JP+Qb0YXowjtRXgo6HyRmtQ1Mf/3JrySA94jIz5H6PoyL1BdPUUfjknnsILgW96V/JuTacczud00M7SVu6qnsdXa0ribE6JV9jd/3qVveZehA8+XPYOAAD//wMAUEsDBBQABgAIAAAAIQDppZXbCQMAAG8LAAARAAAAd29yZC9kb2N1bWVudC54bWzMVltv2jAUfp+0/2DlvSRQxlBUqLTBUB8mVWunPU4mcRIL32QbMvbrd+wkXBqgNH0ZSJA4Pt/5zuU7zt39H87QhmhDpZgE/V4UICISmVKRT4Kfz99uxgEyFosUMynIJNgSE9xPP364K+NUJmtOhEUAIUxcqmQSFNaqOAxNUhCOTY/TREsjM9tLJA9lltGEhKXUaTiI+pG/UlomxBjw9xWLDTZBDcfbaFIRAb4yqTm2pid1HnKsV2t1A+gKW7qkjNotYEejBkZOgrUWcU3oZkfImcQVofqvsdCtKE74rSxndQa8x1ATBhykMAVV+zC6okGIRUNpcymIDWfNvlL1hy1/u5CvqcFM4xJKsQdswZ1IRloZcVblwdV3X9WXiP3oUjB1RRzEjsM1FI59Nkw4pmIH0y01h8kFRbynvxdartWOjqLvQ3sQqx2WE+YbmEUjr7zD0MybAFrSfSqwIgHiSfyQC6nxkgGjsj9EriODKQyLpUy37l+hMoZhk/6YBFE0H4zGw3nQLM1IhtfM+ifjUXQ795bQSjKbaw277FYBrlGEsSeLtQ1CB6ndj53OuLkL3YX79WunLeciPbRz4yY2CieArDQxRG9IMEVXQbVJwNxbXWV6HQsYdUjTvLCo6yeRaoswY0ekIEGqXYwq5ZeLUeX6dM6aaYhMIUtznMHuHltFzDXm7cT/KohAqCRHcUKYL5vHWV+Xezfo0MMzogIJUqJUloJJnJL0TCma4/C4C7sHvpRy5Y43HytUhaYgDKcVgTn06u+F/IKTVdXKzV6IbLcTtNHNuRfVsU5fa40OJr7/XlbnnLSz1H9fK643r6v7P8feM 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T05:31:22.933

```
 try {
                    ht.call(SOAP_ACTION, envelope);

                    final SoapPrimitive response = (SoapPrimitive) envelope.getResponse();
                    String str =DocumentResponse.toString();

                        byte[] decodedString = Base64.decode(str, Base64.DEFAULT);

                   File direct = new File(Environment.getExternalStorageDirectory() + "/Foldername");

                      if(!direct.exists())
                      {
                          direct.mkdir();
                      }

                    File photo=new File(Environment.getExternalStorageDirectory() + "/Foldername",Filename);

                  if (photo.exists())
                  {
                        photo.delete();
                  }

                  try {
                    FileOutputStream fos=new FileOutputStream(photo.getPath());

                    fos.write(decodedString);
                    fos.close();

                    ContentValues values= new ContentValues();

                  }
                  catch (java.io.IOException e) 
                  {
                    Log.e("PictureDemo", "Exception in photoCallback", e);
                  }
                }

                catch (Exception e) {
                e.printStackTrace();
            } 
```

将您的字符串转换为 Base64 解码。

示例：byte[] decodeString = Base64.decode(str, Base64.DEFAULT);

使用该字节将文件保存在 SDCard 中。

示例：fos.write(decodedString);

# java - CipherInputStream 和 CipherOutputStream 不生成文件

> ID：15470222
> 
> 赞同：0
> 
> 时间：2013-03-18T05:21:36.283
> 
> 标签：java, encryption

我有以下代码。但是文件`b.xlsx`和`c.xlsx`0 字节。为什么`CipherOuputSteam`不工作？

```
public static void main(String[] args) throws Exception {

    KeyPair keys = KeyPairGenerator.getInstance("RSA").generateKeyPair();
    Cipher cipher = Cipher.getInstance("RSA");

    cipher.init(Cipher.ENCRYPT_MODE, keys.getPublic());

    FileInputStream fis;
    FileOutputStream fos;
    CipherOutputStream  cos;

    fis = new FileInputStream("C:/temp/a.xlsx");
    fos = new FileOutputStream("C:/temp/b.xlsx");

    cos = new CipherOutputStream (fos, cipher);

    byte[] block = new byte[8];
    int i;
    while ((i = fis.read(block)) != -1) {
        cos.write(block, 0, i);
    }
    cos.close();
    fos.close();

    cipher.init(Cipher.DECRYPT_MODE, keys.getPrivate());
    CipherInputStream cis1, cis2;
    fis = new FileInputStream("c:/temp/b.xlsx");
    CipherInputStream cis = new CipherInputStream(fis, cipher);
    fos = new FileOutputStream("c:/temp/c.xlsx");

    while ((i = cis.read(block)) != -1) {
        fos.write(block, 0, i);
    }
    fos.close();
    fis.close();
    cis.close();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T08:52:29.810

问题在于您的用法-这是不正确的，并且在实现中`CipherOutputStream`掩盖了一个非常重要的异常- `IllegalBlockSizeException`。

问题是您不能使用 RSA 密钥来加密比密钥大小（在您的示例中为 128 字节）长的数据。您应该对大块数据使用对称加密算法 - 例如**AES**。

如果您出于某种原因（例如安全传输数据）想使用非对称密钥 - 您可以在这个[SO answer](https://stackoverflow.com/a/10007285/357360)上找到一个很好的例子。

# c++ - 在单行上使用 `printf` 和字符串格式

> ID：15470225
> 
> 赞同：-5
> 
> 时间：2013-03-18T05:22:23.850
> 
> 标签：c++

我在使用时遇到问题`printf`——输出没有显示在一行上。我不想包含该`cout`函数的库。

这是我打印数据的代码：

```
std::string data;
data = "john";
printf("%s is at home",data.c_str()); 
```

输出如下：

```
john
 is at home 
```

如何使所有文本出现在一行上？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T05:28:30.380

这不会发生在我身上。此[键盘](http://codepad.org/5bmOAaoP)正在使用您提供的代码。

# linux - 如何在 node.js 应用程序中接收外部程序事件并影响当前的 Socket.IO 连接？

> ID：15470227
> 
> 赞同：3
> 
> 时间：2013-03-18T05:22:44.407
> 
> 标签：linux, node.js, express, socket.io

我正在使用一个程序（钢琴条），它可以选择在某些事件发生时运行程序。我想从这些事件中获取信息到我的 node.js 应用程序中，这样我就可以将它发送到通过 socket.io 连接的客户端。

到目前为止，我想出的最好的想法是有一个中间件程序，它从钢琴条中获取输入并将其写入文件。然后我可以使用`fs.watchFile`.

有没有更好/更清洁/更直接的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T19:36:47.967

根据涉及的数据量，最简洁的解决方案是遵循 tjameson 的建议并将数据发布到您的 node.js 应用程序。这样您就可以在您的应用程序中使用标准 HTTP，而无需求助于使用一次性文件方法。并且您可以使用 cURL 等标准工具快速、干净地编写客户端程序。

# php - jQuery 不能与 phpfreechat 一起使用？

> ID：15470233
> 
> 赞同：1
> 
> 时间：2013-03-18T05:23:18.123
> 
> 标签：php, jquery, html

我在网页中调用此代码时遇到问题：

```
<?php $chat->printChat(); ?> 
```

这行代码调用了使用prototype.js 1.6.0.2 的聊天室(phpfreechat) 在我调用它之后，我的jQuery.js 停止工作。但是当我在调用聊天之后调用我的 jQuery.js 时，jQuery 可以工作，但聊天似乎不起作用。我怎样才能让这两个 javascript 在我的网页中工作？tnx 的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T05:24:34.233

使用`jQuery.noConflict()`，因为您正在使用`prototype`，因此与`jQuery`.

> **说明：**放弃 jQuery 对`$`变量的控制。
> 
> 许多 JavaScript 库都使用`$`函数或变量名，就像这样`jQuery`做一样。In `jQuery's`case,`$`只是 的别名`jQuery`，因此所有功能都可以在不使用`$`. 如果您需要同时使用另一个 JavaScript 库`jQuery`，请通过调用 将控制权`$`返回给另一个库`$.noConflict()`。的旧引用在初始化`$`期间被保存；只是恢复它们。`jQuery``noConflict()`

### **[阅读更多](http://api.jquery.com/jQuery.noConflict/)**

**例子**

```
jQuery.noConflict();

// Use jQuery via jQuery(...)
jQuery(document).ready(function()
{
    jQuery("div").hide();
}); 
```

**或者**

```
var $jQ = jQuery.noConflict();

// Use jQuery via $jQ(...)
$jQ(document).ready(function()

{
    $jQ("div").hide();
}); 
```

使用以下技术，它允许我们`$`在代码块内部使用而不覆盖`$`：

```
(function($) { /* some code that uses $ */ })(jQuery) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T05:28:22.917

最好的方法是将所有 jQuery 代码包装在自执行函数中，其中 jQuery 作为参数传递。

```
(function ($) {

  // Your jQuery code which can safely use `$`
  ..
  ..

}(jQuery)); 
```

你也可以使用，

```
jQuery(document).ready(function($) {
  ...

  //Your jQuery code with which can safely use `$`
  ..

}); 
```

# sql - 加入同一张表给出重复的信息

> ID：15470249
> 
> 赞同：1
> 
> 时间：2013-03-18T05:24:20.943
> 
> 标签：sql, sql-server, sql-server-2008, join

我想加入同一张桌子以获取一些信息。

我有一个**人表**

```
PersonId, FirstName, LastName, Address 
```

还有**病人表**

> PatientId、PersonId、ResponsiblePersonId

以下是我尝试获取患者名字、姓氏以及负责人名字、姓氏的查询。为此，我再次加入 Person 表以获取责任人的名字和姓氏。

**但是我有很多重复的记录。**

```
SELECT   PAT.PatientId

        ,PER.PersonNumber
        ,PER.FirstName
        ,PER.LastName
        ,RES_PER.FirstName AS ResFirstName
        ,RES_PER.LastName AS ResLastName
        ,PER.Address                

FROM        dbo.Patient AS PAT
INNER JOIN  dbo.Person AS PER
    ON  PAT.PersonId = PER.PersonId
INNER JOIN  dbo.Person AS RES_PER
    ON  PAT.ResponsiblePersonId = PER.PersonId 
```

如何获取患者记录的患者名字、姓氏和负责人的名字、姓氏？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T05:27:12.560

基本上，您需要在 table`Person`上连接 table 两次`Patient`才能获得两个依赖列。

```
SELECT  b.FirstName Patient_FirstName, 
        b.LastName Patient_LastName,  
        b.Address Patient_Address,
        c.FirstName Responsible_Firstname, 
        c.LastName Responsible_LastName, 
        c.Address Responsible_Address
FROM    Patient a
        INNER JOIN Person b
            ON a.PersonID = b.PersonID
        INNER JOIN Person c
            ON a.ResponsiblePersonId = c.PersonID 
```

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T05:36:06.103

您需要做的就是在 SQL 的最后一点`PER`替换为。`RES_PER`（即 PER.PersonId 变为 RES_PER.PersonId）。

```
SELECT   PAT.PatientId
        ,PER.PersonNumber
        ,PER.FirstName
        ,PER.LastName
        ,RES_PER.FirstName AS ResFirstName
        ,RES_PER.LastName AS ResLastName
        ,PER.Address                

FROM        dbo.Patient AS PAT
INNER JOIN  dbo.Person AS PER
    ON  PAT.PersonId = PER.PersonId
INNER JOIN  dbo.Person AS RES_PER
    ON  PAT.ResponsiblePersonId = RES_PER.PersonId 
```

# hibernate - 如何在 MySQL 上使用 Hibernate 批量插入递增的 ID？

> ID：15470251
> 
> 赞同：2
> 
> 时间：2013-03-18T05:24:26.693
> 
> 标签：hibernate, auto-increment

我正在尝试使用 Hibernate 插入 n 条记录。标准就像从表中获取 MAX ID 并增加 ID 并保存记录。ID就像`TK020001`。

我得到了最大 ID 并增加了第一条记录。对于第二条记录，它必须采用最大 ID，但它采用前一个最大值。插入第一条记录后，我关闭了会话并刷新。

谁能给我最好的方法来插入这种情况下的记录（MySQL）？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-10-15T12:33:11.567

尝试为您的连接将事务隔离级别设置为 READ_UNCOMMITTED。

```
Work w = new Work()
{
    @Override
    public void execute(Connection connection) throws SQLException
    {
        connection.setTransactionIsolation(Connection.TRANSACTION_READ_UNCOMMITTED);
    }
};

session.doWork(w); 
```

不要忘记将隔离级别设置回默认级别！在我的公司，我们有一个小实用程序类，它保存默认级别并设置 READ_UNCOMMITTED （或任何其他）。动作完成后，我们再次使用漂亮的小实用程序将其设置回来。

# codeigniter - Codeigniter 路由器设置

> ID：15470257
> 
> 赞同：0
> 
> 时间：2013-03-18T05:24:54.017
> 
> 标签：codeigniter, codeigniter-2, router

**我的网站在 Codeigniter 上运行。我需要帮助来使用*router.php调整 URI***

目前我有一个这样的网址 -

```
http://www.mysite.com/search/use_advanced/true/from_tmstmp_deal_duration/1363581836/to_tmstmp_deal_duration/1371357836/ 
```

我想将其掩盖为-

```
http://www.mysite.com/deals/ 
```

也就是说，当用户点击这个url时，它会像上面的长url一样工作，但在浏览器地址栏中，它仍然会显示[http://www.mysite.com/deals/](http://www.mysite.com/deals/)

**注意**：在长 url 中，1363581836 是当前的 unix 时间戳，1371357836 是未来 90 天的 unix 时间戳。

在 routes.php -

```
$route['default_controller'] = "frontend";
$route['scaffolding_trigger'] = "";
$route['deals'] =
"search/use_advanced/true/from_tmstmp_deal_duration/$1/to_tmstmp_deal_duration/$2/"; 
```

在 frontend.module.php -

```
$route['deals/(.*)'] = array('title' => 'Deals','action' => 'search',); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T11:38:51.477

为什么不在**routes.php**中这样做：

```
$route['deals/(:any)'] = "search/use_advanced/$1"; 
```

# session - Meteor 0.5.9：在服务器方法中使用 Session 的替代品？

> ID：15470259
> 
> 赞同：2
> 
> 时间：2013-03-18T05:25:03.230
> 
> 标签：session, methods, client, meteor

所以，我试图做类似以下的事情：

```
if(Meteor.isServer){
    Meteor.methods({connect_to_api: function(vars){
        // get data from remote API
        return data;
    }});
}

if(Meteor.isClient){
    Template.myTpl.content = function(){
        Meteor.call('connect_to_api', vars, function(err,data){
            Session.set('placeholder', data);
        });
        return Session.get('placeholder');
    };
} 
```

这似乎工作正常，但是，当然，现在在 0.5.9 中中断，因为 Session 对象已从服务器中删除。您现在如何创建一个反应式模板，该模板使用仅服务器（我们不想在客户端上加载的东西）方法调用并从该方法调用中获取数据。您不能将任何 Session 引用放在回调函数中，因为它在服务器上不存在，而且我不知道任何其他可用于此场景的反应式数据源。

我对 Meteor 还很陌生，所以我真的在努力确定最有可能面向未来的最佳实践。显然上面的实现不是这样的。

编辑：澄清一下，这不是我从模板函数返回时的问题。这是服务器上存在 Session 的问题。上面的代码将在服务器上生成以下错误消息：

```
Exception while invoking method 'connect_to_api' ReferenceError: Session is not defined
at Meteor.methods.connect_to_api (path/to/file.js:#:#)
at _.extend.protocol_handlers.method.exception ... etc etc 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T23:19:35.957

在回调中设置会话似乎工作正常，请参阅我在 github 上创建的这个项目：[https](https://github.com/jtblin/meteor_session_test) ://github.com/jtblin/meteor_session_test 。在这个例子中，我在一个服务器方法中返回数据，并在回调的会话中设置它。

您的代码有两个问题：

1) 中缺少右括号放置`Meteor.methods`。代码应该是：

```
Meteor.methods({
    connect_to_api: function(vars) {
        // get data from remote API
        return data;
    }
}); 
```

2) 如上所述，在回调完成之前，即在回调方法有时间设置会话变量之前，您在会话中返回值。我想这就是为什么您还没有在会话变量中看到任何数据的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T04:35:55.423

我觉得自己像个白痴（不是第一次，也不是最后一次）。感谢 jtblin 向我展示了 Session.set 确实在回调中起作用，我回去检查了 Meteor.method 函数。原来在我使用 Session.get 的代码中隐藏了一个地方，这就是引发错误的原因。一旦我从客户端传递了该值，而不是尝试在方法本身中获取它，世界就一切正常。

哦，您确实可以毫无问题地订购上述物品。

# file - 如何在 2 个不同的文件中查找重复行？Unix

> ID：15470260
> 
> 赞同：18
> 
> 时间：2013-03-18T05:25:03.860
> 
> 标签：file, unix, diff, similarity

从 unix 终端，我们可以使用`diff file1 file2`来查找两个文件之间的差异。是否有类似的命令来显示 2 个文件的相似性？（如有必要，允许使用许多管道。

每个文件包含一行带有字符串的句子；它们被排序并用 删除重复的行`sort file1 | uniq`。

`file1`： http: [//pastebin.com/taRcegVn](http://pastebin.com/taRcegVn)

`file2`： http: [//pastebin.com/2fXeMrHQ](http://pastebin.com/2fXeMrHQ)

并且输出应该输出出现在两个文件中的行。

`output`： http: [//pastebin.com/FnjXFshs](http://pastebin.com/FnjXFshs)

我可以使用 python 来做到这一点，但我认为放入终端有点太多了：

```
x = set([i.strip() for i in open('wn-rb.dic')])
y = set([i.strip() for i in open('wn-s.dic')])
z = x.intersection(y)
outfile = open('reverse-diff.out')
for i in z:
  print>>outfile, i 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2014-03-03T20:27:07.800

如果您想在不使用 AWK 的情况下获取重复行的列表，可以使用[`-d`flag 到 uniq](http://unixhelp.ed.ac.uk/CGI/man-cgi?uniq)：

```
sort file1 file2 | uniq -d 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-03-18T05:34:26.323

正如@tjameson 提到的，它可能会在另一个线程中解决。只是想发布另一个解决方案： `sort file1 file2 | awk 'dup[$0]++ == 1'`

1.  请参阅[awk 指南](http://www.gnu.org/software/gawk/manual/gawk.html)以获取一些 awk 基础知识，当一行的模式值为 true 时，将打印该行

2.  dup[$0] 是一个哈希表，其中每个键是输入的每一行，原始值是 0，一旦出现这一行就会增加，当再次出现时，值应该是 1，所以`dup[$0]++ == 1`是真的。然后打印这一行。

请注意，这仅在任一文件中没有重复项时才有效，如问题中所述。

# html - 从 HTML5 本地存储导出数据在 Phonegap 上不起作用

> ID：15470263
> 
> 赞同：1
> 
> 时间：2013-03-18T05:25:28.280
> 
> 标签：html, local-storage, export-to-excel, phonegap-build

[我正在尝试使用Phonegap Build](https://build.phonegap.com)的编译服务从 HTML5 localStorage 导出数据。导出功能在 PC 上运行良好，但在编译到移动应用程序时却不行。单击导出按钮时，没有任何反应。它应该将文件下载到移动设备。保存、编辑和删除等其他功能在 PC 和移动设备上都可以正常工作。

有什么建议吗？

我一直在尝试这[两个](http://docs.phonegap.com/en/2.5.0/cordova_file_file.md.html#File)`data:application/csv;charset=utf-8` 例子。他们都没有工作。

# java - 流口水类加载的问题

> ID：15470266
> 
> 赞同：4
> 
> 时间：2013-03-18T05:25:47.797
> 
> 标签：java, junit, drools, business-rules

我的口水有问题，但我无法定义究竟是什么问题对糟糕的解释感到非常抱歉。这是我的drl文件：

```
#created on: 17.05.2012
package ru.abc.one.rules;
import ru.abc.one.entity.application.KBKIForm;

rule "1 risc category" 
    when 
        kbkiForm : KBKIForm
        (
            creditHistoryClassification.contains("Положительная абсолютно") 
|| 
creditHistoryClassification.contains("Положительная существенно") && kup > 0 && kup < 1 
        )  
    then
        kbkiForm.setClientRiskCategory("1");
    end 
```

我的测试代码：

```
 KnowledgeBase kbase = readKnowledgeBase(path);
    StatefulKnowledgeSession ksession = kbase.newStatefulKnowledgeSession();
    ksession.insert(kbkiForm);
    ksession.fireAllRules(); 
```

这是我的错误信息：

```
2013-03-18 09:10:29,991 ERROR: Rule Compilation error The import ru.abc.one.entity.application cannot be resolved
ru.abc.one.entity.application cannot be resolved to a type [ru.abc.one.rules.RulesServiceTest] 
```

PS我真的需要你们的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-18T19:46:15.507

请在您的类路径 jar 文件中包含您要导入的类或类本身。

ru.abc.one.entity.application.KBKIForm

Drools 无法找到这个包，所以它抛出了这个错误。

希望这会有所帮助。

干杯！！

# iphone - 如何解析 WSDL 文件以及如何从 SAP 服务器发布和获取数据

> ID：15470270
> 
> 赞同：-1
> 
> 时间：2013-03-18T05:26:13.837
> 
> 标签：iphone, ios5

请帮助我如何使用 WSDL URL/文件以及如何从 SAP 服务器发布数据和获取数据

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T05:35:25.917

您可以使用 3rd 方 sdk 来使用 WSDL 服务，您可以通过在以下链接中输入您的 WSDL 服务 url 下载适合您的服务的 sdk，然后下载 sdk 并将其集成到您的项目中以便轻松使用 wsdl 服务。 [http://sudzc.com/](http://sudzc.com/)

同样，要检查 wsdl 服务响应，请使用此链接[http://www.soapclient.com/soaptest.html](http://www.soapclient.com/soaptest.html)

这将帮助你... :-)

# encoding - 如何将 Windows 控制台的默认编码设置为 UTF-8

> ID：15470271
> 
> 赞同：0
> 
> 时间：2013-03-18T05:26:14.103
> 
> 标签：encoding, utf-8

如题，右击窗口标题只提供编码436和937（我是中国人，请原谅我的英文不好），有没有办法在选项中添加“UTF-8”或“65001”？每次输入 chcp.com 65001 好烦。。。谢谢帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T05:42:02.307

您可以使用选项 /k "chcp 65001" 创建一个快捷方式来启动 utf-8 控制台。例如

```
cmd.exe /u /k "chcp 65001" 
```

# php - ModX Evo：document.parser.class.inc.php 中的 PHP 错误

> ID：15470293
> 
> 赞同：0
> 
> 时间：2013-03-18T05:28:15.273
> 
> 标签：php, content-management-system, modx, modx-evolution

所以我的 Evo 网站前几天停止工作 - 刚刚收到 500 错误。我让我的主机检查日志并发现：

```
[error] PHP Fatal error:  Cannot redeclare insert_metka() (previously declared in 
/home/mysite/public_html/manager/includes/document.parser.class.inc.php(790) : eval()'d code:2) 
in /home/mysite/public_html/manager/includes/document.parser.class.inc.php(790) : eval()'d code on line 12 
```

我已经厌倦了注释掉有问题的行并删除整个文件无济于事。有谁知道这意味着什么以及如何解决它？

编辑：第 790 行的代码：

```
 eval ($pluginCode); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T09:15:00.737

看起来一个糟糕的插件破坏了您的网站。禁用所有插件并一次恢复一个，直到它再次中断，然后您就知道哪个是罪魁祸首。

完成后，在此处发布插件代码，我们可以帮助您进一步调试。您永远不需要修改 MODX 源代码。

这个问题很可能通过`insert_metka()`像这样包装声明来解决：

```
if(!function_exists('insert_metka')) {
    function insert_metka() {
        // function code
    }
} 
```

[http://wiki.modxcms.com/index.php/Creating_Snippets#Wrap_functions_inside_.21function_exists_conditional_if_the_resource_is_needed_to_run_more_than_once_on_a_page](http://wiki.modxcms.com/index.php/Creating_Snippets#Wrap_functions_inside_.21function_exists_conditional_if_the_resource_is_needed_to_run_more_than_once_on_a_page)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T05:30:47.087

`Cannot redeclare insert_metka()`表示您要声明一个函数两次（可能与您的评估一起使用）。

您应该检查包含的文件。

为确保不包含超过一次，您可以使用`include_once`or`requiere_once`代替`include`and`requiere`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T05:32:24.480

根据`document.parser.class.inc.php`这条线，我猜你正在使用`OOP`.

所以你可以做的是`instantiation`为上面创建类，`class`然后`overwrite`是它。

还有其他事情。您可能`declaring`在相同的内部具有相同的功能`class`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T05:29:33.260

这似乎是一个非常简单的问题。你声明`insert_metka()`了两次。从上述文件之一中删除它。一旦它在保存的文件中声明，显然第二次你试图在帮助下声明它`eval()`

# java - 节点在通过函数时丢失对另一个对象的引用

> ID：15470294
> 
> 赞同：0
> 
> 时间：2013-03-18T05:28:17.943
> 
> 标签：java, oop

我正在使用双端队列进行分配，我们遇到了一个问题，即对象引用在通过一个非常简单的方法传递后从节点中消失。

一些重要的定义：

```
class Node {
    String s;
    Node prev;
    Node next;

    ...

}

class Sentinel extends Node {
    Node prev;
    Node next;
   //Constructor uses that of Node
}

class Deque {
    Sentinel start;

    ...
} 
```

我们正在编写的一种方法是根据给定的字符串从双端队列中删除一个节点。

在双端队列中：

```
public void removeSorted(String toRemove) {
    // System.out.println(this.start);
    // System.out.println(this.start.next);
    this.start.next.removeSorted(toRemove);
} 
```

注释掉的 println 显示正确的 Sentinel 和 Node。

然后，在节点中：

```
public void removeSorted(String toRemove) {
    if (this.s.equals(toRemove)) {
        // System.out.println(this.prev);
        // System.out.println(this.prev.next);
        this.prev.next = this.next;
        this.next.prev = this.prev;
    } else if (this.s.compareTo(toRemove) > 0) {
        throw new RuntimeException("String does not exist in these nodes!");
    } else {
        this.next.removeSorted(toRemove);
    }
} 
```

`this.prev`正如预期的那样，用于在第一次递归时输出 Sentinel的 println 。但是，this.prev.next 输出 null 而不是 Node。

此功能仅在尝试删除第一个节点时失败，直接在 Sentinel 之后。如果您尝试删除任何其他节点，它会正常工作，并且尝试调用`this.prev.next`会导致非空答案。

为什么在传递给函数时（立即）引用消失了，因为我们已经证明在调用函数之前引用就在那里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T05:46:50.693

`Node`要么您的问题代码错误，要么您在和 中都有相同的字段`Sentinel`。这意味着，这两个是不同的：

*   `start.next`是`next`Sentinel 类的字段，它*隐藏*了 Node 类中的同名字段。
*   `start.next.prev.next`也是 的一个字段`start`，但现在它是 Node 类的字段，因为您通过 Node 引用访问它。

从 Sentinel 中移除`prev`和移除。`next`实际上删除整个哨兵，看起来你习惯于“删除” `String s`，这是不可能的，你不能“删除”超类字段。或者，如果您需要/想要哨兵，请参阅下面的替代设计。

此外，这说明了为什么您应该使用*getter*和*setter*而不是直接访问字段...您的 IDE 可能有很好的重构工具来添加 getter 等（右键单击字段，请参阅“重构”子菜单），使用它！如果您的 IDE 没有，请切换到有的（我更喜欢 NetBeans，但 Eclipse 和 IntelliJ 也值得），在没有这样的 IDE 的情况下编写 Java 是一种自虐练习......

* * *

此外，在 Java 中避免这种继承。你可能应该有这样的整体设计：

```
interface NodeInterface {...}
public class Node implements NodeInterface {...}
public class Sentinel implements NodeInterface {...} 
```

然后在 中`NodeInterface`，定义 getter 和 setter，它们应该作为参数和返回`NodeInterface`类型。`Sentinel`类当然不会支持所有接口方法，因此这些方法可以`return null;`/不做任何事情，或者[`throw new IllegalStateException("Sentinel does not support Xxxx.");`](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/IllegalStateException.html)取决于方法，如果为哨兵调用该方法是否是调用代码中的错误（最好从抛出异常开始）。

如果这是学校作业并且您还没有研究过接口，那么替换`interface NodeInterface`为`class NodeBase`（最好是抽象的），但在“现实世界”中，这将是糟糕的代码，因为 Java 不支持多重继承。

# javascript - 如何使用动态 HTML 数据实现更多和更少的功能？

> ID：15470297
> 
> 赞同：0
> 
> 时间：2013-03-18T05:28:36.893
> 
> 标签：javascript, html

我有一个 JSP 页面，我需要在其中显示一个具有来自数据库表字段的 HTML 的 DIV（其数据输入字段是 TinyMCE）。我必须实现越来越少的功能（例如[http://viralpatel.net/blogs/demo/jquery/show-more-link-shortened-content/](http://viralpatel.net/blogs/demo/jquery/show-more-link-shortened-content/)）。我不能做 substring 因为它可能会在它们之间剪切一些 HTML 标签，并且一些标签可能保持未关闭状态，这会影响我的 UI。而且我无法根据 DIV 的高度显示和隐藏，因为字体由 TinyMCE 控制，不同的行可能有不同的字体大小，这可能会导致最后一行部分显示。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T05:50:52.247

在获取之后和显示期间应用 jquery truncate 插件，但请确保将以下属性应用于 div

```
word-wrap:break-word 
```

# c# - 如何过滤类属性集合？

> ID：15470298
> 
> 赞同：2
> 
> 时间：2013-03-18T05:28:40.937
> 
> 标签：c#, collections, properties, filter

示例：我有这门课

```
public class MyClass
{
    private string propHead;
    private string PropHead { get; set; }

    private int prop01;
    private int Prop01 { get; set; }

    private string prop02;
    private string Prop02 { get; set; }

    // ... some more properties here

    private string propControl;
    private string PropControl { get; }  // always readonly
} 
```

我需要排除 propHead 和 propControl。要排除 propControl：

```
MyClass mc = new MyClass();
PropertyInfo[] allProps = mc.GetType().GetProperties().Where(x => x.CanWrite).ToArray(); 
```

现在，当所有人共享相同级别的可访问性时，我怎么能排除 propHead？有什么方法可以向 propHead 添加一个特殊属性，让我将其排除在其他属性之外。每个类中的属性名称总是不同的。

任何建议都会非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T05:31:34.807

这将是最简单的方法：

```
MyClass mc = new MyClass();
PropertyInfo[] allProps = mc.GetType()
    .GetProperties()
    .Where(x => x.Name != "propHead" && x.Name != "propControl")
    .ToArray(); 
```

但如果你正在寻找更通用的解决方案，你可以试试这个

```
public class CustomAttribute : Attribute
{
    ...
}

MyClass mc = new MyClass();
PropertyInfo[] allProps = mc.GetType()
    .GetProperties()
    .Where(x => x.GetCustomAttributes(typeof(CustomAttribute)).Length > 0)
    .ToArray(); 
```

# dart - 如何在 Dart 中使用 animationFrame？

> ID：15470299
> 
> 赞同：5
> 
> 时间：2013-03-18T05:28:44.687
> 
> 标签：dart, dart-html

以下代码抛出异常`"type '([int]) => void' is not a subtype of type 'RequestAnimationFrameCallback' of 'callback'."`

```
import 'dart:html';

void main() {
  window.animationFrame.then((time) => print("test"));
} 
```

如果我更改`window.animationFrame.then`为`window.requestAnimationFrame`，一切都会按预期进行。我是否误解了 Dart 期货的运作方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T08:32:44.047

用法看起来不错。

您正在运行的旧版本尚未实现文档中指定的行为，或者它只是一个错误。我会继续在[http://dartbug.com/new上提出问题](http://dartbug.com/new)

# entity-framework - 您可以选择实体集合的所有子集合作为单个集合吗？

> ID：15470303
> 
> 赞同：3
> 
> 时间：2013-03-18T05:29:26.317
> 
> 标签：entity-framework, c#-4.0, linq-to-entities

我有一个“ParentEntity”的集合，每个都有一个“ChildEntity”的集合。

我想选择所有 ChildEntity 作为一个集合。

```
var children = from p in parents
 select p.Children; 
```

返回 ChildEntity 集合的集合？

我想获得所有孩子的单一集合，而不是集合的集合。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-18T05:45:14.920

```
var children=parents.SelectMany(p=>p.Children) 
```

# javascript - 通过具有异步属性的 HTML5 脚本标签的 Javascript 执行顺序

> ID：15470311
> 
> 赞同：0
> 
> 时间：2013-03-18T05:29:56.520
> 
> 标签：javascript, html, asynchronous

阿罗哈。我一直在编写脚本，虽然我了解问题的每个组成部分的文档（并且查看了关于 SO 的许多其他问题），但我在实践中不了解这种特定行为。请注意，以下代码是隔离特定问题的缩写子集。这里是`async.html`：

```
<!doctype html>
<html><head><script type="text/javascript" src="asyncTest.js" async="true"></script></head>
<body><ul id="menu"><li>one</li><li>two</li><li>three</li></ul></body></html> 
```

这是`asyncTest.js`：

```
var _site = function() {
  var load = function() {
    var menuCategory = document.getElementById('menu').getElementsByTagName('li');
    for(var i=0; i<menuCategory.length; i++) { alert(i+'['+menuCategory[i]+']'); }
  };

  return { load:load };
}();
window.addEventListener('load',_site.load(),false); 
```

问题是如果没有标签`async`中的属性`<script>`，这段代码不能正确地将`<li>`元素存储到`menuCategory`中，就好像它在加载 DOM 之前运行一样（即使我认为它应该在整个`window`“对象”加载后触发）。我觉得这很奇怪，因为我`addEventListener()`只在整个加载完成后才使用时间”）。如果有的话，我认为相反的情况会导致这种行为。

有人可以解释一下吗，最好使用旧的爱因斯坦“像向六岁的孩子解释一样解释”？我显然在阅读中遗漏了一些东西。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T08:27:26.043

正如 RobG 在评论中提到的，这里的问题是使用`_site.load()`（在调用后带有括号）导致函数被执行，然后分配给`onload`事件。将此行为纠正为所需功能的方法是在不带括号的情况下调用它：（`_site.load`或`_site().load`）。

# c# - asp.net mvc4 EF5 单例？

> ID：15470319
> 
> 赞同：-1
> 
> 时间：2013-03-18T05:30:53.407
> 
> 标签：c#, entity-framework, asp.net-mvc-4

我有一个项目正在进行，我想要一个类的唯一实例。

我有一个“JobOffer”类，它具有“OfferStatus”类型的属性（它是抽象的并实现了状态模式）。我有 'StateAvailable' 和 'StateUnavailable' （如果你愿意，也有 'open' 和 'close'）。“JobOffer”对象必须存储在数据库中。

我只想有一个“StateAvailable”和一个“StateUnavailable”，所以当我创建一个新的 JobOffer 时，我会引用“StateAvailable”或“StateUnavailable”，然后我可以列出所有打开（可用）的 jobOffer 和所有已关闭（不可用）。

我知道我可以通过在种子方法中添加数据库中的状态来做到这一点，并且永远不会实例化新状态。但我想知道是否有可能做一个单例或一些事情来避免某人（我的意思是控制器、模型或任何东西）可以创建该类的新实例。

```
public class JobOffer {
public int JobOfferId {get;set;}
public OfferState State {get;set;
public virtual ICollection<Person> People {get;set;}

//And some methods here, which depends on the state
//ie, this.State.myMethod(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T12:23:03.850

我的第一个想法是使用布尔值。然后你说你必须能够扩展以拥有更多的状态，所以我想到了一个枚举。然后你说你有这个使用类的要求，所以......当我想要一个更聪明的枚举时，这是我使用的一些东西。我想你可以称它为一种“枚举类”。因此，您的`OfferState`课程如下所示：

```
public sealed class OfferState
{
    public bool CanChangeState { get; set; }
    //whatever properties you need

    public static OfferState Available = new OfferState(true);
    public static OfferState Unavailable = new OfferState(true);
    public static OfferState Closed = new OfferState(false);
    //whatever states you need

    public OfferState(bool canChange)
    {
        CanChangeState = canChange;
    }
} 
```

这有点像枚举，但它具有类的属性。因此，在您的逻辑中，您可以检查状态：

```
if (jobOffer.State == OfferState.Available)
{
    //stuff
} 
```

您还可以从中获取属性，因此您可以使用它来获取有关状态的信息：

```
jobOffer.ExpiryDate = jobOffer.CreationDate.Add(OfferState.Available.MaxDuration); 
```

当然，`static`各个州的性质将确保每个州只有一个实例。

# excel - excel中部分匹配的字符串

> ID：15470320
> 
> 赞同：0
> 
> 时间：2013-03-18T05:31:06.740
> 
> 标签：excel, excel-formula

我今天正在做一些研究，我遇到了一个问题。我需要对所有一列字符串进行“计数”，但前提是它们与某个字符串匹配。哪怕只是一部分。

例子

```
List of Movie Titles

---------------  
- Inception       
- Mulan       
- Inception     
- Inception
- The Dark Knight
- The Dark Knight
- The White Knight
- Some Knight 
```

假设我想知道包含“骑士”的标题出现了多少次，我该如何计算呢？

我在下面添加了我自己的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T05:31:06.740

这样做的方法：

```
=COUNTIFS(A:A,"*" & "Knight" & "*") 
```

设置一个计数，并说明该列。这是众所周知的一点。

陈述标准的方法是首先说`"*"`，它将匹配任何与 a 连接的字符，`"Knight"`然后最后再次与 a 连接`"*"`。

这将匹配其中包含部分字符串`"Knight"`的任何内容。

# php - 我需要做什么来更正这个 SQL 语句？

> ID：15470327
> 
> 赞同：3
> 
> 时间：2013-03-18T05:31:49.203
> 
> 标签：php, mysql, sql, join

我有以下表格：

1.  `products`- 包含库存中的产品。
2.  `suppliers`- 包含供应商详细信息。
3.  `product_category`- 包含产品类别的名称。
4.  `product_suppliers`- 包含产品和供应商之间的关系。

这里重要的可能是 , `product_suppliers`，所以这里是列：

```
id //(auto-increment)  
prod_id //(id of product)  
sup_id //(id of supplier)  
preferred //(1 if it's the preferred supplier for that product - 0 if not)  
cost_per_outer //(this suppliers price for this item)  
qty_in_outer //(the number in a box) 
```

该`product`表在存储产品详细信息的同时，还有一个用于`stock_level`和的字段`reorder_level`。当前者小于后者时，该产品应列入重新订购清单。

我正在尝试为列表构建查询，但工作不正常。

我有 4 件商品符合重新订购的条件，影响到两家供应商。每个供应商应该有两个项目，但目前它只检索第一个供应商的结果。

我正在使用 MySQL 和 PHP。

我运行了以下查询，让我们对数据库中的实际数据有一些了解：

```
mysql> SELECT
    ->         p.prod_id,
    ->         AES_DECRYPT(p.alt_id, 'MW4KQLg1Irfo3Xz7Nxht')                         AS sku,
    ->         AES_DECRYPT(p.prod_name, 'MW4KQLg1Irfo3Xz7Nxht')                      AS prod_name,
    ->         AES_DECRYPT(p.prod_type, 'MW4KQLg1Irfo3Xz7Nxht')                    AS prod_type,
    ->         AES_DECRYPT(p.stock_level, 'MW4KQLg1Irfo3Xz7Nxht')                    AS stock_level,
    ->         AES_DECRYPT(p.reorder_level, 'MW4KQLg1Irfo3Xz7Nxht')            AS reorder_level,
    ->         AES_DECRYPT(c.category_name, 'MW4KQLg1Irfo3Xz7Nxht')            AS category_name,
    ->         ps.sup_id,
    ->         ps.preferred
    -> FROM
    ->         products p
    -> INNER JOIN
    ->         product_category c
    ->   ON
    ->         p.category_id = c.category_id
    -> INNER JOIN
    ->         product_supplier ps
    ->   ON
    ->         p.prod_id = ps.prod_id
    -> INNER JOIN
    ->         suppliers s
    ->   ON
    ->         ps.sup_id = s.supplier_id
    -> ORDER BY
    ->         ps.sup_id;
+---------+------+-----------------+-----------+-------------+---------------+---------------+--------+-----------+
| prod_id | sku  | prod_name       | prod_type | stock_level | reorder_level | category_name | sup_id | preferred |
+---------+------+-----------------+-----------+-------------+---------------+---------------+--------+-----------+
|       7 | 7    | Term Block      | 1         | 3           | 5             | Electrical    |      2 |         1 |
|       5 | 5    | Electrical Tape | 1         | 12          | 20            | Electrical    |      2 |         1 |
|       6 | 6    | BlowGas         | 1         | 6           | 15            | Plumbing      |     12 |         1 |
|       1 | 1    | PTFE Tape       | 1         | 9           | 10            | Plumbing      |     12 |         1 |
+---------+------+-----------------+-----------+-------------+---------------+---------------+--------+-----------+ 
```

这是列表的查询，结果只显示了我期望的四个项目中的两个：

```
mysql> SELECT
    ->         p.prod_id,
    ->         AES_DECRYPT(p.alt_id, 'MW4KQLg1Irfo3Xz7Nxht')                         AS sku,
    ->         AES_DECRYPT(p.prod_name, 'MW4KQLg1Irfo3Xz7Nxht')                AS prod_name,
    ->         AES_DECRYPT(p.prod_desc, 'MW4KQLg1Irfo3Xz7Nxht')                 AS prod_desc,
    ->         AES_DECRYPT(p.stock_level, 'MW4KQLg1Irfo3Xz7Nxht')                AS stock_level,
    ->         AES_DECRYPT(p.reorder_level, 'MW4KQLg1Irfo3Xz7Nxht')             AS reorder_level,
    ->         AES_DECRYPT(p.reorder_qty, 'MW4KQLg1Irfo3Xz7Nxht')               AS reorder_qty,
    ->         p.vat_exempt,
    ->         AES_DECRYPT(p.lastorderdate, 'MW4KQLg1Irfo3Xz7Nxht')            AS lastorderdate,
    ->         AES_DECRYPT(p.lastorderqty, 'MW4KQLg1Irfo3Xz7Nxht')               AS lastorderqty,
    ->         AES_DECRYPT(c.category_name, 'MW4KQLg1Irfo3Xz7Nxht')          AS category_name,
    ->         ps.sup_id
    -> FROM
    ->         products p
    -> INNER JOIN
    ->         product_category c
    ->   ON
    ->         p.category_id = c.category_id
    -> INNER JOIN
    ->         product_supplier ps
    ->   ON
    ->         p.prod_id = ps.prod_id
    -> INNER JOIN
    ->         suppliers s
    ->   ON
    ->         ps.sup_id = s.supplier_id
    -> WHERE
    ->         AES_DECRYPT(p.prod_type, 'MW4KQLg1Irfo3Xz7Nxht') = 1
    ->   AND
    ->           AES_DECRYPT(p.stock_level, 'MW4KQLg1Irfo3Xz7Nxht') <= AES_DECRYPT(p.reorder_level, 'MW4KQLg1Irfo3Xz7Nxht')
    ->   AND
    ->           ps.preferred = 1
    -> ORDER BY
    ->         ps.sup_id;
+---------+------+-----------------+------------------------+-------------+---------------+-------------+------------+---------------+--------------+---------------+--------+
| prod_id | sku  | prod_name       | prod_desc              | stock_level | reorder_level | reorder_qty | vat_exempt | lastorderdate | lastorderqty | category_name | sup_id |
+---------+------+-----------------+------------------------+-------------+---------------+-------------+------------+---------------+--------------+---------------+--------+
|       7 | 7    | Term Block      | Nylon connector block. | 3           | 5             | 20          |          0 | NULL          | NULL         | Electrical    |      2 |
|       5 | 5    | Electrical Tape | Black                  | 12          | 20            | 100         |          0 | NULL          | NULL         | Electrical    |      2 |
+---------+------+-----------------+------------------------+-------------+---------------+-------------+------------+---------------+--------------+---------------+--------+ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T07:05:34.287

问题是您的结果来自 AES_DECRYPT() 的`string`类型，这就是为什么比较 stock_level 和 reorder level 值的原因`3 - 5`，`12 - 20`它正在显示，`6 -15`而`9 - 20`它没有显示，因为如果您将 6 和 15 作为字符串 6 将大于 15 与 9 和 20 相同。

希望你有你的问题...

在比较之前将 AES_DECRYPT() 的结果转换为数字。

将您的 where 子句更改为此

```
WHERE
     (AES_DECRYPT(p.prod_type, 'MW4KQLg1Irfo3Xz7Nxht') + 0) = 1 AND
     (AES_DECRYPT(p.stock_level, 'MW4KQLg1Irfo3Xz7Nxht') + 0) <= (AES_DECRYPT(p.reorder_level, 'MW4KQLg1Irfo3Xz7Nxht') + 0) 
```

添加`+0`会将结果转换为数字

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T07:04:49.683

```
WHERE
    ->         AES_DECRYPT(p.prod_type, 'MW4KQLg1Irfo3Xz7Nxht',varchar) = 1
    ->   AND
    ->           AES_DECRYPT(p.stock_level, 'MW4KQLg1Irfo3Xz7Nxht',varchar) <= AES_DECRYPT(p.reorder_level, 'MW4KQLg1Irfo3Xz7Nxht',varchar) 
```

或者 ：

```
WHERE
    ->         AES_DECRYPT(p.prod_type, 'MW4KQLg1Irfo3Xz7Nxht',int) = 1
    ->   AND
    ->           AES_DECRYPT(p.stock_level, 'MW4KQLg1Irfo3Xz7Nxht',varchar) <= AES_DECRYPT(p.reorder_level, 'MW4KQLg1Irfo3Xz7Nxht',varchar) 
```

来自： http: [//infocenter.sybase.com/help/index.jsp ?topic=/com.sybase.infocenter.dc01015.1510/html/iqsecure/Functions_s_4132405.htm](http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.infocenter.dc01015.1510/html/iqsecure/Functions_s_4132405.htm)

> 如果在使用 AES_ENCRYPT 函数插入数据时不使用 CAST 语句，则可以通过将 VARCHAR 作为数据类型传递来使用 AES_DECRYPT 函数查看相同的数据。如果您不将数据类型传递给 AES_DECRYPT，则返回 VARBINARY 数据类型。

# android - android中的图像失真

> ID：15470331
> 
> 赞同：2
> 
> 时间：2013-03-18T05:32:17.973
> 
> 标签：android, image, distortion, warp

如何通过在android中的屏幕上拖动来实现图像失真或图像扭曲？我是 android 新手，我想制作一个像“Photo warp”或“face changer”这样的应用程序，通过在屏幕上触摸和拖动来扭曲图像。是否有任何功能或方法可以在应用程序中实现此功能？我参考 [了如何通过openCV模拟鱼眼镜头效果？](https://stackoverflow.com/questions/1927145/how-to-simulate-fisheye-lens-effect-by-opencv)和 [鱼眼失真](https://stackoverflow.com/questions/6214377/fisheye-distortion) 等等，但无法获得足够的信息。我还引用了“SDK_DIR/samples/android-*/ApiDemos/src/com/example/android/apis/graphics/BitmapMesh.java”，但这对我的问题没有足够的帮助。有没有人有任何想法或教程来实现这个功能？

# node.js - 自动编译 .coffee 文件并重新加载项目

> ID：15470334
> 
> 赞同：2
> 
> 时间：2013-03-18T05:32:35.320
> 
> 标签：node.js, coffeescript, node-modules

我有一个在 node 中开发的小型 web 服务，我想在 coffeescript 中编写一些文件，开始使用它。

我正在使用 nodemon 来运行应用程序，就像这样

```
nodemon app.js 
```

我有以下文件结构

app.js 控制器/ ping.coffee test.js

在[nodemon的主页](https://github.com/remy/nodemon#readme)上说它支持coffeescript，但是我更改了文件并且它不会重新加载。

然后我找到[了这篇文章](http://glennstovall.com/blog/2012/05/07/rapid-development-with-node-dot-js-and-coffeescript/)，所以我尝试了

```
$ coffee --watch --compile ./controllers/*.coffee 
```

它工作正常，但如果我尝试

```
$ coffee --watch --compile ./*.coffee 
File not found: ./*.coffee 
```

所以看起来 watch 选项不是递归的。

知道如何让 nodemon 选择咖啡脚本文件更改，或者让咖啡编译器递归地选择文件吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-18T18:51:08.573

如果您明确指定扩展名为`-e js,coffee`. 这与文档状态相反，我已经在此问题上提交了一张票：[https ://github.com/remy/nodemon/issues/312](https://github.com/remy/nodemon/issues/312)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T05:41:08.993

这应该有效：

```
coffee --watch --compile ./ 
```

此外，您可以将标志缩短为`-wc`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T05:40:25.250

您正在做的事情在咖啡脚本库中很常见。许多库都有一个脚本，可以将一个目录中的所有咖啡脚本文件编译为另一个目录中的 Javascript 文件。例如，以下从to`Cakefile`编译。你可以或取决于你想做什么。`src/``lib/``cake watch``cake build`

```
{print} = require 'util'
{spawn} = require 'child_process'

task 'build', 'Build lib/ from src/', ->
  coffee = spawn 'coffee', ['-c', '-o', 'lib', 'src']
  coffee.stderr.on 'data', (data) ->
    process.stderr.write data.toString()
  coffee.stdout.on 'data', (data) ->
    print data.toString()
  coffee.on 'exit', (code) ->
    callback?() if code is 0

task 'watch', 'Watch src/ for changes', ->
  coffee_src = spawn 'coffee', ['-w', '-c', '-o', 'lib', 'src']
  coffee_src.stderr.on 'data', (data) -> process.stderr.write data.toString()
  coffee_src.stdout.on 'data', (data) -> print data.toString() 
```

但是，如果您没有运行节点，而是实际运行浏览器应用程序，我建议您使用奇妙的[hem](https://github.com/spine/hem)。为此，我还在这里写了一个入门指南：[https ://stackoverflow.com/a/14993583/586086](https://stackoverflow.com/a/14993583/586086)

# objective-c - 添加新地址时：搜索地址时，iphone的搜索栏上也应该有一个自动完成

> ID：15470336
> 
> 赞同：2
> 
> 时间：2013-03-18T05:32:41.187
> 
> 标签：objective-c, cocoa-touch

我们正在为 UIMapView 设置地址搜索的地理编码，但我们面临的问题是添加新地址时：搜索地址时，还应该有一个自动完成。在搜索栏上怎么可能？（就像我们在网上搜索城市列表如果我们搜索浦那然后显示所有与 P 相关的城市名称。）请解决任何人？

谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T05:49:20.187

您必须尝试这种方法。此方法使用苹果服务器进行地理编码。有时苹果服务器提供比谷歌更好的响应。很快（在 IOS 6.1 中）谷歌地图将完全脱离 IOS。因此，如果应用程序留在苹果提供的功能中，那就太好了。

```
-(void)searchBarSearchButtonClicked:(UISearchBar *)theSearchBar
{
    [theSearchBar resignFirstResponder];
    CLGeocoder *geocoder = [[CLGeocoder alloc] init];
    [geocoder geocodeAddressString:theSearchBar.text completionHandler:^(NSArray *placemarks, NSError *error) {
        //Error checking

        CLPlacemark *placemark = [placemarks objectAtIndex:0];
        MKCoordinateRegion region;
        region.center.latitude = placemark.region.center.latitude;
        region.center.longitude = placemark.region.center.longitude;
        MKCoordinateSpan span;
        double radius = placemark.region.radius / 1000; // convert to km

        NSLog(@"[searchBarSearchButtonClicked] Radius is %f", radius);
        span.latitudeDelta = radius / 112.0;

        region.span = span;

        [theMapView setRegion:region animated:YES];
    }];
} 
```

# wpf - 修改 TabControl 的 header

> ID：15470341
> 
> 赞同：3
> 
> 时间：2013-03-18T05:33:22.050
> 
> 标签：wpf, xaml, mvvm, binding, datatemplate

所以我`TabControl`在运行时将我的视图直接添加到 的 Items 集合中（而不是在它们周围创建 TabItems 并将这些 TabItems 添加到 TabControl）。视图公开了一个属性（围绕同名的 ViewModel 属性的包装器），该属性名为`HasChanges`我要绑定到`TabItem`的 Header 以显示星号 (*) 符号以识别具有未保存更改的选项卡，就像 VS 所做的那样。我已经尝试过使用 DataTemplates，但在访问`DataTemplate`. 这样做的正确方法是什么？这是我的几次尝试之一：

```
<TabControl.ItemTemplate>
    <DataTemplate DataType="UserControl">
        <StackPanel Orientation="Horizontal" Margin="0" Height="22">
            <TextBlock VerticalAlignment="Center" Text="{Binding HeaderText, RelativeSource={RelativeSource AncestorType=UserControl}}" />
            <TextBlock Text="*" Visibility="{Binding HasChanges, RelativeSource={RelativeSource Mode=TemplatedParent}, Converter={StaticResource B2VConverter}}" />
        </StackPanel>
    </DataTemplate>
</TabControl.ItemTemplate> 
```

请注意，我正在为这两个`TextBlock`s 尝试两种不同的绑定方法，但都不起作用。我的视图继承`UserControl`并公开属性`HasChanges`和`HeaderText`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T06:33:52.603

好的。我自己解决了。对于其他尝试实现类似 VS 的关闭按钮和未保存的更改星号的人，这里是模板：

```
<TabControl.ItemContainerStyle>
    <Style TargetType="{x:Type TabItem}">
        <Setter Property="HeaderTemplate" >
            <Setter.Value>
                <DataTemplate>
                    <StackPanel Orientation="Horizontal" Margin="0" Height="22">
                        <TextBlock VerticalAlignment="Center" Text="{Binding RelativeSource={RelativeSource AncestorType=TabItem}, Path=Content.HeaderText}" />
                        <TextBlock Text=" *" ToolTip="Has unsaved changes" Visibility="{Binding Content.DataContext.HasChanges, RelativeSource={RelativeSource AncestorType=TabItem}, Converter={StaticResource B2VConverter}}" />
                        <Button Style="{StaticResource {x:Static ToolBar.ButtonStyleKey}}" Width="18" Height="18" 
                                Margin="6,0,0,0" Padding="0" HorizontalContentAlignment="Center" VerticalContentAlignment="Center" HorizontalAlignment="Center" 
                                Command="{Binding DataContext.TabClosingCommand, RelativeSource={RelativeSource AncestorType={x:Type Window}}}"
                                CommandParameter="{Binding RelativeSource={RelativeSource AncestorType=UserControl}}"
                                VerticalAlignment="Center" Focusable="False">
                            <Grid Margin="0" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                                <Line StrokeThickness="3" StrokeStartLineCap="Round"  StrokeEndLineCap="Round" Stroke="Gray" X1="1" Y1="1" X2="9" Y2="9" HorizontalAlignment="Center" VerticalAlignment="Center" />
                                <Line StrokeThickness="3" StrokeStartLineCap="Round" StrokeEndLineCap="Round" Stroke="Gray" X1="1" Y1="9" X2="9" Y2="1" HorizontalAlignment="Center" VerticalAlignment="Center" />
                            </Grid>
                        </Button>
                    </StackPanel>
                </DataTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</TabControl.ItemContainerStyle> 
```

结果是一个优雅的基于绘图的按钮，外观扁平。您的视图必须实现布尔值`HasChanges`和`HeaderText`属性，另外您需要`BooleanToVisibilityConverter`在资源部分中定义一个名为 B2VConverter。

# c# - 如何以编程方式将属性插入 .cs 源文件中的类？

> ID：15470342
> 
> 赞同：5
> 
> 时间：2013-03-18T05:33:30.173
> 
> 标签：c#, .net, regex, string, code-generation

我正在创建一个自动化工具，用于将属性插入现有类的源代码。例如，我有一个这样的现有源代码：

```
public class MyClass 
{
   //class members goes here

} 
```

我想修改成这样

```
public class MyClass 
{
   //class members goes here

   public string MyProp { get; set; }
} 
```

并将其保存到同一个文件中。

类名、属性类型和属性名将是事先知道的，并且可以被视为操作的参数。知道如何轻松做到这一点吗？也许[正则表达式替换](http://msdn.microsoft.com/en-us/library/xwewhkd1.aspx)会为此工作，但我不知道无论源代码的新行、空格和标识策略如何，使用哪个表达式将是灵活的。

**编辑**：我正在寻找的只是自动生成源代码，而不是在运行时操作类

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T06:33:15.247

一种干净的方法是使用[T4 模板](http://msdn.microsoft.com/en-us/library/vstudio/bb126445.aspx)生成[部分类](http://msdn.microsoft.com/en-us/library/wa80x488%28v=vs.80%29.aspx)。

T4 模板是在编译时生成代码的好方法。

开发人员不应修改这些生成的文件，而是开发人员创建另一个文件，其中包含部分类成员的附加定义。

这样，您可以一次又一次地调整和运行生成器，而不会弄乱自定义代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T06:07:23.747

以下使用正则表达式的方法应该可以工作，尽管我认为这可能不是满足您需要的最佳方法。真的不知道，这取决于你的需求。我一直这样做（要么创建修改文件的脚本，要么来自*Notepad++*`.cs`的宏）。也许您可能还想看看[*部分类*](http://msdn.microsoft.com/en-us/library/wa80x488%28v=vs.80%29.aspx)。*[](http://msdn.microsoft.com/en-us/library/wa80x488%28v=vs.80%29.aspx)*

 **```
string text = 
@"namespace X {
    public class MyClass {
        //Text here
    }
}";
string className = "MyClass";
string propertyType = "string";
string propertyName = "MyProperty";

string regex = string.Format(@"( *)((public?)\s*(static)?\s*class\s+{0}\s*{{)", className);
string replacement = string.Format("$1$2\r\n\r\n$1    public {0} {1} {{ get; set; }}", propertyType, propertyName);

var modified = Regex.Replace(text, regex, replacement);
Console.WriteLine(modified); 
```

上面的代码将打印：

```
namespace X {
    public class MyClass {

        public string MyProperty { get; set; }
        //Text here
    }
} 
```

**编辑：**如您所见，它正确缩进了代码。它使用包含类定义的行的相同数量的空格 + 4 个。如果要添加选项卡或其他任何内容，可以更改正则表达式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-18T05:40:31.240

**在运行时添加**

程序集不能在运行时更改，因此您需要在运行时生成一个 DLL 并加载它，或者您可以使用 ExpandoObject，如此[SO 问题中所述](https://stackoverflow.com/questions/2765442/change-class-definition-on-runtime)

**在编译时添加**

如果您不想在运行时添加代码而不是您正在寻找[CodeDom](http://msdn.microsoft.com/en-us/library/y2k85ax6.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T06:23:57.077

**在运行时和编译时之间添加**

只是想加入另一种选择。尽管在很多方面您都不想这样做，至少从您提供的少量信息来看。

您可以使用 IL 编织。此选项发生在编译后（到 MSIL）但在运行时之前。结果是您的类获得了编译时操作的所有好处，但比 CodeDom 提供的信息要多得多。

MSIL 编织的实现包括[PostSharp.Net](http://www.postsharp.net/)（商业产品）和[Mono.Cecil](http://www.mono-project.com/Cecil)（注意不要让 Mono 部分欺骗您，它也适用于 .Net）。

优点包括：

*   它的（运行时）与编译时方法一样快
*   您有很多 CodeDom 丢失的信息（部分类在 CodeDom 中是一个特别痛苦的问题）

缺点包括：

*   编织很困难（你甚至会失去编译时间检查）
*   编织的IDE支持很少

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-26T12:29:20.873

你可以试试[cog](https://github.com/ktonon/cog)，一个用 Ruby 编写的通用代码生成器。cog 有一个*嵌入*功能，可以很好地满足您的目的。为了实现您的目标，您将像这样修改您的课程

```
public class MyClass 
{
    // class members goes here

    // cog: auto-properties
} 
```

然后像这样编写一个 cog 生成器（一个简短的 ruby​​ 脚本）

```
embed 'auto-properties' do |c|
    "    /* whatever you return gets injected into #{c.filename} */"
end 
```

在示例中，`c`是[EmbedContext](http://ktonon.github.com/cog/Cog/EmbedContext.html)的一个实例。设置生成器后，您可以使用命令行调用运行它

```
$ cog gen
Updated src/MyClass.cs - 1st occurrence of embed 'auto-properties' 
```

现在你的课看起来像这样

```
public class MyClass 
{
    // class members goes here

// cog: auto-properties {
    /* whatever you return gets injected into MyClass.cs */
// cog: }
} 
```

如何生成给定文件名的属性取决于您。cog 非常灵活，还支持使用 ERB 模板生成代码。**

# python - 为什么 somelist[len(somelist)] 会生成 IndexError 而不是 somelist[len(somelist):]？

> ID：15470346
> 
> 赞同：8
> 
> 时间：2013-03-18T05:33:59.800
> 
> 标签：python, list, slice, colon

我知道`somelist[len(somelist)]`无法访问已定义列表之外的索引 - 这是有道理的。

但是为什么 Python 允许你这样做`somelist[len(somelist):]`呢？

我什至读过这`somelist[len(somelist):] = [1]`相当于`somelist.append(1)`

但是为什么切片符号会改变索引“len(somelist)”仍然在列表范围之外的事实呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T05:42:25.200

这是[文档](http://docs.python.org/2/library/stdtypes.html#sequence-types-str-unicode-list-tuple-bytearray-buffer-xrange)中的一些内容。任何可迭代的切片都有特定的规则；特别值得注意的是＃4，强调我的：

> `s`from `i`to的切片`j`被定义为具有索引的项目序列，`k`使得`i <= k < j`。如果`i`或`j`大于`len(s)`，请使用 `len(s)`。如果`i`省略 or `None`，请使用`0`. 如果`j`省略 or `None`，请使用 `len(s)`. **如果`i`大于或等于`j`，则切片为空。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T05:37:33.980

索引处没有任何内容`len(somelist)`（列表索引在 python 中从 0 开始）。因此，尝试访问不存在的元素会引发错误。

但是，列表切片（使用`myList[i:]`语法）返回一个新列表，其中包含包括 和 after 在内的元素`i`。由于索引（或之后）的列表中没有元素，因此`i`返回一个空列表

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T05:40:54.983

来自[Python 文档](http://docs.python.org/2/tutorial/introduction.html)：

> 退化的切片索引被优雅地处理：一个太大的索引被字符串大小替换，一个小于下限的上限返回一个空字符串。

因此 index > list size 会自动更正，并`somelist[len(somelist):]`返回最后一个元素之后的元素，即*nada*。

# c++ - 了解 C++ 中的智能指针提升

> ID：15470348
> 
> 赞同：2
> 
> 时间：2013-03-18T05:34:04.063
> 
> 标签：c++

我是 C++ 和智能指针的新手。我有这样的代码。

```
Example* Example::get_instance() {
        Example* example = new Example();
        return example;
} 
```

我正在尝试将其转换为这样的智能指针

```
shared_ptr<Example> Example::get_instance() {
        shared_ptr<Example> example (new Example());
        return example;
} 
```

这是正确的方法吗，因为当我试图从另一个类调用它时它不起作用。我正在尝试实现一个单例对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T05:39:24.540

`Example`每次请求对象时，您都在创建一个新对象，这是内存泄漏，并且您每次都返回一个不同的对象。试试这个：

```
Example & Example::get_instance() {
        static Example example;
        return example;
} 
```

另请注意以下针对您的代码的建议：

*   创建智能指针时更喜欢`make_shared`而不是`shared_ptr<YourType>(new YourType(...))`. 之所以可以在[这里](http://en.cppreference.com/w/cpp/memory/shared_ptr)找到。相关摘录：

    > 此函数通常使用单个内存分配为 T 对象和 shared_ptr 的控制块分配内存（这是标准中的非绑定要求）。相反，声明 std::shared_ptr p(new T(Args...)) 执行至少两次内存分配，这可能会产生不必要的开销。此外，如果 g 抛出异常， f(shared_ptr(new int(42)), g()) 可能会导致内存泄漏。如果使用 make_shared 则不存在此问题。

*   [`std::unique_ptr`](http://en.cppreference.com/w/cpp/memory/unique_ptr)了解和之间的区别[`std::shared_ptr`](http://en.cppreference.com/w/cpp/memory/shared_ptr)。对于您的情况， a`std::unique_ptr`会更好，但是对于您的问题，有一个更简单的解决方案，我在上面已经展示过。

*   一般来说，当您可以使用引用时避免使用指针，它们更易于使用并且代码看起来更简洁。

*   最后，你真的想要一个单身人士吗？我只需要问一下。我已经作为一名全职程序员工作了将近 4 年了。没那么长，我知道，但足以让我后悔我或其他人使用单例模式而不是将对我的对象的引用传递到调用链的情况。

尽量避免使用单例，稍后您可能会发现使用单例的代码最终可能希望在`Example`对象的多个实例上工作，而不是调用 Example::get_instance 并且只在该单个实例上工作。因此，当您获得该启示时（这可能只是时间问题），您将面临重大的重构。

所以，“当心，有龙！”。

# android - 如何在android中设置文件附件

> ID：15470352
> 
> 赞同：0
> 
> 时间：2013-03-18T05:34:42.330
> 
> 标签：android

我正在创建一个文件，然后从我的应用程序在后台将其作为附件邮件发送。一切正常 邮件发送已成功完成，但问题是在创建文件时我将其命名为 abc.csv 并将其文件存储在 dir 中名称，但当我收到附件时，它被命名为**<<_mnt_sdcard_MyTest_abc.csv>>**。这是我用来获取附件的代码。

```
 private boolean SendMail() {
  boolean result=false;
  txtAdd=(EditText)findViewById(R.id.txtAdd);
  File folder;
        folder = new File(Environment.getExternalStorageDirectory() + File.separator
              + getString(R.string.app_name));
     boolean var = false;
        if (!folder.exists())
            var = folder.mkdir();
  Mail m = new Mail("abc@gmail.com", "*****"); 
  //String[] toArr = {EmailFetcher.getEmail(this)}; 
  String[] toArr = {txtAdd.getText().toString()};
  m.setTo(toArr); 
  m.setFrom("abc@gmail.com"); 
  m.setSubject("XXXXXXXXX"); 
  m.setBody("XXXXXXXXXXXXXX"); 
  try { 
    m.addAttachment(folder+"/abc.csv"); 
      if(m.send()) {
          result= true;
    } else { 
        result= false;
    } 
  } catch(Exception e) { 
   Log.e("MailApp", "Could not send email", e); 
  } 
  return result; 
```

}

如何设置附件中的文件名。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T05:42:10.700

只需使用它对我有用。

```
public void sendImageInEmail(String filePath) 
    {
        try 
        {
            String html = "<html><body><center>Created By ZalaJanakSinh<center></body></html>";

            String address = "";

            Intent email = new Intent(Intent.ACTION_SEND);
            email.putExtra(Intent.EXTRA_EMAIL, new String[]{ address });
            email.putExtra(Intent.EXTRA_SUBJECT, "Created By Zala JanakSinh");

            //need this to prompts email client only

            email.setType("text/html");
            email.putExtra(Intent.EXTRA_TEXT,  Html.fromHtml(html));

            email.addFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION);
            email.setType("image/*");                   

            email.putExtra(Intent.EXTRA_STREAM, Uri.fromFile(new File(filePath)));
            myContext.startActivity(Intent.createChooser(email, "Choose an Email client :"));
        }
        catch (Exception e) 
        {
            e.printStackTrace();
            System.out.println("Error in SendImageInEmail==>"+e.toString());
        } 
```

祝你好运亲爱的

# java - 在 java 中为 Properties.load 定义动态分隔符

> ID：15470360
> 
> 赞同：2
> 
> 时间：2013-03-18T05:36:31.047
> 
> 标签：java, properties

我知道字符串中的属性可以加载到 java.util.Properties 当它被 \n 分隔时，如下所示。

有什么方法可以动态提供分隔符，例如：我们可以使用逗号 (,) 作为分隔符吗？

```
String  propertiesString = "#Namal=153\nJanith=253\nSameera=135";
Properties properties = new Properties();
properties.load(new StringReader(propertiesString)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T05:48:21.793

在将逗号加载到 java.util.Properties 之前，您可以标记逗号并使用换行符将它们连接起来。

下面的示例代码使用[commons-lang](http://commons.apache.org/proper/commons-lang/)并假设您使用的是 UNIX 换行符 (\n)

```
String propStr = "Monday=1,Tuesday=2,Wednesday=3";
String[] propsArray = StringUtils.split(propStr, ',');
Properties properties = new Properties();
properties.load(new StringReader(StringUtils.join(propsArray, "\n"))); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T05:55:22.850

不，你不能这样做！而且不值得，只需使用 String 即可。'\n' 是默认的行分隔符，并且有一个 LineReader 内部类定义了行读取操作的逻辑，我认为您没有机会与之交互。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T05:47:12.257

属性类是一个旨在加载配置的实用程序。

由于 \n 是换行符，我只能假设选择它是为了使属性文件易于阅读。

如果您的要求是以自定义格式存储一些数据，您可以随时阅读它们并使用手动解析配置`Scanner`

或者使用具有良好架构的 XML 配置文件。

顺便说一句，使用新行作为分隔符有什么问题？我只能假设您想使用属性文件来加载不同类型的文件，因为对我来说，属性类的格式在可用性和可读性方面非常有意义。

# playframework - 是否可以在 IBM Websphere Portal 中使用 PLAY 框架

> ID：15470362
> 
> 赞同：2
> 
> 时间：2013-03-18T05:36:38.720
> 
> 标签：playframework, websphere-portal

我打算用 PLAY 框架修改我的前端应用程序。我的应用程序完全基于 IBM Websphere Portal，我们在后端使用 SPRING/Hibernate。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T19:18:59.903

快速浏览一下 PLAY 的文档，我会说这些是完全独立的框架，如果不付出很大的努力就无法集成。即使您设法集成它们，如果出现问题并且您需要 IBM 的帮助，您与 IBM 的支持合同也不会支持您。如果没有其他原因，在暴击期间获得支持的能力应该会影响您遵守支持协议。

# mysql - 组函数的无效使用 - MySQL

> ID：15470365
> 
> 赞同：2
> 
> 时间：2013-03-18T05:37:14.537
> 
> 标签：mysql

运行选择查询时出现此错误，请告知。

```
Error No : 1111
Error : Invalid use of group function 
```

询问：

```
SELECT cm.contactid, cm.firstname, cm.surname, cm.mobile, COUNT( * ) total
FROM sales_master as sm, contact_master as cm
WHERE sm.contactid = cm.contactid 
AND cm.mobile != '' AND orderdate>='2012-12-18' AND orderdate<='2013-03-18' 
GROUP BY sm.contactid 
HAVING COUNT(*) >= 1 
ORDER BY COUNT(*) DESC, cm.firstname ASC 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T06:49:46.270

像这样更改您的查询。使用连接而不是笛卡尔。如果 cm.orderdate 的类型是 DAte，则从以下查询中删除 DATE()。并在 GROUP BY 和 ORDER BY 中使用别名 total 而不是 Count(*) 。

```
SELECT
  cm.contactid,
  cm.firstname,
  cm.surname,
  cm.mobile,
  COUNT(cm.contactid)    total
FROM sales_master as sm
  LEFT JOIN contact_master as cm
    ON sm.contactid = cm.contactid
WHERE 
    AND cm.mobile != ''
    AND DATE(cm.orderdate) >= '2012-12-18'
    AND DATE(cm.orderdate) <= '2013-03-18'
GROUP BY cm.contactid
HAVING total >= 1
ORDER BY total DESC, cm.firstname ASC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T06:08:23.163

会有两个原因：

1）版本兼容性问题

2）您的查询语法不正确，我正在向您发送第二个选项的解决方案。对于版本兼容性问题，您必须转到某人评论中提到的链接。您必须为此使用子查询概念。

像这样修改您的查询：

```
SELECT  sm.contactid ,cm.contactid as contactid , cm.firstname as firstname, cm.surname as surname , cm.mobile as mobile , COUNT( * ) total
FROM    (
            SELECT  sm.contactid,contactid , firstname,surname ,mobile ,total
            FROM    sales_master as sm, contact_master as cm
            WHERE sm.contactid = cm.contactid 
            AND cm.mobile != '' AND orderdate>='2012-12-18' AND orderdate<='2013-03-18' 
            GROUP BY sm.contactid 
         ) q
GROUP BY sm.contactid HAVING COUNT(*) >= 1 
ORDER BY COUNT(*) DESC, cm.firstname ASC 
```

我不确定我是否进行了确切的查询，但概念类似于“子查询”...

# python - Python 3 中的 PyEval_InitThreads：如何/何时调用它？（传奇继续令人作呕）

> ID：15470367
> 
> 赞同：28
> 
> 时间：2013-03-18T05:37:45.410
> 
> 标签：python, python-3.x, python-c-api, python-3.2, python-c-extension

基本上，对于应该调用的确切时间以及需要哪些伴随的 API 调用，似乎存在***巨大的***混淆/歧义。[**`PyEval_InitThreads()`**](http://docs.python.org/3.2/c-api/init.html#PyEval_InitThreads)不幸的是，[官方 Python 文档](http://docs.python.org/3.2/c-api/init.html)非常含糊。[关于这个话题， stackoverflow](https://stackoverflow.com/questions/10625584/embedding-python-in-multithreaded-c-application/10702119)上已经有很多问题了，事实上，我个人已经[问过一个与](https://stackoverflow.com/questions/14916815/when-is-pyeval-initthreads-meant-to-be-called)这个问题几乎相同的问题，所以如果这个问题被关闭，我不会特别惊讶；但考虑到这个问题似乎没有明确的答案。（遗憾的是，我没有快速拨号的 Guido Van Rossum。）

首先，让我们在这里定义问题的范围：**我想做什么？** 嗯...我想用 C 编写一个 Python 扩展模块，它将：

1.  `pthread`使用C 中的 API生成工作线程
2.  从这些 C 线程中调用 Python 回调

好的，让我们从 Python 文档本身开始。[**Python 3.2 文档**](http://docs.python.org/3.2/c-api/init.html#PyEval_InitThreads)说：

> **无效 PyEval_InitThreads()**
> 
> 初始化并获取全局解释器锁。它应该在创建第二个线程或参与任何其他线程操作（例如 PyEval_ReleaseThread(tstate)）之前在主线程中调用。在调用 PyEval_SaveThread() 或 PyEval_RestoreThread() 之前不需要它。

所以我的理解是：

1.  任何产生线程的 C 扩展模块必须 `PyEval_InitThreads()`在产生任何其他线程之前从主线程调用
2.  调用`PyEval_InitThreads`锁定 GIL

所以常识会告诉我们，任何创建线程的 C 扩展模块都必须调用`PyEval_InitThreads()`，然后释放全局解释器锁。好吧，看起来很简单。*表面上看*，所需要的只是以下代码：

```
PyEval_InitThreads(); /* initialize threading and acquire GIL */
PyEval_ReleaseLock(); /* Release GIL */ 
```

似乎很容易......但不幸的是，Python 3.2 文档**也**说[**`PyEval_ReleaseLock`**已**弃用**](http://docs.python.org/3.2/c-api/init.html#PyEval_ReleaseLock)。相反，我们应该使用[**`PyEval_SaveThread`**](http://docs.python.org/3.2/c-api/init.html#PyEval_SaveThread)它来释放 GIL：

> **PyThreadState* PyEval_SaveThread()**
> 
> 释放全局解释器锁（如果已创建并启用线程支持）并将线程状态重置为 NULL，返回之前的线程状态（非 NULL）。如果锁已创建，则当前线程必须已获取它。

呃...好吧，所以我猜一个 C 扩展模块需要说：

```
PyEval_InitThreads();
PyThreadState* st = PyEval_SaveThread(); 
```

事实上，这正是[**这个stackoverflow答案**](https://stackoverflow.com/questions/10625584/embedding-python-in-multithreaded-c-application/10702119#10702119)所说的。除非我在实践中实际*尝试*过，否则当我导入扩展模块时，Python 解释器会立即出现段错误。好的。

* * *

好的，所以现在我放弃了官方的 Python 文档并转向谷歌。所以，**[这个随机的博客](http://dandesousa.com/2011/12/11/boost-python-calling-back-into-python-from-native-c-threads/)**声称你需要从扩展模块做的就是调用`PyEval_InitThreads()`. 当然，`PyEval_InitThreads()`获得 GIL 的文档声称，事实上，[***快速检查`PyEval_InitThreads()`in`ceval.c`***](https://github.com/certik/python-3.2/blob/master/Python/ceval.c#L304)的源代码表明它确实调用了内部函数`take_gil(PyThreadState_GET());`

所以`PyEval_InitThreads()` *肯定会*获得 GIL。我会认为你绝对需要在调用`PyEval_InitThreads()`.   ***但是怎么做？*** `PyEval_ReleaseLock()`已弃用，`PyEval_SaveThread()`只是莫名其妙的段错误。

好的......所以也许出于某种目前我无法理解的原因，C 扩展模块*不需要*发布 GIL。我试过了......并且，正如预期的那样，一旦另一个线程尝试获取 GIL（使用[**PyGILState_Ensure**](http://docs.python.org/3.2/c-api/init.html#PyGILState_Ensure)），程序就会因死锁而挂起。所以是的......你*确实*需要在调用`PyEval_InitThreads()`.

再次，问题是：***调用后如何释放 GIL [`PyEval_InitThreads()`](http://docs.python.org/3.2/c-api/init.html#PyEval_InitThreads)？***

更一般地说：**C 扩展模块到底需要做什么才能安全地从工作 C 线程调用 Python 代码？**

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-18T07:16:42.823

您的理解是正确的：调用`PyEval_InitThreads`确实获得了 GIL。在正确编写的 Python/C 应用程序中，这不是问题，因为 GIL 会及时解锁，无论是自动还是手动。

如果主线程继续运行 Python 代码，没有什么特别的，因为 Python 解释器会在执行了一些指令后自动放弃 GIL（允许另一个线程获取它，它将再次放弃它，等等在）。此外，每当 Python 即将调用阻塞系统调用时，例如从网络读取或写入文件，它都会在调用周围释放 GIL。

这个答案的原始版本几乎到此结束。但是还有一件事需要考虑：*嵌入*场景。

在嵌入 Python 时，主线程通常会初始化 Python 并继续执行其他与 Python 无关的任务。在那种情况下，没有任何东西会*自动*释放 GIL，所以这必须由线程本身完成。这绝不是特定于调用的调用`PyEval_InitThreads`，它应该适用于使用获得的 GIL 调用的[所有 Python/C 代码。](https://docs.python.org/2/c-api/init.html#releasing-the-gil-from-extension-code)

例如，`main()`可能包含如下代码：

```
Py_Initialize();
PyEval_InitThreads();

Py_BEGIN_ALLOW_THREADS
... call the non-Python part of the application here ...
Py_END_ALLOW_THREADS

Py_Finalize(); 
```

如果您的代码手动创建线程，则它们需要在执行*任何*与 Python 相关的操作之前获取 GIL，即使是简单的`Py_INCREF`. 为此，请使用[以下](https://docs.python.org/2/c-api/init.html#non-python-created-threads)命令：

```
// Acquire the GIL
PyGILState_STATE gstate;
gstate = PyGILState_Ensure();

... call Python code here ...

// Release the GIL. No Python API allowed beyond this point.
PyGILState_Release(gstate); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-03-08T09:36:06.083

执行 C/Python API 时有两种多线程方法。

1.使用相同的解释器执行不同的线程——我们可以执行一个Python解释器并在不同的线程上共享相同的解释器。

编码如下。

```
main(){     
//initialize Python
Py_Initialize();
PyRun_SimpleString("from time import time,ctime\n"
    "print 'In Main, Today is',ctime(time())\n");

//to Initialize and acquire the global interpreter lock
PyEval_InitThreads();

//release the lock  
PyThreadState *_save;
_save = PyEval_SaveThread();

// Create threads.
for (int i = 0; i<MAX_THREADS; i++)
{   
    hThreadArray[i] = CreateThread
    //(...
        MyThreadFunction,       // thread function name
    //...)

} // End of main thread creation loop.

// Wait until all threads have terminated.
//...
//Close all thread handles and free memory allocations.
//...

//end python here
//but need to check for GIL here too
PyEval_RestoreThread(_save);
Py_Finalize();
return 0;
}

//the thread function

DWORD WINAPI MyThreadFunction(LPVOID lpParam)
{
//non Pythonic activity
//...

//check for the state of Python GIL
PyGILState_STATE gilState;
gilState = PyGILState_Ensure();
//execute Python here
PyRun_SimpleString("from time import time,ctime\n"
    "print 'In Thread Today is',ctime(time())\n");
//release the GIL           
PyGILState_Release(gilState);   

//other non Pythonic activity
//...
return 0;
} 
```

2.  另一种方法是，我们可以在主线程中执行一个 Python 解释器，并且对于每个线程，我们可以给它自己的子解释器。因此，每个线程都使用自己独立的所有导入模块的独立版本运行，包括基本模块 - builtins、__main__ 和 sys。

代码如下

```
int main()
{

// Initialize the main interpreter
Py_Initialize();
// Initialize and acquire the global interpreter lock
PyEval_InitThreads();
// Release the lock     
PyThreadState *_save;
_save = PyEval_SaveThread();

// create threads
for (int i = 0; i<MAX_THREADS; i++)
{

    // Create the thread to begin execution on its own.

    hThreadArray[i] = CreateThread
    //(...

        MyThreadFunction,       // thread function name
    //...);   // returns the thread identifier 

} // End of main thread creation loop.

  // Wait until all threads have terminated.
WaitForMultipleObjects(MAX_THREADS, hThreadArray, TRUE, INFINITE);

// Close all thread handles and free memory allocations.
// ...

//end python here
//but need to check for GIL here too
//re capture the lock
PyEval_RestoreThread(_save);
//end python interpreter
Py_Finalize();
return 0;
}

//the thread functions
DWORD WINAPI MyThreadFunction(LPVOID lpParam)
{
// Non Pythonic activity
// ...

//create a new interpreter
PyEval_AcquireLock(); // acquire lock on the GIL
PyThreadState* pThreadState = Py_NewInterpreter();
assert(pThreadState != NULL); // check for failure
PyEval_ReleaseThread(pThreadState); // release the GIL

// switch in current interpreter
PyEval_AcquireThread(pThreadState);

//execute python code
PyRun_SimpleString("from time import time,ctime\n" "print\n"
    "print 'Today is',ctime(time())\n");

// release current interpreter
PyEval_ReleaseThread(pThreadState);

//now to end the interpreter
PyEval_AcquireThread(pThreadState); // lock the GIL
Py_EndInterpreter(pThreadState);
PyEval_ReleaseLock(); // release the GIL

// Other non Pythonic activity
return 0;
} 
```

需要注意的是，全局解释器锁仍然存在，尽管为每个线程提供了单独的解释器，但当涉及到 python 执行时，我们仍然一次只能执行一个线程。**GIL**对**PROCESS**是**唯一**的，因此尽管为每个线程提供了唯一的子解释器，但我们不能同时执行线程

 **资料来源：[在主线程中执行 Python 解释器，对于每个线程，我们可以提供自己的子解释器](https://msdn.microsoft.com/en-us/library/windows/desktop/ms682516(v=vs.85).aspx)

[多线程教程 (msdn)](https://msdn.microsoft.com/en-us/library/windows/desktop/ms682516(v=vs.85).aspx)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-06-17T10:20:50.423

我已经看到了与您类似的症状：如果我只调用 PyEval_InitThreads()，则会出现死锁，因为我的主线程再也不会从 Python 调用任何东西，如果我无条件地调用 PyEval_SaveThread() 之类的东西，则会出现段错误。症状取决于 Python 的版本和情况：我正在开发一个嵌入 Python 的插件，用于可以作为 Python 扩展的一部分加载的库。因此，代码需要独立运行，无论它是否由 Python 作为 main 加载。

以下适用于 python2.7 和 python3.4，以及我的库在 Python 内和 Python 之外运行。在主线程中执行的插件初始化例程中，我运行：

```
 Py_InitializeEx(0);
  if (!PyEval_ThreadsInitialized()) {
    PyEval_InitThreads();
    PyThreadState* mainPyThread = PyEval_SaveThread();
  } 
```

（mainPyThread 实际上是一些静态变量，但我认为这并不重要，因为我再也不需要使用它了）。

然后我使用 pthreads 创建线程，在每个需要访问 Python API 的函数中，我使用：

```
 PyGILState_STATE gstate;
  gstate = PyGILState_Ensure();
  // Python C API calls
  PyGILState_Release(gstate); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-09-16T19:45:44.893

引用上面的：

> 简短的回答：你不应该关心在调用 PyEval_InitThreads 之后释放 GIL ......

现在，要获得更长的答案：

我将我的答案限制为关于 Python 扩展（而不是嵌入 Python）。如果我们只是扩展 Python，那么您模块的任何入口点都来自 Python。*根据定义*，这意味着我们不必担心从非 Python 上下文调用函数，这使事情变得更简单。

如果线程还没有被初始化，那么我们知道没有 GIL（没有线程 == 不需要锁定），因此“当不知道哪个线程（如果有）当前具有全局解释器锁定”不适用。

```
if (!PyEval_ThreadsInitialized())
{
    PyEval_InitThreads();
} 
```

在调用 PyEval_InitThreads() 之后，会创建一个 GIL 并将其分配给我们的线程，也就是当前运行 Python 代码的线程。所以一切都很好。

现在，就我们自己启动的worker“C”线程而言，它们在运行相关代码之前需要请求GIL：因此它们的常用方法如下：

```
// Do only non-Python things up to this point
PyGILState_STATE state = PyGILState_Ensure();
// Do Python-things here, like PyRun_SimpleString(...)
PyGILState_Release(state);
// ... and now back to doing only non-Python things 
```

与正常使用扩展相比，我们不必担心死锁。当我们进入我们的函数时，我们可以控制 Python，所以要么我们没有使用线程（因此，没有 GIL），要么 GIL 已经分配给了我们。当我们通过退出函数将控制权交还给 Python 运行时时，正常的处理循环将检查 GIL 并根据需要手动控制其他请求对象：包括通过 PyGILState_Ensure() 的工作线程。

所有这些读者可能已经知道了。然而，“证据就在布丁里”。我发布了一个文档很少的示例，我今天编写该示例是为了让自己了解实际行为是什么，以及事情是否正常工作。 [GitHub 上的示例源代码](https://github.com/after5cst/python-extend-with-threads.git)

我通过该示例学习了几件事，包括 CMake 与 Python 开发的集成、与上述两者的 SWIG 集成以及与扩展和线程的 Python 行为。尽管如此，该示例的核心仍然允许您：

*   加载模块——'import annoy'
*   加载零个或多个执行 Python 操作的工作线程 - 'annoy.annoy(n)'
*   清除所有工作线程——'annon.annoy(0)'
*   在应用程序退出时提供线程清理（在 Linux 上）

...所有这一切都没有任何崩溃或段错误。至少在我的系统上（Ubuntu Linux w/GCC）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-01-22T09:50:55.817

调用 PyEval_SaveThread 的建议有效

```
PyEval_InitThreads();
PyThreadState* st = PyEval_SaveThread(); 
```

但是，为了防止在导入模块时崩溃，请确保要导入的 Python API 受到保护

PyGILState_Ensure 和 PyGILState_Release

例如

```
PyGILState_STATE gstate = PyGILState_Ensure();
PyObject *pyModule_p = PyImport_Import(pyModuleName_p);
PyGILState_Release(gstate); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-11-12T05:39:26.503

我也对这个问题感到困惑。以下代码巧合。

```
Py_InitializeEx(0);
    if (!PyEval_ThreadsInitialized()) {
    PyEval_InitThreads();
    PyThreadState* mainPyThread = PyEval_SaveThread();
} 
```

我的主线程做一些 python 运行时的初始工作，并创建其他 pthread 来处理任务。我有一个更好的解决方法。在主线程中：

```
if (!PyEval_ThreadsInitialized()){
    PyEval_InitThreads();
}
//other codes
while(alive) {
    Py_BEGIN_ALLOW_THREADS
    sleep or other block code
    Py_END_ALLOW_THREADS
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-18T06:40:22.090

您不需要在**扩展**模块中调用它。这是为了初始化解释器，如果你的 C-API 扩展模块正在被导入，这已经完成了。此接口将由嵌入应用程序使用。

[PyEval_InitThreads 什么时候应该被调用？](https://stackoverflow.com/questions/14916815/when-is-pyeval-initthreads-meant-to-be-called?rq=1)**

# android - Android SOAP 解析 xml 列表视图

> ID：15470368
> 
> 赞同：1
> 
> 时间：2013-03-18T05:37:46.333
> 
> 标签：android, parsing, soap

我正在通过 SOAP 创建 XML 解析。

我添加了 jar 文件和 Internet 用户权限。

如何在 onPostExecute 中使用该变量

变量 onPostExecute 的类型无效。

如何使用该变量我不知道请帮助我。

MainActivity.java

```
public class MainActivity extends ListActivity  {

// XML node keys
static final String FORMMODEL = "FormModel";
 static final String TEXT1 = "Text1";
static final String TEXT2 = "Text2";
static final String TEXT3 = "Text3";

private static final String METHOD_NAME = "HelloWorld";
private static final String SOAP_ACTION = "http://tempuri.org/HelloWorld";
private static final String NAMESPACE = "http://tempuri.org/";
private static final String URL = "http://sygnetinfosol.com/webservice.asmx";
//you can get these values from the wsdl file^

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_main);
        new SoapRequestTask().execute();

}
private class SoapRequestTask extends AsyncTask<Void, Void, Void> {
private Object ListAdapter;
//runs on ui thread.
protected void onPreExecute() {
//display progressdialog
}
 // runs in the background thread. do not update ui from here
protected Void doInBackground(Void... params) {
//make a soap request here
SoapObject request=new SoapObject(NAMESPACE, METHOD_NAME);
request.addProperty("bSelected", true);

SoapSerializationEnvelope sse=new SoapSerializationEnvelope(SoapEnvelope.VER11);
sse.setOutputSoapObject(request);
sse.dotNet=true;

HttpTransportSE htse=new HttpTransportSE(URL);
try {
htse.call(SOAP_ACTION, sse);
} catch (IOException e) {
e.printStackTrace();
} catch (XmlPullParserException e) {
e.printStackTrace();
}

SoapObject res=(SoapObject) sse.bodyIn;

final ArrayList<HashMap<String, String>> valuesList = new ArrayList<HashMap<String, String>>();

XMLParser parser = new XMLParser();
String xml = parser.getXmlFromUrl(URL); // getting XML
Document doc = parser.getDomElement(xml); // getting DOM element

NodeList nl = doc.getElementsByTagName(FORMMODEL);

// looping through all item nodes <item>
for (int i = 0; i < ((SoapObject) nl).getPropertyCount(); i++) {

SoapObject  namesObject = (SoapObject) res.getProperty(i);
for(int j=0;j<namesObject.getPropertyCount();j++)
{
Object objectNames=namesObject.getProperty(j);
SoapObject soapObjectText1 = (SoapObject)objectNames;
SoapObject soapObjectText2 = (SoapObject)objectNames;
SoapObject soapObjectText3 = (SoapObject)objectNames;

String sText1 = soapObjectText1.getProperty("iText1").toString();
String sText2 = soapObjectText2.getProperty("sText2").toString();
String sText3 = soapObjectText3.getProperty("sText3").toString();

// creating new HashMap
HashMap<String, String> map = new HashMap<String, String>();
Element e = (Element) nl.item(i);

// adding each child node to HashMap key => value
map.put(TEXT1, parser.getValue(e, sText1)); 
map.put(TEXT2, parser.getValue(e, sText2));
map.put(TEXT3, parser.getValue(e, sText3));

System.out.println("MY SOAP RESPONE IS"+ res.getProperty(0).toString());

// adding HashList to ArrayList
valuesList.add(map);
}
 return null;
}

 //runs on ui thread.update ui here
protected void onPostExecute(Void params1{

ListAdapter adapter = new SimpleAdapter(MainActivity.this, valuesList,R.layout.list_item,
        new String[] { TEXT1, TEXT2, TEXT3 }, new int[] {
                R.id.lat, R.id.long1, R.id.address });

setListAdapter(adapter);

ListView lv = getListView();
lv.setOnItemClickListener(new OnItemClickListener() {

    @Override
    public void onItemClick(AdapterView<?> parent, View view,int position, long id) {

         HashMap<String, String> map = new HashMap<String, String>();
            map = valuesList.get(position);
        // Starting new intent
        Intent in = new Intent(getApplicationContext(), SingleMenuItemActivity.class);
        in.putExtra(TEXT1, map.get(MainActivity.TEXT1));
        in.putExtra(TEXT2, map.get(MainActivity.TEXT2));
        in.putExtra(TEXT3, map.get(MainActivity.TEXT3));

        startActivity(in);

  }
 });

}
}
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T06:39:25.797

像下面这样编辑您的代码..我不确定让您尝试..

```
 package com.syg.abc;

import java.io.IOException;
import java.util.ArrayList;
import java.util.HashMap;

import org.ksoap2.SoapEnvelope;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.HttpTransportSE;
import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.NodeList;
import org.xmlpull.v1.XmlPullParserException;

import android.app.ListActivity;
import android.content.Intent;
import android.os.AsyncTask;
import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ListAdapter;
import android.widget.ListView;
import android.widget.SimpleAdapter;

public class MainActivity extends ListActivity 
{

    // XML node keys
static final String FORMMODEL = "FormModel";
static final String TEXT1 = "Text1";
static final String TEXT2 = "Text2";
static final String TEXT3 = "Text3";

private static final String METHOD_NAME = "HelloWorld";
private static final String SOAP_ACTION = "http://tempuri.org/HelloWorld";
private static final String NAMESPACE = "http://tempuri.org/";
private static final String URL = "http://sygnetinfosol.com/webservice.asmx";
//you can get these values from the wsdl file^

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
            new SoapRequestTask().execute();

   }

@SuppressWarnings("rawtypes")
private class SoapRequestTask extends AsyncTask<Void, Void, ArrayList> 
{
private Object ListAdapter;
//runs on ui thread.
protected void onPreExecute() {
//display progressdialog
}
 // runs in the background thread. do not update ui from here
protected ArrayList doInBackground(Void... params) {
//make a soap request here
SoapObje request=new SoapObject(NAMESPACE, METHOD_NAME);
request.addProperty("bSelected", true);

SoapSerializationEnvelope sse=new SoapSerializationEnvelope(SoapEnvelope.VER11);
sse.setOutputSoapObject(request);
sse.dotNet=true;

HttpTransportSE htse=new HttpTransportSE(URL);
try {
htse.call(SOAP_ACTION, sse);
} catch (IOException e) {
e.printStackTrace();
} catch (XmlPullParserException e) {
e.printStackTrace();
}

SoapObject res=(SoapObject) sse.bodyIn;

final ArrayList<HashMap<String, String>> valuesList = new ArrayList<HashMap<String, String>>();

XMLParser parser = new XMLParser();
String xml = parser.getXmlFromUrl(URL); // getting XML
Document doc = parser.getDomElement(xml); // getting DOM element

NodeList nl = doc.getElementsByTagName(FORMMODEL);

// looping through all item nodes <item>
for (int i = 0; i < ((SoapObject) nl).getPropertyCount(); i++) {

SoapObject  namesObject = (SoapObject) res.getProperty(i);
for(int j=0;j<namesObject.getPropertyCount();j++)
{
Object objectNames=namesObject.getProperty(j);
SoapObject soapObjectText1 = (SoapObject)objectNames;
SoapObject soapObjectText2 = (SoapObject)objectNames;
SoapObject soapObjectText3 = (SoapObject)objectNames;

String sText1 = soapObjectText1.getProperty("iText1").toString();
String sText2 = soapObjectText2.getProperty("sText2").toString();
String sText3 = soapObjectText3.getProperty("sText3").toString();

// creating new HashMap
HashMap<String, String> map = new HashMap<String, String>();
Element e = (Element) nl.item(i);

// adding each child node to HashMap key => value
map.put(TEXT1, parser.getValue(e, sText1)); 
map.put(TEXT2, parser.getValue(e, sText2));
map.put(TEXT3, parser.getValue(e, sText3));

System.out.println("MY SOAP RESPONE IS"+ res.getProperty(0).toString());

// adding HashList to ArrayList
valuesList.add(map);
}
 return valuesList;
}
}

 //runs on ui thread.update ui here
protected void onPostExecute(ArrayList <HashMap<String, String>> valuesList)
{

@SuppressWarnings("unchecked")
ListAdapter adapter = new SimpleAdapter(MainActivity.this, valuesList,R.layout.list_item,
        new String[] { TEXT1, TEXT2, TEXT3 }, new int[] {
                R.id.lat, R.id.long1, R.id.address });

setListAdapter(adapter);

  }
//}
}
} 
```

# recursion - 将方法更改为完全递归

> ID：15470373
> 
> 赞同：0
> 
> 时间：2013-03-18T05:38:55.117
> 
> 标签：recursion, for-loop

```
void merge(List<E> l, int lower, int upper) {
    ArrayList<E> array = new ArrayList<E>();
    for (int i = lower; i <= upper; i++)
        array.add(list.get(i));
    int front= 0;
    int front2= (array.size() + 1) / 2;

    for (int i = lower; i <= upper; i++) {
        if (front2 >= array.size() || 
           (first < ((array.size() + 1) / 2) &&
           (array.get(first).compareTo(array.get(second)) <= 0))) {
            l.set(i, array.get(front));
            front++;
        }// end if
        else {
            l.set(i, array.get(front2));
            front2++;
        }
    }
} 
```

这是我的方法。我想将其更改为完全递归（我不想使用 for 循环），但我根本不知道如何。有没有办法使这个递归或避免使用循环？

# python - 如何在 os.path.exists 和子进程中传递变量？

> ID：15470376
> 
> 赞同：-3
> 
> 时间：2013-03-18T05:39:30.447
> 
> 标签：python, wxpython, subprocess, wxwidgets

我正在使用 python 和 wxpython 做 GUI。我的一个面板必须从 ftp 下载一个文件，然后它必须执行，但我不能硬编码文件。所以我用

```
 file = self.sc1.GetValue() 
```

照常工作。

但是当我使用 os.path.exist() 检查时，我找不到它显示类型错误。

我必须运行该文件，我认为我使用子进程，我必须通过使用变量“文件”来实现这一点（我不能使用下载的实际文件名）请帮助我完成我的项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T14:50:13.620

使用 urllib2 或酷请求库下载文件（请参阅这篇有趣的[文章](http://www.blog.pythonlibrary.org/2012/06/07/python-101-how-to-download-a-file/)）。我会在按钮事件处理程序中执行此操作。下载完成后，您将自己知道路径，因为您告诉它将文件放在哪里：

```
f = urllib2.urlopen(url)
data = f.read()
path = "path/to/file.txt"
with open(path, "wb") as textFile:
    textFile.write(data) 
```

然后您可以使用 os.path.exist(path) 检查文件是否实际写入磁盘。如果存在，则可以将其传递给子进程。

# midi - 如何从设备 ID 码获取 MIDI 乐器型号？

> ID：15470377
> 
> 赞同：3
> 
> 时间：2013-03-18T05:39:31.117
> 
> 标签：midi

是否有任何公共数据库允许从设备 ID 代码中获取型号名称（回复 f0 7e 7f 06 01 f7 SysEx）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T14:31:07.627

MIDI 制造商协会[在他们的网站上维护了一个 ID 列表](http://www.midi.org/techspecs/manid.php)，看来您可能必须将其刮掉才能将其放入可以查询的数据库中。没有权威的设备数据库；自己制作可能需要相当多的时间。此外，MMA 网站上的列表也不会经常更新......

请记住，并非所有制造商都费心注册他们的 ID，但至少这个列表总比没有好。

# c# - 组合框 TouchDown 和 MouseDown 不触发

> ID：15470378
> 
> 赞同：0
> 
> 时间：2013-03-18T05:39:34.550
> 
> 标签：c#, wpf

我正在使用 WPF，并且有一个可编辑的组合框。

我添加了 TouchDown 和 MouseDown 事件处理程序，但是当我触摸组合框时它永远不会启动。

我打算做的是在我触摸或单击组合框时列出下拉列表。

我该怎么做？

```
<ComboBox Name="cbProductList" Height="45" Width="260" IsEditable="True"
        ItemsSource="{Binding Source={StaticResource ProductsSource}}" 
        DisplayMemberPath="Name" SelectedValuePath="ProductId"
        SelectedIndex="0" FontSize="23" FontFamily="Segoe WP"
        VerticalAlignment="Stretch" FlowDirection="LeftToRight"
        HorizontalAlignment="Left" HorizontalContentAlignment="Left"
        SelectionChanged="cbProductList_SelectionChanged" /> 
```

* * *

发现这个： [如何在 WPF 的组合框中显示下拉菜单？](https://stackoverflow.com/questions/2547767/how-do-i-show-the-drop-down-in-a-combobox-in-wpf)

但是当某些东西是类型时，这个事件就会触发。我希望它在单击组合框时触发。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T07:19:56.630

您需要添加属性`AutoPostBack="true"`：

```
<ComboBox Name="cbProductList" Height="45" Width="260" IsEditable="True"
        ItemsSource="{Binding Source={StaticResource ProductsSource}}" 
        DisplayMemberPath="Name" SelectedValuePath="ProductId"
        SelectedIndex="0" FontSize="23" FontFamily="Segoe WP"
        VerticalAlignment="Stretch" FlowDirection="LeftToRight"
        HorizontalAlignment="Left" HorizontalContentAlignment="Left"
        SelectionChanged="cbProductList_SelectionChanged"
        autopostback="true" /> 
```

# javascript - javascript (node.js + mongo.db) 的范围问题

> ID：15470383
> 
> 赞同：1
> 
> 时间：2013-03-18T05:40:17.057
> 
> 标签：javascript, node.js, mongodb

我的 convertKey 函数遇到了一些问题，我怀疑这是由于范围问题。基本上，我尝试从我的 mongo 数据库中检索记录并将其存储在计数变量中，但是当我尝试返回它时，我得到“未定义”。令人惊讶的是， `console.log(nameSearch + count)`有效，而 `return nameSearch + count`无效。如果有人可以帮助我，我将不胜感激！

```
var dbUrl = "kidstartnow",
  collections = ["students", "studentsList"];
var db = require("mongojs").connect(dbUrl, collections);

function Student(name, src) {
  this.name = name.toLowerCase();

  //this function does not work
  this.key = convertKey(this.name);

  this.src = src;
  this.pointsTotal = 0;

  //inserts student into database
  var student = {name: this.name, key: this.key, pointsTotal: this.pointsTotal,
    src: this.src
  };
  db.students.insert(student);

  //converts name to a key by stripping white space and adding a number behind and ensures keys are unique
  //concatenates names together to form namesearch, and checks if entry exists in studentsList
  function convertKey(name) {

    var nameSearch = name.replace(/\s/g, ''),
      count = 1;

    db.studentsList.find({name: nameSearch}, function(err, student) {      
      //if nameSearch does not exist in studentsList, create entry and sets count to 1
      if(err || !student.length) {
        db.studentsList.insert({name: nameSearch, count: 1});
        count = 1;
        return nameSearch + count;
      }

      //if entry does exist, increments count by 1
      else {
        db.studentsList.update({name: nameSearch}, {$inc: {count: 1}}, function(err) {
          if(err) {
            console.log("Error incrementing records");
          }

          db.studentsList.find({name: nameSearch}, function(err, student) {
            count = student[0].count;
            //this works
            console.log(nameSearch + count)
            //but this doesn't
            return nameSearch + count;
          });
        });
      }
    });
  };
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T06:15:12.447

您是从回调返回`db.studentsList.find`而不是从您的`convertKey`函数返回。

如果您希望从 inside 返回值，则`db.studentsList.find`需要提供回调`convertKey`或可能使用 Promise 库来实现`convertKey`延迟/未来。否则，您的函数将在等待嵌套异步函数完成时立即返回。

回调允许您传递您正在寻找的结果（例如`callback(nameSearch + count)`）

*编辑*

每当我对函数的返回值有疑问时，我都会将大括号与注释相匹配：

```
function convertKey(name) {

    var nameSearch = name.replace(/\s/g, ''),
      count = 1;

    db.studentsList.find({name: nameSearch}, function(err, student) {      
      //if nameSearch does not exist in studentsList, create entry and sets count to 1
      if(err || !student.length) {
        db.studentsList.insert({name: nameSearch, count: 1});
        count = 1;
        return nameSearch + count;
      } else {
        db.studentsList.update({name: nameSearch}, {$inc: {count: 1}}, function(err) {
          // ...
          db.studentsList.find({name: nameSearch}, function(err, student) {
             // ...
             return nameSearch + count;
          }); // end db.studentsList.find
        }); // end db.studentsList.update
      } // end else
    }); // end db.studentsList.find

    /**
     * Notice, no return value here...
     */
  }; // end convertKey 
```

# android - 是否可以在 android 的单独类中添加列表视图？

> ID：15470387
> 
> 赞同：0
> 
> 时间：2013-03-18T05:40:30.600
> 
> 标签：android, android-listview

在我的应用程序中，我为`AsynchronousTask`. 从我执行异步任务类的主类中，是否可以在异步任务类中使用列表视图？

**主要课程**

```
search_items_task = new Search_class();
search_items_task.execute(search_str); 
```

**异步任务类**

```
public class Search_class extends AsyncTask<String, Void, String> {

JSONObject json = new JSONObject();

JSONArray jsonarray;

String viewsubmenuSuccess;

//Activity activity;

ListView search_lv;

protected String doInBackground(String... params) {

    try {

        HttpClient client = new DefaultHttpClient();

        HttpResponse response;

        HttpPost post = new HttpPost("http://www.name.in/cakefoodnew/customer/submenus");

        post.setHeader("json", json.toString());
        StringEntity se = new StringEntity(json.toString());

        se.setContentEncoding(new BasicHeader(HTTP.CONTENT_TYPE,"application/json"));
        post.setEntity(se);
        response = client.execute(post);

        // get a data
        InputStream in = response.getEntity().getContent();
        String a = convertStreamToString(in);
        // Log.v("Search", ""+a);

        try {

            jsonarray = new JSONArray("[" + a + "]");
            json = jsonarray.getJSONObject(0);
            String menus = json.getString("submenus");
            viewsubmenuSuccess = json.getString("viewsubmenuSuccess");
            // Log.v("Search", ""+a);

            try {

                jsonarray = new JSONArray(menus);
                for (int ij = 0; ij < jsonarray.length(); ij++) {
                    json = jsonarray.getJSONObject(ij);
                    String name = json.getString("submenu");

                    if (name.toLowerCase().contains(params[0].toLowerCase())) {

                        String id = json.getString("submenu_id");
                        String price = json.getString("submenu_price");
                        String avaliable_quantity = json.getString("submenu_stock");

                        HashMap<String, String> map = new HashMap<String, String>();
                        map.put(MENU_ID, id);
                        map.put(MENU_NAME, name);
                        map.put(MENU_PRICE, price);
                        map.put(MENU_STOCK, avaliable_quantity);
                        search_details.add(map);
                        //Log.v("search_details", ""+search_details);
                    }
                }

            } catch (Exception e) {
                // TODO: handle exception
            }

        } catch (Exception e) {
        }
    } catch (Exception e) {
        e.printStackTrace();
    }

    return viewsubmenuSuccess;
}

protected void onPostExecute(String result) {

    if (viewsubmenuSuccess.equalsIgnoreCase("1")) {

        //search_lv = (ListView)activity.findViewById(R.id.search_list_view);
//Order_page_custom for customized list view
        /*Order_page_custom adapter = new Order_page_custom(activity,search_details);
        search_lv.setAdapter(adapter);*/

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T05:42:51.817

是的，使用和参数创建AsyncTask的**构造函数。**在您的活动中定义，然后调用 AsyncTask..`Search_Class``ListView``Context``ListView``onCreate()``setContentView()`

就像是;

```
Context mContext
ListView search_lv;

public Search_class(Context context, ListView list)
{
  mContext = context;
  search_lv = list;
} 
```

现在在

```
protected void onPostExecute(String result) {

    if (viewsubmenuSuccess.equalsIgnoreCase("1")) {   
        Order_page_custom adapter = new Order_page_custom(mContext,search_details);
        search_lv.setAdapter(adapter);
    }
} 
```

并在主类（活动类）

```
setContentView(R.layout.<activity_layout>);

search_lv = (ListView)findViewById(R.id.search_list_view);

search_items_task = new Search_class(this, search_lv);
search_items_task.execute(search_str); 
```

# android - 应用首次执行期间不显示 Admob

> ID：15470392
> 
> 赞同：0
> 
> 时间：2013-03-18T05:41:01.427
> 
> 标签：android, cordova, admob

我用 Phonegap (Cordova 2.5.0) 制作了一个 Android 应用程序。我使用[这个插件](https://github.com/sainttex/PhoneGap-Android-Native-AdMob)将 admob 放入我的应用程序中。

Admob 显示在我的应用程序中。但是有一个问题。在第一次执行期间，admob 没有出现。关闭应用程序并重新启动后，会显示 admob。从第二次执行开始，会显示 admob。

如果我有一段时间（大约一小时）不使用该应用程序，然后运行该应用程序，问题就会再次出现。

我能做些什么来解决问题？

谢谢你的建议。

# php - memcached 不工作 xampp windows

> ID：15470394
> 
> 赞同：0
> 
> 时间：2013-03-18T05:41:07.483
> 
> 标签：php, memcached

```
include 'php/db.php';
$qry = "select * from dsb_online";
$result = mysql_query($qry,$link);

if (!$result) {
    die('Invalid query: ' . mysql_error());
}
while ($row = mysql_fetch_assoc($result)) {

   $s=array($row['fk_user_id'],$row['last_activity']);
}

$memcache = new Memcache;  
$memcache->connect('localhost', 11211) or die ("Could not connect");  

$version = $memcache->getVersion();  
echo "Server's version: ".$version."<br/>\n";  

$memcache->set('key', $s, false, 10) or  
die ("Failed to save data at the server"); 
echo "Store data in the cache (data will expire in 10 seconds) 
<br/>\n"; 

$get_result = $memcache->get('key');  
echo "Data from the cache:<br/>\n";  

var_dump($get_result); 
```

我已经在我的 xampp 中安装了 memcached。这是我正在运行以测试它的测试文件。我得到的输出是

```
Server's version: 1.2.6
Store data in the cache (data will expire in 10 seconds) 
Data from the cache:
array(2) { [0]=> string(1) "3" [1]=> string(19) "2013-02-11 11:54:44" } 
```

现在我修改了这样的代码来测试是否从 memcached 中检索到数据

```
$memcache = new Memcache;  
$memcache->connect('localhost', 11211) or die ("Could not connect");  

$version = $memcache->getVersion();  
echo "Server's version: ".$version."<br/>\n";  

$get_result = $memcache->get('key');  
echo "Data from the cache:<br/>\n";  

var_dump($get_result); 
```

结果是

```
Server's version: 1.2.6
Data from the cache:
bool(false) 
```

谁能告诉我为什么我的缓存不起作用

# serial-port - Windows 7 上的前面板驱动程序使用了第三方驱动程序

> ID：15470402
> 
> 赞同：-2
> 
> 时间：2013-03-18T05:42:04.243
> 
> 标签：serial-port, kmdf, umdf

我们已经有一个基于 uart 通信的前面板，我想用它来与 windows pc 通信。解决方案是使用芯片隐蔽的UART转USB，windows上的芯片驱动是virutal COM，驱动显示在设备管理器中，并从前面板接收信息，但它不是开源的。我想知道如何开发 KMDF/UMDF 驱动程序来读取/写入虚拟 COM 驱动程序以将 KEY 信息发送到 Windows 系统，或者让 Windows 系统识别这是密钥信息。

请给我一些示例代码、链接、文件或建议，非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T19:59:21.347

串口 KMDF 示例：[http](http://code.msdn.microsoft.com/windowshardware/Serial-73a4564d) ://code.msdn.microsoft.com/windowshardware/Serial-73a4564d 。在那里四处寻找其他文档。

# javascript - 两个相同的 JavaScript 日期不相等

> ID：15470403
> 
> 赞同：24
> 
> 时间：2013-03-18T05:42:04.903
> 
> 标签：javascript, date

当我创建两个相同的 JavaScript`Date`对象然后比较它们时，它们似乎不相等。如何测试两个 JavaScript 日期是否具有相同的值？

```
var date1 = new Date('Mon Mar 11 2013 00:00:00');
var date2 = new Date('Mon Mar 11 2013 00:00:00');
console.log(date1 == date2); //false? 
```

[JS Fiddle 可在此处获得](http://jsfiddle.net/QEqhU/result/)

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-03-18T05:44:41.813

看来[这已经解决了](https://stackoverflow.com/questions/7753297/how-to-determine-if-2-dates-object-equals-each-other?rq=1)。

要检查日期是否相等，必须将它们转换为其原语：

```
date1.getTime()=== date2.getTime()
//true 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-03-18T06:19:59.480

首先，您在这里比较参考文献时犯了一个严重的错误。看看这个：

```
var x = {a:1};
var y = {a:1};

// Looks like the same example huh!
alert (x == y); // It says false 
```

在这里，虽然对象看起来相同，但它们在内存中拥有不同的插槽。引用只存储对象的地址。因此，两个参考是不同的。

所以现在，我们必须比较这些值，因为您知道参考比较在这里不起作用。你可以做

```
if (date1 - date2 == 0) {
    // Yep! Dates are equal
} else {
   // Handle different dates
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-05T23:00:09.467

我在 for 循环中比较了多种值，所以我无法通过减法来评估它们，而是在比较之前将值转换为字符串

```
var a = [string1, date1, number1]
var b = [string2, date2, number2]
for (var i in a){
  if(a.toString() == b.toString()){
    // some code here
  }
} 
```

# javascript - mvc3 范围验证

> ID：15470412
> 
> 赞同：0
> 
> 时间：2013-03-18T05:42:43.013
> 
> 标签：javascript, jquery, asp.net-mvc-3, validation

我的 mvc3 页面中有三个字段：rate、minrate 和 maxrate。速率应高于 minrate 并小于 maxrate。如何通过 mvc3 模型验证来实现这一点？这是模型：

```
 [Required(ErrorMessage = "Rate Required")]
    [Range(1, 9999999.999, ErrorMessage = "Invalid Rate")]

     public decimal rate
    {
        get;
        set;
    } 
    /// <summary>
    //min Rate
    /// </summary>
      [Required(ErrorMessage = "Min.Rate Required")]
      [Range(1, 9999999.999, ErrorMessage = "Invalid Rate")]

    public decimal minRate
    {
        get;
        set;
    }
    /// <summary>
    //max Rate
    /// </summary>
      [Required(ErrorMessage = "Max.Rate Required")]
      [Range(1, 9999999.999, ErrorMessage = "Invalid Rate")]

    public decimal maxRate
    {
        get;
        set;
    } 
```

**编辑：**

我尝试在客户端使用 javascript 进行比较。如果我能找到一种动态更改验证消息的方法（例如：在 maxrate 字段的情况下为“所需的最大速率”），我可以解决问题。有没有办法做到这一点？

我试过这个：（省略了一些代码）

```
//...........................
$('#Save').click(function(){

  if (parseFloat(maxrate) < parseFloat(rate)) {

                  $('#maxRateforvalidation').text("Rate must be less than maxrate");
//It works but the styles for the validation message are not applied

                $('#maxRateforvalidation').show();
                 return false;
             }
}); 
```

**编辑：**

这是cshtml页面中代码的相关部分：

```
 @using (Html.BeginForm("Saveaction", "mycontroller", FormMethod.Post))
     {

     ..................
     <dt>Rate</dt>
     <dd>@Html.TextBoxFor(model => model.rate, new { style = "width:28%"}) 
          @Html.ValidationMessageFor(model => model.rate)  
     </dd> 
     <dt>minRate</dt>
     <dd>@Html.TextBoxFor(model => model.minrate, new { style = "width:28%"}) 
          @Html.ValidationMessageFor(model => model.minrate)  
     </dd>
     <dt>maxRate</dt>
     <dd>@Html.TextBoxFor(model => model.maxrate, new { style = "width:28%"}) 
          @Html.ValidationMessageFor(model => model.maxrate)  
     </dd>
   .........................

 <button type="submit" id="Save" >  Save(F2)</button>

} 
```

**编辑：**

我检查了运行时生成的代码，对于 rate 字段，当我将其留空并单击提交按钮时：

```
<span id="minRateforvalidation" class="field-validation-error" data-valmsg-replace="true" data-valmsg-for="minRate" style="display: inline;">
<span class="" htmlfor="minRate" generated="true">Min.Rate Required</span>
</span> 
```

所以我更新了这样的代码：

if (parseFloat(maxrate) < parseFloat(rate)) {

```
 $('#maxRateforvalidation').html('<span class="" htmlfor="maxRate"  generated="true" style="visibility: hidden;">Max.Rate must be higher than rate</span>');

                     $('#maxRateforvalidation').addClass("field-validation-error");

                  $('#minRateforvalidation').show();
                  return false;
                } 
```

现在它可以工作了..但只有当我用萤火虫检查内容并提交时！想不通原因。有没有更简单的方法来执行这个验证，比如在模型本身中设置范围，如下所示：

```
 [Required(ErrorMessage = "Min.Rate Required")]
       [Range(1, rate, ErrorMessage = "Invalid Rate")]// cant do it.

        public decimal minRate
        {
            get;
            set;
        } 
```

# android - Android 无法启动视频活动

> ID：15470415
> 
> 赞同：0
> 
> 时间：2013-03-18T05:43:05.653
> 
> 标签：android, android-intent, android-emulator

我的申请中有陈述

```
Uri uri = Uri.parse(movie1.getMovieWatchLink());
// With this line the Youtube application, if installed, will launch immediately.
// Without it you will be prompted with a list of the application to choose.
uri = Uri.parse("vnd.youtube:"+ uri.getQueryParameter("v"));
Intent intent = new Intent("android.intent.action.VIEW", uri);
VideoActivity.this.startActivity(intent); 
```

我正在传递 youtube 视频 URL

当我运行上述语句时，我无法启动活动，任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T05:58:38.900

您可以在 webview 中使用此代码来加载 URL

```
 <iframe width="560" height="315" src="http://www.youtube.com/embed/...." frameborder="0"     allowfullscreen></iframe> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T06:03:17.830

你可以试试这个：

```
public class VideoWebview extends Activity {

    WebView webView;
    String htmlPre = "<!DOCTYPE html><html lang=\"en\"><head><meta charset=\"utf-8\"></head><body style='margin:0; pading:0; background-color: black;'>";  
    String htmlCode = 
            " <embed style='width:100%; height:100%' src='http://www.platipus.nl/flvplayer/download/1.0/FLVPlayer.swf?fullscreen=true&video=@VIDEO@' " +
            "  autoplay='true' " +
            "  quality='high' bgcolor='#000000' " +
            "  name='VideoPlayer' align='middle'" + // width='640' height='480' 
            "  allowScriptAccess='*' allowFullScreen='true'" +
            "  type='application/x-shockwave-flash' " +
            "  pluginspage='http://www.macromedia.com/go/getflashplayer' />" +
            "";
    String htmlPost = "</body></html>";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.videowebview); 

          String url= "Your url";
         System.out.println("url="+url);

        webView = (WebView)findViewById(R.id.webview);

        webView.getSettings().setJavaScriptEnabled(true);
        webView.getSettings().setAllowFileAccess(true);
        webView.getSettings().setPluginsEnabled(true);
        webView.setScrollBarStyle(View.SCROLLBARS_OUTSIDE_OVERLAY); //thanks Patrick!

        htmlCode = htmlCode.replaceAll("@VIDEO@",url);
        webView.loadDataWithBaseURL("fake://fake/fake", htmlPre+htmlCode+htmlPost, "text/html", "UTF-8", null);  
    } 
```

# codeigniter - 如何使用 Express Checkout 创建定期付款资料

> ID：15470419
> 
> 赞同：1
> 
> 时间：2013-03-18T05:43:22.343
> 
> 标签：codeigniter, paypal, payment-gateway, express-checkout

我目前正在我的网站中集成贝宝定期付款流程。我用了这段代码

```
 function process()
    {
    include_once("config.php");
    include_once("paypal.class.php");

    if($_POST) //Post Data received from product list page.
{
    //Mainly we need 4 variables from an item, Item Name, Item Price, Item Number and Item Quantity.
    $ItemName = $_POST["itemname"]; //Item Name
    $ItemPrice = $_POST["itemprice"]; //Item Price
    $ItemNumber = $_POST["itemnumber"]; //Item Number
    $ItemQty = $_POST["itemQty"]; // Item Quantity
    $ItemTotalPrice = ($ItemPrice*$ItemQty); //(Item Price x Quantity = Total) Get total amount of product; 

    //Data to be sent to paypal
    $padata =   '&CURRENCYCODE='.urlencode($PayPalCurrencyCode).
                '&PAYMENTACTION=Sale'.
                '&ALLOWNOTE=1'.
                '&PAYMENTREQUEST_0_CURRENCYCODE='.urlencode($PayPalCurrencyCode).
                '&PAYMENTREQUEST_0_AMT='.urlencode($ItemTotalPrice).
                '&PAYMENTREQUEST_0_ITEMAMT='.urlencode($ItemTotalPrice). 
                '&L_PAYMENTREQUEST_0_QTY0='. urlencode($ItemQty).
                '&L_PAYMENTREQUEST_0_AMT0='.urlencode($ItemPrice).
                '&L_PAYMENTREQUEST_0_NAME0='.urlencode($ItemName).
                '&L_PAYMENTREQUEST_0_NUMBER0='.urlencode($ItemNumber).
                '&AMT='.urlencode($ItemTotalPrice). 
                '&L_BILLINGTYPE0='.urlencode('RecurringPayments').
                '&L_BILLINGAGREEMENTDESCRIPTION0='.urlencode('message plan').               
                '&RETURNURL='.urlencode($PayPalReturnURL ).
                '&CANCELURL='.urlencode($PayPalCancelURL);

        //We need to execute the "SetExpressCheckOut" method to obtain paypal token
        $paypal= new MyPayPal();
        $httpParsedResponseAr = $paypal->PPHttpPost('SetExpressCheckout', $padata, $PayPalApiUsername, $PayPalApiPassword, $PayPalApiSignature, $PayPalMode);

        //Respond according to message we receive from Paypal
        if("SUCCESS" == strtoupper($httpParsedResponseAr["ACK"]) || "SUCCESSWITHWARNING" == strtoupper($httpParsedResponseAr["ACK"]))
        {

                // If successful set some session variable we need later when user is redirected back to page from paypal. 
                $_SESSION['itemprice'] =  $ItemPrice;
                $_SESSION['totalamount'] = $ItemTotalPrice;
                $_SESSION['itemName'] =  $ItemName;
                $_SESSION['itemNo'] =  $ItemNumber;
                $_SESSION['itemQTY'] =  $ItemQty;

                if($PayPalMode=='sandbox')
                {
                    $paypalmode     =   '.sandbox';
                }
                else
                {
                    $paypalmode     =   '';
                }
                //Redirect user to PayPal store with Token received.
                $paypalurl ='https://www'.$paypalmode.'.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token='.$httpParsedResponseAr["TOKEN"].'';
                header('Location: '.$paypalurl);

        }else{
            //Show error message
            echo '<div style="color:red"><b>Error : </b>'.urldecode($httpParsedResponseAr["L_LONGMESSAGE0"]).'</div>';
            echo '<pre>';
            print_r($httpParsedResponseAr);
            echo '</pre>';
        }

}

//Paypal redirects back to this page using ReturnURL, We should receive TOKEN and Payer ID
if(isset($_GET["token"]) && isset($_GET["PayerID"]))
{
    //we will be using these two variables to execute the "DoExpressCheckoutPayment"
    //Note: we haven't received any payment yet.

    $token = $_GET["token"];
    $playerid = $_GET["PayerID"];

    //get session variables
    $ItemPrice      = $_SESSION['itemprice'];
    $ItemTotalPrice = $_SESSION['totalamount'];
    $ItemName       = $_SESSION['itemName'];
    $ItemNumber     = $_SESSION['itemNo'];
    $ItemQTY        =$_SESSION['itemQTY'];

    $padata =   '&TOKEN='.urlencode($token).
                        '&PAYERID='.urlencode($playerid).
                        '&PAYMENTACTION='.urlencode("SALE").
                        '&AMT='.urlencode($ItemTotalPrice).
                        '&CURRENCYCODE='.urlencode($PayPalCurrencyCode).
                        '&NOTIFYURL='.urlencode('http://mywebiste.com/listner');

    //We need to execute the "DoExpressCheckoutPayment" at this point to Receive payment from user.
    $paypal= new MyPayPal();
    $httpParsedResponseAr = $paypal->PPHttpPost('DoExpressCheckoutPayment', $padata, $PayPalApiUsername, $PayPalApiPassword,             $PayPalApiSignature, $PayPalMode);

    //Check if everything went ok..
    if("SUCCESS" == strtoupper($httpParsedResponseAr["ACK"]) || "SUCCESSWITHWARNING" == strtoupper($httpParsedResponseAr["ACK"])) 
    {
            echo '<h2>Success</h2>';
            echo 'Your Transaction ID :'.urldecode($httpParsedResponseAr["TRANSACTIONID"]);

                /*
                //Sometimes Payment are kept pending even when transaction is complete. 
                //May be because of Currency change, or user choose to review each payment etc.
                //hence we need to notify user about it and ask him manually approve the transiction
                */

                if('Completed' == $httpParsedResponseAr["PAYMENTSTATUS"])
                {
                    echo '<div style="color:green">Payment Received! Your product will be sent to you very soon!</div>';
                }
                elseif('Pending' == $httpParsedResponseAr["PAYMENTSTATUS"])
                {
                    echo '<div style="color:red">Transaction Complete, but payment is still pending! You need to manually authorize this payment in your <a target="_new" href="http://www.paypal.com">Paypal Account</a></div>';
                }

            echo '<br /><b>Stuff to store in database :</b><br /><pre>';

                $transactionID = urlencode($httpParsedResponseAr["TRANSACTIONID"]);
                $nvpStr = "&TRANSACTIONID=".$transactionID;
                $paypal= new MyPayPal();
                $httpParsedResponseAr = $paypal->PPHttpPost('GetTransactionDetails', $nvpStr, $PayPalApiUsername, $PayPalApiPassword, $PayPalApiSignature, $PayPalMode);

    if("SUCCESS" == strtoupper($httpParsedResponseAr["ACK"]) || "SUCCESSWITHWARNING" == strtoupper($httpParsedResponseAr["ACK"])) {

                $nvpstr="&TOKEN=".$_GET['token'];
                $nvpstr.="&BILLINGPERIOD=Month";
                $nvpstr.="&BILLINGFREQUENCY=1";
                $nvpstr.="&AMT=1";
                $nvpstr.="&CURRENCYCODE=USD";
                $nvpstr.="&COUNTRYCODE=US";
                $nvpstr.="&PAYERID=".$httpParsedResponseAr['PAYERID'];
                $nvpstr.="&PROFILESTARTDATE=".date('Y-m-d');
                $recurr = $paypal->PPHttpPost('CreateRecurringPaymentsProfile',$nvpStr,$PayPalApiUsername, $PayPalApiPassword, $PayPalApiSignature, $PayPalMode);

                    echo '<pre>';
                    print_r($httpParsedResponseAr);
                    echo '</pre>';

                    print_r($recurr);

                } else  {
                    echo '<div style="color:red"><b>GetTransactionDetails failed:</b>'.urldecode($httpParsedResponseAr["L_LONGMESSAGE0"]).'</div>';
                    echo '<pre>';
                    print_r($httpParsedResponseAr);
                    echo '</pre>';

                }

    }else{
            echo '<div style="color:red"><b>Error : </b>'.urldecode($httpParsedResponseAr["L_LONGMESSAGE0"]).'</div>';
            echo '<pre>';
            print_r($httpParsedResponseAr);
            echo '</pre>';
    }
}

    } 
```

我正在获取令牌和付款人 ID 等。它一切正常。但是当我尝试创建重复配置文件时，我得到了这个响应

```
Array
(
    [TIMESTAMP] => 2013%2d03%2d18T05%3a32%3a06Z
    [CORRELATIONID] => 912b6004f40bb
    [ACK] => Failure
    [VERSION] => 76%2e0
    [BUILD] => 5294323
    [L_ERRORCODE0] => 11585
    [L_ERRORCODE1] => 11518
    [L_ERRORCODE2] => 11516
    [L_ERRORCODE3] => 11519
    [L_ERRORCODE4] => 11549
    [L_SHORTMESSAGE0] => Missing%20Token%20or%20payment%20source
    [L_SHORTMESSAGE1] => Invalid%20billing%20period%2e
    [L_SHORTMESSAGE2] => Invalid%20billing%20frequency
    [L_SHORTMESSAGE3] => Invalid%20amount
    [L_SHORTMESSAGE4] => Start%20Date%20is%20required
    [L_LONGMESSAGE0] => Missing%20Token%20or%20buyer%20credit%20card
    [L_LONGMESSAGE1] => Billing%20period%20must%20be%20one%20of%20Day%2c%20Week%2c%20SemiMonth%2c%20or%20Year
    [L_LONGMESSAGE2] => Billing%20frequency%20must%20be%20%3e%200%20and%20be%20less%20than%20or%20equal%20to%20one%20year
    [L_LONGMESSAGE3] => Bill%20amount%20must%20be%20greater%20than%200
    [L_LONGMESSAGE4] => Subscription%20start%20date%20is%20required
    [L_SEVERITYCODE0] => Error
    [L_SEVERITYCODE1] => Error
    [L_SEVERITYCODE2] => Error
    [L_SEVERITYCODE3] => Error
    [L_SEVERITYCODE4] => Error
) 
```

我不知道我在哪里做错了。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T05:52:42.993

您的请求缺少创建定期付款资料所需的一系列参数。请参考[https://www.x.com/developers/paypal/documentation-tools/express-checkout/integration-guide/ECRecurringPayments](https://www.x.com/developers/paypal/documentation-tools/express-checkout/integration-guide/ECRecurringPayments)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T16:06:06.193

我认为程序是错误的：第二次调用应该是 GetExpressCheckoutDetails 来检索 PAYERID，以便能够执行 CreateRecurringPaymentsProfile。

只需按照本教程一步一步操作： [https ://www.x.com/developers/paypal/documentation-tools/express-checkout/how-to/ht_ec-recurringPaymentProfile-curl-etc](https://www.x.com/developers/paypal/documentation-tools/express-checkout/how-to/ht_ec-recurringPaymentProfile-curl-etc)

# java - 如何处理类中的类？

> ID：15470423
> 
> 赞同：0
> 
> 时间：2013-03-18T05:44:07.363
> 
> 标签：java, class

我目前正在创建一个事件记录器 GUI 程序。然而我遇到了一个非常困难的问题。

我应该如何将对象存储在对象中的对象中？

例如，我有一个活动。本次活动有4类。在第一类（A类）中，有30个展览。在每个节目中，有 20 - 30 名代表。（假设第一次表演 30 次）。...

如何将所有这些信息存储在数组列表中？或者还有其他更好的主意吗？

我也应该将多态性应用于这个吗？事件--> A 类（四个中的第一个）-> 30 个中的第一个显示-> 30 个代表中的 1 个代表-> ... 等等。

谢谢。

我的困惑是，我想将这些中的每一个都视为一个对象。例如，类别是一个对象。节目是一个对象。代表是一个对象。我的问题是如何将对象存储在对象中的对象中等等？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T05:54:18.687

尝试这个

测试.java

```
import java.util.List;

public class Test {
    public List<Category> category;
} 
```

导入 java.util.List；

类别.java

```
public class Category {

    public List<Exhibition> exhibitionShow;
    public void setExhibitionShow(List<Exhibition> exhibitionShow) {
        this.exhibitionShow = exhibitionShow;
    }
    public List<Exhibition> getExhibitionShow() {
        return exhibitionShow;
    }

} 
```

展览.java

导入 java.util.List；

```
public class Exhibition {
    public List<Representative> representative;

    public void setRepresentative(List<Representative> representative) {
        this.representative = representative;
    }

    public List<Representative> getRepresentative() {
        return representative;
    }
} 
```

代表.java

```
public class Representative {   
//add method
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T05:53:15.813

我想你有这个想法。我的想法是创建一种公共方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T05:47:26.400

我不确定你的困惑是什么，你需要做这样的事情

```
class Event{
    Category[] categories;
}

class Category{
    ArrayList<Show> shows;
}

class Show{
    ArrayList<Representative> reps;
}

//.. and so on. 
```

# github - Eclipse Egit 和远程仓库同步

> ID：15470425
> 
> 赞同：1
> 
> 时间：2013-03-18T05:44:15.613
> 
> 标签：github

目前正在与 Git Repo 合作，我还有一个队友，在他提交远程 repo 之后，我得到了所有的更改。我有几个问题

1.  当我将代码与更改合并时，我的工作空间中更改的文件被标记为暂存，我需要提交到本地仓库吗？

2.  我阅读了大量文档，但仍然对最佳同步方式感到困惑，

    目前我执行以下步骤：

    转到 Team->Sync Workspace-> Fetch From Upstream->Mege 。如有错误请指正

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T06:39:26.753

请注意，[Egit 手册](http://wiki.eclipse.org/EGit/User_Guide#Pulling_New_Changes_from_Upstream_Branch)包含一个“拉取”操作，该操作将在一次操作中执行 fetch+merge。

> 右键单击 Package Explorer 中的项目，然后选择**`Team > Pull`**或右键单击 Git Repositories 视图中的存储库，然后选择`Pull`从本地分支正在跟踪的上游分支中提取新更改。

除非存在冲突，否则执行 fetch + merge（如[Egit Merging中）将导致合并提交。](http://wiki.eclipse.org/EGit/User_Guide#Merging)

*   **真正的合并**：当上述条件都不适用时，egit 会触发提交的合并。有两种可能的结果：

    *   如果没有发生冲突，当前分支将指向一个新创建的合并提交；
    *   如果发生冲突，冲突文件将用标签装饰器标记（请参阅[解决合并冲突](http://wiki.eclipse.org/EGit/User_Guide#Resolving_a_merge_conflict)以了解在合并冲突情况下的进一步操作）。

您应该只在第二种情况下看到暂存更改（合并冲突以解决），或者您会看到阶段更改，因为您之前添加到不属于合并的索引文件（它们保持暂存，直到您提交它们）

# qt - 在 QPrintDialog 上添加按钮

> ID：15470426
> 
> 赞同：0
> 
> 时间：2013-03-18T05:44:29.350
> 
> 标签：qt

我正在尝试扩展`QPrintDialog`一些更多特定于应用程序的规定和打印预览。

我可以通过`setOptionTabs`( `const QList<QWidget *>`& `tabs`) 添加应用程序特定选项的选项卡。截至目前，我已将所有新小部件添加到我的新选项卡中。我想在 QPrintDialog 的主框架中添加一个新按钮。有什么办法吗？

我努力了

> QPrintDialog::addButton ( QPushButton * button )

但我想这在 Qt 4 中不再受支持。

# youtube - 嵌入只有播放、暂停和刷新按钮的 youtube 视频

> ID：15470427
> 
> 赞同：0
> 
> 时间：2013-03-18T05:44:34.840
> 
> 标签：youtube, youtube-api, youtube-javascript-api

我想在我的网站中嵌入 youtube 视频。我的要求是播放器应该只有三个选项：播放、暂停和刷新。我想禁用进度条滑块，以便查看器不能向前或向后移动。

我使用了参数“controls=0”，但它完全删除了进度条。我只想禁用拖动功能。

有人知道该怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:04:45.167

设置`autohide=2`应该这样做。

[https://developers.google.com/youtube/player_parameters#autohide](https://developers.google.com/youtube/player_parameters#autohide)

# java - 具有延迟加载能力的单元素枚举类型单例

> ID：15470433
> 
> 赞同：9
> 
> 时间：2013-03-18T05:45:14.363
> 
> 标签：java, jakarta-ee, design-patterns, jvm, singleton

我阅读了许多关于在 Java 中实现单音模式的不同风格的论坛和帖子，并且似乎“枚举是在 Java 中实现单音模式的最佳方式”！我想知道如何使用 Java Enum 在**具有延迟加载**功能的 Java 中实现 SingleTone 模式。因为枚举只是类。第一次使用一个类时，它被 JVM 加载，并且所有的静态初始化都完成了。枚举成员是静态的，所以它们都将被初始化。

**有谁知道我如何使用带有延迟加载支持的枚举？**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-18T05:59:22.617

您阅读的消息来源说这是做懒惰单例的最简单方法的原因是因为它应该可以工作。试试这个：

```
public class LazyEnumTest {
  public static void main(String[] args) throws InterruptedException {
    System.out.println("Sleeping for 5 seconds...");
    Thread.sleep(5000);
    System.out.println("Accessing enum...");
    LazySingleton lazy = LazySingleton.INSTANCE;
    System.out.println("Done.");
  }
}

enum LazySingleton {
  INSTANCE;
  static { System.out.println("Static Initializer"); }
} 
```

这是我在控制台中得到的输出：

```
$ java LazyEnumTest
Sleeping for 5 seconds...
Accessing enum...
Static Initializer
Done. 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-18T05:56:12.970

> 第一次使用一个类时，它被 JVM 加载，并且所有的静态初始化都完成了。枚举成员是静态的，所以它们都将被初始化。

实际上，类加载器仅在您第一次访问此类后才加载类（听起来很有趣）。*访问enum-singleton*类的唯一原因之一是获取它的实例。

这就是为什么 Java 中的单元素枚举类型 singletone 被称为**惰性**的——它的值在你第一次访问它之前没有被初始化。

## 类似的问题：

*   [Java：延迟初始化单例](https://stackoverflow.com/questions/5842273/java-lazy-initializing-singleton)
*   [延迟加载的单例：双重检查锁定与按需初始化持有者成语](https://stackoverflow.com/questions/6189099/lazy-loaded-singleton-double-checked-locking-vs-initialization-on-demand-holder)

# c# - 在网格视图中实现 Inc 加载？

> ID：15470436
> 
> 赞同：0
> 
> 时间：2013-03-18T05:45:28.597
> 
> 标签：c#, xaml, gridview, windows-8, windows-runtime

我已经实现了增量加载，捕获了 gridview 中的滚动查看器，然后绑定了它的 ViewChanged 事件，如下面的代码所示。我应该实现什么逻辑，当滚动到达页面末尾时，只有它应该调用 web 服务？目前我正在做以下方式：

```
private ScrollViewer _scroll;

this._scroll = GetVisualChild<ScrollViewer>(grdVw1);
            if (_scroll != null)
                _scroll.ViewChanged += scroll_ViewChanged;

async void scrollSnap_ViewChanged(object sender, ScrollViewerViewChangedEventArgs e)
        {
            // Call the web service
            if (_scrollSnap.ScrollableWidth - _scrollSnap.HorizontalOffset < 10)
            {
                // Webservice call
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T12:51:39.267

一种方法是在数据收集对象中实现[ISupportIncrementalLoading 。](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.data.isupportincrementalloading.aspx)如果您的集合实现了这一点，那么当用户滚动到页面末尾时，您的`GridView`或将自动进行数据加载调用。`ListView`

还有[IObserveableVector](https://stackoverflow.com/questions/15436519/winrt-isupportincrementalloading-view-with-both-directions)，但我没用过。

# android - 当视频录制接近其在android中的最大长度时执行操作

> ID：15470437
> 
> 赞同：0
> 
> 时间：2013-03-18T05:45:37.587
> 
> 标签：android, video, android-intent

我正在开发一个视频播放器，在它录制视频的那一刻，当点击 StopButton 或接近最大限制时保存它。然后我可以通过单击播放按钮来播放它。我想要的是，当它达到最大限制时，可以说 60 秒的视频录制，它可以执行一些操作，例如自动启动播放视频的活动。以下是我的代码：

```
public class VideoComponent extends Activity  {
    private SurfaceHolder surfaceHolder;
    private SurfaceView surfaceView;
    public MediaRecorder mrec = new MediaRecorder();
    private Button startRecording = null;
    private Button stopRecording = null;
    private Button play = null;
    int BytesPerElement = 2;

    File video;
    private Camera mCamera;
    File audiofile = null;
    boolean recording=false;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main1);

        startRecording = (Button)findViewById(R.id.buttonstart);
        stopRecording = (Button)findViewById(R.id.button1);
        play=(Button)findViewById(R.id.play);

        mCamera = Camera.open();
        surfaceView = (SurfaceView) findViewById(R.id.surface_camera);

        surfaceHolder = surfaceView.getHolder();

        surfaceHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
        startRecording.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                try {
                    if(recording==false)
                        startRecording();

                } catch (IOException e) {
                    Log.i("test" , "Video Not starting");

                }

            }
        });
        stopRecording.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {

                    recording=false;
                    stopRecording();

            }
        });
        play.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                Intent i= new Intent(getApplicationContext(),VideoPlayer.class);
                i.putExtra("URI", audiofile.getAbsolutePath());
                startActivity(i);
            }
        });

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu)
    {
          Log.i("Test" , "Menu thing");
        menu.add(0, 0, 0, "StartRecording");
        menu.add(0, 1, 0, "StopRecording");
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item)
    {
        switch (item.getItemId())
        {
        case 0:
            try {
                  Log.i("Test" , "Start Recording");
                startRecording();
            } catch (Exception e) {
                String message = e.getMessage();
                Log.i("Self", "Problem Start"+message);
                mrec.release();
            }
            break;

        case 1: //GoToAllNotes
            mrec.stop();
            mrec.release();
            mrec = null;
            break;

        default:
            break;
        }
        return super.onOptionsItemSelected(item);
    }

    public void startRecording() throws IOException 
    {
        recording=true;
         File sampleDir = Environment.getExternalStorageDirectory();
            try {
              audiofile = File.createTempFile("Video", ".3gp", sampleDir);
            } catch (IOException e) {

              return;}
            int minBufferSize = AudioRecord.getMinBufferSize(8000, 
                 AudioFormat .CHANNEL_IN_MONO, 
                 AudioFormat.ENCODING_PCM_16BIT);
        mrec = new MediaRecorder();  // Works well

        mCamera.unlock();
        mrec.setCamera(mCamera);

        mrec.setPreviewDisplay(surfaceHolder.getSurface());
        mrec.setVideoSource(MediaRecorder.VideoSource.CAMERA);
        mrec.setAudioSource(MediaRecorder.AudioSource.MIC);
        mrec.setMaxDuration(60000);
        mrec.setAudioSamplingRate(16000);
        mrec.setProfile(CamcorderProfile.get(CamcorderProfile.QUALITY_HIGH));
        mrec.setPreviewDisplay( surfaceHolder.getSurface());
        mrec.setOutputFile(audiofile.getAbsolutePath()); 
        mrec.prepare();
        mrec.start();

    }

    protected void stopRecording() {
        mrec.stop();
        mrec.release();
        mCamera.lock();
        mCamera.release();
        Log.i("testing","going to call Destroyer");
        //surfaceDestroyed(surfaceHolder);

        //mCamera.stopPreview();

         //finish();
    }

   private void releaseMediaRecorder(){
       Log.i("testing","re;ease Media record"); 
       if (mrec != null) {
            mrec.reset();   // clear recorder configuration
            mrec.release(); // release the recorder object
            mrec = null;
            mCamera.lock();           // lock camera for later use
        }
    }

    private void releaseCamera(){
           Log.i("testing","re;ease Camera");
        if (mCamera != null){
            mCamera.release();        // release the camera for other applications
            mCamera = null;
        }
    }
} 
```

视频播放器类：

```
public class VideoPlayer extends Activity {
VideoView videoView;
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);

    //Create a VideoView widget in the layout file
    //use setContentView method to set content of the activity to the layout file which contains videoView
    this.setContentView(R.layout.video);
    Intent i= getIntent();
    String uri=i.getStringExtra("URI");
    Log.i("test" , uri);

    videoView = (VideoView)this.findViewById(R.id.videoView);

    //add controls to a MediaPlayer like play, pause.
    MediaController mc = new MediaController(this);
    videoView.setMediaController(mc);

    //Set the path of Video or URI
    videoView.setVideoURI(Uri.parse(uri));

  //Set the focus
    videoView.requestFocus();
    videoView.start();      }   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T06:03:23.757

考虑使用 CountDownTimer() ...

```
new CountDownTimer(1000, 1000) {

 public void onTick(long millisUntilFinished) {
     mTextField.setText("seconds remaining: " + millisUntilFinished / 1000);
 }

 public void onFinish() {
     mTextField.setText("done!");
 }
  }.start(); 
```

[http://developer.android.com/reference/android/os/CountDownTimer.html](http://developer.android.com/reference/android/os/CountDownTimer.html)

# c# - 填充数据网格视图

> ID：15470445
> 
> 赞同：1
> 
> 时间：2013-03-18T05:46:48.330
> 
> 标签：c#, winforms, .net-3.5

我有一个“人”对象列表：

```
public class Person
{
   public Int32 Id { get; set; }
   public String Name { get; set; }
   public Document oDocument  { get; set; }
} 
```

还有 Document 类。

```
public class Document
{
   public String Type { get; set; }
   public String Code { get; set; }
} 
```

我需要使用仅显示两列的列表填充 DataGridView：Name(Person) 和 DocumentCode (Document)

我使用了这段代码，但我没有得到我想要的。

```
 dgvPersona.DataSource = list; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T05:51:07.623

您需要选择一个[匿名类型](http://msdn.microsoft.com/en-us/library/vstudio/bb397696.aspx)对象*（以投射必填字段）*，然后将其绑定到您的 gridview，如：

```
var list = (from p in persons
            select new 
                   {
                   Name = p.Name,
                   DocumentCode = p.Document.Code
                   }).ToList();

dgvPersona.DataSource = list; 
```

您也可以选择 并将`Id`其保存在 gridview 的隐藏列中，以便稍后您可以将其用于记录更新等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T05:53:53.143

试试这个：

```
 public class Person
        {
            public Int32 Id { get; set; }
            public String Name { get; set; }
            public Document oDocument { get; set; }
        }
        public class Document
        {
            public String Type { get; set; }
            public String Code { get; set; }
        }

     List<Person> list = new List<Person>();
     dgvPersona.DataSource= list.Select(data => new { data.Name, data.oDocument.Code }).ToList(); 
```

# iphone - AvAudiorecorder 在 iOS 5.1.1 和 iPhone4 中无法正常运行

> ID：15470449
> 
> 赞同：1
> 
> 时间：2013-03-18T05:47:09.547
> 
> 标签：iphone, ios, objective-c, ipad, avaudiorecorder

我正在开发我的应用程序中的录音功能。我正在使用这段代码：

```
-(void)startAudioRecorder:(NSError**)error{

    AVAudioSession *audioSession = [AVAudioSession sharedInstance];
    NSError *err = nil;
    [audioSession setCategory :AVAudioSessionCategoryPlayAndRecord error:&err];
    if(err){
        NSLog(@"audioSession: %@ %d %@", [err domain], [err code], [[err userInfo] description]);
        return;
    }
    [audioSession setActive:YES error:&err];

        NSMutableDictionary* recordSetting = [[NSMutableDictionary alloc] init] ;
        [recordSetting setValue :[NSNumber numberWithInt:kAudioFormatMPEG4AAC] forKey:AVFormatIDKey];//kAudioFormatAppleIMA4,kAudioFormatAAC
        [recordSetting setValue:[NSNumber numberWithFloat:44100.0] forKey:AVSampleRateKey];
        [recordSetting setValue:[NSNumber numberWithInt: 1] forKey:AVNumberOfChannelsKey];

    NSString *absolutePath=[self getAbsoluteAudioFilePath];
    if([[NSFileManager defaultManager] fileExistsAtPath:absolutePath]){
       // [[NSFileManager defaultManager ] removeItemAtPath:absolutePath error:nil];
    }
    NSError *audioRecorderError=nil;
    NSURL *absoluteUrl=[NSURL fileURLWithPath:absolutePath];

    self.audioRecorder=[[[AVAudioRecorder alloc] initWithURL:absoluteUrl settings:recordSetting error:&audioRecorderError] autorelease];
    NSLog(@"%s audioRecorder created=%@",__func__,self.audioRecorder);

    [self.audioRecorder setDelegate: self];
    BOOL prepared=[self.audioRecorder prepareToRecord];
    BOOL record=[self.audioRecorder record];

    if(!prepared || !record){
        UIAlertView *alert=[[UIAlertView alloc] initWithTitle:@"message" message:@"something wrong" delegate:nil cancelButtonTitle:@"ok" otherButtonTitles: nil];
        [alert show];
        [alert release];
    }
    *error=audioRecorderError;
    //[recordSetting release];
    //recordSetting=nil;

} 
```

从各种博客中，我找到了上面的录制代码，它在所有 iOS 设备上都按预期工作，我已经在 iPad、iPod 和 iPhone 上进行了测试。不幸的是，上面的代码在**iPhone 4、iOS 5.1.1**设备中以非常少的声音录制，其余所有组合都很好，我已经在语音备忘录中打开并录制了我的声音，同一硬件设备的 SpeakEasy 应用程序这两个应用程序运行良好，这意味着硬件运作良好。

是否有任何修改可以解决我的问题？录制高质量声音的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-08-15T11:06:15.553

*（代表问题作者发布解决方案，将其移至答案部分）*。

在我的方法中添加了以下行来解决问题

```
 NSError *setCategoryErr = nil;
    NSError *activationErr  = nil;
    //Set the general audio session category
    [[AVAudioSession sharedInstance] setCategory: AVAudioSessionCategoryPlayAndRecord error: &setCategoryErr];

    //Make the default sound route for the session be to use the speaker
    UInt32 doChangeDefaultRoute = 1;
    AudioSessionSetProperty (kAudioSessionProperty_OverrideCategoryDefaultToSpeaker, sizeof (doChangeDefaultRoute), &doChangeDefaultRoute);

    //Activate the customized audio session
    [[AVAudioSession sharedInstance] setActive: YES error: &activationErr]; 
```

# iphone - 是否可以在后台使用 Avplayer 播放视频？

> ID：15470452
> 
> 赞同：18
> 
> 时间：2013-03-18T05:47:18.257
> 
> 标签：iphone, ios, ios5, video, avplayer

我正在使用 Avplayer 显示视频剪辑，当我返回（后台应用程序）时视频停止。我怎样才能继续播放视频？

我搜索了后台任务和后台线程，IOS 只支持后台音乐（不是视频） [http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html)

这是一些关于在后台播放视频的讨论

1) [https://discussions.apple.com/thread/2799090?start=0&tstart=0](https://discussions.apple.com/thread/2799090?start=0&tstart=0)

2) [http://www.cocoawithlove.com/2011/04/background-audio-through-ios-movie.html](http://www.cocoawithlove.com/2011/04/background-audio-through-ios-movie.html)

但是 AppStore 中有很多应用程序，它们在后台播放视频，例如

斯威夫特播放器： [https ://itunes.apple.com/us/app/swift-player-speed-up-video/id545216639?mt=8&ign-mpt=uo%3D2](https://itunes.apple.com/us/app/swift-player-speed-up-video/id545216639?mt=8&ign-mpt=uo%3D2)

SpeedUpTV： [https ://itunes.apple.com/ua/app/speeduptv/id386986953?mt=8](https://itunes.apple.com/ua/app/speeduptv/id386986953?mt=8)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-22T06:53:16.367

此方法支持所有可能性：

*   屏幕被用户锁定；
*   项目清单
*   按下主页按钮；

只要您有一个运行 iOS 的 AVPlayer 实例，就可以防止设备自动锁定。

首先，您需要配置应用程序以支持 Info.plist 文件中的音频背景，并在 UIBackgroundModes 数组中添加音频元素。

然后将您的 AppDelegate.m 放入

**- （BOOL）应用程序：（UIApplication *）应用程序didFinishLaunchingWithOptions：（NSDictionary *）launchOptions：**

这些方法

```
[[AVAudioSession sharedInstance] setDelegate: self];    
[[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryPlayback error:nil]; 
```

和**#import < AVFoundation/AVFoundation.h >**

然后在控制 AVPlayer 的视图控制器中

```
-(void)viewDidAppear:(BOOL)animated
{
  [super viewDidAppear:animated];
  [[UIApplication sharedApplication] beginReceivingRemoteControlEvents];
  [self becomeFirstResponder];
} 
```

和

```
- (void)viewWillDisappear:(BOOL)animated
{
    [mPlayer pause];    
    [super viewWillDisappear:animated];
    [[UIApplication sharedApplication] endReceivingRemoteControlEvents];
    [self resignFirstResponder];
} 
```

然后回应

```
 - (void)remoteControlReceivedWithEvent:(UIEvent *)event {
        switch (event.subtype) {
            case UIEventSubtypeRemoteControlTogglePlayPause:
                if([mPlayer rate] == 0){
                    [mPlayer play];
                } else {
                    [mPlayer pause];
                }
                break;
            case UIEventSubtypeRemoteControlPlay:
                [mPlayer play];
                break;
            case UIEventSubtypeRemoteControlPause:
                [mPlayer pause];
                break;
            default:
                break;
        }
    } 
```

如果用户按下主页按钮，则需要另一个技巧来恢复再现（在这种情况下，再现会因淡出而暂停）。

当您控制视频的再现时（我有播放方法）设置

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(applicationDidEnterBackground:) name:UIApplicationDidEnterBackgroundNotification object:nil]; 
```

以及要调用的相应方法，该方法将启动计时器并恢复再现。

```
- (void)applicationDidEnterBackground:(NSNotification *)notification
{
    [mPlayer performSelector:@selector(play) withObject:nil afterDelay:0.01];
} 
```

它适用于我在 Backgorund 中播放视频。谢谢大家。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T05:56:06.797

如果您尝试更改后台模式：对不起，App Store 不会批准。[MPMoviePlayerViewController 在进入 youtube 后台后播放视频](https://stackoverflow.com/questions/15389989/mpmovieplayerviewcontroller-playback-video-after-going-to-background-for-youtube)

在我的研究中，有人会在进入后台时将音轨拿出​​来在后台播放，因为视频会暂停并获得播放时间以在进入前台时恢复播放

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-22T05:42:47.123

无法使用 Avplayer 播放背景音乐/视频。但可以使用

MPMoviePlayerViewController。我已经在我的一个应用程序中使用这个播放器和这个应用程序做到了这一点

成功运行到应用商店。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-23T07:57:00.217

试试这个片段，我已经将它与我的应用程序集成，它对我很有用..希望这对你有用！

请按照以下步骤操作：

*   在 APPNAME-Info.plist 中添加 UIBackgroundModes，选择 App 播放音频
*   然后将 AudioToolBox 框架添加到文件夹 frameworks 中。
*   在 APPNAMEAppDelegate.h 中添加：

    --`#import < AVFoundation/AVFoundation.h>`

    --`#import < AudioToolbox/AudioToolbox.h>`

*   在 APPNAMEAppDelegate.m 中添加以下内容：

    // 设置音频会话

    ```
     NSError *sessionError = nil;

        [[AVAudioSession sharedInstance] setDelegate:self];

        [[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryPlayAndRecord error:&sessionError]; 
    ```

*   /* 选择其中任何一个 */

*   // 1\. 覆盖输出音频路由

> //UInt32 audioRouteOverride = kAudioSessionOverrideAudioRoute_Speaker; //AudioSessionSetProperty(kAudioSessionProperty_OverrideAudioRoute, sizeof(audioRouteOverride), &audioRouteOverride);

==================================================== =======================

// 2\. 更改默认输出音频路由

```
UInt32 doChangeDefaultRoute = 1;

AudioSessionSetProperty(kAudioSessionProperty_OverrideCategoryDefaultToSpeaker, sizeof(doChangeDefaultRoute), &doChangeDefaultRoute); 
```

进入

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions { 
```

*   但在这两行之前：

    [self.window addSubview:viewController.view];

    [self.window makeKeyAndVisible];

享受编程！！

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-06-15T04:56:47.480

已接受答案的 Swift 版本。

在代表中：

```
AVAudioSession.sharedInstance().setCategory(AVAudioSessionCategoryPlayback, error: nil)
AVAudioSession.sharedInstance().setActive(true, error: nil) 
```

在控制 AVPlayer 的视图控制器中

```
override func viewDidAppear(animated: Bool) {
    UIApplication.sharedApplication().beginReceivingRemoteControlEvents()
    self.becomeFirstResponder()
}

override func viewWillDisappear(animated: Bool) {
    mPlayer.pause()
    UIApplication.sharedApplication().endReceivingRemoteControlEvents()
    self.resignFirstResponder()
} 
```

不要忘记“导入 AVFoundation”

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-20T07:06:32.287

除了 fattomhk 的响应之外，您还可以执行以下操作来将视频转发到应用程序进入前台后的时间：

*   `currentPlaybackTime`转到后台时获取播放视频并将其存储在`lastPlayBackTime`
*   存储应用程序进入后台的时间（`userDefault`可能）
*   再次获得应用程序进入前台的时间
*   计算`duration`背景时间和前景时间
*   将视频的当前播放时间设置为`lastPlayBackTime`+`duration`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-05-08T06:56:23.787

如果您正在使用 WebView 播放视频，您可以使用 javascript 在后台播放视频。

```
strVideoHTML = @"<html><head><style>body.........</style></head> <body><div id=\"overlay\"><div id=\"youtubelogo1\"></div></div><div id=\"player\"></div> <script> var tag = document.createElement('script'); tag.src = \"http://www.youtube.com/player_api\"; var firstScriptTag = document.getElementsByTagName('script')[0]; firstScriptTag.parentNode.insertBefore(tag, firstScriptTag); var player; events: { 'onReady': onPlayerReady, } }); } function onPlayerReady(event) { event.target.playVideo(); } function changeBG(url){ document.getElementById('overlay').style.backgroundImage=url;} function manualPlay() {  player.playVideo(); }  function manualPause() {  player.pauseVideo(); }  </script></body> </html>";

NSString *html = [NSString stringWithFormat:strVideoHTML,url, width, height,videoid;
webvideoView.delegate = self;
[webvideoView loadHTMLString:html baseURL:[NSURL URLWithString:@"http://www.your-url.com"]]; 
```

在视图中消失呼叫

```
strscript = @"manualPlay();
[webvideoView stringByEvaluatingJavaScriptFromString:strscript]; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-10-01T01:21:51.537

我想添加一些由于某种原因最终成为我的罪魁祸首的东西。我已经使用 AVPlayer 和后台播放很长一段时间没有问题，但这一次我无法让它工作。

我发现当你进入后台时，有时该`rate`属性`AVPlayer`似乎下降到 0.0（即暂停），因此我们只需要随时检查速率属性，或者至少在我们进入后台时。如果速率下降到 0.0 以下并且我们可以假设用户想要播放（即用户没有故意点击遥控器中的暂停、电影结束等），我们需要`.play()`再次调用 AVPlayer。

AFAIK AVPlayer 上没有其他开关可以防止它在应用程序进入后台时自行暂停。

# validation - 验证子集之间的唯一性

> ID：15470456
> 
> 赞同：0
> 
> 时间：2013-03-18T05:47:54.580
> 
> 标签：validation, ruby-on-rails-3.2

我有一个“简单”的 rails 问题，我找不到任何文档，我希望有人能指出我正确的方向。

我有一个模型，称为具有状态属性的类别。我希望能够验证状态不同于“void”的所有记录中类别名称的唯一性。

为了实现这一点，现在我创建了一个自定义验证器，但我想有一个内置选项可以实现这一点。我对吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T06:09:58.473

您可能想看看条件验证。例如，如果您`.not_void?`的模型上有一个方法，您可以使用：

```
validates :category, uniqueness: true, if: :not_void? 
```

还有使用字符串（得到`eval`'d）或 proc 的选项——查看[验证指南](http://guides.rubyonrails.org/active_record_validations_callbacks.html#using-a-symbol-with-if-and-unless)以获取更多信息。

* * *

**编辑：**基于澄清问题的新答案

据我了解，使用内置验证器实现您所追求的目标可能有点困难，因为您想验证任何非无效状态的唯一性。可以使用该`:scope`选项检查限制记录的唯一性确定，因此您可以查看向表中添加一个额外的布尔字段并使用它来确定唯一性。例如，如果您向`void`表/模型添加了一个属性，您可以获得您想要的行为

```
# category.rb
before_validation :set_void

def set_void
  self.void = (state == "void")
end

validates :category, uniqueness: { scope: :void }, unless: :void 
```

这将在验证之前自动更新`void`属性，然后验证类别的名称与所有其他非无效类别相比是唯一的（只要该类别自己的状态不是无效的）。

# ruby-on-rails - Rails：Sql 注入问题？

> ID：15470457
> 
> 赞同：1
> 
> 时间：2013-03-18T05:48:06.367
> 
> 标签：ruby-on-rails, ruby-on-rails-3, sql-injection

我的控制器使用以下方法找到用户：

```
@user = User.find_by_identifier!(params[:id]) 
```

在我的用户模型中，我有

```
class User < ActiveRecord::Base

      def to_param
        identifier
      end

private 

  def create_identifier
    SecureRandom.urlsafe_base64(9)
  end
end 
```

问题：这对于 SQL 注入点是否安全？怎么会这样，因为尽管阅读了各种文章，但我对 SQL 注入一无所知。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T05:55:23.097

在我自己的控制台中进行的快速实验表明，它`find_by_identifier!`可以安全地防止 SQL 注入。

```
irb(main):005:0> User.find_by_email! "i am sneaky '; drop table woot;"
  User Load (0.8ms)  SELECT "users".* FROM "users" WHERE "users"."email" = 'derp ''; drop table woot;' LIMIT 1 
```

注意生成的 SQL 查询是如何避开恶意单引号的。

我相信你的模型中的`to_param`and是无关紧要的。`create_identifier`

# uitableview - 连接时 NSString 具有空值

> ID：15470459
> 
> 赞同：0
> 
> 时间：2013-03-18T05:48:36.953
> 
> 标签：uitableview, ios5, nsstring, abpeoplepickerview

我有一个包含多个部分的 UITableView。tableview 的一部分有 2 行，其中一个是可编辑的（插入按钮），另一个显示地址簿中的名称。单击单元格中的插入按钮，我正在加载 peoplePickerView 并选择一个联系人。

我从通讯录中获取联系人为

```
- (BOOL)peoplePickerNavigationController: (ABPeoplePickerNavigationController *)peoplePicker shouldContinueAfterSelectingPerson:(ABRecordRef)person {

    NSString *firstName = (__bridge NSString *)ABRecordCopyValue(person, kABPersonFirstNameProperty);

    NSString *middleName = (__bridge NSString *)ABRecordCopyValue(person, kABPersonMiddleNameProperty);

    NSString *lastName = (__bridge NSString *)ABRecordCopyValue(person, kABPersonLastNameProperty);

    self.contactName = [NSString stringWithFormat:@"%@/%@/%@", firstName ?: @"", middleName ?: @"", lastName ?: @""];

    [self.myTableView reloadData];
    [self dismissViewControllerAnimated:YES completion:nil];
    return NO;
} 
```

在 tableview 的 cellForRowAtIndexPath

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{ 
    if(indexPath.section == 0){
        if(indexPath.row == 0){
        cell.textLabel.text = self.contactName;
        NSLog(@"Contact Name %@", self.contactName);
    }
    else{
        cell.textLabel.text = @"";
    }
}
} 
```

当我设置为字符串时，只有 firstname 属性，然后字符串具有正确的值，但是当我尝试连接字符串（first +middle+last names）并重新加载 tableview 时，我得到一个空值。我做错了什么，我该如何纠正？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T05:59:14.483

尝试替换以下行..

```
self.contactName = [NSString stringWithFormat:@"%@/%@/%@", firstName ?: @"", middleName ?: @"", lastName ?: @""]; 
```

像这样检查..

```
self.contactName = [[NSString alloc] initWithFormat:@"%@/%@/%@", firstName ?: @"", middleName ?: @"", lastName ?: @""]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T16:34:31.663

我做错的是将属性contactName 声明为weak

```
@property(nonatomic, weak) NSString *contactName; 
```

还要按照 Ahmad 的建议在连接字符串之前检查 null。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T06:10:03.953

你必须确保两件事

1.  在调用 viewDidLoad 之前，您正在初始化 self.contactName，`[NSString stringWithFormat...`请执行以下操作`self.contactName = [NSString alloc] init]`

2.如果您尝试将一个 nil 字符串连接到一个字符串，最终结果也是 nil，请确保连接代码中包含的所有字符串都有值而不是 nil

# r - 如何使用 GGPLOT 创建多面相关图

> ID：15470463
> 
> 赞同：5
> 
> 时间：2013-03-18T05:49:09.737
> 
> 标签：r, plot, ggplot2

我有一个按以下方式创建的数据框。

```
library(ggplot2)

x <- data.frame(letters[1:10],abs(rnorm(10)),abs(rnorm(10)),type="x")
y <- data.frame(letters[1:10],abs(rnorm(10)),abs(rnorm(10)),type="y")
 # in reality the number of row could be larger than 10 for each x and y

all <- rbind(x,y)
colnames(all) <- c("name","val1","val2","type") 
```

我想要做的是创建一个看起来大致像这样的多面 ggplot：

![在此处输入图像描述](../Images/424c7fb1eb23744707edc25ebef3f536.png)

因此，上面的每个方面都是以下的相关图：

```
# Top left facet
subset(all,type=="x")$val1 
subset(all,type=="y")$val1

# Top right facet
subset(all,type=="x")$val1 
subset(all,type=="y")$val2

# ...etc.. 
```

但我坚持使用以下代码：

```
p <- ggplot(all, aes(val1, val2))+ geom_smooth(method = "lm")  + geom_point() +
facet_grid(type ~ ) 
# Calculate correlation for each group
cors <- ddply(all, c(type ~ ), summarise, cor = round(cor(val1, val2), 2))
p + geom_text(data=cors, aes(label=paste("r=", cor, sep="")), x=0.5, y=0.5) 
```

正确的方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-18T05:53:51.463

您的某些代码不正确。这对我有用：

```
p <- ggplot(all, aes(val1, val2))+ geom_smooth(method = "lm")  + geom_point() +
  facet_grid(~type) 
# Calculate correlation for each group
cors <- ddply(all, .(type), summarise, cor = round(cor(val1, val2), 2))
p + geom_text(data=cors, aes(label=paste("r=", cor, sep="")), x=1, y=-0.25) 
```

![在此处输入图像描述](../Images/f3a797ee10c9b637679f93c10442e974.png)

**编辑：**按照 OP 的评论和编辑。这个想法是用所有四种组合重新创建数据，然后再分面。

```
# I consider the type in your previous data to be xx and yy
dat <- data.frame(val1 = c(rep(all$val1[all$type == "x"], 2), 
                           rep(all$val1[all$type == "y"], 2)), 
                  val2 = rep(all$val2, 2), 
                  grp1 = rep(c("x", "x", "y", "y"), each=10), 
                  grp2 = rep(c("x", "y", "x", "y"), each=10))

p <- ggplot(dat, aes(val1, val2)) + geom_point() + geom_smooth(method = "lm") + 
     facet_grid(grp1 ~ grp2)
cors <- ddply(dat, .(grp1, grp2), summarise, cor = round(cor(val1, val2), 2))
p + geom_text(data=cors, aes(label=paste("r=", cor, sep="")), x=1, y=-0.25) 
```

![在此处输入图像描述](../Images/a90974e0148c63e8ca44b56b13380643.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T07:33:15.573

由于您的数据格式不正确，因此在绘制之前需要进行一些整形。

首先，将数据重塑为长格式：

```
library(reshape2)
allM <- melt(all[-1], id.vars = "type") 
```

沿`type`和`val1`vs.拆分值`val2`：

```
allList <- split(allM$value, interaction(allM$type, allM$variable)) 
```

创建所有组合的列表：

```
allComb <- unlist(lapply(c(1, 3), 
                  function(x)
                    lapply(c(2 ,4), 
                           function(y) 
                             do.call(cbind, allList[c(x, y)]))), 
           recursive = FALSE) 
```

创建一个新数据集：

```
allNew <- do.call(rbind, 
                  lapply(allComb, function(x) {
                                    tmp <- as.data.frame(x)
                                    tmp <- (within(tmp, {xval <- names(tmp)[1]; 
                                                         yval <- names(tmp)[2]}))
                                    names(tmp)[1:2] <- c("x", "y")
                                    tmp})) 
```

阴谋：

```
library(ggplot2)
p <- ggplot(allNew, aes(x = x, y = y)) + 
       geom_smooth(method = "lm")  + 
       geom_point() +
       facet_grid(yval ~ xval) 
# Calculate correlation for each group
library(plyr)
cors <- ddply(allNew, .(yval, xval), summarise, cor = round(cor(x, y), 2))
p + geom_text(data=cors, aes(label=paste("r=", cor, sep="")), x=0.5, y=0.5) 
```

![在此处输入图像描述](../Images/0147b23e2aa75b8586efb33a92a61c2f.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-07-05T09:09:01.207

现在有一个额外的软件包`ggpubr`可以解决这个`stat_cor()`函数的问题。

```
library(tidyverse)
library(ggpubr)
ggplot(all, aes(val1, val2))+ 
  geom_smooth(method = "lm")  + 
  geom_point() +  
  facet_grid(~type) +
  stat_cor() 
```

[![在此处输入图像描述](../Images/363fd00426c5487b92a3ae65821ba4d8.png)](https://i.stack.imgur.com/OnbUS.png)

# mysql - 选择相对于 B 列不重复的组 A 列

> ID：15470468
> 
> 赞同：0
> 
> 时间：2013-03-18T05:49:27.393
> 
> 标签：mysql, sql

我想从查询结果中选择不应该相对于另一列重复的值。

![在此处输入图像描述](../Images/b862fb29bec454c027c4123af4d43fe7.png)

在这些屏幕截图中，我只想`function`为每个用户 id 和 object_id 选择一次列作为连接值。例如，在此屏幕截图中，`delete_portfolio_module`用户 id 32782 重复了很多次，所以我只需要使用 max( `id`)、timebox_id、user_id、function、object_id 一次，如下所示，

```
id           |timebox_id|user_id|function                             |object_id
----------------------------------------------------------------------------------------
    3155     |4         |32799  |add_latest_activity_to_portfolio     |7410
    3137     |4         |32797  |add_latest_activity_to_portfolio     |7408
    3133     |4         |32796  |add_latest_activity_to_portfolio     |7406
    3115     |2         |32782  |delete_portfolio_module              |7381,7382,...,7388,7389
    .
    .
    . 
```

Sio，如何在mysql中实现这一点？请帮忙...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T05:52:58.343

您需要对这两列进行分组：`user_id`因此`function`您可以聚合剩余的列。

```
SELECT  MAX(ID) ID,
        MAX(timebox_ID) timebox,
        user_ID,
        `function`,
        GROUP_CONCAT(object_ID) objectList
FROM    TableName
GROUP   BY user_ID, `function` 
```

# java - 在春季使用 ResponseBody 上传图片

> ID：15470469
> 
> 赞同：1
> 
> 时间：2013-03-18T05:49:51.177
> 
> 标签：java, spring-mvc, httprequest

我正在使用此代码上传图片，但我总是得到 415 Unsupported Media Type

```
@RequestMapping(value = "/updateImage" , method = RequestMethod.POST)
    public @ResponseBody ResponseMsg uploadFileHandler( 
            @RequestHeader(value="userid" ,required=false) String userid,
            @RequestHeader(value="name" ,required=false) String name,
            @RequestHeader(value="phone" ,required=false) Integer phone,
            @RequestBody MultipartFile multipartFile, 
            HttpServletRequest request) throws IllegalStateException, IOException {
        System.out.println("hi");
        String orgName = multipartFile.getOriginalFilename();
            orgName = CommonUtils.createUniqueFileName(orgName);

            ServletContext sc = request.getSession().getServletContext();
            String filePath = "uploadedImages/" + orgName;
            String completePath = sc.getRealPath("/") + "/" + filePath;
            File dest = new File(completePath);
            multipartFile.transferTo(dest);

            ResponseMsg responseMsg = CommonUtils.checkParam(userid, name, phone,filePath);
            if (responseMsg.getStatus().equalsIgnoreCase("True"))
                responseMsg = userService.updateProfile(userid, name, phone,filePath);
            return responseMsg;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T07:22:09.380

添加 servlet-context.xml

```
<beans:bean id="multipartResolver" class="org.springframework.web.multipart.commons.CommonsMultipartResolver" /> 
```

在控制器中

公共无效方法（@RequestParam MultipartFile 文件）{..}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T06:13:02.200

*   您的应用程序上下文中是否有[MultipartResolver ，例如：](http://static.springsource.org/spring/docs/3.2.x/javadoc-api/org/springframework/web/multipart/MultipartResolver.html) [CommonsMultipartResolver](http://static.springsource.org/spring/docs/3.2.x/javadoc-api/org/springframework/web/multipart/commons/CommonsMultipartResolver.html)？
*   你有[HttpMessageConverter](http://static.springsource.org/spring/docs/3.2.x/javadoc-api/org/springframework/http/converter/HttpMessageConverter.html)将 HTTP 请求正文转换为 MultipartFile 吗？默认情况下，Spring 不附带此功能。阅读[http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/mvc.html#mvc-ann-requestbody](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/mvc.html#mvc-ann-requestbody)
*   在我看来，与其映射整个 HTTP 请求（例如：）`@RequestBody MultipartFile multipartFile`，不如只映射特定的表单字段，例如：`@RequestParam('someFileUpload') MultipartFile uploadedFile`，这是假设您在 html 表单中使用文件选择，例如：`<input type="file" name="someFileUpload"/>`

# javascript - 我们是否需要 Web 服务器（如 Apache）来访问 .json 文件？

> ID：15470471
> 
> 赞同：3
> 
> 时间：2013-03-18T05:50:20.093
> 
> 标签：javascript, ajax, json, webserver

我试图`info.json`使用 jQuery API 读取文件。请在下面找到代码，它是`test.html`.

```
$.getJSON('info.json', function(data) {
  var items = [];
  $.each(data, function(key, val) {
    items.push('<li id="' + key + '">' + val + '</li>');
  }); 
```

该`test.html`文件位于我的本地计算机上，当我尝试在浏览器中打开它时，没有触发 Ajax 调用，`info.json`也没有读取该文件。

它不工作是因为我没有网络服务器吗？还是我在代码中做错了什么？（虽然我在 Firebug 控制台中没有看到任何错误）。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T06:05:34.180

您将始终必须在您进行 AJAX 调用的地方托管您的网站。否则会抛出这个异常。

```
origin null is not allowed by access-control-allow-origin 
```

在本地主机服务器上托管您的页面，我想一切都会很好地工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T05:55:17.253

虽然从技术上讲，您不需要为此使用 Web 服务器，但您用于抽象网络访问的一些库可能不适用于本地文件，并且某些浏览器不会让本地文件做很多事情，所以就像[一个小测试 Web 服务器静态文件](https://stackoverflow.com/a/8427954/14955)对您的开发和测试非常有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T06:38:23.317

安装像[http://jetty.codehaus.org/jetty/](http://jetty.codehaus.org/jetty/)这样的小型网络服务器 ，易于安装，下载量小；）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-27T03:09:30.880

通过将 JSON 字符串放入文本文件并将其加载到 iframe 中，您可以推断数据。（大多数浏览器可以在 iframe 中加载 .txt 文件。）

```
var frame = document.createElement("IFRAME"); //Create new iframe
var body = document.body;
frame.onload = function() { //Extrapolate JSON once loaded
  data = JSON.parse(frame.contentDocument.documentElement.innerText); //Loads as a global.
  body.removeChild(frame); //Removes the frame once no longer necessary.
}
frame.style.display = "none"; //Because the frame will have to be appended to the body.
body.appendChild(frame);
frame.src = "your JSON.txt"; //Select source after the onload function is set. 
```

# c# - 如何从方法中获取调用方法的对象

> ID：15470478
> 
> 赞同：0
> 
> 时间：2013-03-18T05:51:19.040
> 
> 标签：c#, visual-studio-2012, windows-phone-8

所以我的设置就是这样；在我的 Windows Phone 8 的 C# 程序中，我有多个 Ellipse 元素，当鼠标进入一个时，所有这些元素都会调用相同的方法 Checkpoint。问题是，由于我将在最近输入的椭圆和之前输入的椭圆之间画一条线，因此我需要知道任何给定调用来自哪个椭圆。如果有帮助，代码如下：

```
Point old;
private void CheckPoint(object sender, System.Windows.Input.MouseEventArgs e)
        {

            if (old.Equals(null))
            {
                old.Equals(this.);
            } 
            else
            {
                System.Windows.Shapes.Line connectline = new System.Windows.Shapes.Line();
                connectline.X1 = old.Margin.Left;
                connectline.Y1 = old.Margin.Top;
                connectline.X2 = this. ;
                connectline.Y2 = this.
            }
        } 
```

如您所见，此代码不完整；old 应该设置为通过代码块后按下的任何椭圆。“这个”。是不完整的，并且将被调用该方法的椭圆的边距属性替换。谢谢大家！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T05:58:11.357

您可以识别哪个是`Selected Ellipse`by

```
 private void CheckPoint(object sender, System.Windows.Input.MouseEventArgs e)
    {
      var selectedEllipse = sender as Ellipse;

      if(selectedEllipse!=null)
        {
          //Your code here
        }
    } 
```

# chat - 使用 Quickblox 接收离线消息

> ID：15470480
> 
> 赞同：5
> 
> 时间：2013-03-18T05:51:28.400
> 
> 标签：chat, quickblox

用户上线时不会收到离线消息。

您能否解释一下为什么用户收不到离线消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-03-18T05:41:57.347

我使用下面的查询来获取以前的消息。

```
let resPage = QBResponsePage(limit:100, skip:self.messageHandler.messageArray.count)
let parameters = ["sort_desc" : "date_sent"]
QBRequest.messagesWithDialogID(createdDialog.ID, 
                               extendedRequest: parameters, 
                               forPage: resPage, 
                               successBlock: 
                               {(response: QBResponse, messages: [QBChatMessage]?, responcePage: QBResponsePage?) in
                               /*** You will get all the previous messages ***/
                               }, 
                               errorBlock: {(response: QBResponse!) in
                               /*** Some error occured while getting messages ***/
                               }) 
```

# html - 绘图画布编辑器

> ID：15470485
> 
> 赞同：6
> 
> 时间：2013-03-18T05:51:48.773
> 
> 标签：html, editor, html5-canvas

我在使用画布标签和 JavaScript 绘制复杂图像时遇到问题。

我需要一个工具，或者我们可以说编辑器，通过它我可以绘制任何图像。它使用画布返回 Javascript 代码，我可以将其包含在 html 页面中。

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-18T17:18:32.440

我有一个项目，您可以在其中绘制复杂的画布形状并将它们导出到 HTML 文件中。然后您可以根据需要编辑文件

我的项目在[http://canvimation.github.com/](http://canvimation.github.com/)

希望这有帮助

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-18T06:04:45.463

对于真正复杂的图像，使用 Adob​​e Illustrator 进行设计（世界级的设计编辑器）。

然后将图像保存为 .SVG 格式。

顺便说一句，您可以将文件（例如“yourArt.svg”）直接加载到 img 标签中。

但是，对于您的问题，您可以使用名为 FabricJS 的画布绘图库来读取 svg 并将其绘制到画布上。图书馆网站是： http: [//fabricjs.com/](http://fabricjs.com/)

或者，您可以使用在线转换工具将 yourArt.svg 转换为所需的画布绘图命令。一个流行的 svg-to-canvas 转换器是：http: [//www.professorcloud.com/svg-to-canvas/](http://www.professorcloud.com/svg-to-canvas/)

一个警告......这些技术可能需要调整生成的画布绘制命令 - 特别是如果您的作品使用 Illustrator 中更高级的技术。

您的作品可能非常复杂，但仍需处理！查看 FabricJS 演示的 SVG 部分：http: [//fabricjs.com/kitchensink/](http://fabricjs.com/kitchensink/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-18T07:09:56.140

另一个很棒的在线工具叫做**HTML Canvas Studio**。

它的行为与其他绘画程序一样，完成后，您可以将绘图导出为 HTML+JS。

**该工具可以在这里找到：http:** [//www.htmlcanvasstudio.com/](http://www.htmlcanvasstudio.com/)

# android - 将 zip 文件上传到 android 中的远程服务器

> ID：15470489
> 
> 赞同：-1
> 
> 时间：2013-03-18T05:51:55.467
> 
> 标签：android, zip, httpurlconnection

如何使用 httpurlconnection 将 zip 文件上传到远程服务器？请为我提供一些 url 链接，例如代码... Thnx

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T05:56:36.120

尝试以下代码并确认这是可行的解决方案：

```
StringBuffer responseBody=new StringBuffer();
 Log.i(Constants.TAG, "Ready to upload file...");
 HttpClient client=new DefaultHttpClient();
client.getParams().setParameter(CoreProtocolPNames.PROTOCOL_VERSION, HttpVersion.HTTP_1_1);

   Log.i(Constants.TAG, "Set remote URL...");
 HttpPost post=new HttpPost("http://IP.IP.IP.IP/file_upload.php");
 MultipartEntity entity=new MultipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE);

 Log.i(Constants.TAG, "Adding file(s)...");
entity.addPart("uploadedfile", new FileBody((FileObj), "application/zip"));
entity.addPart("uploadedfile2", new FileBody((FileObj), "application/zip"));

  Log.i(Constants.TAG, "Set entity...");
    post.setEntity(entity);

    BufferedReader bs=null;
   try
  {
    Log.i(Constants.TAG, "Upload...");
    HttpEntity hEntity=client.execute(post).getEntity();
    bs=new BufferedReader(new InputStreamReader(hEntity.getContent()));
      Log.i(Constants.TAG, "Response length - "+hEntity.getContentLength());
 String s="";
   while(s!=null)
{
responseBody.append(s);
s=bs.readLine();
Log.i(Constants.TAG, "Response body - "+s);
 }
bs.close();
 }
   catch(IOException ioe)
 {
    Log.i(Constants.TAG, "Error on getting response from Server, "+ioe.toString());
   ioe.printStackTrace();
   responseBody.append("...");
 } 
```

我的平台是Android 2.2，使用这个方案需要获取httpmime.jar作为项目库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T06:57:03.250

以下课程对我也有效。您可以将设备中的视频、音频和任何文件上传到远程服务器。

```
private class Upload extends AsyncTask<Void, Void, Void> {

    protected void onPreExecute() {
        mProgressDialog = ProgressDialog.show(ImageUpload.this,
                "Please wait...", "Loading...");
    }

    @Override
    protected Void doInBackground(Void... params) {
        // Your upload Server SCRIPT
        String urlString = "http://192.168.1.176:1001/...  //  You server URL";
        // The file

         // The selected path is the location of the file in your device. 

        File file = new File(selectedPath);

        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost(urlString);

        MultipartEntity reqEntity = new MultipartEntity(
                HttpMultipartMode.BROWSER_COMPATIBLE);

        // There are more examples above
        FileBody fb = new FileBody(file, "audio/3gpp");

        if (file.getName().endsWith(".xml")) {
            fb = new FileBody(file, "text/xml");
            reqEntity.addPart("xml_submission_file", fb);
            Log.v("Debug", "  file type,   adding file: " + file.getName());
        } else if (file.getName().endsWith(".jpg")) {
            fb = new FileBody(file, "image/jpeg");
            reqEntity.addPart(file.getName(), fb);
            Log.v("Debug", "  file type,   adding file: " + file.getName());
        } else if (file.getName().endsWith(".3gpp")) {
            fb = new FileBody(file, "audio/3gpp");
            reqEntity.addPart(file.getName(), fb);
            Log.v("Debug", "  file type,   adding file: " + file.getName());
        } else if (file.getName().endsWith(".3gp")) {
            fb = new FileBody(file, "video/3gpp");
            reqEntity.addPart(file.getName(), fb);
            Log.v("Debug", "  file type,   adding file: " + file.getName());
        } else if (file.getName().endsWith(".mp4")) {
            fb = new FileBody(file, "video/mp4");
            reqEntity.addPart(file.getName(), fb);
            Log.v("Debug", "  file type,   adding file: " + file.getName());
        } else {
            Log.w("Debug", "unsupported file type, not adding file: "
                    + file.getName());
        }

        FormBodyPart bodyPart = new FormBodyPart("uploadedfile", fb);
        reqEntity.addPart(bodyPart);
        httppost.setEntity(reqEntity);

        try {
            HttpResponse response = httpclient.execute(httppost);

            BufferedReader reader = new BufferedReader(
                    new InputStreamReader(
                            response.getEntity().getContent(), "UTF-8"));
            String sResponse;
            StringBuilder mUploadResponse = new StringBuilder();

            while ((sResponse = reader.readLine()) != null) {
                mUploadResponse = mUploadResponse.append(sResponse);
            }

            JSONObject mUploadResponseObject = new JSONObject(
                    mUploadResponse.toString());

            mUploadResponseObject.getJSONArray("response");

            try {
                JSONArray jsonArray = mUploadResponseObject
                        .getJSONArray("response");
                for (int i = 0; i < jsonArray.length(); i++) {
                    uploadStatus = jsonArray.getJSONObject(i)
                            .getJSONObject("send").getString("message");
                    uploadPhotoID = jsonArray.getJSONObject(i)
                            .getJSONObject("send").getString("id");
                }
            } catch (Exception e) {
                Log.d("DEBUG",
                        "The Json response message : " + e.getMessage());
            }

        } catch (ClientProtocolException e) {
            Log.d("DEBUG",
                    "The server ClientProtocolException response message : "
                            + e.getMessage());
            e.printStackTrace();
        } catch (IOException e) {
            Log.d("DEBUG", "The server  IOException response message : "
                    + e.getMessage());
            e.printStackTrace();
        } catch (JSONException e) {
            Log.d("DEBUG", "The  JSONException server response message : "
                    + e.getMessage());
            e.printStackTrace();
        }
        return null;
    }
}

protected void onPostExecute(Void result) {

    if (mProgressDialog.isShowing() && mProgressDialog != null) {
        mProgressDialog.dismiss();
    }
    mHandler.sendEmptyMessage(0);
} 
```

这对我来说很有用。试试这个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T05:56:06.563

你尝试过什么，你面临什么问题？上传 zip 文件与上传任何其他文件没有什么不同。

您可以在网上找到大量示例。

但同样，这取决于您的远程服务器期望它如何被上传。如果您可以使用更多详细信息更新您的问题，那将有所帮助。

目前，您可以通过这些链接。

[如何使用 URLConnection 上传二进制文件](https://stackoverflow.com/questions/13480160/how-to-upload-binary-file-using-urlconnection)

# java - 需要 2 个不生成相同 int 的 int 生成器

> ID：15470490
> 
> 赞同：-1
> 
> 时间：2013-03-18T05:52:02.907
> 
> 标签：java, random

我如何使 2 个随机 int 生成器不生成相同的整数？假设程序运行，我的示例类如下。感谢您的帮助。

```
public class TestRandom{
    int num; 

    public TestRandom(){
        num = 0;
    }
    public TestRandom(int x){
        num = x;
    }
    public String toString(){
        String print;
        if (num == 1)
            print = "1";
        else if(num == 2)
            print = "2";
        else
            print = "---";
        return print;
    }
}

public class Test{
    TestRandom[] s= new TestRandom[20];
    Random ran = new Random();
    public void setArray(){
        for(int i=0; i<s.length; i++)
            s[i] = new TestRandom();

        for(int k=0; k<4; k++)
            int RandomNum = ran.nextInt(s.length);
        s[RandomNum] = new TestRandom(1);

        for(int e=0; e<4; e++)
            int RandomNum = ran.nextInt(s.length);
        s.[RandomNum] = new TestRandom(2);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T06:02:53.230

1.  如果您使两个生成器不生成相同的数字，则它不是随机的。

2.  如果您仍然希望该功能使用单个实例，并且如果生成的第二个数字与前一个相同，则生成另一个数字。

请注意，随机性和唯一性并没有真正结合在一起。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T05:59:35.727

试试这个

```
import java.util.Random;    
public class TestRandom{
     int num=0; 
     int num2=0;
     Random ran = new Random();
     num = ran.nextInt();
     num2 = ran.nextInt();
     System.out.print(num+" "+num2);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T06:11:56.167

将每个生成的 int 添加到集合中。

检查生成的每个 int 以查看该 int 是否存在于集合中。

如果是，则生成一个新的 int。

例如

```
public class Test{
    TestRandom[] s= new TestRandom[20];
    Random ran = new Random();
  public void setArray(){
    for(int i=0; i<s.length; i++)
      s[i] = new TestRandom();

    HashSet<Integer> usedInts = new HashSet<Integer>();
    for(int k=0; k<4; k++) {
      int RandomNum;
      do {
        RandomNum = ran.nextInt(s.length);
      } while (!usedInts.add(RandomNum)); // loop until RandomNum not duplicated
      s[RandomNum] = new TestRandom(1);
    }
    for(int e=0; e<4; e++) {
      int RandomNum;
      do {
        RandomNum = ran.nextInt(s.length);
      } while (!usedInts.add(RandomNum)); // loop until RandomNum not duplicated
      s.[RandomNum] = new TestRandom(2);
    }
  } 
```

# c# - 读取仅包含字符串的行并将内容合并到上一行

> ID：15470492
> 
> 赞同：3
> 
> 时间：2013-03-18T05:52:26.643
> 
> 标签：c#, html, .net, string-parsing

输入是：

```
<p>1:4 And David said unto him, How went the matter? I pray thee, tell me.</p>

<p>And he answered, That the people are fled from the battle, and many of the people also are fallen and dead; and Saul and Jonathan his son are dead also.</p> 
```

第一行包含数字 (1:4)，第二行仅包含字符串。

我只想在`<p>`标签中查找字符串并将该内容合并到`<p>`html 文件中的前一个标签。

方法：

```
1:4 And David said unto him, How went the matter? I pray thee, tell me. And he answered, That the people are fled from the battle, and many of the people also are fallen and dead; and Saul and Jonathan his son are dead also. 
```

我可以这样做：

```
Regex.IsMatch(html, @"^[a-zA-Z]+$"); 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T06:02:03.197

看起来我得到了你想要实现的目标：

```
StringBuilder sb = new StringBuilder();
foreach (string line in input.Split(new[] { Environment.NewLine }, StringSplitOptions.RemoveEmptyEntries))
{
    sb.Append(line.Trim());

    // notice different regex, i.e.:
    // new paragraph stars with `<p>x:y` and ends with `</p>`

    if (!Regex.IsMatch(line, @"^\<p\>[0-9]\:[0-9].+\</p\>$"))
    {
         sb.AppendLine(); // insert line break
    }
}
string result = sb.ToString(); 
```

以我的形式工作，请参阅沙盒：[一](http://ideone.com/k0k2HB)，[二](http://ideone.com/ocOpoh)。

# mahout - 将序列文件转换为矢量

> ID：15470499
> 
> 赞同：1
> 
> 时间：2013-03-18T05:52:55.783
> 
> 标签：mahout

我正在尝试实现朴素贝叶斯算法来对 mahout 中的推文和 facebook 数据进行情感分析。我在文本文件中有这些推文和 Facebook 数据。我正在使用命令将这些文件转换为序列文件

bin/mahout seqdirectory -i /user/hadoopUser/sample/input -o /user/hadoopUser/sample/seqoutput

然后我尝试将序列文件转换为向量，以便使用命令向 mahout 提供输入

bin/mahout seq2sparse -i /user/hadoopUser/sample/seqoutput -o /user/hadoopUser/vectoroutput -ow -a org.apache.lucene.analysis.WhitespaceAnalyzer -chunk 200 -wt tfidf -s 5 -md 3 -x 90 -ng 2 -ml 50 -seq

这是将整个文档转换为向量，但我想将每个句子转换为向量而不是整体，因为我不想对文档进行分类。我想对文档中的评论进行分类。谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-04T14:21:17.227

What you should have is a CSV file with tweets data right? I'm dealing with this exact same problem. What I did (I'm not sure if it worked as I don't even know how to interpret the clustering output, it's just a mess of numbers and words) I wrote each column of my CSV file into the sequence file using Mahout's SequenceWriter class. Then used seq2sparse like normal on that sequence file.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-11T16:28:57.937

我不是 100% 确定，但主要问题是 mahout 将此文件视为一个键/值。您需要为每一行添加额外的 id，例如 md5 哈希。所以 CSV 格式将是：

```
positive    bf9373d6d85959ec755eb8ac5ba0ae77    This movie is a real masterpiece 
```

# iphone - iOS - 无法从 UITableViewCell 中动态创建的按钮调用操作

> ID：15470502
> 
> 赞同：3
> 
> 时间：2013-03-18T05:53:13.163
> 
> 标签：iphone, ios, ipad, uitableview

我在 UITableView 中以编程方式创建了两个按钮
即编辑删除

当我们单击单元格时，会显示这些按钮，但是当我尝试单击**编辑或删除**按钮时，它不会调用适当的方法，即编辑或 deleteBtn。
这是我的代码。

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    static NSString *CellIdentifier=@"Cell";

    UITableViewCell *cell=[tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if(cell==nil){
        cell=[[[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier]autorelease];
    }

    NSString *cellValue=[firstName objectAtIndex:indexPath.row];
    cell.textLabel.text=cellValue;

    edit=[[UIButton alloc]init];
    [edit setTitle:@"Edit" forState:UIControlStateNormal];
    [edit setFrame:CGRectMake(100, 100, 100, 20)];
    [edit setTag:1];
    [edit addTarget:self action:@selector(edit) forControlEvents:UIControlEventTouchUpInside];

    delete=[[UIButton alloc]init];
    [delete setTitle:@"Delete" forState:UIControlStateNormal];
    [delete setFrame:CGRectMake(150, 100, 100, 20)];
    [delete setTag:2];
    [delete addTarget:self action:@selector(deleteBtn) forControlEvents:UIControlEventTouchUpInside];

    [cell.contentView addSubview:delete];
    [cell.contentView addSubview:edit];

    return cell;

} 
```

我的编辑和删除功能很简单

```
-(void)edit{

NSLog("%@",selectedValue);
}

-(void)deleteBtn{

NSLog("%@",selectedValue);
} 
```

我已经检查了这个应用断点的函数，但它没有被调用。

这就是我的**selectedValue**来的方式

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{
selectedValue=[firstName objectAtInder:indexPath.row];
} 
```

谢谢，提前，
阿伦。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T06:13:37.063

想想，问题出在`UIButton`框架上。在您的代码中，两个按钮`origin.y`都是 100.0，因此它超出了单元格的边界（默认高度为 44.0）。

像这样改变你的两个`UIButton`框架，它对我有用。

```
UIButton *  edit =[[UIButton alloc]init];
[edit setBackgroundColor:[UIColor blackColor]];
[edit setTitle:@"Edit" forState:UIControlStateNormal];
**[edit setFrame:CGRectMake(100,5.0,100, 30)];**
[edit setTag:1];
[edit addTarget:self action:@selector(edit) forControlEvents:UIControlEventTouchUpInside];

UIButton*  delete=[[UIButton alloc]init];
[delete setBackgroundColor:[UIColor blackColor]];
[delete setTitle:@"Delete" forState:UIControlStateNormal];
**[delete setFrame:CGRectMake(200,5.0,100,30)];**
[delete setTag:2];
[delete addTarget:self action:@selector(deleteBtn) forControlEvents:UIControlEventTouchUpInside];

[cell.contentView addSubview:delete];
[cell.contentView addSubview:edit]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T06:04:09.727

请您的代码如下

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
static NSString *CellIdentifier=@"Cell";

UITableViewCell *cell=[tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if(cell==nil){
    cell=[[[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier]autorelease];
}

NSString *cellValue=[firstName objectAtIndex:indexPath.row];
cell.textLabel.text=cellValue;

edit=[[UIButton alloc]init];
[edit setTitle:@"Edit" forState:UIControlStateNormal];
[edit setFrame:CGRectMake(100, 5, 100, 20)];
[edit setTag:indexPath.row];
[edit addTarget:self action:@selector(edit:) forControlEvents:UIControlEventTouchUpInside];
[cell addSubview:edit];   

delete=[[UIButton alloc]init];
[delete setTitle:@"Delete" forState:UIControlStateNormal];
[delete setFrame:CGRectMake(210, 5, 100, 20)];
[delete setTag:indexPath.row];
[delete addTarget:self action:@selector(deleteBtn:) forControlEvents:UIControlEventTouchUpInside];
[cell addSubview:delete];

return cell; 
```

}

使用如下方法

```
-(IBAction)edit:(id)sender
{
    int tag = [sender tag];
    NSString *str = [firstName objectAtIndex:tag];
    NSLog("%@",str);
 }

 -(IBAction)deleteBtn:(id)sender
 {
    int tag = [sender tag];
    NSString *str = [firstName objectAtIndex:tag];
    NSLog("%@",str);
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T06:20:28.843

问题出在`setFrame`

表格单元格的高度小于您为按钮设置的坐标。将代码更改为

```
[edit setFrame:CGRectMake(100, 5, 100, 20)]; 
```

这将起作用。

**或者**

只需增加`height`表格行的数量，默认情况下是`44`，使用

```
-(CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-18T06:02:06.247

您的按钮被一遍又一遍地添加到单元格中，因为每次调用 CFRAIP 时都会创建它们。将它们移动到`cell == nil`块中：

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    static NSString *CellIdentifier=@"Cell";

    UITableViewCell *cell=[tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if(cell==nil){
        cell=[[[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier]autorelease];
        edit=[UIButton buttonWithType:UIButtonTypeRoundedRect];;
        [edit setTitle:@"Edit" forState:UIControlStateNormal];
        [edit setFrame:CGRectMake(100, 100, 100, 20)];
        [edit setTag:1];
        [edit addTarget:self action:@selector(edit) forControlEvents:UIControlEventTouchUpInside];

        delete=[UIButton buttonWithType:UIButtonTypeRoundedRect];;
        [delete setTitle:@"Delete" forState:UIControlStateNormal];
        [delete setFrame:CGRectMake(150, 100, 100, 20)];
        [delete setTag:2];
        [delete addTarget:self action:@selector(deleteBtn) forControlEvents:UIControlEventTouchUpInside];

        [cell.contentView addSubview:delete];
        [cell.contentView addSubview:edit];
    }

    NSString *cellValue=[firstName objectAtIndex:indexPath.row];
    cell.textLabel.text=cellValue;
    return cell;

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-18T06:23:46.833

尝试这个：：

表法

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
   // Configure the cell.
   UITableViewCell *cell=[tableView dequeueReusableCellWithIdentifier:CellIdentifier];

   if(cell==nil){
      cell= [[[UITableViewCell alloc] initWithStyle: UITableViewCellStyleDefault reuseIdentifier: CellIdentifier] autorelease];

      NSString *cellValue=[firstName objectAtIndex:indexPath.row];
      cell.textLabel.text=cellValue;

      UIButton *btnEdit=[UIButton buttonWithType:UIButtonTypeCustom];
      [btnEdit setTitle:@"Edit" forState:UIControlStateNormal];
      [btnEdit setFrame:CGRectMake(100, 100, 100, 20)];
      [btnEdit setTag:indexPath.row];
      [btnEdit addTarget:self action:@selector(clickEdit:) forControlEvents:UIControlEventTouchUpInside];

      [cell.contentView addSubview:btnEdit];

      UIButton *btnDelete=[UIButton buttonWithType:UIButtonTypeCustom];
      [btnDelete setTitle:@"Delete" forState:UIControlStateNormal];
      [btnDelete setFrame:CGRectMake(150, 100, 100, 20)];
      [btnDelete setTag:indexPath.row];
      [btnDelete addTarget:self action:@selector(clickDelete:) forControlEvents:UIControlEventTouchUpInside];

      [cell.contentView addSubview:btnDelete];
   }
   return cell;
} 
```

然后，按钮操作方法

```
-(IBAction)clickEdit:(id)sender
{
   NSString *str = [firstName objectAtIndex:[sender tag]];
   NSLog("Name :: %@",str);
}

-(IBAction)clickDelete:(id)sender
{
   NSString *str = [firstName objectAtIndex:[sender tag]];
   NSLog("Name :: %@",str);
} 
```

希望它会帮助你。

谢谢。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-18T06:08:39.670

像这样修改您的代码....

替换以下两行...

```
edit=[[UIButton alloc] init];
delete=[[UIButton alloc] init]; 
```

像这样……

```
UIButton *edit = [UIButton buttonWithType:UIButtonTypeRoundedRect];

UIButton *delete=[UIButton buttonWithType:UIButtonTypeRoundedRect]]; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-18T06:10:39.827

不要使用`[UIButton alloc] init]`. 改用这个

```
UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
[button addTarget:self 
           action:@selector(edit:)
 forControlEvents:UIControlEventTouchDown];
[button setTitle:@"Edit" forState:UIControlStateNormal];
 button.frame = CGRectMake(80.0, 21.0, 40.0, 40.0);
[view addSubview:button]; 
```

其中 view 是将按钮添加为子视图的视图。您也可以根据您的要求设置按钮框架。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-18T06:03:13.603

请尝试使用这个......并为删除按钮做同样的事情............

```
if (cell == nil)
    {
        cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier];

        // -------------------- Add button to cell --------------
        edit = [[UIButton alloc]initWithFrame:CGRectMake(100, 100, 100, 20)];

        [edit setTitle:@"Edit" forState:UIControlStateNormal];
        [edit setTag:1];
        [edit addTarget:self action:@selector(edit)   forControlEvents:UIControlEventTouchUpInside];        

        [cell.contentView addSubview:edit];
    } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-03-18T06:06:40.773

请更改按钮名称，因为 Edit 和 delete 已经在 Objective C 中定义了关键字

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-03-18T06:07:31.847

我可以尝试自定义单元格，您可以在自定义单元格视图中添加按钮并实现以下代码。

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    static NSString *CellIdentifier = @"Cell";

    cell = [self.tbl dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil)
    {

        //****cell recent deal buy button click goes to login or check out pageview 
        //[cell.btn setTag:indexPath.row];
        //[cell.btn addTarget:self action:@selector(buybutton_checkout:)
       //   forControlEvents:UIControlEventTouchDown];
       // cell.btn.hidden=NO;

        NSArray* views = [[NSBundle mainBundle] loadNibNamed:@"icel" owner:nil options:nil];

        for (UIView *view in views)
        {
            if([view isKindOfClass:[UITableViewCell class]])
            {

                cell = (icel*)view;

            }

        }
    }

   //tbl.layer.cornerRadius = 3.9;
    //[tbl setClipsToBounds:YES];

    [cell.activity startAnimating]; 

    [cell.btn setTitle:_BUYNOW_BTN forState:UIControlStateNormal];
    [cell.btn setTag:indexPath.row];
    [cell.btn addTarget:self action:@selector(Buy_btnlck:)
                forControlEvents:UIControlEventTouchDown];
        //cell.btn.hidden=NO;
    cell.title_lbl.text=[[_today_similardeal_title_ary objectAtIndex:indexPath.row]capitalizedString];

        index_tbl=indexPath.row;
    return cell;
    }
}
-(IBAction)Buy_btnlck:(UIButton *)button
{
NSInteger intvalue=[[NSString stringWithFormat:@"%ld",(long int)[button tag]]intValue];
} 
```

# javascript - Zepto 动画回调没有动画

> ID：15470507
> 
> 赞同：1
> 
> 时间：2013-03-18T05:53:46.420
> 
> 标签：javascript, css, animation, zepto

我正在尝试制作类似于 github 的项目查看器的东西，在单击链接后，框移到场景的左侧，然后另一个框从右侧移入。

我尝试这样做的方法是只设置一个动画 div，当您单击链接时，该 div 会移到屏幕左侧。然后在第一个 animate() 的回调中，我调用 .css 将其移动到页面的右侧（没有动画，所以它只是跳到那里）然后再次对其进行动画以将其从右侧移回视图。

这是JS

```
$('.mLink').on('click', function(e) {
    var 
            marginR = $('#mover').css('margin-right'),
            marginL = $('#mover').css('margin-left');

    $('#mover').animate({
            'margin-left': '-1500px',
            'margin-right': '1500px'
    }, 500, 'ease-out', function() {

            $('#mover').css({
                    'margin-left': '1500px',
                    'margin-right': '-1500px'
            });

            $('#mover').animate({
                    'margin-left': marginL,
                    'margin-right': marginR
            }, 500, 'ease-in');
    });
}); 
```

所以发生的情况是它在屏幕左侧进行动画处理，然后正确跳转到右侧，但随后出现在正确的位置而没有实际执行动画。我很好奇为什么会发生这种情况，因为这意味着 animate() 正在执行，只是没有显示动画？

编辑：澄清

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T08:22:21.290

尝试这样的事情，因为我无法看到所有依赖项，因此无法创建相同的小提琴，

```
 $('.mLink').on('click', function(e) {
    var 
            marginR = $('#mover').css('margin-right'),
            marginL = $('#mover').css('margin-left');

    $('#mover').animate({
            'margin-left': '-1500px',
            'margin-right': '1500px'
    }, 500, 'ease-out', function() {

           $('#mover').animate({
               'margin-left': ' 1500px',
               'margin-right': '-1500px'
           }, 500, 'ease-in', function() {

                  $('#mover').animate({
                          'margin-left': marginL,
                          'margin-right': marginR
                  }, 500, 'ease-in', function(){return false;});
           });
    });
}); 
```

我希望这样做，因为你想要两个效果，你可以有两个功能。:) 或更多，如果你想或全部一起在一个功能中。

# php - 如何使用php自动将css类应用于特定单词

> ID：15470514
> 
> 赞同：0
> 
> 时间：2013-03-18T05:54:22.077
> 
> 标签：php, css, wordpress

基本上，我的每篇文章都有两个词，它们是“预览”和“下载”。我想应用一个 css 类来将这两个词设置为按钮。我可以逐个发布，但这需要很多时间，我认为应该有一种方法可以通过编码来完成。

我正在使用 wordpress，可以使用 PHP 完成吗？或对此有任何帮助或建议？

提前谢谢各位！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T05:55:59.357

```
$html=str_replace("Preview","<span class=\"AnyClass\">Preview</span>",$html); 
```

和你的其他标记一样

```
$html=str_replace("Download","<span class=\"AnyClass\">Download</span>",$html); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T05:58:08.900

将此添加到您的 function.php

```
function replace_content($content)
{
    $content = str_replace("Preview","<span class=\"AnyClass\">Preview</span>",$content);
    $content = str_replace("Download","<span class=\"AnyClass\">Download</span>",$content);
    return $content;
}
add_filter('the_content','replace_content'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T06:02:33.840

```
// string
$str = 'Hello Preview and Download where are you?';

// Regex
echo preg_replace('/(Preview|Download)/im', '<span class="myclass">$1</span>', $str); 
```

输出

你好`<span class="myclass">Preview</span>`，`<span class="myclass">Download</span>`你在哪里？

# mysql - 检索所有教授的 SQL 查询

> ID：15470517
> 
> 赞同：2
> 
> 时间：2013-03-18T05:54:52.573
> 
> 标签：mysql, sql

表：

*   教授（EMP ID、姓名、身份、薪水、年龄）
*   课程（课程 ID、课程名称、分数）
*   作品（课程 ID、EMP ID、班级 ID）

这是我的数据库架构，我需要从该架构中获取：

> 归还所有教授教授过的课程。

我写了以下查询，这显然是错误的，任何人都可以帮助我，因为我是 SQL 新手。

```
SELECT 
    c.coursename
FROM  
    professor p, works w, course c
WHERE 
    p.empid = w.empid
    AND w.courseid = c.courseid
    AND p.empid IN (SELECT all(empid) FROM professors) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T05:58:21.390

这个问题叫做`Relational Division`. 从您想要的问题中：

> “ *..返回所有教授教授过的课程..* ”

您的标题与您想要的完全相反。

这个查询会给你，

```
SELECT  a.CourseID, a.Course
FROM    Course a
        INNER JOIN Works b
            ON a.CourseID = b.CourseID
        INNER JOIN Professor c
            ON b.EmpID = c.EmpID
GROUP   BY a.CourseID, a.Course
HAVING  COUNT(DISTINCT c.EmpID) = (SELECT COUNT(*) FROM Professor) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T06:05:45.670

试试这个查询

```
SELECT 
    courseName 
FROM 
    Course c
WHERE 
    NOT EXISTS (SELECT 
       EMP_ID 
    FROM 
       Professor p, 
       works w 
    WHERE 
       c.CourseID = w.CourseID AND 
       p.EMP_ID <> w.EMP_ID) 
```

# jquery - jQuery CSS字体粗细正常不起作用

> ID：15470519
> 
> 赞同：2
> 
> 时间：2013-03-18T05:55:02.283
> 
> 标签：jquery, css

这两天我用谷歌搜索并浏览了这个网站，但没有发现类似的问题。我是 jQuery 新手，希望这不是其他帖子的重复。

```
$(this).css("font-weight", "bold"); //this works
$(this).css({"font-weight":"bold"}); //this works as well

$(this).css("font-weight", "normal"); //this doesn't work
$(this).css({"font-weight":"normal"}); //this doesn't work either 
```

为什么不能将文本字体粗细设置为 NORMAL（在我的情况下）？我使用 Firefox 17.0.1，但将字体设置为正常的功能在早期版本的 Firefox 中也无法使用。

**更新**：昨晚我的问题终于解决了，在浏览了这个网站后发现了一个非常相似的东西。一些人不得不在 HTML 片段中搜索`<b>`和`</b>`，我通过以下方式解决了我的问题

使用这个：“ `$(this).find('strong, b').css('font-weight', 'normal')`”

而不是：“ `$(this).css('font-weight', 'normal')`”。

问题解决了！感谢大家昨天帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T06:24:48.273

这是我的一个 PHP 文件中 PHP 代码下方的 HTML 部分。

```
<html>
    <head>
    <style type="text/css">
        td a:link {text-decoration: none; color: inherit;}
        td a:visited {text-decoration: none; color: inherit;}
        td a:active {text-decoration: none; color: inherit;}
        td a:hover {text-decoration: underline; color: blue;}
    </style>
    <script type="text/javascript" src="jquery.js"></script>
    <script type="text/javascript">
        $(document).ready(function()
        {
            $('td[id="text_linked_to_detail_page"]').click(function(event)
            {
                $(this).css("font-weight", "normal");
                event.preventDefault();
            });
        });
    </script>
    <title>View Data</title>
</head>
<body>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T06:08:49.497

Normat 工作正常，您可以交叉检查您使用的是哪个版本的 jquery 吗？发出命令，以便我们也能理解您的问题

脚本

```
$("#div1").css("font-weight", "bold");
$("#div2").css("font-weight", "normal");
$("#div3").css("font-weight", "bold");
$("#div4").css("font-weight", ""); 
```

HTML

```
<div id="div1" >some text</div>
<div id="div2" >some text</div>
<div id="div3" >some text</div>
<div id="div4" >some text</div>
<input type="button" onclick="javascript:$('#div1').css('font-weight','normal')" value="Normal"/>
<input type="button" onclick="javascript:$('#div1').css('font-weight','bold')" value="Bold"/> 
```

[演示](http://jsfiddle.net/C7nYG/2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T05:59:10.453

正常也适用于我，但如果您有问题，请尝试将字体粗细设置为空字符串，它将应用默认值，这将是正常的。

[现场演示](http://jsfiddle.net/TaHLA/1/)

```
$(this).css("font-weight", ""); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-18T06:07:36.720

您可能对 jQuery 而不是 css 样式有问题。

我的html：

```
<p id="text">Lorem Ipsum Dolor Sit Amet</p>
<p id="bold">Click to : bold</p>
<p id="normal">Click to : normal</p> 
```

和 jQuery：

```
function action() {
    "use strict";
    $("#normal").click(function () {
        $("#text").css("font-weight", "normal");
    });
    $("#bold").click(function () {
        $("#text").css("font-weight", "bold");
    });
}

$(document).ready(function () {
    "use strict";
    action();
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-18T07:07:29.053

我的代码基于您的代码段：

```
<html>
    <head>
    <style type="text/css">
        td a:link {text-decoration: none; color: inherit; }
        td a:visited {text-decoration: none; color: inherit; }
        td a:active {text-decoration: none; color: inherit; }
        td a:hover {text-decoration: underline; color: blue; }
    </style>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script type="text/javascript">
        /*global $, jQuery, document*/
        $(document).ready(function () {
            "use strict";
            $('#text').click(function (event) {
                $(this).css("font-weight", "normal");
                event.preventDefault();
            });
        });
    </script>
    <title>View Data</title>
</head>
<body>
<p id="text" style="font-weight: bold;">Lorem ipsum</p>
</body>
</html> 
```

[演示](https://dl.dropbox.com/u/46605743/normal%20test/index.html)

所以我认为问题出在这条线`'td[id="text_linked_to_detail_page"]'`，也许尝试使用点符号。或者检查 ID 是否肯定是唯一的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-18T06:05:20.280

让我们明确 CSS`font-weight`属性

**定义和使用**

该`font-weight`属性设置文本中`thick`的`thin`字符应如何显示。

### 默认值：正常

因此**您的代码可以正常工作**，因为您将默认值设置为文本，但不同之处在于您只是看不到更改。

# javascript - 在 r.js 中禁用丑化

> ID：15470521
> 
> 赞同：19
> 
> 时间：2013-03-18T05:55:11.513
> 
> 标签：javascript, optimization, requirejs, uglifyjs, r.js

我正在寻找一种方法来防止 r.js（RequireJS 的优化脚本）丑化我们的 JS 模块，以保持调试目的的可读性。我希望脚本（顺便在 Node.js 上运行）能够传递一些命令行选项。不幸的是，如果这个工具的文档相当差。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-03-18T06:41:36.140

将命令行传递`optimize=none`给 r.js，或包含`optimize: "none"`在您的构建脚本中。

例如：

```
({
    baseUrl: ".",
    paths: {
        jquery: "some/other/jquery"
    },
    name: "main",
    out: "main-built.js",
    optimize: "none"
}) 
```

有关详细信息，请参阅[http://requirejs.org/docs/optimization.html](http://requirejs.org/docs/optimization.html)。

如果您检查[source](https://github.com/jrburke/r.js/blob/cf9abe82/build/example.build.js#L109)，您将看到默认设置为“uglify”。以下是接受的选项：

*   `uglify`：（默认）使用 UglifyJS 来缩小代码。
*   `uglify2`: 在 2.1.2+ 版本中。使用 UglifyJS2。
*   `closure`: 在简单优化模式下使用 Google 的 Closure Compiler 来缩小代码。仅在使用 Java 运行优化器时可用。
*   `closure.keepLines`：与闭包选项相同，但在缩小文件中保留行返回。
*   `none`: 不会进行缩小。

# javascript - 在 HTML5 中绘制形状的最佳 JQuery 库是什么？

> ID：15470522
> 
> 赞同：0
> 
> 时间：2013-03-18T05:55:16.570
> 
> 标签：javascript, jquery, html

我正在尝试在 HTML5 中实现绘图 Web UI（类似于 MS Paint）。我已经开始使用 HTML5 画布和一些库。我尝试使用[http://kineticjs.com/](http://kineticjs.com/) 和[http://raphaeljs.com/](http://raphaeljs.com/)来完成这项任务。还有其他像这样的好图书馆来完成这项任务吗？或者使用画布来实现这是正确的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T05:59:02.073

检查这个网站，它来自 John Resig。

[http://processingjs.org/](http://processingjs.org/)

# magento - Magento中的两种产品布局

> ID：15470526
> 
> 赞同：0
> 
> 时间：2013-03-18T05:55:30.800
> 
> 标签：magento, layout, product

在 magento 项目中，我有四个类别，我有 2 个产品模板文件

喜欢

1）catalog/product/view.phtml（原文）

2）目录/产品/newview.phtml（新文件）

现在我想根据类别显示产品布局

像类别 id 1 和 2，产品展示基于 view.phtml

和类别3和4，基于newview.phtml的产品展示

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T08:26:16.370

您可以在设计选项卡集中在后端的每个产品上进行设置：

```
<reference name="product.info">
     <action method="setTemplate"><template>catalog/product/newview.phtml</template></action>
</reference> 
```

否则，您也可以通过 Observer 执行此操作，以一次性获取类别 X 中的所有产品。

使用如下函数创建您自己的模块来观察`controller_action_layout_generate_blocks_after`事件：

```
public function generateBlocksAfter($event)
{                      
    $controller   = $event->getAction();
//limit to the product view page 
if($controller->getFullActionName() != 'catalog_product_view')
{
    return;
}
$layout       = $controller->getLayout();
$product_info = $layout->getBlock('product.info');
if(!$product_info)
{
     Mage::log('Could not find product.info block');
     return;
 }
$id = Mage::registry('current_product')->getId();
$prod = Mage::getModel('catalog/product')->load($id);
$category_ids = $prod->getCategoryIds();
if(in_array(3,$category_ids) || in_array(4,$category_ids))     
     $product_info->setTemplate('catalog/product/newview.phtml');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-13T05:49:03.670

根据 local.xml 文件中的类别 ID 使用此代码进行显示

```
 <reference name="product_list">
          <action method="setTemplate"><name>catalog/product/list_new.phtml</name></action>
      </reference>
 </CATEGORY_5> 
```

# html - 在下拉列表中选择不同选项时在 HTML 中加载不同的内容

> ID：15470537
> 
> 赞同：2
> 
> 时间：2013-03-18T05:57:02.937
> 
> 标签：html, xml, dom

我将为最初使用命令行的系统构建 Web UI。人们将使用此 Web UI 从下拉列表中选择选项并提交他们的要求。

这是我想实现的一个功能：选项存储在 XML 文件中，当人们在下拉列表中选择顶级选项时，网页可以自动加载相应 XML 文件中的内容，并显示子此文件中包含的级别选项。

我是 HTML 和 XML 的新手，经过一些研究，我认为它可能与 XML 和 DOM 有关，但我不确定。您能否提供一些有关此功能的示例或教程？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T07:05:50.493

Jquery 的 AJAX 和 GET - 方法对于这样的事情非常有用：http: [//api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

使用这些，您可以对服务器上的特定文件进行特定查询。通过参数，您可以指定要作为响应的项目​​。

```
$.get("backend.php", { item: "1" }) //Pull menu item 1 from server
.done(function(data) {

$("#menuitem").html(data); //Place Data in html menu here

}); 
```

通常以 JSON - 格式将数据传输到服务器，使用 json 编码，您可以使用 PHP 执行此操作：

[http://php.net/manual/de/function.json-encode.php](http://php.net/manual/de/function.json-encode.php)

# ruby-on-rails - 如何在保存在rails中之前更改回形针模型文件中的图像名称？

> ID：15470539
> 
> 赞同：2
> 
> 时间：2013-03-18T05:57:17.927
> 
> 标签：ruby-on-rails, ruby-on-rails-3, paperclip

我正在使用回形针将图像保存在 s3 中。以下是我的模型中的代码

```
has_attached_file :pic, :storage => :s3, :s3_credentials => "#{Rails.root}/config/s3.yml",
    :url => '/image/file/:basename.:extension',
    :path => '/image/file/:basename.:extension',
    :bucket => 'Test' 
```

问题是每当我保存具有相同名称的图像时，如果已经存在具有该名称的图像，图像就会被替换。我想更改文件的名称。我在创建新项目期间保存图像。那么我可以使用项目的 id 作为文件的名称，以便图像是唯一的吗？如果是，那我该怎么做？请帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T06:02:23.367

这可能会帮助您：

[使用多态回形针生成唯一的文件路径](https://stackoverflow.com/questions/1146848/generating-a-unique-file-path-with-polymorphic-paperclip)

[http://trevorturk.com/2009/03/22/randomize-filename-in-paperclip/](http://trevorturk.com/2009/03/22/randomize-filename-in-paperclip/)

# c++ - 琐碎的话题，作业是否返回“假”？

> ID：15470541
> 
> 赞同：-1
> 
> 时间：2013-03-18T05:57:29.633
> 
> 标签：c++

在这种情况下，结果是 6。但是 i=5 不被认为是一个非零值吗？如果我做 i+=5 那么它就被认为是真的。为什么这有什么不同？（也不，我不是故意放 i==5）

```
int i=7;
if(i=5) {
cout << ++i;
} else {
cout << --i;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T06:01:25.333

分配返回分配的任何内容。在您的示例中：

```
int i = 7;
if (i = 5) { // returns 5, which is non-zero, or "true"
    cout << ++i; // prints 6, or 5+1
}  else {
    cout << --i; // would print 4, or 5-1, if it was hit, which it never will
} 
```

您可能会对前增量与后增量感到困惑。例如，考虑以下情况：

```
int i = 7;
if (i = 5) { // returns 5, which is non-zero, or "true"
    cout << i++; // prints 5, i is 6 after this line
}  else {
    cout << i--; // would print 5, but i is 4 after this line
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T06:01:44.460

赋值运算符喜欢`=`并`+=`返回对象被赋值后的值。所以，如果你给某物赋值`false`or `0`，你可以`false`从赋值运算符中得到。

`i=5`评估为`5`并且`true`在 的眼中`if ()`。但`i=0`将评估为并且`0`将由 考虑`false`。`if ()`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-18T06:01:26.307

您的代码如下所示：

```
i = 7;
i = 5;
if ( 5 ) // it's true. Isn't it ?
{
    i = i + 1; // now i is 6
    cout << i;
} 
```

# ios - 调用 becomeFirstResponder 时未显示光标

> ID：15470543
> 
> 赞同：4
> 
> 时间：2013-03-18T05:57:44.963
> 
> 标签：ios, cocoa-touch, cursor, uitextfield, becomefirstresponder

我有一个包含每个单元格中的文本字段的表格视图，当用户更改值时，比如说，`textfield1`然后单击`textfield2`，我在方法中重新加载数据`- (void)textFieldDidEndEditing:(UITextField *)textField`，因为它正在更改表格视图中的行数，但`textfield2`光标不可见，仅在第二次单击时它显示光标。我知道问题是重新加载 tableview，因为当我评论`reloadData`方法调用时，文本字段工作正常。我尝试保存标签`textfield2`并在 tableview 完成重新加载后我调用`becomeFirstResponder`了消息，`textfield2`但它仍然没有显示光标。谁能知道我该如何解决这个问题？

提前致谢！

编辑：调用`becomeFirstResponder`工作`didEndDisplayingCell`正常，但此 API 仅在 iOS6.0 中可用，不少于此。我尝试使用`willDisplayCell`，但这也不起作用，所以任何人都可以告诉，iOS5.0 中是否有其他可用的替代方法，或者还有其他方法可以处理这个问题吗？

# java - Liferay 中的休眠错误

> ID：15470549
> 
> 赞同：0
> 
> 时间：2013-03-18T05:58:20.423
> 
> 标签：java, hibernate, transactions, liferay, liferay-6

我正在使用 liferay，这里是我的类和方法：

**`EmployeeLocalServiceImpl.java`**

```
public class EmployeeLocalServiceImpl extends EmployeeLocalServiceBaseImpl {
    /*
     * NOTE FOR DEVELOPERS:
     *
     * Never reference this interface directly. Always use {@link com.mallyas.corpserver.emco.mis.service.EmployeeLocalServiceUtil} to access the employee local service.
     */

    public List getEmployee() throws PortalException, SystemException, RemoteException {

        return EmployeeFinderUtil.getEmployee();
    }
 ...
} 
```

**`EmployeeFinderImpl.java`**

```
public class EmployeeFinderImpl extends BasePersistenceImpl<Employee> implements EmployeeFinder {

    // the name of the query
    public static String GET_EMPLOYEE = "getemployee";

    // the method which will be called from the ServiceImpl class

    public List<Employee> getEmployee() throws SystemException {

        Session session = null;
        try {
            // open a new hibernate session
            session = openSession();

            String fetchEmpsqlquery = CustomSQLUtil.get(GET_EMPLOYEE);

            // create a SQLQuery object
            SQLQuery empqueryObj = session.createSQLQuery(fetchEmpsqlquery);

            // replace the "Book" in the query string with the fully qualified java class
            // this has to be the hibernate table name
            empqueryObj.addEntity("Employee", EmployeeImpl.class);

            // Get query position instance
            QueryPos qPos = QueryPos.getInstance(empqueryObj);

            // fill in the "?" value of the custom query
            // this is same like forming a prepared statement
            //qPos.add(pattern);

            // execute the query and return a list from the db
            return (List<Employee>)empqueryObj.list();

            /*
            // use this block if you want to return the no. of rows (count)

            int rows = 0;

            Iterator<Long> itr = q.list().iterator();

            if (itr.hasNext()) { Long count = itr.next();

            if (count != null) { rows = count.intValue(); } }

            return rows;
            */
        } catch (Exception e) {
            throw new SystemException(e);
        } finally {
            closeSession(session);
        }
    }

    ...

} 
```

**`EmployeeFinder.java`**

```
@Transactional
public interface EmployeeFinder {

    public java.util.List<com.mallyas.corpserver.emco.mis.model.Employee> getEmployee()
        throws com.liferay.portal.kernel.exception.SystemException;
} 
```

**`EmployeeFinderUtil.java`**

```
@Transactional
public class EmployeeFinderUtil {

    public static java.util.List<com.mallyas.corpserver.emco.mis.model.Employee> getEmployee()
        throws com.liferay.portal.kernel.exception.SystemException {
        return getFinder().getEmployee();
    }

    public static EmployeeFinder getFinder() {
        if (_finder == null) {
            _finder = (EmployeeFinder)PortletBeanLocatorUtil.locate(com.mallyas.corpserver.emco.mis.service.ClpSerializer.getServletContextName(),
                    EmployeeFinder.class.getName());

            ReferenceRegistry.registerReference(EmployeeFinderUtil.class,
                "_finder");
        }

        return _finder;
    }

    public void setFinder(EmployeeFinder finder) {
        _finder = finder;

        ReferenceRegistry.registerReference(EmployeeFinderUtil.class, "_finder");
    }

    private static EmployeeFinder _finder; 
```

运行此应用程序时出现以下错误：

```
ERROR [http-bio-8080-exec-9][render_portlet_jsp:154] com.liferay.portal.kernel.exception.SystemException: org.hibernate.HibernateException: No Hibernate Session bound to thread, and configuration does not allow creation of non-transactional one here
    at com.mallyas.corpserver.emco.mis.service.persistence.EmployeeFinderImpl.getEmployee(EmployeeFinderImpl.java:69)
    at com.liferay.portal.dao.shard.advice.ShardPersistenceAdvice.invoke(ShardPersistenceAdvice.java:52)
    at com.mallyas.corpserver.emco.mis.service.persistence.EmployeeFinderUtil.getEmployee(EmployeeFinderUtil.java:29)
    at com.mallyas.corpserver.emco.mis.service.impl.EmployeeLocalServiceImpl.getEmployee(EmployeeLocalServiceImpl.java:61)
    at org.apache.jsp.admin.displayData.dbcheck_jsp._jspService(dbcheck_jsp.java:172)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:432)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:72)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:116)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilter.doFilter(InvokerFilter.java:73)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:684)
    at org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:593) 
```

什么可能是错的？我在上述每个类中都包含了@Transactional，我还尝试从所有类中删除@Transactional，但我仍然得到同样的错误..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T09:07:24.023

我认为您在从 FinderImpl 或 Finder 类调用方法时可能会遇到这些异常。我还猜测您正在使用 Finder 类来执行自定义查询。将该方法命名为“getEmployeeByCustom”

您不需要编辑 Finder.java 或 FinderUtil.java 类，只需 FinderImpl.java 一个。

确保在 EmployeeLocalServiceImpl 中使用包装函数

```
 public List<Employee> getEmployeeByCustom(.....) 
        throws SystemException {

    return EmployeeFinderUtil.getEmployeeByCustom(....);

} 
```

然后，通过 EmployeeLocalServiceUtil.getEmployeeByCustom(...) 调用“getEmployeeByCustom”

您应该撤消与“事务性”相关的编辑，您并不是要弄乱它们。另外，请务必查看[本教程](http://www.liferay.com/en/community/wiki/-/wiki/1071674/Custom+queries+in+Liferay+5.2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-27T12:33:53.837

当您调用 Liferay *Util 类时，事务永远不会传播。

如果您在 *ServiceImpl 中使用 *ServiceUtil，也会出现同样的问题。

在您的情况下，我认为您可以使用必须注入到您的 EmployeeLocalServiceImpl 中的 EmployeePersistence。

替换此代码：`return EmployeeFinderUtil.getEmployee();`

通过这个`return this.employeePersistence.getEmployee();`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T06:05:08.203

尝试在休眠配置中添加以下属性：

```
<prop key="hibernate.current_session_context_class">thread</prop> 
```

这基本上将在每个线程的基础上绑定会话。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-02T19:36:30.333

使用 Liferay 6.1.20 和我使用 maven 和 Liferay 插件版本 6.2.10.9 的构建。

确保您的 EmployeeFinderImpl 类在您的 service.persistence 包/文件夹中。

当服务构建器运行时，它会为您的 EmployeeFinderImpl 生成接口。此外，它添加代码以将其实例化到您的 EmployeeLocalServiceImpl 中。

EmployeeLocalServiceImpl 应该已经在其中实例化了您的 EmployeeFinderImpl 类，您可以将代码更改为以下代码，它将起作用。

```
public class EmployeeLocalServiceImpl extends EmployeeLocalServiceBaseImpl {
    /*
     * NOTE FOR DEVELOPERS:
     *
     * Never reference this interface directly. Always use {@link com.mallyas.corpserver.emco.mis.service.EmployeeLocalServiceUtil} to access the employee local service.
     */

    public List getEmployee() throws PortalException, SystemException, RemoteException {

        return employeeFinder.getEmployee();
    }
 ...
} 
```

# c - 使用 C 从 Ubuntu 中的网络摄像头获取图像

> ID：15470553
> 
> 赞同：1
> 
> 时间：2013-03-18T05:58:40.523
> 
> 标签：c, linux, image, webcam

我正在尝试使用我的网络摄像头（Creative Live！Cam Chat）以 C/C++ 拍摄图像并将其保存到某个文件夹（运行 Ubuntu）。理想情况下，尽管它不是最优雅的解决方案，但我正在寻找尽可能简单的东西。

到目前为止，我发现了 v4l2grab，我发现它非常难以理解，并且似乎也不适用于 Creative 网络摄像头（返回大小为 5Kb 的黑色图片），尽管它似乎可以与安装为我的笔记本电脑的一部分。

我可以使用任何简单的 C 库或代码来执行此操作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T07:59:56.707

我不知道为此目的有一个好的库（请添加评论并告诉我是否有一个:-)）。注意：对于某些用途，例如。[OpenCV](http://opencv.org/)很好，[如果它对你来说足够了，一定要使用它](https://stackoverflow.com/questions/278112/webcam-library-for-c-on-linux)。但是，如果您想要更多，请继续阅读。

所以你应该只写你自己的代码来使用它，这并不是特别难。这是一个相关的问题：[如何使用/学习 Video4Linux2（屏幕显示）输出 API？](https://stackoverflow.com/questions/1738828/how-to-use-learn-video4linux2-on-screen-display-output-apis)

使学习更容易的一些要点：

*   调用 IOCTL 后，请始终检查返回状态并打印可能的错误消息。在你工作的时候你会得到很多这样的东西，所以要系统地处理它。我建议使用如下`check_error`所示的函数，并在任何 ioctl 调用后立即调用它。

*   IMO 必须：使用 IDE/editor，它可以跟随符号到实际的头文件（例如在 Qt Creator 中，它是一个很好的纯 C 应用程序 IDE，尽管有名称，在符号上按 F2，它甚至会进入系统头文件向您展示它的定义位置）。在 V4L2 相关的符号和定义上自由使用它，并阅读头文件中的注释，这通常是最好的文档。

*   使用查询 ioctls 并编写函数来转储它们以良好格式返回的值。例如，有 function `void dump_cap(const struct v4l2_capability &cap) {...}`，并为您在代码中使用的每个结构添加一个类似的函数。

*   不要懒于在传递给 IOCTL 的结构中设置值。总是在声明结构之后将它们初始化为 0 `memset(&ioctl_struct_var, 0, sizeof(ioctl_struct_var));`，并且如果你重用它们（除了在某些设置上执行“get-modify-set”操作时，这在 V4L2 中很常见）。

*   如果可能，请使用两个（或更多）不同的网络摄像头（不同的分辨率、不同的品牌），并使用两个（全部）进行测试。如果您将视频设备作为命令行参数，这是最简单的，因此您可以为您拥有的每个摄像头使用不同的参数调用您的程序。

*   小步骤。通常 ioctls 可能不会返回您期望的结果，因此在您真正看到查询为您的相机返回的内容之前，没有必要编写使用返回数据的代码。

上面提到的`check_error`功能：

```
void check_error(int return_value_of_ioctl, const char *msg) {
    if (return_value_of_ioctl != -1) return; /* all ok */
    int eno = errno; /* just to avoid accidental clobbering of errno */
    fprintf(stderr, "error (%d) with %s: %s\n", eno, msg, strerror(eno));
    exit(1); /* optional, depending on how you want to work with your code */
} 
```

在每个 ioctl 之后立即调用它，例如：

```
struct v4l2_capability cap;
setmem(&cap, 0, sizeof(cap));
int r=ioctl(fd, VIDIOC_QUERYCAP, &cap); 
check_error(r, "VIDIOC_QUERYCAP");
dump_querycap(&cap); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-02-18T05:00:16.617

您可以使用 OpenCV。使用`cvCreatecameraCapture`（您可以使用参数 0 调用它以访问故障凸轮）创建一个对象，然后调用`cvQueryFrame`该对象。`cvQueryFrame`每次调用都会返回一个帧。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T06:09:09.897

看看[`uvccapture`](https://github.com/csete/uvccapture/blob/master/uvccapture.c)源代码。它非常简单，但标准 C，仅使用 V4L2 接口。`OpenCV`也可以，但设置和编译更复杂。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-18T06:03:40.340

你看过[OpenCV](http://opencv.willowgarage.com/wiki/)吗？它对于各种图像获取和处理都非常方便。拍照的过程是有据可查的，但我建议你看看这样的东西[，](http://opencv.willowgarage.com/wiki/CameraCapture)如果你确实决定使用它。

# android - 不同的android手机屏幕尺寸问题

> ID：15470554
> 
> 赞同：-1
> 
> 时间：2013-03-18T05:58:41.637
> 
> 标签：android, android-layout, android-screen

我正在开发一个应用程序，但我有点卡在布局中（Android 手机，而不是平板电脑）。问题是我已经在单一布局中设置了单选按钮之间的填充，但具有不同的值-hdpi 和值-xhdpi，并且我已经在galaxy nexus、nexus s 和galaxy s2 上测试了我的应用程序，它们运行良好，galaxy nexus 从 xhdpi 中挑选dimen 和 s,s2 从 hdpi dimen 挑选，而用户在分辨率为 960x546 的摩托罗拉 droid m 上遇到一些填充问题，现在我没有其他安卓手机来检查我的 apk，现在我应该怎么做才能不有这样的问题？？

请帮忙。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T09:08:38.153

您可以通过制作不同大小的模拟器来检查不同屏幕上的布局

Windows->android sdk 和 avd manager->new 并提供您的 avd 类型和屏幕分辨率，在启动该 avd 时，您可以设置屏幕尺寸和监控 Dpi

请参阅以下链接以制作不同大小的模拟器。 [http://developer.android.com/tools/devices/managing-avds.html#createavd](http://developer.android.com/tools/devices/managing-avds.html#createavd)

# android - Android：Gcm 由于线程通知和等待而被挂起

> ID：15470555
> 
> 赞同：1
> 
> 时间：2013-03-18T05:58:46.457
> 
> 标签：android, thread-safety, push-notification, google-cloud-messaging

在我的演示项目中，我使用 GCM 来接收推送消息。我需要以同步方式处理我收到的推送消息。一旦我收到推送，我需要执行一些任务并将确认发送到我的服务器（确认由异步任务发送）。我的项目正在运行在正常情况下很好，但是如果我关闭我的数据连接并且如果我发送 10 条推送消息然后我打开我的手机的数据连接，我的 GCM 会被挂起，因为它接收到一堆消息，之后它不会处理我的推。请帮助解决这个问题

MyGCMService.java

```
public class MyGCMService extends GCMBaseIntentService{
    .....

    public GCMIntentService() {

        ...
        myThreadClass =new MyThreadClass();

    }

    @Override
    protected void onRegistered(Context context, String registrationId) {

        ....
    }

    @Override
    protected void onUnregistered(Context context, String registrationId) {
        ....
    }

    @Override
    protected void onMessage(Context context, Intent intent) {

        try{
        //  System.out.println("*********** 4-3- "+String.valueOf(myThreadClass.getState()).equals("NEW"));
            if(String.valueOf(myThreadClass.getState()).equals("NEW"))
        myThreadClass.start();
        }catch(Exception e){

        }
        synchronized (myThreadClass) {
            ...
            myThreadClass.wait();
        }

    }

    @Override
    protected void onDeletedMessages(Context context, int total) {
        ...
    }

    @Override
    public void onError(Context context, String errorId) {
        ....
    }

    @Override
    protected boolean onRecoverableError(Context context, String errorId) {
        ....
    }

    public void OnDestroy() {

        super.onDestroy();

    }    
} 
```

MyTreadClass.java

```
public class MyThreadClass extends Thread  {

    MyThreadClass myThreadClass;
    String LOG_TAG = MyThreadClass.class.getSimpleName();

    public void run() {
        synchronized (this) {

            Looper.prepare();

            performAction();

            notify();

        }

    }

    public MyThreadClass() {
        myThreadClass=this;
    }

    public void performMDMAction() {

        //Doing Some task and Sending Ack. through Async task
    }

} 
```

**一旦这个线程挂起我的 GCMBaseIntentService，就不会调用 Override OnMessage() 函数。**

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T02:02:15.423

你真的不应该使用低级同步方法，例如等待和通知。它们很难正确使用。如果您想在 Android 应用程序中执行异步任务，也许[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)将适合您的需求。如果没有，请考虑使用 java.util.concurrent 包。

# delphi - Delphi 告诉我如何 DIUnicode 读取用户定义的行，例如从第 8 行开始？

> ID：15470557
> 
> 赞同：0
> 
> 时间：2013-03-18T05:58:56.413
> 
> 标签：delphi, delphi-xe3

告诉我如何 DIUnicode 读取用户定义的行，例如从第 8 行开始？例如，我从第 8 行开始到第 11 行这一付款..等

```
===========================================
|Period 01.01.2012  31.12.2012
Saldo  01.01.2012            
----------------------------------------------------------------
|   Date        | Correspondet: Bank/account/Tax Name                     | 
| Payment       | Remark                                                  |   
----------------------------------------------------------------          |
|04.01.2012     | Bank:00883  account:200004000000005936111  tax:000000000|
|               |paynet                                                   |
|               |00644blbalbalbalbalbalbalbalN-4774                       |
|               |  24.03.2010                                             |
----------------------------------------------------------------
|06.01.2012     |BANK:00883  account:200004000600005000111  tax:000000000 |
|               |paynet                                                   |
|               |00644blablbalbalbalbalbalblab-4774                       |
|               |  24.03.2010 
-------------------------------------------------------------------------- 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T10:37:20.887

对于给定的示例，最简单的事情是使用stirnglizst 并迭代每一行，但最初的7 行。

*我也不知道你为什么提到`diUnicode`图书馆。但我假设你的文件是用 UTF8 编码的。如果它实际上使用了另一种 Unicode 或非 Unicode，则相应地更改代码。*

```
var sl: TStrings; s: String; i: integer;
begin
    sl := TStringList.Create;
    try
       sl.LoadFromFile('c:\Table.txt', TEncoding.UTF8);
       for i := 0 to 7 do sl.Delete(0); 

       for s in sl do begin
            // do some work with s 
           ShowMessage(Copy(s,18, Length(s)));
       end;
    finally
      sl.Free;
    end;
end; 
```

* * *

您也可以尝试使用两个高级字符串列表对字符串进行内部解析，例如[将字符串拆分为基于分隔符的字符串数组](https://stackoverflow.com/questions/2625707/split-a-string-into-an-array-of-strings-based-on-a-delimiter#answer-14454831)

```
var slF, slR: IJclStringList; l, s: string; 

slF := TJclStringList.Create; slF.LoadFromFile('table.txt');
slR := TJclStringList.Create;

slF.Delete(0).Delete(0).Delete(0).Delete(0).Delete(0).Delete(0).Delete(0); // delete top 7 lines

for l in slF do begin
    if StartsStr('-----', l) then continue; // skip separator

    slR.Split(l, '|', true).Trim;

    for s in slR do {nothing or something} Application.Title := s ;
    ShowMessage('Date or void: '+ slR[0]);
    ShowMessage('Transfer details: '+ slR[1]);
end; 
slF := nil; slR := nil; 
```

# memory-management - Linux 内核中的 Slab 和 Slub 分配器之间如何选择？

> ID：15470560
> 
> 赞同：44
> 
> 时间：2013-03-18T05:59:03.090
> 
> 标签：memory-management, linux-kernel

哪些因素有助于决定 Linux 内核中内存分配器的选择？

在当前的 Linux 内核中，我们可以选择 SLAB、SLUB 或 SLOB。我读过 SLOB 用于占用空间较小的内核。但我想知道有助于在 Slab Allocator 和 Slub Allocator 之间做出决定的因素。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-03-18T17:31:45.910

在寻找答案的过程中，我在 Quora 上发布了同样的问题，Robert Love 回答了这个问题：

> 我假设您是从系统用户的角度提出这个问题，或者是从某个为特定产品构建内核的人的角度来问这个问题。作为内核开发人员，您并不关心正在使用什么“slab”分配器。API 是一样的。
> 
> 首先，“slab”已经成为一个通用名称，指的是使用对象缓存的内存分配策略，从而实现内核对象的高效分配和释放。它首先由 Sun 工程师 Jeff Bonwick [1](http://static.usenix.org/publications/library/proceedings/bos94/full_papers/bonwick.a)记录并在 Solaris 2.4 内核中实现。
> 
> Linux 目前为其“slab”分配器提供了三种选择：
> 
> Slab 是原始的，基于 Bonwick 的开创性论文，自 Linux 内核版本 2.2 起可用。这是对 Bonwick 提议的忠实实现，并通过 Bonwick 后续论文[2](http://static.usenix.org/event/usenix01/full_papers/bonwick/bonwick.pdf)中描述的多处理器更改进行了增强。
> 
> Slub 是下一代替换内存分配器，自 2.6.23 以来一直是 Linux 内核中的默认值。它继续采用基本的“slab”模型，但修复了 Slab 设计中的几个缺陷，特别是在具有大量处理器的系统周围。Slub 比 Slab 简单。
> 
> SLOB（简单块列表）是一种内存分配器，针对内存非常少的嵌入式系统进行了优化——大约为兆字节。它在块列表上应用了一个非常简单的首次拟合算法，与旧的 K&R 风格的堆分配器不同。在消除内存分配器的几乎所有开销方面，SLOB 非常适合处于极端内存限制下的系统，但它没有提供[1](http://static.usenix.org/publications/library/proceedings/bos94/full_papers/bonwick.a)中描述的任何好处，并且可能会遭受病态碎片的影响。
> 
> 你应该用什么？Slub，除非您正在为内存有限的嵌入式设备构建内核。在这种情况下，我将对 Slub 与 SLOB 进行基准测试，看看哪种方法最适合您的工作负载。没有理由使用 Slab；它可能会从未来的 Linux 内核版本中删除。

请参阅此[链接](http://www.quora.com/Linux-Kernel/What-are-the-factors-in-choosing-among-the-different-memory-allocators-in-the-Linux-kernel)以获取原始回复。

# rest - 使用 Spring MVC 为 RESTful API 创建客户端

> ID：15470578
> 
> 赞同：0
> 
> 时间：2013-03-18T06:00:46.300
> 
> 标签：rest, spring-mvc

我是 Spring 框架和 REST 概念的新手。我一直在做一个项目来有效地掌握这些概念。我正在构建一个测验工具，用户可以使用他的凭据登录并参加测验。我已经使用 JAX-RS 创建了一个 RESTful API。现在我想使用 Spring MVC 创建一个可以在这个 API 上工作的客户端。那有可能吗？如何开始？我的意思是，如何使用 Spring MVC 为我的 RESTful API 创建客户端？

我的一些资源是 -

```
GET   /scorecard      
GET   /scorecard/{quizId}
GET   /scorecard/{userId}
GET   /quiz/{questionId}
POST  /quiz/{questionId}
and so on.. 
```

我对使用 Spring MVC 的客户端的设计方面感到非常困惑。我是否在 API 或 Spring MVC 客户端中包含评估测验、计算和存储分数的逻辑？

提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T06:12:52.013

这是使用 Spring MVC 实现的前两个端点的示例：

```
@Controller
@RequestMapping(value = "/scorecard")
public class ScorecardController {

    @Autowired
    private ScorecardService scorecardService;

    // GET   /scorecard
    @RequestMapping(method = RequestMethod.GET)
    public List<Scorecard> getScorecards()
    {
        List<Scorecard> scorecards = scorecardService.getScorecards();
        return scorecards;
    }

    // GET   /scorecard/{quizId}
    @RequestMapping(value = "/{quizId}", method = RequestMethod.GET)
    public List<Scorecard> getScorecardsByQuizId(@PathVariable long quizId)
    {
        List<Scorecard> scorecards = scorecardService.getScorecardsByQuizId(quizId);
        return scorecards;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T06:47:39.783

我建议从 Github 签出 spring mvc 展示项目并尝试源代码。

[spring-mvc-showcase](https://github.com/SpringSource/spring-mvc-showcase)

您可以轻松地将浏览器用作客户端来进行大量 REST 调用。

应用设计取决于要求。例如，将分数保留在客户端将使您免于会话管理，否则您将需要在服务器处处理。

# python - 在 Python 中编写声明性配置检查？

> ID：15470579
> 
> 赞同：1
> 
> 时间：2013-03-18T06:00:51.807
> 
> 标签：python, xml, configuration-files

我们有一系列手工编写的 Python 脚本，用于验证生产环境/配置中的各种内容。

其中许多是简单的 XML 检查（即验证这里 XML 标记的值是否等于那里那个文件中的值）。其他可能是检查主机是否已启动，或者该应用程序的 crontab 启动时间是否在 X 的 20 分钟内，或者服务器上的日志文件是否包含特定行。

检查在每次生产推送之前自动执行。

脚本是命令式编写的。例如：

1.  通过 SSH 连接到服务器
2.  打开一个文件
3.  解析 XML
4.  搜索 XML 标记
5.  将值存储在变量中
6.  将其与其他地方的另一个值进行比较。

我想看看编写一个框架来以稍微更具声明性的方式进行这些验证 - 即，而不是定义服务器应该如何检查某些东西，我们应该能够说`<tag>value</tag> should equal foobar`- 并让框架处理如何。

我在想我们可以安排检查并将工作推到像 Celery 这样的队列中。

为了阻止我重新发明轮子 - 是否有任何现有的项目已经做了这样的事情？

或者这里有没有人做过类似的事情，或者可以提供任何建议？

（我知道像 Puppet 或 Chef 之类的东西 - 甚至是 Salt Stack - 但是，这些是用于管理部署或实际推出配置。这些验证脚本更多地是为了确保手动完成的配置更改是理智的，或者不违反某些基本规则）。

干杯，维克多

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T06:34:33.477

在过去，我使用了一种类似于我在下面建议的方法，以声明方式将补丁应用于数据。

每个声明性验证文件都是一个 python 片段，使用预定义的函数、变量等。每个检查都是一个 python 函数。运行验证是使用驱动程序脚本完成的，其中包括`execfile`运行检查文件的调用。

例如，您可以有一个验证文件，例如：

```
tag_equals('value', 'foobar')
attribute_exists('value', 'value_attr') 
```

您的驱动程序脚本基本上是：

```
def main():
    for filename in sys.argv[1:]:
        run_validation(filename)

def run_validation(filename):
    # import all "built-in" names for validations
    from mychecks import tag_equals, etc
    execfile(filename, locals())

if __name__ == '__main__':
    main() 
```

好处：

1.  解析/解释非常容易使用`execfile`
2.  易于扩展功能（例如编写新`xpath_equals`功能）
3.  灵活——在您想要执行涉及专门逻辑的验证的情况下，您可以在您的验证文件中实现它，而无需扩展您的声明性语言的定义。例如`for i in range(10): tag_equals('address%d' % i, 'N/A')`

To protect against accidentally `execfile`ing an arbitrary python file, you should add a check to only run `execfile` if the first line in the file equals some predefined header.

# php - 使用 PHP 如何将 1000 个配置文件加载到数据库中？

> ID：15470580
> 
> 赞同：0
> 
> 时间：2013-03-18T06:00:53.387
> 
> 标签：php, performance, refactoring

在一个文件夹中，我有 34,000 个配置文件。每个文件都包含一个具有唯一配置规范的对象。以下是文件内容的示例：

```
$obj = new obj();
$obj->name = "name":
$obj->location "nyc";
...
...
etc 
```

每个文件长约 100 到 200 行，大小约为 17k。

要将这些输入数据库，我有以下功能：

```
function retrieve_files(){
    $objs = array();

    $path = 'filefolder';

    //retrieve a list of files as an array of objects
    $files = get_files('/\.inc$/', $path, 'filename', 0);

    foreach ($files as $file) {
            include_once $path.'/'.$file->filename;
            $objs[$obj->name] = $obj;
    }

    return $objs;
} 
```

一旦对象数组被返回，它就会在另一个函数中循环，序列化，并且每个都保存到数据库中。

目前，我的服务器是 Intel 双核 3.06 Ghz 处理器，具有 8 Gigs 的 RAM。我正在通过 Ubuntu 12.04 中的命令行运行脚本。

随着脚本的处理，CPU 达到 100% 的最大值并且内存不断攀升，直到所有 8 个演出都达到最大值。然后脚本崩溃。

我怎样才能使这个脚本或整个过程更有效率？最好我宁愿留在这个功能的范围内。我也希望一次性完成。有没有办法在创建数组和迭代循环时使用更少的资源或释放资源来重构它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T06:09:56.817

很明显，在第一个函数结束时，最终数组中有太多对象。

34 000 个文件意味着阵列中有 34 000 个对象`$objects`。

可能您应该将对象保存在循环中。对于包含的每个文件，您将序列化对象保存在数据库中。对于 1 个配置文件，您将在 DB 中有 1 行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T06:22:20.113

与其返回所有对象，不如一次说 100 个对象。所以像这样

```
function retrieve_files(){
    $objs = array();

    $path = 'filefolder';

    //retrieve a list of files as an array of objects
    $files = get_files('/\.inc$/', $path, 'filename', 0);
    $count = 0;
    foreach ($files as $file) {
            include_once $path.'/'.$file->filename;
            $objs[$obj->name] = $obj;
            if ( $count++%100 == 0 )
            {
                function_to_process_obj($objs);
                $objs = null;
                $objs = array();
            }
    }
} 
```

# c# - C# 中的方法覆盖/隐藏行为

> ID：15470593
> 
> 赞同：1
> 
> 时间：2013-03-18T06:01:45.620
> 
> 标签：c#, inheritance, polymorphism, overriding

我对 C# 的理解是，子类不能覆盖父类的方法实现，除非该方法被标记为虚拟。如果子类声明了一个与父方法同名但**没有**标记为虚拟的方法，它只是隐藏了该方法，因此如果从父类型的引用调用该方法，它将调用父方法，如果它是从子类类型的引用中调用它将调用子类方法。但是，我在 C# 库中发现一种情况似乎破坏了这种行为。

`Collection<T>`声明一个`public void Add(T item)`方法。此方法不是虚拟的，因此子类中的实现不应覆盖其行为。然而，下面的测试产生了矛盾的结果。

```
public void Test()
{
    ObservableCollection<String> strings1 = new ObservableCollection<String>();
    strings1.CollectionChanged += OnCollectionChanged;
    strings1.Add("One String");
    Collection<String> strings2 = strings1;
    strings2.Add("Another String");
}

public void OnCollectionChanged(Object source, 
    NotifyCollectionChangedEventArgs e)
{
    Console.WriteLine("Collection Change!");
} 
```

由于该`NotifyCollectionChanged`行为未在`Collection`类中实现，并且`ObservableCollection`该类不能覆盖该类的`Add`方法，因此`Collection`我希望仅当对象被引用为 a 时才会触发集合更改事件`ObservableCollection<String>`，而不是当它被引用为 a 时`Collection<String>`。但是有两个事件被触发。结果是：

```
Collection Change!
Collection Change! 
```

谁能解释这里发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T06:06:25.560

ObservableCollection 没有自己的 Add 方法。相反，它依赖于 Collection 类 Add，即：

```
public class Collection<T> : IList<T>, ICollection<T>, IList, ICollection, IReadOnlyList<T>, IReadOnlyCollection<T>, IEnumerable<T>, IEnumerable
   {
     public void Add(T item)
     {
          if (this.items.IsReadOnly)
            ThrowHelper.ThrowNotSupportedException(ExceptionResource.NotSupported_ReadOnlyCollection);
          this.InsertItem(this.items.Count, item);
     }

     protected virtual void InsertItem(int index, T item)
     {
          this.items.Insert(index, item);
     }     
  } 
```

而InsertItem 是一个在ObservableCollection 中被覆盖的虚方法。

```
 public class ObservableCollection<T> : Collection<T>, INotifyCollectionChanged, INotifyPropertyChanged
  {
    protected override void InsertItem(int index, T item)
    {
      this.CheckReentrancy();
      base.InsertItem(index, item);
      this.OnPropertyChanged("Count");
      this.OnPropertyChanged("Item[]");
      this.OnCollectionChanged(NotifyCollectionChangedAction.Add, (object) item, index);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T06:10:52.920

ObservableCollection<T> 是从 Collection<T> 派生的，通知事件将在分配给 ObservableCollection 类中定义的处理程序的地方进行处理，Collection 的 Add 方法调用 Insert 方法，该方法是虚拟的并在 ObservableCollection 类和被覆盖的方法调用事件处理程序。

# windows - 使用输入的电子邮件地址检索 DNS 详细信息

> ID：15470594
> 
> 赞同：0
> 
> 时间：2013-03-18T06:01:48.430
> 
> 标签：windows, for-loop, batch-file, cmd

我有一个问题，我有一段时间无法解决。到处寻找，似乎无法提出解决方案。

我需要创建一个批处理文件来提示用户输入他们的电子邮件地址。然后，此电子邮件地址将被修剪为“@”字符。然后将在“nslookup”命令中使用剩余的域，但我希望它只过滤邮件交换服务器。

例子：

“Coldude@gmail.com”

然后下一点是我需要的：

“gmail.com”

然后我需要发生以下情况：

```
nslookup  
set type=mx  
gmail.com 
```

这是我迄今为止所拥有的：

```
@echo off  
set /p email="Enter your email address : "  
call :findString email "@" pos  
echo.%pos%  
set ex=%email:~%-pos%%  
echo Email Exchange is: %ex%  
pause  

:findString  
SETLOCAL ENABLEDELAYEDEXPANSION  
set "pos="  
set "str=!%~1!"  
for /L %%a in (0,1,1023) do (  
    set "s=!str:~%%a!"  
    if not defined pos if "%~2!s:*%~2=!"=="!s!" set "pos=%%a"  
)  
ENDLOCAL & IF "%~3" NEQ "" SET "%~3=%pos%"  

GOTO:EOF 
```

提前谢谢！;P

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T06:33:20.783

试试这个：

```
@echo off &setlocal
set "email=Cooldude@gmail.com"
set "email=%email:*@=%"
echo %email%
endlocal 
```

# dynamics-crm-2011 - CRM 包部署错误：与 Dynamics CRM 服务器的连接不可用

> ID：15470596
> 
> 赞同：2
> 
> 时间：2013-03-18T06:02:00.993
> 
> 标签：dynamics-crm-2011

我使用 Visual Studio 2010 在 crm 2011 中创建了一个包。当我在 Visual Studio 中打开解决方案时，它成功连接到 crm server 2011。但是，当我尝试部署包时。它给出了错误

与 Dynamics CRM 服务器的连接不可用。错误：

> *与 Dynamics CRM 服务器的连接不可用。*

我应该看什么来检查这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T12:13:20.173

以我的经验，这是导入期间的“一般”错误（当没有处理的异常时）。您必须启用跟踪并查找故障以找到真正的原因。

请参阅此知识库文章以启用跟踪：http: [//support.microsoft.com/kb/907490](http://support.microsoft.com/kb/907490)

我曾经遇到过这个错误，因为 SDK API 端点在自定义工作流活动中不匹配。

祝你好运，马特

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T21:00:26.083

这很可能是由于超时问题。确保您的 VPN 稳定，检查区域是否同步，并且您可以通过例如浏览器中的 URL 行连接到组织服务。

# c# - 在 C# VS2008 中未处理空引用异常

> ID：15470605
> 
> 赞同：-2
> 
> 时间：2013-03-18T06:02:42.137
> 
> 标签：c#, visual-studio-2008, ocr

我对 VS2008 很陌生，我一直在到处寻找，但找不到任何解决我问题的方法。这是代码：

```
 private void btnScan_Click(object sender, EventArgs e)
        {
            {
                if (!msgfilter)
                {
                    this.Enabled = false;
                    msgfilter = true;
                    Application.AddMessageFilter(this);
                }
                tw.Acquire(); <-- This is where the error shows
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T06:04:48.427

您的 tw 变量未初始化。它的默认值为 null。而且您不能在 null 上调用方法 (.Acquire() )，您需要创建一个真实的对象。

Somehwe 在您的代码中，您缺少该行

tw = 新的???()

其中问题标记需要替换为您的班级类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T06:06:38.000

一般来说，当你有一个空引用异常时，最有用的事情是

*   用调试器运行你的代码，看看哪个对象是空的（我猜你的情况是`tw`）
*   检查异常的堆栈跟踪，这将为您提供有关错误发生位置、调用者是谁等的更多详细信息

# c - 有人可以解释一下这段代码在做什么吗？

> ID：15470606
> 
> 赞同：0
> 
> 时间：2013-03-18T06:02:51.640
> 
> 标签：c, macos, segmentation-fault

我无法理解我在网上找到的这个示例代码。你能帮我理解这个吗

```
#define PKTNAME     "Msg"
FILE *data;       
char outMsg[1500]="getmybw\0";

data = fopen(PKTNAME,"r");
printf("file open success!!\n");
if(fgets(outMsg, 1024, data))
    printf("Msg read success!\n"); 
outMsgLen = strlen(outMsg)+1;
printf("outMsgLen is: %d,\toutMsg is:\n%s\n",outMsgLen,outMsg); 
```

此外，当我运行此代码时，我在此行遇到分段错误：

`if(fgets(outMsg, 1024, data))`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T06:11:20.903

当然。

**首先，**代码片段通过将指向ated 的 1025 字节长缓冲区的指针分配给该指针来**泄漏内存**，然后重新分配.`malloc()``data``fopen()`

**其次，**代码**错误地假设`fopen()`总是成功，**向用户打印一条误导性的信息消息，然后尝试读取一行或最多 1023 个字节到缓冲区`outMsg`。

**第三，**如果调用`fgets()`成功，它会打印“成功”消息。

**在第四步中，**它获取刚刚读取的数据的长度，**错误地将其分配给类型变量`int`**（应该是`size_t`），然后用于`printf()`向控制台显示长度和消息。

* * *

简而言之，无论是谁向你提供了这段“示例代码”，都应该被永久禁止编程。

# magento - 以编程方式为 magento 中已完成的订单发送发货电子邮件

> ID：15470607
> 
> 赞同：2
> 
> 时间：2013-03-18T06:02:52.260
> 
> 标签：magento

我正在使用来自管理员的 magento 默认发货。所以它工作正常并完美地向客户发送电子邮件。

我想创建一个脚本，可以发送电子邮件，其中包含 magento 中所有已完成订单的发货详细信息。这仅适用于通过 CSV 发送的某些订单。

当我们使用处理订单的 order_id 但它不适用于已完成的订单时，我的脚本工作正常。并且不在电子邮件中发送订单项目详细信息，请向我建议任何解决方案。

非常感谢。

我正在使用以下脚本来执行此操作：

```
function completeShipment($orderIncrementId,$shipmentTrackingNumber,$shipmentCarrierCode){
    $shipmentCarrierTitle = $shipmentCarrierCode;
    $customerEmailComments = '';
    $order = Mage::getModel('sales/order')->loadByIncrementId($orderIncrementId);
    if (!$order->getId()) {
        Mage::throwException("Order does not exist, for the Shipment process to complete");
    }
    try {
        $shipment = Mage::getModel('sales/service_order', $order)->prepareShipment(_getItemQtys($order));

        $arrTracking = array(
                             'carrier_code' => isset($shipmentCarrierCode) ? $shipmentCarrierCode : $order->getShippingCarrier()->getCarrierCode(),
                             'title' => isset($shipmentCarrierTitle) ? $shipmentCarrierTitle : $order->getShippingCarrier()->getConfigData('title'),
                             'number' => $shipmentTrackingNumber,
                             );
        $track = Mage::getModel('sales/order_shipment_track')->addData($arrTracking);
        $shipment->addTrack($track);
        $shipment->register();
        _saveShipment($shipment, $order, $customerEmailComments);
    }catch (Exception $e) {
        throw $e;
    }
    return $save;
}
function _getItemQtys(Mage_Sales_Model_Order $order){
    $qty = array();
    foreach ($order->getAllItems() as $_eachItem) {
        if ($_eachItem->getParentItemId()) {
            $qty[$_eachItem->getParentItemId()] = $_eachItem->getQtyOrdered();
        } else {
            $qty[$_eachItem->getId()] = $_eachItem->getQtyOrdered();
        }
    }
    return $qty;
}

function _saveShipment(Mage_Sales_Model_Order_Shipment $shipment, Mage_Sales_Model_Order $order, $customerEmailComments = ''){
    $shipment->getOrder()->setIsInProcess(true);

    $transactionSave = Mage::getModel('core/resource_transaction')
            ->addObject($shipment)->addObject($order)->save();
    //$emailSentStatus = $shipment->getData('email_sent');

    $ship_data = $shipment->getOrder()->getData();
    $customerEmail = $ship_data['customer_email'];
    $emailSentStatus = $ship_data['email_sent'];

    if (!is_null($customerEmail)) {
        $shipment->sendEmail(true, $customerEmailComments);
        $shipment->setEmailSent(true);
    }
    return $this;
}

Thanks a lot dagfr...! the below code works for me to get done my task:

 function completeShipment($orderIncrementId,$shipmentIncreamentId){
    $order = Mage::getModel('sales/order')->loadByIncrementId($orderIncrementId);
    $ship_data = $order->getData();
    $customerEmail = $ship_data['customer_email'];

    $shipment = Mage::getModel('sales/order_shipment')->loadByIncrementId($shipmentIncreamentId);

    $customerEmailComments = '';
    $sent = 0;
    if (!is_null($customerEmail)) {
        $sent = $shipment->sendEmail(true, $customerEmailComments);
        $shipment->setEmailSent(true);
    }
    return $sent;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T08:17:40.593

您的脚本尝试创建货件，然后发送电子邮件。

对于已完成的订单，货件已创建，您无法再次创建，因此您`try`在发送电子邮件之前失败。

就在之前：

```
try {
    $shipment = Mage::getModel('sales/service_order', $order)->prepareShipment(_getItemQtys($order)); 
```

查看订单状态，如果已经完成，只需取货并发送邮件即可

```
 $shipment->sendEmail(true, $customerEmailComments);
  $shipment->setEmailSent(true); 
```

否则，您可以执行您的脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-08T05:37:18.093

我发现使用 order_shipment_api 而不是 service_order 模型取得了成功。

如果您想在货件电子邮件中包含运单号，请确保先添加运单，然后使用`Mage::getModel('sales/order_shipment_api')->sendInfo($shipmentIncrementId)`.

代码片段：

```
 $shipmentApi = Mage::getModel('sales/order_shipment_api');

        //pass false for email, unless you want Magento to send the shipment email without any tracking info
        //could also be written as $shipmentIncrementId = $shipmentApi->create($order->getIncrementId());
        $shipmentIncrementId = $shipmentApi->create($order->getIncrementId(), array(), '' , false, 0); 

        //add tracking info ($shippingCarrier is case sensitive)
        $shipmentApi->addTrack($shipmentIncrementId, $shippingCarrier, $shippingTitle, $trackingNumber);

        //send shipment email with tracking info
        $shipmentApi->sendInfo($shipmentIncrementId); 
```

查看`app\code\core\Mage\Sales\Model\Order\Shipment\Api.php`所有方法。

您也可以（应该）先执行检查：

```
//check for existing shipments if you want
if ($order->getShipmentsCollection()->count() == 0){
}

// and/or 

if($order->canShip()){
} 
```

# error-handling - 常见的 lisp 重启到条件绑定

> ID：15470619
> 
> 赞同：3
> 
> 时间：2013-03-18T06:03:45.103
> 
> 标签：error-handling, common-lisp

我在空闲时间学习 common lisp，并且对条件系统有疑问。

当我们在 common lisp 中处理错误时，我们在处理程序中指定错误类型以确定要处理的错误。在引发和处理错误之间，我可以进行一些重新启动（例如使用重新启动案例），但我无法在重新启动时指定错误类型。

例如，假设我有一个函数，它接受一个字符串和一个流，将字符串发送到流并从流中读取响应并返回它。假设如果我的消息是错误的，我会从流中读取错误响应。我想提出一个错误并绑定一个重新启动，要求这样的新消息：

```
(defun process-message (stream raw-message)
  (let ((response (get-response stream raw-message)))
    (restart-case
        (when (response-error-p response)
          (error 'message-error :text response))
      (change-raw-message (msg)
        (process-message stream msg))))) 
```

现在假设消息很复杂，我得到了另一个`send-command`更高级别的函数，它可以从一些参数创建消息并调用 process-message。我想绑定另一个重新启动，以允许用户在获取`recreate-command-message`时从参数发送新命令。`'message-error`这种重新启动可以放在 restart-case at 中`process-message`，但它并不完全正确，因为`process-message`不应该知道这样的高级函数`send-command`，并且返回值可能不同。

但是现在将抛出流错误（例如 EOF 等）`recreate-command-message`，如果套接字失败，则`recreate-command-message`重新启动将在某些超高级`socket-error`处理程序中可用，并且这种重新启动将是无用的并且是惯用的错误。

这是一个程序设计问题，应该设计一个程序来避免此类问题，或者我只是找不到如何将重新启动绑定到错误类型，或者我不正确理解条件系统？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-18T09:55:16.363

也许这有帮助：

```
(define-condition low-level-error (simple-error)
  ()
  (:report (lambda (c s)
             (format s "low level error."))))

(define-condition high-level-error (simple-error)
  ()
  (:report (lambda (c s)
             (format s "high level error."))))

(defun low-level (errorp)
  (restart-case
      (when errorp (error 'low-level-error))
    (go-on ()
      :report "go on from low-level"
      t)))

(defun high-level (high-level-error-p low-level-error-p)
  (restart-case
      (progn
        (when high-level-error-p (error 'high-level-error))
        (low-level low-level-error-p))
    (go-on ()
      :report "go on from high level"
      :test (lambda (c) (typep c 'high-level-error))
      t))) 
```

尝试为其参数调用`high-level`不同的值（`t`或），并在调试器中检查相应的可用重启是否符合您的需要。`nil`只有在发出高级别错误信号时才能看到高级别重启，并且由于高级别的重启保持在堆栈中，低级别函数不必知道高级别恢复的方法。

对于您的特定用例，如果我理解正确，这将意味着：建立您的`recreate-command-message`重新启动以重新调用`process-message`in `send-command`，并使其仅可用于高级错误。

正如您在阅读上面链接的 PCL 章节 Vsevolod 后可能知道的那样，实际处理这些错误，即决定调用哪个重新启动，是使用`handler-bind`and完成的`handler-case`。

# ruby-on-rails - 如何通过 devise_invitable 邀请现有用户

> ID：15470622
> 
> 赞同：3
> 
> 时间：2013-03-18T06:04:05.187
> 
> 标签：ruby-on-rails, ruby, devise, devise-invitable

我实施了

```
gem 'devise_invitable' 
```

对于模型`User`，我在邀请现有用户时遇到问题。错误说`"USER IS ALREADY REGISTERED"`。我想在另一个`User`邀请列表中添加相同的用户。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-20T00:54:08.657

对于那些寻找相同问题的不同实现的人，您可以将新行为添加到`InvitationsController`受保护的方法中，`invite_resource`.

可以在[DeviseInvitable](https://github.com/scambra/devise_invitable) wiki 页面上找到对以下示例的更详细解释，标题为[Invite a Resource (or User) that Has Already Signed Up without Invitation](https://github.com/scambra/devise_invitable/wiki/Invite-a-Resource-(or-User)-that-Has-Already-Signed-Up-without-Invitation)。

```
class Users::InvitationsController < Devise::InvitationsController

  protected

  # invite_resource is called when creating invitation
  # should return an instance of resource class

  # this is devise_invitable's implementation
  # def invite_resource(&block)
  #   resource_class.invite!(invite_params, current_inviter, &block)
  # end

  def invite_resource(&block)
    @user = User.find_by(email: invite_params[:email])
    # @user is an instance or nil
    if @user && @user.email != current_user.email
      # invite! instance method returns a Mail::Message instance
      @user.invite!(current_user)
      # return the user instance to match expected return type
      @user
    else
      # invite! class method returns invitable var, which is a User instance
      resource_class.invite!(invite_params, current_inviter, &block)
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-27T05:22:26.720

为此，您需要创建一个新的 Invitations 控制器，该控制器继承自原始的 Devise::Invitations 控制器，但修改了 create 方法中的逻辑。

gem 的[README](https://github.com/scambra/devise_invitable)中有一个关于“配置控制器”的部分描述了这个过程。我还建议查看[父控制器的源代码，](https://raw.github.com/scambra/devise_invitable/master/app/controllers/devise/invitations_controller.rb)因为它有助于提供一些上下文。

我做了一些与您想要的类似的事情，并使用了 Rails 的内置方法`find_by_email`。这是我使用的一些代码...

```
def create
    # new user
    if User.find_by_email(invite_params[:email]).nil?
      super
    # existing user
    else
      @u = User.find_by_email!(invite_params[:email])
    ....more code that does what you want....
    end
  end 
```

注意：Rails 很聪明，如果您创建的子控制器没有给出冲突的指令，它将使用父控制器的逻辑。关键是您不需要重新编写整个控制器。理想情况下，您只需在子控制器中进行修改，然后调用`super`以恢复到父控制器中的相同方法以完成操作。

# jquery - 将单个 JSON 数据发送到 Jquery Ajax

> ID：15470625
> 
> 赞同：1
> 
> 时间：2013-03-18T06:04:13.690
> 
> 标签：jquery, asp.net-mvc, jqgrid

我正在关注此链接[jqGrid and dynamic column binding](https://stackoverflow.com/questions/2277962/jqgrid-and-dynamic-column-binding) 为 JQGrid 生成动态列

在我的 MVC 控制器中，我有 2 个函数，一个用于列名，另一个用于 Colmodel

```
 GetColumnNamesForGrid()  //  Json Array

    GetColumnModelForGrid()   // Json Object 
```

这两个函数都返回了计划分配给 JqGrid ColModel 和 ColName 的 JSON 数据。

现在我必须调用函数，我需要在一个调用中发送两个结果，我将在 Ajax 中获取

```
success: function (result) {
                 colN = result.colname;
                 colM = result.item.colModel; 
```

像这样的东西。

我怎样才能做到这一点？我被困在这里是因为我不熟悉这些语言。

请让我知道是否有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T06:16:35.703

您应该检查引用的 SO 问题链接中的第二个答案。[https://stackoverflow.com/a/7846175/206766](https://stackoverflow.com/a/7846175/206766)

[ASP.NET MVC 和通用 jQuery 网格 -jqTGrid](http://blog.lieberlieber.com/2010/07/07/asp-net-mvc-and-a-generic-jqquery-grid-jqtgrid/)

# iphone - 如何在结构中使用 __unsafe_unretained

> ID：15470631
> 
> 赞同：2
> 
> 时间：2013-03-18T06:04:56.563
> 
> 标签：iphone, ios, objective-c, xcode

我正在将我的项目转换为 ARC
我在我的项目中使用结构。
转换为 ARC 时出现错误

```
ARC forbids Objective-C objects in structs or unionsrk - type definition for struct 
```

我在 SO 中搜索，发现使用`__unsafe_unretained`.It 可以解决问题。所以我在我的结构中使用了它。

```
typedef struct Grade{
  __unsafe_unretained NSString  *Table,
                                *RowId,
                                *ScheduleID,
                                *Level,
                                *Label,
                                *Thershold;

    char *CreateStmt;
} grade; 
```

它正在工作，但现在它在下一行显示相同的错误`*RowId`。
我的问题是我应该把 __unsafe_unretained 放在所有变量之前。这样做安全吗？或者有另一种方法来解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T06:27:45.547

ARC 不能与结构中的对象一起使用，这是有技术原因的，但我总是忘记它，您可以使用 __unsafe_unretained 修饰符为结构中的那些元素禁用 ARC，但是您没有内存管理，甚至您的自己的。有一些私有函数可以保留和释放对象，但它们是私有的，所以你不能依赖它们，你可能会在苹果应用商店遇到麻烦。处理此问题的最佳方法是为具有带有对象元素的结构的 .m 文件打开 ARC（在这些文件上使用 -fno-objc-arc），然后为该文件中的所有内容手动执行所有内存管理。您可以使用类别来减少手动引用计数所需的代码量，例如，您可以为类文件关闭 ARC，然后为其中一个类别打开 ARC。

# c# - 从另一个表单获取数据

> ID：15470632
> 
> 赞同：0
> 
> 时间：2013-03-18T06:05:06.537
> 
> 标签：c#

我的 Mainform 中有一个列表视图，我需要获取文本框中的值和另一个表单名称 Add_Order 中的标签？

```
Add_Order add = new Add_Order();
ListViewItem item = new ListViewItem();
item.Text = add.textBox3.Text;
item.SubItems.Add(add.label6.Text);
item.SubItems.Add(add.textBox2.Text);
item.SubItems.Add(add.textBox1.Text);
item.SubItems.Add(add.textBox3.Text);
mainform.listView2.Items.Add(item); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T06:26:05.410

我个人不会在您的 Add_Order 表单中公开控件。您的调用表单不应该知道 Add_Order 表单的内部结构，只知道它的公共方法和属性。我会创建一个公共方法并使用它来检索您需要的信息。像这样的东西：

**Add_Order.cs**

```
public partial class Add_Order : Form
{
    public Add_Order()
    {
        InitializeComponent();
    }
    public List<string> GetData()
    {
        List<string> list = new List<string>();
        list.Add(textBox3.Text);
        list.Add(label6.Text);
        list.Add(textBox2.Text);
        list.Add(textBox1.Text);
        return list;
    }
} 
```

**主窗体**

```
private void button1_Click(object sender, EventArgs e)
{
    Add_Order add = new Add_Order();
    add.ShowDialog();

    ListViewItem item = new ListViewItem();
    List<string> data = add.GetData();
    item.Text = data[0];
    item.SubItems.Add(data[1]);
    item.SubItems.Add(data[2]);
    item.SubItems.Add(data[3]);
    item.SubItems.Add(data[0]);
    listView2.Items.Add(item);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T06:28:19.417

您可以通过不同的方式将数据传递给其他表单，例如创建公共类以维护表单之间的数据公共数据，或者您可以使用表单构造函数传递数据，例如：

```
Add_Order frmAddOrder=new Add_Order(data1,data2);
frmAddOrder.show(); 
```

并在您的 Add_Order 构造函数中：

```
 public Add_Order (string data1,string data2)
        {
            InitializeComponent();
   //you can access data1 and data2 here ...

        } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T06:29:48.987

我给你写一个简单的：

将元素设置`Modifiers`为`true`Add_Order 形式：

![在此处输入图像描述](../Images/b5f346e19a85497db5d255787dc0b1f3.png)

并以主要形式获取它：

```
 public partial class main : Form
    {
        public main()
        {
            InitializeComponent();
            Get_Frm2_Data();
        }
        private void Get_Frm2_Data()
        {
            Add_Order frm2 = new Add_Order();
            List<string> info= new List<string>;
            info.Add( frm2.textBox1.Text);
             .
             .
             .
        }
    } 
```

**编辑**

或制作一个结构：

**Add_Order.cs**

```
 public partial class Add_Order : Form
    {
        public Add_Order()
        {
            InitializeComponent();
        }

        public Info Get_Data()
        {
            return new Info() { _textBox3 = textBox3.Text,
                                _label6 = label6.Text,
                                _textBox2 = textBox2.Text,
                                _textBox1 = textBox1.Text,
            };
        }

    }
    struct Info
    {
        public string _textBox3;
        public string _label6;
        public string _textBox2;
        public string _textBox1;
    } 
```

**Mainform.cs**

```
 public partial class main : Form
    {
        public main()
        {
            InitializeComponent();
            Get_Frm2_Data();
        }
        private void Get_Frm2_Data()
        {
            Add_Order frm2 = new Add_Order();
            frm2.ShowDialog();
            Info lst_data= frm2.Get_Data();
            ListViewItem item = new ListViewItem();
            item.Text = lst._textBox3;
            item.SubItems.Add(lst._label6);
            item.SubItems.Add(lst._textBox2);
            item.SubItems.Add(lst._textBox1);
            mainform.listView2.Items.Add(item);
        }
    } 
```

# ruby-on-rails - ruby on rails 内存泄漏

> ID：15470634
> 
> 赞同：0
> 
> 时间：2013-03-18T06:05:08.203
> 
> 标签：ruby-on-rails, ruby, memory-leaks

轨道 2.3.14，红宝石 1.8.7

我有一个 rake 任务：

```
 Post.all.each do |post|

      post.comments.each { |pc|
        pc.delete
      }
      user = post.user

      pc = user.comment.build(
          :text => 'Test text',
      ......
      )
      result = pc.send_comment_http

      if result.success?
        pc.save!
      else
        puts error_message
      end
    end 
```

帖子有 100k 行并且任务已经运行了 50 小时，在 db 中每 3 秒添加一次行，这没问题，但是 ps -ax | grep rake 表示占用了 2 gb。内存泄漏问题可能是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T06:12:08.453

评论的迭代。您可以通过以下方式避免第二个循环：`post.comments.destroy_all`

另外，当用户发表评论时，我可以看到它与帖子无关（因为用户可以有很多帖子，对吗？），因此您可以划分操作。首先直接截断评论表，其次获取与帖子相关的用户（您可以使用`join`and `group by`，或者`join`如果您希望每个帖子发送消息时使用），第三次循环用户并发送消息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T09:53:27.880

采用

```
Post.find_each do |post|
  ...    
end 
```

# android - 在AndEngine中更改方向时如何防止游戏重启

> ID：15470643
> 
> 赞同：1
> 
> 时间：2013-03-18T06:05:57.360
> 
> 标签：android, andengine

我正在开发一个游戏，我必须在我的游戏场景中使用两种横向模式。但是当我更改`orientation`我的游戏重新启动并从启动画面加载时如何停止这种情况。

谁能帮帮我。

我在用

```
final EngineOptions eo = new EngineOptions(true, ScreenOrientation.LANDSCAPE_SENSOR,
     new FillResolutionPolicy(), _camera); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T06:12:30.153

[http://developer.android.com/guide/topics/resources/runtime-changes.html](http://developer.android.com/guide/topics/resources/runtime-changes.html)。请查看标题*为您自己处理配置更改*下的文档。

```
<activity android:name=".Activity_name"
      android:configChanges="orientation|keyboardHidden|screenSize"> 
```

为 3.2 及更高版本添加屏幕尺寸。

```
@Override
public void onConfigurationChanged(Configuration newConfig) {
    super.onConfigurationChanged(newConfig);
    if(newConfig.orientation == Configuration.ORIENTATION_LANDSCAPE){
       //do something
    }
    else if (newConfig.orientation == Configuration.ORIENTATION_PORTRAIT) {
       //do something        
    }
} 
```

我假设您有一个启动画面，并在显示启动画面后导航到名为 Main 的活动。在这种情况下，您的启动画面应该只在应用程序启动时运行一次。在导航到下一个活动之前，您必须调用 finish()。启动画面被破坏，您导航到下一个屏幕。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T06:10:31.967

在活动标签的清单文件中添加以下内容

```
android:ConfigChanges="keyboardHidden|orientation|screensize" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T07:07:42.760

在 AndroidManifest.xml 的 GameActivity 中添加 screenOrientation 标签

```
 <activity
        android:name=".YourgameActivity"
        android:screenOrientation="landscape" >
 </activity> 
```

# sql - 判断两个参数是否为null，然后在where子句中使用参数

> ID：15470650
> 
> 赞同：0
> 
> 时间：2013-03-18T06:06:49.450
> 
> 标签：sql

美好的一天，我在存储过程中收到 2 个可为空的日期参数。@StartDate 和@EndDate。如果这两个参数为 NULL，我需要正常执行我的过程，否则 @StartDate 参数需要 >= 我的 StartDateTime 值和 @EndDate 参数需要 <= 我的 EndDateTime 值。下面是我正在尝试完成但不确定语法的片段。

```
 FROM DI_Intervention_Schedule S
    WHERE
        (
            @ID IS NULL
        OR  S.[ID] = @ID
        )
    AND (
            CASE @StartDate WHEN IS NOT NULL THEN
                @StartDate >= S.[StartDateTime] AND @EndDate <= S.[EndDateTime]
            END
        ) 
```

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T06:12:28.950

试试下面的代码：

```
 FROM DI_Intervention_Schedule S
    WHERE
    (S.[ID] = @ID OR @ID IS NULL)
    AND (( S.[StartDateTime] >= @StartDate   AND S.[EndDateTime] <= @EndDate)  OR @StartDate IS NULL ) 
```

# angularjs - 异步加载 AngularUI 引导程序

> ID：15470651
> 
> 赞同：2
> 
> 时间：2013-03-18T06:07:02.977
> 
> 标签：angularjs, angular-ui, angular-ui-bootstrap

现在一切都非常“新鲜”。我有角种子项目，我正在使用异步索引页面。当我为 angular-bootstrap 添加参考时，它爆炸了。当我不加载异步样式时，这不会发生。

如何将 AngularUI 引导程序与 $script 加载程序一起使用？

我得到的错误是：

```
Uncaught TypeError: Object #<Object> has no method 'controller' ui-bootstrap-0.2.0.js:9
(anonymous function) ui-bootstrap-0.2.0.js:9

Uncaught Error: No module: ui.bootstrap.collapse new-job-order:18
(anonymous function) new-job-order:18
d new-job-order:18
(anonymous function) new-job-order:18
(anonymous function) angular.js:2754
forEach angular.js:133
loadModules angular.js:2750
(anonymous function) angular.js:2755
forEach angular.js:133
loadModules angular.js:2750
(anonymous function) angular.js:2755
forEach angular.js:133
loadModules angular.js:2750
(anonymous function) angular.js:2755
forEach angular.js:133
loadModules angular.js:2750
createInjector angular.js:2692
bootstrap angular.js:959
(anonymous function) new-job-order:45
o new-job-order:29
e.onload.e.onerror.e.(anonymous function) new-job-order:29 
```

**更新**

我的代码实际上只是种子模板，使用 index-async.html 文件。然后我添加（或尝试）bootstrap-ui。相关部分是：

```
 <script>
    // include angular loader, which allows the files to load in any order
    /*
     AngularJS v1.0.0rc1
     (c) 2010-2012 AngularJS http://angularjs.org
     License: MIT
    */
    'use strict';(function(i){function d(c,a,e){return c[a]||(c[a]=e())}return d(d(i,"angular",Object),"module",function(){var c={};return function(a,e,f){e&&c.hasOwnProperty(a)&&(c[a]=null);return d(c,a,function(){function b(a,b,d){return function(){c[d||"push"]([a,b,arguments]);return g}}if(!e)throw Error("No module: "+a);var c=[],d=[],h=b("$injector","invoke"),g={_invokeQueue:c,_runBlocks:d,requires:e,name:a,provider:b("$provide","provider"),factory:b("$provide","factory"),service:b("$provide","service"),
    value:b("$provide","value"),constant:b("$provide","constant","unshift"),filter:b("$filterProvider","register"),directive:b("$compileProvider","directive"),config:h,run:function(a){d.push(a);return this}};f&&h(f);return g})}})})(window);

    // include a third-party async loader library
    /*!
     * $script.js v1.3
     * https://github.com/ded/script.js
     * Copyright: @ded & @fat - Dustin Diaz, Jacob Thornton 2011
     * Follow our software http://twitter.com/dedfat
     * License: MIT
     */
    !function(a,b,c){function t(a,c){var e=b.createElement("script"),f=j;e.onload=e.onerror=e[o]=function(){e[m]&&!/^c|loade/.test(e[m])||f||(e.onload=e[o]=null,f=1,c())},e.async=1,e.src=a,d.insertBefore(e,d.firstChild)}function q(a,b){p(a,function(a){return!b(a)})}var d=b.getElementsByTagName("head")[0],e={},f={},g={},h={},i="string",j=!1,k="push",l="DOMContentLoaded",m="readyState",n="addEventListener",o="onreadystatechange",p=function(a,b){for(var c=0,d=a.length;c<d;++c)if(!b(a[c]))return j;return 1};!b[m]&&b[n]&&(b[n](l,function r(){b.removeEventListener(l,r,j),b[m]="complete"},j),b[m]="loading");var s=function(a,b,d){function o(){if(!--m){e[l]=1,j&&j();for(var a in g)p(a.split("|"),n)&&!q(g[a],n)&&(g[a]=[])}}function n(a){return a.call?a():e[a]}a=a[k]?a:[a];var i=b&&b.call,j=i?b:d,l=i?a.join(""):b,m=a.length;c(function(){q(a,function(a){h[a]?(l&&(f[l]=1),o()):(h[a]=1,l&&(f[l]=1),t(s.path?s.path+a+".js":a,o))})},0);return s};s.get=t,s.ready=function(a,b,c){a=a[k]?a:[a];var d=[];!q(a,function(a){e[a]||d[k](a)})&&p(a,function(a){return e[a]})?b():!function(a){g[a]=g[a]||[],g[a][k](b),c&&c(d)}(a.join("|"));return s};var u=a.$script;s.noConflict=function(){a.$script=u;return this},typeof module!="undefined"&&module.exports?module.exports=s:a.$script=s}(this,document,setTimeout)

    // load all of the dependencies asynchronously.
    $script([
      'lib/angular/angular.js',
      'lib/angular/angular-resource.js',
      'lib/angular-ui/ui-bootstrap-0.2.0.js',
      'js/app.js',
      'js/services.js',
      'js/controllers.js',
      'js/filters.js',
      'js/directives.js'
    ], function() {
      // when all is done, execute bootstrap angular application
      angular.bootstrap(document, ['myApp']);
    });
  </script> 
```

然后在 app.js 我做：

```
angular.module('myApp', ['myApp.filters', 'myApp.services', 'myApp.directives', 'ngResource', 'ui.bootstrap']).
  config(['$routeProvider', '$locationProvider', function($routeProvider, $locationProvider) {
    $routeProvider.when('/view1', {templateUrl: 'partials/partial1.html', controller: MyCtrl1});
    $routeProvider.when('/view2', {templateUrl: 'partials/partial2.html', controller: MyCtrl2});
    $routeProvider.otherwise({redirectTo: '/view1'});
    $locationProvider.html5Mode(true).hashPrefix('!');
  }]); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T09:46:53.087

我不认为它与引导项目特别相关，目前 AngularJS 根本不允许异步加载模块，请检查此线程：[如何在 AngularJS 中减轻模块化？](https://stackoverflow.com/q/12645720/1418796).

基本上所有 AngularJS 模块都必须在应用程序启动之前加载。因此，您需要确保在启动 AngularJS 应用程序之前，您所依赖的所有模块都已完全加载。

愿意提供更多帮助，但仅基于错误代码几乎不可能说更多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-11T15:30:12.717

原来这是 $script 加载程序的错，这里是解释问题的 github 问题：[https ://github.com/angular/angular-seed/issues/40](https://github.com/angular/angular-seed/issues/40)

要解决这个问题，只需从此处获取更新到最新版本的加载脚本：[https ://github.com/DemonShi/angular-seed/blob/2a8b3465574e9fad208b64050ad30e9c45df4ac9/app/index-async.html](https://github.com/DemonShi/angular-seed/blob/2a8b3465574e9fad208b64050ad30e9c45df4ac9/app/index-async.html)

# java - 如果不调用类抽象，我们可以从接口实现几个（不是全部）方法吗？

> ID：15470652
> 
> 赞同：-6
> 
> 时间：2013-03-18T06:07:13.447
> 
> 标签：java, abstract-class

假设我们有一个包含 10 个方法的接口，但在一个类中只实现了其中的 5 个。那么那个类应该是抽象的。有没有办法实现这样一个类而不使其抽象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T06:10:17.073

不可以。具有不完整实现的类必须声明为抽象类。它不能直接实例化，但它可以作为子类构建的公共基础。

所有这一切的重点是编译器可以确保当在对象上调用方法时（由接口定义），该方法确实存在。这是 Java 强类型方法的一部分。

Java 确实有“可选方法”的概念，但这是相当非正式的：您必须提供一个抛出 UnsupportedOperationException 的虚拟实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T06:11:06.757

如果一个类实现了一个接口，它**保证**接口中的所有方法都会被实现。也就是说，如果你不想定义方法的内容，你总是可以抛出一个 UnsupportedOperationException：

```
public void cats(){
   throw new UnsupportedOperationException();
} 
```

简而言之，不声明在您实现的接口中定义的方法是没有办法的。但是有一些方法可以解决它，无论这些方法可能是多么非正式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T06:11:17.937

您必须实现所有接口方法。如果您的类是抽象的，那么创建具体子类的人必须实现这些方法。

# javascript - 在手风琴中访问 div

> ID：15470655
> 
> 赞同：1
> 
> 时间：2013-03-18T06:07:26.803
> 
> 标签：javascript, jquery, asp.net-mvc-3

我无法访问手风琴内的 div 标签。我需要访问 detDivChild。我用了

```
$("#detDivChild").html(""),
$("#accordionChild detDivChild").html(""),
$("#tab-3 accordionChild detDivChild").html("") 
```

但是失败了。

```
 <div id="tab-3" style="clear:both;">

     <div id='accordionChild'> 

     <h3>List</h3>
     <div id="hdrDivChild"></div>
     <h3>Details</h3>
     <div id="detDivChild"></div>

     </div>

    </div 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T06:11:17.377

您忘记告诉`jQuery`选择`DOM`按`ID`（即添加＃）。

如下。

```
$("#tab-3 #accordionChild #detDivChild").html(""); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T06:13:38.517

您正在尝试访问选择器手风琴儿童，就好像它是一个标签一样。AccordionChild 被写为您尝试访问的标签的 id。改为：

```
$("#accordionChild #detDivChild").html("") 
```

同样对于

```
$("#tab-3 #accordionChild #detDivChild").html("") 
```

# sql - 如何在表格列中输入一系列数字

> ID：15470656
> 
> 赞同：-1
> 
> 时间：2013-03-18T06:07:29.497
> 
> 标签：sql, sql-server, tsql

我想在特定系列的列中有值

```
10100
10200
10300
.
.
.
.
11000
11100
11200
.
. 
```

这该怎么做 ？我认为会使用while循环

```
insert into mytable(col_name)
select <> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T06:16:17.423

你可以这样做：

```
WITH Temp
AS
(
  SELECT digit
  FROM (VALUES(0),(1),(2),(3),(4),(5),(6),(7),(8),(9)) AS temp(digit)
), Nums
AS
(
  SELECT t3.digit * 100 + t2.digit * 10 + t1.digit + 1  AS id
  FROM         TEMP AS t1
  CROSS JOIN TEMP AS t2
  CROSS JOIN TEMP AS t3
)
SELECT 
  n = 10100 + (id - 1) * 100
from nums
ORDER BY n; 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!3/d41d8/11151)

* * *

## 这是如何工作的？

此查询将为您提供 1000 行您正在查找的序列，这称为[*算术级数*](http://en.wikipedia.org/wiki/Arithmetic_progression)，并且在您的序列中，序列的第 n 项由 给出`A + (n - 1) * d`。在您的序列中：`a = 10100`第一个数字，起始数字，`d = 100`即种子。

*   首先，我使用了一个生成 10 个数字的锚查询（请注意，此语法是 SQL Server 2008 的新语法），

*   然后我将它与自身交叉连接 3 次，给我 10 ³行 = 1000 行我使用它们根据规则生成 1000 个此序列的数字：每个 n 数字 = `A + (n - 1) * d`，如果你需要更多的交叉连接它自己更多次。

然后，您可以将它们插入到新表中，只需执行`INSERT INTO SELECT`，而不是`SELECT`.

* * *

**请注意：**您可能需要使用[`IDENTITY`](http://msdn.microsoft.com/en-us/library/aa933196%28v=sql.80%29.aspx)column 而不是所有这些东西，使用它您可以定义起始值和种子值，然后它将自动递增，请参阅这篇文章：

*   [了解身份列](http://www.sqlteam.com/article/understanding-identity-columns)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T06:12:06.893

请试试这个：

```
DECLARE @table as TABLE(NUM bigint)
declare @var bigint
set @var=10100
while @var<11200
begin
    insert into @table values (@var)
    set @var=@var+100
end

select * from @table 
```

# jquery - 检查所有元素是否满足条件

> ID：15470660
> 
> 赞同：25
> 
> 时间：2013-03-18T06:07:37.990
> 
> 标签：jquery

我需要一个 jQuery filter/map/each 类型函数来检查所有元素是否满足条件：

```
function areAllValid(inputs){
     return $.someFunction(inputs, function(input) { return input.length > 0; }); 
} 
```

如果所有输入的长度 > 0`someFunction`应该返回 true。jQuery中有这样的东西吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-18T06:20:56.000

答案是肯定的，它有一个方法 grep 可以满足你的要求。例如：

```
inputs= jQuery.grep(inputs, function(input){
return input.length>0;
});
if(inputs.length>0) return true;
return false; 
```

我没有测试它，也许它有一个小问题，但应该几乎是这样的。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-02-17T14:57:25.943

您不需要使用 jQuery 来执行此操作。您可以使用[Array.prototype.every](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/every)在本机 JavaScript 中执行此操作，IE 9+ 支持它。

```
function areAllValid(inputs){
     return inputs.every(function(input) { return input.length > 0; }); 
} 
```

如果您使用的是 EcmaScript 2015，您可以进一步整理：

```
var areAllValid = inputs => inputs.every(input => input.length > 0); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-18T06:35:49.103

这将遍历每个项目，以及与先前结果的条件，因此只有当所有项目的条件都为真时，它才会返回真。您当然可以用回调函数替换条件，并做`inputs.each(`而不是，`$('input')`但您可能需要根据输入是否为 jquery 对象稍微调整代码。

```
var all = true;
  $('input').each( function(index, value) { 
    all = all & ($(value).val().length > 0);
  });
return all; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T07:25:46.830

不完全是，但很容易创建一个：

```
 $.eachCondition = function (obj, conditionFunction){
        var trueCount=0;
        var falseCount=0;

        $.each(obj, function (i,v) {
          if (conditionFunction.call(this,i,v)) {
            trueCount++;
          }
          else {
            falseCount++;
          }
          });
          if (falseCount===0) {
            return true;
          }
          if (trueCount===0) {
            return false;
          }
          return undefined;
      };
      $.fn.eachCondition = function (conditionFunction) {
        return $.eachCondition(this, conditionFunction);
      }; 
```

这是工作测试：http: [//jsbin.com/iwanof/2/](http://jsbin.com/iwanof/2/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-17T14:46:05.567

我通常使用以下表格在 JQuery 中获取匹配项

```
$.map($("[some selector]"), function(e) {
  return ([some matching mechanism]);
}).indexOf(false) == -1; 
```

在您的特定情况下，它看起来像这样：

```
$.map(inputs, function(e) {
  return (e.length > 0);
}).indexOf(false) == -1;
```

希望这可以节省您一些时间。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-11-02T12:19:29.047

现有答案没有解决一些小的优化问题，所以我会用我认为是最具可读性/性能的代码来表达我的看法。

添加一个这样的jQuery扩展方法，它会短路：

```
/** 
* Determines whether all elements of a sequence satisfy a condition.
* @@param  {function} predicate - A function to test each element for a condition.
* @@return {boolean}  true if every element of the source sequence passes the test in the specified predicate
*/
$.fn.all = function (predicate) {
    $(this).each(function (i, el) {
        if (!predicate.call(this, i, el)) return false;
    });
    // we made it this far, we're good.
    return true;
}; 
```

然后像这样调用它：

```
var allValid = $("form :input").all(function () {
                   return $(this).valid();
                }); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-02-10T10:11:20.700

快速的小 jQuery：

```
$(document).ready(function() {
  $('form input').keyUp(function() {
    var allValid = true;
    $.each($('form input'), function(input) { 
      allValid = input.val().length > 0 
    }
    if ( allValid )
      ...
    else
      ...
  })
}); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-01-23T21:26:12.283

```
function areAllValid(inputs){
     return Array.prototype.every.call(inputs, function(input) { return input.length > 0; }); 
} 
```

# hibernate - 使用休眠注释自动递增和用户定义的 id

> ID：15470665
> 
> 赞同：3
> 
> 时间：2013-03-18T06:07:57.077
> 
> 标签：hibernate, auto-increment

我可以使用休眠注释为同一字段设置自动增量和用户设置ID吗？

EG：如果用户输入ID，则使用给定的ID

-或者-

如果用户没有输入任何内容，Hibernate 应该自己创建 ID。

我会很感激任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T08:26:30.600

由于您已绑定到 Hibernate，因此您可以使用自定义 id 生成器。假设您有以下 id 字段，如果用户提供了您想要为其设置 id 的字段，否则它应该是自动生成的。

```
@Id
@GeneratedValue(strategy=GenerationType.IDENTITY, generator="CustomIdGenerator")
@GenericGenerator(name="CustomIdGenerator ",
                  strategy="xx.yy.zz.CustomIdGenerator"
)
private Integer id; 
```

这是自定义生成器，如果未提供，它将生成 id。

```
import org.hibernate.id.IdentityGenerator;
...
public class CustomIdGenerator extends IdentityGenerator {

@Override
public Serializable generate(SessionImplementor session, Object obj) throws HibernateException {

    if ((((yourEntity) obj).getId()) == null) {
        Serializable id = super.generate(session, obj) ;
        return id;
    } else {
        return ((yourEntity) obj).getId();

    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T08:18:08.113

我想你正在寻找这个

```
@Id
@GeneratedValue(strategy=GenerationType.AUTO)
private int id; 
```

# javascript - 使用 ng-repeat 拖动后，Angularjs 指令属性绑定左/上位置

> ID：15470666
> 
> 赞同：7
> 
> 时间：2013-03-18T06:07:58.797
> 
> 标签：javascript, binding, angularjs

我是 Angular 的新手，并且一直在尝试创建一个指令，它将元素上的位置绑定到模型 - 在用户拖动它之后。我发现了另一个 Stack Overflow 问题，它为一个简单的对象解决了这个问题：

[Angularjs指令属性绑定左上角拖动后](https://stackoverflow.com/questions/14216925/angularjs-directive-attribute-binding-of-left-and-top-position-after-dragging)

```
myApp.directive('draggable', function () {
    return {
        restrict: 'A',
        link: function (scope, element, attrs) {
            element.draggable({
                cursor: "move",
                stop: function (event, ui) {
                    scope[attrs.xpos] = ui.position.left;
                    scope[attrs.ypos] = ui.position.top;
                    scope.$apply();
                }
            });
        }
    };
}); 
```

请参阅此处的小提琴解决方案：http: [//jsfiddle.net/mrajcok/5Mzda/](http://jsfiddle.net/mrajcok/5Mzda/)

现在，我现在正试图让它与更复杂的对象和 一起工作`ng-repeat`，但似乎无法弄清楚为什么它不起作用。

这是我的 HTML：

```
<div ng-controller="MyCtrl">
  <div ng-repeat="position in positions">
      <input type="number" ng-model="position.divleft"/>
      <input type="number" ng-model="position.divtop"/>
      <p draggable class="example" ng-style="{left: position.divleft, top: position.divtop}" xpos="position.divleft" ypos="position.divtop">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
  </div>
</div> 
```

这是JS：

```
var myApp = angular.module('myApp', []);

function MyCtrl($scope) {
  $scope.positions = [
      {"divtop": 80,
       "divleft": 200
      },
      {"divtop": 100,
       "divleft": 250
      }
  ];
};

myApp.directive('draggable', function () {
    return {
        restrict: 'A',
        link: function (scope, element, attrs) {
            element.draggable({
                cursor: "move",
                stop: function (event, ui) {
                    scope[attrs.xpos] = ui.position.left;
                    scope[attrs.ypos] = ui.position.top;
                    scope.$apply();
                }
            });
        }
    };
}); 
```

这是小提琴：

[http://jsfiddle.net/5Mzda/19/](http://jsfiddle.net/5Mzda/19/)

我似乎看不出代码有什么问题。将不胜感激任何帮助！

# 更新

我在原始问题中更仔细地阅读了评论，看起来像是在使用`$eval`作品：

```
myApp.directive('draggable', function () {
    return {
        restrict: 'A',
        link: function (scope, element, attrs) {
            element.draggable({
                cursor: "move",
                stop: function (event, ui) {
                    scope.$eval(attrs.xpos + '=' + ui.position.left);
                    scope.$eval(attrs.ypos + '=' + ui.position.top);
                    scope.$apply();
                }
            });
        }
    };
}); 
```

不确定是否有更优雅的方法可以做到这一点，但现在看来绑定工作正常！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-18T07:32:08.383

这看起来不错。

您需要在角度框架中执行所有与角度相关的表达式。如果是从事件处理程序外部调用的 dom 事件处理程序和方法，您需要使用[$apply](http://docs.angularjs.org/api/ng.$rootScope.Scope#$apply)以角度执行它们，这将执行表达式，然后调用[$digest](http://docs.angularjs.org/api/ng.$rootScope.Scope#$digest)进而调用附加的手表。

您唯一需要做的改变是将语句移到里面`$apply()`

```
scope.$apply(function(){
    scope.$eval(attrs.xpos + '=' + ui.position.left);
    scope.$eval(attrs.ypos + '=' + ui.position.top);
}); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/5Mzda/22/)

# c++ - C++ 递归联合、交集和差异

> ID：15470667
> 
> 赞同：0
> 
> 时间：2013-03-18T06:08:05.343
> 
> 标签：c++, recursion, set-theory

这是一个家庭作业，我真的不知道该怎么做。我通常会创建 v3 = v1，然后通过 v2、通过 i 递增，并检查 v2 的元素是否在 v3 中。如果没有，我会将它们添加到 v3。但是我无法在方法之外创建 v3，如果我尝试在方法内部创建它，它只会自行重置。任何人都可以帮助我吗？

这是迄今为止我为它们提供的代码及其包装函数（它只是骨架）：

```
// returns a new vector; every element in v1 and every element in v2 are also in this new vector
// if an element appears in both v1 and v2, it is only added once to the new vector
template <typename T> vector<T> vec_union(vector<T> &v1, vector<T> &v2)
{
    return v1;
}

template <typename T> vector<T> vec_union(vector<T> &v1, vector<T> &v2, unsigned i)
{
    return v1;
}

// returns a new vector; every element that is in both v1 and v2 are also in this new vector
// there are no duplicates in v1 and v2
template <typename T> vector<T> intersection(vector<T> v1, vector<T> v2)
{
    return v1;
}

template <typename T> vector<T> intersection(vector<T> v1, vector<T> v2, unsigned i)
{
    return v1;
}

// returns a new vector; every element that is in v1 but not v2 are also in this new vector
// there are no duplicates in v1 and v2
template <typename T> vector<T> difference(vector<T> v1, vector<T> v2)
{
    return v1;
}

template <typename T> vector<T> difference(vector<T> v1, vector<T> v2, unsigned i)
{
    return v1;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T06:17:57.347

您`v3`通过转发`T`模板参数并将其传递给`vector`我在下面所做的那样创建：

```
vector<T> v3; 
```

我已经`vec_union`为你实现了你的功能。请注意以下几点：我`v3`在函数内部创建了。我已返回`v3`，这`v3`会在调用者调用`vec_union`.

```
template <typename T> vector<T> 
vec_union(vector<T> &v1, vector<T> &v2)
{
  if ( v2.empty() )
    return v1;

  vector<T>::iterator found = std::find(v1.begin(), v1.end(), v2.back());
  if ( found == v1.end() )
  {
    // all good, element not already in v1, so insert it.
    T value = v2.back();
    v1.push_back(value);
    v2.pop_back(); // remove back element
    return vec_union(v1, v2);
  }
  else
  {
    // element was already in v1, skip it and call vec_union again
    v2.pop_back(); // remove back element
    return vec_union(v1, v2);
  }
} 
```

请注意，我的回答修改了 v1 和 v2。我认为这是您的老师所期望的，目的是通过反复复制 v1 和 v2 来实现一种效率低得可笑的递归实现。

你这样调用 vec_union ：

```
vector<int> firstVector;
vector<int> secondVector;
vector<int> unionVector = vec_union(firstVector, secondVector); 
```

# android - 以编程方式捕获屏幕不起作用

> ID：15470668
> 
> 赞同：2
> 
> 时间：2013-03-18T06:08:07.973
> 
> 标签：android, screenshot, android-screen

我有以下方法可以在操作项单击时捕获屏幕。它适用于 Android <2.3 但不适用于 4+。这种截屏方式有什么问题。

```
private void captureScreen() {
    View v = mapView.getRootView();
    v.setDrawingCacheEnabled(true);
    Bitmap capturedBitmap = Bitmap.createBitmap(v.getDrawingCache());
    v.setDrawingCacheEnabled(false);

    if(capturedBitmap != null) {
        Intent intent = new Intent(this, ScreenCapturedAlertActivity.class);
        intent.putExtra("capturedImage", capturedBitmap);
        intent.putExtra("name", location.getName());
        startActivity(intent);
    } else {
        Toast.makeText(this, "Screen Capture Failed", Toast.LENGTH_SHORT).show();
    }
} 
```

ScreenCaputureAlertActivity.java >>>

```
public class ScreenCapturedAlertActivity extends SherlockActivity {

private ImageView capturedImage;
private Bitmap capturedBitmap;
private String name;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);

    setContentView(R.layout.activity_screencaptured_alert);

    capturedBitmap = (Bitmap) getIntent().getParcelableExtra("capturedImage");
    name = getIntent().getStringExtra("name");

    capturedImage = (ImageView) findViewById(R.id.ivCapturedImage);
    capturedImage.setImageBitmap(capturedBitmap);
}

private void saveAndShare(boolean share) {
    String root = Environment.getExternalStorageDirectory().toString();
    File dir = new File(root + "/capture/");
    if(!dir.exists())
        dir.mkdirs();

    FileOutputStream outStream = null;
    Random generator = new Random();
    int n = 10000;
    n = generator.nextInt(n);
    File file = new File(dir, "Capture "+n+".jpg");
    if(file.exists()) {
        file.delete();
    }
    try {
        outStream = new FileOutputStream(file);

        capturedBitmap.compress(Bitmap.CompressFormat.JPEG, 100, outStream);

        outStream.flush();
        outStream.close();

    } catch (FileNotFoundException e) {
        e.printStackTrace();
        Toast.makeText(this, "Save Failed", Toast.LENGTH_SHORT).show();
        return;
    } catch (IOException e) {
        e.printStackTrace();
        Toast.makeText(this, "Save Failed", Toast.LENGTH_SHORT).show();
        return;
    }

    if(share) {
        Uri screenshotUri = Uri.fromFile(file);
        Intent intent = new Intent(Intent.ACTION_SEND);
        intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        intent.putExtra(Intent.EXTRA_STREAM, screenshotUri);
        intent.putExtra(Intent.EXTRA_SUBJECT, "Location of " + name);
        intent.putExtra(Intent.EXTRA_TITLE, getText(R.string.screen_share_message));
        intent.putExtra(Intent.EXTRA_TEXT, getText(R.string.screen_share_message));
        intent.setType("image/*");
        startActivity(Intent.createChooser(intent, "Share with"));
        finish();
    } else {
        Toast.makeText(this, "Save Success", Toast.LENGTH_SHORT).show();

        sendBroadcast(new Intent(Intent.ACTION_MEDIA_MOUNTED,Uri.parse("file://" + Environment.getExternalStorageDirectory())));
        finish();
    }
}

public void saveCapture(View view) {
    saveAndShare(false);
}

public void shareCapture(View view) {
    saveAndShare(true);
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T07:50:17.240

感谢@KumarBibek 的指导。

我得到的错误是

```
!!! FAILED BINDER TRANSACTION !!! 
```

从链接中选择的答案

[将位图作为字节数组发送](https://stackoverflow.com/questions/11010386/send-bitmap-using-intent-android)

我在第一个活动中确实喜欢这样：

```
private void captureScreen() {
    View v = mapView.getRootView();
    v.setDrawingCacheEnabled(true);
    Bitmap capturedBitmap = Bitmap.createBitmap(v.getDrawingCache());
    v.setDrawingCacheEnabled(false);

    ByteArrayOutputStream stream = new ByteArrayOutputStream();
    capturedBitmap.compress(Bitmap.CompressFormat.PNG, 100, stream);
    byte[] byteArray = stream.toByteArray();

    if(capturedBitmap != null) {
        Intent intent = new Intent(this, ScreenCapturedAlertActivity.class);
        intent.putExtra("capture", byteArray);
        intent.putExtra("name", location.getName());
        startActivity(intent);
    } else {
        Toast.makeText(this, "Screen Capture Failed", Toast.LENGTH_SHORT).show();
    }

} 
```

在 ScreenCapturedAlertActivity 中：

```
byte[] byteArray = getIntent().getByteArrayExtra("capture");
        capturedBitmap = BitmapFactory.decodeByteArray(byteArray, 0, byteArray.length); 
```

它现在运行良好。再次感谢@KumarBibek

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T07:34:34.467

不要传递整个位图，而是尝试将文件保存文件的路径传递给下一个活动。位图是一个大对象，不应该像那样传递。

由于您已经检查了图像是否保存完好，如果您处理路径而不是位图，我认为它会解决您的问题。

# c# - 寻找可能的组合linq

> ID：15470672
> 
> 赞同：3
> 
> 时间：2013-03-18T06:08:27.907
> 
> 标签：c#, linq, permutation

我需要在`{"a", "b","c"}`.

例如，输入集说像`{"a", "b","c"}`，预期输出是`{"a", "b", "c" "ab", "ac", "bc", "abc"}`。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-18T06:22:51.140

听起来您正在寻找的基本上是一种[power set](http://en.wikipedia.org/wiki/Power_set)形式。这是一个简单的实现（取自[本网站](http://rosettacode.org/wiki/Power_set#C.23)）：

```
public IEnumerable<IEnumerable<T>> GetPowerSet<T>(this IList<T> list)
{
    return from m in Enumerable.Range(0, 1 << list.Count)
           select
               from i in Enumerable.Range(0, list.Count)
               where (m & (1 << i)) != 0
               select list[i];
} 
```

请注意，感谢`<<`操作符，您将无法将此方法用于包含 30 个以上元素的列表。无论如何，我不建议尝试使用包含接近那么多元素的列表，因为在 30 个元素时，结果集将包含 2 ^(30)或 1073741824 个元素。

您可以使用此方法获得您想要的结果，如下所示

```
public IEnumerable<string> GetPermutations(IList<string> strings)
{
    return from s in strings.GetPowerSet()
           select string.Concat(s);
} 
```

但是，由于幂集包含空集，这实际上会返回结果`{"", "a", "b", "c", "ab", "ac", "bc", "abc"}`。要过滤掉空字符串，请使用以下命令：

```
public IEnumerable<string> GetPermutations(IList<string> strings)
{
    return from s in strings.GetPowerSet()
           let str = string.Concat(s)
           where str.Length > 0 // exclude null set result
           select str;
} 
```

或者更简单地说：

```
public IEnumerable<string> GetPermutations(IList<string> strings)
{
    return from s in strings.GetPowerSet().Skip(1)
           select string.Concat(s);
} 
```

# java - org.apache.lucene.store.LockObtainFailedException：锁定获取超时：

> ID：15470674
> 
> 赞同：4
> 
> 时间：2013-03-18T06:08:31.823
> 
> 标签：java, solr, lucene

我正在尝试索引从 tomcat 服务器获得的大量日志文件。我编写了代码来打开每个文件，为每一行创建一个索引，然后使用 Apache lucene 存储每一行​​。所有这些都是使用多线程完成的。

当我尝试使用此代码时出现此异常

```
org.apache.lucene.store.LockObtainFailedException: Lock obtain timed out: 
```

代码

```
 if (indexWriter.getConfig().getOpenMode() == IndexWriterConfig.OpenMode.CREATE)
        {
          // New index, so we just add the document (no old document can be there):
           System.out.println("adding " + path);

                indexWriter.addDocument(doc);

       } else {
          // Existing index (an old copy of this document may have been indexed) so 
       // we use updateDocument instead to replace the old one matching the exact 
           // path, if present:
            System.out.println("updating " + path);

                indexWriter.updateDocument(new Term("path", path), doc);

          }
        indexWriter.commit();
        indexWriter.close(); 
```

现在我想，因为我每次都提交索引，它可能会导致写锁。所以我删除了`indexWriter.commit();`：

```
if (indexWriter.getConfig().getOpenMode() == IndexWriterConfig.OpenMode.CREATE)
    {
      // New index, so we just add the document (no old document can be there):
       System.out.println("adding " + path);

            indexWriter.addDocument(doc);

   } else {
      // Existing index (an old copy of this document may have been indexed) so 
   // we use updateDocument instead to replace the old one matching the exact 
       // path, if present:
        System.out.println("updating " + path);

            indexWriter.updateDocument(new Term("path", path), doc);

      }

    indexWriter.close(); 
```

现在我也不例外

**问：所以我的问题是为什么 indexWriter.commit(); 导致异常。即使我删除 indexWriter.commit(); 我在搜索时没有遇到任何问题。那就是我得到了我想要的确切结果。那为什么要使用 indexWriter.commit(); ?**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T13:45:15.207

简而言之，它类似于 DB 提交，除非您提交事务，否则添加到 Solr 的文档只是保存在内存中。只有在提交时，文档才会保留在索引中。
如果文档在内存中时 Solr 崩溃，您可能会丢失这些文档。

[解释](http://www.searchworkings.org/blog/-/blogs/simon-says%3a-optimize-is-bad-for-you)：-

> 从第一天开始，Lucene 的原则之一就是一次写入策略。我们从不写两次文件。当您通过 IndexWriter 添加文档时，它会被索引到内存中，一旦我们达到某个阈值（最大缓冲文档或 RAM 缓冲区大小），我们会将所有文档从主内存写入磁盘；您可以在此处和此处找到更多相关信息。将文档写入磁盘会产生一个全新的索引，称为段。现在，当您索引一堆文档或在生产环境中运行增量索引时，您可以看到段的数量经常变化。然而，**一旦你调用 commit Lucene 会将其整个 RAM 缓冲区刷新为段，同步它们并将指向属于此提交的所有段的指针写入 SEGMENTS 文件**。

如果文档已经存在于 Solr 中，它将被覆盖（由唯一 id 确定）。
因此，您的搜索可能仍然可以正常工作，但除非您提交，否则最新文档不可用于搜索。

此外，一旦您打开和索引编写器，它将获得索引上的锁定，您应该关闭编写器以释放锁定。

# azure - Microsoft Azure 阻塞服务器？

> ID：15470677
> 
> 赞同：0
> 
> 时间：2013-03-18T06:08:37.237
> 
> 标签：azure

有可能，MS 阻塞了服务器（vm）几天，没有任何回应他们为什么这样做？我在一个服务器上玩，它的服务器是天蓝色的，服务器关闭 5-6 天，他们说，这是因为 MS 阻止了他们的服务器，他们正在等待响应。我认为这是胡说八道，对吧？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T03:43:56.710

阻止服务器是什么意思，谁是告诉你这个的“他们”？MS 不会“阻止”服务器，除非您使用试用帐户并且已达到免费试用的支出上限，此时 VM 将关闭，但 VHD 仍将存在于存储中。

# java - 在 spring 控制器中保持相同的会话

> ID：15470679
> 
> 赞同：1
> 
> 时间：2013-03-18T06:08:47.113
> 
> 标签：java, session, spring-mvc

我有两个控制器 UserSignInController 和 PageNavigationController。我想在两个控制器中维护相同的 HttpSession，但我在 diff 页面中找到了一个 diff 会话。我还在控制器页面中添加了 @SessionAttributes("userDetails")。请告诉我如何创建这个?

用户登录控制器

```
@RequestMapping(value="/analyzeinternet1.html", method=RequestMethod.GET)
    public ModelAndView getSocialMediaAdmin(HttpSession session, Model model) {
        LOG.info(" session..." + session);
        ModelAndView mv = null;

        UserProfile up = (UserProfile) session.getAttribute("userDetails");
        if(up == null) { //Checking whether the user is already signed up or not. If not, the user is redirected to login page. 
            LOG.info("No user in session...");
            mv = new ModelAndView("redirect:/login.html");
        } else {
            LOG.info("User in session..." + up);
            mv = new ModelAndView("internetanalyze");
            model.addAttribute("userDetails", up);
            session.setAttribute("userDetails", up);
            mv.addObject("clientId", up.getUserId());
        }

        LOG.info(mv);
        return mv;
    } 
```

页面导航控制器

```
@RequestMapping(value="/analyzeinternet.html", method=RequestMethod.GET)
    public ModelAndView getAnalyzeInternet(HttpSession session, Model model) {
        LOG.info("-----session..." + session);
        //LOG.info("-----userprofile..." + userDetails);
        ModelAndView mv = null;
         up = (UserProfile) session.getAttribute("userDetails");
            LOG.info("User in session..." + up);
            mv = new ModelAndView("internetanalyze");
            //mv.addObject("clientId", up.getUserId());
            return mv;
    } 
```

两个会话 id 都不同，我的重定向代码是

```
<a href="<%=request.getContextPath()%>/analyzeinternet.html"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T06:44:52.253

你的意思是你从一页浏览你的应用程序到第二页，第二页使用 PageNavigationController 你没有得到相同的会话？你如何检查它是否不是同一个会话？您确定在会话中设置 userDetails 吗？

还要检查会话 cookie 是否在请求中正确传递。您可以使用 firebug 或 chrome 控制台检查响应和请求标头中的 cookie 值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T11:36:44.683

我找到了答案。这段代码写在 context.xml 中

```
<Context path="/sm" docBase="sm"
        debug="5" reloadable="true" crossContext="true" cookies="false"> 
```

其中 cookies="false" 应该是 cookies="true"。

# android - 从 Android WebView 中的 Java 对象接收到的值类型是什么？

> ID：15470681
> 
> 赞同：0
> 
> 时间：2013-03-18T06:08:49.587
> 
> 标签：android, cordova

我在 Java 中有一个类，比如 A，它只有很少的方法和一些静态变量。

我正在 Android 中构建一个基于 WebView 的应用程序。我已经使用 addJavascriptInterface 方法注入了一个类 A 的实例。（该应用程序实际上是使用Phonegap）

我有一个 Javascript 函数，它使用传递给它的公钥 K(n, e) 执行 RSA 加密。

```
encryptString(n, e); 
```

'n' 由 A 类的方法返回，调用如下：

```
var keyn = window.A.load("publicKey"); 
```

这是我有问题的地方。当我将 'n' 作为字符串传递，并且 'e' = "10001" 作为字符串传递时，加密效果很好。但是，当我通过从该方法接收到的 keyn 时，它不起作用。

```
encryptString("42342abcdefg2232", "10001"); // Works

encryptString(keyn, "10001"); // Doesn't work :( 
```

我已经在 logcat 中记录了 keyn，它表明在变量 keyn 中正确接收了值。

那有什么问题呢？

PS：我尝试了两个不同的 RSA 加密库，并且两者都存在相同的问题。所以，很可能这不是我使用的加密代码的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T11:30:41.640

我找到的解决方案是我通过`keyn`了`new String(keyn)`并且它有效。在旅途中，我发现了 Javascript 中字符串文字和字符串对象之间的区别。我想`WebView`基本上返回一个`Object`，我们需要在将它传递给函数之前将它转换为字符串对象。

欢迎任何可以详细说明的人。

# c# - 在 XAML 中将十六进制值绑定到颜色

> ID：15470684
> 
> 赞同：2
> 
> 时间：2013-03-18T06:09:06.783
> 
> 标签：c#, winrt-xaml

我将对象存储在我在 GridView 中显示的数据库中。我正在从数据库中绑定它们的每个属性。颜色属性存储为十六进制值。

我正在尝试使用如下所示的转换器函数绑定此十六进制值，并且现在每次都返回红色。

它似乎正在工作，但最终返回以下错误：程序“[5548] TranslatorService.Example.exe：托管（v4.0.30319）”已退出，代码为-1073741189（0xc000027b）。

谁能告诉我我做错了什么？

代码隐藏：

```
public class StringToColorConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, String language)
    {
        return Colors.Red;
    }

    public object ConvertBack(object value, Type targetType, object parameter, String language)
    {
        throw new NotImplementedException();
    }
} 
```

XAML：

```
 <Grid.Background>
                        <SolidColorBrush Color="{Binding Path=ColorHex, Converter={StaticResource ColorConverter}}" />
                    </Grid.Background> 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T06:13:27.500

根据我的经验，您需要使用画笔，而不是颜色：

```
SolidColorBrush mySolidColorBrush = new SolidColorBrush();
mySolidColorBrush.Color = Color.FromArgb(255, 255, 0, 0); 
```

或者

```
mySolidColorBrush.Color = Color.Red; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-04T20:11:21.330

在您发布的转换器代码中，您将返回 Color.Red，因此无论是什么`value`，您每次都会得到 Red。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T03:48:32.370

重新编译后问题似乎解决了。

# python - 空 EmbeddedDocument 字段？

> ID：15470686
> 
> 赞同：0
> 
> 时间：2013-03-18T06:09:33.240
> 
> 标签：python, mongodb, flask, pymongo, mongoengine

有人能帮助我吗？我试图简单地检索“地址”字段中的内容。除了空括号“[]”之外，我无法打印任何内容

这是一个示例记录：

```
{
  "_id": { "$oid" : "51376F833EF9EB361F354ED0" },
  "addresses": [
    {
      "city": "CAMBRIDGE",
      "suffix": "",
      "street_name": "FRANKLIN ST",
      "prefix": "",
      "zipcode": "49503",
      "state": "MA",
      "street_num": "127"
    }
  ],
  "created_at":{ "$date": 1361160419000.000000 }
} 
```

这是我的课程代码：

```
class Buildings(db.Document):
    _id = db.ObjectIdField(required=True)
    addresses = db.ListField(db.EmbeddedDocumentField('Address'))
    created_at = db.DateTimeField(default=datetime.datetime.now, required=False)
    meta = {
        'allow_inheritance': False,
        'indexes': ['_id'],
        'ordering': ['-created_at']
    }
class Address(db.EmbeddedDocument):
   city = db.StringField(required=False)
   suffix = db.StringField(required=False)
   street_name = db.StringField(required=False)
   zipcode = db.StringField(required=False)
   prefix = db.StringField(required=False)
   state = db.StringField(required=False)
   is_contracted = db.IntField(required=False)
   street_num = db.StringField(required=False) 
```

还有一个循环应该打印嵌入的 Document 但只为每个对象返回一个 [] 。

```
for building in Buildings.objects:
    print building.addresses 
```

知道为什么这不起作用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T09:59:31.110

尝试检查您的代码如何在 mongodb 中存储记录：

```
address = Address(**{
    "city": "CAMBRIDGE",
    "suffix": "",
    "street_name": "FRANKLIN ST",
    "prefix": "",
    "zipcode": "49503",
    "state": "MA",
    "street_num": "127"
})
Buildings(_id=ObjectId(), addresses=[address]).save() 
```

您会看到下一个结果：

```
{
    "_id": ObjectId("5146e17969d90d0f124536ee"),
    "addresses": [{
        "_types": ["Address" ],
        "city": "CAMBRIDGE",
        "suffix": "",
        "street_name": "FRANKLIN ST",
        "state": "MA",
        "zipcode": "49503",
        "prefix": "",
        "_cls": "Address",
        "street_num": "127"
    }],
    "created_at" : ISODate("2013-03-18T12:42:17.389Z")
} 
```

我会将您的模型实现为：

```
class Address(db.EmbeddedDocument):
    city = db.StringField()
    suffix = db.StringField()
    street_name = db.StringField()
    zipcode = db.StringField()
    prefix = db.StringField()
    state = db.StringField()
    is_contracted = db.IntField()
    street_num = db.StringField()

    meta = {
        'allow_inheritance': False,
    }

class Buildings(db.Document):
    addresses = db.ListField(db.EmbeddedDocumentField(Address))
    created_at = db.DateTimeField(default=datetime.datetime.now)

    meta = {
        'allow_inheritance': False,
        'indexes': ['_id'],
        'ordering': ['-created_at'],
    } 
```

将记录存储为：

```
{
    "_id": ObjectId("5146e2b069d90d0f2cc3911a"),
    "addresses": [{
        "city": "CAMBRIDGE",
        "suffix": "",
        "street_name": "FRANKLIN ST",
        "state": "MA",
        "zipcode": "49503",
        "prefix": "",
        "street_num": "127"
    }],
    "created_at": ISODate("2013-03-18T12:47:28.939Z")
} 
```

我不知道您如何保存带有字段`"_id": { "$oid": "51376F833EF9EB361F354ED0"}`和的文档`"created_at":{"$date": 1361160419000.000000}`，但我认为其中存在问题。

`required`字段参数默认为`False`.

`EmbeddedDocumentField`并且`ReferenceFiled`可以获取参数`EmbeddedDocument`和`Document`类或字符串（`'self'`供自己参考）。

如果您想将 id 作为对象，您可能还必须在代码中创建它。

如果您想要另一种日期时间格式，您可能必须使用`ComplexDateTimeField`或使用基类来实现它`ComplexDateTimeField`。

# wordpress - 显示作者元数据时在 author.php 中出现错误

> ID：15470687
> 
> 赞同：0
> 
> 时间：2013-03-18T06:09:42.970
> 
> 标签：wordpress, author

我创建了自己的 author.php 模板。我想显示作者的自定义元字段代码示例在此图像中：http: [//prntscr.com/wsdsa](http://prntscr.com/wsdsa)

但是 Wordpress 不显示任何内容？我该怎么办 ？

```
 <div class="BCol">
                    <?php echo keepAuthorImage(); ?>
                </div>
                <div class="ACol">
                    <div class="A1"><?php echo get_the_author_meta('first_name') ?> <?php echo get_the_author_meta('last_name') ?></div>
                    <div class="A2"><?php echo the_author_meta('job') ?></div>
                    <div class="A3"><?php echo get_the_author_meta('location') ?></div>
                    <div class="A5">
                        <a href="<?php echo get_the_author_meta('userwebpages') ?>" target="_blank"><img src="<?php echo THEME; ?>/_assets/_img/websiteicon.png" alt=""></a>
                        <a href="http://twitter.com/<?php echo get_the_author_meta('twitter') ?>" target="_blank"><img src="<?php echo THEME; ?>/_assets/_img/twitteric.png" alt=""></a>
                        <a href="http://instagram.com/<?php echo get_the_author_meta('instagram') ?>" target="_blank"><img src="<?php echo THEME; ?>/_assets/_img/instagramic.png" alt=""></a>
                    </div>
                    <div class="A4"><?php echo get_the_author_meta('aboute') ?></div>
                </div> 
```

有什么帮助吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T09:22:20.287

Wordpress 有预定义的变量，如

> $猫
> 
> $标签

等你必须使用

> $作者

做你的过程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T07:22:26.050

你做错了什么是你没有在循环中使用你的 get_the_author_meta() 函数，所以你需要指定作者ID。

要么在你的循环中使用函数，要么使用简单的如下代码

```
<?php 
global $current_user;
$current_user = wp_get_current_user();
$uid=$current_user->ID;
?> 
```

将您的函数作者元更改为

```
<?php echo get_the_author_meta('first_name',$uid) ?> 
```

对于您所有的作者元以获得更多帮助，您可以查看参考代码[http://codex.wordpress.org/Function_Reference/get_the_author_meta](http://codex.wordpress.org/Function_Reference/get_the_author_meta)

# javascript - Webmatrix2 - 根据 Razor 中的 UserRole 重定向 URL

> ID：15470695
> 
> 赞同：1
> 
> 时间：2013-03-18T06:10:26.177
> 
> 标签：javascript, razor-2, webmatrix-2

登录后，在 webmatrix2 入门站点中，有一个以下链接；`"hello" bob@example.com {logout}`

单击该链接将带您进入管理部分，但我希望它根据登录成员的角色转到自定义管理用户个人资料页面或业务个人资料页面。因此，本质上代码将检查用户角色然后根据该角色重定向到 url(user manager) 或 (admin manager)

有没有办法在剃须刀中以编程方式执行此操作。

```
 <section id="login">
   @if (WebSecurity.IsAuthenticated) {
     <text>Hello, <a class="email" href="~/Account/Manage"                             title="Manage">@WebSecurity.CurrentUserName</a>!

       <form id="logoutForm" action="~/Account/Logout" method="post">
         @AntiForgery.GetHtml()
           <a href="javascript:document.getElementById('logoutForm').submit()">Log out</a>
       </form>
     </text>
   } else {
           <ul>
              <li><a href="~/Account/Register-User">Register</a></li>
              <li><a href="~/Account/Login">Log in</a></li>
            </ul>
         }
       </section> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T07:36:29.023

您可以使用条件块来呈现链接，具体取决于您可以使用 Roles.IsUserInRole() 方法确定的角色：

```
@if(Roles.IsUserInRole("User Manager")){
    <a href="~/ManageUser">Click</a>
}
@if(Roles.IsUserInRole("AdminManager")){
    <a href="~/ManageAdmin">Click</a>
} 
```

或者，您可以保留链接原样，并在用户登陆“管理”页面后确定用户所处的角色。

# video - 担心Youtube视频开发权限

> ID：15470699
> 
> 赞同：0
> 
> 时间：2013-03-18T06:11:01.687
> 
> 标签：video, youtube, microsoft-metro

我打算使用 js/html 编写一个可以播放 YouTube 视频的 Metro 应用程序。我参考了[YouTube iframe API](https://developers.google.com/youtube/iframe_api_reference)，但有几个限制（例如 iframe 嵌入播放器上没有“全屏”按钮）让我很难继续使用 YouTube iframe API。现在我想到了另一种方式。那是：

首先，向 YouTube 发出请求：`http://www.youtube.com/get_video_info?video_id=[id]`，服务器将响应一个长字符串；

其次，解析字符串，得到一个可以直接下载视频的url；

第三，创建一个视频标签并使用上面的 url 设置 src。

最后，我可以自己定制一个播放器。

该方法现在效果很好。但我担心这种方式违反了 YouTube 的许可。有人知道在我自己的应用程序中使用 YouTube 视频的官方许可吗？或者我在哪里可以找到一些相关文件？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T06:25:47.047

最后，我会说你应该联系 YouTube，他们的开发者页面上有一个[帮助链接。](http://support.google.com/youtube/?hl=en-US)YouTube 确实是唯一可以给你“官方许可”的实体。

也就是说，[服务条款](http://www.youtube.com/t/terms)包括以下说明：

> ```
> C.  You agree not to access Content through any technology or means other than the
>     video playback pages of the Service itself, the Embeddable Player, or other
>     explicitly authorized means YouTube may designate. 
> ```

# jquery - 如何用 jQuery 包装每组两个项目？

> ID：15470705
> 
> 赞同：1
> 
> 时间：2013-03-18T06:11:21.563
> 
> 标签：jquery, drupal-6, jquery-1.3

我想将每组`<h2>`和包装`<table>`在它们自己的内部`<div>`，这样我就可以使用 CSS 操作新容器。

下面是我正在使用的 HTML 的简化版本：

```
<div>
<h3></h3>
<h2 class="product-line-term-name">Product 1</h2>
<table class="views-view-grid"></table>
<h3></h3>
<h2 class="product-line-term-name">Product 2</h2>
<table class="views-view-grid"></table>
<h3></h3>
<h2 class="product-line-term-name">Product 3</h2>
<table class="views-view-grid"></table>
</div> 
```

注意：我只在主题层上工作，所以 jQuery（1.3.2 版）和 CSS 是我的工具。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T06:33:13.743

在这种情况下，您可以使用[nextUntil](http://api.jquery.com/nextUntil/)和[wrapAll ：](http://api.jquery.com/wrapAll/)

```
$('h3').each(function(){
    $(this).nextUntil('h3').wrapAll('<div class="example" />');
}); 
```

演示：http: [//jsfiddle.net/9w9Sp/](http://jsfiddle.net/9w9Sp/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T06:43:42.220

看看这段代码

```
jQuery.each($('.product-line-term-name'), function(i, val) {
   //Create new element 
    var div = "<div>" + $(this)[0].outerHTML + $(this).next()[0].outerHTML + "</div>";  

    $(this).prev().after(div);
    $(this).next().remove();
    $(this).remove();
}); 
```

[见小提琴](http://jsfiddle.net/prPY7/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T06:41:12.290

我认为以下代码将满足您对 jQuery 1.3.2 的目的：

```
var h3_length = $('h3').length;

for(var i= h3_length - 1; i>= 0; i--) {
    $('h3').eq(i).nextAll().not(".test, h3").wrapAll('<div class="test" />');
} 
```

# jquery - 获取 ul 的值（字符串）到 jquery 变量中

> ID：15470706
> 
> 赞同：1
> 
> 时间：2013-03-18T06:11:41.237
> 
> 标签：jquery, html-lists

我有这样的：

```
<ul class="options" id="selt_count">
  <li value="1">One</li>
  <li value="2">Two</li>
  <li value="5">Five</li>
  <li value="12">Other</li>
</ul>
<input type="submit" id="send1" value="send"> 
```

我使用此脚本在 jquery 中以以下格式（1、2、5、12）将 li 的所有值转换为变量：

```
<script>
    $(document).ready(function(){
        $("#send1").click(function(){
            var values = $('#selt_count li').map(function() {
                return this.value
            });
            values;
            var s = '(' + values.get().join(',') + ')';
            alert (s);
        });
    });
</script> 
```

但是如果 li 的值作为字符给出，则此脚本不起作用

示例：现在我有一个 ul：

```
<ul class="options" id="selt_count">
    <li value="jonh">One</li>
    <li value="jack">Two</li>
    <li value="black">Five</li>
    <li value="barbosa">Other</li>
</ul> 
```

脚本将显示 (0,0,0,0)

谁能帮助我并告诉我错误是什么？先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T06:14:57.267

而不是获取文本，而是使用`.attr()`.

```
var text = $(this).attr('value'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T06:16:52.643

像这样尝试你的 HTML：

```
<ul class="options" id="selt_count">
    <li data-value="jonh">One</li>
    <li data-value="jack">Two</li>
    <li data-value="black">Five</li>
    <li data-value="barbosa">Other</li>
</ul> 
```

像这样的JavaScript：

```
<script>
$('#selt_count li').click(function() {
    var index = $(this).index();
    var text = $(this).text();
    var value = $(this).attr('data-value');
    alert('Index is: ' + index + ' , text is ' + text + ' and value is ' + value);
});
</script> 
```

更多关于`data-*`这里：[http ://html5doctor.com/html5-custom-data-attributes/](http://html5doctor.com/html5-custom-data-attributes/)

* * *

基于您的编辑的附加脚本...

```
<script>
    $(document).ready(function(){
        $("#send1").click(function(){
            var values = $('#selt_count li').map(function() {
                return $(this).attr('data-value');
            });
            var s = '(' + values.get().join(',') + ')';
            alert (s);
        });
    });
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T06:16:33.910

您对 .index() 的使用是错误的。查看文档：[.index()](http://api.jquery.com/index/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T06:19:35.190

试试[这个链接](http://jsfiddle.net/mU6MB/)。这可能会对您有所帮助。

和，

```
$('#selt_count li').click(function() {
    var index = $(this).attr('value');
    var text = $(this).text();
    alert('Index is: ' + index + ' and text is ' + text);
}); 
```

# java - 如何在 Java 中使用 Selenium Web Driver 获取跨度的 CSS 类

> ID：15470707
> 
> 赞同：1
> 
> 时间：2013-03-18T06:11:44.677
> 
> 标签：java, automation, selenium-webdriver

我有一个像这样的跨度元素

```
<span id="yui-gen56" class="ir i-doc" style="background-color: transparent;"></span> 
```

现在我想检索类属性值，以便它返回我`ir i-doc`进行验证。知道如何获取此属性值以进行进一步验证。

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T06:40:41.773

您可以尝试以下类似的方法，其中驱动程序是 WebDriver 的对象 -

```
WebElement webElement = driver.findElement(By.id("yui-gen56"));
webElement.getAttribute("class"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-19T06:53:08.533

试试这个...

```
WebElement cssValue = driver.findelement(By.cssSelector("[id='yui-gen56'][class='ir i-doc']"));
String Value = divElement.getText();
System.out.println(Value); 
```

它帮助我找到了 css 类的价值..

# ios - 如何在ios中使用NSThread不断调用函数

> ID：15470708
> 
> 赞同：-1
> 
> 时间：2013-03-18T06:11:49.607
> 
> 标签：ios, objective-c

我正在编写一个用于解析 xml 文件的程序我需要不断读取该文件，这意味着如果 xml 文件在运行时发生任何更改，它也必须在模拟器中显示我也尝试过

```
 NSThread *myThread =[[NSThread alloc]initWithTarget:self selector:@selector(doParsing) object:nil];
    [myThread start]; 
```

它调用了 xml 文件，但没有显示更改。我怎样才能做到这一点

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T06:22:04.937

可能是这样的：

```
NSThread *myThread =[[NSThread alloc]initWithTarget:self selector:@selector(callTimer) object:nil];
[myThread start];

- (void)callTimer
{
   [NSTimer scheduledTimerWithTimeInterval:10.0
    target:self
    selector:@selector(doParsing)
    userInfo:nil
    repeats:YES];
}

- (void)doParsing
{
   //Do the stuff here
} 
```

# ruby-on-rails - 在散列的散列中获取键的值

> ID：15470711
> 
> 赞同：-1
> 
> 时间：2013-03-18T06:12:06.103
> 
> 标签：ruby-on-rails, ruby, hash

我有一个哈希，例如

```
{{"badan"=>1, "bau"=>1, "China,"=>1, "pilot."=>1, "RT"=>1, "penentu"=>1, "merupakan"=>1, "China, test test bau"=>1, "satu"=>1, "merupakan salah salah satu"=>1, "RT @WOWFakta: @WOWFakta: Di"=>1, "Di"=>1, "seorang pilot."=>1, "kelulusan menjadi menjadi seorang"=>1, "seorang"=>1, "salah"=>1, "@WOWFakta:"=>1, "satu penentu penentu kelulusan"=>1, "Di Beijing Beijing China,"=>1, "menjadi"=>1, "kelulusan"=>1, "test"=>1, "bau badan badan merupakan"=>1, "Beijing"=>1}=>{"kebali"=>1, "kff"=>1, "box"=>1, "@zannahoctavia"=>1, "kebali kamu kamu ca?"=>1, "ca?"=>1, "kampus"=>1, "kantin"=>1, "kff hah hah goods"=>1, "@zannahoctavia haha haha kali"=>1, "aja"=>1, "box kemang kemang aja"=>1, "yaa"=>1, "china"=>1, "hah"=>1, "hah. Jadi Jadi kebali"=>1, "goods pw pw tapi"=>1, "aja di di kff"=>1, "di"=>1, "pw"=>1, "kemang"=>1, "haha"=>1, "kali kantin kantin kampus"=>1, "Jadi"=>1, "tapi"=>1, "tapi yaa yaa hah."=>1, "kampus china china box"=>1, "hah."=>1, "kamu"=>1, "kali"=>1}} 
```

我想以一种非常有效的方式检索所有键的值。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T06:14:54.083

你可以迭代你的散列，就像它在散列中包含散列一样

```
h.each do |key, value|
  puts key
  value.values.each do |v|
    puts v
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T06:15:24.230

您的散列包含一个键和一个也是散列的值。您可以尝试以下方法

```
hash.flatten.map(&:keys).inject(:+) 
```

或使用`flat_map`

```
hash.flatten.flat_map(&:keys) 
```

# namespaces - Laravel 3：在命名空间中找不到类

> ID：15470717
> 
> 赞同：1
> 
> 时间：2013-03-18T06:12:19.857
> 
> 标签：namespaces, laravel, laravel-3

这就是问题所在：我无法从命名空间加载类。

我正在开发一个安静的应用程序，我正在尝试遵循实体/服务/存储库的方式来访问并为请求的数据提供格式。问题是我无法从服务加载任何类。我在我的应用程序中创建了一个名为**api**的文件夹，并在其中创建了其他 3 个文件夹`api/entities/`：`api/services/`和`api/repositories/`. 服务内还有 2 个文件夹：**validators**和**datapickers**。

因为它是一个 RESTulf 应用程序，所以我还在控制器文件夹中创建了一个 api 文件夹：`controllers/api/`。

这是我的应用程序文件夹的当前树：

```
app/
   api/
       entities/
       repositories/
       services/
            datapickers/
                MemberData.php
                ConsumeData.php
            validators/
     ...
    models/
    controllers/
       api/
           members.php
           (other restful controllers)
    languages/
     ... 
```

首先，这是我在**start.php中的****Autoload**部分：

 **```
Autoloader::directories(array(
    path('app').'models',
    path('app').'libraries',
    path('app').'api'
));

Autoloader::namespaces(array(
    'Api' => path('app').'api',
)); 
```

这是`MemberData.php`：

```
<?php 
namespace Api\Services\Datapickers;

use Api\Repositories as Repo;

class MemberData
{
     /* Do some stuff */
} 
```

现在，当我尝试使用`MemberData`in 时`controllers/api/members.php`：

```
<?php
use Api\Services\Datapickers\MemberData;

class Api_Members_Controller extends Api_Base_Controller
{
    public function get_index($id = null)
    {
        if (!empty($id))
            $this->params->data = MemberData::getById($id);
        else
        {
            $this->params->data = MemberData::getAll(
                Input::get('offset'), 
                Input::get('limit')
            );
        }

        return Response::json($this->params, 200);
    }
} 
```

我得到以下信息：

```
Unhandled Exception
Message:

Class 'Api\Services\Datapickers\MemberData' not found

Location:

/path_to_project/application/controllers/api/members.php on line 15 
```

这是这一行：`$this->params->data = MemberData::getById($id);`

我自动加载**api**文件夹并在其中注册基本 api 命名空间，`start.php`但我仍然收到相同的错误。它就像 Laravel 不识别 api 命名空间或类似的东西。

我试图注册完整的命名空间：

```
Autoloader::namespaces(array(
    'Api\Services\Datapickers' => path('app').'api/services/datapickers',
)); 
```

但我得到的错误是：`Call to undefinde method 'Api\Services\Datapickers\MemberData::getById()'`。这只是一个测试（我不想在 Autoloader 中注册每个子命名空间）。**

# jquery - AngularJS 和 Redactor 插件

> ID：15470721
> 
> 赞同：2
> 
> 时间：2013-03-18T06:12:32.380
> 
> 标签：jquery, angularjs, redactor

所以我正在使用 AngularJS 开发一个新网站，并且喜欢它！

但是，我遇到了一个问题。我正在尝试向我的 textarea 添加一个名为“Redactor”的 jQuery 插件，但我认为当我初始化插件时，它会替换 textarea 元素。这是有问题的原因，是因为我为文本区域设置了一个“ng-model”属性，如下所示：

我正在使用 AngularJS UI 来获取焦点事件，然后在文本焦点上执行以下代码

```
 $scope.addRedactor = function() {
        $('.redactor').redactor();
    }); 
```

现在我似乎无法获得 textarea 的值，因为当我尝试访问 ng-model 'response' 时，它显示为未定义。

有没有办法在它受到 Redactor 影响后将 ng-model 属性绑定到 textarea？否则，我应该以另一种方式获得 textarea 的价值吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-28T15:15:10.287

我今天也在寻找相同的答案，并做出了解决它的指令：

```
angular.module('Module', []).directive("redactor", function() {
  return {
    require: '?ngModel',
    link: function($scope, elem, attrs, controller) {   

      controller.$render = function() {

        elem.redactor({
          keyupCallback: function() {
            $scope.$apply(controller.$setViewValue(elem.getCode()));
          },
          execCommandCallback: function() {
            $scope.$apply(controller.$setViewValue(elem.getCode()));
          }
        });

        elem.setCode(controller.$viewValue);
      };
    }
  };
}); 
```

然后你可以使用下面的 HTML：

```
<textarea ng-model="yourModel" redactor></textarea> 
```

该模型将在每个 keyUp 以及用户单击工具栏中的按钮时更新。该模型将包含 HTML 代码。

我刚刚开始使用 AngularJS，所以如果有更好的方法可以做到这一点，或者我是否违反了一些我仍然不知道的约定，请告诉我。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-07-30T04:40:58.903

对于那些发现接受的答案不像我那样工作的人。这是有效的（使用 Angular v1.1.5）

```
angular.module('Module', []).directive("redactor", function() {
        return {
            require: '?ngModel',
            link: function($scope, elem, attrs, controller) {
                controller.$render = function() {
                    elem = $(elem);
                    elem.val(controller.$viewValue);
                    elem.redactor({

                        changeCallback: function() {
                            $scope.$apply(controller.$setViewValue(elem.val()));
                        }

                    });

                };
            }
        };
    }); 
```

changeCallback 比其他回调组合好太多了，在我的情况下，我必须将 elem 转换为 Jquery 元素。我还发现 setCode 和 getCode 根本不可用。可能是不同的版本。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-12-11T12:19:20.733

将此 AngularJS 模块用于“RedactorJS”： [https ://github.com/TylerGarlick/angular-redactor](https://github.com/TylerGarlick/angular-redactor)

它对我来说很好。

# android - Cursor.moveToFirst() 和 Cursor.moveToNext() 返回 NULL

> ID：15470726
> 
> 赞同：0
> 
> 时间：2013-03-18T06:13:02.657
> 
> 标签：android

我正在尝试制作谷歌日历服务。

这是我关于日历的代码。

```
if(android.os.Build.VERSION.SDK_INT >= 14)
    {
        LogShow("14");
        final String[] COLS = new String[] {
                CalendarContract.Events.TITLE, 
                CalendarContract.Events.DTSTART, 
                CalendarContract.Events.DTEND, 
                CalendarContract.Events.EVENT_LOCATION
        };

        String TtsData = "";
        Cursor mCursor = mContext.getContentResolver().query(
                CalendarContract.Events.CONTENT_URI, COLS, null, null, null);

        if(mCursor.moveToFirst())
        {
            LogShow("mCursor.moveToFirst()==NULL");
        }
        Calendar c = Calendar.getInstance();
        int day = c.get(Calendar.DAY_OF_MONTH);
        int month = c.get(Calendar.MONTH);
        int year = c.get(Calendar.YEAR);
        int hour = c.get(Calendar.HOUR_OF_DAY);
        while(mCursor.moveToNext())
        {
            LogShow("mCursor.moveToNext()");
            String title = mCursor.getString(0);
            Date begin = new Date(mCursor.getLong(1));
            Date end = new Date(mCursor.getLong(2));
            String EventLocation = mCursor.getString(3);
            if(begin.getDate() == day && begin.getMonth() == month && begin.getYear()+1900 == year)
            {
                LogShow("begin.getDate() == day && begin.getMonth() == month && begin.getYear()+1900 == year");
                if(hour < begin.getHours())
                {
                    if(!EventLocation.equals(""))
                    {
                        if(Value.location.equals(Value.EnglishUK) || Value.location.equals(Value.EnglishUS) ||  Value.location.equals(Value.Canada))
                        {
                            TtsData += " , " + "Title is " + title + ", " + "Start Time" + " , " + 
                            begin.getHours() + ", End Time , " + end.getHours() + ", Event Location , " 
                            + EventLocation + " , ";
                        }
                        else if(Value.location.equals(Value.French) || Value.location.equals(Value.CanadaFrench))
                        {
                            TtsData += " , " + "Intitulé " + title + ", " + "Début" + " , " + 
                            begin.getHours() + ", Fin , " + end.getHours() + ", Lieu de rendez-vous , " 
                            + EventLocation + " , ";                            
                        }
                        else if(Value.location.equals(Value.Germany))
                        {
                            TtsData += " , " + "Titel ist " + title + ", " + "Startzeit" + " , " + 
                            begin.getHours() + ", Endzeit , " + end.getHours() + ", Veranstaltungsort , " 
                            + EventLocation + " , ";                            
                        }
                        else if(Value.location.equals(Value.Italian))
                        {
                            TtsData += " , " + "Titolo è " + title + ", " + "Ora d'inizio" + " , " + 
                            begin.getHours() + ", Ora fine , " + end.getHours() + ", Luogo dell'evento , " 
                            + EventLocation + " , ";                            
                        }
                    }
                    else
                    {
                        if(Value.location.equals(Value.EnglishUK) || Value.location.equals(Value.EnglishUS) || 
                                Value.location.equals(Value.Canada))
                        {
                            TtsData += " , " + "Title is " + title + ", " + "Start Time" + " , " + 
                            begin.getHours() + ", End Time , " + end.getHours();
                        }
                        else if(Value.location.equals(Value.French) || Value.location.equals(Value.CanadaFrench))
                        {
                            TtsData += " , " + "Intitulé " + title + ", " + "Début" + " , " + 
                            begin.getHours() + ", Fin  , " + end.getHours();
                        }
                        else if(Value.location.equals(Value.Germany))
                        {
                            TtsData += " , " + "Titel ist " + title + ", " + "Startzeit" + " , " + 
                            begin.getHours() + ", Endzeit , " + end.getHours();                         
                        }
                        else if(Value.location.equals(Value.Italian))
                        {
                            TtsData += " , " + "Titolo è " + title + ", " + "Ora d'inizio" + " , " + 
                            begin.getHours() + ", Ora fine , " + end.getHours();                            
                        }
                    }
                }
            }
        }

        if(TtsData.equals(""))
        {
            Value.TTS_Data = "You don't have schedule";
            new TextToVoice(mContext, TextToVoice.SPEECH);
        }
        else
        {
            Value.TTS_Data = TtsData;
            new TextToVoice(mContext, TextToVoice.SPEECH);
        }
    }   
} 
```

版本 API14 以上，Cursor.moveToFirst 和 Cursor.moveToNext 将返回 NULL，尽管日历事件已经存在。

我该如何解决这个问题？

# iphone - 无法使用 ABGroupAddMember 将联系人添加到 iphone 中的特定组

> ID：15470733
> 
> 赞同：1
> 
> 时间：2013-03-18T06:13:31.760
> 
> 标签：iphone, objective-c, addressbook

我正在尝试将选定的联系人添加到特定组中，但联系人无法添加到组中。我想创建新组并将联系人添加到该组中。但是在该组中创建组后无法添加联系人。这是我创建新组并将联系人添加到组中的代码：

```
 addressBook = ABAddressBookCreateWithOptions(nil, &err);
    group = ABGroupCreate();
    ABRecordSetValue(group, kABGroupNameProperty, txtGroupNameText.text, &err);
    ABAddressBookAddRecord(addressBook, group, &err);
    ABAddressBookSave(addressBook, &err);
    groupId = ABRecordGetRecordID(group); 
```

并添加联系人：

```
 ABRecordRef person = [contactArray objectAtIndex:i];
        ABRecordRef HiByeGroup = ABAddressBookGetGroupWithRecordID(addressBook,       self.groupId);
        BOOL didAdd = ABGroupAddMember(HiByeGroup,person,&err);

        if (didAdd) {
            // Update to handle the error appropriately.
            NSLog(@"Unresolved error while adding person to HiBye group");
        }

        BOOL didSave = ABAddressBookSave(addressBook, &err);

        if (didSave) {
            // Update to handle the error appropriately.
            NSLog(@"Unresolved error while saving address book");
        } 
```

联系人保存但未添加。请帮助我，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T10:11:41.730

您首先需要先将 Person 保存到通讯簿，然后再将其添加到组中。

例如试试这个代码，它运行良好

```
ABAddressBookRef ab = ABAddressBookCreate();
CFErrorRef error;
ABRecordRef group = ABGroupCreate();
ABRecordSetValue(group, kABGroupNameProperty,@"new group", &error);
ABAddressBookAddRecord(ab, group, &error);
ABAddressBookSave(ab, &error);
//Create new person and save to this group
ABRecordRef record = ABPersonCreate();
BOOL isSuccess ;

isSuccess  = ABRecordSetValue(record, kABPersonNicknameProperty,@"GroupMember nick name", &error);
isSuccess = ABRecordSetValue(record, kABPersonMiddleNameProperty, @"Middle name", &error);

ABMutableMultiValueRef copyOfPhones = ABMultiValueCreateMutable(kABPersonPhoneProperty);

CFTypeRef phone= CFSTR("123000222111");

ABMultiValueAddValueAndLabel(copyOfPhones, phone,kABPersonPhoneMobileLabel,NULL);

isSuccess = ABRecordSetValue(record, kABPersonPhoneProperty, copyOfPhones, &error);

isSuccess = ABAddressBookAddRecord(ab, record, &error);
isSuccess = ABAddressBookSave(ab, &error);

ABGroupAddMember(group, record, &error);

NSLog(@"is success %d", isSuccess);

ABAddressBookSave(ab, &error);
CFRelease(group); 
```

# c# - C# 中的 Java MessageDigest 类

> ID：15470738
> 
> 赞同：10
> 
> 时间：2013-03-18T06:13:58.407
> 
> 标签：c#, encryption

我需要用 Java 完成的某些加密逻辑转换为 C#

MessageDigest**更新**、**摘要**和**重置**功能的 C# 等效项是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-18T13:21:58.563

在 C# 中，类是[HashAlgorithm](http://msdn.microsoft.com/en-us/library/system.security.cryptography.hashalgorithm.aspx)。

update 的等价物是`TransformBlock(...)`or `TransformFinalBlock(...)`，在调用最终块版本之后（您也可以使用空输入），您可以调用`Hash`将为您提供摘要值的属性。

`HashAlgorithm`在调用 final 块后可能可以重用（这意味着它会在您下次调用时重置`TransformBlock`），您可以通过检查属性来仔细检查您是否`HashAlgorithm`支持重用`CanReuseTransform`。

与您的 reset()/digest() 组合等效的是一行`byte[] ComputeHash(byte[])`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-05-13T07:19:30.787

```
try {
      MessageDigest md = MessageDigest.getInstance("SHA-1");
      md.update(password.getBytes());
      BigInteger hash = new BigInteger(1, md.digest());
      hashword = hash.toString(16);
} catch (NoSuchAlgorithmException ex) {
      /* error handling */
}
return hashword; 
```

```
public static string HashPassword(string input)
{
    var sha1 = SHA1Managed.Create();
    byte[] inputBytes = Encoding.ASCII.GetBytes(input);
    byte[] outputBytes = sha1.ComputeHash(inputBytes);
    return BitConverter.ToString(outputBytes).Replace("-", "").ToLower();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-25T09:26:41.837

对于 C# 中的摘要，类似于 Java，您可以使用类 Windows.Security.Cryptography.Core。例如，以下方法返回一个 SHA256 哈希，格式为 base64：

```
public static string sha256Hash(string data)
{
    // create buffer and specify encoding format (here utf8)
    IBuffer input = CryptographicBuffer.ConvertStringToBinary(data,
    BinaryStringEncoding.Utf8);

    // select algorithm
    var hasher = HashAlgorithmProvider.OpenAlgorithm("SHA256");
    IBuffer hashed = hasher.HashData(input);

    // return hash in base64 format
    return CryptographicBuffer.EncodeToBase64String(hashed);
} 
```

请参阅（mbrit）：[如何在 WinRT 中创建 SHA-256 哈希？](https://stackoverflow.com/questions/12503032/how-to-create-sha-256-hashes-in-winrt)

# java - 如何定义具有唯一 id 的 Spring bean（不在文件中）？

> ID：15470740
> 
> 赞同：1
> 
> 时间：2013-03-18T06:14:28.403
> 
> 标签：java, spring, ioc-container

我有很多 Spring xml 文件，我希望每个 bean 在整个 Spring 范围内都必须具有唯一的 id（或者名称对我来说无关紧要）。Cal 我告诉 Spring 在 bean id/name 不唯一的情况下抛出异常？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T07:46:45.157

您可能可以实现自己的 beanfactory 子类，它将在注册期间检查 bean 是否不存在，并可能在父上下文中查找。一个好的方法可能是 registerBean？

# javascript - 创建背景图像以与页面内容不同的速率滚动的效果

> ID：15470741
> 
> 赞同：0
> 
> 时间：2013-03-18T06:14:39.153
> 
> 标签：javascript, jquery, css, html

任何人都可以请解释我如何创建像[https://www.spotify.com/us/](https://www.spotify.com/us/)这样的效果请单击在此页面上了解更多信息。

它看起来像一个3D效果。例如：图像不会像滚动条那样移动。如果我们在页面上有两个段落并且在第 1 段下面有第 2 段，则第 2 段在第 1 段之前移动得很快。

任何指南如何创建这些效果，或者如果有任何 Jquery 插件，那么它也可以。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T06:21:31.403

您链接到的效果称为“视差滚动”。有许多网站和插件描述了如何实现这一点：

*   [http://jonraasch.com/blog/scrolling-parallax-jquery-plugin](http://jonraasch.com/blog/scrolling-parallax-jquery-plugin)
*   [http://abduzeedo.com/super-easy-parallax-effect-jquery](http://abduzeedo.com/super-easy-parallax-effect-jquery)
*   [http://www.impressivewebs.com/parallax-scrolling-scripts-plugins/](http://www.impressivewebs.com/parallax-scrolling-scripts-plugins/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T06:19:51.393

那就是视差效应，

> 视差是沿着两条不同的视线观察到的物体的表观位置的位移或差异，并通过这两条线之间的倾斜角或半角来测量。当从不同位置观察时，附近的物体比更远的物体具有更大的视差，因此可以使用视差来确定距离。

检查此[站点](http://www.techrepublic.com/blog/webmaster/how-the-parallax-effect-is-used-in-web-design/1503) 和[插件](http://stephband.info/jparallax/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T15:20:44.467

我在自己的网站上做了一个非常基本的视差效果。

```
$(window).scroll(
    function() {
        x = $("html").scrollTop() * -.05;
        $(".bg_img").animate({top: x + "px"}, 0);
}); 
```

随意使用它，我总是乐于接受建议。

# nlog - 在多线程应用程序中使用 NLog 跳过日志消息

> ID：15470747
> 
> 赞同：2
> 
> 时间：2013-03-18T06:15:18.833
> 
> 标签：nlog, transaction-log

我将 NLog 用于我的简单 C#.Net 应用程序，它运行良好。但是当我将**NLog 用于 C#.Net 多线程**应用程序时，它会**跳过日志消息**

我还尝试使用 AsyncWrapper 和 AutoFlushWrapper 配置 NLog.config，但它仍然无法正常工作，但仍然跳过了一些消息。

所以，请任何人告诉我在不跳过任何日志消息的情况下为多线程应用程序配置 NLog 的最佳方法是什么？

# android - ViewPager里面的TextView拦截触摸事件

> ID：15470755
> 
> 赞同：14
> 
> 时间：2013-03-18T06:16:08.890
> 
> 标签：android, view, textview, android-viewpager

我有一个`ViewPager`包含两个片段的。在我可以触摸的任何片段中，滑动以切换到另一个`fragment`。其中一个片段包含一个列表。列表中的项目包含一`TextView`和一`ImageView`。问题是，如果您从点击 开始拖动`ImageView`，就可以了。但是，如果它来自`TextView`，则 永远不会知道阻力`ViewPager`，因此“平滑切换”永远不会发生。

对此有任何线索吗？

编辑

这张图片是为了展示我的 GUI 是怎样的。如果拖动是从 TextViewE 开始的，它不会开始。 ![在此处输入图像描述](../Images/9bf834cbe833c80e25e9d3969979dc83.png)

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-08-11T12:20:53.857

这件事也困扰着我，但我已经设法找到了答案。

基本上，情况是：如果视图可以水平滚动，它会拦截水平运动事件，**ViewPager**无法再处理它。

由于**API 级别 14** TextViews 具有**android:** scrollHorizo​​ntally属性（和**setHorizo​​ntallyScrolling(boolean)**方法），如果设置为 true，则会导致 TextView 拦截水平滚动运动事件。

您可以在 XML 或代码中将其设置为 false，但*请注意*：**android:singleLine**属性会强制将**android** :scrollHorizo​​ntally设置为**true**！*非常棘手的一点*！但幸运的是，您通常可以安全地将单行属性替换为**android:maxLines="1"**和必要**的 ellipsize**值。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-05T04:22:58.913

您可以覆盖 TextView 的 onTouchEvent()：

```
@Override
public boolean onTouchEvent(MotionEvent event) {
    if (event.getAction() == MotionEvent.ACTION_MOVE) {
        return false;
    }

    return super.onTouchEvent(event);
} 
```

# jquery - 使用 jquery 触发内联函数

> ID：15470756
> 
> 赞同：0
> 
> 时间：2013-03-18T06:16:12.913
> 
> 标签：jquery, event-triggers

我有一个写在锚本身上的函数，比如

```
<a href="home.jsp" onclick="return confirm('Do you want to logout?');">Log Out</a> 
```

我已经尝试过使用另一个 onclick 甚至像 .

```
$("a").click(function(){ }); 
```

我知道它会触发另一个事件，而不是我期望触发的事件。确认框中的内容是动态的，所以我无法更改功能。有什么方法可以通过jQuery触发锚点的内联功能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T06:19:27.587

要以编程方式触发元素的`click`事件，只需使用[`click()`](http://api.jquery.com/click/)不带参数的方法：

```
$('a').click(); 
```

这是该[`trigger()`](http://api.jquery.com/trigger/)方法的简写，相当于：

```
$('a').trigger('click'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T06:20:53.533

您可以使用[.trigger](http://api.jquery.com/trigger/)。

**注意：它不会触发锚标签的默认动作。**

```
$('a').trigger('click'); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/YusZS/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T13:50:30.923

这里要记住一点，记得给你的href链接一个ID，而不是在那个链接上触发点击事件，否则，如果你在那个页面上有任何其他链接，那么所有这些链接都会触发该功能。

# c++ - 获得 2 个有序列表并集的最有效算法

> ID：15470757
> 
> 赞同：7
> 
> 时间：2013-03-18T06:16:15.360
> 
> 标签：c++, algorithm, list

我需要找到 2 个降序列表（list1 和 list2）的联合，其中联合将是两个列表中没有重复的每个元素。假设列表元素是整数。我正在使用大 O 表示法来确定解决此问题的最有效算法。我知道第一个的大 O 符号，但我不知道第二个的大 O 符号。有人可以告诉我第二种算法的大 O 表示法，以便我可以决定实现哪种算法？如果有人知道比其中一个更好的算法，你能帮我理解吗？提前致谢。

```
Here are my two algorithms. . .

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Algorithm #1: O(N * log base2 N)

Starting at the first element of list1, 
while(list1 is not at the end of the list) {
    if(the current element in list1 is not in list2)    // Binary Search -> O(log base2 N)
        add the current element in list1 to list2
    go to the next element in list1 }

list2 is now the union of the 2 lists

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Algorithm #2: O(?)

Starting at the first elements of each list,
LOOP_START:
    compare the current elements of the lists
    whichever element is greater, put into a 3rd list called list3
    go to the next element in the list whose element was just inserted into list3
    branch to LOOP_START until either list1 or list2 are at the end of their respective list
insert the remaining elements from either list1 or list2 into list3 (the union)

list3 now contains the union of list1 and list2 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-18T06:22:57.147

第二个是 O(n+m)，而第一个是 O(n log(m) + m)。因此，第二个明显更好。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-18T06:23:43.440

这是我对情况的评估

*   您的第一个算法在**n log n**时间内运行：您正在对第一个列表中的每个元素进行二进制搜索，对吗？
*   您的第二个算法并不完全完整：如果两个列表中的元素相等，您不会说该怎么做。但是，考虑到处理相等元素的正确逻辑，您的第二个算法就像[合并排序](http://en.wikipedia.org/wiki/Merge_sort)的合并部分：它将在线性时间内运行（即`N`）。这是最佳的，从某种意义上说，你不能做得比这更好：你不能在不查看两个列表中的每个元素至少一次的情况下合并两个有序列表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-10T22:12:40.120

使用以下算法，您可以在 O(n+m) 中合并两个列表。

[对不起，为了简单起见，我使用了python，但算法在每种语言中都是相同的]

请注意，该算法还维护在结果列表中排序的项目。

```
def merge(list1, list2):
    result = []
    i1 = 0;
    i2 = 0;
    #iterate over the two lists
    while i1 < len(list1) and i2 < len(list2):
        #if the current items are equal, add just one and go to the next two items
        if list1[i1] == list2[i2]:
            result.append(list1[i1])
            i1 += 1
            i2 += 1
        #if the item of list1 is greater than the item of list2, add it and go to next item of list1
        elif list1[i1] > list2[i2]:
            result.append(list1[i1])
            i1 += 1
        #if the item of list2 is greater than the item of list1, add it and go to next item of list2
        else:
            result.append(list2[i2])
            i2 += 1
    #Add the remaining items of list1
    while i1 < len(list1):
        result.append(list1[i1])
        i1 += 1
    #Add the remaining items of list2
    while i2 < len(list2):
        result.append(list2[i2])
        i2 += 1
    return result

print merge([10,8,5,1],[12,11,7,5,2]) 
```

输出：

```
[12, 11, 10, 8, 7, 5, 2, 1] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-04T11:34:43.013

复杂性分析：

假设列表 1 的长度为`N`，列表 2 的长度为`M`。

**算法 1：**
冒着听起来令人难以置信的风险，我会接受，根据我的说法，这种算法的复杂性是 是`N * M`而不是`NlogM`。

对于列表 1 中的每个元素`(O(N))`，我们在列表 2 中搜索它`(O(logM)`。该算法的复杂性“似乎” `O(NlogM)`。

**但是，我们也在列表 2 中插入元素**。这个新元素应该插入适当的位置，以便列表 2 保持排序以进行进一步的二进制搜索操作。如果我们使用数组作为数据结构，那么插入需要`O(M)`时间。

因此，复杂度的顺序是`O(N*M)`算法的原样。

可以进行修改，其中将新元素插入到列表 2 的末尾（然后列表不再有序），并且我们从 index`0 to M-1`而不是从`new size-1`. 在这种情况下，复杂性将是因为我们将在长度列表中`O(N*logM)`执行二进制搜索。`N``M`

为了使列表再次排序，我们必须合并两个有序部分（0 到 M-1 和 M 到 newSize-1）。这可以在 O(N+M) 时间内完成（数组长度为 N+M 的合并排序中的一次合并操作）。因此该算法的净时间复杂度应为

```
O(NlogM + N + M) 
```

空间复杂度`O(max(N,M))`不考虑原始列表空间，仅考虑列表 2 中所需的额外空间。

**算法 2：**
在每次迭代中，我们**至少向前移动 1 个指针**。两个指针移动的总距离为`N + M`。因此，最坏情况下的时间复杂度顺序`O(N+M)`优于第一种算法。

但是，这种情况下所需的空间复杂度更大（`O(N+M)`）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-07T09:14:17.483

这是另一种方法：遍历两个列表，并将所有值插入到一个集合中。这将删除所有重复项，结果将是两个列表的并集。两个重要的注意事项：你会失去数字的顺序。此外，它需要额外的空间。

**时间复杂度：O(n + m)**

**空间复杂度：O(n + m)**

如果您需要维护结果集的顺序，请使用一些自定义版本的 LinkedHashMap。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-12-10T20:54:55.777

实际上，如果输入列表未排序，算法 2 不应该工作。要对数组进行排序，它的顺序是 O(m*lg(m)+ n*lg(n))

您可以在第一个列表上构建一个哈希表，然后对于第二个列表中的每个项目，检查该项目是否存在于哈希表中。这在 O(m+n) 中有效。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-12-10T23:42:48.583

有几点需要指定：

*   输入列表是否包含重复项？
*   必须订购结果吗？

我假设，使用`std::list`，您可以廉价地插入头部或尾部。

假设列表 1 有 N 个元素，而列表 2 有 M 个元素。

* * *

## 算法 1

它遍历列表 1 的每个项目，在列表 2 中搜索它。

假设可能存在重复并且必须对结果进行排序，则搜索的最坏情况是列表 1 中的元素不存在于列表 2 中，因此至少是：

*   O(N × M)。

要将 List 1 的项插入到正确的位置，您需要再次迭代 List 2 直到插入点。更糟糕的情况是 List 1 中的每个项目都更小（如果从头搜索 List 2）或更大（如果从尾搜索 List 2）。由于列表 1 的先前项已插入到列表 2 中，因此第一项将进行 M 次迭代，第二项将进行 M + 1 次，第三项将进行 M + 2 次等，最后一项将进行 M + N - 1 次迭代项目，平均每个项目 M + (N - 1) / 2。

就像是：

*   N × (M + (N - 1) / 2)

对于大 O 表示法，常数因子无关紧要，所以：

*   N × (M + (N - 1))

对于大 O 表示法，非变量加法无关紧要，所以：

*   O(N × (M + N))

添加到原始 O(N × M)：

*   O(N × M) + O(N × (M + N))
*   O(N × M) + O(N × M + N ² )

第二个方程只是为了使常数因子消除明显，例如2×（N×M），因此：

*   O(N × (M + N))
*   O(N ² + N × M)

这两个是等价的，你最喜欢哪个。

可能的优化：

*   如果不需要对结果进行排序，则插入可以是 O(1)，因此更糟糕的情况是：

    *   O(N × M)

*   不要只用相等来测试List 2中的每一个List 1项，而是用eg大于来测试每一项，这样当List 1的item大于List 2的item时，你就可以停止在List 2中的搜索；这不会减少最坏的情况，但会减少平均情况
*   保持 List 2 迭代器指向 List 1 的项被发现大于 List 2 的项的位置，以进行排序插入 O(1)；在插入时确保保留一个从插入项开始的迭代器，因为虽然 List 1 是有序的，但它可能包含重复项；有了这两个，更糟糕的情况变成：

    *   O(N × M)

*   对于下一次迭代，使用我们保留的迭代器在列表 2 的其余部分中搜索列表 1 的项目；这减少了最坏的情况，因为如果您到达列表 2 的末尾，您将只是从列表 1 中“删除”重复项；有了这三个，更糟糕的情况变成：

    *   O(N + M)

至此，该算法与算法 2 之间的唯一区别是列表 2 被更改为包含结果，而不是创建一个新列表。

* * *

## 算法 2

这就是归并排序的归并。

您将遍历 List 1 的每个元素和 List 2 的每个元素一次，并且插入总是在列表的头部或尾部进行，因此最坏的情况是：

*   O(N + M)

如果有重复，它们就会被丢弃。结果比没有更容易订购。

* * *

## 最后的笔记

如果没有重复，则可以在两种情况下优化插入。例如，使用双向链表，我们可以轻松地检查 List 1 中的最后一个元素是否大于 List 2 中的第一个元素，反之亦然，然后简单地连接列表。

这可以进一步推广到 List 1 和 List 2 的任何尾部。例如，在算法 1 中，如果在 List 2 中找不到 List 1 的项目，我们可以将 List 2 和 List 1 的尾部连接起来。在算法 2 中，这是在最后一步完成的。

更糟糕的情况是，当列表 1 的项目和列表 2 的项目交错时，并没有减少，但平均情况再次减少，并且在许多情况下，减少了在 Real Life™ 中产生重大影响的一个重要因素。

我忽略了：

*   分配时间
*   算法中更糟糕的空间差异
*   二进制搜索，因为您提到**了列表**，而不是数组或树

我希望我没有犯任何明显的错误。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-01-02T15:12:58.627

在我之前的一个项目中，我已经实现了基于 typescript(js) 的 2 个对象数组的联合操作的实现。数据太大，下划线或 lodash 等默认库函数并不乐观。经过一番脑筋急转弯，我想出了以下基于二进制搜索的算法。希望它可以帮助某人进行性能调整。

就复杂性而言，该算法是基于二进制搜索的，最终将是 O(log(N))。

基本上，代码需要两个无序对象数组和一个键名进行比较，并且：1）对数组进行排序 2）遍历第一个数组的每个元素并将其删除到第二个数组中 3）将生成的第二个数组连接到第一个数组中。

```
 private sortArrays = (arr1: Array<Object>, arr2: Array<Object>, propertyName: string): void => {
        function comparer(a, b) {
            if (a[propertyName] < b[propertyName])
                return -1;
            if (a[propertyName] > b[propertyName])
                return 1;
            return 0;
        }

        arr1.sort(comparer);
        arr2.sort(comparer);
    }

    private difference = (arr1: Array<Object>, arr2: Array<Object>, propertyName: string): Array<Object> => {

        this.sortArrays(arr1, arr2, propertyName);

        var self = this;

        for (var i = 0; i < arr1.length; i++) {
            var obj = {
                loc: 0
            };
            if (this.OptimisedBinarySearch(arr2, arr2.length, obj, arr1[i], propertyName))
                arr2.splice(obj.loc, 1);
        }

        return arr2;
    }

    private OptimisedBinarySearch = (arr, size, obj, val, propertyName): boolean => {
        var first, mid, last;
        var count;

        first = 0;
        last = size - 1;
        count = 0;

        if (!arr.length)
            return false;
        while (arr[first][propertyName] <= val[propertyName] && val[propertyName] <= arr[last][propertyName]) {
            mid = first + Math.floor((last - first) / 2);

            if (val[propertyName] == arr[mid][propertyName]) {
                obj.loc = mid;
                return true;
            }
            else if (val[propertyName] < arr[mid][propertyName])
                last = mid - 1;
            else
                first = mid + 1;
        }
        return false;
    }

    private UnionAll = (arr1, arr2, propertyName): Array<Object> => {
        return arr1.concat(this.difference(arr1, arr2, propertyName));
    } 

    //example
    var YourFirstArray = [{x:1},{x:2},{x:3}]
    var YourSecondArray= [{x:0},{x:1},{x:2},{x:3},{x:4},{x:5}]
    var keyName = "x";
    this.UnionAll(YourFirstArray, YourSecondArray, keyName) 
```

# spring - 使用 Spring Security 进行 DB 和 LDAP 身份验证

> ID：15470758
> 
> 赞同：3
> 
> 时间：2013-03-18T06:16:16.927
> 
> 标签：spring, spring-security, spring-ldap

我正在开发一个使用 Spring Security 的项目，它可以很好地从 DB 中对用户进行身份验证。

现在我的需要是我想使用 LDAP 对用户进行身份验证并保留现有的数据库身份验证。

此外，我不能通过使用 Spring 安全性来使用标准 LDAP 身份验证方式，因为我只有一个函数调用来验证用户是否存在，例如，

```
 com.company.ldap.Authentication  auth = new com.company.ldap.Authentication();
        int status = auth.authenticate(userName, userPassword); 
```

如果我收到状态为 1 则用户已通过身份验证，否则不会。

因此，对于这种情况，我创建了单独的 url "/j_spring_facebook_security_check"（这里的名称是 facebook，但实际上是用于 LDAP）

我的 applicationContext-Security 文件

```
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:security="http://www.springframework.org/schema/security"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/security
    http://www.springframework.org/schema/security/spring-security-3.0.xsd">

    <security:http auto-config="true" use-expressions="true" access-denied-page="/accessDenied.jsp">

        <security:form-login login-page="/index.jsp"
            default-target-url="/jsp/home.jsp"
            authentication-failure-handler-ref="authenticationFailureHandler" />

        <security:intercept-url pattern="/jsp/listInBetweenPlaces.jsp"
            access="permitAll" />

        <security:intercept-url pattern="/jsp/home.jsp"
            access="permitAll" />

        <security:intercept-url pattern="/jsp/*"
            access="isAuthenticated()" />

        <security:logout logout-url="/j_spring_security_logout" logout-success-url="/index.jsp?logout=success" 
            invalidate-session="true"  />

    <security:custom-filter before="FORM_LOGIN_FILTER"
            ref="facebookAuthenticationFilter" />

    </security:http> 

    <bean id="facebookAuthenticationFilter" class="org.springframework.security.facebook.FacebookAuthenticationFilter">
      <property name="authenticationManager" ref="authenticationManager"/>

       <property  name = "authenticationSuccessHandler">
         <bean  class = "org.springframework.security.web.authentication.SimpleUrlAuthenticationSuccessHandler">
           <property  name = "defaultTargetUrl"  value = "/jsp/home.jsp"  />
           <property  name = "alwaysUseDefaultTargetUrl"  value = "true"  />
         </bean>
       </property>

       <property  name = "authenticationFailureHandler">
        <bean  class = "org.springframework.security.web.authentication.SimpleUrlAuthenticationFailureHandler">
            <property  name = "defaultFailureUrl"  value = "/fb/failure.jsp"  />
        </bean>
       </property>

    </bean>

    <bean id="ldapAuthenticationProvider"  class="org.springframework.security.facebook.FacebookAuthenticationProvider">
        <property name="roles" value="ROLE_FACEBOOK_USER" />
    </bean>

    <security:authentication-manager alias="authenticationManager">  

        <security:authentication-provider user-service-ref="customUserDetailsService">
            <security:password-encoder hash="md5" />
        </security:authentication-provider>

        <security:authentication-provider ref="ldapAuthenticationProvider">
        </security:authentication-provider>

    </security:authentication-manager>

    <bean id="customUserDetailsService" class="com.abc.carpool.authentication.CustomUserDetailsService">
    </bean>

</beans> 
```

FacebookAuthenticationFilter.java

```
public class FacebookAuthenticationFilter extends AbstractAuthenticationProcessingFilter implements ApplicationContextAware {

    @Autowired
    CarpoolService carpoolService=null;

    public CarpoolService getCarpoolService() {
        return carpoolService;
    }
    public void setCarpoolService(CarpoolService carpoolService) {
        this.carpoolService = carpoolService;
    }

    public static final String DEFAULT_FILTER_PROCESS_URL = "/j_spring_facebook_security_check";

    private ApplicationContext ctx;
    protected FacebookAuthenticationFilter() {
        super(DEFAULT_FILTER_PROCESS_URL);
    }

    public Authentication attemptAuthentication(HttpServletRequest req,
            HttpServletResponse res) throws AuthenticationException,
            IOException, ServletException {

        HttpServletRequest request = (HttpServletRequest) req;

        String userName = request.getParameter("j_username");
        String userPassword = request.getParameter("j_password");

        System.out.println("Username and pswd is :"+userName + " " + userPassword);
        System.out.println("SYS PATH :"+System.getenv("MC_ENV_PATH"));

        User user = null;

        try{
            com.abc.ldap.Authentication  auth = new com.abc.ldap.Authentication();

            int status = auth.authenticate(userName, userPassword);

            //int status=2;
            if(status==1){

//CREATE NEW USER AND SAVE IN DB                    

                }

            }else{
                throw new UsernameNotFoundException("Incorrect Email Id or Password.");
            }

            System.out.println("status is :"+status);
        }catch (Exception e) {
            System.out.println("Exception is "+e.getMessage());
            e.printStackTrace();
            return null;
        }

        System.out.println("FacebookAuthenticationFilter.attemptAuthentication() :"+userName + " " + userPassword);     

        UsernamePasswordAuthenticationToken upatToken = new UsernamePasswordAuthenticationToken(userName, userPassword);
        AuthenticationManager authenticationManager = getAuthenticationManager();
        Authentication auth = authenticationManager.authenticate(upatToken);

        return auth;
    }

    public void setApplicationContext(ApplicationContext ctx)
            throws BeansException {
        this.ctx = ctx;
    }

} 
```

FacebookAuthenticationProvider .java

```
public class FacebookAuthenticationProvider implements AuthenticationProvider {

    private String[] roles;

    public Authentication authenticate(Authentication authentication)
            throws AuthenticationException {

        System.out.println("FacebookAuthenticationProvider.authenticate()");

        return authentication;
    }

    public boolean supports(Class<? extends Object> authentication) {
        boolean supports = true;
        return supports;
    }

    public void setRoles(String[] roles) {
        this.roles = roles;
    }

    public String[] getRoles() {
        return roles;
    }
} 
```

在上述情况下一切正常，控制将进入过滤器类并使用 LDAP 验证用户，如果用户存在，那么我将用户一份副本保存到我的数据库并希望继续正常流程。

实际上当我打电话时

```
Authentication auth = authenticationManager.authenticate(upatToken); 
```

从 FacebookAuthenticationFilter 控制，转到 CustomUserDetailsS​​ervice 类。

我需要的是 CustomUserDetailsS​​ervice 仅用于数据库身份验证，我不想控制去那里。

如何以一种好的方式实现这件事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T09:45:37.973

`AuthenticationProvider.supports(Class<? extends Object> authentication)`能帮你。此时您可以使用`UsernamePasswordAuthenticationToken`这两种情况（DB 和 LDAP）。两个身份验证提供程序都支持这种类型，因此两者都被使用。在 LDAP 的情况下，尝试添加您的自定义身份验证对象：

```
public class CustomLdapAuthenticationToken extends AbstractAuthenticationToken { 
```

然后在你的`FacebookAuthenticationFilter`而不是`UsernamePasswordAuthenticationToken`.

改变你的`FacebookAuthenticationProvider.supports(...)`实现：

```
public boolean supports(Class<? extends Object> authentication) {
    boolean result = false;
    if(authentication instanceof CustomLdapAuthenticationToken) {
        result = true;
    }
    return result;
} 
```

从此时起，每个身份验证提供者将只处理相应的身份验证请求。

# php - 从表中选择逗号分隔的记录

> ID：15470760
> 
> 赞同：1
> 
> 时间：2013-03-18T06:16:19.860
> 
> 标签：php, mysql, sql, join, select-query

表： **frei_session**

```
id  username        accountId   status  status_mesg

14  Sumit Bijvani   50          0       I am available
16  Dilip Borad     49          1       I am available
15  Karan Bijvani   51          1       I am available 
```

表： **用户**

```
accountId    friends

49           50,52
50           49,52,51,44
51           50 
```

我有 2 个表，**frei_session**有在线用户的记录，而**users**表有用户和他们的朋友的数据，用逗号分隔 ID。

我想根据 users 表的 friends 列从**frei_session****表**中**检索**数据。

 ******对于前**

如果`user 49`在线，我想要如下所示的**输出**

```
id  username        accountId   status  status_mesg

14  Sumit Bijvani   50          0       I am available 
```

因为用户 50 和 52 是用户 49 的朋友，但现在只有用户 50 在线

我曾尝试在单个表上进行以下查询，但不知道如何处理 2 个表

```
SELECT DISTINCT status_mesg,username,session_id,status,guest
    FROM frei_session
    WHERE accountId!=49
    AND guest=0
    AND status!=2
    AND status!=0 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T06:18:54.953

您的表没有标准化，被认为是糟糕的架构设计。无论如何，要直接回答您的问题，`MySQL`有一个名为的内置函数`FIND_IN_SET`可以搜索 CSV 格式的特定值。

```
SELECT  b.*
FROM    users a
        INNER JOIN frei_session b
            ON FIND_IN_SET(b.accountID, a.friends) > 0
WHERE   b.status = 0 AND
        a.accountID = 49 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/5807d/4)****

# c - 搜索 lzw 编码文件

> ID：15470762
> 
> 赞同：0
> 
> 时间：2013-03-18T06:16:25.317
> 
> 标签：c, search, compression

我希望更改 LZW 压缩器，使其能够在 LZW 编码文件中搜索单词并找到该搜索词的匹配数。例如，如果我的文件用作

```
Prompt:>lzw "searchterm" encoded_file.lzw
32 
```

关于如何实现这一目标的任何建议？

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

#define BITS 12                   /* Setting the number of bits to 12, 13*/
#define HASHING_SHIFT (BITS-8)    /* or 14 affects several constants.    */
#define MAX_VALUE (1 << BITS) - 1 /* Note that MS-DOS machines need to   */
#define MAX_CODE MAX_VALUE - 1    /* compile their code in large model if*/
                                  /* 14 bits are selected.               */
#if BITS == 16
  #define TABLE_SIZE 99991
#endif
#if BITS == 14
  #define TABLE_SIZE 18041        /* The string table size needs to be a */
#endif                            /* prime number that is somewhat larger*/
#if BITS == 13                    /* than 2**BITS.                       */
  #define TABLE_SIZE 9029
#endif
#if BITS <= 12
  #define TABLE_SIZE 5021
#endif

void *malloc();

int *code_value;                  /* This is the code value array        */
unsigned int *prefix_code;        /* This array holds the prefix codes   */
unsigned char *append_character;  /* This array holds the appended chars */
unsigned char decode_stack[4000]; /* This array holds the decoded string */

/*
 * Forward declarations
 */
void compress(FILE *input,FILE *output);
void expand(FILE *input,FILE *output);
int find_match(int hash_prefix,unsigned int hash_character);
void output_code(FILE *output,unsigned int code);
unsigned int input_code(FILE *input);
unsigned char *decode_string(unsigned char *buffer,unsigned int code);

/********************************************************************
**
** This program gets a file name from the command line.  It compresses the
** file, placing its output in a file named test.lzw.  It then expands
** test.lzw into test.out.  Test.out should then be an exact duplicate of
** the input file.
**
*************************************************************************/

main(int argc, char *argv[])
{
FILE *input_file;
FILE *output_file;
FILE *lzw_file;
char input_file_name[81];
char command;

command=(argv==3);

/*
**  The three buffers are needed for the compression phase.
*/
  code_value=(int*)malloc(TABLE_SIZE*sizeof(int));
  prefix_code=(unsigned int *)malloc(TABLE_SIZE*sizeof(unsigned int));
  append_character=(unsigned char *)malloc(TABLE_SIZE*sizeof(unsigned char));
  if (code_value==NULL || prefix_code==NULL || append_character==NULL)
  {
    printf("Fatal error allocating table space!\n");
    exit(-1);
  }
/*
** Get the file name, open it up, and open up the lzw output file.
*/
  if (argc>1)
    strcpy(input_file_name,argv[1]);
  else
  {
    printf("Input file name? ");
    scanf("%s",input_file_name);
  }
  input_file=fopen(input_file_name,"rb");
  lzw_file=fopen("test.lzw","wb");
  if (input_file==NULL || lzw_file==NULL)
  {
    printf("Fatal error opening files.\n");
    exit(-1);
  };
/*
** Compress the file.
*/
if(command=='r')
{
  compress(input_file,lzw_file);
}
  fclose(input_file);
  fclose(lzw_file);
  free(c-ode_value);
/*
** Now open the files for the expansion.
*/
  lzw_file=fopen("test.lzw","rb");
  output_file=fopen("test.out","wb");
  if (lzw_file==NULL || output_file==NULL)
  {
    printf("Fatal error opening files.\n");
    exit(-2);
  };
/*
** Expand the file.
*/
  expand(lzw_file,output_file);
  fclose(lzw_file);
  fclose(output_file);

  free(prefix_code);
  free(append_character);
}

/*
** This is the compression routine.  The code should be a fairly close
** match to the algorithm accompanying the article.
**
*/

void compress(FILE *input,FILE *output)
{
unsigned int next_code;
unsigned int character;
unsigned int string_code;
unsigned int index;
int i;

  next_code=256;              /* Next code is the next available string code*/
  for (i=0;i<TABLE_SIZE;i++)  /* Clear out the string table before starting */
    code_value[i]=-1;

  i=0;
  printf("Compressing...\n");
  string_code=getc(input);    /* Get the first code                         */
/*
** This is the main loop where it all happens.  This loop runs util all of
** the input has been exhausted.  Note that it stops adding codes to the
** table after all of the possible codes have been defined.
*/
  while ((character=getc(input)) != (unsigned)EOF)
  {
    if (++i==1000)                         /* Print a * every 1000    */
    {                                      /* input characters.  This */
      i=0;                                 /* is just a pacifier.     */
      printf("*");
    }
    index=find_match(string_code,character);/* See if the string is in */
    if (code_value[index] != -1)            /* the table.  If it is,   */
      string_code=code_value[index];        /* get the code value.  If */
    else                                    /* the string is not in the*/
    {                                       /* table, try to add it.   */
      if (next_code <= MAX_CODE)
      {
        code_value[index]=next_code++;
        prefix_code[index]=string_code;
        append_character[index]=character;
      }
      output_code(output,string_code);  /* When a string is found  */
      string_code=character;            /* that is not in the table*/
    }                                   /* I output the last string*/
  }                                     /* after adding the new one*/
/*
** End of the main loop.
*/
  output_code(output,string_code); /* Output the last code               */
  output_code(output,MAX_VALUE);   /* Output the end of buffer code      */
  output_code(output,0);           /* This code flushes the output buffer*/
  printf("\n");
}

/*
** This is the hashing routine.  It tries to find a match for the prefix+char
** string in the string table.  If it finds it, the index is returned.  If
** the string is not found, the first available index in the string table is
** returned instead.
*/

int find_match(int hash_prefix,unsigned int hash_character)
{
int index;
int offset;

  index = (hash_character << HASHING_SHIFT) ^ hash_prefix;
  if (index == 0)
    offset = 1;
  else
    offset = TABLE_SIZE - index;
  while (1)
  {
    if (code_value[index] == -1)
      return(index);
    if (prefix_code[index] == hash_prefix && 
        append_character[index] == hash_character)
      return(index);
    index -= offset;
    if (index < 0)
      index += TABLE_SIZE;
  }
}

/*
**  This is the expansion routine.  It takes an LZW format file, and expands
**  it to an output file.  The code here should be a fairly close match to
**  the algorithm in the accompanying article.
*/

void expand(FILE *input,FILE *output)
{
unsigned int next_code;
unsigned int new_code;
unsigned int old_code;
int character;
int counter;
unsigned char *string;

  next_code=256;           /* This is the next available code to define */
  counter=0;               /* Counter is used as a pacifier.            */
  printf("Expanding...\n");

  old_code=input_code(input);  /* Read in the first code, initialize the */
  character=old_code;          /* character variable, and send the first */
  putc(old_code,output);       /* code to the output file                */
/*
**  This is the main expansion loop.  It reads in characters from the LZW file
**  until it sees the special code used to inidicate the end of the data.
*/
  while ((new_code=input_code(input)) != (MAX_VALUE))
  {
    if (++counter==1000)   /* This section of code prints out     */
    {                      /* an asterisk every 1000 characters   */
      counter=0;           /* It is just a pacifier.              */
      printf("*");
    }
/*
** This code checks for the special STRING+CHARACTER+STRING+CHARACTER+STRING
** case which generates an undefined code.  It handles it by decoding
** the last code, and adding a single character to the end of the decode string.
*/
    if (new_code>=next_code)
    {
      *decode_stack=character;
      string=decode_string(decode_stack+1,old_code);
    }
/*
** Otherwise we do a straight decode of the new code.
*/
    else
      string=decode_string(decode_stack,new_code);
/*
** Now we output the decoded string in reverse order.
*/
    character=*string;
    while (string >= decode_stack)
      putc(*string--,output);
/*
** Finally, if possible, add a new code to the string table.
*/
    if (next_code <= MAX_CODE)
    {
      prefix_code[next_code]=old_code;
      append_character[next_code]=character;
      next_code++;
    }
    old_code=new_code;
  }
  printf("\n");
}

/*
** This routine simply decodes a string from the string table, storing
** it in a buffer.  The buffer can then be output in reverse order by
** the expansion program.
*/

unsigned char *decode_string(unsigned char *buffer,unsigned int code)
{
int i;

  i=0;
  while (code > 255)
  {
    *buffer++ = append_character[code];
    code=prefix_code[code];
    if (i++>=MAX_CODE)
    {
      printf("Fatal error during code expansion.\n");
      exit(-3);
    }
  }
  *buffer=code;
  return(buffer);
}

/*
** The following two routines are used to output variable length
** codes.  They are written strictly for clarity, and are not
** particularyl efficient.
*/

unsigned int input_code(FILE *input)
{
unsigned int return_value;
static int input_bit_count=0;
static unsigned long input_bit_buffer=0L;

  while (input_bit_count <= 24)
  {
    input_bit_buffer |= 
        (unsigned long) getc(input) << (24-input_bit_count);
    input_bit_count += 8;
  }
  return_value=input_bit_buffer >> (32-BITS);
  input_bit_buffer <<= BITS;
  input_bit_count -= BITS;
  return(return_value);
}

void output_code(FILE *output,unsigned int code)
{
static int output_bit_count=0;
static unsigned long output_bit_buffer=0L;

  output_bit_buffer |= (unsigned long) code << (32-BITS-output_bit_count);
  output_bit_count += BITS;
  while (output_bit_count >= 8)
  {
    putc(output_bit_buffer >> 24,output);
    output_bit_buffer <<= 8;
    output_bit_count -= 8;
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-20T09:07:34.243

这是一个关于直接在 LZW 压缩字节中进行正则表达式搜索的算法的文档：

[http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.9.1434&rep=rep1&type=pdf](http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.9.1434&rep=rep1&type=pdf)

它还包含对搜索精确字符串的有效算法的引用。

# java - 带有 ViewFlipper 和一个网站的 WebView

> ID：15470766
> 
> 赞同：0
> 
> 时间：2013-03-18T06:16:37.660
> 
> 标签：java, android, html, webview, viewflipper

我的服务器上有一些使用`WebView`. html 文件很长，这意味着它们有很多文本（例如，一个是美国宪法的副本）。而不是让用户简单地向下滚动`WebView`以显示文件的其余部分，`HTML`我想知道是否有某种方法可以`ViewFlipper`用来“翻转”到`HTML`文件文本的下一部分。基本上我的意思不是滚动，而是“翻转”`WebView`内容以查看其余部分。我不确定这是否可能，如果我的问题不清楚我想要做什么，我深表歉意。我感谢任何帮助或采取的方法或关于如何做到这一点的想法。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T06:38:43.830

我认为这只有在响应式网站的情况下才有可能。

其他网站无法滚动，因为最小桌面分辨率屏幕为 1024 * 768。而对于移动设备，它低至 240 * 320，最高可达 5 英寸，平板电脑最高可达 10 英寸。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T06:45:02.040

我正在使用这两个库。两者都是免费和开源的。

[转机](http://www.turnjs.com)

[小册子](http://builtbywill.com/code/booklet/)

# date - Go 编程语言如何处理日期和时间？

> ID：15470768
> 
> 赞同：4
> 
> 时间：2013-03-18T06:16:43.557
> 
> 标签：date, datetime, time, go

日期和时间的整个概念非常不稳定并且不断更新，因此从一开始它就是一项非常困难的任务。从闰年到闰秒，有很多变量需要考虑。

John Skeet 的图书馆看起来不错，但他花了 3 年的时间才做到这一点，而且还远非完美。

有人可以告诉我 Go 编程语言与其他语言/库相比如何处理 DateTime 的不同或相似之处吗？这纯粹是出于好奇。

这个问题更多地是关于当前可用库之间的异同——最好是英文的，而不是文档的页面和页面。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-18T06:27:48.543

请参阅 Go[时间包](http://golang.org/pkg/time/)文档和源代码。A`Time`表示具有纳秒精度的时间瞬间，没有闰秒。[IANA 时区数据库](http://www.iana.org/time-zones)用于时区和夏令时。时区数据库包含代表全球许多代表性位置的本地时间历史的代码和数据。它会定期更新，以反映政治机构对时区边界、UTC 偏移量和夏令时规则所做的更改。

```
type Time struct {
    // sec gives the number of seconds elapsed since
    // January 1, year 1 00:00:00 UTC.
    sec int64

    // nsec specifies a non-negative nanosecond
    // offset within the second named by Seconds.
    // It must be in the range [0, 999999999].
    nsec int32

    // loc specifies the Location that should be used to
    // determine the minute, hour, month, day, and year
    // that correspond to this Time.
    // Only the zero Time has a nil Location.
    // In that case it is interpreted to mean UTC.
    loc *Location
} 
```

# javascript - 带有 Javascript 映射的 Json 结构

> ID：15470772
> 
> 赞同：0
> 
> 时间：2013-03-18T06:17:03.697
> 
> 标签：javascript, html, json, editor

是否有任何工具或在线编辑器可用，以便它指定如何访问 json 元素。例如，如果我提供 json 作为输入，那么我们应该得到一个输出，它将指定每个项目我们如何通过 javascript 访问

例子

**假设输入是**

```
 var myList={ "vehicleList": { "Vehicle": [ { "vehicleId": 88, "vehicleName": "veh1", "totalEvents": 10, "medium": 2, "Severe": 2, "Category": [ { "AlertId": 1001, "AlertName": "Overspeed", "Alertcount": 10 }, { "AlertId": 1002, "AlertName": "Sudden acceleration", "Alertcount": 40 } ] }, { "vehicleId": 87, "vehicleName": "veh2", "totalEvents": 11, "medium": 4, "Severe": 7, "Category": [ { "AlertId": 1003, "AlertName": "Overspeed", "Alertcount": 30}, { "AlertId": 1004, "AlertName": "Drunk", "Alertcount": 10 } ] }, { "vehicleId": 87, "vehicleName": "veh3", "totalEvents": 10, "medium": 2, "Severe": 2, "Category": [ { "AlertId": 1007, "AlertName": "Overspeed", "Alertcount": 10 }, { "AlertId": 1008, "AlertName": "Overspeed", "Alertcount": 77 } ] }, { "vehicleId": 86, "vehicleName": "veh4", "totalEvents": 11, "medium": 4, "Severe": 5, "Category": [ { "AlertId": 1009, "AlertName": "Overspeed", "Alertcount": 17 }, { "AlertId": 1010, "AlertName": "HighSpeed", "Alertcount": 10 } ] } ] } }; 
```

**输出应该是**一个结构，它将指定如下

```
 myList.vehicleList.Vehicle[3].Severe; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T06:28:28.600

看起来你向后看意味着提供你需要的值什么将是表达式来获取值。我对此没有解决方案。

但我想建议 json 很容易阅读，可能是由于字符串太长而导致您遇到麻烦。试试这个网站（编辑器） [http://jsonlint.com/](http://jsonlint.com/)这将验证您的 json 并以更易读的形式为您提供。希望这会以一种或其他方式帮助您。

# android - 如何在我的应用程序中使用帐户注册？

> ID：15470775
> 
> 赞同：-1
> 
> 时间：2013-03-18T06:17:31.833
> 
> 标签：android, eclipse

我正在制作一个安卓应用游戏，我想让我的玩家注册一个用户名和密码，这样他们就可以拥有自己的帐户并通过他们的用户名搜索玩家并发送播放请求，例如 Draw Something 和 Songpop，我的问题是，

我该怎么做？

这不是代码问题，而是更多关于您是否可以提供有关此主题的视频或书面指南的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T06:31:34.873

你可以去看看[这个](https://github.com/andreipop/Android-Login-App)登录示例应用程序

通读[this](http://www.stanford.edu/class/ee368/Android/Tutorial-3-Server-Client-Communication-for-Android.pdf)和[this](http://osamashabrez.com/simple-client-server-communication-in-android/)以进行服务器通信

在服务器端，您可以使用谷歌服务器或设置您自己的服务器。您可以使用 PHP Java 或您喜欢的任何语言构建它。

# javascript - 这个语句“Object.prototype”有什么作用？

> ID：15470777
> 
> 赞同：4
> 
> 时间：2013-03-18T06:17:46.147
> 
> 标签：javascript, dom, safari, indexof

```
var isSafari = Object.prototype.toString.call(window.HTMLElement).indexOf('Constructor') > 0; 
```

谁能告诉我上面的代码在做什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T06:56:58.280

让我们分解一下：

```
Object.prototype 
```

这为我们提供了作为`Object`变量原型的 JavaScript 对象。什么是原型？请允许我引用 Yehuda Katz 的优秀[博文](http://yehudakatz.com/2011/08/12/understanding-prototypes-in-javascript/)（非常值得一读）：

> 如果您尝试查找对象上的键但未找到，JavaScript 将在原型中查找它。它将遵循“原型链”，直到它看到一个空值。在这种情况下，它返回未定义。

接下来，我们有：

```
Object.prototype.toString 
```

这将返回原型`toString`上的函数。`Object`可以使用它们的函数调用 JavaScript`call`函数。这里有几个例子：

```
Object.prototype.toString.call("foo")  # => "[object String]"
Object.prototype.toString.call(5)      # => "[object Number]" 
```

所以它基本上只是一个通用的 toString 函数，它返回一个字符串，描述你作为参数提供的任何内容`call`。请注意，在这些示例中，参数是对象本身，因此它们返回将自身描述为对象的字符串。如果我们通过了`window.HTMLElement`呢？

```
Object.prototype.toString.call(window.HTMLElement)  # => "[object HTMLElementConstructor]" 
```

所以现在我们看到它返回了一个包含 substring 的字符串`"Constructor"`，这意味着它很可能是一个构造 HTML 元素的对象。最后我们可以理解完整的表达方式：

```
Object.prototype.toString.call(window.HTMLElement).indexOf('Constructor')  # => 19 
```

因为`"Constructor"`是一个子字符串，`indexOf`所以返回 19，即 > 0。所以基本上，这个表达式似乎是检查是否`window.HTMLElement`使用后缀“构造函数”来识别自己，我猜这可能是某种浏览器识别检查。

（注意：在写这篇文章时，我测试了使用 Safari 的 Web Inspector 控制台评估这些表达式，但你也可以使用 Chrome 或其他浏览器的控制台来测试这样的东西。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T07:07:49.463

*   `Object`是 javascript 中（几乎）所有类型都继承的类（构造函数）。
*   `Object.prototype`是几乎所有对象的原型链中都能找到的对象。
*   `Object.prototype.toString`是在不覆盖它的对象上调用的方法。
*   `.call`，当在函数上调用时，以第一个参数作为上下文调用该函数。`func.call(a)`类似于`a.func=func; a.func()`。不同之处在于 while `undefined.toString()`is a `TypeError`,`Object.prototype.toString.call(undefined)`工作得很好。
*   `HTMLElement`是一个继承自 HTML 元素的类。但是，这不是规范要求的，并且在 Internet Explorer 中并非如此，其中 HTML 元素没有原型并且`HTMLElement`那里不存在构造函数。既然`window`是浏览器环境中的全局对象，就和没有被局部变量遮蔽`window.HTMLElement`一样，`HTMLElement` *如果存在的**话*。如果它不存在，读取`HTMLElement`会抛出一段`ReferenceError`时间`window.HTMLElement`返回`undefined`。
*   所以，`Object.prototype.toString.call(window.HTMLElement)`除了`HTMLElement.toString()` *它*在 IE 中工作并使用正确的`toString`. 它总是返回一个`String`.
*   `indexOf`是一个 String 函数，它查找其子字符串的第一次出现，`-1`如果子字符串不存在则返回。`.indexOf('Constructor') > 0`检查字符串是否包含，并且不以 . 开头`"Constructor"`。

因此，此方法在调用 on 时确定是否`toString`包含。[该规范要求](http://es5.github.com/#x15.2.4.2)：`"Constructor"``HTMLElement`

> ...
> 4) 令 class 为 O 的 [[Class]] 内部属性的值。
> 5) 返回作为连接三个字符串“[object”、class 和“]”的结果的字符串值。

因此，这会检查`HTMLElement`'s`[[class]]`是否为`Constructor`。

最后将检查结果分配给变量`isSafari`。这表明在哪些环境中这是正确的。这段代码的作者假设返回值包含`"Constructor"`在 Safari 中，在每个版本的 Safari 中，并且仅在 Safari 中。

作为参考，在 Chrome 中，`Object.prototype.toString.call(HTMLElement)`返回`"[object Function]"`.

# java - Hadoop和不同格式的输入，如图像、音频、视频

> ID：15470778
> 
> 赞同：5
> 
> 时间：2013-03-18T06:17:48.977
> 
> 标签：java, linux, image, hadoop, mapreduce

我正在学习 Hadoop 和 MapReduce 框架。到目前为止，我一直在玩文本文件并利用 MapReduce 框架处理它们。

当我开始学习 MapReduce 时，我发现第一个流行的例子是 WORDCOUNT，它是一个文本文件处理场景。然后我编写了自己的逻辑来处理一些文本文件并显示结果。在那种情况下我是成功的。

但我需要转向不同的输入格式。因为在现实世界中，我们不会只处理文本文件。我需要探索使用 MapReduce 框架对图像、音频、视频等不同格式的处理。但我正在努力寻找适合我的目的的例子。我需要一些关于 MapReduce 的示例和教程，其中包含从文本到视频的不同输入格式。

**编辑：**

我的意思是处理图像、视频和音频。不仅是文本文件。

**编辑2：**

一个例子：假设我有一个 10 年的 .bmp 图像（不涉及压缩和解压缩），其大小为 450GB。我需要分析文件夹中的每一个图像，我应该显示相似的图像（通过比较像素的相似性模式）。我应该列出在“从”“到”日期之间创建/修改的图像。假设在 2013 年 1 月至 2013 年 2 月期间在该组图像中创建/修改的图像。我怎样才能做到这一点？

如果有人帮助我走上正确的道路，我会很高兴！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T06:24:24.807

设置映射器和缩减器时，可以指定输入/输出键和值数据类型。这是您可以按照我认为您想要的方式处理不同数据类型的地方。

这是一个使用 int 数据类型计算平均值的示例（尽管格式不正确）：

[http://souravgulati.webs.com/apps/forums/topics/show/8539120-hadoop-map-reduce-example-calculate-mean-in-map-reduce](http://souravgulati.webs.com/apps/forums/topics/show/8539120-hadoop-map-reduce-example-calculate-mean-in-map-reduce)

**编辑**

在处理这些类型的文件时，再举一个例子来说明您正在尝试完成什么。例如，如果您使用音频：您使用的是 .wav 文件吗？很高兴知道您可以使用字节数据类型进行处理。否则，如果您使用的是 .mp3 文件，则需要处理压缩。

与图像相同，我认为 .bmp 文件没有被压缩，并且可以直接在 map reduce 中使用 int 或 byte 数据类型进行操作。使用任何类型压缩的文件很可能需要在运行作业之前进行某种预处理。

大多数教程都处理字数或类似的简单问题。最好有一个具体的问题要解决，以获得更好的建议。

soooo 你想用你的 mapreduce 工作做什么？计算图像中的像素数？压印图像？计算音频文件的平均音量？

**编辑**

您所描述的是 2 个不同的映射任务（除非您只想对终止日期之间的所有图像执行分析）。

您可以尝试做的事情（这是没有任何代码的高级描述）如下（这是我的想法，因为我没有以这种方式使用 mapreduce）：

因为您的 mapred 作业需要一次比较两个图像文件，所以您需要运行文件数 facotrial map reduce 作业以获得所有可能的文件比较。这可能需要一段时间！

您需要您的映射器一次输入两个文件并执行比较 mapreduce 作业。您可以根据需要多次运行此作业来处理源图像文件的所有组合。你可以用 [oozie][1] 之类的东西来协调这些工作

现在您可能会问 - 如何在 mapreduce 中比较两个图像文件？同样，我还没有这样做，但这可能会为您指明正确的方向 - 查看具有多个文件源的 mapreduce 作业： [Hadoop mapper reading from 2 different source input files](https://stackoverflow.com/questions/11495193/hadoop-mapper-reading-from-2-different-source-input-files)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T14:55:16.213

[HIPI](http://hipi.cs.virginia.edu/)是一个使用 MapReduce 对图像文件进行图像处理的框架。

[这](http://www-di.inf.puc-rio.br/~endler/paperlinks/CLOUD-2010.pdf)是一篇关于云中高性能视频处理的论文。它不完全是 MapReduce，但与 MapReduce 非常相似。

请注意，我没有尝试过它们，但做了一些谷歌搜索，这些是我能得到的最接近的资源。

# mysql - 在选择另一个选择框时填充选择框

> ID：15470780
> 
> 赞同：0
> 
> 时间：2013-03-18T06:18:00.857
> 
> 标签：mysql, jsp, servlets

我有两个选择框。它们都应该从数据库中填充。第二个选择框应该根据第一个选择框中的选定选项进行填充。数据库连接成功，我能够填充第一个选择框。但我没有知道如何根据第一个选择框填充第二个选择框。我用来填充第一个选择框的代码是，

```
 <select class="weekcombo">
        <%
        List list= new DataManager().getlist();
        for(int i = 0; i < list.size(); i++) {
        out.write("<option value=\""+ list.get(i)+ "\">"+ list.get(i));
        }
        %> 
```

我不知道是否为此使用 servlet 或其他东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T06:31:52.150

对于第一个选择框，您可以默认填充值，就像您在上面的代码中提到的那样：

```
<select class="weekcombo" onchange="populateSecValues(this)">
    <%
        List list= new DataManager().getlist();
        for(int i = 0; i < list.size(); i++) {
            out.write("<option value=\""+ list.get(i)+ "\">"+ list.get(i));
        }
    %>
</select>

<select id="secBox" class="weekcombo">
</select> 
```

**Javascript：** 在 urlString 中，您可以传递第一个选择框值，就像我在下面的代码片段中传递的一样

```
function populateSecValues(obj){
       // use here ajax call .. which will populate second box data 
     var firstBoxValue = obj.value;
     var urlString ="your_action_url?firstBoxValue="+firstBoxValue ;
     $.ajax({
         type: "POST",
         url: urlString  ,
         success: function(result) {
           console.info("result"+result);
           $("#secBox").html(result);
    }
});
} 
```

从服务器以以下形式填充值

```
<option value ="secBoxValue">secBoxValue</option> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T10:23:27.517

Sagar Dalvi 有一个很好的解决方案。根据第一个选择的项目填充第二个选择框的唯一方法是使用 Javascript。这是因为，除非您使用 Javascript，否则在页面加载时需要知道第二个选择框的内容 - 在用户做出任何选择之前。

使用 Javascript，当用户使用 AJAX 调用进行第一次选择时，该页面能够将选项动态加载到第二个选择框中。

在不使用 javascript 的情况下解决此问题的唯一方法是让表单跨越一页以上，因此第二个选择框位于下一页上。

# ruby-on-rails - 如何在模型中创建一个范围，只返回关联等级大于 current_user 等级的对象？

> ID：15470782
> 
> 赞同：1
> 
> 时间：2013-03-18T06:18:12.847
> 
> 标签：ruby-on-rails, ruby-on-rails-3, scope, arel

我正在尝试`:readable`在我的模型中创建一个范围`Page`以返回所有`Pages`具有`current_person`足够“等级”来阅读的内容：

```
scope :readable, lambda { |current_person| joins(:role_readable)
    .where(:role_readable[:rank].gte(current_person.roles.first.rank) ) } 
```

我尝试了许多范围排列，包括这个，但没有成功（上面的一个给出“无法将符号转换为整数”错误）。

问题变得更加复杂，因为`Users`（处理身份验证等/与帐户同义） have_many`People`代表`User`' 在组织中的存在 - 即。a`User`可以是多个组织的成员，但只需要一种登录方式...

has_many的`Roles`那个`User's` `People`，给出范围用来返回`:readable`页面的排名。（即`Users`处理身份验证，而`People`处理授权（除其他外），因为`User`可能是多个组织的成员，用户对其具有不同`Roles`的 ，因此具有不同的层次结构和特权。）

```
class User < ActiveRecord::Base  
  has_many :people
  has_many :roles, through: :people    

class Person < ActiveRecord::Base
  belongs_to :user
  has_and_belongs_to_many :roles

class Role < ActiveRecord::Base
  #  name       :string(255)
  #  rank       :integer 
  has_and_belongs_to_many :people

class Page < ActiveRecord::Base
  belongs_to :role_readable, class_name: "Role", foreign_key: :role_read_id
  belongs_to :role_editable, class_name: "Role", foreign_key: :role_write_id 
```

角色有一个层次结构（例如老板、经理、工人……），记录为一个`rank`（整数）——整数越小，层次结构越大（因此特权）。如果任何一个 Person 的`Roles`排名小于或等于`:role_readable`a 的，`Page`则用户有权查看该页面。

例如。带有角色的`Person`a可以查看带有 a或的`Manager`所有页面，但不能查看。我需要一个列出所有此类可读页面的范围。`:role_readable``Manager``Worker``Boss`

`Roles`有一个 default_scope 确保它们按等级升序返回，因此`role.first`对于 a`Person`将返回具有最大层次结构（即最低等级值）的角色。

我正在使用 Rails 3.2 和 Postgres 9.2.2.0，所以我也对可用的许多查询/Arel 选项感到困惑。

提前致谢！

**更新：**

如果我尝试这个范围：

```
scope :readable, lambda { |current_person| where("role_readable.rank
  => ?",current_person.roles.first.rank) } 
```

我收到此错误：

```
PGError: ERROR:  missing FROM-clause entry for table "role_readable"
LINE 1: ...*) FROM "pages"  WHERE "pages"."team_id" = 2 AND (role_reada...
                                                         ^
: SELECT COUNT(*) FROM "pages"  WHERE "pages"."team_id" = 2 AND (role_readable.rank => 1) 
```

我不确定如何理解“缺少 FROM 子句”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T13:15:34.173

经过大量实验，答案很简单：

```
scope :readable, lambda { |current_person| joins(:role_readable)
      .where(["roles.rank >= ?", current_person.roles.first.rank]) } 
```

虽然*join*指的是关联名称`:role_readable`，但*where*必须使用表名——即。`roles.rank`不是`role_readable.rank`。

新玩家的陷阱？显然。

感谢ctcherry和他[在这里](https://stackoverflow.com/a/5808706/59195)的回答，这让游戏失去了[意义。](https://stackoverflow.com/users/10322/ctcherry)

# php - Jquery 脚本未在萤火虫或触发中显示

> ID：15470784
> 
> 赞同：2
> 
> 时间：2013-03-18T06:18:24.143
> 
> 标签：php, jquery, mysql, ajax, firebug

我正在尝试通过使用 jquery/ajax 脚本来获得一个下拉框来更改第二个下拉框。Firebug 显示 Jquery 正在运行，但我的脚本根本没有显示。

```
<script type="text/javascript">
        function ajaxfunction(parent)
        {
            $.ajax({
                url: '../functions/process.php?parent=' + parent;
                success: function(data) {
                    $("#sub").html(data);
                }
            });
        }
    </script> 
```

process.php 只是一个 MySQL 查询（有效）

我的初始下拉框由 MySQL 查询填充

```
<select name="front-size" onchange="ajaxfunction(this.value)">
//Query
</select> 
```

然后第二个下拉框就是

```
<select name = "front-finish" id="sub">
</select> 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T06:21:51.170

在你的 process.php 中给出这样的

```
echo "<select name='front-finish' id='sub' onchange='ajaxfunction(this.value)'>"; 
```

像这样你需要通过ajax将“onchange”功能添加到新创建的选择框

或者您可以删除 onchange 函数并编写如下

```
$("select[name^='front-']").live('change',function(){
   //Do your ajax call here
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T06:25:38.380

调用内联函数一点都不好......因为 web 2.0 标准建议使用不显眼的 JS 而不是 onevent 属性......看看为什么[在这里](https://stackoverflow.com/questions/5871640/why-is-using-onclick-in-html-a-bad-practice).. 其他事情......使用 ajax 的正确方法是使用类型和数据 ajax 选项在控制器中发送值..

```
<script type="text/javascript">
    $(function(){
    $('select[name="front-size"').change(function()
    {
        $.ajax({
            url: '../functions/process.php',
            type:'get',
            data:{'value' : $(this).val()}, 
            dataType:"html",   //<--- here this will take the response as html... 
            success: function(data) {
                $("#sub").html(data);
            }
        });
    });
 });
</script> 
```

你的proces.php应该是..

```
 <?php
   //db query ...thn get the value u wanted.. 
   //loop through it..
   $optVal .= "<option value="someDbValue">some DDB values</option>";
   // end loop

   echo $optValue;exit; 
```

**更新**

看起来你`onchange="ajaxfunction(this.value)"`在你的选择中仍然有这个删除它是不需要的，而且javascript中的ajaxfunction也是......

```
<select name="front-size" >    
                   //----^ here remove that 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T06:26:29.443

使用`jQuery.on()`它将允许我们在动态加载的内容上添加事件。

```
$('select[name^="front-"]').on('change',function(e){
    e.preventDefault();
    var value = $(this).val();
    ajaxfunction(value);
}); 
```

`[name^="front-"]`这将选择所有以 .开头的`SELECT`框。`name``front-`

# php - 下拉从其他下拉的变化与计算。Jscript / Ajax？

> ID：15470785
> 
> 赞同：1
> 
> 时间：2013-03-18T06:18:27.997
> 
> 标签：php, javascript, ajax, drop-down-menu

我有一个 Jscript 查询。

我做了一些阅读，发现 AJAX 只是一个 lfash 脚本的端服务器，可以在 Linux 上使用 php。（如果我错了，请纠正我）

我不知道脚本是如何工作的，所以这是新的，我尝试了几次不同的尝试，但没有运气。

我有一个下拉框 (Box1)（从数据库填充） 我还有另一个框 (Box2) 用于计算插入到我的数据库中，用于 hte 站点的其他部分的其他用途。

当有人在点击提交按钮之前更改 Box1 下拉列表时，我需要 Box2 来更改图形。

我认为因为我有计算，这让我陷入困境......代码如下......有人可以帮我弄清楚（我想我需要某种形式的脚本来做到这一点。）答案......

盒子1

```
<td><p>selection 1</p>
         <select id="t1_type" name="t1_type">

<?php $result = mysql_query("SELECT * FROM `t2` ORDER BY t2_value");
while($valuerow = mysql_fetch_array($result)){
        echo '<option value="'.$valuerow['t2_name'].'">'.$valuerow['t2_name'].'</option>'; } ?> 
```

方框2

```
 <input name="t1_value" id="t1_value" value="
    <?php 
      $var1 = $row_value['t2_value']; 
      $var2 = $row_dropdown['t1_number']; 
      $total = round ($var2 *  $var1); 
      echo "" . $total . ""; 
    ?>" /> 
```

我希望这是您需要的所有代码，（如果需要更多，请告诉我）

它需要做的是每当有人在单击提交按钮之前更改 box1 选项时显示新的计算，因此它将正确的计算提交到数据库以供将来使用。

我认为当“t2_name 从 box1.

再次成为了解解决方案的最佳链接。（现在从我的上一个问题中了解加入！几乎是中级用户。;-)）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T08:34:39.027

**编辑 ：**

我看到你的第二个框是我相信的文本框，如果那是问题，那么你应该做这样的事情

```
<select id="t1_type" name="t1_type" onchange="change(this);">
   <?php 
      $result = mysql_query("SELECT * FROM `t2` ORDER BY t2_value");
      while($valuerow = mysql_fetch_array($result))
      {
          echo '<option value="'.$valuerow['t2_name'].'">'.$valuerow['t2_name'].'</option>';
      } 
   ?>
</select> 
```

`<select>`这就像您在问题中所做的那样定义了您的框。首先添加一个`onChange`事件`<select>`，然后创建一个函数来处理`onChange`事件。`<select>`每当用户更改元素中的项目时，都会触发 onChange 事件。

Javascript：

（把这部分代码放在上面`</head>`）

```
<script language="javascript" type="text/javascript">
    function change(element)
    {
     // do here whatever you want
     // you can change the value of the <input> box with :
     // document.getElementById(element.id).value = your_value
     // If you want to see if this part works, then try adding this :
     // alert("It works!");
     // If you want to get the text of the item which has been selected in Box1 use :
     // $("#t1_type option:selected").text();

    }
</script> 
```

**注意：因为 PHP 是服务器端，你不能在没有页面刷新的情况下动态更新你的 Box2，但是 Javascript 是客户端并且可以做到这一点。**

注意：`$("#t1_type option:selected").text();`代码要求您将 jQuery 库包含到您的脚本中。如果要使用它进行计算，请务必将此变量转换为浮点数、整数或双精度数，否则结果将给出 NaN（非数字）

包含 jQuery 库的教程：http://docs.jquery.com/Tutorials: [Getting_Started_with_jQuery](http://docs.jquery.com/Tutorials:Getting_Started_with_jQuery)

如果您是 JavaScript 新手，您应该尝试一些教程。w3Schools.com 上的那些对我帮助很大，但有些人说他们并不总是正确的，但无论如何，阅读一些关于 Javascript 的东西来真正了解你在做什么，而不是复制粘贴代码 :)

# database - 融合表适合做网站数据库吗？

> ID：15470786
> 
> 赞同：3
> 
> 时间：2013-03-18T06:18:35.973
> 
> 标签：database, google-fusion-tables

我是谷歌融合表的忠实粉丝。我想知道是否可以使用融合表作为数据库来创建动态网页？如果是这样，任何人都可以提供示例链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T17:54:56.697

很抱歉让你失望了，但这是一个非常糟糕的主意。让我们看看使用 FT 作为网站的 db 层有哪些优缺点：

优点：

*   您可以在数据库中使用基本的地理功能。我不得不说大多数常见的数据库都具有内置或作为插件提供的空间扩展
*   您可以轻松地将 Google 地图集成到您的网页中，以显示来自 FT 的地理数据。
*   无设置成本

缺点：

*   [杰克](https://stackoverflow.com/users/1246898/jack "杰克")在回答中强调的糟糕的响应时间
*   平均限制为 0.5 个请求/秒。这适用于 INSERT/UPDATE 语句。如果不进行限制，您将获得大量 500 错误。
*   WHERE 子句中的有限谓词。缺少“或”的情况！
*   缺乏创建复杂 WHERE 子句的能力。
*   FT 使用 NoSQL 方法。忘记您输入的列。
*   没有关系或外键约束。但是，您可以在属性值上连接表。
*   使用触发器/存储过程或除视图之外的任何常见数据库概念是不可能的。
*   聚合函数的性能真的很差。
*   到目前为止，我所知道的没有 ORM 支持 FT。有些人认为 ORM 没用，但无论如何这是需要考虑的。

这远不是一个完整的清单。简而言之：FT 不是为您尝试使用它而设计的。时期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T12:32:20.373

是的，从技术上讲，这是可能的。由于 Fusion Tables 在发出请求时的响应时间，我非常担心将这种类型的架构用于动态网页。融合表响应可能需要 100 毫秒到 1 秒（根据我的经验），这种不一致的响应时间适用于在页面上构建地图或图表，但我相信如果用于存储动态网页的数据可能会很麻烦。

我希望这有帮助。

# c# - C# 应用程序在 Ubuntu 上将单声道路径加倍，而不是在 Windows 中

> ID：15470789
> 
> 赞同：0
> 
> 时间：2013-03-18T06:18:52.027
> 
> 标签：c#, path, mono, ubuntu-12.04

嗨第一次使用stackoverflow。如果我做错了什么，我会提前道歉。以下代码在返回路径方面在 Windows 中完美运行，但是在使用单声道 2.10.8.1 的 Ubuntu 中

路径应该是`/home/procon/Plugins/BF3/filename.cfg`

相反，它正在寻找文件`/home/procon/home/procon/Plugins/BF3/filename.cfg`

我已将问题缩小到下面的这段代码，我尝试将 Application.ExecutablePath 更改为 Environment.CurrentDirectory ，但它仍然返回错误的路径。有任何想法吗？

```
public static String makeRelativePath(String file)
    {
        String exe_path = Directory.GetParent(Application.ExecutablePath).FullName;
        String dll_path = Directory.GetParent(Assembly.GetExecutingAssembly().Location).FullName;

        String rel_path = dll_path.Replace(exe_path, "");
        rel_path = Path.Combine(rel_path.Trim(new char[] { Path.DirectorySeparatorChar, Path.AltDirectorySeparatorChar }), file);
        return rel_path;
    } 
```

# list - Sencha Touch2：无法在单击按钮时关闭浮动面板？

> ID：15470791
> 
> 赞同：0
> 
> 时间：2013-03-18T06:18:56.817
> 
> 标签：list, sencha-touch-2, panel

我是 Sencha Touch2 的新手，我在破坏浮动面板时遇到问题。我在列表项单击时在 ListView 顶部显示带有详细信息的浮动面板。我希望在单击“取消”按钮时破坏浮动面板。任何人都可以帮助我。谢谢。

```
FloatingPanel.js:
Ext.define('CustomList.view.FloatingPanel', {
    extend: 'Ext.Panel',
    alias: 'widget.FloatingPanel',
    xtype:'datepanel',
    config: {
        id:'floatingPanel',
        modal:true,
        centered: true,
        hideOnMaskTap:true,
        width:'500px',
        height:'650px',
        items:[
            {
                styleHtmlCls:'homepage',
                tpl:'<h4>{name1}</h4><h3>{name2}</h3><h3>{name3}</h3><h3>{name4}'

            },
            {
                xtype:'toolbar',
                docked:'bottom',
                items:[{
                    text:'OK',
                    ui:'confirm',
                    action:'ShowTurnOverReport',
                    listeners : {
                        tap : function() {
                            console.log('Ok');
                        }
                    }
                },
                    {
                        text:'Cancel',
                        ui:'confirm',
                        action:'Cancel',
                        listeners : {
                            tap : function() {
                                console.log('Cancel');
                                var panelToDestroy = Ext.getCmp('floatingPanel');
                                panelToDestroy.destroy();

                            }
                        }
                    }]

            }
        ]
    }
}); 
```

这是我的清单，

```
ShowList.js:
Ext.define('CustomList.view.ShowList',{
    extend:'Ext.List',
    xtype:'showlist',
    requires: [
        'Ext.dataview.List',
        'Ext.data.Store',
        'CustomList.controller.Main'
    ],
    config:{

        items:[
            {
                xtype:'list',
                id: 'listitems',
                onItemDisclosure: true,
                store:'StoreList',
                scrollable:'true',
                itemTpl: [
                    '{firstname}'
                ],
                itemTpl: '<font color="#990000"><h2>{lastname}</h2></font>{firstname}'

            }

        ]

    }

}); 
```

这是我的控制器

```
Main.js
Ext.define('CustomList.controller.Main', {
    extend: 'Ext.app.Controller',
    requires:['CustomList.view.FloatingPanel'],

    config: {
        refs: {
            listView: 'listitems'
        },

        control: {
            'main test2 list': {
                activate: 'onActivate',
                itemtap: 'onItemTap'
            }
        }
    },

    onActivate: function() {
        console.log('Main container is active');
    },

    onItemTap: function(view, index, target, record, event) {
        console.log('Item was tapped on the Data View');
        var name1 = record.get('name1');
        console.log('Item was tapped on the Data View'+name1);
        var floatingDatePanel = Ext.create('CustomList.view.FloatingPanel');
        var data = record.getData();
        floatingDatePanel.getAt(0).setData(data);
        Ext.Viewport.add(floatingDatePanel);

    }

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T06:56:51.537

一个明显的问题是：

```
Ext.getCmp('floatingPanel'); 
```

将在`id: 'floatingPanel'`您使用时申请案例`itemid:'floatingPanel'`

要检索`itemId`，您可以使用[Ext.ComponentQuery](http://docs.sencha.com/touch/2-1/#!/api/Ext.ComponentQuery)：

```
Ext.ComponentQuery.query('#floatingPanel')[0]; 
```

# php - 在 PHP 中从 Mongo 聚合中打印两列表

> ID：15470794
> 
> 赞同：2
> 
> 时间：2013-03-18T06:19:34.847
> 
> 标签：php, mongodb, aggregation-framework

我在 PHP 中有以下 Mongo 聚合：

```
 $results = $collection1 -> aggregate (array(

        '$group' => array(
        '_id' => '$Issue',
        'total' => array('$sum' => 1 ), 
        )), array( '$sort' => array( 'total' => -1 ), ));

    print_r($results); 
```

它充分产生以下输出：

```
Array ( [result] => Array ( [0] => Array ( [_id] => Sales [total] => 51 ) 
[1] => Array ( [_id] => Service [total] => 41 ) [2] => Array ( [_id] => 
Marketing [total] => 31 ) [3] => Array ( [_id] =>Delivery [total] => 28 )
... etc. 
```

请原谅我的“菜鸟”问题，但我如何将其格式化为简单的两列 HTML 格式，在第一列中显示类别名称（例如，销售、营销等）以及每个类别的总数同一行？

我不想使用 print_r 或 var_dump，我已经尝试了这个站点上的各种 'foreach' 和 'while' 方法，但此时我被难住了。

提前谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T08:17:45.300

嗯，也许我在这里错过了一些东西，但是这样做吗？

```
<table>
    <thead>
        <tr>
            <th></th><th>Total</th>
        </tr>
    </thead>
    <tbody>
        foreach($output_var['result'] as $row){
            ?><tr><td><? echo $row['_id']; ?></td><td><? echo $row['total'] ?></td></tr><?
        }
    </tbody>
</table> 
```

# mysql - Jasper 报告是否适合基于 MySQL 的报告？

> ID：15470796
> 
> 赞同：1
> 
> 时间：2013-03-18T06:19:39.873
> 
> 标签：mysql, jasper-reports, reporting

我有一种情况，我需要从 MySQl 中构建的数据集市生成报告。我只能使用开源工具。你能推荐任何最适合我要求的工具吗？Jasper Reports 适合这个吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T06:27:29.923

有很多开源工具可供您使用，例如 JaspeReport Server 和 Pentaho。但我更喜欢使用 JasperReport 服务器，它具有以下所有功能：-

1.  允许用户制作报告并将其下载为 Excel 或 PDF。
2.  向下钻取 3.Crosstabs
3.  图形图表
4.  易于集成到充满这些报告的 Web 应用类型页面
5.  与我们的数据库轻松集成
6.  与 Java 和 Eclipse 轻松集成。

[您可以在此处](https://stackoverflow.com/tags/jasper-reports/info)找到有关 JasperReport 服务器的更多信息

JasperSoft 默认带有 PostgreSQL 数据库，但您可以通过 MySQL 数据库连接。 [在这里](http://www.innoventsolutions.com/birt-jasper-pentaho-comparison-matrix.html)，您可以看到所有其他基于开源报告的工具的比较。

# android - 互联网不可用时加载列表视图

> ID：15470797
> 
> 赞同：0
> 
> 时间：2013-03-18T06:19:49.793
> 
> 标签：android, listview

在我的应用程序中，我有一个列表视图，它在其适配器中使用 ImageLoader 来加载带有 lsit 视图项的图像。

在活动的 oncreate 中，我为列表视图项获取一些 URL，如下所示：

```
private void fetchImages() {
        // TODO Auto-generated method stub

        //fetching the list
        mCustomProgressDialog = CustomProgressDialog.createDialog(Group_SharePictureMainActivity.this, "", "");
        mCustomProgressDialog.show();
        new Thread(){
            @Override
            public void run() {
                APIVariables apiVariables = new APIVariables();
                String getGroupImagesURL = apiVariables.getGroupImages(GroupsActivity.Group_ID);
                groupImages = ParseValues.getGroupImages(getGroupImagesURL);
                handlerFetchGroupImages.sendEmptyMessage(0);
            }
        }.start();

    } 
```

这里我的问题是 - 我想实现一种情况，在这种情况下，当 Internet 连接不可用时，应该出现已经生成的列表视图（当 Internet 可用时）。

当网络连接不可用时，这是否可以保持列表视图的先前状态？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T06:31:55.127

假设您在列表视图中显示来自服务器的图像。您可以缓存图像并在互联网连接关闭时加载它。

延迟加载图像。[https://github.com/thest1/LazyList](https://github.com/thest1/LazyList)。它使用缓存。

```
imageLoader=new ImageLoader(activity.getApplicationContext()); 
```

在您的自定义列表适配器的 getview 中

```
 ImageView image=(ImageView)convertView.findViewById(R.id.imageview);
 imageLoader.DisplayImage("url", image); 
```

在 LazyLoading 的 ImageLoader 类中。

```
public void DisplayImage(String url, ImageView imageView)
{
    System.out.println("Url................."+url);
    imageViews.put(imageView, url);
    Bitmap bitmap=memoryCache.get(url);//check if bitmap is there in cache. url is the key
    if(bitmap!=null)
        imageView.setImageBitmap(bitmap);//display if it is present.
    else
    {
        queuePhoto(url, imageView); //cache and display image.
        imageView.setImageResource(stub_id);//display a dummy image until image is dowloaded and displayed.
    }
} 
```

还有一个开源的通用图像加载器。[https://github.com/nostra13/Android-Universal-Image-Loader](https://github.com/nostra13/Android-Universal-Image-Loader)。异步显示图像。使用缓存。

缓存位图的其他方式。[http://developer.android.com/training/displaying-bitmaps/cache-bitmap.html](http://developer.android.com/training/displaying-bitmaps/cache-bitmap.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T06:31:55.667

您可以使用**LRUCache 类**来缓存下载到应用程序内存中的图像。在没有网络的情况下，您可以使用缓存的图像在 listView 中显示。如果有互联网，您可以获取新图像，如果不再需要旧图像，请在开始下载新图像之前清除缓存。

[有关缓存图像的更多信息在此链接](http://developer.android.com/training/displaying-bitmaps/cache-bitmap.html)中进行了很好的描述。您可以使用该页面提供的示例应用程序。

另外，看看[这个](https://github.com/thest1/LazyList)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T06:39:21.957

您可以尝试以下方法：

当互联网连接可用时，下载图像并将其存储在内部存储器中。如果您想存储一些其他详细信息，您也可以将其存储在 SQLite 数据库中。如果网络不可用，则分别从数据库和内存中获取值和图像并加载到列表视图中。

# ios - 在 xcode 中构建和运行时重新安装

> ID：15470803
> 
> 赞同：0
> 
> 时间：2013-03-18T06:20:33.593
> 
> 标签：ios, xcode, lua, moai

我正在构建一个 iOS 应用程序并在连接的设备上运行它。在调试期间，应用程序中存在其他配置文件。但是，如果我从 Xcode 中删除这些配置文件，然后进行构建和运行，它们仍然存在于设备上（这些是我们编写游戏的 lua 文件）。如何强制 Xcode 卸载以前版本的应用程序，即在安装时进行完整的干净构建？清理项目和目标并删除派生数据似乎没有效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T07:16:27.690

我强烈认为你不能。在设备上安装应用程序会将文件复制到设备，但不会删除设备上已存在的文件。

（当我将基于 nib 的视图控制器转换为以编程方式创建的视图控制器时，我遇到了类似的问题。nib 文件仍在应用程序包中，导致出现奇怪的错误消息。）

删除整个捆绑包的唯一方法是删除设备上的应用程序。

# asp.net - 无效的对象名称异常

> ID：15470804
> 
> 赞同：0
> 
> 时间：2013-03-18T06:20:38.443
> 
> 标签：asp.net

我创建了一个名为 Customerdetails 的表，其中包含有关客户的所有信息，例如 customer_id、姓名联系人等。我创建了一个表单，一旦我输入客户姓名，所有其他详细信息都应自动显示。

Bt 当我在名称文本框中输入名称时，我得到异常

> 无效的对象名称 Customerdetails。

我正在用 asp.net c# 开发这个项目。下面是我的代码示例..您的帮助将不胜感激..谢谢...！！

```
 private void textBox2_TextChanged(object sender, EventArgs e)
    {

            con.Open();
            SqlCommand cmd = new SqlCommand("select * from Customerdetails where name='"+textBox2.Text+"'",con);
            SqlDataReader dr = cmd.ExecuteReader();

            if (dr.Read())
            {
                textBox1.Text = dr["customer_id"].ToString();
                textBox2.Text = dr["name"].ToString();
                textBox3.Text = dr["contact"].ToString();
                richTextBox1.Text = dr["address"].ToString();
                textBox4.Text = dr["veichle"].ToString();
                textBox5.Text = dr["veichle_no"].ToString();
            }
            con.Close();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T06:27:54.913

SQL Server 无法识别您对`"Customerdetails"`数据库中表的请求。

检查以确保该`Customerdetails`表存在，您具有适当的权限，并且您可能需要指定该表的所有者。

# c - 没有选项和数据的 TCP 段

> ID：15470806
> 
> 赞同：0
> 
> 时间：2013-03-18T06:20:44.563
> 
> 标签：c, networking

我想实现一个简化的 TCP/IP 堆栈。现在我正在编写我的`tcp_connect`函数。在握手步骤中，我可以发送没有 TCP 选项和数据的 TCP 段（仅在客户端发送 TCP 标头）吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T06:31:40.643

我认为不需要任何选项。但是，如果您不发送最大分段大小选项，则假定的默认 MSS 仅为 576。

TCP 握手段通常不包含任何数据。但是，包含它是合法的，因此如果您的堆栈收到它，它应该接受它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T15:21:11.560

[RFC793](https://www.rfc-editor.org/rfc/rfc793#section-3.1)中只描述了三个（实现简单）选项：

> ```
>  Kind     Length    Meaning
>   ----     ------    -------
>    0         -       End of option list.
>    1         -       No-Operation.
>    2         4       Maximum Segment Size. 
> ```

您可以尝试仅将“选项列表结束”附加到 TCP 标头，或使用预定义的模板。

作为客户端，您可能不会在传出的握手段中添加数据，但您应该能够在接受连接时处理传入的握手段。

* * *

> 我按你说的试过了，但没有得到回应。

您是否尝试在另一端使用 TCPdump 之类的东西？任何传入的段？

# javascript - javascript for asp.net listview 项目模板

> ID：15470810
> 
> 赞同：-2
> 
> 时间：2013-03-18T06:20:54.097
> 
> 标签：javascript, asp.net, listview

我正在尝试为我的列表视图项目实现计时器。我的javascript如下：

```
function countdown() {
var now = new Date();
var biddate = document.getElementById('InitiateDate').value
var kickoff = Date.parse(biddate);
var diff = kickoff - now;

var days = Math.floor(diff / (1000 * 60 * 60 * 24));
var hours = Math.floor(diff / (1000 * 60 * 60));
var mins = Math.floor(diff / (1000 * 60));
var secs = Math.floor(diff / 1000);

var dd = days;
var hh = hours - days * 24;
var mm = mins - hours * 60;
var ss = secs - mins * 60;

if (mm<10) {
    mm = "0" + mm;
}
if (ss<10) {
    ss = "0" + ss;
}

document.getElementById("CountDownTimer")
            .innerHTML =
                dd + ':' +
                hh + ':' +
                mm + ':' +
                ss;

if (dd < 0) {
    document.getElementById("CountDownTimer")
            .innerHTML = "time up";
}

}
setInterval('countdown()', 1000); 
```

我的列表视图项目模板相关部分是：

```
 <td>
    <asp:TextBox ID="InitiateDate" runat="server" Text='<%#  Eval("InitiateDate") %>'  ReadOnly="True"  ClientIDMode="Static"></asp:TextBox>
    <div id="CountDownTimer" class="timer"> </div>
    </td> 
```

此 javascript 工作正常，但仅适用于 listview 的第一行。我需要它适用于所有行，并将为每一行提供倒数计时器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T06:39:14.533

```
 var biddate, InitiateDateTemp, CountDownTimerTemp;

        function countdown(InitiateDate, CountDownTimer) {
            InitiateDateTemp = InitiateDate;
            CountDownTimerTemp = CountDownTimer;

            biddate = InitiateDate.innerHTML;

               var dd= SetTime(biddate);

        }

        function  SetTime(biddate)  {
            var kickoff = Date.parse(biddate);
            var now = Date.now();
            var diff = kickoff - now;
           // debugger;
            var days = Math.floor(diff / (1000 * 60 * 60 * 24));
            var hours = Math.floor(diff / (1000 * 60 * 60));
            var mins = Math.floor(diff / (1000 * 60));
            var secs = Math.floor(diff / 1000);

            var dd = days;
            var hh = hours - days * 24;
            var mm = mins - hours * 60;
            var ss = secs - mins * 60;

            if (mm < 10) {
                mm = "0" + mm;
            }
            if (ss < 10) {
                ss = "0" + ss;
            }

            CountDownTimerTemp.innerHTML =
                             dd + ':' +
                             hh + ':' +
                             mm + ':' +
                             ss;

            if (dd < 0) {
                CountDownTimerTemp
                         .innerHTML = "time up";
                return -1;

            }
            else {
                return 1;
            }
        }

  protected void Timer1_Tick(object sender, EventArgs e)
    {
        Timer time = (Timer)sender;
        ListViewItem item = (ListViewItem)time.Parent;
        ListView lst = (ListView)time.Parent.Parent ;

        foreach (ListViewItem listItem in lst.Items )
        {

            Label InitiateDate = item.FindControl("InitiateDate") as Label;
            HtmlGenericControl CountDownTimer = item.FindControl("CountDownTimer") as HtmlGenericControl;
            ScriptManager.RegisterStartupScript(InitiateDate, this.GetType(), "AKey" + item.DataItemIndex, "countdown(" + InitiateDate.ClientID + " ," + CountDownTimer.ClientID + ");", true);

        }

    } 
```

在页面加载事件上添加此代码。这是我的测试代码

```
//very important code.    (if (IsPostBack == false))
  if (IsPostBack == false)
        {
            List<A> data = new List<A>();
            A a = new A();
            A a1 = new A();
            a.Leave_Status = "A";
            a.datetime = DateTime.Now.AddDays(1);
            data.Add(a);
            a1.Leave_Status = "A1";
            a1.datetime = DateTime.Now.AddDays(-1);

            data.Add(a1);
            ListView1.DataSource = data;
            ListView1.DataBind();
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T08:51:22.987

```
protected void DataList1_ItemDataBound(object sender, DataListItemEventArgs e)
    {
        if (e.Item.ItemType == ListItemType.Item)
        {
            TextBox InitiateDate = e.Item.FindControl("InitiateDate") as TextBox;
            HtmlGenericControl CountDownTimer = e.Item.FindControl("CountDownTimer") as HtmlGenericControl;

            ScriptManager.RegisterStartupScript(InitiateDate, this.GetType(), "myscript", "countdown('"+ InitiateDate.ClientID +"', '"+ CountDownTimer.ClientID +"');", true);
        }
    } 
```

script as \

```
 function countdown(InitiateDate,CountDownTimer) {
..
..
var biddate = document.getElementById(InitiateDate).value
..
..

document.getElementById(CountDownTimer).innerHTML=dd + ':' +
            hh + ':' +
            mm + ':' +
            ss;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T11:57:37.417

脚本

```
 var biddate, InitiateDateTemp, CountDownTimerTemp;

    function countdown(InitiateDate, CountDownTimer) {
        InitiateDateTemp = InitiateDate;
        CountDownTimerTemp = CountDownTimer;

        biddate = InitiateDate.innerHTML;

        var kickoff = Date.parse(biddate);
        var now = Date.now();
        var diff = kickoff - now;
        //debugger;
        var days = Math.floor(diff / (1000 * 60 * 60 * 24));
        var hours = Math.floor(diff / (1000 * 60 * 60));
        var mins = Math.floor(diff / (1000 * 60));
        var secs = Math.floor(diff / 1000);

        var dd = days;
        var hh = hours - days * 24;
        var mm = mins - hours * 60;
        var ss = secs - mins * 60;

        if (mm < 10) {
            mm = "0" + mm;
        }
        if (ss < 10) {
            ss = "0" + ss;
        }

        if (dd < 0) {
            CountDownTimerTemp
                     .innerHTML = "time up";
        }
        else {
            CountDownTimerTemp.innerHTML =
                        dd + ':' +
                        hh + ':' +
                        mm + ':' +
                        ss;
        }
    }

</script> 
```

ASP.net

```
<body>
<form id="form1" runat="server">
<asp:ScriptManager ID="ScriptManager1" runat="server">
    </asp:ScriptManager>
<div>
<asp:ListView ID="Listview1" runat="server">
    <ItemTemplate>
                <tr style="_background-color:#DCDCDC;color: #000000;">

                    <td>
                        <asp:Label ID="field1" runat="server" Text='<%# Eval("field1") %>' />
                    </td>
                    <td>
                        <asp:Label ID="field2" runat="server" 
                            Text='<%# Eval("field2") %>' />
                    </td>
                    <td>
                        <asp:Label ID="field3" runat="server" 
                            Text='<%# Eval("field3") %>' />
                    </td>
                    <td>
                        <asp:Label ID="field4" runat="server" 
                            Text='<%# Eval("field4") %>' />
                    </td>
                    <td>
                    <asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode="Conditional">
                    <ContentTemplate >
                 <asp:Label   ID="InitiateDate" Text='<%# Eval ("InitiateDate") %>' runat="server" ></asp:Label>

               <div id="CountDownTimer" runat="server" >Timer</div>
                    </ContentTemplate>
                    <Triggers> 
                        <asp:AsyncPostBackTrigger ControlID="Timer1" EventName="Tick" />
                    </Triggers>
                </asp:UpdatePanel>
                <asp:Timer ID="Timer1"  runat="server" Interval="3000" OnTick="Timer1_Tick"></asp:Timer>

                    </td>
                </tr>
            </ItemTemplate>
                <LayoutTemplate>
                <table id="Table1" runat="server" class="ListViewLayoutTable">
                    <tr id="Tr1" runat="server">
                        <td id="Td1" runat="server">
                            <table ID="itemPlaceholderContainer" runat="server" border="1" class="ListViewLayoutTable"
                                style="background-color: #FFFFFF;border-collapse: collapse;border-color: #999999;border-style:none;border-width:1px;font-family: Verdana, Arial, Helvetica, sans-serif;">
                                <tr id="Tr2" runat="server" style="background-color:#DCDCDC;color: #000000;">
                                    <th id="Th7" runat="server">
                                        field1</th>
                                    <th id="Th1" runat="server">
                                        field2</th>
                                    <th id="Th2" runat="server">
                                        field3</th>
                                    <th id="Th3" runat="server">
                                        field4</th>
                                    <th id="Th4" runat="server">
                                        timer</th>

                                </tr>
                                <tr ID="itemPlaceholder" runat="server">
                                </tr>
                            </table>
                        </td>
                    </tr>

                </table>
            </LayoutTemplate>
    </asp:ListView>
</div>

</form>
</body>
</html> 
```

C＃

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Data;
using System.Data.SqlClient;
using System.Web.UI.HtmlControls;

public partial class Shops : System.Web.UI.Page
{
protected void Page_Load(object sender, EventArgs e)
{

    if (IsPostBack == false)
    {
        DataTable dt = new DataTable();

        dbServices service = new dbServices("MyConnection");
        SqlCommand command = new SqlCommand("SELECT * FROM table", service.SqlCon);
        SqlDataReader drRecord = command.ExecuteReader();
        dt.Load(drRecord);

        ShopBidsTable.DataSource = dt;
        ShopBidsTable.DataBind();
    }

}

protected void Timer1_Tick(object sender, EventArgs e)
{
    Timer time = (Timer)sender;
    ListViewItem item = (ListViewItem)time.Parent.Parent;
    ListView lst = (ListView)time.Parent.Parent.Parent;

    foreach (ListViewItem listItem in lst.Items)
    {

        Label InitiateDate = item.FindControl("InitiateDate") as Label;
        HtmlGenericControl CountDownTimer = item.FindControl("CountDownTimer") as HtmlGenericControl;
        if (CountDownTimer.InnerHtml != "time up")
        {
            ScriptManager.RegisterStartupScript(InitiateDate, this.GetType(), "AKey" + item.DataItemIndex, "countdown(" + InitiateDate.ClientID + " ," + CountDownTimer.ClientID + ");", true);
        }
    }

}

class A
{
    public string Leave_Status { get; set; }
    public DateTime datetime { get; set; }
}
} 
```

这是我所有的代码......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T06:53:58.187

```
 protected void ListView1_ItemDataBound(object sender, ListViewItemEventArgs e)
    {
        if (e.Item.ItemType == ListViewItemType.DataItem )
        {
            Label InitiateDate = e.Item.FindControl("InitiateDate") as Label;
            HtmlGenericControl CountDownTimer = e.Item.FindControl("CountDownTimer") as HtmlGenericControl;

           ScriptManager.RegisterStartupScript(InitiateDate, this.GetType(), "AKey" + e.Item.DataItemIndex, "countdown(" + InitiateDate.ClientID + " ," + CountDownTimer.ClientID + ");", true);
}
    } 
```

脚本

```
var biddate, InitiateDateTemp, CountDownTimerTemp;
    function countdown(InitiateDate, CountDownTimer) {
        InitiateDateTemp = InitiateDate;
        CountDownTimerTemp = CountDownTimer;

      biddate = InitiateDate.innerHTML;

 //   setInterval(function () { SetTime(biddate) }, 1000);

  //  var stopTimer;
    var timerId = setInterval(function () {

       var dd= SetTime(biddate);

       if (dd <= 0) {
            clearInterval(timerId);
        }
    }, 1000);

}

function  SetTime(biddate)  {
    var kickoff = Date.parse(biddate);
    var now = Date.now();
    var diff = kickoff - now;
   // debugger;
    var days = Math.floor(diff / (1000 * 60 * 60 * 24));
    var hours = Math.floor(diff / (1000 * 60 * 60));
    var mins = Math.floor(diff / (1000 * 60));
    var secs = Math.floor(diff / 1000);

    var dd = days;
    var hh = hours - days * 24;
    var mm = mins - hours * 60;
    var ss = secs - mins * 60;

    if (mm < 10) {
        mm = "0" + mm;
    }
    if (ss < 10) {
        ss = "0" + ss;
    }

    CountDownTimerTemp.innerHTML =
                     dd + ':' +
                     hh + ':' +
                     mm + ':' +
                     ss;

    if (dd < 0) {
        CountDownTimerTemp
                 .innerHTML = "time up";
        return -1;

    }
    else {
        return 1;
    }
} 
```

数据列表标签和 div

```
 <asp:DataList ID="DataList1" runat="server" OnItemDataBound="DataList1_ItemDataBound">
            </asp:DataList>
        </p>
        <p>
            <asp:ListView ID="ListView1" runat="server" OnItemDataBound="ListView1_ItemDataBound">
                <ItemTemplate >

                    <asp:Label ID="InitiateDate" Text='<%# Eval ("datetime") %>' runat="server" ></asp:Label>

                    <div id="CountDownTimer" runat="server" >Timer</div>
                </ItemTemplate>
            </asp:ListView> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-20T09:22:09.917

```
 <%@ Page Language="C#" AutoEventWireup="true" CodeFile="Default4.aspx.cs" Inherits="Default4" %>

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>

    <script>

        var biddate, InitiateDateTemp, CountDownTimerTemp;

        function countdown(InitiateDate, CountDownTimer) {
            InitiateDateTemp = InitiateDate;
            CountDownTimerTemp = CountDownTimer;

            biddate = InitiateDate.innerHTML;

            var kickoff = Date.parse(biddate);
            var now = Date.now();
            var diff = kickoff - now;
            //debugger;
            var days = Math.floor(diff / (1000 * 60 * 60 * 24));
            var hours = Math.floor(diff / (1000 * 60 * 60));
            var mins = Math.floor(diff / (1000 * 60));
            var secs = Math.floor(diff / 1000);

            var dd = days;
            var hh = hours - days * 24;
            var mm = mins - hours * 60;
            var ss = secs - mins * 60;

            if (mm < 10) {
                mm = "0" + mm;
            }
            if (ss < 10) {
                ss = "0" + ss;
            }

             if (dd < 0) {
                CountDownTimerTemp
                         .innerHTML = "time up";
            }
            else {
                CountDownTimerTemp.innerHTML =
                            dd + ':' +
                            hh + ':' +
                            mm + ':' +
                            ss;
            }
        }

    </script>

</head>
<body>
    <form id="form1" runat="server">
 <asp:ScriptManager ID="ScriptManager1" runat="server"  >
        </asp:ScriptManager>

        <p>
            &nbsp;</p>
        <p>

        </p>
        <p>
            <asp:ListView   ID="ListView1" runat="server"   >
                <ItemTemplate >
                    <asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode="Conditional">
                        <ContentTemplate >
                     <asp:Label   ID="InitiateDate" Text='<%# Eval ("datetime") %>' runat="server" ></asp:Label>

                   <div id="CountDownTimer" runat="server" >Timer</div>
                        </ContentTemplate>
                        <Triggers> 
                            <asp:AsyncPostBackTrigger ControlID="Timer1" EventName="Tick" />
                        </Triggers>
                    </asp:UpdatePanel>
                    <asp:Timer ID="Timer1"  runat="server" Interval="1000" OnTick="Timer1_Tick"></asp:Timer>

                </ItemTemplate>
            </asp:ListView>
        </p>
        <p>
            &nbsp;</p>
    </form>
</body>
</html>

using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.HtmlControls;
using System.Web.UI.WebControls;
using System.Data;
using System.Data.SqlClient;

public partial class Default4 : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        if (IsPostBack == false)
        {
            List<A> data = new List<A>();
            A a = new A();
            A a1 = new A();
            a.Leave_Status = "A";
            a.datetime = DateTime.Now.AddDays(1);
            data.Add(a);
            a1.Leave_Status = "A1";
            a1.datetime = DateTime.Now.AddDays(-1);

            data.Add(a1);
            ListView1.DataSource = data;
            ListView1.DataBind();
        }

    }

    class A
    {
        public string Leave_Status { get; set; }
        public DateTime  datetime { get; set; }
    }

    protected void Timer1_Tick(object sender, EventArgs e)
    {
        Timer time = (Timer)sender;
        ListViewItem item = (ListViewItem)time.Parent;
        ListView lst = (ListView)time.Parent.Parent ;

        foreach (ListViewItem listItem in lst.Items )
        {

            Label InitiateDate = item.FindControl("InitiateDate") as Label;
            HtmlGenericControl CountDownTimer = item.FindControl("CountDownTimer") as HtmlGenericControl;
            if (CountDownTimer.InnerHtml != "time up")
            {
                ScriptManager.RegisterStartupScript(InitiateDate, this.GetType(), "AKey" + item.DataItemIndex, "countdown(" + InitiateDate.ClientID + " ," + CountDownTimer.ClientID + ");", true);
            }
        }

    }
} 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-03-20T14:17:57.437

解决了！Tick 函数几乎没有变化。

```
protected void Timer1_Tick(object sender, EventArgs e)
{
    Timer time = (Timer)sender;
    ListViewItem item = (ListViewItem)time.Parent; 

    foreach (ListViewItem listItem in Listview1.Items)
    {
        Label InitiateDate = item.FindControl("InitiateDate") as Label;
        HtmlGenericControl CountDownTimer = item.FindControl("CountDownTimer") as HtmlGenericControl;
        if (CountDownTimer.InnerHtml != "time up")
        {
            ScriptManager.RegisterStartupScript(InitiateDate, this.GetType(), "AKey" + item.DataItemIndex, "countdown(" + InitiateDate.ClientID + " ," + CountDownTimer.ClientID + ");", true);
        }
    }
} 
```

非常感谢。希望在其他问题上见到你:)

# grails - 为什么 grails run-app 在编译期间尝试访问远程服务器

> ID：15470813
> 
> 赞同：3
> 
> 时间：2013-03-18T06:21:13.047
> 
> 标签：grails

我发现在我的 grails 应用程序编译过程中出现了一些错误。

```
| Loading Grails 2.0.4
| Configuring classpath
:: problems summary ::
:::: ERRORS
Server access Error: Unexpected end of file from server 
url=http://plugins.grails.org/grails-shiro/tags/RELEASE_1_2_0-SNAPSHOT/shiro-1.2.0-SNAPSHOT.pom 
```

但我可以使用我的浏览器访问上述网址。错误是什么意思？有没有办法在编译过程中避免此类问题？或者我可以在本地编译我的 grails 应用程序吗？

当我需要一些 grails 插件时，我通常运行 grails install-plugin xxx 来安装 xxx 插件。我注意到有一些记录自动写入'application.properties'。插件总是安装在我的 ~/.grails//projects/plugins/ 中，我想知道是否有办法在本地编译 grails 应用程序？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-18T06:30:15.667

你有一个`SNAPSHOT`插件，这意味着 Grails 必须定期（每天一次）刷新这个插件。

要禁用可用于`--offline`离线工作的远程存储库：

```
grails --offline run-app 
```

或者通过添加完全禁用它`BuildConfig.groovy`：

```
grails.offline.mode=true 
```

请参阅 Dependecy Resoultion 的文档 - [https://grails.github.io/grails2-doc/2.0.4/guide/conf.html#dependencyRepositories](https://grails.github.io/grails2-doc/2.0.4/guide/conf.html#dependencyRepositories)

[PS Shiro 插件](http://grails.org/plugin/shiro)的最新稳定版是`1.1.4`，你也可以用它来代替`1.2.0-SNAPSHOT`. 稳定版只会下载一次。

# java - 使用 Apache IO Java 的多线程复制 IO 操作

> ID：15470815
> 
> 赞同：2
> 
> 时间：2013-03-18T06:21:26.653
> 
> 标签：java, multithreading, io, copy, apache-commons

我正在开发一个大型项目所需的类似压缩实用程序的东西。

实用程序所做的是接受用户的请求并开始复制要求制作 zip 文件的所有文件，最后提供该 zip 文件以下载回用户。

现在的问题是，当多个用户发送请求时，实用程序会启动一个单独的线程（最多可以是定义的线程数的最大限制）。实用程序开始并行复制并且变得非常慢，甚至无法使用。

我需要一种方法来解决这个问题或任何任何方法，以便并行复制应该足够快。

我使用 Apache commons io 进行复制，使用 Zip4j 库进行压缩。

请建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T09:02:44.957

```
if (!isFresh) {
    ArrayList<String> foldersNamesToBeZipped =
            GeneralInfoDownload.getFilesToDownloadForWorkstep(this.map.get("DEPARTMENT"));
    ArrayList<File> folderFilesToBeZipped = new ArrayList<File>();

    for (String name : foldersNamesToBeZipped) {
        folderFilesToBeZipped.add(new File(MasterPath + System.getProperty("file.separator") + name));
    }

    log.info("****************Copying start TimeStamp***************" + this.map.get("JID"));
    TDFileUtil.copyFilesToDirectory(folderFilesToBeZipped,
           new File(toPcFolder.getAbsolutePath() + File.separator
           + "NEW_ORIGNALS"));
    }
} 
```

`GeneralInfoDownload.getFilesToDownloadForWorkstep`函数获取所有要压缩和下载的文件。

`TDFileUtil.copyFilesToDirectory`里面的函数使用 Apache commons 方法`copyDirectoryToDirectory`和`copyFileToDirectory`.

当只有 1 或 2 个请求时这工作正常，但当多个请求排队时它会变慢。

这是意料之中的，但是否可以提高性能。（我的意思是它只是可以容忍的。）

# sitecore - Sitecore 如何在富文本编辑器中隐藏/禁用 HTML 选项卡

> ID：15470819
> 
> 赞同：2
> 
> 时间：2013-03-18T06:21:49.660
> 
> 标签：sitecore, sitecore6

有人可以建议如何在 sitecore 上的富文本编辑器中隐藏/禁用 HTML 选项卡吗？

我看过[这个](http://sitecoreaustralia.wordpress.com/2010/06/16/top-100-cool-things-in-sitecore-completed-list/)，但需要对 Sitecore 核心富文本 XML 进行更改。

这个解决方案的问题是我们需要为每个实例修改 XML，那么升级呢？

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-18T09:37:45.070

在 Core 数据库中（您可以使用右下角时钟旁边的图标进行切换），您可以转到`/sitecore/system/Settings/Html Editor Profiles/*profile you want*/buttons/HTML view`并拒绝您的用户对其进行读取访问。或者，至少在 Sitecore 6.5 中，有一个没有 HTML 视图的配置文件。它被称为富文本 IDE。您可以将富文本字段的数据源字段设置为该字段，并且没有 HTML 视图。

不过，这只是删除了左下角的 HTML 选项，我不确定如何在打开 RTE 本身（在其中显示编辑器/建议修复/编辑 Html）之前删除您拥有的编辑 HTML 选项。看看[这个问题](https://stackoverflow.com/questions/4876360/customizing-the-sitecore-rich-text-editors-default-configuration)，你可能无论如何都必须更改 XML。

我们进行升级和处理不同实例的方式是在源代码管理中保存更改的文件，并确保在构建部署包时包含它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-14T01:46:12.793

添加到 Trayek 的出色答案 - 您可以删除对以下 Alex Shyba 概述的“编辑 HTML”的访问权限：

1.  进入核心数据库，找到字段定义项：/sitecore/system/Field types/Simple Types/Rich Text/Menu/Edit Html
2.  在安全选项卡上，单击“分配”并选择您不希望此选项可用的角色。拒绝继承此项或指定其他对您的需求有意义的安全设置。

我添加了“所有人”，然后通过继承为项目选择了“X”，并删除了“编辑 HTML”选项。

取自： [http ://sitecoreblog.alexshyba.com/2009/10/quick-tip-remove-edit-html-option-for.html](http://sitecoreblog.alexshyba.com/2009/10/quick-tip-remove-edit-html-option-for.html)

# google-closure-compiler - 如何将多个文件编译为相同的文件

> ID：15470821
> 
> 赞同：1
> 
> 时间：2013-03-18T06:21:56.320
> 
> 标签：google-closure-compiler, google-closure

我知道 Google Closure Compiler 允许我将多个文件编译成一个文件，如下所示：

```
java -jar compiler.jar --js assets/js/file1.js 
   assets/js/file2.js --js_output_file  assets/js/file.min.js 
```

但我需要编译文件并将其放在同一个文件夹中的相同名称，如下所示：

```
java -jar compiler.jar --js assets/js/file1.js 
    --js_output_file  assets/js/file1.js

java -jar compiler.jar --js assets/js/file2.js 
    --js_output_file  assets/js/file2.js 
```

但它不起作用。文件被损坏。你能帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-16T20:20:59.237

首先也是最重要的是，您的编译脚本设置为覆盖您的源文件。你*真的，绝对肯定*这是你打算做的吗？编译是一种有损转换：它会破坏注释（包括类型注释）、重命名所有内容、积极重构、到处内联，并且通常会将您的辛勤工作变成无法维护的混乱。

```
java -jar compiler.jar --js assets/js/file1.js 
    --js_output_file  assets/js/file1.js

java -jar compiler.jar --js assets/js/file2.js 
    --js_output_file  assets/js/file2.js 
```

如果我相信您的话并且您实际上已经完成了上述操作，那么不幸的是，这将解释您的“我的文件现在已损坏”的问题。我希望你有一个备份。

* * *

更一般地说，了解[编译器手册](https://developers.google.com/closure/compiler/docs/api-tutorial3#propnames)。所有这些，尤其是关于`inconsistent property names`. 如果编译器不知道你的源文件是如何相互关联的，那么闭包就不可能一致地重命名它们的内容。

如果您打算创建预编译`.dll`样式的共享对象，则关闭不支持此操作，因为手册中记录了名称碎片问题。此外，无需预编译，编译速度相当快。而是共享您的源文件。

拜托，请让自己成为一个构建目录，并将编译器输出*从*源代码中传输出去。代码永远不会在第一遍就完美构建。即使有问题的代码是一个简单的数学实用程序，您也需要多次构建和测试。

总之：

**(1)**阅读[整本手册](https://developers.google.com/closure/compiler/docs/api-tutorial3)，**(2)**编写[Externs](https://developers.google.com/closure/compiler/docs/api-tutorial3#externs)或尝试[`goog.require`](http://code.google.com/p/closure-compiler/wiki/ManageClosureDependencies)，**(3)**预编译被高估，**(4)**永远不会覆盖源文件，**(5)**经常备份。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-05T21:51:12.813

只需在命令行中使用多个“--js”参数：

```
java -jar compiler.jar --js 1.js --js 2.js --js 3.js --js_output_file all.js 
```

# c# - 在Lock语句c#中使用的变量值是否会改变？

> ID：15470824
> 
> 赞同：2
> 
> 时间：2013-03-18T06:22:14.230
> 
> 标签：c#, multithreading, arraylist

```
 public Response Delete(Request fRequest)
        {
            Response fResponse = new Response();
            try
            {

                    foreach (Record rec in fRequest.Records)
                    {
                        string personid = rec.PersonId;
                        int recordId = rec.RecordId;

                        EnrollRecord record = (from lst in listEnrolledCandidates
                                            where lst.PersonId == personid && lst.RecordId      == recordId
                                            select lst).FirstOrDefault();
                      lock (lockDelete)
                      {
                        listEnrolledCandidates.Remove(record);

                        int aIndex = record.ArraryIndex;  
                        pvTemplatesArrayList.RemoveAt(aIndex)                       

                      }
                    }

                    return fResponse;

            }
            catch (Exception ex)
            {

                return null;
            }

        } 
```

在上面的源代码中，锁被保留在 Remove 语句中。这意味着一次只有一个线程可以执行这三行代码。现在，如果一个线程（例如“A”）正在执行这 3 行，而另一个线程（例如“B”）使用另一个 Request 参数调用“Delete”方法，线程 A 是否有可能在执行时获取 EnrollRecord、personid 和recordid 的更新值作为 Request 对象的操作不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T06:27:03.617

是的，这似乎是完全可能的，所以`EnrollRecord record = (from lst in listEnrolledCandidates where lst.PersonId == personid && lst.RecordId == recordId select lst).FirstOrDefault();`必须是关键部分的一部分并防止多线程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T06:46:21.273

我不认为'personId'和'recordId'会根据每个线程的执行而改变它们的值（这假设fRequest参数对于每个线程都是唯一的）

但是，“记录”可能会发生奇怪的事情。没有改变值，但是线程 A 获取它的值，然后线程 B 从列表中删除该值，因此它实际上不再存在。

任何“全局”或共享变量都需要在多线程情况下对其访问进行同步。

我会将列表访问权限移到锁内。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T10:19:52.083

*   不，线程 B 不会更改线程 A 的`recordid and`personid值`
*   不，线程 B 不会更改线程 A 对 的*引用*，但如果线程 B 都引用同一个对象，则`record`线程 B 可以更新对象的*内部**状态`EnrollRecord`*`EnrollRecord`。
*   不过，最重要的是，您的方法可能不是线程安全的：

**编辑：**

我不允许发表评论，因此在您的其他评论中澄清您的问题：

> 但是“EnrollRecord 记录”将被视为线程 A 上下文中的本地对象。A 将包含它自己的副本，线程 B 将包含它自己的副本。难道不是

这可能不是这种情况，理解这一点很重要。`EnrollRecord`，我假设，是一个类。因此它是一个引用类型。每个线程都可以通过 引用同一个对象`record`，但它的引用变量`record`在线程之间是不共享的。正如您的代码所代表的那样，每个线程都不会创建`EnrollRecord`. 例外情况是，例如，您的 linq 查询导致发生 sql 查询，并且您的数据提供者允许在内存中创建对象的重复副本。我假设情况并非如此，因为您正在使用锁来保护您的删除，这表明为`listEnrolledCandidates`.

**结束编辑，继续原始答案：**

要使此方法线程安全，您可能还需要使用锁保护以下行：

```
EnrollRecord record = (from lst in listEnrolledCandidates
                                        where lst.PersonId == personid && lst.RecordId      == recordId
                                        select lst).FirstOrDefault(); 
```

## 为什么？

我将尝试将您的问题分解为各个部分，并逐一回答：

1.  一次只有一个线程可以执行锁内的 3 行
2.  线程 A 是否有可能在执行操作时获取以下更新值，因为 Request( `fRequest`) 对象不同：
    *   `EnrollRecord`
    *   `personid`
    *   `recordid`

因此，我们将从您的陈述中假设“由于 Request ( `fRequest`) 对象不同”，您的意思是：Request ( `fRequest`) 对象是单独创建的，因此它不是线程 A 和 B 之间可以共享的引用。

把它放在一起：

> 一次只有一个线程执行锁定块中的 3 行。

`personid`我知道这不是一个问题，但最初澄清这一点很重要，因为它有助于理解为什么`recordId`线程 A 不会被线程 B 更新。

任意数量的线程都可以进入一个方法，但您需要记住该方法访问的对象的*范围*。您几乎可以将编写的方法描绘为“蓝图”，当线程进入一个方法时，它会从该蓝图创建一个物理构造。每个线程都有自己的物理构造。将蓝图视为汽车的设计。你和我可能驾驶相同品牌、型号、年份、颜色的汽车，但你不会在我开车时坐在我的腿上，当你更换电台时，我的电台不会改变 - 我们每个人都有我们自己的副本。

在您的示例中：

1.  `string personid`作用域为方法，因此它的值特定于调用此方法的线程。
2.  这同样适用于`int recordId`
3.  `EnrollRecord record`也适用于该方法，因此`record`您在线程 A 中引用的 不能由`record`线程 B更新。

但是，`record`是*[引用类型](http://msdn.microsoft.com/en-GB/library/490f96s2.aspx)*，不像`int`是*[值类型](http://msdn.microsoft.com/en-gb/library/s1ax56ch.aspx)*。这个非常重要。`record`是对对象的*引用*。它被限定在一个方法内。因此，每个线程可能持有对同一对象或不同对象的引用。如果一个线程改变了它的引用，它不会影响另一个线程，但是如果他们改变了引用对象中的某些东西（参见下面的**其他点**），那么两个线程都会看到这个变化。

如果其中任何一个是类字段而不是方法变量，那么一个线程可以更改另一个线程看到的值/引用。

## 引用类型与值类型

**值类型**：如果线程 A 更新变量 recordId，线程 B 将看不到这个。如果 recordId 在类级别被声明为一个字段（例如 private int recordId），而不是在方法级别声明为变量，那么情况就不是这样了——任何线程都可以访问该值并且可以阅读和更新它。要理解为什么会这样，您需要研究堆栈和堆存储之间以及变量范围的区别。带回家：在方法中声明和使用的值类型（大多数情况下）不能被运行相同方法的其他线程访问。

**引用类型** - 如果线程 A 将值设置`record`为带有 (`PersonId`为 (1, 1) 的 ( ,`RecordId`，然后线程 B 将其设置为对应于 (2, 2) 的记录，那么线程 A 仍然会引用 (1, 1）。- 如果线程 A 将值设置为 (1, 1) 的 ( , )`record`记录，然后线程 B 将其设置为 (1, 1) 对应的记录，那么线程 A 仍会引用 (1, 1) , 线程 B 也是如此。`PersonId``RecordId`

## 锁

所以，是的，一次只有一个线程可以进入锁定区域，但您不需要锁定来保护本地声明的变量。需要锁来保护共享状态，而不是线程本地的变量。如果不是这种情况，我们将无法从多个线程运行以下方法并获得正确答案：

```
public int MinusOne(int value) { 
    int newValue = value - 1; 
    return newValue; 
} 
```

# 你的问题最重要的一点

问题中最重要的部分是你实际上没有问的问题。问题是： ***这个方法是线程安全的吗***

当我看到您的代码时，答案必须是：***否***

为了回答您的问题，我必须假设这`listEnrolledCandidates`是对类型列表的共享引用`IEnumerable<EnrollRecord>`。我还必须假设，因为您使用锁定从该列表中删除记录，所以它不是线程安全的集合/列表/字典。

这很关键：您正在锁定，因此线程 B 无法尝试从`listEnrolledCandidates`线程 A 删除记录，但在以下情况下会发生什么情况：

情景 1。

*   `record`线程 A在其范围内设置引用
*   线程B开始枚举`listEnrolledCandidates`查找记录
*   线程A删除记录
*   线程 B 完成枚举

情景 2。

*   线程 A 将引用设置为`record`对应于搜索键 (1, 1)
*   线程 B 将引用设置为`record`对应于搜索键 (1, 1)
*   线程 A 现在删除记录
*   线程 B 现在删除记录

在这两种情况下，您最终都可能遇到问题。如果您使用的是非线程安全的集合、列表、字典，则必须保护搜索、枚举、循环以及添加、删除、更新等。出于这些目的，您可以积极使用`lock`，也可以使用 ReaderWriterLock (或相同的苗条版本）。

在第二种情况下，您还想在进入删除锁定区域时再次检查该记录是否仍然存在，以防 Remove 引发`record`不再在集合中的异常。

## 其他要点

假设您在`EnrollRecord`诸如`public string EnrollYear { get; set; }`. 还假设线程 A 和线程 B 都引用(1 `PersonId`, `RecordId`1) 的 ( , )。- 如果线程 A 更改`EnrollYear`为`record`新值，则线程 B 将看到此更改。- 如果线程 A 设置`record`为`null`，那么线程 B 将不会看到记录为`null`，它仍然会看到保持其对记录的引用

在我们的汽车示例中：如果您调用我正在收听的广播电台（假设 RadioStation 是一个具有 CurrentSong 属性的对象）并请求一首新歌曲，您将更改我正在收听的歌曲。（我想我已经尽可能地采用了这个类比）。

*在此示例中，每个线程都拥有对**同一**对象的单独引用*

# mysql - 无法在 MySQL Workbench CE 5.2.47 上使用 mysqldump 转储我的数据库

> ID：15470833
> 
> 赞同：0
> 
> 时间：2013-03-18T06:23:38.760
> 
> 标签：mysql, mysqldump, mysql-workbench

我在 MySQL 上有一个生产数据库，带有 Windows 安装程序。

它已经安装了 MySQL Workbench CE 5.2.47 和 MySQL。

现在，我想启动 mysqldump 来备份我的生产数据库。mysqldump 位于 MySQL Workbench CE 5.2.47 目录中。

所以我启动了这个dos命令：

```
/mysqldump -udu -pdu mydatabase_prod > d:/test.sql

Version of mysql : mysqldump --version => 5.5.16. 
```

而且......开始......失败了我遇到了这个丑陋的错误：

mysqldump：无法执行“SET OPTION SQL_QUOTE_SHOW_CREATE=1”：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行 (1064) 的“OPTION SQL_QUOTE_SHOW_CREATE=1”附近使用正确的语法

我可以得到一个更早的 mysqldump.exe 吗？

为什么 mysqldump 比 MySQL 工作台版本旧？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-16T16:17:47.063

如果您安装了 mysql-server，您会在该安装文件夹的 bin 中找到所有简洁的工具：C:\Program Files\MySQL\MySQL Server 5.6\bin

在这里，您将找到“mysqldump.exe”，它将生成其工作台独立 *.sql-dump。您必须在工作台中设置转储程序：编辑 -> 首选项 -> 管理员。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-31T13:52:53.853

在这里找到了一个解决方案（它也适用于 Windows）：[MySQL server 5.6 + MySQL WorkBench 5.2.47 = dump error under OSX](http://www.renderwarrior.com/2013/02/mysql-server-5-6-mysql-workbench-5-2-47-dump-error-under-osx-mysqldump-couldnt-execute-set-option-sql_quote_show_create1/#comment-428)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T08:28:57.923

您的服务器也带有一个 mysqldump 工具。如果您想手动完成转储，请使用它来完成转储。但是，您可以让 Workbench 为您进行转储（请参阅管理部分）。

# .net - 如何确保窗口中所有文本框的内容不为空？使用 ForEach 语句

> ID：15470841
> 
> 赞同：0
> 
> 时间：2013-03-18T06:24:10.433
> 
> 标签：.net, wpf, vb.net, foreach

我想在 vb.net 和 wpf 中对文本框进行身份验证，确保在我将它们的内容提供给数据库之前它不包含空值，我正在考虑使用 for...each 语句，但它在 wpf 中不起作用。这里是我的代码。

```
for Each txt as Control in window.controls
  if typeof is Textbox Then
    if txt.text = "" Then
      MsgBox("Complete the blank Properties")
      exit sub
    end if
  end if
next 
```

此代码不起作用，我收到错误消息：“窗口是一种类型，不能用作表达式”

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T06:38:36.863

```
 if txt.text = "" Then 
```

改成

```
 if txt.text is nothing Then 
```

否则，如果您不想使用代码，您可以尝试使用错误提供程序工具。然后写这段代码

```
If (String.IsNullOrEmpty(textbox1.Text)) Or (String.IsNullOrEmpty(textbox2.Text)) Then
                ErrorProvider1.SetError(textbox1, "This is a require field")
                ErrorProvider1.SetError(textbox2, "This is a require field, fill in with 4 digits") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T06:45:41.750

您的窗口未命名为窗口。将窗口的*变量名*而不是通用 Window 放在 foreach 循环中。也许这是您的窗口类的方法？尽管那会很不幸而且不是最好的设计，但您甚至可以省略名称而只写

```
for each txt as Control in yourwindowsvariablename.Controls 
```

或者

```
for each txt as Control in Controls 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T06:47:20.590

如果代码与控件的格式相同（.net 窗口），请`Me.Controls`使用`window.Controls`. 如果不检查`window`实际是一个变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T12:55:48.057

嘿伙计们，我终于解决了这个问题，非常感谢您的建议。

这只是一个函数，您调用它来循环遍历网格中的所有文本框并确保它们不为空，您调用该函数并将网格的名称作为参数传递。

干杯!

```
public function AuthenticateTextBoxes(Byref G as Grid)
For i as int32 = 0 to (G.Children.count - 1)
  if G.Children.Item(i).GetType = GetType(TextBox) Then
     Dim txt as Textbox = CType(G.Children.Item(i),TextBox)
       if string.IsnullOrWhitespace(txt.text) Then
         MsgBox("Fill In the required fields")
       End if
  End if
Next 
```

# ibm-midrange - 如何创建 RPG IV 以从 DB2 插入和检索数据

> ID：15470846
> 
> 赞同：0
> 
> 时间：2013-03-18T06:24:40.813
> 
> 标签：ibm-midrange, rpgle

我是 AS/400 的新手，熟悉数据描述规范 (DDS) 语句。我有两个使用数据描述规范创建的表。

我需要编写两个 RPGLE 程序来从这些表中插入和检索。

**帝皇档案**

```
 REF(HRFREF)      
         R EMPR                                       
           EMPID     R               REFFLD(IDNO)     
           NAME      R                                
           DOB       R                                
           STS       R                                
         K EMPID 
```

**部门文件**

```
 REF(HRFREF)  
         R DEPTR                                  
           DEPTID    R               REFFLD(DEPID)
           DEPNM     R                            
           STS       R                            
         K DEPTID 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T12:11:31.667

在没有实际为您完成工作的情况下，这里有一些东西可以帮助您入门。不过，我同意其他答案。你真的需要进入程序员指南和参考手册。然而，我也明白，如果你是从这里来的，没有任何 RPG IV 知识，那可能会令人生畏。

下面的示例在 RPG 中使用直接文件访问，并且仅适用于一个文件。使用此技术时，这两个文件可以被同等对待。

看第一行，这是一个 F-spec。它用于直接文件访问以声明您的文件并声明您将如何使用它。在示例中，我将其声明为外部描述、可更新、完整程序、键控和磁盘上的。其他一切都是自由形式的。

```
Femppers   uf a e           k disk

 /free
  //Read from EMPPERS file with a given employee id.  Change
  //the status and update it.
  EMPID = 12345;  //assuming EMPID is numeric 5,0.
  Chain (EMPID) Emppers;
  If %Found();
    STS = 'A';    //Assuming STS is a 1-byte alpha
    Update Empr;  //Update the record format, not the file.
  EndIf;

  //Add a new record to EMPPERS:
  EMPID = 45678;
  NAME = 'John Doe';
  DOB = Date('1980-01-01':*ISO);
  STS = 'A';
  Write Empr;   //Write to the record format, not the file.

  *INLR = *On;  //Tell the program that it's okay to end.
                //Note: *INLR doesn't actually end the program,
                //      it just says that it's OKAY to end.
 /end-free 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T06:54:48.917

RPG 支持对数据库的直接（文件）和 SQL 操作。

由于您参考了 DDS，我假设您对基于文件的访问更感兴趣。

有许多[文件操作](http://pic.dhe.ibm.com/infocenter/iseries/v7r1m0/topic/rzasd/sc092508772.htm#filop)可用于访问数据库。

有关详细信息，请参阅在线文档。

*   [ILE RPG 程序员指南](http://pic.dhe.ibm.com/infocenter/iseries/v7r1m0/topic/rzahg/rzahgrpgprog.htm)
*   [ILE RPG 语言参考](http://pic.dhe.ibm.com/infocenter/iseries/v7r1m0/topic/rzahg/rzahgrpglangref.htm)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T18:55:27.020

对于似乎最简单的路径，JamesA 和 Buck 给出了很好的答案，使用我们称之为原生 I/O 的方式，因为它是 RPG 语言的原生方式。

如果我没有向您指出这些天通常被认为是推荐的解决方案，我会感到失职。

一般来说，**我们应该**在 RPG 中为我们的数据文件 I/O 使用嵌入式 SQL。无论您的文件是使用 DDS 还是 SQL (DDL) 创建的，都是如此。SQL

您可以查看[IBM i 信息中心](http://pic.dhe.ibm.com/infocenter/iseries/v7r1m0/index.jsp?topic=%2Frzahg%2Ficmain.htm)：

*   DB2 for i [SQL 参考](http://pic.dhe.ibm.com/infocenter/iseries/v7r1m0/index.jsp?topic=%2Fdb2%2Frbafzintro.htm)
*   DB2 for i [Embedded SQL Programming -（主要内容）](http://pic.dhe.ibm.com/infocenter/iseries/v7r1m0/index.jsp?topic=%2Frzajp%2Frzajpkickoff.htm)，[（ILE RPG 细节）](http://pic.dhe.ibm.com/infocenter/iseries/v7r1m0/index.jsp?topic=%2Frzajp%2Frzajprpgi.htm)
*   DB2 for i [SQL 编程](http://pic.dhe.ibm.com/infocenter/iseries/v7r1m0/index.jsp?topic=%2Fsqlp%2Frbafykickoff.htm)
*   DB2 for i [SQL 消息和代码](http://pic.dhe.ibm.com/infocenter/iseries/v7r1m0/index.jsp?topic=%2Frzala%2Frzalakickoff.htm)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-06T15:27:41.637

这是一个奇怪的问题。它需要三个 RPG 源代码行来创建一个完整的程序来将记录写入文件（F-spec、WRITE op-code、设置 LR）和三个用于读取记录的程序。问题中缺少需要对数据执行的操作的详细信息。

# ruby-on-rails - RubyOnRails rake db:create - 错误 rake 中止

> ID：15470851
> 
> 赞同：0
> 
> 时间：2013-03-18T06:25:13.400
> 
> 标签：ruby-on-rails, rake

当我运行 run rake db:create 时，我收到以下错误语句：

```
[root@mite-wendy: /Users/wendy/blog2] rake db:create
(in /Users/wendy/blog2)
rake aborted!
no such file to load -- bundler/setup
/Users/wendy/blog2/Rakefile:5:in `require'
(See full trace by running task with --trace) 
```

[root@mite-wendy: /Users/wendy/blog2] rake db:create --trace (in /Users/wendy/blog2) rake 中止！没有要加载的文件——bundler/setup /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rubygems/custom_require.rb:31:in `gem_original_require' /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rubygems/custom_require.rb:31:in`require' /Users/wendy/blog2 /config/boot.rb:6 /Users/wendy/blog2/config/application.rb:1:in`require' /Users/wendy/blog2/config/application.rb:1 /Users/wendy/blog2/Rakefile:5:in`要求' /Users/wendy/blog2/Rakefile:5 /System/Library/Frameworks/Ruby.framework/Versions/1.8 /usr/lib/ruby/1.8/rake.rb:2383:in `load' /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rake.rb:2383:in`raw_load_rakefile' /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rake.rb:2017:in `load_rakefile' /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rake.rb:2068:in`standard_exception_handling' /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rake.rb:2016:in `load_rakefile' /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rake.rb:2000:in`run' /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib /ruby/1.8/rake.rb:2068：`standard_exception_handling' /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rake.rb:1998:in`运行'/usr/bin/rake:31

`[root@mite-wendy: /Users/wendy/blog2] gem`列表

** 当地宝石 **

```
actionmailer (3.2.9)
actionpack (3.2.9)
activemodel (3.2.12, 3.2.9)
activerecord (3.2.9)
activerecord-mysql-adapter (0.0.1)
activeresource (3.2.9)
activesupport (3.2.12, 3.2.9)
akami (1.2.0)
archive-tar-minitar (0.5.2)
arel (3.0.2)
builder (3.0.4)
bundler (1.3.4)
coffee-rails (3.2.2)
coffee-script (2.2.0)
coffee-script-source (1.6.1)
columnize (0.3.6)
erubis (2.7.0)
execjs (1.4.0)
gyoku (1.0.0)
hike (1.2.1)
httpi (2.0.2)
i18n (0.6.4)
journey (1.0.4)
jquery-rails (2.2.1)
json (1.7.7)
linecache19 (0.5.13)
mail (2.4.4)
mime-types (1.21)
multi_json (1.7.0)
mysql (2.9.0)
mysql2 (0.3.11)
nokogiri (1.5.6)
nori (2.0.3)
polyglot (0.3.3)
rack (1.4.5)
rack-cache (1.2)
rack-ssl (1.3.3)
rack-test (0.6.2)
rails (3.2.9)
railties (3.2.9)
rake (10.0.3)
rbx-require-relative (0.0.9)
rdoc (3.12.2)
ruby-debug-base19x (0.11.30.pre10)
ruby-debug-ide (0.4.17.beta14)
ruby_core_source (0.1.5)
rubygems-update (2.0.3)
sass (3.2.7)
sass-rails (3.2.6)
savon (2.1.0)
sprockets (2.2.2)
sqlite3 (1.3.7)
sqlite3-ruby (1.3.3)
thor (0.17.0)
tilt (1.3.6)
treetop (1.4.12)
tzinfo (0.3.37)
uglifier (1.3.0)
wasabi (3.0.0) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T06:45:39.863

尝试

```
bundle exec rake db:create 
```

# php - 检查 PHP exec / system 是否完成并调用函数

> ID：15470852
> 
> 赞同：1
> 
> 时间：2013-03-18T06:25:19.673
> 
> 标签：php, function, system, exec

```
system("convert -colorspace RGB -density 134.5 -quality 100 ".$result_path.DIRECTORY_SEPARATOR.$pdf." -channel rgba -alpha on PNG32:".$gen_folder_path.'PNG'.DIRECTORY_SEPARATOR.$baseName.".png",$genPopTxtResult);

checkSuccess($genPopTxtResult,'popTxt',$baseName.'.png'); 
```

上面的代码是使用 PHP 执行命令并使用输出结果进行检查。但是，php 在系统执行完成后不会触发 checkSuccess。相反，它只会在系统启动后触发，因此结果永远不会成功（系统功能未完成因此不正确）。

如何解决问题，以便仅在系统完成后调用 checkSuccess？谢谢。

# mongodb - 如何从“n”个服务器中识别 MongoDB 主服务器

> ID：15470853
> 
> 赞同：1
> 
> 时间：2013-03-18T06:25:34.493
> 
> 标签：mongodb, database

我们已经设置了 4 台服务器，我想知道哪一台作为主服务器以及它从其他服务器获得的票数。

我知道我可以[强制某个特定服务器充当主服务器](http://docs.mongodb.org/manual/tutorial/force-member-to-be-primary/)

**问题：**如何知道特定服务器在给定时间点是主服务器？

在[成员配置](http://docs.mongodb.org/manual/administration/replica-sets/#member-configurations)中，我们可以设置如下优先级：

```
cfg = rs.conf()
cfg.members[0].priority = 2
cfg.members[1].priority = 1
cfg.members[2].priority = 0.5
cfg.members[3].priority = 0
rs.reconfig(cfg) 
```

但仍然不能保证它将成为主服务器。[文档](http://docs.mongodb.org/manual/administration/replica-sets/#secondary-only-members)中的声明说“***在大多数情况下*****，成员 0 优先级为 2，因此它成为主要成员。 ”**

 *谁能知道我如何才能了解我当前的主服务器？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T07:53:57.827

如果您想知道在任何给定时间哪个节点是主节点，那么`rs.isMaster().primary`您需要的命令。它可以在副本集中的任何节点上运行。*

# c# - 对于变量中的每个列表框项

> ID：15470858
> 
> 赞同：0
> 
> 时间：2013-03-18T06:25:44.863
> 
> 标签：c#, foreach, listbox

不知何故，我今天早上似乎失明了；）我有以下代码[1]，它确实从 ListBox 中读取了对象集合。使用字符串 bi 可以“检索”字符串

在 b 中有存储的文件名和目录路径，我想用 xcopy 代码 [2] 进行备份。

代码：

```
private void btnBenutz_Click(object sender, EventArgs e)
{
    lblAusgabe2.Text = "";
    ListBox.ObjectCollection a = listBox1.Items;
    foreach (string x in a)
    {
        b = x;
        lblAusgabe2.Text += "\n" + b;
    }
} 
```

更多代码：

```
 Process.Start("XCOPY.EXE", "/E /I /Y" + b + pfadauswahl + "\\Backup\\" + dt.ToString("yyyy-MM-dd") + "\\UserData\\"); 
```

我如何将 b 用作我可能必须使用的数组？否则只会读出第一项？此外，我必须在 btnBenutz 之外使用进程启动...所以必须在公共部分类 Form2 中初始化一些变量：Fo​​rm

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T07:58:43.543

定义`b`为`List<string>`。您还可以使用更好的名称，例如`fileNameList`：

```
private List<string> fileNameList; // a class field, not a local variable 
```

然后将文件名添加到列表中：

```
private void btnBenutz_Click(object sender, EventArgs e)
{
    lblAusgabe2.Text = "";
    ListBox.ObjectCollection a = listBox1.Items;
    foreach (string x in a)
    {
        fileNames.Add(x);
        lblAusgabe2.Text += Environment.NewLine + x; // Why are you doing this?
    }
} 
```

然后在另一个地方，`xopy`为每个文件运行命令：

```
foreach(string fileName in fileNameList)
{
    Process.Start("XCOPY.EXE", "/E /I /Y " + fileName + pfadauswahl + "\\Backup\\" + dt.ToString("yyyy-MM-dd") + "\\UserData\\");
} 
```

如果这就是你想要达到的目标！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T06:31:55.010

```
private void btnBenutz_Click(object sender, EventArgs e)
{
    var sb = new StringBuilder();
    foreach (string x in listBox1.Items)
    {
        sb.Append("\n" + x);
    }
    // then use sb.ToString() somewhere...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T06:35:43.733

正如您评论的那样，您想从其他地方调用它也像另一个按钮单击然后做这样的事情：

1) 在类级别声明字符串列表

```
 List<string> fileNameList ; 
```

2）用一些有意义的名字创建一个函数让我们说 StartXcopy 如下

```
public void StartXcopy()
{
       ListBox.ObjectCollection a = listBox1.Items;
       fileNameList = new List<string>();
       foreach (string x in a)
       {
            fileNameList.Add(x);
            lblAusgabe2.Text += "\n" + x;
       }

       foreach (string filename in fileNameList)
       {
           System.Diagnostics.Process.Start("XCOPY.EXE", "/E /I /Y" + filename  + pfadauswahl + "\\Backup\\" + dt.ToString("yyyy-MM-dd") + "\\UserData\\");
       }
} 
```

3）然后从你想要的地方调用这个函数，就像下面的按钮点击

```
 private void btnBenutz_Click(object sender, EventArgs e)
 {
      lblAusgabe2.Text = "";
      StartXcopy(); 
 } 
```

**注意**：这里我假设您总是遍历 listBox1 项目。

# php - preg_match 中的正则表达式和模式 - PHP 适合 123-23-345

> ID：15470861
> 
> 赞同：6
> 
> 时间：2013-03-18T06:26:08.297
> 
> 标签：php, regex, preg-match

我不太擅长找到正确的正则表达式自动化来生成不同的表达式，但是当涉及到 PHP 中的脚本时，这让我很头疼。我无法证明自己能够在 preg_match 中编写一个“适合”表达式的模式，例如：123-23-345...123-34-456....12-234-56.....应该是3组数字，其中每组，个体从左到右排序，并且每个下一组没有一个数字大于前一组的最大数字。这：123-23-456 是错误的，因为 23 中的 2 小于 123 中的 3。123-43-45 再次错误，因为 43 应该是 34...

这应该可以帮助我验证可能只有该类型内容的字段。它应该是一个正则表达式验证，而不是一个用于解析、拆分的函数......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T12:25:54.153

好吧，我认为不会有纯正则表达式的解决方案。所以在这里我编写了你需要的函数：

```
function isValidDigitExpression($string) {
    $flag = preg_match('/^(\d+)\-(\d+)\-(\d+)$/', $string, $matches);
    if (!$flag) return false;

    // Check correct sorting by splitting digit string to array
    for ($i = 1; $i <= 3; $i++ ) {
         $block[$i] = str_split($matches[$i]);
         $compare = $block[$i];
         sort($compare);
         if ($compare != $block[$i]) return false;
    }

    // Compare Min and Max digits of neighboring digit blocks
    return (max($block[1]) <= min($block[2]) and max($block[2]) <= min($block[3]));
}

$string = "123-34-356"; // Failure, because 3 < 4 comparing Block 2 and Block 3
echo isValidDigitExpression($string) ? "SUCCESS" : "FAILURE"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T06:55:58.027

`preg_`您还需要使用其他一些条件匹配，而不是仅使用函数。

```
<?php
  $str = "123-34-456";
  preg_match( "/^.*?(\d)\-(\d).*?(\d)\-(\d)/", $str, $matches );
  $flag = true;
  if( $matches[2] < $matches[1] )
      $flag = false;
  if( $matches[4] < $matches[3] )
      $flag = false;
  echo ( !$flag ) ? "ERROR" : "NO ERROR";
?> 
```

同样，您可以匹配各个部分中的数字，遍历所有文字并再次使用标志来处理不匹配的值。

像这样的东西：

```
<?php
  $str = "132-34-456";
  preg_match( "/^(\S+)\-(\S+)\-(\S+)$/", $str, $matches );
  $flag = true;
  for( $i = 0; $i < strlen($matches[1]) - 1; $i++ ) {
      if( $matches[1][$i+1] < $matches[1][$i] ) {
          $flag = false;
          break;
      }
  }
  for( $i = 0; $i < strlen($matches[2]) - 1; $i++ ) {
      if( $matches[2][$i+1] < $matches[2][$i] ) {
          $flag = false;
          break;
      }
  }
  for( $i = 0; $i < strlen($matches[3]) - 1; $i++ ) {
      if( $matches[3][$i+1] < $matches[3][$i] ) {
          $flag = false;
          break;
      }
  }
  echo ( !$flag ) ? "ERROR" : "NO ERROR";
?> 
```

显然，这不是解决方案中最好/最优化的。

# node.js - 在强大的节点中取消文件上传时出错

> ID：15470866
> 
> 赞同：1
> 
> 时间：2013-03-18T06:26:32.810
> 
> 标签：node.js, request-cancelling, formidable

我正在使用 Formiable-node 来上传文件。尝试取消上传时出现以下错误。

```
[Error: Request aborted]

events.js:71
    throw arguments[1]; // Unhandled 'error' event
                    ^
Error: EBADF, write 
```

我的代码如下所示。

```
on('field', function (name, value) {
        if(handler.req.method == "POST" && name == "customData")
        {
            var validationObject = JSON.parse(value);
                       //This is query to the db to check authorization.
            when(security.secure(validationObject.userId, validationObject.message, validationObject.hash),
                function(secureData){
                    var message = JSON.parse(validationObject.message);
                    var validTime = new Date(message.time);
                    if(validTime >= new Date())
                    {
                        options.uploadDir = __dirname + '/public/files/'+validationObject.id ;
                    }
                    else
                    {
                        handler.req.connection.destroy();
                    }
                },
                function(err){
                    handler.req.connection.destroy();
                });
        } 
```

我也在使用[https://github.com/blueimp/jQuery-File-Upload/blob/master/index.html](https://github.com/blueimp/jQuery-File-Upload/blob/master/index.html) ，它使用强大的后端之一。

谢谢。

# android - Android：包解析错误

> ID：15470867
> 
> 赞同：-3
> 
> 时间：2013-03-18T06:26:34.513
> 
> 标签：android

我有一个三星 Galaxy Tab 2，它用 Jelly Bean 更新并植根。我将我的应用程序复制并粘贴到系统/应用程序文件夹中，并尝试通过从该文件夹中点击它来安装应用程序，但我收到“包解析错误”。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T06:48:26.237

这意味着创建的 apk 中有一些错误。这是你写的apk吗？如果是这样，

1.  您能否检查清单是否遵循 [指南中定义的结构](http://developer.android.com/guide/topics/manifest/manifest-intro.html)
2.  您可以尝试在模拟器或其他手机中运行它，看看它是否重现，只是为了确保它不是当前手机的问题。有关错误的更多详细信息有助于识别问题。
3.  您是否重命名了您的 apk 并使用以前的名称安装？检查一下： [“Parse Error : There is a problem parsing the package”安装Android应用程序时](https://stackoverflow.com/questions/1492401/parse-error-there-is-a-problem-parsing-the-package-while-installing-android)

# objective-c - iphone将数据添加到服务器并显示在tableView中

> ID：15470868
> 
> 赞同：0
> 
> 时间：2013-03-18T06:26:45.820
> 
> 标签：objective-c

我已经为此工作了几天，但一无所获。我将不胜感激这方面的任何帮助。

我正在创建一个从服务器获取数据（类似于笔记列表）的应用程序，并将其显示在表格视图中。

当用户想要在表格视图中显示/刷新数据时，用户点击刷新按钮。然后，我调用我的“refreshNote”方法，如下所示：（简单版本）

```
-(IBAction)refreshNote:(id)sender{
    NSString *getNoteCGI = @"http://....../get-notes.cgi";
    NSURL *url = [NSURL URLWithString:getNoteCGI];
    NSURLRequest *request = [[NSURLRequest alloc] initWithURL:url cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:60.0];
} 
```

连接成功后，我将检索到的每个便笺信息存储在 AppDelegate 文件中的“便笺”数组中。并且注释包含：

```
noteId (auto incremented id)
userId
timestamp
noteText 
```

到目前为止，它工作正常。但是，要添加新笔记，用户点击表格视图中的“添加”按钮。通过点击“添加”按钮，应用程序移动到一个视图控制器，该控制器显示 userId 和 noteText 的文本框。当点击视图控制器中的“发送”按钮时，我正在调用以下方法：

```
-(IBAction)send:(id)sender{
    NSString *userId = self.userIdTextField.text;
    NSString *note = self.noteTextField.text;
    Note *note = [[Note alloc] init];
    note.userId = userId;
    note.note = note;
    NSString *addCGI = @"http://......../add-note.cgi";
    NSURL *rul = [NSURL URLWithString:addCGI];
    NSURLRequest *request = [[NSURLRequest alloc] initWithURL:url cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:60.0];
    addConnection = [[NSURLConnection alloc] initWithRequest:request delegate:self startImmediately:YES];

    if(addConnection){
        AppDelegate *appDelegate = [[UIApplication sharedApplication] delegate];
        [appDelegate.notes addObject:newNote];
    }else{
        return;
    }   
} 
```

这种成功地向表格视图添加了一条新推文，但它没有正确显示`noteId`and ，`timestamp`因为我只是将`userId`and添加`noteText`到`notes`数组中。

那么我应该在向服务器添加新注释后立即刷新表格视图吗？这是我唯一需要做的吗？我完全迷失了，不确定我是否走在正确的轨道上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T07:00:06.057

如果在服务器端添加`noteId`& （没有问题）**并且**如果您通过上述代码成功地从服务器检索数据；**那么你应该**`timestamp`

 ****1.  首先将数据发布到服务器
2.  成功完成发布请求后，再次从服务器获取数据
3.  成功获取数据后，您应该使用最新数据重新加载表

所以，**是**的，你的想法是正确的。****

# iphone - 在 iOS 应用中加载 http://www.google.com 网址时出现问题

> ID：15470871
> 
> 赞同：1
> 
> 时间：2013-03-18T06:27:06.270
> 
> 标签：iphone, objective-c, xcode

我在我的第一个 iOS 应用程序（大约 3 年前）中使用以下代码检查互联网连接。

```
NSError *err = nil;
NSStringEncoding encoding;

NSString * connectionstring = [[NSString alloc] initWithContentsOfURL:[NSURL URLWithString:@"http://www.google.com"] usedEncoding:&encoding error:&err];

if(connectionstring.length ==0)
{
    UIAlertView * alert = [[UIAlertView alloc] initWithTitle:@"Error Occured" message:@"No Internet Connection." delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
    [alert show];
    [alert release];
}
else
{
    // loading another screen
} 
```

问题出在印度和美国，它进入**else 条件**，但在**比利时**，它进入**if 条件**并抛出错误。那么在比利时对谷歌有什么限制吗？

如果标记不正确，请指导我。在我当前的版本中，通过使用 Rechability 类来检查这个问题来解决这个问题。只是我想知道它。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T07:11:43.577

与其使用 google.com，不如使用任何本地客户端服务器测试 url 进行互联网检查，与任何其他互联网验证方式相比，它的响应速度也非常快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T06:47:11.190

第一步，查看编码。

您可以在通过插入创建连接字符串后立即记录编码

```
NSLog(@"encoding: %@", [NSString localizedNameOfStringEncoding:encoding]); 
```

进入你的代码。

为了进一步调试，您可以尝试先将 url 加载到 NSData 对象中，然后检查数据，最后从数据中创建 NSString。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T06:47:33.103

替代解决方案：检查互联网连接使用苹果提供的可达性类。下载 Apple Sample [Here](http://developer.apple.com/library/ios/samplecode/Reachability/Reachability.zip)，将 Reachability 类添加到您的项目中。

```
- (BOOL)isConnected
{
    Reachability *reachability = [Reachability reachabilityForInternetConnection];
    NetworkStatus networkStatus = [reachability currentReachabilityStatus];
    return !(networkStatus == NotReachable);
} 
```

# vb.net - 关闭应用程序后vb.net数据未保存sql紧凑数据库

> ID：15470874
> 
> 赞同：0
> 
> 时间：2013-03-18T06:27:29.480
> 
> 标签：vb.net, sql-server-ce

我做了一个小应用程序，将插入数据保存到表中......

应用程序关闭后应用程序不保存数据..

谁能告诉我代码中有什么问题。

```
Imports System.Data
Imports System.Data.SqlServerCe

Public Class Form1

Public connstring As New String("Data Source=|DataDirectory|\test_db.sdf")
Public sqlconn As New SqlCeConnection(connstring)

Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    Dim name As New String("jaifar")
    Dim myCommand As New SqlCeCommand("Insert Into table1 (id) Values('" + name + "')", sqlconn)
    If sqlconn.State = Data.ConnectionState.Closed Then sqlconn.Open()
    myCommand.ExecuteNonQuery()
    Me.Table1TableAdapter.Fill(Me.Test_dbDataSet1.table1)
End Sub

Private Sub Form1_FormClosed(ByVal sender As Object, ByVal e As System.Windows.Forms.FormClosedEventArgs) Handles Me.FormClosed
    sqlconn.Close()
    sqlconn = Nothing
End Sub

Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    'TODO: This line of code loads data into the 'Test_dbDataSet1.table1' table. You can move, or remove it, as needed.
    Me.Table1TableAdapter.Fill(Me.Test_dbDataSet1.table1)

 End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-07T15:45:39.777

有几种方法可以解决这个问题：

1.  如果您在解决方案资源管理器窗口中选择本地数据库文件，您将在“属性”窗口中看到一个名为“复制到输出”的属性。默认情况下，它设置为“始终复制”，这意味着在每次构建时，项目文件夹中的数据文件将被复制到输出文件夹，覆盖现有的数据文件（如果有）。您可以将此属性设置为“从不复制”，然后手动将数据文件的副本放在输出文件夹中。这样，在后续构建中，项目系统会将数据文件留在输出文件夹中，而不是尝试用项目中的文件覆盖它。缺点是您仍然有两个副本，因此在使用应用程序修改数据库文件后，如果您想处理项目中的这些更改，则需要手动将其复制到项目中，反之亦然。

2.  您可以将数据文件留在项目之外，并在 Database Explorer 中创建与它的连接。当 IDE 要求您将文件带入项目时，只需说不。这样，设计时和运行时都将使用相同的数据文件，但缺点是连接字符串中的路径将被硬编码，因此共享项目和部署应用程序将更加困难. 在部署应用程序之前，只需确保将设置中的完整路径替换为相对路径即可。

来源：[https ://arnulfo.wordpress.com/2007/07/21/visual-studio-and-local-databases/](https://arnulfo.wordpress.com/2007/07/21/visual-studio-and-local-databases/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-18T06:35:27.383

后

```
myCommand.ExecuteNonQuery() 
```

然后写

```
sqlconn.Close() 
```

因为，当你有写执行时，最好关闭它。您必须知道保存到数据集与数据库是不一样的。数据集在您的程序中是临时的，意味着仍然没有在数据库中获得更改。

而且，我们的+名称+价值在哪里？比如，mycommand.addwithvalue("name", value place)

# php - 如何从 html 表单操作中调用 php 函数？

> ID：15470876
> 
> 赞同：1
> 
> 时间：2013-03-18T06:27:34.220
> 
> 标签：php, html, mysql

我想在表单操作中调用 php 函数，并且我想将 id 作为参数传递。我正在做的是，在 html 表单中，数据库列值将显示在文本框中，如果我编辑这些值并单击“更新”按钮，数据库中的值应该被更新，并且“记录更新成功”消息应该显示在同一页面中。我尝试了下面的代码但没有工作。让我知道解决方案。提前致谢。

```
 <html>

    <head>

        <link rel="stylesheet" type="text/css" href="cms_style.css">        

    </head>

    <?php
        $ResumeID = $_GET['id']; 
        $con = mysql_connect("localhost", "root", "");
        mysql_select_db("engg",$con);
        $sql="SELECT * from data WHERE ResumeID=$ResumeID";
        $result = mysql_query($sql);
        $Row=mysql_fetch_row($result); 

        function updateRecord()
        {

            //If(!isset($_GET['id']))       
            //{
              $NameoftheCandidate=$_POST[NameoftheCandidate];
              $TelephoneNo=$_POST[TelephoneNo];
              $Email=$_POST[Email];

      $sql="UPDATE data SET NameoftheCandidate='$_POST[NameoftheCandidate]',         TelephoneNo='$_POST[TelephoneNo]', Email='$_POST[Email]' WHERE ResumeID=$ResumeID ";

            if(mysql_query($sql))
                echo "<p>Record updated Successfully</p>";
            else
                echo "<p>Record update failed</p>";

            while ($Row=mysql_fetch_array($result))     {
                echo ("<td>$Row[ResumeID]</td>");

                echo ("<td>$Row[NameoftheCandidate]</td>");
                echo ("<td>$Row[TelephoneNo]</td>");
                echo ("<td>$Row[Email]</td>");
            } // end of while

        } // end of update function

    ?>

    <body>
        <h2 align="center">Update the Record</h2>

        <form align="center" action="updateRecord()" method="post">
            <table align="center">
                <input type="hidden" name="resumeid" value="<? echo    "$Row[1]"?>">
            <? echo "<tr> <td> Resume ID </td>   <td>$Row[1]</td> </tr>" ?>                      

        <div align="center">
        <tr>       
        <td> Name of the Candidate</td>
    <td><input type="text" name="NameoftheCandidate" 
size="25" value="<? echo "$Row[0]"?     >"></td>
        </tr>

        <tr>
     <td>TelephoneNo</td>
    <td><input type="text" name="TelephoneNo" size="25" value="<? echo "$Row[1]"?>"></td>
     </tr>
     <tr>       
      <td>Email</td>
        <td><input type="text" name="Email" size="25" value="<? echo "$Row[3]"?>">
        </td>
    </tr>
     <tr>
    <td></td>
    <td align="center"><input type="submit" name="submitvalue" value="UPDATE" ></td>
                    </tr>
                </div>                              
            </table>
        </form>

      </body>
       </html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T06:32:48.083

试试这个方法

HTML

```
<form align="center" action="yourpage.php?func_name=updateRecord" method="post"> 
```

PHP

```
$form_action_func = $_POST['func_name'];

if (function_exists($form_action_func)) {
  updateRecord();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T06:41:10.160

编写表单 action="" 然后编写您的 php 代码，如下注：使用表单方法作为 get

```
<?php
if(isset($_GET['id']))
{
       call your function here
}
?> 
```

在函数中使用 $_GET['fieldname'] 访问所有值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T12:00:58.180

简单的方法使您的“提交”和“更新”操作在同一页面上执行然后

```
if(isset($_POST['update']))
{
 //perform update task
 update($var1,var2,$etc); // pass variables to function
 header('Location: http://www.example.com/');// link to your form
}
else if(isset($_POST['submit']))
{
//perform update task
submit($var1,$var2,$etc);// pass variables to function
header('Location: http://www.example.com/'); // link to next page after submit successfully 
}
else
{
// display form
} 
```

# matlab - MATLAB图形水平移位图

> ID：15470878
> 
> 赞同：1
> 
> 时间：2013-03-18T06:27:41.073
> 
> 标签：matlab, matlab-figure

我有一个图形（不使用 plot 命令），其中 xdata 存储为单元格数组（而不是矩阵）。我想要做的是水平移动绘图，这可以通过向 xdata 的每个元素添加一个常数值或在不影响绘图的情况下移动 x 轴来完成。

我不能这样做，并且非常感谢任何帮助。顺便说一句，我对 MATLAB 的了解非常有限。

这是我尝试过的，我似乎得到了一个错误： set(findobj('type', 'line', 'color', 'r',),'xdata', new)

其中“new”是另一个与“xdata”维度相同的元胞数组。但我不明白为什么这会导致错误：“无法转换为 double fromcell”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T08:44:48.863

首先，`get(findobj('type', 'line', 'color', 'r',),'xdata')`返回单元格数组的原因是您的图中有多条红色线条。如果您单击图形菜单中的白色箭头图标，选择其中一行并调用`get(gco,'xdata')`，您会看到`xdata`每一行的 -property 仍然是正常的数字数组。

为了设置图形对象列表的属性，您需要放入`xdata`大括号（请参阅[命令](http://www.mathworks.com/help/matlab/ref/set.html)[文档`set`](http://www.mathworks.com/help/matlab/ref/set.html)）：

```
 horizontalShift = 100;
 old = get(findobj('type', 'line', 'color', 'r',),'xdata');
 new = cellfun(@(x)x+horizontalShift,old,'UniformOutput',false);

 set(findobj('type', 'line', 'color', 'r',),{'xdata'}, new) 
```

# jquery - 动画 div 从右侧滑动

> ID：15470882
> 
> 赞同：0
> 
> 时间：2013-03-18T06:27:54.170
> 
> 标签：jquery, html, css, jquery-animate, css-float

我是网页设计的初学者。我在右侧有一个导航栏。我已经为 li 定义了类。我希望我所有的 li 动画并从右侧出现。

我无法做到这一点。需要一些帮助。我的html和css代码是。

```
<!doctype html>
<html>
<head>
<link rel="stylesheet" href="index.css">
<script src="jquery.js"> </script>
<script>
$(function(){
    $(".content-box-blue").animate({width:'350px'},1200);
    $(".content-box-gray").animate({width:'250px'},1200);
    $(".content-box-green").animate({width:'300px'},1200);
    $(".content-box-purple").animate({width:'400px'},1200);
    $(".content-box-red").animate({width:'200px'},1200);
    $(".content-box-yellow").animate({width:'250px'},1200);
});
</script>
<title>Demo</title>
</head>
<body>
<header>
</header>

<nav>
    <ul>
        <li class="content-box-blue"> </li>
        <li class="content-box-gray"> </li>
        <li class="content-box-green"> </li>
        <li class="content-box-purple"> </li>
        <li class="content-box-red"> </li>
        <li class="content-box-yellow"> </li>
    </ul>
</nav>

<footer>
</footer> 
```

li 的 CSS 代码是

```
ul {
list-style-type: none;
margin: 0;
padding: 0;
float: right;
}
li {
margin: 0; 
padding: 0;
margin-bottom: 20px;
}
nav {
float: right;
width: 400px;
height: 500px;
margin-top: 35px;
margin-right: 10px;
background-color: #ffffff;
}
.content-box-blue {
background-color: #00bfff;
border: 1px solid #afcde3;
height: 50px;
width: 0px;
margin-left: 50px;
border-top-left-radius: 8% 50%;
border-bottom-left-radius: 8% 50%;
}
.content-box-gray {
background-color: #FF69B4;
border: 1px solid #bdbdbd;
height: 50px;
width: 0px;
margin-left: 150px;
border-top-left-radius: 12% 50%;
border-bottom-left-radius: 12% 50%;
}
.content-box-green {
background-color: #3CB371;
border: 1px solid #b2ce96;
height: 50px;
width: 0px;
margin-left: 100px;
border-top-left-radius: 9% 50%;
border-bottom-left-radius: 9% 50%;
}
.content-box-purple {
background-color:#9370DB;
border: 1px solid #bebde9;
height: 50px;
width: 0px;
margin-left: 0px;
border-top-left-radius: 6% 50%;
border-bottom-left-radius: 6% 50%;
}
.content-box-red {
background-color: #FF0000;
border: 1px solid #e9b3b3;
height: 50px;
width: 0px;
margin-left: 200px;
border-top-left-radius: 13% 50%;
border-bottom-left-radius: 13% 50%;
}
.content-box-yellow {
background-color: #FFA500;
border: 1px solid #fadf98;
height: 50px;
width: 0px;
margin-left: 150px;
border-top-left-radius: 12% 50%;
border-bottom-left-radius: 12% 50%;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T06:33:19.777

`<li>`你可以在's上做一个浮动

这是一个[演示](http://jsfiddle.net/reigel/4kVxE/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T06:44:02.713

将所有更改`border-left-radius`为`right`半径并更改`float:left`为`right`

```
ul {
list-style-type: none;
margin: 0;
padding: 0;
float: left;
}
li {
margin: 0; 
padding: 0;
margin-bottom: 20px;
}
nav {
float: left;
width: 400px;
height: 500px;
margin-top: 35px;
margin-right: 10px;
background-color: #ffffff;
}
.content-box-blue {
background-color: #00bfff;
border: 1px solid #afcde3;
height: 50px;
width: 0px;
margin-right: 50px;
border-top-right-radius: 8% 50%;
border-bottom-right-radius: 8% 50%;
}
.content-box-gray {
background-color: #FF69B4;
border: 1px solid #bdbdbd;
height: 50px;
width: 0px;
margin-right: 150px;
border-top-right-radius: 12% 50%;
border-bottom-right-radius: 12% 50%;
}
.content-box-green {
background-color: #3CB371;
border: 1px solid #b2ce96;
height: 50px;
width: 0px;
margin-right: 100px;
border-top-right-radius: 9% 50%;
border-bottom-right-radius: 9% 50%;
}
.content-box-purple {
background-color:#9370DB;
border: 1px solid #bebde9;
height: 50px;
width: 0px;
margin-left: 0px;
border-top-right-radius: 6% 50%;
border-bottom-right-radius: 6% 50%;
}
.content-box-red {
background-color: #FF0000;
border: 1px solid #e9b3b3;
height: 50px;
width: 0px;
margin-right: 200px;
border-top-right-radius: 13% 50%;
border-bottom-right-radius: 13% 50%;
}
.content-box-yellow {
background-color: #FFA500;
border: 1px solid #fadf98;
height: 50px;
width: 0px;
margin-right: 150px;
border-top-right-radius: 12% 50%;
border-bottom-right-radius: 12% 50%;
} 
```

**[演示](http://jsfiddle.net/r4CVs/1/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T06:54:27.183

在您的样式表中添加以下 css。

`li{ clear:right; float: right; }`

# php - 使用 .htaccess 防止根目录被公共访问

> ID：15470883
> 
> 赞同：1
> 
> 时间：2013-03-18T06:27:54.647
> 
> 标签：php, .htaccess

我不知道这样的事情是否可行，但让我们试一试。在过去（三年多前），我在一个 MVC 教程中了解了这样的解决方案（不知道它到底是怎么回事）。

**目录结构**

*   网络根/
    *   包括/
    *   配置/
    *   上市/
        *   图片/
        *   js/
        *   css/
        *   索引.php
    *   初始化文件

**我想做的是**

当用户访问`http://www.mysite.com/a/b/c/`时，将所有请求重定向到`/public/index.php`页面。即，对网站的所有请求都将通过页面，`/public/index.php`除了和目录，它们位于.`images/``js/``css/``public/`

此外，`http://www.mysite.com/includes/`将重定向到`index.php`页面，并获取`includes/`为`$query`.

**Index.php 页面**

```
<?php

// get init file from webroot directory, which will load all required php files.
define ('ROOT', dirname(dirname(__FILE__)));
require_once (ROOT . 'init.php');

// get query from url (here, $query = "a/b/c/")
if(isset($_GET['q'])) {
    $query = $_GET['q'];
}

// insert images, css etc. resource
echo "<img src='http://www.mysite.com/images/foo.jpg' />";
echo "<script src='http://www.mysite.com/js/bar.js'></script>";

?> 
```

这对于使用 web 托管的人很有用，它不提供对 webroot 的一步目录访问。

**编辑**

好的，我找到了我得到这个概念的网站。查看根目录和公共目录中使用的两个 .htaccess 文件。[链接到 MVC 教程](http://anantgarg.com/2009/03/13/write-your-own-php-mvc-framework-part-1/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T07:11:59.173

我假设 .htaccess 在`WebRoot`.

要重写所有请求，您只需使用[`RewriteRule`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewriterule). 当你想排除一些路径时，你使用一个或多个[`RewriteCond`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewritecond)

```
RewriteEngine on
RewriteCond %{REQUEST_URI} !/images/
RewriteCond %{REQUEST_URI} !/css/
RewriteCond %{REQUEST_URI} !/js/
RewriteCond %{REQUEST_URI} !/public/index\.php
RewriteRule .* public/index.php?q=$0 [L,QSA]

RewriteRule ^images/.+ public/$0 [L]
RewriteRule ^js/.+ public/$0 [L]
RewriteRule ^css/.+ public/$0 [L] 
```

该标志[`QSA`](http://httpd.apache.org/docs/current/rewrite/flags.html#flag_qsa)将任何其他现有查询字符串作为参数附加到`index.php`. 如果您不想附加任何现有的查询字符串，只需保留该`QSA`标志即可。

如果您希望重写对客户端可见，则必须将[`R`](http://httpd.apache.org/docs/current/rewrite/flags.html#flag_r)标志添加到`RewriteRule`, 即`[R,L,QSA]`或`[R,L]`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T07:15:56.007

您可以使用其他技巧，您的页面不会重定向到另一个页面，但您会限制其他用户查看目录索引

```
Options -Indexes 
```

在您的文件中添加此文本`.htaccess`，它将生成 403 错误（禁止）

# iphone - 将 iPhone 摄像头用作 PC 上的网络摄像头

> ID：15470884
> 
> 赞同：0
> 
> 时间：2013-03-18T06:27:54.770
> 
> 标签：iphone, ios, objective-c, camera, webcam

我想以编程方式将 iphone 相机用作 PC 上的网络摄像头。这可能吗 ？如果可能的话，任何人都可以建议我任何例子，或者给我一些关于如何继续前进的想法。

谢谢阿布舍克

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T06:37:11.380

这就是我可以想象的故事（对不起，实现起来并非易事，但至少它肯定是可能的）：

1.  使用 AVFoundation 和 CoreVideo 框架从设备捕获实时视频数据；
2.  打开一个 TCP/IP 连接（您可以使用原始 BSD 套接字`CFNetwork`等）并通过该连接流式传输视频数据；
3.  编写一个在 PC 上运行的客户端应用程序，接收数据并在屏幕上重建它（例如）。有各种库可以完美地用于媒体播放……如果你使用 Linux，你也可以制作一个内核模块，或者如果你使用 Windows，你可以制作一个驱动程序，让你的客户端应用程序伪装成一个网络摄像头。

# javascript - 三星智能电视应用程序可以在所有 IPTV 上运行吗？

> ID：15470886
> 
> 赞同：0
> 
> 时间：2013-03-18T06:28:04.210
> 
> 标签：javascript, samsung-mobile, samsung-smart-tv, iptv

我正在为所有 IPTV 寻找一个通用 IDE (SDK) 来创建我的应用程序，该应用程序可以在所有 IPTV 和智能电视上运行，并带有触摸和非触摸交互手势。因此，需要询问使用 Samsung Sdk for Smart TV 创建的应用程序是否可以在 IPTV 的所有第三供应商上运行。我遇到了一个网站[http://www.perception.tv/perception/clients/set-top-box-clients/](http://www.perception.tv/perception/clients/set-top-box-clients/) 但正在寻找三星 SDK 的通用解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T11:49:45.383

不，如果您使用三星 SDK 的应用程序框架，它们将仅适用于 2011+ 三星电视。

有几个用于跨供应商 SmartTV 开发的库：

*   [https://github.com/Boxee/cloudee-couch](https://github.com/Boxee/cloudee-couch)
*   [https://developers.google.com/tv/web/](https://developers.google.com/tv/web/)
*   [https://github.com/joshfire/joshfire-framework](https://github.com/joshfire/joshfire-framework)

# php - IF、ELSE 和 ELSEIF 语句

> ID：15470888
> 
> 赞同：2
> 
> 时间：2013-03-18T06:28:05.323
> 
> 标签：php, wordpress, widget, if-statement

我正在尝试在*Wordpress*中输出一个侧边栏，具体取决于它是否具有小部件（处于活动状态），并相应地在我的 Shop 页面上显示它们。

我对 PHP 很不熟悉，到目前为止，我已经编写了以下脚本来尝试使其工作，但它似乎没有发生。

**商店.php**：

```
<?php
/**
 * The template for displaying the Shop page.
 */

get_header(); ?>
    <div id="primary" class="site-content">
        <div id="content" role="main">
            <?php shop_content(); ?>
        </div><!-- #content -->
    </div><!-- #primary -->

<?php get_sidebar('shop'); ?>
<?php get_footer(); ?> 
```

**侧边栏-shop.php**：

```
<?php
/**
 * The sidebar containing the Shop page widget areas.
 *
 * If no active widgets are in the sidebars (Left, Right and theShop), 
 * the sidebars should be hidden completely.
 */
?>

    <?php 
    // If the left, shop and right sidebars are inactive
if ( ! is_active_sidebar( 'right-sidebar' ) && ! is_active_sidebar( 'shop-sidebar' ) ) {
    return;
}

    // If there are active widgets in the Shop Sidebar
    if ( is_active_sidebar( 'shop-sidebar' ) ) { ?>
        <div id="secondary" class="widget-area" role="complementary">
            <?php dynamic_sidebar( 'shop-sidebar' ); ?>
        </div><!-- #secondary -->
    <?php 
    }

    // If there are active widgets in the Right Sidebar
    elseif ( is_active_sidebar( 'right-sidebar' ) ) { ?>
        <div id="secondary" class="widget-area" role="complementary">
            <?php dynamic_sidebar( 'right-sidebar' ); ?>
        </div><!-- #secondary -->
    <?php   
    }
    ?> 
```

**边栏.php**：

```
<?php
/**
 * The sidebar containing the main widget area.
 *
 * If no active widgets in sidebar, let's hide it completely.
 *
 */
?>

    <?php if ( is_active_sidebar( 'right-sidebar' ) ) : ?>
        <div id="secondary" class="widget-area" role="complementary">
            <?php dynamic_sidebar( 'right-sidebar' ); ?>
        </div><!-- #secondary -->
    <?php endif; ?> 
```

我将如何修改上面的脚本以输出以下内容：

*   如果右侧边栏（right-sidebar）有小部件，显示右侧边栏
*   如果 Shop Sidebar (shop-sidebar) 有小部件，则显示 Shop Sidebar
*   如果右侧边栏和商店边栏都有小部件，则显示商店边栏
*   如果右侧边栏或商店边栏都没有任何小部件，则不要显示任何内容

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T06:44:21.730

```
// if both are active shoe shop
if (is_active_sidebar('shop') && is_active_sidebar('sidebar-1')) {
      get_sidebar('shop');
}
//if shop is active, show shop
elseif (is_active_sidebar('shop')) {
   get_sidebar('shop');
}
// if sidebar 1 is active show it.
elseif (is_active_sidebar('sidebar-1')) {
    get_sidebar('sidebar-1');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T06:53:11.553

代码应该很简单，因为您已经定义了商店侧边栏优于右侧边栏的良好优先级。如果您不需要显示侧边栏，则无需担心。

```
<?php

// If shop sidebar is active, it takes precedence
if ( is_active_sidebar( 'shop' )){
   get_sidebar( 'shop' ); 
}
elseif (is_active_sidebar( 'sidebar-1' )){
   get_sidebar( 'sidebar-1' );
   //This is "shop side bar is inactive and right sidebar is active"
}

// That's all; just two condition blocks!
?> 
```

谢谢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T15:50:38.117

它正在被`functions.php`文件修改。

# xml - 如何处理 HIPAA 834 EDI 文件？

> ID：15470892
> 
> 赞同：0
> 
> 时间：2013-03-18T06:28:19.183
> 
> 标签：xml, parsing, text-processing, text-parsing, edi

我必须解析和验证 HIPAA 834 EDI 文件。我为此找到了一个工具“EDI Validator”。

EDI 验证工具：`http://www.etasoft.com/ev.htm`

我无法从网络获取可以使用此工具处理的示例 HIPAA X12 834 EDI 文件。

请帮助我获取该示例文件。有没有比上面提到的更好的工具？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T13:43:24.040

这是一个示例 834 文​​件的链接：[PDF](https://www.wellcare.com/WCAssets/corporate/assets/Claims_BenefitEnrollment_Guide.pdf)

它缺少 ISA 和 GS 信封，但如果您不熟悉 EDI 信封，您可能需要做更多的研究。（请注意，这是谷歌搜索“示例 834 edi 文件”的第二个结果。还有更多结果）

我经常使用的另一个工具是[EDI Notepad](http://liaison.com/products/integrate/edi-notepad)。这将为您提供一些不同的数据视图，以帮助您获得一些背景信息。

那里有数百名翻译人员。你对解析的数据做了什么？将其转换为 XML？将其插入数据库？您需要生成 997 吗？

你应该从这里开始： [Delta](http://liaison.com/products/transform/delta)

# node.js - 如何使 mongoDB 实例可用 node.js 中的所有其他模块

> ID：15470895
> 
> 赞同：1
> 
> 时间：2013-03-18T06:28:42.600
> 
> 标签：node.js, mongodb

在我的应用程序中，我使用 node.js 和 mongoDB。下面是我的示例代码。

```
var mongodb = require('mongodb');
var server = new mongodb.Server("localhost", 27017, {});

new mongodb.Db('test', server, {w: 1}).open(function (error, client) {
    if (error) throw error;
    var collection = new mongodb.Collection(client, 'test_collection');
    collection.insert({hello: 'world'}, {safe:true},
    function(err, objects) {
        if(!err){
            console.log('Data inserted successfully.');
        }
        if (err && err.message.indexOf('E11000 ') !== -1) {
            // this _id was already inserted in the database
        }
    });
}); 
```

现在我需要 mongoDB 实例到我的应用程序中的其他模块。我该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T08:24:31.960

一种简单的方法，如果我们假设您发布的代码在 app.js 中，您可以将第 2 行重写为：

```
var server = exports.db = new mongodb.Server("localhost", 27017, {}); 
```

在需要访问实例的模块中，只需编写：

```
require('app').db 
```

一种更常见的方法可能是将共享内容放在 settings.js 文件中，或者使用专用的数据库接口模块。

**更新**

要访问打开的客户端，您需要以同样的方式公开客户端：

```
new mongodb.Db('test', server, {w: 1}).open(function (error, client) {
  exports.client = client;
  // ...
}); 
```

# javascript - 如果满足条件，则向类添加悬停功能

> ID：15470897
> 
> 赞同：0
> 
> 时间：2013-03-18T06:28:49.810
> 
> 标签：javascript, jquery, html, hover

我在父 div 中有 2 个 h3 元素，类为“entry”

```
<div class="entry">
  <h3 class="productsHover">
    <a><img src="image.png" /></a>
  </h3>
  <h3>
    <a>Drillrigs</a>
  </h3>
</div> 
```

现在，当您将鼠标悬停在图像上时，它具有由 CSS 定义的过渡效果：

```
h3.productsHover img{
    position: relative;
    margin-right: 10px !important;
    left: 0px;
    -webkit-transition: all 0.2s ease 0s;
    -moz-transition: all 0.2s ease 0s;
    -o-transition: all 0.2s ease 0s;
    transition: all 0.2s ease 0s;
}
h3.productsHover img:hover{
    left: 6px;
} 
```

我不想将它们添加到`h3.productsHover`应用悬停效果的同一个父元素（）中。它们（图像和文本）应保留在单独的`h3`标签中

> **问题**：那么当实际上将鼠标悬停在 h3 文本元素上时，如何调用图像上的悬停效果？

并不是说我不想在整个父元素 ( `.entry`) 上应用悬停效果，因为它还包含许多其他图像和`h3`标签。

此外，类只能通过 JS 添加，而不是在 html 中添加（正常方式）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T07:00:04.357

将处理程序绑定到具有文本的 h3 上的悬停（jQuery 支持）事件，处理程序将在 mouseenter 上添加一个类并在 mouseout 上删除一个类。让具有 img 效果的 h3 上的 css 类。

```
$( 'div.entry h3:last-child a' ).hover(
    function(e){ $(this).parent().prev().addClass('productsHover') },

    function(e){ $(this).parent().prev().removeClass('productsHover') }
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T06:46:37.830

@Vimal Stan：应通过以下方式改进此答案：

```
$(".entry img").prev().addClass("hoverClass"); // of fire hover for that element
// same with this one .entry:hover img 
```

[http://api.jquery.com/prev/](http://api.jquery.com/prev/)

```
 .prev( [selector ] )Returns: jQuery

Description: Get the immediately preceding sibling of each element in the set of matched elements, optionally filtered by a selector. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T06:42:07.223

你可以这样做：

```
 .entry img
 .entry:hover img 
```

这应该让您无论悬停在 div 上的哪个位置都显示悬停效果。

# javascript - 在页面加载和单击按钮时调用 ajax 函数

> ID：15470898
> 
> 赞同：0
> 
> 时间：2013-03-18T06:28:51.193
> 
> 标签：javascript, ajax

我有一个 javascript 文件，其中包含一个带有参数 x 的 ajax 函数。我无法显示该函数。我想在页面加载和单击按钮时调用该函数。该函数还有一个 for 循环，用于显示变量 10 次，即 `for(i=0;i<10;i++)`.

该按钮的代码是：

HTML 文件

```
<html>
 <title>Call web service</title>
  <head>
   <script type="text/Javascript" src="jquery-1.9.1.js"></script>
     <script type = "text/javascript" src="ajax.js"></script>
     <script type="text/javascript">

     window.onload=function()
     {
       Webservice(1)('onload');    //call 1 where webservice is ajax function 

      }

    </script>     
   </head>
 <body>
   <input id="button"  type = "button" name = "button" value = "Call Webservice" onClick = "Webservice(5)"/>
 </body>

</html> 
```

现在我得到的是当我单击按钮时 onload 函数被覆盖，而我希望同时显示这两个函数的输出所以请帮助我。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T07:10:57.170

尝试这样做：

```
function f1() {
    //what you need to do
}
function f2() {
    //Do the same thing here also
} 
```

这是您的 JS，在 onload、call`f1()`和 for button click call`f2()`中。如果你想`f1()`在之前执行`f2()`，我建议你在这里查看锁：

[如何在 JavaScript 中实现锁](https://stackoverflow.com/questions/5346694/how-to-implement-a-lock-in-javascript)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T06:55:08.177

你的 JavaScript 代码应该是这样的：

```
var fn = function fn(x) {
  // Do something
}

$(function() {
  var someValue;

  // someValue = ...

  // Call function once document is loaded
  fn(someValue);
  // Bind function as a callback to button click
  $('#button').on('click', function(event) {
    fn(someValue);
  });
}); 
```

# c# - 以太多对象结束（分层设计）

> ID：15470901
> 
> 赞同：0
> 
> 时间：2013-03-18T06:29:08.770
> 
> 标签：c#, asp.net, oop, solid-principles

我的网络表单上有很多下拉列表和自定义网格，它们会显示给最终用户。每个都通过 DAL 从数据库中填充。我为每个定义了单独的类。但是，我正在考虑减少类的数量，因为每个新需求都会产生一个单独的自定义对象。

我怎样才能减少编号。这些要求的类？我应该使用数据集、列表等吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T07:14:05.537

“为每个定义单独的类”和“如何减少此类要求的类数”。

你真的为每个下拉列表创建一个新类吗？根据我的经验，通常我通过使用这个类来概括它：

```
public class DropDownItem<T>{
  public string Display{get;set;}
  public T Value{get;set;}
} 
```

可以使用它来完成`Dictionary<T>`。

从未在 ASP.Net 中使用过，但它在 Winform 和 WPF 数据绑定中运行良好。在 Asp.Net 中，我认为普通的选择选项足以满足需要。

但是对于gridview，您需要将您的类概括为更通用。声明一个具有大部分参数的类，该类可以为空。

示例一请求有 10 个参数，5 个是强制性的，其他 5 个是可空的。网格 A 显示参数 1,2,3,4,5,7,8，网格 B 显示参数 1,2,3,4,5,6,9,10。这样，您可以在更多网格中使用一个类。

不要使用数据集/数据表。使用更多的类比使用 DataSet 更好。当使用更多的类时，可维护性会比DataSet 更好，因为它是强类型的，而不是DataSet 中的“COLUMN_NAME”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T06:51:40.240

我希望这听起来不太重要，但如果作为一个类添加的每个需求最终都需要大量工作，那么也许您可以研究继承以清理这些类中的样板/共享代码。

一般来说，很多小类（不与其他类重叠的功能）是一件好事。相反的复杂性问题，“上帝”类，你的所有代码都被塞进更少的类，更糟糕。

# java - 一个静态类在java中可以有多个值吗（android java中令人困惑的例子）

> ID：15470904
> 
> 赞同：1
> 
> 时间：2013-03-18T06:29:19.857
> 
> 标签：java, android, static

为什么每个 View 都有一个唯一的`LayoutParams`附加到它，但是`LayoutParams`在 android java 中该类被声明为任何布局的静态内部类（例如： GroupView ）？

那么**java中的内部静态类可以实例化吗？** 或者在将静态实例分配给视图时在视图上设置了一个小结构

我很困扰

**如果这个类真的是静态的，我们怎么能真正做任何并行的 layoutparams 分配？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T06:35:34.463

是的，可以实例化一个内部静态类。此外，因为它是静态的，它可以在没有封闭类的实例的情况下被实例化。它就像一个普通类一样工作，除了它可以访问封闭类的私有变量并且它的名称由封闭类限定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T06:35:27.037

静态内部类的行为就像一个普通的 java 类，所以它们可以被实例化任意多次

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T06:49:01.373

我有点理解你的问题。你能更具体地谈谈你的问题吗

在我看来，ViewGroup 是布局和视图容器的基类。

这个类还定义了 ViewGroup.LayoutParams 作为布局参数的基类。

ViewGroup 类语法：

公共抽象类 ViewGroup 扩展 View

ViewGroup.LayoutParams 是静态类

公共静态类 ViewGroup.LayoutParams 扩展对象

# android - 如何为 android 2.3.3 audio recoder 创建 Visualizer

> ID：15470908
> 
> 赞同：1
> 
> 时间：2013-03-18T06:29:53.797
> 
> 标签：android

Visualizer 媒体播放器链接

```
public void link(MediaPlayer player)
  {
    if(player == null)
    {
      throw new NullPointerException("Cannot link to null MediaPlayer");
    }

    // Create the Visualizer object and attach it to our media player.
    mVisualizer = new Visualizer(player.getAudioSessionId());
    mVisualizer.setCaptureSize(Visualizer.getCaptureSizeRange()[1]);

    // Pass through Visualizer data to VisualizerView
    Visualizer.OnDataCaptureListener captureListener = new Visualizer.OnDataCaptureListener()
    {
      @Override
      public void onWaveFormDataCapture(Visualizer visualizer, byte[] bytes,
          int samplingRate)
      {
        updateVisualizer(bytes);
      }

      @Override
      public void onFftDataCapture(Visualizer visualizer, byte[] bytes,
          int samplingRate)
      {
        updateVisualizerFFT(bytes);
      }
    };

    mVisualizer.setDataCaptureListener(captureListener,
        Visualizer.getMaxCaptureRate() / 2, true, true);

    // Enabled Visualizer and disable when we're done with the stream
    mVisualizer.setEnabled(true);

  } 
```

如何为 android Audio Recorder 2.3.3 创建 Visualizer？我希望能够做这样的事情：

```
public void link(AudioRecorder recorder)
{

// Create the Visualizer object and attach it to our media player.
mVisualizer = new Visualizer(recorder.getAudioSessionId()); 
```

但我的问题是该`recorder.getAudioSessionId()`方法仅适用于 API 级别 16（Jellybean）及更高版本，而我的目标是 Android 2.3.3（Gingerbread）。对替代品有什么建议吗？

# jquery - 如何使用 jQuery 找到一个活动类并将其移动到父容器？

> ID：15470920
> 
> 赞同：0
> 
> 时间：2013-03-18T06:31:56.787
> 
> 标签：jquery, drupal-6, jquery-1.3

当 上存在活动类时`<a>`，我想将该类移至其最高父级；这`<div class="views-row">`

```
<div class="views-row-unformatted views-row views-row-2 views-row-even">
  <div class="title">
    <span class="field-content">
      <a class="active">
        <h3>Title Text</h3>
      </a>
    </span>    
  </div>
</div> 
```

我仅限于在主题层工作，并且只有 jQuery 和 CSS 作为我的工具。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T06:34:59.143

您可以使用`:has`选择器或`has`方法：

```
$('div.views-row:has(a.active)') 
                   .addClass('active') 
                   .find('a.active') 
                   .removeClass('active'); 
```

[http://jsfiddle.net/RmxWq/](http://jsfiddle.net/RmxWq/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T06:36:03.887

使用和。`:has()`_`parents()``addClass()`

```
$('a:has(".active")').parents('div.views-row').addClass('active'); 
```

# c++ - 目标代码重定位和 Intel Pin 交互

> ID：15470922
> 
> 赞同：2
> 
> 时间：2013-03-18T06:32:01.820
> 
> 标签：c++, gcc, ld, glibc, intel-pin

我正在开发一个多处理器架构模拟器，该模拟器使用 Intel Pin 来检测 C++ 可执行二进制文件并报告有趣的事件（例如，一些函数调用、线程创建/完成等）。基本上，我在加载图像时构建所有指令的指令解码缓存，然后分析指令执行。因此，图像加载时的指令地址与运行时的指令地址相同（或至少同步更新）是很重要的。

英特尔 Pin API（例如 IMG_AddInstrumentFunction）使我能够获取有关已加载图像（可执行文件和共享库）的信息，例如入口点、低/高地址等。

但是，我注意到插桩程序在不属于任何加载图像的地址处执行指令。通过检查，我怀疑动态加载程序（***64 位 Centos 6.3***上的图像 /lib64/ld-linux-x86-64.so.2 ）正在通过调用例程**_dl_relocate_object**重新定位内存中的主要可执行文件。

我理解对可重定位代码和所有这些东西的需求。我只需要关于这些重定位如何/何时发生（在加载时和运行时）的良好文档（或只是简短描述/建议）的指针，以便我可以在我的架构模拟器中考虑它们。换句话说，用于实现它的***机制***（我需要检测的库函数、条件或随机化（如果有的话）、可用于抑制重定位的 g++ 编译器开关等）。PS：我只针对 x86/x86_64 架构

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T06:41:37.563

重定位是特定于处理器的，因此 ARM 和 x86-64 和 x86 有不同的重定位（因为它们的指令集不同）。

^(重定位也是特定于操作系统的，但一些相关的操作系统会尝试进行相同的重定位，例如 x86-64 的 Solaris 和 Linux)

它们在[ABI](http://en.wikipedia.org/wiki/Application_binary_interface)（应用程序二进制接口）规范*“System V Application Binary Interface AMD64 Architecture Processor Supplement”*中有详细描述。最初的 x86-64 ABI 曾经在[http://www.x86-64.org/documentation.html](http://www.x86-64.org/documentation.html)上 ，但该站点几周后没有响应。旧副本在[此链接](http://math-atlas.sourceforge.net/devel/assembly/abi_sysV_amd64.pdf)上，新副本在[此处](http://ensiwiki.ensimag.fr/images/d/de/System_V_Application_Binary_Interface_AMD64_Architecture_Processor_Supplement.pdf)

还有[X32 ABI](http://en.wikipedia.org/wiki/X32_ABI)

另请参阅[此问题](https://stackoverflow.com/q/5554856/841108)。

# django-forms - 表单字段中的 Django 字母数字验证

> ID：15470928
> 
> 赞同：1
> 
> 时间：2013-03-18T06:32:51.180
> 
> 标签：django-forms, validation, django-views, django-validation

我想执行字段验证，但条件是

1）该字段应该有10个字符。

2）前 5 个字符应该是字母，接下来的 5 个字符应该是数字

我对最大长度检查进行了验证，但其余的事情如何执行。这可以在单个“if”条件下完成。

我正在谷歌中搜索执行该操作的逻辑，但不知道。任何人都可以帮助我执行相同的操作。

forms.py 用于长度检查

```
def clean_bookref(self):
        cd=self.cleaned_data
        bookref=cd.get('bookref')

        if len(bookref)<10 and re.match(r'[A-z0-9]+', bookref):
            raise forms.ValidationError("Should be 10 digits")

        return bookref 
```

我正在使用此代码来执行此操作，但它不起作用。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T08:49:43.057

也许你可以使用类似他的东西：

```
def clean_bookref(self):
    cd=self.cleaned_data
    bookref=cd.get('bookref')

    if not re.match(r'^[A-Za-z]{5}[0-9]{5}$',bookref) :
        raise forms.ValidationError("Should be of the form abcde12345")

   return bookref 
```

# c++ - 托管 html/css/js UI 的最轻量级方式？

> ID：15470930
> 
> 赞同：1
> 
> 时间：2013-03-18T06:33:02.623
> 
> 标签：c++, html, css

我正在使用 C++ 在 MSVC 2012 中编写纯 Win32 应用程序。在尝试为原生 win32 主题（我不想使用 .NET）进行了很多努力之后，我不介意通过让应用程序前端从 HTML/CSS 呈现（这很容易主题）来更容易地做到这一点）。

有哪些适用于 C++ 的轻量级库可以让我在我的桌面应用程序上拥有一个 Web 样式的前端，同时无缝地给用户一种他们没有在看网页的印象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T06:38:28.213

也许像[http://www.terrainformatica.com/htmlayout/](http://www.terrainformatica.com/htmlayout/)这样的东西可以帮助你。

# javascript - 使用 for 循环和 document.getElementById 在 Javascript 中填充数组

> ID：15470937
> 
> 赞同：2
> 
> 时间：2013-03-18T06:33:25.590
> 
> 标签：javascript, html, loops, for-loop

我一直在尝试使用 for 循环填充数组并使用`document.getElementById("spin " + i).value;`

每个输入标记的`ids`我的 html 上的从 spin1 到 spin18。

关于我做错了什么有什么建议吗？或者我能改变什么？

```
var nums = [];

for(var i = 1; i <= 18; i++){
    var num[i] = parseInt(document.getElementById("spin" + i).value);

    nums.push(num[i]);

}

alert(nums.length); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T06:55:52.503

问题是什么？您从不提及生成什么样的结果或前端 html 代码是什么样的。

js 看起来是可编译的，但这里有一些指针。

## **数字 0 在 1 之前**

养成这种思维定势是一个好习惯，而且它可以避免你以后犯愚蠢的错误。无论如何，只是为了加强这一点，下面是一个数字图表。

```
    0 10
    1 11
    2 12
    3 13
    4 14
    5 15
    6 16
    7 17
    8 18
    9 19

```

## **避免不必要的变量**

可悲的是，拥有一个优化冗余代码的 js 编译器是一个新功能。但是，当您可以拥有一条线时，为什么还要维护两条线。

```
var nums = [];

for( var i = 0; i < 18; i++ ) {
    nums[i] = parseInt( document.getElementById("spin" + i).value );
} 
```

## **不要推，插入**

push 方法的开销很大，因此请谨慎使用。

## **记录器**

控制台有一个内置的记录器，为什么不使用它来代替警报框呢？

```
console.log( nums.length ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T06:37:20.380

试试这个

```
var nums = [];

for(var i = 1; i <= 18; i++){
    var num= parseInt(document.getElementById("spin" + i).value);

    nums.push(num);

}

alert(nums.length); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T06:46:14.160

有几点需要注意：

1.  正如 PSR 所提到的，您使用：

```
var num[i] 
```

什么时候应该

```
var num 
```

1.  `getElementById(id).value`仅适用于表单元素，您必须`.innerHTML`用于 div。

这对我有用：http: [//jsfiddle.net/sbqeT/](http://jsfiddle.net/sbqeT/)

# scala - 无法执行喷涂示例 | Maven依赖错误

> ID：15470939
> 
> 赞同：2
> 
> 时间：2013-03-18T06:33:30.237
> 
> 标签：scala, spray

我只是想动手使用 Spray 库，但是由于 maven 依赖性而无法执行它的示例。

正如文档中所提供的，我已将 Spray 存储库定义如下：

```
<repositories>
        <repository>
            <id>sprayrepo</id>
            <name>spray repo</name>
            <url>http://repo.spray.io/</url>
            <layout>default</layout>
        </repository>
</repositories> 
```

然后我定义了它的依赖如下：

```
 <dependency>
            <groupId>io.spray</groupId>
            <artifactId>spray-http</artifactId>
            <version>1.1-M7</version>
        </dependency>
        <dependency>
            <groupId>io.spray</groupId>
            <artifactId>spray-httpx</artifactId>
            <version>1.1-M7</version>
        </dependency>
        <dependency>
            <groupId>io.spray</groupId>
            <artifactId>spray-util</artifactId>
            <version>1.1-M7</version>
        </dependency>
        <dependency>
            <groupId>com.chuusai</groupId>
            <artifactId>shapeless_2.9.2</artifactId>
            <version>1.2.0</version>
        </dependency>
    </dependencies> 
```

但是，当我尝试执行 maven 安装时，我遇到以下错误：

> [错误] 无法在项目 spray-test1 上执行目标：无法解析项目 org.spray:spray-test1:jar:1.0-SNAPSHOT 的依赖项：无法收集 [io.spray:spray-http:jar:1.1 的依赖项-M7 (编译), io.spray:spray-httpx:jar:1.1-M7 (编译), io.spray:spray-util:jar:1.1-M7 (编译), com.chuusai:shapeless_2.9.2:jar: 1.2.0（编译）]：无法读取 io.spray:spray-http:jar:1.1-M7 的工件描述符：无法将工件 io.spray:spray-http:pom:1.1-M7 从/到 sprayrepo 传输（[http://repo.spray.io/](http://repo.spray.io/)）：连接超时 [http://repo.spray.io/io/spray/spray-http/1.1-M7/spray-http-1.1-M7.pom](http://repo.spray.io/io/spray/spray-http/1.1-M7/spray-http-1.1-M7.pom) -> [帮助 1] [错误]

任何指针或建议将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-19T16:12:25.207

尝试这个：

```
<properties>
    <maven.compiler.source>1.6</maven.compiler.source>
    <maven.compiler.target>1.6</maven.compiler.target>
    <encoding>UTF-8</encoding>
    <scala.tools.version>2.10</scala.tools.version>
    <scala.version>2.10.2</scala.version>
</properties>

<dependencies>
    <dependency>
        <groupId>org.scala-lang</groupId>
        <artifactId>scala-library</artifactId>
        <version>${scala.version}</version>
    </dependency>
    <dependency>
        <groupId>io.spray</groupId>
        <artifactId>spray-can</artifactId>
        <version>1.1-M8</version>
    </dependency>
    <!-- Test -->
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.11</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>org.specs2</groupId>
        <artifactId>specs2_${scala.tools.version}</artifactId>
        <version>1.13</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>org.scalatest</groupId>
        <artifactId>scalatest_${scala.tools.version}</artifactId>
        <version>2.0.M6-SNAP8</version>
        <scope>test</scope>
    </dependency>
    </dependencies>
    <build>
        <sourceDirectory>src/main/scala</sourceDirectory>
        <testSourceDirectory>src/test/scala</testSourceDirectory>
        <plugins>
        <plugin>
            <!-- see http://davidb.github.com/scala-maven-plugin -->
            <groupId>net.alchim31.maven</groupId>
            <artifactId>scala-maven-plugin</artifactId>
            <version>3.1.3</version>
            <executions>
            <execution>
            <goals>
                <goal>compile</goal>
                <goal>testCompile</goal>
            </goals>
            <configuration>
            <args>
                <arg>-make:transitive</arg>
                <arg>-dependencyfile</arg>
                                <arg>${project.build.directory}/.scala_dependencies</arg>
                            </args>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-surefire-plugin</artifactId>
                <version>2.13</version>
                <configuration>
                    <useFile>false</useFile>
                    <disableXmlReport>true</disableXmlReport>
                    <!-- If you have classpath issue like NoDefClassError,... -->
                    <!-- useManifestOnlyJar>false</useManifestOnlyJar -->
                    <includes>
                        <include>**/*Test.*</include>
                        <include>**/*Suite.*</include>
                    </includes>
                </configuration>
            </plugin>
        </plugins>
    </build>
    <repositories>
        <repository>
            <id>SonatypeNexusSnapshots</id>
            <name>Sonatype Nexus Snapshots</name>
            <url>https://oss.sonatype.org/content/repositories/snapshots/</url>
        </repository>
        <repository>
            <id>FuseSourceSnapshotRepository</id>
            <name>FuseSource Snapshot Repository</name>
            <url>http://repo.fusesource.com/nexus/content/repositories/snapshots/</url>
        </repository>
        <repository>
            <id>ScalaToolsMaven2Repository</id>
            <name>Scala-Tools Maven2 Repository</name>
            <url>http://scala-tools.org/repo-releases/</url>
        </repository>
        <repository>
            <id>scala-tools.org</id>
            <name>Scala-Tools Maven2 Repository</name>
            <url>http://scala-tools.org/repo-releases</url>
        </repository>
        <repository>
            <id>sprayrepo</id>
            <name>spray repo</name>
            <url>http://repo.spray.io/</url>
            <layout>default</layout>
        </repository>
    </repositories>

    <pluginRepositories>
        <pluginRepository>
            <id>scala-tools.org</id>
            <name>Scala-Tools Maven2 Repository</name>
            <url>http://scala-tools.org/repo-releases</url>
        </pluginRepository>
    </pluginRepositories> 
```

# knockout.js - 如何动态更改绑定模型属性

> ID：15470942
> 
> 赞同：0
> 
> 时间：2013-03-18T06:33:51.080
> 
> 标签：knockout.js

有一个字符串数组和一个输入元素。我想根据条件使用该输入元素编辑任何数组成员。

如何实现这样的目标：

```
mymodel.setActiveArrayMember(1)
// now input is bound to an array member 1

mymodel.setActiveArrayMember(5)
// now input is bound to an array member 5

etc. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T09:09:05.447

您可以将活动成员设置为计算的 observable：

```
var activeArrayMember = ko.computed(function()
{
    read: function()
    {
        return array()[activeIndex()];
    }
    write: function (value)
    {
        array()[activeIndex()] = value;
        array.valueHasMutated();
    }
}); 
```

这是假设您的数组是一个可观察的数组。`()`如果不是，就输掉。然后为活动成员的索引设置一个 observable，并在您想要更改成员时设置它：

```
activeIndex(5); 
```

将您的 html 绑定到 activeArrayMember，它应该可以正常工作。

# asp.net-mvc - 使用模态框进行文件上传

> ID：15470945
> 
> 赞同：0
> 
> 时间：2013-03-18T06:34:03.013
> 
> 标签：asp.net-mvc

在我的 MVC 应用程序中，我允许用户上传文件。每当用户单击上传文件链接时，这就是链接

```
 <a class="upload" onclick="upload(this);"> 
```

文件上传应该在模式框中打开。

```
function upload(box) {
       var box = dhtmlx.modalbox({
           title: "Upload File",
           text: "<div id='form_in_box'><div>Choose a PDF file to upload <hr/><label>Enter the URL <input type='file' name='file' id='file' style='width: 400px; height: 27px;'></label><br></div><div><span class='dhtmlx_button'><input type='submit' value='Upload File' style='width: 86px' onclick='save_file(this)'></span><span class='dhtmlx_button'><input type='button' value='Cancel' onclick='close_file(this)' style='width:80px;'></span></label></div></div>",
           width: "300px"
       });
   }
   function close_file(box) {

       dhtmlx.modalbox.hide(box);

   }

   function save_file(box) {
       var file = $("#file").val();
       if (file == "") {
           alert("Enter the URL");
           return false;

       dhtmlx.modalbox.hide(box);
       dhtmlx.message("Uploading the file");
       $.post("/FileUpload/Upload",
       { file: '' + file + '' });
   }
  and the controller code is 
[HttpPost]
    public ActionResult Upload(HttpPostedFileBase file)
    {
        SaveFile(file);
        return RedirectToAction("Index");
    } 
```

但问题是出现错误，即 file = null

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T07:13:47.317

您不能使用 AJAX 请求 ( `$.post`) 上传文件。如果您的浏览器支持 HTML5 File API，您可以使用新的[`XHR2 object`](https://developer.mozilla.org/en-US/docs/Using_files_from_web_applications). 如果没有，您可以使用文件上传插件，例如[`Uploadify`](http://www.uploadify.com/),[`Fine Uploader`](http://fineuploader.com/)或[`PLUpload`](http://www.plupload.com/). 所有这些插件都会检测客户端浏览器是否支持 HTML5 File API，如果支持则使用它，如果不支持，它们将回退到标准技术，例如使用隐藏的 iframe 或 Flash 电影。使用其中之一的优点是您不需要为所有可能的情况编写代码。

以下是如何使用 HTML5 File API 上传文件的示例：

```
function save_file(box) {
    var file = document.getElementById('file');
    if (file.value == '') {
        alert('Enter the URL');
        return false;
    }

    dhtmlx.modalbox.hide(box);
    dhtmlx.message('Uploading the file');

    var fd = new FormData();
    fd.append('file', file.files[0]);
    var xhr = new XMLHttpRequest();
    xhr.open('POST', '/FileUpload/Upload', true);
    xhr.onreadystatechange = function () {
        if (xhr.readyState == 4 && xhr.status == 200) {
            alert('file successfully uploaded to the server');
        }
    };
    xhr.send(fd);
} 
```

# asp.net - 要在 Canvas 中使用的舞台、矩形和其他形状的特定 .js 文件

> ID：15470946
> 
> 赞同：0
> 
> 时间：2013-03-18T06:34:16.773
> 
> 标签：asp.net, html, html5-canvas

我目前想在 HTML5 中使用 Canvas。我是画布的新手，想开始研究它。我正在使用easeljs 来实现画布。但是任何人都可以指定任何特定的 .js 文件来实现 Canvas。当我使用这个 .js 时，我收到错误：“ **0x800a1391 - Microsoft JScript 运行时错误：'Stage' 未定义如果有此异常的处理程序，程序可以安全地继续。** ”这是我的一段代码，我们得到上述指定的错误。我只从互联网上复制了这段代码：

```
 <script>
        //EaselJS Stage instance that wraps the Canvas element
        var stage;

        //EaselJS Shape instance that we will animate
        var circle;

        //radius of the circle Graphics that we will draw.
        var CIRCLE_RADIUS = 10;

        //x position that we will reset Shape to when it goes off
        //screen
        var circleXReset;

        //EaselJS Rectangle instance we will use to store the bounds
        //of the Canvas
        var bounds;

        //initialize function, called when page loads.
        function init() {
            //check and see if the canvas element is supported in
            //the current browser
            ////http://diveintohtml5.org/detect.html#canvas
            if (!(!!document.createElement('canvas').getContext)) {
                var wrapper = document.getElementById("canvasWrapper");
                wrapper.innerHTML = "Your browser does not appear to support " +
                "the HTML5 Canvas element";
                return;
            }

            //get a reference to the canvas element
            var canvas = document.getElementById("stageCanvas");

            //copy the canvas bounds to the bounds instance.
            //Note, if we resize the canvas, we need to reset
            //these bounds.
            //bounds = new Rectangle();
            //bounds.width = canvas.width;
            //bounds.height = canvas.height;

            //pass the canvas element to the EaselJS Stage instance
            //The Stage class abstracts away the Canvas element and
            //is the root level display container for display elements.
            stage = new Stage(canvas);

            //Create an EaselJS Graphics element to create the
            //commands to draw a circle
            var g = new Graphics();

            //stroke of 1 px
            g.setStrokeStyle(1);

            //Set the stroke color, using the EaselJS 
            //Graphics.getRGB static method.
            //This creates a white color, with an alpha
            //of .7
            g.beginStroke(Graphics.getRGB(255, 255, 255, .7));

            //draw the circle
            g.drawCircle(0, 0, CIRCLE_RADIUS);

            //note that the circle has not been drawn yet. 
            //the Graphics instance just has the commands to
            //draw the circle.
            //It will be drawn when the stage needs to render it
            //which is usually when we call stage.tick()

            //create a new Shape instance. This is a DisplayObject
            //which can be added directly to the stage (and rendered).
            //Pass in the Graphics instance that we created, and that
            //we want the Shape to draw.
            circle = new Shape(g);

            //set the initial x position, and the reset position
            circle.x = circleXReset = -CIRCLE_RADIUS;

            //set the y position
            circle.y = canvas.height / 2;

            //add the circle to the stage.
            stage.addChild(circle);

            //tell the stage to render to the canvas
            stage.update();

            Ticker.setFPS(24);

            //Subscribe to the Tick class. This will call the tick
            //method at a set interval (similar to ENTER_FRAME with
            //the Flash Player)
            Ticker.addListener(this);
        }

        //function called by the Tick instance at a set interval
        function tick() {
            //check and see if the Shape has gone of the right
            //of the stage.
            if (circle.x > bounds.width) {
                //if it has, reset it.
                circle.x = circleXReset;
            }

            //move the circle over 10 pixels
            circle.x += 8;

            //re-render the stage
            stage.update();
        }
    </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T06:52:05.987

上面代码中唯一的事情就是在每个偶数之前添加“createjs”。

```
<script>
        //EaselJS Stage instance that wraps the Canvas element
        var stage;

        //EaselJS Shape instance that we will animate
        var circle;

        //radius of the circle Graphics that we will draw.
        var CIRCLE_RADIUS = 10;

        //x position that we will reset Shape to when it goes off
        //screen
        var circleXReset;

        //EaselJS Rectangle instance we will use to store the bounds
        //of the Canvas
        var bounds;

        //initialize function, called when page loads.
        function init() {
            //check and see if the canvas element is supported in
            //the current browser
            ////http://diveintohtml5.org/detect.html#canvas
            if (!(!!document.createElement('canvas').getContext)) {
                var wrapper = document.getElementById("canvasWrapper");
                wrapper.innerHTML = "Your browser does not appear to support " +
                "the HTML5 Canvas element";
                return;
            }

            //get a reference to the canvas element
            var canvas = document.getElementById("stageCanvas");

            //copy the canvas bounds to the bounds instance.
            //Note, if we resize the canvas, we need to reset
            //these bounds.
            //var s = new Shape();
            //s.graphics.setStrokeStyle(1).beginStroke("#f00").drawRect(0, 0, canvas.width, canvas.height);
            //stage.addChild(s);
            bounds = new **createjs**.Rectangle();
            bounds.width = canvas.width;
            bounds.height = canvas.height;

            //pass the canvas element to the EaselJS Stage instance
            //The Stage class abstracts away the Canvas element and
            //is the root level display container for display elements.
            stage = new createjs.Stage(canvas);

            //Create an EaselJS Graphics element to create the
            //commands to draw a circle
            var g = new **createjs**.Graphics();

            //stroke of 1 px
            g.setStrokeStyle(1);

            //Set the stroke color, using the EaselJS 
            //Graphics.getRGB static method.
            //This creates a white color, with an alpha
            //of .7
            g.beginStroke(createjs.Graphics.getRGB(255, 255, 255, .7));

            //draw the circle
            g.drawCircle(0, 0, CIRCLE_RADIUS);

            //note that the circle has not been drawn yet. 
            //the Graphics instance just has the commands to
            //draw the circle.
            //It will be drawn when the stage needs to render it
            //which is usually when we call stage.tick()

            //create a new Shape instance. This is a DisplayObject
            //which can be added directly to the stage (and rendered).
            //Pass in the Graphics instance that we created, and that
            //we want the Shape to draw.
            circle = new createjs.Shape(g);

            //set the initial x position, and the reset position
            circle.x = circleXReset = -CIRCLE_RADIUS;

            //set the y position
            circle.y = canvas.height / 2;

            //add the circle to the stage.
            stage.addChild(circle);

            //tell the stage to render to the canvas
            stage.update();

            createjs.Ticker.setFPS(24);

            //Subscribe to the Tick class. This will call the tick
            //method at a set interval (similar to ENTER_FRAME with
            //the Flash Player)
            createjs.Ticker.addListener(this);
        }

        //function called by the Tick instance at a set interval
        function tick() {
            //check and see if the Shape has gone of the right
            //of the stage.
            if (circle.x > bounds.width) {
                //if it has, reset it.
                circle.x = circleXReset;
            }

            //move the circle over 10 pixels
            circle.x += 8;

            //re-render the stage
            stage.update();
        }
    </script> 
```

我已将我们必须在每个函数或事件之前添加的内容标记为粗体。

# c++ - c++ - unordered_map 复杂度

> ID：15470948
> 
> 赞同：18
> 
> 时间：2013-03-18T06:34:28.397
> 
> 标签：c++, hashtable, complexity-theory, unordered-map

我需要创建一个查找函数，其中 (X,Y) 对对应于特定的 Z 值。对此的一个主要要求是我需要尽可能接近 O(1) 复杂度。我的计划是使用 unordered_map。

我通常不使用哈希表进行查找，因为查找时间对我来说从来都不重要。我是否正确地认为只要我构建了没有冲突的 unordered_map，我的查找时间将是 O(1)？

然后我担心的是，如果无序映射中不存在密钥，那么复杂性会变成什么。例如，如果我使用 unordered_map::find(): 来确定一个键是否存在于我的哈希表中，它将如何给我一个答案？它实际上是否遍历所有键？

我非常感谢帮助。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-18T09:29:53.260

该标准或多或少要求使用存储桶解决冲突，这意味着实际查找时间可能与存储桶中的元素数量成线性关系，无论该元素是否存在。可以使它成为 O(lg N)，但通常不会这样做，因为如果正确使用哈希表，桶中的元素数量*应该很少。*

为了保证一个桶的元素数量少，必须保证散列函数是有效的。有效的手段取决于被散列的类型和值。（MS 实现使用 FNV，这是最好的通用散列之一，但如果您对将要看到的实际数据有专门的了解，您可能会做得更好。）另一件可以帮助减少数量的事情每个桶的元素数量是强制更多的桶或使用更小的负载因子。首先，您可以将最小初始桶数作为参数传递给构造函数。如果您知道地图中的元素总数，则可以通过这种方式控制负载因子。填满表格后，您还可以通过调用 `rehash`. 否则，有一个功能 `std::unordered_map<>::max_load_factor`你可以使用它。它不能保证做任何事情，但在任何合理的实施中，它会。请注意，如果您在已填充的 上使用它`unordered_map`，您可能必须在 `unordered_map<>::rehash`之后调用。

（关于标准 unordered_map 有几件事我不明白：为什么负载因子是 a `float`，而不是 `double`；为什么它不需要产生影响；以及为什么它不会自动调用`rehash`你。）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-18T06:38:05.443

与任何哈希表一样，最坏的情况总是线性复杂性（*编辑：如果您构建的地图没有任何冲突，就像您在原始帖子中所说的那样，那么您将永远不会看到这种情况*）：

[http://www.cplusplus.com/reference/unordered_map/unordered_map/find/](http://www.cplusplus.com/reference/unordered_map/unordered_map/find/)

> **复杂性** 平均情况：常数。最坏的情况：容器大小呈线性关系。
> 
> **返回值** 如果找到指定的键值，则返回元素的迭代器；如果在容器中未找到指定的键，则返回 unordered_map::end。

但是，由于 unordered_map 只能包含唯一键，您将看到恒定时间的平均复杂度（容器首先检查哈希索引，然后迭代该索引处的值）。

我认为[unordered_map::count](http://www.cplusplus.com/reference/unordered_map/unordered_map/count/)函数的文档提供了更多信息：

> 在容器中搜索键为 k 的元素并返回找到的元素数。因为 unordered_map 容器不允许重复键，这意味着如果容器中存在具有该键的元素，则该函数实际上返回 1，否则返回 0。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-18T06:56:23.987

在散列数据结构中没有冲突是非常困难的（如果不是不可能的给定散列函数和任何类型的数据）。它还需要一个与键数完全相等的表大小。不，它不需要那么严格。只要散列函数以相对统一的方式分配值，就会有`O(1)`查找复杂性。

哈希表通常只是带有处理冲突的链表的数组（这是链接方法 - 还有其他方法，但这可能是处理冲突最常用的方法）。因此，要查找某个值是否包含在存储桶中，它必须（可能）迭代该存储桶中的所有值。因此，如果散列函数为您提供均匀分布，并且有`N`桶和值的总数，则每个桶`M`应该（平均）有值。`M/N`只要该值不太大，就可以进行`O(1)`查找。

因此，作为对您的问题的一个冗长的回答，只要散列函数是合理的，您就会得到`O(1)`查找，它必须迭代（平均）`O(M/N)`键来给您一个“否定”的结果。

# python - 如何将名称值对存储在文件中

> ID：15470953
> 
> 赞同：1
> 
> 时间：2013-03-18T06:34:49.333
> 
> 标签：python, file, parsing, namevaluecollection

我有大量需要在程序中使用的名称值对。将名称值对存储在文件中的最佳方法应该是什么，以便我可以在我的 python 程序中轻松解析它们。由于某些原因，我们不使用 xml。请提出任何将它们存储在文件中并使用它们的好方法。

PS——在文件中编写名称值对的人不必是开发人员。他们将被告知写入某些值并输入。所以我想让它尽可能简单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T07:01:21.760

**a.csv**
名称1
，值1 名称2，值2

```
import csv
[i for i in csv.reader(open('a.csv').read().splitlines())] 
```

[['name1', 'value1'], ['name2', 'value2']]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T06:38:13.817

您可以在 python 中使用 JSON（推荐）：

```
import json 
```

[http://docs.python.org/2/library/json.html](http://docs.python.org/2/library/json.html)

或简历

[输入 http://docs.python.org/2/library/csv.html](http://docs.python.org/2/library/csv.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T06:39:07.673

您可以将其存储为文件本身的python ，然后`dict`在`.py`脚本中导入。如果您仅在运行时才知道文件名，请使用`__import__`导入相同的文件名。参考[这里](http://docs.python.org/2/library/functions.html#__import__)。通过这种方式，您不需要进行任何解析或转换。

# asp.net - 可以将个人样式添加到主 css 文件吗？

> ID：15470959
> 
> 赞同：0
> 
> 时间：2013-03-18T06:35:25.443
> 
> 标签：asp.net, css

我的问题很简单。我有一些需要在单个 aspx 页面上使用的样式类。例如

```
 .txtbx
    {
     margin-bottom: 20px;
     border-style:solid;
     border-width:thin;
     border-color:Gray;
     height:30px;
     width:250px;   
    -webkit-border-radius: 5px;
    -moz-border-radius: 5px;
     border-radius: 5px;
    } 
```

现在，我可以将这样的样式添加到 site.css 文件中吗（当您选择创建新的 Web 应用程序时，这是默认设置）。如果是，我如何将它应用到单个 .aspx 页面，因为我没有 head 标签。我阅读了一个解决方案，要求我在内容 (.aspx) 页面中包含一个内容占位符并将链接放入其中。但是，我的每个内容页面上已经有两个内容占位符。我需要添加第三个吗？另外，最好有另一个（外部）css文件来定义和使用我的个人风格，例如上面的风格..？谢谢..！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T06:42:20.893

在您的母版页上：

```
<%@ 
    Master Language="C#" 
    AutoEventWireup="false" 
    CodeBehind="BaseMaster.Master.cs" 
    Inherits="BaseMaster" 
    EnableViewState="false"
%>
<html runat="server" id="htmlTag" xmlns="http://www.w3.org/1999/xhtml" clientidmode="Static">
    <head runat="server">
        <title></title>
        <asp:ContentPlaceHolder ID="cphHead" runat="server"></asp:ContentPlaceHolder>
    </head>

    <body runat="server" id="bodyTag" clientidmode="Static">
        <form id="form1" runat="server">
            <asp:ContentPlaceHolder ID="cphBody" runat="server"></asp:ContentPlaceHolder>
        </form>
    </body>
</html> 
```

在您需要样式的页面上：

```
<%@ 
    Page Title="" 
    Language="C#" 
    MasterPageFile="~/BaseMaster.Master" 
    AutoEventWireup="false" 
    CodeBehind="..." 
    Inherits="..." 
    EnableViewState="false"
%>

<asp:Content ID="Content2" ContentPlaceHolderID="cphHead" runat="server">
    <link runat="server" href="Styles/YOURSTYLE.css" rel="stylesheet" type="text/css" />

</asp:Content>

<asp:Content ID="Content3" ContentPlaceHolderID="cphBody" runat="server">
    <input type="hidden" id="Field1" runat="server" clientidmode="Static" />

</asp:Content> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T06:47:02.490

不确定你想要什么，但我可以假设以下。

1.  您有一个全局 .css 文件，您希望将其应用于所有`.aspx`页面。

    然后只需在页面`Link`头部的css文件中添加一个`.Master`

2.  您有一个本地 css 文件，即您只想将 css 应用于给定页面，而不应用于其他页面，在这种情况下，您应该这样做。

    一个。`ContentPlaceHolder`通过在母版页的头部内部创建一个来公开母版页的头部部分。即（下面的母版页负责人）

    ```
     <head runat="server">
          <title></title>
          <asp:ContentPlaceHolder ID="headerContent" runat="server"> 
          </asp:ContentPlaceHolder>
      </head> 
    ```

    湾。并在本地页面上使用此 contentPlaceHolder 来添加指向该本地 css 文件的链接。

    ```
     <asp:Content ID="HeadContent" ContentPlaceHolderID="headerContent" 
       runat="server">
       <link runat="server" href="styleSheet.css" rel="stylesheet"      
        type="text/css" />
      </asp:Content> 
    ```

# android - 万事达卡支付 API 的 Android 示例

> ID：15470963
> 
> 赞同：-1
> 
> 时间：2013-03-18T06:35:33.700
> 
> 标签：android

谁能给我推荐一个教程或博客来解释在 Android 应用程序中使用 Mastercard Payments API 的示例。

**我正在寻找 developer.mastercard.com 以外的示例**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T06:39:38.133

请参考这个网站你有一些想法

[https://developer.mastercard.com/portal/pages/viewpage.action?pageId=14876685](https://developer.mastercard.com/portal/pages/viewpage.action?pageId=14876685)

# c# - 将公共方法重构为另一个类

> ID：15470969
> 
> 赞同：3
> 
> 时间：2013-03-18T06:35:57.687
> 
> 标签：c#, refactoring, automated-refactoring

我有一个 C# win 表单，用作我的应用程序的 GUI。在表单代码中，我编写了表单事件使用的所有公共方法。现在我需要将所有这些公共方法重构为另一个**静态**类。我研究了 7 种重构 VS2010 内置的方法（[参见此处](http://p2p.wrox.com/content/articles/7-refactoring-methods-visual-studio-2010)）。我也使用了 Extract 接口方法，但是在初始化之前我仍然需要实现一个接口方法。我的问题是；Visual Studio 2010 中是否有任何功能可以执行此操作？[像这样](http://www.refactoring.com/catalog/extractClass.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T06:39:01.070

Visual Studio 不支持提取类重构。最新版本的 ReSharper 可以。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T06:41:30.057

1 - 静态类不能实现接口，所以排除这种可能性。

2-你不能模拟静态类。

VS 2010 没有提取类重构技术，因此您需要考虑使用 ReSharper 或其他重构工具

# audio - 如何支持在后台播放音频文件

> ID：15470970
> 
> 赞同：0
> 
> 时间：2013-03-18T06:36:01.513
> 
> 标签：audio

我的项目中有一个功能支持即使在后台状态下也可以播放新的音频文件。我使用 MPMoviePlayerController 类来播放音频文件。但是我发现它是在激活状态下启动的，那么它会在后台状态下继续播放相同的音频（如果音频文件没有播放完）；但在后台状态下它不会启动新的音频。

如何支持在后台播放新音频？我发现iphone的音乐播放器可以支持在后台播放新音频，当设置runloop或随机播放模式时。

以下是我的代码来证明实际上的外观：

```
(void)applicationDidEnterBackground:(UIApplication *)application
{

   if (pCotnroller1) {
       [pCotnroller1 release];
   }
   pCotnroller1 = [[MPMoviePlayerController alloc] initWithContentURL:[NSURL URLWithString:@"http://r.yhiker.com:9001/0086/32/05/060009/Data/6/00863205060009006_24Kbps.mp3"]];
   pCotnroller1.shouldAutoplay = YES;
   [pCotnroller1 play];
   //it wasn't played here
}

(void)applicationWillEnterForeground:(UIApplication *)application
{
   // Called as part of the transition from the background to the active state; here you can undo many of the changes made on entering the background.
   if (pCotnroller1) {
       switch (pCotnroller1.playbackState) {
          case MPMoviePlaybackStateStopped:
            NSLog(@"播放地址");
            break;

          case MPMoviePlaybackStatePaused:
            NSLog(@"播放暂停");
            break;

          case MPMoviePlaybackStateInterrupted:
            NSLog(@"播放中断");
            break;

          case MPMoviePlaybackStateSeekingBackward:
            break;

          case MPMoviePlaybackStateSeekingForward:
            break;

          default:
            break;
     }

     if (pCotnroller1.playbackState == MPMoviePlaybackStatePlaying) {
          //it will come here,and play autoed here

         // [pCotnroller1 play];
     }
     else
     {

     }
 }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T08:23:04.890

我试了一些在网上找到的方法，但都不行。有人用这种方法解决了他的问题。我不知道为什么。

以下是我的代码：</p>

```
- (void)applicationDidEnterBackground:(UIApplication *)application
{
    [application beginReceivingRemoteControlEvents];
    [self updateUserLocation]; 
} 

- (void)updateUserLocation
{
    if (!pCotnroller1) {
    //        pCotnroller1 = [[MPMoviePlayerController alloc] initWithContentURL:[NSURL URLWithString:@"http://r.yhiker.com:9001/0086/32/05/PP0041/Data/13/00863205PP0041013_24Kbps.mp3"]];

        NSString *audioDiskPath = [HelpTools returnSpotAudioDiskPath:@"00863205PP0041013"];
          pCotnroller1 = [[MPMoviePlayerController alloc] initWithContentURL:[NSURL fileURLWithPath:audioDiskPath/*@"/var/mobile/Applications/E7A06CB2-0856-407D-ABA1-2A846B65CD9D/Library/Caches/Data/0086/32/05/PP0041/Data/13/00863205060005016_24Kbps.mp3"*/]];

        pCotnroller1.shouldAutoplay = YES;
        if ([UIApplication sharedApplication].applicationState == UIApplicationStateBackground) {
            [pCotnroller1 play];
            NSLog(@"进入后台");
            UIApplication *app = [UIApplication sharedApplication];
            UIBackgroundTaskIdentifier taskID = [app beginBackgroundTaskWithExpirationHandler:nil];
            if (bgTask != UIBackgroundTaskInvalid) {
                [app endBackgroundTask:bgTask];
                NSLog(@"允许后台播放");
            }

            bgTask = taskID;
        }
        else
        {
            NSLog(@"飞后台进行播放");
            [pCotnroller1 play];
        }
    }
} 
```

控制台打印：2013-03-18 16:20:11.844 Sz[1665:907] [MPAVController] 自动播放：禁用自动播放暂停 2013-03-18 16:20:11.845 Sz[1665:907] [MPAVController] 自动播放：禁用自动播放 2013-03-18 16:20:13.489 Sz[1665:907] 文件存在 2013-03-18 16:20:18.017 Sz[1665:907] [MPAVController] 自动播放：跳过自动播放，禁用（对于当前项目： 1、播放器上：0) 2013-03-18 16:20:18.998 Sz[1665:907] 进入后台 2013-03-18 16:20:21.269 Sz[1665:907] 播放地址 2013-03-18 16: 20:26.251 Sz[1665:907] [MPAVController] 自动播放：启用自动播放 2013-03-18 16:20:26.307 Sz[1665:907] [MPAVController] 自动播放：可能跟上或满缓冲区：0 2013-03- 18 16:20:26.309 Sz[1665:907] [MPAVController] 自动播放：跳过自动播放，没有足够的缓冲来跟上。2013-03-18 16:20:26.319 Sz[1665:907] [MPAVController] 自动播放：启用自动播放 2013-03-18 16:20:26.338 Sz[1665:

# android - 将 createBitmap 从 Java 转换为 JNI

> ID：15470975
> 
> 赞同：1
> 
> 时间：2013-03-18T06:36:23.013
> 
> 标签：android, java-native-interface

我想在 中使用此代码`JNI`，而不返回到`Java`.

我已经将位图操作转换为 JNI（感谢其他 stackoverflow 海报），但这似乎更复杂，因为我不明白如何调用构造函数。

```
Bitmap bmp;
bmp = ((BitmapDrawable)imgview.getDrawable()).getBitmap();
if (bmp == null || !bmp.isMutable()) 
   Bitmap bmp = Bitmap.createBitmap(w, h, Config.ARGB_8888);

   // bitmap manipulations goes here
   jclass java_bitmap_class = (env)->GetObjectClass(java_bitmap);
   class SkBitmap;
   SkBitmap *sk_bitmap = (SkBitmap*)(env)->CallIntMethod(
      java_bitmap, (env)->GetMethodID(java_bitmap_class, "ni", "()I"));
    // there is more c++ code to manipulate bmp, but it is not relevant to a question

imgview.setImageBitmap(bmp); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T03:11:16.923

好的，一旦你掌握了java->jni翻译，其实很简单。基本上你可以在 JNI 方面做任何你可以在 Java 中做的事情。是的，它看起来很乱。我决定不在 JNI 中创建位图，而是访问现有的位图。

```
JNIEnv* Env = 0; jobject Obj; 
jclass cls = 0, ClassImageView = 0, class_drawable = 0, java_bitmap_class = 0;
jmethodID jcontrol_ui = 0, jfindViewById = 0, jgetBitmap = 0, jgetDrawable = 0;

int *getViewBitmapBuffer(int ID) {
  jobject image_view = (jobject) (Env)->CallObjectMethod(Obj, jfindViewById, ID);
  // some values can be cached, hence the checks for "(something == 0)"
  if (ClassImageView == 0) ClassImageView = (Env)->GetObjectClass(image_view);
  if (jgetDrawable == 0) jgetDrawable = (Env)->GetMethodID(ClassImageView, "getDrawable", sig_drawable);
  jobject drawable = (jobject) (Env)->CallObjectMethod(image_view, jgetDrawable);
  if (class_drawable == 0) class_drawable = (Env)->GetObjectClass(drawable);
  if (jgetBitmap == 0) jgetBitmap = (Env)->GetMethodID(class_drawable, "getBitmap", sig_bitmap);
  jobject java_bitmap = (jobject) (Env)->CallObjectMethod(drawable, jgetBitmap);
  if (java_bitmap_class == 0) java_bitmap_class = (Env)->GetObjectClass(java_bitmap);
  class SkBitmap;
  SkBitmap *sk_bitmap = (SkBitmap*)(Env)->CallIntMethod(java_bitmap, (Env)->GetMethodID(java_bitmap_class, "ni", "()I"));
  SkPixelRef *sk_pix_ref;
  sk_pix_ref = (SkPixelRef*)((int*)sk_bitmap)[1];
  int *B = (int*) sk_pix_ref->GetPixels();
  return B;
} 
```

# amazon-web-services - 如何使用浏览器、Javascript 在 Amazon S3 上进行分段上传？

> ID：15470978
> 
> 赞同：3
> 
> 时间：2013-03-18T06:37:06.933
> 
> 标签：amazon-web-services, amazon-s3

如何使用浏览器在 S3 上实现分段上传，Javascript 假设我的浏览器完全支持 CORS。我已经能够使用 JS 在 S3 上上传文件，但我在任何地方都找不到任何关于如何实现分段上传的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T10:00:27.707

什么是后端平台？另请查看 github 存储库[https://github.com/maxgillett/s3_multipart](https://github.com/maxgillett/s3_multipart)

# ruby-on-rails - Nokogiri 和 Mechanize 帮助（通过 div 类和抓取导航到页面）

> ID：15470981
> 
> 赞同：1
> 
> 时间：2013-03-18T06:37:19.173
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, nokogiri, mechanize

我需要帮助通过 div 类而不是链接文本单击某些元素以访问页面以抓取一些数据。

*   从页面[http://www.salatomatic.com/b/United-States+125](http://www.salatomatic.com/b/United-States+125)开始，如何不使用链接文本而是通过 div 类单击每个州的名称？
*   点击一个州后，例如[http://www.salatomatic.com/b/Alabama+7](http://www.salatomatic.com/b/Alabama+7)，我需要点击该州的一个区域，再次通过 div 类，而不是链接的文本。
*   在一个区域内，www [dot] salatomatic [dot] com/c/Birmingham+12，我想循环浏览，点击每个项目（本例中为 11 个清真寺）。
*   在项目/清真寺内，我需要抓取地址（在清真寺标题下方的顶部）并将其存储/创建在我的数据库中。

更新：

我现在有这个：

```
require 'nokogiri'
require 'open-uri'
require 'mechanize'

agent = Mechanize.new

page = agent.get("http://www.salatomatic.com/b/United-States+125")    

#loops through all state links
page.search('.subtitleLink a').map{|a| page.uri.merge a[:href]}.each do |uri|
  page2 = agent.get uri

        #loops through all regions in each state
        page2.search('.subtitleLink a').map{|a| page2.uri.merge a[:href]}.each do |uri|
            page3 = agent.get uri

            #loops through all places in each region
            page3.search('.subtitleLink a').map{|a| page3.uri.merge a[:href]}.each do |uri|
             page4 = agent.get uri

                      #I'm able to grab the title of the place but not sure how to get the address b/c there is no div around it.
                       puts page4.at('.titleBM')

                      #I'm guessing I would use some regex/xpath here to get the address, but how would that work?

                      #This is the structure of the title/address in HTML:

                      <td width="100%"><div class="titleBM">BIS Hoover Crescent Islamic Center </div>2524 Hackberry Lane, Hoover, AL 35226</td> This is the listing page: http://www.salatomatic.com/d/Hoover+12446+BIS-Hoover-Crescent-Islamic-Center

            end
        end             
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T10:42:58.420

重要的是要确保`a[:href]`先将 's 转换为绝对 url。因此，也许：

```
page.search('.subtitleLink a').map{|a| page.uri.merge a[:href]}.each do |uri|
  page2 = agent.get uri
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T09:51:51.590

对于美国和地区的页面，您可以执行以下操作：

```
agent = Mechanize.new
page = agent.get('http://www.salatomatic.com/b/United-States+125')
page.search("#header a").each { |a| ... } 
```

在此块内，您可以找到相应的链接并单击：

```
page.link_with(text: a.text).click 
```

或要求 mechanize 通过 href 加载页面：

```
region_page = agent.get a[:href] 
```

在区域内你可以做同样的事情，只需搜索

```
page.search(".tabTitle a").each ... 
```

用于标签（餐厅、市场、学校等）等

```
page.search(".subtitleLink a").each ... 
```

如何找到这些东西？尝试一些像 SelectorGadget 或类似的小书签，挖掘 HTML 源代码并为您感兴趣的链接找到常见的父/类。

正如@pguardiario 所建议的那样，通过href 更新获取页面

# javascript - 使用 node.js 生成 PKCS#12 (.pfx .p12)？

> ID：15470983
> 
> 赞同：1
> 
> 时间：2013-03-18T06:37:22.923
> 
> 标签：javascript, node.js, cryptography, certificate

我有一定的需要即时生成它们。虽然我想我可以使用 openssl 命令生成文件，然后读取它们并删除它们，但如果有一种方法可以在 node.js 中执行它会很好。

有什么建议么？我检查了[certgen](https://github.com/bcle/certgen)但它没有我要找的东西（另外，它只是调用命令行命令并生成文件......）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-12T01:25:48.297

您可以使用 Forge 在 node.js 中生成 PKCS#12 文件：

[https://github.com/digitalbazaar/forge#pkcs12](https://github.com/digitalbazaar/forge#pkcs12)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T06:42:31.787

我也有同样的要求。

如果您了解 C++，您可以编写一个模块来直接链接 OpenSSL。

如果不是（像我一样），那么您基本上会被 CLI 调用所困扰。

PS：我绝对会避免自己编写代码来生成证书。对于高度安全相关的代码恕我直言，最好重新使用受信任且成熟的产品，例如 OpenSSL。

# mysql - mysql查询特殊字符

> ID：15470984
> 
> 赞同：0
> 
> 时间：2013-03-18T06:37:25.423
> 
> 标签：mysql, special-characters

确定 MySQL 数据库字符集的查询是什么？或者有什么方法可以确定。

如何从列中查询特殊字符（非 UTF8）字符？

```
SELECT * FROM tableName WHERE column ..... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T06:43:26.790

我尝试了一种`regex`没有太大作用的直接方法。我发现的另一个解决方案是：

```
select * from tablename
where columnname regexp(concat('[',char(128),'-',char(255),']')); 
```

至于你可以使用的字符集

```
select DEFAULT_CHARACTER_SET_NAME FROM information_schema.SCHEMATA; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T06:41:37.360

已经有一个与此问题相关的问题..

这是stackoverflow中另一个问题的链接，可以为您提供提示或技巧如何查看MySQL中数据库/表/列的字符集？[点击这里](https://stackoverflow.com/questions/1049728/how-do-i-see-what-character-set-a-database-table-column-is-in-mysql)

# export-to-excel - 在分隔值文件中表示多个值

> ID：15470988
> 
> 赞同：1
> 
> 时间：2013-03-18T06:37:52.287
> 
> 标签：export-to-excel, export-to-csv, openoffice-calc, csv

目前我正在将 xml 文件转换为分隔文件。我正在考虑表示属性字段的多个值的想法。目前我的想法是表示如下值：
`First Name;Last Name;E-mail id;Description`

```
Fresher;user1;"|email1@abc.com|;|email2@abc.com|";This user joined as fresher. 
```

我的问题是；是否有一个标准来表示多个值。？当导入到 .csv 文件中时，如何在 Microsoft excel、openoffice calc 和 lotus notes 123 等常用电子表格程序中处理这种情况..？基于此，我想对我的 xslt 代码进行更改..感谢这方面的任何帮助..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T09:49:42.317

根据我的经验，坚持数据库规范化标准总是好的。网络上到处都有很多信息可供进一步参考。

a）在查看您的提案时，我喜欢用分号而不是逗号分隔每一列。以后更容易将数据导入任何系统，尤其是当您要处理不同的（国家）数字分隔符号标准时

b) 但是，我不喜欢的是“电子邮件”部分。会出现以下几个方面的问题：

1.  引号是问题 - 尽量避免它们。
2.  不要使用与列分隔相同的标记来分隔内部电子邮件地址。因此你不应该在那里使用分号（我猜 - 每条记录可以有一个或几个电子邮件）。

如果您不能引入数据库规范化标准，我将对您的想法提出以下小的改进：

```
Fresher;user1;email1@abc.com|email2@abc.com;This user joined as fresher 
```

如果您提供这种数据文件，我认为每个 vba 用户都可以轻松快速地将其导入 Excel（或任何其他系统）。

# wget - WGET 未完全爬取目标网站

> ID：15470989
> 
> 赞同：1
> 
> 时间：2013-03-18T06:37:55.617
> 
> 标签：wget

我的想法是使用 wget 创建一个非常大的博客的所有线程的完整列表（根据博客本身的线程总数为 50,000）。我在 --spider 模式下使用 wget 来抓取网站并将网址输出到文本文件中。在 1d 3h 3m 3s wget 完成它的工作后，我发现“只有”9668 个文件与网站上提供的 50,000 个文件相比。根据 wget 643 链接被破坏所以我的第一个想法是检查丢失的线程是否与断开的链接有某种关系，但显然它们不是。该博客将其主题保存在以年和月命名的文件夹中（例如/2012/01/name_of_thread.html）。一些损坏的链接似乎是指 wget 从中下载一些线程的文件夹，因此我将排除所选文件夹的中断。

我从哪里开始了解出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T16:57:53.047

有时博客发布/托管平台使用不寻常的 robots.txt 文件，因此可能需要 -e robots=off。我在爬取 WordPress 博客时遇到了类似的问题，其中奇怪的输出被机器人排除所塑造——这与您的问题有些相似。

根据博客的结构，您可能会通过更仔细的抓取获得更好的结果。如果它使用分页（www.site.com/archive/1/、www.site.com/archive/2/...），您可以通过 for 循环抓取每个页面并解析每个页面的内容。这将为您提供更可控的结果，因为您可以针对一小部分数据（例如，一次十页线程）而不是一次所有 50k 线程进行验证和测试。

该网站也可能报告错误的数字 - 您确定应该有 50k 个线程吗？

# autofixture - 为什么使用 AutoFixture Freeze、SemanticComparison Likeness 和 CreateProxy 的简单测试不能通过？

> ID：15470997
> 
> 赞同：7
> 
> 时间：2013-03-18T06:38:30.193
> 
> 标签：autofixture, semantic-comparison

我试图了解如何使用使用简单类`CreateProxy()`的两个实例的功能。`Likeness<T>()`

```
public class Band
{
    public string Strings { get; set; }
    public string Brass { get; set; }
} 
```

在下面的测试中，我使用了`Fixture`一个`Create<T>`具有`Band`两个字符串属性值的实例。

```
[Fact]
public void Equality_Behaves_As_Expected()
{
    // arrange
    var fixture = new Fixture();
    fixture.Customize(new AutoMoqCustomization());

    var original = fixture.Create<Band>();
    //   Brass something like --> "Brass65756b89-d9f3-42f8-88fc-ab6de5ae65cd"
    //   Strings something like --> "Strings7439fa1b-014d-4544-8428-baea66858940"

    // act
    var dupe = new Band {Brass = original.Brass, 
                         Strings = original.Strings};
    //   Brass same as original's like --> "Brass65756b89-d9f3-42f8-88fc-ab6de5ae65cd"
    //   Strings same as original's like --> "Strings7439fa1b-014d-4544-8428-baea66858940" 
```

我尝试了许多不同的断言，但问题的关键似乎是该`CreateProxy`方法没有填充 的属性`Band`，因此即使我尝试比较`Band`具有相同属性值的两个实例，该`CreateProxy`方法中的实例总是有空值。

```
 // assert
    var likeness = dupe.AsSource().OfLikeness<Band>()
                       .Without(x => x.Brass).CreateProxy();
    //   Brass & String properties are null using dupe as source of likeness (!)

    //var likeness = original.AsSource().OfLikeness<Band>()
    //                       .Without(x => x.Brass).CreateProxy();
    //   Brass & String properties are null using original as source of likeness (!)

    //Assert.True(likeness.Equals(original)); // Fails
    //Assert.True(original.Equals(likeness)); // Fails

    // below are using FluentAssertions assembly
    //likeness.Should().Be(original);           // Fails (null properties)
    //original.Should().Be(likeness);           // Fails (null properties)
    //likeness.ShouldBeEquivalentTo(original);  // Fails (null properties)
    //original.ShouldBeEquivalentTo(likeness);  // Fails (null properties)
} 
```

我一定是做错了什么，但是我已经阅读了我在 Ploeh 博客和 SO 上可以找到的所有内容，并且找不到一个足够简单的示例来与我正在做的事情进行比较。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T11:49:36.317

如果您在代理实例上分配值（在调用`CreateProxy`方法之后），则测试通过：

```
[Fact]
public void Equality_Behaves_As_Expected()
{
    // AutoMoqCustomization is not necessary.
    var original = new Fixture().Create<Band>();

    var likeness = original
        .AsSource()
        .OfLikeness<Band>()
        .Without(x => x.Brass)
        .CreateProxy();

    likeness.Brass = "foo"; // Ignored.
    likeness.Strings = original.Strings;

    Assert.True(likeness.Equals(original));
    likeness.Should().Be(original);
    likeness.ShouldBeEquivalentTo(original);
} 
```

请记住，这会在*目标*`Likeness`类型上创建代理，并且只有该类型的实例会覆盖.*`Equals`*

 *由于*源*类型保持不变，以下断言将不会成功：

`Assert.True(original.Equals(likeness));`
`original.Should().Be(likeness);`
`original.ShouldBeEquivalentTo(likeness);`

**更新**

从 3.0.4 及更高版本开始，这些值会自动复制到代理实例（这意味着，`likeness.Strings = original.Strings;`将自动发生）。*