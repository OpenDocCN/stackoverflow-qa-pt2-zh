# StackOverflow 问答 14764000-14764999

# actionscript-3 - 内部 AS3 预加载器和阶段问题

> ID：14764001
> 
> 赞同：0
> 
> 时间：2013-02-08T00:55:19.527
> 
> 标签：actionscript-3, flash, preloader, flash-cs6

我需要创建一个没有外部文件的单一 SWF，因此我试图将一个内部预加载器添加到我的具有 [嵌入] 资产的 Flash 项目中。我知道 [embed] 会导致预加载器出现问题，因为它将资产放在第 1 帧上。我已经尝试了这些帖子中推荐的解决方案，您将文档类设置为预加载器类：

[带有嵌入字节数组的 SWF 预加载器](https://stackoverflow.com/questions/5452066/preloader-for-swf-with-embed-bytearray)

[如何在 AS3 中创建预加载器](https://stackoverflow.com/questions/8410774/how-to-create-preloader-in-as3)

我可以让它工作，但只有当我注释掉任何涉及舞台的代码行时，否则我会收到“错误 #1009：无法访问空对象引用的属性或方法”。不过，这些线是必不可少的，那么有人知道如何在舞台上修复这些错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T04:37:45.980

你还没有发布你的代码或你的 fla，所以我所能做的就是分享对我有用的东西。

首先，我不会使用 Embed。相反，请使用 swc。我发现嵌入可能不可靠，因为实际上将整个资产放入其中（至少在使用 Flash Builder + Flash Pro 发布时，这是我的工作流程）。

将资产放入 swc 后，请尝试以下步骤：

1.  将您的导出帧设置为第 10 帧（或第 1 帧以外的任何帧——我喜欢第 10 帧，因为这样您就可以阅读“预加载器”的标签）
2.  将您的实际内容放在第 11 帧上。您可以通过多种方式构建它。因为我对接口进行编程，所以我给第 11 帧上的任何东西一个实例名称，然后使用一个 setter 来确定我的“第一件事”已经放在舞台上。我可以解决这个问题，因为我的主文档类只知道接口的定义，而不是类的完整实现，所以不需要加载类来让主文档类工作。您可能没有真正使用时间线，也可能没有对接口进行编程，因此您可能只需将第 11 帧上的符号的基类设置为您尝试执行的任何操作的主要逻辑。
3.  将您的预加载器图形放在第 1 帧中。我不确定为什么您的舞台参考如此重要。我个人不会在预加载器中使用任何逻辑。相反，我使用了一个跨越 1-10 帧的微调器（加上“正在加载...”这个词。微调器只是在类加载时旋转。嵌入框架充当临时“停止”，它只是将时间线保留到那些类已经加载。一旦加载了类，时间线就会像你调用`play()`的那样运行。所以它真的可以这么简单。如果你需要它更复杂，给你的预加载器图形一个实例名称并设置为它设置一个 getter/setter 对，然后使用 setter 触发访问阶段的逻辑。你几乎可以保证此时有一个有效的阶段。

警告：如果你确实使用了时间，如果你试图跳转到一个尚未加载的帧，你会得到奇怪的结果，所以一定要检查一个给定的帧是否已经加载，如果它靠近您的主时间线结束并且您的主时间线在调用`goToAndPlay()`或之前有大量资产`goToAndStop()`。

一些可能对您有进一步帮助的参考资料：

*   [Preloaders vs as 3](http://www.actionscript.org/resources/articles/983/1/Preloaders-vs-as-3/Page1.html)（我建议你阅读整个系列这是其中的一部分。这是一个令人惊叹的系列，我希望我在 3 年前找到）
*   [解决框架 2 问题](http://www.meetup.com/atlflex/files/)演示和代码
*   [将时间线与 OOP 相结合](http://www.developria.com/2010/04/combining-the-timeline-with-oo.html)示例代码在[这里](http://flexdiary.blogspot.com/2010/04/sample-code-for-oop-timeline-insideria.html)（长篇大论）

# java - GridBagLayout 交错按钮

> ID：14764008
> 
> 赞同：2
> 
> 时间：2013-02-08T00:56:16.507
> 
> 标签：java, swing, gridbaglayout

如何让 GridBagLayout 的列均匀分布，以便我可以像在标准交错计算机键盘上一样放置按钮？我说的是这样的事情，其中​​按钮彼此不太对齐：![QWERTY键盘](../Images/0d4554d68b35828a503566aeaf76af95.png)

最小功能工作示例（注意交错`gridx`和`gridwidth`值）：

```
import java.awt.*;
import javax.swing.*;

public class Keyboard extends JFrame {
    public static void main(String args[]) {
        (new Keyboard()).setVisible(true);
    }

    public Keyboard() {
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setBounds(100, 100, 400, 300);
        setLayout(new GridBagLayout());

        JButton[] b = new JButton[5];
        GridBagConstraints c = new GridBagConstraints();
        c.fill = GridBagConstraints.BOTH;
        c.ipady = 20;
        c.weightx = 0.5;
        c.weighty = 0.5;
        c.insets = new Insets(2, 2, 2, 2);

        b[0] = new JButton("A");
        c.gridx = 0;
        c.gridy = 0;
        c.gridwidth = 2;
        add(b[0], c);

        b[1] = new JButton("B");
        c.gridx = 2;
        c.gridy = 0;
        c.gridwidth = 2;
        add(b[1], c);

        b[2] = new JButton("C");
        c.gridx = 4;
        c.gridy = 0;
        c.gridwidth = 2;
        add(b[2], c);

        b[3] = new JButton("D");
        c.gridx = 0;
        c.gridy = 1;
        c.gridwidth = 3;
        add(b[3], c);

        b[4] = new JButton("E");
        c.gridx = 3;
        c.gridy = 1;
        c.gridwidth = 2;
        add(b[4], c);
    }
} 
```

我希望按钮 D 的右边框一直到 A 和 B 之间的中间，而 E 应该在 B 和 C 之间。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T04:06:39.007

您是否考虑在不透明度设置为 0 的第二行的开头添加一个虚拟项目？只需将其宽度设置为您需要的确切标签。

# mono - MonoTouch：使用可移植类库创建多平台应用程序

> ID：14764011
> 
> 赞同：4
> 
> 时间：2013-02-08T00:56:30.993
> 
> 标签：mono, xamarin.ios, xamarin.android, portable-class-library

我的场景：尝试将我们公司创建的应用程序的一小部分从本机代码（iOS 的 ObjC / Android 的 Java）移植到 C-Sharp。该项目将与我们的网络服务进行交互。这个项目的目标是弄清楚将我们的整个应用程序移植到 Mono 的可行性。

要创建 URL，我想使用`String.Format()`. 我认为将这个“服务层”放在可移植类库 (PCL) 中是一个明智的主意，因为我不希望这段代码跨平台更改。遗憾的是，似乎 String 库不适用于 PCL。

所以我的问题如下：

1.  我认为 PCL 与“普通”库相比的主要优势在于它们不需要为不同的平台重新编译。这个假设正确吗？
2.  这段经历让我觉得目前 PCL 相当有限。我应该尝试坚持使用 PCL 并解决这些问题，还是现在坚持使用“普通”库会更好？--- 我假设“普通”库有更多的功能。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-08T07:48:17.890

您目前可以在许多平台上使用 PCL，但它确实需要对您的设置进行一些小技巧。

这些 hack 列在[http://slodge.blogspot.co.uk/2012/12/cross-platform-winrt-monodroid.html](http://slodge.blogspot.co.uk/2012/12/cross-platform-winrt-monodroid.html)

一旦你得到这些工作，那么可用的功能就相当广泛了——它肯定包括像 String.Format 这样的东西

对于 PCL 配置文件不够广泛的情况，您可以使用多种技术来扩展它们 - 请参阅[http://blogs.msdn.com/b/dsplaisted/archive/2012/08/27/how-to-make -portable-class-libraries-work-for-you.aspx](http://blogs.msdn.com/b/dsplaisted/archive/2012/08/27/how-to-make-portable-class-libraries-work-for-you.aspx)。我通常使用的技术是使用 MvvmCross 插件——它们基本上是具有平台特定实现的 PCL 接口。**但**这些插件通常处于“使蓝牙工作”级别，而不是 String.Format 级别

我在 WinRT、WP、WPF、MonoTouch 和 Mono for Android 上做了大量的 PCL 工作 - 请参阅[http://slodge.blogspot.co.uk/p/mvvmcross-quicklist.html](http://slodge.blogspot.co.uk/p/mvvmcross-quicklist.html)以获得许多 PCL 工作的链接。

确实，Xamarin 已经建议不要使用 PCL 几年了，但这种情况现在已经改变，对 PCL 的官方支持正在进行中 - 请参阅[http://slodge.blogspot.co.uk/2013/02/the-未来是便携式的.html](http://slodge.blogspot.co.uk/2013/02/the-future-is-portable.html)

从开发的角度来看——尤其是从使用重构和测试工具的角度来看——我毫不犹豫地建议您现在使用 PCL……尤其是对于 String.Format 级别的操作。然而，每个项目都是独一无二的......所以它并不总是正确的答案。

* * *

一个重要的注意事项：现在最好**不要**将 PCL 二进制文件重用到 MonoTouch 平台 - 现在，针对特定的 MonoTouch 库平台构建您的可移植库。见[http://slodge.blogspot.co.uk/2013/01/almost-portable-binaries.html?m=1](http://slodge.blogspot.co.uk/2013/01/almost-portable-binaries.html?m=1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T07:47:43.010

也许你想看看其他人的努力，他们已经让 PCL 在相当程度上与 monotouch 和 monodroid 一起工作。

例如参见[http://www.slideshare.net/cirrious/mvvm-cross-going-portable](http://www.slideshare.net/cirrious/mvvm-cross-going-portable)。您还可以在[http://slodge.blogspot.co.uk/2012/09/mvvmcross-vnext-portable-class.html](http://slodge.blogspot.co.uk/2012/09/mvvmcross-vnext-portable-class.html)找到有关如何为 MVVMCross 设置 PCL 支持的说明。

Xamarin 最近致力于提供更强大的 PCL 支持，而不是人们不得不做出的一些变通办法，但值得付出努力。

# javascript - FusionCharts 错误

> ID：14764013
> 
> 赞同：0
> 
> 时间：2013-02-08T00:56:44.793
> 
> 标签：javascript, fusioncharts

我正在尝试将我一直使用的 Fusion Charts 的 Flash 版本转换为 Javascript。

我导入了 FusionCharts.HC.js 和 FusionCharts.HC.Charts.js 以及 FusionCharts.js，据我所知，我在渲染图表之前放置了 FusionCharts.setCurrentRenderer('javascript') 行。类似于以下内容：

```
FusionCharts.setCurrentRenderer('javascript');
var XMLArray = ...
barChart = new FusionCharts("/sei/static/flash/FCF_StackedBar2D.swf?ChartNoDataText= ", "barChartLarge", 460, 260, 0, 1);

barChart.setDataXML(XMLArray);
barChart.render("barDivBroadcast"); 
```

没有 setCurrentRenderer 它很好，并在 Flash 中显示我想要的内容。但是当我添加该行以更改渲染时，出现以下错误

错误：DesignTimeError：#25081843 timelineChart.render 错误>>#25081843：IECompatibility() 图表 ID 与 JavaScript 变量名称相同。变量命名错误。请为图表 JS 变量、图表 ID 和容器 ID 使用唯一名称。

而不是图表，此错误消息“不支持图表类型”出现在屏幕上，具有白色背景。

有人可以帮我吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-04T06:50:33.163

尝试像这样处理融合图表对象：

```
If FusionCharts(barChartLarge){
       FusionCharts(barChartLarge).dispose();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T07:06:21.923

似乎您正在/正在免费使用 FusionCharts。它不支持 JavaScript 图表。

但是，由于您使用的是所需的 JS 文件，因此只要您提供 corect 图表 swf 文件名或图表别名，它就应该可以工作。

使用`StackedBar2D.swf`or `stackedbar2d`代替`FCF_StackedBar2D.swf`.

# performance - 希望优化 webgl 中的线条渲染（使用 three.js 库）

> ID：14764017
> 
> 赞同：0
> 
> 时间：2013-02-08T00:57:01.490
> 
> 标签：performance, three.js, webgl

最近开始学习 webGL，决定使用 Three.js 库。

目前，除了渲染超过 100K 的立方体外，我还尝试在这些立方体之间渲染线条（超过 100K）。

当我尝试绘制线条而不是立方体时，会出现渲染问题。渲染 100k 立方体相对较快。即使渲染那些 100K+ 线也相对较快，但是当我尝试使用 TrackballControls 进行缩放/平移时，FPS 下降到几乎为 0。

我搜索了 StackOverflow 和其他各种网站，以提高我的应用程序的性能。我使用了合并几何技术，延迟渲染线条（基本上一次使用 js 中的超时 x 多维数据集/线条），并调整线条的外观以需要最少的渲染时间。

是否有任何其他方法可以构建线条以使渲染/fps 不受影响？我正在构建一组线条，然后将其添加到场景中。但是有没有一种方法可以与线合并？我应该使用不同的对象来构建我的线条吗？

我只是觉得奇怪的是，我可以使用超过 100k 的立方体轻松渲染/平移/缩放/保持高 fps，但使用线条（这是除了点之外最基本的几何形式），一切都崩溃了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T07:38:05.570

您已经发现（困难的方式）图形芯片供应商将他们的重点放在他们的设计驱动程序上。但这在 3D 图形中是可以预料的，因为我的许多游戏都没有使用线（是的，最基本的几何图形），因此它们不像多边形那样受到太多关注。您可以查看示例 webgl_buffergeometry_lines.html，这可能是绘制线条的更快方法。

# collections - 为什么要使用 Collection.allow 而不是 Meteor.methods 和 Meteor.call 这些方法？

> ID：14764019
> 
> 赞同：9
> 
> 时间：2013-02-08T00:57:10.870
> 
> 标签：collections, meteor

运行基本的派对流星示例（[http://meteor.com/examples/parties](http://meteor.com/examples/parties)），

我想知道为什么你需要使用 Collection.allow 来指定哪些插入、更新等......而不是仅仅使用 Meteor.methods 然后从客户端发出 Meteor.call 。

似乎“方法”方式总是更好，因为它更灵活（即自定义函数）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-08T23:00:48.483

允许和拒绝接口对于您想要的大多数访问控制来说足够灵活。如果你可以使用内置函数，你最终会得到更清晰、更易理解、更易读的代码。它也更加 Meteoric，因为它保留了 Meteor 的“database-everywhere”抽象，即能够直接在客户端上执行数据库操作。

可以拒绝对集合的所有操作，然后仅通过方法公开对集合的访问。但是很有可能你最终会重新实现一个 CRUD 接口，并且你最终可能会重新实现允许和拒绝函数。

如果我发现很难通过允许和拒绝接口表达我需要的访问控制，我会尝试仅使用 Meteor.methods。例如，有时您需要一次更新两个相关的集合，并且验证需要在确定是否应该继续操作之前检查对这两个集合的建议更改。使用 Meteor.method 会更干净。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T01:25:21.517

您误认为 Collection.allow 目的：它用于限制**客户端**代码可以对您的集合执行的操作。这些限制不适用于服务器端。而且您确实应该在 Meteor.methods 中对您的集合执行写操作，然后从客户端代码中调用它们。

Collection.allow 在这里是为了防止最终用户和潜在的黑客能够对你的数据做任何让他喜欢的事情。永远不要忘记您的客户端代码可以调整。

在您提到的示例中，假设您的 Party 结构中有另一个字段。您可能不希望我能够更新此字段。如果没有对缔约方中字段名称的“更新”回调测试，我将能够在该字段中注入更改。

明白这点？

# mysql - Ruby on rails Socksify 问题

> ID：14764026
> 
> 赞同：0
> 
> 时间：2013-02-08T00:57:39.127
> 
> 标签：mysql, ruby, ruby-on-rails-3, sockets, tor

我使用 a`rake task`来执行大规模更新，但我需要不断更改我的 IP 地址，并且为此我使用 Tor。现在，Tor 不会传输我所有的 ruby​​ 命令提示符流量，所以我使用 [Ruby Socksify](http://socksify.rubyforge.org/)但我得到了这个：

```
 cannot load such file -socksify 
```

这是我的代码：

```
 require 'socksify'
    TCPSocket::socks_server = "127.0.0.1"
    TCPSocket::socks_port = 9050 
```

已经做了`gem install socksify`

有什么建议吗？另外，还有其他方法可以执行此操作吗？已经使用了advanced tor，但它无法连接到远程mysql数据库我得到`Reading authorization packet`错误:(

# c++ - 如何在 Bullet 中设置碰撞对象的颜色？

> ID：14764027
> 
> 赞同：1
> 
> 时间：2013-02-08T00:57:53.260
> 
> 标签：c++, bulletphysics

所以在那里我做了一个很好的调试抽屉......并让所有世界对象都被淹没......现在我想要一些用特殊颜色绘制（例如子弹播放器，敌人网格表示）。那么如何指定网格颜色以便[`dynamicsWorld->getDebugDrawer()->debugDrawWorld();`](http://bulletphysics.com/ftp/pub/test/physics/Bullet_User_Manual.pdf)正确绘制呢？我在[btCollisionShape](http://www.continuousphysics.com/Bullet/BulletFull/classbtCollisionShape.html)和[btCollisionObject](http://www.continuousphysics.com/Bullet/BulletFull/classbtCollisionObject.html) API=( 那么如何设置颜色呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T20:30:48.623

如果我没记错的话，您应该能够在覆盖`btIDebugDraw::drawLine`和时控制颜色`btIDebugDraw::drawContactPoint`，因为两者的最后一个参数是`const btVector3&`代表红色、绿色和蓝色 - 来自班级的评论，范围为 [0 .. 1]。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-20T17:41:48.643

迟到总比不到好。

```
const glm::mat4 transform = glm::mat4(1.0f); // Identiy
btTransform btTransf;
btTransf.setIdentity();
btTransf.setFromOpenGLMatrix(glm::value_ptr(transform));
btRigidBody* rb = new btRigidBody(0.0f, new btDefaultMotionState(btTransf), new btSphereShape(0.5f));
rb->setCustomDebugColor(btVector3(1.0f, 0.0f, 0.0f)); // Red collision 
```

# javascript - JavaScript 时间到

> ID：14764029
> 
> 赞同：0
> 
> 时间：2013-02-08T00:58:19.807
> 
> 标签：javascript, date

我需要做最简单的事情，输入日期/时间并写出直到那个时间的小时：分钟：秒。我一直无法弄清楚。我什至尝试使用很棒的 Datejs，但似乎没有内置此功能。

时间将在 0 分钟 -> 20 分钟的范围内

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-08T02:47:05.637

不要为如此简单的事情而烦恼图书馆。无论您是否使用库，您都必须知道输入日期字符串的格式，因此假设 ISO8601（如 2013-02-08T08:34:15Z）您可以执行以下操作：

```
// Convert string in ISO8601 format to date object
// e.g. 2013-02-08T02:40:00Z
//
function isoToObj(s) {
    var b = s.split(/[-TZ:]/i);

    return new Date(Date.UTC(b[0], --b[1], b[2], b[3], b[4], b[5]));

}

function timeToGo(s) {

    // Utility to add leading zero
    function z(n) {
      return (n < 10? '0' : '') + n;
    }

    // Convert string to date object
    var d = isoToObj(s);
    var diff = d - new Date();

    // Allow for previous times
    var sign = diff < 0? '-' : '';
    diff = Math.abs(diff);

    // Get time components
    var hours = diff/3.6e6 | 0;
    var mins  = diff%3.6e6 / 6e4 | 0;
    var secs  = Math.round(diff%6e4 / 1e3);

    // Return formatted string
    return sign + z(hours) + ':' + z(mins) + ':' + z(secs);   
} 
```

您可能需要使用将字符串转换为日期的函数，但并不多。无论如何，您都应该提供 UTC 时间字符串，除非您可以确定客户端的本地时间设置为提供的日期时间值的时区。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T01:04:34.477

而不是 Date.js，请尝试[Moment.js](http://momentjs.com/)。

# android - 片段：删除视图中的所有片段

> ID：14764043
> 
> 赞同：11
> 
> 时间：2013-02-08T00:59:31.213
> 
> 标签：android, android-fragments

我面临的场景是在我的应用程序中，我有一个*单窗格*和*双窗格*样式布局。对于每种不同样式的布局，我没有单独处理屏幕之间可能的每一个导航操作，而是使用一个函数，它可以在给定所需屏幕时正确设置布局。

它基本上是`switch`应用程序中每个屏幕的语句，每个屏幕中都有一个嵌套`switch`语句来处理每种布局样式。这就是我在代码中所说的：

```
protected void setupScreen() {
    switch(currentScreen) {
    case SCREEN_ONE:
        switch(currentLayout) {
        case SINGLE_PANE:
            // Perform actions to setup the screen
            break;
        case DUAL_PANE:
            // Perform actions to setup the screen
            break;
        }
        break;
    case SCREEN_TWO:
        switch(currentLayout) {
        case SINGLE_PANE:
            // Perform actions to setup the screen
            break;
        case DUAL_PANE:
            // Perform actions to setup the screen
            break;
        }
        break
    // ... etc ....
    }
} 
```

在我要*执行设置屏幕操作*的部分中，这包括以下三个基本操作：

```
// Create the fragments if necessary
if (screenFragment == null) {
    screenFragment = new myFragment();
}

// Remove the existing fragments from the layout views
// HOW???

// Add the fragments for this screen to the view
getSupportFragmentManager().beginTransaction().add(pane1.getId(), myFragment, "myFragment").commit(); 
```

如您所见，我正在努力的是**如何**进行第二步。在不确切知道要删除哪些的情况下，**如何**从给定中删除所有`Fragment`s ？`View`我发现的最接近的是`FragmentTransaction.replace()`它确实为每种情况都成功地做到了这一点，**但**事实证明你正在用`Fragment`相同的片段替换 a 。在这种情况下，它不会全部删除，然后添加（如文档建议的那样），它似乎只是删除了。这是使用兼容性库的问题还是不`FragmentTransaction.replace()`应该使用的方式？

无论如何，我应该怎么做呢？我是否必须编写一个`removeAllFragments()`函数来遍历每个片段并将其分离，或者有没有办法完成“二合一”`FragmentTransaction.replace()`函数声称要做的前半部分？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2014-06-19T15:25:35.353

其他答案都没有真正为我工作。这是我所做的：

```
List<Fragment> al = getSupportFragmentManager().getFragments();
if (al == null) {
   // code that handles no existing fragments
   return;
}

for (Fragment frag : al)
{
   // To save any of the fragments, add this check.
   // A tag can be added as a third parameter to the fragment when you commit it
   if (frag == null || frag.getTag().equals("<tag-name>")) {
      continue;
   }

   getSupportFragmentManager().beginTransaction().remove(frag).commit(); 
} 
```

或者，如果您被迫使用它（但不推荐）：

```
.commitAllowingStateLoss(); 
```

此外，如果您多次从视图中删除所有片段，您可能会考虑检查当前片段是否为 null 或`isDetached()`or`isRemoving()`或者您可能会得到`NullPointerExceptions`.

**更新**： 的文档现在`getSupportFragmentManger().getFragments()`显然是[隐藏](https://code.google.com/p/doclava/wiki/JavadocTags#@hide)的，但在我的代码中仍然可以正常工作。这是文档的屏幕截图：

![在此处输入图像描述](../Images/e279b86db702d3fc03a93486ce45cc62.png)

话虽如此，由于它是隐藏的，他们不再希望使用这种方法，所以请参阅下面的更新。

**更新 8-4-15**：如果您不使用片段的支持库，很遗憾没有`getFragments()`可用的库，但仍有一些更不方便的选项。

1.  在创建时给每个`fragment`a`tag`或`id`，并遍历它们以`fragment`根据需要处理每个。
2.  创建一个侦听器`onAttachListener`，以便每次将新`fragment`的附加到 时`activity`，您可以存储它`fragment`，然后遍历该数据结构以`fragment`根据需要处理每个。

当不使用`getSupportFragmentManager()`, 来处理您需要使用的事务时`getFragmentManager()`。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-08T02:02:27.353

典型的机制是使用[`FragmentManager.findFragmentByTag()`](http://developer.android.com/reference/android/app/FragmentManager.html#findFragmentByTag(java.lang.String)). 您使用它并将标签添加到您的片段（或 id 的替代品）。通过这种方式，您可以确定当前正在管理哪些片段。然后，一旦你有一个当前片段的句柄（findFragmentByTag 返回非空值），你就可以使用[`FragmentManager.beginTransaction()`](http://developer.android.com/reference/android/app/FragmentManager.html#beginTransaction())启动一个 FragmentTransaction 并删除/添加必要的片段。以这种方式工作将使您避免对要保留的片段进行“重新添加”过程。

我可能会做的是这样的代码：（警告伪代码）

```
Fragment pane1 = FragmentManager.findFragmentByTag("myFragmentPane1");
Fragment pane2 = FragmentManager.findFragmentByTag("myFragmentPane2");

setupScreen(pane1, pane2); 
```

您还应该考虑班级的子班级，而不是“一个班级中的所有内容”。您有一个相当明显的 Martin Fowler 的[Replace Conditional with Subclass](http://www.refactoring.com/catalog/replaceConditionalWithPolymorphism.html)案例。否则，我担心当您添加另一个屏幕时，这将难以管理。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-04-30T09:52:13.600

如果你使用**android.support.v4.app.Fragment**你可以这样做：

```
List<Fragment> fragments = getSupportFragmentManager().getFragments();
if (fragments != null) {
    for (Fragment fragment : fragments) {
        getSupportFragmentManager().beginTransaction().remove(fragment).commit();
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-09T06:08:23.383

原来`FragmentTransaction.replace()`是正确的操作，应该可以正常工作。它只是在使用时不起作用`ActionBarSherlock`，`SherlockFragmentActivity`所以我只能假设它是这个兼容性库中的一个错误。

我已经通过使用下面的代码在 API11+、android 兼容性库和 ActionBarSherlock 上通过 Android 实现所需的行为来确认这一点。它只在最后一个实例中中断。

```
package com.test.test;

import com.actionbarsherlock.app.SherlockFragmentActivity;

import android.os.Bundle;
import android.content.Context;
import android.graphics.Color;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentActivity;
import android.view.Gravity;
import android.view.LayoutInflater;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.widget.Button;
import android.widget.FrameLayout;
import android.widget.LinearLayout;
import android.widget.LinearLayout.LayoutParams;
import android.widget.TextView;

public class MainActivity extends SherlockFragmentActivity {
  // Consistent fragment instance
    myFragment myFrag = null;

    // Views
    FrameLayout fl = null;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        LinearLayout ll = new LinearLayout(this);
        ll.setOrientation(LinearLayout.VERTICAL);

        Button b = new Button(this);
        b.setText("Repeat");
        b.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {

                // Reattach the same fragment
                getSupportFragmentManager().beginTransaction().replace(fl.getId(), myFrag).commit();

            }
        });

        fl = new FrameLayout(this);
        fl.setId(200);
        fl.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT));

        myFrag = new myFragment();
        getSupportFragmentManager().beginTransaction().add(fl.getId(), myFrag).commit();

        ll.addView(b);
        ll.addView(fl);

        setContentView(ll);
    }

    public static class myFragment extends Fragment {

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container,
                Bundle savedInstanceState) {
            TextView tv = new TextView(getActivity());
            tv.setText("My fragment");
            tv.setGravity(Gravity.CENTER);
            tv.setBackgroundColor(Color.RED);

            return tv;
        }
    }

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-08T01:57:34.113

这或多或少是我处理这个问题的方式。让您的所有片段都实现类似以下的接口：

```
public interface NamedFragment{

    public FragmentName getFragmentName();

} 
```

制作一个与您的片段相对应的枚举：

```
public enum FragmentName{

    SOME_FRAGMENT,
    SOME_OTHER_FRAGMENT;

} 
```

然后在您的片段切换活动中：

```
// Get the manager and transaction separately so you can use both: 
    FragmentManager fragmentManager = getSupportFragmentManager();
    FragmentTransaction ft = fragmentManager.beginTransaction();

// Get a reference to the fragment(s) currently in the container(s)
    Fragment currentFragment = fragmentManager.findFragmentById(position);

    FragmentName cFragmentName =
            ((NamedFragment) currentFragment).getFragmentName();
    Fragment nextFragment =
            Fragment.instantiate(this, some_new_fragment_string);
    FragmentName nFragmentName =
            ((NamedFragment) nextFragment).getFragmentName();
// Compare the "names"
    if(cFragmentName != nFragmentName){
        ft.replace(position, nextFragment);
    } 
```

你必须改变一些东西以适应你的细节。

# javascript - 正则表达式在 IE 中不起作用

> ID：14764044
> 
> 赞同：-4
> 
> 时间：2013-02-08T00:59:33.807
> 
> 标签：javascript, internet-explorer

浏览器版本 8

正则表达式在 Firefox 中运行良好：

文件名变量包含：testfile.arv（见无效扩展名）

```
if (/\.(doc|xls|ppt|eml|txt|pdf|rtf).?\b/i.test(filename)) {
...
} 
```

在 IE 中，它只是作为有效名称传递出去。

编辑：在我按照下面的建议更改表达式之后。它继续失败 - 仅在 IE 中。让我意识到这不是关于这个表达式，而是关于 IE 和我用来执行此操作的 javascript 模块。

我正在使用[http://malsup.com/jquery/form/](http://malsup.com/jquery/form/)这个表单插件来上传多个文件。这在 Firefox 上可以正常工作，但不能在 Internet Explorer 上工作。它只是简单地上传所有内容而不显示上传进度等。

由于这个问题变得不同，我将关闭此线程并提交新问题。

谢谢大家的时间，很抱歉给您带来麻烦。我发现这个移植有点困难（从 Firefox 到 IE）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T01:20:14.430

尝试以“$”结尾，就像这样

```
if (/\.(doc|xls|ppt|eml|txt|pdf|rtf)$/i.test(filename)) {
  // super awesome code
} 
```

# scala - 迁移到 Play 2.1 后编译路由时出现问题

> ID：14764050
> 
> 赞同：1
> 
> 时间：2013-02-08T01:00:14.273
> 
> 标签：scala, playframework-2.1, cake-pattern

迁移到 Play-2.1 后，我遇到了路由编译器停止为我的路由文件工作的问题。Play-2.0.4 完全没问题，但现在我遇到了构建错误，找不到任何解决方法。

在我的项目中，我使用的是蛋糕模式，因此控制器操作不是通过 可见`<package>.<controller class>.<action>`，而是通过`<package>.<component registry>.<controller instance>.<action>`. 新的播放路由编译器正在使用除最后两个之外的所有操作路径组件来形成将在托管源中使用的包名称（据我所知，我可以在[https://github.com/playframework/Play20/blob/2.1 .0/framework/src/routes-compiler/src/main/scala/play/router/RoutesCompiler.scala](https://github.com/playframework/Play20/blob/2.1.0/framework/src/routes-compiler/src/main/scala/play/router/RoutesCompiler.scala)）。在我的情况下，它会导致`<package>.<component registry>`选择作为包名称的情况，这会在构建过程中导致错误：

```
[error] server/target/scala-2.10/src_managed/main/com/grumpycats/mmmtg/componentsRegistry/routes.java:5: componentsRegistry is already defined as object componentsRegistry
[error] package com.grumpycats.mmmtg.componentsRegistry; 
```

我制作了示例项目来演示这个问题：[https ://github.com/rmihael/play-2.1-routes-problem](https://github.com/rmihael/play-2.1-routes-problem)

是否有可能以某种方式解决此问题而无需为控制器删除蛋糕模式？遗憾的是，由于这个问题，我无法继续使用 Play 2.1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T07:38:24.057

由于声誉，我无法创建评论。

约定是类和对象以大写开头。此约定也适用于模式匹配。查看一个字符串，包对象和普通对象之间似乎没有区别（除了案例）。我不确定 Play 2.1 如何处理事情，这就是为什么这不是答案而是评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T11:58:24.657

您可以在路由器中尝试新`@`语法。这允许您从`Global`类创建一个实例。您仍然可以指定`<package>.<controller class>.<action>`，但`Global`您可以从其他地方（例如组件注册表）获取它。

您可以在“托管控制器类实例化”下找到一些额外信息：[http ://www.playframework.com/documentation/2.1.0/Highlights](http://www.playframework.com/documentation/2.1.0/Highlights)

这个演示项目展示了它的用法：[https ://github.com/guillaumebort/play20-spring-demo](https://github.com/guillaumebort/play20-spring-demo)

# android - 波长照相机

> ID：14764052
> 
> 赞同：1
> 
> 时间：2013-02-08T01:00:27.197
> 
> 标签：android, iphone, image, camera, webcam

有谁知道确定相机检测到的光波长的方法。这适用于全光谱，尽管我对非可见波长（即红外线）特别感兴趣。

我知道 CMOS 和 CCD 芯片本质上都将光的波长转换为电信号，但是我如何访问/确定这些特定值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T02:52:37.567

相机芯片通过将彩色滤光片（红色、绿色和蓝色）叠加到对广泛波长范围敏感的亚像素传感器上，将给定波长的光转换为信号。因此，相机实际上并没有感应波长。它在几个关键峰值波长处感应光的相对强度。如[this answer](https://stackoverflow.com/a/5818067/30618)中所述，您可以通过将给定RGB颜色转换为HSV（色调/饱和度/值）来近似峰值波长，然后通过色调分量从紫色波长插入红色波长。但是，您会发现这有局限性：例如紫红色（在红色和紫色之间）没有与之相关的单一波长，因为它是我们在同时看到红色和蓝色光时感知到的颜色。

# makefile - vpath 问题 - 没有得到我的假设

> ID：14764054
> 
> 赞同：0
> 
> 时间：2013-02-08T01:00:32.370
> 
> 标签：makefile, vpath

我的 vpath 设置如下：

```
vpath %.cpp $(SRC) 
```

现在，如果我想获取要创建的目标文件列表，它不应该与以下内容一起使用吗？

```
COBJS=$(patsubst %.cpp,%.o,$(wildcard *.cpp)) 
```

它不是。运行命令时我没有得到任何文件列表

```
make --just-print 
```

如果我执行以下操作，它只会显示目标文件列表：

```
COBJS=$(patsubst %.cpp,%.o,$(wildcard $(SRC)/*.cpp)) 
```

有什么解释吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T02:32:25.833

该`vpath`指令将告诉 Make 在哪里寻找*规则的先决条件*。它不会影响`wildcard`指令在哪里查找文件——这是一件好事。

# sql - 最小值和最大值的简单 SQL 查询

> ID：14764056
> 
> 赞同：4
> 
> 时间：2013-02-08T01:00:38.177
> 
> 标签：sql

所以我试图找出我工作的诊所中男性和女性患者的年龄最大和最小的年龄以及男性和女性患者的平均年龄。我是 SQL 新手，但基本上所有这些都来自我认为名为“Patients”的一张表。在患者表中有一个性别列，其中 M 代表男性或 F 代表女性。还有一个年龄列。我猜这真的很简单，我只是让它变得复杂，但有人可以帮助我吗？

我的查询非常有限。我知道，如果您按照以下方式进行操作：

```
Select 
    Min(AGE) AS AGEMIN, 
    MAX(AGE) AS AGEMAX
From Patients 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-08T01:05:14.943

使用[GROUP BY](http://www.w3schools.com/sql/sql_groupby.asp)子句：

```
 select * from @MyTable 
```

*   中号 10
*   中号 15
*   米20
*   F 30
*   F 35
*   F 40

    ```
    select Gender, MIN(Age), MAX(Age), AVG(Age)
    from @MyTable
    group by Gender 
    ```

*   F 30 40 35

*   男 10 20 15

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T01:07:36.280

干得好

```
SELECT gender, AVG(age) as avgage, MAX(age) as maxage,  MIN(age) as minage
FROM patients 
group by gender; 
```

# r - 对重复项求和，然后删除除第一次出现之外的所有内容

> ID：14764058
> 
> 赞同：1
> 
> 时间：2013-02-08T01:00:55.753
> 
> 标签：r, plyr

我有一个数据框（约 5000 行，6 列），其中包含`id`变量的一些重复值。我有另一个连续变量`x`，我想为每个重复项求和其值`id`。观察是时间相关的，存在变量`year`，`month`我想保持每个重复的时间顺序第一次观察，`id`并将随后的重复添加到第一次观察中。

我已经包含了类似于我所拥有的虚拟数据：`dat1`. 我还包含了一个数据集，显示了我想要的结果的结构：`outcome`.

我尝试了两种策略，但都没有给我想要的东西（见下文）。第一个策略为我提供了正确的值`x`，但我丢失了年份和月份列 - 我需要为所有第一个重复值保留这些`id`值。第二种策略没有`x`正确总结 的值。

任何有关如何获得我想要的结果的建议将不胜感激。

```
# dummy data set
set.seed(179)
dat1 <- data.frame(id = c(1234, 1321, 4321, 7423, 4321, 8503, 2961, 1234, 8564, 1234),
                   year = rep(c("2006", "2007"), each = 5),
                   month = rep(c("December", "January"), each = 5),
                   x = round(rnorm(10, 10, 3), 2))

# desired outcome
outcome <- data.frame(id = c(1234, 1321, 4321, 7423, 8503, 2961, 8564),
                      year = c(rep("2006", 4), rep("2007", 3)),
                      month = c(rep("December", 4), rep("January", 3)),
                      x = c(36.42, 11.55, 17.31, 5.97, 12.48, 10.22, 11.41))

# strategy 1:
library(plyr)
dat2 <- ddply(dat1, .(id), summarise, x = sum(x))

# strategy 2:
# partition into two data frames - one with unique cases, one with dupes
dat1_unique <- dat1[!duplicated(dat1$id), ]
dat1_dupes <- dat1[duplicated(dat1$id), ]

# merge these data frames while summing the x variable for duplicated ids
# with plyr
dat3 <- ddply(merge(dat1_unique, dat1_dupes, all.x = TRUE),
              .(id), summarise, x = sum(x))
# in base R
dat4 <- aggregate(x ~ id, data = merge(dat1_unique, dat1_dupes,
                  all.x = TRUE), FUN = sum) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T02:09:40.557

我得到了不同的金额，但它是 b/c 我忘记了种子：

```
> dat1$x <- ave(dat1$x, dat1$id, FUN=sum)
> dat1[!duplicated(dat1$id), ]
    id year    month     x
1 1234 2006 December 25.18
2 1321 2006 December 15.06
3 4321 2006 December 15.50
4 7423 2006 December  7.16
6 8503 2007  January 13.23
7 2961 2007  January  7.38
9 8564 2007  January  7.21 
```

（为了更安全，最好在副本上工作。您可能需要添加一个订购步骤。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T01:17:37.937

你可以用`data.table`（比 plyr 更快，更有效的内存）来做到这一点

使用`mult`='first' 带来一点自加入的乐趣。按 id 年和月键入将按 id、年和月排序。

```
library(data.table)
DT <- data.table(dat1, key = c('id','year','month'))

# setnames is required as there are two x columns that get renamed x, x.1
DT1 <- setnames(DT[DT[,list(x=sum(x)),by=id],mult='first'][,x:=NULL],'x.1','x') 
```

* * *

或者更简单的方法：

```
DT = as.data.table(dat1)

DT[,x:=sum(x),by=id][!duplicated(id)]

     id year    month     x
1: 1234 2006 December 36.42
2: 1321 2006 December 11.55
3: 4321 2006 December 17.31
4: 7423 2006 December  5.97
5: 8503 2007  January 12.48
6: 2961 2007  January 10.22
7: 8564 2007  January 11.41 
```

# javascript - 延迟一个javascript函数，直到一个css动画完成

> ID：14764070
> 
> 赞同：5
> 
> 时间：2013-02-08T01:02:06.463
> 
> 标签：javascript

我正在尝试制作一个模态对象库，它将创建和打开一个 div、iframe、img，类似于 colorbox。我是用纯 javascript 做的，所以请不要推荐 jQuery。

问题是，当用户使用 var myModal = new modal(options, width, height) 创建新模态时，我希望它检查模态是否已经存在，关闭它，等待关闭动画，然后继续创建新的模态。我已经可以做所有事情了，但是我在等待创建新模式直到旧模式消失时遇到了问题。我知道 webkitTransisionEnd 和触发自定义事件，但这不是问题。我需要实际代码等到旧模式完成关闭，直到它继续完成功能的其余部分**并仍将正确的对象返回给用户**。以下是我尝试过的一些事情：

*   创建一个 transisionEnd 监听器等待动画结束然后创建新的模态。（这行得通，但考虑到它变成了一个嵌套函数，很难返回正确的对象）。
*   使用 try, catch 块。（这对我的目的不起作用）
*   在我使用递归函数的地方使用无数种相同的东西

如果有人有想法，请随时发布。我已经尝试了很多东西，但显然不是我需要做的一件事。谢谢。

编辑：

我能够弄清楚。我所要做的就是将一个 transitionEnd 侦听器附加到已经打开的模态，然后在类之外创建一个附加函数，然后使用相同的构造函数调用模态。代码看起来有点像这样：

```
function create(options, width, height) {
    return new modal(options, width, height);
}

function modal(options, width, height) {
    if (modal != null) {
        modal.close();
        modal.addEventListener('webkitTransitionEnd', function() {
            create(options,width,height);
        });
    }
    return;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T01:21:14.667

您不能让代码等待（例如暂停当前执行线程的执行），直到某个未来事件发生。Javascript 根本不支持该功能或以这种方式工作。除了几个模态函数（如`alert()`.

你可以做的是使用回调来通知一些未来事件的调用代码。但是，调用代码将注册其回调并立即返回并继续执行，因此必须编写调用代码来处理回调实现。

如果你想在你的图书馆里做所有的工作，那么它不应该那么难。当调用者创建一个新的模式时，你只需要检查一个预先存在的模式对话框。如果一个不起来，你照常进行。如果一个已启动，那么您使用前一个注册回调通知，存储构造函数的内容，但实际上并不创建新的模态对话框。然后，当您的回调被调用以指示上一个模态对话框已完成时，您完成了新模态的放置。

如果这些模态对话框都是您自己创建的，那么您需要在它们上实现完成通知，以便当它们关闭时，它们可以通知任何侦听器它们现在已经完成。如果他们使用动画关闭并且您想等待关闭通知直到动画完成，那么您也可以实现它。如果您正在使用 CSS3 动画，那么您似乎已经知道，您可以使用 transtionEnd 事件来了解动画何时完成，或者您是否知道动画的时间并且您不需要精确到毫秒，您也可以只使用 a`setTimeout()`来知道动画何时完成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T01:46:59.563

```
var animationDuration = 1000;
setTimeout(function(){
    // Animation done!
}, animationDuration); 
```

# php - 重新插入用户输入的值。php 或 .post

> ID：14764073
> 
> 赞同：0
> 
> 时间：2013-02-08T01:02:15.540
> 
> 标签：php, javascript, jquery, database, forms

这个问题可能听起来有点业余，但只是好奇地想知道。

所以我有一个由混合文本框、选择框和文本区域组成的表单域。它将用户输入的值存储在数据库中，并在每次用户想要重新编辑表单时重新插入这些值。

我的问题是通过我的数据库中存储的值重新插入表单字段的过程，最好使用 1）php mysql 查询或 2）执行调用另一个脚本的 .post，对数据进行 json 编码并使用 jquery将值插入到.ready 的表单中？

如果有人能够建议我更好的方法并解释每种方法的复杂性，我将不胜感激。比如，你会选择哪种方法，为什么选择它？

它会产生更多带宽吗？我的主机上的磁盘空间？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T01:27:18.637

无论哪种方式都是有效的，但我个人会使用 PHP 方法。这样做的原因是，如果您通过 AJAX 执行此操作，那么您的表单将加载，一秒钟后您的字段将填充。这感觉不是很专业，并且会损害客户体验。而使用 PHP 预构建数据，表单已经构建并准备就绪 =)

就优化而言，它在 PHP 端将不明显。但他们肯定会注意到突然填充未填充的字段。

# php - 如何保护我的 php 脚本不被其他域调用？

> ID：14764075
> 
> 赞同：1
> 
> 时间：2013-02-08T01:02:21.420
> 
> 标签：php, javascript, html

我在 2 个网站中有一些 php 脚本，我想限制它们只能从这些网站中调用。有没有办法做到这一点？就像一些网站禁用热链接并将用户发送到该站点不允许热链接的页面......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T07:14:46.513

您可以手动完成

if(refferer == validHost){ //允许访问 }else{ //抛出异常 }

[确定引荐站点的 IP 地址](https://stackoverflow.com/questions/6224841/determine-i-p-address-of-referring-site)

# php - Explode和foreach创建多表

> ID：14764076
> 
> 赞同：0
> 
> 时间：2013-02-08T01:02:28.873
> 
> 标签：php, html, loops, foreach, html-table

我习惯于`explode()`将段落分成单独的单词。效果很好。用`foreach()`. 也很好用。这里没有什么复杂的。

```
$title_pieces = explode(" ", $title_fixed);
foreach($title_pieces as $tpiece){
echo "<b>$tpiece<br>";
} 
```

不幸的是，这只会返回一长串难看的单词。我想做但不知道如何把这一切放在一张漂亮的桌子上。创建表没问题，我不知道的部分是如何让它`$tpiece`每行写一个以上。我希望`<td>`每行可能有 5 秒。

所以如果我这样做：

```
foreach($title_pieces as $tpiece){
echo "<tr><td>$tpiece</td></tr>";
} 
```

我仍然只剩下一长串清单。有人可以在这里指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T01:05:57.987

尝试类似：

```
$count = 1;
echo "<tr>";
foreach($title_pieces as $tpiece){
    if ($count % NUM_COLS == 0)
         echo "</tr><tr>";

    echo "<td>$tpiece</td>";
    $count++;
}
echo "</tr>"; 
```

There's probably a clever optimization in there. What you are doing is counting the number of cells and starting a new row when the count divides NUM_COLS evenly. It's important count starts on 1, not 0, or you'll have an empty row.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T01:07:16.800

Just a sample-code. Work around with the `modulo`-operator.

```
<?php
$i = 1;
echo '<table><tr>';
foreach($title_pieces as $tpiece){
    if ($i % 10 == 0)
        echo "</tr><tr>";

    echo "<td>$tpiece</td>";

    $i++;
}

echo '</tr></table>';
?> 
```

# mysql - 选择案例不起作用＃1064

> ID：14764077
> 
> 赞同：0
> 
> 时间：2013-02-08T01:02:58.460
> 
> 标签：mysql, sql, select

我有这个问题

```
SELECT
CASE WHEN QuantityPart =< Threshold
               THEN (Threshold - QuantityPart) + Threshold
       END as RecommendedReorderQuantity, *
FROM parts, stock 
```

谁能帮忙？

```
SELECT *, 
       CASE WHEN QuantityPart =< Threshold 
            THEN (Threshold - QuantityPart) + Threshold 
       END as RecommendedReorderQuantity 
FROM parts INNER JOIN stock 
        ON parts.PartID = stock.PartID 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T01:04:12.527

应该在`*`你的`CASE`sattement之前先出现，还有一件事，它应该是

`<=` **不是** `=<`

```
SELECT *, 
       CASE WHEN QuantityPart <= Threshold 
            THEN (Threshold - QuantityPart) + Threshold 
       END as RecommendedReorderQuantity 
FROM parts, stock 
```

作为旁注，该查询产生笛卡尔积。如果那不是您想要的，那么您需要提供链接条件，例如

```
SELECT *, 
       CASE WHEN QuantityPart <=  Threshold 
            THEN (Threshold - QuantityPart) + Threshold 
       END as RecommendedReorderQuantity 
FROM parts INNER JOIN stock 
        ON parts.columnName = stock.columnName 
```

`columnName`定义它们关系的列在哪里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T01:27:04.333

此外，指定 else 条件是一种安全的做法，即使是微不足道的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T08:40:01.837

将 =< 替换为 <=

选择 CASE WHEN QuantityPart <= Threshold THEN (Threshold - QuantityPart) + Threshold END as RecommendedReorderQuantity, * FROM parts, stock

# postgresql - Postgresql：选择分组中的第一行（有一个扭曲）

> ID：14764078
> 
> 赞同：0
> 
> 时间：2013-02-08T01:02:59.920
> 
> 标签：postgresql

我在为以下问题编写 SQL 时遇到了很大的困难：

我在“答案”表中有以下数据库列

```
user_id integer,
question_id integer,
session_id text,
crated_date timestamp,
correct_answer boolean 
```

现在我想要一个会话列表，并计算该会话中每个问题的正确和不正确的第一个答案。每个用户可能在一个会话期间多次回答相同的问题，我想知道有多少问题在他们第一次出现在会话中时被正确/不正确地回答。该列`created_date`确定答案的顺序。我试图获得的结果应该具有以下格式：

```
session_id text,
user_id integer,
questions_answered_correctly_first_time_in_session integer,
questions_answered_incorrectly_first_time_in_session integer,
questions_answered_correctly_after_first_time_in_session integer,
questions_answered_incorrectly_after_first_time_in_session integer 
```

任何帮助，将不胜感激 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T02:01:30.567

我不是 100% 确定这会奏效，但你可以试一试：

请注意，这是一个即时构建的想法，我根本没有看过性能，可能有更好的方法。

```
with first_answers as (select
        session_id,
        question_id,
        min(created_date) as created_date,
        TRUE as first_answer
    from answers
    group by session_id, question_id)
select
    first.session_id,
    first.user_id,
    sum(case when coalesce(first_answer, FALSE) and correct_answer then 1 else 0 end),
    sum(case when coalesce(first_answer, FALSE) and not correct_answer then 1 else 0 end),
    sum(case when not coalesce(first_answer, FALSE) and correct_answer then 1 else 0 end),
    sum(case when not coalesce(first_answer, FALSE) and not correct_answer then 1 else 0 end)
from answers left join first_answers using (session_id, user_id, created_date)
group by session_id 
```

# mysql - 错误 1265。尝试从 txt 文件加载数据时，列的数据被截断

> ID：14764080
> 
> 赞同：29
> 
> 时间：2013-02-08T01:03:11.913
> 
> 标签：mysql, csv

我在 mysql 表中有表 表看起来像

```
create table Pickup
(
PickupID int not null,
ClientID int not null,
PickupDate date not null,
PickupProxy  varchar (40) ,
PickupHispanic bit default 0,
EthnCode varchar(2),
CategCode varchar (2) not null,
AgencyID int(3) not null,

Primary Key (PickupID),
FOREIGN KEY (CategCode) REFERENCES Category(CategCode),
FOREIGN KEY (AgencyID) REFERENCES Agency(AgencyID),
FOREIGN KEY (ClientID) REFERENCES Clients (ClientID),
FOREIGN KEY (EthnCode) REFERENCES Ethnicity (EthnCode)
);

sample data from my txt file 
1065535,7709,1/1/2006,,0,,SR,6
1065536,7198,1/1/2006,,0,,SR,7
1065537,11641,1/1/2006,,0,W,SR,24
1065538,9805,1/1/2006,,0,N,SR,17
1065539,7709,2/1/2006,,0,,SR,6
1065540,7198,2/1/2006,,0,,SR,7
1065541,11641,2/1/2006,,0,W,SR,24 
```

当我试图通过使用提交它时

```
LOAD DATA INFILE 'Pickup_withoutproxy2.txt' INTO TABLE pickup; 
```

它抛出错误

> 错误代码：1265。第 1 行的“PickupID”列的数据被截断

我正在使用 MySQL 5.2

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-02-08T01:39:53.750

此错误意味着 Pickup_withoutproxy2.txt 文件中的至少一行在其第一列中的值大于 int（您的 PickupId 字段）。

> Int 只能接受 -2147483648 到 2147483647 之间的值。

查看您的数据以了解发生了什么。如果您的 txt 文件非常大且难以查看，您可以尝试将其加载到具有 varchar 数据类型的临时表中。一旦加载到数据库中，就可以很容易地检查 int 。

祝你好运。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2017-02-13T06:39:20.370

您丢失了`FIELDS TERMINATED BY ','`，并且假设您默认使用制表符进行分隔。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-10-02T09:46:46.107

尝试将现有`varchar`列转换为`enum`. 对我来说，问题是该列的现有值不属于 的`enum`接受值列表。因此，如果您`enum`只允许值，例如但表中`('dog', 'cat')`有一行，则会因此错误而失败。`bird``MODIFY COLUMN`

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-04-04T20:02:01.927

我在具有**ENUM**值（'0'，'1'）的列中遇到了这个问题。
当我尝试**保存**新记录时，我为**ENUM**变量 分配了值**0 。**

 ****对于** **解决方案**：我已将**ENUM**变量值从**0**更改为**1**，并将**1**更改为**2**。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-12-10T16:41:12.123

我有同样的问题。我想编辑表结构中的 ENUM 值。问题是因为之前保存的行和新的 ENUM 值不包含保存的值。

解决方案是更新 MySql 表中保存的旧行。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2020-11-10T21:30:21.960

原因是 mysql 在最后一个指定列之后的文本文件中期望行符号结束，这个符号是 char(10) 或 '\n'。取决于创建文本文件的操作系统或如果您自己创建文本文件，它可以是其他组合（Windows 使用 '\r\n' (chr(13)+chr(10)) 作为行分隔符）。因此，如果您使用 Windows 生成的文本文件，请在 LOAD 命令中添加以下后缀：“LINES TERMINATED BY '\r\n'”。否则，请检查文本文件中行的分隔方式。默认 mysql 期望 char(10) 作为行分隔符。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-04-02T11:12:57.337

当我的数据在我的列中有额外的空格、制表符、换行符或其他字符时，我看到了相同的警告，`decimal(10,2)`为了解决这个问题，我必须从值中删除这些字符。

这是我的处理方式。

```
LOAD DATA LOCAL INFILE 'c:/Users/Hitesh/Downloads/InventoryMasterReportHitesh.csv' 
INTO TABLE stores_inventory_tmp 
FIELDS TERMINATED BY ',' 
ENCLOSED BY '"'
LINES TERMINATED BY '\n'
IGNORE 1 ROWS
(@col1, @col2, @col3, @col4, @col5)
SET sku = TRIM(REPLACE(REPLACE(REPLACE(REPLACE(@col1,'\t',''), '$',''), '\r', ''), '\n', ''))
, product_name = TRIM(REPLACE(REPLACE(REPLACE(REPLACE(@col2,'\t',''), '$',''), '\r', ''), '\n', ''))
, department_number = TRIM(REPLACE(REPLACE(REPLACE(REPLACE(@col3,'\t',''), '$',''), '\r', ''), '\n', ''))
, department_name = TRIM(REPLACE(REPLACE(REPLACE(REPLACE(@col4,'\t',''), '$',''), '\r', ''), '\n', ''))
, price = TRIM(REPLACE(REPLACE(REPLACE(REPLACE(@col5,'\t',''), '$',''), '\r', ''), '\n', ''))
; 
```

我从[这个答案中得到了暗示](https://stackoverflow.com/a/23807798/1005741)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-06-04T17:59:18.980

我遇到了同样的问题，我的错误是我试图将一个我之前没有定义的值加载到`ENUM()`.

For example, `ENUM('sell','lend')` and I was trying to load the value `return` to that column. I needed to load it, so I added it to the `ENUM` and load it again.

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-09-28T03:06:19.873

这个错误也可能是没有线的结果，

```
FIELDS SPECIFIED BY ',' 
```

（如果您使用逗号分隔字段）在您的 MySQL 语法中，如MySQL 文档的[此页面中所述。](http://dev.mysql.com/doc/refman/5.7/en/load-data.html)**

# python - 使用字符串设置 python 对象/变量的名称

> ID：14764088
> 
> 赞同：3
> 
> 时间：2013-02-08T01:04:00.560
> 
> 标签：python, string, function, keyword, argument-passing

大多数人可能会说这是一个坏主意。我想使用字符串的内容作为变量的名称。我想完成可怕的事情：

```
s = 'x'
x = 1 
```

变量名`x`从哪里来（不知何故？）来自 string `s`。

要回答“为什么？”，假设我有一个全局默认值`x`，我想要在函数中覆盖的选项。但：

```
x = 0
def f(**kw):
    print x
f(x=1) 
```

打印`0`不`1`。如果我可以使用 kw.keys() 中的字符串重新分配`x`（或任何其他全局设置的变量），那么我会很高兴。

我意识到这适用于重新`x`分配`f`：

```
x = 0
def f(x=x):
    print x
f(x=1) 
```

但是我想在我的命名空间中有很多变量的情况下这样做，我可能在某些时候想要覆盖而不重写模块中的每个函数定义。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T01:13:40.700

查看[执行](http://docs.python.org/2.7/reference/simple_stmts.html#exec)

```
>>> print x
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
NameError: name 'x' is not defined
>>> s = 'x'
>>> exec(s + " = 1")
>>> print x
1 
```

另请参阅：[如何在 python 中使用 eval 分配变量的值？](https://stackoverflow.com/questions/5599283/how-can-i-assign-the-value-of-a-variable-using-eval-in-python)

经过一些实验，这似乎也有效：

```
>>> print x
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
NameError: name 'x' is not defined
>>> s = 'x'
>>> globals()[s] = 1
>>> print x
1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T01:23:15.547

您应该重新考虑使用`global`关键字（[http://docs.python.org/2.7/reference/simple_stmts.html#the-global-statement](http://docs.python.org/2.7/reference/simple_stmts.html#the-global-statement)）

我建议也看一下[Python 中“全局”关键字的使用](https://stackoverflow.com/questions/4693120/use-of-global-keyword-in-python#4693385)。

此外，正如 promanow 所建议的，使用全局可变对象可能是一种更好的方法。

但是，请记住，从维护的角度来看，拥有大量*可能*修改或依赖于变异全局的代码是非常可怕的想法。小心行事。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T01:27:45.653

通过函数参数进行赋值并不明显，因此不被视为 Pythonic（Python 不是 C）。见`import this`。

我完成平面配置的廉价方法是通过全局部分字典：

```
In [1]: from functools import partial
In [2]: config = partial(dict)
In [3]: def f(x=None):
   ...:     print x or config.x
   ...:     
In [4]: config.x = 'foo'
In [5]: f()
foo 
```

这种效果*是*显而易见的、可读的，因此更易于维护。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-08T01:31:21.693

> 但是我想在我的命名空间中有很多变量的情况下这样做，我可能在某些时候想要覆盖而不重写模块中的每个函数定义。

听起来你想要一堂课：

```
class Foo(object):
    x = 0
    def f(self):
        print self.x

my_foo = Foo()
my_foo.x = 1
my_foo.f() 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-14T15:48:39.080

我使用以下内容从一个全局数据库中为感兴趣的目标创建动态自定义建模数据库：

```
DBs = ["Target_1_DB","Target_2_DB","Target_3_DB"]

for db in DBs:
    print(db)    
    exec_str = "Modeling_DB_Base = " + db
    exec(exec_str)
    #s = "Modeling_DB_Base"
    #globals()[s] = db
    print(Modeling_DB_Base.shape) 
```

使用注释掉的 globals() 会导致错误消息：AttributeError: 'str' object has no attribute 'shape'

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2020-02-10T07:38:33.383

您可以使用以下解决方案：

```
s = 'x'
locals()[s] = 1 
```

# java - 如何从 url 中删除扩展名

> ID：14764090
> 
> 赞同：1
> 
> 时间：2013-02-08T01:04:04.787
> 
> 标签：java, url, struts2, action

我使用 struts2 设计了一个应用程序，例如需要删除扩展

```
www.myweb.com/register.action 
```

如何删除 .action 以便当我单击注册时调用 www.myweb.com/register 而不使用操作扩展名？

我使用以下

```
 <a href="<s:url action="register"/>">Register</a> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T01:15:15.450

我找到了答案。我应该改变struts配置如下：

```
<struts>

    <constant name="struts.action.extension" value=""/>

    <package name="default" extends="struts-default">

        <action name="register">
            <result type="tiles">register</result>
        </action>
    </package>

</struts> 
```

# ios - 围绕圆周旋转矩形（iOS）？

> ID：14764093
> 
> 赞同：0
> 
> 时间：2013-02-08T01:04:11.103
> 
> 标签：ios, uiview, geometry

我正在尝试围绕圆圈旋转矩形。到目前为止，在整理了我在各个地方找到的一些代码（主要在这里：[https](https://stackoverflow.com/a/4657476/861181) ://stackoverflow.com/a/4657476/861181 ）之后，我能够围绕它的中心轴旋转矩形。

我怎样才能让它围绕圆圈旋转？

这是我所拥有的：OverlaySelectionView.h

```
#import <QuartzCore/QuartzCore.h>

@interface OverlaySelectionView : UIView {
@private
    UIView* dragArea;
    CGRect dragAreaBounds;

    UIView* vectorArea;
    UITouch *currentTouch;
    CGPoint touchLocationpoint;
    CGPoint PrevioustouchLocationpoint;

}
@property    CGRect vectorBounds;
@end 
```

覆盖选择视图.m

```
#import "OverlaySelectionView.h"

@interface OverlaySelectionView()
@property (nonatomic, retain) UIView* vectorArea;
@end

@implementation OverlaySelectionView

@synthesize vectorArea, vectorBounds;
@synthesize delegate;

- (void) initialize {

    self.userInteractionEnabled = YES;
    self.multipleTouchEnabled = NO;
    self.backgroundColor = [UIColor clearColor];
    self.opaque = NO;
    self.autoresizingMask = UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleWidth;

    UIPanGestureRecognizer *panRecognizer = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(rotateVector:)];

    panRecognizer.maximumNumberOfTouches = 1;
    [self addGestureRecognizer:panRecognizer];

}

- (id) initWithCoder: (NSCoder*) coder {
    self = [super initWithCoder: coder];
    if (self != nil) {
        [self initialize];
    }
    return self;
}

- (id) initWithFrame: (CGRect) frame {
    self = [super initWithFrame: frame];
    if (self != nil) {
        [self initialize];
    }
    return self;
}

- (void)drawRect:(CGRect)rect {

    if (vectorBounds.origin.x){

    UIView* area = [[UIView alloc] initWithFrame: vectorBounds];
    area.backgroundColor = [UIColor grayColor];
    area.opaque = YES;

    area.userInteractionEnabled = NO;
    vectorArea = area;
    [self addSubview: vectorArea];
    }

}

- (void)rotateVector: (UIPanGestureRecognizer *)panRecognizer{

    if (touchLocationpoint.x){

            PrevioustouchLocationpoint  = touchLocationpoint;
    }

    if ([panRecognizer numberOfTouches] >= 1){
        touchLocationpoint = [panRecognizer locationOfTouch:0 inView:self];
    }

    CGPoint origin;
    origin.x=240;
    origin.y=160;
    CGPoint previousDifference = [self vectorFromPoint:origin toPoint:PrevioustouchLocationpoint];
    CGAffineTransform newTransform =CGAffineTransformScale(vectorArea.transform, 1, 1);
    CGFloat previousRotation = atan2(previousDifference.y, previousDifference.x);
    CGPoint currentDifference = [self vectorFromPoint:origin toPoint:touchLocationpoint];
    CGFloat currentRotation = atan2(currentDifference.y, currentDifference.x);
    CGFloat newAngle = currentRotation- previousRotation;

    newTransform = CGAffineTransformRotate(newTransform, newAngle);
    [self animateView:vectorArea toPosition:newTransform];

}

-(CGPoint)vectorFromPoint:(CGPoint)firstPoint toPoint:(CGPoint)secondPoint
{
    CGPoint result;
    CGFloat x = secondPoint.x-firstPoint.x;
    CGFloat y = secondPoint.y-firstPoint.y;
    result = CGPointMake(x, y);
    return result;
}

-(void)animateView:(UIView *)theView toPosition:(CGAffineTransform) newTransform
{
    [UIView setAnimationsEnabled:YES];
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationCurve:UIViewAnimationCurveLinear];
    [UIView setAnimationBeginsFromCurrentState:YES];
    [UIView setAnimationDuration:0.0750];
    vectorArea.transform = newTransform;
    [UIView commitAnimations];

}

@end 
```

这是试图澄清。我正在从地图上的坐标创建矩形。这是在主视图中创建该矩形的函数。本质上它是屏幕的中间：

overlay 是使用上述代码创建的视图。

```
- (void)mapView:(MKMapView *)mapView didUpdateUserLocation:(MKUserLocation *)userLocation
{

    if (!circle){
    circle = [MKCircle circleWithCenterCoordinate: userLocation.coordinate radius:100];

        [mainMapView addOverlay:circle];
        CGPoint centerPoint = [mapView convertCoordinate:userLocation.coordinate toPointToView:self.view];

        CGPoint upPoint = CGPointMake(centerPoint.x, centerPoint.y - 100);

        overlay = [[OverlaySelectionView alloc] initWithFrame: self.view.frame];

        overlay.vectorBounds = CGRectMake(upPoint.x, upPoint.y, 30, 100);

        [self.view addSubview: overlay];

    }

} 
```

这是我要实现的目标的草图：

![在此处输入图像描述](../Images/fee7be9c2936a3ef3ca05665d5ee579a.png)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-08T01:17:51.773

**简介**
旋转总是围绕 (0,0) 进行。
您已经知道：
要围绕矩形的中心旋转，您将矩形平移到原点，旋转并平移回来。

**现在回答你的问题：**
要围绕圆的中心点旋转，只需移动矩形的中心，使圆位于 (0,0) 处，然后旋转，然后向后移动。

开始将矩形定位在 12 点钟位置，中心线位于 12 点。

1) 如前所述，您始终围绕 0,0 旋转，因此将圆心移动到 0,0

```
 CGAffineTransform trans1 =  CGAffineTransformTranslation(-circ.x, -circ.y); 
```

2）按角度旋转

```
CGAffineTransform transRot =  CGAffineTransformRotation(angle); // or -angle try out. 
```

3) 向后移动

```
CGAffineTransform transBack = CGAffineTransformTranslation(circ.x, circ.y); 
```

将这 3 个旋转矩阵连接到一个组合矩阵，并将其应用于矩形。

```
CGAffineTransformation tCombo = CGAffineTransformConcat(trans1, transRot);
tCombo = CGTransformationConcat(tCombo, transback); 
```

申请

```
rectangle.transform = tCombo; 
```

您可能还应该阅读 Quartz 文档中关于变换矩阵的章节。

此代码仅使用文本编辑器编写，因此函数名称可能略有不同。

# javascript - 预填充字段值和只读

> ID：14764095
> 
> 赞同：0
> 
> 时间：2013-02-08T01:04:17.173
> 
> 标签：javascript

我有一个包含多个字段的表单，我需要使用 javascript 自定义一些字段以允许我：

1.  为“城市”字段预填充值“纽约”

2.  将“电子邮件”字段设为只读

3.  预填充并只读字段“国家”

为了得到第 1 点的结果，我使用了这个运行良好的代码：

```
<script type="text/javascript">function on_form_loaded(event) {
if (event=='reserve')
document.getElementById('city').setAttribute("value", "New York");
}</script> 
```

为了获得第 2 点的结果，我使用了这个运行良好的代码：

```
<script type="text/javascript">function on_form_loaded(event) {
if (event=='reserve')
document.getElementById('email').readOnly=true;
}</script> 
```

但现在我看不到如何“混合”预填充/只读参数以获得第 3 点的结果。

有人可以帮忙吗？

此外，我想缩短代码以避免为每个字段包含单个 javascript。我做了一些测试，但没有成功。如果你能给我一些例子...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T01:13:54.007

我不确定你错过了什么，但试试这个

```
var country = document.getElementById('country');
country.value = "USA";
country.readOnly = true; 
```

正如上面评论中提到的[jimjimmy1985](https://stackoverflow.com/users/1994081/jimjimmy1995)，您也可以在标记中执行此操作

```
<input name="country" id="country" value="USA" readonly> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T01:37:51.987

假设您在表单标签中使用 'on...="on_form_loaded"' 作为属性并且添加 jQuery 没有问题，您可以尝试：

```
<script type="text/javascript">
jQuery('#ID_OF_YOUR_FORM').ready( function(event) {
 if (event=='reserve') {
    var form_object = jQuery(this);
    form_object.find('#city').value('New York').end()
               .find('#country').value('USA').end()
               .find('#country, #email').attr('readonly', true);      
  }
});
</script> 
```

其中 ID_OF_YOUR_FORM 必须替换为您的表单个人 ID。

# android - 应用管理应用程序中的 Android 图标错误，但在启动器中正确

> ID：14764100
> 
> 赞同：4
> 
> 时间：2013-02-08T01:04:45.570
> 
> 标签：android

我有一个简单的 Android 应用程序（使用 Mono for Android 构建），它的图标有问题。

*   该图标在启动器和任务切换器中是正确的，但
*   在管理应用程序和任务管理器中，它显示了一个通用的 Android 图标

我检查了各种密度资源和清单，它们看起来都是正确的。

（我在 Galaxy S 手机和 Nexus 7 上看到了这个）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T01:08:02.423

很可能您在 中`icon`为您的活动设置了属性`AndroidManifest.xml`，但没有为应用程序设置它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-06-19T06:16:55.880

我突然想到，应用程序图标以某种方式缓存在应用程序管理器中，因此卸载和重新安装应用程序并不总是正确更改图标。重新启动设备可能会有所帮助。我还发现[这篇文章](http://tools.android.com/tech-docs/new-build-system/applicationid-vs-packagename)非常有用：在 gradle 中添加应用程序 ID 通常可以解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T01:25:24.733

在 Package Explorer 中打开“AndroidMenifest.xml”，然后单击底部的“Application”**选项卡。**查看“图标”字段并输入图标的位置（例如：）`@drawable/iconimage`。接下来，进入“AndroidManifest.xml”**选项卡**并查找`android:icon=`，并将位置添加到其中（例如`android:icon="@drawable/iconimage`：）

确保两个位置的图标名称相同！

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-10T21:13:51.580

Oleg 和 Collin 都是正确的，但为了完整性 - 在 Mono 应用程序中，可以使用 Application 对象上的属性设置图标（如果有的话）：

```
[Application(Label = "MyAppName", Icon = "@drawable/icon")] 
class MyApp: Application
{ ... 
```

# sql-server - SSMS 对象资源管理器 - 选择连接到 Azure DB 时缺少的前 N 行

> ID：14764102
> 
> 赞同：15
> 
> 时间：2013-02-08T01:04:46.300
> 
> 标签：sql-server, sql-server-2008, azure, ssms, azure-sql-database

我刚刚将我的 SSMS 升级到 2008 R2。我缺少从表中选择前 1000 行的选项，如下所示：

![在此处输入图像描述](../Images/5495a7cbf0db74e81b8594f8cb987ea3.png)

我的看起来像这样：

![在此处输入图像描述](../Images/ed947f73516590be6f853acfeefad2a8.png)

我知道如何更改显示的行数，但选项根本不存在。几年前我看到有人为此提交了一个错误，但没有解决方法，我不知道该怎么办。有任何想法吗？

**编辑 - Azure 问题？**

我刚刚使用 SSMS 打开了我的本地 SQL Server，我可以选择前 100 行。但在我的另一个 SSMS 实例中，即连接到我的 Azure DB 的实例中，我看不到它。这可能是 Azure 的限制吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-08T01:21:42.987

基于[这个答案](https://stackoverflow.com/questions/6221660/sql-azure-migration-wizard-small-extra-step-needed)，我相信这是 SQL Azure 的一个限制。我找不到任何可以让您解决此问题的其他信息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-04-06T14:51:30.303

自 2015 年 6 月 4 日起，MS 已发布修补程序来解决此问题。

[http://support.microsoft.com/en-us/kb/3011055](http://support.microsoft.com/en-us/kb/3011055)

“有一个更新可以为 SQL Azure 数据库的表和视图启用“选择前 1000 行”选项”

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-08T14:00:47.257

在使用 SQL Azure 时，您在 SSMS 中没有此选项，您必须自己执行查询...*从表名中选择前 10000*

SSMS 中也有很少的其他选项在 SQL Azure 的情况下不显示。

这是 SQL Azure 的预期行为。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-11-12T05:54:13.030

它现在在 SqlServer Mgt Studio 2014 上可用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-08T01:08:19.450

检查 SQL Server 对象资源管理器设置中的值是否正确：

![在此处输入图像描述](../Images/ea2de5b5902b9ab615cec1f77eae6a11.png)

# javascript - 如何更改 google javascript maps api v3 中的标记位置？

> ID：14764104
> 
> 赞同：0
> 
> 时间：2013-02-08T01:05:06.163
> 
> 标签：javascript, jquery, google-maps, position, google-maps-markers

我有这张地图：

```
.... class Maps .... 

Maps.prototype.initialize = function (x, y) {
    var latitude = x;
    var longitude = y;

    var mapOptions = {
        zoom: 8,
        center: new google.maps.LatLng(latitude, longitude),
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };

    var map = new google.maps.Map(document.getElementById('map_canvas'),  mapOptions);

    var marker = new google.maps.Marker({
        position: map.getCenter(),
        map: map,
        title: 'Click to zoom'
    });
};

Maps.prototype.changePosition = function (x, y) {

    var latitude = x;
    var longitude = y;

    var map = new google.maps.LatLng(latitude, longitude);
    marker.setPosition(map);
}

.... 
```

然后：

```
var maps = new Maps();
var marker = maps.initialize(x, y);

window.setTimeout(function() {
    maps.changePosition(x, y));
}, 3000); 
```

该`initialize`方法有效，并呈现地图和标记

但是第二个不起作用，不知道是`setPosition`什么

关于这个问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T01:15:28.773

有不同的问题。

第一个，这将阻止代码执行：您的 iinitialize-function 没有返回值，因此您的`maps`-variable 未定义并且没有方法`changePosition`。

稍后：changePosition 有参数 ,`z`和`y`, 但是在函数内部你可以访问变量`x`和`y`

但是，我没有看到任何修改`x`and`y`的代码，因此即使代码可以工作，它也没有任何可见的效果。

* * *

```
function Maps(){}

Maps.prototype.initialize = function (x, y, z, o) {

    this.center    = new google.maps.LatLng(x, y)
    this.zoom      = z;
    this.node      = document.getElementById(o);
    this.markers   = [];

    var mapOptions = {
        zoom:       this.zoom,
        center:     this.center,
        mapTypeId:  google.maps.MapTypeId.ROADMAP
    };

    this.map = new google.maps.Map(this.node,  mapOptions);

    return this;
};

Maps.prototype.addMarker=function(x, y, t , c){

  var marker = new google.maps.Marker({
        position: new google.maps.LatLng(x,y),
        map: this.map,
        title: t||'Click to zoom'
    });

  this.markers.push(marker);
  if(c)this.map.setCenter(marker.getPosition());
  return marker;
}

Maps.prototype.changePosition = function (m , x, y, c, f) {

    var latLng = new google.maps.LatLng(x, y);
    m.setPosition(latLng);
    if(c)this.map.setCenter(latLng);
    if(f)f();
}

//create the Maps-instance
var maps = new Maps(),
    x = 10,
    y = 10;

//do something onload
google.maps.event.addDomListener(window,'load',function(){
  //initialize maps
  maps.initialize(x, y , 3, 'map_canvas');

  //add a marker
  var marker=maps.addMarker(x, y ,'hello marker', true);

  //change position of marker
  window.setTimeout(function() {
    maps.changePosition(marker, x+50, y+50 ,true,
                        function(){alert('position changed');});
}, 5000);
}); 
```

# python - 字典中堆的最大元素

> ID：14764112
> 
> 赞同：1
> 
> 时间：2013-02-08T01:06:43.493
> 
> 标签：python, dictionary

我有以下代码使用堆来获取具有最高值的字典元素，但它没有返回预期的结果：

```
import heapq
import operator
a={'third': 3, 'fourth': 2, 'first': 5, 'second': 4}
heapq.nlargest(4,a,operator.itemgetter(1))
>>['fourth', 'first', 'third', 'second'] 
```

为什么不返回：

```
>>['first' , 'second' , 'third' , 'fourth'] 
```

?

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T01:16:15.590

看看`operator.itemgetter(1)`你的字典实际上做了什么：

```
>>> map(operator.itemgetter(1), a)
['e', 'o', 'h', 'i'] 
```

当您遍历字典时，您会遍历键。由于您想要*values*，请使用 use`a.get`来获取项目：

```
>>> map(a.get, a)
[4, 2, 3, 5] 
```

`a.get(key)`是一种类似 的方法`a[key]`，所以它本质上是这样做的：

```
>>> [a[key] for key in a]
[4, 2, 3, 5] 
```

现在你的代码可以工作了：

```
>>> heapq.nlargest(4, a, a.get)
['first', 'second', 'third', 'fourth'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T01:16:30.497

当你迭代 a`dict`时，你正在迭代它的键。

因此，当您申请时`operator.itemgetter(1)`，您将获得`key[1]`每个密钥。这意味着每个名称的第二个字母。

如果要遍历键和值，请使用`items`：

```
>>> heapq.nlargest(4,a.items(),operator.itemgetter(1))
[('first', 5), ('second', 4), ('third', 3), ('fourth', 2)] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T01:13:54.257

`operator.itemgetter(1)`不做你认为它做的事。试试这个：

```
>>> heapq.nlargest(4, a, a.__getitem__)
['first', 'second', 'third', 'fourth'] 
```

`operator.itemgetter(1)`只会`1`从传递给它的所有内容中获取带有 key 的元素，在这种情况下，它是每个单词的第二个字母。确实，`'o' > 'i' >= 'i' > 'e'`.

# javascript - Ajax - 检查 Url 是否存在的函数

> ID：14764115
> 
> 赞同：2
> 
> 时间：2013-02-08T01:07:02.700
> 
> 标签：javascript, ajax, readystate

我正在构建一个使用 Reddit API 来显示来自 Reddit 的图像的网站。我通过 JSON 获取数据，然后使用它来构建页面，使用作为图像源提供的 URL。

我得到的一些 URL 不直接转到图像，而是转到图像托管站点（例如 imgur.com）。通常，在 URL 末尾添加“.jpg”会将我带到正确的图像。

所以，这样做，我想在使用它之前检查 URL + '.jpg' 是否存在。

我试图构建一个函数来检查 url。

```
function checkUrl(url){
    var request = new XMLHttpRequest;
    request.open('GET', url, true);
    request.send();
    request.onreadystatechange = function(){
        if(request.readyState==4){
            console.log(request.readyState);
            return true;
        }else{
            return false;
        }
    }
};

//Then I use the function to check and append the data to the page
var url = url+'.jpg';
if(checkUrl(url)){
    //work with the data
}else{
    //do nothing
} 
```

页面没有任何反应，我仍然将 readyState 登录到控制台，因此 checkUrl() 函数似乎返回 true。

我做错了什么？我对整个 Ajax 很陌生，所以非常感谢一些帮助。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T01:10:52.667

您的问题是，当`request.readyState == 4`这意味着请求已完成时，*无论*该请求的结果是什么。因此，即使您请求的 URL 返回“404 未找到”，您仍然会看到 XHR 将自身解析为 readyState 4。

为了解决您要执行的操作，我建议您检查响应的状态代码。例如，使用您的代码：

```
if(request.status==200){
   return true;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T02:18:29.113

**为什么您的代码不起作用：**

您的 AJAX 请求是异步的，`if(checkUrl(url)){`将在函数`checkUrl()`发送 AJAX 请求时返回 null (false)，并在 AJAX 调用完成之前**立即返回**。

改变

```
request.open('GET', url, true); 
```

至

```
request.open('GET', url, false); 
```

**另外**，将您的`request.send()`移到之后，`request.onreadystatechange()`因为现在它是一个非异步请求。

```
request.onreadystatechange = function(){
    if(request.readyState==4){
        console.log(request.readyState);
        return true;
    }else{
        return false;
    }
}
request.send(); 
```

**或者**，您可以简单地将检查逻辑放入 onreadystatechange 函数中：

```
request.onreadystatechange = function(){

    var url = url+'.jpg';
    if(request.readyState==4){
        //work with the data
    }else{
        //do nothing
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-05-07T21:16:08.287

我相信你的问题是对 AJAX 的误解；AJAX 基本上是异步的，这就是您所描述的行为的原因。
我使用以下内容以同步方式获取 URL 是否有效的简单真/假指示：

```
function isValidURL(url) {
    var encodedURL = encodeURIComponent(url);
    var isValid = false;

    $.ajax({
      url: "http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20html%20where%20url%3D%22" + encodedURL + "%22&format=json",
      type: "get",
      async: false,
      dataType: "json",
      success: function(data) {
        isValid = data.query.results != null;
      },
      error: function(){
        isValid = false;
      }
    });

    return isValid;
} 
```

然后用法很简单：

```
var isValid = isValidURL("http://www.wix.com");
alert(isValid ? "Valid URL!!!" : "Damn..."); 
```

希望这可以帮助

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-08T01:15:38.710

的`return`值`request.reonreadystatechange`不是`return`checkUrl 的值。尝试这个：

```
function checkUrl(url){
    var request = new XMLHttpRequest;
    request.open('GET', url, true);
    request.send();
    request.onreadystatechange = function(){
        if(request.readyState==4){
            console.log(request.readyState);
            // perform your data manipulation here
            // don't separate it with the request
        }
    }
}; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-12T08:30:10.660

在 Safari 上，`ActiveXObject`可以正常工作，与`XMLHttpRequest`：

```
function isThere(url)
{
    var req= new AJ(); // XMLHttpRequest object
    try {
        req.open("HEAD", url, false);
        req.send(null);
        //alert(req.status); //un-comment if need alert for status code

        return req.status== 200 ? true : false;
    }
    catch (er) {
        //alert ('ERROR:'); // un-comment if need alert for error
        return false;
    }
}

function AJAX()
{
    var obj;
    if (window.XMLHttpRequest) obj= new XMLHttpRequest();
    else if (window.ActiveXObject)
    {
        try
        {
            obj= new ActiveXObject('MSXML2.XMLHTTP.3.0');
        }
        catch(er)
        {
            try
            {
                obj= new ActiveXObject("Microsoft.XMLHTTP");
            }
            catch(er)
            {
                obj= false;
            }
        }
    }
    return obj;
} 
```

# qt - Qt 应用程序有什么好的 MV* 模式？

> ID：14764118
> 
> 赞同：6
> 
> 时间：2013-02-08T01:07:09.297
> 
> 标签：qt, model-view-controller, mvvm, mvp

Qt 应用程序是指带有 Qt GUI 的 C++ 应用程序。我将 MVP 用于 Android 项目和 Winform，MVC 用于 ASP.NET MVC，MVVM 用于 WPF/Silverlight/Javascript。但是现在，由于我需要开始学习 Qt，什么是适合 Qt 应用程序的 MV* 模式？

# ruby-on-rails - 编写数据库迁移以逆向复杂迁移

> ID：14764119
> 
> 赞同：1
> 
> 时间：2013-02-08T01:07:16.753
> 
> 标签：ruby-on-rails, migration, rake

我的一个朋友在旧版应用程序上进行了相当古老的迁移，其中包含以下代码段：

```
class MakeChangesToProductionDbToMatchWhatItShouldBe < ActiveRecord::Migration
  def self.up

# For some reason ActiveRecord::Base.connection.tables.sort().each blows up
    ['adjustments',
    'accounts',
     ...## more rows of classes here ###...
    'product_types'].each do |table|
      t = table.singularize.camelize.constantize.new
      if t.attributes.include?('created_at')
        change_column( table.to_sym, :created_at, :datetime,  :null => false ) rescue puts      "#{table} doesnt have created_at"
      end
      if t.attributes.include?('updated_at')
        change_column( table.to_sym, :updated_at, :datetime,  :null => false ) rescue puts "#{table} doesnt have updated_at"
      end
    end 
```

这个旧迁移现在与我编写的新迁移冲突，该迁移是为了删除这个长列表中提到的两个表，这现在导致任何部署在 rake db:migrate 时出错。

为解决此迁移并让 db:migrate 再次工作而编写的正确迁移或关闭操作是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T01:17:37.880

有一些不同的最佳实践可以*提供帮助*，但归根结底，没有什么好的方法可以在运行迁移时始终从任意点升级数据库而不单步执行代码库（说到这一点，为什么不已经是一项艰巨的任务了？）。

1.  始终包含您正在处理的模型的迁移命名空间副本。下面的例子。
2.  从头开始构建数据库时，不要*运行*迁移...使用`db:schema:load`它将重新创建数据库的最后一个快照。
3.  不要给你的迁移带来荒谬和侵略性的标题，比如`MakeChangesToProductionDbToMatchWhatItShouldBe`.
4.  在编写迁移时，避免对它们将在其中运行的环境做出假设。这包括指定表名、数据库驱动程序、环境变量等。
5.  只要向下操作可行，就在您编写操作时写下操作。当一系列转换在您的脑海中浮现时，通常会容易得多（尤其是在深奥或复杂的迁移中）。

对于这种特定情况，有理由宣布“迁移破产”——清除部分或全部现有迁移（或重构并合并成一个新迁移）以实现所需的数据库状态。当您这样做时，**您将不再向后兼容**，因此不能掉以轻心，但有时这是适当的举措。

# python - 如何制作一个可以注销、关闭和重新启动计算机的python脚本？

> ID：14764126
> 
> 赞同：6
> 
> 时间：2013-02-08T01:08:15.380
> 
> 标签：python, windows, subprocess

**背景**

我目前正在自学python，我认为拥有一个可以关闭、重新启动和注销计算机的“控制中心”将是一个非常酷的项目。我也想使用 subprocess 模块，因为我听说 import OS 模块已经过时了。

**当前代码**

```
def shutdown(self):
    import subprocess
    subprocess.call(["shutdown", "-f", "-s", "-t", "60"]) 
```

**问题**

我真正要问的是，有没有办法（使用 subprocess 模块）注销并重新启动我的计算机？

**技术规格**

Python 2.7.3

视窗 7、32 位

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2016-10-11T13:03:50.130

首先，您必须：

```
import subprocess 
```

要关闭您的 Windows PC：

```
subprocess.call(["shutdown", "/s"]) 
```

重新启动 Windows PC

```
subprocess.call(["shutdown", "/r"]) 
```

要注销您的 Windows PC：

```
subprocess.call(["shutdown", "/l "]) 
```

要在 900 秒后关闭 Windows PC：

```
subprocess.call(["shutdown", "/s", "/t", "900"]) 
```

要中止关闭，因为没有充分的理由使用 python 脚本关闭你的电脑，你只是从 stackoverflow 复制粘贴代码：

```
subprocess.call(["shutdown", "/a "]) 
```

我只在 Python 3.5 中尝试过这些函数调用。首先，我认为自 python 2.7 以来这没有改变，其次：它是 2016 年，所以我猜你在问这个问题后已经进行了切换。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-08T01:25:34.193

重新启动：

```
shutdown /r 
```

注销：

```
shutdown /l 
```

最后的代码块（根据要求）：

注销：

```
def shutdown(self):
    import subprocess
    subprocess.call(["shutdown", "-f", "-s", "-t", "60"]) 
```

重新开始：

```
def shutdown(self):
    import subprocess
    subprocess.call(["shutdown", "-f", "-r", "-t", "60"]) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-08T01:34:52.153

如果您无法`shutdown`以某种方式开始工作，您总是可以从 USER 库中调用它调用的函数。您*可以*通过`ctypes`or执行此操作`win32api`，但您也可以执行此操作：

```
subprocess.call(['rundll32', 'user.exe,ExitWindowsExec') 
```

或者您可以调用开始菜单使用的更高级别的 shell 函数：

```
subprocess.call(['rundll32', 'shell32.dll,SHExitWindowsEx 2') 
```

（有关这些功能，请参阅 MSDN 文档。）

我认为这可能是最糟糕的方法。如果要运行命令，请运行`shutdown`；如果要使用 API，请使用`win32api`. 但是，如果您的系统异常混乱且`shutdown /r`无法正常工作，那么这是一种选择。

# search - Emacs 搜索的“1 of n”结果

> ID：14764130
> 
> 赞同：7
> 
> 时间：2013-02-08T01:09:13.257
> 
> 标签：search, emacs

当我在 emacs 中使用增量搜索时，我不知道我在整个匹配项中的位置。在 Chrome 浏览器中，它使用“2 of 30”表示位置。我怎样才能在 Emacs 中做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-08T06:59:33.580

这是我第一次尝试实现这一点。

它使用`isearch`实现的惰性突出显示，并强制突出显示覆盖整个缓冲区（不仅仅是可见部分）——这会减慢对大缓冲区的搜索。然后它更新显示以包括相对于突出显示的搜索结果的当前位置（总计）。

这样做的缺点是它依赖于被搜索和突出显示的整个缓冲区。而且，有时当您进行下一场比赛时，即使亮点仍然明显存在`C-s`，显示也会更改。`(0 of 1)`

但是，这似乎是一个合理的第一次削减。

准备大切割/粘贴：

```
(require 'isearch)
(defun lazy-highlight-cleanup (&optional force)
  "Stop lazy highlighting and remove extra highlighting from current buffer.
FORCE non-nil means do it whether or not `lazy-highlight-cleanup'
is nil.  This function is called when exiting an incremental search if
`lazy-highlight-cleanup' is non-nil."
  (interactive '(t))
  (if (or force lazy-highlight-cleanup)
      (while isearch-lazy-highlight-overlays
        (delete-overlay (car isearch-lazy-highlight-overlays))
        (setq isearch-lazy-highlight-overlays
              (cdr isearch-lazy-highlight-overlays))))
  (when isearch-lazy-highlight-timer
    (cancel-timer isearch-lazy-highlight-timer)
    (setq isearch-message-suffix-add "")
    (setq isearch-lazy-highlight-timer nil)))

(defun isearch-lazy-highlight-search ()
  "Search ahead for the next or previous match, for lazy highlighting.
Attempt to do the search exactly the way the pending Isearch would."
  (condition-case nil
      (let ((case-fold-search isearch-lazy-highlight-case-fold-search)
            (isearch-regexp isearch-lazy-highlight-regexp)
            (search-spaces-regexp isearch-lazy-highlight-space-regexp)
            (isearch-word isearch-lazy-highlight-word)
            (search-invisible nil)  ; don't match invisible text
            (retry t)
            (success nil)
            (isearch-forward isearch-lazy-highlight-forward)
            (bound (if isearch-lazy-highlight-forward
                       (min (or isearch-lazy-highlight-end-limit (point-max))
                            (if isearch-lazy-highlight-wrapped
                                isearch-lazy-highlight-start
                              (isearch-window-end)))
                     (max (or isearch-lazy-highlight-start-limit (point-min))
                          (if isearch-lazy-highlight-wrapped
                              isearch-lazy-highlight-end
                            (isearch-window-start))))))
        ;; Use a loop like in `isearch-search'.
        (while retry
          (setq success (isearch-search-string
                         isearch-lazy-highlight-last-string bound t))

          ;; Clear RETRY unless the search predicate says
          ;; to skip this search hit.
          (if (or (not success)
                  (= (point) bound) ; like (bobp) (eobp) in `isearch-search'.
                  (= (match-beginning 0) (match-end 0))
                  (funcall isearch-filter-predicate
                           (match-beginning 0) (match-end 0)))
              (setq retry nil)))
        success)
    (error nil)))

(defun isearch-find-current-overlay ()
  (let ((total 0)
        (count 1)
        (olist isearch-lazy-highlight-overlays))
    (while olist
      (setq total (1+ total))
      (if (< (overlay-end (car olist)) (point))
          (setq count (1+ count)))
      (setq olist
            (cdr olist)))
    (cons count total)))

(add-hook 'isearch-update-post-hook 'isearch-count-message)

(defun isearch-count-message ()
  (let ((counts (isearch-find-current-overlay)))
    (setq isearch-message-suffix-add (format " (%d of %d)" (car counts) (cdr counts)))))

(defun isearch-window-start ()
  "force highlight entire buffer"
  (point-min))

(defun isearch-window-end ()
  "force highlight entire buffer"
  (point-max))

(defun isearch-lazy-highlight-update ()
  "Update highlighting of other matches for current search."
  (let ((max lazy-highlight-max-at-a-time)
        (looping t)
        nomore)
    (with-local-quit
      (save-selected-window
        (if (and (window-live-p isearch-lazy-highlight-window)
                 (not (eq (selected-window) isearch-lazy-highlight-window)))
            (select-window isearch-lazy-highlight-window))
        (save-excursion
          (save-match-data
            (goto-char (if isearch-lazy-highlight-forward
                           isearch-lazy-highlight-end
                         isearch-lazy-highlight-start))
            (while looping
              (let ((found (isearch-lazy-highlight-search)))
                (when max
                  (setq max (1- max))
                  (if (<= max 0)
                      (setq looping nil)))
                (if found
                    (let ((mb (match-beginning 0))
                          (me (match-end 0)))
                      (if (= mb me) ;zero-length match
                          (if isearch-lazy-highlight-forward
                              (if (= mb (if isearch-lazy-highlight-wrapped
                                            isearch-lazy-highlight-start
                                          (isearch-window-end)))
                                  (setq found nil)
                                (forward-char 1))
                            (if (= mb (if isearch-lazy-highlight-wrapped
                                          isearch-lazy-highlight-end
                                        (isearch-window-start)))
                                (setq found nil)
                              (forward-char -1)))

                        ;; non-zero-length match
                        (let ((ov (make-overlay mb me)))
                          (push ov isearch-lazy-highlight-overlays)
                          ;; 1000 is higher than ediff's 100+,
                          ;; but lower than isearch main overlay's 1001
                          (overlay-put ov 'priority 1000)
                          (overlay-put ov 'face lazy-highlight-face)
                          (overlay-put ov 'window (selected-window))))
                      (if isearch-lazy-highlight-forward
                          (setq isearch-lazy-highlight-end (point))
                        (setq isearch-lazy-highlight-start (point)))))

                ;; not found or zero-length match at the search bound
                (if (not found)
                    (if isearch-lazy-highlight-wrapped
                        (setq looping nil
                              nomore  t)
                      (setq isearch-lazy-highlight-wrapped t)
                      (if isearch-lazy-highlight-forward
                          (progn
                            (setq isearch-lazy-highlight-end (isearch-window-start))
                            (goto-char (max (or isearch-lazy-highlight-start-limit (point-min))
                                            (isearch-window-start))))
                        (setq isearch-lazy-highlight-start (isearch-window-end))
                        (goto-char (min (or isearch-lazy-highlight-end-limit (point-max))
                                        (isearch-window-end))))))))
            (unless nomore
              (setq isearch-lazy-highlight-timer
                    (run-at-time lazy-highlight-interval nil
                                 'isearch-lazy-highlight-update))))))))) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-08-31T10:29:39.747

前几天我[看到了](http://irreal.org/blog/?p=2917)这个：

[https://github.com/syohex/emacs-anzu](https://github.com/syohex/emacs-anzu)

> anzu.el 是 anzu.vim 的 Emacs 端口。anzu.el 提供了一种次要模式，该模式在各种搜索模式下的模式行中显示当前匹配和总匹配信息。

github页面上的截图是其功能的gif动画。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-08T05:41:00.623

开箱即用，您可以使用`M-s``o`while isearch 来至少查看匹配的总数（即使不幸的是它还不够聪明，无法跟踪您在原始缓冲区中的匹配）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-03-30T00:10:03.477

将以下内容添加到您的 emacs 初始化文件中。尽管使用了计数匹配，但它在我的笔记本电脑上运行得非常快。我还没有尝试过非常大的文件。

```
(defun my-isearch-update-post-hook()
  (let (suffix num-before num-after num-total)
    (setq num-before (count-matches isearch-string (point-min) (point)))
    (setq num-after (count-matches isearch-string (point) (point-max)))
    (setq num-total (+ num-before num-after))
    (setq suffix (if (= num-total 0)
                     ""
                   (format " [%d of %d]" num-before num-total)))
    (setq isearch-message-suffix-add suffix)
    (isearch-message)))

(add-hook 'isearch-update-post-hook 'my-isearch-update-post-hook) 
```

# deployment - Azure：如何禁用部署只创建一个包文件？

> ID：14764132
> 
> 赞同：1
> 
> 时间：2013-02-08T01:09:46.480
> 
> 标签：deployment, azure, visual-studio-2012

我们有几个云服务，并通过 Team Build 对测试环境进行持续交付。对于生产环境，我们有自己的部署 powershell 脚本。此脚本需要一个 .cspkg 文件进行部署。

我现在的问题是我还没有找到一种方法让团队构建只创建一个 .cspkg 文件而不是将其发布到 Azure。我使用了 AzureContinousDeployment.11.xaml 模板，它坚持发布包。我尝试将“部署设置名称”设置为空字符串。构建运行时没有错误，但这样不会创建任何包。

有没有办法在两者之间阻止它？也许我可以在 .azurePubxml 文件中进行更改以实现这一目标？

环境：VS2012，Team Foundation Service（visualstudio.com）...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-27T17:54:06.047

在编辑定义的 Process 选项卡上：

如果您清除部署设置名称和发布 - Azure 云服务和发布 - Azure 网站下的所有值（除非您可以为允许升级保留 True），则构建模板将不知道在哪里发布项目。

同样在编辑定义的 Build Defaults 选项卡上：

选择“将构建输出复制到以下源代码管理文件夹（如果不存在将创建此文件夹）：”添加一些名称和路径，例如：“$/your cloud service/drops”

这将导致您的所有构建在成功构建后移动到 drop 文件夹。在这些 drop 文件夹中，将有一个 app.publish 目录，其中包含您的 *.cspkg 和 *csfg 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-26T15:45:51.420

我有我的自定义构建模板 xaml 调用带有“发布”目标的 Azure 项目（.ccproj 文件）上的 MSBuild 任务（Microsoft.TeamFoundation.Build.Workflow.Activities.MSBuild）。

（尽管与将包推送到 Azure 的 UI 命令同名，但“发布”目标仅表示“生成包而不将其推送到任何地方”。）

# assembly - 使用无条件的 MIPS 分支而不是跳转有什么好处吗？

> ID：14764133
> 
> 赞同：1
> 
> 时间：2013-02-08T01:09:47.303
> 
> 标签：assembly, mips

我目前正在大学学习 MIPS 汇编，并且正在努力感受这门语言。据我了解，跳转命令允许我在内存中跳得更远，而不是分支命令会给出额外的可用位。那么为什么我会使用无条件分支而不是使用跳转呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T01:18:17.663

跳转有更多的立即位，并且是一个绝对地址。分支使用偏移量。一个是位置无关的，例如另一个不是。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T01:55:51.010

MIPS 没有无条件分支。它可能是您的汇编程序提供的伪指令，例如 BEQ R1,R1。分支是可取的，因为它们允许代码位于内存中的任何位置而无需[*重新定位*](http://en.wikipedia.org/wiki/Relocation_%28computing%29)。希望在没有 MMU 的机器上实现共享库。[这篇维基百科文章](http://en.wikipedia.org/wiki/Position-independent_code)中的背景资料。

# ruby - 交集完成后，顺序是否保留在数组中？

> ID：14764135
> 
> 赞同：6
> 
> 时间：2013-02-08T01:10:01.790
> 
> 标签：ruby, arrays

当我对两个数组进行交集时，是否可以保证生成的顺序基于第一个数组的顺序？

例如，如果我有

```
a = [1,2,3]
b = [3,2,1] 
```

可以`a & b`返回`[3,2,1]`，而不是`[1,2,3]`（这是我所期望的）？

我在 RDoc 或 Pickaxe 的 Array 文档中都找不到直接解决此问题的任何内容。

RubySpec 有一个规范，它[创建一个包含元素的数组，以便它们首先遇到](https://github.com/rubyspec/rubyspec/blob/master/core/array/intersection_spec.rb#L16)，但我应该假设 YARV Ruby 会遵守该规范吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T22:44:40.767

看起来这是一个有保证的功能。他们升级了[修订版 39415](http://bugs.ruby-lang.org/projects/ruby-trunk/repository/revisions/39415)中的 RDoc 描述。它应该在某个时候反映出来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T01:41:05.383

YARV 从 1.9 版开始就是官方的 Ruby 解释器，所以我认为它确实尊重该规范。顺便说一句，RubySpec 是作为该语言的可执行规范创建的，允许开发人员创建自己的解释器来通过该规范，我相信 YARV 是在 RubySpec 中考虑到这一点而创建的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T04:39:07.713

文档中没有保证，但交集遵循左侧集合的顺序。

源代码显示数组`a`设置顺序：

```
...
for (i=0; i<RARRAY_LEN(ary1); i++) {
    vv = (st_data_t)(v = rb_ary_elt(ary1, i));
    if (st_delete(RHASH_TBL(hash), &vv, 0)) {
        rb_ary_push(ary3, v);
    }
}
... 
```

测试很简单：

```
a = [1,2,3]
b = [3,2,1]

a.size.times do
    puts "a = #{ a.join(',') }\ta & b = #{ (a & b).join(',') }\tb & a = #{ (b & a).join(',') }"
  a.rotate! 
end 
```

哪个输出：

```
a = 1,2,3 a & b = 1,2,3 b & a = 3,2,1
a = 2,3,1 a & b = 2,3,1 b & a = 3,2,1
a = 3,1,2 a & b = 3,1,2 b & a = 3,2,1

```

那是使用 Ruby 1.9.3-p374

# objective-c - 使用分布式对象的进程之间的通信

> ID：14764136
> 
> 赞同：1
> 
> 时间：2013-02-08T01:10:08.283
> 
> 标签：objective-c, xcode, cocoa, ipc, distributed-objects

我无法出售代理对象，它只是在尝试连接时卡在客户端

```
NSConnection *conn = [NSConnection connectionWithRegisteredName:@"server"  host:nil]; 
```

这是我注册连接和出售对象的方法

```
//server
-(void)initServer {

NSConnection * connection = [[NSConnection alloc]init];

MZRemoteObject * obj = [[MZRemoteObject alloc]init];
obj.message = @"hello world";
[connection setRootObject:obj];
if([connection registerName:@"server"]== NO){
    NSLog(@"error Register Server");
}
NSLog(@"Registered Server");
} 
```

客户端（获取出售的对象）

```
- (void)recieveMessage {

NSDistantObject *proxy;
NSConnection *conn = [NSConnection connectionWithRegisteredName:@"server"  host:nil];

if (!conn) {
    NSLog(@"conn recieve message error");
}

proxy = [conn rootProxy];
MZRemoteObject * obj =(MZRemoteObject*)proxy;

if (!proxy) {
    NSLog(@"proxy,recieve message error");
}
NSLog(@"----%@",obj.message);
} 
```

谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T13:47:53.680

```
[[NSRunLoop currentRunLoop] run]; 
```

在 -(void)initServer 方法中启动当前运行循环。

```
-(void)initServer {

NSConnection * connection = [[NSConnection alloc]init];

MZRemoteObject * obj = [[MZRemoteObject alloc]init];
obj.message = @"hello world";
[connection setRootObject:obj];
if([connection registerName:@"server"]== NO){
    NSLog(@"error Register Server");
}
NSLog(@"Registered Server");
[[NSRunLoop currentRunLoop] run];  
} 
```

# java - 带参数的 JavaFX JavaScript 调用

> ID：14764139
> 
> 赞同：1
> 
> 时间：2013-02-08T01:10:42.073
> 
> 标签：java, javascript, arguments, javafx

我需要知道如何使用参数从 JavaScript 向上调用 JavaFX。一些示例代码：

```
JSObject script = (JSObject) webEngine.executeScript("window");
script.setMember("app", SignIn(arg1, arg2));

private boolean SignIn(String uid, String passwd) {
        boolean signedIn = false;
        System.out.println("Signing In");
        return signedIn;
} 
```

html

```
<html>
<body>
<a onclick="app.SignIn(uid, passwd)">Click to sign in</a>
</body>
</html> 
```

此代码不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T11:51:58.847

线

```
script.setMember("app", SignIn(arg1, arg2)); 
```

似乎是错误的。尝试

```
script.setMember("app", new SignInManager()); 
```

其中 SignInManager 是一个包含您的 SignIn(String uid, String passwd) 方法的**类。**你可以在这条线上做一个类比，比如：

```
app = new SignInManager(); 
```

然后在javascript代码中使用它

```
app.SignIn(uid, passwd) 
```

点击事件。所以（作为对您下面评论的回复）您实际上是在此处将参数从 javascript 代码传递到 Java 代码。

按照惯例，方法名称应以小写开头，如 signIn(String uid, String passwd)。

# wpf - 链接两个listview的行高

> ID：14764141
> 
> 赞同：0
> 
> 时间：2013-02-08T01:10:55.630
> 
> 标签：wpf

我有一个自定义控件，它有两个使用 GridViewRowPresenters 的 listViews。我需要两个 listViews 的行高相同。问题是在运行时间之前我不知道高度会是多少。

也就是说，两者的高度都将设置为 Auto，并且在呈现控件时，一个 listView 的行将在 ActualHeight = 30 处，另一个在 ActualHeight = 40 处。我希望它们都是 40。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T06:04:24.207

如果 ListViews 使用共享项目模板，您只需将 GridViewRowPresenter 包装在网格中，然后在该网格的唯一行上使用 SharedSizeGroup。这是如何实现的。

**XAML**

```
<UserControl x:Class="WpfApplication1.UserControl2"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             d:DesignHeight="300"
             d:DesignWidth="300"
             mc:Ignorable="d">
    <UserControl.Resources>
        <GridViewColumnCollection x:Key="GridViewColumns">
            <GridViewColumn Width="100"
                            DisplayMemberBinding="{Binding Path=Text}"
                            Header="Text" />
        </GridViewColumnCollection>
        <DataTemplate x:Key="RowTemplate">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" SharedSizeGroup="RowSizeGroup" />
                </Grid.RowDefinitions>
                <Border BorderBrush="Black" BorderThickness="1">
                    <GridViewRowPresenter Columns="{StaticResource GridViewColumns}" />
                </Border>
            </Grid>
        </DataTemplate>
    </UserControl.Resources>
    <Grid IsSharedSizeScope="True">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition />
            <RowDefinition />
        </Grid.RowDefinitions>
        <GridViewHeaderRowPresenter Columns="{StaticResource GridViewColumns}" />
        <ListView Grid.Row="1"
                  ItemTemplate="{StaticResource RowTemplate}"
                  ItemsSource="{Binding Path=Items1}" />
        <ListView Grid.Row="2"
                  ItemTemplate="{StaticResource RowTemplate}"
                  ItemsSource="{Binding Path=Items2}" />
    </Grid>
</UserControl> 
```

**代码隐藏（供参考，但不是很重要）**

```
using System.Collections.ObjectModel;

namespace WpfApplication1
{
    /// <summary>
    /// Interaction logic for UserControl2.xaml
    /// </summary>
    public partial class UserControl2
    {
        public UserControl2()
        {
            InitializeComponent();
            DataContext = this;
            Items1 = new ObservableCollection<object>
                {
                    new Item {Text = "Hello World!"},
                    new Item {Text = "Hello \nWorld!"}
                };
            Items2 = new ObservableCollection<object>
                {
                    new Item {Text = "Testing 1\n2\n3"}
                };
        }

        private class Item
        {
            public string Text { get; set; }
        }

        public ObservableCollection<object> Items1 { get; private set; }

        public ObservableCollection<object> Items2 { get; private set; }
    }
} 
```

如果要明确设置行的高度，只需替换`<RowDefinition Height="Auto" SharedSizeGroup="RowSizeGroup" />`为`<RowDefinition Height="40" SharedSizeGroup="RowSizeGroup" />`40 在这种情况下是特定高度。

# html - UL 导航栏中的锚点在链接本身之外不可点击

> ID：14764143
> 
> 赞同：2
> 
> 时间：2013-02-08T01:11:20.470
> 
> 标签：html, css, anchor, block

我有一个导航栏：

```
<div class="solidblockmenuwrapper">
                                        <ul id="solidblockmenu">
                                            <li class="my_home"><a href="http://www.playerspace.com" class="my_home ">Home</a></li>
                                            <li><a href="/index.cfm/action/features" class="null">Features</a></li>

                                            <li><a href="/faq.cfm" class="null">Contact Us</a></li>

                                                <li><a href="/improved_login.cfm" class="null">Where do I go from here?</a></li>                                        

                                                <li class="my_last"><a href="/logoff.cfm">Sign-Off</a></li>                                     

                                        </ul>   
                                    </div> 
```

这是CSS：

```
.solidblockmenuwrapper{width:1024px;margin:0px 0px 3px 0px;padding:0px 0px 0px 10px;background-color:#CCC;border-top:2px solid #FFFFFF;border-bottom:5px solid #999;overflow:auto;position:relative;border:0px solid green;}
#solidblockmenu ul{list-style-type: none;padding:0px !important;}
#solidblockmenu li{float: left;border-right: 1px solid #FFF;}
#solidblockmenu li a{color: #666;font-weight: bold;text-decoration: none;padding: 10px 10px 10px 10px;display: block !important;}
* html #solidblockmenu ul li a {width: 1%;}
#solidblockmenu li a:hover{color:#FFF !important;background-color:#666;}
#solidblockmenu li a.my_home{padding-left:30px !important;}
#solidblockmenu li a:hover,#solidblockmenu li a.my_current{color:#FFF !important;background-color:#666;}
#solidblockmenu li.my_last {border-right:0px !important;}
#solidblockmenu li a.tryitnow{color:yellow;text-shadow: 2px 2px 2px #666;}
#solidblockmenu li.my_home{margin-left:-30px;} 
```

对于我的生活，我似乎无法弄清楚为什么锚元素在文本本身之外是不可点击的。

你可以在这里看到导航栏：[http ://www.playerspace.com](http://www.playerspace.com)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T01:15:28.590

这是因为您的 div id="content" 与导航栏重叠。您在 div id="content" 上有一个负边距，它将向上移动以覆盖导航链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T01:13:35.687

如果我做对了，请查看您的 .content 负边距值

# ajax - 有没有办法在 Oracle Apex 中使用 AJAX 设置 REQUEST？

> ID：14764145
> 
> 赞同：0
> 
> 时间：2013-02-08T01:11:35.113
> 
> 标签：ajax, oracle-apex

这个问题紧随[上一个问题](https://stackoverflow.com/questions/14616423/how-to-use-ajax-or-dynamic-actions-to-refresh-one-table-on-a-page-in-oracle-apex)。

我有一个带有列链接的主报告，单击该链接时，会使用一个动态操作刷新辅助报告报告。

二级报告中实际上有 2 个三级报告作为子区域，仅当 REQUEST = 某个值时才有条件可见。

我调用 AJAX 来设置页面项，而无需使用此方法刷新页面：

```
 var get = new htmldb_Get(null,&APP_ID.,'APPLICATION_PROCESS=dummy',&APP_PAGE_ID.);
 get.add('PX_ITEM', 'new value');
 gReturn = get.get();
 get = null; 
```

我希望有像下面这样简单的东西来使用 AJAX 为该页面设置请求

```
get.add('PX_REQUEST', 'new value'); 
```

谢谢你。

# r - 行中的 R 表

> ID：14764152
> 
> 赞同：2
> 
> 时间：2013-02-08T01:12:32.867
> 
> 标签：r

我有一些包含调查结果的数据框。第一帧列出了调查中每个问题的问题 ID (q_id)：

```
 q_id
1   q1
2   q2
3   q3 
```

第二个数据框为每个主题 (s_id) 保存主题响应的每个问题的响应 (res)。主题可以跳过问题：

```
 s_id q_id res
1    1   q1   a
2    2   q1   b
3    1   q2   b 
```

我想要生成的是一个表格，其中显示了对每个问题的回答，其中列是问题 ID，每一行代表一个主题。在上面的示例中，表格如下所示：

```
 q1 q2  q3
1  a  b  NA
2  b  NA NA 
```

生成这样一个表的最佳方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T01:36:32.813

假设您的问题 data.frame 是`DQ`并且您的答案`DT`

您需要确保`q_id`答案中的列具有所有可用级别

```
DT$q_id <- factor(as.character(DT$q_id), levels = levels(DQ$q_id)) 
```

然后您可以根据需要使用`reshape2`and `dcast`with`drop = FALSE`进行投射

```
library(reshape2)
dcast(DT, s_id~q_id, value.var = 'res', drop = FALSE)
  s_id q1   q2   q3
1    1  a    b <NA>
2    2  b <NA> <NA> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T01:40:38.287

```
> dat <- read.table(text="  s_id q_id res
+ 1    1   q1   a
+ 2    2   q1   b
+ 3    1   q2   b", header =TRUE, stringsAsFactors=FALSE)

# Create a dummy entry for each question:

> dat<- rbind(dat, data.frame(s_id=1,q_id=qdat$q_id, res= NA))
> dat
  s_id q_id  res
1    1   q1    a
2    2   q1    b
3    1   q2    b
4    1   q1 <NA>
5    1   q2 <NA>
6    1   q3 <NA>
> reshape(dat,  timevar="q_id", idvar="s_id", direction ="wide")
  s_id res.q1 res.q2 res.q3
1    1      a      b   <NA>
2    2      b   <NA>   <NA> 
```

# java - 当我释放鼠标按钮时，MouseEvent 没有注册释放

> ID：14764157
> 
> 赞同：0
> 
> 时间：2013-02-08T01:13:16.573
> 
> 标签：java, swing

```
public void mousePressed(MouseEvent e) {
    //Invoked when a mouse button has been pressed on a component.
    if (e.getButton() == MouseEvent.BUTTON1) {
        isDown = true;
        System.out.println("isDown is now true");
    }
    if (e.getButton() == MouseEvent.BUTTON3) {
        isDown2 = true;
        System.out.println("isDown2 is now true");
    }
    do {
        Point location = MouseInfo.getPointerInfo().getLocation(); 
        int x = location.x - (drawingPanel.getLocationOnScreen()).x;
        int y = location.y - (drawingPanel.getLocationOnScreen()).y;
        drawingPanel.paint(drawingPanel.getGraphics(), (x - (x % 20) - 1), (y - (y % 20) - 1), 19, 19);
    } while (isDown);
    System.out.println("Mouse has been pressed down.");
}

public void mouseReleased(MouseEvent e) {
    //Invoked when a mouse button has been released on a component.
    if (e.getButton() == MouseEvent.BUTTON1) {
        isDown = false;
        System.out.println("isDown is now false");
    }
    if (e.getButton() == MouseEvent.BUTTON3) {
        isDown2 = false;
        System.out.println("isDown2 is now false");
    }
    System.out.println("Mouse has been released.");
} 
```

这就是我到目前为止所拥有的。我的初衷是设计代码，以便`isDown`在按下鼠标时将布尔值设置为 true，然后`while`在为 true 时运行循环`isDown`。如果释放鼠标按钮，我将设置`isDown`为 false 以终止`while`循环。

我在这里搞砸了什么？两个 MouseEvent 方法不可能同时运行吗？布尔变量的变化`isDown`没有被注册，我手上有一个无限的while循环。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-08T01:24:46.563

这是对事件调度线程的典型违反。

所有 UI 代码都在单个线程中运行。所有事件都从同一个线程调度 UI，这意味着如果您阻塞该线程（使用循环或其他阻塞操作），则不会调度任何事件。这将使您的程序看起来像挂起。

查看[Swing 中的并发以](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)获取更多详细信息。

您真正应该做的是使用 a[`MouseMoitionListener`](http://docs.oracle.com/javase/7/docs/api/java/awt/event/MouseMotionListener.html)来跟踪拖动事件。查看[如何使用鼠标侦听器](http://docs.oracle.com/javase/tutorial/uiswing/events/mouselistener.html)了解更多详细信息。

这`drawingPanel.paint(drawingPanel.getGraphics(), (x - (x % 20) - 1), (y - (y % 20) - 1), 19, 19);`也让我担心不已。

您永远不应该`getGraphics`用来执行自定义绘画。 `getGraphics`可以返回 null 并且只是最后一个绘制周期的快照。当发生另一次重绘时，使用此方法完成的任何绘画都将被移除/清理。

您应该创建一个自定义组件（例如 a `JPanel`）并覆盖它的`paintComponent`方法并在其中执行您需要的任何绘画。查看[执行自定义绘画](http://docs.oracle.com/javase/tutorial/uiswing/painting/)以获取更多详细信息

**例子**

![在此处输入图像描述](../Images/98226d01ce5ef32a44804c9dbe34527b.png)

```
public class MouseDraggedTest {

    public static void main(String[] args) {
        new MouseDraggedTest();
    }

    public MouseDraggedTest() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (Exception ex) {
                }

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class TestPane extends JPanel {

        private Map<Point, List<Point>> mapPoints;
        private Point currentPoint;

        public TestPane() {
            mapPoints = new HashMap<>(25);
            MouseAdapter mouseListener = new MouseAdapter() {
                @Override
                public void mousePressed(MouseEvent e) {
                    currentPoint = e.getPoint();
                    mapPoints.put(currentPoint, new ArrayList<Point>(25));
                }

                @Override
                public void mouseReleased(MouseEvent e) {
                    List<Point> points = mapPoints.get(currentPoint);
                    if (points.isEmpty()) {
                        mapPoints.remove(currentPoint);
                    }
                    currentPoint = null;
                }

                @Override
                public void mouseDragged(MouseEvent me) {
                    List<Point> points = mapPoints.get(currentPoint);
                    points.add(me.getPoint());
                    repaint();
                }
            };
            addMouseListener(mouseListener);
            addMouseMotionListener(mouseListener);
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(200, 200);
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);

            for (Point startPoint : mapPoints.keySet()) {
                List<Point> points = mapPoints.get(startPoint);
                for (Point p : points) {
                    if (startPoint != null) {
                        g.drawLine(startPoint.x, startPoint.y, p.x, p.y);
                    }
                    startPoint = p;
                }
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T01:23:55.000

您正在方法中执行`while`循环`mousePressed()`。这意味着您正在阻止 Swing 事件调度线程！由于只要为`isDown`真，此方法就不会返回，因此执行将不会返回到侦听器处理程序，它永远不会调用您的`mouseReleased()`侦听器。

作为一般规则，您永远不应该在侦听器中启动长时间运行的操作，因为它会使您的 GUI 只要它运行就不会响应任何事件。在这种情况下，这意味着永远！任何侦听器不应该做的只是设置几个标志，然后返回。您的应用程序必须保持响应。

一种典型的解决方案是启动一个新线程来完成长时间运行的工作。它将释放事件调度线程，并且将调用您的 mouseReleased() 侦听器。

此解决方案的问题在于您的工作是在 Swing 组件上绘制的。所有图形都应该在一个覆盖的`paintComponent`方法中完成。正如@MadProgrammer 已经向您解释过的那样，我不会详细介绍它。

# javascript - 如何找到所有不重叠的组合？

> ID：14764160
> 
> 赞同：2
> 
> 时间：2013-02-08T01:13:32.417
> 
> 标签：javascript, algorithm

我需要找到分组到桶中的所有可能的非重叠项目组合。可能有任意数量的桶，每个桶可以包含任意数量的项目。有效的组合将包含每个存储桶中的 1 个项目。

```
bucket   item  start end
========================

      |-- I1     1    5
B1----|-- I2     6    9
      |-- I3    15    20

      |-- I4    6     9
B2----|-- I5    10    14
      |-- I6    14    25

      |-- I7    1     14
B3----|-- I8    26    40
      |-- I9    1     20
      |-- In ...

Bn ... 
```

例如，我们可以做第 1,4,8 项；1,5,8; 1,6,8; 2,5,8; 2,6,8; 3,4,8; 和 3,5,8。

我们可以观察到项目 9 没有出现在组合中，因为它与桶 1 中的所有项目重叠，没有留下任何选项。

我怎样才能最有效地解决这个问题？我正在浏览器 JavaScript 中实现这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T02:31:01.330

蛮力方法是生成桶的笛卡尔积，并过滤掉任何无效的。因此，假设您的存储桶只是项目列表，大致如下：

```
var cp = _.flatten(_.flatten(_.map(B1, function(item1) {
    return _.map(B2, function(item2) {
        return _.map(B3, function(item3) {
            return [item1, item2, item3];
        });
    });
}), true), true); 
```

将为您提供 3 个桶的笛卡尔积。

```
_.filter(cp, function(tuple) {
    return !overlaps(item1, item2) && !overlaps(item1, item3) && !(overlaps(item2, item3);
}); 
```

将过滤掉你不想要的那些（给定一个合适的重叠定义）。

```
function overlaps(a, b) {
    return a.lower > b.upper || b.lower > a.upper;
} 
```

您可以通过将笛卡尔积转换为递归调用来将过滤器推广到任意数量的区间，从而计算 _.first(args) 在 _.rest(args) 的笛卡尔积上的展平展开。

您可以通过生成所有可能的对来将过滤器推广到任意数量的间隔，然后调用`!_.any(pairs, function(pair) { return overlaps.prototype.apply(undefined, pair); });`.

# php - 这个foreach应该被称为获取未定义的索引

> ID：14764170
> 
> 赞同：0
> 
> 时间：2013-02-08T01:14:39.717
> 
> 标签：php

我在下面有一个关联数组：

```
$questions = array();

while ($selectedstudentanswerstmt->fetch()) {           
    $questions[$detailsStudentId][$detailsQuestionId] = array(
        'questionno'=>$detailsQuestionNo,
        'content'=>$detailsQuestionContent
    );    
} 
```

现在我想在 for each 循环中显示这里的信息，但我的问题是应该调用 foreach 循环，因为我相信下面是不正确的，因为它一直在说`questionno`并且`content`在循环中未定义：

```
var_dump($questions);
foreach ($questions as $questionId => $question) {

//LINE 571
    echo '<p><strong>Question:</strong> ' .htmlspecialchars($question['questionno']). ': '     .htmlspecialchars($question['content']) .  '</p>' . PHP_EOL;
}

Notice: Undefined index: questionno in ... on line 571 
Notice: Undefined index: content in ... on line 571 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T01:21:41.557

```
$questions[$detailsStudentId][$detailsQuestionId] = array(...) 
```

在关联索引开始之前，您有两个维度。因此您需要在其中嵌套另一个 foreach 循环：

```
foreach ($questions as $stundentId => $student)
{
    foreach ($student as $questionId => $question)
    {
        // ...
    }
} 
```

# c# - 在 LightSwitch 查询中使用计算字段

> ID：14764171
> 
> 赞同：0
> 
> 时间：2013-02-08T01:14:42.977
> 
> 标签：c#, visual-studio-lightswitch, lightswitch-2012

假设我有一个简单的带有字段的客户表`DayOfBirth`和一个计算字段“年龄”现在我想使用年龄搜索表。

我将 Age 作为参数传递给查询，所以我想到的第一件事是：

```
 query = from c in query
                    where (DateTime.Now - c.DateOfBirth).Days / 360 == Age.Value
                    select c; 
```

但这当然行不通，因为数据提供者不知道如何执行“.Days”

那么这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T01:23:58.910

一个解决方案是在表中添加非计算字段，并在添加新记录事件时计算年龄并将其保存在数据库中，以便以后可以搜索！

但我相信应该有更好的主意！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T12:41:51.603

有一些方法可以绕过*.Days*部分，但是你会遇到与*Age*属性相同的问题，除非没有办法绕过那个问题。计算属性只存在于 LightSwitch 本身中，因此数据提供者再次无法使用它们。

Stacker 关于添加*非计算属性*并将计算值存储*在数据库*中的建议是我这样做的方式（如果我没有使用*RIA 服务*，这是我实际处理这些情况的方式）。

# c# - Web.API MapHttpRoute 参数

> ID：14764177
> 
> 赞同：21
> 
> 时间：2013-02-08T01:15:17.603
> 
> 标签：c#, asp.net-web-api

我的 Web.API 路由有问题。我有以下两条路线：

```
config.Routes.MapHttpRoute(
    name: "MethodOne",
    routeTemplate: "api/{controller}/{action}/{id}/{type}",
    defaults: new { id = RouteParameter.Optional, type = RouteParameter.Optional }
);

config.Routes.MapHttpRoute(
    name: "MethodTwo",
    routeTemplate: "api/{controller}/{action}/{directory}/{report}",
    defaults: new { directory = RouteParameter.Optional, report = RouteParameter.Optional }
); 
```

在我的控制器中，这两种方法：

```
[HttpGet]
[ActionName("methodone")]
public string MethodOne(string id, string type)
{
    return string.Empty;
}

[HttpGet]
[ActionName("methodtwo")]
public string MethodTwo(string directory, string report)
{
    return string.Empty;
} 
```

这两个人似乎不能并存。如果我在 WebApiConfig 中注释掉 MethodOne 路由，则 MethodTwo 路由有效。评论 MethodTwo 路线允许 MethodOne 工作。不加注释，MethodOne 有效，但 MethodTwo 无效。

我希望对这两种方法都使用一条路线，然后似乎它们必须具有相同的参数名称。谁编写具有通用参数名称的方法？坏的。我真的不希望我的方法具有相同的参数名称（如 p1、p2、p3），所以我想我可以为新方法创建一个路由。但即使这样似乎也行不通。

我真的很想念`WebGet(UriTemplate="")`来自 WCF 的休息。

我有一个控制器，它有很多方法，有些有 1、2、3 甚至更多参数。我不敢相信我不能在 MapHttpRoute 方法中使用有意义的参数名称。

我可以完全注释掉这些东西并使用`WebGet()`……但在我到达那里之前，我想看看我是否遗漏了一些东西。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-08T02:12:19.300

您看到此问题的原因是您的第一个路由将匹配两个请求。URL 中的 id 和 type 标记将匹配两个请求，因为当路由运行时，它会尝试解析 URL 并将每个段与您的 URL 匹配。

因此，您的第一条路线将愉快地匹配两个请求，如下所示。

```
~/methodone/1/mytype => action = methodone, id = 1, and type = mytype
~/methodtwo/directory/report => action = methodtwo, id = directory, and type = report 
```

要解决此问题，您应该使用类似的路线

```
config.Routes.MapHttpRoute(
    name: "MethodOne",
    routeTemplate: "api/{controller}/methodone/{id}/{type}",
    defaults: new { id = RouteParameter.Optional, type = RouteParameter.Optional }
);

config.Routes.MapHttpRoute(
    name: "MethodTwo",
    routeTemplate: "api/{controller}/methodtwo/{directory}/{report}",
    defaults: new { directory = RouteParameter.Optional, report = RouteParameter.Optional }
); 
```

即使您使用 WebGet，您也可能需要做一些类似的事情来消除我认为的这两种方法的歧义。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-08T02:12:11.613

您可以选择在查询字符串中传递参数，例如 /MethodTwo?directory=a&report=b，但如果您希望它们出现在路径中，这看起来是基于属性的路由的理想选择。Filip 在这里有一篇很棒的文章：

[http://www.strathweb.com/2012/05/attribute-based-routing-in-asp-net-web-api/](http://www.strathweb.com/2012/05/attribute-based-routing-in-asp-net-web-api/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-08-07T13:43:08.417

来自[http://www.asp.net/web-api/overview/web-api-routing-and-actions/routing-and-action-selection](http://www.asp.net/web-api/overview/web-api-routing-and-actions/routing-and-action-selection)

> 您还可以提供约束，限制 URI 段如何匹配占位符：
> 
> > constraints: new { id = @"\d+" } // 仅当 "id" 为一位或多位数字时才匹配。

将此约束添加到 "MethodOne" (api/{controller}/{action}/{id}/{type}) 意味着它仅在 {id} 是数字时才匹配数字，否则它将匹配 "MethodTwo" ("api /{controller}/{action}/{directory}/{report}”）。

# qt4 - 需要取消映射信号映射器？

> ID：14764178
> 
> 赞同：0
> 
> 时间：2013-02-08T01:15:24.300
> 
> 标签：qt4

我的一段代码：

```
signalMapper = new QSignalMapper(this);
for(int i=0; i<result.count(); ++i)
{
    drawpushb(result.at(i).ptr,pushb.at(i),ratio,0); // draw pic in pushb.
    grid->addWidget(pushb.at(row*opregel+c),row,col);
    connect(pushb.at(i), SIGNAL(clicked()), signalMapper, SLOT(map()));
    signalMapper->setMapping(pushb.at(i), i);

    if(++col==opregel)
    {
       ++row;
       col=0;
    }

    if((row*opregel + col)==totalbuttons)
      break;
}

connect(signalMapper, SIGNAL(mapped(int )),this, SLOT(goto_tab(int ))); 
```

有一个按钮列表被创建，它们被放置在一个网格布局中。它被放置在一个小部件中，并被放入一个 qtabwidget。

好的。现在，这段代码被执行了不止一次。我的 tabwidget 被清空，首先该选项卡上的小部件被删除，所以我的按钮也将被删除。但是映射器会发生什么？这些按钮不再存在。之后，将为新按钮创建一个新的映射器。旧的会发生什么？它还在那里，什么都不做吗？我是否也应该删除信号映射器（如何？）。

我是 qt 的新手，它有时让我困惑 QT 删除了什么以及我应该自己删除什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T06:23:12.827

当您`QObject`在 Qt 中删除 a 时，它的所有子级都会自动删除。因此，最好让您的信号映射器成为您删除的小部件的子级：

```
class MappedWidget : public QWidget
{
    ...
signals:
    void buttonClicked(int i);

private:
    QList<QPushButton*> buttons;
    QSignalMapper *mapper;
}

MappedWidget::MappedWidget(QWidget *parent) :
    QWidget(parent)
{
    mapper = new QSignalMapper(this);
    ...
    // do mapping here
    ...

    connect(mapper, SIGNAL(mapped(int)), this, SIGNAL(buttonClicked(int)));
} 
```

稍后您可以连接`buttonClicked(int)`到此小部件的信号。当这个小部件被删除时，它的所有孩子，包括一个映射器，也将被删除。

# coffeescript - 在 coffeescript 中同时拥有 object.property 和 object.property.method()

> ID：14764181
> 
> 赞同：0
> 
> 时间：2013-02-08T01:15:34.103
> 
> 标签：coffeescript

[更新]我的问题可能不够清楚......进一步澄清我想要完成的事情：

我检索这样的对象：

```
p =
  name:
    first: 'alan'
    last: 'smith' 
```

并希望创建一个结构（一个类，多个类？）最终能够编写这样的东西：

```
person.name # alan smith
person.name.toCap() #Alan Smith
person.name.first # alan
person.name.first.toCap() # Alan
person.name.last # smith
person.name.last.toCap() # Smith
... 
```

所以 ：

1.  有没有办法同时拥有 person.name 和 person.name.first ？
2.  有没有更好的方法来使用方法扩展对象属性而不是扩展像*String*这样的原生类型？

* * *

[原来的]

在咖啡中寻找正确的方法：

```
console.log person.name.last #smith
console.log person.name.last.capitalize() # SMITH
console.log person.name.last.initial() # S 
```

我想出了以下解决方案，但想确保这是要走的路...

```
String::toCap = (remainingToLower=false) -> 
  @[0].toUpperCase() + if remainingToLower then @[1..-1].toLowerCase() 
                                           else @[1..-1]
Number::random = (percent) ->
  offset = @ * percent / 100
  parseInt(Math.floor(Math.random() * 2 * offset) + @ - offset)

class Name
  constructor: (@first, @last) ->

class Person
  constructor: (@name, @age) ->
  toString: () => "#{@name.first.toCap(true)} #{@name.last.toCap(true)} 
                  (#{@age.random(25)})"

# GO --------------------------->

p = new Person(new Name, 18)
p.name.first = 'alaN'
p.name.last = 'smith'

console.log "#{p.toString()}" 
```

感谢您的反馈意见。

[戳这里](http://plnkr.co/edit/ovwj7z "戳这里")

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T22:21:59.850

**上下文**
我有这个原始数据：

```
data =
  name:
    first: 'alan'
    last: 'smith'  
  age: 18  
  address: [  
    {  
      name: 'work'  
      street: '1600 amphitheatre parkway'  
      city: 'mountain view'  
      zip: 'CA 94043'  
    },{  
      name: 'home'  
      street: '1 infinite loop'  
      city: 'cupertino'  
      zip: 'CA 95014'  
    }] 
```

并想创建一个结构来操纵我的数据，如下所示：

```
p = New Person(data)
console.log """
  #{p}                        # alan smith (18), 2 address lines
  #{p.name},                  # alan smith
  #{p.name.first},            # alan
  #{p.address}                # 2 address lines
  #{p.address.work}           # 1600 amphitheatre parkway, mountain view, CA 94043
  #{p.address.work.street}    # 1600 amphitheatre parkway
""" 
```

此外，我希望能够将自定义方法应用于任何成员。例如，假设 toCap() 是一个将 String 的每个单词大写的方法：

```
console.log """
  #{p.name.toCap()},                # Alan Smith
  #{p.name.first.toCap()}           # Alan
  #{p.address.work.toCap()}         # 1600 Amphitheatre Parkway, Moutain View, CA 94043
  #{p.address.work.street.toCap()}  # 1600 Amphitheatre Parkway  
""" 
```

* * *

**解决方案**（请参阅此[Plunk](http://plnkr.co/edit/ovwj7z "看这里")以获取完整代码）

*   使用嵌套类

    ```
    class Person
      constructor: (data) ->
        @name = new Name(data.name)
        @address = new AddressList(data.address) 
    ```

*   动态创建成员

    ```
    class AddressList
      constructor: (list) ->    
        @[addr.name] = new Address(addr) for addr in list 
    ```

*   包装您的属性或使用基类而不是扩展本机对象

    ```
    class StringProperty
      constructor: (@_value) ->
      toString: => 
        @_value
      toCap: (remainingToLower=false) =>
        _words = @_value.split ' '
        (@_toCap(w,remainingToLower) for w in _words).join ' '     
      _toCap : (s, r) ->
        s[0].toUpperCase() + if r then s[1..-1].toLowerCase() else s[1..-1] 
    ```

    ...并直接使用它们...

    ```
    class Name
      constructor: (name) ->
        @first = new StringProperty(name.first)
        @last = new StringProperty(name.last)
      toString: =>
        "#{@first} #{@last}"
      toCap: =>
        "#{@first.toCap()} #{@last.toCap()}" 
    ```

    ...或动态创建成员：

    ```
    @[k] = new StringProperty(data[k]) for k of data when k in Address.fields 
    ```

*   不要忘记像上面那样覆盖 toString()

# javascript - Jquery追加不会显示gif动画

> ID：14764184
> 
> 赞同：0
> 
> 时间：2013-02-08T01:15:54.117
> 
> 标签：javascript, jquery, html

有人可以解释一下为什么我不能显示带有附加的 gif 图像。这是我的代码：

HTML

```
<p id="register_p">
<label for="submit"></label>
<input id="register" type="submit" name="register" value="Registracija"/>
</p>
<p>
<div id="reg_js_img"></div>
</p> 
```

JavaScript

```
$(document).ready(function(){
   $("#register").click(function(){
       var loader_img = '<img src="<?php echo base_url() ?>css/img/ajax-loader.gif" alt="Loading" />';
   $("#register_p").hide();
   $("#reg_js_img").append(loader_img);
   });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T01:49:44.377

可能是您的图片 URL 有问题。请参阅来自维基百科的带有 ajax 加载器图像的工作小提琴。您的代码未更改。

[http://jsfiddle.net/Penfq/1/](http://jsfiddle.net/Penfq/1/)

```
$(document).ready(function(){
   $("#register").click(function(){
       var loader_img = '<img src="http://upload.wikimedia.org/wikipedia/commons/d/de/Ajax-loader.gif" alt="Loading" />';
   $("#register_p").hide();
   $("#reg_js_img").append(loader_img);
   });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T02:58:46.807

I just made it :)

```
<div id="reg_js_img"></div>
<p id="register_p">
<label for="submit"></label>
<input id="register" type="submit" name="register" value="Registracija"/>
</p> 
```

All what i done is switch div for image above submit, for some reason when js hide submit i cant get animation :( strange :)

# javascript - 未捕获的类型错误：无法读取 null 的属性“子项”

> ID：14764193
> 
> 赞同：2
> 
> 时间：2013-02-08T01:17:05.987
> 
> 标签：javascript, jquery, performance, jquery-ui, dom-events

我对 Javascript 很陌生。我有一个错误：

> 未捕获的类型错误：无法读取 null fiddle.jshell.net:1163 的属性“孩子”（匿名函数）

如何修复错误？

在下面提供我的小提琴：

[http://jsfiddle.net/N3GTy/29/embedded/result/](http://jsfiddle.net/N3GTy/29/embedded/result/)

```
var slider = new Swipe(document.getElementById('slider'), {
    callback: function(e, pos) {

        var i = bullets.length;
        while (i--) {
            bullets[i].className = ' ';
        }
        bullets[pos].className = 'on';

    }
}),

bullets = document.getElementById('position').getElementsByTagName('em'),

// tabs
tabs = new Swipe(document.getElementById('tabs'), {
    callback: function(event, index, elem) {
        setTab(selectors[index]);
    }
}),

selectors = document.getElementById('tabSelector').children;
Uncaught TypeError: Cannot read property 'children' of null

for (var i = 0; i < selectors.length; i++) {
    var elem = selectors[i];
    elem.setAttribute('data-tab', i);
    elem.onclick = function(e) {
        e.preventDefault();
        setTab(this);
        tabs.slide(parseInt(this.getAttribute('data-tab'), 10), 300);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T01:32:03.617

没有 ID 为“tabSelector”的元素。因此，document.getElementById('tabSelector') 返回 null。我使用 chrome 的调试器对此进行了测试，方法是：

[http://fiddle.jshell.net/N3GTy/29/show/light/](http://fiddle.jshell.net/N3GTy/29/show/light/)

并从 chrome 调试器控制台运行两个命令：

document.getElementById('slider'); 如您所料，返回一个 domNode。

document.getElementById('tabSelector'); 返回 null，因为它不存在。

然后调用 null.children 会导致您的错误。

# jquery - 多个全屏 div 相互叠加

> ID：14764194
> 
> 赞同：2
> 
> 时间：2013-02-08T01:17:10.030
> 
> 标签：jquery, css, anchor, fullscreen

我创建了一个站点，其中两个全屏 div 相互堆叠。单击第一个 div 时，我使用锚链接和 jQuery 创建平滑向下滚动到第二个全屏 div。

两个 div 都有这些 css 属性：

```
position: relative;
width: 100%;
height: 100%;
top: 0;
left: 0;

display: -webkit-box;
-moz-background-size: cover;
-webkit-background-size: cover;
-o-background-size: cover;
background-size: cover;
-webkit-box-orient: vertical;
-webkit-box-pack: center;
-webkit-box-align: center; 
```

这些由具有以下 css 属性的容器 div 封装：

```
position: absolute;
width: 100%;
height: 100%;
top: 0;
left: 0; 
```

身体有溢出：隐藏；并且 logo-div 根本没有任何 CSS 属性。

一切都很好，但是当我在第二个 div 下并调整浏览器窗口的高度时会出现问题。然后第二个 div 的全屏模式误入歧途，第一个 div 变得可见。

您可以在此处查看该网站： [http ://www.nolovelost.nu/test](http://www.nolovelost.nu/test)

任何有关如何解决此问题的提示将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T03:46:23.373

我相信它应该正常工作！

两个 div 都具有 100% 的高度，当您将窗口大小增加**x**像素时，顶部和底部 div 的高度都 将增加**x**像素......并且将较低的 div 向下“推”！

我不是 jquery 专家......但是当你在底部的 div 应该做的伎俩时，像这样的东西！

```
$(window).resize(function() {
    $('html, body').animate({ scrollTop: $(document).height() },  0);
                  return false;
             }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T04:32:16.473

Andsoa 的回答听起来是对的。我在想一些关于window.resize 的东西。

我的回答不是直接的，但是有许多现有的脚本可以完成你想要做的事情，所以你可以通过检查它们来节省一些时间： [http ://www.impressivewebs.com/parallax-scrolling-scripts-插件/](http://www.impressivewebs.com/parallax-scrolling-scripts-plugins/)

# domain-driven-design - DDD 和同构多对多关系

> ID：14764196
> 
> 赞同：3
> 
> 时间：2013-02-08T01:17:36.180
> 
> 标签：domain-driven-design

想象一下，您建立了一个社交网络。有些用户可以将其他用户添加为好友。您如何在 DDD 中对此进行建模？自然，您不能简单地在`User`班级中拥有朋友列表，因为任何朋友循环都会导致从存储库中获取此类用户时的无限递归。

如果您需要跟踪可能处于待处理、取消、接受或拒绝的好友请求，您将如何更改模型？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T08:41:26.230

嗯...其实按照你的要求去做是很容易的，而且你的情况是标准的。您不必在聚合中存储实际对象`User`，只需将作为.`Friendslist``User``User`

这是 Vaugh Vernon 提出的聚合实现规则之一：通过 ID 链接到其他聚合和实体。所以没有循环，只有 ID 列表。

在那种情况下，某人成为某人的朋友，您必须一次更改两个聚合。这可能是不受欢迎的行为，因为更改不能在一个事务中立即发生。但是对于这种情况，您有域事件，并且可以轻松地对好友请求进行建模：您的聚合可以通过、 或`FriendshipRequested`事件`FriendshipAccepted`相互通信并相应地更改它们的状态。`FriendshipCancelled``FriendshipDeclined`

在这种情况下，您还可以免费收到日志和通知。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T01:28:19.213

A`User`可以有一个`Friend`s 的列表。A`Friend`可以由 UserId、FriendType、GroupId 等组成。

A`User`也可以有一个`FriendRequest`s 的列表。A`FriendRequest`可以有一个 UserId、RequestMessage、RequestStatus 等。

`User`，`Friend`并且`FriendRequest`都可以是同一个聚合的一部分。但是这样做可能会有一些重复。另一种选择是为所涉及的两个用户创建一个 FriendRequest，每个用户都有一个接收和发送的`FriendRequest`ID 列表。

这只是给您一些想法，因为在 DDD 中，您的设计将高度依赖于您的应用程序将如何工作以及需要哪些功能。;-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T01:49:00.493

这在很大程度上取决于您的一致性边界需要在哪里。因此，这也取决于您拥有哪些业务规则。

虽然 Meta-Knight 在同一个 Aggregate 中有 FriendRequest，但我会将它作为它自己的并使用事件在 Aggregates 之间进行通信，因此使 Person 和那里的 FriendRequests 最终保持一致。这将允许你做类似的事情。

```
public class DomainRouter {
    public void When(FriendRequestCreated event)
    {
            //Send command to each Person to record request
    }

    public void When(FriendRequestAccepted event)
    {
            //Send command to Person to record request accepted and add friend.
            //Send comamnd to Person who accepted to add Friend
    }

    public void When(FriendRequestDeclined event)
    {
            //Send command to update Friend request on person.
            //Send command to Person who declined to record they have declined?
    }
} 
```

因此，关于 Person 的信息只是状态记录。FriendRequest Aggregate 将是所有过程实际发生的地方。

在 DDD 中重要的是考虑行为。FriendRequest 可以被请求、撤回、接受和拒绝。一个人能做什么？一个人是否需要被 DDDd 或者你可以让它变得更好并且简单地 CRUD + 将信息存储到图形数据库等中。

也许您想以一种可以访问 person.requestFriendAcceptance(Person id) 的方式对其进行建模，在这种情况下，路由器可能只会通过通知朋友一个 FriendRequest 来处理 FriendRequestCreated 事件。

# javascript - 在函数执行之间保持变量（Javascript）

> ID：14764208
> 
> 赞同：0
> 
> 时间：2013-02-08T01:18:56.907
> 
> 标签：javascript, variables

我有一个 JavaScript 函数，每次单击多个链接之一时都会运行该函数。这些函数首先检查单击的链接的 id 是什么，然后运行 ​​if stement。根据链接的 id，定义不同的变量。

所有这些都有效，但问题是一些链接定义了一个变量，而其他链接定义了另一个，我需要保留在函数的其他执行中定义的函数的先前执行中定义的变量。

一个例子如下：

```
$(document).ready(function()
{
  $(".sidebar a").click(function(event) {
    event.preventDefault()
    var targetID = $(this).attr("data-target")
    $("#" + targetID).attr("src", $(this).attr("href"))
    var element = $(this).attr("class")
    if (element == "submit") {
      var submit = $(this).attr("user")
      alert("1")
    } else if (element == "view") {
      var view = $(this).attr("user")
      alert("2")
    }
  })
  window.history.replaceState({}, 'logs', '/file/path?submit=' + submit + '&' + 'view=' + view)
}) 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T01:33:20.777

你可以使用一个外部函数，它只声明一些变量并返回一个内部函数。内部函数可以从外部范围访问变量，这些变量对于函数的每次调用都保持不变。

## 例子

```
var next = (function() {
    var value = 0;
    function next() {
        return value++;
    }
}());

console.log(next());
console.log(next());
console.log(next()); 
```

## 现场演示

[http://jsfiddle.net/bikeshedder/UZKtE/](http://jsfiddle.net/bikeshedder/UZKtE/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T01:23:39.353

在外部范围内定义变量：

```
$(document).ready(function () {
    var submit;
    var view;

    $(".sidebar a").click(function (event) {
        event.preventDefault();
        var targetID = $(this).attr("data-target");
        $("#" + targetID).attr("src", $(this).attr("href"));
        var element = $(this).attr("class")
        if (element == 'submit') {
            submit = $(this).attr("user")
            alert("1")
        } else if (element == 'view') {
            view = $(this).attr("user")
            alert("2")
        }
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T01:24:05.740

在函数外部创建 var submit 和 view，使其具有全局范围。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T01:30:36.497

`.data()`您可以使用 JQuery 的函数将任意数据存储在匹配的元素上。

例子：

```
$(this).data("submit", $(this).attr("user")); // set a value

var submit = $(this).data("submit"); // retrieve a value 
```

这将数据置于 JQuery 对元素的知识的上下文中，因此它可以在函数调用之间甚至在不同事件之间共享。

# ruby - 使用“要求”的程序的速度

> ID：14764209
> 
> 赞同：0
> 
> 时间：2013-02-08T01:19:06.270
> 
> 标签：ruby, require

```
class Example
  attr_accessor :test
end

a = Example.new 
```

如果我有一个我想使用的类，例如`Example`，这种将所有内容保存在一个文件中的方式，是否比使用“require”从另一个文件中获取该类更快？如果是这样，我们谈论的差异有多大？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T01:22:41.557

不，它并没有更快。老实说，这根本没有区别。

将它放在单独的文件中的好处是：

1.  `require`其他文件可以通过调用使用它
2.  如果需要，更容易跟踪和维护。

# javascript - 动态格式化文本格式/屏蔽形式？

> ID：14764212
> 
> 赞同：0
> 
> 时间：2013-02-08T01:19:33.850
> 
> 标签：javascript, jquery

我正在尝试编写一个表单，用户可以在其中输入日期和时间（即 2005 年 12 月 12 日下午 3 点 45 分），并且我正在尝试屏蔽用户输入，以便动态地使用“/”和“：”在他们键入时出现。我找到了[http://digitalbush.com/projects/masked-input-plugin/](http://digitalbush.com/projects/masked-input-plugin/)，但是有没有一个库可以在没有移动下划线的情况下做类似的事情？最好，我希望用户也可以将已格式化的日期复制并粘贴到表单中。

# git - 如何使用 git 镜像 SVN 存储库中的源代码

> ID：14764213
> 
> 赞同：1
> 
> 时间：2013-02-08T01:19:36.037
> 
> 标签：git, svn

如何使用 git 镜像我在 SVN 存储库中的源代码。

我的公司将所有源代码保存在 SVN 中。我要从 svn 存储库中检出所有代码，然后将其导入互联网上的 git 存储库，这样我就可以回家并从 git 存储库中获取所有内容。我永远不会在家里进行代码更改，所以这将是一个单向镜像。我只想继续镜像我在 git repo 中工作的代码，然后在家里下载它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T01:28:29.497

你探索过使用 git-svn 吗？它允许您在 git 和 svn 存储库之间进行操作。这是一个链接：[http ://www.kernel.org/pub/software/scm/git/docs/git-svn.html](http://www.kernel.org/pub/software/scm/git/docs/git-svn.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T15:02:56.180

我通过执行以下步骤使其工作：

```
cd ~/tmp/svn-mirror/
git svn clone http://svn/java mirror.git

cd ~/tmp/svn-mirror/mirror.git/
git remote add origin git@git.xxxx.com:MIRROR.git
git push origin master

Then Script
#!/bin/bash
cd ~/tmp/svn-mirror/mirror.git/
git svn rebase
git push origin master 
```

# c# - 在 ajax 选项卡的自定义模板中访问动态创建的文本框

> ID：14764217
> 
> 赞同：0
> 
> 时间：2013-02-08T01:20:09.510
> 
> 标签：c#, asp.net

我的 aspx 页面中有一个 TabContainer，如下所示

```
<asp:TabContainer ID="tabcontainer" runat="server" ActiveTabIndex="0">
    </asp:TabContainer> 
```

我在页面的 Oninit 事件上使用 C# 代码为上述容器创建选项卡

```
protected override void OnInit(EventArgs e)
{
    lstCategories = Service.GetCategories();
    numberOfCategories = lstCategories.Count;
    CreateTabs();
    base.OnInit(e);
}

protected void CreateTabs()
{
    try
    {
        for (int i = 0; i < numberOfCategories; i++)
        {
            TabPanel asptab = new TabPanel();
            asptab.ID = lstCategories[i].Id.ToString();
            asptab.HeaderText = lstCategories[i].Name;
            MyCustomTemplate obj = new MyCustomTemplate(lstCategories[i].Id);
            asptab.ContentTemplate = obj;
            tabcontainer.Tabs.Add(asptab);
        }
    }
    catch (Exception ex)
    {

    }
}
public class MyCustomTemplate : ITemplate
{
    public Table tbl;
    public TextBox tbxQuantity;
    public Image img;
    public int countOfItemsPerRow = 2;
    public MyCustomTemplate(int paramCategoryID)
    {
        categoryID = paramCategoryID;

    }

    public void InstantiateIn(Control container)
    {
        InitialiseTheProperties();
        container.Controls.Add(tblHardware);
    }
    public Table InitialiseTheProperties()
    {

        //Intialize the Mater Table 
        tbl = new Table();

        //Create Row for the mater Table
        TableRow row = new TableRow();
        TableCell cell = new TableCell();

            img = new Image();
            img.ImageUrl = HttpRuntime.AppDomainAppVirtualPath +"/Images/"+"1.jpg";
            cell.Controls.Add(img);
        tblHardware.Rows.cells.add(cell);
            tbxQuantity = new TextBox();
            tbxQuantity.ID ="TbxQuantity";
            cell.Controls.Add(tbxQuantity);
    tblHardware.Rows.cells.add(cell);
            tblHardware.Rows.Add(row);
    //return tbl;
        }

    }

} 
```

现在正在尝试在 btnclickevent 上进行此操作

```
public void btnSave_Click(object sender, EventArgs e)
{
   try
   {
     Control cntrl = Page.FindControl("TbxQuantity");
   }
   catch (Exception ex)
   {
   }
} 
```

它只是返回空值。难道我做错了什么？请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T01:46:08.390

当我找到自己发布的上述问题的答案时，我想帮助遇到相同或相似问题的同胞。

```
string strQuantity=((System.Web.UI.WebControls.TextBox)(((AjaxControlToolkit.TabContainer)(BTN.Parent.FindControl("tabcontainer"))).Tabs[0].FindControl("TbxQuantity"))).Text 
```

感谢“Stackoverflow”维护网站，也感谢帮助像我这样的开发人员的成员。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T04:14:11.580

您的问题不在于动态添加的控件，而是 FindControl 方法不会传播并一直检查子堆栈。

我在下面做了一个快速的帮助方法，检查孩子直到找到正确的控制。这是一个快速构建，所以它可能可以改进，我没有尝试过，但您可能可以扩展控件，因此您不必传递初始控件。我对它进行了测试，但是由于某种原因，我无法让它在传递 Page 对象中工作，我必须传递我使用的初始面板，但它应该明白这一点。

**控制查找器**

```
public static class ControlFinder
{
    public static Control Find(Control currentControl, string controlName)
    {
        if (currentControl.HasControls() == false) { return null; }
        else
        {
            Control ReturnControl = currentControl.FindControl(controlName);
            if (ReturnControl != null) { return ReturnControl; }
            else
            {
                foreach (Control ctrl in currentControl.Controls)
                {
                    ReturnControl = Find(ctrl, controlName);
                    if (ReturnControl != null) { break; }
                }
            }

            return ReturnControl;
        }
    }
} 
```

**网页**

```
<asp:Panel ID="pnl1" runat="server">
    <asp:TextBox ID="pnl1_txt1" runat="server" />
    <asp:TextBox ID="pnl1_txt2" runat="server" />

    <asp:Panel ID="pnl2" runat="server">
        <asp:TextBox ID="pnl2_txt1" runat="server" />
        <asp:TextBox ID="pnl2_txt2" runat="server" />

        <asp:Panel ID="pnl3" runat="server">
            <asp:TextBox ID="pnl3_txt1" runat="server" />
            <asp:TextBox ID="pnl3_txt2" runat="server" />
        </asp:Panel>
    </asp:Panel>
</asp:Panel>

<asp:Button ID="btnGo" Text="Go" OnClick="btnGo_Click" runat="server" />

<asp:Panel ID="pnlResults" runat="server">
    <div>pnl1_txt1: <asp:Label ID="lblpnl1txt1" runat="server" /></div>
    <div>pnl1_txt2: <asp:Label ID="lblpnl1txt2" runat="server" /></div>
    <div>pnl2_txt1: <asp:Label ID="lblpnl2txt1" runat="server" /></div>
    <div>pnl2_txt2: <asp:Label ID="lblpnl2txt2" runat="server" /></div>
    <div>pnl3_txt1: <asp:Label ID="lblpnl3txt1" runat="server" /></div>
    <div>pnl3_txt2: <asp:Label ID="lblpnl3txt2" runat="server" /></div>
    <div>unknown: <asp:Label ID="lblUnknown" runat="server" /></div>
</asp:Panel> 
```

**按钮点击事件**

```
 protected void btnGo_Click(object sender, EventArgs e)
    {
        Control p1t1 = ControlFinder.Find(pnl1, "pnl1_txt1");
        Control p1t2 = ControlFinder.Find(pnl1, "pnl1_txt2");
        Control p2t1 = ControlFinder.Find(pnl1, "pnl2_txt1");
        Control p2t2 = ControlFinder.Find(pnl1, "pnl2_txt2");
        Control p3t1 = ControlFinder.Find(pnl1, "pnl3_txt1");
        Control p3t2 = ControlFinder.Find(pnl1, "pnl3_txt2");
        Control doesntexist = ControlFinder.Find(pnl1, "asdasd");

        lblpnl1txt1.Text = p1t1 != null ? "Found: " + p1t1.ID : "Not found";
        lblpnl1txt2.Text = p1t2 != null ? "Found: " + p1t2.ID : "Not found";
        lblpnl2txt1.Text = p2t1 != null ? "Found: " + p2t1.ID : "Not found";
        lblpnl2txt2.Text = p2t2 != null ? "Found: " + p2t2.ID : "Not found";
        lblpnl3txt1.Text = p3t1 != null ? "Found: " + p3t1.ID : "Not found";
        lblpnl3txt2.Text = p3t2 != null ? "Found: " + p3t2.ID : "Not found";
        lblUnknown.Text = doesntexist != null ? "Found: " + doesntexist.ID : "Not found";
    } 
```

# ssl - 将站点切换到 HTTPS 后无法加载 .png 图像

> ID：14764220
> 
> 赞同：3
> 
> 时间：2013-02-08T01:20:25.383
> 
> 标签：ssl, joomla, https

我安装了一个 SSL 证书，它要求我将所有 HTTP 链接切换到 HTTPS 链接。我通过下载所有站点文件（包括数据库）并进行查找/替换来做到这一点，从而将所有 http:// 替换为 https:// 然后我将新站点文件（和 .sql 文件）上传到服务器。一切似乎都在工作。除了 .png 图像不会在任何浏览器中加载。

我什至无法通过在地址栏中输入直接链接（有或没有 https）来拉出图像。以前图像工作正常，现在只显示红色 X。

关于发生了什么以及如何解决它的任何想法？该网站是用 Joomla 2.5 构建的。您可以在此处查看：[https](https://www.detourjournal.com/) ://www.detourjournal.com/ （请注意页脚中未加载的两个 .png 图像）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T02:36:11.827

这不是你的 Joomla！设置，对于初学者来说，它似乎不是 Joomla！在普通页面中将调用重定向到 SSL，并且不会以这种方式影响图像的直接文件 URL。

您似乎已将服务器配置为强制`https`（可能通过`.htaccess`）。

它也不是特定于 PNG 文件，因为您的徽标[`/images/stories/logo2.png`](https://www.detourjournal.com/images/stories/logo2.png)可以毫无问题地提供。VirtueMart 中的 PNG 也是如此，例如[close label](https://www.detourjournal.com/detourjournal/components/com_virtuemart/assets/images/facebox/closelabel.png)。

查看这些图像的标题，这些图像的大小与返回的内容不匹配......所以很可能是损坏的图像导致 Apache 崩溃。

# php - MySQL错误“where子句”中的未知列“排序”非常奇怪

> ID：14764221
> 
> 赞同：0
> 
> 时间：2013-02-08T01:20:27.213
> 
> 标签：php, mysql, sql

所以我试图制作一个脚本，从我的数据库中获取所有日期，然后以 dd/mm/yy 格式向它们添加 1 天，错误故障排除工作正常，我的脚本工作正常，除此之外它无法上传到我的 SQL 数据库....

错误：“where 子句”中的未知列“排序”

这里是：

```
<?      
$usernamedb = "goldacco"; // connect da jeg skal bruge det senere
$passworddb = "26102610asd";
$database = "goldacco_fb";
$server = "127.0.0.1";

$db_handle = mysql_connect($server, $usernamedb, $passworddb);
$db_found = mysql_select_db($database, $db_handle);

$i=0;
$f=0;

   $sql_sort = "SELECT sorting FROM feedback WHERE approved='1' ORDER BY sorting ASC"; // get lowest sorting
   $result_sort = mysql_query($sql_sort);
   $sorting = mysql_fetch_assoc($result_sort);

   $sorting[$f] = $sorting['sorting']; // 405

   $sql = "SELECT date FROM feedback WHERE approved='1' ORDER BY sorting ASC"; // get date
   $result_date = mysql_query($sql);

  while ($row = mysql_fetch_assoc($result_date) OR die(mysql_error())) { // værdigen jeg har gemt

       $olddate[$i] = $row['date'];

   $new_date[$i] = substr($olddate[$i], 0, -6); //  day

   $new_date[$i] = str_replace("/", null, $new_date[$i]); // fjern /

   $new_month[$i] = substr($olddate[$i], 2, -3); // month

   $new_month[$i] = str_replace("/", null, $new_month[$i]); // fjern /

   $new_year[$i] = substr($olddate[$i], 5-0); // år

   $new_year[$i] = str_replace("/", null, $new_year[$i]); // fjern /

   $new_date[$i] = $new_date[$i]+1;

  if ($new_date[$i] == 32) { // check om det er den 31, hvis ja, sæt til 0
    $new_date[$i] = 1;
    $new_month[$i] = $new_month[$i] +1;
  }

  if ($new_month[$i] == 13) { // check om det er den 12, hvis ja, sæt til 0
     $new_month[$i] = 1;
     $new_year[$i] = $new_month[$i] +1;
  }

  $new_date[$i] = sprintf("%02s", $new_date[$i]);
  $new_month[$i] = sprintf("%02s", $new_month[$i]);

  $new_total[$i] = $new_date[$i] . "/" . $new_month[$i] . "/" . $new_year[$i];

  $sql_into = "UPDATE feedback SET date=`$new_total` WHERE sorting=`$sorting[$f]`";
  $result_date = mysql_query($sql_into);

  $f++;
  $i++;
   }

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T01:22:06.910

***不要在字符串文字周围使用反引号***。它应该是单引号。反引号用于标识符。

```
UPDATE feedback 
SET    date = '$new_total' 
WHERE  sorting='$sorting[$f]' 
```

作为旁注，[`SQL Injection`](http://bobby-tables.com/)如果变量的值（*s*）来自外部，则查询很容易受到攻击。请看下面的文章，了解如何预防。通过使用`PreparedStatements`，您可以摆脱在值周围使用单引号。

*   [如何*防止*PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

# google-maps - Google 地图的 lat 和 lng 到 Bing 坐标

> ID：14764226
> 
> 赞同：2
> 
> 时间：2013-02-08T01:20:58.637
> 
> 标签：google-maps, bing-maps

我有根据谷歌地图创建的数据库纬度和经度坐标。

我想知道 Google 地图的坐标和 Bing 地图的坐标有什么区别？有什么简单/自动的方法可以转换它们吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T02:22:42.957

没有区别，您可以在两张地图上使用相同的坐标。

# javascript - 如何从画布上加载的切片图像中获取图像？

> ID：14764227
> 
> 赞同：1
> 
> 时间：2013-02-08T01:21:12.493
> 
> 标签：javascript, jquery, image, html, canvas

我有下一个切片图像的代码。我有下一个 HTML 代码

```
<img id="imagen" src="original.png" >
<canvas id="myCanvas" width="150" height="600"></canvas> 
```

jQuery代码

```
$(document).ready(function() {
   var image = document.getElementById('imagen');
   var canvas = document.getElementById('myCanvas');
   var ctx = canvas.getContext('2d');

   image.onload = function() {
      ctx.drawImage(image, 0, 0, 50, image.height, 0, 0, 50, image.height);
   };

   var i = canvas.toDataURL('image/jpeg');
   console.log( i );
}); 
```

现在，当我尝试获取切片部分时，`canvas`当我检查时，它存储在变量中，`i`我得到了一个黑色图像。有人可以告诉我为什么会发生这种情况以及如何解决它？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T01:26:29.217

您必须先绘制到画布，然后才能将画布上的绘图作为图像获取，以确保在画布绘制到之后绘制画布以获取图像

```
image.onload = function() {
   ctx.drawImage(image, 0, 0, 50, image.height, 0, 0, 50, image.height);
   var i = canvas.toDataURL('image/jpeg');
   console.log( i );
}; 
```

# java - 插入数据库需要零秒

> ID：14764232
> 
> 赞同：1
> 
> 时间：2013-02-08T01:21:40.043
> 
> 标签：java, database, multithreading

我正在尝试衡量`Database Insert`. 因此，为此我编写了一个`StopWatch`类，它将在`executeUpdate`方法之前重置计数器并计算`executeUpdate`方法完成后的时间。

我正在尝试查看每个线程花费了多少时间，所以我将这些数字保存在`ConcurrentHashMap`.

以下是我的主要课程-

```
public static void main(String[] args) {

        final int noOfThreads = 4;
        final int noOfTasks = 100;

        final AtomicInteger id = new AtomicInteger(1);

        ExecutorService service = Executors.newFixedThreadPool(noOfThreads);

        for (int i = 0; i < noOfTasks * noOfThreads; i++) {
            service.submit(new Task(id));
        }
        while (!service.isTerminated()) {

        }

           //printing the histogram
          System.out.println(Task.histogram);

    } 
```

下面是实现 Runnable 的类，我在其中尝试测量每个线程在插入数据库时​​的性能，这意味着每个线程插入数据库需要多少时间-

```
class Task implements Runnable {

    private final AtomicInteger id;
    private StopWatch totalExecTimer = new StopWatch(Task.class.getSimpleName() + ".totalExec");
    public static ConcurrentHashMap<Long, AtomicLong> histogram = new ConcurrentHashMap<Long, AtomicLong>();

    public Task(AtomicInteger id) {
        this.id = id;
    }

    @Override
    public void run() {

        dbConnection = getDBConnection();

        preparedStatement = dbConnection.prepareStatement(Constants.INSERT_ORACLE_SQL);

        //other preparedStatement

        totalExecTimer.resetLap();

        preparedStatement.executeUpdate();

        totalExecTimer.accumulateLap();

        final AtomicLong before = histogram.putIfAbsent(totalExecTimer.getCumulativeTime() / 1000, new AtomicLong(1L));
        if (before != null) {
            before.incrementAndGet();
        }
    }
} 
```

下面是`StopWatch class`

```
/**
 * A simple stop watch.
 */
protected static class StopWatch {
    private final String name;
    private long lapStart;
    private long cumulativeTime;

    public StopWatch(String _name) {
        name = _name;
    }

    /**
     * Resets lap start time.
     */
    public void resetLap() {
        lapStart = System.currentTimeMillis();
    }

    /**
     * Accumulates the lap time and return the current lap time.
     * 
     * @return the current lap time.
     */
    public long accumulateLap() {
        long lapTime = System.currentTimeMillis() - lapStart;
        cumulativeTime += lapTime;
        return lapTime;
    }

    /**
     * Gets the current cumulative lap time.
     * 
     * @return
     */
    public long getCumulativeTime() {
        return cumulativeTime;
    }

    public String getName() {
        return name;
    }

    @Override
    public String toString() {
        StringBuilder sb = new StringBuilder();
        sb.append(name);
        sb.append("=");
        sb.append((cumulativeTime / 1000));
        sb.append("s");
        return sb.toString();
    }
} 
```

运行上述程序后，我可以看到插入了 400 行。当它打印直方图时，我只看到这样 -

```
{0=400} 
```

这意味着 400 个电话在 0 秒内返回？这是不可能的。

**我只是想看看每个线程需要多少时间来插入记录，然后将这些数字存储在 a 中`Map`并从主线程打印该映射。**

我认为我假设它正在发生的问题是因为这里的线程安全，这就是`resetlap`我猜它在做零时设置为 Map 的原因。

如果是，我该如何避免这个问题？并且还需要`histogram map`从主线程传递到Task的构造函数？因为我需要在所有线程完成后打印该 Map 以查看那里的数字。

**更新：-** 如果我删除`divide by 1000`将数字存储为毫秒的东西，那么我可以看到除`zero`. 所以看起来不错。

但是我发现的另一件事是数字不一致，如果我总结每个线程的时间，我会得到一些数字。而且我还打印了整个程序完成的时间。所以我比较了这两个数字，它们相差很大

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T01:30:06.157

为避免秒表出现并发问题，您最好`run`在`Runnable`. 这样每个线程都有自己的秒表。

至于你看到的时间，我绝对希望一个简单的记录插入会在一秒钟内发生。看到 400 个插入都在不到一秒的时间内发生，我一点也不感到惊讶。通过使用秒表中的毫秒值作为 HashMap 键，您可以获得更好的结果。

**更新**

对于秒表并发问题，我建议如下：

```
class Task implements Runnable {

    private final AtomicInteger id;
    // Remove the stopwatch from here
    //private StopWatch totalExecTimer = new StopWatch(Task.class.getSimpleName() + ".totalExec");
    public static ConcurrentHashMap<Long, AtomicLong> histogram = new ConcurrentHashMap<Long, AtomicLong>();

    public Task(AtomicInteger id) {
        this.id = id;
    }

    @Override
    public void run() {

        // And add it here
        StopWatch totalExecTimer = new StopWatch(Task.class.getSimpleName() + ".totalExec");

        dbConnection = getDBConnection(); 
```

通过这种方式，每个线程，实际上是每个任务，都会获得自己的副本，而您不必担心并发性。使 StopWatch 线程安全原样可能比它的价值更麻烦。

**更新 2**

话虽如此，那么您在评论中提到的方法可能会产生更好的结果，因为计时机制的开销更少。

为了回答您关于累积线程时间和程序总运行时间差异的问题，我会轻率地说：“您期望什么？”。

这里有两个问题。一是你没有测量每个线程的总运行时间，只是你正在做数据库插入的那一点。

另一个是测量整个应用程序的运行时间没有考虑线程执行时间的任何重叠。即使您正在测量每个任务的总时间，并假设您在多核机器上运行，我预计累积时间会超过程序执行的经过时间。这就是并行编程的好处。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T03:05:05.117

作为附加说明， System.currentTimeMillis() 是伪时间并且具有一定程度的不准确性。使用 System.nanoTime() 是一种更准确的方法

```
long start = System.nanoTime();

long end = System.nanoTime();

long timeInSeconds = TimeUnit.NANOSECONDS.convert(end-start, TimeUnit.SECONDS); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T01:45:44.063

由于多种原因，currentTimeMillis 倾向于不在每次调用时“刷新”其值。您应该使用 nanoTime 进行高分辨率测量。

而且您的代码浪费了几分之一秒。您的 toString 方法应该使用`sb.append((cumulativeTime / 1000.0));`，以便您获得小数秒。

但是你的计时机制的开销是巨大的，如果你曾经测量过一些东西，很大一部分时间将只是计时开销。测量多个操作而不是一个操作要好得多。

# python - 如何在 Python 中使用 Base64 对 long 进行编码？

> ID：14764237
> 
> 赞同：9
> 
> 时间：2013-02-08T01:22:06.337
> 
> 标签：python, base64

在 Java 中，我可以将 a 编码`BigInteger`为：

```
java.math.BigInteger bi = new java.math.BigInteger("65537L");
String encoded = Base64.encodeBytes(bi.toByteArray(), Base64.ENCODE|Base64.DONT_GUNZIP);

// result: 65537L encodes as "AQAB" in Base64

byte[] decoded = Base64.decode(encoded, Base64.DECODE|Base64.DONT_GUNZIP);
java.math.BigInteger back = new java.math.BigInteger(decoded); 
```

在 C# 中：

```
System.Numerics.BigInteger bi = new System.Numerics.BigInteger("65537L");
string encoded = Convert.ToBase64(bi);
byte[] decoded = Convert.FromBase64String(encoded);
System.Numerics.BigInteger back = new System.Numerics.BigInteger(decoded); 
```

如何将 Python 中的长整数编码为 Base64 编码的字符串？到目前为止，我所尝试的结果与其他语言的实现不同（到目前为止，我已经在 J​​ava 和 C# 中尝试过），特别是它产生了更长的 Base64 编码字符串。

```
import struct
encoded = struct.pack('I', (1<<16)+1).encode('base64')[:-1]
# produces a longer string, 'AQABAA==' instead of the expected 'AQAB' 
```

当使用此 Python 代码生成 Base64 编码的字符串时，生成的 Java 中的解码整数（例如）会生成而不是`16777472`预期的`65537`. 首先，我错过了什么？

其次，我必须手动弄清楚要使用的长度格式是什么`struct.pack`；如果我试图编码一个长数字（大于`(1<<64)-1`）`'Q'`格式规范太短而无法容纳表示。这是否意味着我必须手动进行表示，或者该`struct.pack`函数是否存在未记录的格式说明符？（我不是被迫使用`struct`，但乍一看它似乎可以满足我的需要。）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-08T01:28:32.693

查看有关[将整数转换为 base64](http://fuyun.org/2009/10/how-to-convert-an-integer-to-base64-in-python/)的页面。

```
import base64
import struct

def encode(n):
    data = struct.pack('<Q', n).rstrip('\x00')
    if len(data)==0:
        data = '\x00'
    s = base64.urlsafe_b64encode(data).rstrip('=')
    return s

def decode(s):
    data = base64.urlsafe_b64decode(s + '==')
    n = struct.unpack('<Q', data + '\x00'* (8-len(data)) )
    return n[0] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-08T02:17:53.437

[`struct`模块](http://docs.python.org/2/library/struct.html)：_

> ... 执行 Python 值和表示为 Python 字符串的 C 结构之间的转换。

因为 C 没有无限长的整数，所以没有打包它们的功能。

但是自己写很容易。例如：

```
def pack_bigint(i):
    b = bytearray()
    while i:
        b.append(i & 0xFF)
        i >>= 8
    return b 
```

或者：

```
def pack_bigint(i):
    bl = (i.bit_length() + 7) // 8
    fmt = '<{}B'.format(bl)
    # ... 
```

等等。

当然，您需要一个`unpack`功能，例如评论中的 jbatista ：

```
def unpack_bigint(b):
    b = bytearray(b) # in case you're passing in a bytes/str
    return sum((1 << (bi*8)) * bb for (bi, bb) in enumerate(b)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-19T01:57:12.427

这有点晚了，但我想我会把我的帽子扔进戒指：

```
def inttob64(n):                                                              
    """                                                                       
    Given an integer returns the base64 encoded version of it (no trailing ==)
    """
    parts = []                                                                
    while n:                                                                  
        parts.insert(0,n & limit)                                             
        n >>= 32                                                              
    data = struct.pack('>' + 'L'*len(parts),*parts)                           
    s = base64.urlsafe_b64encode(data).rstrip('=')                            
    return s                                                                  

def b64toint(s):                                                              
    """                                                                       
    Given a string with a base64 encoded value, return the integer representation
    of it                                                                     
    """                                                                       
    data = base64.urlsafe_b64decode(s + '==')                                 
    n = 0                                                                     
    while data:                                                               
        n <<= 32                                                              
        (toor,) = struct.unpack('>L',data[:4])                                
        n |= toor & 0xffffffff                                                
        data = data[4:]                                                       
    return n 
```

这些函数将任意大小的长数转换为/从大端 base64 表示。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T02:49:12.837

这可能会有所帮助。我没有使用`struct.pack()`我构建一串字节进行编码，然后在其上调用 BASE64 编码。我没有编写解码器，但显然解码器可以恢复相同的字节串，并且循环可以恢复原始值。我不知道你是否需要固定大小的整数（总是 128 位），我不知道你是否需要 Big Endian，所以我把解码器留给了你。

此外，`encode64()`并且`decode64()`来自@msc 的答案，但已修改为可以使用。

```
import base64
import struct

def encode64(n):
  data = struct.pack('<Q', n).rstrip('\x00')
  if len(data)==0:
    data = '\x00'
  s = base64.urlsafe_b64encode(data).rstrip('=')
  return s

def decode64(s):
  data = base64.urlsafe_b64decode(s + '==')
  n = struct.unpack('<Q', data + '\x00'* (8-len(data)) )
  return n[0]

def encode(n, big_endian=False):
    lst = []
    while True:
        n, lsb = divmod(n, 0x100)
        lst.append(chr(lsb))
        if not n:
            break
    if big_endian:
        # I have not tested Big Endian mode, and it may need to have
        # some initial zero bytes prepended; like, if the integer is
        # supposed to be a 128-bit integer, and you encode a 1, you
        # would need this to have 15 leading zero bytes.
        initial_zero_bytes = '\x00' * 2
        data = initial_zero_bytes + ''.join(reversed(lst))
    else:
        data = ''.join(lst)
    s = base64.urlsafe_b64encode(data).rstrip('=')
    return s

print encode(1234567890098765432112345678900987654321) 
```

# vbscript - vbscript离线输入全屏命令

> ID：14764239
> 
> 赞同：0
> 
> 时间：2013-02-08T01:22:23.507
> 
> 标签：vbscript

是否有用于进入全屏的 vbscript 命令？

我使用 hta 吗？这是到目前为止的程序。（请不要介意“imageopener.hta”）

```
CreateObject("WScript.Shell").Run "imageopener.hta"
WScript.Sleep 6000
昏暗英尺
ft=inputbox("你好！输入任何内容来启动程序！")

strName = InputBox("请输入您的用户名。")
选择案例 LCase(strName)
    案例“imaisa”
        Msgbox "欢迎新今井！"
    案例“骑士”
        Msgbox "欢迎莱利骑士！"
    案例“walmerab”
        Msgbox "欢迎 Andrew Walmer！"
        Msgbox "这是你的特别课程 ANDREW!!! www.pokemon.com"
    案例“管理员”        
        strName = InputBox("请输入密码")
        选择案例 LCase(strName)
            案例英尺
                Msgbox "欢迎管理员！"
            其他情况
                Msgbox "您输入了错误的密码。程序现在将退出。"
                WScript.退出 1
        结束选择
    其他情况
        Msgbox "用户名无效！"
        WScript.退出 1
结束选择
Msgbox "好吧，伙计们！今天我们要学习殖民主义，听好了！"
Msgbox "民族国家是一个拥有一个主要由 1 个民族居住的领土的州。国家是一个政治实体；国家是一个文化和/或种族实体。"
Msgbox "在 NATIONSTATES 之前，公国主要由一个皇室统治。把这个记在你的笔记本上！"
MsgBox "WILLIAM THE CONQUEROR: 威廉一世（William the Conqueror）是英格兰第一位诺曼国王。经过争权夺利，1066 年，他发起了对英格兰的诺曼征服。成功后，他的余生以努力巩固他对英格兰和他的大陆土地的控制，以及他最年长的太阳的困难。”
MsgBox "婚姻更便宜，对公国人民的干扰也少得多。然而，即使在婚姻的情况下，也会产生误解，就像亨利三世和阿里冈的凯瑟琳一样。"
MsgBox "香料很重要。香料贸易比殖民主义早了几千年。香料被用于保存食物、药物和良好的气味。"
MsgBox “殖民主义使许多欧洲投机者变得富有，事实证明，这对其他人来说是昂贵的。对于被殖民土地的当地人来说，代价更高。在非洲和美洲都是如此。在亚洲却不是这样，因为亚洲已经文明了，而且有一个经济组织。唯一的例外是印度，它仍然生活在一个农业社会中。
MsgBox "在非洲，历史悠久的部落土地根据自然资源的位置在欧洲各个国家之间划分，不考虑土著人民的种族。随着石油的发现，这种做法在 20 世纪传到了亚洲。（伊拉克，叙利亚等）”
MsgBox "当地居民被欧洲人携带的疾病所摧毁。天花和肺结核是其中的疾病。"
MsgBox "殖民贸易的大赢家：欧洲殖民大国的王室和对他们有利的大贸易公司。"

MsgBox “需要大型银行和保险公司来提供促进贸易和降低风险所需的资本和安全保障。1688 年，伦敦劳埃德保险公司成立，为商船及其货物提供保险。他们是最大的奴隶保险公司之一。”
MsgBox "到 1700 年代后期，罗斯柴尔德家族在西欧建立了银行，到 1800 年代初期在美国建立了银行业务"
MsgBox "在美洲的热带和亚热带地区，原住民被从土地上移走，取而代之的是非洲奴隶。例如：格鲁吉亚发生的事情将切罗基人和克里克人移到俄克拉荷马州，取而代之的是非洲奴隶。"
MsgBox "甘蔗、靛蓝、棉花都是劳动密集型的，生产加工需要大量奴隶。"
MsgBox “在 1700 年代中期，苏格兰织布工开发了一种用于工作服的耐用面料，称为牛仔布。这种布料通常染成蓝色。这对棉纤维和靛蓝染料产生了巨大的需求。”
"
MsgBox "女奴要生尽可能多的孩子，因为每个孩子都代表着主人初始投资的成长。大多数女奴在怀孕期间都在工作。"
MsgBox "男人和女人像牲畜一样被卖了，再也见不到家人了。"
MsgBox “殖民主义鼓励并创造了可怕的奴隶制度。许多奴隶主抵押他们的奴隶来购买更多的土地。无论哪种情况，奴隶都被绑定到银行。”
MsgBox "经济体系的稳定取决于奴隶制。"
MsgBox “经济中也有很多输家。有像约翰·劳这样的骗子。约翰·劳夸大了法国在北美从路易斯安那州到魁北克的持股价值。（被称为密西西比州）。他成立了一家出售股票的公司以夸大的价值向富有的欧洲人，并用这笔钱获得法国财政和世界各地的殖民贸易。碰撞。”
result=MsgBox("土著人是否从殖民主义中受益？", vbYesNo, "问题 1")
选择案例结果
案例 vb是
    result=MsgBox("当地人搬到俄克拉荷马了吗？", vbYesNo, "问题 2")
    选择案例结果
    案例 vb是
        result=MsgBox("Langston's of London 是一家保险公司吗？", vbYesNo, "问题 3")
        选择案例结果
        案例 vb是
            MsgBox"你答对了 3 题中的 1 题！你应该多学习！"
        案例vbNo
            MsgBox"你答对了 3 道题中的 2 道题！多么平均的分数啊！"
        结束选择
    案例vbNo
        result=MsgBox("Langston's of London 是一家保险公司吗？", vbYesNo, "问题 3")
        选择案例结果
        案例 vb是
            MsgBox"哇，你答对了 0。你必须多学习！"
        案例vbNo
            MsgBox"你答对了 3 题中的 1 题！你应该多学习！"
        结束选择
    结束选择

案例vbNo
    result=MsgBox("当地人搬到俄克拉荷马了吗？", vbYesNo, "问题 2")
    选择案例结果
    案例 vb是
        result=MsgBox("Langston's of London 是一家保险公司吗？", vbYesNo, "问题 3")
        选择案例结果
        案例 vb是
            MsgBox"你答对了 3 道题中的 2 道题！多么平均的分数啊！"
        案例vbNo
            MsgBox"你所有的问题都答对了！干得好！你已经为你的测验做好了准备！"
        结束选择
    案例vbNo
        result=MsgBox("Langston's of London 是一家保险公司吗？", vbYesNo, "问题 3")
        选择案例结果
        案例 vb是
            MsgBox"你答对了 3 题中的 1 题！你应该多学习！"
        案例vbNo
            MsgBox"你答对了 3 道题中的 2 道题！多么平均的分数啊！"
        结束选择
    结束选择
结束选择

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T11:21:19.343

> 是否有用于进入全屏的 vbscript 命令？

呃呃呃……不。（无论你对 msgboxes 的全屏是什么意思，恐怕答案永远是*否定*的）。为了更好地控制您的视觉输出，您可以开始学习使用*Visual Studio for Desktop进行编程* [http://www.microsoft.com/visualstudio/eng/downloads#d-2012-express](http://www.microsoft.com/visualstudio/eng/downloads#d-2012-express)

# ios - 在弱指针上调用 getter 并将其传递给方法时保留循环可能性

> ID：14764241
> 
> 赞同：0
> 
> 时间：2013-02-08T01:22:36.910
> 
> 标签：ios, memory-management, memory-leaks, automatic-ref-counting, retain-cycle

我整天都在阅读更多关于保留周期的内容，我开始感到困惑。所以我只想检查几件事。**（只是为了澄清，我使用的是 ARC）**

所以假设我有`MyFirstClass`. `MyFirstClass`有一个强烈指向的（默认情况下）实例变量`MyChildClass`：

```
MyChildClass *_child; 
```

`MyFirstClass`还有一个 getter（在 .h 中公开可用），如下所示：

```
-(MyChildClass *)child
{
    return _child;
} 
```

现在假设我完全有另一堂课，`MySecondClass`. `MySecondClass`有一个弱实例变量指向`MyFirstClass`如下：

```
__weak MyFirstClass *_firstClass; 
```

有一个父类同时拥有两者`MyFirstClass`，`MySecondClass`因此`MySecondClass`只有一个弱引用，`MyFirstClass`因此它不会阻止父类在需要时释放它。

`MySecondClass`也有它自己的子类，也被一个实例变量强烈引用：

```
MySecondChildClass *_secondClassChild; 
```

`MySecondChildClass`想要引用`MyFirstClass`的`MyChildClass`对象。

所以我想我在这里也使用了一个弱指针，在`MySecondChildClass`：

```
__weak MyChildClass *_firstClassChild; 
```

它有一个自定义初始化来设置它：

```
-(id)initWithFirstClassChild:(MyChildClass *)firstClassChild
{
    if(self = [super init]){
        _firstClassChild = firstClassChild;
    }
} 
```

最后，有一个方法`MySecondClass`可以创建`MySecondChildClass`：

```
-(void)setupChild
{
    _secondClassChild = [[MySecondChildClass alloc] initWithFirstClassChild:_firstClass.child];
} 
```

这一切都正确吗？我有 90% 的把握这一切都很好，但我很困惑。

当我使用 时`_firstClass.child`，会创建一个指向它的强指针吗？我应该`__weak`在该方法调用中引用某处吗？在初始化期间怎么样`MySecondChildClass`？它在设置实例变量之前有一个临时指针，`MyChildClass`这是否会创建一个我应该担心的强指针？

任何澄清都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T02:02:05.283

我认为您在这里不需要任何弱引用。

我将这些对象称为 P、A、A'、B 和 B'，其中：

```
P is an instance of your "Parent Class"
A is an instance of "MyFirstClass"
A' is an instance of "MyChildClass"
B is an instance of "MySecondClass"
B' is an instance of "MySecondChildClass" 
```

**如果**我正确阅读了您的问题，那么您的图片将如下所示：

```
 /----> A ----> A'
 /       ^       ^
P        |       |
 \       |       |
  \----> B ----> B' 
```

如果该图片与您编写的内容相匹配，则那里没有保留周期，因此您不应该需要任何这些引用是弱的。

# eclipse - 为什么 Eclipse 忽略了我的 Cross GCC 工具前缀？

> ID：14764247
> 
> 赞同：0
> 
> 时间：2013-02-08T01:23:04.210
> 
> 标签：eclipse, gcc, arm, cross-compiling

我正在尝试使用 ARM Embedded GCC 工具链构建示例项目；为此，我正在使用 Eclipse 的内部构建器。

在设置中，Project Properties -> C/C++ Build -> Settings -> Tool Settings -> Cross Settings，Prefix设置为arm-none-eabi-，Path设置为ARM工具链的路径（C:\Program文件 (x86)\GNU Tools ARM Embedded\4.7 2012q4\bin)。

当我尝试构建项目时，我得到如下所示的内容：

```
17:58:13 **** Incremental Build of configuration Debug for project template_test ****
Info: Internal Builder is used for build
gcc -IC:/foo/Libraries/STM32F0xx_StdPeriph_Driver/inc -IC:/foo/Libraries/CMSIS/Device/ST/STM32F0xx/Include -IC:/foo/Libraries/CMSIS/Include -O0 -g3 -Wall -c -fmessage-length=0 -o "Libraries\\STM32F0xx_StdPeriph_Driver\\src\\stm32f0xx_adc.o" "..\\Libraries\\STM32F0xx_StdPeriph_Driver\\src\\stm32f0xx_adc.c" 
Cannot run program "gcc": Launching failed 
```

...然后是关于如何在我的路径中找不到 gcc 的错误。当然，事实并非如此。然而，在我的路径中有一个 arm-none-eabi-gcc.exe，但出于某种原因，Eclipse 不倾向于运行那个。

为什么不？

我发现如果我将“Cross GCC Compiler”（项目属性 -> C/C++ Build -> Settings -> Tool Settings -> Cross GCC Compiler -> Command）的“Command”更改为“gc”（来自“gcc ") 然后 Eclipse 尝试运行 "arm-none-eabi-gc" 而不是 "gc"。我觉得这是一个重要的线索，但我不明白。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-04-16T18:55:52.200

它看起来像一个更新问题。当我在命令中包含前缀时，它会尝试使用前缀两次。我从命令中删除了前缀，现在它按预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-27T04:59:20.793

我有一个类似的问题。我添加了前缀的路径，它似乎工作。您也可以尝试使用短的 windows 文件路径：c:/Progra~2/ ...

# django - 使用 Django-Registration 扩展用户模型

> ID：14764248
> 
> 赞同：3
> 
> 时间：2013-02-08T01:23:03.967
> 
> 标签：django, model, extend, django-registration

Django 版本：4.0.2 Django-Registration 版本：0.8 应用名称：userAccounts

问题：我试图创建一个名为professor 的用户类型来扩展用户模型。我可以完成注册过程，问题是只有用户保存在数据库中，教授表保持为空。所以我认为问题可能出在保存方法中。关于可能是什么问题的一些线索？

设置.py

```
AUTH_PROFILE_MODULE = "userAccounts.Professor" 
```

MODELS.PY - 在这里我创建从用户和示例字段扩展的模型

```
from django.db import models
from django.contrib.auth.models import User

class Professor(models.Model):
  user = models.ForeignKey(User, unique=True)
  exampleField = models.CharField(max_length=100) 
```

FORMS.PY - 保存用户后，我在教授表中保存一个 new_profile。

```
from django import forms
from registration.forms import RegistrationForm
from models import Professor
from registration.models import RegistrationProfile

class CustomRegistrationForm(RegistrationForm):
  exampleField = forms.CharField()

  def save(self, profile_callback=None):
    new_user = RegistrationProfile.objects.create_inactive_user(
        username=self.cleaned_data['username'],
        password=self.cleaned_data['password1'],
        email = self.cleaned_data['email'])
    new_professor = Professor(
        user=new_user, 
        exampleField=self.cleaned_data['exampleField'])
    new_professor.save()
    return new_user 
```

注意：我关注这个帖子：[带有个人资料字段的注册表单](https://stackoverflow.com/questions/2010653/registration-form-with-profiles-field)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T21:53:39.827

**问题已解决 - 解决方案**

已经有几天了，但我明白了！:D 我从 shacker 找到了这篇文章： [Django-Registration & Django-Profile，使用你自己的自定义表单](https://stackoverflow.com/questions/2601487/django-registration-django-profile-using-your-own-custom-form/14834740#14834740)

显然在 django-registration 0.8 save() 方法中不能被覆盖。因此，其他两个选项是：使用信号或重写后端。

我链接的帖子中解释了这两种解决方案。如果有人有同样的问题，我会尝试在评论中提供帮助:)

注意：使用信号效果很好，但我在从表单中获取值时遇到了一些问题。所以我实现了后端方法，一切顺利。我强烈建议您阅读 shacker 的帖子，但是，如果您真的绝望，我的代码如下：

**我的表格.py**

```
class RegistrationForm(forms.Form):
    username = forms.RegexField(regex=r'^\w+$',
                            max_length=30,
                            widget=forms.TextInput(attrs=attrs_dict),
                            label=_("Username"),
                            error_messages={'invalid': _("This value must contain only letters, numbers and underscores.")})
    email = forms.EmailField(widget=forms.TextInput(attrs=dict(attrs_dict,
                                                           maxlength=75)),
                         label=_("Email address"))
    password1 = forms.CharField(widget=forms.PasswordInput(attrs=attrs_dict, render_value=False),
                            label=_("Password"))
    password2 = forms.CharField(widget=forms.PasswordInput(attrs=attrs_dict, render_value=False),
                            label=_("Password (again)"))

    #ADITIONAL FIELDS
    #they are passed to the backend as kwargs and there they are saved
    nombre = forms.CharField(widget=forms.TextInput(attrs=attrs_dict),
                            label=_("Nombre")) 
```

**__init__.py (app/user_backend/__init__.py)**

```
class DefaultBackend(object):
def register(self, request, **kwargs):
        username, email, password, nombre = kwargs['username'], kwargs['email'], kwargs['password1'], kwargs['nombre']
        if Site._meta.installed:
            site = Site.objects.get_current()
        else:
            site = RequestSite(request)
        new_user = RegistrationProfile.objects.create_inactive_user(username, email,
                                                                password, site)
        signals.user_registered.send(sender=self.__class__,
                                 user=new_user,
                                 request=request)

        usuario(user = User.objects.get(username=new_user.username), nombre=nombre).save()
        return new_user 
```

**此行之前的根 URLS.PY** -> url(r'profiles/', include('profiles.urls')),

```
 url(r'^accounts/registrar_usuario/$',
'registration.views.register',
{'backend': 'Hesperides.apps.accounts.user_regbackend.DefaultBackend','form_class':user_RegistrationForm},        
name='registration_register'
), 
```

**谢谢**

mattsnider 感谢您的耐心，并向我展示了非常非常有用的 pdb。来自西班牙的问候。和： shacker 和 dmitko 给我指路

# javascript - HTML5 Javascript 游戏的性能分析

> ID：14764249
> 
> 赞同：3
> 
> 时间：2013-02-08T01:23:08.220
> 
> 标签：javascript, performance, profiling

有很多用于 javascript 的分析和单元测试库。不幸的是，它们中的大多数是用于常规网站的。

我想非常详细地分析 JavaScript 性能，特别是对于使用画布的游戏。据我所知，用于分析的最佳工具是 chrome 的“配置文件选项卡”和 console.profile 功能，它们非常有用，但还不够。

例如，我必须编写代码来计算函数调用的次数。

```
// counter pattern(?)
Function.prototype.counter = function( counterName ) {
    var invokeFunction = this;
    return function() {
        addCounter( counterName );
        invokeFunction.apply( this, arguments );
    }
}
// register counter function
classObject.prototype["Function1"] = classObject.prototype["Function1"].counter( "ClassA.Function1" ); 
```

有没有更好的分析工具？

# php - php update mysql 语句不起作用，但相同的查询通过 phpmyadmin sql 菜单起作用

> ID：14764256
> 
> 赞同：0
> 
> 时间：2013-02-08T01:23:56.727
> 
> 标签：php, mysql, phpmyadmin, sql-update

我正在运行一个脚本来更新 MySQL 表，并且我一直在回显更新语句以帮助解决更新语句不起作用的原因。当我将 mysql 更新的回显查询复制并粘贴到 phpmyadmin 的 SQL 菜单中时，它运行良好，但是当我运行脚本时，更新查询不执行。我知道我已成功连接到数据库。有谁知道为什么更新语句复制并粘贴到 phpmyadmin 的 sql 选项卡中的回显版本会成功执行，而不是应该在回显语句之前的行执行的实际查询？这是我的php：

```
<!DOCTYPE html>
<html>
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
<title>Untitled 1</title>
</head>
<body>
<?php
$user = 'tunemashercom';
$pass = 'password';
$host = 'tunemashercom.ipagemysql.com';
$db_name = 'user_library';
@ $db = mysqli_connect($host, $user, $pass, $db_name);  

if (mysqli_connect_errno()) {
    echo 'Error: Could not connect to database.';
    exit;
}

$oldsongs = $_POST['oldsongs'];
$newsongs = $_POST['newsongs'];
$count = count($newsongs);
$count2 = count($oldsongs);
echo "COUNT 1: ".$count." - COUNT 2: ".$count2."<br />";
for($i=0;$i<=$count;$i++){
    $newtitle = $newsongs[$i]["song"];
    echo $newtitle." - ";
    if($newtitle == ""){
        echo "NO NEW TAGS<br />";
    }
    else{
        $title = $oldsongs[$i]["title"];
        echo $title."<br />";
        $artist = $oldsongs[$i]["artist"];
        $album = $oldsongs[$i]["album"];
        $newartist = $newsongs[$i]["artist"];
        $newalbum = $newsongs[$i]["album"];
        $mbid = $newsongs[$i]["mbid"];          
        $insert = "UPDATE collection SET song='".$newtitle."', artist='".$newartist."', album='".$newalbum."', gille_id='".$mbid."' WHERE song='".$title."' AND artist='".$artist."' AND album='".$album."'";
        $results = $db->query($insert);         
        echo $insert."<br />";      
    }
}

mysqli_close($db);

?>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T01:37:03.467

如果没有看到错误，很难知道问题出在哪里，但是，根据我的个人经验，当我在 UPDATE 查询中发生这种情况时，总是因为我用引号包裹了一个 ID。

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-01T05:34:24.833

问题可能与引号有关。在键入单引号时是 'sumthng' 但在执行更新查询时，我们需要`sumthng`. 我希望这行得通。我遇到了同样的问题，使用直接从 phpmyadmi 复制的引号解决了这个问题。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-11-14T12:03:20.073

确保 phpmyAdmin 是与 php 代码相同的数据库，因此“tunemashercom.ipagemysql.com”

检查以确保您使用 phpmyAdmin 的数据库（运行回显查询）与您使用 PHP 代码连接的数据库相同。

例如，您正在从本地计算机连接到 phpmyAdmin，并且您的 php 代码正在连接到托管服务器上的数据库。

# android - 如何有效地刷新 ListFragment？

> ID：14764265
> 
> 赞同：1
> 
> 时间：2013-02-08T01:24:56.933
> 
> 标签：android, android-arrayadapter, android-listfragment

我有一个带有 ArrayAdapter 的 ListFragment 来显示对象列表。我想刷新 ListFragment 的内容。这些项目本身会稍微改变它们的文本，也会改变它们的顺序。我有一百多个项目，**我发现这样做的唯一方法是清除列表并重新添加它们，但这感觉效率低下。**

*例如：*

ListFragment 显示无序：

```
Object A
Object D
Object F
Object B
Object E
Object C 
```

ListFragment 显示排序：

```
Object A
Object B
Object C
Object D
Object E
Object F 
```

我这样设置我的 ArrayAdapter：

```
mAdapter = new ArrayAdapter<Store>(mContext,
    android.R.layout.simple_list_item_1,
    OtherClass.list);
mAdapter.setNotifyOnChange(true);
setListAdapter(mAdapter); 
```

“其他类”是：

```
public class OtherClass extends Object {

    public ListArray<Object> list;
    ...
} 
```

**有问题的代码：**

```
mAdapter.clear();
for (Object o : list) {
    mAdapter.add(store);
} 
```

我已经阅读了很多关于它如何工作以及如何使用的答案，`mAdapter.notifyDataSetChanged()`但没有一个能解决我的问题或回答我的问题。**刷新列表的唯一方法是从列表中添加/删除某些内容吗？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T01:44:49.253

无论您将适配器附加到什么，例如 listView，都可以通过将其设置为 null 或其他内容来取消附加。

因此，而不是有问题的代码：

1）。对列表进行排序。2）。然后调用：

```
mAdapter = new ArrayAdapter<Store>(mContext,
    android.R.layout.simple_list_item_1,
    sortedList);
setListAdapter(mAdapter); 
```

我希望这会有所帮助，因为您的问题仍然有点不清楚。通常，如果您有一个由适配器生成的列表，您不希望手动挖掘列表，因为它是为您自动生成的，这样做会降低其易用性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T03:14:05.917

在这里。我的解决方案是坚持我原来的方法，即：如果您想稍微修改列表，但要刷新列表以便更新它并保持滚动位置，那么唯一的方法是`clear()`重新填充列表。

资料来源：http: [//vikinghammer.com/2011/06/17/android-listview-maintain-your-scroll-position-when-you-refresh/](http://vikinghammer.com/2011/06/17/android-listview-maintain-your-scroll-position-when-you-refresh/)

# c# - 如何在 C# 和 Sqlite 安全性中隐藏数据库密码

> ID：14764266
> 
> 赞同：0
> 
> 时间：2013-02-08T01:24:59.610
> 
> 标签：c#, database, security, sqlite, passwords

我刚刚开始使用 C# 和 SQlite 数据库（带有敏感信息）开发一个桌面应用程序，它将安装在本地的任何 PC 上。我想将数据库密码和 sql 命令存储在安全的地方。我对此有一些疑问：

1.  您认为 SQlite 数据库的安全性如何？我已经读过，通过添加加密，整个文件都被加密了，甚至是标题。你认为它安全到什么程度？
2.  要存储密码，有很多选择（有些可能是我想到的简单建议）： a) 将密码和 SQL 命令存储在 dll 文件中并对其进行模糊处理。但是之前有没有人尝试过破解它或使用 Olly Debugger 搜索过它？b) 在 app.config 文件中加密，自定义加密。但我读过几篇文章，加密连接字符串似乎是可破解的...... c）将密码放入 XML 文件并对其进行加密，或者可能放入序列化文件中（但加密也将存储在源代码，可以折射）。
3.  如果应用程序已被混淆并且数据库已加密。你认为会有任何性能问题吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T02:08:41.663

您需要问自己，您要保护的究竟是什么以及为了什么。您可以在纯客户端安装的应用程序中执行的任何操作，尤其是托管应用程序，都可以很容易地被破解。加密狗更防破解，但如果收益足够大，它不会阻止有经验的破解者，而且它们既昂贵又让用户和分销商感到痛苦。保护您的应用程序的唯一可靠方法是在您自己的服务器上运行它的敏感部分。在您的情况下，数据库可以驻留在您的服务器上，然后您可以提供个人密码、检查 IP 地址、限制查询速率以阻止抓取等。

**OTOH**，如果您的唯一目标是保护您的数据库免受技术知识很少的人的偶然兴趣，那么任何数据库加密方案和任何比配置文件中的纯文本更复杂的密码存储方案都可以正常工作。

# javascript - 我可以使用 jQuery 定位多个实时子选择器吗

> ID：14764268
> 
> 赞同：4
> 
> 时间：2013-02-08T01:25:15.987
> 
> 标签：javascript, jquery

我有以下代码：

```
$( '#parent' ).on( 'click', '.a .b .c,.a .b .d,.a .b .e', function(){ ... }); 
```

三个选择器，要清楚的是：

```
.a .b .c
.a .b .d
.a .b .e 
```

我试图弄清楚是否有可能以某种方式减少它：

```
.a .b (.c,.d,.e) 
```

而且我知道如何轻松地使用非实时查询（例如使用`.find`），但我特别希望将此事件附加到`$( '#parent' )`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T01:54:02.793

如果有人想使用它，请从 OP 进行编辑：*阅读下面我的评论中的警告*

这是你要找的吗？[http://forum.jquery.com/topic/feature-req-any-selector-filter](http://forum.jquery.com/topic/feature-req-any-selector-filter)

```
jQuery.expr[':'].any = function(el, i, match) {
    return jQuery.find.matches(match[3], [el]).length > 0;
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T01:37:08.637

我不确定这是否可能，但我会尝试使用一些正则表达式来发挥创意：

```
$('#parent').on('click', 'c,d,e'.replace(/(\w+)/g, '.a.b.$1') 
```

这个想法是事先创建选择器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T01:46:04.573

如果您可以控制类名是什么，则可以使用命名约定。而不是 .c、.d、.e 等，将它们命名为 .cd、.ce、.cf 等。然后您可以`[class^="c-"]`用作选择器。

更具体地编辑：

```
$( '#parent' ).on( 'click', '.a .b [class|="c"] ... 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-08T01:53:15.487

感谢Felix，我自己回答了这个问题：

```
jQuery.expr[':'].matches = function( elem, index, match ){
    return $( elem ).is( match[3] );
};

$( '#parent' ).on( 'click', '.a .b :matches( .c, .d, .e )', ... ); 
```

出于性能原因，应该稍微优化一下：

```
.a .b nodeTypeOrOtherSelector:matches( .c, .d, .e ) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-08T01:37:41.510

稍微简化选择器的一种方法是将`.a .b`测试移动到回调中：

```
$( '#parent' ).on('click', '.c, .d, .e', function(){
    if ($(this).closest('.a .b').length === 0) {
        // not the right element
        return;
    }
    // ...
}); 
```

但从性能或代码维护的角度来看，这是否是可取的，我不知道。

学习elclanrs[的解决方案](https://stackoverflow.com/a/14764360/218196)，您可以动态创建选择器：

```
var ancestors = '.a .b';
var selector = ancestors + ['.c', '.d', '.e'].join(', ' + ancestors); 
```

* * *

除此之外，您无能为力。CSS 选择器不能以这种方式工作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-08T01:42:02.017

为什么不将公共`.a .b`祖先选择器移动到目标上下文选择器中？这应该有效：

```
$('#parent .a .b').on('click', '.c, .d, .e', function(){ ... }); 
```

**更新：** @cwolves 正确地指出，这只适用于静态，`.a .b`即在附加处理程序时出现在页面上，这首先违背了委托事件的目的。

# android - 使用 Android 开发者网站的状态栏通知代码时出错

> ID：14764274
> 
> 赞同：2
> 
> 时间：2013-02-08T01:26:01.410
> 
> 标签：android

我在developers.android.com 上找到了以下代码，但AIDE 将某些事情标记为错误。我应该怎么做才能修复这些错误？

TaskStackBuilder 实体说不明确的导入类型（其中 2 个）

StackBuilder 的未知变量类型（其中 3 个）

未知实体 StackBuilder（其中 3 个）

```
NotificationCompat.Builder myBuilder = new NotificationCompat.Builder(this) 
    .setSmallIcon(R.drawable.ic_launcher) 
    .setContentTitle("My notification") 
    .setContentText("Hello World!"); 

Intent resultIntent = new Intent(this, MainActivity.class);
TaskStackBuilder stackBuilder = TaskStackBuilder.create(this); 
stackBuilder.addParentStack(ResultActivity.class); 
stackBuilder.addNextIntent(resultIntent); 

PendingIntent resultPendingIntent = stackBuilder.getPendingIntent( 0, PendingIntent.FLAG_UPDATE_CURRENT ); 
myBuilder.setContentIntent(resultPendingIntent); 

NotificationManager mNotificationManager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE); 
mNotificationManager.notify(mId, myBuilder.build()); 
```

# ios - 如何验证与 MacRoman 兼容的字符

> ID：14764277
> 
> 赞同：0
> 
> 时间：2013-02-08T01:26:41.413
> 
> 标签：ios, objective-c, quartz-graphics, mac-roman

是否有一种简单的方法（函数、方法...）来验证用户键入的字符以查看它是否与 Mac OS Roman 兼容？我已经阅读了几十个主题，以找出 iOS 应用程序在引用**CGContextShowTextAtPoint**时崩溃的原因。我猜如果应用程序试图在图像上绘制一个包含 Mac OS Roman 集合中未包含的字符的字符串（即 ©），它可能会崩溃。这组有 256 个字符。我想知道除了将所选字符与这 256 个字符一一匹配之外，是否还有更好的方法？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T01:58:44.203

您可以仔细阅读 [https://developer.apple.com/library/mac/#documentation/graphicsimaging/conceptual/drawingwithquartz2d/dq_text/dq_text.html 。](https://developer.apple.com/library/mac/#documentation/graphicsimaging/conceptual/drawingwithquartz2d/dq_text/dq_text.html)

`CGContextShowGlyphsAtPoint`您可以使用而不是绘制任何编码 ，`CContextShowTextAtPoint`这样您就可以告诉它编码是什么。如果用户键入它，那么您将获得作为 NSString 的字符串，它是下面的 Unicode 字符串。可能最简单的方法是通过`NSString`'s`UTF8String`方法获取该用户输入的字符串的 utf8 编码。

如果您出于某种原因真的想坚持使用非常有限的 MacRoman，请使用`NSString`'`cStringUsingEncoding:`传入`NSMacOSRomanStringEncoding`来获取 MacRoman 字符串。不过请阅读有关此内容的文档`NSString`。如果用户字符串不能在 MacRoman 中无损编码，将返回 null。正如它所讨论的，您可以使用`dataUsingEncoding:allowLossyConversion:`and`canBeConvertedToEncoding:`来检查。不过，请阅读讨论中`cStringUsingEncoding:`关于返回字符串生命周期的注意事项。 `getCString:maxLength:encoding:`可能最终成为您更好的选择。所有在. [_](https://developer.apple.com/library/iOS/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html)`NSString`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T02:06:30.193

这并不能直接回答问题，但此答案可能是您问题的解决方案。

如果你有一个`NSString`, 而不是使用`CGContextShowTextAtPoint`，你可以这样做：

```
[someStr drawAtPoint:somePoint withFont:someFont]; 
```

其中`someStr`a`NSString`包含用户可以键入的任何 Unicode 字符，`somePoint`是 a `CGPoint`，并且`someFont`是`UIFont`用于呈现文本的 。

# c - C 编程打印大的负数

> ID：14764278
> 
> 赞同：-3
> 
> 时间：2013-02-08T01:26:42.790
> 
> 标签：c

我是编程新手，但我正在编程课程中开始介绍它。问题是他们不教它，他们只是给我们做事。我们需要创建函数来根据一个人拥有的硬币和美元的数量（通过用户输入）来计算一个人拥有的美分数量。我不知道我在做什么，或者我什至是否正确使用了函数原型，但是当我运行我的程序时，我没有收到任何错误，但它只是打印了一个很大的负数。这是我所拥有的，我知道它很抱歉，但非常感谢任何帮助。

```
#include <stdio.h>
#include <stdlib.h>
#include </home/TU/tue64800/include/myheader.h>

#define PENNYCOIN      1
#define NICKELCOIN     5
#define DIMECOIN      10
#define QUARTERCOIN   25
#define HALFCOIN      50
#define DOLLAR       100

int penny_coin_worth( int number_of_pennies );  
int nickel_coin_worth( int number_of_nickels );
int dime_coin_worth( int number_of_dimes );
int quarter_coin_worth( int number_of_quarters );                  
int half_coin_worth( int number_of_half );             
int dollar_coin_worth( int number_of_dollars );            
int total_worth ( int number_of_pennies, int number_of_nickels, int number_of_dimes,
int number_of_quarters, int number_of_half, int number_of_dollars );

int number_of_pennies, number_of_nickels, number_of_dimes, number_of_quarters,
number_of_half, number_of_dollars;
int total;

int main (void)
{
printf( "This program was written by %s.\n", PROGRAMMER_NAME );

printf( "Enter number of pennies:\n");
scanf( "%lf", &number_of_pennies);

printf( "Enter number of nickels:\n");
scanf( "%lf", &number_of_nickels);

printf( "Enter number of dimes:\n");
scanf( "%lf", &number_of_dimes);

printf( "Enter number of quarters:\n");
scanf( "%lf", &number_of_quarters);

printf( "Enter number of half dollars:\n");
scanf( "%lf", &number_of_half);

printf( "Enter number of dollars:\n");
scanf( "%lf", &number_of_dollars);

penny_coin_worth (number_of_pennies);
nickel_coin_worth (number_of_nickels);
dime_coin_worth (number_of_dimes);
quarter_coin_worth (number_of_quarters);
half_coin_worth (number_of_half);
dollar_coin_worth (number_of_dollars);

total_worth ( number_of_pennies, number_of_nickels, number_of_dimes,   
number_of_quarters, number_of_half, number_of_dollars );

return EXIT_SUCCESS;
}

int penny_coin_worth (int number_of_pennies)
{
    return ( number_of_pennies * PENNYCOIN);
}

int nickel_coin_worth (int number_of_nickels)
{
    return ( number_of_nickels * NICKELCOIN);
}

int dime_coin_worth (int number_of_dimes)
{
    return ( number_of_dimes * DIMECOIN);
}

int quarter_coin_worth (int number_of_quarters)
{
    return ( number_of_quarters * QUARTERCOIN);
}

int half_coin_worth (int number_of_half)
{
    return ( number_of_half * HALFCOIN );
}

int dollar_coin_worth (int number_of_dollars)
{
    return ( number_of_dollars * DOLLAR);
}

int total_worth ( int number_of_pennies, int number_of_nickels, int number_of_dimes,  
int number_of_quarters, int number_of_half, int number_of_dollars)
{
printf("The number of cents is%lf\n", (number_of_pennies * PENNYCOIN +    
number_of_nickels *  NICKELCOIN + number_of_dimes * DIMECOIN + number_of_quarters *  
QUARTERCOIN +  number_of_half * HALFCOIN + number_of_dollars * DOLLAR)*.01);
    return (0);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T01:31:14.110

阅读[printf 格式说明符](http://www.cprogramming.com/tutorial/printf-format-strings.html)。正如 Guy Sirton 所说，当它们是不同的类型时，您的错误是使用(in )`%lf`读取。你应该使用for s。`int``scanf``%d``int`

将来，您应该学习如何使用 GDB 等调试器，并使用它来逐步执行程序，并检查变量的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T01:32:32.897

在您的`scanf`陈述中，您试图将输入值解释为`double`( `%lf`)。相反，您应该读取整数，因为您将所有变量声明为`int`. `%d`像这样使用：

```
scanf("%d", &number_of_pennies); 
```

如果您仍然感到困惑，请阅读[`printf`格式化规范](http://cplusplus.com/reference/cstdio/printf/?kw=printf)。

# silverlight - 为 Silverlight 的 arcgis 查看器创建网络跟踪

> ID：14764284
> 
> 赞同：1
> 
> 时间：2013-02-08T01:27:25.817
> 
> 标签：silverlight, trace, arcgis

我想使用 ArcGIS Viewer for silverlight 进行网络跟踪，我正在使用 ArcGIS 10 Server 和 Desktop，我可以做到吗？

我读了一篇关于它的博客 [https://ambergis.wordpress.com/2011/05/09/network-trace-add-in-for-arcgis-silverlight-viewer/](https://ambergis.wordpress.com/2011/05/09/network-trace-add-in-for-arcgis-silverlight-viewer/)

但我不知道怎么做。有人可以解释我怎么做吗？

# c - 使用指针将 C 转换为 MIPS 程序集

> ID：14764285
> 
> 赞同：3
> 
> 时间：2013-02-08T01:27:35.367
> 
> 标签：c, pointers, mips

我正在尝试存储一个初始化为的指针：

```
int* x; 
```

进入一个初始化为的常规变量

```
int y; 
```

因此：

```
y = *x; 
```

在 mips 中是否像

```
$s1 = ($a0);? 
```

反之亦然？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T01:31:44.477

汇编语言通常没有运算符。您可能需要以下`lw`说明：

```
lw $s1, 0($a0) 
```

`$s1`和的使用`$a0`当然取决于上下文。如果这些寄存器与您正在使用的其余代码匹配，那就没问题了。

# android - 清理 MicroSD/存储

> ID：14764288
> 
> 赞同：-1
> 
> 时间：2013-02-08T01:27:45.783
> 
> 标签：android

是否有任何工具可以清理 Android 手机上的存储空间？应用程序似乎到处都在创建文件夹，即使它们被删除，文件夹仍然存在......

分不清哪个应用使用或需要哪个目录，手动删除感觉好痛苦……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T02:01:53.940

在 Android 中，应用程序被隔离到具有不同 uid 的不同进程中。每个应用程序都有一个数据目录，一般在/data目录下，用来存放应用程序数据。该目录对于其他非根进程是不可读的。因此，如果您的设备尚未植根，则没有应用程序可以删除其他应用程序拥有的那些数据文件夹。

但是，当您删除应用程序时，Android 将删除为该应用程序创建的目录。我认为您真正关心的是/sdcard 下的数据。任何被授予 android.permission.WRITE_EXTERNAL_STORAGE 的应用程序都可以读/写 sdcard。

解决方案：

1.  创建您自己的应用程序，您可以通过请求 android.permission.WRITE_EXTERNAL_STORAGE 权限来删除 sdcard 上的任何文件。

2.  现有的 SD 卡清理应用程序：[Forever Gone (SD Card Cleaner)](https://play.google.com/store/apps/details?id=com.kovit.p.forevergone&hl=en)

3.  如果您的设备已经植根，那么您将能够删除任何应用程序目录。[SD Maid - 系统清理工具](https://play.google.com/store/apps/details?id=eu.thedarken.sdm&hl=en)等许多应用程序都是为此而设计的。

# python - 如何使用 python 更改 Windows 的关闭消息？

> ID：14764294
> 
> 赞同：2
> 
> 时间：2013-02-08T01:28:30.513
> 
> 标签：python, windows, subprocess

我有一个关闭计算机的程序，但我想更改显示的消息。目前，它说我的电脑将在一分钟内关闭；这是在一个消息框中。有没有办法做到这一点？另外，作为“额外信用”，我是否有可能进行现场倒计时？（60 秒、59 秒、58 秒……？）

我当前的关机代码是这样的：

```
import subprocess
subprocess.call(["shutdown", "-f", "-r", "-t", "10"]) 
```

我希望将消息嵌入到子进程命令中。

眼镜：

Python 2.7.3 Windows 7，32 位

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T05:45:09.610

你试过了吗？

```
import subprocess
subprocess.call(["shutdown", "-f", "-r", "-t", "10", "-c", '"MESSAGE HERE"']) 
```

# java - 将数学方程转换为 Java BigDecimal 行

> ID：14764296
> 
> 赞同：2
> 
> 时间：2013-02-08T01:28:37.423
> 
> 标签：java

我正在尝试制作一个将数学方程式传输到 Java BigDecimal 行的小工具。

例如：

```
A + B * C => A.add(B.multiply(C))
A / B + C => A.divide(B).add(C) 
```

括号让事情变得很糟糕。

```
A - (B + C) / D => A.substract(B.add(C).divide(D))
A - (B * (C + D)) => A.substract(B.multiply(C.add(D))) 
```

我的方法是递归地做。例如：A + B * C

```
1\. convert( A + B * C ) 
2\. A.add( convert (B * C) )
3\. A.add(B.multiply(C)) 
```

支持的数学符号：`+ - * / % ( )`

我想知道是否有更好的方法来处理这个问题。

这种问题有名称吗？编译器？（对不起，如果不是，我从未对编译器做过任何工作。）提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T02:38:55.940

您可能想查看[*递归下降解析器*](http://en.wikipedia.org/wiki/Recursive_descent_parser)，[此处](https://sites.google.com/site/drjohnbmatthews/enumerated-functions)针对`double`值进行了说明。更改为`BigDecimal`很简单，但您可能必须缩减命名函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T02:39:38.267

为什么不使用 Groovy？它直接支持更好的大十进制算术语法。

```
BigDecimal a = ...;
BigDecimal b = ...;
BigDecimal c = ...;
Binding binding = new Binding();
binding.setVariable("A", a);
binding.setVariable("B", b);
binding.setVariable("C", c);
GroovyShell shell = new GroovyShell(binding);

BigDecimal value = (BigDecimal) shell.evaluate("a+b*c"); 
```

如果您需要，Groovy 还具有用于大小数的直接文字语法；

```
A = 2G
B = 4G
C = 8G 
```

如果您的主要目标只是输入表达式并对其求值，那么这是一个不错的简单方法。如果您尝试生成代码，那就另当别论了。

# java - 如何在 Twitter4J 中设置消费者密钥/秘密对？

> ID：14764297
> 
> 赞同：2
> 
> 时间：2013-02-08T01:28:43.913
> 
> 标签：java, api, twitter, twitter4j

```
ConfigurationBuilder cb = new ConfigurationBuilder();
        cb.setDebugEnabled(true)
          .setOAuthConsumerKey("*********************")
          .setOAuthConsumerSecret("******************************************")
          .setOAuthAccessToken("**************************************************")
          .setOAuthAccessTokenSecret("******************************************");
        TwitterFactory tf = new TwitterFactory(cb.build());
        Twitter twitter = tf.getInstance(); 
```

代替 * 的值是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T01:53:30.217

当您在[https://dev.twitter.com/apps](https://dev.twitter.com/apps)创建应用程序时，会提供消费者密钥和消费者秘密。[这个问题](https://stackoverflow.com/questions/1808855/getting-new-twitter-api-consumer-and-secret-keys)有更多信息。然后，您必须从用户那里获取访​​问令牌。

Twitter 开发人员文档对整个过程进行了描述，但很难知道从哪里开始。我建议你寻找这样的[指南](http://www.1stwebdesigner.com/tutorials/twitter-app-oauth-php/)。（了解 OAuth 的工作原理将使整个过程更加清晰。）

# iphone - ItunesConnect 中的 CFBundleIdentifer 少于新的 bundleIdentifier

> ID：14764302
> 
> 赞同：0
> 
> 时间：2013-02-08T01:29:04.330
> 
> 标签：iphone, xcode

在 iTunes 连接中，在`binary details`我的两个

`Bundle Short Version String : 1.0`

和我的

`Bundle Version : 1.0`

都是 1.0

我的 xCode 项目的新更新是 1.1.1，它给了我这个错误：

PS我也试过2.2、99.9、12.3...

`CFBundleVersion must be higher than previous version`

我已经搜索和搜索，每个人都给出了相同的答案：检查二进制详细信息下的 itunesconnect 并确保上传的版本小于您要上传的版本。

它是什么！而且我只上传了 1 个应用程序。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T03:01:37.127

请参阅此链接可能对您有所帮助...我认为在您的 plist 中您没有更改应用程序的版本。

[Info.plist 上传错误中的 CFBundleVersion](https://stackoverflow.com/questions/4933093/cfbundleversion-in-the-info-plist-upload-error)

# .net - Rx 与反应式编程有何关系？

> ID：14764303
> 
> 赞同：5
> 
> 时间：2013-02-08T01:29:08.640
> 
> 标签：.net, system.reactive, reactive-programming

我已经阅读了响应式编程的基本思想，即根据其源值表达式使变量随时间变化。我什至使用表达式[实现了这一点。](http://happynomad121.blogspot.com/2013/01/data-binding-among-complex-expressions.html)但后来我查看了 Microsoft 的 Reactive Extensions (Rx) 并看到了完全不同的东西。随着时间的推移自我更新的变量在哪里？没有人可以看到。只是通过事件参数枚举的一些奇特方式。

所以我的问题是：Rx 到底有多“反应性”？我们现在在那里看到的功能是未来的前兆吗？还是微软不小心抛出了一个流行词？还是我完全错过了重点（在这种情况下，我希望您解释一下如何）？

**编辑：** 除了问题被关闭之外，我已经得到了一些关于 Rx 描述的很好的答案。:(但我仍然希望听到更多关于：

1.  Rx 在什么意义上是“反应性的”？我认为自我更新变量是这个想法的核心，但 Rx 不提供这些。LINQ-to-Events 似乎是 Rx 的更好名称。我开始认为微软在将其应用于 Rx 时可能误用了“反应式”这个词。
2.  当前的 Rx 功能以何种方式成为自更新变量的先导？我已经实现了这样的功能，并没有注意到 Rx 有任何有用的东西。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-08T01:56:44.287

“反应式”可能更像是一个流行词，尽管它确实与另一种称为“函数式反应式编程”的语言概念很好地联系在一起......

无论如何，**Rx**的“是”已经被比我聪明得多的人回答了，但我会试一试：

*   起初，有一些东西；这些东西有形状，被称为**POCO**

*   这些**POCO**的集合形成了，因此它们被命名为**`IEnumerable<T>`**

*   “但是事件呢？”人们呻吟着哀号，“它们不适合集合和组！我们必须创建奇怪的和外星感觉的呼叫和响应处理程序来应对它们！”

*   就在那时，[TheErik](http://en.wikipedia.org/wiki/Erik_Meijer_%28computer_scientist%29)、[TheBart](http://community.bartdesmet.net/blogs/bart/Default.aspx)和其他人看着这些奇怪的事件并想：“嘿，我们可以让他们表现得像**POCO**一样，因为他们只是 ! 的镜像**`IEnumerable<T>`**！”

*   这就是 的诞生，它的**`IObservable<T>`**对偶**`IEnumerable<T>`**（对于流“推送”信息给观察者，而不是观察者“拉”出项目）

*   然后我厌倦了在“创世纪模式”中写作，那些真正聪明的人将相同的单子查询逻辑`LINQ`与“时间旅行”的能力捆绑在一起，`ISchedulers`并称之为“Rx”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T01:58:50.337

好家伙！好的。我认为这里的主要问题是词汇。Rx 通常被描述为 Linq to "Event" 或类似的东西，并使用称为 IObservable 的东西来实现。

我相信每个刚开始使用 Rx 的人都会陷入同样的​​陷阱。当我们看到“事件”这个词时，我们会想到关键字事件/事件处理程序等……但是在 Rx 的上下文中，事件比这更普遍。它是异步发生的任何事情，很可能在另一个线程上。现在当然，一种类型的事件是 .net 事件，使用 Observable.FromEventPattern 工厂方法创建事件处理程序-> IObservables 有一些价值，因为它们的生命周期表示为 IDisposable（但更多关于后来）。

Rx 的另一个用途是数据并行性，因为它与 TPL 数据流有很大的重叠。我用于大型数据并行工作的典型模式是将其转换为 Rx IObservable，然后将处理/线程行为作为 monad 应用。

关于花哨的部分，IObservable 有一个 Linq 提供程序，它允许您使用 Linq 异步处理异步进程（例如[使用 TPL 的推测执行](https://stackoverflow.com/questions/14720225/speculative-execution-using-the-tpl/14720439#14720439)）。

最后，IObservable 是一个不幸的名称，因为它导致大多数人将其与 INPC 的概念混淆，因为它看起来类似于 ObservableCollection。我向你保证不是。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T01:54:04.763

[反应式编程](http://en.wikipedia.org/wiki/Reactive_programming)基于“数据流”和“变化传播”。

有多种表示方式。Rx 框架基本上是重新审视传统的基于事件的范例，将其作为事件的流式表示，并提供围绕它的操作。

# css - CSS - 为什么网格框架不提供顶部或底部边距或填充类？

> ID：14764309
> 
> 赞同：1
> 
> 时间：2013-02-08T01:30:33.473
> 
> 标签：css

问题可能非常基本。

曾在 Bootstrap 和 Blueprint 等方面工作过。

我们有用于指定宽度的类：span1 到 span12...等
左右类：append1 到 append-48 和 prepend-1 到 prepend-48 等。

1.  为什么我们没有指定顶部或底部边距以及顶部或底部填充的类有什么原因吗？

2.  处理这种情况的更好方法是什么？使用 br 标签还是使用 css 本身？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T02:17:02.977

我不熟悉 Bootstrap 或蓝图，所以无法回答为什么不存在用于指定边距/填充的类。但是，使用 br 表示间距并不是一个好主意。如果您想为跨度标签添加填充或边距，一个更好的主意是使用 css 选择器。例如：

```
span{margin:10px 20px;padding:10px 20px;} 
```

或单个跨度标签

```
.span1, .span5, .span12{margin:0 20px;} 
```

ETC...

# iphone - 没有广告可用时隐藏 iAd 横幅

> ID：14764313
> 
> 赞同：2
> 
> 时间：2013-02-08T01:30:40.517
> 
> 标签：iphone, ios, objective-c, iad

这是一个Phonegap 应用程序。我在这里完全迷路了，请帮忙。我按照[本教程](http://www.sitekickr.com/blog/phonegap-cordova-iad-integration/)进行了操作。

这是我的 MainViewController.m：

```
- (void)webViewDidFinishLoad:(UIWebView*)theWebView
{
    adView = [[ADBannerView alloc] initWithFrame:CGRectZero];

    if([UIApplication sharedApplication].statusBarOrientation ==
       UIInterfaceOrientationPortrait ||
       [UIApplication sharedApplication].statusBarOrientation ==
       UIInterfaceOrientationPortraitUpsideDown) {
        adView.currentContentSizeIdentifier = ADBannerContentSizeIdentifierPortrait;
    }
    else {
        adView.currentContentSizeIdentifier = ADBannerContentSizeIdentifierLandscape;
    }

    adView.currentContentSizeIdentifier = ADBannerContentSizeIdentifierPortrait;
    CGRect adFrame = adView.frame;
    adFrame.origin.y = self.view.frame.size.height-adView.frame.size.height;
    adView.frame = adFrame;
    [self.view addSubview:adView];

    // Black base color for background matches the native apps
    theWebView.backgroundColor = [UIColor blackColor];

    return [super webViewDidFinishLoad:theWebView];
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-08T01:36:05.560

快速回答：您需要做的是符合 ADBannerViewDelegate 协议，并在收不到广告时隐藏广告。

分步版本：

在您列出的该方法中，您还需要包括`adView.delegate = self`.

在 MainViewController.h 中，它说`@interface MainViewController : UIViewController`，您想在`<ADBannerViewDelegate>`之后添加，如下所示：

`@interface MainViewController : UIViewController <ADBannerViewDelegate>`. 如果<>里面已经有东西了，加个逗号，加上ADBannerViewDelegate。

回到 MainViewController.m，添加这些方法：

```
- (void)bannerViewDidLoadAd:(ADBannerView *)banner {
   adView.hidden = NO;
}

- (void)bannerView:(ADBannerView *)banner didFailToReceiveAdWithError:(NSError *)error {
   adView.hidden = YES;
} 
```

# jquery - jQuery id 在一个块中未定义，但在另一个块中未定义？

> ID：14764320
> 
> 赞同：0
> 
> 时间：2013-02-08T01:31:35.287
> 
> 标签：jquery

原谅一大段代码，但我被卡住了，对此我真的筋疲力尽了......

所以我正在加载一些内容，然后显示一个对话框。根据您按下的按钮，我会做几件事。我的不一致似乎在“保存计划”和“取消发送”块之间

此代码在两个块中是相同的

```
var dt = $(this).find("input[type=text]").val();
var id = $(this).find("input[type=text]").attr("id");
var CustomObjectKey = id.split("_")[1];
var alt = $(this).find("input[type=text]").attr("alt"); 
```

然而，在取消发送块中，id 是未定义的，因此拆分正在爆炸。

谁能告诉我我做错了什么？

```
$("#ActionContainer").load(wsUrl, { Function:"BuildScheduleDialog", ArticleID:ArticleID}, function(){
                var Subject = $(this).find("#hdnSubject").val();
                $("#ActionContainer").dialog({
                    title: "Edit Schedule: " + ArticleTitle,
                    height: 'auto',
                    width: 'auto',
                    modal: true,
                    buttons: {
                        'Cancel': function() {

                            $(this).dialog('close');
                        },
                        'Save Schedule': function() {
                            var that = $(this);
                            var table = $("#tblSchedule");
                            var parameterArray = [];

                            //loop each row of the Schedule table to get the parameters
                            $(table).find("tbody>tr").not(':first').each(function () {
                                var dt = $(this).find("input[type=text]").val();
                                var id = $(this).find("input[type=text]").attr("id");
                                var CustomObjectKey = id.split("_")[1];
                                var alt = $(this).find("input[type=text]").attr("alt");

                                //alert(dt + " " + id + " " + CustomObjectKey + " " + alt);
                                if(dt != "" && alt === "")
                                {
                                    parameterArray.push({Region: $(this).find("#spRegion").text(), Date: dt, ArticleTitle: ArticleTitle ,ArticleID: ArticleID, PublicationTypeID: PublicationTypeID, CustomObjectKey: CustomObjectKey, Subject: Subject});
                                }
                            });

                            if(parameterArray.length > 0)
                            {
                                ShowWaitIcon();
                                $("#results").load(wsUrl, { Function:"Schedule", Action: "Edit", Items: JSON.stringify(parameterArray)}, function(){
                                    $("#results").fadeIn(1000);
                                    $('#results').delay(3000).fadeOut(3000);
                                    $(that).dialog('close');
                                    LoadMainTable();
                                });
                            }
                            else
                            {
                                alert("Please select at least one Item to Schedule");
                            }

                        },
                         'Cancel Send': function() {
                         if(confirm("Are you sure you want to cancel this entire send?"))
                         {
                             var that = $(this);
                             var table = $("#tblSchedule");
                             var parameterArray = [];

                             var status = "";
                             $(table).find("tbody>tr").each(function () {                                    
                                var dt = $(this).find("input[type=text]").val();                                     
                                 var id = $(this).find("input[type=text]").attr("id");                                     
                                 var CustomObjectKey = id.split("_")[1];                                     
                                 var alt = $(this).find("input[type=text]").attr("alt");                                                                         
                                parameterArray.push({Region: $(this).find("span").text(), Date: dt, ArticleTitle: ArticleTitle ,ArticleID: ArticleID, PublicationTypeID: PublicationTypeID, CustomObjectKey:CustomObjectKey});
                             });

                             /*ShowWaitIcon();
                             $("#results").load(wsUrl, { Function:"CancelAllSchedule", Items: JSON.stringify(parameterArray)}, function(){
                                $("#results").fadeIn(1000);
                                $('#results').delay(3000).fadeOut(3000);
                                $(that).dialog('close');
                                LoadMainTable();
                             });

                         */}
                        }
                    },open: function(event, ui){
                        $(".datePicker", "#ActionContainer").datetimepicker({
                            timeFormat: 'hh:mm tt',
                            showTimezone: true
                        });
                        BindCheckboxes();
                    }
                });
            }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T01:41:40.587

尝试用`$(table).find`just 替换下面`table.find`（因为你已经声明了`table = $("#tblSchedule")`

```
 var table = $("#tblSchedule");
                         var parameterArray = [];

                         var status = "";
                         $(table).find("tbody>tr").each(function () {                                    
                            var dt = $(this).find("input[type=text]").val();                                     
                             var id = $(this).find("input[type=text]").attr("id");                                     
                             var CustomObjectKey = id.split("_")[1];                                     
                             var alt = $(this).find("input[type=text]").attr("alt");                                                                         
                            parameterArray.push({Region: $(this).find("span").text(), Date: dt, ArticleTitle: ArticleTitle ,ArticleID: ArticleID, PublicationTypeID: PublicationTypeID, CustomObjectKey:CustomObjectKey});
                         }); 
```

此外，如果您尝试从 中选择每个`tr`，`$("#tblSchedule")`可能`$("#tblSchedule").find("tr")`是更好的选择器。

# c# - 使只读富文本框中的当前行可编辑

> ID：14764321
> 
> 赞同：3
> 
> 时间：2013-02-08T01:31:43.757
> 
> 标签：c#, forms, richtextbox

我正在尝试在 C# 中进行命令提示符克隆，以便熟悉使用 IO。但是，我创建了两个文本框（一个用于命令，另一个用于“参数”）和一个富文本框来查看命令的结果，而不只是一个文本正文。这可能听起来令人困惑，而且标题可能具有误导性，但我不知道该怎么说。无论如何，我的问题是 - 你如何*只*使当前行可编辑而其余为只读？以及如何将两个文本框中的命令和参数组合起来，这样我就不需要*两个*单独的文本框了？我花了 6 天时间试图弄清楚实现这一点的逻辑，但我什么也没得到。

**这是表格的图片：**

![在此处输入图像描述](../Images/c95b26e375cd551641bc2e300ddeb9be.png)

**这就是我想让它类似于：**

![在此处输入图像描述](../Images/6c52d858bea219a704c2fe894b350eeb.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T02:37:11.973

我不确定您是否可以这样做，但是如果是我，并且这是“现在就完成”的情况（这只是我的想法），我将创建一个用户控件来包含“屏幕”。此用户控件将 RTF 或列表框作为顶部，并在其下方刷新一个文本框。

我将删除边框并将这两个控件包装在具有边框的面板中。这将模拟单个控件。

文本框将检查其中一个按键事件中的回车键，并且控件本身将具有可由父控件处理的事件。

这可能很老套，但这可能是我在最后一刻要做的事情。

哦，就命令和参数而言，如果您将文本框作为单个值读取，然后将字符串拆分为列表或数组，然后您可以定义一个开关或其他一些知道如何处理参数的条件代码（索引 1+)，基于第一项/索引的值。

# dart - 如何在 Dart 单元测试中模拟或验证打印调用？

> ID：14764323
> 
> 赞同：11
> 
> 时间：2013-02-08T01:31:59.607
> 
> 标签：dart

在我的 Dart 单元测试中，如何验证 print 是否被调用？

我正在为教程编写示例代码，我想对其进行测试。为简单起见，许多示例使用`print`。我希望我的单元测试能够验证 print 是用正确的输入调用的。

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-08-01T23:11:31.250

更新：[ZoneSpecification](https://api.dartlang.org/stable/1.18.0/dart-async/ZoneSpecification-class.html)允许覆盖该`print`功能。通过在自定义区域内运行被测代码，您可以捕获对`print`函数的调用。例如，以下测试将所有打印消息重定向到内存列表中`log`：

```
import 'dart:async';
import 'package:test/test.dart';

var log = [];

main() {
  test('override print', overridePrint(() {
    print('hello world');
    expect(log, ['hello world']);
  }));
}

void Function() overridePrint(void testFn()) => () {
  var spec = new ZoneSpecification(
    print: (_, __, ___, String msg) {
      // Add to log instead of printing to stdout
      log.add(msg);
    }
  );
  return Zone.current.fork(specification: spec).run<void>(testFn);
}; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-08T03:01:28.200

我认为 unittest 没有为此添加任何特定内容，但是您可以覆盖测试范围内的任何顶级函数并捕获对日志的调用，例如：

```
var printLog = [];
void print(String s) => printLog.add(s);

main() {
  test('print', () {
    myFuncUnderTest();
    expect(printLog.length, 2);
    expect(printLog[0], contains('hello'));
    // etc...
  });
} 
```

# uml - 是否可以在 EA 类图中使用球窝表示法？

> ID：14764329
> 
> 赞同：5
> 
> 时间：2013-02-08T01:32:49.857
> 
> 标签：uml, enterprise-architect

球窝符号是合法的 UML 2.0，但我找不到强制 EA 将其绘制在图表上的方法。它拒绝允许套接字和球之间的依赖关系。有没有办法让它发生，如下图所示（小毫秒绘画魔法）：

![在此处输入图像描述](../Images/deb0da59ec2d505d5656cb316c538990.png)

另外，一个附带的问题，你能让球或窝出现在元素的另一边吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T22:05:24.460

在 EA 中有两种不同的显示球窝的方式。

使用您使用的那个，您已经将连接器从您的 Consumer 和 Producer 类绘制到 IProducer 接口（分别是依赖项和实现）。然后，您在类上打开了 Dependent 和 Realized 接口的显示。

这样做意味着球和插座是固定的。您不能选择它们（而是选择了类），不能将它们移动到它们的父类中，并且它们不能成为连接器的端点。

另一种方法是使用 Expose Interface。

使用此方法，您无需将任何连接器从您的类绘制到接口。相反，您使用 Expose Interface 在每个类中创建一个嵌入元素，该元素将接口作为其分类器。

这些暴露的接口，本身就是元素，按照你希望的方式运行：你可以在它们各自类的周边移动它们，你可以在它们之间绘制连接器。

在示例中，请注意 IProducer 接口元素没有任何连接器。![暴露接口的示例使用](../Images/1cbe856bc1fa97ca122b6575c63ae0f8.png)

为了公开接口，有两种方法可以解决。您可以在图表工具箱中选择 Expose Interface，但请注意，这仅在 Component 工具箱中可用 - 而不是 Class 工具箱。这就是我在这个例子中对 Producer 所做的。

另一种方法是右键单击类并选择 New Element -> Port。这将创建一个端口，您可以为其指定任何名称。然后右键单击端口并选择 New Element -> Provided / Required Interface。

无论哪种方式都会打开 Exposed Interface 对话框，它允许您通过使用省略号按钮 (...) 并浏览项目树中的接口来选择应该公开的界面元素。

使用端口可能看起来有点麻烦，但严格来说，它是更正确的 UML。另请注意，单个端口可以公开多个接口，包括提供的和必需的接口，允许您对形成某种逻辑单元的接口进行分组。可能是您有多个接口形成一个服务，因此一起使用，但是该类提供并需要多个服务。

当您讨论的不是单个类而是组件时，这（对我而言）更有意义，并且我通常在对类建模时使用实现/依赖关系，在对组件建模时使用端口和暴露的接口。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-24T15:13:02.637

在 EA 中，球窝连接可以（仅）在端口之间绘制。使用“装配”连接器类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T08:47:27.033

ball 和 socket 是合法的 UML 2.0 符号是正确的，但它们不是 UML 元素，它们描述了元素关系。所以我想根据您使用的工具，它会（或不会）允许您在它们之间创建依赖关系。根据 UML 规范，应该在至少两个 NamedElements 之间创建 UML 依赖关系。

# ghostscript - Ghostscript tiffg3 灰色=黑色

> ID：14764330
> 
> 赞同：1
> 
> 时间：2013-02-08T01:32:59.110
> 
> 标签：ghostscript

尝试获取 pdf 并将其转换为 tiff，但将所有灰度变为纯黑色。换句话说，如果它不是白色的，它应该是黑色的。tiffg3 设备是 1 位的，但它仍然是灰色并试图伪造它。

示例命令：

gs -dQUIET -dNOPAUSE -dBATCH -r200 -sPAPERSIZE=letter -sDEVICE=tiffg3 -sOutputFile=out.tiff in.pdf

示例输入： ![在此处输入图像描述](../Images/2fa04b1b1529455dcd7eaefa89870b98.png)

示例输出： ![在此处输入图像描述](../Images/76ea75874254d37a2ed812b59a9d4557.png)

期望的输出： ![在此处输入图像描述](../Images/e89234b122938f375469d417a56ef555.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T08:26:03.950

1 位设备使用半色调（也称为加网）来表示仅使用黑白像素的灰色阴影。这就是它的意图，它*根本不*打算改变颜色。

您可以通过多种方式在 PostScript 中伪造您想要的内容（重新定义 setgray 是一种方法，也是设置传递函数），但 PDF 不是一种编程语言，因此这种方法实际上并不适用。

您可以使用自定义 ICC 配置文件对灰度值进行颜色校正，使它们全为黑色。Ghostscript 版本 9 及更高版本使用 Little CMS 作为色彩管理系统，并具有您可以覆盖的“默认”灰色 ICC 配置文件。据推测，构建一个将白色以外的任何东西映射到纯黑色的配置文件可能很容易。然而，这不是我的领域。您还需要考虑这将如何影响（例如）图像。

Ghostscript 中还有基于对象类型的附加控件，因此您可以选择仅将此转换应用于文本或线条。理想情况下，您应该返回原始文档，在那里进行更改，然后制作新的 PDF。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-16T14:15:31.373

您可以使用从 imagemagick 转换为该目的，使用标志级别。例如，将图像转换为纯黑/白，将灰度分成两半：

转换级 50%,50% file.pdf blackwhite.pdf

然后传给GS。不过，我对传真的建议是将部分灰度留在那里，因为许多文件都依赖于它的易读性：

转换-密度 816x784 级 55%,95% file.pdf blackwhite.pdf

这个留下了 40% 的灰度，将 0-55 范围内的每个点转换为黑色（即 0 黑色和 100 白色），并将 95-100 范围内的所有内容转换为白色，您可以使用它并获得您的最佳匹配。稍后在 GS 中转换为 tiffg3 时，密度标志将对其有所帮助，从而在生成的 tif 中提供更好的质量。

# orbeon - 关闭包含 xbl 数据表的 xxforms:dialog 会生成未知错误

> ID：14764334
> 
> 赞同：0
> 
> 时间：2013-02-08T01:33:34.147
> 
> 标签：orbeon

使用 4.0.0 Beta 3。

我们有一个使用 xxforms:dialog 的对话框，该对话框使用 xxforms:show 打开并使用 xxforms:hide 关闭（从操作按钮或 X（关闭）按钮）。有一个共同的线程，如果对话框包含 xbl 数据表，则会生成未知错误（见下文）。

有时对话框完全隐藏而没有客户端错误，有时对话框不会重新呈现页面，因为发生客户端错误（消息：'未定义'不是对象（评估'tooltips [control.id].cfg。获取属性') )

有什么想法吗？

```
+----------------------------------------------------------------------------------------------------------------------+
|An Error has Occurred                                                                                                 |
|----------------------------------------------------------------------------------------------------------------------|
|[No error message provided.]                                                                                          |
|----------------------------------------------------------------------------------------------------------------------|
|Application Call Stack                                                                                                |
|----------------------------------------------------------------------------------------------------------------------|
|----------------------------------------------------------------------------------------------------------------------|
|Exception: java.lang.IllegalStateException                                                                            |
|----------------------------------------------------------------------------------------------------------------------|
|org.orbeon.oxf.xforms.BindingContext$$anonfun$ances|apply                         |BindingContext.scala          |  71|
|org.orbeon.oxf.xforms.BindingContext$$anonfun$ances|apply                         |BindingContext.scala          |  71|
|scala.Option                                       |getOrElse                     |Option.scala                  | 108|
|org.orbeon.oxf.xforms.BindingContext               |ancestorOrSelfInScope$1       |BindingContext.scala          |  71|
|org.orbeon.oxf.xforms.BindingContext               |pushVariable                  |BindingContext.scala          |  74|
|org.orbeon.oxf.xforms.XFormsContextStack           |scopeVariable                 |XFormsContextStack.java       | 224|
|org.orbeon.oxf.xforms.action.actions.XFormsActionAc|apply                         |XFormsActionAction.scala      |  48|
|org.orbeon.oxf.xforms.action.actions.XFormsActionAc|apply                         |XFormsActionAction.scala      |  41|
|scala.collection.Iterator$class                    |foreach                       |Iterator.scala                | 772|
|scala.collection.JavaConversions$JIteratorWrapper  |foreach                       |JavaConversions.scala         | 573|
|scala.collection.IterableLike$class                |foreach                       |IterableLike.scala            |  73|
|scala.collection.JavaConversions$JListWrapper      |foreach                       |JavaConversions.scala         | 615|
|org.orbeon.oxf.xforms.action.actions.XFormsActionAc|execute                       |XFormsActionAction.scala      |  41|
|org.orbeon.oxf.xforms.action.XFormsActionInterprete|runSingleIteration            |XFormsActionInterpreter.java  | 204|
|org.orbeon.oxf.xforms.action.XFormsActionInterprete|runAction                     |XFormsActionInterpreter.java  | 150|
|----------------------------------------------------------------------------------------------------------------------|
|Exception: org.orbeon.oxf.common.ValidationException                                                                  |
|----------------------------------------------------------------------------------------------------------------------|
|org.orbeon.oxf.common.ValidationException          |wrapException                 |ValidationException.java      | 126|
|org.orbeon.oxf.xforms.action.XFormsActionInterprete|runAction                     |XFormsActionInterpreter.java  | 157|
|org.orbeon.oxf.xforms.event.EventHandlerImpl$$anonf|apply$mcV$sp                  |EventHandlerImpl.scala        | 249|
|org.orbeon.oxf.xforms.event.EventHandlerImpl$$anonf|apply                         |EventHandlerImpl.scala        | 249|
|org.orbeon.oxf.xforms.event.EventHandlerImpl$$anonf|apply                         |EventHandlerImpl.scala        | 249|
|org.orbeon.oxf.util.DynamicVariable                |withValue                     |DynamicVariable.scala         |  40|
|org.orbeon.oxf.xforms.action.XFormsAPI$            |withScalaAction               |XFormsAPI.scala               |  39|
|org.orbeon.oxf.xforms.event.EventHandlerImpl       |handleEvent                   |EventHandlerImpl.scala        | 248|
|org.orbeon.oxf.xforms.event.Dispatch$$anonfun$dispa|apply$mcV$sp                  |Dispatch.scala                |  79|
|org.orbeon.oxf.xforms.event.Dispatch$$anonfun$dispa|apply                         |Dispatch.scala                |  78|
|org.orbeon.oxf.xforms.event.Dispatch$$anonfun$dispa|apply                         |Dispatch.scala                |  78|
|org.orbeon.oxf.util.Logging$class                  |withDebug                     |Logging.scala                 |  43|
|org.orbeon.oxf.xforms.event.Dispatch$              |withDebug                     |Dispatch.scala                |  22|
|org.orbeon.oxf.xforms.event.Dispatch$$anonfun$dispa|apply                         |Dispatch.scala                |  78|
|org.orbeon.oxf.xforms.event.Dispatch$$anonfun$dispa|apply                         |Dispatch.scala                |  72|
|scala.collection.TraversableLike$WithFilter$$anonfu|apply                         |TraversableLike.scala         | 697|
|scala.collection.LinearSeqOptimized$class          |foreach                       |LinearSeqOptimized.scala      |  59|
|scala.collection.immutable.List                    |foreach                       |List.scala                    |  76|
|scala.collection.TraversableLike$WithFilter        |map                           |TraversableLike.scala         | 696|
|org.orbeon.oxf.xforms.event.Dispatch$$anonfun$dispa|apply                         |Dispatch.scala                |  72|
|---8<--------8<--------8<--------8<--------8<--------8<--------8<--------8<--------8<--------8<--------8<--------8<---|
|org.orbeon.oxf.util.ScalaUtils$                    |withRootException             |ScalaUtils.scala              | 116|
|org.orbeon.oxf.servlet.OrbeonServlet               |service                       |OrbeonServlet.scala           |  67|
|javax.servlet.http.HttpServlet                     |service                       |HttpServlet.java              | 722|
|org.apache.catalina.core.ApplicationFilterChain    |internalDoFilter              |ApplicationFilterChain.java   | 305|
|org.apache.catalina.core.ApplicationFilterChain    |doFilter                      |ApplicationFilterChain.java   | 210|
|org.apache.catalina.core.StandardWrapperValve      |invoke                        |StandardWrapperValve.java     | 225|
|org.apache.catalina.core.StandardContextValve      |invoke                        |StandardContextValve.java     | 169|
|org.apache.catalina.authenticator.AuthenticatorBase|invoke                        |AuthenticatorBase.java        | 472|
|org.apache.catalina.core.StandardHostValve         |invoke                        |StandardHostValve.java        | 168|
|org.apache.catalina.valves.ErrorReportValve        |invoke                        |ErrorReportValve.java         |  98|
|org.apache.catalina.valves.AccessLogValve          |invoke                        |AccessLogValve.java           | 927|
|org.apache.catalina.valves.RemoteIpValve           |invoke                        |RemoteIpValve.java            | 680|
|org.apache.catalina.core.StandardEngineValve       |invoke                        |StandardEngineValve.java      | 118|
|org.apache.catalina.connector.CoyoteAdapter        |service                       |CoyoteAdapter.java            | 407|
|org.apache.coyote.http11.AbstractHttp11Processor   |process                       |AbstractHttp11Processor.java  | 999|
|org.apache.coyote.AbstractProtocol$AbstractConnecti|process                       |AbstractProtocol.java         | 565|
|org.apache.tomcat.util.net.JIoEndpoint$SocketProces|run                           |JIoEndpoint.java              | 309|
|java.util.concurrent.ThreadPoolExecutor            |runWorker                     |ThreadPoolExecutor.java       |1110|
|java.util.concurrent.ThreadPoolExecutor$Worker     |run                           |ThreadPoolExecutor.java       | 603|
|java.lang.Thread                                   |run                           |Thread.java                   | 722|
+----------------------------------------------------------------------------------------------------------------------+"} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T01:48:41.140

这确实看起来像一个错误。我在 GitHub 上[为此创建了一个问题，](https://github.com/orbeon/orbeon-forms/issues/828)如果您想获得有关此的更新，可以观看该线程。

# facebook - Facebook 调试器抓取正确的缩略图，但 FB 没有

> ID：14764336
> 
> 赞同：2
> 
> 时间：2013-02-08T01:33:53.567
> 
> 标签：facebook, wordpress, share

[当我在Facebook Debugger](https://developers.facebook.com/tools/debug/og/object?q=http://www.moroccoenglish.com/vocabulary-works-make-or-do/)上测试我的帖子页面时，我没有收到任何错误和警告，并且它会抓取除默认缩略图之外的正确缩略图。

当我在 facebook 上分享我的帖子时，这就是我想要的结果，但它没有发生。
如何解决这个奇怪烦人的问题？

这是与我的问题相关的示例链接页面：
[http ://www.moroccoenglish.com/vocabulary-works-make-or-do/](http://www.moroccoenglish.com/vocabulary-works-make-or-do/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-14T08:22:37.423

我遇到了同样的问题。将 og:image 更改为更大的图像后，一切都解决了。我认为 og:image 应该大于 250 x250。还注意到您使用两个不同的图像两次声明了 og:image。

# java - 主线程 java.util.NoSuchElementException 中的异常

> ID：14764337
> 
> 赞同：0
> 
> 时间：2013-02-08T01:34:00.133
> 
> 标签：java

我正在做这个项目以提高我的 Java 技能。我的目标是编写一个程序，从指定的 doc 或文本文件中读取该行（取决于用户要打开的文件；分别为 int 2 或 1。），然后要求用户输入他们的文档名称（没有文件扩展名)，然后读取文档或文本文件中的第一行。我希望它根据用户的需要多次执行此操作。但是我`NoSuchElementException`在执行代码时不断得到。

```
public class switches {
    public static void main(String[] args) throws IOException {
        Scanner input = new Scanner(System.in);
        System.out.println("How many files would you like to scan?");
        System.out.println("Enter # of files to scan: ");
        int countInput = input.nextInt();
        input.close();

        for (int count = 0; count < countInput;) {
            System.out.println("Please enter a file name to scan. ");
            System.out.println("1 for .txt, 2 for .doc");
            Scanner keyboard = new Scanner(System.in);
            int choice = keyboard.nextInt();

            switch (choice) {
            default: {
                do {
                    System.out.println("Please pick "
                            + "either 1: txt or 2: doc");
                    choice = keyboard.nextInt();
                } while (choice != 1 && choice != 2);
            }
            case 1: {
                System.out.println("Txt file name:");
                keyboard.nextLine();
                String txtName = keyboard.nextLine();
                File openTxtFile = new File("C:/Users/Hp/Documents/" + txtName
                        + ".txt");
                Scanner firstTxtLine = new Scanner(openTxtFile);
                String printedTxtLine = firstTxtLine.nextLine();
                firstTxtLine.close();
                System.out.println("The first line " + "of your text file is: "
                        + printedTxtLine);
                keyboard.close();
                count++;
                break;
            }
            case 2: {
                System.out.println("Doc file name:");
                keyboard.nextLine();
                String docName = keyboard.nextLine();
                File openDocFile = new File("C:/Users/Hp/Documents/" + docName
                        + ".doc");
                Scanner firstLine = new Scanner(openDocFile);
                String printedDocLine = firstLine.nextLine();
                firstLine.close();
                System.out.println("The first line"
                        + " of your word document is: " + printedDocLine);
                keyboard.close();
                count++;
                break;
            }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T01:52:59.333

如果您删除第`input.close();`14 行上的行。这应该可以解决您的问题。根据[文档](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#nextInt%28%29)，它会抛出一个`NoSuchElementException`- “如果输入用尽”。

# python - Python中的math.log

> ID：14764339
> 
> 赞同：0
> 
> 时间：2013-02-08T01:34:18.517
> 
> 标签：python

我正在编写一个 Python 程序来在输入的数字之前打印十的所有幂。例如，如果输入为 12345，则程序应输出 10、100、1000、10000。这是我的程序 -

```
import math
limit = raw_input('Check until: ');
tenpowers=1
for i in range(1, int(limit)+1):
     if math.log(i, 10)==tenpowers:
         print 'tenpower! - ', i
         tenpowers=tenpowers+1 
```

只有当输入值小于或等于 100 时，我的程序才能正常工作。这是输出 -

```
D:\py>python prog.py
Check until: 100
tenpower! -  10
tenpower! -  100

D:\py>python prog.py
Check until: 12345
tenpower! -  10
tenpower! -  100 
```

注意我第二次输入 12345 时仍然只输出 10 和 100。这里出了什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T01:39:49.763

`math.log`使用浮点数，这些几乎总是涉及一些舍入错误。

```
>>> math.log(1000, 10)
2.9999999999999996 
```

如果您需要准确，您应该更改算法以生成 10 的幂（只需将最后的幂乘以 10）并继续，只要新的幂小于您的输入数字。

```
>>> limit = 12345
>>> power = 10
>>> while power < limit:
...     print power
...     power = power * 10
... 
10
100
1000
10000 
```

这保证是准确的，因为它不涉及任何浮点数。（而且速度也快得多）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T01:42:48.300

[浮点数学](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)又来了！查看返回的值`math.log`：

```
>>> math.log(10000, 10)
4.0
>>> math.log(1000, 10)
2.9999999999999996
>>> math.log(100, 10)
2.0
>>> math.log(10, 10)
1.0 
```

# rest - 基于单个 RESTful API 构建多个网站，我应该怎么做？

> ID：14764340
> 
> 赞同：0
> 
> 时间：2013-02-08T01:34:25.710
> 
> 标签：rest

我正在构建一个 RESTful API（在 PHP 中使用[Restler Framework v3.0](http://luracast.com/products/restler/)），我很困惑如何使用它的最佳实践。

我想使用 Rest API 对多个域（相同用户，许多域）中的用户进行身份验证并获取一些“全局”信息（例如：最新的博客文章），但我有这个问题。

### 我的问题：

1.  我应该使用 REST 而不是数据库查询吗？
2.  我应该只将 API 用于 XHR 请求吗？

* * *

**编辑：**我发现[这个问题](https://stackoverflow.com/questions/4689060/using-a-restful-api-for-dynamic-websites)和我的一样。

我想使用相同的用户构建网站，获取“最新帖子”等...如果我制作 REST API，我可以使用它来获取用户，而不是查询数据库和复制代码。

# php - 在两个以上的 php 文件中使用相同的资源（例如创建的套接字）

> ID：14764342
> 
> 赞同：1
> 
> 时间：2013-02-08T01:34:55.150
> 
> 标签：php, sockets, resources

我在 php(socketsever.php) 中编写了一个非常基本的套接字服务器。我使用 nohup 让它在后台运行。我想在其他页面中使用在 socketserver.php 中创建的套接字资源。所以当有人查看某个页面时，Server 会通过 socket 发送一些东西。我在其他页面中找不到在 socketserver 中使用套接字资源的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T03:27:28.050

我相信您正在寻找的是 SO_REUSEADDR。这将允许多个连接到 php 脚本正在侦听的端口。您可以通过在执行 socket_create 之后简单地设置此套接字选项来做到这一点。

来自[php.net的示例](http://www.php.net/manual/en/function.socket-set-option.php)

```
<?php
$socket = socket_create(AF_INET, SOCK_STREAM, SOL_TCP);

if (!is_resource($socket)) {
    echo 'Unable to create socket: '. socket_strerror(socket_last_error()) . PHP_EOL;
}

if (!socket_set_option($socket, SOL_SOCKET, SO_REUSEADDR, 1)) {
    echo 'Unable to set option on socket: '. socket_strerror(socket_last_error()) . PHP_EOL;
}

if (!socket_bind($socket, '127.0.0.1', 1223)) {
    echo 'Unable to bind socket: '. socket_strerror(socket_last_error()) . PHP_EOL;
}

$rval = socket_get_option($socket, SOL_SOCKET, SO_REUSEADDR);

if ($rval === false) {
    echo 'Unable to get socket option: '. socket_strerror(socket_last_error()) . PHP_EOL;
} else if ($rval !== 0) {
    echo 'SO_REUSEADDR is set on socket !' . PHP_EOL;
}
?> 
```

# java - 如何在已经扩展 Thread 的类中扩展 JFrame

> ID：14764345
> 
> 赞同：2
> 
> 时间：2013-02-08T01:35:40.250
> 
> 标签：java, swing, inheritance, jframe

我有一个扩展 Thread 的类，并且需要在同一个类上扩展 JFrame。由于在 Java 中不可能进行多重继承，它如何在已经扩展 Thread 的类中使用 JFrame 对象？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-08T02:24:31.167

不是扩展 JFrame 或 Thread，而是使用组合，它的限制要少得多：

```
public class MyApplication {
    JFrame applicationFrame;

    Thread someThread;

    MyApplication() {
        SwingUtilities.invokeLater(new Runnable() {
            @Override void run() {
                applicationFrame = new JFrame();

                // some more GUI initialization.
                applicationFrame.setVisible(true);
            }
        });

        someThread = new Thread(new Runnable() {
            @Override void run() {
                // do my work.
            }
        });

        someThread.start();
    }

    public static void main(String... args) {

        new MyApplication();
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T02:05:02.743

除了扩展 Thread，你可以让类实现 Runnable 吗？这样，您可以改为扩展 JFrame，将其传递给线程。

```
public class MyFrameThread extends JFrame implements Runnable {

    @Override
    public void run() {
        ...
    }
}

public static void main(String... args) {
    Thread myThread = new Thread(new MyFrameThread());
    myThread.start();
    myThread.join();
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-08T02:23:41.287

**您可以轻松地使用 JFrames 和 Threads 而无需扩展它们，并且正如大多数人所建议的那样**，您通常*最好*不要扩展它们。扩展它们会将您的类绑定到 JFrame，从而阻止您以后在 JPanel、JDialog 等中使用它。如果没有必要，为什么要像这样限制自己呢？

# php - substr 不能正常工作？

> ID：14764350
> 
> 赞同：0
> 
> 时间：2013-02-08T01:36:07.543
> 
> 标签：php

我正在创建一个论坛，目前正在研究 bbCode 部分。所有的 BBCode 都有效，但我也在实现一个表情符号系统。语法如下所示：[e]:)[/e]

我出于测试目的制作了这个字符串：

```
[b]hello world[/b] [i]i am having fun[/i] [e]:)[/e] how are you doing today?! <3[color=blue]:D[/color] 
```

它正在返回一些我不想要的东西。这是它返回的内容：

```
:)[/e] how are you doing today?! <3[color=bl 
```

这是我的代码：

```
function bbCode($str) {
     if (strpos($str, '[e]')!==false && strpos($str, '[/e]')!==false) {
          $f = strpos($str, '[e]') + 3;
          $s = strpos($str, '[/e]');
          $emote = substr($str, $f, $s);
     }
     return $emote;
} 
```

请注意 $f 和 $s 返回正确的位置，45 和 47，但 substr 没有正确切割我的字符串。为什么会这样，我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T01:39:07.010

“字符串 substr ( 字符串 $string , int $start [, int $length ] )

**返回由 start和 length**参数指定的字符串部分。"

```
$emote = substr($str, $f, $s - $f); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T01:42:48.613

substr 的第三个参数应该是您要提取的字符串的长度。将其更改为`substr($str, $f, $s - $f);`

官方文档可以在这里找到：

[http://php.net/manual/en/function.substr.php](http://php.net/manual/en/function.substr.php)

# php - 错误 101 (net::ERR_CONNECTION_RESET): - 使用 PHP 解析统计数据并将其加载到 MySQL DB

> ID：14764353
> 
> 赞同：2
> 
> 时间：2013-02-08T01:36:43.110
> 
> 标签：php, mysql, apache, connection, web-scraping

一般来说，我正在解析来自雅虎的曲棍球数据（[http://sports.yahoo.com/nhl/stats/byposition?pos=C,RW,LW,D](http://sports.yahoo.com/nhl/stats/byposition?pos=C,RW,LW,D)）。然后将其加载到 MySQL 数据库中。我通过 Xampp（在我的本地主机上）使用 PHP 和 MySQL 通过其控制面板启动此操作。

我还调整了大部分配置文件，以允许额外的内存、时间等。但请在这些方面给我留下可能的答案。

**我的错误代码是 --> Error 101 (net::ERR_CONNECTION_RESET) <--
Apache Log --> Parent: child process exited with status 3221225477 -- Restarting <--**

1）代码完美解析并获取必要的数据。

2）插入（InsertSkater（）和InsertGoalie（））也可以完美地融入数据库。

(a) 如果我只“加载”一名守门员 | RW | LW 自己或如果我加载守门员加上 LW 或 RW，PHP 脚本运行完美....
简单地说，如果我注释掉除 G 和 LW 或 RW 之外的所有内容，那么它们将正确加载和退出脚本：

```
"working" Example Only(see actual code in lower box).
   $this->_hockeyDB = new HockeyDB();
   $this->LoadStats("http://sports.yahoo.com/nhl/stats/byposition?pos=G", "G");
   $this->LoadStats("http://sports.yahoo.com/nhl/stats/byposition?pos=RW", "RW");         
   //$this->LoadStats("http://sports.yahoo.com/nhl/stats/byposition?pos=C", "C");
   //$this->LoadStats("http://sports.yahoo.com/nhl/stats/byposition?pos=LW", "LW");
   //$this->LoadStats("http://sports.yahoo.com/nhl/stats/byposition?pos=D", "D") 
```

以上将解析数据并加载 G 和 RW 的所有统计信息。然后它将成功退出。

(b) 这是主要问题：当 C、D 或任何其他组合（例如：G、LW 加上其他任何组合）的“加载”统计信息时，将按如下方式运行......程序将成功解析并仅加载它可以的内容，例如G，LW，那么它会在下一次调用 LoadStats($url, $position) 后失败。错误导致立即退出。

```
 //For example:
 $this->LoadStats("http://sports.yahoo.com/nhl/stats/byposition?pos=C", "C");
 $this->LoadStats("http://sports.yahoo.com/nhl/stats/byposition?pos=LW", "LW"); 
```

在上面，所有中心都将被解析并加载到数据库中，但是，它会退出并且不会解析或加载 LW。

(c) 我认为这可能与我正在处理的数据量有关，因为这是一个 localhost 操作。但是，即使我选择所有滑冰者的网址（总共约 673 个），它也会成功运行第一个 LoadStat。

代码如下：

--EDIT-- 删除代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T00:29:46.030

Soo 在一周没有回应后，我决定尝试彻底卸载 Xampp。然后我按照以下链接继续安装 Apache 2.4 -> Php 5.4 -> MySql5.5：

[http://lifeofageekadmin.com/how-install-apache-2-4-php-5-4-and-mysql-5-5-21-on-windows-7/](http://lifeofageekadmin.com/how-install-apache-2-4-php-5-4-and-mysql-5-5-21-on-windows-7/)

像魅力一样令人难以置信地工作。能够简化我的大部分代码:)。对于仍然遇到 Xampp/Wamp 问题的任何人，我强烈建议以干净的方式安装它们。也学了一点！

# java - Java 资源更丰富的碰撞检测

> ID：14764354
> 
> 赞同：3
> 
> 时间：2013-02-08T01:36:47.460
> 
> 标签：java, resources, collision-detection, paint

我正在用 java 制作一个游戏，其中涉及角色在地图上移动并通过从文本文件中读取某些数据在地图周围放置一些固体碰撞对象（即建筑物）。将有多个地图，这些对象的位置会发生变化。**我的问题**是用某种颜色绘制一个矩形，以指示此类结构后面的碰撞，**或者**读取鼠标坐标并搜索这些结构的数组以查看该点是否位于建筑物上，从而拒绝移动或更改，更加机智和/ 或更快。如果绘制一个矩形是最好的，将其留在结构后面或在检测到碰撞后将其删除会更好。谢谢你的时间！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T02:11:22.847

在我大学三年级的时候，我研究了 Windows Phone 的碰撞检测系统算法。它几乎不是完美的，但它非常高效，可以适应大多数游戏。

它的工作方式非常简单。有两种类型的对象；可碰撞对象（例如敌人或建筑物）以及您希望检查与这些可碰撞对象的碰撞的对象。

当我学习数据结构课程并谈到链接列表时，我就有了这个想法。我想如果每个链接都是一个可碰撞的对象，你可以粘贴已经在其中创建的游戏对象。然后当游戏对象四处移动时，您将有一种轻量级的方法来检查它们的位置是否有碰撞。于是我的系统诞生了。

它实际上是一个在每个游戏周期或您选择检查碰撞时触发的类。你给它你的玩家位置，或子弹位置或任何你想查看的物体是否与某物发生碰撞，它会搜索所有可碰撞的物体位置并进行测试以查看它们是否重叠。

当您添加第二个元素（位置和象限）时，它的真正效率就会发挥作用

例如，如果我将手机屏幕分成几部分，并且我知道我的玩家或子弹在哪个象限，我可以选择只扫描该象限内的可碰撞对象列表。从而将您的搜索算法缩减到其原始大小的四分之一。 ![在此处输入图像描述](../Images/910fb06168275e7bf0d608818212370f.png)

检测碰撞有许多不同的方法。这是我在课堂上使用的一个简单示例，用于展示如何检测两个实际上是正方形的圆相撞。正如您所看到的，只需获取圆的中心点坐标和半径，您就可以计算斜边并确定它们在哪里或是否接触。 ![在此处输入图像描述](../Images/dfa88bcf01a32b1f83cc77286a543dd0.png)

祝你好运！如果您有任何问题随时问！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T04:31:56.580

这篇[文章](https://forums.oracle.com/forums/thread.jspa?threadID=1349483)中的最后一个回复可能会对您有所帮助。这是一个简单的迷宫。迷宫的结构由一个数据文件控制，该文件仅包含 0、1 来表示路径或墙壁。您使用箭头键在迷宫中导航。当按下箭头键时，代码会检查以确保下一个方格不是墙。

# linux - 服务器发送复位信号而不是 FIN

> ID：14764359
> 
> 赞同：0
> 
> 时间：2013-02-08T01:37:05.140
> 
> 标签：linux, sockets, networking, tcp

我正在学习 tcp-ip 堆栈、服务器-客户端连接。我写了一个简单的客户端服务器。客户端和服务器能够毫无问题地相互传输数据。我在同一台机器上运行客户端和服务器。当我使用 ctrl+c 关闭服务器时，我发现内核发送的是 RST 信号而不是 FIN。（请参考我的问题：[服务器套接字的主动关闭](https://stackoverflow.com/questions/14737896/active-closure-of-server-sockets)）

稍加调查后，我意识到我的一个客户端处于读取调用中，并且相应的服务器线程处于无限循环，而无所事事（我的一些错误的愚蠢编码）。但是当我删除那个无限循环时，我看到了预期的行为。我可以看到 FIN 被双向发送。

所以，我想知道为什么 tcp 层在第一种情况下发送 RST。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T01:51:18.853

最终，您放弃等待另一端接受数据。

# r - 将秒数转换为持续时间

> ID：14764361
> 
> 赞同：2
> 
> 时间：2013-02-08T01:37:13.813
> 
> 标签：r, lubridate

我只是从R开始。

我的数据在一个 csv 文件中。这是一个摘录：

```
p,   t,  a,           b,           c
p01, t1, 4292.226015, 4292.226015, 0.0
p01, t3, 693.795607,  693.795607,  0.0
p02, t1, 262.798468,  262.798468,  0.0
p02, t2, 113.381499,  113.381499,  0.0
p02, t3, 325.854107,  325.854107,  0.0
p02, t4, 428.073246,  428.073246,  0.0
p02, t5, 319.010848,  319.010848,  0.0 
```

...我正在像这样加载它：

```
data <- read.csv(file='data.csv',head=TRUE,sep=',') 
```

最后三列是持续时间值（以秒为单位），我希望它们成为 lubridate 的`duration`对象。我怎样才能做到这一点？

我尝试在加载 csv 后转换列，如下所示：

```
data$a <- dseconds(data$a)
data$b <- dseconds(data$b)
data$c <- dseconds(data$c) 
```

......起初它似乎工作。除了，当我要求总结时，有几个警告我在解释时遇到了一些麻烦：

```
> summary(tasks)
group  task  a               b               c
p01:2  t1:2  Min.   : 113.4  Min.   : 113.4  Min.   :0  
p01:5  t2:1  1st Qu.: 290.9  1st Qu.: 290.9  1st Qu.:0  
       t3:2  Median : 325.9  Median : 325.9  Median :0  
       t4:1  Mean   : 919.3  Mean   : 919.3  Mean   :0  
       t5:1  3rd Qu.: 560.9  3rd Qu.: 560.9  3rd Qu.:0  
             Max.   :4292.2  Max.   :4292.2  Max.   :0  
Warning messages:
1: In quantile.default(object) :
  Class 'Duration' has no 'names' slot; assigning a names attribute will create an invalid object
2: In summary.default(X[[3L]], ...) :
  Class 'Duration' has no 'names' slot; assigning a names attribute will create an invalid object
3: In summary.default(X[[3L]], ...) :
  Setting class(x) to multiple strings ("summaryDefault", "table", ...); result will no longer be an S4 object
> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T01:59:42.760

这是一个警告。`summary`尝试将持续时间对象转换为类您`c("summaryDefault", "table")` 可以像这样重现它：

```
 class(data$a) <- c("summaryDefault", "table")
Warning message:
In class(dat$da) <- c("summaryDefault", "table") :
  Setting class(x) to multiple strings ("summaryDefault", "table", ...); 
          result will no longer be an S4 object. 
```

例如，您可以定义如何将`Duration`类强制转换为`table`类。

```
 setAs("Duration", "table", function(from) from@.Data) ## dummy coercion here 
```

现在我可以在没有警告的情况下应用摘要

```
 summary(dat)
      p                  t                   a                b                c           da      
 Length:7           Length:7           Min.   : 113.4   Min.   : 113.4   Min.   :0   n.vars :0     
 Class :character   Class :character   1st Qu.: 290.9   1st Qu.: 290.9   1st Qu.:0   n.cases:6435  
 Mode  :character   Mode  :character   Median : 325.9   Median : 325.9   Median :0                 
                                       Mean   : 919.3   Mean   : 919.3   Mean   :0                 
                                       3rd Qu.: 560.9   3rd Qu.: 560.9   3rd Qu.:0                 
                                       Max.   :4292.2   Max.   :4292.2   Max.   :0 
```

# jpql - 如何使用@Query 表示法只返回第一个结果？

> ID：14764364
> 
> 赞同：2
> 
> 时间：2013-02-08T01:37:33.147
> 
> 标签：jpql, spring-data, spring-data-jpa

我正在使用通过 Spring Framework 中的 @Query 注释定义的方法进行查询。

```
@Transactional(readOnly=true)
@Query("SELECT x FROM X x ORDER BY x.id ASC")
List<X> findLowest(); 
```

我目前正在返回一个项目列表，但我真的只想返回第一个。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T11:40:17.260

首先，您应该像这样将 Pageable 对象添加到您的方法中：

```
@Transactional(readOnly=true)
@Query("SELECT x FROM X x ORDER BY x.id ASC")
List<X> findLowest(Pageable pageable); 
```

并以这种方式使用：

```
Pageable firstResult = new PageRequest(0, 1);
List<X> result = repository.findLowest(firstResult); 
```

这样，您可以再次使用此方法。

# python - Windows 上 Python 中使用 cmd 模块的 pyreadline 自动完成的奇怪行为

> ID：14764370
> 
> 赞同：0
> 
> 时间：2013-02-08T01:38:09.190
> 
> 标签：python, autocomplete, cmd, readline

我正在尝试运行这个简单的代码：

*   Python 2.7.2
*   Windows 7的
*   从 pip 安装的 pyreadline

    ```
    class HelloWorld(cmd.Cmd):
        """Simple command processor example."""

        FRIENDS = [ 'Alice', 'Adam', 'Barbara', 'Bob', 'Chris' ]

        def do_greet(self, person):
            "Greet the person"
            if person and person in self.FRIENDS:
                greeting = 'hi, %s!' % person
            elif person:
                greeting = "hello, " + person
            else:
                greeting = 'hello'
            print greeting

        def complete_greet(self, text, line, begidx, endidx):
            if not text:
                completions = self.FRIENDS[:]
            else:
                completions = [ f
                                for f in self.FRIENDS
                                if f.startswith(text)
                                ]
            return completions

        def do_EOF(self, line):
            return True

    if __name__ == '__main__':
        HelloWorld().cmdloop() 
    ```

似乎自动完成不起作用。当我运行它并输入：

```
(Cmd) greet A<tab> 
```

它没有给出自动补全建议，但应该给出“Alice Adam”。

但是，当我输入：

```
(Cmd) greet C<tab> 
```

它正确地使用“Chris”自动完成。因此，这似乎与自动完成是否有多个匹配项有关。

有没有人有解释或知道如何解决这个问题？

谢谢！

**编辑：**删除了剩余的短语。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T02:56:05.133

好的，我想通了。pyreadlineconfig.ini 文件位于错误的目录中。

我遵循了[在 Windows 上的 iPython 中不工作的模糊选项卡完成中的修复](https://stackoverflow.com/questions/3771837/ambiguous-tab-completion-not-working-in-ipython-on-windows)

它说将此文件复制到％HOMEPATH％。原来这个环境变量在我的电脑上配置错误，文件被复制到 e:\pyreadlineconfig.ini。

正确的路径，但应该是 c:\users\username。

# algorithm - 计算最大独立集的算法的正确性

> ID：14764374
> 
> 赞同：1
> 
> 时间：2013-02-08T01:39:25.357
> 
> 标签：algorithm, graph, graph-theory

我正在尝试找到无向图的最大集，这是我用来这样做的算法：

1) 选择边数最少的节点 2) 消除它的所有邻居 3) 从其余节点中，选择边数最少的节点 4) 重复这些步骤，直到覆盖整个图

有人能告诉我这是否正确吗？如果不是，那么为什么这种方法在计算图中的最大独立集时是错误的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T01:53:46.540

您所描述的将选择一个最大的独立集。我们可以看到如下：

1.  **这产生了一个独立的集合。**通过矛盾，假设它没有。然后必须有两个由边连接的节点，这些节点被添加到您生成的集合中。先取其中一个（称它为 u，另一个为 v）然后当它被添加到集合中时，您将从集合中删除其所有相邻节点，包括节点 v。然后 v 不会已被添加到集合中，从而产生矛盾。

2.  **这产生了一个最大的独立集。**通过矛盾，假设它没有。这意味着有一些节点 v 可以添加到您的算法生成的独立集合中，但没有添加。由于未添加此节点，因此它必须已通过算法从图中删除。这意味着它必须与已添加到集合中的某个节点相邻。但这是不可能的，因为这意味着如果不使结果不是独立集，就不能将节点 v 添加到生成的独立集。我们有矛盾。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T01:51:24.307

任何图中都没有一个确定的最大独立集；以3个节点的循环为例，每个节点形成一个最大独立集。您的算法将为您提供图形的最大独立集之一，但不保证它具有最大基数。

另一方面，在图中找到最大独立集是 NP 完全的（因为该问题与找到最大团的问题是互补的），因此可能没有有效的算法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T02:00:53.283

在您在评论中澄清情况后，您的解决方案是**正确的**。更好的是，根据本文[http://courses.engr.illinois.edu/cs598csc/sp2011/Lectures/lecture_7.pdf](http://courses.engr.illinois.edu/cs598csc/sp2011/Lectures/lecture_7.pdf)的推论 3， 您可以获得子集顺序的*良好*近似值。 `Greedy gives a 1 / (d + 1) -approximation for (unweighted) MIS in graphs of degree at most d`

# xslt - 为什么 xslt output encoding=utf-8 不转换 iso-8859-1 字符？

> ID：14764376
> 
> 赞同：5
> 
> 时间：2013-02-08T01:39:29.060
> 
> 标签：xslt, character-encoding

为什么将输出编码设置为 utf-8 时，输出文件中的 iso-8859-1 字符未转换为 utf-8？

我有一个 iso-8859-1 编码的 xml 输入文件，并声明了编码。我想以 utf-8 输出它。我的理解是在 xslt 文件中设置输出编码应该管理字符转换。

我的理解错了吗？如果不是，为什么下面的简单测试用例会在 utf-8 声明的输出文件中输出 iso-8859-1 字符？

我的输入文件如下所示：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<data>ö</data> 
```

我的变换如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
>
    <xsl:output encoding="UTF-8" />
    <xsl:template match="/">
        <result>
            <xsl:value-of select="." />
        </result>
    </xsl:template>
</xsl:stylesheet> 
```

从命令行使用 saxon9he，我的结果如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<result>ö</result> 
```

根据 BabelPad，我的结果文件中的 ö 是 0xF6，这是一个无效的 utf-8 字符。ö 似乎没有受到转换的影响。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T08:05:12.137

我可以看到两种可能的解释（认为可能还有其他解释）。

(a) 序列化的最后阶段，即将字符转换为字节，不是由 XSLT 处理器完成，而是由一些其他无法访问样式表的软件完成。例如，如果您在将输出发送到 Writer 而不是 OutputStream 的 Java 应用程序中运行转换 - Writer 将使用平台默认编码（可能是 iso-8859-1）将字符转换为字节。

(b) 您在显示器中看到的八位位组不是存储在磁盘上的八位位组，而是它们的一些转换。当您将文件加载到编辑器中然后要求十六进制显示时，可能会发生这种情况；在某些情况下，您将获得编辑器在内存中表示的文档的十六进制显示，而不是存储在磁盘上的内容。

# perl - Perl IPC::Run，在父进程死亡时终止进程

> ID：14764377
> 
> 赞同：3
> 
> 时间：2013-02-08T01:39:32.020
> 
> 标签：perl, signals

是否可以给[IPC::Run](http://search.cpan.org/~toddr/IPC-Run-0.92/lib/IPC/Run.pm)一个选项，它会在父进程死亡时终止进程？或者当父进程死亡时杀死子进程的简单方法？我知道我可以通过在父级中捕获信号来做到这一点，但如果已经存在一种简单的方法来做到这一点，我宁愿不重新发明轮子。我知道这可能不会抓住`SIGKILL`，但没关系，我打算以更合理的方式杀死父母。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T02:46:56.277

使用 END 块进行清理。

```
my @ipc_run_harnesses;
END { $_->kill_kill for @ipc_run_harnesses }

...
for my $start ( 1..2 ) {
    push @ipc_run_harnesses, IPC::Run::start( "while true; do sleep 1; echo running $start; done" );
}
sleep 10;
exit; 
```

# javascript - 将事件监听器添加到锚点以提示谷歌地图 api v3 中的信息窗口

> ID：14764382
> 
> 赞同：0
> 
> 时间：2013-02-08T01:39:55.743
> 
> 标签：javascript, loops, google-maps-api-3, addeventlistener

我是 javascript 的初学者，我知道我的代码有点乱。我觉得我可能在这里踩到了自己的脚，但我真的希望有一些解决方法。

我想知道将事件侦听器添加到锚点的最佳方法是什么。现在，我有一个循环来设置地图上的所有标记（所以我不必每次都为每个标记编写代码行）但回头看我想知道是否有办法添加现在是一个事件监听器。

我在页面上有一个链接列表，我有一个充满数据的数组，用于标记各种事物。我需要的是能够单击链接（其中显示“映射它！”）并提示信息窗口，然后我需要切换它以便在打开另一个时关闭它

该网站可以在这里找到：http: [//www.michiganwinetrail.com](http://www.michiganwinetrail.com) 这里是完整的 javascript 页面 [http://www.michiganwinetrail.com/mainmap2.js](http://www.michiganwinetrail.com/mainmap2.js)

我需要编辑的循环代码（可以在该 javascript 链接的底部找到）如下：

```
function loadMap() {

var centerMich = new google.maps.LatLng(44.229457, -85.100098);
var myOptions = {
    center: centerMich,
    zoom: 7,
    scrollwheel: false,
    mapTypeId: google.maps.MapTypeId.ROADMAP
    };

map = new google.maps.Map(document.getElementById("mainMichMap"), myOptions);

var homesouthwestDiv = document.createElement('div');
var homenorthwestDiv = document.createElement('div');
var homesoutheastDiv = document.createElement('div');
homesouthwestDiv.index = 1;
homenorthwestDiv.index = 2;
homesoutheastDiv.index = 3;
var homeControl = {
southwest: swRegions(homesouthwestDiv, map),
northwest: nwRegions(homenorthwestDiv, map),
southeast: seRegions(homesoutheastDiv, map),
};

map.controls[google.maps.ControlPosition.RIGHT_TOP].push(homesouthwestDiv);
map.controls[google.maps.ControlPosition.RIGHT_TOP].push(homenorthwestDiv);
map.controls[google.maps.ControlPosition.RIGHT_TOP].push(homesoutheastDiv);

for (var i=0; i<=locations.length; i++) {

        locations[i][0] = new google.maps.Marker({
        position: new google.maps.LatLng(locations[i][1], locations[i][2]),
        title: locations[i][3],
        map: map,
        content:  locations[i][4]});

        var infowindow = new google.maps.InfoWindow({
});

        google.maps.event.addListener(locations[i][0], 'click', function() {
        infowindow.setContent(this.content);
        infowindow.open(map,this);
});

}

} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-08T03:17:44.637

单击链接时，您需要执行以下操作：

```
var myHtml = "<h2 class=\"firstHeading\">" + winery.name + "</h2>";
map.openInfoWindowHtml(new GLatLng(winery.fltLat, winery.fltLng), myHtml); 
```

我前段时间做过一个类似的演示：http: [//dipoletech.com/beermenu/](http://dipoletech.com/beermenu/)

# google-bigquery - 访问 google bigquery 和云存储所需的主机和端口

> ID：14764386
> 
> 赞同：3
> 
> 时间：2013-02-08T01:40:18.483
> 
> 标签：google-bigquery

我想从默认阻止外部网络访问的数据中心测试 bq 和 gsutil。为了访问 bigquery 和云存储，需要打开哪些主机和端口？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T17:20:55.447

您应该能够使用标准 HTTPS 连接（即端口 443）访问 BigQuery API 和 OAuth API 端点。

# jquery - 如何在jQuery中添加和删除事件？

> ID：14764391
> 
> 赞同：0
> 
> 时间：2013-02-08T01:40:47.710
> 
> 标签：jquery

我有一个图像，它在 .cs 文件中定义了“a href”标记的 InnerHTML，如下所示。

```
HtmlGenericControl _divToolTipContainer = new HtmlGenericControl("div");
_divToolTipContainer.InnerHtml = "<a href=\"javascript:__doPostBack('" + btnItemThumbnail.ClientID.Replace("_", "$") + "','')\">" +
                              <img src='" + string.Format("ItemPreview.axd/{0}/width-250/height-328/", item.ID.ToString()) + "'></a>; 
```

现在我想要的是让这个“a href”事件“删除”说如果条件是（假），否则通过使用 jQuery 再次“添加”事件。示例代码如下所示。

```
var objectDiv = document.getElementById(oElementId);    // get the object id 

If (false){ // condition here
    remove the event of the a href tag..
    jquery code must be added here..
}else{
    add the event again of the a href tag..
    jQuery code must be added here..
} 
```

这个怎么做？

谢谢

杰森

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T02:01:27.903

```
if (false) {
    $('#oElementId').off('click', function() {});
} else {
    $('#oElementId').on('click', function() {});
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T01:43:39.667

您也可以使用 jQuery 通过 ID 选择元素，所以

```
(function($) {

    var objectDiv = $("#"+oElementId);    // get the object id 

    if(false)
    { // condition here
        objectDiv.removeAttr("href"); 
    }
    else
    {
         objectDiv.attr("href", "javascript:__doPostBack('" + btnItemThumbnail.ClientID.Replace("_", "$") + "','')");
    } 

})(jQuery); 
```

编辑：您可能必须将代码包装在 (function($) 中，以确保您的代码使用 $ for jQuery

# objective-c - 播放带有通知的视频

> ID：14764400
> 
> 赞同：0
> 
> 时间：2013-02-08T01:42:02.570
> 
> 标签：objective-c, ios6, mpmovieplayercontroller

我正在使用以下内容播放名为 intro 的视频

```
- (IBAction)PlayIntro:(id)sender {
    NSString *videoPath = [[NSBundle mainBundle] pathForResource:@"intro" ofType:@"m4v"];
    introplayer = [[MPMoviePlayerViewController alloc] initWithContentURL:[NSURL fileURLWithPath:videoPath]];
    [self presentMoviePlayerViewControllerAnimated:introplayer];
} 
```

我在设置通知时遇到问题，以便在视频播放完毕后会发生以下`[self performSegueWithIdentifier:@"IntroS" sender:sender];`任何帮助，我们将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T02:24:55.460

你应该为你的 MPMoviePlayerController 设置 KVO。当电影的状态发生变化时，它会触发，让您有机会将总播放时间与当前播放时间进行比较。

鉴于您的代码片段，这一行将为您提供当前的播放值：

```
NSLog(@"Movie player state: %g", introplayer.currentPlaybackTime); 
```

我提供了一个关于 KVO 如何使用与视频播放无关的示例[的简要概述。](https://stackoverflow.com/questions/14703985/how-to-reload-text-inside-uitablecell-using-afnetworking/14704316#14704316)

尽管该主题与视频无关，但无论您使用 KVO 观看什么变量，它的工作原理都是一样的。

# php - 如何循环显示视频播放器

> ID：14764402
> 
> 赞同：0
> 
> 时间：2013-02-08T01:42:35.760
> 
> 标签：php, javascript, jquery, jwplayer

我正在使用 JW 视频播放器，它为单个视频实现的方式如下

```
<div id="myElement">Loading the player...</div>

<script type="text/javascript">

jwplayer("myElement").setup({
    file: "<?php echo $dbVideoFile; ?>"
});

</script>

</div> 
```

不，我想要做的是循环浏览每个现有视频并为每个视频显示一个 jw 视频播放器。唯一的问题是它不能很好地工作，它只显示一个视频的 jsplayer，其他视频除了空白什么都不显示。我在下面做错了什么：

```
 <p>
<?php foreach ($arrVideoFile[$key] as $v) { ?>
<div id="myElement">Loading the player...

<script type="text/javascript">

jwplayer("myElement").setup({
    file: "<?php echo 'VideoFiles/'.$v; ?>"
});

</script>

</div>
<?php } ?>
</p> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T01:44:45.440

id 标签应该是 unic，所以 JWPlayer 在调用 #myElement 时会感到困惑

尝试增加一个值并动态重命名“myElement-”+ i

我没有去测试，但应该工作：

```
 <p>
<?php 
$i = 0;
foreach ($arrVideoFile[$key] as $v) { ?>
<div id="myElement-<?php echo $i; ?>">Loading the player...

<script type="text/javascript">

jwplayer("myElement-<?php echo $i; ?>").setup({
    file: "<?php echo 'VideoFiles/'.$v; ?>"
});

<?php $i++; ?>
</script>

</div>
<?php } ?>
</p> 
```

# hadoop - 如何在 hadoop 中显示确切的工作细节？

> ID：14764410
> 
> 赞同：0
> 
> 时间：2013-02-08T01:43:33.687
> 
> 标签：hadoop

假设我运行`hadoop jar ... -mapper path_to_a -reducer path_to_b`并且它的作业 id 是`job_id_xxx`.

相反，我怎么知道得到类似`hadoop jar ... -mapper path_to_a -reducer path_to_b`from 的东西`job_id_xxx`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T19:03:16.607

如果作业仍在运行，您可以使用`ps`as 对于任何 shell 命令来查找参数。

# c++ - 如何在另一个类中访问一个类的成员函数？

> ID：14764412
> 
> 赞同：2
> 
> 时间：2013-02-08T01:43:42.333
> 
> 标签：c++, class

我无法在另一个类中访问一个类的成员函数，尽管我可以在 main() 中很好地访问它。我一直在尝试改变事情，但无法理解我做错了什么。任何帮助，将不胜感激。

这是产生错误的行：

```
cout << "\n\nRetrieve key from inside Envelope class: " << e.getData() << "\n\n"; 
```

这是代码：

```
class Record{
  private:
    string key;
  public:
    Record(){ key = ""; }
    Record(string input){ key = input; }
    string getData(){ return key; }
    Record operator= (string input) { key = input; }
};

template<class recClass>
class Envelope{
  private:
    recClass * data;
    int size;

  public:
    Envelope(int inputSize){
      data = new recClass[inputSize];
      size = 0;
    }
    ~Envelope(){ delete[] data; }
    void insert(const recClass& e){
      data[size] = e;
      cout << "\n\nRetrieve key from inside Envelope class: " << e.getData() << "\n\n";
      ++size;
    }
    string getRecordData(int index){ return data[index].getData(); }
};

int main(){

  Record newRecord("test");
  cout << "\n\nRetrieve key directly from Record class: " << newRecord.getData() << "\n\n";

  Envelope<Record> * newEnvelope = new Envelope<Record>(5);
  newEnvelope->insert(newRecord);
  cout << "\n\nRetrieve key through Envelope class: " << newEnvelope->getRecordData(0) << "\n\n";

  delete newEnvelope;
  cout << "\n\n";
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-08T01:47:45.837

`e`您作为常量引用传递`void insert(const recClass& e){`
然后您正在调用`getData()`未声明为常量的方法（）。

`getData()`您可以通过像这样重写来修复它：

```
string getData() const{ return key; } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-08T01:48:20.900

您必须声明它可以从上下文`getData()`中调用。你的函数需要 a所以你想这样做：`const``const``insert``const recClass& e``Record`

```
string getData() const { return key; } 
```

# jquery - 如何使 CTRL+N 在 Hotkeys JQuery 插件上工作？

> ID：14764415
> 
> 赞同：2
> 
> 时间：2013-02-08T01:44:04.103
> 
> 标签：jquery, jquery-hotkeys

我正在使用以下插件： [链接](http://code.google.com/p/js-hotkeys/)

我相信这是 JQuery 社区中最常用的一个：

我在尝试使 ctrl+N 工作时遇到问题，请参见下面的代码：

```
 $(document).bind('keydown', 'ctrl+N', function () {
        alert("");
        return false;
    }); 
```

当我在 chrome 上运行它时，它会打开一个新窗口，这是浏览器的常用快捷方式

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T01:50:18.687

无法在 Google Chrome 中捕获 Ctrl N、Ctrl T、Ctrl W 键和这些键的移位变体。

正在努力创建一个 API，允许捕获这些键，而不会出现与覆盖浏览器保留的快捷键相关的问题。请参阅[http://code.google.com/p/chromium/issues/detail?id=119881](http://code.google.com/p/chromium/issues/detail?id=119881)。

# bash - 想做：“for x in `ls`; do cd $x ; get.exp $x ; cd .. ; done” 但在我的 EXPECT 脚本中

> ID：14764421
> 
> 赞同：0
> 
> 时间：2013-02-08T01:44:52.837
> 
> 标签：bash, tcl, expect

基本上就像标题所说的那样......

我想 ls 我当前正在其中运行我的脚本的目录，对于目录中的每个文件夹，cd 进入该目录并使用文件夹名称作为参数执行我的脚本。

即：在`${HOME}`我有2个目录说'31'和'32'（总是这样的数字和增量）

因此，在我的脚本中，我将 cd in 31，将一些文件从另一台机器 cd .. 同步到该目录，然后 cd 进入 32 并重复直到没有更多文件夹。

我的所有东西都可以使用我当前的 get.exp 并运行：

```
for x in ls; do cd $x ; get.exp $x ; cd .. ; done 
```

作为 bash 别名。但我很想删掉别名...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T01:56:58.700

您的循环的 tcl 等效项是

```
foreach x [glob -nocomplain *] {
    cd $x
    exec get.exp $x
    cd ..
} 
```

您也许可以简化它（也许只是使用`source get.exp`或调用适当的过程），但这是相同的基本思想。

# javascript - javascript的平滑旋转问题

> ID：14764423
> 
> 赞同：2
> 
> 时间：2013-02-08T01:45:25.487
> 
> 标签：javascript, canvas, html5-canvas

我已经到处寻找解决我的平滑旋转问题的方法。我可以让它 99% 正常工作，但是有一个小问题一直困扰着我。除非目标发生剧烈变化，否则旋转工作正常。基本思想是我有一个球和一个球员，当球员接触到球时，他会改变球的方向和速度。球员正确地跟随球，但是当他与球接触或球的位置被重置，从而使角度之间的增量大于 45 度时，球员会立即跳起来接球。这是我部分工作的代码。感谢您提前提供任何帮助。

```
var newFacing = Math.atan2(theBall.y-player.y,theBall.x-player.x);
var diff = (Math.abs(newFacing) - Math.abs(player.facing));
if (diff < Math.PI*0.1 && diff > -Math.PI*0.1){
    player.facing = newFacing;
}else if (diff > Math.PI) {
    player.facing -= Math.PI*0.1;
} else {
    player.facing += Math.PI*0.1;
} 
if (player.facing > Math.PI) {
    player.facing -= Math.PI*2;
} else if (player.facing < -Math.PI) {
    player.facing += Math.PI*2;
} 
```

更新：更改了 || 到 && 并添加了一个条件以确保我不会高于或低于 PI 弧度。在某些角度仍然存在一些奇怪的旋转问题。例如，如果球从球员下方经过，他将顺时针旋转而不是逆时针顺时针旋转。有时，球员会在再次跟踪球之前进行完整的 360 度测量。如果不追踪它，我不确定是什么条件导致了这种情况。

# sql - 在非主键上连接表并获得类似于完全外连接的结果

> ID：14764427
> 
> 赞同：0
> 
> 时间：2013-02-08T01:46:08.317
> 
> 标签：sql, oracle, join

```
Table A                 
Column A    Column B    Column C    Column D            
1           AA          A1          B1          
2           BB          A2          B2          
3           CC          A3          B3          
4           DD          A4          B4          

Table - B                       
Column E    Column F    Column G    Column H            
1           AA          A1          1234            
2           BB          A2          2345            
3           EE          A3          6767            
4           FF          A4          5555            

Result Table [Joining on Column B and Column C with Column C and Column D that are not primary keys]    
Column B    Column C    Column D    Column H            
AA          A1          B1          1234            
BB          A2          B2          2345            
CC          A3          B3          NULL            
DD          A4          B4          NULL            
EE          A3          NULL            6767            
FF          A4          NULL            5555 
```

我尝试使用完整的外部连接，但没有看到预期的结果。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T01:50:10.203

假设您需要加入`ColumnB`to`ColumnF`和`ColumnC`to `ColumnG`，您有几个选择来获得上述结果（假设这些是您的预期结果）。

一种选择是使用`UNION`.

```
SELECT A.ColumnB, A.ColumnC, A.ColumnD, B.ColumnH
FROM TableA A
  LEFT JOIN TableB B ON A.ColumnB = B.ColumnF AND A.ColumnC = B.ColumnG
UNION 
SELECT B.ColumnF, B.ColumnG, NULL, B.ColumnH
FROM TableB B
  LEFT  JOIN TableA A ON B.ColumnF = A.ColumnB  AND A.ColumnC = B.ColumnG
WHERE A.ColumnB IS NULL 
```

这是[SQL Fiddle](http://sqlfiddle.com/#!4/3e31e/1)。

另一种选择是使用 `COALESCE`and `FULL OUTER JOIN`：

```
SELECT COALESCE(A.ColumnB,B.ColumnF), 
  COALESCE(A.ColumnC,B.ColumnG), A.ColumnD, B.ColumnH
FROM TableA A
  FULL OUTER JOIN TableB B ON A.ColumnB = B.ColumnF AND A.ColumnC = B.ColumnG 
```

还有更多[小提琴](http://sqlfiddle.com/#!4/3e31e/5)。

它们都应该产生相同的结果。

**- 编辑**

假设您想要的结果是从输出中删除 NULL 值，那么这样的事情应该可以工作：

```
SELECT COALESCE(A.ColumnB,B.ColumnF), 
  COALESCE(A.ColumnC,B.ColumnG), 
  COALESCE(A.ColumnD,A2.ColumnD),
  COALESCE(B.ColumnH,B2.ColumnH)
FROM TableA A
  FULL OUTER JOIN TableB B ON A.ColumnB = B.ColumnF AND A.ColumnC = B.ColumnG
  LEFT JOIN TableA A2 ON B.ColumnG = A2.ColumnC
  LEFT JOIN TableB B2 ON A.ColumnC = B2.ColumnG 
```

还有更多小提琴：[http ://sqlfiddle.com/#!4/32b3e/1](http://sqlfiddle.com/#!4/32b3e/1)

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T02:37:08.883

`B/C`我认为对不同和组合进行预查询会相当简化`D/F`......然后使用它作为基础来重新加入`table A`并`B`根据需要获取额外的列。就像是

```
select
      PreQuery.Col1 as ColumnA,
      PreQuery.Col2 as ColumnB,
      A2.ColumnD,
      B2.ColumnH
   from
      ( select distinct 
              a.ColumnB as Col1,
              a.ColumnC as Col2
           from
              TableA a
        UNION
        select 
              b.ColumnF as Col1,
              b.ColumnG as Col2
           from
              TableB b ) PreQuery
      LEFT JOIN TableA A2
         on PreQuery.Col1 = A2.ColumnB
        AND PreQuery.Col2 = A2.ColumnC
      LEFT JOIN TableB B2
         on PreQuery.Col1 = B2.ColumnF
        AND PreQuery.Col2 = B2.ColumnG 
```

如果您实际上不想`NULL`显示，请使用

```
COALESCE( A2.ColumnD, "" ) 
```

与 ColumnH 相同

# iphone - 通过 nib 添加到 UICollectionViewCell contentView

> ID：14764432
> 
> 赞同：3
> 
> 时间：2013-02-08T01:46:52.153
> 
> 标签：iphone, ios, objective-c, ipad

有没有办法通过 xib 将 UICollectionViewCell 的子视图添加到 contentView？因为我认为这是正确的方法吗？我认为当我通过 xib 拖放 UI 时，它会被放入视图而不是 contentView

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T05:26:49.357

您可以执行类似于通过 nib 填充 TableViewCell 的操作。

*   创建一个笔尖

*   使用适当的唯一标签将子视图添加到其中

*   使用您创建的单元格注册 Collectionview

    UINib *cellNib = [UINib nibWithNibName:@"ECVCell" bundle:[NSBundle mainBundle]]; [self.collectionView registerNib:cellNib forCellWithReuseIdentifier:@"ECVCell"];

*   使用`viewWithTag:`方法获取方法内添加视图的`cellForItemAtIndexPath` 实例

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-08T03:16:05.337

当您将任何视图拖放到 UICollectionViewCell XIB 中时，您将拖动到 cell.contentView，而不是 cell.view。

请检查 didSelect，您将看到所有子视图

```
- (void)collectionView:(UICollectionView *)collectionView didSelectItemAtIndexPath:(NSIndexPath *)indexPath{
    MyCell *cell = (MyCell*)[collectionView cellForItemAtIndexPath:indexPath];
    NSArray *views = [cell.contentView subviews];
    NSLog(@"Select %@",views);
} 
```

# soap - 使用 ksoap2 的 SOAP 操作

> ID：14764433
> 
> 赞同：0
> 
> 时间：2013-02-08T01:46:55.307
> 
> 标签：soap, wsdl, ksoap2, android-ksoap2, ksoap

我正在尝试调用一个 SOAP Web 服务，该 WSDL 文件看起来像这样：

```
<wsdl:service name="API">
    <wsdl:port binding="tns:API" name="API">
        <soap:address location="https://secure.server.com/clients/api/api.php"/>
    </wsdl:port>
</wsdl:service> 
```

我正在为 Android 使用 ksoap2 库。我应该使用什么 SOAP Action 值来拨打电话？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T11:01:07.037

这取决于您对 WSDL 文件使用的是**RPC/literal**还是**Document/literal**类型。- 对于 RPC/literal，您应该指定方法名称，即您在 WS 上调用的函数的名称。所以action其实就是方法名。- 对于 Document/literal，方法未在请求的 XML 中指定。所以 action 为 null 或空字符串

如果您是 WS 开发人员，我强烈建议您使用 RPC/literal 类型（请参阅此处的差异：http: [//www.ibm.com/developerworks/webservices/library/ws-whichwsdl/](http://www.ibm.com/developerworks/webservices/library/ws-whichwsdl/)）如果不是，请检查类型和按照这个去做。因此，如果它是 RPC/literal，那么 SOAP Action 就是您在 WS 上调用的方法名称。

# iphone - prepareforSegue tableViewCell 到不同的 detailTableViews

> ID：14764435
> 
> 赞同：1
> 
> 时间：2013-02-08T01:47:16.437
> 
> 标签：iphone, master-detail, tableviewcell

我在带有数组的 viewController 中有一个 tableView（3 个 labelTitles 到 3 个不同的 detailViews）。我的问题出在 prepareForSegue 方法中，我真的不知道如何调用 detailViews。我使用正确的 segue 标识符名称。

“大师”.m：

```
#import "GuideTableViewController.h"
#import "GuideDetailTableViewController.h"
#import "GuideDetailTableViewController2.h"
#import "GuideDetailTableViewController3.h"
#import <QuartzCore/QuartzCore.h>
#import "customImageCell.h"

@interface GuideTableViewController (){
    NSMutableData *weatherResponseData;
    NSArray *titleLabels;
    NSArray *imagesLeft;

}
@property (weak, nonatomic) IBOutlet UITableView *tableView;

@property (weak, nonatomic) IBOutlet UIImageView *imgHeader;

@property (weak, nonatomic) IBOutlet UIImageView *ImgTitle;

@property (weak, nonatomic) IBOutlet UIImageView *ImgWeather;

@property (weak, nonatomic) IBOutlet UIButton *btnMap;

@property (weak, nonatomic) IBOutlet UILabel *LabelWeather;

@property (weak, nonatomic) IBOutlet UILabel *LabelWeather2;

@end

@implementation GuideTableViewController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

//Weather method

- (void) loadWeather{

NSURLRequest *theRequest = [NSURLRequest requestWithURL:
                            [NSURL    URLWithString:@"http://api.wunderground.com/api/3919480da5014c98/conditions/q/BR/Sao_Sebastiao.json"]];
NSURLConnection *theConnection=[[NSURLConnection alloc]
                            initWithRequest:theRequest delegate:self];
if(theConnection){
    weatherResponseData = [[NSMutableData alloc] init];
} else {
    NSLog(@"failed");
}
}

//Delegates for WeatherData

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse  *)response
{
    [weatherResponseData setLength:0];
}

-(void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    [weatherResponseData appendData:data];
}

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error
{
    NSString *msg = [NSString stringWithFormat:@"Failed: %@", [error description]];
    NSLog(@"%@",msg);
}

//All the data was loaded, let's see what we've got...
- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    NSError *myError = nil;
    NSDictionary *res = [NSJSONSerialization JSONObjectWithData:weatherResponseData   options:NSJSONReadingMutableLeaves  error:&myError];
    NSArray *results =  [res objectForKey:@"current_observation"];
    NSString *cur = [results valueForKey:@"weather"];
    NSString *tmp = [results valueForKey:@"temperature_string"];
    NSString *wind = [results valueForKey:@"wind_string"];

    NSLog(@"Current conditions: %@, %@º, %@", cur, tmp, wind);

    self.LabelWeather.text = cur;

    self.LabelWeather2.text = tmp;

}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.

    [self loadWeather];

    titleLabels = [NSArray arrayWithObjects:@"Where to stay",@"Where to eat",@"What to  do",nil];

    imagesLeft = [NSArray arrayWithObjects:@"btn_Stay.png", @"btn_Eat.png", @"btn_Todo.png", nil];

    //set background
    self.view.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"background.jpg"]];

    //rounded corners

    [self.tableView.layer setCornerRadius:9.0];

    [self.ImgWeather.layer setCornerRadius:9.0];

}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

//TableView
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{
    return titleLabels.count;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath  *)indexPath {

  static NSString *CellIdentifier = @"Cell";

  customImageCell *cell = (customImageCell*)[tableView  dequeueReusableCellWithIdentifier:CellIdentifier];

    NSString *cellLabel = [titleLabels objectAtIndex:indexPath.row];
    cell.titleLabel.text = cellLabel;

    NSString *cellImage = [imagesLeft objectAtIndex:indexPath.row];
    UIImage *cellIcon = [UIImage imageNamed:cellImage];

    cell.imageLeft.image = cellIcon;

    return cell;

}

//To detailTableViewController

- (void)tableView:(UITableView *)tableView didselectRowAtIndexPath:(NSIndexPath    *)indexPath{
    if(indexPath.row == 0){
        [self performSegueWithIdentifier:@"stay" sender:self];
    }else if(indexPath.row ==1 ){
        [self performSegueWithIdentifier:@"eat" sender:self];
    }else{
        [self performSegueWithIdentifier:@"todo" sender:self];
    }

}

- (void) viewWillAppear:(BOOL)animated{
    UITableViewCell *cell = [self.tableView  cellForRowAtIndexPath:self.tableView.indexPathForSelectedRow];

    [cell setSelected:NO];

    //Hide navbar
    [self.navigationController setNavigationBarHidden:YES];
}

//Show navbar in detailView
-(void)viewWillDisappear:(BOOL)animated{
    [self.navigationController setNavigationBarHidden:NO];   
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T02:25:44.150

更改 didselectRow

```
- (void)tableView:(UITableView *)tableView didselectRowAtIndexPath:(NSIndexPath    *)indexPath{
   if(indexPath.row == 0){
    [self performSegueWithIdentifier:@"stay" sender:self];
}else if(indexPath.row ==1 ){
    [self performSegueWithIdentifier:@"eat" sender:self];
}else{
    [self performSegueWithIdentifier:@"todo" sender:self];
}
} 
```

# javascript - 我怎样才能让我的页面只刷新一次？

> ID：14764446
> 
> 赞同：0
> 
> 时间：2013-02-08T01:48:31.260
> 
> 标签：javascript, refresh, settimeout, onload

JS：

```
<script type="text/javascript">

function timedRefresh(timeoutPeriod) {

  var refreshed=true;

  if(refreshed){

    refreshed=false;

    setTimeout("location.reload();",timeoutPeriod);
  }

}
</script> 
```

html

正文 onload="JavaScript:timedRefresh(5000);"

我不能让它只有在它不断重新加载而不是采用新值时才能加载

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T02:02:07.613

您假设浏览器在每个页面加载之间保持 javascript 变量值，但所有内容都已刷新。您可能希望使用 HTML5 本地存储，以便在页面之间保持状态。

见[http://www.w3schools.com/html/html5_webstorage.asp](http://www.w3schools.com/html/html5_webstorage.asp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T01:51:26.843

重新加载页面将再次触发 load 事件，这将再次重新加载页面......您应该使用 cookie 或其他客户端数据存储来了解页面是否已经加载过一次。

# php - .sprintf("%4.2f", value) 在 PHP 中是如何工作的？

> ID：14764447
> 
> 赞同：3
> 
> 时间：2013-02-08T01:48:49.147
> 
> 标签：php, printf

我正在学习更多的 PHP 教程，特别是[DevZone PHP 101](http://devzone.zend.com/9/php-101-part-6-functionally-yours/ "开发区 PHP 101")，并且对以下内容感到困惑：

```
echo .sprintf("%4.2f", (2 * $radius * pi())) 
```

我找到了这个

> 我认为这意味着使用第一个后​​续参数的值生成一个四位宽、两位小数的浮点字段。
> 
> 这来自于 C/C++ 系列编程语言。sprintf() 将第一个参数作为格式语句。其中以 % 开头的任何内容都是字段说明符；其他任何东西都只是可打印的文本。因此，如果您给出一个包含所有文本且没有说明符的格式语句，它将完全按照它出现的方式打印。使用格式说明符，它需要数据才能处理。

但是在尝试了一些不同的值之后，我仍然没有得到它。在我看来，在这种情况下，它的目的是否只是将小数点限制在 2 位，我所要做的就是

```
.sprintf("%.2f", (2 * $radius * pi())) 
```

前面的4个是什么意思？在[PHP 手册](http://php.net/manual/en/function.sprintf.php "PHP 手册")中，它让我相信它确定的字符总数应该是 4，但是 (a) 不是这种情况，因为小数点使它成为 5 个字符，并且 (b) 不是这种情况，因为我尝试将其更改为更大的数字，如 %8.2f 并且它没有在两端添加任何零。有人可以更好地解释这一点。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-08T01:55:48.300

格式说明符中的第一个数字 % **8** .2f 用于填充长度。默认情况下 sprintf 使用空格字符。

您可以看到较大数字的效果：

```
printf("%20.2f", 1.23); 
```

例如会导致：

```
 1.23 
```

数字前有 16 个空格。浮动占用 4，例如，填充长度设置为 20。（也许您将其打印到网页中，因此看不到填充空间..）

在手册页下面还有一个示例[`sprintf`](http://php.net/sprintf)可以使用替代填充字符：

```
printf("%'*20.2f", 1.23); // use the custom padding character '*' 
```

将导致：

```
****************1.23 
```

# android - 无法为 TitleBar 的背景和文本应用我自己设计的样式

> ID：14764448
> 
> 赞同：0
> 
> 时间：2013-02-08T01:48:50.993
> 
> 标签：android, android-layout

我在下面的 xml 代码中定义了两种样式；但是，我在 styles.xml 中定义了它们，但我不知道如何应用它们以及在哪里实现它们？在 layout.xml 中，在 manifest.xml 中还是在 java 文件中？

```
<style name="Theme.MyAppTheme" parent="android:style/Theme.Holo.Light">
    <item name="android:actionBarStyle">@style/Theme.MyAppTheme.ActionBar</item>
</style>

<style name="Theme.MyAppTheme.ActionBar" parent="android:style/Widget.Holo.Light.ActionBar">
    <item name="android:background">#FF4444</item>
    <item name="android:titleTextStyle">@style/Theme.MyAppTheme.ActionBar.TitleTextStyle</item>
</style>

<style name="Theme.MyAppTheme.ActionBar.TitleTextStyle" parent="android:style/TextAppearance.Holo.Widget.ActionBar.Title">
    <item name="android:typeface">serif</item>
    <item name="android:textColor">@color/DARKRED</item>
    <item name="android:textSize">35sp</item>
</style> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T02:14:16.870

您也可以在不同的范围内应用您的风格。例如，在您的清单中，在您的应用程序标签中，有一个主题属性。所以你可以这样做：

```
 <application
    android:hardwareAccelerated="true"
    android:label="@string/app_name"
    android:theme="@style/Theme.MyAppTheme" > 
```

# c# - 如何通过这个例子在 WCF 中实现工厂设计模式？

> ID：14764456
> 
> 赞同：0
> 
> 时间：2013-02-08T01:49:38.770
> 
> 标签：c#, asp.net, .net, wcf

我是 WCF 新手，也是工厂设计模式的新手。在此示例中，您如何实际实现工厂设计模式？

我在项目中创建了 4 个类`addition`,和`subtraction`，所以如果有一种方法可以调用这些类来执行计算，而不是在界面中进行计算，那就太好了。`multiplication``division`

提前致谢。

```
[OperationContract]
int Calculation(int value1, int value2, string calType);

public class Service1 : IService1
{
   public int Calculation(int value1, int value2, string calType) 
   {
        try {
            switch (calType)
            {
                case "addition":
                    return value1 + value2;

                case "subtraction":
                    return value1 - value2;

                case "multiplication":
                    return value1 * value2;
                case "division":
                    return value1 / value2;
            }
        }
        catch (Exception ex)
        {
            Console.WriteLine(ex.Message);
        }

        return 0;
     }
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-24T19:26:06.173

好的，让我们这样做，wcf 中的工厂模式

我们以一个经典的形状为例，通过实现工厂模式我们可以有效地减少服务类中的代码。

只有形状工厂类需要在WCF服务类中，其余的可以有自己的业务类

1）创建接口

```
 public interface Shape {
 void  draw();
 } 
```

2）创建这样的类

公共类矩形：形状{

```
 public void draw() {
 print("Inside Rectangle::draw() method.");
  }
  } 
```

公共类广场：形状{

```
 public void draw() {
  print("Inside Square::draw() method.");
  }
  } 
```

3）现在有一个服务工厂类

```
 [service contract]
  public class ShapeFactory {

 //use getShape method to get object of type shape 

  [operation contract]
  public Shape getShape(String shapeType){
  if(shapeType == null){
     return null;
  }     
  if(shapeType.equalsIgnoreCase("CIRCLE")){
     return new Circle();
  } else if(shapeType.equalsIgnoreCase("RECTANGLE")){
     return new Rectangle();
  } else if(shapeType.equalsIgnoreCase("SQUARE")){
     return new Square();
  }
  return null;
  }
  } 
```

并在服务的接口中公开此方法

4）让客户做剩下的

代码是提供总体思路

工厂模式可能在 wcf 中有很好的实现

# php - CodeIgniter：如何从 View 获取输入并在控制器中使用它

> ID：14764458
> 
> 赞同：2
> 
> 时间：2013-02-08T01:49:50.463
> 
> 标签：php, codeigniter, model, views, controllers

我对 CodeIgniter 很陌生（使用 PHP）。所以现在我的网页上有一个文本框，要求访问者输入他们的名字。我取了一个名字（我将使用变量 $username ）并且我想将它保存在我拥有的数据库中。我想知道我该怎么做。我是否以某种方式将 $username 传递给控制器​​中的函数，然后将该值传递给我的模型？非常感谢，一个简单的例子将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T05:20:51.737

```
<form method="post" action="<?php echo base_url();?>controller/save" name="form">
  <label>User Name</label>
  <input type="text" name="Username">   
  <input type="submit" value="Add"/>
</form> 
```

在控制器中

```
function save
    {
    $arrData["Username"] = $this->input->post("Username");
    $this->User_model->Add($arrData); 
    } 
```

在 User_model

```
function Add($arrData) { 
        if($this->db->insert(tableName, $arrData))
          return true;
        else
          return false;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T02:00:27.997

一个快速的谷歌搜索带来了[文档](http://ellislab.com/codeigniter/user-guide/database/active_record.html)。你应该看看它。

他们给出的例子：

```
$data = array(
   'title' => 'My title' ,
   'name' => 'My Name' ,
   'date' => 'My date'
);

$this->db->insert('mytable', $data);
// produces: INSERT INTO mytable (title, name, date) VALUES ('My title', 'My name', 'My date') 
```

# jquery - 如何在输入按下或提交时执行此操作？

> ID：14764462
> 
> 赞同：0
> 
> 时间：2013-02-08T01:50:30.183
> 
> 标签：jquery

```
$('#.login.button').click(function() { 
```

和

```
 $('#.register.button').click(function() { 
```

这两个都做事情，我将如何在单击或输入新闻时运行它们下的脚本？

这是我的 .js jQuery：

```
$(document).ready(function() {
    $('#.login.button').click(function() {

        // Getting the variable's value from a link 
        var loginBox = $(this).attr('href');

        //Fade in the Popup and add close button
        $(loginBox).fadeIn(300);

        //Set the center alignment padding + border
        var popMargTop = ($(loginBox).height() + 24) / 2; 
        var popMargLeft = ($(loginBox).width() + 24) / 2; 

        $(loginBox).css({ 
            'margin-top' : -popMargTop,
            'margin-left' : -popMargLeft
        });

        // Add the mask to body
        $('body').append('<div id="mask"></div>');
        $('#mask').fadeIn(300);

        return false;
    });

    // When clicking on the button close or the mask layer the popup closed
    $('a.close, #mask').live('click', function() { 
      $('#mask , .login-popup').fadeOut(300 , function() {
        $('#mask').remove();  
    }); 
    return false;
    });
    $("#.sign-in.button").click(function() {
    var empty = $(this).parent().find("input").filter(function() {
        return this.value === "";
    });
    if(empty.length) {
        var notification = noty({text: "Error: Some fields were not filled out" , type:"error",  timeout: 2500, layout:"topCenter"});
        return false;
    }
 var username = $('#username').val(),
 password = $('#password').val();
$.ajax({
    url: "components/login.php",
    data:{username:username, password:password},
    type: "post",
    success: function(data) {
                    if(data == 'success') {
                        var notification = noty({text: "Welcome, "+username+"!" , type:"success",  timeout: 2500, layout:"topCenter"});
                        setTimeout(function(){
                         window.location = document.URL;
                    }, 3000);}
                    else {
                    var notification = noty({text: "Error: Incorrect Username/Password" , type:"error",  timeout: 2500, layout:"topCenter"});
                    }
    },
    error: function(html) {
    alert('error');
},
    statusCode: {
     404: function() {
       //404 here
     }
    }

});
return false;
});

$('#.register.button').click(function() {
                var registerBox = $(this).attr('href');
                $(registerBox).fadeIn(300);

        //Set the center alignment padding + border
        var popMargTop = ($(registerBox).height() + 24) / 2; 
        var popMargLeft = ($(registerBox).width() + 24) / 2; 

        $(registerBox).css({ 
            'margin-top' : -popMargTop,
            'margin-left' : -popMargLeft
        });

        // Add the mask to body
        $('body').append('<div id="mask"></div>');
        $('#mask').fadeIn(300);
            return false;
    });

$("#.log-out.button").click(function() {
$.ajax({
    url: "components/logout.php",
    success: function(data) {
                        var notification = noty({text: "Successfully logged out!" , type:"success",  timeout: 2500, layout:"topCenter"});
                        setTimeout(function(){
                         window.location = document.URL;
                    }, 3000);
    },
    error: function(html) {
    alert('error');
},
    statusCode: {
     404: function() {
       //404 here
     }
    }

});
return false;
});

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T02:49:44.837

用这个：

```
$("#password").keydown(function(event){
    if(event.keyCode == 13) {
        $('#loginbtn').click();
    };
}); 
```

然后制作你的按钮：

```
<button id="loginbtn" type="button">Sign in</button> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-08T01:53:02.073

第一要务，`$('#.login.button')`行不通。

```
$('#loginbutton') 
```

和

```
<button id="loginbutton">Log in</button> 
```

将要。

完成后，您应该始终将事件绑定到表单提交，因为提交表单的方法不止一种。

```
$('#theform').on('submit', function(){
    // do something useful here
}); 
```

假设它的形式是按钮提交它。您可以让它以前做一些事情，假设您有一个使用相同电子邮件和密码字段的注册和登录按钮。

```
$('#loginbutton').on('click', function(){
    // do the unique thing here
    // then let the form submit
    return true;
}); 
```

或者如果出于某种原因，此按钮不在表单中

```
$('#loginbutton').on('click', function(){
    // do the unique thing here
    // then let the form submit
    $('#theform').trigger('submit');
}); 
```

我想这就是你要问的。

# iphone - 另类难度

> ID：14764465
> 
> 赞同：0
> 
> 时间：2013-02-08T01:51:08.130
> 
> 标签：iphone

我正在创建一个简单的游戏，但遇到了一些代码问题。游戏的运作方式是有两个球。一个是敌人，一个是玩家。游戏每 5 秒将难度提高到一个新的水平。我当前的代码在[这里](http://pastebin.com/XtG0bhNu)，并在下面复制：

```
//
//  ViewController.m
//  BakerBattle
//
//  Created by Cole Bergmann on 2/6/13.
//  Copyright (c) 2013 Cole Bergmann. All rights reserved.
//

#import "ViewController.h"
#import "SecondView.h"

@interface ViewController ()

@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    //(X speed, Y speed) vvv
    pos = CGPointMake(6,5);
    [three setHidden:YES];
    [two setHidden:YES];
    [one setHidden:YES];
    [go setHidden:YES];
    [level1 setHidden:YES];
    [level2 setHidden:YES];
    [level3 setHidden:YES];
}

-(IBAction)start {
    [startbutton setHidden:YES];
    [logo setHidden:YES];
    [instructions setHidden:YES];
    [self performSelector:@selector(three) withObject:nil afterDelay:0.5];

}

-(void)three {
    [three setHidden:NO];
    [self performSelector:@selector(two) withObject:nil afterDelay:0.5];
}

-(void)two {
    [two setHidden:NO];
    [self performSelector:@selector(one) withObject:nil afterDelay:0.5];
}

-(void)one {
    [one setHidden:NO];
    [self performSelector:@selector(go) withObject:nil afterDelay:0.5];
}

-(void)go {
    [go setHidden:NO];
    [self performSelector:@selector(gamestart) withObject:nil afterDelay:0.5];
}

-(void)gamestart {
    [level1 setHidden:NO];
    [three setHidden:YES];
    [two setHidden:YES];
    [one setHidden:YES];
    [go setHidden:YES];
    [logo setHidden:YES];
    pos = CGPointMake(6,5);
    randomMain = [NSTimer scheduledTimerWithTimeInterval:(0.03) target:self selector:@selector(onTimer) userInfo:nil repeats:YES];
    [self performSelector:@selector(difficulty2) withObject:nil afterDelay:5.0];
}

-(void)onTimer {
    [self checkCollision];

    enemy.center = CGPointMake(enemy.center.x+pos.x,enemy.center.y+pos.y);
    if (enemy.center.x > 320 || enemy.center.x < 0)
        pos.x = -pos.x;
    if (enemy.center.y > 480 || enemy.center.y < 0)
        pos.y = -pos.y;
}

-(void)checkCollision {
    if( CGRectIntersectsRect(player.frame,enemy.frame))
    {
        [randomMain invalidate];
        [startbutton setHidden:NO];
        [logo setHidden:NO];
        [three setHidden:YES];
        [two setHidden:YES];
        [one setHidden:YES];
        [go setHidden:YES];
        [level1 setHidden:YES];
        [level2 setHidden:YES];
        [level3 setHidden:YES];
        [instructions setHidden:NO];

        CGRect frame = [player frame];
        frame.origin.x = 137.0f;
        frame.origin.y = 326.0;
        [player setFrame:frame];

        CGRect frame2 = [enemy frame];
        frame2.origin.x = 137.0f;
        frame2.origin.y = 20.0;
        [enemy setFrame:frame2];

        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"You Lost!" message:[NSString stringWithFormat:@"Baker Cat stole your dough!"] delegate:nil cancelButtonTitle:@"I want a rematch!" otherButtonTitles:nil];
        [alert show];
    }
}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
    UITouch *myTouch = [[event allTouches] anyObject];
    player.center = [myTouch locationInView:self.view];
}

//##################################-[DIFFICULTY LEVELS]-##############################################\\

-(void)difficulty2 {
    [level1 setHidden:YES];
    pos = CGPointMake(10,8);
    [self performSelector:@selector(difficulty3) withObject:nil afterDelay:5.0];
    [level2 setHidden:NO];

}

-(void)difficulty3 {
    [level2 setHidden:YES];
    pos = CGPointMake(14,10);
    [self performSelector:@selector(win) withObject:nil afterDelay:5.0];
    [level3 setHidden:NO];

}

-(void)win {
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"You Won!" message:[NSString stringWithFormat:@"You defeated Baker Cat!"] delegate:nil cancelButtonTitle:@"Play Again" otherButtonTitles:nil];
    [alert show];
    [randomMain invalidate];
    [startbutton setHidden:NO];
    [logo setHidden:NO];
    [instructions setHidden:NO];
    [three setHidden:YES];
    [two setHidden:YES];
    [one setHidden:YES];
    [go setHidden:YES];
    [level1 setHidden:YES];
    [level2 setHidden:YES];
    [level3 setHidden:YES];

    CGRect frame = [player frame];
    frame.origin.x = 137.0f;
    frame.origin.y = 326.0;
    [player setFrame:frame];

    CGRect frame2 = [enemy frame];
    frame2.origin.x = 137.0f;
    frame2.origin.y = 20.0;
    [enemy setFrame:frame2];
}

@end 
```

我想知道是否有人知道定义级别的替代方法。基本上，不同级别唯一要做的就是`pos = CGPointMake(10,8);`将我的更改`levelText`为游戏所在的级别。

我现在使用的问题是，如果玩家输了，关卡不会重置。例如，如果有人在 2 级死亡，他们会收到死亡消息并进入标题屏幕，但不久之后屏幕顶部会显示“3 级”，并发送一条消息说玩家获胜。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T02:09:13.937

您在延迟后执行选择器，但从不取消这些选择器。您有很多不同的方法名称，因此通过选择器取消可能不可行，因此更快的解决方案（可能有更多副作用）是将以下代码添加到终止游戏状态的任何方法（并可能转换为新级别）：

```
[NSObject cancelPreviousPerformRequestsWithTarget:self]; 
```

如果您需要通过选择器取消，请查看`+cancelPreviousPerformRequestsWithTarget:(id)aTarget selector:(SEL)aSelector object:(id)anArgument]`.

# html - 间距在 Chrome 中不起作用

> ID：14764473
> 
> 赞同：0
> 
> 时间：2013-02-08T01:52:23.793
> 
> 标签：html, css, google-chrome, firefox, css-tables

基本上，我想将我`td`的 s 水平地分开。在 Firefox 中，通过设置边距可以正常工作，但边距在 chrome 中不起作用。所以我尝试了以下并将其应用于表格

```
border-spacing: 40px;
border-collapse: separate; 
```

此外，该解决方案适用于 chrome，但不适用于 Firefox；即使指南建议我需要`border-collapse:`单独让它在 Firefox 中工作。

没有任何进一步的细节，这里是表格样式的代码（在 Firefox 中工作的那个）：

```
#tstyle3 {
    margin: 10px 0 0 0px;
    width: 750px;
    border-collapse: separate;
}

#tstyle3 tr {
    height: 270px;
    border-bottom: none;
    border-collapse: separate;
    width: 950px;
    display: inline-block;
}

#tstyle3 td {
    border-top: none;
    display: inline-block;
    position: relative;
    border-collapse: separate;
    margin: 0 30px 0 0;
    height: 220px;
    width: 220px;
    background-color: white;
    float: left;
    box-shadow: 0px 3px 5px #b5b6b6;
} 
```

并且在 jsfiddle 中重新创建了这种情况（它显示了它在 Firefox 中的显示方式）

[http://jsfiddle.net/JjZNb/](http://jsfiddle.net/JjZNb/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T01:57:53.957

你试试更性感的东西怎么样

```
float:left; display:block; 
```

[http://jsfiddle.net/JjZNb/1/](http://jsfiddle.net/JjZNb/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T02:23:04.020

您可以通过指定边框大小或 td 元素的填充来添加间距。

```
td{border:8px solid #fff;} 
```

或用于填充

```
td{padding:0 10px;} 
```

或者当已经定义了边框样式时，

```
td{border-width:2px;} 
```

或每一边

```
td{border-width:0 2px 0 2px;}
/* top right bottom left*/ 
```

这是一个演示上述[http://jsfiddle.net/VjkP9/的jsFiddle](http://jsfiddle.net/VjkP9/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T10:44:04.977

> 边距不适用于 td 元素。

这不太对。边距不适用于表格单元格（所以元素带有`display:table-cell`. 但是上面的 CSS 样式`<td>`元素带有`display: inline-block`，所以它们不再是表格单元格，边距应该应用于它们。

# java - 从 OWL 文件中提取数据

> ID：14764474
> 
> 赞同：0
> 
> 时间：2013-02-08T01:52:31.043
> 
> 标签：java, owl

```
<!-- http://www.semanticweb.org/vaio/ontologies/2013/0/untitled-ontology-113#hasDegree -->

<owl:ObjectProperty rdf:about="http://www.semanticweb.org/vaio/ontologies/2013/0/untitled-ontology-113#hasDegree">

<rdfs:range rdf:resource="http://www.semanticweb.org/vaio/ontologies/2013/0/untitled-ontology-113#degree"/>

<rdfs:domain rdf:resource="http://www.semanticweb.org/vaio/ontologies/2013/0/untitled-ontology-113#student"/>

</owl:ObjectProperty> 
```

使用java api我需要签入`<owl:ObjectProperty`，如果`rdf:about`那么我如何在`hasDegree`之后`#`以及..类似地如果`rdfs:range`那么`degree`之后`#`

在6号线？

或者我如何使用 java api 提取这些值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T12:42:04.367

我不完全确定你想从文件中得到什么，你的问题不清楚。但是，如果您想解析 OWL，尤其是如您所展示的 RDF/XML 格式的 OWL，您应该考虑使用[Jena](http://jena.apache.org)或[Sesame](http://openrdf.org)，因为它们是使用 RDF 的事实上的标准 Java API。我会推荐 Sesame API，因为它更简单、更容易掌握，但两者都是非常好的库。

每个网站上都有关于如何使用 API 和活跃用户和开发者论坛的很好的文档，您可以在其中寻求帮助。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T08:02:41.990

由于您的输入是在 OWL 中，因此请考虑使用[OWL-API](http://owlapi.sourceforge.net/)或任何其他 OWL API，而不是像 XPath、XSLT、RDF 库等那样不那么特定于 OWL 的工具。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T13:01:05.740

我假设您正在使用[OWL-API](http://owlapi.sourceforge.net/)，并且您的问题是：“如何在我的本体中获取对象属性的范围或域？” 在这种情况下：

```
/*Load the ontology from a local file and do the initialisations*/
File inputfile = new File("ontologyPath");
OWLOntologyManager manager = OWLManager.createOWLOntologyManager(); ;
OWLDataFactory dataFactory = manager.getOWLDataFactory();
OWLOntology yourOntology = manager.loadOntologyFromOntologyDocument(inputfile);
IRI ontologyIRI = yourOntology.getOntologyID().getOntologyIRI();  

/*Get an object property and its ranges*/  
OWLObjectProperty o_p_about = dataFactory.getOWLObjectProperty(IRI.create(ontologyIRI + "#"+"about"));
Set<OWLClassExpression> ranges_of_about = about.getRanges(LUCADAOntology); 
```

要从这里获取它，您可以查看 OWL-API 网页上的文档和示例代码，它们非常有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-19T00:57:23.327

使用 Jena API 调用 OWL 文件，然后使用 Turtle 写入/输出。

# ruby-on-rails - 观察对象和关联对象

> ID：14764489
> 
> 赞同：0
> 
> 时间：2013-02-08T01:54:03.473
> 
> 标签：ruby-on-rails, ruby, observer-pattern, rails-activerecord

如何根据关联对象是否已添加或删除来执行操作？

我系统中的每个用户都有一个关于外部服务的配置文件。配置文件跟踪用户的一些字段。当我的系统上更新这些字段中的一个或多个时，我会调用该服务来更新配置文件。电话很贵，所以我只想在必要时拨打。

每个用户都可以拥有一只宠物，在用户中表示为一个字段。用户的服务配置文件有一个标志，表示用户是否有宠物。

```
class User < ActiveRecord::Base
  attr_accessible :name, :shoe_size
  attr_accessible :unimportant_field1, :unimportant_field2
  has_one :pet
end

class Pet < ActiveRecord::Base
  belongs_to :user
end

class UserObserver < ActiveRecord::Observer
  observe User

  def after_create(user)
    Service.post_user(user)
  end

  def after_update(user)
    if changed(user)
      Service.put_user(user)
    end
  end

  def changed(user)
    user.name_changed? || user.shoe_size_changed? || user.pet_changed?
    # But there is no pet_changed? method!
  end
end 
```

用户可能会像这样获得宠物：

```
user.build_pet
   # or
user.pet = Pet.new
user.save! 
```

或像这样：

```
pet = Pet.create :user => user 
```

问题：

*   没有`user.pet_changed?`方法；`ActiveRecord::Dirty`不跟踪关联。
*   如果用户得到了上面第二个代码片段中的宠物，则不会触发用户的观察者。我可以单独观察宠物，只需更新用户个人资料的宠物字段。但是如果我对宠物和用户都有观察者，那么在第一个代码片段中，哪个会先触发？如果宠物先开火，我是做 POST 还是 PUT？

我正在寻找一个好的模式来遵循。也许我必须自己发明它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T04:56:22.797

Instead of using `user.pet_changed?`, use `user.pet.changed?`.

# mysql - Can you form legal statement in MySQL without using semicolon?

> ID：14764492
> 
> 赞同：0
> 
> 时间：2013-02-08T01:54:22.467
> 
> 标签：mysql, sql, database, relational-database

I am starting to learn SQL using MySQL and I got my hands on book ["SQL for MySQL Developers: A Comprehensive Tutorial and Reference"](https://rads.stackoverflow.com/amzn/click/com/0131497359).

Why the author doesn't place semicolons `;` at the end of the statements?

Can you form legal statement in MySQL without using semicolon?

Here is an example pulled right from the book (p.45) `CREATE DATABASE TENNIS`. Of course, MySQL shell responds by `->`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T02:14:28.247

Many flavors and applications of `SQL` require a semi-colon at the end. A few do not.

# mysql - MySql 关于删除级联概念？

> ID：14764493
> 
> 赞同：1
> 
> 时间：2013-02-08T01:54:28.507
> 
> 标签：mysql, cascade

我试图弄清楚级联删除是如何工作的。我知道一般概念，但不知道它的细节。

我有 3 张桌子 (a)||---|<(B)>o---||(C)

表 A：

```
Aid
Tag 
```

表 B：

```
Aid (f)
Cid (F) 
```

表 C：

```
Cid
Other 
```

*   表 A 中的一行必须至少有一个对表 c 的引用，否则它应该被删除。
*   仅当表 C 尝试创建不存在的标记时，才会在表 A 中创建一行。如果表 C 删除了该标记，并且表 C 中没有其他行引用该标记，则应删除该标记。如果表 C 中的另一行引用了该标签，则不应删除该标签。

如果我将表 B [Aid] 设置为删除级联，它会：

1.  如果表 A 中的标签被删除，则会自动删除表 B 中的所有链接
2.  我从属于 tagz 的表 B 中删除了一行。表 B 中有另一行引用 tagz。该删除是否会导致 tagz 也被删除，或者只要任何行引用它， tagz 就会保留？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T02:04:41.147

如果您已将表 B 设置为删除表 A 的外键上的级联，那么如果删除了一个标记 get，则表 B 中的相应记录将被删除。表 B 的删除不会影响表 A，因为表 A 没有对表 B 的任何引用或外键。

# java - 无法在实际设备上调试android？

> ID：14764494
> 
> 赞同：0
> 
> 时间：2013-02-08T01:54:47.420
> 
> 标签：java, android

运行 ubuntu 10.4 并尝试在 Galaxy s2 上进行调试。我可以将 USB 连接到计算机并收到通知。在手机上打开了调试模式，我已将 debuggable:true 添加到清单文件中。有小费吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T04:52:58.277

您必须进入设置->应用程序->开发->usb调试并在移动设备中启用**usb调试**

你仍然面临问题而不是点击[这里](https://stackoverflow.com/questions/11271716/not-able-to-debug-android-application-direclty-from-eclipse-to-device)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T09:46:22.103

两种方式：

将有关您设备的信息添加到 /etc/udev/rules.d/51-android.rules ：

在控制台中执行：

```
lsusb 
```

找到您的设备信息（idVendor 和 idProduct）并将其添加到 /etc/udev/rules.d/51-android.rules 中：

```
# adb protocol on maguro/toro (Galaxy Nexus)
SUBSYSTEM=="usb", ATTR{idVendor}=="04e8", ATTR{idProduct}=="6860", MODE="0600", OWNER="  <username>" 
```

更多信息，你可以在这里罚款：http: [//source.android.com/source/initializing.html](http://source.android.com/source/initializing.html)配置 USB 访问部分。

或者尝试从 sudo 运行 adb：

```
sudo ./adb kill-server
sudo ./adb devices 
```

# mdx - 如何指定特定切片/子立方体是 MDX 查询中所有度量的特定值？

> ID：14764498
> 
> 赞同：0
> 
> 时间：2013-02-08T01:55:14.347
> 
> 标签：mdx

假设我在查询中的层次结构上有一个计算成员

```
WITH 

MEMBER [Dept].[Dept].[Home Dept] AS
       [Dept].[Dept].&[Cooking] + [Dept].[Dept].&[Cleaning]

SELECT 
{
    [Measures].[Some Amount]
} ON 0,

NON EMPTY 
{
    [Dept].[Dept].[Dept].MEMBERS 
    + [Dept].[Dept].[Home Dept] 
    - [Dept].[Dept].&[Cooking] 
    - [Dept].[Dept].&[Cleaning]
} ON 1

FROM 
    [MyCube] 
```

我怎么能指定如果我用另一个层次结构（比如`[X].[X].[Something]`）切片 tuple 的结果`([X].[X].[Something], [Dept].[Dept].[Home Dept], [Measures].[All])`，沿着这个 tuple 的所有东西都是`particular value`.

所以如果我添加过滤器

```
WHERE
(
   [X].[X].[Something]
) 
```

到上面，它应该返回`particular value`.

# sqlite - MFC 上的 SQLite 内存不足错误

> ID：14764507
> 
> 赞同：0
> 
> 时间：2013-02-08T01:56:22.707
> 
> 标签：sqlite, memory, mfc

当我尝试在 WM 6.5 上的 MFC 应用程序上使用 SQLite 时，请查看以下我的代码，请告诉我我做错了什么。任何内存泄漏等？

通常，程序运行良好。但是，只有两个 WM 设备在运行我的应用程序，其中一个我根本没有听到任何问题。但是当我运行 select 语句时，另一个有时会出现内存不足。有时，没有错误消息，但它会破坏一些数据。而且我还意识到，有时它会将 .dat 扩展名放在我的数据库名称上。

任何帮助都将受到高度评价。

```
SelectedID=-1;
iSelectAll=0;
SipShowIM(SIPF_OFF);
//////////////////////////////////////////////////////////////////////////////////////////////////////////
CString FindStr1,FindStr2;
m_Edit1.GetWindowText(FindStr1); FindStr1.TrimLeft(); FindStr1.TrimRight();
m_Edit2.GetWindowText(FindStr2); FindStr2.TrimLeft(); FindStr2.TrimRight();
if(FindStr1 == L"" && FindStr2 == L"")
{
    MessageBox(L"Please enter a keyword to search!",L"Product Search",MB_OK|MB_ICONERROR); return -1;   
}
//////////////////////////////////////////////////////////////////////////////////////////////////////////
bIgnore = TRUE;
int Ret     = 0;
sqlite3 *db; sqlite3_stmt *stmt = NULL;

m_lv1.DeleteAllItems();
const char *data = NULL;
if( !sqlite3_open(chDatabaseName, &db) )
{
    CString Str;
    CString SearchField = L"";
           SearchField.Format(L" WHERE Description1 LIKE '%%%s%%' AND Description1 LIKE '%%%s%%' ",(LPCTSTR)FindStr1,(LPCTSTR)FindStr2);

    Str.Format(L"SELECT Status,Description1,ProductID,Stock,Code,UnitRate1,Size,Unit1,Unit2,DefaultUnit,VAT,Notes  FROM Products %s ORDER BY Status DESC, GroupID DESC, Description1 DESC",(LPCTSTR)SearchField);

    char chSqlString[1024+1];
    memset(chSqlString,0x00,sizeof(chSqlString)-1);wcstombs(chSqlString,Str,1024);chSqlString[Str.GetLength()]='\0';
    if ( sqlite3_prepare_v2( db, chSqlString, -1, &stmt, NULL )== SQLITE_OK)
    {
       m_lv1.SendMessage(WM_SETREDRAW,0,0);
       while( sqlite3_step( stmt ) == SQLITE_ROW ) 
       {
           CString StrDescription,StrSize; 
           data = (const char*)sqlite3_column_text( stmt, 0 ); m_lv1.InsertItem( 0 , L"",atol(data)-1);
                                                                m_lv1.SetItemText(0, 1,L"1");
            data = (const char*)sqlite3_column_text( stmt, 1 ); if(data) StrDescription=CString(data); else StrDescription=L"";             
            data = (const char*)sqlite3_column_text( stmt, 2 ); if(data) m_lv1.SetItemText(0, 3,CString(data)); else  m_lv1.SetItemText(0, 3,L"");
            data = (const char*)sqlite3_column_text( stmt, 3 ); if(data) m_lv1.SetItemText(0, 4,CString(data)); else  m_lv1.SetItemText(0, 4,L"");
            data = (const char*)sqlite3_column_text( stmt, 4 ); if(data) m_lv1.SetItemText(0, 5,CString(data)); else  m_lv1.SetItemText(0, 5,L"");
            data = (const char*)sqlite3_column_text( stmt, 5 ); if(data) m_lv1.SetItemText(0, 6,CString(data)); else  m_lv1.SetItemText(0, 6,L"");

            data = (const char*)sqlite3_column_text( stmt, 6 ); if(data) StrSize=CString(data); else StrSize=L"";               

            //data = (const char*)sqlite3_column_text( stmt, 6 ); if(data) m_lv1.SetItemText(0, 7,CString(data)); else  m_lv1.SetItemText(0, 7,L"");
            data = (const char*)sqlite3_column_text( stmt, 7 ); if(data) m_lv1.SetItemText(0, 8,CString(data)); else  m_lv1.SetItemText(0, 8,L"");
            data = (const char*)sqlite3_column_text( stmt, 8 ); if(data) m_lv1.SetItemText(0, 9,CString(data)); else  m_lv1.SetItemText(0, 9,L"");
            data = (const char*)sqlite3_column_text( stmt, 9 ); if(data) m_lv1.SetItemText(0,10,CString(data)); else  m_lv1.SetItemText(0,10,L"");
            data = (const char*)sqlite3_column_text( stmt,10 ); if(data) m_lv1.SetItemText(0,11,CString(data)); else  m_lv1.SetItemText(0,11,L"");
            data = (const char*)sqlite3_column_text( stmt,11 ); if(data) m_lv1.SetItemText(0,12,CString(data)); else  m_lv1.SetItemText(0,12,L"");

            StrDescription = StrDescription.Trim()+L" "+StrSize.Trim();
            m_lv1.SetItemText(0, 2,StrDescription);
            m_lv1.SetItemText(0, 7,StrSize);
       }    
       m_lv1.SendMessage(WM_SETREDRAW,1,0);
   }
   else
   {
         MessageBox(CString(sqlite3_errmsg(db)),L"SELECT Err",MB_OK|MB_ICONERROR); Ret = -1;// Out of memory error happens here !
   }
}
else
{      
    MessageBox(CString(sqlite3_errmsg(db)),L"Open DB",MB_OK|MB_ICONERROR);  Ret =-1;
}
sqlite3_finalize( stmt ); 
sqlite3_close(db); 
//////////////////////////////////////////////////////////////////////////////////////////////////////////
return Ret; 
```

还有一些更新或插入语句的代码

```
COleDateTime today(COleDateTime::GetCurrentTime());
EndTime.Format(L"%02d:%02d:%02d",today.GetHour(),today.GetMinute(),today.GetSecond());

CString Str,SQLStr,SQLStrA,StrTableName;

pTab1->m_Edit6.GetWindowText(Str); Str.TrimLeft(); Str.TrimRight();
if(Str==L"" && SaleType!=3 && SaleType!=33 && dbR31!=0 )
{
    MessageBox(_T("Please select a payment method!"), _T("Missing Detail"), MB_OK|MB_ICONWARNING); return -1;
}
SQLStrA=L"";
switch(SaleType)
{
    case  1: SQLStrA.Format(L"UPDATE Config SET OrderSN=%ld"  ,(SaleID+1)); StrTableName=L"Orders"   ; break;
    case  2: SQLStrA.Format(L"UPDATE Config SET InvoiceSN=%ld",(SaleID+1)); StrTableName=L"Invoices" ; break;
    case  3: SQLStrA.Format(L"UPDATE Config SET ReturnSN=%ld" ,(SaleID+1)); StrTableName=L"Returns"  ; break;
    case 11: SQLStrA=L""; StrTableName=L"Orders"   ; break;
    case 22: SQLStrA=L""; StrTableName=L"Invoices" ; break;
    case 33: SQLStrA=L""; StrTableName=L"Returns"  ; break;
}

if(SaleType==1 ||SaleType==2 || SaleType==3) 
{
   SQLStr=L"INSERT INTO "+StrTableName+L" (OrderID,CustomerID,OrderNo,OrderDate,DeliveryDate,Payment,Comments1,Comments2,Comments3,DscTotal,VATTotal,NetTotal,Status,StartTime,EndTime) VALUES (";      
   Str.Format(_T("%ld"),SaleID);                                              SQLStr = SQLStr +L" " +Str+ L" ,";
   Str.Format(_T("%ld"),SCID);                                                SQLStr = SQLStr +L" " +Str+ L" ,";
   pTab1->m_Edit1.GetWindowText(Str)       ; Str.TrimLeft(); Str.TrimRight(); SQLStr = SQLStr +L" '"+Str+ L"',";
   pTab1->m_DateTime1.GetWindowText(Str)   ; Str.TrimLeft(); Str.TrimRight(); SQLStr = SQLStr +L" '"+Str+ L"',";
   pTab1->m_DateTime2.GetWindowText(Str)   ; Str.TrimLeft(); Str.TrimRight(); SQLStr = SQLStr +L" '"+Str+ L"',";
   pTab1->m_Edit6.GetWindowText(Str)       ; Str.TrimLeft(); Str.TrimRight(); SQLStr = SQLStr +L" '"+Str+ L"',";
   pTab1->m_Comments1.GetWindowText(Str)   ; Str.TrimLeft(); Str.TrimRight(); SQLStr = SQLStr +L" '"+Str+ L"',";
   pTab1->m_Comments2.GetWindowText(Str)   ; Str.TrimLeft(); Str.TrimRight(); SQLStr = SQLStr +L" '"+Str+ L"',";
   pTab1->m_Comments3.GetWindowText(Str)   ; Str.TrimLeft(); Str.TrimRight(); SQLStr = SQLStr +L" '"+Str+ L"',";
   pTab2->m_DscTotal.GetWindowText(Str)    ; Str.TrimLeft(); Str.TrimRight(); SQLStr = SQLStr +L"  "+Str+ L" ,";
   pTab2->m_VATTotal.GetWindowText(Str)    ; Str.TrimLeft(); Str.TrimRight(); SQLStr = SQLStr +L"  "+Str+ L" ,";
   pTab2->m_NetTotal.GetWindowText(Str)    ; Str.TrimLeft(); Str.TrimRight(); SQLStr = SQLStr +L"  "+Str+ L" , 0 ,";
                                                                              SQLStr = SQLStr +L" '"+StartTime+L"',";
                                                                              SQLStr = SQLStr +L" '"+EndTime+ L"' )";
}
if(SaleType==11 || SaleType==22 || SaleType==33) 
{
   SQLStrA=L"";
   SQLStr=L"UPDATE "+StrTableName+L" SET ";       
   pTab1->m_DateTime1.GetWindowText(Str)   ; Str.TrimLeft(); Str.TrimRight(); SQLStr = SQLStr +L"    [OrderDate]='"+Str+ L"',";
   pTab1->m_DateTime2.GetWindowText(Str)   ; Str.TrimLeft(); Str.TrimRight(); SQLStr = SQLStr +L" [DeliveryDate]='"+Str+ L"',";
   pTab1->m_Edit6.GetWindowText(Str)       ; Str.TrimLeft(); Str.TrimRight(); SQLStr = SQLStr +L"      [Payment]='"+Str+ L"',";
   pTab1->m_Comments1.GetWindowText(Str)   ; Str.TrimLeft(); Str.TrimRight(); SQLStr = SQLStr +L"    [Comments1]='"+Str+ L"',";
   pTab1->m_Comments2.GetWindowText(Str)   ; Str.TrimLeft(); Str.TrimRight(); SQLStr = SQLStr +L"    [Comments2]='"+Str+ L"',";
   pTab1->m_Comments3.GetWindowText(Str)   ; Str.TrimLeft(); Str.TrimRight(); SQLStr = SQLStr +L"    [Comments3]='"+Str+ L"',";
   pTab2->m_DscTotal.GetWindowText(Str)    ; Str.TrimLeft(); Str.TrimRight(); SQLStr = SQLStr +L"     [DscTotal]='"+Str+ L"',";
   pTab2->m_VATTotal.GetWindowText(Str)    ; Str.TrimLeft(); Str.TrimRight(); SQLStr = SQLStr +L"     [VATTotal]='"+Str+ L"',";
   pTab2->m_NetTotal.GetWindowText(Str)    ; Str.TrimLeft(); Str.TrimRight(); SQLStr = SQLStr +L"     [NetTotal]='"+Str+ L"',";
                                                                              SQLStr = SQLStr +L"     [Status]=0,";
                                                                              SQLStr = SQLStr +L"      [EndTime]='"+EndTime+ L"' ";
                                 Str.Format(_T("%ld"),SCID);                  SQLStr = SQLStr +L" WHERE [CustomerID]=" +Str+ L" AND ";
                                 Str.Format(_T("%ld"),SaleID);                SQLStr = SQLStr +L"          [OrderID]=" +Str+ L" ";

}

//////////////////////////////////////////////////////////////////////////////////////////////////////////
int Ret     = 0;
sqlite3 *db; sqlite3_stmt *stmt = NULL;
if(SQLStrA != L"")
{
    if( !sqlite3_open(chDatabaseName, &db) )
    {
        char chSqlString[1024+1];
        memset(chSqlString,0x00,sizeof(chSqlString)-1);wcstombs(chSqlString,SQLStrA,1024);chSqlString[SQLStrA.GetLength()]='\0';
        if ( sqlite3_prepare_v2( db, chSqlString, -1, &stmt, NULL )== SQLITE_OK)
        {
            int UpdateRet = sqlite3_step( stmt );
            if (( UpdateRet!= SQLITE_DONE )&&( UpdateRet!= SQLITE_ROW ))
            {
                MessageBox(CString(sqlite3_errmsg(db)),L"[SerialNo]",MB_OK|MB_ICONERROR); Ret = -1;                   
            }
       }
       else
       {
             MessageBox(CString(sqlite3_errmsg(db)),L"[SerialNo]",MB_OK|MB_ICONERROR); Ret = -1;
       }
    }
    else
    {      
        MessageBox(CString(sqlite3_errmsg(db)),L"Open DB",MB_OK|MB_ICONERROR);  Ret =-1;
    }
    sqlite3_finalize( stmt ); sqlite3_close(db); 
}
//////////////////////////////////////////////////////////////////////////////////////////////////////////
if(Ret!=-1)
{
    if( !sqlite3_open(chDatabaseName, &db) )
    {
        char chSqlString[2048+1];
        memset(chSqlString,0x00,sizeof(chSqlString)-1);wcstombs(chSqlString,SQLStr,2048);chSqlString[SQLStr.GetLength()]='\0';
        if ( sqlite3_prepare_v2( db, chSqlString, -1, &stmt, NULL )== SQLITE_OK)
        {
            int UpdateRet = sqlite3_step( stmt );
            if (( UpdateRet!= SQLITE_DONE )&&( UpdateRet!= SQLITE_ROW ))
            {
                MessageBox(CString(sqlite3_errmsg(db)),L"[Master]",MB_OK|MB_ICONERROR); Ret = -1;                   
            }
       }
       else
       {
             MessageBox(CString(sqlite3_errmsg(db)),L"[Master]",MB_OK|MB_ICONERROR); Ret = -1;
       }
    }
    else
    {      
        MessageBox(CString(sqlite3_errmsg(db)),L"Open DB",MB_OK|MB_ICONERROR);  Ret =-1;
    }
    sqlite3_finalize( stmt ); sqlite3_close(db);
}
return Ret; 
```

还有我正在使用的另一个更新或插入语句。

```
CString Str,SQLStr,StrTableName;
if(SaleType==1 || SaleType==11) StrTableName=L"OrderDetails"  ; 
if(SaleType==2 || SaleType==22) StrTableName=L"InvoiceDetails"; 
if(SaleType==3 || SaleType==33) StrTableName=L"ReturnDetails" ; 

int Ret     = 0;
sqlite3 *db; sqlite3_stmt *stmt = NULL;   
    if( !sqlite3_open(chDatabaseName, &db) )
    {
   char chSqlString[2048+1];
   for( int i=0 ; i < pTab2->m_lv2.GetItemCount() ; i++)
   {
     if(_wtol(pTab2->m_lv2.GetItemText(i,9)) < 0) //if RecordID == -1
     {
         if(pTab2->m_lv2.GetItemText(i,0).Trim()!=L"*")
         {
               SQLStr=L"INSERT INTO "+StrTableName+L" (OrderID,CustomerID,Qty,Unit,Price,Vat,Dsc,Notes,ProductID,DetailID,Reason ) VALUES (";               
               Str.Format(_T("%ld"),SaleID)    ;                                      SQLStr = SQLStr +L"  " +Str+ L" ,";
               Str.Format(_T("%ld"),SCID);                                            SQLStr = SQLStr +L"  " +Str+ L" ,";
               Str = pTab2->m_lv2.GetItemText(i, 1); Str.TrimLeft(); Str.TrimRight(); SQLStr = SQLStr +L"  " +Str+ L" ,";//Qty
               Str = pTab2->m_lv2.GetItemText(i, 3); Str.TrimLeft(); Str.TrimRight(); SQLStr = SQLStr +L" '" +Str+ L"',";//Unit
               Str = pTab2->m_lv2.GetItemText(i, 4); Str.TrimLeft(); Str.TrimRight(); SQLStr = SQLStr +L"  " +Str+ L" ,";//Price
               Str = pTab2->m_lv2.GetItemText(i, 5); Str.TrimLeft(); Str.TrimRight(); SQLStr = SQLStr +L"  " +Str+ L" ,";//VAT Rate
               Str = pTab2->m_lv2.GetItemText(i, 6); Str.TrimLeft(); Str.TrimRight(); SQLStr = SQLStr +L"  " +Str+ L" ,";//DSC Rate
               Str = pTab2->m_lv2.GetItemText(i, 7); Str.TrimLeft(); Str.TrimRight(); SQLStr = SQLStr +L" '" +Str+ L"',";//Notes
               Str = pTab2->m_lv2.GetItemText(i, 8); Str.TrimLeft(); Str.TrimRight(); SQLStr = SQLStr +L"  " +Str+ L" ,";//ProductID
             //Str = pTab2->m_lv2.GetItemText(i, 9); Str.TrimLeft(); Str.TrimRight(); SQLStr = SQLStr +L"  " +Str+ L" ,";//RecordID - OrderID
               Str = pTab2->m_lv2.GetItemText(i,10); Str.TrimLeft(); Str.TrimRight(); SQLStr = SQLStr +L"  " +Str+ L" ,";//DetailID
             //Str = pTab2->m_lv2.GetItemText(i,11); Str.TrimLeft(); Str.TrimRight(); SQLStr = SQLStr +L"  " +Str+ L" ,";//PromotionID
               Str = pTab2->m_lv2.GetItemText(i,12); Str.TrimLeft(); Str.TrimRight(); SQLStr = SQLStr +L" '" +Str+ L"')";//Reason
         }           
     }
     else
     {
         if(pTab2->m_lv2.GetItemText(i,0).Trim()!=L"*")
         {
               SQLStr=L"UPDATE "+StrTableName+L" SET ";
               Str = pTab2->m_lv2.GetItemText(i, 1); Str.TrimLeft(); Str.TrimRight(); SQLStr = SQLStr +L"   Qty= " +Str+ L" ,";//Qty
               Str = pTab2->m_lv2.GetItemText(i, 3); Str.TrimLeft(); Str.TrimRight(); SQLStr = SQLStr +L"  Unit='" +Str+ L"',";//Unit
               Str = pTab2->m_lv2.GetItemText(i, 4); Str.TrimLeft(); Str.TrimRight(); SQLStr = SQLStr +L" Price= " +Str+ L" ,";//Price
               Str = pTab2->m_lv2.GetItemText(i, 5); Str.TrimLeft(); Str.TrimRight(); SQLStr = SQLStr +L"   Vat= " +Str+ L" ,";//VAT Rate
               Str = pTab2->m_lv2.GetItemText(i, 6); Str.TrimLeft(); Str.TrimRight(); SQLStr = SQLStr +L"   Dsc= " +Str+ L" ,";//DSC Rate
               Str = pTab2->m_lv2.GetItemText(i, 7); Str.TrimLeft(); Str.TrimRight(); SQLStr = SQLStr +L" Notes='" +Str+ L"',";//Notes
               Str = pTab2->m_lv2.GetItemText(i,12); Str.TrimLeft(); Str.TrimRight(); SQLStr = SQLStr +L"Reason='" +Str+ L"' ";//Notes
               Str.Format(_T("%ld"),SaleID);                                          SQLStr = SQLStr +L" WHERE OrderID=" +Str+ L" AND ";   
               Str = pTab2->m_lv2.GetItemText(i,10); Str.TrimLeft(); Str.TrimRight(); SQLStr = SQLStr +L"      DetailID=" +Str+ L" ";
         }
         else
         {
               SQLStr=L"DELETE FROM "+StrTableName+L" ";
               Str.Format(_T("%ld"),SaleID);                                          SQLStr = SQLStr +L" WHERE OrderID=" +Str+ L" AND ";   
               Str = pTab2->m_lv2.GetItemText(i,10); Str.TrimLeft(); Str.TrimRight(); SQLStr = SQLStr +L"      DetailID=" +Str+ L" ";
         }
    }

    memset(chSqlString,0x00,sizeof(chSqlString)-1);wcstombs(chSqlString,SQLStr,2048);chSqlString[SQLStr.GetLength()]='\0';
    if ( sqlite3_prepare_v2( db, chSqlString, -1, &stmt, NULL )== SQLITE_OK)
    {
        int UpdateRet = sqlite3_step( stmt );
        if (( UpdateRet!= SQLITE_DONE )&&( UpdateRet!= SQLITE_ROW ))
        {
                MessageBox(CString(sqlite3_errmsg(db)),L"[Detail]",MB_OK|MB_ICONERROR); Ret = -1;                   
        }
     }
     else
     {
        MessageBox(CString(sqlite3_errmsg(db)),L"[Detail]",MB_OK|MB_ICONERROR); Ret = -1;
     }
   }
   ///////////////////////////////////////////////////////////////////////////////////////////
}
else
{      
   MessageBox(CString(sqlite3_errmsg(db)),L"Open DB",MB_OK|MB_ICONERROR);  Ret =-1;
}

sqlite3_finalize( stmt ); sqlite3_close( db );
return 0; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T23:40:28.993

我真的很抱歉，因为我发现问题不在于 SQLite ，问题在于 listview 并且现在已经完全排序。

再次感谢

# c# - 在整个循环完成之前，标签文本不会更新

> ID：14764513
> 
> 赞同：3
> 
> 时间：2013-02-08T01:56:52.327
> 
> 标签：c#, winforms, image, repaint

我有一个 Winform 程序，当用户单击按钮时会执行一些计算，然后调用图片框绘制事件以根据计算结果绘制新的 BMP。这工作正常。

现在我想这样做 100 次，每次刷新图片框时，我想通过更新标签上的文本来查看它当前所处的迭代，如下所示：

```
 private void button2_Click(object sender, EventArgs e)
        {

        for (int iterations = 1; iterations <= 100; iterations++)
        {
            // do some calculations to change the cellmap parameters
            cellMap.Calculate();

            // Refresh picturebox1
            pictureBox1.Invalidate();
            pictureBox1.Update();

            // Update label with the current iteration number
            label1.Text = iterations.ToString();
        }
    }

    private void pictureBox1_Paint(object sender, PaintEventArgs e)
    {

        Bitmap bmp = new Bitmap(cellMap.Dimensions.Width, cellMap.Dimensions.Height);
        Graphics gBmp = Graphics.FromImage(bmp);

        int rectWidth = scaleFactor;
        int rectHeight = scaleFactor;

         // Create solid brushes
        Brush blueBrush = new SolidBrush(Color.Blue);
        Brush greenBrush = new SolidBrush(Color.Green);
        Brush transparentBrush = new SolidBrush(Color.Transparent);

        Graphics g = e.Graphics;

        for (int i = 0; i < cellMap.Dimensions.Width; i++)
        {
                for (int j = 0; j < cellMap.Dimensions.Height; j++)
                {
                    // retrieve the rectangle and draw it
                    Brush whichBrush;

                    if (cellMap.GetCell(i, j).CurrentState == CellState.State1)
                    {
                        whichBrush = blueBrush;
                    }
                    else if (cellMap.GetCell(i, j).CurrentState == CellState.State2)
                    {
                        whichBrush = greenBrush;
                    }
                    else
                    {
                        whichBrush = transparentBrush;
                    }

                    // draw rectangle to bmp
                    gBmp.FillRectangle(whichBrush, i, j, 1f, 1f);
                }
         }

         g.InterpolationMode = System.Drawing.Drawing2D.InterpolationMode.NearestNeighbor;
         g.DrawImage(bmp, 0, 0, pictureBox1.Width, pictureBox1.Height);
    } 
```

我遇到的问题是标签文本仅在最后一次图片框更新完成后才会显示。所以本质上，它不会显示 1 到 99。我可以看到每次刷新后图片框都会更新，因为 BMP 会随着每次迭代而变化。任何的想法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-08T02:10:36.007

```
// Code fragement...
// 5 cent solution, add Invalidate/Update
label1.Text = iterations.ToString();
label1.Invalidate();
label1.Update(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-08T02:40:54.903

要回答您为什么必须这样做的问题：Windows 窗体程序在单个线程中运行所有内容 - UI 线程。这意味着它必须按顺序执行代码，以便在切换回 UI 代码之前完成一个功能。换句话说，它只有在完成该功能后才能更新图片，因此如果您将图片更新100次，实际上只有最后一张会被更新。使用 Invalidate/Update 代码告诉编译器“暂停”函数的执行并强制它更新 UI 而不是等到函数结束。希望有帮助！

# r - 如何在 R 中使用 gWidgets 更改 gwindow() 的 WM 图标？

> ID：14764517
> 
> 赞同：2
> 
> 时间：2013-02-08T01:57:16.493
> 
> 标签：r, window, icons, gwidgets

我想更改窗口管理器图标（在我的左上角`gwindow()`），使用 R 中的 gWidgets。我想添加我自己的图片，而不是使用角落的 R 标志。我已将图片加载到 R 中，只需调用`gimage("imagename.jpg")`. 我可以通过调用 来设法在窗口中打开此图像`gimage("imagename.jpg", cont=gwindow(cont=T))`，但不能作为图标。

我觉得这应该是一件非常简单的事情。我已经用谷歌搜索了如何做到这一点，但找不到答案。我发现，使用 RGtk2，您只需`icon=imagename`在创建窗口时添加参数。

我也通过调用 gWidgets 尝试了这个`gwindow(icon=gimage("imagename.jpg"), cont=T)`，但是这与只调用 gwindow 没有额外的参数没有什么不同。

这似乎应该很简单，但我无法在任何地方找到答案。任何帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T05:25:13.140

这里gWidgets中没有什么可以帮助的，但是如果你加载RGtk2，那么GtkWindow的setIcon方法可以帮助你，但是你需要先得到它：

尝试类似：

```
w <- gwindow()
require(RGtk2)
img <- gdkPixbufNewFromFile("your_icon.png")
getToolkitWidget(w)$setIcon(img$retval) 
```

# sql - 条件触发并插入到远程 SQL Server 数据库服务器

> ID：14764520
> 
> 赞同：0
> 
> 时间：2013-02-08T01:57:50.880
> 
> 标签：sql, sql-server-2005, triggers

如何设置条件触发器以在更新或插入后满足特定条件时触发，然后将一些插入的值插入位于 SQL Server 2005 上另一个 SQL Server 数据库上的另一个表中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T02:50:18.687

[在此处](http://msdn.microsoft.com/en-us/library/ms189799.aspx)阅读有关创建触发器的信息。在您的情况下，它将是一个普通的数据操作语言 (DML) 事件触发器。

为了将数据插入远程服务器，您需要配置[链接服务器](http://msdn.microsoft.com/en-us/library/aa213778%28v=sql.80%29.aspx)。为此，您有一些工具：您可以通过[sp_addlinkedserver](http://msdn.microsoft.com/en-us/library/aa259589%28v=sql.80%29.aspx)使用 SQL ，也可以使用 SQL Server Management Studio (SSMS)。在后一种情况下，您将能够通过 GUI 进行操作。有关说明，请参阅[本文](http://msdn.microsoft.com/en-us/library/ff772782.aspx)。

配置链接服务器后，您可以直接从 SQL 访问其表（在下面的示例中，使用了链接服务器 SRVR002\ACCTG）：

```
SELECT name FROM [SRVR002\ACCTG].master.sys.databases 
```

# jquery - jQuery UI 对话框：在窗口内维护

> ID：14764523
> 
> 赞同：0
> 
> 时间：2013-02-08T01:58:08.817
> 
> 标签：jquery, jquery-ui, jquery-dialog

我有几个想要以相同方式运行的对话框。我创建了一个空对话框，根据单击的按钮通过 ajax 加载包含各种内容的对话框，然后打开对话框。打开时我检查窗口高度，如果对话框高度大于窗口高度，我将高度设置为窗口大小减去 20px，否则对话框高度是自动的。我在窗口调整大小事件上运行相同的函数，并将它定位在窗口的中心。当在对话框中单击将数据附加到对话框末尾的某些按钮时，我也会运行该函数。一切都很好，除了它打破了使用拖动手柄手动调整对话框的大小。我正在使用 jQuery 1.9.1 和 jQuery UI 1.9.2。代码基本上是这样的：

```
 //Create the dialog
    $("div.myDialogContainer").dialog({
      title:"Whatever",
      autoOpen:false,
      modal:true,
      resizable:true,
      width:850,
      open:function(event, ui){$.positionDialog();}
    });

    //Load content and open the dialog
    $("#openButton").on("click", function(){
      $.ajax({url:"myPath", success:function(data){
        $("div.myDialogContainer").html(data).dialog("open");
        $("div.myDialogContainer #addMoreData").on("click", function(){
          $("div.myDialogontainer div.loadedContent").append("<div>More Data</div>");
        });
      }
      });
    });

    //Position the dialog on window resize
    $(window).resize(function(){$.positionDialog();});

    //check dialog height and center on screen
    (function(){$.positionDialog=function(){
      var myDialog = $("div.myDialogContainer:visible"); 
      var availableHeight = $(window).height() - 20;
      var dialogHeight = myDialog.parent().height();
      if(dialogHeight>=availableHeight){
        myDialog.dialog("option", "height", availableHeight );
      }
      else{
        myDialog.dialog("option", "height", "auto" );} 
        myDialog.dialog("option", "position", "center");
      }
    })(jQuery); 
```

我在这里遗漏了什么还是这只是 jQuery/jQuery UI 的错误/限制？

# sql - 需要交叉表 TSQL 查询来计算日期差异

> ID：14764527
> 
> 赞同：0
> 
> 时间：2013-02-08T01:58:48.167
> 
> 标签：sql, sql-server, tsql

我有一个数据集，我需要计算日期差异。我需要一个通用查询，因为数据集每天都会有所不同。

这是我的数据集

```
**Client Number    :  Status  :    StatusDate**
   123456           Admit       2012-01-18
   123456           Accepted    2012-01-15
   123456           Offered     2012-01-10

   567899           Admit       2012-01-11
   567899           Accepted    2012-01-07
   567899           Offered     2012-01-05

   987342           Admit       2012-01-24
   987342           Accepted    2012-01-24
   987342           Offered     2012-01-21 
```

以上是示例数据，正如我所说，数据会每天发生变化。如您在上面看到的，始终会为特定的客户编号输入三个，并且始终按以下顺序输入三个状态。

我需要的是计算从提供到接受和接受到承认之间的不同天数。上面的结果集应该是这样的。三列

```
**ClientNumber : Date Diff Betw Offeres & Accepted : Date Diff Betw Accepted & Admited** 
   123456                     5 Days                           3 Days
   567899                     2 Days                           4 Days
   987342                     3 Days                           0 Days 
```

我需要通用查询，正如我所说，每个客户编号将具有三种状态。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T02:21:12.020

您必须进行自我加入。这是一个通用示例。

```
select t1.clientnumber, datediff(day, t1.statusdate, t2.statusdate) OfferToAccept
from yourtable t1 join yourtable t2 on t1.clientnumber = t2clientnumber
and t1.status = 'Offered' and t2.status = 'Accepted'

where whatever 
```

对于您的问题中可能输入错误的另一个间隔，这也是类似的事情。它说“接受和接受的日期差异”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T07:01:33.983

询问：

**[SQLFIDDLE示例](http://sqlfiddle.com/#!3/c1107/13)**

```
SELECT t1.[Client Number],
       MAX(datediff(DAY, t1.statusdate, t2.statusdate)) [Offeres & Accepted],
       MAX(datediff(DAY, t3.statusdate, t1.statusdate)) [Accepted & Admited]
FROM Table1 t1
LEFT JOIN Table1 t2 ON t1.[Client Number] = t2.[Client Number]
AND t1.status = 'Offered'
AND t2.status = 'Accepted'
LEFT JOIN Table1 t3 ON t1.[Client Number] = t3.[Client Number]
AND t1.status = 'Admit'
AND t3.status = 'Accepted'
GROUP BY t1.[Client Number] 
```

结果：

```
| CLIENT NUMBER | OFFERES & ACCEPTED | ACCEPTED & ADMITED |
-----------------------------------------------------------
|        123456 |                  5 |                  3 |
|        567899 |                  2 |                  4 |
|        987342 |                  3 |                  0 | 
```

# javascript - 如何在没有 Node.JS 的情况下运行 UglifyJS2

> ID：14764529
> 
> 赞同：6
> 
> 时间：2013-02-08T01:58:56.857
> 
> 标签：javascript, jvm, scriptengine, uglifyjs, uglifyjs2

无论如何要在没有 node.js的情况下运行[UglifyJS2 ？](https://github.com/mishoo/UglifyJS2)假设我想使用 JavaScript 脚本引擎在 JVM 进程中运行它。怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T17:43:07.960

我看到 mishoo 回答了你 [https://github.com/mishoo/UglifyJS2/issues/122](https://github.com/mishoo/UglifyJS2/issues/122)

两种可能的方式：

*   运行`uglifyjs --self`以获取可以在浏览器（或任何 JS 环境）中加载的 UglifyJS 构建，并且可以使用[此处描述](http://lisperator.net/uglifyjs/)的 API 。

*   在您的环境中加载 lib/ 目录中的所有文件（首先加载`utils.js`，`ast.js`其他文件可以以任何顺序出现）。如果你这样做，一切都将是全局的——你可以使用相同的 API，但不需要使用 UglifyJS 前缀。

此外，您可能想看看`tools/node.js`我们如何在 Node 中加载它（因为我们没有使用标准`require`）。

# php - 我对 Ajax 中的复选框感到很困惑

> ID：14764533
> 
> 赞同：0
> 
> 时间：2013-02-08T01:59:22.617
> 
> 标签：php, ajax

我正在尝试创建一个 ajax 联系表单，结果会通过电子邮件发送给我。我在网上找到了一个表单演示并对其进行了编辑以符合我的标准，除了演示中没有复选框，当我添加复选框时，除了那些工作之外的所有内容。

有人可以指导我完成这个吗？

html是：

```
 <div class="done">
<strong>Thank you !</strong> We've received your questions and someone from our office will respond at our earliest convience.</p>
<p>Check your email, we just sent you a coupon for 10% off your first purchase.</p>
</div>
    <div class="form">
<form method="post" action="process2.php" autocomplete="off">
<label for="name">Name</label>
<input type="text" name="name" id="name" />
<label for="phone">Phone</label>
<input type="text" name="phone" id="phone" />
<label for="email">Email</label>
<input type="text" name="email" id="email" />
<ul>
<li>Design:</li>
<li><label for="master_plan"><input type="checkbox" name="service[]" id="master_plan" value="Master Plan" /> Master Plan</label></li>
<li><label for="front_foundation"><input type="checkbox" name="service[]" id="front_foundation" value="Front Foundation" /> Front Foundation</label></li>
<li><label for="backyard_plan"><input type="checkbox" name="service[]" id="backyard_plan" value="Backyard Plan" /> Backyard Plan</label></li>
<li><label for="specialty_garden"><input type="checkbox" name="service[]" id="specialty_garden" value="Specialty Garden" /> Specialty Garden</label></li>
</ul>
<label for="newsletter"><input type="checkbox" name="newsletter" id="newsletter" value="x" checked="checked" /> Yes, I would like to be added to your newsletter list.</label>
<label for="comments">Comments</label>
<textarea name="comments" id="comments" rows="5" cols="40" /></textarea>
<input type="submit" id="submit" value="Sign Up" />
<div class="loading"></div>
</form>
</div> 
```

javascript是：

```
 <script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>
<script type="text/javascript">
$(document).ready(function() {
$('#submit').click(function () {
var name = $('input[name=name]');
var phone = $('input[name=phone]');
var email = $('input[name=email]');
var comments = $('textarea[name=comments]');
if (name.val()=='') {
name.addClass('hightlight');
return false;
} else name.removeClass('hightlight');
if (email.val()=='') {
email.addClass('hightlight');
return false;
} else email.removeClass('hightlight');
var data =
'name=' + name.val() +
'&phone=' + phone.val() +
'&email=' + email.val() +
'&comments=' + encodeURIComponent(comments.val());
$('.text').attr('disabled','true');
$('.loading').show();
$.ajax({
url: "process2.php",
type: "GET",
data: data,
cache: false,
success: function (html) {
     if (html==1) {
     $('.form').fadeOut('slow');
     $('.done').fadeIn('slow');
     } else alert('Sorry, unexpected error. Please try again later.');
}
});
return false;
});
});
</script> 
```

而php（process2.php）是：

```
 $name = ($_GET['name']) ? $_GET['name'] : $_POST['name'];
$phone = ($_GET['phone']) ?$_GET['phone'] : $_POST['phone'];
$email = ($_GET['email']) ?$_GET['email'] : $_POST['email'];
$mailing = ($_GET['newsletter']) ?$_GET['newsletter'] : $_POST['newsletter'];
$comments = ($_GET['comments']) ?$_GET['comments'] : $_POST['comments'];

if($phone) {$phone = '('.substr($phone, 0, 3).') '.substr($phone, 3, 3).'-'.substr($phone, 6, 4);} else {$phone = '(Not Entered)';} 
```

我很困惑，我不知道该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T02:12:14.100

您没有将它们包含在您`data`通过 ajax 发送的内容中。您甚至没有尝试获取 php.ini`service`中的值。

```
var data =
    'name=' + name.val() +
    '&phone=' + phone.val() +
    '&email=' + email.val() +
    '&comments=' + encodeURIComponent(comments.val()); 
//data only includes name, phone, email, comments 
```

您可能想尝试使用[jQuery 序列化](http://api.jquery.com/serialize/)方法而不是上面的代码。

```
var data = $(this).parents('form').serialize(); 
```

# octave - 如何将两行或两列相乘？

> ID：14764534
> 
> 赞同：3
> 
> 时间：2013-02-08T01:59:23.940
> 
> 标签：octave

```
a = [1, 2, 3];
b = [3, 2, 1];
c = a * b; 
```

产量

> 错误：运算符 *：不一致的参数（op1 是 1x3，op2 是 1x3）

为什么我不能将这两个相同大小的行相乘？我不应该为此运行for循环，但我不知道另一种方式......

我在这里看到了[第 1.2.3 节](http://www.gnu.org/software/octave/doc/interpreter/Simple-Examples.html)，这表明（至少对我而言）我*应该能够做到*。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T02:03:59.393

你做了2行，不能相乘。

矩阵乘法的一般形式是“**行-点-列**”，即每一行与每一列的点积。在您的情况下，您有 1 行，但有 3 列（这不起作用！）。

```
a = [1, 2, 3];
b = [3, 2, 1];
c = a' * b; 
```

> 答案=
> 
> ```
>  3     2     1
>  6     4     2
>  9     6     3 
> ```

![在此处输入图像描述](../Images/8df3b559edde83ac94cb24433456f1b7.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-13T01:25:53.723

我现在看到有一个[.* 运算符](http://en.wikibooks.org/wiki/Octave_Programming_Tutorial/Vectors_and_matrices)。我不知道在文档中的哪里可以找到它，它可以满足我的需求。

# php - 如何根据 url 参数进行重定向

> ID：14764536
> 
> 赞同：0
> 
> 时间：2013-02-08T01:59:32.250
> 
> 标签：php, forms, redirect, get

我在我的网站上有一个表格，用户可以在其中指定他们想要每月订阅还是每年订阅（这是一个单选选项）。此表单被提交到我的 CRM 系统，该系统将用户重定向到`www.site.com/is_to_pp.php?payment=Monthly&Address1=blah`（和其他 url 变量）。

取决于我是否`?payment=Monthly`想`?payment=Annual`将它们重定向到不同的贝宝订阅页面。我还想将其他变量传递给贝宝以预填充地址字段。

即，用户在我们的网站上填写一张表格，指定他们想如何付款，然后将他们添加到我们的 crm 系统，然后重定向到相应的 PayPal 页面。

有谁知道如何构造`is_to_pp.php`文件来处理这个问题？

任何帮助/指导表示赞赏

谢谢

查理

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T02:04:44.763

你的意思是这样的：

```
<?php
if ($_GET["payment"] == "Monthly") {
    header( 'Location: http://www.pageyouwant.com' );
    header("Location: paypalpage.com?payment=".$_GET['payment']."&address=".$_GET['address']);
} else {
    header("Location: paypalpage.com?payment=".$_GET['payment']."&address=".$_GET['address']);
}
?> 
```

# installation - 在安装期间连接到最终用户的 SQL Express

> ID：14764537
> 
> 赞同：0
> 
> 时间：2013-02-08T01:59:35.190
> 
> 标签：installation, sql-server-express

在 Visual Studio 中所有向导的帮助下，我一直在编写 SQL Compact C# winforms 应用程序。该数据库是在开发过程中创建的，并按原样安装。然后突然间，我意识到我实际上不知道如何连接到客户端机器上的 SQL Express 并在必要时安装数据库。

有很多关于连接字符串和通过代码在 SQL Express 中创建数据库的示例（在我的例子中是 C#），但我认为这不是我想要的。

如果我开发一个需要 SQL Express 的应用程序。我知道 Visual Studio 中有一个功能可以检测并安装 SQL Express（如果它不存在）。但是，如何在 SQL Express 中设置和安装我的数据库？我需要以某种方式在某处获得凭据吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T02:13:23.823

您提到了 SQL Server Compact Edition 和 SQL Server Express Edition；这是两个不同的东西，但对于您所描述的情况，您可能指的是 SQL Server Compact Edition。

SQL Server CE 带有 .Net Framework，因此不需要安装。但是，您必须创建一个数据库。您可以使用[SqlCeEngine.CreateDatabase()](http://msdn.microsoft.com/en-us/library/system.data.sqlserverce.sqlceengine.createdatabase%28v=vs.80%29.aspx)来做到这一点。

**编辑**

对于 SQL Server Express... 要从用户那里获取连接字符串，而无需他们实际输入连接字符串，您可以使用数据连接对话框：[archive.msdn.microsoft.com/Connection](http://archive.msdn.microsoft.com/Connection)

# mysql - MySQL查询基于表更新mysql中的列？

> ID：14764543
> 
> 赞同：7
> 
> 时间：2013-02-08T02:00:47.463
> 
> 标签：mysql

假设我有以下表格：

表A

```
a_name | age | country
Jordan |  5  | Germany
Jordan |  6  | Spain
Molly  |  6  | Spain
Paris  |  7  | France
John   |  7  | Saudi Arabia
John   |  5  | Saudi Arabia
John   |  6  | Spain 
```

表B

```
id (auto increment primary key) 
  | age | country      | group_num (initially null)
1 |  5  | Germany      |
2 |  6  | Spain        |
3 |  7  | France       |
4 |  7  | Spain        |
5 |  8  | France       |
6 |  9  | France       |
7 |  2  | Mexico       |
8 |  7  | Saudi Arabia |
9 |  5  | Saudi Arabia | 
```

我希望能够进行某种选择/更新，以便能够获得“group_num”列的以下值：

表B

```
id (auto increment primary key) 
  | age | country      | group_num
1 |  5  | Germany      | 1
2 |  6  | Spain        | 1
3 |  7  | France       | 1
4 |  7  | Spain        |
5 |  7  | France       | 2
6 |  9  | France       | 
7 |  2  | Mexico       |
8 |  7  | Saudi Arabia | 1
9 |  5  | Saudi Arabia | 1 
```

group_num 是根据以下标准分配的：

```
1) Places person "a_name" went. 
2) Whether other people visited that same country. (regardless of age). 
```

id 的 1,2,3,8,9 都具有相同的 groupId 的原因是因为上述两个条件，Jordan、Molly 和 Paris 都发生了某种联系。（他们都去了西班牙）和其他国家，即德国被约旦访问过，约旦也访问过西班牙，所以它有相同的group_num。约翰访问了沙特阿拉伯，他也访问了西班牙，因此它具有相同的 group_num。

**是否有一些 SQL 查询或查询（可能涉及或可能不涉及创建其他“互补”表以获得上面显示的所需结果？** （即，如果 group_num 应该首先填充 auto_incrementing 值，如“id”，则可以），然后在必要时稍后更新。（可以为当前显示为“（空）”的其他值字段设置非空值

游标/迭代非常慢......以下是我填写这些值的步骤，使用游标的过程非常慢，如果我能摆脱它，那就太好了：

1.  对于表 A，我们看到 Jordan 在 5 岁时访问了德国。（表 B 中 [5,Germany] 的 Group_Num 更新为 1）。
2.  乔丹在 6 岁时访问西班牙。（[6,Spain] 的 Group Num 更新为 1，以显示其与 Jordan 访问西班牙的同一个人的分组相同）
3.  莫莉 6 岁时访问西班牙（[6,Spain] 的 group_num 更新为 1，因为即使它是不同的人，相同的年龄/国家对被击中）
4.  巴黎在 7 岁时访问了法国（表 B 中的 group_num 更新为 2，因为她是一个不同的人，访问了一个完全不同的国家，无论年龄大小。
5.  约翰在 7 岁时访问了沙特阿拉伯（表 B 中 [7,Saudi Arabia] 的 group_num 更新为年龄+国家对中的 3）
6.  约翰在 5 岁时访问沙特阿拉伯（表 B 中 [5,Saudi Arabia] 的 group_num 更新为 3 年龄+国家对，因为它仍然是约翰）
7.  约翰在 6 岁时访问了西班牙（[6,Spain] 的 group_num 已经是 1.. 约旦之前去过那里，可能有一些分组...所以 group_num 代表约翰访问过的所有地方 [6, Spain], [5, Saudi阿拉伯]和[7,沙特阿拉伯]都更新为1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T20:22:26.520

您将需要一种迭代方法，该方法将基于添加到 Table1 的每个新项目，如果您为每个此类项目执行以下语句，它将快速高效：

这是在表 1 中插入最后一条记录之前数据库状态的[SQLFiddle 。](http://sqlfiddle.com/#!2/3b679/2)

顺便说一句：您的示例与您的描述并不完全一致，我假设您错误地将法国 7 签为第 1 组，因为巴黎与第 1 组中的任何人都没有关系。

注意我正在执行的选择：

1.  第一个搜索了我以前访问过的地方的组 num（这是我的不相交组，例如组 num 3）。
2.  第二个是搜索是否存在插入的记录可能相关的不相交组，通过在组 num 中搜索 spain 和 age 6。

在发现您有两个由于新插入的记录而成为连接的不相交集后，您可以更新之前分配为第二个组号的所有组 num 到第一个组，方式如下：

`UPDATE Table2 set group_num = 1 where group_num = 3`

所以我没有使用任何游标，但这个更新是针对表 1 的每次插入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T10:20:18.563

@Damascusi 你可以看看跳跳虎是否可以代替游标工作。如果您可以在将数据插入表 A 时即时更新 group_num，则触发器比游标快。

# c# - .NET Graphics.FillEllipse()

> ID：14764547
> 
> 赞同：1
> 
> 时间：2013-02-08T02:01:17.873
> 
> 标签：c#, .net, graphics, drawing, drawellipse

所以 .NET 文档说这会创建一个填充椭圆，在指定的 X、Y 坐标处具有左上角。

但我需要将椭圆置于我提供的 X、Y 坐标的中心。

我该怎么做呢？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T02:12:00.827

从所需的中心点，将 X 减小一半宽度并将 Y 减小一半高度。

# java - Android 中的 HTTP 422 GET 错误

> ID：14764548
> 
> 赞同：0
> 
> 时间：2013-02-08T02:01:17.373
> 
> 标签：java, android

我正在尝试对返回 JSON 文件的服务器执行 GET 请求。但是我在 HTTP statusLine / 422 中遇到错误。任何人都知道为什么。下面我展示了我的表现

```
public void testConverteArquivoJsonEmObjetoJava() {

    DefaultHttpClient httpClient = new DefaultHttpClient();
    HttpGet get = new HttpGet(
            "http://safe-sea-4024.ppooiheroku4554566adffasdfasdfalaqwerpcp.com/crimes/mobilelist");

    get.setHeader("Accept", "application/json");
    get.setHeader("Content-type", "application/json");

    get.getParams()
            .setParameter("token",
                    "0V1AYFK12SeCZHYgXbNMew==$tRqPNplipDwtbD0vxWv6GPJIT6Yk5abwca3IJ88888a6JhMs=");

    HttpResponse httpResponse;
    try {
        httpResponse = httpClient.execute(get);
        String jsonDeResposta = EntityUtils.toString(httpResponse
                .getEntity());

        System.out.println();

    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T02:22:41.433

通常您不会在请求中指定`Content-Type`标头。`GET`此标头告诉服务器如何解释消息中包含的实体。即使`GET`不能包含正文，服务器端也可能期望 JSON 实体。尝试删除`Content-Type`标题。

我尝试了您巧妙更改的 URL 并使其正常工作。但是，当我指定不同的令牌查询参数时，我确实得到了 422。由于状态行缺少一个短语，我假设 Ruby 应用程序正在生成它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T03:44:27.840

I managed to solve the problem. I was passing the parameter so wrong. According to this post [blog]:[How to add parameters to a HTTP GET request in Android?](https://stackoverflow.com/questions/2959316/how-to-add-parameters-to-a-http-get-request-in-android) "link". This method is used to that I kind of POST request

this method is correct

```
 public void testConverteArquivoJsonEmObjetoJava() {
    List<NameValuePair> params = new LinkedList<NameValuePair>();

    params.add(new BasicNameValuePair("token","0V1AYFK12SeCZHYgXbNMew==$="));

    String paramString = URLEncodedUtils.format(params, "utf-8");

    DefaultHttpClient httpClient = new DefaultHttpClient();
    HttpGet get = new HttpGet(
            "http://safep.com/crimes/mobilelist" + "?"
                    + paramString);
    HttpResponse httpResponse;
    try {

        httpResponse = httpClient.execute(get);
        String jsonDeResposta = EntityUtils.toString(httpResponse
                .getEntity());

        System.out.println();

    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}` 
```

# c - ISO C 是否允许分配的内存在程序终止后挂起？

> ID：14764553
> 
> 赞同：5
> 
> 时间：2013-02-08T02:01:54.753
> 
> 标签：c, malloc, iso, termination

我的一些同事提出了一个有趣的观点，其中一些人声称无论如何你都应该`free`记住你。`malloc`虽然我一直认为这是一个很好的做法，但其他一些人认为在这样的程序中没有必要：

```
#include <stdio.h>
#include <stdlib.h>
int main (void) {
    char *mem = malloc (1000);
    if (mem != NULL) {
        // do something with mem
    }
    // memory not freed
    return 0;
} 
```

他们声称当进程退出时内存将被清理。

现在，作为当地标准的超级极客，他们找我澄清，令我惊讶的是，似乎永远自由的人群实际上*可能*是正确的。

转到 C11, `5.1.2.2.3 Program termination`，它只是声明到达末尾`main`与调用 相同`exit`。

`7.22.4.4 The exit function`列出那些被清理的东西，特别是：

*   调用所有`atexit`处理程序。
*   刷新所有未写入缓冲的打开流。
*   所有打开的流都关闭。
*   创建的所有文件`tmpfile`都已关闭。
*   控制权返回给环境。

没有提到清理分配的内存。

现在看`6.2.4 Storage duration of objects`，它提到了四个存储持续时间，其中“分配”是这里感兴趣的一个。它进一步指出：

> 分配的存储在 7.22.3 中描述。

`7.22.3 Memory management functions`规定我们所有喜欢的人的行为，例如`malloc`和`free`。它从来没有提到在进程终止之前尚未释放的内存会发生什么。它简单地说：

> 已分配对象的生命周期从分配一直延伸到解除分配。

请记住，这不是关于实现做什么的问题——我很清楚，几乎我见过的每个实现都将其内存区域存储在进程空间中，并且在进程退出时将其丢弃。这是 ISO C 标准所允许的。

我在标准中找不到任何*要求*这种“终止时释放”行为的东西，因此分配内存在进程终止后幸存下来的实现是可行的（`malloc`例如，考虑使用持久共享内存的）。

所以这就是问题所在。分配的内存是否有可能（根据 ISO C）即使在分配它的进程消失后仍可能继续消耗资源？

或者我是否遗漏了标准中的某些内容？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-08T02:03:52.600

程序终止后清除分配的内存属于操作系统的权限，而不是 C 标准。

据我所知，一旦程序终止，大多数主要操作系统实际上都会取消分配所有分配的内存。嵌入式操作系统可能是个例外，但是我还没有可靠的材料来支持这一点。

编辑：另一个讨论相同问题的线程 -[程序终止后动态分配的内存](https://stackoverflow.com/questions/6727383/dynamically-allocated-memory-after-program-termination)

# windows - 如何在 Python 3.3 Windows 7 x64 上安装 Pyramid

> ID：14764561
> 
> 赞同：0
> 
> 时间：2013-02-08T02:02:55.747
> 
> 标签：windows, python-3.x, installation, pyramid

我一直在尝试在我的 Python 3.3 Windows 7 x64 机器上安装 Pyramid。我没有运气从头开始做了以下事情。我已经仔细检查了所有安装文件：

*   安装python 3.3
*   为 Windows 扩展安装 Python
*   安装分发 0.6.34（最新）
*   easy_install Virtualenv
*   激活了我的新 virtualenv
*   easy_install 金字塔

我在这里遵循[Pyramid 的安装指南](http://docs.pylonsproject.org/projects/pyramid/en/latest/narr/install.html#index-7)，同时用 Python32 代替 Python33：

`easy_install pyramid`完成并将以下鸡蛋文件放入我的`venv\liv\site-packages`文件夹中：

*   mako-0.7.3-py3.3.egg
*   pasteedeploy-1.5.0-py3.3.egg
*   金字塔1.4-py3.3.egg
*   repoze.lru-0.6-py3.3.egg
*   翻译字符串-1.1-py3.3.egg
*   venusian-1.0a7-py3.3.egg
*   webob-1.2.3-py3.3.egg
*   zope.deprecation-4.0.2-py3.3.egg
*   zope.interface-4.0.3-py3.3-win-amd64.egg

然而，实际的文件夹仍然在 egg 文件夹中，并且没有被复制到 site-packages 文件夹中。他们应该是吗？对我来说，这似乎是一个不完整的安装，因为代码甚至看不到这些鸡蛋文件夹中的导入模块。我尝试运行[此测试代码](http://docs.pylonsproject.org/projects/pyramid/en/1.4-branch/narr/configuration.html)，但出现导入错误。

作为测试，我将 egg 文件夹中的所有文件夹上移了一级，因此它们现在位于 site-packages 文件夹中。我运行测试代码，我得到不同的导入错误。事实上，我今天从头开始至少完成了整个安装过程 10 次。导入错误可能不同。这几乎就像金字塔安装正在损坏或不完整。但是，安装始终没有错误地完成。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T10:28:27.697

我已经将 pip 用于 python 并且一切正常，所有依赖项都已安装并

```
import pyramid 
```

之后没有抛出任何错误。

看看[http://pastebin.com/bdv1SK7k](http://pastebin.com/bdv1SK7k)。

注意：要安装 pip，讽刺的是，您需要调用 easy_install pip

# android - 转换位图可绘制对象

> ID：14764562
> 
> 赞同：1
> 
> 时间：2013-02-08T02:03:08.870
> 
> 标签：android, android-canvas

我正在使用我想要水平翻转的背景可绘制对象（它代表视图的“背面”）。我想在不复制原始位图的情况下执行此操作（内存问题），并且我不能只销毁原始位图，因为我稍后会需要它（当视图被翻转回来时）。

我尝试通过`BitmapDrawable`在方法中扩展和做一些矩阵变换来做到这一点`draw(Canvas)`，但是当硬件加速时这不起作用。

这是我现在正在做的事情，作为我`Fragment`的一部分`onCreateView()`：

```
BitmapDrawable backgroundDrawable = foo;

Matrix matrix = new Matrix();
matrix.preScale(-1, 1);

Bitmap flipped = Bitmap.createBitmap(
backgroundDrawable.getBitmap(), 0, 0, backgroundDrawable
    .getBitmap().getWidth(), backgroundDrawable
    .getBitmap().getHeight(), matrix, false);
v.findViewById(R.id.bar).setBackgroundDrawable(
    new BitmapDrawable(getResources(), flipped)); 
```

它工作得很好，只是我现在`Bitmap`在内存中有一个副本。有什么办法吗？

# meteor - 在 Meteor 中，如何仅更新模板的一个实例上的属性？

> ID：14764563
> 
> 赞同：4
> 
> 时间：2013-02-08T02:03:19.630
> 
> 标签：meteor

如果我在 Meteor 中有一个 {{# each}} 绑定，并且我想只更新 #each 中模板的一个实例上的属性。我该怎么做？我尝试在事件映射内的“模板”对象上设置一个值，但这似乎不是反应性的。我也尝试绑定到 Session 属性，但这会导致每个实例都更新，而不仅仅是我想要的...

例如：

```
{{#each dates}}
    {{> dateTemplate}}
{{/each}}

<template name="dateTemplate">
    {{date}}
    <span style="color: red;">{{errorMsg}}</span> <--- how do i update errorMsg?
</template>

Template.dateTemplate.events({
    'click': function(event, template) {
        template.errorMsg = 'not valid'; <--- this doesn't do anything
    }
}); 
```

编辑以解决以下问题：

```
Template.dateTemplate.events({
    'click': function(event, template) {
        template.errorMsg = function() { return 'not valid';} <--- this also doesn't do anything
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T07:15:51.723

您不必为此使用把手，因为它不需要反应性来传递消息，反应性变量最适合用于 db 数据或将由另一个客户端通过无线方式更新的数据。

您可以使用 JQuery（默认包含）来更新它，它也可以变得更漂亮：

```
<template name="dateTemplate">
    {{date}}
    <span style="color: red;display: none" class="errorMessage"></span>
</template>

Template.dateTemplate.events({
    'click': function(event, template) {
        $(template.find('.errorMessage')).html('Your Error Message').slideDown();
    }
}); 
```

我已经对其进行了编辑，因此默认情况下会隐藏错误，并通过动画向下滑动

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-27T16:13:30.927

我正在尝试通过将不同的反应对象传递给模板的每个实例来处理这个问题。然后模板可以绑定到反应对象（每个实例都是唯一的），我们没有任何额外的样板。

它最终看起来像这样：

初始渲染：

```
Template.firstTemplateWithPoll(ContextProvider.getContext())
Template.secondTemplateWithPoll(ContextProvider.getContext())
// (I actually pass getContext an identifier so I always get the same context for the same template) 
```

JS：

```
Template.poll.events = {
    'click .yes' : function() {
        this.reactive.set('selection', 'yes');
    },

    'click .no' : function() {
        this.reactive.set('selection', 'no');
    }
};

Template.poll.selection = function(arg) {
    return this.reactive.get('selection');
} 
```

模板：

```
<template name="poll">
    <blockquote>
        <p>
            Your selection on this poll is {{selection}}
        </p>
    </blockquote>
    <button class='yes'>YES</button>
    <button class='no'>NO</button>
</template> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T10:59:32.113

`template.errorMsg`应该是一个返回错误的函数。

```
Template.dateTemplate.events({
    'click': function(event, template) {
        template.errorMsg = function() { return 'not valid'; };
    }
}); 
```

# android - Android EditText的，回车行为没有响应

> ID：14764565
> 
> 赞同：0
> 
> 时间：2013-02-08T02:03:44.297
> 
> 标签：android, android-edittext

我的一项活动中有一个 EditText 对象。我已经实现了在键盘上插入“完成”按钮的代码，并在用户完成输入时隐藏它。不过我注意到，当文本达到我附加到 EditText 对象的最大长度时，它不会自动返回。在我的这个应用程序的 iPhone 版本中，我已经能够为我的文本框设置一个名为“自动返回”的属性，它会自动返回，这就是我想为 Android 版本实现的，但我没有知识。这是我写的代码：

```
 <EditText
    android:id="@+id/editText1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/textView1"
    android:layout_centerHorizontal="true"
    android:maxLength="10"
    android:hint="@string/hint"
    android:inputType="textImeMultiLine"
    android:imeOptions="actionDone"
    android:layout_marginTop="15dp"
    android:gravity="center"/> 
```

* * *

```
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_type_order);
    getActionBar().setDisplayHomeAsUpEnabled(true);

    editText1 = (EditText)findViewById(R.id.editText1);
    editText1.setLines(10);
    editText1.addTextChangedListener(new TextWatcher(){

        @Override
        public void afterTextChanged(Editable s) {
            // TODO Auto-generated method stub

        }

        @Override
        public void beforeTextChanged(CharSequence s, int start, int count,
                int after) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onTextChanged(CharSequence s, int start, int before,
                int count) {
            // TODO Auto-generated method stub

            InputMethodManager keyboard1 = (InputMethodManager) getSystemService(INPUT_METHOD_SERVICE);
            keyboard1.hideSoftInputFromInputMethod(editText1.getWindowToken(), 0);

        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T02:14:48.053

我仍在尝试理解...您希望键盘隐藏自己并在达到最大 10 行后单击“完成”？

[这个线程](https://stackoverflow.com/questions/2342620/how-to-hide-keyboard-after-typing-in-edittext-in-android)和/或[这](https://stackoverflow.com/questions/1109022/close-hide-the-android-soft-keyboard)应该能够帮助你。另外，下次请尝试使用与“自动返回”不同的词，因为它不是 Android 术语。描述什么是自动返回功能。幸运的是，我对 iOS 开发略知一二：）

# .net - 自定义样式的按钮中的TextBlock内容不可见？

> ID：14764570
> 
> 赞同：0
> 
> 时间：2013-02-08T02:04:07.837
> 
> 标签：.net, wpf

我为我的按钮定义了一个自定义样式。我想将 a`TextBlock`放在按钮内，以便我可以利用文本换行，但如果我将 a`TextBlock`用于内容，则文本不会显示。

在设计器中看起来像这样：

![隐形文字](../Images/b549500fc6685748fb459790ab0933ec.png)

`Button`定义为：

```
<Button HorizontalAlignment="Center"
        VerticalAlignment="Center">
  <Button.Content>
    <TextBlock Text="Lorem ipsum dolor sit amet, consectetur adipisicing elit."
               Width="150"
               TextWrapping="Wrap"
               FontSize="20" />
  </Button.Content>
</Button> 
```

`Style`定义为：

```
<Style TargetType="Button">
  <Style.Setters>
    <Setter Property="Template">
      <Setter.Value>
        <ControlTemplate TargetType="Button">
          <ControlTemplate.Resources>
            <Storyboard x:Key="ShowShine">
              <DoubleAnimationUsingKeyFrames BeginTime="00:00:00"
                                             Storyboard.TargetName="Shine"
                                             Storyboard.TargetProperty="(UIElement.Opacity)">
                <SplineDoubleKeyFrame KeyTime="0"
                                      Value="1" />
              </DoubleAnimationUsingKeyFrames>
            </Storyboard>
            <Storyboard x:Key="HideShine">
              <DoubleAnimationUsingKeyFrames BeginTime="00:00:00"
                                             Storyboard.TargetName="Shine"
                                             Storyboard.TargetProperty="(UIElement.Opacity)">
                <SplineDoubleKeyFrame KeyTime="0"
                                      Value="0" />
              </DoubleAnimationUsingKeyFrames>
            </Storyboard>
            <Storyboard x:Key="ShowMatte">
              <DoubleAnimationUsingKeyFrames BeginTime="00:00:00"
                                             Storyboard.TargetName="Matte"
                                             Storyboard.TargetProperty="(UIElement.Opacity)">
                <SplineDoubleKeyFrame KeyTime="0"
                                      Value="1" />
              </DoubleAnimationUsingKeyFrames>
            </Storyboard>
            <Storyboard x:Key="HideMatte">
              <DoubleAnimationUsingKeyFrames BeginTime="00:00:00"
                                             Storyboard.TargetName="Matte"
                                             Storyboard.TargetProperty="(UIElement.Opacity)">
                <SplineDoubleKeyFrame KeyTime="0"
                                      Value="0" />
              </DoubleAnimationUsingKeyFrames>
            </Storyboard>
          </ControlTemplate.Resources>
          <Grid>
            <Border Background="#FFEEEEEE"
                    BorderBrush="#00FFFFFF"
                    Padding="10 5"
                    BorderThickness="0"
                    Margin="0 0 0 0">
              <ContentPresenter VerticalAlignment="Center"
                                Grid.RowSpan="2"
                                Margin="{TemplateBinding Padding}"
                                HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" />
            </Border>
            <Border Background="#FF51a6ee"
                    BorderBrush="#FF51a6ee"
                    Padding="10 5"
                    Margin="0 0 0 0"
                    Opacity="0"
                    BorderThickness="0"
                    Name="Shine">
              <ContentPresenter VerticalAlignment="Center"
                                Grid.RowSpan="2"
                                Margin="{TemplateBinding Padding}"
                                HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" />
            </Border>
            <Border Background="#0b86ef"
                    BorderBrush="#0b86ef"
                    Padding="10 5"
                    Margin="0 0 0 0"
                    Opacity="0"
                    BorderThickness="0"
                    Name="Pressed">
              <ContentPresenter VerticalAlignment="Center"
                                Grid.RowSpan="2"
                                Margin="{TemplateBinding Padding}"
                                HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" />
            </Border>
            <Border Background="#FFAAAAAA"
                    BorderBrush="#00FFFFFF"
                    Padding="10 5"
                    BorderThickness="0"
                    Margin="0 0 0 0"
                    Opacity="0"
                    Name="Matte">
              <ContentPresenter VerticalAlignment="Center"
                                Grid.RowSpan="2"
                                Margin="{TemplateBinding Padding}"
                                HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" />
            </Border>
          </Grid>
          <ControlTemplate.Triggers>
            <Trigger Property="IsMouseOver"
                     Value="True">
              <Trigger.ExitActions>
                <BeginStoryboard Storyboard="{StaticResource HideShine}" />
              </Trigger.ExitActions>
              <Trigger.EnterActions>
                <BeginStoryboard Storyboard="{StaticResource ShowShine}" />
              </Trigger.EnterActions>
            </Trigger>
            <Trigger Property="IsPressed"
                     Value="True">
              <Setter Property="Opacity"
                      TargetName="Pressed"
                      Value="1" />
            </Trigger>
            <Trigger Property="IsEnabled"
                     Value="False">
              <Trigger.ExitActions>
                <BeginStoryboard Storyboard="{StaticResource HideMatte}" />
              </Trigger.ExitActions>
              <Trigger.EnterActions>
                <BeginStoryboard Storyboard="{StaticResource ShowMatte}" />
              </Trigger.EnterActions>
            </Trigger>
          </ControlTemplate.Triggers>
        </ControlTemplate>
      </Setter.Value>
    </Setter>
  </Style.Setters>
</Style> 
```

显然是“`TextBlock`那里”，但它没有出现 - 无论前景色选择如​​何。知道如何`TextBlock`在按钮中显示吗？

**编辑：** ContentPresenters 相互覆盖。以下样式按预期工作：

```
 <Style TargetType="Button">
    <Style.Setters>
      <Setter Property="Template">
        <Setter.Value>
          <ControlTemplate TargetType="Button">
            <ControlTemplate.Resources>
              <Storyboard x:Key="ShowShine">
                <DoubleAnimationUsingKeyFrames BeginTime="00:00:00"
                                               Storyboard.TargetName="Shine"
                                               Storyboard.TargetProperty="(UIElement.Opacity)">
                  <SplineDoubleKeyFrame KeyTime="0"
                                        Value="1" />
                </DoubleAnimationUsingKeyFrames>
              </Storyboard>
              <Storyboard x:Key="HideShine">
                <DoubleAnimationUsingKeyFrames BeginTime="00:00:00"
                                               Storyboard.TargetName="Shine"
                                               Storyboard.TargetProperty="(UIElement.Opacity)">
                  <SplineDoubleKeyFrame KeyTime="0"
                                        Value="0" />
                </DoubleAnimationUsingKeyFrames>
              </Storyboard>
              <Storyboard x:Key="ShowMatte">
                <DoubleAnimationUsingKeyFrames BeginTime="00:00:00"
                                               Storyboard.TargetName="Matte"
                                               Storyboard.TargetProperty="(UIElement.Opacity)">
                  <SplineDoubleKeyFrame KeyTime="0"
                                        Value="1" />
                </DoubleAnimationUsingKeyFrames>
              </Storyboard>
              <Storyboard x:Key="HideMatte">
                <DoubleAnimationUsingKeyFrames BeginTime="00:00:00"
                                               Storyboard.TargetName="Matte"
                                               Storyboard.TargetProperty="(UIElement.Opacity)">
                  <SplineDoubleKeyFrame KeyTime="0"
                                        Value="0" />
                </DoubleAnimationUsingKeyFrames>
              </Storyboard>
            </ControlTemplate.Resources>
            <Grid>
              <Border Background="#FFEEEEEE"
                      BorderBrush="#00FFFFFF"
                      Padding="10 5"
                      BorderThickness="0" />
              <Border Background="#FF51a6ee"
                      BorderBrush="#FF51a6ee"
                      Padding="10 5"
                      Opacity="0"
                      BorderThickness="0"
                      Name="Shine" />
              <Border Background="#0b86ef"
                      BorderBrush="#0b86ef"
                      Padding="10 5"
                      Opacity="0"
                      BorderThickness="0"
                      Name="Pressed" />
              <Border Padding="10 5">
                <ContentPresenter VerticalAlignment="Center"
                                  Grid.RowSpan="2"
                                  Margin="{TemplateBinding Padding}"
                                  HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" />
              </Border>
              <Border Background="#FFAAAAAA"
                      BorderBrush="#00FFFFFF"
                      Padding="10 5"
                      BorderThickness="0"
                      Opacity="0"
                      Name="Matte" />
            </Grid>
            <ControlTemplate.Triggers>
              <Trigger Property="IsMouseOver"
                       Value="True">
                <Trigger.ExitActions>
                  <BeginStoryboard Storyboard="{StaticResource HideShine}" />
                </Trigger.ExitActions>
                <Trigger.EnterActions>
                  <BeginStoryboard Storyboard="{StaticResource ShowShine}" />
                </Trigger.EnterActions>
              </Trigger>
              <Trigger Property="IsPressed"
                       Value="True">
                <Setter Property="Opacity"
                        TargetName="Pressed"
                        Value="1" />
              </Trigger>
              <Trigger Property="IsEnabled"
                       Value="False">
                <Trigger.ExitActions>
                  <BeginStoryboard Storyboard="{StaticResource HideMatte}" />
                </Trigger.ExitActions>
                <Trigger.EnterActions>
                  <BeginStoryboard Storyboard="{StaticResource ShowMatte}" />
                </Trigger.EnterActions>
              </Trigger>
            </ControlTemplate.Triggers>
          </ControlTemplate>
        </Setter.Value>
      </Setter>
    </Style.Setters>
  </Style> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T06:30:51.093

第一件事是第一件事：

你为什么这样使用它`<Button.Content> </Button.Content>`？

它只是由

```
<Button>
   <TextBlock Style="{StaticResource MyStyle}"/>
</Button> 
```

其次，样式本身包含很少的 ContentPresenter，因为它应该是每个按钮一个，或者您可以`Content={TemplateBinding Content}`只使用其中一个以显示内容。

# algorithm - 算法/概率练习

> ID：14764571
> 
> 赞同：5
> 
> 时间：2013-02-08T02:04:10.327
> 
> 标签：algorithm, probability, rosalind

我正在尝试解决 rosalind 项目中的一个练习，但显然一直在犯一些错误。全文可[在此处](http://rosalind.info/problems/lia/)获得，但我的简短抽象解释和尝试如下。请帮我找出我做错了什么：

我们有 3 组项目：`AA`、`Aa`、`aa`。我们从 1 in 开始`Aa`并`k`迭代生成新项目。在每次迭代中，组中的每个项目：

*   `Aa`可以产生：`AA`(25%), `Aa`(50%), `aa`(25%)
*   `AA`可以产生：`AA`(50%), `Aa`(50%)
*   `aa`可以产生：`aa`(50%), `Aa`(50%)

作为迭代的结果，我们计算每个组的预期项目数，假设我们在前一次迭代中从每个项目生成 2 个新项目。所以我们最终得到：

*   第 0 次迭代：：`AA`0，`Aa`：1，`aa`：0
*   第一次迭代：`AA`: .5, `Aa`: 1, `aa`: .5
*   第二次迭代：`AA`: 1, `Aa`: 2, `aa`: 1
*   等等 - 组之间的比例保持在 1:2:1

每次迭代的期望值/总体的总和是`2^iteration`，并且项目在组中的概率`Aa`始终为 50%。

到目前为止，我希望我是对的，但我们真正追求的是：如果我们重复实验两次，至少两次`N`都在组中的项目的机会是多少。`Aa`（应该相当于：如果我们将组列表扩展到, , .... 从原始问题中，至少有`N`项目在组中的机会是多少）`AaBb``AABB``AABb`

所以项目出现的概率`Aa`是 50%，来自迭代（或`2^iteration`）的预期值的总体总和，并使用测试数据（k=2，N=1）将其扔给 scipy，我们至少得到一个项目在组中`Aa`：

```
In [75]: bin = scipy.stats.binom(4, .5)
In [76]: sum(b.pmf(x) for x in range(1, 4+1))
Out[76]: 0.93750000000000022 
```

如果我们有两组组，这至少适用于一个项目，所以`AaBb`：

```
In [77]: sum(b.pmf(x) for x in range(1, 4+1))**2
Out[77]: 0.87890625000000044 
```

这与原始问题中的答案完全不同：0.684

我在哪里做错了？（如果可能，请只指出错误，而不是给出解决方案，以免给试图自行解决的人留下剧透）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T09:00:11.753

我首先按照你的例子，认为它似乎有道理，但过了一会儿我发现问题出在哪里。

这是指向您的错误的指针：

您已经计算了`Aa--`在第二代中获得至少一个和至少一个的概率`--Bb`。但这还不足以确定`AaBb`第二代是否至少有一个，`Aa--`并且`--Bb`必须重合。

例如，考虑下面的第二代：`aaBb, AABb, Aabb, AaBB`所有个体在这一代中都有`Aa--`或`--Bb`没有`AaBb`。

# c# - 使用 nuget 和 Symbols 服务器

> ID：14764572
> 
> 赞同：13
> 
> 时间：2013-02-08T02:04:27.200
> 
> 标签：c#, debugging, visual-studio-2012, nuget, debug-symbols

我一定做错了。

我正在使用 VS2012，c#。我正在使用 nuget 来管理我的包。以前我总是自己创建一个“外部引用”目录并管理包。我决定现在采用新的包管理方式。

无论如何，nuget 是一种享受。我进行了设置，以便包不包含在 svn（代码存储库）中，并且如果需要，可以下载丢失的包。所有的作品，适用于我团队中的所有开发人员，也适用于我们的 Team City 盒子。

当我想调试其中一个包（即进入包源）时，问题就来了。我已经按照这个[链接](http://www.symbolsource.org/Public/Home/VisualStudio)为符号源下载设置了 VS2012 。但是当我运行解决方案并想进入包代码时，VS2012 给了我一个空白的外观并说找不到符号。在 Fiddler 中，我可以看到一大堆 404。

我期待我从 nuget 引用的包的符号被下载，然后允许我介入并调试。还是我必须手动下载源代码并将 Vs2012 指向它 - 就像我在进行手动包管理时所做的那样？

我说得有道理吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-08T02:10:43.313

这取决于构建所述包的开发人员，也就是说，并非所有包作者都提供符号。

包作者可以根据文档创建和发布符号包：

[创建和发布符号包](http://docs.nuget.org/docs/creating-packages/creating-and-publishing-a-symbol-package)

然后剩下的就是在 Visual Studio 调试器配置中添加一个新的符号源（有关详细说明，请参见[此处）：](http://www.symbolsource.org/Public/Home/VisualStudio)

```
http://srv.symbolsource.org/pdb/Public 
```

# sql - 如何处理关系数据库中的删除？

> ID：14764579
> 
> 赞同：0
> 
> 时间：2013-02-08T02:05:08.950
> 
> 标签：sql, relational-database, rdbms, database-integrity

例如，如果关系数据库有一个表`Suppliers`，其中的值`Suppliers.ID`用于其他表的列中，例如`Invoice.Supplier`，如果用户想要*“从系统中删除供应商 15”*会发生什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T02:11:30.250

如果表`Supplier 15`中有记录`Invoice`。rdbms 将引发引用完整性错误，因为`Supplier 15`它是相关的并且在其他表中有记录。

处理这种删除将取决于您的业务规则。是否应该先删除相关记录，或者如果记录在其他表中使用，您可以阻止用户删除该记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T02:14:21.577

这取决于 Invoice 和 Supplier 之间关系的性质：

没有供应商可以存在发票吗？如果可以，您可以决定取消所有引用已删除供应商的列。如果不能，您可以决定删除属于已删除供应商的发票（如果您可以将发票视为供应商对象的子对象），或者您可以阻止删除供应商因为有任何发票提到它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T03:39:33.387

详细说明@DanBracuk 的评论。

在表中添加一列`InActive bit NOT NULL DEFAULT 0`。

当您“删除”该供应商时，将其设置为 1 并且不再在您的用户界面中显示它，除非在供应商的主列表中，以便可以重新打开

大多数商业会计软件包都使用类似的东西，在大多数情况下，如果您知道非活动供应商的名称，您可以将其输入下拉列表（并且将被接受），但它不会出现在下拉列表中。

# php - 通过ajax将jquery中的HTML解析为元素并替换页面上的每个对应

> ID：14764582
> 
> 赞同：0
> 
> 时间：2013-02-08T02:05:17.347
> 
> 标签：php, javascript, jquery, html, ajax

我在 HTML 页面上有以下内容：

```
<script type="text/javascript">
setInterval(function(){refresh()},5000);
function refresh()
{
    $.post("test.php",
    {
           // nothing here             
    },
    function(data, textStatus)
    {      

      $('' + data + '').find('.maindiv').each(function () {
      $('.maindiv').replaceWith('.maindiv');
      });

    });  
}
</script>

<div id = "1" class= "maindiv">
<div sid= "1" class= "subdiv">old sub div content</div>
<div cid= "1" class= "childdiv">another old sub div</div>
<img id = "1" src="http://foo.com/bar.png"/>  
</div>

<div id = "2" class= "maindiv">
<div sid= "2" class= "subdiv">this content is old</div>
<div cid= "2" class= "childdiv">please update me!</div>
<img id= "2" src="http://foo.com/bar.png"/>  
</div> 
```

被调用以更新元素的 PHP 页面 (test.php)：

```
<?php

 echo '<div id = "1" class= "maindiv">
       <div sid= "1" class= "subdiv">this is new sub div</div>
       <div cid= "1" class= "childdiv">this is also new sub div content</div>
       <img id= "1" src="http://foo.com/bar.png"/>  
       </div>'; 

 echo '<div id = "2" class= "maindiv">
       <div sid= "2" class= "subdiv">new content</div>
       <div cid= "2" class= "childdiv">new content for this child div</div>
       <img id= "2" src="http://foo.com/bar.png"/>  
       </div>'; 
?> 
```

这两个元素也出现在 HTML 页面上。基本上我想调用 PHP 页面并从 PHP 页面获取这些元素并在 HTML 页面的响应中循环遍历它们，并将每个 maindiv（包括其所有子元素）替换为 HTML 页面上的相应元素。

这只是一个非常基本的例子。我这样做是因为这些元素中的内容发生了变化，并且想要替换像实时更新这样的元素。

我发布的功能似乎没有响应，所以不知道如何实现这一点。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T02:22:57.593

You need to index the `maindiv` elements in page so that they match with the new elements.

Also need to modify what you are replacing with

```
 $(data ).filter('.maindiv').each(function (index) {/* filter or find depends on html structure sent*/
      /* "this" is the current div in response*/          
      $('#'+this.id).replaceWith(this);
}); 
```

`each` will track `index`, `eq()` is used to match same index in page.

**EDIT:** Also change `find()` to `filter()` if only output is the DIV's in root of output

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T02:36:04.397

Why dont you have 1 div that surrounds the content that you want to poll then upon receiving the ajax response replace the whole block with `html()`

```
<?php 
//check for ajax and return
if(isset($_SERVER['HTTP_X_REQUESTED_WITH']) && strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) === 'xmlhttprequest'){
    header('Content-Type: text/html');

    $response = '
    <div id = "a" class= "maindiv">
       <div sid= "1" class= "subdiv">'.date("D M j G:i:s T Y").'</div>
       <div cid= "1" class= "childdiv">'.md5(time()).'</div>
       <img id= "1" src="http://foo.com/bar.png"/>  
    </div>
    <div id = "a" class= "maindiv">
       <div sid= "1" class= "subdiv">'.date("D M j G:i:s T Y").'</div>
       <div cid= "1" class= "childdiv">'.md5(time()+1).'</div>
       <img id= "1" src="http://foo.com/bar.png"/>  
    </div>'; 

    echo $response;
    die;
}
?>

<script type="text/javascript">
function poll(){
    setTimeout(function(){
        $.ajax({ url: "./test.php", cache: false,
        success: function(data){
            $("#polling").html( data );
            poll();
        }});
    }, 5000);
}
$(document).ready(function(){
    poll();
});
</script>

<div id = "polling" class= "maindiv">
    <!--New response will replace the below html-->
    <div id = "1" class= "maindiv">
    <div sid= "1" class= "subdiv">old sub div content</div>
    <div cid= "1" class= "childdiv">another old sub div</div>
    <img id = "1" src="http://foo.com/bar.png"/>  
    </div>

    <div id = "2" class= "maindiv">
    <div sid= "2" class= "subdiv">this content is old</div>
    <div cid= "2" class= "childdiv">please update me!</div>
    <img id= "2" src="http://foo.com/bar.png"/>  
    </div> 

</div> 
```

## Edit

You can also return json and then loop the response into the divs based on id Here is an example:

```
<?php 
//check for ajax and return
if(isset($_SERVER['HTTP_X_REQUESTED_WITH']) && strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) === 'xmlhttprequest'){
    header('Content-Type: application/json');

    $response = array(
    'block_a'=>'content for block a (last_updated:)'.date("D M j G:i:s T Y"),
    'block_b'=>'content for block b (last_updated:)'.date("D M j G:i:s T Y"),
    'block_c'=>'content for block c (last_updated:)'.date("D M j G:i:s T Y"),
    'block_d'=>'content for block d (last_updated:)'.date("D M j G:i:s T Y"),
    'block_e'=>'content for block e (last_updated:)'.date("D M j G:i:s T Y"),
    ); 

    echo json_encode($response);
    die;
}
?>

<script type="text/javascript">
function poll(){
    setTimeout(function(){
        $.ajax({ url: "./test.php", cache: false,
        success: function(data){
            $.each(data, function(k, v) {
                //key value place html blocks
                $("#"+k).html(v);
            });
            poll();
        }, dataType: "json"});
    }, 1000);
}

$(document).ready(function(){
    poll();
});
</script>

<div id = "block_a" class= "maindiv"></div>
<div id = "block_b" class= "maindiv"></div>
<div id = "block_c" class= "maindiv"></div>
<div id = "block_d" class= "maindiv"></div>
<div id = "block_e" class= "maindiv"></div> 
```

This way you can build `$response` with only the content you want replaced upon each poll.

# php - 它没有显示所有现有视频的视频播放器

> ID：14764584
> 
> 赞同：1
> 
> 时间：2013-02-08T02:05:40.807
> 
> 标签：php, javascript, jwplayer

正在发生的事情是假设我有 2 个问题，我通过循环访问，问题 1 有两个视频，问题 2 有一个视频，它显示问题 1 的 2 个视频，但问题 2 不显示视频，它只是显示`Loading video player ...`. 如何让问题 2 和问题 1 的视频显示？

下面是代码：

```
<?php

foreach ($arrQuestionId as $key=>$question) {

                //start:procedure video
        $vid_result = '';
        if(empty($arrVideoFile[$key])){
          $vid_result = '&nbsp;';
        }else{

            ?>

  <p>
<?php 
$i = 0;
foreach ($arrVideoFile[$key] as $v) { ?>
<div id="myElement-<?php echo $i; ?>">Loading the player...

<script type="text/javascript">

jwplayer("myElement-<?php echo $i; ?>").setup({
    file: "<?php echo 'VideoFiles/'.$v; ?>"
});

<?php $i++; ?>
</script>

</div>
<?php } ?>
</p>

<?php           
        }

}
?> 
```

# jquery - Jquery Mobile + iscroll4 + 动态页面加载

> ID：14764586
> 
> 赞同：1
> 
> 时间：2013-02-08T02:06:05.453
> 
> 标签：jquery, mobile, dynamic, load, iscroll4

我是 StackOverflow 的新手，这是我的第一个问题，如果我做错了什么，请原谅。

我的问题是如何让 iScroll 4 在使用 load() 方法动态加载该页面的页面上的多个 div 上工作。

所以把它分解成更简单的东西：

我有一个名为 page.html 的单独页面

```
<html>
      <body>

            <ul data-iscroll="scroller">
               ..lots of data..
            </ul>

            <ul data-iscroll="scroller">
               ..lots of data..
            </ul>

      </body>
</html> 
```

然后在我的 index.html 页面上，我有所有库的常用标题标签，并且加载良好（我知道它可以正常工作，因为当我在 index.html 页面中有列表时 - > iScroll 工作正常。只是当列表是动态加载）

我的 index.html 的正文是

```
<body>

      <div data-role="page>
            <div data-role="header" data-position="fixed">
                  <h3>header</h3>
            </div>

            <div data-role="content" id="content">
                 <!-- always empty - data will be loaded here -->
            </div>

            <div data-role="footer" data-position="fixed">
                 <h3>footer</h3>
            </div>
      </div>

</body> 
```

页面被加载到内容中（这也有效，因为我可以看到所有内容）

```
$("#content").load("page.html",function(){
    $("#content").trigger('create');
}); 
```

而且你也知道，我包含的库是

```
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.0-beta.1/jquery.mobile-1.3.0-beta.1.min.css" />
<script src="http://code.jquery.com/jquery-1.8.3.min.js"></script>
<script src="http://code.jquery.com/mobile/1.3.0-beta.1/jquery.mobile-1.3.0-beta.1.min.js"></script>
<!-- jScroll -->
<script src="iscroll.js" type="text/javascript"></script>
<script src="jquery.mobile.iscrollview.js" type="text/javascript"></script> 
```

当我使用 Chrome 检查元素时，所有数据都显示出来了，但 2`<ul>`并没有像我期望的那样单独滚动。有谁知道我做错了什么？

PS。我也在一个简单的服务器上运行它，使用`python -m SimpleHTTPServer 8013` 并运行 PhoneGap 的 Ripple 模拟器来测试屏幕分辨率等，因为这将适用于手机。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T05:58:21.040

我希望这可能会帮助您理解和解决您的问题..如果您仍然不清楚，请告诉我，我会进一步向您解释...[我关于 iScroll 的简要说明在这里](https://stackoverflow.com/questions/15197894/how-iscroll-scrolls-i-cant-figure-out-how-it-swipes-up-or-swipes-down)

# html - 如何将两个 div 水平居中，使它们彼此堆叠？

> ID：14764589
> 
> 赞同：0
> 
> 时间：2013-02-08T02:06:28.790
> 
> 标签：html, center

抱歉，这似乎是一个新手问题，但我无法让我的 div 与我的生活保持一致。

我在父级中有两个 div。我如何水平居中（相对于页面）两个 div，而不是并排，我希望它们堆叠 - 一个在另一个之上。

这是一小段示例代码：

```
<div id="container">
    <div id="above">I belong above!</div>
    <div id="below">I belong below!</div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T02:15:34.103

你需要添加一些CSS。例如：

```
<style>
#container {
    width: 600px;
}
#above, #below {
    width: 400px;
    margin-left: auto;
    margin-right: auto;
}
</style> 
```

`<head>`在标签中添加这个。

# sql - 操作 SQL 查询以创建返回最大值的数据类别

> ID：14764593
> 
> 赞同：3
> 
> 时间：2013-02-08T02:06:47.410
> 
> 标签：sql

我现在有一张看起来像这样的表：

```
Day  Limit  Price  
1   52      0.3  
1   4       70  
1   44      200  
1   9       0.01   
1   0       0.03  
1   0       0.03  
2   52      0.4  
2   10      70  
2   44      200      
2   5       0.01   
2   0       0.55   
2   2       50 
```

有没有一种方法可以使用 SQL 将结果操作到具有不同价格类别的表中，并选择与其价格相对应的限制的最大值？

```
Day   0-10   10-100     100+  
 1     52       4        44  
 2     52      10        44 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T02:19:47.273

您可以使用`CASE`和`MAX`：

```
SELECT Day,
  MAX(CASE WHEN Price BETWEEN 0 AND 10 THEN Limit ELSE 0 END) as ZeroToTen,
  MAX(CASE WHEN Price BETWEEN 10 AND 100 THEN Limit ELSE 0 END) as TenToHundred,
  MAX(CASE WHEN Price > 100 THEN Limit ELSE 0 END) as HundredPlus
FROM YourTable
GROUP BY Day 
```

这是[小提琴](http://sqlfiddle.com/#!3/db89d/3)。

顺便说一句——如果您使用的是 MySQL，请在 LIMIT 周围添加刻度，因为它是一个关键字。

祝你好运。

# solr - NOT 条件在 solr 中不起作用

> ID：14764596
> 
> 赞同：0
> 
> 时间：2013-02-08T02:06:58.820
> 
> 标签：solr

我不是韩国专家，我发现很难解决这个问题，搜索以下查询，但 NOT 条件似乎不起作用。

```
 (stnostem:((옵티머스 OR "엘지 스마트폰") AND NOT ("옵티머스 프라임" OR 프라임))) 
```

带有 NOT 条件关键字的搜索结果返回结果？这怎么能解决。

问候， 阿尤什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T02:31:49.920

您可以尝试使用`-`来指定纯否定查询。尝试以下操作：

```
 stnostem:(옵티머스 OR "엘지 스마트폰") -stnostem:("옵티머스 프라임" OR 프라임) 
```

根据您的 DefaultQueryOperator 是什么，您可能需要两个查询之间的 AND。

# javascript - JqPlot 系列切换

> ID：14764597
> 
> 赞同：1
> 
> 时间：2013-02-08T02:07:01.647
> 
> 标签：javascript, show, jqplot, legend, series

我正在为 Javascript 使用 JqPlot。

我可以请一些帮助以使 seriesToggle 正常工作。在我的代码中，我有 seriesToggle: 'normal'。这是行不通的。该图显示完美，但图例显示在侧面，当我单击该图时，图例就停留在那里。显示/隐藏图例的正确代码是什么？

这是我的代码：

```
<script class="code" type="text/javascript">

$(document).ready(function(){

var plotCustomerSurveyGraph = $.jqplot('CustomerSurveyLineGraph', [[3.6, 3.2, 3.6], [2.4, 2.7, 2.9], [3.5, 3.1, 3.0]], 
{ 
            axes:
            {
                xaxis:
                {
                      ticks: ['1','2','3'],
                    showTicks: false
                },
                yaxis:
                {
                    //labelRenderer: $.jqplot.CanvasAxisLabelRenderer,
                    ticks: ['1','2','3','4'],
                    showTicks: true
                }
            },
    title:{
                text: '3 Month Trends',
                fontSize: 12 },
            width: 480, height: 480,
            legend:{show:true, location: 'e', placement: 'outsideGrid', renderer: $.jqplot.EnhancedLegendRenderer,             rendererOptions: {

            seriesToggle: 'normal'
            //seriesToggleReplot: {resetAxes: true}
        }},
    seriesDefaults: 
    {
                rendererOptions: {smooth: true}

    },
    series:[ 
                {
                    lineWidth:1, 
                    label:'COGS',
                    markerOptions: { size:7, style:'dimaond' }
                }, 
                {
                    lineWidth:1, 
                    label:'Wages',
                    markerOptions: { size: 7, style:"dimaond" }
                }
                ]
    }

);      
}); 
```

```
<div class="small_dash_container">
    <div id="CustomerSurveyLineGraph" style="height:120px; width:220px; margin-left:10px;"></div>
</div> 
```

```
<script class="include" type="text/javascript" src="elements/js/jqplot/jquery.jqplot.min.js"></script>
<script type="text/javascript" src="elements/js/jqplot/examples/syntaxhighlighter/scripts/shCore.min.js"></script>
<script type="text/javascript" src="elements/js/jqplot/examples/syntaxhighlighter/scripts/shBrushJScript.min.js"></script>
<script type="text/javascript" src="elements/js/jqplot/examples/syntaxhighlighter/scripts/shBrushXml.min.js"></script> 
```

```
<script class="include" language="javascript" type="text/javascript" src="elements/js/jqplot/plugins/jqplot.pieRenderer.min.js"></script>
<script class="include" language="javascript" type="text/javascript" src="elements/js/jqplot/plugins/jqplot.donutRenderer.min.js"></script>
<script class="include" language="javascript" type="text/javascript" src="elements/js/jqplot//plugins/jqplot.pointLabels.min.js"></script>
<script class="include" language="javascript" type="text/javascript" src="elements/js/jqplot.categoryAxisRenderer.min.js"></script>
<script class="include" language="javascript" type="text/javascript" src="elements/js/jqplot.barRenderer.min.js"></script>

<script class="include" language="javascript" type="text/javascript" src="elements/js/jqplot/plugins/jqplot.canvasTextRenderer.min.js"></script>    
<script class="include" language="javascript" type="text/javascript" src="elements/js/jqplot/plugins/jqplot.canvasAxisLabelRenderer.min.js"></script>    
<script class="include" language="javascript" type="text/javascript" src="elements/js/jqplot/examples/jquery-ui/js/jquery-ui.min.js"></script>        
<script class="include" language="javascript" type="text/javascript" src="elements/js/jqplot/plugins/jqplot.barRenderer.min.js"></script>
<script class="include" language="javascript" type="text/javascript" src="elements/js/jqplot/plugins/jqplot.categoryAxisRenderer.min.js"></script>
<script class="include" language="javascript" type="text/javascript" src="elements/js/jqplot/plugins/jqplot.enhancedLegendRenderer.min.js"></script>
<script class="include" language="javascript" type="text/javascript" src="elements/js/jqplot/plugins/jqplot.blockRenderer.min.js"></script>
<script class="include" language="javascript" type="text/javascript" src="elements/js/jqplot/plugins/jqplot.highlighter.min.j"></script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T03:14:03.243

我想你可能误解了什么`seriesToggle`是为了。此选项的目的是允许用户单击图例中的系列名称并在图中显示/隐藏相应的系列。

也就是说，如果您确实有理由隐藏图例，则在单击图例时，以下内容将图例切换为可见和隐藏：

```
$('#chart1').bind('jqplotClick', function(ev, seriesIndex, pointIndex, data) {
    if($('#chart1 .jqplot-table-legend').is(':visible')) {
        $('#chart1 .jqplot-table-legend').hide();
    }
    else {
        $('#chart1 .jqplot-table-legend').show();
    }
}); 
```

# actionscript-3 - 无法移除事件监听器

> ID：14764599
> 
> 赞同：0
> 
> 时间：2013-02-08T02:07:28.713
> 
> 标签：actionscript-3, flash

我无法删除 rute_button 的事件，rute_button.removeEventlistener 不起作用。函数 tampil_rute(t) 有什么问题吗？谢谢..

```
function tampil(t)
{
    rute_button.addEventListener(MouseEvent.CLICK, tampil_rute(t));
    //tampil_rute(t);
    var _loadertampil:URLLoader = new URLLoader();
    var _datatampil:XML = new XML();
    _loadertampil.addEventListener(Event.COMPLETE, readXMLtampil);
    _loadertampil.load(new URLRequest("http://localhost/mall_baru/tampil2.php?id="+t));
    function readXMLtampil(evttampil:Event)
    {
    _datatampil = new XML(evttampil.target.data);
    var tampilanx = _datatampil..tenant_name;
    tampilan.text = String(tampilanx);
    trace("tampilan ="+tampilanx);
    }
}
function tampil_rute(t)
{
    return function( f:MouseEvent ) 
    {
    var c = t.split("_", 2);
    var d:String = String(c[0]);
    var e:Number = Number(c[1]);
    for(var i:Number=1; i<=e; i++)
    {
        tambahan_tampil_rute(d,i);
    }
        rute_button.removeEventListener(MouseEvent.CLICK, tampil_rute(t));
    }
}
function tambahan_tampil_rute(d, i)
{
    this["rute_"+d+"_"+i].visible=true;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T02:34:32.930

fenixkim 是对的，匿名函数返回的事件处理程序是不可访问的，因为没有对它的引用。

不过，另一种解决方案是将 t 存储在变量中。这样，我们消除了对匿名函数的需求并简化了事件处理程序的删除。

```
var t;

function tampil(t)
{
    this.t = t;
    rute_button.addEventListener(MouseEvent.CLICK, tampil_rute);
    // rest of code
}

function tampil_rute(e:MouseEvent)
{
    var c = t.split("_", 2);
    var d:String = String(c[0]);
    var e:Number = Number(c[1]);
    for(var i:Number=1; i<=e; i++)
    {
        tambahan_tampil_rute(d,i);
    }
    rute_button.removeEventListener(MouseEvent.CLICK, tampil_rute);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T02:52:01.667

问题出在 by 返回的函数中`tampil_rute(t)`，每次调用这个函数时都会返回一个 Function 类型的新对象，如果要移除事件监听器，必须确保将相同的对象（Function）传递给`removeEventListener`函数。

您可以按如下方式修复它：

```
function tampil_rute(t)
{
    var listener:*; // create a variable to store your listener reference

    listener = function( f:MouseEvent ) 
    {
        var c = t.split("_", 2);
        var d:String = String(c[0]);
        var e:Number = Number(c[1]);
        for(var i:Number=1; i<=e; i++)
        {
            tambahan_tampil_rute(d,i);
        }

        rute_button.removeEventListener(MouseEvent.CLICK, listener); // Put the reference here
    }

    return listener; // Return the listener here
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T02:41:19.133

您没有传入添加/删除 eventListener 的参数。

```
rute_button.addEventListener(MouseEvent.CLICK, tampil_rute);
rute_button.removeEventListener(MouseEvent.CLICK, tampil_rute); 
```

# python - 我需要使用 apache 或 nginx 来托管服务器吗？

> ID：14764601
> 
> 赞同：1
> 
> 时间：2013-02-08T02:07:39.480
> 
> 标签：python, django, apache, nginx, gunicorn

我需要使用 NginX 还是可以在没有它的情况下托管它？

我正在开发我的第一个 django 项目，并且可以使用以下命令运行应用程序项目：

```
./manage.py run_gunicorn -c config/gunicorn 
```

然后我可以查看它：

```
http://127.0.0.1:8000/resources/ 
```

我现在想尝试托管它，以便其他 PC 可以访问它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T08:38:24.410

> Gunicorn 是 wsgi http 服务器。最好在 HTTP 代理服务器后面使用 Gunicorn。我们强烈建议您使用 nginx。

@ [http://gunicorn.org/#deployment](http://gunicorn.org/#deployment)

> 尽管有许多 HTTP 代理可用，但我们强烈建议您使用 Nginx。如果您选择另一个代理服务器，则需要确保在使用默认 Gunicorn 工作程序时它缓冲慢速客户端。如果没有这种缓冲，Gunicorn 很容易受到拒绝服务攻击。

@ [http://docs.gunicorn.org/en/latest/deploy.html](http://docs.gunicorn.org/en/latest/deploy.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T02:46:21.800

您*不需要*前端代理；您可以将像 gunicorn 这样的独立网络服务器直接投入生产。[但是无论如何，您可能还是要使用前端网络服务器](https://stackoverflow.com/questions/2939393/why-use-nginx-with-catalyst-plack-starman/2939522#2939522)有多种原因。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-08T02:17:32.633

当然不是。您可以使用 lighttpd 或任何其他支持 WSGI、SCGI、FastCGI 或 AJP 的 Web 服务器。你可以参考这个[python 文档](http://docs.python.org/2/howto/webservers.html)和[django 文档](https://docs.djangoproject.com/en/1.2/howto/deployment/fastcgi/)，以及 stackoverflow 上的这两个问题：[Cleaest & Fastest server setup for Django](https://stackoverflow.com/questions/26025/cleanest-fastest-server-setup-for-django)，[Differences and uses between WSGI, CGI, FastCGI, and mod_python 在 Python 方面？](https://stackoverflow.com/questions/3937224/differences-and-uses-between-wsgi-cgi-fastcgi-and-mod-python-in-regards-to-py)可能也有帮助。

# c# - asp.net 和 VSTO 项目的混合

> ID：14764602
> 
> 赞同：0
> 
> 时间：2013-02-08T02:07:43.457
> 
> 标签：c#, asp.net, vsto

我有一个使用 asp.net mvc4 的网站，以及一个需要更新并从我的网站获取一些数据的 VSTO 自动化（客户端）。

实际上我正在尝试使用 HttpWebRequest 对象来执行对话框。在 VSTO 和网络之间。

现在我正在考虑将一些 json 对象从网络返回到 VSTO。但是我该怎么做才能从 VSTO 发送到网络呢？

更好的方法是发送 XML 吗？如果是的话，目前在 c# 中执行此操作的方法是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T02:15:50.460

您可以创建一个与通过 JSON 发送的对象匹配的 C# 对象，然后使用通过 .net 默认序列化程序或 json.NET 对其进行反序列化。调查 DataContract 属性以获取更多信息。

# android - 如何拦截来自 ViewPager.OnPageChangeListener 的触摸事件

> ID：14764603
> 
> 赞同：6
> 
> 时间：2013-02-08T02:07:45.267
> 
> 标签：android, tabs, scroll, touch, android-viewpager

我试图禁止我的 ViewPager 在选项卡之间滚动。我有以下情况：

```
 public class MyClass extends ViewPager implements ViewPager.OnPageChangeListener, OnTouchListener {

             public MyClass() {
               setOnTouchListener(this);
             }

@Override
    public void onPageScrollStateChanged(int state) {
        Log.d("Testing", TAG + " onPageScrollStateChanged");
    }

    @Override
    public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {
        Log.d("Testing", TAG + " onPageScrolled");
    }

    @Override
    public void onPageSelected(int position) {
        Log.d("Testing", TAG + " onPageSelected");
    }

        @Override
        public boolean onInterceptTouchEvent(MotionEvent event) {
            Log.d("Testing", "intercept");
                return false;
        }

            @Override
            public boolean onTouch(View v, MotionEvent event) {
                Log.d("Testing", "touch2");
                    return false;
            }

        } 
```

我通常有来自 onPageScrolled 和 onPageScrollStateChanged 的​​日志，但我没有来自 onInterceptTouchEvent 和 onTouch 的日志。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-08T03:02:54.260

这就是我处理这个（我的整个班级）的方式：

```
public class SelectiveViewPager extends ViewPager {
private boolean paging = true;

public SelectiveViewPager(Context context) {
    super(context);
}

public SelectiveViewPager(Context context, AttributeSet attributeSet){
    super(context, attributeSet);
}

@Override
public boolean onInterceptTouchEvent(MotionEvent e) {
    if (paging) {
        return super.onInterceptTouchEvent(e);
    }

    return false;
}

public void setPaging(boolean p){ paging = p; }

} 
```

如果需要，布尔值`paging`使您可以选择打开和关闭它。如果您不需要，只需`return false`. 如果您没有在 中做任何特别的事情`onTouch`，则不需要覆盖它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T03:27:08.243

`return true;`在你的`onInterceptTouchEvent();`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T02:11:57.763

顺便说一句，您的构造函数不会被调用。您是通过代码创建视图寻呼机还是通过 xml 膨胀它？您需要定义正确的构造函数。

# bash - 大文本中的 Sed 替换

> ID：14764609
> 
> 赞同：0
> 
> 时间：2013-02-08T02:08:07.737
> 
> 标签：bash

场景：尝试使用 sed 修改大部分 httpd 配置文件。

我试过的：

```
read -d '' _OLD <<"EOF"
<Directory "/var/www/html">

#
# Possible values for the Options directive are "None", "All",
# or any combination of:
#   Indexes Includes FollowSymLinks SymLinksifOwnerMatch ExecCGI MultiViews
#
# Note that "MultiViews" must be named *explicitly* --- "Options All"
# doesn't give it to you.
#
# The Options directive is both complicated and important.  Please see
# http://httpd.apache.org/docs/2.2/mod/core.html#options
# for more information.
#
    Options Indexes FollowSymLinks

#
# AllowOverride controls what directives may be placed in .htaccess files.
# It can be "All", "None", or any combination of the keywords:
#   Options FileInfo AuthConfig Limit
#
    AllowOverride None
EOF

read -d '' _NEW <<"EOF"
<Directory "/var/www/html">

#
# Possible values for the Options directive are "None", "All",
# or any combination of:
#   Indexes Includes FollowSymLinks SymLinksifOwnerMatch ExecCGI MultiViews
#
# Note that "MultiViews" must be named *explicitly* --- "Options All"
# doesn't give it to you.
#
# The Options directive is both complicated and important.  Please see
# http://httpd.apache.org/docs/2.2/mod/core.html#options
# for more information.
#
    Options Indexes FollowSymLinks

#
# AllowOverride controls what directives may be placed in .htaccess files.
# It can be "All", "None", or any combination of the keywords:
#   Options FileInfo AuthConfig Limit
#
    AllowOverride All
EOF

echo -n ${_OLD}
echo -n ${_NEW}
sed -i "s/$_OLD/$_NEW/g" /etc/httpd/conf/httpd.conf 
```

如果您注意到唯一改变的是`AllowOverride All`我只想为`/var/www/html`其他实例而不是为其他实例修改规则，因此我为什么要查看整个块。

我知道可能有更好的方法来做我想要完成的事情。方向将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T02:33:08.287

```
sed -r '\%<Directory "/var/www/html">%,\%</Directory>% s%(AllowOverride)\s+None%\1 All%i' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T02:24:44.057

好吧，我的（过期）版本`sed`不允许多行“旧”模式（正则表达式），并且需要多行替换在换行符之前有反斜杠，如

```
sed "s/lifetime/birth\
…\
death/" 
```

……所以这是一两个问题。另一个是您将`/`其用作分隔符，即使您的模式和替换中有斜杠。

我建议你使用正则表达式地址：

```
sed '/<Directory "\/var\/www\/html">/,/AllowOverride/s/AllowOverride None/AllowOverride All/' 
```

换句话说，在*一行和下一**行*~~之间~~*的*`s/AllowOverride None/AllowOverride All/`任何适用行上进行替换。（注意第一个正则表达式中的引号。） *`<Directory "/var/www/html">` *`AllowOverride`**

 **** * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T02:20:26.350

为什么不使用正则表达式？Sed 本身就支持它们。 [更多细节在这里](http://www.gnu.org/software/sed/manual/html_node/Regular-Expressions.html)。***

# flash - 使用 Adob e Flash Builder，如何制作一个可以在桌面、移动设备和 Web 上运行的项目？

> ID：14764612
> 
> 赞同：0
> 
> 时间：2013-02-08T02:08:45.313
> 
> 标签：flash, mobile, adobe, cross-platform, flash-builder

我正在尝试使用 Flash Builder，但有些事情困扰着我。

假设您制作了一个移动应用程序项目，但想将其作为桌面应用程序进行测试，是否每次要测试时都必须将项目导出/转换为桌面应用程序项目？

虽然我希望我的应用程序是跨平台的，但我不希望每个平台（网络、桌面、移动等）都有多个项目。

有没有更简单或更简单的解决方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T12:52:32.280

我处理这种情况的方法是创建一个包含应用程序的库项目；使用（例如）组作为顶级可视组件，而不是 [Windowed] 应用程序。

然后我创建了一个移动项目，并将顶级组作为其唯一的孩子；并为桌面项目做同样的事情。

因此，工作流程是在库项目中编码并使用移动或桌面项目进行调试。

# ajax - Primefaces：所有ajax请求的默认oncomplete方法

> ID：14764619
> 
> 赞同：4
> 
> 时间：2013-02-08T02:10:21.570
> 
> 标签：ajax, jquery, primefaces

我正在尝试为所有 ajax 请求配置一个 oncomplete 方法，以便我可以处理会话超时。

我尝试添加以下脚本，但它与为 p:ajax 元素设置 oncomplete 属性的方式不同。它不会在每次发出 Ajax 请求时执行。

```
$.ajaxSetup({method: post,
    complete: function(xhr, status, args){
        var xdoc = xhr.responseXML;
        if(xdoc == null){
            return;
        }
        errorNodes = xdoc.getElementsByTagName('error-name');

        if (errorNodes.length == 0) {
            return;
        }

        errorName = errorNodes[0].childNodes[0].nodeValue;
        errorValueNode = xmlDoc.getElementsByTagName('error-message');
        errorValue = errorValueNode[0].childNodes[0].nodeValue;

        alert(errorValue);
        document.location.href='${pageContext.request.contextPath}/login/login.jsf';
    }
}); 
```

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-05-22T17:04:15.613

PrimeFaces 较新版本（此处使用 PF 5）

```
var originalPrimeFacesAjaxUtilsSend = PrimeFaces.ajax.Request.send;
PrimeFaces.ajax.Request.send = function(cfg) {
    if (!cfg.oncomplete) {
        cfg.oncomplete = doYourStuff;
    }
    originalPrimeFacesAjaxUtilsSend.apply(this, arguments);
}; 
```

只是为了把它保存在某个地方，试图在stackoverflow上找到但只有旧版本..希望有人觉得这很有用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-08T21:17:50.067

我设法通过包装 Primefaces AjaxUtils 方法来实现这一点。

```
var originalPrimeFacesAjaxUtilsSend = PrimeFaces.ajax.AjaxUtils.send;

   PrimeFaces.ajax.AjaxUtils.send = function(cfg) {
      if (!cfg.oncomplete) {
         // register default handler
         cfg.oncomplete = oncompleteDefaultHandler;
      }
      originalPrimeFacesAjaxUtilsSend.apply(this, arguments);
   }; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-08T10:51:48.317

在 primefaces 中有`ajaxStatus`一个可以用于此目的的组件。阅读文档以查看有关它的更多详细信息，但对于您的用例，它可能是这样的：

```
<p:ajaxStatus oncomplete="ajaxStatusHandler(xhr, status, args)"/> 
```

您可以按原样使用您的 JavaScript 函数：

```
function ajaxStatusHandler(xhr, status, args) {
  // your code ...
} 
```

注意：此方法仅可用于全局 AJAX 请求（PrimeFaces 中的默认设置），而且据我所知，跨域脚本或[JSONP](http://en.wikipedia.org/wiki/JSONP)（带填充的 JSON）请求不能是全局的。

# javascript - 从 JSONP 中提取函数的 JSON 参数

> ID：14764625
> 
> 赞同：1
> 
> 时间：2013-02-08T02:10:54.797
> 
> 标签：javascript, json, node.js

我有一个 json 响应，里面有一个函数调用。解析后看起来像字符串

```
"foo({a: 5}, 5, 100)" 
```

如何提取函数调用的第一个参数（在本例中为`{a: 5}`）？

*更新*

这是来自服务器端的代码

```
var request = require('request')
  , cheerio = require('cheerio');

var url = 'http://www.google.com/dictionary/json?callback=dict_api.callbacks.id100&q=test&sl=en&tl=en';

request({url: url, 'json': true}, function(error, resp, body){
  console.log(typeof JSON.parse(body)); // => string
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T02:19:06.540

```
foo({a: 5}, 5, 100);

function foo(){
    var the_bit_you_want = arguments[0];
    console.log(the_bit_you_want); 
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T02:19:39.363

这很简单，在您的 foo 函数中使用以下内容：

```
arguments[0]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-08T02:29:28.557

Google Dictionary API（未记录）使用 JSONP，它不是真正的 JSON，因此您不能以您喜欢的方式在 node.js 中使用它（如您在评论中指出的那样）。你必须得到`eval()`回应。

注意查询参数有`callback=dict_api.callbacks.id100`什么？这意味着返回的数据将像这样返回：`dict_api.callbacks.id100(/* json here */, 200, null)`

因此，您有两个选择： 1：在您的代码中创建一个函数：

```
var dict_api = { callbacks: { id100: function (json_data) {
    console.log(json_data);
}};

request({url: url, 'json': true}, function(error, resp, body){
    // this is actually really unsafe. I don't recommend it, but it'll get the job done
    eval(body);
}); 
```

或者，您可以删除开始 ( `dict_api.callbacks.id100(`) 和结束 ( `,200,null)`[假设这将始终相同])，然后`JSON.parse()`是生成的字符串。

```
request({url: url, 'json': true}, function(error, resp, body){
    // this is actually really unsafe. I don't recommend it, but it'll get the job done
    var json_string = body.replace('dict_api.callbacks.id100(', '').replace(',200,null)', '');
    console.log(JSON.parse(json_string));
}); 
```

# xpath - 在带有 CXFRS 端点和 xPath 的 Camel 中遇到基于内容的路由问题

> ID：14764627
> 
> 赞同：1
> 
> 时间：2013-02-08T02:11:11.443
> 
> 标签：xpath, apache-camel, cxfrs

我正在尝试使用 xPath 创建由 REST 有效负载中的内容确定的路由。我已经成功使用基于消息头的路由：

```
<when>
   <simple>${headers.operationName} == 'createContainerOutput'</simple>
   <bean ref="containerOutputProcessor"/>
</when> 
```

它正确调用了 containerOutputProcessor ...

但是对于这个 xPath 路由：

```
<when>
    <xpath>/*[local-name()='order-request']/@type='TrayOutput'</xpath>
    <bean ref="containerOutputProcessor"/>
</when> 
```

我得到了例外：

org.apache.camel.NoTypeConversionAvailableException：没有类型转换器可用于从类型：org.apache.cxf.message.MessageContentsList 转换为所需的类型：org.w3c.dom.Document，值为 [com.mmi.ws.ContainerOutputOrderRequest@6290dc ]

对于这个有效载荷

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<order-request type="TrayOutput">
    <parameter name="orderName">Example Tray Output Order</parameter>
    <parameter name="enableScan">true</parameter>
    <parameter name="autoStart">false</parameter>
    <parameter name="priority">3</parameter>
    <item barcode="23990001"/>
    <item barcode="23990002"/>
</order-request> 
```

这种类型的路由是个好主意吗？是否有更好的方法来根据提交的订单请求类型进行路由？

感谢您对我的任何帮助/指导！

* * *

这是完整的上下文

```
<?xml version='1.0' encoding='UTF-8'?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
    xmlns:util="http://www.springframework.org/schema/util"
    xmlns:jaxrs="http://cxf.apache.org/jaxrs"
    xmlns:cxf="http://camel.apache.org/schema/cxf"
    xsi:schemaLocation="
     http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
     http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd
     http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.0.xsd
     http://camel.apache.org/schema/spring http://camel.apache.org/schema/spring/camel-spring.xsd
     http://cxf.apache.org/jaxrs http://cxf.apache.org/schemas/jaxrs.xsd
     http://camel.apache.org/schema/cxf http://camel.apache.org/schema/cxf/camel-cxf.xsd">

  <!-- enable Spring @Component scan -->
  <context:component-scan base-package="com.mmi.ws"/>

    <!--  web service beans -->
  <bean id="containerOutputWS" class="com.mmi.ws.service.impl.ContainerOutputWSImpl" />
  <bean id="containerTypesWS" class="com.mmi.ws.service.impl.ContainerTypesWSImpl" />

  <!-- processor beans -->
  <bean id="containerOutputProcessor" class="com.mmi.ws.service.ContainerOutputProcessor" />
  <bean id="containerTypesProcessor" class="com.mmi.ws.service.ContainerTypesProcessor" />
  <bean id="unsupportedPathProcessor" class="com.mmi.ws.service.UnsupportedPathProcessor" />

  <!-- Define the real JAXRS back end service  -->
  <jaxrs:server id="restService"
                address="http://localhost:9998/sc" 
                staticSubresourceResolution="true">
    <jaxrs:serviceBeans>
      <ref bean="containerOutputWS"/>
      <ref bean="containerTypesWS"/>
    </jaxrs:serviceBeans>       
  </jaxrs:server>

  <!--  define the restful server and client endpoints -->
  <cxf:rsServer id="rsServer" address="http://localhost:9999/sc" loggingFeatureEnabled="true" loggingSizeLimit="20">
    <cxf:serviceBeans >
      <ref bean="containerOutputWS"/>
      <ref bean="containerTypesWS"/>
    </cxf:serviceBeans>
  </cxf:rsServer>

  <cxf:rsServer id="rsClient" address="http://localhost:9998/sc" loggingFeatureEnabled="true" loggingSizeLimit="20">
    <cxf:serviceBeans >
      <ref bean="containerOutputWS"/>
      <ref bean="containerTypesWS"/>
    </cxf:serviceBeans>
  </cxf:rsServer>

  <camelContext id="camel" xmlns="http://camel.apache.org/schema/spring">
    <!-- 
       any classes in the below 'packageScan'packages that extends RouteBuilder
       will be added as a camel route.  At least one route is required to start the cxf web service
    -->
    <packageScan>
        <package>com.mmi.ws</package>
    </packageScan>

    <dataFormats>
     <xstream id="xstream-utf8" encoding="UTF-8"/>
     <xstream id="xstream-default"/>
    </dataFormats>

    <!-- route starts from the cxf webservice  -->
    <route streamCache="true">
       <from uri="cxfrs://bean://rsServer"/>
        <log message="XML payload to send to REST WS:${body}" />        
        <setHeader headerName="CamelCxfRsUsingHttpAPI"><constant>True</constant> </setHeader>
        <choice>
            <when>
                <simple>${headers.operationName} == 'getContainers'</simple>
                <bean ref="containerTypesProcessor"/>
            </when>
            <when>
                <xpath>/*[local-name()='order-request']/@type='TrayOutput'</xpath>
                <bean ref="containerOutputProcessor"/>
            </when>
            <otherwise>
                <bean ref="unsupportedPathProcessor"/>
                <to uri="cxfrs://bean://rsClient"/>
            </otherwise>
        </choice>
    </route>    
  </camelContext>
</beans> 
```

和网络服务类：

```
@Path("/container/output/")
public class ContainerOutputWSImpl 
{
    @POST
    @Produces({ MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON })
    @Consumes({ MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON })
    public ContainerOutputView createContainerOutput(ContainerOutputOrderRequest containerOutput) {
        // TODO Auto-generated method stub
        return new ContainerOutputView();
    }
} 
```

最后是 xml 有效负载和错误堆栈：

```
Address: http://localhost:9999/sc/container/output/
Encoding: ISO-8859-1
Http-Method: POST
Content-Type: application/xml
Headers: {accept-encoding=[gzip,deflate], connection=[keep-alive], Content-Length=[384], content-type=[application/xml], Host=[localhost:9999], User-Agent=[Apache-HttpClient/4.1.1 (java 1.5)]}
Payload: <?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<order-request type="TrayOutput">
    <parameter name="orderName">Example Tray Output Order</parameter>
    <parameter name="enableScan">true</parameter>
    <parameter name="autoStart">false</parameter>
    <parameter name="priority">3</parameter>
    <item barcode="23990001"/>
    <item barcode="23990002"/>
</order-request>

--------------------------------------
[ERROR] 2013-02-07  17:53:37.059  [qtp27633254-28: DefaultErrorHandler] Failed delivery for (MessageId: ID-PWY-EHANSEN-3070-1360288389778-0-2 on ExchangeId: ID-PWY-EHANSEN-3070-1360288389778-0-1). Exhausted after delivery attempt: 1 caught: org.apache.camel.RuntimeCamelException: org.apache.camel.NoTypeConversionAvailableException: No type converter available to convert from type: org.apache.cxf.message.MessageContentsList to the required type: org.w3c.dom.Document with value [com.mmi.ws.ContainerOutputOrderRequest@9fbbe5]
org.apache.camel.RuntimeCamelException: org.apache.camel.NoTypeConversionAvailableException: No type converter available to convert from type: org.apache.cxf.message.MessageContentsList to the required type: org.w3c.dom.Document with value [com.mmi.ws.ContainerOutputOrderRequest@9fbbe5]
    at org.apache.camel.util.ObjectHelper.wrapRuntimeCamelException(ObjectHelper.java:1271)
    at org.apache.camel.builder.xml.XPathBuilder.getDocument(XPathBuilder.java:1027)
    at org.apache.camel.builder.xml.XPathBuilder.doInEvaluateAs(XPathBuilder.java:850)
    at org.apache.camel.builder.xml.XPathBuilder.evaluateAs(XPathBuilder.java:757)
    at org.apache.camel.builder.xml.XPathBuilder.matches(XPathBuilder.java:145)
    at org.apache.camel.processor.ChoiceProcessor.process(ChoiceProcessor.java:66)
    at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:73)
    at org.apache.camel.processor.DelegateAsyncProcessor.processNext(DelegateAsyncProcessor.java:99)
    at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:90)
    at org.apache.camel.management.InstrumentationProcessor.process(InstrumentationProcessor.java:73)
    at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:73)
    at org.apache.camel.processor.DelegateAsyncProcessor.processNext(DelegateAsyncProcessor.java:99)
    at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:90)
    at org.apache.camel.processor.interceptor.TraceInterceptor.process(TraceInterceptor.java:91)
    at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:73)
    at org.apache.camel.processor.RedeliveryErrorHandler.processErrorHandler(RedeliveryErrorHandler.java:334)
    at org.apache.camel.processor.RedeliveryErrorHandler.process(RedeliveryErrorHandler.java:220)
    at org.apache.camel.processor.interceptor.StreamCachingInterceptor.process(StreamCachingInterceptor.java:52)
    at org.apache.camel.processor.RouteContextProcessor.processNext(RouteContextProcessor.java:45)
    at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:90)
    at org.apache.camel.processor.interceptor.DefaultChannel.process(DefaultChannel.java:303)
    at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:73)
    at org.apache.camel.processor.Pipeline.process(Pipeline.java:117)
    at org.apache.camel.processor.Pipeline.process(Pipeline.java:80)
    at org.apache.camel.processor.RouteContextProcessor.processNext(RouteContextProcessor.java:45)
    at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:90)
    at org.apache.camel.processor.UnitOfWorkProcessor.processAsync(UnitOfWorkProcessor.java:150)
    at org.apache.camel.processor.UnitOfWorkProcessor.process(UnitOfWorkProcessor.java:117)
    at org.apache.camel.processor.RouteInflightRepositoryProcessor.processNext(RouteInflightRepositoryProcessor.java:48)
    at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:90)
    at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:73)
    at org.apache.camel.processor.DelegateAsyncProcessor.processNext(DelegateAsyncProcessor.java:99)
    at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:90)
    at org.apache.camel.management.InstrumentationProcessor.process(InstrumentationProcessor.java:73)
    at org.apache.camel.component.cxf.jaxrs.CxfRsInvoker.asyncInvoke(CxfRsInvoker.java:87)
    at org.apache.camel.component.cxf.jaxrs.CxfRsInvoker.performInvocation(CxfRsInvoker.java:57)
    at org.apache.cxf.service.invoker.AbstractInvoker.invoke(AbstractInvoker.java:96)
    at org.apache.cxf.jaxrs.JAXRSInvoker.invoke(JAXRSInvoker.java:201)
    at org.apache.cxf.jaxrs.JAXRSInvoker.invoke(JAXRSInvoker.java:102)
    at org.apache.cxf.interceptor.ServiceInvokerInterceptor$1.run(ServiceInvokerInterceptor.java:58)
    at org.apache.cxf.interceptor.ServiceInvokerInterceptor.handleMessage(ServiceInvokerInterceptor.java:94)
    at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:271)
    at org.apache.cxf.transport.ChainInitiationObserver.onMessage(ChainInitiationObserver.java:121)
    at org.apache.cxf.transport.http_jetty.JettyHTTPDestination.serviceRequest(JettyHTTPDestination.java:355)
    at org.apache.cxf.transport.http_jetty.JettyHTTPDestination.doService(JettyHTTPDestination.java:319)
    at org.apache.cxf.transport.http_jetty.JettyHTTPHandler.handle(JettyHTTPHandler.java:72)
    at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1074)
    at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1010)
    at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:135)
    at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:255)
    at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:116)
    at org.eclipse.jetty.server.Server.handle(Server.java:365)
    at org.eclipse.jetty.server.AbstractHttpConnection.handleRequest(AbstractHttpConnection.java:485)
    at org.eclipse.jetty.server.AbstractHttpConnection.content(AbstractHttpConnection.java:937)
    at org.eclipse.jetty.server.AbstractHttpConnection$RequestHandler.content(AbstractHttpConnection.java:998)
    at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:856)
    at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:240)
    at org.eclipse.jetty.server.AsyncHttpConnection.handle(AsyncHttpConnection.java:82)
    at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:627)
    at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:51)
    at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:608)
    at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:543)
    at java.lang.Thread.run(Thread.java:722) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-09T08:33:21.900

在基于内容的路由器之前，您可以将消息转换为从内部 CXF 列表中取出有效负载。使用简单语言有一个技巧可以从列表中获取第一个索引：

```
<transform>
   <simple>${body[0]}</simple>
</transform>
<choice>
   ... 
```

你在类路径上有camel-jaxb吗？如果是这样，它可以在没有那个技巧的情况下开箱即用。不过不确定，因为 CXF 有点特别。还取决于您使用的 Camel / CXF 版本。当你问问题时，你真的应该提到这一点！

# android - Android CountDownTimer 减慢应用程序页面转换

> ID：14764634
> 
> 赞同：2
> 
> 时间：2013-02-08T02:12:00.740
> 
> 标签：android, countdowntimer

我在我的应用程序的每个活动中都分离了 CountDownTimer，但是当我在活动之间切换时会出现问题，有几毫秒的延迟，我需要在活动之间直接切换，没有任何延迟。例如，我在具有 CountDownTimer 的活动 1 中，当我按下按钮转到也具有 CountDownTimer 的第二个活动时，需要一些毫秒才能带来活动 2。这是我的代码

```
 countDownTimer21 =  new CountDownTimer(6000, 1000) {
        public void onTick(long millisUntilFinished) {

            strLong = Long.toString(millisUntilFinished / 1000);
            time.setText(strLong);

        }
        public void onFinish() {
            Intent fail = new Intent(Test10_D.this, FailPage10.class);
            fail.putExtra("scorerecord", myscore);
            next.putExtra("scorevalue", strLong);
            startActivity(fail);
            countDownTimer21.cancel();
            //finish();
        }
     }.start(); 
```

有什么建议么？多谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T03:23:15.003

我认为您已经在两个不同的活动中创建了两个倒数计时器，当您从第一个 -> 第二个活动开始时，第一个计时器弯腰，第二个从第一个活动的计时器提供的值恢复。

所以解决方案是在一个单独的线程中编写单个通用计时器，如下所示：在一个单独的服务中编写您的倒计时计时器，并通过屏幕上的活动处理程序在 UI 上显示倒计时。就是这样

# iis - ASP.NET MVC 4 应用程序是否必须位于 IIS 8 站点的根文件夹中？

> ID：14764639
> 
> 赞同：2
> 
> 时间：2013-02-08T02:12:47.840
> 
> 标签：iis, asp.net-mvc-4

我有一个基于 VS 2012 Basic 模板的 ASP.NET MVC 4 应用程序。使用 VS 2012，我可以将应用程序部署到 IIS 服务器的根目录中，例如 c:\inetpub\wwwroot。然后，我可以转到 [http://]mymachine/ 并查看该应用程序。

但是，如果我尝试将应用程序移动到 c:\inetpub\wwwroot\Test，尝试访问 [http://]mymachine/Test 会导致“HTTP 错误 403.14 - 禁止 Web 服务器配置为不列出内容这个目录的。”

我尝试手动移动文件夹，也尝试从 VS 2012 部署到该文件夹​​，但没有区别。我试图将 web.config 文件移动到 c:\inetpub\wwwroot 中，同时将应用程序的其余部分留在 c:\inetpub\wwwroot\Test 下，但这也不起作用。我必须将 global.asax、global.asax.cs 和 bin 文件夹移动到站点根目录中，但随后整个应用程序再次位于根文件夹中，这不是我想要的。

有谁知道我正在尝试做的事情是否可行？谢谢。

PS.：对链接格式感到抱歉 - 我使用 [http://] 周围的方括号来防止 stackoverflow 将示例 URI 视为链接。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T07:05:25.727

您需要确保子文件夹已被转换（或创建）为 IIS 中的应用程序。加载 IIS 管理器并在树中找到网站节点下的文件夹，右键单击并选择转换为应用程序。如果未列出，请使用添加应用程序选项。

请记住，默认情况下，子应用程序将从其父应用程序继承 web.config 设置（除其他外）。更多信息可以在[MSDN](http://msdn.microsoft.com/en-us/library/ms178685%28v=vs.100%29.aspx)上找到。

# javascript - 手动触发按钮事件

> ID：14764641
> 
> 赞同：-2
> 
> 时间：2013-02-08T02:12:57.107
> 
> 标签：javascript, jquery, asp.net, button

我有`asp:Button`一个`Onclientclick Event`做一些操作的。

我想`OnclientClick`使用 JavaScript 或 Jquery 手动触发它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T02:22:52.220

这是网络表单，您需要执行以下操作：

```
$("#<%= ASPButtonID.ClientID %>").click(); 
```

其中 ASPButtonID 是按钮的名称。

回应您的评论：添加一个点击处理程序，如下所示：

```
$($("#<%= ASPButtonID.ClientID %>").click(function(){ 
   // call your JS function from here 
});); 
```

然后拨打上面的电话

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T02:14:59.787

```
$("#buttonID").trigger("click"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T02:25:21.990

您还可以使用以下方法触发按钮的单击事件：

```
$("#buttonID").click(); 
```

# git - 每次提交的平均 LOC (github)

> ID：14764643
> 
> 赞同：-2
> 
> 时间：2013-02-08T02:13:11.220
> 
> 标签：git, version-control, github

这是一个针对 Github 用户的完全主观的问题......

您每次提交的平均代码行更改数是多少？

我发现自己在每 50 行代码更改后提交，我认为这有点荒谬:) 想知道其他用户表现出什么样的提交行为..

如果有人对任何 VCS 站点集合中每次提交的平均 LOC 更改有任何硬性统计数据，那也将受到欢迎

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T02:17:28.223

我个人更喜欢尽可能小的提交。但这与每次提交的行数无关。一般规则：一个错误/功能 - 一次提交。它有利于代码的协作和未来的维护。

# arrays - 如何从 CSV 文件中读取数据并将信息存储到数组中？

> ID：14764644
> 
> 赞同：-1
> 
> 时间：2013-02-08T02:13:13.573
> 
> 标签：arrays, vb.net, csv

我在 CSV 文件中有两列，我需要将每一列存储在一个单独的数组中。

```
Name,AvalibilityAsBoolean
---------------------------
Vagarth Gaurav,True
Dhananjay Menon,False 
```

我想要一个数组作为名称，另一个数组作为可用性作为布尔值存储，类似于下面。

```
Name(0) = "Vagarth Gaurav"
Name(1) = "Dhananjay Menon"
Available(0) = True
Available(1) = False 
```

唯一的问题是读取 CSV 并将字符串和布尔值存储到正确的数组中。

请帮忙，我是VB的新手。我正在使用 Visual Basic 2010

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T02:52:51.813

我敢肯定这个问题之前已经被问过，但这应该会有所帮助。利用[TextFieldParser 类](http://msdn.microsoft.com/en-us/library/cakac7e6%28v=vs.90%29.aspx)为您进行解析很容易。此代码示例中也显示了用于管理这两个数组的代码。

```
 Dim arrName() As String
    Dim arrValue() As String

    Using ioReader As New Microsoft.VisualBasic.FileIO.TextFieldParser("C:\test\test.csv")

        ioReader.TextFieldType = FileIO.FieldType.Delimited
        ioReader.SetDelimiters(",")

        While Not ioReader.EndOfData

            Dim arrCurrentRow As String() = ioReader.ReadFields()

            If arrName Is Nothing Then

                ReDim Preserve arrName(0)
                ReDim Preserve arrValue(0)

                arrName(0) = arrCurrentRow(0)
                arrValue(0) = arrCurrentRow(1)

            Else

                ReDim Preserve arrName(arrName.Length)
                ReDim Preserve arrValue(arrValue.Length)

                arrName((arrName.Length - 1)) = arrCurrentRow(0)
                arrValue((arrValue.Length - 1)) = arrCurrentRow(1)

            End If

        End While 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T07:10:38.347

```
Dim sData() As String
Dim arrName, arrValue as New List(Of String)()

Using sr As New StreamReader(sFile)
    While Not sr.EndOfStream
        sData = sr.ReadLine().Split(","c)

        arrName.Add(sData(0).Trim())
        arrValue.Add(sData(1).Trim())
    End While
End Using 
```

您可能希望将您的值存储为`Boolean`(available, notAvailable)。您可以执行以下操作：

```
Dim arrValue As New List(Of Boolean)()
...

    arrValue.Add(Not sData(1).Trim().ToUpper().StartsWith("NOT")) 
```

# vim - 你可以根据文件类型动态设置vim快捷方式吗？

> ID：14764646
> 
> 赞同：2
> 
> 时间：2013-02-08T02:13:16.803
> 
> 标签：vim, exuberant-ctags

我有一个自定义的“转到定义”快捷方式，在 python 中效果很好（使用ropevim），但是当我在咖啡脚本文件中时，我需要使用正常的 ctags 查找来导航。根据当前缓冲区中打开的文件类型，是否可以只创建一个执行ropevim 查找或ctags 查找的快捷方式？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-08T06:42:31.210

您可以在映射中放置`if`/测试，但这有点混乱。`endif``:execute`

您应该做的是在特定于文件类型的`autocmd`s 中定义您的映射（请参阅参考资料`:h autocmd`）：

```
autocmd FileType python nnoremap this that 
```

或者，更好的是，在`~/.vim/after/ftplugin/python.vim`（以及另一个用于咖啡脚本的文件等）中定义它们：

```
nnoremap <buffer> this that 
```

# c# - 通过 ref 传递实现：不能从 'Foo' 转换为 'ref IFoo'

> ID：14764649
> 
> 赞同：10
> 
> 时间：2013-02-08T02:13:35.603
> 
> 标签：c#, interface, reference, argument-passing

有人可以向我解释为什么这在 C# 中不正确：

```
namespace NamespaceA
{
    public class ClassA
    {
        public interface IInterfaceA
        {
            String Property
            {
                set;
            }
        }
    }
}

namespace NamespaceB
{
    public class ClassB
    {
        public class ImpA: NamespaceA.ClassA.IInterfaceA
        {
            private String mProperty;
            public String Property{ set{ mProperty = value; } }
        }
        public ClassB()
        {
            ImpA aImpA = new ImpA();
            foo(ref aImpA);
        }

        private void foo(ref NamespaceA.ClassA.IInterfaceA aIInterfaceA)
        {
            aIInterfaceA.Property = "SomeValue";
        }
    }
} 
```

这将产生以下编译错误：

> 错误参数 1：无法从 'NamespaceB.ClassB.ImpA' 转换为 'ref NamespaceA.ClassA.IInterfaceA'

想要修改接口属性并从`foo()`. 如果您删除`ref`关键字，它会编译，但您所做的更改`foo()`会丢失......

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2015-11-25T23:42:54.277

正如 Karthik 所说，`ref`不`out`支持面向对象的多态性。但是你可以使用泛型（又名*参数*多态）来达到同样的效果。

尝试将签名更改`foo`为：

```
private void foo<T>(ref T aIInterfaceA) 
    where T : NamespaceA.ClassA.IInterfaceA
{
    aIInterfaceA.Property = "SomeValue";

    // This assignment will be visible to the caller of foo
    aIInterfaceA = default(T);
} 
```

**奖励**——如果你愿意，你可以`new()`对类型参数施加一个约束`T`，然后它甚至可以让你调用它的默认构造函数：

```
private void foo<T>(ref T aIInterfaceA) 
    where T : NamespaceA.ClassA.IInterfaceA, new()
{
    aIInterfaceA.Property = "SomeValue";

    // This assignment will be visible to the caller of foo
    aIInterfaceA = new T();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T02:29:09.753

首先，这里不需要使用`ref`关键字。

您将引用类型的实例作为参数传递，并且不需要将参数标记为`ref`能够修改其状态，此处为`Property`属性。只需删除`ref`关键字，它就会按预期工作。

其次，只是想一想。只要接口的实例是引用类型，`ref`参数就可以更改传递的引用，因此理论上您可以返回该接口的完全不同的实现。

因此，绝对没有从`IInterfaceA`to的隐式转换`ImpA`，而您的代码需要它。

# delphi - 在 XE 中使用 pchar 数组作为参数调用外部 dll

> ID：14764652
> 
> 赞同：0
> 
> 时间：2013-02-08T02:13:50.553
> 
> 标签：delphi, dll, unicode, pchar

我有一个在 delphi 6 中运行良好的 delphi 项目，但是当我升级到 XE 时它不起作用。我知道这与 delphi XE 中的新 unicode 类型有关，我尝试将参数的定义从 pchar 更改为 pansichar、ansichar 但到目前为止没有成功。谁能看到我做错了什么？我的项目在第三方 dll 中调用了一个函数，该函数的定义如下：

```
type
PPChar = array of PChar;
{$EXTERNALSYM gsapi_init_with_args}
function gsapi_init_with_args(pinstance:Pgs_main_instance;argc:integer;argv:PPChar):integer; stdcall;

Implementation
{$EXTERNALSYM gsapi_init_with_args}
function gsapi_init_with_args; stdcall; external gsdll32 name 'gsapi_init_with_args'; 
```

这就是我调用该函数的方式。

```
procedure PSPDF(input : string; output:string);
var
code:integer;
instance:Pointer;
argv:array of PAnsiChar;

begin
new(instance);
setlength(argv,10);
code:=gsapi_new_instance(@instance,nil);
if code<>0 then
begin
raise Exception.Create('Impossible to open an instance of ghostscript. Error code: '+IntToStr(code));
end;

try

argv[0] := PAnsiChar('ps2pdf');
argv[1] := PAnsiChar('-dNOPAUSE');
argv[2] := PAnsiChar('-dBATCH');
argv[3] := PAnsiChar('-dSAFER');
argv[4] := PAnsiChar('-sDEVICE=pdfwrite');
argv[5] := PAnsiChar(PAnsiString('-sOutputFile='+output));
argv[6] := PAnsiChar('-c');
argv[7] := PAnsiChar('.setpdfwrite');
argv[8] := PAnsiChar('-f');
argv[9] := PAnsiChar(PAnsiString(input));

gsapi_new_instance(instance, nil);

code := gsapi_init_with_args(instance,length(argv),@argv[0]);
if code<0 then
raise Exception.Create('ERROR: init_args: '+IntToStr(code));
gsapi_exit(instance);
gsapi_delete_instance(instance);

finally
end;
end; 
```

如果有人可以帮助我，我将不胜感激。

马里奥。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T03:33:28.363

更改`PChar`为`PAnsiChar`是正确的做法，但是`array of ...`在 DLL 函数参数中使用是不安全的，即使在您的 Delphi 6 项目中使用也是错误的。查看[官方 Ghostscript 文档](http://ghostscript.com/doc/8.54/API.htm)后，请在两个项目中尝试此操作：

```
interface

type
  PPAnsiChar = ^PAnsiChar;
  {$NODEFINE PPAnsiChar}

function gsapi_new_instance(var pinstance: Pointer; caller_handle: Pointer): Integer; stdcall;
{$EXTERNALSYM gsapi_new_instance}

procedure gsapi_delete_instance(instance: Pointer); stdcall;
{$EXTERNALSYM gsapi_delete_instance}

function gsapi_init_with_args(instance: Pointer; argc: Integer; argv: PPAnsiChar): Integer; stdcall;
{$EXTERNALSYM gsapi_init_with_args}

function gsapi_exit(instance: Pointer): Integer; stdcall;
{$EXTERNALSYM gsapi_exit}

implementation

function gsapi_new_instance; external gsdll32 name 'gsapi_new_instance';
procedure gsapi_delete_instance; external gsdll32 name 'gsapi_delete_instance';
function gsapi_init_with_args; external gsdll32 name 'gsapi_init_with_args';
function gsapi_exit; external gsdll32 name 'gsapi_exit'; 
```

.

```
procedure PSPDF(input : AnsiString; output: AnsiString);
var
  code:integer;
  instance: Pointer;
  argv: array of PAnsiChar;
begin
  code := gsapi_new_instance(instance, nil);
  if code < 0 then
    raise Exception.Create('Impossible to open an instance of ghostscript. Error code: '+IntToStr(code));
  try
    SetLength(argv, 10);
    argv[0] := PAnsiChar('ps2pdf');
    argv[1] := PAnsiChar('-dNOPAUSE');
    argv[2] := PAnsiChar('-dBATCH');
    argv[3] := PAnsiChar('-dSAFER');
    argv[4] := PAnsiChar('-sDEVICE=pdfwrite');
    argv[5] := PAnsiChar('-sOutputFile='+output);
    argv[6] := PAnsiChar('-c');
    argv[7] := PAnsiChar('.setpdfwrite');
    argv[8] := PAnsiChar('-f');
    argv[9] := PAnsiChar(input);

    code := gsapi_init_with_args(instance, Length(argv), @argv[0]);
    if code < 0 then
      raise Exception.Create('ERROR: init_args: '+IntToStr(code));
    try
      ...
    finally
      gsapi_exit(instance);
    end;
  finally
    gsapi_delete_instance(instance);
  end;
end; 
```

**更新：**这是[gsapi.pas 单元](http://read.pudn.com/downloads167/doc/767549/gsapi/gsapi.pas__.htm)的更正版本，应该在两个 Delphi 版本中都可以工作：

```
// Copyright (c) 2001-2002 Alessandro Briosi 
// 
// Permission is hereby granted, free of charge, to any person  
// obtaining a copy of this software and associated documentation  
// files (the "Software"), to deal in the Software without  
// restriction, including without limitation the rights to use, copy,  
// modify, merge, publish, distribute, sublicense, and/or sell copies  
// of the Software, and to permit persons to whom the Software is  
// furnished to do so, subject to the following conditions: 
//  
// The above copyright notice and this permission notice shall be  
// included in all copies or substantial portions of the Software. 
//  
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,  
// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF  
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND  
// NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS  
// BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN  
// ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN  
// CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE  
// SOFTWARE. 
//  
// 
// This software was written by Alessandro Briosi with the  
// assistance of Russell Lang, as an example of how the  
// Ghostscript DLL may be used Delphi. 
// 

unit gsapi; 

interface 

uses
  Windows; 

// {$HPPEMIT '#include <iminst.h>'} 

const
  gsdll32 = 'gsdll32.dll'; 

  STDIN_BUF_SIZE = 128; 
  {$EXTERNALSYM STDIN_BUF_SIZE}
  STDOUT_BUF_SIZE = 128; 
  {$EXTERNALSYM STDOUT_BUF_SIZE}
  STDERR_BUF_SIZE = 128; 
  {$EXTERNALSYM STDERR_BUF_SIZE}

  DISPLAY_VERSION_MAJOR = 1; 
  {$EXTERNALSYM DISPLAY_VERSION_MAJOR}
  DISPLAY_VERSION_MINOR = 0; 
  {$EXTERNALSYM DISPLAY_VERSION_MINOR}

  //* Define the color space alternatives */ 
  DISPLAY_COLORS_NATIVE = $01; 
  {$EXTERNALSYM DISPLAY_COLORS_NATIVE}
  DISPLAY_COLORS_GRAY   = $02; 
  {$EXTERNALSYM DISPLAY_COLORS_GRAY}
  DISPLAY_COLORS_RGB    = $04; 
  {$EXTERNALSYM DISPLAY_COLORS_RGB}
  DISPLAY_COLORS_CMYK   = $08; 
  {$EXTERNALSYM DISPLAY_COLORS_CMYK}

  DISPLAY_COLORS_MASK  = $000f; 
  {$EXTERNALSYM DISPLAY_COLORS_MASK}

  //* Define whether alpha information, or an extra unused bytes is included */ 
  //* DISPLAY_ALPHA_FIRST and DISPLAY_ALPHA_LAST are not implemented */ 
  DISPLAY_ALPHA_NONE   = $00; 
  {$EXTERNALSYM DISPLAY_ALPHA_NONE}
  DISPLAY_ALPHA_FIRST  = $10; 
  {$EXTERNALSYM DISPLAY_ALPHA_FIRST}
  DISPLAY_ALPHA_LAST   = $20; 
  {$EXTERNALSYM DISPLAY_ALPHA_LAST}
  DISPLAY_UNUSED_FIRST = $40;    //* e.g. Mac xRGB */ 
  {$EXTERNALSYM DISPLAY_UNUSED_FIRST}
  DISPLAY_UNUSED_LAST  = $80;   //* e.g. Windows BGRx */ 
  {$EXTERNALSYM DISPLAY_UNUSED_LAST}

  DISPLAY_ALPHA_MASK  = $0070; 
  {$EXTERNALSYM DISPLAY_ALPHA_MASK}

  // * Define the depth per component for DISPLAY_COLORS_GRAY, 
  // * DISPLAY_COLORS_RGB and DISPLAY_COLORS_CMYK, 
  // * or the depth per pixel for DISPLAY_COLORS_NATIVE 
  // * DISPLAY_DEPTH_2 and DISPLAY_DEPTH_12 have not been tested. 
  // * 
  DISPLAY_DEPTH_1   = $0100; 
  {$EXTERNALSYM DISPLAY_DEPTH_1}
  DISPLAY_DEPTH_2   = $0200; 
  {$EXTERNALSYM DISPLAY_DEPTH_2}
  DISPLAY_DEPTH_4   = $0400; 
  {$EXTERNALSYM DISPLAY_DEPTH_4}
  DISPLAY_DEPTH_8   = $0800; 
  {$EXTERNALSYM DISPLAY_DEPTH_8}
  DISPLAY_DEPTH_12  = $1000; 
  {$EXTERNALSYM DISPLAY_DEPTH_12}
  DISPLAY_DEPTH_16  = $2000; 
  {$EXTERNALSYM DISPLAY_DEPTH_16}
  //* unused (1<<14) */ 
  //* unused (1<<15) */ 

  DISPLAY_DEPTH_MASK  = $ff00; 
  {$EXTERNALSYM DISPLAY_DEPTH_MASK}

  // * Define whether Red/Cyan should come first, 
  // * or whether Blue/Black should come first 
  // */ 
  DISPLAY_BIGENDIAN    = $00000;    //* Red/Cyan first */ 
  {$EXTERNALSYM DISPLAY_BIGENDIAN}
  DISPLAY_LITTLEENDIAN = $10000;    //* Blue/Black first */ 
  {$EXTERNALSYM DISPLAY_LITTLEENDIAN}

  DISPLAY_ENDIAN_MASK  = $00010000; 
  {$EXTERNALSYM DISPLAY_ENDIAN_MASK}

  //* Define whether the raster starts at the top or bottom of the bitmap */ 
  DISPLAY_TOPFIRST    = $00000; //* Unix, Mac */ 
  {$EXTERNALSYM DISPLAY_TOPFIRST}
  DISPLAY_BOTTOMFIRST = $20000; //* Windows */ 
  {$EXTERNALSYM DISPLAY_BOTTOMFIRST}

  DISPLAY_FIRSTROW_MASK = $00020000; 
  {$EXTERNALSYM DISPLAY_FIRSTROW_MASK}

  //* Define whether packing RGB in 16-bits should use 555 
  // * or 565 (extra bit for green) 
  // */ 
  DISPLAY_NATIVE_555 = $00000; 
  {$EXTERNALSYM DISPLAY_NATIVE_555}
  DISPLAY_NATIVE_565 = $40000; 
  {$EXTERNALSYM DISPLAY_NATIVE_565}
  DISPLAY_555_MASK  = $00040000; 
  {$EXTERNALSYM DISPLAY_555_MASK}

type 
  TGSAPIrevision = record 
    product: PAnsiChar; 
    copyright: PAnsiChar; 
    revision: Longint; 
    revisiondat: Longint; 
  end; 

  TStdioFunction = function(caller_handle: Pointer; buf: PAnsiChar; len: Integer): Integer; stdcall; 
  TPollFunction = function(caller_handle: Pointer): Integer; stdcall; 

  TDisplayEvent = function(handle: Pointer; device: Pointer): Integer; cdecl; 
  TDisplayPreResizeEvent = function(handle: Pointer; device: Pointer; 
         width: Integer; height: Integer; raster: Integer; format: UINT): Integer; cdecl; 
  TDisplayResizeEvent = function(handle: Pointer; device: Pointer; 
         width: Integer; height: Integer; raster: Integer; format: UINT; pimage: PAnsiChar): Integer; cdecl; 
  TDisplayPageEvent = function(handle: Pointer; device: Pointer; copies: Integer; flush: Integer): Integer; cdecl; 
  TDisplayUpdateEvent = function(handle: Pointer; device: Pointer; x: Integer; y: Integer; w: Integer; h: Integer): Integer; cdecl; 
  TDisplayMemAlloc = procedure(handle: Pointer; device: Pointer; size: ulong); cdecl; 
  TDisplayMemFree = function(handle: Pointer; device: Pointer; mem: Pointer): Integer; cdecl; 

  TDisplayCallback = record 
    size: Integer; 
    version_major: Integer; 
    version_minor: Integer; 
    // New device has been opened */ 
    // This is the first event from this device. */ 
    display_open: TDisplayEvent; 
    // Device is about to be closed. */ 
    // Device will not be closed until this function returns. */ 
    display_preclose: TDisplayEvent; 
    // Device has been closed. */ 
    // This is the last event from this device. */ 
    display_close: TDisplayEvent; 
    // Device is about to be resized. */ 
    // Resize will only occur if this function returns 0\. */ 
    // raster is byte count of a row. */ 
    display_presize: TDisplayPreResizeEvent; 
    // Device has been resized. */ 
    // New pointer to raster returned in pimage */ 
    display_size: TDisplayResizeEvent; 

    // flushpage */ 
    display_sync: TDisplayEvent; 

    // showpage */ 
    // If you want to pause on showpage, then don't return immediately */ 
    display_page: TDisplayPageEvent; 

    // Notify the caller whenever a portion of the raster is updated. */ 
    // This can be used for cooperative multitasking or for 
    // progressive update of the display. 
    // This function pointer may be set to NULL if not required. 
    // 
    display_update: TDisplayUpdateEvent; 

    // Allocate memory for bitmap */ 
    // This is provided in case you need to create memory in a special 
    // way, e.g. shared.  If this is NULL, the Ghostscript memory device 
    // allocates the bitmap. This will only called to allocate the 
    // image buffer. The first row will be placed at the address 
    // returned by display_memalloc. 
    // 

    display_memalloc: TDisplayMemAlloc; 

    // Free memory for bitmap */ 
    // If this is NULL, the Ghostscript memory device will free the bitmap */ 
    display_memfree: TDisplayMemFree; 

  end; 

  PPAnsiChar = ^PAnsiChar; 
  {$NODEFINE PPAnsiChar}

function gsapi_revision(var pr: TGSAPIrevision; len: Integer): Integer; stdcall; 
{$EXTERNALSYM gsapi_revision} 
function gsapi_new_instance(var pinstance: Pointer; caller_handle: Pointer): Integer; stdcall; 
{$EXTERNALSYM gsapi_new_instance} 
procedure gsapi_delete_instance(pinstance: Pointer); stdcall; 
{$EXTERNALSYM gsapi_delete_instance} 
function gsapi_set_stdio(pinstance: Pointer; 
                         stdin_fn: TStdioFunction; stdout_fn: TStdioFunction; 
                         stderr_fn: TStdioFunction): Integer; stdcall; 
{$EXTERNALSYM gsapi_set_stdio} 
function gsapi_set_poll(pinstance: Pointer; poll_fn: TPollFunction): Integer; stdcall; 
{$EXTERNALSYM gsapi_set_poll} 
function gsapi_set_display_callback(pinstance: Pointer; const callback: TDisplayCallback): Integer; stdcall; 
{$EXTERNALSYM gsapi_set_display_callback} 
function gsapi_init_with_args(pinstance: Pointer; argc: Integer; argv: PPAnsiChar): Integer; stdcall; 
{$EXTERNALSYM gsapi_init_with_args} 
function gsapi_run_string_begin(pinstance: Pointer; user_errors: Integer; var pexit_code: Integer): Integer; stdcall; 
{$EXTERNALSYM gsapi_run_string_begin} 
function gsapi_run_string_continue(pinstance: Pointer; str: PAnsiChar; len: Integer; user_errors: Integer; var pexit_code: Integer): Integer; stdcall; 
{$EXTERNALSYM gsapi_run_string_continue} 
function gsapi_run_string_end(pinstance: Pointer; user_errors: Integer; var pexit_code: Integer): Integer; stdcall; 
{$EXTERNALSYM gsapi_run_string_end} 
function gsapi_run_string_with_length(pinstance: Pointer; str: PAnsiChar; len: Integer; user_errors: Integer; var pexit_code: Integer): Integer; stdcall; 
{$EXTERNALSYM gsapi_run_string_with_length} 
function gsapi_run_string(pinstance: Pointer; str: PAnsiChar; user_errors: Integer; var pexit_code: Integer): Integer; stdcall; 
{$EXTERNALSYM gsapi_run_string} 
function gsapi_run_file(pinstance: Pointer; file_name: PAnsiChar; user_errors: Integer; var pexit_code: Integer): Integer; stdcall; 
{$EXTERNALSYM gsapi_run_file} 
function gsapi_exit(pinstance: Pointer): Integer; stdcall; 
{$EXTERNALSYM gsapi_exit} 

implementation 

function gsapi_revision; external gsdll32 name 'gsapi_revision'; 
function gsapi_new_instance; external gsdll32 name 'gsapi_new_instance'; 
procedure gsapi_delete_instance; external gsdll32 name 'gsapi_delete_instance'; 
function gsapi_set_stdio; external gsdll32 name 'gsapi_set_stdio'; 
function gsapi_set_poll; external gsdll32 name 'gsapi_set_poll'; 
function gsapi_set_display_callback; external gsdll32 name 'gsapi_set_display_callback'; 
function gsapi_init_with_args; external gsdll32 name 'gsapi_init_with_args'; 
function gsapi_run_string_begin; external gsdll32 name 'gsapi_run_string_begin'; 
function gsapi_run_string_continue; external gsdll32 name 'gsapi_run_string_continue'; 
function gsapi_run_string_end; external gsdll32 name 'gsapi_run_string_end'; 
function gsapi_run_string_with_length; external gsdll32 name 'gsapi_run_string_with_length'; 
function gsapi_run_string; external gsdll32 name 'gsapi_run_string'; 
function gsapi_run_file; external gsdll32 name 'gsapi_run_file'; 
function gsapi_exit; external gsdll32 name 'gsapi_exit'; 

end. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T03:28:59.183

旧的 Delphi 6 PChar 是 Unicode Delphi (2009+) 上的 PAnsiChar，因此如果您将所有 PChar 引用更改为 PAnsiChar，一切都应该工作。

（包括你的 Pgs_main_instance 声明，如果有任何 PChar 在那里）

```
type
  PPAnsiChar = array of PAnsiChar;
  {$EXTERNALSYM gsapi_init_with_args}
  function gsapi_init_with_args(pinstance: Pgs_main_instance;
             argc: Integer; argv:PPAnsiChar): Integer; stdcall;

implementation

  function gsapi_init_with_args(pinstance: Pgs_main_instance;
             argc: Integer; argv:PPAnsiChar): Integer; 
  external gsdll32 name 'gsapi_init_with_args'; 
```

调用代码：

```
var
  argv:PPAnsiChar;
  instance: Pointer;

begin
  new(instance);  //how many bytes, this really doesn't make sense with a untyped pointer!
  setlength(argv, 4);
  argv[0] := PAnsiChar('ps2pdf');
  argv[1] := PAnsiChar('-dNOPAUSE');
  argv[2] := PAnsiChar('-dBATCH');
  argv[3] := PAnsiChar('-dSAFER');
  gsapi_init_with_args(instance, Length(argv), argv);
end; 
```

要了解 Unicode 的*新*功能，我建议您阅读 Marco Cantù 的[Delphi 和 Unicode](http://edn.embarcadero.com/article/38980)白皮书。

# apache-flex - 如何将图像添加到工具提示？

> ID：14764653
> 
> 赞同：0
> 
> 时间：2013-02-08T02:13:53.393
> 
> 标签：apache-flex, datagrid, tooltip

我想将图像添加到我目前拥有的tooTip。因此，当您翻转该行时，它会显示船舶信息和船舶图像。我希望根据船舶类型显示图像。主要有3种。因此，根据类型，我将显示有关船舶的图像和文本信息。现在我只使用了虚拟数据。我不知道工具提示是否可以支持保存图像。

所以我的意见：

1.  如何将图像添加到我拥有的现有工具提示中（在黄色框中）
2.  如何添加不是真正静态的图像，以便稍后根据船型显示。

请有人帮我解决这个问题。

非常感谢你:)

这是我目前拥有的代码（它是整个代码，所以如果你愿意，你可以在你的电脑上运行）：

```
 <fx:Script>
    <![CDATA[       
        import mx.collections.ArrayCollection;          
        import mx.controls.Alert;   
        import spark.events.GridEvent;          
        import spark.components.Image;

        [Bindable]
        private var myArrivalShips:ArrayCollection = new ArrayCollection([
            {arrivalShipsName:"Ship A", ETD:"12 March"},
            {arrivalShipsName:"Ship B", ETD:"25 March"}             
        ]); 

        private function buildToolTip(item:Object,column:GridColumn):String{
            var myString:String = "";
            if(item != null)
            {
                myString = myString +"Ship name : " + item.arrivalShipsName + "\n";
                myString = myString + "ETD : " + item.ETD + "\n" +"Service: Repair"+"\n"+"Length of ship : 50"+"\n"+"Agent contact: 982392398";
            }
            return myString;
        }

    ]]>
</fx:Script>
<s:BorderContainer x="267" y="11" width="331" height="586">

    <s:DataGrid id="arrivalTable" x="10" y="326" width="302" height="205" requestedRowCount="4" dataProvider="{myArrivalShips}" showDataTips="true" dataTipFunction="buildToolTip">
        <s:columns>
            <s:ArrayList>
                <s:GridColumn dataField="arrivalShipsName" headerText="Arrival Ships"></s:GridColumn>
                <s:GridColumn dataField="ETD" headerText="ETD"></s:GridColumn>              
            </s:ArrayList>
        </s:columns>            

    </s:DataGrid>
    <s:BorderContainer x="10" y="19" width="302" height="285">
    </s:BorderContainer>

</s:BorderContainer> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T12:37:12.490

你有2个案例：

1.  将 ToolTipManagerImpl 替换为自己修改过的 ToolTipManagerImpl，在这里您可以使用自己的自定义布局和皮肤切换 toolTipClass。你可以找到例子。

2.  创建自定义工具提示，扩展 UIComponent 实现 IToolTip。原型看起来像原始工具提示：主应用程序 mxml：

    ```
    <s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
                   xmlns:s="library://ns.adobe.com/flex/spark" 
                   creationComplete="creationCompleteHandler(event)"
                   xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600">
        <fx:Script>
            <![CDATA[           
                import mx.collections.ArrayCollection;
                import mx.events.FlexEvent;
                import mx.events.ToolTipEvent;
                import mx.managers.ToolTipManager;

            [Bindable]
            private var myArrivalShips:ArrayCollection = new ArrayCollection([
                {arrivalShipsName:"Ship A", ETD:"12 March", image: "http://url"},
                {arrivalShipsName:"Ship B", ETD:"25 March", image: "http://url"}             
            ]); 

            private function buildToolTip(item:Object,column:GridColumn):String
            {
                return JSON.stringify(item);
            }

            protected function creationCompleteHandler(event:FlexEvent):void
            {
                ToolTipManager.toolTipClass = ToolTipCustomClass;
            }
        ]]>
    </fx:Script>
    <fx:Declarations></fx:Declarations>

    <s:BorderContainer x="267" y="11" width="331" height="586">
        <s:DataGrid id="arrivalTable" x="10" y="326" width="302" height="205" requestedRowCount="4" dataProvider="{myArrivalShips}" 
                    showDataTips="true" dataTipFunction="buildToolTip">
            <s:columns>
                <s:ArrayList>
                    <s:GridColumn dataField="arrivalShipsName" headerText="Arrival Ships"></s:GridColumn>
                    <s:GridColumn dataField="ETD" headerText="ETD"></s:GridColumn>              
                </s:ArrayList>
            </s:columns>            
        </s:DataGrid>
        <s:BorderContainer x="10" y="19" width="302" height="285">
        </s:BorderContainer>

    </s:BorderContainer></s:Application> 
    ```

和类 ToolTipCustomClass：

```
package 
{
    import flash.display.DisplayObject;
    import flash.events.Event;

    import mx.controls.Image;
    import mx.controls.ToolTip;
    import mx.core.EdgeMetrics;
    import mx.core.IRectangularBorder;
    import mx.core.mx_internal;
    import mx.styles.ISimpleStyleClient;
    import mx.utils.ObjectUtil;

    use namespace mx_internal;

    public class ToolTipCustomClass extends ToolTip
    {

        private var _image:Image;

        public function ToolTipCustomClass()
        {
            super();
        }

        override protected function createChildren():void
        {
            mx_internal::createTextField(-1);

            createBorder();

            textField.visible = false;

            _image = new Image();
            _image.mouseChildren = false;
            _image.mouseEnabled = false;
            _image.addEventListener(Event.COMPLETE, onLoadCompliteHandler);

            addChild(_image);
        }

        protected function onLoadCompliteHandler(event:Event):void
        {
            _image.removeEventListener(Event.COMPLETE, onLoadCompliteHandler);

            textField.x = _image.contentWidth;
            textField.width = textField.width - _image.width;

            invalidateDisplayList();
        }

        override protected function measure():void
        {
            super.measure();

            _image.width    = 100;
            _image.height   = 100;
        }

        override public function set text(value:String):void
        {
            if (!value) return;

            var str:String = "";
            var item:Object;

            try
            {

                item = JSON.parse(value);

            } catch (e:Error) {}

            if (item != null)
            {
                str += "Ship name : " + item.arrivalShipsName + "\n" + 
                    "ETD : " + item.ETD + "\n" +
                    "Service: Repair\n" +
                    "Length of ship : 50\n" +
                    "Agent contact: 982392398";

                _image.source = item.image;
            }

            super.text = str;
        }

        override protected function updateDisplayList(unscaledWidth:Number, unscaledHeight:Number):void 
        {
            if (_image && _image.content) 
            {
                var bm:EdgeMetrics = borderMetrics;

                var leftInset:Number = bm.left + getStyle("paddingLeft");
                var topInset:Number = bm.top + getStyle("paddingTop");
                var rightInset:Number = bm.right + getStyle("paddingRight");
                var bottomInset:Number = bm.bottom + getStyle("paddingBottom");

                var widthSlop:Number = leftInset + rightInset;
                var heightSlop:Number = topInset + bottomInset;

                _image.move( leftInset, topInset );

                border.setActualSize(unscaledWidth + _image.contentWidth, Math.max(unscaledHeight, _image.contentHeight));

                textField.move(_image.contentWidth, topInset);
                textField.setActualSize(unscaledWidth - widthSlop - _image.contentWidth, unscaledHeight - heightSlop);

                textField.visible = true;
            }   
        }

        private function createBorder():void
        {        
            if (!border)
            {
                var borderClass:Class = getStyle("borderSkin");

                if (borderClass != null)
                {
                    border = new borderClass();

                    if (border is ISimpleStyleClient)
                        ISimpleStyleClient(border).styleName = this;

                    addChildAt(DisplayObject(border), 0);

                    invalidateDisplayList();
                }
            }
        }

        private function get borderMetrics():EdgeMetrics
        {
            if (border is IRectangularBorder)
                return IRectangularBorder(border).borderMetrics;

            return EdgeMetrics.EMPTY;
        }
    }
} 
```

不要忘记在 items 对象中替换图像 url。

# c++ - C/C++ 服务器不发送文件的最后几行

> ID：14764663
> 
> 赞同：0
> 
> 时间：2013-02-08T02:15:03.237
> 
> 标签：c++, c, sockets

我正在用 C/C++ 编写一个简单的服务器。我已经完成了大部分工作，但是有一个问题。服务器未能将文件的最后三行发送到客户端。我假设我过早地关闭了套接字连接，但我试图解决这个问题的尝试失败了。例如，调用

```
shutdown(clientSckt, SHUT_RDWR); 
```

在为客户端套接字调用 close() 方法之前。并为套接字参数添加延迟，如下所示：

```
struct linger l;
l.l_onoff = 1;
l.l_linger = 1;
setsockopt(clientSckt, SOL_SOCKET, SO_LINGER, &l, sizeof(l)); 
```

打开后。但这些似乎都不起作用。服务器没有错误地写入所有内容，但客户端没有收到所有内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T04:40:07.730

从模糊的记忆中：a）如果您想使用 SO_LINGER，请使用 close()。b）更强大的是半关机

```
shutdown(clientSckt, SHUT_WR) 
```

然后 read() 直到你得到一个 0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T01:12:07.007

事实证明，我忘记将标题的字符长度添加到我发送过来的文件的长度中。因此，客户端在服务器发送所有内容之前关闭了连接。

# php - 如何处理来自 jQuery AJAX 的 PHP 响应？

> ID：14764664
> 
> 赞同：0
> 
> 时间：2013-02-08T02:15:04.090
> 
> 标签：php, jquery, ajax, json

目前，我无法从我的 jquery ajax 访问返回数据。实际上，我什至不知道我是否正在发送任何数据？我只需要将数据从带有 JSON 的表单发送到 php，并将响应作为数组获取。

谢谢您的帮助。

HTML/JS/jQuery

```
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
    <title>Hello World</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
    <script src="https://github.com/douglascrockford/JSON-js/blob/master/json2.js"></script>

    <script type="text/javascript">
        $(document).ready(function(){
            $("form").submit(function () { 
                var uname = document.getElementById("username").value;
                var pword = document.getElementById("password").value;
                var postData = {
                    username: uname,
                    password: pword
                };
                alert(uname);

                $.ajax({
                url: "test.php",
                type: "GET",
                data: postData,
                dataType: 'json',
                contentType: 'json',
                cache: false,
                success: function (data) {
                        alert(data);
                    }
                });
            });
        });
    </script>
</head>
<body>
    <form action="">
        <input type='text' id="username" name="username" placeholder="Username" />
        <br />
        <input type='password' id="password" name="password" placeholder="password" />
        <br />
        <input type="submit" id="submit" value="Login" />
    </form>
</body> 
```

PHP

```
echo json_encode(array(
    'username' => $_GET['username'],
    'password' => $_GET['password']
)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T02:44:24.837

您正在为提交事件创建处理程序，但您似乎忘记返回 false 以停止基本提交过程。

具有空操作的表单将在同一页面（您的初始 PHP 页面）中发布数据，因此发送了 AJAX 回调，但之后，您将再次以基本方式发布。

`return false`在函数末尾添加一个（就在您的 AJAX 调用之后），然后您的表单将不会被提交，AJAX 将被发送，您将看到响应。

如果您使用的是 Firefox，请安装 Firebug 并查看 Network 选项卡以查看 Ajax 调用发送的请求并检查您的 JSON 响应。

祝你好运。

# javascript - 如何使用javascript在以下情况下编写正则表达式？

> ID：14764666
> 
> 赞同：0
> 
> 时间：2013-02-08T02:15:17.737
> 
> 标签：javascript, jquery, regex

```
var value = "ID=advIcon1&CLASS=advIcon&PAGE=43&TOP=2%&LEFT=15%&WIDTH=20%&HEIGHT=10%&RSC=http://www.canon.com.hk/40th/index.html?source=seriesbanner&ICON=http://203.80.1.28/FlippingBook/Dev/Frontend/source/adv/tc_bn_314.jpg&ALT=Cannon Adv" 
```

我想实现的是

```
&RSC=http://www.canon.com.hk/40th/index.html?source=seriesbanner 
```

到

```
&RSC=http://www.canon.com.hk/40th/index.html?source#seriesbanner 
```

`&RSC`替换和之间的所有“=”`&ICON`

```
value = value.replace (/&RSC=%[=]+%&ICON/,/&RSC=%[#]+%&ICON/); 
```

以上是我尝试过的代码，但无法正常工作，如何解决问题？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T02:23:46.193

我会这样做：

```
var value = "ID=advIcon1&CLASS=advIcon&PAGE=43&TO...";
var startIndex = value.indexOf("&RSC");
var endIndex = value.indexOf("&ICON");
var head = value.substring(0, startIndex);
var tail = value.substring(endIndex);
var body = value.substring(startIndex, endIndex);
var result = head + body.replace(/=/g, '#') + tail; 
```

我认为尝试用一个疯狂的正则表达式来完成整个事情没有任何优势。

那只会使您的代码更难阅读且效率降低。

更好的是，让它成为一个你可以重复使用的函数：

```
// Replaces every occurrence of replaceThis with withThis in input between
// startPattern and endPattern.

function replaceCharactersBetween(input, startPattern, endPattern, replaceThis, withThis) {
    var startIndex = input.indexOf("startPattern");
    var endIndex = input.indexOf("endPattern");
    var head = input.substring(0, startIndex);
    var tail = input.substring(endIndex);
    var body = input.substring(startIndex, endIndex);
    var regex = new RegExp(replaceThis, 'g');
    return head + body.replace(regex, withThis) + tail;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T02:40:55.547

尝试：

```
value = value.replace(/RSC=([^=]+)=([^=]+)/, 'RSC=$1#$2'); 
```

你也应该看看`endoceURIComponent()`。

# web-services - 我可以在 Heroku 上公开或发布 SOAP Web 服务吗？

> ID：14764667
> 
> 赞同：0
> 
> 时间：2013-02-08T02:15:17.130
> 
> 标签：web-services, soap, heroku, salesforce

我们内部有 Salesforce，需要一个代理服务器将 API 调用发送到外部 Web 服务接口 (Box)。由于 Salesforce 每个顶点调用只允许 10 个标注，我们需要一个外部云服务器来发送这些标注。没有钱购买 CastIron 甚至 Pervasive，我想知道我们是否可以在 Heroku 上实现这个？

当然，Heroku 需要能够接收和发送 Soap 消息。如果可以的话，这将是我们的 Box 集成所需要的全部。（我认为）

Heroku 有接收 Soap 消息的插件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T05:48:30.650

是的，Heroku 专为此类用例而设计。

> 运行和扩展任何类型的应用程序。
> 
> 使用任何 Web 框架或工作器类型运行任何 Web 或后台进程。对应用程序的工作负载进行直接、精细的控制。使用单个命令轻松扩展分布式进程。轻松扩展到数百万用户。

[Heroku 主页](http://www.heroku.com)

# php - Bash如何从PID获取完整的脚本名称

> ID：14764668
> 
> 赞同：3
> 
> 时间：2013-02-08T02:15:25.167
> 
> 标签：php, bash, ps

我有这个 php 函数，它从给定的 PID 检查脚本的名称，并将其与自身进行比较。

```
function isRunning($pid) {
    $filename = exec('ps -p '.$pid.' -o "%c"');
    $self = basename($_SERVER['SCRIPT_NAME']);
    return ($filename == $self) ? TRUE : FALSE;
} 
```

据我所知，我通常使用此命令从 PID 中获取脚本名称：

```
ps -o PID -o "%c" 
```

它返回我的文件名，但只有前 15 个字符。由于我的脚本名称是

> daily_system_check.php

该函数总是返回 FALSE，因为它会将自身与

> daily_system_ch

Centos 6 是否还有另一个 bash 命令可以返回脚本的全名？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T02:26:03.300

您没有指定您的操作系统是什么，但在 Ubuntu Linux 中，我可以通过添加 `--context`到 ps 调用来查看脚本的全名：

```
# ps -p 17165 --context
  PID CONTEXT                  COMMAND
17165 unconfined               /bin/bash ./testing_long_script_name.sh
# 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T02:26:20.587

读取proc`cmdline`文件：

```
cat /proc/$pid/cmdline | awk 'BEGIN {FS="\0"} {print $2}' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T04:48:33.630

“ps”命令中似乎没有标志或列来显示没有文件路径或被截断的整个文件名。PHP 的[basename()](http://php.net/manual/en/function.basename.php)完成了工作。

```
function isRunning($pid) {
    $filename = basename(exec('ps -o cmd= '.$pid));
    $self = basename($_SERVER['SCRIPT_NAME']);
    return ($filename == $self) ? TRUE : FALSE;
} 
```

# sql - 计算日期

> ID：14764670
> 
> 赞同：0
> 
> 时间：2013-02-08T02:15:40.020
> 
> 标签：sql, sql-server

我有这个问题：下一个预定的重复约会的客户列表，即每年、每月或每季度。

我拥有的表\列是：

```
customer
   customer_ID
service
   customer_ID
   service_RecID
Resource
   service_RecID
   Recurrence_RecID
   Date_Time_Start
Recurrence
   Recurrence_RecID
   RecurType
   RecurInterval
   DaysOfWeek
   AbsDayNbr
   SelectInterval 
```

它被建模为在设置日程时，date_start_time 是第一次重复约会发生的日期。前任。

```
Recurrence_RecID = 10
RecurType = m (could be y, or d as well for yearly or daily)
RecurInterval = 6 (if recurType = y, this would mean every 6 years) 
```

鉴于系统每晚生成这些，我将如何编写查询来计算每个客户的下一个预定约会？我最初想使用 Resource.Date_Time_Start 并循环直到变量 nextAppointment >= today()，但是在 SQL 中运行循环是一种好习惯吗？

如果需要更多信息，请告诉我。非常感谢！

编辑：我会做一个 sqlfiddle。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T02:39:07.467

我建议使用子查询而不是循环。这样更有效率。这可能不准确，但类似于...

```
SELECT 
    *
FROM
(      
SELECT
    customer.customer_id,
    service.service_RecID,
    Resource.Date_Time_Start,
    Recurrence.Recurrence_RecID,
    RecurType,
    RecurInterval,
    DaysOfWeek,
    AbsDayNbr,
    SelectInterval,
    NextAppointmentDate=
    CASE 
        WHEN RecurType='m' THEN DATEADD(MONTH,RecurInterval,Resource.Date_Time_Start)
        WHEN RecurType='y' THEN DATEADD(YEAR,RecurInterval,Resource.Date_Time_Start)
    ELSE 
        NULL
    END        
FROM
    Recurrence
    INNER JOIN Resource ON Resource.Recurrence_RecID=Recurrence.Recurrence_RecID
    INNER JOIN service ON service.service_RecID=Resource.service_RecID
    INNER JOIN customer ON customer.customer_ID=service.customerID
)AS X
WHERE
    NextAppointmentDate>=GETDATE()
ORDER BY Fields... 
```

# .net - 在 .Net 中为继续任务编写单元测试

> ID：14764675
> 
> 赞同：2
> 
> 时间：2013-02-08T02:16:46.083
> 
> 标签：.net, unit-testing, c#-4.0, task

我是单元测试的新手，并尝试为使用任务的 WPF ViewModel 编写单元测试。我在 VM 中有一个方法连接到 WPF 中的按钮。下面的代码总结了我正在尝试做的事情。类 MainPageViewModel { 私有 IService 服务_；

```
 public void StartTask()
    {
        var task = service_.StartServiceAsync();
        task.ContinueWith(AfterService);
    }

    private void AfterService(Task<IResult> result)
    {
        //update UI with result
    }
}

class TestClass
{
    [TestMethod]
    public Test_StartTask()
    {
        MainPageViewModel vm = new MainPageViewModel();
        vm.StartTask();
        //need to check if UI is updated but since the AfterService is called on a different thread the assert fails

    }
} 
```

在我的测试方法中，我无法在 StartTask() 调用后编写 Assert，请帮助我了解如何处理此类情况？TIA。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T02:57:15.697

您可以添加一个同步原语来等待。如果您不希望在生产构建中出现这种情况，您可以使用`#if _DEBUG`or来保护它`#if UNIT_TEST`（其中`UNIT_TEST`为特定于测试的构建配置定义）。

```
class MainPageViewModel
{
    private IService service_;
    public AutoResetEvent UpdateEvent = new AutoResetEvent(false);

    public void StartTask()
    {
        var task = service_.StartServiceAsync();
        task.ContinueWith(AfterService);
    }

    private void AfterService(Task<IResult> result)
    {
        //update UI with result
        UpdateEvent.Set();
    }
}

class TestClass
{
    [TestMethod]
    public Test_StartTask()
    {
        MainPageViewModel vm = new MainPageViewModel();
        vm.StartTask();
        if( vm.UpdateEvent.WaitOne(5000) ) {
           // check GUI state
        } else {
           throw new Exception("task didn't complete");
        }

    }
} 
```

# ios - 多个动态原型单元的索引路径

> ID：14764676
> 
> 赞同：1
> 
> 时间：2013-02-08T02:17:00.103
> 
> 标签：ios, uitableview, uiviewcontroller, uistoryboard, nsindexpath

男士们，

我需要一些帮助。这几乎就像我知道我在尝试做什么，但是在编写代码时我一直无法让它工作。场景是我有一个视图控制器，里面有一个表视图。我的表格视图有三种不同的动态原型，因为我有三种不同的单元格。现在，我要做的就是指定在哪一行中生成哪个原型单元格。我还在情节提要中为每个原​​型单元格提供了唯一标识符。

我理解事物的方式是我的 cellforRowatIndexpath 方法需要了解在该行中显示哪种单元格，然后选择标识符，出列并根据需要设置内容。

相应地，这是我正在尝试做的代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath   * )indexPath
{
    if(indexPath.row==0)
    {
        static NSString *CellIdentifier = @"HelloCell";
        UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
        if (cell == nil) {
            cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault      reuseIdentifier:CellIdentifier];
        }

        // configure your cell here...

        return cell;
    }
} 
```

* * *

不幸的是，事情没有按计划进行，我的应用程序崩溃了 2013-02-07 16:47:39.859 ProjectsABC30068:c07] ***由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：'-[NSIndexPath setTableViewStyle:] : 无法识别的选择器发送到实例 0x83812e0' 错误。

由于我已正确设置数据源和委托，因此表视图没有问题。并且还为表格视图做了一个出口。

我还尝试将 cellforRowAtIndexPath 中的 if 语句更改为 if(myTable.indexPathForSelectedRow==0)。这会在所有单元格中生成动态原型，但至少应用程序不会停止。

大家觉得是什么问题？

我不知道如何正确使用索引路径，如果有人可以帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-08T02:58:50.370

With Storyboard and Dynamic prototype cells, you don't have to worry about or check if `dequeueReusableCellWithIdentifier:` returns a nil cell.

What you have to do:

*   For each row, determine the correct cell identifier and feed that to `dequeueReusableCellWithIdentifier:`
*   For each dynamic prototype cell, make sure you setup the correct identifier (select each cell on the storyboard, then in Attributes Inspector under Table View Cell section fill Identifier)

![set up cell identifier](../Images/dd2d7797101ccdf4961362ccb283655f.png)

Let's have an example. Say you have three prototype cells, with identifier as 'Cell1', 'Cell2' and 'Cell3'. And assume you have three rows, each to display with one of the prototype cells.

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return 3;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSString *identifier = [NSString stringWithFormat:@"Cell%d", indexPath.row + 1];
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:identifier forIndexPath:indexPath];

    cell.textLabel.text = identifier; // just show the identifier as title
    return cell;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T03:01:41.803

You said it's reporting:

> Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[NSIndexPath setTableViewStyle:]: unrecognized selector sent to instance 0x83812e0

You get this when `cellForRowAtIndexPath` is not returning a valid `UITableViewCell`.

What value did you return from `tableView:numberOfRowsInSection:`? The reason I ask is that your `cellForRowAtIndexPath` will fail for any row except the first one. If your `tableView:numberOfRowsInSection:` indicated a value greater than 1, then your app will crash.

To confirm this, you might want to examine what `indexPath` is at the the start of your `cellForRowAtIndexPath`, by adding this line at the start of the method:

```
NSLog(@"%s: section = %d; row = %d", __FUNCTION__, indexPath.section, indexPath.row); 
```

That way you can make sure what rows you're trying to generate a cell for and that you're correctly handling it.

Later you say:

> I've also tried to change the if statement in cellforRowAtIndexPath to if(myTable.indexPathForSelectedRow==0). This produces the dynamic prototype in all the cells but at least the app doesn't cease.

That definitely isn't going to work and it implies a confusion of how `cellForRowAtIndexPath` works. It has nothing to do with currently selected cells. You respond to `numberOfSectionsInTableView` and `tableView:numberOfRowsInSection:` by telling it which cells your are able to create, and iOS will then call `cellForRowAtIndexPath` repeatedly for each of the cells it determines might be visible given the number of sections and number of rows.

Make sure that your `numberOfSectionsInTableView` and `tableView:numberOfRowsInSection:` methods only return values that you correctly handle in your `cellForRowAtIndexPath`.

* * *

For further reading, I'd suggest you go through the [Table View Programming Guide for iOS](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/TableView_iPhone/AboutTableViewsiPhone/AboutTableViewsiPhone.html#//apple_ref/doc/uid/TP40007451) or google "UITableView tutorial".

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T02:46:20.347

（作为评论留下的时间有点长，所以我把它放在这里，即使它没有直接回答问题）

异常断点：
转到断点导航器
![转到断点导航器](../Images/893e9caba4fec94c735a9dac8c5301d2.png)

在导航器的底部，您有“+”按钮
![添加断点](../Images/d746f3695a0a3611c5279be94537bd4f.png)

然后它将添加一个断点供您自定义，只需单击完成即可。
![点击完成完成](../Images/8451012bede21a6b36021f5af748ea66.png)

现在，当抛出异常时，您将被带到触发异常的行。最重要的是，您将能够看到那一刻的整个调用堆栈。对调试非常有用。

自 4.2 以来，Xcode 中的断点可以完成更多“时髦”的东西（不确定具体时间）

# javascript - 使用 javascript/jquery 从 URL 的一部分创建字符串/var/array？

> ID：14764678
> 
> 赞同：0
> 
> 时间：2013-02-08T02:17:20.407
> 
> 标签：javascript, jquery

希望根据部分 URL 填充视图。

www.example.com/f/ ***objectID*** 我有一个网站，其视图基于存储在 parse.com上的***objectID加载***

如何从 url 中提取/解释“ ***objectID*** ”以填充 /f/ 视图？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T02:22:07.537

看看[`window.location`](https://developer.mozilla.org/en-US/docs/DOM/window.location#Location_object)对象。从那里你只需要一些字符串方法。

```
var objectID = location.pathname.split('/').pop(); 
```

[`.split()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/split)将路径拆分为由分隔的片段`/`，[`.pop()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/pop)并将检索最后一个。当然，如果`objectID`可能并不总是最后一个段，请使用正确的（从 0 开始的）索引从返回的数组中检索它`split`。

另一个可能具有更好性能的解决方案（不应该对这个用例真正产生影响）假设这`objectID`是最后一段：

```
var objectID = location.pathname.substring(location.pathname.lastIndexOf('/')+1); 
```

[**小提琴**](http://jsfiddle.net/axbVx/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T02:22:51.537

正则表达式可以工作或拆分 window.location.url：

```
var objectId = window.location.pathname.replace(/\/f\/(\w+)\/?/, '$1'); 
```

或者

```
var objectId = window.location.pathname.split('/')[2]; 
```

# git - git 打印文件名和最后更新日期

> ID：14764686
> 
> 赞同：0
> 
> 时间：2013-02-08T02:18:26.473
> 
> 标签：git, last-modified

是否有 git 命令可以显示：

```
filename last_updated 
```

我最接近的是：

```
git log --format=format:'%ci' --name-only 
```

但这需要处理和解析才能得到我想要的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T03:46:29.867

谢谢xcorsx ......你指出我正确的方向：

```
find ./ -type f -printf "%h/%f %TY-%Tm-%Td\n" 
```

# c++ - 在 switch 语句中共享一个案例。表达问题。它是如何工作的？

> ID：14764691
> 
> 赞同：1
> 
> 时间：2013-02-08T02:18:49.987
> 
> 标签：c++, switch-statement, expression

在我正在研究的一个例子中，我有代码来挑选“a”到“z”之间的元音。它使用 switch 语句代替单独的大小写，字符值共享相同的大小写。据我所知，所涉及的表达即

```
***(letter * (letter >= 'a' && letter <= 'z'))*** 
```

评估为真或假并转换为整数（1和0），其中它落入“案例0：”（0显然为假）以处理结果是否为假。任何人都可以解释该语句涉及的转换过程的表达式吗？特别是逻辑表达式乘法背后的推理。这是我的示例代码：

```
char letter(0); 
cout << endl
     << "Enter a small letter: ";
 cin >> letter;

switch(letter * (letter >= 'a' && letter <= 'z'))
{
case 'a': case 'e': case 'i': case 'o': case 'u':
    cout << endl << "You entered a vowel.";
    break;

case 0:
        cout << endl << "That is not a small letter.";
        break;

    default: cout << endl << "You entered a consonant.";
} 
```

**编辑：所有伟大的答案家伙。清理了很多。再次感谢您的输入**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T02:21:51.937

```
letter * (letter >= 'a' && letter <= 'z') 
```

条件表达式被乘数将计算为真或假。的 ASCII 值`letter`将与字符“a”和“z”进行比较。True 和 false 可以分别隐式转换为数字 1 和 0（并将`letter`转换为其数字 ASCII 值）。所以它要么是：

```
letter * (0) 
```

或者

```
letter * (1) 
```

任何时间 0 都是 0，这意味着如果没有相应的情况，控件将下降到默认情况（这个下降到`case: 0`部分）。否则，`letter * (1)`是`letter`，因此它将与其他情况进行比较，就好像它是 一样`switch (letter)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T02:23:45.683

`(letter >= 'a' && letter <= 'z')`是一个布尔表达式，计算`true`字母是否介于`'a'`和之间`'z'`；现在，当你将它乘以 时`letter`，它首先被提升为`char`，假设值为 ，`1`如果 为`true`，则为 0 `false`。

`0`因此，如果括号中的条件计算结果为`false`，或者`letter`如果它计算结果为，则整个表达式将产生`true`，因为任何`letter`乘以零的结果为零，而乘以 1 的结果为自身。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T02:24:32.713

```
(letter * (letter >= 'a' && letter <= 'z')) 
```

让我们分成两部分。

```
(letter >= 'a' && letter <= 'z') 
```

这很容易。是`letter`大于`a` **和**小于的ascii码`z`。由于字母在 ascii 中是依次增加的，这意味着该字母是一个小写字母。然而，这个表达式的结果是 a `true/false`，它在下一阶段转换为 1/0。

```
(letter * <1/0>) 
```

在这个阶段，`letter * 1`return letter 和`letter * 0`return `0`。这解释了案例陈述是如何工作的。

出于将您带到这里的完全相同的原因（缺乏可读性），我会将其拆分为`if`第一个检查小写字母，然后再传递给`switch`.

# jquery - 在新的超链接加载时保持活动状态的 DIV 交换脚本

> ID：14764692
> 
> 赞同：0
> 
> 时间：2013-02-08T02:18:57.997
> 
> 标签：jquery, html, caching, swap

我编写了一个脚本，通过该网站[http://www.martyregan.com/](http://www.martyregan.com/)告诉多个 div ，通过单击“网站语言”按钮从英文 div 切换到日文 div。

它以我喜欢的方式工作，尽管我的客户想知道 DIV 在转到另一个页面时是否可以留在日文 DIV 上。

该脚本当前告诉第一个子类（两个相应的 div）显示和隐藏任何其他共享该类的内容。

它还告诉第一个子类是活动的，所以我想有一种方法可以实现某种缓存/内存脚本来处理它。

```
 $(function() {
   $('#left-sidebar-inner .ddsmoothmenu-v, #right-sidebar-inner .ddsmoothmenu-v, #pb_sidebar .ddsmoothmenu-v, #main-content-inner .content, #main-content-inner .contact, #main-content-inner .right, #main-content-inner .program, #main-content-inner .worksnav, #main-content-inner .worksnav2, #main-content-inner .heading').hide();
$('#left-sidebar-inner .ddsmoothmenu-v:first, #right-sidebar-inner .ddsmoothmenu-v:first, #pb_sidebar .ddsmoothmenu-v:first, #main-content-inner .content:first, #main-content-inner .contact:first, #main-content-inner .right:first, #main-content-inner .program:first, #main-content-inner .worksnav:first, #main-content-inner .worksnav2:first, #main-content-inner .heading:first').show();
$('#language a:first').addClass('active');

$('#language a').click(function() {
    if ($(this).hasClass('active') == true) {
        return false;
    }
    else {
        $('a.active').removeClass('active');
        $(this).addClass('active');

        $('#left-sidebar-inner .ddsmoothmenu-v, #right-sidebar-inner .ddsmoothmenu-v, #pb_sidebar .ddsmoothmenu-v, #main-content-inner .content, #main-content-inner .contact, #main-content-inner .right, #main-content-inner .program, #main-content-inner .worksnav, #main-content-inner .worksnav2, #main-content-inner .heading').fadeOut();
        var contentToLoad = $(this).attr('href');
        $(contentToLoad).fadeIn();

        return false;
    }
  });
}); 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T02:27:49.657

您可以使用 cookie、会话甚至本地存储，例如：

```
$('a.en').click(function(){
    localStorage.setItem('language', 'en');
});

$('a.fr').click(function(){
    localStorage.setItem('language', 'fr');
});

// to get the language value use getItem
localStorage.getItem('language'); 
```

# azure - 将 Azure VM 转换为云服务

> ID：14764695
> 
> 赞同：1
> 
> 时间：2013-02-08T02:19:31.073
> 
> 标签：azure, virtual-machine

我们正在 azure 上建立一个 asp.net webapi 项目。它还做了一些其他的事情，所以它不能作为一个天蓝色的网站。我们的 IT 人员在 Azure 虚拟机上进行了设置。

我读过我们将它作为云服务运行会更有益（成本方面和维护方面）。

我只是想知道是否有人知道是否有办法将 azure 虚拟机转换为 azure 云服务？

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-08T02:24:28.207

您无法真正将 Azure VM 转换为 Azure 云服务。您可以做的是将您的应用程序部署为云服务。一旦一切正常，您就可以将该应用程序部署到云服务中。

# c++ - C ++删除二叉树中的最小元素

> ID：14764700
> 
> 赞同：0
> 
> 时间：2013-02-08T02:20:33.437
> 
> 标签：c++, pointers, binary-tree

谁能向我解释为什么该`delete_min()`功能不起作用？几个小时以来，我一直试图弄清楚这一点。

我尝试了该功能的不同变体，但它似乎要么删除了错误的东西，要么只更改数据而不删除它，要么删除了错误的东西。此外，插入函数在调用后并不总是正常工作`delete_min()`，所以我确信这与指针有关。

这是功能：

```
int BinaryTree::delete_min_helper(TreeNode *node){

   while(node->left != NULL){
      node = node->left;
   }

  if(node == root){
     puts("attempted to delete root");
     return 1;
  }

  delete node;
  node = NULL;
  return 0;
} 
```

这是一个可编译的示例：

```
#ifndef _TREE_H_
#define _TREE_H_

#include <stdlib.h>
#include <stdio.h>
#include <string.h>

struct TreeNode {
  int val;
  char *str;
  TreeNode *left;
  TreeNode *right;
};

class BinaryTree {
  public:

  BinaryTree();
  ~BinaryTree();

  int insert_node(unsigned int val, char *str);
  TreeNode *find_min();
  int delete_min();
  void print();

 private:

 int insert_node_helper(TreeNode *&node, unsigned int val, char *str);
 int delete_min_helper(TreeNode *node);
 void print_helper(TreeNode *node);

 TreeNode *root;  
};

#endif

BinaryTree::BinaryTree(){
  this->root = NULL;
}

BinaryTree::~BinaryTree(){
}

int BinaryTree::insert_node(unsigned int val, char *str){
  return insert_node_helper(this->root, val, str);
}

int BinaryTree::insert_node_helper(TreeNode *&node, unsigned int val, char *str){

  if(node == NULL){
    node = new TreeNode;
    node->val = val;
    node->str = strdup(str);
    node->left = NULL;
    node->right = NULL;
    if(node != NULL){
      return 0;
    }else{
      puts("inserted null node");
      return 1;
   }
 }else if(val <= node->val){
   return insert_node_helper(node->left, val, str);
 }else if(val > node->val){
   return insert_node_helper(node->right, val, str);
 }

 return 1;
}

void BinaryTree::print(){
  print_helper(this->root);
}

void BinaryTree::print_helper(TreeNode *node){

    if(node != NULL){
      print_helper(node->right);
      printf("%d occurrences of \"%s\"\n", node->val, node->str);
      print_helper(node->left);
    }

}

TreeNode *BinaryTree::find_min(){
  TreeNode *temp = this->root;
  while(temp->left != NULL){
    temp = temp->left;
  }
  return temp;
}

int BinaryTree::delete_min(){
   return delete_min_helper(root);
}

int BinaryTree::delete_min_helper(TreeNode *node){

   while(node->left != NULL){
     node = node->left;
   }

  if(node == root){
    puts("attempted to delete root");
    return 1;
  }

  delete node;
  node = NULL;
  return 0;
}

#include <time.h>

int main(){

  BinaryTree bt;

  srand(time(NULL));
  for(int i = 0; i < 10; i++){
     bt.insert_node(rand() % 20, "test");
  }

  bt.print();
  printf("min val = %d\n", bt.find_min()->val);
  puts("#################################");
  bt.delete_min();
  bt.print();
  printf("min val = %d\n", bt.find_min()->val);

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T02:30:37.283

马上想到两件事：

1.  父节点仍指向您删除的节点

2.  您要删除的节点可能有一个`node->right`指针挂在它上面，您正在从树上砍掉它，而不是将它重新挂回树中。

可能还有更多问题，但您至少需要解决这些问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-08T02:31:03.443

他父母的引用仍然指向内存中的某个地址。

尝试这个：

```
int BinaryTree::delete_min_helper(TreeNode *node){

   TreeNode *prev = NULL;
   while(node->left != NULL){
      prev = node;
      node = node->left;
   }

  if(node == root){
     puts("attempted to delete root");
     return 1;
  }

  prev->left = NULL;

  delete node;
  node = NULL;
  return 0;
} 
```

# ruby-on-rails - 我觉得我使用 REST 和 JSON 的方式是错误的

> ID：14764701
> 
> 赞同：0
> 
> 时间：2013-02-08T02:20:49.843
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

所以我正在编写一个 GET REST API，它将 JSON 返回给它的客户端。

如果我想在浏览器中查看它，我的 URL 如下所示：

```
http://localhost:3000/population_management/show.json?id=1 
```

就像代码气味一样，我觉得这不是正确的做法，但我不知道为什么。你看有什么不对吗？

同样在我的 routes.rb 中，这就是我定义这条路线的方式：

```
get "population_management/show" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T03:11:44.170

如果您想在基本级别上遵循 REST，您可能想要`resources|resource`您的路由而不是明确定义它们（这种方式更容易，因为它可以完成构建路由的工作）。`:except`您可以使用or`:only`选项省略不需要的操作。

或者这种方式也很好。（假设您要查找记录）

```
match "population_management/:id" => "controller#show", :via => :get 
```

[Rails 路线指南](http://guides.rubyonrails.org/routing.html)

# php - 我的登录无法进入下一页

> ID：14764702
> 
> 赞同：0
> 
> 时间：2013-02-08T02:21:00.573
> 
> 标签：php

我不知道我的登录页面有什么问题。我登录后它仍然在登录页面中。

我有一个餐桌工作人员

```
CREATE TABLE `staff` (                    
          `staffid` varchar(25) NOT NULL,         
          `password` varchar(25) DEFAULT NULL,    
          `staffname` varchar(50) DEFAULT NULL,   
          `staffemail` varchar(50) DEFAULT NULL,  
          `level` int(2) DEFAULT NULL,            
          PRIMARY KEY (`staffid`)                 
        ) ENGINE=InnoDB DEFAULT CHARSET=latin1 
```

有两个级别。1 为员工 2 为管理员 输入员工 ID 和密码后，页面应根据其级别转到页面。

1.登录.php

```
<? session_start(); ?>
<title>Inventory Management System</title>
<center>
 <form name="form1" method="POST" action="logincheck.php">
    <table width="468" height="328" border="0">
      <tr>
        <td height="124" colspan="2">
        <?php include "header.php"?></td>
      </tr>
      <tr>
        <td width="184" height="65" 
        align = "right">No Kakitangan</td>
        <td width="274"><label for="staffid"></label>
        <input type="text" name="staffid" id="staffid"></td>
      </tr>
      <tr>
        <td width="184" height="60" 
        align = "right">Kata Laluan</td>
        <td><label for="password"></label>
        <input type="password" name="password" id="password"></td>
      </tr>
      <tr>
        <td height="42" colspan="2" 
        align = "center"><input type="submit" name="button" id="button" value="Log In">
        <input type="reset" name="button2" id="button2" value="Batal"></td>
      </tr>
   </table>
    <p>
      <input type="hidden" name="MM_insert" value="form1"/>
    </p>

  </form>
</center> 
```

2.logincheck.php

```
<?php require_once('Connections/sqlconnection.php'); ?>
<? session_start(); ?>
<?php
    $staffid = isset($_POST['staffid']) ? $_POST['staffid'] : "";
    $password = isset($_POST['password']) ? $_POST['password'] : "";
    //get user info from the database base on staffid and password
    mysql_select_db($database_sqlconnection, $sqlconnection);
    $sql = "select s.* from staff s where s.staffid = '".$staffid."' and
    s.password = '".$password."'" ;
    $result1 = mysql_query($sql,$sqlconnection) or die(mysql_error());
    $rowUsr = mysql_fetch_array($result1);
    $cnt = mysql_num_rows($result1);
    $level = '';
    //if staffid exists
    if($cnt > 0)
    {
        $_SESSION['staffid']=$staffid;
        $level = $rowUsr['level'];
        //compare the password
        if ($level == 1)
             $_SESSION['userlevel']='staff';
        else if ($level == 2)
                  $_SESSION['userlevel']='admin';
        else $_SESSION['userlevel']='err';
             echo "<script> location.href='index.php'; </script>";
    }
    else {
          echo "<script> alert('Sila masukkan semula. No Kakitangan atau Kata Laluan salah.');</script>";
    echo "<script> location.href='login.php'; </script>";
    }
    mysql_free_result($result1);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T02:29:03.053

[您需要使用mysql_data_seek](http://php.net/manual/en/function.mysql-data-seek.php)将内部结果指针移到开头。尝试使用：

```
mysql_data_seek($result1, 0); 
```

利用：

```
$rowUsr = mysql_fetch_array($result1);
mysql_data_seek($result1, 0);
$cnt = mysql_num_rows($result1); 
```

发生的情况是，一旦您这样做，指针就会留在数据集的末尾`mysql_fetch_array`。`mysql_data_seek($result1, 0);`将它返回到开头。

# jquery - JQUERY setInterval 函数

> ID：14764705
> 
> 赞同：0
> 
> 时间：2013-02-08T02:21:22.270
> 
> 标签：jquery, html, css, setinterval

我有一个会员计数器，需要一次更新一个数字。下面是函数

```
function siteCounterUpdate(newMembership) {
    var oldMembership = $('span#indexSiteLastMembershipCount').text();
    var digit;
    newMembership = padString(newMembership, 9);
    $('ul#indexSiteCounterBottom').empty();
    for(i=0;i<9;i++) {
            if(newMembership.toString()[i] == '_') {digit = '&nbsp;';}else{digit = newMembership.toString()[i];}
      $('ul#indexSiteCounterBottom').append('<li>'+digit+'</li>');
      $('ul#indexSiteCounterBottom li:nth-child(3n)').addClass('extra-margin');
    }
    $('span#indexSiteLastMembershipCount').text(newMembership);
} 
```

1.  它接受新的成员，比如说 - 1010 个成员
2.  它获得了保存在一个跨度中的旧成员资格 - 比如说 1000 个成员
3.  如果字符串少于 9 位（这与计数器图像大小有关），它会用 nbsp 填充字符串 - 对于这个问题和工作正常来说并不重要..
4.  然后它更新计数器并更新跨度。

这有效，但它一次将计数器从 1000 更新到 1010。我希望它一次计数一位数。例如：1001、1002、1003 等...

我相信我需要使用 setInterval() - 可能是 300 毫秒。我只是不确定如何将其放入此函数中，以便它自行循环。

任何建议都会很棒。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T02:24:29.627

试试看：

```
var log = function(text){
  console.log(text);
  setTimeout(log, 300, text);
};
log("hey!"); 
```

# javascript - 使用 Javascript 直接在浏览器中读取 Sqlite3 的最佳方法是什么？

> ID：14764707
> 
> 赞同：29
> 
> 时间：2013-02-08T02:21:23.350
> 
> 标签：javascript, sqlite

对于我们的 Insights 平台之一，我们计划在后台生成汇总 SQLite3 数据库，并让它在浏览器上呈现为图表。目前，我们打算创建一个服务于数据需求的服务器端端点。

我们希望通过完全消除服务器端端点来进一步优化这一点。我们可以（从安全角度来看）直接在 S3 上公开 SQLite3 并让 javascript 模块读取并生成图表。

SQLite3 文件预计相当小——可能有 4-6 列，可能有 10-500 行数据，并且所有这些文件都只包含一个表。测试运行表明文件大小小于 15KB。我们不打算在浏览器上编写或操作 SQLite3。我们不需要将它作为 WebSQL 或 IndexedDB 表单缓存在浏览器上，但如果需要，我们可以使用它们。

从我的网络搜索中，我们找不到可以读取 SQLite3 文件并查询结果的 Javascript 库。如果您知道任何可以执行此操作的 javascript 库，请告诉我们。

另一方面，如果您认为我们不应该出于任何原因这样做，那么也请把它们作为评论/答案扔掉，因为这是我们第一次尝试的东西，看起来有点不合时宜-box，欢迎反馈！

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2014-05-26T23:44:12.433

有一个名为的 javascript 库[`sql.js`](https://github.com/sql-js/sql.js)可以完全满足您的需求。在你的情况下，你会这样使用它

```
const SQL = await initSqlJs(options);
const fetched = await fetch("/path/to/database.sqlite");
const buf = await fetched.arrayBuffer();
const db = new SQL.Database(new Uint8Array(buf));
const contents = db.exec("SELECT * FROM my_table");
// contents is now [{columns:['col1','col2',...], values:[[first row], [second row], ...]}] 
```

请参阅[sql-js.github.io/sql.js/documentation/上的文档](https://sql-js.github.io/sql.js/documentation/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T07:18:03.727

我不能说最好，但有一个：**自己编写一个 JavaScript SQLite 阅读器库。**这将是一项乏味的任务，但我相信它可以完成。一些很酷的人已经完成了[pdf.js](https://github.com/mozilla/pdf.js)，它是一个用于 PDF 文件的 JavaScript 渲染器，它也是二进制 BLOB，就像[SQLite 文件](http://www.sqlite.org/fileformat2.html)一样。

您很可能会从[FileReader API](http://www.w3.org/TR/FileAPI/#dfn-filereader)开始遍历 SQLite 文件，然后创建一些内存中的内容表示，供您的图表工具使用。

*免责声明：您可能希望使用其他人提出的另一种解决方案来解决您最初的问题，但这回答了您的问题。*

# php - 表单选择列表以显示来自 Mysql 数据库的产品名称

> ID：14764709
> 
> 赞同：0
> 
> 时间：2013-02-08T02:21:41.680
> 
> 标签：php, mysql, database

我不明白我在这里做错了什么。我在表中有大约 125 个产品，但我只从表中得到最后一个产品，所以它只显示一个项目...这是一个简单的计算器，用于为销售人员和客户提供他们需要多少盒子，快速估算一下要花多少钱。提前感谢您的帮助..

```
<?php

include('admincik/config.php');
include ('birlikte/ac.thumbs.php'); 

//Retrieves data from MySQL 

 $data = mysql_query("SELECT * FROM Calculator ORDER BY isim") or die(mysql_error()); 
 //Puts it into an array 
 while($info = mysql_fetch_array( $data )) 
 { 
$resim = $info['resim'];
$isim = $info[isim];
$boyut = $info[boyut];
$pcs = $info[adet];
$sqft = $info[sqft];
$price = $info[price];
}
/////////Formdan gelen yada Giden//////////////
$length =htmlspecialchars(stripslashes($_POST['Length'])); 
$width =htmlspecialchars(stripslashes($_POST['Width'])); 
$TileNameList = "<option value=\"$sqft\">$isim $boyut</option>";

/////Matematiksel islemler/////////

$equals = $length * $width;
$box = round($equals / $sqft);
$sqftbox = $box * $sqft;
$TotalPrice = $sqftbox * $price

?>
<div class="ana">
  <table width="900" height="199" border="1">
    <tr>
      <td width="150">Name</td>
      <td width="150">Length</td>
      <td width="150">Width</td>
      <td width="150">Total Sqft Area</td>
      <td width="200">Box Needed /Total Sqft</td>
      <td width="100">Price</td>
    </tr>
    <tr>
      <td><form id="form5" name="form5" method="post" action="">
        <select name="TileName" id="TileName">
<?php echo ($TileNameList); ?>
        </select>
      </td>
      <td><input name="Length" type="text" id="Length"/></td>
      <td><input type="text" name="Width" id="Width"/></td>
      <td><input type="text" name="Sqft" id="Sqft" value="<?php echo ($equals); ?>"/></td>
      <td><?php echo "You will need <span style=\"color:red\">$box</span> Boxes<br> Which is <span style=\"color:red\">$sqftbox</span> "; ?></td>
      <td><?php echo "$$TotalPrice"; ?></td>
    </tr>
    <tr >
      <td colspan="6" align="center">
        <input type="submit" name="Submit" id="Submit" value="Submit" />
      </form></td>

    </tr>
  </table>

</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T03:01:39.283

您的循环不会附加到 $TileNameList 因为它存在于它之外。它实际上取代了它的价值。尝试：

```
<?php

include('admincik/config.php');
include ('birlikte/ac.thumbs.php'); 

//Retrieves data from MySQL 

 $data = mysql_query("SELECT * FROM Calculator ORDER BY isim") or die(mysql_error()); 
 //Puts it into an array 
 while($info = mysql_fetch_array( $data )) 
 { 
$resim = $info['resim'];
$isim = $info[isim];
$boyut = $info[boyut];
$pcs = $info[adet];
$sqft = $info[sqft];
$price = $info[price];
$TileNameList .= "<option value=\"$sqft\">$isim $boyut</option>";   // NOTE THE .=
}
/////////Formdan gelen yada Giden//////////////
$length =htmlspecialchars(stripslashes($_POST['Length'])); 
$width =htmlspecialchars(stripslashes($_POST['Width'])); 

/////Matematiksel islemler/////////

$equals = $length * $width;
$box = round($equals / $sqft);
$sqftbox = $box * $sqft;
$TotalPrice = $sqftbox * $price

?>
<div class="ana">
  <table width="900" height="199" border="1">
    <tr>
      <td width="150">Name</td>
      <td width="150">Length</td>
      <td width="150">Width</td>
      <td width="150">Total Sqft Area</td>
      <td width="200">Box Needed /Total Sqft</td>
      <td width="100">Price</td>
    </tr>
    <tr>
      <td><form id="form5" name="form5" method="post" action="">
        <select name="TileName" id="TileName">
<?php echo ($TileNameList); ?>
        </select>
      </td>
      <td><input name="Length" type="text" id="Length"/></td>
      <td><input type="text" name="Width" id="Width"/></td>
      <td><input type="text" name="Sqft" id="Sqft" value="<?php echo ($equals); ?>"/></td>
      <td><?php echo "You will need <span style=\"color:red\">$box</span> Boxes<br> Which is <span style=\"color:red\">$sqftbox</span> "; ?></td>
      <td><?php echo "$$TotalPrice"; ?></td>
    </tr>
    <tr >
      <td colspan="6" align="center">
        <input type="submit" name="Submit" id="Submit" value="Submit" />
      </form></td>

    </tr>
  </table>

</div> 
```

# bash - 引号内的bash变量

> ID：14764715
> 
> 赞同：1
> 
> 时间：2013-02-08T02:22:28.783
> 
> 标签：bash, variables, scope, quotes, double-quotes

我想运行以下命令

```
ssh data@server.org "cd /home/data/ ; chmod o+rx directory_$DATE" 
```

$DATE 是一个 bash 变量。有没有办法将其解释为变量？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T02:48:16.340

```
ssh data@server.org "cd /home/data/ ; chmod o+rx directory_\$DATE" 
```

# javascript - java script 或 jquery 是否有类似 inArraykey 的功能？

> ID：14764720
> 
> 赞同：0
> 
> 时间：2013-02-08T02:22:53.617
> 
> 标签：javascript, jquery, arrays, indexing

据我所知，jQuery 有一个`inArrary`应用如下的函数

```
$.inArray(value, array); it return -1 if not in array 
```

但是这个函数只适用于值，不适用于多维数组

```
eg . fruit [ apple,orange] 
```

例如，如果我有一个这样的数组

```
eg. fruit [apple => [red,$1], orange => [orange,$5]] 
```

我必须检查是否存在一个值（例如香蕉）作为数组键，在这种情况下是否有合适的函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T02:26:10.067

数组在 JavaScript 中不能有字符串键。只有对象可以。

如果您想查看一个对象是否包含一个键`banana`，您可以简单地测试它是否不是`undefined`：

```
if (myObject.banana != undefined) {

} 
```

...或 use `hasOwnProperty`，这在您可能已将属性初始化为的情况下可能会更好`undefined`：

```
if (myObject.hasOwnProperty("banana")) {

} 
```

# android - Android 推送 API 密钥是否与应用签名证书相关联？

> ID：14764722
> 
> 赞同：0
> 
> 时间：2013-02-08T02:23:00.903
> 
> 标签：android, certificate, push-notification, push, api-key

我们当前的市场 android 应用程序使用相同的证书进行签名。如果推送 API 密钥与证书相关联，那么这对我们有迁移影响。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T04:00:59.273

不，它不是那样的。它与设备 ID 相关联

# html5-canvas - 画架JS IE9位图未加载

> ID：14764723
> 
> 赞同：0
> 
> 时间：2013-02-08T02:23:02.117
> 
> 标签：html5-canvas, easeljs

我在使用 EaselJS 在 IE9 中渲染位图时遇到问题。每个其他浏览器都可以很好地呈现图像，但 IE9 画布是空白的。我什至尝试将图像预加载到隐藏的 div 中，但它仍然不起作用。这是我的代码，请帮助！

```
function init(){
        var canvas = document.getElementById('myCanvas');
        var stage = new createjs.Stage(canvas);
        var ship= new createjs.Bitmap(ship.png);
        stage.addChild(ship);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T00:04:48.320

添加孩子后，您需要调用 stage.update() 。此外，您需要等到图像完全加载。查看[EaselJS](http://www.createjs.com/#!/PreloadJS)的制造商提供的 PreloadJS 以帮助您处理这个问题。

# mysql - MySQL 在单个资源 ID 上连接 3 个表

> ID：14764725
> 
> 赞同：2
> 
> 时间：2013-02-08T02:23:27.563
> 
> 标签：mysql, sql, database, select

我有三张桌子

*   `resources_connection`
    1.  resource_id
    2.  resource_tag_id
*   `resources_flags`
    1.  用户身份
    2.  resource_id
*   `resources_votes`
    1.  用户身份
    2.  resource_id

每个都是一个 2 列的表，int (11) 旨在让我根据单个“资源 ID”查询标签、标志和投票的数量

我目前正在使用此查询来尝试获取标签（`resources_connection`）、标志（`resources_flags`）和投票（`resources_votes`）的计数：

```
SELECT COUNT(DISTINCT t1.resource_id) as votes,
        COUNT(DISTINCT t2.resource_id) as flags,
        COUNT(DISTINCT t3.resource_tag_id) as tags
FROM ecruit_demo.resources_votes t1
LEFT JOIN ecruit_demo.resources_flags t2
    ON (t1.resource_id = t2.resource_id)
JOIN ecruit_demo.resources_connection t3
    ON (t1.resource_id = t3.resource_id) WHERE t1.resource_id = 4 
```

问题是这个查询返回了正确的结果，`resource_id = 1`但是当我设置`resource_id`为**4**（有一个标签）时，它返回全零。什么是正确的查询结构来确保这个查询总是返回给定的标签、标志和投票的正确计数`resource_id`？

我还应该补充一点，数据库中唯一出现resource_id = 4的地方是在resources_connection中，其他两个表没有这个值

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T02:39:43.377

```
SELECT  resource_ID,
        MAX(CASE WHEN types = 'votes' THEN totals ELSE NULL END) votes,
        MAX(CASE WHEN types = 'flags' THEN totals ELSE NULL END) flags,
        MAX(CASE WHEN types = 'tags' THEN totals ELSE NULL END) tags
FROM    
    (
        SELECT  resource_ID, 'votes' types, 
                COUNT(DISTINCT resource_ID) totals
        FROM    resources_votes
        GROUP   BY resource_ID
        UNION
        SELECT  resource_ID, 'flags' types, 
                COUNT(DISTINCT resource_ID) totals
        FROM    resources_flags
        GROUP   BY resource_ID
        UNION
        SELECT  resource_ID, 'tags' types, 
                COUNT(DISTINCT resource_tag_id) totals
        FROM    resources_connection
        GROUP   BY resource_ID
    ) s
-- WHERE    resource_ID = 1
GROUP   BY resource_ID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T02:41:43.980

我在 mysql 方面不是很好，但也许你可以试试：

将 JOIN 更改为 LEFT JOIN，这样查询将是这样的。

```
 SELECT COUNT(DISTINCT t1.resource_id) as votes,
            COUNT(DISTINCT t2.resource_id) as flags,
            COUNT(DISTINCT t3.resource_tag_id) as tags
    FROM ecruit_demo.resources_votes t1
    LEFT JOIN ecruit_demo.resources_flags t2
        ON (t1.resource_id = t2.resource_id)
    LEFT JOIN ecruit_demo.resources_connection t3
        ON (t1.resource_id = t3.resource_id) WHERE t1.resource_id = 4 
```

# prolog - 可以接受参数的 swi-prolog 编译的 .exe 示例

> ID：14764740
> 
> 赞同：5
> 
> 时间：2013-02-08T02:24:39.933
> 
> 标签：prolog, arguments, exe, swi-prolog, xpce

在解决这个问题 4 小时后，我将不胜感激您的帮助：

我需要从 prolog 脚本创建一个 exe 文件（在 Windows 上）。例如， main.pl 有里面：

```
day(monday).
day(tuesday).
day(wednesday).
day(thursday).
day(friday).    % let's stop here 
```

我想编译这个脚本，生成 prog.exe 文件，然后能够执行以下运行：

```
$ prog.exe --term sunday
 false
$ prog.exe --term monday
 true
$ prog.exe --goal day(friday)
 true
$ prog.exe --goal fun(foo)
 false 
```

如果标志很困难，带有输入目标的非标志版本对我也很有帮助。

我试图阅读 swi-prolog 页面上的编译页面，但感到困惑。我无法在标准输出流上打印任何内容。我也不明白标志是如何工作的。

尝试了他们在 swi-prolog 网站上的示例，但我不明白为什么没有打印任何内容。使用下面的脚本，我可以使用命令 save(prog) 创建 exe 文件，但是在运行 prog.exe 时什么都不会打印出来。

```
:- ['main'].

main :-
        pce_main_loop(main).

main(Argv) :-
        write('hello word').

save(Exe) :-
        pce_autoload_all,
        pce_autoload_all,
        qsave_program(Exe,
                      [ emulator(swi('bin/xpce-stub.exe')),
                        stand_alone(true),
                        goal(main)
                      ]). 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T13:24:37.523

SWI-Prolog 包含`optparse`可用于命令行参数解析的库。

```
opts_spec(
    [ [opt(day), type(atom),
        shortflags([d]), longflags(['term', 'day']),
        help('name of day')]

    , [opt(goal),
        shortflags([g]), longflags([goal]),
        help('goal to be called')]
    ]
).

% days
day(monday).
day(tuesday).
day(wednesday).
day(thursday).
day(friday).

main :-
    opts_spec(OptsSpec),
    opt_arguments(OptsSpec, Opts, _PositionalArgs),
    writeln(Opts),
    memberchk(day(Day), Opts),
    memberchk(goal(Goal), Opts),
    (nonvar(Day) -> call_call(day(Day), Result), writeln(Result) ; true),
    (nonvar(Goal) -> call_call(Goal, Result), writeln(Result) ; true),
    halt.

call_call(Goal, true) :-
    call(Goal), !.

call_call(_Goal, false). 
```

您可以像这样编译和使用上面的代码。（仅在 Ubuntu 上测试过，抱歉，关于 Windows，我无能为力。）

```
$ swipl -o day.exe -g main -c day.pl

$ ./day.exe --term monday
[goal(_G997),day(monday)]
true

$ ./day.exe --goal "day(sunday)"
[day(_G1009),goal(day(sunday))]
false 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-08T10:09:44.537

我将参考 Eight_puzzle.pl，我为[另一个答案](https://stackoverflow.com/a/14769596/874024)发布的模块作为测试用例。然后我用测试参数行用法编写一个新文件（比如 p8.pl），编译并运行

```
:- use_module(eight_puzzle).

go :-
    current_prolog_flag(argv, Argv),
    writeln(argv:Argv),
    (   nth1(Test_id_flag, Argv, '--test_id'),
        Test_id_pos is Test_id_flag+1,
        nth1(Test_id_pos, Argv, Id)
    ->  atom_concat(test, Id, Func)
    ;   Func = test1
    ),
    forall(time(call(eight_puzzle:Func, R)), writeln(R)). 
```

[编译我使用了2.10 编译](http://www.swi-prolog.org/pldoc/doc_for?object=section%282,%272.10%27,swi%28%27/doc/Manual/compilation.html%27%29%29)中的文档部分 2.10.2.4

```
swipl -O --goal=go --stand_alone=true -o p8 -c p8.pl 
```

并使用指定的选项运行：

```
./p8 --test_id 0 
```

我正在运行 Ubuntu，但在 Windows 上应该没有区别。

```
argv:[./p8,--test_id,0]
% 4,757 inferences, 0.003 CPU in 0.003 seconds (100% CPU, 1865842 Lips)
[4,3,6,7,8]
% 9,970 inferences, 0.005 CPU in 0.005 seconds (100% CPU, 2065656 Lips)
[4,3,6,7,4,5,8,7,4,5,8,7,4,5,8]
... 
```

高温高压

# php - 需要关于 SolrUtils::escapeQueryChars() 用法的帮助

> ID：14764744
> 
> 赞同：1
> 
> 时间：2013-02-08T02:25:14.243
> 
> 标签：php, solr, pecl

我想要一些真实的编程场景，我们可以使用这个 solr util 方法，即 SolrUtils::escapeQueryChars()。

现在我使用它从 solr 中的查询中转义查询字符。

> **q:+人气：[10 TO *] +section:0**

我正在使用

> **escapeQueryChars(+popularity:[10 TO *] +section:0)**

但是逃跑后我无法得到结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T04:27:24.993

SolrUtils::escapeQueryChars 通常用于转义 Query 中在 Solr 中具有特殊含义的字符。

当前的字符列表`+ - && || ! ( ) { } [ ] ^ " ~ * ? : \`在 Solr 中具有特殊含义，如果不转义，行为会有所不同。

例如，如果您正在搜索`5*`除非转义，它将表现为通配符搜索并返回带有从 . 开始的标记的结果`5`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-26T23:40:49.860

它只能用于查询**值**。

大多数时候，您将接受来自用户的查询。因此，必须转义这些字符以避免异常

用户搜索查询可以是：“Thomas' Calculus (12th Edition)” 上面的用户查询肯定会导致不需要的结果

```
$query = new SolrQuery('product_name:'.SolrUtils::escapeQueryChars($userQuery)); 
```

# c# - MySqlCommand.ExecuteScalar() 不返回任何内容

> ID：14764748
> 
> 赞同：2
> 
> 时间：2013-02-08T02:25:33.277
> 
> 标签：c#, asp.net, mysql, sql

当我运行以下代码时：

```
query = "select count(*) from table where name = '?name'";
MySqlConnection connection = 
  new MySqlConnection(ConfigurationManager.ConnectionStrings["mydb"].ToString());
connection.Open();
MySqlCommand command = new MySqlCommand(query,connection);
command.Parameters.Add("?name", name);
Int32 number = command.ExecuteScalar(); 
```

`number`始终为零，即使转换为 int。

我试过将它转换为int64，没有骰子。我试过了`command.Prepare()`。我尝试过使用`Convert.ToInt32()`和其他所有变体。我已经尝试了几乎所有在阳光下的东西，包括逐字引用[这](http://dev.mysql.com/doc/refman/5.0/es/connector-net-examples-mysqlcommand.html#connector-net-examples-mysqlcommand-executescalar)表明我没有骰子。尝试将对象转换为整数、long、int32，这些似乎都不起作用。这些结果总是 0 或导致 MySQL 错误。

编辑：堆栈溢出不会在代码标签中正确格式化该代码，我很抱歉

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T02:28:57.527

原因是参数用单引号括起来，因此使其成为字符串。删除它，它会工作，

```
query = "select count(*) from table where name = @name";
MySqlConnection connection = new MySqlConnection(ConfigurationManager.ConnectionStrings["mydb"].ToString());
connection.Open();
MySqlCommand command = new MySqlCommand(query,connection);
command.Parameters.Add("@name", name); 
```

为了更好的代码，

*   用于`using`适当的物体处理
*   使用`try-catch`块来正确处理异常

代码片段，

```
query = "select count(*) from table where name = @name";
string connString =ConfigurationManager.ConnectionStrings["mydb"].ToString();
using(MySqlConnection connection = new MySqlConnection(connString))
{
    using(MySqlCommand command = new MySqlCommand(query, connection))
    {
        command.Parameters.Add("@name", name);
        try
        {
            connection.Open();
            // other codes
        }
        catch(MySqlException ex)
        {
            // do somthing with the exception
            // don't hide it
        }
    }
} 
```

# php - 使用参数正确设置 Cake 路由

> ID：14764749
> 
> 赞同：0
> 
> 时间：2013-02-08T02:25:35.517
> 
> 标签：php, cakephp, routes

我正在制作我的第一页，它需要一个名为`$hash`. 我的路线目前是这样的：

```
Router::connect('/activate/*', array('controller' => 'users', 'action' => 'activate')); 
```

这几乎可以完美地工作，但是如果我输入如下 URL：

```
http://localhost/activate/something/somethingelse/long/url 
```

它匹配路线。我希望它只匹配一个 32 字符长的参数，如下所示：

```
http://localhost/activate/ajsheeugnbloiuffheogysswhvnntpdd 
```

以及其他一切导致 404。这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T03:51:17.730

您可以为路线设置正则表达式匹配，例如

```
Router::connect(
    '/activate/:id',
    array('controller' => 'users', 'action' => 'activate'),
    array('id' => '[a-zA-Z]{32}')
); 
```

你可以调整正则表达式，目前它只是字母。

这是参考：[http ://book.cakephp.org/2.0/en/development/routing.html#route-elements](http://book.cakephp.org/2.0/en/development/routing.html#route-elements)

# sql - 使用相关子查询和 MAX

> ID：14764760
> 
> 赞同：1
> 
> 时间：2013-02-08T02:26:25.760
> 
> 标签：sql, max, correlated-subquery

我有两张桌子：

> **库存部分**：
> 
> *PartNumber*、PartDescription、CategoryID、EOQ、StockPrice、ReorderLevel、StockLevel、StockOnOrder、重量

和

> **客户订单行**
> 
> OrderID、*PartNumber*、UnitPrice、OrderQuantity、折扣、状态

我只需要返回**每个类别中最昂贵的库存零件的PartNumber、PartDescription、StockPrice 和 CategoryID**

这是迄今为止我想出的最好的...

```
SELECT IP.PartNumber, IP.PartDescription, IP.CategoryID, IP.StockPrice
FROM InventoryPart IP, CustOrderLine COL
WHERE IP.PartNumber = COL.PartNumber
AND COL.UnitPrice IN
  (SELECT MAX(COL.UnitPrice)
   FROM CustOrderLine COL) 
```

此代码的问题在于它返回所有类别的 MAX UnitPrice，而不是按类别分隔

我已经被这个问题困住了几个小时，我觉得我现在做的弊大于利。我真的很感谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T02:44:28.507

这是一个简单的版本。

```
SELECT  a.PartNumber, a.PartDescription, a.CategoryID, a.StockPrice
FROM    InventoryPart a
        INNER JOIN
        (
            SELECT  PartNumber, MAX(StockPrice) max_price
            FROM    Inventorypart
            GROUP   BY PartNumber
        ) b ON  a.partNumber = b.PartNumber AND
                a.StockPrice = b.max_price 
```

为了获得更好的性能，添加一个`INDEX`on 列`(PartNumber, StockPrice)`

```
ALTER TABLE InventoryPart ADD INDEX (PartNumber, StockPrice) 
```

**更新 1**

```
SELECT  a.PartNumber, a.PartDescription, a.CategoryID, a.StockPrice
FROM    InventoryPart a
        INNER JOIN
        (
            SELECT  PartNumber, CategoryID, MAX(StockPrice) max_price
            FROM    Inventorypart
            GROUP   BY PartNumber, CategoryID
        ) b ON  a.partNumber = b.PartNumber AND
                a.StockPrice = b.max_price AND
                a.CategoryID = b.CategoryID 
```

和

```
ALTER TABLE InventoryPart ADD INDEX (PartNumber, StockPrice, CategoryID) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T02:38:25.880

这样的事情应该使用子查询来获取`MAX`与每个 CategoryId 关联的 UnitPrice。

```
SELECT DISTINCT IP.*
FROM InventoryPart IP
   JOIN CustOrderLine COL ON IP.PartNumber = COL.PartNumber
   JOIN (
    SELECT IP.CategoryID, MAX(COL.UnitPrice) MaxPrice
    FROM InventoryPart IP INNER JOIN
        CustOrderLine COL ON IP.PartNumber = COL.PartNumber
    GROUP BY IP.CategoryID
   ) T ON IP.CategoryId = T.CategoryId AND COL.UnitPrice = T.MaxPrice 
```

这是一个简化的[Fiddle](http://sqlfiddle.com/#!3/6d8bd/1)，它显示了每个类别单价最高的库存零件。

祝你好运。

# c++ - 从 .metadata 文件夹中恢复 Eclipse 源文件

> ID：14764763
> 
> 赞同：0
> 
> 时间：2013-02-08T02:26:54.277
> 
> 标签：c++, eclipse, metadata, data-recovery, file-recovery

我正在尝试从一年多前制作的 Eclipse 项目中恢复一些 .cpp 源文件。当时我使用的是 Ubuntu，我只是将所有项目保存到同一个工作区文件夹中。

很久以前，当我重新格式化计算机时，我将工作区文件夹复制到了外部硬盘驱动器。因此，最近我查看了我的旧项目以查找我需要的源文件，我的工作区文件夹中唯一的东西是隐藏的“.metadata”文件夹。

虽然有一个 .lock 文件、.log 文件和一个 .plugins 文件夹。.plugins 文件夹内还有两个文件夹，org.eclipse.cdt.core 和 org.eclipse.cdt.make.core。我可以在这些文件夹中看到我的项目，但它们有 .pdom 和 .sc 扩展名，我不确定那是什么。

谁能给我一些关于是否可以从我拥有的数据中恢复源文件（.cpp 文件）的建议？我现在使用的是 Mac OSX，但我在虚拟机上安装了 Ubuntu 并下载了 eclipse，但没有成功恢复任何东西。任何将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T02:40:42.133

听起来您的源文件毕竟必须位于工作区文件夹之外。在这种情况下，所有工作区文件夹都将包含元数据，以将它们组织为一个项目。

如果源在工作空间内，您就不需要浏览该`.metadata`文件夹。

# c# - 如何使用 SQL Server 中的 SQL Server CE 更新脱机 .Net App 表（如果可用）

> ID：14764773
> 
> 赞同：1
> 
> 时间：2013-02-08T02:28:16.310
> 
> 标签：c#, .net, sql-server, sql-server-ce, windows-applications

我正在为他们在现场使用的销售代表开发一个 Windows 应用程序。他们在现场没有 Internet 连接，因此我希望构建某种更新解决方案，以便他们在我们的家庭办公室时可以使用。

一般的想法是销售代表在办公室时单击更新按钮。该应用程序将最新的客户端列表下载到 SQL Server CE 表中。然后销售代表继续拜访他/她的客户并在应用程序中填写问卷。每个答案都为其客户保存在 SQL Server CE 数据库中。当用户再次访问总部并单击更新按钮时，将记录的数据插入到调查表中，他们的本地数据库记录数据插入成功，旧的本地客户列表被删除，并从中检索最新的客户列表SQL 服务器到他们的 SQL CE 数据库中。冲洗并重复。

我习惯于构建 ASP.Net 站点和一些永远不会正常执行此过程的应用程序。我正在用 C# 编码，并在数据层端使用 CodeSmith。完成这种场景的推荐最佳实践和 .Net 工具是什么？提前感谢您的指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T02:31:21.917

我认为[MS 同步框架](http://msdn.microsoft.com/en-us/sync/bb821992.aspx)将是您的方案的最佳解决方案。请参阅使用同步框架创建应用程序的[演练](http://msdn.microsoft.com/en-us/library/ff928700.aspx)

# css - CSS z-index 无法正常工作

> ID：14764774
> 
> 赞同：0
> 
> 时间：2013-02-08T02:28:57.153
> 
> 标签：css, z-index

说我有以下内容：

```
<div id="fader"></div>
<div id="wrapper">
    <div class="content">Blah Blah</div>
    <div class="content">Blah Blah</div>
    <div class="content">
         <div id="form">form goes here</div>
</div>
<div id="form2">Form goes here</div> 
```

现在 #form 实际上在单击按钮之前是不可见的。那时，我想让推子把整个页面变黑，然后#form 就会出现。

我通过使用`position: absolute`正确的`z-index`. 现在，#wrapper 设置为低于 #fader 的 z-index 的 z-index。我希望#form z-index 高于#fader，但仍位于#wrapper 内！有没有办法做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T03:06:36.033

Z-index 仅适用于定位元素。

[http://jsfiddle.net/sSKZS/1/](http://jsfiddle.net/sSKZS/1/)

```
#wrapper {z-index: 1; position: relative;}
#fader {z-index: 2; position: absolute; left: 0; top: 0; width: 100%; height: 100%;}
#form2 {z-index: 3; position: absolute;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T03:23:28.753

不，因为#form 是在#wrapper 的上下文中设置的。

如果您将#fader、#wrapper 和#form2 视为在高速公路上高速行驶的公共汽车，它们都可以相互超越、合并车道等。#wrapper 车辆中的乘客——.content div 和#form——随着移动#wrapper 并且可以在“公共汽车”内移动，但它们被限制在其中。（根据您的 CSS，#form 可能嵌套在.content 的*另一个*上下文中，但这有点超出范围。）

您必须将#form 从#wrapper 移到正文中，要么通过JavaScript 事件动态地进行，要么在页面加载时进行。但无论哪种方式，它都不能在公共汽车上。

# c# - 解析json时出现system.nullreferenceexception

> ID：14764776
> 
> 赞同：1
> 
> 时间：2013-02-08T02:28:57.143
> 
> 标签：c#, json, windows-phone-8, nullreferenceexception

我正在尝试解析 JSON 文件，但上述设备显示“对象引用未设置为对象实例”时遇到重大问题。所以我迷路了。

这是我的代码

我的页面.xaml.cs

```
 void webClient_OpenReadCompleted(object sender, OpenReadCompletedEventArgs e)
    {
        DataContractJsonSerializer ser = null;
        try
        {
            ser = new DataContractJsonSerializer(typeof(ObservableCollection<User>));
            ObservableCollection<User> User = ser.ReadObject(e.Result) as ObservableCollection<User>;
            foreach (User em in User)
            {
                txbName.Text = "Username: " + em.Username;
                txbFirstName.Text = "FirstName:" +em.FirstName;
                txbSurname.Text ="Surname: " +em.Surname ;
                txbEmail.Text = "Email: " + em.Email;
            }
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }
    }

    private void btnGetData_Click(object sender, EventArgs e)
    {
        try
            {
                WebClient webClient = new WebClient();
                Uri uri = new Uri("http://beta.cloud-education.cu.cc/api/User/1");
                webClient.OpenReadCompleted += new OpenReadCompletedEventHandler(webClient_OpenReadCompleted);
                webClient.OpenReadAsync(uri);
            }    
        catch (Exception ex)
            {
                MessageBox.Show(ex.Message);
            }
    } 
```

用户.cs

```
class User
{
    public int id {get; set;}
    public string Username {get; set;}
    public string FirstName {get; set;}
    public string Surname {get;set;}
    public string Email {get;set;}
    public string LiveId { get; set; }
    public int Language { get; set; }
    public int Subjects { get; set; }
} 
```

我只是看不到我哪里出错了 uri 是正确的，JSON 的输出是

```
{"Id":1,"Username":"Test1","Firstname":"Fir1","Surname":"Sur1","Email":"Test1@contoso.com","LiveId":"LID1","Language":"1","Subjects":"1"} 
```

更新-我没有意识到其中一个字符串设置不正确，但仍然是相同的错误更新 2-约翰，当我运行应用程序时，我从中间窗口得到了这个

在 c_Sharp_WP8_Clo_Edu.DLL 中发生了“System.NullReferenceException”类型的第一次机会异常 在 c_Sharp_WP8_Clo_Edu.DLL 中发生了“System.NullReferenceException”类型的异常，并且在托管/本机边界之前未处理 类型为“System.NullReferenceException”的第一次机会异常。 NullReferenceException'发生在 c_Sharp_WP8_Clo_Edu.DLL 类型“System.NullReferenceException”的异常发生在 c_Sharp_WP8_Clo_Edu.DLL 中，并且在托管/本机边界之前未处理

这也显示在添加之后

```
System.NullReferenceException: Object reference not set to an instance of an object. 
```

在 c_Sharp_WP8_Clo_Edu.viewinfo.webClient_OpenReadCompleted（对象发送者，OpenReadCompletedEventArgs e）

更新 3 - 我扫描了我能看到的所有地方，但没有成功。更新 4 - 所以我实施了新代码并在手机上收到此错误类型'c_sharp_WP8_Clou_Edu.User' 无法序列化。考虑使用 DataContractAttribute 属性，并使用 SataMemberAttribute 属性标记您想要序列化的所有成员。或者，您可以确保该类型是公共的并且具有无参数的构造函数 - 然后该类型的所有公共成员都将被序列化，并且不需要任何属性。

这是一个重大的进步，我觉得有更多的帮助，请告诉我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T05:10:23.033

你的 JSON 数据不是一个数组，它是一个单一的对象，所以当你尝试反序列化为 ObservableCollection 时，它只会返回 null。试试这个代码

```
void webClient_OpenReadCompleted(object sender, OpenReadCompletedEventArgs e)
{
    DataContractJsonSerializer ser = null;
    try
    {
        ser = new DataContractJsonSerializer(typeof(User));
        var user = ser.ReadObject(e.Result) as User;
        txbName.Text = "Username: " + user.Username;
        txbFirstName.Text = "FirstName:" + user.FirstName;
        txbSurname.Text ="Surname: " + user.Surname;
        txbEmail.Text = "Email: " + user.Email;
    }
    catch (Exception ex)
    {
        MessageBox.Show(ex.Message);
    }
} 
```

# java - 2个应用程序之间的连接

> ID：14764780
> 
> 赞同：0
> 
> 时间：2013-02-08T02:29:17.473
> 
> 标签：java, android

我想管理 2 个应用程序之间的连接，它们将在不同的手机上运行。目的并不重要，可以说这将是某种聊天。

如何在应用程序之间创建这种连接？我知道如何使用 socket 和 serverSocket 类在 pc java 程序上执行此操作，但我想这里有所不同，因为当他在网络之间移动时电话可能会更改他的 ip。

那么你会怎么做呢？您将如何在 2 个应用程序/电话之间建立连接

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T02:44:08.607

正如您所指出的，由于这两部电话的 IP 地址会发生变化，因此您可能需要使用中介。

这里的一般设计模式是拥有一个具有固定 IP 或 DNS 地址的服务器，用于在两个移动设备之间中继消息。最简单的实现是网络服务器，每部手机都将通过 HTTP(S) 连接到该服务器以传输数据或轮询更新。

有许多后端即服务平台提供这种类型的预先构建的功能，并且可能足以满足聊天系统之类的需求。查看[Cloudmine](http://cloudmine.me "云矿")和[Parse](https://parse.com "解析")。

如果您需要低延迟或近乎实时的连接，您还可以考虑实现自己的使用 Android [C2DM](http://android-developers.blogspot.com/2010/05/android-cloud-to-device-messaging.html)（云到设备消息传递）服务的服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T03:02:33.053

鉴于您在评论中描述的场景，使用推送通知即[谷歌云消息传递 (GCM)](http://developer.android.com/google/gcm/index.html)可能就足够了。

因此，当`program B`想要从 更新时`program A`，它会要求服务器将通知（通过 GCM）推送到`program A`. 请注意，**不会**`program A`每x 次连接到服务器以检查更新。

 **另一个*开箱即用的*解决方案是在通信不那么频繁且消息很短的情况下使用 SMS。这里我的意思是短信将由您的应用程序直接处理（假设它有一定的注意词）并且不会进入收件箱，即手机上没有短信通知

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T03:14:00.233

请参阅 Android 的示例蓝牙聊天应用程序，它将让您了解如何实现它。**

# ocaml - 具有多种返回类型的函数：可能吗？

> ID：14764786
> 
> 赞同：2
> 
> 时间：2013-02-08T02:29:34.637
> 
> 标签：ocaml, strong-typing

我有以下代码，我想返回一个布尔值或一个元组。（函数`isvariable`和`dont_care`都返回布尔值，仅供参考）

```
let match_element (a, b) =
if a = b then true
else if (dont_care a) || (dont_care b) then true
else if (isvariable a) then (a, b)
else if (isvariable b) then (b, a)
else false;; 
```

目前，它引发以下错误：

有没有办法解决这个问题？

```
This expression has type 'a * 'b
but an expression was expected of type bool 
```

（此功能基于 Python 程序的指令，我不确定在 OCaml 中是否可行。）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-08T02:41:51.020

粗略地说，您想要的是临时多态性或重载。在 OCaml 中是不可能的，更重要的是，我们不想在 OCaml 中拥有它。

如果你想要一个返回多种类型的函数，那么你必须定义一个新的“sum”类型来表达这些类型：在这里，你想要返回一个布尔值或元组，所以一个新类型意味着“一个布尔值”或元组”。在 OCaml 中，我们定义了这样一个类型：

```
type ('a, 'b) t = Bool of bool
                | Tuple of 'a * 'b 
```

使用这种新的 sum 类型，您的代码应如下所示：

```
type ('a, 'b) t = 
  | Bool of bool
  | Tuple of 'a * 'b

let match_element (a, b) =
  if a = b then Bool true
  else if dont_care a || dont_care b then Bool true
  else if is_variable a then Tuple (a, b)
  else if is_variable b then Tuple (b, a)
  else Bool false;; 
```

此处带有两个参数（'a 和 'b）的类型 t 对于您的目的来说可能过于笼统，但我无法从上下文中猜出您想要做什么。可能有更好的类型定义适合您的意图，例如：

```
type element = ... (* Not clear what it is from the context *)

type t =
  | I_do_not_care        (* Bool true in the above definition *)
  | I_do_care_something  (* Bool false in the above definition *)
  | Variable_and_something of element * element  (* was Tuple *) 
```

# javascript - 如何将具有给定文本的新元素推送到选定的 html 元素数组？

> ID：14764787
> 
> 赞同：0
> 
> 时间：2013-02-08T02:29:38.150
> 
> 标签：javascript, arrays

这是选定的 HTML 元素：

```
var array = jQuery.makeArray($(".dersprg tr td:nth-child(6)")); 
```

这会选择一些表格数据，这些表格数据由表格标题文本和一些不相关的数据组成。我可以使用 if 语句解释不相关的数据并提取我需要的信息，但我无法将其推送到数组，因为我想的类型不同。代码是这样的：

```
for(i=0 ; i<array.length ; i++){
    content = array[i].innerHTML;
    if(some conditions){
        array.splice(i--,1);    //eliminate non day elements
        array.push('test input <br>');  //problematic line
    }
} 
```

你看，我`innerHTML`用来比较所选`<td>`元素的内容，但是当涉及到添加一些时`test input`，整个数组呈现为空。我认为这是由于类型不匹配，但我不知道如何解决这个问题。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T02:43:55.470

试试这个 ：

```
var cell=document.createElement('td');
cell.appendChild( document.createTextNode('test input <br>') );
array.push(cell); 
```

这将`<td>`在数​​组中插入 a 而不是字符串。

# php - 将文件夹内容与 mysql 数据进行比较

> ID：14764788
> 
> 赞同：0
> 
> 时间：2013-02-08T02:29:47.433
> 
> 标签：php, mysql, file

我想检查此文件夹中是否有任何不在 mysql 数据库中的文件名，但我似乎无法找到一种方法来执行此操作，因为获取 mysql 数据的循环必须在读取目录的循环内（据我所知），这把整个过程搞砸了。还有另一种方法可以做到这一点：

```
if ($handle = opendir('video/test')) {

    while (false !== ($entry = readdir($handle))) {
       if ($entry !== "." && $entry !== ".."){

  $delfile =  "SELECT * FROM files WHERE filename <> '$entry'";
  $delfile = $db->query($delfile);

  while($row = $delfile->fetch_assoc()){
         echo $row['filename'];

      }
    }
  }
   closedir($handle);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T02:36:22.023

您可以使用[glob](http://www.php.net/manual/en/function.glob.php)获取文件名数组

```
$filenames = glob( 'video/test' ); 
```

然后使用 MySQL 的[in](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_in)检查表

```
$sql = sprintf( 'select * from files where filename not in ("%s")', implode( '","', $filenames ) ); 
```

没有循环！

# jquery - jQuery 覆盖——不同 DIV 的相同代码

> ID：14764790
> 
> 赞同：0
> 
> 时间：2013-02-08T02:30:33.820
> 
> 标签：jquery, css, overlay, loader

我正在尝试执行以下操作->我有动态数量的`DIV`元素..所有这些都像这样堆叠：

```
 __________________________________________
|                                          |
|                                          |
|                    DIV1                  |
|                                          |
 __________________________________________
 __________________________________________
|                                          |
|                                          |
|                    DIV2                  |
|                                          |
 __________________________________________
 __________________________________________
|                                          |
|                                          |
|                    DIV3                  |
|                                          |
 __________________________________________ 
```

我在每个内部都有一个按钮，它调用相同的 jQuery 函数：

```
function updateProduct(old_q,ent_id,element){
        var new_q = jQuery(element).prev().children('input').val();
        jQuery.post('/ajax_calls/checkout/update_cart_item.php', {entity_id: ent_id,old_q: old_q,new_q: new_q}, function(data) {
                cartItemOut = data;
                alert(cartItemOut);
        });
} 
```

如您所见，我使用 jQuery 来确定`THIS`元素是什么，然后找到与子/父等相关的输入。我的问题是如何`DIV`在其中一个整体上覆盖“加载” ，**或者** 给定我使用的**代码**上面确定我在哪？这是每个的基本结构：`DIV1``DIV2` **`DIV3``DIV``DIV`**

 **```
<div class="item_wrapper">
        <div style="float:left; width:100px; height:100px; margin-left:15px; position:relative;">
                <div style="margin-top:100%;"></div>
                <img width="100" height="69" src="/images/100/198.jpg" style="position:absolute; top: 0px; bottom: 0px; left: 0px; right: 0px; max-height:100%; max-width:100%; display:block; margin:auto;">
        </div>
        <div style="float:left; width:198px; margin-left:20px; margin-bottom:7px;">
                <div style="height:31px; overflow:hidden; margin-bottom:2px;">
                        <span style="font-size:12px; font-weight:bold;">Name</span>
                </div>
                <br> 
                <span style="color:#86a057;">item#: </span>198<br>
                <span style="color:#86a057;">price:</span>
                <span style="color:#000; font-weight:bold;">$107.99</span><br>

                <div style="width:300px; margin-top:10px;">

                       <div style="float:left; margin-top:4px; width:20px; margin-right:3px; color:#86a057;">qty: </div>

                       <div style="float:left; margin-right:15px;">
                       <input type="text" value="1" style="font-family:arial; font-size:13px; height:17px; margin-top:2px; width:30px; text-align: center;"></div>

                       <div onclick="updateProduct('1','198',this);" style="float:left; margin-right:7px; margin-top:3px;  width:59px; height:20px; cursor:pointer;">
                       <img src="/skin/frontend/templat/default/images/update_cart.png">
                       </div>

                       <div style="float:left; margin-right:7px; margin-top:3px;  width:59px; height:20px; cursor:pointer;">
                       <img src="/skin/frontend/template/default/images/remove_cart.png">
                       </div>

                </div>

        </div>
        <div class="clearfix"></div>
</div> 
```

所以本质上，问题是我有多个`DIV`s 与 class `item_wrapper`。当我单击`updateProduct()`如何用覆盖和加载器图像覆盖**它时？** *我尝试的一切似乎都是徒劳的，我开始认为在simple*`DIV`领域是不可能的。我什至尝试过像检测' 的位置和/并在其上定位 a一样复杂，但这似乎不是正确的解决方案，必须有更好的方法。*`item_wrapper``WIDTH``HEIGHT``FIXED` `DIV`*

 ** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T02:59:39.950

You can use absolute positioning to mask the element. You can enhance example given below.

```
<div class="ct">
    <div class="x">
        <input type="button" Value="Test" />
    </div>
    <div class="x">
        <input type="button" Value="Test" />
    </div>
    <div class="x">
        <input type="button" Value="Test" />
    </div>
</div>

$('.ct').on('click', '.x input', function(e){
    var target = $(e.target);
    var div = target.closest('.x');
    div.append('<div class="mask">mask</div>');
    setTimeout(function(){
        $('.mask', div).remove();
    }, 2500);
});

.ct {
    padding: 10px;
}

.x {
    height: 50px;
    margin-bottom: 10px;
    border: 1px solid lightgrey;
    position: relative;
}

.mask {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    opacity: .5;
    background-color: lightblue;
} 
```

Demo: [Fiddle](http://jsfiddle.net/arunpjohny/6zL9U/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T03:08:45.000

您可以使用以下 jQuery 找到父 div：

```
var itemWrapper = jQuery(element).parents('.item_wrapper'); 
```

然后，您可以将一些加载元素附加到该项目并相应地定位和调整其大小。

```
function updateProduct(old_q, ent_id, element) {
    var new_q = jQuery(element).prev().children('input').val();
    jQuery.post('/ajax_calls/checkout/update_cart_item.php', {entity_id: ent_id,old_q: old_q,new_q: new_q}, function(data) {
            cartItemOut = data;
            alert(cartItemOut);
            $(element).find('.loading-overlay').remove();
    });
    var $ = jQuery, itemWrapper = $(element).parents('.item_wrapper'),
        iHeight = itemWrapper.height(), iWidth = itemWrapper.width();
    itemWrapper.prepend($('<div class="loading-overlay"><span>Loading...</span></div>').height(iHeight).width(iWidth));
} 
```

看起来另一个答案已经提到了这一点，但是您需要使用绝对定位来覆盖您的元素。

```
.loading-overlay {
    position: absolute;
    background: gray;
    z-index: 1;
    opacity: 0.5;
} 
```

这是一个使用类似于你所拥有的东西的小提琴：http: [//jsfiddle.net/Jeff_Meadows/dyPMG/3/](http://jsfiddle.net/Jeff_Meadows/dyPMG/3/)***

# ruby - 为什么使用“include ::X”而不是“include X”？

> ID：14764796
> 
> 赞同：1
> 
> 时间：2013-02-08T02:31:14.813
> 
> 标签：ruby, syntax, include

在某些代码中，我看到了这一点：

```
include ActiveModel::ClassFoo 
```

在一些代码中我看到了这个：

```
include ::ActiveModel::ClassFoo 
```

有什么区别？抱歉，我不知道谷歌要找到什么答案。

# sql - 全名和日期 - TSQL

> ID：14764801
> 
> 赞同：-1
> 
> 时间：2013-02-08T02:31:52.997
> 
> 标签：sql

我`table1`包含两列：

`FirstName`和`LastName`。

我想要`Full_name`（名字和名字的串联）`table2`以及当前日期而不是时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T02:41:39.147

这是非常简单的 SQL。在问这样的问题之前，您可以通过阅读网络上的一些基本教程来节省一些时间。

[这样](http://www.w3schools.com/sql/default.asp)的事情应该是一个好的开始。

```
INSERT INTO table2(
    FullName, 
    CurrentDate
 )
SELECT 
    Firstname + ' ' + LastName,
    CAST(GETDATE() AS DATE)
FROM table1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T02:47:45.440

```
INSERT INTO table2 (fullName, todaysdate)
SELECT firstName + ' ' + lasName AS FullName,
    CONVERT(char(10), GetDate(),126)
FROM table1 
```

# java - Checkstyle 和 Jenkins：检查 SVN 提交中修改/添加的行

> ID：14764804
> 
> 赞同：0
> 
> 时间：2013-02-08T02:32:38.120
> 
> 标签：java, svn, jenkins, checkstyle

我们有很多旧代码的大型 Java 项目。现在我们有了代码约定和 Checkstyle 规则来检查它。

我们想要配置 Jenkins 作业，该作业在每次提交到 SVN 后运行，以检查修改/添加的行是否违反我们的任何 Checkstyle 规则。

由于遗留代码，它不是检查整个项目的选项。此外，我们不能只是重新格式化所有代码，因为这样就很难确定谁更改了特定的行以及为什么更改。

我们考虑的方法 - 区分以前和当前的 Checkstyle 报告，看看是否有新的违规行为。

问题是 - 我们如何才能访问 Jenkins 中以前的 Checkstyle 报告？

或者如何将 checkstyle 配置为仅在出现新违规时才无法构建？

是否有现成的解决方案可以进行此类检查？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T05:22:43.500

解决方案是制作一个 bash 脚本，该脚本与以前的 checkstyle 报告产生差异，如果有新的违规行为，则构建失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T16:56:14.750

这有点绕，但是如果您设置一个[Sonar](http://www.sonarsource.org/)实例来分析您的项目，您可以通过它的远程访问 API 以编程方式查询违规数据。您知道遗留代码中的违规计数（大概该数字不会经常更改）。那是您的基线 - 您不希望计数高于此。

因此，在您的 CI 作业中，您可以在末尾添加一个脚本，该脚本调用 Sonar 以获取您关心的每个严重级别（阻止程序、严重等）的违规计数，如果当前计数超过阈值/基准。

Sonar 总体来说非常棒，特别是对于有大量遗留代码的项目，因为你可以深入研究并找出最危险的区域在哪里。如果您还没有检查，他们已经运行了一个[公共实例。](http://nemo.sonarsource.org/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T14:28:11.833

您是否检查过可用于 jenkins的[Checkstyle 插件？](https://wiki.jenkins-ci.org/display/JENKINS/Checkstyle+Plugin)它将为每次提交生成报告，您可以比较每次更改的结果。每次提交都会触发一个新的构建，最后会生成一个新的报告。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T14:53:35.380

> 您是否检查过可用于 jenkins 的 Checkstyle 插件？它将为每次提交生成报告，您可以比较每次更改的结果。每次提交都会触发一个新的构建，最后会生成一个新的报告。[湿婆库马尔](https://stackoverflow.com/a/14774733/368630)
> 
> 我当然检查过了，但问题是 - 我们如何才能访问以前版本的 Checkstyle 报告？

我还可以建议[静态代码分析插件](https://wiki.jenkins-ci.org/display/JENKINS/Static+Code+Analysis+Plug-ins)。这将向您显示 Checkstyle 问题的*趋势线*作为一个漂亮的图表。您还可以将其与[CI Game 插件](https://wiki.jenkins-ci.org/display/JENKINS/The+Continuous+Integration+Game+plugin)一起使用，该插件将为修复 Checkstyle 问题奖励积分，并因导致更多 checkstyle 问题而扣除积分。

我发现 CI Game 插件工作得非常好——特别是如果你让你的开发人员参与一些竞赛：

> *我们将在本月的比赛中添加一些内容。众所周知，一等奖是一辆凯迪拉克 Eldorado。有人想看二等奖吗？（举起奖品）二等奖是一套牛排刀。三等奖是你被解雇了。*

*亚历克·鲍德温在格伦加里·格伦·罗斯饰演布莱克*

当你把它变成一个有趣的游戏时，这些 Checkstyle 问题得到修复的速度是惊人的。

# function - 用基本算术运算实现指数函数

> ID：14764807
> 
> 赞同：1
> 
> 时间：2013-02-08T02:33:45.003
> 
> 标签：function, exponential

为了练习的目的，我必须用最基本的算术运算来实现指数函数。我想出了这个，其中*x*是底数，*y*是指数：

```
function expAetB() {
     product=1;
     for (i=0; i<y; i++)
     {
          product=product*x;
     }
     return product;
}; 
```

但是，还有比 更多的基本操作`product=product*x;`。我应该能够以某种方式插入另一个`for`循环，该循环乘以并传递结果，但是我找不到一种方法来做到这一点而不会陷入无限循环。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T02:36:24.567

与求幂是重复乘法一样，乘法只是重复加法。

只需创建*另一个*为您执行此操作的函数`mulAetB`，并注意诸如负输入之类的事情。

您甚至可以更上一层楼，并根据增量和减量来定义添加，但这可能有点矫枉过正。

* * *

例如，请参阅以下程序，该程序使用加法的过度杀伤方法：

```
#include <stdio.h>

static unsigned int add (unsigned int a, unsigned int b) {
    unsigned int result = a;
    while (b-- != 0) result++;
    return result;
}

static unsigned int mul (unsigned int a, unsigned int b) {
    unsigned int result = 0;
    while (b-- != 0) result = add (result, a);
    return result;
}

static unsigned int pwr (unsigned int a, unsigned int b) {
    unsigned int result = 1;
    while (b-- != 0) result = mul (result, a);
    return result;
}

int main (void) {
    int test[] = {0,5, 1,9, 2,4, 3,5, 7,2, -1}, *ip = test;
    while (*ip != -1) {
        printf ("%d + %d = %3d\n"  , *ip, *(ip+1), add (*ip, *(ip+1)));
        printf ("%d x %d = %3d\n"  , *ip, *(ip+1), mul (*ip, *(ip+1)));
        printf ("%d ^ %d = %3d\n\n", *ip, *(ip+1), pwr (*ip, *(ip+1)));
        ip += 2;
    }
    return 0;
} 
```

该程序的输出表明计算是正确的：

```
0 + 5 =   5
0 x 5 =   0
0 ^ 5 =   0

1 + 9 =  10
1 x 9 =   9
1 ^ 9 =   1

2 + 4 =   6
2 x 4 =   8
2 ^ 4 =  16

3 + 5 =   8
3 x 5 =  15
3 ^ 5 = 243

7 + 2 =   9
7 x 2 =  14
7 ^ 2 =  49 
```

* * *

如果你真的*必须*在单个函数中使用它，只需将函数调用重构为内联即可：

```
static unsigned int pwr (unsigned int a, unsigned int b) {
    unsigned int xres, xa, result = 1;

    // Catch common cases, simplifies rest of function (a>1, b>0)

    if (b == 0) return 1;
    if (a == 0) return 0;
    if (a == 1) return 1;

    // Do power as repeated multiplication.

    result = a;
    while (--b != 0) {
        // Do multiplication as repeated addition.

        xres = result;
        xa = a;
        while (--xa != 0)
            result = result + xres;
    }

    return result;
} 
```

# directx - 从内存直接创建纹理

> ID：14764818
> 
> 赞同：4
> 
> 时间：2013-02-08T02:35:57.203
> 
> 标签：directx, directx-9

我有一个指向内存中位置的指针，其中包含我的像素信息。我想使用纹理或任何其他形式在屏幕上显示它。是否可以在 Directx 9 中从内存中创建纹理？谢谢

这是代码示例

```
D3DLOCKED_RECT r;
HRESULT hr;
DWORD c0=D3DCOLOR_ARGB(255,0,0,0), c1=D3DCOLOR_ARGB(255,255,255,255);
DWORD *pData, 
Image[64]={c0,c0,c0,c1,c0,c0,c0,c0,
   c0,c0,c0,c1,c0,c0,c0,c0,
   c0,c0,c0,c1,c0,c0,c0,c0,
       c1,c1,c1,c1,c1,c1,c1,c0,
       c0,c0,c0,c1,c0,c0,c0,c0,
   c0,c0,c0,c1,c0,c0,c0,c0,
   c0,c0,c0,c1,c0,c0,c0,c0,
   c0,c0,c0,c0,c0,c0,c0,c0};
if (m_pDevice->CreateTexture(8,8,1,D3DUSAGE_DYNAMIC, D3DFMT_A8R8G8B8, D3DPOOL_DEFAULT,   &m_pPointTexture,NULL)!=D3D_OK)
    return false;
if (m_pPointTexture->LockRect(0,&r,NULL, D3DLOCK_DISCARD |D3DLOCK_NOOVERWRITE)!=D3D_OK)
    return false;
for (int y=0; y<8; y++)
{
 pData=(DWORD*)((BYTE*)r.pBits + r.Pitch);
 for (int x=0; x<8; x++)
 pData[x]=Image[y*8+x];
}
m_pDevice->SetTexture(0,m_pPointTexture); 
```

然后在 setTexture 之前通过绘制矩形图元来渲染它，如果我通过 D3DXSaveTextureToFile() 将我的纹理保存到 BMP 文件，然后使用 D3DXCreateTextureFromFile() 创建纹理。然后我得到预期的输出

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T09:35:32.190

D3DXCreateTextureFromFileInMemory ( [doc](http://msdn.microsoft.com/de-de/library/windows/desktop/bb172803%28v=vs.85%29.aspx) ) 如果它是内存中的图像文件。

但是，如果只有颜色数据，只需使用 D3DXCreateTexture ( [doc](http://msdn.microsoft.com/de-de/library/windows/desktop/bb172800%28v=vs.85%29.aspx) ) 创建纹理，将其锁定并手动将数据写入纹理。

# html - 如何创建下载的 jquery 库的相对链接？

> ID：14764826
> 
> 赞同：0
> 
> 时间：2013-02-08T02:36:52.837
> 
> 标签：html, dynamic-linking

我在链接到 jquery 库时遇到问题，想知道是否有人能够指出我做错了什么。

我的 html 页面是本地托管的 Sharepoint 站点：

```
http://server/sites/blog/dude/Pages/MyPage.html 
```

我的 jquery 库位于此处：

```
http://server/sites/blog/style%20library/js/jquery-1.7.2.min.js 
```

如果我像这样引用整个 jquery 地址，它工作正常：

```
<script language="javascript" type="text/javascript" src='http://server/sites/blog/style%20library/js/jquery-1.7.2.min.js'></script> 
```

但是当我这样做时它不在：

```
<script language="javascript" type="text/javascript" src='../../blog/style%20library/js/jquery-1.7.2.min.js'></script> 
```

我是否错误地使用了“文件夹向上”语法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T02:38:02.070

就放`/sites/blog/style%20library/js/jquery-1.7.2.min.js`

前导斜杠告诉浏览器转到主机并从那里开始。

# android - 如何有效地调用 AES/ECB 64k 次？

> ID：14764835
> 
> 赞同：3
> 
> 时间：2013-02-08T02:37:36.903
> 
> 标签：android, performance, encryption, cryptography, aes

我正在为 MEGA（这个陌生人的云站点）开发一个库。如果我做对了，他们会通过以下方式从用户密码中获取 AES 主密钥：

*   使用密码的 UTF-8 编码作为起始序列
*   通过附加 0 扩展 s，使其长度为 16 的倍数
*   设置 128 位主密钥 pkey 以修复初始化向量
*   在每轮 64k 轮中：
    *   对于 s AES/ECB 的每个 128 位块 s[i]，使用 s[i] 作为密钥加密 k。

总而言之，对于 28 个字符的密码，我必须对 AES 进行 128k 次调用。我的实现结果相当缓慢。如：“见鬼，那需要的时间太长了。”

DDMS 显示 GC 运行很热。我怎样才能让 AES 实现在内部或至少更有效地完成所有这些回合？每次调用都会创建一个新的字节数组，之后会被丢弃。有没有办法就地做到这一点？

```
public static byte[] calculatePasswordKey(String password) {
    Log.v(TAG, ">calculatePasswordKey");

    byte[] pw = password.getBytes();
    byte[] pkey = {(byte)0x93, (byte)0xC4, 0x67, (byte)0xE3, 0x7D, (byte)0xB0, (byte)0xC7, (byte)0xA4, (byte)0xD1, (byte)0xBE, 0x3F, (byte)0x81, 0x01, 0x52, (byte)0xCB, 0x56};

    //expand by appending 0s
    Log.v(TAG, Arrays.toString(pw));
    if ((pw.length & 0xf0) != 0) {
        int l = (pw.length & 0xf0) + 0x10;
        byte[] paddedpw = new byte[l];
        System.arraycopy(pw, 0, paddedpw, 0, pw.length);
        pw = paddedpw;
        Log.v(TAG, Arrays.toString(pw));
    }

    try {
        //create ciphers only once
        Cipher[] ciphers = new Cipher[pw.length / 16];
        Log.v(TAG, "Creating " + ciphers.length + " AES ciphers");
        for (int cIndex = 0; cIndex < ciphers.length; cIndex++) {
            ciphers[cIndex] = getAesEcbCipher();
            ciphers[cIndex].init(Cipher.ENCRYPT_MODE, new SecretKeySpec(pw, cIndex * 16, 16, "AES"));
        }

        Log.v(TAG, "Beginning 65536 rounds of AES encryption");
        for (int round = 0; round < 65536; round--) {
            for (Cipher c: ciphers) {
                pkey = c.update(pkey);
                if (pkey.length != 16) {
                    throw new Error("update does not work, revert to doFinal()");
                }
            }
        }
        return pkey;
    } catch (Exception e) {
        Log.e(TAG, "Cannot calculate password key: " + e.getMessage());
        e.printStackTrace();
    }
    return null;
} 
```

非常感谢，沃尔克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T23:52:48.110

出于存档目的，我将我的评论作为答案，因为某些评论将来可能对某人有用。

问题出`count--`在第二个 for 循环中。它应该是一个`count++`. 实际上，代码正在执行 2^31 轮，即 2147483648 而不是所需的 65536。

# spring - 尝试在我的 WAR 中运行 Spring @Transactional 服务方法时出现“事务未激活”

> ID：14764839
> 
> 赞同：3
> 
> 时间：2013-02-08T02:38:00.620
> 
> 标签：spring, hibernate, jboss, transactions, persistence

我正在使用 Spring 3.1.1.RELEASE、Hibernate 4.1.0.Final 和 JBoss 7.1.1.Final。当我尝试运行已将方法注释为@Transactional 的服务方法时，事务完成后出现以下错误：

```
19:25:43,968 WARN  [org.hibernate.engine.jdbc.spi.SqlExceptionHelper] (http--127.0.0.1-8080-1) SQL Error: 0, SQLState: null
19:25:43,973 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/myprojectclient].[dispatcher]] (http--127.0.0.1-8080-1) Servlet.service() for servlet dispatcher threw exception: javax.resource.ResourceException:     IJ000459: Transaction is not active: tx=TransactionImple < ac, BasicAction: 0:ffffc0a80064:-6b6427d:5114500c:3bd status: ActionStatus.ABORT_ONLY >
    at org.jboss.jca.core.connectionmanager.tx.TxConnectionManagerImpl.getManagedConnection(TxConnectionManagerImpl.java:352)
    at org.jboss.jca.core.connectionmanager.AbstractConnectionManager.allocateConnection(AbstractConnectionManager.java:464)
    at org.jboss.jca.adapters.jdbc.WrapperDataSource.getConnection(WrapperDataSource.java:129)
    at org.hibernate.ejb.connection.InjectedDataSourceConnectionProvider.getConnection(InjectedDataSourceConnectionProvider.java:67) [hibernate-entitymanager-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.internal.AbstractSessionImpl$NonContextualJdbcConnectionAccess.obtainConnection(AbstractSessionImpl.java:276) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.engine.jdbc.internal.LogicalConnectionImpl.obtainConnection(LogicalConnectionImpl.java:297) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.engine.jdbc.internal.LogicalConnectionImpl.getConnection(LogicalConnectionImpl.java:169) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.engine.jdbc.internal.proxy.ConnectionProxyHandler.extractPhysicalConnection(ConnectionProxyHandler.java:82) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.engine.jdbc.internal.proxy.ConnectionProxyHandler.continueInvocation(ConnectionProxyHandler.java:138) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.engine.jdbc.internal.proxy.AbstractProxyHandler.invoke(AbstractProxyHandler.java:81) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at $Proxy169.prepareStatement(Unknown Source)   at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$5.doPrepare(StatementPreparerImpl.java:147) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:166) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareQueryStatement(StatementPreparerImpl.java:145) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.loader.Loader.prepareQueryStatement(Loader.java:1739) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.loader.Loader.doQuery(Loader.java:828) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:289) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.loader.Loader.doList(Loader.java:2463) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.loader.Loader.doList(Loader.java:2449) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2279) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.loader.Loader.list(Loader.java:2274) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.loader.hql.QueryLoader.list(QueryLoader.java:470) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.hql.internal.ast.QueryTranslatorImpl.list(QueryTranslatorImpl.java:355) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.engine.query.spi.HQLQueryPlan.performList(HQLQueryPlan.java:196) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.internal.SessionImpl.list(SessionImpl.java:1115) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.internal.QueryImpl.list(QueryImpl.java:101) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.ejb.QueryImpl.getSingleResult(QueryImpl.java:280) [hibernate-entitymanager-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.ejb.criteria.CriteriaQueryCompiler$3.getSingleResult(CriteriaQueryCompiler.java:264) [hibernate-entitymanager-4.0.1.Final.jar:4.0.1.Final]
    at org.mainco.subco.core.repo.AbstractHibernateDAO.findByUniqueConstraint(AbstractHibernateDAO.java:100) [core-0.0.1-SNAPSHOT.jar:]
    at org.mainco.subco.user.repo.RoleDaoImpl.findRoleByName(RoleDaoImpl.java:17) [user-0.0.1-SNAPSHOT.jar:]
    at org.mainco.subco.myproject.service.TrainingSessionServiceImpl.addUserLinks(TrainingSessionServiceImpl.java:222) [pd-0.0.1-SNAPSHOT.jar:]
    at org.mainco.subco.myproject.service.TrainingSessionServiceImpl.createOrUpdateTrainingSessionFromOrder(TrainingSessionServiceImpl.java:141) [pd-0.0.1-SNAPSHOT.jar:]
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [classes.jar:1.6.0_37]
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) [classes.jar:1.6.0_37]
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) [classes.jar:1.6.0_37]
    at java.lang.reflect.Method.invoke(Method.java:597) [classes.jar:1.6.0_37]
    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:318) [spring-aop-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183) [spring-aop-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150) [spring-aop-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110) [spring-tx-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172) [spring-aop-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202) [spring-aop-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at $Proxy132.createOrUpdateTrainingSessionFromOrder(Unknown Source) at org.mainco.subco.myproject.quartz.ProcessPDWorker.createTrainingSessions(ProcessPDWorker.java:106) [classes:]
    at org.mainco.subco.myproject.quartz.ProcessPDWorker.createOrUpdateTrainingSessions(ProcessPDWorker.java:85) [classes:]
    at org.mainco.subco.myproject.quartz.ProcessPDWorker.work(ProcessPDWorker.java:67) [classes:]
    at org.mainco.subco.myproject.controller.IndexController.execute(IndexController.java:66) [classes:]
    at org.mainco.subco.myproject.controller.IndexController.refreshPD(IndexController.java:38) [classes:]
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [classes.jar:1.6.0_37]
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) [classes.jar:1.6.0_37]
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) [classes.jar:1.6.0_37]
    at java.lang.reflect.Method.invoke(Method.java:597) [classes.jar:1.6.0_37]
    at org.springframework.web.method.support.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:213) [spring-web-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:126) [spring-web-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:96) [spring-webmvc-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:617) [spring-webmvc-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at  org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:578) [spring-webmvc-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80) [spring-webmvc-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923) [spring-webmvc-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852) [spring-webmvc-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882) [spring-webmvc-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778) [spring-webmvc-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:734) [jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:847) [jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:322) [spring-security-web-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:116) [spring-security-web-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83) [spring-security-web-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) [spring-security-web-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113) [spring-security-web-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) [spring-security-web-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:103) [spring-security-web-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) [spring-security-web-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:113) [spring-security-web-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) [spring-security-web-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54) [spring-security-web-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) [spring-security-web-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:45) [spring-security-web-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) [spring-security-web-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:182) [spring-security-web-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) [spring-security-web-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87) [spring-security-web-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) [spring-security-web-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:184) [spring-security-web-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:155) [spring-security-web-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346) [spring-web-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259) [spring-web-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161) [jbossweb-7.0.13.Final.jar:]
    at org.jboss.as.jpa.interceptor.WebNonTxEmCloserValve.invoke(WebNonTxEmCloserValve.java:50) [jboss-as-jpa-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368) [jbossweb-7.0.13.Final.jar:]
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [jbossweb-7.0.13.Final.jar:]
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671) [jbossweb-7.0.13.Final.jar:]
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930) [jbossweb-7.0.13.Final.jar:]
    at java.lang.Thread.run(Thread.java:680) [classes.jar:1.6.0_37] 
```

这是我正在使用的 persistence.xml……</p>

```
<persistence version="2.0"
    xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence
        http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
    <persistence-unit name="myprojectclientunit" transaction-type="JTA">
        <!-- <provider>org.hibernate.ejb.HibernatePersistence</provider> -->
        <jta-data-source>java:jboss/datasources/MySqlDS</jta-data-source>
        <class>org.mainco.subco.ecom.domain.Product</class>
        <class>org.mainco.subco.ebook.domain.TableOfContentsItem</class>
        <class>org.mainco.subco.ebook.domain.Resource</class>
        <class>org.mainco.subco.ebook.domain.Ebook</class>
        <class>org.mainco.subco.ebook.domain.Part</class>
        <class>org.mainco.subco.ebook.domain.Content</class>
        <class>org.mainco.subco.ebook.domain.ContentTopic</class>
        <class>org.mainco.subco.standards.domain.AbTopic</class>
        <class>org.mainco.subco.standards.domain.AbStandard</class>
        <class>org.mainco.subco.standards.domain.AbMss</class>
        <class>org.mainco.subco.standards.domain.CorrelationType</class>
        <class>org.mainco.subco.core.domain.Grade</class>
        <class>org.mainco.subco.core.domain.Subject</class>
        <class>org.mainco.subco.ecom.domain.Contract</class>
        <class>org.mainco.subco.organization.domain.Country</class>
        <class>org.mainco.subco.organization.domain.State</class>
        <class>org.mainco.subco.organization.domain.Address</class>
        <class>org.mainco.subco.organization.domain.OrganizationType</class>
        <class>org.mainco.subco.organization.domain.Organization</class>
        <class>org.mainco.subco.user.domain.User</class>
        <class>org.mainco.subco.user.domain.UserContract</class>
        <class>org.mainco.subco.user.domain.Role</class>
        <class>org.mainco.subco.pd.domain.AccessCode</class>
        <class>org.mainco.subco.pd.domain.Link</class>
        <class>org.mainco.subco.pd.domain.LinkType</class>
        <class>org.mainco.subco.pd.domain.TrainingSession</class>
        <class>org.mainco.subco.pd.domain.TrainingSessionTrainer</class>
        <class>org.mainco.subco.pd.domain.TrainingSessionMaterial</class>
        <class>org.mainco.subco.pd.domain.TrainingSessionTeacher</class>
        <class>org.mainco.subco.pd.domain.SBTrainer</class>
        <properties>
            <property name="hibernate.ejb.cfgfile" value="/hibernate.cfg.xml" />
            <property name="jboss.entity.manager.factory.jndi.name"
                value="java:jboss/subco/myprojectpersistence" />
        </properties>
    </persistence-unit>
</persistence> 
```

以下是我在 Spring 应用程序上下文中设置数据源/实体管理器的方式：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:jee="http://www.springframework.org/schema/jee"
    xmlns:tx="http://www.springframework.org/schema/tx"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
           http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
           http://www.springframework.org/schema/tx
           http://www.springframework.org/schema/tx/spring-tx.xsd
           http://www.springframework.org/schema/jee 
           http://www.springframework.org/schema/jee/spring-jee.xsd">

    <!-- JNDI name for EntityManagerFactory is defined in src/main/resources/META-INF/persistence.xml -->
    <jee:jndi-lookup jndi-name="java:jboss/subco/myprojectpersistence"
        id="entityManagerFactory" expected-type="javax.persistence.EntityManagerFactory" />

    <bean id="entityManager" class="org.springframework.orm.jpa.support.SharedEntityManagerBean">
        <property name="entityManagerFactory" ref="entityManagerFactory" />
    </bean>

    <!-- Application properties -->
    <bean id="propertyConfigurer"
        class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
        <property name="locations">
            <list>
                <value>classpath:application.properties</value>
            </list>
        </property>
        <property name="ignoreUnresolvablePlaceholders" value="true" />
    </bean>

    <jee:jndi-lookup jndi-name="java:jboss/datasources/MySqlDS" id="dataSource" expected-type="javax.sql.DataSource"/>

    <tx:jta-transaction-manager />

</beans> 
```

我的 $JBOSS_HOME/standalone/configuration/standalone.xml 文件中的数据源元素如下所示……</p>

```
 <datasources>
            <datasource jndi-name="java:jboss/datasources/MySqlDS" pool-name="MySqlDS" enabled="true" use-java-context="true">
                <connection-url>jdbc:mysql://localhost:3306/mydb</connection-url>
                <driver>mysql</driver>
                <transaction-isolation>TRANSACTION_READ_COMMITTED</transaction-isolation>
                <pool>
                    <min-pool-size>10</min-pool-size>
                    <max-pool-size>100</max-pool-size>
                    <prefill>true</prefill>
                </pool>
                <security>
                    <user-name>username</user-name>
                    <password>password</password>
                </security>
                <statement>
                    <prepared-statement-cache-size>32</prepared-statement-cache-size>
                    <share-prepared-statements>true</share-prepared-statements>
                </statement>
            </datasource>
            <drivers>
                <driver name="mysql" module="com.mysql"/>
            </drivers>
        </datasources> 
```

任何想法我如何攻击这个？

**编辑：** 添加我标记为@Transactional 的方法...

```
@Service("trainingSessionService")
@Transactional
public class TrainingSessionServiceImpl implements TrainingSessionService
{
    …
    public TrainingSession createOrUpdateTrainingSessionFromOrder(final Order order)
    {
        TrainingSession trSession = m_trainingSessionDao.findByOrderNumber(order.getId());

        LOG.info("Creating/updating training session associated with order #" + order.getId() + " associated with account " + (order.getAccount() != null ? order.getAccount().getAccountName() : "unknown"));;
        if (trSession == null)
        {
            trSession = new TrainingSession();
        } // if
        // Update training session fields from the order from which it
        // originated.
        trSession.setDescription("");
        trSession.setOrderNum(order.getId());
        final Set<Organization> implementingSchools = getImplementingSchools(order);
        trSession.setImplementingSchools(implementingSchools);
        final java.util.Date startDate = order.getDay1() != null ? order.getDay1() : Calendar.getInstance().getTime();
        trSession.setStartDate(startDate);
        trSession.setEndDate(order.getLastDay());
        trSession.setSubject(order.getInstituteSubject());
        trSession.setStatus(order.getStatus());
        addImplementationManager(trSession, order);
        m_trainingSessionDao.save(trSession);
        LOG.info("Finished saving training session with order id " + order.getId());
        // Adds SB coordinator and teacher links if they didn't already
        // exist before.
        addUserLinks(trSession);
        return trSession;
    }   // createOrUpdateTrainingSessionFromOrder 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-08T20:26:02.890

K，找到了答案。我使用的方法是在其中调用一个服务方法，该方法引发了异常。似乎异常是取消事务，因此当方法返回时，报告了我提到的错误。

# sql - 在 SQL 中使用多个内连接

> ID：14764844
> 
> 赞同：11
> 
> 时间：2013-02-08T02:38:40.260
> 
> 标签：sql

运行以下查询时，我收到一条错误消息

> “查询表达式中的语法错误（缺少运算符）'diagnosis.Patient_No = 'Patient_No INNER JOIN Illness ON Illness.Illness_Code = Diagnosis.Illness_Code'

```
SELECT Patient.Last_Name AS LastName,
       Patient.First_Name AS FirstName,
       Patient.Gender AS Gender,
       Patient.Age AS Age,
       Illness.Illness_Desc AS illness,
       Medication.Medication_Desc AS Medication,
       Prescription.Dosage AS Dosage
FROM Patient
INNER JOIN Diagnosis ON Patient.Patient_No = Diagnosis.Patient_No
INNER JOIN Illness ON Diagnosis.Illness_Code = Illness.Illness_Code
INNER JOIN Prescription ON Patient.Patient_No = Prescription.Patient_No
INNER JOIN Medication ON Prescription.Medication_code = Medication.Medication_code 
```

我确认 disease_code 都在 Illness 和 Diagnosis 表中，并且一切正常？不确定在此加入期间是否需要将这些疾病代码添加到 select 语句中？我尝试将它们添加到我的 Select 中，但这似乎对我也不起作用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-08T02:45:40.957

```
Medication.Medication_Desc AS Medication,
Prescription.Dosage AS Dosage 
```

看起来您的 FROM 语句中没有加入药物和处方表。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-08T02:41:00.237

您没有为第一个联接中的第二个 Patient_No 列指定表。它应该是

```
INNER JOIN Diagnosis ON Diagnosis.Patient_No = Patient.Patient_No 
```

您还从两个未加入的表中选择列 - 药物和处方。但是，这应该会给您一个不同的错误“无法绑定多部分标识符'Medication.Medication_Desc'。”

您遇到的具体错误听起来像我提到的第一个问题。这是一个有效的 SQL 过滤器，省略了药物/处方表。

[SQL小提琴](http://sqlfiddle.com/#!6/f77a8/1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T02:47:39.270

还`INNER JOINS`为其他两个表添加，

```
INNER JOIN Medication ON Medication.<> = Patient.<>

INNER JOIN Prescription ON Prescription.<> = Patient.<> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T14:30:02.547

你不能仍然得到同样的错误......现在发生了什么？试试下面

```
 Select p.Last_Name LastName,
   p.First_Name FirstName,
   p.Gender Gender, p.Age Age,
   i.Illness_Desc illness,
   m.Medication_Desc Medication,
   s.Dosage Dosage
From Patient p
    Join Diagnosis d    On d.Patient_No = p.Patient_No
    Join Illness i      On i.Illness_Code = d.Illness_Code
    Join Prescription s On s.Patient_No = p.Patient_No
    Join Medication m   On m.Medication_code = p.Medication_code 
```

# javascript - 如何解决这个 MongoDB/Node 异步问题？

> ID：14764857
> 
> 赞同：6
> 
> 时间：2013-02-08T02:40:07.000
> 
> 标签：javascript, node.js, mongodb, asynchronous

我有以下代码：

```
// Retrieve
var MongoClient = require("mongodb").MongoClient;
var accounts = null;
var characters = null;

// Connect to the db
MongoClient.connect("mongodb://localhost:27017/bq", function(err, db) {
   if(err) { return console.dir(err); }

    db.createCollection('accounts', function(err, collection) {
        if(err) { return console.dir(err); }
        else { accounts = collection; }

        createAccount("bob","bob");
        createAccount("bob","bob");
        createAccount("bob","bob");
        createAccount("bob","bob");
    });
});

function createAccount(email, password)
{
    accounts.findOne({"email":email}, function(err, item) {
        if(err) { console.dir(err); }
        else {
            if(item === null) {
                accounts.insert({"email":email, "password":password}, function(err, result) {
                    if(err) { console.dir(err); }
                    else { console.dir("Account " + email + " created."); }
                });
            }
            else {
                console.dir("Account already exists.")
            }

        }
    });
} 
```

当我第一次运行脚本时，我最终得到了 bob 的 4 个帐户。当我第二次运行它时，我收到 4 条帐户已经存在的消息。

我很确定我知道为什么会这样，我想出的解决方案是使用某种队列来处理数据库的每次读/写。我想知道的是，这是否是正确的方法，一般的最佳实践是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-08T22:42:30.697

一些语言提供了一种特殊的语言结构来处理这个问题。例如，C# 有`async`/`await`关键字，让您可以像调用同步 API 一样编写代码。

JavaScript 没有，您必须将`createAccount`调用与回调链接起来。

有些人开发了可以帮助您组织此代码的库。例如[async](https://github.com/caolan/async.git)、[step](https://github.com/creationix/step)、[node-promise](https://github.com/kriszyp/node-promise)和[Q](https://github.com/kriskowal/q)

您还可以使用[纤](https://github.com/laverdet/node-fibers)程库，这是一个使用纤程/协程扩展 JavaScript 运行时的本机库。

有些人用类似于`async`/的结构扩展了语言`await`：[streamline.js](https://github.com/Sage/streamlinejs)、[IcedCoffeeScript](http://maxtaco.github.com/coffee-script/)或[wind.js。](https://github.com/JeffreyZhao/wind)例如，streamline.js（我是作者，所以我显然有偏见）`_`用作特殊的回调占位符，并让您将示例编写为：

```
var db = MongoClient.connect("mongodb://localhost:27017/bq", _):
var accounts = db.createCollection('accounts', _);
createAccount("bob","bob", _);
createAccount("bob","bob", _);
createAccount("bob","bob", _);
createAccount("bob","bob", _);

function createAccount(email, password, _) {
    var item = accounts.findOne({"email":email}, _);
    if (item === null) {
        accounts.insert({"email":email, "password":password}, _);
        console.log("Account " + email + " created."); }
    } else {
        console.log("Account already exists.")
    }
} 
```

And, last but not least, new language features such as [generators](http://wiki.ecmascript.org/doku.php?id=harmony%3agenerators) and [deferred functions](http://wiki.ecmascript.org/doku.php?id=strawman%3adeferred_functions) are being discussed for future versions of JavaScript (generators are very likely to land in ES6, deferred functions seem to be a bit stalled).

So you have many options:

*   stick to callbacks
*   use a helper library
*   use the fibers runtime extension
*   use a language extension
*   wait for ES6

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T05:39:46.597

在电子邮件上添加唯一约束，您将不必再检查用户是否存在！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-08T02:56:58.443

JavaScript 是异步的。`accounts.findOne`立即返回，所以基本上你所有的 4 条语句都会一起执行。

什么`accounts.findOne`是，它说找到一个`{"email":email}`，当你找到它时，运行第二个参数中的函数。然后它返回函数并继续下一个 CreateAccount 语句。同时，当从硬盘返回结果时（这比执行这些语句花费的时间要长得多），它进入函数，并且由于没有用户，所以它添加了一个。说得通？

**更新**这是在 JavaScript 中执行此操作的正确方法。

```
MongoClient.connect("mongodb://localhost:27017/bq", function(err, db) {
   if(err) { return console.dir(err); }

    db.createCollection('accounts', function(err, collection) {
        if(err) { return console.dir(err); }
        else { accounts = collection; }

        createAccount("bob","bob", function() {
            createAccount("bob","bob", function() {
                createAccount("bob","bob", function() {
                    createAccount("bob","bob", function() {
                     });
                });
            });
        });
    });
});

function createAccount(email, password, fn)
{
    accounts.findOne({"email":email}, function(err, item) {
        if(err) { console.dir(err); }
        else {
            if(item === null) {
                accounts.insert({"email":email, "password":password}, function(err, result) {
                    if(err) { console.dir(err); }
                    else { console.dir("Account " + email + " created."); }
                    fn();
                });
            }
            else {
                console.dir("Account already exists.")
                fn();
            }

        }
    });
} 
```

# jquery - jQuery：绑定到列表项与列表本身的问题

> ID：14764867
> 
> 赞同：0
> 
> 时间：2013-02-08T02:41:21.287
> 
> 标签：jquery

我有一个无序列表。当用户点击一个项目时，它会调用一个函数。我使用该`$(document).ready()`事件将函数绑定到列表项。

`$('#list').html()`我遇到的问题是使用该方法（使用AJAX）不时替换列表的内容。这意味着每个项目上的绑定都丢失了。

我尝试将函数绑定到列表（而不是项目）。这工作正常，除了`this`然后是对列表的引用，而不是单击的项目，我`this`在我的函数中使用。

我看到的选项是：

1.  重新加载列表的内容后，将函数重新绑定到每个项目。在我看来，浏览器需要做很多工作。
2.  将函数绑定到列表（而不是列表项），并确定如何从那里引用单击的列表项。

你会用哪个？如何？有没有更好的办法？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T02:43:24.060

您提到的第二点称为*事件委托*，在这里将是一个很好的解决方案。幸运的是，jQuery 让事件委托变得非常简单：

```
$('#myList').on('click', 'li', function(){
    // `this` refers to the clicked `li` element
}); 
```

jQuery 为您计算出引用，即在事件处理程序内部`this`将引用`li`被单击的元素（与第二个选择器匹配的元素。

[阅读有关使用 jQuery 进行直接和委托事件处理的更多信息。](http://api.jquery.com/on/#direct-and-delegated-events)

# python - 如何检测 X11 窗口的内容何时发生变化？

> ID：14764873
> 
> 赞同：2
> 
> 时间：2013-02-08T02:42:43.047
> 
> 标签：python, html, x11

我正在尝试编写一个 Xvfb-to-HTML5-canvas 工具，该工具需要知道 X11 窗口何时更改，以便向客户端发送屏幕更新。把它想象成一个基于 Web 的 VNC 或 RDP，但*仅*适用于 X11 窗口（为什么要发送整个桌面？=）。

我*认为*通过 Xlib 或 xcb (xpyb) 会有一种直接的方法来做到这一点，但在我的实验中，我能做的最好的事情就是检测窗口何时被创建、销毁或移动。这很好，但我还需要知道窗口的内容何时发生变化（想象一下向 xterm 发送击键并让它看起来冻结，直到您移动窗口）。

如果有人知道如何判断 X11 窗口的内容何时发生变化，我很想听听！我对创造性的解决方案持开放态度。例如，我尝试使用 ffmpeg 通过 fifo 流式传输 x11grab，并定期检查以查看是否有任何变化，但结果证明它在 CPU 利用率方面效率极低（即使没有发生任何事情，它似乎也会减慢整个系统的速度）。

我还尝试在循环中抓取 15fps 的屏幕截图，同时以最有效的方式检查更改（例如，此 cStringIO 缓冲区是否与最后一个缓冲区匹配？）。这也是 CPU 密集型的。

理想的解决方案是让我能够观察套接字的文件描述符并在 X11 窗口发生变化时调用处理程序。我愿意满足于检测整个 X11 屏幕何时发生变化……这仍然比我所拥有的要好。

对此的任何和所有帮助表示赞赏！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T00:10:24.220

First of all, you can actually use vnc to track changes in just one window, not whole desktop. From [x11vnc documentation](http://www.karlrunge.com/x11vnc/x11vnc_opts.html):

```
-id windowid           Show the X window corresponding to "windowid" not
                       the entire display.  New windows like popup menus,
                       transient toplevels, etc, may not be seen or may be
                       clipped.  Disabling SaveUnders or BackingStore in the
                       X server may help show them.  x11vnc may crash if the
                       window is initially partially obscured, changes size,
                       is iconified, etc.  Some steps are taken to avoid this
                       and the -xrandr mechanism is used to track resizes.  Use
                       xwininfo(1) to get the window id, or use "-id pick"
                       to have x11vnc run xwininfo(1) for you and extract
                       the id.  The -id option is useful for exporting very
                       simple applications (e.g. the current view on a webcam).
-sid windowid          As -id, but instead of using the window directly it
                       shifts a root view to it: this shows SaveUnders menus,
                       etc, although they will be clipped if they extend beyond
                       the window.

-appshare              Simple application sharing based on the -id/-sid
                       mechanism.  Every new toplevel window that the
                       application creates induces a new viewer window via
                       a reverse connection.  The -id/-sid and -connect
                       options are required.  Run 'x11vnc -appshare -help'
                       for more info. 
```

If you want to code similar functionality manually you need to use [damage extension](http://www.x.org/releases/X11R7.6/doc/damageproto/damageproto.txt).

Here is simple example in javascript using [node-x11](https://github.com/sidorares/node-x11) (sorry, I'm not sure about damage extension support in python)

```
var x11 = require('x11');

var X = x11.createClient(function(err, display) {
    X.require('damage', function(Damage) {
        var damage = X.AllocID();
        Damage.Create(damage, parseInt(process.argv[2]), Damage.ReportLevel.NonEmpty);
        X.on('event', function(ev) {
          Damage.Subtract(damage, 0, 0);
          console.log("window content changed!");
        });
    });
}); 
```

start it with window id as command line argument and you'll be notified whenever window content is changed.

# delphi - Delphi Chromium 3 - CefSingleProcess

> ID：14764878
> 
> 赞同：6
> 
> 时间：2013-02-08T02:43:30.837
> 
> 标签：delphi, chromium, tchromium

Delphi Chromium 3 有一个非常奇怪的问题：

运行 vanilla 演示应用程序 (GuiClient) 时，如果我单独尝试打开 Microsoft Excel 2010 文件（只需在资源管理器中双击文件），它所花费的*时间*比 Chrome 演示未打开时要长得多。操作系统是 Windows 7。

我已将此追溯到“CefSingleProcess := false”行。如果注释掉这一行，一切正常。我从 DCEF3 开发人员那里了解到 Chrome 可以“在多个进程中运行”，但我不确定这会如何影响文件系统。

即使这不是一个可解决的问题，我也很想知道这里发生了什么。:)

# php - php mysql insert 不工作 db connection is working

> ID：14764882
> 
> 赞同：1
> 
> 时间：2013-02-08T02:43:59.573
> 
> 标签：php, mysql, sql, insert

我有一个简单的插入页面，似乎没有任何错误，但没有出现在 db 中。我已经阅读了超过 30 篇关于此的差异帖子，但无法弄清楚出了什么问题。我知道 dbcon.php 的工作原理是显示页面拉出所有结果没问题。

```
<?php
ob_start();
include('dbcon.php');

if (isset($_POST['submit'])){

$Ph1=preg_replace('/[^0-9]/', '', $_POST["ph1"]);
$Ph2=preg_replace('/[^0-9]/', '', $_POST["ph2"]);
$Name=mysql_real_escape_string($_POST['name']);
$Email=mysql_real_escape_string($_POST['email']);
$Group=$_POST['group'];

mysql_query("insert into reps (ph1,ph2,name,email,group)
        values("$Ph1","$Ph2","$Name","$Email","$Group")");
        header('location:index.php');
}
ob_flush();
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T02:45:36.760

`GROUP`是一个保留的关键字。它必须用反引号括起来，

```
insert into reps (ph1,ph2,name,email,`group`) 
```

*   [MySQL 保留关键字列表](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)

另一个问题是在值周围使用双引号。

```
mysql_query("INSERT INTO reps (ph1,ph2,name,email,`group`) VALUES ('$Ph1','$Ph2','$Name','$Email','$Group')"); 
```

作为旁注，[`SQL Injection`](http://bobby-tables.com/)如果变量的值（*s*）来自外部，则查询很容易受到攻击。请看下面的文章，了解如何预防。通过使用`PreparedStatements`，您可以摆脱在值周围使用单引号。

*   [如何*防止*PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

# mysql - 存储过程中执行（'select * from tablename'）的用途，MS SQL

> ID：14764883
> 
> 赞同：1
> 
> 时间：2013-02-08T02:44:00.210
> 
> 标签：mysql, sql, sql-server, stored-procedures

我想弄清楚是什么意思

```
execute('SELECT customerID [CustomerID],customerCode[Customer Code],
firstName +char(32)+ surname AS [Name],street [Street],phone [Phone],*  
FROM tblCustomers  WHERE customerCode like '''+ @custCode +'%''') 
```

在存储过程中。我试图用谷歌搜索这么多，但无法找到，所以最后我来这里寻求帮助。因为，我正在将 SP 从 MS SQL 转换为 MySQL，我如何在 MySQL 中翻译它？Execute(' select * from tablename') 和 'select * from tablename' 之间有什么区别吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T02:53:22.360

```
SET @sql = CONCAT(' SELECT      *,
                            customerID,
                            customerCode `Customer Code`,
                            CONCAT(firstName, ' ', surname) AS `Name`,
                            street `Street`,
                            phone `Phone` 
                    FROM tblCustomers  
                    WHERE customerCode like ''', @custCode ,'%''');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

或参数化它，

```
SET @sql = '    SELECT      *,
                        customerID,
                        customerCode `Customer Code`,
                        CONCAT(firstName, ' ', surname) AS `Name`,
                        street `Street`,
                        phone `Phone` 
                FROM tblCustomers  
                WHERE customerCode LIKE CONCAT(?, ''%'')';

PREPARE stmt FROM @sql;
EXECUTE stmt USING @custCode;
DEALLOCATE PREPARE stmt; 
```

# django - 不幼稚的日期时间（tzinfo 已设置）

> ID：14764884
> 
> 赞同：2
> 
> 时间：2013-02-08T02:44:01.133
> 
> 标签：django, celery

我在我的 django 应用程序中使用 django celery，我遇到了这个错误：

```
ValueError: Not naive datetime (tzinfo is already set) in djcelery.utils in make_aware 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T02:54:15.480

我认为这是 django-celery 升级版本时的错误。但顺便说一下，把它放在你的 init.py 中，你的 settings.py 所在的位置。

```
# Patch the djcelery/snapshot cause it's broken
import datetime
from django.utils.timezone import is_aware
import djcelery.snapshot
orig_maybe_make_aware = djcelery.snapshot.maybe_make_aware
def new_maybe_make_aware(value):
    if isinstance(value, datetime.datetime) and is_aware(value):
        return value
    return orig_maybe_make_aware(value)
djcelery.snapshot.maybe_make_aware = new_maybe_make_aware 
```

# javascript - for 循环返回数组中一项的单个字母，而不是数组中的每个项

> ID：14764888
> 
> 赞同：1
> 
> 时间：2013-02-08T02:44:16.753
> 
> 标签：javascript, jquery, loops

我必须制作我制作的数组。一个抓取一些锚标签，另一个抓取一组 ul。锚标记都有一个名称属性，并且 ul 具有与锚标记名称属性匹配的 id。除此之外，所有 ul 都有“.students”和“.hidden”类。（所有 .hidden 所做的就是设置显示：无）

```
<div>
  <ul>
      <li><h4><a name="5th-grade">5th Grade</a></h4></li>
      <li><h4><a name="6th-grade">6th Grade</a></h4></li>
      <li><h4><a name="7th-grade">7th Grade</a></h4></li>
      <li><h4><a name="8th-grade">8th Grade</a></h4></li>
  </ul>
</div>
<div>
  <ul id="5th-grade" class="students hidden ">
      <li>Billy Bob</li>
  </ul>

  <ul id="6th-grade" class="students hidden">
      <li>Bob Sackamano</li>
  </ul>

  <ul id="7th-grade" class="students hidden">
      <li>Matt Blunt</li>
  </ul>
</div> 
```

我想要做的是拥有它，所以当我点击其中一个锚标签时，它会将其对应的名称属性与具有相同 id 的 ul 匹配，通过删除“.hidden”类使其出现，然后隐藏通过添加“.hidden”类不匹配的任何其他 ul。

到目前为止，这是我使用一个小 jquery 提出的内容以及我停止的地方：

```
 var aGradelist = $('#grade-list ul li a');
    var aStudents = $('.students');

    aGradelist.click(function(){
        var i = '#' + $(this).attr('name');

        $('.students'+i).removeClass('hidden');

        for(var j=0;j<aStudents.length;j++)
        {
           console.log(aStudents.attr('id')[j]);
        }

}); 
```

让正确的 ul 出现没有问题，但我无法将“.hidden”类添加到其他 ul 中。我安慰它发现至少我的一个问题是在for循环中，我不是通过aStudents数组中的每个ul，而是通过aStudents数组中第一项的id的字母。

我是否以正确的方式接近这个？你对如何做到这一点有一些想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T02:49:16.327

如果您的 html 是有效的（没有重复的 ID），这应该可以解决问题。

```
var aGradelist = $('#grade-list ul li a');
var aStudents = $('.students');
aGradelist.click(function() {
    aStudents.addClass('hidden');
    $('#' + $(this).attr('name')).removeClass('hidden');
}); 
```

当您在其上调用方法时，jQuery 会开箱即用地迭代 DOM 元素。

此外，如果您想知道初始循环出了什么问题，您应该`[j]`在检索`id`字符串属性之前使用。所以要`id`正确检索属性：

```
for(var j=0;j<aStudents.length;j++) {
   console.log(aStudents[j].id);
} 
```

`$()[j]`是`$().get(j)`( [`jQuery.fn.get`docs](http://api.jquery.com/get/) ) 的简写。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T02:48:04.667

试试这个：

```
var aGradelist = $('#grade-list ul li a');
var aStudents = $('.students');

aGradelist.click(function(){
    var i = '#' + $(this).attr('name');
    aStudents.addClass('hidden');
    $('ul' + i).removeClass('hidden');
} 
```

这样做是将`hidden`类添加到所有`ul`s 中，然后仅从具有被单击`ul`的 id 的类中删除它`anchor`

# php - PHP：一劳永逸地制作“连接到数据库”脚本

> ID：14764889
> 
> 赞同：0
> 
> 时间：2013-02-08T02:44:23.113
> 
> 标签：php, pdo

我有如下所示的 PHP 脚本：-

main.php 文件：

```
<?php 
include'../scripts/pdoMysqlPhpScript1.php'; 
?> 
```

pdoMysqlPhpScript1.php 文件：

```
<?php
     include 'login.php';
     $dbh-> query('use testdata1970_10');
     foreach($dbh->query('call getallusers();') as $row)
?> 
```

login.php 文件：

```
<?php// PDO is used
$dsn = 'mysql:host=localhost; Port=3306';
$user = 'root';
$pswd = '';
$dbh = new PDO($dsn, $user, $pswd,
    array(PDO::ATTR_PERSISTENT, TRUE));
    $dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
$dbh->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);
?> 
```

这是工作。

但是，如果我在 main.php 中包含 login.php 并从 pdoMysqlPhpScript1.php 中删除 login.php。它不起作用。

为什么会这样，我如何确保 login.php 被使用一次，这样我就不需要对来自许多不同 php 文件或存储过程的每个服务再次使用它，直到它在脚本结束时关闭？

例如：-

main.php 文件：

```
<?php

     include 'login.php'; //scripts inside:- $dbh = new PDO($dsn, $user, $pswd,....);
     include 'fileA.php'; //scripts inside:- $dbh = query('use storedprocedure');
     include 'fileB.php'; //scripts inside:- $dbh -> query ('select x from xtable'); 
     include 'fileC.php'; //scripts inside:- $stmt = $dbh->prepare('select name, value from test where name=:what');   
     include 'fileD.php'; //scripts inside:- $dbh = query('select testtable()');
     include 'fileE.php'; //scripts inside:- $stmt = $dbh->prepare('select name, value from test'); 
?> 
```

请告知谢谢
克莱门特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T03:13:16.523

> 如何确保 login.php 被使用一次，以便在脚本结束时将其关闭之前，我不需要对来自许多不同 php 文件或存储过程的每个服务再次使用它？

就像你现在做的那样做 - 将它包含在你的主脚本的最顶部。
仅确保您`$dbh`在全局范围内寻址变量。否则（即在函数内），您必须使用`global $dbh;`

# java - 使用 response.sendError() 时，防止 WebSphere 在响应前添加“错误 40X：”

> ID：14764892
> 
> 赞同：1
> 
> 时间：2013-02-08T02:44:40.253
> 
> 标签：java, servlets, websphere, websphere-7

在我们定义的一些 RESTful Web 服务的 HTTP 请求处理代码中，除了设置状态代码之外，我们还在响应正文中发送错误信息。例如：

```
response.sendError(403, "The error was X."); 
```

当使用 Apache Tomcat 作为我们的应用程序容器时，响应正文只包含：

```
The error was X. 
```

但是，当使用 IBM WebSphere 7 时，响应正文如下：

```
Error 403: The error was X. 
```

有没有办法阻止 WebSphere 将 HTTP 状态添加到响应正文中？如果不是，如何发送 JSON 响应？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T03:34:21.640

根据需要为错误代码和格式指定客户错误页面

```
<error-page>
   <error-code>403</error-code>
   <location>/403.jsp</location>
</error-page> 
```

# sql - PostgreSQL 仅在添加附加 AND 子句时返回结果

> ID：14764894
> 
> 赞同：3
> 
> 时间：2013-02-08T02:44:54.567
> 
> 标签：sql, postgresql, postgis

我有一个这样的查询：

```
SELECT boroughs.name 
FROM boroughs, uniroads 
WHERE uniroads.normalizedName='6 AVENUE' 
AND st_intersects(boroughs.geometry, uniroads.way) 
AND boroughs.name='Brooklyn'

0 results 
```

但是当我运行它时，它没有返回任何结果。但是，我能够在表中找到我希望它返回的特定行，并且当我添加一个要求该特定行的子句时，它可以正常工作：

```
SELECT boroughs.name 
FROM boroughs, uniroads 
WHERE uniroads.normalizedName='6 AVENUE' 
AND st_intersects(boroughs.geometry, uniroads.way) 
AND boroughs.name='Brooklyn' 
AND uniroads.osm_id='23334071'

1 result 
```

我通过 Postgres.app 将 Postgres 9.2.2.0 与 PostGIS 一起使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T14:56:44.500

一个推测。

`uniroads.osm_id`看起来像一个 Key，因此它最有可能被索引。

`AND uniroads.osm_id='23334071'`子句导致（另一个，也许？）索引被使用，因此这可能意味着（一些？）最初使用的索引已损坏。

也许以下可能会有所帮助？

```
REINDEX TABLE boroughs;
REINDEX TABLE uniroads; 
```

在任何情况下，`EXPLAIN ANALYZE`都需要查询以及所涉及的表的*完整*定义。

# sencha-architect - 如何在 Sencha Architect 中加载 KitchenSink？

> ID：14764897
> 
> 赞同：2
> 
> 时间：2013-02-08T02:45:16.927
> 
> 标签：sencha-architect

Sencha Architect 允许您轻松导入项目。但是，该程序要求将项目存档为 .xds 或 .xda。我该如何为 KitchenSink、Kiva 等默认项目执行此操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T16:41:10.750

Kitchen Sink 和 Kiva 只是普通的 Sencha Touch 项目。如果它们不是用 Sencha Architect 开发的（后来打包在 .xds 或 .xda 文件中），则无法在 Sencha Architect 中打开它们，因为它不知道如何将纯 Sencha Touch 代码“解释”到 Sencha Architect 组件中和配置。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T20:39:36.917

Thiem 是正确的，众所周知的厨房水槽演示不是建筑师项目，因此无法导入。然而，Ext.js 和 Touch 都有几个演示项目。[您可以在Github](https://github.com/SenchaArchitect)上的 Sencha Architect 存储库中获取它们。有关示例项目的更多信息，请参阅[Sencha Architect](https://docs.sencha.com/architect/3/tutorials/example_projects.html)文档。

我希望这有帮助。

# javascript - 按下键时不要阻止默认值

> ID：14764898
> 
> 赞同：0
> 
> 时间：2013-02-08T02:45:25.450
> 
> 标签：javascript, events, dom

我正在使用`window.history`和拦截链接点击：

```
document.querySelector('a[data-history]').addEventListener('click', function (e) {
  e.preventDefault()
  // window.history stuff
}) 
```

现在的问题是，如果我想在新选项卡中打开链接，它不起作用。也就是说，Javascript 禁止在新选项卡中打开链接，并且只执行相同的`window.history`代码。具体来说，这是当您在 Mac 上按住 COMMAND + CLICK 时。按下键时不阻止默认的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T01:39:26.490

使用`event.ctrlKey`, `shiftKey`, `altKey`,`metaKey`

# php - PHP 日期时间转换

> ID：14764906
> 
> 赞同：0
> 
> 时间：2013-02-08T02:47:01.760
> 
> 标签：php, datetime

我目前已将*DateTime*存储在数据库中，如下所示`20130208110000`，因此我需要将其分为两部分，即这种格式的日期和这种格式`08/02/2013`的时间`11:00 AM`，哪个功能有效？

这是我用来将日期和时间连接在一起的功能

```
$startMonth = $this->_getParam('starts_month_day_year');
$startTime = $this->_getParam('starts_time');
date("YmdHis",strtotime($startMonth.$startTime)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T02:51:45.213

仅使用您已经在做的事情会有什么问题？

```
$myDate = "20130208110000";
date("d/m/Y", strtotime($myDate)); // Date, e.g. 08/02/2013
date("h:i A", strtotime($myDate)); // Time, e.g. 11:00 AM 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T02:54:13.790

```
<?php
      $originalDate = "20130208110000";
      $newDate = date("d-m-Y g:i A", strtotime($originalDate));
      echo $newDate;  //08-02-2013 11:00 AM
?> 
```

在哪里，

> **g** : 12 小时格式，不带前导零 [0 到 12]
> 
> **i**：带前导零的分钟 [00 到 59]
> 
> **A** :大写的 Ante meridiem 和 Post meridiem [AM 或 PM]

# html - Chrome - 同时 onclick 和 href

> ID：14764909
> 
> 赞同：1
> 
> 时间：2013-02-08T02:47:24.450
> 
> 标签：html, google-chrome, onclick, href

这在 IE 和 Firefox 中运行良好。我只是无法让它在 CHROME 中正常工作。

单击链接时我想要发生什么，启动本地邮件客户端，然后将页面更改为 google。

在 chrome 中，如果我使用下面的标签，它将启动本地邮件客户端，但不会将页面更改为 Google。

```
<a href="mailto:?subject=hi" OnClick="window.location.href='http://www.google.com/'">Launch outlook and google</a> 
```

如果我在末尾添加“return false”，如下所示，它会将页面更改为 google，但不会启动本地邮件客户端。

```
 <a href="mailto:?subject=hi" OnClick="window.location.href='http://www.google.com/';return false;">Launch outlook and google</a> 
```

我如何让它像在 IE 和 Firefox 中一样在 CHROME 中工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T03:17:54.863

`javascript:`没有意义`onclick`并且在语法上是不正确的。您实际上应该使用 JavaScript 将事件与 JavaScript 绑定`addEventListener`，但如果您必须使用 onclick，只需

```
window.location.href = 'http://www.google.com/' 
```

应该够了。另外，为什么`return false`？这将停止默认事件，即打开邮件客户端，对吗？

# c# - MySQL 错误 2003：无法连接到“localhost”上的 MySQL 服务器

> ID：14764914
> 
> 赞同：2
> 
> 时间：2013-02-08T02:47:42.543
> 
> 标签：c#, mysql

我的任务是运行一个依赖于 MySQL 数据库的程序，特别是 3.23.42 版本。我必须安装 MySQL，运行一个读取 SQL 文件的 .batch 文件（以创建所需的表等），然后运行该程序。看起来很简单。

我已经安装了 MySQL。我期待它询问用户名和密码等，就像我安装 SQL Server 和 MySQL 版本 5（及更高版本）的经验一样，但它不需要我。但是，尝试运行 .batch 文件会产生错误：

“MySQL 错误 2003：无法连接到 'localhost' 上的 MySQL 服务器”

所以我以管理员身份运行命令提示符，进入 MySQL 目录，然后运行“mysql”。它给了我与上面相同的错误。

运行命令“mysqld-nt”或“mysqld”没有做任何事情，所以我假设这里还有另一个问题。我也没有在正在运行的服务或进程中找到任何“mysql”。

此时，程序是否运行并不重要。我需要首先启动并运行数据库。

虽然我以前用过 MySQL，但我不能说我有那么多经验，而且它一直都在运行；这是我第一次自己部署它。

值得注意的是：我还没有尝试重新安装该程序，尽管我不确定它是否能解决任何问题。我已经安装了 MyODBC-3.15.05，如果它意味着什么（部分说明）。我正在使用 32 位的 Windows 7（我听说 MySQL 不喜欢与 Windows 7 配合使用）。我将此设置用作服务器和客户端；如果整个过程成功，我将在另一台计算机上做同样的事情。没有计算机实际上将另一台计算机用作服务器。我不完全知道要在服务列表中查找哪些服务。

我能做些什么来解决这个问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T04:33:09.933

MySQL 安装程序的早期版本根本没有设置 Windows 服务。您可能必须手动完成。

[http://dev.mysql.com/doc/refman/5.1/en/windows-start-service.html](http://dev.mysql.com/doc/refman/5.1/en/windows-start-service.html)

安装服务后，您应该能够输入以下命令来启动服务。

```
net start mysql 
```

然后您只需要打开一个命令窗口并键入以下内容即可进入 MySQL 命令行，您可以在其中开始编写自己的查询。

```
mysql -uroot 
```

我不太喜欢 Microsoft SQL Server 的 SQL 风格，但我认为如果你习惯使用它，那么你可能会发现很难“进入”MySQL。

这是一个简单的教程，概述了 MySQL 和创建查询。 [http://www.bigsoft.co.uk/blog/index.php/2012/10/04/sql-for-beginners](http://www.bigsoft.co.uk/blog/index.php/2012/10/04/sql-for-beginners)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T07:25:12.037

1.  在任务管理器中检查 mysql 服务器是否已启动。
2.  检查是否可以连接到服务器，运行`telnet <hostname> <portnumber>`，例如：

    > 远程登录本地主机 3306

3.  如果无法连接，请尝试查找服务器属性（检查端口号），同时检查您的防火墙。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T02:53:04.057

查找文件[my.ini](https://stackoverflow.com/questions/1712646/i-can-not-find-my-cnfmysql-configuration-file-on-my-computer)并添加`bind-address = 0.0.0.0`该`[mysqld]`节。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T09:37:26.403

好吧，我一开始并不完全知道是什么导致了这个问题，但我能够找到解决它的方法。一个有用的，如果旧的 - 在这种情况下是完美的 - 我在网上找到的教程，希望可以帮助其他人解决同样的问题。

教程：安装 MySQL 4.0 - Windows，由 Thomas E. Hicks 博士计算机科学系三一大学

[链接在这里](http://www.cs.trinity.edu/~thicks/Tutorials/MySQL-Install-4.0/MySQL-Install-4.0.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-22T01:41:53.337

打开 MySQL 安装程序并单击“MySQL 服务器”旁边的“重新配置”

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-11-10T17:26:09.377

我不确定服务应用程序是否在其他 Windows 上，但如果您使用 Windows 7，那么您很幸运。最简单的方法是打开开始面板，在搜索框中输入服务并回车。现在向下滚动直到找到mysql服务。在最新版本中，它被命名为MySQL57。右键单击它，然后单击开始。现在你可以使用 MySQL 了。但是，每次 Windows 启动时，您都必须执行此步骤。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2017-04-07T05:46:00.680

如果它显示错误 2003 (HY000): Can't connect to MySQL server on localhost (10061) than 1.search services.msc in run 2.goto mysql properties 3.copy the mysql service name 4.start cmd as administrator 5 .write: net start mysqlservicename .ie mysql57 or etc 它会显示 mysql 正在启动。

# php - 使用 php 重载 _call 时出现错误消息

> ID：14764919
> 
> 赞同：0
> 
> 时间：2013-02-08T02:48:44.173
> 
> 标签：php

我收到错误消息“致命错误：在第 41 行调用未定义的方法 CleverString::strlen()”

`echo "<p>The length of the string is: " . $myString->strlen() . "</p>";`

我已经多次查看我的代码，但无法指出导致错误的原因。

这是完整的代码：

```
 <?php 

            class CleverString {

                private $_theString = "";
                private static $_allowedFunctions = array( "strlen", "strtoupper", "strpos" );

                public function setString ( $stringVal ){
                    $this->_theString = $stringVal;
                }

                public function getString(){
                    return $this->_theString;
                }

                public function _call( $methodName, $arguments ){
                    if ( in_array( $methodName, CleverString::$_allowedFunctions ) ){
                        array_unshift( $arguments, $this->_theString );
                        return call_user_func_array( $methodName, $arguments );
                    } else {
                        die ( "<p>Method 'CleverString::$methodName' doesn't exist</p>" );
                    }
                }
            }

            $myString = new CleverString;
            $myString->setString( "Hello!" );
            echo "<p>The string is: " . $myString->getString() . "</p>";
            echo "<p>The length of the string is: " . $myString->strlen() . "</p>";
            echo "<p>The string in uppercase letter is: " . $myString->strtoupper() . "</p>";
            echo "<p>The letter 'e' occurs at position: " . $myString->strpos( "e" ) . "</p>";
            $myString->madeUpMethod();

                ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T02:52:52.013

`__call`有两个下划线，没有一个。

[http://www.php.net/manual/en/language.oop5.overloading.php#object.call](http://www.php.net/manual/en/language.oop5.overloading.php#object.call)

其他使用双下划线的“魔术”方法包括`__set`、`__get`、`__isset`和.`__unset``__callStatic`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T02:51:24.200

`_call`? 你的意思是`__call`？适当地更改您的函数名称，它应该可以工作。

另外，请查看[https://github.com/jsebrech/php-o](https://github.com/jsebrech/php-o)，它有巧妙的字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T02:52:41.950

再次查看代码后注意到公共函数 _call( $methodName, $arguments ) 没有双倍得分 __call( $methodName, $arguments )

对不起

# php - .post 的 Json_encode？

> ID：14764920
> 
> 赞同：1
> 
> 时间：2013-02-08T02:48:45.763
> 
> 标签：php, javascript, jquery, ajax, json

任何人都可以在进行 .post 查询时解释 json_encode 的目的。

这是我在其他人的编码中经常看到的。

.post php 脚本

```
 ...
    ...

    echo json_encode($a); 
```

我的意思是，如果我想从 .post 脚本返回并通过 .post 返回一个数组。我不需要做以下事情吗？

.post php 脚本

```
 ...
    ...
    $a = array("foo", "bar", "hallo", "world");
    $string=implode(',',$a) in my php script        

    return $string; 
```

javascript

```
 $.post('$url',function(data){
        data_arr=data.split(',');
        //After which just get the values in the array
        alert(data_arr[0]); //ALERTS 'foo'
        alert(data_arr[1]); //ALERTS 'bar'
    }); 
```

如果有人可以帮我解决这个问题并让我看到在此目的中使用 json 的光明，那就太好了。

也许这也是由于我对 JSON 的不了解。

如果有人能告诉我为什么在这种情况下使用 JSON 编码更好，以及我想如何通过 .post 请求使用它而不是仅仅回显字符串并稍后拆分它，我将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T02:59:22.420

使用`json_encode`可确保您的数据始终有效。

您可以控制的简单数据并不重要，但想象一下，如果有一天您在其中一个值中有一个逗号。使用 JSON 编码的字符串，您不必担心任意分隔符标记。

此外，使用 JSON，您可以轻松地对对象/数组进行编码，而无需重新发明轮子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T03:24:27.300

首先，在我看来和实践中，JSON 语法与 Javascript 对象非常相似，并且在处理必须在以后发送/请求和解析的更复杂的数据类型时非常有用。

例如：如果您正在执行一个发布请求并且您正在序列化您验证服务器端的所有表单字段（使用 PHP），那么您很可能需要`key => value`使用`textbox_name => value`. 这样做比通过数字索引选择值更合乎逻辑（如果表单布局发生变化怎么办？）

**使用逗号的示例代码：**

```
<?php
$array = array('Tom', 'Hanks', 'Football');
$string = join(',',$array);
echo $string; //it's obvious - the output is Tom,Hanks,Football
?> 
```

接收字符串的 javascript

```
$.post(url,{},function(data){
   var values = data.split(',')
   $("#name").text(values[0]);
   $("#surname").text(values[1]);
   $("#interests").text(values[2]);
}); 
```

所以有道理吗？**但是这样做不是更有意义吗：**

```
<?php
header('Content-type: application/json');
$array = array('name' => 'Tom', 'surname' => 'Hanks', 'interests' => 'Football');
echo json_encode($array);
?> 
```

和javascript：

```
$.post(url,{},function(data){
   for(index in data) {
      $("#"+index).text(data[index]);
   }
   //or
   $("#name").text(data.name);
   $("#surname").text(data.surname);
   $("#interests").text(data.interests);
}); 
```

使用 Javascript 解析响应数据也是如此。拥有一个对象比拥有一个 CSV 字符串更符合逻辑。

显然，这**取决于用例**，但一般来说，JSON 为您提供了字符串化对象/数组的逻辑结构，可以将其转换回对象和数组，并以任何方式循环或操作。

JSON现在也是一个标准。每个人都使用它，这意味着它不是无缘无故的。换句话说 - JSON 数据更有意义。

# python - 使用 python 代码生成 httptemplate (html)

> ID：14764921
> 
> 赞同：0
> 
> 时间：2013-02-08T02:48:51.580
> 
> 标签：python, html, django, templates

到目前为止，我只将 python 用于简单的应用程序。我想使用可以在 Web 服务器上使用的 python 代码创建一个 html 文件。如何使用 Django 创建此模板？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T03:06:33.660

你需要一个介绍，看看这篇文章[http://elleestcrimi.me/2012/03/15/introduction-django-guestbook-application/](http://elleestcrimi.me/2012/03/15/introduction-django-guestbook-application/) 它会引导你创建一个简单的 django 应用程序。有不明白的地方可以在博文评论，楼主很有帮助

# c# - 更改值类型的“this”变量

> ID：14764927
> 
> 赞同：64
> 
> 时间：2013-02-08T02:49:37.007
> 
> 标签：c#, this, value-type

显然，您可以`this`从结构中的任何位置（但不能在类中）更改值：

```
struct Point
{
    public Point(int x, int y)
    {
        this = new Point();
        X = x; Y = y;
    }
    int X; int Y;
} 
```

我以前从未见过，也从未需要它。为什么有人想要这样做？[Eric Lippert 提醒我们](https://stackoverflow.com/a/4914207/146622)，一个功能必须有正当理由才能实施。什么伟大的用例可以证明这一点？有没有什么场景是无价的？~~我找不到任何关于它的文档~~¹。

此外，对于调用构造函数，已经有一种更广为人知的替代语法，所以这个特性有时是多余的：

```
public Point(int x, int y)
    : this()
{
    X = x; Y = y;
} 
```

[[我通过 C# 4th edition](https://rads.stackoverflow.com/amzn/click/com/0735667454)在 Jeffrey Richter 的 CLR 中的一个示例中找到了此功能。]
[1) 显然它在[C# 规范](https://stackoverflow.com/a/14767499/146622)中。]

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-02-08T08:51:10.783

好问题！

根据定义，值类型是按值复制的。如果`this`实际上不是存储位置的别名，则*构造函数将初始化副本*，而不是初始化您打算初始化的变量。这将使构造函数变得不那么有用！对于方法也是如此；是的，可变结构是邪恶的，但是如果您要再次创建可变结构，`this`则必须是正在变异的变量，而不是其值的副本。

您所描述的行为是该设计决策的逻辑结果：由于`this`为变量命名，您可以分配给它，就像您可以分配给任何其他变量一样。

`this`像这样直接分配而不是分配给它的字段有点奇怪。更奇怪的是直接分配`this`然后覆盖该分配的 100%！

另一种避免为接收者的存储创建别名的设计是从短期存储池中`this`分配，在 ctor 中对其进行初始化，然后按值返回它。`this`这种方法的缺点是它使复制省略优化几乎不可能，并且它使 ctors 和方法奇怪地不一致。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-08T07:15:43.080

> 另外，我找不到任何关于它的文档。

您是否尝试查看 C# 规范？因为我可以找到它的文档（7.6.7）：

> *   当`this`在结构的实例构造函数内的*主表达式*中使用时，它被归类为变量。变量的类型是发生使用的结构的实例类型（第 10.3.1 节），变量代表正在构造的结构。结构的实例构造函数的`this`变量的行为与结构类型的参数完全相同`out`- 特别是，这意味着必须在实例构造函数的每个执行路径中明确分配变量。
>     
>     
> *   当在结构的实例方法或实例访问器内`this`的*主表达式*中使用时，它被归类为变量。变量的类型是发生使用的结构的实例类型（第 10.3.1 节）。
>     
>     
>     *   如果方法或访问器不是迭代器（第 10.14 节），则变量表示为其调用方法或访问器的结构，其行为与结构类型`this`的参数完全相同。`ref`
>     *   如果方法或访问器是迭代器，则该变量表示为其调用方法或访问器的结构的副本，并且其行为与结构类型的*值*`this`参数完全相同。

 *至于它的用例，我不能立即想到很多 - 关于我唯一得到的就是如果你想在构造函数中分配的值计算起来很昂贵，并且你有一个缓存的值想复制进去`this`，可能比较方便。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T01:28:51.367

包含该类型的公共和私有字段的存储位置聚合中的值类型的存储位置。将值类型传递给普通（值）参数将在物理上和语义上传递其所有字段的内容。将值类型作为`ref`参数传递在语义上是传递其所有字段的内容，尽管使用单个“byref”来传递所有字段。

在结构上调用方法等同于将结构（以及它的所有字段）作为`ref`参数传递，除了一个皱纹：通常，C# 和 vb.net 都不允许将只读值作为`ref`参数传递。但是，两者都允许在只读值或临时值上调用结构方法。他们通过制作所有结构（以及它的所有字段）的副本，然后将该副本作为`ref`参数传递来做到这一点。

由于这种行为，有些人称可变结构为“邪恶”，但唯一的邪恶是 C# 或 vb.net 都没有定义任何属性来指示结构成员或属性是否应该在不能调用的事物上调用直接通过`ref`。*

# html - 是否可以使用单个 css 语句更改所有 html 标题的大小，同时仍保持它们彼此的相对大小？

> ID：14764928
> 
> 赞同：3
> 
> 时间：2013-02-08T02:49:42.160
> 
> 标签：html, css

我知道我可以使用 css（例如，`h1 {font-size: 0.5em;}`）更改单个 html 标题的大小。但是，我想整体减小所有标题（h1、h2、h3 等）的大小，同时保持它们彼此的相对大小（h1 > h2 > h3 等）。

是否可以使用单个 css 语句更改所有标题大小，或者我必须单独指定每个标题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T07:40:12.260

例如，您不能在同一 CSS 语句中设置`h1`和的字体大小，除非使用相同的声明值。`h2`

但是，如果您希望以集中方式更改标题的字体大小，您可以将所有标题包装在`div`元素中，例如

```
<div class=heading><h1>...</h1></div>
<div class=heading><h2>...</h2></div> 
```

现在，假设您已经以`em`单位（或百分比）设置字体大小，例如，您可以通过在封闭元素`h1 { font-size: 2em } h2 { font-size: 1.5em }`上设置字体大小来修改它们，例如`div`

```
.heading { font-size: 0.9em; } 
```

这会将所有标题的字体大小减少 10%，而不会影响页面上的字体大小。

PS 将主标题的字体大小设置为其父标题字体大小的一半很奇怪。很难看出你想要完成什么。通常`em`使用一些合理的比例以单位设置字体大小就足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T02:53:27.890

我不认为这可以在 CSS 中完成，但如果您想保持代码简短，请尝试使用 SASS（ [http://sass-lang.com/ ）。](http://sass-lang.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T03:09:08.700

您可以更改父元素（如正文）的字体大小。如果您使用的是 ems 或 rems，那么它们将按比例放大或缩小。

```
body {
    font-size: 80%;
} 
```

[http://jsfiddle.net/ferne97/FXKvx/](http://jsfiddle.net/ferne97/FXKvx/)

我添加了一个按钮，该按钮将一个类切换`small`到 body 标签，添加时会将字体大小设置为 80%。

# jquery - MagicLine jQuery - 下划线的长度

> ID：14764930
> 
> 赞同：1
> 
> 时间：2013-02-08T02:50:13.920
> 
> 标签：jquery, css, navigation, underline

我尝试在我的网站上使用 MagicLine jQuery Navigation，但遇到了一个小问题。我希望下划线与当前突出显示的单词一样长。相反，它长了几个像素，我根本无法处理。我试图用 CSS 修复它，但我失败了。我相信这个问题的解决方案可以在 jQuery 代码中找到，但我不熟悉它，所以我向你寻求帮助。**如何缩短jQuery中下划线的长度？**

[在这里](http://css-tricks.com/jquery-magicline-navigation/)你可以找到 MagicLine jQuery Navigation 和我的[问题](http://i50.tinypic.com/1zoz1hd.png)的图形描述。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T13:03:58.897

我做了一些调整以使其适合您的要求

```
$("#example-one li").find("a").hover(function() {
    $el = $(this);
    var padding = ($el.outerWidth() - $el.width()) / 2;
    console.log($el.outerWidth(),$el.width(), padding)
    leftPos = $el.position().left + padding;
    newWidth = $el.width();

    $magicLine.stop().animate({
        left: leftPos,
        width: newWidth
    });
}, function() {
    $magicLine.stop().animate({
        left: $magicLine.data("origLeft"),
        width: $magicLine.data("origWidth")
    });    
}); 
```

还需要改`current_page_item`也

```
var $currentItem =  $(".current_page_item a");
var padding = ($currentItem.outerWidth() - $currentItem.width()) / 2;

$magicLine
    .width($currentItem.width())
    .css("left", $currentItem.position().left + padding)
    .data("origLeft", $magicLine.position().left )
    .data("origWidth", $magicLine.width()); 
```

演示：[小提琴](http://jsfiddle.net/UbAz4/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T12:37:55.130

我找到了解决方案`.navigation ul li.active { margin-right: -10px; }`

你需要给它这个CSS。

# jquery - 表格效果 - 即使您将鼠标移开也能顺利突出显示

> ID：14764934
> 
> 赞同：0
> 
> 时间：2013-02-08T02:50:44.540
> 
> 标签：jquery, css

嗨，有人知道如何制作此表单效果：[http](http://www.clouddigitalmedia.co.uk/contact-us.html) ://www.clouddigitalmedia.co.uk/contact-us当您单击表单字段时，即使您将鼠标移离该字段，它也会平滑突出显示，除非您点击框外的单击按钮。

我不确定这是否是 CSS3 的东西，或者可能有一个 jQuery。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T02:57:54.403

They are using the pseudo-class of `:focus`. This basically says that if the mouse has the text blinker inside of it, then apply the styles. Here is an example

```
input{
 /*Transition Properties*/
}
input:focus{
  border:2px solid blue;
} 
```

[http://jsfiddle.net/dZ4Jh/2/](http://jsfiddle.net/dZ4Jh/2/)

# java - 如何使用 JSTL 检查会话中是否存在已登录用户？

> ID：14764939
> 
> 赞同：2
> 
> 时间：2013-02-08T02:51:40.690
> 
> 标签：java, jsp, redirect, jstl, servlet-filters

我想检查用户是否使用 JSTL 登录。

我尝试了以下代码：

```
<c:if test="${sessionScope.logged_in == null}">
      <c:redirect url="index.jsp"></c:redirect>
</c:if> 
```

我也尝试了以下代码，但它抛出了一个`IllegalStateException`：

```
<c:if test="${empty user}">
    <b>you are not logged in</b>
<c:redirect url="index.jsp"></c:redirect>
</c:if> 
```

但它不工作。

如何在 JSTL 中实现以下代码：

```
<%
   String logged_in = (String) session.getAttribute("logged_in");
   if (logged_in == null) {
        response.sendRedirect("index.jsp");
   }
%> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T01:55:47.503

试试这个：

`<c:if test="${empty logged_in}">`
`<c:redirect url="index.jsp"></c:redirect>`
`</c:if>`

# css - Zend Form Decorators 嵌入标签和元素

> ID：14764943
> 
> 赞同：0
> 
> 时间：2013-02-08T02:52:04.597
> 
> 标签：css, zend-framework, decorator

我完全不知道如何在 Zend 中使用装饰器！

如果您创建一个没有装饰器的基本简单表单，则标签进入 DT，元素进入 DD。他们都一个接一个地去。

那么如何让每个标签及其对应的元素也进入一个 div 呢？

非常感谢！口沙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T03:10:55.610

我喜欢装饰师！但是它们非常难以掌握。你的问题很简单，这是一件好事。

我在表单中使用了这个函数

```
public function getElementDecorators()
{
    return array(
        'ViewHelper',
        'Errors',
        array('Description', array('tag' => 'p', 'class' => 'description')),
        array('HtmlTag', array('tag' => 'dd', 'id'  => array('callback' => array(get_class($this), 'resolveElementId')))),
        array('Label', array('tag' => 'dt')),
        array(array('elementContainer' => 'HtmlTag'), array('tag' => 'div', 'class' => 'element-container')),
    );
} 
```

然后对于表单中的每个元素，我都会像这样创建它们。

```
$this->addElement('Text', 'wordup', array(
    'label' => 'Put your words here',
    'attribs' => array('class' => 'textbox-fancy'),
    'decorators' => $this->getElementDecorators()
)); 
```

# php - 如何确保 PHP curl 完全下载 pdf 和 pdftk 命令以在合并时跳过损坏的 pdf

> ID：14764944
> 
> 赞同：1
> 
> 时间：2013-02-08T02:52:14.043
> 
> 标签：php, pdftk

目前我有一个 php 脚本，可以下载 50 多个 pdf 文件并将它们合并。但有时在下载时不会完全下载 pdf，因此它已损坏。使用 pdftk 执行合并命令时，由于 pdf 损坏，它会引发异常。

我正在使用 curl 下载 pdf，是否可以在下载下一个文件之前检查以确保文件已完全下载？或者 pdftk 是否可以合并所有跳过损坏文件的文件？

下面是代码：

下载：

```
$fp = fopen($pathS, 'w');

$ch = curl_init();
curl_setopt($ch,CURLOPT_URL,$urlS);
curl_setopt($ch, CURLOPT_FILE, $fp);
$data = curl_exec($ch);
fclose($fp); 
```

合并：

```
"C:\Program Files\PDF Labs\PDFtk Server\bin\pdftk.exe" 1.pdf...0.pdf cat output %mydate%.pdf" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T02:57:31.980

通过使用：

```
curl_setopt ($ch, CURLOPT_CONNECTTIMEOUT, 0);
curl_setopt ($ch, CURLOPT_TIMEOUT, 0); 
```

在继续下载下一个之前，我可以确保一个 pdf 已完全下载。

# android - 手机的 SQLiteDatabase 被永久锁定

> ID：14764946
> 
> 赞同：0
> 
> 时间：2013-02-08T02:52:20.380
> 
> 标签：android, android-sqlite, sqliteopenhelper

我的 android 应用程序正在使用手机的 SQLiteDatabase。似乎在应用程序崩溃的某个时刻，我的很多页面/片段突然无法工作，因为数据库被永久锁定。

有没有办法手动解锁/消除问题，以便我可以再次开始访问我的其他功能？相同的代码在我其他朋友的手机上工作，所以我相信我需要在我自己的手机上手动解锁数据库才能再次进行调试。

如果有帮助，以下是我的（已编辑：完整）logcat：

```
02-08 11:15:34.880: E/SqliteDatabaseCpp(10363): sqlite3_exec - Failed to set synchronous mode = 1(Normal) 
02-08 11:15:34.895: E/SQLiteDatabase(10363): Failed to open the database. closing it.
02-08 11:15:34.895: E/SQLiteDatabase(10363): android.database.sqlite.SQLiteDatabaseLockedException: database is locked
02-08 11:15:34.895: E/SQLiteDatabase(10363):    at android.database.sqlite.SQLiteDatabase.dbopen(Native Method)
02-08 11:15:34.895: E/SQLiteDatabase(10363):    at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:1132)
02-08 11:15:34.895: E/SQLiteDatabase(10363):    at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:1083)
02-08 11:15:34.895: E/SQLiteDatabase(10363):    at android.database.sqlite.SQLiteDatabase.openOrCreateDatabase(SQLiteDatabase.java:1170)
02-08 11:15:34.895: E/SQLiteDatabase(10363):    at android.app.ContextImpl.openOrCreateDatabase(ContextImpl.java:844)
02-08 11:15:34.895: E/SQLiteDatabase(10363):    at android.content.ContextWrapper.openOrCreateDatabase(ContextWrapper.java:228)
02-08 11:15:34.895: E/SQLiteDatabase(10363):    at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:157)
02-08 11:15:34.895: E/SQLiteDatabase(10363):    at com.sqlite.database.PlaceDataSource.open(PlaceDataSource.java:26)
02-08 11:15:34.895: E/SQLiteDatabase(10363):    at com.activities.TravelogueListBaseAdapter.getView(TravelogueListBaseAdapter.java:163)
02-08 11:15:34.895: E/SQLiteDatabase(10363):    at android.widget.HeaderViewListAdapter.getView(HeaderViewListAdapter.java:220)
02-08 11:15:34.895: E/SQLiteDatabase(10363):    at android.widget.AbsListView.obtainView(AbsListView.java:2197)
02-08 11:15:34.895: E/SQLiteDatabase(10363):    at android.widget.ListView.measureHeightOfChildren(ListView.java:1244)
02-08 11:15:34.895: E/SQLiteDatabase(10363):    at android.widget.ListView.onMeasure(ListView.java:1155)
02-08 11:15:34.895: E/SQLiteDatabase(10363):    at android.view.View.measure(View.java:12929)
02-08 11:15:34.895: E/SQLiteDatabase(10363):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4703)
02-08 11:15:34.895: E/SQLiteDatabase(10363):    at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1385)
02-08 11:15:34.895: E/SQLiteDatabase(10363):    at android.widget.LinearLayout.measureVertical(LinearLayout.java:670)
02-08 11:15:34.895: E/SQLiteDatabase(10363):    at android.widget.LinearLayout.onMeasure(LinearLayout.java:563)
02-08 11:15:34.895: E/SQLiteDatabase(10363):    at android.view.View.measure(View.java:12929)
02-08 11:15:34.895: E/SQLiteDatabase(10363):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4703)
02-08 11:15:34.895: E/SQLiteDatabase(10363):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:293)
02-08 11:15:34.895: E/SQLiteDatabase(10363):    at android.view.View.measure(View.java:12929)
02-08 11:15:34.895: E/SQLiteDatabase(10363):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4703)
02-08 11:15:34.895: E/SQLiteDatabase(10363):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:293)
02-08 11:15:34.895: E/SQLiteDatabase(10363):    at android.view.View.measure(View.java:12929)
02-08 11:15:34.895: E/SQLiteDatabase(10363):    at android.widget.RelativeLayout.measureChildHorizontal(RelativeLayout.java:594)
02-08 11:15:34.895: E/SQLiteDatabase(10363):    at android.widget.RelativeLayout.onMeasure(RelativeLayout.java:376)
02-08 11:15:34.895: E/SQLiteDatabase(10363):    at android.view.View.measure(View.java:12929)
02-08 11:15:34.895: E/SQLiteDatabase(10363):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4703)
02-08 11:15:34.895: E/SQLiteDatabase(10363):    at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1385)
02-08 11:15:34.895: E/SQLiteDatabase(10363):    at android.widget.LinearLayout.measureHorizontal(LinearLayout.java:1027)
02-08 11:15:34.895: E/SQLiteDatabase(10363):    at android.widget.LinearLayout.onMeasure(LinearLayout.java:565)
02-08 11:15:34.895: E/SQLiteDatabase(10363):    at android.view.View.measure(View.java:12929)
02-08 11:15:34.895: E/SQLiteDatabase(10363):    at shared.ui.actionscontentview.ActionsContentView.onMeasure(ActionsContentView.java:259)
02-08 11:15:34.895: E/SQLiteDatabase(10363):    at android.view.View.measure(View.java:12929)
02-08 11:15:34.895: E/SQLiteDatabase(10363):    at android.widget.RelativeLayout.measureChildHorizontal(RelativeLayout.java:594)
02-08 11:15:34.895: E/SQLiteDatabase(10363):    at android.widget.RelativeLayout.onMeasure(RelativeLayout.java:376)
02-08 11:15:34.895: E/SQLiteDatabase(10363):    at android.view.View.measure(View.java:12929)
02-08 11:15:34.895: E/SQLiteDatabase(10363):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4703)
02-08 11:15:34.895: E/SQLiteDatabase(10363):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:293)
02-08 11:15:34.895: E/SQLiteDatabase(10363):    at android.view.View.measure(View.java:12929)
02-08 11:15:34.895: E/SQLiteDatabase(10363):    at android.widget.LinearLayout.measureVertical(LinearLayout.java:822)
02-08 11:15:34.895: E/SQLiteDatabase(10363):    at android.widget.LinearLayout.onMeasure(LinearLayout.java:563)
02-08 11:15:34.895: E/SQLiteDatabase(10363):    at android.view.View.measure(View.java:12929)
02-08 11:15:34.895: E/SQLiteDatabase(10363):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4703)
02-08 11:15:34.895: E/SQLiteDatabase(10363):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:293)
02-08 11:15:34.895: E/SQLiteDatabase(10363):    at com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:2257)
02-08 11:15:34.895: E/SQLiteDatabase(10363):    at android.view.View.measure(View.java:12929)
02-08 11:15:34.895: E/SQLiteDatabase(10363):    at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1240)
02-08 11:15:34.895: E/SQLiteDatabase(10363):    at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2628)
02-08 11:15:34.895: E/SQLiteDatabase(10363):    at android.os.Handler.dispatchMessage(Handler.java:99)
02-08 11:15:34.895: E/SQLiteDatabase(10363):    at android.os.Looper.loop(Looper.java:137)
02-08 11:15:34.895: E/SQLiteDatabase(10363):    at android.app.ActivityThread.main(ActivityThread.java:4511)
02-08 11:15:34.895: E/SQLiteDatabase(10363):    at java.lang.reflect.Method.invokeNative(Native Method)
02-08 11:15:34.895: E/SQLiteDatabase(10363):    at   java.lang.reflect.Method.invoke(Method.java:511)
02-08 11:15:34.895: E/SQLiteDatabase(10363):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
02-08 11:15:34.895: E/SQLiteDatabase(10363):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
02-08 11:15:34.895: E/SQLiteDatabase(10363):    at dalvik.system.NativeStart.main(Native Method)
02-08 11:15:34.900: E/AndroidRuntime(10363): FATAL EXCEPTION: main
02-08 11:15:34.900: E/AndroidRuntime(10363): android.database.sqlite.SQLiteDatabaseLockedException: database is locked
02-08 11:15:34.900: E/AndroidRuntime(10363):    at android.database.sqlite.SQLiteDatabase.dbopen(Native Method)
02-08 11:15:34.900: E/AndroidRuntime(10363):    at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:1132)
02-08 11:15:34.900: E/AndroidRuntime(10363):    at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:1083)
02-08 11:15:34.900: E/AndroidRuntime(10363):    at android.database.sqlite.SQLiteDatabase.openOrCreateDatabase(SQLiteDatabase.java:1170)
02-08 11:15:34.900: E/AndroidRuntime(10363):    at android.app.ContextImpl.openOrCreateDatabase(ContextImpl.java:844)
02-08 11:15:34.900: E/AndroidRuntime(10363):    at android.content.ContextWrapper.openOrCreateDatabase(ContextWrapper.java:228)
02-08 11:15:34.900: E/AndroidRuntime(10363):    at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:157)
02-08 11:15:34.900: E/AndroidRuntime(10363):    at com.sqlite.database.PlaceDataSource.open(PlaceDataSource.java:26)
02-08 11:15:34.900: E/AndroidRuntime(10363):    at com.activities.TravelogueListBaseAdapter.getView(TravelogueListBaseAdapter.java:163)
02-08 11:15:34.900: E/AndroidRuntime(10363):    at android.widget.HeaderViewListAdapter.getView(HeaderViewListAdapter.java:220)
02-08 11:15:34.900: E/AndroidRuntime(10363):    at android.widget.AbsListView.obtainView(AbsListView.java:2197)
02-08 11:15:34.900: E/AndroidRuntime(10363):    at android.widget.ListView.measureHeightOfChildren(ListView.java:1244)
02-08 11:15:34.900: E/AndroidRuntime(10363):    at android.widget.ListView.onMeasure(ListView.java:1155)
02-08 11:15:34.900: E/AndroidRuntime(10363):    at android.view.View.measure(View.java:12929)
02-08 11:15:34.900: E/AndroidRuntime(10363):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4703)
02-08 11:15:34.900: E/AndroidRuntime(10363):    at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1385)
02-08 11:15:34.900: E/AndroidRuntime(10363):    at android.widget.LinearLayout.measureVertical(LinearLayout.java:670)
02-08 11:15:34.900: E/AndroidRuntime(10363):    at android.widget.LinearLayout.onMeasure(LinearLayout.java:563)
02-08 11:15:34.900: E/AndroidRuntime(10363):    at android.view.View.measure(View.java:12929)
02-08 11:15:34.900: E/AndroidRuntime(10363):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4703)
02-08 11:15:34.900: E/AndroidRuntime(10363):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:293)
02-08 11:15:34.900: E/AndroidRuntime(10363):    at android.view.View.measure(View.java:12929)
02-08 11:15:34.900: E/AndroidRuntime(10363):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4703)
02-08 11:15:34.900: E/AndroidRuntime(10363):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:293)
02-08 11:15:34.900: E/AndroidRuntime(10363):    at android.view.View.measure(View.java:12929)
02-08 11:15:34.900: E/AndroidRuntime(10363):    at android.widget.RelativeLayout.measureChildHorizontal(RelativeLayout.java:594)
02-08 11:15:34.900: E/AndroidRuntime(10363):    at android.widget.RelativeLayout.onMeasure(RelativeLayout.java:376)
02-08 11:15:34.900: E/AndroidRuntime(10363):    at android.view.View.measure(View.java:12929)
02-08 11:15:34.900: E/AndroidRuntime(10363):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4703)
02-08 11:15:34.900: E/AndroidRuntime(10363):    at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1385)
02-08 11:15:34.900: E/AndroidRuntime(10363):    at android.widget.LinearLayout.measureHorizontal(LinearLayout.java:1027)
02-08 11:15:34.900: E/AndroidRuntime(10363):    at android.widget.LinearLayout.onMeasure(LinearLayout.java:565)
02-08 11:15:34.900: E/AndroidRuntime(10363):    at android.view.View.measure(View.java:12929)
02-08 11:15:34.900: E/AndroidRuntime(10363):    at shared.ui.actionscontentview.ActionsContentView.onMeasure(ActionsContentView.java:259)
02-08 11:15:34.900: E/AndroidRuntime(10363):    at android.view.View.measure(View.java:12929)
02-08 11:15:34.900: E/AndroidRuntime(10363):    at android.widget.RelativeLayout.measureChildHorizontal(RelativeLayout.java:594)
02-08 11:15:34.900: E/AndroidRuntime(10363):    at android.widget.RelativeLayout.onMeasure(RelativeLayout.java:376)
02-08 11:15:34.900: E/AndroidRuntime(10363):    at android.view.View.measure(View.java:12929)
02-08 11:15:34.900: E/AndroidRuntime(10363):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4703)
02-08 11:15:34.900: E/AndroidRuntime(10363):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:293)
02-08 11:15:34.900: E/AndroidRuntime(10363):    at android.view.View.measure(View.java:12929)
02-08 11:15:34.900: E/AndroidRuntime(10363):    at android.widget.LinearLayout.measureVertical(LinearLayout.java:822)
02-08 11:15:34.900: E/AndroidRuntime(10363):    at android.widget.LinearLayout.onMeasure(LinearLayout.java:563)
02-08 11:15:34.900: E/AndroidRuntime(10363):    at android.view.View.measure(View.java:12929)
02-08 11:15:34.900: E/AndroidRuntime(10363):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4703)
02-08 11:15:34.900: E/AndroidRuntime(10363):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:293)
02-08 11:15:34.900: E/AndroidRuntime(10363):    at com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:2257)
02-08 11:15:34.900: E/AndroidRuntime(10363):    at android.view.View.measure(View.java:12929)
02-08 11:15:34.900: E/AndroidRuntime(10363):    at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1240)
02-08 11:15:34.900: E/AndroidRuntime(10363):    at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2628)
02-08 11:15:34.900: E/AndroidRuntime(10363):    at android.os.Handler.dispatchMessage(Handler.java:99)
02-08 11:15:34.900: E/AndroidRuntime(10363):    at android.os.Looper.loop(Looper.java:137)
02-08 11:15:34.900: E/AndroidRuntime(10363):    at android.app.ActivityThread.main(ActivityThread.java:4511)
02-08 11:15:34.900: E/AndroidRuntime(10363):    at java.lang.reflect.Method.invokeNative(Native Method)
02-08 11:15:34.900: E/AndroidRuntime(10363):    at java.lang.reflect.Method.invoke(Method.java:511)
02-08 11:15:34.900: E/AndroidRuntime(10363):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
02-08 11:15:34.900: E/AndroidRuntime(10363):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
02-08 11:15:34.900: E/AndroidRuntime(10363):    at dalvik.system.NativeStart.main(Native Method)
02-08 11:15:34.920: E/android.os.Debug(1981): !@Dumpstate > dumpstate -k -t -n -z -d -o /data/log/dumpstate_app_error
02-08 11:15:35.420: E/lights(1981): write_int: path 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T03:02:38.093

发生这种情况的原因是您一次只能打开一个与数据库的连接。我相信您没有关闭 Db 连接，或者当您尝试写入 Db 时，某个线程已经在写入 Db。

我建议您从一个 SQLOpenHelper 访问 db（请参见此[示例](http://touchlabblog.tumblr.com/post/24474750219/single-sqlite-connection)），或者确保在完成所有 db 助手实例后关闭它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T03:04:18.067

当您的应用程序关闭（或系统将其杀死）时，您与数据库的连接将被断开并清理。因此，不存在“永久锁定”之类的东西。

```
02-08 10:40:24.195: E/SqliteDatabaseCpp(7212): sqlite3_exec - Failed to set synchronous mode = 1(Normal) 
02-08 10:40:24.205: E/SQLiteDatabase(7212): Failed to open the database. closing it. 
```

这个问题通常是一个线程试图访问数据库，但另一个线程拥有锁或正在使用它。解决方案：在应用程序中仅使用一个连接到数据库的实例。一种方法可以将实例存储在子应用程序类中。

# excel - 将单元格的值复制到另一个单元格以记录车辆里程

> ID：14764951
> 
> 赞同：0
> 
> 时间：2013-02-08T02:53:02.200
> 
> 标签：excel, vba

我正在制作一个电子表格来记录车辆里程。我想在 F6 中手动输入起始里程，在 G6 中手动输入结束里程。我希望 G6 的值然后自动复制到 F7 并在 G7 中输入结束里程，依此类推。我遇到的问题是处理周末和节假日时可能会出现 2 或 3 个空白单元格。我试过使用类似的东西`=if(D9=""," ", G6)`，但这不起作用。

我也在 VBA 中尝试过这个功能： `=IF(D9=""," ",LastNonBlankCell(G8:G39))`[D9 is a datefield] 并且只以 0 结尾。

```
Function LastNonBlankCell(Range As Excel.Range) As Variant

    Application.Volatile

    LastNonBlankCell = Range.End(xlDown).Value

End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T03:35:16.100

你真的需要周末或节假日的空白行吗？如果没有，请设置`D8`为公式，`=workday.intl(D7,1)`然后根据需要将其复制下来。如果您需要考虑假期，请参阅 Excel 文档以了解`WORKDAY.INTL`. 日期列表现在将仅包含工作日，因此可以将一行的结束里程复制到下一行，无需特殊处理。

这使得周末和节假日更难一目了然。这可以使用条件格式来解决。为范围设置格式`D8:D<whatever>`，使用公式`=D8>(D7+1)`，并将格式设置为对您来说最突出的格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T19:05:09.333

以下 VBA 宏将以与您询问的方式略有不同的方式实现您的最终目标。

安装宏后，双击 G 列中的单元格时，宏会将最后输入的结束里程复制到 F 列左侧的单元格中。

例如，如果最后一个结束里程条目位于单元格 G6 中，并且您在单元格 G9 中双击，则该条目将被复制到单元格 F9 中。然后您可以在单元格 G9 中输入新的结束里程。

```
 Private Sub WorkSheet_BeforeDoubleClick(ByVal Target As Range, Cancel As Boolean)

     If Not Application.Intersect(Target, Range("G:G")) Is Nothing Then
        Selection.Offset(0, -1).Value = Selection.End(xlUp).Value
     Else
        Exit Sub
     End If

  End Sub 
```

要安装宏，请右键单击工作表的名称选项卡，选择“查看代码”，然后粘贴宏代码。如果您将代码放入常规模块中，它将无法正常工作。

# linux - MD5 值可以根据操作系统改变吗？

> ID：14764957
> 
> 赞同：0
> 
> 时间：2013-02-08T02:53:50.427
> 
> 标签：linux, md5

目前我正在尝试安装linux

我只是在检查 md5 校验和以查看文件是否正确下载。

情况是这样的。我已经在 win xp 中下载了 linux .iso 文件，并从 Microsoft 的“文件校验和完整性验证器”实用程序中检查了 md5。它给出的校验和与 linux OS 网站上显示的校验和不同。

问：不同操作系统（winxp、win7、linux 等）上的 md5 校验和是否不同（或相同）？

# vim - vim NERDTree 缓冲区 - 尝试 char~by-char 转换

> ID：14764958
> 
> 赞同：1
> 
> 时间：2013-02-08T02:54:00.810
> 
> 标签：vim, nerdtree

在上一篇文章[中-vim 缓冲区尝试逐字符转换](https://stackoverflow.com/questions/14454901/vim-buffer-trying-char-by-char-conversion)-打开某些文件时遇到问题，vim 无法检测到该文件中的编码，这已通过 Ingo 提供的解决方案解决.

但是在我安装了 vim 的 NERDTree 插件之后，我又遇到了同样的问题。

NERDTree 映射打开的缓冲区`map <F2> :NERDTreeToggle<CR>`似乎不遵守该`:set encoding=utf-8`指令。

我必须`:set encoding=utf-8` **再次**手动运行才能`Trying char~by-char conversion...`解决问题。

此外，我的 nerdtree 目录显示为一个奇怪`?`的而不是`|`符号。像这样：- ![在此处输入图像描述](../Images/9612dd67a2f4751d4e570368d9ce0eb0.png)

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T03:10:32.767

我通过映射暂时解决了这个问题

```
map <F2> :NERDTreeToggle<CR>:set encoding=utf-8<CR> 
```

而不是原来的平原

```
map <F2> :NERDTreeToggle<CR> 
```

但是，此解决方案还不够好，因为`Trying char~by-char conversion`每当我浏览打开 NERDTree 缓冲区中的特定目录时，仍会弹出警告。

所以，我想听听是否有人有更好的解决方案！谢谢！

这个帖子解决了nerdtree`?`字符问题 - [vim - nerdtree突然坏了](https://stackoverflow.com/questions/9927217/vim-nerdtree-suddenly-broke)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T06:36:07.887

您不需要做任何事情：NERDTree 不会进行操作`encoding`，并且`encoding`是您在`~/.vimrc`. 回到一个几乎是空的`~/.vimrc`并从中构建（使用`encoding`和其他选项）。

# python - 如何通过stutils复制存储在变量中的文件

> ID：14764959
> 
> 赞同：0
> 
> 时间：2013-02-08T02:54:01.200
> 
> 标签：python, variables, file-handling

我想更改作为用户生成输入（raw_input）的文件的扩展名，但我需要保持原始文件相同，因此该程序将内容从原始文件复制到输出文件。

这是我的计划的一部分，旨在做同样的事情 -

```
var = raw_input("Enterfile ")
fid = open(var)
import os
name, extension = os.path.splitext(var)
path = os.path.abspath(var)
outputfile = os.path.splitext(var)[0]+ '.asd'
print path
print var
print outputfile
fo = open(outputfile, 'w')
import shutil
shutil.copyfile(var, fo)
data = fo.read()
print data 
```

返回的错误 -

```
File "p.py", line 18, in <module>
    shutil.copyfile(var, fo)
  File "/usr/lib/python2.7/shutil.py", line 68, in copyfile
    if _samefile(src, dst):
  File "/usr/lib/python2.7/shutil.py", line 58, in _samefile
    return os.path.samefile(src, dst)
  File "/usr/lib/python2.7/posixpath.py", line 154, in samefile
    s2 = os.stat(f2) 
```

我不确定我的程序有什么问题，请帮忙。还有更有效的方法可以做到这一点。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T04:26:19.257

该方法`shutil.copyfile`适用于文件*名*，而不是*文件描述符*。您不需要打开文件，也绝对不想将文件对象传递给 copyfile 方法。

代码应该看起来更像这样：（如果您不确定参数类型，请务必检查[http://docs.python.org/2/library/shutil.html ）](http://docs.python.org/2/library/shutil.html)

```
import os.path
import shutil

input_filename = raw_input("Enterfile ")
base_name, extension = os.path.splitext(input_filename)
output_filename = base_name + '.asd'

shutil.copyfile(input_filename, output_filename) 
```

# c# - c# 在测验中切换到下一页

> ID：14764964
> 
> 赞同：0
> 
> 时间：2013-02-08T02:54:27.860
> 
> 标签：c#, arrays, visual-studio-2010

您好，我无法在我的测验中更改到下一个问题。

```
private void Form1_Load(object sender, EventArgs e)
    {

        Random random = new Random();
        int Month = random.Next(0);

        if (Month == 0)
        {
            radioButton1.Text = "January";
            radioButton2.Text = "April";
            radioButton3.Text = "August";
            SoundPlayer simpleSound = new SoundPlayer(@"C:\Users\Callum\Documents\My Projects (Dissertation)\App sounds and pictures\Unit 8 Months (Complete)\Audio\1\. Enero – January.Wav");
            simpleSound.Play();
        }

        if (Month == 1)
        {
            radioButton1.Text = "July";
            radioButton2.Text = "December";
            radioButton3.Text = "February";
            SoundPlayer simpleSound = new SoundPlayer(@"C:\Users\Callum\Documents\My Projects (Dissertation)\App sounds and pictures\Unit 8 Months (Complete)\Audio\2\. Febero – February.Wav");
            simpleSound.Play();
        }
        if (Month == 2)
        {
            radioButton1.Text = "May";
            radioButton2.Text = "September";
            radioButton3.Text = "March";
            SoundPlayer simpleSound = new SoundPlayer(@"C:\Users\Callum\Documents\My Projects (Dissertation)\App sounds and pictures\Unit 8 Months (Complete)\Audio\3\. Marzo – March.Wav");
            simpleSound.Play();
        }
        if (Month == 3)
        {
            radioButton1.Text = "April";
            radioButton2.Text = "August";
            radioButton3.Text = "March";
            SoundPlayer simpleSound = new SoundPlayer(@"C:\Users\Callum\Documents\My Projects (Dissertation)\App sounds and pictures\Unit 8 Months (Complete)\Audio\4\. Abril – April.Wav");
            simpleSound.Play();
        }
        if (Month == 4)
        {
            radioButton1.Text = "March";
            radioButton2.Text = "May";
            radioButton3.Text = "November";
            SoundPlayer simpleSound = new SoundPlayer(@"C:\Users\Callum\Documents\My Projects (Dissertation)\App sounds and pictures\Unit 8 Months (Complete)\Audio\5\. Mayo – May.Wav");
            simpleSound.Play();
        }
        if (Month == 5)
        {
            radioButton1.Text = "July";
            radioButton2.Text = "June";
            radioButton3.Text = "February";
            SoundPlayer simpleSound = new SoundPlayer(@"C:\Users\Callum\Documents\My Projects (Dissertation)\App sounds and pictures\Unit 8 Months (Complete)\Audio\6\. Junio – June.Wav");
            simpleSound.Play();
        }
static int i = 0;

 private void button1_Click(object sender, EventArgs e)
    {
        Random random = new Random();
        int Month = random.Next(0);

        if (Month == 0)

        if (radioButton1.Checked)
        {
            label1.Text = "Correct";
            radioButton2.Enabled = false;
            radioButton3.Enabled = false;
        }
        else if (radioButton2.Checked)
        {
            label1.Text = "Incorrect";
            radioButton1.Enabled = false;
            radioButton3.Enabled = false;
        }
        else if (radioButton3.Checked)
        {
            label1.Text = "Incorrect";
            radioButton1.Enabled = false;
            radioButton3.Enabled = false;
        }

        if (Month == 1)

            if (radioButton1.Checked)
            {
                label1.Text = "Incorrect";
                radioButton2.Enabled = false;
                radioButton3.Enabled = false;
            }
            else if (radioButton2.Checked)
            {
                label1.Text = "Incorrect";
                radioButton1.Enabled = false;
                radioButton3.Enabled = false;
            }
            else if (radioButton3.Checked)
            {
                label1.Text = "Correct";
                radioButton1.Enabled = false;
                radioButton3.Enabled = false;
            }

        if (Month == 2)

            if (radioButton1.Checked)
            {
                label1.Text = "Incorrect";
                radioButton2.Enabled = false;
                radioButton3.Enabled = false;
            }
            else if (radioButton2.Checked)
            {
                label1.Text = "Incorrect";
                radioButton1.Enabled = false;
                radioButton3.Enabled = false;
            }
            else if (radioButton3.Checked)
            {
                label1.Text = "Correct";
                radioButton1.Enabled = false;
                radioButton3.Enabled = false;
            }

        if (Month == 3)

            if (radioButton1.Checked)
            {
                label1.Text = "Correct";
                radioButton2.Enabled = false;
                radioButton3.Enabled = false;
            }
            else if (radioButton2.Checked)
            {
                label1.Text = "Incorrect";
                radioButton1.Enabled = false;
                radioButton3.Enabled = false;
            }
            else if (radioButton3.Checked)
            {
                label1.Text = "Incorrect";
                radioButton1.Enabled = false;
                radioButton3.Enabled = false;
            }

        if (Month == 4)

            if (radioButton1.Checked)
            {
                label1.Text = "Incorrect";
                radioButton2.Enabled = false;
                radioButton3.Enabled = false;
            }
            else if (radioButton2.Checked)
            {
                label1.Text = "Correct";
                radioButton1.Enabled = false;
                radioButton3.Enabled = false;
            }
            else if (radioButton3.Checked)
            {
                label1.Text = "Incorrect";
                radioButton1.Enabled = false;
                radioButton3.Enabled = false;
            }

        if (Month == 5)

            if (radioButton1.Checked)
            {
                label1.Text = "Incorrect";
                radioButton2.Enabled = false;
                radioButton3.Enabled = false;
            }
            else if (radioButton2.Checked)
            {
                label1.Text = "Correct";
                radioButton1.Enabled = false;
                radioButton3.Enabled = false;
            }
            else if (radioButton3.Checked)
            {
                label1.Text = "Incorrect";
                radioButton1.Enabled = false;
                radioButton3.Enabled = false;
            }

private void button2_Click(object sender, EventArgs e)
    {

        radioButton1.text = Month[i];
        radioButton2.text = Month[i];
        radioButton3.text= Month[i];

        i = (i + 1) % 5;

    } 
```

出现 3 个错误，说“'System.Windows.Form.RadioButton' 不包含'text' 的定义，并且找不到接受第一个参数类型'System.Windows.Forms.RadioButton' 的扩展方法'text'（是您缺少 using 指令或程序集引用）

我对此很陌生，并试图自学 C#，所以请耐心等待我，在此先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T02:59:44.730

Adding to Rodrigo's answer:

```
private void button2_Click(object sender, EventArgs e) {

    radioButton1.Text = Month[i];
    radioButton2.Text = Month[i];
    radioButton3.Text= Month[i];

    i = (i + 1) % 5;

} 
```

Here you are trying to set the `Text` property (string) to and integer (Month).

Try:

```
private void button2_Click(object sender, EventArgs e) {

    radioButton1.Text = Month[i].ToString();
    radioButton2.Text = Month[i].ToString();
    radioButton3.Text= Month[i].ToString();

    i = (i + 1) % 5;

} 
```

Also, each of those RadioButtons will have the same text (Month number). Not sure if that is intended.

Additionally, you should use `if else` or a `switch` statement instead of `if` blocks in this case when checking for the current month. Currently, if `Month == 1`, it will still be checked against 2, 3, 4, etc needlessly.

Finally, consider limiting the creation of random numbers to a [specified range](http://msdn.microsoft.com/en-us/library/2dx6wyd4.aspx).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T02:57:09.177

C# 区分大小写。您要查找的属性是文本，而不是文本。

```
private void button2_Click(object sender, EventArgs e) {

    radioButton1.Text = Month[i];
    radioButton2.Text = Month[i];
    radioButton3.Text= Month[i];

    i = (i + 1) % 5;

} 
```

# svn - 用于 VB6 的 SVN 插件在 Windows 8 上不起作用

> ID：14764965
> 
> 赞同：-2
> 
> 时间：2013-02-08T02:54:40.800
> 
> 标签：svn, windows-8, vb6, tortoisesvn

我刚刚从 Windows 7 升级到 Windows 8。当我不以管理员身份运行 VB6 时，SVN 插件在 VB6 中工作。但是，为了加载和编译我的整个项目，我需要以管理员身份运行 VB6。问题是当我以管理员身份运行它时，SVN 失败并出现此错误

![在此处输入图像描述](../Images/6dbf752ce4a1f62f2f879d793a061567.png)

我替换了屏幕截图中的一些文件夹名称，但我已经使用同一个存储库一年多了，而且它在 Windows 7 上都能完美运行。您可能拥有的有关此错误的任何信息都会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T02:58:07.780

在虚拟环境（如 vmware/vbox/..etc）中运行 vb6，并使用一些已知可与 vb6 一起使用的旧窗口，如 windows XP。

编辑：（基于第一条评论）

该错误似乎来自某些源代码控制软件，请考虑更换该软件或寻找替代方案，VB6 项目本身不应受到此举动的严重影响。

如果您通过升级完成了从 Windows 7 到 Windows 8 的迁移，请尝试进行全新安装，然后安装您的软件，有时 Windows 升级会弄乱很多东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-08T14:47:56.980

错误的原因是 Windows 8 上的 VB6 需要提升权限才能以管理员身份正常运行。我的存储库位于网络驱动器上，因此 VB6 没有访问存储库的权限。

为了修复它，我在以下位置添加了一个注册表值：HKEY_LOCAL_MACHINE/SOFTWARE/Microsoft/Windows/CurrentVersion/Policies/System/

类型：DWORD
名称：EnableLinkedConnections
值：1

# ios - Xcode 摘要中的应用程序图标似乎很小

> ID：14764967
> 
> 赞同：2
> 
> 时间：2013-02-08T02:54:55.603
> 
> 标签：ios, xcode, icons, retina-display

我已经使用了一年的应用程序图标。我正在对应用程序进行更新，由于自上次编写此应用程序以来 Xcode 发生了很大变化，我想从一个新项目开始以获取更新的构建设置等。我目前正在使用 Xcode 版本 4.5.2 (4G2008a)。

当我将图标文件拖放到“摘要”选项卡中时，它们看起来很小！怎么了？

![在此处输入图像描述](../Images/5ea99b6e79fcc2b85ab5fe0dbb7f466c.png)

这是图标，它们是 57x57 和 114x114 png。

![在此处输入图像描述](../Images/649457bc272b27861b4109d3db92cd70.png) ![在此处输入图像描述](../Images/dfc4ab7d7207b077c6bf3aa3c9cfaf21.png)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-08T04:59:21.640

尝试从 Finder 拖放实际文件，它会为您创建图像，并让您知道文件是否存在任何问题。

# c# - 将页面重定向到其他 Web 浏览器

> ID：14764971
> 
> 赞同：2
> 
> 时间：2013-02-08T02:55:55.303
> 
> 标签：c#, asp.net, windows, google-chrome, intranet

我有一个我们公司的 ASP.Net 页面，我们正在对新网站进行并行测试。现在，我在旧网站上附加了一个可点击的图像，该图像重定向到新网站。

我的问题是旧网站可以在任何网络浏览器中浏览，而新网站只能使用特定的网络浏览器打开（由于新网站的开发人员说它只能在谷歌浏览器上正常工作）。

我所需要的只是当他们使用他们拥有的任何浏览器浏览旧网站时，然后单击图像，它将使用谷歌浏览器打开新网站。

这些网站发布在公司的 Windows 服务器上，所有连接到它的客户端都安装了谷歌浏览器。

如果有类似的东西： *System.Diagnostics.Process.Start("chrome.exe", <url>);* 将在客户端（而不是在服务器端）执行，请告知。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T03:00:59.827

This is not possible unless you have some client software that can receive a call from the website to launch Chrome. My answer can be backed by [this](https://stackoverflow.com/questions/1946976/how-can-i-redirect-to-ie-from-other-browsers) question about IE redirection to other browser. The accepted answer is absolutely correct.

The security risk would be too great and besides windows doesn't support that kind of linking. You could write a "client" program that runs in the background waiting for a call from your website. Then the client program could launch Chrome.

Hope this helps you!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T03:03:02.850

是你的问题吗？: 你想通过谷歌浏览器打开你的链接。如果是，你不能这样做！因为 ASP.net、PHP 等.. 一种服务器端语言，做不到！，如果没有客户端上的任何应用程序，它是不可能的。

# codeigniter - 我们什么时候需要在 codeIgniter 中使用 base_url() 函数？

> ID：14764975
> 
> 赞同：3
> 
> 时间：2013-02-08T02:56:08.787
> 
> 标签：codeigniter, base-url

我正在做一个小项目，我所有的网址都是没有`base_url()`功能的。所以我在想这些`base_url()`功能对我的网址有什么帮助。我知道它将根据配置文件首选项为 url 添加前缀。但我只想问

使用它们有什么好处？不使用它们的缺点是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T07:52:04.627

主要优点是；当您想将项目迁移到在线或其他服务器时；您无需编辑硬编码链接。base_url() 将使您的内部链接动态获取其基本网址。

```
echo base_url("blog/post/123"); 
```

将返回

```
http://example.com/blog/post/123 
```

在`example.com`并将返回

```
http://jms.com/blog/post/123 
```

在`jms.com`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T04:22:40.090

`base_url`当您使用电子邮件验证创建登录/注册或忘记密码功能时需要（通过单击[http://yourdomain.com/auth/userid/code](http://yourdomain.com/auth/userid/code)之类的链接进行验证）。这只是一个例子，可能有很多用途。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T07:38:07.753

`base_url()`和的区别`site_url()`在于

两者都返回您网站的网址，但`site_url()`返回您的网站网址，附有附件`index.php`或您在其中配置`$config['index_page'] = ''` 的内容`application/config/config.php`

例子`www.yoursite.com/chicken/turkey`

使用时`base_url()`：返回您的站点基本 URL，如您的配置文件中指定的那样。你会得到`wwww.yoursite.com`

使用时`site_url()`：你会得到`www.yoursite.com/index.php`

`site_url()`如果您没有更改您的`.htaccess`并且您仍然可以访问您的控制器，这很有用`index.php`

`base_url()`在链接您的 css、js 或媒体内容时很有用。`index.php`授予您在访问控制器/方法时仍然使用的权限

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T21:44:46.743

我通常使用**base_url()**获取静态文件（css、js、img）文件的正确路径，使用**site_url()**获取页面链接。**site_url()**将返回，`url_suffix`可以在**application/config/config.php**文件中设置女巫

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-08T08:11:22.903

它需要无处不在，或者至少我们应该在任何地方使用。你知道吗，绝对网址比相对网址好得多？因此，当您为站点上的所有链接使用绝对 URL 时，您可以使用“base_url()”函数，而不是硬编码的根域名。此外，CI reactor 非常智能，可以检测原始基本 url，因此您甚至不需要在配置文件中输入它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-03-05T06:44:00.783

优点：-如果您不使用 base_url() 并且想要切换站点的目录/服务器，则应该更改整个项目的路径。

如果您使用 base_url()，只需在 config.php 中一次性更改它，对所有站点都有效。

# c++ - C ++重新启动main而不丢失变量

> ID：14764980
> 
> 赞同：1
> 
> 时间：2013-02-08T02:56:42.733
> 
> 标签：c++, main

我的程序的主要功能显示一个开关菜单。当输入选项 1 时，会调用一个函数来“洗牌”一组“卡片”。改组完成后，该函数通过调用 main() 将程序返回到开头，从而再次显示菜单。

我遇到的问题是菜单的选项 4 将洗牌后的数组写入文件。但是在洗牌后重新启动程序时，数组数据丢失，因此输出的文件都是垃圾文件。有没有办法在不丢失数据的情况下重新启动 main() ？

我在上课，我可以使用的工具有限，所以只能接受最基本的代码。基本上，我正在寻找类似 goto 但更安全的东西（顺便说一下，goto 在这个类中也是禁止的）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-08T03:00:37.737

It's actually not a good idea for a C++ program to call its own `main` function. In fact, this leads to *undefined behavior*, which means that you have no guarantees about the behavior of the program. It could crash, or proceed with corrupt data, or format your hard drive, etc. (that last one is unlikely, though).

I think that this reflects a more fundamental problem with how your program works. If you want data to persist across functions, you need to place that data somewhere where it won't get clobbered by other functions. For example, you could put the data in the heap, then pass pointers to the data around. Or, you could define it as a local variable in `main`, then pass it down into functions and have those functions return when they're done. You could also consider making objects representing the data, then passing those objects across the different functions.

Without seeing your code, I doubt I can give a more specific answer than this. When designing programs, keep the data flow in mind. Think about what data needs to go where and how you're going to get it there.

Hope this helps!

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T03:02:34.073

你为什么要`main`递归调用（顺便说一句，这是标准禁止的）？只需使用循环（例如 a `do`... `while`）来重复需要重复的部分，`main`将不得重置的变量（及其初始化）保留在循环之外。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-10T09:56:24.057

该`main()`函数不应被递归调用。
您可以将游戏循环封装到一个`while()`函数中。

看看这个例子：

```
#include <iostream>
#include <string>

using namespace std;

int main()
{
    bool exitGame = false;
    // Game Loop
    while(!exitGame) {

        // Display menu
        cout << "Menu :" << endl;
        cout << "- Shuffle :  press 1" << endl;
        cout << "- Option 2 : press 2" << endl;
        cout << "- Option 3 : press 3" << endl;
        cout << "- Exit     : press 4" << endl;
        cout << "Enter your choice : ";

        // Get user input
        string choosenValue;
        cin >> choosenValue;

        cout << endl;

        // Process user input
        if (choosenValue == "1") {
            cout << "You selected 'Shuffle'." << endl;
            // Do cool stuff here !

        } else if (choosenValue == "2") {
            cout << "You selected 'Option 2'." << endl;
            // Do cool stuff here !

        } else if (choosenValue == "3") {
            cout << "You selected 'Option 3'." << endl;
            // Do cool stuff here !

        } else if (choosenValue == "4") {
            cout << "You selected 'Exit'." << endl;
            exitGame = true;

        } else {
            cout << "Wrong value." << endl;
        }
        cout << endl;
    }

    return EXIT_SUCCESS;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T03:00:29.563

Move main body to another function 'myMain' and call it insteadOf main.

# google-chrome - VB6删除浏览器缓存

> ID：14764984
> 
> 赞同：0
> 
> 时间：2013-02-08T02:57:00.617
> 
> 标签：google-chrome, firefox, caching, browser, vb6

我想用**VB6**（Visual Basic：版本 6）删除浏览器缓存（History, Cookies, Temp Dir, saved Passwords and Form Data）

如果我知道那些存储在我的电脑中的位置，我可以做到。（或命令示例：Shell "RunDll32.exe InetCpl.cpl,ClearMyTracksByProcess 255" 删除 IE 缓存）

我想知道那些地方。Firefox、Opera、Google Chrome 缓存文件存储或删除它们的命令！

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T03:38:20.360

这是 Windows XP/2000 的默认值，请注意某些路径是可修改的

火狐：

```
%AppData%\Mozilla\Firefox\Profiles\xxx 
```

以*xxx*作为随机字符串文件夹

铬合金：

```
%AppData%\Local\Google\Chrome\User Data\Default\Cache 
```

歌剧

```
%AppData%\Local\Opera\Opera\cache 
```

如果你在 Opera 中进入菜单然后帮助 -> 关于 Opera，你可以找到最后一个

希望这可以帮助

# qt - 如何在 Qt QAbstractItemModel 中设置标题数据？

> ID：14764985
> 
> 赞同：-1
> 
> 时间：2013-02-08T02:57:07.160
> 
> 标签：qt

`setHeaderData`Qt 中有一个函数`QAbstractItemModel`。是否有任何事件可以调用该函数来设置标题数据，例如 F2 键或鼠标双击？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T08:24:25.707

当然，您可以创建一个连接到“双击”信号的插槽并调用您的模型实例*setHeaderData* //如果您在自己的模型类型中覆盖了该函数，则需要发出 headerDataChanged 信号，请参见[此处](http://doc.qt.digia.com/qt/qabstractitemmodel.html#setHeaderData)

# python - 计算积分：单线解决方案？

> ID：14764990
> 
> 赞同：0
> 
> 时间：2013-02-08T02:57:21.653
> 
> 标签：python, function, integral

我正在开发一个程序来查找函数的积分，其中用户指定矩形的数量、起点和终点。

注意：我使用的是矩形的左端点。

我的功能运行良好（至少，它看起来很完美）。但是，我想看看我是否可以为它写一个单行，但不确定如何，因为我正在使用`eval()`. 这是我的原始代码：

```
def integral(function, n=1000, start=0, stop=100):
    """Returns integral of function from start to stop with 'n' rectangles"""
    increment, rectangles, x = float((stop - start)) / n, [], start
    while x <= stop:
        num = eval(function)
        rectangles.append(num)
        if x >= stop: break
        x += increment
    return increment * sum(rectangles) 
```

这工作正常：

```
>>> integral('x**2')
333833.4999999991 
```

实际答案是`1000000/3`，所以我的函数给出了一个很好的估计（仅适用于 1000 个矩形）。

我对单线的尝试：

```
def integral2(function, n=1000, start=0, stop=100): rectangles = [(float(x) / n) for x in range(start*n, (stop*n)+1)]; return (float((stop-start))/n) * sum([eval(function) for x in rectangles]) 
```

但是，这并不是真正的单行，因为我使用的是分号。此外，它有点慢（需要几秒钟的时间，这非常重要）并且给出了错误的答案：

```
>>> integral2('x**2')
33333833.334999967 
```

那么，是否可以为该功能使用单线解决方案？我不确定如何在`eval()`同`float(x)/n`一个列表理解中实现。`float(x)/n`在函数中实现了一个虚拟的“步骤” `range`。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T03:06:55.657

```
def integral2(function, n=1000, start=0, stop=100): return (float(1)/n) * sum([eval(function) for x in [(float(x) / n) for x in range(start*n, (stop*n)+1)]]) 
```

`integral`请注意，和之间有很大的区别`integral2`：`integral2`制作`(stop*n)+1-(start*n)`矩形，而`integral`只制作`n`矩形。

* * *

```
In [64]: integral('x**2')
Out[64]: 333833.4999999991
In [68]: integral2('x**2')
Out[68]: 333338.33334999956 
```

* * *

```
In [69]: %timeit integral2('x**2')
1 loops, best of 3: 704 ms per loop

In [70]: %timeit integral('x**2')
100 loops, best of 3: 7.32 ms per loop 
```

* * *

也许更可比的翻译`integral`是：

```
def integral3(function, n=1000, start=0, stop=100): return (float(stop-start)/n) * sum([eval(function) for x in [start+(i*float(stop-start)/n) for i in range(n)]])

In [77]: %timeit integral3('x**2')
100 loops, best of 3: 7.1 ms per loop 
```

* * *

当然，应该说除了（反常？）娱乐之外，没有任何目的使它成为单线：）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T03:13:29.643

如果您作为 Python本身`eval`接收，则不需要使用您也可以使用函数来生成浮点值列表`function``callable``numpy.arange`

### 案例1：`function`是一个Python`callable`

```
def integrate(f, n, start, end):
    return sum([f(i)*(abs(start-end)/float(n)) for i in np.arange(start, end, abs(start-end)/float(n))]) 
```

### 案例2：`function`不是Python`callable`

```
def integrate(f, n, start, end):
    return sum([eval(f)*(abs(start-end)/float(n)) for x in np.arange(start, end, abs(start-end)/float(n))]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-13T07:38:44.360

使用 numpy 的 linspace 作弊怎么样？

```
integrate = lambda F, n0, nf: sum([F(x)*(abs(nf-n0)/(abs(nf-n0)*300))for x in np.linspace(n0, nf, abs(nf-n0)*300)]) 
```

它接受一个函数 F、一个下界 n0 和一个上界 nf。以下是 x**2 在 0 和 5 之间的工作原理：

```
In [31]: integrate(lambda x: x**2, 0, 5)
Out[31]: 41.68056482099179 
```

它非常接近。

编辑：这是我的 linspace 一班轮。

```
linspace = lambda lo, hi, step:[lo + (hi-lo)/step*i + (hi-lo)/(step*step-1)*i for i in range(step)] 
```

有一种方法可以将它融入到一个完整的单线集成器中。我把它留给你，我的朋友。

# apache-flex - how to add a custom Tool tip to spark data Grid?

> ID：14764991
> 
> 赞同：-1
> 
> 时间：2013-02-08T02:57:37.970
> 
> 标签：apache-flex, datagrid

I want to add panel component as my tooltip for each row in my Spark DataGrid. So when mouse rollover the user can see the information for each the ship. I want a panel as my tooltip for dataGrid cause I want to organize my data neatly and also place a image in the panel.

I came across : [http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf60d65-7ff6.html](http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf60d65-7ff6.html) where they show an example of "Implementing the IToolTip interface" using the panel.I tried manipulating the codes but it didt work for my spark dataGrid.

So my question :

Can some one pls show me how I can use the Panel as my tool tip for each row in spark data grid.

I have been struggling for quite some time.If possible pls Give me an example.

This is my codes below (I tried to follow the example from : [http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf60d65-7ff6.html#WS2db454920e96a9e51e63e3d11c0bf60d65-7ff4](http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf60d65-7ff6.html#WS2db454920e96a9e51e63e3d11c0bf60d65-7ff4) -"Implementing the IToolTip interface")

```
 <fx:Script>
    <![CDATA[

        import DesignItemRenderer.PanelToolTip;
        import mx.events.ToolTipEvent;

        import mx.collections.ArrayCollection;          
        import mx.controls.Alert;   
        import spark.events.GridEvent;  

        [Bindable]
        private var myArrivalShips:ArrayCollection = new ArrayCollection([
            {arrivalShipsName:"Ship A", ETD:"12 March"},
            {arrivalShipsName:"Ship B", ETD:"25 March"}             
        ]); 

        private function createCustomTip(event:ToolTipEvent):void {
            var ptt:PanelToolTip = new PanelToolTip();
            ptt.title = "my Ship Info";
            ptt.bodyText = "my data for the ship";
            event.toolTip = ptt;
        }

    ]]>
</fx:Script>
<s:BorderContainer x="267" y="11" width="331" height="586">

    <s:DataGrid id="arrivalTable" x="10" y="326" width="302" height="205" requestedRowCount="4" dataProvider="{myArrivalShips}" toolTipCreate="createCustomTip(event)">
        <s:columns>
            <s:ArrayList>
                <s:GridColumn dataField="arrivalShipsName" headerText="Arrival Ships" ></s:GridColumn>
                <s:GridColumn dataField="ETD" headerText="ETD"></s:GridColumn>              
            </s:ArrayList>
        </s:columns>            

    </s:DataGrid>
    <s:BorderContainer x="10" y="19" width="302" height="285">
    </s:BorderContainer>

</s:BorderContainer> 
```

My Custom panel :

```
<s:Panel xmlns:fx="http://ns.adobe.com/mxml/2009" 
     xmlns:s="library://ns.adobe.com/flex/spark" 
     xmlns:mx="library://ns.adobe.com/flex/mx" width="400" height="300"
     implements="mx.core.IToolTip" >
<fx:Declarations>
    <!-- Place non-visual elements (e.g., services, value objects) here -->
</fx:Declarations>
<fx:Script>
    <![CDATA[
        [Bindable]
        public var bodyText:String = "";

        //  Implement required methods of the IToolTip interface; these 
        //  methods are not used in this example, though.
        public var _text:String;

        public function get text():String { 
            return _text; 
        } 
        public function set text(value:String):void {
        } 
    ]]>
</fx:Script>
<s:RichText text="{bodyText}" percentWidth="100"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T07:25:58.913

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" 
               minWidth="955" minHeight="600">
    <fx:Script>
        <![CDATA[
            import mx.collections.ArrayCollection;
            import mx.controls.Alert;

            import spark.components.Grid;

            [Bindable]private var collection:ArrayCollection = new ArrayCollection([
                {field01:"field01", content:"your content", field02:"field02"},
                {field01:"field01", content:"your content your content your content your content", field02:"field02"},
                {field01:"field01", content:"your content your content your content your content", field02:"field02"}
            ]);

        ]]>
    </fx:Script>
    <fx:Script>
        <![CDATA[       
            import mx.collections.ArrayCollection;          
            import mx.controls.Alert;   
            import spark.events.GridEvent;          
            import spark.components.Image;

            [Bindable]
            private var myArrivalShips:ArrayCollection = new ArrayCollection([
                {arrivalShipsName:"Ship A", ETD:"12 March"},
                {arrivalShipsName:"Ship B", ETD:"25 March"}             
            ]); 

            private function buildToolTip(item:Object,column:GridColumn):String{
                var myString:String = "";
                var myString:String = "";
                if(column.columnIndex==0){
                    myString=myString+"Arrival Ships";
                }
                else if(column.columnIndex==1){
                    myString=myString+"ETD";
                }
                return myString;
            }

        ]]>
    </fx:Script>
    <s:BorderContainer x="267" y="11" width="331" height="586">

        <s:DataGrid id="arrivalTable" x="10" y="326" width="302" height="205" requestedRowCount="4" dataProvider="{myArrivalShips}" showDataTips="true" dataTipFunction="buildToolTip">
            <s:columns>
                <s:ArrayList>
                    <s:GridColumn dataField="arrivalShipsName" headerText="Arrival Ships"></s:GridColumn>
                    <s:GridColumn dataField="ETD" headerText="ETD"></s:GridColumn>              
                </s:ArrayList>
            </s:columns>            

        </s:DataGrid>
        <s:BorderContainer x="10" y="19" width="302" height="285">
        </s:BorderContainer>

    </s:BorderContainer>

</s:Application> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T13:53:54.517

简单的方法 - 当应用程序准备好时，使用：

```
ToolTipManager.toolTipClass = PanelToolTip; 
```

和重构代码。

# ios - asynchronous sounds in iphone app

> ID：14764994
> 
> 赞同：1
> 
> 时间：2013-02-08T02:58:10.933
> 
> 标签：ios, objective-c, cocoa-touch

I use the following code to play the sounds in my app, but the problem is that it slows down the app. How can I make the sounds happen asynchronously without slowing down the actions?

```
SystemSoundID soundID;
NSString *soundFile = [[NSBundle mainBundle] pathForResource: _sound ofType:@ "wav"];
AudioServicesCreateSystemSoundID((__bridge CFURLRef) [NSURL fileURLWithPath:soundFile], &soundID);
AudioServicesPlaySystemSound(soundID); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T03:14:46.757

在应用程序初始化期间执行 AudioServicesCreateSystemSoundID，或者在用户可以预期/接受一点延迟的某个时间点提前执行。它可以在后台执行，但在完成之前无法播放声音。

[AudioServicesPlaySystemSound 已经是异步的。](http://developer.apple.com/library/mac/#documentation/AudioToolbox/Reference/SystemSoundServicesReference/Reference/reference.html)

换句话说，为了演示如何尽早进行init，appDidFinishLaunching是最早的机会。使用公共属性将您的声音提供给应用程序的其他部分...

```
// AppDelegate.h, add this inside the @interface
@property (strong, nonatomic) NSArray *sounds;

// AppDelegate.m
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {

    NSMutableArray *tempSounds = [NSMutableArray array];

    SystemSoundID soundID0;
    // you need to initialize _sound0, _sound1, etc. as your resource names
    NSString *soundFile0 = [[NSBundle mainBundle] pathForResource: _sound0 ofType:@ "wav"];
    AudioServicesCreateSystemSoundID((__bridge CFURLRef) [NSURL fileURLWithPath:soundFile0], &soundID0);

    [tempSounds addObject:[NSNumber numberWithInt:soundID0]];

    SystemSoundID soundID1;
    NSString *soundFile1 = [[NSBundle mainBundle] pathForResource: _sound1 ofType:@ "wav"];
    AudioServicesCreateSystemSoundID((__bridge CFURLRef) [NSURL fileURLWithPath:soundFile1], &soundID1);

    // SystemSoundID is an int type, so we wrap it in an NSNumber to keep in the array
    [tempSounds addObject:[NSNumber numberWithInt:soundID1]];

    self.sounds = [NSArray arrayWithArray:tempSounds];

    // do anything else you do for app init here

    return YES;
} 
```

然后在 SomeViewController.m ...

```
#import "AppDelegate.h"

// when you want to play a sound (the first one at index 0 in this e.g.)
NSArray *sounds = ((AppDelegate *)[[UIApplication sharedApplication] delegate]).sounds;

AudioServicesPlaySystemSound([sounds[0] intValue]); 
```

# php - Select statement for 3 tables

> ID：14764997
> 
> 赞同：0
> 
> 时间：2013-02-08T02:59:12.917
> 
> 标签：php, sql-server, select, join

So i have a php program in which i should be able to print the variable

table 1
dbo.FA_PC(table name)
FAID(PK)
PCID (FK)
UserID(FK)

table 2
dbo.users(table name)
UserID(PK)
BranchID(FK)
Employeename

table 3 dbo.Branch(table name)
BranchID(PK)
Branchname

```
<?php
$faid=$_POST['faid'];
ini_set("display_errors","on");
$conn = new COM("ADODB.Connection");
   try {
   $myServer = "WTCPHFILESRV\WTCPHINV";
   $myUser = "sa";
   $myPass = "P@ssw0rd";
   $myDB = "wtcphitinventory";   
   $connStr = "PROVIDER=SQLOLEDB;SERVER=".$myServer.";UID=".$myUser.";PWD=".$myPass.";DATABASE=".$myDB;
   $conn->open($connStr); 
         if (! $conn) {
            throw new Exception("Could not connect!");
        }
   }

   catch (Exception $e) {
      echo "Error (File:): ".$e->getMessage()."<br>";
   }
if (!$conn)
  {exit("Connection Failed: " . $conn);}
  echo "<center>";
   echo "<table border='0' width ='100%' style='margin-left:90px'><tr><th></th><th></th></tr>";
   $sql_exp = "select * from dbo.users inner join dbo.FA_PC on dbo.userd.UserID = dbo.FA_PC.UseriD WHERE FAID = $faidf";    
   $rs = $conn->Execute($sql_exp);  

    echo "<tr><td>PC Number:".$rs->Fields("Employeename")."</td>";
?> 
```

what i want to do is when FAID is selected is could post the Branchname of the FAID selected

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T03:01:52.860

```
SELECT  a.*, b.*, c.*  // select columns you want
FROM    users a
        INNER JOIN FA_PC b
            ON a.userID = b.UserID
        INNER JOIN Branch c
            ON a.BranchID = c.BranchID
WHERE   b.FAID = 'valueHere' 
```

To fully gain knowledge about joins, kindly visit the link below:

*   [Visual Representation of SQL Joins](http://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins)