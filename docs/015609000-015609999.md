# StackOverflow 问答 15609000-15609999

# php - 如何在 Zend Framework 2 中的数据库中保留模块列表？

> ID：15609002
> 
> 赞同：0
> 
> 时间：2013-03-25T06:36:01.947
> 
> 标签：php, zend-framework2

我不想把它保存在配置文件中

```
return array(
    'modules' => array(
        'Application',
        'ZfcUser',
        'ZfcBase',
        ...
    ),        
); 
```

如何将模块列表从数据库加载到 zf2？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T08:40:54.337

最好的方法是：编写一个名为 YourModuleManager 的模块，让它用几个控制器管理模块，然后按照 sam 在上一个答案中所说的操作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T06:48:38.373

你没有。如果您需要从管理面板管理模块，我认为最好的方法是将模块阵列移动到它自己的文件中，例如：

**应用程序.config.php**

```
<?php
return array(
    'modules' => require_once __DIR__ . 'application.modules.php',
    // rest of application.config.php
) 
```

**应用程序.modules.php**

```
<?php
return array(
    'Application',
    'ZfcBase',
    'ZfcUser',
    // more...
); 
```

然后，您可以使用此文件并向其编写管理前端。该文件显然是可写的。请记住，在模块初始化时，框架还不知道数据库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-02T10:58:52.927

示例：通过用户 id 查找，当 auth/login/etc 时。论教义

```
$moduleRepository = $em->getRepository("your module\Entity\your class, where get all name module etc.");
$module = $moduleRepository->findOneByUser($user->getId());
$moduleName = $module->getName();
global $modules;
$modules[] = $moduleName; 
```

// ... // 并添加重新加载功能...

# java - Android - 计算电源按钮的点击次数和开始活动

> ID：15609008
> 
> 赞同：1
> 
> 时间：2013-03-25T06:36:22.317
> 
> 标签：java, android, android-button

我使用了下面的代码，但没有找到解决方案。

**MyReceiver.java：**

```
 import android.content.BroadcastReceiver;
    import android.content.Context;
    import android.content.Intent;
    import android.util.Log;
    import android.widget.Toast;

    public class MyReceiver extends BroadcastReceiver {
    @Override
    public void onReceive(Context context, Intent intent) {

     Log.v("onReceive", "Power button is pressed.");

     Toast.makeText(context, "power button clicked", Toast.LENGTH_LONG)
             .show();
    }

} 
```

和**MainActivity.java：**

```
 import android.os.Bundle;
    import android.app.Activity;
    import android.view.Menu;

    public class MainActivity extends Activity {

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);
        }

        @Override
        public boolean onCreateOptionsMenu(Menu menu) {
            getMenuInflater().inflate(R.menu.activity_main, menu);
            return true;
        }
    } 
```

和**AndroidManifest.xml：**

```
 <application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <receiver android:name=".MyReceiver">
    <intent-filter>
        <action android:name="android.intent.action.SCREEN_OFF"></action>
        <action android:name="android.intent.action.SCREEN_ON"></action>
        <action android:name="android.intent.action.ACTION_POWER_CONNECTED"></action>
        <action android:name="android.intent.action.ACTION_POWER_DISCONNECTED"></action>
         <action android:name="android.intent.action.ACTION_SHUTDOWN"></action>
    </intent-filter>
</receiver>
</application> 
```

但我没有在点击时收到任何 Toast 消息`Power Button`。请帮助我了解如何获得`PowerButton`点击次数，如果点击次数等于 5，则移动到另一个`actvity`。请帮我实现这个？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-25T09:35:21.537

尝试这个，

```
public class MyReceiver extends BroadcastReceiver {
    static int countPowerOff=0;
    private Activity activity=null;
    public MyReceiver (Activity activity)
    {
    this.activity=activity;
    }
    @Override
    public void onReceive(Context context, Intent intent) {

      Log.v("onReceive", "Power button is pressed.");

      Toast.makeText(context, "power button clicked", Toast.LENGTH_LONG)
             .show();

     if (intent.getAction().equals(Intent.ACTION_SCREEN_OFF)) 
{
    countPowerOff++;    
} 
else if (intent.getAction().equals(Intent.ACTION_SCREEN_ON)) 
{
      if(countPowerOff==5)
      {
          Intent i =new Intent(activity,NewActivity.class);
          activity.startActivity(i);
       }
    }

} 
```

和，

```
public class MainActivity extends Activity {

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);
            IntentFilter filter = new IntentFilter(Intent.ACTION_SCREEN_ON);
            filter.addAction(Intent.ACTION_SCREEN_OFF);
            MyReceiver mReceiver = new MyReceiver (this);
            registerReceiver(mReceiver, filter);
        }

        @Override
        public boolean onCreateOptionsMenu(Menu menu) {
            getMenuInflater().inflate(R.menu.activity_main, menu);
            return true;
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T08:54:27.093

试试这个来获取电源按钮事件

```
 @Override

 public boolean dispatchKeyEvent(KeyEvent event) {
if (event.getKeyCode() == KeyEvent.KEYCODE_POWER) {

    return true;
}

return super.dispatchKeyEvent(event);
 } 
```

# javascript - 使用javascript在html表中的日期时间和字母顺序排序

> ID：15609012
> 
> 赞同：2
> 
> 时间：2013-03-25T06:36:31.380
> 
> 标签：javascript, jquery, html

嗨，我是网页开发人员的新手，我需要在单击表格标题时按日期和字母对表格进行排序

![在此处输入图像描述](../Images/77a5c4604edb1a0e851e0e46f5ec316f.png)

这是我的表....表中的数据是使用 ajax 动态生成的....

我的需要是

*   单击日期标题时，它应该根据日期排序
*   单击通知标题时，应按字母排序

请对此提出一些想法或建议.......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T09:47:55.397

我使用 jQuery 库做了示例，并将其添加到[http://jsfiddle.net/bURg4/2/](http://jsfiddle.net/bURg4/2/)

jQuery 选择器返回的是数组对象，它具有原生数组`sort`函数。

```
$('table tbody tr').sort( function( a , b ) {

     // do compare here
}); 
```

希望这会有所帮助..

将以下代码复制并粘贴到文件中..将其重命名为`test.html`

```
<html>
    <head>
       <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

    </head>
    <body>
        <table border="1">
            <thead>
                <tr>
                    <th data-key="id" data-column="0" data-order="asc">id</th>
                    <th data-key="date" data-column="1" data-order="asc">date</th>
                    <th data-key="notify" data-column="2" data-order="asc">notify</th>

                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>1</td>
                    <td>31-03-2013 06:12:57 PM</td>
                    <td>gold</td>
                </tr>
                <tr>
                    <td>2</td>
                    <td>31-03-2013 06:14:57 PM</td>
                    <td>diamond</td>
                </tr>
                <tr>
                    <td>3</td>
                    <td>31-03-2013 06:10:57 PM</td>
                    <td>silver</td>
                </tr>
            </tbody>
        </table>    
        <script type="text/javascript">

            function getDate( str ) {

                var ar =  /(\d{2})-(\d{2})-(\d{4}) (\d{2}):(\d{2}):(\d{2}) ([AM|PM]+)/ 
                     .exec( str ) 

                return new Date(
                    (+ar[3]),
                    (+ar[2])-1, // Careful, month starts at 0!
                    (+ar[1]),
                    (+ar[4])+ ( ar[7]=='PM'? 12 :0 ),
                    (+ar[5]),
                    (+ar[6])
                );
            };

            $( function(){

                var sorter = {

                    order   : [1,-1],
                    column  : 0 ,
                    key     :'id' ,

                    setOrder : function( k ){

                        this.order  = ({ 
                            asc :[1,-1], desc:[-1,1] 
                        })[k] || this.order ;

                        return this;
                    },
                    setColumn : function( c ){

                        this.column  = c || this.column ;
                        return this;
                    },

                    setKey : function( k ) {
                        this.key  = k || this.key;
                        return this;
                    },

                    sort : function( els ) {

                        var sortFunc = this.key;

                        return els.sort( this[ sortFunc ]);        
                    },

                    getValue : function( a, b ){

                        return {
                            a : $(a).find('td:eq('+ sorter.column +')').text(),
                            b : $(b).find('td:eq('+ sorter.column+')').text()
                        }
                    },
                    comp : function( val ) {

                            if ( val.a == val.b ) {
                                return 0;
                            }

                            return  val.a > val.b ? 
                                    sorter.order[0]:sorter.order[1] ; 

                    },
                    id : function( a , b ){

                            var val = sorter.getValue(a,b);

                            val.a = parseInt( val.a , 10 );
                            val.b = parseInt( val.b , 10 );

                            return sorter.comp( val );        

                    },

                    notify : function( a , b ){

                            var val = sorter.getValue(a,b);
                            return sorter.comp( val );           

                    },
                    date : function( a , b ){

                            var val = sorter.getValue(a,b);

                            val.a = getDate( val.a );
                            val.b = getDate( val.b );

                            return sorter.comp( val ); 

                    }
                }

                $('table thead').on('click', 'th', function(){

                        var sorted = sorter.setOrder( $(this).attr('data-order') )
                                           .setColumn( $(this).attr('data-column') )
                                           .setKey( $(this).attr('data-key') )
                                           .sort(  $('table tbody tr') );

                        $('table tbody').empty().append( sorted );  

                        $('table thead th').not( this )
                                           .attr('data-order' ,'asc');

                        $(this).attr(
                            'data-order',  
                            ( $(this).attr('data-order') == 'asc' ? 'desc' :'asc') 
                        );

                });
            });
        </script>

    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T06:39:02.080

我会使用一个小的 jquery 插件。

我已经尝试过[http://www.datatables.net/](http://www.datatables.net/)但认为它对于我的需要来说太大了，比你的要大一点，所以我建议[http://tablesorter.com/docs/](http://tablesorter.com/docs/)非常适合你的规范。

你会在他们的网站上找到演示。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-25T06:41:38.870

将相应的值存储在数组中并进行排序

要按日期对数组进行排序，请使用此

```
array.sort(function(a,b){
var c = new Date(a.date);
var d = new Date(b.date);
return c-d;
}); 
```

要按字母对数组进行排序，请使用基本的[sort()](http://www.w3schools.com/jsref/jsref_sort.asp)函数

用于排序日期和时间的[现场演示](http://jsfiddle.net/Bhwxr/1/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-25T06:46:18.757

```
function sortAsc(a, b) {
    var aSort = a.Text.toLowerCase(), //Text is the field on which we make sort
        bSort = b.Text.toLowerCase();
    if (aSort === bSort) return 0;
    return aSort < bSort ? 1 : -1;
}
function sortDesc(a, b) {
    var aSort = a.Text.toLowerCase(), //Text is the field on which we make sort
        bSort = b.Text.toLowerCase();
    if (aSort === bSort) return 0;
    return aSort > bSort ? 1 : -1;
} 
```

我使用这两种方法对 Json Obejct 进行排序

称他们为 `[jsonObject].sort(sortDesc) or [jsonObject].sort(sortAsc)`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-25T06:46:33.680

您可以以递增方式为日期列提供 id，即第 1 行 col1 将是 date_1，然后 row2 和 col1 将是 date_2，就像这样，将其应用于两列（notify_1，notify_2，...）。在表单上有一个隐藏字段，包含行数。在此基础上，您可以对其应用一个循环，然后可以在 td 的内部 html 上使用任何排序算法。

# algorithm - 如何枚举暴力算法的所有可能性？

> ID：15609016
> 
> 赞同：0
> 
> 时间：2013-03-25T06:36:55.470
> 
> 标签：algorithm, brute-force

这个问题可能没有具体说明，但我认为它非常重要。当您想解决优化问题并且您对方法不是很熟悉时`dynamic programming`，这是您想到的第一个想法。

我可以举一些简单的例子：

*   获取列表的最小元素（非常简单）
*   列出一个集合的所有排列
*   列出集合的所有子集

这些问题都有成熟的方法。但是有问题不是很清楚：

*   列出所有`edit distance`两个字符串（我的意思不是最短的编辑操作）
*   列出所有`common subsequence`两个序列
*   列出括号的所有可能性`matrix chain multiplication`

我不知道用蛮力方法解决这些问题。我的问题是：

是否有一种系统的通用方法来列出所有使用蛮力算法的可能性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T07:28:35.630

*[回溯](http://en.wikipedia.org/wiki/Backtracking)*是寻找问题所有解决方案的最通用方法之一。根据维基百科，

> 回溯是一种通用算法，用于找到某个计算问题的所有（或部分）解决方案，它逐步构建解决方案的候选者，并在确定 c 不可能完成时放弃每个部分候选者 c（“回溯”）有效的解决方案。
> 
> 使用回溯的经典教科书示例是八皇后谜题，它要求在标准棋盘上所有八皇后的排列，以便没有皇后攻击任何其他。

您提到的两个问题，
• 列出两个序列的所有公共子序列
• 列出括号矩阵链乘法的所有可能性，
可以使用回溯轻松处理。我不确定编辑距离问题。

# jquery - Twitter Bootstrap Collapse 未正确切换

> ID：15609018
> 
> 赞同：1
> 
> 时间：2013-03-25T06:37:12.957
> 
> 标签：jquery, twitter-bootstrap

我有以下代码：

```
<div id="container-collapse">
    <div class="row">
         <button type="button" class="span4 btn" data-toggle="collapse" data-target="#demo1" data-parent="container-collapse">Button1</button>
         <button type="button" class="span4 btn btn-danger" data-toggle="collapse" data-target="#demo2" data-parent="container-collapse">Button2</button>
    </div>
    <div class="row">
          <div id="demo1" class="collapse">Foo Bar</div>
          <div id="demo2" class="collapse">Herp Derp</div>
    </div>
</div> 
```

我一辈子都无法让这些折叠元素切换，这样当一个打开另一个关闭时。相反，如果您单击一个按钮然后单击另一个按钮，则两个折叠元素都保持打开状态。我认为拥有 data-parent 元素会有所帮助，但没有......我很感激任何指针。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T07:40:27.030

你所描述的你想要的在 Twitter.Bootstrap 中被称为[“折叠”或“手风琴” 。](http://twitter.github.com/bootstrap/javascript.html#collapse)请参阅将此与您的解决方案进行比较的[jsFiddle](http://jsfiddle.net/serra/fkPyc/)。手风琴的代码：

```
<div class="accordion" id="accordion2">
    <div class="accordion-group">
        <div class="accordion-heading">
<a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseOne">
Show Foo Bar
</a>

        </div>
        <div id="collapseOne" class="accordion-body collapse in">
            <div class="accordion-inner">Foo Bar</div>
        </div>
    </div>
    <div class="accordion-group">
        <div class="accordion-heading">
           <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseTwo">Show Herp Derp</a>

        </div>
        <div id="collapseTwo" class="accordion-body collapse">
            <div class="accordion-inner">Herp Derp</div>
        </div>
    </div>
</div> 
```

要在一行中使用两个按钮：

```
<div class="accordion" id="accordion2">
    <div class="accordion-group">
        <div >
            <a class="accordion-toggle btn" data-toggle="collapse" data-parent="#accordion2" href="#collapseOne"> Show Foo Bar</a> 
            <a class="accordion-toggle btn" data-toggle="collapse" data-parent="#accordion2" href="#collapseTwo">Show Herp Derp</a>
        </div>
        <div id="collapseOne" class="accordion-body collapse in">
            <div class="accordion-inner">Foo Bar</div>
        </div>
    </div>
    <div class="accordion-group">
        <div id="collapseTwo" class="accordion-body collapse">
            <div class="accordion-inner">Herp Derp</div>
        </div>
    </div>
</div> 
```

# php - 使用 php excel 将徽标添加到 excel 工作表

> ID：15609019
> 
> 赞同：6
> 
> 时间：2013-03-25T06:37:15.177
> 
> 标签：php, codeigniter, phpexcel

我正在尝试使用下面的代码清单在生成的 Excel 工作表上添加徽标图像，但由于某种原因它什么也没做

```
 $objReader = PHPExcel_IOFactory::createReader('Excel2007');
    $objPHPExcel = $objReader->load("workbooks/" . $labref . "/" . $labref . ".xlsx");
    $objPHPExcel->getActiveSheet(2);
    $objWorkSheet = $objPHPExcel->createSheet();
    $objWorkSheet->setTitle("Sample Summary");        
    $dir1 = "exclusive_image";

       $objDrawing = new PHPExcel_Worksheet_Drawing();
                $objDrawing->setName("name");
                $objDrawing->setDescription("Description");
                $objDrawing->setPath(base_url().'exclusive_image/nqcl.png');
                $objDrawing->setCoordinates('A1');
                $objDrawing->setWorksheet($objWorkSheet->getActiveSheet(2));
        $objWriter = new PHPExcel_Writer_Excel2007($objPHPExcel);
        $objWriter->save("workbooks/" . $labref . "/" . $labref . ".xlsx"); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-25T07:50:11.083

添加徽标非常简单，请尝试以下代码。

```
$objPHPExcel = new PHPExcel();
$sheet = $objPHPExcel->setSheetIndexAndTitle(1, "YOUR_SHEET_TITLE"); // first sheet
$objDrawing = new PHPExcel_Worksheet_Drawing();
$objDrawing->setName('Logo');
$objDrawing->setDescription('Logo');
$logo = base_path() . '/images/logo.png'; // Provide path to your logo file
$objDrawing->setPath($logo);
$objDrawing->setOffsetX(8);    // setOffsetX works properly
$objDrawing->setOffsetY(300);  //setOffsetY has no effect
$objDrawing->setCoordinates('B1');
$objDrawing->setHeight(75); // logo height
$objDrawing->setWorksheet($sheet); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-01-12T15:41:39.383

利用：

```
<?php
include 'DB.php';

error_reporting(E_ALL);

ini_set('include_path', ini_get('include_path').';../Classes/');
include 'PHPExcel.php';
include 'PHPExcel/Writer/Excel2007.php';

$excel = new PHPExcel();
header('Content-Type: application/vnd.ms-excel');
header('Content-Disposition: attachment;filename="your_name.xls"');
header('Cache-Control: max-age=0');

$excel->setActiveSheetIndex(0)
        ->setCellValue('A1', 'Hello')
        ->setCellValue('B2', 'world!')
        ->setCellValue('C1', 'Hello')
        ->setCellValue('D2', 'world!');

$objDrawing = new PHPExcel_Worksheet_Drawing();
$objDrawing->setName('Logo');
$objDrawing->setDescription('Logo');
$logo = 'images/logo.png'; // Provide path to your logo file
$objDrawing->setPath($logo);  //setOffsetY has no effect
$objDrawing->setCoordinates('E1');
$objDrawing->setHeight(200); // logo height
$objDrawing->setWorksheet($excel->getActiveSheet()); 

// Do your stuff here

writer = PHPExcel_IOFactory::createWriter($excel, 'Excel5');

// This line will force the file to download
$writer->save('php://output'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T07:37:05.397

尝试，

```
public function rep()
    {       
        //$this->load->library('phpexcel'); 
        $this->load->library('PHPExcel/IOFactory');
        $objPHPExcel = new PHPExcel();

        // Set document properties
        $objPHPExcel->getProperties()->setCreator("Maarten Balliauw")
                                ->setLastModifiedBy("dev@Eri")
                                ->setTitle("Laporan Barang")
                                ->setSubject("Laporan Barang")
                                ->setDescription("report using PHPEXCEL.")
                                ->setKeywords("office 2007 openxml php")
                                ->setCategory("Test result file");

        // Create the worksheet
        $objPHPExcel->setActiveSheetIndex(0);

        //DATA
        $data = array(array('kode'=>'B001',
                        'Barang'=>'Dunhill',
                        'Kategori'=>'Rokok'),
                  array('kode'=>'B002',
                        'Barang'=>'Marlboro',
                        'Kategori'=>'Rokok'),
                  array('kode'=>'B003',
                        'Barang'=>'Pepsodent',
                        'Kategori'=>'Pasta Gigi'),
                  array('kode'=>'B004',
                        'Barang'=>'Gillete Goal',
                        'Kategori'=>'Pisau Cukur'));

        ################################## HEADER TABLE #################################
        $objPHPExcel->getActiveSheet()->setCellValue('A6', "Kode Barang")
                                ->setCellValue('B6', "Barang")
                                ->setCellValue('C6', "Kategori"); 
        ################################## /HEADER TABLE ################################

        $nox=count($data)+6;

        ############################### ROW VALUE TABLE ##############################
        $objPHPExcel->getActiveSheet()->fromArray($data, NULL, 'A7');
        ############################### /ROW VALUE TABLE #############################

        // Set page orientation and size
        $objPHPExcel->getActiveSheet()->getPageSetup()->setOrientation(PHPExcel_Worksheet_PageSetup::ORIENTATION_LANDSCAPE);
        $objPHPExcel->getActiveSheet()->getPageSetup()->setPaperSize(PHPExcel_Worksheet_PageSetup::PAPERSIZE_LEGAL);
        $objPHPExcel->getActiveSheet()->getPageMargins()->setTop(0.75);
        $objPHPExcel->getActiveSheet()->getPageMargins()->setRight(0.75);
        $objPHPExcel->getActiveSheet()->getPageMargins()->setLeft(0.75);
        $objPHPExcel->getActiveSheet()->getPageMargins()->setBottom(0.75);
        $objPHPExcel->getActiveSheet()->getHeaderFooter()->setOddFooter('&L&B' . $objPHPExcel->getProperties()->getTitle() . '&RPage &P of &N');

        // Set title row bold;
        $objPHPExcel->getActiveSheet()->getStyle('A6:C6')->getFont()->setBold(true);
        // Set fills
        $objPHPExcel->getActiveSheet()->getStyle('A6:C6')->getFill()->setFillType(PHPExcel_Style_Fill::FILL_SOLID);
        $objPHPExcel->getActiveSheet()->getStyle('A6:C6')->getFill()->getStartColor()->setARGB('FF808080');

        $objPHPExcel->getActiveSheet()->getColumnDimension('A')->setAutoSize(true);
        $objPHPExcel->getActiveSheet()->getColumnDimension('B')->setAutoSize(true);
        $objPHPExcel->getActiveSheet()->getColumnDimension('C')->setAutoSize(true);

         // Set autofilter
        // Always include the complete filter range!
         // Excel does support setting only the caption
         // row, but that's not a best practise...
        $objPHPExcel->getActiveSheet()->setAutoFilter($objPHPExcel->getActiveSheet()->calculateWorksheetDimension());

        // Set active sheet index to the first sheet, so Excel opens this as the first sheet
        $objPHPExcel->setActiveSheetIndex(0);

        $sharedStyle1 = new PHPExcel_Style();
        $sharedStyle2 = new PHPExcel_Style();

        $sharedStyle1->applyFromArray(
        array('borders' => array('bottom'   => array('style' => PHPExcel_Style_Border::BORDER_THIN),
                             'top'      => array('style' => PHPExcel_Style_Border::BORDER_THIN),
                             'right'    => array('style' => PHPExcel_Style_Border::BORDER_MEDIUM),
                             'left'     => array('style' => PHPExcel_Style_Border::BORDER_MEDIUM) ),
                            )
        );

        $objPHPExcel->getActiveSheet()->setSharedStyle($sharedStyle1, "A6:C$nox");

        // Set style for header row using alternative method
        $objPHPExcel->getActiveSheet()->getStyle('A6:C6')->applyFromArray(
             array( 'font'      => array('bold' => true),
                    'alignment' => array('horizontal' => PHPExcel_Style_Alignment::HORIZONTAL_LEFT),
                    'borders'   => array('top' => array('style' => PHPExcel_Style_Border::BORDER_THIN)),
                    'fill'      => array('type'         => PHPExcel_Style_Fill::FILL_GRADIENT_LINEAR, 
                                         'rotation'     => 90, 
                                         'startcolor'   => array('argb' => 'FFA0A0A0'),
                                                                 'endcolor'     => array('argb' => 'FFFFFFFF') )
                    ) );

        // Add a drawing to the worksheet
        $objDrawing = new PHPExcel_Worksheet_Drawing();
        $objDrawing->setName('Logo');
        $objDrawing->setDescription('Logo');
        $objDrawing->setPath('./assets/images/photo.jpg');

        $objDrawing->setCoordinates('A2');
        $objDrawing->setHeight(50);
        $objDrawing->setWidth(50);
        $objDrawing->setWorksheet($objPHPExcel->getActiveSheet());

        ############################# HEADER TABLE #######################################
        $objPHPExcel->getActiveSheet()->getStyle('A6:C1000')->getFont()->setName('Arial');
        $objPHPExcel->getActiveSheet()->getStyle('A6:C1000')->getFont()->setSize(12);
        ############################# /HEADER TABLE ######################################

        // Merge cells
        ############################# PAGE TITLE #########################################
        $objPHPExcel->getActiveSheet()->mergeCells('A2:C2');
        $objPHPExcel->getActiveSheet()->setCellValue('A2', "Compeni");
        $objPHPExcel->getActiveSheet()->getStyle('A2:C2')->getFont()->setName('Arial');
        $objPHPExcel->getActiveSheet()->getStyle('A2:C2')->getFont()->setSize(18);
        $objPHPExcel->getActiveSheet()->getStyle('A2')->getFont()->setSize(22);
        $objPHPExcel->getActiveSheet()->getStyle('A2:C2')->getFont()->setBold(true);
        $objPHPExcel->getActiveSheet()->getStyle('A2:C2')->getAlignment()->setHorizontal(PHPExcel_Style_Alignment::HORIZONTAL_CENTER);
        ############################# /PAGE TITLE ########################################

        ############################# SUB PAGE TITLE #####################################
        $objPHPExcel->getActiveSheet()->mergeCells('A3:C3');
        $objPHPExcel->getActiveSheet()->setCellValue('A3',"Laporan Barang");
        $objPHPExcel->getActiveSheet()->getStyle('A3:C3')->getFont()->setName('Verdana');
        $objPHPExcel->getActiveSheet()->getStyle('A3:C3')->getFont()->setSize(14);
        $objPHPExcel->getActiveSheet()->getStyle('A3:C3')->getFont()->setBold(true);
        $objPHPExcel->getActiveSheet()->getStyle('A3:C3')->getAlignment()->setHorizontal(PHPExcel_Style_Alignment::HORIZONTAL_CENTER);
        ############################# /SUB PAGE TITLE ####################################

        ############################# DETAIL PAGE REPORT #####################################
        $objPHPExcel->getActiveSheet()->mergeCells('A4:C4');
        $objPHPExcel->getActiveSheet()->setCellValue('A4',"Per ".date("d-F-Y")."");
        $objPHPExcel->getActiveSheet()->getStyle('A4:C4')->getFont()->setName('Verdana');
        $objPHPExcel->getActiveSheet()->getStyle('A4:C4')->getFont()->setSize(12);
        $objPHPExcel->getActiveSheet()->getStyle('A4:C4')->getFont()->setBold(true);
        $objPHPExcel->getActiveSheet()->getStyle('A4:C4')->getAlignment()->setHorizontal(PHPExcel_Style_Alignment::HORIZONTAL_CENTER);
        ############################# /DETAIL PAGE REPORT ####################################

        // Redirect output to a client's web browser (Excel2007)
        header('Content-Type: application/vnd.openxmlformats-officedocument.spreadsheetml.sheet');
        header('Content-Disposition: attachment;filename="test"'.date("d-F-Y").'".xlsx"');
        header('Cache-Control: max-age=0');

        $objWriter = IOFactory::createWriter($objPHPExcel, 'Excel2007');
        $objWriter->save('php://output');
        $this->load->view('test');
        exit;

    } 
```

# c# - 如何使用 c# 中的 url 将数据重定向到特定页面？

> ID：15609023
> 
> 赞同：0
> 
> 时间：2013-03-25T06:37:17.843
> 
> 标签：c#, redirect, get

我现在正在处理 jQuery 文件上传，我正在保存图像，一旦保存了一些我需要发布到我的页面的数据

这里我有两个应用程序（两个独立的应用程序）html.page 我将图像发布到 mvc 上传控制器并且我已经完全保存了图像成功

现在要获取我需要通过 url 重定向的响应数据，所以我像这样重定向

```
 public void ReturnResult(string jsonObj)
       {

           var hostName = " http://localhost:8988/cors/postmessage.html?MyURL=";
           var s = jsonObj;
           var filterUrl = hostName + s;
           HttpContext.Current.Response.Redirect(filterUrl);

       } 
```

一旦重定向到这个页面，我怎么能得到这些数据？

而且我不知道这是否重定向数据

这是我的

重定向到这个页面

```
 <!DOCTYPE HTML>

<html lang="en">
<head>
<meta charset="utf-8">
<title>jQuery File Upload Plugin postMessage API</title>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
</head>
<body>
<script>

    'use strict';

    var origin = /^http:\/\/example.org/,
//var origin = 'http://localhost:4071/Upload/UploadHandler.ashx',
    target = new RegExp('^(http(s)?:)?\\/\\/' + location.host + '\\/');
    alert(1);
    alert(origin);
$(window).on('message', function (e) {
    e = e.originalEvent;
    var s = e.data,
        xhr = $.ajaxSettings.xhr(),
        f;
    if (!origin.test(e.origin)) {
        throw new Error('Origin "' + e.origin + '" does not match ' + origin);
    }
    if (!target.test(e.data.url)) {
        throw new Error('Target "' + e.data.url + '" does not match ' + target);
    }
    $(xhr.upload).on('progress', function (ev) {
        ev = ev.originalEvent;
        e.source.postMessage({
            id: s.id,
            type: ev.type,
            timeStamp: ev.timeStamp,
            lengthComputable: ev.lengthComputable,
            loaded: ev.loaded,
            total: ev.total
        }, e.origin);
    });
    s.xhr = function () {
        return xhr;
    };
    if (!(s.data instanceof Blob)) {
        f = new FormData();
        $.each(s.data, function (i, v) {
            f.append(v.name, v.value);
        });
        s.data = f;
    }
    $.ajax(s).always(function (result, statusText, jqXHR) {
        if (!jqXHR.done) {
            jqXHR = result;
            result = null;
        }
        e.source.postMessage({
            id: s.id,
            status: jqXHR.status,
            statusText: statusText,
            result: result,
            headers: jqXHR.getAllResponseHeaders()
        }, e.origin);
    });
});
</script>
</body>
</html> 
```

任何帮助将不胜感激提前感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T06:47:39.647

如果您需要从 HTML 页面中控制器返回的查询字符串中获取数据，则可以使用此函数。

```
function getUrlVars() {
                var vars = [], hash;
                var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
                for (var i = 0; i < hashes.length; i++) {
                    hash = hashes[i].split('=');
                    vars.push(hash[0]);
                    vars[hash[0]] = hash[1];
                }
                return vars;
            } 
```

您可以在页面加载时获取值，例如：

```
var MyURL= getUrlVars()['MyURL']; 
```

# c# - 我们需要通过从其他组合框中选择值来向组合框添加值

> ID：15609025
> 
> 赞同：0
> 
> 时间：2013-03-25T06:37:32.073
> 
> 标签：c#, sql, winforms, combobox

我们需要通过从另一个组合框中选择值来将值添加到组合框。它没有按应有的方式选择值。只有第一个 if 部分执行。这是代码：它对我们不起作用。

```
 private void section_SelectedIndexChanged(object sender, EventArgs e)
    {
         string selected = (string)section.SelectedItem;

        if(selected == "Giftarticles")
        {
            SqlConnection conn1 = new SqlConnection(connString);
            conn1.Open();
            string itemc = "(select  distinct Itemcode from Items where Section1 like 'G%' )except(select  distinct Itemcode from Items where Section1 like 'H%')";
            SqlCommand cmditem = new SqlCommand(itemc, conn1);
            SqlDataReader dr2 = cmditem.ExecuteReader();

             while (dr2.Read())
            {
                itemcode.Items.Add(dr2["Itemcode"].ToString());
            }
            dr2.Close();
            conn1.Close();
        }
        else
        {
            SqlConnection conn2 = new SqlConnection(connString);
            conn2.Open();
            string itemc1 = "(select  distinct Itemcode from Items where Section1 like 'H%')except(select  distinct Itemcode from Items where Section1 like 'G%')";
            SqlCommand cmditem = new SqlCommand(itemc1, conn2);
            SqlDataReader dr2 = cmditem.ExecuteReader();

            while (dr2.Read())
            {
                itemcode.Items.Add(dr2["Itemcode"].ToString());
            }
            dr2.Close();
            conn2.Close();
}
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T06:43:37.153

我看到了，实际需要的 if 介于

```
 string itemc = "(select  distinct Itemcode from Items where Section1 like 'G%' )except(select  distinct Itemcode from Items where Section1 like 'H%')"; 
```

和

```
 string itemc1 = "(select  distinct Itemcode from Items where Section1 like 'H%')except(select  distinct Itemcode from Items where Section1 like 'G%')"; 
```

.

除了这两个，其余看起来都一样。因此，只有查询不能向您返回结果。独立运行这些查询，看看你是否得到第二个查询的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T06:47:48.093

虽然我讨厌直接在代码中使用 Connection、Reader 等，并建议采用 Typed DataSet 方式，但以下是适合您的方式：

```
private void section_SelectedIndexChanged(object sender, EventArgs e)
{
    string selected = (string)section.SelectedItem;
    using(SqlConnection conn1 = new SqlConnection(connString))
    {
        conn1.Open();
        string itemc = "select  distinct Itemcode from Items where Section1 like 'G%'";

        if(selected != "Giftarticles") itemc += " AND Section1 NOT LIKE 'H%'"

        SqlCommand cmditem = new SqlCommand(itemc, conn1);
        SqlDataReader dr2 = cmditem.ExecuteReader();

        while (dr2.Read())
            itemcode.Items.Add(dr2["Itemcode"].ToString());

        dr2.Close();
        conn1.Close();
    }
} 
```

用这个替换你上面的整个代码。

# jquery - 底部的滚动条使用 enscroll.js

> ID：15609028
> 
> 赞同：0
> 
> 时间：2013-03-25T06:38:00.167
> 
> 标签：jquery, scroll, scrollbar

我需要你的帮助。

你可以在这里测试我的代码[jsfiddle](http://goo.gl/5sFcY)

我使用 enscroll.js，我想在底部滚动以查看最后添加的行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T06:52:42.877

你可以这样做：

```
$(".scrollbox").scrollTop($(".scrollbox")[0].scrollHeight); 
```

演示：http: [//jsfiddle.net/PGuB5/84/](http://jsfiddle.net/PGuB5/84/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T06:43:44.670

它可以帮助您滚动结束。

$('body').scrollTop($('body')[0].scrollHeight);

# php - 使用 setTimeOut 进行 ajax 调用

> ID：15609029
> 
> 赞同：2
> 
> 时间：2013-03-25T06:38:00.813
> 
> 标签：php, javascript, asp.net, ajax

我想使用 ajax 编写一个聊天应用程序。所以我需要每 100 毫秒（0.1 秒）检查一次数据库中的用户消息表。如果我使用 setTimeOut 每 100 毫秒调用一次 ajax 有什么问题吗？有性能问题吗？有什么坑还是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T06:40:33.513

这是一个非常糟糕的主意。虽然它可能适用于您的本地计算机和少数用户，但它无法轻松扩展到更多用户。我建议你看看 websockets 和长轮询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T06:49:41.510

JavaScript 知道两种定时器：setInterval 和 setTimeOut。setInterval 每 100 毫秒触发一次， setTimeOut 将下一个调用安排在前一个调用之后 100 毫秒。在调整您的应用程序时，您应该牢记这种行为。您也可以考虑网络工作者，他们真正在单独的线程上完成工作。他们基于消息进行交流，这听起来很适合您的问题。确切的延迟（100 毫秒或更多）是您真正需要尝试的。John Resig 的书表明，从 21 毫秒 (IE9) 到 1 毫秒 (Opera) 不同浏览器的实际计时器延迟差异很大。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T06:42:25.730

更好的选择是使用`Socket.IO`. 它使这项任务变得容易得多

Socket.IO 使其跨浏览器解决方案

来自[socket.io的示例](http://socket.io/)

**服务器：**

```
var io = require('socket.io').listen(80);

io.sockets.on('connection', function (socket) {
  socket.emit('news', { hello: 'world' });
  socket.on('my other event', function (data) {
    console.log(data);
  });
}); 
```

**客户端（浏览器）：**

```
<script src="/socket.io/socket.io.js"></script>
<script>
  var socket = io.connect('http://localhost');
  socket.on('news', function (data) {
    console.log(data);
    socket.emit('my other event', { my: 'data' });
  });
</script> 
```

**编辑：**

对于 PHP，[phpwebsocket](https://code.google.com/p/phpwebsocket/)类将非常适合客户端[jquery 插件](https://code.google.com/p/jquery-graceful-websocket/)

# web-audio-api - Web Audio API 'noteOn()' 的时间单位是多少

> ID：15609031
> 
> 赞同：1
> 
> 时间：2013-03-25T06:38:04.223
> 
> 标签：web-audio-api

我正在尝试使用网络音频 api 'noteOn(time)' 播放声音，但我不确定时间单位是什么。

是毫秒吗？还是第二？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T08:28:54.063

这是几秒钟。

时间与音频上下文的 currentTime 相关，可以这样访问：

```
var context = new audioContext();

//....

note.noteOn(context.currentTime); //will play now

//....

note.noteOn(context.currentTime + 1); //will play in one second 
```

# java - IllegalStateException 的原因

> ID：15609033
> 
> 赞同：2
> 
> 时间：2013-03-25T06:38:09.990
> 
> 标签：java, jsp, illegalstateexception, tomcat5.5

当我尝试将 JSP 的数据保存在 EXCEL 中时，我从 Tomcat 服务器收到 IllegalStateException。`IllegalStateException`可能发生在以下任何一种情况下：

*   如果后面没有return语句`sendRedirect()`。
*   如果 POST 大小大于 2MB。
*   如果页面缓冲区大小较小。

除此之外，还有什么原因`IllegalStateException`吗？

我的代码：

```
response.sendRedirect(response.encodeRedirectURL(request.getRequestURI() + "?saveToFile=true&action=" + ReportsManager.ACTION_SAVE_AS_XLS + "&saveFileName=" + saveFileName + "&returnPage=" + StringFunctions.encodeUrlParameter(returnPage)));    
return; 
```

我正在`IllegalStateException`使用 sendRedirect()。

此外，如果 JSP 中只有很少的记录（比如 100 行），则保存为 Excel 不会出错。如果有 1000 条记录，那么我得到`IllegalStateException`.

堆栈跟踪：

```
*Mar 25, 2013 6:57:26 AM,JSP Runtime Error,0,java.lang.IllegalStateException
       at org.apache.coyote.tomcat5.CoyoteResponseFacade.sendRedirect(CoyoteResponseFacade.java:352)
       at org.apache.jsp.OperationalReports.SalespersonSales_jsp._jspService(SalespersonSales_jsp.java:2567)
       at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:94)
       at javax.servlet.http.HttpServlet.service(HttpServlet.java:802)
       at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:324)
       at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:292)
       at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:236)
       at javax.servlet.http.HttpServlet.service(HttpServlet.java:802)
       at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:237)
       at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:157)
       at com.retailJava.core.filters.SecurityFilter.doFilter(SecurityFilter.java:136)
       at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:186)
       at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:157)
       at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:214)
       at org.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContext.java:104)
       at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:520)
       at org.apache.catalina.core.StandardContextValve.invokeInternal(StandardContextValve.java:198)
       at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:152)
       at org.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContext.java:104)
       at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:520)
       at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:137)
       at org.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContext.java:104)
       at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:118)
       at org.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContext.java:102)
       at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:520)
       at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
       at org.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContext.java:104)
       at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:520)
       at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:929)
       at org.apache.coyote.tomcat5.CoyoteAdapter.service(CoyoteAdapter.java:160)
       at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:799)
       at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnection(Http11Protocol.java:705)
       at org.apache.tomcat.util.net.TcpWorkerThread.runIt(PoolTcpEndpoint.java:577)
       at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:683)
       at java.lang.Thread.run(Thread.java:595) 
```

如果我设置页面缓冲区大小，那么它适用于 1000 条记录。但如果它达到 2000 条记录，那么我又遇到了问题。

```
<%@ page buffer = "2048kb" autoFlush = "true" %> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T07:03:27.910

该[文档](http://tomcat.apache.org/tomcat-7.0-doc/api/org/apache/catalina/connector/Response.html#sendRedirect%28java.lang.String%29)指出：

> **sendRedirect**抛出：IllegalStateException - 如果此响应已提交

由于禁用 maxPostSize 并不能解决问题（根据 OP 评论），因此似乎在较早的时间点上已经提交了响应。

您可以通过检查[isCommited](http://tomcat.apache.org/tomcat-5.5-doc/catalina/docs/api/org/apache/catalina/connector/Response.html#isCommitted%28%29)标志来验证这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T06:55:24.817

如果你调用了两次“response.sendRedirect()”方法，或者url是一个错误的url，这个错误可能会导致

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-28T17:39:51.753

在不同的用例中遇到相同的错误。

[![在此处输入图像描述](../Images/78537086393cb6e95dacd87939421eb9.png)](https://i.stack.imgur.com/k5ozZ.png)

**用例：**在 Hibernate 中，当我们在有意关闭会话后尝试访问会话对象上的任何方法时。

```
Session session = /*Getting session object using factory*/
tx = session.beginTransaction();
System.out.println("Flush Mode before closing session -> " +session.getFlushMode());

session.close();
System.out.println("Flush Mode after closing session -> " + session.getFlushMode()); 
```

**关键**

*   由于在适当的时间调用方法而发生 IllegalStateException
*   在会话的上下文中，一旦会话关闭，我们就不能调用会话的任何方法

# c++ - 用于没有路由器的笔记本电脑/设备之间的网络通信的 C++ 库

> ID：15609036
> 
> 赞同：0
> 
> 时间：2013-03-25T06:38:35.357
> 
> 标签：c++, windows, networking, tcp, arduino

**背景**

对于我的项目，我正在尝试使用带有以太网屏蔽的 Arduino mega 来控制 AUV，该以太网屏蔽从笔记本电脑（运行 Windows）接收指令。服务器端（笔记本电脑）将用 C++ 编写。

由于只有一对一的网络使用 TCP/IP，我试图避免使用路由器以简化硬件。我发现您可以在两台设备之间进行直接连接（使用自动 MDIX）。

**所以...**

我已经简要地研究了 Boost:asio，但我认为这可能是一种矫枉过正（因为我不需要考虑多个客户端等）对于我在这里想要实现的目标。我对吗？

任何意见，将不胜感激！谢谢。

**TL;博士：**

寻找一个 C++ 网络库（适用于 Windows），它允许干净、简单的代码进行一对一的 TCP/IP 连接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T13:46:08.840

最简单的方法是将您的 arduino 设置为 Web 服务器。有关详细信息，请参阅此[示例 sektch](http://arduino.cc/en/Tutorial/WebServer)。

在您的 Windows 机器上使用[Web 客户端库](https://stackoverflow.com/questions/3342493/c-web-services-client-library)。

这样，即使没有使用浏览器的客户端软件，您也可以测试 arduino。

# javascript - 未找到 ID 为 pets_you_liked 的类 Pet 的文档

> ID：15609037
> 
> 赞同：0
> 
> 时间：2013-03-25T06:38:35.203
> 
> 标签：javascript, ruby-on-rails, ruby-on-rails-3, jquery

路线.rb

```
 post 'pets/pets_you_liked' => 'pets#pets_you_liked' 
```

pets.js.coffee

```
 $.ajax
    type: 'POST',
    data: {pet_id: pet_id},
    url: "/pets/pets_you_liked" 
```

耙路线

```
rake routes | grep pets_you_like
pets_pets_you_liked POST    pets/pets_you_liked(.:format)    pets#pets_you_liked 
```

宠物控制器.rb

```
def pets_you_liked
 raise 'checking'
end 
```

我遇到路由错误，无法理解错误可能出在哪里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T06:43:28.947

尝试如下，

```
post '/pets/pets_you_liked' => 'pets#pets_you_liked 
```

# iphone - 多次调用 Google 地图 api 将坐标转换为 iphone 中的地址时崩溃

> ID：15609038
> 
> 赞同：0
> 
> 时间：2013-03-25T06:38:44.310
> 
> 标签：iphone, google-maps-api-2

我想显示到位置之间的路径，并想显示该路径的地址。所以我使用了以下api。

```
http://maps.google.com/maps/api/geocode/json?latlng=%f,%f&sensor=true 
```

并且在坐标之间至少有 10 个位置。所以我调用这个 api 的所有时间都是 1o 次。但是它显示“查询限制”作为响应。所以我没有得到地址并且它崩溃了应用程序。所以我怎么能得到来自给定坐标的地址。

# solr - 在 SOLR 中查看文档倒排索引的任何方式

> ID：15609040
> 
> 赞同：0
> 
> 时间：2013-03-25T06:38:48.187
> 
> 标签：solr

我想知道是否有办法在 SOLR 中查看文档的倒排索引？我检查了 solr 管理工具，但找不到任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T09:26:18.527

检查 Solr 中的[LukeRequestHandler](http://wiki.apache.org/solr/LukeRequestHandler)，应该可以让您获取索引数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T08:01:52.653

有[Luke](https://code.google.com/p/luke/)但最近没有升级到最新的 lucene 版本，可能很快有人会重新编译它。

# .net - FxCop 自定义代码分析：检查另一个类中的类引用

> ID：15609041
> 
> 赞同：2
> 
> 时间：2013-03-25T06:38:53.883
> 
> 标签：.net, code-analysis, fxcop

我正在编写自定义代码分析检查，其中我需要检查 ASP .NET MVC 应用程序中的模型类是否没有控制器类的引用。但是我找不到与如何检查我的控制器以供模型类参考有关的任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T12:54:46.553

如果您使用访问者方法 ( [http://binarycoder.net/fxcop/html/check_and_visit.html](http://binarycoder.net/fxcop/html/check_and_visit.html) ) 创建规则，您可以重写该`VisitMemberBinding`方法以验证是否正在访问控制器类型的任何成员（假设您有识别特定目标类型是否有资格作为控制器的方法）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T07:38:08.767

.NET 开发人员的工具[NDepend](http://www.ndepend.com/)特别适合编写这种静态分析检查（*免责声明：我属于开发 NDepend 的团队*）

*   *我正在编写自定义代码分析检查，其中我需要检查 ASP .NET MVC 应用程序中的模型类是否没有控制器类的引用*

NDepend 允许通过 C# LINQ 查询编写自定义代码规则。提供了大约[200 条默认代码规则](http://www.ndepend.com/DefaultRules/webframe.html)。这种 LINQ 语法使编写您要求的规则变得简单：

```
warnif count > 0
let modelClasses = Application.Namespaces.WithNameLike("Model").ChildTypes()
let controllerClasses = Application.Namespaces.WithNameLike("Controller").ChildTypes()

from modelClass in modelClasses.UsingAny(controllerClasses)
select new { modelClass, 
             controllerClassesUsed = modelClass.TypesUsed.Intersect(controllerClasses) 
} 
```

显然调整这条规则很容易，也许你想通过不同的方式定义*模型类*或*控制器*类（从某个类派生，实现某个接口......）。

NDepend 可以集成到 VS 2012、2010、2008 中，并且可以编辑 LINQ 规则并实时浏览其结果。规则检查也可以集成到您的构建过程中，并且[可以在报告中显示违反规则的情况](http://www.ndepend.com/Doc_CI_Report.aspx#CQLRule)。

![在此处输入图像描述](../Images/597dbe990ab0359add61cc96bce3cc90.png)

*   *但是我找不到与如何检查我的控制器以供模型类参考有关的任何内容。*

我不确定是否理解这个要求，你的意思是要写一个规则来检查控制器类是否确实在使用模型类？

# xml - PowerShell 设置 XML 值 #text

> ID：15609045
> 
> 赞同：3
> 
> 时间：2013-03-25T06:39:03.867
> 
> 标签：xml, powershell, text

我尝试设置元素的值。它在我的 XML 中不是空的，它可以工作，但如果它是空的，它就不起作用。

我的 XML：

```
...
<Field IDREF="934d80f1" Name="FirstName">works</Field>
<Field IDREF="936845ba" Name="LastName"></Field>
... 
```

如果我用

```
$record.BusinessObject.FieldList.Field | Where-Object { $_.Name -eq $field } 
```

它返回

```
IDREF           Name                        #text
-----           ----                        -----
934d80f1        FirstName                   works 
```

在第二行中，缺少“虚拟”属性#text：

```
IDREF           Name
-----           ----
936845ba        LastName 
```

使用 PowerShell 代码

```
record.BusinessObject.FieldList.Field | Where-Object { $_.Name -eq $field } | ForEach-Object { $_.'#text' = $state } 
```

我想设置所选元素的值 >VALUE<。如果值为空，则不起作用...

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T08:47:50.930

尝试使用该`$_.InnerXml`属性，它将在必填字段上设置值。

```
$record.BusinessObject.FieldList.Field | Where-Object {
  $_.Name -eq $field
} | ForEach-Object {
  $_.InnerXml = $state
} 
```

# android - Android EditText 和大量文本

> ID：15609051
> 
> 赞同：4
> 
> 时间：2013-03-25T06:39:31.627
> 
> 标签：android, android-edittext, large-data

我在一些能够编辑文本文件的应用程序上工作。但是我对 EditText 有严重的问题。目前我加载大小为 17KB 的文本文件。我不认为，17KB 是可怕的文本量。滚动很好，但是当我关注 EditText 并开始编辑时，它会延迟/冻结 4-5 秒。当我离开 EditText 时也会发生同样的情况。我正在使用 API 级别 8。这是我的 edittext 布局：

```
 <EditText android:id="@+id/journal_text"
                android:layout_width="0dip"
                android:layout_height="fill_parent"
                android:gravity="top|left"
                android:layout_weight="1"
                android:lines="20"
                android:inputType="textMultiLine|textNoSuggestions"
                android:scrollbars="vertical"
                android:fadeScrollbars="false"
                >

                <requestFocus />

            </EditText> 
```

这是我的java代码：

```
 edit = (EditText)view.findViewById(R.id.journal_text);
    edit.setText(readFile(path)); 
```

就这样

从 GooglePlay 我下载了应用程序 Jota 文本编辑器，它可以完美地处理大型文本数据......谁能帮助我或指导我如何解决这个问题？谢谢安东

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-08-22T17:24:16.820

自定义 EditText 不会解决问题。当其中的文本内容变得太大时，在 EditText 中编辑会变慢。尝试使用 WebView 而不是 EditText。它也适用于非常大的文本内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-22T05:46:27.917

您必须使用扫描仪来读取文本文件。

```
StringBuilder stringBuilder = new StringBuilder();
Scanner scanner = new Scanner(tempFile).useDelimiter("\\Z");
while (scanner.hasNext()) {
stringBuilder .append(scanner.next());
}

edit.setText(stringBuilder ); 
```

# sql-server - 如何在一行中返回多列结果

> ID：15609055
> 
> 赞同：-2
> 
> 时间：2013-03-25T06:39:46.370
> 
> 标签：sql-server, sql-server-2008

我在数据库中有 2 个表。

表**T1**：

```
ID    TeamLeader
---   -----------
1     Iron Man
2     Thor
3     Hulk 
```

表**T2**：

```
TeamID   Member
------   ------
1        Superman
1        Spiderman
2        Batman
2        Catwomen
2        Robin
3        Black Widow
3        Hawk Eye
3        Captain America 
```

我想要一个`SELECT`返回如下的声明。

```
TeamID  TeamLeader  Member
------  ----------  ------
1       Iron Man    Superman;Spiderman;
2       Thor        Batman;Catwomen;Robin;
3       Hulk        Black Widow; Hawk Eye;Captain America; 
```

我试图创建一个使用临时表的函数，但它说我不能在函数中使用临时表。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T06:42:32.600

您可以使用[`FOR XML`](http://msdn.microsoft.com/en-us/library/ms178107%28v=sql.100%29.aspx)with`STUFF`来执行此操作。就像是：

```
SELECT 
  t1.id,
  t1.teamleader,
  STUFF((
    SELECT '; ' + t2.member  
    FROM t2
    WHERE t2.teamId = t1.id
    FOR XML PATH (''))
  ,1,2,'') AS Members
FROM t1
GROUP BY t1.Id, 
         t1.teamLeader; 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!6/fb4a1/2)

这会给你：

```
| ID | TEAMLEADER |                                MEMBERS |
------------------------------------------------------------
|  1 |   Iron Man |                    Superman; Spiderman |
|  2 |       Thor |                Batman; Catwomen; Robin |
|  3 |       Hulk | Black Widow; Hawk Eye; Captain America | 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T06:43:45.673

```
SELECT
     ID, TeamLeader,
     STUFF(
         (SELECT ';' + [Member]
          FROM Table2
          WHERE TeamID = a.ID
          FOR XML PATH (''))
          , 1, 1, '')  AS MembersList
FROM Table1 AS a
GROUP BY ID, TeamLeader 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!3/6b1fa/2)

输出

```
╔════╦════════════╦══════════════════════════════════════╗
║ ID ║ TEAMLEADER ║             MEMBERSLIST              ║
╠════╬════════════╬══════════════════════════════════════╣
║  1 ║ Iron Man   ║ Superman;Spiderman                   ║
║  2 ║ Thor       ║ Batman;Catwomen;Robin                ║
║  3 ║ Hulk       ║ Black Widow;Hawk Eye;Captain America ║
╚════╩════════════╩══════════════════════════════════════╝ 
```

*   [SQLFiddle Demo（*最后**额外`;`*）](http://sqlfiddle.com/#!3/6b1fa/5)

输出

```
╔════╦════════════╦═════════════════════════════════════════╗
║ ID ║ TEAMLEADER ║               MEMBERSLIST               ║
╠════╬════════════╬═════════════════════════════════════════╣
║  1 ║ Iron Man   ║ Superman; Spiderman;                    ║
║  2 ║ Thor       ║ Batman; Catwomen; Robin;                ║
║  3 ║ Hulk       ║ Black Widow; Hawk Eye; Captain America; ║
╚════╩════════════╩═════════════════════════════════════════╝ 
```

# networking - 在android模拟器中模拟网络和内存

> ID：15609056
> 
> 赞同：1
> 
> 时间：2013-03-25T06:39:59.950
> 
> 标签：networking, memory

我在 android 模拟器中模拟内存和网络速度时遇到了问题。在网络速度方面，我使用 telnet network speed 命令来改变我的模拟器的网络速度。但是，什么也没有发生，它通常以默认速度连接。Android 模拟器命令也不会影响它。但我可以使用 telnet 更改电池状态。这是什么情况？然后我尝试使用shell命令 ulimit -Sv xxx 来模拟​​模拟器的内存，但对模拟器没有任何影响。此命令适用于 Windows？我使用 window 7 和 Android Developer Tools v21.1.0 并使用 API 15、16、17 作为模拟器。

# asp.net - 存储过程更改后实体框架不更新

> ID：15609058
> 
> 赞同：2
> 
> 时间：2013-03-25T06:40:13.490
> 
> 标签：asp.net, entity-framework-5

我使用 EF 5 和 VS 2012。在我更改/更新数据库中的一些存储过程并执行“从数据库更新”之后。但是，它没有在我的实体上下文中更新。

我需要做的是删除 EF 模型并重新添加。请帮忙，有没有其他方法可以解决这个问题？

我正在将实体框架用于网站项目。在 MSDN 中，我发现的是控制台项目。我是实体框架 5 的新手。

希望有人可以帮助或指导。

我发不了照片。这是我添加实体框架后的项目结构

```
+ App Code [Folder]
  - UserProfile.Context.tt
  - UserProfile.edmx
  - UserProfile.tt 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T06:44:08.610

我之前也遇到过这个问题。我所做的只是

1.  保存项目
2.  打开打开项目
3.  从数据库更新用户配置文件

如果上述步骤不起作用，只需重新创建您的 edmx 模型。

此致

# android - 在android中绘制图形

> ID：15609062
> 
> 赞同：0
> 
> 时间：2013-03-25T06:40:28.310
> 
> 标签：android, html

我可以使用 html 或 html5 绘制实时图表并使用 webview 或其他东西在 android 活动中显示它吗？如果可能的话，请建议我如何处理它。任何教程都是最佳实践。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T06:47:17.977

您可以选择使用像[achartengine](http://code.google.com/p/achartengine/)这样的库。您也可以在 android 中进行[画布](http://developer.android.com/reference/android/graphics/Canvas.html)绘图。此外，您可以在 HTML 中绘制画布并在 webview 中显示它，如您所提到的。

这一切都取决于您愿意采用何种复杂程度以及真正需要什么。如果您需要显示一个简单的图形，您可以随时使用自定义类并使用 onDraw 方法进行画布绘制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T06:47:45.983

检查 [链接](http://www.highcharts.com/) 希望它可以帮助你 [link2](http://www.script-tutorials.com/html5-charts-and-graphs/)

但是，请注意，您甚至可以制作离线图表，还请注意，这不是使用 HTML5 完成的。要使用 HTML 创建图表，请参阅本[教程](http://w2davids.wordpress.com/android-charts-the-html5-and-javascript-way/)。

```
GraphView graphView = new GraphView(
  this 
  , new GraphViewData[] {
    new GraphViewData(1, 2.0d)
    , new GraphViewData(2, 1.5d)
    , new GraphViewData(2.5, 3.0d) // another frequency
    , new GraphViewData(3, 2.5d)
    , new GraphViewData(4, 1.0d)
    , new GraphViewData(5, 3.0d)
  } 
  , "GraphViewDemo" 
  , null 
  , null 
);
LinearLayout layout = (LinearLayout) findViewById(R.id.graph1);
layout.addView(graphView); 
```

# android - android: 用于创建帐户的 authorize.net api

> ID：15609066
> 
> 赞同：0
> 
> 时间：2013-03-25T06:40:44.780
> 
> 标签：android, authorize.net, user-accounts

我想在我的应用程序中使用 authorize.net 进行在线支付。我想知道是否有任何 api 可以从我的移动应用程序在 authorize.net 中创建帐户。我希望用户从我的应用程序创建 authorize.net 帐户。我不能为此罚款任何api。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T11:44:55.157

不，没有用于此的 API。您必须通过他们的网站注册，并且只有在拥有美国商家帐户后才能注册。

# asp.net - ASP.NET - 流式传输文件到客户端是否占用服务器内存？

> ID：15609072
> 
> 赞同：0
> 
> 时间：2013-03-25T06:41:04.277
> 
> 标签：asp.net, download, filestream, fileserver, tfilestream

我需要通过在 Web 服务器上运行的应用程序使文件服务器中的文件可供下载。用户将单击应用程序页面上可用的链接，然后会出现另存为对话框。这种用例很常见，我可能在谈论一个基本的事情，但如果有人能确认我的以下假设是否正确，我将不胜感激。

1）文件服务器上的文件，通过Web服务器中的虚拟目录虚拟映射以供应用程序访问（作为链接），可以使用内容处置将其直接流式传输到客户端（代码类似于答案[这里](https://stackoverflow.com/questions/14020113/download-file-to-client-pc-in-asp-net-using-vb-net)），意思是不涉及任何代码来处理或分块文件以进行流式传输。

2) 由于文件是直接从文件服务器流式传输的，因此 Web 服务器在内存或磁盘使用方面不会受到影响（当然会使用 CPU）。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T07:32:48.037

由于您想直接写入文件并将内存占用降至最低，请考虑使用[`HttpResponse.TransmitFile`](http://msdn.microsoft.com/en-us/library/12s31dhy%28v=vs.110%29.aspx)

> 将指定文件直接写入 HTTP 响应输出流，而不将其缓冲在内存中。

据我所知，如果您必须通过 asp.net 编写文件，这是在响应中发送文件的最有效方法。

```
Response.AppendHeader("Content-Disposition", "attachment; filename="+ fileName );
Response.TransmitFile(fullPath);
Response.Flush();
Response.End(); 
```

# qr-code - 如何通过 Zxing 库获取 qrcode 的版本

> ID：15609073
> 
> 赞同：2
> 
> 时间：2013-03-25T06:41:07.030
> 
> 标签：qr-code, zxing

QRCode 有许多不同的版本（版本 1 (21×21)、版本 2 (25×25) 等）。

我使用zxing库来解码不同版本的二维码，效果很好！

但我不知道如何通过语言（C++）中的zxing库获取qrcode的版本

PS：我尝试*使用 BitMatrixParser*类来实现它，但得到错误消息。“**无法解码格式信息**”，不知道发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T15:19:55.970

通常，并非所有图像都会解码。您是否有未解码的特定图像？如果是这样，请发布它。如果是图像流，不要指望它们都能解码。

我不认为 C++ 端口返回 qrcode 版本。不确定Java端口是否可以。随意向 zxing 项目提交功能问题，但它是自愿的，所以 YMMV。

# performance - spring-data-neo4j 中 @MapResult 的性能

> ID：15609074
> 
> 赞同：0
> 
> 时间：2013-03-25T06:41:07.820
> 
> 标签：performance, rest, neo4j, cypher, spring-data-neo4j

我正在使用`spring-data-neo4j`通过 REST api 访问独立的 Neo4J 服务器。在通过 spring 存储库检索对象时观察到严重的性能问题，`@MapResult`用于转换检索到的对象列表。

首先，我在服务器日志 ( *http.log* ) 中观察到，当我们开始在检索到的`@MapResult`接口上迭代或调用 getter/setter 时，会在后台触发大量 REST 请求。在一种情况下，当 Neo4J 服务器在同一台机器上运行时，它在迭代和访问 5 个`@MapResult`对象的列表时触发了 1900 多个休息请求，耗时超过 6 秒。

我将问题简化为获取一个简单的关系，如下所示。我可以在 Neo4J 服务器日志中看到，当我调用*MyMapResultInterface.getRoute()*时，会触发 9 个 http 请求来获取这个单个对象。**这些http请求的数量是预期/设计的吗？还是我错过了什么？**我可以找到非常少的关于用法`@MapResult`及其含义的文档。

关系模型：

```
@RelationshipEntity(type="ROUTE")
@TypeAlias("Route")
public class Route {

    @GraphId 
    private Long id;

    @StartNode
    private Location startAt;

    @EndNode
    private Location endAt;

    private String routeName;
    private String city;
    private long distance;
    private Date createdOn;
} 
```

当我调用*MyMapResultInterface.getRoute()时在**http.log*中看到的日志：

 *```
GET /db/data/relationship/28 HTTP/1.1" 200 0 "-" "neo4j-rest-graphdb/1.8.RC2
GET /db/data/relationship/28 HTTP/1.1" 200 0 "-" "neo4j-rest-graphdb/1.8.RC2
GET /db/data/relationship/28 HTTP/1.1" 200 0 "-" "neo4j-rest-graphdb/1.8.RC2
GET /db/data/relationship/28 HTTP/1.1" 200 0 "-" "neo4j-rest-graphdb/1.8.RC2
GET /db/data/relationship/28 HTTP/1.1" 200 0 "-" "neo4j-rest-graphdb/1.8.RC2
GET /db/data/relationship/28 HTTP/1.1" 200 0 "-" "neo4j-rest-graphdb/1.8.RC2
GET /db/data/node/13/properties HTTP/1.1" 200 0 "-" "neo4j-rest-graphdb/1.8.RC2
GET /db/data/relationship/28 HTTP/1.1" 200 0 "-" "neo4j-rest-graphdb/1.8.RC2
GET /db/data/node/25/properties HTTP/1.1" 200 0 "-" "neo4j-rest-graphdb/1.8.RC2 
```

上面可以看到许多重复的*GET 。*只是一种解释，看起来*GET*的数量等于对象*Route*`/db/data/relationship/28`中的字段总数，并且可能有两个*GET*请求可能针对and字段。**`/db/data/node/{nodeId}/properties``@StartNode``@EndNode`**

 ****编辑：** 根据我的观察，我注意到这不仅是问题，`@MapResult`而且是来自存储库方法的简单映射结果的问题，示例如下

```
Iterable<Route> routes = routeRepository.getAvailableRoutesForUser(user.getId()); 
```

即便如此，也会向 neo4j 服务器发出大量 http rest 请求。

**更新：**

正如 Michael Hunger 在回答中所建议的那样，这两种方法可以提高 Neo4j REST api 的性能。然而，这会导致非常大的复杂密码查询和难以管理且难以维护的代码。

因此，**最终在评估了所有方法之后，我们决定取消 Neo4j REST 接口并开始使用 Neo4j 嵌入式。**并且嵌入的 Neo4j 不适用于 Heroku，我们不得不取消 Heroku。我们将应用程序迁移到 Amazon AWS。

我们希望 Neo4j 早日拿出生产环境中性能可以接受的远程访问通道。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T09:36:05.687

好点，通常 SDN 的对象表示尚未针对 Neo4j 服务器 REST 交互进行优化。这将在使用 Neo4j 的二进制协议和密码的下一个主要版本中发生变化。

你能测试一下从 Cypher 中返回你感兴趣的信息吗？

1.  `Result<Map<String,Object>>`直接从方法返回类型中读取它和
2.  从`MapResult`只公开这些原始类型的 a。***

# perl - 问题迭代哈希数组并实际更改原始数组中的哈希值

> ID：15609075
> 
> 赞同：1
> 
> 时间：2013-03-25T06:41:14.473
> 
> 标签：perl

所以，我有一个哈希数组，@doc_vector。我想遍历每个哈希并修改键的值。

我正在使用的原始代码如下：

```
my %hash=undef;

foreach my $hash (@doc_vector) {
      foreach my $key (keys %{ $hash }) {
         $hash{ $key } = log($dnum/$dfreq_hash{$key});
     }
 } 
```

但是，当我实际引用 @doc_vector 中的哈希值时，这些值从未被修改过。我可以通过执行以下操作来修改特定值（我保存了最后一个哈希条目的索引和我知道其值的键，分别为 $last_doc 和 $word）：

```
foreach my $hash (@doc_vector) {
      foreach my $key (keys %{ $hash }) {
            if ($key eq $word)
         {
             $doc_vector[$last_doc]{$word}=log($dnum/$dfreq_hash{$key});                        
         }
       }
     } 
```

效果很好，但是当我尝试对所有条目执行此操作时：

```
foreach my $hash (@doc_vector) {
      foreach my $key (keys %{ $hash }) {
         $doc_vector[$hash]{$key}=log($dnum/$dfreq_hash{$key});
     }
     print "I'm going infinite\n";
 } 
```

我最终一遍又一遍地打印“我要无限”。我有一种感觉，问题是我正在输入一个哈希引用 $hash，而不是一个索引，但我不知道如何获取索引（以及我最初尝试这样做的方式（第一个代码段不起作用）。

任何帮助将非常感激。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T06:56:04.023

如果您尝试将值存储在现有散列中，则创建新散列（使用`my %hash`）不是可行的方法。

Perl 在你隐藏它之前给你一个错误的原因`my %hash`是你正在访问一个名为的哈希`%hash`而不是引用的哈希`$hash`。

要通过引用访问散列的元素，您可以使用

```
$hash->{$key} 
```

所以你的代码应该是

```
foreach my $hash (@doc_vector) {
   foreach my $key (keys %{ $hash }) {
      $hash->{$key} = log($dnum/$dfreq_hash{$key});
   }
} 
```

参考文献：

*   [迷你教程：取消引用语法](http://www.perlmonks.org/?node_id=977408)
*   [参考快速参考](http://www.perlmonks.org/?node_id=69927)
*   [perlref](http://perldoc.perl.org/perlref.html)
*   [perlreftut](http://perldoc.perl.org/perlreftut.html)
*   [perldsc](http://perldoc.perl.org/perldsc.html)
*   [佩洛尔](http://perldoc.perl.org/perllol.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T06:57:58.340

这有帮助吗？我认为你不应该引入`my %hash = undef;`Perl 试图告诉你一些问题。

```
#!/usr/bin/env perl
use strict;
use warnings;

my @doc_vector = ( { key1 => 12, key2 => 14 }, { key3 => 17, key4 => 23 } );

sub dump_doc
{
    my($tag, @doc) = @_;
    print "$tag:\n";
    foreach my $hash (@doc)
    {
        foreach my $key (keys %{$hash})
        {
            print "$key: $hash->{$key}\n";
        }
    }
}

dump_doc("Before", @doc_vector);

print "Fixing:\n";
foreach my $hash (@doc_vector)
{
    foreach my $key (keys %{$hash})
    {
        print "$key: $hash->{$key}\n";
        $hash->{$key} = log($hash->{$key});
    }
}

dump_doc("After", @doc_vector); 
```

输出：

```
Before:
key2: 14
key1: 12
key4: 23
key3: 17
Fixing:
key2: 14
key1: 12
key4: 23
key3: 17
After:
key2: 2.63905732961526
key1: 2.484906649788
key4: 3.13549421592915
key3: 2.83321334405622 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T06:47:52.763

`$hash{$key}`指散列变量的一个元素`%hash`，它是与散列引用完全不同的变量`$hash`。

要访问哈希引用的元素，请使用解引用运算符`->`

```
$hash->{$key} = log($dnum/$dfreq_hash{$key}); 
```

# ssrs-2008 - 滚动时冻结列标题

> ID：15609077
> 
> 赞同：2
> 
> 时间：2013-03-25T06:41:27.263
> 
> 标签：ssrs-2008, reporting-services, reportingservices-2005

我想在向下滚动时冻结所有列标题。另外，当我垂直滚动时，我想用数据冻结前四列。

对于第二部分，我将`FIXED`data 属性用于前四列。它运行良好。

向下滚动时如何冻结所有列标题？

我正在使用 SSRS 2005。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T07:42:16.883

为了使列标题行在每一页上重复，请参考以下步骤：

1.  选择 Tablix。

2.  在分组窗格中，单击小三角形并选择“高级模式”以显示静态成员。

3.  在行组层次结构中，选择标题行的相应（静态）项。

4.  在属性网格中：

    *   将 KeepWithGroup 设置为 After

    *   将 RepeatOnNewPage 设置为 True

    *   将 FixedData 设置为 True

更多解释请参考 MSDN 博客 Repeat Header / Keep Header Visible in Tables in RS 2008，网址：http: [//blogs.msdn.com/b/robertbruckner/archive/2008/10/13/repeat-header-and -可见-固定-标题-table.aspx](http://blogs.msdn.com/b/robertbruckner/archive/2008/10/13/repeat-header-and-visible-fixed-header-table.aspx)

# objective-c - 带有自定义 UISubview 的 UIPageViewController - 不接收触摸

> ID：15609079
> 
> 赞同：0
> 
> 时间：2013-03-25T06:41:30.103
> 
> 标签：objective-c, xcode, uipageviewcontroller

我有一个基于页面的应用程序，自定义 UIView 添加为子视图（单独的笔尖和类）。子视图有一个按钮。子视图位于视图的最顶层，但是每当我单击按钮时，它都不会收到触摸。我尝试将子视图放在前面，但它不起作用。

```
// swipeable view
self.swipeView.frame = CGRectMake(171, 747, self.swipeView.frame.size.width, self.swipeView.frame.size.height);
OverlayVC *overlayVC = [self.storyboard instantiateViewControllerWithIdentifier:@"overlayVC"];
overlayVC.view.frame = CGRectMake(171, 747, self.swipeView.frame.size.width, self.swipeView.frame.size.height);

self.swipeView = overlayVC.view;
[self.view addSubview:self.swipeView]; 
```

背景（蓝色）是我的页面视图控制器，粉红色的是作为带有按钮的子视图添加的自定义 uiview。按钮 1 不可舔 ![ ](../Images/47c080912173694503a797f063999932.png)

# javascript - 如何使用 asp.net 禁用 Firefox 默认 PDF 查看器/插件？

> ID：15609086
> 
> 赞同：2
> 
> 时间：2013-03-25T06:42:19.213
> 
> 标签：javascript, asp.net, firefox, pdf, plugins

我需要通过 javascript（或）asp.net 禁用 Firefox 默认 PDF.js 查看器。我在 Firefox 选项中找到了一种非编程解决方案：

选项--> 应用程序-->**内容类型可移植文档格式操作默认预览在firefox**

在那里我可以将其更改为使用 Adob​​e Acrobat Reader，但我们如何在代码中做到这一点？ **我们如何在 java 脚本代码中获取 Firefox 浏览器 Applications Action。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T13:41:11.867

如果您发送以下标头以及包含 PDF 的响应：

```
Content-Disposition: Attachment 
```

浏览器会将其视为文件下载而不是要显示的文档，打开时将使用用户默认的 PDF 查看器打开。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-25T13:56:52.017

简短的回答是你不能，至少在远程用户电脑上，几乎所有浏览器都会将该活动标记为恶意（想想如果有人更改了用于存储密码的程序，你会有什么感觉）。

您可能需要使用 pdf 插件，就像需要使用 flash 一样。

在这种情况下，rails 将是比 asp.net 更好的选择。

# php - Highcharts 3.0 版本中导出选项的变化？

> ID：15609088
> 
> 赞同：1
> 
> 时间：2013-03-25T06:42:25.233
> 
> 标签：php, javascript, highcharts

很高兴 highcharts 发布了更新的 3.0 版本

```
http://www.highcharts.com/component/content/article/2-news/54-highcharts-3-0-released 
```

并修复了 highcharts 3.0 中的许多错误，但我对 highhcharts 导出选项感到困惑，这些选项我之前工作过并且一直工作到上周。

这是我的工作小提琴

```
http://jsfiddle.net/jZ9zV/ 
```

熟悉 highcharts 的人会知道更早的导出选项。

发生的事情是

1.  我只允许下载图像的选项，并且标题仅在导出的图像中可见。

2.  我不想显示其他默认选项。

3.  如何配置导出选项，就像我以前对图表标题图像所做的那样，请参考我的小提琴。

4.  旧的打印按钮位置未定义，或者有时在该按钮中加载导出图表的逻辑似乎与我的导出图表代码有问题..

有没有人解决或帮助我解决我的问题？

谢谢 - 帮助表示赞赏:)

好吧，请在下面查看我当前的解决方法，有人可以使用 3.0 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T09:14:33.197

正如您从[http://api.highcharts.com/highcharts#exporting.buttons](http://api.highcharts.com/highcharts#exporting.buttons)中看到的那样，exportButton 和 printButton 现在已被移除，并替换为通用 contextButton。因此，您可以将其用于下拉菜单：[http](http://api.highcharts.com/highcharts#exporting.buttons) ://api.highcharts.com/highcharts#exporting.buttons 。

另请参阅[http://docs.highcharts.com/#export-module上的新文章](http://docs.highcharts.com/#export-module)

编辑：这是你更新的小提琴：http: [//jsfiddle.net/highcharts/jZ9zV/5/](http://jsfiddle.net/highcharts/jZ9zV/5/)

```
exporting: {
         filename: 'sfasfasfa',
         buttons: {
             contextButton: {
                 menuItems: [{
                     text: 'Export Chart',
                     onclick: function () {
                         this.exportChart({}, {
                            title: {
                                text: 'sfasfasfa',
                                  style: {
                                        width: '450px'
                                    }
                            }
                        });
                     }
                 }]
             }
         }
     } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T08:50:44.553

好吧，这是我临时修复我的 highcharts 导出选项上的错误，但我想使用 3.0 。

我从 code.highcharts 加载了旧版本并评论了最新版本。

```
<!--
<script src="http://code.highcharts.com/highcharts.js"></script>
-->
<!--
<script src="http://code.highcharts.com/modules/exporting.js"></script>
-->
<script src="http://code.highcharts.com/2.3.5/highcharts.js"></script>
<script src="http://code.highcharts.com/2.3.5/modules/exporting.js"></script> 
```

用旧版本更新小提琴

```
jsfiddle.net/jZ9zV/4/ (working) 
```

任何人都可以向我展示与 3.0 版相同的功能吗

# android - 如何查询所有以首字母开头的韩语单词

> ID：15609090
> 
> 赞同：1
> 
> 时间：2013-03-25T06:42:27.020
> 
> 标签：android, sqlite

查询所有以英文首字母开头的单词很容易，例如要查询所有以“a”开头的单词，我们执行这个查询：

```
SELECT * FROM table WHERE word LIKE 'a%'; 
```

我们可以得到像“an”、“at”、“after”这样的结果......

但在韩语中就不一样了，因为一个韩语单词被认为是单个 Unicode 字符，所以这个查询：

```
SELECT * FROM table WHERE word LIKE 'ㄱ%'; 
```

不会返回诸如“가”、“고”、“간”之类的词...（结果可能类似于“ㄱ자”、“ㄱ견”...）

那么我应该怎么做才能得到我期望的结果呢？（即当我想查询以“ㄱ”开头的单词时，我会得到像“가”，“고”，“간”这样的词）

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T06:49:10.883

您的问题是 unicode 格式之一和韩语结合辅音和元音以创建新字符的独特行为。您可以将这些新字符存储为单独的字形或组合字形。如果你想像这样搜索，你需要将它们存储为单独的字形。这意味着获取将存储在数据库中的每个传入字符串并在插入它们之前对其进行处理，将复合字形分解为其组件。如果你有一个现有的数据库，你也必须对现有数据这样做。

另一种方法是使用 unicode 中的复杂表达式列出所有可能的字形与该字符的组合，并使用大量 OR 搜索所有这些组合。

无论哪种方式都是颈部疼痛。亚洲语言对程序员来说可能是一个真正的问题，它们似乎都有一些让它们难以处理的小东西。

# hadoop - HDFS 容量不匹配

> ID：15609096
> 
> 赞同：0
> 
> 时间：2013-03-25T06:42:47.823
> 
> 标签：hadoop, hdfs, capacity

我正在对 Hadoop 进行一些测试，这些测试后 HDFS 几乎已满。所以我递归删除了很多测试文件但是释放的空间并没有我想象的那么多。

运行`hadoop fs -du -s /`命令，它报告 876447242289。意味着大约 0.8 TB。但在 Name Node UI 中，它报告 12 TB 仍在使用中。

```
Configured Capacity  :   19.89 TB
DFS Used         :   12.15 TB
Non DFS Used     :   801.66 GB
DFS Remaining    :   6.95 TB
DFS Used%        :   61.11 %
DFS Remaining%   :   34.96 %
Block Pool Used  :   12.15 TB
Block Pool Used% :   61.11 % 
```

我跑了`df -h。在每个数据节点中，我发现与名称节点 UI 相同的结果。

我检查了`.Trash`文件夹，没有任何东西。看起来许多文件已从名称节点中删除，但仍未在数据节点中删除。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T15:20:59.107

我发现空间会逐渐释放。8 小时后，所有被删除文件占用的空间都被释放。

# java - Java ftpclient changeworkingdirectory makedirectory

> ID：15609097
> 
> 赞同：0
> 
> 时间：2013-03-25T06:42:52.793
> 
> 标签：java, android, ftp

我是 Java 甚至 android 的新手。现在，我必须使用来自 org.apache 的 ftpclient。但是，我的目录名称有一些问题，例如`123_Andy?`. 我不能`changeWorkingDirectory`，甚至`makeDirectory`因为问号。所以，我的问题是如何只检索部分目录名称，然后更改工作目录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T06:48:22.813

您可能必须对问号进行编码。尝试使用`123_Andy%3F`.

[%3F 正在编码 ?](http://www.w3schools.com/tags/ref_urlencode.asp)

还要检查您的图书馆是否提供 URL 编码。如果是这样使用

# asp.net-mvc - 如何在 asp.net mvc 中使用表单数据重定向？

> ID：15609100
> 
> 赞同：2
> 
> 时间：2013-03-25T06:42:58.240
> 
> 标签：asp.net-mvc, asp.net-mvc-3

这是我的情况，虽然可能有点奇怪：我以 身份登录`admin`，然后使用表单进入某个页面，然后由于某种原因身份验证失败（例如，离开太久但没有关闭页面，或者断开网络并稍后连接），当我再次发布表单时，它会进入登录页面。登录页面可以获取`returnUrl`并重定向到上一个页面，但是**现在所有的表单数据都丢失了**。最终结果是应用程序错误页面。

登录的重定向部分是：

```
 if (Membership.ValidateUser(userName, password))
    {
        if (!String.IsNullOrEmpty(returnUrl))
            return this.Redirect(303, returnUrl);
        else
            return this.Redirect(303, FormsAuthentication.DefaultUrl);
    } 
```

那么，如何使用表单数据重定向（由于许多页面需要身份验证，表单数据可能因操作而异）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T07:19:33.077

您不能使用表单数据进行重定向。当您重定向时，您正在使用 GET 请求。表单数据仅包含在 POST 请求的正文中。您当然可以遍历所有表单数据键和值，并将它们作为查询字符串参数附加到目标 url，但不要忘记查询字符串的长度存在限制，这可能因浏览器而异。

# windows - 如何更改自定义 CPrintDialog 的属性

> ID：15609102
> 
> 赞同：2
> 
> 时间：2013-03-25T06:43:02.937
> 
> 标签：windows, visual-c++, mfc

当打印机从我的应用程序更改时，我想更改 CPrintDialog 的属性。

我在自定义 CPrintDialog 的 OnInitDialog() 中设置了打印机名称。

```
CComboBox *wndCmbBox = (CComboBox *)GetDlgItem( IDC_PER_USER );
if( wndCmbBox != NULL )
{
    wndCmbBox->SelectString( -1, s_PrinterName);
} 
```

问题是，打印机名称可以在组合框中设置，但它的属性没有设置。我的意思是说打印机状态、类型等……默认情况下，默认打印机的属性集。所以，它的冲突。

但是，如果我从 CPrintDialog 的组合框中更改了打印机，那么它的属性会根据打印机选择自动更改。

我力图从任何地方找到任何解决方案。请参考我附上的图片。

![C打印对话框](../Images/f0e2348ddfdd07e226a1993eb3d48bcc.png)

**编辑** 正如科迪建议的那样，我可以从我的应用程序中根据选定的打印机更改打印机，即使我应用打印命令，然后从选定的打印机打印，这一切都很好，但这不是问题，问题是，在第一次打开“打印”对话框时，其属性与所选打印机不匹配，如果选择的打印机不是我的应用程序中的默认打印机。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-29T08:05:25.867

你这样做是不对的。您不应*通过*显示打印机对话框和以编程方式操作其控件来自定义打印设置。这肯定会出错，就像你观察到的那样。这不是普通对话框的预期使用模型。

`CPrintDialog`相反，通过修改其结构来设置默认值`m_pd`，如[文档中所述](http://msdn.microsoft.com/en-us/library/sk61115a.aspx)：

> 要使用`CPrintDialog`对象，首先使用`CPrintDialog`构造函数创建对象。构建对话框后，您可以设置或修改`m_pd`结构中的任何值以初始化对话框控件的值。结构`m_pd`是类型。[`PRINTDLG`](http://msdn.microsoft.com/en-us/library/ms646843.aspx)有关此结构的详细信息，请参阅 Windows SDK。

您还可以以编程方式更改整个应用程序的默认打印机。这根本不需要显示任何对话框。为此，请调用该[`SelectPrinter`](http://msdn.microsoft.com/en-us/library/y5fkxh8d.aspx)函数。这将设置新打印机并释放先前选择的打印机。

完成此操作后，无论何时显示打印对话框，它都会自动显示选定的指定打印机。当您检索有关所选打印机的信息时，您将检索到的信息将应用于正确的打印机。

在此 MSDN 文章中查找更多信息：[如何以编程方式打印到 MFC 中的非默认打印机](http://support.microsoft.com/kb/166129)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T09:03:52.283

最后我解决了我的打印机属性问题。

我已经在初始化`m_pd`结构之后放置了这段代码`doModal()`。

```
HGLOBAL hDevMode = NULL;
HGLOBAL hDevNames = NULL;
if (GetPrinterDevice( CurrentPrinterName.GetBuffer(), &hDevNames, &hDevMode))
{
    AfxGetApp()->SelectPrinter(hDevNames, hDevMode);

} 
```

我已经在函数中传递了`hDevMode`and 。`hDevNames``GetPrinterDevice()`

它工作正常，没有任何副作用。

仍然热烈感谢他们`@Cody Gray`的`@roger_rowland`支持..:)

# android - 如何在Android的默认短信表中保存短信的发送状态

> ID：15609105
> 
> 赞同：2
> 
> 时间：2013-03-25T06:43:07.583
> 
> 标签：android, android-contentprovider

我正在开发用于发送 SMS 的 Android 应用程序。发送短信后，我更新了默认短信表。

```
ContentValues values = new ContentValues();
values.put("address", address);
values.put("body", msg);
values.put("type", 2);
values.put("date", date);
getContentResolver().insert(Uri.parse("content://sms/sent"), values); 
```

但是我不知道如何保留它，当涉及到交货报告时。我将非常感谢任何想法。

收到送达报告后更新 SMS Default Table 并保留送达状态。例如，当 SMS 已发送时，列“type = 2”。如何记录发送短信？抱歉英语不好。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-08T05:24:44.390

SMS 表中有一个名为**delivery_status**的列。除了之前的字段，您应该在交付报告时填写它。我看到它充满了*2 值*。注意有些手机没有它，而不是有**delivery_date**列，你应该把它放在当前时间。

```
public static int updateSmsStatus(Uri smsUri, int status, int delivery_status) {
    ContentValues values = new ContentValues();
    values.put("status", status);
    values.put("delivery_status", delivery_status);
    return G.getContext().getContentResolver().update(smsUri, values, null, null);
} 
```

# jquery - Jquery 元素 val() 不在正确的位置？

> ID：15609118
> 
> 赞同：1
> 
> 时间：2013-03-25T06:43:44.140
> 
> 标签：jquery, html

为什么jQuery报告搜索字段的值比字段的实际值落后一步？这是在[jsFiddle](http://jsfiddle.net/qwr6b/)中。

```
<input type="search" class="search" name="test">

<p id="result"></p>

<script>

$('.search').each(function () {
    var search_type = $(this).attr('name');
    $(this).keydown(function (e) {
        var params = {
            'search_type': search_type,
                'q': $(this).val()
        };
        $('#result').text(params.q);
    });
});

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T06:46:37.200

因为您正在使用 keyup，所以使用 keydown 会给您这种行为。因为 keydown 会在按下键后立即触发，但值尚未更新。在 keyup 上，该值已更新。

[**演示**](http://jsfiddle.net/qwr6b/1/)

```
 $(this).keyup(function (e) {
    var params = {
        'search_type': search_type,
        'q': $(this).val()
    };
    $('#result').text(params.q);
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T06:46:21.527

使用 keyup 事件。这将为您提供更新的值。

以下是事件的解释：[关键事件](http://www.quirksmode.org/dom/events/keys.html)

# php - 使用 fputs 回显请求

> ID：15609121
> 
> 赞同：2
> 
> 时间：2013-03-25T06:43:50.143
> 
> 标签：php, request, echo, fputs

我正在使用下面的代码向 API 发布请求。出于调试目的：有没有办法回显此代码发送的完整请求（包括标头）？

```
$data = http_build_query($requests);
        $url = parse_url($urlfull);
        $host = $url['host'];
        $path = $url['path'];
        $fp = fsockopen('ssl://'.$host, 443, $errno, $errstr, 30);
        if ($fp){
            fputs($fp, "POST $path HTTP/1.1\r\n");
            fputs($fp, "Host: $host\r\n");
            fputs($fp, "Pragme: no-cache\r\n");
            fputs($fp, "Content-length: ". strlen($data) ."\r\n");
            fputs($fp, "Content-type: application/x-www-form-urlencoded\r\n\r\n");
            fputs($fp, $data);
            $result = '';
            while(!feof($fp)) {
                $result .= fgets($fp, 4096);
            }
        }
        else { 
        $errors = array(
            'status' => 'err', 
            'error' => "$errstr ($errno)"
            );
        }
        fclose($fp); 
```

# ibm-mq - 为什么我的 MQ 中的 CCSID 显示为 0？

> ID：15609122
> 
> 赞同：4
> 
> 时间：2013-03-25T06:43:52.670
> 
> 标签：ibm-mq, mq

我可以从我的 QMGR 的错误日志中看到如下错误：

```
- Process(27605.1) User(umts) Program(runmqtrm)
AMQ6047: Conversion not supported.

EXPLANATION:
WebSphere MQ is unable to convert string data tagged in CCSID 0 to data in
CCSID 0.
ACTION:
Check the WebSphere MQ Application Programming Reference Appendix and the
appropriate National Language Support publications to see if the CCSIDs  are
supported by your system. 
```

这表明 CCSID 为**0**；但是，我当前 QMGR 使用的 CCSID 是**819**

```
dis qmgr ccsid
 1 : dis qmgr ccsid
 QMNAME(QMUMBFEA)                        CCSID(819) 
```

那么CCSID有什么问题呢？是MQ错误还是其他？

顺便说一句，MQ 版本是**6.0.2.9**

请帮帮我，提前谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T14:03:32.800

它不是 MQ 错误。

只是您的放置应用程序将您的消息的 CCSID 设置为零。现在，队列管理器正在尝试将消息转换为它自己的 CCSID，但失败了。

您可以通过关闭应用程序用来放置消息的通道的通道转换来避免这种转换。

# java-me - Refresh Theme() 在 lwit 中给出数组索引越界异常

> ID：15609124
> 
> 赞同：0
> 
> 时间：2013-03-25T06:44:01.557
> 
> 标签：java-me, lwuit, lwuit-form

我正在使用 lwut 制作 j2me 手机应用程序。在一种形式中，我需要从容器中删除一个组件，然后必须添加另一个组件，然后我调用 refreshTheme() 和 revalidate() 函数，以便表单上的更改可以反映在屏幕，但有时调用这些函数会给出错误 "Array index out of bounds: 2>=2" 或 "Array index out of bounds 0>=0" 。这个错误并不总是出现。
那么有什么解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T12:59:22.630

这发生在违反 EDT 时，您应该在访问 LWUIT 时使用 callSerially()。

# iphone - 获取部署目标的错误

> ID：15609125
> 
> 赞同：0
> 
> 时间：2013-03-25T06:44:04.050
> 
> 标签：iphone, ios, ios4, ios6, iphone-5

收到以下错误。我已将部署目标从 5.0 更改为 4.3，出现此错误。如何使用部署目标 4.3 解决它？

> clang：错误：-stdlib=libc++ 的无效部署目标（需要 iOS 5.0 或更高版本） Command/Applications/Xcode2.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang 失败，退出代码为 1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T10:41:33.027

我自己解决了阙。删除以下错误。

clang: error: invalid deployment target for -stdlib=libc++（需要 iOS 5.0 或更高版本）来消除此错误。

> 转到构建设置。将 c++ 标准库设置为编译器默认值。该错误肯定会被删除。

# sorting - CUDA：如何在 GPU 上直接使用推力::sort_by_key？

> ID：15609126
> 
> 赞同：8
> 
> 时间：2013-03-25T06:44:05.760
> 
> 标签：sorting, cuda, thrust

Thrust 库可用于对数据进行排序。调用可能如下所示（带有键和值向量）：

```
thrust::sort_by_key(d_keys.begin(), d_keys.end(), d_values.begin()); 
```

在 CPU 上调用，`d_keys`并`d_values`在 CPU 内存中；大部分执行发生在 GPU 上。

但是，我的数据已经在 GPU 上了吗？如何使用 Thrust 库直接在 GPU 上执行高效排序，即`sort_by_key`从内核调用函数？

此外，我的数据由 `unsigned long long int`or的键`unsigned int`和始终为的数据组成`unsigned int`。我应该如何对这些类型进行推力调用？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-29T01:06:28.360

如问题 Talonmies linked 中所述，您不能从 CUDA 函数（例如`__device__`或`__global__`）调用 Thrust。但是，这并不意味着您不能通过 Thrust 使用设备内存中已有的数据。相反，您使用包装原始数据的推力向量从主机调用所需的推力函数。例如

```
//raw pointer to device memory
unsigned int * raw_data;
unsigned int * raw_keys;
//allocate device memory for data and keys
cudaMalloc((void **) &raw_data, N_data * sizeof(int));
cudaMalloc((void **) &raw_keys, N_keys * sizeof(int));

//populate your device pointers in your kernel 
kernel<<<...>>>(raw_data, raw_keys, ...);

...

//wrap raw pointer with a device_ptr to use with Thrust functions
thrust::device_ptr<unsigned int> dev_data_ptr(raw_data);
thrust::device_ptr<unsigned int> dev_keys_ptr(raw_keys);

//use the device memory with a thrust call
thrust::sort_by_key(d_keys, d_keys + N_keys, dev_data_ptr); 
```

当你用 包装它们时，指向的设备内存`raw_data`仍然`raw_keys`在设备内存中`Thrust::device_ptr`，所以当你从主机调用 Thrust 函数时，它不必将任何内存从主机复制到设备，反之亦然。也就是说，您使用设备内存直接在 GPU 上进行排序；唯一的开销是启动 Thrust 内核和包装原始设备指针。

当然，如果您之后需要在常规 CUDA 内核中使用原始指针，您可以取回原始指针：

```
unsigned int * raw_ptr = thrust::raw_pointer_cast(dev_data_ptr); 
```

至于使用`unsigned long long int`or`unsigned int`作为数据的键`unsigned int`，这不是问题，因为 Thrust 是模板化的。也就是说，签名`sort_by_key`为

```
template<typename RandomAccessIterator1 , typename RandomAccessIterator2 >
void thrust::sort_by_key(           
    RandomAccessIterator1   keys_first,
    RandomAccessIterator1   keys_last,
    RandomAccessIterator2   values_first ) 
```

这意味着您可以有不同类型的键和数据。只要你所有的键类型对于给定的调用都是同质的，Thrust 应该能够自动推断类型，你不需要做任何特别的事情。希望这是有道理的

# mysql - 如何在水晶报表中将 varchar 字段转换为日期格式？

> ID：15609127
> 
> 赞同：0
> 
> 时间：2013-03-25T06:44:07.253
> 
> 标签：mysql, crystal-reports, crystal-reports-2008, crystal-reports-xi, crystal-reports-2010

我有一个字段'DOB'，它在mysql中是varchar类型。当我选择语句时，我得到格式为1989/09/24 00:00:00.000的输出。我在水晶报告中得到相同的结果。我需要将其转换为 1989 年 9 月 9 日的格式。我在公式编辑器中找不到如何操作。请帮我解决这个问题。谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T11:31:36.477

试试这个，它首先获取 varchar 并删除日期之后的空格和时间戳，然后将剩下的内容转换为实际日期。完成后，您可以按照 Crystal 允许的任何方式格式化该字段。

```
CDate(Left({YourDateField}, Instr(1, {YourDateField}, " ") - 1)) 
```

只需将 YourDateField 替换为您要转换的字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T07:06:23.090

您可以通过以下查询转换日期格式 mysql 本身。

```
SELECT date_Format('1989/09/24', '%Y/%m/%d'); 
```

# svn - 只提交目录而不是其中的文件

> ID：15609131
> 
> 赞同：6
> 
> 时间：2013-03-25T06:44:23.183
> 
> 标签：svn

我正在使用 SVNKit 中提供的 API 使用以下代码将文件提交到 SVN

```
ourClientManager.getWCClient().doAdd(subFile, false, false, true, false);
ourClientManager.getCommitClient().doCommit(path, false, comment, false, false); 
```

当我提交一个新目录时，其中的文件会自动提交。（我已将递归设置为 false。）有没有办法阻止它？我想为提交的新目录和提交的文件传递不同的评论，所以我想分别提交它们。请建议是否有办法。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-27T02:13:12.990

在 svn 命令中，你会做`svn add --depth=empty mydirectory`

[使用 SVNKit，为SVNDepth](http://svnkit.com/javadoc/org/tmatesoft/svn/core/SVNDepth.html)参数传入 EMPTY 值，例如：

```
doAdd(mydirectory, false, false, false, SVNDepth.EMPTY) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-27T01:20:07.093

Luke给出的答案效果很好，但它不会在'mydirectory'中添加子目录，所以svn命令将是，

```
svn add -N mydirectory 
```

在“mydirectory”中输入并执行此命令，

```
svn propset svn:ignore '*.*'

svn commit -m "Adding directory structure only" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-11T17:59:21.477

ci 也需要 --depth 开关，就像 add 一样，你不必弄乱属性。

```
svn add --parents directory_with_WIP/*.pl
svn ci -m 'The new directory' --depth=empty directory_with_WIP
svn ci -m 'First file ready' directory_with_WIP/flibber.pl 
```

# java - 如何使用 Hamcrest 检查集合是否包含给定顺序的项目

> ID：15609132
> 
> 赞同：50
> 
> 时间：2013-03-25T06:44:26.240
> 
> 标签：java, collections, hamcrest

如果给定的集合包含给定顺序的给定项目，如何使用 Hamcrest 检查？我试过`hasItems`了，但它只是忽略了订单。

```
List<String> list = Arrays.asList("foo", "bar", "boo");

assertThat(list, hasItems("foo", "boo"));

//I want this to fail, because the order is different than in "list"
assertThat(list, hasItems("boo", "foo")); 
```

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-03-25T06:58:07.110

您可以改用`contains`matcher，但您可能需要使用最新版本的 Hamcrest。该方法检查订单。

```
assertThat(list, contains("foo", "boo")); 
```

`containsInAnyOrder`如果订单对您不重要，您也可以尝试使用。

这是`contains`匹配器的代码：

```
 public static <E> Matcher<Iterable<? extends E>> contains(List<Matcher<? super E>> itemMatchers)
  {
    return IsIterableContainingInOrder.contains(itemMatchers);
  } 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-06-18T12:14:56.900

要检查集合是否包含预期（给定）顺序的项目，您可以使用 Hamcrest 的`containsInRelativeOrder`方法。

来自 javadoc：

> 为 Iterable 创建一个匹配器，当单次通过检查的 Iterable 产生一系列项目时匹配，这些项目包含逻辑上等于指定项目中相应项目的项目，以相同的相对顺序 例如：assertThat(Arrays.asList(" a”、“b”、“c”、“d”、“e”）、包含InRelativeOrder（“b”、“d”））。

实际适用于 Java Hamcrest 2.0.0.0。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-25T07:00:08.890

你需要实现一个自定义匹配器，像这样

```
class ListMatcher extends BaseMatcher {
    String[] items;

    ListMatcher(String... items) {
        this.items = items;
    }

    @Override
    public boolean matches(Object item) {
        List list = (List) (item);
        int l = -1;
        for (String s : items) {
            int i = list.indexOf(s);
            if (i == -1 || i < l) {
                return false;
            }
            l = i;
        }
        return true;
    }

    @Override
    public void describeTo(Description description) {
        // not implemented
    }
}

@Test
public void test1() {
    List<String> list = Arrays.asList("foo", "bar", "boo");
    Assert.assertThat(list, new ListMatcher("foo", "boo"));
    Assert.assertThat(list, new ListMatcher("boo", "foo"));
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-23T19:16:47.750

接受的答案对我不起作用。它仍然失败，说

```
Expected: iterable containing ["foo", "boo"] but: Not matched: "bar" 
```

所以我写了自己的 IsIterableContainingInRelativeOrder，并[以 patch 的形式提交](https://groups.google.com/forum/#!topic/hamcrest-dev/FsLlyRcGPzs)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-01-12T17:56:35.297

我在[http://www.baeldung.com/hamcrest-collections-arrays找到了一个解决方案](http://www.baeldung.com/hamcrest-collections-arrays)

查找具有严格顺序示例的部分。

```
List<String> collection = Lists.newArrayList("ab", "cd", "ef");
assertThat(collection, contains("ab", "cd", "ef")); 
```

基本上你需要使用 contains Matcher ( `org.hamcrest.Matchers.contains`)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-10-30T19:13:55.470

您可以结合`is`和`equalTo`匹配器库。assert 语句看起来更长，但错误消息更好。由于`contains`是先失败，因此它在发现第一个不匹配时会中断，并且不会在列表的下方找到失败。在哪里`is`以及`equalTo`将打印您从中看到所有不匹配的整个列表。

使用示例`contains`

```
List<String> list = Arrays.asList("foo", "bar", "boo");
assertThat(list, contains("foo", "boo", "bar")); 
```

给出以下错误消息：

```
Expected: iterable containing ["foo", "boo", "bar"]
 but: item 1: was "bar" 
```

使用示例`is and equalTo`

```
List<String> list = Arrays.asList("foo", "bar", "boo");
assertThat(list, is(equalTo(Lists.newArrayList("foo", "boo", "bar")))); 
```

给出以下错误消息：

```
Expected: is <[foo, boo, bar]>
     but: was <[foo, bar, boo]> 
```

第二种方法不会告诉您不匹配的索引，但对我来说这仍然更好，因为您只需查看一次失败消息即可修复测试。而在方法一中，您将首先修复索引 1，运行测试，检测索引 2 处的不匹配并进行最终修复。

# ajax - 在另一个 ajax 函数的成功函数中使用 ajax 请求

> ID：15609133
> 
> 赞同：0
> 
> 时间：2013-03-25T06:44:30.497
> 
> 标签：ajax, wordpress, jquery

我正在向 Wordpress 中内置的应用程序添加一些自定义 JS 来设置约会，这样如果提出约会请求，客户端和工作人员都会收到请求电子邮件。通过按下按钮进行约会，通过将按钮绑定到 .click() 事件来进行请求。

为了发送邮件，我将 ajax 函数放在第一个 ajax 函数的success 函数中来批准约会，这样如果约会被批准，就会发送电子邮件。我试图设置它，但发现无论我做什么，success 函数中的第二个 ajax 函数都不会触发，它甚至不会正确报告错误是什么。

为了测试这是否是有问题的 ajax 函数本身，我将它从成功函数中取出并放在 $(document).ready(function() { }) 中，将其绑定到不同的事件以查看如果它会火 - 它确实发生了。所以函数本身不是问题，而是它在*另一个*ajax请求的成功函数内部。

我该怎么做才能让它着火？关于 Stack Overflow 的其他建议充其量是非常令人困惑的，所以请原谅我再次询问，但似乎没有明确的令人满意的答案。

这是我放在第一个 ajax 请求的回调函数中的代码，当我将它放在回调函数之外并将它绑定到不同的事件时，它运行得非常好。

```
 $.ajax({  
              type: "POST",  
              dataType: "JSON", 
              url: "[home url]/wp-admin/admin-ajax.php",  
              data: "action=finchJsonTest",  
              success: process_lesson_request,  
              error: function(MLHttpRequest, textStatus, errorThrown){  
                        alert(errorThrown);
                        alert("Something\'s not right!");   
              }  
       });                                     

              function process_lesson_request(data) {
                          alert("Hooray!");  
                          console.log(data);                                               
              } 
```

这是 Wordpress 调用来处理这个 ajax 请求的 php 函数（由数据字符串中的“action”变量确定）——没有什么太重要的事情发生，我只是在测试它是否会成功返回一个 JSON 对象

```
function finchJsonTest() { 
    $json_array[] = 'This is something!'; 
    $finaljson_array = json_encode($json_array); 
    echo $finaljson_array; 
    die(); 

}  

add_action( 'wp_ajax_nopriv_finchJsonTest', 'finchJsonTest' );  
add_action( 'wp_ajax_finchJsonTest', 'finchJsonTest' ); 
```

同样，如果我将这个 ajax 调用单独使用绑定到某个事件，它会完美运行并返回所需的 JSON 对象（只是说'这是某事'的文本），但如果我把它放在另一个 ajax 请求的成功回调函数中，它失败了，甚至不抛出错误是什么。事实上，我已经阅读了与此相关的其他 Stack Overflow 帖子，但无法确定要做什么。有什么想法吗？

# asp.net-mvc-3 - 我应该在 ajax get 中给出参数？

> ID：15609134
> 
> 赞同：0
> 
> 时间：2013-03-25T06:44:33.350
> 
> 标签：asp.net-mvc-3, jquery

这是我返回 json 的控制器操作

```
public ActionResult MapTest(string date)
        {
            var locations = _db.EMP_LOCATION.Where(m => m.CURRENT_DATE.Equals(date));
            return Json(locations,JsonRequestBehavior.AllowGet);
        } 
```

我的脚本在这里

```
var script = {
    callAction: function () {

        $.ajax({
            url: 'Home/MapTest',
            type:'GET',
            dataType: "json",
            success: function (message) {
                var count = message.length;
                for (var i = 0; i < count; i++) {
                    $('#maplong').append(message[i].LATITUDE, "  ", message[i].LONGITUDE," ");
                }
            },
            complete: function () {
                alert('completed');
            }
        });
    }
} 
```

现在我的问题是我可以在哪里给 $.ajax 中的日期参数以及如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T06:48:23.047

只需执行以下操作：

```
var script = {
    callAction: function () {

        $.ajax({
            url: 'Home/MapTest',
            type:'GET',
            data: JSON.stringify({ date: "your date" })
            dataType: "json",
            success: function (message) {
                var count = message.length;
                for (var i = 0; i < count; i++) {
                    $('#maplong').append(message[i].LATITUDE, "  ", message[i].LONGITUDE," ");
                }
            },
            complete: function () {
                alert('completed');
            }
        });
    }
} 
```

此致

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T06:51:36.387

您可以在 URL 中传递值，如下所示：

```
var script = {
    callAction: function () {
     var dateVal= "Your date";
        $.ajax({
            url: 'Home/MapTest?date='+dateVal,
            type:'GET',               
            dataType: "json",
            success: function (message) {
                var count = message.length;
                for (var i = 0; i < count; i++) {
                    $('#maplong').append(message[i].LATITUDE, "  ", message[i].LONGITUDE," ");
                }
            },
            complete: function () {
                alert('completed');
            }
        });
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T17:04:41.273

var script = { callAction: function () {

```
 $.ajax({
        url: 'Home/MapTest',
        type:'GET',
        dataType: "html",
        data: { date : "03/25/2013" },
        success: function (message) {
            var count = message.length;
            for (var i = 0; i < count; i++) {
                $('#maplong').append(message[i].LATITUDE, "  ", message[i].LONGITUDE," ");
            }
        },
        complete: function () {
            alert('completed');
        }
    });
} 
```

}

# android - MediaPlayer 停止工作并出现错误“队列中未找到事件 11，已取消？”

> ID：15609135
> 
> 赞同：0
> 
> 时间：2013-03-25T06:44:33.537
> 
> 标签：android, media-player, android-mediaplayer

到目前为止，我的应用程序非常简单。只是一个播放声音的按钮。问题是，如果我按下按钮太快，我会收到错误消息并且媒体播放器不再响应。

这是我的代码。

```
public class Keyboard extends Activity
{
    private MediaPlayer player = null;

    private OnTouchListener listener = new OnTouchListener() {
        @Override
        public boolean onTouch(View v, MotionEvent e) {
            switch (e.getActionMasked()) {
            case MotionEvent.ACTION_DOWN:
                System.out.println("down");
                player.start();
                break;
            case MotionEvent.ACTION_UP:
                System.out.println("up");
                player.pause();
                break;
            }
            return false;
        }
    };

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        player = MediaPlayer.create(getApplicationContext(),
                R.raw.bloop);
        player.setLooping(true);

        Button foo = (Button)findViewById(R.id.A);
        foo.setOnTouchListener(listener);
    }
} 
```

我所做的只是在按下按钮时调用 play()，在松开按钮时调用 pause()。这是典型日志的示例。

```
I/System.out( 1796): up
I/System.out( 1796): down
I/System.out( 1796): up
I/System.out( 1796): down
I/System.out( 1796): up
W/TimedEventQueue(   38): Event 2 was not found in the queue, already cancelled?
I/System.out( 1796): down
I/System.out( 1796): up
I/System.out( 1796): down
I/System.out( 1796): up 
```

如您所见，我的调试语句在出错后仍然有效，因此 OnTouchListener 仍然有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T00:35:34.290

从错误日志中，即`MediaPlayer Event 11 was not found in the queue, already cancelled`是警告而不是错误。请参考此[链接](http://androidxref.com/4.2.2_r1/xref/frameworks/av/media/libstagefright/TimedEventQueue.cpp#288)。因此，如果您`MediaPlayer`正在退出，那么应该还有其他问题。

`event`当预期从实际触发之前`triggered`删除的an 时，将打印此警告。`queue`这可能在多种情况下发生。例如，在 的情况下，所有玩家事件都被取消，如此[处](http://androidxref.com/4.2.2_r1/xref/frameworks/av/media/libstagefright/AwesomePlayer.cpp#1137)`pause`所示。

在你的情况下，我觉得可能的情况之一就是这样。`AwesomePlayer`会触发`event`从视频解码器读取下一个视频帧，即`mVideoSource`。在你按下`pause`这导致所有事件被删除之间。因此，当`TimedEventQueue`在此循环中触发时`threadRun`，它会观察到它`event`已被删除，因此日志。

# c++ - 使用刷新的输入从 C++ 调用 Matlab

> ID：15609137
> 
> 赞同：2
> 
> 时间：2013-03-25T06:44:42.110
> 
> 标签：c++, qt, matlab, mex, matlab-cvst

我正在开发一个需要我使用 Matlab c++ 共享库的 Qt 项目。我基本上是在处理我获得的图像，稍后我需要对它们进行进一步处理。

我绝对有必要在 C 平台获取图像，然后在需要时调用 Matlab 进行处理。我的图像以高速出现：每秒大约 100 帧。

问题是，每当我在循环中调用 Matlab 时，我都能够处理获取的图像，但不是实时的。Matlab 中的后续调用之间需要一到两秒钟。我假设它正在冲掉其他图像并仅绘制一些图像。

你能建议我一种方法，这样我就可以调用一次 Matlab 函数，并且我的输入可以实时更改。我不打算使用 Matlab 引擎，因为这需要我在每台计算机上安装 Matlab，我的项目才能继续运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T11:07:28.230

您是否正在使用 MATLAB Compiler 从 MATLAB 代码创建一个库，并期望能够每秒调用 100 次？

这不会发生——调用库的开销太高了。听起来您的图书馆可能也在做一些绘图，这也可能需要太长时间。

您也许可以考虑使用 MATLAB Coder 将您的 MATLAB 图像处理算法转换为 C 代码，然后将 C 代码直接集成到您的主代码中。MATLAB Coder 支持大部分图像处理工具箱，计算机视觉系统工具箱和许多与信号处理相关的工具箱也是如此。

# jquery - 如何使用jquery一一显示和隐藏每个div

> ID：15609139
> 
> 赞同：2
> 
> 时间：2013-03-25T06:44:59.883
> 
> 标签：jquery, delay, each, fadein, fadeout

我想创建一个快讯标题。
但我不知道问题出在哪里！: (
（因为我是网页设计的初学者 :D）
所以...

我想创建一个标题的一部分，显示（淡入）一个标题并延迟隐藏（淡出）......
然后显示下一个标题......（在没有停止的循环中）！

请帮助我学习如何创建和创建...：D 这些是我编写的代码：

```
<div id="flashNews">
    <div class="news">This is news title 1</div>
    <div class="news">This is news title 2</div>
    <div class="news">This is news title 3</div>
    <div class="news">This is news title 4</div>
    <div class="news">This is news title 5</div>
    <div class="news">This is news title 6</div>
    <div class="news">This is news title 7</div>
</div>

<script src="jquery-1.8.0.min.js" type="text/javascript"></script>
<script type="text/javascript">
    $(document).ready(function() {
        $('.news').each(function(index) {
            $(this).fadeIn('slow').delay(700).fadeOut('slow');
        });

    });
</script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T07:20:13.897

你可以试试这个。

它不是那么专业的代码，但应该可以工作。

这是 jsFiddle 解决方案：

[http://jsfiddle.net/migontech/sfUU6/](http://jsfiddle.net/migontech/sfUU6/)

```
var news = $('.news')
current = 0;
news.hide();
Rotator();
function Rotator() {
    $(news[current]).fadeIn('slow').delay(500).fadeOut('slow');
    $(news[current]).queue(function() {
        current = current < news.length - 1 ? current + 1 : 0;
        Rotator();
        $(this).dequeue();
    });
} 
```

**编辑**

这是您的变量的声明。重要的是，如您所见，我一开始就选择了 jQuery，并将其分配给变量。这样做的原因是因为如果你要在代码的每一行中使用这个选择器，然后调用 $('.news').dosomthing() 然后调用 $('.news').dosomethingelse()，jQuery 就会搜索每次调用这些元素时的 DOM。现在它会做一次。而且因为您使用的是类选择器，所以这是一个非常慢的选择器，而且您不必每次都这样做，以赢得性能。你可能不会注意到它，但仍然。:)

```
var news = $('.news')
current = 0; 
```

然后我们隐藏所有元素并开始第一次旋转。

```
news.hide();
Rotator(); 
```

现在，您可能对 Rotator() 函数有更多疑问。在这里你可以看到我保留了你原来的淡入淡出和淡出代码，但我把它放在一个函数中，只应用到当前选定的元素。我添加的是一个 jQuery.queue() ，它只会添加一个队列并等待上述所有效果完成，然后在内部代码中执行。

在那里我们只是增加我们的索引（'current'变量），或者如果它高于所选元素的长度，则设置回0，然后再次为当前索引调用Rotator（）。并且不要忘记 .dequeue() 最后告诉队列可以被删除并继续。

```
function Rotator() {
    $(news[current]).fadeIn('slow').delay(500).fadeOut('slow');
    $(news[current]).queue(function() {
        current = current < news.length - 1 ? current + 1 : 0;
        Rotator();
        $(this).dequeue();
    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T06:48:53.583

您为每个 li 设置相同的延迟。

尝试

```
$('.news').each(function(index,i)
{
    $(this).delay(index * 1001).fadeIn('slow').fadeOut('slow');
}); 
```

### [演示](http://jsfiddle.net/g4thL/9/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T06:56:34.467

下面的代码将旋转新闻...

```
<script src="jquery-1.8.0.min.js" type="text/javascript"></script>
    <script type="text/javascript">
    var divIndex=0;
    function ShowHideDivs(){
      maxval=parseInt($("#maxval").html());
      $("#news"+divIndex).fadeIn('slow').delay(700).fadeOut('slow');
      divIndex=(divIndex+1) % maxval;
    }
    window.setTimeout("ShowHideDivs()",10);
    </script>

    <div id="flashNews">
        <div id="news1" class="news">This is news title 1</div>
        <div id="news2" class="news">This is news title 2</div>
        <div id="news3" class="news">This is news title 3</div>
        <div id="news4" class="news">This is news title 4</div>
        <div id="news5" class="news">This is news title 5</div>
        <div id="news6" class="news">This is news title 6</div>
        <div id="news7" class="news">This is news title 7</div>
        <div style="display:none" id="maxval">7</div>
    </div> 
```

# javascript - 用 iframe 分割页面

> ID：15609143
> 
> 赞同：0
> 
> 时间：2013-03-25T06:45:14.343
> 
> 标签：javascript, google-chrome-extension, google-chrome-devtools

您好，我是韩国的新开发人员。

我不会说英语。...在撰写本文时。因此可能存在误译。(TT)

我在想。如果你通过谷歌API脚本注入屏幕的两个iframe或区域查看当前页面上的图像，添加到'd想分享一个谷歌开发者工具之类的......

可能吗？

感谢全球nimdeul高级开发者的建议... ^^

![](../Images/d4126bc6f571a5a66cb9ef860b508962.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T08:00:52.913

试试车架组...

例如：

```
<frameset cols="25%,*,25%">
  <frame src="frame_a.htm">
  <frame src="frame_b.htm">
  <frame src="frame_c.htm">
</frameset> 
```

*（虽然它在 html5 中不支持）*

# twitter-bootstrap - 悬停在模态按钮上时出现白条

> ID：15609145
> 
> 赞同：0
> 
> 时间：2013-03-25T06:45:21.127
> 
> 标签：twitter-bootstrap

这是我正在使用引导程序开发的网络，但是在使用带有侧边栏的模态按钮时我遇到了一些问题。

链接：[http ://cms.host.dev4web.co/](http://cms.host.dev4web.co/)

将鼠标悬停在按钮（统计和热点）上时会有一个白条。有谁知道如何解决这个问题？

编辑：也可以使侧边栏行可滚动吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T11:28:44.560

我认为这两个模态按钮应用了这种样式，因为它们是 UL 中的锚标记，并应用了 .nav 类。

因此，它们应用了一些 css，这意味着应用于 .nav 列表中的锚标记，该列表覆盖应用于锚标记的 .btn 和 .btn-waring 和 .btn-danger 类的一部分.

除非您随后在自定义 css 文件中覆盖该 UL 的默认样式，否则您不应该真正使用带有 .nav UL 的 .btn 类的锚标记。

这是导致您的问题的引导 css 文件中的 css。

```
.nav > li > a:hover, .nav > li > a:focus {
  text-decoration: none;
  background-color: #eeeeee;
} 
```

# ios - 将 objc_setAssociatedObject 用于类对象是否正确？

> ID：15609149
> 
> 赞同：4
> 
> 时间：2013-03-25T06:45:37.573
> 
> 标签：ios, objective-c, class, static, static-variables

`objc_setAssociatedObject`用于类对象是否正确？

我们经常使用像这样的静态变量来模拟类变量： [Objective C Static Class Level variables](https://stackoverflow.com/questions/1063229/objective-c-static-class-level-variables) 但是，我们可以使用关联对象作为替代吗？

```
objc_setAssociatedObject([self class], &STRING_KEY, myString, OBJC_ASSOCIATION_RETAIN); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T09:02:01.593

是的，类对象是一个成熟的对象，所以你可以对它做任何你可以用普通对象做的事情。

但是，使用全局变量更清晰、更简单。

ps 关联它与`[self class]`使用全局变量不同，因为`[self class]`它会为您提供当前对象的实际类，这可能会因子类继承此方法而有所不同。而对于全局变量，它始终是同一个变量。

# c# - 在包含对象属性的列表中查找

> ID：15609150
> 
> 赞同：0
> 
> 时间：2013-03-25T06:45:49.563
> 
> 标签：c#

我正在尝试查找列表中的哪些项目满足特定条件。

我有一个`List<Employee>`，每个`Employee`都有一个`List<Role>`属性。每个`Role`都有一个`ID`作为属性。我正在尝试查找列表`Employee`中具有特定值`Role ID`的所有 s。这是我的非工作样本：

```
var query = EmployeeList.Where(employee=> employee.Roles.Contains(role => role.ID == roleID)).ToList(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T06:47:16.090

使用[Enumerable.Any](http://msdn.microsoft.com/en-us/library/bb534972.aspx)

```
var query = EmployeeList.Where(employee => employee.Roles
                                                   .Any(role => role.Id == roleID))
                                                   .ToList(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-25T06:47:19.663

您可以将您的更改`Contains`为`Any`（因为您只是在检查员工的*任何*角色是否符合您的条件）：

```
var query = EmployeeList.Where(employee => employee.Roles
                                                 .Any(role => role.ID == roleID))
                        .ToList(); 
```

请注意，这不会是一种非常有效的方法 - 必须检查每个员工，以及每个员工的每个角色。如果您需要经常使用相同的一组员工但不同的角色 ID 执行此操作，您可以构建从角色 ID 到员工的查找：

```
var lookup = EmployeeList.SelectMany(e => e.Roles,
                                     (e, r) => new { Employee = e, Role = e })
                         .ToLookup(pair => pair.Role.ID,
                                   pair => pair.Employee); 
```

然后，您可以使用：

```
foreach (var employee in lookup[roleID])
{
    ....
} 
```

# wxpython - wx.ListCtrl 总是在 Windows 上显示图标

> ID：15609151
> 
> 赞同：0
> 
> 时间：2013-03-25T06:45:50.100
> 
> 标签：wxpython, listctrl

我正在使用 wxPython`wx.ListCtrl`来显示表格。对于每一列，我使用该`InsertImageStringItem`方法插入新行并用于`SetStringItem`添加其他列。在该`InsertImageStringItem`方法中，我使用`-1`的是图像索引，因此它不应在第一列中显示任何图标。这在 Mac OS X 上完美运行。但在 Windows 上，第一列始终显示图像索引为 0 的图标。

有谁知道是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T14:32:33.383

Windows 本机小部件可能需要图像，因为您告诉它您要插入一个。如果您不想在第一列中插入图像，则只需使用 InsertStringItem 代替。

**编辑：**

根据 wxPython 的创建者 Robin Dunn 的说法：

*在 Windows 上，本机 ListView 控件有一个“功能”，如果你给它一个图像列表，那么它会假设你想要显示带有图像的项目，所以它会自动为它们保留空间。解决此问题的一种方法是将所有内容向右移动一列，因此第一列除了为图像保留的空间外没有任何内容。然后你可以将该列的宽度设置为零。*

来源：[http ://wxpython-users.1045709.n5.nabble.com/wx-ListCtrl-and-its-image-list-td2315539.html](http://wxpython-users.1045709.n5.nabble.com/wx-ListCtrl-and-its-image-list-td2315539.html)

# iphone - 使用 webservice 刷新时如何知道数据是否更新

> ID：15609157
> 
> 赞同：0
> 
> 时间：2013-03-25T06:46:11.160
> 
> 标签：iphone, ios, objective-c, caching

我对 iPhone/iOS 有点陌生。并希望在刷新后检查数据是否已更新/修改，以便如果未更新，我不需要再次加载数据。

请建议我这样做的更好方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T06:54:45.260

1）第一次，从服务器获取所有记录以及`server date`（检查日期参数，如果为空，则服务器传递所有记录，即第一次启动应用程序）。

2）将其存储`date`在`NSUserDefaults`.

3）第二次通过那个`date`while请求，如果`date`不是null（请求不是第一次）。

4）服务器检查更新的记录（记录大于`date`您通过的记录）。

```
NSString *strTodaysDate = @"";
if ([[NSUserDefaults standardUserDefaults] valueForKey:@"SyncDone"] != nil)
{
     //If sync all data is done first time, then pass server date else pass empty date parameter.
     strTodaysDate = [NSString stringWithFormat:@"%@",[[NSUserDefaults standardUserDefaults] valueForKey:@"SyncDate"]];
} //call web service with strTodaysDate as a parameter. 
```

# iphone - 如何将字体系列和字体大小动态传递给 UILabel？

> ID：15609159
> 
> 赞同：-1
> 
> 时间：2013-03-25T06:46:15.497
> 
> 标签：iphone, font-family

```
cell.textLabel.font = [UIFont fontWithName:@"Helvetica-Bold" size:8.0]; 
```

是否可以动态传递字体系列的名称和大小来标记 iPhone 中单元格的文本？

```
NSString *selectorString =@"Helvetica-Bold";
cell.textLabel.font = [UIFont fontNamesForFamilyName:@"%@",selectorString]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T07:00:17.050

试试这个它可以帮助你。

```
UILabel *titlelbl=[[UILabel alloc] initWithFrame:CGRectMake(80, 0, 150, 40)];
titlelbl.font = [UIFont fontWithName:@"Helvetica-Bold" size:17];
titlelbl.textAlignment=UITextAlignmentCenter;
titlelbl.textColor=[UIColor blackColor]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T07:05:33.053

```
#define FONT_HELVETICA_BOLD @"Helvetica-Bold"
#define FONT_SIZE 14.of

cell. textLabel.font=[UIFont fontWithName:FONT_HELVETICA_BOLD size:FONT_SIZE]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T06:48:45.577

你可以这样设置

```
float fontSize = 14.0f;
NSString *selectorString =@"Helvetica-Bold";
cell.textLabel.font = [UIFont fontWithName:[NSString stringWithFormat:@"%@",selectorString] size:fontSize]; 
```

# javascript - 更改为 live 或 on 时，click 功能不起作用

> ID：15609163
> 
> 赞同：1
> 
> 时间：2013-03-25T06:46:23.197
> 
> 标签：javascript, ajax, jquery

我有一个使用 ajax 在我的一个网站中加载内容的功能。

这一切都很好，但在某些部分，因为引入了具有更多链接的新内容，我需要使点击功能成为实时点击功能，但是当我执行 ajax 停止工作并且它只是正常更改页面（没有 ajax）

这是我的代码

```
function ajaxLoads(){

    var $btn = $('a.ajax-btn');
    var $container = $('#load');
    var siteTitle = document.title;
    //var $artistBG = $('#artist-viewport img');

    $btn.click(function(e){

        console.log();

        e.preventDefault();
        $btn.removeClass('selected');
        //$artistBG.removeClass('top');

        var sourceTarget = $(this).data('page'),
        slideWidth = $container.width(),
        $this = $(this),
        $background = $this.data('background'),
        pageUrl=$this.attr('href'),
        pageTitle = $this.html();
        //$changeTo = $("#artist-viewport img[data-background='"+ $background +"']");

        $this.addClass('selected');
        //$changeTo.addClass('top');
        $container.animate({'right':-slideWidth}, 300, 'easeInExpo');

        $container.load(pageUrl+" "+sourceTarget, function(){

            subNav();   

            $("html, body").animate({ scrollTop: 0 }, 500, 'easeInExpo', function(){
                $container.animate({'right':0}, 300, 'easeInExpo');
            });         

            var pageContent = $(this).html();

            window.history.pushState({"html":pageContent, "pageTitle": pageTitle},"", pageUrl);
            //document.title=pageTitle+" :: "+siteTitle;

        }); // end load function    

    }); // end click function   

    window.onpopstate = function(e){
        if(e.state){
            $container.css('opacity', 0).html(e.state.html).fadeTo('fast', 1);
            document.title=e.state.pageTitle+" :: "+siteTitle;
        }
    };  

} 
```

我试过改变`$btn.click(function(e) to $btn.live('click', function(e) and to $btn.on('click', function(e)`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T06:56:39.260

添加`.on`在文档上。

```
$(document).on('click','a.ajax-btn',function(){   }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T06:52:33.260

尝试`on`

```
 $('#load').on('click', '.ajax-btn', function(){
     ...
 }); 
```

live 在 jquery 1.8 中被弃用并在 1.9 中被删除.. 所以使用[`on()`](http://jq4you.blogspot.com/2013/02/jquery-direct-and-delegate-on-event.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T06:55:12.267

给你的按钮一个 CSS 类并使用它

```
$(document).on("click",".yourcssclass",function(e){}); 
```

这将起作用，因为默认情况下，大多数事件会从原始事件目标冒泡到文档元素。虽然这会降低性能，但单击事件很少发生，您可以将其用作解决问题的方法。然后，当您有时间时，请尝试通过仔细查看您的页面周期来了解为什么使用委托不起作用。

# ruby-on-rails - 未初始化的初始化常量

> ID：15609169
> 
> 赞同：1
> 
> 时间：2013-03-25T06:46:53.937
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, gem

我在初始化程序文件夹下创建了一个 settings.rb 文件，其中包含应用程序启动后需要初始化的值。但是，在运行 rails s 我得到一个“未初始化的 contant Settings(NameError)

设置.rb

```
Settings.defaults[:single_phase] = 500
Settings.defaults[:three_phase]  = 300 
```

我已经创建了迁移以伴随它和视图。

问题出在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T07:27:36.483

在初始化程序运行时，它们无权访问模型（它是模型吗？）。

如果它不是模型，您可以执行以下操作：

```
SETTINGS = {}
SETTINGS[:single_phase] = 500 
```

但是，我觉得[figaro](https://github.com/laserlemon/figaro) gem 可能对您尝试做的事情有所帮助。

您还可以在 application.rb 和环境文件中添加任意设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T07:00:13.550

在你的 config/application_settings.rb

```
development:
  single_phase: 200 
```

并在您的应用程序的任何地方使用它

```
APP_SETTINGS['single_phase'] 
```

返回 200

# c++ - 使用蒙版获取图像像素

> ID：15609170
> 
> 赞同：0
> 
> 时间：2013-03-25T06:46:54.037
> 
> 标签：c++, ios, objective-c, cocos2d-iphone, shader

所以我有一些原始图像。

我需要使用特定的蒙版获取并显示此图像的某些部分。掩码不是矩形或形状。它包含不同的多边形和形状。

是否有任何方法或教程如何实现它？或者从哪里开始做这个？我应该写一些小着色器或比较图像的适当像素或类似的东西吗？

很高兴有任何建议。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T07:12:37.753

您可以将图像放在 UIImageView 中，并使用类似的东西向该图像视图添加蒙版

```
myImageView.layer.mask = myMaskLayer; 
```

要绘制您的自定义形状，myMaskLayer 应该是您自己的实现该`drawInContext`方法的 CALayer 子类的实例。该方法应该使用完整的 alpha 绘制要在图像中显示的区域以及使用零 alpha 隐藏的区域（如果您愿意，也可以在 alpha 之间使用）。这是一个 CALayer 子类的示例实现，当它用作图像视图上的掩码时，将只显示图像左上角的椭圆形区域：

```
@interface MyMaskLayer : CALayer
@end

@implementation MyMaskLayer
- (void)drawInContext:(CGContextRef)ctx {
    static CGColorSpaceRef rgbColorSpace;
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        rgbColorSpace = CGColorSpaceCreateDeviceRGB();
    });

    const CGRect selfBounds = self.bounds;
    CGContextSetFillColorSpace(ctx, rgbColorSpace);
    CGContextSetFillColor(ctx, (CGFloat[4]){0.0, 0.0, 0.0, 0.0});
    CGContextFillRect(ctx, selfBounds);
    CGContextSetFillColor(ctx, (CGFloat[4]){0.0, 0.0, 0.0, 1.0});
    CGContextFillEllipseInRect(ctx, selfBounds);
}
@end 
```

要将这样的遮罩层应用于图像视图，您可以使用这样的代码

```
MyMaskLayer *maskLayer = [[MyMaskLayer alloc] init];
maskLayer.bounds = self.view.bounds;
[maskLayer setNeedsDisplay];
self.imageView.layer.mask = maskLayer; 
```

现在，如果您想从这样的渲染中获取像素数据，最好渲染到由您控制像素缓冲区的位图支持的 CGContext 中。您可以在渲染后检查缓冲区中的像素数据。这是一个示例，我创建了位图上下文并将图层和蒙版渲染到该位图上下文中。由于我为像素数据提供了自己的缓冲区，因此我可以在缓冲区中四处寻找渲染后的 RGBA 值。

```
const CGRect imageViewBounds = self.imageView.bounds;
const size_t imageWidth = CGRectGetWidth(imageViewBounds);
const size_t imageHeight = CGRectGetHeight(imageViewBounds);
const size_t bytesPerPixel = 4;
// Allocate your own buffer for the bitmap data.  You can pass NULL to
// CGBitmapContextCreate and then Quartz will allocate the memory for you, but
// you won't have a pointer to the resulting pixel data you want to inspect!
unsigned char *bitmapData = (unsigned char *)malloc(imageWidth * imageHeight * bytesPerPixel);
CGContextRef context = CGBitmapContextCreate(bitmapData, imageWidth, imageHeight, 8, bytesPerPixel * imageWidth, rgbColorSpace, kCGImageAlphaPremultipliedLast);
// Render the image into the bitmap context.
[self.imageView.layer renderInContext:context];
// Set the blend mode to destination in, pixels become "destination * source alpha"
CGContextSetBlendMode(context, kCGBlendModeDestinationIn);
// Render the mask into the bitmap context.
[self.imageView.layer.mask renderInContext:context];
// Whatever you like here, I just chose the middle of the image.
const size_t x = imageWidth / 2;
const size_t y = imageHeight / 2;
const size_t pixelIndex = y * imageWidth + x;
const unsigned char red = bitmapData[pixelIndex];
const unsigned char green = bitmapData[pixelIndex + 1];
const unsigned char blue = bitmapData[pixelIndex + 2];
const unsigned char alpha = bitmapData[pixelIndex + 3];
NSLog(@"rgba: {%u, %u, %u, %u}", red, green, blue, alpha); 
```

# android - 更改android中的视频播放速率

> ID：15609178
> 
> 赞同：4
> 
> 时间：2013-03-25T06:47:28.053
> 
> 标签：android, android-video-player, android-audiorecord

我正在开发一个录像机，它应该只改变声音的频率和音高。视频应该以相同的速率播放。我使用 Soundpool 库来更改 android 中的声音速率，但它说它只适用于音频文件。同时对于视频录制，我正在使用 Mediarecorder 库。我使用了 setAudioSamplingRate 但它只是改变了声音的频率而不是音高。你能告诉我解决办法吗。

问候

# c# - LongListSelector 无法更改 ItemsSource

> ID：15609179
> 
> 赞同：2
> 
> 时间：2013-03-25T06:47:38.010
> 
> 标签：c#, windows-phone-7, itemssource, longlistselector

我似乎无法更改*LongListSelector*中的*ItemsSource*。经过一些研究，*LongListSelector似乎忽略了**ItemsSource*中的任何更改。我正确吗？g 如果是，是否有解决方法？

 ***这就是我想要做的。我可以选择按国家或城市对城市列表进行排序。像这样的东西：

```
var groupByCountry = from City in App.ViewModelCity.Items
                                group city by city.GroupByCountry into c
                                orderby c.Key
                                select new Group<Currency>(c.Key, c);

var groupByCity = from City in App.ViewModelCity.Items
                                group city by city.GroupByCity into c
                                orderby c.Key
                                select new Group<City>(c.Key, c); 
```

所以基本上两者都是一样的，只是分组不同。我的想法是简单地将*ItemsSource*更改为**groupByCountry**或**groupByCity**，具体取决于用户选择。不幸的是，更改*ItemsSource*没有任何效果。它根本不会更新。只有当应用程序重新启动（存储首选源）时，*LongListSelector*才会更新。

那么有没有办法强制*LongListSelector*更新*ItemsSource*？如果没有，什么是好的解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-02T09:50:16.483

我在 WP7 中开发，在实际分配之前将 ItemSource 设置为 null，以便 UI 将更新新的 ItemSource。

```
LongListSelectorA.ItemsSource = null;
Binding b;
b = new Binding("CollectionInViewModel");
LongListSelectorA.SetBinding(LongListSelector.ItemsSourceProperty, b); 
```

试一试，祝你好运。:)***

# c - 意外结果 c while

> ID：15609185
> 
> 赞同：0
> 
> 时间：2013-03-25T06:47:48.543
> 
> 标签：c, testing

嗨，我试图理解为什么如果输入 9 或以上来判断它通过但它不应该导致 if 说 >= 4 和 <= 8

谢谢

```
while(!(judge >= 4) && (judge <= 8))
{
    printf("How many judges are there ? Enter a number between 4 - 8 \n");
    scanf("%d", &judge);
    while(!(judge >= 4) && (judge <= 8))
    {
        printf("You entered %d Enter a number between 4 - 8 \n", judge);
        scanf("%d", &judge);
        if((judge >= 4) && (judge <= 8))
        {
            break;
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T06:49:21.523

看起来你缺少一对括号

```
while(!((judge >= 4) && (judge <= 8)))
       ^                            ^ 
```

（这个错误出现在两个地方。）

顺便说一句，您可以通过像这样重组代码来避免大量重复：

```
printf("How many judges are there ? Enter a number between 4 - 8 \n");
for (;;) {
    scanf("%d", &judge);
    if (judge >= 4 && judge <= 8) {
        break;
    }
    printf("You entered %d Enter a number between 4 - 8 \n", judge);
} 
```

# javascript - HTML 页面中的搜索功能

> ID：15609190
> 
> 赞同：-1
> 
> 时间：2013-03-25T06:48:19.870
> 
> 标签：javascript, html, search

这是我的要求：

我的服务器中有一些 HTML 文件，以及一个包含搜索文本框和提交按钮的主 HTML 文件。用户将在该文本框中输入关键字，如果该单词存在，则必须突出显示该单词及其所在的 URL。否则显示字未找到。

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T06:50:59.053

通常，您需要在服务器端执行此操作，但这可以在客户端完成。

使用脚本来提取所有 HTML 文件，然后为它们编制关键字索引，然后允许用户搜索此内存索引并根据需要重定向浏览器。

缺点是客户端初始化和索引构建至少需要几秒钟。

否则，您将在服务器端实现搜索，您是否启用了 PHP、ASP.NET、JSP 等？

或者，为什么不让谷歌用这个`site:`词来搜索你呢？

# android - 填充不同大小的布局

> ID：15609193
> 
> 赞同：1
> 
> 时间：2013-03-25T06:48:25.683
> 
> 标签：android, android-layout

在我的应用程序中，我添加了一些图像。我使用 dp 进行所有测量。当我在 Eclipse 中看到不同尺寸的测试时，我可以看到它在不同的设备中显示不同。

![在此处输入图像描述](../Images/19a49fd2f092f32f1b44a31dac79f099.png)

（见棒棒糖填充不同的长度）。

请让我知道避免这种情况并在所有设备中创建类似的外观

以下是布局。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:weightSum="15" 
android:orientation="vertical">  

<LinearLayout
    android:id="@+id/ll0"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_weight="5"  
    android:orientation="horizontal" > 

                <LinearLayout
                android:id="@+id/ll1"
                android:layout_width="wrap_content"
                android:layout_height="fill_parent"
                android:layout_weight="4"  
                android:orientation="vertical" > 

                    <LinearLayout
                    android:id="@+id/ll1A" 
                    android:layout_weight="3" 
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:orientation="vertical" >
                        <ImageButton
                        android:id="@+id/imOption1"
                        android:layout_width="90dp"
                        android:layout_height="90dp" 
                        android:layout_gravity="center"
                        android:background="@drawable/repeat" />
                    </LinearLayout>

                    <LinearLayout
                    android:id="@+id/ll1B" 
                    android:layout_weight="3" 
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:orientation="vertical" >
                        <ImageButton
                         android:id="@+id/imOption2"
                        android:layout_width="90dp"
                        android:layout_height="90dp"
                        android:layout_gravity="center" 
                         android:background="@drawable/repeat"/> 
                     </LinearLayout>

                    <LinearLayout
                        android:id="@+id/ll1C" 
                        android:layout_weight="3" 
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:orientation="vertical" >

                        <ImageButton
                        android:id="@+id/imOption3"
                        android:layout_width="90dp"
                        android:layout_height="90dp"
                        android:layout_gravity="center" 
                        android:background="@drawable/repeat"/>
                    </LinearLayout>
            </LinearLayout> 

                <LinearLayout
                android:id="@+id/ll2"
                android:layout_width="wrap_content"
                android:layout_height="fill_parent"
                android:layout_weight="4"  
                android:orientation="vertical" > 

                    <LinearLayout
                    android:id="@+id/ll2A" 
                    android:layout_weight="3" 
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:orientation="vertical" >
                        <ImageButton
                        android:id="@+id/imOption4"
                        android:layout_width="90dp"
                        android:layout_height="90dp" 
                        android:layout_gravity="center"
                        android:background="@drawable/repeat" />
                    </LinearLayout>

                    <LinearLayout
                    android:id="@+id/ll2B" 
                    android:layout_weight="3" 
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:orientation="vertical" >
                        <ImageButton
                         android:id="@+id/imOption5"
                        android:layout_width="90dp"
                        android:layout_height="90dp"
                        android:layout_gravity="center" 
                         android:background="@drawable/repeat"/> 
                     </LinearLayout>

                    <LinearLayout
                        android:id="@+id/ll2C" 
                        android:layout_weight="3" 
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:orientation="vertical" >

                        <ImageButton
                        android:id="@+id/imOption6"
                        android:layout_width="90dp"
                        android:layout_height="90dp"
                        android:layout_gravity="center" 
                        android:background="@drawable/repeat"/>
                    </LinearLayout>
            </LinearLayout>

            <LinearLayout
                android:id="@+id/ll3"
                android:layout_width="wrap_content"
                android:layout_height="fill_parent"
                android:layout_weight="4"  
                android:orientation="vertical" > 

                    <LinearLayout
                    android:id="@+id/ll3A" 
                    android:layout_weight="3" 
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:orientation="vertical" >
                        <ImageButton
                        android:id="@+id/imOption7"
                        android:layout_width="90dp"
                        android:layout_height="90dp" 
                        android:layout_gravity="center"
                        android:background="@drawable/repeat" />
                    </LinearLayout>

                    <LinearLayout
                    android:id="@+id/ll3B" 
                    android:layout_weight="3" 
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:orientation="vertical" >
                        <ImageButton
                         android:id="@+id/imOption8"
                        android:layout_width="90dp"
                        android:layout_height="90dp"
                        android:layout_gravity="center" 
                         android:background="@drawable/repeat"/> 
                     </LinearLayout>

                    <LinearLayout
                        android:id="@+id/ll3C" 
                        android:layout_weight="3" 
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:orientation="vertical" >

                        <ImageButton
                        android:id="@+id/imOption9"
                        android:layout_width="90dp"
                        android:layout_height="90dp"
                        android:layout_gravity="center" 
                        android:background="@drawable/repeat"/>
                    </LinearLayout>
            </LinearLayout>  

            <LinearLayout
                android:id="@+id/ll4"
                android:layout_width="wrap_content"
                android:layout_height="fill_parent"
                android:layout_weight="3"
                android:weightSum="9"
                android:background="#FFFF99" 
                android:orientation="vertical" >  

             <LinearLayout
              android:id="@+id/ll4A"
              android:layout_alignParentLeft="true" 
              android:layout_width="fill_parent"
              android:layout_height="wrap_content"
              android:orientation="vertical" >
                  <ImageView
                      android:id="@+id/ivDisplayArea"
                      android:layout_width="wrap_content"
                      android:layout_height="wrap_content"
                      android:scaleType="centerCrop" 
                      android:layout_gravity="center"
                      android:background="@drawable/repeat"/>
                   </LinearLayout>  
            </LinearLayout>
</LinearLayout>
 <LinearLayout
    android:id="@+id/ll5"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_weight="10"  
    android:orientation="horizontal"> 
             <TextView
             android:layout_width="wrap_content"
             android:layout_height="wrap_content"
             android:layout_gravity="center"
             android:gravity="center"
             android:background="#FF6633"
             android:text="Reward Account "
             android:textColor="#FFFFFF"
             android:textStyle="bold" />

            <ImageButton
                 android:id="@+id/bReward1"
                 android:layout_width="30dp"
                 android:layout_height="30dp"
                 android:layout_gravity="center" 
                 android:layout_marginLeft="10dp"
                 android:background="@drawable/lollipop" /> 

            <ImageButton
                 android:id="@+id/bReward2"
                 android:layout_width="30dp"
                 android:layout_height="30dp"
                 android:layout_gravity="center" 
                 android:layout_marginLeft="7dp"
                 android:background="@drawable/lollipop" /> 

            <ImageButton
                 android:id="@+id/bReward3"
                 android:layout_width="30dp"
                 android:layout_height="30dp"
                 android:layout_gravity="center" 
                 android:layout_marginLeft="7dp"
                 android:background="@drawable/lollipop" /> 

            <ImageButton
                 android:id="@+id/bReward4"
                 android:layout_width="30dp"
                 android:layout_height="30dp"
                 android:layout_gravity="center" 
                 android:layout_marginLeft="7dp"
                 android:background="@drawable/lollipop" /> 

            <ImageButton
                 android:id="@+id/bReward5"
                 android:layout_width="30dp"
                 android:layout_height="30dp"
                 android:layout_gravity="center" 
                 android:layout_marginLeft="7dp"
                 android:background="@drawable/lollipop" /> 

            <ImageButton
                 android:id="@+id/bReward6"
                 android:layout_width="30dp"
                 android:layout_height="30dp"
                 android:layout_gravity="center" 
                 android:layout_marginLeft="7dp"
                 android:background="@drawable/lollipop" /> 

            <ImageButton
                 android:id="@+id/bReward7"
                 android:layout_width="30dp"
                 android:layout_height="30dp"
                 android:layout_gravity="center" 
                 android:layout_marginLeft="7dp"
                 android:background="@drawable/lollipop" /> 

            <ImageButton
                 android:id="@+id/bReward8"
                 android:layout_width="30dp"
                 android:layout_height="30dp"
                 android:layout_gravity="center" 
                 android:layout_marginLeft="7dp"
                 android:background="@drawable/lollipop" /> 

            <ImageButton
                 android:id="@+id/bReward9"
                 android:layout_width="30dp"
                 android:layout_height="30dp"
                 android:layout_gravity="center" 
                 android:layout_marginLeft="7dp"
                 android:background="@drawable/lollipop" /> 

            <ImageButton
                 android:id="@+id/bReward10"
                 android:layout_width="30dp"
                 android:layout_height="30dp"
                 android:layout_gravity="center" 
                 android:layout_marginLeft="7dp"
                 android:background="@drawable/lollipop" /> 

</LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T06:53:12.027

这实际上是正确的行为。无论屏幕密度或屏幕尺寸如何，Android 都会确保图形项保持相同的物理尺寸。

因此，如果您选择的按钮图形图像的大小与人的指尖一样大，那么无论设备特性如何，该图形都应始终以完全相同的物理尺寸（即英寸大小）显示。

* * *

如果您希望屏幕的布局方式使其在所有设备上看起来都相同，并且根据屏幕尺寸进行缩放以使相同的外观变大或变小，那么有两种方法可以做到这一点：

1.  不要使用*Density-Independent-Pixels* " `dip`" （或等效的 " `dp`"），而是使用*Scale-Independent-Pixels* " `sip`" （或等效的 " `sp`" - 随系统字体大小缩放）或 " `px`" （用于 *像素*）来定义您的图形组件大小。
2.  不要将所有图像添加到“res/drawable”文件夹，而是将具有相同文件名的不同尺寸图像添加到各种“res/drawable-ldpi”、“res/drawable-mdpi”、“res/drawable-hdpi”和“res/drawable-xhdpi”文件夹。

您必须尝试使用​​图像大小才能正确设置，但比率在此处定义：[启动器图标：大小和格式](http://developer.android.com/guide/practices/ui_guidelines/icon_design_launcher.html#size)

# php - 从 Magento Connect 中删除扩展程序

> ID：15609194
> 
> 赞同：2
> 
> 时间：2013-03-25T06:48:35.123
> 
> 标签：php, magento

我想从 Magento Connect 中删除我的两个扩展，因为这些扩展尚未得到 Magento 团队的批准。我找不到任何方法来做到这一点。谁能告诉我如何从 Magento Connect 中删除我未经批准的扩展程序？

# dynamics-crm-2011 - 使用 C# 从 CRM 中检索前五个机会

> ID：15609196
> 
> 赞同：2
> 
> 时间：2013-03-25T06:48:42.310
> 
> 标签：dynamics-crm-2011

我已经编写了从动态 CRM 中检索机会实体的代码，有什么方法可以根据收入仅检索前五个实体？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T18:17:50.727

```
 QueryExpression query_ = null;
            RetrieveMultipleRequest requests_ = null;

            query_ = new QueryExpression();
            query_.EntityName = "opportunity";
            query_.ColumnSet = new ColumnSet(true);
            query_.Orders.Add(new OrderExpression("estimatedvalue", OrderType.Descending));
            query_.PageInfo.Count = 5;
            query_.PageInfo.PageNumber = 1;

            requests_ = new RetrieveMultipleRequest();
            requests_.Query = query_;
            EntityCollection collection = _sdk.RetrieveMultiple(requests); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T10:24:32.210

在查询表达式中，您可以设置

```
queryExpression.PageInfo.Count = 5; 
```

不要忘记放置一个特定的顺序，在 FetchXml 中你可以这样设置：

```
<fetch mapping="logical" count="0" version="1.0"> 
```

# javascript - 如何从 CKEditor 中删除选定的文本？

> ID：15609200
> 
> 赞同：2
> 
> 时间：2013-03-25T06:49:09.577
> 
> 标签：javascript, ckeditor

我正在开发一个使用 CKEditor 的应用程序。我提供了一个名为 clear 的按钮。每当用户选择文本的某些部分并单击清除按钮时，只有选定的文本应该被删除。

我在我的应用程序中使用了以下代码，但是每当用户单击清除按钮时，不仅选择的文本而且整个内容都会被删除。

```
 function clear_onclick() {
        CKEDITOR.instances.message.setData('');
 } 
```

如何在 ASP.Net MVC2 中单击清除按钮时从 CKEditor 中清除选定的文本？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-25T07:54:04.027

这将完成这项工作：

```
var range = CKEDITOR.instances.editor1.getSelection().getRanges()[ 0 ];
range.deleteContents();
range.select(); // Select emptied range to place the caret in its place. 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-25T07:02:58.217

尝试这个：

```
CKEDITOR.instances["textAreaId"].getSelection().getSelectedText().setData(''); 
```

# smalltalk - 为什么 instanceVariableNames 是一个字符串而不是一个更结构化的集合

> ID：15609209
> 
> 赞同：5
> 
> 时间：2013-03-25T06:49:42.547
> 
> 标签：smalltalk, pharo

我是一个 Smalltalk 初学者，目前正在玩 Pharo，我对子类消息中的选择感到好奇：关键字 instanceVariableNames 想要能够回答 subStrings 消息的东西。我想知道为什么它不期望像数组这样更结构化的东西，因为需要的是符号集合。

```
Object subclass: #Experiment instanceVariableNames: #(#foo #bar). 
```

我对此的唯一猜测是一些历史原因：也许并非所有 Smalltalks 都有数组，或者它们的语法差异很大，无法作为子类进入内部消息。还有其他解释吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T12:30:43.757

在 Pharo 愿景文档中，要点之一是改变这一点并拥有实例变量的真实概念。如果您有兴趣，请查看这些链接：

*   [http://scg.unibe.ch/archive/papers/Verw11bFlexibleObjectLayouts.pdf](http://scg.unibe.ch/archive/papers/Verw11bFlexibleObjectLayouts.pdf)
*   [http://www.pharo-project.org/download/pictures/be/j32hajf3kjdbsebqo0a9zc5tk8ekxt/pharovision.pdf](http://www.pharo-project.org/download/pictures/be/j32hajf3kjdbsebqo0a9zc5tk8ekxt/pharovision.pdf)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T07:15:29.790

是的，这有点奇怪。我认为主要原因是它需要名称，因此在创建类时，编译器会解析字符串并将名称作为子字符串获取，而且您不需要检查是否有人向您传递了带有数字或其他数组的数组。

至于数组本身，它存在于 Smalltalk-80 规范中，因此它们很常见。（不是在 Squeak 中引入的动态数组`{ expr1 . expr2 . expr3}`。

还有很多奇怪的事情。例如，现在 Pharo 使用*Parser*，它是*Scanner*的一个子类……你很快就会改变。

# regex - grep 使用正则表达式“and”

> ID：15609210
> 
> 赞同：0
> 
> 时间：2013-03-25T06:49:43.640
> 
> 标签：regex, grep

我怎样才能过滤掉包含两者的行`canvasbench`，`tracing_mark_write`就像下面显示的句子一样？

```
 canvasbench-16333 [003] ...1 87432.398788: tracing_mark_write: B|16333|performTraversals\n\ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T06:56:33.070

grep 中没有 AND 运算符。但是，您可以使用 grep -E 选项模拟 AND。

```
grep -E 'canvasbench.*tracing_mark_write|tracing_mark_write.*canvasbench' filename 
```

或者，您可以使用多个由管道分隔的 grep 命令来模拟 AND。

`grep -E 'canvasbench' filename | grep -E 'tracing_mark_write'`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T07:10:31.997

或者，您可以使用 sed：

```
sed -n '/canvasbench/{/tracing_mark_write/p}' input 
```

它尝试在与 canvasbench 匹配的行上匹配 tracking_mark_write 并打印与两者匹配的行。

# python - 修改运行脚本

> ID：15609211
> 
> 赞同：1
> 
> 时间：2013-03-25T06:49:51.933
> 
> 标签：python

我正在使用 python 脚本来执行简单但长时间的测量。我想知道是否（以及如何）可以编辑正在运行的脚本。

*一个例子*：假设我在运行脚本的最后几行出错了。这些行尚未执行。现在我想在不重新启动脚本的情况下修复它。我应该怎么办？

**编辑**：我的一个想法是将脚本的每一行加载到一个列表中。然后弹出第一个。将其提供给解释器实例。等待它完成并弹出下一个。这样我可以修改列表。

我想我不可能是第一个想到它的人。以前一定有人实施过这样的事情，我不想重新发明轮毂。我其中一个人知道一个项目，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T06:55:01.877

恐怕没有简单的方法可以随意修改正在运行的 Python 脚本。

一种方法是先在少量数据上测试脚本。这样，您将减少在实际的大型数据集上运行时发现错误的可能性。

另一种可能性是让脚本定期将其状态保存到磁盘，以便它可以从它停止的地方重新启动，而不是从头开始。

# vim - 根据文件类型禁用 NeoComplCache

> ID：15609213
> 
> 赞同：4
> 
> 时间：2013-03-25T06:49:55.340
> 
> 标签：vim, neocomplcache

我正在尝试设置 vim，以便当我编辑 C 或 C++ 文件时，它使用[YouCompleteMe](https://github.com/Valloric/YouCompleteMe)插件来完成，而其他一切都使用[NeoComplCache](https://github.com/Shougo/neocomplcache)。

我从[spf13 vim 配置](https://github.com/spf13/spf13-vim)的 v3.0 开始。

我已将以下内容添加到我的`.vimrc.bundles.local`：

```
Bundle 'Valloric/YouCompleteMe' 
```

我已将以下内容添加到我的`.vimrc.local`：

```
let g:ycm_filetype_whitelist = { 'c': 1, 'cpp': 1 }
let g:neocomplcache_force_overwrite_completefunc = 0 
```

这似乎会为除 C/C++ 之外的所有内容禁用 YouCompleteMe，但是我不确定如何根据文件类型禁用 NeoComplCache。我努力了：

```
autocmd FileType c,cpp :NeoComplCacheDisable 
```

但是，在您在缓冲区中执行某些操作之前，似乎 NeoComplCache 并未真正启用。在 vim 中打开 C 或 C++ 文件时需要什么样的配置才能禁用 NeoComplCache？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-09T00:26:27.977

[以下是我为我`.vimrc`](https://github.com/docwhat/homedir-vim/blob/master/vimrc/.vimrc)禁用 NeoCompleCache 的方法：

```
" Disable NeoComplCache for certain filetypes
if has('autocmd')
  autocmd FileType pandoc,markdown nested NeoComplCacheLock
 endif 
```

参考：

*   [NeoComplCache 问题 #352](https://github.com/Shougo/neocomplcache.vim/issues/352)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T00:08:37.977

这是我用来编辑 markdown 文件的工具，它也应该适用于 c,cpp。

```
" Turn off completion, it's more disruptive than helpful
function! s:markdown_disable_autocomplete()
  if &ft ==# 'markdown'
    :NeoComplCacheLock
  endif
endfunction
autocmd MyAutoCmd BufEnter * call s:markdown_disable_autocomplete() 
```

# web-sql - 如何在 websql 中为数据库提供安全性

> ID：15609214
> 
> 赞同：0
> 
> 时间：2013-03-25T06:49:58.033
> 
> 标签：web-sql

我的问题是如何在 websql 中为数据库提供安全性，使其他人无法打开数据库或修改数据库。例如： var db = openDatabase("AddressBook", "1.0", "Address Book", 200000); 按名称 AddressBook 创建数据库。那么我如何为数据库“AddressBook”提供安全性，以便其他人无法打开或修改数据库“AddressBook”。谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T08:10:39.690

您不能在任何浏览器存储中。

您必须在存储到数据库之前进行加密。在我的方法中，我为每个登录用户发送加密密钥。密钥随着到期的概念轮流改变。

这仍然不是很安全。但是存储一些机密数据应该没问题。

# opencl - 用于 windows 的神经网络的示例 OpenCL 代码

> ID：15609216
> 
> 赞同：2
> 
> 时间：2013-03-25T06:50:11.460
> 
> 标签：opencl

我正在寻找一个神经网络示例代码`OpenCL`，我可能会使用 GPU 内核进行优化。请帮助我，因为我是`OpenCL`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-26T14:54:14.717

我已经开始在[https://github.com/hughperkins/ClConvolve/tree/master](https://github.com/hughperkins/ClConvolve/tree/master)为 OpenCL 编写一个深度卷积神经网络库。到目前为止，它支持：

*   卷积层
*   最大池化
*   软最大
*   随机翻译层
*   随机补丁层
*   归一化层
*   多网（又名“多列”，根据[http://arxiv.org/pdf/1202.2745.pdf](http://arxiv.org/pdf/1202.2745.pdf)）
*   全连接

... 在 GPU 上运行，使用 OpenCL。您可以在命令行上指定网络架构，例如`100C5-MP2-100C5-MP2-100C4-MP2-300N-100N-6N`.

编辑：现在可以在 MNIST 上获得 99.55% 的测试准确率 :-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-14T13:26:31.683

你可以查看这个**OpenCL 增强版**的 FANN 库，用于快速神经网络。我确信它需要一些优化:-) 我还计划优化这个库。

**[http://leenissen.dk/fann/wp/2011/02/opencl-enhanced-version-of-fann/](http://leenissen.dk/fann/wp/2011/02/opencl-enhanced-version-of-fann/)**

# delphi - Digital-Metaphors Report Builder 字符串字段大小缓存

> ID：15609217
> 
> 赞同：1
> 
> 时间：2013-03-25T06:50:26.317
> 
> 标签：delphi, reportbuilder

我想知道是否有人对此有解决方案。

假设我们在数据库表中有一个 varchar(10) 字段，它包含在数百个 Report Builder 报告中。

现在，如果我们将该字段的大小增加到现在的 varchar(20)，我们就会遇到问题，即所有超过 10 个字符的数据都将在报告中被截断，除非每个报告都通过打开数据选项卡进行物理编辑，删除归档和重新选择它。或者，可以通过在文本编辑器中打开 rtm 文件并搜索该字段来完成。

请注意，我说的不是字段的物理显示大小，而是数据字段的大小。

是否有另一种方法可以使报告生成器报告以某种方式“刷新”数据源中的字段大小？

谢谢达伦

# ios - 在 iOS 的单元测试中测试异步调用

> ID：15609219
> 
> 赞同：13
> 
> 时间：2013-03-25T06:50:29.590
> 
> 标签：ios, unit-testing

在 iOS 中对异步调用进行单元测试时遇到问题。（尽管它在视图控制器中运行良好。）

有没有人遇到过这个问题？我尝试过使用等待功能，但我仍然面临同样的问题。

请提出一个这样做的好方法的例子。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-25T06:55:01.790

在调用回调之前，您需要旋转运行循环。不过，请确保它在主队列上被调用。

尝试这个：

```
__block BOOL done = NO;
doSomethingAsynchronouslyWithBlock(^{
    done = YES;
});

while(!done) {
   [[NSRunLoop currentRunLoop] runMode:NSDefaultRunLoopMode beforeDate:[NSDate distantFuture]];
} 
```

您也可以使用信号量（下面的示例），但我更喜欢旋转运行循环以允许处理分派到主队列的异步块。

```
dispatch_semaphore_t sem = dispatch_semaphore_create(0);
doSomethingAsynchronouslyWithBlock(^{
    //...
    dispatch_semaphore_signal(sem);
});

dispatch_semaphore_wait(sem, DISPATCH_TIME_FOREVER); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-12-12T13:26:51.297

这是[Apple](https://developer.apple.com/library/ios/documentation/DeveloperTools/Conceptual/testing_with_xcode/testing_3_writing_test_classes/testing_3_writing_test_classes.html#//apple_ref/doc/uid/TP40014132-CH4-SW6)对异步测试的原生支持的描述。

**TL;DR 手册：**

看着`XCTextCase+AsynchronousTesting.h`

`XCTestExpectation`有一个只有一个公共方法的特殊类：`- (void)fulfill;`

您应该初始化此类的实例，并在成功的情况下调用`fulfill`方法。否则，您的测试将在您在该方法中指定的超时后失败：

```
- (void)waitForExpectationsWithTimeout:(NSTimeInterval)timeout handler:(XCWaitCompletionHandler)handlerOrNil; 
```

例子：

```
- (void)testAsyncMethod
{

    //Expectation
    XCTestExpectation *expectation = [self expectationWithDescription:@"Testing Async Method Works Correctly!"];

    [MyClass asyncMethodWithCompletionBlock:^(NSError *error) {        
        if(error)
            NSLog(@"error is: %@", error);
        else
            [expectation fulfill];
    }];

    //Wait 1 second for fulfill method called, otherwise fail:    
    [self waitForExpectationsWithTimeout:1 handler:^(NSError *error) {

        if(error)
        {
            XCTFail(@"Expectation Failed with error: %@", error);
        }

    }];
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-05-21T06:53:37.713

我认为这篇文章中许多建议的解决方案都有一个问题，即如果异步操作未完成，则永远不会设置“完成”标志，并且测试将永远挂起。

我在许多测试中都成功地使用了这种方法。

```
- (void)testSomething {
    __block BOOL done = NO;

    [obj asyncMethodUnderTestWithCompletionBlock:^{
        done = YES;
    }];

    XCTAssertTrue([self waitFor:&done timeout:2],
                   @"Timed out waiting for response asynch method completion");
}

- (BOOL)waitFor:(BOOL *)flag timeout:(NSTimeInterval)timeoutSecs {
    NSDate *timeoutDate = [NSDate dateWithTimeIntervalSinceNow:timeoutSecs];

    do {
        [[NSRunLoop currentRunLoop] runMode:NSDefaultRunLoopMode beforeDate:timeoutDate];
        if ([timeoutDate timeIntervalSinceNow] < 0.0) {
            break;
        }
    }
    while (!*flag);
    return *flag;
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-10-07T17:58:55.900

自 Xcode 6 以来，它作为一个类别内置到 XCTest 中：

见[https://stackoverflow.com/a/24705283/88164](https://stackoverflow.com/a/24705283/88164)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-10-23T14:11:15.097

这是另一种选择，XCAsyncTestCase，如果你需要使用它，它可以很好地与 OCMock 配合使用。它基于 GHUnit 的异步测试器，但使用常规的 XCTest 框架。与 Xcode 机器人完全兼容。

[https://github.com/iheartradio/xctest-additions](https://github.com/iheartradio/xctest-additions)

用法是一样的，只是导入并继承 XCAsyncTestCase。

```
@implementation TestAsync
- (void)testBlockSample
{
    [self prepare];
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^(){
        sleep(1.0);
        [self notify:kXCTUnitWaitStatusSuccess];
    });
    // Will wait for 2 seconds before expecting the test to have status success
    // Potential statuses are:
    //    kXCTUnitWaitStatusUnknown,    initial status
    //    kXCTUnitWaitStatusSuccess,    indicates a successful callback
    //    kXCTUnitWaitStatusFailure,    indicates a failed callback, e.g login operation failed
    //    kXCTUnitWaitStatusCancelled,  indicates the operation was cancelled
    [self waitForStatus:kXCTUnitWaitStatusSuccess timeout:2.0];
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-01-30T14:33:29.080

[Sam Brodkin](https://stackoverflow.com/users/88164/sam-brodkin)已经给出了[正确的答案](https://stackoverflow.com/questions/15609219/testing-asynchronous-call-in-unit-test-in-ios/26242222#26242222)。

只是为了让答案看起来更好看，我把示例代码带到这里。

使用 XCTestExpectation。

```
// Test that the document is opened. Because opening is asynchronous,
// use XCTestCase's asynchronous APIs to wait until the document has
// finished opening.

- (void)testDocumentOpening
{
    // Create an expectation object.
    // This test only has one, but it's possible to wait on multiple expectations.
    XCTestExpectation *documentOpenExpectation = [self expectationWithDescription:@"document open"];

    NSURL *URL = [[NSBundle bundleForClass:[self class]]
                            URLForResource:@"TestDocument" withExtension:@"mydoc"];
    UIDocument *doc = [[UIDocument alloc] initWithFileURL:URL];
    [doc openWithCompletionHandler:^(BOOL success) {
        XCTAssert(success);
        // Possibly assert other things here about the document after it has opened...

        // Fulfill the expectation-this will cause -waitForExpectation
        // to invoke its completion handler and then return.
        [documentOpenExpectation fulfill];
    }];

    // The test will pause here, running the run loop, until the timeout is hit
    // or all expectations are fulfilled.
    [self waitForExpectationsWithTimeout:1 handler:^(NSError *error) {
        [doc closeWithCompletionHandler:nil];
    }];
} 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-10-13T04:04:29.617

[AGAsyncTestHelper](https://github.com/hfossli/AGAsyncTestHelper)是一个用于编写具有异步操作的单元测试的 C 宏，可与 SenTestingKit 和 XCTest 一起使用。

简单明了

```
- (void)testAsyncBlockCallback
{
    __block BOOL jobDone = NO;

    [Manager doSomeOperationOnDone:^(id data) {
        jobDone = YES; 
    }];

    WAIT_WHILE(!jobDone, 2.0);
} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-10-25T05:12:52.013

您可以像这样快速使用异步 api 调用

```
private let serverCommunicationManager : ServerCommunicationManager = {
    let instance = ServerCommunicationManager()
    return instance
}()

var expectation:XCTestExpectation?
func testAsyncApiCall()  {
    expectation = self.expectation(description: "async request")

    let header = ["Authorization":"eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImp0aSI6ImQ4MmY1MTcxNzI4YTA5MjI3NWIzYWI3OWNkOTZjMGExOTI4MmM2NDEyZjMyYWQzM2ZjMzY4NmU2MjlhOWY2YWY1NGE0MDI4MmZiNzY2NWQ3In0.eyJhdWQiOiIxIiwianRpIjoiZDgyZjUxNzE3MjhhMDkyMjc1YjNhYjc5Y2Q5NmMwYTE5MjgyYzY0MTJmMzJhZDMzZmMzNjg2ZTYyOWE5ZjZhZjU0YTQwMjgyZmI3NjY1ZDciLCJpYXQiOjE1MDg4MjU1NTEsIm5iZiI6MTUwODgyNTU1MSwiZXhwIjoxNTQwMzYxNTUxLCJzdWIiOiIiLCJzY29wZXMiOltdfQ.osoMQgiY7TY7fFrh5r9JRQLQ6AZhIuEbrIvghF0VH4wmkqRUE6oZWjE5l0jx1ZpXsaYUhci6EDngnSTqs1tZwFTQ3srWxdXns2R1hRWUFkAN0ri32W0apywY6BrahdtiVZa9LQloD1VRMT1_QUnljMXKsLX36gXUsNGU6Bov689-bCbugK6RC3n4LjFRqJ3zD9gvkRaODuOQkqsNlS50b5tLm8AD5aIB4jYv3WQ4-1L74xXU0ZyBTAsLs8LOwvLB_2B9Qdm8XMP118h7A_ddLo9Cyw-WqiCZzeZPNcCvjymNK8cfli5_LZBOyjZT06v8mMqg3zszWzP6jOxuL9H1JjBF7WrPpz23m7dhEwa0a-t3q05tc1RQRUb16W1WhbRJi1ufdMa29uyhX8w_f4fmWdAnBeHZ960kjCss98FA73o0JP5F0GVsHbyCMO-0GOHxow3-BqyPOsmcDrI4ay006fd-TJk52Gol0GteDgdntvTMIrMCdG2jw8rfosV6BgoJAeRbqvvCpJ4OTj6DwQnV-diKoaHdQ8vHKe-4X7hbYn_Bdfl52gMdteb3_ielcVXIaHmQ-Dw3E2LSVt_cSt4tAHy3OCd7WORDY8uek4Paw8Pof0OiuqQ0EB40xX5hlYqZ7P_tXpm-W-8ucrIIxgpZb0uh-wC3EzBGPjpPD2j9CDo"]
    serverCommunicationManager.sendServerRequest(httpMethodType: .get, baseURL: "http://192.168.2.132:8000/api/v1/user-role-by-company-id/2", param: nil, header: header) { (isSuccess, msg , response) in
        if isSuccess
        {
            let array = response as! NSArray

            if  array.count == 8
            {
                XCTAssertTrue(true)
                self.expectation?.fulfill()
            }
            else
            {
                XCTAssertFalse(false)
                XCTFail("array count fail")
            }
        }
    }
    waitForExpectations(timeout: 5) { (error) in
        if let error = error{
            XCTFail("waiting with error: \(error.localizedDescription)")
        }
    }
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-10-13T03:59:34.967

我建议你看看[**Facebook-ios-sdk 的测试**](https://github.com/facebook/facebook-ios-sdk/tree/master/src/tests)。这是如何在 iOS 上测试异步单元测试的一个很好的例子，尽管我个人认为异步测试应该分成同步测试。

**FBTestBlocker**：阻止当前线程在指定超时后退出的阻止程序。您可以将其拖放到您的项目中，但如果您的项目中没有与 OCMock 相关的内容，则需要删除它。

[FBTestBlocker.h](https://github.com/facebook/facebook-ios-sdk/blob/master/src/tests/FBTestBlocker.h)

[FBTestBlocker.m](https://github.com/facebook/facebook-ios-sdk/blob/master/src/tests/FBTestBlocker.m)

**FBURLConnectionTests**：您应该查看的测试示例。

[FBURLConnectionTests.h](https://github.com/facebook/facebook-ios-sdk/blob/master/src/tests/FBURLConnectionTests.h)

[FBURLConnectionTests.m](https://github.com/facebook/facebook-ios-sdk/blob/master/src/tests/FBURLConnectionTests.m)

这个代码片段应该给你一些想法

```
- (void)testExample
{
    FBTestBlocker *_blocker = [[FBTestBlocker alloc] initWithExpectedSignalCount:1];
    __block BOOL excuted = NO;
    [testcase test:^(BOOL testResult) {
        XCTAssert(testResult, @"Should be true");
        excuted = YES;
        [_blocker signal];
    }];

    [_blocker waitWithTimeout:4];
    XCTAssertTrue(excuted, @"Not executed");
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-10-07T20:58:25.670

试试 KIWI 框架。它功能强大，可以帮助您进行其他类型的测试。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-03-20T15:54:04.733

I recommend you connection semaphore + runloop, i also wrote method which take block:

```
// Set the flag to stop the loop
#define FLEND() dispatch_semaphore_signal(semaphore);

// Wait and loop until flag is set
#define FLWAIT() WAITWHILE(dispatch_semaphore_wait(semaphore, DISPATCH_TIME_NOW))

// Macro - Wait for condition to be NO/false in blocks and asynchronous calls
#define WAITWHILE(condition) \
do { \
while(condition) { \
[[NSRunLoop currentRunLoop] runMode:NSDefaultRunLoopMode beforeDate:[NSDate dateWithTimeIntervalSinceNow:1]]; \
} \
} while(0) 
```

method:

```
typedef void(^FLTestAsynchronousBlock)(void(^completion)(void));

void FLTestAsynchronous(FLTestAsynchronousBlock block) {
    FLSTART();
    block(^{
        FLEND();
    });
    FLWAIT();
}; 
```

and call

```
FLTestAsynchronous(^(void(^completion)()){

    [networkManager signOutUser:^{
        expect(networkManager.currentUser).to.beNil();
        completion();
    } errorBlock:^(NSError *error) {
        expect(networkManager.currentUser).to.beNil();
        completion();
    }];

}); 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-10-14T19:02:41.533

如果您使用的是 XCode 6，您可以像这样测试异步网络调用：

[Xcode 6 中的 XCTest 和异步测试](https://stackoverflow.com/questions/24704338/xctest-and-asynchronous-testing-in-xcode-6/25925193#25925193)

# perl - 使用 perl 检测并显示计算机浏览器

> ID：15609228
> 
> 赞同：-3
> 
> 时间：2013-03-25T06:50:51.530
> 
> 标签：perl

谁能告诉我如何使用 perl 检测和显示计算机浏览器？

提前致谢。请帮忙。

我希望输出显示为

```
Firefox (with version number) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T07:00:48.153

浏览器通常在 HTTP 请求的标头中提供一个字符串`Agent`，一些 Web 服务器通过`HTTP_USER_AGENT`environment var 将其提供给 CGI 脚本。

[HTTP::BrowserDetect](http://search.cpan.org/perldoc?HTTP%3a%3aBrowserDetect)提供了从该字符串中提取信息的工具。

```
use CGI                 qw( );
use HTTP::BrowserDetect qw( );

my $cgi = CGI->new();
print $cgi->header('text/plain');

my $bd = HTTP::BrowserDetect->new($cgi->user_agent());
print $bd->browser_string(), ' ', $bf->public_version(), "\n"; 
```

# node.js - 如何使用护照将“记住我”添加到我的应用程序

> ID：15609232
> 
> 赞同：27
> 
> 时间：2013-03-25T06:51:18.270
> 
> 标签：node.js, express, passport.js

[像这样](https://github.com/jaredhanson/passport-local/tree/master/examples/express3-mongoose-rememberme)登录时，我需要一个“记住我”复选框。我在使用护照之前添加了一个中间件

```
app.use(function(req, res, next) {
  if (req.method == 'POST' && req.url == '/login') {
    if (req.body.rememberme) {
      req.session.cookie.maxAge = 1000 * 60 * 3;
    } else {
      req.session.cookie.expires = false;
    }
  }
  next();
});
app.use(passport.initialize());
app.use(passport.session()); 
```

当为真时我无法登录，当为假`req.body.rememberme`时用户被记住。`req.body.rememberme`我也尝试了 connect-ensure-login ，但它仍然是错误的。

还有一个问题：我应该什么时候删除数据库中的 cookie 以及如何删除？

:)

其他代码与护照指南完全相同

路线：

```
app.get('/', passport.authenticate('local', {
  failureRedirect: '/login'
}), function(req, res) {
  res.redirect('/user/home');
});
app.post('/login', passport.authenticate('local', {
  failureRedirect: '/login'
}), function(req, res) {
  res.redirect('/user/home');
}); 
```

会议：

```
passport.serializeUser(function(user, done) {
  var CreateAccessToken = function() {
    var token = user.GenerateSalt();
    User.findOne({
      accessToken: token
    }, function(err, existingUser) {
      if (err)
        return done(err);
      if (existingUser) {
        CreateAccessToken();
      } else {
        user.set('accessToken', token);
        user.save(function(err) {
          if (err)
            return done(err);
          return done(null, user.get('accessToken'));
        })
      }
    });
  };
  if (user._id)
    CreateAccessToken();
});
passport.deserializeUser(function(token, done) {
  User.findOne({
    accessToken: token
  }, function(err, user) {
    if (err)
      return done(err);
    return done(err, user);
  });
}); 
```

和策略：

```
passport.use(new LocalStrategy(function(userId, password, done) {
  User.findOne().or([{
    username: userId
  }, {
    email: userId
  }]).exec(function(err, user) {
    if (err)
      return done(err);
    if (!user) {
      return done(null, false, {
        message: 'Invalid password or username'
      });
    }
    if (user.Authenticate(password)) {
      return done(null, user);
    } else {
      return done(null, false, {
        message: 'Invalid password or username'
      });
    }
  });
})); 
```

* * *

我注意到 Express 只会在哈希值更改时更新 cookie。所以我修改了中间件中的代码

```
app.use(function(req, res, next) {
  if (req.method == 'POST' && req.url == '/login') {
    if (req.body.rememberme) {
      req.session.cookie.maxAge = 1000 * 60 * 3;
      req.session._garbage = Date();
      req.session.touch();
    } else {
      req.session.cookie.expires = false;
    }
  }
  next();
}); 
```

现在我可以使用“记住我”登录，但它仅适用于 Ubuntu 上的 chromium 和 firefox。我仍然无法在 Win7 和 Android 上使用 chrome 和 firefox 上的“记住我”复选框登录。

我在win7上的chrome上POST到“/ login”时检查了响应标头，它具有与Ubuntu上相同的“Set-Cookie”字段，为什么它不能工作？

* * *

时间不同步......所以我发布了一个额外的时间字段。

```
$('#login').ajaxForm({
  beforeSubmit: function(arr, $form, option) {
    arr.push({
      name: '__time',
      value: (new Date()).toGMTString()
    });
  }
}); 
```

和“RememberMe”中间件：

```
app.use(function(req, res, next) {
  if (req.method == 'POST' && req.url == '/login') {
    if (req.body.rememberme) {
      req.session.cookie.maxAge = moment(req.body.__time).add('m', 3) - moment();
      req.session._garbage = Date();
      req.session.touch();
    } else {
      req.session.cookie.expires = false;
    }
  }
  next();
}); 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2014-03-11T22:05:43.663

我和你有完全一样的问题。以下代码适用于我：

```
app.post("/login", passport.authenticate('local',
    { failureRedirect: '/login',
      failureFlash: true }), function(req, res) {
        if (req.body.remember) {
          req.session.cookie.maxAge = 30 * 24 * 60 * 60 * 1000; // Cookie expires after 30 days
        } else {
          req.session.cookie.expires = false; // Cookie expires at end of session
        }
      res.redirect('/');
}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-07-14T13:55:13.520

现在有 Jared Hanson 编写的用于添加“记住我”功能的 Passport 策略。

[https://github.com/jaredhanson/passport-remember-me](https://github.com/jaredhanson/passport-remember-me)

这通过在下一个会话开始时使用的每个会话期间发出唯一的记住我令牌来工作（使其失效以供将来使用）。因此，这可能是一个更安全的解决方案。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-04T02:36:10.060

确保将`app.use(express.bodyParser())`其放置在您的中间件之上，因为您依赖`req.body.rememberme`

# asp.net - 为 ASP.NET（aspx 和 cshtml）的每个请求执行一些代码

> ID：15609233
> 
> 赞同：1
> 
> 时间：2013-03-25T06:51:26.810
> 
> 标签：asp.net, razor, global-asax, iis-8

**除了使用基页类之外，**有没有办法编写一些代码，这些代码将在 asp.net 4.5 中针对 .aspx 或 .cshtml 页面的每个请求执行。这是一个非常庞大的项目，对所有页面进行更改以使用基本页面是一场噩梦。我也不确定如何为 cshtml 页面完成此操作，因为它们没有类。

由于网站以集成模式运行，我们可以使用**Application_BeginRequest**并仅针对 aspx 和 cshtml 文件吗？

基本上，我必须检查访问该网站的用户是否具有针对数据库的特定 IP 地址，如果是，则允许访问，否则重定向。

我们正在使用 IIS8 和 ASP.Net 4.5 和 ASP.Net Razor 网页

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T07:01:02.747

> 我也不确定如何为 cshtml 页面完成此操作，因为它们没有类。

您可以放置​​一个`_ViewStart.cshtml`文件，其内容将在每个请求上执行。

或者你可以写一个[`custom Http Module`](http://support.microsoft.com/kb/307996)：

```
public class MyModule: IHttpModule
{
    public void Init(HttpApplication app)
    {
        app.BeginRequest += new EventHandler(OnBeginRequest);
    }

    public void Dispose()
    { 

    }   

    public void OnBeginRequest(object s, EventArgs e)
    {
        // this code here's gonna get executed on each request
    }
} 
```

然后只需在您的 web.config 中注册此模块：

```
<system.webServer>
    <modules>
        <add name="MyModule" type="SomeNamespace.MyModule, SomeAssembly" />
    </modules>
    ...
</system.webServer> 
```

或者如果您在经典模式下运行：

```
<system.web>
    <httpModules>
        <add name="MyModule" type="SomeNamespace.MyModule, SomeAssembly" />
    </httpModules>
</system.web> 
```

> 基本上，我必须检查访问该网站的用户是否具有针对数据库的特定 IP 地址，如果是，则允许访问，否则重定向。

在该`OnBeginRequest`方法中，您可以获得当前用户 IP：

```
 public void OnBeginRequest(object sender, EventArgs e)
    {
        var app = sender as HttpApplication;
        var request = app.Context.Request;
        string ip = request.UserHostAddress;
        // do your checks against the database
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T10:32:24.443

Asp.net MVC 过滤器专为此目的而设计。

你会像这样实现 ActionFilterAttribute （也许把这个新类放在你的 webapp 解决方案的 Filters 文件夹中）：

```
public class IpFilter : ActionFilterAttribute
{
    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        string ip = filterContext.HttpContext.Request.UserHostAddress;

        if(!testIp(ip))
        {
            if (true /* You want to use a route name*/)
                filterContext.Result = new RedirectToRouteResult("badIpRouteName");
            else /* you want an url */
                filterContext.Result = new RedirectResult("~/badIpController/badIpAction");
        }

        base.OnActionExecuting(filterContext);
    }
    private bool testIp(string inputIp)
    {
        return true /* do you ip test here */;
    }
} 
```

然后你必须像这样装饰任何可以使用 IpFilter 执行 ipcheck 的操作：

```
 [IpFilter]
    public ActionResult AnyActionWhichNeedsGoodIp()
    {
         /* do stuff */
    } 
```

# java - 从教程中实现 Android TimePicker - Source Force Closes

> ID：15609236
> 
> 赞同：1
> 
> 时间：2013-03-25T06:51:30.540
> 
> 标签：java, android, eclipse, timepicker

我正在尝试在以下教程中的源代码中实现 TimePicker：

[http://www.lukehorvat.com/blog/android-time-picker-example/](http://www.lukehorvat.com/blog/android-time-picker-example/)

但是，在我的应用程序中实现它时 - 我遇到了强制关闭问题。

有什么建议么？

```
JAVA:

import android.app.Activity;
import android.app.AlertDialog;
import android.os.AsyncTask;
import android.os.Bundle;
import android.view.ViewGroup;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.FrameLayout;
import android.widget.TimePicker;
import android.os.Bundle;
import android.support.v4.app.DialogFragment;
import android.support.v4.app.FragmentActivity;
import android.text.format.DateFormat;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.TextView;
import android.app.Activity;
import android.app.Dialog;
import android.app.TimePickerDialog;
import android.os.Bundle;
import android.support.v4.app.DialogFragment;
import android.text.format.DateFormat;
import android.widget.TimePicker;

import com.nfc.linkingmanager.TimePickerFragment.TimePickedListener;

import java.util.Calendar;

public class AddEditCountry extends Activity implements TimePickedListener 
{
    private TextView mPickedTimeText;
    private Button mPickTimeButton;
    private long rowID; 
     private EditText nameEt;
     private EditText capEt;
     private EditText codeEt;
     private TimePicker timeEt;
     public static final String KEY_BUNDLE_TIME = "time";
     public static final String KEY_BUNDLE_MIN = "min";

    @Override
    public void onCreate(Bundle savedInstanceState)
    {

          nameEt = (EditText) findViewById(R.id.nameEdit);
          capEt = (EditText) findViewById(R.id.capEdit);
          codeEt = (EditText) findViewById(R.id.codeEdit);
          timeEt = (TimePicker) findViewById(R.id.timeEdit);

          Bundle extras = getIntent().getExtras(); 

          if (extras != null)
          {
             rowID = extras.getLong("row_id");
             nameEt.setText(extras.getString("name"));  
             capEt.setText(extras.getString("cap"));  
             codeEt.setText(extras.getString("code"));
             timeEt.setCurrentHour(extras.containsKey(KEY_BUNDLE_TIME) ? extras.getInt(KEY_BUNDLE_TIME) : 0);
          }

          Button saveButton =(Button) findViewById(R.id.saveBtn);
          saveButton.setOnClickListener(new OnClickListener() {

              public void onClick(View v) 
              {
                 if (nameEt.getText().length() != 0)
                 {
                    AsyncTask<Object, Object, Object> saveContactTask = 
                       new AsyncTask<Object, Object, Object>() 
                       {
                          @Override
                          protected Object doInBackground(Object... params) 
                          {
                             saveContact();
                             return null;
                          }

                          @Override
                          protected void onPostExecute(Object result) 
                          {
                             finish();
                          }
                       }; 

                    saveContactTask.execute((Object[]) null); 
                 }

                 else
                 {
                    AlertDialog.Builder alert = new AlertDialog.Builder(AddEditCountry.this);
                    alert.setTitle(R.string.errorTitle); 
                    alert.setMessage(R.string.errorMessage);
                    alert.setPositiveButton(R.string.errorButton, null); 
                    alert.show();
                 }
              } 
         });
       }

           private void saveContact() 
           {
              DatabaseConnector dbConnector = new DatabaseConnector(this);

              if (getIntent().getExtras() == null)
              {
                  dbConnector.insertContact(nameEt.getText().toString(),
                          capEt.getText().toString(),
                          timeEt.getCurrentHour().toString(),
                          codeEt.getText().toString());

              }
              else
              {
                 dbConnector.updateContact(rowID,
                    nameEt.getText().toString(),
                    capEt.getText().toString(),
                    timeEt.getCurrentHour().toString(),                 
                    codeEt.getText().toString());
              }
           }

        @Override
        public void onTimePicked(Calendar time)
        {
            // display the selected time in the TextView
            mPickedTimeText.setText(DateFormat.format("h:mm a", time));
        }
} 
```

**添加国家 XML：**

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
   android:layout_width="fill_parent" 
   android:layout_height="wrap_content" android:layout_weight="1">

   <LinearLayout android:id="@+id/linearLayout"
      android:layout_width="fill_parent"
      android:layout_height="wrap_content"
      android:orientation="vertical" 
      android:padding="5dp">

      <EditText android:id="@+id/nameEdit"
         android:layout_width="fill_parent"
         android:layout_height="wrap_content" 
         android:imeOptions="actionNext" 
         android:hint="@string/name_hint"
         android:inputType="textPersonName|textCapWords"/>

      <EditText android:id="@+id/capEdit"
         android:layout_width="fill_parent" 
         android:layout_height="wrap_content" 
         android:imeOptions="actionNext" 
         android:hint="@string/cap_hint"
         android:inputType="textPersonName|textCapWords"/>

    <TextView
        android:id="@+id/textView3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Data Limit"
        android:textColor="#ffffff"
        android:textAppearance="?android:textAppearanceMedium" />

    <SeekBar
        android:id="@+id/seekBar1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1.0"
            android:gravity="left"
            android:textColor="#ffffff"
            android:text="10MB" />

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1.0"
            android:gravity="right"
            android:textColor="#ffffff"
            android:text="Unlimited Data" />
    </LinearLayout>

    <TextView
        android:id="@+id/textView3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Bandwidth Limit"
        android:textColor="#ffffff"
        android:textAppearance="?android:textAppearanceMedium" />

    <SeekBar
        android:id="@+id/seekBar1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1.0"
            android:gravity="left"
            android:textColor="#ffffff"
            android:text="10kbs" />

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1.0"
            android:textColor="#ffffff"
            android:gravity="right"
            android:text="Unlimited Bandwidth" />
    </LinearLayout>

    <TextView
        android:id="@+id/TextView02"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textAppearance="?android:textAppearanceSmall" />

    <TextView
        android:id="@+id/TextView02"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="WiFi Time Limit"
        android:textColor="#ffffff"
        android:textAppearance="?android:textAppearanceMedium" />

    <TextView
        android:id="@+id/text_picked_time"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true" />

    <Button
        android:id="@+id/button_pick_time"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:layout_below="@id/text_picked_time"
        android:text="Pick a time" />

    <EditText
        android:id="@+id/codeEdit"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:ems="10"
        android:hint="@string/code_hint"
        android:imeOptions="actionNext"
        android:inputType="textUri"
        android:lines="1" >

        <requestFocus />
    </EditText>

      <Button android:id="@+id/saveBtn" 
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:layout_marginTop="15dp"
         android:layout_gravity="center_horizontal"
         android:text="@string/save_btn"/>
   </LinearLayout>
</ScrollView> 
```

**TIMEPICKERFRAGMENT.JAVA**

```
package com.nfc.linkingmanager;

import android.app.Activity;
import android.app.Dialog;
import android.app.TimePickerDialog;
import android.os.Bundle;
import android.support.v4.app.DialogFragment;
import android.text.format.DateFormat;
import android.widget.TimePicker;

import java.util.Calendar;

public class TimePickerFragment extends DialogFragment implements TimePickerDialog.OnTimeSetListener
{
    private TimePickedListener mListener;

    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState)
    {
        // use the current time as the default values for the picker
        final Calendar c = Calendar.getInstance();
        int hour = c.get(Calendar.HOUR_OF_DAY);
        int minute = c.get(Calendar.MINUTE);

        // create a new instance of TimePickerDialog and return it
        return new TimePickerDialog(getActivity(), this, hour, minute, DateFormat.is24HourFormat(getActivity()));
    }

    @Override
    public void onAttach(Activity activity)
    {
        // when the fragment is initially shown (i.e. attached to the activity), cast the activity to the callback interface type
        super.onAttach(activity);
        try
        {
            mListener = (TimePickedListener) activity;
        }
        catch (ClassCastException e)
        {
            throw new ClassCastException(activity.toString() + " must implement " + TimePickedListener.class.getName());
        }
    }

    @Override
    public void onTimeSet(TimePicker view, int hourOfDay, int minute)
    {
        // when the time is selected, send it to the activity via its callback interface method
        Calendar c = Calendar.getInstance();
        c.set(Calendar.HOUR_OF_DAY, hourOfDay);
        c.set(Calendar.MINUTE, minute);

        mListener.onTimePicked(c);
    }

    public static interface TimePickedListener
    {
        public void onTimePicked(Calendar time);
    }
} 
```

**日志猫：**

```
03-25 02:50:06.783: I/Adreno200-EGLSUB(27045): <ConfigWindowMatch:2165>: Format RGBA_8888.
03-25 02:50:06.783: D/memalloc(27045): ion: Mapped buffer base:0x5ca43000 size:614400 offset:0 fd:57
03-25 02:50:06.783: E/(27045): Can't open file for reading
03-25 02:50:06.783: E/(27045): Can't open file for reading
03-25 02:50:06.823: D/memalloc(27045): ion: Mapped buffer base:0x5d234000 size:614400 offset:0 fd:61
03-25 02:50:08.695: D/Activity(27045): Activity.onPause(), editTextTapSensorList size: 0
03-25 02:50:08.715: W/dalvikvm(27045): threadid=1: thread exiting with uncaught exception (group=0x4108b9d8)
03-25 02:50:08.715: E/AndroidRuntime(27045): FATAL EXCEPTION: main
03-25 02:50:08.715: E/AndroidRuntime(27045): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.nfc.linkingmanager/com.nfc.linkingmanager.AddEditCountry}: java.lang.NullPointerException
03-25 02:50:08.715: E/AndroidRuntime(27045):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1960)
03-25 02:50:08.715: E/AndroidRuntime(27045):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1985)
03-25 02:50:08.715: E/AndroidRuntime(27045):    at android.app.ActivityThread.access$600(ActivityThread.java:127)
03-25 02:50:08.715: E/AndroidRuntime(27045):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1151)
03-25 02:50:08.715: E/AndroidRuntime(27045):    at android.os.Handler.dispatchMessage(Handler.java:99)
03-25 02:50:08.715: E/AndroidRuntime(27045):    at android.os.Looper.loop(Looper.java:137)
03-25 02:50:08.715: E/AndroidRuntime(27045):    at android.app.ActivityThread.main(ActivityThread.java:4477)
03-25 02:50:08.715: E/AndroidRuntime(27045):    at java.lang.reflect.Method.invokeNative(Native Method)
03-25 02:50:08.715: E/AndroidRuntime(27045):    at java.lang.reflect.Method.invoke(Method.java:511)
03-25 02:50:08.715: E/AndroidRuntime(27045):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:788)
03-25 02:50:08.715: E/AndroidRuntime(27045):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:555)
03-25 02:50:08.715: E/AndroidRuntime(27045):    at dalvik.system.NativeStart.main(Native Method)
03-25 02:50:08.715: E/AndroidRuntime(27045): Caused by: java.lang.NullPointerException
03-25 02:50:08.715: E/AndroidRuntime(27045):    at com.nfc.linkingmanager.AddEditCountry.onCreate(AddEditCountry.java:73)
03-25 02:50:08.715: E/AndroidRuntime(27045):    at android.app.Activity.performCreate(Activity.java:4701)
03-25 02:50:08.715: E/AndroidRuntime(27045):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1051)
03-25 02:50:08.715: E/AndroidRuntime(27045):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1924)
03-25 02:50:08.715: E/AndroidRuntime(27045):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T06:55:40.457

您的 xml 中没有名为 TimeEdit 的元素。因此，当您尝试设置其文本时，它会因空指针异常而崩溃。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T06:57:26.420

您在哪里定义 Timepicker

```
 timeEt = (TimePicker) findViewById(R.id.timeEdit); 
```

在你的 xml 文件中。检查您的 xml 文件并为所有人提供不同的 id。

# jakarta-ee - Glassfish 电子邮件配置与 Exchange

> ID：15609237
> 
> 赞同：0
> 
> 时间：2013-03-25T06:51:31.503
> 
> 标签：jakarta-ee, glassfish-3

我找到了很多关于为电子邮件配置 Glassfish 的参考资料，但是我无法解决我自己的问题，我希望有人能提供帮助。

我已经在 Glassfish 3.12 控制台中使用邮件主机、用户、发件人地址和描述配置了 JavaMail 会话。传输协议设置为 SMTP，我添加了一个 mail.smtp.host（和 mail.smtp.auth=false）属性。

我用来发送邮件的代码如下：

```
public class JndiMail {
    @Resource(name = "mail/[my-email]")
    private Session mailSession;

    public void sendMessage() {
        Message msg = new MimeMessage(mailSession);
        try {
          msg.setSubject("[app] Email Alert");
          msg.setRecipient(RecipientType.TO,
            new InternetAddress("user@domain",
            "User name"));
          msg.setText("Hello ");
          Transport.send(msg);
        }
        catch(MessagingException me) {
          System.out.println(me.toString());
        }
        catch(UnsupportedEncodingException uee) {
        }
      }
} 
```

每次应用程序发送电子邮件时，我都会收到一条日志消息，说明本地主机已拒绝该电子邮件。我正在尝试使用远程交换服务器 - 而不是 localhost。我不明白为什么远程电子邮件服务器没有被访问？我意识到这应该是相当直截了当的，所以如果我遗漏了什么，我深表歉意。

这些是 Glassfish 日志：

```
[#|2013-03-26T10:00:39.334+1100|INFO|glassfish3.1.1|javax.enterprise.system.std.com.sun.enterprise.server.logging|_ThreadID=29;_ThreadName=Thread-2;|DEBUG: getProvider() returning javax.mail.Provider[TRANSPORT,smtp,com.sun.mail.smtp.SMTPTransport,Sun Microsystems, Inc]|#]

[#|2013-03-26T10:00:39.334+1100|INFO|glassfish3.1.1|javax.enterprise.system.std.com.sun.enterprise.server.logging|_ThreadID=29;_ThreadName=Thread-2;|DEBUG SMTP: useEhlo true, useAuth false|#]

[#|2013-03-26T10:00:39.334+1100|INFO|glassfish3.1.1|javax.enterprise.system.std.com.sun.enterprise.server.logging|_ThreadID=29;_ThreadName=Thread-2;|DEBUG SMTP: trying to connect to host "localhost", port 25, isSSL false|#] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T05:54:44.883

我已经解决了这个问题。解决方案相当简单。在 Glassfish 中配置 Javamail 资源时，在 JNDI 名称上使用“mail/”前缀很重要。我以为 Glassfish 添加了这个。我通过从上面的代码中删除注入并在 try catch 中包含 JNDI 查找找到了解决方案：

```
try {
    InitialContext ctx = new InitialContext();  
Session session = (Session) ctx.lookup("mail/MyEmail"); 
 Message msg = new MimeMessage(session); 
```

# android - 当软键盘可见时，背景图像显示黑色底栏

> ID：15609246
> 
> 赞同：1
> 
> 时间：2013-03-25T06:52:45.993
> 
> 标签：android, image, background, android-softkeyboard

我有一个 android 应用程序，我想在其中输入密码，如果正确，则转到新活动。为此，我显示了一个带有 EditText 字段的自定义对话框。如果密码正确，则隐藏 kayboard 并转到下一个活动。我使用以下代码隐藏键盘

```
 alertBuilder.setNeutralButton("OK",
        new DialogInterface.OnClickListener() {
        @Override
         public void onClick(DialogInterface dialog, int which) {
             InputMethodManager inputMethodManager = (InputMethodManager)getSystemService(Activity.INPUT_METHOD_SERVICE); inputMethodManager.hideSoftInputFromWindow(getCurrentFocus().getWindowToken(), 0);
         new Thread(new Runnable() {
         @Override
         public void run() {
              //start new acivity for result
         }
        }).start();

    }
}); 
```

并使用**startActivityForResult(intent,requestCode)**在对话框的 OK 按钮的 onClick 中的线程内加载下一个活动。但在加载下一个活动之前，隐藏键盘后，背景图像显示一个黑色底栏，如![这个](../Images/15451abaf6286d72cf2822f199409913.png)

当回到这个活动时，背景图像会像这样显示一会儿。我试过**intent.addFlags(Intent.FLAG_ACTIVITY_NO_ANIMATION);** 并在清单文件中为此活动设置**android:windowSoftInputMode="adjustPan" 。**它对我不起作用。这里有什么问题以及如何解决这个问题？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T07:01:00.953

关闭键盘后，等待一个可运行的小延迟，让 Activity 的背景有一点时间重新绘制。

使用 a`Handler`等待小延迟并返回 UI 线程。

**将此添加到您的课程中**：

```
private Handler mHandler = new Handler(); 
```

**定义一个 Runnable**：

```
private Runnable mRunnable = new Runnable() {
    public void run() {
        startActivityForResult(intent, resultCode);
    }
}; 
```

**更新您的代码**：

```
alertBuilder.setNeutralButton("OK", new DialogInterface.OnClickListener() {
    @Override
    public void onClick(DialogInterface dialog, int which) {
        InputMethodManager inputMethodManager = (InputMethodManager)getSystemService(Activity.INPUT_METHOD_SERVICE);
        inputMethodManager.hideSoftInputFromWindow(getCurrentFocus().getWindowToken(), 0);

        // Wait a moment and jump to the next activity.
        mHandler.postDelayed(mRunnable, 500);
    }
}); 
```

# regex - 带有 + 或 - 字符的电话号码正则表达式

> ID：15609247
> 
> 赞同：0
> 
> 时间：2013-03-25T06:52:57.057
> 
> 标签：regex, cakephp

我希望验证一组电话号码，并允许在电话号码中添加 + 字符或 - 字符，但可选，电话号码总位数不需要设置为 10 位。在 CakePHP 中。我该怎么做？

有效输入示例：

0165561125

016 5542512

+016 5515241

+016-5512412

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T07:00:43.760

您可以尝试以下正则表达式。

```
\+?\d{3}[- ]?\d{7} 
```

`\+?`查找 a`+`并将其设为可选。
`\d{3}`寻找三位数字。
`[- ]?`寻找一个`-`或一个空格，又是可选的。注意比？使前面的字符可选。
`\d{7}`查找剩余的 7 位数字。

正如您所提到的，可以有任意数量的空格或 - 在您的电话号码中，您可以使用以下正则表达式：

```
\+?(\d+[ -]?)+ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T07:01:30.010

您可以尝试以下方法：

```
^\+?\d{3}[ -]?\d{7}$ 
```

这将匹配：

*   一个可选`+`的开头
*   紧跟三位数字
*   后跟一个可选空格或`-`.
*   紧接着是另外七个数字

* * *

但是，如果“电话号码总位数不需要设置为 10 位”意味着您不想限制位数（或确切指定多少位数），您可以将正则表达式更改为：

```
^\+?\d+[ -]?\d+$ 
```

这将匹配：

*   一个可选`+`的开头
*   后跟至少一位数字
*   后跟一个可选空格或`-`.
*   后跟至少一位数字

* * *

此外，如果您想在任何地方接受空格和连字符，我会这样做：

```
^(\+|\+ )?\d+([ -]?\d+)*$ 
```

这将匹配：

*   一个可选`+`的开头（可选后跟一个空格）
*   至少一位数
*   零组或多组（空格或连字符，后跟至少一位数字）

# mysql - 为多个 Joomla! 统一 K2 组件的数据源！托管在同一台服务器上的网站

> ID：15609255
> 
> 赞同：4
> 
> 时间：2013-03-25T06:53:20.290
> 
> 标签：mysql, joomla, joomla-k2

我负责我组织的一些网站。

我使用 Joomla！2.5.9 对于那些网站。它们都在同一台服务器上运行。

我使用 K2 组件进行内容管理。

我有一个通用网站，其中在“员工”页面上显示所有员工信息。此外，其中一些人和他们的内容显示在另一个部门的网站上。因此，每个网站都有数据库。

例如：

在通用网站（比如说general.org）中，当我单击“员工”菜单项时，页面会显示在我的组织中工作的所有人员。他们也在不同的部门工作。

在另一个网站（例如：education.general.org）中，当我单击“员工”菜单项时，它会显示在教育部门工作的人员。

但是对于每个网站，我都有不同的用户帐户，这意味着其中一个的修改不会影响另一个。如果其中一位教育人员试图在教育网站上更改他的个人资料图片，他也必须在通用网站上进行。

有时一个人可能在两个部门工作。因此，他必须编辑他的数据的三倍。

是否可以合并所有网站的记录？换句话说，我希望每个人都在通用网站上插入/更新他们的数据，其他网站会自动更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T15:19:37.143

您必须拥有一个 Joomla 站点才能执行此操作。子域将有自己的模板/样式或其他任何东西，但会在同一个 Joomla 安装上运行。然后，子域仅映射到常规页面上的特定菜单项。那将是一种方法。

另一种方法是编写一个自定义用户插件，该插件在编辑配置文件后更新来自其他 Joomla 安装的表格。如果您熟悉 PHP，您可能可以自己执行此操作，否则您需要具有编码知识的人为您执行此操作。

或者，您可以设置 Joomla 以使用基于 LDAP 数据库（[http://docs.joomla.org/LDAP](http://docs.joomla.org/LDAP)）的身份验证。但是我不确定它与密码和配置文件更改的效果如何。

这就是我会看到的解决方案。

# ruby - 在 ruby 项目中添加其他语言文件的最佳实践

> ID：15609259
> 
> 赞同：0
> 
> 时间：2013-03-25T06:53:50.357
> 
> 标签：ruby, jar, gem

我有一个纯粹用 ruby​​ 编写的 ruby​​ 项目。现在我想包含一个 java 归档 (jar) 文件，它具有我的用户想要的一些功能。将文件放在其中一个目录中并作为 gem 捆绑是很好的吗？是否存在与此相关的安全问题？任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T09:28:25.677

答案是它取决于用例。

如果这是一个用户将纯粹出于自己的目的使用的 gem，并且它不是通过网络广播，那么安全问题就相当小——它们将更多地与系统安全相关。

如果您的程序的一部分涉及绑定到端口并接受 TCP/UDP 连接，那么您必须真正开始考虑网络安全性。另一个可能的问题是，如果您向非特权用户授予文件系统访问权限（例如，如果这是一个 rails gem，并且 JAR 提供了操作文件系统的功能，并且由于某种原因您将其传递给站点用户- 有点愚蠢的例子，但我希望你明白我的意思）。

但是，对于运行 java JAR 文件，除非该特定 JAR 存在已知的安全漏洞，否则没有什么天生不安全的。

最后，这取决于 gem 的最终用户。明确宝石的作用，他们可以决定是否要使用它。

# xml - R 和 XML：使用处理程序“扁平化”XML 树？

> ID：15609260
> 
> 赞同：2
> 
> 时间：2013-03-25T06:53:59.003
> 
> 标签：xml, r

我`XML`在 R 中使用包，并希望将 XML 树“展平”为字符串，使用处理程序`xmlParse`进行各种转换（例如，转换`<code>...</code>`为`\code{...}`等）。

我不完全确定这样做的“正确”方法，并且正在寻求指导。

在下面的示例中，我已经想到了一种方法，其中我使用`code`标记的处理程序返回*string* `\code{contents}`，并使用`p`标记的处理程序将所有不同的位粘贴在一起：

```
library(XML)
code.xml <- '<p>This is some <code>inline code</code>.</p>'
handlers <- list()
handlers$code <- function (node) {
    paste0('\\code{', xmlValue(node), '}')
}
# paste together the bits of text
handlers$p <- function(node) {
    bits <- sapply(xmlChildren(node), function (ch) {
        if (is.character(ch)) return(ch)
        xmlValue(ch)
    })
    paste(bits, collapse='')
}

xmlRoot(xmlTreeParse(code.xml, asText=T, asTree=T,
                     handlers=handlers, trim=F,
                     useInternalNodes=F))

# "This is some \\code{inline code}." 
```

然而，这是不可行的，因为**对于某些我希望拥有祖先信息的元素**（如父节点），根据`xmlParse`这意味着我应该`useInternalNodes=TRUE`在调用`xmlTreeParse`.

但是，我也想`asTree=T`在我的调用中设置让我的扁平字符串退出调用，但这会产生一个错误：

```
xmlTreeParse(code.xml, asText=T, asTree=T,
             handlers=handlers, trim=F,
             useInternalNodes=T)

# Error in class(ans) = oldClass(class(ans)) :
#  attempt to set an attribute on NULL 
```

我很确定这是因为我的处理程序正在返回字符串，而不是`XMLInternalNodes`内部出现问题（？）。

**还有什么方法可以将 XML 树展平为字符串，将用户定义的转换应用于特定标签（并且我必须能够知道我正在转换的标签的父节点是什么）？**

（顺便说一句，我很清楚我目前的方法是“错误”的方式来做这样的事情，但我不确定我*应该*怎么做。我觉得如果我想做各种转换`<code></code>`，`\code{}`比如我扁平化我的XML 到一个字符串，那么我应该以某种方式使用 XML 解析树（而不是正则表达式），但这似乎不是正确的方法。一方面，目的`xmlTreeParse`并不是真正扁平化和收集节点！）。

# jquery - 403 禁止使用 Backbone 和 jQuery 进行 Twitter 搜索

> ID：15609262
> 
> 赞同：1
> 
> 时间：2013-03-25T06:54:01.033
> 
> 标签：jquery, backbone.js, twitter, jsonp

这是我的js代码。

我正在使用最新的 jQuery 和 Backbone 库。

```
(function(Tweet) {

    //Tweet.Model = Backbone.Model.extend();

    Tweet.Collection = Backbone.Collection.extend({
        url: function() {

            return "http://search.twitter.com/search.json?q=twitterapi&callback=?";

        },

        parse: function(data) {
            return data.results;
        }
    });

    Tweet.Views.List = Backbone.Layout.extend({
        template: "#list",

        events: {
            "click li": "update"
        },

        update: function(ev) {
            var index = $(ev.target).index();
            var model = this.collection.at(index);

            this.trigger("update", model);
        },

        serialize: function() {
            return { tweets: this.collection };
        }
    });

    Tweet.Views.Detail = Backbone.Layout.extend({
        template: "#detail",

        serialize: function() {
            return { tweet: this.model };
        }
    });
}) (twitter.module("tweet")); 
```

当我运行网址[http://search.twitter.com/search.json?q=twitterapi&callback=](http://search.twitter.com/search.json?q=twitterapi&callback=)？在我的浏览器上，我可以看到结果。

所以我和推特有联系。

当我删除回调=？从我的代码中的 url，我得到了跨域错误。

所以这意味着我的 jQuery 和 Backbone 版本已经更新到足以自动将我的请求格式化为 jsonp 回调。

但我不断收到 403 错误。

以下是 Chrome 控制台以红色表示的错误：

```
GET http://search.twitter.com/search.json?q=twitterapi&callback=jQuery19107466092116665095_1364193857160&_=1364193857161 403 (Forbidden) 
```

请帮助我了解我是否做错了什么？

**更新**

我根据一些建议尝试了以下方法。

我添加了这个[https://github.com/jacebeleren/backbonelayoutmanager/commit/6af9a367cea5bcf460b67319137d6f077b1ff5ec](https://github.com/jacebeleren/backbonelayoutmanager/commit/6af9a367cea5bcf460b67319137d6f077b1ff5ec)

..还有这个 [https://github.com/jacebeleren/backbonelayoutmanager/commit/01cfba1c416673617591b0c936e41a27b93bbf51](https://github.com/jacebeleren/backbonelayoutmanager/commit/01cfba1c416673617591b0c936e41a27b93bbf51)

但错误仍然存​​在。

**更新 2**

这些是我为 403 错误获得的请求标头。

```
Accept:*/*
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-US,en;q=0.8
Cache-Control:max-age=0
Connection:keep-alive
Cookie:pid=v3:1364189785315637597538615; guest_id=v1%3A136419139351112726; k=10.35.60.125.1364192963733514; __utma=43838368.881187358.1364192967.1364192967.1364192967.1; __utmc=43838368; __utmz=43838368.1364192967.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none); _twitter_sess=BAh7CToPY3JlYXRlZF9hdGwrCKCsPKA9AToMY3NyZl9pZCIlNzc0NjU5ZmQ5%250AN2Q4MjA0M2RjYzQzMjMyZTFjMDk3ZTkiCmZsYXNoSUM6J0FjdGlvbkNvbnRy%250Ab2xsZXI6OkZsYXNoOjpGbGFzaEhhc2h7AAY6CkB1c2VkewA6B2lkIiUxZTc3%250AMTFiNjcwN2M0OWM0OTVmMDA0ODgxNTQ1MzdkZA%253D%253D--43c3e3ef6a53296eb8f6640c3e9dc21539f18ef6
Host:search.twitter.com
Referer:http://bblm.localhost/
User-Agent:Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.22 (KHTML, like Gecko) Chrome/25.0.1364.172 Safari/537.22 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T10:26:41.707

Backbone 不会自动格式化您对 JSONp 调用的请求。你需要`{ dataType: "jsonp" }`在你的 fetch 调用中发送 jQuery 来格式化它。

看到这个：[https ://stackoverflow.com/a/9996420/340266](https://stackoverflow.com/a/9996420/340266)

# jquery - Jquery从json数组中选择值

> ID：15609267
> 
> 赞同：0
> 
> 时间：2013-03-25T06:54:19.333
> 
> 标签：jquery, json

当我这样做的时候`console.log(msg);`。我的回复是这样的`[{"test":"aaaaa"}].`

现在，我如何选择 aaaa。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T06:56:28.703

`msg`是一个数组，第一个元素是`{"test": "aaaaa"}`

所以你可以做`msg[0].test`或`msg[0]['test']`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T06:56:30.843

来自[JavaScript 中是否有任何键/值对结构？](https://stackoverflow.com/questions/6771763/is-there-any-key-value-pair-structure-in-javascript)

```
var myobj = {
  "managaner": ["Prateek","Rudresh","Prashant"],
  "employee": ["namit","amit","sushil"],
  "hr": ["priya","seema","nakul"]
}

alert(myobj['employee'][1]); // Outputs "amit" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T06:57:54.777

尝试这个：

```
 $.each(msg, function(i, item){
    console.log(item.test);
 }); 
```

如果您`json`从某个服务器或 Web 服务获得响应，那么在您的`ajax success function(){}`.

这是怎么回事，你有一个数组中的 json 响应，所以这里`$.each()`循环遍历它从服务器获得的响应，然后使用`item`循环对象的 param 进入函数。所以最后`console.log(item.test)`是打印对象的属性。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-25T06:58:21.093

尝试这个

```
msg[0].test 
```

或者

```
msg[0]["test"] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-25T06:57:08.517

我明白那个 `msg=[{"test":"aaaaa"}]`

那么你将不得不将值作为`msg[0].test`。然后你可以得到“ **aaaaa** ”

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-25T07:00:14.030

例子：

```
function(data) {
    var result = data[0];
    var was = result.was;
} 
```

# centos - yum install php-bcmath 要求：php-common(x86-64) = 5.3.3-22.el6

> ID：15609273
> 
> 赞同：0
> 
> 时间：2013-03-25T06:54:57.410
> 
> 标签：centos, centos6

我正在运行 centos 6，我尝试：

yum install php-bcmath，我收到了这个错误：

```
yum install php-bcmath
Loaded plugins: fastestmirror
Loading mirror speeds from cached hostfile
 * base: mirror.checkdomain.de
 * epel: mirror.de.leaseweb.net
 * extras: mirror.checkdomain.de
 * rpmforge: mirror.de.leaseweb.net
 * updates: mirror.checkdomain.de
Setting up Install Process
Resolving Dependencies
--> Running transaction check
---> Package php-bcmath.x86_64 0:5.3.3-22.el6 will be installed
--> Processing Dependency: php-common(x86-64) = 5.3.3-22.el6 for package: php-bcmath-5.3.3-22.el6.x86_64
--> Finished Dependency Resolution
Error: Package: php-bcmath-5.3.3-22.el6.x86_64 (base)
           Requires: php-common(x86-64) = 5.3.3-22.el6
           Installed: php-common-5.4.9-1.el6.remi.x86_64 (@remi-test)
              php-common(x86-64) = 5.4.9-1.el6.remi
           Available: php-common-5.3.3-22.el6.x86_64 (base)
              php-common(x86-64) = 5.3.3-22.el6
 You could try using --skip-broken to work around the problem
 You could try running: rpm -Va --nofiles --nodigest 
```

请帮忙，

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-10-05T08:42:52.283

我发现问题来自新的 PHP 版本（5.4、5.4），它安装在一个单独的仓库中。
因此，我们只需要使用以下命令在主仓库（5.3 版）中安装 php-bcmath：

```
yum install php-bcmath --enablerepo=remi 
```

“remi”是主仓库，你可以通过转到**/etc/yum.repos.d**然后使用**ll来查看它**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-07T19:26:59.710

这听起来可能很愚蠢，但它让我失去了几个小时（是的，我知道..）但不要忘记：

```
sudo service httpd graceful 
```

后：

```
yum install php-bcmath 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-05-27T05:02:57.817

我的服务器正在运行 PHP 5.6，下面的命令解决了我的问题

```
sudo yum -y install php56-bcmath

sudo service httpd restart 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-05T08:13:58.347

你可以试试（对于 Centos 6.4）

```
rpm -Uvh http://mirror.webtatic.com/yum/el6/latest.rpm
yum install php54w
yum install yum-plugin-replace
yum replace php-common --replace-with=php54w-common
yum install php54w-bcmath 
```

（来源：[http](http://www.webtatic.com/packages/php54/) ://www.webtatic.com/packages/php54/ ）

但这可能会导致有关版本的另一个问题。

简单的方法是卸载 php 5.4（或 5.5），安装 php 5.3，安装 php-bcmatch 然后更新到 php5.4（或更高版本）

# java - 如何在Java中的x位之前添加小数点

> ID：15609285
> 
> 赞同：4
> 
> 时间：2013-03-25T06:55:46.167
> 
> 标签：java, formatter

假设我有一个值 12345678 和一个数字说 x=2，我希望最终输出为 123456.78，如果 x 的值为 4，则最终输出为 1234.5678。

请告诉我如何才能做到这一点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-25T07:00:57.020

鉴于您正在处理移动*小数点*，我可能会使用`BigDecimal`：

```
long integral = 12345678L;
int x = 4; // Or 2, or whatever
BigDecimal unscaled = new BigDecimal(integral);
BigDecimal scaled = unscaled.scaleByPowerOfTen(-x);
System.out.println(scaled); // 1234.5678 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-25T07:09:35.167

```
BigInteger d = new BigInteger("12345");
BigDecimal one = new BigDecimal(d, 3);//12.345
BigDecimal two = new BigDecimal(d, 2);//123.45 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-25T07:00:10.407

试试这个：

```
String data = "12345678";
    StringBuilder builder = new StringBuilder(data);
    int x = 4;
    builder.insert(builder.length() - x, ".");

    System.out.println(builder); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-25T06:59:49.580

将该值除以 10 的 x 次方。

# ios - CoreData中如何实现功能

> ID：15609286
> 
> 赞同：0
> 
> 时间：2013-03-25T06:55:50.903
> 
> 标签：ios, objective-c, core-data

我有一些值（例如：姓名、薪水、汽车、家庭地址），我需要在不同的实体中插入这些值。之后我需要通过一些值来获取它，比如 SQL 查询。我使用 PostrgeSQL，并通过函数实现了它，我如何在 coreData 中实现它？我可以在 CoreData 中创建任何函数，或者如何在不同的实体中插入值？之后我怎样才能得到它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T10:54:12.057

如果您不熟悉核心数据，那么您应该查看一些教程和一些示例演示来创建核心数据、插入数据、获取数据等。

以下是一些提供核心数据教程的链接：-

[http://www.raywenderlich.com/934/core-data-on-ios-5-tutorial-getting-started](http://www.raywenderlich.com/934/core-data-on-ios-5-tutorial-getting-started) [http://mobile.tutsplus.com/tutorials/iphone/iphone-core-data/](http://mobile.tutsplus.com/tutorials/iphone/iphone-core-data/) [http:// /www.techotopia.com/index.php/An_iPhone_OS_Core_Data_Tutorial](http://www.techotopia.com/index.php/An_iPhone_OS_Core_Data_Tutorial)

# python - 在超类的方法中设置子类的属性

> ID：15609289
> 
> 赞同：1
> 
> 时间：2013-03-25T06:56:08.410
> 
> 标签：python, oop

我有以下情况：

```
class Baseclass(object):
    extra_fields = []
    @classmethod
    def extend(cls, key):
        cls.extra_fields.append(key)

class A(Baseclass):
    pass

class B(Baseclass):
    pass

A.extend("foo") 
```

现在，`extend`of`Baseclass`将被调用，设置`Baseclass.extra_fields`为`["foo"]`. 然后，`A.extra_fields`将是`["foo"]`，然而，将是`B.extra_fields`。

有没有办法`extend`只修改调用它的子类（而不定义`extend`所有子类，因为这些子类可能事先不知道）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T07:18:50.673

```
class Baseclass(object):    
    @classmethod
    def extend(cls, key):
        if not 'extra_fields' in cls.__dict__:
            cls.extra_fields=[]
        cls.extra_fields.append(key)   

class A(Baseclass):
    pass

class B(Baseclass):
    pass

A.extend("foo") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T07:02:22.863

如何`extra_fields`为每个子类定义自己的？

```
class Baseclass(object):
    @classmethod
    def extend(cls, key):
        cls.extra_fields.append(key)

class A(Baseclass):
    extra_fields = []

class B(Baseclass):
    extra_fields = []

A.extend("foo") 
```

（你也可以用一些元类魔法来自动化它。）

# java - 将字符串转换为 JSON 数组

> ID：15609306
> 
> 赞同：109
> 
> 时间：2013-03-25T06:57:29.033
> 
> 标签：java, android, json

我有以下来自 Web 服务的 JSON 字符串，并试图将其转换为`JSONarray`

```
{
    "locations": [
        {
            "lat": "23.053",
            "long": "72.629",
            "location": "ABC",
            "address": "DEF",
            "city": "Ahmedabad",
            "state": "Gujrat",
            "phonenumber": "1234567"
        },
        {
            "lat": "23.053",
            "long": "72.629",
            "location": "ABC",
            "address": "DEF",
            "city": "Ahmedabad",
            "state": "Gujrat",
            "phonenumber": "1234567"
        },
        {
            "lat": "23.053",
            "long": "72.629",
            "location": "ABC",
            "address": "DEF",
            "city": "Ahmedabad",
            "state": "Gujrat",
            "phonenumber": "1234567"
        },
        {
            "lat": "23.053",
            "long": "72.629",
            "location": "ABC",
            "address": "DEF",
            "city": "Ahmedabad",
            "state": "Gujrat",
            "phonenumber": "1234567"
        },
        {
            "lat": "23.053",
            "long": "72.629",
            "location": "ABC",
            "address": "DEF",
            "city": "Ahmedabad",
            "state": "Gujrat",
            "phonenumber": "1234567"
        }
    ]
} 
```

我在`String`网上验证了这个，它似乎是正确的。现在我在android开发中使用以下代码来利用

```
JSONArray jsonArray = new JSONArray(readlocationFeed); 
```

这会引发类型不匹配异常。

* * *

## 回答 #1

> 赞同：197
> 
> 时间：2013-03-25T07:01:39.060

在这里你得到 JSONObject 所以改变这一行：

```
JSONArray jsonArray = new JSONArray(readlocationFeed); 
```

有以下内容：

```
JSONObject jsnobject = new JSONObject(readlocationFeed); 
```

之后

```
JSONArray jsonArray = jsnobject.getJSONArray("locations");
for (int i = 0; i < jsonArray.length(); i++) {
    JSONObject explrObject = jsonArray.getJSONObject(i);
} 
```

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2015-10-24T07:46:02.423

**输入字符串**

```
[
   {
      "userName": "sandeep",
      "age": 30
   }, 
   {
      "userName": "vivan",
      "age": 5
   }
] 
```

**将字符串转换为 JSON 的简单方法**

```
public class Test
{

    public static void main(String[] args) throws JSONException
    {
        String data = "[{\"userName\": \"sandeep\",\"age\":30},{\"userName\": \"vivan\",\"age\":5}]  ";
        JSONArray jsonArr = new JSONArray(data);

        for (int i = 0; i < jsonArr.length(); i++)
        {
            JSONObject jsonObj = jsonArr.getJSONObject(i);

            System.out.println(jsonObj);
        }

    }
} 
```

**输出**

```
{"userName":"sandeep","age":30}
{"userName":"vivan","age":5} 
```

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2013-10-29T11:31:13.690

**使用 json 库：-**

```
String data="[{"A":"a","B":"b","C":"c","D":"d","E":"e","F":"f","G":"g"}]";
Object object=null;
JSONArray arrayObj=null;
JSONParser jsonParser=new JSONParser();
object=jsonParser.parse(data);
arrayObj=(JSONArray) object;
System.out.println("Json object :: "+arrayObj); 
```

**使用 GSON 库：-**

```
Gson gson = new Gson();
String data="[{\"A\":\"a\",\"B\":\"b\",\"C\":\"c\",\"D\":\"d\",\"E\":\"e\",\"F\":\"f\",\"G\":\"g\"}]";
JsonParser jsonParser = new JsonParser();
JsonArray jsonArray = (JsonArray) jsonParser.parse(data); 
```

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2013-03-25T07:00:05.873

您需要将给定的字符串转换为，`JSONObject`而不是`JSONArray`因为当前字符串包含`JsonObject`作为根元素而不是`JsonArray`：

```
JSONObject jsonObject = new JSONObject(readlocationFeed); 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-03-25T07:04:26.243

```
String b = "[" + readlocationFeed + "]";
JSONArray jsonArray1 = new JSONArray(b);
jsonarray_length1 = jsonArray1.length();
for (int i = 0; i < jsonarray_length1; i++) {

} 
```

或将其转换为 JSONOBJECT

```
JSONObject jsonobj = new JSONObject(readlocationFeed);
JSONArray jsonArray = jsonobj.getJSONArray("locations"); 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-03-25T07:00:31.837

试试这段代码：

```
try {        
    Log.e("log_tag", "Error in convert String" + result.toString());
    JSONObject json_data = new JSONObject(result);

    String status = json_data.getString("Status");
    {
        String data = json_data.getString("locations");
        JSONArray json_data1 = new JSONArray(data);
        for (int i = 0; i < json_data1.length(); i++) {
            json_data = json_data1.getJSONObject(i);

            String lat = json_data.getString("lat");
            String lng = json_data.getString("long");
        }
    }
} 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2014-03-04T06:57:19.407

如果响应是这样的

```
"GetDataResult": "[{\"UserID\":1,\"DeviceID\":\"d1254\",\"MobileNO\":\"056688\",\"Pak1\":true,\"pak2\":true,\"pak3\":false,\"pak4\":true,\"pak5\":true,\"pak6\":false,\"pak7\":false,\"pak8\":true,\"pak9\":false,\"pak10\":true,\"pak11\":false,\"pak12\":false}]" 
```

你可以这样解析

```
JSONObject jobj=new JSONObject(response);
        String c = jobj.getString("GetDataResult");         
        JSONArray jArray = new JSONArray(c);
        deviceId=jArray.getJSONObject(0).getString("DeviceID"); 
```

这里 JsonArray 的大小是 1。否则你应该使用 for 循环来获取值。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-10-03T18:57:59.803

您可以执行以下操作：

```
JSONArray jsonArray = jsnobject.getJSONArray("locations");
    for (int i = 0; i < jsonArray.length(); i++) {
        JSONObject explrObject = jsonArray.getJSONObject(i);
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-10-22T23:08:04.720

这是一种非常简单的转换方法：

```
import java.io.BufferedReader;
import java.io.FileReader;
import java.io.IOException;
import com.google.gson.Gson;
import com.google.gson.JsonArray;
import com.google.gson.JsonElement;
import com.google.gson.JsonParser;

class Usuario {
private String username;
private String email;
private Integer credits;
private String twitter_username;

public String getUsername() {
    return username;
}

public void setUsername(String username) {
    this.username = username;
}

public String getEmail() {
    return email;
}

public void setEmail(String email) {
    this.email = email;
}

public Integer getCredits() {
    return credits;
}

public void setCredits(Integer credits) {
    this.credits = credits;
}

public String getTwitter_username() {
    return twitter_username;
}

public void setTwitter_username(String twitter_username) {
    this.twitter_username = twitter_username;
}

@Override
public String toString() {
    return "UserName: " + this.getUsername() + " Email: " + this.getEmail();
} 
```

}

```
/*
 * put string into file jsonFileArr.json
 * [{"username":"Hello","email":"hello@email.com","credits"
 * :"100","twitter_username":""},
 * {"username":"Goodbye","email":"goodbye@email.com"
 * ,"credits":"0","twitter_username":""},
 * {"username":"mlsilva","email":"mlsilva@email.com"
 * ,"credits":"524","twitter_username":""},
 * {"username":"fsouza","email":"fsouza@email.com"
 * ,"credits":"1052","twitter_username":""}]
 */

public class TestaGsonLista {

public static void main(String[] args) {
    Gson gson = new Gson();
    try {
        BufferedReader br = new BufferedReader(new FileReader(
                "C:\\Temp\\jsonFileArr.json"));
        JsonArray jsonArray = new JsonParser().parse(br).getAsJsonArray();
        for (int i = 0; i < jsonArray.size(); i++) {
            JsonElement str = jsonArray.get(i);
            Usuario obj = gson.fromJson(str, Usuario.class);
            System.out.println(obj);
            System.out.println(str);
            System.out.println("-------");
        }
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

}

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-09-26T14:07:36.407

如果有来自 Web 服务的以下 JSON，则 Json 数组作为响应：

```
 [3]
 0:  {
 id: 2
 name: "a561137"
 password: "test"
 firstName: "abhishek"
 lastName: "ringsia"
 organization: "bbb"
    }-
1:  {
 id: 3
 name: "a561023"
 password: "hello"
 firstName: "hello"
  lastName: "hello"
  organization: "hello"
 }-
 2:  {
  id: 4
  name: "a541234"
  password: "hello"
  firstName: "hello"
  lastName: "hello"
  organization: "hello"
    } 
```

必须首先将其作为 Json Array 接受，然后在读取其 Object 时必须使用 Object Mapper.readValue ，因为 Json Object 仍在 String 中。

```
 List<User> list = new ArrayList<User>();
      JSONArray jsonArr = new JSONArray(response);

      for (int i = 0; i < jsonArr.length(); i++) {
        JSONObject jsonObj = jsonArr.getJSONObject(i);
         ObjectMapper mapper = new ObjectMapper();
        User usr = mapper.readValue(jsonObj.toString(), User.class);      
        list.add(usr);

    } 
```

mapper.read 是正确的函数，如果你使用 mapper.convert(param,param) 。它会给你错误。

# javascript - 如何在加载页面时将 JavaScript 函数转换为 jQuery 以用于倒数计时器

> ID：15609307
> 
> 赞同：-4
> 
> 时间：2013-03-25T06:57:39.213
> 
> 标签：javascript, jquery, countdowntimer

我有以下倒数计时器代码。我需要将 JavaScript 部分转换为 jQuery。倒数计时器在页面加载时启动。我该怎么做，因为我必须在加载页面时加载 diffTime 函数。请帮我。提前致谢。

编辑：我知道 jquery 调用无法从 ** function CreateTimer() ** 访问 ** function Tick() ** 。jQuery 中有没有 ** setTimeout() ** 的库？据我所知，它是 JS 原生的。

```
<html>
<head>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"></script>
    <script type="text/javascript">
        var Timer;
        var TotalSeconds;

        function CreateTimer(TimerID, Time) {
            Timer = document.getElementById(TimerID);
            TotalSeconds = Time;
            //UpdateTimer()
            window.setTimeout("Tick()", 1000);
        }

        function Tick() {
            if (TotalSeconds <= 0) {
                //alert("Time's up!")
                document.getElementById("timeMsg").innerHTML = "Market closed!! ";
                return;
            }

            TotalSeconds -= 1;
            UpdateTimer()
            window.setTimeout("Tick()", 1000);
        }

        function UpdateTimer() {
            var Seconds = TotalSeconds;

            var Days = Math.floor(Seconds / 86400);
            Seconds -= Days * 86400;

            var Hours = Math.floor(Seconds / 3600);
            Seconds -= Hours * (3600);

            var Minutes = Math.floor(Seconds / 60);
            Seconds -= Minutes * (60);

            var TimeStr = ((Days > 0) ? Days + " days " : "") + LeadingZero(Hours) + ":" + LeadingZero(Minutes) + ":" + LeadingZero(Seconds)

            Timer.innerHTML = TimeStr;
        }

        function LeadingZero(Time) {

            return (Time < 10) ? "0" + Time : + Time;

        }

        function diffTime(){

            var startTime = 10*60 + 30; //starting time in minute
            var lastTime = 16*60 + 30;  //ending time in minutes

            var thisTime = new Date();              // now
            var currentYear = thisTime.getFullYear();        
            var currentMonth = thisTime.getMonth();
            var currentDay = thisTime.getUTCDate();
            var currentHour = thisTime.getHours();
            var currentMinute = thisTime.getMinutes();

            var currentTime = currentHour*60 + currentMinute;   //current time in minute

            if(currentTime >= startTime && currentTime < lastTime){

                var endTime = new Date(currentYear,currentMonth,currentDay,16,30);  // 4:30pm           

                var diff = endTime.getTime() - thisTime.getTime();   // now
                var remainTime = diff / (1000);     // positive number of days
                remainTime = Math.ceil(remainTime);
                CreateTimer("timer", remainTime);

            }else{
                document.getElementById("timeMsg").innerHTML = "Market closed!! ";
                document.getElementById("timer").innerHTML = "00:00:00";

            }

        }
        window.onload = diffTime;
    </script>

</head>
<body>

    <div><span id="timeMsg">Elapsed time remain: </span><b><span id='timer'></span></b></div>

</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T07:00:07.803

在 document.ready() 中调用函数

```
 $( document ).ready( function ()
    {

diffTime();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T07:06:52.513

如果您希望它在整个（即图像、对象等）页面加载后启动：

```
$(window).load(function() {} 
```

否则，您可以在 HTML 已加载且 DOM 准备就绪时启动计时器：

```
$(document).ready(function() {} 
```

# javascript - 内容脚本的 Chrome 弹出窗口

> ID：15609316
> 
> 赞同：0
> 
> 时间：2013-03-25T06:58:42.813
> 
> 标签：javascript, google-chrome

我正在尝试将弹出脚本中的操作传递给内容脚本：

弹出：

```
$(document).ready(function(){
    $("#start").click(function(){
        chrome.tabs.getSelected(function(tab){
            chrome.tabs.sendRequest(tab.id, {threshold: $("#threshold").val()});
        });
    });
}); 
```

内容脚本：

```
$(document).ready(function(){
    console.log("Content.js Loaded");
    chrome.extension.onRequest.addListener(function(request, sender, sendResponse) {
        if(request.threshold){
            //stuff
        }
    });
}); 
```

问题是单击#start 后 //stuff 没有被执行。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T07:07:06.597

什么是门槛？您可能无法通过 if(request.threshold) 语句。如果要检查它是否属实，您应该在此之前放置一个 console.log。

# thread-safety - 或等于常量作为归约操作（例如 value |= 1 ）线程安全？

> ID：15609317
> 
> 赞同：1
> 
> 时间：2013-03-25T06:58:49.033
> 
> 标签：thread-safety, opencl

假设我有一个变量 x。

```
x = 0 
```

然后我生成一些线程，它们中的每一个都可能会或可能不会在不使用原子的情况下运行以下表达式。

```
x |= 1 
```

在所有线程都加入我的主线程之后，主线程在值上分支。

```
if(x) { ... } else { ... } 
```

在这种情况下是否可能存在竞争条件？我的想法说不，因为在读取和写入“x”之间一个线程是否被另一个线程中断似乎并不重要（在这两种情况下，要么是'x == 1'，要么是'x == 1' ）。也就是说，我想确保我没有遗漏一些明显的愚蠢或可笑的微妙的东西。

另外，如果您碰巧提供了相反的答案，请提供一个逐个说明的示例！

**上下文：** 我试图在 OpenCL 中让我的线程指示他们的*任何*工作项中是否存在某个功能。如果任何线程表明存在该功能，我的主机应该能够根据结果进行分支。我正在考虑使用上述方法。如果你们有更好的建议，那也行！

**详细信息：** 我正在尝试将提前退出添加到我的 OpenCL 基数排序实现中，以跳过基数传递，如果数据是带状的（即上面的 'x' 将是 x[RADIX] 并且我将拥有所有工作组，对在部分减少数据后，通过“x”指示 RADIX 箱中是否存在元素）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T17:12:48.467

它可以在工作组内工作。在测试 x 之前，您需要插入一个屏障。我不确定它会比使用原子增量更快。

它不适用于多个工作组。想象一下，您有 1000 个工作组在 20 个内核上运行。通常，只有少数工作组可以驻留在单个内核上，例如 4 个，这意味着在给定时间，GPU 内只能有 80 个工作组在运行。一旦一个工作组执行完毕，它就会退出，并启动另一个工作组。在执行过程中暂停内核以等待所有 1000 个工作组到达同一点是不可能的。

# django - 如何根据对前一个表单域所做的选择来填充表单域

> ID：15609320
> 
> 赞同：0
> 
> 时间：2013-03-25T06:58:59.893
> 
> 标签：django

模型.py

```
title_choices=(('Software Engineer Trainee',"Software Engineer Trainee"),
('Senior Software Engineer ',"Senior Software Engineer"))
op_title = models.CharField(max_length=768, blank=True,choices=title_choices,default="Software Engineer Trainee")
op_skill_required = models.CharField(max_length=3072, blank=True)
op_skill_preferred = models.CharField(max_length=3072, blank=True) 
```

我使用 form.as_table 呈现表单以显示在我的网页中。因此，当我单击其中一个 title_choices 时，根据我要填充表单的 Skill_preferred 和 Skill_required 字段的选择... der 是一种方法吗？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T07:05:42.900

为此，您需要一个客户端解决方案；当用户选择一个选项时，它可以查询您的服务器以获取信息。

由于这是一项常见任务，因此有许多第三方模块可以执行此操作。 [`django-ajax-selects`](https://github.com/crucialfelix/django-ajax-selects)就是其中之一，该[`dajax`项目](http://www.dajaxproject.com/forms/)为 django 提供了这样的集成。

# iphone - 拍照并在iOS中设置为UIImageView

> ID：15609321
> 
> 赞同：2
> 
> 时间：2013-03-25T06:59:05.760
> 
> 标签：iphone, ios, ipad, uiimageview, camera

有没有办法在不通过 Apple 控件的情况下在 iPad 上拍照？我见过很多这样的应用程序，

例如，当您在 iPhone 中添加新联系人时，在左上方显示`add photo`，当我们单击该联系人时，相机会打开并拍照并保存到`add photo`..

我想实现相同的功能.. 可以在 iPad 上吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T07:01:50.683

您需要做的是，首先添加一个按钮，标题为“添加照片”或自定义图像。

然后单击按钮添加以下代码：

```
 if (([UIImagePickerController isSourceTypeAvailable:
              UIImagePickerControllerSourceTypeCamera] == NO)
            return NO;

        UIImagePickerController *cameraUI = [[UIImagePickerController alloc] init];
        cameraUI.sourceType = UIImagePickerControllerSourceTypeCamera;
[self presentViewController: cameraUI animated: YES completion:nil]; 
```

它将打开相机，然后单击图像，然后点击“使用”，您必须实现 UIImagePickerControllerDelegate 方法**imagePickerController:didFinishPickingMediaWithInfo:**然后使用 NSFileManager 方法将 UIImage 存储到您想要的任何位置，使用您想要的任何文件名.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T07:03:39.627

使用图像选择器控制器，您可以使用您在问题中描述的相同功能。

为此，您需要将图片转换为图像数据并在 uiimageview 中显示

你可以参考这个：[UIImageView Class Reference](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImageView_Class/Reference/Reference.html)

这也将为您提供示例。

[从相机拍照并在 UIImageView 中显示的这个](https://stackoverflow.com/a/7820983/1538079)答案将为您提供正确的答案..

享受编程！！

# nlp - 使用斯坦福 NLP 训练 n-gram NER

> ID：15609324
> 
> 赞同：22
> 
> 时间：2013-03-25T06:59:22.927
> 
> 标签：nlp, stanford-nlp, opennlp, named-entity-recognition, named-entity-extraction

最近我一直在尝试用斯坦福核心 NLP 训练 n-gram 实体。我遵循了以下教程 - [http://nlp.stanford.edu/software/crf-faq.shtml#b](http://nlp.stanford.edu/software/crf-faq.shtml#b)

有了这个，我只能指定一元标记和它所属的类。任何人都可以指导我，以便我可以将其扩展到 n-gram。我正在尝试从聊天数据集中提取已知实体，例如电影名称。

请指导我，以防我误解了斯坦福教程，并且同样可以用于 n-gram 训练。

我坚持的是以下属性

```
#structure of your training file; this tells the classifier
#that the word is in column 0 and the correct answer is in
#column 1
map = word=0,answer=1 
```

这里第一列是单词（unigram），第二列是实体，例如

```
CHAPTER O
I   O
Emma    PERS
Woodhouse   PERS 
```

现在我需要将已知实体（比如电影名称）训练为电影，比如**Hulk**、**Titanic**等，使用这种方法会很容易。但如果我需要训练**，我知道你去年夏天**或**婴儿节外出**做了什么，最好的方法是什么？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-15T14:15:43.200

在这里等待答案已经很久了。我一直无法弄清楚使用斯坦福核心完成它的方法。然而任务完成了。我也使用过 LingPipe NLP 库。只是在这里引用答案，因为我认为其他人可以从中受益。

如果您是开发人员或研究人员或其他任何人，请在深入实施之前查看[Lingpipe 许可。](http://alias-i.com/lingpipe/web/licensing.html)

Lingpipe 提供了各种 NER 方法。

1）基于字典的NER

2）统计NER（基于HMM）

3）基于规则的NER等。

我使用了字典以及统计方法。

第一个是直接查找方法，第二个是基于培训的方法。

可以在[此处找到基于字典的 NER 的示例](http://alias-i.com/lingpipe/demos/tutorial/ne/src/DictionaryChunker.java)

统计方法需要一个训练文件。我使用了以下格式的文件 -

```
<root>
<s> data line with the <ENAMEX TYPE="myentity">entity1</ENAMEX>  to be trained</s>
...
<s> with the <ENAMEX TYPE="myentity">entity2</ENAMEX>  annotated </s>
</root> 
```

然后我使用以下代码来训练实体。

```
import java.io.File;
import java.io.IOException;

import com.aliasi.chunk.CharLmHmmChunker;
import com.aliasi.corpus.parsers.Muc6ChunkParser;
import com.aliasi.hmm.HmmCharLmEstimator;
import com.aliasi.tokenizer.IndoEuropeanTokenizerFactory;
import com.aliasi.tokenizer.TokenizerFactory;
import com.aliasi.util.AbstractExternalizable;

@SuppressWarnings("deprecation")
public class TrainEntities {

    static final int MAX_N_GRAM = 50;
    static final int NUM_CHARS = 300;
    static final double LM_INTERPOLATION = MAX_N_GRAM; // default behavior

    public static void main(String[] args) throws IOException {
        File corpusFile = new File("inputfile.txt");// my annotated file
        File modelFile = new File("outputmodelfile.model"); 

        System.out.println("Setting up Chunker Estimator");
        TokenizerFactory factory
            = IndoEuropeanTokenizerFactory.INSTANCE;
        HmmCharLmEstimator hmmEstimator
            = new HmmCharLmEstimator(MAX_N_GRAM,NUM_CHARS,LM_INTERPOLATION);
        CharLmHmmChunker chunkerEstimator
            = new CharLmHmmChunker(factory,hmmEstimator);

        System.out.println("Setting up Data Parser");
        Muc6ChunkParser parser = new Muc6ChunkParser();  
        parser.setHandler( chunkerEstimator);

        System.out.println("Training with Data from File=" + corpusFile);
        parser.parse(corpusFile);

        System.out.println("Compiling and Writing Model to File=" + modelFile);
        AbstractExternalizable.compileTo(chunkerEstimator,modelFile);
    }

} 
```

为了测试NER，我使用了以下课程

```
import java.io.BufferedReader;
import java.io.File;
import java.io.FileReader;
import java.util.ArrayList;
import java.util.Set;

import com.aliasi.chunk.Chunk;
import com.aliasi.chunk.Chunker;
import com.aliasi.chunk.Chunking;
import com.aliasi.util.AbstractExternalizable;

public class Recognition {
    public static void main(String[] args) throws Exception {
        File modelFile = new File("outputmodelfile.model");
        Chunker chunker = (Chunker) AbstractExternalizable
                .readObject(modelFile);
        String testString="my test string";
            Chunking chunking = chunker.chunk(testString);
            Set<Chunk> test = chunking.chunkSet();
            for (Chunk c : test) {
                System.out.println(testString + " : "
                        + testString.substring(c.start(), c.end()) + " >> "
                        + c.type());

        }
    }
} 
```

代码礼貌：谷歌:)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-07-10T03:40:49.443

答案基本上在您引用的示例中给出，其中“Emma Woodhouse”是一个名字。我们提供的默认模型使用 IO 编码，并假设同一类的相邻标记是同一实体的一部分。在许多情况下，这几乎总是正确的，并使模型更简单。但是，如果您不想这样做，您可以使用其他标签编码来训练 NER 模型，例如常用的 IOB 编码，您可以在其中标记事物：

```
Emma    B-PERSON
Woodhouse    I-PERSON 
```

然后，可以表示相同类别但不同实体的相邻标记。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-10-04T04:40:34.113

我面临着为自动域标记 ngram 短语的相同挑战。我一直在寻找一种有效的关键字映射，可用于在稍后阶段创建训练文件。我最终在 NLP 管道中使用了 regexNER，方法是提供一个包含正则表达式（ngram 组件术语）及其相应标签的映射文件。请注意，在这种情况下没有实现 NER 机器学习。希望这些信息对某人有所帮助！

# ruby-on-rails - 保护 ruby 对象属性不被访问

> ID：15609325
> 
> 赞同：0
> 
> 时间：2013-03-25T06:59:25.533
> 
> 标签：ruby-on-rails, ruby

保护属性的最佳方法是什么？见下点：

```
class Document

  # no method outside this class can access this directly. If they call document.data, error should be thrown. including in any rendering 
  field sensitive_data

  # but this method can be accessed by anyone
  def get_sensitive_data
    # where I apply the right protection
  end

end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T09:52:54.973

使用`protected`关键字。

```
class Document

  # but this method can be accessed by anyone
  def get_sensitive_data
    # where I apply the right protection
  end

  protected # or private if you don't want a child class accesses it (Thx @toch)

  # no method outside this class can access this directly. If they call document.data, error should be thrown. including in any rendering 
  field sensitive_data

end 
```

请记住，即使这只是隐藏了 getter / setter，任何人都可以使用`send`例如检索值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T09:52:47.397

没有办法阻止某人访问该数据。无论您是否愿意，元编程都会暴露您类的几乎所有内部​​结构。

也就是说，将 get_sensitive_data 标记为 protected 或 private 至少可以防止 get_sensitive_data 方法被意外调用。

# r - 如何使用 R 下载盘中股市数据

> ID：15609334
> 
> 赞同：21
> 
> 时间：2013-03-25T07:00:03.190
> 
> 标签：r, finance, stockquotes, quandl

全部，

我希望每隔 15 到 60 分钟从雅虎或谷歌下载股票数据，以获得尽可能多的历史数据。我想出了一个粗略的解决方案，如下所示：

```
library(RCurl)
tmp <- getURL('https://www.google.com/finance/getprices?i=900&p=1000d&f=d,o,h,l,c,v&df=cpct&q=AAPL')
tmp <- strsplit(tmp,'\n')
tmp <- tmp[[1]]
tmp <- tmp[-c(1:8)]
tmp <- strsplit(tmp,',')
tmp <- do.call('rbind',tmp)
tmp <- apply(tmp,2,as.numeric)
tmp <- tmp[-apply(tmp,1,function(x) any(is.na(x))),] 
```

考虑到我要导入的数据量，我担心这在计算上可能会很昂贵。我也不是为了我的生活，了解雅虎和谷歌中的时间戳是如何编码的。

所以我的问题是双重的——将一系列股票的数据快速提取到 R 中的简单、优雅的方法是什么，以及如何解释我将使用的 Google/Yahoo 文件上的时间戳？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-25T07:24:33.793

我将尝试首先回答时间戳问题。请注意这是我的解释，我可能是错的。

使用您示例中的链接，`https://www.google.com/finance/getprices?i=900&p=1000d&f=d,o,h,l,c,v&df=cpct&q=AAPL`我得到以下数据：

```
EXCHANGE%3DNASDAQ
MARKET_OPEN_MINUTE=570
MARKET_CLOSE_MINUTE=960
INTERVAL=900
COLUMNS=DATE,CLOSE,HIGH,LOW,OPEN,VOLUME
DATA=
TIMEZONE_OFFSET=-300
a1357828200,528.5999,528.62,528.14,528.55,129259
1,522.63,528.72,522,528.6499,2054578
2,523.11,523.69,520.75,522.77,1422586
3,520.48,523.11,519.6501,523.09,1130409
4,518.28,520.579,517.86,520.34,1215466
5,518.8501,519.48,517.33,517.94,832100
6,518.685,520.22,518.63,518.85,565411
7,516.55,519.2,516.55,518.64,617281
...
... 
```

注意第一列的第一个值`a1357828200`，我的直觉是这与它有关`POSIXct`。因此快速检查：

```
> as.POSIXct(1357828200, origin = '1970-01-01', tz='EST')
[1] "2013-01-10 14:30:00 EST" 
```

所以我的直觉似乎是正确的。但时间似乎已经过去了。现在我们在数据中多了一个信息。`TIMEZONE_OFFSET=-300`. 因此，如果我们将时间戳偏移这个数量，我们应该得到：

```
as.POSIXct(1357828200-300*60, origin = '1970-01-01', tz='EST')
[1] "2013-01-10 09:30:00 EST" 
```

请注意，我不知道您要求的是哪一天的数据。但对谷歌金融的快速检查显示，这些确实是 2013 年 1 月 10 日的价格水平。

![在此处输入图像描述](../Images/e741b08449dda54ee288f8625b444c63.png)

第一列的剩余值似乎与第一行值有某种偏移。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T18:43:16.773

因此，下载和标准化数据最终比我想象的要麻烦得多——大约 150 行代码。问题在于，虽然 Google 提供了所有交易所交易股票过去 50 个训练日的数据，但这些日内的时间戳并没有标准化：例如，“1”的索引可以指第一个或第二个时间增量在数据集中的第一个交易日。更糟糕的是，仅以低交易量交易的股票只有记录交易的条目。对于像 APPL 这样的大容量股票来说这没有问题，但对于小容量的小盘股来说，这意味着即使不是大部分数据，您的系列也会丢失很多。这是有问题的，因为我需要将所有股票系列整齐地放在一起进行分析。

幸运的是，数据仍然存在一般结构。使用此链接：

```
https://www.google.com/finance/getprices?i=1800&p=1000d&f=d,o,h,l,c,v&df=cpct&q=AAPL 
```

最后更改股票代码将为您提供过去 50 天的交易日，以 1/2 小时为增量。由@geektrader 解码的POSIX 时间戳非常有用，每隔3 周出现在时间戳列中。虽然时间戳索引并不总是以方便的 1:1 方式对应（我几乎怀疑这是 Google 故意的），但有一个模式。例如，对于我查看的每三周增量的第一个交易日的半小时系列，时间戳索引统一在 1:15 附近运行。这可能是 1:13、1:14、2:15——这完全取决于股票。我不确定第 14 条和第 15 条是什么：我怀疑它们要么是每日摘要，要么是盘后交易信息。关键是没有一致的模式可以依靠。可悲的是，训练日的第一张邮票，并不总是包含开场数据。最后一个条目和结束数据也是一样的。我发现了解实际代表交易数据的唯一方法是将数字与谷歌地图上的系列进行比较。经过几天徒劳地试图弄清楚如何从数据中撬出 1:1 映射模式后，我决定采用“棒球场”策略。我抓取了APPL的数据（交易量非常大的股票），并将其每个交易日内的时间戳指数设置为整​​个市场的参考值。所有的日子至少有 13 个增量，对应于 6.5 小时的交易日，但有些有 14 或 15 个。在这种情况下，我只是截断了前 13 个指数。从那里，我使用了一个 while 循环来基本上处理每个股票代码的下载数据，并将给定训练日内的时间戳索引与 APPL 时间戳进行比较。我保留了重叠部分，填补了缺失的数据，并剪掉了不重叠的部分。

听起来很简单，但对于交易数据稀少的小批量股票，我不得不考虑数十种特殊情况，并且需要插入大量数据。对于其中一些我知道不正确的结果，我得到了一些非常奇怪的结果。然而，对于大盘股、中盘股和大盘股来说，该解决方案的效果非常好：在大多数情况下，该系列要么与 APPL 数据非常巧妙地同步，要么完美地匹配了他们的谷歌财经档案。

这种方法会引入一些错误，这是无法避免的，我仍然需要对备用小型股的方法进行微调。也就是说，相对于市场和股票的整体走势，将系列移动半小时或填补单个时间增量会引入非常少量的错误。我相信我拥有的这个数据集“足够好”，可以让我获得一些问题的相关答案。将这些东西商业化要花费数千美元。

想法或建议？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T08:33:35.333

为什么不从[Quandl](http://www.quandl.com)加载数据？例如

```
library(Quandl)
Quandl('YAHOO/AAPL') 
```

* * *

**更新**：抱歉，我刚刚意识到 Quandl 仅获取*每日*数据 - 但我将答案留在这里，因为 Quandl 在类似情况下很容易查询

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-03T07:57:22.657

对于时区偏移，请尝试：

as.POSIXct(1357828200, origin = '1970-01-01', tz=Sys.timezone(location = TRUE))

（tz会根据你的位置自动调整）

# php - WSDL/Soap Web服务响应复杂数组解析使用KSOAP2库

> ID：15609335
> 
> 赞同：0
> 
> 时间：2013-03-25T07:00:03.760
> 
> 标签：php, android, xml, json, nusoap

我使用 nusoap 创建了 PHP Web 服务

```
$namespace="http:/mynamespace.com/mynamespace"
$server = new soap_server();
$server->debug_flag = false;
$server->configureWSDL("test", $namespace);
$server->wsdl->schemaTargetNamespace = $namespace;

$server->wsdl->addComplexType(
    'Products',
    'complexType',
    'struct',
    'all',
    '',
    array('ID' => array('name' => 'ID','type' => 'xsd:int'),
        'ProductName' => array('name' => 'ProductName','type' => 'xsd:string'),
        'ImageUrl' => array('name' => 'ImageUrl','type' => 'xsd:string')
        )
);

$server->wsdl->addComplexType(
    'ProductsArray',
    'complexType',
    'array',
    '',
    'SOAP-ENC:Array',
    array(),
    array(
    array('ref'=>'SOAP-ENC:arrayType','wsdl:arrayType'=>'tns:Products[]')
    ),
    'tns:Products'
);
$server->register('GetProductDetails',                    // method name
  array('AgentId' => 'xsd:string'),          // input parameters
  array('return' => 'tns:ProductsArray'),    // output parameters
  $namespace,                         // namespace
  $namespace . '#GetProductDetails',                   // soapaction
  'rpc',                                    // style
  'sequence',                                // use
  'Get Product Details'        // documentation
);

function GetProductDetails($AgentId)
{
    $productArray = array();

    $sqlQry="SELECT pr.products_id, pr.products_image, pd.products_name FROM `products` pr left join products_description pd on pr.products_id=pd.products_id";
    $result=mysql_query($sqlQry);

    while($row=mysql_fetch_array($result)){
        $product=array();
        $product["ID"]=$row['products_id'];
    $product["ProductName"]=$row['products_name'];
    $product["ImageUrl"]=$row['products_image'];
        $productArray[]=$product;
    }
    return $productArray;
}
$HTTP_RAW_POST_DATA = isset($GLOBALS['HTTP_RAW_POST_DATA'])?$GLOBALS['HTTP_RAW_POST_DATA'] : '';
$server->service($HTTP_RAW_POST_DATA); 
```

我在 android 中得到了类似的响应

```
[Products{ID=29; Name=product1; Url=product1.jpg; }, Products{ID=30; Name=product2; Url=product2.jpg; }] 
```

这个响应是一个元素，`response.getProperty(0)` 如果我将此代码粘贴到[http://jsonviewer.stack.hu/](http://jsonviewer.stack.hu/)站点，那么它会告诉我它不是有效的 json，我是 nusoap 的新手，所以我不知道这如何给出 json /XML 响应 代码有问题吗？我也尝试过 Android 代码：

```
 SoapObject response = (SoapObject) envelope.bodyIn;
 SoapObject nameResult = (SoapObject) response.getProperty(0); 
```

在上面，`nameResult`我在一个属性中获得了所有响应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T07:34:18.077

我以前从未使用过 nusoap，但据我所知，您可以正确连接到您的数据库，并且根据我发现 nusoap 可以运行标准 php 脚本，在这种情况下，将函数 GetProductDetails 替换为我下面的内容（我正在使用 json_encode），您的问题是如何在 while 循环中加载单个结果，您必须改用 array_push() 。

```
function GetProductDetails($AgentId)
 {
  // array for JSON response
  $productArray = array();

 $sqlQry="SELECT pr.products_id, pr.products_image, pd.products_name FROM `products` pr      left join products_description pd on pr.products_id=pd.products_id";
  $result=mysql_query($sqlQry);

  while ($row = mysql_fetch_array($result)) {
    // temp user array
    $product=array();
    $product["ID"]=$row['products_id'];
    $product["ProductName"]=$row['products_name'];
    $product["ImageUrl"]=$row['products_image'];
    // push single product into final response array
    array_push($poductArray["products"], $product);
    }
// echoing JSON response
echo json_encode($productArray);
} 
```

希望这行得通，因为我没有您的 sql（但它是从我的服务器上的类似脚本复制并为您的目的重写），所以它显然未经测试，您也应该涵盖数据库为空的情况

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T05:29:04.783

我已经自己解决了，如果有人需要如何解决这个问题，这里可以提供帮助。

我得到的响应是使用 Vector 解析的，之后我只是简单地创建一个循环来获取每个属性并添加到`ArrayList<HashMap<String, String>>`.

我的过程就像，从 web 服务获取响应并使用向量解析该响应，我只需检索属性并添加到`ArrayList<HashMap<String, String>>`.

所以如果这里有人想解析 complexType Array Response 并发现像我这样的问题，他们可以找到如下代码的解决方案

```
public static final ArrayList<HashMap<String, String>> productMapArray = new ArrayList<HashMap<String, String>>();

        SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
                SoapEnvelope.VER11);
        envelope.dotNet = true;

        HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
        request.addProperty("user_id", "1");
   try {
            androidHttpTransport.call(SOAP_ACTION, envelope);
            Vector<SoapObject> response = (Vector<SoapObject>)envelope.getResponse();
            for (SoapObject soapObject : response) {
                HashMap<String, String> map = new HashMap<String, String>();
                map.put(KEY_ID, soapObject.getProperty(KEY_ID).toString());
                map.put(KEY_PRODUCT, soapObject.getProperty(KEY_PRODUCT).toString());
                map.put(KEY_IMG, soapObject.getProperty(KEY_IMG).toString());
                productMapArray.add(map);
            }  
            if (response.toString().equalsIgnoreCase("invalid")) {
                result = false;
            } else {
                result = true;
            }

        } catch (SocketException ex) {
            result = false;
            Log.e("Error : ", "Error on soapPrimitiveData() " + ex.getMessage());
            ex.printStackTrace();
        } catch (Exception e) {
            result = false;
            Log.e("Error : ", "Error on soapPrimitiveData() " + e.getMessage());
            e.printStackTrace();
        }
        return result; 
```

# sql - SQL查找最近的数字

> ID：15609336
> 
> 赞同：2
> 
> 时间：2013-03-25T07:00:05.710
> 
> 标签：sql, oracle10g

假设我有一个如下表（我在 Oracle 10g 顺便说一句）

```
NAME    VALUE
------  ------
BOB     1
BOB     2
BOB     4
SUZY    1
SUZY    2
SUZY    3 
```

如何选择`value`最接近但不大于给定数字的所有行。例如，如果我想找到 value 最接近 3 的所有行，我会得到：

```
NAME    VALUE
------  ------
BOB     2
SUZY    3 
```

这似乎应该很简单......但我没有运气。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T07:03:16.530

```
SELECT name, max(value)
FROM tbl
WHERE value <= 3
GROUP BY name 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T07:06:22.413

这有效（[SQLFiddle 演示](http://www.sqlfiddle.com/#!4/c35ba/5)）：

```
SELECT name, max(value)
FROM mytable
WHERE value <= 3
GROUP BY name 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T07:07:10.700

基于 hagensofts 的回答：

```
SELECT name, max(value) 
FROM tbl 
WHERE value <= 3 AND ROWNUM <=2
GROUP BY name 
```

使用 ROWNUM 您可以限制输出行，因此如果您想要 2 行，那么您可以限制 rownum。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T07:07:10.953

```
WITH v AS (
  SELECT 'BOB' NAME, 1 value FROM dual
  UNION ALL
  SELECT 'BOB', 2 FROM dual
  UNION ALL
  SELECT 'BOB', 4 FROM dual
  UNION ALL
  SELECT 'SUZY', 1 FROM dual
  UNION ALL
  SELECT 'SUZY', 2 FROM dual
  UNION ALL
  SELECT 'SUZY', 3 FROM dual
)
SELECT *
  FROM v
 WHERE (name, value) IN (SELECT name, MAX(value)
                          FROM v
                         WHERE value <= :num
                      GROUP BY name)
; 
```

# nhibernate - Fluent NHibernate 子类的不同序列

> ID：15609344
> 
> 赞同：0
> 
> 时间：2013-03-25T07:00:23.127
> 
> 标签：nhibernate, fluent-nhibernate, fluent-nhibernate-mapping

我使用 Fluent NHibernate 和每个具体类的表进行继承映射。

有一个抽象基类和另外两个子类。

我的基类有 Id 列。创建的表没问题。所有表都有自己的 Id 列。但是对于这两个表，序列只是一个。

我想为每个子类分配不同的序列。

```
public abstract class Base
{
    public virtual int Id { get; set; }
}

public class BaseMap : ClassMap<Base>
{
    public BaseMap()
    {
        Id(x => x.Id).GeneratedBy.Native();
    }
}

public class A : Base
{
    public virtual int AmountOfA { get; set; }
}

public class AMap : ClassMap<A>
{
    public AMap()
    {
        Map(x => x.AmountOfA );
    }
}

public class B : Base
{
    public virtual int AmountOfB { get; set; }
}

public class BMap : ClassMap<B>
{
    public BMap()
    {
        Map(x => x.AmountOfB );
    }
} 
```

Fluent NHibernate 可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T10:05:45.057

这是设计使然。

*   `session.Get<Base>(1);`会有未定义的行为，因为 id 不是唯一的

*   考虑在`Reference(x => x.SomeBase);`数据库中引用值为 1 的基类的情况：无法知道 A(Id: 1) 或 B(Id: 1) 是引用的对象

如果 Base 只是为了重用 Id 属性，则不要将其映射为自己的实体，而是创建一个基类

```
public class BaseMap<T> : ClassMap<T> where T : Base
{
    public BaseMap()
    {
        Id(x => x.Id).GeneratedBy.Native();
    }
}

public class AMap : BaseMap<A>
{
    public AMap()
    {
        Map(x => x.AmountOfA );
    }
} 
```

# action - CakePHP 2.0 类似推特的关注按钮

> ID：15609345
> 
> 赞同：0
> 
> 时间：2013-03-25T07:00:27.710
> 
> 标签：action, cakephp-2.0, has-and-belongs-to-many, twitter-follow

我无法自拔，目前很烦人，是的，我经常使用谷歌。

# 我需要的：

带有关注用户的 twitterlike`follow`按钮。`action`

## 我已经做了什么：

# 数据库

`users`表：ID，用户名，密码，...

`users_users`表：id、user_id、follower_id

# 代码

在模型中`User.php`

```
public $hasAndBelongsToMany = array(
'Follower' => array(
  'className' => 'User',
  'joinTable' => 'users_users',
  'foreignKey' => 'user_id',
  'associationForeignKey' => 'follower_id',
  'unique' => 'keepExisting',
) 
); 
```

在`UsersController.php`

```
public function follow() {
/*need help here*/
} 
```

在`Users\index.ctp`

```
<?php if ($current_user['id'] != $user['User']['id']) echo $this->Html->link('Follow', array('action' => 'follow', $user['User']['id'])); ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T10:46:26.433

就个人而言，我认为 hasAndBelongsToMany 并不适合这种情况。当您想要显示复选框列表或选择列表并允许用户以一种形式选择/管理他们的所有关注者（或任何可能的关系）时，它非常适合。

这可能只是我个人的偏好，但在像您这样的情况下，您添加/删除单个链接而不担心与该用户相关的任何其他链接，我更喜欢只创建一个单独的“关系”（或类似命名) 模型/控制器，并将记录视为本身的事物，而不是只是 hasAndBelongsToMany 链接，这些链接都是“自动”管理的。

这是我的做法：

将您的 users_users 表命名为“relationships”。并将列命名为“followed_by_id”和“following_id”（或类似名称）以避免关于哪个用户是关注者/被关注者的任何歧义（如果这是一个词！）。

在您的用户模型中，您将拥有以下关系：

```
var $hasMany = array(
    'Followers' => array(
        'className' => 'Relationship',
        'foreignKey' => 'following_id',
        'dependent'=> true
    ),
    'FollowingUsers' => array(
        'className' => 'Relationship',
        'foreignKey' => 'followed_by_id',
        'dependent'=> true
    ),
); 
```

然后你会有一个看起来像这样的关系模型（$belongsTo 关系是重要的部分）：

```
<?php
class Relationship extends AppModel {
    var $name = 'Relationship';

    var $validate = array(
        'followed_by_id' => array(
            'numeric' => array(
                'rule' => array('numeric'),
            ),
        ),
        'following_id' => array(
            'numeric' => array(
                'rule' => array('numeric'),
            ),
        ),
    );

    var $belongsTo = array(
        'FollowedBy' => array(
            'className' => 'User',
            'foreignKey' => 'followed_by_id'
        ),
        'Following' => array(
            'className' => 'User',
            'foreignKey' => 'following_id'
        )
    );
}
?> 
```

然后在您的关系控制器中，您将拥有如下内容：

```
function add($following_id = null) {
    $this->Relationship->create();
    $this->Relationship->set('followed_by_id',$this->Auth->User('id'));
    $this->Relationship->set('following_id',$following_id);
    if ($this->Relationship->save($this->data)) {
        // all good
    } else {
        // You could throw an error here if you want
        $this->Session->setFlash(__('Error. Please, try again.', true));
    }
    $this->redirect($this->referer());
} 
```

然后要添加关系，您显然只需调用关系控制器的 add 方法。

注意：理想情况下，由于添加关系会更改数据库，因此理想情况下不应通过常规 URL 访问的 GET 请求来完成。应该通过 POST 提交表单来完成。我知道当通过 GET 的常规链接很容易做到这一点时，这似乎有点矫枉过正。在此示例中，我没有费心使用表单/POST - 但如果您想坚持最佳实践，那就是您应该做的。有关更多信息，请参见：[https ://softwareengineering.stackexchange.com/questions/188860/why-shouldnt-a-get-request-change-data-on-the-server](https://softwareengineering.stackexchange.com/questions/188860/why-shouldnt-a-get-request-change-data-on-the-server)

# python - 在 Treeview 中添加项目的线程 - pygtk

> ID：15609348
> 
> 赞同：0
> 
> 时间：2013-03-25T07:00:40.793
> 
> 标签：python, multithreading, pygtk

我正在尝试在 pygtk 中开发下载器应用程序所以当用户添加一个 url 以下操作时

> *   添加网址（）

调用

> > *   验证网址（）
> >     
> >     
> > *   获取网址详细信息（）

因此，由于延迟，将 url 添加到列表中需要一些`urllib.urlopen`时间，所以我尝试实现线程。我将以下代码添加到主窗口

`thread.start_new_thread(addUrl, (self,url, ))` 我传递了对主窗口的引用，以便我可以从线程访问列表，但似乎什么也没发生

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T14:22:40.980

我认为你先检查这个线程[如何在 Python 中使用线程？](https://stackoverflow.com/questions/2846653/python-multithreading-for-dummies). **例如：** 导入队列导入线程导入urllib2

```
# called by each thread
def get_url(q, url):
    q.put(urllib2.urlopen(url).read())

theurls = '''http://google.com http://yahoo.com'''.split()

q = Queue.Queue()

for u in theurls:
    t = threading.Thread(target=get_url, args = (q,u))
    t.daemon = True
    t.start()

s = q.get()
print s 
```

希望这对您有所帮助。

# sugarcrm - 如何切换语言 SugarCE-6.5.11？

> ID：15609350
> 
> 赞同：0
> 
> 时间：2013-03-25T07:00:44.190
> 
> 标签：sugarcrm

我想知道如何在 Sugar 中切换语言？我创建了一个新模块，编写了 2 个语言文件。现在我想创建 2 个单选按钮允许用户选择语言。任何线索将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T02:12:53.770

我看看用户模块，然后在 login.php 中找出我的答案。之后，我在我的模块中创建一个视图来测试它，这是结果（显示函数中的代码）。这对我来说可以。

```
function display(){
    global $current_language, $mod_strings, $app_strings,$sugar_config;

    echo '
            <form action="" method="post">
            <input type="radio" name="lang" value="en_us" checked="checked">English<br>
            <input type="radio" name="lang" value="vi">Vietnamese<br>
            <input type="submit" value="Submit">
            </form> 
            ';
    if(isset($_POST['lang']))
    {
        $lang = $_POST['lang'];
        $current_language = $lang;

        $_SESSION['authenticated_user_language'] = $lang;
        $mod_strings = return_module_language($lang, "Activity");// Activity is my custom module
        $app_strings = return_application_language($lang);

        SugarApplication::redirect();
    }
} 
```

# javascript - 在视口元标记中设置最小宽度

> ID：15609357
> 
> 赞同：2
> 
> 时间：2013-03-25T07:01:07.763
> 
> 标签：javascript, html, css, meta-tags

我正在设计一个网页[响应式]。屏幕的最小宽度应为 480 像素。我该怎么做？

现在我将宽度固定为 480 像素，这在手机上看起来很完美，但在平板电脑上看起来相当大。对于大屏幕，宽度应该动态变化。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-12-06T20:47:44.777

我写了一个 polyfill 来添加`min-width`到视口元标记中：

[https://github.com/brendanlong/viewport-min-width-polyfill](https://github.com/brendanlong/viewport-min-width-polyfill)

如果你使用它，你可以这样做：

```
<meta name="viewport" content="width=device-width, initial-scale=1.0, min-width=480"/>
<script type="text/javascript" src="viewport-min-width.js"></script> 
```

它通过将视口替换为静态宽度 if 来工作`screen.width < minWidth`。我已经在移动 Firefox 和 Chrome 中进行了测试，据我所知，它应该可以在 Safari 中运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T07:09:24.257

视口元标记中的最小宽度

```
<meta name="viewport" content="width=480"> 
```

或者

```
@-o-viewport {
  width: 480px;
} 
```

用于响应式设计

```
<meta name="viewport" content="width=device-width, initial-scale=1.0"> 
```

使用媒体查询

```
@media screen and (max-width: 480px) {
    css
} 
```

[媒体查询](http://css-tricks.com/css-media-queries/)
[视口](http://webdesignerwall.com/tutorials/viewport-meta-tag-for-non-responsive-design)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T07:05:31.927

我想，就像你现在一样，像往常一样放置你所有的桌面 CSS。然后使用媒体查询来调用你的新 CSS 元素。

```
@media screen and (max-width: 480px) {
    //all of your mobile styling
} 
```

还添加`media="screen"`到您调用样式表的位置`<head>` `rel="stylesheet"`

还有一个很棒的教程[http://css-tricks.com/css-media-queries/](http://css-tricks.com/css-media-queries/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-25T07:10:18.230

`@media`查询绝对是您需要的。它们允许您根据查看站点的视口大小执行不同的 CSS。

这个网站有一个很好的`@media`查询模板可以工作：

[http://css-tricks.com/snippets/css/media-queries-for-standard-devices/](http://css-tricks.com/snippets/css/media-queries-for-standard-devices/)

但一般来说，首先设计您的桌面版本。`@media`然后在上面链接中定义的相应查询下进行任何修改。我认为这是一个很好的起点！

# jquery - 使用 JQuery 搜索 JSON 对象

> ID：15609358
> 
> 赞同：0
> 
> 时间：2013-03-25T07:01:14.053
> 
> 标签：jquery, json, search

我是 JQuery 新手，必须用 jquery 搜索 json 对象。json结构如下：

```
[
    ["12345","Mary Smith","789 Main Street","Orlando","FL","32808"],
    ["33333","James Richards","55 High St","Miami","WV","23412"]
] 
```

我想根据第一个值（即 12345）搜索对象并返回整个对象。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T07:22:10.517

```
var queryJson = [["12345","Mary Smith","789 Main Street","Orlando","FL","32808"],["33333","James Richards","55 High St","Miami","WV","23412"]];

alert(queryJson[0]);
// will return a string array

alert(queryJson[0][0]);
// will return a string value "12345"

alert(queryJson[1][0]);
// will return a string value "33333" 
```

我想我帮助了你。再见

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T07:07:59.813

您可以使用简单的 javascript 作为：

```
var entry = myJson["12345"]; 
```

或者对于 Jquery 需要编写一个函数（因为不适用于普通对象文字）：

函数getObjects（obj，键）{

```
var objects = [];
  for (var i in obj) {
    if (obj[i][0] == key) {  
        return obj;
    }        
  }
 return objects;
} 
```

像这样使用：

```
getObjects(myJson, '12345'); 
```

[这是工作演示](http://jsfiddle.net/zaheerahmed/tDYrw/3/)

# spring - Spring security：HTTP 状态 404：请求的资源（/trade-web/login）不可用

> ID：15609360
> 
> 赞同：-1
> 
> 时间：2013-03-25T07:01:18.260
> 
> 标签：spring, spring-mvc, spring-security, spring-webflow

我正在尝试使用自定义服务类为身份验证提供者做一个弹簧安全 D/B 身份验证示例。

我收到 HTTP 404 状态 - 请求的资源 (/itrade-web/login) 不可用。我知道它是因为我能够解析到 jsp 页面。我确实在控制器中放了一些系统输出，但它没有被打印出来。所以控制直到控制器才会运行，并且在登录 url 被查找后它就出错了由于某些原因，安全上下文 xml。

PS - 我在控制台中没有收到任何错误。

[编辑]：我确定 Spring Security 劫持了传入的请求，然后在控制从安全 xml 返回到控制器之前出现问题，我无法弄清楚。

请帮助我了解这里到底是什么问题。我已包含以下所有代码：

应用程序上下文安全.xml

```
<?xml version="1.0" encoding="UTF-8"?><beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:jee="http://www.springframework.org/schema/jee"
xmlns:security="http://www.springframework.org/schema/security"
xmlns:tx="http://www.springframework.org/schema/tx"
xsi:schemaLocation="http://www.springframework.org/schema/beans
      http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
      http://www.springframework.org/schema/security
      http://www.springframework.org/schema/security/spring-security-3.1.xsd
      http://www.springframework.org/schema/tx 
      http://www.springframework.org/schema/tx/spring-tx-2.0.xsd">

<security:http auto-config="true" use-expressions="true">
    <security:intercept-url pattern="/welcome.html"
        access="hasRole('ROLE_USER')" />
    <security:form-login login-page="/login"
        default-target-url="/welcome" authentication-failure-url="/loginfailed" />
    <security:logout logout-success-url="/logout" />
</security:http>

<security:authentication-manager>
    <security:authentication-provider
        user-service-ref="LoginUserDetailsService">
    </security:authentication-provider>
</security:authentication-manager>

<bean id="LoginUserDetailsService"
    class="com.inf.trade.core.service.security.LoginUserDetailsServiceImpl">
    <property name="loginDAO" ref="loginDAOImpl" />
</bean>

<bean id="loginDAOImpl" class="com.inf.trade.core.dao.security.LoginDAOImpl">
    <property name="sessionFactory"> <ref bean ="sessionFactory"/> </property>
</bean> 
```

spring-servlet.xml

```
<?xml version="1.0" encoding="UTF-8"?><beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:p="http://www.springframework.org/schema/p"
xmlns:context="http://www.springframework.org/schema/context"
xmlns:mvc="http://www.springframework.org/schema/mvc"
xsi:schemaLocation="http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/mvc
    http://www.springframework.org/schema/mvc/spring-mvc.xsd
    http://www.springframework.org/schema/context
    http://www.springframework.org/schema/context/spring-context-3.0.xsd">

<context:component-scan base-package="com.inf.trade.client.controller" />
<context:annotation-config />

<bean id="tilesViewResolver"
    class="org.springframework.web.servlet.view.UrlBasedViewResolver">
    <property name="viewClass">
        <value>
            org.springframework.web.servlet.view.tiles2.TilesView
        </value>
    </property>
    <property name="order" value="0" />
</bean>

<bean id="jspViewResolver"
      class="org.springframework.web.servlet.view.InternalResourceViewResolver" >
          <property name="prefix">
             <value>/pages/</value>
          </property>
          <property name="suffix">
             <value>.jsp</value>
          </property>
      <property name="order" value="1" />
</bean>

<bean id="tilesConfigurer"
    class="org.springframework.web.servlet.view.tiles2.TilesConfigurer">
    <property name="definitions">
        <list>
            <value>/WEB-INF/tiles.xml</value>
        </list>
    </property>
</bean>
<bean class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter">
    <property name="messageConverters">
        <list>
            <bean class="org.springframework.http.converter.json.MappingJacksonHttpMessageConverter">
                <property name="objectMapper" ref="jacksonObjectMapper" />
            </bean>
        </list>
    </property>
</bean>

<bean id="jacksonObjectMapper" class="org.codehaus.jackson.map.ObjectMapper" />

<!-- Application Message Bundle -->
<bean id="messageSource"
    class="org.springframework.context.support.ReloadableResourceBundleMessageSource">
    <property name="basename" value="classpath:messages" />
    <property name="defaultEncoding" value="UTF-8" />
    <property name="fileEncodings" value="UTF-8" />
    <property name="fallbackToSystemLocale" value="false" />
</bean> 
```

index.jsp（它在 webapp 中）

```
<%@ page session="false" %>
<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<%@taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<%@ taglib prefix="sec" uri="http://www.springframework.org/security/tags" %>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" href="<c:url value='/static/css/tutorial.css'/>"       type="text/css" />
  <title>Home Page</title>
  </head>
  <body>
  <div id="content">
  <h1>Home Page</h1>
  <p>
  Anyone can view this page.
  </p>
  <p><a href="welcome.html">Login page</a></p>
  </div>
  </body>
  </html> 
```

login.jsp（它在 webapp/pages 内，welcome.jsp 也在 webapp/pages 内）

```
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<html>
<head>
<title>Login Page</title>
<style>
.errorblock {
color: #ff0000;
background-color: #ffEEEE;
border: 3px solid #ff0000;
padding: 8px;
margin: 16px;
 }
 </style>
 </head>
 <body onload='document.f.j_username.focus();'>
<h3>Login with Username and Password (Authentication with Database)</h3>

<c:if test="${not empty error}">
    <div class="errorblock">
        Your login attempt was not successful, try again.<br /> Caused :
        ${sessionScope["SPRING_SECURITY_LAST_EXCEPTION"].message}
    </div>
</c:if>

<form name='f' action="<c:url value='j_spring_security_check' />"
    method='POST'>

    <table>
        <tr>
            <td>User:</td>
            <td><input type='text' name='j_username' value=''>
            </td>
        </tr>
        <tr>
            <td>Password:</td>
            <td><input type='password' name='j_password' />
            </td>
        </tr>
        <tr>
            <td colspan='2'><input name="submit" type="submit"
                value="submit" />
            </td>
        </tr>
        <tr>
            <td colspan='2'><input name="reset" type="reset" />
            </td>
        </tr>
    </table>

</form> 
```

BaseController.java

```
@Controller
@SessionAttributes({ "footer", "headerObject", "menuObject" })
public class BaseController {

@Autowired
private FooterDelegate footerDelegate;

@Autowired
private HeaderDelegate headerDelegate;

@Autowired
//private IMenuDelegate menuDelegate;

/*public IMenuDelegate getMenuDelegate() {
    return menuDelegate;
}

public void setMenuDelegate(MenuDelegateDirect menuDelegate) {
    this.menuDelegate = menuDelegate;
}*/

public FooterDelegate getFooterDelegate() {
    return footerDelegate;
}

public void setFooterDelegate(FooterDelegate footerDelegate) {
    this.footerDelegate = footerDelegate;
}

public HeaderDelegate getHeaderDelegate() {
    return headerDelegate;
}

public void setHeaderDelegate(HeaderDelegate headerDelegate) {
    this.headerDelegate = headerDelegate;
}

@RequestMapping("/welcome")
public ModelAndView welcome(Model model) {

    System.out.println("Inside Welcome1");

    String userId = "hammid_hani";
    FooterModel footerVO = new FooterModel();
    footerVO.setFooterListTop(footerDelegate.readFooter(userId)
            .getFooterListTop());
    footerVO.setFooterListBottom(footerDelegate.readFooter(userId)
            .getFooterListBottom());
    model.addAttribute("footer", footerVO);

    HeaderModel headerVO = new HeaderModel();
    headerVO.setTopLeft(headerDelegate.fetchHeader(userId).getTopLeft());
    headerVO.setTopRight(headerDelegate.fetchHeader(userId).getTopRight());
    headerVO.setTickerList(headerDelegate.fetchHeader(userId)
            .getTickerList());
    model.addAttribute("headerObject", headerVO);

    MenuModel menuVO = new MenuModel();
    try {
        //menuVO.setMenuList(menuDelegate.fetchMenu(userId).getMenuList());

        model.addAttribute("menuObject", menuVO);

    } catch (Exception e) {

    }
    System.out.println("Inside Welcome");

    /*User user = (User)SecurityContextHolder.getContext().getAuthentication().getPrincipal();
    String name = user.getUsername();

    ModelMap mmap = new ModelMap();
    mmap.addAttribute("username", name);
    mmap.addAttribute("message", "Spring Security login + database example");*/
    return new ModelAndView("welcome");
}

//@RequestMapping(value="/login", method = RequestMethod.GET)
@RequestMapping("/login")
public ModelAndView login(Model model) {
    System.out.println("Inside /login...");
    return new ModelAndView("login");
}
/*public String login(ModelMap model) {

    System.out.println("Inside /login...");
    return "login";

}*/

@RequestMapping(value="/loginfailed", method = RequestMethod.GET)
public String loginerror(ModelMap model) {

    model.addAttribute("error", "true");
    return "login";

}

@RequestMapping(value="/logout", method = RequestMethod.GET)
public String logout(ModelMap model) {

    return "login";
}} 
```

[更新] 下面是 Tiles.xml

```
 <?xml version="1.0" encoding="UTF-8" ?>
   <!DOCTYPE tiles-definitions PUBLIC
   "-//Apache Software Foundation//DTD Tiles Configuration 2.0//EN"
   "http://tiles.apache.org/dtds/tiles-config_2_0.dtd">

  <tiles-definitions>
<definition name="base.definition" template="/pages/portalLayout.jsp">
    <put-attribute name="header" value="/pages/portalHeader.jsp" /> 
    <put-attribute name="menu" value="/pages/portalMenu.jsp" /> 
    <put-attribute name="body" value="" />
    <put-attribute name="footer" value="/pages/portalFooter.jsp" />
</definition>

<definition name="BasketOrders" extends="base.definition">
    <put-attribute name="body" value="/pages/BasketOrders.jsp" />
</definition>

<definition name="portfolio" extends="base.definition">
    <put-attribute name="body" value="/pages/portfolio.jsp" />
</definition>

<definition name="orderSummary" extends="base.definition">
    <put-attribute name="body" value="/pages/orderSummary.jsp" />
</definition>

<definition name="accountSummary" extends="base.definition">
    <put-attribute name="body" value="/pages/accountSummary.jsp" />
</definition> 
```

下面是我在 pom.XML 中的 SL4J 配置

```
 <properties>
    <java-version>1.6</java-version>
    <org.springframework-version>3.2.0.RELEASE</org.springframework-version>
    <org.springsec-version>3.1.3.RELEASE</org.springsec-version>
    <org.aspectj-version>1.7.1</org.aspectj-version>
    <org.slf4j-version>1.5.10</org.slf4j-version>
    <org.apache.cxf-version>2.6.5</org.apache.cxf-version>
    <hibernate.version>4.1.0.Final</hibernate.version>     
    <tiles.version>2.2.2</tiles.version>
    </properties>
    <!-- Logging --> 
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-api</artifactId>
        <version>${org.slf4j-version}</version>
    </dependency>
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>jcl-over-slf4j</artifactId>
        <version>${org.slf4j-version}</version>
        <scope>runtime</scope>
    </dependency>
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-log4j12</artifactId>
        <version>${org.slf4j-version}</version>
        <scope>runtime</scope>
    </dependency>
    <dependency>
        <groupId>log4j</groupId>
        <artifactId>log4j</artifactId>
        <version>1.2.15</version>
        <exclusions>
            <exclusion>
                <groupId>javax.mail</groupId>
                <artifactId>mail</artifactId>
            </exclusion>
            <exclusion>
                <groupId>javax.jms</groupId>
                <artifactId>jms</artifactId>
            </exclusion>
            <exclusion>
                <groupId>com.sun.jdmk</groupId>
                <artifactId>jmxtools</artifactId>
            </exclusion>
            <exclusion>
                <groupId>com.sun.jmx</groupId>
                <artifactId>jmxri</artifactId>
            </exclusion>
        </exclusions>
        <scope>runtime</scope>
    </dependency> 
```

[更新] 下面是我的 web.xml

```
 <?xml version="1.0" encoding="UTF-8"?>
 <web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID" version="2.5">
 <display-name>SpringPOC</display-name>
 <servlet>
<servlet-name>spring</servlet-name>
<servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
<load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
<servlet-name>spring</servlet-name>
<url-pattern>*.html</url-pattern>
</servlet-mapping>
<listener>
<listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>
<context-param>
<param-name>contextConfigLocation</param-name>
<param-value>
        /WEB-INF/applicationContextDirect.xml
        /WEB-INF/applicationContext-security.xml
    </param-value>
</context-param>
<filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>

<filter-mapping>
  <filter-name>springSecurityFilterChain</filter-name>
  <url-pattern>/*</url-pattern>
</filter-mapping>
<welcome-file-list>
    <welcome-file>index.jsp</welcome-file>
</welcome-file-list>
</web-app> 
```

[更新]服务器启动时登录：

```
 SLF4J: Failed to load class "org.slf4j.impl.StaticLoggerBinder".
    SLF4J: Defaulting to no-operation (NOP) logger implementation
    SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details.
    [INFO] Scanning for projects...
    Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-assembly-plugin/2.2-beta-5/maven-assembly-plugin-2.2-beta-5.pom
    [WARNING] Failed to retrieve plugin descriptor for org.apache.maven.plugins:maven-assembly-plugin:2.2-beta-5: Plugin org.apache.maven.plugins:maven-assembly-plugin:2.2-beta-5 or one of its dependencies could not be resolved: Failed to read artifact descriptor for org.apache.maven.plugins:maven-assembly-plugin:jar:2.2-beta-5
    Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-antrun-plugin/1.3/maven-antrun-plugin-1.3.pom
    [WARNING] Failed to retrieve plugin descriptor for org.apache.maven.plugins:maven-antrun-plugin:1.3: Plugin org.apache.maven.plugins:maven-antrun-plugin:1.3 or one of its dependencies could not be resolved: Failed to read artifact descriptor for org.apache.maven.plugins:maven-antrun-plugin:jar:1.3
    [WARNING] Failed to retrieve plugin descriptor for org.apache.maven.plugins:maven-assembly-plugin:2.2-beta-5: Plugin org.apache.maven.plugins:maven-assembly-plugin:2.2-beta-5 or one of its dependencies could not be resolved: Failed to read artifact descriptor for org.apache.maven.plugins:maven-assembly-plugin:jar:2.2-beta-5
    Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-dependency-plugin/2.1/maven-dependency-plugin-2.1.pom
    [WARNING] Failed to retrieve plugin descriptor for org.apache.maven.plugins:maven-dependency-plugin:2.1: Plugin org.apache.maven.plugins:maven-dependency-plugin:2.1 or one of its dependencies could not be resolved: Failed to read artifact descriptor for org.apache.maven.plugins:maven-dependency-plugin:jar:2.1
    Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-release-plugin/2.0/maven-release-plugin-2.0.pom
    [WARNING] Failed to retrieve plugin descriptor for org.apache.maven.plugins:maven-release-plugin:2.0: Plugin org.apache.maven.plugins:maven-release-plugin:2.0 or one of its dependencies could not be resolved: Failed to read artifact descriptor for org.apache.maven.plugins:maven-release-plugin:jar:2.0
    [INFO]                                                                         
    [INFO] ------------------------------------------------------------------------
    [INFO] Building trade-web 0.0.1
    [INFO] ------------------------------------------------------------------------
    [WARNING] Failed to retrieve plugin descriptor for org.apache.maven.plugins:maven-assembly-plugin:2.2-beta-5: Plugin org.apache.maven.plugins:maven-assembly-plugin:2.2-beta-5 or one of its dependencies could not be resolved: Failed to read artifact descriptor for org.apache.maven.plugins:maven-assembly-plugin:jar:2.2-beta-5
    [WARNING] Failed to retrieve plugin descriptor for org.apache.maven.plugins:maven-antrun-plugin:1.3: Plugin org.apache.maven.plugins:maven-antrun-plugin:1.3 or one of its dependencies could not be resolved: Failed to read artifact descriptor for org.apache.maven.plugins:maven-antrun-plugin:jar:1.3
    [WARNING] Failed to retrieve plugin descriptor for org.apache.maven.plugins:maven-assembly-plugin:2.2-beta-5: Plugin org.apache.maven.plugins:maven-assembly-plugin:2.2-beta-5 or one of its dependencies could not be resolved: Failed to read artifact descriptor for org.apache.maven.plugins:maven-assembly-plugin:jar:2.2-beta-5
    [WARNING] Failed to retrieve plugin descriptor for org.apache.maven.plugins:maven-dependency-plugin:2.1: Plugin org.apache.maven.plugins:maven-dependency-plugin:2.1 or one of its dependencies could not be resolved: Failed to read artifact descriptor for org.apache.maven.plugins:maven-dependency-plugin:jar:2.1
    [WARNING] Failed to retrieve plugin descriptor for org.apache.maven.plugins:maven-release-plugin:2.0: Plugin org.apache.maven.plugins:maven-release-plugin:2.0 or one of its dependencies could not be resolved: Failed to read artifact descriptor for org.apache.maven.plugins:maven-release-plugin:jar:2.0
    [INFO] 
    [INFO] >>> tomcat-maven-plugin:1.1:run (default-cli) @ trade-web >>>
    [INFO] 
    [INFO] --- maven-resources-plugin:2.5:resources (default-resources) @ trade-web ---
    [debug] execute contextualize
    [WARNING] Using platform encoding (Cp1252 actually) to copy filtered resources, i.e. build is platform dependent!
    [INFO] Copying 1 resource
    [INFO] 
    [INFO] --- maven-compiler-plugin:2.3.2:compile (default-compile) @ trade-web ---
    [INFO] Nothing to compile - all classes are up to date
    [INFO] 
    [INFO] <<< tomcat-maven-plugin:1.1:run (default-cli) @ trade-web <<<
    [INFO] 
    [INFO] --- tomcat-maven-plugin:1.1:run (default-cli) @ trade-web ---
    [INFO] Running war on http://localhost:8080/trade-web
    [INFO] Using existing Tomcat server configuration at D:\MyWorkspaces\SecurityWS\trade-web\target\tomcat
    Mar 25, 2013 5:33:36 PM org.apache.catalina.startup.Embedded start
    INFO: Starting tomcat server
    Mar 25, 2013 5:33:36 PM org.apache.catalina.core.StandardEngine start
    INFO: Starting Servlet Engine: Apache Tomcat/6.0.29
    SLF4J: Class path contains multiple SLF4J bindings.
    SLF4J: Found binding in [jar:file:/D:/MyWorkspaces/SecurityWS/trade-web/src/main/webapp/WEB-INF/lib/slf4j-log4j12-1.5.10.jar!/org/slf4j/impl/StaticLoggerBinder.class]
    SLF4J: Found binding in [jar:file:/C:/Users/karthik_chellappan/.m2/repository/org/slf4j/slf4j-log4j12/1.5.10/slf4j-log4j12-1.5.10.jar!/org/slf4j/impl/StaticLoggerBinder.class]
    SLF4J: See http://www.slf4j.org/codes.html#multiple_bindings for an explanation.
    Mar 25, 2013 5:33:37 PM org.apache.catalina.core.ApplicationContext log
    INFO: Initializing Spring root WebApplicationContext
    INFO : org.springframework.web.context.ContextLoader - Root WebApplicationContext: initialization started
    INFO : org.springframework.web.context.support.XmlWebApplicationContext - Refreshing Root WebApplicationContext: startup date [Mon Mar 25 17:33:37 IST 2013]; root of context hierarchy
    INFO : org.springframework.beans.factory.xml.XmlBeanDefinitionReader - Loading XML bean definitions from ServletContext resource [/WEB-INF/applicationContextDirect.xml]
    INFO : org.springframework.beans.factory.xml.XmlBeanDefinitionReader - Loading XML bean definitions from ServletContext resource [/WEB-INF/applicationContext-security.xml]
    INFO : org.springframework.beans.factory.support.DefaultListableBeanFactory - Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@17820c3: defining beans [accountSummaryDelegate,accountSummaryServiceDelegate,accountSummaryServiceImpl,accountSummaryDAOImpl,basketOrdersDelegate,basketOrdersServiceDelegate,basketOrdersServiceImpl,basketOrdersDAOImpl,portfolioDelegate,portfolioServiceDelegate,portfolioServiceImpl,portfolioDAOImpl,orderPadDelegate,orderPadServiceDelegate,orderPadServiceImpl,orderPadDAOImpl,headerDelegate,headerServiceDelegate,headerServiceImpl,headerDAOImpl,footerDelegate,footerServiceDelegate,footerServiceImpl,footerDAOImpl,sessionFactory,org.springframework.aop.config.internalAutoProxyCreator,org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0,org.springframework.transaction.interceptor.TransactionInterceptor#0,org.springframework.transaction.config.internalTransactionAdvisor,transactionManager,dataSource,org.springframework.security.filterChains,org.springframework.security.filterChainProxy,org.springframework.security.web.PortMapperImpl#0,org.springframework.security.web.PortResolverImpl#0,org.springframework.security.config.authentication.AuthenticationManagerFactoryBean#0,org.springframework.security.authentication.ProviderManager#0,org.springframework.security.web.context.HttpSessionSecurityContextRepository#0,org.springframework.security.web.authentication.session.SessionFixationProtectionStrategy#0,org.springframework.security.web.savedrequest.HttpSessionRequestCache#0,org.springframework.security.web.access.expression.DefaultWebSecurityExpressionHandler#0,org.springframework.security.access.vote.AffirmativeBased#0,org.springframework.security.web.access.intercept.FilterSecurityInterceptor#0,org.springframework.security.web.access.DefaultWebInvocationPrivilegeEvaluator#0,org.springframework.security.authentication.AnonymousAuthenticationProvider#0,org.springframework.security.web.authentication.www.BasicAuthenticationEntryPoint#0,org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter#0,org.springframework.security.userDetailsServiceFactory,org.springframework.security.web.DefaultSecurityFilterChain#0,org.springframework.security.authentication.dao.DaoAuthenticationProvider#0,org.springframework.security.authentication.DefaultAuthenticationEventPublisher#0,org.springframework.security.authenticationManager,LoginUserDetailsService,loginDAOImpl]; root of factory hierarchy
    WARN : org.hibernate.mapping.RootClass - HHH000038: Composite-id class does not override equals(): com.inf.trade.core.entity.MarginRequirementsDO
    WARN : org.hibernate.mapping.RootClass - HHH000039: Composite-id class does not override hashCode(): com.inf.trade.core.entity.MarginRequirementsDO
    ERROR: org.hibernate.tool.hbm2ddl.SchemaUpdate - HHH000388: Unsuccessful: alter table PRDtradeDB.USER_AUTHENTICATION add access number(10,0)
    ERROR: org.hibernate.tool.hbm2ddl.SchemaUpdate - ORA-00904: : invalid identifier

    INFO : org.springframework.web.context.ContextLoader - Root WebApplicationContext: initialization completed in 6196 ms
    Mar 25, 2013 5:33:43 PM org.apache.catalina.core.ApplicationContext log
    INFO: Initializing Spring FrameworkServlet 'spring'
    INFO : org.springframework.web.servlet.DispatcherServlet - FrameworkServlet 'spring': initialization started
    INFO : org.springframework.web.context.support.XmlWebApplicationContext - Refreshing WebApplicationContext for namespace 'spring-servlet': startup date [Mon Mar 25 17:33:43 IST 2013]; parent: Root WebApplicationContext
    INFO : org.springframework.beans.factory.xml.XmlBeanDefinitionReader - Loading XML bean definitions from ServletContext resource [/WEB-INF/spring-servlet.xml]
    INFO : org.springframework.context.annotation.ClassPathBeanDefinitionScanner - JSR-330 'javax.inject.Named' annotation found and supported for component scanning
    INFO : org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor - JSR-330 'javax.inject.Inject' annotation found and supported for autowiring
    INFO : org.springframework.beans.factory.support.DefaultListableBeanFactory - Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@1feb2ea: defining beans [accountSummaryController,baseController,basketOrdersController,ordersController,portfolioController,org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,org.springframework.context.annotation.internalPersistenceAnnotationProcessor,tilesViewResolver,tilesConfigurer,org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter#0,jacksonObjectMapper,messageSource,org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor]; parent: org.springframework.beans.factory.support.DefaultListableBeanFactory@17820c3
    WARN : org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor - Autowired annotation should be used on methods with actual parameters: public com.inf.trade.client.delegate.footer.FooterDelegate com.inf.trade.client.controller.base.BaseController.getFooterDelegate()
    INFO : org.springframework.web.servlet.view.tiles2.TilesConfigurer - TilesConfigurer: adding definitions [/WEB-INF/tiles.xml]

    INFO : org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping - Mapped URL path [/logout] onto handler 'baseController'
    INFO : org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping - Mapped URL path [/logout.*] onto handler 'baseController'
    INFO : org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping - Mapped URL path [/logout/] onto handler 'baseController'
    INFO : org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping - Mapped URL path [/welcome] onto handler 'baseController'
    INFO : org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping - Mapped URL path [/welcome.*] onto handler 'baseController'
    INFO : org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping - Mapped URL path [/welcome/] onto handler 'baseController'
    INFO : org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping - Mapped URL path [/login] onto handler 'baseController'
    INFO : org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping - Mapped URL path [/login.*] onto handler 'baseController'
    INFO : org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping - Mapped URL path [/login/] onto handler 'baseController'
    INFO : org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping - Mapped URL path [/loginfailed] onto handler 'baseController'
    INFO : org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping - Mapped URL path [/loginfailed.*] onto handler 'baseController'
    INFO : org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping - Mapped URL path [/loginfailed/] onto handler 'baseController'
    INFO : org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping - Mapped URL path [/getQuote] onto handler 'baseController'
    INFO : org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping - Mapped URL path [/getQuote.*] onto handler 'baseController'
    INFO : org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping - Mapped URL path [/getQuote/] onto handler 'baseController'

    INFO : org.springframework.web.servlet.DispatcherServlet - FrameworkServlet 'spring': initialization completed in 693 ms
    Mar 25, 2013 5:33:44 PM org.apache.coyote.http11.Http11Protocol init
    INFO: Initializing Coyote HTTP/1.1 on http-8080
    Mar 25, 2013 5:33:44 PM org.apache.coyote.http11.Http11Protocol start
    INFO: Starting Coyote HTTP/1.1 on http-8080 
```

[更新] 我有 log4j 用于日志记录，SL4J 是使用 log4j 进行日志记录的接口。现在我得到了错误，理想情况下我根本不应该看到日志，而是看到信息和警告。

```
SLF4J: Failed to load class "org.slf4j.impl.StaticLoggerBinder".
SLF4J: Defaulting to no-operation (NOP) logger implementation
SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details. 
```

我想知道我是怎么看到这个的，这意味着尽管出现了 SL4J 错误，但 log4j 已启用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T09:10:30.940

我让它工作了。这是因为登录页面缺少“.html”。

```
<security:http auto-config="true" use-expressions="true">
    <security:intercept-url pattern="/welcome.html"
        access="hasRole('ROLE_USER')" />
    <security:form-login login-page="/login.html"
        default-target-url="/welcome.html" authentication-failure-url="/loginfailed.html" />
    <security:logout logout-success-url="/logout.html" />
</security:http> 
```

它期待 *.html 因为我在 web.xml 中给出了相同的

```
<servlet>
<servlet-name>spring</servlet-name>
<servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
<load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
<servlet-name>spring</servlet-name>
<url-pattern>*.html</url-pattern>
</servlet-mapping> 
```

@krisl - 感谢您的宝贵时间。

# delphi - 如何在 BCB XE 中执行此 Delphi 程序

> ID：15609363
> 
> 赞同：1
> 
> 时间：2013-03-25T07:01:27.703
> 
> 标签：delphi, c++builder

我需要直接从 SysUtils 标头使用 IncMonth 过程，但我不知道如何`SysUtils.IncMonth()`在 C++ Builder XE 中使用。

任何人都可以帮助我如何在 C++ Builder XE 中做到这一点？

提前致谢..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T07:53:49.117

如果您在两个函数之间遇到歧义，则需要指定要调用的函数的命名空间，以让编译器知道您正在调用哪个函数。在您的情况下，它将是：

```
SysUtils::IncMonth() 
```

在代码中，它可能如下所示：

```
void __fastcall TForm1::Button1Click(TObject *Sender)
{
    TDateTime TwoMonthsLater = SysUtils::IncMonth(Now(), 2);
    ShowMessage(DateToStr(TwoMonthsLater));
} 
```

每当您收到编译器错误或警告时，您都可以查看[`the reference`](http://docwiki.embarcadero.com/RADStudio/XE3/en/Compiler_Errors_And_Warnings_%28C++%29_Index)，其中几乎总是包含如何解决某个错误或警告的示例。

# javascript - 当我想使用 post(javascript) 方法重定向到操作时，控制器方法不会重定向并返回上一页，为什么？

> ID：15609367
> 
> 赞同：0
> 
> 时间：2013-03-25T07:01:49.637
> 
> 标签：javascript, asp.net-mvc

查看代码：

```
$.post('@Url.Action("SetPlayers", "Game")', { name : t }); 
```

控制器代码：

```
public class GameController : Controller
    {
            [HttpPost]
            public ActionResult SetPlayers(string name)
            {
                // some code...
                return RedirectToAction("Some Action");
            }
    } 
```

当我在方法 SetPlayers 上设置停止点时，方法收到变量并且所有工作但不重定向到操作。我怎样才能改变它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T07:11:47.567

`$.post()`向服务器发送 AJAX 请求。AJAX 的全部意义在于向您的服务器发送异步 HTTP 请求，而无需导航。如果要重定向，请不要使用 AJAX。您可以改用该`window.location.href`方法：

```
window.location.href = '@Url.Action("SetPlayers", "Game")?name=' + encodeURIComponent(t); 
```

或者，如果您只需要有条件地重定向，您可以从指向您要重定向的位置的控制器操作返回 JSON，然后在客户端上执行实际重定向：

```
[HttpPost]
public ActionResult SetPlayers(string name)
{
    // some code...
    return Json(new redirectTo = { Url.Action("Some Action") });
} 
```

接着：

```
$.post('@Url.Action("SetPlayers", "Game")', { name : t }, function(result) {
    if (result.redirectTo) {
        // the server returned The location to redirect to as JSON =>
        // let's redirect to this location
        window.location.href = result.redirectTo;
    }
}); 
```

# google-app-engine - 如何从 GAE NDB 中的 searchResults 对象中获取实体

> ID：15609369
> 
> 赞同：0
> 
> 时间：2013-03-25T07:01:53.093
> 
> 标签：google-app-engine, app-engine-ndb

我不确定我是否正在使用 NDB Search API，因为它应该被使用。我已经通读了文档，但我认为我要么缺少某些东西，要么缺乏我的 python 技能。任何人都可以确认/改进使用搜索的这种进展吗？

```
# build the query object
query_options = search.QueryOptions(limit=results_per_page, offset=number_to_offset)
query_object = search.Query(query_string=escaped_param, options=query_options)

# searchResults object
video_search_results = videos.INDEX.search(query_object)

# ScoredDocuments list
video_search_docs = video_search_results.results

# doc_ids
video_ids = [x.doc_id for x in video_search_docs]

# entities
video_entities = [Video.GetById(x) for x in video_ids] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T14:37:14.820

我个人可能会写这个更像：

```
# build the query object
query_options = search.QueryOptions(limit=results_per_page, offset=number_to_offset)
query_object = search.Query(query_string=escaped_param, options=query_options)

# do the search
video_search = search.Index(name=VIDEO_INDEX).search(query_object)

# list of matching video keys
video_keys = [ndb.Key(Video, x.doc_id) for x in video_search.results]

# get video entities
video_entities = ndb.get_multi(video_keys) 
```

使用[`ndb.get_multi`](https://developers.google.com/appengine/docs/python/ndb/functions)会更有效率。您可以使用[AppStats](https://developers.google.com/appengine/docs/python/tools/appstats)来验证这一点。如果您在 RPC 未完成时可以进行其他处理，您也可以查看异步等效项。

我不确定该`Video.GetById`方法实际上是什么，但我建议您查看[`Model.get_by_id`](https://developers.google.com/appengine/docs/python/ndb/modelclass#Model_get_by_id).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T09:31:59.487

您的代码似乎一切正常。有什么问题吗？

# javascript - XMLHttpRequest 无法加载 http://localhost:8081/sample.xml。Access-Control-Allow-Origin 不允许 Origin null。

> ID：15609371
> 
> 赞同：4
> 
> 时间：2013-03-25T07:01:58.337
> 
> 标签：javascript, iis

```
<!DOCTYPE html>
<html>
<head>
<script>
function loadXMLDoc(url)
{
var xmlhttp;
var txt,x,xx,i;
if (window.XMLHttpRequest)
{// code for IE7+, Firefox, Chrome, Opera, Safari
xmlhttp=new XMLHttpRequest();
}
else
{// code for IE6, IE5
xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
}
xmlhttp.onreadystatechange=function()
{
if (xmlhttp.readyState==4 && xmlhttp.status==200)
{
txt="<table border='1'><tr><th>Author</th><th>Title</th></tr>";
x=xmlhttp.responseXML.documentElement.getElementsByTagName("book");
for (i=0;i<x.length;i++)
  {
  txt=txt + "<tr>";     
  xx=x[i].getElementsByTagName("author");
    {
    try
      {
      txt=txt + "<td>" + xx[0].firstChild.nodeValue + "</td>";
      }
    catch (er)
      {
      txt=txt + "<td> </td>";
      }
    }
    xx=x[i].getElementsByTagName("title");
    {
    try
      {
      txt=txt + "<td>" + xx[0].firstChild.nodeValue + "</td>";
      }
    catch (er)
      {
      txt=txt + "<td> </td>";
      }
    }
  txt=txt + "</tr>";
  }
txt=txt + "</table>";
document.getElementById('txtCDInfo').innerHTML=txt;
 }
}
xmlhttp.open("GET",url,true);
xmlhttp.send();
}
</script>
</head>
<body>
<div id="txtCDInfo">
<button onclick="loadXMLDoc('http://localhost:8081/sample.xml')">GetDetails</button>
</div>
</body>
</html> 
```

我已经编写了上面的代码行来显示 xml 文件数据。它被部署在 iis 服务器中。每当我想访问 xml 文件时，它都会显示上面的错误。我在哪里做错了。我必须在 url 位置写什么用于获取 xml 文件。如果我只写像 sample.xml 这样的文件名。它显示像访问被拒绝这样的错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T07:05:14.817

这是因为[同源政策](http://en.wikipedia.org/wiki/Same_origin_policy)。您不能使用 ajax 调用外部站点。如果你真的想使用，你必须使用[JSONP](http://en.wikipedia.org/wiki/JSONP)。或者您可以为此使用服务器端代理。意思是，在服务器端调用外部站点并对那个 web 服务进行 ajax 调用。有关更多详细信息，请参阅我对以下问题的回答， [$.ajax 调用在 IE8 中运行良好，在 Firefox 和 chrome 浏览器中不起作用](https://stackoverflow.com/questions/8698682/ajax-call-working-fine-in-ie8-and-doesnt-work-in-firefox-and-chrome-browsers/8698786#8698786)

# php - 如何在 CodeIgniter 上通过 smtp 发送大量电子邮件而不会超时？

> ID：15609372
> 
> 赞同：1
> 
> 时间：2013-03-25T07:02:05.580
> 
> 标签：php, codeigniter, smtp

我试图通过我的 CodeIgniter 网站应用程序上的 SMTP 一次发送 1000 多封电子邮件，现在，我循环将其发送给每个收件人（相同的内容），但 PHP 脚本超时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T07:06:04.413

在脚本顶部添加：

```
set_time_limit(0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T08:28:10.157

如果您遇到超时问题，最好使用某种邮件队列功能。或者添加您自己的逻辑以使用 cron 作业在特定时间发送一定数量的电子邮件。看看邮件队列。

[http://pear.php.net/package/Mail_Queue/redirected](http://pear.php.net/package/Mail_Queue/redirected)

# actionscript-3 - adobe air 中按钮的键盘快捷键

> ID：15609381
> 
> 赞同：1
> 
> 时间：2013-03-25T07:02:49.433
> 
> 标签：actionscript-3, apache-flex, air, flex4, keyboard-shortcuts

我想为我的 Adob​​e Air 应用程序中的按钮实现键盘快捷键。

我在一个屏幕上有四个按钮。我想为他们分配`F9`, `F10`, `F11`,`F12`键。如何做到这一点？我搜索了很多，但还没有找到。

请给我建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T09:05:15.467

您需要捕获 F9、F10、F11、F12 的键码。为了快速，您可以从该站点获取密钥代码。

[http://livedocs.adobe.com/flex/3/html/help.html?content=events_11.html](http://livedocs.adobe.com/flex/3/html/help.html?content=events_11.html)

我将所有关键代码保存在一个常量文件中。我检查按下的按钮值是否等于 ko 键码。并发送了我的自定义事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T17:34:33.273

请参阅LiveDocs 中的[此页面](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/ui/Keyboard.html)。您想查看常量。

所以你会听`KeyboardEvent.KEY_DOWN`并做这样的事情：

```
function keyDownHandler( e:KeyboardEvent ):void {
    switch( e.charCode ) {
        case Keyboard.F9:
            // do something
            break;
        case Keyboard.F10:
            // do something
            break;
        case Keyboard.F11:
            // do something
            break;
    }
} 
```

# ios - 比较 iOS 中的两个频谱图

> ID：15609390
> 
> 赞同：5
> 
> 时间：2013-03-25T07:03:21.473
> 
> 标签：ios, objective-c, signal-processing, accelerate-framework, spectrogram

我正在使用苹果提供的示例代码 aurio touch 绘制频谱图。现在我想比较iOS中的两个频谱图，看看它们是否相同。是否可以使用 Accelerate 框架比较两个频谱图？

如果可能的话，有人知道如何比较两个频谱图吗？如果没有，是否有任何其他算法或库可以在 iOS 中用于比较频谱图？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-28T07:51:02.130

您正在寻找的是所谓的互相关。它不直接涉及频谱图，而是基于允许绘制频谱图的相同数学（傅立叶变换）。这里有一个 DSP 堆栈交换答案：[如何实现互相关来证明两个音频文件相似？](https://dsp.stackexchange.com/questions/736/how-do-i-implement-cross-correlation-to-prove-two-audio-files-are-similar)这涵盖了实现这一点的基础知识。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T06:01:21.230

该`Accelerate`框架只会帮助您处理矢量和矩阵算术、傅立叶变换等低级问题。您需要做的是弄清楚如何使用铅笔和纸（或者只是您的头，如果你是专业人士），然后借助框架在代码中实现它，例如`Accelerate`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T00:55:56.750

vDSP 具有执行互相关和卷积的所有构建块，这是您实现它所需要的。

[https://developer.apple.com/library/mac/#documentation/Accelerate/Reference/vDSPRef/Reference/reference.html](https://developer.apple.com/library/mac/#documentation/Accelerate/Reference/vDSPRef/Reference/reference.html)

# c# - 使用 C# 的 SQL 中的空格

> ID：15609393
> 
> 赞同：2
> 
> 时间：2013-03-25T07:03:29.740
> 
> 标签：c#, sql, whitespace

我有一个用 C# 编写的 Windows 应用程序，它连接到 SQL 数据库。

我的应用程序中有文本字段，并像这样更新数据库：

```
string name = textBox60.Text;

string sql = "insert into myTable(Name) values ('" + name + "')";
DbHelper.ExecuteNonquery(sql);

public static int ExecuteNonquery(string sql)
    {
        using (SqlConnection cn = new SqlConnection(constr))
        {
            if (cn.State == ConnectionState.Closed)
            {
                cn.Open();
            }
            else if (cn.State == ConnectionState.Open)
            {
                cn.Close();
                cn.Open();
            }
            else if (cn.State == ConnectionState.Broken)
            {
                cn.Close();
                cn.Open();
            }
            using (SqlCommand cm = new SqlCommand(sql, cn))
            {
                return cm.ExecuteNonQuery();
            }
        }
    } 
```

但是对于数据库中的每个类型`nchar`的数据，它们都充满了空格。例如，如果我在文本字段中填写**abc**，当我检查数据库时，它将变成`"abc___________________"`（空格）这样的东西。

除了仅在读取字符串时修剪字符串或在我有大量此类数据时使用`UPDATE`数据集之外，如何防止这种情况发生。`TRIM(data)`

感谢帮助。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-25T07:07:01.260

> 但是对于数据库中每个 nchar 类型的数据，它们都充满了空格。

是的，那是因为`nchar`类型是固定宽度类型。您基本上是在告诉数据库您希望该字段的每个值的长度为 20（或设置为任何值）。您应该改用`nvarchar`它，这是一个*可变*宽度字段。

您*还*应该避免编写这样的代码：

```
string sql = "insert into myTable(Name) values ('" + name + "')"; 
```

相反，您应该使用参数化 SQL，在 SQL 本身中放置一个占位符参数，然后在命令中设置参数的值。这将避免[SQL 注入攻击](http://bobby-tables.com)、数据转换问题，并使您的代码（SQL）与数据（参数）完全分离。这将意味着您需要更改您的辅助方法。（您的辅助方法一开始看起来很奇怪 - 当然，当您刚刚创建连接时，您只需要打开它...是您没有在每个连接对象上创建新连接对象时留下的代码吗？称呼？）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-25T07:05:56.387

因为您使用 a`char(n)`而不是 a声明了数据库表`varchar(n)`，所以它始终是固定长度，如果您提供较短的字符串，那么它将用空格填充。

如果您不想要空格，请将列声明为[`varchar(n)`](http://msdn.microsoft.com/en-gb/library/ms176089.aspx).

* * *

另外，我不确定你在使用连接之前所做的所有仪式是什么，但这似乎毫无意义。你刚刚打了电话`new SqlConnection(...)`。实际上，根据定义，这意味着`cn`它将被关闭 - 无需检查其状态。只需调用`Open()`它并继续创建您的命令。

* * *

（以上所有内容都基于被声明为的列`char(n)`。如果是，`nchar(n)`那么您应该切换到[`nvarchar(n)`](http://msdn.microsoft.com/en-gb/library/ms186939.aspx)）。

# javascript - 使用 JQuery 在 IE8 中调整图像的 SRC 字段会导致 Stack Overflow 错误

> ID：15609398
> 
> 赞同：1
> 
> 时间：2013-03-25T07:03:48.727
> 
> 标签：javascript, jquery, internet-explorer-8, stack-overflow

我需要向我的 Twitter Bootstrap 滑块添加延迟加载，我遇到了[这个](http://www.maurizioconventi.com/2012/06/12/how-to-create-a-lazy-load-carousel-with-twitter-bootstrap/)

它在所有浏览器中都可以正常工作，但是在本机 IE8 中，当滑块尝试将 src 属性更改为惰性 src 属性时，它会出现“第 0 行的堆栈溢出”。

我尝试过直接进行 Javascript getelementbyid 调整但无济于事，我尝试过已经定义了一个图像并只是更新它，但它仍然会发生。

有任何想法吗？

# ember.js - Ember.js 的 belongsTo 关系未定义，但填充了很多数组

> ID：15609401
> 
> 赞同：0
> 
> 时间：2013-03-25T07:04:02.643
> 
> 标签：ember.js, ember-data, tastypie

将 ember-data 与 Django REST 适配器一起使用。根据 setupController 挂钩中收到的模型的关系设置控制器内容时遇到问题

我放了断点，它们按以下顺序排列：

1.  ArtistRoute.model
2.  ArtistTrackRoute.model
3.  ArtistRoute.setupController
4.  ArtistTrackRoute.setupController

有关更多信息/问题，请参阅这些功能中的评论。

曲目的主要艺术家是 track -> belongsTo -> album -> belongsTo -> artist

艺术家：艺术家 -> hasMany -> 专辑

专辑专辑 -> belongsTo -> 艺术家专辑 -> hasMany -> 曲目

曲目 -> 属于 -> 专辑

我检查了我的 api 输出，资源链接肯定在那里。

这是我的模型：

```
App.Album = DS.Model.extend({
    'title' : DS.attr('string'),
    'slug' : DS.attr('string'),
    'year' : DS.attr('number'),
    'type' : DS.attr('string'),
    'image' : DS.attr('string'),
    'genre' : DS.attr('string'),
    'tracks' : DS.hasMany('App.Track'),
    'artist' : DS.belongsTo('App.Artist')
});

App.Track = DS.Model.extend({
    'title' : DS.attr('string'),
    'slug' : DS.attr('string'),
    'artists_titles' : DS.attr('string'),
    'artists_ids' : DS.attr('string'),
    'artists_slugs' : DS.attr('string'),
    'year' : DS.attr('number'),
    'genre' : DS.attr('string'),
    'label' : DS.belongsTo('App.Label'),
    'album' : DS.belongsTo('App.Album'),
    'creator' : DS.attr('number'),
    'created' : DS.attr('date'),
    'modified' : DS.attr('date'),
});

App.Artist = DS.Model.extend({
    'title' : DS.attr('string'),
    'image' : DS.attr('string'),
    'slug' : DS.attr('string'),
    'genre' : DS.attr('string'),
    'creator' : DS.attr('number'),
    'created' : DS.attr('date'),
    'modified' : DS.attr('date'),
    'absoluteUrl' : DS.attr('string'),
    'resourceUri' : DS.attr('string'),
    'albums' : DS.hasMany('App.Album'),
    'getImageURL' : function() {
        return (this.get('image')) ? '/static/img/' + this.get('image') + '.jpg' : false;
    }.property('image')
}); 
```

这是我的路线：

```
App.ArtistRoute = Ember.Route.extend({
    'model' : function(params) {
        // here first
        return App.Artist.find(params.artist_id);
    },
    'serialize' : function(model) {
        "use strict";
        return {
            'artist_id' : model.get('id'),
            'artist_slug' : model.get('slug')
        };
    },
    'setupController' : function(controller, artist) {
        // here third...
        // I inspected artist._data
        // artist._data.hasMany.albums = [1]
        this.controllerFor('artist').set('content', artist);
    }
});

App.ArtistTrackRoute = Ember.Route.extend({
   'model' : function(params) {
        // here second
       return App.Track.find(params.track_id);
   },
   'serialize' : function(model) {
       "use strict";
       return {
           'track_id' : model.get('id'),
           'track_slug' : model.get('slug')
       }
   },
   'setupController' : function(controller, track) {
        // here fourth... I inspected the track data object
        // track._data.belongsTo.album == undefined

        // what I'm trying to achieve here is to set the album
        // controller based on the belongsTo relationship
        // this.controllerFor('album').set('content', track.get('album'))
       this.controllerFor('track').set('content', track);

   }
}); 
```

此外，在 ArtistAlbumRoute.setupController 中设置断点时，我注意到 album._data.hasMany.tracks == [1] 但 album._data.belongsTo.artist == undefined.... wtf?!?!?!

我仍然很难理解 Ember，因此非常感谢任何额外的建议。谢谢！

此外，在页面加载并打开控制台后，我将输入什么来访问控制器以查看设置了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T07:24:12.917

原来这一切都与我的 Tastypie 资源设置有关......

[https://github.com/escalant3/ember-data-tastypie-adapter/issues/18](https://github.com/escalant3/ember-data-tastypie-adapter/issues/18)

我的 TrackResource 看起来像这样：

```
class TrackResource(ModelResource):

    album = fields.ToOneField('samped.api.resources.AlbumResource', 'album')

    class Meta:
        queryset = Track.objects.all() 
```

我所要做的就是在相册中添加“_id”

```
class TrackResource(ModelResource):

    album_id = fields.ToOneField('samped.api.resources.AlbumResource', 'album')

    class Meta:
        queryset = Track.objects.all() 
```

然后我能够做到：

```
App.ArtistTrackRoute = Ember.Route.extend({
   'model' : function(params) {
       return App.Track.find(params.track_id);
   },
   'serialize' : function(model) {
       "use strict";
       return {
           'track_id' : model.get('id'),
           'track_slug' : model.get('slug')
       }
   },
   'setupController' : function(controller, track) {
       this.controllerFor('track').set('content', track);
       this.controllerFor('album').set('content', track.get('album'))
   }
}); 
```

# javascript - window.open 在 Android 平板上显示时不获取宽度和高度

> ID：15609402
> 
> 赞同：0
> 
> 时间：2013-03-25T07:04:03.687
> 
> 标签：javascript, android

我正在使用 JavaScript 应用程序在 android 设备上运行。在我拥有的 JavaScript 中`window.open(xx.txt)`。我可以在安卓设备上打开文件。但宽度和高度总是最大。在桌面上它显示一个“关闭”按钮。但是当我在 android 设备（平板电脑）上运行时，它不显示关闭按钮。我必须依靠后退键按钮。我明确指定了高度和宽度，但仍然没有效果。

如果我在这里遗漏了什么，请告诉我。我想知道我们如何使用 window.open 函数在 Android 平板电脑/手机上打开文件。它需要显示关闭按钮以供用户关闭文件并返回 html 页面。

代码片段：html页面：

```
 <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /> 
    <meta name="viewport" content="target-densitydpi=device-dpi" />
    <meta name="viewport" content="width=device-width" />
    <meta name="viewport" content="initial-scale=1.0" />
    <meta name="viewport" content="minimum-scale=1.0" />
    <meta name="viewport" content="maximum-scale=1.0" />
    <meta name="viewport" content="user-scalable=0" /> 
```

在显示 html 页面时。它从 android SD 卡上的本地目录中获取 log-error.txt（文本文件）。

在我的 javascript 页面中

```
 new_myText.innerHTML="Me: <a href='#' onclick=displayWindow('"+imagePath+"')>"+imagePath+"</a>";

function displayWindow(imagePath)
{
    alert(imagePath);
    var windowSize = "width= 100 ,height= 100 ,scrollbars='yes'";
    window.open(imagePath,'popup', windowSize); 
} 
```

# sql - SQL 查询的改进 - Access - Join / IN / Exists

> ID：15609403
> 
> 赞同：0
> 
> 时间：2013-03-25T07:04:07.170
> 
> 标签：sql, ms-access

这是我的 SQL 查询 - 在 Access 中使用。它提供了预期的结果。但只是想知道该方法是否正确。这怎么可能加快速度。

```
 SELECT INVDETAILS2.F5
           , INVDETAILS2.F16
           , ExpectedResult.DLID
           , ExpectedResult.NumRows
    FROM INVDETAILS2
   INNER
    JOIN (INVDL INNER JOIN ExpectedResult ON INVDL.DLID =ExpectedResult.DLID)
               ON (INVDETAILS2.F14 = ROUND(ExpectedResult.Total))
               AND (INVDETAILS2.F1 = INVDL.RegionCode)
    WHERE INVDETAILS2.F29 ='2013-03-06'
      AND INVDETAILS2.F5 IN (SELECT INVDETAILS2.F5 
                               FROM (ExpectedResult
                                      INNER JOIN INVDL
                                      ON ExpectedResult.DLID = INVDL.DLID)
                         INNER JOIN INVDETAILS2
                                    ON INVDL.RegionCode = INVDETAILS2.F1
                                    AND round(ExpectedResult.Total)
                                        = INVDETAILS2.F14
                              WHERE INVDETAILS2.F29='2013-03-06'
                              GROUP BY INVDETAILS2.F5 
                              HAVING Count(ExpectedResult.DLID)<2
                            )
    ; 
```

“ExpectedResult”中的大约行数 - 百万“INVDL” - 80,000 “INVDETAILS” - 300,000 - 总计，对于一个日期 - 大约 - 10,000，然后每个日期的每个区域再次减少。

如果可能，请提供更好的查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T12:47:59.997

您可以调查两件事可能有助于加快速度：

**索引**

确保您已索引 JOIN、WHERE 子句和 GROUP BY 子句中涉及的所有列。

**JOIN 涉及函数的表达式**

您的一些 JOIN 使用`Round(ExpectedResult.Total)`，因此如果您`ExpectedResult.Total`的查询中有索引，则将无法使用它。如果您添加一`RoundedTotal`列（长整数，索引），您可能会获得性能提升，填充它

```
UPDATE [ExpectedResult] SET [RoundedTotal]=Round([Total]) 
```

然后`RoundedTotal`在您的 JOIN 中使用该列。

# activex - activex z-index

> ID：15609409
> 
> 赞同：0
> 
> 时间：2013-03-25T07:04:36.577
> 
> 标签：activex

我在网页上显示 2 个 activex。一个显示来自摄像机的流式传输，另一个显示 .avi 文件。

我想将一个显示在另一个之上。但没有成功。始终在其上方显示 .avi 的那个显示来自摄像机的流式传输。

我为每个 activex 使用一个 iframe。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T22:56:17.153

只需将您不想显示的大小调整为 1px x 1px 以“隐藏”它，它应该没问题。

# java - Jdbc 中的类加载错误

> ID：15609411
> 
> 赞同：0
> 
> 时间：2013-03-25T07:04:45.907
> 
> 标签：java, mysql, database, jdbc, database-connection

当我尝试运行时，我刚刚创建了一个 Class Jdbc，显示错误。

```
Exception in thread "main" java.lang.NoClassDefFoundError: Jdbc 
```

这是代码

```
import java.sql.*;
public class Jdbc {
    public static void main(String [] args)
    {
        try{
        Class.forName("com.mysql.jdbc.Driver").newInstance();
        Connection con=DriverManager.getConnection("jdbc:mysql://localhost:3306/ims","","");
        Statement st=con.createStatement();
        DatabaseMetaData meta=con.getMetaData();
        ResultSet r=meta.getTables(null,null,"%",null);
        String tableNames="";
        while(r.next()){
        tableNames=r.getString(3);
        System.out.println(tableNames);
        }
        }catch (Exception e){}}} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T07:10:23.870

2个快速修复将是

1）将类路径传递给执行`java -classpath mysql.jar`

看

[JAVA 类路径传递文件作为命令行参数](https://stackoverflow.com/questions/12709796/java-classpath-pass-file-as-command-line-argument)

2) 将[mysql jar](http://dev.mysql.com/downloads/connector/j/)放在您的 JRE`ext`目录中。[详情](http://docs.oracle.com/javase/tutorial/ext/basics/install.html)。

由于您使用的是默认包，因此您可能希望将您的课程放在一个包中。诸如[Eclipse](http://www.eclipse.org/juno/)之类的 IDE也可以为您提供方便。您没有告诉我们您的执行环境或构建路径，您的结果可能取决于您是从命令行、可运行 jar 还是从 IDE 运行程序。

我使用 Eclipse Juno IDE，所以我不需要担心设置我的类路径。对于 Ubuntu 和 MS-Windows，Eclipse IDE 是您可能想要使用的开发环境。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T07:12:59.423

问题不在于mysql jar，而是您自己的类“Jdbc”不在类路径中，请将其添加到类路径中。

如果您从控制台运行添加 .; 到类路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T07:13:59.667

!. 确保 jar 在您的类路径中
2\. 如果没有，请从[此处下载](http://dev.mysql.com/downloads/connector/j/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T07:08:23.203

它很可能是你的程序找不到类
将mysql jdbc驱动程序`mysql-connector-java-5.x.x.jar`放入`classpath`然后检查。

# android - 如何为不同的制造商开发定制的相机应用程序

> ID：15609412
> 
> 赞同：0
> 
> 时间：2013-03-25T07:05:06.303
> 
> 标签：android

我正在开发自定义相机应用程序。我设置了android清单文件屏幕模式纵向。它在 HTC 和其他设备上运行良好，但在三星手机上，出现方向问题。如何为所有设备开发自定义相机..

> 摄像头模组

```
public class Cameramodule extends Activity  {

Camerapriview preview;
FrameLayout cameraframe;
Button b,camswitch;
ImageButton camera_settings,Take_picture;

public static int second_select=0;
 Animation animation;

int orienation;

SensorManager sensorManager;

ImageButton flash,camera_switching;

RelativeLayout second_overlay;
int flag=1;

public static int cam_switch_flag=1;

Button one,two,five,eight,ten,infinity;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_cameramodule);

    one=(Button) findViewById(R.id.one);
    two=(Button) findViewById(R.id.two);
    five=(Button) findViewById(R.id.five);
    eight=(Button) findViewById(R.id.eight);
    ten=(Button) findViewById(R.id.ten);
    infinity=(Button) findViewById(R.id.infinity);

    one.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            second_select=1;
            second_overlay.setVisibility(View.GONE);

        }
    });

    two.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            second_select=2;
            second_overlay.setVisibility(View.GONE);

        }
    });

    five.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            second_select=5;
            second_overlay.setVisibility(View.GONE);

        }
    });

    eight.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            second_select=8;
            second_overlay.setVisibility(View.GONE);

        }
    });

    ten.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            second_select=10;
            second_overlay.setVisibility(View.GONE);

        }
    });

    infinity.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            second_overlay.setVisibility(View.GONE);

            second_select=0;//zero means infinity;

        }
    });

    preview=new Camerapriview(this,Cameramodule.this);

    second_overlay=(RelativeLayout) findViewById(R.id.second_overlay);
    second_overlay.setVisibility(View.GONE);

    //sensorManager = (SensorManager)getSystemService(SENSOR_SERVICE);

    cameraframe=(FrameLayout) findViewById(R.id.mframe);
    camera_settings=(ImageButton) findViewById(R.id.camera_settings);
    Take_picture=(ImageButton) findViewById(R.id.taje_picture);

    camera_switching=(ImageButton) findViewById(R.id.camera_switch);

    orienation=getResources().getConfiguration().orientation;

    cameraframe.addView(preview);

    WindowManager wm = (WindowManager) getSystemService(Context.WINDOW_SERVICE);

    Display display = getWindowManager().getDefaultDisplay(); 
    int width = display.getWidth();  // deprecated
    int height = display.getHeight();

    //create dialog box..

    /*
     * 
     * Camera record setting options
     */

    Take_picture.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            preview.camera.takePicture(null, new Rwacallbackhandler(getApplicationContext()), new Photohandler(getApplicationContext()));

        }
    });

    /*
     * Switch the front and back camera...
     */
    camera_switching.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

             preview.callswitch(Cameramodule.this);

             if(cam_switch_flag==1)
             {
             cam_switch_flag=2;
             }
             else if (cam_switch_flag==2) {
                 cam_switch_flag=1;

            }

        }
    });

    //create flash option

    camera_settings.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub

            if(flag==1)
            {
            second_overlay.setVisibility(View.VISIBLE);
            startAnimationPopOut();

            flag=2;
            }
            else if(flag==2)
            {
                second_overlay.setVisibility(View.GONE);
                //startAnimationPopOut();
                flag=1;

            }

        }
    });

}

private void startAnimationPopOut() {         

     animation = AnimationUtils.loadAnimation(this,R.anim.layout_animation);

    animation.setAnimationListener(new AnimationListener() {                  
        @Override
        public void onAnimationStart(Animation animation) {

        }

        @Override
        public void onAnimationRepeat(Animation animation) {

        }

        @Override
        public void onAnimationEnd(Animation animation) {

        }
    });

   second_overlay.clearAnimation();
   second_overlay.startAnimation(animation);

} 
```

}

> 相机专享

```
public class Camerapriview extends SurfaceView implements SurfaceHolder.Callback {

public static Activity mactivity;
SurfaceHolder holder;
public Camera camera;
List<String> coloreffect;
public Context mcoContext;
int currentCameraId=Camera.CameraInfo.CAMERA_FACING_BACK;

int cameraId=Camera.CameraInfo.CAMERA_FACING_BACK;

public Camerapriview(Context context, Cameramodule cameramodule) {
    super(context);
    // TODO Auto-generated constructor stub
    mcoContext=context;
    mactivity=cameramodule;

    holder=getHolder();
    holder.addCallback(this);
    holder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);

}

@Override
public void surfaceChanged(SurfaceHolder holder, int format, int width,
        int height) {
    // TODO Auto-generated method stub

    //setCameraDisplayOrientation(mactivity, cameraId, camera);
    camera.setDisplayOrientation(90);
    camera.startPreview();

}

@Override
public void surfaceCreated(SurfaceHolder holder) {
    // TODO Auto-generated method stub

    camera=Camera.open(cameraId);

    Camera.Parameters param=camera.getParameters();
    param.setFlashMode(Camera.Parameters.FLASH_MODE_AUTO);
    camera.setParameters(param);

    holder.setFixedSize(mactivity.getWindow().getWindowManager()
            .getDefaultDisplay().getWidth(),mactivity.getWindow().getWindowManager()
            .getDefaultDisplay().getHeight());

    try
    {
        camera.setPreviewDisplay(this.holder);

    }

    catch (Exception e) {
        // TODO: handle exception
    }

}

@Override
public void surfaceDestroyed(SurfaceHolder holder) {
    // TODO Auto-generated method stub
    //preview.this.getHolder().removeCallback(this);

            camera.setPreviewCallback(null);
            camera.stopPreview();

            camera.release();
            holder = null;
            camera = null;

}

//Set the orientation of the camera.....

    public  void setCameraDisplayOrientation(Activity activity,
             int cameraId, android.hardware.Camera camera) 
    {

        camera.stopPreview();
         android.hardware.Camera.CameraInfo info =
                 new android.hardware.Camera.CameraInfo();
         android.hardware.Camera.getCameraInfo(cameraId, info);
         int rotation = activity.getWindowManager().getDefaultDisplay()
                 .getRotation();
         int degrees = 0;
         switch (rotation) {
             case Surface.ROTATION_0: degrees = 0;
             Toast.makeText(mcoContext,"degree zero", 1000).show();
                                        break;
             case Surface.ROTATION_90: degrees = 90;

             Toast.makeText(mcoContext,"degree 90", 1000).show();

                                        break;
             case Surface.ROTATION_180: degrees = 180;
             Toast.makeText(mcoContext,"degree 180", 1000).show();

                                        break;
             case Surface.ROTATION_270: degrees = 270;
             Toast.makeText(mcoContext,"degree 270", 1000).show();

                                        break;
         }

         int result;
         if (info.facing == Camera.CameraInfo.CAMERA_FACING_FRONT) {
             result = (info.orientation + degrees) % 360;
             result = (360 - result) % 360;  // compensate the mirror
         } else {  // back-facing
             result = (info.orientation - degrees + 360) % 360;
         }

         camera.setDisplayOrientation(result);

     }

    public void callswitch(Cameramodule cameramodule)  {
        // TODO Auto-generated method stub
        try
        {

        Activity myactivity=cameramodule;

         camera.release();

            //swap the id of the camera to be used
            if(currentCameraId == Camera.CameraInfo.CAMERA_FACING_BACK){
                currentCameraId = Camera.CameraInfo.CAMERA_FACING_FRONT;
            }
            else {
                currentCameraId = Camera.CameraInfo.CAMERA_FACING_BACK;
            }
            camera = Camera.open(currentCameraId);
            //Code snippet for this method from somewhere on android developers, i forget where

            setCameraDisplayOrientation(myactivity, currentCameraId, camera);

            try {
                //this step is critical or preview on new camera will no know where to render to
                camera.setPreviewDisplay(holder);
            } catch (IOException e) {
                e.printStackTrace();
            }
            camera.startPreview();
        }
        catch (Exception e) {
            // TODO: handle exception
            Toast.makeText(mcoContext, e.getMessage().toString(), 1000).show();
        }

    }

    //set the flash modes...

    public void setflash() {
        // TODO Auto-generated method stub

        Toast.makeText(mcoContext, "Inside set", 1000).show();
        Log.i("flash", "My flash");

        Camera.Parameters param=camera.getParameters();

        List<String> flash=param.getSupportedFlashModes();

        if(camera.getParameters().getFlashMode()==Camera.Parameters.FLASH_MODE_AUTO)
        {
            if(flash.contains(Camera.Parameters.FLASH_MODE_ON))
                param.setFlashMode(Camera.Parameters.FLASH_MODE_AUTO);

        }

            else
            {
                if(flash.contains(Camera.Parameters.FLASH_MODE_ON))
                param.setFlashMode(Camera.Parameters.FLASH_MODE_ON);

            }

        camera.setParameters(param);
        }

    } 
```

> 我有方向问题。我想将屏幕设置为始终纵向模式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T07:27:27.067

您是否遇到异常，还是忽略了您的 setDisplayOrientation() 调用或其他？尝试确保纵向支持您的宽度/高度。我曾经在设置纵向模式时遇到过类似的问题，在你的 surfaceChanged 中，尝试：

```
 final Camera.Parameters parameters = this.mCamera.getParameters();
 List<Camera.Size> previewSizes = parameters.getSupportedPreviewSizes(); 
 Camera.Size cs = previewSizes.get(0);

 mCamera.setDisplayOrientation(90);
 parameters.setPreviewSize(cs.width,cs.height);
 this.mCamera.setParameters(parameters);

 this.mCamera.startPreview(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T07:17:12.733

三星 Android 开发者网站上似乎有一些帮助，他们在其中概述[了 Android 中的常见问题](http://developer.samsung.com/android/technical-docs/Common-Issues-in-Android)。你有很多代码供我查看，但我看到了这一部分：

> 问题：预览显示方向错误。

并认为此页面可能对您有所帮助。

# sass - SASS 混合选择器

> ID：15609413
> 
> 赞同：1
> 
> 时间：2013-03-25T07:05:08.063
> 
> 标签：sass, mixins

有没有办法在 Sass 规则中选择 mixins。

可用于递归嵌套类。说我要提取：

```
.my_class
    margin-top: 1px
    &+.m y_class
        margin-top: 0 
```

进入

```
@mixin my_mixin
    margin-top: 1px;
    &+@any_class(my_mixin)
        margin-top: 0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T17:07:32.613

这对你想做的事情有用吗？

萨斯：

```
@mixin my_mixin
  margin-top: 1px
  & + &
    margin-top: 0

h1
  @include my_mixin 
```

生成的 CSS：

```
h1 {
  margin-top: 1px;
}
h1 + h1 {
  margin-top: 0;
} 
```

# c++ - 通过 ShellExecuteEx 函数启动时，Install-Shield 窗口没有出现在顶部

> ID：15609422
> 
> 赞同：0
> 
> 时间：2013-03-25T07:05:37.583
> 
> 标签：c++, windows, visual-c++, installshield, shellexecuteex

我正在尝试使用以下代码启动通过 install-shield 制作的 setup.exe

```
DWORD ChildProcess(LPCSTR exePath, LPCSTR lpCmdLine ,BOOL showDialog, char* workingDir, BOOL bParentWait )
{
    CWnd * handle = AfxGetMainWnd (); //handle to the main dialog box of mfc application
    DWORD dwExitCode = -1;
    SHELLEXECUTEINFO ShExecInfo = {0};
    ShExecInfo.cbSize = sizeof(SHELLEXECUTEINFO);
    ShExecInfo.fMask = SEE_MASK_NOCLOSEPROCESS;
    ShExecInfo.lpVerb = "open";
    ShExecInfo.lpFile = exePath; //setup.exe path, installer exe

    if(bParentWait)
    {
        ShExecInfo.lpParameters =   lpCmdLine;
        ShExecInfo.nShow = SW_MINIMIZE;
    }
    else
    {
        ShExecInfo.nShow = SW_SHOW;
        ShExecInfo.lpParameters =   NULL;
    }
    ShExecInfo.lpDirectory = workingDir;

    ShExecInfo.hInstApp = NULL; 
    if (ShellExecuteEx(&ShExecInfo))
    {
        if(bParentWait)
        {

            handle->ShowWindow(SW_MINIMIZE);
            WaitForSingleObject(ShExecInfo.hProcess,INFINITE);  
            if(showDialog){
                handle->ShowWindow(SW_RESTORE);
            }
            GetExitCodeProcess(ShExecInfo.hProcess, &dwExitCode);

        }
        else
        {
            CloseHandle(ShExecInfo.hProcess);
            dwExitCode = 0;
        }
    }

    return dwExitCode;
} 
```

问题是启动的安装程序窗口没有出现在顶部。任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T08:59:48.540

我相信您遇到的问题是因为`setup.exe`产生了另一个执行 UI 序列的进程（因此显示了窗口）。

# android - 使用 Canvas Android 在填充的矩形内绘制文本

> ID：15609426
> 
> 赞同：5
> 
> 时间：2013-03-25T07:05:58.617
> 
> 标签：android, canvas, view, drawing

如何使用 Canvas Android 绘制具有指定边界的填充矩形并在该矩形文本内绘制？我试过了

```
mPaint.setColor(Color.GREEN);
canvas.drawText(mText, x, y, mPaint);
mPaint.setColor(Color.BLACK);
canvas.drawRect(x, y, x + w, y + h, mPaint); 
```

但文本不在该矩形内。有没有朋友可以告诉我如何在考虑到文本大小的情况下绘制一个围绕指定文本的矩形？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-25T07:25:24.413

在这里，我硬编码了 x 和 y 值。你可以改变它们

```
 mpaint= new Paint();
        mpaint.setColor(Color.RED);
        mpaint.setStyle(Style.FILL);
        paint2= new Paint();
        paint2.setColor(Color.GREEN);
        paint2.setTextSize(50);  //set text size
        float w = paint2.measureText(s)/2;
        float textSize = paint2.getTextSize();

        @Override
        protected void onDraw(Canvas canvas) {
            paint2.setTextAlign(Paint.Align.CENTER);
            canvas.drawRect(300-w, 300 - textsize, 300 + w, 300, mpaint);
            canvas.drawText(s, 300, 300 ,paint2); //x=300,y=300    
        } 
```

编辑 ：

`measureText`打电话来是个坏主意`onDraw`。您可以在`onDraw`.

还有一个关于性能的视频，以及为什么你应该避免在`onDraw`. [https://www.youtube.com/watch?v=HAK5acHQ53E](https://www.youtube.com/watch?v=HAK5acHQ53E)

结果快照

![在此处输入图像描述](../Images/9724873a00f0beb48625019713b42a92.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-10-24T14:23:12.427

如果您必须将文本直接居中，则可以使用此代码

```
 mpaint= new Paint();
    mpaint.setColor(Color.RED);
    mpaint.setStyle(Style.FILL);
    paint2= new Paint();
    paint2.setColor(Color.GREEN);
    paint2.setTextSize(50);  //set text size
    float w = paint2.measureText(s)/2;
    float textSize = paint2.getTextSize();

    @Override
    protected void onDraw(Canvas canvas) {
        paint2.setTextAlign(Paint.Align.CENTER);
        Rect rect = new Rect(300-w, 300 - textsize, 300 + w, 300);
        canvas.drawRect(rect, mpaint);
        canvas.drawText(s, rect.centerX(), rect.centerY() ,paint2); // center text inside rect
    } 
```

[![在此处输入图像描述](../Images/45f494ef97a21a9b9e93c71e12272869.png)](https://i.stack.imgur.com/hGviv.png)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-11-17T02:10:46.130

对于这个特定的查询，这可能已经很晚了，但我认为很多人会发现这个答案很有用。因此，任何 CustomView 的 Canvas 的问题在于，您可以获取特定文本的宽度，但获取文本的高度并不容易。此外，如果您使用`canvas.drawText(....)`简单的**Paint**对象，则不能绘制多行文本。`onDraw()`因此，请在您的方法中使用以下代码。

```
String displayText = "Hello World";
int mainTextPositionX = getWidth() / 2 ;
int mainTextPositionY = getHeight() / 2;

StaticLayout textStaticLayout;
TextPaint textPaint;
textPaint = new TextPaint();
textPaint.setTextAlign(Paint.Align.CENTER);
textPaint.setColor(Color.BLUE);
textPaint.setAntiAlias(true);
textPaint.setTextSize(convertDpToPixel(30, context));
textPaint.setTextAlign(Paint.Align.CENTER);
highlightedRectPaint = new Paint();

highlightedRectPaint.setStrokeWidth(12);
highlightedRectPaint.setStyle(Paint.Style.STROKE);
highlightedRectPaint.setColor(Color.RED);
highlightedRectPaint.setAntiAlias(true);

if(android.os.Build.VERSION.SDK_INT >= android.os.Build.VERSION_CODES.M) {
        textStaticLayout = StaticLayout
                .Builder
                .obtain(displayText, 0, displayText.length(), textPaint, (int) textPaint.measureText(displayText))
                .build();
    }else{
        textStaticLayout = new StaticLayout(
                displayText, textPaint, (int)textPaint.measureText(displayText), Layout.Alignment.ALIGN_CENTER, 1.0f, 0.0f, false);
    }

    Rect highlightedTextBorderRect = new Rect();
    highlightedTextBorderRect.top = mainTextPositionY-20;
    highlightedTextBorderRect.left = mainTextPositionX- 
    ((int)textPaint.measureText(displayText)/2)-20;
    highlightedTextBorderRect.right = mainTextPositionX+ 
    ((int)textPaint.measureText(displayText)/2) + 20;
    highlightedTextBorderRect.bottom = mainTextPositionY+ 
    (int)textStaticLayout.getHeight()+20;

    canvas.save();
    canvas.translate(mainTextPositionX, mainTextPositionY);
    textStaticLayout.draw(canvas);
    canvas.restore();

    canvas.drawRect(highlightedTextBorderRect,highlightedRectPaint); 
```

只要确保，您在`draw()`方法之外声明所有对象和变量。这将在文本周围绘制一个矩形轮廓，支持多行。如果您希望矩形具有填充，则只需使用**highlightRectPaint**并更改`setStyle(Paint.Style.FILL)`. 希望有帮助。

# php - 将记录从一个表复制到另一个表+添加自己的记录

> ID：15609434
> 
> 赞同：0
> 
> 时间：2013-03-25T07:06:22.010
> 
> 标签：php, sql

我有一个表名用户和一个表名应用程序。

我想在用户表的 3 列（id、密码、权限）中插入 3 个数据。

如何从应用程序表（电子邮件地址，密码）中提取 2 个数据，然后在用户表的权限列中添加自己的数据。

对不起，如果这令人困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T07:11:03.213

您可以使用以下查询：

```
INSERT INTO `Users` (id, password, privilege) 
SELECT email_address, password, 'privileges' FROM `Application` 
```

where`privileges`代表用户权限

# jquery - jquery使用after函数将数据添加到asp.net表

> ID：15609437
> 
> 赞同：1
> 
> 时间：2013-03-25T07:06:25.777
> 
> 标签：jquery, asp.net, ajax

我将在我的 ASP.NET Web 应用程序中实现 JQuery 无限滚动，我使用以下 jquery funcyion（取自[http://code.msdn.microsoft.com/CSASPNETInfiniteLoading-16f5bdb8](http://code.msdn.microsoft.com/CSASPNETInfiniteLoading-16f5bdb8)）：

```
$(document).ready(function () {

       function lastPostFunc() {
           $('#divPostsLoader').html('<img src="images/bigLoader.gif">');

           //send a query to server side to present new content
           $.ajax({
               type: "POST",
               url: "Default.aspx/Foo",
               data: "{}",
               contentType: "application/json; charset=utf-8",
               dataType: "json",
               success: function (data) {

                   if (data != "") {
                       $('.divLoadData:last').after(data.d);
                   }
                   $('#divPostsLoader').empty();
               }

           })
       }; 
```

divLoadData 是一个将接收数据（HTML 格式）的 div，但我想将数据附加到 asp.net 表中，如何附加数据？我应该使用后功能？另外我应该如何生成我的 HTML 以附加到这个服务器端表格控件，当前数据是使用以下代码创建的（在 webmethod 函数中）：

```
 foreach (DataRowView myDataRow in dv)
            {
                getPostsText.AppendFormat("<p>author: {0}</br>", myDataRow["author"]);
                getPostsText.AppendFormat("genre: {0}</br>", myDataRow["genre"]);
                getPostsText.AppendFormat("price: {0}</br>", myDataRow["price"]);
                getPostsText.AppendFormat("publish date: {0}</br>", myDataRow["publish_date"]);
                getPostsText.AppendFormat("description: {0}</br></p>", myDataRow["description"]);
            }
            getPostsText.AppendFormat("<div style='height:15px;'></div>"); 
```

最后`getPostsText`被发送到 JQuery

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T07:21:43.247

您可以使用 jQuery 中的 .after() 函数在另一个元素之后附加一些内容。

所以而不是

```
$("servers").append( ... ); 
```

你会用

```
$("#" + id + ).closest( "tr" ).after( ... ); 
```

或者你也可以使用

```
$( ... ).insertAfter( $("#" + id ).closest( "tr" ) ); 
```

这本质上是等价的。

有关详细信息，请参阅[http://api.jquery.com/after/](http://api.jquery.com/after/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T07:31:05.983

您必须将功能移出`doc ready`：

```
function lastPostFunc() {
       $('#divPostsLoader').html('<img src="images/bigLoader.gif">');
       $.ajax({
           type: "POST",
           url: "Default.aspx/Foo",
           data: {},
           contentType: "application/json",
           dataType: "json",
           success: function (data) {
               if (data != "") {
                   $('#divDynamicData').append(data.d);
               }
               $('#divPostsLoader').empty();
           }
       });
   }

$(document).ready(function () {
  $(window).scroll(function(){
     if ($(window).scrollTop() == $(document).scrollHeight - $(window).height()) {
         lastPostFunc();
     }
  });
}); 
```

# .net - 如何在 .NET 中绘制带有尾随空格的多行字符串

> ID：15609438
> 
> 赞同：0
> 
> 时间：2013-03-25T07:06:26.853
> 
> 标签：.net, system.drawing

我正在使用`Graphics.DrawString`并希望包含尾随空格来绘制字符串，所以我使用 `StringFormatFlags.MeasureTrailingSpaces`. 对于单行字符串，这很好用，但我注意到换行符也会导致行尾出现空白。这不是我想要的（我想知道谁会）。

所以我想实现一个`MyDrawString`创建以下输出的方法。`|`是右对齐绘制操作的 x 坐标。该实现也应该适用于居中的字符串。

```
MyDrawString("Test")              ->       Test|

MyDrawString("Test   ")           ->    Test   |

MyDrawString("Test\r\nLine 2   ") ->       Test|
                                      Line 2   | 
```

不幸的是，最后一次调用的输出看起来更像

```
 Test  |
                                      Line 2   | 
```

有没有办法在不分解字符串并逐行绘制的情况下实现我想要的？

如果不是，那么在单个`DrawString`调用将使用的相同垂直位置分别绘制线条的最佳方法是什么？`MeasureString().Height`没有给我两条线之间的完整距离。

**更新**

我发现[这个 MSDN 页面](http://msdn.microsoft.com/en-us/library/xwf9s90b%28v=vs.90%29.aspx)解释了如何在`DrawString`绘制多行字符串时确定行高。我仍然更喜欢使用单个`DrawString`调用来处理各个行以及整个文本块的垂直对齐。有什么提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T08:58:23.057

我发现在我的情况下，我有文本的边界矩形，这使得自定义实现变得非常容易。

```
 Public Shared Sub MyDrawString(ByVal g As Drawing.Graphics, _
                                   ByVal text As String, _
                                   ByVal font As Drawing.Font, _
                                   ByVal brush As Drawing.Brush, _
                                   ByVal layoutRect As Drawing.RectangleF, _
                                   ByVal stringFormat As Drawing.StringFormat)

        Dim lineSpacingPixel As Single
        lineSpacingPixel = font.Size * font.FontFamily.GetLineSpacing(font.Style) / _
            font.FontFamily.GetEmHeight(font.Style)

        Dim lines() As String
        lines = text.Split(New String() {vbCrLf}, StringSplitOptions.None)

        For i = 0 To lines.Count - 1
            Dim rect As Drawing.RectangleF
            rect = New Drawing.RectangleF(layoutRect.X, layoutRect.Y + i * lineSpacingPixel, _
                                          layoutRect.Width, _
                                          layoutRect.Bottom - layoutRect.Y - i * lineSpacingPixel)

            g.DrawString(lines(i), font, brush, rect, stringFormat)
        Next i

    End Sub 
```

请注意，如果 layoutRect 的大小与要绘制的文本的大小不匹配，则需要进行代码调整以考虑自动换行和 LineAlignment。

# java - 使用调试信息反编译 C 代码？

> ID：15609440
> 
> 赞同：3
> 
> 时间：2013-03-25T07:06:44.460
> 
> 标签：java, c++, c, reverse-engineering, decompiling

Java 和 Python 字节码比 C/C++ 编译器生成的已编译机器码相对容易反编译。

我无法找到令人信服的答案来解释为什么 -g 选项中的信息不足以进行反编译，但足以进行调试？Python/Java 字节码中包含哪些使反编译变得容易的额外内容？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-25T07:10:37.213

以下是其中的一些原因：

1.  Java 和 Python 字节码相对简单且高级，而某些 CPU（想想 x86）的指令集则极其复杂。
2.  字节码紧密地模仿了它们设计的语言结构。
3.  在生成字节码时，Java 和 Python 执行的优化很少。这导致字节码与原始源代码的结构紧密对应。一个好的优化 C 或 C++ 编译器能够生成远离原始源代码的程序集。
4.  Java 和 Python 编译器很少，而 C 和 C++ 编译器很多。如果您的目标是单个已知编译器（或一小组已知编译器），则更容易生成高质量的反编译器。
5.  与 C++ 相比，Python 和 Java 是相对简单的语言（这一点不适用于 C）。
6.  C++ 模板对质量反编译提出了许多挑战（这一点也不适用于 C）。
7.  C/C++ 预处理器。
8.  在 Python 中，源文件和字节码文件之间存在一对一的关系。在 Java 中，关系是一个或多个字节码文件的一个来源。在 C 和 C++ 中，这种关系是多对多的，在源代码前端有很多重叠（想想标题）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T14:05:17.190

> 我无法找到令人信服的答案来解释为什么 -g 选项中的信息不足以进行反编译，但足以进行调试？

调试信息基本上只包含生成代码中的地址和源文件行号之间的映射。调试器不需要反编译代码——它只显示原始源代码。如果源文件丢失，调试器不会神奇地显示它们。

也就是说，调试信息的存在确实使反编译更容易。如果调试信息包括使用的类型和函数原型的布局，反编译器可以使用它并提供更精确的反编译。然而，在许多情况下，它仍然可能与原始来源不同。

例如，这是一个使用 Hex-Rays 反编译器反编译的函数，而不使用调试信息：

```
int __stdcall sub_4050A0(int a1)
{
  int result; // eax@1

  result = a1;
  if ( *(_BYTE *)(a1 + 12) )
  {
    result = sub_404600(*(_DWORD *)a1);
    *(_BYTE *)(a1 + 12) = 0;
  }
  return result;
} 
```

由于它不知道 的类型`a1`，因此对其字段的访问表示为添加和强制转换。

这是符号文件加载后的相同功能：

```
void __thiscall mytree::write_page(mytree *this, PAGE *src)
{
  if ( src->isChanged )
  {
    cache::set_changed(this->cache, src->baseAddr);
    src->isChanged = 0;
  }
} 
```

你可以看到它已经改进了很多。

至于为什么反编译字节码通常更容易，除了 NPE 的答案检查还有[这个](https://stackoverflow.com/a/5160714/422797).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T07:26:33.627

一些处理器，如 x86 处理器，具有可变长度的指令。如果控制传递到指令的中间（= 第一个字节之后的任何位置），那也可以是有效指令（或多条指令）。这使得明确反汇编机器代码变得困难。C/C++ 代码可以利用此功能。

在某些处理器和操作系统上，可以像执行代码一样执行数据，并像使用数据一样使用代码。这使得很难明确地将两者分开。而且，这也是 C/C++ 程序通常可以轻松完成的事情。

在某些处理器和操作系统上，动态生成代码并执行它很容易，并且可以在运行时修改现有代码。这也导致了反编译代码的歧义。C/C++ 程序通常也可以做到这一点。

**编辑**：另外，一些 CPU 对同一条指令有多种不同的编码。例如，x86 CPU 有 2 条指令`mov reg, reg/mem`和`mov reg/mem, reg`. 这些使您可以在寄存器和内存位置（在任一方向）以及两个寄存器之间移动数据。这两条指令都可用于在两个寄存器之间传输数据，但它们具有不同的编码。如果程序以某种方式依赖于特定的编码（例如，为了通过校验和验证其完整性），那么从反汇编中`mov eax, ebx`您将无法分辨`mov`它最初是两条指令中的哪一条，因此如果您尝试重新组装反汇编，你可能会破坏程序。

您可以使用调试器调试带有或不带有调试/符号信息的程序。这些信息只会使人类更容易导航代码和数据，因为可以使用它们的名称和类型来识别和显示许多（但不一定是所有）例程和变量，而不仅仅是原始地址和原始无类型数据。

我猜想各种字节码不那么模棱两可，而且它们的功能更受限制，这就是让反编译更容易的原因。

# objective-c - 没有移动到 iPod Touch 中的设置

> ID：15609441
> 
> 赞同：1
> 
> 时间：2013-03-25T07:06:50.573
> 
> 标签：objective-c, xcode, uiapplication

我有一个按钮。当我点击它时，我已使用此代码进入iPod Touch 中的**设置**。但它不会。iPod touch iOS 是 6.1 。请告诉我问题所在。提前致谢 。作为参考，我附上了设置屏幕![在此处输入图像描述](../Images/40b1f0ee23e86bc4c8a77b53373edc03.png)

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"prefs://"]]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T07:08:51.610

到目前为止，Apple 还没有提供 URL Schema 来在较新的版本中实现这一目标。直到 ios5.0 之后，它才开始工作。

# android - 录制在 android 中安装/运行的任何应用程序的视频

> ID：15609449
> 
> 赞同：3
> 
> 时间：2013-03-25T07:07:08.043
> 
> 标签：android, video-capture, tablet, audio-recording, smartphone

Android 智能手机/平板电脑（2.3 及以上）：如何捕获应用程序的视频和音频？我需要录制并保存正在运行的应用程序的电影。

我知道 DDMS，但它只需要屏幕截图。但我需要在 android 应用程序中播放视频 + 音频

要求：需要制作安装在安卓智能手机/平板电脑上的应用程序的视频。（即捕获应用程序中出现的屏幕和声音），例如[截屏](https://play.google.com/store/apps/details?id=com.ms.screencast&hl=en)

提前谢谢了

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T07:15:53.960

我使用安卓截屏工具在我的电脑上镜像我的安卓设备。

[安卓截屏](https://code.google.com/p/androidscreencast)

[机器人@屏幕](http://droid-at-screen.ribomation.com/)

和一个屏幕录制工具来录制屏幕。

例如，在 macbook 上，我使用 quicktime player 的屏幕录像机。

[用于 Windows 的 CamStudio](http://camstudio.org)

# html - 引导缩略图 - 中心内容（img + 标题），标题浮动：左

> ID：15609455
> 
> 赞同：0
> 
> 时间：2013-03-25T07:07:23.847
> 
> 标签：html, css, twitter-bootstrap, thumbnails, center

**你好，**

**这是我正在尝试做的事情：**

将内容居中：每个缩略图的（img + caption）。 *我的 img 必须是 span3，标题必须是 span4。*

**这是我的问题：**

我可以获取内容中心，或者图片旁边的标题浮动； **但我不能同时得到两者。**

*我今天早上开始使用引导程序，所以我想我使用了错误的方式。*

**这是我的代码：**

```
<ul class="thumbnails">
    <li class="span12">
        <div class="thumbnail span12">
            <img class="span3" data-src="holder.js/300x200" alt="300x200">
            <div class="caption span4">
                <h3>My Title</h3>
                <p>blabla</p>
            </div>
        </div>
    </li> 
</ul> 
```

![在此处输入图像描述](../Images/19396ce90fc033357f074e84e8d97959.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T08:25:53.100

Slake，根据我对 bootstrap 的一点经验，您必须创建一个包含 div 来设置整体布局。[在此处](http://twitter.github.com/bootstrap/scaffolding.html)查看引导文档布局部分。例如，

```
<!-- wrap your twitter stuff in -->
<div class="container"></div> 
```

此外，请查看这个非常有用的[w3resource 教程](http://www.w3resource.com/twitter-bootstrap/thumbnails-tutorial.php)，以使用 twitter 引导程序创建缩略图。按照本教程，我很快就能够创建一个您尝试设置的缩略图网格的基本示例。[你可以在这里](http://jsfiddle.net/SJHce/2/)摆弄代码。

复制示例代码的一部分（更多在上面的链接中）：

```
<div class="container">
    <ul class="thumbnails">
        <li class="span12">
           <div class="thumbnail">
               <div class="span3 offset2"><img src="http://lorempixel.com/300/200/sports/5" alt="300x200"></div>
            <div class="span5">
                <h3>My Title</h3>
                <p>blabla</p>
            </div>
            </div>
        </li>
    </ul>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T07:55:57.157

亲爱的朋友：
它可以帮助你:)

```
<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Bootstap</title>
<link href="css/bootstrap.min.css" rel="stylesheet" type="text/css">
<link href="css/bootstrap-responsive.min.css" rel="stylesheet" type="text/css">
<style>
body {padding:20px;}
img {margin:0 3px;}
</style>
</head>

<body>
<div class="container">
    <div class="row">
        <div class="snap4"><img class="pull-left" src="http://dummyimage.com/260x180/ddd/000" /></div>
        <div class="span8 pull-left">
            <h2>Heading</h2>
            <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.</p>
        </div>
    </div>
    <br>
    <div class="row">
        <div class="snap4"><img class="pull-left" src="http://dummyimage.com/260x180/ddd/000" /></div>
        <div class="span8 pull-left">
            <h2>Heading</h2>
            <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.</p>
        </div>
    </div>
    <br>
    <div class="row">
        <div class="snap4"><img class="pull-left" src="http://dummyimage.com/260x180/ddd/000" /></div>
        <div class="span8 pull-left">
            <h2>Heading</h2>
            <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.</p>
        </div>
    </div>
</div>

</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T08:02:15.697

您也可以使用`offset class`为您的内容留出空间，例如以下代码：

```
<div class="container">
    <div class="row">
        <div class="snap4"><img class="pull-left" src="http://dummyimage.com/260x180/ddd/000" /></div>
        <div class="span7 pull-left">
            <h2>Heading</h2>
            <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.</p>
        </div>
        <div class="offset1"></div>
    </div>
    <br>
    <div class="row">
        <div class="snap4"><img class="pull-left" src="http://dummyimage.com/260x180/ddd/000" /></div>
        <div class="span7 pull-left">
            <h2>Heading</h2>
            <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.</p>
        </div>
        <div class="offset1"></div>
    </div>
    <br>
    <div class="row">
        <div class="snap4"><img class="pull-left" src="http://dummyimage.com/260x180/ddd/000" /></div>
        <div class="span7 pull-left">
            <h2>Heading</h2>
            <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.</p>
        </div>
        <div class="offset1"></div>
    </div>
</div> 
```

# java - Java 使用 FileChannel 从文件中读取

> ID：15609459
> 
> 赞同：0
> 
> 时间：2013-03-25T07:08:00.473
> 
> 标签：java, file, io, nio, filechannel

从大文件中读取时，我从这段代码中得到了一些奇怪的输出，文件是使用 while 循环打印到 99,999 位的，但是，在读取文件并打印内容时，它只输出 99,988 行。另外，使用 ByteBuffer 是读取文件的唯一选择吗？我见过其他一些使用 CharBuffer 的代码，但我不确定应该使用哪一个，以及在什么情况下应该使用它们。注意：filePath 是指向磁盘上文件的 Path 对象。

```
 private void byteChannelTrial() throws Exception {
        try (FileChannel channel = (FileChannel) Files.newByteChannel(filePath, READ)) {
            ByteBuffer buffer = ByteBuffer.allocate(1024);
            String encoding = System.getProperty("file.encoding");
            while (channel.read(buffer) != -1) {
                buffer.rewind();
                System.out.print(Charset.forName(encoding).decode(buffer));
                buffer.clear();
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T08:45:19.727

通常，在读取缓冲区数据之前调用 flip()。rewind() 方法执行以下工作：

```
public final Buffer rewind() {
    position = 0;
    mark = -1;
    return this;
} 
```

它没有像 flip() 那样设置“限制”：

```
public final Buffer flip() {
    limit = position;
    position = 0;
    mark = -1;
    return this;
} 
```

因此，在阅读之前使用 flip() 而不是 rewind() 取一个托盘。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T07:17:11.213

对于阅读文本 BufferedReader 是最好的

```
 try (BufferedReader rdr = Files.newBufferedReader(Paths.get("path"),
            Charset.defaultCharset())) {
        for (String line; (line = rdr.readLine()) != null;) {
            System.out.println(line);
        }
    } 
```

顺便提一句

```
String encoding = System.getProperty("file.encoding");
Charset.forName(encoding); 
```

相当于

```
Charset.defaultCharset(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T06:29:14.937

好吧，事实证明这种组合有效：

```
 private void byteChannelTrial() throws Exception {
        try (FileChannel channel = (FileChannel) Files.newByteChannel(this.filePath, READ)) {
            ByteBuffer buffer = ByteBuffer.allocate(1024);
            while (channel.read(buffer) != -1) {
                buffer.flip();
                System.out.print(Charset.defaultCharset().decode(buffer));
                buffer.clear();
            }
        }
    } 
```

至于它为什么起作用，我不太确定。

# asp.net-mvc - 在 Asp.net MVC4(Razor) 中根据用户角色隐藏和显示 Layout.cshtml 的 div 标签

> ID：15609463
> 
> 赞同：4
> 
> 时间：2013-03-25T07:08:20.670
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor, asp.net-mvc-4

我有一个母版页，其中有一些菜单用于称为用户的角色，而其他菜单用于管理员角色，所以我愿意检查用户的角色并显示一些 div 标签并隐藏其他标签用户角色的基础。

**因为，我们没有用于 layout.cshtml 的控制器，所以我如何为布局视图设置 viewModel 在其中我可以检查当前用户的角色**

如何对 layout.cshtml 进行基于角色的检查。

我已经通过以下问题，但现在还没有回答

[如何根据角色显示或隐藏控件 - ASP.NET MVC 4 Razor](https://stackoverflow.com/questions/11829937/how-to-show-or-hide-controls-based-on-roles-asp-net-mvc-4-razor)

所以，请告诉我可能的解决方案以及哪种方式最适合在 layout.cshtml 中应用基于角色的检查

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-25T07:09:40.150

您可以使用以下[`User.IsInRole`](http://msdn.microsoft.com/en-us/library/system.security.principal.iprincipal.isinrole.aspx)方法：

```
@if (User.IsInRole("admin"))
{
    <li>Only the admin can see this menu item</li>
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T07:43:27.027

您可以使用以下代码进行基于角色的检查

```
@if(Request.IsAuthenticated)

{
    if(User.IsInRole("Admin")
    {
     <Ul Class="SubMenuItem">

     <li> this menu item is for Admin role</li>
     </Ul>
    }
     if(User.IsInRole("User")
    {
     <Ul Class="SubMenuItem">

     <li> this menu item is for User role</li>
     </Ul>
    }
} 
```

> 对于未知用户

```
else
{
 <Ul Class="SubMenuItem">

     <li> this menu item is for Unknown user</li>
     </Ul>
} 
```

# php - 两个用于查询的每个循环

> ID：15609465
> 
> 赞同：0
> 
> 时间：2013-03-25T07:08:26.223
> 
> 标签：php, mysql, foreach

我正在尝试为 2 个数组创建一个循环，但我遇到了创建重复条目的冲突……我想我只是创建了错误的循环。

```
 foreach($productIds as $productID){

            foreach($qty as $q) {
$sql = "INSERT INTO orderedProducts (productID, orderID, qty) VALUES 
((select productID from products where productID ='$productID'), '$orderID', '$q')";
           execute_query($sql);

                 }
           } 
```

如果我删除 qty 循环并只是硬编码其中的 qty 工作正常。有什么方法可以将这两个循环结合起来吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T07:10:30.930

对此使用`INSERT INTO...SELECT`声明，

```
INSERT INTO orderedProducts (productID, orderID, qty) 
SELECT productID, '$orderID', '$q'
FROM   products
WHERE  productID = '$productID' 
```

*   [INSERT INTO... SELECT 语法](http://dev.mysql.com/doc/refman/5.0/en/insert-select.html)

作为旁注，[`SQL Injection`](http://bobby-tables.com/)如果变量的值（*s*）来自外部，则查询很容易受到攻击。请看下面的文章，了解如何预防。通过使用`PreparedStatements`，您可以摆脱在值周围使用单引号。

*   [如何*防止*PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T08:19:53.327

找出问题所在......不能使用它只是搞砸的foreach循环，我只是使用了数组的索引

```
 for($i =0 ; $i < sizeof($productIds);$i++){ 
$sql = "INSERT INTO orderedProducts (productID, orderID, qty) VALUES ((select productID from products where productID ='$productIds[$i]'), '$orderID', '$qty[$i]')";
        execute_query($sql);
       } 
```

# asp.net - 如何在asp.net中更改列表框的选定颜色

> ID：15609468
> 
> 赞同：0
> 
> 时间：2013-03-25T07:08:49.783
> 
> 标签：asp.net, css

```
<asp:ListBox 
     ID="ddlPA" 
     ClientIDMode="Static" 
     runat="server" 
     AutoPostBack="true"
     SkinID="x" 
     CssClass="ListBoxCssClass" 
     SelectionMode="Multiple" 
     OnSelectedIndexChanged="ddlPA_SelectedIndexChanged">
</asp:ListBox> 
```

当我在 asp:listbox 中选择一个项目时，所选项目颜色变为灰色，我想将颜色更改为蓝色。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-08-27T01:21:55.230

最近搜索这个并没有找到一个合理的解决方案，所以我只用 CSS 创建了一个。我从 ListBox 切换到 CheckBoxList 并隐藏了复选框。

在这个例子中，为了简单起见，我只是让所有项目的复选框不可见（CSS 中的选项），并将所选项目的同级文本 font-weight 设置为 600（CSS 中的标签） - 您可以根据自己的意愿使用 CSS 一次您正确设置了选择器 - 背景、伪：在图像或边框之前等。请记住，如果您在项目之前使用某些东西，您可能会创建间距问题 - 我将包含一个 CSS 示例（在第一个示例之后）用于“未选中”项目，因此您可以添加填充/边距来弥补此偏移量。有很多方法可以做到这一点，但这会让你到达那里，直到你想探索其他选择。

ASPX：

```
 <asp:CheckBoxList ID="chkList" CssClass="someclassname" runat="server" </asp:CheckBoxList> 
```

CSS：

```
 .someclassname input {display: none;}

    .someclasssname input:checked + label {font-weight: 600;} 
```

就我个人而言，我更喜欢 CSS 的换行和缩进，但如果没有，这里更容易阅读。

这是其他未选中项目的 CSS 选择器。

CSS：

```
 .someclass input:not(:checked) + label {font-weight: 400;} 
```

同样，我们隐藏了复选框，然后格式化复选框右侧的文本。这里的另一个不错的功能是，现在用户可以使用基于触摸的输入设备选择多个项目 - 无需 ctrl 或空格键。

此外，与 ListBox 不同的是，CheckBoxList 不允许您将用户限制为一个选择。如果您需要这种行为，那么您可以切换到 RadioButtonList。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T07:17:27.060

您可以通过指定 CssClass 或 BackColor 属性从 .aspx 页面设置背景颜色。它看起来像：

```
<asp:ListBox CssClass="MyListBox" BackColor="#e0e0e0"></asp:ListBox> 
```

设置选定的项目有点棘手......我不相信直接有这个属性。您可以在 javascript 或 jQuery 中设置它，例如：

```
<script type="text/javascript">
  $(document).ready(function() {
    $('#MyListBox').click(function() {
        $("#MyListBox option:selected").css("background-color", "#e0e0e0");
    }); 
  });
</script> 
```

# django - 在 django 中使用 GenericForeignKey 进行复杂的过滤

> ID：15609471
> 
> 赞同：2
> 
> 时间：2013-03-25T07:09:04.913
> 
> 标签：django, generics, filter

我很难弄清楚这一点。我有两个自定义用户模型（例如：Buyer、Seller），它扩展了一个自定义用户模型（CustomUser），它包含所有常见字段（包括`email`我们需要使用哪些字段来过滤内容）并且是一个`abstract`模型。

现在，我们正在使用第三方电子邮件服务从/向我们的应用程序发送和接收电子邮件。第三方服务会通知我们某个事件。比如说，如果一封电子邮件被退回或失败，他们会在 url 上向我们发送一个 POST 请求`callback`，在验证请求后，我们会更新我们的记录并记下哪封电子邮件失败了。

我们有一个额外的电子邮件模型（SentMessage），我们在其中保存已发送的消息。这个模型看起来像这样。

```
class SentMessage(models.Model):
    subject = models.CharField(max_length=100)
    body = models.TextField()
    sender = models.ForeignKey(models.InternalUser)
    content_type = models.ForeignKey(ContentType)
    object_id = models.PositiveIntegerField()
    recipient = generic.GenericForeignKey('content_type', 'object_id')
    bounced = models.BooleanField(default=False) 
```

如您所见，`recipient`上述模型中的字段是 a`GenericForeignKey`并且可以绑定到任何其他模型（在我们的例子中为买方或卖方）。如果消息在退回事件等中被退回，我们将在此模型中更新记录。我希望使用第三方服务提供的电子邮件地址过滤掉收件人。所以基本上流程是这样的。

--> 使用给定的电子邮件地址过滤收件人。（收件人可以是买家或卖家）--> 使用上述内容，`SentMessage`根据事件类型过滤退回或失败的邮件。

我被困在这里的第一点。如何过滤`Buyer`模型或`Seller`模型中存在的对象。我什至不能执行以下操作，因为`CustomUser`类是一个抽象类，两者都`Buyer`继承`Seller`自：

```
recipient = models.CustomUser.objects.get(email=bounced_email) 
```

从给定的电子邮件地址中查找（过滤）出`content_type`,`object_id`的最佳方法是什么？`recipient`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T08:19:14.703

这是你需要去的地方[https://docs.djangoproject.com/en/dev/ref/contrib/contenttypes/](https://docs.djangoproject.com/en/dev/ref/contrib/contenttypes/)

首先获取 content_type 的类，然后使用 object_id 获取对象

```
recipient = models.CustomUser.objects.get(email='guido@example.com')
messages = SentMessage.objects.filter(content_object=recipient, email=bounced_email) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-20T19:02:52.580

我倾向于同意 n3storm 的观点，即抽象模型可能不适合这种情况，但我假设您有使用它的理由。

在这种情况下，也许`GenericRelation`你的具体模型中的 a 可以解决问题，因为它`GenericRelation`充当 a 的“反向关系” `GenericForeignKey`。（[https://docs.djangoproject.com/en/dev/ref/contrib/contenttypes/#django.contrib.contenttypes.generic.GenericRelation](https://docs.djangoproject.com/en/dev/ref/contrib/contenttypes/#django.contrib.contenttypes.generic.GenericRelation)）

例如，可能会起作用：

```
class CustomUser(models.Model):
    # ... your common fields

    class Meta:
        abstract = True

class Buyer(CustomUser):
    # ... buyer-specific fields
    sent_messages = GenericRelation(SentMessage)

class Seller(CustomUser):
    # ... seller-specific fields
    sent_messages = GenericRelation(SentMessage)

recipient_list = [x for x in Buyer.objects.filter(sent_messages=bounced_email)] + 
                 [x for x in Seller.objects.filter(sent_messages=bounced_email)]
# The above list can contain at most one element since a SentMessage will reference at most one object. 
```

关于验证的一些评论：除非您对`SentMessage.content_type`FK 进行一些验证，否则*GFK*引用的模型不是`Buyer`or `Seller`。这可以通过`limit_choices_to`在`content_type`FK 中使用来防止，尽管您必须确保调用模型实例的`full_clean`方法来应用验证（ [https://docs.djangoproject.com/en/dev/ref/models/instances/#validating-对象](https://docs.djangoproject.com/en/dev/ref/models/instances/#validating-objects)）。Django Admin 正确使用来防止输入无效的 FK 值。`SentMessage``limit_choices_to`

另外，我认为默认情况下，GFK 不会强制`object_id`你引用的存在（至少从 1.4 开始，这是我正在使用的）。这意味着最终可能会出现`recipient_list`上面示例中的空的情况。

**警告：向模型添加 GenericRelation 意味着删除该模型的实例也将级联删除与 GFK 链接的条目。**在这种情况下，这意味着删除 a`Buyer`将删除所有`SentMessage`与 that 相关的内容`Buyer`。有关如何解决此功能/限制的更多信息，请参阅[https://docs.djangoproject.com/en/dev/ref/contrib/contenttypes/#django.contrib.contenttypes.generic.GenericRelation 。](https://docs.djangoproject.com/en/dev/ref/contrib/contenttypes/#django.contrib.contenttypes.generic.GenericRelation)

# php - 在服务器上查找和替换文件夹名称

> ID：15609480
> 
> 赞同：0
> 
> 时间：2013-03-25T07:10:25.027
> 
> 标签：php, linux, ftp, replace

我似乎找不到在我的专用服务器上执行此操作的方法。

我有一个巨大的文件夹目录，其中一些包含 3 个破折号，例如“---”，我需要找到并用一个破折号替换。

有没有一种简单的方法可以直接在我的服务器上进行查找和替换？我真的不想下载所有文件夹并在我的桌面上完成并重新上传它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T07:44:00.923

你可以这样做：

```
find  ./  -name '*'  -exec  rename  's/---/-/g'  {}  \; 
```

***未经测试**

[源代码](http://www.commandlinefu.com/commands/view/760/find-recursively-from-current-directory-down-files-and-directories-whose-names-contain-single-or-multiple-whitespaces-and-replace-each-such-occurrence-with-a-single-underscore.)

# java - Apache Pig：无法运行我自己的 pig.jar 和 pig-withouthadoop.jar

> ID：15609484
> 
> 赞同：5
> 
> 时间：2013-03-25T07:10:32.467
> 
> 标签：java, hadoop, mapreduce, apache-pig

我有一个运行 Hadoop 0.20.2 和 Pig 0.10 的集群。我有兴趣在 Pig 的源代码中添加一些日志并在集群上运行我自己的 Pig 版本。

我做了什么：

1.  使用“ant”命令构建项目

2.  得到 pig.jar 和 pig-withouthadoop.jar

3.  将 jar 复制到集群名称节点上的 Pig 主目录

4.  做一份工作

然后我得到以下标准输出：

```
2013-03-25 06:35:05,226 [main] WARN  org.apache.pig.backend.hadoop20.PigJobControl -   falling back to default JobControl (not using hadoop 0.20 ?)
java.lang.NoSuchFieldException: runnerState
    at java.lang.Class.getDeclaredField(Class.java:1882)
    at org.apache.pig.backend.hadoop20.PigJobControl.<clinit>(PigJobControl.java:51)
    at  org.apache.pig.backend.hadoop.executionengine.shims.HadoopShims.newJobControl(HadoopShims.java:97)
    at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.JobControlCompiler.compile(JobControlCompiler.java:287)
    at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher.launchPig(MapReduceLauncher.java:177)
    at org.apache.pig.PigServer.launchPlan(PigServer.java:1320)
    at org.apache.pig.PigServer.executeCompiledLogicalPlan(PigServer.java:1305)
    at org.apache.pig.PigServer.execute(PigServer.java:1295)
    at org.apache.pig.PigServer.executeBatch(PigServer.java:375)
    at org.apache.pig.PigServer.executeBatch(PigServer.java:353)
    at org.apache.pig.tools.grunt.GruntParser.executeBatch(GruntParser.java:137)
    at org.apache.pig.tools.grunt.GruntParser.parseStopOnError(GruntParser.java:198)
    at org.apache.pig.tools.grunt.GruntParser.parseStopOnError(GruntParser.java:170)
    at org.apache.pig.tools.grunt.Grunt.exec(Grunt.java:84)
    at org.apache.pig.Main.run(Main.java:480)
    at org.apache.pig.Main.main(Main.java:157)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at  sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.hadoop.util.RunJar.main(RunJar.java:208)
2013-03-25 06:35:05,229 [main] INFO  org.apache.pig.tools.pigstats.ScriptState - Pig script settings are added to the job
2013-03-25 06:35:05,260 [main] INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.JobControlCompiler - mapred.job.reduce.markreset.buffer.percent is not set, set to default 0.3
2013-03-25 06:35:05,272 [main] INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.JobControlCompiler - Setting Parallelism to 1
2013-03-25 06:35:06,041 [main] INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.JobControlCompiler - creating jar file Job9091543475518322185.jar
2013-03-25 06:35:10,974 [main] INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.JobControlCompiler - jar file Job9091543475518322185.jar created
2013-03-25 06:35:10,995 [main] INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.JobControlCompiler - Setting up single store job
2013-03-25 06:35:11,006 [main] INFO  org.apache.pig.data.SchemaTupleFrontend - Key [pig.schematuple] is false, will not generate code.
2013-03-25 06:35:11,006 [main] INFO  org.apache.pig.data.SchemaTupleFrontend - Starting process to move generated code to distributed cacche
2013-03-25 06:35:11,006 [main] INFO  org.apache.pig.data.SchemaTupleFrontend - Setting key [pig.schematuple.classes] with classes to deserialize []
2013-03-25 06:35:11,181 [main] ERROR org.apache.pig.tools.grunt.Grunt - ERROR 2998: Unhandled internal error. org.apache.hadoop.mapred.jobcontrol.JobControl.addJob(Lorg/apache/hadoop/mapred/jobcontrol/Job;)Ljava/lang/String; 
```

## 猪堆栈跟踪：

```
ERROR 2998: Unhandled internal error. org.apache.hadoop.mapred.jobcontrol.JobControl.addJob(Lorg/apache/hadoop/mapred/jobcontrol/Job;)Ljava/lang/String;

java.lang.NoSuchMethodError: org.apache.hadoop.mapred.jobcontrol.JobControl.addJob(Lorg/apache/hadoop/mapred/jobcontrol/Job;)Ljava/lang/String;
    at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.JobControlCompiler.compile(JobControlCompiler.java:298)
    at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher.launchPig(MapReduceLauncher.java:177)
    at org.apache.pig.PigServer.launchPlan(PigServer.java:1320)
    at org.apache.pig.PigServer.executeCompiledLogicalPlan(PigServer.java:1305)
    at org.apache.pig.PigServer.execute(PigServer.java:1295)
    at org.apache.pig.PigServer.executeBatch(PigServer.java:375)
    at org.apache.pig.PigServer.executeBatch(PigServer.java:353)
    at org.apache.pig.tools.grunt.GruntParser.executeBatch(GruntParser.java:137)
    at org.apache.pig.tools.grunt.GruntParser.parseStopOnError(GruntParser.java:198)
    at org.apache.pig.tools.grunt.GruntParser.parseStopOnError(GruntParser.java:170)
    at org.apache.pig.tools.grunt.Grunt.exec(Grunt.java:84)
    at org.apache.pig.Main.run(Main.java:480)
    at org.apache.pig.Main.main(Main.java:157)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.hadoop.util.RunJar.main(RunJar.java:208) 
```

什么地方出了错？除了在namenode的安装目录中替换pig.jar和pig-withouthadoop.jar之外，我还应该做些什么吗？

帮助...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T11:32:40.647

我错过的一点是： pig-withouthadoop.jar 应该使用特定的 Hadoop 版本进行编译。我以以下方式编译了 jar 并且它起作用了：

```
% ant clean jar-withouthadoop -Dhadoopversion=23 
```

# android - 如何在android中删除sqlite数据库中的特定行？

> ID：15609486
> 
> 赞同：-1
> 
> 时间：2013-03-25T07:10:34.500
> 
> 标签：android, android-sqlite

我使用了一个单独的类来创建数据库。在那我写了这样的删除功能

```
public void name_delete(String name){

    SQLiteDatabase db = this.getWritableDatabase();
    db.delete(TABLE_NAME, KEY_NAME + "=" + name, null);
//KEY_NAME is a column name
} 
```

在主类中我调用了这个函数

```
db.name_delete(""+all_names.getSelectedItem().toString()); 
```

**all_names.getSelectedItem().toString()**是微调器选定项。删除具有在微调器中选择的名称的特定行。帮助我如何编写函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T07:14:15.333

应该

```
db.delete(TABLE_NAME, KEY_NAME + "=?", new String[]{name}); 
```

还

```
db.name_delete(all_names.getSelectedItem().toString()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T07:15:27.863

```
public void name_delete(String name){

    SQLiteDatabase db = this.getWritableDatabase();
    db.delete(TABLE_NAME, KEY_NAME +"=?", new String[]{name});
} 
```

用这个

# websocket - .NET 4.5 中的 Websocket

> ID：15609490
> 
> 赞同：2
> 
> 时间：2013-03-25T07:10:41.687
> 
> 标签：websocket, signalr

我想开发一个 Web 应用程序，其中客户端调用服务器上的服务来执行一些涉及一些处理的操作。服务器将进行所有必要的处理，当更新的数据准备好时，它将将该数据推送到客户端。目前我正在考虑两种方法： - 1\. 使用带有 SignalR 的 ASP.NET WEB API 2\. 在 .NET 4.5 中使用带有 WCF 的 WebSockets。

我的服务器将在 Windows Server 2012 上，但我的大多数客户端将是 IE 9，我认为它不支持 WebSockets。

正如 SignalR 文档中所写，如果不存在 WebSockets 支持而不更改应用程序代码，它会自动落入长轮询。.NET 4.5 中的 WebSockets 是否也支持这一点，或者我必须手动完成。表示我是否必须在服务器上同时实现 Pull 方法和 push 方法。

请指导我，我将采用哪种方法。

在以后的用例中，我想使用 PhoneGAP 构建这个 Web 应用程序，以创建适用于 iOS、Android 和 Windows Phone 的移动应用程序。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-25T09:24:28.720

WebSockets 不会退回到长轮询（这实际上没有意义）。SignalR 是对 http 传输的更高级别的抽象，这就是它执行回退和其他事情的原因（例如通过连接提供一个很好的编程模型）。

如果您选择在 ASP.NET 上使用 websockets（不确定 WCF），您将针对原始套接字进行编程（这意味着读取/写入数组段等）并且很难做好。如果 websockets 在客户端或服务器上不可用，SignalR 会为您执行此操作，并将回退到其他几种传输方式（永久帧、服务器发送事件、长轮询）。

关于客户端，如果您选择使用 SignalR，则需要使用 SignalR 客户端。我们仅支持 javascript 和 .NET（silverlight、windows phone 8、winrt、.NET 4 和 .NET 4.5）。有些人为包括 iOS 和 Android 在内的其他平台编写了客户端，但我们不维护它们，所以我无法说明它们的最新程度。

我建议你使用 SignalR，这样你就可以专注于你的应用程序逻辑，而不是搞乱 websocket 的低级编程模型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T05:27:48.807

我可以确认后备自动运行。如果不能使用 websockets 传输，将使用 ServersentEvents 传输..等等..最后一个传输协议是长轮询。

我们的 SignalR 服务器是一个 .NET 4.5 框架应用程序，托管在一个 ASP.NET MVC 应用程序中，使用 Windows 2012 服务器上的 4.5 dll。应用程序池是 ASP.NET 4.0。

*   Windows 8 或 Windows 2012 服务器上的 .NET 4.5 客户端似乎使用 websockets。
*   Windows 7 机器上的相同 .NET 客户端（即使安装了框架 4.5）会自动回退到服务器发送的事件传输。

在浏览器上使用 Signalr javascript 客户端时，会发生类似的事情：

*   支持 websockets 的 Chrome/Safari/其他浏览器似乎使用 websockets。
*   不支持 websockets 但版本相对较晚的 IE/其他浏览器似乎使用 serverentevents。

从经验来看，serversentevents 并不是很糟糕，因此如果没有使用 websockets，请不要犹豫，当然也不要将其作为反对使用 signalR 的唯一因素，因为它的好处很多。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T07:13:06.133

您可以从 ASP.NET 教程[http://www.asp.net/signalr/overview/getting-started/tutorial-getting-started-with-signalr开始](http://www.asp.net/signalr/overview/getting-started/tutorial-getting-started-with-signalr)

在本教程之后，您将了解有关 SignalR 需要了解的所有基本知识

# php - 避免服务器端和客户端两次重写逻辑

> ID：15609492
> 
> 赞同：3
> 
> 时间：2013-03-25T07:10:58.670
> 
> 标签：php, javascript, code-reuse

我正在编写一个允许用户为产品选择不同选项的软件。价格将根据选择的选项而有所不同。服务器正在使用 LAMP 堆栈。客户端将使用 HTML5 和 javascript。我试图防止两次重写验证和价格计算，一次在服务器上，一次在客户端上。在这一点上，我有几个可用的选项。

1.  做正常的事情并重新编写验证和价格计算两次
2.  仅在服务器上进行验证和计算，并使用 ajax 更新客户端（慢，我想避免。）
3.  实现两种语言都支持的辅助语言（想到 Lisp）
4.  用javascript编写验证和计算逻辑。将 V8js 库与 php 一起使用
5.  使用 Node.js

我也试图避免对项目有很多要求。如果我走 Node.js 的路线，那么我将不得不将它安装在单独的子域上，然后购买通配符 SSL 证书，或者可能只是另一个证书。我宁愿不要把它放在同一个域上，并且有一些奇怪的代理/请求转发程序来决定 PHP 或 Node.js 是否应该处理请求。

PHP 站点的某些部分将需要访问数据。我正在使用 Doctrine 2 作为 ORM。走这条路线我不认为使用 Node.JS 将是最好的路线。

我更倾向于选项一，但也许我可以编写一些代码来生成所需的 java 脚本代码。我还有其他选择吗？有什么建议么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T15:03:08.970

那些理论上的“复杂”重写值得吗？可能只是不值得。

但是，如果确实如此 - 那么您使用类似“后端”的逻辑的解决方案是最好的。用javascript编写并在php中重用——没关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T18:37:44.903

您可以用 Java 编写验证例程。

在 applet 中将代码传送到客户端 - 然后您的 javascript 代码可以调用 applet 的方法。在服务器上，您可以将其作为命令行程序运行。

自从我做任何 JAVA 以来已经有很长时间了，但我认为可以创建一个既可以用作命令行程序又可以用作小程序的类。

小程序不需要 UI，可以缩小到 1px 正方形或 display:none；

# c - 如何将整数存储在 char* 指向的位置

> ID：15609495
> 
> 赞同：0
> 
> 时间：2013-03-25T07:11:04.937
> 
> 标签：c, unix, pointers

这可能是一个已经被问过的非常基本的问题，但我不太确定这里的答案[Casting an int pointer to a char ptr and反之亦然](https://stackoverflow.com/questions/4291048/casting-an-int-pointer-to-a-char-ptr-and-vice-versa)适用于我的情况。所以基本上我有以下几点：

```
void* head = sbrk(1024);  //allocate 1024 bytes in heap   

*((int*)(head+size)) = value;   //value and size are int with valoues between 1 and 1023 
```

我想知道对于任意大小的值，上述是否不起作用，那么大小值的限制是什么？它必须能被4整除吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T07:20:46.567

首先，您不能对 void 指针进行指针运算。该代码甚至不应该编译。

为了便于讨论，让我们假设您有一个 char 指针。然后正式地，这样的强制转换后跟访问是未定义的行为。然而，在现实世界中，如果您可以手动确保对齐，您的代码将始终有效。您必须确保写入的地址位于对齐的内存位置，否则无法保证代码可以正常工作。

* * *

**使用 ISO 9899:2011 标准中的相关引用进行**编辑，为什么 void 指针上的指针算术是未定义的行为：****

 **> 6.3.2.2 无效
> 
> 不应以任何方式使用 void 表达式（具有 void 类型的表达式）的（不存在的）值，并且不应将隐式或显式转换（除了 void）应用于此类表达式。

.

> 6.5.6 加法运算符
> 
> /--/
> 
> 另外，两个操作数都应具有算术类型，或者一个操作数应是指向完整对象类型的指针，而另一个应具有整数类型。（递增相当于加 1。）

.

> 4 一致性
> 
> 如果违反了出现在约束或运行时约束之外的“应”或“不应”要求，则行为未定义。未定义的行为在本国际标准中以“未定义的行为”一词或省略任何明确的行为定义来表示。这三者在重点上没有区别；他们都描述了“未定义的行为”。

违反标准中的规范文本的代码是否“应该编译”当然可以辩论，但我认为讨论对 OP 没有好处。永远不要编写依赖于未定义行为的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T07:32:34.297

使用`memcpy()`：

```
memcpy((char*)head + size, &value, sizeof(value)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T11:49:23.427

在许多系统上，在这种情况下，它需要是`size`四的倍数（取决于下面详述的其他条件，包括`int`系统上的大小为四个字节）。在不需要这个的系统上，它通常是首选。

首先， 的类型`head`是`void *`，C 标准没有定义使用 进行指针运算时会发生什么`void *`。

一些编译器，尤其是 GCC 及其继承者，会将这种算术视为类型是`char *`. 我将在此基础上进行。

其次，我不知道`sbrk`返回具有任何特定对齐方式的地址的保证。

让我们假设它`sbrk`确实返回了一个对齐良好的地址，并且您的 C 实现做了简单的事情来评估`* (int *) (head + size) = value`，即发出存储指令将`value`（转换为`int`）的值写入地址`head + size`。

那么你的问题就变成了：我的计算平台`int`对这个地址的商店做了什么？

只要`head + size`地址`int`在您的平台上适当对齐，商店就会按预期执行。在大多数平台上，四字节整数更喜欢四字节对齐，八字节整数更喜欢八字节对齐。只要`head`对齐到这个preference`size`的倍数并且是这个preference的倍数，那么store就会正常执行。

否则，会发生什么取决于您的平台。在某些平台上，硬件执行存储但可能比正常的存储指令执行得更慢，因为它将它分成两个单独的内存写入。（这也意味着共享相同内存的其他进程可能能够在一部分值已存储但另一部分未存储时读取内存。同样，这取决于您的计算平台的特性。）

在某些平台上，硬件会发出异常信号，中断程序执行并将控制权转移给操作系统。一些操作系统通过分析失败的指令并执行执行预期存储的替代指令来修复未对齐的存储（或者操作系统将异常中继到程序中的特殊代码，可能在自动包含的库中，这些代码执行此修复工作） . 在这些平台上，错位的店铺会很慢；它们会极大地降低程序的性能。

在某些平台上，硬件会发出异常信号，并且操作系统不会修复未对齐的存储。相反，操作系统要么终止您的进程，要么向它发送有关问题的信号，这通常会导致您的进程终止。（其他可能性包括触发调试器或输入您在程序中包含的特殊代码来处理信号。）**

# eclipse - 如何为 Android 安装 Xtend 2.4？

> ID：15609498
> 
> 赞同：1
> 
> 时间：2013-03-25T07:11:28.797
> 
> 标签：eclipse, installation, windows-7-x64, xtend

我正在尝试关注[这篇文章](http://www.eclipse.org/community/eclipse_newsletter/2013/march/article2.php)

当我尝试“禁用复选框在安装期间联系所有更新站点以查找所需的软件，以避免对其他 Eclipse 插件进行不必要的更新”时。我无法进行下一步，因为

```
Cannot complete the install because one or more required items could not be found.
  Software being installed: Xtend SDK 2.4.0.v201303201134 (org.eclipse.xtend.sdk.feature.group 2.4.0.v201303201134)
  Missing requirement: Xtend Standalone Bundle 2.4.0.v201303201134 (org.eclipse.xtend.standalone 2.4.0.v201303201134) requires 'bundle org.eclipse.emf.codegen 2.5.0' but it could not be found
  Cannot satisfy dependency:
    From: Xtend SDK 2.4.0.v201303201134 (org.eclipse.xtend.sdk.feature.group 2.4.0.v201303201134)
    To: org.eclipse.xtend.standalone [2.4.0.v201303201134] 
```

或者，如果启用该复选框，我会在 Eclipse 中安装时出错。

```
An error occurred while collecting items to be installed
session context was:(profile=profile, phase=org.eclipse.equinox.internal.p2.engine.phases.Collect, operand=, action=).
No repository found containing: osgi.bundle,com.android.ide.eclipse.base,21.1.0.v201302060044-569685
No repository found containing: osgi.bundle,com.android.ide.eclipse.ddms,21.1.0.v201302060044-569685
No repository found containing: org.eclipse.update.feature,com.android.ide.eclipse.ddms,21.1.0.v201302060044-569685 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T13:18:45.917

要安装 Xtend 但不联系 eclipse 更新站点，您只需添加 EMF 更新站点（如果尚未完成）。帮助 -> 安装新软件 -> 可用软件站点 -> 添加...

[http://download.eclipse.org/modeling/emf/emf/updates/releases](http://download.eclipse.org/modeling/emf/emf/updates/releases)

之后禁用除 EMF 和 Xtext 之外的所有软件站点（不幸的是，我无法在此处发布图像）

现在，在“确定”关闭后，选择使用 Xtext 更新站点。从树形视图中选择 Xtend，启用“联系所有更新站点”（不幸的是，我无法在此处发布图像）并按照接下来的向导步骤进行操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-12T12:59:24.160

Work fine for me when i take Eclipse build with already installed Xtend SDK and installing the ADT Plugin.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T09:42:06.100

听起来您正在尝试所有经典的 Eclipse 安装，而没有安装 Android 插件。因此，请重新阅读教程部分“设置 IDE”，建议从 Android 网站下载并安装“一体化”包或手动将 ADT 插件安装到现有的 Eclipse 中。

您不应*在*更新期间取消选中该复选框。Eclipse 只会将*必要*的更新添加到要安装的插件列表中。在 Eclipse 决定插件之后，您可以在安装向导中再次查看该列表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T13:20:37.083

本文假设您有一个正在运行的安装了 EMF 的 Eclipse。这似乎不是你的情况。只需留下“在安装过程中联系所有更新站点以查找所需软件”，它就会正确安装 EMF。

# android - 单击android小部件按钮上的侦听器

> ID：15609500
> 
> 赞同：6
> 
> 时间：2013-03-25T07:11:41.323
> 
> 标签：android, button, android-widget, onclick

我是android开发的新手。我想在小部件中的按钮上添加点击监听器。我正在更新服务中的小部件。提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T07:21:54.823

也许你应该考虑制作一个[*可点击的小部件*](https://stackoverflow.com/questions/2748590/clickable-widgets-in-android)。

这涉及使用：

> remoteView.setOnClickPendingIntent(R.id.widgetFrameLayout, pendingIntent);

# python - 在 windows 中为 python 应用程序开发 GUI

> ID：15609502
> 
> 赞同：1
> 
> 时间：2013-03-25T07:11:44.453
> 
> 标签：python

我正在用python做一个项目......最近先生告诉我为它添加一个GUI，因为我在命令提示符下运行它并且他无法理解它。根据他的建议，我下载了适用于windows的**PYQT**。我正在使用**Python 2.7**。如何从 PYQT UI 运行我的应用程序？以及如何打印我的应用程序在**PYQT**中而不是在命令提示符中生成的结果？我应该使用**QProcess()**吗？...请帮助....

我实际上在这里找到了一个代码-它在 PYQT 中嵌入了一个 python 解释器

[如何在 PyQT 小部件中嵌入 Python 解释器](https://stackoverflow.com/questions/2758159/how-to-embed-a-python-interpreter-in-a-pyqt-widget)

# java - java类编译时出错

> ID：15609505
> 
> 赞同：0
> 
> 时间：2013-03-25T07:11:59.080
> 
> 标签：java

我正在研究java的垃圾收集器部分，我已经编写了下面的java类，但是它在选择它时在方法printGCStats（）上显示了eclipse编辑器本身的编译时错误，它显示了错误“void”@expected，请建议如何克服这个...

```
import java.lang.management.GarbageCollectorMXBean;
import java.lang.management.ManagementFactory;

class demoGrbage {

    public static void main(String[] args) {

        public void printGCStats() 
        {
            long totalGarbageCollections = 0;
            long garbageCollectionTime = 0;

            for(GarbageCollectorMXBean gc :
                    ManagementFactory.getGarbageCollectorMXBeans()) {

                long count = gc.getCollectionCount();

                if(count >= 0) {
                    totalGarbageCollections += count;
                }

                long time = gc.getCollectionTime();

                if(time >= 0) {
                    garbageCollectionTime += time;
                }
            }

            System.out.println("Total Garbage Collections: "
                + totalGarbageCollections);
            System.out.println("Total Garbage Collection Time (ms): "
                + garbageCollectionTime);
        }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T07:13:53.777

您已经在方法中定义了方法。它不允许在java中。

在 main 外部定义`printGCStats`并在 main 方法中调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T07:13:47.437

将方法`public void printGCStats()`移出 main()

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T07:15:00.740

你已经写`printGCStats`了`main`方法。

你应该这样称呼它：

```
public static void main(String[] args) 
{
    printGCStats();
}

public void printGCStats() 
{
    /// ...
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T07:16:16.177

这是一个非常基本的错误。如何在另一个方法中定义一个方法？您在 main() 中定义了 printGCStats()，这是非法的。

用这个 ：

```
class demoGrbage {

public static void main(String[] args) {
    demoGrbage demo = new demoGrbage();
    demo.printGCStats();

}
public void printGCStats() 
{
    long totalGarbageCollections = 0;
    long garbageCollectionTime = 0;

    for(GarbageCollectorMXBean gc :
            ManagementFactory.getGarbageCollectorMXBeans()) {

        long count = gc.getCollectionCount();

        if(count >= 0) {
            totalGarbageCollections += count;
        }

        long time = gc.getCollectionTime();

        if(time >= 0) {
            garbageCollectionTime += time;
        }
    }

    System.out.println("Total Garbage Collections: "
        + totalGarbageCollections);
    System.out.println("Total Garbage Collection Time (ms): "
        + garbageCollectionTime);
} 
```

}

# c# - Installer.Install(IDictionary stateSaver) ：期望什么字典类型？

> ID：15609509
> 
> 赞同：1
> 
> 时间：2013-03-25T07:12:11.793
> 
> 标签：c#

我正在尝试手动调用[Installer.Install ：](http://msdn.microsoft.com/en-us/library/system.configuration.install.installer.install.aspx)

```
ProjectInstaller installer = new ProjectInstaller();
installer.Install(new Dictionary<int, int>()); 
```

问题：

```
System.ArgumentException was unhandled.
The value "_reserved_lastInstallerAttempted" is not of type "System.Int32"
and cannot be used in this generic collection.
       at System.ThrowHelper.ThrowWrongKeyTypeArgumentException(Object key, Type targetType)
       at System.Collections.Generic.Dictionary`2.System.Collections.IDictionary.Add(Object key, Object value)
       at System.Configuration.Install.Installer.Install(IDictionary stateSaver)
       at CSShellExtContextMenuHandler.ProjectInstaller.Install(IDictionary stateSaver) in C:\Users\win7pro32bit\Documents\lab\CSShellExtContextMenuHandler\ProjectInstaller.cs:line 40
       at Starter.Program.Main(String[] args) in C:\Users\win7pro32bit\Documents\lab\Starter\Program.cs:line 14 
```

作为参数，我尝试了`new Dictionary<int, int>`,`new Dictionary<string, string>`和其他参数，但没有一个有效。该[文档](http://msdn.microsoft.com/en-us/library/system.configuration.install.installer.install.aspx)没有帮助。期望什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T07:32:57.403

通过 .NET Reflector 运行 System.Configuration.Install.Installer 类会显示 Install 方法的以下内部实现：

```
public virtual void Install(IDictionary stateSaver)
{
    if (stateSaver == null)
    {
        throw new ArgumentException(Res.GetString("InstallNullParameter", new object[] { "stateSaver" }));
    }
    try
    {
        this.OnBeforeInstall(stateSaver);
    }
    catch (Exception exception)
    {
        this.WriteEventHandlerError(Res.GetString("InstallSeverityError"), "OnBeforeInstall", exception);
        throw new InvalidOperationException(Res.GetString("InstallEventException", new object[] { "OnBeforeInstall", base.GetType().FullName }), exception);
    }
    int num = -1;
    ArrayList list = new ArrayList();
    try
    {
        for (int i = 0; i < this.Installers.Count; i++)
        {
            this.Installers[i].Context = this.Context;
        }
        for (int j = 0; j < this.Installers.Count; j++)
        {
            Installer installer = this.Installers[j];
            IDictionary dictionary = new Hashtable();
            try
            {
                num = j;
                installer.Install(dictionary);
            }
            finally
            {
                list.Add(dictionary);
            }
        }
    }
    finally
    {
        stateSaver.Add("_reserved_lastInstallerAttempted", num);
        stateSaver.Add("_reserved_nestedSavedStates", list.ToArray(typeof(IDictionary)));
    }
    try
    {
        this.OnAfterInstall(stateSaver);
    }
    catch (Exception exception2)
    {
        this.WriteEventHandlerError(Res.GetString("InstallSeverityError"), "OnAfterInstall", exception2);
        throw new InvalidOperationException(Res.GetString("InstallEventException", new object[] { "OnAfterInstall", base.GetType().FullName }), exception2);
    }
} 
```

stateSaver 参数似乎在内部传递了一个字符串 int KeyValuePair 和一个字符串 IDicitionary[] KeyValuePair：

```
stateSaver.Add("_reserved_lastInstallerAttempted", num);
stateSaver.Add("_reserved_nestedSavedStates", list.ToArray(typeof(IDictionary))); 
```

我不确定它是如何管理的。也许是因为他们正在初始化 IDictionary，他们将其作为 Hashtable 传递给 base.Install 方法？

```
IDictionary dictionary = new Hashtable(); 
```

希望其中一些可以为您指明正确的方向。

# primefaces - Primefaces 日历组件仅显示月份和年份

> ID：15609517
> 
> 赞同：16
> 
> 时间：2013-03-25T07:12:59.193
> 
> 标签：primefaces

primefaces 日历组件默认获取日期。我可以只得到没有日期的月份和年份吗？

如何只获得月份和年份

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-24T14:07:38.580

我只是用 CSS 隐藏了日期选择器的表。我还必须创建自己的导航箭头，因为标准箭头不会触发`dateSelect`事件。

**标记**：

```
<p:commandButton actionListener="#{bean.decrementMonth}"
    id="navLeft" update="[your components]" icon="ui-icon-triangle-1-w" />

<h:panelGroup class="tableView">
    <p:calendar value="#{bean.selectedDate}" mode="inline" />
</h:panelGroup>

<p:commandButton actionListener="#{bean.incrementMonth}"
    id="navRight" update="[your components]" icon="ui-icon-triangle-1-e" /> 
```

**CSS**：

```
.tableView table,
.tableView a.ui-datepicker-prev,
.tableView a.ui-datepicker-next {
    display: none;
} 
```

**豆方法**：

```
public void decrementMonth() throws Exception {  
    Calendar c = Calendar.getInstance();
    c.setTime(this.selectedDate);
    c.add(Calendar.MONTH, -1);

            //... business logic to update date dependent data
}  

public void incrementMonth() throws Exception {  
    Calendar c = Calendar.getInstance();
    c.setTime(this.selectedDate);
    c.add(Calendar.MONTH, 1);

            //... business logic to update date dependent data
} 
```

**结果**（[PrimeFaces 3.4.2](http://repository.primefaces.org/org/primefaces/primefaces/3.4.2/primefaces-3.4.2.jar)）：

![PrimeFaces 日历修改为仅显示月份和年份](../Images/4384b07e47b660c359decb3dc5bb9f6a.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-25T12:46:17.433

PrimeFaces 本身没有月份年份选择器组件。因此，如果您想使用基于 jQuery 的外部组件，[请查看 jQuery.mtz.monthpicker](https://github.com/lucianocosta/jquery.mtz.monthpicker)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-11-05T04:40:22.837

这是我如何实现一个简单的月份范围选择器，如下所示：

![月份范围](../Images/d4f99d16e6e75c33adfb9496f4071ed9.png)

VoirCalendrier.xhtml 网页：

```
<h:form id="calendrierRegenererFormulaire">
   <h2><h:outputText value="#{msgs.CalendrierPlageAafficher}   "/></h2>
   <h:panelGrid columns="6">
      <h:outputLabel value="#{msgs.CalendrierDateDebut} : " for="calendrierDateDebut" />
      <p:calendar  id="calendrierDateDebut" value="#{locationsControleur.dateDebut}"
                pattern="yyyy-MM-dd" effect="slideDown" navigator="true" mode="inline" 
                lang="#{sessionControleur.localeInterface}" locale="#{sessionControleur.langue}" style="moisAnSeul" />
      <h:outputLabel value="#{msgs.CalendrierDateFin} : " for="calendrierDateFin" />
      <p:calendar  id="calendrierDateFin" value="#{locationsControleur.dateFin}"    
                pattern="yyyy-MM-dd" effect="slideDown" navigator="true" mode="inline"
                lang="#{sessionControleur.localeInterface}" locale="#{sessionControleur.langue}" style="moisAnSeul" />
      &nbsp;
      <p:commandButton value="#{msgs.CalendrierRegenerer}" update=":calendrierFormulaire" 
                 onclick="regenererCal()"/>
   </h:panelGrid>
</h:form> 
```

为了防止显示日历日，您只需在活动的 css 文件中使用以下代码将其显示属性设置为无：

```
.ui-datepicker-calendar {
    display: none;
} 
```

正如上面 Daniel Slazlay 所指出的，使用月/年下拉菜单或箭头图标导航不会更改 p:calendar 控件的内部日期值。为了实现这一点，当触发«regenerate calendar» 按钮时，将为两个 p:calendar 读取所选月份和年份下拉列表的值。使用此信息，您可以构建格式为“yyyy-MM-dd”的日期字符串，并设置 p:calendar 控件的内部隐藏值 对于月份范围的起始月份，该月的第一天返回，而对于结束月份，则返回该月的最后一天。这是通过以下 javascript 完成的：

```
function regenererCal() {
    year = $("#calendrierRegenererFormulaire\\:calendrierDateDebut .ui-datepicker-year").val();
    month = $("#calendrierRegenererFormulaire\\:calendrierDateDebut .ui-datepicker-month").val();
    $('#calendrierRegenererFormulaire\\:calendrierDateDebut_input').val(year + '-' + ('0' + (++month)).slice(-2) + '-01');

    year = $("#calendrierRegenererFormulaire\\:calendrierDateFin .ui-datepicker-year").val();
    month = $("#calendrierRegenererFormulaire\\:calendrierDateFin .ui-datepicker-month").val();
    lastDay = new Date(year, month + 1, 0); // To get last day of month, see http://stackoverflow.com/a/13572682/1431979
    $('#calendrierRegenererFormulaire\\:calendrierDateFin_input').val(lastDay.getFullYear() + '-' + ('0' + (lastDay.getMonth()+1)).slice(-2) + '-' + lastDay.getDate());

    // Check what is posted to your server
    console.log("[voirCalendrier.js]regenererCal calendrierDateDebut_input = " +     $('#calendrierRegenererFormulaire\\:calendrierDateDebut_input').val());
    console.log("[voirCalendrier.js]regenererCal calendrierDateFin_input = " +     $('#calendrierRegenererFormulaire\\:calendrierDateFin_input').val());
} 
```

在服务器端，您可以检查 setter 方法是否接收到正确的信息：

```
...
formatAAAA_MM_JJ = new SimpleDateFormat("yyyy-MM-dd HH:mm", langue);
...

public void setDateDebut(Date dateDebut) {
    this.dateDebut = dateDebut;
    logger.info("{locationsContrôleur}setDateDebut dateDebut = " + formatAAAA_MM_JJ.format(dateDebut));
}

public void setDateFin(Date dateFin) {
    this.dateFin = dateFin;
    logger.info("{locationsContrôleur}setDateFin    dateFin = " + formatAAAA_MM_JJ.format(dateFin));
} 
```

我希望这可以帮助其他人。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-07-03T02:32:32.677

Primefaces 的最新版本（7.0 版）刚刚添加了您需要的内容：`<p:datePicker />`. 它的工作原理几乎完全一样，`<p:calendar>`但可以轻松配置为仅显示月份和年份：

```
<p:datePicker value="#{managedBean.date}" view="month" 
        pattern="MM/yyyy" yearNavigator="true" yearRange="1986:2025" /> 
```

For example, when a month is selected, its value is stored in a "Date" object, which will have the value:
(If April of 2019 is selected) Mon Apr 01 00:00:00 BRT 2019
In this case, you would只需忽略日、小时、分钟等值并使用所选的月份和年份。
有关更多信息，请阅读[文档](https://primefaces.github.io/primefaces/7_0/#/components/datepicker)并查看[展示](https://www.primefaces.org/showcase/ui/input/datePicker.xhtml)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-12-01T14:07:08.783

```
 //<![CDATA[

    function showMonthYear(calendar){

        $('.ui-datepicker-calendar').css('display','none');
        $('.ui-datepicker').css('top', $('.ui-datepicker').offset().top+250);

        var month = '';
        var year = '';

        if($(calendar).val()){
            month = $(calendar).val().split('/')[0];
            year = $(calendar).val().split('/')[1];
        } else {
            month = $.datepicker.formatDate("mm", new Date());
            year = $.datepicker.formatDate("yy", new Date());
        }

        var exists = 0 != $('.ui-datepicker-year option[value='+year+']').length;
        if(!exists){

            $(".ui-datepicker-year").empty();
            var initYear = parseInt(year)-10;
            var endYear = parseInt(year)+10;
            while(initYear < endYear){

                $(".ui-datepicker-year").append($('<option>', {value:initYear, text: initYear}));
                initYear++;
            }

        }

        $('.ui-datepicker-month').val(parseInt(month)-1);
        $('.ui-datepicker-year').val(year);
        $(".ui-datepicker-month").change( function(){changeMonthYear(calendar);});
        $(".ui-datepicker-year").change( function(){changeMonthYear(calendar);});

    }

    function changeMonthYear(calendar){

        console.log('changeMonthYear');
        $('.ui-datepicker-calendar').css('display','none');
        $(".ui-datepicker-month").change( function(){changeMonthYear(calendar);});
        $(".ui-datepicker-year").change( function(){changeMonthYear(calendar);});

        var month = parseInt($('.ui-datepicker-month').val())+1; 
        if(month < 10){ month = '0'+month; } 
        $(calendar).val(month+"/"+parseInt($('.ui-datepicker-year').val()));

    }

//      ]]>
</script>

<p:calendar size="5"
    onclick="showMonthYear(this)" 
    maxlength="10" pattern="MM/yyyy" navigator="true" /> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-25T07:43:29.173

您可以在模式中设置它，在您的情况下，它将是：

```
<p:calendar id="test" value="#{bean.date}" pattern="MM.yyyy" /> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-25T08:06:42.043

我正在阅读，您无法从 Primefaces 的盒子中实现此功能。

[https://code.google.com/p/primefaces/issues/detail?id=3453](https://code.google.com/p/primefaces/issues/detail?id=3453)

这个问题很老，但是一个月前的最新评论。所以他们使用这种方法：

[jQuery UI DatePicker 仅显示月份年份](https://stackoverflow.com/questions/2208480/jquery-ui-datepicker-to-show-month-year-only)

还有一种解决方案，只使用`<p:selectOneMenu>`和使用你需要的东西。

干杯

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-01-19T16:31:29.787

您必须添加此块才能使用箭头完成导航：

```
$(".ui-datepicker-next").click( function(){changeMonthYear(calendar);});
$(".ui-datepicker-prev").click( function(){changeMonthYear(calendar);}); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-02-14T17:54:05.993

现在，primeng 日历有一个月份选择器选项，在 p 日历中使用月份作为视图选项。

```
<p-calendar [(ngModel)]="dateValue" view="month" dateFormat="mm/yy" [yearNavigator]="true" yearRange="2000:2030"></p-calendar> 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-03-23T13:46:19.553

您可以使用 p:calendar 上的 viewChange 事件来捕获下/上个月的点击。然后，您可以通过单击该月的第一天来触发 dateSelect 事件。

**JSF**：

```
<p:calendar value="#{sampleBean.month}" styleClass="monthcal" mode="inline">
    <p:ajax event="viewChange" onsuccess="$('.ui-calendar[id=\''+this.source+'\'] a.ui-state-default').filter(function(){return $(this).text()*1===1;}).click();" />
</p:calendar> 
```

要隐藏带有天数的窗格，请将以下内容添加到 css

```
.monthcal .ui-datepicker-calendar {display: none;} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-06-14T08:29:50.910

利用 Primefaces 文档中的此功能：

> 另一个方便的事件是在月份和年份更改时触发的 viewChange。org.primefaces.event.DateViewChangeEvent 的一个实例被传递给提供当前月份和年份信息的事件监听器。

制作了以下代码： **XHTML**

```
<p:panelGrid styleClass="monthYearOnly">
    <p:row>
        <p:column>FROM:</p:column>
        <p:column>
            <p:calendar id="from" mode="inline" value="#{callEntryBean.from}" navigator="true">
                <p:ajax event="viewChange" listener="#{callEntryBean.updateFrom()}"/>
            </p:calendar>
        </p:column>
        <p:column>TO:</p:column>
        <p:column>
            <p:calendar id="to" mode="inline" value="#{callEntryBean.to}" navigator="true">
                <p:ajax event="viewChange" listener="#{callEntryBean.updateTo()}"/>
            </p:calendar>
        </p:column>
        <p:column>
            <p:commandButton value="Filter" 
                action="#{callEntryBean.filterDisplay}" update=""/>
        </p:column>
    </p:row>
</p:panelGrid> 
```

**CSS**

```
.monthYearOnly .ui-datepicker-calendar{
    display: none;
} 
```

**豆**

```
public void updateFrom(){ 

    Map<String,String> requestParams = FacesContext.getCurrentInstance().getExternalContext().getRequestParameterMap();
    LOGGER.info("before: " + from);
    Calendar c = Calendar.getInstance();
    c.setTime(from);
    c.set(Calendar.MONTH, Integer.parseInt(requestParams.get("form:from_month")) - 1);
    c.set(Calendar.YEAR, Integer.parseInt(requestParams.get("form:from_year")));
    from = c.getTime();

    LOGGER.info("after: " + from);
}

public void updateTo(){ 

    Map<String,String> requestParams = FacesContext.getCurrentInstance().getExternalContext().getRequestParameterMap();
    LOGGER.info("before: " + to);
    Calendar c = Calendar.getInstance();
    c.setTime(to);
    c.set(Calendar.MONTH, Integer.parseInt(requestParams.get("form:to_month")) - 1);
    c.set(Calendar.YEAR, Integer.parseInt(requestParams.get("form:to_year"))); 
        c.set(Calendar.DATE,c.getActualMaximum(Calendar.DAY_OF_MONTH)); 
        to = c.getTime();

    Calendar now = Calendar.getInstance();
    if(c.after(now)){
        to = now.getTime();
    } 
    LOGGER.info("after: " + to);
} 
```

`month`基本上，更改或更改时的ajax触发器`year`是这里的主要功能。不幸的是，由于我无法检索`org.primefaces.event.DateViewChangeEvent`. 这似乎是一个错误，我刚刚在 Primefaces 论坛上发布了一份报告。当我在那里得到一些反馈时会更新这篇文章。

希望能帮助到你。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-05-08T14:16:44.007

你可以这样做：

**XHTML**

```
 <p:column>
                    <p:calendar id="data" locale="pt_BR" navigator="true" showOn="button"
                                pattern="yyyy-MM-dd" mode="inline" view="month"
                                maxdate="#{cadastroResumoPorUnidadeBean.dataAtual}"
                                styleClass="escolha-data"
                                value="#{cadastroResumoPorUnidadeBean.dataInicio}">
                        <p:ajax event="viewChange" process="@this"
                                listener="#{cadastroResumoPorUnidadeBean.onChangeDataInicio}"
                                update="calendario"/>
                    </p:calendar>
                </p:column> 
```

**CSS**

```
 .ui-datepicker-calendar {
    display: none;
 } 
```

**豆**

```
public void onChangeDataInicio(DateViewChangeEvent event) throws ParseException {
    dataInicio = new Date();
    SimpleDateFormat dateformat = new SimpleDateFormat("dd-M-yyyy");
    String inicio = "01-"+event.getMonth() +"-" + event.getYear();
    this.dataInicio = dateformat.parse(inicio);

} 
```

它对我有用！

# c - 使用 MPI_Scatter 进行并行搜索

> ID：15609523
> 
> 赞同：1
> 
> 时间：2013-03-25T07:13:34.320
> 
> 标签：c, mpi

我是 mpi 编程的新手。我刚刚尝试了在 c 中使用 mpi_scatter 的并行搜索程序。我想知道我的程序是否正确。但是，当我执行没有 MPI_SCATTER 的程序时，即线性搜索，与并行程序相比，执行时间更短。为什么会发生这种情况？

```
#include<stdio.h>
#include<time.h>
#include<mpi.h>
main(int argc,char *argv[])
{
clock_t tic = clock();
int rank,size,a[10]={1,2,3,4,5,6,7,8,9,10},b[10],search=6,flag=0;      
long int i;
MPI_Init(&argc,&argv);
MPI_Comm_rank(MPI_COMM_WORLD,&rank);
MPI_Comm_size(MPI_COMM_WORLD,&size);
MPI_Scatter(&a,5,MPI_INT,&b,5,MPI_INT,0,MPI_COMM_WORLD);
if(rank==0)
{
for(i=0;i<5;i++)
    {
        if(b[i]==search)
        {
            printf("\nNumber found!\t\t%d\t\t%d",rank,i);
            flag=1;
        }
        printf("\n%d\t\t%d",b[i],rank);
    }
}
if(rank==1)
{
    for(i=0;i<5;i++)
    {
        if(b[i]==search)
        {
            printf("\nNumber found!\t\t%d\t\t%d",rank,i);
            flag=1;
        }
        printf("\n%d\t\t%d",b[i],rank);
    }
}
MPI_Finalize();
clock_t toc=clock();
printf("\n\nElapsed: %f seconds\n", (double)(toc - tic) / CLOCKS_PER_SEC);
}

OUTPUT:
[Aburva@localhost mpipgms]$ /usr/lib/openmpi/bin/mpicc my_pgm2.c -o my_pgm2
[Aburva@localhost mpipgms]$ /usr/lib/openmpi/bin/mpirun -np 2 my_pgm2

1       0
2       0
3       0
4       0

Number found!       1       0

6       1
7       1
8       1
9       1
5       0

Elapsed: 0.070000 seconds
10      1

Elapsed: 0.080000 seconds 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T14:10:04.827

你的序列号没有显示吗？如果您使用 1 个进程运行此代码并且没有分散，则 b 的值将是未定义的。

您的代码似乎运行良好，生成进程和分散数据的通信开销很可能相当于串行和并行之间的微小时间差异。尝试一个包含许多进程的大型数组 - 我希望这会比串行快得多。

# ruby-on-rails - Rails删除播放器不删除

> ID：15609526
> 
> 赞同：0
> 
> 时间：2013-03-25T07:13:53.650
> 
> 标签：ruby-on-rails, ruby-on-rails-3

出现一条确认消息，询问您是否确定要删除，但随后播放器停留在那里。

这是我在控制器中的销毁方法

```
 def destroy
    Player.find(params[:id]).destroy
    redirect_to :action => 'index'
   end 
```

这是我的删除链接

```
<ul>
<% @players.each do |p| %>
<li>
    <%= link_to p.name, {:action => 'show', :id => p.id} -%> email:<%= p.email %> 
    <%= link_to 'edit', {:action => "edit",
        :id => p.id} %> 
    <%= link_to "Delete", {:action => 'destroy' ,:id => p.id}, :confirm => "Are you sure you want to delete this item?" %></li>
<% end %>
</ul>
<p><%= link_to "Add new player", {:action => 'new' }%></p> 
```

这是日志

```
Started GET "/players" for 127.0.0.1 at 2013-03-25 15:30:55 +0200
Processing by PlayersController#index as HTML
  Player Load (0.1ms)  SELECT "players".* FROM "players" 
  Rendered players/index.html.erb within layouts/application (1.0ms)
Completed 200 OK in 46ms (Views: 45.3ms | ActiveRecord: 0.1ms)
[2013-03-25 15:30:55] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T07:20:24.163

您应该指定`method: 'delete'`默认链接是`method: 'get'`.

rails router 会看到`delete`并采取相应的行动

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T07:21:10.210

将删除按钮的 link_to 格式化如下。

```
<%= link_to "Delete", path_for_delete_action(c), :method => :delete,
    :confirm => "Are you sure you want to delete this item?" %> 
```

或者只是在您当前的实现中指定**控制器**和**方法。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T07:22:36.183

2个问题：

*   `destroy`您在控制器中拼写错误。
*   您需要添加`method: :delete`到`link_to`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T07:17:43.387

你的播放器叫做`detroy`。你没有收到语法错误吗？你不是处于开发模式吗？

```
def destroy
  Player.find(params[:id]).destroy
  redirect_to :action => 'index'
end 
```

纠正你的方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-25T08:21:10.703

指定 HTTP 方法，不需要定义删除方法。

这是一个 HTTP DELETE 方法而不是 ruby​​ 方法。

```
<%= link_to "Delete", {:action => 'destroy', :id => c.id, :method => :delete}, 
        :confirm => "Are you sure you want to delete this item?" %> 
```

我不使用那种特定的语法，所以如果这不起作用，试试这个：

```
<%= link_to "Delete", player_url(c), :method => :delete,
        :confirm => "Are you sure you want to delete this item?" %> 
```

# unix - 换出等待 I/O 完成的进程

> ID：15609529
> 
> 赞同：2
> 
> 时间：2013-03-25T07:14:06.717
> 
> 标签：unix, process, scheduling

在 UNIX 中，当在内核模式下执行的进程需要读取磁盘时，它会进入睡眠状态。当磁盘读取完成时，硬件中断 CPU 并且中断处理程序唤醒进程。那么现在，当这个进程最初进入睡眠状态时，交换进程可以把这个进程交换到交换设备吗？

这个问题可能看起来很幼稚。但是我不太清楚一个进程何时执行哪些转换。任何具有非常清晰描述的页面也受到欢迎。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T07:23:47.160

是的，它可以。但是，它几乎不会，因为虚拟内存管理器的一个非常基本的实现会考虑将引用的局部性作为一种方法——并且该进程**可能**是系统中最近管理的数据。

您指出的这一事实的*退化*，即进程可能从主内存中取出并交换的情况，称为[**thrashing**](http://en.wikipedia.org/wiki/Thrashing_%28computer_science%29)。

# c++ - C++ 和预处理器宏：可变参数类型

> ID：15609533
> 
> 赞同：2
> 
> 时间：2013-03-25T07:14:27.170
> 
> 标签：c++, macros, variadic, preprocessor-directive

以下面的宏为例：

```
#define _CREATE_VAR(X1) double X1{smc::define_variable (data, X1, #X1)};
#define _CREATE_VAR2(X1,X2) double X1{smc::define_variable (data, X1, #X1)}; /
                        double X2{smc::define_variable (data, X2, #X2)}; /
#define _CREATE_VAR3(X1,X2,X3) double X1{smc::define_variable (data, X1, #X1)}; /
                        double X2{smc::define_variable (data, X2, #X2)}; /
                        double X3{smc::define_variable (data, X3, #X3)}; /
#define _CREATE_VAR4(X1,X2,X3,X4) double X1{smc::define_variable (data, X1, #X1)}; /
                        double X2{smc::define_variable (data, X2, #X2)}; /
                        double X3{smc::define_variable (data, X3, #X3)}; /
                        double X4{smc::define_variable (data, X4, #X4)}; /
#define _CREATE_VAR5(X1,X2,X3,X4,X5) double X1{smc::define_variable (data, X1, #X1)}; /
                        double X2{smc::define_variable (data, X2, #X2)}; /
                        double X3{smc::define_variable (data, X3, #X3)}; /
                        double X4{smc::define_variable (data, X4, #X4)}; /
                        double X5{smc::define_variable (data, X5, #X5)}; / 
```

有没有办法通过使用一个宏`_CREATE_VAR`而不是使用具有不同变量参数和相应名称的多个实例来简化这一点？`_CREATE_VAR`理想情况下，无论有多少参数，我都想自动调用同一个宏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T07:42:11.570

如果您不介意调用语法略有不同，则可以使用[boost.preprocessor](http://www.boost.org/doc/libs/1_53_0/libs/preprocessor/doc/index.html)：

```
#include "boost/preprocessor.hpp"

// or to not include entire preprocessor header, the following header files will do
// #include <boost/preprocessor/stringize.hpp>
// #include <boost/preprocessor/seq/for_each.hpp>

#define CREATE_ONE_VAR(maR_, maData_, maVarName) \
  double maVarName {smc::define_variable (data, maVarName, BOOST_PP_STRINGIZE(maVarName))};

#define CREATE_VAR(maSeq) \
  BOOST_PP_SEQ_FOR_EACH(CREATE_ONE_VAR, %%, maSeq) 
```

使用示例：

```
CREATE_VAR((x1)(x2)(x3))  //does the same as your original _CREATE_VAR3(x1, x2, x3) 
```

现在您可以使用从 1 到 的任意数量的变量调用它，`BOOST_PP_LIMIT_SEQ`通常为 256。

几点注意事项：我`%%`用来表示该参数未使用。你可以把任何东西放在那里（它被传递给内部宏的`maData`参数，我们不使用它）。

您不应将宏命名为以下划线后跟大写字母。根据标准，这是非法的，因为此类符号（以及包括两个连续下划线的任何符号）是为您的编译器保留的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T07:51:30.233

一种方法`FOR_EACH`是`__VA_ARGS__`在`boost`.

辅助宏：

```
// Concatenates tokens, even when the tokens are macros themselves.
#define PP_JOIN_HELPER_HELPER(_0, _1)       _0##_1
#define PP_JOIN_HELPER(_0, _1)              PP_JOIN_HELPER_HELPER(_0, _1)
#define PP_JOIN_IMPL(_0, _1)                PP_JOIN_HELPER(_0, _1)

#define PP_JOIN_2(_0, _1)                                                                   PP_JOIN_IMPL(_0, _1)
#define PP_JOIN_3(_0, _1, _2)                                                               PP_JOIN_2(PP_JOIN_2(_0, _1), _2)
#define PP_JOIN_4(_0, _1, _2, _3)                                                           PP_JOIN_2(PP_JOIN_3(_0, _1, _2), _3)
#define PP_JOIN_5(_0, _1, _2, _3, _4)                                                       PP_JOIN_2(PP_JOIN_4(_0, _1, _2, _3), _4)
#define PP_JOIN_6(_0, _1, _2, _3, _4, _5)                                                   PP_JOIN_2(PP_JOIN_5(_0, _1, _2, _3, _4), _5)
#define PP_JOIN_7(_0, _1, _2, _3, _4, _5, _6)                                               PP_JOIN_2(PP_JOIN_6(_0, _1, _2, _3, _4, _5), _6)
#define PP_JOIN_8(_0, _1, _2, _3, _4, _5, _6, _7)                                           PP_JOIN_2(PP_JOIN_7(_0, _1, _2, _3, _4, _5, _6), _7)
#define PP_JOIN_9(_0, _1, _2, _3, _4, _5, _6, _7, _8)                                       PP_JOIN_2(PP_JOIN_8(_0, _1, _2, _3, _4, _5, _6, _7), _8)
#define PP_JOIN_10(_0, _1, _2, _3, _4, _5, _6, _7, _8, _9)                                  PP_JOIN_2(PP_JOIN_9(_0, _1, _2, _3, _4, _5, _6, _7, _8), _9)
#define PP_JOIN_11(_0, _1, _2, _3, _4, _5, _6, _7, _8, _9, _10)                             PP_JOIN_2(PP_JOIN_10(_0, _1, _2, _3, _4, _5, _6, _7, _8, _9), _10)
#define PP_JOIN_12(_0, _1, _2, _3, _4, _5, _6, _7, _8, _9, _10, _11)                        PP_JOIN_2(PP_JOIN_11(_0, _1, _2, _3, _4, _5, _6, _7, _8, _9, _10), _11)
#define PP_JOIN_13(_0, _1, _2, _3, _4, _5, _6, _7, _8, _9, _10, _11, _12)                   PP_JOIN_2(PP_JOIN_12(_0, _1, _2, _3, _4, _5, _6, _7, _8, _9, _10, _11), _12)
#define PP_JOIN_14(_0, _1, _2, _3, _4, _5, _6, _7, _8, _9, _10, _11, _12, _13)              PP_JOIN_2(PP_JOIN_13(_0, _1, _2, _3, _4, _5, _6, _7, _8, _9, _10, _11, _12), _13)
#define PP_JOIN_15(_0, _1, _2, _3, _4, _5, _6, _7, _8, _9, _10, _11, _12, _13, _14)         PP_JOIN_2(PP_JOIN_14(_0, _1, _2, _3, _4, _5, _6, _7, _8, _9, _10, _11, _12, _13), _14)
#define PP_JOIN_16(_0, _1, _2, _3, _4, _5, _6, _7, _8, _9, _10, _11, _12, _13, _14, _15)    PP_JOIN_2(PP_JOIN_15(_0, _1, _2, _3, _4, _5, _6, _7, _8, _9, _10, _11, _12, _13, _14), _15)

// Chooses a value based on a condition.
#define PP_IF_0(t, f)           f
#define PP_IF_1(t, f)           t
#define PP_IF(cond, t, f)       PP_JOIN_2(PP_IF_, PP_TO_BOOL(cond))(t, f)

// Converts a condition into a boolean 0 (=false) or 1 (=true).
#define PP_TO_BOOL_0 0
#define PP_TO_BOOL_1 1
#define PP_TO_BOOL_2 1
#define PP_TO_BOOL_3 1
#define PP_TO_BOOL_4 1
#define PP_TO_BOOL_5 1
#define PP_TO_BOOL_6 1
#define PP_TO_BOOL_7 1
#define PP_TO_BOOL_8 1
#define PP_TO_BOOL_9 1
#define PP_TO_BOOL_10 1
#define PP_TO_BOOL_11 1
#define PP_TO_BOOL_12 1
#define PP_TO_BOOL_13 1
#define PP_TO_BOOL_14 1
#define PP_TO_BOOL_15 1
#define PP_TO_BOOL_16 1

#define PP_TO_BOOL(x)       PP_JOIN_2(PP_TO_BOOL_, x)

// Returns 1 if the arguments to the variadic macro are separated by a comma, 0 otherwise.
#define PP_HAS_COMMA(...)                           PP_HAS_COMMA_EVAL(PP_HAS_COMMA_ARGS(__VA_ARGS__, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0))
#define PP_HAS_COMMA_EVAL(...)                      __VA_ARGS__
#define PP_HAS_COMMA_ARGS(_1, _2, _3, _4, _5, _6, _7, _8, _9, _10, _11, _12, _13, _14, _15, _16, ...) _16

// Returns 1 if the argument list to the variadic macro is empty, 0 otherwise.
#define PP_IS_EMPTY(...)                                                        \
    PP_HAS_COMMA                                                                \
    (                                                                           \
        PP_JOIN_5                                                           \
        (                                                                       \
            PP_IS_EMPTY_CASE_,                                              \
            PP_HAS_COMMA(__VA_ARGS__),                                      \
            PP_HAS_COMMA(PP_IS_EMPTY_BRACKET_TEST __VA_ARGS__),         \
            PP_HAS_COMMA(__VA_ARGS__ (~)),                                  \
            PP_HAS_COMMA(PP_IS_EMPTY_BRACKET_TEST __VA_ARGS__ (~))      \
        )                                                                       \
    )

#define PP_IS_EMPTY_CASE_0001           ,
#define PP_IS_EMPTY_BRACKET_TEST(...)   ,

// Retrieve the number of arguments handed to a variable-argument macro.
#define PP_VA_NUM_ARGS_HELPER(_1, _2, _3, _4, _5, _6, _7, _8, _9, _10, _11, _12, _13, _14, _15, _16, N, ...)    N
#define PP_VA_NUM_ARGS(...) PP_VA_NUM_ARGS_HELPER(__VA_ARGS__, 16, 15, 14, 13, 12, 11, 10, 9, 8, 7, 6, 5, 4, 3, 2, 1)

// Correctly handles the case of 0 arguments.
#define PP_NUM_ARGS(...)        PP_IF(PP_IS_EMPTY(__VA_ARGS__), 0, PP_VA_NUM_ARGS(__VA_ARGS__))

// Pass each variable in a VA_ARGS list to a macro.
#define PP_FE_0(action, X)
#define PP_FE_1(action, X) action(X)
#define PP_FE_2(action, X, ...) action(X)PP_FE_1(action, __VA_ARGS__)
#define PP_FE_3(action, X, ...) action(X)PP_FE_2(action, __VA_ARGS__)
#define PP_FE_4(action, X, ...) action(X)PP_FE_3(action, __VA_ARGS__)
#define PP_FE_5(action, X, ...) action(X)PP_FE_4(action, __VA_ARGS__)
#define PP_FE_6(action, X, ...) action(X)PP_FE_5(action, __VA_ARGS__)
#define PP_FE_7(action, X, ...) action(X)PP_FE_6(action, __VA_ARGS__)
#define PP_FE_8(action, X, ...) action(X)PP_FE_7(action, __VA_ARGS__)
#define PP_FE_9(action, X, ...) action(X)PP_FE_8(action, __VA_ARGS__)
#define PP_FE_10(action, X, ...) action(X)PP_FE_9(action, __VA_ARGS__)
#define PP_FE_11(action, X, ...) action(X)PP_FE_10(action, __VA_ARGS__)
#define PP_FE_12(action, X, ...) action(X)PP_FE_11(action, __VA_ARGS__)
#define PP_FE_13(action, X, ...) action(X)PP_FE_12(action, __VA_ARGS__)
#define PP_FE_14(action, X, ...) action(X)PP_FE_13(action, __VA_ARGS__)
#define PP_FE_15(action, X, ...) action(X)PP_FE_14(action, __VA_ARGS__)
#define PP_FE_16(action, X, ...) action(X)PP_FE_15(action, __VA_ARGS__)

#define PP_FOR_EACH(action, ...) PP_JOIN_2(PP_FE_, PP_NUM_ARGS(__VA_ARGS__))(action, __VA_ARGS__) 
```

宏的定义：

```
#define CREATE_VAR(var)     double var{smc::define_variable(data, var, #var)};
#define CREATE_VARS(...)    PP_FOR_EACH(CREATE_VAR, __VA_ARGS__) 
```

* * *

此外，您可能需要也可能不需要使用，`#pragma GCC system_header`具体取决于您正在编译的警告 lvl 以摆脱`ISO C99 requires rest arguments to be used`. 您可以使用`#pragma GCC diagnostic ignored "-pedantic-errors"`，但显然[这是错误的](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=48914)。如果您使用的是 msvc，则必须自己弄清楚要禁用的警告。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T07:40:26.663

根据我对你的问题的理解。你应该使用省略号（...）。我建议你通过以下链接。这有助于充分理解。

[http://msdn.microsoft.com/en-us/library/ms177415(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ms177415(v=vs.80).aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T07:37:37.723

这些被称为可变参数宏，宏可以被声明为接受可变数量的参数，就像函数一样。

声明语法类似于可变参数函数：省略号“...”用于指示必须传递一个或多个参数。然而，普通编译器也允许将零参数传递给这样的宏。在宏扩展期间，宏替换列表中特殊标识符**VA_ARGS的每次出现都被传递的参数替换。**

比如C99方式，VC++编译器也支持。

```
#define FOO(fmt, ...) print(fmt, ##__VA_ARGS__)

void print(const char *fmt, ...) {

    va_list args;
    va_start(args, fmt);
    vsprintf(str, fmt, args);
        va_end(args);

        printf("%s\n", str);

} 
```

这是一个简单的用例，展示了如何使用 vardiac maco，然后我们如何正确使用变量参数列表......无需寻找额外的库！

也看看

[http://gcc.gnu.org/onlinedocs/cpp/Variadic-Macros.html](http://gcc.gnu.org/onlinedocs/cpp/Variadic-Macros.html)

# mysql - 对因别名失败的派生表执行 LEFT 联接

> ID：15609534
> 
> 赞同：2
> 
> 时间：2013-03-25T07:14:29.983
> 
> 标签：mysql, sql

SQL 新手。我正在尝试对两个派生表执行 LEFT JOIN，但我收到一个错误`Every Derived Table must have an alias.`，我确实为它们提供了别名，但它仍然给出相同的错误消息。以下是查询：

```
SELECT * FROM 
    (SELECT first_name 
        from users 
        inner join messages 
        on (users.id=messages.from_user_id)
        where to_user_id=1 
        group by first_name order by message_date) AS DATAONE 
            LEFT JOIN
                (select * from 
                    (SELECT count(message_id),u.id,first_name,message_subject,message_status 
                    from users u 
                    inner join messages m 
                    on (u.id=from_user_id)
                    where to_user_id=1 and message_status = 2 
                    group by first_name order by message_date) as datatwo) 
        on (dataone.first_name = datatwo.first_name) 
```

请指教。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T07:16:05.270

你忘了一个：

```
SELECT * 
FROM     
(
   SELECT first_name 
   from users 
   inner join messages on users.id = messages.from_user_id
   where to_user_id = 1 
   group by first_name 
   order by message_date
) AS DATAONE 
LEFT JOIN
(
   select * 
   from 
   (
       SELECT
         count(message_id),
         u.id,
         first_name,
         message_subject,
         message_status 
       from users u 
       inner join messages m on u.id = from_user_id
       where to_user_id     = 1
         and message_status = 2 
       group by first_name order by message_date
   ) as datatwo
) AS Sub   -- <------- You forgot to put an alias here
on dataone.first_name = Sub.first_name 
```

**或者：**

你忘了一个：

```
SELECT * 
FROM     
(
   SELECT first_name 
   from users 
   inner join messages  on (users.id=messages.from_user_id)
   where to_user_id=1 
   group by first_name order by message_date
) AS DATAONE 
LEFT JOIN
(
       SELECT
         count(message_id),
         u.id,
         first_name,
         message_subject,
         message_status 
       from users u 
       inner join messages m  on (u.id=from_user_id)
       where to_user_id     = 1 
         and message_status = 2 
       group by first_name
       order by message_date
) as datatwo    -- <------- You forgot to put an alias here
on (dataone.first_name = datatwo.first_name) 
```

# scala - 如何将变量传递给自定义字符串插值器

> ID：15609535
> 
> 赞同：4
> 
> 时间：2013-03-25T07:14:31.513
> 
> 标签：scala, string-interpolation

在下面的工作表中，我创建了一个自定义字符串插值器。

```
object WSLookup {

  implicit class LookupSC(val sc: StringContext) extends AnyVal {
    def lookup(args: Any*): String = {
      val strings = sc.parts.iterator
      val expressions = args.iterator
      var buf = new StringBuffer(strings.next)

      while (strings.hasNext) {
        buf append doLookup(expressions.next.toString)
        buf append strings.next
      }
      buf.toString()
    }

    def doLookup(s: String): String = {
      // Just change the string to uppercase to test.
      s.toUpperCase
    }
  }

  val x = "cool"
  val testString = "Not $x"
  lookup"How $x"

  // lookup testString //<--- See question 1
} 
```

我对此有两个问题：

1.  如何在变量上使用字符串插值器
2.  您如何向字符串插值器传递或使用附加参数。例如，我的字符串插值器用于从文件中查找变量，但我想动态指定文件名？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T08:29:16.030

1.  字符串插值在编译时转换为直接方法调用，因此您不能在变量上使用它
2.  我不确定我是否正确理解您，但您可以尝试隐式参数：

    ```
    implicit class TestInt(val sc: StringContext) extends AnyVal {
        def test(args: Any*)(implicit prefix: String): String = 
            prefix + sc.s(args:_*)
    }

    implicit val p = "> "
    val x = 1
    println(test"x = $x") 
    ```

正如@didier-dupont 建议的那样，您可以使用第二个参数列表而无需隐式：

```
implicit class TestInt(val sc: StringContext) extends AnyVal {
    def test(args: Any*)(prefix: String): String =
        prefix + sc.s(args:_*)
}
val p = "> "
val x = 1
println(test"x = $x"(p)) 
```

# objective-c - UIImageView - 在 UIScrollView 中旋转

> ID：15609536
> 
> 赞同：2
> 
> 时间：2013-03-25T07:14:35.770
> 
> 标签：objective-c, uiscrollview, rotation, uiimage

我有`UIScrollView`那个手柄`image zoomimg`。

`UIImageView`是`resized`适合`UIScrollView`（以正确的比例）并居中。

缩放效果很好（标准代码），但是在旋转时，我需要修复`imageview`以便`contentOffset`移动到新的维度。如果我根据新的旋转尺寸重新计算图像尺寸，它就不能以正确的方式工作。

我需要更新`minimum zoom`到（我用它`fit image`来）`UIScrollView``cropping`

我已经尝试了一切，但没有正确的结果。

感谢您的任何建议！

```
- (void)setImage:(UIImage*)image {
    [self setDelegate:self];

    [self.imageView setImage:image];
    [self fixToImageSize];
    [self centerImage];
}
#pragma mark Image

- (void)centerImage {
    CGFloat offsetX = (self.bounds.size.width > self.contentSize.width)?
    (self.bounds.size.width - self.contentSize.width) * 0.5 : 0.0;
    CGFloat offsetY = (self.bounds.size.height > self.contentSize.height)?
    (self.bounds.size.height - self.contentSize.height) * 0.5 : 0.0;

    self.zoomContainer.center = CGPointMake(self.contentSize.width * 0.5 + offsetX,
                                        self.contentSize.height * 0.5 + offsetY);
}

- (void)fixToImageSize {
    [self fixToImageSize:YES];
}

- (void)fixToImageSize:(BOOL)setZoomToMinZoom {
    float height    =   size.height;
float width     =   size.width;

// resize image to fix max scrollview bounds
if (width > bounds.size.width) {
    width   = bounds.size.width;
    height  = bounds.size.width / (size.width / size.height);
}

if (height > bounds.size.height) {
    height  = bounds.size.height;
    width   = bounds.size.height / (size.height / size.width);
}

CGRect imageSize    = CGRectMake(0, 0, width, height);

    [self fixImageToSize:imageSize.size];

    if (_resizeScrollViewToImage) {
        [self setFrame:CGRectMake(self.frame.origin.x, self.frame.origin.y, imageSize.size.width, imageSize.size.height)];
    } else if (!self.fillRectWithColor){
        [self fixImageZoom:setZoomToMinZoom andSize:imageSize.size];
    }
}

- (void)fixImageToSize:(CGSize)imageSize {
    [self.imageView setFrame:CGRectMake(0,0, imageSize.width, imageSize.height)];
    [self.zoomContainer setFrame:CGRectMake(0,0, imageSize.width, imageSize.height)];
}

- (void)fixImageZoom:(BOOL)setZoomToMinZoom  andSize:(CGSize)imageSize {
    float zoomOnHeight  = self.bounds.size.height / imageSize.height;
    float zoomOnWidth   = self.bounds.size.width / imageSize.width;
    float zoom          = 1;

    if (zoomOnHeight < 1) {
        zoomOnHeight *= -1;
    }

    if (zoomOnWidth < 1) {
        zoomOnWidth *= -1;
    }

    if (zoomOnHeight > zoomOnWidth) {
        zoom            = zoomOnHeight;
    } else {
        zoom            = zoomOnWidth;
    }

    NSLog(@"Zoom on height %f",zoom);

    [self setMinimumZoomScale:zoom];

    if (setZoomToMinZoom && self.zoomScale < zoom) {
        [self setZoomScale:zoom];
    }
}

- (void)rotateImageToRight {
    if (_rotateDegrees >= 360) {
        _rotateDegrees  = 0;
    }
    _rotateDegrees += 90;

    //UIImage *newImage = [self.imageView.image rotateToDegrees:_rotateDegrees];

    CGAffineTransform transform = CGAffineTransformMakeRotation(rad(_rotateDegrees));
    [self setContentOffset:CGPointMake(0, 0) animated:YES];

    [UIView animateWithDuration:0.3 animations:^{
        self.imageView.transform = transform;
    } completion:^(BOOL finished) {

        CGSize rotatedSize  = CGSizeApplyAffineTransform(self.imageView.image.size, CGAffineTransformMakeRotation(rad(_rotateDegrees)));

        if (rotatedSize.width < 0) {
            rotatedSize.width *= -1;
        }
        if (rotatedSize.height < 0) {
            rotatedSize.height *= -1;
        }

        NSLog(@"Transformed %@",NSStringFromCGSize(rotatedSize));
        float height    =   rotatedSize.height;
        float width     =   rotatedSize.width;

        // resize image to fix max scrollview bounds
        if (width > bounds.size.width) {
            width   = bounds.size.width;
            height  = bounds.size.width / (rotatedSize.width / rotatedSize.height);
        }

        if (height > bounds.size.height) {
            height  = bounds.size.height;
            width   = bounds.size.height / (rotatedSize.height / rotatedSize.width);
        }

rotatedSize    = CGSizeMake(width, height);

        NSLog(@"Transformed %@",NSStringFromCGSize(rotatedSize));

        [self.zoomContainer setFrame:CGRectMake(0,0, rotatedSize.width, rotatedSize.height)];
        [self fixImageZoom:YES andSize:rotatedSize];

        [self centerImage];
    }];    
}

#pragma mark UIScrollViewDelegate
- (UIView *)viewForZoomingInScrollView:(UIScrollView *)scrollView {
    return self.zoomContainer;
}

- (void)scrollViewDidZoom:(UIScrollView *)aScrollView {
    [self centerImage];
    if (self.onZoom) {
        self.onZoom(self);
    }
} 
```

# ruby-on-rails - 带有 Sidekiq 和 redis 的 Heroku 调度程序

> ID：15609537
> 
> 赞同：2
> 
> 时间：2013-03-25T07:14:46.750
> 
> 标签：ruby-on-rails, heroku, redis, sidekiq

我在 Rails 3.2 上有一个应用程序，它部署`Heroku`在`unicorn`. 它需要每小时执行一个作业。所以我添加`Heroku Scheduler`了heroku提供的插件。

我还集成`Sidekiq`了`Redis`我的应用程序。

以下是代码片段：

配置/初始化程序/sidekiq.rb

```
Sidekiq.configure_server do |config|
  config.redis = { url: ENV["OPENREDIS_URL"] }
end unless ENV['OPENREDIS_URL'].blank? 
```

配置/独角兽.rb

```
worker_processes 2
timeout 30
preload_app true

before_fork do |server, worker|
  # Replace with MongoDB or whatever
  if defined?(ActiveRecord::Base)
    ActiveRecord::Base.connection.disconnect!
    Rails.logger.info('Disconnected from ActiveRecord')
  end

  Rails.logger.info('Disconnected from Redis')

  sleep 1
end

after_fork do |server, worker|
  # Replace with MongoDB or whatever
  if defined?(ActiveRecord::Base)
    ActiveRecord::Base.establish_connection
    Rails.logger.info('Connected to ActiveRecord')
  end

  Sidekiq.configure_client do |config|
    config.redis = { url: ENV["OPENREDIS_URL"] }
  end unless ENV['OPENREDIS_URL'].blank?

  Rails.logger.info('Connected to Redis')
end 
```

问题是：每当执行我在 Heroku Scheduler 中提到的 rake 任务时，都会出现以下错误：

```
Redis::CannotConnectError: Error connecting to Redis on localhost:6379 (ECONNREFUSED) 
```

试图找出这里出了什么问题？

更新：附带说明，它仅发生在 Heroku 调度程序任务中。其他后台工作运行良好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T15:10:00.107

最后，通过将 Sidekiq 客户端配置添加到`sidekiq.rb`.

```
Sidekiq.configure_server do |config|
  config.redis = { url: ENV["OPENREDIS_URL"] }
end unless ENV['OPENREDIS_URL'].blank?

Sidekiq.configure_client do |config|
  config.redis = { url: ENV["OPENREDIS_URL"] }
end unless ENV['OPENREDIS_URL'].blank? 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T07:44:14.643

一种选择是将 URL 留空并将 REDIS_PROVIDER 环境变量设置为 OPENREDIS_URL。

# java - 没有选项的 JList 不起作用

> ID：15609538
> 
> 赞同：1
> 
> 时间：2013-03-25T07:14:48.657
> 
> 标签：java, swing, java-7, jlist, japplet

所以我有以下JList：

```
 String[] books_name = {"Deitel-Java How to Program", "Horstmann-Big Java", "Lewis-Software Solutions" };

JList ip_list_books = new JList( books_name ); 
```

但由于某种原因，应用程序没有构建，我使用的是 Compilr.com，它没有返回任何正确的错误。

类型 文件 行 列 描述 注意 null null Project.java 使用未经检查或不安全的操作。注意 null null 使用 -Xlint:unchecked 重新编译以获取详细信息。

我试过 -Xlint:unchecked，同样的事情出现了。

我究竟做错了什么？jlist有什么问题？

# javascript - 如何在 DOM 上触发 js 创建的触摸事件

> ID：15609539
> 
> 赞同：1
> 
> 时间：2013-03-25T07:14:51.247
> 
> 标签：javascript, dom, javascript-events

作为我正在研究的测试套件的一部分，我试图模仿用户行为。在桌面上，我通过`document.createEvent`模仿鼠标事件来做到这一点。但是，我无法让浏览器完全模仿触摸事件。

我尝试了以下方法：

```
var ev = document.createEvent('MouseEvents');
var el = document.createElement('div');

ev.initMouseEvent('touchstart');

el.addEventListener('touchstart', function(e){console.log(e, e.touches);},false);

el.dispatchEvent(ev); 
```

但浏览器从不生成`touches`集合。我认为可能`MouseEvents`是错误的事件类型，但它是我发现唯一有意义的事件类型（尝试`TouchEvents`但显然有 DOM 异常）。

我知道我可能可以模仿这种行为，但我想知道是否有真正的方法来创建服装触摸事件

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-12T07:20:26.777

var ev = document.createEvent('TouchEvent'); ev.initTouchEvent('touchstart');

# javascript - 处理 openlayers 移动标记的点击事件

> ID：15609544
> 
> 赞同：3
> 
> 时间：2013-03-25T07:15:11.930
> 
> 标签：javascript, sencha-touch, openlayers

我已经为我的 sencha touch 应用程序集成了 openlayer 地图。并且，在特定位置添加标记。我能够处理标记的单击事件，但是一旦我添加 `OpenLayers.Control.Navigation()`标记单击事件在移动设备中不起作用，但它在我的浏览器中起作用。

我想要我的地图导航和处理移动标记的点击事件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T10:00:00.177

尝试如下所示的**touchstart**事件而不是 click 事件，

```
mark.events.register( 'touchstart', placeMarker, clickMarker );

function clickMarker() {
    popup = new OpenLayers.Popup("chicken",
                                 new OpenLayers.LonLat(long,lat),
                                 new OpenLayers.Size(120,50),
                                 add,
                                 true);

    map.addPopup(popup);
} 
```

这仅适用于标记点击事件的移动设备，不适用于浏览器。也许这会对你有所帮助。

# php - 从同一列获取两个或多个图像 ID

> ID：15609550
> 
> 赞同：4
> 
> 时间：2013-03-25T07:15:37.417
> 
> 标签：php, mysql

我得到了一个 MySQL 表，其中包含一个或多个逗号分隔的数字。这些数字指的是另一个 MySQL 表中的 ID，其中还包括图像的名称。

我想选择字段“图像”包含“1,43”的行，并从第二个表中显示 ID 为 1 和 43 的两个图像。

我必须在不同的字段中有两个数字吗？我宁愿把它们放在同一个地方。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T07:18:16.813

使用`FIND_IN_SET`. 假设你有下面这样的表格，

表格1

```
+++++++++++
Images
+++++++++++
1,43 
```

表2

```
+++++++++++++++++
ImageID  Image
+++++++++++++++++
1        ....
43       .... 
```

示例查询：

```
SELECT  b.*
FROM    Table1 a
        INNER JOIN Table2 b
            ON FIND_IN_SET(b.ImageID, a.Images) > 0 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/e09c2/1)

如果你有时间修改表的结构。请做。如果您在大型数据库上执行上述查询，则执行速度会很慢。

# drupal-6 - Drupal 谷歌地图集成

> ID：15609551
> 
> 赞同：1
> 
> 时间：2013-03-25T07:15:37.930
> 
> 标签：drupal-6

我已经在 drupal 中集成了谷歌地图，但是当我创建一个新页面时，谷歌地图显示在页面中。如何将其隐藏在除联系我们之外的页面中..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T08:23:36.557

您必须将 Google 地图集成为块内容。

试试：[http://yoursite.test/admin/build/block/add](http://yoursite.test/admin/build/block/add)。在块的正文部分添加您的谷歌地图代码后，您必须检查“**仅在列出的页面上显示**”。“**页面特定可见性设置**”部分。然后在 Pages 输入框中添加 Contact us 页面相对路径。

仅供参考：按照输入框下方的说明进行操作

**现在，在您要显示 Google 地图的区域中发布该块。**. 它只会显示在“联系我们”页面上。

![在此处输入图像描述](../Images/5bddab1f25125e2d5bed0c7ff6855510.png)

# c# - 继续下载

> ID：15609558
> 
> 赞同：5
> 
> 时间：2013-03-25T07:16:14.573
> 
> 标签：c#, asp.net-mvc, http, model-view-controller, stream

这个想法很简单，我正在创建一个服务，用户可以在其中放置托管在另一个网站上的文件的直接链接，我的程序将打开一个流到该远程服务器并开始以字节为单位读取文件，然后返回每个读取的文件字节给用户。

到目前为止，我设法让它工作，这是我的代码

```
 public void Index()
    {
        //Create a stream for the file
        Stream stream = null;

        //This controls how many bytes to read at a time and send to the client
        int bytesToRead = 10000; //10000

        // Buffer to read bytes in chunk size specified above
        byte[] buffer = new Byte[bytesToRead];

        // The number of bytes read
        try
        {
            //Create a WebRequest to get the file
            HttpWebRequest fileReq = (HttpWebRequest)HttpWebRequest.Create("http://SOME-OTHER-SERVER.com/File.rar");

            //Create a response for this request
            HttpWebResponse fileResp = (HttpWebResponse)fileReq.GetResponse();

            if (fileReq.ContentLength > 0)
                fileResp.ContentLength = fileReq.ContentLength;

            //Get the Stream returned from the response
            stream = fileResp.GetResponseStream();

            // prepare the response to the client. resp is the client Response
            var resp = HttpContext.Response;

            //Indicate the type of data being sent
            resp.ContentType = "application/octet-stream";

            //Name the file 
            resp.AddHeader("Content-Disposition", "attachment; filename=\"" + "fle.rar" + "\"");
            resp.AddHeader("Content-Length", (fileResp.ContentLength).ToString());

            int length;
            do
            {
                // Verify that the client is connected.
                if (resp.IsClientConnected)
                {
                    // Read data into the buffer.
                    length = stream.Read(buffer, 0, bytesToRead);

                    // and write it out to the response's output stream
                    resp.OutputStream.Write(buffer, 0, length);

                    // Flush the data
                    resp.Flush();

                    //Clear the buffer
                    buffer = new Byte[bytesToRead];
                }
                else
                {
                    // cancel the download if client has disconnected
                    length = -1;
                }
            } while (length > 0); //Repeat until no data is read
        }
        finally
        {
            if (stream != null)
            {
                //Close the input stream
                stream.Close();
            }
        }
    } 
```

当我转到我的页面时，它会完美下载，但问题是如果我停止下载，它将不会再次恢复。

我搜索了该问题并发现必须在连接中定义一个标头“Accept-Ranges”以支持恢复。

所以我添加了那个标题但没有用。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-25T08:43:53.747

处理**[范围请求](http://www.w3.org/Protocols/rfc2616/rfc2616.html)**比这要复杂一些。通常，您需要处理请求中的`Range`和标头，并使用,和或标头`If-Range`提供正确的*206 Partial Content*响应。`Content-Range``Date``ETag``Content-Location`

[ASP.NET MVC 中的 Range Requests – RangeFileResult](https://www.tpeczek.com/2011/10/range-requests-in-aspnet-mvc.html)一文详细描述了如何创建`ActionResult`具有*Range Request*支持的 ASP.NET MVC。

在您的情况下，您还必须检查另一方（您使用的一方`fileReq`）是否支持*Range Request*。如果是，那么您可以只请求所需的部分（最好将其缓存在本地某处），但如果不是，您需要获取整个文件并寻找适当的位置（在这种情况下，您肯定希望有一个本地缓存方案）。

# c# - WP 8 中的可变尺寸环绕布局

> ID：15609559
> 
> 赞同：0
> 
> 时间：2013-03-25T07:16:15.717
> 
> 标签：c#, xaml, windows-phone-8

我正在用 c# 构建我的 Windows Phone 8 应用程序。我的应用程序中应该有如下布局。

![在此处输入图像描述](../Images/cab4688fdd86c788cc2363cdc4318067.png)

基本上我在 ListBox 中加载布局元素。排列的顺序就像 Item1, Item4, Item2.. etc.Toolkit 的 WrapPanel 并没有帮助实现这种布局。谁能告诉我在我的应用程序中进行以下布局的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-18T22:00:32.870

Kinnara wp 工具包中有一个可变大小的环绕网格控件......也许它可以提供帮助？你可以在[github 上得到它...](https://github.com/Kinnara/WPToolkit)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-25T07:45:31.277

你可以做这样的事情：

```
<Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="*" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>
            <Grid Grid.Row="0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>
                <TextBlock Grid.Column="0">Item 1</TextBlock>
                <TextBlock Grid.Column="1">Item 2</TextBlock>
            </Grid>
            <TextBlock Grid.Row="1">Item 3</TextBlock>
        </Grid> 
```

# c# - 需要更正 JOIN 查询的条件

> ID：15609560
> 
> 赞同：0
> 
> 时间：2013-03-25T07:16:15.693
> 
> 标签：c#, sql, database, sql-server-2005, join

我的表结构如下：

```
TradeNo | OrderNo | Buy_Sell | Trade_Qty | Market_Rate | Sauda_Date    | Expiry_Date

 1001      2001      Buy        100          5000       28 Feb 2013         2013-03-29 

 1002      2002      Buy        500          8000       28 Feb 2013         2013-03-29 

 1001      2001      Sell       70           5600       1 Mar 2013          2013-03-29 
```

对于每一行 TradeNo 和 OrderNo 都是唯一的组合。

我想选择所有具有唯一 TradeNo 和 OrderNo 组合的记录 [Like 1st and 3rd] ，其中 Sauda_Date 可能不同，但在 Expirydate 内并根据买入/卖出。

在此示例中，应选择以下行：

```
TradeNo | OrderNo | Buy_Sell | Trade_Qty | Market_Rate | Sauda_Date    | Expiry_Date

     1001      2001      Buy        100          5000       28 Feb 2013         2013-03-29 

     1001      2001      Sell       70           5600       1 Mar 2013          2013-03-29 
```

选择这些行是因为 Tradeno 和 OrderNo 对于这些行是唯一的，并且根据买入卖出和 sauda 日期在到期日内。

我尝试了以下查询，但没有奏效：

```
select
    t1.TradeNo,
    t1.OrderNo,
    t1.Trade_Qty,
    t1.Market_Rate,
    t1.Sauda_Date,
    t1.Expirydate
from 
    tradeFile t1,
    tradeFile t2 
where 
    t1.TradeNo=t2.TradeNo and
    t1.OrderNo=t2.OrderNo 
```

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T07:22:23.487

试试这个：

```
SELECT  t1.*
FROM tradeFile t1
INNER JOIN
(
    SELECT TradeNo, OrderNO
    FROM tradeFile
    GROUP BY TradeNo, OrderNO
    HAVING COUNT(*) > 1 
) AS t2  ON t1.TradeNo = t2.TradeNo
        AND t1.OrderNo = t2.OrderNO; 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!3/a38d1/1)

# android - 使用 Gson 时应用程序崩溃 HTC Explorer A310e

> ID：15609565
> 
> 赞同：1
> 
> 时间：2013-03-25T07:16:33.213
> 
> 标签：android, gson

我在使用 HTC Explorer A310e 时遇到此错误，但它适用于其他设备。真正的问题是什么？

```
03-25 12:23:37.553: ERROR/EmbeddedLogger(178): App crashed! Process: com.consors.android.de
03-25 12:23:37.553: ERROR/EmbeddedLogger(178): App crashed! Package: com.consors.android.de v4 (1.0.3.9)
03-25 12:23:37.553: ERROR/EmbeddedLogger(178): Error getting package label: com.consors.android.de
        java.lang.NullPointerException
        at com.htc.server.embedded.EmbeddedLogger.onHandleApplicationCrash(EmbeddedLogger.java:59)
        at com.android.server.am.ActivityManagerService.handleApplicationCrash(ActivityManagerService.java:7739)
        at android.app.ActivityManagerNative.onTransact(ActivityManagerNative.java:1033)
        at com.android.server.am.ActivityManagerService.onTransact(ActivityManagerService.java:1657)
        at android.os.Binder.execTransact(Binder.java:320)
        at dalvik.system.NativeStart.run(Native Method)
03-25 12:23:37.553: ERROR/EmbeddedLogger(178): Application Label: <ERROR>
03-25 12:23:37.553: ERROR/AndroidRuntime(538): FATAL EXCEPTION: main
        java.lang.NoSuchMethodError: com.google.gson.GsonBuilder.registerTypeAdapterFactory
        at com.consors.android.auxilary.GsonRequestResponseHandler.getInstance(GsonRequestResponseHandler.java:26)
        at com.consors.android.ui.watchlist.WebWatchList.subscribeWatchListsUrlRequest(WebWatchList.java:293)
        at com.consors.android.ui.AbsSnapShotActivity.sendWatchListRequest(AbsSnapShotActivity.java:2105)
        at com.consors.android.ui.AbsSnapShotActivity.onActivityResult(AbsSnapShotActivity.java:422)
        at com.consors.android.de.ui.SnapShotActivity.onActivityResult(SnapShotActivity.java:198)
        at android.app.Activity.dispatchActivityResult(Activity.java:4108)
        at android.app.ActivityThread.deliverResults(ActivityThread.java:3016)
        at android.app.ActivityThread.handleSendResult(ActivityThread.java:3072)
        at android.app.ActivityThread.access$2000(ActivityThread.java:135)
        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1084)
        at android.os.Handler.dispatchMessage(Handler.java:99)
        at android.os.Looper.loop(Looper.java:150)
        at android.app.ActivityThread.main(ActivityThread.java:4389)
        at java.lang.reflect.Method.invokeNative(Native Method)
        at java.lang.reflect.Method.invoke(Method.java:507)
        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:849)
        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:607)
        at dalvik.system.NativeStart.main(Native Method) 
```

这是导致异常的代码：

```
public static GsonRequestResponseHandler getInstance() {
    if (INSTANCE == null) {
        INSTANCE = new GsonRequestResponseHandler();
        gson = new GsonBuilder().registerTypeAdapterFactory(new ArrayAdapterFactory()).create();
    }
   return  INSTANCE;

} 
```

自定义 TypeAdapter 定义：

```
public class ArrayAdapterFactory implements TypeAdapterFactory {

@SuppressWarnings({ "unchecked", "rawtypes" })

public <T> TypeAdapter<T> create(final Gson gson, final TypeToken<T> type) { 
  TypeAdapter<T> typeAdapter = null;
  try {
      if (type.getRawType() == ArrayList.class)
      {  
          typeAdapter = new ArrayAdapter(
                  (Class) ((ParameterizedType) type.getType())
                          .getActualTypeArguments()[0]);
      }
  } catch (Exception e) {
      e.printStackTrace();
  }

  return typeAdapter;
 }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-07T12:09:53.000

即使这个问题是 7 个月大，这可能仍然有助于其他有相同错误的人。

一些 HTC 手机的系统类路径中有一个过时的 Gson 版本。因此，您的应用程序中包含的（较新）版本的 Gson JAR 将被忽略。

我知道两种可能的解决方案，但都不是特别方便：
1）使用旧版本的 Gson。这可能是个坏主意，因为您可能需要更高版本的一些新功能和错误修复。此外，未来的 HTC 手机可能会附带不同的 Gson 版本，因此这种方法不是很可靠。
2) 重新打包应用程序中包含的 Gson 版本，如[https://sites.google.com/site/gson/gson-on-android中所述](https://sites.google.com/site/gson/gson-on-android)

# css - 如何为数字字段应用条件 CSS？

> ID：15609567
> 
> 赞同：1
> 
> 时间：2013-03-25T07:17:04.443
> 
> 标签：css, asp.net-mvc, conditional

我有这样的场景，我有动态生成的表。表可能包含数字字段以及文本字段。我给那个表一个特定的 CSS。我想要我给出的表中有文本字段，我给出的表 `text-align: center;`中有数字字段我`text-align: right;`可以使用单个 Id/Class 应用 CSS 吗？我们可以`if condition`在 CSS 文件中识别表格字段是数字还是文本？

这是我动态生成的表

```
<table class="alignCSS">
<thead>
    <tr>

        <th>
            Doctor Name
        </th>

        <th>
            Amount
        </th>

    </tr>
    </thead>
    <tbody>
<% foreach (var item in Model) { %>
    <tr>

        <td>
            <%: Html.DisplayFor(modelItem => item.Doctor_Name) %>
        // text field here i want to apply center alignment using CSS
        </td>

        <td>
            <%: Html.DisplayFor(modelItem => item.Amount) %>

        //number field here i want to apply right alignment using CSS
        </td>

    </tr>
<% } %>
</tbody>

</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T07:31:30.340

```
<td style="text-align: center;">
    <%= Html.DisplayFor(modelItem => item.Doctor_Name) %>
</td>
<td style="text-align: right;">
    <%= Html.DisplayFor(modelItem => item.Amount) %>
</td> 
```

或者如果您已经使用这些规则定义了 CSS 类：

```
<td class="center">
    <%= Html.DisplayFor(modelItem => item.Doctor_Name) %>
</td>
<td class="right">
    <%= Html.DisplayFor(modelItem => item.Amount) %>
</td> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-12T22:50:17.120

（我知道这是一个老问题......但是）您可以从控制器传递一个类的值，以便确定字段类型的逻辑可以在那里。

# c++ - 在 C++ 中将字符串类型转换为字符

> ID：15609575
> 
> 赞同：-5
> 
> 时间：2013-03-25T07:17:22.750
> 
> 标签：c++

我有一个字符串`String s = "B"`

我想把它转换成`char cs = 'B'`

我能怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T07:18:18.930

`std::string`可以像访问数组一样访问A来访问单个字符：

```
char cs = s[0]; 
```

但要小心，就像数组一样，您可以将它与超出范围的索引一起使用！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T07:18:23.387

`string`按索引检索字符

```
std::string s = "B"; // It has at least one character

char cs = s[0]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-25T07:19:53.333

您不能*将*a强制`string`转换为 a `char`。你也不能真正*转换*它。根据定义，一个字符串包含零个或多个`char`s，所以你想要做什么充其量是不清楚的！

例如，如果你有，你会期待什么`String s = "BC"`？`'B'`? `'C'`? `4`（和的溢出总和`'B'`）`'C'`？还有什么？

* * *

相反，如果您想获取字符串中的第一个字符，则可以像访问数组一样访问它，方法是：

```
char cs = s[0]; 
```

请注意，您应该首先进行某种边界检查，以确保字符串中至少有一个字符。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-25T07:19:45.773

以下将获取的第一个字符`s`（如果字符串为空，则为 0）：

```
std::string s = ...;
char cs = 0;
if (!s.empty()) {
  cs = s[0];
} 
```

# php - 如何将未知数量的php数组值相乘？

> ID：15609584
> 
> 赞同：2
> 
> 时间：2013-03-25T07:17:58.373
> 
> 标签：php, arrays

我有一个数据库输出循环。

我需要将值相乘`$total`，将结果分配给另一个变量并输出。我该怎么做？

`$quantity`来自`$_POST`.

```
$items = implode(",",array_keys($_POST));

mysql_query('SET NAMES utf8');
$query = 'SELECT * FROM
    items
WHERE
    item_id IN (' . $items . ')';

$result = mysql_query($query, $db) or die (mysql_error($db));

echo ' 

<table id="items">
<tr class="head">
    <td>Name</td>
    <td>Cost</td>
    <td>Quantity</td>
    <td>Subtotal</td>
</tr>

';
$total = array ();  
while ($row = mysql_fetch_assoc($result)) {
echo '<tr class="targetfields">';
echo '<td>' . $row['item_name'] . '</td>

<td>' . $row['item_cost'];
//Getting item id
foreach ($_POST as $itemid=>$quantity)
{
//Displayin' quantity
if ($itemid == $row['item_id']){
    echo '</td><td><input name="' . $row['item_id'] . '" class="input-small" size="2" maxlength="2" type="text" value="';
    echo "{$quantity}";
    echo '" readonly></td>
    <td>'; $sum = ($row['item_cost'] * $quantity); echo $sum;
    echo '</td>';

    $total.= $sum;

}

}
        echo '</tr>';
}

?>  <tr>
<td class="sum" colspan="4">    Total: 
<?php 

?> </td>
</tr>
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T07:23:17.403

1.  `$total .= $sum;`这将不起作用将其更改为：`$total[] = $sum;`
2.  要获得产品的所有数组元素，请`$total`使用：while 循环之后`array_product`

IE ：

```
$items = implode(",",array_keys($_POST));

mysql_query('SET NAMES utf8');
$query = 'SELECT * FROM
    items
WHERE
    item_id IN (' . $items . ')';

$result = mysql_query($query, $db) or die (mysql_error($db));
$total = array ();  
while ($row = mysql_fetch_assoc($result)) {

$sum = ($row['item_cost'] * $quantity); echo $sum;      
$total[] = $sum;

}

echo array_product($total); 
```

参考： http: [//php.net/manual/en/function.array-product.php](http://php.net/manual/en/function.array-product.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T07:23:25.413

我认为应该是

```
$sum = 1; 
while ($row = mysql_fetch_assoc($result)) {
    $sum = $row['item_cost'] * $sum; 
}
echo $sum; 
```

# c# - 以编程方式在 Alfresco 中设置文档的属性（标题、描述）

> ID：15609585
> 
> 赞同：0
> 
> 时间：2013-03-25T07:18:06.103
> 
> 标签：c#, alfresco, cmis, dotcmis

我在将元数据添加到我在露天以编程方式创建的文档时遇到了一些麻烦。

我为此使用 dotCMIS 库。

我有以下代码：

```
IDictionary<string, object> properties = new Dictionary<string, object>();
properties[PropertyIds.Name] = "title.doc";
properties[PropertyIds.ObjectTypeId] = "cmis:document";

ContentStream contentStream = new ContentStream();
contentStream.FileName = "title.doc";
contentStream.MimeType = "application/msword";
contentStream.Length = bytes.Length;
contentStream.Stream = new MemoryStream(bytes);
IDocument doc = folder.CreateDocument(properties, contentStream, null); 
```

所以我还想设置例如标题和描述以及关键字、引用等......但我不知道如何。

我尝试过这样的事情：

```
properties["cm:title"] = "some title"; 
```

或者

```
properties["cmis:title"] = "some title"; 
```

但是还是没有成功的任何想法，怎么办呢？

注意：我也尝试从文档中返回所有属性，但那些不在那里，那么我该如何设置它们呢？

我有这个：

```
 string queryGetDoc = "SELECT * FROM cmis:document WHERE cmis:name='document.doc'";
    IItemEnumerable<IQueryResult> docResults = session.Query(queryGetDoc, false);
    IQueryResult docHit = docResults.FirstOrDefault();
    string docId = docHit["cmis:objectId"].FirstValue.ToString();

      IDocument document = session.GetObject(docId) as IDocument;

        IList<IProperty> listOfProperties = document.Properties;

        foreach(IProperty p in listOfProperties)
        {
            Console.WriteLine(p.QueryName); 
        } 
```

我收到这个：

```
cmis:isLatestMajorVersion
cmis:contentStreamLength
cmis:contentStreamId
cmis:versionSeriesCheckedOutBy
cmis:objectTypeId
cmis:versionSeriesCheckedOutId
cmis:name
cmis:contentStreamMimeType
cmis:versionSeriesId
cmis:creationDate
cmis:changeToken
cmis:versionLabel
cmis:isLatestVersion
cmis:isVersionSeriesCheckedOut
cmis:lastModifiedBy
cmis:createdBy
cmis:checkinComment
cmis:objectId
cmis:isImmutable
cmis:isMajorVersion
cmis:baseTypeId
cmis:contentStreamFileName
cmis:lastModificationDate 
```

这是否意味着文档上不存在其他道具？虽然在图形用户界面中我可以设置标题和描述，以及关键字和参考...

这是怎么回事，有人知道吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T06:57:01.747

如果您是 CMIS 新手，并且想轻松检查您的存储库包含哪些属性/选项等，那么学习和调查的最佳方式是使用[Apache Chemistry CMIS Workbench](http://chemistry.apache.org/java/developing/tools/dev-tools-workbench.html)。它是一个独立的 Java 工具，用于查询和浏览你的 repo

首先，正如评论中提到的，在 Alfresco 中创建一个带有 Title 和 Description 集的测试文件： ![特性](../Images/241fecbedd2ede68eb644ff1ee04d481.png)

接下来，启动[Apache Chemistry CMIS Workbench](http://chemistry.apache.org/java/developing/tools/dev-tools-workbench.html)，连接到您的存储库，浏览到有问题的节点，并查看标准属性：

![CMIS 道具](../Images/9d7dacf2720373707242b8b0d76bf0df.png)

最后，查看扩展，看看 Alfresco 特定部分（例如标题和描述）是如何暴露的：

![扩展](../Images/f1417b5a6e9f074acdc812422d00620d.png)

因此，您需要将 Title 和 Description 作为扩展使用，如[Alfresco Wiki 上记录的](http://wiki.alfresco.com/wiki/CMIS#Aspect_Support)那样。您可能还想查看[OpenCMIS 的 Alfresco Extension](http://code.google.com/a/apache-extras.org/p/alfresco-opencmis-extension/)，然后为 .Net 做类似的事情

# c# - 部署和/或注册失败 C#

> ID：15609593
> 
> 赞同：0
> 
> 时间：2013-03-25T07:18:30.607
> 
> 标签：c#, compact-framework, emulation, device, assembly-references

我在 C# 中有一个设备应用程序（紧凑框架）。当我调试我的解决方案时，我收到此错误：

```
Error   1   Deployment and/or registration failed with error: 0x8973190e. Error writing file   '%csidl_program_files%\hhrcv_app\system.windows.forms.dll'. Error 0x80070070: There is not enough space on the disk.
Device Connectivity Component 
```

我已经对此进行了一些研究，并尝试删除并添加参考文献。也硬重置模拟器，但仍然没有。

请帮我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T12:09:36.223

Compact Framework 应用程序不能使用 Windows 窗体 DLL。这里最有可能发生的是您直接引用桌面程序集，或者您通过依赖项。这导致 Visual Studio 检测到它需要桌面框架 DLL，然后它会尝试将其推送到设备。由于这些文件非常大，它的空间不足（尽管即使它有空间，它也无法运行）。

您需要返回您的项目并删除对任何桌面程序集或可能反过来引用它们的程序集的所有引用。

# c# - 尝试处理异常时排序捕获块

> ID：15609597
> 
> 赞同：6
> 
> 时间：2013-03-25T07:18:55.627
> 
> 标签：c#, exception, try-catch

```
try
{
    // throws IOException
}
catch(Exception e)
{
}
catch(IOException e)
{
} 
```

当`try`block throws时`IOException`，它将调用第一个`catch`块，而不是第二个。谁能解释一下？为什么它调用第一个`catch`块？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-25T07:22:37.563

来自*[try-catch（C# 参考）](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/try-catch)*；

> 在同一个 try-catch 语句中可以使用多个特定的 catch 子句。在这种情况下，catch 子句的顺序很重要，因为 catch 子句是按顺序检查的。**在不太具体的异常之前捕获更具体的异常。**如果您对 catch 块进行排序以使后面的块永远无法到达，编译器会产生错误。

你应该使用

```
try
{
    // throws IOException
}
catch(IOException e)
{
}
catch(Exception e)
{
} 
```

请注意，`Exception`类是所有异常的基类。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T07:24:27.313

异常类是所有异常的基类。因此，无论何时抛出任何类型的异常，它都会首先被第一个可以捕获任何类型异常的 catch 块捕获。

所以尝试使用`IOCException`之前`Exception`

[您可以在此处](http://msdn.microsoft.com/en-IN/library/system.io.ioexception.aspx)查看 IOCException 的层次结构

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T07:22:22.063

原因是它[`IOException`](http://msdn.microsoft.com/en-us/library/system.io.ioexception%28v=vs.71%29.aspx)派生自`Exception`，因此`IOException`实际上*是*( `Exception`" [is-a](http://en.wikipedia.org/wiki/Is-a) ") ，因此第一个`catch`处理程序匹配并正在输入。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T07:22:46.493

IOException 继承自 Exception。所有例外都可以。当你先捕获 Exception 时，你会捕获所有的异常（包括 IOException）。确保您的 catch(Exception e) 是列表中的最后一个捕获，否则所有其他异常处理将被有效忽略。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-25T07:20:10.757

它们按照您指定的顺序被捕获。在您的情况下，您应该放在`IOException`上面`Exception`。始终保持`Exception`原样。

# ios - 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[UIImage 长度]：无法识别的选择器发送到实例

> ID：15609598
> 
> 赞同：2
> 
> 时间：2013-03-25T07:19:00.613
> 
> 标签：ios, cocoa-touch, uiimageview

我试图从 NSMutableArray 加载表格视图单元格图像视图中的图像。***但是由于未捕获的异常'NSInvalidArgumentException'，***我收到警告 终止应用程序，原因：'-[UIImage 长度]：无法识别的选择器已发送到实例。

 *我尝试了该站点上发布的许多解决方案。但这对我不起作用。

这是我的代码：

```
recipe1.numbers1=[[NSMutableArray alloc] initWithObjects:
                                         [UIImage imageNamed:@"1.png"], 
                                         [UIImage imageNamed:@"2.png"], 
                                         [UIImage imageNamed:@"3.png"], 
                                         [UIImage imageNamed:@"4.png"], 
                                         [UIImage imageNamed:@"5.png"], 
                                         [UIImage imageNamed:@"6.png"], 
                                         [UIImage imageNamed:@"7.png"], 
                                         [UIImage imageNamed:@"8.png"],                                                                                                                                                                                     
                                         [UIImage imageNamed:@"9.png"], 
                                         [UIImage imageNamed:@"10.png"], nil]; 
```

这就是我访问这些图像的方式：

```
cell1.numbersImageview1.image = [UIImage imageNamed:[recipe.numbers1 objectAtIndex:indexPath.row]]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T07:21:42.447

错误是您从数组访问图像的方式，您已经在`UIImage`那里存储了一个对象，不需要（并且是错误）调用`imageNamed:`，将行更改为：

```
cell1.numbersImageview1.image = [recipe.numbers1 objectAtIndex:indexPath.row]; 
```

**编辑**

在您的代码中，您正在添加对数组元素的访问作为另一个对象，请尝试将整个代码更改为：

```
recipe1.numbers1=[[NSMutableArray alloc] initWithObjects:
                   [UIImage imageNamed:@"1.png"], [UIImage imageNamed:@"2.png"], 
                   [UIImage imageNamed:@"3.png"], [UIImage imageNamed:@"4.png"], 
                   [UIImage imageNamed:@"5.png"], [UIImage imageNamed:@"6.png"], 
                   [UIImage imageNamed:@"7.png"], [UIImage imageNamed:@"8.png"], 
                   [UIImage imageNamed:@"9.png"], [UIImage imageNamed:@"10.png"], nil];

cell1.numbersImageview1.image = [recipe.numbers1 objectAtIndex:indexPath.row]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T07:22:22.870

你做错了改变这一行：

```
cell1.numbersImageview1.image = [UIImage imageNamed:[recipe.numbers1 objectAtIndex:indexPath.row]];nil]; 
```

至

```
cell1.numbersImageview1.image = [recipe1.numbers1 objectAtIndex:indexPath.row]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T09:01:32.613

```
you try this one also once.

- (void)viewDidLoad
{
   recipe1.numbers1=[[NSMutableArray alloc] initWithObjects:@"1.png",@"2.png",@"3.png",@"4.png",@"5.png",@"6.png",@"7.png",@"8.png",@"9.png",@"10.png"];
}

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath

{
      ....................
      ....................

NSString *imagename=[recipe1.numbers1 objectAtIndexPath:indexPath.row];
cell1.numbersImageview1.image =[UIImage imageNamed:imagename];
} 
```*

# asp.net-mvc-3 - 如何用授权码交换 access_token？

> ID：15609599
> 
> 赞同：0
> 
> 时间：2013-03-25T07:19:19.520
> 
> 标签：asp.net-mvc-3, google-api, oauth-2.0, dotnetopenauth

我正在尝试通过 DotNetOpenAuth 和[Google Tasks 的 dotnet 库使用 OAuth 2.0 访问 Google Tasks](https://code.google.com/p/google-api-dotnet-client/wiki/APIs#Tasks_API)。

老实说，我对整个 OAuth 过程有点困惑，但无论如何。

我正在尝试遵循 OAuth2 游乐场在我的应用程序中经历的相同过程：即

1.  用户点击链接授权应用
2.  应用使用 DotNetOpenAuth 构造对 Google 的请求
3.  用户看到“我的应用程序想要..”屏幕并授权应用程序
4.  浏览器重定向到带有授权码的 callback_uri
5.  代码换取access_token
6.  访问令牌用于后续请求

我还不担心刷新令牌或任何事情。

所以我到了第5步并且被卡住了。我只是不知道如何用授权码交换访问令牌。

我正在调用`OAuthAuthenticator<T>`（Google Tasks lib 的一部分）上的一个方法，`LoadAccessToken`这听起来像是正确的方法，但这会导致以下错误：

> DotNetOpenAuth.OAuth2.Messages.AccessTokenAuthorizationCodeRequest 消息中缺少以下必需参数：redirect_uri

但是，正如您从我的代码中看到的那样，我在调用之前设置了回调`LoadAccessToken`。

这是我的代码：

```
public class AuthController : Controller
{
    private const string clientId = "xxxx";
    private const string secret = "xxxx";

    public ActionResult Authenticate()
    {
        UserAgentClient consumer = new UserAgentClient(GoogleAuthenticationServer.Description, clientId, secret);
        IAuthorizationState state = new AuthorizationState(new[] { TasksService.Scopes.Tasks.GetStringValue() });
        state.Callback = new Uri(Url.Action("OAuthCallback","Auth",null,"http"));
        var request = consumer.RequestUserAuthorization(state);
        return Redirect(request.ToString());
    }

    public ActionResult OAuthCallback(string code)
    {
        UserAgentClient consumer = new UserAgentClient(GoogleAuthenticationServer.Description, clientId, secret);
        OAuth2Authenticator<UserAgentClient> authenticator = new OAuth2Authenticator<UserAgentClient>(consumer, ProcessAuth);

        IAuthorizationState state = new AuthorizationState(new[] { TasksService.Scopes.Tasks.GetStringValue() });
        state.Callback = new Uri(Url.Action("OAuthSuccess", "Auth", null, "http"));
        authenticator.LoadAccessToken();

        return RedirectToAction("List","Home");
    }

    public ActionResult OAuthSuccess(string access_token)
    {
        Session["token"] = access_token;
        return RedirectToAction("List", "Home");
    }

    private IAuthorizationState ProcessAuth(UserAgentClient arg)
    {
        var state = arg.ProcessUserAuthorization(Request.Url);
        return state;
    }
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-14T04:07:59.363

这个例子可能更接近你想要做的。 [http://www.limilabs.com/blog/oauth2-gmail-imap-web-applications](http://www.limilabs.com/blog/oauth2-gmail-imap-web-applications)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T15:13:44.980

[查看文档](http://code.google.com/p/google-api-dotnet-client/wiki/OAuth2#Sample%3a_Tasks.SimpleOAuth2)以获取有关如何使用 DotNet.OAuth2 代码的示例。它有一个很好的示例向您展示如何获得 OAuth 舞蹈设置。

# c# - RadTreeNode 根据用户登录重新排序，然后按字母顺序排序

> ID：15609602
> 
> 赞同：1
> 
> 时间：2013-03-25T07:19:33.187
> 
> 标签：c#, asp.net, radtreeview

请让我知道我是否可以根据以下情况实现

因此，如果用户以 domain/dan.campbell 身份登录，那么我需要对 RadTreeView 进行排序，如下所示：

坎贝尔，丹

*   耐克
*   彪马

安斯顿，埃里克

*   阿迪达斯
*   彪马

布莱恩，埃里克

*   阿迪达斯
*   彪马

基于以下代码，当前树显示如下：

安斯顿，埃里克

*   阿迪达斯
*   彪马

布莱恩，埃里克

*   阿迪达斯
*   彪马

坎贝尔，丹

*   耐克
*   彪马

    protected void Page_Load(object sender, EventArgs e) { BuildTree(); 排序类（）；}

    ```
     //Sort all RadTreeNode in Ascending
        public void SortClass()
        {
            SortNodes(treProduct.Nodes);
        } 
    ```

    公共无效 BuildTree() { EntityCollection 集合 = GetProduct(); treProduct.Nodes.Clear();

    ```
     ArrayList pgnodes = new ArrayList();
        RadTreeNode pnode = null;
        RadTreeNode snode = null;

        foreach (ProductEntity p in collection)
        {
            pnode = null;
            foreach(RadTreeNode n in pgnodes)
            {
               if(n.Text.Trim() == p.LastName.Trim().ToUpper() + "," +" " + p.FirstName.Trim().ToUpper())
               {
                  pnode = n;
                  break;
               }   
            } 

            if(pnode != null)
            {
                RadTreeNode productNode = new RadTreeNode(p.ProductName.toString());  
                pnode.nodes.Add(productNode);  
            }
            else
            {
               RadTreeNode userNode = new RadTreeNode(p.LastName.Trim().ToUpper() + "," +" " + p.FirstName.Trim().ToUpper());

               RadTreeNode productNode = new RadTreeNode(p.ProductName.toString()); 
               userNode.Nodes.Add(productNode);
               pgnodes.Add(userNode);   
            }
        }

        foreach(RadTreeNode pg in pgnodes)
        {
            treProduct.Nodes.Add(pg);
        }
        treProduct.CollapseAllNode();

    }

     /// <summary>
        /// The sort node is called for each node level sorting the child node
        /// </summary>
        /// <param name="collection"></param>

    public void Sort(RadTreeNodeCollection collection)
    {
            RadTreeNode[] nodes = new RadTreeNode[collection.Count];
            collection.CopyTo(nodes, 0);
            Array.Sort(nodes, new NodeSorter());
            collection.Clear();
            collection.AddRange(nodes);
    }
        /// <summary>
        /// SortNodes is a recursive method enumarating and sorting all area
        /// </summary>
        /// <param name="collection"></param>

    private void SortNodes(RadTreeNodeCollection collection)
    {
            Sort(collection);

            foreach (RadTreeNode node in collection)
            {
                if (node.Nodes.Count > 0)
                {
                    SortNodes(node.Nodes);
                }

            }
     }
        /// <summary>
        /// TreeNodeCOmpare define the sorting criteria
        /// </summary>
     public class NodeSorter : IComparer
     {
            public int Compare(object x, object y)
            {
                RadTreeNode tx = (RadTreeNode)x;
                RadTreeNode ty = (RadTreeNode)y;

                //if (tx.Text.Length != ty.Text.Length)

                //    return tx.Text.Length - ty.Text.Length;
                return string.Compare(tx.Text, ty.Text);

            }

      } 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T04:24:06.313

```
 public String FirstName
    {
        get
        {
            string firstName = null;
            string userName = System.Security.Principal.WindowsIdentity.GetCurrent().Name.Substring(1);
            string[] loginNameParts = userName.Split('\\');
            string loginNameWithoutDomain = loginNameParts[1];

            var names = loginNameWithoutDomain.Split('.');

            firstName = names[0];

            return firstName;

        }
    }
    public String LastName
    {
        get
        {
            string lastName = null;
            string userName = System.Security.Principal.WindowsIdentity.GetCurrent().Name.Substring(1);
            string[] loginNameParts = userName.Split('\\');
            string loginNameWithoutDomain = loginNameParts[1];

            var names = loginNameWithoutDomain.Split('.');

            lastName = names[1];

            return lastName;

        }
    }
    public void SortClass()
    {
        SortNodes(treProduct.Nodes);

        string nameToFind = LastName.Trim().ToUpper() + "," + " " + FirstName.Trim().ToUpper();
        var node = treProduct.FindNodeByText(nameToFind);
        if (node != null)
        {
            node.Remove();
            treProduct.Nodes.Insert(0, node);
            treProduct.Nodes[0].Expanded = true;
            treProduct.Nodes[0].ExpandChildNodes();
        }
    }

  public void Sort(RadTreeNodeCollection collection)
    {
        RadTreeNode[] nodes = new RadTreeNode[collection.Count];
        collection.CopyTo(nodes, 0);
        Array.Sort(nodes, new NodeSorter());
        collection.Clear();
        collection.AddRange(nodes);
    }
    /// <summary>
    /// SortNodes is a recursive method enumarating and sorting all area
    /// </summary>
    /// <param name="collection"></param>

    private void SortNodes(RadTreeNodeCollection collection)
    {
        Sort(collection);

        foreach (RadTreeNode node in collection)
        {
            if (node.Nodes.Count > 0)
            {
                SortNodes(node.Nodes);
            }

        }
    }
    /// <summary>
    /// TreeNodeCOmpare define the sorting criteria
    /// </summary>
    public class NodeSorter : IComparer
    {
        public int Compare(object x, object y)
        {
            RadTreeNode tx = (RadTreeNode)x;
            RadTreeNode ty = (RadTreeNode)y;

            //if (tx.Text.Length != ty.Text.Length)

            //    return tx.Text.Length - ty.Text.Length;
            return string.Compare(tx.Text, ty.Text);

        }

    } 
```

# google-maps-api-2 - 有没有办法让 Google Maps JavaScript API V2 工作？

> ID：15609603
> 
> 赞同：0
> 
> 时间：2013-03-25T07:19:35.583
> 
> 标签：google-maps-api-2

我有一个使用 Gmap 模块和 google API Key V2 的 drupal 网站。Gmaps 工作正常，直到几天前。

目前，如果我尝试搜索任何位置，它会弹出“无效的 API 密钥”。

根据我的研究，自 Google Maps JavaScript API 第 2 版于 2010 年 5 月 19 日正式弃用以来，这种情况就发生了。

我相信升级到 v3 版本应该可以解决问题，但升级需要一些时间。

有没有其他方法可以让我的网站运行几个月？

Google Web Toolkit 有什么用吗？

任何帮助都非常感谢！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T11:10:11.300

您遇到的问题与弃用通知无关。V2 将在下个月被弃用，所以在那之前你应该不会有任何问题，但显然不要等到那时。我也有一个带有 V2 API 映射的 drupal 站点，所以我会花一些时间来迁移它。

无效的 API 密钥消息可能是因为如消息所述，您的某个文件中有错误的 API 密钥。也许您用于搜索的地图来自具有不同密钥的不同代码？检查出...

# android - 如何注册长按AutoCompleteTextView下拉菜单中显示的列表项？

> ID：15609608
> 
> 赞同：2
> 
> 时间：2013-03-25T07:19:51.070
> 
> 标签：android, android-listview, autocompletetextview

我想在 AutoCompleteTextView 的下拉菜单中长按显示的列表项做一些事情。在这种情况下，是否可以注册长按？如果可能的话，请提供一些参考。

任何帮助或指导将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T07:47:45.657

显示结果`ListView`的弹出窗口隐藏在`AutoCompleteTextView`类中，因此无法直接访问它。但是您应该能够通过创建自定义适配器并在适配器方法中的行视图上`AutoCompleTextView`设置 a来实现长按。`OnLongClickListener``getView()`

# ruby - 从方法创建并返回对象

> ID：15609609
> 
> 赞同：0
> 
> 时间：2013-03-25T07:19:52.683
> 
> 标签：ruby

我只是想知道是否有更漂亮的方法可以在方法中创建对象并返回它？

这是我的代码：

```
class Example
   def Example.load_from_file(filename)
     example = Example.new
     # some code
     example
   end
end 
```

可能有一些 Ruby 习语让我不要`example`在方法的末尾写。您可以重构此代码还是现在已经足够了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T07:22:08.507

假设您拥有`example`它是可变的，并且您在“某些代码”中继续对其应用破坏性方法：

```
class Example
  def Example.load_from_file(filename)
    Example.new.tap do |example|
      # some code
    end
  end
end 
```

# codeigniter - CodeIgniter 不加载页面

> ID：15609613
> 
> 赞同：3
> 
> 时间：2013-03-25T07:20:08.107
> 
> 标签：codeigniter

我有一个使用 codeigniter 开发的 Web 应用程序，它在我以前的服务器上运行良好，现在我更改了我的服务器，当我尝试运行 Web 应用程序时，只有一个空白屏幕。

当我试图打开现有链接[http://mydomain.com/MyProject1/](http://mydomain.com/MyProject1/) 这是一个有效的链接，但它显示我一个空白页。

当我试图打开另一个现有链接时 mydomain.com/MyProject1/login/ 这也是一个有效的链接，但它只显示一个空白页面。

只是为了测试我尝试了一些错误的链接[http://mydomain.com/MyProject1/test](http://mydomain.com/MyProject1/test) 它显示 404 错误。

所以，一定是代码运行良好但页面没有显示。它只显示空白页。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T08:46:13.680

好的，在 index.php 中显示错误（它在根目录中）并将 if 条件更改为：

```
if (defined('ENVIRONMENT'))
{
    switch (ENVIRONMENT)
    {
        case 'development':
            error_reporting(E_ALL ^ E_NOTICE);
        break;

        case 'testing':
        case 'production':
            // error_reporting(0);
            error_reporting(E_ALL ^ E_NOTICE);
        break;

        default:
            exit('The application environment is not set correctly.');
    }
} 
```

然后出现错误。

顺便提一句。如果您正在使用它，请尝试为您的应用程序设置正确的 htaccess 路径，例如，如果在您的本地主机上它是：

```
RewriteEngine On

RewriteBase /projects/mywebsite/ 
```

在服务器上将其更改为：

```
RewriteEngine On

RewriteBase / 
```

当然，如果您不使用子域等。

顺便提一句。如果您收到诸如已发送标头之类的错误或类似的错误，则需要将文件另存为**"utf-8 without BOM"**而不是**"utf-8"**。或者文件开头可能有一些字符，您需要在文本编辑器中删除这些字符。

检查您正在使用的文件，例如语言文件、视图、控制器等，并检查它们是如何编码的。如果它们是 utf-8，则将编码更改为没有 BOM 的 utf-8。它可以在几乎所有文本编辑器中完成，例如 Notepad++ 或 Sublime。然后将这些文件重新上传到您的服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T08:45:54.937

尝试

```
http://mydomain.com/MyProject1/index.php/test 
```

可能是您缺少 index.php，或者转到“config.php”并根据您的应用程序编辑基本 url 和索引 url，例如

```
$config['base_url'] = 'http://mydomain.com/MyProject1/';
$config['index_page'] = '';//Keep this as empty 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T08:53:45.310

检查您是否在 codeigniter 中启用了 gzip。如果您启用了 gzip 并且您正在回显内容，那么您可能会看到空白页。

尝试使用 codeigniter 的输出类。

如果不是这种情况，请尝试使用@MehrdadDastgir 的建议

```
ini_set('display_errors', 1); 
```

看看它抛出了什么错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T08:35:04.883

尝试回显警告，让您知道页面未加载的原因。转到 CI 文件夹根目录中的 index.php 页面并插入以下内容：

```
ini_set('display_errors', 1); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-25T08:49:06.987

如果您有权访问**.htaccess**文件，请在第一行粘贴以下代码：

`php_flag display_startup_errors on`

`php_flag display_errors on`

`php_flag html_errors on`

服务器通常比**ini_set** php 函数更好地侦听 htaccess **php_flag 。**我第一次安装 Codeigniter 时遇到了同样的问题。

# android - 在 Google Maps Api v2 中添加多个标记

> ID：15609615
> 
> 赞同：5
> 
> 时间：2013-03-25T07:20:10.330
> 
> 标签：android, google-maps-android-api-2

我已经成功地展示了谷歌地图 api v2。我想为我的位置添加标记。

根据文档，我一次只能添加一个标记，或者必须使用循环来添加多个。

```
@Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.demo_v2);

        googleMap = ((SupportMapFragment)getSupportFragmentManager().findFragmentById(R.id.map)).getMap();
        googleMap.setMapType(GoogleMap.MAP_TYPE_HYBRID);

        googleMap.setMyLocationEnabled(true);

        Marker marker = googleMap.addMarker(new MarkerOptions().position(ROMA).title("Hello").snippet("Nice Place").icon(BitmapDescriptorFactory.fromResource(R.drawable.ic_launcher)));
} 
```

我的问题是，如果我有一组 10 个 LatLon 值和自定义图像，我如何在 API v2 中显示多个标记。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-21T09:22:05.193

```
for (int i = 0; i < yourArrayList.size(); i++) {
    double lati=Double.parseDouble(pins.get(i).latitude);
    double longLat=Double.parseDouble(pins.get(i).longitude);
    MAP.addMarker(new MarkerOptions().position(
       new LatLng(lati,longLat))
                  .title(pins.get(i)
                  .pinname)
                  .snippet(pins.get(i).address));
} 
```

# c - 从arm程序集中调用c函数时如何传递长长类型的参数？

> ID：15609622
> 
> 赞同：4
> 
> 时间：2013-03-25T07:20:42.120
> 
> 标签：c, assembly, arm

我有一个 C 函数女巫，看起来像：

```
int foo(int a, long long b); 
```

我试图从 arm 组件中调用它，但我不知道如何处理第二个参数（`long long`）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T08:15:57.213

[ARM EABI/AAPCS](http://infocenter.arm.com/help/topic/com.arm.doc.ihi0042d/IHI0042D_aapcs.pdf)规定 64 位类型应该在 2 个彼此相邻的寄存器中传递，并且第一个寄存器必须是偶数。在小端模式下，高位部分位于编号较高的寄存器中，而低位部分位于编号较低的寄存器中。在大端模式下，反之亦然。

这两个要求都是为了适应 strd/ldrd 指令，它可以在一条指令中保存两个寄存器。

因此，要在小端模式下为您的示例传递 0x0123456789abcdef，您必须按以下方式加载寄存器：

```
mov r0, a
// R1 is unused
ldr r2, =0x89abcdef
ldr r3, =0x01234567 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T14:02:38.450

只要问编译器它会告诉你一切......

```
int foo ( int a, long long b );

int bar  ( void )
{
    return(foo(0xAABB,0x1122334455667788LL));
} 
```

我更喜欢编译然后反汇编而不是编译成asm，更容易阅读。

```
arm-none-eabi-gcc -c -O2 fun.c -o fun.o
arm-none-eabi-objdump -D fun.o

fun.o:     file format elf32-littlearm

Disassembly of section .text:

00000000 <bar>:
   0:   e92d4008    push    {r3, lr}
   4:   e59f001c    ldr r0, [pc, #28]   ; 28 <bar+0x28>
   8:   e28f3010    add r3, pc, #16
   c:   e893000c    ldm r3, {r2, r3}
  10:   ebfffffe    bl  0 <foo>
  14:   e8bd4008    pop {r3, lr}
  18:   e12fff1e    bx  lr
  1c:   e1a00000    nop         ; (mov r0, r0)
  20:   55667788    strbpl  r7, [r6, #-1928]!   ; 0x788
  24:   11223344    teqne   r2, r4, asr #6
  28:   0000aabb            ; <UNDEFINED> instruction: 0x0000aabb
  2c:   e1a00000    nop         ; (mov r0, r0) 
```

答案是 r0 包含第一个参数，r1 跳过，r2/r3 包含 long long。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T07:41:09.080

（注意：错误答案；不能删除，因为评论包含信息）

根据 ARM ABI，第二个参数通过寄存器`r1`和`r2`. 如果你的机器是小端的，把低端`r1`和高端输入`r2`（我不知道这是否与大端机器相反）。因此，要调用带有参数的函数，例如 0x123456789abcd：

```
MOV r0, ... (the value of "a")
MOV r1, #0x6789abcd
MOV r2, #0x12345
... (call the function) 
```

# sql - 使用内连接删除行

> ID：15609624
> 
> 赞同：0
> 
> 时间：2013-03-25T07:20:49.213
> 
> 标签：sql, sql-server

我想使用单个查询从 4 个表中删除数据。

```
delete e1,e2,e3,e4 FROM sas.RolesInMenuOperations as e1 INNER JOIN
sas.RolesMenus as e2 ON e1.RoleMenuId = e2.Id INNER JOIN
sas.RolesInModules as e3 ON e2.RolesInModulesId = e3.Id INNER JOIN
sas.Roles as e4 ON e3.RoleId = e4.Id
where e4.Id=5 
```

这是我到目前为止所做的。我正在引用[此](http://www.codeproject.com/Questions/275195/SQL-DELETE-Query-with-INNER-JOIN)链接是否可以使用联接从 4 个表中删除数据。如何实现这一点，或者我想编写 4 个不同的查询？

尽管此查询正常工作

```
delete e1 FROM sas.RolesInMenuOperations as e1 INNER JOIN
sas.RolesMenus as e2 ON e1.RoleMenuId = e2.Id INNER JOIN
sas.RolesInModules as e3 ON e2.RolesInModulesId = e3.Id INNER JOIN
sas.Roles as e4 ON e3.RoleId = e4.Id
where Roles.Id=5 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T07:26:43.850

所以您正在寻找 MS SQL 语法？有点像这行得通：

```
DELETE table 
FROM table a
INNER JOIN table_b b on b.id = a.id
WHERE [my filter condition] 
```

所以如果你想删除更多的表行，我认为你需要创建更多的语句并触发它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T07:53:15.047

您不能在 SQL Server 中使用单个查询删除多个表数据。最好的概念是在相关表中提供 FK 并使用**ON DELETE CASCADE**或使用单个查询从多个表中删除。

# android - Web 视图未在 android 中显示 html 数据

> ID：15609629
> 
> 赞同：1
> 
> 时间：2013-03-25T07:21:19.400
> 
> 标签：android, android-layout, android-widget, android-webview, android-view

我正在开发一个 Android 应用程序，但遇到了一个奇怪的问题。

我有两个按钮：button1 和 button2

单击按钮时，我正在从资产文件夹加载不同的 html 文件。

这在所有版本的模拟器上都可以正常工作，但在具有 Android 4.0 或更高版本的真实设备上，执行奇怪的行为。

对于 button2，它工作正常并在 Web 视图中动态显示 html 页面，但是在单击 button1 时，它在 Web 视图中显示一个白页。

我很惊讶为什么会发生这种情况，而 xml 和活动除了它们的 ID 和名称之外具有相同的代码。

我已经尝试了很多东西并进行了搜索，但不明白为什么它会发生在一个而不是另一个？

**button1 的 XML 是：**

```
<LinearLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/xxx">

            <WebView

                android:id="@+id/webViewButton1"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:background="@android:color/transparent"
                android:layerType="software" />

</LinearLayout> 
```

**button2 的 XML 是：**

```
<LinearLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/xxxx">

            <WebView
                android:id="@+id/webViewButton2"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:background="@android:color/transparent"
                android:layerType="software" />
</LinearLayout> 
```

**Button1 活动代码：**

```
@SuppressLint("DefaultLocale")
public class Button1Activity extends Activity {
    private WebView webView;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.activity_button1);
        savedInstanceState = getIntent().getExtras();

        String sign = null;
        sign = savedInstanceState.getString("button1");

        webView = (WebView) findViewById(R.id.webViewButton1);
        webView.setBackgroundColor(0);
        webView.loadUrl("file:///android_asset/" + sign + ".html");
    }
} 
```

**Button2 活动代码：**

```
@SuppressLint("DefaultLocale")
public class Button1Activity extends Activity {
    private WebView webView;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.activity_button2);
        savedInstanceState = getIntent().getExtras();

        String sign = null;
        sign = savedInstanceState.getString("button2");

        webView = (WebView) findViewById(R.id.webViewButton2);
        webView.setBackgroundColor(0);
        webView.loadUrl("file:///android_asset/" + sign + ".html");
    }
} 
```

请指导我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T07:27:50.610

我解决了我的问题。

其实我是把上面的线性布局放在滚动视图下滚动线性布局。当我删除这个 Scroll 视图时，我的 web 视图开始正常工作，它会在填充 web 视图高度时自动向内容添加垂直滚动。

所以我从中了解到，**WebView 在滚动视图下无法正常工作。**

# jquery - jquery倒计时变量未解析

> ID：15609630
> 
> 赞同：0
> 
> 时间：2013-03-25T07:21:23.147
> 
> 标签：jquery, variables, countdown

所以变量没有被正确解析，我不明白为什么。我正在使用 jquery 倒计时插件。这是代码

```
var dateCD = '2013, 11 - 1, 01, 08';

function countdownLeft() {
$('.countdownLeft').countdown({ 
layout:'<div class="countdownBlock cdFirst"><div class="cdTop">Race</div><div class="cdBottom">01</div> </div><div class="countdownBlock"><div class="cdTop">{dl}</div><div class="cdBottom">{dnn}</div> </div>  <div class="countdownBlock"><div class="cdTop">{hl}</div><div class="cdBottom">{hnn}</div> </div><div class="countdownBlock"><div class="cdTop">{ml}</div><div class="cdBottom">{mnn}</div> </div> <div class="countdownBlock cdLast"><div class="cdTop">{sl}</div><div class="cdBottom">{snn}</div> </div>',
     until: new Date(dateCD)});
}; 
```

并且我得到的输出显示与上面完全相同，因此变量没有被拾取。这不是范围问题，只是为了仔细检查我从函数内部记录了正确的变量结果。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T07:56:53.190

您的日期格式似乎不可解析。尝试使用以下格式：

```
new Date();
new Date(value);
new Date(dateString);
new Date(year, month, day [, hour, minute, second, millisecond]); 
```

查看下面的链接以了解有关日期功能的更多信息

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)

此外，它还有助于指定您正在使用的插件。尝试将链接附加到您获得插件的位置。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T07:43:48.150

`new Date()`不像那样工作 - 鉴于您使用的是“月 - 1”，看起来您已经阅读了文档并误解了它们。

使用“month - 1”时，您*应该*将这些字段作为*单独*的数字参数提供，这也恰好是最可靠的使用方式`new Date()`：

```
until: new Date(2013, 11 - 1, 1, 8) 
```

如果您的输入确实是一个字符串，您最好手动将其解析为其组件字段，然后`new Date()`使用所需的参数进行调用。

# objective-c - NSString 到 NSNumber 的一部分

> ID：15609632
> 
> 赞同：-1
> 
> 时间：2013-03-25T07:21:39.993
> 
> 标签：objective-c

我需要将 x 和 y 坐标输入到自定义对象中，输入格式为“x,y”

我目前将输入存储为 an`NSString`并且需要将整数从中取出并放入单独的`NSNumbers`. 如果有另一种更容易存储输入的方法，请解释。

我需要将 x 和 y 单独存储`NSNumbers`，这也需要考虑 x 和 y 是否为 2 位数字。IE`"23,4"`

谁能帮忙？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T07:27:55.713

利用[`-[NSString componentsSeparatedByString:]`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/doc/uid/20000154-componentsSeparatedByString_)

```
NSArray *numericComponents = [string componentsSeparatedByString:@","];
NSArray *numbers = [numericComponents map:^id(NSString *object) {
                       return @([object integerValue]);
                    }]; 
```

`map`这只是我添加的一个类别方法`NSArray`：

```
@implementation NSArray (JRAdditions)

- (NSArray *)map:(id(^)(id))block {
    if([self count] == 0 || block == nil) return self;

    NSMutableArray *mapped = [NSMutableArray new];
    NSArray        *copy   = [self copy];

    for(id obj in copy) {
        id mappedObject = block(obj);

        if(mappedObject) {
            [mapped addObject:mappedObject];
        }
    }

    return [mapped copy];
}

@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T07:29:12.177

```
NSString *str=@"23,4";

NSArray *array=[str componentsSeparatedByString:@","];

NSNumber *xNum=@([array[0] integerValue]);
NSNumber *yNum=@([array[1] integerValue]); 
```

要检查它们是否是两位数：

```
if ([xNum integerValue]>9 && [xNum integerValue]<100) {
    NSLog(@"x is 2 digits");
}
else{

}
if([yNum integerValue]>9 && [yNum integerValue]<100) {
    NSLog(@"y is 2 digits");
}
else{

} 
```

# javascript - 错误放置不允许 jquery 验证工作

> ID：15609633
> 
> 赞同：0
> 
> 时间：2013-03-25T07:21:41.983
> 
> 标签：javascript, jquery-validate, errorplacement

这是我第一次在网站中使用 javascript。我对该语言的理解非常低，并且非常依赖教程和阅读其他人的问题/解决方案。

我有一个使用表格格式格式化的 HTML 表单。我碰巧在表单中也有一些单选按钮，一旦我包含`errorPlacement`在 javascript 代码中，表单的验证就不会发生。我需要错误消息不要破坏我的单选按钮的文本，希望出现在选项之前或之后的顶部。

如果我取出`errorPlacement`代码，验证（“此字段是必需的”消息出现在默认位置）正常工作。

请查看我的代码，如果我遗漏任何内容，请告诉我。我觉得它很简单，比如逗号或括号，我尝试了一些解决方法，但似乎没有任何效果。

```
<script type="text/javascript">
    $(document).ready(function(){
        $("#quoteform").validate({
            errorPlacement: function(error, element) {
                 error.insertBefore(element);   
             },          
        }),
    })                        
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T09:29:38.323

你有一些语法错误 - 应该是

```
$(document).ready(function () {
    $("#quoteform").validate({
        errorPlacement: function (error, element) {
            error.insertBefore(element);
        }
    });
}) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-25T07:33:56.737

错误是一个字符串。所以`error.insertBefore`没有意义。尝试`$("<div>").insertBefore (element).text (error)`

# java - Tomcat中受密码保护的应用程序

> ID：15609646
> 
> 赞同：5
> 
> 时间：2013-03-25T07:22:23.393
> 
> 标签：java, tomcat, deployment, web.xml

我正在使用（JSP + Servlet）开发一个 Web 应用程序，并且我已将其`Tomcat 7.0.33`用作`web container`.

所以我的要求是tomcat中的每个应用程序都将受到`password`保护，就像`manager application`在tomcat中受到保护一样。

到目前为止，我已经完成了以下工作：

**服务器.xml**

```
<Realm className="org.apache.catalina.realm.MemoryRealm" /> 
```

**tomcat-users.xml**

```
<tomcat-users>
    <role rolename="tomcat"/>
    <role rolename="manager-gui"/>
    <role rolename="role1" />

    <user username="tomcat" password="tomcat" roles="role1,tomcat,manager-gui"/>
    <user username="role1" password="tomcat" roles="role1"/>
</tomcat-users> 
```

**web.xml**

```
<security-role>
    <role-name>role1</role-name>
</security-role>
<security-role>
    <role-name>tomcat</role-name>
</security-role>

<security-constraint>
<web-resource-collection>
    <web-resource-name>webappname</web-resource-name>
    <url-pattern>/*</url-pattern>
</web-resource-collection>
<auth-constraint>
    <role-name>role1</role-name>
    <role-name>tomcat</role-name>
</auth-constraint>
</security-constraint>

<login-config>
<auth-method>BASIC</auth-method>
<realm-name>webappname</realm-name>
</login-config> 
```

当任何人通过应用程序路径打开应用程序时它工作正常（它要求用户名和密码，并且应用程序接受`role1`或`tomcat`进行身份验证）。

但问题是假设如果我以`tomcat`拥有所有角色的用户身份登录，并且当显示管理器屏幕时列出了服务器上部署的所有应用程序，那么如果我尝试打开`mywebapplication`它，它会再次询问用户名和密码。

我的问题是，如果我已将所有密码分配`roles`给用户`tomcat`，那么如果我登录为，为什么它会要求输入密码`tomcat`？有没有办法避免这种情况？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T07:26:08.593

```
<login-config>
<auth-method>BASIC</auth-method>
<realm-name>webappname</realm-name>
</login-config> 
```

基本身份验证凭据组织在“安全领域”中。如果您为所有应用程序指定不同的 Realm-Names，浏览器将提示每个应用程序。尝试为所有这些名称使用相同的名称（如果这是您想要的）。

# java - 为什么我的测试文件系统只在内存中工作？

> ID：15609648
> 
> 赞同：2
> 
> 时间：2013-03-25T07:22:23.357
> 
> 标签：java, filesystems, zip

我正在研究程序文件系统的概念。我正在用 Java 编写（使用 JDK 7 u17）。

首先，我构建了一些教程，这些教程展示了如何使用 FileSystemProvider 类创建基于 zip 的文件系统。

当我执行代码时，我让它执行与示例类似的任务，即从我的桌面复制文本文件并将其放入 zip 文件中。问题是一旦它复制了文件，它并没有将其写入 zip 文件，它似乎将文件留在内存中，当程序终止时该文件被破坏。

问题是我不明白为什么，据我所知，一切看起来都井井有条，但显然不是！

哦，是的，目录也是如此。如果我告诉文件系统创建一个新目录，它只会在内存中创建它，而 zip 文件中没有任何内容。

无论如何，这是我的工作代码；

```
import java.io.IOException;
import java.net.URI;
import java.nio.file.FileSystem;
import java.nio.file.FileSystems;
import java.nio.file.Files;
import java.nio.file.Path;
import java.nio.file.Paths;
import java.util.HashMap;
import java.util.Map;

public class Start {

    public static void main(String[] args) {

        Map <String, String> env = new HashMap<>();
        env.put("create", "true");
        env.put("encoding", "UTF-8");

        FileSystem fs = null;

        try {
            fs = FileSystems.newFileSystem(URI.create("jar:file:/Users/Ian/Desktop/test.zip"), env);
        } catch (IOException e) {
            e.printStackTrace();
        }

        Path externalTxtFile = Paths.get("/Users/Ian/Desktop/example.txt");
        Path pathInZipFile = fs.getPath("/example.txt");

        try {
            Files.createDirectory(fs.getPath("/SomeDirectory"));
        } catch (IOException e) {
            e.printStackTrace();
        }

        if (Files.exists(fs.getPath("/SomeDirectory"))) {
            System.out.println("Yes the directory exists in memory.");
        } else {
            System.out.println("What directory?");
        }       

        // Why is the file only being copied into memory and not written out the jar/zip archive?
        try {
            Files.copy(externalTxtFile, pathInZipFile);
        } catch (IOException e) {
            e.printStackTrace();
        }

        // The file clearly exists just before the program ends, what is going on?
        if (Files.exists(fs.getPath("/example.txt"))) {
            System.out.println("Yes the file has been copied into memory.");
        } else {
            System.out.println("What file?");
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-26T11:35:52.637

我只是想补充一点。也许您找到的示例不完整（我无法检查，因为您没有引用它）但在所有示例中，我发现 FileSystem 实例已正确关闭。

FileSystem 抽象类实现了 Closeable，因此调用 close() 方法（自动）将 try 留在以下代码中：

```
try (final FileSystem fs = FileSystems.newFileSystem(theUri, env)) {
    /* ... do everything you want here ; do not need to call fs.close() ... */
} 
```

[http://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html](http://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html)

# java - 使用 AES 解密时出现 Stringindexoutofboundsexception

> ID：15609660
> 
> 赞同：1
> 
> 时间：2013-03-25T07:23:25.973
> 
> 标签：java, encryption, aes

我使用 AES 作为加密技术。在解密我的加密字符串时，我面临着这个`StringIndexOutOfBoundsException String index out of range : -3`。你能告诉我为什么我会面对这个吗？是我使用的相关`BASE64`编码吗？

**解密代码**：

```
Key key = generateKey();
Cipher c = Cipher.getInstance(ALGO);
c.init(Cipher.DECRYPT_MODE, key);
String salt = "some salt";
String dValue = null;
String valueToDecrypt = encryptedData;
for (int i = 0; i < 2; i++) {
    byte[] decordedValue = Base64.decodeBase64(valueToDecrypt);
    byte[] decValue = c.doFinal(decordedValue);
    dValue = new String(decValue).substring(salt.length());
    valueToDecrypt = dValue;
} 
```

**加密代码**：

```
 Key key = generateKey();
    Cipher c = Cipher.getInstance(ALGO);
    c.init(Cipher.ENCRYPT_MODE, key);
    String salt = "some salt";
    String valueToEnc = null;
    String eValue = Data;
    for (int i = 0; i < 2; i++) {
        valueToEnc = salt + eValue;
        byte[] encValue = c.doFinal(valueToEnc.getBytes(UNICODE_FORMAT));
        eValue =new String(Base64.encodeBase64(encValue));
    } 
```

**参考**：[http ://www.digizol.com/2009/10/java-encrypt-decrypt-jce-salt.html](http://www.digizol.com/2009/10/java-encrypt-decrypt-jce-salt.html)

# javascript - Node.js 重新加载模块错误

> ID：15609664
> 
> 赞同：0
> 
> 时间：2013-03-25T07:23:51.957
> 
> 标签：javascript, node.js, require, long-running-processes

我正在以这种方式重新加载模块：

```
require('./module.js');             // require the module
delete require.cache('/module.js'); // delete module from cache
require('/module.js');              // re-require the module 
```

但是如果模块包含这样的东西就会出现问题：

```
setInterval(function(){ 
    console.log('hello!'); 
}, 1000); 
```

每次我重新加载模块时`setInterval`都会调用一个新模块，但最后一个模块没有关闭。

有什么方法可以了解每个模块的（长时间）运行功能，以便我可以在再次需要之前停止它们？或者有什么建议我怎样才能完成这项工作？

*我对任何疯狂的想法持开放态度。*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T09:31:38.380

这只是一个疯狂的猜测，但您可能能够在[域中](http://nodejs.org/api/domain.html)加载模块。

完成后使用 domain.dispose() 清除计时器：

> dispose 方法销毁一个域，并尽最大努力清理与该域关联的所有 IO。流被中止、结束、关闭和/或销毁。**计时器被清除。** 不再调用显式绑定的回调。因此引发的任何错误事件都将被忽略。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T07:35:20.163

我只需设置对间隔的引用并公开一个方法以停止它，如下所示：

```
var interval = setInterval(function () {
    console.log('hello');
}, 1000);

var clearInt = clearInterval(interval); 
```

我不认为你可以挂钩任何事件，因为你只是删除一个引用。如果它不再存在，它会重新加载。在执行此操作之前，请调用 clearInt 函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T07:39:52.053

`IntervalRegistry`您可以在主应用程序中 创建一个：

```
global.IntervalRegistry = {
    intervals : {},
    register  : function(module, id) {
      if (! this.intervals[module])
      {
        this.intervals[module] = [];
      }
      this.intervals[module].push(id);
    },
    clean     : function(module) {
      for (var i in this.intervals[module])
      {
        var id = this.intervals[module][i];
        clearInterval(id);
      }
      delete this.intervals[module];
    }
  }; 
```

在您的模块中，您将注册在那里创建的间隔：

```
// module.js
IntervalRegistry.register(__filename, setInterval(function() {
  console.log('hello!');
}, 1000)); 
```

当需要清理时，调用这个：

```
var modulename = '/full/path/to/module.js'; // !!! see below
IntervalRegistry.clean(modulename);
delete require.cache[modulename]; 
```

请记住，模块以其完整文件名存储在`require.cache`.

# html - 用于删除请求方法的 Spring REST

> ID：15609668
> 
> 赞同：1
> 
> 时间：2013-03-25T07:24:20.587
> 
> 标签：html, spring-mvc, spring-boot

我的控制器中有以下方法

```
@RequestMapping(value = "processPurchase/{poid}", method = RequestMethod.DELETE)
public String processOrder(@PathVariable int poid) {
    // do some processing
    return acceptPurchaseForm;
} 
```

我的 HTML

```
<form id="purchase-list-form" class="form-horizontal" action="/MyNewApp/processPurchase/" method="post">
<input type="hidden" name="_method" value="delete">
<input type="hidden" name="poid" value=""> 
```

有了上面我仍然得到以下错误

`WARN : org.springframework.web.servlet.PageNotFound - Request method 'DELETE' not supported`

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T07:38:43.847

首先，我假设您在 web.xml 中配置了[HiddenHttpMethodFilter](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/web/filter/HiddenHttpMethodFilter.html)。需要将您的`_method`with value delete 转换为 DELETE RequestMethod

其次，`poid`在请求正文中传递，但在您的控制器中，您希望它在 URL 本身中传递。这可以解释为什么 Spring 无法映射请求。

编辑1：

要传入`poid`URL，您必须在生成 HTML 时将其包含在表单操作中。这取决于您的视图技术（我使用 Freemarker），但您需要执行以下操作：

```
<form action="/MyNewApp/processPurchase/${poid}" method="post"> 
```

假设 poid 被写入绑定到您的视图的模型中。

# android - java.lang.IllegalStateException：取消期间相机移动发生在用户交互期间

> ID：15609671
> 
> 赞同：0
> 
> 时间：2013-03-25T07:24:32.597
> 
> 标签：android, google-maps, google-maps-android-api-2

我已经使用谷歌地图 api v2 大约一个月了。除了问题跟踪器中报告的其他错误之外，我还遇到了以下奇怪的错误。

java.lang.IllegalStateException：相机在取消期间移动，这发生在我用于 animateCamera 方法的 CancelableCallback 中。异常追溯到用户触摸事件。我相信发生这种情况是因为用户在调用 onFinish/onCancel 时正在与地图进行交互，现在这种情况并不经常发生，但它很烦人。

反正有这个问题吗？我将不胜感激您能提供的任何帮助。

这是一个完整的代码：

```
public void moveMapToSearchMarker(
        final T fmMarker,
        final FriendlyMapGoogleMapMarkerClickListener fmMarkerClickListener,
        float zoomLevel) {
    CameraUpdate camUpdate = CameraUpdateFactory.newLatLngZoom(fmMarker
            .getMarker().getPosition(), zoomLevel);
    getGoogleMap().animateCamera(camUpdate, new CancelableCallback() {
        @Override
        public void onFinish() {
            setMarkerOnSearchComplete(fmMarker, fmMarkerClickListener);

        }

        @Override
        public void onCancel() {
            setMarkerOnSearchComplete(fmMarker, fmMarkerClickListener);
        }
    });
}

private void setMarkerOnSearchComplete(T fmMarker,
        FriendlyMapGoogleMapMarkerClickListener fmMarkerClickListener) {
    if (!fmMarker.getMarker().isVisible())
        fmMarker.getMarker().setVisible(true);
    for (T lstFmMarker : this)
        lstFmMarker.setSearched(false);
    fmMarker.setSearched(true);
    createOrUpdateSearchMarker(fmMarker.getMarker().getPosition());
    fmMarkerClickListener.onFriendlyMapMarkerClick(fmMarker, this, true);
}
public void createOrUpdateSearchMarker(LatLng searchMarkerPos) {

    if (searchRadiusCircle == null) {
        CircleOptions cOpts = new CircleOptions();
        int strokeColor = getSearchRadiusColor() + 0xEE000000;
        cOpts.center(searchMarkerPos).fillColor(getSearchRadiusColor())
                .strokeColor(strokeColor).radius(12).strokeWidth(2F);
        searchRadiusCircle = getGoogleMap().addCircle(cOpts);
    } else {
        searchRadiusCircle.setVisible(true);
        searchRadiusCircle.setCenter(searchMarkerPos);
    }

}

public <T extends FriendlyMapMarker> boolean onFriendlyMapMarkerClick(
        T fmMarker, FriendlyMapMarkerList fmMarkerList,
        boolean isOnCancelableCallback) {
    FriendlyMapMarkerAndList fmMapMarkerAndList = new FriendlyMapMarkerAndList<FriendlyMapMarker, FriendlyMapMarkerList>();
    fmMapMarkerAndList.fmMarker = fmMarker;
    fmMapMarkerAndList.fmMarkerList = fmMarkerList;
    return handleMarkerClick(fmMapMarkerAndList, isOnCancelableCallback);
}
private boolean handleMarkerClick(
        FriendlyMapMarkerAndList fmMapMarkerAndList,
        boolean isOnCancelableCallback) {
    if (fmMapMarkerAndList == null)
        return false;
    final FriendlyMapMarker fmMarker = fmMapMarkerAndList.fmMarker;
    Marker marker = fmMarker.getMarker();
    final FriendlyMapMarkerList fmMarkerList = fmMapMarkerAndList.fmMarkerList;
    if (fmMarker != null) {

        if (fmMarker.getClass().equals(FriendlyMapPlaceMarker.class)) {
            balloonActions.setCurrentFmMarker(fmMarker);
            balloonActions.setPlaceLikeButtonVisibility();

            CancelableCallback onCameraCompleteMove = new CancelableCallback() {
                @Override
                public void onFinish() {
                    openActionBalloon(fmMarker, fmMarkerList);
                }

                @Override
                public void onCancel() {
                    openActionBalloon(fmMarker, fmMarkerList);

                }
            };
            LatLng camPos = Utils.getRoundedLatLng(fmMarkerList
                    .getGoogleMap().getCameraPosition().target, 1e5);
            LatLng markerPos = Utils.getRoundedLatLng(marker.getPosition(),
                    1e5);
            if (!Utils.latLngEqualsByCoords(camPos, markerPos)
                    && !isOnCancelableCallback)
                fmMarkerList.getGoogleMap()
                        .animateCamera(
                                CameraUpdateFactory.newLatLng(fmMarker
                                        .getLatLng()), 350,
                                onCameraCompleteMove);
            else
                onCameraCompleteMove.onFinish();
            fmMarker.getMarker().showInfoWindow();
            LoadAsyncBalloonExtendedStatisticsResult loadAsyncBalloonStatisticsResult = new LoadAsyncBalloonExtendedStatisticsResult(
                    activity, marker,
                    (FriendlyMapPlaceMarkerList) fmMarkerList);
            loadAsyncBalloonStatisticsResult
                    .execute(((FriendlyMapPlaceMarker) fmMarker)
                            .getKnownLocationID());
            return true;
        }
        if (fmMarker.getClass().equals(FriendlyMapDiscussionMarker.class)) {
            balloonActionsDiscussion.setCurrentFmMarker(fmMarker);
            final FriendlyMapDiscussionMarker fmdMarker = (FriendlyMapDiscussionMarker) fmMarker;
            LatLng camPos = Utils.getRoundedLatLng(fmMarkerList
                    .getGoogleMap().getCameraPosition().target, 1e5);
            LatLng markerPos = Utils.getRoundedLatLng(fmdMarker.getMarker()
                    .getPosition(), 1e5);
            if (!Utils.latLngEqualsByCoords(camPos, markerPos)
                    && !isOnCancelableCallback) {
                CameraUpdate camUpdate = CameraUpdateFactory
                        .newLatLng(fmdMarker.getMarker().getPosition());
                fmMarkerList.getGoogleMap().animateCamera(camUpdate, 350,
                        new CancelableCallback() {
                            @Override
                            public void onFinish() {
                                openWindowInfoActionBalloon(fmMarkerList,
                                        fmdMarker);
                            }

                            @Override
                            public void onCancel() {
                                openWindowInfoActionBalloon(fmMarkerList,
                                        fmdMarker);

                            }
                        });
            } else {
                openWindowInfoActionBalloon(fmMarkerList, fmdMarker);
            }

            return true;
        }
        if (fmMarker.getClass().equals(FriendlyMapThoughtMarker.class)) {
            balloonActionThought.setCurrentFmMarker(fmMarker);
            balloonActionThought.setDeleteButtonVisiblity();
            final FriendlyMapThoughtMarker fmtMarker = (FriendlyMapThoughtMarker) fmMarker;
            LatLng camPos = Utils.getRoundedLatLng(fmMarkerList
                    .getGoogleMap().getCameraPosition().target, 1e5);
            LatLng markerPos = Utils.getRoundedLatLng(fmtMarker.getMarker()
                    .getPosition(), 1e5);
            if (!Utils.latLngEqualsByCoords(camPos, markerPos)
                    && !isOnCancelableCallback) {
                CameraUpdate camUpdate = CameraUpdateFactory
                        .newLatLng(fmtMarker.getMarker().getPosition());
                fmMarkerList.getGoogleMap().animateCamera(camUpdate, 350,
                        new CancelableCallback() {
                            @Override
                            public void onFinish() {
                                openWindowInfoActionBalloon(fmMarkerList,
                                        fmtMarker);
                            }

                            @Override
                            public void onCancel() {

                                openWindowInfoActionBalloon(fmMarkerList,
                                        fmtMarker);
                            }
                        });
            } else {
                openWindowInfoActionBalloon(fmMarkerList, fmtMarker);
            }
            return true;
        }
    }
    return false;
}
private void openWindowInfoActionBalloon(
        FriendlyMapMarkerList fmMarkerList, FriendlyMapMarker fmMarker) {
    Marker m = fmMarker.getMarker();
    m.showInfoWindow();
    openActionBalloon(fmMarker, fmMarkerList);
}
private void openActionBalloon(FriendlyMapMarker marker,
        FriendlyMapMarkerList fmMarkerList) {

    Projection proj = fmMarkerList.getGoogleMap().getProjection();
    Point markerScreenPoint = proj.toScreenLocation(marker.getMarker()
            .getPosition());

    if (marker.getClass().equals(FriendlyMapPlaceMarker.class)) {
        balloonActionsDiscussion.setVisibility(View.INVISIBLE);
        balloonActionThought.setVisibility(View.INVISIBLE);
        setBalloonDimension(balloonActions, markerScreenPoint);

    } else if (marker.getClass().equals(FriendlyMapDiscussionMarker.class)) {

        balloonActions.setVisibility(View.INVISIBLE);
        balloonActionThought.setVisibility(View.INVISIBLE);
        setBalloonDimension(balloonActionsDiscussion, markerScreenPoint);

    } else if (marker.getClass().equals(FriendlyMapThoughtMarker.class)) {
        balloonActionsDiscussion.setVisibility(View.INVISIBLE);
        balloonActions.setVisibility(View.INVISIBLE);
        setBalloonDimension(balloonActionThought, markerScreenPoint);
    }

}
private void setBalloonDimension(View ballonActionView,
        Point markerScreenPoint) {
    FrameLayout.LayoutParams params = (FrameLayout.LayoutParams) ballonActionView
            .getLayoutParams();
    int marginX = markerScreenPoint.x - (ballonActionView.getWidth() / 2);
    int marginY = markerScreenPoint.y;
    params.setMargins(marginX, marginY, -marginX, -marginY);
    params.gravity = Gravity.NO_GRAVITY;
    ballonActionView.setLayoutParams(params);
    ballonActionView.setVisibility(View.VISIBLE);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T21:03:58.363

我建议将带有堆栈跟踪的错误发布到跟踪器。

```
at com.google.android.gms.maps.GoogleMap.animateCamera(Unknown Source)
at com.saipex.friendly_map.map_view_related_v2.FriendlyMapGoogleMapMarkerClickListener.handleMarkerClick(FriendlyMapGoogleMapMarkerClickListener.java:259)
at com.saipex.friendly_map.map_view_related_v2.FriendlyMapGoogleMapMarkerClickListener.onFriendlyMapMarkerClick(FriendlyMapGoogleMapMarkerClickListener.java:133)
at com.saipex.friendly_map.map_view_related_v2.model.FriendlyMapMarkerList.setMarkerOnSearchComplete(FriendlyMapMarkerList.java:163)
at com.saipex.friendly_map.map_view_related_v2.model.FriendlyMapMarkerList.access$0(FriendlyMapMarkerList.java:155)
at com.saipex.friendly_map.map_view_related_v2.model.FriendlyMapMarkerList$1.onCancel(FriendlyMapMarkerList.java:181) 
```

看起来你正在尝试一些被禁止的东西：在 onCancel 中为相机设置动画。该代码将向我们展示更多信息。

# python - 将列表的元素拆分为列表，然后再次拆分它们

> ID：15609673
> 
> 赞同：0
> 
> 时间：2013-03-25T07:24:34.587
> 
> 标签：python

这是我正在阅读的原始文本的示例：

```
ID: 00000001
SENT: to do something
to    01573831
do    02017283
something    03517283

ID: 00000002
SENT: just an example
just    06482823
an    01298744
example    01724894 
```

现在我正在尝试将其拆分为列表列表。

最顶层列表：通过 ID 所以这里有 2 个元素（完成）

下一级：在每个 ID 内，用换行符分隔

最后一级：在每一行中拆分单词和ID，对于以ID或SENT开头的行，是否拆分无关紧要。在单词和它们的 ID 之间是一个缩进 (\t)

当前代码：

```
f=open("text.txt","r")
raw=list(f)
text=" ".join(raw)
wordlist=text.split("\n \n ") #split by ID
toplist=wordlist[:2] #just take 2 IDs 
```

编辑：我打算将这些词交叉引用到另一个文本文件以添加它们的词类，这就是为什么我要求提供列表列表的原因。

脚步：

1）使用 .append() 为每个单词添加单词类

2) 使用 "\t".join() 将一条线连接在一起

3) 使用 "\n".join() 连接一个 ID 中的不同行

4) "\n\n".join() 将所有的ID连接成一个字符串

输出：

```
ID: 00000001
SENT: to do something
to    01573831    prep
do    02017283    verb
something    03517283    noun

ID: 00000002
SENT: just an example
just    06482823    adverb
an    01298744    ind-art
example    01724894    noun 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T08:04:49.450

Thorsten 答案的更 Pythonic 版本：

```
from collections import namedtuple

class Element(namedtuple("ElementBase", "id sent words")):
    @classmethod
    def parse(cls, source):
        lines = source.split("\n")
        return cls(
            id=lines[0][4:],
            sent=lines[1][6:],
            words=dict(
                line.split("\t") for line in lines[2:]
            )
        )

text = """ID: 00000001
SENT: to do something
to\t01573831
do\t02017283
something\t03517283

ID: 00000002
SENT: just an example
just\t06482823
an\t01298744
example\t01724894"""

elements = [Element.parse(part) for part in text.split("\n\n")]

for el in elements:
    print el
    print el.id
    print el.sent
    print el.words
    print 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T08:29:05.360

我不确定你需要什么输出，但你可以调整它以满足你的需要（这使用[`itertools`石斑鱼配方](http://docs.python.org/2/library/itertools.html#recipes)）：

```
>>> from itertools import izip_longest
>>> def grouper(n, iterable, fillvalue=None):
        "Collect data into fixed-length chunks or blocks"
        # grouper(3, 'ABCDEFG', 'x') --> ABC DEF Gxx
        args = [iter(iterable)] * n
        return izip_longest(fillvalue=fillvalue, *args)

>>> with open('text.txt') as f:
        print [[x.rstrip().split(None, 1) for x in g if x.rstrip()]
               for g in grouper(6, f, fillvalue='')]

[[['ID:', '00000001'], ['SENT:', 'to do something'], ['to', '01573831'], ['do', '02017283'], ['something', '03517283']], 
 [['ID:', '00000002'], ['SENT:', 'just an example'], ['just', '06482823'], ['an', '01298744'], ['example', '01724894']]] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T08:21:00.020

这对你有用吗？：

顶级（你已经做了）

```
def get_parent(text, parent):
    """recursively walk through text, looking for 'ID' tag"""

    # find open_ID and close_ID
    open_ID = text.find('ID')
    close_ID = text.find('ID', open_ID + 1)

    # if there is another instance of 'ID', recursively walk again
    if close_ID != -1:
        parent.append(text[open_ID : close_ID])
        return get_parent(text[close_ID:], parent)
    # base-case 
    else:
        parent.append(text[open_ID:])
        return 
```

第二级：用换行符分割：

```
def child_split(parent):
    index = 0
    while index < len(parent):
        parent[index] = parent[index].split('\n')
        index += 1 
```

第三级：拆分“ID”和“SENT”字段

```
def split_field(parent, index):
if index < len(parent):
    child = 0
    while child < len(parent[index]):
        if ':' in parent[index][child]:
            parent[index][child] = parent[index][child].split(':')
        else:
            parent[index][child] = parent[index][child].split()
        child += 1
    return split_field(parent, index + 1)
else:
    return 
```

一起运行：

```
def main(text):
    parent = []
    get_parent(text, parent)
    child_split(parent)
    split_field(parent, 0) 
```

结果非常嵌套，也许可以清理一下？或者也许 split_fields() 函数可以返回一个字典？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T07:53:16.750

我将最顶部拆分的每个部分都视为“对象”。因此，我将创建一个具有与每个部分对应的属性的类。

```
class Element(object):
    def __init__(self, source):
        lines = source.split("\n")
        self._id = lines[0][4:]
        self._sent = lines[1][6:]
        self._words = {}
        for line in lines[2:]:
            word, id_ = line.split("\t")
            self._words[word] = id_

    @property
    def ID(self):
        return self._id

    @property
    def sent(self):
        return self._sent

    @property
    def words(self):
        return self._words

    def __str__(self):
        return "Element %s, containing %i words" % (self._id, len(self._words))

text = """ID: 00000001
SENT: to do something
to\t01573831
do\t02017283
something\t03517283

ID: 00000002
SENT: just an example
just\t06482823
an\t01298744
example\t01724894"""

elements = [Element(part) for part in text.split("\n\n")]

for el in elements:
    print el
    print el.ID
    print el.sent
    print el.words
    print 
```

在主代码（一行，列表理解）中，文本仅在每个双换行符处拆分。然后，所有逻辑都被推迟到`__init__`方法中，使其非常本地化。

使用类还为您提供了 的好处`__str__`，允许您控制对象的打印方式。

您还可以考虑将最后三行重写`__init__`为：

```
self._words = dict([line.split("\t") for line in lines[2:]]) 
```

但我写了一个简单的循环，因为它似乎更容易理解。

使用类还可以为您提供

# spring - 是否可以选择性地注入相同自动代理弹簧类的代理？

> ID：15609674
> 
> 赞同：0
> 
> 时间：2013-03-25T07:24:35.133
> 
> 标签：spring

我有一个安全和事务注释的 spring bean，spring 自动代理这个类，用于 txn 和安全，并在任何地方自动连接。是否可以选择性地将此类的代理注入另一个 bean，即 cud 有 4 种情况：1\. 未代理的自动装配 2\. 使用安全代理的自动装配 3\. 使用 txn 代理的自动装配 4\. 两者都自动装配

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T08:18:03.083

[可以使用不同的名称](http://www.mkyong.com/spring/spring-auto-proxy-creator-example/)手动将 bean 连接到代理（请参阅[ProxyFactoryBean](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/aop/framework/ProxyFactoryBean.html)）

# c# - 在 MouseOver 上不使用 xaml 调整图像大小以适合给定的高度和宽度 wpf 窗口

> ID：15609675
> 
> 赞同：0
> 
> 时间：2013-03-25T07:24:36.423
> 
> 标签：c#, wpf, image, xaml, mouseevent

我需要增加我的图像的`Height`和，这些图像以水平方向放置，以便图像跨越我的整个面板，并在我的给定尺寸下，这是无法实现的。如果我在我的 xaml 属性中遗漏任何数学或我的方法有任何问题，请告诉我。提前致谢。`Width``OnMouseOver``StackPanel``WPF window`

以下是我的 xaml，稍后是我的输出图像。

```
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="245"/>
    </Grid.RowDefinitions>

    <StackPanel x:Name="TitleSlidesPanel" Grid.Row="0" 
                Orientation="Horizontal">
        <StackPanel Orientation="Vertical"
            Height="245"
                Width="400"   >

            <Image x:Name="img1" VerticalAlignment="Top" 
               HorizontalAlignment="Left"
              RenderOptions.BitmapScalingMode="HighQuality"
               Style="{StaticResource imageStyle}"
               MouseDown="Img1_OnMouseDown"
               MouseUp="Img1_OnMouseUp">
            </Image>
            <CheckBox x:Name="Chkbox1"
                Content="Image1"
                      Width="100"
                       HorizontalContentAlignment="Left"
                HorizontalAlignment="Left"
                VerticalContentAlignment="Center"
                FontSize="12" 
                Margin="0,5,0,0"
                Foreground="Black"
                Height="20">
            </CheckBox>
        </StackPanel>
        <StackPanel Orientation="Vertical"
                  Height="245"
                Width="400" 
                   Margin="-400,0,0,0" >

            <Image x:Name="Img2" VerticalAlignment="Top" 
               HorizontalAlignment="Right"
               RenderOptions.BitmapScalingMode="HighQuality"
               Style="{StaticResource imageStyle}"
               MouseDown="Img2_OnMouseDown"
               MouseUp="Img2_OnMouseUp"    >
            </Image>
            <CheckBox x:Name="Chkbox2"
                Content="Image2"
                FontSize="12" 
                Margin="0,5,135,0"
                HorizontalContentAlignment="Right"
                HorizontalAlignment="Right"
                VerticalContentAlignment="Center"
                Foreground="Black"
                Height="20">
            </CheckBox>
        </StackPanel>
  </StackPanel>
</Grid>

 <Style x:Key="imageStyle" TargetType="{x:Type Image}">
    <Setter Property="Height" Value="100" />
    <Setter Property="Width" Value="200" />
    <Style.Triggers>
        <Trigger Property="IsMouseOver" Value="True">
            <Setter Property="Height" Value="245" />
            <Setter Property="Width" Value="400" />
         </Trigger>
    </Style.Triggers>
</Style> 
```

![默认视图](../Images/d6107a478d1889a864c9ae36f08654fb.png)

![OnMouseOverFirstImage](../Images/c353513d4ac4720b581bbd062e9322cd.png)

![OnMouseOverSecondImage](../Images/3404692d9dccb58545b02cf505a06e74.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T08:07:16.277

尝试将您的风格放在堆栈面板或网格的资源中。

```
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="245"/>
    </Grid.RowDefinitions>
<Grid.Resources>
    <Style x:Key="imageStyle" TargetType="{x:Type Image}">
        <Setter Property="Height" Value="100" />
        <Setter Property="Width" Value="200" />
        <Style.Triggers>
            <Trigger Property="IsMouseOver" Value="True">
                <Setter Property="Height" Value="245" />
                <Setter Property="Width" Value="400" />
             </Trigger>
        </Style.Triggers>
    </Style>
</Grid.Resources>
   <StackPanel x:Name="TitleSlidesPanel" Grid.Row="0" 
                Orientation="Horizontal">
        <StackPanel Orientation="Vertical"
            Height="245"
                Width="400"   >

            <Image x:Name="img1" VerticalAlignment="Top" 
               HorizontalAlignment="Left"
              RenderOptions.BitmapScalingMode="HighQuality"
               Style="{StaticResource imageStyle}"
               MouseDown="Img1_OnMouseDown"
               MouseUp="Img1_OnMouseUp">
            </Image>
            <CheckBox x:Name="Chkbox1"
                Content="Image1"
                      Width="100"
                       HorizontalContentAlignment="Left"
                HorizontalAlignment="Left"
                VerticalContentAlignment="Center"
                FontSize="12" 
                Margin="0,5,0,0"
                Foreground="Black"
                Height="20">
            </CheckBox>
        </StackPanel>
        <StackPanel Orientation="Vertical"
                  Height="245"
                Width="400" 
                   Margin="-400,0,0,0" >

            <Image x:Name="Img2" VerticalAlignment="Top" 
               HorizontalAlignment="Right"
               RenderOptions.BitmapScalingMode="HighQuality"
               Style="{StaticResource imageStyle}"
               MouseDown="Img2_OnMouseDown"
               MouseUp="Img2_OnMouseUp"    >
            </Image>
            <CheckBox x:Name="Chkbox2"
                Content="Image2"
                FontSize="12" 
                Margin="0,5,135,0"
                HorizontalContentAlignment="Right"
                HorizontalAlignment="Right"
                VerticalContentAlignment="Center"
                Foreground="Black"
                Height="20">
            </CheckBox>
        </StackPanel>
  </StackPanel>
</Grid> 
```

# html - HTML：表格和脚本

> ID：15609676
> 
> 赞同：1
> 
> 时间：2013-03-25T07:24:36.603
> 
> 标签：html

我想编写这样的脚本，一旦单击一个按钮，它必须向现有表添加一个新行

```
 <!DOCTYPE html> 
    <html> 
    <head> 
    	<script>
    		function myFunction() { 
    			<tr><td></td></tr>
    		}
    	</script> 
    </head> 
    <body> 
    	<table border="1" id="mytable"> 
    		<tr> <td>row 1, cell 1</td> <td>row 1, cell 2</td> </tr> 
    		<tr> <td>row 2, cell 1</td> <td>row 2, cell 2</td> </tr> 
    	</table> 
    	<button onclick="myFunction()">Try it</button> 
    </body
    </html>
```

请帮助我怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T07:30:10.800

尝试使用 javascript`insertRow()`方法。

参考：[http ://www.w3schools.com/jsref/met_table_insertrow.asp](http://www.w3schools.com/jsref/met_table_insertrow.asp)

工作示例：[http ://www.w3schools.com/jsref/tryit.asp?filename=tryjsref_table_insertrow](http://www.w3schools.com/jsref/tryit.asp?filename=tryjsref_table_insertrow)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T07:33:32.773

试试这样的功能：

```
 function myFunction() { 
        str=document.getElementById('mytable').innerHTML;
        newstr='<tr><td><select><option value="ACT">ACT</option> <option value="NSW">NSW</option> <option value="NT">NT</option> <option value="QLD">QLD</option> <option value="SA">SA</option> <option value="TAS">TAS</option> <option value="VIC">VIC</option></select></td><td>row n cell 2</td></tr>';
        document.getElementById('mytable').innerHTML=str+newstr;
    }
```

```
 <table border="1" id="mytable"> 
        <tr> <td>row 1, cell 1</td> <td>row 1, cell 2</td> </tr> 
        <tr> <td>row 2, cell 1</td> <td>row 2, cell 2</td> </tr> 
    </table> 
    <button onclick="myFunction()">Try it</button>
```

**小提琴：http:** [//jsfiddle.net/QYg5a/1](http://jsfiddle.net/QYg5a/1)

您也可以尝试[http://viralpatel.net/blogs/dynamically-add-remove-rows-in-html-table-using-javascript/](http://viralpatel.net/blogs/dynamically-add-remove-rows-in-html-table-using-javascript/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T07:36:29.410

```
 function addRow(tableID) { 

            var table = document.getElementById(tableID); 

            var rowCount = table.rows.length; 
            var row = table.insertRow(rowCount); 

            var cell1 = row.insertCell(0); 
            var element1 = document.createElement("input"); 
            element1.type = "checkbox"; 
            element1.name="chkbox[]"; 
            cell1.appendChild(element1); 

            var cell2 = row.insertCell(1); 
            cell2.innerHTML = rowCount + 1; 

            var cell3 = row.insertCell(2); 
            var element2 = document.createElement("input"); 
            element2.type = "text"; 
            element2.name = "txtbox[]"; 
            cell3.appendChild(element2); 

        } 
```

```
 <BODY> 

    <INPUT type="button" value="Add Row" onclick="addRow('dataTable')" /> 

    <TABLE id="dataTable" width="350px" border="1"> 
        <TR> 
            <TD><INPUT type="checkbox" name="chk"/></TD> 
            <TD> 1 </TD> 
            <TD> <INPUT type="text" /> </TD> 
        </TR> 
    </TABLE> 

    </BODY> 
```

如果它满足你的要求，试试这个

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T07:48:22.037

试试这个：这里 tbl 是您要插入新行的表的 id。

```
 $("#add_row").click(function () {
   var new_row = "<tr><td>Test1</td><td>Test2</td></tr>";
   $("#tbl").append(new_row);
 }); 
```

# php - 如何在 PHP 中为多个提交事件使用多个按钮

> ID：15609677
> 
> 赞同：0
> 
> 时间：2013-03-25T07:24:46.230
> 
> 标签：php, mysql, sql, database, html-table

我正在尝试使用每行的不同提交按钮将不同行表的数据保存在数据库中。

```
echo '<form style="text-align:center" id="form1" name="form1" method="post" action="">';
        echo "<tr>";
        echo "<td nowrap='nowrap'><label>".$rowsum['student_name1']."</label><input type='hidden' name='studentId1' id='studentId1' value=".$rowsum['student_name1']." /></td>";
        echo "<td align='center'>
                <select id='Status1' name='Status1'><option value='NP'>Not Present</option><option value='P'>Present</option></select></td>";
        echo "<td align='center'>
                <input style='font-weight:bold; background:#FFFFFF; text-align:right; color:#000000;' disabled='disabled' name='mar1' type='text' id='mar1' size='5' maxlength='5' value='".$mar1."' /></td>";
        echo "<td align='center'>
                <input style='font-weight:bold; background:#FFFFFF; text-align:right; color:#000000;' disabled='disabled' name='hin1' type='text' id='hin1' size='2' maxlength='2' value='".$hin1."' /></td>";
        echo "<td align='center'>
                <input style='font-weight:bold; background:#FFFFFF; text-align:right; color:#000000; border:hidden;' type='text' id='eng1' disabled='disabled' name='eng' value='".$eng1."' size='2' maxlength='2' /></td>";
        echo "<td align='center'>
                <input style='font-weight:bold; color:#000000; background:#FFFFFF; text-align:right; border:hidden;' name='hist1' id='hist1' value='".$hist1."' disabled='disabled' size='2' maxlength='2' /></td>";
        echo "<td align='center'>
                <input style='font-weight:bold; background:#FFFFFF; text-align:right; color:#000000; border:hidden;' name='geo1' id='geo1' value='".$geo1."' disabled='disabled' size='5' maxlength='5' type='text' /></td>";
        echo "<td align='center'>
                <input style='font-weight:bold; background:#FFFFFF; text-align:right; color:#000000; border:hidden;' type='text' name='marks1' disabled='disabled' id='marks1' value='".$marks1."' size='5' maxlength='5' /></td>";
        echo "<td align='center'>
                <input type='submit' name='SaveBat1' id='SaveBat1' value='Save' />
            </td></tr>";
        echo '</form>';

    //}
    $sql_result1 = mysql_query("SELECT `student_name` FROM `bat_score_board` WHERE `student_name` =  '$student1'") or die(mysql_error());
    $sql_row1 = mysql_fetch_assoc($sql_result1);
    if(!empty($sql_row1['student_name'])) {
        //echo "Id exists - " .  $sql_row1['student_name'] . "\n";
        $sqlup1 = "update bat_score_board set student_name='$student1', status='$status1', mar='$mar1', hin='$hin1', eng='$eng1', hist='$hist1', geo='$geo1', marks='$marks1' where student_name='$student1'";
        $resultup1 = mysql_query($sqlup1);
        //print_r($resultup1); exit();
    } else {
        //echo "Id no longer exists - " . $sql_row1['student_name'] . "\n";
        $sqlBat1 = "INSERT INTO bat_score_board(student_name, status, mar, hin, eng, hist, geo, marks)VALUES('$student1', '$status1', '$mar1', '$hin1', '$eng1', '$hist1', '$geo1', '$marks1')";
        $resultBat1 = mysql_query($sqlBat1);
        //print_r($resultBat1); exit();
    } 
```

这是我使用 PHP 为每一行尝试的（每行具有不同的名称、id 等）但是当我按下第一行的提交按钮以将第一行的数据保存到数据库中时它成功保存但是当我按下第二个提交按钮时当时我提交的第一行的数据在数据库中获得“0”（零），第二行的同一时间数据保存在不同行的数据库中。

再次提交后，我尝试保存第一行的数据，当时第一行的数据被保存，但第二行的数据得到“0”。谁能告诉我哪里出错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T09:37:35.477

你可以这样做

```
<?php
 if(isset($_POST['SUBMIT BUTTON 1 NAME'])) {
  // YOUR 1ST INSERT QUERY
 }
 if(isset($_POST['SUBMIT BUTTON 2 NAME'])) {
  // YOUR 2ND INSERT QUERY
 }
 if(isset($_POST['SUBMIT BUTTON 3 NAME'])) {
  // YOUR 3RD INSERT QUERY
 }
?> 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T07:51:32.210

```
check this out dude, 
   <?php
    class Connection {
        var $hostname, $username, $password, $database;
        function __construct() {

            //  local
            $this->hostname = "localhost"; 
            $this->username = "root"; 
            $this->password = ""; 
            $this->database = "test"; 
            $this->dbConnection(); 
        }

        public function dbConnection () {
            $connection = mysql_connect($this->hostname,$this->username,$this->password) or die ('Cannot make a connection');
            if ($connection) {
                $selectDB = mysql_select_db($this->database) or die ('Cannot select database');
            }
        }
    }
    $connect = new Connection();

    $sql = "SELECT * FROM bat_score_board";
    $row = mysql_fetch_row(mysql_query($sql));

    $cricketer_name = $row[1];
    $status = $row[2];
    $mar = $row[3];
    $hin = $row[4];
    $eng = $row[5];
    $hist = $row[6];
    $geo = $row[7];
    $marks = $row[8];

    echo '<form style="text-align:center;" id="form1" name="form1" method="post" action="">';
            echo "<tr>";
            echo "<td nowrap='nowrap'><label>".$cricketer_name."</label><input type='hidden' name='studentId1' id='studentId1' value=".$cricketer_name." /></td>";
            echo "<td align='center'>
                    <select id='Status1' name='Status1'><option value='NP'>Not Present</option><option value='P'>Present</option></select></td>";
            echo "<td align='center'>
                    <input style='font-weight:bold; background:#FFFFFF; text-align:right; color:#000000;' readonly name='mar1' type='text' id='mar1' size='5' maxlength='5' value='".$mar."' /></td>";
            echo "<td align='center'>
                    <input style='font-weight:bold; background:#FFFFFF; text-align:right; color:#000000;' readonly name='hin1' type='text' id='hin1' size='2' maxlength='2' value='".$hin."' /></td>";
            echo "<td align='center'>
                    <input style='font-weight:bold; background:#FFFFFF; text-align:right; color:#000000; border:hidden;' type='text' id='eng1' readonly name='eng1' value='".$eng."' size='2' maxlength='2' /></td>";
            echo "<td align='center'>
                    <input style='font-weight:bold; color:#000000; background:#FFFFFF; text-align:right; border:hidden;' name='hist1' id='hist1' value='".$hist."' readonly size='2' maxlength='2' /></td>";
            echo "<td align='center'>
                    <input style='font-weight:bold; background:#FFFFFF; text-align:right; color:#000000; border:hidden;' name='geo1' id='geo1' value='".$geo."' readonly size='5' maxlength='5' type='text' /></td>";
            echo "<td align='center'>
                    <input style='font-weight:bold; background:#FFFFFF; text-align:right; color:#000000; border:hidden;' type='text' name='marks1' readonly  id='marks1' value='".$marks."' size='5' maxlength='5' /></td>";
            echo "<td align='center'>
                    <input type='submit' name='SaveBat1' id='SaveBat1' value='Save' />
                </td></tr>";
            echo '</form>';

        //}

        if ( isset($_POST["Status1"]) ) {

        echo "hello";
        $cricketer_name = $row[1];
        $status = $row[2];
        $mar = $row[3];
        $hin = $row[4];
        $eng = $row[5];
        $hist = $row[6];
        $geo = $row[7];
        $marks = $row[8];

        $sql_result1 = mysql_query("SELECT `cricketer_name` FROM `bat_score_board` WHERE `cricketer_name` =  '".$_POST['studentId1']."' ") or die(mysql_error());
        $sql_row1 = mysql_fetch_assoc($sql_result1);
        if(!empty($sql_row1['cricketer_name'])) {
            //echo "Id exists - " .  $sql_row1['cricketer_name'] . "\n";
            $sqlup1 = " update bat_score_board set 
                        cricketer_name= '".$_POST['studentId1']."', 
                        status='".$_POST['Status1']."', 
                        mar='".$_POST['mar1']."', 
                        hin= '".$_POST['hin1']."', 
                        eng='".$_POST['eng1']."', 
                        hist='".$_POST['hist1']."', 
                        geo='".$_POST['geo1']."', 
                        marks='".$_POST['marks1']."'            
                        where cricketer_name='".$_POST['studentId1']."' ";
            $resultup1 = mysql_query($sqlup1);
            //print_r($resultup1); exit();
        } else {
            //echo "Id no longer exists - " . $sql_row1['cricketer_name'] . "\n";
            $sqlBat1 = "INSERT INTO bat_score_board(cricketer_name, status, mar, hin, eng, hist, geo, marks)VALUES
            '(".$_POST['studentId1']."', 
            '".$_POST['Status1']."', 
            '".$_POST['mar1']."', 
            '".$_POST['hin1']."', 
            '".$_POST['eng1']."', 
            '".$_POST['hist1']."',
            '".$_POST['geo1']."', 
            '".$_POST['marks1']."')";

            $resultBat1 = mysql_query($sqlBat1);
            //print_r($resultBat1); exit();
        }   

        }

        ?> 
```

# c# - 如何在 C# 中使用 where 条件从一个 DataTable 到另一个 DataTable 选择列

> ID：15609681
> 
> 赞同：2
> 
> 时间：2013-03-25T07:25:00.303
> 
> 标签：c#, linq, ado.net

在我的 C# 代码中，我有一个 source `DataTable`，并且想要查询它，将结果存储到另一个`DataTable`.

我有一个`stgId, fromdate, todate, colorCode, something1, something2`作为列的数据表。使用条件查询后，`where`我需要删除`something1`和`something2`列，并在另一个 DataTable 中获取结果。

等效的 SQL 查询如下所示

```
SELECT 
    stgId,
    fromdate,
    todate,
    colorCode 
FROM 
    tblScheduling 
WHERE 
    Mcode='123' 
```

我想在另一个中得到结果`DataTable`。

**编辑**：回答后更新

[可以使用这样](https://stackoverflow.com/questions/1990946/datatable-select-with-multiple-conditions)的 where 条件将结果作为`DataRow[]`类型获取。

```
DataRow[] results = table.Select("A = 'foo' AND B = 'bar' AND C = 'baz'"); 
```

但是我希望结果集为新的 DataTable。
**引用**已接受的答案
“阅读有关 LINQ 和 lambda 表达式的信息，它们对您非常有用。您可以[在此处](http://msdn.microsoft.com/en-us/library/bb397687.aspx)和[此处](http://www.codeproject.com/Articles/33769/Basics-of-LINQ-Lamda-Expressions)阅读有关它们的信息”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T07:27:55.063

您不能直接使用[CopyToDataTable](http://msdn.microsoft.com/en-us/library/system.data.datatableextensions.copytodatatable.aspx)方法，而是请参阅：[如何：实现通用类型 T 不是 DataRow 的 CopyToDataTable](http://msdn.microsoft.com/en-us/library/bb669096.aspx)。根据链接设置类后，您可以稍后调用该方法`CopyToDataTable`，例如：

```
var newDataTable = (dt.AsEnumerable()
                     .Where(r=> r.Field<string>("Mcode" == "123")
                     .Select new 
                           {
                           stgId = r.Field<int>("stgId"),
                           fromdate = r.Field<DateTime>("fromdate"),
                           todate = r.Field<DateTime>("todate"),
                           colorCode = r.Field<int>("colorCode")
                           }).CopyToDataTable(); 
```

请记住在[`Field`](http://msdn.microsoft.com/en-us/library/bb360891.aspx)扩展方法中使用正确的类型。

以上需要在您的代码中设置以下两个类。*（来自同一个 MSDN[链接](http://msdn.microsoft.com/en-us/library/bb669096.aspx)）

```
public static class CustomLINQtoDataSetMethods
{
    public static DataTable CopyToDataTable<T>(this IEnumerable<T> source)
    {
        return new ObjectShredder<T>().Shred(source, null, null);
    }

    public static DataTable CopyToDataTable<T>(this IEnumerable<T> source,
                                                DataTable table, LoadOption? options)
    {
        return new ObjectShredder<T>().Shred(source, table, options);
    }

}

public class ObjectShredder<T>
{
    private System.Reflection.FieldInfo[] _fi;
    private System.Reflection.PropertyInfo[] _pi;
    private System.Collections.Generic.Dictionary<string, int> _ordinalMap;
    private System.Type _type;

    // ObjectShredder constructor.
    public ObjectShredder()
    {
        _type = typeof(T);
        _fi = _type.GetFields();
        _pi = _type.GetProperties();
        _ordinalMap = new Dictionary<string, int>();
    }

    /// <summary>
    /// Loads a DataTable from a sequence of objects.
    /// </summary>
    /// <param name="source">The sequence of objects to load into the DataTable.</param>
    /// <param name="table">The input table. The schema of the table must match that 
    /// the type T.  If the table is null, a new table is created with a schema 
    /// created from the public properties and fields of the type T.</param>
    /// <param name="options">Specifies how values from the source sequence will be applied to 
    /// existing rows in the table.</param>
    /// <returns>A DataTable created from the source sequence.</returns>
    public DataTable Shred(IEnumerable<T> source, DataTable table, LoadOption? options)
    {
        // Load the table from the scalar sequence if T is a primitive type.
        if (typeof(T).IsPrimitive)
        {
            return ShredPrimitive(source, table, options);
        }

        // Create a new table if the input table is null.
        if (table == null)
        {
            table = new DataTable(typeof(T).Name);
        }

        // Initialize the ordinal map and extend the table schema based on type T.
        table = ExtendTable(table, typeof(T));

        // Enumerate the source sequence and load the object values into rows.
        table.BeginLoadData();
        using (IEnumerator<T> e = source.GetEnumerator())
        {
            while (e.MoveNext())
            {
                if (options != null)
                {
                    table.LoadDataRow(ShredObject(table, e.Current), (LoadOption)options);
                }
                else
                {
                    table.LoadDataRow(ShredObject(table, e.Current), true);
                }
            }
        }
        table.EndLoadData();

        // Return the table.
        return table;
    }

    public DataTable ShredPrimitive(IEnumerable<T> source, DataTable table, LoadOption? options)
    {
        // Create a new table if the input table is null.
        if (table == null)
        {
            table = new DataTable(typeof(T).Name);
        }

        if (!table.Columns.Contains("Value"))
        {
            table.Columns.Add("Value", typeof(T));
        }

        // Enumerate the source sequence and load the scalar values into rows.
        table.BeginLoadData();
        using (IEnumerator<T> e = source.GetEnumerator())
        {
            Object[] values = new object[table.Columns.Count];
            while (e.MoveNext())
            {
                values[table.Columns["Value"].Ordinal] = e.Current;

                if (options != null)
                {
                    table.LoadDataRow(values, (LoadOption)options);
                }
                else
                {
                    table.LoadDataRow(values, true);
                }
            }
        }
        table.EndLoadData();

        // Return the table.
        return table;
    }

    public object[] ShredObject(DataTable table, T instance)
    {

        FieldInfo[] fi = _fi;
        PropertyInfo[] pi = _pi;

        if (instance.GetType() != typeof(T))
        {
            // If the instance is derived from T, extend the table schema
            // and get the properties and fields.
            ExtendTable(table, instance.GetType());
            fi = instance.GetType().GetFields();
            pi = instance.GetType().GetProperties();
        }

        // Add the property and field values of the instance to an array.
        Object[] values = new object[table.Columns.Count];
        foreach (FieldInfo f in fi)
        {
            values[_ordinalMap[f.Name]] = f.GetValue(instance);
        }

        foreach (PropertyInfo p in pi)
        {
            values[_ordinalMap[p.Name]] = p.GetValue(instance, null);
        }

        // Return the property and field values of the instance.
        return values;
    }

    public DataTable ExtendTable(DataTable table, Type type)
    {
        // Extend the table schema if the input table was null or if the value 
        // in the sequence is derived from type T.            
        foreach (FieldInfo f in type.GetFields())
        {
            if (!_ordinalMap.ContainsKey(f.Name))
            {
                // Add the field as a column in the table if it doesn't exist
                // already.
                DataColumn dc = table.Columns.Contains(f.Name) ? table.Columns[f.Name]
                    : table.Columns.Add(f.Name, f.FieldType);

                // Add the field to the ordinal map.
                _ordinalMap.Add(f.Name, dc.Ordinal);
            }
        }
        foreach (PropertyInfo p in type.GetProperties())
        {
            if (!_ordinalMap.ContainsKey(p.Name))
            {
                // Add the property as a column in the table if it doesn't exist
                // already.
                DataColumn dc = table.Columns.Contains(p.Name) ? table.Columns[p.Name]
                    : table.Columns.Add(p.Name, p.PropertyType);

                // Add the property to the ordinal map.
                _ordinalMap.Add(p.Name, dc.Ordinal);
            }
        }

        // Return the table.
        return table;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T07:33:35.313

```
foreach (DataRow dr in dataTable1.Rows) {
    if (dr["Mcode"].ToString()=="123")
        dataTable2.Rows.Add(dr.ItemArray);
} 
```

上面的示例假定`dataTable1`和`dataTable2`具有相同的列数、类型和顺序。

## 编辑 1

您可以使用克隆方法将现有数据表的结构复制到另一个数据表中。

[http://msdn.microsoft.com/en-IN/library/system.data.datatable.clone.aspx](http://msdn.microsoft.com/en-IN/library/system.data.datatable.clone.aspx)

假设你有一个`dt1`数据表所以你可以创建一个克隆如下

```
 DataTable dt2  = dt1.Clone(); 
```

并使用上述循环如下

```
foreach (DataRow dr in dt1.Rows) {
    if (dr["Mcode"].ToString()=="123")
        dt2.Rows.Add(dr.ItemArray);
} 
```

# c# - LINQ 查询，使用分组方式选择最新值 - 不支持的方法

> ID：15609684
> 
> 赞同：1
> 
> 时间：2013-03-25T07:25:26.080
> 
> 标签：c#, mysql, .net, linq

我有这张包含基金数据值的表，我想为每个基金 (FundId) 选择最新值。这个查询在执行时给我带来了问题。“不支持指定的方法”。

```
var q = from f in ctx.FundDatas
group f by f.FundId into g
let latestDataItem = g.OrderByDescending(r => r.DateOfValue).FirstOrDefault()
select new { 
    g.Key, LatestDataItem = latestDataItem 
};
var list = q.ToList(); //Executed and exception is thrown 
```

为什么不按工作顺序订购？我**不想**只获取 Key 和 DateOfValue，如果是这样，我会跳过“let”部分并进行如下选择：

```
select new { 
    g.Key,
    LatestDateOfValue = g.Max(y=>y.DateOfValue)
}; 
```

以上工作......但我想要每个基金数据项中最新的整个对象，而不仅仅是最大日期。

这是内部异常堆栈跟踪：

```
[NotSupportedException: Specified method is not supported.]
MySql.Data.Entity.SqlGenerator.Visit(DbApplyExpression expression) +28
System.Data.Common.CommandTrees.DbApplyExpression.Accept(DbExpressionVisitor`1 visitor)     +25
MySql.Data.Entity.SqlGenerator.VisitInputExpression(DbExpression e, String name,      TypeUsage type) +35
MySql.Data.Entity.SelectGenerator.VisitInputExpressionEnsureSelect(DbExpression e, String name, TypeUsage type) +21
MySql.Data.Entity.SelectGenerator.Visit(DbProjectExpression expression) +38
System.Data.Common.CommandTrees.DbProjectExpression.Accept(DbExpressionVisitor`1 visitor) +25
MySql.Data.Entity.SelectGenerator.GenerateSQL(DbCommandTree tree) +60
MySql.Data.MySqlClient.MySqlProviderServices.CreateDbCommandDefinition(DbProviderManifest providerManifest, DbCommandTree commandTree) +376
System.Data.Common.DbProviderServices.CreateCommandDefinition(DbCommandTree commandTree) +125
System.Data.EntityClient.EntityCommandDefinition..ctor(DbProviderFactory storeProviderFactory, DbCommandTree commandTree) +442 
```

我正在使用 .NET 连接器 6.5.4.0 运行 MySQL。

编辑：表定义：

```
FundId      int(6), PK
DateOfValue date, PK
Value       double(12,6) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T08:00:19.350

该方法的连接的 x.5.4 版本中有一个已知错误`FirstOrDefault()`。

参考[http://bugs.mysql.com/bug.php?id=67377](http://bugs.mysql.com/bug.php?id=67377)

> ```
> While executing the following LINQ. It used to work in the version 6.3.5: 
> ```

```
 entities.Reclamation.Where(x=> x.idUser == idUser).Select(x=> new {
    id = x.id,
    ReclamationReport = x.Report.Count == 0 ? null : x.Report.FirstOrDefault().id
    }); 
```

我不确定这是否是您的问题的原因，因为错误报告者似乎没有使用与您相同的模式（尽管我的 Linq 没有达到标准，所以我什至不知道我是否将苹果与苹果进行比较），虽然异常在隐含含义上相似，但它并不相同（尽管在 v6.6.4 中报告了错误，因此这可能解释了与您在 v6.5.4 中看到的细微差别）。

有关适用于 6.5.4 的版本，请参阅此维护版本文章：

[https://blogs.oracle.com/MySqlOnWindows/entry/mysql_connector_net_6_55](https://blogs.oracle.com/MySqlOnWindows/entry/mysql_connector_net_6_55)

> 修复了某些 LINQ to Entities 查询中不支持方法 FirstOrDefault 的问题（MySql 错误 #67377，Oracle 错误 #15856964）。

因此，**我建议应用维护版本。**.

# ios - 碰撞检测只发生在屏幕顶部

> ID：15609689
> 
> 赞同：2
> 
> 时间：2013-03-25T07:25:31.813
> 
> 标签：ios, objective-c, cocos2d-iphone, collision-detection, removechild

我将制作一个非常简单的游戏，例如从顶部掉下的精灵，我必须用另一个精灵抓住它，如果我不这样做，精灵会走出屏幕并移除，那部分没问题，我还添加了碰撞检测，主要问题是这种碰撞只发生在屏幕的上部而不是屏幕的底部，为什么会发生这种情况请帮忙，（我是新人：S），这是完整的代码

在我的.h`然后.m

```
{
CCSprite *right;
CCSprite *left;

NSMutableArray *_left;    
}

-(void)ringcreate:(ccTime)dt
{

CGSize winsize = [[CCDirector sharedDirector] winSize];

int minX = left.contentSize.width / 2;
int maxX = winsize.width - left.contentSize.width/2;
int rangeX = maxX - minX;
int actualX = (arc4random() % rangeX) + minX;

left = [CCSprite spriteWithFile:@"2.png"];
left.position = ccp(actualX,winsize.height);
[self addChild:left];

id move3 = [CCMoveTo actionWithDuration:5 position:ccp(winsize.width/2,0)];

[left runAction:move3];

}

-(id) init
{
// always call "super" init
// Apple recommends to re-assign "self" with the "super's" return value
if( (self=[super init]) ) {

    self.touchEnabled = YES;

    right = [CCSprite spriteWithFile:@"1.png"];
    right.position = ccp(0,0);
    [self addChild:right]; 

    [self schedule:@selector(ringcreate:)  interval:2];
    [self schedule:@selector(update:)];

}
return self;
  }

  -(void) ccTouchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
  {
 UITouch *touch =[touches anyObject];
 CGPoint location =[touch locationInView:[touch view]];
 location = [[CCDirector sharedDirector] convertToGL:location];

 id move = [CCMoveTo actionWithDuration:1 position:ccp(location.x,location.y)];

 [right runAction:move];

 }

 -(void) update:(ccTime)dt
 {
   if (CGRectIntersectsRect(right.boundingBox, left.boundingBox)) {

    CCLOG(@"collison hoyse");

    id move1 = [CCScaleTo actionWithDuration:0.4 scale:0.3];
    left.visible = NO;
    [left runAction:move1];

    }
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T08:07:44.623

我解决了这个问题，我只需要添加数组并使用该方法更新它们，

```
-(void) update:(ccTime)dt
{
NSMutableArray *crabToUpdate = [[NSMutableArray alloc] init];
for (CCSprite *crab in crabarray) {

    NSMutableArray *ring_to_delete = [[NSMutableArray alloc] init];
    for (ring1 in ringarray) {

            if (CGRectIntersectsRect(crab.boundingBox, ring1.boundingBox)) {                  
                [ring_to_delete addObject:ring1];                    
            }       
    }  

        for (CCSprite *ring1 in ring_to_delete) { 
            [ringarray removeObject:ring1];
            [self removeChild:ring1 cleanup:YES];
        }
    if (ring_to_delete.count >0) {
        [crabToUpdate addObject:crab];
    }

        [ring_to_delete release];

 }
} 
```

# ios - iOS 中 echoprint 的链接器错误

> ID：15609690
> 
> 赞同：2
> 
> 时间：2013-03-25T07:25:34.607
> 
> 标签：ios, objective-c, iphone, audio-fingerprinting, echoprint

我正在使用 echoprint API 进行过去 3 个月的歌曲搜索。但突然它开始给我以下错误。在将 API 添加到我的项目时，我已经遇到了很多问题，现在它开始给我链接器错误。它以前对我有用。像这样的错误：

> “Codegen::Codegen(float const*, unsigned int, int)”，引用自：File.o 中的_GetPCMFromFile
> 
> clang：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）
> 
> ld：未找到体系结构 i386 的符号
> 
> ld：警告：找不到选项'-LL/Users/prajaktakulkarni/Downloads/echoprint-codegen-4.12 2/src/echoprint-codegen-ios/build/Release-iphoneos'的目录 ld：警告：忽略文件/Users/prajaktakulkarni /Documents/Instajam/libechoprint-codegen-ios.a，在文件 /Users/prajaktakulkarni/Documents/Instajam/libechoprint-codegen-ios.a 中缺少所需的体系结构 i386（2 片）体系结构 i386 的未定义符号：“Codegen::Codegen (float const*, unsigned int, int)”，引用自：File.o ld 中的 _GetPCMFromFile：未找到架构 i386 clang 的符号：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T10:53:47.630

错误消息是说静态库 libechoprint-codegen-ios.a 尚未为 i386 架构构建 - 这是模拟器使用的架构。

您可以通过在终端中运行以下代码来了解为哪些架构构建了静态库：

```
lipo -info ~/Documents/Instajam/libechoprint-codegen-ios.a 
```

它可能会告诉您它是为 armv7 和 armv7s 构建的。在撰写本文时，这将支持除最旧的 iOS 设备之外的所有设备。

您可以构建 libechoprint-codegen-ios.a 以在模拟器上运行。如果您对此感兴趣，这里有一篇很好的 stackoverflow 帖子：[Build fat static library (device + simulator) using Xcode and SDK 4+](https://stackoverflow.com/questions/3520977/build-fat-static-library-device-simulator-using-xcode-and-sdk-4)

最简单的选择是只需插入您的手机，而不必担心构建一个胖静态库。:D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-11T14:08:41.127

最近，我通过使用**libz.1.1.3.tbd**而不是**libz.tbd**解决了这个问题，当然这个链接很有用[Echoprint iOS Missing Framework](https://stackoverflow.com/questions/12135898/echoprint-ios-missing-framework)

# android - 画布上的旋转位图似乎被切碎了

> ID：15609691
> 
> 赞同：0
> 
> 时间：2013-03-25T07:25:48.717
> 
> 标签：android, canvas, bitmap, rotation

我正在尝试在画布上一起旋转一些位图（7 个位图）。它们都有不同的尺寸。我正在使用以下代码来旋转这些位图：

```
Matrix matrix = new Matrix();
matrix.setTranslate(x, y);
matrix.postRotate(rotateAngle,centerX, centerY);
canvas.drawBitmap(bitmap, matrix, paint); 
```

位图根据需要旋转。我遇到的问题是位图在某些设备上旋转不平滑。它们在小型设备上运行良好，但随着屏幕尺寸的增加，旋转被切断。

另外，我注意到旋转 2-3 个位图可以提供平滑的旋转，但是当我尝试将所有这些位图一起旋转时，旋转会被切断。我应该怎么做才能解决这个问题？提前谢谢大家。

我也尝试过 canvas.rotate 方法，但问题仍然存在。

# java - JMS 的 SwiftMQ 实现中的 page.db 大小

> ID：15609692
> 
> 赞同：0
> 
> 时间：2013-03-25T07:26:03.893
> 
> 标签：java, database, jms, rabbitmq, message-queue

在我的产品中，我使用 SwiftMQ 作为消息传递服务。我看到它使用了 page.dg 文件，并且我读到它是 JMS 事务文件。我看到它在我的环境中变得非常大，达到 9 GB。我在网上做了一些研究，但无法明确回答我的疑问。基本上 -- 1\. 为什么要使用 page.db 文件，手动删除该文件的含义是什么。会不会有什么不良影响？另外，我可以控制这个文件的增长超出某个可配置的大小吗？对这些答案的任何澄清将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-28T07:22:07.510

page.db 用于存储进入队列的持久消息，一旦被消费者消费，它们将被删除。如果您想限制 page.db 的最大大小，这是不可能的，但是一种解决方法是分析您的流量（查看一条消息占用多少空间 [page.db 大小/一次所有队列中的消息数] ) 然后定义队列的最大消息限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-24T08:41:06.520

我们也在我们的 linux 服务器上使用 SwiftMQ。据我所知，page.db 和事务文件就像队列中消息的“日志”。

如果您手动删除 page.db 和事务文件，它将删除当时队列中的所有消息。我以前做过。

但是我不确定控制文件的增长？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-06T16:37:01.340

page.db 包含的是实际的持久数据存储（包含页面并且是一个数据库，所以这是名称;-)）。每个更改都记录在 transaction.log 中。这是在检查点期间同步的。

page.db 增长的问题非常简单。有一个或多个队列有大量的持久消息积压日志。在许多情况下，这些都是死的持久订户。所以只需检查 SwiftMQ Explorer：Queue Manager Swiftlet / Usage，右键单击“显示实体表”。单击“消息计数”列按消息计数排序。这应该有助于识别有积压的队列。

顺便说一句，有一个[SwiftMQ 用户论坛](http://swiftmq-jms-forum.688.n7.nabble.com)，您的问题将有更多机会得到解答。

# java - java web 应用程序：自定义参数

> ID：15609694
> 
> 赞同：1
> 
> 时间：2013-03-25T07:26:06.287
> 
> 标签：java

在java项目中，它可以简单地把一些init参数放在一个`.property`文件或`.xml`文件中，这两个文件都与应用程序一起放在磁盘文件系统中。如果我想将这些自定义参数与业务数据一起放在数据库中怎么办？它应该保存`.property`还是`.xml`直接归档到数据库中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T07:45:53.320

这取决于您的需求，并且取决于您使用的数据库（考虑一个 xml 数据库），无论如何，最常见的是那些使您能够将信息保存为二进制对象（作为 blob）的 elationsal 数据库。

无论如何，问题可能是您是否需要这个，init 参数通常包含有关数据库访问的信息，如果在您的情况下这是真的，这将不相关，因为您将无法访问数据库。

一些本地信息库非常重要，假设您在启动时需要知道您需要访问哪个服务器（您的数据库在哪里），这是您仍然需要保持本地化的东西（作为属性文件或在注册表中，这是一个选项也可以保存您的初始化参数）

# jquery - 数字范围验证在 jquery.validate.unobtrusive.js 中无法正常工作

> ID：15609696
> 
> 赞同：11
> 
> 时间：2013-03-25T07:26:17.077
> 
> 标签：jquery, jquery-validate, unobtrusive-javascript, unobtrusive-validation

我正在使用带有 jquery.validate.unobtrusive.js 的 jQuery 验证插件 v1.11.0,2/4/2013。

我想我面临数字字段范围验证的错误：验证将字符串值与最小值字符串和最大值字符串进行比较，而不是将字段数与 min-number 和 max-number 进行比较。

**复制步骤：**

您使用以下 HTML 设置验证范围 1-1000：

```
<input name="Data.MaxConcurrentInstances" class="text-box single-line" id="Data_MaxConcurrentInstances" type="number" value="" data-val-number="The field Max concurrent instances must be a number." data-val="true" data-val-range-min="1" data-val-range-max="1000" data-val-range="The field Max concurrent instances must be between 1 and 1000."> 
```

您设置测试字段值：7。

***预期结果***：验证成功。没有错误。

***实际结果***：验证失败。*内部原因：它失败是因为按字母顺序，字符串“7”在字符串“1”和“1000”之后，而不是在它们之间。*

**问题：**已知此错误吗？最好的解决方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-02T04:53:09.170

我也看到了这个问题。我刚刚通过手动更新我的代码确认它已在 JQuery Validation 1.11.1 更新中得到修复。该更新尚未在 NuGET 存储库上发布。

您可以从这里下载更新：http: [//bassistance.de/jquery-plugins/jquery-plugin-validation/](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)

Microsoft CDN 地址是：

[http://ajax.aspnetcdn.com/ajax/jquery.validate/1.11.1/jquery.validate.js](http://ajax.aspnetcdn.com/ajax/jquery.validate/1.11.1/jquery.validate.js)

[http://ajax.aspnetcdn.com/ajax/jquery.validate/1.11.1/jquery.validate.min.js](http://ajax.aspnetcdn.com/ajax/jquery.validate/1.11.1/jquery.validate.min.js)

* * *

**4月3日更新：**

NuGET 包更新现已推出。如果您通过 NuGET 更新到 JQuery Validation 1.11.1，您将解决该问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T07:28:32.043

到目前为止，我发现最好的解决方法是运行修补启动脚本：

```
$(document).ready(function() {
    window.setTimeout(function () {
        //Fixing jquery Unobtrusive validation range integer bug
        var allRules = $.data(document.forms[0], "validator").settings.rules;
        for (var ruleName in allRules) {
            var rule = allRules[ruleName];

            if (rule.range != undefined && rule.number)
                for (var ri = rule.range.length-1; ri >=0 ; ri--) {
                    rule.range[ri] = Number(rule.range[ri]);
                }
        }
    }, 100);
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-06T14:53:28.403

一种解决方法是覆盖 jquery 验证器的 range 方法，如下所示：

```
$.validator.methods.range = function (value, element, param) {
        return this.optional(element) || (Number(value) >= Number(param[0]) && Number(value) <= Number(param[1]));
    } 
```

验证器插件中范围的实际代码是

```
range : function (value, element, param) {
            return this.optional(element) || (value >= param[0] && value <= param[1]);
        } 
```

`value, param[0] and param[1]`使用`Number(value), Number(param[0]) and Number(param[1])`适当的比较将 String 类型的值转换为 Number 类型时，发生在 Number 之间而不是 String 之间。

# sql - sql查询某个日期的详细信息

> ID：15609697
> 
> 赞同：1
> 
> 时间：2013-03-25T07:26:19.120
> 
> 标签：sql, date

我有以下数据库：

```
create table Hotel  (
   HNo char(4),
   Name varchar(20)   not null,
   Address varchar(50),
   Constraint PK_Hotel Primary Key (HNo))
)

create table Room  (
   RNo char(4),
   HNo char(4),
   Type char(6) not null,
   Price decimal (7,2),
   Constraint PK_Room Primary Key (HNo, RNo),
   Constraint FK_Room Foreign Key (HNo)
   references Hotel (HNo)
)

create table Guest  (
   GNo char(4),
   Name varchar(20) not null,
   Address varchar(50),
   Constraint PK_Guest Primary Key (GNo)

)

create table Booking   (
   HNo char(4),
   GNo char(4),
   DateFrom date,
   DateTo date,
   RNo char(4),
   Constraint PK_Booking Primary Key (HNo, GNo, DateFrom),
   Constraint FK_Booking Foreign Key (GNo)
   references Guest (GNo),
   Constraint FK_Booking_room Foreign Key (HNo, RNo)
   references Room (HNo, RNo),
   Constraint FK_Booking_hotel Foreign Key (HNo)
   references Hotel (HNo)
) 
```

我正在努力使用`dateto=> <=datefrom`并让它工作。

对于 1997 年 3 月 26 日，我需要列出所有酒店中所有房间的详细信息，包括入住该房间的任何客人的姓名。我加入表格等并不太糟糕，但不确定如何在指定日期整体完成？有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T07:31:07.870

```
SELECT
  h.Name,
  h.Address,
  r.RNo,
  r.HNo,
  r.Type,
  r.Price,
  G.Name,
  G.Address,
  ...
FROM Hotel         AS h
INNER JOIN Room    AS r  ON h.HNo = r.HNo
INNER JOIN Guest   AS g  ON r.RNo = g.RNo
INNER JOIN Booking AS b  ON b.GNo = g.GNo
                        AND b.HNo = h.HNo
WHERE b.DateFrom <= @DateFrom
  AND b.DateTo   => @DateTo; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T07:31:37.170

```
 SELECT b.datefrom, b.dateto, h.name AS hotelname
         , b.rno
         , r.type
         , g.name AS guestname
    FROM booking b
    JOIN hotel h ON b.hno = h.hno
    JOIN guest g ON g.gno = b.gno
    JOIN room r ON b.rno = r.rno
   WHERE @yourDate BETWEEN b.datefrom AND b.dateto 
```

**编辑 ：**

将`@yourDate`最后一行中的 替换为您的 DBMS 支持的合适表达式。

例如，在 Oracle 中，有一个函数`TO_DATE`可以将给定的字符串转换为日期，例如`TO_DATE('26-MAR-1997') BETWEEN b.datefrom AND b.dateto`. 在 SQL Server 中有`CAST`函数。

# magento - 使用 Magmi Datapump 删除产品

> ID：15609702
> 
> 赞同：1
> 
> 时间：2013-03-25T07:26:46.580
> 
> 标签：magento, magento-1.7, magmi

我可以使用 MAGMI 的 Web 前端成功删除产品。但是在使用数据泵 API 时，它似乎只是忽略了**magmi:delete**列......

```
$this->magmi = Magmi_DataPumpFactory::getDataPumpInstance("productimport");
$this->magmi->beginImportSession("Default","create", new MagmiLogger($this));
$prods = Mage::getResourceModel('catalog/product_collection');
$count = $prods->getSize();
$i = 0;
foreach ($prods as $_p) {
    $this->magmi->ingest(array(
        'sku' => $_p->getSku(),
        'magmi:delete' => '1'
    ));
}
$this->magmi->endImportSession(); 
```

使用此代码，我尝试删除我的整个目录。执行时，foreach 循环通过 MAGMI 没有任何异常或错误。Product Deleter 插件在我选择的默认配置文件中被激活。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T07:32:26.483

没关系，我选择了错误的配置文件...它适用于发布的代码，当您真正选择具有激活的**“产品删除器”**插件的配置文件时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-30T10:09:01.920

**单击此处将 MAGMI 添加到您的模块中**-> [https://magento.stackexchange.com/a/351175](https://magento.stackexchange.com/a/351175)

**启用产品删除插件。**

[![在此处输入图像描述](../Images/41bf9c00f253970b8d5ede9cff6da348.png)](https://i.stack.imgur.com/CBFAt.png)

> **使用 CSV**

```
"sku","magmi:delete"
"sku1","1"
"sku2","1" 
```

> **使用代码**

```
 $importData = [];
    $configProduct = new \Magmi_ProductImport_DataPump('productimport');
    $importData['sku'] = "your Product SKU";
    $importData['magmi:delete'] = "1";
    $configProduct->beginImportSession("default", "update");
    $run = $configProduct->ingest($importData);
    $configProduct->endImportSession(); 
```

> 检查db 中的**catalog_eav_attribute**表。如果**is_configurable列不存在，则从该文件中的****getConfigurableOptsFromAsId()**函数更新以下代码**.../magmi/plugins/base/itemprocessors/configurables/magmi_configurableprocessor.php**

```
 //$sql .= " JOIN $cea as cea ON cea.attribute_id=ea.attribute_id AND cea.is_global=1 AND cea.is_configurable=1";
    $sql .= " JOIN $cea as cea ON cea.attribute_id=ea.attribute_id AND cea.is_global=1";
} else {
    //$cond .= " AND ea.is_global=1 AND ea.is_configurable=1";
    $cond .= " AND ea.is_global=1"; 
```

***注意：- magmi:delete : 1 是删除产品 0 是不删除产品***

# android - 清单中的android anydensity

> ID：15609704
> 
> 赞同：2
> 
> 时间：2013-03-25T07:27:04.720
> 
> 标签：android, android-manifest

在我的应用程序中，我遇到了一个惊人的问题。

当我`anyDensity`在清单中添加标签 false 时，我的应用程序运行良好，但每当我让它为真时，我的应用程序行为模糊，我正在我的应用程序上创建一些位图。如果我`anyDensity`在清单中标记 false 有任何问题，那么许多设备将无法在 Playstore 上看到我的应用程序，我们将不胜感激。

```
<supports-screens
    android:anyDensity="false"
    android:largeScreens="true"
    android:normalScreens="true"
    android:smallScreens="true" /> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-08-19T11:14:55.913

但是，您的原始帖子中没有太多信息。该文档指出：

> 指示应用程序是否包含可适应任何屏幕密度的资源。对于支持 Android 1.6（API 级别 4）及更高版本的应用程序，默认情况下这是“真”，除非您绝对确定应用程序必须运行，否则不应将其设置为“假”。唯一可能需要禁用此功能的情况是您的应用程序直接操作位图

所以我的第一个问题是您是否包含所有资源以适应任何屏幕密度（即 mdpi、hdpi、xhdpi、xxhdpi）？如果是，你应该没问题。在上面引用的最后几句话之后，我到达了这个[链接](http://developer.android.com/guide/practices/screens_support.html#DensityConsiderations)。

它说：

> 应用程序可以通过在清单中将 android:anyDensity 设置为“false”来禁用预缩放，或者通过将 inScaled 设置为“false”以编程方式为 Bitmap 禁用预缩放。

您是否尝试过以编程方式为您的位图执行此操作，而不是为整个应用程序全局禁用此标志？

最后是[这一](http://developer.android.com/guide/practices/screens_support.html#scaling)节。也许它会帮助您正确处理您的自定义位图？具体来说，这一段听起来像你的问题：

> 如果您的应用程序创建内存中的位图（Bitmap 对象），则系统默认该位图是为基线中等密度屏幕设计的，并在绘制时自动缩放位图。当位图具有未指定的密度属性时，系统将“自动缩放”应用于位图。如果您没有正确考虑当前设备的屏幕密度并指定位图的密度属性，则自动缩放可能会导致缩放伪影，就像您不提供替代资源时一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T07:44:23.940

您可以使用 Android SDK 中包含的 aapt 工具来确定 Google Play 如何根据其声明的功能和权限来过滤您的应用程序。为此，请使用 dump badging 命令运行 aapt。它将解析您的应用程序清单并应用与 Google Play 相同的规则来确定您的应用程序所需的功能。有关使用此工具的详细信息，请访问 [http://developer.android.com/guide/topics/manifest/uses-feature-element.html#testing](http://developer.android.com/guide/topics/manifest/uses-feature-element.html#testing)

# java - Android-平板电脑启动完成时启动应用程序

> ID：15609707
> 
> 赞同：0
> 
> 时间：2013-03-25T07:27:18.740
> 
> 标签：java, android, performance, android-intent

我使用的是 Android 3.2，我创建了我的 android 应用程序，当我的平板电脑启动完成时，它将自动启动。

一切正常，除了当应用程序自动开始运行时活动运行**两次***（启动完成后）*。

当我手动启动应用程序时，不会出现此问题。

公共类 BootStartUpApp 扩展 BroadcastReceiver {

```
@Override
public void onReceive(Context context, Intent intent) {
    Intent startUpApps = new Intent(context, StartMainActivity.class);
    startUpApps.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    context.startActivity(startUpApps);
} 
```

}

在清单文件中，我添加了以下代码：

```
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />

<receiver android:name="com.logica.eHealthBox.tab.activity.BootStartUpApp" >
            <intent-filter>
                <action android:name="android.intent.action.BOOT_COMPLETED" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </receiver> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T08:53:14.370

这是怎么做的：

```
public class BootReceiver extends BroadcastReceiver{
@Override
public void onReceive(Context context, Intent intent) {
         Intent i = new Intent(context, TestReceiversActivity.class);
         i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
         context.startActivity(i);
       }
} 
```

在清单中添加一个条目：

```
<receiver android:name=".BootReceiver" /> 
```

也有活动。

有关更多信息，请查看[此链接](https://stackoverflow.com/a/8264035/878126)和[此链接](http://www.vogella.com/articles/AndroidBroadcastReceiver/article.html)

# javascript - 我在第 48 行收到错误，因为“未捕获的类型错误：对象 [对象对象] 没有方法 'getElement''”

> ID：15609708
> 
> 赞同：-2
> 
> 时间：2013-03-25T07:27:19.963
> 
> 标签：javascript

我得到的错误是

> 未捕获的类型错误：对象 [object Object] 没有方法“getElement”

所以请在 javascript 文件中参考我的代码

```
addnavbtn: function(){

    if (!(Browser.ie && Browser.version < 9)) {
        var jlevel0 = this.menu.getElement('ul.level0');

        if(jlevel0){
            var jmega = this.menu;

            var jbutton = new Element ('div', {id:'js-megamenu-button', 'class': 'js-megamenu-button', html: 'Navigation', styles: { display: 'none'}}).inject (jmega, 'before');

            jbutton.addEvent('click', function(e){
                e.stop();

                if(jmega.getStyle('display') == 'block'){
                    jmega.removeClass('active').setStyle('display', 'none');
                    jbutton.removeClass('active');
                } else {
                    jmega.addClass('active').setStyle('display', 'block');
                    jbutton.addClass('active');
                }
            }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T07:43:12.400

this.menu 在您的情况下应该是“未定义”。在“this.menu”上发出警报

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T07:44:31.693

...所以在***前面*** `this.menu.getElement(...);`的那行，写`console.log(this.menu);`，它会给你一个你可以打开的项目，然后检查。您可以查看是否`.getElement`可用，如果不可用，为什么...

您还可以确保您不是`addnavbutton`作为回调，或在事件侦听器中或作为函数的参数调用... ...因为如果您执行任何这些操作（都几乎相同） , 然后`this`将指向`window`, 而不是您的预期对象。

# delphi - 显示删除了多少条记录的消息

> ID：15609710
> 
> 赞同：2
> 
> 时间：2013-03-25T07:27:25.537
> 
> 标签：delphi, delphi-xe2, delphi-xe

我正在使用 Components Ace 的绝对数据库。运行删除查询后是否可以知道（显示消息）删除了多少条记录？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T07:31:31.307

执行查询后，您可以从[`RowsAffected`](http://www.componentace.com/help/absdb_manual/tabsquery_rowsaffected.htm)属性中获取此值。`DELETE`从参考资料（我强调）：

> **检查 RowsAffected 以确定上次查询操作**更新或删除了多少行。**如果没有更新或删除行，RowsAffected 的值为零。如果由于错误条件而无法执行 SQL 语句，则 RowsAffected 的值为 -1。后一种情况通常会在引发异常之后发生。**

 **在伪代码中，它可能如下所示：

```
...
ABSQuery1.SQL.Text := 'DELETE FROM SomeTable WHERE SomeColumn = 1';
ABSQuery1.ExecSQL;
ShowMessage(IntToStr(ABSQuery1.RowsAffected) + ' row(s) were deleted.');
... 
```**

# math - x = 27 * 24 \ 4 / 2 – 4 + 2

> ID：15609714
> 
> 赞同：-2
> 
> 时间：2013-03-25T07:27:46.180
> 
> 标签：math

有人可以帮助解决以下数学问题。请记住运算符的优先级。

x = 27 * 24 \ 4 / 2 – 4 + 2

算术和逻辑运算符按以下优先顺序进行评估：

求幂 ( `^`)
求反 ( `-`)
乘法和除法 ( `*`, `/`)
整数除法 ( `\`)
模算术 ( `Mod`)
加法和减法 ( `+`, `-`)

结果是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T07:36:38.383

```
x = ((27 * 24) \ (4 / 2)) - 4 + 2
  =  (648      \    2)    - 4 + 2
  =   324 - 4 + 2
  =   322 
```

# php - 从json数据替换多个字符串

> ID：15609716
> 
> 赞同：1
> 
> 时间：2013-03-25T07:27:50.617
> 
> 标签：php, json

这是我写的代码

```
<?php 
            $response = file_get_contents('like.json');
            $arr =json_decode($response);
            foreach($arr->likes->data as $category){
                $findme    = $category->name;
                $search = 'Lets play Cricket today, what do you say about playing Bangladesh cricket CHI?';
                $pos2 = stripos($search, $findme);
                if ($pos2 !== false) {
                    $search = str_ireplace ( $findme , '<b>'.$findme.'</b>' , $search );
                    echo $search;               
                }       
        }

?> 
```

在这里，我得到 $category->name 中的字符串数组，例如孟加拉国、板球、CHI、Sport ...。现在，在我的 $search 字符串中，我有一个小段落，例如，我想替换与$category->name 数组。但问题是如果它得到多次替换，那么它会打印出很多次。

我不知道如何解决它，应该很容易但无法正确解决。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T07:35:19.390

`$search`在循环外声明和输出变量。：

```
$response = file_get_contents('like.json');
            $arr =json_decode($response);
$search = 'Lets play Cricket today, what do you say about playing Bangladesh cricket CHI?';

foreach($arr->likes->data as $category){
   $findme    = $category->name;
   $pos2 = stripos($search, $findme);
   if ($pos2 !== false) {
      $search = str_ireplace ( $findme , '<b>'.$findme.'</b>' , $search );            
   }       
}

echo $search; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T07:35:16.237

如果要替换搜索字符串中的所有类别名称，请先替换它们，然后以这种方式回显搜索字符串：

```
$response = file_get_contents('like.json');
$arr =json_decode($response);
$search = "Lets play Cricket today, what do"
         ." you say about playing Bangladesh cricket CHI?";
foreach($arr->likes->data as $category){
    $findme    = $category->name;
    $pos2 = stripos($search, $findme);
    if ($pos2 !== false) {
        $search = str_ireplace ( $findme , '<b>'.$findme.'</b>' , $search );
    }
}     
echo $search; 
```

# android - 从 Android Webview 查看的 jQuery Mobile 站点与设备浏览器不同

> ID：15609719
> 
> 赞同：0
> 
> 时间：2013-03-25T07:28:10.633
> 
> 标签：android, jquery-mobile, webkit, android-webview

我有一个带有显示 jQuery Mobile 站点的 Web 视图的 Android 应用程序。移动网站在 Web 视图中的行为与在设备浏览器中的行为略有不同。

在站点中，我使用静态标题和面板。在设备的浏览器中，当面板打开时，当标题向左滑动时，这可以正常工作（请参见下文）：

![在此处输入图像描述](../Images/7f2493fa9569a9de92f6cb13a9865c1d.png)

但是，当通过应用程序的 Web 视图加载时，静态标题保持 100% 的屏幕宽度并覆盖三个按钮中的第一个（请参见下文）：

![在此处输入图像描述](../Images/8255bf9b15271ea58e9f06643546714d.png)

此外，使用该应用程序时 jQuery 移动响应更容易出错/粘滞，并且在使用设备的浏览器时非常流畅。我在下面粘贴了我的 web 视图类的代码：

```
package com.example;

import com.example.R;

import android.app.Activity;
import android.os.Bundle;
import android.view.KeyEvent;
import android.view.MotionEvent;
import android.view.View;
import android.webkit.GeolocationPermissions.Callback;
import android.webkit.WebChromeClient;
import android.webkit.WebView;
import android.webkit.WebViewClient;

class MyClient extends WebChromeClient {

    @Override
    public void onGeolocationPermissionsShowPrompt(String origin,
            Callback callback) {
        callback.invoke(origin, true, false);
    }
}

public class locationPage extends Activity {

    WebView webView;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.embed);
        webView = (WebView) findViewById(R.id.webview);
        webView.setWebViewClient(new WebViewClient());
        webView.getSettings().setJavaScriptEnabled(true);
        webView.setScrollBarStyle(View.SCROLLBARS_INSIDE_OVERLAY);
        webView.getSettings().setGeolocationDatabasePath("/data/data/testWebClient");

        webView.requestFocus(View.FOCUS_DOWN);
        webView.setOnTouchListener(new View.OnTouchListener() {
            @Override
            public boolean onTouch(View v, MotionEvent event) {
                // TODO Auto-generated method stub
                return false;
            }
        });

        webView.loadUrl("http://www.example.com/mobile_site/index");

        webView.setWebChromeClient(new MyClient());

        @SuppressWarnings("unused")
        class HelloWebViewClient extends WebViewClient { 
            @Override 
            public boolean shouldOverrideUrlLoading(WebView view, String url) 
{ 
                view.loadUrl(url); 
                return true; 
            } 

    }
}
    public boolean onKeyDown(int keyCode, KeyEvent event) { 
        if ((keyCode == KeyEvent.KEYCODE_BACK) && webView.canGoBack()) { 
            webView.goBack(); 
            return true; 
        } 
        return super.onKeyDown(keyCode, event); 
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-30T02:18:41.333

我正在使用 HTML5 和 css，当使用 WebView 时，我的页面 UI 被完全破坏。

图像位置和缩放级别以及所述静态菜单的差异。

页面链接即使在使用 $mobile.changePage 函数时也有效，但页面来回闪烁。也许我需要删除 Jquery 页面链接并在没有 JQM 的情况下动态注入页面。由于您丢失了历史记录，因此不建议在浏览器上这样做。

静态菜单不动是我想要的结果，这对 WebView 来说是一个加分项。以及webview提供的全屏。

如果我找到任何解决方法，我会进行更多研究并发布一些内容。

到目前为止，JQM 的性能在两种情况下都很糟糕，我从本地存储中获取数据。本来期待效果会好很多的。。。。。。

# ios - 动态改变目标 C 中单元格的高度

> ID：15609720
> 
> 赞同：4
> 
> 时间：2013-03-25T07:28:15.700
> 
> 标签：ios, objective-c, uitableview

我创建了一个带有表格视图的应用程序。它在每个单元格中使用一个视图和一个标签。但是，如果我在 (!cell) 代码中创建视图和单元格，它会返回空单元格，如果我删除 (!cell) 条件，它会显示数据但不采用动态高度。谁能帮帮我吗。

```
- (void)viewDidLoad{ 
NSString *Path = [[NSBundle mainBundle] bundlePath];
NSString *DataPath = [Path stringByAppendingPathComponent:[NSString stringWithFormat:@"%@.plist", LanguageFile]];

NSMutableDictionary *tempDict = [[NSMutableDictionary alloc] initWithContentsOfFile:DataPath];

self.reloadArray = [tempDict objectForKey:@"Rows"];}
-(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
return [self.reloadArray count];
}

-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
return 1;
}

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {
// Get data for the current row
  NSString *textData = [reloadArray objectAtIndex:indexPath.section]

CGFloat dataTextHeight = [self getLabelHeightForIndex:textData];

    if(dataTextHeight < 44)
    {
        dataTextHeight = 44;
    }

    return dataTextHeight;
}

-(CGFloat)getLabelHeightForIndex:(NSString *)string
{
CGSize maximumSize = CGSizeMake(280, 10000);

CGSize labelHeightSize = [string sizeWithFont:[UIFont fontWithName:@"Helvetica" size:14.0f] constrainedToSize:maximumSize lineBreakMode:NSLineBreakByWordWrapping];

if(labelHeightSize.height < 44){
    labelHeightSize.height = 44;
}

return labelHeightSize.height;
}

-(UITableViewCell*)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{

static NSString *CellIdentifier = @"Cell";

static const int textViewTag = 1, textLabelTag = 2;

UIImageView *img = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"standard_back.png"]];

img.frame = tableView.frame;
tableView.backgroundView = img;

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (!cell) {

    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

    // First view
    UIView *textView = [[UIView alloc] initWithFrame: CGRectMake(0.0, 0.0, 280.0, 36.00)];
    textView.tag = textViewTag;
    textView.autoresizingMask = UIViewAutoresizingFlexibleWidth;
    [cell.contentView addSubview:textView];

    // First label
    UILabel *textLabel = [[UILabel alloc] initWithFrame:CGRectMake(10.0, 0.0, 270.0, 36.00)];
    textLabel.tag = textLabelTag;
    textLabel.font = [UIFont fontWithName:@"Helvetica-Bold" size:14.0f];
    textLabel.textColor = [UIColor whiteColor];
    textLabel.backgroundColor = [UIColor clearColor];
    textLabel.numberOfLines = 0;
    textLabel.lineBreakMode = NSLineBreakByWordWrapping;
    textLabel.autoresizingMask = UIViewAutoresizingFlexibleWidth;
    // textLabel.clipsToBounds = YES;
    [cell.contentView addSubview:textLabel];
}

    NSString *textData = [reloadArray objectAtIndex:(indexPath.section)];

    CGFloat dataTextHeight = [self getLabelHeightForIndex:textData];

    UIView *textView = [cell.contentView viewWithTag:textViewTag];
    CGRect textViewFrame = textView.frame;
    textView.frame = CGRectMake(0.0, 0.0, textViewFrame.size.width, dataTextHeight);

    UILabel *textLabel = [cell.contentView viewWithTag:textLabelTag];
    CGRect textLabelFrame = textLabel.frame;
    textLabel.frame = CGRectMake(10.0, 0.0, textLabelFrame.size.width, dataTextHeight);
    textLabel.text = textData;
    textLabel.backgroundColor= [UIColor clearColor];
    textLabel.textAlignment = NSTextAlignmentCenter;

cell.backgroundColor = [UIColor colorWithWhite:0 alpha:.65];
cell.textLabel.numberOfLines = 0; // Multiline
cell.textLabel.lineBreakMode = NSLineBreakByWordWrapping;
cell.textLabel.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;

return cell;
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-02-07T12:09:36.920

我看到了很多解决方案，但都是错误的或不完整的。你可以用 viewDidLoad 和 autolayout 中的 5 行来解决所有问题。这对于目标 C：

```
_tableView.delegate = self;
_tableView.dataSource = self;
self.tableView.estimatedRowHeight = 80;//the estimatedRowHeight but if is more this autoincremented with autolayout
self.tableView.rowHeight = UITableViewAutomaticDimension;
[self.tableView setNeedsLayout];
[self.tableView layoutIfNeeded];
self.tableView.contentInset = UIEdgeInsetsMake(20, 0, 0, 0) ; 
```

对于 Swift 2.0：

```
 self.tableView.estimatedRowHeight = 80
 self.tableView.rowHeight = UITableViewAutomaticDimension      
 self.tableView.setNeedsLayout()
 self.tableView.layoutIfNeeded()
 self.tableView.contentInset = UIEdgeInsetsMake(20, 0, 0, 0) 
```

现在使用 xib 或在 Storyboard 中的 tableview 中创建单元格有了这个，您无需再实现或覆盖。（不要忘记数字 os 行 0）和底部标签（约束）降级“Content Hugging Priority -- Vertical to 250”

[![在此处输入图像描述](../Images/215ba5ef41d58d51df5751ae0d2a40c7.png)](https://i.stack.imgur.com/65038.png)

您可以在下一个 url 中下载代码： [https ://github.com/jposes22/exampleTableCellCustomHeight](https://github.com/jposes22/exampleTableCellCustomHeight)

参考资料：[http ://candycode.io/automatically-resizing-uitableviewcells-with-dynamic-text-height-using-auto-layout/](http://candycode.io/automatically-resizing-uitableviewcells-with-dynamic-text-height-using-auto-layout/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T09:55:05.130

这是我在我的应用程序中使用的代码的一部分。它对我有用。如果你需要帮助，请联系我。

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath;
{
CGSize constraintSize = {230.0, 20000}; //230 is cell width & 20000 is max height for cell
CGSize neededSize = [ [NSString stringWithFormat:@"%@",[cellar objectAtIndex:indexPath.row]] sizeWithFont:[UIFont fontWithName:@"HelveticaNeue-Medium" size:15.0f] constrainedToSize:constraintSize  lineBreakMode:UILineBreakModeCharacterWrap];

return MAX(45, neededSize.height +33);

}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"Cell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

{        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];

}

CGSize constraintSize = {230.0, 20000};

UILabel* label = [[UILabel alloc] init];

[label setNumberOfLines:0];

label.backgroundColor = [UIColor clearColor];

[label setFont:[UIFont fontWithName:@"HelveticaNeue-Medium" size:15.0f]];

label.adjustsFontSizeToFitWidth = NO;
CGSize neededSize = [ [NSString stringWithFormat:@"%@",[cellar objectAtIndex:indexPath.row] ] sizeWithFont:[UIFont fontWithName:@"HelveticaNeue-Medium" size:15.0f] constrainedToSize:constraintSize  lineBreakMode:UILineBreakModeCharacterWrap];
// NSLog(@"Height%f",neededSize.height);
//NSLog(@"width%f",neededSize.width);
[label setText:[NSString stringWithFormat:@"%@",[cellar objectAtIndex:indexPath.row] ]];

[label setFrame:CGRectMake(10, 2, 230, MAX(neededSize.height+30, 44.0f))];

[[cell contentView] addSubview:label];

cell.selectionStyle=UITableViewCellSelectionStyleNone;

return cell;

} 
```

希望能帮助到你。！！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-19T12:17:55.830

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
     return "your content height";
} 
```

# opencv - 从 IplImage 转换为 UIImage 时质量损失

> ID：15609721
> 
> 赞同：2
> 
> 时间：2013-03-25T07:28:23.233
> 
> 标签：opencv, uiimage, iplimage

我在我的应用程序中使用 OpenCV 库，我想将最终结果用作 UIImage。我使用此代码在 IplImage 到 UIImage 之间进行转换：

```
CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
NSData * data = [[NSData alloc] initWithBytes:image->imageData length:image->imageSize];
CGDataProviderRef provider = CGDataProviderCreateWithCFData((__bridge CFDataRef)data);
CGImageRef imageRef = CGImageCreate(image->width, image->height,
                                    image->depth, image->depth * image->nChannels, image->widthStep,
                                    colorSpace, kCGImageAlphaPremultipliedLast|kCGBitmapByteOrderDefault,
                                    provider, NULL, false, kCGRenderingIntentDefault);
UIImage *ret = [[UIImage alloc] initWithCGImage:imageRef];
CGImageRelease(imageRef);
CGDataProviderRelease(provider);
CGColorSpaceRelease(colorSpace); 
```

我的问题是转换后原始图像的质量下降并且图像有点模糊。

我的代码有什么问题？

# c# - 如何在c#中为查询添加额外的值

> ID：15609722
> 
> 赞同：0
> 
> 时间：2013-03-25T07:28:23.513
> 
> 标签：c#, linq, lambda

我有这样的查询

```
var values = ProjectContext.controloptions.Where(i => i.id == id).Select(i => new {

          i.value
        }).ToList(); 
```

现在这些值包含 4 条记录，我想再添加 2 条记录，例如

```
 values.Insert(0, new { "Select" });
  values.Add("AddNew"); 
```

但它显示一个错误。`i.value`数据库中的`varchar`字段在哪里。

如何在没有额外字段的情况下将这两条记录添加到列表中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T07:33:36.710

您正在选择匿名类型。您只能通过匹配属性名称及其类型来添加此类型的另一个对象，如下所示：

```
var values = new[]{ new Options{value = 666, id = 5}} //array to demo purposes
                .Where(i => i.id == 5)
                .Select(i => new {
                              value = i.value.ToString()
                })
                .ToList();

values.Add(new {value = "Select"}); 
values.Insert(0, new {value = "AddNew"}); 
```

现在`values`包含三个匿名类型的对象（一个类型的属性`value`）`string`并且可以打印为

```
AddNew 
666 
Select 
```

考虑创建新的自定义类，然后在`Select`投影中使用它，如下所示：

```
class MyCustomClass
{
    public string Value { get; set; }
} 
```

然后在`Select`

```
List<MyCustomClass> values = new[]{ new Options{value = 666, id = 5}}
                .Where(i => i.id == 5)
                .Select(i => new MyCustomClass {
                              Value = i.value.ToString()
                    })
                .ToList();

values.Add(new MyCustomClass { Value = "Select"});              
values.Insert(0, new MyCustomClass { Value = "AddNew"}); 
```

现在您的 List 具有命名类型`List<MyCustomClass>`，并且可以使用命名类向其中添加和删除元素

# jquery - 使用 JQuery 禁用 Html 按钮一段时间

> ID：15609728
> 
> 赞同：1
> 
> 时间：2013-03-25T07:29:17.330
> 
> 标签：jquery, button, javascript

我有一个 html 按钮，我想用 jquery 禁用它，在它被点击后大约 10 秒后我想启用它。

```
$('#test').click(function(){
     $("#test").attr("disabled", true);
     $('#test').html('Bitte warten..<img src="<?=CDN('/icons/loading/loading5.gif')?>" />');
}); 
```

我的计时器部分有问题。我知道有类似的东西，`setInterval(function() {}, 5000);`但这会一遍又一遍。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T07:30:48.493

您可以使用[setTimout](http://www.w3schools.com/jsref/met_win_settimeout.asp)在间隔后启用按钮。

```
$('#test').click(function(){
     $("#test").attr("disabled", true);
     setTimout(function(){
         $("#test").attr("disabled", false); 
      }, 10000);  
     $('#test').html('Bitte warten..<img src="<?=CDN('/icons/loading/loading5.gif')?>" />');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T07:38:21.110

我希望这将有所帮助。

```
$('#some-button').attr("disabled", "disabled");
setTimeout('enableButton()', 5000);

function enableButton(){
   $('#some-button').removeAttr('disabled');
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T07:43:25.540

您可以为此使用**setTimeout函数：**

```
$('#test').click(function(){
     $("#test").attr("disabled", true);
     $('#test').html('Bitte warten..<img src="<?=CDN('/icons/loading/loading5.gif')?>" />');

     setTimout(function(){
          timeOutHit()
      }, 10000);  

});

function timeOutHit()
{
   $("#test").attr("disabled", false);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T07:45:20.860

See`setTimeout`是您希望在特定时间段内使用的选项。

```
$('#test').click(function(){
   $(this).prop("disabled", true);
   setTimout(function(){
       $(this).prop("disabled", false); 
   }, 10000);  
   $(this).html('Bitte warten..<img src="<?=CDN('/icons/loading/loading5.gif')?>" />');
}); 
```

但是，如果在这段时间内没有完成工作怎么办。如果您使用的是ajax，那么您可以尝试使用`ajaxComplete()`函数。

```
$('#test').click(function(){
   $(this).prop("disabled", true);
   $(document).ajaxComplete(function(){
       $("#test").prop("disabled", false); 
   });  
   $(this).html('Bitte warten..<img src="<?=CDN('/icons/loading/loading5.gif')?>" />');
}); 
```

# ruby-on-rails - 'roo' 中的 Excel 未初始化常量中的名称错误

> ID：15609730
> 
> 赞同：3
> 
> 时间：2013-03-25T07:29:22.633
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, excel, spreadsheet

我正在尝试在 Ruby On Rails 中读取 Excel 文件。我已经完成了这样的编码，用于从 Excel 工作表中读取单元格内容。

```
def test
 require 'rubygems'
 require 'iconv'
 require 'roo'

 s = Excel.new("C:/Sites/hmmsapp/Book1.xls")
 s.default_sheet = s.sheets.first

 1.upto(4) do |line|
   roll = s.cell(line,'A')
   puts "#{roll} -------------"
 end
end 
```

但是在运行它时它总是给我这个错误。

```
NameError in HostelController#test

uninitialized constant HostelController::Excel 
```

我还`iconv`根据针对此问题的建议包括在内。但是错误没有变化。请注意消除此错误并正确读取 excel 文件。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-25T07:32:36.223

尝试`Roo::Excel.new`

或者`Roo::Spreadsheet.new`

# android - GCM 演示不会接受服务器和应用程序重启的消息

> ID：15609731
> 
> 赞同：0
> 
> 时间：2013-03-25T07:29:24.157
> 
> 标签：android, tomcat, servlets, google-cloud-messaging

我遵循了 Android 文档提供的演示客户端/服务器教程 ( [http://developer.android.com/google/gcm/demo.html](http://developer.android.com/google/gcm/demo.html) )。当我第一次尝试时，一切都和宣传的一样。servlet 首先提出“未注册设备！” 屏幕，然后在我的设备上启动演示应用程序，我能够将演示消息发送到设备就好了。

然后我关闭了部署 gcm-demo 战争的 Tomcat 服务器，并关闭了我的设备（不是模拟器，Nexus 7）上的演示客户端应用程序。我启动了 tomcat 服务器备份，我看到它确实按预期部署了 gcm-demo 战争但是当我转到 servlet 的 URL（最初说“没有设备注册！”的那个）时，它现在说没有设备挂号的。我在我的设备上打开了该应用程序，它说该设备已在服务器上注册。为什么 servlet 看不到我已注册的设备？

我很感激任何帮助，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T11:02:14.950

我自己没有采用 Tomcat/servlet 方法，而是选择了 Apache/PHP/MySQL 方式，所以我没有直接经验，但是阅读了我在服务器的 Datastore.java 中看到的示例代码，这是：

```
/**
 * Simple implementation of a data store using standard Java collections.
 * <p>
 * This class is thread-safe but not persistent (it will lost the data when the
 * app is restarted) - it is meant just as an example.
 */ 
```

所以基本上当你重新启动 Tomcat 时，它会忘记你的 regId。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T11:18:32.777

@NickT 是对的。如果您想要 regIds 的持久存储，您可以使用`java.util.Properties`将数据存储到属性文件中的 a 进行备份，或者自己编写一个简单的文件存储。

通过删除缓存或重新安装应用程序来重置客户端应用程序的状态。

# c# - iTextSharp 不呈现自定义 urdu 字体

> ID：15609734
> 
> 赞同：3
> 
> 时间：2013-03-25T07:29:32.227
> 
> 标签：c#, fonts, itextsharp, arabic

我正在使用带有 iTextSharp 的自定义 Urdu Font [Jameel Noori Nastaleeq](http://www.ffonts.net/Jameel-Noori-Nastaleeq.font.zip)但它根本没有显示文本。当我使用诸如 times.ttf 等内置表单时，它会显示文本。

代码如下：

```
private void button1_Click(object sender, EventArgs e)
        {

            Document document = new Document();
            try
            {
                PdfWriter writer = PdfWriter.GetInstance(document, new System.IO.FileStream("C:\\iTextSharpHelloworld.pdf", System.IO.FileMode.Create));
                document.Open();
                string fontpath = Environment.GetEnvironmentVariable("SystemRoot") + "\\fonts\\Jameel Noori Nastaleeq.ttf";
                //string fontpath = Environment.GetEnvironmentVariable("SystemRoot") + "\\fonts\\times.ttf";
                BaseFont basefont = BaseFont.CreateFont(fontpath, BaseFont.IDENTITY_H, BaseFont.EMBEDDED);
                iTextSharp.text.Font arabicFont = new iTextSharp.text.Font(basefont, 24, iTextSharp.text.Font.NORMAL, iTextSharp.text.BaseColor.BLUE);
                var el = new Chunk();
                iTextSharp.text.Font f2 = new iTextSharp.text.Font(basefont, el.Font.Size,
                el.Font.Style, el.Font.Color);
                el.Font = arabicFont;
                PdfPTable table = new PdfPTable(1);

                table.RunDirection = PdfWriter.RUN_DIRECTION_RTL;

                var str = "نام : ";
                PdfPCell cell = new PdfPCell(new Phrase(10, str, el.Font));
                table.AddCell(cell);

                document.Add(table);
                document.Close();
                MessageBox.Show("Done");

            }
            catch (DocumentException de)
            {
                // this.Message = de.Message;
                MessageBox.Show(de.Message);
            }
            catch (System.IO.IOException ioe)
            {
                // this.Message = ioe.Message;
                MessageBox.Show(ioe.Message);
            }

            // step 5: we close the document
            document.Close();
        }
    } 
```

**更新：**设置`cell.ArabicOptions = ColumnText.DIGITS_EN2AN;`会以我想要的字体呈现字体，但不会呈现任何其他文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-28T18:59:44.540

用阿拉伯语写我使用以下字体：

这是在阿拉伯语中创建订单的示例对于乌尔都语是相同的

```
BaseFont basefontArabic = BaseFont.CreateFont("c:\\\\windows\\\\fonts\\\\TIMES.ttf", BaseFont.IDENTITY_H, true);
iTextSharp.text.Font farabicNormal = new iTextSharp.text.Font(basefontArabic, 10, iTextSharp.text.Font.NORMAL);
iTextSharp.text.Font farabicBold = new iTextSharp.text.Font(basefontArabic, 12, iTextSharp.text.Font.BOLD);

 `Document document = new Document(PageSize.A4);
                document.SetMargins(10f, 10f, 10f, 30f);
                PdfWriter writer = PdfWriter.GetInstance(document, new FileStream(FileName+ ".pdf", FileMode.Create));

                document.Open();

                PdfPTable table = new PdfPTable(5) { RunDirection = PdfWriter.RUN_DIRECTION_RTL, HeaderRows = 1 };
                table.SetWidths(new float[] { 1, 1, 1, 2, 1 });

                table.AddCell(new PdfPCell(new Phrase("الكمية", ReportDesigner.farabicNormal)) { GrayFill = 0.95f, HorizontalAlignment=Element.ALIGN_CENTER });
                table.AddCell(new PdfPCell(new Phrase("نوع السلعة", ReportDesigner.farabicNormal)) { GrayFill = 0.95f, HorizontalAlignment = Element.ALIGN_CENTER });
                table.AddCell(new PdfPCell(new Phrase("الوزن الصافي", ReportDesigner.farabicNormal)) { GrayFill = 0.95f, HorizontalAlignment = Element.ALIGN_CENTER });
                table.AddCell(new PdfPCell(new Phrase("س . ف", ReportDesigner.farabicNormal)) { GrayFill = 0.95f, HorizontalAlignment = Element.ALIGN_CENTER });
                table.AddCell(new PdfPCell(new Phrase("الجملة", ReportDesigner.farabicNormal)) { GrayFill = 0.95f, HorizontalAlignment = Element.ALIGN_CENTER });

                foreach (OrderDetailsEntity item in Order.Details)
                {
                    table.AddCell(new PdfPCell(new Phrase(item.Quantité.ToString("N3"), ReportDesigner.farabicNormal)));
                    table.AddCell(new PdfPCell(new Phrase(item.ArticleLigneFacture.Désignation, ReportDesigner.farabicNormal)));
                    table.AddCell(new PdfPCell(new Phrase(item.QantitéEmballage.ToString("N3"), ReportDesigner.farabicNormal)));
                    table.AddCell(new PdfPCell(new Phrase(item.PrixAchatUnitaire.ToString("N3"), ReportDesigner.farabicNormal)));
                    table.AddCell(new PdfPCell(new Phrase(item.TotalLigneFacture.ToString("N3"), ReportDesigner.farabicNormal)));
                }
document.Add(table);
                document.Close();` 
```

![输出](../Images/4980384736a0aaefd47056ac671f4a7a.png)

# html - 在 iOS 中 HTML 到 PDF 的转换和编辑

> ID：15609735
> 
> 赞同：4
> 
> 时间：2013-03-25T07:29:39.480
> 
> 标签：html, ipad, pdf-generation, font-size

我正在创建一个用于阅读 PDF 的 iPad 应用程序，此 PDF 应从 HTML 文件生成。我已经看到了一些将 HTML 转换为 PDF 的示例代码，我认为这部分对我来说可以实现。

我从 AppStore 看到了一些用于阅读 PDF 文件的应用程序，其中有一个选项可以增加字体大小（不缩放）、颜色样式等。当我们增加字体大小时，文本内容会自动换行到下一行。如何在我的应用程序中实现这一点？关于他们将如何做到这一点的任何想法？

我在一些帖子中看到，无法编辑 PDF 文件，那么他们实际上是使用 PDF 文件还是其他格式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T16:39:29.750

在呈现您的 PDF 以将其显示给用户时，您可以将其转换为其他格式，例如 HTML，然后允许用户更改字体大小、字体样式。所以你的PDF保持不变。此外，与 PDF 等二进制格式的文档相比，HTML 更容易操作。

# javascript - 是否有用于根据数字分配月份名称的 JQuery API。

> ID：15609738
> 
> 赞同：0
> 
> 时间：2013-03-25T07:30:02.303
> 
> 标签：javascript, jquery

我正在处理 SharePoint 列表，从列表中获取日期，通常采用以下格式：2013-03-25。

我已经拆分日期并分配给一个变量。

代码。

```
var splitDate = resultRegionArr[x].NewsDate.split("-"); 
```

现在，我想知道是否有任何 Jquery API 在输入值“03”或 splitDate[1] 时返回字符串“March”。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T07:35:35.220

试试 [www.datejs.com/](http://www.datejs.com/)，例如：

```
alert(Date.parse('2013-03-25').toString('dd MMMM yyyy')) // 25 March 2013 
```

这会给你你想要的还有其他功能！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T07:36:08.427

```
var months = [ "January", "February", "March", "April",
               "May", "June", "July", "August",
               "September", "October", "November", "December" ];

var selectedMonthName = months[splitDate[1] - 1]; 
```

`- 1`是可选的。取决于您的输入/输出`splitDate[1]`。

# java - JTwain API 不适用于特定机器上的某些扫描仪

> ID：15609741
> 
> 赞同：0
> 
> 时间：2013-03-25T07:30:25.807
> 
> 标签：java, twain, image-scanner

我正在使用 JTwain API 从我的 java Web 应用程序连接到扫描仪。但是，它不适用于某些扫描仪。现在我担心我的代码是否有一些错误或某些扫描仪与 JTwain API 不兼容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T05:15:15.957

您可能想验证 JTwain 支持什么协议以及您的扫描仪是否有相应的驱动程序。如果是 TWAIN，可以使用TWAIN 工作组提供的[Twacker进行验证。](http://www.twain.org/scannerdriverdevelopers/specification-and-tools.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-19T13:35:13.567

JTwain 的供应商发布了一个后继产品[Java 扫描和成像 SDK，它允许您从 TWAIN WIA 扫描仪](http://asprise.com/document-scanner-image-pdf/java-scanning-api-overview.html)对 64 位和 32 位 JVM 进行 Java 文档扫描。

> [Asprise 扫描和成像 SDK](http://asprise.com/document-scanner-image-pdf/java-scanning-api-overview.html)提供高性能 API 库，因此您可以在 Windows 32 位/64 位和 Mac OS X 上从几乎所有类型的 TWAIN WIA 扫描仪中获取图像并完全控制。借助 SDK 强大而灵活的 API，您可以为您的 Java 应用程序（Java 小程序、Web 应用程序、Swing/JavaFX 组件、JEE 企业应用程序）配备高速文档扫描（例如，ADF 批量扫描到多页 PDF）和图像采集功能。您可以放心，SDK 完全符合 HIPPA 和 HITECH 等各种政府隐私法案。

Asprise Java Scanning SDK 支持大多数扫描仪：Acer、AGFA、Brother、Canon、Dell、Epson、Fujitsu、HP、IBM、Kodak、Konica Minolta、Lexmark、NEC、Nikon、Olympus、Panasonic、Ricoh、Samsung、Xerox 和许多更多 TWAIN WIA 扫描仪和相机。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2022-02-18T12:55:31.977

此软件有 30 天试用期。30 天后，您需要购买许可证。(5K)

# android - Android Flurry 未命中事件日志和参数

> ID：15609742
> 
> 赞同：0
> 
> 时间：2013-03-25T07:30:33.917
> 
> 标签：android, analytics, flurry

我已将 Flurry SDK 集成到 Android 应用程序中。当我们主动测试我们的应用程序时，控制台充满了事件日志，每个事件都有一个参数列表。

我们准备要发布的应用程序：使用混淆编译测试候选 apk 并将它们提供给最终测试。我们开始在控制台中收到非常奇怪的统计信息：对于某些事件，名称存在，但日志为空且不存在参数。

我们认为这是由于混淆，一百次审查我们的 Proguard 配置，下一行出现：

```
-dontwarn com.flurry.**
-keep class com.flurry.** { *; } 
```

我们创建了 4 个测试密钥并使用不同设置的组合编译了应用程序：混淆/非混淆和记录到 logcat/不记录。（我们将params的HashMap打印到log中，我不说flurry log to logcat）。混淆的 apk 与非混淆的 apk 没有任何不同：对于某些事件，事件名称存在，但日志和参数丢失。

我注意到“一切都很酷，一切都被记录”和“某些事件只有名称”这两个时期之间的区别：

1.  第一个时期是在 2013 年 3 月 18 日 Flurry 服务器故障之前，第二个时期是在它之后。
2.  在我们的测试人员积极使用应用程序的第一阶段，事件经常被调用。在第二个阶段，我们的测试人员尝试尽可能少地调用每个事件（但至少 1 次）。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T06:50:04.760

感谢您将此查询发送给 Flurry 支持。正如机票上所讨论的，我们需要您提供更多信息。期待你的邮件。

（全面披露：我在 Flurry 的支持团队工作）

# asp.net-mvc - 从 @Html.EditorFor 中的 DateTime 属性中删除时间

> ID：15609746
> 
> 赞同：0
> 
> 时间：2013-03-25T07:31:05.650
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

我想从 Razor 的 DateTime 属性中删除时间

```
@Html.EditorFor(model => model.DATE_OF_BIRTH) 
```

我试过了`model.DATE_OF_BIRTH.Date`，`model.DATE_OF_BIRTH.Date.ToShortDateString()`

但显示错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T07:35:23.407

您可以使用以下属性装饰您的视图模型`[DisplayFormat]`属性：

```
[DisplayFormat(ApplyFormatInEditMode = true, DataFormatString = "{0:dd/MM/yyyy}")]
public DateTime DATE_OF_BIRTH { get; set; } 
```

然后`@Html.EditorFor(x => x.DATE_OF_BIRTH)`助手将根据您定义的格式显示值。

如果您不使用视图模型并且无法修改域模型，则可以使用 TextBox 助手：

```
@Html.TextBox("DATE_OF_BIRTH", Model.DATE_OF_BIRTH.ToShortDateString()) 
```

# android - 缓存策略：如果在 LimitedAgeMemoryCache 中，则从那里加载，否则从 Web 加载。失败时回退到 UnlimitedDiscCache

> ID：15609749
> 
> 赞同：0
> 
> 时间：2013-03-25T07:31:10.340
> 
> 标签：android, universal-image-loader

是否可以做到以上几点？

我的场景是天气图形，其 URL 保持不变，而底层图像实际上发生了变化。以下是我想介绍的情况： - 在我的应用程序的同一会话中（通常 2-5 分钟），我不想从网络重新加载图像 - 大约 15 分钟后，图像可能已经改变，因此甚至如果我有缓存版本，我想转储它。- 当尝试在离线时重新加载图像时，任何图像（包括旧图像）都比没有图像好，所以我想从磁盘缓存中显示它。

这种设置可以吗？如果它对 UIL 可行，这似乎不是很明显。

感谢伟大的图书馆！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T08:17:21.450

我认为这是您的解决方案：

```
File cacheDir = StorageUtils.getCacheDirectory(context); // or any other folder
MemoryCacheAware<String, Bitmap> memoryCacheCore 
          = new LruMemoryCache(4 * 1024 * 1024); // or any other implementation

MemoryCacheAware<String, Bitmap> memoryCache 
          = new LimitedAgeMemoryCache<String, Bitmap>(memoryCacheCore, 15 * 60);
DiscCacheAware discCache = new LimitedAgeDiscCache(cacheDir, 15 * 60);
ImageLoaderConfiguration config = new ImageLoaderConfiguration.Builder(context)
        .memoryCache(memoryCache)
        .discCache(discCache)
        ...
        .build(); 
```

**UPD：** UIL 总是首先在内存缓存中搜索需要的图像。然后 UIL 在磁盘缓存中搜索它。然后它从网络下载图像。

如果您使用“限制年龄”内存缓存或磁盘缓存，则位图或图像文件将在超时后从缓存中删除（实际上它们将在缓存中搜索时被删除）。逻辑如下：

1.  在内存缓存中搜索位图
    *   需要的位图在那里
        *   位图在指定时间之前被添加到缓存中
            *   从内存缓存中删除它，转到步骤 2
        *   位图最近被添加到缓存中
            *   获取位图，显示它。结尾。
    *   缓存中不需要位图，转到步骤 2
2.  在磁盘缓存中搜索图像文件
    *   需要的图像在那里
        *   图像被添加到缓存中的时间超过了指定时间
            *   从磁盘缓存中删除它，转到步骤 3
        *   图像最近被添加到缓存
            *   将图像解码为位图，显示它。结尾。
    *   缓存中不需要图像，转到步骤 3
3.  下载图片

不要忘记启用缓存（在显示选项中`DisplayImageOptions`）。

# java - Java中Integer.MAX_VALUE的乘法

> ID：15609751
> 
> 赞同：7
> 
> 时间：2013-03-25T07:31:22.860
> 
> 标签：java

我只是在玩Java。写了这个小程序：

```
public class MaxValue{
    public static void main(String[] args){
        int i  =  Integer.MAX_VALUE;
        for(int j = 1; j<=10;j++){
            System.out.println(i*j);
        }
    }
} 
```

输出如下：

> 2147483647
> 
> -2
> 
> 2147483645
> 
> -4
> 
> 2147483643
> 
> -6
> 
> 2147483641
> 
> -8
> 
> 2147483639
> 
> -10

现在我很惊讶。我不知道如何解释这个输出。我知道我可以使用 long 来处理超过整数最大限制的值。但是我只想知道java如何计算这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T08:02:45.530

我们需要分析结果的二进制内容：

Integer.MAX_VALUE * 1 = 0x7fffffff 十进制 2147483647

Integer.MAX_VALUE * 2 = 0xffffffffe 即 -2

Integer.MAX_VALUE * 3 = 0x17ffffffd 但它是 33 位，截断后是 0x7ffffffd 即 2147483645

等等...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T07:44:47.110

它被称为溢出。由于您在最大可能值上进行操作，因此任何数学递增操作都可能最终导致溢出。

有关 Java 溢出的更多信息：http: [//javapapers.com/core-java/java-overflow-and-underflow/](http://javapapers.com/core-java/java-overflow-and-underflow/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T07:40:32.820

您所遇到的称为`overflow`原始类型 java 将通过以下方式处理此问题： - 到达时`Integers.MAX_VALUE`它只会转到 the `Integer.MIN_VALUE`，这样您只会得到一个负值

# math - 在 (ab)%n 上进行模运算的结果是什么

> ID：15609752
> 
> 赞同：1
> 
> 时间：2013-03-25T07:31:24.687
> 
> 标签：math, language-agnostic, modulo, modulus

最近我解决了一个我必须计算 (ab)%n 的问题。当 ab 是正数时，结果是不言自明的，但对于负数，我得到的结果似乎令人困惑..我只是想知道我们如何计算这个结果为负数。

任何处理模运算符属性的链接都是最受欢迎的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T07:42:05.577

[http://en.m.wikipedia.org/wiki/Modulo_operation](http://en.m.wikipedia.org/wiki/Modulo_operation)

在许多编程语言（C、Java）中，模运算符被定义为模数与第一个操作数具有相同的符号。这意味着以下等式成立：

```
(-a) % n = -(a % n) 
```

例如，-8%3 将是 -2，因为 8%3 是 2。

其他的，例如 Python，计算 a % n 代替 n 潜水时的正余数，这意味着

```
(-a) % n = n - (a % n) 
```

例如，-8%3 是 1，因为 3-(8%3) 是 3-2 是 1。

请注意，在[模算术](http://en.wikipedia.org/wiki/Modular_arithmetic)中，添加或减去 n 的任何倍数都不会改变结果，因为“相等”（如果您更喜欢该术语，则为*全等*）是根据可除性定义的：如果 X 是 n 的倍数，则 X 等于 0，如果 AB 是 n 的倍数，则 A 等于 B。例如 -2 等于 1 模 3，因为 -2-1 = -3 可以被 3 整除。

# java - Spring 和 XML 响应

> ID：15609759
> 
> 赞同：1
> 
> 时间：2013-03-25T07:31:37.423
> 
> 标签：java, xml, spring

我通过@ResponseBody 遇到了Spring MVC 和XML 响应问题。这是我的 web.xml：

```
<web-app xmlns="http://java.sun.com/xml/ns/javaee"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://java.sun.com/xml/ns/javaee
      http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
       version="2.5">

<filter>
    <filter-name>FormEncodingSetterFilter</filter-name>
    <filter-class>ua.yura.controllers.EncodingFilter.BKIFilter</filter-class>
    <init-param>
        <param-name>encoding</param-name>
        <param-value>UTF-8</param-value>
    </init-param>
</filter>
<filter-mapping>
    <filter-name>FormEncodingSetterFilter</filter-name>
    <url-pattern>*.htm</url-pattern>
</filter-mapping>

<servlet>
    <servlet-name>bki</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>    

<servlet-mapping>
    <servlet-name>bki</servlet-name>
    <url-pattern>*.htm</url-pattern>
</servlet-mapping>

<welcome-file-list>
    <welcome-file>index.jsp</welcome-file>
</welcome-file-list> 
```

这是我的 bki-servlet.xml：

```
<beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns:context="http://www.springframework.org/schema/context"
   xmlns:mvc="http://www.springframework.org/schema/mvc" xmlns:util="http://www.springframework.org/schema/util"
   xsi:schemaLocation="http://www.springframework.org/schema/beans
   http://www.springframework.org/schema/beans/spring-beans.xsd
   http://www.springframework.org/schema/context
   http://www.springframework.org/schema/context/spring-context.xsd
   http://www.springframework.org/schema/mvc
   http://www.springframework.org/schema/mvc/spring-mvc.xsd http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd">

<context:component-scan base-package="ua.yura.controllers"/>

<mvc:annotation-driven/>

<mvc:resources mapping="/img/**" location="/imgs/"/> 
```

和 XMLController 类：

```
@Controller
@RequestMapping( value = "/xml" )
    public class XMLController {
        @RequestMapping( value = "/test.htm", headers = "accept=application/xml")
        @ResponseBody
        public Client test() {
            System.out.println("aaaa");
            Client client = new Client(-1,"1","1","1","1","1","1","1");
            return client;
        }
} 
```

带有注释@XMLRoot 和@XMLElement 的类客户端。在我的另一个 java 应用程序中，我想向调度程序 servlet 发送请求并使用 Client 对象取回 XML 数据。我试着下一步做：

```
URL my = new URL("http://localhost:8080/xml/test.htm");
        HttpURLConnection yc = (HttpURLConnection)my.openConnection();
        yc.addRequestProperty("accept", "application/xml");

        //yc.setRequestMethod("GET");
        BufferedReader in = new BufferedReader( new InputStreamReader( yc.getInputStream() ));
        String inputLine;

        while( (inputLine = in.readLine()) != null)
            System.out.println( inputLine);
        in.close(); 
```

但我每次收到错误 406，Web 浏览器都会显示下一条消息： *此请求标识的资源只能生成具有根据请求“接受”标头不可接受的特征的响应。* 任何人都可以帮助解决我的错误。

# java - java 1.6 和 1.7 连接到 sql server 2000

> ID：15609760
> 
> 赞同：1
> 
> 时间：2013-03-25T07:31:38.807
> 
> 标签：java, sql, jdbc

我已经用 java 编写了一个 Gui 应用程序，并且在使用 jdbc4 API 连接到 SQL 2008 时一切正常。但是我现在需要连接到 SQL 2000。我已经降级到 jdbc 驱动程序 3，但这与 java 1.6/7 不兼容，需要 v 1.5。

有什么方法可以让较新版本的 java 连接到旧 SQL 2000。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T07:35:23.733

看看这个页面。兼容 JRE 7 的 JDBC 驱动程序 3.0。

[http://www.microsoft.com/en-in/download/details.aspx?id=28562](http://www.microsoft.com/en-in/download/details.aspx?id=28562)

或者看看jTDS。

[http://jtds.sourceforge.net/](http://jtds.sourceforge.net/)

阅读这些帖子也可能有所帮助。

[如何使 Java 与 SQL Server 一起工作？](https://stackoverflow.com/questions/1310536/how-to-make-java-work-with-sql-server)

[java.sql.SQLException：此驱动程序不支持 SQL Server 版本 8。SQL 状态 = 08S01，错误代码 = 0](https://stackoverflow.com/questions/12732957/java-sql-sqlexception-sql-server-version-8-is-not-supported-by-this-driver-sql)

# css - CSS 不透明度 0 与 0.0001

> ID：15609761
> 
> 赞同：10
> 
> 时间：2013-03-25T07:31:39.623
> 
> 标签：css

我在 github 上注意到，他们在想要透明的某些元素上使用了 0.0001 的不透明度，而不是 0。这是为什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-25T07:37:20.847

如果将 opacity 设置为**0**，它将从页面中消失。但是，如果您将 opacity 设置为**0.0001**，它仍然在页面上（只是“很难看到”）并保持它的功能（例如点击等）。

# xml - 使用 vba 将导入的 XML 工作表导出为 excel

> ID：15609762
> 
> 赞同：0
> 
> 时间：2013-03-25T07:31:42.657
> 
> 标签：xml, excel

我是 vba 的新手，我正在尝试通过将 XML 文件导入 excel 来处理它，进行一些更改并将更改后的 excel 表再次导出到同一个 xml 文件。我成功地将 xml 导入我的 excel 并编辑它但没有得到如何将更改后的工作表再次保存到 xml。

我在“路径”中有 xml 文件的路径，我用它来导入 xml 文件现在我想将更改后的 Excel 工作表导出到“路径”。

一个示例 VBA 代码将是一个很大的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-23T14:38:14.073

确保您已在 Excel 中启用开发人员功能区。从 XML 部分中选择“源”。您应该能够在工作表右侧的新框架中看到与 XML 关联的地图和名称。

如果您想导出另存为 XML 或只是...

```
Sub saveAsXml()
ActiveWorkbook.XmlMaps("my_map").Export URL:="path ..."
End Sub 
```

希望有帮助

# perl - Catalyst 链式路由“循环”

> ID：15609765
> 
> 赞同：2
> 
> 时间：2013-03-25T07:31:51.873
> 
> 标签：perl, catalyst, chained

我有一个我无法解决的问题，希望你能帮忙:)

我已经构建了一个带有 Web 界面的 CataPLACK 应用程序。现在我应该建立一个 JSON/REST/XML-Api，所以我想我可以做这样的事情：

```
/ => root
/blog/ => ... 
/news/ => ...
/api =>chainedTo(root) PathPart(api) Args(1) { set_view($arg) }; 
```

我如何将 api 循环回根 (/)，这样我就可以用不同的视图重新调度整个请求，而不必建立很多“假例程”？

我觉得必须有一个干净的方式......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T02:45:51.397

看看手册中`$c->forward`/`$c->detach`和`$c->visit`/之间的区别`$c->go`。我想你会发现你可能会`$c->go()`从你的 api 方法中构建一个构造来实现你所追求的。

但它仍然有点混乱，特别是如果您必须手动将 URI 取消引用回操作。

通过在末尾而不是开头添加“api”路径部分，您可以以更少的麻烦实现相同的效果，因此它只是成为您可以在`auto`子程序中测试的请求的参数，并设置任何存储你需要的变量。然后你不需要做任何重新调度。只有您可以决定这样的 URI 方案是否足够干净并适合您的应用程序。

# c# - 如何从json字符串中删除属性

> ID：15609766
> 
> 赞同：0
> 
> 时间：2013-03-25T07:31:58.777
> 
> 标签：c#, asp.net, json

嗨，下面是我的 JSON 字符串

```
\"Education\":{\"EducationLevel\":[\"\"],\"WithCertification\":[\"CISCO\"]" 
```

我怎样才能`" \"EducationLevel\":[\"\"]"`从我的字符串中删除它并应该得到以下 JSON 字符串

```
\"Education\":{\"WithCertification\":[\"CISCO\"]" 
```

我正在使用 `string filterString = JsonHelper.JsonSerializer(filters)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T07:36:42.250

您可以使用`yourString.Replace()`功能删除任何不需要的`chars`或`strings`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T07:46:44.747

您可以利用 asp.net 中的 json。
这是一个 msdn 链接
[http://msdn.microsoft.com/en-us/library/cc197957%28v=vs.95%29.aspx](http://msdn.microsoft.com/en-us/library/cc197957%28v=vs.95%29.aspx)

更多阅读
[Parsing JSON data with C#](https://stackoverflow.com/questions/4109807/parsing-json-data-with-c-sharp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T07:47:49.840

我认为@Thilo 的意思是这样的——

```
 const string Test = "{\"Education\":{\"EducationLevel\":[\"\"],\"WithCertification\":[\"CISCO\"]}}";
        var deserializeObject = JsonConvert.DeserializeObject<dynamic>(Test);
        var other = new { Education = new { EducationLevel = deserializeObject.EducationLevel } };
        var serializeObject = JsonConvert.SerializeObject(other);
        Console.WriteLine(serializeObject); 
```

注意 - 我正在使用[JSON.Net](http://james.newtonking.com/projects/json-net.aspx)

# sql-server - 如何使用 SSIS 包将 Sharepoint 列表中的 Yes/No 字段数据复制到 Sharepoint 列表？

> ID：15609772
> 
> 赞同：0
> 
> 时间：2013-03-25T07:32:32.917
> 
> 标签：sql-server, sharepoint, ssis

我正在使用 SSIS 包复制共享点列表数据，并且它们正在完美复制。但问题是，当有一个选择字段或是/否字段时，它只会将默认值复制到目标，无论源中有哪个值。那么，有没有办法解决这个问题呢？

# draggable - 限制仅向一个方向拖动

> ID：15609776
> 
> 赞同：7
> 
> 时间：2013-03-25T07:32:39.360
> 
> 标签：draggable, jquery-ui-draggable, jquery-draggable

使用[jQuery 可拖动](http://jqueryui.com/draggable/)

如何限制可拖动对象**只能在一个方向**拖动？
即仅在顶部或仅底部时`axis: 'y'`
以及仅在左侧或仅在右侧时`axis: 'x'`

这意味着如果我只想将一个可拖动对象`(with axis set to 'y')`拖到`bottom`，那么它不应该能够将它拖到顶部，即当试图向顶部拖动时它应该保持在原位

这是我尝试过但不起作用的方法，即可拖动仍然向上拖动

```
$('. draggable').draggable({
    axis: 'y',
    handle: '.top'
    drag: function( event, ui ) {
       var distance = ui.originalPosition.top - ui.position.top;

       // if dragged towards top
       if (distance > 0) { 
           //then set it to its initial state
           $('.draggable').css({top: ui.originalPosition.top + 'px'});
       }
   }
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-14T06:15:14.173

回答我自己的问题（除了上述答案之外的其他选择）以帮助他人

以特定情况为例**，当轴：'y'时只允许向下拖动**

```
<div class="draggable">draggable only downwards</div> 
```

**css**

```
.draggable {
    position:absolute;
    top:0px;
    background:pink;
    height:100px;
    width:100%;
    left: 0px;
    text-align:center;
} 
```

**脚本**

```
$('.draggable').draggable({
    axis: "y"
});    

$('.draggable').on('mousedown', function() {
    var x1 = x2 = $(".draggable").position().left;
    var y1 = $(".draggable").position().top;
    var y2 = ($(window).height() + $(".draggable").position().top);
    $(".draggable").draggable('option', 'containment', [x1, y1, x2, y2]);
}); 
```

**[演示链接](http://jsfiddle.net/uttara/KLPSC/4/)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-11T05:01:47.327

**方法 1 - 使用 Revert Hack**

**[jsFiddle](http://jsfiddle.net/apaul34208/Pk3xC/)**

```
 $('.draggable').draggable({
     axis: "y",
     start: function (event, ui) {
         start = ui.position.top;
     },
     stop: function (event, ui) {
         stop = ui.position.top;

         if (start > stop) {
             $('.draggable').css({top: ui.originalPosition.top + 'px'});
         }
     }
 }); 
```

**方法 2 - 禁用拖动而不还原**

**[jsFiddle 2](http://jsfiddle.net/apaul34208/Pk3xC/5/)**

基本上方法2只是将可拖动元素限制在容器中，并使用可拖动元素移动容器。看看，它出奇地简单，但有效。

```
$('.draggable').draggable({
    axis: "y",
    containment: "#containment-wrapper",
    scroll: true,
    scrollSensitivity: 100,
    scrollSpeed: 25,
    cursor: '-moz-grabbing'
});
$('.draggable').mousemove(function () {
    var x = $('.draggable').css('top');
    $("#containment-wrapper").css({
        top: x
    });
}); 
```

**方法3** 效果和方法2一样，只是使用了拖拽功能。

**[jsFiddle 3](http://jsfiddle.net/apaul34208/Pk3xC/7/)**

```
$('.draggableDown').draggable({
    axis: "y",
    containment: "#containment-wrapperDown",
    scroll: true,
    scrollSensitivity: 100,
    scrollSpeed: 25,
    cursor: '-moz-grabbing',
    drag: function () {
        var x = $('.draggableDown').position().top;
        $("#containment-wrapperDown").css({
            top: x
        });
    }
}); 
```

# c# - 数据库访问 WPF MVVM 的最后一步

> ID：15609777
> 
> 赞同：0
> 
> 时间：2013-03-25T07:32:41.717
> 
> 标签：c#, wpf, database, entity-framework, mvvm

我想我现在掌握了大部分知识，但遗憾的是我找不到任何可以真正帮助我的教程，因为大多数人都在使用 SQL 连接，而我正在使用实体框架。

到目前为止，我创建了一个名为 Farve 的 CSLA 业务类和一个名为 FarbeListe 的 CSLA 业务列表类。在我的 xaml 中，我有一个列出模型的网格视图。但我现在不知道如何获取数据，但我确信我已经很接近了。请帮我举一个简单的例子，不要发布任何教程。我想我现在最了解他们，但他们仍然没有帮助。

这是我的 csla 类 Farbe

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using Csla;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows;
using MusterConnectionDB.Datenbank;

namespace MusterConnectionDB.Business
{
    [Serializable]
    public class Farbe : Csla.BusinessBase<Farbe>
    {

        TestDBEntities db = new TestDBEntities();

        public Farbe()
        {
            BusinessRules.AddRule(new Csla.Rules.CommonRules.Required(FarbauswahlNrProperty));
            BusinessRules.AddRule(new Csla.Rules.CommonRules.MinValue<int>(FarbauswahlNrProperty, 3));

        }

        #region Properties

        public static readonly PropertyInfo<int> FarbauswahlNrProperty = RegisterProperty<int>(c => c.FarbauswahlNr);
        public int FarbauswahlNr
        {
            get { return GetProperty(FarbauswahlNrProperty); }
            set
            {

                SetProperty(FarbauswahlNrProperty, value);
            }
        }

        public static readonly PropertyInfo<string> KurztextProperty = RegisterProperty<string>(c => c.Kurztext);
        public string Kurztext
        {
            get { return GetProperty(KurztextProperty); }
            set { SetProperty(KurztextProperty, value); }
        }

        public static readonly PropertyInfo<string> RessourceProperty = RegisterProperty<string>(c => c.Ressource);
        public string Ressource
        {
            get { return GetProperty(RessourceProperty); }
            set { SetProperty(RessourceProperty, value); }
        }

        public static readonly PropertyInfo<bool> Vari1Property = RegisterProperty<bool>(c => c.Vari1);
        public bool Vari1
        {
            get { return GetProperty(Vari1Property); }
            set { SetProperty(Vari1Property, value); }
        }

        public static readonly PropertyInfo<string> Vari2Property = RegisterProperty<string>(c => c.Vari2);
        public string Vari2
        {
            get { return GetProperty(Vari2Property); }
            set { SetProperty(Vari2Property, value); }
        }

        #endregion

        #region Synchronous Factory Methods

        public class DataEventArgs : EventArgs
        {
            public DataEventArgs(Farbe data)
            {
                this.Data = data;
            }

            public Farbe Data { get; set; }
        }

        internal static Farbe New()
        {
            return DataPortal.CreateChild<Farbe>();
        }

        internal static Farbe Get(Farbe data)
        {
            if (data == null)
                return null;

            return DataPortal.FetchChild<Farbe>(data);
        }

        #endregion

        #region DataProtal Methods

        private void Child_Update()
        {
            using (var ctx = Csla.Data.ObjectContextManager<TestDBEntities>.GetManager(EntitiesDatabase.Name))
            {
                var data = ctx.ObjectContext.Farben.SingleOrDefault(e => e.FarbauswahlNr == this.FarbauswahlNr);

                data.Kurztext = ReadProperty<string>(KurztextProperty);
                data.Ressource = ReadProperty<string>(RessourceProperty);
                data.Var1 = ReadProperty<bool>(Vari1Property);
                data.Vari2 = ReadProperty<string>(Vari2Property);
                ctx.ObjectContext.SaveChanges();

            }
        }

        private void Child_Insert()
        {
            using (var ctx = Csla.Data.ObjectContextManager<TestDBEntities>.GetManager(EntitiesDatabase.Name))
            {

                try
                {
                    var data = new Datenbank.Farbe();
                    data.Kurztext = ReadProperty<string>(KurztextProperty);
                    data.Ressource = ReadProperty<string>(RessourceProperty);
                    data.Var1 = ReadProperty<bool>(Vari1Property);
                    data.Vari2 = ReadProperty<string>(Vari2Property);
                    ctx.ObjectContext.Farben.AddObject(data);
                    ctx.ObjectContext.SaveChanges();
                }
                catch (Exception e)
                {

                    MessageBox.Show(e.ToString());
                }

            }
        }

        private void Child_Delete()
        {

            using (var ctx = Csla.Data.ObjectContextManager<TestDBEntities>.GetManager(EntitiesDatabase.Name))
            {
                try
                {
                    var data = ctx.ObjectContext.Farben.SingleOrDefault(e => e.FarbauswahlNr == this.FarbauswahlNr);
                    ctx.ObjectContext.Farben.DeleteObject(data);
                    ctx.ObjectContext.SaveChanges();
                }
                catch (Exception e)
                {
                    MessageBox.Show(e.ToString());

                }
            }
        }

        #endregion

    }
} 
```

现在我的 CLSA 清单 klass FarbeListe

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using Csla;
using MusterConnectionDB.Business;

namespace MusterConnectionDB.Business
{
    public class FarbeListe : Csla.BusinessListBase<FarbeListe, Farbe>
    {
        public FarbeListe()
        {

        }

        protected override void Child_Create()
        {
            base.Child_Create();
        }

        private void Child_Fetch(IEnumerable<Farbe> data)
        {

            RaiseListChangedEvents = false;

            foreach (var item in data)
            {
                this.Add(Farbe.Get(item));

            }

            RaiseListChangedEvents = true;
        }

        internal static FarbeListe Get(IEnumerable<Farbe> data)
        {
            if (data == null)
                return null;

            return DataPortal.FetchChild<FarbeListe>(data);
        }

        internal static FarbeListe New()
        {
            return DataPortal.CreateChild<FarbeListe>();
        }

        internal static FarbeListe GetAll()
        {

            return DataPortal.Fetch<FarbeListe>();
        }
    }

} 
```

如何编写模型类 FarbeViewModel 的方法？我只需要获取属性模型的数据。

```
public void ExecuteAktu(object obj)
{

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T12:15:06.333

FarbeViewModel 的构造函数中的这一行

```
Model =  MusterConnectionDB.Business.FarbeListe.GetAll(); 
```

这在 FarbListe CSLA BusinessList 类中

```
 private void DataPortal_Fetch()
    {
        using (var ctx = Csla.Data.ObjectContextManager<Datenbank.TestDBEntities>.GetManager(EntitiesDatabase.Name))
            ReadData(ctx.ObjectContext.Farben);
    }

    private void ReadData(IEnumerable<Datenbank.Farbe> data)
    {
        // Partial Method BeforeReadData

        RaiseListChangedEvents = false;

        foreach (var item in data)
            this.Add(Farbe.Get(item));
        RaiseListChangedEvents = true;

    } 
```

最后在商务舱 Farbe

```
 internal static Farbe Get(Datenbank.Farbe data)
    {
        try
        {
            if (data == null)
                return null;

            return DataPortal.FetchChild<Farbe>(data);
        }
        catch (System.Exception e)
        {
            MessageBox.Show(e.ToString()); 
        }
        return null;

    }

    private void Child_Fetch(Datenbank.Farbe data)
    {

        LoadProperty(FarbauswahlNrProperty, data.FarbauswahlNr);
        LoadProperty(KurztextProperty, data.Kurztext);
        LoadProperty(RessourceProperty, data.Ressource);
        LoadProperty(Vari1Property, data.Var1);
        LoadProperty(Vari2Property, data.Vari2);

    } 
```

这就是我从数据库中读取数据的方式...... -.-' 简单吧？:D

# jquery - jQuery Font-Family 在 Javascript 中不起作用

> ID：15609778
> 
> 赞同：1
> 
> 时间：2013-03-25T07:32:42.890
> 
> 标签：jquery, css, fonts, font-face, font-family

我有一些关于字体系列的问题。

我的应用程序中有 6 个品牌，对于每个品牌，我需要使用 6 种不同的字体显示。

在脚本标签内，

我必须检查这样的条件，

```
if(selectedbrand=="Brand1")
{
$('body').css({
"font-family":'Conv_SF Slapstick Comic'
 });
} 
```

我将@font-face 保存在单独的 css 中，例如，

```
@font-face {
                font-family: 'Conv_SF Slapstick Comic';
                src: url('fonts/SF Slapstick Comic.eot');
                src: local('SF Slapstick Comic'), url('fonts/SF Slapstick Comic.woff') format('woff'), url('fonts/SF Slapstick Comic.ttf') format('truetype'), url('fonts/SF Slapstick Comic.svg') format('svg');
                font-weight: normal;
                font-style: normal;
} 
```

但是 font-family 不适用，因为它采用的是普通的 jQuery CSS 字体。

请尽早向我推荐一个解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T07:37:06.777

您应用于身体的字体系列是：

```
"font-family":'Conv_Gotham-Medium !important' 
```

但是，您为创建的字体指定的名称`@font-face`是：

```
font-family: 'Conv_SF Slapstick Comic'; 
```

* * *

您需要在两个地方使用相同的值。尝试使用这个：

```
font-family: 'Conv_Gotham-Medium'; 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-25T07:45:11.317

看起来问题出在css选择器上

看这个例子

```
 $(selector).css(property,value) 
```

你的陈述

```
 $('body').css({"font-family":'Conv_Gotham-Medium !important'}); 
```

将其更改为

```
 $('#bodyid').css(font-family, 'Conv_Gotham-Medium !important'); 
```

给body一些id，这样css/jquery可以轻松识别body标签......希望这会有所帮助。其次，属性的声明不像传统的内联 css，所以也要对其进行更改..尝试对此进行排列..

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-25T07:49:03.807

选择`fontFamily`(camelcase) 作为您要更改的属性。

# node.js - expressj ：将标头发送到客户端后无法呈现标头

> ID：15609789
> 
> 赞同：0
> 
> 时间：2013-03-25T07:33:44.570
> 
> 标签：node.js, express, http-headers, response

我正在处理简单的登录表单，登录后（成功），我希望呈现产品列表。但是登录表单本身不会被渲染。这是我所拥有的`app.js`

```
app.get ( '/users/new', routes.api.user.isLogged, routes.api.user.new ); 
```

该`isLogged`方法只告诉会话是否存在。那里似乎没有问题。

在我的`user.js`文件中，在新方法中，这就是我得到的：

```
 exports.new = function(req, res) {
    res.format({
      html: function() {
        return res.render('users/new', {title: 'Login'});
      }
    });
  }; 
```

有时，它会毫不犹豫地渲染，有时它会弹出一个错误说

```
domain.js:66
    throw er;
          ^
Error: Can't render headers after they are sent to the client.
    at ServerResponse.OutgoingMessage._renderHeaders (http.js:715:11)
    at ServerResponse.res._renderHeaders (/Users/kaushik/dev/my_repos/retailer-catalog-backend/node_modules/kue/node_modules/express/node_modules/connect/lib/patch.js:76:25)
    at ServerResponse.writeHead (http.js:1083:20)
    at ServerResponse._implicitHeader (http.js:1040:8)
    at ServerResponse.module.exports.res.write (/Users/kaushik/dev/my_repos/retailer-catalog-backend/node_modules/express/node_modules/connect/lib/middleware/compress.js:79:34)
    at ondata (stream.js:38:26)
    at EventEmitter.emit (events.js:96:17)
    at ReadStream._emitData (fs.js:1368:10)
    at afterRead (fs.js:1350:10)
    at Object.wrapper [as oncomplete] (fs.js:362:17) 
```

我真的不明白为什么会这样。我是表达和节点的新手。

**编辑**

`isLogged`方法有：

```
 exports.isLogged = function(req, res, next) {  
   if (req.session.user) {
     res.redirect('/' + req.session.user.username + '/retailers')
   } else{
     return next();
   };
 }; 
```

这是`app.js`服务器配置：

```
 app.configure(function(){
    app.set('views', __dirname + '/views');
    app.set('view engine', 'hbs'); 
    app.use(express.favicon());
    app.use(express.logger('dev'));
    app.use(express.compress());
    app.use(express.methodOverride());
    app.use(require('less-middleware')({ src: __dirname + '/routes/web/public' }));
    app.use(express.bodyParser());
    app.use(express.cookieParser());
    app.use(express.session({ secret: '5234523451' })); 
    app.use(validator);
    app.use(app.router);
    app.use(express.static(path.join(__dirname, 'routes', 'web', 'public')));
  }); 
```

# c# - 为什么我的 Unity IoC 没有为我创建类？

> ID：15609791
> 
> 赞同：1
> 
> 时间：2013-03-25T07:33:51.880
> 
> 标签：c#

我声明了以下类：

```
public class SeedData
{
    private IUow _uow;

    public SeedData(IUow uow)
    {
        _uow = uow;
    }

} 
```

在引导程序中：

```
container.RegisterType<IUow, Uow>(); 
```

我的代码尝试声明一个这样的实例：

```
var a = new SampleData.EF.SeedData(); 
```

但是我收到消息：

```
Error 
'SampleData.EF.SeedData' does not contain a constructor that takes 0 arguments 
```

有人可以解释我可以做些什么来让我的 IoC 为我创建一个 Uow 实例。我会以错误的方式解决这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T07:39:35.937

您还应该放入`SeedData`容器中：

```
container.RegisterType<SeedData>(); 
```

然后调用：

```
var a = container.Resolve<SeedData>(); 
```

而不是直接由`new`. 通过这种方式，容器将自动为您注入`IUow`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T07:36:01.940

添加公共构造函数时，会覆盖没有参数的默认构造函数。尝试添加不带参数的公共构造函数，您将从容器中获取对象

# twitter-bootstrap - 带有前置图标文本对齐的 BOOTSTRAP 导航列表

> ID：15609793
> 
> 赞同：0
> 
> 时间：2013-03-25T07:34:10.800
> 
> 标签：twitter-bootstrap

我想使用引导程序向我的导航栏菜单项添加一个简单的图标：

这是代码：

```
<div class="span4 well">
        <ul class="nav nav-list">
            <li class="nav-header">Recent news</li>
                        <li><a href="/news/introducing-new-apps-for-timeline"><i class="icon icon-play"></i> Introducing New Apps for Timeline</a></li>
            <li class="divider"></li>
                        <li><a href="/news/do-you-shake-your-tea"><i class="icon icon-play"></i> Do you shake your tea?</a></li>
            <li class="divider"></li>
                        <li><a href="/news/new-delta-sky-club-opens"><i class="icon icon-play"></i> New Delta Sky Club Opens at LaGuardia’s Terminal C</a></li>
            <li class="divider"></li>
                        <li><a href="/news/love-is-in-the-air"><i class="icon icon-play"></i> Love is in the Air</a></li>
            <li class="divider"></li>

        </ul>
    </div> 
```

如果您检查[THIS FIDDLE](http://jsfiddle.net/GdaPN/1/)，您会发现当文本长度超过一行时它看起来并不漂亮......如何对齐文本（两行）？我添加

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T01:43:40.343

尝试在锚点上使用否定文本缩进。

```
ul.nav li a {
  text-indent: -20px;
  padding-left: 35px;
} 
```

在此处查看结果：http: [//jsfiddle.net/GdaPN/2/](http://jsfiddle.net/GdaPN/2/)

# xcode - 从性能的角度来看，哪一个是最好的编译器？

> ID：15609794
> 
> 赞同：0
> 
> 时间：2013-03-25T07:34:13.387
> 
> 标签：xcode, compiler-construction

由于 Xcode 中有几个编译器，我的问题是从性能的角度来看，哪一个是最好的，它们之间有什么区别。我们拥有的一些编译器：

*   海合会 4.2
*   LLVM GCC 4.2
*   LLVM 编译器 1.5

我自己做了一些快速测试，但没有发现太大区别？此外，在我的构建设置中，我有*Apple LLVM 编译器 4.2*，但在 llvm.org，最近最新的 LLVM 版本是 3.2。谁能解释为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T07:44:40.270

没有“整体性能”编译器评级，各种指标经常相互矛盾。例如，获得一个针对速度优化的二进制文件可能需要更大的二进制文件大小和编译时间。

好消息是这对你来说都不重要，因为它们编写代码的方式对二进制大小和速度的影响高达几个数量级。只需选择 LLVM，它是唯一的“标准”选择。

至于版本差异，我认为 Apple 只是为其品牌编译器使用了自己的版本控制方案：

```
$ clang --version
Apple LLVM version 4.2 (clang-425.0.27) (based on LLVM 3.2svn) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T07:37:55.467

铿锵声（[http://clang.llvm.org/](http://clang.llvm.org/)）

如果我没记错的话，llvm gcc 将不再维护。

# c# - Xamarin.Android 设备要求

> ID：15609799
> 
> 赞同：1
> 
> 时间：2013-03-25T07:34:49.263
> 
> 标签：c#, android, xamarin.android

Xamarin.Android 是否对设备有任何要求，例如最低 Android 版本或至少 ARMv7 CPU？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T08:12:37.373

Xamarin.Android 要求您针对 API 级别 4 (Android 1.6) 或更高版本进行构建。支持的架构有 x86、armeabi 和 armeabi-v7a（与原生 Android 开发相同）

# c++ - 将方法传递给包含对象指针的集合的所有元素，C++

> ID：15609809
> 
> 赞同：1
> 
> 时间：2013-03-25T07:35:21.537
> 
> 标签：c++, pointers, methods, set

我有一个类派生自包含指向另一个类对象的指针的集合。基本上它看起来像这样：

```
class connectionSLOT: private std::set<connectionSLOT*>
{
...
}; 
```

也许它非常简单并且可以很好地表示（有向）图。我的类还包含一些简单的方法，如 connect()、disconnect() 等，它们都期望对象指针作为参数，并返回这样的指针。（即它们的声明仅在名称上有所不同）例如：

```
connectionSLOT* connectionSLOT::connect(connectionSLOT *A)
{
  insert (A); return A;
} 
```

或者：

```
connectionSLOT* connectionSLOT::disconnect(connectionSLOT *A)
{
  erase(A); return this;
} 
```

所以，我的问题是：如何创建一个新方法，将这些函数应用到对象本身而不是集合中包含的所有对象（即包含在调用对象中）？

我想要这样的东西：

```
connectionSLOT* new_method( 'passing a method (and its argument) ' )
{
  for(it=begin();it!=end();++it) 'execute the method on (*it)' ;
  return something;
} 
```

或许，它将应用于将所有相邻点连接到某个顶点。但是因为 new_method() 本身也是一个合适的函数，所以它也可以被传递：

```
int main()
{
  // ... here declaring some objects and connection amongst them...

  A->new_method( new_method( disconnect(B) ) ) ;

/* calling new_method() recursively to disconnect all the vertices from B which ones are
    reachable from A in two steps */

...
} 
```

我希望，有可能以某种方式做到。（语法基本上不重要）感谢提供任何建议。

罗伯特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T07:37:35.197

你可以使用 C++11 吗？我相信，那`std::function`和 lambda 表达式是你正在寻找的。

```
void DoSth(std::function<void(void)> fn)
{
    fn();
}

DoSth([]() { printf("Hello, world!\n"); }); 
```

您的代码看起来更像下面这样：

```
connectionSLOT::new_method(std::function<void(connectionSlot *)> fn)
{
    for (it = begin(); it != end(); ++it)
        fn(*it);

    return something;
} 

int main()
{
    // ... here declaring some objects and connection amongst them...

    A->new_method([](connectionSlot * B) { disconnect(B); } );

    // ...
} 
```

# ruby-on-rails - 在 Mongoid 中处理多个标题、描述和关键字

> ID：15609812
> 
> 赞同：1
> 
> 时间：2013-03-25T07:35:26.483
> 
> 标签：ruby-on-rails, forms, mongodb, orm, mongoid

我有一个元素，它可以有一个或一些标题、一个或一些描述以及一个或一些关键字列表。从 web 视图来看，我们有某种“添加替代标题”按钮。我想知道在 Mongoid 中设计这种模式的正确方法是什么。

我正在考虑实施这 3 个解决方案之一（可能从最坏到最好排序）：

1）添加字段到合理的数量

```
 class Video
     include Mongoid::Document
     field :alt_title_1
     field :alt_title_2
     field :alt_title_3
     field :alt_description_1
     field :alt_description_2
     field :alt_description_3
     field :alt_keywords_1
     field :alt_keywords_2
     field :alt_keywords_3
 end 
```

2) 或者，将此字段定义为类型：数组

```
 class Video
     include Mongoid::Document
     field :titles, type: Array
     field :descriptions, type: Array
     field :keywords, type: Array
 end 
```

3）或者，有复杂的关系

```
 class Video
     include Mongoid::Document
     embeds_many :titles, :descriptions, :keywords
 end

 class Title
     include Mongoid::Document
     embedded_in :video
     field :value
 end

 class Description
     include Mongoid::Document
     embedded_in :video
     field :value
 end

 class Keyword
     include Mongoid::Document
     embedded_in :video
     field :value, type: Array
 end 
```

你觉得什么更有意义？那里有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T07:39:02.387

个人最喜欢2。这些只是字符串，因此拥有多个模型没有意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T03:16:55.257

出于与杰夫相同的原因，我也会选择 2 号。如果我必须验证输入，我会进行自定义验证。

# ruby - 正则表达式 - 查找 - 替换

> ID：15609815
> 
> 赞同：-2
> 
> 时间：2013-03-25T07:35:34.870
> 
> 标签：ruby, regex, ruby-on-rails-3

在我的项目中，我曾经写过

```
= {:key=>"value", :key2=>value2} 
```

我需要用键值箭头之间的空格替换，如下所示：

```
= {:key => "value", :key2 => value2} 
```

我可以找到它`[^\s-]=>[^\s-]`但是，我不知道如何替换它应该是这样的方式

`= {:key => "value", :key2 => value2}`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T07:52:32.713

我找到了答案：

寻找 ： `([^\s-])=>([^\s-])`

代替 ：`$1 => $2`

它对我有用...

干杯！！！万岁！！！

# visual-studio-2012 - Visual Studio 2012：不同项目的不同颜色主题

> ID：15609817
> 
> 赞同：25
> 
> 时间：2013-03-25T07:35:44.870
> 
> 标签：visual-studio-2012

我有两个带有两个打开的“相同”项目的 Visual Studio 实例。不同之处在于项目来自不同的分支。有没有办法让 Visual Studio 实例的外观因项目而异？有很多关于颜色主题编辑器扩展的帖子，但它会更改所有实例的主题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-25T11:49:39.780

您是否尝试过Visual Studio Gallerty 的[VSCommands扩展？](http://visualstudiogallery.msdn.microsoft.com/a83505c6-77b3-44a6-b53b-73d77cba84c8)它具有称为[解决方案徽章](http://vscommands.squaredinfinity.com/features#solutionbadge)的功能，可以帮助您。

![解决方案徽章](../Images/aaf71ec47928559918d935202f55244f.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-12-30T20:32:53.720

One option is to launch visual studio from the command line (or custom shortcuts) with the /rootsuffix argument. This forces VS to create a fresh node in the registry for all your VS settings, and on subsequent runs, with the settings saved under the provided node.

For example, I have two enlistments on a single machine, and I can open two instances of VS as follows: d:\source\green> devenv /rootsuffix green d:\source\red> devenv /rootsuffix red

One downside of this option is you will have to reconfigure all your preferences (font/colors, document formatting, symbol settings, addons and extensions, etc.) I recommend launching the default VS instance and exporting all your preferences (tools > import and export settings) to an xml file so you can import them from each of your new devenv nodes. You'll still need to manually reconfigure some other things, mainly addons.

As for customizing VS theme colors for each rootsuffix, I recommend Visual Studio 2013 Color Theme Editor ([https://visualstudiogallery.msdn.microsoft.com/9e08e5d3-6eb4-4e73-a045-6ea2a5cbdabe?SRC=VSIDE](https://visualstudiogallery.msdn.microsoft.com/9e08e5d3-6eb4-4e73-a045-6ea2a5cbdabe?SRC=VSIDE)). As mentioned above, you'll need to install this once for each rootsuffix you create since extension information is stored on a per-rootsuffix basis in the registry.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-04-27T17:20:49.823

我想分享一个对我有用的扩展。我在 VS2015 中试过这个。

扩展名是：[SolutionColor](https://marketplace.visualstudio.com/items?itemName=Wumpf.SolutionColor#review-details)

我想要的只是我的 Main 和 Dev 分支同时打开时的视觉区别。有了这个扩展，我可以将 VS 的标题设置为特定的颜色，这对我来说已经足够了！

# html - 文本在 chrome 中无法正确显示，但在 FF 中有效？

> ID：15609821
> 
> 赞同：1
> 
> 时间：2013-03-25T07:36:08.463
> 
> 标签：html, css, nivo-slider

请检查图像 ![在此处输入图像描述](../Images/20e0b0957ca91e4d9cafca127110e037.png)

在 chrome [bit.ly/10bYbyi](http://bit.ly/10bYbyi) 中，您可以在 FF [bit.ly/10bYbyi](http://bit.ly/10bYbyi)中看到它的正常工作。

我想通过 css 解决这个问题，但是当我打开调试工具并关闭它而不做任何更改时，文本会显示正确。

为什么会这样？我应该怎么做才能让 chrome 中的文本滑块像 FF 一样正确。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T07:47:27.937

请试试这个：

我们需要设置**max-width**属性来解决 Chrome 问题。

使用以下 CSS。

```
.nivo-caption {
   max-width: 600px!important;
   min-width: auto!important;
   display: block!important;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T09:20:20.477

使用 !important css 标志设置最小宽度-

```
.nivo-caption{
   min-width:600px!important;
} 
```

# sql - 如果特定月份的条目总和为 0，则查询显示为零

> ID：15609822
> 
> 赞同：1
> 
> 时间：2013-03-25T07:36:17.283
> 
> 标签：sql, sqlite

我在 sqlite 查询方面很弱。

我在 sqlite 数据库中有一组条目。我想找到按月分组的总和。

```
SELECT SUM(QUANTITY) quantity, strftime('%m', CREATED_ON) month FROM OrderItemBIT  WHERE (strftime('%Y%m',CREATED_ON) BETWEEN '201210' AND '201303') group by month 
```

问题是，如果某个特定月份没有条目，我希望该条目应显示计数为零，但现在它没有显示任何内容。

前任。猜想上面的查询没有一月的条目。那么它应该将数量显示为 0。

谁能帮忙解决这个问题！！！提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T07:38:55.313

一种方法是创建一个包含月份名称列表的临时表，然后`JOIN`将其与您的表一起创建。或者您可以即时创建它；就像是：

```
SELECT
  m.MonthName,
  IFNULL(SUM(o.QUANTITY), 0) quantity 
FROM
(
  SELECT 'January' AS MonthName
  UNION ALL
  SELECT 'March'
  UNION ALL
  ...
) AS Months
LEFT JOIN OrderItemBIT AS o ON o.month = strftime('%m', o.CREATED_ON)
WHERE (strftime('%Y%m', o.CREATED_ON) BETWEEN '201210' AND '201303')
group by m.MonthName; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T07:39:14.853

```
 SELECT SUM(COALESCE(QUANTITY, 0))
         , strftime('%m', CREATED_ON) month
    FROM OrderItemBIT
   WHERE (strftime('%Y%m',CREATED_ON) BETWEEN '201210' AND '201303')
GROUP BY month 
```

# google-chrome-extension - 是否可以增加 chrome.bookmarks.MAX_WRITE_OPERATIONS_PER_HOUR？

> ID：15609824
> 
> 赞同：3
> 
> 时间：2013-03-25T07:36:33.003
> 
> 标签：google-chrome-extension

我尝试将属性设置为更高的值，但它似乎不起作用。知道我应该怎么做吗？（这是一个允许您在多个书签栏之间切换的扩展。）

文档在这里：[https ://developer.chrome.com/extensions/bookmarks.html](https://developer.chrome.com/extensions/bookmarks.html)

编辑：下面是源代码。

```
(function(){
    function f(d) {
        chrome.bookmarks.MAX_WRITE_OPERATIONS_PER_HOUR = 100000000;
        chrome.bookmarks.MAX_SUSTAINED_WRITE_OPERATIONS_PER_MINUTE = 2000000;
        chrome.bookmarks.getTree(function(tree) {
            if (!searchFolder(tree[0], "Switchmark")) {
                chrome.bookmarks.create({"title": "Switchmark"}, function(n){
                    chrome.bookmarks.create({"title": "A", parentId: n.id});
                    chrome.bookmarks.create({"title": "B", parentId: n.id});
                    chrome.browserAction.setBadgeText({"text": "A"});
                });
            } else {
                for (var i = 0; i < children.length; i++) {
                    if (!children[i].children.length) {
                        chrome.browserAction.setBadgeText({"text": children[i].title});
                        break;
                    }
                }
            }
        });
    }
    chrome.runtime.onInstalled.addListener(f);
    chrome.runtime.onStartup.addListener(f);
}).call();

chrome.browserAction.onClicked.addListener(function(t) {
    chrome.bookmarks.getTree(function(tree) {
        var children = searchFolder(tree[0], "Switchmark").children;
        for (var i = 0; i < children.length; i++) {
            if (!children[i].children.length) {
                var barId = searchFolder(tree[0], "Bookmarks bar").id;
                var currentId = children[i].id;
                var nextNode = children[++i < children.length ? i : 0];
                var nextId = nextNode.id;
                var nextTitle = nextNode.title;
                moveFolderContents(barId, currentId);
                moveFolderContents(nextId, barId);
                chrome.browserAction.setBadgeText({"text": nextTitle});
                break;
            }
        }
    });
});

function moveFolderContents(fromId, toId) {
    chrome.bookmarks.getSubTree(fromId, function (subtree) {
        var c = subtree[0].children;
        for (var i = 0; i < c.length; i++) chrome.bookmarks.move(c[i].id, {"parentId": toId});
    });
}

function searchFolder(n, f) {
    if (Array.isArray(n.children)) {
        for (var i = 0; i < n.children.length; i++) {
            if (n.children[i].title == f) return n.children[i];
            else if (r = searchFolder(n.children[i], f)) return r;
        }
    }
    return null;
} 
```

# .htaccess - .htaccess 重写为短 url 处理异常

> ID：15609829
> 
> 赞同：0
> 
> 时间：2013-03-25T07:36:56.597
> 
> 标签：.htaccess, mod-rewrite, url-rewriting

这是我的htaccess：

```
RewriteEngine On 
RewriteBase /

RewriteRule ^about$ about.php       
RewriteRule ^contact$ contact.php
RewriteRule ^user/([^/.]+)?$ user.php?uname=$1&%{QUERY_STRING} 
```

我想要做的是当有人去 mysite.com/username 时它会这样做： user.php?uname=$1&%{QUERY_STRING} 这很简单：`RewriteRule ^/([^/.]+)?$ user.php?uname=$1&%{QUERY_STRING}`

但是如果用户名是页面名称怎么办？例如，如果用户名是 about 或 contact ？有没有办法添加例外？或者我该如何处理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T11:06:16.487

您没有使用 L （最后一个标志），这可以解决您的问题。请改用此代码：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteRule ^about/?$ /about.php [L,NC] 
RewriteRule ^contact/?$ /contact.php [L,NC]
RewriteRule ^user/([^/]+)/?$ /user.php?uname=$1 [L,NC,QSA] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T09:18:51.860

最简单的解决方案是创建用户名黑名单。不允许任何人创建与您网站上所需页面匹配的用户名。如果您将 [L] 标志放在当前规则上，它将停止进一步的规则处理，因此您可以在底部添加另一个规则来捕获用户名。

```
RewriteRule ^([^/.]+)?$ user.php?uname=$1&%{QUERY_STRING} 
```

当然，即使您没有将系统应该工作的用户名列入黑名单。他们只需要使用 /user/about，因为 /about URI 已经被使用了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T09:11:13.760

例如，您可以使用重定向

```
Redirect /about http://mysite.com/about.php 
```

希望这可以帮助。

# java - 如何将动态更改的文本框值存储为复选框值？

> ID：15609830
> 
> 赞同：2
> 
> 时间：2013-03-25T07:36:56.523
> 
> 标签：java, html, jsp, checkbox

我有一个显示数据库数据的表。该表有 3 列，第一列是复选框。

```
<sql:setDataSource var="datasource" driver="com.mysql.jdbc.Driver"
    url="jdbc:mysql://localhost/PhoneBookDB" user="root"
    password="12345" />

<sql:query var="pbook" dataSource="${datasource}">
    SELECT * FROM phoneBook
</sql:query>

<html:form action="/PhoneBookAction.do" method="post"  >        
    <table align="center" bgcolor="Khaki" border="5" bordercolor="SaddleBrown" cellpadding="10">
        <thead>
            <tr>
                <td align="center" ><b>Select</b></td>
                <td align="center" ><b>Name</b></td>
                <td align="center" ><b>Phone Number</b></td>
            </tr>
        </thead>

<c:forEach items="${pbook.rows}" var="row">
  <tr>
    <td align="center"> <input type="checkbox" align="middle" name="record" value="${row.id},${name},${pNum}"> </td>
    <td> <input type="text" name="name" maxlength="30" value="${row.c_name}" >  </td>
    <td> <input type="text" name="pNum" maxlength="10" value="${row.p_num}">   </td>
  </tr>
</c:forEach>

    </table>
    <html:submit property="method"  value="Edit"  />    
    <html:submit property="method" value="Delete" />
</html:form> 
```

我希望用户能够从 JSP 本身**更新****名称**和**电话号码**列的值。我不知道如何将文本框中的**更新值设置为****复选框的 value 属性**，以便可以将更新后的值发送到 servlet，然后发送到模型，以便在数据库上进行操作。
我想在不使用 JavaScript 的情况下解决这个问题。
请帮忙！谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T08:00:58.523

只需将行 ID 作为复选框的值传递。不要在 checikbox 值上附加名称和 pNum。

提交时，在您的操作类中，根据需要将名称和 pNum 附加到 rowId。

我希望这将有所帮助。我认为将名称和 pNum 作为 jsp 页面本身的复选框值附加到 row.id 没有任何意义。

# java - maven - 在构建时弹出请求许可

> ID：15609836
> 
> 赞同：4
> 
> 时间：2013-03-25T07:37:33.667
> 
> 标签：java, maven, build

我刚刚安装了 maven，并且在构建 hello world 时，maven 不断向我询问是否允许使用类似消息 - “小程序正在尝试访问文件的“存在”状态属性......”

似乎这不是一个很常见的问题。有没有办法将这些权限授予 Maven？

```
[INFO] Scanning for projects...
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building tms-server 1.0-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-resources-plugin:2.3:resources (default-resources) @ tms-server ---
Current policy properties:
    mmc.sess_pe_act.block_unsigned: false
    window.num_max: 5
    jscan.sess_applet_act.sig_trusted: pass
    jscan.sess_applet_act.block_all: false
    file.destructive.state: disabled
    window.num_limited: true
    jscan.sess_applet_act.unsigned: instrument
    mmc.sess_pe_act.action: validate
    jscan.session.daemon_protocol: http
    file.read.state: disabled
    mmc.sess_pe_act.block_invalid: true
    mmc.sess_pe_act.block_blacklisted: false
    jscan.session.policyname: QXBwbGV0L0FjdGl2ZVggU2VjdXJpdHkgR2xvYmFsIFBvbGljeSA=
    net.bind_enable: false
    mmc.sess_cab_act.block_unsigned: false
    file.nondestructive.state: disabled
    jscan.session.origin_uri: 
http://repo.maven.apache.org/maven2/org/apache/maven/shared/maven-filtering/1.0-beta-2/maven-filtering-1.0-beta-2.jar
    mmc.sess_cab_act.action: validate
    net.connect_other: false
    jscan.session.user_ipaddr: 10.109.50.50
    jscan.sess_applet_act.sig_invalid: block
    thread.thread_num_max: 8
    mmc.sess_cab_act.block_invalid: true
    jscan.sess_applet_act.sig_blacklisted: block
    net.connect_src: true
    thread.thread_num_limited: true
    jscan.sess_applet_act.stub_out_blocked_applet: true
    mmc.sess_cab_act.block_blacklisted: true
    jscan.session.user_name: MTAuMTA5LjUwLjUw
    thread.threadgroup_create: false
    file.write.state: disabled
[WARNING] Using platform encoding (UTF-8 actually) to copy filtered resources, i.e. build is platform dependent!
-->> returning Frame NULL
BaseDialog: owner frame is a java.awt.Frame
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 5.925s
[INFO] Finished at: Mon Mar 25 12:55:59 IST 2013
[INFO] Final Memory: 7M/74M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-resources-plugin:2.3:resources (default-resources) on project tms-server: 
Execution default-resources of goal org.apache.maven.plugins:maven-resources-plugin:2.3:resources failed: The Applet is not allowed to access 
the "exists" state attributes of file /root/tms-server/src/main/resources by IWSVA Javascan site policy. -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/PluginExecutionException 
```

更新：这是我的 pom.xml，它直接来自 apache 的入门指南。

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>app</groupId>
  <artifactId>tms-server</artifactId>
  <packaging>jar</packaging>
  <version>1.0-SNAPSHOT</version>
  <name>tms-server</name>
  <url>http://maven.apache.org</url>
  <dependencies>
    <dependency>
      <groupId>junit</groupId>
      <artifactId>junit</artifactId>
      <version>3.8.1</version>
      <scope>test</scope>
    </dependency>
  </dependencies>
</project> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-25T07:53:39.023

它说，

> IWSA Javascan 站点策略不允许 Applet 访问文件 /root/tms-server/src/main/resources 的“存在​​”状态属性。

您正在使用通过趋势科技网关安全套件/设备代理从 Internet 下载的 jar。此代理在您从 Internet 下载的所有 jar 中创建挂钩，因此当他们尝试访问文件时，您会看到弹出“Applet 警报”。

解决方案：

你有两个选择：

1.  您可以下载存档的 jar 文件。所以他们不会受到代理的影响。
2.  您可以配置代理不修改下载的 jar 文件。

有另一个用户遇到了这个问题并解决了，我从[这里得到了这个答案](https://stackoverflow.com/questions/5862560/java-awt-headlessexception-in-spring-3-0-5/8038090#8038090)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-18T01:33:41.500

您必须从 TrendMicro 垃圾中清除类路径 jar，我使用这个 ant 的脚本：

```
<?xml version="1.0"?>
<project name="cleanTrendMicro" default="doit" basedir=".">
    <taskdef resource="net/sf/antcontrib/antcontrib.properties">
      <classpath>
        <pathelement location="/ant-contrib-1.0b3.jar"/>
      </classpath>
    </taskdef>

    <!-- global properties -->
    <property environment="env" />
    <property name="home.dir" location="." />
    <property name="tmp.dir" value="${home.dir}/tmp" />

    <path id="plugin.path" path="${home.dir}"   >
        <fileset dir="plugins" casesensitive="yes">
            <include name="**/*.jar"/>
        </fileset>
    </path>

    <target name="doit">
        <echo message="Created by DanTechologies"/>
        <foreach target="retar" param="theFile">
            <path refid="plugin.path" />
        </foreach>
    </target>

    <target name="retar">
        <if>
            <available file="${theFile}" type="dir" />
            <then>
                <echo message="Directory ${theFile}" />
            </then>
            <else>
                <echo message="Procesing file: ${theFile}"/>
                <mkdir dir="${tmp.dir}" />
                <unzip src="${theFile}" dest="${tmp.dir}"/>
                <jar destfile="${theFile}" basedir="${tmp.dir}" excludes="**/com/trend/**" />
                <delete quiet="true" dir="${tmp.dir}" />
            </else>
        </if>
    </target>
</project> 
```

# android - 如何在 Android 中点击按钮时更改背景图像和文本？

> ID：15609837
> 
> 赞同：0
> 
> 时间：2013-03-25T07:37:34.187
> 
> 标签：android, button, text

当我们需要更改按钮的背景图像时，我知道如何为按钮应用选择器。我还想在按下按钮时更改文本颜色。有没有类似的方法，比如创建选择器 xml 来做到这一点？我猜另一个选项是在 onclick 方法中更改文本颜色，但我想知道是否有其他方法或更好的方法来做同样的事情。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T07:46:15.643

> 我想，会改变 onclick 方法中的文本颜色

只需创建适当的选择器并将其分配给 TextView 颜色属性

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item
      android:state_focused="true"
      android:state_pressed="true"
      android:color="somecolor" 
    />

    <item
      android:state_focused="false"
      android:state_pressed="true"
      android:color="somecolor"
    />

    <item android:color="somecolor" />

</selector> 
```

然后是一个用法：

```
android:textColor="@drawable/yourselector" 
```

> 我们需要改变按钮的背景图片

仅在您将使用可绘制对象更改颜色属性的项目中，背景几乎相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-29T10:19:26.683

可绘制/now_playing_next.xml

```
<?xml version="1.0" encoding="UTF-8"?>
  <selector xmlns:android="http://schemas.android.com/apk/res/android">
     <item android:state_pressed="true" android:drawable="@drawable/icon_down" />
     <item android:state_pressed="false" android:drawable="@drawable/icon_up" />
  </selector> 
```

这里 icon_up 是正常状态背景图像， icon_down 是按下状态图像

接着

```
<Button
   android:id="@+id/MediaNextButton"
   android:layout_width="wrap_content"
   android:layout_height="wrap_content"
   android:background="@drawable/now_playing_next" /> 
```

更改文本使用 OnClickListener

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T08:49:05.957

您可以将代码放在按钮的 setOnClickListener 中，在那里您可以为按钮设置所需的背景和文本或任何内容。希望这对您有所帮助。

# android - Android 自定义对话框

> ID：15609839
> 
> 赞同：1
> 
> 时间：2013-03-25T07:37:37.573
> 
> 标签：android, dialog

我有一个按钮，当我单击该按钮时会打开一个对话框。在该对话框中，一个 EditText 和 ok 按钮，当我在该文本显示中单击 ok 按钮时，我输入了一些文本。
我不知道该怎么做，帮帮我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T07:44:36.137

使用以下

```
 import android.app.Activity;
 import android.app.AlertDialog;
  import android.content.Context;
      import android.content.DialogInterface;
   import android.os.Bundle;
    import android.view.LayoutInflater;
 import android.view.View;
    import android.view.View.OnClickListener;
   import android.widget.Button;
    import android.widget.EditText;

 public class MainActivity extends Activity {

final Context context = this;
private Button button;
private EditText result;

public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    // components from main.xml
    button = (Button) findViewById(R.id.buttonPrompt);
    result = (EditText) findViewById(R.id.editTextResult);

    // add button listener
    button.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View arg0) {

            // get prompts.xml view
            LayoutInflater li = LayoutInflater.from(context);
            View view= li.inflate(R.layout.prompts, null);

            AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(
                    context);

            // set prompts.xml to alertdialog builder
            alertDialogBuilder.setView(view);

            final EditText userInput = (EditText) view
                    .findViewById(R.id.editTextDialogUserInput);

            // set dialog message
            alertDialogBuilder
                .setCancelable(false)
                .setPositiveButton("OK",
                  new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog,int id) {
                    // get user input and set it to result
                    // edit text
                    result.setText(userInput.getText());
                    }
                  })
                .setNegativeButton("Cancel",
                  new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog,int id) {
                    dialog.cancel();
                    }
                  });

            // create alert dialog
            AlertDialog alertDialog = alertDialogBuilder.create();

            // show it
            alertDialog.show();

        }
    });
} 
```

}

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T07:46:26.010

希望对你有帮助

```
 AlertDialog.Builder alert = new AlertDialog.Builder(con);
                final EditText input = new EditText(con);
                String s="your text";

                alert.setView(input);
                alert.setPositiveButton("Ok", new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int whichButton) {
                        String value = input.getText().toString().trim();
                        Toast.makeText(con, value, Toast.LENGTH_SHORT).show();
                    }
                });
                alert.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int whichButton) {
                        dialog.cancel();
                    }
                });
                alert.show(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T08:41:59.390

```
public class MainActivity extends Activity {

final Context context = this;
private Button button;
private TextView result;
private TextView result2;

public void onCreate(Bundle savedInstanceState) {

  super.onCreate(savedInstanceState);
 setContentView(R.layout.activity_main);

 // components from main.xml
 button = (Button) findViewById(R.id.button1);
 result = (TextView) findViewById(R.id.textView1);
 result2 = (TextView) findViewById(R.id.textView2);

 // add button listener
 button.setOnClickListener(new OnClickListener() {

   @Override
   public void onClick(View arg0) {

       // get prompts.xml view
       LayoutInflater li = LayoutInflater.from(context);
       View view= li.inflate(R.layout.dailog, null);

       AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(
               context);

       // set prompts.xml to alertdialog builder
       alertDialogBuilder.setView(view);

       final EditText userInput = (EditText) view
               .findViewById(R.id.edit1);
       final EditText userInput2 = (EditText) view
               .findViewById(R.id.edit2);

       // set dialog message
       alertDialogBuilder
           .setCancelable(false)
           .setPositiveButton("OK",
             new DialogInterface.OnClickListener() {
               public void onClick(DialogInterface dialog,int id) {
               // get user input and set it to result
               // edit text
               result.setText(userInput.getText());
               result2.setText(userInput2.getText());
               }
             }) 
           .setNegativeButton("Cancel",
             new DialogInterface.OnClickListener() {
               public void onClick(DialogInterface dialog,int id) {
               dialog.cancel();
               }
             });

       // create alert dialog
       AlertDialog alertDialog = alertDialogBuilder.create();

       // show it
       alertDialog.show();

   }
 });
}

} 
```

这是我的确切答案

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-25T07:49:16.550

我会用尽可能少的代码带你完成这些步骤，因为我认为这会帮助你了解更多（比这里的其他答案）：

*   在需要启动对话框的按钮上设置 OnClickListener
*   在 XML 中为对话框创建自定义视图，并将其命名为 custom_box.xml
*   之后，在您的 OnClick 方法中，使用以下命令将该自定义 xml 设置为对话框：

> ```
> final Dialog dialog = new Dialog(context);
> dialog.setContentView(R.layout.custom_box); 
> ```

*   在 Java 中连接 Button 和 EditText 就像在 Activity 中一样，但现在在 Activity 中使用 dialog.findViewById(R.id...) 而不是 this.findViewById(...)
*   为对话框内的按钮设置 OnClickListener，并从那里调用解除和更改文本操作。

如果您需要，这里也是一个相当不错的[教程的链接，这里是](http://www.mkyong.com/android/android-custom-dialog-example/)[Android 文档](http://developer.android.com/guide/topics/ui/dialogs.html)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-02T05:30:58.783

```
Call ForgetPswPopUp() method name

 public void ForgetPswPopUp() {
                AlertDialog.Builder alertDialog = new AlertDialog.Builder(
                        HomeActivity.this);
                alertDialog.setTitle("set Title");
                final EditText input = new EditText(HomeActivity.this);
                input.setHint("Textbox hint");
                LinearLayout.LayoutParams lp = new LinearLayout.LayoutParams(
                        LinearLayout.LayoutParams.MATCH_PARENT, position);
                input.setLayoutParams(lp);
                alertDialog.setView(input);
                alertDialog.setNegativeButton("Button name",
                        new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog, int which) {
                                dialog.cancel();
                            }
                        });
                alertDialog.show();
            } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-25T07:46:02.300

[这](http://www.mkyong.com/android/android-custom-dialog-example/)是解释如何在android中创建自定义对话框的链接，这将对您有所帮助

# linux - 内核初始化期间崩溃（模块 insmod）

> ID：15609842
> 
> 赞同：1
> 
> 时间：2013-03-25T07:37:51.017
> 
> 标签：linux, linux-kernel, embedded-linux

我正在使用 Monta-Vista Linux 2.6.10。在内核初始化期间，在使用“insmod”注册我的模块时，重新启动 7,000 次后会发生以下内核转储。

```
DMY Touch Panel Filter Driver Version Ver.1.0.0 Major=200
usbdmy_init
DMY USB-Driver Ver.1.0.5
usbdmy_probe vendor=$afa product=$3e8
usbdmy_probe: endpoint irq-in 1 ,interval=1
Unable to handle kernel NULL pointer dereference at virtual address 00000000
pgd = c7a28000
[00000000] *pgd=a79fd031, *pte=00000000, *ppte=00000000
Internal error: Oops: 817 [#1]
Modules linked in: usbdmy tpdmy
CPU: 0
PC is at __free_pages+0x24/0x64
LR is at free_task+0x1c/0x34
pc : [<c005df04>]    lr : [<c003833c>]    Tainted: P
sp : c7e51eb0  ip : c7e51ec0  fp : c7e51ebc
r10: c7ddf3c8  r9 : 00000005  r8 : 00000000
r7 : 00000000  r6 : c7e50000  r5 : c7ddf320  r4 : c7ddf320
r3 : ffffffff  r2 : 00000000  r1 : 00000001  r0 : c03eb900
Flags: nZCv  IRQs on  FIQs on  Mode SVC_32  Segment user
Control: 397F  Table: A7A28000  DAC: 00000015
Process default.hotplug (pid: 953, stack limit = 0xc7e501b0)
Stack: (0xc7e51eb0 to 0xc7e52000)
1ea0:                                     c7e51ed4 c7e51ec0 c003833c c005deec
1ec0: c7ddf320 c7ddf320 c7e51efc c7e51ed8 c003c924 c003832c c785e6c0 000003ba
1ee0: c7ddf320 c7e50000 c7ddf320 00000000 c7e51f84 c7e51f00 c003efbc c003c7b8
1f00: c785e6c0 4000cba4 c7a28000 00000000 c7a28000 c7861b60 00000000 c7861ac0
1f20: 7efff034 ffffffff 00000000 c7861ac0 c0036dec 00000000 00000000 c7e51f48
1f40: 00000000 c7861ac0 c0036dec c7861bc4 c7861bc4 c7e51fb0 00000001 ffffffea
1f60: 7efff034 ffffffff 00000072 c00231f4 c7e50000 00900072 c7e51fa4 c7e51f88
1f80: c003f404 c003e6a0 00000000 ffffffff c7e51fec 00000001 00000000 c7e51fa8
1fa0: c0022a60 c003f3d8 00000001 7efff034 ffffffff 7efff034 00000001 00000000
1fc0: 00000001 7efff034 ffffffff 000b4388 00000000 ffffffff 00000000 00000000
1fe0: 40018d30 7efff000 400f67a0 400f67c0 60000010 ffffffff 00000000 00000000
Backtrace:
[<c005dee0>] (__free_pages+0x0/0x64) from [<c003833c>] (free_task+0x1c/0x34)
[<c0038320>] (free_task+0x0/0x34) from [<c003c924>] (release_task+0x178/0x188)
 r4 = C7DDF320
[<c003c7ac>] (release_task+0x0/0x188) from [<c003efbc>] (do_wait+0x928/0xca8)
 r8 = 00000000  r7 = C7DDF320  r6 = C7E50000  r5 = C7DDF320
 r4 = 000003BA
[<c003e694>] (do_wait+0x0/0xca8) from [<c003f404>] (sys_wait4+0x38/0x4c)
[<c003f3cc>] (sys_wait4+0x0/0x4c) from [<c0022a60>] (ret_fast_syscall+0x0/0x2c)
 r4 = 00000001
Code: e2132001 189da800 e5903004 e3730001 (05822000)
 prev->state: 2 != TASK_RUNNING??
default.hotplug/953: BUG in __schedule at kernel/sched.c:2905
Unable to handle kernel NULL pointer dereference at virtual address 00000000
pgd = c7a3c000
[00000000] *pgd=a79a6031, *pte=00000000, *ppte=00000000
Internal error: Oops: 817 [#2]
Modules linked in: usbdmy tpdmy
CPU: 0
PC is at __free_pages+0x24/0x64
LR is at free_task+0x1c/0x34
pc : [<c005df04>]    lr : [<c003833c>]    Tainted: P
sp : c7a27eb0  ip : c7a27ec0  fp : c7a27ebc
r10: c7861b68  r9 : 00000005  r8 : 00000000
r7 : 00000000  r6 : c7a26000  r5 : c7861ac0  r4 : c7861ac0
r3 : ffffffff  r2 : 00000000  r1 : 00000001  r0 : c03ebfc0
Flags: nZCv  IRQs on  FIQs on  Mode SVC_32  Segment user
Control: 397F  Table: A7A3C000  DAC: 00000015
Process default.hotplug (pid: 948, stack limit = 0xc7a261b0)
Stack: (0xc7a27eb0 to 0xc7a28000)
7ea0:                                     c7a27ed4 c7a27ec0 c003833c c005deec
7ec0: c7861ac0 c7861ac0 c7a27efc c7a27ed8 c003c924 c003832c c0016040 000003cb
7ee0: c7861ac0 c7a26000 c7861ac0 00000000 c7a27f84 c7a27f00 c003efbc c003c7b8
7f00: 00000000 00000001 c7a3c000 00000000 c7a3c000 c7ddf140 00000000 c7ddf0a0
7f20: 7efff684 ffffffff 00000000 c7ddf0a0 c0036dec 00000000 00000000 c7a27f48
7f40: 00000000 c7ddf0a0 c0036dec c7ddf1a4 c7ddf1a4 c7a27fb0 00000000 ffffffea
7f60: 7efff684 ffffffff 00000072 c00231f4 c7a26000 00900072 c7a27fa4 c7a27f88
7f80: c003f404 c003e6a0 00000000 ffffffff c7a27fec 00000001 00000000 c7a27fa8
7fa0: c0022a60 c003f3d8 00000001 7efff684 ffffffff 7efff684 00000001 00000000
7fc0: 00000001 7efff684 ffffffff 00000003 00000000 00000001 00000003 00000000
7fe0: 40018d30 7efff650 400f67a0 400f67c0 60000010 ffffffff 763074f6 0000023c
Backtrace:
[<c005dee0>] (__free_pages+0x0/0x64) from [<c003833c>] (free_task+0x1c/0x34)
[<c0038320>] (free_task+0x0/0x34) from [<c003c924>] (release_task+0x178/0x188)
 r4 = C7861AC0
[<c003c7ac>] (release_task+0x0/0x188) from [<c003efbc>] (do_wait+0x928/0xca8)
 r8 = 00000000  r7 = C7861AC0  r6 = C7A26000  r5 = C7861AC0
 r4 = 000003CB
[<c003e694>] (do_wait+0x0/0xca8) from [<c003f404>] (sys_wait4+0x38/0x4c)
[<c003f3cc>] (sys_wait4+0x0/0x4c) from [<c0022a60>] (ret_fast_syscall+0x0/0x2c)
 r4 = 00000001
Code: e2132001 189da800 e5903004 e3730001 (05822000)
 prev->state: 2 != TASK_RUNNING??
default.hotplug/948: BUG in __schedule at kernel/sched.c:2905
usbdmy_specify : len=2 data=$06 $00
drivers/usb/core/file.c: looking for a minor, starting at 181
Unable to handle kernel paging request at virtual address 0000a000
pgd = c0004000
[0000a000] *pgd=00000000
Internal error: Oops: 817 [#3]
Modules linked in: usbdmy tpdmy
CPU: 0
PC is at memcpy+0x5c/0x5a0
LR is at copy_process+0xbc/0xe14
pc : [<c010a4bc>]    lr : [<c0039300>]    Tainted: P
sp : c0467e0c  ip : 00000000  fp : c0467e34
r10: 00804111  r9 : 00000000  r8 : 00000000
r7 : 00000000  r6 : 00000000  r5 : 00000000  r4 : 00000000
r3 : 00000000  r2 : 00000030  r1 : c0466120  r0 : 00009ff4
Flags: nzCv  IRQs on  FIQs on  Mode SVC_32  Segment kernel
Control: 397F  Table: A7A38000  DAC: 00000017
Process khelper (pid: 5, stack limit = 0xc04661b0)
Stack: (0xc0467e0c to 0xc0468000)
7e00:                            00009ef4 c7ddfd20 c042f2c0 00009ef4 c0466000
7e20: fffffff4 c02d8388 c0467e7c c0467e38 c0039300 c010a46c 00000000 c0467ed8
7e40: 00000000 00000000 c0467ed8 00000000 00200200 00000000 00804111 000003cc
7e60: c0466000 00000000 00000000 c0467ed8 c0467ecc c0467e80 c003a1c4 c0039250
7e80: 00000000 00000000 000003cc c0467e98 00000000 c0467e94 c0467e94 c7ddfaa0
7ea0: c0467ecc 00804111 c0467ed8 c7a01d60 c004c548 c0431ec0 c7a01d60 c0431ec8
7ec0: c0467f3c c0467ed0 c002557c c003a100 00000000 00000000 00000000 c7a01d60
7ee0: c004c548 c003d5f0 00000000 00000000 00000000 00000000 00000000 00000000
7f00: 00000000 00000000 00000000 00000000 00000000 c0024d50 00000013 00000000
7f20: c7a01d60 c7a01d28 c0466000 00000000 c0467f54 c0467f40 c004c6c4 c0025514
7f40: c7a01e1c c7a01d2c c0467fc4 c0467f58 c004cccc c004c698 c0451f2c c004c68c
7f60: ffffffff ffffffff 00000001 00000000 c0036dec 00010000 00000000 c0466000
7f80: 00000000 c042f2c0 c0036dec 00100100 00200200 00000000 c0467fc4 c0431ec0
7fa0: c0466000 c0451f28 c004cac8 fffffffc 00000000 00000000 c0467ff4 c0467fc8
7fc0: c0051b74 c004cad4 ffffffff ffffffff 00000000 00000000 00000000 00000000
7fe0: 00000000 00000000 00000000 c0467ff8 c003d5f0 c0051a98 cc33cc33 cc33cc33
Backtrace:
[<c010a460>] (memcpy+0x0/0x5a0) from [<c0039300>] (copy_process+0xbc/0xe14)
 r9 = C02D8388  r8 = FFFFFFF4  r7 = C0466000  r6 = 00009EF4
 r5 = C042F2C0  r4 = C7DDFD20  r0 = 00009EF4
[<c0039244>] (copy_process+0x0/0xe14) from [<c003a1c4>] (do_fork+0xd0/0x1e8)
[<c003a0f4>] (do_fork+0x0/0x1e8) from [<c002557c>] (kernel_thread+0x74/0x84)
[<c0025508>] (kernel_thread+0x0/0x84) from [<c004c6c4>] (__call_usermodehelper+0x38/0x74)
 r7 = 00000000  r6 = C0466000  r5 = C7A01D28  r4 = C7A01D60
[<c004c68c>] (__call_usermodehelper+0x0/0x74) from [<c004cccc>] (worker_thread+0x204/0x2c0)
 r4 = C7A01D2C
[<c004cac8>] (worker_thread+0x0/0x2c0) from [<c0051b74>] (kthread+0xe8/0x11c)
[<c0051a8c>] (kthread+0x0/0x11c) from [<c003d5f0>] (do_exit+0x0/0xd8c)
 r8 = 00000000  r7 = 00000000  r6 = 00000000  r5 = 00000000
 r4 = 00000000
Code: f5d1f03c f5d1f05c e8b113f8 e2522020 (a8a013f8) 
```

我想知道你们是否可以帮助我了解为什么会出现这样的错误。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T08:19:07.443

我认为您的内核或模块二进制文件已损坏。

因为您声明启动设备是 CF 卡，并且您的脚本不断地重新启动它 7000 次，所以在我看来 CF 卡必须承受相当多的写入活动。

只有较新的闪存介质设备（如 eMMC 和 micro-SD 卡）通常具有对闪存磨损均衡的硬件支持，因此可以（几乎）安全地用作 ext3/ext4 文件系统。

对于较旧的闪存介质（如 CF 卡），通常不会实施适当的闪存磨损均衡，只需几天（有时数小时）即可将其磨损。

我的建议是检查系统上的每个文件，如果校验和与另一个好的工作系统匹配。我几乎可以肯定，在您的情况下，至少有一个文件无法正确签出。

# xna - 暂停时循环 SoundEffectInstance 噼啪作响？

> ID：15609843
> 
> 赞同：1
> 
> 时间：2013-03-25T07:37:51.247
> 
> 标签：xna, slimdx, monogame

在 Win8 上使用 Monogame 3.0.1，我有一个 SoundEffectInstance，如果我让它继续播放，它会无缝循环。但是，当我反复播放和停止（或暂停和恢复）时，当它从播放过渡到静音（反之亦然）时，通常会导致响亮的爆裂声或爆裂声。这是声音文件、库还是其他问题？有没有更好的方法来暂停/恢复声音而不会产生讨厌的副作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T20:51:43.647

我会说尝试一些随机音效，看看它们是否产生与您当前音效相同的结果，并将您的发现作为问题的更新发布。如果您发布音效代码也会非常有帮助。请按照以下步骤操作，我将能够提供更多帮助！

# android - 在android中为放大和缩小添加限制

> ID：15609845
> 
> 赞同：1
> 
> 时间：2013-03-25T07:37:52.647
> 
> 标签：android, imageview, zooming

我有一个可以缩放的图像视图。我有一个运行良好的代码，但我的问题是我想为最大和最小缩放级别添加限制。

```
import android.annotation.TargetApi;
import android.app.ActionBar;
import android.app.Activity;
import android.graphics.Matrix;
import android.graphics.PointF;
import android.os.Build;
import android.os.Bundle;
import android.util.FloatMath;
import android.util.Log;
import android.view.MenuItem;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnTouchListener;
import android.widget.ImageView;

@TargetApi(Build.VERSION_CODES.HONEYCOMB)
public class Reach extends Activity implements OnTouchListener
{
    private static final String TAG = "Touch";
    @SuppressWarnings("unused")
    private static final float MIN_ZOOM = 1f,MAX_ZOOM = 1f;

// These matrices will be used to scale points of the image
Matrix matrix = new Matrix();
Matrix savedMatrix = new Matrix();

// The 3 states (events) which the user is trying to perform
static final int NONE = 0;
static final int DRAG = 1;
static final int ZOOM = 2;
int mode = NONE;

// these PointF objects are used to record the point(s) the user is touching
PointF start = new PointF();
PointF mid = new PointF();
float oldDist = 1f;

@Override
protected void onCreate(Bundle savedInstanceState)
{
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.reach_us);
    int currentAPIVersion = android.os.Build.VERSION.SDK_INT;

    if (currentAPIVersion >= android.os.Build.VERSION_CODES.HONEYCOMB) 
    {

        // RUN THE CODE SPECIFIC TO THE API LEVELS ABOVE HONEYCOMB (API 11+)   
        ActionBar actionBar = getActionBar();
        actionBar.setDisplayHomeAsUpEnabled(true);
    }
    ImageView view=(ImageView)findViewById(R.id.map);
    view.setOnTouchListener(this);
}

@Override
public boolean onOptionsItemSelected(MenuItem item)
{

    switch (item.getItemId()) {

    case android.R.id.home: {
        this.finish();

        return true;
    }

    default:
        return super.onOptionsItemSelected(item);
    }
}
@Override
public boolean onTouch(View v, MotionEvent event) 
{
    ImageView view = (ImageView) v;
    view.setScaleType(ImageView.ScaleType.MATRIX);
    float scale;

    dumpEvent(event);
    // Handle touch events here...

    switch (event.getAction() & MotionEvent.ACTION_MASK) 
    {
    case MotionEvent.ACTION_DOWN:   // first finger down only
        savedMatrix.set(matrix);
        start.set(event.getX(), event.getY());
        Log.d(TAG, "mode=DRAG"); // write to LogCat
        mode = DRAG;
        break;

    case MotionEvent.ACTION_UP: // first finger lifted

    case MotionEvent.ACTION_POINTER_UP: // second finger lifted

        mode = NONE;
        Log.d(TAG, "mode=NONE");
        break;

    case MotionEvent.ACTION_POINTER_DOWN: // first and second finger down

        oldDist = spacing(event);
        Log.d(TAG, "oldDist=" + oldDist);
        if (oldDist > 5f) {
            savedMatrix.set(matrix);
            midPoint(mid, event);
            mode = ZOOM;
            Log.d(TAG, "mode=ZOOM");
        }
        break;

    case MotionEvent.ACTION_MOVE:

        if (mode == DRAG) 
        { 
            matrix.set(savedMatrix);
            matrix.postTranslate(event.getX() - start.x, event.getY() - start.y); // create the transformation in the matrix  of points
        } 
        else if (mode == ZOOM) 
        { 
            // pinch zooming
            float newDist = spacing(event);
            Log.d(TAG, "newDist=" + newDist);
            if (newDist > 5f) 
            {
                matrix.set(savedMatrix);
                scale = newDist / oldDist; // setting the scaling of the
                // matrix...if scale > 1 means
                // zoom in...if scale < 1 means
                // zoom out
                matrix.postScale(scale, scale, mid.x, mid.y);
            }
        }
        break;
    }

    view.setImageMatrix(matrix); // display the transformation on screen

    return true; // indicate event was handled
}

/*
 * --------------------------------------------------------------------------
 * Method: spacing Parameters: MotionEvent Returns: float Description:
 * checks the spacing between the two fingers on touch
 * ----------------------------------------------------
 */

private float spacing(MotionEvent event) 
{
    float x = event.getX(0) - event.getX(1);
    float y = event.getY(0) - event.getY(1);
    return FloatMath.sqrt(x * x + y * y);
}

/*
 * --------------------------------------------------------------------------
 * Method: midPoint Parameters: PointF object, MotionEvent Returns: void
 * Description: calculates the midpoint between the two fingers
 * ------------------------------------------------------------
 */

private void midPoint(PointF point, MotionEvent event) 
{
    float x = event.getX(0) + event.getX(1);
    float y = event.getY(0) + event.getY(1);
    point.set(x / 2, y / 2);
}

/** Show an event in the LogCat view, for debugging */
private void dumpEvent(MotionEvent event) 
{
    String names[] = { "DOWN", "UP", "MOVE", "CANCEL", "OUTSIDE","POINTER_DOWN", "POINTER_UP", "7?", "8?", "9?" };
    StringBuilder sb = new StringBuilder();
    int action = event.getAction();
    int actionCode = action & MotionEvent.ACTION_MASK;
    sb.append("event ACTION_").append(names[actionCode]);

    if (actionCode == MotionEvent.ACTION_POINTER_DOWN || actionCode == MotionEvent.ACTION_POINTER_UP) 
    {
        sb.append("(pid ").append(action >> MotionEvent.ACTION_POINTER_ID_SHIFT);
        sb.append(")");
    }

    sb.append("[");
    for (int i = 0; i < event.getPointerCount(); i++) 
    {
        sb.append("#").append(i);
        sb.append("(pid ").append(event.getPointerId(i));
        sb.append(")=").append((int) event.getX(i));
        sb.append(",").append((int) event.getY(i));
        if (i + 1 < event.getPointerCount())
            sb.append(";");
    }

    sb.append("]");
    Log.d("Touch Events ---------", sb.toString());
}
} 
```

我已经看到很多与此相关的问题和答案，但没有人真正帮助我。请给我一个解决方案。提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T09:44:41.663

我有一个解决方案。但它似乎并不完美。只需在切换案例之后添加下面给出的方法，就在以下`view.setImageMatrix(matrix);` 方法之前：

```
private void limitZoom(Matrix m) {

        float[] values = new float[9];
        m.getValues(values);
        float scaleX = values[Matrix.MSCALE_X];
        float scaleY = values[Matrix.MSCALE_Y];
        if(scaleX > MAX_ZOOM) {
            scaleX = MAX_ZOOM;
        } else if(scaleX < MIN_ZOOM) {
            scaleX = MIN_ZOOM;
        }

        if(scaleY > MAX_ZOOM) {
            scaleY = MAX_ZOOM;
        } else if(scaleY < MIN_ZOOM) {
            scaleY = MIN_ZOOM;
        }

        values[Matrix.MSCALE_X] = scaleX;
        values[Matrix.MSCALE_Y] = scaleY; 
        m.setValues(values);
    }

    private void limitDrag(Matrix m) {
        float[] values = new float[9];
        m.getValues(values);
        float transX = values[Matrix.MTRANS_X];
        float transY = values[Matrix.MTRANS_Y];
        float scaleX = values[Matrix.MSCALE_X];
        float scaleY = values[Matrix.MSCALE_Y];

        ImageView iv = (ImageView)findViewById(R.id.map);
        Rect bounds = iv.getDrawable().getBounds();
        int viewWidth = getResources().getDisplayMetrics().widthPixels;
        int viewHeight = getResources().getDisplayMetrics().heightPixels;

        int width = bounds.right - bounds.left;
        int height = bounds.bottom - bounds.top;

        float minX = (-width + 20) * scaleX; 
        float minY = (-height + 20) * scaleY;

        if(transX > (viewWidth - 20)) {
            transX = viewWidth - 20;
        } else if(transX < minX) {
            transX = minX;
        }

        if(transY > (viewHeight - 80)) {
            transY = viewHeight - 80;
        } else if(transY < minY) {
            transY = minY;
        }

        values[Matrix.MTRANS_X] = transX;
        values[Matrix.MTRANS_Y] = transY; 
        m.setValues(values);

    } 
```

还有比这个更好的解决方案吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-20T12:37:17.487

图像视图上的 setOnTouchListener

```
imgView.setOnTouchListener(this); 
```

单击[此处](https://stackoverflow.com/questions/6650398/android-imageview-zoom-in-and-zoom-out)！这适用于 zoomIn 和 ZoomOut 仅更改**MotionEvent.ACTION_MOVE**以设置 zoomIn 限制

```
@Override
public boolean onTouch(View v, MotionEvent event)
{
    ImageView view = (ImageView) v;
    view.setScaleType(ImageView.ScaleType.MATRIX);
    float scale;
switch (event.getAction() & MotionEvent.ACTION_MASK){

case MotionEvent.ACTION_POINTER_DOWN: // first and second finger down

            oldDist = spacing(event);
            Log.d(TAG, "oldDist=" + oldDist);
            if (oldDist > 5f) {
                savedMatrix.set(matrix);
                midPoint(mid, event);
                mode = ZOOM;
                Log.d(TAG, "mode=ZOOM");
            }
            break;
// and in  your Action_Move Event
case MotionEvent.ACTION_MOVE:

            if (mode == DRAG)
            {
                matrix.set(savedMatrix);
                matrix.postTranslate(event.getX() - start.x, event.getY() - start.y); // create the transformation in the matrix  of points
                view.setImageMatrix(matrix);
            }
            else if (mode == ZOOM)
            {
                // pinch zooming
                float newDist = spacing(event);
                Log.d(TAG, "newDist=" + newDist);
                if (newDist > 5f)
                {

                    scale = newDist / oldDist; // setting the scaling of the
                    //if scale is greater then 1 then its mean user want to 
                   //  zoom image
                  //0.37047964 is the limit of zoomin
                    float[] values = new float[9]; matrix.getValues(values);
                    if(values[Matrix.MSCALE_X]>0.37047964) {
                        matrix.set(savedMatrix);
                        matrix.postScale(scale, scale, mid.x, mid.y);
                        view.setImageMatrix(matrix);
                    }else if (scale>1){
                        matrix.set(savedMatrix);
                        matrix.postScale(scale, scale, mid.x, mid.y);
                        view.setImageMatrix(matrix);
                    }

                }
            }
            break;

   }
} 
```

# java - ConcurrentSkipListMap 和多列比较器

> ID：15609846
> 
> 赞同：0
> 
> 时间：2013-03-25T07:37:53.093
> 
> 标签：java

我有以下课程`KeyObj`

```
public class KeyObject {
    private byte[] P1;
    private byte[] P2;
    private byte[] P3;
} 
```

我想将此类的对象放入`ConcurrentSkipListMap`我对如何编写比较器感到困惑，以便可以进行范围查询。即如果`P1`给定那么它返回我`p2 and p3`。像下面的东西

```
KeyObject fromKey = new KeyObject(K1.P1, P2_MIN_VALUE, P3_MIN_VALUE);
KeyObject toKey = new KeyObject(K2.P1, P2_MAX_VALUE, P3_MAX_VALUE);
ConcurrentNavigableMap<KeyObject, Object> subview = table.submap(fromkey, toKey);
for (ConcurrentSkipListMap.Entry<KeyObject, Object> entry : subView.entrySet()) {
...
} 
```

或者

```
KeyObject fromKey = new KeyObject(K1.P1, K1.P2, P3_MIN_VALUE);
KeyObject toKey = new KeyObject(K2.P2, K2.P2, P3_MAX_VALUE);
ConcurrentNavigableMap<KeyObject, Object> subview = table.submap(fromkey, toKey);
for (ConcurrentSkipListMap.Entry<KeyObject, Object> entry : subView.entrySet()) {
...
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T08:38:20.430

使用可比较或比较器接口，并以希望它们行为的方式在其中定义方法 compareto 或 compare。

阿杰

# xcode - 每次我尝试修改源代码时，xcode 都会崩溃

> ID：15609848
> 
> 赞同：5
> 
> 时间：2013-03-25T07:37:56.797
> 
> 标签：xcode, crash

我在 OSX Mountain Lion 10.8.3 上使用 Xcode 4.6.1

今天早上我已经把我的源代码从我的 macbook air 移到了我的 iMac 上。

现在，每次我尝试修改源代码时，XCode 都会崩溃！

例如，如果我开始写这样的东西： [ [ anyclass

XCode 将崩溃并显示此消息：**无法添加具有相同标识符的另一个用户片段，您只能覆盖系统片段。**

但是，如果我之前在文本编辑器中编写代码，然后将其粘贴到 XCode 中，它就可以工作！

我不明白...我已经清空了我的派生数据，清理了我的项目，清空了 /var/folders 目录，重新启动了我的 iMac ...

非常感谢您的帮助！

```
Crashed Thread:  0  Dispatch queue: com.apple.main-thread

Exception Type:  EXC_CRASH (SIGABRT)
Exception Codes: 0x0000000000000000, 0x0000000000000000

Application Specific Information:
ProductBuildVersion: 4H512
ASSERTION FAILURE in /SourceCache/IDECodeSnippetLibrary/IDECodeSnippetLibrary-2055/Source/IDECodeSnippetRepository.m:320
Details:  Cannot add another user snippet with the same identifier, you can only override system snippets.
Object:   <IDECodeSnippetRepository: 0x4050a98c0>
Method:   -addCodeSnippet:
Thread:   <NSThread: 0x40030a220>{name = (null), num = 1}
Hints:   None
Backtrace:
  0  0x000000010b681a2a -[IDEAssertionHandler handleFailureInMethod:object:fileName:lineNumber:messageFormat:arguments:] (in IDEKit)
  1  0x000000010a9255f4 _DVTAssertionFailureHandler (in DVTFoundation)
  2  0x000000010f40f975 -[IDECodeSnippetRepository addCodeSnippet:] (in IDECodeSnippetLibrary)
  3  0x000000010f40fcfb -[IDECodeSnippetRepository _loadUserCodeSnippets] (in IDECodeSnippetLibrary)
  4  0x000000010f40ee63 -[IDECodeSnippetRepository init] (in IDECodeSnippetLibrary)
  5  0x000000010f4150c4 __44+[IDECodeSnippetRepository sharedRepository]_block_invoke (in IDECodeSnippetLibrary)
  6  0x00007fff94b950b6 _dispatch_client_callout (in libdispatch.dylib)
  7  0x00007fff94b95041 dispatch_once_f (in libdispatch.dylib)
  8  0x000000010f40ecaa +[IDECodeSnippetRepository sharedRepository] (in IDECodeSnippetLibrary)
  9  0x000000010f416cbe __102+[IDECodeSnippetLibraryCompletionStrategy _generateCompletionsForScopes:language:platformNames:atBOL:]_block_invoke (in IDECodeSnippetLibrary) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-04T15:18:02.413

Giving full credit to [Matthias](https://stackoverflow.com/users/457406/matthias-bauch), the problem appears to be tightly related to using a cloud source for your code snippets. I did this a long time ago and love the seamless availability of my custom code snippets on all my Macs (iMac 27" at work, rMBPro and MBAir). This kind of cloud storage of code snippets also makes for quick setting up of a new Mac. Yesterday, I dug out an old MBAir that I was using for development a year or so ago, when I synced Dropbox, there must have been some conflicts with my snippets that I changed since I last used said MBAir. Dropbox appends to the name a short piece of text indicating it is a conflicting copy. Unfortunately, Xcode doesn't see this as a different file and thinks it is a duplicate (which ain't allowed).

To solve, I just deleted the conflicting copies (all of them were the old versions), fired up Xcode and no problems.

If anyone is interested about doing this kind of Dropbox syncing of snippets:

[http://irockios.com/xcode-code-snippets-everywhere/](http://irockios.com/xcode-code-snippets-everywhere/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-09T03:59:55.233

它与 xcode 代码片段有关。使用 xcode 5.1，我将代码片段添加到 /Applications/Xcode.app/Contents/Frameworks/IDEKit.framework/Versions/A/Resources/SystemCodeSnippets.codesnippets，当我尝试修改源代码时，XCode 崩溃！

所以我删除了 SystemCodeSnippets.codesnippets 中的所有代码段，xcode 现在运行良好！

# asp.net - 项目中的Dotfuscated dll

> ID：15609851
> 
> 赞同：0
> 
> 时间：2013-03-25T07:38:18.877
> 
> 标签：asp.net, obfuscation, dotfuscator

我正在使用 dotfuscator 来混淆我的 Web 应用程序。我在现有的项目解决方案中添加了一个 Dotfuscator 项目并构建它。我在新添加的 dotfuscator 项目 bin 中获得了一个加密格式的 dll，其中我的项目 bin 中的 dll 保持不变。我应该用生成的新dll替换我项目的旧dll吗？如果不是，那么新生成的混淆 dll 有什么用。

# asp.net-mvc - 使用存储过程将选择标记选定值插入数据库

> ID：15609855
> 
> 赞同：1
> 
> 时间：2013-03-25T07:38:40.330
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-mvc-3-areas, asp.net-mvc-2-validation

在我看来，我的选择标签是这样的：

```
<select name="selectedItem" id="selecttag" onchange="GetSelectedItem()">
    <option value="select">Select any value</option>
    <option value="Objective">Objective</option>
    <option value="Subjective">Subjective</option>
</select> 
```

我正在使用存储过程将数据传递到数据库。如何将我选择的值传递给我的控制器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T10:11:03.033

```
[HttpPost]
 public ActionResult Index(MyViewModel model,string selectedItem) //"selectedItem" is the name of your drop down list.
 {
   //here by "selectedItem" variable you can get the selected value of dropdownlist
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T07:44:31.563

您可以使用视图模型：

```
public class MyViewModel
{
    public string Value { get; set; }
    public IEnumerable<SelectListItem> { get; set; }
} 
```

那么你可以有一个控制器来填充这个模型并将它传递给视图：

```
public ActionResult Index()
{
    var model = new MyViewModel();
    // TODO: you could load the values from your database here
    model.Values = new[]
    {
        new SelectListItem { Value = "Objective", Text = "Objective" },
        new SelectListItem { Value = "Subjective", Text = "Subjective" },
    };
    return View(model);
} 
```

然后有一个相应的强类型视图，您将在其中使用`Html.DropDownListFor`帮助器：

```
@model MyViewModel

@using (Html.BeginForm())
{
    @Html.DropDownListFor(x => x.Value, Model.Values, "Select any value");
    <button type="submit">OK</button>
} 
```

最后，您可以有一个相应的控制器操作，表单将被提交到该控制器操作，并将视图模型作为参数：

```
[HttpPost]
public ActionResult Index(MyViewModel model)
{
    // model.Value will contain the selected value here
    ...
} 
```

# primefaces - primefaces民意调查未更新

> ID：15609863
> 
> 赞同：1
> 
> 时间：2013-03-25T07:39:26.247
> 
> 标签：primefaces, datalist, polling

在我的代码中，我有一个字符串数组列表，这些字符串是给页面管理员的消息。每当采取某些操作时，都会将一个字符串添加到 arraylist 以通知管理员该操作已成功完成或未能完成。我使用带有轮询的 dataList 在页面上显示它来更新它。虽然由于某种原因我的民意调查没有更新列表。我的主要面孔（primefaces 3.4.2版）部分的代码是：

```
 <h:panelGrid>
                    <h:outputLabel value="#{admin.servStatus}" for="rText"/>
                    <p:scrollPanel style="height:100px;">
                        <h:form id="statusForm">
                            <p:dataList id="rText" value="#{adminController.model.statusText}" 
                                        var="results" itemType="square" style="height:100px">
                                #{results}
                                <p:poll interval="1"
                                        update=":statusForm:rText"
                                        listener="#{adminController.model.displayMessages()}"
                                        autoStart="true"
                                        widgetVar="statusPoll"/>
                            </p:dataList>
                        </h:form>
                    </p:scrollPanel>
                </h:panelGrid> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-17T11:42:28.953

尝试从更新民意调查中删除表单名称

像这样

```
 <p:poll interval="1" update="rText" 
```

# android - 如何在android中进行图像隐写术

> ID：15609865
> 
> 赞同：-4
> 
> 时间：2013-03-25T07:39:29.130
> 
> 标签：android, steganography

我想在图像中隐藏一条秘密消息。

我对用于此的算法一无所知。任何人都可以帮助我给出一个如何实现它的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T07:41:58.310

有一个名为[MobiStego](http://sourceforge.net/projects/mobistego/)的应用程序使用隐写术，它是开源的。

浏览 SVN 上的文件：[mobistego.svn.sourceforge.net](http://mobistego.svn.sourceforge.net/viewvc/mobistego/MobiStegoAndorid/)，它可能会对您有所帮助。

# flash-cs5 - 使用 Flash Professional cs5 开始 Starling，但添加 Staring 变量时出现错误

> ID：15609867
> 
> 赞同：0
> 
> 时间：2013-03-25T07:39:38.367
> 
> 标签：flash-cs5, starling-framework

我在下面尝试过，但我什至不能让 Starling 变量。

1）已经遵循并设置：http: [//blogs.adobe.com/rgalvan/2011/11/adding-fp11-support-to-flash-pro-cs5-and-cs5-5.html](http://blogs.adobe.com/rgalvan/2011/11/adding-fp11-support-to-flash-pro-cs5-and-cs5-5.html)

2) 从starling 样本下载starling.swc

3) 通过使用 Flash Professional CS5 创建新的 ActionScript 3.0 来制作 HelloStl.fla 文件

4）在库路径上添加starling.swc

5）在fla属性的类上写“HelloStarling”并像下面这样编辑

```
import flash.display.MovieClip;
import starling.core.Starling;

public class HelloStarling extends MovieClip {

private var st:Starling;
public function HelloStarling() {
 // constructor code
trace("check");
} 
```

6）执行这个。控制 -> 测试影片 -> 测试

但我有如下错误，

```
VerifyError: Error #1079: native methods are not allowed in loaded code
ReferenceError: Error #1065: variable HelloStarling is not defined 
```

我认为“private var:st:Starling”这一行导致了上述错误。而且“检查”也不会打印

有人知道这个错误吗？请帮忙..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T10:22:56.287

什么.. !!

自答。

我安装了 CS6 而不是 CS5。

之后，一切都会好起来的！

我认为，由 FP11 设置引起的错误！:<

我建议只使用 CS6 而不是 CS5！！！！

# android - 轮视图 android 按钮

> ID：15609868
> 
> 赞同：0
> 
> 时间：2013-03-25T07:39:40.583
> 
> 标签：android, android-layout, android-intent, android-emulator, android-widget

我正在使用 kankan 的轮视图演示。但是在轮子中选择项目时不知道如何使用按钮。请帮我。

我使用了一个按钮，但像微调器一样，没有方法 setOnItemSelectedListener(this); 那么如何在从轮子中选择项目后单击按钮时使用它。

提前致谢。

编码如下：

公共类 SlotMachineActivity 扩展 Activity {

```
final String cities[] = new String[] { "Item 1",
        "Item 2", "Item 3", "Item 4",
        "Item 5", "Item 6", "Item 7",
        "Item 8", " Item 9", "Item 10" };

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.slot_machine_layout);

    initWheel(R.id.slot_1, cities);

}

Handler handlar = new Handler() {
    @Override
    public void handleMessage(Message msg) {
        // TODO Auto-generated method stub
        super.handleMessage(msg);
        mixWheel(R.id.slot_1);
    }
};

class UpdateTimeTask extends TimerTask {
    public void run() {
        handlar.removeCallbacks(this);
        handlar.sendEmptyMessage(0);
    }
}

// Wheel scrolled flag
private boolean wheelScrolled = false;

// Wheel scrolled listener
OnWheelScrollListener scrolledListener = new OnWheelScrollListener() {
    public void onScrollingStarted(WheelView wheel) {
        wheelScrolled = true;
    }

    public void onScrollingFinished(WheelView wheel) {
        wheelScrolled = false;
        // updateStatus();

        Toast.makeText(getApplicationContext(), cities[wheel.getCurrentItem()], Toast.LENGTH_LONG).show();
    }
};

// Wheel changed listener
private OnWheelChangedListener changedListener = new OnWheelChangedListener() {
    public void onChanged(WheelView wheel, int oldValue, int newValue) {
        if (!wheelScrolled) {
            // updateStatus();
        }
    }
};

/**
 * Initializes wheel
 * 
 * @param id
 *            the wheel widget Id
 */
private void initWheel(int id, String cities[]) {

    ArrayWheelAdapter<String> adapter = new ArrayWheelAdapter<String>(this,
            cities);

    WheelView wheel = getWheel(id);
    wheel.setViewAdapter(adapter);
    wheel.setCurrentItem((int) (Math.random() * 10));
    wheel.setVisibleItems(7);

    wheel.addChangingListener(changedListener);
    wheel.addScrollingListener(scrolledListener);
    wheel.setCyclic(true);
    wheel.setEnabled(true);
}

/**
 * Returns wheel by Id
 * 
 * @param id
 *            the wheel Id
 * @return the wheel with passed Id
 */
private WheelView getWheel(int id) {
    return (WheelView) findViewById(id);
}

/**
 * Mixes wheel
 * 
 * @param id
 *            the wheel id
 */
private void mixWheel(int id) {
    WheelView wheel = getWheel(id);
    wheel.scroll(-350 + (int) (Math.random() * 50), 2000);

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T17:03:11.013

您必须在按钮上设置一个 OnClickListener 并从那里从轮子中读取当前选定的项目。

# objective-c - 应用程序的唯一 ID

> ID：15609869
> 
> 赞同：0
> 
> 时间：2013-03-25T07:39:42.100
> 
> 标签：objective-c

我知道以前有人问过这个问题，但我发现有一些不清楚/未解决的问题，还有一些更新，我想为我和其他人订购。

由于每个应用程序都需要一个唯一的 id，以便服务器可以识别它，我们曾经拥有`UDID`which is now `deprecate`。

我找到了 4 种其他方法来做到这一点，但是它们存在一些问题，我们不想冒险。

1.  `NSString *UD= [UIDevice currentDevice].identifierForVendor.UUIDString ;`

我在这里读到，有时您可以在创建此号码时获得 0000 .. 因为苹果对那些在空中更新 ios 的人有一些错误。（苹果证实）另一件事-有`advertisingIdentifier`-更好吗？

2.

```
CFUUIDRef uuidObject = CFUUIDCreate(kCFAllocatorDefault);
NSString *uuidStr = ( NSString *)CFUUIDCreateString(kCFAllocatorDefault, uuidObject); 
```

这种方式创建一个唯一的 id ，我可以将它保存`NSUserDefaults`并使用它。但是，如果一个人删除了他的应用程序，我们就有问题了。另外，我听说这个在 6 下的其他 iOS 也有一些问题？

3 `MAC adress`与第三方类，我已经阅读了 - 也有 ios 兼容性问题，

因此，归根结底，是否有一种通用的方法来获取始终适用于每个 ios 的 id？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T08:16:37.400

好的经过这么多的研究，我想我找到了一些组合，可以提供最好的方法。如果我错了，请纠正我。

使用方法2，创建一个uniqueID`CFUUIDRef`很好，但是你不能保存它，`NSUserdefaults`因为卸载会删除它！

因此，我们可以将它保存到钥匙串中，并永远保存在那里，例如：

```
SFHFKeychainUtils storeUserName: andPassword: forServiceName: 
```

# hibernate - where 子句中的日期 --- org.hibernate.hql.internal.ast.QuerySyntaxException：意外令牌：Mar

> ID：15609871
> 
> 赞同：2
> 
> 时间：2013-03-25T07:39:51.117
> 
> 标签：hibernate, date, token, where, clause

我在 TrainSeat 表中有日期列。我想使用 where 子句检索数据。在 where claue 中，指定了日期条件。

`Seats=(ArrayList<TrainSeat>)session.createQuery("from TrainSeat t where t.train.TrainNumber="+TrainNum+"and t.date="+date+"").list();`

这里 'date' 是 Date 数据类型的实例

此语句给出以下错误

```
org.hibernate.hql.internal.ast.QuerySyntaxException: unexpected token: Mar near line 1, column 80 [from org.irctc.admin.TrainSeat t where t.train.TrainNumber=11007and t.date=Wed Mar 27 00:00:00 IST 2013] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T07:54:10.550

您的日期正在那里转换为字符串。您可以在那里将日期作为参数传递。

像这样试试

```
String hql = "from TrainSeat t where t.train.TrainNumber=? and t.date=?";
List result = session.createQuery(hql)
.setString(0, TrainNum)
.setParameter(1,date)
.list(); 
```

# javascript - node.js mongodb客户端：无法调用null的方法'collection'

> ID：15609874
> 
> 赞同：0
> 
> 时间：2013-03-25T07:39:59.613
> 
> 标签：javascript, node.js, mongodb

这是我的 data.config 文件

```
DbProvider.prototype.doOperation = function(collection, operation, params, callback)
 {
    this.validateParams(params, callback);

var operationCallback = function(err, result)
{

    callback(err, result);
};
this.db.collection(collection, function(err, collection) {
    if(operation==='find') {
        collection.find().toArray(operationCallback);
    } else {
        collection[operation](params, operationCallback);
    }
});
}

DbProvider.prototype.findUser = function(params, callback)
 {

   this.doOperation('users', 'findOne', params, callback);

 }; 
```

我试图通过这种方式找到id退出

```
dbProvider.findUser({_id:"514fdb464f2c06a9d6003afb"},function(err,result)

{

console.log("welcome");

}); 
```

但我收到此错误无法调用 null 的方法“集合”如何解决此问题...

# shell - 如何在 shell 中声明一个变量，从用户那里读取输入并输出结果？

> ID：15609877
> 
> 赞同：-1
> 
> 时间：2013-03-25T07:40:15.893
> 
> 标签：shell, unix, arguments

我是 UNIX 世界的新手。我们的老师让我们自己学习一切，我必须在课堂上错过一些东西。我只知道 C# 并且习惯于文本框。我有一个名为的文件`likes`，当我 cat 时会显示以下内容：

```
dave,coors
mike,bud
linda,coors
gary,miller
mike,miller
sally,coors
dave,bud
sally,miller 
```

我在 bin 中创建了一个名为`drinks`. 执行时我需要以下内容作为我的输出`drinks`。

```
$ drinks dave
dave likes to drink:

coors
bud

total number of beers dave likes to drink: 2 
```

如果我运行`drinks sally`输出需要匹配 sallys 喜欢。

如何在脚本执行文件时声明一个变量，该变量将在 shell 上输入名称？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T08:04:14.300

`$1`您可以通过变量(first arg), `$2`(second arg), ..., `${42}`(fourtysecond arg)将参数引用到 shell 脚本。

在您的`drinks`脚本中，您可以使用`$1`.

```
#!/bin/sh
if test $# = 0; then
    # User forgot to provide a name.
    printf '%s\n' "usage: $0 name" >&2
    exit 1
fi
printf '%s\n' "$1 likes to drink"
# Rest of code left as an exercise. 
```

# r - 当有 3 个或更多类时，如何在 R 中获取单个表？

> ID：15609886
> 
> 赞同：0
> 
> 时间：2013-03-25T07:40:47.960
> 
> 标签：r

我有一个数据集，我试图找到与另一个数据集相比的 rand 索引。其中一组如下所示。第二组与这一组非常相似。我一直在尝试使用该`classAgreement()`函数来获取 rand 索引，但是我不知道如何将我拥有的数据转换为`classAgreemeent()`. 如果我能从每个数据中得到一个比较每个集群的表格，我认为这会有所帮助，但我感到迷茫。

```
-3  6   2
-2  7   2
-5  4   2
-4  7   2
12  10  3
11  9   3
14  11  3
13  12  3
14  18  1
15  19  1
13  20  1
15  16  1
16  18  1
17  17  1
2   10  2
14  9   3
17  6   3
-1  17  2
17  9   3
0   12  2 
```

如果你运行 table(mydata)，你会为 V3 的每个值（1、2 或 3）获得三个表。

```
, , V3 = 1

    V2
V1   4 6 7 9 10 11 12 16 17 18 19 20
  -5 0 0 0 0  0  0  0  0  0  0  0  0
  -4 0 0 0 0  0  0  0  0  0  0  0  0
  -3 0 0 0 0  0  0  0  0  0  0  0  0
  -2 0 0 0 0  0  0  0  0  0  0  0  0
  -1 0 0 0 0  0  0  0  0  0  0  0  0
  0  0 0 0 0  0  0  0  0  0  0  0  0
  2  0 0 0 0  0  0  0  0  0  0  0  0
  11 0 0 0 0  0  0  0  0  0  0  0  0
  12 0 0 0 0  0  0  0  0  0  0  0  0
  13 0 0 0 0  0  0  0  0  0  0  0  1
  14 0 0 0 0  0  0  0  0  0  1  0  0
  15 0 0 0 0  0  0  0  1  0  0  1  0
  16 0 0 0 0  0  0  0  0  0  1  0  0
  17 0 0 0 0  0  0  0  0  1  0  0  0

, , V3 = 2

    V2
V1   4 6 7 9 10 11 12 16 17 18 19 20
  -5 1 0 0 0  0  0  0  0  0  0  0  0
  -4 0 0 1 0  0  0  0  0  0  0  0  0
  -3 0 1 0 0  0  0  0  0  0  0  0  0
  -2 0 0 1 0  0  0  0  0  0  0  0  0
  -1 0 0 0 0  0  0  0  0  1  0  0  0
  0  0 0 0 0  0  0  1  0  0  0  0  0
  2  0 0 0 0  1  0  0  0  0  0  0  0
  11 0 0 0 0  0  0  0  0  0  0  0  0
  12 0 0 0 0  0  0  0  0  0  0  0  0
  13 0 0 0 0  0  0  0  0  0  0  0  0
  14 0 0 0 0  0  0  0  0  0  0  0  0
  15 0 0 0 0  0  0  0  0  0  0  0  0
  16 0 0 0 0  0  0  0  0  0  0  0  0
  17 0 0 0 0  0  0  0  0  0  0  0  0

, , V3 = 3

    V2
V1   4 6 7 9 10 11 12 16 17 18 19 20
  -5 0 0 0 0  0  0  0  0  0  0  0  0
  -4 0 0 0 0  0  0  0  0  0  0  0  0
  -3 0 0 0 0  0  0  0  0  0  0  0  0
  -2 0 0 0 0  0  0  0  0  0  0  0  0
  -1 0 0 0 0  0  0  0  0  0  0  0  0
  0  0 0 0 0  0  0  0  0  0  0  0  0
  2  0 0 0 0  0  0  0  0  0  0  0  0
  11 0 0 0 1  0  0  0  0  0  0  0  0
  12 0 0 0 0  1  0  0  0  0  0  0  0
  13 0 0 0 0  0  0  1  0  0  0  0  0
  14 0 0 0 1  0  1  0  0  0  0  0  0
  15 0 0 0 0  0  0  0  0  0  0  0  0
  16 0 0 0 0  0  0  0  0  0  0  0  0
  17 0 1 0 1  0  0  0  0  0  0  0  0 
```

我怎样才能只在其中一张生产的桌子上工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T07:50:51.887

您可以使用`[]`选择数据并为要选择的表格提供第三个位置，例如选择第二个表格：

```
table(mydata)[,,2]
    V2
V1   4 6 7 9 10 11 12 16 17 18 19 20
  -5 1 0 0 0  0  0  0  0  0  0  0  0
  -4 0 0 1 0  0  0  0  0  0  0  0  0
  -3 0 1 0 0  0  0  0  0  0  0  0  0
  -2 0 0 1 0  0  0  0  0  0  0  0  0
  -1 0 0 0 0  0  0  0  0  1  0  0  0
  0  0 0 0 0  0  0  1  0  0  0  0  0
  2  0 0 0 0  1  0  0  0  0  0  0  0
  11 0 0 0 0  0  0  0  0  0  0  0  0
  12 0 0 0 0  0  0  0  0  0  0  0  0
  13 0 0 0 0  0  0  0  0  0  0  0  0
  14 0 0 0 0  0  0  0  0  0  0  0  0
  15 0 0 0 0  0  0  0  0  0  0  0  0
  16 0 0 0 0  0  0  0  0  0  0  0  0
  17 0 0 0 0  0  0  0  0  0  0  0  0 
```

# jquery - jquery 倒计时提交

> ID：15609890
> 
> 赞同：0
> 
> 时间：2013-03-25T07:40:57.010
> 
> 标签：jquery, redirect, onclick, submit

我想在访问者单击提交时编码，它会在重定向到所述站点之前显示倒计时时间。

下面是演示

[http://jsfiddle.net/VJT9d/17/](http://jsfiddle.net/VJT9d/17/)

这是html代码：

```
<input id="hulk" class="submit" name="send_contact" type="submit" value="Send" />

<div style="display:hidden">Redirecting In <span id="countdown">5</span>.</div> 
```

和jQuery代码：

```
var timer = 5,
el = document.getElementById('countdown');

$('#hulk').click(function t_minus() {
'use strict';
el.innerHTML = timer--;
if (timer >= 0) {
    setTimeout(function () {
        t_minus();
    }, 1000);
} else {
    window.location.replace("/");
}
}()); 
```

如何使倒数计时器仅在单击提交后出现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T07:45:29.100

只需删除`()`您最后拥有的。

```
var timer = 5,
    el = document.getElementById('countdown');

$('#hulk').on( 'click', function t_minus() {
    'use strict';
    el.innerHTML = timer--;
    if (timer >= 0) {
        setTimeout(function () {
            t_minus();
        }, 1000);
    } else {
        window.location.replace("/");
    }
}); 
```

更新[小提琴](http://jsfiddle.net/VJT9d/18/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T08:00:54.023

要使消息仅在单击后可见，您需要做两件事：首先，正确隐藏具有适当样式的元素，其次不要在最后一行启动 t_minus 函数！

[解决方案](http://jsfiddle.net/VJT9d/20/)

`var timer = 5,`

 ````
el = document.getElementById('countdown');
$('#hulk').click(function t_minus() {
'use strict';
el.innerHTML = timer--;
if (timer >= 0) {
    setTimeout(function () {
    t_minus();
    }, 1000);
} else {
    window.location.replace("/");
}
}); 
````  `另请阅读如何使用 CSS 隐藏元素

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T07:47:48.050

利用

$('#countdown').show()

在点击功能内。`

# vb.net - 无法为不在栈顶的方法设置局部变量的值

> ID：15609892
> 
> 赞同：0
> 
> 时间：2013-03-25T07:41:26.047
> 
> 标签：vb.net, visual-studio-debugging

```
 Dim sqlconn As New SqlClient.SqlConnection
    sqlconn.ConnectionString = "server = SKPI-APPS1;" & _
    "Database = EOEMS;integrated security=true"
    Dim myCommand As New SqlCommand
    Dim ra As Integer

    sqlconn.Open()
    myCommand = New SqlCommand("INSERT INTO tblOfficeEquipmentProfile(OE_Category,OE_SubCategory,OE_ID,OE_Name,OE_User,OE_Brand,OE_Model,OE_Specs,OE_SerialNo,OE_PropertyNo,OE_MacAddress,OE_Static_IP,OE_Vendor,OE_PurchaseDate,OE_WarrantyInclusiveYear,OE_WarrantyStatus,OE_Status,OE_Dept_Code,OE_Location_Code,OE_Remarks) VALUES('" + cmbCategory.Text + "','" + cmbSubCategory.Text + "','" + txtOEID.Text + "','" + txtName.Text + "','" + txtUser.Text + "','" + cmbBrand.Text + "','" + cmbModel.Text + "','" + txtSpecs.Text + "','" + txtSerialNo.Text + "','" + txtPropertyNo.Text + "','" + txtStaticIp.Text + "','" + txtVendor.Text + "','" + txtPurchaseDate.Text + "','" + cmbWarrantyInclusiveYear.Text + "','" + txtStatus.Text + "','" + cmbDeptCode.Text + "','" + cmbLocationCode.Text + "','" + cmbRemarks.Text + "')", sqlconn)
    myCommand.ExecuteNonQuery()
    MessageBox.Show("New Row Inserted" & ra)
    sqlconn.Close() 
```

编辑这是我添加按钮的全部代码

# c# - c#中的点阵打印

> ID：15609893
> 
> 赞同：0
> 
> 时间：2013-03-25T07:41:47.920
> 
> 标签：c#

我正在尝试`Epson LX-300+ II`从`c#`. 我想增加字体大小。我在用：

```
sw.Write((char)27);
sw.Write((char)69);
sw.Write((char)14); 
```

使打印输出加粗。

有没有增加字体大小的代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T08:48:57.193

还有另一种不使用流 Writer 的方法。创建一个单词模板并在表格的特定单元格中填充所需的数据。然后很容易为每个单元格设置字体、字体大小、粗体。然后将word文件发送到打印机。

# javascript - 模拟 ctrl 点击 Richfaces3.3 rich:extendedDataTable

> ID：15609901
> 
> 赞同：0
> 
> 时间：2013-03-25T07:42:24.480
> 
> 标签：javascript, jquery, richfaces

我一直在尝试向扩展数据表添加一些复选框。所以我需要在单击复选框时模拟 ctrl-click 表格行。

我尝试使用：

```
var e = jQuery.Event("click");
          e.ctrlKey = true;
          jQuery(rowToClick).trigger(e); 
```

但它永远不会奏效。我试图从rich:extendedDataTable 获取onRowClick 事件，event.ctrlKey 总是“假”。

```
<rich:extendedDataTable onRowClick="rowBeenclick(event);" ..../>

function rowBeenclick(e){
  debugger;
alert(e.ctrlKey);
} 
```

对此有何想法或建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-26T03:14:36.627

我只是认清自己！在这里分享：（太长了，所以我剪了两个帖子 IE/其他）

```
//Do ctrl click 
function fireEvent(obj,evt){
 var fireOnThis = obj; 
if(document.createEvent) {
//For firefox or else 
var evObj = document.createEvent('MouseEvents'); 
evObj.initMouseEvent("click", true, true, window, 1, 0, 0, 0, 0, true, false, false,         false, 0, null); 
fireOnThis.dispatchEvent( evObj ); } 
}
//Do ctrl click 
function fireEvent(obj,evt){
 var fireOnThis = obj; 
if(document.createEventObject) {
//For IE 
var evObj = document.createEventObject(); evObj.ctrlKey=true; fireOnThis.fireEvent('onclick', evObj); } 
} 
```

# css - 指南针的图标字体生成器？

> ID：15609903
> 
> 赞同：2
> 
> 时间：2013-03-25T07:42:28.143
> 
> 标签：css, fonts, sass, compass-sass, icon-fonts

所以指南针中的精灵表生成非常棒；但是，光栅化图像可能会限制某些事情。我们有足够的图标，现在需要使用不同的颜色和大小，我们开始为它们制作图标字体。

我想知道是否有人为 sass/compass 制作了一个 gem 来获取 svg 文件并输出一堆类似于 compass 中的精灵表功能的散列字体？我在网上搜索并找不到任何东西，所以它可能还不存在？

下一个问题是，有没有一种简单的方法来获取 SVG 并从中创建字体？是否已经有一些工具能够以自动化的方式做这样的事情？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-31T10:13:35.900

有一个用于生成字体图标的宝石。它是字体自定义。链接：[https ://github.com/FontCustom/fontcustom](https://github.com/FontCustom/fontcustom)

示例项目：

[https://content.pivotal.io/blog/generate-icon-fonts-automatically-with-fontcustom](https://content.pivotal.io/blog/generate-icon-fonts-automatically-with-fontcustom) [https://github.com/wardpenney/pivotal-blog-example-fontcustom](https://github.com/wardpenney/pivotal-blog-example-fontcustom)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T08:03:03.747

这是创建图标字体的好工具，您可以添加 svg 文件或从大量字体中进行选择，您可以创建 PUA 格式和 utf8 的字体：

应用程序链接：http: [//icomoon.io/](http://icomoon.io/)

# ant - 由taskdef定义的任务会在ant中默认运行fork模式还是在同一进程内？

> ID：15609905
> 
> 赞同：0
> 
> 时间：2013-03-25T07:42:37.550
> 
> 标签：ant, taskdef

由于 taskdef 没有 fork 属性，所以默认情况下，taskdef 定义的任务是在 fork 模式下运行还是在运行 ant 脚本的同一进程内运行。

我的任务定义如下

```
<taskdef name="test" classname="com.org.test.test1" loaderref="test.classloader" /> 
```

提前致谢，索曼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T09:09:24.110

不，它在同一个过程中。

为了证明这一点，最简单的方法是运行一个带有一些简单目标和自定义任务的简单 Ant 构建文件，并使用流程管理器检查 Ant 流程是否创建了任何新流程。

如果您想在分叉的进程中执行某些操作，您应该在任务的 Java 代码中自己完成。一些任务（如`junit`or `java`）有`fork`-related 参数——它是由任务本身完成的，而不是由 Ant 完成的。

# jquery - 无法通过 ajax 请求获取 CSV 文本

> ID：15609906
> 
> 赞同：1
> 
> 时间：2013-03-25T07:42:51.960
> 
> 标签：jquery, ajax, csv, syntax-error, special-characters

我有一个无法检索 csv 响应的小问题。

这里有一个 csv[链接到 csv](http://toolserver.org/~daniel/WikiSense/Contributors.php?wikilang=en&wikifam=.wikipedia.org&page=Cloud%20computing&since=&until=&grouped=on&order=-edit_count&max=1000&order=-edit_count&format=csv)

我正在尝试检索此数据，但是响应中的特殊字符存在问题。

我成功接收了数据，但随后 jQuery 尝试对其进行解码并通过语法错误：我的请求是：

```
$.ajax({
    url: 'http://toolserver.org/~daniel/WikiSense/Contributors.php?wikilang=en&wikifam=.wikipedia.org&page=Cloud+computing&since=&until=&grouped=on&order=-edit_count&max=1000&order=-edit_count&format=csv',
    dataType: "script",
    success: function(data){
        alert('success');
    },
    error: function(test1, test2, test3) {
        alert('error');
    }
}); 
```

错误是（指向 % 字符）

```
SyntaxError: syntax error
1004+%28922%2F82%29,SamJohnston,2008-07-26+09%3A40,2013-03-07+18% 
```

我还尝试将 dataType 设置为 text 以便不对数据进行解码。在这种情况下，我收到 ajax 请求错误。

```
$.ajax({
    url: 'http://toolserver.org/~daniel/WikiSense/Contributors.php?wikilang=en&wikifam=.wikipedia.org&page=Cloud+computing&since=&until=&grouped=on&order=-edit_count&max=1000&order=-edit_count&format=csv',
    dataType: "text",
    success: function(data){
        alert('success');
    },
    error: function(test1, test2, test3) {
        alert('error');
    }
}); 
```

我尝试使用 .ajax() 参数 contentType、dataType、scriptCharset 等进行试验。它没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T07:44:27.320

`dataType: "text"`会是正确的。听起来您遇到了[Same Origin Policy](http://en.wikipedia.org/wiki/Same_origin_policy)，它可以防止跨域调用。当您说`dataType: "script"`jQuery 自动将请求转换为添加`script`元素而不是执行实际的 ajax 调用。添加`script`跨域引用脚本的元素并不违反 SOP（这就是为什么我们可以使用 Google 和 Microsoft 之类的 CDN 作为通用脚本的原因）。但是在获取 CSV 时不能这样做，因为 CSV（当然）不是有效的 JavaScript 代码。

如果您从中检索的服务器在您的控制之下，并且您使用的是现代浏览器（[在这种情况下，这](http://caniuse.com/#feat=cors)意味着任何模糊的最新版本的 Chrome、Firefox 或 Opera，或者使用 IE9 或更高版本），您可以实现[跨域资源共享](http://www.w3.org/TR/access-control/)，如果服务器允许请求文档的源源，则允许跨域 ajax 调用。CORS 基本上意味着响应 HTTP`OPTIONS`调用，该调用询问是否可以发送带有适当标头的 ajax 调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T07:48:43.240

在我看来，这是一个不可接受的跨域请求。阅读[此处](https://stackoverflow.com/questions/11409920/loading-a-csv-file-using-jquery-get-returns-the-header-but-no-data)和[此处](https://stackoverflow.com/questions/12250065/receive-csv-file-as-data-in-ajax-success-function)了解更多信息

# php - 加密数据库

> ID：15609907
> 
> 赞同：1
> 
> 时间：2013-03-25T07:42:54.267
> 
> 标签：php, mysql, security, encryption

我有一个`PHP`带有`MySql`数据库支持的网站。

我想要`Encrypt`整个数据库。
基本上我想要的是如果有人获得数据库登录凭据，一定不能读取数据。

我已阅读有关 mysql`ENCODE()`和`AES_ENCRYPT()`函数的信息。但是这种方式会导致 php 脚本的很多变化以及一些性能问题。

是否有任何技术来加密整个数据库文件或任何其他方式来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-12-28T20:15:41.567

如果您正在寻找标准合规性，只需确保您的数据库使用的文件系统受**全盘加密**保护。

对于 PostgreSQL，这通常可以通过关闭 PostgreSQL、复制`/var/lib/postgresql`到加密驱动器、然后重命名旧目录并在重新`/var/lib/postgresql`启动数据库服务器之前安装新驱动器来实现。（确定`shred`迁移成功后，请务必查看旧目录的内容。）

对于 MySQL/等，您的里程会有所不同，但也应该是可能的。

避免使用`AES_ENCRYPT()`和等价物。`ENCODE()`也无济于事，因为[编码不是加密](https://paragonie.com/blog/2015/08/you-wouldnt-base64-a-password-cryptography-decoded#encoding-compression)。

如果您需要加密单个记录，您可能对我们[在 PHP 和 SQL 中的可搜索加密](https://paragonie.com/blog/2017/05/building-searchable-encrypted-databases-with-php-and-sql)策略感兴趣，但这可能有点超出这个问题的范围。我们有一个名为[CipherSweet](https://github.com/paragonie/ciphersweet)的库，它在 PHP + SQL 中实现了可搜索的加密。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-25T07:59:18.500

用于密码和校验和`SHA512`的函数。`bcrypt_encode()`

对于其他特定数据，使用来自 PHP 文件的自己的 SALT + 使用某种机制进行编码`base64_encode($your_db_table_data) + "MY_SALT_FROM_WEB".`和向后，`base64_decode($your_db_table_data) + MY_SALT_FROM_WEB`.

您可以使用`gzdeflate`which decrpyt 并压缩您的数据 + 使用 salt 使解密变得困难。例子：

```
$data = gzdeflate($your_data) + YOUR_SALT; 
```

这将像在数据库中一样简单地产生：`��O�KWH�KQpI�r\���*JZ<��AR`

解码 deflate 使用如下：`gzinflate(gzdeflate($your_data_from_db + YOUR_SALT_FROM_WEB));`

这是参考： http: [//php.net/manual/en/function.gzinflate.php](http://php.net/manual/en/function.gzinflate.php)

如果您想对 char 和较小的数据库进行更复杂的解码，请使用 base64_enocode / base64_decode + YOUR_SALT_HIDDEN_FROM_WEB 数据库中的数据用于 CHAR() 和较小的文本。

这是我的想法，我将如何加密数据库中的数据以供 VARCHAR() 使用。对于文本数据，使用加密方式与 SALT 组合进行压缩。

我目前不知道另一种解决方案，或者使用 AES 技术结帐加密 MySQL 数据：http: [//thinkdiff.net/mysql/encrypt-mysql-data-using-aes-techniques/](http://thinkdiff.net/mysql/encrypt-mysql-data-using-aes-techniques/)

这在 MySQL 中使用`AES_ENCRYPT`并`AES_DECRYPT`集成，但仅限于 VARBINARY(150) 或 VARCHAR(100)。使用 encrpyted 方法压缩可以做到这一点，而不是使用集成的 MySQL`AES`函数。

希望这会有所帮助。

# hadoop - 错误：Java 堆空间

> ID：15609909
> 
> 赞同：17
> 
> 时间：2013-03-25T07:43:09.727
> 
> 标签：hadoop

在 Ubuntu 中，当我运行 hadoop 示例时：

```
$bin/hadoop jar hadoop-examples-1.0.4.jar grep input output 'dfs[a-z.]+' 

$echo $HADOOP_HEAPSIZE
2000 
```

在日志中，我收到以下错误：

> 信息 mapred.JobClient：任务 ID：attempt_201303251213_0012_m_000000_2，状态：失败 **错误：Java 堆空间**13/03/25 15:03:43 信息 mapred.JobClient：任务 ID：attempt_201303251213_0012_m_000001_2，状态：Java 堆空间/03/2 15:04:28 信息 mapred.JobClient：作业失败：失败的地图任务数超出了允许的限制。FailedCount：1。LastFailedTask：task_201303251213_0012_m_000000 java.io.IOException：作业失败！在 org.apache.hadoop.mapred.JobClient.runJob(JobClient.java:1265) 在 org.apache.hadoop.examples.Grep.run(Grep.java:69) 在 org.apache.hadoop.util.ToolRunner.run (ToolRunner.java:65) 在 org.apache.hadoop.examples.Grep.main(Grep.java:93)

让我们知道是什么问题。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-03-25T09:45:42.583

显然，您已经用完了分配给 Java 的堆大小。所以你应该尝试增加它。

`hadoop`为此，您可以在执行命令之前执行以下操作：

```
export HADOOP_OPTS="-Xmx4096m" 
```

或者，您可以通过在文件中添加以下永久设置来实现相同的目的`mapred-site.xml`，该文件位于`HADOOP_HOME/conf/`：

```
<property>
    <name>mapred.child.java.opts</name>
    <value>-Xmx4096m</value>
</property> 
```

这会将您的 java 堆空间设置为 4096 MB (4GB)，如果可行，您甚至可以先尝试使用较低的值。如果这也不起作用，那么如果您的机器支持它，则增加更多，如果不支持，则移至具有更多内存的机器并在那里尝试。由于堆空间只是意味着您没有足够的 RAM 可用于 Java。

**更新：**对于 Hadoop 2+，请改为在*mapreduce.map.java.opts*中进行更改。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-10-17T23:08:26.260

```
<property>
   <name>mapred.child.java.opts</name>
  <value>-Xmx4096m</value>
</property> 
```

为我工作。

> 导出 HADOOP_OPTS="-Xmx4096m"

不工作

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-07-31T21:58:07.470

使用 Hadoop 2.5.0-cdh5.2.0，这对我来说改变了本地（顺序）java 进程的堆大小：

```
export HADOOP_HEAPSIZE=2900
hadoop jar analytics.jar ..... 
```

它起作用的原因是 /usr/lib/hadoop/libexec/hadoop-config.sh 有

```
# check envvars which might override default args
if [ "$HADOOP_HEAPSIZE" != "" ]; then
  #echo "run with heapsize $HADOOP_HEAPSIZE"
  JAVA_HEAP_MAX="-Xmx""$HADOOP_HEAPSIZE""m"
  #echo $JAVA_HEAP_MAX
fi 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-09T06:47:41.727

如果您在 mapred-site.xml 上添加属性

```
<property>
   <name>mapred.child.java.opts</name>
  <value>-Xmx2048m</value>
</property> 
```

有时它会发生另一个因为它超过虚拟内存限制在这种情况下，您必须添加

```
<property>
        <name>yarn.nodemanager.vmem-pmem-ratio</name>
        <value>4.2</value>
</property> 
```

在 yarn-site.xml 上

因为它默认的2.1G有时太小了。

# java - 不同编程语言之间的桥接

> ID：15609918
> 
> 赞同：2
> 
> 时间：2013-03-25T07:43:55.783
> 
> 标签：java, c++, python, c, thrift

这更像是一个设计问题。

我正计划编写一些实现 CPU 密集型算法的 Web 服务。我要解决的问题是——python、perl 或 java 等高级语言使编写 Web 服务变得容易。虽然 C、C++ 等较低级别的语言可以微调代码的性能。

所以我在研究我能做些什么来桥接两种语言。这是我想出的选项：

## 特定于语言的绑定

使用 perl-xs 或 python 的 ctypes/loadlibrary 或 java 的 JNI 之类的东西。好处是我可以编写可以在同一进程中执行的扩展。在本地语言类型与 C 之间的转换和转换回来的开销很小。

## 实现一个单独的守护进程

使用 thrift / avro 之类的东西，并有一个单独的守护进程来运行 C/C++ 代码。好处是，它与高级语言松散耦合。我可以快速替换高级语言。缺点是序列化和本地 unix 域套接字的开销可能高于在相同地址空间中执行代码（由前一个选项提供）。

你们有什么感想？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T08:09:38.950

如果您的 C/C++ 代码已经存在，最好的办法是将其发布为服务，并使用与您已有的功能相匹配的 API。然后，您可以用您选择的语言编写新服务，匹配您需要的 API，并且它们可以调用 C/C++ 服务。

如果您的 C/C++ 代码尚不存在，并且您准备使用 Java 或 C# 等高级语言创建大部分代码，请考虑在初始时也使用该语言实现性能关键部分。只有在分析显示特定的性能问题，并且在你用尽了语言中最基本的优化技术之后，例如避免在最热循环内分配，你应该考虑将已被证明消耗最多循环的位重写为另一种语言使用JNI之类的胶水。

换句话说，在你手头有数字之前不要优化。也没有根本原因，您不能通过足够的尝试从 Java 中挤出（几乎）与 C++ 相同的性能水平。您有真正的机会最终获得比您预期的更简单的架构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T22:53:43.673

“序列化和本地 UNIX 域套接字的开销”不是问题。假设守护进程和 Web 服务代码之间交换的数据大小与从 Web 服务通过网络发送到客户端的数据大小相同（或更小），那么网络最终可能会成为您的瓶颈，并且开销几乎无法衡量。

这是一个测试通过 UNIX 套接字传输 1GB 的脚本（需要具有大量支持的 netcat-openbsd 包和 bash，[时间命令借用自自定义格式的时间](https://stackoverflow.com/questions/3683434/using-time-command-in-bash-script)代码）：

```
#!/bin/bash
rm -f hello.sock
nc -l -U hello.sock | wc -c &
sleep 1
T="$(date +%s%N)"
dd if=/dev/zero bs=1048576 count=1024 | nc -U hello.sock
T="$(($(date +%s%N)-T))"
echo "$T nanoseconds / GB"
rm -f hello.sock 
```

在我的 Intel Core i7 系统上，我得到 1664042362 纳秒/GB。转换为 gbit/s：

```
(1 GB / 1664042362 ns) * (1000000000 ns / s) * (8 gbit / 1 GB) ~ 4.8 gbit / s 
```

在我的系统上，这个基准测试充分利用了 2 个内核（通过修改程序以输出几 GB 并查看 vmstat 来确定）。因此，如果您的 Internet 连接（以 gbit/s 为单位）为 K，并且您有 N 个内核，那么当网络满载时 IPC 使用的 CPU 百分比将是：

```
(K / 4.8) * (2 / N) 
```

如果您使用至少四个核心，那么您到 Web 服务客户端的带宽为 100 mbps 或更慢，并且通过 IPC 传输的数据与从 Web 服务传输到客户端的数据大小大致相同或更小，这可以解决1% 或更少的 CPU 被 IPC 开销烧毁。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T08:09:29.130

按照你自己的推理，用更高级的语言来实现守护进程不是更好吗？这让我们回到了第 1 步：如何提供从高级语言访问 C 代码的权限。

如果您决定直接在 C 中编写守护程序，那么最大的缺点是您必须维护所有与您提供的核心功能实际上无关的服务器代码。这是要调试的另一件事。由于它是一项服务，因此它还需要保持安全并且没有安全漏洞。

但是正如您所提到的，用 C 为特定语言编写扩展意味着您基本上被该语言所困。正确的？

不必要。让我向您介绍 SWIG：[http ://www.swig.org/](http://www.swig.org/)

使用 SWIG，编写 C 代码和目标语言之间的接口桥的工作大大简化。事实上，在我工作的地方，我们甚至使用它来单独与 Java 交互，并且永远不会使用它的多语言支持。它是一个根据您提供的接口文件为您自动生成样板代码的工具。

是的，接口文件是另一种需要学习的语法。是的，它确实有其局限性。但它的效果非常好。

使用 SWIG 的一大优势是您的库只是一个常规的 C/C++ 库。这倾向于简化和澄清代码。这也意味着如果需要，您还可以直接在 C/C++ 项目中使用该库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T08:13:33.227

看看[Mongrel](http://mongrel2.org/)，只需用 C++ 编写 Web 服务和高性能代码。

# asp.net - 如何从我的数据库中获取类型

> ID：15609921
> 
> 赞同：0
> 
> 时间：2013-03-25T07:44:01.517
> 
> 标签：asp.net, sql, vb.net

我正在使用 asp.net、vb.net 和 sql-server。

我有一个名为“登录”的表，其中包含用户名、密码和类型。根据类型，将发生页面重定向。

我的系统有管理员、学生和讲师。每个人都有自己的页面和控件。

如何根据用户名从表中获取类型（当用户键入并单击登录时，我将从文本框中获取类型）？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T08:34:30.240

使用 SQL 查询验证密码并从数据库中获取类型。就像是

```
select username,user_type from myTable where username='john' AND password='abc'; 
```

现在在您的登录页面上，您可以通过数据层获取类型值并根据用户的角色将用户重定向到页面。这很粗糙，但你明白了

```
string user_type, string userName;
//Execute data reader
if(myReader.Read())
{
    userName= myReader[0].ToString(); // you can also make a class
    userType=myReader[1].ToString();  // you can also store these values in Session
}
// Close connection etc.

switch (userType)
{
   case "admin":
                 Response.Redirect("~/admin/Default.aspx"); break;

   case "user":
                 Response.Redirect("~/public/Default.aspx"); break; 

   case default:
                // Redirect to your default page for default user
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T07:52:02.207

查询可能如下所示：

```
 SELECT
        UserType
    FROM 
        Login
    WHERE
        username = @your_username 
```

您可以将其放在函数或存储过程中，并从应用程序调用它，同时提供参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T07:52:05.067

您需要`RecordSet`在页面中创建一个对象`ASP.NET`。使用查询打开此记录集：

```
SELECT username, 
       password, 
       type 
  FROM login 
 WHERE userid = @yourUserID
   AND password = @yourUserPassword 
```

然后使用列上的构造签入您的`ASP.NET`页面。`SWITCH CASE``TYPE`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T07:46:30.107

您可以在存储用户详细信息的表中有一个名为*UserType*的字段。 因此，当有人从您的登录页面登录时，您也只需获取此值。然后您可以使用 switch case 重定向到不同的页面。

# html - 如何计算图形大小

> ID：15609925
> 
> 赞同：0
> 
> 时间：2013-03-25T07:44:16.150
> 
> 标签：html, math

在 html 中我有两个图形，内部用 css-transform/matrix 进行转换，但它的尺寸保持不变我需要用虚线计算图形的尺寸

![图片](../Images/3c535954e713a8571ae6b8e76f7eb4e6.png)

原图为 300px 宽和 150px 高，变换矩阵为 (0.8, -0.6, 0.6, 0.8, 0, 0) 或角度 ~ -37°

带虚线的图形尺寸为 336 x 304

[html](http://jsfiddle.net/nu3m8/)如何使外部图形正确包装转换后的内部图形？应该和图片上的一样。

## HTML

```
<div style="
    position: absolute;
    top: 130px;
    left: 130px;
    border: 1px dotted #000;
">
    <div style="
    -webkit-transform: matrix(0.8, -0.6, 0.6, 0.8, 0, 0);
    border: 1px solid #000;
    width: 300px;
    height: 150px;
"></div>
</div> 
```

如果它可以包装，我可以简单地计算它的尺寸。

或者

[数学] 如何用虚线计算图形的正确尺寸？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T08:03:27.583

尝试这个：

```
<div style="
    position: absolute;
    width:334px;height:302px;
    border: 1px dotted #000;
">
    <div style="
        transform:rotate(-37deg);
        top:75px;left:16px;position:relative;
        border: 1px solid #000;
        width: 300px;
        height: 150px;
    ">
    </div>
</div> 
```

**小提琴：http:** [//jsfiddle.net/nu3m8/2/](http://jsfiddle.net/nu3m8/2/)

阅读`transform:rotate` [http://www.css3files.com/transform/](http://www.css3files.com/transform/)和 [https://developer.mozilla.org/en-US/docs/CSS/transform](https://developer.mozilla.org/en-US/docs/CSS/transform)

# iphone - iPhone 应用程序中显示 Spotify 错误消息

> ID：15609936
> 
> 赞同：-2
> 
> 时间：2013-03-25T07:44:42.407
> 
> 标签：iphone, spotify, error-code, cocoalibspotify-2.0

我正在使用 CocoaLibSpotify 库在我的 iPhone 应用程序中实现 spotify。
我需要显示指南[https://developer.spotify.com/technologies/libspotify/guidelines-ios/](https://developer.spotify.com/technologies/libspotify/guidelines-ios/)中指定的错误消息。
我是否需要检查每个有 spotify 库调用的地方的错误代码，或者是否有任何委托函数调用了 spotify 错误。
请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T10:55:01.403

许多操作将`NSError`在其回调中返回一个。调用这些方法时，您必须检查错误并做出适当的响应。

# migration - 'System.Workflow.* 类型已弃用。相反，请使用 System.Activites.* 中的新类型

> ID：15609940
> 
> 赞同：3
> 
> 时间：2013-03-25T07:44:53.037
> 
> 标签：migration, workflow-foundation, .net-4.5, rule-engine, type-providers

我们目前正在将我们的解决方案从 .net 3.5 升级到 .net 4.5。在此期间我们面临以下错误

> 'System.Workflow.ComponentModel.Compiler.TypeProvider' 已过时：'System.Workflow.* 类型已弃用。相反，请使用 System.Activites.* 中的新类型

下面的代码创建一个 TypeProvider 以允许在我们拥有的 WF 规则引擎中使用其他类型。这在 RulesValidaton 构造函数中使用，如下面的代码所示

```
TypeProvider typeProvider = new TypeProvider(null);
typeProvider.AddAssemblyReference(typeof(T).Assembly.Location);
typeProvider.AddAssemblyReference(typeof(ValidationClass<T>).Assembly.Location);

RuleValidation ruleValidation = new RuleValidation(typeof(ValidationClass<T>), typeProvider); 
```

我用谷歌搜索了如何使用 System.Activities.* 命名空间来实现相同的目标，但找不到任何东西。请指导我找到 .net 4.5 中 TypeProvider 类的适当替代品。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T21:15:34.583

This functionality has been completely redone in .NET 4.5\. Now you are able to run multiple instances, and Micorosft has done a great job (believe it or not) in their .NET 4.5 Examples to show how this can be done.

[http://msdn.microsoft.com/en-us/library/jj205427.aspx](http://msdn.microsoft.com/en-us/library/jj205427.aspx)

Here is some of the key code, and obviously would be different for the different types of workflows, to do something to a particular "instance" of the workflow.

ActivityBuilder wf = StartUpdate("StateMachineNumberGuessWorkflow.xaml");

StateMachine sm = wf.Implementation as StateMachine;

# c# - 对象引用未设置为访问 DataGridView 的对象的实例

> ID：15609942
> 
> 赞同：0
> 
> 时间：2013-03-25T07:44:59.250
> 
> 标签：c#, exception-handling, datagridview, ado.net, nullreferenceexception

我想将数据从 DataGridView 传输到另一个，这是我的代码示例：

```
private void btnShow(object sender, EventArgs e)
{
    DataTable dtr = new DataTable();
    dtr.Columns.Add(new DataColumn("Name", typeof(string)));
    dtr.Columns.Add(new DataColumn("Label", typeof(string)));
    dtr.Columns.Add(new DataColumn("Domain", typeof(string)));

    for (int i = 0; i < dataGridView1.Rows.Count; i++)
    {
        DataRow erow = dtr.NewRow();
        erow[0] = dataGridView1.Rows[i].Cells[0].Value.ToString();
        erow[1] = dataGridView1.Rows[i].Cells[1].Value.ToString();
        erow[2] = dataGridView1.Rows[i].Cells[2].Value.ToString();
        dtr.Rows.Add(erow);
    }

    dataGridView2.DataSource = dtr;
 } 
```

我仍然`NullReferenceException`在 11 号线接收。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T07:55:10.260

您的一个或多个单元格包含 NULL 值。
您读取该 NULL 值，然后尝试在 NULL 引用上调用方法 ToString()。
当然，这将失败，上述异常

所以，如果你想在 null 的情况下存储一个空字符串

```
erow[0] = dataGridView1.Rows[i].Cells[0].Value == null ? 
          string.Empty : dataGridView1.Rows[i].Cells[0].Value.ToString();
erow[1] = dataGridView1.Rows[i].Cells[1].Value == null ? 
          string.Empty : dataGridView1.Rows[i].Cells[1].Value.ToString();
erow[2] = dataGridView1.Rows[i].Cells[2].Value == null ? 
          string.Empty : dataGridView1.Rows[i].Cells[2].Value.ToString();; 
```

# android - 在滑动菜单中切换片段

> ID：15609946
> 
> 赞同：2
> 
> 时间：2013-03-25T07:45:22.317
> 
> 标签：android, menu, slider, fragment

我在他的 youtube 频道中使用了来自 andrew ruffolo 的 dual panes2 源代码。我在其中添加了 jfeinstein 幻灯片菜单。我将主菜单更改为 hello world 并在其中添加了幻灯片菜单。但是当我单击列表片段中的项目时。它只切换到幻灯片。不在主要活动中。如何将其切换为主要活动。这是屏幕截图。

[幻灯片菜单](https://www.dropbox.com/s/ngy5vrcqx7w724y/slide.jpg)

[这里的问题](https://www.dropbox.com/s/bgvjt00tn0rpc36/blue.jpg)

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T04:14:25.800

在将其添加到活动中之前，您必须先阅读一些片段生命周期。然后尝试阅读一些片段切换。这是一个很好的阅读[http://www.vogella.com/articles/AndroidFragments/article.html](http://www.vogella.com/articles/AndroidFragments/article.html)

# oracle10g - 返回特定类型列的 Oracle 查询

> ID：15609951
> 
> 赞同：0
> 
> 时间：2013-03-25T07:45:58.493
> 
> 标签：oracle10g

是否可以编写一个返回所有“时间戳”类型的列的 oracle 查询？

像这样的东西-

```
Select table_name, column_name
FROM dba_tab_columns
WHERE table_name like 'EST_%' 
AND column_type = 'timestamp'; //Here select columns only of type 'timestamp' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T08:05:13.313

我正在查看错误的表格 -`dba_ind_columns`而不是`dba_tab_columns`.

查询非常简单 -

```
Select table_name, column_name
FROM dba_tab_columns
WHERE table_name like 'EST\_%' ESCAPE '\' AND DATA_TYPE = 'TIMESTAMP(6)'; 
```

# objective-c - NSStatusItem 突出显示时绘制动画

> ID：15609955
> 
> 赞同：2
> 
> 时间：2013-03-25T07:46:09.307
> 
> 标签：objective-c, macos, core-animation, nsview, nsstatusitem

我在我的项目中使用 NSStatusItem 并且我希望它在我的程序运行时进行动画处理。未选择项目时它工作正常。但是当我点击它时，图像冻结了。我试图通过计时器设置替代图像但没有结果。最新的想法是在我的 NSStatusItem 上绘制 NSView 但也没有结果。

```
- (void)startAnimating
{
    currentFrame = 1;
    animTimer = [NSTimer scheduledTimerWithTimeInterval:1.0/15.0 target:self selector:@selector(updateImage:) userInfo:nil repeats:YES];
}

- (void)stopAnimating
{
    [animTimer invalidate];
}

- (void)updateImage:(NSTimer*)timer
{
    if (currentFrame == 13)
    {
        currentFrame = 1;
    }
    NSImage* image;
    if ([window backingScaleFactor] == 1.0)
    {
        image = [NSImage imageNamed:[NSString stringWithFormat:@"App_18_gr_%d",currentFrame]];
        NSRect rect = [[StatusItem view] frame];
        [image drawInRect:[[StatusItem view] frame] fromRect:NSZeroRect operation:NSCompositeSourceOver fraction:1.0];
        [image setTemplate:YES];
    }
    else
    {
        image = [NSImage imageNamed:[NSString stringWithFormat:@"App_36_gr_%d",currentFrame]];
        [image drawInRect:[[StatusItem view] frame] fromRect:NSZeroRect operation:NSCompositeSourceOver fraction:1.0];
        [image setTemplate:YES];
    }
    [StatusItem setImage:image];
    currentFrame++;
} 
```

# r - 使用 R 代码重新启动 rsession

> ID：15609962
> 
> 赞同：2
> 
> 时间：2013-03-25T07:46:31.567
> 
> 标签：r, rstudio

是否有任何 R 代码可以重新启动 rsession？我通常通过按来执行此操作`cntrl+shift+0`。但现在想在我的代码中做到这一点。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T08:16:48.247

根据您实际尝试完成的任务，您可能只是想要类似的东西

```
 rm(list=ls()) 
```

注意：请注意此代码实际上会删除您的整个工作/变量/数据

# php - 从 Laravel 4 上的表单上传文件

> ID：15609969
> 
> 赞同：1
> 
> 时间：2013-03-25T07:47:31.383
> 
> 标签：php, file-upload, laravel, laravel-4

我尝试使用`Input::upload()`L3 可用的方法，但我收到一条错误消息`Call to undefined method Illuminate\Http\Request::upload()`

有替代品吗？如何使用 L4 处理从表单上传的文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T10:15:06.327

现在应该是`Input::file()`

如文档中所述：http: [//laravel.com/docs/requests#files](http://laravel.com/docs/requests#files)

# actionscript-3 - ActionScript 3，为适当的场景创建库的影片剪辑实例

> ID：15609976
> 
> 赞同：1
> 
> 时间：2013-03-25T07:47:57.853
> 
> 标签：actionscript-3, class, instance, public

你好 stackoverflow 大师。
我是 AS3 的新手，如果我的问题有点幼稚，我很抱歉，但是......

我的资料库中有影片剪辑 progress_mc。
我也有 3 个场景，带有 50 帧补间动画。
以及一些控制按钮来播放相应的场景。

**问题 1**。如何使用 DocumentClass 创建 progress_mc 实例？
我已经在那堂课中尝试过这样的尝试：

```
public class ProgressMc extends MovieClip  
{  
  public function addInstance():void  
{    
  var progress_mc:MovieClip = new MovieClip();  
  this.addChild(progress_mc);  
}  
} 
```

然后我只是把

```
添加实例（）；
```

对于 Scene1 的 1 帧。
但它不起作用。没有实例出现。

也许这种方法是错误的......请给我一些正确的。

**问题 2.**如何为合适的场景创建实例？
我应该在每个场景的每一帧都调用公共函数吗？
还是有一些正确的决定？

**EDIT-1：**
好的，我找到了答案。
步骤1。正如mitim所描述的。
第2步。在时间轴上使用此代码：

```
var p1:progress_mc = new progress_mc();

p1.name = "p1";
p1.x = 50;
p1.y = 50;

addChild(p1); 
```

但是，目前还不清楚

```
。场景
```

可能性。但是将所有场景包装在一个影片剪辑中是一种变体。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T08:02:54.003

（我假设您使用的是 Flash IDE）

对于问题1，您需要在您的库中设置“progress_mc”movieclip 的类链接名称。转到它在库中的属性并检查“export for actionscript”并设置它的类名。然后而不是去：

```
new MovieClip() 
```

这确实会创建一个新的空 Movieclip 对象，你会去

```
new MyClassName() 
```

创建该库剪辑的新实例。然后你可以像现在这样将它添加到舞台上。

对于问题 2，我不确定您的场景中有什么……但如果它只是帧动画，则可以将场景包裹在影片剪辑中并进行相同的处理。

# javascript - KendoUI 自定义命令弹出窗口：ReferenceError：wnd 未定义

> ID：15609977
> 
> 赞同：0
> 
> 时间：2013-03-25T07:48:02.010
> 
> 标签：javascript, kendo-ui, kendo-grid

我正在尝试使用自定义命令弹出窗口；

```
 $(document).ready(function(){
        var wnd, detailsTemplate;
        $("#grid").kendoGrid({
            dataSource:{
                serverPaging: true,
                transport: {
                    read: "<?php echo base_url() ?>index.php/user_management/manage_users/list_view/"
                },
                schema:{
                    data: "data",
                    total: "total"
                },
                pageSize:5
            },
            scrollable: true,
            selectable: true,
            sortable: true,
            filterable: true,
            pageable: {
                input: true,
                numeric: false
            },

            columns: [
                {
                    field: "UserID",
                    hidden:true
                },
                {
                    field: "Username",
                    title:"Username"
                },
                { field: "FirstName",
                    title:"First Name"
                },
                {field:"MiddleNames"},
                {field:"LastName"},
                {field:"City"},
                {field:"Email"},
                //{field:"Actions"},
                {command: { text: "Details", click: showDetailsPopup }, title: " ", width: "140px" }
            ]

        });
        wnd = $("#details")
                .kendoWindow({
                    title: "Customer Details",
                    modal: true,
                    visible: false,
                    resizable: false,
                    width: 300
                }).data("data");
        detailsTemplate = kendo.template($("#template").html());

    });

    function showDetailsPopup(e) {
        e.preventDefault();
        var dataItem = this.dataItem($(e.currentTarget).closest("tr"));
        wnd.content(detailsTemplate(dataItem));
        wnd.center().open();
    } 
```

但是当我点击网格中的“详细信息”按钮时，我在萤火虫中看到了这个错误；

```
ReferenceError: wnd is not defined
[Break On This Error]   

wnd.center().open(); 
```

更新：这是我的模板

```
<script type="text/x-kendo-template" id="template">
        <div id="details-container">
            <h2>#= FirstName #</h2>
        </div>
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T08:06:56.320

请对 .data("data") 进行更正：

```
wnd = $("#details")
            .kendoWindow({
                title: "Customer Details",
                modal: true,
                visible: false,
                resizable: false,
                width: 300
           ** }).data("data");**
    detailsTemplate = kendo.template($("#template").html());

}); 
```

它应该是 .data("kendoWindow") ，如下所示；

```
wnd = $("#details")
            .kendoWindow({
                title: "Customer Details",
                modal: true,
                visible: false,
                resizable: false,
                width: 300
           }).data("kendoWindow");
    detailsTemplate = kendo.template($("#template").html());
}); 
```

# ruby - DRb 可以处理的最高（近似）请求率是多少？

> ID：15609978
> 
> 赞同：0
> 
> 时间：2013-03-25T07:48:04.940
> 
> 标签：ruby, drb

我现在使用 DRb 进行相对不频繁的进程间通信，但我担心如果我的服务增长，它可能无法处理负载，特别是考虑到像产生一个新线程来处理每个请求这样的事情。任何人都有处理 DRb 上限的经验，并且可以告诉我它大约在什么负载开始导致问题？有什么更好的方法来处理这个问题，也许是一个运行 sinatra 的线程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-20T13:45:34.433

对其进行性能测试，然后自己进行测试。

```
require 'benchmark'
Benchmark.bm do |x|    
    x.report {100000.times {"Do DRb request here"}}
end 
```

# php - 插入数据库时 的文本区域间距

> ID：15609979
> 
> 赞同：0
> 
> 时间：2013-03-25T07:48:07.843
> 
> 标签：php, mysql

所以我有这个文本区域，其中数据将被发布到数据库中。

![在此处输入图像描述](../Images/dae26fcc1261acb46d7066141c173a30.png)

所以这是我的示例输入可能看起来的图像。它通过输入键有间距，但是当它发送到数据库时，间距将不存在并且输入的显示将是

![在此处输入图像描述](../Images/83bab2a8b50843f875f6b085c772467c.png)

```
<?php
    require("common.php");
    if(empty($_SESSION['user']))
    {
        header("Location: login.php");
        die("Redirecting to login.php");
    }
?>
<?php

$host="localhost";
$username="root";
$password=""; 
$db_name="phplogin"; 
$tbl_name="tasks"; 

mysql_connect("$host", "$username", "$password")or die("cannot connect");
mysql_select_db("$db_name")or die("cannot select DB");

$Ttoday=$_POST['comment1'];
$task_issues=$_POST['comment2'];
$Ttom=$_POST['comment3'];
$id=$_POST['comment'];

$sql="INSERT INTO $tbl_name(task_today, issues, task_tom, U_ID)VALUES('$Ttoday', '$task_issues', '$Ttom', '$id')";
$result=mysql_query($sql);

if($result){
header("Location: private.php");
exit;
}

else {
echo "ERROR";
}
?>

<?php
// close connection
mysql_close();
?> 
```

这是我的插入代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T07:50:22.117

使用`nl2br()`. 尝试这个，

`$Ttoday= nl2br($_POST['comment1'])`;

# python - Django 上下文处理器有问题

> ID：15609982
> 
> 赞同：2
> 
> 时间：2013-03-25T07:48:10.637
> 
> 标签：python, django, django-models

我是 Django 上下文处理器的新手。我想创建一些可以在我的博客应用程序的每个页面中为我提供名言的东西。当我将它部署到 Heroku 时，它在启动后几分钟就开始出现错误。这些错误是：

```
could not fork new process for connection: Cannot allocate memory
SSL SYSCALL error: EOF detected
FATAL:  out of memory
DETAIL:  Failed on request of size 112. 
```

然后应用程序重新启动 - 恢复正常。我可以用 javascript 生成相同的东西，但我仍然想用上下文处理器来做。

是否建议创建一个如下所示的上下文处理器？

```
from blog.models import Post

from random import randrange

def recent_posts(request):
    u = Post.objects.all()[:5]

    return {
        'recent_posts': u
    }

def quotes(request):
    var = randrange(3)
    quotes = {
        '0' : "Quote 1",
        '1' : "Quote 2",
        '2' : "Quote 3",
    }

    quoted_by = {
        '0' : "Person 1",
        '1' : "Person 2",
        '2' : "Person 3",   
    }

    return {
        'quotes': quotes[str(var)],
        'quoted_by': quoted_by[str(var)]
    } 
```

# java - 通过 Java 反射的构造函数参数

> ID：15609984
> 
> 赞同：3
> 
> 时间：2013-03-25T07:48:24.800
> 
> 标签：java, reflection, types, parameters, constructor

我在 Java 中使用反射。我可以帮助获取构造函数参数名称和值吗？

这是我的代码：

```
 public String getConstructors(Class aClass)
  {
  StringBuilder ClassConstructors = new StringBuilder();
  Constructor[] Constructors = aClass.getConstructors();
  String separator = System.getProperty( "line.separator" );
  for (Constructor c: Constructors)
  {
      boolean isPublic = Modifier.isPublic(c.getModifiers());
      Class[] parameterTypes = c.getParameterTypes();
      for (Class pt : parameterTypes)
      {
          System.out.println(pt.getName());
          //Field[] Fields = pt.getDeclaredFields();
          //for (Field f : Fields) 
          //{
              //System.out.println(f.getType());
          //}
      }
  }
  return ClassConstructors.toString(); 
```

}

我正在测试的构造函数具有以下参数：

```
String Name, int Diameter 
```

该`System.out.println(pt.getName());`代码行当前正在打印以下内容：

```
java.lang.String
int 
```

是否可以获得每个参数的类型和名称？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T07:51:18.497

您已经有了类型，并且无法获取名称（因为它们没有作为字节码的一部分保留）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T07:50:50.570

名称不能通过 JAVA 中的反射获得。

# php - PHP 消息：打开流失败：HTTP 请求失败

> ID：15609988
> 
> 赞同：0
> 
> 时间：2013-03-25T07:48:37.343
> 
> 标签：php, apache

我使用这个 PHP 脚本作为代理。Serer A 上的相同脚本没有问题，在服务器 B 上它不起作用，我收到以下错误：

```
failed to open stream: HTTP request failed! HTTP/1.1 401 Unauthorized 
```

和

```
 Cannot modify header information - headers already sent by 
```

在服务器 B 上 allow_url_fopen = On

是设置

知道有什么问题吗？

## 谢谢

```
<?php
/*
 * in JavaScript call with `encodeURIComponent`
 * $.get('proxy.php?proxy_url='+encodeURIComponent('http://google.com?param=1&param2=2'))
 */
$url = rawurldecode($_GET['proxy_url']);
$cb = ! empty($_GET['callback']) ? $_GET['callback'] : null;

if(preg_match('#ccc\.aaa\.com/bbb/#', $url)){
    $url = preg_replace('#http\://xxx\.xxx\.com/xxx/#', '', $url);
}

if(! preg_match('#^https?:#', $url)){
    $url = preg_replace('#^[\.\/]+#', '', $url);

    if(!file_exists($url)){
        echo 'File not found';
        die(0);
    }
}

if(preg_match('#\.xml$#', $url)){
    header('Content-type: text/xml');
}

$file = file_get_contents($url);

if($cb){
    header('Content-type: application/javascript');
    echo $cb.'('.$file.');';

}else{
    echo $file;
} 
```

# javascript - 喜欢按钮在 Chrome 扩展程序中不起作用

> ID：15609996
> 
> 赞同：9
> 
> 时间：2013-03-25T07:49:32.287
> 
> 标签：javascript, facebook, google-chrome-extension

我在我的扩展程序中实现了一个简单的 Facebook“赞”按钮。但是，它似乎不起作用。

我使用[`iframe`“Like”按钮的版本](https://developers.facebook.com/docs/reference/plugins/like/)只是因为我不需要任何额外的脚本。

```
<iframe src="//www.facebook.com/plugins/like.php?href=[dummy_text]&amp;send=false&amp;layout=button_count&amp;width=100&amp;show_faces=false&amp;font&amp;blah..." scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:100px; height:21px;" allowTransparency="true"></iframe> 
```

起初，该按钮确实显示得很好且正确：

![在此处输入图像描述](../Images/025153177f4186930afdb5b063967cb9.png)

但是，单击它后，它会以红色显示“错误”：

![在此处输入图像描述](../Images/704e03cd445ade3822378da4fbec6cb4.png)

所以我想也许是因为[清单版本 2 中添加了](http://developer.chrome.com/extensions/manifestVersion.html#manifest-v1-changes)[^([*（有点愚蠢和）*])](http://developer.chrome.com/extensions/manifestVersion.html#manifest-v1-changes)限制政策？因为如果我把它放在一个普通的网页上它就可以工作。（单击“赞”按钮后，它会显示“确认”。）

![在此处输入图像描述](../Images/aa29dde1703e4d0dbca56daef4089505.png)

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-03-02T20:51:18.410

`//www.facebook.com/...`是一个相对于协议的 URL。当您在普通 http(s) 站点上嵌入此类 URL 时，该 URL 将解析为`http(s)://www.facebook.com/...`. 但是，在 Chrome 扩展程序中，它解析为`chrome-extension://www.facebook.com/...`...

要解决此问题，请在 URL 前加上`https:`，即使用`https://www.facebook.com/...`.

[之后，由于Content Security Policy](https://developer.chrome.com/extensions/contentSecurityPolicy)，该按钮仍不会显示。[要获得所需的结果，您必须通过清单](https://developer.chrome.com/extensions/manifest)文件放宽 CSP 来允许嵌入 Facebook ：

```
"content_security_policy": "script-src 'self'; object-src 'self'; frame-src https://www.facebook.com", 
```

（您也可以将 http 站点列入白名单，例如使用
`"script-src 'self'; object-src 'self'; frame-src http://www.facebook.com"`or
`"script-src 'self'; object-src 'self'; frame-src http://www.facebook.com https://www.facebook.com"`）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-07T04:01:26.700

除了 Rob W 的建议之外 - 还有几点可以涵盖可能面临相同错误**但**使用[facebook 应用程序的其他人](https://stackoverflow.com/questions/13635196/do-facebook-like-buttons-require-an-app-id) *（即您已登录 fb 并在生成 iframe 代码期间，您会看到“此脚本使用应用程序 ID”您的应用程序：' 上面有一个下拉菜单以选择 fb 应用程序）*：

## html中的头部

```
<head>
    <!-- for Facebook --> 
    <meta property='og:image' content="http://example.com/logo.jpg"/>
    <meta property='og:url' content="http://example.com"/>
    <meta property="og:title" content="Example"/>
    <meta property="og:description" content="Description"/>
    <meta property="fb:admins" content="<admin name>" />
    <meta property="fb:app_id" content="<app id>" /> 
    <meta property="og:type" content="article" /> 
</head> 
```

*   请确保上述 og:url 中的url与您的 facebook 应用程序中的**完全相同的 url 绑定。**
*   `app id`必须与您的 Facebook 应用程序 ID 匹配以进行跟踪（如果上述参数相同，您甚至可以将喜欢“转移”到具有不同域的另一个页面）

FB 应用程序中设置的 url 是否必须与您的 html 中的 url 匹配，以及您用于访问页面的 url。

## 调试

如果这不起作用，我会使用 facebook 'debugger' -

```
https://developers.facebook.com/tools/debug 
```

只需输入您的网址，让 facebook 提供建议：)

# jquery - Jquery Mobile 1.3 和输入大小问题？

> ID：15609998
> 
> 赞同：1
> 
> 时间：2013-03-25T07:49:43.813
> 
> 标签：jquery, css, jquery-mobile

我正在使用 Jquery 移动版 1.3。我有一个输入，

```
 <input style="width: 75px" type="text"  /> 
```

问题是它的大小总是很大。怎么变小，

[http://jsfiddle.net/2bWfL/163/](http://jsfiddle.net/2bWfL/163/)

```
<head> 
    <title>My Page</title> 
    <meta name="viewport" content="width=device-width, initial-scale=1"> 
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.css" />
    <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js"></script>
</head> 
<body> 

<div data-role="page">

    <div data-role="header">
        <h1>My Title</h1>
    </div><!-- /header -->

    <div data-role="content">    

        <input type="text" style="width:75px"/>
    </div><!-- /content -->

</div><!-- /page -->

</body> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T08:47:35.877

JQuery Mobile 的所有控件都有默认大小（以百分比表示），并且 JQM 也将我们编写的 html 标签替换为它自己生成的标签（通常是 spans），所以为了改变文本框的宽度，添加以下代码您页面的头部。

```
<style type="text/css">
.ui-input-text
{
width: 75px !important;
}
</style> 
```

由于 JQM 控件会根据屏幕大小自行调整，因此建议使用百分比而不是 'px' 值或 'em'。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-03T11:26:32.950

如果您想在同一页面上输入不同大小的文本，请从 CSS 中删除 width 属性，如下所示

```
div .ui-input-text {  padding: 0 .4em; } 
```

然后在您定义输入文本的 html 页面上，将其定义如下

```
<div style="width:30px"><input type="text" placeholder="01"> 
```

所以在你的 div 标签中定义你想要的宽度，你就可以为不同的文本输入提供不同的宽度。希望这个答案对像我这样的非设计师有帮助

谢谢

# javascript - Chrome 扩展：获取 URL 域名

> ID：15609999
> 
> 赞同：0
> 
> 时间：2013-03-25T07:49:46.440
> 
> 标签：javascript, google-chrome-extension

我是 chrome 扩展开发的新手，只是阅读了一个示例“hello world”示例。推进，我想创建一个 chrome 扩展，它在弹出窗口上获取并弹出要访问的 URL 名称。我将如何做到这一点？我认为这与 javascript 编码更相关，但是，我将如何做到这一点？

提前致谢！