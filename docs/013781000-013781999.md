# StackOverflow 问答 13781000-13781999

# javascript - 使用 require.js 进行跨域定义

> ID：13781002
> 
> 赞同：0
> 
> 时间：2012-12-08T19:21:55.597
> 
> 标签：javascript, jquery, requirejs

我正在学习如何使用[require.js](http://requirejs.org/)。我正在尝试定义这样的模块：

```
define('presenter', ['jquery']....... 
```

问题是我的主机页面位于“http://localhost:62607/”的不同域中，因此在此处寻找演示者时出现 404 错误。

Presenter 实际上位于此处：'http://localhost:62588/scripts/app/presenter'。

因此，如果我将演示者定义为：

```
define('http://localhost:62588/scripts/app/presenter', ['jquery'], 
```

一切正常，但我更喜欢更具可读性的第一个版本。

有什么可以做到的吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T19:29:42.483

您可以使用 requireJS 配置中的`baseUrl`和`path`属性来实现这一点。

从 requireJS 文档中：

```
requirejs.config({
  //By default load any module IDs from js/lib
  baseUrl: 'js/lib',
  //except, if the module ID starts with "app",
  //load it from the js/app directory. paths
  //config is relative to the baseUrl, and
  //never includes a ".js" extension since
  //the paths config could be for a directory.
  paths: {
    app: '../app'
  }
}); 
```

如果你定义了一个名为 的模块`app`，requireJS 会在`../app`

# google-maps-api-3 - Google Maps v3 自动完成搜索仅适用于 IE

> ID：13781005
> 
> 赞同：2
> 
> 时间：2012-12-08T19:22:19.323
> 
> 标签：google-maps-api-3, autocomplete

我在使用自动完成搜索框时遇到了一个小问题。我的应用程序似乎在 IE 中运行良好，但是当我在 Firefox 或 Chrome 中尝试时，搜索框不起作用。

不幸的是，我在 mashup 和 javascript 方面几乎是新手，但我已经设法根据来自各种来源的其他示例拼凑出一些东西。如果这不是世界上最优雅的东西，请原谅我！;) 这有点像我分阶段构建的大杂烩。我对试图简化它感到很紧张，因为我有时间限制，因为它是一个课堂项目，不想搞砸已经工作的东西。毫无疑问，我还有很多东西要学，我欢迎提出建议。在我必须提交之前，我可能无法应用它们。

任何想法我在自动完成方面做错了什么？另外，我注意到地图/卫星视图按钮在我内置搜索功能后不再起作用。我的解决方案是禁用/隐藏按钮！如果有人对此也有任何提示，请告诉我。

这是应用程序所在的位置：[http ://webpages.charter.net/nymbli/displays.htm](http://webpages.charter.net/nymbli/displays.htm)

由于某种原因，我无法在此处发布我的代码，但请随时查看该页面的源代码。

提前致谢，

安妮

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T16:18:37.247

你有一个额外的`<script type="text/javascript">`标签。删除它并查看 Firefox 中的源代码。HTML 错误突出显示。一般来说，**永远不要使用 IE 进行开发**。请改用真正的浏览器。;-)

# c# - 在修改 app.xaml 之前无法找到“app.xaml”，IOException

> ID：13781006
> 
> 赞同：5
> 
> 时间：2012-12-08T19:22:21.997
> 
> 标签：c#, wpf, visual-studio-2010

基本上我遇到了与这个（未回答的）问题相同的问题：[IOException was unhandled - Cannot locate resource app.xaml](https://stackoverflow.com/questions/7126147/ioexception-was-unhandled-cannot-locate-resource-app-xaml)

当我在 Visual Studio 2010 中打开我的项目并开始调试时，我得到“IOException was unhandled: Cannot locate resource app.xaml”。重建解决方案不起作用，我必须以某种方式修改我的 app.xaml 文件（例如添加一个空行）才能成功运行我的项目。

额外细节：

*   我的解决方案包含两个项目：我的主 (WPF) 应用程序和一个测试项目。
*   如果解决方案是从 Visual Studio 2005 转换的，我已经阅读了有关问题的信息。这 **不是**我的情况。我的项目最初是使用 Visual Studio 2010 创建的。也许（我没有确切提醒）它有时针对 .Net Framework 3.5 或 .Net Framework 4.0 客户端配置文件，但它目前配置为与 .Net Framework 4.0 一起使用
*   如果重要的话，两个项目都有不同的名称。第一个称为 MyApplicationName（程序集名称和默认命名空间），第二个称为 MyApplicationName.Test（程序集名称和默认命名空间）
*   我的主项目中的大多数类都是内部的（包括 View 类），但我的 App 类是公共的
*   主项目将其内部组件暴露给测试项目（使用`[assembly: InternalsVisibleTo("MyOtherProject")]`）
*   我正在使用 MVVM（带有 MVVM Light），但我没有使用 ViewModel 'resolver'/container/bootstrapper/MEF 或相关的东西。我只是使用 DataTemplates 将我的 ViewModels 映射到它们各自的视图并手动创建我的 ViewModels（如果这很重要）。
*   我的 App.xaml 包括其他三个 xaml 资源文件。我在这里包括我的 App.xaml：

    ```
    <Application.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="Resources/StyleDictionary.xaml" />
                <ResourceDictionary Source="Resources/CommonResources.xaml" />
                <ResourceDictionary Source="Resources/ViewModelMappings.xaml" />
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </Application.Resources> 
    ```

*   如果这很重要，我会从我的 App 类中重写 OnStartup 方法来手动处理启动逻辑。我还在那里编写了一个静态构造函数来从 MVVM Light 初始化 DispatcherHelper：

    ```
     public partial class App : Application
        {
            static App()
            {
               GalaSoft.MvvmLight.Threading.DispatcherHelper.Initialize();
            }
            ...
        } 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T09:13:05.230

当您更改项目的目标框架时，可能会发生这样的事情。您可以将项目重新创建为从一开始就以 .Net 4 为目标的新应用程序，并将所有代码文件添加为现有项目。

想到的另一件事是 app.xaml 文件名的大小写。它在某些情况下可能区分大小写，而在其他情况下不区分大小写，那么您是否尝试过更改它？在我的系统上，默认情况下它是 App.xaml。由于在错误消息中它是 app.xaml，因此可能值得使用文本编辑器对项目文件进行区分大小写的搜索，并将所有出现的名称更改为 App.xaml。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-11T16:19:02.277

我不知道这是否是一个明确的解决方案，但它似乎到目前为止工作：

1.  用记事本打开你的 csproj 文件
2.  搜索 App.xaml 和 App.xaml.cs。确保对该文件的每个引用都具有相同的大小写。这些文件被称为 App.xaml 和 App.xaml.cs，所以我留下了这样的引用。

以前我有这样的事情：

```
<Compile Include="app.xaml.cs">
  <DependentUpon>App.xaml</DependentUpon>
  <SubType>Code</SubType>
</Compile> 
```

所以我修改了它，现在它是：

```
<Compile Include="App.xaml.cs">
  <DependentUpon>App.xaml</DependentUpon>
  <SubType>Code</SubType>
</Compile> 
```

我做的另一件事是查找 BootstrapperPackage 并从那里删除旧版本的 .Net Framework，但如果您的项目使用依赖于旧版本 .Net 的库，我认为这不是一个好主意。我不确定这也是导致问题的原因。

# c# - 从数据访问层拉出业务逻辑

> ID：13781009
> 
> 赞同：4
> 
> 时间：2012-12-08T19:22:42.120
> 
> 标签：c#, .net, data-access-layer, business-layer

我们正在为我们的 ERP 系统编写一些支持应用程序（相当小）。

因此，直到现在我觉得我正在使用数据访问层来处理两个角色：业务层和数据访问层。

我无法决定必须将哪些内容移至单独的图层以及是否需要。我在某处读过，知道何时进行分层是智慧，知道模式只是知识。我没有足够的数量。

所以我需要一些帮助来确定什么是什么。

我目前的 DAL 处理获取数据并在其上应用基本逻辑。例如有类似的方法

`GetProductAvailabilitybyItem`

`GetProductAvailabilitybyLot`

等等

如果我需要将它们分开，我必须做什么？

我脑海中浮现的另一件事是，为了规范化我的 DAL 并使其每次（通过一种通用的 get 方法）返回不同的实体，我必须将其`DataTable`用作返回类型。目前我正在使用诸如`List<PalletRecord>`返回类型之类的东西。

我觉得我的应用程序太小了，很难（而且可能没用）区分这 2 层。

我的基本需求是构建可以被多个前端（网页、WinForms、WPF 等）使用的东西。

**附加示例：**

让我们谈谈一些条形码。我需要检查提取的批次记录是否有效。我正在获取 DAL 中的记录并在业务层中生成返回 bool 的方法？

然后我可以从任何演示文稿中调用 bool 方法以检查文本框是否包含有效批次？

这是不是非常简化的逻辑？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T19:42:05.227

鉴于您正在处理非常小的应用程序，为什么不让[ORM](http://en.wikipedia.org/wiki/Object-relational_mapping)为您提供所有数据访问，而只需担心业务层？

这样你就不必担心处理`DataTable`'s，将数据映射到对象等等。更快的开发，你会减少代码库的大小。

例如，[NHibernate](http://nhforge.org/)或 Microsoft 的[Entity Framework](http://msdn.microsoft.com/en-us/data/ef.aspx)

现在，如果您将向外部消费者提供数据（您正在实施服务），您可能希望创建一组单独的[DTO](http://en.wikipedia.org/wiki/Data_transfer_object)来通过线路，而不是尝试发送您的实际模型实体。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T19:48:57.447

根据您的描述，当应用程序还很小时，您现在绝对应该将两层分开。当您只是访问和显示数据时，您可能会觉得 BL 没用，但随着时间的推移，您会发​​现需要修改、转换或操作数据，例如从不同的表创建坐标对象，或更新一个来自用户的单个操作。

您提供的示例有助于支持这个想法，尽管非常简化。

Pablo 的回答也确实提供了一些很好的设计理念：您绝对应该使用 ORM 来简化您的 DAL 并使其非常精简。我发现[NHibernate 和 Fluent](http://www.dreamincode.net/forums/topic/161638-fluent-nhibernate-tutorial/)在这方面做得很好。您可以使用 BL 来协调使用数据访问对象的访问。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T19:53:08.940

我不是 nTire 架构的忠实粉丝，并且有一些很好的理由。

这种架构的主要目标是

*   能够与不同的底层数据库分离
*   上下文——即应用程序设计和业务逻辑的一致性和
*   确认最佳模式和实践。

但是，在这样做的同时，您也会做出一些牺牲，例如放弃提供者特定的优化等。

我的建议是，您可以采用两层架构，即数据访问和业务逻辑层以及 GUI 或表示层。它仍然允许您拥有适用于不同平台的通用代码，同时将您从意大利面条代码中拯救出来。

# ipad - 在 ipad 应用程序之外销售应用程序资源

> ID：13781014
> 
> 赞同：-1
> 
> 时间：2012-12-08T19:23:22.847
> 
> 标签：ipad, resources

这是我的情况：我正在为 iPad 制作一个使用图像库的应用程序。该应用程序带有一些库。我想从我的网站上出售更多的图书馆。图像库仅包含 png 文件，没有其他内容。

该应用程序将有一个“激活”按钮，因此如果用户购买了一个库，他们可以从应用程序内激活它。该应用程序通过网络服务连接到我们的服务器并验证激活码。

图像库（因为它们可能很大）在 iTunes 中被复制到应用程序的文档目录中。

我的问题是：Apple 是否允许我在我的网站上出售额外的图像库并让用户激活它并将文件复制到应用程序内的文档目录（我在应用程序内公开）或者这是侵权他们的政策？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T19:54:50.273

*编辑*：因为@Kris Gellci 非常渴望证明他的答案是正确的，所以我花时间在 App Store Review Guide 中搜索有关此问题的确切段落。

> 11 采购和货币
> 
> 11.1 使用 App Store 以外的机制解锁或启用附加特性或功能的应用程序将被拒绝
> 
> 11.2 应用程序使用除应用内购买 API (IAP) 以外的系统购买应用程序中的内容、功能或服务的应用程序将被拒绝
> 
> 11.3 使用 IAP 购买实体商品或在应用程序外使用的商品和服务的应用程序将被拒绝

这样你就可以自己看看它是否适用于你。[这里](https://developer.apple.com/appstore/resources/approval/guidelines.html#purchasing-currencies)还有更多。

* * *

是的，他们对此有问题。您需要在应用程序购买中使用，以便他们可以从您销售的产品中分得一杯羹。这样想，如果他们允许的话，每个人都会将他们的应用程序免费提供内容并解锁付费，而苹果公司将被排除在外。更多细节[在这里](https://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/StoreKitGuide/Introduction/Introduction.html)。

# r - 编写和运行 R 函数

> ID：13781016
> 
> 赞同：0
> 
> 时间：2012-12-08T19:23:41.057
> 
> 标签：r, function, user-defined-functions

我在 R 中运行函数时遇到问题。每当我想运行它们时，我总是会收到函数/对象不可用的消息。虽然我将它保存在工作目录中。为了让它运行，我必须将它粘贴到 R 窗口中。任何关于我缺少什么的想法都非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T19:46:15.557

Use the `source` function to read the file.

If you do this a lot, I recommend the package `devtools`, or RStudio. Or both.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-05T09:36:44.260

如上所述，有几个步骤要遵循。如果其中一个丢失，它将无法工作:-)

1）设置你的源文件夹

```
setwd("///.../admin/Documents") 
```

2）创建您的功能并保存它：

```
fun = function(...){
your function
}

dump("fun", file = "Code_fun.R") 
```

3）调用你的函数

```
source("Code_fun.R") 
```

然后你可以继续

```
fun(3) = ... 
```

# java - 想在 Java SE eclipse 中创建 Java EE 项目

> ID：13781017
> 
> 赞同：2
> 
> 时间：2012-12-08T19:23:52.977
> 
> 标签：java, eclipse, jakarta-ee, tomcat

我有用于 Java SE 的 Eclipse Indigo，我在 Ubuntu 中有 Tomcat。我想使用 Servlet 和 JSP 开发一个 Java EE 应用程序。

我的 Eclipse 不包括 Java EE 支持。我可以以某种方式添加这个吗？如果是，我需要安装或下载任何额外的工具或插件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T19:29:54.343

是的。无论如何，您都需要使用像 Tomcat 这样的服务器来运行您的应用程序。（您已经拥有了。）它随 <tomcat install>/lib/servlet-api.jar 一起提供。只需在开发时将其包含在您的类路径中，以便代码编译。

由于 Tomcat 不支持完整的 Java EE 规范，它只为您提供 Servlet API。但这对于您正在做的事情已经足够了。

# session - 如何配置 CKAN 将会话存储在磁盘以外的地方（例如 DB 或 memcached）？

> ID：13781023
> 
> 赞同：1
> 
> 时间：2012-12-08T19:24:16.403
> 
> 标签：session, ckan

CKAN 使用 Pylons，因此使用 Beaker。因此，它似乎将会话信息（和其他缓存信息）存储在磁盘上。有没有办法配置 CKAN 将会话信息存储在磁盘以外的其他地方，例如 DB 或 memcached？

我特别问是因为a）您可能会在磁盘上存储会话时遇到问题（如果您有很多会话）b）我想在Heroku之类的东西上运行CKAN，因为磁盘上的会话会导致问题（尤其是如果您有超过 1 个进程）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T10:33:28.207

安装 memcached：

```
sudo apt-get install memcached 
```

默认配置应具有在端口 11211 上侦听 localhost 的设置。/etc/memcached.conf：

```
-l 127.0.0.1
-p 11211 
```

要让 CKAN/Beaker 与之对话，您需要 Python 模块 pylibmc 和 libmemcached。首先安装 libmemcached2 并查看发行版附带的版本：

```
sudo apt-get install libmemcached2 
```

Lucid 附带 v0.31-1，它需要不迟于 0.9 版的 pylibmc。如果您有 0.32，那么您可以使用更新的 pylibmc。现在安装 pylibmc：

```
pip install pylibmc==0.9 
```

然后在您的 ckan 配置中，您设置 Beaker 以像这样与它交谈：

```
beaker.session.type = ext:memcached
beaker.session.url = 127.0.0.1:11211 
```

重新启动后，您应该使用 Beaker，而不是创建那些最终完全填满磁盘的文件。

# python - 来自 xyz 数据的 Matplotlib 轮廓：griddata 无效索引

> ID：13781025
> 
> 赞同：11
> 
> 时间：2012-12-08T19:24:31.353
> 
> 标签：python, matplotlib, interpolation

我正在尝试使用具有以下格式的文件的 matplotlib 进行等高线图：

x1 y1 z1

x2 y2 z2

ETC

我可以用 numpy.loadtxt 加载它来获取向量。到目前为止，没有麻烦。

我阅读这篇文章是为了学习如何绘图，并且可以通过复制粘贴来重现它，所以我确信我的安装没有任何问题：

[http://matplotlib.org/examples/pylab_examples/griddata_demo.html](http://matplotlib.org/examples/pylab_examples/griddata_demo.html)

我知道我必须输入 x 和 y 作为向量和 z 作为数组，这可以用 griddata 来完成。这也是我在这个网站上找到的。

文档说：

> zi = griddata(x,y,z,xi,yi) 将 z = f*(*x, y) 形式的曲面拟合到（通常）非均匀间隔向量 (x, y, z) 中的数据。griddata() 在 (xi, yi) 指定的点处对该曲面进行插值以生成 zi。xi 和 yi 必须描述一个规则网格，可以是 1D 或 2D，但必须是单调递增的。

为了示例，我编写了以下代码：

```
import numpy as np
import matplotlib.pyplot as plt
import matplotlib.mlab as ml

x=np.linspace(1.,10.,20)
y=np.linspace(1.,10.,20)
z=np.linspace(1.,2.,20)

xi=np.linspace(1.,10.,10)
yi=np.linspace(1.,10.,10)

zi = ml.griddata(x,y,z,xi,yi) 
```

但是，当涉及到 griddata 时，我收到以下错误：IndexError: invalid index

因此，我尝试对文档的示例进行一些修改，如下所示：

```
from matplotlib.mlab import griddata
import matplotlib.pyplot as plt
import numpy as np
x = np.linspace(-2.1,2.1,300)
y = np.linspace(-2.1,2.1,300)
z = x*np.exp(-x**2-y**2)
# define grid.
xi = np.linspace(-2.1,2.1,100)
yi = np.linspace(-2.1,2.1,200)
# grid the data.
zi = griddata(x,y,z,xi,yi,interp='linear') 
```

我得到同样的错误。我不明白出了什么问题。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-08T19:58:10.447

考虑：

```
x = np.linspace(1., 10., 20)
y = np.linspace(1., 10., 20)
z = np.linspace(1., 2., 20) 
```

这意味着我们知道沿线某些点的 z 值`x=y`。

从那里，

```
zi = ml.griddata(x,y,z,xi,yi) 
```

要求`mlab.griddata`推断`z`矩形网格中所有点的值。

我们已经提供了很多关于如何`z`沿着这条线变化的信息，但没有关于`z`在垂直方向（远离这`x = y`条线）如何变化的信息。因为`mlab.griddata`拒绝猜测而引发错误。

如果您的初始`x`,`y`数据分布更随机，您将获得更好的结果：

```
import numpy as np
import matplotlib.pyplot as plt
import matplotlib.mlab as ml

ndata = 10
ny, nx = 100, 200
xmin, xmax = 1, 10
ymin, ymax = 1, 10
# x = np.linspace(1, 10, ndata)
# y = np.linspace(1, 10, ndata)

x = np.random.randint(xmin, xmax, ndata)
y = np.random.randint(ymin, ymax, ndata)
z = np.random.random(ndata)

xi = np.linspace(xmin, xmax, nx)
yi = np.linspace(ymin, ymax, ny)
zi = ml.griddata(x, y, z, xi, yi)

plt.contour(xi, yi, zi, 15, linewidths = 0.5, colors = 'k')
plt.pcolormesh(xi, yi, zi, cmap = plt.get_cmap('rainbow'))

plt.colorbar() 
plt.scatter(x, y, marker = 'o', c = 'b', s = 5, zorder = 10)
plt.xlim(xmin, xmax)
plt.ylim(ymin, ymax)
plt.show() 
```

![在此处输入图像描述](../Images/dbdd359c7980c5261e10fd96c83324cd.png)

* * *

如果您想以任意方式将`mlab.griddata`沿线的数据外推到整个网格，您可以添加两个额外的边界点和：`x=y``(xmin, ymax, z[0])``(xmax,ymin,z[-1])`

```
import numpy as np
import matplotlib.pyplot as plt
import matplotlib.mlab as ml

np.random.seed(8)
ndata = 10
ny, nx = 100, 200
xmin, xmax = 1, 10
ymin, ymax = 1, 10
x = np.linspace(1, 10, ndata)
y = np.linspace(1, 10, ndata)
z = np.random.random(ndata)
x = np.r_[x,xmin,xmax]
y = np.r_[y,ymax,ymin]
z = np.r_[z,z[0],z[-1]]
xi = np.linspace(xmin, xmax, nx)
yi = np.linspace(ymin, ymax, ny)

# Requires installation of natgrid
# http://sourceforge.net/projects/matplotlib/files/matplotlib-toolkits/
zi = ml.griddata(x, y, z, xi, yi, interp='nn')

# Or, without natgrid:
# zi = ml.griddata(x, y, z, xi, yi, interp='linear')

plt.contour(xi, yi, zi, 15, linewidths = 0.5, colors = 'k')
plt.pcolormesh(xi, yi, zi, cmap = plt.get_cmap('rainbow'))

plt.colorbar() 
plt.scatter(x, y, marker = 'o', c = 'b', s = 10, zorder = 10)
plt.xlim(xmin, xmax)
plt.ylim(ymin, ymax)
plt.show() 
```

![在此处输入图像描述](../Images/b956ff19951afa494117c3bdc1920aaf.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-08T20:42:50.457

好的，我终于找到了绘制它的解决方案。对于那些感兴趣的人，这里有诀窍：使用来自 Scipy 的 griddata 和“最近”方法。

```
from scipy.interpolate import griddata
import numpy as np
import matplotlib.pyplot as plt
x=np.linspace(1.,10.,20)
y=np.linspace(1.,10.,20)
z=z = np.random.random(20)
xi=np.linspace(1.,10.,10)
yi=np.linspace(1.,10.,10)

X,Y= np.meshgrid(xi,yi)
Z = griddata((x, y), z, (X, Y),method='nearest')
plt.contourf(X,Y,Z) 
```

# entity-framework - Entity Framework Migrations 如何知道数据库的版本？

> ID：13781028
> 
> 赞同：2
> 
> 时间：2012-12-08T19:24:45.960
> 
> 标签：entity-framework, entity-framework-5, entity-framework-migrations

首先使用 Entity Framework 5 代码，我想知道 EF Migrations 如何确定目标数据库处于某个迁移版本？也就是说，我已经清空了我的数据库（删除了所有表）并尝试通过以下命令（在 PM 控制台中）重新进行初始迁移`update-database -targetmigration 201212011907118_Initial`：`update-database`然后以“目标数据库已在版本 201212011907118_Initial”响应。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T19:41:05.850

显然，Code First Migrations 维护了一个名为“dbo.__MigrationHistory”的表，其中存储了有关已应用迁移的元数据。这是一个系统表，因此很难删除。请参阅[此帖子](http://blog.oneunicorn.com/2012/02/27/code-first-migrations-making-__migrationhistory-not-a-system-table)以供参考。

# segmentation-fault - 分段错误的堆栈跟踪更长？

> ID：13781029
> 
> 赞同：2
> 
> 时间：2012-12-08T19:24:55.413
> 
> 标签：segmentation-fault, gdb, stack-trace, intel-fortran, traceback

使用“-traceback”编译的 ifort 仅打印 10 行，但分段发生在至少 10 层的内部子程序中。因此，不会显示发生段错误的确切例程。

它的 MPI 程序和运行 gdb 不是一个可行的选择。

有什么帮助吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T01:41:33.353

> MPI 程序和运行 gdb 不是一个可行的选择。

为什么不？您应该启用核心转储、获取核心并使用 GDB 对其进行分析。

# c# - 在 MySQL 中使用子类型

> ID：13781030
> 
> 赞同：1
> 
> 时间：2012-12-08T19:25:04.440
> 
> 标签：c#, .net, mysql, subtype

我在 MySQL 中使用子类型/超类型时遇到了一些麻烦。我使用 C# .NET 为我的本地俱乐部制作管理系统，但在制作漂亮的数据库时遇到了一些麻烦。

我的数据库如下所示：

超类型：

```
========
Product
---------
Prod_id (PK)
Name
Barcode 
```

和子类型：

```
=======
Card
--------
Prod_id (FK)
Price 
```

我有 3 个子类型，卡片、武器、弹药，它们基本上是相同的（尽管我在其中存储了不同的东西）

也许我把事情复杂化了，但我想做的是，当我创建一张新卡时，会自动生成一个产品（我为此使用触发器），并且 Cards.Prod_id 被设置为新生成的产品.

我该怎么做呢？这是使用子类型的正确方法，还是我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T20:11:10.457

您可以使用触发器。但是，还有另一种，我认为更好的方法：

*   更改*产品*表 - 将**AUTO_INCREMENT**属性添加到主键。
*   插入新产品，MySQL会生成新ID
*   **使用last_insert_id** MySQL函数获取最后插入的ID ，并在子表中插入新记录

MySQL 示例：

```
CREATE TABLE Product(
Prod_id INT PRIMARY KEY AUTO_INCREMENT,
Name VARCHAR(40),
Barcode INT
);

CREATE TABLE Card(
Prod_id INT,
Price DECIMAL(8, 2),
FOREIGN KEY (Prod_id) REFERENCES Product(Prod_id)
);

INSERT INTO Product VALUES (NULL, 'phone', 1000);
INSERT INTO Card VALUES(LAST_INSERT_ID(), 10.5); 
```

首先插入墙添加具有自动生成 ID 的新产品。第二，将获得这个新 ID 并将其用于新的卡记录。

[使用 AUTO_INCREMENT](http://dev.mysql.com/doc/refman/5.0/en/example-auto-increment.html)

# github - ssh，github，它不起作用

> ID：13781035
> 
> 赞同：0
> 
> 时间：2012-12-08T19:25:45.160
> 
> 标签：github, ssh

我确定我将我的 ssh 密钥上传到 github，并且我还授予文件夹和文件权限。但我还是得到了这个。任何想法？

```
 ➜  python-google  ssh -vT github.com    
    OpenSSH_5.6p1, OpenSSL 0.9.8r 8 Feb 2011
    debug1: Reading configuration data /etc/ssh_config
    debug1: Applying options for *
    debug1: Connecting to github.com [0.0.62.138] port 22.
    debug1: Connection established.
    debug1: identity file /Users/seeker/.ssh/id_rsa type 1
    debug1: identity file /Users/seeker/.ssh/id_rsa-cert type -1
    debug1: identity file /Users/seeker/.ssh/id_dsa type -1
    debug1: identity file /Users/seeker/.ssh/id_dsa-cert type -1
    debug1: Remote protocol version 2.0, remote software version OpenSSH_5.5p1 Debian-6+squeeze1+github8
    debug1: match: OpenSSH_5.5p1 Debian-6+squeeze1+github8 pat OpenSSH*
    debug1: Enabling compatibility mode for protocol 2.0
    debug1: Local version string SSH-2.0-OpenSSH_5.6
    debug1: SSH2_MSG_KEXINIT sent
    debug1: SSH2_MSG_KEXINIT received
    debug1: kex: server->client aes128-ctr hmac-md5 none
    debug1: kex: client->server aes128-ctr hmac-md5 none
    debug1: SSH2_MSG_KEX_DH_GEX_REQUEST(1024<1024<8192) sent
    debug1: expecting SSH2_MSG_KEX_DH_GEX_GROUP
    debug1: SSH2_MSG_KEX_DH_GEX_INIT sent
    debug1: expecting SSH2_MSG_KEX_DH_GEX_REPLY
    debug1: Host 'github.com' is known and matches the RSA host key.
    debug1: Found key in /Users/seeker/.ssh/known_hosts:1
    Warning: Permanently added the RSA host key for IP address '0.0.62.138' to the list of known hosts.
    debug1: ssh_rsa_verify: signature correct
    debug1: SSH2_MSG_NEWKEYS sent
    debug1: expecting SSH2_MSG_NEWKEYS
    debug1: SSH2_MSG_NEWKEYS received
    debug1: Roaming not allowed by server
    debug1: SSH2_MSG_SERVICE_REQUEST sent
    debug1: SSH2_MSG_SERVICE_ACCEPT received
    debug1: Authentications that can continue: publickey
    debug1: Next authentication method: publickey
    debug1: Offering RSA public key: /Users/seeker/.ssh/id_rsa
    debug1: Authentications that can continue: publickey
    debug1: Trying private key: /Users/seeker/.ssh/id_dsa
    debug1: No more authentication methods to try. 
```

我确定我将我的 ssh 密钥上传到 github，并且我还授予文件夹和文件权限。但我还是得到了这个。任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T20:56:49.860

检查你的 ssh 公钥是否被复制为*一行*：在 GitHub 的 ssh 字段中很容易将它复制为多行。

仅当您的公钥被正确复制并导入到 GitHub 上`/Users/seeker/.ssh/id_rsa(.pub)`才会起作用（如果您的 ssh 目录受到[适当保护](https://stackoverflow.com/questions/13425811/git-ssh-authentication/13428529#13428529)）。

* * *

```
Connecting to github.com [0.0.62.138] port 22. 
```

[GitHub页面](https://help.github.com/articles/error-permission-denied-publickey)清楚地提到：

```
# debug1: Reading configuration data /Users/you/.ssh/config
# debug1: Reading configuration data /etc/ssh_config
# debug1: Applying options for *
# debug1: Connecting to github.com [207.97.227.239] port 22. 
```

> 连接应该是**`207.97.227.239`**on port **`22`**，除非您覆盖设置以使用 SSH over HTTPS。

另外确保您`git`在配置文件中使用/声明用户。删除您的`~/.ssh/config`文件，然后尝试：

```
 ssh -vT git@github.com 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-12T07:35:06.983

请注意，GitHub 不提供 shell 访问。

您需要在 github 上更新您的公钥，以便您可以推送。请按照以下 [步骤操作](https://help.github.com/articles/adding-a-new-ssh-key-to-your-github-account/)：

[您按照此处](https://help.github.com/articles/testing-your-ssh-connection/)所述测试您的密钥/ ssh 连接

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-11T23:23:41.087

您尚未指定要作为身份验证的用户。在向 GitHub 进行身份验证时，用户应该始终是 git，而不是您的个人用户名。

试试`ssh -vT git@github.com`。

# c# - 无论大小写或文化如何，使用 linq 在文本中查找字符串

> ID：13781040
> 
> 赞同：0
> 
> 时间：2012-12-08T19:26:13.683
> 
> 标签：c#, linq, lambda

> **可能重复：**
> [忽略字符串比较中的重音字母](https://stackoverflow.com/questions/359827/ignoring-accented-letters-in-string-comparison)

我有一个搜索文本框，可以在数据库中的所有新闻中搜索给定的文本。所以我有这个：

```
List<NewsTranslation> newsTranslations = GetByLanguage(GlobalBL.CultureLanguage);
return newsTranslations.Where(
            e =>
            e.NewsContent.Contains(searchText) || e.NewsDescription.Contains(searchText) ||
            e.NewsTitle.Contains(searchText)).ToList(); 
```

效果很好，但我需要它不考虑字母的大小写或重音。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T19:35:10.703

这个比较器：

```
string.Compare(searchText, e, CultureInfo.CurrentCulture, CompareOptions.IgnoreNonSpace | CompareOptions.IgnoreCase)); 
```

会成功的。您可以将其包含在您的 LINQ 查询中，当两个参数相等时，它当然会返回 0。

# php - CodeIgniter：Oracle 查询和 php

> ID：13781041
> 
> 赞同：1
> 
> 时间：2012-12-08T19:26:19.233
> 
> 标签：php, oracle, codeigniter

我正在做一个学校项目，我必须在该项目上创建一个基于 Oracle 数据库的 Web 应用程序，并且在测试了一些 php 框架之后，我目前正在使用 CodeIgniter。我对 MVC 和 php 还很陌生，所以如果我犯了任何错误，请见谅。

我了解（作为 MVC 框架），在我的模型上，可以运行如下查询

```
$query = $this->db->query("SELECT * FROM tablename"); 
```

但是在我的研究中，我读到这是一个很好的做法，每次我们想要运行查询/插入/等时，我们应该打开一个连接并在完成操作后结束它。我相信这应该可以防止“不一致”..类似于

```
<?php
    $conn = oci_connect('user', 'pass', 'dbname');
    $query = 'select * from tablename';
    $stid = oci_parse($conn, $query);
    oci_execute($stid, OCI_DEFAULT);
    while ($row = oci_fetch_array($stid, OCI_ASSOC)) {
    foreach ($row as $item) {
    echo $item." | ";
    }
    echo "
    \n";
    }
    oci_free_statement($stid);
oci_close($conn);
?> 
```

是这样吗？如果是，那么我在模型上所做的那个命令是否正确？我只能想到在 view.php 文件上运行这个 php 脚本，但这样做我猜我没有实现 MVC '概念'，只是调用这种 php 脚本......对吗？我用这两种方法得到了结果，但我不确定哪种方法最好。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T19:33:29.800

你没有做这么多的工作。这是MVC。模式-视图-控制器。一切都已完成和管理。您必须在 config 文件夹中保存的 database.php 文件中提供连接详细信息。ci 将自动与数据库建立连接。

并在模型中调用这些所有查询。根据您的要求在模型中创建一个函数并在控制器中调用它。而且，因此您可以在控制器中获取结果并将其传递给视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T19:35:19.977

由于您使用的是 Codeigniter MVC 框架，因此添加您自己的数据库例程肯定是一种矫枉过正且不好的做法。CI 有一个开发良好且安全的数据库库，使用 CI 活动记录语法大大简化了数据库查询。因此，研究这一点并了解思想槽框架的巨大好处。

[http://ellislab.com/codeigniter/user-guide/database/active_record.html](http://ellislab.com/codeigniter/user-guide/database/active_record.html)

# spring - Spring MVC如何创建没有返回（字符串）视图的控制器？

> ID：13781046
> 
> 赞同：0
> 
> 时间：2012-12-08T19:26:56.060
> 
> 标签：spring, controller

下面是我的示例控制器。

```
@RequestMapping(value = "/validate", method = RequestMethod.POST)
public String validatePage1 (@ModelAttribute("page1")
                        Page1 pg1, BindingResult result) {

    System.out.println("Value1:" + pg1.getVal1() + 
                "Value2:" + pg1.getVal2());

    return "page2"; // I don't want to take any action (page navigation) here
}

@RequestMapping("/page1")
public ModelAndView pageShow() {

    return new ModelAndView("page1", "command", new Page1());
} 
```

现在的问题是，当Spring框架调用方法（validatePage1）时，我不想在客户端采取任何行动，怎么办？

实际上，我在加载时已经在客户端加载了所有必需的页面（以避免重复加载页面），所以我不想在客户端进行任何页面导航操作，我只想做“数据绑定”来完成我的服务器端的业务逻辑。

当我在“validatePage1()”中返回“”空字符串时，Spring 框架抛出异常“请求处理失败；嵌套异常是 org.apache.tiles.definition.NoSuchDefinitionException:” 因为我使用的是磁贴，所以我必须稍后删除磁贴配置因为我首先加载了所有文件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-01-07T14:14:33.597

[您可以按照此处](https://stackoverflow.com/questions/5371565/spring-mvc-request-with-no-view-rendered)的建议将方法设置为返回`void`并使用 进行注释。无需处理之类的。`@ResponseBody``HttpServletResponse`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-08T19:33:29.520

直接来自[文档](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/htmlsingle/spring-framework-reference.html#mvc-ann-return-types)：

> 支持的方法返回类型
> 
> 以下是支持的返回类型：
> 
> [...]
> 
> 如果方法本身处理响应（通过直接编写响应内容，为此目的声明 ServletResponse / HttpServletResponse 类型的参数）或视图名称应该通过 RequestToViewNameTranslator 隐式确定（不在处理程序方法签名）。

# javascript - javascript UI 组件发出过多的 http 请求。知道如何优化吗？

> ID：13781052
> 
> 赞同：1
> 
> 时间：2012-12-08T19:28:13.203
> 
> 标签：javascript, ajax, xmlhttprequest

这个问题纯粹是基于假设。可能是也可能不是有效的问题。无论如何，它来了

假设我们有一个带有一些 UI 组件/小部件的重型 javascript 客户端应用程序，每个小部件都有一个端点来查询数据

在页面加载时，这些组件将发出 http 请求。多个；到多个不同的端点。

显然，与从服务器端生成 UI 的传统 Web 相比，重型客户端架构的 http 请求数量会增加。

示例案例：

*   小部件 A 请求资源 A
*   小部件 B 请求资源 B

当然，我们可以通过以下方式最小化 http 请求：

*   父小部件请求返回 { 资源 A，资源 B } 的端点
*   父小部件将数据分发到小部件 A
*   父小部件将数据分发到小部件 B

这可以通过基于业务逻辑对相关小部件进行分组来完成

并不是所有的都可以这样构图。即使可以，如何维护代码模块化？大型javascript应用程序是否有任何众所周知的设计模式。表现？也许我想多了，因为我当然没有这里的数字。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T20:00:33.563

对于初学者，我会考虑创建一个客户端 JavaScript 库来处理获取/发送数据并使所有小部件都使用这个 API。

这样，您可以在一个地方优化/分组所有小部件的数据流/来自所有小部件的数据流。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T20:16:16.253

听起来您想要的是所有数据请求的中央队列。每个小部件自己都可以通过排队特定请求来发出请求。然后，您将拥有一段通用代码，用于检查队列中的所有请求，并确定它们是否可以稍微优化（在一个请求中从同一端点请求多条数据）。

使用这种类型的设计模式仍然保持所有小部件模块化，但有一个小的代码库来处理请求的优化。

从技术上讲，这将如何工作是您将创建一个用于将请求添加到队列的库函数。该函数需要一个端点、一个数据准备就绪时的回调函数以及请求的描述。每个小部件都会调用这个通用函数来发出数据请求。

这个通用函数会将每个请求放入队列中，然后执行`setTimeout()`0 毫秒（如果尚未设置）。这`setTimeout()`将在当前执行线程完成时调用，这将是当当前初始化线程的所有请求现在都在队列中时。然后可以检查队列，并且可以将任何对同一端点的请求合并为一个请求并发送该请求。当数据到达时，单独的数据片段被打包出来，并调用适当的小部件的回调。

如果缓存数据会有所帮助（如果随着时间的推移对完全相同的数据发生多个请求），该层也可以实现缓存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T20:05:57.277

想到的一个想法（不会减少传输的数据量，但会减少 HTTP 请求的数量）是通过您控制的一些通用 Javascript 接口在客户端路由所有 AJAX 请求。

然后，您可以等待几毫秒并批处理在该时间间隔内发生的所有请求，而不是为每个 UI 请求发送一个 HTTP 请求，只为整个批处理发送一个 HTTP 请求（您必须小心对发送到您的服务器的请求执行此操作）。

在服务器上，您可以有一个特殊的通用“批处理”端点，它在内部为所有批处理请求（最好是并行的）提供服务，并以批处理响应的形式返回结果。

然后客户端将批处理结果分发给原始请求者。

请注意，这仅在请求都花费大致相同的服务时间时才有效；当所有其他请求都已完成时，您不希望批处理响应等待一个子请求完成 30 秒。您也许可以通过黑名单或其他方式解决此问题。

此外，尝试确定哪些请求需要首先得到服务并分配它们的优先级！

# javascript - 带有 mouseenter 和 mouseleave 事件的菜单

> ID：13781053
> 
> 赞同：1
> 
> 时间：2012-12-08T19:28:17.570
> 
> 标签：javascript, jquery, mouseevent

**简介：**
大家好。我正在尝试做一个菜单，但我遇到了 mouseenter/mouseleave 事件。

**到目前为止我所拥有的：**

```
$("#icon").click(function() {
    $("#invis").css("display", "block");
    $("#icon").bind("mouseleave", function(){
        $("#invis").css('display', "none");
    }).bind("mouseenter", function(){
        $("#invis").css('display', "block"); 
    });
    $("#invis").bind("mouseleave", function(){
        $("#invis").css('display', "none");
    }).bind("mouseenter", function(){
        $("#invis").css('display', "block");
    });
});​ 
```

到目前为止，我试过这个。我的意思是单击“图标”，此单击将显示菜单/另一个隐藏元素。现在我想让它保持打开状态，因为有人将鼠标悬停在“图标”或实际菜单上。但是使用我提供的代码，一旦我离开鼠标然后在“图标”上再次输入，它仍然会保持 onmouseenter 事件，并且菜单将再次出现。我知道我可以取消绑定 onmouseenter 事件，但是一旦我离开菜单，进入图标，我的菜单就会关闭，我不希望这样。

我能想到的最简单的例子：http: [//jsfiddle.net/tzzqM/5/](http://jsfiddle.net/tzzqM/5/)

**问题**
如何在单击事件时打开“菜单”，然后只要有人将鼠标悬停在菜单或“图标”（两者）上，就保持打开状态。一旦鼠标离开两者的区域，菜单就会关闭，要打开它，我需要再次单击“图标”。还有另一种方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T19:33:46.703

在鼠标离开对象时，检查鼠标是否仍然在菜单上或菜单按钮上，如果没有，隐藏菜单。基本上，您将事件绑定`mouseleave`到两个元素，然后检查选择的长度。如果是1，你要么在菜单上，要么在按钮上，这使得退出菜单按钮进入菜单本身，不会触发代码的“隐藏”部分，如果选择长度为0，那么我们还没有结束任何这些元素，我们将其隐藏。

```
$("#icon").click(function() {
    $("#invis").css("display", "block");
        $("#invis,#icon").bind("mouseleave", function(){
            if($("#invis:hover,#icon:hover").length === 0){
                $("#invis").css('display', "none");
            }
        })
});​ 
```

[这里](http://jsfiddle.net/F8hRD/1/)有一把小提琴。

或者如果我必须从头开始（只是 jQuery 部分），我会写它的方式，因为请记住，您将更少地跳入 DOM 池并且**应该**更高效一些，尽管它的功能与第一。这是[小提琴](http://jsfiddle.net/AMD6r/)

```
var icon = $("#icon"),
    menu = $("#invis");

icon.click(function() {
    menu.show();
        $.merge(icon,menu).bind("mouseleave", function(){
            if($("#icon:hover,#invis:hover").length < 1) menu.hide();
        });
});​ 
```

或者使用**jhummel**的建议，我们可以访问具有悬停的新视图的 id，并检查它是否是我们要监视的两个视图之一。这很棒，因为它可以防止我们再次跳入池中，这给我们带来了边际性能提升，这就是[小提琴](http://jsfiddle.net/3abhm/1/)。

```
var icon = $("#icon"),
    menu = $("#invis");

icon.click(function() {
    menu.show();
        $.merge(icon,menu).bind("mouseleave", function(e){
            if($.inArray(e.relatedTarget.id, ["icon","invis"]) === -1){
                   menu.hide();
            }
        });
});​ 
```

​​​

* * *

**相关文档：**

*   [jQuery.merge](http://api.jquery.com/jQuery.merge/)
*   [别再跳进游泳池了！](http://net.tutsplus.com/tutorials/javascript-ajax/quick-tip-jquery-newbs-stop-jumping-in-the-pool/)
*   [jQuery.inArray](http://api.jquery.com/jQuery.inArray/)
*   [event.relatedTarget](http://api.jquery.com/event.relatedTarget/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T19:39:57.157

当你使用`mouseover`or`mouseleave`事件时，jQuery中的事件对象会有一个`relatedTarget`属性。您可以检查该属性以查看鼠标是否正在进入另一个元素。

```
$("#icon").on('click',function() {
  $("#invis").show();
}).on('mouseleave', function(e) {
  if(e.relatedTarget.id != 'invis') $('#invis').hide();    
});

$('#invis').on('mouseleave', function(e) {
  if(e.relatedTarget.id != 'icon') $(this).hide();
}); 
```

[jquery 相关目标文档](http://api.jquery.com/event.relatedTarget/) ​</p>

# objective-c - self.navigationItem.titleView 在旋转后切断 UIBarButtonItem

> ID：13781054
> 
> 赞同：2
> 
> 时间：2012-12-08T19:28:22.220
> 
> 标签：objective-c, ios, uikit

我使用 a`self.navigationItem.titleView`并将两个 UIButtons 设置`self.navigationItem.rightBarButtonItems`为`UINavigationBar`. 我已经在我的导航栏中实现了这一点，就像这样[![](../Images/32378e301d31f8934a55efcfc2761cb4.png "由 imgur.com 主办")](https://imgur.com/gpQEN)

每当我旋转视图控制器景观然后返回时，uibarbutton 项目就会像这样被切断 [![](../Images/d045b4e1527fbc8f97c47181ea783268.png "由 imgur.com 主办")](https://imgur.com/LQ3Iu)

我用来设置的代码`titleView`是这样的：

```
UILabel *titleLabel = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 0, 44)];
titleLabel.backgroundColor = [UIColor clearColor];
titleLabel.numberOfLines = 2;
titleLabel.font = [UIFont boldSystemFontOfSize:13.0f];
titleLabel.shadowColor = [UIColor colorWithWhite:0.0 alpha:0.5];
titleLabel.textAlignment = UITextAlignmentCenter;
titleLabel.textColor = [UIColor whiteColor];
titleLabel.text = self.tabTitle;
self.navigationItem.titleView = titleLabel; 
```

我不知道为什么会发生这种情况，我想知道你们中是否有人知道如何解决这个问题。

# css - CSS 多背景显示在 Chrome 中，但不显示在 IE 或 Firefox 中

> ID：13781056
> 
> 赞同：1
> 
> 时间：2012-12-08T19:28:33.390
> 
> 标签：css, multiple-browsers, background-image

我看到一些关于背景的答案没有出现在 Chrome 上，而是出现在 IE 和 Firefox 上，但这只是刷新了缓存。尝试指定条件`background-size`并没有改变任何东西。不知道为什么它可以在 Chrome 上运行，但在 Firefox 或 IE 中根本不显示。也许 IE 无法处理多个背景，但至少我想尽可能在​​ Firefox 上安装它。有什么想法吗？

这是代码：

```
body{
background-image: url(http://pocketyourpower.com/index.php/admin/cms_wysiwyg/directive/___directive/e3ttZWRpYSB1cmw9Ind5c2l3eWcvYmFja2dSTy5qcGcifX0,/key/5bf910ba704cb793ba25145022f9caa3/), 
    url (http://pocketyourpower.com/index.php/admin/cms_wysiwyg/directive/___directive/e3ttZWRpYSB1cmw9Ind5c2l3eWcvYmFja2dST3JpZ2h0LmpwZyJ9fQ,,/key/5bf910ba704cb793ba25145022f9caa3/);
background-size:93px 99px;
background-repeat: repeat-y, repeat-y;
background-position:left, center right;
} 
```

[在这里](http://jsfiddle.net/h8C85/)显示很好。

不知道为什么不能在 Mozilla 或 IE 上运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T19:36:42.377

我不知道你在这里做什么，你的图片网址根本没有指向图片......

[**演示**](http://jsfiddle.net/h8C85/1/)

CSS

```
body {
  background-image: url(http://www.xtec.cat/centres/a8026907/Index/google.jpg), url(http://www.posicionamientoenlaweb.es/wp-content/uploads/2011/03/google.png);
  background-size:93px 99px;
  background-repeat: repeat-y, repeat-y;
  background-position:left, center right;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-11T09:54:37.413

我假设，您正在使用 Magento。

在这种情况下，解决方案是只更改 admin 中的一个设置：

`System -> Configuration -> General -> Content Management -> Use Static URLs for Media Content in WYSIWYG for Catalog`至`Yes`

由于您的图像 URL 是由 Magento WYSIWYG 编辑器生成的，并且上面的设置设置为`No`，因此您在前端断开了链接。

# java - java运算符中的隐式转换+=

> ID：13781069
> 
> 赞同：11
> 
> 时间：2012-12-08T19:30:11.253
> 
> 标签：java, compiler-errors, implicit-conversion

我发现 java compile 在使用 int 和 float 的赋值和自赋值语句方面有一个非预期的行为。

以下代码块说明了该错误。

```
 int i = 3;
    float f = 0.1f;

    i += f;              // no compile error, but i = 3
    i = i + f;           // COMPILE ERROR 
```

*   在自赋值`i += f`中，编译不会发出错误，但计算的结果是带有 value 的 int `3`，并且变量`i`保持 value `3`。

*   在`i = i + f`表达式中，编译器发出带有*“错误：可能丢失精度”*消息的错误。

有人可以解释这种行为。

编辑：我已经在[https://compilr.com/cguedes/java-autoassignment-error/Program.java中发布了这个代码块](https://compilr.com/cguedes/java-autoassignment-error/Program.java)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-08T19:37:07.367

[http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.26.2](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.26.2)

Java 语言规范说：

> 形式的复合赋值表达式`E1 op= E2`等价于`E1 = (T) ((E1) op (E2))`，其中`T`是 的类型`E1`，除了`E1`只计算一次。

所以`i += f`等价于`i = (int) (i + f)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T19:40:25.180

我相信显式`i+f`失败是因为[缩小原始转换](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.1.3)。而在第一种情况下，右侧的转换通过了，因为它是根据[复合分配规则完成的。](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.26.2)

# java - 使用mysql在java中使用preparedstatement查询问题

> ID：13781071
> 
> 赞同：0
> 
> 时间：2012-12-08T19:30:20.460
> 
> 标签：java, mysql, prepared-statement

在查询中“_latin”在每个参数之前被连接起来

爪哇代码：

```
 PreparedStatement prepStmt = null;
        QueryString = "SELECT FROM Student WHERE username=? AND password=? ";
        prepStmt=con.prepareStatement(QueryString);
        prepStmt.setString(1,un);
        prepStmt.setString(2,pwd);
        ResultSet rs;

        System.out.println(prepStmt);
       rs = prepStmt.executeQuery(); 
```

错误 ：

```
java.sql.SQLException: [MySQL][ODBC 5.1 Driver][mysqld-5.5.24-log]You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'FROM Student WHERE username=_latin1'wow' AND password=_latin1'hell'' at line 1 
```

为什么会发生，解决方法是什么

这是表：

![桌子](../Images/61f112ff41cf3f4cdfa03a7bb89da722.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T19:46:00.813

您缺少查询中的列列表。您必须明确指定所需的列，或者通过通配符检索所有列。代替：

```
SELECT FROM Student WHERE username = ? AND password = ? 
```

你想要这样的东西：

```
SELECT * FROM Student WHERE username = ? AND password = ? 
```

请注意，显式定义要检索的列几乎总是比使用通配符表达式更好。

# android - 尝试访问无线时出现 Android 应用程序错误

> ID：13781072
> 
> 赞同：0
> 
> 时间：2012-12-08T19:30:27.710
> 
> 标签：android, wireless, android-wifi, android-networking

我正在编写一个 Android 应用程序，我想在调用浏览器显示流之前确保无线已连接，但是当单击按钮表示应用程序已停止运行时，它只会关闭。我已经在 android 清单文件中设置了权限。这是我的代码。在一个名为 Networking 的单独课程中，我这样做了。

```
public class Networking extends Main {

    public boolean  isWirelessConnected()
    {
        cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE); 
    NetworkInfo mwifi = cm.getNetworkInfo(ConnectivityManager.TYPE_WIFI);
    if(mwifi == null)
        return false;
    else 
        return true;
    }
    public void messageDialog()
    {
        AlertDialog.Builder alrtBuild = new AlertDialog.Builder(this);
        alrtBuild
        .setTitle("Wireless")
        .setMessage("You are not Connected would you like to Connect to wireless?")
        .setNegativeButton("Yes", new  DialogInterface.OnClickListener() {

            public void onClick(DialogInterface dialog, int which) {
                WifiManager wifiManger = (WifiManager) getSystemService(Context.WIFI_SERVICE);
                wifiManger.setWifiEnabled(true);

            }
        })
        .setNegativeButton("No", new DialogInterface.OnClickListener() {

            public void onClick(DialogInterface dialog, int which) {
                dialog.cancel();

            }
        });
        AlertDialog alert = alrtBuild.create();
        alert.show();

    }
} 
```

在我的主要课程中

```
Networking netwrk = new Networking();
if(netwrk.wireless().isConnected())
{
    Intent brwoserIntent = new Intent(Intent.ACTION_VIEW,
             Uri.parse("http://www.own3d.tv/HotshotGG"));
    startActivity(brwoserIntent);               
} 
```

这是我按下按钮时程序抛出的错误

```
12-08 19:51:16.904: E/AndroidRuntime(1549): FATAL EXCEPTION: main
12-08 19:51:16.904: E/AndroidRuntime(1549): java.lang.IllegalStateException: Could not execute method of the activity
12-08 19:51:16.904: E/AndroidRuntime(1549):     at android.view.View$1.onClick(View.java:3597)
12-08 19:51:16.904: E/AndroidRuntime(1549):     at android.view.View.performClick(View.java:4202)
12-08 19:51:16.904: E/AndroidRuntime(1549):     at android.view.View$PerformClick.run(View.java:17340)
12-08 19:51:16.904: E/AndroidRuntime(1549):     at android.os.Handler.handleCallback(Handler.java:725)
12-08 19:51:16.904: E/AndroidRuntime(1549):     at android.os.Handler.dispatchMessage(Handler.java:92)
12-08 19:51:16.904: E/AndroidRuntime(1549):     at android.os.Looper.loop(Looper.java:137)
12-08 19:51:16.904: E/AndroidRuntime(1549):     at android.app.ActivityThread.main(ActivityThread.java:5039)
12-08 19:51:16.904: E/AndroidRuntime(1549):     at java.lang.reflect.Method.invokeNative(Native Method)
12-08 19:51:16.904: E/AndroidRuntime(1549):     at java.lang.reflect.Method.invoke(Method.java:511)
12-08 19:51:16.904: E/AndroidRuntime(1549):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
12-08 19:51:16.904: E/AndroidRuntime(1549):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
12-08 19:51:16.904: E/AndroidRuntime(1549):     at dalvik.system.NativeStart.main(Native Method)
12-08 19:51:16.904: E/AndroidRuntime(1549): Caused by: java.lang.reflect.InvocationTargetException
12-08 19:51:16.904: E/AndroidRuntime(1549):     at java.lang.reflect.Method.invokeNative(Native Method)
12-08 19:51:16.904: E/AndroidRuntime(1549):     at java.lang.reflect.Method.invoke(Method.java:511)
12-08 19:51:16.904: E/AndroidRuntime(1549):     at android.view.View$1.onClick(View.java:3592)
12-08 19:51:16.904: E/AndroidRuntime(1549):     ... 11 more
12-08 19:51:16.904: E/AndroidRuntime(1549): Caused by: java.lang.IllegalStateException: System services not available to Activities before onCreate()
12-08 19:51:16.904: E/AndroidRuntime(1549):     at android.app.Activity.getSystemService(Activity.java:4463)
12-08 19:51:16.904: E/AndroidRuntime(1549):     at nc.prog1415.Networking.isWirelessConnected(Networking.java:14)
12-08 19:51:16.904: E/AndroidRuntime(1549):     at nc.prog1415.Main.hotshotBtns(Main.java:109)
12-08 19:51:16.904: E/AndroidRuntime(1549):     ... 14 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T19:37:17.670

很可能`netwrk.wireless()`是返回 null 并导致`NullPointerException`.

我会将您的`wireless()`方法更改`isWirelessConnected()`为如下

```
public boolean isWirelessConnected() {
    ConnectivityManager cm = (ConnectivityManager)getSystemService(Context.CONNECTIVITY_SERVICE); 
       NetworkInfo mwifi = cm.getNetworkInfo(ConnectivityManager.TYPE_WIFI);

    if ( mwifi == null )
        return false;
    else
        return mwifi.isConnected();
} 
```

然后在主类中，只需执行

```
Networking netwrk = new Networking();
if( netwrk.isWirelessConnected() ) {
    Intent brwoserIntent = new Intent(Intent.ACTION_VIEW, Uri.parse("http://www.own3d.tv/HotshotGG"));
    startActivity(brwoserIntent); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T20:11:19.987

来自 LogCat：

> 系统服务在之前的活动中不可用`onCreate()`

这个错误是不言自明的，所以把你的代码改成这样：

```
ConnectivityManager cm; 

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    cm = (ConnectivityManager)getSystemService(Context.CONNECTIVITY_SERVICE);
    ...
} 
```

* * *

**此外**
，您的网络扩展了 Main，我认为这是一个 Activity。既然你不想要你正在做的事情的完整活动，你应该采取不同的策略。您应该在构造函数中传递 Networking a Context ：

```
public class Networking {
    Context context;

    public Networking(Context con) {
        context = con;
    }

    public boolean isWirelessConnected()
    {
        cm = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE); 
        NetworkInfo mwifi = cm.getNetworkInfo(ConnectivityManager.TYPE_WIFI);
        if(mwifi == null)
            return false;
        else 
            return mwifi.isConnectedOrConnecting();
    }

    // etc
} 
```

请注意，我切换到`context.getSystemService()`您在创建对话框时也需要这样做。

现在改变你使用这个方法的方式：

```
Networking netwrk = new Networking(this);
if(netwrk.isWirelessConnected()) 
```

# jquery - 使用 jquery 检查 div 内部是否有 img 元素

> ID：13781073
> 
> 赞同：1
> 
> 时间：2012-12-08T19:30:31.673
> 
> 标签：jquery, jquery-ui, drag-and-drop

我正在使用 jquery 将图片拖放到目标 div。

我有一个按钮，它调用一个应该检查图像是否在 div 内的函数，但我无法让它正常工作。

我正在尝试执行以下操作：

```
<script>
    ....

    $( '#check' ).click(function(){
        if($("#droptarget:has(img.img1)")){
            alert("yes");
        }else{
            alert("no");
        }
    });
</script>

<img id="img1" class="img1" src="image.png">
<div id="droptarget"></div>
<a href="javascript:" id="check">check</a> 
```

我的代码有什么问题？

编辑：总是在第一个条件下进入警报（“是”），没有 div 内的图像

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-08T19:33:39.853

总是一个 jQuery 对象，`$()`让它变得真实，试试

```
$( '#check' ).click(function(){
    if($("#droptarget:has(img.img1)").length > 0){
        alert("yes");
    }else{
        alert("no");
    }
}); 
```

这将检查选择器是否有任何匹配项`#droptarget:has(img.img1)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T19:32:47.767

你的脚本在上面`#check`，所以点击事件没有被绑定。使用`$(document).ready`（或只是`$(...`）或只是将您的脚本移动到下面`#check`。

# character-encoding - 从谷歌应用脚 本发送 iso-8859-1 字符

> ID：13781074
> 
> 赞同：3
> 
> 时间：2012-12-08T19:30:48.773
> 
> 标签：character-encoding, google-apps-script

我正在尝试调用从谷歌应用脚​​本发送短信的服务。该服务需要 iso 8859-1 中的数据。下面的代码发送一条带有 åäö 作为坏字符的消息。

```
function sendSMS() {

  var doc = SpreadsheetApp.getActiveSpreadsheet();
  var cell = doc.getRange('b8');

  var payload = 
{
  "username" : "XXXX",
  "password" : "YYYY",
  "nr" : "0123123123",
  "type" : "text",
  "data" :  "Hello world...åäö" 

};

var options =
{
  "method" : "post",
  "payload" : payload
};

var response = UrlFetchApp.fetch("http://www.mosms.com/se/sms-send.php", options);
Browser.msgBox(response.getContentText());
}

function testFetch (){

var response = UrlFetchApp.fetch("http://www.google.com/");
Browser.msgBox(response.getContentText());

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T14:56:20.587

正如 Serge 在评论中链接到的另一个问题中提到的那样，您可以通过首先将字符串转换为 Blob 然后使用以下`getDataAsString()`方法来更改字符串的编码：

```
var result = Utilities.newBlob('Hello World').getDataAsString('ISO-8859-1'); 
```

# php - php 包含来自 index.html

> ID：13781082
> 
> 赞同：1
> 
> 时间：2012-12-08T19:32:32.873
> 
> 标签：php, path, server-side-includes

我正在尝试使用 php include 在网页上包含文章...我的文件结构如下所示：

1.  /文章

    *   /文章
        *   App_Template.html
    *   /标签
        *   /新的
            *   索引.html
    *   /包含
        *   文件.html

在 App_Template.html 我有一段代码：

```
<?php include("../including/File.html"); ?> 
```

当您访问 App_Template.html 时，它可以正常工作并显示正确的文章，但是代码：

```
<?php include(".../including/File.html"); ?> 
```

在新文件夹中的 index.html 中不起作用并引发以下错误：

```
Warning: include(.../including/File.html) [function.include]: failed to 
open stream: No such file or directory in 
/home/a1696768/public_html/articles/tags/new/index.html on line 79

Warning: include() [function.include]: Failed opening
 '.../including/File.html' for inclusion 
(include_path='.:/usr/lib/php:/usr/local/lib/php') 
in /home/a1696768/public_html/articles/tags/new/index.html on line 79 
```

我试图四处寻找原因，但是找不到任何原因说明为什么这在这里不起作用但在 App_Template.html 中，我唯一能想象的就是这与事实有关第二种情况是 index.html？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T19:36:51.000

您不能`...`在路径中使用三个点，它要么`..`用于上一级，要么`.`用于当前级别。如果您想向上 2 个文件夹/级别，请使用`../../yourfile`.

# c# - 为什么 C# 没有轻量级异常？

> ID：13781086
> 
> 赞同：5
> 
> 时间：2012-12-08T19:32:54.733
> 
> 标签：c#, .net, exception, error-handling

[人们常说](http://msdn.microsoft.com/en-us/library/ms229009%28VS.100%29.aspx)，由于[性能不佳](http://yoda.arachsys.com/csharp/exceptions2.html)，您不应该将异常用于常规错误处理。我的猜测是，糟糕的性能是由于必须实例化一个新的异常对象、生成堆栈跟踪等造成的。那么为什么不使用轻量级异常呢？像这样的代码在逻辑上是合理的：

```
string ageDescription = "Five years old";
try {
    int age = int.Parse(ageDescription);
}
catch (Exception) {
    // Couldn't parse age; handle parse failure
} 
```

然而，我们建议使用它`TryParse`来避免异常的开销。但是如果异常只是一个在线程启动时被初始化的静态对象，那么抛出异常的所有代码需要做的就是设置一个错误代码号，也许还有一个错误字符串。没有堆栈跟踪，没有新的对象实例化。这将是一个“轻量级异常”，因此使用异常的开销将大大减少。为什么我们没有这么轻量级的异常？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T19:44:41.137

异常对象实例化是整个案例中最小的问题。真正的性能杀手是控制流必须停止执行您的程序，并且必须在调用堆栈中查找可以捕获抛出异常的可能处理程序（捕获块），然后它必须执行正确的处理程序（以及它们的 finally 块） , 在被告知时重新抛出异常，然后在正确的位置继续执行程序，即在最后一个处理程序之后。您对“轻量级”异常的想法不会改变这一点，它甚至会减慢线程的创建速度，因为它必须创建和存储异常对象，并且会阻止按类型过滤异常，这现在是可能的。

通过使用 TryParse，您可以通过一个简单的条件子句避免所有这些，而且您实际上编写的代码更少，并且更容易阅读和推理。

例外是针对特殊情况的，在这种情况下，它们为日志/调试器提供了许多有用的信息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-08T19:54:00.507

性能下降不仅仅是因为您正在创建一个新的 Exception 对象。其中很多与发生异常时需要完成的堆栈的条件展开有关。

例如，考虑当您拥有捕获不同类型异常的异常处理程序时必须完成的工作。在堆栈中的每一点，当它从被调用者到调用者展开时，语言必须进行类型检查，不仅要查看是否可以处理异常，还要查看最合适的处理程序是什么。这本身就是一大笔开销。

如果你真的想要轻量级，你应该从你的函数中返回一个结果——这就是 Int32.TryParse() 所做的。没有堆栈展开，没有类型检查，只是一个可以轻松优化的简单条件。

**编辑：**需要注意的一件有趣的事情是 C# 是在 Java 之后创建的。Java 有几个有趣的构造，它们导致异常处理比我们在 C# 中看到的更复杂，即[检查异常](http://www.javapractices.com/topic/TopicAction.do?Id=129)和[throws](http://docs.oracle.com/javase/tutorial/essential/exceptions/declaring.html)关键字。一种有趣的读物。我（个人）很高兴 C# 没有包含这个“特性”。我的猜测是他们将异常处理程序分叉以提高性能。在现实世界中，据我所知，很多开发人员最终只是`throws exception`在他们的函数声明中指定。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-08T19:39:08.270

你应该`int.TryParse`在你的情况下使用。测试一些条件然后抛出和捕获异常更快、更易读。将异常用于异常情况，而不是用于常规验证。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-08T19:44:10.463

异常的问题不仅仅是生成异常本身，老实说，这甚至不是最耗时的部分。当您*抛出*异常时（在创建后），它需要展开通过每个范围级别的堆栈，确定该范围是否是会捕获此异常的 try/catch 块，更新异常以指示它通过了该部分堆栈，然后拆除堆栈的该部分。然后当然还有所有`finally`可能需要执行的块。使`Exception`自身存储更少的信息并不能真正简化任何事情。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-08T19:42:26.333

因为“重量级”异常提供的实用程序非常有用（哈哈）。我无法告诉你我有多频繁地希望能够在 C 语言中转储诸如堆栈跟踪之类的东西，而不必要求人们拉出调试器。

在事后（即在异常被要求捕获之后）生成诸如堆栈跟踪之类的东西是不可行的，因为一旦捕获到异常，堆栈就被展开——信息消失了。您需要有关故障点的信息；因此必须在故障点收集数据。

至于“新对象实例化”——与其他昂贵的异常功能（展开堆栈、堆栈跟踪、多个函数退出点等）相比，它是如此便宜，因此不值得担心。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-08T20:09:52.760

不建议您使用`TryParse`，而不是`Parse`因为性能。如果解析有任何可能失败（例如因为它是用户生成的输入），那么解析失败并不是*异常*的，这是可以预料的。顾名思义，例外是针对特殊情况的。对于应该早点发现但没有发现的东西，太出乎意料以至于你无法真正继续。

如果一个函数需要一个对象，但却`null`被传入，那么在这种情况下，正确的做法是由方法的设计者决定。如果参数是默认值的可选覆盖，程序可以继续并使用默认值或忽略该参数。但除此之外，程序应该简单地抛出一个`ArgumentNullException`.

在决定是否使用异常时，性能根本不应该成为考虑因素。这是一个意图和目的的问题。它们甚至没有那么慢，当然它们比添加两个整数要慢很多倍，但我仍然可以在我老化的 Core 2 Duo 上每秒抛出 50,000 个异常。如果使用异常成为瓶颈，那么您就没有以正确的方式使用它们。

# php - 在wordpress中将值插入数据库的问题

> ID：13781088
> 
> 赞同：1
> 
> 时间：2012-12-08T19:33:05.390
> 
> 标签：php, mysql, wordpress

嘿伙计们，所以我正在尝试将一些字符串插入到我的 wordpress 数据库中，它继续进行但没有发送任何内容，由于某种原因没有存储任何值。

这是代码：

```
$wpdb->query( $wpdb->prepare( 
    "
        INSERT INTO $wpdb->discount_info_guest
        ( firstname, lastname, email )
        VALUES ( %s, %s, %s )
    ", 
     $firstname, 
    $lastname, 
    $email 
) );
echo"working";
exit; 
```

让我知道你的想法，如果你需要任何其他信息。

谢谢！

数据库：

```
Field   Type    Collation   Attributes  Null    Default Extra   
ID  bigint(60)      UNSIGNED    No      auto_increment  
firstname   varchar(60) utf8_general_ci     No  
email   varchar(60) utf8_general_ci     No
discount_code_used  varchar(60) utf8_general_ci     No  
order_state varchar(10) utf8_general_ci     No  1

    Indexes:  
Keyname Type    Cardinality 
    PRIMARY  PRIMARY     0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T21:46:46.307

$wpdb->discount_info_guest 应该是 {$wpdb->prefix}discount_info_guest

# php - 将 php 数据传输到 xcode 应用程序

> ID：13781089
> 
> 赞同：0
> 
> 时间：2012-12-08T19:33:22.537
> 
> 标签：php, xcode

我正在尝试在我的网站上创建的 php 页面和我编写的 xcode 项目中的 NSData 对象之间传输数据。php页面非常简单：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr" lang="fr">
        <head>
             <title>Mon MEGA BLOG</title>
             <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
         </head>
         <style type="text/css">
    form
         {
             text-align:center;
         }
    </style>

    <body>

<?php echo 'Bonjour'; ?>

</body>
</html> 
```

我希望将“Bonjour”转移到我的数据对象中。从此时起，通过 $_GET 方法发送特定对象是毫无疑问的（尽管它已经在下面的代码中准备好了）。我只想用 echo 函数测试我的 php 页面的响应。我的xcode项目去：

```
if(![loginText.text isEqualToString:@""] && ![passwordText.text isEqualToString:@""])
    {
        //1\. creation de la request
        NSMutableString *string = [[NSMutableString alloc] initWithCapacity:200];
        NSString *string01 = @"http://attheshop.fr/index.php?prof=&pass="; 

        [string appendFormat:string01];
      NSString *string02 = loginText.text;
      NSString *string03 = passwordText.text;

        [string insertString:string03 atIndex:41];
        [string insertString:string02 atIndex:36];

        request01 =[NSURLRequest requestWithURL:[NSURL URLWithString:string]cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:60.0];

        NSLog(@"%@", string);
        //2.creation de la connection et start loading data

       NSURLConnection *connection01 = [[NSURLConnection alloc] initWithRequest:request01 delegate:self];

       if(connection01)
       {
        //3.Create NSMutableData to receive data
        receivedData = [NSMutableData data];
           NSLog(@"Voici ce que contient le message %@", receivedData.description); 
        }

    } 
}
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
    // This method is called when the server has determined that it // has enough information to create the NSURLResponse.
    // It can be called multiple times, for example in the case of a // redirect, so each time we reset the data.
    // receivedData is an instance variable declared elsewhere.
    [receivedData setLength:0];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
    // Append the new data to receivedData. // receivedData is an instance variable declared elsewhere. 
    [receivedData appendData:data];
}

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error
{

    // release the connection, and the data object 
    // inform the user 

    NSLog(@"Connection failed! Error - %@ %@",[error localizedDescription], [[error userInfo] objectForKey:NSURLErrorFailingURLStringErrorKey]);

    //set an alert
    UIAlertView *alert01 = [[UIAlertView alloc] initWithTitle:@"Probleme de connexion" message:@"La connexion a échoué" delegate:self cancelButtonTitle:@"Recommençer" otherButtonTitles:nil];
    alert01.alertViewStyle = UIAlertViewStyleDefault;
    [alert01 show];
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection {

    // do something with the data // receivedData is declared as a method instance elsewhere 

    NSLog(@"Succeeded! Received %d bytes of data",[receivedData length]);

    //6.Mettre les informations téléchargées dans un objet data envoyé à home.

    NSData *response = [NSURLConnection sendSynchronousRequest:request01 returningResponse:nil error:nil];
    //NSLog(@"response %@", response.description);

    NSString *get = [[NSString alloc] initWithData:response encoding:NSUTF8StringEncoding];
    NSLog(@"get %@", get.description);

    NSString *string04 = @"error";
    NSPredicate *errorTest = [NSPredicate predicateWithFormat:@"SELF CONTAINS %@", string04];
    BOOL defError = [errorTest evaluateWithObject:get];

    NSLog(@"%i",defError);

    if (!defError) 
    {
        //Si pas d'erreur, on lance le segue
        [self performSegueWithIdentifier:@"loginMainSegue" sender:self];
    }

    //5.Si mauvais login ou password message alerte erreur

    if (defError) 
    {
        UIAlertView *alert02 = [[UIAlertView alloc] initWithTitle:@"Erreur" message:@"Votre login ou votre password est erroné" delegate:self cancelButtonTitle:@"Recommençer" otherButtonTitles:nil];
        alert02.alertViewStyle = UIAlertViewStyleDefault;
        [alert02 show];        
    }

} 
```

我想知道为什么响应对象包含整个 php 页面，而不是应该显示的唯一单词“Bonjour”。

谢谢您的答复

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T20:33:49.903

如果您只想要 PHP 位，请删除页面上非 PHP 的所有其他内容。您发出的请求会获取该 HTTP 请求中的所有内容，而不仅仅是 PHP 位。这包括您在页面上拥有的 HTML。

或者，使用 JSON 来移动数据。`json_encode()`它从 PHP 端，然后使用 JSONKit 之类的东西在 Xcode 端对其进行解码。

# c# - 文本包含括号时出现问题（可能还有其他特殊字符）

> ID：13781093
> 
> 赞同：3
> 
> 时间：2012-12-08T19:33:39.690
> 
> 标签：c#, regex

我有以下表达式：`[^(\r\n)]*`识别任何不包含`\r\n`. 但是，当文本包含`(`或`)`无法识别时。

例子：

1.  `"I have following expression to recognize any text."`将被识别OK。
2.  `"I have following expression (A) to recognize any text."`不会被识别。

因此，我想要完整的文本：`"I have following expression (A) to recognize any text."`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T19:36:31.543

删除`(` 和`)`。在您的字符类`[]`中，它们是文字的，而不是被视为元字符。

您可以使用**[积极的前瞻](http://www.regular-expressions.info/lookaround.html)**，`\r\n`并使用以下方法捕获其余部分：

```
(.*)(?=\r\n) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T19:58:02.627

用于[`Regex.Escape`](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.escape.aspx)在运行正则表达式之前处理输入。此方法专门用于“去除”正则表达式中具有特殊含义的任何字符，以便输入始终转换为与文字字符串匹配的内容。

# php - 使用用户更改密码表单更新 sql 表中的用户 md5 密码

> ID：13781096
> 
> 赞同：0
> 
> 时间：2012-12-08T19:33:52.010
> 
> 标签：php, sql, session-variables, change-password

我正在创建一个用户表单和表单操作，用户（已经使用会话变量登录）可以更改他们的 md5（我知道 MD5 已过时且不安全，这是出于测试目的）存储在 sql 数据库“用户”中的加密帐户密码桌子。

我有一个要求输入“currentpassword”、“newpassword”和“confirmnewpassword”的表格。该表单使用 $_POST 将输入的数据传递给 passwordaction.php。

用户名是从 $_SESSION 'autheticatedUser' 获取的，密码是从之前的 $_POST 表单变量获取的。然后我使用 sql 语句从数据库中获取密码以与“currentpassword”变量进行比较，这算作不安全的客户端验证吗？?

然后我有一个 SQL UPDATE 语句来更新数据库中指定用户的密码行，并使用 $_SESSION 标头重定向用户并通知成功或失败。

我一直在阅读和重新阅读我的代码，试图找出我出错的地方，因为当我尝试更改用户帐户密码时，我不断返回我的登录页面（使用 $SESSION 标头）告诉我它已正确更新但是当我检查数据库密码尚未更新。

我希望其他人的观点或观点可以帮助我了解我错过了什么，有人可以建议为什么我的 sql UPDATE 语句不起作用？

欢迎任何建设性的批评

下面是我的“动作”php页面的代码

```
 <?php

session_start();

$username = $_SESSION["authenticatedUser"];
$currentpassword = md5($_POST['currentpassword']);
$newpassword = md5($_POST['newpassword']);
$confirmnewpassword = md5($POST['confirmnewpassword']);

/* make a connection with database */
$con = mysql_connect("localhost", "root", "") or die(mysql_error());

/* select the database */
mysql_select_db("groupproject") or die(mysql_error());

$queryget = mysql_query("SELECT password FROM users WHERE username='$username'") or 
die(mysql_error());
$row = mysql_fetch_assoc($queryget);
 $currentpasswordDB = $row['password'];

//check passwords

if ($currentpassword==$currentpasswordDB)

{
if ($newpassword==$confirmnewpassword)
{
//success, change password in DB
    $querychange = mysql_query("UPDATE users SET password='$newpassword' WHERE       
 username='$username'") or die(mysql_error());
}
else header("Location: passwordmismatch.php");

if ($querychange == true){

    $_SESSION["passchange"] = "Your password has been changed, Please Log in";

    header("Location:login.php");

}

else $_SESSION["nopasschange"] = "Your password could not be changed, Please try   
again";
 header("Location:userchangepassword.php");

}

else header("Location: passwordmismatch.php");

mysql_close($con);

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T19:38:51.293

`$user`并且`$username`是不同的变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-21T11:39:09.143

有点晚了：P

但在行 $confirmnewpassword = md5($POST['confirmnewpassword']);

它应该是

$confirmnewpassword = md5($_POST['confirmnewpassword']);

# c# - 没有泛型的参数约束

> ID：13781099
> 
> 赞同：-3
> 
> 时间：2012-12-08T19:34:18.840
> 
> 标签：c#, oop

鉴于以下示例...

```
public class Example
{
    public static T GetDefaultValue<T>()
    {
    // return ???
    }
} 
```

在不使用泛型的情况下，我可以使用什么方法将传入 GetDefaultValue 函数的类型限制为具有实现 IDisposable 的无参数构造函数的类？我将如何实例化该类型的实例以从 GetDefaultValue 函数返回？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T19:37:18.310

我对您的意思感到困惑..但是您可以将类型限制为接口，而不是使用泛型（没有泛型？）。

```
public ISomeInterface GetDefaultValue(ISomeInterface theObject)
{
  ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T20:14:36.647

使用泛型，你可以做

```
public static T GetDefaultValue<T>() where T : new(), IDisposable
{
   return new T();
} 
```

但是，无论您设置`T`为哪种类型，都必须具有默认构造函数。这样，调用`GetDefaultValue()`将为您提供所需的精确类型，而无需像`GetDefaultValue()`返回`IDisposable`.

我假设您不想要泛型解决方案，因为实例化泛型类型的能力并不为人所知。我个人偶然发现了这个，男孩，它是救生员吗！

# ios - 自定义 UICollectionViewCell 无法设置属性值

> ID：13781109
> 
> 赞同：0
> 
> 时间：2012-12-08T19:35:00.943
> 
> 标签：ios

我正在尝试在我的自定义上设置一个属性`UICollectionViewCell`：

```
-(UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath {

    // Setup cell identifier
    static NSString *cellIdentifier = @"IgCell";

    PAInterestGraphCell *cell = (PAInterestGraphCell *)[collectionView dequeueReusableCellWithReuseIdentifier:cellIdentifier forIndexPath:indexPath];

    cell.interestCategory = [self.dataArray objectAtIndex:indexPath.row];

    // Return the cell
    return cell;

} 
```

`PAInterestGraphCell`代码：

```
@interface PAInterestGraphCell : UICollectionViewCell

@property (atomic, retain) PAInterestCategory *interestCategory;

@end

#import "PAInterestGraphCell.h"
#import "PAScaleView.h"

@implementation PAInterestGraphCell

@synthesize interestCategory;

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
        PAScaleView *scaleView = [[PAScaleView alloc] initWithFrame:frame];
        scaleView.backgroundColor = [UIColor clearColor];
        scaleView.interestCategory = self.interestCategory;

        [self.contentView addSubview:scaleView];
    }

    return self;
}

/*
// Only override drawRect: if you perform custom drawing.
// An empty implementation adversely affects performance during animation.
- (void)drawRect:(CGRect)rect
{
    // Drawing code
}
*/

@end 
```

但是当我访问它的`interestCategory`属性时，`initWithFrame`它已经失去了所有的价值。

我在这里遗漏了一些明显的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T19:38:16.750

在“”方法结束之前， “ `@synthesize`”访问器可能不会完全创建`init`，因此如果您需要在“ `init`”方法期间访问它们，则需要使用静态变量或 ivar（然后让您的“ `@synthesize`”指向它们并在“ `self.`”之外的所有内容中使用“ `init`”）。

另外，您想要访问`interestCategory`在对象实例化和初始化之前无法设置的“”属性似乎有点毫无意义。或者那是你在剪切和粘贴中遗漏的一行代码？

# c# - 为什么我的数据没有使用实体框架保存

> ID：13781116
> 
> 赞同：1
> 
> 时间：2012-12-08T19:35:40.543
> 
> 标签：c#, jquery, asp.net-mvc, asp.net-mvc-4, entity-framework-5

我有以下课程

```
 public class Expense
{
    public Guid ExpenseId { get; set; }
    public DateTime date { get; set; }
    public string type { get; set; }
    public int cost { get; set; }
    public string extra { get; set; }
} 
```

我将数据从网页发布到 cntroller 方法，该方法将此数据保存在数据库中，如下所示：

```
 public string SaveExpense(Expense obj)
    {
        obj.ExpenseId = Guid.NewGuid();
        if (ModelState.IsValid)
        {
            context.expenses.Add(obj);
            context.SaveChanges();
            return "Saved";
        }
        else
            return "Error";   
    } 
```

费用 obj 是使用 AJAX 和 JQuery 从网页发布的。数据正确进入控制器方法，但未保存在数据库中。我怎样才能保存这些数据？此外，我在保存数据的同时创建了 ExpenseId，因此记录可能是重复的，但会有不同的 ExpenseId。请建议我一种方法来克服这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T19:38:31.750

您没有保存所做的更改。

1.  试试这个： context.SaveChanges();

    从[文档](http://msdn.microsoft.com/en-us/library/bb336792.aspx)中：

    > 公共 int SaveChanges()
    > 
    > //保持对数据源的所有更新并重置对象上下文中的更改跟踪。

2.  检查函数的返回值以确认它是否被保存。

    > 类型：System.Int32 调用 SaveChanges 时处于已添加、已修改或已删除状态的对象数。

3.  如果没有保存，则将代码放在 try-catch 块中并记录异常以检查问题所在。

希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T19:39:14.663

调用`SaveChanges()`您的`context`对象以保存您的更改。

# jsf - JSF 与 Spring MVC 的优势是什么？

> ID：13781119
> 
> 赞同：2
> 
> 时间：2012-12-08T19:36:04.677
> 
> 标签：jsf, spring-mvc

我试图弄清楚除了 JSF 实现提供的一组不同的 UI 组件之外，将 JSF 与 Spring MVC 一起使用的优势是什么？两者都是 MVC，并且都具有不同的透视导航处理方式（两者都很容易理解）。假设我在我的应用程序中同时使用 JSF 和 Spring MVC，对设计、实现和维护有什么好处？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-08T20:10:09.690

它们都是 MVC，但是 JSF 是面向组件的，而 Spring MVC 是基于动作的。

您最好自己查找这些术语的确切含义，但简而言之，JSF 允许 UI 由高级可视化构建块（滑块、面板、进度条等）组合而成。

Spring MVC 对实际的 UI 并没有说太多。它强调一个控制器，您将其映射到 URL 路径及其参数。处理后，您直接/转发到呈现视图的内容（通常是 JSP，但最近经常使用 Thymeleaf）。

JSF 是 Java EE 的一部分，它还附带一个框架，该框架具有某种 Spring MVC 的“类到 URL”绑定方面；JAX-RS。JAX-RS 本身既不是 MVC 也不是基于请求的 Web 框架，而是一个 Web 服务框架。

在一个应用程序中使用两个不同的 Web 框架非常令人困惑，我不推荐这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T20:32:46.817

等人！！！

MVC 是一种架构模式，它在以下之间创建概念划分（在应用程序架构中）：

*   **模型**：提供访问应用程序使用的数据的方法
*   **View**：处理模型中包含的数据的显示，并管理与用户和代理的交互
*   **控制器**：接收用户的命令（通常通过视图）并实现改变其他两个组件的状态

除其他外，该方案还意味着应用程序逻辑（在此上下文中通常称为“业务逻辑”）之间的传统分离，控制器和模型之外，以及加载视图的用户界面

所以 MVC 是一种架构模式，与特定语言或特定技术无关。Spring MVC 是一个实现这种模式的 Java 框架！！！

好的，对于视图，我们可以使用不同的技术，包括 JSF（Java Server Faces），它为您提供一些预制组件（由特定的视图框架实现），您必须直接在视图中使用标记库声明这些组件。

现在有许多从 JSF 派生的免费 View 框架，例如 PrimeFaces 和 IceFaces。

JSP及其衍生的所有框架都原生支持对程序员隐藏的AJAX，开发者无需担心

我建议你看一下 PrimeFaces 组件展示，它向你解释了这种视图技术的所有力量：

[http://www.primefaces.org/showcase/ui/home.jsf](http://www.primefaces.org/showcase/ui/home.jsf)

例如，您可以在不深入了解 AJAX FORM 的情况下处理它，尤其是在不了解或使用 Javascript 的情况下。

这是您可以在展示中找到的最简单的 AJAX 表单示例：http: [//www.primefaces.org/showcase/ui/pprUpdate.jsf](http://www.primefaces.org/showcase/ui/pprUpdate.jsf)

使用这种视图技术，您可以将许多组件用于表单、菜单和许多其他内容

主要优点是不必编写一行 JavaScript 来代替组件

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T21:56:13.280

我不会重复其他答案的定义。JSF（及其组件套件）可帮助您更快地构建应用程序，因为您的工作只是将所有内容粘合一次，然后专注于业务规则（或为您的应用程序增加价值）并通过组合组件来构建 UI。您没有主要针对 Javascript 测试您的组件或 Concert。

在 Spring MVC 中，您起步缓慢，但它提供了很大的自由来实现您想要的任何东西，而不是依赖于组件（主要是与 JSF 通信的 Javascript UI），甚至可以毫不费力地实现 Web 服务。但是您将不得不测试、测试和测试这样的 UI 结构。

如果您正在寻找混合动力，也许[Spring Web Flow](http://www.springsource.org/spring-web-flow)会有所帮助。有了它，您可以使用 JSF 组件和 Spring MVC 控制器的一个很好的抽象层，甚至如果您愿意，您仍然可以使用它们。

# php - 将分钟添加到 PHP 日期时间以计算事件的开始/结束

> ID：13781120
> 
> 赞同：7
> 
> 时间：2012-12-08T19:36:10.283
> 
> 标签：php, dateinterval

我想用 PHP 计算事件的开始和结束日期时间。我得到了这个事件的开始以及添加到结束的持续时间。所以我尝试了以下代码：

```
$startTime = $this->getStartTime();
$endTime = $this->getStartTime();

$endTime->add(new DateInterval('PT75M')); 
```

在本例中，我将开始时间加上 75 分钟，然后计算事件的结束时间。它有效，但它也编辑开始时间。我在 PHP 文档中读到 ADD 方法编辑了被调用的对象，但我不明白它如何编辑 startEdit 变量。我在示例中编写的任何方法中都没有使用引用，在 getStartTime 函数中也没有

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-08T19:41:31.730

您必须为此创建一个新的 DateTime 实例，否则您将编辑对开始日期 DateTime 对象的原始引用。尝试这样的事情：

```
$endTime = clone $startTime;
$endTime->add(new DateInterval('PT75M')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-02T21:14:41.643

如果可以更改`getStartTime()`方法的返回类型，我强烈建议将其从 更改`\DateTime`为`\DateTimeImmutable`.

然后代码将如下所示：

```
$endTime = $startTime->add(new DateInterval('PT75M')); 
```

[这篇 Nikola Poša 的博客文章很好地描述](https://www.nikolaposa.in.rs/blog/2019/07/01/stop-using-datetime/)了这种方法的更多示例和优点。

# ruby - 将数组打印为堆栈

> ID：13781122
> 
> 赞同：-3
> 
> 时间：2012-12-08T19:36:22.600
> 
> 标签：ruby, arrays, stack

我试图按空格分割一个句子，将其存储到任何数组中，然后将其打印为堆栈（向后）。

这是我的尝试：

```
sentence =  "The quick fox "    
stack = sentence.split
print stack.pop until stack.empty? # => fox quick The 
```

这对我来说看起来有点奇怪，我不确定你们是否可以向我推荐一个更好的解决方案？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T19:51:08.073

怎么样：

```
"The quick fox ".split.reverse.join(" ") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T19:41:02.633

在每个单词后添加一个空格：

```
sentence =  "The quick fox "
stack = sentence.split
until stack.empty?
  print stack.pop
  print ' ' unless stack.empty?
end
# => fox quick the 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T19:48:50.940

```
s = "The quick fox "
stack = s.split
until stack.empty? do stack.shift end 
```

`shift`, 而不是`pop`你要找的。

附加智慧：就像`pop`有一个对应的`push`，`shift`有一个对应的`unshift`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-08T20:36:37.687

```
stack = "The quick fox ".split
stack.size.times{ puts stack.pop } 
```

但我更喜欢 OP 的`pop until empty?`语法

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-08T20:40:18.603

```
print *"The quick fox ".strip.split.reverse.map{|w| " #{w}"} 
```

但是您对堆栈和打印它们的要求是相互矛盾的。当你有一个列表时，Ruby 的标准输出方式（除了检查）是在不同的行上输出每个项目，如下所示：

```
puts "The quick fox ".strip.split.reverse 
```

# java - Buildr 因“无法下载 ant”而失败

> ID：13781123
> 
> 赞同：2
> 
> 时间：2012-12-08T19:36:28.560
> 
> 标签：java, buildr

尝试构建此项目时：

```
project_layout = Layout.new
project_layout[:source,:main,:java] = 'src'
project_layout[:source,:test,:java] = 'test'

define 'hausaufgaben', :layout => project_layout do
    project.version = '1.0'
    package :jar
end 
```

我收到此错误：

```
RuntimeError : Unable to download org.apache.ant:ant:jar:1.8.3\. No remote repositories defined. 
```

从这条消息中，我收集到 buildr 在内部使用 ant（奇怪，我以为它使用 Rake 进行构建）。[快速入门](http://buildr.apache.org/quick_start.html)没有提到这一点。更烦人的是我已经有了 ant（1.8.2 而不是 1.8.3，但这不应该有那么大的区别），而且奇怪的是只要 buildr 没有找到任何 java 文件就没有抱怨（通过将布局保留为其默认值对此进行了测试）。

现在到实际问题：我*是否*必须添加一个构建器可以找到 ant 的存储库，或者我可以这样做吗？

作为记录：我安装了 buildr`jruby -S gem install buildr`并使用`jruby -S buildr package`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T19:38:09.953

正如 Rhett 所指出的，Buildr 在幕后使用 Ant 来实现它的一些任务，并会在需要时尝试下载所需的库。

我通常在构建文件中注册一个远程存储库，以便构建知道从哪里下载库，如果它还没有在本地缓存。因此，请尝试将以下内容添加到您的构建顶部。

```
repositories.remote << 'http://repo1.maven.org/maven2' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T02:13:47.973

Buildr 使用 Rake 进行任务依赖评估和执行。但是，Rake 不知道如何专门构建 Java 项目。Buildr 不是重写它在 ruby​​ 中支持的每个任务，而是使用 ant 任务来实现它自己的一些任务。（我能想到的一个是运行 JUnit 测试；我相信还有其他的。）所以，Buildr 需要 Ant。

您可以添加适当的远程存储库或确保正确版本的 ant jar 位于将使用您的构建文件的每台机器的 m2 缓存中。对于错误消息中的工件，预期路径为`$HOME/.m2/repository/org/apache/ant/ant/1.8.3/ant-1.8.3.jar`.

请注意，ant 可能不是 buildr 将尝试下载的唯一依赖项。如果您不想定义远程存储库，则必须为每个依赖项执行此手动解析。

（请注意，如果您在没有构建文件的目录中运行 buildr，它会为您生成一个。它生成的将有一个适当的远程存储库设置。）

# java - try-catch 块不抑制 java.lang.NullPointerException

> ID：13781129
> 
> 赞同：3
> 
> 时间：2012-12-08T19:36:49.883
> 
> 标签：java

我收到了 java.lang.NullPointerException，但我不知道为什么。我正在尝试使用 try-catch 块，但它不起作用。谁能解释这个块有什么问题？

```
public PriceDataAdder(Connection conn) {
        try {
            this.conn = conn;
            statement = conn.prepareStatement("INSERT INTO `blah` (a,b,c,d,e,f,g,h,`i`,j) VALUE( ?,?,?,?,?,?,?,?,?,? )");
        } catch (SQLException ex) {
            Logger.getLogger(PriceDataAdder.class.getName()).log(Level.SEVERE, null, ex);
        }
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-08T19:38:15.493

尝试捕捉`Exception`而不是`SQLException`. 它将起作用，因为它`Exception`是所有异常的超类，并且通过捕获它，您可以捕获所有可能在`try`块内生成的异常。

无论如何，问题可能是由于在`conn`被调用`null`的地方引起的`prepareStatement()`，首先确保您传递了调用`Connection`该`PriceDataAdder`方法的正确实例。

还请查看正在生成的日志，该`Logger`对象应该得到很好的利用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-08T19:38:26.167

您只是在捕获`SQLException`对象，而`NullPointerException`不是`SQLException`. 您也可以插入`NullPointerException|`以捕获它们；请参阅[http://docs.oracle.com/javase/7/docs/technotes/guides/language/catch-multiple.html](http://docs.oracle.com/javase/7/docs/technotes/guides/language/catch-multiple.html)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-08T19:42:36.737

You should manage your exception like the below code

```
try {
    this.conn = conn;
    statement = conn.prepareStatement("INSERT INTO `blah` (a,b,c,d,e,f,g,h,`i`,j) VALUE( ?,?,?,?,?,?,?,?,?,? )");
} catch (SQLException ex) {
    Logger.getLogger(PriceDataAdder.class.getName()).log(Level.SEVERE, null, ex);
    } catch (NullPointerException ex) {
        Logger.getLogger(PriceDataAdder.class.getName()).log(Level.SEVERE, null, ex);
    } catch (Exception ex) {
        Logger.getLogger(PriceDataAdder.class.getName()).log(Level.SEVERE, null, ex);
    } 
```

# android - Android：关于根据用户选择使用不同的字符串

> ID：13781136
> 
> 赞同：0
> 
> 时间：2012-12-08T19:37:46.150
> 
> 标签：android, string

您可以通过这种方式使用字符串：`" R.string.*"`或在 xml 中：`"android:text=@strings/*"`- 对吗？

它们都从一个名为 strings 的固定文件中取出它们的值，你把它们都放在那里对吗？

假设我有一个可以更改语言的应用程序。有没有办法可以更改该字符串文件？假设有一个用于英语的字符串文件和一个用于法语或任何东西的字符串.. 所以我仍然可以使用`R.string.*`and`@string/*`但我会得到不同的值取决于用户的选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T19:41:50.217

[本地化](http://developer.android.com/guide/topics/resources/localization.html#creating-alternatives)开发人员指南涵盖了这一点。

简而言之，使用相同的字符串名称，但具有不同的语言环境文件夹，例如：

*   `res/values/strings.xml`对于默认语言
*   `res/values-fr/strings.xml`法语
*   `res/values-ja/strings.xml`日语

操作系统将为`R.string.hello`您加载适当的语言。

# javascript - 如果 从 HTML 文档中删除，然后重定向到新网页

> ID：13781138
> 
> 赞同：2
> 
> 时间：2012-12-08T19:37:47.960
> 
> 标签：javascript, html

如果从 HTML 文档中删除特定`<div id>`内容，我希望用户使用 JavaScript 将其重定向到新网页。

例如：

```
<div id="credits"></div> 
```

如果有人删除它，那么用户将被自动重定向到我的网站。

这是为了保护版权。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T19:40:01.760

您可能做的最好的事情就是轮询该 div 的存在，如果它不存在则重定向。另外，根据菲利普的评论，一定要检查它是否真的可见。

但是当然任何用户都可以关闭这个脚本，所以我真的不确定它是否值得付出努力。

```
setInterval(function(){
    if (!$('#credits:visible').length) window.location.href = 'wherever.com';
}, 3000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T21:03:06.207

你想要一个 MutationObserver，但它没有得到广泛支持：http: [//jsfiddle.net/xNAXd/](http://jsfiddle.net/xNAXd/)。

```
var elem = document.getElementById("credits");

new MutationObserver(function(mutations) {
    for(var i = 0; i < mutations.length; i++) {
        var index = Array.prototype.indexOf.call(mutations[i].removedNodes, elem);
        if(~index) {
            alert("Deleted!");
            break;
        }
    }
}).observe(elem.parentNode, {
    childList: true
}); 
```

# php - php html表格Q

> ID：13781141
> 
> 赞同：-3
> 
> 时间：2012-12-08T19:38:06.880
> 
> 标签：php

我正在尝试使用 PHP 循环创建一个 (10*10) 表

这是我的代码

```
$i=0;
$x=0;

echo "<table>";
while ($i<10)
{
echo "<tr>";

while ($x<10)
{
echo "<td>2";
echo "<td>";
$x++;
}

echo "</tr>";
$i++;
}
echo "</table>"; 
```

为什么它只回显标签

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T19:41:02.783

你写错了结束`<td>`标签

```
$i=0;
$x=0;

echo "<table>";
while ($i<10)
{
    echo "<tr>";

    while ($x<10)
    {
        echo "<td>2";
        echo "</td>";
        $x++;
    }

    echo "</tr>";
    $i++;
}
echo "</table>"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T19:41:07.143

我看到在您的内部 while 循环中，您忘记`<td>`用`</td>`. 试试看，让我们知道。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T19:47:30.037

If your $i and $x variables are set, it's far better to do this with for-loops, E.g:

```
echo '<table>';
for($row = 0; $row < 10; $row++) {
    echo '<tr>';
    for($column = 0; $column < 10; $column++) {
        echo '<td>';
        echo '</td>';
    }
    echo '</tr>';
}
echo '</table>'; 
```

# php - osTicket 无法访问邮箱中的文件夹

> ID：13781152
> 
> 赞同：1
> 
> 时间：2012-12-08T19:38:50.113
> 
> 标签：php, pop3, mail-server, ticket-system, horde

我在我的网站上使用[osTicket](http://osticket.com)作为票务系统。希望这里有人能够帮助我。我在 osTicket 中设置了一封电子邮件，以便可以自动检索电子邮件。提取工作正常，但我面临这些问题：

1.  邮件获取：

    一个。有时提取工作，我可以看到新票。

    湾。有时电子邮件会从邮箱中删除（因为我选择了“删除提取的电子邮件”）但没有创建票证。

    C。有时会创建票证，我可以在数据库中看到它，但它不会自动分配给任何人，尽管在 HelpTopics 中选择了用户进行自动分配。

2.  我无法在邮件帐户页面中为获取的电子邮件设置“移至”。当我输入文件夹名称并单击保存时，它会给出错误“无效或未知的存档文件夹！” 和“无效或未知的邮件文件夹！>> 邮箱为空”错误。我从 Horde 创建了该文件夹，但由于某种原因，我猜 osTicket 无法访问该文件夹。这是协议为 POP 的时候。

3.  如果我选择 IMAP 并单击保存，我会得到：警告：imap_open() [function.imap-open]：无法在 /home/admin/lifeemail 中打开流 {localhost:110/imap/novalidate-cert}INBOX。 com/support/include/class.mailfetch.php 在页面顶部的第 130 行和设置表的下方我以红色显示：[CLOSED] IMAP 连接中断（服务器响应）

第2点是令人头疼的主要问题。我尝试从 Google 和 osTicket 论坛获得帮助（它不是很活跃），但我什么也没得到。

我正在使用 1.7 RC3。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-25T09:32:53.730

尝试以这种方式键入文件夹名称：

收件箱.myfolder

应该管用！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-31T14:03:03.507

为您解决了 #2，“当我输入文件夹名称并单击保存时，它会给出错误‘无效或未知的存档文件夹！’ 和“无效或未知的邮件文件夹！>> 邮箱为空”错误。”

我也无法在“移动到文件夹”字段中输入文件夹名称。我通过单击该字段并在键入文件夹名称时按住鼠标键来解决它。

# ruby - 我怎样才能巩固这个表达？

> ID：13781154
> 
> 赞同：1
> 
> 时间：2012-12-08T19:38:54.050
> 
> 标签：ruby, regex

我正在删除乐队名称的初始“The”和空格以连接到一个 url。我有这个，但它很难看，我想合并成一个表达式。

```
@artist.sub!(/[Tt]he/, '')
@artist.gsub!(/\s+/, '') 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T19:44:59.207

尝试：

```
@artist.gsub!(/(\A[Tt]he)|(\s+)/, '') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-08T19:47:14.983

你当然可以链式`#sub`和`#gsub`表达式；例如，

```
@artist = @artist.sub(/^[Tt]he/, '').gsub(/\s+/, '') 
```

如果更紧凑，我会毫不犹豫地称其为优雅——只是聪明（而且不清楚）。

注意使用`#sub`and`#gsub`而不是`#sub!`and `#gsub!`。根据@pguardiario 的评论，如果没有匹配，后两个将返回 nil，从而导致`NoMethodError`异常。另外，请注意，它有一个锚点，以防止“The”从字符串的中间被移除。

如果您尝试创建用于 URL 的 slug，则最好使用库中的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-09T01:18:34.047

我会去：

```
@artist = @artist.sub(/\Athe\b/i, '').strip 
```

# wordpress - 在 Wordpress 模板中使用自定义字段

> ID：13781160
> 
> 赞同：0
> 
> 时间：2012-12-08T19:39:46.893
> 
> 标签：wordpress, wordpress-theming, custom-fields

我正在创建一个 WordPress 网站，我需要模板根据我为每个页面设置的“自定义字段”做一些不同的事情。对我来说，最简单的方法是在这些页面上设置自定义字段的 php 值，然后我可以在整个模板文件中使用这些值。

[我在WP 文档](http://codex.wordpress.org/Using_Custom_Fields)中找到的最接近的是：

```
<?php $key = "Random_Key_I_Need_Here" echo get_post_meta($post->ID, '$key', true); ?> 
```

这与我需要的键的值相呼应，但我需要的是 PHP 值中的值，以便我可以在整个模板中使用它来指示某些标签/内容。基本上，我如何才能准确地获得上述脚本在 PHP 值中所做的事情，而不是回显它？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T19:46:01.797

你可以把它变成一个变量。

```
$key = "Random_Key_I_Need_Here";
$metaValue = get_post_meta($post->ID, '$key', true); 
```

# c# - 如何使用不同的主键/外键加入表

> ID：13781174
> 
> 赞同：2
> 
> 时间：2012-12-08T19:41:47.520
> 
> 标签：c#, stored-procedures, join, primary-key

我在存储过程 C# 中有一个关于如何加入 3 个表的问题。例如 ：

表 A：ID_Budget、姓名、日期

表 B : ID_Budget,Qty,GrandTotalBudget (表 B 是表 A 的详细信息)

表 C : ID_Actual,GrandTotalActual

（表A、表B、表C的记录总数相同）

我对表 A 和表 B 使用内连接，没问题。但是，当我尝试与表 C 交叉连接时，它会给出重复数据。当我在存储过程中添加表 C 时，CROSS JOIN 是从 C# 自动生成的。我也尝试了 FULL JOIN 但它没有用。

在水晶报表中，我想获取数据 ID_Budget、GrandTotalBudget 和 GrandTotalActual

我需要你的帮助，伙计们（或主人）真的尽快

先谢谢！！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T22:55:12.087

您要做的是笛卡尔联接，它将 A 和 B 中的所有行与 C 中的行结合起来。要做到这一点，您需要有一些东西可以连接这三个表。

# php - 防止非人为生成的请求

> ID：13781182
> 
> 赞同：0
> 
> 时间：2012-12-08T19:42:26.770
> 
> 标签：php, web-applications, curl, captcha, capture

我开发了一个 PHP 应用程序，它的主要用例是从数据库中获取一些数据。我想通过使用虚假请求来防止获取数据库数据的所有记录。UI 很简单（类似于 Google 主页），但我想提供上一条和下一条记录的链接，无需注册即可使用该应用程序。

您建议的解决方案是什么？

*更新：*我所说的虚假请求是指由非人类或某些机制（如 cURL）生成的请求，您通常会通过 CAPTCHA 阻止此类请求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T21:12:36.573

您可以做几件事，但请注意：有些用户可能不喜欢它。

*   如果希望用户在进行搜索之前登录，那么您必须检查是否有有效的登录用户（我知道这很明显，可能不是您的情况，但可能有助于其他人阅读您的问题）。
*   您可以设置一个请求处理程序（我是一个 ASP.Net 人），它不允许每秒来自同一 IP 的超过 1 个请求，或每分钟 30 个请求等......
*   正如@user1781026 所说，您的请求应该有 LIMIT (mySql) 或 TOP (SQL Server)，因为通常用户不会需要所有数据库记录，如果它们超过 100 或 50000，只需选择一个“好”的数字对于这个限制。
*   您可能还要求用户选择“类别”或日期范围（“本月”、“上个月”、“今年”......）。
*   如果您必须避免“任何”非人类请求，那么您唯一的选择是（afaik）要求登录或使用验证码。

# sql - 具有外键引用行数的多表选择

> ID：13781183
> 
> 赞同：3
> 
> 时间：2012-12-08T19:42:34.603
> 
> 标签：sql, tsql, join, count, foreign-keys

我有与外键相关的表，我尝试准备一个视图以通过 SQL Server 上的内部连接来组合它们。我不知道是否使用内部连接是一种方式，但无论如何我都无法得到我想要的。

表格如下（我有超过 2 个表格）：

**表 1**：

```
| ID | Bla Bla... | 
```

**表2**：

```
| ID | Table1ID | Bla Bla... | 
```

我试过的查询是这样的：

```
Select 
    Table1.ID, COUNT(Table2.ID) as FooCount
From
    Table1 
Inner Join
    Table2 on Table2.Table1ID = Table1.ID 
```

我想看到的结果应该是这样的：

```
|    ID    | FooCount |
-----------------------
|    1     |    45    |
|    2     |    75    |
|    3     |    98    |
|    4     |    100   |
|    5     |    11    |
|    6     |    37    | 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-08T19:49:52.550

您甚至不需要加入即可执行此操作：

```
SELECT Table1Id AS ID, COUNT(*) as FooCount FROM Table2 GROUP BY Table1Id 
```

# python - uWSGI, cherrypy and threading

> ID：13781185
> 
> 赞同：0
> 
> 时间：2012-12-08T19:42:52.917
> 
> 标签：python, wsgi, cherrypy, uwsgi

preface: I would like to separate these problems into smaller questions, but apparently, I am missing some pieces of the puzzle and it seems impossible to me.

I developed my cherrypy application using cherrypy's built in WSGI server. I naively assumed that when the time comes, I will be able to use created WSGI Application class and deploy it using any WSGI compliant server.

I used [this blog post](http://www.defuze.org/archives/222-integrating-sqlalchemy-into-a-cherrypy-application.html) to create my own (but very similar) cherrypy Plugin and Tool to connect to database using SQLAlchemy during http requests.

I expected that any server will somehow work like cherrypy's built in server:

1.  main process will spawn X threads to satisfy X concurrent requests
2.  my engine Plugin will create SQLalchemy engine with connection pool = X (so any request will have its connection)
3.  on request arrival, my Tool will supply sql alchemy connection from pool

This flow does not match with uWSGI (as long as I understand it).

I assign my `application.py` in uWSGI configuration. This file looks something like this:

```
cherrypy.tools.db = DbConnectorTool()
cherrypy.engine.dbengine = DbEnginePlugin(cherrypy.engine, settings.database)
cherrypy.config.update({
    'engine.dbengine.on': True
})

from myapp.application import Application
root = Application(settings)
application = cherrypy.Application(root, script_name='', config=settings) 
```

I was using this `application.py` to mount my application into cherrypy's built in server when I was developing and testing it.

The problems are that uWSGI does not create any threads itself and my SQLAlchemy plugin is not working with it, because no `cherrypy.engine` is created.

Does uWSGI support threading in the meaning of using threads to serve multiple concurrent requests? Can I start these threads in my `application.py`? Will uWSGI understand it and use these threads for concurrent requests? And how can this be done? I think cherrypy can be used somehow, or not? And what about my SQLAlchemy Plugin, how can I start `cherrypy.engine` when using only WSGI `cherrypy.Application`?

Any help or information that could help me will be appreciated.

**Edit:**

My uWSGI configuration:

```
<uwsgi>
    <socket>127.0.0.1:9001</socket>
    <master/>
    <daemonize>/var/log/uwsgi/app.log</daemonize>
    <logdate/>
    <threads/>
    <pidfile>/home/web/uwsgi.pid</pidfile>
    <uid>uwsgi</uid>
    <gid>uwsgi</gid>
    <workers>2</workers>
    <harakiri>90</harakiri>
    <harakiri-verbose/>
    <home>/home/web/</home>
    <pythonpath>/home/web/instance</pythonpath>
    <module>core.application</module>
    <no-orphans/>
    <touch-reload>/home/web/uwsgi-reload-web</touch-reload>
</uwsgi> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T21:36:21.657

uWSGI 使用工作进程，而不是线程。值得注意的是，这意味着不再在所有请求之间共享全局变量。您可以将[SharedArea](http://uwsgi-docs.readthedocs.org/en/latest/PythonModule.html#sharedareaapi)用于全局数据。默认情况下，这些进程是分叉的，因此请确保您对此感到满意或调整设置（请参阅[要知道的事情](http://uwsgi-docs.readthedocs.org/en/latest/ThingsToKnow.html)）。

通过调用获取 Cherrypy 的 WSGI 应用程序`cherrypy.tree.mount(root, config=settings)`。

如果您的数据库插件没有线程/共享数据问题，那么它很可能会起作用。就像你说的，你可能需要`cherrypy.engine.start()`，但绝对不需要`cherrypy.engine.block()`，因为你的主线程现在是 uWSGI worker。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T07:15:12.283

您应该发布您的 uWSGI 配置，否则将很难理解发生了什么。

顺便说一下产生额外的线程（每个工人）你只需要添加 --threads N

# visual-studio - Installing Visual Studio 2012 on x64 machine: use x64 build?

> ID：13781190
> 
> 赞同：0
> 
> 时间：2012-12-08T19:43:07.967
> 
> 标签：visual-studio

I just got my new MSDN subscription up and running, and was wondering something about when I go to install all my dev tools: Is there any specific reason I should install Visual Studio x64 over x86? I'm on an x64 machine, but I can obviously compile to any platform I want no matter what architecture VS is compiled for. I can't think of any reason VS would be using more than 4GB of RAM. Is there some sort of special case that necessitates an x64 build of VS? All I can think is maybe some game development scenarios where the debugger is dealing with huge amounts of memory at once.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T19:52:39.523

[请记住，正如Rico Mariani](http://blogs.msdn.com/b/ricom/archive/2009/06/10/visual-studio-why-is-there-no-64-bit-version.aspx)所解释的那样，没有 64 位 Visual Studio 。这应该没什么大不了的，因为您可以在 Visual Studio 中创建应用程序时指定 32 位、64 位或任何 CPU。

# wordpress - 如何在没有小部件的情况下在侧边栏中列出子页面 - wordpress

> ID：13781193
> 
> 赞同：0
> 
> 时间：2012-12-08T19:43:25.740
> 
> 标签：wordpress

我正在尝试创建父页面的子页面列表，该列表将出现在我的 wordpress 网站的侧边栏中。此侧边栏将出现在每个页面上。

例如，我有一个 ID 为 54 的页面。这个页面有 7 个子页面。我想在侧边栏中显示这 7 个页面（只是标题），以及添加的任何更多子页面。

目前有一个名为“Pages”的小部件可以执行此操作，但我想直接通过 sidebar.php 中的代码执行此操作，而不是使用小部件，因为使用小部件有一些限制。

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T19:49:17.337

试试这个链接：[http](http://codex.wordpress.org/Function_Reference/wp_list_pages) : //codex.wordpress.org/Function_Reference/wp_list_pages 具体来说，查看函数的“depth”和“child_of”参数。

应该：

```
<?php wp_list_pages( array( 'depth' => 1, 'child_of' => YOUR_PAGE_ID_HERE ); ?> 
```

此外，您当然也可以动态获取页面 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T19:50:24.050

要为此目的编写自定义代码将需要您在小部件内执行 php。尝试使用这个[PHP 代码执行插件](http://wordpress.org/extend/plugins/php-code-widget/)

# objective-c - New line character showing up in NSLog output

> ID：13781196
> 
> 赞同：6
> 
> 时间：2012-12-08T19:43:38.610
> 
> 标签：objective-c, nsarray, nslog

I have the following method:

```
- (NSString *)description {
    return [NSString stringWithFormat:@"Attribute %@: %@", name, [values description]];
} 
```

Name is a string, values is an NSArray. I have an NSArray containing several of these objects.

When I print the attribute using `NSLog(@"Attribute created: %@", [newAttribute description]);` it works fine, and prints this:

```
2012-12-08 14:38:06.883 DT[25684:303] Attribute created: Attribute color: (
    YELLOW,
    PURPLE
)
2012-12-08 14:38:06.884 DT[25684:303] Attribute created: Attribute size: (
    LARGE,
    SMALL
) 
```

However, if I create a NSMutableArray and place several attribute objects in it, I get this output when I print the array in the same manner:

```
2012-12-08 14:38:06.887 DT[25684:303] Attributes: (
    "Attribute color: (\n    YELLOW,\n    PURPLE\n)",
    "Attribute size: (\n    LARGE,\n    SMALL\n)",
) 
```

Why does it print the newline character in this context, and how would I prevent it from doing so?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-01-08T01:47:10.817

看起来这个问题在这里得到了回答：[https ://stackoverflow.com/a/5599699/5760384](https://stackoverflow.com/a/5599699/5760384)

基本上，就像 Exploring 所说， \n 字符在描述中不起作用，但由于某种原因，回车符起作用。因此，请尝试 \r 。我在 Xcode 7 中的重写描述方法中对此进行了测试，它工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T00:40:17.187

这是因为当您使用“描述”方法打印时，数据会转换为字符串，因此不会显示换行符。但是当您使用数组打印时，不会将其内容转换为字符串，因此它会显示换行符。

# c++ - Using X,Y Coords With A Bitmap Image

> ID：13781203
> 
> 赞同：1
> 
> 时间：2012-12-08T19:44:48.750
> 
> 标签：c++, bitmap, coordinates

I have a c/c++ program running on my Linux box that loads up a 24bit bitmap, reads the two headers and then stores the image data into a char* variable. I have verified this works by dumping that variables contents into a raw binary file and compared it to the original bitmap+offset. I used the code from [HERE](http://www.gamedev.net/page/resources/_/technical/game-programming/how-to-load-a-bitmap-r1966) and unmodified and takes care or reordering into RGB and bottom up.

Now if I have a list of coordinates like X, Y, Width, Height how the heck do I translate these into the byte offsets of my image?!

In [MY CODE](http://pastebin.com/G7DhMRzV) you see that I am calculating the width of one scanline and the glyph location to find Y and then adding a scanline for each y+1\. Similarly for X I am iterating over by three bytes at a time. And finally I store those three bytes sequentially into my temporary character array.

In truth I do not need the pixel data as the glyph is a 0xFF or 0x00 with no smoothing. I included it to make sure my bits where accounted for.

[HERE](http://www.flickr.com/photos/90883337@N02/8255838800/in/photostream) is the image I am using.

EDIT: --------------------------------------------

As mentioned below my math was a bit quarky. fixed the line in the i,j,k loop to:

```
tmpChar[i][j][k] = img.data[(((Y+j) * imgWidth) + (X + i)) * imgBPP + k]; 
```

As for my programs output [HERE](http://pastebin.com/SgFe80MF) as you can see it loads the bitmap fine and the header info is proper but when I try to display the contents of the tmpChar array its all 0xFF (I used a signed int so 0xFF = -1 and 0x00 = +0)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T20:14:58.983

图像内存中的布局是（忽略我可能已经颠倒了 R、G 和 B）：

```
[R of pixel 0]  [G of pixel 0] [B of pixel 0] ....... [B of (0, imgWidth-1)] [R of pixel (1, 0)] ..... 
```

所以要计算任何给定像素的偏移量`offset = ((Y * imgWidth) + X) * imgBPP + colorByte`：

据我所知，为您的内部循环提供支持，并假设您的 X 和 Y 字符是正确的：

```
tmpChar[i][j][k] = img.data[(((Y+j) * imgWidth) + (x + i)) * imgBPP + k]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T21:39:14.140

我猜像素在内存中以倒置的顺序存储，就像[BMP 文件格式](http://en.wikipedia.org/wiki/BMP_file_format)一样：

> 通常，像素相对于正常图像光栅扫描顺序“倒置”存储，从左下角开始，从左到右，然后从图像的底部到顶部逐行存储

因此，您的代码可能正在读取错误的像素块。

# javascript - 从 div 制作 ahref

> ID：13781208
> 
> 赞同：0
> 
> 时间：2012-12-08T19:45:06.910
> 
> 标签：javascript, jquery, html, css

我有一个 div 如下：

```
 <div class="slide_items">
            <div class="slide_item"><a href="/url"><img src="image"/></a></div>
            <div class="slide_title"><a href="/url">title</a></div>
        </div> 
```

我想要做的是，而不是在`slide_items`div 中的每个项目中都有 URL。我希望用户点击`<div class="slide_items">`。我希望`slide_items`作为 div 本身可点击，而不是在每个内部 div 中放置一个 href。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T19:50:22.580

*正确的*方法是使用单个链接（*但将内部元素更改`span`为有效性*）

```
 <a href="/url" class="slide_items">
        <span class="slide_item"><img src="image"/></span>
        <span class="slide_title">title</span>
    </a> 
```

并确保它们被视为`block`css 中的元素

```
a.slide_items, a.slide_items span{
    display:block;
} 
```

* * *

如果您***必须***采用 div 方式，请使用

```
<div class="slide_items" data-href="/url">
    <div class="slide_item"><img src="image"/></div>
    <div class="slide_title">title</div>
</div> 
```

并添加一个脚本（*因为你使用 jquery*）

```
$(function(){
    $('.slide_items').click(function(){
        var href = $(this).data('href');
        window.location = href;
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T19:47:43.000

您可以添加`onclick="window.open('google.com')"`事件来模拟指向您的 div 的链接。

如果您希望整个 div 显示为链接，您将需要更改光标。也添加`style="cursor: hand; cursor: pointer;"`到您的 div 中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T19:47:47.320

您可以将`onclick`属性添加到`div`：

```
<div class="slide_items" onclick="location.href='/url';" >
    <div class="slide_item"><img src="image"/></div>
    <div class="slide_title">title</div>
</div> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-08T20:02:39.490

```
 <div class="slide_items">
        <div class="slide_item"><img src="image" alt="my image" /></div>
        <divclass="slide_title">title</div>
    </div> 
```

js：

```
$(function() {
    $('.slide_items').click(function() {
        window.location = 'http://www.google.com';
    });
}); 
```

CSS：

```
.slide_items:hover {
    cursor: pointer;
} 
```

[http://jsfiddle.net/68Smw/6/](http://jsfiddle.net/68Smw/6/)

重定向在 jsfiddle 中不起作用，但它应该适合您。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-08T20:07:55.303

你可以使用一些简单的 javascript 来完成这项工作

使用 onclick() 事件

所以你的 HTML 代码看起来像

```
<div class="slide_items">
            <div class="slide_item" onclick="function1()"><img src="image"/></div>
            <div class="slide_title" onclick="function2()">title</div>
        </div> 
```

你的 javascript 代码看起来像

```
function function1(){
// insert your code here
}

function function2()
{
// insert your code here
} 
```

代码可以根据您的需要以多种方式完成，如果您只想重定向到另一个 div，请使用和`display`之间交替的属性，更多参考here[文档](http://www.w3schools.com/cssref/pr_class_display.asp)。`none``block`

如果你想重定向到另一个网站，你可以使用

```
window.open("your url") 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-08T20:40:27.293

如果您希望它可以说：单击此处进入站点：

```
<div>

<a href="YOUR PAGE HERE!">Click here to enter my site!</a> 

</div> 
```

# git - How to set up a remote multiuser development environment with directory access permissions and git?

> ID：13781213
> 
> 赞同：1
> 
> 时间：2012-12-08T19:46:02.747
> 
> 标签：git, permissions, development-environment, agile

I'm developing a web app (AWS, PHP, complex front-end logic, multi-component, multi-module) leading a small distributed team (we use git) and preparing to introduce mode developers to the team. However we would like to isolate application modules and underlying code base among devs. E.g.: we want front end devs to be exposed only to their part of the code.

It is important to remain within one dev instance and one app path, due to environment setup, one dev DB with sample data, etc.

Currently, the solution I see, is to set users and user groups with appropriate permissions, allow and disallow certain directories, etc. However it is not clear how to work with git in the context. …maybe this approach is completely irrelevant.

How should i go about this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T20:06:14.133

您可能正在寻找超出`git`. 你看过[Gitlab](http://gitlabhq.com/)或[Gitorious](http://gitorious.org/)吗？这些提供了一个类似于 Github 的接口。Gitlab 似乎更适合在组织内进行开发，并非所有内容都对其他人可见，但您可以使用 Gitorious 实现类似的目标。

# java - MongoDb - Idle connection timeout

> ID：13781215
> 
> 赞同：1
> 
> 时间：2012-12-08T19:46:18.587
> 
> 标签：java, mongodb, spring-data-mongodb

I don't see an option among the (MongoClientOptions) to set a timeout for idle connections from the application to MongoDB. We see that connections opened to the mongodb remain open for hours. How this handled in mongodb, is there any options to set idle connection timeout in mongo? [http://api.mongodb.org/java/2.10.1/](http://api.mongodb.org/java/2.10.1/) (MongoClientOptions)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T04:25:33.340

MongoDB 支持 idletimeout，但此时并非所有驱动器都受支持。 [http://docs.mongodb.org/manual/reference/connection-string/#maxIdleTimeMS](http://docs.mongodb.org/manual/reference/connection-string/#maxIdleTimeMS)

提出了这个功能请求：- [https://jira.mongodb.org/browse/JAVA-710](https://jira.mongodb.org/browse/JAVA-710)

# bash - if []（方括号）中“[: too many arguments”错误的含义

> ID：13781216
> 
> 赞同：258
> 
> 时间：2012-12-08T19:46:25.290
> 
> 标签：bash, if-statement, arguments

我找不到任何一个简单直接的资源来说明以下 BASH shell 错误的含义并对其进行修复，因此我在研究后发布了我发现的内容。

**错误：**

```
-bash: [: too many arguments 
```

**谷歌友好版本：** `bash open square bracket colon too many arguments` .

**上下文：**单个方括号中的 if 条件，带有简单的比较运算符，例如等于、大于等，例如：

```
VARIABLE=$(/some/command);
if [ $VARIABLE == 0 ]; then
  # some action
fi 
```

* * *

## 回答 #1

> 赞同：423
> 
> 时间：2012-12-08T19:46:25.290

如果您`$VARIABLE`是包含空格或其他特殊字符的字符串，[并且使用了单个方括号](https://serverfault.com/questions/52034/what-is-the-difference-between-double-and-single-square-brackets-in-bash)（这是`test`命令的快捷方式），则该字符串可能会拆分为多个单词。这些中的每一个都被视为一个单独的参数。

这样**一个变量被分成许多参数**：

```
VARIABLE=$(/some/command);  
# returns "hello world"

if [ $VARIABLE == 0 ]; then
  # fails as if you wrote:
  # if [ hello world == 0 ]
fi 
```

对于放下包含空格或其他特殊字符的字符串的任何函数调用也是如此。

* * *

## 轻松修复

将变量输出用双引号括起来，强制它保留为一个字符串（因此是一个参数）。例如，

```
VARIABLE=$(/some/command);
if [ "$VARIABLE" == 0 ]; then
  # some action
fi 
```

**就那么简单。**但是，如果您也不能保证您的变量不会是空字符串或仅包含空格的字符串，请跳至下面的“另请注意...”。

* * *

或者，**另一种解决**方法是使用双方括号（这是`new test`命令的快捷方式）。

但是，这只存在于 bash（显然是 korn 和 zsh）中，因此可能与`/bin/sh`etc调用的默认 shell 不兼容。

这意味着在某些系统上，**它可能从控制台工作，但在其他地方调用时不能工作，例如 from`cron`**，这取决于所有内容的配置方式。

它看起来像这样：

```
VARIABLE=$(/some/command);
if [[ $VARIABLE == 0 ]]; then
  # some action
fi 
```

如果您的命令包含这样的双方括号并且您在日志中收到错误但它可以从控制台工作，请尝试将`[[`替换为此处建议的替代方法，或者确保运行您的脚本的任何内容都使用支持`[[`aka的 shell `new test`。

* * *

## 还要注意`[: unary operator expected`错误

如果您看到“参数过多”错误，则很可能您从函数中获取了一个具有不可预测输出的字符串。**如果还可以获得一个空字符串**（或所有空白字符串），即使使用上述“快速修复”，这也将被视为零参数，并且会失败`[: unary operator expected`

如果您习惯于其他语言，这也是同样的“陷阱”——您不希望变量的内容在评估之前像这样有效地打印到代码中。

这是一个防止 the`[: too many arguments`和`[: unary operator expected`错误的示例：如果输出为空（在此示例中为 ），则将输出替换为默认值`0`，并用双引号将整个内容括起来：

```
VARIABLE=$(/some/command);
if [ "${VARIABLE:-0}" == 0 ]; then
  # some action
fi 
```

（这里，如果 $VARIABLE 为 0 或为空，则该操作将发生。当然，如果需要不同的行为，您应该将 0（默认值）更改为不同的默认值）

* * *

**最后说明：**由于`[`是 的快捷方式`test`，因此上述所有错误也适用于错误`test: too many arguments`（也适用于`test: unary operator expected`）

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-05-28T10:36:36.557

刚刚碰到这篇文章，遇到同样的错误，试图测试两个变量是否*都是*空的（或非空的）。结果证明这是一个[复合比较 - 7.3。其他比较运算符 - 高级 Bash 脚本指南](http://tldp.org/LDP/abs/html/comparison-ops.html#CCOMPARISON1)；我想我应该注意以下几点：

*   我一~~`-e`~~开始以为它的意思是“空的”；但这意味着“文件存在” -`-z`用于测试空*变量*（字符串）
*   字符串变量需要加引号
*   对于复合逻辑 AND 比较，可以：
    *   使用两个`test`s 和`&&`它们：`[ ... ] && [ ... ]`
    *   或`-a`在单个中使用运算符`test`：`[ ... -a ... ]`

这是一个工作命令（搜索目录中的所有 txt 文件，并转储那些`grep`找到的同时包含两个单词的文件）：

```
find /usr/share/doc -name '*.txt' | while read file; do \
  a1=$(grep -H "description" $file); \
  a2=$(grep -H "changes" $file); \
  [ ! -z "$a1" -a ! -z "$a2"  ] && echo -e "$a1 \n $a2" ; \
done 
```

* * *

2013 年 8 月 12 日编辑：相关问题说明：

请注意，在使用经典`test`（单个方括号`[`）检查字符串相等性时，“等于”运算符之间**必须**有一个空格，在这种情况下，它是一个“等号”`=`符号（尽管两个等号`==`似乎被接受为相等运营商也是）。因此，这失败了（默默地）：

```
$ if [ "1"=="" ] ; then echo A; else echo B; fi 
A
$ if [ "1"="" ] ; then echo A; else echo B; fi 
A
$ if [ "1"="" ] && [ "1"="1" ] ; then echo A; else echo B; fi 
A
$ if [ "1"=="" ] && [ "1"=="1" ] ; then echo A; else echo B; fi 
A 
```

...但添加空间 - 一切看起来都很好：

```
$ if [ "1" = "" ] ; then echo A; else echo B; fi 
B
$ if [ "1" == "" ] ; then echo A; else echo B; fi 
B
$ if [ "1" = "" -a "1" = "1" ] ; then echo A; else echo B; fi 
B
$ if [ "1" == "" -a "1" == "1" ] ; then echo A; else echo B; fi 
B 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2019-08-06T23:07:49.910

`[: too many arguments`您可能会遇到or错误的另一种情况`[: a: binary operator expected`是，如果您尝试测试所有参数`"$@"`

```
if [ -z "$@" ]
then
    echo "Argument required."
fi 
```

如果您调用`foo.sh`或，它可以正常工作`foo.sh arg1`。但是如果你传递多个参数，比如`foo.sh arg1 arg2`，你会得到错误。这是因为它被扩展为`[ -z arg1 arg2 ]`，这不是一个有效的语法。

检查参数是否存在的正确方法是`[ "$#" -eq 0 ]`. （`$#`是参数的数量）。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2021-06-02T15:29:43.340

我也面临同样的问题。@sdaau 的回答以合乎逻辑的方式帮助了我。在这里，我正在做的事情对我来说似乎在语法上是正确的，但出现了太多参数错误。

错误的语法：

```
if [ $Name != '' ] && [ $age != '' ] && [ $sex != '' ] && [ $birthyear != '' ]  && [ $gender != '' ] 
then
    echo "$Name"
    echo "$age"
    echo "$sex"
    echo "$birthyear"
    echo "$gender"
else
    echo "Enter all the values"
fi 
```

在上面的 if 语句中，如果我传递了下面提到的变量的值，那么我也会收到语法错误

```
export "Name"="John"
export "age"="31"
export "birthyear"="1990"
export "gender"="M" 
```

使用以下语法，我得到了预期的输出。正确的语法：

```
if [ "$Name" != ""  -a  "$age" != ""  -a  "$sex" != ""  -a  "$birthyear" != ""   -a  "$gender" != "" ] 
then
    echo "$Name"
    echo "$age"
    echo "$sex"
    echo "$birthyear"
    echo "$gender"
else
    echo "it failed"
fi 
```

有几点我们需要牢记

1.  使用 "" 而不是 ''
2.  使用 -a 而不是 &&
3.  在 [ a = b] 等运算符符号之前和之后放置空格，不要在 if 条件中用作 [ a = b ]

因此，上述解决方案对我有用！！！

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-06-07T16:47:18.160

有时如果您不小心触摸键盘并删除了一个空格。

```
if [ "$myvar" = "something"]; then
    do something
fi 
```

将触发此错误消息。注意 ']' 之前的空格是必需的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-06-17T16:03:35.170

我的脚本也有同样的问题。但是当我做了一些修改时，它对我有用。我确实喜欢这样：-

```
export k=$(date "+%k");
if [ $k -ge 16 ] 
    then exit 0; 
else 
    echo "good job for nothing"; 
fi; 
```

这样我就解决了我的问题。希望这对你也有帮助。

# android - 如何在两个 android 活动之间传递一个 Mat 数组（opencv4android）？

> ID：13781218
> 
> 赞同：1
> 
> 时间：2012-12-08T19:46:31.443
> 
> 标签：android

我在两个 android 活动之间传递 Mat (opencv4android) 数组时遇到问题，任何人都可以帮助我吗？

我已经通过将 Mat 数组作为图像写入 SD 卡并在另一个活动中从 SD 卡读取图像来解决这个问题。但是在 android 手机上运行时它存在速度问题。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T22:05:10.507

如何获取 Mat (getNativeObjAddr) 的本机地址，并将地址传递给 Intent Extras 中的另一个活动。然后用这个地址创建新的 Mat 数组？

# java - Google GWT error 404

> ID：13781221
> 
> 赞同：2
> 
> 时间：2012-12-08T19:46:49.530
> 
> 标签：java, google-app-engine, jakarta-ee, gwt

I am trying to run a sample program from the book: "Google App Engine Java and GWT Application Development Code."

The program called connactr.

The program is using the imports: com.google.appengine.api.labs.taskqueue.TaskOptions.Builder.url com.google.appengine.api.labs.taskqueue.Queue

That do not exist anymore, so I changed them to: com.google.appengine.api.taskqueue.TaskOptions.Builder.withurl com.google.appengine.api.taskqueue.*

I also change the code:

```
Queue queue = QueueFactory.getDefaultQueue();
      queue.add(url("/updatefeedurls").payload(data,
        "application/x-java-serialized-object")); 
```

to:

```
Queue queue = QueueFactory.getDefaultQueue();
      queue.add(withUrl("/updatefeedurls").payload(data,
        "application/x-java-serialized-object")); 
```

I made these kind of changes everywhere I had the old methods. I was able to run the application, with no errors, but for every page I receive error 404, page not found.

I assume that the withurl() method has different logic that causes the error 404, but I wasn't able to find what I should do to fix it.

What should I change in order to make this work?

Here is the web.xml:

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns="http://java.sun.com/xml/ns/javaee"
xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee       
http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"   
id="WebApp_ID"
version="2.5">

<!-- ===================== friendsService ===================== -->
<servlet>
<servlet-name>friendsService</servlet-name>
<servlet-class>com.metadot.book.connectr.server.FriendsServiceImpl</servlet-class>
</servlet>

<servlet-mapping>
<servlet-name>friendsService</servlet-name>
<url-pattern>/connectr/friendsService</url-pattern>
</servlet-mapping>

<!-- ===================== messagesService ===================== -->
<servlet>
<servlet-name>messagesService</servlet-name>
<servlet-class>com.metadot.book.connectr.server.MessagesServiceImpl</servlet-class>
</servlet>

<servlet-mapping>
<servlet-name>messagesService</servlet-name>
<url-pattern>/connectr/messagesService</url-pattern>
</servlet-mapping>

<!-- ===================== Login Service ===================== -->
<servlet>
<servlet-name>loginService</servlet-name>
<servlet-class>com.metadot.book.connectr.server.LoginServiceImpl</servlet-class>
</servlet>

<servlet-mapping>
<servlet-name>loginService</servlet-name>
<url-pattern>/connectr/loginService</url-pattern>
</servlet-mapping>

<!-- ===================== Login Google Servlet ===================== -->

<servlet>
<servlet-name>logingoogle</servlet-name>
<servlet-class>com.metadot.book.connectr.server.servlets.LoginGoogleServlet</servlet-  
class>
 </servlet>

<servlet-mapping>
<servlet-name>logingoogle</servlet-name>
<url-pattern>/logingoogle</url-pattern>
</servlet-mapping>

<servlet>
<servlet-name>logingooglecallback</servlet-name>
<servlet-  
class>com.metadot.book.connectr.server.servlets.LoginGoogleCallbackServlet</servlet-class>
</servlet>

<servlet-mapping>
<servlet-name>logingooglecallback</servlet-name>
<url-pattern>/logingooglecallback</url-pattern>
 </servlet-mapping>

<!-- ===================== Login Twitter Servlet ===================== -->

<servlet>
<servlet-name>logintwitter</servlet-name>
<servlet-class>com.metadot.book.connectr.server.servlets.LoginTwitterServlet</servlet-class>
</servlet>

<servlet-mapping>
<servlet-name>logintwitter</servlet-name>
<url-pattern>/logintwitter</url-pattern>
</servlet-mapping>

<servlet>
<servlet-name>logintwittercallback</servlet-name>
<servlet- 
class>com.metadot.book.connectr.server.servlets.LoginTwitterCallbackServlet</servlet-    
Class>
</servlet>

<servlet-mapping>
<servlet-name>logintwittercallback</servlet-name>
<url-pattern>/logintwittercallback</url-pattern>
</servlet-mapping>

 <!-- ===================== Login Facebook Servlet ===================== -->

<servlet>
<servlet-name>loginfacebook</servlet-name>
<servlet-class>com.metadot.book.connectr.server.servlets.LoginFacebookServlet</servlet-class>
</servlet>

<servlet-mapping>
<servlet-name>loginfacebook</servlet-name>
<url-pattern>/loginfacebook</url-pattern>
</servlet-mapping>

 </servlet>
 <servlet-mapping>
 <servlet-name>XMPPRequest</servlet-name>
 <url-pattern>/xmpprequest</url-pattern>
 </servlet-mapping>

 <security-constraint>
 <web-resource-collection>
  <url-pattern>/xmpprequest</url-pattern>
 </web-resource-collection>
 <auth-constraint>
  <role-name>admin</role-name>
  </auth-constraint>
 </security-constraint>

<filter-mapping> 
<filter-name>appstats</filter-name> 
 <url-pattern>/*</url-pattern> 
</filter-mapping> 

<servlet>
 <servlet-name>appstats</servlet-name>
  <servlet-class>com.google.appengine.tools.appstats.AppstatsServlet</servlet-class> 
</servlet>
 <servlet-mapping> 
 <servlet-name>appstats</servlet-name>
 <url-pattern>/appstats/*</url-pattern> 
 </servlet-mapping>

 <security-constraint> 
  <web-resource-collection> 
  <url-pattern>/appstats/*</url-pattern> 
  </web-resource-collection> 
  <auth-constraint> 
  <role-name>admin</role-name> 
  </auth-constraint> 
</security-constraint> -->

<!-- Default page to serve -->
<welcome-file-list>
<welcome-file>ConnectrApp.html</welcome-file>
</welcome-file-list>

</web-app> 
```

Thank you in advance, Idan.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T08:56:42.467

I am thinking that withUrl requires the entrire Url to work as intended and not the relative location. Fortunately GWT provides with a way to make the entire url in a dynamic way.

Try the TaskOptions `getUrl()` method. Use `Window.alert(url-derived-from-getUrl)` and check what the url built with `withUrl` is.

You can use

```
GWT.getHostPageBaseUrl();

GWT.getModuleBaseUrl(); 
```

to build your url properly inside withUrl(Sting url).

# django - django：验证修改表单

> ID：13781223
> 
> 赞同：0
> 
> 时间：2012-12-08T19:47:09.067
> 
> 标签：django, forms, validation

我正在尝试在 django 中验证更新表单。这是我的代码：

```
if request.method == 'POST':
    form = LawsIdsForm(request.POST)
    lawToValidate= form.data['lawsToValidate']
    #if a law is selected
    if lawToValidate!="":
        law=LawsIdsModel.objects.get(id=lawToValidate)
        formInstance = LawsIdsForm(instance=law, initial={'lawsToValidate':lawToValidate})  
        #saves the law
        if 'lawsValidationSaveButton' in request.POST:
            print "save"
            if form.is_valid():
                print "form valid"
                formInstance.save()
            else:
                print "form not valid", form.errors 
```

现在我想保存数据。如果我使用 formInstance.is_valid()，它不起作用，因为表单是未绑定的。如果我执行 form.is_valid()，由于唯一性错误，它会返回 false。如何告诉 django 我不想添加数据而是更新数据？（这些唯一性错误只有在添加数据时才会发生）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T19:57:47.933

您应该验证并保存相同的表单：

```
 if formInstance.is_valid():     <-- change here!
            print "form valid"
            formInstance.save() 
```

在您的案例`formInstance`中，因为是谁拥有绑定的实例。

引用[django 使用表单文档](https://docs.djangoproject.com/en/dev/topics/forms/?from=olddocs#processing-the-data-from-a-form)

> 处理来自表单的数据：一旦 is_valid() 返回 True，成功验证的表单数据将在 form.cleaned_data 字典中。这些数据已经为您很好地转换为 Python 类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-19T18:08:01.327

解决了！！

这是我所做的更改：

```
if request.method == 'POST':
    lawToValidate=request.POST.getlist('lawsToValidate')[0]
    #if a law is selected
    if lawToValidate!="":
        law=LawsIdsModel.objects.get(id=lawToValidate)      
        #saves the law
        if 'lawsValidationSaveButton' in request.POST:
            print "save"
            form = LawsIdsForm(request.POST, instance=law)
            if form.is_valid():
                print "form valid"
                form.save()
            else:
                print "form not valid", form.errors 
```

# c++ - [[attributes]] 是 C++11 的新手吗？

> ID：13781225
> 
> 赞同：6
> 
> 时间：2012-12-08T19:47:14.520
> 
> 标签：c++, c++11

[使用 C++11 属性](https://stackoverflow.com/questions/9864328/using-c11-attributes)提示 [[attributes]] 对 C++11 来说是新的。

我想确认一下：C++11 的属性是新的吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-08T20:07:19.670

是的，属性是 2011 ISO C++ 标准中的一个新特性；它们在之前的 2003 标准中没有指定。

它们记录在标准的第 7.6 节 [dcl.attr] 中。该标准的最新草案是[N3376](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3376.pdf)（PDF，4.9 MB）。

# c# - 初学者对 this.close() 函数的困惑

> ID：13781226
> 
> 赞同：1
> 
> 时间：2012-12-08T19:47:17.283
> 
> 标签：c#

我试图使用this.close()函数来终止一个窗口，是的，它可以工作，但是，Visual Studio没有停止调试，我需要在VS中手动按下停止按钮，如何解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T19:59:47.837

在你的程序中，你会有类似的东西

```
[STAThread]
static void Main()
{
    Application.EnableVisualStyles();
    Application.SetCompatibleTextRenderingDefault(false);
    Application.Run(new Form1());
} 
```

您必须关闭在 Application.Run 中作为参数传递的表单才能关闭您的应用程序。如果我们谈论的是 Winforms。

# c - 如何确定我已经释放了 C 中分配的所有内存？

> ID：13781227
> 
> 赞同：3
> 
> 时间：2012-12-08T19:47:18.897
> 
> 标签：c, list, memory-management

> **可能重复：**
> [在 C++ 中检查内存泄漏的最佳方法是什么？](https://stackoverflow.com/questions/396100/what-is-the-best-way-to-check-for-memory-leaks-in-c)

**我正在用C 语言**编写一个双向链表，其中大部分已经实现并且可以正常工作（我只需要在遍历和可能释放时修复一些小的逻辑错误）。

**问题：** 我怎样才能绝对确定我正在释放我分配的所有内存？我还想知道是否有任何技术可以优化我的分配。任何关于它如何工作的提示或提示或教程链接也受到赞赏。

我几乎是一个初学者，所以任何其他修复我的编码技术的技巧都将不胜感激。我使用**gdb**进行调试，并且在**Archbang Linux** x86_64 上运行。

感谢您的帮助。

以下是双向链表的结构：

```
typedef struct node_element{
    double data;
} element;

typedef struct node_t{
    struct node_t *prev;
    struct node_t *next; 
    struct node_element element;
} node;

typedef struct list_t{
    struct node_t *head;
    struct node_t *tail;
} list; 
```

这就是我创建列表的方式：

```
list *createList(){
    list *temp = malloc(sizeof(list));

    temp->head = malloc(sizeof(node));
    temp->tail = malloc(sizeof(node));

    temp->head->prev = NULL;
    temp->head->next = temp->tail;
    temp->tail->prev = temp->head;
    temp->tail->next = NULL;

    return temp;
} 
```

新节点：

```
node *newNode(element * element){
    node *current = malloc(sizeof(node));
    current->element.data = element->data;

    return current;
} 
```

删除单个节点，与我的问题不太相关，但可能有用：

```
node *removeNode(list * list, node * current){
    if (current->prev == NULL)
        list->head = current->next;
    else
        current->prev->next = current->next;

    if (current->next == NULL)
        list->tail = current->prev;
    else
        current->next->prev = current->prev;

    free(current);

    return NULL;
} 
```

现在最重要的部分是，当我完成一个列表时，我调用这个函数：

```
list *removeList(list * list){
    node *temp; //Revised.
    //node *temp = malloc(sizeof(node));

    while (list->head != NULL){
        temp = list->head->next;
        free(list->head);
        list->head = temp;
    }

    return NULL;
} 
```

像这样：

```
a_list = removeList(a_list); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T19:49:16.183

在它提供的众多功能中，[Valgrind](http://valgrind.org/)将允许您[检查内存泄漏](http://www.cprogramming.com/debugging/valgrind.html)。它通过动态检测内存管理功能来做到这一点。

你可能会使用这样的命令：

```
valgrind --tool=memcheck --leak-check=yes my_prog 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-08T19:51:13.880

如果要释放内存，可以调用释放内存的 free() 函数或释放内存的 dealloc() 函数，并且您正在使用函数，因此您创建的指针变量仅限于该函数的范围一旦函数终止，它就会自动被释放。

# php - How to detect 301 redirect using php

> ID：13781228
> 
> 赞同：1
> 
> 时间：2012-12-08T19:47:23.070
> 
> 标签：php, .htaccess, seo, http-status-code-301

> **Possible Duplicate:**
> [How to identify if referrer is a 301 redirect](https://stackoverflow.com/questions/1963328/how-to-identify-if-referrer-is-a-301-redirect)

Using htaccess Im doing a 301 redirect to redirect old urls to the new urls, the issue is the url contains the id that is stored in the db. But I have a new db with new ids so now when the old url redirects to the new url a different record loads on the page. So what I did was store the old ids along with the new ids so I know what old id belongs to the new id. However how can I detect someone is trying to access the old url? Is there a way in php to detect the person coming to the page is being redirected via a 301? I dont want to add anything new to the url due to SEO reasons so I really need to know if I can detect if they came to this page via 301 redirect. Hope this makes sense.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T19:54:38.307

向重定向添加另一个参数，例如`redirect=true`，检查参数以让您的应用知道它是重定向，启动会话，然后再次重定向到最终的未更改 url，比较会话以了解用户来自重定向的 url .

或者按照萨尔曼的说法，使用规范的网址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T19:51:38.727

脚本不会知道某些内容是否已重定向到它。与其重定向到，不如说`index.php?id=12345`添加一个中间重定向，您可以在其中确定正确的 URL。

首先，使用临时变量名重定向您的 .htaccess，例如`index.php?oldid=12345`，然后在该脚本中执行以下操作：

```
if (isset($_POST['oldid'])) {
    $id = fetch_new_id();
    header("Location: index.php?id=$id");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T19:53:13.130

我认为您无法检测到已设置的 http 状态，但是使用 .htaccess 您可以将其他变量添加到重定向的 url 或将 id 重命名为另一个变量名。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-09T00:49:30.490

为什么不通过 php 处理所有旧 URL 加上重写，并让代码直接 301 重定向到具有新 id 的新 URL？

# java - Calculating point relative to another point in 3D space

> ID：13781233
> 
> 赞同：2
> 
> 时间：2012-12-08T19:47:43.077
> 
> 标签：java, 3d, rotation, trigonometry, lwjgl

This is going to be a rather complicated explanation so bear with me. In 3D space, a player has 2 rotation values for looking around them, the rotation about the x and y axis. Given a view distance, I have calculated the point in the center of the players view port which is the view distance away (as show below).

![enter image description here](../Images/a01be83306b1df3326ce15d11aa4b93b.png)

*   'vd' is the view distance
*   'c' is a value holder
*   '(x,y,z)' is the point to be calculated
*   'rot.x' and 'rot.y' are the rotations about the x and y axis, respectively.

Given this point (x,y,z), I need to calculate four points relative to this position (as shown below)

![enter image description here](../Images/9d1bbd927901307580130e15fdfda215.png)

*   '(x2,y2,z2)', '(x3,y3,z3)', etc. are the points I need to calculate.
*   The width and height of the green plane is known. Let's call each one 'w' and 'h' respectively.

Now given I still have access to all the values in the first graph (such as rotations, etc), how can I calculate the each of the four points?

A little background.. I am doing this for a culling method called frustum culling. I am trying to do this with LWJGL in order to speed up rendering and reduce the toll on the GPU. I haven't been able to figure out the trigonometry for this calculation, and I have been trying for the past few hours. Any help is appreciated. If any more explanation/clarification is needed, just let me know. Thanks.

EDIT: Also, the points have to be on the same plane and rotate about the x and y axis with the point (x,y,z).

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T20:56:02.460

假设旋转顺序是先 X 然后是 Y 旋转，那么矩阵计算将是：

V*Ry*Rx

自从V向量成立以来。

V = [view_distance, tan(22.5)*view_distance, tan(22.5)*view_distance*(WIDTH/HEIGHT)]

那么这意味着：

```
X2 = cos(rot.Y) * view_distance - 
     (tan(22.5) * WIDTH * view_distance * sin(rot.Y))/HEIGHT
Y2 = tan(22.5) * cos(rot.X) * view_distance + 
     (tan(22.5) * WIDTH * cos(rot.Y) * view_distance * sin(rot.X))/HEIGHT +
      view_distance * sin(rot.X) * sin(rot.Y)
Z2 = (tan(22.5) * WIDTH * cos(rot.X) * cos(rot.Y) * view_distance)/HEIGHT - 
     tan(22.5) * view_distance * sin(rot.X) +
     cos(rot.X) * view_distance * sin(rot.Y) 
```

表达式可以进一步简化一点，因为例如可以从所有表达式中考虑视图距离。由于计算这有点毫无意义且容易出错，所以 id 更喜欢使用带有数值的矩阵函数作为更容易的东西。

PS：矩阵符号对您的眼睛和编程经验来说更容易。

# html - 从 Web 应用程序打开共享文件夹

> ID：13781238
> 
> 赞同：0
> 
> 时间：2012-12-08T19:48:11.270
> 
> 标签：html, perl, cross-browser, cgi

我有一个内部 Perl Web 应用程序（Windows 操作系统），我需要找到使用用户默认文件资源管理器从我的应用程序打开共享文件夹的最佳方法。我更喜欢一些 Perl 模块或一些跨浏览器方法（我不知道用户会使用什么浏览器）。

我试过了，`file:///`但我正在寻找更好的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T18:49:12.960

如果您要实现的目标类似于访问 samba 共享上的文件，我建议您简单地使用 UNC 路径 (\yourserver\shared_folder\filename)。如果您指向一个实际文件，它将由与 Windows 中该扩展名关联的默认程序打开。如果您指向一个文件夹，Windows 资源管理器将在该文件夹中打开，就像您在开始 -> 运行对话框中键入 UNC 路径一样。

因此，在 perl 中，如果您的共享文件夹位于名为“phobos”的服务器上，并且共享“movies”，则如下所示。

```
system('\\phobos\movies'); # mind the quoting!! 
```

如果您试图在 Windows 的默认程序中打开一个文件，您将使用如下内容：

```
system('\\phobos\movies\my_cool_movie.avi'); # mind the quoting!! 
```

你的问题就是这个意思吗？

# c# - 引发 AppDomain 异常

> ID：13781240
> 
> 赞同：0
> 
> 时间：2012-12-08T19:48:40.073
> 
> 标签：c#, appdomain, .net-assembly

我发现了很多类似的问题，但找不到任何解决方案。

我有以下代码：

```
 string file = "c:\\abc.dll";
    AppDomainSetup ads = new AppDomainSetup();
    ads.PrivateBinPath = Path.GetDirectoryName(file);
    AppDomain ad2 = AppDomain.CreateDomain("AD2", null, ads);
    ProxyDomain proxy = (ProxyDomain)ad2.CreateInstanceAndUnwrap(typeof(ProxyDomain).Assembly.FullName, typeof(ProxyDomain).FullName); 

Assembly asm = proxy.GetAssembly(file); // exception File.IO assembly not found is thrown here after succesfully running the funktion GetAssembly.

  public class ProxyDomain : MarshalByRefObject
  {
     public Assembly GetAssembly(string assemblyPath)
     {
        try
        {
           Assembly asm = Assembly.LoadFile(assemblyPath);
           //...asm is initialized correctly, I can see everything with debugger
           return asm;
        }
        catch
        {
           return null;
        }
     }
  } 
```

最有趣的是，我的 GetAssembly 函数返回了一些其他类型，甚至是我的自定义可序列化类，一切都很好。有人知道我错过了什么吗？或者将加载的程序集返回到另一个域是不可能的？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T20:01:26.507

我想`File.IO`是坐在你的主应用程序的 bin 目录中？如果是这样，您的 abc.dll 将不知道在哪里可以找到它（除非您的主应用程序也在其中`C:\\`）。

您需要执行以下操作之一

1.  `Bind`到`AppDomain.AssemblyResolve`事件并手动加载引用的dll
2.  更改`AppDomainSetup`的基本目录（这是`.NET`知道查找 dll 的地方之一）
3.  安装`File.IO`到`GAC`（这是另一个`.NET`知道寻找 dll 的地方）
4.  将 的位置添加`File.IO`到您的 AppDomainSetup 的私有探测路径（这是另一个`.NET`尝试查找 dll 的地方）。

# facebook - Open Graph - 如何使已发布的动作出现在时间轴上

> ID：13781241
> 
> 赞同：2
> 
> 时间：2012-12-08T19:48:47.477
> 
> 标签：facebook, facebook-graph-api, facebook-opengraph

我使用我在 facebook 上为它创建的应用程序通过网站发布操作。

我的行动已获得 FB 的批准。

当它们发布时，它们会出现在活动日志中。

但是，它们不会出现在时间轴上，也不会出现在该用户朋友的主页上，仅显示在活动日志下。

我怎样才能将动作发布到时间线本身并且所有用户的朋友都会在主页上看到它？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T05:55:41.050

你想要的是[Explicit Sharing](https://developers.facebook.com/docs/technical-guides/opengraph/explicit-sharing/)。Just Open Graph 本身并不能保证您的内容会被推送到新闻提要和/或时间轴中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-17T10:42:19.703

Explicitly_shared 本身并不总是有效的。

我自己也经历过（现在仍然如此），虽然“explicitly_shared”属性设置为“true”，但帖子并没有出现在时间轴上。

在检查活动日志时，被标记为“时间轴上允许”而不是“时间轴上显示”，这似乎需要手动设置并导致正确的帖子。我认为有一种方法可以强制执行此操作，但我还没有找到它！

（应用程序已获批准并上线，并启用了 publish_actions）

# javascript - SharePoint 的动态 URL 重定向

> ID：13781245
> 
> 赞同：1
> 
> 时间：2012-12-08T19:49:09.893
> 
> 标签：javascript, html, infopath

我有一个 InfoPath 表单（在 SharePoint 上发布），其工作流通过电子邮件向用户发送审批，现在我的问题是，如果用户尚未在 Intranet 上登录，则不会加载表单以进行审批。仅当用户已打开 Intranet 站点时才会加载该表单。

我想通过在通过电子邮件发送给用户以供批准的链接上嵌入代码来解决此问题。该代码应首先加载 Home.aspx 内网页面，然后在几秒钟后将用户重定向到表单以供批准。

通过电子邮件发送给用户的链接是动态的，并按如下方式传递：

string link = "电子表格";

这可能吗？我应该如何进行？

请帮忙，如果您需要澄清，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T13:50:43.907

如果我理解正确，您正在寻求创建一个链接，将审批链接中的查询字符串值传递给用户？为什么不使用自定义工作流程？

大卫·斯特林 www.sterling-consulting.com

# web-services - 使用 Spring 和 Castor 处理多个 Rest Web 服务

> ID：13781252
> 
> 赞同：3
> 
> 时间：2012-12-08T19:49:58.590
> 
> 标签：web-services, spring, rest, spring-mvc, castor

任何人都可以建议我使用 Springs 处理对多个 Rest Web 服务的访问的最佳方式`RestTemplate`吗？

我知道该`RestTemplate`对象有一个消息转换器引用 ( `MarshallingHttpMessageConverter`)，而后者又引用了一个`unmarshaller`. 在我的例子中，我使用`CastorMarshaller`带有关联映射文件的 Spring Frameworks 对象。

通常我可以将我所有的映射添加到一个 Castor 映射文件中。但是，在我的情况下，所有 Web 服务都是这种格式（下面的块），< rows ... /> 根据调用的服务持有不同的实体。

```
<data>
<output>
    <dataset>
        <row id="" .... />
        <row id="" .... />
        <row id="" .... />
        <row id="" .... />
        <row id="" .... />
    </dataset>
</output>
<nextUpdate><nextUpdate/> 
</data> 
```

被`CastorMarshaller`注入到`MessageConverter`其中本身被注入到`RestTemplate`应用程序上下文配置文件中。

```
<bean id="restTemplate" class="org.springframework.web.client.RestTemplate">
    <property name="messageConverters">
        <list>
            <bean class="org.springframework.http.converter.xml.MarshallingHttpMessageConverter">
                <property name="marshaller" ref="castorMarshaller"/>
                <property name="unmarshaller" ref="castorMarshaller"/>
                <property name="supportedMediaTypes">
                    <list>
                        <bean class="org.springframework.http.MediaType">
                            <constructor-arg index="0" value="application"/>
                            <constructor-arg index="1" value="xml"/>
                        </bean>                     
                        <bean class="org.springframework.http.MediaType">
                            <constructor-arg index="0" value="text"/>
                            <constructor-arg index="1" value="xml"/>
                        </bean>     
                    </list>
                </property>

            </bean>

        </list>
    </property>                 
</bean>

<bean id="castorMarshaller" class="org.springframework.oxm.castor.CastorMarshaller">
    <property name="mappingLocation" value="classpath:oxm-mapping-worldweather.xml"/>
</bean> 
```

我一直在考虑的可能选项：

1 为每个 Rest 服务创建多个`RestTemplates`。

2 为不同的服务创建多个`MessageConverters`，并在访问不同的服务时更改模板上的消息转换器。

3 为不同的服务创建多个`CasterMarshaller`对象并使用新的更新消息转换器`unmarshaller`

处理具有相同根和子元素的多个服务的最佳方法是什么？

在此先感谢 Sman UK

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-05T06:26:20.680

如果指定多个映射文件是问题，那么下面是解决方案。

使用 mappingLocations 属性而不是 mappingLocation，如下所示，

```
<bean id="castorMarshaller" class="org.springframework.oxm.castor.CastorMarshaller">
    <property name="mappingLocations">
        <list>
            <value>classpath:oxm-mapping-worldweather.xml</value>
            <value>classpath:sample-mapping.xml</value>
        </list>
    </property>
</bean> 
```

# ffmpeg - ffmpeg 使用 dts-ma 将视频转码为 ac3

> ID：13781253
> 
> 赞同：2
> 
> 时间：2012-12-08T19:50:02.693
> 
> 标签：ffmpeg

我正在尝试拍摄一个具有 h264 视频轨道和 dts-ma 音轨的视频，并获取一个 .m4v 文件：

h264 视频轨道 DTS-ma 音轨 AC-3 5.1 音轨

我试图只复制视频和 dts-ma 音轨，然后让它转换 AC-3 音轨

我`Unable to find a suitable output format for 'ac3'`从这个命令中得到一个错误：

```
ffmpeg -i "input.mkv" -map 0:0 -map 0:1 -map 0:1 -map 0:1 -c:v copy -c:a:0 copy -c:a:1 -acodec ac3 -ac 6 -ab 448k -c:a:2 -acodec ac3 -ac 6 -ab 256 -ar 48000 "output.m4v" 
```

（这是由我的 C# 应用程序生成的）

这对于已经包含 h264 和 ac3 的不同文件可以正常工作：

```
ffmpeg -i "input.mkv" -map 0:0 -map 0:1 -c:v copy -c:a:0 copy "output.m4v" 
```

显然它没有进行转换。

这是第一个命令的完整结果：

```
ffmpeg version N-46936-g8b6aeb1 Copyright (c) 2000-2012 the FFmpeg developers
  built on Nov 20 2012 19:34:37 with gcc 4.7.2 (GCC)
  configuration: --enable-gpl --enable-version3 --disable-pthreads --enable-runtime-cpudetect --enable-avisynth --enable-bzlib --enable-frei0r --enable-libass -
-enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libfreetype --enable-libgsm --enable-libmp3lame --enable-libnut --enable-libopenjpeg --enable-libo
pus --enable-librtmp --enable-libschroedinger --enable-libspeex --enable-libtheora --enable-libutvideo --enable-libvo-aacenc --enable-libvo-amrwbenc --enable-li
bvorbis --enable-libvpx --enable-libx264 --enable-libxavs --enable-libxvid --enable-zlib
  libavutil      52\.  8.100 / 52\.  8.100
  libavcodec     54\. 74.100 / 54\. 74.100
  libavformat    54\. 37.100 / 54\. 37.100
  libavdevice    54\.  3.100 / 54\.  3.100
  libavfilter     3\. 23.101 /  3\. 23.101
  libswscale      2\.  1.102 /  2\.  1.102
  libswresample   0\. 17.101 /  0\. 17.101
  libpostproc    52\.  2.100 / 52\.  2.100
Input #0, matroska,webm, from 'input.mkv':
  Metadata:
    creation_time   : 2012-12-07 22:11:56
  Duration: 01:41:23.38, start: 0.000000, bitrate: 33582 kb/s
    Chapter #0.0: start 0.000000, end 186.250000
    Metadata:
      title           : 00:00:00.000
    Chapter #0.1: start 186.250000, end 512.708000
    Metadata:
      title           : 00:03:06.250
    Chapter #0.2: start 512.708000, end 883.292000
    Metadata:
      title           : 00:08:32.708
    Chapter #0.3: start 883.292000, end 1354.000000
    Metadata:
      title           : 00:14:43.292
    Chapter #0.4: start 1354.000000, end 1865.458000
    Metadata:
      title           : 00:22:34.000
    Chapter #0.5: start 1865.458000, end 2122.500000
    Metadata:
      title           : 00:31:05.458
    Chapter #0.6: start 2122.500000, end 2386.125000
    Metadata:
      title           : 00:35:22.500
    Chapter #0.7: start 2386.125000, end 2801.167000
    Metadata:
      title           : 00:39:46.125
    Chapter #0.8: start 2801.167000, end 2923.000000
    Metadata:
      title           : 00:46:41.167
    Chapter #0.9: start 2923.000000, end 3388.500000
    Metadata:
      title           : 00:48:43.000
    Chapter #0.10: start 3388.500000, end 3808.167000
    Metadata:
      title           : 00:56:28.500
    Chapter #0.11: start 3808.167000, end 4071.375000
    Metadata:
      title           : 01:03:28.167
    Chapter #0.12: start 4071.375000, end 4378.750000
    Metadata:
      title           : 01:07:51.375
    Chapter #0.13: start 4378.750000, end 4681.583000
    Metadata:
      title           : 01:12:58.750
    Chapter #0.14: start 4681.583000, end 4989.792000
    Metadata:
      title           : 01:18:01.583
    Chapter #0.15: start 4989.792000, end 5311.667000
    Metadata:
      title           : 01:23:09.792
    Chapter #0.16: start 5311.667000, end 5629.083000
    Metadata:
      title           : 01:28:31.667
    Chapter #0.17: start 5629.083000, end 6083.382000
    Metadata:
      title           : 01:33:49.083
    Stream #0:0(eng): Video: h264 (High), yuv420p, 1920x1080 [SAR 1:1 DAR 16:9], 24 fps, 24 tbr, 1k tbn, 48 tbc (default)
    Stream #0:1(eng): Audio: dts (DTS-HD MA), 48000 Hz, 5.1(side), fltp, 1536 kb/s (default)
[NULL @ 03f4b020] Unable to find a suitable output format for 'ac3'
ac3: Invalid argument 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-31T02:44:56.353

问题可能是因为添加了参数`-acodec`。

`-acodec`是`-codec:a`or的别名`-c:a`。

由于您已经用 指定了轨道`-c:a:X`，因此您不需要`-acodec`在它之后的右边。

这应该有效：

```
ffmpeg -i "input.mkv" -map 0:0 -map 0:1 -map 0:1 -map 0:1 -c:v copy -c:a:0 copy -c:a:1 ac3 -ac 6 -ab 448k -c:a:2 ac3 -ac 6 -ab 256 -ar 48000 "output.m4v" 
```

# mysql - 可以优化这个 phpbb 查询吗？

> ID：13781254
> 
> 赞同：0
> 
> 时间：2012-12-08T19:50:05.737
> 
> 标签：mysql, sql, phpbb

这是一些改编自 phpBB 的代码。据我所知，它正在尝试删除所有主题，其中唯一的海报是目标用户。

（请注意，出于测试目的，我将最终查询从 DELETE 更改为 SELECT）

```
<?php
$user_id = 66275;

mysql_connect('localhost', 'username', 'password');
mysql_select_db('db_name');

$start = microtime(true);
$total = 0;

define('POSTS_TABLE', 'phpbb_posts');
define('TOPICS_TABLE', 'phpbb_topics');

         $sql = 'SELECT topic_id, COUNT(post_id) AS total_posts 
            FROM ' . POSTS_TABLE . " 
            WHERE poster_id = $user_id 
            GROUP BY topic_id"; 
         $result = mysql_query($sql);

         $topic_id_ary = array(); 
         while ($row = mysql_fetch_assoc($result)) 
         { 
            $topic_id_ary[$row['topic_id']] = $row['total_posts']; 
         } 
         mysql_free_result($result); 

         if (sizeof($topic_id_ary)) 
         { 
            $sql = 'SELECT topic_id, topic_replies, topic_replies_real 
               FROM ' . TOPICS_TABLE . ' 
               WHERE ' . sql_in_set('topic_id', array_keys($topic_id_ary)); 
            $result = mysql_query($sql); 

            $del_topic_ary = array(); 
            while ($row = mysql_fetch_assoc($result)) 
            { 
               if (max($row['topic_replies'], $row['topic_replies_real']) + 1 == $topic_id_ary[$row['topic_id']]) 
               { 
                  $del_topic_ary[] = $row['topic_id']; 
               } 
            } 
            mysql_free_result($result); 

            if (sizeof($del_topic_ary)) 
            { 
               $sql = 'SELECT topic_id FROM ' . TOPICS_TABLE . ' 
                  WHERE ' . sql_in_set('topic_id', $del_topic_ary); 
               $result = mysql_query($sql);
               while ($row = mysql_fetch_assoc($result)) 
               { 
$total++;
                  echo $row[topic_id] . "\r\n";
               } 
            } 
         }

    function sql_in_set($field, $array, $negate = false, $allow_empty_set = false)
    {
        if (!sizeof($array))
        {
            if (!$allow_empty_set)
            {
                // Print the backtrace to help identifying the location of the problematic code
                $this->sql_error('No values specified for SQL IN comparison');
            }
            else
            {
                // NOT IN () actually means everything so use a tautology
                if ($negate)
                {
                    return '1=1';
                }
                // IN () actually means nothing so use a contradiction
                else
                {
                    return '1=0';
                }
            }
        }

        if (!is_array($array))
        {
            $array = array($array);
        }

        if (sizeof($array) == 1)
        {
            @reset($array);
            $var = current($array);

            return $field . ($negate ? ' <> ' : ' = ') . $var;
        }
        else
        {
            return $field . ($negate ? ' NOT IN ' : ' IN ') . '(' . implode(', ', $array) . ')';
        }
    }

$elapsed = microtime(true) - $start;

echo "\r\ntook $elapsed seconds";
echo "\r\ngot $total rows back";
?> 
```

这会执行三个查询。首先获取目标用户发布的所有主题以及他们在每个主题中发布的次数。第二个获取第一个查询中每个主题实际有多少回复。然后有一些 PHP 代码来查看目标用户发布了哪些主题的所有帖子。之后，代码（在我的更改之前）删除了所有这些主题。

总的来说，在我看来，通过执行以下操作可以更好地编写它：

```
SELECT t.topic_id 
FROM phpbb_topics AS t 
JOIN phpbb_posts AS p1
   ON p1.topic_id = t.topic_id
      AND p1.poster_id = $poster_id
LEFT JOIN phpbb_posts AS p2 
   ON p2.topic_id = t.topic_id 
      AND p2.poster_id <> $poster_id
WHERE p2.poster_id IS NULL; 
```

或者也许是这样：

```
SELECT t.topic_id 
FROM phpbb_topics AS t 
JOIN phpbb_posts AS p1
   ON p1.topic_id = t.topic_id
      AND p1.poster_id = $poster_id
      AND t.topic_poster = $poster_id
      AND t.topic_last_poster_id = $poster_id
LEFT JOIN phpbb_posts AS p2 
   ON p2.topic_id = t.topic_id 
      AND p2.poster_id <> $poster_id
WHERE p2.poster_id IS NULL 
```

[由于MySQL 的缓存](https://stackoverflow.com/questions/13778781/sql-cache-interfering-with-my-attempts-to-do-query-optimization)，测试这实际上非常困难，但是......从我能够做的测试来看，phpBB 目前正在做的方式似乎实际上更快。这让我很惊讶。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T20:10:11.143

在我看来，你是在正确的轨道上。尝试为您在连接中使用的所有列添加索引，因为这通常可以大大提高连接速度。

# json - 带有 json 的 Google Maps API 3 MarkerClusterer

> ID：13781255
> 
> 赞同：2
> 
> 时间：2012-12-08T19:50:15.097
> 
> 标签：json, maps

我有谷歌地图读取一个 json 文件来显示纬度/经度。json 文件来自提供的示例，但我在文件顶部添加了自己的 json 数据。

问题是，当我开始删除一些示例 json 数据时，地图停止显示标记。我的 json 数据集大约是前 100 条记录。

现在，我将计数限制为仅显示前 102 条记录，但想消除所有示例 json 数据？

[http://www.dwellcation.com/maptest2.html](http://www.dwellcation.com/maptest2.html)上的示例

# python - django sphinx search 总是没有从查询中得到

> ID：13781259
> 
> 赞同：0
> 
> 时间：2012-12-08T19:51:05.893
> 
> 标签：python, django, centos, sphinx, wsgi

我使用这部分代码从 sphinx 获取文档，但 sphinx 查询总是返回 None。但是，如果我从命令行执行代码，我会得到正确的结果，有什么问题吗？

```
def search_query(query, offset=0):
    mode = SPH_MATCH_EXTENDED
    host = 'localhost'
    port = 9312
    index = 'rss_item'
    filtercol = 'group_id'
    filtervals = []
    sortby = '-@weights'
    groupby = 'id'
    groupsort = '@group desc'
    limit = 30

    # do query
    cl = SphinxClient()
    cl.SetServer ( host, port )
    cl.SetWeights ( [100, 1] )
    cl.SetMatchMode ( mode )

    #cl.SetSortMode(SPH_SORT_TIME_SEGMENTS)
    if limit:
        cl.SetLimits ( offset, limit, max(limit,1000) )
    res = cl.Query ( query, index )

    docs =[]
    for item in res['matches']:
        docs.append(item['id'])

    return docs

# this is django view
def search(request):
    q = request.GET.get('q', '')
    offset = int(request.GET.get('older', 0))
    docs=search_query(q, offset)

    result = Item.objects.filter(id__in=docs).all()

    objects = dict([(obj.id, obj) for obj in result])
    sorted_objects = [objects[id] for id in docs]

    result = sorted_objects

    return render_to_response('rss/_items.html',
                              {'latest_items':result, 'offset':offset+30,'q':q},
                              context_instance=RequestContext(request)) 
```

服务器：centos6，狮身人面像：2.0.5，django：1.4.2，apache/wsgi

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T16:45:12.027

解决问题，关闭 Selinux 并重新启动服务器，我通过以下命令收听 apache 进程：

```
ps auxw | grep httpd | awk '{print"-p " $2}' | xargs strace 
```

并查看访问 apache 到 sphinx 和 memcache 的权限被拒绝

# spring - Hibernate Transactions 在测试时不会回滚

> ID：13781263
> 
> 赞同：1
> 
> 时间：2012-12-08T19:51:21.897
> 
> 标签：spring, hibernate, unit-testing, transactions

我正在使用 Spring 3，我使用 Hibernate3 作为 O/R 映射器。在测试我的 DAO 类时，我打算将我的测试类声明为@Transactional，以便我可以回滚数据库中的内容。DAO 类工作正常，但是回滚永远不会发生。这就是我的测试类的样子：

```
 @BeforeTransaction
    public void createTestData() {
            // instantiate User objects
    }

    @Before
    public void insertTestData() {
        jdbcTemplate.update("INSERT INTO USER VALUES" + user1);
        jdbcTemplate.update("INSERT INTO USER VALUES" + user2);
        jdbcTemplate.update("INSERT INTO USER VALUES" + user3);
        }

    @Test
    @Rollback(true)
    public void testCheckAvailability() {
        boolean trueResult = userDao.checkAvailability("shaaadi");
        boolean falseResult = userDao.checkAvailability("elthefar");
            assertEquals("Invalid output", true, trueResult);
            assertEquals("Invalid output", false, falseResult);
    }

} 
```

不要忘记 xml 文件的内容：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:p="http://www.springframework.org/schema/p"
    xmlns:tx="http://www.springframework.org/schema/tx"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
                http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.1.xsd">
    <tx:annotation-driven transaction-manager="transactionManager"/>
    <bean 
    class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
        <property name="location">
            <value>/database.properties</value>
        </property>
    </bean>
    <bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
        <property name="driverClassName"><value>${jdbc.driverClassName}</value></property>
        <property name="url"><value>${jdbc.url}</value></property>
        <property name="username"><value>${jdbc.username}</value></property>
        <property name="password"><value>${jdbc.password}</value></property>

    </bean>

    <bean id="sessionFactory" 
        class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean"
        p:dataSource-ref="dataSource">
        <property name="annotatedClasses">
        <list>
            <value>ir.cms.domain.user.User</value>
        </list>
        </property>
        <property name="hibernateProperties">
            <value>
            hibernate.format_sql=true
            hibernate.dialect=org.hibernate.dialect.MySQLDialect
            </value>
        </property>
    </bean>

        <bean id="transactionManager" 
          class="org.springframework.orm.hibernate3.HibernateTransactionManager"
          p:sessionFactory-ref="sessionFactory" />

    <bean id="userDao" 
        class="ir.cms.dao.user.impl.UserDaoImpl"
        p:sessionFactory-ref="sessionFactory" />

</beans> 
```

最后，我应该补充一点，DAO 类不是事务性的，仅被注释为 @Repository。我很感激任何建议:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T00:29:27.267

我的问题终于解决了。我正在使用 MySQL，并且 InnoDB 模式已关闭。

# mysql - 操作数应包含 1 列

> ID：13781267
> 
> 赞同：2
> 
> 时间：2012-12-08T19:51:45.480
> 
> 标签：mysql, sql, phpbb, mysql-error-1241

```
SELECT topic_id
FROM phpbb_topics AS t
WHERE t.topic_id IN (
    SELECT p.topic_id, COUNT(p.post_id) AS total_posts
    FROM phpbb_posts AS p
    WHERE p.poster_id = 61640
    GROUP BY p.topic_id
    HAVING t.topic_replies_real = total_posts - 1
); 
```

该查询给我以下错误：

错误代码：1241。操作数应包含 1 列

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T19:53:04.253

您不应该在子查询中包含`COUNT(p.post_id) AS total_posts`在`SELECT`列表中。只是

```
SELECT topic_id   
FROM phpbb_topics AS t
WHERE t.topic_id IN (
    SELECT p.topic_id --, COUNT(p.post_id) AS total_posts 
    FROM phpbb_posts AS p
    WHERE p.poster_id = 61640
    GROUP BY p.topic_id
    HAVING t.topic_replies_real = COUNT(p.post_id) - 1
); 
```

# python - python中的函数调用

> ID：13781272
> 
> 赞同：1
> 
> 时间：2012-12-08T19:52:45.957
> 
> 标签：python

我写了一个函数，我尝试调用它，但它给了我错误

```
 NameError: name 'fun' is not defined 
```

例子：

```
(p1,p2) = fun(price1,price2)

def fun(price1,price2):
  do something 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T19:54:21.870

您必须先定义函数，然后才能调用它们。Python 中的函数定义与其他任何语句一样是可执行语句，并按照它们在源文件中出现的顺序执行。将你的`def fun`块移动到你调用它的地方之前。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-08T19:55:18.287

在像这样的独立脚本中，您必须在调用它之前定义该函数。所以只需将其更改为：

```
def fun(price1,price2):
    do something

(p1,p2) = fun(price1,price2) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T19:54:42.960

在我看来，解释器在定义函数之前正在运行调用函数的代码行。您需要切换它们，或者将函数调用代码本身包装在一个函数中，`main()`并在定义完所有内容后调用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-08T19:55:43.393

如果这是一个独立的脚本，那么您需要`fun`在定义它之后调用。

```
def fun(price1,price2):
  do something

(p1,p2) = fun(price1,price2) 
```

# android - 无法解析服务器返回的 JSON

> ID：13781275
> 
> 赞同：1
> 
> 时间：2012-12-08T19:53:02.503
> 
> 标签：android, json, sencha-touch-2

当我在我的 android 2.3.5 上使用 Sencha Touch 2 时，我看到错误：“无法解析服务器返回的 JSON”。当我从桌面（Chrome 浏览器）运行这个应用程序时 - 它工作正常。

我的 Json 是有效的：

```
{
  "status": "OK",
  "result": [
    {
      "key": "music",
      "count": 3
    },
    {
      "key": "cinema",
      "count": 13
    },
    {
      "key": "theatre",
      "count": 1
    },
    {
      "key": "nightlife",
      "count": 0
    },
    {
      "key": "exhibition",
      "count": 14
    },
    {
      "key": "restaurant",
      "count": 0
    },
    {
      "key": "sport",
      "count": 1
    },
    {
      "key": "social",
      "count": 2
    },
    {
      "key": "conference",
      "count": 4
    },
    {
      "key": "festival",
      "count": 0
    },
    {
      "key": "other",
      "count": 0
    }
  ]
} 
```

编辑：我使用商店加载日期：

```
store.load({
       callback: function (records, operation, success){
        console.log('loaded');
      },
      scope: this
    }); 
```

存储配置：

```
Ext.define('EIA.store.Categories', {
extend: 'Ext.data.Store',
config: {
  model: 'EIA.model.Category',
  proxy: {
    type: 'ajax',
    method: 'GET',
    url: 'URL',
    reader: {
      type: 'json',
      rootProperty: 'result'
     }
   }
 }
}); 
```

# php - 应用访问令牌销毁用户访问令牌并断开用户

> ID：13781280
> 
> 赞同：2
> 
> 时间：2012-12-08T19:53:29.590
> 
> 标签：php, facebook, facebook-graph-api

在我的 Facebook 应用程序中，我是用户：api('me/something') 来查询图表，一切都很好，直到我达到朋友排名。

我想让所有使用该应用程序的用户成为朋友。当我找到一种使用 app_id 的方法时，就像这样：

```
 $facebook->api($this->app_id .'/scores/'); 
```

这段代码在某个控制器内，我正在使用 jquery ajax 请求加载它，当我这样做时，我想要的数据有效，我得到了朋友。但是，当我刷新页面时，恰好在那之后，我得到了错误：

```
An active access token must be used to query information about the current user 
```

再次刷新，一切都恢复了，非常感谢谁能提供帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T07:55:45.390

问题解决了，我只是在实例化用户之前在某处调用了 $facebook->api->('me') 。

# c++ - C++ 集合类

> ID：13781283
> 
> 赞同：0
> 
> 时间：2012-12-08T19:53:38.293
> 
> 标签：c++

我正在自学 C++。如果您正在制作一个`Class`只有一个成员变量是“X”对象集合的成员变量，（无论 X 可能是什么）只有一个默认构造函数和一个解构函数就足够了，它似乎纯粹是处理对象集合？谢谢。

编辑：抱歉应该更清楚。举个不同的例子，如果你有一个“Aclass”类，它有一个int、一个字符串和另一个类的对象向量，你会建议“Aclass”类有一个带参数的构造函数吗？即`Aclass(int i, string s);`，您是否也需要在构造函数中包含向量？我有点困惑。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T19:57:18.820

如果“集合'x'对象”是指“'x'对象的标准容器”，而“足够”是指“足够不用担心资源管理”，那么是的。您或第三方制作的任何精心编写的容器也是如此。

这也是假设您的 X 对象正在正确处理*它们的*资源。并且它们具有与您放入它们的容器兼容的语义。

编辑

如果您可以让对象填充所有内容的默认值，则不需要这样的构造函数。即空容器、归零成员（或未初始化？-_-）等。

如果您的对象将处于无效状态，或者您希望运行某种自定义逻辑，则您只需要一个自定义构造函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T19:56:49.790

你的意思是足以正确处理内存？取决于类型`X`。例如，如果你有一个`vector<string>`数据成员，你就不必在你的类中做任何手动的内存管理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T20:18:48.987

对于类，您可以编写自己的构造函数，它显示了如何构造内部对象，即

```
class A{
    string s;
    int x;
    A(string t):s(t), x(17){} // x is always 17 after construction
} 
```

但是如果内部对象是默认可构造的，您可以保留它的构造，默认情况下它将是可构造的。

```
A(int l):x(l){} 
```

相当于

```
A(int l):x(l), s(){} 
```

（原始类型除外），默认情况下可能包含垃圾

如果使用 的默认构造函数`A`，则所有内部对象都将默认构造。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-08T20:24:24.780

如果`collection`您的意思是标准库类，则需要复制 ctor 和赋值 operator= 重载。

std::map 和 std::set 需要额外的比较运算符<重载。std::unorderd_map 和 std::unordered_set 需要一个专门针对您的类型的 std::hash 。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-08T20:43:08.467

通常您不必定义默认构造函数。如果需要并且没有定义构造函数，编译器将隐式声明一个默认构造函数。除了默认构造函数之外，定义其他构造函数（如您提到的构造函数）通常会很有用。在这种情况下，您需要同时定义：

```
class A
{
public:

    string s;
    int x;

    // default constructor, no arguments
    A(): x(), s() {}

    // constructor
    A(int i, string t): x(i), s(t) {}
}

int main()
{
    A a1;
    A a2(5, "text");
    vector<A> ls;
    return 0;
} 
```

正如 pwned 所提到的，为了在 STL 容器（例如向量）中使用您的类 A，需要 A 具有示例中的默认构造函数（用户定义的或隐式的）。

# python - 如何在 Heroku 上查看数据库

> ID：13781287
> 
> 赞同：0
> 
> 时间：2012-12-08T19:54:12.053
> 
> 标签：python, database, heroku

如何查看我的 heroku Web 应用程序的数据库？

我只想验证用户是否已正确注册等。

我正在使用 Flask-SQLAlchemy Python，如果这有所作为的话。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T21:47:29.363

您可以使用 PGAdmin 之类的工具直接连接到它，查看`heroku config`应用程序的输出以获取您可以分解以在 GUI 工具中使用的数据库 URL。

# php - PHP 编码（mcrypt 和 base64）返回奇怪的字符

> ID：13781293
> 
> 赞同：1
> 
> 时间：2012-12-08T19:55:01.943
> 
> 标签：php, encoding

经过数小时的搜索，我无所适从。

我最初的问题是我多次使用的加密和解密例程开始返回垃圾。

我想重写它们并编写了一个小程序来生成加密密钥。

那也返回垃圾。

我尝试了简单的 base64 编码/解码。结果相同。

我重新保存了我的页面并确保编码是 utf-8 并且 unicode 规范化设置为“无”。

没有喜悦。

输出告诉我它是 utf-8，但 utf-8 解码返回的内容不清晰。

这是密钥生成器。它应该可以工作...但是....arrrgh！我希望有人能帮忙

```
<?php
mb_internal_encoding('UTF-8');

$td = mcrypt_module_open('rijndael-256', '', 'ecb', '');
$size = mcrypt_enc_get_iv_size($td);
$key = mcrypt_create_iv ($size,MCRYPT_DEV_RANDOM);

 echo "your key is : ".$key.'<br>'; 
```

?>

# ruby-on-rails - 如何使用acts_as_taggable_on 设置“每个标签的最大长度验证”？

> ID：13781294
> 
> 赞同：2
> 
> 时间：2012-12-08T19:55:03.967
> 
> 标签：ruby-on-rails, ruby-on-rails-3, acts-as-taggable-on

我刚刚为用户模型设置了验证。我的用户模型中的代码就是这样。
如果我想为每个标签添加最大长度验证，我应该添加什么？
如果可能的话，我也想知道更短的方法来编码这些整个验证。

```
 acts_as_taggable_on :tags
  validates_presence_of :tag_list,
                        :message => "Create at least 1 tag"
  validates_size_of     :tag_list,
                        :maximum => 4,
                        :message => '4 tags maximum' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T00:47:40.657

```
validate :max_tag_size # HERE WITH VALIDATE - NOT VALIDATES!

def max_tag_size
  errors[:tag_list] << "4 tags maximum" if self.tag_list.split(",").count > 4
  errors[:tag_list] << "tag lenght < 10 letters " if self.tag_list.split(",").collect(&:length).max >= 10
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T04:35:57.620

我尝试了很多东西，终于找到了解决方法！
这使它工作正常:)

```
validate :max_tag_size 
def max_tag_size
 errors[:tag_list] << "2 tags maximum" if tag_list.count > 2
 self.tag_list.each do |tag|
  errors[:tag_list] << "#{tag} must be shorter than 10 characters maximum" if tag.length > 10
 end
end 
```

# matlab - Matlab中的黑色运动分割

> ID：13781298
> 
> 赞同：1
> 
> 时间：2012-12-08T19:55:24.457
> 
> 标签：matlab, image-processing, background-subtraction

我有一个视频，我正在使用背景减法和运动分割。视频中的地板是黑色的，所以当我得到剪影时，脚和腿的一部分被切掉了。有没有解决这个问题？这就是它的样子。![在此处输入图像描述](../Images/eff7598737e5643ac68ba189fe440a6d.png)

![在此处输入图像描述](../Images/d427c0b9cc921d699f716c726df932a2.png)

这是背景图像。这是我的一段代码......

```
clear all
close all
clc
% Read the video in the video object Mov
MM = mmreader('kassie_test_video.wmv');
% Read in all video frames.
Mov = read(MM);
% Get the number of frames.
FrameNum = MM.NumberOfFrames;
% load 'object_data.mat'
BackgroundImage = (Mov(:,:,:,98)); % background image
% set the sampling rate as well as the threshold for binary image.
downSamplingRate = MM.FrameRate;
%%
index = 1;
clear IM
clear Images
sf=10;ef=sf+30;
for ii =sf:ef

    % Extract next frame
    Im = im2double(Mov(:,:,:,ii));

    % Background subtraction
    Ib = rgb2gray(abs(im2double((Mov(:,:,:,ii)))-im2double(BackgroundImage)));
    % conversion to binary image.
    Thresh = graythresh(Ib);
    Ib = im2bw(Ib, Thresh);
    se = strel('square',1);
    Ib = imerode(Ib,se);    % Erode the image
    Ib = medfilt2(Ib);      % median filtering
    Ib = imfill(Ib,'holes');    % fill the holes in the image
    imshow(Ib,[])
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T05:24:14.497

在计算机视觉中仅使用像素处理而不结合更高级别的语义信息可以实现的目标是有限的。似乎他唯一让你觉得腿不见了的东西就是**你**对身体应该是什么样子的高级知识。这里真正的问题是：像素中是否有任何真实信息？如果碰巧腿与背景颜色完全相同，除非您结合高级语义信息，否则您无能为力。

# cocos2d-iphone - 为什么 6.0 模拟器上的方向错误，但在 iPhone 4 (4.3.3) 上很好？

> ID：13781299
> 
> 赞同：0
> 
> 时间：2012-12-08T19:55:39.667
> 
> 标签：cocos2d-iphone, ios6, ios-simulator, iphone-5, iphone-4

我在 iOS 版本 4.3.3 的 iPhone 4 上测试我的 cocos2d-iphone 1.0.1 游戏。这是一个横向模式的游戏。

我最近将 Xcode 更新到 4.5.2，它带有 iOS 模拟器 6.0。

如果我在模拟器上运行我的游戏（硬件设置为视网膜 iPhone 4），设备窗口会旋转到预期的位置，但游戏本身似乎向右旋转了 90 度。触摸似乎也被旋转了。所以基本上，我的设备窗口方向正确，但游戏本身是旋转的。

当我在 iPhone 4 上运行它时，一切正常。

可能发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T03:07:46.280

这解决了它：[Cocos2D with iOS6 faulty rotation](https://stackoverflow.com/questions/12681813/cocos2d-with-ios6-faulty-rotation)

只需要使用 Cocos2d 1.1 链接，即：[https ://github.com/cocos2d/cocos2d-iphone/blob/develop/templates/Xcode4_templates/cocos2d.xctemplate/AppDelegate.m](https://github.com/cocos2d/cocos2d-iphone/blob/develop/templates/Xcode4_templates/cocos2d.xctemplate/AppDelegate.m)

# python - 如何在 Python 中模拟等效的传递引用？

> ID：13781302
> 
> 赞同：1
> 
> 时间：2012-12-08T19:55:56.200
> 
> 标签：python, integer, pass-by-reference, mutable

我本质上需要的是一个可变整数，它可以完成下面的等效操作，而不必求助于使用单元素列表。

下面是一个**人为的代码示例**，它代表了我的实际用例**[1]的本质**

```
>>> a = [5]  
>>> b = [77]  
>>> def swap(num1, num2):  
...     temp = num1[0]  
...     num1[0] = num2[0]  
...     num2[0] = temp  
>>> swap(a, b)  
>>> a  
[77]  
>>> b  
[5] 
```

**[1]**我的实际用例更接近这个 -> [在 Tkinter 中使用按钮调用函数后返回一个值](https://stackoverflow.com/questions/5374354/returning-a-value-after-calling-a-function-with-a-button-in-tkinter)
我需要从与 Tkinter 小部件关联的回调函数返回一个值，并且我想避免使用全局变量。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-08T19:57:01.107

恐怕你必须使用一个类。Python 是一种高级语言，不支持 C（和 C++）中存在的指针恶作剧，因此您需要使用一个保存整数值的对象，然后您可以对其进行修改。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T22:39:58.897

根据评论，您的目标是取回您不直接调用的函数的返回状态，并且您希望避免使用全局变量。在 C 语言中，您别无选择，只能使用引用，但在 python 中，您比局部变量和（C 风格）全局变量具有更大的灵活性：您可以使用“闭包”让回调直接分配给局部变量。

### 在 Python 3 中

如果您使用 python 3，您可以使用`nonlocal`关键字直接执行此操作。最简单的情况是当您在现场定义回调时：

```
myfunction():
    x = None
    def callback():
        nonlocal x    # Python 3 only 
        x = 5

    gtk.somefunction(callback)  # Executes callback()
    print "My callback returned", x 
```

但是您的回调可能是在其他地方定义的，或者是从许多不同的地方调用的？没问题，只需在现场定义一个捕获真正回调的返回值的包装器：

```
def real_callback():
    return 11

def myfunction():
    x = 0 

    def wrapper():
        nonlocal x     # Python 3 only
        x = real_callback()

    gtk.somefunction(wrapper)
    print "my callback returned", x 
```

这可以通过`wrapper`变成装饰器来掩盖，但那是另一回事。

### Python 2 解决方案

在 python 2 中没有`nonlocal`语句，并且[隐式闭包是只读的](https://stackoverflow.com/a/141710/699305)：如果你在没有`nonlocal`语句的情况下尝试上面的方法，你会得到一个错误。如果您声明它`global`，您可以分配给一个变量，仅此而已。所以，一些诡计是必要的：

首先，该函数`locals()`返回一个包含本地上下文所有变量的字典。`locals()['x']`是局部变量`x`。但`locals()` [通常是只读的。](http://docs.python.org/2/library/functions.html#locals)幸运的是，有一个很好的（或糟糕的）解决方法：出于自身原因，`exec` [禁用](https://stackoverflow.com/a/1450341/699305)呈现`locals()`只读的优化......而且，事实证明，它在调用函数的生命周期内保持禁用状态！（在 Python 2.6.6，YMMV 上测试。如果它不起作用，请尝试`exec "a = 0"`）。所以，你可以这样做：

```
def wrapper(callback, context, varname):
    def _callback():
        context[varname] = callback()
    return _callback

def mycode():
    exec ""
    some_library_function(wrapper(real_callback, locals(), 'z'))
    print "The callback returned", z 
```

这比仅使用可变容器作为返回值更可取吗？我猜这是口味问题。但是你可以多次使用同一个包装器，所以从某种意义上说它比 python 3 解决方案更干净......如果你忽略了魔法`exec`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T22:40:46.160

在回调的上下文中（请参阅对 Santiclaus 答案的评论），您可能希望将类似[Queue](http://docs.python.org/3/library/queue.html#module-queue)的内容传递给回调函数，并让回调通过队列发布其结果。然后你的主线程可以在这个队列上等待它的结果。

# android - 在android中设置自定义警报音

> ID：13781304
> 
> 赞同：1
> 
> 时间：2012-12-08T19:56:19.577
> 
> 标签：android, alarm

您好，我想知道如何设置自定义闹钟铃声。

这是我的代码：

```
RingtoneManager.setActualDefaultRingtoneUri(
                    this,
                    RingtoneManager.TYPE_ALARM,
                    newUri
                    ); 
```

它适用于通知/声音但不适用于警报（：S）？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T20:03:33.093

你可以使用这个代码

```
Uri alert = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_ALARM);
 if(alert == null){
     // alert is null, using backup
     alert = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION);
     if(alert == null){  // I can't see this ever being null (as always have a default notification) but just incase
         // alert backup is null, using 2nd backup
         alert = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_RINGTONE);               
     }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-19T06:57:23.327

试试这个：

```
Uri ringtoneUri = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_ALARM);
  playRingtone(RingtoneManager.getRingtone(getApplicationContext(), ringtoneUri)); 
```

然后，编写另一个方法**playRingtone(Ringtone newRingtone)**来播放铃声。

```
private void playRingtone(Ringtone newRingtone) {

        if(null != mCurrentRingtone && mCurrentRingtone.isPlaying())
            mCurrentRingtone.stop();

            mCurrentRingtone = newRingtone;

        if(null != newRingtone){
            mCurrentRingtone.play();
        }
    } 
```

# asp.net-mvc-4 - MVC4 缺少登录弹出窗口

> ID：13781308
> 
> 赞同：1
> 
> 时间：2012-12-08T19:56:35.953
> 
> 标签：asp.net-mvc-4

嗨，我刚刚将 mvc4 模板下载到我的 VS2010 中，我有常规的登录视图，而不是许多博主描述的 jquery 弹出窗口，例如这里的[链接](http://msdn.microsoft.com/en-us/vs11trainingcourse_aspnetmvc4_topic2.aspx)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T20:15:16.473

这些文章是为 Visual Studio 11 的 beta 版本编写的。2012 附带的最终模板没有此功能。

# objective-c - 可以在现有程序的附加组件和独立应用程序之间共享信息吗？

> ID：13781310
> 
> 赞同：0
> 
> 时间：2012-12-08T19:56:53.847
> 
> 标签：objective-c, macos, cocoa, communication, data-sharing

> **可能重复：**
> [在 Mac OS X 上进行进程间通信的最佳方式](https://stackoverflow.com/questions/2846337/best-way-to-do-interprocess-communication-on-mac-os-x)

有什么方法可以在 OSX 上的两个独立应用程序之间共享信息？

以下是我的目标：

*   为程序开发一个附加组件，它将用纯 C 编码。
*   开发一个独立的应用程序（cocoa obj-c），它将与我的插件进行通信。

我的应用程序将是我实现我的自定义数据模型和用户界面的地方，然后我想要做的是将数据共享给插件供我使用 - 本质上是设置一个寄生虫程序，它将使用其他程序来做一些事情，以及我为他人准备的程序。

抱歉，如果这有点含糊，我真正想知道的是：这是否可能，我应该这样做（这是编程禁忌吗？），以及哪种方式才是正确的方式如果有可能？

我希望能够实时向我的独立应用程序发送和检索数据。

# c++ - 访问冲突 malloc 和继承 C++

> ID：13781313
> 
> 赞同：1
> 
> 时间：2012-12-08T19:57:31.723
> 
> 标签：c++, access-violation

我有一个包含形状数组的游戏对象（通过 malloc 分配）。形状中有一个点列表，可以继承为多边形。初始化代码：

```
 GameObject g1(true, true);
    Color c(0, 0, 1, 0);
    Point p(100, 100, 0);
    Polygon s(p, c);
    s.addPoint(p);
    s.createRegularShape(4, 50.0f);
    g1.addShape(s); 
```

这是在标题中。

```
 Shape* shapes; 
```

这是它中断的地方（当我尝试访问数据时）

```
void GameObject::draw(unsigned int gameTime)
{
    if(visible)
    {
        for(int i = 0; i < count; i++)
        shapes[i].draw();//Access violation happens here
    }
} 
```

这就是我将 Shape 添加到 Shape 数组的方式。

```
void GameObject::addShape(Shape const& shape)
{
    if(count == size)
    {
        size += 4;
        shapes = (Shape*)realloc(shapes, sizeof(Shape) * size);
    }
    shapes[count] = shape;
    count++;
} 
```

这是我为 Shape 分配内存的地方。当我们需要为形状数组分配内存时，它会在构造函数中调用。

```
void GameObject::clearShapes(int size)
{
    if(count > 0)
        free(shapes);
    shapes = (Shape*)malloc(sizeof(Shape) * size);
    count = 0;
    GameObject::size = size;
} 
```

所以基本上，我做错了什么？我如何从此代码中获得访问冲突？这些数据似乎都是正确的大小并且是合法的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T20:01:21.670

使用 malloc() 时，对象的构造函数不会运行。你可以猜到这会产生各种各样的问题。改为使用`new`。

不要在 C++ 中使用 malloc() 来创建对象。

这个：

```
Shape* shapes; 
```

是`Shape`对象数组，*而不是*指针数组`Shape`。这意味着初始内容：

```
shapes = (Shape*)malloc(sizeof(Shape) * size); 
```

然后：

```
shapes = (Shape*)realloc(shapes, sizeof(Shape) * size); 
```

没有建造。所以当你以后这样做时：

```
shapes[count] = shape; 
```

赋值运算符被调用 on `shapes[count]`，这是一个非构造的`Shape`。在我看来，您在这里遇到了未定义的行为。任何类型的运行时错误都是可能的。

摆脱 malloc() 和 realloc()，而是使用一个`std::vector<Shape>`where you `push_back()`new Shapes。如果你想继续使用普通的动态数组，那么你应该切换到一个指针数组：

```
Shape** shapes; 
```

并且只`Shape`在其中保存指针。这当然需要重构你的程序逻辑，我不明白你为什么要继续使用 malloc() 和 realloc()。

# php - 查询结果到变量

> ID：13781321
> 
> 赞同：0
> 
> 时间：2012-12-08T19:58:44.860
> 
> 标签：php, mysql

我有 5 张桌子。我需要从一个表中选择 4 个最近的帖子，并在四个单独的变量中获取这些帖子的 ID，以用于来自其他表的查询：

```
SELECT user FROM table1 WHERE subcategory = "$input" ORDER BY id DESC LIMIT 4; 
```

所以我有我需要的东西。现在，我如何将这四个用户 ID 结果分配给新变量，以便在同一页面上的未来查询中使用。

我需要像这样存储它：

```
$user1 = "Sue";
$user2 = "Dave";
$user3 = "Alicia";
$user4 = "Tim"; 
```

所以我可以这样使用它：

```
SELECT * FROM table2 WHERE user = $user1;
SELECT * FROM table2 WHERE user = $user2;
SELECT * FROM table2 WHERE user = $user3;
SELECT * FROM table2 WHERE user = $user4; 
```

不要混淆这个问题，但是：最终目标是拥有多行但只有四列，其中行中的所有数据都由顶行中的 USER 排序。请务必注意，因为每组行都由其下方数据中包含的内容的描述分隔。这些只是简单的直列。像这样的东西：

```
Sue            Dave             Alicia             Tim
Sue Profile    Dave Profile     Alicia Profile     Tim Profile
>>Answers to questions about work:
Sue Income     Dave Income      Alicia Income      Tim Income
Sue Years      Dave Years       Alicia Years       Tim Years
>>Answers to questions about school:
Sue Degree     Dave Degree      Alicia Degree      Tim Degree
Sue Schools    Dave Schools     Alicia Schools     Tim Schools
>>Answers to questions about life:
Sue Born       Dave Born        Alicia Born        Tim Born
Sue Parents    Dave Parents     Alicia Parents     Tim Parents 
```

如果我可以将 id 结果读入单独的变量，那么对于每个部分（问题），我可以执行以下操作：

```
SELECT * FROM income WHERE user = "Sue";
SELECT * FROM income WHERE user = "Dave";
SELECT * FROM income WHERE user = "Alicia";
SELECT * FROM income WHERE user = "Tim";

SELECT * FROM degree WHERE user = "Sue";
SELECT * FROM degree WHERE user = "Dave";
SELECT * FROM degree WHERE user = "Alicia";
SELECT * FROM degree WHERE user = "Tim"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T20:21:54.290

如果您不想使用 JOINS，那么在执行第一个查询后，您应该使用 foreach 循环...

```
$user=array(); // i would suggest you for making an array
foreach($result_array as $key->$value)
{
    //here you will get the ids in $value['user']
    // and then you can use them in your queries
    // so no need to store them in different variables and remembering them.
    Edited:
    $user[$key] = $value['user'];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T20:08:30.183

虽然您所要求的可以这样实现：

```
$id=1;
${"user".$id}="Sue"; 
```

这样 $user1 就会有“Sue”，为此目的使用数组会很容易，如下所示：

```
$id=1;
$user[$id]="Sue"; 
```

或者更好的是，尝试在查询中使用 Join 一次获取所有数据，然后根据您的需要重新格式化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T20:07:45.370

您应该更好地使用 JOINS 然后运行多个查询。下面是代码...

```
SELECT t1.user, t2.* FROM table1 as t1 LEFT JOIN table2 as t2 ON t1.id = t2.user_id WHERE t1.subcategory = "$input" ORDER BY t1.id DESC LIMIT 4 
```

我希望您可以以**t1.id = t2.user_id的速度更改两个表中的相同键**

# c++ - 使用 char 指针更改短变量的值

> ID：13781325
> 
> 赞同：1
> 
> 时间：2012-12-08T19:59:08.993
> 
> 标签：c++, memory, memory-address

**代码：**

```
int main(){
   short a=1;         // #1
   char *p=(char*)&a;
   *(p)=1;            // #2
   cout << a << endl; // Output: 1
   *(p+1)=2;          // #3
   cout << a << endl; // Output: 513
} 
```

根据我的理解，输出应该如下图所示，257，然后是258。
运行上面的程序时我得到不同的结果有什么原因吗？

![在此处输入图像描述](../Images/ba28c38bd62822ddd569fce9c4404a41.png)

**更新：** 我知道这是未定义的行为，但这是否意味着十进制到二进制的转换没有像往常一样完成：从右到左，而是从左到右完成，例如：

```
binary(a)=1000 0000 | 0000 0000 
```

所以`*(p)=1;`将`binary(a)=1000 0000 | 0000 0000`生成`1`十进制的
，`*(p+1)=2;`并将生成`binary(a)=1000 0000 | 0100 0000`程序`513`
的输出。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T20:01:11.557

> 当我运行上面的程序时，我得到不同的结果有什么原因吗？

是的。与语言无关的答案：因为这个程序调用了未定义的行为。考虑实际可能发生的情况来回答：您的系统具有与您认为的不同的字节序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-08T20:01:14.530

这里发生的情况是因为我们`short`在小端 CPU 架构中有一个 2 字节。该标准不要求架构是 LE，因此在任何情况下，该程序在不同系统上运行时都会产生许多不同的结果。

此处的A`short`以最低有效字节 (LSB) 在内存中布局：

```
 Memory addresses ------>
            LSB          MSB

         0000 0000   0000 0000 
```

`p`指向 LSB 并设置为`1`：

```
 0000 0001   0000 0000 
```

解释为 a 时的结果`short`是 LSB + 256 * MSB，即 1 + 0 * 256 = 1

`p`然后指向 MSB（在下一个内存地址上）并设置为`2`：

```
 0000 0001   0000 0010 
```

解释为 a 时的结果`short`：1 + 2 * 256 = 513

# android - Android ViewPager/PagerAdapter ImageView OutOfMemoryError

> ID：13781327
> 
> 赞同：10
> 
> 时间：2012-12-08T19:59:21.057
> 
> 标签：android, android-viewpager, out-of-memory

我在 StackOverflow 和其他地方看到了类似的各种问题，但这些解决方案似乎都没有解决我的问题，如下所示：

我有一个带有简单 PagerAdapter 的 ViewPager。每个“页面”都有一个与之关联的 XML 布局，其中至少包含一个 TextView、一个 ImageView，有时还包含另一个 TextView。与 ImageView 关联的图像通常在一个维度上为 1000px，在另一个维度上更小，但它们是 8 位索引 gif，因此它们都不会大于 20kB。我将它们设置为 Drawable，它们会适当地缩小以适应分配给它们的空间。

只有6页。当我启动活动时，它工作正常，我什至可以翻到最后一页，但是如果我一直向右翻，然后一直向左翻，我会得到一个 OutOfMemoryError。这对我来说没有意义，因为我认为 ViewPager 应该破坏超过 1 个屏幕之外的页面，并且我正在按照其他地方的建议处理 destroyItem()。

以下是 PagerAdapter 的代码：

```
package doop.doop.dedoop;

import doop.doop.dedoop.R.layout;
import android.content.Context;
import android.support.v4.view.PagerAdapter;
import android.support.v4.view.ViewPager;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ImageView;

public class HelpPagerAdapter extends PagerAdapter{
    private Context applicationContext;
    private Context activityContext;

    public HelpPagerAdapter(Context appContext, Context activContext){
        applicationContext = appContext;
        activityContext = activContext;
    }

    public int getCount() {
        return 6;
    }

    public Object instantiateItem(ViewGroup collection, int position) {
        LayoutInflater inflater = (LayoutInflater) collection.getContext()
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        int resId = 0;
        int ivId = 0;
        int drawId = 0;
        switch (position) {
        case 0:
            resId = R.layout.help1;
            ivId = R.id.helpImage1;
            drawId = R.drawable.left_col_highlight;
            break;
        case 1:
            resId = R.layout.help2;
            ivId = R.id.helpImage2;
            drawId = R.drawable.right_col_highlight;
            break;
        case 2:
            resId = R.layout.help3;
            ivId = R.id.helpImage3;
            drawId = R.drawable.p2win;
            break;
        case 3:
            resId = R.layout.help4;
            ivId = R.id.helpImage4;
            drawId = R.drawable.first_move;
            break;
        case 4:
            resId = R.layout.help5;
            ivId = R.id.helpImage5;
            drawId = R.drawable.screen_bottom;
            break;
        case 5:
            resId = R.layout.help6;
            ivId = R.id.helpImage6;
            drawId = R.drawable.illegal_move;
            break;
        }
        View view = inflater.inflate(resId, null);
        collection.addView(view, 0);

        if (ivId != 0 && drawId != 0) {
            ImageView iv = (ImageView) view.findViewById(ivId);
            iv.setImageDrawable(activityContext.getResources().getDrawable(drawId));
        }

        return view;
    }

    @Override
    public void destroyItem(ViewGroup container, int position, Object object) {
        container.removeView((View)object);   
    }

    @Override
    public boolean isViewFromObject(View arg0, Object arg1) {
        return arg0 == ((View) arg1);
    }

} 
```

以下是其中一种页面布局的示例：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        style="@style/helpPageLayout" >

    <TextView
        style="@style/helpText"
        android:text="@string/help2" />

    <ImageView android:id="@+id/helpImage2"
        style="@style/helpImage" />            

</LinearLayout> 
```

这是整个事情所在的活动：

```
package doop.doop.dedoop;

import android.app.Activity;
import android.graphics.Typeface;
import android.os.Bundle;
import android.support.v4.view.ViewPager;
import android.view.View;
import android.view.ViewGroup;

public class Help extends Activity {

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_help);

        // Set up the ViewPager and its kin
        HelpPagerAdapter adapter = new HelpPagerAdapter(getApplicationContext(), this);
        ViewPager helpPager = (ViewPager) findViewById(R.id.helpPager);
        helpPager.setAdapter(adapter);      

    }

    public void exitHelp(View view) {
        finish();
    }

} 
```

这是该活动的布局：

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/mainHelp"
    android:orientation="vertical"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <android.support.v4.view.ViewPager android:id="@+id/helpPager"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1" />

    <Button
        android:text="@string/helpBack"
        android:onClick="exitHelp"
        style="@style/mainMenuButtons" />

</LinearLayout> 
```

最后，这是错误：

```
12-08 11:55:23.114: E/AndroidRuntime(9090): FATAL EXCEPTION: main
12-08 11:55:23.114: E/AndroidRuntime(9090): java.lang.OutOfMemoryError
12-08 11:55:23.114: E/AndroidRuntime(9090):     at android.graphics.Bitmap.nativeCreate(Native Method)
12-08 11:55:23.114: E/AndroidRuntime(9090):     at android.graphics.Bitmap.createBitmap(Bitmap.java:605)
12-08 11:55:23.114: E/AndroidRuntime(9090):     at android.graphics.Bitmap.createBitmap(Bitmap.java:551)
12-08 11:55:23.114: E/AndroidRuntime(9090):     at android.graphics.Bitmap.createScaledBitmap(Bitmap.java:437)
12-08 11:55:23.114: E/AndroidRuntime(9090):     at android.graphics.BitmapFactory.finishDecode(BitmapFactory.java:618)
12-08 11:55:23.114: E/AndroidRuntime(9090):     at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:593)
12-08 11:55:23.114: E/AndroidRuntime(9090):     at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:445)
12-08 11:55:23.114: E/AndroidRuntime(9090):     at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:775)
12-08 11:55:23.114: E/AndroidRuntime(9090):     at android.content.res.Resources.loadDrawable(Resources.java:1968)
12-08 11:55:23.114: E/AndroidRuntime(9090):     at android.content.res.Resources.getDrawable(Resources.java:677)
12-08 11:55:23.114: E/AndroidRuntime(9090):     at doop.doop.dedoop.HelpPagerAdapter.instantiateItem(HelpPagerAdapter.java:69)
12-08 11:55:23.114: E/AndroidRuntime(9090):     at android.support.v4.view.ViewPager.addNewItem(ViewPager.java:801)
12-08 11:55:23.114: E/AndroidRuntime(9090):     at android.support.v4.view.ViewPager.populate(ViewPager.java:962)
12-08 11:55:23.114: E/AndroidRuntime(9090):     at android.support.v4.view.ViewPager.populate(ViewPager.java:881)
12-08 11:55:23.114: E/AndroidRuntime(9090):     at android.support.v4.view.ViewPager$3.run(ViewPager.java:237)
12-08 11:55:23.114: E/AndroidRuntime(9090):     at android.os.Handler.handleCallback(Handler.java:605)
12-08 11:55:23.114: E/AndroidRuntime(9090):     at android.os.Handler.dispatchMessage(Handler.java:92)
12-08 11:55:23.114: E/AndroidRuntime(9090):     at android.os.Looper.loop(Looper.java:137)
12-08 11:55:23.114: E/AndroidRuntime(9090):     at android.app.ActivityThread.main(ActivityThread.java:4514)
12-08 11:55:23.114: E/AndroidRuntime(9090):     at java.lang.reflect.Method.invokeNative(Native Method)
12-08 11:55:23.114: E/AndroidRuntime(9090):     at java.lang.reflect.Method.invoke(Method.java:511)
12-08 11:55:23.114: E/AndroidRuntime(9090):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
12-08 11:55:23.114: E/AndroidRuntime(9090):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
12-08 11:55:23.114: E/AndroidRuntime(9090):     at dalvik.system.NativeStart.main(Native Method) 
```

我想可能值得注意的是，这仅发生在我目前正在测试的两台设备中的一台上（三星 Galaxy SIII，但不是 Kindle Fire HD 8.9）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T13:42:42.730

您可以尝试以下几件事：

*   使用 PNG 作为图像，尝试一些 png-crunch-app（或使用 photoshop > 导出为网络）
*   **回收你的观点：**

将您从容器中删除的视图保存在 ArrayList 中的 destroyItem() 中。在 instantiateItem() 期间，首先检查您的数组列表中是否有未使用的视图，如果有，请使用该视图。如果没有，请充气。这样，您只需增加 3 个视图，并回收其余视图。[在这里](http://developer.android.com/training/improving-layouts/smooth-scrolling.html#ViewHolder)查看有关 ViewHolders 的更多信息，以防止调用 findViewById() 过多。

*   **更有效地加载位图：**

使用带有 inJustDecodeBounds = true 的 BitmapFactory.Options 来解码您的位图并检查位图的边界。然后使用 inSampleSize 解码较小的版本。如果这与您相关，请查看[此处](http://developer.android.com/training/displaying-bitmaps/index.html)了解更多信息。

*   **主要项目**

利用 pagerAdapter 的[setPrimaryItem()](https://stackoverflow.com/a/8638772/964703)。并在那里加载位图。这样，您只加载当前可见项目的位图，从而减少内存负载。但是有点破坏了预加载上一页/下一页以获得更流畅的滚动和更好的用户体验的意义。

示例代码（未经测试！）

```
private ImageView primaryView;

@Override
public void setPrimaryItem(ViewGroup container, int position, Object object)
{
    super.setPrimaryItem(container, position, object);
    if (this.primaryView == object)
    {
        //this method might be called a lot, so don't do anything unless the primaryView changes!
        return ;
    }
    if (this.primaryView != null)
    {
        //recycle the previous bitmap to clear memory
        ((BitmapDrawable)this.primaryView.getDrawable()).getBitmap().recycle();
    }
    //set new primary view
    this.primaryView = (ImageView) object;
    int resourceId = 0;//get image resource id here
    //load bitmap here efficiently
    this.primaryView.setImageResource(resourceId);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T10:36:24.497

```
helpPager.setOffscreenPageLimit(MAX_PAGES); 
```

当页面超出此范围时，它将销毁。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-23T09:30:40.130

在清单文件的应用程序标记中设置 android:largeHeap="true" 解决了我在 viewpager 中出现 outOfMemory 异常的问题。

# php - 为什么 mysqli_num_rows 不返回值？

> ID：13781328
> 
> 赞同：0
> 
> 时间：2012-12-08T19:59:34.677
> 
> 标签：php, mysql

这是我网站的代码。它旨在注册新用户，只有登录的管理员才能执行此操作。该帐户已成功创建，但它似乎没有为 mysqli_num_rows 返回 1。我打印了 num_rows 返回的值，但没有任何结果，甚至没有 0。我已经为此工作了好几天，我对 php 编码非常陌生，所以这可能是一个明显的错误，但我看不到它。任何帮助将不胜感激。我有搜索谷歌，但找不到任何东西。

```
if($_SERVER['REQUEST_METHOD']=="POST"){
    $name = mysqli_real_escape_string($_POST['fname']);
    $email = mysqli_real_escape_string($_POST['email']);
    $user = mysqli_real_escape_string($_POST['user']);
    $pass = mysqli_real_escape_string(md5($_POST['password']));
    $authority = mysqli_real_escape_string($_POST['use']);

    $queryCheck = "SELECT `user` FROM `user` WHERE `user`='$user';";
    $resultCheck = mysqli_query($link, $queryCheck);
    $rowCheck = mysqli_num_rows($resultCheck);
    if($rowCheck != 1){
    $query = "INSERT INTO `user` (`id`, `name`, `email`,`user`,`pass`) VALUES ($authority,'$name','$email','$user','$pass');";

    //echo $query;

    $result = mysqli_query($link, $query);
    $row = mysqli_affected_rows($result);

    if($row == 1){
        echo "User Created Successfully!<br/>";
        echo '<br/><br/><br/><a href="admin.php">Return to Administration Page</a>';

    }else{
        echo "User was not created, Please try again.";
    }
    }else{
        echo 'User already exists.';
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T17:28:58.203

我发现你必须使用 mysqli_affected_rows 作为 mysql 中的插入短语。

# java - 简单的写入和读取字节

> ID：13781330
> 
> 赞同：0
> 
> 时间：2012-12-08T19:59:51.700
> 
> 标签：java

嘿，我无法弄清楚这里有什么问题。

写入文件：

```
byte[] dim = new byte[2];
dim[0] = (byte) deImgWidth; // Input 384
dim[1] = (byte) deImgHeight; // Input 216
out.write(dim); 
```

从文件中读取

```
byte[] file = new byte[(int) f.length()];
FileInputStream fs = new FileInputStream(f);
fs.read(file);
deImgWidth = ((file[0]) & 0xFF); // output 128
deImgHeight = ((file[1]) & 0xFF); // output 216 
```

为什么我可以检索相同的 deImgHeight 值但不能检索相同的 deImgWidth 值？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-08T20:13:17.630

384 不适合无符号字节，而 216 适合。这就是为什么在铸造前者时你必须丢失信息。

[缩小转换](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.1.3)只保留数字的最低位，因此如果您在`& 0xFF`读取值时执行额外操作，您可以稍后恢复符号（因为 Java 使用二进制补码表示负数）。216 = 0b11011000（适合 8 位）可以进行无损转换，但是 384 = 0b110000000（即 9 位） - 当你取低 8 位时，你最终得到 128。

# jquery - 类似 Jquery 手风琴的内容切换

> ID：13781333
> 
> 赞同：2
> 
> 时间：2012-12-08T20:00:12.413
> 
> 标签：jquery, accordion

我有一个非常基本的手风琴式 (http://jqueryui.com/accordion/) 内容显示系统。我是新手，也很固执，所以我没有使用提供的那个。这是代码：

```
 $(".listitem").click(function(){
            $("#info"+$(this).attr('id')).slideToggle("fast");
        });

<h3 class="listitem" id="1">title 1</h3>
<div id="info1">blah blah blah 1</div>

<h3 class="listitem" id="2">title 2</h3>
<div id="info2">blah blah blah 2</div> 
```

所有列表项的 id 为 1-6 或其他数字，隐藏内容的 id 为“info”+相应的数字。我的问题是我怎样才能做到这一点，当点击一个新项目时，它会关闭前一个项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T20:04:12.733

跟踪哪个是打开的。

```
(function() {
    var open = -1;
    $(".listitem").click(function() {
        var id = this.getAttribute("data-page");
        if( id != open) {
            $("#info"+id+", #info"+open).slideToggle("fast");
            open = id;
        }
    });
})();

<h3 class="listitem" data-page="1">title 1</h3>
<div id="info1">blah blah blah 1</div>

<h3 class="listitem" data-page="2">title 2</h3>
<div id="info2">blah blah blah 2</div> 
```

请注意，我已将您的`id`属性替换为`data-page`，因为在 HTML4 中，拥有以数字开头的 ID 是无效的，并且无论如何都不恰当地使用 ID。此外，`$(this).attr(...)`为了提高效率，我将其替换为等效的香草 JS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T20:09:55.670

```
$(".listitem").click(function(){
         var content=$(this).next();
        $('.listitem+div:visible').slideToggle("fast",function(){
                content.slideToggle("fast");
              });
        }); 
```

这里的技巧是`:visible`在 jQuery 中使用选择器；它只选择与前一个选择器匹配的可见元素，一旦所有可见内容都被隐藏，刚刚单击的内容将打开

也`.listitem+div`意味着选择 listitem 类的所有元素之后的 div

# android - Android：BitmapFactory.decodeResource() 和 BitmapFactory.decodeFile() 结果之间的区别？

> ID：13781334
> 
> 赞同：0
> 
> 时间：2012-12-08T20:00:16.493
> 
> 标签：android, image-processing, bitmap

[当我将bitmap.getPixels()](http://developer.android.com/reference/android/graphics/Bitmap.html#getPixels%28int%5B%5D,%20int,%20int,%20int,%20int,%20int,%20int%29)返回的像素数据传递给它时，我注意到崩溃（在执行一些图像处理的外部本机库中） 。

如果我将图像打包在应用程序中，在 drawables 文件夹中并加载位图

```
BitmapFactory.decodeResource() 
```

然后用

```
bitmap.getPixels() 
```

没有崩溃，一切都按预期工作。但是，如果我从文件系统加载相同的图像

```
BitmapFactory.decodeFile() 
```

然后用

```
bitmap.getPixels() 
```

并放弃它，本机库崩溃。

这两个调用将图像处理为位图的方式有区别吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T20:20:53.903

阅读 Android 源代码 有一个有趣的区别：`decodeFile`如果传递的文件是资产，则该方法可能会调用不同的本地位图解码器，而不`decodeResource`会这样做。

```
if (is instanceof AssetManager.AssetInputStream) {
            bm = nativeDecodeAsset(((AssetManager.AssetInputStream) is).getAssetInt(),
                    outPadding, opts); 
```

但是，崩溃很可能是您的本机代码中的错误。用错误的指针和/或缓冲区溢出弄乱堆栈帧通常会导致像这样的奇怪崩溃。尝试检查崩溃前运行的所有本机代码，看看是否可以发现任何类似的内存问题。

# ruby-on-rails - 在循环中添加到 ruby on rails 数据中的类值

> ID：13781335
> 
> 赞同：0
> 
> 时间：2012-12-08T20:00:18.110
> 
> 标签：ruby-on-rails, ruby

我有这样的代码：

```
 def accum_search

    if params[:akbcap].present?
      akbcap_array = [12,18,19,20,25,30,35,36,38,40,41,42,44,45,46,47,50,52,53,54,55,56,58,60,61,62,63,64,65,66,68,69,70,71,72,74,75,77,80,85,88,90,91,92,95,98,100,102,110,115,120,125,130,135,140,170,180,185,190,192,200,210,220,225]
      min, max = params[:akbcap].split('-').map {|s| s.to_i }
      logger.warn("!@!!!!!!!!!!!! AAA !!!!!!!!!!")
      logger.warn(min)
      logger.warn(max)
      caprange = min...max
      sa = akbcap_array.select {|n| caprange.include? n }
      #@cross = OtherProductsCrossList.find(:all, :conditions => {:cross_value => 1})
      cap = "*"+params[:akbcap]+"*"
      sa.each do |s|
        logger.warn(s)
        @accums = Accumulator.by_capacity(s).by_size(params[:akbsize]).by_brand(params[:akbbrand])
      end
    else      
      @accums = Accumulator.by_capacity(50).by_size(params[:akbsize]).by_brand(params[:akbbrand])
    end
  end 
```

如您所见，我有这样的部分：

```
sa.each do |s|
            logger.warn(s)
            @accums = Accumulator.by_capacity(s).by_size(params[:akbsize]).by_brand(params[:akbbrand])
          end 
```

但是我可以从搜索中添加@accums 数据中的每次迭代吗？现在它有了最后一个值（我可以通过数组来完成......但是如何**通过类变量来完成呢？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T20:04:59.787

是的，在循环之前启动它并使用 << 运算符追加。以 flatten 结束，使其成为一维数组。

```
@accums = []
# ...
sa.each do |s|
  @accums << Accumulator.several_method_calls......
end
@accums.flatten! 
```

或为了紧凑：

```
result = sa.map{|s| Accumulator.several_method_calls...... }.flatten 
```

# iphone - ADBannerContentSizePortrait 在 iOS 5 上不可用

> ID：13781337
> 
> 赞同：2
> 
> 时间：2012-12-08T20:00:28.343
> 
> 标签：iphone, ios, ios5, iad

我正在将 iAd 框架添加到现有应用程序中。该应用程序仅适用于纵向，仅适用于 iPhone。一切都在 iOS 6 中运行，无论是在模拟器中还是在 iPhone 5 上。但是，它在 iOS 5 中在模拟器和 iPhone 4 上都失败了。它抛出以下异常：

```
'NSInternalInconsistencyException', reason: 'currentContentSize must be one of the requiredContentSizes; 'ADBannerContentSizePortrait' is not in {(
    ADBannerContentSizeLandscape
)}' 
```

在这一行抛出异常：

```
iAdBannerView.currentContentSizeIdentifier = ADBannerContentSizeIdentifierPortrait; 
```

我看不到以这种方式显示除横向横幅之外的任何其他内容。我假设我一定在某处配置了错误，但我不知道在哪里，并且很好奇它在 iOS 6 中运行良好。

非常感谢这里的任何帮助！谢谢！

更新：我无法回答这个问题，因为我没有足够的代表点数。但我已经修好了：

背景：我在 ADBannerView 周围使用 Kobold2D 包装器。它的类，KKAdBanner，是实际调用导致错误的行的类。事实证明，它在此调用之前通过将 ADBannerView 配置为仅允许横向大小。这是一个配置问题，我可以解决它。

当然，现在我完全不知道为什么它曾经在 iOS 6 中运行过，但是哦，好吧 :-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T20:31:12.033

我从来没有使用过它，但是根据我从文档中了解到的情况，您需要设置`@property(nonatomic, copy) NSSet *requiredContentSizeIdentifiers`
所有`currentContentSizeIdentifier`可能的值。

你的例外是说在那个 NSSet 中你只有一个用于景观的。
您看到的差异可能是由于不同 iOS 版本中的默认值不同。（我正在猜测）

[参考这里。](http://developer.apple.com/library/ios/#documentation/userexperience/Reference/ADBannerView_Ref/DeprecationAppendix/AppendixADeprecatedAPI.html#//apple_ref/occ/instp/ADBannerView/requiredContentSizeIdentifiers)

# orchardcms - Orchard CMS 自定义数据导入器

> ID：13781338
> 
> 赞同：5
> 
> 时间：2012-12-08T20:00:28.550
> 
> 标签：orchardcms, orchardcms-1.6

我有自定义代码，可以读取一堆 xml 文档并创建一个自定义数据导入配方，我使用 Orchard 中的 Import/Export 模块上传该配方。导入的文档属于我使用 Orchard 管理 UI 创建的内容类型“Api 文档”。现在，我想让这个配方文件生成代码成为自定义 Orchard 模块的一部分（如果这是正确的方法，我不确定）并让管理员用户执行以下操作：

1.  使用管理仪表板部分中的表单上传需要通过配方文件生成器运行的 xml 文档

2.  该表单将配方文件提交到导入/导出模块，以便它可以像往常一样执行其导入过程

处理这个问题的最佳方法是什么？我什至不确定创建自定义模块是正确的方法。如果我应该利用其他可扩展性选项，那就太好了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T21:48:25.480

该`IImportExportService`接口有一个名为`Import`：

```
void Import(string recipeText); 
```

生成配方后，您可以调用此方法，它将执行配方并更新外壳。

如果您只是在导入数据，那么如果我没记错的话，您可以在不更新 shell 的情况下离开（只有在功能已启用或禁用时才需要这样做） - 在这种情况下，您可以对`IRecipeParser`and进行几次调用`IRecipeManager`接口代替：

```
var recipe = _recipeParser.ParseRecipe(recipeText);
_recipeManager.Execute(recipe); 
```

我写了一些类似的东西，它做了一些导入/导出，这样你就可以在站点之间移动内容；它还进行了一些加密，因此细节不会被窥探。一个很好的起点是阅读[ImportExportService](http://orchard.codeplex.com/SourceControl/changeset/view/b3601054d641#src/Orchard.Web/Modules/Orchard.ImportExport/Services/ImportExportService.cs)的源代码，因为它并不那么复杂。

# c++ - C++——浮点***避免

> ID：13781340
> 
> 赞同：0
> 
> 时间：2012-12-08T20:00:45.087
> 
> 标签：c++, c, arrays, list, arguments

我要将一些自定义数据结构转换为 float** 并将它们作为仅处理 float** 的方法的参数传递。

在我的第一个版本中，方法只需要 2 个 float** 作为参数，所以我很容易拥有

```
MyClass::MyMethod(float** data1, float** data2){} 
```

在第二个版本中，我想提供一个 float** 列表，其长度从一次执行到下一次执行不等。

我只有 float*** 作为解决方案，这根本不好。

MyMethod 是 C 风格的，我不想要任何矢量等...

其他想法？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T20:06:24.330

返回一个包含一些浮点数的结构**。你甚至可以传入结构的一个实例。

这意味着被调用的函数不会直接操纵调用者的 float**，我认为这更干净。

我们作为 C 程序员正在解决这个问题，我知道有时我们被限制不使用真正的 C++ 技术。

如果你有（对于任何语法错误，我写 C 已经好几年了）

```
 struct floatCarrier { float **ppFloat1, float **ppFloat2 } 
 typdef FloatCarrier struct floatCarrier 
```

你的界面现在可以

```
 FloatCarrier myMethod (FloatCarrier in)  /* passed by value, as an example */ 
```

myMethod 的实现可以使用来自输入 FloatCarrier 的 float**。如果它需要修改数组，那么它会创建一个带有新 float** 实例的新 FloatCarrier，完成后它会返回新的 FloatCarrier。这确实让调用者有责任从返回的结构中获取新的 float**，但不知何故，我喜欢这样，感觉更干净。

至于您是否应该拥有已知数量的成员或数组……您的示例恰好有 2 个参数，因此该结构将有两个成员，但您可以拥有一个数组或任何您喜欢的东西。

它如何解决您的问题：您不再需要更改调用方的浮点数**，因此没有浮点数***。我们使用结构体作为函数只能返回一个值，因此我们将结果打包成一个对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T20:22:11.163

问题不在于`float***`（或`float**&`），而在于你是如何得出这个结论的：这`float**`代表什么？如果他们代表某物，请给该东西一个“名称”和一个“范围”以供居住。换句话说，创建一个“类”并让该类来管理 * 一个。否则你能做的任何代码都会显得晦涩难懂。

如果所有代码都简化为通过大量显式间接操作单个变量，那么使用 C++ 毫无意义。

虽然可以找到“双星词”中的解决方案，但如果不是这种情况，请尝试重新构造代码以使其更具可扩展性。

# c# - 在实体框架 4 中从父级获取子级

> ID：13781343
> 
> 赞同：0
> 
> 时间：2012-12-08T20:00:59.110
> 
> 标签：c#, entity-framework-4

我是 Entity Framework 的新手，现在我可以通过 id 加载父级。

但是我想在加载父级后从我的父级访问子属性。

```
 protected void getChild_Click(object sender, EventArgs e)
    {
        JeansEntities db = new JeansEntities();
        Employe employe = db.Employes.SingleOrDefault(p => p.Id == 3);

        uxCountry.Text = //(address.Country) Its the child of Employe, but I can acces by the parent
    } 
```

![在此处输入图像描述](../Images/7dad88706e3ba30750b7e499b3a5e8ed.png)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T20:10:20.530

您可以通过让查询知道您还需要 Address 子级来实现此目的。您可以通过使用“急切加载”来做到这一点。这是由`Include("NavigationPropertyName")`

```
protected void getChild_Click(object sender, EventArgs e)
{
    JeansEntities db = new JeansEntities();
    Employe employe = db.Employes.Include("Addresses")
       .SingleOrDefault(p => p.Id == 3);

    var address = employe.Addresses.FirstOrDefault();

    if (address != null)
        uxCountry.Text = address.Country;
} 
```

为了使它起作用，您必须在 edm之间`Employe`和中包含关系。`Addresses`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T20:06:21.167

您可以在 linq 查询中使用 Include ：

```
Employe employe = db.Employes.Include(e=>e.Address).SingleOrDefault(p => p.Id == 3); 
```

或者，如果您的导航属性是虚拟的，您可以使用惰性求值。在这种情况下，您可以`var address = employe.Address`在未处理 DBContext db 时使用，EF 会为您从数据库中获取它。

**更新：**你应该`#using System.Data.Entity;`

# c# - 对 WriteableBitmap 像素的更改不会更新屏幕

> ID：13781346
> 
> 赞同：3
> 
> 时间：2012-12-08T20:01:05.310
> 
> 标签：c#, windows-phone-8, writeablebitmap

我有一个`WriteableBitmap`连接到图像控件的 Windows Phone 8 应用程序。我正在遍历图像的每一行并一次异步绘制一行像素，然后安排下一行进行绘制。但是，更改基础像素数据似乎不会触发已更改的属性，因此不会更新控件。如果我将图像源设置为从相同像素创建的新 WriteableBitmap，图像会更新得很好，但我做了很多过度的数组复制。

```
void PaintImage(object state)
{
    // get my height, width, row, etc. from the state
    int[] bitmapData = new int[width];
    // load the data for the row into the bitmap

    Dispatcher.BeginInvoke(() =>
    {
        var bitmap = ImagePanel.Source as WriteableBitmap;
        Array.Copy(bitmapData, 0, bitmap.Pixels, row * width, bitmapData.Length);

        if (row < height - 1)
        {
            var newState = ... // create new state
            ThreadPool.QueueUserWorkItem(PaintImage, newState);
        }
    });
} 
```

如果我在上面的 Array.Copy 之后添加这些行，位图会逐渐绘制到屏幕上（尽管实际上它只是每次都替换位图）：

```
var newBitmap = new WriteableBitmap(width, height);
Array.Copy(bitmap.Pixels, newBitmap.Pixels, newBitmap.Pixels.Length);
ImagePanel.Source = newBitmap; 
```

似乎我需要手动让 WriteableBitmap 触发一些属性更改通知，以便拥有它的图像。我猜如果我将图像绑定到 ViewModel 中的 WriteableBitmap，这个问题会消失吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-12-12T18:46:48.370

Just add a dirty rectangle

```
 _myBitmap.Lock();
 _myBitmap.AddDirtyRect(new Int32Rect(0, 0, _myBitmap.PixelWidth, _myBitmap.PixelHeight));
 _myBitmap.Unlock(); 
```

or if you are on a background thread

```
 Application.Current.Dispatcher.InvokeAsync(() =>
    {
        _myBitmap.Lock();
        _myBitmap.AddDirtyRect(new Int32Rect(0, 0, _myBitmap.PixelWidth, _myBitmap.PixelHeight));
        _myBitmap.Unlock();
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T07:25:39.693

我认为你应该调用 Invalidate() 来请求重绘。参考： http: [//msdn.microsoft.com/en-us/library/system.windows.media.imaging.writeablebitmap.invalidate (v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.writeablebitmap.invalidate(v=vs.95).aspx)

# jquery - 在图像上显示 div

> ID：13781349
> 
> 赞同：2
> 
> 时间：2012-12-08T20:01:18.470
> 
> 标签：jquery, css, image, firefox, z-index

我正在尝试制作一个小型商店地图，上面有一个指针，显示商店中的位置。我使用 jQuery 创建了它，它在 Chrome 中完美运行。然而，在 Firefox 和 Internet Explorer 中，指针位于地图后面，无法看到指针。我知道指针在那里，因为我可以使用 Firebug 看到它。

这是我使用的 html 代码：

```
<div id="container">
    <table>
        <tr>
            <td>Location in store</td>
        </tr>
        <tr>
            <td>
                <img src="../../maps/${department.getMap()}" id="map" />
                <div id="mapMarker" />
            </td>
        </tr>
    </table>
    <div class="spacing" />
</div> 
```

的CSS：

```
#map
{
    display: block;
    position: relative;
    z-index: 2;
}

#mapMarker
{
    width: 32px;
    height: 32px;
    position: absolute;
    display: block;

    z-index: 3;
    content: url("../images/MapMarker.png");
} 
```

和 jQuery 代码：

```
$(document).ready(function() {
    //Set the marker on the map.
    $("#mapMarker")
        .css({
            "left":     25,
            "top":      25
        })
        .show();
}); 
```

有没有人可以看到为什么我的指针（#mapMarker）被推到地图后面？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T20:57:30.547

尝试使用*背景*属性而不是*内容*

```
#mapMaker {
    ...
    background: transparent url("../images/MapMarker.png") left top no-repeat;
    ...
} 
```

在 Firefox [http://jsfiddle.net/3xZuF/7/](http://jsfiddle.net/3xZuF/7/)中工作正常（但尚未在 IE 中测试）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T20:05:32.707

问题很可能是无效标记，您正在使用：

```
<div id="mapMarker" /> 
```

那不是有效的 HTML，您需要像这样关闭 div：

```
<div id="mapMarker"></div> 
```

纠正这个，它应该工作。Chrome 非常擅长解释无效标记，firefox 和 IE 则不那么好。还有一些其他错误，例如：

```
<td <JnJ:lang name="LocationInStore" /> /> 
```

和

```
<div class="spacing" /> 
```

# c++ - 单链表和时间复杂度

> ID：13781352
> 
> 赞同：1
> 
> 时间：2012-12-08T20:01:42.513
> 
> 标签：c++, list, time-complexity

我正在尝试编写自己的（尽可能接近标准）单链表实现。但是我想知道人们对这样一个列表的期望时间复杂度是多少？

特别是对于插入，我想知道我应该如何实现它。我读过互联网上的一些地方，有人说插入是 O(1)，而另一些人说 O(n) - 都同意双链表是 O(1)。但是我认为 O(1) 也是单链表的情况吗？

只要您知道前一个节点，您只需让前一个节点指向新的新节点，新节点将指向前一个节点最初指向的位置。

这让我想知道人们期望`insert`如何表现？通常它在给定的迭代器之前插入元素。然而，使用单链表很难做到这一点（必须`O(n)`花费时间来获取前面的元素，然后使用上述方法）。`insert`在这样的列表中，在当前迭代器后面放置项目是否很常见？或者 - 可能更好 - 是否有另一个常见的功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T20:22:12.863

插入的复杂性取决于您需要做什么。如果您知道前一个节点（实际上，您只需要一个合适的句柄来更改前一个节点的“下一个指针”），那么复杂度是`O(1)`. 如果你需要找到插入的位置，复杂度是`O(n)`.

关于期望，我希望它的`insert()`行为与双向链表的行为相同，但我也意识到你无法做到这一点：你要么需要不同的时间复杂度（找到前导节点），要么需要不同的迭代器失效语义（即，其他节点的迭代器失效）。我认为 C++ 2011`std::forward_list`类模板采用了不同的接口，但保留了迭代器有效性的保证。

简要解释为什么可以影响迭代器有效性：迭代器不必只知道当前节点。相反，它可以，例如，指向前任的`next`指针。当解引用迭代器时，它会首先解引用指向指针的`next`指针，然后解引用 this 指针以获取实际节点。作为回报，可以在迭代器前面插入，因为迭代器知道`next`要更新哪个指针。不幸的是，这意味着迭代器可能会失效，因为它们指向的指针可能已更改并且它们将引用不同的节点（当擦除节点时，迭代器可能已被移动为完全无效，尽管引用的节点仍然存在）。

# android - 如何在两个或多个 RadioButtons 之间在 android 中画一条线

> ID：13781353
> 
> 赞同：0
> 
> 时间：2012-12-08T20:01:47.177
> 
> 标签：android, line, draw

当一个被选中时，我想在两个或多个视图（如 radioButtons）之间画一条线？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-08T21:26:36.783

我认为下面的代码可以提供一些关于绘图的想法

![在此处输入图像描述](../Images/e7a1335e22bfbf6d575149e96ae46d68.png)

```
import android.app.Activity;
import android.graphics.Color;
import android.os.Bundle;
import android.widget.CompoundButton;
import android.widget.CompoundButton.OnCheckedChangeListener;
import android.widget.RadioButton;
import android.widget.RelativeLayout;

public class MainActivity extends Activity {

      DrawView drawView;
      RadioButton r1,r2,r3,r4;    
      RelativeLayout rl1;
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);

            r1 =(RadioButton)findViewById(R.id.radioButton1);
            r2 =(RadioButton)findViewById(R.id.radioButton2);
            r3 =(RadioButton)findViewById(R.id.radioButton3);
            r4 =(RadioButton)findViewById(R.id.radioButton4);

            rl1 =(RelativeLayout)findViewById(R.id.rl1);

            r1.setOnCheckedChangeListener(new OnCheckedChangeListener() {               
                @Override
                public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
                    r2.setChecked(false);
                    r3.setChecked(false);
                    r4.setChecked(false);
                    drawView = new DrawView(MainActivity.this,r4,r1);
                    drawView.setBackgroundColor(Color.WHITE);
                    rl1.addView(drawView);                  
                }
            });

            r2.setOnCheckedChangeListener(new OnCheckedChangeListener() {               
                @Override
                public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
                    r1.setChecked(false);
                    r3.setChecked(false);
                    r4.setChecked(false);
                    drawView = new DrawView(MainActivity.this,r1,r2);
                    drawView.setBackgroundColor(Color.WHITE);
                    rl1.addView(drawView);
                }
            });

            r3.setOnCheckedChangeListener(new OnCheckedChangeListener() {               
                @Override
                public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
                    r2.setChecked(false);
                    r1.setChecked(false);
                    r4.setChecked(false);
                    drawView = new DrawView(MainActivity.this,r2,r3);
                    drawView.setBackgroundColor(Color.WHITE);
                    rl1.addView(drawView);
                }
            });

            r4.setOnCheckedChangeListener(new OnCheckedChangeListener() {               
                @Override
                public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {    
                    r2.setChecked(false);
                    r3.setChecked(false);
                    r1.setChecked(false);
                    drawView = new DrawView(MainActivity.this,r3,r4);
                    drawView.setBackgroundColor(Color.WHITE);
                    rl1.addView(drawView);
                }
            });

        }

} 
```

**绘图视图**

```
import android.annotation.SuppressLint;
import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.view.View;

public class DrawView extends View {
    Paint paint = new Paint();
    View startView;
    View endView;    

    public DrawView(Context context,View startView,View endView) {
        super(context);
        paint.setColor(Color.YELLOW);        
        this.startView = startView;
        this.endView = endView;
    }

    @SuppressLint("NewApi")
    public void onDraw(Canvas canvas) {
            canvas.drawLine(startView.getX()+25, startView.getY()+50, endView.getX()+25, endView.getY(), paint);
    }

} 
```

**activity_main.xml**

```
 <RelativeLayout
        android:id="@+id/rl1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:background="#ffffaa" >

    </RelativeLayout>

    <RadioButton
        android:id="@+id/radioButton4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_centerVertical="true"
        android:layout_marginLeft="20dp"
        android:text="RadioButton" />

    <RadioButton
        android:id="@+id/radioButton1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/radioButton4"
        android:layout_alignParentTop="true"
        android:layout_marginTop="84dp"
        android:text="RadioButton" />

    <RadioButton
        android:id="@+id/radioButton2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_below="@+id/radioButton4"
        android:layout_marginRight="78dp"
        android:layout_marginTop="32dp"
        android:text="RadioButton" />

    <RadioButton
        android:id="@+id/radioButton3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/radioButton4"
        android:layout_alignParentRight="true"
        android:layout_marginBottom="23dp"
        android:text="RadioButton" />

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T20:27:41.853

我认为您可以在类中创建两个单选按钮实例，然后使用画布在它们之间进行绘制。我想你可以得到他们每个人的坐标。

# codeigniter - 如何更新 Codeigniter 中的购物车选项？

> ID：13781355
> 
> 赞同：1
> 
> 时间：2012-12-08T20:02:24.873
> 
> 标签：codeigniter

通过Codeigniter提供的文档它的购物车库不更新它的选项我们可以添加这样的选项

```
$data = array(
           array(
                   'id'      => 'sku_123ABC',
                   'qty'     => 1,
                   'price'   => 39.95,
                   'name'    => 'T-Shirt',
                   'options' => array('Size' => 'L', 'Color' => 'Red')
                )
        );

$this->cart->insert($data); 
```

有没有其他方法或任何教程来学习我们如何更新购物车的选项，就像

```
$qid = $this->input->post("qid");
$pairs = $this->input->post("pairs");
$males = $this->input->post("males");
$females = $this->input->post("females");

    $data = array(
        array(
            'rowid'   => $qid,
            'qty'     => 1,
            'options'  => array('pairs' => $pairs, 'males' => $males, 'females' => $females))
    );

    $this->cart->update($data); 
```

我已经搜索过了，但似乎没有人对此进行任何修复？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T20:19:50.687

虽然我还没有找到任何解决方案，因此我使用了简单的解决方案，这只是将商品放在购物车中并添加具有相同 id 和更新选项值的新商品。虽然它不是很好的把戏，但它只是为我工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-26T06:37:25.530

我昨天像这种问题一样陷入困境，然后我创建了扩展/覆盖更新功能。这里如何扩展本机库链接：[创建 CI 库](https://ellislab.com/codeigniter/user-guide/general/creating_libraries.html)

[这是我在Github Link](https://github.com/geeklycan/cicartoptions)中修改的代码

我希望它会帮助某人，也可以根据他们的需要进行修改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-02T04:33:15.103

不，它对我不起作用..但是没有任何错误，我也在 _update 函数中检查了数组，

```
Array
(
    [id] => 177
    [rowid] => 66bd8895e10f189f62bf3a65ada83630
    [qty] => 1
    [options] => Array
        (
            [vat] => 0
            [discount] => 0
        )

) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-13T12:28:27.900

我尝试的方式有点困难，但它有效。您不能只更新单个选项值。要更新，您必须将所有现有值传递给所有带有您要更新的值的选项值。

如果您想更新您的尺寸选项

$data = array('rowid' => $yourRowIdHere, 'options' => array ('color' => $yourExistingValue, 'length' => $yourExistingValue, 'size' => $newUpdatedValue) ));

$this->cart->update($data);

试试看 ：）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-05T15:12:24.137

我知道我为时已晚，但我想分享我的解决方案：

我刚刚获得了数组中的选项并根据需要对其进行了更新，然后使用数组内容更新了购物车中的整个选项字段。

希望这对某人有所帮助。

对不起英语。

# c - 在 C 中构建全双工管道

> ID：13781357
> 
> 赞同：-1
> 
> 时间：2012-12-08T20:02:32.667
> 
> 标签：c, linux, pipe

我正在尝试制作一个全双工管道，这是我的家庭作业（我事先告诉过）。作业的范围比这个管道大得多，我只需要完成它就可以继续工作。我在这里只粘贴重要的代码，我没有粘贴整个代码。

```
#define READ_END 0
#define WRITE_END 1

int main()
{
    Folder* curFolder = (Folder*) malloc (sizeof(Folder));
    assert(curFolder != NULL);

    initFolder(curFolder, NULL, "root");
    makeDir(curFolder, "test");

    return 0;
}

Pipe* createPipe()
{
    Pipe* p = (Pipe*) malloc (sizeof(Pipe));
    assert(p != NULL);

    pipe( p->readPipe );
    pipe( p->writePipe );

    //close( p->readPipe[WRITE_END] );
    //close( p->writePipe[READ_END] );

    return p;
}

char* readMsg(FolderRef* folderHandle, char* buffer)
{
    read(folderHandle->pipe->readPipe[READ_END], buffer, PIPE_BUF);

    return buffer;
}

void sendMsg(FolderRef* folderHandle, char* msg)
{
    write(folderHandle->pipe->writePipe[WRITE_END], msg, strlen(msg) + 1);
}

void makeDir(Folder* curFolder, char* name)
{
    pid_t childId;
    char msg[PIPE_BUF];
    Pipe* con = createPipe();

    childId = fork();

    switch ( childId )
    {
        case -1: // error occurred
        {
            printf( "Error at fork in function makeDir.\n" );
            exit( 0 );
        }
        case 0: // son process
        {
            initFolder( curFolder, getFolderHandle( getppid(), con, "" ), name );
            readMsg(curFolder->parentFolder, msg);
            printf("%s\n", msg);
            sendMsg(curFolder->parentFolder, "roger roger");
            break;
        }
        default:
        {
            insertFolder(&curFolder->folderList, getFolderHandle(childId, con, name));
            sendMsg(curFolder->folderList->folder, "test");
            readMsg(curFolder->folderList->folder, msg);
            printf("%s\n", msg);
            break;
        }
    }
} 
```

结果（现在）应该在屏幕上输出：test roger roger

但是我无法完成它。我似乎错过了一些小细节。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T20:48:48.617

如果您写信，则`pipe->writePipe[WRITE_END]`需要从`pipe->writePipe[READ_END]`. 似乎您尝试从中读取，`pipe->readPipe[READ_END]`但这是另一个管道。

# hardware - 不同的分支预测结果在不同的处理器中

> ID：13781358
> 
> 赞同：2
> 
> 时间：2012-12-08T20:02:38.610
> 
> 标签：hardware, branch-prediction

我想问一些关于分支预测的事情。我完全知道它是什么以及它们如何工作或它们的不同类型。我的问题是：我将如何使用每个预测器的性能的处理器？我的意思是，如果我使用相同的基准、相同的预测器但不同的处理器，我会期望相同的命中率吗？我认为是的，因为它只是一个模型，不受处理器类型的影响，但我想确定这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T15:36:11.577

嗯，答案是“视情况而定”。预测模型只是一个**模型**。您无法保证此类模型的特定处理器实现将如何执行。预测器的性能很可能还取决于与基准测试不直接相关的因素，例如中断传递或进程调度。

通常，我认为即使在不同的物理处理器中，您也可以期望每个预测变量具有一致的**趋势**，但我不会期望在数值上相等的命中率。

# opengl-es - 与 obj/mtl 文件混淆

> ID：13781362
> 
> 赞同：0
> 
> 时间：2012-12-08T20:02:57.117
> 
> 标签：opengl-es, textures, wavefront

我真的对 obj 和 mtl 文件以及它们之间的关系感到困惑。我搜索并阅读了这些格式，但不太了解。我需要有人简要解释这些格式的逻辑，因为我有一个代码可以通过获取不正确的 obj 和 mtl 文件来呈现对象。（安卓opengles 1.1）

假设我们在 obj 中有这些行

```
usemtl Material1_
v ...
vt ...
.
.
.
f 1/1/1 2/2/1 3/3/1
f 2/2/1 1/1/1 4/4/1
usemtl _Charcoal_
v ..
vt ..  
f 5/5/2 4/6/3 1/7/2       #"problem HERE!" 
```

以及 mtl 文件中的这些行

```
newmtl Material1_
Ka 0.000000 0.000000 0.000000
Kd 0.533333 0.345098 0.282353
Ks 0.330000 0.330000 0.330000
map_Kd Material1_.jpg

newmtl _Charcoal_
Ka 0.000000 0.000000 0.000000
Kd 0.137255 0.137255 0.137255
Ks 0.330000 0.330000 0.330000 
```

上层材质使用纹理，下层不使用。但两者都在“f”行中使用纹理数据！我应该为我标记的线使用什么纹理？一般来说，我与不参考纹理的材料下面的面有什么关系？同一种材料也有多种用途。这背后的原因是什么？

# delphi - 如何从表单中删除标题栏

> ID：13781364
> 
> 赞同：14
> 
> 时间：2012-12-08T20:03:07.927
> 
> 标签：delphi, delphi-7

有谁知道如何创建没有标题栏的 Delphi 表单？我已经看到了一些链接/提示，但这并不是我想要的，我自己也做不到。

这就是我想要实现的目标：

![在此处输入图像描述](../Images/de6aaf644eed4b29da5c2ac4a3ae04ad.png)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-08T20:17:03.930

首先，`BorderStyle` 在`bsNone`设计时设置。然后`CreateParams`像这样声明过程：

```
type
  TForm1 = class(TForm)
  private
  protected
    procedure CreateParams(var Params: TCreateParams); override; // ADD THIS LINE!
    { Private declarations }
  public
    { Public declarations }
  end; 
```

并像执行它一样

```
procedure TForm1.CreateParams(var Params: TCreateParams);
begin
  inherited;
  Params.Style := Params.Style or WS_THICKFRAME;
end; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-08T20:13:42.120

在对象检查器中设置`BorderStyle`为`bsNone`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-06-23T13:03:22.340

要获得更好的边框样式，您可以添加 WS_BORDER 标志。

像这样：

```
procedure TForm1.CreateParams(var Params: TCreateParams);
begin
  inherited;
  Params.Style := Params.Style or WS_BORDER or WS_THICKFRAME;
end;
```

请注意，在边框内绘制了一条软线。

# c++ - 分配器库中的每次分配开销较小

> ID：13781365
> 
> 赞同：0
> 
> 时间：2012-12-08T20:03:14.103
> 
> 标签：c++, memory-management

我目前正在为 C++ 编写一个基于分配器概念的内存管理库。比较简单，目前所有的分配器都实现了这两个成员函数：

```
virtual void * alloc( std::size_t size ) = 0;
virtual void   dealloc( void * ptr ) = 0; 
```

如您所见，我不支持界面中的对齐，但这实际上是我的下一步:) 以及我问这个问题的原因。

我希望分配器负责对齐，因为每个分配器都可以专门化。例如，块分配器只能返回块大小的对齐内存，因此它可以处理失败并在要求不同的对齐时返回 NULL。

我的一些分配器实际上是子分配器。例如，其中之一是线性/顺序分配器，它只是在分配时发生指针碰撞。这个分配器是通过传入一个 char * pBegin 和 char * pEnd 来构造的，它从内存中的那个区域内进行分配。现在，它工作得很好，但我得到了 1 字节对齐的东西。它适用于 x86，但我听说它在其他 CPU（控制台？）上可能是灾难性的。在 x86 上的读写速度也有点慢。

我知道实现对齐内存管理的唯一明智的方法是分配一个额外的 sizeof( void * ) + (alignement - 1) 字节并进行指针位掩码以返回对齐的地址，同时将原始分配的地址保留在之前的字节中用户数据（void * 字节，见上文）。

好吧，我的问题...

每次分配的开销对我来说似乎很大。对于 4 字节对齐，我将在 32 位 cpu 上有 7 个字节的开销，在 64 位 cpu 上有 11 个字节。这似乎很多。

首先，是不是很多？我是否与您过去可能使用过或正在使用的其他内存管理库相提并论？我研究了 malloc ，它似乎至少有 16 字节的开销，对吗？

您是否知道将对齐的内存返回给我的 lib 用户的更好方法，更小的开销？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T20:20:34.620

您可以存储一个偏移量，而不是一个指针，它只需要大到足以存储最大支持的对齐方式。如果您只支持较小的对齐方式，一个字节甚至可能就足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T20:45:48.227

您如何实现一个可以根据您的要求进行 x 字节对齐的伙伴系统。

大概的概念：

1.  当你的库被初始化时，分配一大块内存。对于我们的示例，假设为 16B。（只有这个块需要对齐，算法不会要求你对齐任何其他块）
2.  维护功率为 2 的内存块的列表。即 4B、8B、16B、... 64KB、... 1MB、2MB、... 512MB。
3.  如果用户要求 8B 的数据，检查 8B 的列表，如果不可用，检查 16B 的列表并将其拆分为 2 个 8B 块。将一个还给用户，另一个将附加到 8B 列表中。
4.  如果用户要求 16B，请检查您是否至少有 2 个 8B 可用。如果是，将它们组合起来并回馈给用户。如果没有，则系统没有足够的内存。

优点：

1.  没有内部或外部碎片。
2.  无需对齐。
3.  快速访问内存块，因为它们是预先分配的。
4.  如果列表是一个数组，直接访问不同大小的内存块

缺点：

1.  内存列表的开销。
2.  如果列表是链表，遍历会很慢。

# coldfusion - Application.cfc 在子目录中扩展 cfc，无需访问 CF admin 或 webroot 子目录

> ID：13781369
> 
> 赞同：1
> 
> 时间：2012-12-08T20:03:55.230
> 
> 标签：coldfusion, taffy

我在一个共享的 linux 服务器上，我只能访问映射到 ~/public_html的[http://domain.com/~username/ 。](http://domain.com/~username/)

在这种情况下，我想为 ColdFusion 使用 Taffy 框架。据我所知，要使用该框架，您必须有一个`Application.cfc`扩展 Taffy 框架组件的框架`taffy.core.api`。

[https://github.com/atuttle/Taffy](https://github.com/atuttle/Taffy)

[https://github.com/atuttle/Taffy/wiki/Installing-Taffy](https://github.com/atuttle/Taffy/wiki/Installing-Taffy)

[https://github.com/atuttle/Taffy/wiki/So-you-want-to:-Create-a-dead-simple-CRUD-API](https://github.com/atuttle/Taffy/wiki/So-you-want-to:-Create-a-dead-simple-CRUD-API)

我可以访问的唯一目录不是 Web 根目录的子目录，因此（据我所知）不是 ColdFusion 路径的子集。

在我的特殊情况下，我既无法访问 CFADMIN，服务器管理员也不会安装我需要在系统范围的上下文中扩展的组件，该组件已经在路径上并且可以通过全局点符号访问。

说明说您应该将 taffy 文件夹解压缩到您的 web 根目录中，如果您不能这样做，您应该将其设为您的 api 的子文件夹。前者对我来说是不可能的，当我做后者时，我得到“**找不到 ColdFusion 组件或接口`taffy.core.api`**”。

**更多细节：** 我的 api 在`http://domain.com/~username/api/`，所以我解压缩了`/taffy to ~/public_html/api/`。如果我将 Taffy 示例复制到`taffy/examples/api`to`~/public_html/api`以便`http://domain.com/~username/api/`访问该示例，我会得到“找不到 ColdFusion 组件或接口 taffy.core.api”，即使`taffy/core/api.cfc`在该目录下 ( `~/public_html/api`) 也是如此。

在这台服务器上，我已经成功地制作了 cfc，它使用`<cfset THIS.mappings["/subdir"]= getDirectoryFromPath(getCurrentTemplatePath()) & "subdir/">`and扩展了另一个目录中的 cfc `<cfobject name="parentObj" component="subdir.parent">`。

我还成功地制作了一个扩展*同一目录中*的 cfc 的 Application.cfc 。

我只是没有成功地制作一个可以在另一个目录中扩展 cfc 的 Application.cfc，即使它是一个子目录。

我确实尝试使用 grep 和相关工具从 Taffy 的源代码中删除“taffy.core”的每个引用，这样我就可以将所有 taffy cfc 连同 Application.cfc 一起转储到我的根目录中，这样我就可以扩展 api.cfc，但我得到了*不同的*错误，并没有进一步追求那个骇人听闻的解决方案。

`<cfdump var=#expandPath('/mapping')# />`输出`/var/www/html/mapping`。

```
uname@domain $>ls -la /var/www/html
drwxr-xr-x  3 root   root 4096 Sep 16 00:34 .
drwxr-xr-x  7 root   root 4096 May 28  2012 ..
lrwxrwxrwx  1 root   root   19 Sep 16 00:34 cfide -> /var/www/html/CFIDE
drwxrwxr-x 10 apache root 4096 Sep 16 00:32 CFIDE 
```

`~/public_html/api/resources/successesCollection.cfc`：

```
<cfcomponent extends="taffy.core.resource" taffy_uri="/successes">
    <cffunction name="get" access="public" output="false">
        <cfreturn representationOf('success').withStatus(200) />
    </cffunction>
</cfcomponent> 
```

`~/public_html/api/Application.cfc`：

```
<cfcomponent extends="taffy.core.api">

<!--- doesn't work
<cfset THIS.mappings["/taffy"]= getDirectoryFromPath(getCurrentTemplatePath()) & "taffy/">
<cfset THIS.mappings["/core"]= getDirectoryFromPath(getCurrentTemplatePath()) & "taffy/core/">
--->

        <cfscript>
                this.name = hash(getCurrentTemplatePath());

                // do your onApplicationStart stuff here
                function applicationStartEvent(){}

                // do your onRequestStart stuff here
                function requestStartEvent(){}

                // this function is called after the request has been parsed and all request details are known
                function onTaffyRequest(verb, cfc, requestArguments, mimeExt){
                        // this would be a good place for you to check API key validity and other non-resource-specific validation
                        return true;
                }

                // called when taffy is initializing or when a reload is requested
                function configureTaffy(){
                        setDebugKey("debug");
                        setReloadKey("reload");
                        setReloadPassword("true");

                        // Usage of this function is entirely optional. You may omit it if you want to use the default representation class.
                        // Change this to a custom class to change the default for the entire API instead of overriding for every individual response.
                        setDefaultRepresentationClass("taffy.core.genericRepresentation");
                }
        </cfscript>
</cfcomponent> 
```

**输出`http://domain.com/~uname/api/index.cfm/successes/`：`Could not find the ColdFusion Component or Interface taffy.core.api.`**

将此添加到我的`Application.cfc`并不能解决问题：

```
<cfcomponent extends="taffy.core.api">
        <cfscript>
                this.name = hash(getCurrentTemplatePath());
                this.mappings = StructNew();
                this.mappings['/taffy'] =
                expandPath('./taffy'); 
```

此外，添加以下内容`~/public_html/api/Application.cfc`也不能解决问题：

```
<cfset this.mappings["/taffy"] =
expandPath(getDirectoryFromPath(getCurrentTemplatePath()) & "taffy")> 
```

查看以下命令序列，如果我忽略了某些内容，请告诉我。在浏览到“http://domain/~uname/api”时，我仍然留下“找不到 ColdFusion 组件或接口 taffy.core.api”。

```
[uname@domain ~]$ cd ~/public_html

[uname@domain ~/public_html]$ rm -rf api

[uname@domain ~/public_html/api]$ wget -O taffy.zip https://github.com/atuttle/Taffy/zipball/master

[uname@domain ~/public_html/api]$ unzip taffy.zip

[uname@domain ~/public_html/api]$ mv atuttle-Taffy-35df54e/ taffy

[uname@domain ~/public_html/api]$ mv taffy/examples/api .

[uname@domain ~/public_html/api]$ mv taffy api/

[uname@domain ~/public_html/api]$ tree -d ~/public_html/api/
~/public_html/api/
|-- resources
`-- taffy
    |-- bonus
    |-- core
    |-- examples
    |   |-- ParentApplication
    |   |   |-- config
    |   |   |-- mixin
 ... etc

[uname@domain ~/public_html/api]$ ls -la ~/public_html/api/
total 8
drwxr-xr-x  4 uname ugroup 1024 Dec  9 11:00 .
drwxr-xr-x 10 uname web     1024 Dec  9 10:57 ..
-rw-r--r--  1 uname ugroup 1188 Dec  9 11:00 Application.cfc
-rw-r--r--  1 uname ugroup  172 Sep 20 13:04 .htaccess
-rw-r--r--  1 uname ugroup  218 Sep 20 13:04 index.cfm
drwxr-xr-x  2 uname ugroup 1024 Sep 20 13:04 resources
drwxr-xr-x  8 uname ugroup 1024 Sep 20 13:04 taffy

[uname@domain ~/public_html/api]$ ls -la ~/public_html/api/taffy/
total 15
drwxr-xr-x  8 uname ugroup 1024 Sep 20 13:04 .
drwxr-xr-x  4 uname ugroup 1024 Dec  9 11:00 ..
drwxr-xr-x  2 uname ugroup   96 Sep 20 13:04 bonus
-rw-r--r--  1 uname ugroup 4096 Sep 20 13:04 build.xml
drwxr-xr-x  2 uname ugroup 1024 Sep 20 13:04 core
drwxr-xr-x 15 uname ugroup 1024 Dec  9 10:57 examples
-rw-r--r--  1 uname ugroup   99 Sep 20 13:04 .gitignore
drwxr-xr-x  2 uname ugroup   96 Sep 20 13:04 lib
-rw-r--r--  1 uname ugroup 1356 Sep 20 13:04 LICENSE.TXT
-rw-r--r--  1 uname ugroup 2490 Sep 20 13:04 ReadMe.md
drwxr-xr-x  3 uname ugroup   96 Sep 20 13:04 snippets
drwxr-xr-x  5 uname ugroup 1024 Sep 20 13:04 tests

[uname@domain ~/public_html/api]$ ls -la ~/public_html/api/taffy/core/
total 72
drwxr-xr-x 2 uname ugroup  1024 Sep 20 13:04 .
drwxr-xr-x 8 uname ugroup  1024 Sep 20 13:04 ..
-rw-r--r-- 1 uname ugroup 42382 Sep 20 13:04 api.cfc
-rw-r--r-- 1 uname ugroup  4574 Sep 20 13:04 baseRepresentation.cfc
-rw-r--r-- 1 uname ugroup  2572 Sep 20 13:04 dashboard.cfm
-rw-r--r-- 1 uname ugroup  1756 Sep 20 13:04 dashboard.css
-rw-r--r-- 1 uname ugroup  4538 Sep 20 13:04 docs.cfm
-rw-r--r-- 1 uname ugroup  3030 Sep 20 13:04 factory.cfc
-rw-r--r-- 1 uname ugroup   179 Sep 20 13:04 genericRepresentation.cfc
-rw-r--r-- 1 uname ugroup  3516 Sep 20 13:04 mocker.cfm
-rw-r--r-- 1 uname ugroup   389 Sep 20 13:04 nativeJsonRepresentation.cfc
-rw-r--r-- 1 uname ugroup  3765 Sep 20 13:04 resource.cfc 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T14:33:59.103

你确实有几个选择。

## 映射（每个应用程序或其他）

由于 Taffy 是一个开发框架，您的系统管理员/主机可能愿意将它安装在一个中心位置，供所有开发人员使用。他们可以将 Taffy 文件夹放在 Web 根目录中，或者创建到该文件夹​​所在位置的服务器级映射。

## 相对路径

应该可以从相对路径运行 Taffy。听起来这是您尝试采用的方法，但您可能没有将文件放在正确的位置。

为了使用相对路径，您需要一个类似于以下的目录结构：

```
~uname/api/

~uname/api/taffy/core/api.cfc        <- Framework contents
~uname/api/taffy/core/factory.cfc
~uname/api/taffy/core/dashboard.cfm
~uname/api/taffy/core/...
~uname/api/taffy/...

~uname/api/Application.cfc           <- your api code
~uname/api/index.cfm
~uname/api/resources                 <- where you put your resource CFC's 
```

听起来你缺少“taffy”文件夹，要么将 CFC 直接放在你的 api 文件夹中，要么将“core”文件夹放在你的 api 文件夹中。

“taffy”文件夹是必需的。将您放入 Application.cfc`extends`属性中的点符号路径视为文件系统路径。既然这样，`taffy.core.api`您的文件系统就需要包含**taffy/core/api.cfc**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T16:53:08.523

您是否尝试过使用相对路径代理，正如 Ben Nadel 在这里解释的那样：[http ://www.bennadel.com/blog/2115-Extending-The-Application-cfc-ColdFusion-Framework-Component-With-A-Relative-Path -代理.htm](http://www.bennadel.com/blog/2115-Extending-The-Application-cfc-ColdFusion-Framework-Component-With-A-Relative-Path-Proxy.htm)

这个想法是您的 application.cfc 将扩展驻留在同一目录中的本地代理 (rootProxy.cfc)。然后该代理 cfinclude 包含您感兴趣的 cfc。由于 cfinclude 采用相对路径，因此您不必担心全局点符号或映射。

# css - 我可以在 IE7 中测试并假设 >IE7 看起来一样吗？

> ID：13781370
> 
> 赞同：1
> 
> 时间：2012-12-08T20:03:57.260
> 
> 标签：css, internet-explorer

我在 IE7、Safari、Firefox 和 Chrome 上测试我的页面。

我采用了添加一个类的想法，`html`以便绝对能够编写自定义 CSS 调整，肯定没有其他方法可以做到这一点。换句话说，我没有滥用这个设施。

我用这个：

```
<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js ie-all lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js ie-all lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js ie-all lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head> 
```

您会注意到这是我添加的[HTML5Boilerplate](http://html5boilerplate.com/)`ie-all`方法的修改版本。这样做的原因是，根据标题，我只在 IE7 上进行测试。如果没有类似`ie-all`课程的东西，我将不得不从其他课程中选择一个进行调整。除了在所有版本的 IE 上进行测试之外，我还能由谁来处理这个问题？

我确实意识到这`ie-all`相当于`lt-ie9`目前。我完全希望看到这段代码演变成一个`lt-ie10`可能会改变事情的类。不确定这里最好的方法是什么。

**编辑：**

在重新阅读我的问题时，我认为大多数人可能会认为答案是不言而喻的：**无法在 IE7 上进行测试并让它在较新版本的 IE 上运行。** 我想我应该用上下文来澄清。

在过去的几年里，我一直在这样做，并且没有遇到任何严重的问题。要重复。 **我一直在 IE7 上进行测试，我的代码在较新版本的 IE 上运行没有问题。** 直到我决定“现代化”我的样板并查看其他想法时，我才意识到，在某些情况下，有些人必须为每个版本的 IE 编写自定义 CSS。

我还没有看到需要为每个版本的 IE 进行调整。我已经浪费了无数个小时来修复 Chrome、Safari 和 Firefox 上不存在的 IE7 问题。当我这样做时，它在其他版本的 IE 上总是可以正常工作。因此，我对 HTML5Boilerplate 进行了修改，并提出了添加一个`ie-all`类来涵盖这些特殊调整的想法。

除此之外，**我现在正在探索更高级的 JQuery UI 想法**，我认为这些想法可能不会对仅在 IE7 上进行测试做出很好的反应。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T03:04:39.597

如果您使用诱导标准的文档类型编写符合标准的代码并使用渐进增强，那么您会很好。仅这些做法就可以确保您的网站在当今以及过去几年的每个版本的 IE 中都能很好地工作。*今天人们在使用 Internet Explorer 时遇到问题*的原因（一般来说）是因为他们没有做这些事情中的一件（或多件）。

请记住，Internet Explorer 10 放弃了对条件注释的支持，因此请尝试摆脱这些，而取决于仔细的编码和良好的实践。

为了大大减轻支持跨各种浏览器测试所需的所有必要软件（在某些情况下为硬件）的负担，请查看[http://browserstack.com](http://browserstack.com)。您可以快速选择操作系统、浏览器和版本，并在几秒钟内启动并在浏览器中运行虚拟机。您甚至可以使用相同的服务来*隧道*到您的本地服务器/文件系统以测试本地文件。

编码得当且明智，IE 不会像许多人认为的那样痛苦。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T20:07:51.740

自 IE7 以来，Internet Explorer 发生了巨大的变化，因此您绝对不能测试 7 并假设新版本也能正常工作。IE7 是 2006 年发布的，即使按照当时的标准来看也很差。

除非您想为每个版本创建一个类，否则我会为 <=IE8 创建一个，为 IE9 及更高版本创建一个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T20:07:44.597

~~你可以像我一样编写适用于所有浏览器的代码——从来没有遇到过问题。~~

您应该始终使用不同的版本进行测试。永远不要认为它会起作用。当我假设 Firefox 不会弄乱内联属性的内容时，我曾经成为这个的牺牲品`onClick`，但它确实（用“更正确”的 JavaScript 替换它并破坏了其他代码），IE 版本也是如此。

你最好的选择是使用 IE10。在其开发者工具中，您可以在 IE 7 以上的所有版本中进行测试。

# ios - 我怎样才能让 Xcode 找到 标题？

> ID：13781371
> 
> 赞同：1
> 
> 时间：2012-12-08T20:03:58.317
> 
> 标签：ios, xcode, unity3d, everyplay

使用 Everyplay SDK 时，Xcode 从一开始就可以正确识别 .framework 和 .bundle，而无需我手动指向目录，但 .framework 中的“Headers”文件似乎没有解析为任何内容。

它作为 Versions/Current/Headers 是纯文本可读的，但这似乎并没有真正让 Xcode 知道如何获取在该目录中找到的头文件。结果， EveryplayUnity.h 在 #import 失败，因为它找不到该标头。

我怎样才能让 Xcode 找到这个标头？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T08:39:44.803

这通常是在 Windows 环境中解压缩 SDK 的结果，它不支持 Mac OS X/Unix 环境使用的典型符号链接。

在多平台开发环境中，通常最好在 Mac 上提取 SDK 并使用那里的工具（git、svn、..）将其添加到您选择的版本控制系统中。

# java - JAVA Aspect Oriented Programming-运行时切面编织和类加载时间切面编织

> ID：13781372
> 
> 赞同：3
> 
> 时间：2012-12-08T20:04:07.087
> 
> 标签：java, aop, spring-aop

我遇到了一篇关于 AOP 的文章，其中提到 Aspect weaving 可以在编译时、类加载时和运行时发生。

在 java 中，我可以想象，相当理解，方面编织在编译期间实际上是如何发生的。代理类是在类编译期间生成的（在项目上启用方面）。生成的字节码将具有代理代码。

但我仍然想知道在类加载时间编织和运行时编织期间究竟（实际上）发生了什么。加载类时是否生成代理类？方面库是否在 .class（编译时）文件中添加任何编程指令以生成代理类？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-05-13T10:32:23.617

*Spring AOP*实际上对接口使用 Java 动态代理，如果需要，对非接口类型使用*cglib 。*它仅适用于 Spring Bean。代理会自动为通过所谓的切入点匹配的所有方法生成。这是在接线期间完成的。

*然而， AspectJ*不需要甚至不使用代理，它直接生成字节码，该字节码被编织到现有的字节码中。AspectJ 功能更强大，可以做的不仅仅是方法拦截。

*   对于编译时编织 (CTW)，这是由 AspectJ 编译器*ajc*完成的。除了原生 AspectJ 语法（它是 Java 的超集），您还可以使用 Java 注释风格的方式来定义方面，通常称为 @AspectJ 语法。在这种情况下，您可以使用*javac*编译方面并在单独的构建步骤中使用方面编织器。结果基本相同。在这两种情况下，在运行时，您都需要一个小的 AspectJ 运行时库，以使方面按预期工作。
*   CTW 和 LTW（加载时编织）之间的区别在于编织步骤被推迟到类加载时间。为了完成这项工作，您需要一个在 JVM 命令行上称为 AspectJ weaver 的 Java 代理库。Java 代理在加载普通应用程序类之前启动，因此可以影响类加载并根据需要检测加载的字节码。分析工具或类似工具也使用此方法。
*   所以很明显，LTW 不适用于源代码，而是类文件，即 AspectJ 可以将其方面代码编织到任何常规 Java 类文件中。这也可以在运行时之前完成，即您可以将方面代码编织到您没有源代码的外部库中，创建一个新的修改版本，以便在每次加载库时为 LTW 节省时间. 这通常称为二元编织。有了一些额外的知识，甚至可以将方面代码编织到 JDK 中，即通过创建一个包含方面代码的修改*rt.jar 。*但这不是你通常会做的，我只是想提一下这是可能的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T20:28:50.220

不一定在编译时。在 Java 中，通过反射和类加载器，您可以在运行时以编程方式查看甚至修改创建方法和类。

例如， `"hello".getClass().getMethod("substring", Integer.TYPE).invoke("my sharona", 3)` 将返回“sharona”，从 String 实例中提取方法子字符串并将其应用于另一个对象。

使用自定义[类加载器](http://docs.oracle.com/javase/7/docs/api/java/lang/ClassLoader.html)，您可以定义如何从系统加载您的类。这样，您可以定义一个方法，该方法将调用以加载（或生成！）类的字节码。您还可以使用系统类加载器来加载类的字节码并检查它。

这种技术被 Mozilla Rhino 广泛使用，它可以使用它将编译的 JavaScript 作为 Java 字节码加载以提高效率，或者[JavaAssist](http://www.csg.ci.i.u-tokyo.ac.jp/~chiba/javassist/)，它允许您在运行时创建类、方法、字段和任何东西。

JBoss 或 TomCat 等应用服务器也使用反射来检查和操作代码，尤其是通过注释。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T20:38:39.153

不确定什么是运行时编织。在加载时编织中，代理拦截类加载并在将字节码传递给类加载器之前对其进行修改。

看看它是如何工作的很容易，例如使用[AspectJ](http://www.eclipse.org/aspectj/)。您可以使用编译时编织和反汇编代码来查看它是如何工作的。还可以指示 AspectJ 在加载时编织期间将生成的类保存在磁盘上。

# eclipse - PDF 格式的 Eclipse (SDK/Workbench) 文档？

> ID：13781374
> 
> 赞同：0
> 
> 时间：2012-12-08T20:04:19.597
> 
> 标签：eclipse

我在哪里可以获得 PDF 格式的 Eclipse“工作台”文档？

（[Eclipse FAQ](http://wiki.eclipse.org/FAQ_Can_I_get_my_documentation_in_PDF_form,_please?)说 Eclipse“SDK”的文档（我假设这与 Eclipse“Workbench”相同）可以从 eclipse.org 以 PDF 格式获得，但我在任何地方都找不到。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T20:15:40.487

你可以在这里下载：

```
http://www.eclipse.org/documentation/ 
```

特别是工作台用户指南：

```
http://archive.eclipse.org/eclipse/downloads/drops/R-3.1-200506271435/org.eclipse.platform.doc.user.3.1.pdf.zip 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T20:14:10.467

你想要哪个版本的 Eclipse 文档，3.1 版本似乎在 pdf[中](http://www.eclipse.org/documentation/)

# c# - 在 Windows Phone 7 中写入 XML 文档

> ID：13781375
> 
> 赞同：0
> 
> 时间：2012-12-08T20:04:29.477
> 
> 标签：c#, .net, xml, windows-phone-7.1

我正在尝试将一些数据从对象写入 XML 文档，并且正在关注在线教程，但是我遇到了一个我似乎无法理解的问题，我用来启动创建的代码文档是`using (XmlWriter writer = XmlWriter.Create("myData.xml"))`，我收到“myData.xml”错误，我得到的错误是：

```
The best overload method match for 'System.Xml.XmlWriter.Create(System.Xml.XmlWriter)'
has some invalid arguments

Argument 1: cannot convert from 'string' to 'System.Xml.XmlWriter' 
```

XmlWriter 与 Windows Phone 兼容吗？如果不是，我是否必须更改写入文件的大量代码？

编辑：这是我的代码

```
 string output = SerializeToString<AppData>(rulesData);

        using (XmlWriter writer = XmlWriter.Create(output))
        {
            writer.WriteStartDocument();
            writer.WriteStartElement("myData");

            writer.WriteElementString("Starting Cash", rulesData.myStartingCash);
            writer.WriteElementString("Land on Go Data", rulesData.myLandOnGo);
            writer.WriteElementString("Free Parking Data", rulesData.myFreeParking);
            writer.WriteElementString("Full Circuit Data", rulesData.myFullCircuit);
            writer.WriteElementString("Auction Data", rulesData.myAuction);
            writer.Flush();

            writer.WriteEndElement();
            writer.WriteEndDocument();
        } 
```

谢谢！-瑞安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T20:10:33.340

您可以使用以下代码：

```
 public static void SerializeToStream<T>(Stream stream, object model)
   {
        var writer = XmlWriter.Create(stream);
        var s = new XmlSerializer(typeof(T));
        s.Serialize(writer, model);
    }

    public static string SerializeToString<T>(object model)
    {
        var xmlSer = new XmlSerializer(typeof(T));

        using (var stream = new MemoryStream())
        {
            SerializeToStream<T>(stream, model);
            var s = stream.ToArray();
            return System.Text.Encoding.UTF8.GetString(s, 0, s.Length);
        }
    }

    public static void SerializeToFile<T>(string filename, object model)
    {
        using (FileStream stream = File.Open(filename, FileMode.Create))
        {
            SerializeToStream<T>(stream, model);
        }
    } 
```

您的代码无法编译，因为您将字符串而不是流传递给 XmlWriter

用法：

```
 string output = SerializeToString<ClassName>(instanceOfClass); 
```

# android - 在 Google 中存储来自 Android 应用程序的数据

> ID：13781377
> 
> 赞同：2
> 
> 时间：2012-12-08T20:04:44.357
> 
> 标签：android

我正在编写一个 android 应用程序，它根据问题和答案为用户提供分数。我打算将应用程序与问题捆绑在一起。我想将用户的分数存储在某个网络服务器上。为此，我需要实现某种身份验证机制以及一些基于 Web 的数据存储。意识到 Google App 引擎可以用于此目的。

但是，我只找到了一个适用于此 Google Cloud Messaging (GCM) 的框架。看起来这个框架的用例比我最初需要的要多得多。即，它还允许将消息从云发送到设备。但是我不确定我们是否可以使用它来将数据从 Android 发送到 Google Cloud 并将其存储在 Google App Engine 中。

只是想检查是否有任何框架*只是*我想要的，即存储和检索数据而不是充当消息传递服务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T20:12:06.883

Google Cloud Messaging (GCM) 用于向您的所有应用用户发送消息。Google Cloud Messaging (GCM) 用于推送通知服务。![在此处输入图像描述](../Images/2fbb0f7a1f41e1c1dd5d1e143243e1c8.png)

要存储您的游戏分数，最好使用网络服务，如 php 或 ,net 或其他网络服务。

谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T18:49:38.243

看起来我可以使用符合我目的的[谷歌云存储。](https://developers.google.com/storage/docs/getting-started)还没有探索它，但一定会尝试它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T20:27:13.320

您可以在 Google App Engine 上运行一个简单的 Java Servlet，并从 Android 设备发送带有分数数据的 HTTP 请求。

在 Android 设备上，您需要配置 Internet 访问权限和 HTTP 客户端库。

# c++ - 将字符串文字分配给 char 对象

> ID：13781382
> 
> 赞同：1
> 
> 时间：2012-12-08T20:05:28.693
> 
> 标签：c++, char

我有个问题

```
#include <iostream>
int main()
{
    char a;
    a = "A";
    std::cout<<a;
    return 0;
} 
```

 *```
1>c:\users\user\desktop\c++\bool 1\bool 1\bool 1.cpp(6): error C2440: '=' : cannot convert from 'const char [2]' to 'char'
1>          There is no context in which this conversion is possible 
```

知道如何解决这个问题吗？它实际上应该将 A 分配给 char 变量并显示 A 对吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T20:10:38.643

使用“A”而不是“A”。

```
#include <iostream>
int main()
{
    char a;
    a = 'A';
    std::cout << a;
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-08T20:09:49.920

不，正如错误消息所说，`"A"`它是一个 2 个字符的数组，而不是一个字符。你想要`'A'`。*

# python - Django 语言环境/翻译未显示

> ID：13781384
> 
> 赞同：1
> 
> 时间：2012-12-08T20:05:32.627
> 
> 标签：python, django, translation, gettext

在典型的 Django 开发风格中，为了形成一个完整的图片来做什么，我使用了一个组合

*   关于本地化的 Django 文档（实际上只描述了如何设置语言文件）[https://docs.djangoproject.com/en/1.1/topics/i18n/localization/#](https://docs.djangoproject.com/en/1.1/topics/i18n/localization/#)
*   本教程：[http ://devdoodles.wordpress.com/2009/02/14/multi-language-support-in-a-django-project/](http://devdoodles.wordpress.com/2009/02/14/multi-language-support-in-a-django-project/)
*   一个 SO 问题：[django 国际化和翻译问题](https://stackoverflow.com/questions/2639596/django-internationalization-and-translations-problem)

我已经建立了一个新的 Django 1.4 站点，其中包含一个工作“家庭”应用程序和模板，其中包含以下内容：

```
{% load i18n %}
{% trans "hello" %} 
```

我的 settings.py 文件遵循第二个教程。这是我的中间件类：

```
MIDDLEWARE_CLASSES = (
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.middleware.locale.LocaleMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    # Uncomment the next line for simple clickjacking protection:
    # 'django.middleware.clickjacking.XFrameOptionsMiddleware',
) 
```

我的 views.py 文件如下所示：

```
from django.template import Context, loader, RequestContext
from django.http import HttpResponse
from django.shortcuts import render_to_response

def index(request):
    c = Context({})
    return render_to_response('home/index.html', c, context_instance=RequestContext(request)) 
```

真正令人困惑的是如何编辑我的语言环境文件夹中的 django.py 文件。该教程说“编辑它们”，Django 文档没有提到它们，而 SO 问题说要摆脱这`#, fuzzy`条线。

这是该文件的样子（在顶部）

```
# SOME DESCRIPTIVE TITLE.
# Copyright (C) YEAR THE PACKAGE'S COPYRIGHT HOLDER
# This file is distributed under the same license as the PACKAGE package.
# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
#
#, fuzzy
msgid "hello"
msgstr "Bonjour le Monde"
"Project-Id-Version: PACKAGE VERSION\n"
"Report-Msgid-Bugs-To: \n"
"POT-Creation-Date: 2012-12-08 19:16+0000\n"
"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
"Language-Team: LANGUAGE <LL@li.org>\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T22:09:45.333

在 makemessages 命令之后，您应该在 django.po 中拥有：

```
# SOME DESCRIPTIVE TITLE.
# Copyright (C) YEAR THE PACKAGE'S COPYRIGHT HOLDER
# This file is distributed under the same license as the PACKAGE package.
# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
#
#, fuzzy
msgid ""
msgstr ""
"Project-Id-Version: PACKAGE VERSION\n"
"Report-Msgid-Bugs-To: \n"
"POT-Creation-Date: 2012-12-08 19:16+0000\n"
"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
"Language-Team: LANGUAGE <LL@li.org>\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"

#: templates/home/index.html:2
msgid "hello"
msgstr "" 
```

您将模板和翻译存储在哪里？在应用程序或项目目录中？

# php - 数组for循环和删除按钮php

> ID：13781387
> 
> 赞同：-1
> 
> 时间：2012-12-08T20:05:57.773
> 
> 标签：php, arrays, for-loop, unset

我有这个代码：

```
<?php
$animals = array('cat', 'dog', 'mouse', 'elephant');
for($i=0, $n = count($animals); $i++){
    echo $animals[$i]. '<input type="submit" name="remove" value="remove"/><br/>';
    if(isset($_POST['remove'])){
        unset($animals[$i]);
    }
}
?> 
```

当我单击删除按钮时，没有任何反应。任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T20:20:17.237

如果您要将“删除”作为每个按钮的值，那么最简单的方法是为`name attribute`. 发送后`$_POST`，您可以遍历`remove`数组并根据键取消设置任何内容。

```
<?php
$animals = array('cat', 'dog', 'mouse', 'elephant');
if(isset($_POST['remove']) && is_array($_POST['remove'])){
    foreach($_POST['remove'] as $k=>$remove){
        unset($animals[$k]);
    }
}

echo '<form method="post" action="./">';
foreach($animals as $key=>$animal){
    echo $animal. '<input type="submit" name="remove['.$key.']" value="remove"><br/>';
}
echo '</form>';?> 
```

**注意：**有很多方法可以实现您正在寻找的东西。这是一种可能性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T20:43:12.360

这也是可以使用的另一种方法

```
$animals = array('cat', 'dog', 'mouse', 'elephant');
if(isset($_POST['remove'])) $animals=array_diff($animals, array($_POST['animal']));
foreach($animals as $pet)
{
    echo'<form method="post" action="">';
    echo $pet.'<input type="submit" name="remove" value="remove"/><br/>';
    echo '<input type="hidden" name="animal" value="'.$pet.'"/>';
    echo '</form>';
} 
```

**更新：（**对于您可以使用的 JavaScript 解决方案）

```
$animals = array('cat', 'dog', 'mouse', 'elephant');
echo'<form name="animalForm" method="post" action="">'; // action should be your this file name, i.e. 'pets.php'
foreach($animals as $pet)
{
    echo '<label>'.$pet.'<input type="button" class="remove" value="remove"/></label><br/>';
}
echo '</form>'; 
```

这是`JavaScript`可以在`head`标签之间的`script`标签中使用的代码，例如

```
<script type="text/javascript">
    window.onload=function(){
        var btns=document.getElementsByClassName('remove');       
        for(i=0;i<btns.length;i++)
        {
            if(btns[i].type==='button' && btns[i].className==='remove')
                btns[i].onclick=remove;
        }
    };
    function remove(event){
        var e = event || window.event;
        var el = e.target || e.srcElement;
        document.animalForm.removeChild(el.parentNode);
    }
</script> 
```

[**JS 演示**](http://jsbin.com/exedas/8/edit)。

# git - git 丢弃所有更改并从上游拉取

> ID：13781388
> 
> 赞同：178
> 
> 时间：2012-12-08T20:06:08.780
> 
> 标签：git

如何获取上游 repo 并使其替换 master？我的repo只有一个分支，就是master，完全搞砸了，所以我基本上需要从上游重新开始。我认为 init 会完成这项工作，但有没有更简单的方法？

* * *

## 回答 #1

> 赞同：301
> 
> 时间：2012-12-08T20:08:33.293

您可以在这里（至少）做两件事——您可以重新克隆远程仓库，或者您可以复制`reset --hard`到共同的祖先，然后进行拉取，这将快进到远程主机上的最新提交。

具体来说，这是 Nevik Rehnel 原始答案的简单扩展：

```
git reset --hard origin/master
git pull origin master 
```

**注意**： using`git reset --hard`将丢弃任何未提交的更改，如果您是 git 新手，很容易将自己与此命令混淆，因此请确保在继续之前了解它将做什么。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-12-08T20:08:06.560

在分支主机上： `git reset --hard origin/master`

然后做一些清理`git gc`（更多关于这个在手册页）

更新：您可能还需要做一个`git fetch origin`（或者`git fetch origin master`如果您**只**想要那个分支）；无论您在重置之前还是之后执行此操作都无关紧要。（感谢@eric-walker）

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2017-09-14T13:42:47.753

您可以在一个命令中执行此操作：

```
git fetch --all && git reset --hard origin/master 
```

或者在一对命令中：

```
git fetch --all
git reset --hard origin/master 
```

请注意，**您将丢失所有本地更改**

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2020-07-25T20:02:49.747

我现在终于意识到，而不是

```
git fetch --all && git reset --hard origin/master 
```

它应该是

```
git fetch --all && git reset --hard origin/<branch_name> 
```

相反（如果一个人在不同的分支上工作）

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2015-11-07T00:08:04.260

```
git reset <hash>  # you need to know the last good hash, so you can remove all your local commits

git fetch upstream
git checkout master
git merge upstream/master
git push origin master -f 
```

瞧，现在你的叉子又回到了上游。

# python - S3 Boto 下载 - 最新

> ID：13781392
> 
> 赞同：0
> 
> 时间：2012-12-08T20:06:27.867
> 
> 标签：python, amazon-s3, amazon-web-services, boto

我是 Python 编码的新手，无法在这方面取得进展。我有一些时间编码的文件名，格式如下：

```
20121208151318.gzip
20121208151320.gzip
20121208151322.gzip
20121208151325.gzip
20121208151326.gzip 
```

使用此代码，我可以打印 S3 存储桶中所有文件的文件名：

```
import boto
s3conn = boto.connect_s3()
bucket = s3conn.lookup('my_bucket_name')
for key in bucket:
  print k.name

key.getfile() 
```

我需要两个方面的帮助。首先，如何获取存储桶中最新文件的名称，在我的情况下是：

```
20121208151326 (15:13:26 - 8th December 2012) 
```

其次，我怎样才能下载这个文件？我找到了 key.getfile() 命令，但我不知道如何实现它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T18:52:08.233

根据您的格式`latest = max(keys)`应该得到最新的项目

要下载文件的内容，您可以使用

```
latest.get_contents_to_filename(<file_name>) 
```

或者

```
latest.get_contents_to_file(<file>) 
```

[在S3 的 boto 文档中](http://docs.pythonboto.org/en/latest/ref/s3.html)查看更多详细信息

# c# - 检查单选按钮后清除文本框并在 C# 中键入类似 windows 计算器

> ID：13781393
> 
> 赞同：2
> 
> 时间：2012-12-08T20:06:28.963
> 
> 标签：c#, textbox, radio-button

我正在将十进制转换为二进制、十六进制、八进制和反转计算器。我正在尝试模仿 Windows 计算器，您可以使用单选按钮在不同的转换之间切换。它是这样工作的：1- 输入您的数字，2- 选择要转换的所需基数，3- 当您输入另一个数字时，计算器文本框会被删除，因此您从一个全新的数字开始（所以您没有按任何清除按钮）。

有没有办法做到这一点？非常感谢您的帮助！，在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T20:10:10.053

[http://msdn.microsoft.com/en-us/library/system.windows.forms.textboxbase.clear%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.textboxbase.clear%28v=vs.71%29.aspx) 也许这个方法你会觉得有用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-14T13:42:38.823

我在这里为你做了一个简短的例子。点击后文字会自动删除。

**例子**

```
if(radiobutton1.checked){

textbox.text = "";

} 
```

# ios - ios项目中的maxvid_decode.h

> ID：13781405
> 
> 赞同：0
> 
> 时间：2012-12-08T20:07:53.110
> 
> 标签：ios, xcode

我正在 Xcode 中构建一个 iOS 项目并收到以下错误，并附上屏幕截图。

请问如何消除这个错误？

解析问题，预期为 ')'

![在此处输入图像描述](../Images/35bcd1b7bf248ecbf955444d0331fc28.png)

# ember.js - 如何按需加载 Ember.js 的一部分？

> ID：13781407
> 
> 赞同：3
> 
> 时间：2012-12-08T20:07:57.543
> 
> 标签：ember.js

我想按需加载我的 Ember.js 应用程序的一部分（应用程序由 AMD 构建，但合并到几个大脚本文件中用于生产）。

*一个例子：*

**浏览到“/”**

用户从 开始`/`，HTML 加载`core.js`包含 Ember.js、路由和应用程序控制器 + 视图的文件。

**浏览到“/用户/设置”**

所以现在用户`/user/settings`第一次浏览。视图、控制器和模板`user.js`通过相应路径中的脚本加载器加载：

```
App.UserRoute = Em.Route.extend({
  enter: function(ctx) {
    this.ajaxLoadFiles("user.js", function() {
      // ???
    });
  }
}); 
```

**问题**

不知何故，Ember.js 需要*等待*脚本加载，然后继续路由……我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T15:52:45.157

我正在使用 require.js，它非常适合模块化代码！

你可以克隆 todoMVC AMD 版本在这里学习

[https://github.com/addyosmani/todomvc/tree/gh-pages/dependency-examples/emberjs_require](https://github.com/addyosmani/todomvc/tree/gh-pages/dependency-examples/emberjs_require)

如需更多建议，请参阅此帖子：

[有没有办法将 Ember.js 应用程序拆分为几个文件？](https://stackoverflow.com/questions/10396677/is-there-any-way-to-split-an-ember-js-app-across-a-few-files)

# java - 如何访问链表数组？

> ID：13781412
> 
> 赞同：2
> 
> 时间：2012-12-08T20:08:17.367
> 
> 标签：java, linked-list

我`Connection`使用[此处](https://stackoverflow.com/questions/217065/cannot-create-an-array-of-linkedlists-in-java)的第二个答案创建了一组 LinkedList 对象。也就是说，我已经完成了：

`LinkedList<Connection>[] map = (LinkedList<Connection>[]) new LinkedList[count];`

但是，我对如何访问数组的每个元素（即每个 LinkedList）并创建一个新节点感到困惑。现在，我有：

```
for (int j = 0; j < numOfConnections; j++) {
    map[j].add(new Connection(s.next(), s.nextDouble(), s.next()));
} 
```

但我认为这只会为 Array 的每个 LinkedList 元素添加一个新节点*。*我想循环并为*每个*LinkedList 元素添加`numOfConnections`节点数量。例如， 中的 3 个节点、 中的5 个节点、 中的2 个节点等。*`map[0]``map[1]``map[2]`*

 ** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T20:11:28.580

由于您有一组`LinkedList`实例：

1.  对于数组中的每个存储桶，您需要放置一个新的 LinkedList 实例
2.  您需要将 Connection 实例添加到每个 LinkedList，该 LinkedList 包含在数组中的存储桶中。

`List`通过尝试对其进行调用，您将数组视为 a `add`。

在你的循环中，做类似的事情

```
LinkedList<Connection> list = map[j]; // get the list for this bucket in the array
if (list == null) // if there is no LinkedList in this bucket, create one
    list = map[j] = new LinkedList<Connection>();
list.add(new Connection(...)); 
```

我会将您的变量名称映射更改为类似的东西，`lists`因为 Java 有一个`Map`对象，这很令人困惑。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T20:25:24.733

在您的示例“地图 [0] 中的 3 个节点、地图 [1] 中的 5 个节点、地图 [2] 中的 2 个节点”中，如果`numOfConnections`是您想要添加到 LinkedList[k] 的值的数量，您应该将哪个列表映射到添加 ？例如：numOfConnections[] = {3, 5, 2};

```
for ( int k = 0; k < numOfConnections.length; k++ ) 
{
    if (map[k] == null) map[k] = new LinkedList<Connection>();

    for (int j = 0; j < numOfConnections[k]; j++)
    {
        map[k].add(new Connection(s.next(), s.nextDouble(), s.next()));
    }
} 
```*

# python - 如何在 virtualenv 中为 Django 激活 mysqldb

> ID：13781417
> 
> 赞同：0
> 
> 时间：2012-12-08T20:08:32.690
> 
> 标签：python, mysql, django, virtualenv, mysql-python

好的。所以我一直在疯狂尝试用 Django 设置 Python virtualenv。尝试了几个不同的教程，首先在 Mac 上，然后在 Linux (Ubuntu) 上，并且总是安装 Django 包，然后我尝试设置数据库，一切都崩溃了。起初，我遇到了很多“找不到 mysql_config”和架构兼容性错误（那是我转而在 Linux 上尝试它的时候）……现在我想我终于安装了它并且没有与任何东西冲突，我不知道下一步该做什么。我应该使用数据库信息（名称、UN、PW 和端口）编辑 Django 的设置文件，但我不知道在哪里可以找到这些信息。

所以......我的问题：

1.  如果安装了 MySQL，它会自动在 Ubuntu 上运行吗？如果没有，我该如何打开它？
2.  我在哪里编辑数据库？我一般是一个 PHP 人，这是我涉足 Python 的早期阶段......我通常通过 PHPMyAdmin 完成大部分数据库管理......我知道 MySQL 有一个命令行，我可以使用它，但我不知道如何打开它。
3.  如何找出 MySQL 正在哪个端口上运行？

同样，这是在 virtualenv 中的安装，如果这对答案有任何影响的话。如果这是一个完全没有意义的问题，我深表歉意，但我发现的所有 Django 设置教程似乎都假设我知道这一步。

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T20:17:17.437

1- ubuntu 上默认没有安装 mysql，如果需要开机启动 mysql 试试：

```
chkconfig mysql on 
```

2- mysql 有一个高级命令行。只需在终端尝试：

```
mysql
use DB;
SELECT * FROM tbl1; 
```

3- mysql 在端口 3306 上运行。您可以通过以下方式找到端口：

```
netstat -tnlp | grep mysql 
```

最后你必须看看：[在虚拟环境中使用 PIP，我如何安装 MySQL-python](https://stackoverflow.com/questions/3960305/using-pip-in-a-virtual-environment-how-do-i-install-mysql-python)

# asp.net - LinkBut ton 未触发回发事件

> ID：13781421
> 
> 赞同：1
> 
> 时间：2012-12-08T20:08:49.453
> 
> 标签：asp.net, postback, linkbutton, autopostback, asplinkbutton

在网页中，我使用 jquery 和其他一些 .js 文件。

LinkBut​​ton 未触发其回发事件。

```
<asp:LinkButton ID="LinkButton1" runat="server"   onclick="LinkButton1_Click">LinkButton</asp:LinkButton> 
```

我被困在创建 LinkBut​​ton 控件的 poskback 中。

任何想法，如何强制链接按钮进行回发。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-08T20:22:26.960

LinkBut​​ton 没有 onclick 事件，请[尝试 Click 代替](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.linkbutton.click.aspx)。**更新**但在标记中我们必须使用 OnClick。

我不知道你想实现什么，但 LinkBut​​ton 有一个名为[PostBackUrl](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.linkbutton.postbackurl.aspx)的属性，它也很有帮助。

**更新**

如果使用[CausesValidation](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.linkbutton.causesvalidation.aspx)设置为 false 关闭验证会发生什么？

# php - PHP require_once 奇怪地不起作用？

> ID：13781423
> 
> 赞同：0
> 
> 时间：2012-12-08T20:08:59.823
> 
> 标签：php, wordpress, include, require

我正在尝试在页面中包含一个文件。该文件位于一个名为 phpThumb 的文件夹中，该文件夹位于我的 wordpress 主题目录中。
这就是我尝试包含文件的方式”

`<?php require_once(get_bloginfo('template_url')."/phpThumb/phpThumb.config.php"); ?>`

出于某种原因，这不起作用。
我确实检查并`get_bloginfo()` **返回**了一个值，但没有**回显**一个值。
我三次检查了代码的有效性，这一切都很好，IMO...

什么可能是错的？

附言; 它使用`$_SERVER['DOCUMENT_ROOT']`但它的输出取决于当前页面（如果我错了，请纠正我）所以它对我来说效率不高。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-08T20:14:20.467

[require_once](http://www.php.net/manual/en/function.require-once.php)需要**目录中的文件**而不是 url。

替换`get_bloginfo('template_url')`为 Wordpress 功能[`get_template_directory()`](http://codex.wordpress.org/Function_Reference/get_template_directory)。

```
<?php require_once(get_template_directory()."/phpThumb/phpThumb.config.php"); ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T20:19:50.047

你试图要求，而不是包括。如果你想包括这样做： `<?php include("page"); ?>`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T20:20:23.400

`$_SERVER['DOCUMENT_ROOT']`不依赖于当前页面/文件。它将为您提供 Web 根文件夹的系统文件路径。`require_once`需要一个系统文件路径。因此，如果您`phpThumb.config.php`是`/dir1/dir2/phpThumb/phpThumb.config.php`从您的网络根目录开始的。你会这样做

```
require_once($_SERVER["DOCUMENT_ROOT"] . '/dir1/dir2/phpThumb/phpThumb.config.php'); 
```

检查输出`get_bloginfo('template_url')."/phpThumb/phpThumb.config.php"`并将其与上述内容进行比较。

# python - 你能把这个美化吗？

> ID：13781424
> 
> 赞同：0
> 
> 时间：2012-12-08T20:09:22.090
> 
> 标签：python, function, math, if-statement, pygame

我这里有一个 python 类方法的怪物。我能想到的唯一方法是一个巨大而丑陋的 if / elif / else 块。你们中的任何人都可以提出任何想法来使它变得更好吗？

对于上下文，这是 pygame 的网格制作库的一部分，并且是一个函数，它获取网格中的一个图块并返回周围的图块。如果 "horizo​​ntal" 设置为 false，它只返回与瓷砖垂直相邻的瓷砖，反之亦然。

```
def getSurroundingTiles(self, tile, horizontal = True, vertical = True):
    index = list(self.getTiles()).index(tile)
    maxtile = self.sqrtnum - 1 # Offset for 0 indexing

    i = int(math.floor(index / self.sqrtnum))
    j = int(index % self.sqrtnum)

    surroundingTiles = []

    if i == 0 and j == 0:
        #Top left corner
        if horizontal:
            surroundingTiles.extend((self[i + 1][j], self[i][j + 1]))
        if vertical:
            surroundingTiles.append(self[i + 1][j + 1])
    elif i >= maxtile and j == 0:
        #Top right corner
        if horizontal:
            surroundingTiles.extend((self[i - 1][j], self[i][j + 1]))
        if vertical:
            surroundingTiles.append(self[i - 1][j + 1])
    elif i == 0 and j >= maxtile:
        #Bottom left corner
        if horizontal:
            surroundingTiles.extend((self[i + 1][j], self[i][j - 1]))
        if vertical:
            surroundingTiles.append(self[i + 1][j - 1])
    elif i >= maxtile and j >= maxtile:
        #Bottom right corner
        if horizontal:
            surroundingTiles.extend((self[i - 1][j], self[i][j - 1]))
        if vertical:
            surroundingTiles.append(self[i - 1][j - 1])

    elif i == 0:
        #Top border
        if horizontal: 
            surroundingTiles.extend((self[i + 1][j], self[i][j + 1],
                                     self[i][j - 1]))
        if vertical:
            surroundingTiles.extend((self[i + 1][j + 1],
                                     self[i + 1][j - 1]))
    elif i >= maxtile:
        #Bottom border
        if horizontal:
            surroundingTiles.extend((self[i - 1][j], self[i][j + 1],
                                     self[i][j - 1]))
        if vertical:
            surroundingTiles.extend((self[i - 1][j + 1],
                                     self[i - 1][j - 1]))
    elif j == 0:
        #Left border
        if horizontal:
            surroundingTiles.extend((self[i + 1][j], self[i - 1][j],
                                     self[i][j + 1]))
        if vertical:
            surroundingTiles.extend((self[i + 1][j + 1],
                                     self[i - 1][j + 1]))
    elif j >= maxtile:
        #Right border
        if horizontal:
            surroundingTiles.extend((self[i + 1][j], self[i - 1][j],
                                     self[i][j - 1]))
        if vertical:
            surroundingTiles.extend((self[i + 1][j - 1],
                                    self[i - 1][j - 1]))

    else:
        if horizontal:
            surroundingTiles.extend((self[i + 1][j], self[i - 1][j],
                                     self[i][j + 1], self[i][j - 1]))
        if vertical:
            surroundingTiles.extend((self[i + 1][j + 1], self[i + 1][j - 1],
                                    self[i - 1][j + 1], self[i - 1][j - 1]))

    return surroundingTiles 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T20:18:38.097

尝试这样的事情：

```
# indices 0 - 3 are for horizontal, 4 - 7 are for vertical
dij = [(0, 1), (1, 0), (0, -1), (-1, 0),
       (1, 1), (1, -1), (-1, 1), (-1, -1)]

def getSurroundingTiles(self, tile, horizontal = True, vertical = True):
    index = list(self.getTiles()).index(tile)
    maxtile = self.sqrtnum - 1 # Offset for 0 indexing

    i = int(math.floor(index / self.sqrtnum))
    j = int(index % self.sqrtnum)

    surroundingTiles = []

    startat = 0 if horizontal else 4
    stopat = 8 if vertical else 4

    for di, dj in dij[startat:stopat]:
        if 0 <= i + di <= maxtile and 0 <= j + dj <= maxtile:
            surroundingTiles.append(self[i + di][j + dj])

    return surroundingTiles 
```

（未经测试。）它使用单位步骤相对计算相邻索引，因此您不必显式输入它们。它还同时测试所有`out of bounds`案例。

正如您的代码所暗示的那样，我假设`horizontal`and`vertical`您的意思是`horizontally and vertically adjacent`and 。`diagonally adjacent`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T21:02:35.903

将@irrelephant 的想法更进一步（这是合乎逻辑的结论或归约荒谬，你决定）：

```
d = (
    ( ( 0, 1), ( 1, 0), ( 0,-1), (-1, 0) ),
    ( ( 1, 1), ( 1,-1), (-1, 1), ( 1,-1) )
)

def getSurroundingTiles(self, tile, horizontal = True, vertical = True):
    index = list(self.getTiles()).index(tile)
    maxtile = self.sqrtnum - 1 # Offset for 0 indexing

    fhv = (horizontal, vertical)
    ij = ( int(math.floor(index / self.sqrtnum)),
           int(index % self.sqrtnum) )

    surroundingTiles = []
    for ihv in range(2):
        if fhv[ihv]:
            for k in range(4):
                n = [sum(p) for p in zip(ij, d[ihv][k])]
                if all([0 <= n[i] <= maxtile for i in range(2)]):
                    surroundingTiles.append(self[n[0]][n[1]])

    return surroundingTiles 
```

请注意：此代码未经测试。

# python - 希腊字母表中的 Python 变量名

> ID：13781432
> 
> 赞同：2
> 
> 时间：2012-12-08T20:09:58.817
> 
> 标签：python, scientific-computing

> **可能重复：**
> [Python 中的 Unicode 标识符？](https://stackoverflow.com/questions/2649544/unicode-identifiers-in-python)

只是检查一下，但我假设我无法编写带有以下行的 Python 程序：

```
σ = 5.67e-8
j = σ * T**4
print j 
```

扩展语法以接受变量名的希腊符号不是很好吗？我相信它可以使代码更具可读性，恕我直言，这比必须编写“sigma = 5.76e-8 ...”更好。

如果 Python 的语法不支持，是否有任何 IDE/编辑器可以接受它，然后在运行程序之前透明地将“σ”转换为“sigma”？

# ruby-on-rails - Rails上传带有标题的CSV文件

> ID：13781438
> 
> 赞同：-4
> 
> 时间：2012-12-08T20:10:20.697
> 
> 标签：ruby-on-rails, ruby, model-view-controller, csv

我将 Ruby 1.9.2 与 Rails 3.2.1 一起使用。

我想创建一个视图来上传 CSV 或制表符分隔的文件，并使用表格或分页显示在同一页面上显示文件的内容，然后在 JavaScript 中处理该数据。

我怎样才能做到这一点？请带我浏览您拥有的任何代码示例，我也是 Ruby 的菜鸟。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T23:53:26.110

首先，编写一个视图来上传您的文件。您可以为此使用[回形针。](https://github.com/thoughtbot/paperclip)

假设您有一个资源`Csv`，您的上传表单可能如下所示：

```
<%= form_for @csv, :url => csv_path, :html => { :multipart => true } do |form| %>
  <%= form.file_field :attachment %>
<% end %> 
```

您的型号：

```
class Csv < ActiveRecord::Base
  attr_accessible :attachment
  has_attached_file :attachment
end 
```

您的控制器操作：

```
def create
  @csv = Csv.create( params[:csv] )
  # your save and redirect code here
end

def show
  @csv = Csv.find(params[:id])      
end 
```

有了这个，你可以在你的视图中使用这样的东西：

```
CSV.foreach(@csv.attachment.path) do |row|
  # use the row here to generate html table rows
end 
```

注意：这只是一个关于如何做到这一点的一般概念，您需要将资源添加到您的路线中，安装和配置 Paperclip gem，等等 - 阅读有关如何做所有这些的文档。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-08T20:40:19.257

只需使用一个不错的 Ruby gem 来解析 CSV 文件。这应该为您指明正确的方向。[http://fastercsv.rubyforge.org/](http://fastercsv.rubyforge.org/)

# monodevelop - Unity3D，Monodevelop 卡住最小化

> ID：13781442
> 
> 赞同：0
> 
> 时间：2012-12-08T20:10:41.607
> 
> 标签：monodevelop, unity3d, windowing

我不确定它是如何发生的，但它似乎是一个持续存在的错误。每当我尝试通过在资产浏览器中双击我的一个脚本来启动 Monodevelop 时，Monodevelop 都会启动，但仍保持最小化。当我尝试恢复它时（通过单击底部栏的部分），按钮的状态发生了变化，但 Monodevelop 没有出现。我试图重新启动 Unity 来解决这个问题，但这并没有帮助。有没有其他人遇到过这个？也许有一个修复？我应该删除一些配置文件以便重置它们吗？（如果有，是哪些）

系统：华硕笔记本电脑 - Vista64

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T20:15:33.737

解决方法很简单，试试这个。

1）右键单击最小化的应用程序。

2) 在列表中选择“最小化”选项。

3) 现在选择列表中的“最大化”选项。

4）在这里应用程序将打开（最大化）......

如果您仍然遇到问题，请告诉我。

# perl - 捕获和拆分 TAP 输出/结果

> ID：13781443
> 
> 赞同：1
> 
> 时间：2012-12-08T20:10:56.617
> 
> 标签：perl, parsing, tap

我想捕获我的脚本的 TAP 输出，将它与一些附加信息一起写入我的同事的 openoffice 文档中，并作为我的正常 TAP 输出到控制台中。这必须在（！）我的脚本中完成。

我猜 TAP::Parser 是我应该走的路，对吧？我不知道怎么做，我找不到一个简单的例子。如果我有这样的脚本：

```
#!/usr/bin/perl

use strict;
use warnings;
use Test::More tests => 2;

is( 1 + 1, 2, "one plus one is two" );
#missing code to capture the result of the test above

is( 1 + 1, 11, "one plus one is more than two" );
#missing code to capture the result of the test above 
```

如何获得每次测试的结果？创建一个openoffice文档不是问题。

TAP::Parser 是做我想做的事情的正确方法吗？

谢谢

萝莉

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T22:32:08.237

捕获输出的一种简单方法是使用[标志`--archive`来证明](https://metacpan.org/module/prove#OPTIONS)。这会将测试套件输出连同结果摘要一起保存在 tarball 中。您还应该使用该`--merge`标志以便捕获 STDERR。

```
$ prove --archive test_out.tgz --merge my_test.pl
my_test.pl .. ok   
All tests successful.
Files=1, Tests=3,  0 wallclock secs ( 0.01 usr  0.00 sys +  0.01 cusr  0.00 csys =  0.02 CPU)
Result: PASS

TAP Archive created at /home/you/test_out.tgz 
```

一旦你有了它，你可以在闲暇时读回它，用 TAP::Parser 重新解析它，然后用它做你喜欢的事情。

```
use TAP::Parser;

my $tap_file = shift;
open my $tap_fh, $tap_file or die $!;

# Can't just pass in the .t file, it will try to execute it.
my $parser = TAP::Parser->new({
    source => $tap_fh
});

while ( my $result = $parser->next ) {
    # do whatever you like with the $result, like print it back out
    print $result->as_string, "\n";
} 
```

如果由于某种原因您不能/不会使用证明，您可以将捕获代码插入到您的脚本中。我*强烈建议*您不要这样做，因为您必须为每个测试脚本执行此操作，它必须硬编码到测试中，这使得它们对正常测试不太有用（即通过证明或 Test::Harness 运行测试（证明是只是一个包装））。您还必须做一些花哨的工作，以确保您捕获测试的完整输出，任何发送到 STDERR 或 STDOUT 的警告，而不仅仅是测试输出。

所以在我解释之前，因为你是手动运行测试程序（你不应该这样做），所以这里是你如何使用 bash shell 来做的。

```
perl my_test.pl > test.out 2>&1 
```

如果这对您有用，请使用它。将其硬编码到脚本中是不值得的。

您仍然必须使用上面的 TAP::Harness 脚本之类的东西来处理 test.out 以从中获取意义，但这将捕获程序的完整输出。您可以一步完成，再次使用 shell 重定向。

```
perl my_test.pl 2>&1 | tap2oo 
```

其中 tap2oo 是将 TAP 转换为 Open Office 文档的程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T20:28:14.057

你可以为 App::Prove 写一个[插件](https://metacpan.org/module/App%3a%3aProve#PLUGINS)。一个很好的参考/起点是[Test::Pretty](https://metacpan.org/release/Test-Pretty)。

# php - phpunit use yaml file for config settings

> ID：13781448
> 
> 赞同：1
> 
> 时间：2012-12-08T20:11:22.177
> 
> 标签：php, unit-testing, phpunit

Is it possible in phpunit to use a yaml file that contains configuration setting to be used in tests?

If so how as I cant see this in the documentation.

I am thinking that it might be possible to use such a file to contain useful data used throughout tests.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T00:13:21.730

You can use yaml to initialize a database, or as the expected result for a database-related assert: [http://www.phpunit.de/manual/3.7/en/database.html#understanding-datasets-and-datatables](http://www.phpunit.de/manual/3.7/en/database.html#understanding-datasets-and-datatables)

I don't believe there is any built in support for a yaml data provider, but if you have a parser that converts yaml to a flat array, you could easily write your own. [http://www.phpunit.de/manual/3.7/en/writing-tests-for-phpunit.html#writing-tests-for-phpunit.data-providers](http://www.phpunit.de/manual/3.7/en/writing-tests-for-phpunit.html#writing-tests-for-phpunit.data-providers)

# android - 每 X 秒向通知发送数据？

> ID：13781449
> 
> 赞同：0
> 
> 时间：2012-12-08T20:11:24.417
> 
> 标签：android, android-notifications

有没有办法首先创建一个`Notification`并设置一些默认值`message`（通知标题下方的行），然后**每 X 秒更改一次该消息**？

我尝试寻找解决方案，但我发现那些建议不断杀戮和创造`Notification`，但我没有找到合适的方法来实现我需要的东西。

我需要在同一个通知中实现一个小计数器，它将每 X 秒更新一次。

PS。请不要将此与**从**通知发送数据到活动相混淆。我需要相反的过程 - 将数据**从活动发送到**通知。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T20:25:32.480

请看一下android文档

> 更新通知
> 
> 要设置通知以便更新通知，请通过调用 NotificationManager.notify(ID, notification) 向其发出通知 ID。要在发出通知后更新此通知，请更新或创建一个 NotificationCompat.Builder 对象，从中构建一个 Notification 对象，并使用您之前使用的相同 ID 发出通知。如果之前的通知仍然可见，系统将根据 Notification 对象的内容对其进行更新。如果先前的通知已被解除，则会创建一个新通知。
> 
> 以下代码段演示了一个更新的通知，以反映已发生的事件数量。它堆叠通知，显示摘要：

可能设置通知 id 并通过 id 访问相同的通知是解决您问题的方法。[这](http://developer.android.com/guide/topics/ui/notifiers/notifications.html)是文档的链接。

**编辑：**

可能我错过了您问题的一个方面 - 即创建新的通知实例。要解决它，您可以在单例类中声明通知实例。这样，您就不必一次又一次地创建通知实例。只需修改通知的内容并一次又一次地使用相同的实例。

# python - Python 3 - 与网页交互的方式

> ID：13781455
> 
> 赞同：1
> 
> 时间：2012-12-08T20:12:04.650
> 
> 标签：python, web, python-3.x

我有阅读和提取 html 源代码'as given'（通过 urllib.request）的经验，但现在我想执行类似浏览器的操作（如填写表单，或从选项菜单中选择一个值），然后，当然，像往常一样阅读生成的 html 代码。我确实遇到了一些看起来很有希望的模块，但结果却不支持 Python 3。所以，我在这里要求提供所需的库/模块的名称，或者指向标准库中的解决方案，如果它在那里并且我没看到。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T20:23:58.987

通常许多网站（如 Twitter、facebook 或 Wikipedia）都提供他们的 API，让开发人员能够连接到他们的应用程序并以编程方式执行活动。对于您希望通过代码执行活动的任何网站，只需寻找他们的 API 支持。

如果您需要进行网页抓取，可以使用[scrapy](http://scrapy.org)。但它只支持python 2.7.x。无论如何，您可以使用HTTP 客户端的[请求和 HTML 解析的](http://docs.python-requests.org/en/latest/)[美丽汤](http://www.crummy.com/software/BeautifulSoup/)。

# javascript - Javascript，无限循环并冻结

> ID：13781459
> 
> 赞同：0
> 
> 时间：2012-12-08T20:12:21.080
> 
> 标签：javascript, html, canvas, physics, collision

所以我正在使用 HTML5 画布和 javascript 进行简单的物理模拟。我正在尝试进行一些真实的碰撞，但是每当发生碰撞时，代码就会开始无限循环并冻结页面。

我正在使用谷歌浏览器 24.0.1312.32 beta-m

当查看 javascript 控制台时，“console.log（“我正在与某物发生碰撞”）行变得疯狂，每秒打印数千次并完全破坏页面。

我不太确定它为什么会发生，我不知道该怎么做。任何帮助和/或输入将不胜感激。

```
for (i = 0; i <= 3; i++) {
    if (collide(i)) {
        console.log("I am colliding with something");
        if (typeof getCollideIndx === 'undefined') {
            console.log("collide index is not undefined");
            if (!getCollideIndx(i)) {
                console.log("Made it past null check");
                //...update object based on collision 
```

碰撞（）函数是：

```
function collide(b) {
for (i = 0; i <= 3; i++) {
    //Distance between each object
    var distance = (Math.sqrt(Math.pow((balls[b].x - balls[i].x), 2) + Math.pow(balls[b].y - balls[i].y, 2)));
    if (distance < 32) {
        //must be less than 2*radius -- all radii are the same

        //makes it so that it doesn't return true when checking its own index
        if (!(balls[b].mass == balls[i].mass)) {
            return true;
        } else {
            return false;
        }
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T20:26:44.690

我在你的代码中看不到无限循环，我最好的猜测是这个语句

```
 if (typeof getCollideIndx === 'undefined') 
```

每次都失败，并且以下代码所在的任何函数都会被连续调用

```
for (i = 0; i <= 3; i++) {
    if (collide(i)) {
        console.log("I am colliding with something");
        if (typeof getCollideIndx === 'undefined') {
            console.log("collide index is not undefined");
            if (!getCollideIndx(i)) {
                console.log("Made it past null check");
                //...update object based on collision 
```

同样在此，我没有看到 for 循环的要点，因为控件总是返回到调用函数（在 collide() 函数中）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T20:37:49.300

好吧，被困在那个 for 循环中意味着索引变量`i`在某处被错误地设置。由于无法看到整个代码，我不能肯定地说，但循环`for(i=0; i<3; i++){...`将分配`i`给`window`对象，因为您没有明确地确定它的范围（即`for(var i...`）。

例如，请参见[这个 jsfiddle](http://jsfiddle.net/Ssjcb/)，其中第一个函数将只运行一次而不是三次，因为`i`第二个函数中会影响相同的变量。

显然运行一次！=无限循环，但是如果`collide`函数对（或者可能在发现碰撞后中断？）执行某些操作（或者可能在发现冲突后中断？），那么每次调用它的 for 循环开始时，它`i`的值将被重置为 0。`i`

所以是的，如果没有更多的代码，我不能肯定地说；但在这种情况下，我的建议是：始终使用`var`in for 循环，否则可能会发生奇怪的事情！

# javascript - 在点击或触摸事件上绘制

> ID：13781463
> 
> 赞同：0
> 
> 时间：2012-12-08T20:12:44.883
> 
> 标签：javascript, html, html5-canvas

我正在学习 javascript 并尝试开发一个页面来绘制。更改颜色和线宽已经到位。现在它正在绘图，但就在我移动鼠标的时候。我还想在移动时添加点击。所以我也可以画点。我已将 drawCircle 函数放在函数 stopDraw 中，但这不能正常工作。有任何想法吗？

第二个问题是，我想画一个没有笔划的圆圈。但是，一旦我更改了 lineWidth，我的圈子也会受到影响。请帮忙...

```
// Setup event handlers

cb_canvas = document.getElementById("cbook");

cb_lastPoints = Array();

if (cb_canvas.getContext) {
    cb_ctx = cb_canvas.getContext('2d');
    cb_ctx.lineWidth = 14;
    cb_ctx.strokeStyle = "#0052f8";
    cb_ctx.lineJoin="round";
    cb_ctx.lineCap="round"
    cb_ctx.beginPath();

    cb_canvas.onmousedown = startDraw;
    cb_canvas.onmouseup = stopDraw;
    cb_canvas.ontouchstart = startDraw;
    cb_canvas.ontouchend = stopDraw;
    cb_canvas.ontouchmove = drawMouse;
}

function startDraw(e) {
if (e.touches) {
    // Touch event
    for (var i = 1; i <= e.touches.length; i++) {
        cb_lastPoints[i] = getCoords(e.touches[i - 1]); // Get info for finger #1
    }
}
else {
    // Mouse event
    cb_lastPoints[0] = getCoords(e);
    cb_canvas.onmousemove = drawMouse;
}

return false;
}

// Called whenever cursor position changes after drawing has started
function stopDraw(e) {
drawCircle(e);
e.preventDefault();
cb_canvas.onmousemove = null;
}

//Draw circle
function drawCircle(e) {
var canvasOffset = canvas.offset();
var canvasX = Math.floor(e.pageX-canvasOffset.left);
var canvasY = Math.floor(e.pageY-canvasOffset.top);
//var canvasPos = getCoords(e);

cb_ctx.beginPath();
cb_ctx.arc(canvasX, canvasY, cb_ctx.lineWidth/2, 0, Math.PI*2, true);
cb_ctx.fillStyle = cb_ctx.strokeStyle;
cb_ctx.fill();

}

function drawMouse(e) {
cb_ctx.beginPath();
if (e.touches) {
    // Touch Enabled
    for (var i = 1; i <= e.touches.length; i++) {
        var p = getCoords(e.touches[i - 1]); // Get info for finger i
    cb_lastPoints[i] = drawLine(cb_lastPoints[i].x, cb_lastPoints[i].y, p.x, p.y);
    }
}
else {
    // Not touch enabled
    var p = getCoords(e);
    cb_lastPoints[0] = drawLine(cb_lastPoints[0].x, cb_lastPoints[0].y, p.x, p.y);
}
cb_ctx.stroke();
cb_ctx.closePath();
//cb_ctx.beginPath();

return false;
}

// Draw a line on the canvas from (s)tart to (e)nd
function drawLine(sX, sY, eX, eY) {
cb_ctx.moveTo(sX, sY);
cb_ctx.lineTo(eX, eY);
return { x: eX, y: eY };
}

// Get the coordinates for a mouse or touch event
function getCoords(e) {
if (e.offsetX) {
    return { x: e.offsetX, y: e.offsetY };
}
else if (e.layerX) {
    return { x: e.layerX, y: e.layerY };
}
else {
    return { x: e.pageX - cb_canvas.offsetLeft, y: e.pageY - cb_canvas.offsetTop };
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T23:43:57.747

您的 drawCircle 函数包含在画布的 onclick 事件中。它应该是

```
function drawCircle(e) {
    var canvasOffset = canvas.offset();
    var canvasX = Math.floor(e.pageX-canvasOffset.left);
    var canvasY = Math.floor(e.pageY-canvasOffset.top);
    cb_ctx.beginPath();
    cb_ctx.lineWidth = 0;
    cb_ctx.arc(canvasX,canvasY,cb_ctx.lineWidth/2,0,Math.PI*2,true);
    cb_ctx.fillStyle = cb_ctx.strokeStyle;
    cb_ctx.fill();
} 
```

因此，您还必须从 stop draw 传递事件对象

```
function stopDraw(e) {
    drawCircle(e); //notice the change here
    e.preventDefault();
    cb_canvas.onmousemove = null;
} 
```

请注意，您还将圆的半径设置为 0，这可能是它未显示的另一个原因。

```
cb_ctx.lineWidth = 0;
cb_ctx.arc(canvasX,canvasY,cb_ctx.lineWidth/2,0,Math.PI*2,true); 
```

0 除以 2 始终为零。如果您不想在圆圈周围描边，请不要调用 stroke()。drawCircle 函数不会导致这种情况，因为有一个 beginPath() 调用。我怀疑这是因为您在 drawMouse 中调用 stroke() 之前没有 beginPath()。

# networking - 如何将时间胶囊设置为中继器

> ID：13781467
> 
> 赞同：1
> 
> 时间：2012-12-08T20:13:22.527
> 
> 标签：networking, wifi, router

我有一个调制解调器路由器和一个时间胶囊。我想将我的时间胶囊“无线”连接到路由器，并使用它通过有线连接将其他设备连接到路由器。有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T14:31:46.557

经过[进一步研究](https://discussions.apple.com/message/19434160#19434160)，使用 timecapsule 作为中继器似乎是非 Apple 路由器的不可选项。此外，根据[苹果的支持](https://discussions.apple.com/thread/2392292?start=0&tstart=0)，这似乎是个坏主意。

# c# - 从对象列表中获取属性列表

> ID：13781468
> 
> 赞同：101
> 
> 时间：2012-12-08T20:13:31.763
> 
> 标签：c#

目前我使用`foreach`循环返回`object`属性列表。

```
 class X
 {
     List<X> Z = GetXlist();
     List<String> r = new List<String>();

     foreach (var z in Z)
     {
         r.Add(z.A);
     }

     return r;
} 
```

有没有办法可以缩短它，这样我就不必编写`foreach`循环了？

* * *

## 回答 #1

> 赞同：204
> 
> 时间：2012-12-08T20:15:49.353

**[LINQ](http://msdn.microsoft.com/en-us/library/bb397933.aspx)**就是答案。您可以使用它从您的对象集合“投影”到另一个集合 - 在本例中是对象属性值的集合。

```
List<string> properties = objectList.Select(o => o.StringProperty).ToList(); 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-12-08T20:17:23.190

您可以使用 LINQ：

```
List<X> Z = GetXlist();

List<String> r = Z.Select(z => z.A).ToList();

return r; 
```

要不就，

```
return GetXlist().Select(z => z.A).ToList(); 
```

了解更多关于**[LINQ](http://msdn.microsoft.com/en-us/library/vstudio/bb397926.aspx)**的信息。它*非常*有用。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-09-05T11:33:33.713

```
List<string> properties = objectList.Select(o => o.StringProperty).ToList(); 
```

您也可以通过私有`OverLoading`方法执行并在 LINQ 查询中使用该方法。

# javascript - 如何从 ul 图像中获取 img src 属性？

> ID：13781470
> 
> 赞同：0
> 
> 时间：2012-12-08T20:13:39.227
> 
> 标签：javascript, html, image, src

```
<ul id="ulGall">
<li><img src="gaLL/red.jpg"/></li>
<li><img src="gaLL/blue.jpg"/></li>
<li><img src="gaLL/white.jpg"/></li>
<li><img src="gaLL/orange.jpg"/></li>
</ul> 
```

.

```
$(document).ready(function() {
 x = 0;
 z = $('#ulGall li').length;
}); 
```

.

```
$('#btnR').click(function() {
    if(x == z) {x = 1;} 
    else {x = x + 1;} // till here everything works  

    alert ($('ulGall').index =x, src attribute // just as description 
```

ie - 给我 img`src`属性 - 在哪里`li index = x`

所以第一次点击应该是`gaLL/red.jpg`
Next click -`gaLL/blue.jpg`等等
橙色 - 红色之后。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T20:18:33.560

您可以像这样在第一个 li 中获取 img 的“src”属性：

```
$("#ulGall li").eq(0).next("img").attr("src"); 
```

.eq() 函数中的数字决定了目标 li 元素中的哪一个 - 第一个元素的索引为 0。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T20:20:33.073

```
$('#btnR').click(function() {
    if(x == z) {x = 1;} 
    else {x++}   
    var source=$("#ulGall li").eq(x).next("img").attr("src");
    alert(source);
}); 
```

这里的技巧是使用 .eq() 根据它的索引选择元素，您也可以直接从选择器中按索引选择一个元素，如下所示：

```
$("#ulGall li:eq(0)") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T20:20:34.983

您可以使用[`:eq`](http://api.jquery.com/eq/)jQuery 的选择器。

```
$('#ulGall li:eq(0) img').attr('src')​ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-08T20:38:02.273

尽管您已经接受了答案，但我想我会提供一个替代方案：

```
function clicks(el){
    if (!el) {
        return false;
    }
    else {
        var i = 0;
        clicks = function(el){
            var kids = $(el).find('img').length,
                which = i < kids ? i : i%kids;
            console.log($(el).find('img').eq(which).attr('src'));
            i++;
        };
        clicks(el);
    }
}

$('#ulGall').click(
    function(){
        clicks(this);
    });​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/Vumjz/)。

还有一个稍作修改的、较少 jQuery 的函数：

```
function clicks(el) {
    if (!el) {
        return false;
    }
    else {
        var i = 0;
        clicks = function(el) {

            var imgs = el.getElementsByTagName('img'),
                kids = imgs.length,
                which = i < kids ? i : i % kids;

            console.log(imgs[which].src);
            i++;
        };
        clicks(el);
    }
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/Vumjz/1/)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-08T21:21:49.860

For the sake of completeness, it seems that a good jQuery alternative is missing here.

```
$('button').each(function(){
    var idx = 0, $gallery = $("#ulGall").find("img");
    $(this).click(function(){
        var src = $gallery.eq(idx).attr("src");
        idx = (idx == $gallery.length - 1) ? 0 : idx + 1;
    });
});​ 
```

[A live example.](http://jsfiddle.net/EuvCD/)

# php - PHP - 用某些东西替换单词之间的空格

> ID：13781473
> 
> 赞同：0
> 
> 时间：2012-12-08T20:13:55.607
> 
> 标签：php

> **可能重复：**
> [如何用 - 替换包含空格的字符串](https://stackoverflow.com/questions/6042802/how-to-replace-a-string-contains-space-with)

我想用一些东西替换单词之间的空格。

**例如，我有：**

```
$title = "An example title";
$separator = "*"; 
```

我想要一个显示的功能：

```
An*example*title 
```

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T20:15:11.910

使用 PHP的[str_replace](http://php.net/manual/en/function.str-replace.php)（str_replace - 用替换字符串替换所有出现的搜索字符串）：

```
str_replace(" ","*",$title); 
```

所以，用你的例子：

```
$title = "An example title";
$separator = "*";
echo str_replace(" ", $separator, $title); // returns An*example*title 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T20:25:44.667

您还可以使用正则表达式将一行中的多个空白字符替换为选定的字符串：

```
$str = 'this    is some     string';
$new_str = preg_replace('/\s+/', '*', $str); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T20:15:47.097

```
$title = "An example title";
$separator = "*";
$title = str_replace(' ',$separator,$title); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-08T20:15:59.923

只需使用

```
str_replace(" ","*",$title); 
```

# c# - 如何从作为ajax响应返回的字符串中获取整数

> ID：13781474
> 
> 赞同：0
> 
> 时间：2012-12-08T20:14:01.153
> 
> 标签：c#, jquery, ajax

我有一个 ajax 函数，它将数据发送到我的 Web 服务，该服务又返回 POST 的状态，其中包含一个整数，提供有关更新记录数的详细信息。我想从返回的字符串中过滤整数。但是整数在返回时与状态连接，如下所示：

```
 return "Saved"+totalrowsupdated.ToString(); 
```

我怎样才能让那些分开？我想在页面中的某处显示整数。是否可以？或正确的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T20:18:19.110

你可以使用类似的东西：`var num = parseInt(response.replace("Saved", ''), 10);`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T20:19:34.290

如果您被迫返回一个简单的字符串，您总是可以使用正则表达式来解析整数，例如：

```
var updated = result.match(/\d/); 
```

但是，这有点粗略，如果您想返回更多信息而不仅仅是简单的状态，那么 JSON 结果可能是您最好的选择。

# java - 在 Java 中更改 RGB 颜色

> ID：13781479
> 
> 赞同：0
> 
> 时间：2012-12-08T20:14:34.350
> 
> 标签：java, mouselistener

我在 Java 中创建了一个程序（出于练习目的），我有一个星星，通过滚动鼠标，颜色必须从浅红色变为深红色。（使用 MouseWheelListener）反之亦然一切都适用于其他类型的星星，但是只有这个不起作用..而不是让你们困惑，我要给你们看一些代码！

这是红星班

```
 public class StarRed extends Star {

    protected int r = 221;
    protected Color rood = new Color(r, 0, 0);

    public StarRed(int radius, int x, int y) {
        super(radius, x, y);

        this.color = rood;

        System.out.println(r);
    }

} 
```

如您所见，我尝试使用 R 变量来更改颜色..

在我的控制器中，我这样做

```
 @Override
public void mouseWheelMoved(MouseWheelEvent e) {

    for(StarRed s: rs) {
        s.r += e.getWheelRotation();
    }
    repaint();
} 
```

但是颜色没有改变，谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T20:19:36.133

Color 是不可变类，改变 r 的值不会改变`protected Color rood`

所以你需要做的是在你的明星类中添加新的方法，在这个类中，rood 的值，即要使用的颜色会根据给定的参数而改变。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T20:19:53.023

假设您已经正确实现了 mouseWheelMoved，那么问题出在您添加值 r 时。

虽然 rood 是：

```
protected Color rood = new Color(r, 0, 0); 
```

当您`r`在创建颜色后更改 的值时，它不会更改您的红色部分的值`Color rood`。

因此，您想要创建一个函数，添加到您的颜色 rood 的红色值，然后更改颜色本身。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T20:20:42.647

当您将类型`int`（或任何其他原始类型）的变量传递给方法或构造函数时，您传递变量的*值*（如果您愿意，可以传递一个副本）。您没有传递对其值的*引用。*因此，更改变量的值不会更改您之前使用此变量创建的颜色。

您需要改变颜色对象（但这是不可能的，因为颜色是不可变的），或者用另一个替换颜色对象本身。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-08T20:23:18.310

每次移动滚轮时都需要实例化一种新颜色，如下所示：

```
for(StarRed s: rs) {
    s.r += e.getWheelRotation();
    s.rood = new Color(r, 0, 0);
    s.color = s.rood;
} 
```

目前您只更改 field ，而不是用于构造`r`的 Color 。`rood``r`

# ruby-on-rails - Rails 3：未初始化的常量 FactoryGirl

> ID：13781482
> 
> 赞同：7
> 
> 时间：2012-12-08T20:14:53.813
> 
> 标签：ruby-on-rails, tdd, factory-bot

我正在尝试使用 FactoryGirl 为我的 Rails 应用程序创建我的第一个控制器测试，但我不断检索以下错误：

```
uninitialized constant FactoryGirl 
```

我的 Factory.rb 文件如下所示：

```
FactoryGirl.define do
  factory :offer, class: "Offer" do |f|
    f.title     "Some title"
    f.description   "SomeDescription"
  end
end 
```

我的控制器测试如下所示：

```
require 'spec_helper'

describe OffersController do
 def valid_session
    {}
  end

  describe "GET index" do
     before { 
        @offer = FactoryGirl.create(:offer)
     }

    it "assigns all offers as @offers" do    
      get :index, {}, valid_session
      assigns(:offers).should eq([@offer])
    end
  end
end 
```

我的 Gemfile 看起来像这样：

```
group :development, :test do
  gem 'sqlite3'
  gem 'rspec-rails'
  gem 'capybara', '1.1.2'
  gem 'factory_girl_rails', '>= 4.1.0', :require => false
end 
```

由于 FactoryGirl 不存在，我可能会缺少什么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-08T20:47:24.260

您可能忘记要求`factory_girl`in `spec_helper.rb`。

# ios - 如何为音频处理线程设置更高的优先级，以便我的 RemoteIO 音频单元执行时不会出现故障？

> ID：13781488
> 
> 赞同：2
> 
> 时间：2012-12-08T20:15:29.260
> 
> 标签：ios, core-audio, audiounit, mpmusicplayercontroller

我注意到当 UI 主线程上发生重大事件时，音频单元渲染时会出现可听的声音间隙，例如，首次显示 UIAlertView 或一些重型 ui 控制器。

请看一下[示例项目](https://dl.dropbox.com/u/6346350/AudioUnitsGap.zip)。只有一个带有输出渲染回调的远程 IO 单元，缓冲区持续时间设置为可能的最大值 - 92 毫秒。加载警报视图时，渲染回调之间有 200-300 毫秒的间隔，即使渲染函数为*空。*

**问题是：**如何使用音频单元达到 Apple 的 MPMusicPlayerController 渲染性能？这是可能的还是Apple的播放器基于较低的API？浏览核心音频邮件列表让我一无所获。

提前致谢！

# jquery - 将滑块值传递给其他函数

> ID：13781489
> 
> 赞同：0
> 
> 时间：2012-12-08T20:15:30.803
> 
> 标签：jquery, slider, var

几天前我发布了一个类似的问题，并且做了更多的研究和编码，现在我陷入了困境。我是一个完整的新手，需要更多帮助。

我目前在同一页面上成功呈现了一个滑块和两个图表。我想将滑块的值传递给两个图表函数，这样当滑块移动时，图表就会刷新。滑块是使用 jQuery UI 函数生成的。图表由 Highcharts 函数生成。

jQuery Slider API 中有一个名为“value()”的“方法”，它将检索滑块的值，如下所示：

```
var selection = $( ".selector" ).slider( "value" ); 
```

目前，图表的值被硬编码为图表功能代码中的数字。我想根据滑块的值动态更新图表的值。

想法？

谢谢，

克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T20:40:02.597

您可以在 jquery UI 文档中使用更改功能

```
$(function() {

    $("#slider").slider({
     change: function (event,ui){
      // your code here
    }
});
}); 
```

这应该适用于每次滑块发生变化时

* * *

这就是您的代码的样子

```
 change: function(event,ui)
      {
        $( "selector" ).val( ui.value );
      } 
```

# android - 让 Eclipse 知道一个新的 android 自定义视图

> ID：13781491
> 
> 赞同：0
> 
> 时间：2012-12-08T20:15:36.810
> 
> 标签：android, eclipse

在 android 库项目中编写新的自定义视图后，如何让 Eclipse 意识到它并将其添加到“自定义和库视图”选项卡（以便我可以在 GUI 编辑器中使用它）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T11:03:56.573

正如这里所写：[自定义组件](http://developer.android.com/guide/topics/ui/custom-components.html#compound)

> 通常的起点是某种 Layout ，**因此创建一个扩展 Layout 的类**。也许在组合框的情况下，我们可能会使用水平方向的 LinearLayout。

因此，您的视图可能如下所示：

```
import android.content.Context;
import android.util.AttributeSet;
import android.view.LayoutInflater;
import android.widget.LinearLayout;

public class LayoutX extends LinearLayout {

    public LayoutX(Context context, AttributeSet attrs) {
        super(context, attrs);

        LayoutInflater inf = (LayoutInflater) context.
              getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        inf.inflate(pl.infografnet.GClasses.R.layout.layout_file, this, true);
    }
} 
```

layout_file.xaml 看起来像这样：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="match_parent" >

    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="button" >

    </Button>

    <CheckBox
        android:id="@+id/checkBox1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="CheckBox" />

</LinearLayout> 
```

在我的情况下，让 Eclipse`LayoutX`在“自定义和库视图”选项卡上看到组件就足够了。

# python - Gtk3 与 Python，TextView 上升多个“标记集”信号

> ID：13781496
> 
> 赞同：2
> 
> 时间：2012-12-08T20:15:52.923
> 
> 标签：python, pygtk, gtk3

考虑以下示例代码，它将 a`TextView`放入窗口并注册`mark-set`事件：

```
#!/usr/bin/env python3

from gi.repository import Gtk

win = Gtk.Window(title='test')
text_view = Gtk.TextView()

def test (*args):
    print('test!')

win.add(text_view)
text_view.get_buffer().connect('mark-set', test)

win.connect('delete-event', Gtk.main_quit)
win.show_all()
Gtk.main() 
```

如果我启动它，并在`TextView` **多次**获得调试输出后单击可视化：

```
$ ./test.py 2>/dev/null
test!
test!
test!
test! 
```

你知道为什么会这样吗？有没有办法避免呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-11T11:50:44.750

I don't know **why** exactly it's happening, but I found something to help you understand, or use it to prevent duplicate actions in handler, using `mark.get_name()`. Here I changed your code, type some text and play with it (select some text, click somewhere, ...)

```
#!/usr/bin/env python3
import time
from gi.repository import Gtk

win = Gtk.Window(title='test')
text_view = Gtk.TextView()

def mark_set(buf, itr, mark):
    ### mark.get_name() ==> 'selection_bound' | 'insert' | None
    print('Time: %.2f,    Mark Name: %s'%(time.time()%100, mark.get_name()))

win.add(text_view)
text_view.get_buffer().connect('mark-set', mark_set)

win.connect('delete-event', Gtk.main_quit)
win.show_all()
Gtk.main() 
```

# zend-framework - Zend Framework：如何将自定义 html 添加到表单元素？

> ID：13781500
> 
> 赞同：0
> 
> 时间：2012-12-08T20:16:15.007
> 
> 标签：zend-framework, zend-form-element

我想在 ZF 1.12 的注册表单中添加自定义 HTML（“注册”按钮附近的“登录”链接）。

当我这样做时：

```
$submit = new Zend_Form_Element_Submit('register');

$submit->setDescription(" or <a href='auth/login'>Login</a>"); 
```

...然后链接放在下一行，但我需要它靠近“注册”按钮。

我怎样才能尽可能简单地实现它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T13:11:06.163

您必须为此创建一个自定义表单装饰器。事情没那么简单。如果您没有其他选择，那么最好创建新的装饰器并将其添加到表单元素中。ZF 手册有一个很好的文档部分，用于[使用 Zend_Form_Decorator 创建自定义表单标记](http://framework.zend.com/manual/1.12/en/zend.form.decorators.html)。这篇 SO 帖子也将有助于将[自定义 HTML 插入 Zend_Form](https://stackoverflow.com/questions/11215914/insert-custom-html-into-zend-form)。

还有一个使用 javascript 的快速解决方法（如果您使用的是 jquery）

```
$(document).ready(function() {
  $('#register').after(' or <a href="auth/login">Login</a>');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-07T16:10:25.010

提交按钮的描述肯定应该更像：

“激活按钮，进行注册。”

可以说，登录链接也与表单没有直接关系。所以我只是把那个文本放在表格之后。

```
<?php echo $form; ?>
<p>Or <a href='auth/login'>Login</a></p> 
```

如果您认为登录链接应始终属于表单，则可以将其添加到表单描述中。

# css - 不带逗号的 CSS 多个选择器

> ID：13781501
> 
> 赞同：13
> 
> 时间：2012-12-08T20:16:17.673
> 
> 标签：css

我对 CSS 选择器有点困惑，我知道如果它们共享相似的属性，我们可以用逗号对多个 css 选择器进行分组，但是没有逗号的多个 css 选择器呢，例如：

```
.ui-datepicker-rtl { direction: rtl; }
.ui-datepicker-rtl .ui-datepicker-prev { right: 2px; left: auto; }
.ui-datepicker-rtl .ui-datepicker-next { left: 2px; right: auto; } 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-12-08T20:20:37.550

当您使用逗号时，例如

```
#menu, .item 
```

你是说：

> id 为 menu 的所有元素以及 class 为 item 的所有元素

当您嵌套不带逗号的选择器时，例如

```
#menu .item 
```

你是说

> 在 id 为 menu 的容器内具有类 item 的所有元素

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-08T20:18:12.017

这会选择后代。

`.ui-datepicker-rtl .ui-datepicker-prev``ui-datepicker-rtl`将选择所有具有类的元素的后代`ui-datepicker-prev`

# python - 在远程服务器上运行 Python 应用程序并显示输出文件

> ID：13781503
> 
> 赞同：-1
> 
> 时间：2012-12-08T20:16:59.320
> 
> 标签：python, google-app-engine

我在[https://github.com/jhsu802701/dopplervalueinvesting](https://github.com/jhsu802701/dopplervalueinvesting)有一个 Python 2.7 脚本。当我在本地运行 screen.py 脚本时，最终结果是一个新的屏幕输出子目录（在根目录中）和一个 results.csv 文件。

我要做的是把这个脚本放在远程服务器上，每晚运行这个 screen.py 脚本，并使 results.csv 文件公开可读。

我尝试在 Google App Engine 上执行此操作，但无法使其正常工作。Google App Engine 教程围绕着尝试动态创建一个网站，我无法弄清楚如何使根目录中的 index.html 文件以外的任何东西工作。如何使其他文件可供公众阅读？

谷歌应用引擎是要走的路，还是我找错了树？我知道另一条路线是使用 WebFaction，这是一个提供整个 Linux 系统的网络托管服务提供商。（在我当前的网络主机 MDDHosting 上运行我的应用程序不是一种选择，因为如果没有更昂贵的 VPS，lxml 是不可用的。）

总之，我的问题是：

1.  如何在 Google App Engine 中运行我的 Python 脚本并使输出的 results.csv 文件公开可用？
2.  如果 Google App Engine 不是我的解决方案，我应该使用 WebFaction 吗？（我已经尝试过 Heroku，但它对我不起作用。）
3.  我还有哪些其他选择？

我愿意为解决方案付费，但前提是我也获得了网络托管。（我不愿意为我的 dopplervalueinvesting.com 网站和另一个运行我的脚本的主机支付 MDDHosting 费用。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T23:07:09.783

我认为 GAE 应该适合您想要的，但是您可能需要以不同的方式工作，因为正如评论指出的那样，您不能写入文件系统，而必须使用数据存储。

所以你需要在你的 app.yaml 处理程序列表中，比如

```
- url: /results.csv
  script: deliver_results_file.py
- url: /screen
  login: admin
  script: screen.py 
```

screen.py 需要以某种方便的格式将结果保存到数据存储中。然后，deliver_results_file.py 查询数据存储，如果结果不是 CSV 格式，那么它会相应地转换它们。然后它将格式化的数据直接写入输出（通常`self.response.out.write`在 webapp 请求处理程序中使用），就好像它是动态生成的网页一样。

最后，您希望安排它每晚运行一次 - 我相信使用[cron 作业](https://developers.google.com/appengine/docs/python/config/cron)可以做到这一点。

# c++ - c ++以错误的方式传递值？

> ID：13781505
> 
> 赞同：0
> 
> 时间：2012-12-08T20:17:05.673
> 
> 标签：c++

当我将一个对象传递给一个函数时，我得到了不想要的结果。`Character`当我通过a`Mage`的 action() 函数时，似乎会发生这种情况。

以下是我的代码的一些片段：

### 字符.h

```
 class Character {
    public:
        Character();
        int getMaxLives() const;
        int getMaxCraft() const;

    protected:
        maxLives;
        maxCraft;
    }; 
```

### 字符.cpp

```
 #include "character.h"

    Character::Character () {
        maxLives = 5;
        MaxCraft = 10;
    }

    int Character::getMaxLives() const {
        return maxLives;
    }

    int Character::getMaxCraft() const {
        return maxCraft;
    } 
```

### 法师.h

```
 #include "character.h"

    class Mage {
    public:
        Mage();
        void action(Character c1);
    }; 
```

### 魔法师.cpp

```
 #include "mage.h"   

    Mage::Mage () { ... }
    void Mage::action(Character c1) {
        cout << "Max Craft: " << c1.getMaxCraft() << endl;
        cout << "Max Lives: " << c1.getMaxLives() << endl; 
    } 
```

### 驱动程序.cpp

```
 int main () {
        Character c1;
        Mage m1;

        m1.action(c1); 
```

* * *

我的输出给了我以下信息：

Max Craft：728798402（数量不同）

最大生命：5

* * *

但是，如果在我的潜水员中，我会：

```
cout << "Max Craft: " << c1.getMaxCraft() << endl;
cout << "Max Lives: " << c1.getMaxLives() << endl; 
```

我得到：

最大工艺：10

最大生命：5

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T20:20:58.787

看起来你的意思是`MaxCraft = 10;`（在你的默认构造函数中）实际上是`maxCraft = 10;`. 正如@chris 在评论中所说，您似乎正在使用一些允许隐式类型变量的（邪恶的，邪恶的）C++ 扩展，因此该`MaxCraft = 10;`行只是定义了一个名为`MaxCraft`.

# c++ - 发送到标题中定义的类 char 数组

> ID：13781506
> 
> 赞同：0
> 
> 时间：2012-12-08T20:17:05.803
> 
> 标签：c++, class, header-files, arrays

我遇到的问题是我正在尝试构建一个 DLL。我使用 char 而不是字符串来存储信息。

我在头文件中定义了以下内容：

```
class Test{
public:
    int qLenght;
    char firstName[];
    char surName[];
}; 
```

我在使用以下方法从主程序输入代码时遇到问题：

```
int main()
{

        Test theTest;
        theTest.firstName[0] = {"Mike Smith","Jonny Vegas","Jimmy Woo"};

} 
```

我在主项目的顶部包含了标题代码。

它不会让我添加到 char 数组中。这似乎是一个愚蠢的问题，但我正在努力，希望有人能阐明我哪里出错了。我错过了一个参数吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T21:06:29.907

您的类需要知道在实例化类时要分配多少内存（这与分配值不同）。

```
class Test
{
public:
    char firstName[2][100];
};

int main()
{
    Test theTest;
    strcpy(theTest.firstName[0], "Mike Smith");
    strcpy(theTest.firstName[1], "Jonny Vegas");
    return 0;
} 
```

或者，您可以在分配时为字符串动态分配内存，但是您需要记住再次释放它：

```
class Test{
public:
    char *firstName[2];
};

int main()
{
    Test theTest;
    theTest.firstName[0] = strdup("Mike Smith");
    theTest.firstName[1] = strdup("Jonny Vegas");

    // do stuff

    free(theTest.firstName[0]);
    free(theTest.firstName[1]);
    return 0;
} 
```

# php - WordPress 网站未完全移动

> ID：13781509
> 
> 赞同：2
> 
> 时间：2012-12-08T20:17:20.370
> 
> 标签：php, wordpress

我已经将一个 wordpress 站点从 /wordpress/ 移动到 / 并且除了标题导航栏之外它已经工作了。

[http://vashonschoolsfoundation.org/thank-you/annual-report/](http://vashonschoolsfoundation.org/thank-you/annual-report/)

如果您单击顶部链接（不是下拉链接之一），它会将您带到 /wordpress/ 网址。

IE：如果你点击谢谢，它应该带你到这里，

[http://vashonschoolsfoundation.org/thank-you/annual-report/](http://vashonschoolsfoundation.org/thank-you/annual-report/)

但它会带你到这里：

[http://vashonschoolsfoundation.org/wordpress/thank-you/annual-report/](http://vashonschoolsfoundation.org/wordpress/thank-you/annual-report/)

正确的 url（没有 /wordpress）有效，但它不是链接到的那个。

所有子菜单链接都可以正常工作。

我怎样才能解决这个问题？

注意：当您将鼠标悬停在顶部链接上时，他们说他们会将您带到正确的链接（在大多数浏览器的 url 预览浏览器功能中），但他们会将您带到错误的链接（/wordpress）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T20:33:10.120

I see that only two top navigation links redirects to /wordpress/ ('Thank You' and 'Contribute'). 'About' and 'Contact us' works correctly. When clicking on 'Contribute' server sends Location header - Location:http://vashonschoolsfoundation.org/wordpress/contribute/give-today/

This header is set somewhere in you code or options that are saved in database. I don't think that the problem in database, because in this case all links will be broken. Try to disable all plugins, switch to default theme and check the links.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T20:21:51.773

您是否更改了 Wordpress 常规设置中的“站点地址”？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T20:22:11.773

您是否只是将文件上移了一个目录？因为它不仅如此。我已经多次使用[这些详细说明来移动 Wordpress 安装。](http://codex.wordpress.org/Moving_WordPress)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-08T20:23:23.220

转储您的 wordpress 数据库，然后从转储中搜索替换旧 URL，然后删除当前数据库，然后导入更正后的数据库。

/wordpress/ 文件夹下还有 wordpress 吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-08T20:28:01.140

# sql - 使用 Date.today 加入命名范围的一部分

> ID：13781512
> 
> 赞同：3
> 
> 时间：2012-12-08T20:17:27.237
> 
> 标签：sql, ruby-on-rails, arel

出于某种原因，当我在 where 中使用 Date 类时会被识别

```
scope :with_active_subthing, joins("left outer join thing_subthing on thing_subthing.patient_id = thing.id").where("thing_subthing.start_date <= ? AND ( thing_subthing.end_date > ? OR thing_subthing.end_date IS NULL ) ", Date.today, Date.today) 
```

但是当我在连接中使用它时无法识别它

```
scope :with_active_subthing, joins("left outer join thing_subthing on thing_subthing.patient_id = thing.id AND (thing_subthing.start_date <= ? AND ( thing_subthing.end_date > ? OR thing_subthing.end_date IS NULL )) ", Date.today, Date.today) 
```

我得到：

```
RuntimeError: unknown class: Date 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T20:32:22.490

如果您查看[构建连接部分的底层代码](https://github.com/rails/rails/blob/f67944e7579711e2c28ea8b48ec739c1ff1966ae/activerecord/lib/active_record/relation/query_methods.rb#L333-L347)，您会发现它正在寻找特定的对象类型，而 Date 不是其中之一。该错误有点令人困惑，但它的意思是 Date 不能用作`joins`. 从您的问题中并不清楚为什么要这样做，但是您绝对应该像在第一个示例中所做的那样同时使用连接和位置。

这是导致问题的代码，因为它掉到了“raise”行：

```
def build_joins(manager, joins)
  buckets = joins.group_by do |join|
    case join
    when String
      'string_join'
    when Hash, Symbol, Array
      'association_join'
    when ActiveRecord::Associations::JoinDependency::JoinAssociation
      'stashed_join'
    when Arel::Nodes::Join
      'join_node'
    else
      raise 'unknown class: %s' % join.class.name
    end
  end 
```

# google-maps - 在谷歌地图上正确绘制一个超过纬度 90 度的点

> ID：13781514
> 
> 赞同：1
> 
> 时间：2012-12-08T20:17:41.137
> 
> 标签：google-maps, google-maps-api-3, latitude-longitude

我正在开发一个模拟器，可以在谷歌地图上绘制飞机的飞行路径。

模拟器不知道纬度仅定义在 -90 到 +90 度之间，经度定义在 -180 到 +180 度之间。因此，飞行路径可能包括超出地图边界的点。超过经度不是问题，因为它仍然可以正确绘制（经度 x 和 x+360 处的点相同），但纬度是一个问题。

有没有办法告诉谷歌地图保持正确边界之间的点并正确绘制它们？

否则，您是否知道在哪里可以找到这样做的功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T20:46:38.833

经度、纬度和海拔对于飞行模拟器来说是一个糟糕的坐标系，因为映射呈现出奇点，即地球上无限接近的点具有非常不同的坐标。例如，在您靠近极点之一的地方，经度变化速度与飞机速度相比可能会变得任意大。当正好站在杆子上时，经度甚至没有意义。

更好的解决方案是为模拟器使用 XYZ 坐标系，并且仅转换为经度/纬度和高程进行绘图。如果您可以为您的用例将地球近似为一个球体，那么这种转换的计算是微不足道的......否则事情可能会变得更加复杂，具体取决于您希望它有多准确。

也就是说，通过将其延伸到极点上，仍然可以为纬度略超出 -90...90 范围的点赋予“a”含义......

```
if latitude < -90:
    latitude = -180 - latitude
    longitude = longitude + 180
if latitude > 90:
    latitude = 180 - latitude
    longitude = longitude + 180 
```

但是使用此坐标系进行导航是一个非常糟糕的主意（空间中的同一点可以有多个坐标的三元组）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T20:34:01.373

如果您的模拟器不知道纬度的最大值是 90 度，则它已损坏并需要修复。谷歌地图适用于有效/可能的纬度和经度值。

# python - 常见字符串前缀的直方图

> ID：13781519
> 
> 赞同：4
> 
> 时间：2012-12-08T20:18:31.087
> 
> 标签：python, matplotlib, scipy

因此，我为自己制作了一本不错的单词前缀词典，但现在我想使用 matplotlib 将其转换为漂亮的直方图。我是整个 matplot 场景的新手，我没有看到任何其他接近的问题。

这是我的字典的示例

```
{'aa':4, 'ca':6, 'ja':9, 'du':10, ... 'zz':1} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-09T10:06:58.200

我会为此使用 pandas，因为它内置了[矢量化字符串方法](http://pandas.pydata.org/pandas-docs/stable/basics.html#vectorized-string-methods)：

```
# create some example data
In [266]: words = np.asarray(['aafrica', 'Aasia', 'canada', 'Camerun', 'jameica',
                              'java', 'duesseldorf', 'dumont', 'zzenegal', 'zZig'])

In [267]: many_words = words.take(np.random.random_integers(words.size - 1,
                                                            size=1000))
# convert to pandas Series
In [268]: s = pd.Series(many_words)

# show which words are in the Series
In [269]: s.value_counts()
Out[269]: 
zZig           127
Camerun        127
Aasia          116
canada         115
dumont         110
jameica        109
zzenegal       108
java           105
duesseldorf     83

# using vectorized string methods to count all words with same first two
# lower case strings as an example
In [270]: s.str.lower().str[:2].value_counts()
Out[270]: 
ca    242
zz    235
ja    214
du    193
aa    116 
```

Pandas 使用`numpy`and `matplotlib`，但让一些事情变得更方便。

您可以像这样简单地绘制结果：

```
In [26]: s = pd.Series({'aa':4, 'ca':6, 'ja':9, 'du':10, 'zz':1})

In [27]: s.plot(kind='bar', rot=0)
Out[27]: <matplotlib.axes.AxesSubplot at 0x5720150> 
```

![熊猫吧](../Images/0593782edc5246122c72fcd66c1c42ee.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T20:34:20.217

也许这会给你一个开始（制造`ipython --pylab`）：

```
In [1]: from itertools import count

In [2]: prefixes = {'aa':4, 'ca':6, 'ja':9, 'du':10, 'zz':1}

In [3]: bar(*zip(*zip(count(), prefixes.values())))
Out[3]: <Container object of 5 artists>

In [4]: xticks(*zip(*zip(count(0.4), prefixes))) 
```

![结果](../Images/7f37274882b9ac6bc8640a74b9f22ba4.png)

相关文档：

*   [`zip`](http://docs.python.org/2/library/functions.html#zip)
*   [`itertools.count`](http://docs.python.org/2/library/itertools.html#itertools.count)
*   [`matplotlib.pyplot.bar`](http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.bar)
*   [`matplotlib.pyplot.xticks`](http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.xticks)

# java - java - 如何使文件无法在java中删除？或授予它访问权限，管理员也无法删除它？（windows 7）

> ID：13781528
> 
> 赞同：-1
> 
> 时间：2012-12-08T20:19:03.127
> 
> 标签：java, security, permissions, nio, access-control

我的安全应用程序需要以任何方式使文件不可删除或任何其他解决方案做同样的事情
请不要告诉我让它只读（它的安全性）
nio pakege 有什么帮助我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T23:20:02.763

不，你不能这样做，这样的应用程序不会被称为“安全应用程序”，而是某种形式的恶意软件、病毒、间谍软件等。管理员已经并且必须完全控制文件系统。唯一的例外是操作系统的某些关键文件，这些文件受到操作系统本身的保护，因为如果它们被删除就会崩溃。Java 不支持在文件系统上设置任何类型的安全权限（文件属性不完全是安全权限）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T23:12:38.097

在您的 java 应用程序中打开文件上的流是一个 hack 而不是完整的证明。这应该会阻止其他人删除该文件。一旦你的java应用程序关闭，尽管它可以被删除。程序运行时，用户也无法对其进行编辑。不是一个很好的解决方案，因为我认为它有太多的漏洞（例如，当 java 程序启动时需要知道文件名，需要让 java 程序一直运行，用户不能对文件做任何事情，用户可以杀死 java 进程等）但是对于一个小的利基要求它应该工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T21:21:46.647

恐怕我没有准备好证明，但我相信这是不可能的。Oracle 不会在 Java 中添加类似的功能，因为如果让这些功能成为可能，它们将面临巨大的法律风险。正如 Perception 暗示的那样，它很容易被滥用。

出于好奇，你想用这个来完成什么？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-08T23:03:55.040

文件系统在这里形成了限制。基本上管理员可以随时读取或写入文件，据我所知，没有任何文件系统可以禁止任何人进行编辑。

# deployment - 将 play 2.0.x 应用程序推送到 Heroku 问题

> ID：13781531
> 
> 赞同：1
> 
> 时间：2012-12-08T20:19:14.860
> 
> 标签：deployment, heroku, playframework, playframework-2.0

我正在尝试将本地工作的应用程序推送到 Heroku，但出现此错误

```
 [info] Compiling 20 Scala sources and 12 Java sources to /tmp/build_mhfyee4j841a/target/scala-2.9.1/classes...
       [error] /tmp/build_mhfyee4j841a/target/scala-2.9.1/src_managed/main/views/html/showitem.template.scala:74: value showItem is not a member of controllers.ReverseApplication
       [error]              <a href=""""),_display_(Seq[Any](/*45.21*/routes/*45.27*/.Application.showItem(p.id, Items.slugify(p.title)))),format.raw/*45.78*/("""" ><img width="110" height="110"  alt=""""),_display_(Seq[Any](/*45.118*/p/*45.119*/.title)),format.raw/*45.125*/("""" src=""""),_display_(Seq[Any](/*45.133*/p/*45.134*/.picture)),format.raw/*45.142*/(""""></a>
       [error]                                                                                    ^
       [error] one error found
       [error] {file:/tmp/build_mhfyee4j841a/}quoiacheter/compile:compile: Compilation failed
       [error] Total time: 25 s, completed Dec 8, 2012 8:07:38 PM
 !     Failed to build app with sbt
 !     Heroku push rejected, failed to compile Play 2.0 - java app 
```

正如我之前所说，该应用程序在本地运行良好，您可以在这里看到应该在***showitem***模板中有错误的部分

```
<p>
     @for(p <- Items.getRelated(item.categories.get(0).id) ) {
                <a href="@routes.Items.showItem(p.id, Items.slugify(p.title))" ><img width="110" height="110"  alt="@p.title" src="@p.picture"></a>
     } 
</p> 
```

Heroku 认为我在打电话`@routes.Application.showItem`而不是`@routes.Items.showItem`! 你可以在这里看到我的路线文件的相关部分：

```
...
# ITEMS          
GET     /items/:id/:title           controllers.Items.showItem(id: Long,title: String)
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T12:14:12.753

发生这种情况的唯一原因是，如果您的`git`存储库不是最新的，并且在 git 存储库中以某种方式调用`Application`，而不是`Items`. 请检查您是否确实将更改提交到`git`本地。

# php - foreach 结果为 feed_url

> ID：13781540
> 
> 赞同：0
> 
> 时间：2012-12-08T20:20:00.877
> 
> 标签：php, arrays, function, foreach, simplexml

我正在尝试将我的 foreach 循环的结果放入一个 url 以执行 simplexml_load_file 。

所以它是这样的： (...) //SimpleXML_load_file to get $feed1

```
 $x=1;
    $count=$feed1->Count; //get a count for total number of loop from XML
    foreach ($feed1->IdList->Id as $item1){

    echo $item1;
    if($count > $x) {
    echo ',';} //Because I need coma after every Id, except the last one.
    $x++;
    } 
```

两个echo只是为了看结果。它给了我类似的东西：

```
22927669,22039496,21326191,18396266,18295747,17360921,15705350,15681025,15254092,12939407,11943825,11495650,10964843 
```

我想把它放在一个 url 中，像这样制作一个 simplexml_load_file

```
$feed_url = 'http://www.whatevergoeshere'. $RESULT_OF_FOREACH . 'someothertext'; 
```

所以它看起来像：

```
$feed_url = 'http://www.whatevergoeshere22927669,22039496,21326191,18396266,18295747,17360921,15705350,15681025,15254092,12939407,11943825,11495650,10964843someothertext'; 
```

我尝试将其存储到数组或函数中，然后将其调用到 feed_url 中，但它并没有像我尝试的那样工作。

我希望它很清楚，如果没有，我会快速回答问题。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T20:31:16.560

很难弄清楚你想要什么，所以我猜你想将列表作为逗号分隔的字符串存储在变量中。最简单的方法是[`implode`](http://php.net/manual/en/function.implode.php)id数组

```
$ids = array();
foreach ($feed1->IdList->Id as $item1){
    $ids[] = (string) $item1;
}
$RESULT_OF_FOREACH = implode(',', $ids);

$feed_url = 'http://www.whatevergoeshere'. $RESULT_OF_FOREACH . 'someothertext'; 
```

# c++ - 将向量插入数据库？

> ID：13781552
> 
> 赞同：0
> 
> 时间：2012-12-08T20:20:43.723
> 
> 标签：c++

如何将向量插入 mysql 数据库？

```
database->queryDatabase("INSERT INTO recordings (title, recording, kit, date) VALUES ('"+recordingTitle+"', '"+ recordingArray +"', '"+kitID+"', '"+recordingDateTime.toString()+"')"); 
```

这给出了一个错误：

```
error: no match for 'operator+' in 'operator+(const QString&, const char*)(((const char*)"\', \'")) + ((Studio*)this)->Studio::recordingArray' 
```

插入向量之前是否需要将其转换为字符串？或者我可以将向量存储在 mysql 数据库中吗？

# css - 兄弟姐妹的过渡高度：目标兄弟姐妹？

> ID：13781553
> 
> 赞同：0
> 
> 时间：2012-12-08T20:20:45.230
> 
> 标签：css, css-selectors, accordion

我正在尝试为我的网站制作一种手风琴，类似于[本网站](http://snag.gy)上的手风琴，但没有切换。

我正在使用的代码在[这里](http://jsfiddle.net/AKQhv/1/)。

我有基本的设置工作，但我似乎无法`li`正确过渡的高度（如果有的话）；我会很感激一些帮助。

最好该解决方案只使用 CSS，但如果这是唯一/最好的方法，我愿意使用 JS/jQuery。

我已尝试阅读此站点上的其他问题来解决它，但我要么做错了什么，要么解决方案没有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T22:05:10.757

一种方法是使用 CSS3 过渡（在现代浏览器中有效），但不可能（如果我错了，有人可能会纠正我）过渡`height: 0;`到`height: 100%;`所以如果你不知道实际高度，一种解决方法是改为使用`max-height`。在这种情况下，您需要将 设置为`max-height`比它所能获得的更大的值。

所以添加这样的东西可能是你正在寻找的东西？

```
li {
    opacity: 0;
    max-height: 0;
}

h2:target~li { /* Want to transition this */
    opacity: 1;
    max-height: 100px;
    -webkit-transition: max-height 1.0s;
       -moz-transition: max-height 1.0s;
        -ms-transition: max-height 1.0s;
         -o-transition: max-height 1.0s;
            transition: max-height 1.0s;
}​ 
```

[演示](http://jsfiddle.net/AKQhv/8/)

在您的情况下，如果您也想转换 opacity 属性，您可以更改`transition: max-height 1.0s;`为`transition: all 1.0s;`这意味着您将转换所有属性。

如果您想了解 CSS3 过渡，请访问以下链接：http: [//www.w3.org/TR/css3-transitions/](http://www.w3.org/TR/css3-transitions/)

# c++ - C++ 中的 Python 代码

> ID：13781561
> 
> 赞同：4
> 
> 时间：2012-12-08T20:21:52.607
> 
> 标签：c++, python, eclipse, python-embedding

我想在我的 C++ 框架中使用一些 Python 代码来绘制一些统计数据。我已经找到了以下帖子（关于如何在 c++ 中嵌入 python），但是按照说明并没有成功：[Embed python code in C++ (Windows + minGW + Python 2.7.2 + Eclipse)](https://stackoverflow.com/questions/7198537/embede-python-code-in-c-windows-mingw-python-2-7-2-eclipse)

```
#include "Python.h"
int main(int f_argc, const char* f_argv [])
{
    Py_Initialize();
    const char* pythonScript = "print 'Hello, world!'\n";
    int result = PyRun_SimpleString(pythonScript);
    Py_Finalize();
    return 0;
} 
```

很抱歉，但我在制作文件或附加静态或动态库方面没有太多经验......

我必须遵循系统：Windows 7 + 64 Bit + Eclipse IDE for C/C++ Developers，版本：Juno Service Release 1 + mingw + python32

在路径和符号下：+添加python32的包含目录+添加库“python32”应该对应于libpython32.a+添加库路径

编译和链接似乎可以工作，但是当我尝试启动 exe 时，我收到以下消息：

“程序无法启动，因为您的计算机中缺少 python32.dll。请尝试重新安装程序以解决此问题。”

我无法理解此消息，因为我尝试将静态库 (libpython32.a) 添加到源中。你能在正确的方向轻轻推动我吗？

非常感谢您的帮助！

编辑：添加了 makefile 和 objects.mk

制作文件################################################ ############################### 自动生成的文件。不要编辑！################################################# ##############################

```
-include ../makefile.init

RM := rm -rf

# All of the sources participating in the build are defined here
-include sources.mk
-include src/subdir.mk
-include subdir.mk
-include objects.mk

ifneq ($(MAKECMDGOALS),clean)
ifneq ($(strip $(C++_DEPS)),)
-include $(C++_DEPS)
endif
ifneq ($(strip $(C_DEPS)),)
-include $(C_DEPS)
endif
ifneq ($(strip $(CC_DEPS)),)
-include $(CC_DEPS)
endif
ifneq ($(strip $(CPP_DEPS)),)
-include $(CPP_DEPS)
endif
ifneq ($(strip $(CXX_DEPS)),)
-include $(CXX_DEPS)
endif
ifneq ($(strip $(C_UPPER_DEPS)),)
-include $(C_UPPER_DEPS)
endif
endif

-include ../makefile.defs

# Add inputs and outputs from these tool invocations to the build variables 

# All Target
all: Sandbox.exe

# Tool invocations
Sandbox.exe: $(OBJS) $(USER_OBJS)
@echo 'Building target: $@'
@echo 'Invoking: Cross G++ Linker'
g++ -L"C:\Python32\libs" -o "Sandbox.exe" $(OBJS) $(USER_OBJS) $(LIBS)
@echo 'Finished building target: $@'
@echo ' '

# Other Targets
clean:
-$(RM)     $(C++_DEPS)$(OBJS)$(C_DEPS)$(CC_DEPS)$(CPP_DEPS)$(EXECUTABLES)$(CXX_DEPS)$(C_UPPER_DEPS) Sandbox.exe
-@echo ' '

.PHONY: all clean dependents
.SECONDARY:

-include ../makefile.targets 
```

对象.MK

```
################################################################################
# Automatically-generated file. Do not edit!
################################################################################

USER_OBJS :=

LIBS := -lgdi32 -ljpeg-8 -ltiff-5 -lpython32 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T22:12:32.380

在 Windows 上，程序搜索路径和共享库搜索路径由相同的环境变量控制，`PATH`. 要嵌入 Python，您需要将包含 的目录`python32.dll`放在`c:\python3.2`您的`PATH`.

如何在 Windows 上更改的说明`PATH`很容易在 Google 上搜索；例如，请参阅解释运行 Python 的视频广播，或[解释](http://showmedo.com/videotutorials/video?name=960000&fromSeriesID=96)Ruby 过程的[SO 答案。](https://stackoverflow.com/a/3087199/1600898)

[Python on Windows FAQ](http://docs.python.org/2/faq/windows.html#how-do-i-run-a-python-program-under-windows)中也介绍了在 Windows 上运行 Python 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T05:47:33.680

你看到的静态库（libpython32.a）并不是真正的静态库，它只包含python32.dll的定义。所以它只不过是 python32.dll 的包装器。

您必须在 Windows PATH 中添加 python 安装文件夹，以便 Windows 可以自己找到 dll。

# python - Django - 测试 500 个状态的页面

> ID：13781563
> 
> 赞同：5
> 
> 时间：2012-12-08T20:21:55.150
> 
> 标签：python, django, unit-testing, internal-server-error

我有一个项目，其中一些更改可能会导致某些视图中的状态为 500。

*进行单元测试以检查所有*视图/页面（当然，其中包含静态路由，其中​​没有变量）以不返回 500 状态的最优雅的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T21:42:52.307

对于单元测试，您可以使用以下内容：

```
from django import test
from django.core.urlresolvers import reverse
from page.urls import urlpatterns

class PageTest(test.TestCase):

   def test_responses(self):
       for url in urlpatterns:
           response = self.client.get(reverse(url.name))
           self.assertEqual(response.status_code, 200) 
```

# c# - 为什么这个动态列表比较失败？

> ID：13781571
> 
> 赞同：1
> 
> 时间：2012-12-08T20:22:36.540
> 
> 标签：c#, asp.net, linq

我有一个返回动态结果的搜索。所以如果没有找到结果，我试图只显示一个标签。我遇到的问题是我不知道如何计算结果，因为它是动态的并且不等于类型。

错误信息是：

> 运算符 '!=' 不能应用于 System.Collections.Generic.List 和 int 类型的操作数

```
 if (Page.IsValid)
            {

                string keyword = txtSearch.Text.Trim();
                List<dynamic> results = SearchItems(keyword);
                List<dynamic> Cresults = SearchContacts(keyword);

               if(results != 0 || Cresults !=0)
               {

                    //bind and return
                    LVI.DataSource = results;
                    LVI.DataBind();
                    // System.Threading.Thread.Sleep(500);

                    //Contact Bind return
                    LVC.DataSource = Cresults;
                    LVC.DataBind();
                    //  System.Threading.Thread.Sleep(250);

                    lvAdmin.DataSource = results;
                    lvAdmin.DataBind();

                    LVCAdmin.DataSource = Cresults;
                    LVCAdmin.DataBind();
               }
               else{

                    NoResults.Visible = true;

               } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-08T20:25:25.997

你**不能**只做：

```
if(results != 0 || Cresults !=0)
{

} 
```

这样，您将实际`List`与进行比较`0`，这显然失败了。

做就是了：

```
if(results.Count != 0 || Cresults.Count !=0)
{

} 
```

或者：

```
if(results.Any() || Cresults.Any())
{

} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-08T20:25:19.163

使用类的`Count`属性`List`：

```
if (results.Count != 0 || Cresults.Count != 0)
{
    //rest of code
} 
```

文档：http: [//msdn.microsoft.com/en-us/library/a7f69ad7.aspx](http://msdn.microsoft.com/en-us/library/a7f69ad7.aspx)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-08T20:25:31.077

您可以尝试使用计数

```
if(results.Count > 0 || Cresults.Count > 0) 
```

# php - 如何在三个较短的列中显示一个长列表？

> ID：13781576
> 
> 赞同：0
> 
> 时间：2012-12-08T20:23:29.603
> 
> 标签：php, html-table

有没有办法修改这个 PHP 代码

```
 foreach ($categories as $category)    
    {
        print("<tr>");               
        print("<td><a href=\"category.php?category=" . $category["id"] . "\">{$category["category"]}</a></td>");            
        print("</tr>");    
    } 
```

将内容显示在三个较短的列中，而不是只显示一个非常长的列？喜欢这里[http://www.registrar.fas.harvard.edu/courses-exams/courses-instruction](http://www.registrar.fas.harvard.edu/courses-exams/courses-instruction)

显示顺序需要是这样的：

```
1 4 7
2 5 8 
3 6 9 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T20:31:01.757

您将希望在每个行标签中使用 3 个单元格标签：

```
$cols = 3;
$col = 0;
foreach ($categories as $category)    
{
    if($col == 0)
        print("<tr>");            
    if($col < $cols) {
        print("<td><a href=\"category.php?category=" . $category["id"] . "\">{$category["category"]}</a></td>"); 
        $col++;
    } else {
        print("</tr>");  
        $col = 0;
    }  
}
if($col != 0)
    print("</tr>"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T17:57:26.130

假设 $categories 是一个数组。

```
$columns = 3;
$rows = ceil( sizeof( $categories ) / $columns );
echo "<table>\n";    
for ( $row = 1; $row <= $rows; $row++ )    
{
    echo "<tr>\n";  
    for ($column = 1; $column <= $columns; $column++) {
        $p = (($column - 1) * $rows) + $row - 1;
        $value = sizeof($categories) > $p ? $categories[$p] : '&nbsp;';
        echo "<td>{$value} {$p}</td>\n";
    }
    echo "</tr>\n";
 }
echo "</table>"; 
```

订单将

```
1 4 7
2 5 8 
3 6 9 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T20:35:05.040

```
$i=1;
foreach ($categories as $category)    
{
    if($i==1) {
      print("<tr>");  
    }             
    print("<td><a href=\"category.php?category=" . $category["id"] . "\">{$category["category"]}</a></td>");  
    if($i==3) {       
       print("</tr>"); 
       $i=1; 
    }
    $i++;  
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-08T20:35:55.540

这将列出如下：

```
//    0,1,2
//    3,4,5

echo '<table><tr>';
foreach ($categories as $k=>$category){
    if($k%3==0 && $k!=0){
        echo '</tr><tr>';
    }
    echo '<td><a href="category.php?category='.$category["id"].'">'.$category["category"].'</a></td>';

}
echo '</table>'; 
```

# java - Java子字符串混淆

> ID：13781577
> 
> 赞同：-3
> 
> 时间：2012-12-08T20:23:31.483
> 
> 标签：java, substring

我正在做一个小的java代码，其中数据通过文件读取并存储在a中`String` ，然后使用subSrig我必须打破这个字符串，
例如数据是这样保存的 `"Hello java $"` `"Hello word $"`，每个句子都包含`$`在最后，我想打破它的基础 `$`

我确实尝试过使用`indexOf`等，`lastindexOf`但无法做到准确的逻辑，请帮助我

```
BufferedReader br= new BufferedReader(new FileReader("c:\\javaprograms\\a.txt));
    while((a=br.readLine())!=null)
    {
       s=s+a;
    // here i have to split  the data that is "Hello java$"  "Hello world$"          

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T20:37:04.580

也许使用带有自定义分隔符的扫描仪会更好？例如像这样：

```
BufferedReader br = new BufferedReader(new FileReader("..."));
Scanner sc = new Scanner(br);
sc.useDelimiter("\\$");
while (sc.hasNext())
{
    String text = sc.next();
    System.out.println(text);
    ...
} 
```

此代码使用“$”作为分隔符拆分您的文本

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T20:27:53.197

对我来说很好：

```
String a = "Hello java $ fff";
System.out.println(a.indexOf("$"));
System.out.println(a.substring(0, a.indexOf("$"))); 
```

输出：

```
11
Hello java 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T20:25:34.640

您想查看[String](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html)类中的 split() 函数，这将允许您返回围绕特定字符串或正则表达式拆分的字符串数组。

# wordpress - 使用 htaccess 和 wordpress 重写静态到静态 url

> ID：13781586
> 
> 赞同：2
> 
> 时间：2012-12-08T20:24:21.053
> 
> 标签：wordpress, apache, .htaccess, redirect

我有一个 wordpress 网站，它自动生成了自己的 .htaccess（因为我使用的是永久链接），然后，我的网络管理员已将 apache 配置为将任何第三级域重定向到我的网站，即：

`http://lol.example.com`重定向到`http://example.com`

`.htaccess`其余的都比使用永久链接规则完成。现在我想在`.htaccess`文件中编写一条规则，当用户键入特定的第三级域时，重定向到我网站的特定子文件夹，即：

`http://sprock.example.com/`重定向到`http://example.com/mysprockfolder/`

我知道我的问题可能听起来很奇怪，但我以前从未这样做过，所以我很困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T16:37:57.020

用我的正则表达式解决`.htaccess`：

就在此评论之前（以防万一您安装了 WordPress）：

```
# BEGIN WordPress 
```

我添加了以下内容：

```
Options +FollowSymLinks
RewriteEngine On
RewriteCond %{HTTP_HOST} ^(www\.)?thirdlev\.example\.com [NC]
RewriteRule ^(.*)$ http://example.com/myfolder/ [R=302,L] 
```

使用 302 重定向，一切都很好！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-08T20:38:48.617

您只需转到您的 ftp 管理器并将子域转发到链接会容易得多。或者，您可以使用 php.ini 进行重定向。

重定向时，请确保添加 ，`http://www.`否则它会认为您要重定向到网站上页面的一部分，还要确保您的子域有自己的文件夹，其中包含自己的文件和图像。

# android - 最有效的联系方式

> ID：13781589
> 
> 赞同：0
> 
> 时间：2012-12-08T20:24:39.967
> 
> 标签：android, sqlite

我想从我的手机中获取所有联系人。来自 GSM 卡和手机内存。姓名、姓氏、电话号码、昵称、电子邮件和更多可能的所有联系人。我想知道什么是最快和最有效的方法。我的 Android 版本 id 为 2.2.something 但解决方案应支持 2.1 以上的所有版本。

有什么建议么？

// 顺便提一句。也许你可以给我一些关于使用 Android 联系人数据库的好教程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T20:40:02.487

[http://developer.android.com/guide/topics/providers/contacts-provider.html](http://developer.android.com/guide/topics/providers/contacts-provider.html) 看看这个，它帮助我完成了一项任务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T21:40:00.600

基本上你需要查询联系人提供者。根据您需要的数据，您还需要调整查询并设置一些过滤。

查询[`ContactsContract.Data.CONTENT_URI`](http://developer.android.com/reference/android/provider/ContactsContract.Contacts.html#CONTENT_URI)将从提供商处获取所有联系人条目。

为了提高效率，这取决于您如何处理提供者返回的数据。为了减少工作量，只请求您真正需要的数据至关重要。例如，如果您只关心有电话号码的联系人，您可以将以下内容添加到选择参数中：

```
ContactsContract.Data.MIMETYPE + " = '" ContactsContract.CommonDataKinds.Phone.CONTENT_ITEM_TYPE + "'" 
```

看一下[`CursorLoader`](http://developer.android.com/reference/android/content/CursorLoader.html)，它注意不要阻塞主线程。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-08T20:35:47.503

获取 htc 同步，并用充电器电缆连接您的手机。在那里你可以看到你的android上的所有信息。

[http://www.htc.com/www/software/htc-sync-manager/download/](http://www.htc.com/www/software/htc-sync-manager/download/)

仅适用于 Windows

# c# - 为什么 DataGrid 不显示示例设计时数据？

> ID：13781590
> 
> 赞同：2
> 
> 时间：2012-12-08T20:24:43.663
> 
> 标签：c#, .net, wpf, datagrid, user-controls

我正在尝试`UserControl`在设计时将一些示例数据加载到我的工作中。

这是一个关联了 OrderItems 集合和一个数字的销售：

```
using System;
using System.Collections.ObjectModel;

namespace MiPaladar.SampleData
{
    public class SampleSale
    {
        public int Number { get; set; }        

        public ObservableCollection<SampleLineItem> OrderItems { get; set; }              
    }
} 
```

问题是`TextBox`绑定到`Number`属性显示它很好，但`DataGrid`绑定到集合`OrderItems`是空的，不显示项目。为什么不？

这`SampleLineItem`堂课：

```
namespace MiPaladar.SampleData
{
    public class SampleLineItem
    {
        public float Quantity { get; set; }
        public float Price { get; set; }
    }
} 
```

和`SampleSaleData.xaml`：

```
<local:SampleSale xmlns:local="clr-namespace:MiPaladar.SampleData" 
                  Number="78" >
    <local:SampleSale.OrderItems>
    <local:SampleLineItem Quantity="1" Price="3.5"/>
    <local:SampleLineItem Quantity="2" Price="7"/>
    <local:SampleLineItem Quantity="1" Price="8"/>
</local:SampleSale.OrderItems> 
```

最后我的用户控件：

```
<UserControl x:Class="MiPaladar.Views.UserControl1"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008"              

         mc:Ignorable="d" 

         d:DesignHeight="300" d:DesignWidth="300" >

<Grid d:DataContext="{d:DesignData /SampleData/SampleSaleData.xaml}">
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
        <RowDefinition/>            
    </Grid.RowDefinitions>

    <StackPanel Orientation="Horizontal">
        <TextBlock Text="Order Number:"  Margin="5"/>
        <TextBox Margin="5" Text="{Binding Number}"/>
    </StackPanel>        

    <!--Orderitems-->
    <DataGrid AutoGenerateColumns="False" ItemsSource="{Binding OrderItems}"
              Grid.Row="1" Margin="5" >

        <DataGrid.Columns>
            <DataGridTextColumn Header="Quantity" Binding="{Binding Quantity}" />

            <DataGridTextColumn Header="Price" Binding="{Binding Price, StringFormat=c}" />

        </DataGrid.Columns>
    </DataGrid>        

</Grid> 
```

先谢谢了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T21:53:53.857

编辑：没关系——你打败了我；虽然我很好奇我的改变是否也会奏效。

我认为应该有一个`</local:SampleSale >`在末尾`SampleSaleData.xaml`。

# events - 为什么这个 Ti.UI.WebView.fireEvent() 调用会在监听器存在时抛出异常？

> ID：13781592
> 
> 赞同：0
> 
> 时间：2012-12-08T20:25:06.787
> 
> 标签：events, webview, titanium

我创建一个新窗口

```
var win = Ti.UI.createWindow({url:'page.js'});
win.listeners = {
   'type': function(e){ alert('test'); }
}
win.open(); 
```

在 page.js 中，我将指定的侦听器添加到窗口内的 Ti.UI.WebView。

```
for (var type in win.listeners) {
    Ti.API.info(win.listeners[type])
    webView.addEventListener(type, win.listeners[type]);
} 
```

Ti.API.info(win.listeners['type']) 将函数打印为“<KrollCallback: 0xb272160>”

如果没有侦听器，则对 webView.fireEvent('type') 的调用可以正常执行。但是如果我像上面那样向 webView 添加侦听器，对 fireEvent 的调用会引发异常。

什么是 KrollCallback，如果存在侦听器，为什么 fireEvent 会崩溃？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T17:37:21.960

问题是使用 url:'page.js' 和 createWindow() 会启动一个新的上下文。如果 page.js 是这样的，这种类型的设置将起作用：

```
exports.getWindow(config) {

   var webView = Ti.UI.createWebView({});

   for (var type in config.listeners) {
      webView.addEventListener(type, config.listeners[type]);
   }
} 
```

然后，像这样使用窗口：

```
var win = require('page').getWindow({
   listeners = {
      'event_type': function(e){ alert('event_type test'); }
   }
});

win.open(); 
```

# php - PHP - 从 UA 字符串或外部服务检测文本方向（ltr/rtl），这可能吗？

> ID：13781600
> 
> 赞同：2
> 
> 时间：2012-12-08T20:25:48.640
> 
> 标签：php, text, detect, right-to-left

我不仅想检测客户端语言（我已经使用不同方法的组合，从 UA 字符串提取到地理定位服务），而且如果可能的话，我还想以自动方式检测文本方向。

我知道没有太多的语言使用从右到左的方向（至少没有从左到右的语言那么多），所以一个可能的解决方案是做一些类似`$rtl = ['ar', 'he', ..., '<whatever>']; if (in_array(substr($_SERVER['HTTP_ACCEPT_LANGUAGE'], 0, 2), $rtl)) { $direction = "rtl"; } else { $direction = "ltr"; }`但在我看来就像有（可能) 更好的解决方案。

我仍在研究一些语言识别 API，如 LangID、AlchemyAPI 和 DetectLanguage，但它们似乎做同样的事情：识别文本语言，但不识别文本方向。

有什么推荐的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-28T17:24:14.997

可以通过 ICU 库访问有关语言方向的信息。

使用[cosmopolitan](https://github.com/salarmehr/cosmopolitan)包可以很简单，如下所示。

```
<?php
require __DIR__. "/vendor/autoload.php";
use Salarmehr\Cosmopolitan\Cosmo;

echo Cosmo::create('fa')->direction(); // rlt
echo Cosmo::create('en')->direction(); // ltr 
```

# css - 页脚的实现将我的页面的中间内容向下推

> ID：13781601
> 
> 赞同：1
> 
> 时间：2012-12-08T20:26:13.133
> 
> 标签：css, footer, sticky

我知道我需要将我的所有内容都包含在包装器中，除了我的页脚。我假设，div push 会将页脚推到页面底部。正在发生的事情是推送正在推送我的其他内容，而不是我的标题。

我正在使用 header.php 、 home.php、styles.css 和 footer.php 我对网站建设非常陌生！任何帮助将不胜感激。

**头文件.php**

```
<body>

<div class="wrapper">  

<div class="container">
    <div class="navbar">
    <br><a href="index.php"><img src="img/banner.jpg" alt="Macaron" width="400"></a></br>
        <div class="navbar-inner">
                <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </a>   
                    <div class="nav-collapse collapse">
                        <ul class="nav">
                        <li><a href="imagine.php">Imagine</a></li>
                        <li><a href="recipes.php">Recipes</a></li>
                        <li><a href="shops.php">Shop Locator</a></li>
                        <li><a href="photos.php">Photos</a></li>
                    </ul>
                    </div>

        </div>
    </div>
</div>
<div class="push"></div> 
</div>    
<div id="middle"> 
```

**主页.php**

```
This is the bulk of my page's content. 
```

**页脚.php**

```
 <div class="footer">
       <div class="container">
          <p> A macaron fan page by Avery Dao and Diana Nguyen </p>
      </div>
    </div> 
```

**样式.css**

```
 /* styles the sticky footer */
 html, body 
 {
    height: 100%;
 }

.wrapper
{
    min-height: 100%;
    height: auto !important;
    height: 100%;
    margin: 0 auto -70px; /* the bottom margin is the negative value of the footer's height */
}

/* Set the fixed height of the footer here */
#footer, #push 
{
    clear: both;
    height: 70px; /* .push must be the same height as .footer */
}

.footer 
{
    position:relative;
    font-size: 10pt;
    font-family: serif;
    padding: 10px;
    color: #999999;
    background: #ffffff; /* Old browsers */
    background: -moz-linear-gradient(top, #ffffff 0%, #e5e5e5 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#ffffff), color-stop(100%,#e5e5e5)); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top, #ffffff 0%,#e5e5e5 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top, #ffffff 0%,#e5e5e5 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top, #ffffff 0%,#e5e5e5 100%); /* IE10+ */
    background: linear-gradient(to bottom, #ffffff 0%,#e5e5e5 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffffff', endColorstr='#e5e5e5',GradientType=0 ); /* IE6-9 */

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T20:57:54.800

如果您将其设置`#footer`为`position: absolute`并添加`bottom: 0px;`，它将位于页面底部。`position: absolute`如果您不设置宽度，请记住将宽度设置为内容的宽度，所以`width: 100%`也放在那里。

这应该可以帮助您获得水平滚动条添加

```
* {
     padding: 0px;
     margin: 0px;
} 
```

到你的 CSS 文件

# c# - 保持面板之间的距离相同

> ID：13781603
> 
> 赞同：0
> 
> 时间：2012-12-08T20:26:29.967
> 
> 标签：c#, winforms, panel

我在 Windows 窗体应用程序中有几个面板，它们按两列和最多 4 行排序，因此最多 8 个面板。每个面板中包含的元素数量在运行时会发生变化，因此为了不浪费显示器上的位置，我将它们全部设置为自动调整大小。问题是，我不知道如何正确放置它们，例如当第一个缩小时如何使其他三个出现一点，因此它们之间没有太多空间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T20:31:41.010

尝试使用 the`TableLayoutPanel`或 the `FlowLayoutPanel`（甚至可能是 a `SplitContainer`）。它们对于此类任务都非常有用。`Containers`您可以在工具箱的部分中找到它们。您可以通过适当地设置面板的边距来保持正确的距离。为您提供不同的`TableLayoutPanel`选项来调整行和列的大小（绝对大小或百分比大小或自动）。此外，通过使用面板和控件的`Dock`或`Anchor`属性，您可以在调整大小或添加和删除控件时获得动态行为。

您可能还必须设置控件的`MinimumSize`和`MaximumSize`属性。

您可以像这样添加控件`TableLayoutPanel`

```
int count = tableLayoutPanel1.Controls.Count;
int newColumn = count % 2;
int newRow = count / 2;
if (newRow >= tableLayoutPanel1.RowCount) {
    tableLayoutPanel1.RowCount++;

    // Set appropriate row style
    tableLayoutPanel1.RowStyles.Add(new RowStyle { SizeType = SizeType.AutoSize });
}
var newControl = new Button { Dock = DockStyle.Fill };
tableLayoutPanel1.Controls.Add(newControl, newColumn, newRow); 
```

# java - 在 armv7 上执行 jar 时出现 libt2k.so 错误，如何解决？

> ID：13781605
> 
> 赞同：1
> 
> 时间：2012-12-08T20:26:52.377
> 
> 标签：java, arm, armv7

我已经为 GUI 编译了一个带有 swing 的简单 Java 应用程序。如果我在 x86 系统上运行它，它可以正常工作。如果我在 armv7 上运行它（安装了 JVM headfull），它会返回以下错误：

```
aldo@aldo-desktop:~/test_java$ java -jar ../test_gui_jigloo_fat.jar 
Exception in thread "AWT-EventQueue-0" java.lang.UnsatisfiedLinkError: /opt/ejre1.7.0_06/lib/arm/libt2k.so: /opt/ejre1.7.0_06/lib/arm/libt2k.so: invalid ELF header (Possible cause: endianness mismatch)
    at java.lang.ClassLoader$NativeLibrary.load(Native Method)
    at java.lang.ClassLoader.loadLibrary1(ClassLoader.java:1939)
    at java.lang.ClassLoader.loadLibrary0(ClassLoader.java:1864)
    at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1846)
    at java.lang.Runtime.loadLibrary0(Runtime.java:845)
    at java.lang.System.loadLibrary(System.java:1084)
    at sun.font.T2KFontScaler$1.run(T2KFontScaler.java:50)
    at java.security.AccessController.doPrivileged(Native Method)
    at sun.font.T2KFontScaler.<clinit>(T2KFontScaler.java:41)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:186)
    at sun.font.FontScaler.<clinit>(FontScaler.java:100)
    at sun.font.TrueTypeFont.getScaler(TrueTypeFont.java:1248)
    at sun.font.FileFontStrike.<init>(FileFontStrike.java:177)
    at sun.font.FileFont.createStrike(FileFont.java:95)
    at sun.font.Font2D.getStrike(Font2D.java:344)
    at sun.font.Font2D.getStrike(Font2D.java:293)
    at sun.font.CompositeStrike.getStrikeForSlot(CompositeStrike.java:77)
    at sun.font.CompositeStrike.getFontMetrics(CompositeStrike.java:93)
    at sun.font.FontDesignMetrics.initMatrixAndMetrics(FontDesignMetrics.java:359)
    at sun.font.FontDesignMetrics.<init>(FontDesignMetrics.java:350)
    at sun.font.FontDesignMetrics.getMetrics(FontDesignMetrics.java:302)
    at sun.java2d.SunGraphics2D.getFontMetrics(SunGraphics2D.java:800)
    at generic.TextPanel.paintComponent(TextPanel.java:26)
    at javax.swing.JComponent.paint(JComponent.java:1054)
    at javax.swing.JComponent.paintChildren(JComponent.java:887)
    at javax.swing.JComponent.paint(JComponent.java:1063)
    at javax.swing.JComponent.paintChildren(JComponent.java:887)
    at javax.swing.JComponent.paint(JComponent.java:1063)
    at javax.swing.JLayeredPane.paint(JLayeredPane.java:585)
    at javax.swing.JComponent.paintChildren(JComponent.java:887)
    at javax.swing.JComponent.paintToOffscreen(JComponent.java:5228)
    at javax.swing.BufferStrategyPaintManager.paint(BufferStrategyPaintManager.java:295)
    at javax.swing.RepaintManager.paint(RepaintManager.java:1206)
    at javax.swing.JComponent.paint(JComponent.java:1040)
    at java.awt.GraphicsCallback$PaintCallback.run(GraphicsCallback.java:39)
    at sun.awt.SunGraphicsCallback.runOneComponent(SunGraphicsCallback.java:78)
    at sun.awt.SunGraphicsCallback.runComponents(SunGraphicsCallback.java:115)
    at java.awt.Container.paint(Container.java:1967)
    at java.awt.Window.paint(Window.java:3877)
    at javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:781)
    at javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:728)
    at javax.swing.RepaintManager.prePaintDirtyRegions(RepaintManager.java:677)
    at javax.swing.RepaintManager.access$700(RepaintManager.java:59)
    at javax.swing.RepaintManager$ProcessingRunnable.run(RepaintManager.java:1621)
    at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:251)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:711)
    at java.awt.EventQueue.access$000(EventQueue.java:104)
    at java.awt.EventQueue$3.run(EventQueue.java:672)
    at java.awt.EventQueue$3.run(EventQueue.java:670)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:681)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:244)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:163)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:151)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:147)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:139)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:97)
Exception in thread "AWT-EventQueue-0" java.lang.NoClassDefFoundError: Could not initialize class sun.font.FontScaler
    at sun.font.TrueTypeFont.getScaler(TrueTypeFont.java:1248)
    at sun.font.FileFontStrike.<init>(FileFontStrike.java:177)
    at sun.font.FileFont.createStrike(FileFont.java:95)
    at sun.font.Font2D.getStrike(Font2D.java:344)
    at sun.font.Font2D.getStrike(Font2D.java:293)
    at sun.font.CompositeStrike.getStrikeForSlot(CompositeStrike.java:77)
    at sun.font.CompositeStrike.getFontMetrics(CompositeStrike.java:93)
    at sun.font.FontDesignMetrics.initMatrixAndMetrics(FontDesignMetrics.java:359)
    at sun.font.FontDesignMetrics.<init>(FontDesignMetrics.java:350)
    at sun.font.FontDesignMetrics.getMetrics(FontDesignMetrics.java:302)
    at sun.java2d.SunGraphics2D.getFontMetrics(SunGraphics2D.java:800)
    at generic.TextPanel.paintComponent(TextPanel.java:26)
    at javax.swing.JComponent.paint(JComponent.java:1054)
    at javax.swing.JComponent.paintChildren(JComponent.java:887)
    at javax.swing.JComponent.paint(JComponent.java:1063)
    at javax.swing.JComponent.paintChildren(JComponent.java:887)
    at javax.swing.JComponent.paint(JComponent.java:1063)
    at javax.swing.JLayeredPane.paint(JLayeredPane.java:585)
    at javax.swing.JComponent.paintChildren(JComponent.java:887)
    at javax.swing.JComponent.paintToOffscreen(JComponent.java:5228)
    at javax.swing.BufferStrategyPaintManager.paint(BufferStrategyPaintManager.java:295)
    at javax.swing.RepaintManager.paint(RepaintManager.java:1206)
    at javax.swing.JComponent.paint(JComponent.java:1040)
    at java.awt.GraphicsCallback$PaintCallback.run(GraphicsCallback.java:39)
    at sun.awt.SunGraphicsCallback.runOneComponent(SunGraphicsCallback.java:78)
    at sun.awt.SunGraphicsCallback.runComponents(SunGraphicsCallback.java:115)
    at java.awt.Container.paint(Container.java:1967)
    at java.awt.Window.paint(Window.java:3877)
    at javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:781)
    at javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:728)
    at javax.swing.RepaintManager.prePaintDirtyRegions(RepaintManager.java:677)
    at javax.swing.RepaintManager.access$700(RepaintManager.java:59)
    at javax.swing.RepaintManager$ProcessingRunnable.run(RepaintManager.java:1621)
    at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:251)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:711)
    at java.awt.EventQueue.access$000(EventQueue.java:104)
    at java.awt.EventQueue$3.run(EventQueue.java:672)
    at java.awt.EventQueue$3.run(EventQueue.java:670)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:681)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:244)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:163)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:151)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:147)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:139)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:97) 
```

热修复它？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T11:18:29.087

你应该检查你的`libt2k.so`文件，看看它是否真的是你需要的——正确的字节顺序，文件完整性。您可以利用`readelf`来查看详细信息。

# ios - TFHpple 解析链接

> ID：13781609
> 
> 赞同：0
> 
> 时间：2012-12-08T20:27:23.383
> 
> 标签：ios, hpple

你如何解析 TFhpple 中的链接。我的代码返回一个空数组。

```
NSString *link2=[NSString stringWithFormat:@"/html/body/table/tr[%d]/td[1]/a",i+2];
 NSArray *linkedNames = [xpathParser searchWithXPathQuery:link2];
             NSLog(@"%@", linkedNames); 
```

信息的源代码是：

```
 <td style="font-size: 12.0pt; color: black; font-weight: 400; text-decoration: none; text-underline-style: none; font-family: Arial Narrow; font-style: normal; text-align: general; vertical-align: bottom; white-space: nowrap; border-left: medium none; border-right: 1.0pt solid windowtext; border-top: medium none; border-bottom: 1.0pt solid windowtext; padding-left: 1px; padding-right: 1px; padding-top: 1px; background: #EAF1DD" width="327">
    <a href="race_announcements/12.22.12RA.pdf">Pat Harty Memorial</a></td> 
```

如何访问字符串“pat hardy Memorial”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T21:14:14.877

我可能错了，但我认为问题可能在于您正在尝试使用 xml 解析器来解析 pdf 文件。pdf的实际内容可能不在html中。如果您提供链接，我可能会提供更多帮助。干杯。

编辑：这将为您提供带有 pdf 的事件标签，包括帕特哈迪纪念馆。

```
NSURL *url = [NSURL URLWithString:@"http://www.nhara.org/scored_races-2013.htm"];
NSData *urlData = [NSData dataWithContentsOfURL:url];
TFHpple *parser = [TFHpple hppleWithHTMLData:urlData];
NSString *propertyXpathQueryString = @"//td/a";
NSArray *propertiesNodes = [parser searchWithXPathQuery:propertyXpathQueryString];

NSMutableArray *list =[[NSMutableArray alloc] init];
NSString *string = [[NSString alloc] init];
for (TFHppleElement *element in propertiesNodes) {

    [list addObject:string];

    string = [[element firstChild] content];

}
for (int i = 0; i < [list count]; i++) {
    NSLog([list objectAtIndex:i]);
}
} 
```

另外，这是一个很好的教程[http://www.raywenderlich.com/14172/how-to-parse-html-on-ios](http://www.raywenderlich.com/14172/how-to-parse-html-on-ios)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T21:47:15.420

这个应该做...

```
for(TFHppleElement* element in linkedNames) {

    NSString* label = [element content];
} 
```

# jquery - 如何定义变量“年龄”？

> ID：13781610
> 
> 赞同：1
> 
> 时间：2012-12-08T20:27:35.793
> 
> 标签：jquery

CodeAcademy 说我没有定义变量年龄？

我哪里做错了？

```
$(document).ready(function(){
    confirm("I am ready to play!");
    var age = prompt("What's your age");

    if (age > 18) {
    console.log("play on player");
    }
    else {
    console.log("you are not allow to play bro");
    }
    }); 
```

*对于任何想知道我为什么不使用 CA Q&A 的人，是因为 Stack 的人更快、更有趣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T20:28:58.747

`else (`不是有效的语法。你需要`else if`（或只是`else {`）。否则代码对我来说看起来不错，所以可能只是一个 CA 错误？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T20:44:19.313

`age`尽管您可能希望执行从字符串到数字的显式转换，但声明看起来没问题。

`confirm()`除非对返回的值进行测试，否则也是没有意义的。

```
$(document).ready(function() {
    if(confirm("I am ready to play!")) {
        var age = Number(prompt("What's your age"));
        if (age >= 18) {
            console.log("play on player");
        }
        else {
            console.log("you are not allow to play bro");
        }
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T20:34:25.737

也许这会更好，注意你错过了一个`if`声明

```
$(document).ready(function(){
    confirm("I am ready to play!");

    var age = prompt("What's your age");

    if (age > 18) {
     console.log("play on player");
    }else{
     if(age < 18) {      //but what about age == 18?? :)
      console.log("you are not allow to play");
     }
    }
}); 
```

**编辑**

回应您的编辑。如果上面的代码运行，并且您稍后尝试访问`age`，您将无法访问，因为`age`它的作用域是这个“闭包”（函数作用域）。如果您想稍后访问，您应该尝试以下操作：

```
var age;
$(document).ready(function(){
 confirm("I am ready to play!");

 age = prompt("What's your age");

 if (age > 18) {
  console.log("play on player");
 }else{
  console.log("you are not allow to play");
 }
}); 
```

所以现在稍后您将能够使用该`age`变量。*但是*，如果您没有采用这种方法，而是采用第一种方法，并`console.log(age)`在您的块之外尝试`$(document).ready)`，您会得到一个`age`未定义的异常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-08T20:34:37.380

```
$(document).ready(function(){
        confirm("I am ready to play!");
        var age = prompt("What's your age");

        if (age > 18) {
        console.log("play on player");
        }
        else if(age < 18) {
        console.log("you are not allow to play dawg");
        }
        }); 
```

你犯了一个简单的错字，应该把`else if(`而不是`else`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-08T20:41:05.543

您的代码看起来不错，但是

您应该在比较之前对您的年龄进行[parseInt](http://www.w3schools.com/jsref/jsref_parseint.asp)，因为 ATM 您正在将字符串与 int 类型进行比较。

如果您的访客是 18 岁，您应该做一些事情：P 有类似的东西：
`if( age.parseInt() >= 18)`

或者你可以在比较之前做`age = age.parseInt()`

# javascript - everyauth findByUserId 错误

> ID：13781612
> 
> 赞同：0
> 
> 时间：2012-12-08T20:27:46.940
> 
> 标签：javascript, express, everyauth

我有 express 2.* 的工作示例，但现在我正在转向版本 3.*。问题是使用 facebook 进行身份验证，这会导致一些问题。一切正常，直到everyauth 向facebook 发出GET 请求，然后返回错误：

```
500 Error: WARNING: You are trying to access the attribute/method configured by `findUserById`, which you did not configure. Time to configure it. 
```

这是 app.js 代码

```
/**
 * Module dependencies.
 */

var express = require('express')
  , routes = require('./routes')
  , config = require('./conf/config.js')
  , user = require('./routes/user')
  , file = require('./routes/file')
  , http = require('http')
  , path = require('path')
  , everyauth = require('everyauth');

var UserService = require(__dirname + '/db/mongodb/UserService').UserService;

everyauth.facebook
  .appId(config.fb.appId)
  .scope('email')
  .fields('id,name,email')
  .appSecret(config.fb.appSecret)
  .findOrCreateUser(function(session, accessToken, accessToExtra, fbUserMetadata) {
    var promise = this.Promise();
    UserService.findOne({ email: fbUserMetadata.email }, function(err, user) {
      if (!user) {
        // Try to register user
        fbUserMetadata['accessToken'] = accessToken;
        UserService.save(fbUserMetadata);
        user = fbUserMetadata;
      }
      return promise.fulfill(user);
    });
    console.log(fbUserMetadata);
    return promise;
  })
  .findUserById(function(userId, cb) {
    console.log('findByUserId called');
    UserService.findOne({ id: userId }, function(err, user) {
      return cb(err, user);
    });
  })
  .redirectPath('/');

var app = express();

app.configure(function(){
  app.set('port', process.env.PORT || 3000);
  app.set('views', __dirname + '/views');
  app.set('view engine', 'jade');
  app.use(express.favicon());
  app.use(express.logger('dev'));
  app.use(express.compress());
  app.use(express.json());
  app.use(express.urlencoded());
  app.use(express.methodOverride());
  app.use(express.cookieParser('your secret here'));
  app.use(express.session());
  app.use(everyauth.middleware(app));
  app.use(app.router);
  app.use(require('less-middleware')({ src: __dirname + '/public' }));
  app.use(express.static(path.join(__dirname, 'public')));
});

everyauth.debug = true;
//everyauth.helpExpress(app);

app.configure('development', function(){
  app.use(express.errorHandler());
});

//console.log(everyauth.facebook);

app.get('/', routes.index);
app.get('/users', user.list);

app.get('/file', file.index);
app.post('/upload', file.upload);

http.createServer(app).listen(app.get('port'), function(){
  console.log("Express server listening on port " + app.get('port'));
}); 
```

**要解决此问题，请添加以下行：**

```
everyauth.everymodule.findUserById(function(userId, cb) {
    console.log('findByUserId called');
    UserService.findOne({ id: userId }, function(err, user) {
      return cb(err, user);
    });
  }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T21:49:28.353

调用`findUserById`on`everyauth.everymodule`而不是 on `everyauth.facebook`：

```
everyauth.everymodule.findUserById(function(userId, cb) {
    console.log('findByUserId called');
    UserService.findOne({ id: userId }, function(err, user) {
        return cb(err, user);
    });
}); 
```

# python - 当数据库更新时，WTForms 中的选项验证不会更新

> ID：13781616
> 
> 赞同：5
> 
> 时间：2012-12-08T20:28:04.900
> 
> 标签：python, flask, wtforms, py2neo

我了解`SelectField`WTForms 中的方法采用`choices`具有形式的 can 参数...

```
choices=[("value1", "display of value 1"), ("value2", "display of value 2")] 
```

我需要根据对数据库的调用来填充我的选择。我使用 neo4j 作为后端，所以我不能使用模型表单或其他内置解决方案来填充表单中的数据。

```
def get_list_of_things():
    query = 'start n = node:things("*:*") return ID(n), n.display_name;'
    t = cypher.execute(cdb, query)[0]
    for x in t:
        x[0] = str(x[0])
        x[1] = str(x[1])
    things = list(tuple(x) for x in t)
    return things

class SelectAThing(Form):
    thingID = SelectField('Thing name', choices=get_list_of_things()) 
```

运行choices = get_list_of_things() 确实会产生一个有效的选择列表，很好，这基本上是有效的。

但是，它似乎永远不会更新事物列表，即使数据库更新并且我稍后返回该表单也是如此。如果我将东西添加到数据库并返回，我仍然会看到第一个东西列表。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-09T01:28:02.970

是的 - 你明白了。WTForms 那样有点不直观。

顺便说一句，如果您从 SQLAlchemy 数据库中提取选项（并且您正在使用 Flask），请查看 QuerySelectField 插件：

[http://wtforms.simplecodes.com/docs/0.6.1/ext.html#module-wtforms.ext.sqlalchemy](http://wtforms.simplecodes.com/docs/0.6.1/ext.html#module-wtforms.ext.sqlalchemy)

```
from wtforms.ext.sqlalchemy.fields import QuerySelectField

def all_employees():
  return Employee.query

class BugReportForm(Form):
  description = TextField(u"Notes")
  # The get_label will show the "name" attribute of the Employee model
  assign_to = QuerySelectField(u'Assign to',
                           get_label=u"name",
                           query_factory=all_employees) 
```

这将为您提供一个包含每个人姓名的 Select 字段。

奖励：当您在视图代码中访问 BugReportForm.assign_to.data 时，它将返回 Employee 对象（而不是 id）。这很方便。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-08T21:14:24.657

没有傻瓜，只是不要把它放在课堂上。把它放在视图代码中。

```
@app.route('/route')
def routename()
    form = SelectAThing()
    form.orgid.choices=get_joinable_orgs() 
```

我发现这很棘手，因为在视图中初始化它之后，我没有意识到我可以像普通 python 对象一样分配给表单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-15T06:54:58.653

我有同样的问题，我尝试了 QuerySelectField 但因为它不是“选择输入”并且它是一个 ul 元素，它不能接受像 onchange 这样的事件并且很难用 JavaScript 获取值，所以我必须保留 selectField 字段，并且由于它不是自定义路径并且这是模态视图，因此我在渲染函数中更新了 kawargs['form'].column.choices 并关闭了 selectField 的验证以接受更新的街道而无需重新加载应用程序

```
form_extra_fields = {
    'streetname': SelectField(
        'streetname',
        coerce=str,
        choices=([street.streetname for street in db.session.query(StreetsMetadata).all()]),
        render_kw={'onchange': "myFunction()"},
        validate_choice=False
        ),
    }

def render(self, template, **kwargs):
    """
    using extra js in render method allow use
    url_for that itself requires an app context
    """
    # solved By Python King
    if 'form' in kwargs and 'streetname' in kwargs['form'] and 'choices' in vars(kwargs['form'].streetname):
        kwargs['form'].streetname.choices = [street.streetname for street in db.session.query(StreetsMetadata).all()]
    self.extra_js = [url_for("static", filename="admin/js/users.js")]
    response = render_miror(self, template, **kwargs)
    return response 
```

# hadoop - Hadoop 应该在哪里存储文件添加

> ID：13781617
> 
> 赞同：0
> 
> 时间：2012-12-08T20:28:06.600
> 
> 标签：hadoop, version, storage

我已经安装了 0.22.0 版的 Hadoop，并进行了 namenode 的格式化。但是当我添加一个文件（使用 hadoop fs -put 命令）时，该文件被添加到操作系统的当前文件夹而不是 Hadoops 存储文件夹（我认为是 /tmp/hadoop-root/dfs/name） . 我也使用过 1.0.4 版本，在 1.0.4 的情况下，您添加的任何文件最终都在 Hadoop 的存储文件夹中，而不是被添加到操作系统的当前文件夹中。那么，版本 0.22.0 是否应该这样做？

谢谢，香农

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T13:17:13.813

您没有配置/启动（伪）集群，因此默认使用本地文件系统。检查 hadoop-0.22.0/conf 文件夹中的设置。有关如何设置 Pseudo-Cluster 的信息，请参阅[http://hadoop.apache.org/docs/stable/single_node_setup.html 。](http://hadoop.apache.org/docs/stable/single_node_setup.html)`bin/start-dfs.sh`使用脚本运行 HDFS 守护进程。

# php - 直接查看 php 文件时出现 Wordpress 404 错误

> ID：13781620
> 
> 赞同：4
> 
> 时间：2012-12-08T20:28:21.770
> 
> 标签：php, wordpress

我有一个 php 文件，它在我的 wordpress 主题文件夹中保存了一个脚本，我试图通过浏览器中的相对路径直接查看它，即：www.mywebsite.com/wp-content/themes/my-theme-name/file- in-question.php

但是，一旦我尝试直接查看，wordpress 就会给出 404 错误。

我会在 wordpress 中创建一个模板，但要使脚本正常工作，我需要在浏览器中使用 .php 扩展名查看它，因为它基本上是对 wordpress 之外的另一个脚本的自定义搜索，它返回如下结果：

www.mywebsite.com/wp-content/themes/my-theme-name/file-in-question.php?controller=Listings ecc....

我所需要的只是能够在没有 wordpress 给我 404 错误的情况下查看 php 文件

我还应该提到，主题中的任何其他 php 文件都会发生这种情况。我可以访问 .html 文件和图像（故意将它们放置在 php 文件扩展名上。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-04T08:37:23.710

我通过将该文件放在 wordpress 之外进行管理，然后在 wordpress 站点中调用函数。不整洁但有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-12T11:46:47.187

为了安全起见，WordPress 不会让您直接访问该文件。最好的办法是给它一个模板名称，为其分配一个页面，然后导航到该页面。

```
<?php
    /* Template name: Your template */
    code
?> 
```

那应该运行您需要的代码，并且如果您需要在页面设置中限制对公共的访问，您可以限制访问。

# android - Android如何访问slide_in_right.xml动画

> ID：13781621
> 
> 赞同：4
> 
> 时间：2012-12-08T20:28:47.353
> 
> 标签：android, animation

我正在制作片段过渡动画。我想从骑行动画中提供一个幻灯片，但我找不到它以编程方式访问`android.R.anim`
那里只有几个动画，在探索源代码时我发现这个文件夹`frameworks/base/core/res/res/anim`有几十个动画，包括`slide_in_right.xml`

如何从代码中访问它？有没有比在我的`res/anim`文件夹中复制/粘贴更好的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-26T14:37:11.947

这不是问题的答案。android.R.anim.slide_out_right 在别处定义，可从 R.anim 访问。无法从此包访问 Slide_in_right，因此需要使用 xml 文件定义

我设法通过将 frameworks/base/core/res/res/anim/slide_in_right.xml 中的文件复制到 res/anim/slide_in_right.xml 来访问动画并使用了代码：

```
AnimationUtils.loadAnimation(this, R.anim.slide_in_right); 
```

加载动画。

实现 onTouchListener 的完整代码允许用户向左滑动图像以查看下一个图像并向右滑动图像以查看上一个图像如下所示

```
 /**
 * @return
 */
protected OnTouchListener createOnTouch() {
    return new View.OnTouchListener() {
        @Override
        public boolean onTouch(View v, MotionEvent event) {
            // TODO Auto-generated method stub
            if ((event.getAction() == MotionEvent.ACTION_DOWN) || (event.getAction() == MotionEvent.ACTION_POINTER_DOWN)) {
                downX = (int) event.getX();
                Log.i("event.getX()", " downX " + downX);
                return true;
            } else if ((event.getAction() == MotionEvent.ACTION_UP) || (event.getAction() == MotionEvent.ACTION_POINTER_UP)) {
                upX = (int) event.getX();
                Log.i("event.getX()", " upX " + upX);
                Log.d("event.getX()", " upX-downX " + (upX - downX));
                Log.d("event.getX()", " downX-upX " + (downX - upX));
                if (upX - downX > 100) {
                    imageSwitcher1.setInAnimation(AnimationUtils.loadAnimation(ImageDisplayActivity.this, android.R.anim.slide_in_left));
                    imageSwitcher1.setOutAnimation(AnimationUtils.loadAnimation(ImageDisplayActivity.this, android.R.anim.slide_out_right));

                    int newPosition = selected - 1;
                    showDetails(newPosition, gallery.getChildAt(newPosition));
                    // ImageDisplayActivity.this.switchTitle(curIndex);
                } else if (downX - upX > 100) {
                    imageSwitcher1.setInAnimation(AnimationUtils.loadAnimation(ImageDisplayActivity.this, R.anim.slide_in_right));
                    imageSwitcher1.setOutAnimation(AnimationUtils.loadAnimation(ImageDisplayActivity.this, R.anim.slide_out_left));

                    int newPosition = selected + 1;
                    showDetails(newPosition, gallery.getChildAt(newPosition));

                } else {
                    return false;
                }
                return true;
            }
            return false;
        }
    };
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T21:33:35.533

您可以使用下面的代码获取预定义的动画 xml，

```
Animation animation;

public void onCreate(Bundle savedInstanceState) {
   super.onCreate(savedInstanceState);
   setContentView(R.layout.activity_main);

   animation = AnimationUtils.loadAnimation(this,android.R.anim.slide_out_right); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-17T08:16:52.423

这也有效

```
 <action
        android:id="@+id/action_fragment_main_to_favoriteFragment"
        app:destination="@id/favoriteFragment"
        app:enterAnim="@android:anim/fade_in"
        app:exitAnim="@android:anim/fade_out"
        app:popEnterAnim="@android:anim/slide_in_left"
        app:popExitAnim="@android:anim/slide_out_right" /> 
```

# algorithm - 几何：计算几何，计算所有朋友点对

> ID：13781625
> 
> 赞同：3
> 
> 时间：2012-12-08T20:29:22.457
> 
> 标签：algorithm, data-structures, geometry, computational-geometry

给定 n 个点，它们中没有三个是共线的。i 和 j ，如果以 i &j 为直径的圆不包含任何其他点，则 2 个点是朋友。在 O(nlogn) 中给出所有这些点

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T02:51:07.900

您正在尝试计算文献中所谓的*相对邻域图*。由两点确定的*[月牙一定是空的。](http://en.wikipedia.org/wiki/Lune_%28mathematics%29)*关于这个主题有相当多的文献。您可以从[Wikipedia 文章](http://en.wikipedia.org/wiki/Relative_neighborhood_graph)开始。正如用户`tmyklebu`所说，它是 Delaunay 三角剖分的一个子集。

      ![月牙](../Images/1f0691b3c843416f561ce7a947a4ec2c.png)

*更正*。正如 Asiri 友好地解释的那样，我误读了条件。相关图是[Gabriel Graph](http://en.wikipedia.org/wiki/Gabriel_graph)，它也有相当多的文献：

      ![在此处输入图像描述](../Images/ba666981125e17a1a572d37a908cadaa.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T22:23:37.097

计算 Delaunay 三角剖分。如果两点是朋友，则它们必须是 Delaunay 三角剖分中的邻居。

然而，反之则不然。您需要检查 Delaunay 三角剖分中的每条（线性多条）边，以查看另一个点是否位于圆内。为此，请遍历所有边。调用当前迭代的端点u和v。u的邻居可以从v开始按顺时针顺序枚举；让 a_1 成为 u 从 v 顺时针方向的下一个邻居，a_2 成为 u 从 v 逆时针方向的下一个邻居。您只需检查 a_1 和 a_2 是否不在以 uv 为直径的圆内。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T21:55:59.860

我对这个答案不是很自信，如果我错了，请纠正我。

我们从前两点开始，所以只有一个圆圈。这个圆可以用圆`(p1, p2, c, r)`的中心`c`和`r`半径来表示（它们也可以即时计算）。

现在我们逐渐添加其余的点，同时根据需要打破/制作新的圆圈。

因此，在某个步骤，如果我们有`m`多个圆圈，并且我们试图引入点`p`，扫描`m`并查看是否`p`在任何圆圈内（可以有效地确定给定`c`和`r`）。如果`p`在某个圆圈内，则摧毁该圆圈并创建两个新圆圈（与`p`被摧毁的圆圈的两个点）。

另一方面，如果在`p`所有圆之外，那么我们需要找到最接近的点`p`并创建一个新圆。现在我不完全确定如何有效地找到“最接近的点`p`”，可能是[这样](https://stackoverflow.com/questions/4509798/finding-nearest-point-in-an-efficient-way)的？

如果我完全偏离轨道，请道歉！

**更新：**如果有超过 1 个“最接近的点`p`”，不知道该怎么办。可能会创建那么多新圈子（？）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T20:13:47.047

将以下内容插入 Delaunay 三角剖分：

首先定义`D(x,y)`表示点`x`和之间的距离`y`。

**属性-I**：给定任意 2 个点`p1`和`p2`，第三个点`p3`在圆上或圆内，其中一个直径是由`p1`和`p2`iff形成的线段

```
D(p1,p3)^2+D(p2,p3)^2<=D(p1,p2)^2. 
```

这是因为圆上的角度是它所看到的圆部分的度数的一半，因此看到直径的那个是正确的。

因此，任何`p1`和`p2`都是朋友，如果在 Delaunay 瓷砖中与它形成三角形的点（最多 2 个这样的点）都满足属性-I。

# html - 来自 cgi 脚本的 System() 调用

> ID：13781629
> 
> 赞同：0
> 
> 时间：2012-12-08T20:30:13.767
> 
> 标签：html, web, cgi

对于我的任务，我有一个 cgi 脚本（C 程序）和一个我想使用 system() 从脚本中调用的程序。在 cgi-bin/ 和 chmodded 到 755。我知道我在我的 cgi 程序中进行的系统调用是有效的（路径正确，命令正确......）但调用总是失败。我在执行 cgi-script 期间检查了工作目录，它是正确的。如果我在 bash 中运行相同的调用，它可以工作，但在我的菜单程序中它不起作用。

这很奇怪，因为当我在我的计算机上运行服务器时系统调用正在工作（使用 python -m CGIHTTPServer），但是当我将网站放在我大学的服务器上时，除了 system()称呼。所以它似乎与权限有关。

这是有问题的电话，如果有帮助的话：

```
 sprintf(systemCall, "passweb -add %s", username);
    exitStatus = system(systemCall); //always 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T22:27:53.487

显然，我必须在可执行路径前添加一个“./”。

像这样：`sprintf(systemCall, "./passweb -add %s", username);`

# objective-c - UIWebView 自动调整字体大小以最适合页面

> ID：13781635
> 
> 赞同：4
> 
> 时间：2012-12-08T20:30:35.590
> 
> 标签：objective-c, uiwebview, font-size

有没有办法在 UIWebView 中自动调整字体大小，使其在屏幕上看起来最好？会尝试将字体大小设置为理想的查看大小（假设调整文本大小只会包裹文本而不破坏整个页面）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-17T13:51:27.253

我有同样的问题，这个解决方法对我有用：

```
-(void)webViewDidFinishLoad:(UIWebView *)webView{
[webView scalesPageToFit];
float scale = 130000/webView.scrollView.frame.size.width;
NSString *jsString = [[NSString alloc] initWithFormat:@"document.getElementsByTagName('body')[0].style.webkitTextSizeAdjust= '%f%%'", scale];
[webView stringByEvaluatingJavaScriptFromString:jsString];
} 
```

我有几个不同宽度的 UIWebViews。我想保持启用缩放，因此打开了 scalePageToFit，这会导致宽度较小的 UIWebview 的文本很小，而宽度较大的 UIWebview 的字体很大。要标准化字体大小，请通过将某个因子（您必须自己调整，130000 对我使用 CSS 字体大小 10pt）除以 webview 宽度来计算比例。

据我所知，它与始终为 1.0 的 zoomFactor 无关。我没有检查 UIWebViews 中的字体是否完全相同（视觉上），但足以让我无法分辨。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T20:37:25.447

您应该将`scalesPageToFit`属性设置为`YES`

[您可以在此处](http://developer.apple.com/library/ios/documentation/uikit/reference/UIWebView_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006950-CH3-SW19)阅读文档

# xml - Groovy 和 XML：无法插入处理指令

> ID：13781637
> 
> 赞同：0
> 
> 时间：2012-12-08T20:30:46.837
> 
> 标签：xml, groovy

## 设想

需要更新现有 XML 文件中的一些属性。该文件包含一个 XSL 处理指令，因此在解析和更新 XML 时，我需要在再次将其写入文件之前添加该指令。问题是 - 无论我做什么 - 我都无法插入处理指令

基于[在 rgagnon.com 上找到的 Java 示例，](http://www.rgagnon.com/javadetails/java-0577.html)我创建了以下代码

## 示例代码##

```
import groovy.xml.*

def xml = '''|<something>
            |  <Settings>
            |  </Settings>
            |</something>'''.stripMargin()

def document = DOMBuilder.parse( new StringReader( xml ) )
def pi = document.createProcessingInstruction('xml-stylesheet', 'type="text/xsl"    href="Bp8DefaultView.xsl"');
document.insertBefore(pi, document.documentElement) 

println document.documentElement 
```

创建输出

```
<?xml version="1.0" encoding="UTF-8"?>
<something>
  <Settings>
  </Settings>
</something> 
```

我想要的是

```
<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="Bp8DefaultView.xsl"?>
<something>
  <Settings>
  </Settings>
</something> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T20:39:50.523

您在 PI 之前插入 PI `documentElement`，但随后仅将元素传递给`println`. 如果你打印整个它会起作用`document`吗？

如果做不到这一点，输出 DOM 文档的“官方”方式是使用`LSSerializer`

```
def ser = document.implementation.createLSSerializer()
new File("output.xml").withOutputStream { o ->
  def lso = document.implementation.createLSOutput()
  lso.byteStream = o
  ser.write(document, lso)
} 
```

# symfony - 使用 FOSRestBundle 和 Symfony 混合路由和查询参数

> ID：13781641
> 
> 赞同：10
> 
> 时间：2012-12-08T20:31:15.017
> 
> 标签：symfony, symfony-2.1, fosrestbundle

使用 Symfony2 和 FOSRestBundle 我正在尝试实现 API 方法，这些方法在路由中定义了一些固定参数以及查询字符串中可能存在的一些可选参数。

例如：

```
 http://somesite.com/api/method/a/b
 http://somesite.com/api/method/c/d?x=1&y=2 
```

根据[FOSRestBundle 的文档](https://github.com/FriendsOfSymfony/FOSRestBundle/blob/master/Resources/doc/3-listener-support.md)，ParamFetcher 是使用 @QueryParam 注释的正确方法。但是，我已经定义了一个控制器，如下所示：

```
 use Symfony\Bundle\FrameworkBundle\Controller\Controller;
 use FOS\RestBundle\Controller\Annotations\Get;
 use FOS\RestBundle\Controller\Annotations\View;

 class MyController extends Controller
 {

   /**
    * @Get("/method/{a}/{b}")
    * @View()
    */
   public function getMethodAction($a, $b)
   {
     // do stuff

     return array('foo' => 'bar');
   }

 } 
```

现在看来我需要能够访问 ParamFetcher 的实例，但我不知道如何（谷歌搜索没有太大帮助）。我从文档中知道，我可以简单地更改方法签名以合并 ParamFetcher，但是，当我这样做时，它会将参数移动到我无法拥有的查询字符串中。

有没有办法混合两者，或者我应该放弃 ParamFetcher 并直接使用 Symfomy 的内置 Request 对象检查请求？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-09-18T20:02:24.463

这个问题已经很老了，您可能已经找到了解决方案，但是自从我通过 Google 搜索来到这里并且知道答案后，我会做出贡献。

```
use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use Symfony\Component\HttpFoundation\JsonResponse;
use FOS\RestBundle\Request\ParamFetcher;
use FOS\RestBundle\Controller\Annotations\QueryParam;
use Nelmio\ApiDocBundle\Annotation\ApiDoc;

class DefaultController extends Controller
{
    /**
     * Returns a collection of Task
     *
     * @QueryParam(name="projectId", nullable=true, requirements="\d+")
     * @QueryParam(name="name", nullable=true, description="Project Name")
     * @QueryParam(name="assignee", nullable=true)
     * @QueryParam(name="depth", nullable=true)
     *         *
     * @param ParamFetcher $paramFetcher
     * @ApiDoc()
     *
     * @return JsonResponse
     */
    public function cgetTaskAction(ParamFetcher $paramFetcher)
    {
        foreach ($paramFetcher->all() as $criterionName => $criterionValue) {
            // some logic here, eg building query
        }

        $results = // query database using criteria from above

        // this is just a simple example how to return data
        return new JsonResponse($results);
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-03-06T17:18:10.180

只是想发布一个答案，因为原始答案仅使用 QueryParams，而问题是将 QueryParams 与 RouteParams 一起使用。

如果要使用路由参数和查询参数，可以使用 ParamFetcher 作为操作的第一个参数，稍后再添加路由参数。

我还没有找到将路由参数添加到 paramFetcher 的方法。

```
/*
 * @Route("/term/{termId}", requirements={"termId" = "[a-z0-9]+"})
 *
 * @QueryParam(name="limit", requirements="\d+", default="30", description="How many documents to return.")
 *
 * @Method("GET")
 *
 * @param ParamFetcherInterface $paramFetcher
 * @param $termId
 * @return array()
 */
public function getTermFeedAction(ParamFetcherInterface $paramFetcher, $termId) {
    // access $termId over the method parameter
    // access the @queryparams via the $paramFetcher

} 
```

# css - 创建自定义按钮

> ID：13781645
> 
> 赞同：-6
> 
> 时间：2012-12-08T20:31:36.870
> 
> 标签：css, wordpress, button

我想为我的 wordpress 网站为用户创建一个类似于“喜欢按钮”的自定义按钮。我该如何做到这一点？（使用我自己的图像，未连接到 Facebook）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T02:55:33.217

@Larry Combs：您的问题是为 StackOverflow 编写的，但鉴于您从未在此处发布过问题，您可能并不完全了解该网站的用途。它专门用于编码问题，但我们不是在这里为您编写代码。您应该发布带​​有您尝试过的示例的问题，并明确解释问题所在。话虽如此，这次我会给你怀疑的好处。

将其放在您希望按钮所在的位置：

```
<button id="target" type="button">Click Me</button>
<div id="output">0</div> 
```

`</head>`将其放在header.php 中的结束标记之前：

```
<script type="text/javascript>
    $(document).ready(function() {
        $('#target').click(function() {
            $('#output').html(function(i, val) { return val*1+1 });
        });
    });
</script> 
```

请参阅以下链接中的小提琴以查看它的实际效果：http: [//jsfiddle.net/Vg9mS/1/](http://jsfiddle.net/Vg9mS/1/)。

小提琴中的代码归功于 [Marcus Whybrow](https://stackoverflow.com/questions/4701349/jquery-increase-the-value-of-a-counter-when-a-button-is-clicked)。

# scala - 使用 JavaTokenParsers 后无法在 Scalatest 中解析和比较浮点数

> ID：13781649
> 
> 赞同：1
> 
> 时间：2012-12-08T20:32:22.140
> 
> 标签：scala, scalatest

在使用 Scala 的组合器解析框架时，我在解析浮点数时遇到了以下问题：

```
import scala.util.parsing.combinator.JavaTokenParsers
import org.junit.runner.RunWith
import org.scalatest.FlatSpec
import org.scalatest.junit.ShouldMatchersForJUnit
import org.scalatest.junit.JUnitRunner

@RunWith(classOf[JUnitRunner])
class SandboxSpec extends FlatSpec with ShouldMatchersForJUnit {
  "A java token parser" should "parse a float" in {

    class Parser extends JavaTokenParsers {
      def realValue: Parser[Float] = floatingPointNumber ^^ {
        s => s.toFloat
      }
    }

    val p = new Parser()
    val result = p.parseAll(p.realValue, "5.4") match {
      case p.Success(x, _)     => x
      case p.Failure(msg, _) => fail(msg)
    }

    result should equal (5.4f plusOrMinus 0.0001f)

  }
} 
```

此测试产生以下错误：

```
5.4 did not equal FloatTolerance(5.4,1.0E-4) 
```

我不确定它是否是解析器代码产生的不是类似浮点的东西（不过，用调试器查看它，它显然是一个 Java 浮点），或者它是否是 ScalaTest 匹配器的问题。

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T01:50:17.257

在 ScalaTest中`equal`总是意味着`==`，因此对象相等。因此，您的代码不会成功，因为`5.4`不等于`FloatTolerance`.

要更正您的测试用例使用`be`，它被重载以获取以下实例`FloatTolerance`：

```
result should be (5.4f plusOrMinus 0.0001f) 
```

顺便说一句，您的代码会引发警告：

> 匹配可能并不详尽。它会在以下输入上失败：Error(_, _)

为了消除它，选择`case p.NoSuccess(msg, _) =>`而不是`case p.Failure(msg, _) =>`

# python - 在 Python Tkinter 中按顺序显示多个图像

> ID：13781653
> 
> 赞同：1
> 
> 时间：2012-12-08T20:33:02.273
> 
> 标签：python, tkinter

我想制作一个显示初始图像的程序，然后在文件夹中显示最新图像。

除了 Tkinter 面板在窗口中的第一个图像下方显示最新图像之外，我一切正常。我想不出一种方法来破坏原件或在没有旧图像的情况下制作另一个面板。我复制了下面的相关代码，不确定它是否会无错误地执行。我的 .py 文件运行良好，没有任何错误，只是出现了不需要的结果。任何帮助都会很棒。

```
from Tkinter import *
import Image, ImageTk
import datetime
import sys, os

FILE_PATH = "C:\\easy\\Pics"
#------------------------------------------------------------------------#
def quitX():
    root.destroy()
    sys.exit()

#------------------------------------------------------------------------#
def prg_task():
    # code section removed....

    # continue code

    im = Image.open("C:\easy\imageNEW.jpg")

    image1 = ImageTk.PhotoImage(im)

    # get the image size
    w = image1.width()
    h = image1.height()+10

    # position coordinates of root 'upper left corner'
    x = 500
    y = 200

    # make the root window the size of the image
    root.geometry("%dx%d+%d+%d" % (w, h, x, y))

    # root has no image argument, so use a label as a panel
    panel1 = Label(root, image=image1)
    panel1.pack(side='top', fill='both')

    # put a button on the image panel to test it
    button2 = Button(panel1, text='Close Window', command=quitX)
    button2.pack(side='bottom')

    # save the panel's image from 'garbage collection'
    panel1.image = image1

    root.after(10000, prg_task)

##########################################################################
# START CODE EXECUTION
# Initializing non-constant global variables

root = Tk()
root.title("Camera")
initIMG = Image.open("C:\easy\No-Image-Available.jpg")
tkimage = ImageTk.PhotoImage(initIMG)
panel1 = Label(root,image=tkimage)
panel1.pack(side='top', fill='both')
#------------------------------------------------------------------------#

# After 0.1s, attempt to grab still image from IP Camera
root.after(100, prg_task)
root.mainloop()

#------------------------------------------------------------------------# 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T21:38:53.657

如果您一次只显示一张图像，您应该只创建一次面板和标签。每次您想显示新图像时，创建图像，然后执行类似`self.panel1.configure(image=new_image)`.

# arrays - 在 PowerShell 中从字符串创建数组

> ID：13781655
> 
> 赞同：2
> 
> 时间：2012-12-08T20:33:11.337
> 
> 标签：arrays, string, powershell, integer

如何从包含字符串“3 4 5 4 3”的变量创建整数数组？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-09T01:51:51.937

我更喜欢：

```
[int[]] -split "3 4 5  4   3" 
```

`-split`处理空白空间比`String.Split()`. 使用`String.Split()`，如果数字之间有多个空格，则生成的数组中会出现空字符串。PowerShell 将空字符串强制为 0，例如：

```
C:\PS> [int[]]"3 4 5  4   3".Split()
3
4
5
0
4
0
0
3 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-08T20:38:44.940

拆分字符串会创建一个字符串数组，将强制转换添加到整数数组：

```
[int[]]"3 4 5 4 3".Split() 
```

# opentsdb - OpenTSDB 和单个测量中的多个值

> ID：13781656
> 
> 赞同：3
> 
> 时间：2012-12-08T20:33:25.083
> 
> 标签：opentsdb

据我了解，OpenTSDB 处理测量值是单个值的时间序列。许多测量设备在一次测量中提供一组值。例如，这可能是对一个设备的一次测量：2012-12-16 01:00:00, temp=12, current=2, waterheight=3, nacl-level0.5, ....

OpenTSDB 是否允许我将这些存储在一起，或者我是否被迫将它们存储为单独的时间序列？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T05:32:15.887

最好将它们存储为单独的时间序列，因此您将有一个用于温度，一个用于当前，一个用于水位高度，一个用于 NaCl 水平等。您可以随时将它们一起查询。

标签应主要用于对相同性质的数据点进行分类，例如，如果您有多个测量点，那么您将有一个标签来指示哪个设备收集了测量值。这将允许您获取每个设备的时间序列，或获取所有内容的聚合视图（通过求和或平均等）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-12T15:02:11.000

除此之外，我认为 tsuna 是绝对正确的，这在 OpenTSDB 上是不可能的。保存数据的行有一个唯一的行键和多个值 - 都是相同的类型。

每个时间戳（最小时间间隔：1 秒）和每个行键（指标名称 + 小时时间戳 + 标记名）只能放置一个值。因此，您根本无法将具有相同时间戳或不同标签的值放在一个时间序列行中。或者您希望如何在不使用标签的情况下区分不同的测量点（温度、电流、水高等）？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-08T09:39:12.903

大卫，

数据的处理描述在： http: [//opentsdb.net/docs/build/html/user_guide/writing.html](http://opentsdb.net/docs/build/html/user_guide/writing.html)

可以强制 OpenTSDB 以这种方式存储数据（需要一些调整和重新编译），你基本上是正确的：这不是你想要的方式。

从要存储的测量值来看，我想我以前实际上曾在该领域工作过。将序列存储为单独的时间序列有两个原因：

*   您只能将**8**个标签附加到单个数据点，因此您只能有 6 个测量值，假设 1 个标签用于识别，1 个用于位置。
*   将它们存储为单独的时间序列，您可以利用 OpenTSDB 强大的内部数据解析工具。

如果你像这样构造它：

```
1d.height t=timedate 高度 rivername=name
```

您可以立即检索整条河流的平均高度。

想象一下你可以用二维水体做什么：

```
2d.height t=timedate 高度类型=湖名=IJsselmeer xcoord=xx ycoord=yy
```

可能的标签值的数量有限制（16M）。根据您要存储的内容的分辨率，您可能希望将数据划分为扇区和网格点。（如果您想以 1M 分辨率存储大西洋）

# node.js - 如何在 Node.js 中正确关闭 MongoDB 连接？

> ID：13781658
> 
> 赞同：5
> 
> 时间：2012-12-08T20:33:42.887
> 
> 标签：node.js, mongodb

以下代码正在“工作”，因为它在控制台中返回文档：

```
var Db = require('mongodb').Db;
var mongoUri = 'mongodb://localhost:27017/basketball';

exports.games = function(req, res){
    console.log(req);
    res.end("list of games");
    Db.connect(mongoUri, function(err, db) {
        console.log('connected!');
        db.collection('game_ids', function(err, coll) {
            coll.findOne({'date' : '2012-12-07'}, function(err, doc) {
                console.log(doc);
            });
        });
        db.close();
    });
};

>
connected!
{ _id: 50b01b31597f14213a00010f,
  date: '2012-12-07',
  espn_id: '400277990',
  hid: '20',
  aid: '2',
  home: '76ers',
  away: 'Celtics',
  season: '2013',
  during: 'regular',
  scrape: null } 
```

但是当我查看mongod控制台时，我看到每次刷新页面时，似乎打开了越来越多的连接而没有关闭它们。在这里你可以看到 5 次刷新后，我现在显然有 25 个打开的连接（你必须向右滚动才能看到数字）：

```
Sat Dec  8 12:29:32 [initandlisten] connection accepted from 127.0.0.1:57587 #121 (21 connections now open)
Sat Dec  8 12:29:32 [initandlisten] connection accepted from 127.0.0.1:57588 #122 (22 connections now open)
Sat Dec  8 12:29:32 [initandlisten] connection accepted from 127.0.0.1:57589 #123 (23 connections now open)
Sat Dec  8 12:29:32 [initandlisten] connection accepted from 127.0.0.1:57590 #124 (24 connections now open)
Sat Dec  8 12:29:32 [initandlisten] connection accepted from 127.0.0.1:57591 #125 (25 connections now open) 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-08T20:57:20.647

您正在尝试在工作完成时关闭连接。

```
 // the work is done in the call back functions
    db.collection('game_ids', function(err, coll) {
        coll.findOne({'date' : '2012-12-07'}, function(err, doc) {
            console.log(doc);
        });
    });

    // the work above with the callback is async, this executes
    // immediately after initiating that work.
    db.close(); 
```

如果您要在每次通话中打开和关闭，您将在工作完成后关闭（在您的情况下调用 console.log 之后）。

您可能还想研究连接池，这样您就不必在每次通话时都打开/关闭。更多在这里：

[http://technosophos.com/content/nodejs-connection-pools-and-mongodb](http://technosophos.com/content/nodejs-connection-pools-and-mongodb)

您还应该通过检查回调函数中的错误来进行错误检查。例如，如果收集失败，则不应执行 findOne 等...

# android-asynctask - Android AsyncTask 和 JNI 原生代码

> ID：13781666
> 
> 赞同：2
> 
> 时间：2012-12-08T20:34:19.923
> 
> 标签：android-asynctask, java-native-interface

我正在使用 AsyncTask 类来进行一些耗时的后台处理。我用自己的实现扩展了 AsyncTask 类。当`doInBackground()`方法被调用时，它会调用一个原生的 C 函数（这个函数会做一些虚拟的耗时处理并返回一个字符串）。此功能将运行 10 秒。为了便于调试，本机函数的每一项工作都将使用 LOGI() 宏在 Eclipse 控制台上输出一条消息。如果用户在本机方法完成计算之前按下按钮，我调用 AsyncTask 方法`cancel(true)`，但本机函数运行到最后。我认为原因是因为本机函数驻留在另一个进程（相对于我的 Activity 加载的共享库的进程）。第一个问题是：执行native方法的return语句时会发生什么？字符串将返回给谁？第二个问题是关于如何安全地停止本机函数（它分配内存，所以我想停止它的执行并释放使用的内存）。

# html - Bootstrap 按钮在右边缘有奇怪的伪影

> ID：13781670
> 
> 赞同：0
> 
> 时间：2012-12-08T20:35:00.127
> 
> 标签：html, button, twitter-bootstrap, hyperlink, safari

我在我的页面上使用了出色的[Twitter Bootstrap](http://twitter.github.com/bootstrap/)框架，并遇到了一个奇怪的问题，即按钮元素在右边缘有一条线。这仅在 Safari 中发生（Chrome、Mobile Safari 和 FF 似乎工作正常）。我怎样才能解决这个问题？

![在此处输入图像描述](../Images/d9a9b54e10dc88e5040eb3847d73a64e.png)

相关代码：

```
<a href="#" class="btn btn-success btn-large">Mac App Coming Soon</a> 
```

实例：[每小时新闻网站](http://hourlynewsapp.com)

# shell - Hashbang 不支持带参数的参数

> ID：13781674
> 
> 赞同：4
> 
> 时间：2012-12-08T20:35:49.067
> 
> 标签：shell, escaping, shebang

> **可能重复：**
> [如何将多个参数与shebang（即#！）一起使用？](https://stackoverflow.com/questions/4303128/how-to-use-multiple-arguments-with-a-shebang-i-e)

如何使`#!`语句接受带有参数的参数？它似乎将它们作为一个参数集中在一起，而不是像往常一样在空间上拆分。

举这个人为的例子：

```
$ cat /tmp/echo
#!/bin/echo -n
$ /tmp/echo
/tmp/echo$ 
```

效果很好，并且在末尾没有换行输出文件名。但是这个：

```
$ cat /tmp/echo
#!/bin/echo -n hi
$ /tmp/echo
-n hi /tmp/echo
$ 
```

杀死`-n`arg。

我可以做的一个技巧是制作另一个 shell 脚本，它只使用我想要的参数执行我想要的第一个脚本，但如果我不需要它们，我宁愿不添加额外的依赖项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T20:46:38.843

显然没有针对此的 POSIX 标准，但是许多（可能是大多数）*nix 系统只允许您向 shabang 中调用的程序发送一个参数。因此 using`#!/bin/echo -n hi`实际上与 running 相同`/bin/echo "-n hi" /path/to/script`。

有关更详尽的解释，请参阅[此 SO 答案。](https://stackoverflow.com/a/4304187/836738)

# c++ - WinApi 如何获得 MouseWheel Notch？

> ID：13781677
> 
> 赞同：1
> 
> 时间：2012-12-08T20:36:07.227
> 
> 标签：c++, winapi, directx, mouse

您好，我目前正在使用 DirectX 制作游戏，但无法让鼠标滚轮获得当前档位或类似的东西。我查找了一个小示例，但找不到真正有效的示例。我看到他们正在使用 Windows 消息 WM_MOUSEWHEEL，但我在获取当前缺口时遇到问题，请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T22:01:46.133

Mouse wheels do not have a "current notch" so there's no way to query for such a thing from that device. They only measure change delta and direction and this information will be included in the event you get when it is moved. If there is a "current notch" it is in your program and you'll have to track it yourself. This might come in the form of a zoom factor, a page position, or whatever.

# java - 堆栈跟踪记录器

> ID：13781680
> 
> 赞同：1
> 
> 时间：2012-12-08T19:04:47.397
> 
> 标签：java, stack-trace

我需要编写一个使用递归的类可以扩展的父 Java 类。每当调用堆栈发生变化时（你进入一个方法，暂时离开它去另一个方法调用，或者你已经完成了方法），父类将能够意识到然后打印出来。我希望它在控制台上打印，但每次也要清除控制台，以便它水平显示堆栈，这样您就可以看到每个堆栈的高度，以查看弹出的内容和弹出的内容......如果基线也打印出来达到递归函数。

第一的。如何使用 StackTraceElements 和 Thread 类自动检测堆栈何时弹出或推送元素而不手动调用它？

其次，我将如何进行清算？

例如，如果我有代码：

```
public class recursion(int i)
{ 
    private static void recursion(int i)
    {
        if(i < 10)
            System.out.println('A');
        else
        {
            recursion(i / 10 );
            System.out.println('B');
        }
    } 
    public static void main(String[] argv)
    {
        recursion(102);
    }

} 
```

进入main()时需要打印栈，从main()进入recursion(102)时，从recursion(102)进入recursion(102 / 10)，即recursion(10)时，进入recursion(10 / 10)，即recursion(10)中的recursion(1)。当到达基线递归（1）时打印出一条消息。然后打印出函数递归（10），递归（102）和main（）的反向重新访问堆栈。最后打印出我们正在退出 main()。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T20:45:57.843

`Thread`类允许管理操作系统线程，它与调用堆栈没有任何关系。`StackTraceElement`代表一个堆栈框架，但你需要一个`StackTrace`来获得它。

您正在寻找堆栈跟踪更改时的通知，例如添加（输入方法）或删除（退出方法）框架。

到目前为止，最适合这项任务的工具是[`AspectJ`](http://www.eclipse.org/aspectj/). 它允许您定义`advices`（一种方法）在输入或存在其他方法时被调用（除了其他情况）。这些导致通知被调用的触发器被调用`pointcuts`——它们可以是方法入口、出口，并且可以使用通配符来描述方法：切入点`MyClass.get*`适用于 MyClass 的所有 get 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T20:10:58.940

在看到你的答案之前，我开始写自己的。它的形式很简单，但外壳是：

包堆栈跟踪记录器；

```
import java.util.ArrayList;

public class StackTraceLogger 
{

static final int MAX_ROW = Integer.MAX_VALUE;
static final int MAX_COLUMN = Integer.MAX_VALUE;

static public ArrayList<ArrayList<String>> stringTrace;
//private ArrayList<ArrayList<StackTraceElement>> stack;

public StackTraceLogger()
{
     stringTrace = new ArrayList< ArrayList <String>>();
    //stack = new ArrayList<ArrayList<StackTraceElement>>();
}

static public void addStack(StackTraceElement[] inputTrace) 
{
        int size = inputTrace.length;
        // make an ArrayList with the strings of all the StrackTraceElements
        ArrayList<String> str = new  ArrayList<>(size);

        for(int i = 0; i < size; i++)
        {
            str.add(i,inputTrace[i].getMethodName());
        }   

        // Add the ArrayList to the 2D ArrayList of the stacks

}
static public void printTrace()
{

/*  if(stringTrace.get(0).size() > 0)
    {
        for(int i = 0; i < stringTrace.size(); i++)
        {
            System.out.println(stringTrace.get(i));
            for(int j = 0; j < stringTrace.get(j).size(); j++)
                System.out.println(stringTrace.get(i).get(j));
        }
    }*/
}

static private ArrayList<String> convertToArrayList(StackTraceElement[] inputTrace) 
{
    ArrayList<String> strTrace = new ArrayList<>();
    for(int j = 0; j < inputTrace.length; j++ )
        strTrace.add(inputTrace[j].getMethodName());
    return strTrace;
}
} 
```

# c++ - OpenCV中的findContours崩溃编译器

> ID：13781681
> 
> 赞同：0
> 
> 时间：2012-12-08T20:36:41.890
> 
> 标签：c++, xcode, opencv, vector

当我尝试使用`findContours`. 基本上这是我的代码：

```
#include <opencv2/opencv.hpp>
int main()
{
    Mat img = imread(helper::getImageSequence(3, image_value_temp));
    Mat img_gray = Mat(Size(img.cols, img.rows), CV_8UC1);
    Mat img_canny;

    cvtColor(img, img_gray, CV_BGR2GRAY);    

    Canny(img_gray, img_canny, someLow, someHigh);

    vector<vector<cv::Point> > contours;
    vector<Vec4i> hierarchy;
    findContours(img_canny, contours, hierarchy, CV_RETR_TREE, CV_CHAIN_APPROX_SIMPLE);
} 
```

当我打印轮廓时，我得到 7905747460161236409，所以我想知道我的堆是否溢出？

*   XCode 版本：4.5.2
*   编译器：苹果 LLVM 4.1

所以基本上崩溃可以追溯到`findContours`这就是 XCode 给我的全部：

![在此处输入图像描述](../Images/f587a7f160156a04580bd3998c37740b.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T08:24:12.830

如果您提供完整的源代码和为您生成此错误的图像，则重新创建错误会更容易。当我完成您的代码时，以便我可以使用它：

```
#include <opencv2/opencv.hpp>
int main()
{
    using namespace cv;
    Mat img = imread("test.png");
    Mat img_gray = Mat(Size(img.cols, img.rows), CV_8UC1);
    Mat img_canny;

    cvtColor(img, img_gray, CV_BGR2GRAY);    

    Canny(img_gray, img_canny, 80, 120);

    vector<vector<cv::Point> > contours;
    vector<Vec4i> hierarchy;
    findContours(img_canny, contours, hierarchy, CV_RETR_TREE, CV_CHAIN_APPROX_SIMPLE);
} 
```

它在我的系统上运行良好。我看不出它不应该的原因。您在屏幕截图中发布的错误不是编译器崩溃。您的调试器显示您的程序在执行期间崩溃了。您有一个显然由您自己编写的函数 circle_fitting_callback 会在破坏 cv::points 向量时产生错误。您的问题不在于您发布的代码，而在于您没有向我们展示的内容。最好的办法是学习使用调试器。我不知道您的 IDE，但如果您单击调用堆栈中的相应行（您向我们展示的内容），我猜它直接是您导致崩溃的函数部分。如果您遇到此问题，请发布完整的代码以重现错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T06:27:10.427

首先，我认为您不应该`findContours(...)`直接在 Canny 边缘检测器的输出上运行。原因是对于某些图像和边缘检测器的某些值输入参数（在您的情况下它们是“someLow”和“someHigh”），输出图像将有很多小的碎片边缘。因此，`findContours(...)`使用 CV_RETR_TREE 选项（返回嵌套轮廓的完整层次结构）调用将导致它找到很多轮廓加上构建层次结构的额外开销。

要对此进行测试，您可以尝试在简单的测试图像上运行代码，例如带有纯色背景的实心圆圈。精明的边缘检测器应该给出一个单一的“边缘”，即圆。然后调用 findContour(...) 应该给你这个圈子。

另一个测试是使用 CV_RETR_LIST 而不是 CV_RETR_TREE，因为 CV_RETR_LIST 只返回轮廓而不构建层次结构。

另一个测试是运行你的代码，输入到精明的边缘检测器集，以返回很少数量的边缘。

如果这些情况不会使您的程序崩溃，那么我们大致走在正确的轨道上。

最后，根据我从事图像处理/计算机视觉工作的经验，您几乎从不想在边缘图上调用 findContours(...)，因为您想要碎片边缘周围的轮廓是为了什么？如果我的猜测是正确的，那么您正试图在图像中的对象周围找到轮廓。如果是这种情况，那么您应该尝试使用诸如[grabCut](http://docs.opencv.org/modules/imgproc/doc/miscellaneous_transformations.html?highlight=grabcut#void%20grabCut%28InputArray%20img,%20InputOutputArray%20mask,%20Rect%20rect,%20InputOutputArray%20bgdModel,%20InputOutputArray%20fgdModel,%20int%20iterCount,%20int%20mode%29)或[floodfill](http://docs.opencv.org/modules/imgproc/doc/miscellaneous_transformations.html?highlight=grabcut#floodfill)（分水岭，meanshift分割）等分割方法获取图像中对象的二进制掩码，运行一些基本的[图像形态学](http://docs.opencv.org/doc/tutorials/imgproc/erosion_dilatation/erosion_dilatation.html#morphology-1)运算符来清理掩码然后在这个面具上运行 findContours(...) 。

希望这可以帮助。

# html - css动画后链接不起作用

> ID：13781684
> 
> 赞同：0
> 
> 时间：2012-12-08T20:36:46.617
> 
> 标签：html, css, hyperlink

我正在为我的 8 年级毕业面试制作一份关于 HTML、Javacript 和 CSS 的作品集。出于某种原因，在我的 CSS 动画播放后，我的锚标记不再起作用。

[你可以在这里](http://thomaswd.com/Portfolio2/)看到一个演示。

这是我的链接之一的代码：

```
<a href="#" onclick="one()"><div class=img id="img1"> </div></a> 
```

我的CSS：

```
@keyframes secondwindow
{
    from { opacity:0; }
    to { opacity:1; }
}
@-moz-keyframes secondwindow
{
    from { opacity:0; }
    to { opacity:1; }
}
@-webkit-keyframes secondwindow
{
    from { opacity:0; }
    to { opacity:1; }
}
@-o-keyframes secondwindow
{
    from { opacity:0; }
    to { opacity:1; }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T20:46:45.143

问题是`div`s 是浮动的，但包含`a`不是，所以`a`s 最终实际上没有维度。一个简单的解决方案就是让`a`s 也浮动。

# css - angularjs: ng-src 等价于 background-image:url(...)

> ID：13781685
> 
> 赞同：152
> 
> 时间：2012-12-08T20:36:50.347
> 
> 标签：css, angularjs

在 angularjs 中，您有[标签 ng-src](http://docs.angularjs.org/api/ng.directive:ngSrc)`{{` ，其目的是在 angularjs 评估放置在和之间的变量之前，您不会收到无效 url 的错误`}}`。

问题是我使用了相当多的DIV，并`background-image`设置了一个url。我这样做是因为优秀的 CSS3 属性`background-size`可以将图像裁剪为 DIV 的确切大小。

唯一的问题是我收到很多错误，原因与他们创建 ng-src 标记的原因完全相同：我在 url 中有一些变量，浏览器认为图像不存在。

我意识到有可能写一个粗略的`{{"style='background-image:url(myVariableUrl)'"}}`，但这看起来很“脏”。

我已经搜索了很多，找不到正确的方法来做到这一点。由于所有这些错误，我的应用程序变得一团糟。

* * *

## 回答 #1

> 赞同：232
> 
> 时间：2013-05-13T01:37:51.877

这个对我有用

```
<li ng-style="{'background-image':'url(/static/'+imgURL+')'}">...</li> 
```

* * *

## 回答 #2

> 赞同：201
> 
> 时间：2012-12-08T21:51:12.540

`ngSrc`是一个本机指令，因此您似乎想要一个类似的指令来修改您的 div 的 `background-image`样式。

你可以编写你自己的指令来做你想要的。例如

```
app.directive('backImg', function(){
    return function(scope, element, attrs){
        var url = attrs.backImg;
        element.css({
            'background-image': 'url(' + url +')',
            'background-size' : 'cover'
        });
    };
});​ 
```

你会这样调用

```
<div back-img="<some-image-url>" ></div> 
```

JSFiddle 与可爱的猫作为奖励：http: [//jsfiddle.net/jaimem/aSjwk/1/](http://jsfiddle.net/jaimem/aSjwk/1/)

* * *

## 回答 #3

> 赞同：69
> 
> 时间：2013-03-21T00:29:33.930

上面的答案不支持可观察插值（并且花了我很多时间尝试调试）。@BrandonTilley 评论中的[jsFiddle 链接](http://jsfiddle.net/BinaryMuse/aSjwk/2/)是对我有用的答案，我将在此处重新发布以进行保存：

```
app.directive('backImg', function(){
    return function(scope, element, attrs){
        attrs.$observe('backImg', function(value) {
            element.css({
                'background-image': 'url(' + value +')',
                'background-size' : 'cover'
            });
        });
    };
}); 
```

* * *

使用控制器和模板的示例

***控制器 ：***

```
$scope.someID = ...;
/* 
The advantage of using directive will also work inside an ng-repeat :
someID can be inside an array of ID's 
*/

$scope.arrayOfIDs = [0,1,2,3]; 
```

***模板 ：***

像这样在模板中使用：

```
<div back-img="img/service-sliders/{{someID}}/1.jpg"></div> 
```

或者像这样：

```
<div ng-repeat="someID in arrayOfIDs" back-img="img/service-sliders/{{someID}}/1.jpg"></div> 
```

* * *

## 回答 #4

> 赞同：40
> 
> 时间：2013-06-03T16:52:37.373

也可以这样做`ng-style`：

```
ng-style="image_path != '' && {'background-image':'url('+image_path+')'}" 
```

它不会尝试获取不存在的图像。

* * *

## 回答 #5

> 赞同：25
> 
> 时间：2014-08-20T20:57:11.253

类似于 hooblei 的答案，只是插值：

```
<li ng-style="{'background-image': 'url({{ image.source }})'}">...</li> 
```

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2014-12-22T13:12:58.247

只是口味问题，但如果您更喜欢像这样直接访问变量或函数：

```
<div id="playlist-icon" back-img="playlist.icon"> 
```

而不是像这样插值：

```
<div id="playlist-icon" back-img="{{playlist.icon}}"> 
```

然后您可以稍微不同地定义指令，`scope.$watch`这将`$parse`在属性上执行

```
angular.module('myApp', [])
.directive('bgImage', function(){

    return function(scope, element, attrs) {
        scope.$watch(attrs.bgImage, function(value) {
            element.css({
                'background-image': 'url(' + value +')',
                'background-size' : 'cover'
            });
        });
    };
}) 
```

这里有更多背景知识：[AngularJS : Difference between the $observe and $watch methods](https://stackoverflow.com/questions/14876112/difference-between-the-observe-and-watch-methods)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-03-13T04:59:20.587

@jaime 你的回答很好。但是如果你的页面有 $http.get 那么你就可以使用 ng-if

```
app.directive('backImg', function(){
    return function($scope, $element, $attrs){
        var url = $attrs.backImg;
        $element.css({
            'background-image': 'url(' + url + ')',
            'background-size': 'cover'
        });
    }
}); 
```

在工厂

```
app.factory('dataFactory', function($http){
    var factory = {};
    factory.getAboutData = function(){
        return $http.get("api/about-data.json");
    };
    return factory;
}); 
```

在控制器区域

```
app.controller('aboutCtrl', function($scope, $http, dataFactory){
    $scope.aboutData = [];
    dataFactory.getAboutData().then(function(response){
        // get full home data
        $scope.aboutData = response.data;
        // banner data
        $scope.banner = {
            "image": $scope.aboutData.bannerImage,
            "text": $scope.aboutData.bannerText
        };
    });
}); 
```

如果您使用下面的 ng-if 和视图，那么您将通过插值获得图像，否则，您将无法获得图像，因为指令在 HTTP 请求之前获取值。

```
<div class="stat-banner"  ng-if="banner.image" background-image-directive="{{banner.image}}"> 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-02-23T14:07:09.423

我发现 1.5 组件从 DOM 中抽象出样式以在我的异步情况下工作得最好。

例子：

```
<div ng-style="{ 'background': $ctrl.backgroundUrl }"></div> 
```

在控制器中，类似这样的内容：

```
this.$onChanges = onChanges;

function onChanges(changes) {
    if (changes.value.currentValue){
        $ctrl.backgroundUrl = setBackgroundUrl(changes.value.currentValue);
    }
}

function setBackgroundUrl(value){
    return 'url(' + value.imgUrl + ')';
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-01-15T04:49:04.807

由于您提到`ng-src`并且似乎您希望页面在加载图像之前完成渲染，您可以修改 jaime 的答案以在浏览器完成渲染*后运行本机指令。*

[这篇博](http://blog.brunoscopelliti.com/run-a-directive-after-the-dom-has-finished-rendering)文很好地解释了这一点；本质上，您在回调函数之前插入[`$timeout`包装器](https://docs.angularjs.org/api/ng/service/$timeout)，您可以`window.setTimeout`在其中对 CSS 进行这些修改。

# python - 使用 Beatbox 从 greenplum 获取数据并加载到 salesforce。AttributeError：“十进制”对象没有“替换”属性

> ID：13781686
> 
> 赞同：1
> 
> 时间：2012-12-08T20:36:58.757
> 
> 标签：python, api, salesforce

我正在使用 Beatbox 从 greenplum db 获取数据并将其加载到 salesforce。

获取的数据如下所示：

```
 {'loan_id__c': '25104776', **'interest_balance__c': Decimal('188.44'),**
 'number_of_payments_made__c': 29.0, 'days_past_due__c': 53.0, 'type': 'OPPORTUNITY',
 'loan_status__c': None, 'last_payment__c': datetime.date(2012, 5, 3),
 'collection_type__c': 'ACH', 'dollars_past_due__c': Decimal('267.43'),
 'total_balance__c': Decimal('297.03'), 'principal_balance__c': Decimal('278.59'), 
'error_payment_count__c': 4.0, 'credit_sponsor_funding_date__c': None,
 'fee_balance__c': Decimal('190.00'), 
'last_updated_date_time__c': datetime.datetime(2012, 9, 17, 0, 0), 'number_of_missed_payments__c': 20.0} 
```

这给出了以下错误：

```
File "C:\Python27\lib\xml\sax\saxutils.py", line 39, in escape
data = data.replace("&", "&amp;")
AttributeError: 'Decimal' object has no attribute 'replace' 
```

**如果我删除值为 Decimal('xxx.xx') 和 None 的项目，它工作正常。**

我应该如何处理 Decimal 和 None 值？

完整代码：

```
import sys
import beatbox
import xmltramp
import datetime
import xlrd
import csv
import psycopg2
from psycopg2.extras import RealDictCursor

sf = beatbox._tPartnerNS
svc = beatbox.Client()
beatbox.gzipRequest=False

loginResult = svc.login("xxx@xxx.com", "xxxxx")
print "sid = " + str(loginResult[sf.sessionId])
print "welcome " + str(loginResult[sf.userInfo][sf.userFullName])

connection_string = "dbname=gp_user user=gp_an password=gpm host=10.xxx.x.xx port=xxxx"

#create a connection to Greenplum
gp_connection = psycopg2.connect(connection_string)

query = "SELECT 'OPPORTUNITY' as type, loan_id__c,interest_balance__c,dollars_past_due__c,number_of_missed_payments__c,last_updated_date_time__c,loan_status__c,principal_balance__c,error_payment_count__c,days_past_due__c,last_payment__c,fee_balance__c,collection_type__c,number_of_payments_made__c,total_balance__c,credit_sponsor_funding_date__c FROM sf_opportunity where loan_id__c IN ('25104776','2395362','245715')"

#create a cursor. the cursor will be what executes your queries
gp_cursor = gp_connection.cursor(cursor_factory=RealDictCursor)
gp_cursor.itersize = 100
gp_cursor.execute(str(query))

for row in gp_cursor:
    #print row
    sobjects = []
    sobjects.append(row)
    print sobjects
    ur = svc.upsert('loan_id__c', sobjects)
    if str(ur[sf.success]) == 'true':
        print "id " + str(ur[sf.id])
    else:
        print "error " + str(ur[sf.errors][sf.statusCode]) + ":" + str(ur[sf.errors][sf.message]) 
```

完整输出（有错误）：

```
 {'loan_id__c': '25104776', 'interest_balance__c': Decimal('188.44'),
 'number_of_payments_made__c': 29.0, 'days_past_due__c': 53.0,
 'type': 'OPPORTUNITY', 'loan_status__c': None, 
'last_payment__c': datetime.date(2012, 5, 3), 'collection_type__c': 'ACH',
 'dollars_past_due__c': Decimal('267.43'), 'total_balance__c': Decimal('297.03'),
'principal_balance__c': Decimal('278.59'), 'error_payment_count__c': 4.0,
 'credit_sponsor_funding_date__c': None, 'fee_balance__c': Decimal('190.00'),
 'last_updated_date_time__c': datetime.datetime(2012, 9, 17, 0, 0),
 'number_of_missed_payments__c': 20.0}

    Traceback (most recent call last):
      File "gp2.py", line 39, in <module>
        ur = svc.upsert('loan_id__c', sobjects)
      File "C:\Python27\beatbox.py", line 99, in upsert
        return UpsertRequest(self.__serverUrl, self.sessionId, externalIdName, sObje
    cts).post(self.__conn)
      File "C:\Python27\beatbox.py", line 294, in post
        rawRequest = self.makeEnvelope();
      File "C:\Python27\beatbox.py", line 269, in makeEnvelope
        self.writeBody(s)
      File "C:\Python27\beatbox.py", line 420, in writeBody
        self.writeSObjects(s, self.__sObjects)
      File "C:\Python27\beatbox.py", line 344, in writeSObjects
        self.writeSObjects(s, o, elemName)
      File "C:\Python27\beatbox.py", line 351, in writeSObjects
        s.writeStringElement(_sobjectNs, fn, sObjects[fn])
      File "C:\Python27\beatbox.py", line 190, in writeStringElement
        self.characters(value)
      File "C:\Python27\beatbox.py", line 210, in characters
        self.xg.characters(s)
      File "C:\Python27\lib\xml\sax\saxutils.py", line 162, in characters
        self._write(escape(content))
      File "C:\Python27\lib\xml\sax\saxutils.py", line 39, in escape
        data = data.replace("&", "&amp;")
    AttributeError: 'Decimal' object has no attribute 'replace' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T16:00:14.797

看起来 saxutils.py 想要字符串格式的数据，所以最好的选择是将所有值转换`data`为字符串类型。

```
data_as_string = {k: str(v) for k,v in data.items()} 
```

# multithreading - Ocaml：Thread.delay 没有按预期工作

> ID：13781693
> 
> 赞同：3
> 
> 时间：2012-12-08T20:37:35.010
> 
> 标签：multithreading, class, ocaml, process

我正在为一个班级项目开发一个小型反导弹模拟器。

这个想法是让不同的进程/线程相互通信。

我开始研究 Missile Laucher 应用程序。它的导弹必须是一根线。

所以这是我制作的起始代码：

```
open Missile;;

(* Name of the Station *)
let launcher_name = "Pacific";;

(* Gravitational Constant *)
let g = 9.8;;

(* Temporal Reference *)
let time = ref 0.0;;

(* Calculates the next position in time of the missile *)
let calculate_position () = 
  let nX = 10.0 *. !time and nY = (0.5) *. g**2.0 in (nX,nY);;

(* Launches the thread missile and updates its position *)
let launch mis = 
  while true do 

    let pos = mis#position () in 
    Printf.printf "%s\n" pos;

    let (a,b) = calculate_position () in
    mis#moveto (a,b);
    time := !time +. 1.0;

    (* Why isnt this working? *)
    Thread.delay 0.25 

  done;;

(* test function *)
let launchMissile () = 
  Printf.printf "Launch Station %s launched a missile. \n" launcher_name;
  let mis  = new missile "Test" 1 "USA" in
  let t1 = Thread.create launch mis in
  Thread.join t1;;

launchMissile ();; 
```

完成此操作后，我想通过随着时间的推移打印值来测试我的 CalculatePosition 函数。

但显然，没有暂停或等待，它们打印出来的速度太快了。所以我考虑在每次迭代中将线程延迟 0.25 秒。

我究竟做错了什么？我尝试了很多不同的东西。它唯一表现奇怪的 Thread.delay 函数。

我可以这样做吗？

如果您能提供帮助，那就太好了，我对此已经没有想法了……并开始重读我在 Ocaml 上的所有书籍。

如果对您分析问题也很重要，这里是我的导弹类：

```
class missile name id owner = 
object
  val mutable name = name;
  val id = id;
  val owner = owner;
  val mutable x:float = 0.0
  val mutable y:float = 0.0
  method get_x = x
  method get_y = y
  method get_point = (x,y)
  method moveto (a,b) = x <- a; y <- b
  method rmoveto (dx, dy) = x <- x +. dx ; y <- y +. dy
  method to_string () = "( " ^ "I am Missile " ^ (string_of_int id) ^ " and my owner is   " ^ (owner) ^ ")";
  method position () = "(" ^ (string_of_float x) ^ "," ^ (string_of_float y) ^ ")";
  method distance () = sqrt (x*.x +. y*.y)
end;; 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T03:39:18.810

正如 didierc 所回答的：

“对控制台输出流的并发访问总是一个问题。刷新缓冲区是通常的补救措施，否则数据会留在缓冲区中，并且在程序终止之前可能永远不会到达控制台。当多个进程或线程写入同一个终端时会出现此问题, 或者当单个进程输出到多个流都连接到同一个终端时（如 stdout 和 stderr）”

所以你应该通过添加 flush_all ();; 来做到这一点。在调用 Thread.delay 之前

（谢谢你的回答！）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T19:37:44.213

`Printf.*`函数是缓冲的（因为我认为是格式化功能），而`print_*`不是`prerr_*`。如果您替换您`printf`的 by `print_endline`，您将看到您的输出按预期发生，而无需使用`flush`缓冲区。

因此，正如我最初所说，这与缓冲区争用或并发访问无关，而只是简单的内部（而不是系统）缓冲。

顺便说一句：您不需要在方法的末尾加上分号（尽管语法接受它）。此外，表达式周围的括号在`^`运算符之间是多余的。我猜两者都是风格问题。

享受 OCaml！

# c++ - 二维复值向量初始化

> ID：13781696
> 
> 赞同：1
> 
> 时间：2012-12-08T20:37:54.373
> 
> 标签：c++, qt

我有以下内容：

```
#include <vector>
#include <complex>    

using namespace std;

vector<vector<complex> > matrix; 
```

这意味着是具有复数值的二维向量。结构的大小在编译时是未知的，所以我认为向量是一个合理的选择？

我正在使用 Qt .. 搜索没有显示任何矩阵类。有没有我应该使用的替代方案？假设二维向量是一个不错的选择。为什么会在构建时发生这种情况：

我收到以下错误：

```
error: type/value mismatch at argument 1 in template parameter list for 
       'template<class _Tp, class _Alloc> class std::vector'
error:   expected a type, got 'complex' 
```

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T20:42:34.753

`complex`是一个模板类，所以你需要专门化它。我猜你想要`float`或者`double`：

```
vector<vector<complex<double> > > matrix; 
```

# java - Java：无法打印客户端收到的字符串

> ID：13781697
> 
> 赞同：1
> 
> 时间：2012-12-08T20:37:55.713
> 
> 标签：java, serversocket

我想显示客户端接收到的图像并在服务器上显示该图像..但我保留了图像部分稍后完成，最初只是接收输入流并打印它。

问题是它正在接受客户端请求但不打印解码的字符串，即`decodedString = Base64.decodeBase64(base64Code);`

这是服务器的代码

```
import java.net.*;
import java.io.*;

import org.apache.commons.codec.binary.Base64;
import java.awt.*;

import javax.swing.*;

public class server {
private static DataInputStream dataInputStream;

private static DataOutputStream dataOutputStream;

public static void main(String[] args) throws IOException {
// create socket
ServerSocket servsock = new ServerSocket(14789);

Socket sock = servsock.accept();
dataInputStream = new DataInputStream(sock.getInputStream());
dataOutputStream = new DataOutputStream(sock.getOutputStream());
System.out.println("Accepted connection : " + sock);

String base64Code = dataInputStream.readUTF();

byte[] decodedString = null;

decodedString =  Base64.decodeBase64(base64Code);
System.out.println("Image Successfully Manipulated!" + decodedString);

if (dataOutputStream != null) {
try {
dataOutputStream.close();
} catch (IOException e) {
// TODO Auto-generated catch block
e.printStackTrace();
}
}

if (dataInputStream != null) {
try {
dataInputStream.close();
} catch (IOException e) {
// TODO Auto-generated catch block
e.printStackTrace();
}
}

sock.close();
}

public static String encodeImage(byte[] imageByteArray) {
return Base64.encodeBase64String(imageByteArray);
}
} 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T21:35:47.647

你不能只打印字节数组，代码

```
System.out.println("Image Successfully Manipulated!" + decodedString); 
```

打印类似的东西

```
Image Successfully Manipulated![B@1cd2e5f 
```

如果要将字节数组打印为字符串，则应将字节数组转换为十六进制字符串，例如：

```
public static String byteArrayToHexString(byte[] b)
{
    StringBuffer sb = new StringBuffer(b.length * 2);
    for (int i = 0; i < b.length; i++)
    {
        int v = b[i] & 0xff;
        if (v < 16)
        {
            sb.append('0');
        }
        sb.append(Integer.toHexString(v));
    }
    return sb.toString().toUpperCase();
} 
```

# php - 加入 MySQL 查询

> ID：13781703
> 
> 赞同：-1
> 
> 时间：2012-12-08T20:38:31.090
> 
> 标签：php, mysql, sql, mysqli

我无法将两个查询连接在一起，这些是我的查询：

```
$sql = "SELECT SourcePath, Description, BikeCode FROM BikeImages order by bikecode";
$sql1 = "SELECT BikeCode, Manufacturer, Model, SubType, Year, FrameMaterial, Description, Gender, Type, Price, Stock FROM Bike WHERE Stock > 0";
$result = mysqli_query($con, $sql);
$result1 = mysqli_query($con, $sql1); 
```

非常感谢您的帮助，我有几个想法可以将它们结合在一起，例如

```
$result = mysqli_query($sql && $sql1, $con); 
```

但这似乎不起作用，如果可以，我应该将两个 $sql 连接在一起吗？我该怎么做？

编辑：这些表是相关的，因为我想创建一个 while 循环，它显示 Bike 表中的所有信息，然后从 BikeImages 表中获取与每个单独的 BikeCode 相关的图像。

将表格链接在一起后，我希望使用此代码来显示我的信息：

```
while(list($bikecode, $manufacturer, $model, $subtype, $year, $fmaterial, $desc, $gender, $type, $price, $stock, $sourcepath, $description) = mysqli_fetch_row($result1)) {   
echo "information here  
} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T20:53:31.280

您应该考虑使用 a`JOIN`将这两个表连接在一起。它似乎`BikeCode`存在于两个表中，因此您应该能够加入类似于此的查询：

```
SELECT b.BikeCode, 
  b.Manufacturer, 
  b.Model, 
  b.SubType, 
  b.Year, 
  b.FrameMaterial, 
  b.Description, 
  b.Gender, 
  b.Type, 
  b.Price, 
  b.Stock,
  i.SourcePath,
  i.Description
FROM Bike b
LEFT JOIN BikeImages i
  on b.bikecode = i.bikecode
WHERE b.Stock > 0
ORDER BY b.BikeCode 
```

然后，这允许您在单个结果中返回所有数据。

如果您在学习连接语法方面需要帮助，这里有一个很好[的连接可视化解释](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T20:41:15.857

您应该使用 MySQL JOIN：[http](http://dev.mysql.com/doc/refman/5.0/en/join.html) ://dev.mysql.com/doc/refman/5.0/en/join.html 。

不要在 PHP 中进行连接。它更慢更复杂。

很好的教程在这里： http: [//www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

# java - 可继承的“通用”JUnit 4 测试套件

> ID：13781707
> 
> 赞同：0
> 
> 时间：2012-12-08T20:38:46.797
> 
> 标签：java, inheritance, junit

我想创建一个“通用”JUnit 4 测试，可以按如下方式使用：

*   它是一个**抽象基类**
*   可以**打包成jar**文件
*   用户可以将 jar 作为**依赖**项包含在自己的项目中
*   **用户可以通过扩展抽象类**并添加关键方法的实现来创建自己的 JUnit 测试
*   **当用户在他们自己的项目上运行 JUnit 时，** JUnit 测试将运行（以及用户可能编写的任何其他 JUnit 测试）
*   测试套件可能会通过运行**不同的子测试**返回多个结果，理想情况下，用户应该能够在他们的 IDE 中看到这种结果细分

这样做的动机是该类定义了一个标准测试程序，该程序可能在许多不同的项目中有用，但在每种情况下都需要用户进行一些自定义。

这对 JUnit 4 是否可行，如果可以，我应该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T20:51:08.023

是的，这是可能的。您只需创建抽象类，将其打包到 jar 中，将此 jar 提供给用户或将其存储在可以下载的地方。

然后，用户会将 jar 放入他们自己的项目中并创建抽象类的子类。他们将使用他们的 IDE（或任何其他方式）来运行这些扩展抽象类的测试类，并且 IDE 将显示所有测试的结果，通常使用树。

这看起来像是对您在问题中提出的所有问题的重复，但是这样做的方法就像您在问题中解释的那样。没有太多要补充的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T20:58:02.650

也许这可以为您提供一个起点：[为您的测试编写基类](http://etutorials.org/Programming/Java+extreme+programming/Chapter+4.+JUnit/4.16+Writing+a+Base+Class+for+Your+Tests/)。
只需将它与其他类一样装在一个罐子里，你就可以开始了。

# file - 包含大量点特征的 GeoJSON 文件

> ID：13781710
> 
> 赞同：0
> 
> 时间：2012-12-08T20:38:53.233
> 
> 标签：file, geojson, shapefile

我需要一个`GeoJSON`包含吨（500 000+）点特征的文件（例如，世界城市）。我试图用谷歌找到这样的文件，但我没有找到。任何人都可以向我提供此类文件或提供文件链接`.shp`（我将转换为`GeoJson`）吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T03:28:37.173

鲍勃，

如果您正在寻找全球覆盖的要素（即世界城市），我会推荐[natural earth dataset](http://www.naturalearthdata.com)。它以 shapefile 格式提供出色的矢量和栅格数据。您提到了从 shapefile 转换为 geojson 的能力，但如果其他人对如何执行此操作有疑问，您可以使用 Quantum GIS 导出到 geojson。

# iphone - 同一证书文件中的多个 APNS 证书

> ID：13781713
> 
> 赞同：5
> 
> 时间：2012-12-08T20:39:04.440
> 
> 标签：iphone, push, apple-push-notifications

我一直在寻找这个问题的答案，但似乎找不到。我将 PUSH 通知发送到我的应用程序的多种风格。我之前已将其设置为循环遍历每个证书并将其与用户应用程序类型匹配。实际上，我为每个证书创建了一个新的 SSL 连接，然后为该特定证书发送任何通知。

转换所有这些证书并在它们到期时安装它们有点繁琐。我可以将 KeyChain 访问中的多个证书导出为单个 p12 文件并将其转换，这有助于从证书管理的角度使事情变得更简单。问题在于没有收到我的 PUSH 通知。我可以成功连接到 APNS，反馈服务没有报告任何问题，但似乎没有任何问题。这使我相信 APNS 正在验证文件中唯一的第一个证书，并忽略任何其他允许成功连接但可能会阻止发送通知的证书。在这种情况下，我希望连接断开或反馈服务上报告的内容，但到目前为止我还没有看到。

有没有人对成功做到这一点有任何见解？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T21:47:09.177

让我重申一下：您将多个证书一起打包到一个容器/集合/任何东西中，并且您正在使用它与 APNS 建立相互身份验证的 SLL 会话。然后，您发送与任何一个证书关联的一个或多个设备的请求，但它不起作用。那准确吗？

如果是这样，那么我认为您对问题的总结是正确的。事件的顺序是在建立 SSL 会话时评估证书。这是网络协议的一部分，此时 APNS 服务器*必须*选择使用哪个证书。然后，当您发送请求时，“应用程序服务器”仅验证设备令牌包含与证书相同的帐户信息。你的场景很重要，除非 Apple 明确投入支持它，否则它不可能工作。在那种情况下，我希望它会在开发人员文档中被提及。它不是。

在这种情况下，您也不会在反馈服务中看到任何内容，因为只会为与证书中的帐户关联的设备收集/发送反馈。

顺便说一句，如果您使用的是 APNS 协议的增强格式，那么您可以在发送时读取错误响应。有关更多信息，请参阅[编程指南](http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/CommunicatingWIthAPS/CommunicatingWIthAPS.html)。

# php - 如何找到与一台主机关联的所有 ip？

> ID：13781714
> 
> 赞同：0
> 
> 时间：2012-12-08T20:39:07.120
> 
> 标签：php, linux, tcp, dns, ip

我想查找特定主机的所有 IP，例如 yahoo.com 或 facebook.com 我知道他们有多个 IP。什么是最好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T20:44:30.890

我认为您在 PHP 中寻找的是[`dns_get_record`](http://php.net/manual/en/function.dns-get-record.php). 它将获取实际的 DNS 记录，其中*可以*包括多个 IP 地址（`A`记录）。请注意，由于基于 DNS 的负载平衡解决方案，这可能并不总是为您提供*所有IP。*

来自 PHP.net 的示例：

```
<?php
$result = dns_get_record("php.net");
print_r($result);
?> 
```

输出：

```
Array
(
    [0] => Array
        (
            [host] => php.net
            [type] => MX
            [pri] => 5
            [target] => pair2.php.net
            [class] => IN
            [ttl] => 6765
        )

    [1] => Array
        (
            [host] => php.net
            [type] => A
            [ip] => 64.246.30.37
            [class] => IN
            [ttl] => 8125
        )

) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T20:41:42.850

您可以做的只是查找 A 和 AAAA 记录。我假设你想用 Linux 来做这件事，因为那是标签之一。为此，您可以运行类似`dig yahoo.com`. 有关更多详细信息，请查看`man dig`。如果还没有`dig`安装，可以用包管理器安装。

对于 PHP，请查看该`dns_get_record()`函数。

请注意，有时，大公司对多台机器使用相同的 IP。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T21:36:35.793

您应该尝试*dig*，这是[BIND](https://en.wikipedia.org/wiki/BIND)套装的一部分。它是探索域名系统的绝佳工具。

绑定到特定域的 IP 地址列在 ANSWER SECTION 下。此外，您还会获得相关 DNS 服务器及其地址的列表。

**例子：**

```
$ dig yahoo.com
...

;; QUESTION SECTION:
;yahoo.com.             IN  A

;; ANSWER SECTION:
yahoo.com.      2131    IN  A   98.138.253.109
yahoo.com.      2131    IN  A   98.139.183.24
yahoo.com.      2131    IN  A   72.30.38.140

;; AUTHORITY SECTION:
yahoo.com.      65928   IN  NS  ns4.yahoo.com.
...

ns4.yahoo.com.  65928   IN  A   68.142.196.63
... 
```

# android - iOS/Android 是否可以知道用户何时触摸了广告？

> ID：13781717
> 
> 赞同：2
> 
> 时间：2012-12-08T20:39:30.773
> 
> 标签：android, ios, events, analytics, ads

我被要求在我正在开发的应用程序上添加分析内容，我需要跟踪的事件之一是：**当用户触摸 AD 时，用户在应用程序的哪个屏幕上**。

这对我来说似乎很奇怪，我认为不可能以可靠的方式做到这一点。我尝试在网上查找，但没有运气。

我们正在使用多个广告网络，所以我想添加一些事件来跟踪用户何时离开应用程序（广告通常会这样做）。

**任何人都知道更好的方法来做到这一点，或者甚至是否可以通过任何广告网络做到这一点？**

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T20:50:45.760

我将为 IOS 发言，但我相信在 android 中也是可能的。在IOS上，检查广告框架是否有任何委托方法，任何流行的都应该。如果您自己滚动，只需将自己的委托方法添加到框架中。例如，iAds 具有以下委托方法：

```
- (BOOL)bannerViewActionShouldBegin:(ADBannerView *)banner willLeaveApplication:(BOOL)willLeave 
```

当用户点击广告时调用此方法。我假设您知道如何跟踪应用程序所在的视图，使用 viewDidAppear 并将当前最后加载的页面保存在某处以供以后访问。然后，您可以在上述委托方法或您使用委托方法的任何框架内将该页面名称提交给您的分析。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T20:52:25.333

当应用程序进入后台时，在广告点击事件之后[点击广告时**设置一个全局布尔值** ]

在应用程序进入后台时调用的方法内部：

**if（设置了全局布尔值）**

*   获取当前[活动](https://stackoverflow.com/questions/3873659/android-how-can-i-get-the-current-foreground-activity-from-a-service)/[视图控制器](https://stackoverflow.com/questions/2635469/how-can-i-know-current-viewcontroller-name-in-iphone)名称
*   将其存储在[共享首选项](https://stackoverflow.com/questions/3624280/how-to-use-sharedpreferences-in-android-to-store-fetch-and-edit-values)/[文件中](https://stackoverflow.com/questions/1283774/saving-a-string-into-file-in-objective-c-iphone)

当应用程序恢复时，**重置全局布尔值。**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T21:11:28.287

为什么不只是让每个不同的视图成为不同的站点，即为每个视图中的广告赋予不同的 ID。如果您有多个应用程序/或很多视图，设置它会有点痛苦，但我认为它应该可以工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-08T20:44:21.357

如果你从另一个角度来看，这很简单。制作 2 个不同的广告，每个广告都在不同的屏幕上。然后看看每一个的分析。你能告诉我你在用什么，C#还是flash？在 Flash 中，有一个函数在用户离开应用程序时执行。

闪光：

```
NativeApplication.nativeApplication.addEventListener(Event.DEACTIVATE , handleDeactivate, false, 0, true);

 function handleDeactivate(event:Event):void {
     //the app is now losing focus
 }

 NativeApplication.nativeApplication.addEventListener(Event.ACTIVATE, handleActivate, false, 0, true);

 function handleActivate(event:Event):void {
    //app is starting
 } 
```

我记得还有另一种方式，但当时没有来找我。

# python - pbkdf2 VS bcrypt，回合？

> ID：13781737
> 
> 赞同：2
> 
> 时间：2012-12-08T20:42:07.540
> 
> 标签：python, bcrypt, pbkdf2

我有一个愚蠢的问题（可能已经被问过了）：

人们总是比较**BCrypt**和**PBKDF2**并说**BCrypt**更好，因为例如使用**GPU**速度较慢，但​​他们忽略了`Rounds value`，尤其是当我谈论**Python**时，**BCrypt**并不强大，所以我的问题很简单：

[测试使用了优秀的**python**库**Passlib**](http://pypi.python.org/pypi/passlib)

即使是很小的整数值也值得使用**BCrypt吗？**在 Passlib 中，默认值是`12`,tested 并给了我`0.40 seconds`，而**PBKDF2**给了我默认值是`12000`rounds：`0.142 seconds`

例如，如果我只使用 5 轮的 BCrypt，我会说：嘿，我的应用程序比使用 12000 轮的 PBKDF2 更安全 - 更快！（我知道这似乎很愚蠢，对不起）。

[这是基准测试结果](https://stackoverflow.com/questions/13545677/python-passlib-what-is-the-best-value-for-rounds)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T16:23:42.737

请注意，bcrypt 中的实际迭代次数为 2^rounds，例如 rounds=5 -> iterations=32，默认的 rounds=12 -> iterations=4096。在比较 bcrypt 和 pbkdf2 时，请确保它们在说“回合”时表示相同的意思。

bcrypt 的一般规则是使用您能负担得起的轮次的最大值，因为用户登录不会非常慢。您对 0.4 秒的测试听起来好像是对的。

# cuda - CUDA 如何将设备 ID 分配给 GPU？

> ID：13781738
> 
> 赞同：34
> 
> 时间：2012-12-08T20:42:14.390
> 
> 标签：cuda, gpu, gpgpu, nvidia

当一台计算机有多个支持 CUDA 的 GPU 时，每个 GPU 都被分配一个`device ID`. 默认情况下，CUDA 内核在`device ID 0`. 您可以使用`cudaSetDevice(int device)`来选择不同的设备。

假设我的机器中有两个 GPU：一个 GTX 480 和一个 GTX 670。CUDA**如何确定哪个 GPU 是`device ID 0`哪个 GPU 是`device ID 1`？**

* * *

关于 CUDA 如何分配设备 ID 的想法（只是头脑风暴）：

*   计算能力降序
*   PCI 插槽号
*   设备添加到系统的日期/时间（刚刚添加到计算机的设备的 ID 号较高）

* * *

**动机**：我正在研究一些 HPC 算法，我正在为几个 GPU 进行基准测试和自动调整。我的处理器有足够的 PCIe 通道以全带宽将 cudaMemcpys 驱动到 3 个 GPU。因此，我打算在我的计算机中只保留 3 个 GPU，而不是不断地在我的机器中进出 GPU。我希望能够预测当我在计算机中添加或更换一些 GPU 时会发生什么。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2017-03-31T02:47:25.027

将环境变量设置`CUDA_DEVICE_ORDER`为：

```
export CUDA_DEVICE_ORDER=PCI_BUS_ID 
```

然后 GPU ID 将按 pci 总线 ID 排序。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-12-09T08:21:08.967

CUDA 选择最快的设备作为设备 0。因此，当您交换 GPU 时，顺序可能会完全改变。使用以下方法根据 PCI 总线 ID 选择 GPU 可能会更好：

```
cudaError_t cudaDeviceGetByPCIBusId ( int* device, char* pciBusId )
   Returns a handle to a compute device.

cudaError_t cudaDeviceGetPCIBusId ( char* pciBusId, int  len, int  device )
   Returns a PCI Bus Id string for the device. 
```

或 CUDA 驱动程序 API `cuDeviceGetByPCIBusId` `cuDeviceGetPCIBusId`。

但是 IMO 知道哪个设备是哪个设备的最可靠方法是使用[NVML](http://developer.nvidia.com/nvidia-management-library-nvml)或[nvidia-smi](https://developer.nvidia.com/nvidia-system-management-interface)来获取每个设备的唯一标识符 (UUID) 使用`nvmlDeviceGetUUID`，然后使用 CUDA 设备与 pciBusId 匹配`nvmlDeviceGetPciInfo`。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-09-09T10:36:54.857

[CUDA 支持/选择](https://www.cs.virginia.edu/~csadmin/wiki/index.php/CUDA_Support/Choosing_a_GPU)GPU建议

> 在具有多个 GPU 的机器上运行 CUDA 程序时，默认情况下，CUDA 内核将在主显卡插槽中安装的任何 GPU 上执行。

另外，[没有选择 GPU 的讨论，代码工作正常，这怎么可能？](https://devtalk.nvidia.com/default/topic/605113/cuda-programming-and-performance/no-gpu-selected-code-working-properly-hows-this-possible-/?offset=11#3939141)建议 CUDA 通常不会将“最佳”卡映射到设备 0。

**编辑**

今天我安装了一台带有用于计算的 Tesla C2050 卡和用于可视化的 8084 GS 卡的 PC，在前两个 PCI-E 插槽之间切换它们的位置。我使用了 deviceQuery 并注意到 GPU`0`始终位于第一个 PCI 插槽中，而 GPU`1`始终位于第二个 PCI 插槽中。我不知道这是否是一般性陈述，但它证明了我的系统 GPU 的编号不是根据其“功率”，而是根据其位置。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-09-22T11:18:26.697

我发现（在 中测试`tensorflow==2.3.0`）的最佳解决方案是在可能导入的任何内容之前添加以下内容`tensorflow`：

```
import os
os.environ["CUDA_DEVICE_ORDER"]="PCI_BUS_ID"
os.environ["CUDA_VISIBLE_DEVICES"]="0,3"  # specify which GPU(s) to be used 
```

这样，TensorFlow 对 GPU 的排序顺序将与`nvidia-smi`或等工具报告的顺序相同`nvtop`。

# php - 试图将数组重置为行的第一个值

> ID：13781739
> 
> 赞同：1
> 
> 时间：2012-12-08T20:42:15.887
> 
> 标签：php

我正在编写一个函数来显示带有编辑和删除数据选项的表格。我需要这些表几次，所以这就是我制作函数的原因。

这是调用函数的方式：

```
listSpecific(customer, array("CustomerID", "Forename", "Surname", "Email", "Secret Q", "Secret A", "Street", "City", "Postcode", "Type"), array("customerid", "forename", "surname", "email", "secretQ", "secretA", "address_street", "address_city", "address_postcode", "member_type")); 
```

这是完整的功能：

```
function listSpecific($DBname, $titles=array(), $values=array()){
$numValues = count($values);
$i=0;
$sql = "SELECT ";

//Construct SQL Statement
foreach ($values as $val)
{
    //Last Element of the array
    if(++$i === $numValues){
        $sql .= $val;
        $sql .= " ";
    }
    else{
        //The rest of the array elements
        $sql .= $val;
        $sql .= ", ";    
    }

}

$sql .= "FROM $DBname;";

//End of Constructing SQL Statement

// Execute Query
$result = mysql_query($sql) or die("An error has ocured: " . mysql_error() . ":" . mysql_errno());

//Construct table
$list = "<table>";
$list .= "<tr>";

//Cycle through array elements to get table headers
foreach ($titles as $title) {
    $list .= "<th>$title</th>";
}

$list .= "<th>";
$list .= "Task";
$list .= "</tr><tr>";

$numValues = count($values);
$i=0;
//Construct the rest of the table [NOT WORKING]
while ($table = mysql_fetch_array($result)) {

    $item = array();
    foreach($values as $val){
        //Last Element of the array
        if(++$i === $numValues){
            $list .= "<td>";
        $item = $table[$val];
        $list .= $item;
        $list .= "</td>"; 

        //Get the Item ID
        $firstElement = reset($table);
        $list .= "<td><a href=\"users.php?task=delete&user=$firstElement\">Delete</a></td></tr>";
        }
        else{
            //The rest of the array elements
        $list .= "<td>";
        $item = $table[$val];
        $list .= $item;
        $list .= "</td>";   
        }

    }
}

echo $list; 
```

}

问题是创建一个删除超链接，因为我需要将传递给 URL 的用户 ID。

问题出在这一行：

```
 //Get the Item ID
        $firstElement = reset($table);
        $list .= "<td><a href=\"users.php?task=delete&user=$firstElement\">Delete</a></td></tr>"; 
```

我明白为什么会出错，它会回到数组的第一项，即用户 ID。但它必须是该行唯一的。

例如，在第一行，用户 ID 是 57。但在下一行 58 上，超链接发生了变化。

一个廉价的解决方案是每次在 while 循环中返回 11 个值，然后从它停止的地方继续。这怎么可能实现？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T21:00:04.133

如果您希望主键列始终是`$values`数组的第一个元素，那么您可以将其称为`$values[0]`. 那是，

```
while ($table = mysql_fetch_array($result)) {
    foreach($values as $val) {
        $list .= '<td>'.$table[$val].'</td>';
    }
    $list .= '<td><a href="users.php?task=delete&user='.$table[values[0]].'">Delete</a></td></tr>';
} 
```

我还在我认为合适的地方整理了循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T21:03:43.170

您应该改用`array_shift`并将 $firstElement 赋值放在第一个循环中。

```
$firstElement = array_shift($table); 
```

`array_shift`返回第一个元素而不重置数组中的索引。

# php - PHP：$_SESSION 变量未传递到下一个网页

> ID：13781743
> 
> 赞同：2
> 
> 时间：2012-12-08T20:42:38.930
> 
> 标签：php, html, mysql, session

我在尝试将我的用户名变量从登录页面传递到下一个“欢迎”页面时遇到问题。**我正在使用我大学的**服务器托管网页，因此可以在 public_html 文件夹中访问我的网页文件。

在 login.php 页面上进行测试时，我可以打印会话中保存的用户名，但是当我在成员页面中尝试相同时，它不会打印会话数组中保存的用户名？我检查了所有其他帖子，但似乎没有解决方案有效。

**登录.php**

```
<?php
session_start();
include ('connect.php');
$userName=$_POST['username']; 
$password=$_POST['password'];  
$result = mysql_query("SELECT * FROM users WHERE username='$userName' AND password='$password'") or die ('Query is invalid: ' . mysql_error());;
$count =  mysql_num_rows($result);

if($count==1)
{
$_SESSION['username']=$userName;
header("Location: memberPage.php");
} else {
echo "Incorrect username or password";
}
?> 
```

**memberLogin.php**

```
<?php
session_start();
include ('connection.php');

$_SESSION['username'] = $userName;
echo $userName;

//$result = mysql_query("SELECT * FROM users");
//while ($row = mysql_fetch_array($result)) {
//    echo $row['username'];
//}
?> 

<html>
<link rel="stylesheet" type="text/css" href="style.css" />

<div id = main-nav>
<a href="http://www.cs.nott.ac.uk/~rxp00u/logout.php" >Logout</a> 
</div>
</html> 
```

PS 我意识到我的代码不是很安全，在网站的基本框架正常工作后，我将继续努力！

编辑：login.php 上的错误报告显示以下错误：“警告：未知：打开（/var/lib/php5/sess_d760m9ebgose4liptp6jbgbc17nqjgg4，O_RDWR）失败：第 0 行未知中的权限被拒绝（13）警告：未知：写入失败会话数据（文件）。请在第 0 行的 Unknown 中验证 session.save_path 的当前设置是否正确（/var/lib/php5）"

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T20:45:32.543

```
<?php
session_start();
include ('connection.php');

$_SESSION['username'] = $userName;
echo $userName; 
```

$userName 未设置。如果你有错误，你会看到的。你的意思

```
$userName = $_SESSION['username'];
echo $userName; 
```

?

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T20:46:21.923

在**memberLogin.php**上，您正在设置：

`$_SESSION['username'] = $userName;`

哪里`$userName`是未定义的。看来，如果您可以成功分配`$userName`给**Login.php**`$_SESSION`上的变量，则不再需要设置该变量。调用后即可访问。**`session_start();`**

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T20:46:32.733

在 memberLogin 中，应该是：

```
$username = $_SESSION['username']; 
```

赋值是左关联的，这意味着 右边的值`=`被赋值给左边的变量`=`。您当前的设置让您用 null 覆盖您的会话值。**

# linux - “make install”时 Binutil 中的权限错误

> ID：13781746
> 
> 赞同：1
> 
> 时间：2012-12-08T20:43:02.593
> 
> 标签：linux, compiler-errors, makefile, binutils, linux-from-scratch

我正在开发 LFS7.2。在“make install”binutil 包时出现权限错误，但我可以成功地使用用户 lfs 在所有 3 个目录（源、工具、usr）中创建文件夹。我回滚并重新执行了 4.1 到 4.4 的章节，但我仍然面临这个问题。

**

```
lfs@logun-HP-Pavilion-dv6-Notebook-PC:/mnt/lfs/sources/binutils-build$ make install
make[1]: Entering directory `/mnt/lfs/sources/binutils-build'
/bin/sh ../binutils-2.22/mkinstalldirs /tools--with-sysroot=/mnt/lfs--with-lib-path=/tools/lib--target=i686-lfs-linux-gnu /tools--with-sysroot=/mnt/lfs--with-lib-path=/tools/lib--target=i686-lfs-linux-gnu
mkdir -p -- /tools--with-sysroot=/mnt/lfs--with-lib-path=/tools/lib--target=i686-lfs-linux-gnu /tools--with-sysroot=/mnt/lfs--with-lib-path=/tools/lib--target=i686-lfs-linux-gnu
mkdir: cannot create directory `/tools--with-sysroot=': Permission denied
mkdir: cannot create directory `/tools--with-sysroot=': Permission denied
make[1]: *** [installdirs] Error 1
make[1]: Leaving directory `/mnt/lfs/sources/binutils-build'
make: *** [install] Error 2
lfs@logun-HP-Pavilion-dv6-Notebook-PC:/mnt/lfs/sources/binutils-build$ 
```

**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-17T18:44:39.730

我尝试使用 live CD 构建 LFS v6.3 并遇到了完全相同的问题。我认为问题在于，在第 5 章中，手册假定您的工具目录将是 /tools，但在上一章中，您被告知配置构建环境以使用 $LFS/tools（映射到 /mnt/lfs/tools 并且是当然与 /tools 不同）。这还不清楚，因为在那一章之前的所有内容都是一个演练，告诉你要输入哪些命令，然后从第 5 章开始，缺少一些关键步骤，并且似乎已经对构建环境做出了不同的假设，或者可能是谁编写了第 5 章5 没有参考前面的章节就这样做了。

# cuda - CUDA：从节点构建图

> ID：13781749
> 
> 赞同：0
> 
> 时间：2012-12-08T20:43:07.507
> 
> 标签：cuda, parallel-processing, gpgpu

我正在使用 CUDA 从节点列表构建无向图。每个节点都有一个 3 维坐标，如果节点之间的距离小于某个截止距离 d，我的程序会在两个节点之间创建一条边。

现在我以邻接表的形式存储边缘。问题是，我有 1024 个线程异步计算成对距离。一旦在节点 A 和 B 之间“发现”一条边，我需要增加节点 A 的边数并将节点 B 放在邻接列表中的“下一个可用”位置。

在这里，CUDA 让我做噩梦。我希望邻接列表更新过程至关重要，但 CUDA 似乎没有提供任何超出 atomicAdd() 的功能。结果，每次运行代码时，我都会遇到不可预知的行为和不同的邻接列表。

有没有办法异步创建邻接列表？也许通过更聪明的数据结构？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T01:04:37.310

如果节点的数量足够大，我会将一个线程映射到一个节点，因此每个节点都会计算到所有其他节点的距离并将它们存储到其私有邻接列表中。在这种情况下，如果定义了计算顺序（通过节点列表的排序来完成），则不会发生不确定性。一些代码：

```
for(int i = 0; i < listOfNodes.length(); i++)
    if(dist(listOfNodes[threadId], listOfNodes[i]) < cutoffDist) {
        int n = adjacencyLists_sizes[threadId]++;
        adjacencyLists[threadId][n-1] = listOfNodes[i];
    } 
```

如果节点数量不够大（我想是使用 CUDA），您可以在一个块的线程之间划分一个节点和所有其他节点之间的计算，每个线程计算相等部分的距离。使用`__syncthreads()`确保确定性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T20:06:06.593

[您可以用前缀扫描](http://http.developer.nvidia.com/GPUGems3/gpugems3_ch39.html)替换 atomicAdd()以产生可重现的结果。或者，您可以在单独的步骤中对结果进行排序。

# java - Java 布尔查询

> ID：13781756
> 
> 赞同：0
> 
> 时间：2012-12-08T20:43:48.780
> 
> 标签：java, boolean

我想在控制台中接受用户输入，例如“keyword1 and keyword2”或“keyword1 and (keyword2 or keyword3)”

然后我想解释它并将其转换为布尔值以查询数组中的关键字。

它必须处理“and”、“or”和“()”括号。

我宁愿不使用第三方库，但如果没有简单的方法，我会接受。我开始研究 Lucene，但它似乎对我的需求很复杂，我希望能够查询数组而不是文档。

编辑：注意我对编程比较陌生，所以首选更简单的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T20:46:42.953

您需要一个解析器，但如果您将输入包装在可以生成有效类的代码中，您可以考虑使用 java 编译器本身。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T20:57:03.477

[您可以使用JavaCC](http://javacc.java.net/)等编译器的编译器。它可以生成 java 代码，而不是用您自己的语法解析表达式并解释它。在这种情况下，您不应该使用外部库。

[JavaCC上有](http://www.javaworld.com/jw-12-2000/jw-1229-cooltools.html?page=3)算术计算器的例子。

# c++ - 当您尝试使用 arr = {values}; 将值分配给数组时，为什么会发生错误？

> ID：13781757
> 
> 赞同：0
> 
> 时间：2012-12-08T20:44:16.027
> 
> 标签：c++, c, arrays, variable-assignment

为什么不允许在 C（或 C++）中使用它？

我的意思是：

```
ucell GetPlayerPosPositionData[5];
GetPlayerPosPositionData = {4*sizeof(cell),playerid,0,sizeof(cell),2*sizeof(cell)};//this does not work, error

//normal assignment
GetPlayerPosPositionData[1] = playerid;
GetPlayerPosPositionData[2] = 0;
GetPlayerPosPositionData[3] = sizeof(cell);
GetPlayerPosPositionData[4] = 2*sizeof(cell); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T20:48:40.303

因为数组是不可分配的。您可以在声明时初始化它们，也可以基于每个元素分配它们，仅此而已。这会起作用：

```
ucell GetPlayerPosPositionData[] = {4*sizeof(cell),
                                    playerid,
                                    0,
                                    sizeof(cell),
                                    2*sizeof(cell)}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T20:52:40.127

因为语法说它是不允许的？问题有两个部分：

1.  除了在初始值设定项中或（在 C99 中）在复合文字中之外，您不能使用初始值设定项语法。

2.  您不能分配整个数组。

在 C99 中，您可以将数组传递给函数：

```
typedef unsigned int cell;

extern void some_func(cell data[]);

extern void func(void);

void func(void)
{
    cell playerid = 0;
    some_func((cell[]){4*sizeof(cell),playerid,0,sizeof(cell),2*sizeof(cell)});
} 
```

`cell`（你的问题在vs上不清楚`ucell`；我选择`cell`自始至终使用。）

你仍然不能做数组赋值。如果数组包含在结构中，您可以执行结构分配，巧合的是，分配包含的数组。但这是一个结构赋值，而不是一个数组赋值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T20:48:43.617

该语法用于对数组进行列表初始化。它只能用作数组声明的初始化器：

```
ucell GetPlayerPosPositionData[5] = {4*sizeof(cell),playerid,0,sizeof(cell),2*sizeof(cell)}; 
```

另一种方法是单独分配给每个元素：

```
ucell GetPlayerPosPositionData[5];
GetPlayerPosPositionData[0] = 4 * sizeof(cell);
GetPlayerPosPositionData[1] = playerid;
GetPlayerPosPositionData[2] = 0;
GetPlayerPosPositionData[3] = sizeof(cell);
GetPlayerPosPositionData[4] = 2 * sizeof(cell); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-09T00:11:53.567

我会让语言律师对此进行辩论。假设`array`被声明为`int array[4]`，并且您希望分配给它。然后考虑：

```
* (struct t { int array[4]; } *) array = (struct t) {{ 0, 1, 2, 3 }}; 
```

# delphi - Internet Explorer COM 自动化对象在可见性更改时刷新

> ID：13781759
> 
> 赞同：4
> 
> 时间：2012-12-08T20:44:20.040
> 
> 标签：delphi, internet-explorer, com

在 Delphi 应用程序中，我使用 TWebBrowser（它是 Internet Explorer 的 COM 对象的包装器）来创建 UI。

当我更改托管 TWebBrowser 的窗口的可见性时，例如：当我将其最小化到托盘时，TWebBrowser 会触发页面刷新，从而导致 TWebBrowser 上显示的页面失去其状态。

当我最小化窗口和恢复它时都会发生这种情况。

有没有办法覆盖这种行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-10T19:19:38.200

使用以下资源之一进行故障排除：

*   [如果您最小化浏览器窗口，然后从 Internet Explorer 7 的任务栏中将其最大化，则焦点不会设置到网页](http://support.microsoft.com/kb/936949)
*   [Window.focus 方法在 Internet Explorer 8 中不起作用](http://support.microsoft.com/kb/979954)

# python - 比使用 Flask 推送到 Heroku 更快

> ID：13781761
> 
> 赞同：0
> 
> 时间：2012-12-08T20:44:25.023
> 
> 标签：python, heroku, flask

我一直在通过推动 Heroku 进行开发——这有点耗时。

什么是更快的开发方法 - 使用 Flask？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T22:19:04.167

在自己的机器上开发最简单的方法是在本地运行它：

```
$ cd directory/containing/your/project
your/project$ python your_flask_app.py
* Running on 127.0.0.1:5000 
```

确保您的`app.run`调用将关键字参数`debug`设置为，`True`以便在您编辑应用程序时自动重新加载。（例如`app.run(debug=True)`）。

您现在可以在浏览器中访问 localhost:5000 并编辑磁盘上的文件并立即查看更改（和错误）。

如果您的本地计算机上尚未安装 Flask，则可能会失败并显示`ImportError`. 在这种情况下，只需确保您的机器上安装了 virtualenv 和 pip，然后执行以下操作：

```
# Linux / Mac
your/project$ virtualenv --distribute venv
your/project$ source venv/bin/activate  # Alternately, you can use the . command
(venv) your/project$ pip install -r requirements.txt
(venv) your/project$ python your_flask_app.py

# Windows
your/project> virtualenv --distribute venv
your/project> venv\Scripts\activate
(venv) your/project> pip install -r requirements.txt
(venv) your/project> python your_flask_app.py 
```

# geometry - 几何着色器失真

> ID：13781764
> 
> 赞同：1
> 
> 时间：2012-12-08T20:45:04.743
> 
> 标签：geometry, directx, shader, hlsl

我正在使用 ParticleGS DirectX10 示例，在 DirectX 11 中构建基于几何着色器的粒子系统。

使用示例代码并根据自己的喜好进行更改，我可以绘制一个四边形（本质上是一个不断重新创建自身的粒子）。

这是我的着色器代码：

```
//Single particle stream-out shader which uses ping-pong buffers.
//Based on DirectX sample ParticlesGS

struct VSParticleIn
{
    float3 pos              : POSITION;         
    float3 vel              : NORMAL;           
    float  Timer            : TIMER;            
    uint   Type             : TYPE;     //Only one type for the moment.         
};

struct VSParticleDrawOut
{
    float3 pos : POSITION;
    float4 color : COLOR0;
    float radius : RADIUS;
};

struct PSSceneIn
{
    float4 pos : SV_Position;
    float2 tex : TEXTURE0;
    float4 color : COLOR0;
};

cbuffer cbRenderParticle
{
    float4x4 g_mWorldViewProj;
    float4x4 g_mInvView;
};

cbuffer cbAdvanceParticle
{
    float g_fGlobalTime;
    float g_fElapsedTime;
    float4 g_vFrameGravity;
    float g_fSecondsPerFirework = 1.0;
};

cbuffer cbImmutable
{
    float3 g_positions[4] =
    {
        float3( -1, 1, 0 ),
        float3( 1, 1, 0 ),
        float3( -1, -1, 0 ),
        float3( 1, -1, 0 ),
    };
    float2 g_texcoords[4] = 
    { 
        float2(0,1), 
        float2(1,1),
        float2(0,0),
        float2(1,0),
    };
};

Texture2D g_txDiffuse;
SamplerState g_samLinear
{
    Filter = MIN_MAG_MIP_LINEAR;
    AddressU = Clamp;
    AddressV = Clamp;
};

Texture1D g_txRandom;
SamplerState g_samPoint
{
    Filter = MIN_MAG_MIP_POINT;
    AddressU = Wrap;
};

RasterizerState mainState {
    FillMode = Solid;
    CullMode = None;
    FrontCounterClockwise = false;
};

BlendState AdditiveBlending
{
    AlphaToCoverageEnable = FALSE;
    BlendEnable[0] = TRUE;
    SrcBlend = SRC_ALPHA;
    DestBlend = ONE;
    BlendOp = ADD;
    SrcBlendAlpha = ZERO;
    DestBlendAlpha = ZERO;
    BlendOpAlpha = ADD;
    RenderTargetWriteMask[0] = 0x0F;
};

BlendState NoBlending
{
    AlphaToCoverageEnable = FALSE;
    BlendEnable[0] = FALSE;
};

DepthStencilState DisableDepth
{
    DepthEnable = FALSE;
    DepthWriteMask = ZERO;
};

DepthStencilState DSSLess
{
    DepthEnable = TRUE;
    DepthWriteMask = ALL;
    StencilEnable = TRUE;
    StencilReadMask = 0;
    StencilWriteMask = 0;

    FrontFaceStencilFunc = ALWAYS;
    FrontFaceStencilDepthFail = INVERT;
    FrontFaceStencilPass = KEEP;
    FrontFaceStencilFail = KEEP;

    BackFaceStencilFunc = ALWAYS;
    BackFaceStencilDepthFail = INVERT;
    BackFaceStencilPass = KEEP;
    BackFaceStencilFail = KEEP;

    DepthFunc = LESS;
};

VSParticleDrawOut RenderSceneVS(VSParticleIn input)
{
    VSParticleDrawOut output = (VSParticleDrawOut)0;
    output.pos = input.pos;
    output.radius = 3;
    output.color = float4(1,1,1,1);
    return output;
}

VSParticleIn PassthroughVS(VSParticleIn input)
{
    return input;
}

float3 RandomDir(float fOffset)
{
    float tCoord = (g_fGlobalTime + fOffset) / 300.0;
    return g_txRandom.SampleLevel( g_samPoint, tCoord, 0 );
}

[maxvertexcount(128)]
void AdvanceParticlesGS(point VSParticleIn input[1], inout PointStream<VSParticleIn> ParticleOutputStream)
{
    //Just keeps emitting itself.
    ParticleOutputStream.Append( input[0] );
}

[maxvertexcount(4)]
void RenderSceneGS(point VSParticleDrawOut input[1], inout TriangleStream<PSSceneIn> SpriteStream)
{
    PSSceneIn output;

    for(int i=0; i<4; i++)
    {
        float3 position = g_positions[i]*input[0].radius;
        //position = mul( position, g_mInvView ) + input[0].pos;
        output.pos = mul( float4(position,1.0), g_mWorldViewProj );

        output.color = input[0].color;
        output.tex = g_texcoords[i];
        SpriteStream.Append(output);
    }
    SpriteStream.RestartStrip();
}

float4 RenderScenePS(PSSceneIn input) : SV_Target
{   
    return g_txDiffuse.Sample( g_samLinear, input.tex ) * input.color;
}

technique10 RenderParticles
{
    pass p0
    {
        SetVertexShader( CompileShader( vs_4_0, RenderSceneVS() ) );
        SetGeometryShader( CompileShader( gs_4_0, RenderSceneGS() ) );
        SetPixelShader( CompileShader( ps_4_0, RenderScenePS() ) );

        SetBlendState( AdditiveBlending, float4( 0.0f, 0.0f, 0.0f, 0.0f ), 0xFFFFFFFF );
        SetRasterizerState( mainState );
        SetDepthStencilState( DSSLess, 0 );
    }  
}

GeometryShader gsStreamOut = ConstructGSWithSO( CompileShader( gs_4_0, AdvanceParticlesGS() ), "POSITION.xyz; NORMAL.xyz; TIMER.x; TYPE.x" );
technique10 AdvanceParticles
{
    pass p0
    {
        SetVertexShader( CompileShader( vs_4_0, PassthroughVS() ) );
        SetGeometryShader( gsStreamOut );
        SetPixelShader( NULL );

        SetRasterizerState( mainState );
        SetDepthStencilState(DisableDepth, 0);
    }  
} 
```

但是，我注意到一个与我曾经遇到过的问题相似的问题：**渲染的形状是扭曲的**。这是一个展示正在发生的事情的视频。[http://youtu.be/6NY_hxjMfwY](http://youtu.be/6NY_hxjMfwY)

现在，当我意识到我需要将几何着色器显式设置为 null 以用于其他效果时，我曾经在一起使用多个效果时遇到过这个问题。正如您在视频中看到的那样，我解决了这个问题，因为场景的其余部分正在正确绘制。请注意，尽管我在主渲染状态下关闭了剔除，但某些边会以某种方式被剔除。

单独运行，着色器具有相同的行为。其他着色器似乎不会干扰它。

我的问题是，什么会导致四边形失真？我验证了我的转换矩阵，它们似乎是正确的。**失真的原因可能是什么？或者常见的原因是什么？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T16:57:38.067

我终于有了解决办法！问题在于 RenderSceneGS 几何着色器。矩阵应该以另一个顺序相乘，即

```
output.pos = mul( g_mWorldViewProj, float4(position,1.0)); 
```

我觉得这很奇怪，因为与顶点着色器中的矩阵乘法相比，这个顺序实际上是相反的。有人告诉我这是由于矩阵是如何存储在内存中的，但是，关于这个问题的性质，我没有更多信息。

# php - PHP 致命错误

> ID：13781765
> 
> 赞同：-3
> 
> 时间：2012-12-08T20:45:08.850
> 
> 标签：php, fatal-error

完整错误：

```
Fatal error: Uncaught exception 'Exception' with message 'DateTime::__construct()
[<a href='datetime.--construct'>datetime.--construct</a>]: Failed to parse time
string (Next log in) at position 0 (N): The timezone could not be found in the
database' in /home/bd92/public_html/login.php:144 Stack trace:
#0 /home/bd92/public_html/login.php(144): DateTime->__construct('Next log in')
#1 {main} thrown in /home/bd92/public_html/login.php on line 144 
```

此错误发生在此行：

`$unbanned = new Datetime($dbunbanned);`

它进入数据库，并在用户被取消禁止时获取。

然后它会生成一个日期时间，以便我可以将其与当前日期进行比较，并查看禁令是否已过期，但我收到此错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T20:50:52.517

使用[DateTime](http://php.net/manual/en/class.datetime.php)类时，您必须提供默认时区。如果不是，您将收到一个致命错误。

```
date_default_timezone_set('America/New_York'); 
```

# php - Zend 2.0 查询路由

> ID：13781767
> 
> 赞同：0
> 
> 时间：2012-12-08T20:45:18.403
> 
> 标签：php, zend-framework2, zend-framework-mvc, zend-framework-routing

您好，我正在使用 ZendFramework 2.0，我想使用查询参数设置路由。例如，我想要这样的东西开始工作。

> 我想要匹配**.../foo?my_param=number**但不匹配**.../foo**或**.../foo?not_allowed_pa​​ram=value 的路由**

```
'type' => 'Literal',
'options' => array(
    'route' => 'foo',
    'defaults' => ...// Route to some error handler
    'may_terminate' => true,
    'child_routes' => array(
        'query' => array(
             // there is some query so route to my action
            'type' => 'Query',
            'options' => array(
                'defaults' => array(
                    'controller' => 'index',
                    'action' => 'fooAction',
                ),
            ),
        ),
    ),
), 
```

另一方面，我希望能够使用**$this->url('.../foo', array('my_param' => 3))**

Ofc 认为这是行不通的。我希望你明白我期望的行为。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T03:17:19.710

您的回答建议使用 GET 参数。如果变量已通过，您可以签入控制器。

如果你想通过路由器来做这件事（如 Sam 所说），你可以设置一个分段式路由器。这在此链接中进行了解释：http: [//framework.zend.com/manual/2.0/en/modules/zend.mvc.routing.html](http://framework.zend.com/manual/2.0/en/modules/zend.mvc.routing.html)

下面包括一个示例：

```
'YourName' => array(
            'type' => 'segment',
            'options' => array(
                'route' => '/property/search[/:action]',
                'constraints' => array(
                    'controller'=>'[a-zA-Z][a-zA-Z0-9_-]*',            
                    'action' => '[a-zA-Z][a-zA-Z0-9_-]*',
                ),
                'defaults' => array(
                    'controller' => 'Module\Controller\Controller',
                    'action' => 'index',
                ),
            ),
        ), 
```

方括号中的段被认为是可选的。

# c# - 当宽度相等时，子控件大于父控件

> ID：13781769
> 
> 赞同：0
> 
> 时间：2012-12-08T20:45:27.630
> 
> 标签：c#, winforms

我正在尝试调整自定义面板控件的大小，以使其在宽度上适合父容器。当我检查控件值时，它们都是相同的，但是子控件对于父控件来说太宽了。

是什么导致了差异？我希望能够计算出正确的尺寸。我尝试更改填充和边距选项，但这没有任何效果。

![向右延伸太远](../Images/12ff34f2ae7c0bfe29603e9104a918ec.png)

```
[Category("Collapsible Panel")]
[DesignOnly(true)]
[DefaultValue(false)]
[Description("If True, fits the panel to match the parent width")]
public bool FitToParent
{
    get { return _fitToParent; }
    set { 
        _fitToParent = value;
            if (_fitToParent)
            {
                if (this.Parent != null)
                {
                    this.Location = new Point(0, this.Location.Y);
                    this.Size = new Size(this.Parent.Size.Width, this.Size.Height);
                    this.Anchor = AnchorStyles.Top | AnchorStyles.Left | AnchorStyles.Right;
                }
            }
            else
            {
                this.Anchor = AnchorStyles.Top | AnchorStyles.Left;
            }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T20:53:36.623

使用`ClientSize`表单和控件。

```
control.ClientSize.Width 
```

`form.Width`或者`control.Width`是包括边框的外部宽度。这`ClientRectangle`是可以放置其他控件的边框之间的内容，并且`ClientSize`是该内部矩形的大小。

# linux - 高效读取 XBMC 渲染的屏幕内容的平均颜色

> ID：13781777
> 
> 赞同：12
> 
> 时间：2012-12-08T20:46:19.580
> 
> 标签：linux, opengl-es, framebuffer, screen-capture

我想在运行 XBMC 以更改电视环境光的颜色时获得屏幕内容的平均颜色。XBMC 运行在带有 OpenGL ES 2.0 硬件 (Raspberry Pi) 的小型 HTPC 上，该硬件运行 Debian 派生的发行版。我想我必须从XBMC 使用 OpenGL 绘制的屏幕*帧缓冲区中读取数据。*（至少，我认为并希望 XBMC 使用 OpenGL 渲染所有内容。）

是否可以读取代表整个屏幕输出的 OpenGL 帧缓冲区？我需要什么才能访问它？我是否还需要一个自己的渲染上下文来访问屏幕的帧缓冲区？（我自己不会在屏幕上渲染任何东西，我只想*阅读*）。

有效计算平均颜色是下一个任务。我正在考虑每行/列每 8 或 16 个像素读取一次（就足够了，我们谈论的是 1080p 高清电影），然后计算 CPU 上的平均值。欢迎任何关于更好解决方案的想法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T19:05:37.610

你应该看看[Boblight 的源代码](https://code.google.com/archive/p/boblight/source/default/source)。

扩展 Boblight 似乎是一个可行的替代方案（如果它不支持您已经需要的东西！）。

如果没有，请查看`src/clients/`文件夹。`boblight-getpixel.c`（适用于 MS Windows）并且`boblight-X11.c`是“像素抓取器”；完全满足您的需求的独立程序，然后将抓取的颜色传达给 boblight 服务器。

在`boblight-X11.c`您有使用的示例或使用阅读屏幕部分`XShmGetImage`较慢的示例时，该代码的一部分会执行以下操作： `XGetImage``X11/extensions/XShm.h`

```
[...]

if(!XShmGetImage(dpy, root_win, xim, 0, 0, AllPlanes))
{
   sleep(1);
   pthread_mutex_unlock(&grabmutex);
   return;
}

XSync(dpy, True);

for (x = 0; x < width; x += xadd)
{
    for (y = 0; y < height; y += yadd)
    {
       pixel = XGetPixel(xim, x, y);
       RGB[0] = (pixel >> 16) & 0xff;
       RGB[1] = (pixel >>  8) & 0xff;
       RGB[2] = (pixel >>  0) & 0xff;

       /*add it to the RGB array*/
       boblight_add_pixel (&config, RGB, x, y);
   }
}

[...] 
```

# java - 为什么我会收到带有泛型的编译器警告？

> ID：13781779
> 
> 赞同：2
> 
> 时间：2012-12-08T20:46:21.687
> 
> 标签：java, generics

我的代码是：

```
import java.util.*;

public class A {
public static void main(String[] args){
    List<String> list = new ArrayList();
    list.add("1"); //ok   line 1
    list.add(1); //error  line 2
} 
```

当我运行这段代码时，Java 给了我一个错误，我知道为什么，但即使我只使用第 1 行，编译器也会警告我。为什么我会收到此警告？我不明白我的第一个示例和这段代码有什么区别：

```
import java.util.*;

public class A {
    public static void main(String[] args){
        List<String> list = new ArrayList<String>(); // <-- notice the second <String>
        list.add("1"); //ok   line 1
        list.add(1); //error  line 2
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-08T20:51:21.753

> **当我运行这段代码时，Java 给了我一个错误，我知道为什么，但即使我只使用第 1 行，编译器也会警告我。为什么我会收到此警告？**

当你使用你的代码时，编译器会给你一个警告，比如

```
List<String> list = new ArrayList(); 
```

> ArrayList 是一种原始类型。应该参数化对泛型类型 ArrayList 的引用

它说您还必须为 ArrayList 提供参数化类型。

```
List<String> list = new ArrayList<String>(); 
```

## 编辑：

正如@newacct 所建议的那样：如果您使用的是Java 7，则可以在实例化您的集合时使用空尖括号（<>），例如：

```
List<String> list = new ArrayList<>(); 
```

从[Java 7 文档](http://docs.oracle.com/javase/7/docs/technotes/guides/language/type-inference-generic-instance-creation.html)：

> 只要编译器可以从上下文推断类型参数，您就可以用一组空类型参数 (<>) 替换调用泛型类的构造函数所需的类型参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T20:56:39.280

代码 2 无法编译，因为您不能将`int`(or `Integer`) 添加到带有`String`s 的列表中，但您已经知道这一点。

说到代码 1，编译器可能会出于多种原因向您发出警告，具体取决于您使用的编译器以及编译器使用的设置。以下是一些选项：

*   在构造参数化对象时，您还必须指定参数。在这段代码：`List<String> list = new ArrayList()`中，`ArrayList`对象的构造没有参数，另一方面，在参考中给出了参数。编译器建议您`List<String> list = new ArrayList<String>()`改用。
*   您正在使用冗余类型参数。使用代码`List<SomeType> list = new ArrayList<SomeType>();`时，您已经两次指定参数应该是类型`SomeType`。编译器建议您使用*菱形推理*( `new ArrayList<>()`)。从 Java 版本 1.7 开始使用该建议。

我猜你的编译器警告你上面的第一个选项。但是，*我的编译器*在测试您的代码时没有给出任何警告。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T20:58:53.650

这可能有助于理解泛型的概念：[为什么使用泛型](http://docs.oracle.com/javase/tutorial/java/generics/why.html)。

如果您按如下方式更改代码，则不会出现错误和警告：

```
import java.util.*;
public class A{

public static void main(String[] args){
    List<Object> list = new ArrayList<Object>();
    list.add("1"); //ok   code 1
    list.add(1); //error  code 2

}
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-08T20:50:33.687

你有一个字符串类型的列表，所以你不能放入整数。

# python - 如何从 Django 查询集中检索项目？

> ID：13781789
> 
> 赞同：1
> 
> 时间：2012-12-08T20:47:09.670
> 
> 标签：python, django, view, model, django-queryset

我正在尝试在查询集中获取视频元素，但无法检索它。

```
user_channel = Everything.objects.filter(profile = request.user, playlist = 'Channel')
print user_channel[0] #returns the first result without error   
print user_channel[0]['video'] #returns error 
```

模型.py：

```
class Everything(models.Model):
    profile = models.ForeignKey(User)
    playlist = models.CharField('Playlist', max_length = 2000, null=True, blank=True)
    platform = models.CharField('Platform', max_length = 2000, null=True, blank=True)
    video = models.CharField('VideoID', max_length = 2000, null=True, blank=True)
    video_title = models.CharField('Title of Video', max_length = 2000, null=True, blank=True)
    def __unicode__(self):
        return u'%s %s %s %s %s' % (self.profile, self.playlist, self.platform, self.video, self.video_title) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T09:44:52.177

试试这个，你会得到基于过滤器的视频列表

```
user_channel = Everything.objects.filter(profile = request.user, playlist = 'Channel')
video = [x.video for x in user_channel]
print video/print video[0] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T20:54:17.437

`user_channel[0]`不是字典。采用

```
user_channel[0].video 
```

# python - 元类与单继承冲突

> ID：13781794
> 
> 赞同：1
> 
> 时间：2012-12-08T20:47:42.533
> 
> 标签：python, django, metaclass

我正在为 django 管理类做一个单一的继承子类，如下所示：

```
from django.contrib.auth import admin as auth_admin

class UserAdmin(auth_admin.UserAdmin):
   pass 
```

我收到错误消息：“元类冲突：派生类的元类必须是其所有基类的元类的（非严格）子类”

我想我理解错误在抱怨什么——但我不清楚为什么我只用一个祖先得到它。每次我看到这个错误，都是因为我使用了多重继承。单一祖先的类元类可能与什么冲突？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T21:23:39.583

如果为 选择了不正确的元类`UserAdmin`，例如通过`__metaclass__`某种方式插入到新生类的字典中，则可能会发生这种情况。尝试以下测试：

```
# force the correct metaclass:
metaclass = type(auth_admin.UserAdmin)
UserAdmin = metaclass("UserAdmin", (auth_admin.UserAdmin,), {}) 
```

`type(auth_admin.UserAdmin)`如果这可行，则意味着在您的`class`声明中选择了一个元类。罪魁祸首应该通过对`__metaclass__`.

如果这失败并出现相同的错误，则可能是元类构造函数正在做自己的一些类构造，由于真正的多重继承错误而失败。在这种情况下，堆栈跟踪应该显示发生这种情况的位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T22:56:45.730

事实证明，这个问题与实际的管理类无关——用于 add_form 的表单必须是 ModelForm 的子类——在这种情况下，它只是一个普通的表单。当添加到页面时，django 会内省表单并尝试注入一个类（如果它不是 ModelForm），从而导致元类型不匹配。

# hadoop - 使用 Hive 解析路径字符串以查找所有祖先

> ID：13781796
> 
> 赞同：0
> 
> 时间：2012-12-08T20:47:46.057
> 
> 标签：hadoop, hive, apache-pig

给定一个包含路径和其他一些列的输入文件：

```
\aa\bb\cc         ... 
\aa\bb\cc\dd\ee   ...
\xx\yy\zz         ... 
```

我正在寻找 HiveQL 中的方法来将路径分解为一个不同的列表，包括所有祖先路径。对于上面的示例，结果应该是：

```
\aa
\aa\bb
\aa\bb\cc
\aa\bb\cc\dd
\aa\bb\cc\dd\ee
\xx
\xx\yy
\xx\yy\zz 
```

有没有办法在 Hive 中做到这一点而不求助于自定义 Java UDF？

如果没有，Pig 怎么样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T01:55:16.830

我认为这更像是一种 mapreduce 问题，而不是数据库问题。它似乎很好地使用了 java 字符串操作和循环。

# visual-studio-2010 - 在 Visual Studio 中发布事件之后

> ID：13781799
> 
> 赞同：33
> 
> 时间：2012-12-08T20:48:02.277
> 
> 标签：visual-studio-2010, visual-studio, deployment, msbuild, publish

我试图在发布事件后调用简单的任务。当我说“发布”时，我的意思是在 Visual Studio 中发布，右键单击项目并按“发布...”。我已经在项目文件中包含（导入的）目标文件，它工作正常，因为我已经在 Build 事件中对其进行了测试。我在[http://msdn.microsoft.com/en-us/library/ms366724.aspx](http://msdn.microsoft.com/en-us/library/ms366724.aspx)发现有 AfterPublish 事件应该做我需要的，但它没有。我不确定这是否是应该在 Visual Studio 中发布时触发的同一事件，请有人澄清这一点。我的问题是如何从 Visual Studio 中发布的目标文件中触发任何类型的任务？

我在目标文件中试过这个：

```
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
    <Target Name="AfterPublish">
        <Message Label="Test"></Message>        
        <Warning Label="Test"></Warning>
    </Target>   
</Project> 
```

我正在使用 Visual Studio 2010。

编辑：

我实际上正在寻找在 Visual Studio 中对 Publish 执行某些操作的任何方法。我也在考虑添加构建事件，但我不知道如何确定它是否正在进行发布。

编辑：@Alexey Shcherbak 感谢您的快速回复。我在我的 MSBuild 输出中得到了这个：

```
12/10/2012 12:29:40 AM:        Done executing task "CallTarget".
12/10/2012 12:29:40 AM:        Done building target "PipelinePreDeployCopyAllFilesToOneFolder" in project "PublishTestApp.csproj".
12/10/2012 12:29:40 AM:Done building project "PublishTestApp.csproj".
Deleting existing files...
Publishing folder /...
Publishing folder Account...
Publishing folder bin...
Publishing folder Scripts...
Publishing folder Styles...
========== Build: 1 succeeded or up-to-date, 0 failed, 0 skipped ==========
========== Publish: 1 succeeded, 0 failed, 0 skipped ========== 
```

因此，我的任务将在 PipelinePreDeployCopyAllFilesToOneFolder 之后但在文件的实际处理之前执行，我认为此时尚未完成发布。当然，我确实对此进行了实际测试，因此在 MSBuild 任务中，我正在执行从假定复制到 Publish 文件夹中的文本文件的简单读取，但它失败了。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-09T05:11:22.867

发布上下文菜单未运行“发布”目标（如果我们谈论的是发布网站，而不是发布 ClickOnce 包）。

如果您使用的是 VS2010 - 上下文菜单将运行“PipelinePreDeployCopyAllFilesToOneFolder”目标，而在 VS2012 中（如果要切换，请记住这一点）它将运行“MSDeployPublish”目标。

我想你应该阅读[这个问题和答案](https://stackoverflow.com/questions/12899650/why-does-msbuild-ignore-my-beforepublish-target/12916009#12916009)。Jez 和我就如何挂钩到 Before\After 发布目标提供了相当全面的答案。

简而言之 - 对于 MSBuild version>=4.0，您可以使用这种方法

```
<Target Name="Mytarget" AfterTargets="PipelinePreDeployCopyAllFilesToOneFolder" >
    <Message Label="Test"></Message>        
    <Warning Label="Test"></Warning>
</Target> 
```

@Edit1：使用**CopyAllFilesToSingleFolderForPackage**而不是**PipelinePreDeployCopyAllFilesToOneFolder** - 文件应在此目标之后复制。如果您只需要在目标在 VS 上下文中启动时触发目标 - 检查我发布的链接并添加更多条件 - 检查 Visual Studio 的启动是否像`Condition="'$(BuildingInsideVisualStudio)'=='true' AND '$(VisualStudioVersion)'=='10.0'"` 这样发布等 - 它可以添加更多上下文并帮助其他人理解问题

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2018-06-19T11:58:10.387

**更新：**似乎在 VS 2019 和 .NET 5 中，您现在可以使用`Publish`target。

```
<Target Name="Test" AfterTargets="Publish">
    <Exec Command="blablabla" />
</Target> 
```

* * *

**这是我的旧答案也有效：**

* * *

MS 已经确认，**当发布到文件系统时，**他们没有任何目标可以在此之后启动。

> “我们目前不支持文件系统协议从 VS 发布后执行自定义目标。”

引用自[这个 SO question](https://stackoverflow.com/questions/45582953/running-target-after-files-are-published-to-filesystem)

所以我们最终做的是：

1.  使用`AfterTargets="CopyAllFilesToSingleFolderForPackage"`（在文件复制到发布位置之前运行）
2.  执行一个bat文件
3.  bat 文件以`timeout 10`命令开头（等待 10 秒）——因为没有更好的方法。

重要提示：此 bat 文件必须*异步*执行，以便在启动后继续发布过程，请参阅[此 SO 答案](https://stackoverflow.com/a/21181071/56621)以了解如何执行此操作。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-01-12T19:43:10.473

我尝试了所有其他答案，但它们只是没有用。就我而言，我正在使用 VS2015 发布 VSTO 加载项，所以可能会发生一些不同的事情，但这里有两个可行的选项：

```
<Target Name="AfterPublish">
  <Warning Text="publish warning 1" />
</Target>
<Target Name="CustomTarget" AfterTargets="AfterPublish">
  <Warning Text="publish warning 2" />
</Target> 
```

我（以及假设的其他人）对此感到困难的部分原因是该`Message`任务似乎没有做任何事情。我期待`Output`视图中的文本，但没有显示任何内容。两者中都没有`Message`项目`Error List`，但通过使用`Warning`，它们确实出现在`Error List`. 不幸的是，我对 MSBuild 的了解还不够，无法说出为什么`Message`没有按预期运行。

编辑：请参阅有关如何准确查看正在执行哪些目标的[出色答案。](https://stackoverflow.com/a/6804854/196852)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-02-28T19:22:24.257

我刚刚写了一篇关于我如何在 Visual Studio 2013 中实现这一点的帖子：[http ://www.alexdresko.com/2015/02/28/taking-visual-studio-build-and-publish-events-to-the-下一级/](http://www.alexdresko.com/2015/02/28/taking-visual-studio-build-and-publish-events-to-the-next-level/)

本质上，这就是魔法：

```
<Target Name="Mytarget" AfterTargets="MSDeployPublish" >
    <Message Text="The name of the publish profile is $(DestinationAppRoot)"/>   
    .... Here's where you do something awesome... 
</Target> 
```

我鼓励您阅读整篇文章以获取更多信息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-22T15:28:38.310

我对另一个问题的回答可能会有一些用处。

[当我发布 Web 应用程序时，AfterPublish 脚本不运行](https://stackoverflow.com/questions/19456112/afterpublish-script-doesnt-run-when-i-publish-a-web-app/35556997#35556997)

特别是，使用“已发布文件”的路径，您可以通过`$(WebProjectOutputDir)\$(WPPAllFilesInSingleFolder)`. 这将类似于`c:\{path to *.csproj}\obj\{build configuration}\Package\PackageTmp`.

# assembly - 在 x86 程序集中导出字节数组

> ID：13781801
> 
> 赞同：2
> 
> 时间：2012-12-08T20:48:14.123
> 
> 标签：assembly, import, x86, masm

我目前正在从事一个组装项目（MASM 与 Dosbox 结合），该项目基本上是为了教育目的重新创建 pong。我写了一个函数来将精灵（字节数组）绘制到视频内存（模式 13h），但是这些精灵开始弄乱文件的上半部分（因为它们可能非常大，我更喜欢这些大的艺术价值字节数组与从位图绘制相比）

我真的不知道包含如何工作（这是一种问题），但我找到了一个向我展示一般语法的文件。例如，我可以将“DERP.INC”与“DERP.ASM”文件结合使用。这个 ASM 文件将定义一个变量（db 值）“horse”，我可以通过执行以下操作将其导出到 INC 文件中：

```
externdef horse:BYTE 
```

并将其放入 ASM 文件中：

```
PUBLIC horse 
```

在 INC 文件中，我们明确指出 horse 的大小是一个字节。现在，精灵定义如下：

```
sprite db 1, 0, 0
       db 0, 1, 0
       db 0, 0, 1 
```

我如何能够导出整个字节数组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T21:03:40.940

没有必要。`sprite`只是一个将映射到某个地址的名称。由您来处理从该地址开始的多少字节可能构成同一条数据的一部分。一种常见的方法是：

```
sprite db 1, 0, 0
       db 0, 1, 0
       db 0, 0, 1 

sprite_len = $ - sprite 
```

公开名称以便可以从其他文件访问它并没有真正改变这种情况。您仍然只是公开名称。如果您想跟踪长度，您也可以公开您为长度提供的名称。不过，这并不会真正导出更多或更少的数据——如果接收者已经知道精灵总是 9 字节长，那么它们可以仅根据其起始地址处理恶意代码，就像相同的代码一样文件会。您没有定义任何东西来指定精灵的长度这一事实往往表明您的代码取决于它的固定长度——如果是这样，只需导出`sprite`就可以了。

底线：基本上让它就像代码和数据声明在同一个文件中一样`public`。`externdef`“导出”符号不会自动为接收代码提供有关该符号的更多或更少的信息，而不是它在同一个文件中，因此数据声明是直接可见的。

# xml - Xquery 用于在 xml 中查找表亲

> ID：13781802
> 
> 赞同：2
> 
> 时间：2012-12-08T20:48:14.793
> 
> 标签：xml, xslt, xpath, xquery

我是 xquery 的新手，我正在寻找一个快速解决这个问题的方法。

我有一个 xml 文档，我想在文档中找到所有堂兄弟对和所有堂兄弟对。

请查看下面的 xml 并指导我如何继续，或者您是否可以提供任何将被高度应用的代码片段。

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE GEDCOM SYSTEM "file:/Users/indiwarafernando/Downloads/family.dtd">
<GEDCOM>
    <HeaderRec>
        <FileCreation Date=""></FileCreation>
        <Submitter>
            <Link Target="" Ref="FM001"/> 
        </Submitter>
    </HeaderRec>
    <FamilyRec Id="FM001">
        <HusbFath>
            <Link Target="IndividualRec" Ref="IN001"/>
        </HusbFath>
        <WifeMoth>
            <Link Target="IndividualRec" Ref="IN002"/>
        </WifeMoth>
        <Child>
            <Link Target="IndividualRec" Ref="IN004"/>
        </Child>

        <Child>
            <Link Target="IndividualRec" Ref="IN007"/>
        </Child>

    </FamilyRec>

    <FamilyRec Id="FM002">
        <HusbFath>
            <Link Target="IndividualRec" Ref="IN004"/>
        </HusbFath>
        <WifeMoth>
            <Link Target="IndividualRec" Ref="IN005"/>
        </WifeMoth>
        <Child>
            <Link Target="IndividualRec" Ref="IN006"/>
        </Child>

    </FamilyRec>  

    <FamilyRec Id="FM003">
        <HusbFath>
            <Link Target="IndividualRec" Ref="IN007"/>
        </HusbFath>
        <WifeMoth>
            <Link Target="IndividualRec" Ref="IN008"/>
        </WifeMoth>
        <Child>
            <Link Target="IndividualRec" Ref="IN009"/>
        </Child>

    </FamilyRec> 

    <IndividualRec Id="IN001">
        <IndivName>Fathers name</IndivName>                 <!-- This tag used for father of c1 or husband of w1 -->
        <Gender>Male</Gender>
        <AssocIndiv>
            <Link Target="" Ref="IN002"/>
            <Association>Wife</Association>
        </AssocIndiv>
    </IndividualRec>

    <IndividualRec Id="IN002">                                 <!-- This tag used for mother of c1 or wife of h1 -->
        <IndivName>Mother s name</IndivName>
        <Gender>Male</Gender>
        <AssocIndiv>
            <Link Target="IndividualRec" Ref="IN001"/>
            <Association>Husband</Association>
        </AssocIndiv>
    </IndividualRec>

    <IndividualRec Id="IN003">                                  <!-- This tag used for a child to h1 or w1 or grand son to gm1 or gf1 -->
        <IndivName>Child 1 name</IndivName>
        <Gender>Male</Gender>
        <AssocIndiv>
            <Link Target="IndividualRec" Ref="IN001"/>
            <Association>Father</Association>
        </AssocIndiv>
        <AssocIndiv>
            <Link Target="IndividualRec" Ref="IN002"/>
            <Association>Mother</Association>
        </AssocIndiv>
    </IndividualRec>

    <IndividualRec Id="IN005">                                 <!-- This tag used for grand mother -->
        <IndivName>Grand mother's name</IndivName>
        <Gender>Male</Gender>
        <AssocIndiv>
            <Link Target="IndividualRec" Ref="IN004"/>
            <Association>Husband</Association>
        </AssocIndiv>
    </IndividualRec>

    <IndividualRec Id="IN004">                                  <!-- This tag used for grand father -->
        <IndivName>Grand father's name</IndivName>
        <Gender>Male</Gender>
        <AssocIndiv>
            <Link Target="IndividualRec" Ref="IN005"/>
            <Association>Grand Father's Wife</Association>
        </AssocIndiv>
    </IndividualRec>

    <IndividualRec Id="IN006">                                  <!-- This tag used for a child to h1 or w1 or grand son to gm1 or gf1 -->
        <IndivName>Child 1 name</IndivName>
        <Gender>Male</Gender>
        <AssocIndiv>
            <Link Target="IndividualRec" Ref="IN004"/>
            <Association>Father</Association>
        </AssocIndiv>
        <AssocIndiv>
            <Link Target="IndividualRec" Ref="IN005"/>
            <Association>Mother</Association>
        </AssocIndiv>
    </IndividualRec>

    <IndividualRec Id="IN007">                                 <!-- This tag used for grand mother -->
        <IndivName>Grand mother's name</IndivName>
        <Gender>Female</Gender>
        <AssocIndiv>
            <Link Target="IndividualRec" Ref="IN008"/>
            <Association>Husband</Association>
        </AssocIndiv>
    </IndividualRec>

    <IndividualRec Id="IN008">                                  <!-- This tag used for grand father -->
        <IndivName>Grand father's name</IndivName>
        <Gender>Male</Gender>
        <AssocIndiv>
            <Link Target="IndividualRec" Ref="IN007"/>
            <Association>Grand Father's Wife</Association>
        </AssocIndiv>
    </IndividualRec>

    <IndividualRec Id="IN009">                                  <!-- This tag used for a child to h1 or w1 or grand son to gm1 or gf1 -->
        <IndivName>Child 1 name</IndivName>
        <Gender>Male</Gender>
        <AssocIndiv>
            <Link Target="IndividualRec" Ref="IN007"/>
            <Association>Father</Association>
        </AssocIndiv>
        <AssocIndiv>
            <Link Target="IndividualRec" Ref="IN008"/>
            <Association>Mother</Association>
        </AssocIndiv>
    </IndividualRec>

</GEDCOM> 
```

**示例输出：** 一对堂兄的示例输出是 IN006 和 IN009

问候费里德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T00:27:54.307

**I. 这个 XSLT 2.0 转换（可以很容易地重写为 XSLT 1.0）产生了所有的表亲**：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:xs="http://www.w3.org/2001/XMLSchema"
 xmlns:my="my:my" exclude-result-prefixes="my xs">
 <xsl:output method="text"/>

 <xsl:key name="kChildren" match="Child"
  use="../HusbFath/*/@Ref"/>

 <xsl:key name="kChildren" match="Child"
  use="../WifeMoth/*/@Ref"/>

 <xsl:variable name="vDoc" select="/"/>

 <xsl:template match="FamilyRec">
  <xsl:variable name="vGrandChildren" select=
   "my:GrandChildren((HusbFath|WifeMoth)
                            [string(*/@Ref)][1]
                              /*/@Ref
                     )
   "/>
   <xsl:sequence select=
    "for $first in 1 to count($vGrandChildren),
         $second in $first+1 to count($vGrandChildren),
         $grand1 in $vGrandChildren[$first],
         $grand2 in $vGrandChildren[$second]
      return
         if(not($grand1/.. is $grand2/..))
           then (concat('[', $grand1/*/@Ref, ',', $grand2/*/@Ref, '] '))
           else ()
    "/>
 </xsl:template>

 <xsl:template match="text()"/>

 <xsl:function name="my:GrandChildren">
  <xsl:param name="pRef" as="xs:string?"/>

   <xsl:sequence select=
   "key('kChildren',
        key('kChildren', $pRef, $vDoc)/Link/@Ref,
        $vDoc)
   "/>
 </xsl:function>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<GEDCOM>
    <HeaderRec>
        <FileCreation Date=""></FileCreation>
        <Submitter>
            <Link Target="" Ref="FM001"/>
        </Submitter>
    </HeaderRec>
    <FamilyRec Id="FM001">
        <HusbFath>
            <Link Target="IndividualRec" Ref="IN001"/>
        </HusbFath>
        <WifeMoth>
            <Link Target="IndividualRec" Ref="IN002"/>
        </WifeMoth>
        <Child>
            <Link Target="IndividualRec" Ref="IN004"/>
        </Child>
        <Child>
            <Link Target="IndividualRec" Ref="IN007"/>
        </Child>
    </FamilyRec>
    <FamilyRec Id="FM002">
        <HusbFath>
            <Link Target="IndividualRec" Ref="IN004"/>
        </HusbFath>
        <WifeMoth>
            <Link Target="IndividualRec" Ref="IN005"/>
        </WifeMoth>
        <Child>
            <Link Target="IndividualRec" Ref="IN006"/>
        </Child>
    </FamilyRec>
    <FamilyRec Id="FM003">
        <HusbFath>
            <Link Target="IndividualRec" Ref="IN007"/>
        </HusbFath>
        <WifeMoth>
            <Link Target="IndividualRec" Ref="IN008"/>
        </WifeMoth>
        <Child>
            <Link Target="IndividualRec" Ref="IN009"/>
        </Child>
    </FamilyRec>
    <IndividualRec Id="IN001">
        <IndivName>Fathers name</IndivName>
        <!-- This tag used for father of c1 or husband of w1 -->
        <Gender>Male</Gender>
        <AssocIndiv>
            <Link Target="" Ref="IN002"/>
            <Association>Wife</Association>
        </AssocIndiv>
    </IndividualRec>
    <IndividualRec Id="IN002">
        <!-- This tag used for mother of c1 or wife of h1 -->
        <IndivName>Mother s name</IndivName>
        <Gender>Male</Gender>
        <AssocIndiv>
            <Link Target="IndividualRec" Ref="IN001"/>
            <Association>Husband</Association>
        </AssocIndiv>
    </IndividualRec>
    <IndividualRec Id="IN003">
        <!-- This tag used for a child to h1 or w1 or grand son to gm1 or gf1 -->
        <IndivName>Child 1 name</IndivName>
        <Gender>Male</Gender>
        <AssocIndiv>
            <Link Target="IndividualRec" Ref="IN001"/>
            <Association>Father</Association>
        </AssocIndiv>
        <AssocIndiv>
            <Link Target="IndividualRec" Ref="IN002"/>
            <Association>Mother</Association>
        </AssocIndiv>
    </IndividualRec>
    <IndividualRec Id="IN005">
        <!-- This tag used for grand mother -->
        <IndivName>Grand mother's name</IndivName>
        <Gender>Male</Gender>
        <AssocIndiv>
            <Link Target="IndividualRec" Ref="IN004"/>
            <Association>Husband</Association>
        </AssocIndiv>
    </IndividualRec>
    <IndividualRec Id="IN004">
        <!-- This tag used for grand father -->
        <IndivName>Grand father's name</IndivName>
        <Gender>Male</Gender>
        <AssocIndiv>
            <Link Target="IndividualRec" Ref="IN005"/>
            <Association>Grand Father's Wife</Association>
        </AssocIndiv>
    </IndividualRec>
    <IndividualRec Id="IN006">
        <!-- This tag used for a child to h1 or w1 or grand son to gm1 or gf1 -->
        <IndivName>Child 1 name</IndivName>
        <Gender>Male</Gender>
        <AssocIndiv>
            <Link Target="IndividualRec" Ref="IN004"/>
            <Association>Father</Association>
        </AssocIndiv>
        <AssocIndiv>
            <Link Target="IndividualRec" Ref="IN005"/>
            <Association>Mother</Association>
        </AssocIndiv>
    </IndividualRec>
    <IndividualRec Id="IN007">
        <!-- This tag used for grand mother -->
        <IndivName>Grand mother's name</IndivName>
        <Gender>Female</Gender>
        <AssocIndiv>
            <Link Target="IndividualRec" Ref="IN008"/>
            <Association>Husband</Association>
        </AssocIndiv>
    </IndividualRec>
    <IndividualRec Id="IN008">
        <!-- This tag used for grand father -->
        <IndivName>Grand father's name</IndivName>
        <Gender>Male</Gender>
        <AssocIndiv>
            <Link Target="IndividualRec" Ref="IN007"/>
            <Association>Grand Father's Wife</Association>
        </AssocIndiv>
    </IndividualRec>
    <IndividualRec Id="IN009">
        <!-- This tag used for a child to h1 or w1 or grand son to gm1 or gf1 -->
        <IndivName>Child 1 name</IndivName>
        <Gender>Male</Gender>
        <AssocIndiv>
            <Link Target="IndividualRec" Ref="IN007"/>
            <Association>Father</Association>
        </AssocIndiv>
        <AssocIndiv>
            <Link Target="IndividualRec" Ref="IN008"/>
            <Association>Mother</Association>
        </AssocIndiv>
    </IndividualRec>
</GEDCOM> 
```

**产生了想要的正确结果**：

```
[IN006,IN009] 
```

* * *

**二、要测试两个`Child`元素是否是第二代表亲，请在上面添加 this**（并添加必要的代码来测试每对`Child`，它们是否是第二代表亲：

```
 <xsl:key name="kGrandParent" match="HusbFath | WifeMoth"
  use="my:GrandChildren(Link/@Ref)/*/@Ref"/>

 <xsl:function name="my:areFirststCousins" as="xs:boolean">
  <xsl:param name="pPers1" as="element()"/>
  <xsl:param name="pPers2" as="element()"/>

  <xsl:sequence select=
  "key('kGrandParent', $pPers1/*/@Ref, $vDoc)[1]
  is
   key('kGrandParent', $pPers2/*/@Ref, $vDoc)[1]
  and
   not($pPers1/.. is $pPers2/..)
  "/>
 </xsl:function>

 <xsl:function name="my:areSecondCousins" as="xs:boolean">
  <xsl:param name="pPers1" as="element()"/>
  <xsl:param name="pPers2" as="element()"/>

  <xsl:sequence select=
  "my:areFirststCousins($pPers1/../(HusbFath|WifeMoth)[1],
                        $pPers2/../(HusbFath|WifeMoth)[1]
                       )
  "/>
 </xsl:function> 
```

* * *

**三、完整的解决方案**：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:xs="http://www.w3.org/2001/XMLSchema"
 xmlns:my="my:my" exclude-result-prefixes="my xs">
 <xsl:output method="text"/>

 <xsl:key name="kChildren" match="Child"
  use="../HusbFath/*/@Ref"/>

 <xsl:key name="kChildren" match="Child"
  use="../WifeMoth/*/@Ref"/>

 <xsl:key name="kGrandParent" match="HusbFath | WifeMoth"
  use="my:GrandChildren(Link/@Ref)/*/@Ref"/>

 <xsl:variable name="vDoc" select="/"/>

 <xsl:template match="/*">
  First Cousins:
  <xsl:sequence select=
  "for $first in 1 to count(/*/FamilyRec/Child),
       $second in $first+1 to count(/*/FamilyRec/Child),
       $pers1 in (/*/FamilyRec/Child)[$first],
       $pers2 in (/*/FamilyRec/Child)[$second]
     return
       if(my:areFirststCousins($pers1, $pers2))
         then concat('[', $pers1/*/@Ref, ',', $pers2/*/@Ref, '] ')
         else ()
  "/>

  Second Cousins:
  <xsl:sequence select=
  "for $first in 1 to count(/*/FamilyRec/Child),
       $second in $first+1 to count(/*/FamilyRec/Child),
       $pers1 in (/*/FamilyRec/Child)[$first],
       $pers2 in (/*/FamilyRec/Child)[$second]
     return
       if(my:areSecondCousins($pers1, $pers2))
         then concat('[', $pers1/*/@Ref, ',', $pers2/*/@Ref, '] ')
         else ()
  "/>
 </xsl:template>

 <xsl:function name="my:GrandChildren">
  <xsl:param name="pRef" as="xs:string?"/>

   <xsl:sequence select=
   "key('kChildren',
        key('kChildren', $pRef, $vDoc)/Link/@Ref,
        $vDoc)
   "/>
 </xsl:function>

 <xsl:function name="my:areFirststCousins" as="xs:boolean">
  <xsl:param name="pPers1" as="element()"/>
  <xsl:param name="pPers2" as="element()"/>

  <xsl:sequence select=
  "key('kGrandParent', $pPers1/*/@Ref, $vDoc)[1]
  is
   key('kGrandParent', $pPers2/*/@Ref, $vDoc)[1]
  and
   not($pPers1/.. is $pPers2/..)
  "/>
 </xsl:function>

 <xsl:function name="my:areSecondCousins" as="xs:boolean">
  <xsl:param name="pPers1" as="element()"/>
  <xsl:param name="pPers2" as="element()"/>

  <xsl:sequence select=
  "my:areFirststCousins($pPers1/../(HusbFath|WifeMoth)[1],
                        $pPers2/../(HusbFath|WifeMoth)[1]
                       )
  "/>
 </xsl:function>
</xsl:stylesheet> 
```

**当此转换应用于同一个提供的 XML 文档（如上）时，会产生正确的结果**：

```
 First Cousins:
  [IN006,IN009] 

  Second Cousins: 
```

# emacs23 - 不要 emacs 完成和 cedet 语义完成使用相同的标记文件

> ID：13781803
> 
> 赞同：1
> 
> 时间：2012-12-08T20:48:35.990
> 
> 标签：emacs23, cedet, tab-completion

我认为emacs默认完成和语义完成都基于相同的标记文件完成它们的工作，但现在我看到了其他东西：

这是 emacs 默认通过 ESC + TAB 完成的结果： ![在此处输入图像描述](../Images/9bfa60fb45b83410c19160c67800f396.png)

这是语义完成的结果：

![在此处输入图像描述](../Images/ad5c2a5aa109d948ed67fb5429d381ef.png)

这是怎么回事？！他们不使用相同的标签文件吗？如何找到正在使用的标签文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T13:34:19.060

有多个标签表，以及扫描标签表的多种方式。

我做到了： `C-h k M-TAB`它说：

```
Perform tags completion on the text around point.
If a tags table is loaded, call `complete-tag'.
Otherwise, if Semantic is active, call `semantic-ia-complete-symbol'. 
```

Complete-tag 使用来自 etags 的标签表。它可能是一个名为 的文件`TAGS`，如果您以前曾经`M-.`跳转到一个标签，它将使用它。

然后它尝试使用列出的语义功能。首先尝试使用“智能完成”。这基本上意味着它将分析本地上下文，并尝试找出一个简短的智能选项列表，按数据类型等过滤。如果失败，它将访问限制在当前文件中的语义标签表的其余部分，以防止符号过载。Semantic 的标签在 ~/.semanticdb 中，通过目录命名的文件保存。这些表也用于智能补全，其中包含比 更多信息`TAGS`，包括可用于提高智能补全过滤质量的数据类型和参数。

# cordova - phonegap - 导航器应该在浏览器中工作吗？

> ID：13781809
> 
> 赞同：0
> 
> 时间：2012-12-08T20:48:51.830
> 
> 标签：cordova

我只是想让 phonegap/cordova 工作。Navigator 的功能是否应该在 android 模拟器中工作？当我执行 geolocation getcurrentposition 函数时，它什么也没做。

当我在浏览器和模拟器中尝试 navigator.notification.alert() 时，它不起作用。它说 navigator.notification.alert() 没有定义。

我不知道问题是什么。我本以为它至少会显示浏览器警报。

我的清单如下。

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.timetracker2"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="16" />

    <uses-permission android:name="android.permission.CAMERA" />
    <uses-permission android:name="android.permission.VIBRATE" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_LOCATION_EXTRA_COMMANDS" />
    <uses-permission android:name="android.permission.READ_PHONE_STATE" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.RECEIVE_SMS" />
    <uses-permission android:name="android.permission.RECORD_AUDIO" />
    <uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS" />
    <uses-permission android:name="android.permission.READ_CONTACTS" />
    <uses-permission android:name="android.permission.WRITE_CONTACTS" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
    <uses-permission android:name="android.permission.GET_ACCOUNTS" />
    <uses-permission android:name="android.permission.BROADCAST_STICKY" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.timetracker2.MainActivity"
            android:label="@string/app_name"
            android:configChanges="orientation|keyboardHidden"  >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <activity 
            android:name="org.apache.cordova.DroidGap" 
            android:label="@string/app_name" 
            android:configChanges="orientation|keyboardHidden"> 
            <intent-filter></intent-filter> 
        </activity>
    </application>

</manifest> 
```

# google-chrome - 开发人员工具导致谷歌浏览器冻结

> ID：13781810
> 
> 赞同：5
> 
> 时间：2012-12-08T20:49:03.480
> 
> 标签：google-chrome, freeze, crash-dumps, short

我刚刚安装了谷歌浏览器并开始检查我的网络应用程序。由于我在 HTML 或 Javascript 中有一个错误，我在要调用的函数中设置了一个断点......或者至少我认为我这样做了，因为在左侧栏上双击行号并没有显示蓝色图标。现在一切都冻结了，不久后我收到错误消息“哦，不”，并且不再显示 Sources 下的 js 文件中的代码。我必须关闭该死的浏览器。

Sources下工具右侧的多个选项不显示任何断点，既不是活动的也不是非活动的。资源在我的应用程序中显示了带有 JS 文件的树，但是当我双击任何文件时我看不到代码。

我的断点是否处于活动状态？？这个怎么解决？？

PS - 仅当我调用开发人员工具时，应用程序才会冻结并导致短暂转储。

# matlab - 获取许多矩阵（ASCII 文本文件）的最后一行并从这些行创建一个新矩阵

> ID：13781811
> 
> 赞同：1
> 
> 时间：2012-12-08T20:49:06.777
> 
> 标签：matlab, shell, matrix, ascii

我有一千多个从 MATLAB 生成的矩阵（6 x 2000，ASCII 文件，逗号分隔）。我想获取每个矩阵/文本文件的最后一行并将它们保存在一个新的矩阵/文本文件中。文本文件有疯狂的名字，所以当我加载它们时，我可以随便命名它们。现在我会这样做以实现我的目标：

```
% A = load('crazyname.txt');
% B = load('crazynameagain.txt');
% C = load('crazynameyetagain.txt');

A = [5 5 5; 5 5 5; 1 1 1];
B = [5 5 5; 5 5 5; 2 2 2];
C = [5 5 5; 5 5 5; 3 3 3];

D(1,:)=A(end,:);
D(2,:)=B(end,:);
D(3,:)=C(end,:); 
```

我将通过组合文本单元格来创建命令，在 Excel 中创建每个命令（例如加载、逐步构建*D ）。*有一个更好的方法吗？我可以使用更适合它们在 for 循环中使用的名称来加载/分配矩阵吗？或者是其他一些可以促进这一点的 MATLAB 命令？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T21:13:20.320

如果文件名有一个共同的模式，您可以使用 dir 函数来获取它们的列表。从那里，一次加载它们并将它们放入您的阵列中。您还需要先知道有多少，才能进行预分配。完成后，这可能会缩小。把它们放在一起，你就有了这样的东西。

```
files=dir ('c:/somefolder/*.txt')
output=zeros(2000,length(files));
usedValue=false(zeros(1,length(files)));
for i=1:length(files)
    if (~files(i).isdir)
        dat=load(files(i).name);
        usedValue(i)=true;
        output(:,i)=dat(end,:);
    end
end
output=output(:,usedValue); 
```

请注意，您可以在 if 语句中对文件进行一些额外的检查，以确保文件名正确。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T04:57:58.187

假设您拥有`csv`文件夹中的所有文件`d:/tmp`，每个文件包含`6x2000`：

```
folder = 'd:/tmp';
files = dir(fullfile(folder, '*.csv'));
res = cell2mat(cellfun(@(x) csvread(fullfile(folder, x), 5, 0), {files.name}', 'UniformOutput', false)); 
```

注意 的论点`csvread()`。

**编辑：**如果分隔符是空格`' '`：

```
res = cell2mat(cellfun(@(x) dlmread(fullfile(folder, x), ' ', 5, 0), {files.name}', 'UniformOutput', false)); 
```

# android - Android：尝试获取 URL 时 jsoup 失败

> ID：13781812
> 
> 赞同：1
> 
> 时间：2012-12-08T20:49:36.733
> 
> 标签：android, jsoup

```
 package com.nicotera.colton.londontransitguide;

import java.io.IOException;
import java.text.DecimalFormat;
import java.util.regex.Matcher;
import java.util.regex.Pattern;

import org.jsoup.*;
import org.jsoup.nodes.Attributes;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.Element;
import org.jsoup.select.Elements;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemSelectedListener;
import android.widget.ArrayAdapter;
import android.widget.Spinner;
import android.widget.TextView;

public class RoutesActivity extends Activity implements OnItemSelectedListener {
    private static final String TAG = "RoutesActivity";

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_routes);

        Spinner spinner = (Spinner) findViewById(R.id.route_name_spinner); // Create an ArrayAdapter using the string array and a default spinner layout
        spinner.setOnItemSelectedListener(this);
        ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(this, R.array.routes_array, android.R.layout.simple_spinner_item);
        // Specify the layout to use when the list of choices appears
        adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item); // Apply the adapter to the spinner
        spinner.setAdapter(adapter);
        Log.i(TAG, "spinner populated");
    }

    public void onItemSelected(AdapterView<?> parent, View view, 
            int pos, long id) {
        Log.i(TAG, "Item selected");
        int tempPos = pos;
        Log.i(TAG, ("Position of selected item: " + tempPos));
        int routeSelected;
        if (tempPos < 17)
            routeSelected = (tempPos + 1);
        else if (tempPos >= 17 && tempPos < 29)
            routeSelected = (tempPos + 2);
        else
            routeSelected = (tempPos + 3);
        String temp;
        if (routeSelected < 10)
            temp = ("0") + routeSelected;
        else
            temp = ("") + routeSelected;
        String url = "http://www.ltconline.ca/WebWatch/MobileAda.aspx?r=" + temp;
        try {
            urlParse(url);
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }

    public void urlParse (String url) throws IOException {
        Log.i(TAG, "Tried to parse url");
        String [] directions = new String [3];
        String [] directionNames = new String [3];
        Pattern routeDirPattern = Pattern.compile("\\&d=(\\d{1,2})");
        Connection conn = Jsoup.connect(url);
        /*LINE 82 */ Document doc = conn.get();
        int i = 0;
        Elements routeLinks = doc.select("a[href]");
        for (Element routeLink : routeLinks) {
            i = (i + 1);
            String name = routeLink.text();
            Attributes attrs = routeLink.attributes();
            String href = attrs.get("href");
            Matcher m = routeDirPattern.matcher(href);
            if (m.find()) {
                    String number = m.group(1);
                    directions [i] = number;
                    directionNames [i] = name;
                    Log.i(TAG, directionNames [i]);
            }
        }

    }

    public void onNothingSelected(AdapterView<?> parent) {
        // Another interface callback
    }
} 
```

为长代码道歉，但我想我应该把它全部发布，这样我就不必稍后再发布了。发生的事情是 urlParse 方法不起作用，特别是在第 82 行（不完全是第 82 行，因为我在发布之前删除了一些评论）。有人看到问题是什么吗？

LogCat 发表在下面：

```
12-08 20:39:38.384: I/RoutesActivity(765): Item selected
12-08 20:39:38.384: I/RoutesActivity(765): Position of selected item: 0
12-08 20:39:38.394: I/RoutesActivity(765): Tried to parse url
12-08 20:39:38.454: D/AndroidRuntime(765): Shutting down VM
12-08 20:39:38.484: W/dalvikvm(765): threadid=1: thread exiting with uncaught exception (group=0x40a70930)
12-08 20:39:38.505: E/AndroidRuntime(765): FATAL EXCEPTION: main
12-08 20:39:38.505: E/AndroidRuntime(765): android.os.NetworkOnMainThreadException
12-08 20:39:38.505: E/AndroidRuntime(765):  at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1117)
12-08 20:39:38.505: E/AndroidRuntime(765):  at java.net.InetAddress.lookupHostByName(InetAddress.java:385)
12-08 20:39:38.505: E/AndroidRuntime(765):  at java.net.InetAddress.getAllByNameImpl(InetAddress.java:236)
12-08 20:39:38.505: E/AndroidRuntime(765):  at java.net.InetAddress.getAllByName(InetAddress.java:214)
12-08 20:39:38.505: E/AndroidRuntime(765):  at libcore.net.http.HttpConnection.<init>(HttpConnection.java:70)
12-08 20:39:38.505: E/AndroidRuntime(765):  at libcore.net.http.HttpConnection.<init>(HttpConnection.java:50)
12-08 20:39:38.505: E/AndroidRuntime(765):  at libcore.net.http.HttpConnection$Address.connect(HttpConnection.java:340)
12-08 20:39:38.505: E/AndroidRuntime(765):  at libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:87)
12-08 20:39:38.505: E/AndroidRuntime(765):  at libcore.net.http.HttpConnection.connect(HttpConnection.java:128)
12-08 20:39:38.505: E/AndroidRuntime(765):  at libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:316)
12-08 20:39:38.505: E/AndroidRuntime(765):  at libcore.net.http.HttpEngine.connect(HttpEngine.java:311)
12-08 20:39:38.505: E/AndroidRuntime(765):  at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:290)
12-08 20:39:38.505: E/AndroidRuntime(765):  at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:240)
12-08 20:39:38.505: E/AndroidRuntime(765):  at libcore.net.http.HttpURLConnectionImpl.connect(HttpURLConnectionImpl.java:81)
12-08 20:39:38.505: E/AndroidRuntime(765):  at org.jsoup.helper.HttpConnection$Response.execute(HttpConnection.java:408)
12-08 20:39:38.505: E/AndroidRuntime(765):  at org.jsoup.helper.HttpConnection$Response.execute(HttpConnection.java:393)
12-08 20:39:38.505: E/AndroidRuntime(765):  at org.jsoup.helper.HttpConnection.execute(HttpConnection.java:159)
12-08 20:39:38.505: E/AndroidRuntime(765):  at org.jsoup.helper.HttpConnection.get(HttpConnection.java:148)
12-08 20:39:38.505: E/AndroidRuntime(765):  at com.nicotera.colton.londontransitguide.RoutesActivity.urlParse(RoutesActivity.java:82)
12-08 20:39:38.505: E/AndroidRuntime(765):  at com.nicotera.colton.londontransitguide.RoutesActivity.onItemSelected(RoutesActivity.java:62)
12-08 20:39:38.505: E/AndroidRuntime(765):  at android.widget.AdapterView.fireOnSelected(AdapterView.java:892)
12-08 20:39:38.505: E/AndroidRuntime(765):  at android.widget.AdapterView.access$200(AdapterView.java:49)
12-08 20:39:38.505: E/AndroidRuntime(765):  at android.widget.AdapterView$SelectionNotifier.run(AdapterView.java:860)
12-08 20:39:38.505: E/AndroidRuntime(765):  at android.os.Handler.handleCallback(Handler.java:725)
12-08 20:39:38.505: E/AndroidRuntime(765):  at android.os.Handler.dispatchMessage(Handler.java:92)
12-08 20:39:38.505: E/AndroidRuntime(765):  at android.os.Looper.loop(Looper.java:137)
12-08 20:39:38.505: E/AndroidRuntime(765):  at android.app.ActivityThread.main(ActivityThread.java:5039)
12-08 20:39:38.505: E/AndroidRuntime(765):  at java.lang.reflect.Method.invokeNative(Native Method)
12-08 20:39:38.505: E/AndroidRuntime(765):  at java.lang.reflect.Method.invoke(Method.java:511)
12-08 20:39:38.505: E/AndroidRuntime(765):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
12-08 20:39:38.505: E/AndroidRuntime(765):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
12-08 20:39:38.505: E/AndroidRuntime(765):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T20:54:18.863

这个问题几乎每两天就会出现在 Stack Overflow 上。这是因为你不能从主线程接触网络。请参阅我的答案

[不幸的是，Msger 已经停止了。致命例外：主要](https://stackoverflow.com/questions/13349801/unfortunately-msger-has-stopped-fatal-exception-main/13349938#13349938)

在您的 RoutesActivity 中创建一个新类

```
public class RoutesActivity extends Activity{

........ blah blah

private class MyInnerClass extends AsyncTask<String, Void, String> {

  String [] directions = new String [3];
  String [] directionNames = new String [3];     

   @Override
   protected void onPreExecute() {
   super.onPreExecute();

   }

   @Override
   protected String doInBackground(String... params) {
    try{
    Pattern routeDirPattern = Pattern.compile("\\&d=(\\d{1,2})");
    Connection conn = Jsoup.connect(params[0]);
    Document doc = conn.get();
    int i = 0;
    Elements routeLinks = doc.select("a[href]");
    for (Element routeLink : routeLinks) {
        i = (i + 1);
        String name = routeLink.text();
        Attributes attrs = routeLink.attributes();
        String href = attrs.get("href");
        Matcher m = routeDirPattern.matcher(href);
        if (m.find()) {
                String number = m.group(1);
                directions [i] = number;
                directionNames [i] = name;
                Log.i(TAG, directionNames [i]);
        }
    }
    }catch(Exception e){Log.d("doinbackground exception", e.toString());}
   return "Done";
   }

   @Override
   protected void onPostExecute(String result) {
   super.onPostExecute(result);
   // do whatever you wana do with directions[] and directionNames[] here
   }
}
} 
```

更改以下内容

```
try {
        urlParse(url);
} catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
} 
```

至

```
new MyInnerClass().execute(url); 
```

# c# - 从中继器内的用户控件引发事件

> ID：13781813
> 
> 赞同：1
> 
> 时间：2012-12-08T20:49:51.600
> 
> 标签：c#, asp.net, events, repeater

我有一个引发事件的用户控件，我想在其他地方捕获。

在aspx中我有；

```
<asp:Repeater runat="server" ID="rptMarcas" OnItemDataBound="rptMarcas_OnItemDataBound">
    <ItemTemplate>
         <uc1:FabricanteArbol runat="server" ID="treeMarca"/>
    </ItemTemplate>
</asp:Repeater> 
```

在 aspx.cs 中

```
protected void rptMarcas_OnItemDataBound(object sender, RepeaterItemEventArgs e)
{
    if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem)
    {
        Albero_dll.FABRICANTES fab = (Albero_dll.FABRICANTES)e.Item.DataItem;

        App_Componentes_FabricanteArbol tree = (App_Componentes_FabricanteArbol)e.Item.FindControl("treeMarca");
        tree.cargar(fab);
        tree.OnSelectedNodeClicked += new EventHandler(OnSelectedNodeClicked);
    }
} 
```

在用户控制中；

```
public event EventHandler OnSelectedNodeClicked;
if (OnSelectedNodeClicked != null)
{
    CatalogoChangedEventArgs eCat = new CatalogoChangedEventArgs(e, SesionManager.posCatalogo, irPagina);
    OnSelectedNodeClicked(this, eCat);
} 
```

但始终`OnSelectedNodeClicked`为空。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T03:11:28.717

我看到了这个问题，但我需要你解决一些问题或告诉我确切的上下文。

```
Albero_dll.FABRICANTES fab = (Albero_dll.FABRICANTES)e.Item.DataItem; 
```

e.item.dataitem 将是您的用户控件的实例，因此 Albero_dll.FABRICANTES 应替换为您的用户控件名称。

App_Componentes_FabricanteArbol 树 = (App_Componentes_FabricanteArbol)e.Item.FindControl("treeMarca"); 是错误的，将不起作用

# performance - 为什么我的并行代码会比串行代码慢？

> ID：13781815
> 
> 赞同：9
> 
> 时间：2012-12-08T20:50:06.150
> 
> 标签：performance, parallel-processing, mpi, hpc, processing-efficiency

一般来说，并行代码是否可能比串行代码慢？我的是，我真的很沮丧！我能做些什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-09T05:19:25.663

其中，决定并行模型性能的 3 个关键因素是：

*   并行任务粒度；
*   通信开销；
*   进程之间的负载平衡。

**并行任务粒度**

并行任务的粒度必须足够大以超过并行的开销（*例如，*并行任务的创建和它们之间的通信）。由于分布式内存 (DM) 模型中进程的通信开销通常高于线程同步，因此进程应该具有更高的任务粒度。这种粒度也不应该危及负载平衡。

**tl; dr：**您的并行任务必须“大”到足以证明并行化的开销是合理的。

* * *

**通信开销**

每当一个进程打算与其他进程通信时，它都有创建/发送消息的成本，而在`synchronous communication`例程的情况下，还有等待其他进程接收消息的成本。因此，要使用 MPI 提高应用程序的性能，有必要减少进程之间交换的消息数量。

您可以在进程之间使用计算冗余，而不是等待一个特定进程的结果，这个结果可以直接在每个进程中执行。当然，当交换结果的开销与计算本身所花费的时间重叠时，这通常是合理的。另一种解决方案是替换`synchronous communication`为`asynchronous communication`. 在`synchronous communication`发送消息的进程中等待直到另一个进程收到它，在`asynchronous communication`进程中从发送调用返回后立即恢复执行。因此，与计算重叠的通信。但是，要利用`asynchronous communication`它可能需要重写代码，也可能仍然难以实现良好的重叠率。

通过使用更高性能的通信硬件可以减少通信开销，但它可能会变得昂贵。集体通信还可以提高通信性能，因为它基于硬件、网络和拓扑优化了通信。

**tl;dr：**减少并行任务之间的通信和同步量。使用：冗余计算、异步通信、集体通信和更快的通信硬件。

* * *

**进程间负载均衡**

良好的负载平衡是必不可少的，因为它可以最大限度地并行完成工作。负载平衡受进程之间的任务分配和应用程序运行的资源集的影响。

在一组固定资源中运行的应用程序中，您应该专注于任务分配。如果任务具有大致相同的计算量（例如，对于迭代），那么只需要在进程之间执行最平等的任务分配。

但是，某些应用程序可能在具有不同速度的处理器的系统中运行，或者它可能具有具有不同计算量的子任务。对于这种情况，为了促进更好的负载平衡，`farming model`可以使用任务，因为它可以通过动态任务分配来实现。但是，在此模型中，使用的通信量可能会危及效率。

另一种解决方案是您手动执行任务分配的调整。这可能会变得复杂而困难。但是，如果资源集的速度不是同质的并且在应用程序执行之间不断变化，则可能会危及任务分配调整的性能可移植性。

**tl; dr：**每个过程应该花费大约相同的时间来完成他们的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T02:59:26.063

正如其他人指出的那样，并行代码比串行代码慢的原因有很多。

如果您正在执行矩阵运算，您可能希望通过“阻塞”代码更有效地利用 cpu 缓存内存。根据 cpu 缓存大小，您可能会获得高达 3 到 4 倍的性能提升。分块本质上是处理小块或块中的矩阵，以使它们适合高速缓存。这减少了读取/写入主内存的次数并提高了性能。

另一种选择是使用 GPU。

在大部分计算用于浮点或整数运算的情况下，上述解决方案效果很好

对于通用计算，理想情况下，您希望将应用程序设计为自适应的，以便在运行时确定分配工作负载是否有性能提升，并且仅在有利时才分配。

# php - 在 PHP 中从列表框（多选）值创建一个数组

> ID：13781816
> 
> 赞同：0
> 
> 时间：2012-12-08T20:50:08.497
> 
> 标签：php, mysql, arrays, listbox

我已经看到很多关于如何在 PHP 中从数组中填充列表框的问题。我正在寻找的是完全相反的。我在表单中有一个列表框，我希望将列表框选择的选项存储在 PHP 数组中。这是我的列表框：

```
<select size=4 multiple class="formfields" id="hardwareinfo" name="hardwareinfo[]">
  <option name="ram" value="ram"> RAM </option>
  <option name="aircard" value="aircard"> Aircard </option>
  <option name="videocard" value="videocard"> Video Card </option>
  <option name="other" value="other"> Other </option>
</select></td> 
```

我想在 PHP 数组中获取用户选择的值，然后将此数组存储在 MySQL 中（我可能会使用 implode）

只要有人可以帮助我创建数组，我应该能够弄清楚其余的:)

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T21:02:09.093

从选项标签中删除名称属性。

```
<select size=4 multiple class="formfields" id="hardwareinfo" name="hardwareinfo[]">
  <option value="ram"> RAM </option>
  <option value="aircard"> Aircard </option>
  <option value="videocard"> Video Card </option>
  <option value="other"> Other </option>
</select> 
```

您只需要检查 $_POST['hardwareinfo'] 或 $_GET['hardwareinfo']，具体取决于您的表单类型。你可以通过 foreach 循环这个 var，或者简单地通过 var_dump 查看内容。

# php - 如何不将空选择选项从 html 发布到 php

> ID：13781817
> 
> 赞同：0
> 
> 时间：2012-12-08T20:50:26.777
> 
> 标签：php, forms

我的表单中有一些选择选项，它们会将数据发布到我的脚本中。但是

```
 <select name="city" id="City">
    <option></option>
    </select>
    <select name="country" id="Country">
    <option></option>
    </select> 
```

但是当它们为空时，它们会发布没有价值的数据，如下所示：

```
city=&country=& 
```

我知道我可以通过 unset 命令取消设置它们。但是当我将这些数据传递给 javascript 库（jquery）并序列化主题时，每个人都可以在 firebug 中看到它们。如何防止空选择选项不发布数据？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T21:00:06.350

如果您在这里使用 jQuery 是您可以适应和利用的东西的快速模型，那么添加禁用属性将不会提交该表单元素：

```
<form method="get" action="./">
    <select name="city" id="City">
        <option></option>
    </select>
    <select name="country" id="Country">
        <option></option>
    </select>
    <input type="submit">
</form>
<script type="text/javascript">
$(function(){
    $('form').submit(function(){
        $('select').each(function(){
            if($(this).val()==''){
                $(this).attr('disabled','disabled');
            }
        })

    })
})
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T20:56:18.363

好的，如果有空的选择框。然后至少放一个**标记，例如**

 **```
<option value="0">No data available</option> 
```

所以你可能会得到0。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T20:55:52.163

您可以通过设置 disabled 属性来禁用它们，如下所示：

```
<select name="city" disabled="disabled">
    ...
</select> 
```

这应该会阻止浏览器在其 POST 请求中发送此字段。**

# ruby-on-rails - Netbeans 6.9.1 中的 Ruby Gems 更新似乎已损坏

> ID：13781822
> 
> 赞同：0
> 
> 时间：2012-12-08T20:51:02.873
> 
> 标签：ruby-on-rails, ruby, netbeans, gem, netbeans-6.9

我正在尝试更新 NetBeans ROR 应用程序中的所有 gem，但是当我尝试使用 gems update GUI 时，该过程失败并给了我一个冗长的错误消息（粘贴在下面）关于如何解决问题的任何想法？

```
Installing gem i18n-0.6.1
System.java:-2:in `arraycopy': java.lang.ArrayIndexOutOfBoundsException
    from DefaultResolver.java:111:in `makeTime'
    from DefaultResolver.java:277:in `create'
    from DefaultResolver.java:317:in `handleScalar'
    from DefaultResolver.java:435:in `orgHandler'
    from DefaultResolver.java:455:in `node_import'
    from org/yecht/ruby/DefaultResolver$s_method_1_0$RUBYINVOKER$node_import.gen:65535:in `call'
    from CachingCallSite.java:146:in `call'
    from RubyLoadHandler.java:40:in `handle'
    from Parser.java:300:in `addNode'
    from DefaultYAMLParser.java:676:in `yyparse'
    from Parser.java:290:in `yechtparse'
    from Parser.java:284:in `parse'
    from YParser.java:152:in `load'
    from org/yecht/ruby/YParser$s_method_0_1$RUBYINVOKER$load.gen:65535:in `call'
    from JavaMethod.java:630:in `call'
    from DynamicMethod.java:186:in `call'
    from CachingCallSite.java:309:in `cacheAndCall'
    from CachingCallSite.java:148:in `call'
    from CallOneArgNode.java:57:in `interpret'
    from LocalAsgnNode.java:123:in `interpret'
    from NewlineNode.java:104:in `interpret'
    from InterpretedMethod.java:180:in `call'
    from DefaultMethod.java:172:in `call'
    from CachingCallSite.java:309:in `cacheAndCall'
    from CachingCallSite.java:148:in `call'
    from CallOneArgNode.java:57:in `interpret'
    from LocalAsgnNode.java:123:in `interpret'
    from NewlineNode.java:104:in `interpret'
    from BlockNode.java:71:in `interpret'
    from InterpretedMethod.java:180:in `call'
    from DefaultMethod.java:172:in `call'
    from CachingCallSite.java:309:in `cacheAndCall'
    from CachingCallSite.java:148:in `call'
    from CallOneArgNode.java:57:in `interpret'
    from NewlineNode.java:104:in `interpret'
    from RescueNode.java:199:in `executeBody'
    from RescueNode.java:118:in `interpretWithJavaExceptions'
    from RescueNode.java:110:in `interpret'
    from InterpretedMethod.java:180:in `call'
    from DefaultMethod.java:172:in `call'
    from CachingCallSite.java:309:in `cacheAndCall'
    from CachingCallSite.java:148:in `call'
    from FCallOneArgNode.java:36:in `interpret'
    from InstAsgnNode.java:95:in `interpret'
    from NewlineNode.java:104:in `interpret'
    from BlockNode.java:71:in `interpret'
    from EnsureNode.java:96:in `interpret'
    from BeginNode.java:83:in `interpret'
    from NewlineNode.java:104:in `interpret'
    from WhenOneArgNode.java:36:in `whenSlowTest'
    from WhenOneArgNode.java:46:in `when'
    from CaseNode.java:133:in `interpret'
    from NewlineNode.java:104:in `interpret'
    from InterpretedBlock.java:373:in `evalBlockBody'
    from InterpretedBlock.java:346:in `yield'
    from InterpretedBlock.java:303:in `yield'
    from Block.java:194:in `yield'
    from YieldNode.java:112:in `interpret'
    from NewlineNode.java:104:in `interpret'
    from BlockNode.java:71:in `interpret'
    from InterpretedBlock.java:373:in `evalBlockBody'
    from InterpretedBlock.java:346:in `yield'
    from InterpretedBlock.java:303:in `yield'
    from Block.java:194:in `yield'
    from RubyKernel.java:1251:in `loop_1_9'
    from org/jruby/RubyKernel$s_method_0_0$RUBYFRAMEDINVOKER$loop_1_9.gen:65535:in `call'
    from CachingCallSite.java:299:in `cacheAndCall'
    from CachingCallSite.java:117:in `callBlock'
    from CachingCallSite.java:132:in `callIter'
    from FCallNoArgBlockNode.java:32:in `interpret'
    from NewlineNode.java:104:in `interpret'
    from InterpretedMethod.java:160:in `call'
    from DefaultMethod.java:164:in `call'
    from CachingCallSite.java:299:in `cacheAndCall'
    from CachingCallSite.java:117:in `callBlock'
    from CachingCallSite.java:122:in `call'
    from CallNoArgBlockNode.java:64:in `interpret'
    from NewlineNode.java:104:in `interpret'
    from BlockNode.java:71:in `interpret'
    from InterpretedMethod.java:242:in `call'
    from DefaultMethod.java:196:in `call'
    from CachingCallSite.java:339:in `cacheAndCall'
    from CachingCallSite.java:197:in `callBlock'
    from CachingCallSite.java:202:in `call'
    from RubyClass.java:815:in `call'
    from DynamicMethod.java:194:in `call'
    from WrapperMethod.java:62:in `call'
    from CachingCallSite.java:329:in `cacheAndCall'
    from CachingCallSite.java:188:in `call'
    from FCallTwoArgNode.java:38:in `interpret'
    from LocalAsgnNode.java:123:in `interpret'
    from NewlineNode.java:104:in `interpret'
    from BlockNode.java:71:in `interpret'
    from EnsureNode.java:96:in `interpret'
    from InterpretedMethod.java:242:in `call'
    from DefaultMethod.java:196:in `call'
    from CachingCallSite.java:339:in `cacheAndCall'
    from CachingCallSite.java:197:in `callBlock'
    from CachingCallSite.java:202:in `call'
    from CallTwoArgBlockPassNode.java:62:in `interpret'
    from NewlineNode.java:104:in `interpret'
    from BlockNode.java:71:in `interpret'
    from InterpretedMethod.java:283:in `call'
    from DefaultMethod.java:212:in `call'
    from CachingCallSite.java:359:in `cacheAndCall'
    from CachingCallSite.java:237:in `callBlock'
    from CachingCallSite.java:252:in `callIter'
    from CallThreeArgBlockNode.java:64:in `interpret'
    from NewlineNode.java:104:in `interpret'
    from BlockNode.java:71:in `interpret'
    from InterpretedMethod.java:262:in `call'
    from DefaultMethod.java:204:in `call'
    from CachingCallSite.java:349:in `cacheAndCall'
    from CachingCallSite.java:228:in `call'
    from FCallThreeArgNode.java:40:in `interpret'
    from NewlineNode.java:104:in `interpret'
    from InterpretedBlock.java:373:in `evalBlockBody'
    from InterpretedBlock.java:346:in `yield'
    from InterpretedBlock.java:303:in `yield'
    from Block.java:194:in `yield'
    from RubyIO.java:1104:in `open'
    from RubyKernel.java:283:in `open'
    from org/jruby/RubyKernel$s_method_0_2$RUBYFRAMEDINVOKER$open.gen:65535:in `call'
    from DynamicMethod.java:198:in `call'
    from CachingCallSite.java:339:in `cacheAndCall'
    from CachingCallSite.java:197:in `callBlock'
    from CachingCallSite.java:212:in `callIter'
    from FCallTwoArgBlockNode.java:34:in `interpret'
    from NewlineNode.java:104:in `interpret'
    from IfNode.java:119:in `interpret'
    from IfNode.java:119:in `interpret'
    from NewlineNode.java:104:in `interpret'
    from BlockNode.java:71:in `interpret'
    from InterpretedMethod.java:221:in `call'
    from DefaultMethod.java:188:in `call'
    from CachingCallSite.java:329:in `cacheAndCall'
    from CachingCallSite.java:188:in `call'
    from CallTwoArgNode.java:59:in `interpret'
    from InstAsgnNode.java:95:in `interpret'
    from NewlineNode.java:104:in `interpret'
    from RescueNode.java:199:in `executeBody'
    from RescueNode.java:118:in `interpretWithJavaExceptions'
    from RescueNode.java:110:in `interpret'
    from BeginNode.java:83:in `interpret'
    from NewlineNode.java:104:in `interpret'
    from BlockNode.java:71:in `interpret'
    from InterpretedMethod.java:242:in `call'
    from DefaultMethod.java:196:in `call'
    from CachingCallSite.java:339:in `cacheAndCall'
    from CachingCallSite.java:197:in `callBlock'
    from CachingCallSite.java:202:in `call'
    from RubyClass.java:815:in `call'
    from DynamicMethod.java:194:in `call'
    from CachingCallSite.java:329:in `cacheAndCall'
    from CachingCallSite.java:188:in `call'
    from CallTwoArgNode.java:59:in `interpret'
    from DAsgnNode.java:110:in `interpret'
    from NewlineNode.java:104:in `interpret'
    from BlockNode.java:71:in `interpret'
    from InterpretedBlock.java:373:in `evalBlockBody'
    from InterpretedBlock.java:346:in `yield'
    from InterpretedBlock.java:303:in `yield'
    from Block.java:194:in `yield'
    from RubyArray.java:1630:in `eachCommon'
    from RubyArray.java:1637:in `each'
    from org/jruby/RubyArray$i_method_0_0$RUBYFRAMEDINVOKER$each.gen:65535:in `call'
    from CachingCallSite.java:299:in `cacheAndCall'
    from CachingCallSite.java:117:in `callBlock'
    from CachingCallSite.java:122:in `call'
    from CallNoArgBlockNode.java:64:in `interpret'
    from NewlineNode.java:104:in `interpret'
    from BlockNode.java:71:in `interpret'
    from InterpretedMethod.java:180:in `call'
    from DefaultMethod.java:172:in `call'
    from CachingCallSite.java:309:in `cacheAndCall'
    from CachingCallSite.java:148:in `call'
    from CallOneArgNode.java:57:in `interpret'
    from NewlineNode.java:104:in `interpret'
    from BlockNode.java:71:in `interpret'
    from RescueNode.java:199:in `executeBody'
    from RescueNode.java:118:in `interpretWithJavaExceptions'
    from RescueNode.java:110:in `interpret'
    from BeginNode.java:83:in `interpret'
    from NewlineNode.java:104:in `interpret'
    from BlockNode.java:71:in `interpret'
    from InterpretedBlock.java:373:in `evalBlockBody'
    from InterpretedBlock.java:346:in `yield'
    from InterpretedBlock.java:303:in `yield'
    from Block.java:194:in `yield'
    from RubyArray.java:1630:in `eachCommon'
    from RubyArray.java:1637:in `each'
    from org/jruby/RubyArray$i_method_0_0$RUBYFRAMEDINVOKER$each.gen:65535:in `call'
    from CachingCallSite.java:299:in `cacheAndCall'
    from CachingCallSite.java:117:in `callBlock'
    from CachingCallSite.java:122:in `call'
    from CallNoArgBlockNode.java:64:in `interpret'
    from NewlineNode.java:104:in `interpret'
    from BlockNode.java:71:in `interpret'
    from InterpretedMethod.java:139:in `call'
    from DefaultMethod.java:156:in `call'
    from CachingCallSite.java:289:in `cacheAndCall'
    from CachingCallSite.java:108:in `call'
    from VCallNode.java:85:in `interpret'
    from NewlineNode.java:104:in `interpret'
    from IfNode.java:119:in `interpret'
    from IfNode.java:119:in `interpret'
    from NewlineNode.java:104:in `interpret'
    from BlockNode.java:71:in `interpret'
    from InterpretedMethod.java:262:in `call'
    from DefaultMethod.java:204:in `call'
    from CachingCallSite.java:349:in `cacheAndCall'
    from CachingCallSite.java:228:in `call'
    from CallSpecialArgNode.java:71:in `interpret'
    from NewlineNode.java:104:in `interpret'
    from BlockNode.java:71:in `interpret'
    from CaseNode.java:138:in `interpret'
    from NewlineNode.java:104:in `interpret'
    from BlockNode.java:71:in `interpret'
    from InterpretedMethod.java:180:in `call'
    from DefaultMethod.java:172:in `call'
    from CachingCallSite.java:309:in `cacheAndCall'
    from CachingCallSite.java:148:in `call'
    from FCallOneArgNode.java:36:in `interpret'
    from NewlineNode.java:104:in `interpret'
    from RescueNode.java:199:in `executeBody'
    from RescueNode.java:118:in `interpretWithJavaExceptions'
    from RescueNode.java:110:in `interpret'
    from InterpretedMethod.java:180:in `call'
    from DefaultMethod.java:172:in `call'
    from CachingCallSite.java:309:in `cacheAndCall'
    from CachingCallSite.java:148:in `call'
    from CallOneArgNode.java:57:in `interpret'
    from NewlineNode.java:104:in `interpret'
    from BlockNode.java:71:in `interpret'
    from InterpretedMethod.java:180:in `call'
    from DefaultMethod.java:172:in `call'
    from CachingCallSite.java:309:in `cacheAndCall'
    from CachingCallSite.java:148:in `call'
    from gem:24:in `rescue_1$RUBY$__rescue___0'
    from gem:23:in `__file__'
    from gem:-1:in `load'
    from Ruby.java:685:in `runScript'
    from Ruby.java:568:in `runNormally'
    from Ruby.java:414:in `runFromMain'
    from Main.java:286:in `run'
    from Main.java:128:in `run'
    from Main.java:97:in `main' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T23:16:43.210

快速搜索会`netbeans rails arraycopy`发现[Msan Msan 来自 ruby​​-forum.com 的此线程](http://www.ruby-forum.com/topic/1756517)。它已经很老了，所以宝石版本可能会有所不同，但也许它会对你有所帮助。

我将其插入此处以防它从原始站点中消失：

> 您应该在安装 rails 之前安装 arel v 2.0.9。然后安装导轨。然后在你的 Gemfile 你应该把
> 
> 宝石'arel'，'2.0.9'。
> 
> 问题也出在 rspec 2.6.0 所以在你的 Gemfile 你应该把
> 
> 宝石'rspec-rails'，'2.6.0.rc6'。

# python - 替换列表列表中的字符串

> ID：13781828
> 
> 赞同：8
> 
> 时间：2012-12-08T20:51:36.667
> 
> 标签：python, list, python-3.x, replace, nested-lists

我有一个字符串列表列表，例如：

```
example = [["string 1", "a\r\ntest string:"],["string 1", "test 2: another\r\ntest string"]] 
```

我想`"\r\n"`用空格替换（并`":"`在所有字符串的末尾去掉）。

对于普通列表，我会使用列表理解来删除或替换类似的项目

```
example = [x.replace('\r\n','') for x in example] 
```

甚至是 lambda 函数

```
map(lambda x: str.replace(x, '\r\n', ''),example) 
```

但我无法让它适用于嵌套列表。有什么建议么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-08T20:54:25.190

好吧，想想你的原始代码在做什么：

```
example = [x.replace('\r\n','') for x in example] 
```

您在`.replace()`列表的每个元素上使用该方法，就好像它是一个字符串一样。但是这个列表的每个元素都是另一个列表！你不想调用`.replace()`子列表，你想调用它的每个内容。

对于嵌套列表，请使用嵌套列表推导！

```
example = [["string 1", "a\r\ntest string:"],["string 1", "test 2: another\r\ntest string"]]
example = [[x.replace('\r\n','') for x in l] for l in example]
print example 
```

```
[['string 1', 'atest string:'], ['string 1', 'test 2: anothertest string']] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-08T20:54:23.560

```
example = [[x.replace('\r\n','') for x in i] for i in example] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-08T22:46:56.283

如果您的列表比您给出的示例更复杂，例如，如果它们具有三层嵌套，则以下内容将遍历列表及其所有子列表，将 \r\n 替换为任何字符串中的空格它遇到了。

```
def replace_chars(s):
    return s.replace('\r\n', ' ')

def recursively_apply(l, f):
    for n, i in enumerate(l):
        if type(i) is list:
            l[n] = recursively_apply(l[n], f)
        elif type(i) is str:
            l[n] = f(i)
    return l
example = [[["dsfasdf", "another\r\ntest extra embedded"], 
         "ans a \r\n string here"],
        ['another \r\nlist'], "and \r\n another string"]
print recursively_apply(example, replace_chars) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-04-29T12:53:09.243

下面的示例，在列表列表（子列表）之间进行迭代，以替换一个字符串、一个单词。

```
myoldlist=[['aa bbbbb'],['dd myword'],['aa myword']]
mynewlist=[]
for i in xrange(0,3,1):
    mynewlist.append([x.replace('myword', 'new_word') for x in myoldlist[i]])

print mynewlist
# ['aa bbbbb'],['dd new_word'],['aa new_word'] 
```

# delphi - 如何为 TToolbar 上的图标混合图像列表？

> ID：13781831
> 
> 赞同：2
> 
> 时间：2012-12-08T20:52:29.227
> 
> 标签：delphi, toolbar, delphi-xe, imagelist

我有一个`TToolbar`显示操作按钮的按钮，它有一些内置按钮和它自己的按钮`TImageList`来为它们提供图标。

我还有一个向工具栏添加按钮的插件。它有自己的`TImageList`和自己的`TActionList`，动作列表使用图像列表中的图标。但是当我创建按钮并将它们添加到工具栏时，它们不会显示插件内图像列表中的图像；他们似乎在动作上使用 ImageIndex 属性，但使用`TImageList`工具栏，所以图像都搞砸了。

我怎样才能使在这种情况下显示的图像`TImageList`是插件内部的图像？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T20:59:29.437

工具栏具有对单个图像列表的引用。这是底层 Windows 控件的一个属性，它只是由 VCL 反映给您。

结论是您必须将所有图像放入同一个图像列表中。一个工具栏不能引用两个不同的图像列表。

一种解决方案是将您的图像列表传递给插件并允许它将字形添加到您的图像列表中。

请注意，我说的是主图像列表。当然，您对禁用图像和热门图像使用不同的图像列表。但它们并没有真正包含不同的字形——它们包含相同的字形，但呈现不同的状态。

# jquery - Google Maps API 3 出现故障

> ID：13781832
> 
> 赞同：1
> 
> 时间：2012-12-08T20:52:30.193
> 
> 标签：jquery, asp.net, jquery-ui, google-maps-api-3, master-pages

我正在尝试将谷歌地图放在 jqueryui 选项卡中。地图出现；然而，完整的地图本身并没有填满它的画布。此外，尝试滚动地图会使它变得跳跃。有没有人有任何想法？这是我正在使用的代码：

```
<%@ Page Title="" Language="C#" MasterPageFile="~/MasterPage.master" AutoEventWireup="true" CodeFile="TabsExample.aspx.cs" Inherits="TabsExample" %>

<asp:Content ID="Content1" ContentPlaceHolderID="Head" Runat="Server">
    <link href="css/jquery-ui-1.9.2.custom.css" rel="stylesheet" />
    <script src="js/jquery.min.js"></script>
    <script src="js/jquery-ui-1.9.2.custom.js"></script>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <style type="text/css">
      html { height: 100% }
      body { height: 100%; margin: 0; padding: 0 }
      #map_canvas { height: 100% }
    </style>
    <script type="text/javascript"
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB3RgCHRyhBj2Ou01h_MwJrG2uITC4pv1E&sensor=false">
    </script>
    <script type="text/javascript">
      $(document).ready(function()
      {
        var mapOptions = {
          center: new google.maps.LatLng(-34.397, 150.644),
          zoom: 8,
          mapTypeId: google.maps.MapTypeId.HYBRID
        };
        var map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);
      });
    </script>
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="HeaderContent" Runat="Server">
</asp:Content>
<asp:Content ID="Content3" ContentPlaceHolderID="TopNavigationContent" Runat="Server">
</asp:Content>
<asp:Content ID="Content4" ContentPlaceHolderID="LeftColumnContent" Runat="Server">
</asp:Content>
<asp:Content ID="Content5" ContentPlaceHolderID="RightColumnContent" Runat="Server">
</asp:Content>
<asp:Content ID="Content6" ContentPlaceHolderID="MainContent" Runat="Server">
  <div id="tabs" style="min-height: 500px;">
    <ul>
      <li><a href="#tab-1"><span>One</span></a></li>
      <li><a href="#tab-2"><span>Two</span></a></li>
      <li><a href="#APSU-tab"><span>Three</span></a></li>
    </ul>
    <div id="tab-1">
      Tab 1's Content
    </div>
    <div id="tab-2">
      Tab 2's Content
    </div>
    <div id="APSU-tab">
      <div id="map_canvas" style="width:300px; height:300px;"></div>
    </div>
  </div>
  <script type="text/javascript">
    $("#tabs").tabs();
  </script>
</asp:Content>
<asp:Content ID="Content7" ContentPlaceHolderID="FooterContent" Runat="Server">
</asp:Content> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T21:01:14.647

这是一个已知的问题。解决方案是在您显示选项卡时动态加载地图。这是一个非常简单的通用解决方案。当您加载特定选项卡时，请检查地图是否存在并在需要时加载。

```
$(document).ready(function() {

    function my_tab_reveal() {  // or whatever function you use for showing your tabs content
        // whatever your code for revealing tab content is here

        if (!loaded) {  // this checks to see if the map is not already loaded
            load(); // this loads the map
        }
    }

    var loaded = false;
    load = function() {
        // your google maps JavaScript code goes here

        // checks tiles to see if map has loaded
        google.maps.event.addListener(map, "tilesloaded", function() {
            loaded = true;
        });
    }

}); 
```

* * *

**编辑：**

根据[jQuery UI文档](http://api.jqueryui.com/tabs/#event-activate)，在激活选项卡时可以使用一个回调函数。

> *“在激活选项卡后触发（动画完成后）。”*

```
$(document).ready(function() {

    $("#tabs").on( "tabsactivate", function( event, ui ) {
        $("#map_canvas").each(function() {
            if (!loaded) {  // this checks to see if the map is not already loaded
                load(); // this loads the map
            } 
        });
    });

    var loaded = false;
    load = function() {
        // your google maps JavaScript code goes here
        var mapOptions = {
            center: new google.maps.LatLng(-34.397, 150.644),
            zoom: 8,
            mapTypeId: google.maps.MapTypeId.HYBRID
        };
        var map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);

        // checks tiles to see if map has loaded
        google.maps.event.addListener(map, "tilesloaded", function() {
            loaded = true;
        });
    }

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T21:45:51.423

另一种解决方案是在您第一次显示选项卡内容后告诉地图调整大小和重新定位。

在创建地图的行之后直接添加这些行：

```
var hasRevealedMap = false;

$('.ui-tabs').bind('tabsshow', function(event, ui) {
    $("#" + ui.panel.id + " #map_canvas").each(function() {
        if (!hasRevealedMap) {
            google.maps.event.trigger(map, "resize");
            map.setCenter(center);
            map.setZoom(8);
            hasRevealedMap = true;
        }
    });
}); 
```

# sublimetext2 - Sublime Text 2 如何更改文件侧边栏的字体大小？

> ID：13781833
> 
> 赞同：59
> 
> 时间：2012-12-08T20:52:37.537
> 
> 标签：sublimetext2, sublimetext3

文件侧边栏的当前字体大小对我来说太小了。我怎样才能让它变大？

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2012-12-08T21:46:24.950

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-02-28T12:18:21.320

谢谢！其他一些设置来更改所有可见事物的字体大小（在这些示例中，更小）！

请注意，如果您打开了一个项目（一个文件夹）并且显示了选项卡和状态栏，那么当您点击保存时，您应该会实时看到更改。

## 侧边栏树

```
{
    "class": "sidebar_tree",
    "row_padding": [0, 0],
    "indent": 6,
    "indent_offset": 17,
    ...
{
    "class": "sidebar_label",
    "color": [0, 0, 0],
    "font.bold": false,
    "font.size": 8.0
    ... 
```

## 选项卡打开文件

```
{
    "class": "tabset_control",
    ...
    "content_margin": [0, 0, 3, 1],
    "tab_overlap": 24,
    "tab_width": 180,
    "tab_min_width": 48,
    "tab_height": 18,
    ...
{
    "class": "tab_label",
    ...
    "font.size": 8.0
    ... 
```

## 状态栏

```
{
    "class": "status_bar",
    ...
    "content_margin": [0, 0, 0, 0]
    ... 
```

（我找不到在哪里设置状态栏的字体，但这会压扁底部栏）

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-10-08T14:08:49.130

***方法可能适用于 ST 的两个版本***

1.  检查您当前的设置主题：

    1.1 打开偏好/设置用户

    1.2 cmd + f 并输入主题

    1.3 你找到了你的主题（可能不是默认的，可能是苏打黑；））

2.  安装包：“PackageResourceViewer”
3.  cmd + shift + p - 打开命令托盘
4.  类型包资源查看器

    4.1 键入主题并选择主题

    4.2 选择你当前的主题文件（用于st3 dark3主题）

    4.3 cmd +f 查找“侧边栏条目”

    4.4 在块中输入：“font.size”：NUMBER 到选项

    4.5 保存

5.  请享用 ;）

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-10-09T19:37:07.223

Sublime Text 2 已经回答了这个问题，但值得一提的是，如果您使用的是版本 3，您可以简单地复制一个包文件并将其放在您的 ../Packages/User 目录中，然后覆盖那里的设置。

**编辑：**

您可能需要四处挖掘才能找到 ST3 文件在安装过程中的放置位置。

我使用的是 Ubuntu，ST3 的主包文件位于 opt/sublime_text/packages。然后我将要覆盖的包复制到 .config/sublime-text-3/Packages/User 目录中，然后对该包进行编辑。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-24T13:07:45.870

在 Sublime Text 3 中，从菜单栏中选择**Preferences** >> **Settings - User**，然后将**dpi_scale**配置添加到文件并保存。就这样。

```
{
    ......,
    "dpi_scale": 1.5  //set this value as your need.
} 
```

# java - Jprofiler Linux 上的远程分析。如何更改探查器数据文件的路径

> ID：13781835
> 
> 赞同：3
> 
> 时间：2012-12-08T20:53:02.580
> 
> 标签：java, profiling, profiler, jprofiler

我在带有附加设置的 linux 机器上运行 java (java 6) 应用程序 -agentpath:/home/myuser/jprofiler/bin/linux-x64/libjprofilerti.so=nowait,port=7777 在 Win 机器上使用 JProfiler 7.2.1 我可以连接到进程并检索分析数据。

我可以看到，在 Linux 机器上，JProfiler 在“/tmp”目录下生成了一些文件。文件名总是不同的（现在是“jagJGZkk1”和“jdcEoM0XI”）。由于堆的大小（大约 15 GB）和“/tmp”的小可用大小，我无法制作内存快照 - 随着 JProfiler 文件大小的增长，“/tmp”变得满了。

如何更改 JProfiler 数据文件的路径？是否有任何属性/解决方法？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T10:32:18.320

要更改 Java 使用的临时目录，`bin/jprofiler.vmoptions`在 JProfiler 安装目录中编辑并添加一行

```
-Djava.io.tmpdir=[path to your temp dir] 
```

# android - 在 OpenGL ES 2.0 中将图像映射到正方形（2 个三角形条）的最简单方法是什么？

> ID：13781836
> 
> 赞同：1
> 
> 时间：2012-12-08T20:53:07.197
> 
> 标签：android, opengl-es-2.0

我似乎找不到一个简单的教程来解决我怀疑是一个过于简单的问题：我有一个由三角形带构成的正方形。我想将图像映射到它（游戏精灵）。一切都是二维的，并且没有使用照明。

我找到了解决 3d 对象与照明的教程，但它们正在解决更复杂的场景。

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T21:54:10.650

在 GLES 2.0 中，[`fixed-function pipeline`](http://www.opengl.org/wiki/Fixed_Function_Pipeline)已替换为 可编程[`shaders`](http://www.opengl.org/wiki/Shader)。这意味着您不再可以简单地在对象上“启用”纹理，而必须自己创建实现。通常，您需要为`texture-coordinate`几何图形的 2d 纹理空间提供一个属性以及一个纹理采样器。

这是一个使用纹理的顶点和片段着色器的简单示例：

顶点着色器：

```
attribute vec4 vertexPosition;
attribute vec2 texCoords;
uniform mat4 mvpMatrix;
varying vec2 uv;
void main(){
    gl_Position = mvpMatrix*vertexPosition;
    uv = texCoords;
} 
```

片段着色器：

```
uniform sampler2D texture;
varying vec2 uv;
void main(){
    gl_FragColor = texture2D(texture, uv);
} 
```

然后，在绘制之前，您必须[绑定纹理](http://developer.android.com/reference/android/opengl/GLES20.html#glBindTexture%28int,%20int%29)。如果每次绘图调用只使用一个纹理，那么就这么简单。

有关加载和使用纹理的更多代码示例，请查看 Android [Api-demos中的 GLES20 示例项目](http://developer.android.com/tools/samples/index.html)

# qt - windows下更新Qt creator

> ID：13781837
> 
> 赞同：1
> 
> 时间：2012-12-08T20:53:17.427
> 
> 标签：qt

我有基于 Qt 4.7.4 的 Qt creator 2.4.1，我想使用“维护 Qt SDK”工具更新所有内容。当我尝试更新组件时，工具说没有更新。我应该重新安装所有内容还是可以添加一些存储库并且所有内容都会更新？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T22:01:53.200

SDK 不再更新。如果您想要最新版本，则需要下载并安装它们。

# java - 每次单元测试后回滚

> ID：13781838
> 
> 赞同：1
> 
> 时间：2012-12-08T20:53:21.410
> 
> 标签：java, mysql, spring, unit-testing, spring-test

我使用 Spring、Hibernate 和 MySQL 开发应用程序。我为我的一张表创建了 DAO。现在，我想测试 DAO 的方法（保存、查找等）。问题是这些方法会影响数据库数据，所以我想在特定方法执行后回滚所有更改。我尝试通过设置`defaultRollback=true`来做到这一点，`@TransactionConfiguration`但它不起作用。下面我粘贴最重要的代码片段。有谁知道如何在每种方法之后强制回滚？

我在 MySQL 中的表使用 InnoDB 引擎。事实上，在测试执行后控制台包含这样的信息： `INFO: Rolled back transaction after test execution for test context ...`但是数据库中的更改被提交了。

用户DAOTest

```
@ContextConfiguration(locations={"classpath:applicationContext.xml"})
@RunWith(SpringJUnit4ClassRunner.class)
@TransactionConfiguration(transactionManager="transactionManager", defaultRollback=true)
@Transactional
public class UsersDAOTest {

    @Autowired
    UsersHibernateDAO usersDAO;

    @Test
    public void test1() {
        List<Users> results = usersDAO.findAll();
        Assert.assertEquals(0, results.size());
    }

    @Test
    public void test2() {
        Users user = new Users("mchrobok", "12345678901234567890123456789012");
        usersDAO.saveOrUpdate(user);
        List<Users> results = usersDAO.findAll();
        Assert.assertEquals(1, results.size());     
    }   
} 
```

休眠 (hibernate.cfg.xml)

```
<hibernate-configuration>
    <session-factory>
        <property name="hibernate.dialect">org.hibernate.dialect.MySQLDialect</property>    
        <property name="hibernate.show_sql">true</property>
        <property name="hibernate.hbm2ddl.auto">create-drop</property>

        <mapping class="pl.fp.microblog.domain.Users"/>
    </session-factory>
</hibernate-configuration> 
```

弹簧配置（applicationContext.xml）

```
<beans>
     <context:component-scan base-package="pl.fp.microblog" />
     <tx:annotation-driven />

     <beans:bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource"    destroy-method="close">
         <beans:property name="driverClassName" value="com.mysql.jdbc.Driver"/>
         <beans:property name="url" value="jdbc:mysql://localhost:3306/Microblog"/>
         <beans:property name="username" value="root"/>
         <beans:property name="password" value="root"/>
     </beans:bean>

     <beans:bean id="sessionFactory"
        class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
     <beans:property name="dataSource" ref="dataSource" />
         <beans:property name="configLocation">
             <beans:value>
                 hibernate.cfg.xml
         </beans:value>
         </beans:property>
     </beans:bean>

     <beans:bean id="transactionManager"
            class="org.springframework.orm.hibernate3.HibernateTransactionManager">
         <beans:property name="sessionFactory" ref="sessionFactory" />
     </beans:bean>

     <beans:bean name="usersDAO" class="pl.fp.microblog.dao.UsersHibernateDAO">
         <beans:property name="sessionFactory" ref="sessionFactory" />
     </beans:bean>
</beans:beans> 
```

**编辑**

UsersDAO（它是通用的，但没关系）

```
public class GenericHibernateDAO<T> implements GenericDAO<T> {
    private SessionFactory sessionFactory;
    private Class<?> persistClass;

    public GenericHibernateDAO() {
        ParameterizedType type = ((ParameterizedType)getClass().getGenericSuperclass());
        persistClass = ((Class<?>) type.getActualTypeArguments()[0]);
    }

    public void setSessionFactory(SessionFactory sessionFactory) {
        this.sessionFactory = sessionFactory;
    }

    @Override
    public List<T> findAll() {
        Criteria criteria = sessionFactory.openSession().createCriteria(persistClass);
        return criteria.list();
    }

    @Override
    public void saveOrUpdate(T entity) {
        sessionFactory.openSession().saveOrUpdate(entity);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T21:56:59.233

您正在休眠代码中打开一个新会话，您应该使用 getCurrentSession() 代替。

您的代码中的问题是您的 DAO 类尝试自行管理事务。在现代 Spring 应用程序中，事务管理应该在服务层中执行。

所以这意味着通常你的服务方法应该用`@Transactional`.

# objective-c - 照片保存失败时 UIAlertView 不显示错误

> ID：13781839
> 
> 赞同：1
> 
> 时间：2012-12-08T20:53:25.687
> 
> 标签：objective-c, ios, error-handling, uiimage, uialertview

我又在苦苦挣扎，这次得到一个警报视图以显示正确的错误信息，我有一个 2 指点击手势，当您单击例如带有 2 个手指的谷歌图像（全尺寸）图像时，它会保存图像并显示正确的警报“图像已保存”，但您可以用 2 根手指单击任何地方，它会显示“图像已保存”，即使它没有，因为没有要保存的图像。因此，如果有人可以在他们对图像以外的其他东西做手势时帮助我显示消息这是完整的代码问题可能在其他地方，因为 *tagname 变量也未使用提前谢谢

```
 - (void)webViewDidFinishLoad:(UIWebView *)webView
{
        [[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:NO];

//DoubleTap Gesture
UITapGestureRecognizer *doubleTap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(doubleTap:)];
doubleTap.numberOfTouchesRequired = 2;
[self.myWebView addGestureRecognizer:doubleTap];

}
//Double Tap Method
-(void) doubleTap :(UITapGestureRecognizer*) sender {
int scrollPositionY = [[self.myWebView stringByEvaluatingJavaScriptFromString:@"window.pageYOffset"] intValue];
int scrollPositionX = [[self.myWebView stringByEvaluatingJavaScriptFromString:@"window.pageXOffset"] intValue];

int displayWidth = [[self.myWebView stringByEvaluatingJavaScriptFromString:@"window.outerWidth"] intValue];
CGFloat scale = myWebView.frame.size.width / displayWidth;

CGPoint pt = [sender locationInView:self.myWebView];
pt.x *= scale;
pt.y *= scale;
pt.x += scrollPositionX;
pt.y += scrollPositionY;

NSString *js = [NSString stringWithFormat:@"document.elementFromPoint(%f, %f).tagName", pt.x, pt.y];
NSString * tagName = [self.myWebView stringByEvaluatingJavaScriptFromString:js];

NSString *imgURL = [NSString stringWithFormat:@"document.elementFromPoint(%f, %f).src", startPoint.x, startPoint.y];
NSString *urlToSave = [self.myWebView stringByEvaluatingJavaScriptFromString:imgURL];

NSURL *url = [NSURL URLWithString:urlToSave];

UIImage *image = [UIImage imageWithData:[NSData dataWithContentsOfURL:url]];
UIImageWriteToSavedPhotosAlbum(image,self,@selector(savedPhotoImage:didFinishSavingWithError:contextInfo:),nil);
}
//Alert for double tap save photo
- (void)   savedPhotoImage:(UIImage *)image
  didFinishSavingWithError:(NSError *)error
           contextInfo:(void *)contextInfo
{
UIAlertView *alert;

// Unable to save the image
if (error)
    alert = [[UIAlertView alloc] initWithTitle:@"Error"
                                       message:@"Unable to save image to Photo Album."
                                      delegate:self cancelButtonTitle:@"Ok"
                             otherButtonTitles:nil];
else // All is well
    alert = [[UIAlertView alloc] initWithTitle:@"Success"
                                       message:@"Image saved to Photo Album."
                                      delegate:self cancelButtonTitle:@"Ok"
                             otherButtonTitles:nil];
[alert show];
} 
```

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-12-08T21:25:37.587

```
if (error)
alert = [[UIAlertView alloc] initWithTitle:@"Error"
                                   message:@"Unable to save image to Photo Album."
                                  delegate:self cancelButtonTitle:@"Ok"
                         otherButtonTitles:nil];
else // All is well.
   //Without a curly brace here, only one line will get executed. If you want [alert show] to get executed, you have to put a curly brace above and right after wards
  {
    alert = [[UIAlertView alloc] initWithTitle:@"Success"
                                   message:@"Image saved to Photo Album."
                                  delegate:self cancelButtonTitle:@"Ok"
                         otherButtonTitles:nil];
    [alert show];
 }
} 
```

# android - 更改 ListView 中第一项的背景颜色

> ID：13781849
> 
> 赞同：3
> 
> 时间：2012-12-08T20:54:21.553
> 
> 标签：android, listview, colors, android-listview

我的列表视图有一个自定义适配器：

```
 @Override
    public View getView(int position, View convertView, ViewGroup parent) {
    View row = convertView;

    if(row == null)
    {
        LayoutInflater inflater = ((Activity)context).getLayoutInflater();
        row = inflater.inflate(layoutResourceId, parent, false);

        holder = new DataHolder();
        holder.imgIcon = (ImageView)row.findViewById(R.id.imgIcon);
        holder.locationName = (TextView)row.findViewById(R.id.locationName);
        holder.locationElevation = (TextView)row.findViewById(R.id.lcoationElevation);
        holder.locationDistance = (TextView)row.findViewById(R.id.locationDistance);
        row.setTag(holder);
    }
    else
    {
        holder = (DataHolder)row.getTag();
    }

    Data data = gather[position];
    holder.locationName.setText(data.locationName);
    holder.locationElevation.setText(data.locationElevation);
    holder.locationDistance.setText(Double.toString(data.heading));
    holder.imgIcon.setImageBitmap(data.icon);

    return row;
} 
```

我的列表视图填充了项目，我只希望第一个项目具有红色背景色。当我滚动时，所有其他项目都保持有自己的颜色，但第一个项目仍然是红色。有任何想法吗？每次我尝试某些东西时，红色背景都会在我滚动时移动到其他行。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-08T20:56:36.923

> 每次我尝试某些东西时，红色背景都会在我滚动时移动到其他行。

我猜你没有 else 子句。适配器重用每个行布局以节省资源。因此，如果您更改布局中的值，它将在下次回收此特定布局时结转。只需添加一条 else 语句，即可将回收的 View 返回到其默认状态：

```
if(position == 0)
    row.setBackgroundColor(Color.RED);
else
    row.setBackgroundColor(0x00000000); // Transparent 
```

（如果背景是特定颜色，而不是透明，则需要更改该值。）

# python - 到 MySQL 数据库 Python 的低级套接字连接

> ID：13781850
> 
> 赞同：2
> 
> 时间：2012-12-08T20:54:22.333
> 
> 标签：python

你好我想问一下：

如何仅使用低级套接字建立与 MySQL 数据库（没有其他库）的套接字连接，以便随后发送命令。

感谢您的任何帮助

编辑是否也可以通过 HTTP 连接？（我认为这没有意义，但我想我会问）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T21:44:52.860

当然有可能，您“只需”实现[MySQL Client/Server Protocol](http://dev.mysql.com/doc/internals/en/client-server-protocol.html)。

如果您想看看如何做到这一点（或者如果您自己做的工作量太大），请查看[pymysql](http://pypi.python.org/pypi/PyMySQL)或[myconnpy](http://pypi.python.org/pypi/mysql-connector-python)。

# ruby-on-rails - Rails 3 验证，两个字段中只有一个字段，其他字段为零

> ID：13781855
> 
> 赞同：1
> 
> 时间：2012-12-08T20:54:55.370
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord, ruby-on-rails-3.2

在我的模型 package.rb

```
 validates_presence_of :duration, :unless => :expiration_date?
  validates_presence_of :expiration_date, :unless => :duration? 
```

我只想输入其中一项。其他字段必须设置为零。只有其中一个需要有价值。但我仍然可以创建一个包含这两个字段的包。可能是其他我遗漏了什么或者我需要使用其他方法吗？这不是正确的做法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T21:06:19.730

尝试创建自定义验证。

```
validate :expiration

def expiration
  unless duration or expiration_date
    errors.add_to_base "Need a way to determine expiration"
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T21:17:20.417

快速而肮脏的解决方案：

```
require 'active_model'

class Person
  include ActiveModel::Validations

  attr_accessor :aa, :bb

  validate :only_one_present

  def initialize(options = {})
    self.aa = options[:aa]
    self.bb = options[:bb]
  end

  private

  def only_one_present
    if both_present || no_attr_present
      errors.add(:base, 'Invalid!')
    end
  end

  def both_present
    !aa.nil? && !aa.empty? && !bb.nil? && !bb.empty?
  end

  def no_attr_present
    (aa.nil? || aa.empty?) && (bb.nil? || bb.empty?)
  end
end

puts Person.new(aa: 'asad', bb: 'sdsd').valid? # => false
puts Person.new(aa: nil, bb: 'sdsd').valid? # => true
puts Person.new(aa: 'asad', bb: nil).valid? # => true
puts Person.new(aa: nil, bb: nil).valid? # => false 
```

当然，您必须先编写正确的规范，然后可以为此提取验证器类。

**编辑：**

如果使用 ActiveSupport ，您可以更改`nil?`和`empty?`组合。`present?``blank?`

# c - 如何允许用户在我的 CLI 中定义变量？

> ID：13781859
> 
> 赞同：1
> 
> 时间：2012-12-08T20:55:35.510
> 
> 标签：c, command-line-interface

我用 C 语言编写了一个简单的 CLI，它可以理解四个基本指令：两个数字的加法、减法和乘法，然后退出。

我可以`add(4,5)`在提示后输入类似的内容，并且效果很好。但我希望用户能够定义变量并在之后使用它们。我的意思是，用户输入`myvar = myobj(param_1,param_2)`然后`mymethod(myvar)`一切正常。

我怎样才能得到这个？

编辑：

最后，我使用了 Troy Hanson 用 C 语言编写的 uthash 库，您可以在[http://uthash.sourceforge.net/ 找到](http://uthash.sourceforge.net/)

感谢您的所有回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T21:42:39.760

第一部分是解析（“你将如何识别输入中的名称？”），第二部分：“如何存储和管理变量？”。

关于*解析*。如果您的解析器非常简单，只需在应该识别整数的地方进行一些额外的检查，如果没有，请在变量存储中按名称查找值（阅读下文）。建议使用一些正则表达式将输入拆分为有意义的部分（“词素”，用编译器/解释器的说法）。

关于*存储*。您需要一个能够通过名称轻松快速地访问项目并支持添加和删除条目的结构。这可以通过映射或哈希表很好地处理（C 标准库中没有标准映射实现，C++ 中的`<map>`/`<unordered_map>`就足够了）。对于少量的变量，可以只使用一个数组或一个列表`struct variable { const char *name; vardata_t var; }`（尽管查找可能会越来越慢，您可以考虑使用二分查找来增强这一点）。

# php - 有人可以建议另一种请求服务器的方法['HTTPS']

> ID：13781861
> 
> 赞同：4
> 
> 时间：2012-12-08T20:56:03.833
> 
> 标签：php

我已经在我的网站上安装了 OpenCarton，一切都很好，直到我尝试为安全区域正确设置 SSL。

我目前正在通过对整个站点强制启用 https 来使站点正常工作，但是当以“正确”方式设置安全页面时，它无法使安全页面正常工作。

我不是 php 方面的专家，所以我希望你把你当作一个*白痴*！我边走边学。

我通过 OpenCart 论坛研究了一个没有成功的解决方案。

问题显然是“不安全的内容”，因为在访问（例如，结帐）时，基本 href 仍然是 http 而不是 https。

我已经发现可能的原因是我的虚拟主机不支持变量 server['HTTPS']，他们建议询问 OpenCart，但近一周后我没有得到任何有用的答案！

/controller/common/header.php 中的以下几行是问题所在。

```
 if (isset($this->request->server['HTTPS']) && (($this->request->server['HTTPS'] == 'on') || ($this->request->server['HTTPS'] == '1'))) {
        $this->data['base'] = $this->config->get('config_ssl');
    } else {
        $this->data['base'] = $this->config->get('config_url');
    } 
```

再往下看文件：

```
if (isset($this->request->server['HTTPS']) && (($this->request->server['HTTPS'] == 'on') || ($this->request->server['HTTPS'] == '1'))) {
        $server = HTTPS_IMAGE;
    } else {
        $server = HTTP_IMAGE;
    } 
```

所以我需要的是另一种替换这些行的方法。

我在这里的另一篇文章中找到了一些建议的替代方案，看起来类似的问题，但我不知道如何实现它们。

如果有人有耐心，逐步编辑会很有帮助。

如果需要，我可以提供更多信息，但不想太早太远。

谢谢

罗宾

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T21:09:25.003

```
if (isset($this->request->server('SERVER_PORT')) && (($this->request->server('SERVER_PORT') == '443'))) {
    $this->data['base'] = $this->config->get('config_ssl');
} else {
    $this->data['base'] = $this->config->get('config_url');
} 
```

并对您的其他代码片段执行相同的操作。您基本上检查服务器正在运行的端口。HTTP 将在端口 80 上提供，HTTPS 将在端口 443 上提供。

# android - 智能 GPS 使用 - 仅当应用程序在前台时

> ID：13781872
> 
> 赞同：0
> 
> 时间：2012-12-08T20:56:45.067
> 
> 标签：android, gps

我想在我的应用程序中使用 GPS，但以某种特定方式。我只想在用户对应用程序执行某些操作时使用它，但是当应用程序进入睡眠状态时，GPS 应该停止执行操作。我想知道如何管理这一点，我不必在所有活动中管理 gps，而只需在一个类或类似的东西中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T21:02:14.913

`onPause()`如果 GPS 仅用于一个 Activity调用 Activity 的方法时关闭 GPS 。

```
@Override
protected void onPause()
{
//turn of GPS code here
super.onPause();
} 
```

如果您的 GPS 正在服务中运行，您必须让服务知道您的应用程序是否正在运行，您可以做的是在服务中创建一个静态布尔值，并且每次`onResume()`调用任何 Activity 的方法时，将服务的布尔值设置为 true . 每次活动暂停时，将布尔值设置为 false。

# java - gluLookAt 第一人称视图

> ID：13781874
> 
> 赞同：0
> 
> 时间：2012-12-08T20:56:52.730
> 
> 标签：java, opengl, lwjgl

我正在尝试将我的太空侵略者游戏切换到第一人称视角，即从飞船上看世界的视角。我对我应该看什么有点困惑。我目前在 gluLookAt 中使用这些参数：

```
GL11.glMatrixMode(GL11.GL_MODELVIEW);
GL11.glLoadIdentity();
GLU.gluLookAt(ship3dPos.x, ship3dPos.y, ship3dPos.z,400.0f, 600.0f,-50.0f, 0.0f, 1.0f,-0.0f); 
```

我不确定我应该将参数 4,5 和 6 设置为什么，以了解整个世界（窗口为 800/600）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T17:03:21.683

如果您想要第一人称视图，则参数 0 1 2 将是玩家，3 4 5 将是他们正在寻找的地方，而 6 7 8 将是向上的。

gluLookAt(eye.x,eye.y,eye.z,center.x,center.y,center.z,up.x,up.y,up.z)

向上向量 - 定义视图的“向上”是什么![在此处输入图像描述](../Images/2f952d41c2d2ab9d55e94ca6e32c532b.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T16:55:15.617

根据您评论中的说明，您希望您所看到的点的 x 坐标 ( `centerx`) 随船的位置而变化。所以这应该和`ship3dPos.x`.

我们仍然需要弄清楚的一件事是飞船和外星人的 z 深度。我将假设它们现在是相等的，在这种情况下`centerz`将是那个深度。如果它们不相等，那么我们需要做更多的数学运算，`centery`下面的答案会略有变化。

你说你想“向上”看外星人，所以你需要一个比 更大的 y 值`ship3dPos.y`。请记住，“lookAt”点可以是视线上的任何点，因此（再次假设深度相同）`ship3dPos.y+1.0`将起作用，或者如果您对估计为 500 作为外星人的 y 位置感到满意你也可以使用它。基本上，只要深度相同并且外星人的 y 位置大于船的位置，您就可以使用任何大于`ship3dPos.y`.

根据上述假设，您的“lookAt”向量 (centerx, centery, centerz) 将是：

```
ship3dPos.x, ship3dPos.y+1.0, ship3dPos.z 
```

但是在您的 gluLookAt() 调用中还有一个组件需要注意：`up`向量。如果我们将`up`向量保留为 (0,1,0)，您仍将直接查看屏幕。我将假设您真正想要的是沿着屏幕的平面（xy 平面）看，在这种情况下`up`应该在 z 方向，向上的向量是：

```
0.0f, 0.0f, 1.0f 
```

试一试，看看它是否符合您的要求。

# r - 使用字符向量对多个变量进行强制评估

> ID：13781881
> 
> 赞同：4
> 
> 时间：2012-12-08T20:57:39.103
> 
> 标签：r

有没有办法使用字符向量强制评估多个变量？

例如：

```
x = 1
y = 2 
```

而不是这样做：

```
force( x )
force( y ) 
```

做这样的事情：

```
force( ls() ) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T13:41:33.873

替换`force()`为`eval(as.symbol())`可以解决问题：

```
## Modified from an example in ?force (h.t. @flodel)
g <- function(x,y) {
    lapply(ls(), function(X) eval(as.symbol(X))) 
    function() x+y 
}
lg <- vector("list", 4)
for (i in 1:2) for (j in 1:2) lg[[i+j-1]] <- g(i,j)
lg[[1]]()
# [1] 2 
```

这是有效的，因为，如中所述`?force`：

> [force] 是语义糖：只评估符号会做同样的事情

# asp.net-mvc - 在 Asp.net mvc 中渲染 html 后是否有挂钩点？

> ID：13781890
> 
> 赞同：2
> 
> 时间：2012-12-08T20:58:48.593
> 
> 标签：asp.net-mvc

在呈现 html 之后和在 Asp.net mvc 中发送客户端之前是否有挂钩点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T21:08:19.730

是的，您可以在控制器中或通过操作过滤器属性使用[OnResultExecuted 。](http://msdn.microsoft.com/en-us/library/system.web.mvc.actionfilterattribute.onresultexecuted.aspx)

# html - 防止 HTML5 Web 应用重新启动

> ID：13781892
> 
> 赞同：0
> 
> 时间：2012-12-08T20:59:08.513
> 
> 标签：html, ios6

每次我在 iOS6 中切换回我的 Web 应用程序时，它都会从登录页面开始。我需要它像 safari 一样保留当前页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-09T07:32:16.157

据我所知，您需要将任何变量保存在您使用的任何存储中，然后在加载 Web 应用程序时加载这些变量。这很痛苦，但这是我知道的唯一方法。

# macos - 如何控制非applescript应用程序？

> ID：13781895
> 
> 赞同：2
> 
> 时间：2012-12-08T20:59:31.280
> 
> 标签：macos, applescript, playlist

我正在开发一个 osx 应用程序，它显示 Traktor Pro（DJ 软件）中正在播放的内容的实时提要，traktor 使用 .nml 文件作为其曲目历史/播放列表，然后我将对其进行解析。该文件包含当前集合的历史（曲目、艺术家、长度等）。

问题是 Traktor 仅在关闭时或用户将曲目列表保存在 .nml 文件中时才保存文件。由于 traktor 不支持苹果脚本，我不知道如何自动导出。

该文件必须大约每 1-2 分钟保存/更新一次。

这是必须在后台自动执行的操作

应用布局： ![](../Images/ea02ef4270e8b0fbd61397714ce41cf2.png)

第一次出口行动：

![](../Images/19a12b4ab9b5f0d6e3dd41ef5460c49b.png)

第二次出口行动 ![](../Images/f2b17180fad13bad97ef0e7dec7eea38.png)

在我的研究中，我发现了这个：http://www.macosxautomation.com/applescript/uiscripting/index.html 但我不确定它是否可以与 traktor 菜单一起使用，以及如何使用？

所以问题是：我如何控制像 Traktor Pro 这样的非 AppleScript 应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T03:31:04.477

“非 AppleScript” 我假设您的意思是应用程序根本没有 AppleScript 字典。 [辅助功能检查器](http://developer.apple.com/library/mac/#documentation/Accessibility/Conceptual/AccessibilityMacOSX/OSXAXTesting/OSXAXTestingApps.html)通常是补救措施，如果不是[UI 浏览器](http://pfiddlesoft.com/index.html)更高级。

方法：

1.  打开辅助设备（正如您在研究中发现的那样）
2.  使用 Accessibility Inspector 确定您需要的 UI 元素
3.  编写闪亮的新 AppleScript（如果需要，重复步骤 #2）

# c - C中的Levenshtein距离，所需内存为O（m）

> ID：13781898
> 
> 赞同：1
> 
> 时间：2012-12-08T20:59:57.047
> 
> 标签：c, memory, edit-distance

我正在编写一个代码来计算两个给定字符串 t 和 s 的编辑距离，其中 m = strlen(t) 和 n = strlen(s)，并且代码应该只使用 O(m) 中的内存。此外，计算两个大约 50 个字符的字符串的时间不应超过 4 秒。我编写的代码满足后者，但我不确定第一个，所以如果你能检查它是否使用不超过 O(m) 的内存，我会很高兴。如果没有，听到一些提示如何做到这一点也很有用。谢谢。

```
#include <stdio.h>

/************************************/
/* TODO: Insert possible help       */
/*       functions in here          */
/************************************/

int min (int a[], int l) {
    int i, min = a[0];
    for (i = 1; i < l; i++) {
        if (a[i] < min) {
            min = a[i];
        }
    }
    return min;
}

int main() {
    /* n, m, s, t are configurable in the source, i.e. the values here are 
            only an example and shall be changed to any value.*/
    const int n = 58; /* length of s, > 0 */
    const int m = 54; /* length of t, > 0 */
    char *s = "Calculateanddisplaythenumberofcharacterswithinarewrwegurie";
    char *t = "Simplycopyeverythinginsideandpasteitwhereogwrgheigrber";

/* Save the edit distance in res */
    int res;

int matrix[n+1][m+1];

int i, j;

for (i = 0; i <= m; i++) {
        matrix[n][i] = m-i;
    }
    for (i = 0; i <= n; i++) {
        matrix[i][m] = n-i;
    }

for (i = n-1; i >= 0; i--) {
        for (j = m-1; j >= 0; j--) {
        int cost = (s[i] != t[j]);
        int b[3];
        b[0] = 1+matrix[i][j+1];
        b[1] = 1+matrix[i+1][j];
        b[2] = matrix[i+1][j+1]+cost;
        matrix[i][j] = min(b, 3);
        }
    }

res = matrix[0][0];

/* Output */
    printf("The edit distance is %d.\n\n", res);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T06:45:55.027

你只需要在矩阵中回看 1 行，所以第三行可以和第一行在同一个地方，第四行可以和第二行在同一个地方，依此类推。你只需要在矩阵中的两行矩阵。所以：

```
int matrix[n+1][m+1]; 
```

变成

```
int matrix[2][m + 1]; 
```

# delphi - OTL - 按需终止任务

> ID：13781900
> 
> 赞同：1
> 
> 时间：2012-12-08T21:00:03.897
> 
> 标签：delphi, delphi-xe2, omnithreadlibrary

如何按需终止任务？当我这样做时：

```
CreateTask(TWorker.Create())
                    .Invoke(@TWorker.Execute)
                    .MonitorWith(FEventMonitor)
                    .SetParameter('ThreadID',i)
                    .Join(FWorkers)
                    .WithLock(FLockToken).Schedule(GlobalOmniThreadPool).WaitFor(0);

if Assigned(FWorkers) then begin
  // FWorkers.TerminateAll; freeze 
     FWorkers.TerminateAll(0); // freeze
     FWorkers:=nil;
     GlobalOmniThreadPool.CancelAll;
     Log('All tasks stopped',Form1.Memo1);
  end
   else begin
   Log('Nothing to stop',Form1.Memo1);
  end; 
```

主应用程序冻结。即使只有 1 个任务正在运行，我是在调试器外部还是内部运行它并不重要。

因为我不想将此代码放在任务中 30 次。令用户和程序员感到沮丧。

```
If GlobalCancel=true then
Task.Terminate; 
```

如果没有这个，应该有一种方法可以在全球范围内做到这一点。

# java - 将 substring() 的 endIndex 减 1 的原因

> ID：13781907
> 
> 赞同：5
> 
> 时间：2012-12-08T21:01:28.220
> 
> 标签：java, arrays, string

> **可能重复：**
> [为什么 from index 包含但 end index 是独占的？](https://stackoverflow.com/questions/6339158/why-from-index-is-inclusive-but-end-index-is-exclusive)

`substring()`方法=>`String substring(int beginIndex, int endIndex)`

描述：

> 返回一个新字符串，它是该字符串的子字符串。第一个整数参数指定第一个字符的索引。第二个整数参数是最后一个字符的索引 - 1。

看看下面的代码：

```
String anotherPalindrome = "Niagara. O roar again!"; 
String roar = anotherPalindrome.substring(11, 15); 
```

输出：`roar`

现在，如果 JVM 不减`int endIndex`一，我们可以直接使用`substring(11,14)`，那不是更方便，更不容易出错（人为方面）吗？`endIndex`如果你没有仔细阅读描述，当你认为这只是正常的索引时，你可能只是挠了半个小时（就像我一样） 。Java 语言的创造者为什么要把它减一？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-08T21:07:00.690

它有几个优点：

```
s.substring(0, s.length()) 
```

总是正确的。还：

```
s.substring(i, j) 
```

结果字符串的大小始终为`j - i`. 更具体地说`s.substring(0, j)`，将始终返回`j`字符。最后，这意味着如果您想`n`在索引之后获取字符，`i`您只需说：

```
s.substring(i, i + n) 
```

提取字符串的后缀（最后一个`n`字符）也更容易：

```
s.substring(s.length() - n, s.length()) 
```

例如提取文件扩展名：

```
s.substring(s.indexOf('.') + 1, s.length()) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-08T21:10:37.170

将其视为对字母之间的间隙进行编号，而不是对字母本身进行编号：

```
 N i a g a r a . _ O  _  r  o  a  r  _  a  g  a  i  n  !
0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 
```

显然，`roar`是 和 之间的子`11`串`15`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T21:07:34.043

这与以下问题相同：

“为什么 Java 中的数组从 0 开始而不是从 1 开始”。

实际上，由于数组从 0 开始，您通常会这样写：

```
for(int i = 0; i < ar.length; i++) 
```

同样，如果您想要从 start 开始并在 end 结束的子字符串，您将使用类似：

```
for(int i = start; i < end; i++)
{
    //get ar[i]
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-08T21:12:42.333

substring 似乎经常与 indexOf 方法一起使用。在这些情况下，您可以直接使用找到的索引作为 endIndex 参数将字符串截断为分隔符字符串。例子：

```
 String text = "filename.ext";

    int pos = text.indexOf(".ext");
    String name = text.substring(0, pos);
    assertEquals("filename", name); 
```

在这些情况下，`pos`变量已经包含点的索引，并且 substring 可以切断字符串直到点。

# c - 设备驱动程序：如何以编程方式访问实际的引脚/硬件？

> ID：13781908
> 
> 赞同：1
> 
> 时间：2012-12-08T21:01:37.487
> 
> 标签：c, linux-device-driver, raspberry-pi, gpio

如果您认为这个问题的构造不正确，请查看其原始版本。我被要求将这个问题简化为最小形式。

如果我正在编写 Linux 设备驱动程序，如何以编程方式访问实际的 GPIO 引脚？例如：

```
// Turn a green LED on by sending the GPIO pins 0x11223344
int cmd = encode(Commands.TURN_GREEN_ON);
send_to_gpio_pins(cmd); 
```

同样，如果这不清楚，那是因为我试图遵守社区规则以使其保持简单、愚蠢。在这种情况下，请阅读我的这个问题的第一个版本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T21:58:05.933

Linux 设备驱动程序应该可以访问 arch 的*gpio*模块提供的一组功能。由于我熟悉 Atmel ARM 代码并且不确定 RPI 使用的 Broadcom SoC，这里有一些真正的*gpio*代码。

ARM SoC 上的 I/O 设备通常是内存映射的（即没有单独的 I/O 地址空间）。这些物理地址可以映射到内核虚拟地址空间。（外设寄存器的地址通常由单独的设备驱动程序映射以供其专用。）
一旦映射到虚拟内存中，包含或控制 GPIO 引脚状态的寄存器可以通过普通的读取或写入内存操作简单地访问（同时符合 C 语言要求）。有关这些设备寄存器中每个位的确切分配/功能，请参阅[Broadcom SoC 硬件文档](http://www.raspberrypi.org/wp-content/uploads/2012/02/BCM2835-ARM-Peripherals.pdf)。

在将 GPIO 用作输入引脚或输出引脚之前，必须配置 GPIO 引脚。引脚通常有多种用途（它是“多路复用的”），因此必须在*早期电路板初始化*期间选择其中一种特定功能。这些分配是通过写入设备配置寄存器（映射到内存位置）来执行的。

用于写入 GPIO 引脚值的 Atmel 函数（来自[arch/arm/mach-at91/gpio.c](http://lxr.free-electrons.com/source/arch/arm/mach-at91/gpio.c)）：

```
/*
 * assuming the pin is muxed as a gpio output, set its value.
 */
int at91_set_gpio_value(unsigned pin, int value)
{
        void __iomem    *pio = pin_to_controller(pin);
        unsigned        mask = pin_to_mask(pin);

        if (!pio)
                return -EINVAL;
        __raw_writel(mask, pio + (value ? PIO_SODR : PIO_CODR));
        return 0;
}
EXPORT_SYMBOL(at91_set_gpio_value); 
```

读取 GPIO 引脚值的 Atmel 函数：

```
/*
 * read the pin's value (works even if it's not muxed as a gpio).
 */
int at91_get_gpio_value(unsigned pin)
{
        void __iomem    *pio = pin_to_controller(pin);
        unsigned        mask = pin_to_mask(pin);
        u32             pdsr;

        if (!pio)
                return -EINVAL;
        pdsr = __raw_readl(pio + PIO_PDSR);
        return (pdsr & mask) != 0;
}
EXPORT_SYMBOL(at91_get_gpio_value); 
```

希望您可以在您使用的内核中找到类似的代码（例如，grep*符号*`System.map`文件以获得“gpio”）。

# objective-c - 故事板从 Push Segue 崩溃切换视图

> ID：13781911
> 
> 赞同：0
> 
> 时间：2012-12-08T21:01:56.830
> 
> 标签：objective-c, storyboard, xcode4.5, segue, iphone-5

我有一个带有两个视图的故事板，一个用于 3.5 英寸 iPhone 屏幕，一个用于 4 英寸 iPhone 屏幕。在 AppDelegate.m 下`didFinishLaunchingWithOptions:`我有：

```
ViewController *viewc = [[ViewController alloc] init];
[viewc performSegueWithIndentifier:@"second" sender:viewc]; 
```

故事板的设置如下： [image http://www.fileden.com/files/2012/6/18/3317719/screenshot8.jpg](http://www.fileden.com/files/2012/6/18/3317719/screenshot8.jpg) 应用程序崩溃并且错误表明没有标识符为“秒”的segue ' 即使图像显示标识符被命名为 'second'。我需要以编程方式创建一个转场吗？如果是这样，我该怎么做？如果不是，有什么问题？我正在使用 Xcode 4.5。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T23:38:18.113

您正在分配与情节提要中的实例不同的实例，因此它没有称为“第二个”的segue。此外，您的控制器看起来不像嵌入在导航控制器中，因此您不能使用 push segue。如果您在左侧显示的控制器是情节提要中的初始控制器，则无需在代码中执行任何操作即可将其显示在屏幕上。它应该只在您启动时显示（这意味着您在启动时不需要应用程序委托中的任何内容）。

# php - 从表中删除条目

> ID：13781912
> 
> 赞同：0
> 
> 时间：2012-12-08T21:01:59.503
> 
> 标签：php, mysql

我已经制作了一个带有一些记录的 sql 数据库，并且我有一个表格来显示这些记录。我的问题是如何删除这条记录。我已经编写了代码，但是错了。有什么建议么？

桌子：

```
<?php                                               
$result = mysql_query("SELECT id,onoma_pelati,tilefono,fax,email FROM visitors");
if (!$result) {
    die("Problem...");
}

$fields_num=mysql_num_fields($result);                                  
$counter = 1;
while($row = mysql_fetch_row($result))
{
    echo "<tr>";
    echo "<td>" . $counter . "</td>";
    foreach($row as $cell)
    {
        echo "<th>$cell</th>";
    }
    echo '<td class="column"> 
       <a href="delete.php?id=' . $row['id'] . '"><img src="images/icons/color/cross.png" /></a> </td></tr>';                                       
    $counter++;
}
mysql_free_result($result);
?> 
```

和删除文件：

```
<?php
include('db_connection.php');

if (isset($_GET['id']) && is_numeric($_GET['id']))
{
    $id = $_GET['id'];

    $result = mysql_query("DELETE FROM visitors WHERE id=$id")
    or die(mysql_error());

    header("Location: showplio.php");
}
else
{
    header("Location: addplio.php");
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T01:15:29.403

您正在使用的`mysql_fetch_row`函数将行作为具有数字索引的数组返回，因此`$row['id']`您必须使用`$row[0]`.

您也可以使用[`mysql_fetch_assoc`](http://php.net/manual/en/function.mysql-fetch-assoc.php). 此函数将行作为带有字符串索引的数组返回，因此`$row['id']`可以工作。

[使用不同的 MySQL API](http://php.net/manual/en/mysqlinfo.api.choosing.php)会更好，因为`mysql_`不建议将 -functions 用于新开发。

# c - 在 C 中循环用于 Arduino

> ID：13781915
> 
> 赞同：0
> 
> 时间：2012-12-08T21:02:17.953
> 
> 标签：c, arduino

我有一个循环，旨在在 Arduino 的 LCD 显示器上写出文本。问题是循环可能会中断，具体取决于我何时通过串行端口发送文本。

例如，它可能会将我希望它写的内容读取为我希望文本对齐的方式。有没有办法来解决这个问题？

以下是循环的示例：

```
void loop() {
    if (Serial.available()) {
        do {
            ch = Serial.read();
        } while (ch = 'y');
    }

    if (Serial.available()) {
        do {
            ch = Serial.read();
        } while (ch = 'x');
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T22:04:56.680

You probably wanted:

```
void loop() {
    if (Serial.available()) {
        do {
            ch = Serial.read();
        } while (ch == 'y');
    }

    if (Serial.available()) {
        do {
            ch = Serial.read();
        } while (ch == 'x');
    }
} 
```

here's a tip: Write your if statements backwards, like

```
if(NULL == somevariable){
    //Do this
} 
```

Compilers will complain noisily if you forget the second = (you can't set a constant!)

It's an easy mistake to make!

# google-app-engine - 在 GAE 数据存储中使用多个命名空间是个好主意吗？

> ID：13781922
> 
> 赞同：1
> 
> 时间：2012-12-08T21:03:23.353
> 
> 标签：google-app-engine, namespaces, datastore

我有大约 500 个文件夹实体要存储在 GAE 中。我想将它们分为 6 组。我可以使用 6 个不同的命名空间来区分它们吗？所以我使用创建实体`new Entity(groupname, foldername);`

另一种方式是`new Entity("Folders", groupname+"/"+foldername);`让它们共享一个命名空间但使用不同的键名。

我想知道许多命名空间是否占用大量内存？哪种方式更好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T21:07:48.113

取决于您是否希望在同一查询中返回不同命名空间中的文件夹。您将无法使用命名空间执行此操作，您需要为每个命名空间发出单独的查询。

# c# - 如何通过 wp7 观看来自 youtube 的视频？

> ID：13781925
> 
> 赞同：0
> 
> 时间：2012-12-08T21:03:47.313
> 
> 标签：c#, windows-phone-7

在我的 wp7 应用程序中，我从某个来源获取了一个 url，然后尝试在 webBrowser 中播放它。

```
Video_Browser.Navigate(new Uri(uri)); 
```

uri 看起来像

[http://www.youtube.com/embed/tFYAC2YuDv0](http://www.youtube.com/embed/tFYAC2YuDv0)

在桌面上我可以通过 Chrome 打开它，并查看完整尺寸的视频，但在模拟器中它只有黑屏（

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T21:30:26.240

根据[this blog post](http://www.windowsphonegeek.com/articles/5-how-to-use-mediaplayerlauncher-in-a-wp7-app)，模拟器无法渲染视频。我认为您的代码可能是正确的，但您需要在实际手机上运行它来测试它。

# c++ - 一位作者如何编写一个与 MSVC++ 的检查迭代器功能表现良好的便携式容器？

> ID：13781927
> 
> 赞同：5
> 
> 时间：2012-12-08T21:03:57.223
> 
> 标签：c++, visual-c++, stl, containers

由于各种原因，我正在定义一种新型容器。我想大多类似于`std::vector`的界面；碰巧的是，出于枚举目的，我可以分别离开`wchar_t *`并`wchar_t const*`作为我的`iterator`类型和`const_iterator`类型。（这个容器是其他一些更大的数据结构之上的一个“视图”，恰好有一个矢量兼容的接口）

但是，如果我这样做`std::copy`，除非他们定义`_SCL_SECURE_NO_WARNINGS`. 这是一件好事[——MSVC++ 的检查迭代器功能](http://msdn.microsoft.com/en-us/library/aa985965.aspx)可以保护用户免受调试模式下的各种错误的影响。我希望通过在需要的地方实施此类检查功能来与此功能兼容。这留下了几个问题：

1.  VC 的`stdext::checked_iterator`类在其构造函数中接受一个容器。该容器是否必须是内置 STL 容器类型之一？
2.  如何在 is 时禁用已检查的迭代[`_ITERATOR_DEBUG_LEVEL`](http://msdn.microsoft.com/en-us/library/hh697468.aspx)器`0`？
3.  我怎样才能做到这一点，使容器可以移植到其他没有检查迭代器的编译器？（如果可能的话，我想避免两次实施整个事情）

升压解决方案没问题。

# jsf-2 - 验证失败后样式化输入组件

> ID：13781928
> 
> 赞同：2
> 
> 时间：2012-12-08T21:04:02.027
> 
> 标签：jsf-2, primefaces, event-listener

验证失败后如何设置组件样式？

我有以下文本字段：

```
<p:inputText id="username" value="#{authController.username}" autocomplete="off" required="true" /> 
```

我试图在以下之后更改颜色：

```
<p:commandButton id="submit" value="Login" actionListener="#{authController.login}" update=":growl" /> 
```

被点击。

我找到了这个[站点](http://cagataycivici.wordpress.com/2011/04/04/styling-invalid-input-fields-with-jsf/)并尝试实施那里显示的方式。

这是我的课：

```
public class RequiredFieldValidationListener implements SystemEventListener {

    public boolean isListenerForSource(Object source) {
        return true;
    }

    public void processEvent(SystemEvent event) throws AbortProcessingException {
        if (event.getSource() instanceof UIInput) {
            UIInput source = (UIInput) event.getSource();

            if (!source.isValid()) {
                String originalStyleClass = (String) source.getAttributes().get("styleClass");
                source.getAttributes().put("data-originaStyleClass", originalStyleClass);
                source.getAttributes().put("styleClass", originalStyleClass + " ui-input-invalid");
            } else {
                String originalStyleClass = (String) source.getAttributes().get("data-originaStyleClass");
                source.getAttributes().put("styleClass", originalStyleClass);
            }
        }
    }
} 
```

我将其注册`faces-config.xml`为：

```
<application>
    ---

    <system-event-listener>
        <system-event-listener-class>com.edfx.adb.web.event.RequiredFieldValidationListener</system-event-listener-class>
        <system-event-class>javax.faces.event.PostValidateEvent</system-event-class>
        <source-class>javax.faces.component.html.HtmlInputText</source-class>                       
    </system-event-listener>

</application> 
```

我也尝试过使用

```
@ListenersFor({ @ListenerFor(sourceClass = HtmlInputText.class, systemEventClass = PostValidateEvent.class) })
public class RequiredFieldValidationListener implements SystemEventListener {

} 
```

我期待当输入字段无效时，对于我的情况，空白，css类 ui-input-invalid 将被添加到组件的类属性中。但它不起作用。我实际上该方法`processEvent`根本没有执行。

我做错了什么，我该如何做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T13:52:26.950

您的具体问题是因为您没有在完成 ajax 请求时更新输入组件。您只是在更新咆哮组件。因此输入组件的更改永远不会反映到客户端。

我建议只更新整个表单，因为它可能包含其他需要突出显示的输入组件：

```
<p:commandButton ... update="@form" /> 
```

顺便说一下，`@ListenersFor`(and `@ListenerFor`) 在这里放错了位置。它不是那样工作的，它们被完全忽略了。摆脱他们。另请参阅[如何为所有 UIInputs 注册（组件）SystemEventListener](https://stackoverflow.com/questions/13748202/how-to-register-a-componentsystemeventlistener-for-all-uiinputs)。

* * *

**与具体问题**无关**`SystemEventListener`，这种突出显示失败输入组件的方法是有缺陷的。当输入组件位于迭代组件（例如`<ui:repeat>`或）内时，它将失败`<h:dataTable>`。即使其中只有一个失败，它也会突出显示**所有**行中的输入组件。**

 **最好改用客户端方法。JSF 实用程序库[OmniFaces](http://omnifaces.org)`<o:highlight>`正是为此目的提供了该组件。[另请`<o:highlight>`](http://omnifaces.org/docs/vdldoc/current/o/highlight.html)参阅标签[文档](http://omnifaces.org/docs/vdldoc/current/o/highlight.html)、[展示`<o:highlight>`示例](http://showcase.omnifaces.org/components/highlight)和[源代码](https://github.com/omnifaces/omnifaces/blob/master/src/org/omnifaces/component/script/Highlight.java)[。`<o:highlight>`](https://github.com/omnifaces/omnifaces/blob/master/src/org/omnifaces/component/script/Highlight.java)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T07:33:01.823

我尝试了链接的示例，并在使用时触发了 SystemEventListener.processEvent()

```
<h:inputText ... required="true"/> 
```

所以我认为它与 faces-config.xml 有关。将 primefaces InputText 指定为源类就可以了：

```
<application>
    <system-event-listener>
        <system-event-listener-class>RequiredFieldValidationListener</system-event-listener-class>
        <system-event-class>javax.faces.event.PostValidateEvent</system-event-class>
        <source-class>org.primefaces.component.inputtext.InputText</source-class>
    </system-event-listener>
</application> 
```

使用

```
<p:inputText ... required="true"/> 
```**

# java - Netbeans 运行旧代码

> ID：13781930
> 
> 赞同：2
> 
> 时间：2012-12-08T21:04:27.210
> 
> 标签：java, netbeans

我在闪存驱动器上有一个 Netbeans 项目，因此我可以在计算机之间移动到代码。在运行项目的一台计算机上工作正常，但在另一台计算机上，如果我对源代码进行任何更改然后运行项目，它将使用旧代码。如果我`clean`对代码执行 a 然后运行它，它会使用更改。我怎样才能让它停止这样做，并在我运行项目时自动使用更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T19:49:41.597

似乎完全重新安装解决了问题。完全是指卸载 Netbeans 和所有设置/首选项/插件。

# neo4j - 如何在 Neo4j 的密码查询中有两个聚合？

> ID：13781934
> 
> 赞同：0
> 
> 时间：2012-12-08T21:04:59.403
> 
> 标签：neo4j, cypher

我有复杂查询的问题；这是我的密码查询：

```
params.put("query", "name:*");
ExecutionResult result = engine.execute( "start n=node:groups({query}) 
match n<-[:Members_In]-x 
with n,count(distinct x) as numberOfUsers
where numOfUsers>avg(numOfUsers) 
return  n.name,numOfUsers ", params ); 
```

`n`是组名，x 是每个组的用户。我如何获得组用户数的平均值并将其与每个组用户数进行比较？我可以获取组用户的平均数量，然后返回用户数超过平均数的组吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T05:46:28.027

我认为您无法在不重新启动的情况下在同一个查询中获得平均值和计数。所以这是我的尝试：

```
start n=node:groups({query}) 
match n<-[:Members_In]-x 
with n, count(distinct x) as cnt
with avg(cnt) as av
start n=node:groups({query}) 
match n<-[:Members_In]-x
with n, av, count(distinct x) as numOfUsers
where numOfUsers > av
return n.name, numOfUsers, av 
```

# python - 使用 Python 正则表达式在文件中查找 C 函数

> ID：13781941
> 
> 赞同：3
> 
> 时间：2012-12-08T21:06:12.993
> 
> 标签：python, c, regex

我正在尝试使用 Python 正则表达式来搜索 .c 文件并获取其中的函数。

例如：

```
int blahblah(
  struct _reent *ptr __attribute__((unused)),
  const char    *old,
  const char    *new
)
{
... 
```

我想得到`blahblah`作为功能。

这个正则表达式对我不起作用，它不断给我`None`：`r"([a-zA-Z0-9]*)\s*\([^()]*\)\s*{"`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T21:09:55.907

由于参数中的括号（特别是 中的括号`__attribute__((unused))`），正则表达式没有捕捉到它。您可能可以针对这种情况调整正则表达式，但一般来说，正则表达式无法解析像 C 这样的语言。您可能想要使用像[pycparser](https://code.google.com/p/pycparser/)这样的成熟解析器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-09T11:57:05.027

`(?<=(int\s)|(void\s)|(string\s)|(double\s)|(float\s)|(char\s)).*?(?=\s?\()`

[http://regexr.com?3332t](http://regexr.com?3332t)

这应该适用于您想要的。只需继续添加您需要捕获的类型。

`re.findall(r'(?<=(?<=int\s)|(?<=void\s)|(?<=string\s)|(?<=double\s)|(?<=float\s‌​)|(?<=char\s)).*?(?=\s?\()', string)`将适用于python。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T21:59:19.363

正则表达式不是从源代码文件中提取一些语义信息的合适工具（尽管它们有利于语法高亮——因为语法通常通过正则表达式表达）。正则表达式无法处理嵌套结构、跟踪正在发生的事情、区分类型和符号。

我会推荐一些真正了解语言结构的专用工具，例如`ctags`or `python-pygccxml`。

`ctags`是一个程序，它在 C 源代码中生成实体列表及其位置（用于帮助在文本编辑器中导航 C 代码库，如`vi`和`emacs`）。`python-pygccxml`是一个与 C 库的 Python 绑定，`libgccxml`它使用 gcc 内部来分析代码并产生关于程序语义的丰富和结构化的输出。

# javascript - CSS3 垂直功能区

> ID：13781944
> 
> 赞同：1
> 
> 时间：2012-12-08T21:06:33.583
> 
> 标签：javascript, html, css

我正在寻找如下功能区的 CSS3 代码，好吗？

这就是它应该看起来的样子，大小宽度为 30 像素，高度为 44 像素：我没有任何代码可以提供示例或可以从例如 JS 小提琴中工作的东西。

[对齐顶部 http://www.kerrydeaf.com/pink.png](http://www.kerrydeaf.com/pink.png "工具提示")

我看过这个[http://css-tricks.com/snippets/css/ribbon/](http://css-tricks.com/snippets/css/ribbon/)

但它是水平的。我正在寻找像上面这样的垂直。

更新，12 月 10 日，星期一，下午 2 点： **@Zoltan Toth** - 我在下面的评论中包含了一个 JS Fiddle。（我不允许在这里发布 JS fiffles）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-08T21:12:41.783

你可以试试这样的 - [**DEMO**](http://jsfiddle.net/QSByU/16/)

***HTML***

```
<div> i </div> 
```

***CSS***

```
div {
    background: deeppink;
    height: 30px;
    width: 30px;
    position: relative;
    text-align: center;
    font: 600 16px sans-serif;
    color: white;
    line-height: 27px;
    border: 0;
}

div:after {
    content: "";
    position: absolute;
    bottom: -18px;
    left: 0;
    height: 0;
    width: 0;
    border: solid 15px deeppink;
    border-bottom-color: transparent;
}

div:hover {
    background: purple;
}

div:hover:after {
    border-color: purple;
    border-bottom-color: transparent;
}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T21:10:08.893

把它放在一个 DIV 中，然后在 div 中执行以下操作：

```
div
{
transform:rotate(90deg);
-ms-transform:rotate(90deg); /* IE 9 */
-moz-transform:rotate(90deg); /* Firefox */
-webkit-transform:rotate(90deg); /* Safari and Chrome */
-o-transform:rotate(90deg); /* Opera */
} 
```

或者您可以为此使用 Canvas 并随心所欲地绘制，并且不需要 CSS2 技巧来做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-13T02:53:33.380

斜底垂直横幅

![在此处输入图像描述](../Images/8294e1948ccf28cc2cf30053135cddf3.png)

```
<div class="verticalbanner"></div>

.verticalbanner {
    background: #e22692; //ribbon color
    height: 44px; // ribbon height
    width: 30px; // ribbon width
}
.verticalbanner:after,.verticalbanner:before {
    content: '';
    position: absolute;
    border-top: 20px solid #e22692; // angle degree, reduce to reduce degree of angles
    height: 0; // no height, no content, just border
    width: 0;
    top: 100%;
}
.verticalbanner:after { // right angle
    border-left: 25px solid transparent;
    right:0;
}
.verticalbanner:before { // left angle
    border-right: 25px solid transparent;
    left:0;
} 
```

[jsFiddle（链接）](http://jsfiddle.net/davidcondrey/hrpc418m/2/)

# c++ - 宽字符输出结果

> ID：13781948
> 
> 赞同：-2
> 
> 时间：2012-12-08T21:06:55.707
> 
> 标签：c++, wchar

为什么我在使用 wchar_t 时会得到数字作为输出结果？

```
#include <iostream>
using namespace std;
int main()
{
    wchar_t q;
    q = 'A';
    cout << q;
    q = 'B';
    cout << q;
    q = 'C';
    cout << q;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T21:26:33.777

显示的“数字”是字符的**值**。这就是你得到“数字”的原因。如果要显示字符，可以使用**[wcout](http://msdn.microsoft.com/en-us/library/sda3xxca%28v=vs.80%29.aspx)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T22:22:11.723

`std::cout`是一个`basic_iostream<char>`。for没有`operator<<`重载。当您输出对象时，必须将它们转换为某种类型的过载。所选转换为整数类型，而不是整数类型，因此显示整数值而不是表示的字符。`wchar_t``basic_iostream<char>``wchar_t``operator<<``char`

# android-intent - Android 小部件设置编辑选项已禁用

> ID：13781953
> 
> 赞同：1
> 
> 时间：2012-12-08T21:07:36.157
> 
> 标签：android-intent, android-widget, android-manifest, android-preferences

我有带有配置页面的小部件。在将小部件添加到主屏幕时，我可以设置一些配置。

添加小部件后，在拖动时，我在屏幕上方看到两个按钮：[编辑] | [DELETE] 我只能从主屏幕删除小部件。编辑按钮被禁用。

如何启用此“编辑”功能，以便在将小部件添加到屏幕后将小部件拖动到该“[编辑]”位置以打开配置页面？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-06-25T04:48:32.807

## DaysLeftWidget

```
public WidgetConfiguration(Context context, int widgetId) {
        this.context = context;
        this.widgetId = widgetId;
    }

    public String getTitle() {
        return getPrefs().getString(getFullKeyName("title"), null);
    }

public SimpleDate getSimpleDate() {
    int year, month, day;
    SharedPreferences prefs = getPrefs();
    year = prefs.getInt(getFullKeyName("date_year"), 0);
    month = prefs.getInt(getFullKeyName("date_month"), 0);
    day = prefs.getInt(getFullKeyName("date_day"), 0);
    if (year == 0 || month == 0 || day == 0)
        return null;
    else
        return new SimpleDate(year, month, day);
}

public void setTitle(String title) {
    SharedPreferences.Editor editor = getPrefsEditor();
    editor.putString(getFullKeyName("title"), title);
    editor.commit();
}

public void setSimpleDate(SimpleDate date) {
    SharedPreferences.Editor editor = getPrefsEditor();
    int year = 0, month = 0, day = 0;

    if (date != null) {
        year = date.getYear();
        month = date.getMonth();
        day = date.getDay();
    }

    editor.putInt(getFullKeyName("date_year"), year);
    editor.putInt(getFullKeyName("date_month"), month);
    editor.putInt(getFullKeyName("date_day"), day);

    editor.commit();
}

public void clear() {
    setTitle(null);
    setSimpleDate(null);
}

protected SharedPreferences getPrefs() {
    return context.getSharedPreferences(PREF_NAME, Context.MODE_PRIVATE);
}

protected String getFullKeyName(String keyName) {
    return PREF_PREFIX + widgetId + "_" + keyName;
}

protected SharedPreferences.Editor getPrefsEditor() {
    return getPrefs().edit();
} 
```

[https://play.google.com/store/apps/details?id=com.Free.daysleft](https://play.google.com/store/apps/details?id=com.Free.daysleft)

# css - Twitter Bootstrap：强制元素在移动设备上彼此下方

> ID：13781955
> 
> 赞同：0
> 
> 时间：2012-12-08T21:08:08.117
> 
> 标签：css, twitter-bootstrap, responsive-design

我有一个使用带有两列的 Twitter Bootstrap 的响应式布局。

*   div #charts 显示一些图表
*   div #grid 显示带有文本的表格

问题：在较小的设备（例如 Ipad、Iphone）上，表格变得非常小而且非常长（由于自动换行）。

问题：我可以强制在小型设备上将 grid-div 显示在 chart-div 下方吗？

```
<div class="container-fluid">
    <div class="row-fluid">
        <div class="span8" id="charts">
             some charting
        </div>
        <div class="span4" id="grid">
             table with pager
        </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T23:13:06.867

这就是媒体查询的用途。确定断点并应用正确的样式：

```
/* change the max-width to the width when your table becomes unreadible i.e. 1024px or 768px */
@media screen and (max-width: 1024px){
    #charts, #grid{
        width:100%;
    }
} 
```

这就是 Bootstrap 在 bootstrap-responsive.css 中的做法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T21:11:50.180

我会`min-width`在你的图表 div 上设置一个：

```
#charts { min-width: 400px /*replace this with a value that works for you*/; } 
```

这将防止它崩溃到表格变得不可读的程度。

# r - sapply 无法正确处理日期

> ID：13781957
> 
> 赞同：1
> 
> 时间：2012-12-08T21:08:19.677
> 
> 标签：r, sapply

> **可能重复：**
> [为什么 mapply 不返回日期对象？](https://stackoverflow.com/questions/7698797/why-does-mapply-not-return-date-objects)

我遇到了以下奇怪的问题，当我转换一个字符串时我没有问题：

> as.Date(alldays[1])

```
[1] "3-04-20" 
```

但是，当我使用 sapply 或 lapply 时，我得到了一个很大的负数，有人知道为什么会这样吗？谢谢！

```
> (sapply(alldays[1:4], as.Date))

03-04-2012 02-04-2012 30-03-2012 29-03-2012

   -718323    -718688    -708492    -708857 
```

* * *

大家好，我找到了问题，非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-08T21:27:20.320

`sapply`适用`simplify2array`（请参阅文档）。如果你看看`simplify2array`你看到的代码`r <- as.vector(unlist(x, recursive = FALSE))`。`as.vector`删除所有属性（再次参见文档），包括类“日期”。

使用`as.Date(alldays[1:4],'%d-%m-%Y)`.

# python - Boruvka算法并行实现CUDA

> ID：13781958
> 
> 赞同：2
> 
> 时间：2012-12-08T21:08:20.323
> 
> 标签：python, algorithm, graph, cuda, minimum-spanning-tree

我正在尝试在 CUDA 中实现[Boruvka 的](http://en.wikipedia.org/wiki/Bor%C5%AFvka%27s_algorithm)最小生成树算法。我理解基本逻辑，但我无法实现它。算法是：

```
Initialize Graph G(V,E)
Initialize MST
while size(G) > 1:
  for all nodes in graph:
    min equals minimum outgoing edge
    ? 
```

在计算每个节点的最小出边之后，我不明白如何将不相交的子图减少为新节点。一旦我这样做了，我如何计算这些不相交的子图之间的最小边？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T13:26:13.630

我认为您不必将不相交的子图减少为新节点，您只需为每个节点重新计算其新组件，以便能够区分（在计算最小传出边期间）该节点是否属于不同的组件。[这种](http://en.wikipedia.org/wiki/Disjoint-set_data_structure)数据结构将帮助您以有效的方式做到这一点。

对于不相交子图之间的最小边的计算，通常使用约[简。](https://stackoverflow.com/search?q=reduction+cuda)我认为您将不得不为此启动另一个内核。

# git - 一个 DRCS（git、bzr、merc），它有像 perforce 这样的“待定变更集”？

> ID：13781964
> 
> 赞同：2
> 
> 时间：2012-12-08T21:09:17.170
> 
> 标签：git, mercurial, dvcs, bazaar

我们有 perforce 在工作中，关于它的一件事似乎确实与工作流配合得很好，那就是待定的变更集。

我可以创建一个新的待处理变更集，为其分配更改，为其分配 jira 票证，等等……我可以将文件搁置在那里并在其他变更集中进行其他更改。然后，当它是签入时间时，我可以通过简单地提供变更集 ID 来推送这些更改。

是否有任何主要的分布式修订控制系统提供类似的功能？我看到大多数提供搁置的变体，但未决的变更集？

编辑 - 一个澄清的例子：

我有一个文件 AZ 的项目。我在对我正在进行的源更改进行更改之前进行了更新。我注意到我还没有准备好采用的更改已经完成，所以我通过修改 A 和 B 创建了一个 hack。然后我对文件 C、D 和 E 进行了更改。

我只想签入后三个，我想附上我正在回复的 jira 票。在 p4v 中，这就像创建一个新的“待定变更集”并检查我想要的文件以及票号一样简单。然后我提交我的待定变更集。然后，我可以保留我的 hack 以备下次运行或恢复它。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-08T22:49:44.713

Mercurial 有两个与此非常相似的功能。第一个也是较早的一个称为[Mercurial Queues](http://hgbook.red-bean.com/read/managing-change-with-mercurial-queues.html) ，它们基于[Quilt](http://en.wikipedia.org/wiki/Quilt_%28software%29)，但已集成到 Mercurial 中。那本书的章节值得一读，但它们基本上让您拥有一系列可以随意推送、弹出和编辑的重叠变更集。它们与搁置（git 或 Mercurial）的不同之处在于它们可以被推/拉，并且实际上可以在单独的特定于队列的存储库中自己进行版本控制。

沿着这些思路的第二个新功能是[阶段](http://mercurial.selenic.com/wiki/Phases)功能。它跟踪每个变更集的阶段，可以是`public`、`draft`或`secret`。wiki 页面包含完整的详细信息，但基本上`public`是您推送到另一个 repo`draft`的任何内容，是您尚未推送的任何内容（因此可以编辑而无需担心破坏人们的历史），并且`private`是一个不会被你推的时候`hg push`。您可以使用阶段以及`histedit`甚至`commit --amend`Mercurial 队列来确保变更集在您满意之前不会离开您的机器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T23:11:00.247

Git 有[stashes](http://git-scm.com/book/ch6-3.html)的概念，它们是相似的——你可以有多个 stashes 并描述其中的内容。主要区别在于存储是本地的，而 P4 的待处理更改列表在服务器上。如果其他人需要查看您的待处理更改列表，这可能很重要。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T23:25:55.687

Git也有索引的概念。您可以将文件添加到索引中，默认情况下，它只提交索引中的文件。您可以修改许多文件并将其中一些放在索引中，而将其他文件留在工作区中。您甚至可以在索引中修改和排队一个文件，并在工作区中对同一文件进行不同的修改。

# c++ - 当我们将数据从 ax 移动到端口地址时会发生什么

> ID：13781967
> 
> 赞同：0
> 
> 时间：2012-12-08T21:09:38.827
> 
> 标签：c++, assembly, io, x86, port

为了将频率加载到 8254 芯片的计数器寄存器中，我们将频率加载到 ax 中，然后将 al 和 ah 一个一个地移动到端口#42h：

```
 mov ax,1fb4h
    out 42h,al
    mov al,Ah
    out 42h,AL 
```

好的，为什么它起作用？我认为有一个覆盖，端口 42h 的最后一个值将是 AH =>1f ，所以永远不会将 b4 （它们的低位）保留在端口地址中！所以我们会降低频率...

为什么我们不能使用它：

```
out 42h,AX 
```

如果端口地址空间小于 AX，那么为什么第一行代码可以工作以及如何工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-08T21:20:35.947

`out port,ax`将尝试写入 16 位端口。8254 不提供 16 位端口——只有 8 位端口。

我还没有验证，但我相信如果你对端口 42 进行 16 位写入，低字节将进入端口 42，而高字节将进入端口 43。不过你*真的*不希望这样，因为端口 43是 PITs 命令/模式寄存器。

至于它为什么/如何工作：PIT 内部有一个 16 位寄存器，但只提供一个 8 位端口来访问它。当您进行第一次写入时，PIT 会暂时锁定它。当您进行第二次写入时，PIT 也会锁存它，然后将锁存器中的 16 位写入寄存器。

# javascript - jQuery附加框不可拖动

> ID：13781970
> 
> 赞同：0
> 
> 时间：2012-12-08T21:09:51.857
> 
> 标签：javascript, jquery, jquery-ui

我有一个 jQuery UI 代码，它允许现有的框是可拖动的。但是，当我附加一个附加框时，这些框不可拖动。这是一个 JSFiddle： http: [//jsfiddle.net/MJKhq/4/](http://jsfiddle.net/MJKhq/4/) （单击我按钮将另一个框添加到文档中，但该框不像第一个那样可拖动）。这也是一个代码示例，因为它要求我：

```
$(function()
{
    $( "#draggable" ).draggable();
});

function makenew()
{
    $("body").append('<div id="draggable" class="ui-widget-content"> <p>Drag me around</p></div>');
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T21:17:13.630

每个 dom 元素必须具有唯一的 id 才能使用，或者 parent 必须不同。您不能使用相同的 id，在将其附加到其上的 dom 绑定事件后更多。你可以这样定义它。

```
<script>
function _bindEvents()
{
    $(".ui-widget-content" ).draggable();
}

$(function(){
    _bindEvents();
});

function makenew()
{
    $("body").append('<div id="draggable" class="ui-widget-content"> <p>Drag me around</p></div>');
    _bindEvents();
}
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T21:17:14.843

DOM 树中应该只有一个具有相同 id 的元素。通过添加一个新框，您可以获得两个具有相同 id 的元素。尝试使用类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T21:29:21.217

记住`id`必须是唯一的，你不能`id`在同一页面上使用多个相同的元素，在这种情况下你可以使用`class`代替`id`，比如

```
function makenew() {
    var div=$('<div class="draggable ui-widget-content"><p>Drag me around</p></div>');  
    $("body").append(div);
    $(div).draggable();
} 
```

[**例子**](http://jsfiddle.net/MJKhq/8/)。

# ios - iOS Facebook 新闻源

> ID：13781973
> 
> 赞同：0
> 
> 时间：2012-12-08T21:10:08.560
> 
> 标签：ios, facebook, feed

我正在尝试在 iOS 上获取用户新闻源 JSON。

我在文档中找不到任何内容，并且我找到了与该主题相关的其他帖子，但它们都已过时。任何帮助，将不胜感激！谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T21:22:54.080

拨打 FQL 电话。您需要的查询可以在[文档](https://developers.facebook.com/docs/reference/fql/stream)中找到，特别是：

`SELECT post_id, actor_id, target_id, message FROM stream WHERE filter_key in (SELECT filter_key FROM stream_filter WHERE uid=me() AND type='newsfeed') AND is_hidden = 0`

# windows-8 - ApplicationData 支持的数据类型和大小限制

> ID：13781975
> 
> 赞同：1
> 
> 时间：2012-12-08T21:10:24.617
> 
> 标签：windows-8, microsoft-metro

似乎不可能将任何类型的数据存储在`Windows.Storage.ApplicationData`. 它也有大小限制。

*   支持哪些数据类型？
*   尺寸限制是多少？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T21:52:19.430

`Windows.Storage.ApplicationData`让您可以访问多个数据源。存储在本地、云端和临时文件夹中的文件和设置。

在此处查看 API 文档：http: [//msdn.microsoft.com/library/windows/apps/BR241587](http://msdn.microsoft.com/library/windows/apps/BR241587)

在这里，您有如何在本地源中存储数据的示例：http: [//msdn.microsoft.com/en-US/library/windows/apps/hh465118](http://msdn.microsoft.com/en-US/library/windows/apps/hh465118)

对于本地/漫游存储：

*   用于`Windows.Storage.ApplicationData.roamingStorageQuota`最大大小限制（以 KB 为单位）。
*   你存储文件

对于本地/漫游设置：

*   (MSDN) 每个设置的名称最长为 255 个字符。每个设置的大小最大为 8K 字节，每个复合设置的大小最大为 64K 字节。
*   此处列出了支持的数据类型：http: [//msdn.microsoft.com/en-US/library/windows/apps/br205768](http://msdn.microsoft.com/en-US/library/windows/apps/br205768)

# javascript - window.close() 问题

> ID：13781977
> 
> 赞同：2
> 
> 时间：2012-12-08T21:10:50.427
> 
> 标签：javascript, firefox, mobile, opera

这适用于 IE、Chrome 和 Safari。

如何在 FF 和 Opera 中完成这项工作？这是否适用于 android 或 iOS 等移动设备？还是取决于您使用的浏览器？

```
var answer = confirm ("La lectura del código ha FALLADO. Pulse CANCELAR para volver a intentar");
if (!answer)
window.close();

else(answer)
window.location="http://www.google.com/" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T21:11:49.773

你的代码有一些问题

```
else(answer) 
```

不是有效的语法，应该只是

```
else 
```

还

```
window.location="http://www.google.com/" 
```

应该

```
window.location.href = "http://www.google.com/" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T21:17:34.863

```
var answer = confirm("La lectura del código ha FALLADO. Pulse CANCELAR para volver a intentar");
if (!answer) {
window.close();

else {
    window.location.href = "http://www.google.com/"
} 
```

# matlab - 如何在 MATLAB 中绘制它

> ID：13781978
> 
> 赞同：0
> 
> 时间：2012-12-08T21:11:04.123
> 
> 标签：matlab

这就是我想要做的：我有下图（称为相空间图）：

[相空间图 http://www.thestudentroom.co.uk/attachment.php?attachmentid=185627&d=1354917185](http://www.thestudentroom.co.uk/attachment.php?attachmentid=185627&d=1354917185)

我正在关注的论文说：

> 将信号的相空间图划分为 20x20 方格，计算方格内的点数 c(i,j) 以形成相空间密度矩阵 c。

我尝试了以下代码来执行上述操作：

```
 %%matrix(1,:) Is the first row and all columns. This row has the actual signal of  
    %interest and corresponds to the x axis of the above graph.
    and is the x axis of the above graph.
    %matrix(2,:) Is the second row and all columns and comprises of the y axis of the  
    above graph.

    for i=1:180:size(matrix,2)
        for j=1: 180 : size(matrix,2)
            if isnan(matrix(1,i))
            else
                c(1,i)=matrix(1,i);
            end

            if isnan(matrix(2,i))
            else
                c(2,i)=matrix(2,j);
            end
        end
    end

    figure,plot(c) 
```

输出是：

[![网格](../Images/aa8f6a29d3c1c0df3f6afcb1df918368.png)](https://i.stack.imgur.com/ufjhH.jpg)

我打算得到这样的东西：

[论文 http://www.thestudentroom.co.uk/attachment.php?attachmentid=185629&d=1354918102](http://www.thestudentroom.co.uk/attachment.php?attachmentid=185629&d=1354918102)

LHS 是相空间图，RHS 对应于我试图达到的各个图。

请帮忙！！！

将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T00:47:56.153

你可以使用函数[`hist3`](http://www.mathworks.com/help/stats/hist3.html)。

例如

```
x = randn(100, 2);
hist3(x, [20 20]); 
```

![在此处输入图像描述](../Images/7562b30df861d1400129b90f1def1cb2.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T00:51:58.673

也许您可能想要某种二维直方图？在这里寻求帮助：http: [//blogs.mathworks.com/videos/2010/01/22/advanced-making-a-2d-or-3d-histogram-to-visualize-data-density/](http://blogs.mathworks.com/videos/2010/01/22/advanced-making-a-2d-or-3d-histogram-to-visualize-data-density/)

您还可以查看一些 2D hist 函数的文件交换（我的第一次搜索给了我这个： http: [//www.mathworks.com/matlabcentral/fileexchange/1487](http://www.mathworks.com/matlabcentral/fileexchange/1487)）

编辑：@3lectrologos 具有正确的功能

# algorithm - 递归最长递增子序列的记忆

> ID：13781979
> 
> 赞同：2
> 
> 时间：2012-12-08T21:11:05.640
> 
> 标签：algorithm, dynamic-programming, memoization

我为最长递增子序列提出了简单的以下递归解决方案。但是，你能帮忙把记忆包含到这个递归解决方案中吗？

```
public int findLIS(int a[], int maxSoFar, int item, int count) {

        if(item == a.length) {
            return count;
        }
        int length1 = findLIS(a,maxSoFar, item+1, count);
        int length2 = 0;
        if(a[item] > maxSoFar) {

            length2 = findLIS(a, a[item], item+1, count + 1);
        }
        return Math.max(length1, length2);
} 
```

PS：这不是作业问题，这更符合我的兴趣。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T21:17:30.370

使用 a `Map<Pair<Integer,Integer>,Integer>`，并在方法的开头添加：

```
Integer cache = map.get(new Pair<Integer,Integer>(maxSoFar,item));
if (cache != null) return cache; 
```

每次你`return`做任何事情 - 一定要写到`(maxSoFar,item)=returnValue`地图上。

这个想法是在代表你在计算中的位置的对之间映射 - 到为这个状态找到的最大值，以避免重新计算它。

* * *

看起来是java，所以你可以使用[apache commons Pair](http://commons.apache.org/lang/api-3.0-beta/org/apache/commons/lang3/Pair.html)作为你的`Pair`接口。

# python - 排序字典列表理解中的 lambda 函数

> ID：13781981
> 
> 赞同：8
> 
> 时间：2012-12-08T21:11:14.920
> 
> 标签：python, dictionary, lambda, list-comprehension

我有以下字典：

```
student_loan_portfolio = {
    'loan1': {'rate': .078, 'balance': 1000, 'payment': 100, 'prepayment': 0},
    'loan2': {'rate': .0645, 'balance': 10, 'payment': 5, 'prepayment': 0},
    'loan3': {'rate': .0871, 'balance': 250, 'payment': 60, 'prepayment': 0},
    'loan4': {'rate': .0842, 'balance': 200, 'payment': 37, 'prepayment': 0},
    'loan5': {'rate': .054, 'balance': 409, 'payment': 49, 'prepayment': 0},
    'loan6': {'rate': .055, 'balance': 350, 'payment': 50, 'prepayment': 0}
} 
```

我想按包含在其各自嵌套字典中具有最高“比率”值的字典的键的顺序遍历包含字典（键为loan1 到loan6）。也就是说，我想按照loan3、loan4、loan1、loan2、loan6、loan5的顺序进行迭代

感谢@Jame Sharp，我知道的最简单的方法是：

```
for k,v in sorted(student_loan_portfolio.items(), key=lambda (k,v): v['rate'], reverse=True): 
```

我现在正在阅读有关 lambda 的内容，并且无法真正理解它的工作原理和原因。首先，我相信 v['rate'] 正在返回那些字典键的值。但它似乎应该是某种语法错误。什么是 v['rate'] 引用以及语法背后的逻辑是什么？

在相关说明中，为什么我们必须将 lambda 函数的输入指定为元组？

以下情况有何不同？

```
#1

>>>f = lambda x,y,z:x + y + z
>>>f(1,2,3)

#6

>>>f = lambda (x,y,z): x + y + z
>>>f(1,2,3)

Traceback (most recent call last):
  File "<pyshell#48>", line 1, in <module>
    f(1,2,3)
TypeError: <lambda>() takes exactly 1 argument (3 given) 
```

谢谢你的澄清。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-08T21:19:08.553

`lambda (k,v): v['rate']`是一个函数，它接受一个参数（一个 2 元组），并返回元组`'rate'`中第二个条目的键。它相当于`lambda t: t[1]['rate']`

`lambda x,y,z:x + y + z`是一个函数，它接受 3 个值并返回它们的总和。

`lambda (x,y,z): x + y + z`是一个接受 1 个值（一个 3 元组）并返回其元素之和的函数。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-08T21:19:06.393

`items()`on 方法`student_loan_portfolio.items()`返回一个键/值元组列表。所以它返回类似`[ ('loan1', dictOfLoan1), ('loan2', dictOfLoan2), ...]`. lambda 接受这个元组作为参数，并从值 dict 中读取“rate”项（即，它读取`dictOfLoan1['rate']`,`dictOfLoan2['rate']`等）。

您可以通过使用而不是您拥有的 lambda 来实现相同的效果`lambda item: item[1]['rate']`。 `item`是一个元组`(key, value)`，`item[1]`值也是。

您的两个 lambda 示例之间的区别在于，第一个接受三个参数，而第二个接受一个参数，该参数是一个三元素元组。定义一个接受元组作为参数但将其内容解包到单独的局部变量的函数的能力是 Python 的一个怪癖，在 Python 3 中被删除（参见[PEP 3113](http://www.python.org/dev/peps/pep-3113/)）。

# php - PHP 代码为每个人显示相同的代码

> ID：13781983
> 
> 赞同：1
> 
> 时间：2012-12-08T21:11:31.363
> 
> 标签：php, mysql, database

我有一个积分系统，就像人们登录代码时显示数据库中的用户数据一样。但我注意到了一个问题。每个人都得到了相同的号码。我在表中被称为管理员，并且我在它的顶部。但是当我将我的点数更改为 20 时，每个人都得到 20。不在数据库中他们得到 20，但仅在页面上显示 20。脚本是：

```
<?php
require("dbc.php");  
$id = 1; //id or primary key of the user whose point you want to display   
$query = mysql_query("select * from users where id = $id") or die(mysql_error());

while($array = mysql_fetch_array ($query)) {
    echo "{$array['points']}<br>";
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T22:11:30.700

您的问题是您为 id 变量使用了固定数字。您需要做的是使用`$id= $_POST['variable_name']`或 `$id=$_GET['variable_name']

例如，如果您从文本框等 html 输入中获取播放器。你的 html 将是

```
<input type="text" name="fname"> 
```

你的身份证是

```
$id= $_POST['fname']; 
```

$_GET[] 有点难以解释。观看此视频[https://www.youtube.com/watch?v=RZPLTiNlx8c](https://www.youtube.com/watch?v=RZPLTiNlx8c)了解有关 $_GET[] 的信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T21:14:06.500

尝试为其他用户打印 $id 的值（如使用 var_dump 函数）以检查它是否正确。

如果这不能解决问题，请尝试遍历您的代码，并在每个地方确认每个变量都具有您认为的值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T22:33:17.627

这条线`$id = 1; //id or primary key of the user whose point you want to display`没有意义。[PRIMARY KEY](http://dev.mysql.com/doc/refman/5.5/en/optimizing-primary-keys.html)唯一标识数据库表中的 每条记录。每个表只能有一个主键，并且必须包含唯一值，但不能包含 NULL 值。为了快速查询性能，每个表都应该有一个主键。

这意味着每个用户都应该有自己的唯一 ID。

以下代码使用不推荐使用的 mysql_ 扩展，您应该使用 MySQLi 或 PDO_MySQL

```
<?php
require("dbc.php");  
$id =  ;// $_POST or $_GET
$query = mysql_query("select * from users where id = $id") or die(mysql_error());
$row = mysql_fetch_row($query);
echo $row[0]; //Assuming 0 is id 

?> 
```

# ruby-on-rails - 如何重构 Rails 控制器操作以消除混乱？

> ID：13781989
> 
> 赞同：3
> 
> 时间：2012-12-08T21:12:13.097
> 
> 标签：ruby-on-rails, refactoring, instance-variables

我有一个名为的操作`update_mobile`，其中我正在准备在 RABL JSON 请求中使用的大量实例变量。可以看到，如果请求中包含`params[:last_updated]`参数，那么我只获取到了此后更新的模型。这似乎违反了“胖模型，瘦控制器”的方法。我怎样才能重构这个方法？

```
 def update_mobile
    @last_updated = params[:last_updated]
    if @last_updated.nil?
      @buddies = @user.friends
      @courses = @user.courses
      @friendly_schools = @user.friendly_schools
      @documents = @user.all_notes
      @instructors = @user.current_instructors
      @friendships = @user.friendships
      @questions = @user.current_questions
      @answers = @user.current_answers
      @comments = @user.current_comments
    else
      @buddies = @user.friends.select{ |user| user.updated_at > @last_updated }
      @courses = @user.courses.select{ |course| course.updated_at > @last_updated }
      @friendly_schools = @user.friendly_schools.select{ |school| school.updated_at > @last_updated }
      @documents = @user.all_notes.select{ |note| note.updated_at > @last_updated }
      @instructors = @user.current_instructors.select{ |instructor| instructor.updated_at > @last_updated }
      @friendships = @user.friendships.select{ |friendship| friendship.updated_at > @last_updated }
      @questions = @user.current_questions.select{ |question| question.updated_at > @last_updated }
      @answers = @user.current_answers.select{ |answer| answer.updated_at > @last_updated }
      @comments = @user.current_comments.select{ |comment| comment.updated_at > @last_updated }
    end
  end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T21:39:16.900

您应该将代码移出您的模型并让您的模型处理 1) 参数`nil`和 2) 使用 ActiveRecord 有效地查询数据库。

在您的控制器中，为每个变量设置如下行：

```
@friends = @user.friends.updated_since(params[:last_updated]) 
```

*（我在`@buddies`这里重命名为`@friends`，因为我们想保持系统事物命名的一致性）*

然后，在您的`Friend`模型中，定义一个称为`updated_since`执行该逻辑的类方法：

```
class Friend < ActiveRecord::Base
  def self.updated_since(last_updated)
    if last_updated.present?
      where("updated_at > ?", last_updated)
    else
      all
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-05T20:05:53.550

如果您使用的是 rails 4.x，那么最干净的方法是通过[Concerns](http://api.rubyonrails.org/classes/ActiveSupport/Concern.html)。您可以创建一个通用范围并将其简单地包含在所需的模型中，而不是在每个模型中复制和粘贴相同的范围。

**自关注以来更新**：

```
# my_app/app/models/concerns/updated_since.rb
module UpdatedSince
  extend ActiveSupport::Concern

  module ClassMethods
    def updated_since(time)
      if parsed_time = convert_time(time)
        where("updated_at >= ?", parsed_time)
      else
        all
      end
    end

    private

      def convert_time(time)
        Time.zone.parse(time) unless time.blank?
      rescue ArgumentError
        self.logger.warn "Invalid updated_since time: <#{time}>"
        nil
      end
  end
end 
```

**将其包含在相关模型中：**

```
class Friend < ActiveRecord::Base
  include UpdatedSince
end 
```

**在您的控制器中使用它：**

```
@friends = @user.friends.updated_since(params[:last_updated]) 
```

# scala - 为 IntelliJ 设置 Scaladoc

> ID：13781990
> 
> 赞同：15
> 
> 时间：2012-12-08T21:12:28.010
> 
> 标签：scala, intellij-idea

使用 IntelliJ 创建新的 Scala 项目时，我收到 scaladoc 警告。

请问这种情况如何改正？

![在此处输入图像描述](../Images/7c3230ed389f294ad7cd5c22fb99ba98.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-08T22:08:38.340

我会继续在这里回答我自己的问题

1.  导航到[Scala 下载页面](http://www.scala-lang.org/downloads#api)并下载相应的 API
2.  解压缩存档并将内容移动到您的 Scala 安装中（我运行 sudo`mkdir scaladoc`来创建`/Library/Scala/2.10.0-RC2/scaladoc`）
3.  更新模块以指向正确的位置

![在此处输入图像描述](../Images/ef03bb61c0e3823672c5c6b77b8675df.png)

您可以通过键入快速验证安装

```
object Main extends App {
} 
```

一旦你`Ctrl`+ `J`on `App`，你应该会看到与在线版本匹配的 scaladoc

![在此处输入图像描述](../Images/8224f5d0164c7d89cc7f57e10f85e9c5.png)