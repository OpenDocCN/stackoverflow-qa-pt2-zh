# StackOverflow 问答 14041000-14041999

# php - Extjs JSON 响应

> ID：14041001
> 
> 赞同：1
> 
> 时间：2012-12-26T13:05:48.217
> 
> 标签：php, ajax, json, extjs, response

我有一个表单，它将数据发送到服务器。我使用 PHP 脚本处理表单，该脚本可以返回 3 个不同的 JSON 字符串：

**一**

```
exit("{\"success\":\"false\", \"msg\":\"Las claves no cohinciden\"}"); 
```

**二**

```
exit("{\"success\":\"false\", \"msg\":\"".$failure->getMessage()."\"}"); 
```

**三**

```
exit("{\"success\":\"true\",\"msg\":\"El usuario: $nombreUsuario ha sido dado de alta correctamente.\"}"); 
```

第一个和第二个字符串是要显示的错误。第三个字符串是正常情况。当脚本返回其中一些值时，我使用 ExtJs 捕获响应：

```
var respuesta = Ext.JSON.decode(response.responseText); 
```

但是，什么时候做：

```
console.log(respuesta); 
```

Firebug 控制台说“respuesta”是未定义的。任何想法 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T13:16:10.697

当您输出 JSON 以在 AJAX 中使用时，最好为 JSON 设置标头并返回格式正确的 JSON。在下面的示例中，我们使用您的响应创建一个普通的 PHP 数组，并将其转换为带有`json_encode()`.

试试看。我之前遇到过 Javascript 在没有正确的内容类型和格式的情况下没有将字符串作为 JSON 输入的问题。

```
<?php

$response = array("success" => "false", "msg" => "Las claves no cohinciden");

header("Content-type: application/json");
exit(json_encode($response));

?> 
```

或者，如果您有 jQuery... 您可以`$.parseJSON('your string');`从字符串中输出 JSON。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T13:37:13.970

你可以使用这个 url 来测试你的 Json 代码：

[http://www.utilities-online.info/xmltojson/#.UNr9FhhQ-gY](http://www.utilities-online.info/xmltojson/#.UNr9FhhQ-gY)

# c# - 如何使用 nhibernate 和 unhaddins 连接到不同机器中的不同数据库？

> ID：14041005
> 
> 赞同：0
> 
> 时间：2012-12-26T13:06:13.317
> 
> 标签：c#, nhibernate, multiple-databases, unhaddins

我正在尝试在不同的机器上连接 nHibernate 和 Unhaddins，每个机器在 Oracle 中都有一个数据库。他们有不同的表和不同的数据库。

我需要阅读一张表格，我们将其称为`C_SM_SEND`.

在这个表中，我有一个名为 的列`Body`，它将包含一个 XML。

另一个进程将读取此表，获取此 XML 并将其值插入另一个表，我们将其命名为`PC_TO_SM_PRIM_DATA`. 让我们不用担心列或表的名称。

现在重要的是：我必须在一台机器的一个数据库中读取一个表=>“MACHINE1/ORCL”，读取一个名为“C_SM_SEND”的表，然后在另一台机器的另一个数据库的另一个表中插入值=>“ MACHINE2/SERV”，写入名为 PC_TO_SM_PRIM_DATA 的表。

另外，请记住：每个表的映射是不同的！

我读过一些文章，而不是解释 NHibernate 如何使用 uNHAddIns 连接到不同的机器，我读过的都没有工作。

我的应用程序是根据标准 MVVM、IoC 制作的，并且还使用存储库。

我也读过 Fabio Maulo 的这篇文章，但没有成功：

[配置会话工厂提供程序](http://fabiomaulo.blogspot.com.ar/2009/09/configure-sessionfactory-providers.html "配置会话工厂提供程序")

欢迎任何帮助。

此致，

古斯塔沃。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T02:55:55.360

您需要的是**每个数据库一个 SessionFactory**。因此，如果您有 2 个正在使用的数据库，那就是 2 个 SessionFactories - 每个数据库一个。uNHAddins 中的所有抽象实际上只是归结为 2 创建和管理这些 SessionFactories。

假设您正在使用 2 个数据库 -`Database1`和`Database2`. `Database1`有那一张桌子 - `C_SM_SEND`。`Database2`有另一张桌子 - `PC_TO_SM_PRIM_DATA`。构建代码的一种非常简单的方法是使用 2 个构建 SessionFactories 的类：

```
public class Database1
{
    private ISessionFactory _sessionFactory;

    public Database1SessionFactory()
    {
        //Build your session factory for Database1 here
        //with the entity C_SM_SEND, connection string to Database1, etc, etc.
    }

    public ISession OpenSession()
    {
        return _sessionFactory.OpenSession();
    }
}

public class Database2
{
    private ISessionFactory _sessionFactory;

    public Database1SessionFactory()
    {
        //Build your session factory for Database2 here
        //with the entity PC_TO_SM_PRIM_DATA, connection string to Database2, etc, etc.
    }

    public ISession OpenSession()
    {
        return _sessionFactory.OpenSession();
    }
} 
```

您可以映射`Database1`和`Database2`使用您的 IoC。剩下的只是打开正确的会话并读取/写入您的实体。

可以通过以下方式跨两个数据库执行事务操作：

```
using (var tx = new TransactionScope())
{
    //session1.Save(obj1);
    //session2.Save(obj2);
    tx.Complete();
} 
```

# javascript - 如何遍历表的最后一列

> ID：14041008
> 
> 赞同：-1
> 
> 时间：2012-12-26T13:06:28.547
> 
> 标签：javascript, jquery, knockout.js

我有一个使用淘汰赛 js 动态创建的表，如下所示：

我的问题是为新创建的列动态分配一个 id。我需要遍历最后一列。

```
<table>
    <tr data-bind="foreach: activeColumns">
        <th data-bind="text: display"></th>
    </tr>
    <tbody id="sortable" data-bind="foreach: rows">
        <tr data-bind="foreach: $root.activeColumns">
            <td id="uniquename">
                <span  data-bind="visible: readonly, text: $parent[property]"></span>
                <input data-bind="visible: !readonly, value: $parent[property]"/>
            </td>
        </tr>
    </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T13:13:29.300

You don't need to iterate through `tr` elements for selecting the last one, you can use `:last` selector or `last` method:

```
$('#sortable tr').last(); // last tr element  
$('#sortable td').last(); // last td element 
```

In case that you want to change attributes of last `tr`'s `td` elements, you can use `each` method:

```
$('#sortable tr').last().children().each(function(index){
   // $(this).attr('id', 'wildguess' + index)
}) 
```

Or `attr` method:

```
$('#sortable tr').last().children().attr('id', function(index){
   return 'wildguess' + ++index // unique IDs bases on the index
}) 
```

> My problem is to dynamically assign an id for the newly created columns.

However best solution is generating unique IDs at first.

# algorithm - 将 OMML 转换为 MathML 的算法或代码

> ID：14041009
> 
> 赞同：1
> 
> 时间：2012-12-26T13:06:32.587
> 
> 标签：algorithm, mathml, omml

我正在使用 flash 或 Flex 将 Word doc 标准方程 (OMML) 转换为 MathML，请通过提供简单的算法或代码片段来帮助我。

在此先感谢，玛尼

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T09:52:29.817

有一个 XSLT 1 样式表可以执行 Microsoft 提供的转换，作为 Word 分发的一部分，它负责将 MathML 放置在 Word 中的剪贴板上。通常安装为类似

```
c:/Program Files (x86)/Microsoft Office/Office14/OMML2MML.XSL 
```

对此的早期版本有一些讨论

[http://dpcarlisle.blogspot.co.uk/2007/04/xhtml-and-mathml-from-office-20007.html](http://dpcarlisle.blogspot.co.uk/2007/04/xhtml-and-mathml-from-office-20007.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-30T16:05:04.143

这是我几天前正在学习的 C# 类的片段……我知道为时已晚……但为了减少未来的痛苦。

我认为在动作脚本中并没有太大的不同

该文件`OMML2MML.xsl`位于`%ProgramFiles%\Microsoft Office\Office12\` @David 提到的 xsl 文件用于将 MathML 放在 Word 中的剪贴板上并将 OMML 转换为 MML。

```
public static string OMML(string omml)
{
    XslCompiledTransform xslTransform = new XslCompiledTransform();
    xslTransform.Load("OMML2MML.xsl");

    using (XmlReader reader = XmlReader.Create(new StringReader(omml)))
    {
        using (MemoryStream ms = new MemoryStream())
        {
            XmlWriterSettings settings = xslTransform.OutputSettings.Clone();

            // Configure xml writer to omit xml declaration.
            settings.ConformanceLevel = ConformanceLevel.Fragment;
            settings.OmitXmlDeclaration = true;

            XmlWriter xw = XmlWriter.Create(ms, settings);

            // Transform our OfficeMathML to MathML
            xslTransform.Transform(reader, xw);
            ms.Seek(0, SeekOrigin.Begin);

            StreamReader sr = new StreamReader(ms, Encoding.UTF8);
            string MathML = sr.ReadToEnd();
            return MathML;
        }
    }
} 
```

# back - magento - 后退按钮（不使用类别）

> ID：14041012
> 
> 赞同：0
> 
> 时间：2012-12-26T13:06:39.997
> 
> 标签：back, magento-1.6

市场上有很多后退按钮。免费和付费的。但不适用于我的商店，因为它们都是基于类别的。

那是我的问题。在我的商店中，我不使用类别，只使用属性（结合 Amasty 改进的导航）。

但是所有的后退按钮都是基于类别的。

谁能帮我解决这个问题？我想要一个返回按钮（按属性）返回过滤后的产品。

或者有谁知道这个的扩展名。\

我有magento 1.6.2。

您可以在[testwinkel.liefstoereigenwijs.nl上查看](http://testwinkel.liefstoereigenwijs.nl)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T14:36:42.557

我不确定您为什么要避免使用类别，但是您是否尝试过使用 javascript？

```
<a href=”#” onClick=”Javascript:history.back();”&gt;GO back</a> 
```

唯一的问题是，当用户从 goolge 进入您的产品页面时，用户将被重定向到 google。

你也可以看看这个威胁：[Back to previous page with header("Location:"); 在 PHP 中](https://stackoverflow.com/questions/5285031/back-to-previous-page-with-header-location-in-php)

# matlab - 如何获取从视频文件中提取的音频文件的音频电平？

> ID：14041015
> 
> 赞同：-2
> 
> 时间：2012-12-26T13:07:03.880
> 
> 标签：matlab, audio-processing

给定视频的帧速率为 24fps。对于等于 44.1Khz 的音频采样率和 22050 (Fs/2) 的音频样本，音频的每一秒都存在。即对于每个视频帧，存在 22050/24≈919 个音频样本。

这是我一直到的matlab代码。这是我们绘制我正在谈论的音频样本的方式吗？

```
[y f] = wavread('test.wav');
t = 0:1/f:(length(y)-1)/f;
plot(t, y), grid on; 
```

我应该为此目的使用 C++ 的音频处理库吗？我将使用 VS 2010。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T13:57:35.873

我想找到所有值高于音频文件平均样本值的样本。这是代码。

```
function AudioLevels(a, fps)
clc
format long g
[y f nbits] = wavread(a);
len = length(y);
t = 0:1/f:(length(y)-1)/f;
plot(t, abs(y(:,1))), grid on;
meanAudioLevel = sum(abs(y(:,1)))/length(y);
samplesPerFrame = f/fps;
noOfFrames = ceil(double(length(y)/samplesPerFrame));

array1= [;];
%---------------------------------------------------------------------
for i = 1 : 1 : noOfFrames-1;
for j = 1+(samplesPerFrame*(i-1)) : 1 : (samplesPerFrame*i)
    array = [;];
    array = [array ; abs(y(j,1))];
end
if (sum(array) >= meanAudioLevel)
    array1 = [array1 ; sum(array)];
    fprintf (fileIO, '%d\t%f\r\n', i ,sum(array));
end
end
%---------------------------------------------------------------------
for j = length(y) - mod (length(y), samplesPerFrame)+1 : 1 : length(y)
array = [;];
array = [array ; abs(y(j,1))];
end
if (sum(array) >= meanAudioLevel)
    array1 = [array1 ; sum(array)];
end
%---------------------------------------------------------------------
array1 
```

# css - 为什么 CSS 会忽略特定列表元素的这些样式？

> ID：14041018
> 
> 赞同：0
> 
> 时间：2012-12-26T13:07:08.107
> 
> 标签：css

我有一个非常直接的导航菜单，并且我试图将一个项目的样式设置为与其他项目不同。但是，仅应用了背景，而没有应用边框半径和链接颜色等其他内容。

这是菜单：

```
<div class="menu">
    <ul>
        <li><a href="page1.php">Page1</a></li>
        <li><a href="page2.php">Page2 </a></li>
        <li><a href="page3.php">Page3 </a></li>
        <li class="extranav"><a href="extra.php">Extra</a></li>
    </ul>
</div> 
```

这些是通用菜单列表样式：

```
.menu ul{ margin:0px; padding:0px;}
.menu ul li{ float:left; background:url(../images/sprator.png) right top no-repeat; padding-right:1px;} 
.menu ul li a{display:block; padding:0px 23px; font-size:12px; font-family:Arial, Helvetica, sans-serif; color:#fff; line-height:46px; text-decoration:none; text-transform:uppercase;}
.menu ul li a:hover{ display:block;background: #b04141; /* Old browsers */
background: -moz-linear-gradient(top, #b04141 0%, #c35151 39%, #c35151 62%, #c35151 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#b04141), color-stop(39%,#c35151), color-stop(62%,#c35151), color-stop(100%,#c35151)); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top, #b04141 0%,#c35151 39%,#c35151 62%,#c35151 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top, #b04141 0%,#c35151 39%,#c35151 62%,#c35151 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top, #b04141 0%,#c35151 39%,#c35151 62%,#c35151 100%); /* IE10+ */
background: linear-gradient(top, #b04141 0%,#c35151 39%,#c35151 62%,#c35151 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#b04141', endColorstr='#c35151',GradientType=0 ); /* IE6-9 */} 
```

这就是我试图应用于额外导航元素的内容：

```
.extranav a{
    height:46px;
    color:#FF0000;
    line-height:46px;
    display:block;
    background: #206818; /* Old browsers */
    background: -moz-linear-gradient(top, #024A00 0%, #206818 39%, #347C2C 62%, #3E8636 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#024A00), color-stop(39%,#206818), color-stop(62%,#347C2C), color-stop(100%,#3E8636)); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top, #024A00 0%,#206818 39%,#347C2C 62%,#3E8636 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top, #024A00 0%, #206818 39%, #347C2C 62%, #3E8636 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top, #024A00 0%, #206818 39%, #347C2C 62%, #3E8636 100%); /* IE10+ */
    background: linear-gradient(top, #024A00 0%, #206818 39%, #347C2C 62%, #3E8636 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#024A00', endColorstr='#3E8636',GradientType=0 ); /* IE6-9 */}
    -moz-border-radius: 0px 0px 10px 0px;
        -webkit-border-radius:0px 0px 10px 0px;
        -khtml-border-radius: 0px 0px 10px 0px;
        border-radius:0px 0px 10px 0px;
} 
```

背景属性已正确应用，而链接颜色和边框半径等其他属性则未正确应用。为什么会发生这种情况，我该如何解决？

小提琴：http: [//jsfiddle.net/68Vb6/](http://jsfiddle.net/68Vb6/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T13:11:56.350

边框半径不是样式的一部分，你有一个`}`结束它之前的样式块。

更改此行：

```
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#024A00', endColorstr='#3E8636',GradientType=0 ); /* IE6-9 */} 
```

到：

```
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#024A00', endColorstr='#3E8636',GradientType=0 ); /* IE6-9 */ 
```

选择器`.menu ul li a`比`.extranav a`选择器更具体，因此第一条规则中的设置将优先。将选择器更改`.menu ul li.extranav a`为使其更具体。

# python - 我在 Python 中的第一步

> ID：14041020
> 
> 赞同：5
> 
> 时间：2012-12-26T13:07:17.373
> 
> 标签：python

我正在尝试开始学习 Python，但我从第一步开始就感到困惑。我开始使用`Hello, World`，但是当我尝试运行脚本时，我得到：

> `\xe9`语法错误：第 5 行文件中以“”开头的非 UTF-8 代码，`C:\Documents and Settings\Home\workspace\Yassine frist stared\src\firstModule.py`但未声明编码；有关详细信息，请参阅[http://python.org/dev/peps/pep-0263/](http://python.org/dev/peps/pep-0263/)。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-26T13:19:25.877

添加到第一行是

```
# -*- coding: utf-8 -*- 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-26T13:16:08.167

把这个作为你程序的第一行：

```
# coding: utf-8 
```

另见[定义 Python 源代码编码的正确方法](https://stackoverflow.com/questions/728891/correct-way-to-define-python-source-code-encoding)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-26T13:26:39.937

首先，您应该知道什么是编码。阅读[每个软件开发人员绝对、绝对必须了解 Unicode 和字符集的绝对最低要求（没有借口！）](http://www.joelonsoftware.com/articles/Unicode.html)。

现在，您遇到的问题是大多数人用 ASCII 编写代码。粗略地说，这意味着他们只在代码文件本身中使用拉丁字母、数字和基本标点符号。您似乎在程序中使用了非 ASCII 字符代码，这让 Python 感到困惑。

有两种方法可以解决此问题。首先是告诉 Python 你希望它使用什么编码来读取文本文件。您可以通过`# coding`在磁贴顶部添加声明来做到这一点。第二个，可能更好，是限制自己使用 ASCII 代码。请记住，您始终可以*在 strings*中包含您喜欢的任何字符，方法是将它们以 eg`\x00`或其他的编码形式编写。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-29T00:55:23.250

当你通过解释器运行 Python 时，你必须以这种格式运行它：python *filename.py*（命令行参数），否则你也会得到这个错误。我发表评论是因为您提到您是初学者。

# hibernate - 从非拥有方移除实体

> ID：14041024
> 
> 赞同：2
> 
> 时间：2012-12-26T13:07:22.437
> 
> 标签：hibernate, mapping, one-to-many, cascade, cascading-deletes

我对 Hibernate 比较陌生，所以我仍然很难理解一些概念。其中之一就是拥有。

我有两个对象之间的关系。

对话

```
@OneToMany(mappedBy = "conversation", cascade = CascadeType.ALL)
private List<ConversationParticipant> participants; 
```

对话参与者

```
@ManyToOne
@JoinColumn(name = "ConversationID")
private Conversation conversation; 
```

我想要实现的是，当有人从参与者列表中删除参与者并更新对象对话时，这会级联并从数据库中删除 ConversationParticipant 条目。

我的映射是否错误。代码运行 find，它删除了它应该删除的所有内容，然后更新了 Conversation 对象，但是刷新页面后参与者仍然存在。

有任何想法吗？建议

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T13:31:34.813

要从数据库中删除某些内容，`delete()`必须调用：

```
Conversation c = session.get(Conversation.class, conversationId);
for (Iterator<ConversationParticipant> it = c.getParticipants().iterator(); it.hasNext(); ) {
    Participant p = it.next();
    it.remove(); // Hibernate doesn't care: you've removed an element from a collection
                 // which is not the owner side

    p.setConversation(null); // Hibernate will set the foreign key in the participant 
                             // to NULL, since you modified the owning side

    session.delete(p); // Hibernate will remove the row from the participant table
} 
```

此规则的一个例外是在关联`orphanRemoval = true`上设置了when 。`OneToMany`在这种情况下，从参与者集合中删除参与者会将其从数据库中删除：

```
@OneToMany(mappedBy = "conversation", cascade = CascadeType.ALL, orphanRemoval = true)
private List<ConversationParticipant> participants;

...

Conversation c = session.get(Conversation.class, conversationId);
for (Iterator<ConversationParticipant> it = c.getParticipants().iterator(); it.hasNext(); ) {
    Participant p = it.next();
    it.remove(); // Hibernate will remove the participant from the database,
                 // because orphanRemoval is set to true
} 
```

# opencv - 如何使用 tesseract 和 opencv 从相机中提取文本

> ID：14041025
> 
> 赞同：0
> 
> 时间：2012-12-26T13:07:25.240
> 
> 标签：opencv, ocr, tesseract

我正在使用 tesseract 3.02 和 opencv 让 tesseract 实时识别我相机中的文本。

但效果相当糟糕。结果不可读，无法流畅地显示图像。我认为这是我的代码的问题。

有人可以给我有关如何修改它的建议吗？

非常感谢！

```
#include "stdafx.h"
#include <string>
#include <opencv2/opencv.hpp>
#include <time.h>

using namespace std;
using namespace cv;

int main() {

    // [1]
    tesseract::TessBaseAPI *myOCR = 
            new tesseract::TessBaseAPI();

    // [2]
    printf("Tesseract-ocr version: %s\n",
           myOCR->Version());
    printf("Leptonica version: %s\n",
           getLeptonicaVersion());

    // [3]
    if (myOCR->Init(NULL, "eng")) {
      fprintf(stderr, "Could not initialize tesseract.\n");
      exit(1);
    }

    //声明IplImage指针
    IplImage* pFrame = NULL;

    //获取摄像头
    CvCapture* pCapture = cvCreateCameraCapture(-1);

    //创建窗口
    cvNamedWindow("video", 1);

    //显示视屏
            time_t last_time = time(NULL);
    while(1)
    {

        pFrame=cvQueryFrame( pCapture );
        if(!pFrame)    break;
        cvShowImage("video",pFrame);
        char c=cvWaitKey(33);
        if(c==27)break;

                time_t this_time = time(NULL);
                if(this_time != last_time)
                {
                    last_time = this_time;
        myOCR->SetRectangle(0,0,pFrame->width,pFrame->height);
        myOCR->SetImage((uchar*)pFrame->imageData,pFrame->width,pFrame-   >height,pFrame->depth/8,pFrame->width*(pFrame->depth/8));
        myOCR->Recognize(NULL);
        const char* out = myOCR->GetUTF8Text();
        printf("%s\n",out);
                }

    }
    cvReleaseCapture(&pCapture);
    cvDestroyWindow("video");
    cv::waitKey(-1);
            return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-27T09:57:42.050

Tesseract 旨在处理扫描的书籍。它在只有黑色文本的白页上运行，清晰可见，失真最小。图像大多是黑白的。您的图像是灰度级，因此 Tesseract 的性能会非常差。这不是您的代码的问题，而是 Tesseract 的问题。如果您将相机对准一本书，您将能够获得文本（假设图像已聚焦），但如果您想阅读一般文本（如街道标志、某人 T 恤上的徽标，则没有办法做到这一点. 很抱歉让你失望了。

但是，如果您想识别特定文本，例如信用卡号或路标，您可以做到。

1.  首先抓取您的文本的许多图像。
2.  对图像进行一些预处理，将其转换为 BW，
3.  在许多示例上训练 Tesseract。

然后它将能够完成您的任务。

# javascript - Backbone 0.9.9：listenTo 和 on 的区别

> ID：14041042
> 
> 赞同：55
> 
> 时间：2012-12-26T13:08:48.370
> 
> 标签：javascript, events, backbone.js, backbone-events

我正在尝试了解他们在 Backbone 0.9.9 中所做的新更改。

`listenTo`目前我在理解和之间的区别时遇到了问题`on`：

**听**

```
var View = Backbone.View.extend({

    tagName: "div",

    intialize: function() {
        this.listenTo(this.model, 'change', this.render);
    },

    render: function() {
        this.$el.empty();
        this.$el.append('<p>hello world</p>');
    }

}); 
```

**在**

```
var View = Backbone.View.extend({

    tagName: "div",

    intialize: function() {
        this.model.on('change', this.render, this);
    },

    render: function() {
        this.$el.empty();
        this.$el.append('<p>hello world</p>');
    }

}); 
```

我听说当视图被删除以避免内存泄漏时，它`listenTo`允许`stopListening`取消订阅所有事件。

这是唯一的原因吗？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-07-02T13:30:48.983

当你创建一个视图时，两者都`listenTo`添加了`on`事件处理。但是，当视图被销毁时，`listenTo`调用将[自动删除事件处理程序](http://lostechies.com/derickbailey/2012/10/01/backbone-eventbinder-better-event-management-for-your-backbone-apps/)。这[可以防止内存泄漏](http://lostechies.com/derickbailey/2012/03/19/backbone-js-and-javascript-garbage-collection/)和僵尸事件侦听器。

因此，`on`如果您想自己管理处理程序，请使用。只要确保打电话`off`。否则，调用`listenTo`.

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2012-12-26T15:32:33.500

`listenTo`基本上`stopListening`来自社区。它们有助于更轻松地绑定和取消绑定事件。

围绕这个想法有很多现有的文档和博客文章，包括我写的关于这个主题的东西。

Johnny Oshika 是我看到的第一个使用这种技术的人。它最初是作为 StackOverflow 问题的答案发布在这里：[Backbone.js : repopulate or recreate the view?](https://stackoverflow.com/questions/7567404/backbone-js-repopulate-or-recreate-the-view/7607853#7607853)

你可以在这里阅读我所写的内容：

*   [Backbone.EventBinder：为您的主干应用程序提供更好的事件管理](http://lostechies.com/derickbailey/2012/10/01/backbone-eventbinder-better-event-management-for-your-backbone-apps/)
*   [僵尸！跑！（管理主干应用程序中的页面转换）](http://lostechies.com/derickbailey/2011/09/15/zombies-run-managing-page-transitions-in-backbone-apps/)
*   [Backbone.js 和 JavaScript 垃圾回收](http://lostechies.com/derickbailey/2012/03/19/backbone-js-and-javascript-garbage-collection/)

# javascript - 如何将节点附加到js中的首选位置

> ID：14041043
> 
> 赞同：2
> 
> 时间：2012-12-26T13:08:48.073
> 
> 标签：javascript, dom, append

我在 HTML 中有一个有序列表。

```
<ol class="btns">
  <li>First item</li>
  <li>Second item</li>
  <!--Third one goes here-->
  <li>Four item</li>
</ol> 
```

我想将带有 js 的新列表项添加到三阶。我怎样才能做到这一点？

这是演示：http: [//jsbin.com/akahow/2/edit](http://jsbin.com/akahow/2/edit)

*更多信息*：`appendChild`将新项目添加到列表末尾，我尝试过`insertBefore`但失败了，只有我可以`insertBefore`将它添加到第一位。但我想把它放在第三位。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T13:28:26.447

[http://jsfiddle.net/k6xVc/](http://jsfiddle.net/k6xVc/)

```
var paragraph = document.createElement("li");
var textNode = document.createTextNode("Third item");
paragraph.appendChild(textNode);
var list=document.getElementById("jack");
list.insertBefore(paragraph,list.childNodes[4]);​ 
```

HTML：

```
<ol class="btns" id="jack">
  <li>First item</li>
  <li>Second item</li>
  <!--Third one goes here-->
  <li>Four item</li>
</ol> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T13:31:39.730

您的第一个问题是您使用`getElementsByClassName`了 ，它返回一个节点数组，即使该数组仅包含一个节点。如果您绝对确定该类只有一个且只有一个元素，则应将行更改为：

```
var findmenu = document.getElementsByClassName("btns")[0]; 
```

然后您需要使用`insertBefore`将项目插入堆栈。但是，`insertBefore`需要引用要在其前面插入节点的实际对象，而不是索引。在您的情况下，您将添加以下行：

```
findmenu.insertBefore(paragraph,findmenu.childNodes[4]); 
```

您可能注意到我们必须使用第五个索引 ( `[4]`) 将节点插入到正确的位置。这是因为该`childNodes`数组包含所有类型的节点，包括文本、元素和注释。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T13:41:15.923

获取第二个`<li>` 作为元素并通过使用附加到该元素`appendChild`

检查此[演示](http://jsbin.com/akahow/15/edit)

# linux - 内存使用精度高

> ID：14041044
> 
> 赞同：0
> 
> 时间：2012-12-26T13:09:05.870
> 
> 标签：linux, memory, ps

如何使用“ps aux”获得每个进程的高精度内存使用情况？

```
$ ps aux
USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
root         1  0.0  0.0   3672  1984 ?        Ss   Dec11   0:07 /sbin/init
root         2  0.0  0.0      0     0 ?        S    Dec11   0:00 [kthreadd]
root         3  0.0  0.0      0     0 ?        S    Dec11   0:23 [ksoftirqd/0]
root         6  0.0  0.0      0     0 ?        S    Dec11   0:00 [migration/0]
... 
```

我需要超过 1 位数字。也许我可以用 %MEM 格式化列？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T13:15:13.617

Look into the proc filesystem `/proc/[pid]/status`, `/proc/[pid]/statm`, `/proc/[pid]/smaps`.

To get fully detailed memory map `/proc/[pid]/maps`

Read the [proc(5)](http://linux.die.net/man/5/proc "process information pseudo-file system") manual page for all the details.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T14:18:23.917

**`ps`**命令有那个。您可以输入**`man ps`**详细信息。

当您输入后termianl显示信息时，您可以输入**`/memory`**，然后高亮包含`'memory'`的字符串。您可以使用 输入`n`显示下一个宫殿`memory`。

# android - Activity onBackPress 未显示警报对话框

> ID：14041045
> 
> 赞同：6
> 
> 时间：2012-12-26T13:09:09.803
> 
> 标签：android, android-alertdialog

我有一个活动，当我按下返回按钮时，它没有显示警报对话框。可能是什么问题呢？这是我的代码

```
@Override
public void onBackPressed() {
    // TODO Auto-generated method stub
    super.onBackPressed();

    AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(LogFish.this);

                // set title
                alertDialogBuilder.setTitle("Exit");
                alertDialogBuilder.setIcon(R.drawable.ic_action_search);

                // set dialog message
                alertDialogBuilder
                    .setMessage("This action will cause you to abandon all changes on current new fish log. \n\nAre you sure you want to exit?")
                    .setCancelable(false)
                    .setPositiveButton("YES",new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog,int id) {
                            // if this button is clicked, close
                            startActivity(new Intent(LogFish.this,MainActivity.class));
                            finish();

                        }
                      })
                    .setNegativeButton("NO",new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog,int id) {
                            // if this button is clicked, just close

                            dialog.cancel();
                        }
                    });

                    // create alert dialog
                    AlertDialog alertDialog = alertDialogBuilder.create();

                    // show it
                    alertDialog.show();

                    } 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-26T13:14:23.817

你必须删除 super.onBackPressed();

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T15:46:20.030

```
@Override
public void onBackPressed() {

    final AlertDialog.Builder builder = new AlertDialog.Builder(this);
    builder.setTitle("Title");
    builder.setMessage("Your Message");
    builder.setIcon(android.R.drawable.ic_dialog_alert);

    builder.setPositiveButton("YES", new OnClickListener() {

        public void onClick(DialogInterface dialog, int which) {
            //implement your logic for YES
        }
    });

    builder.setNegativeButton("NO", new OnClickListener() {

        public void onClick(DialogInterface dialog, int which) {
            //implement your logic for NO
        }
    });
    builder.setOnCancelListener(null);
    builder.show();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T13:27:31.147

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    //Handle the back button
    if(keyCode == KeyEvent.KEYCODE_BACK) {
        //Ask the user if they want to quit
        new AlertDialog.Builder(this)
        .setIcon(android.R.drawable.ic_dialog_alert)
        .setTitle(R.string.quit)
        .setMessage(R.string.really_quit)
        .setPositiveButton(R.string.yes, new DialogInterface.OnClickListener() {

            @Override
            public void onClick(DialogInterface dialog, int which) {

                //Stop the activity
                YourClass.this.finish();    
            }

        })
        .setNegativeButton(R.string.no, null)
        .show();

        return true;
    }
    else {
        return super.onKeyDown(keyCode, event);
    }

} 
```

# c# - 读取存储过程参数值的问题

> ID：14041046
> 
> 赞同：1
> 
> 时间：2012-12-26T13:09:10.573
> 
> 标签：c#, wcf, stored-procedures

执行时我无法从存储过程中读取值。

这是我的存储过程

```
ALTER Procedure [dbo].[SaveInvitation]
(
    @InvitationID INT OUTPUT,
    @UserID INT,
    @Email NCHAR(100),
    @InvitationGUID  UNIQUEIDENTIFIER OUTPUT
)
AS
BEGIN
SET NOCOUNT ON;

BEGIN TRY
    IF @UserID = -1
        BEGIN
            SET @UserID = NULL
        END

    IF NOT EXISTS (SELECT 1 FROM Invitations WHERE LTRIM(RTRIM(Email)) = LTRIM(RTRIM(@Email)))
        BEGIN
            INSERT INTO Invitations (UserID,
                    Email,
                    CreateDate)
            VALUES (@UserID,
                    @Email,
                    GETDATE())

            -- GET NEWLY INSERTED INVITATIONS ID
            SET @InvitationID = IDENT_CURRENT('Invitations')

            -- GET GUID FROM INVITATION ID
            SELECT  @InvitationGUID = InvitationGUID
            FROM    Invitations
            WHERE   InvitationID = @InvitationID
        END
    ELSE
        BEGIN
            RAISERROR('ALREADY_INVITATED', 16, 127)
        END
END TRY
BEGIN CATCH
    IF @@TRANCOUNT > 0
        BEGIN
            ROLLBACK
        END
    EXEC ThrowError
END CATCH
END 
```

我正在从这个函数执行这个过程

我的`DataBaseModel.Designer.cs`：

```
public ObjectResult<SaveInvitation_Result> SaveInvitation(ObjectParameter invitationID, Nullable<global::System.Int32> userID, global::System.String email, ObjectParameter invitationGUID)
    {
        ObjectParameter userIDParameter;
        if (userID.HasValue)
        {
            userIDParameter = new ObjectParameter("UserID", userID);
        }
        else
        {
            userIDParameter = new ObjectParameter("UserID", typeof(global::System.Int32));
        }

        ObjectParameter emailParameter;
        if (email != null)
        {
            emailParameter = new ObjectParameter("Email", email);
        }
        else
        {
            emailParameter = new ObjectParameter("Email", typeof(global::System.String));
        }

        return base.ExecuteFunction<SaveInvitation_Result>("SaveInvitation", invitationID, userIDParameter, emailParameter, invitationGUID);
    } 
```

它抛出一个异常

> *数据读取器与指定的“Te​​stModel.SaveInvitation_Result”不兼容。类型的成员“InvitationGUID”在数据读取器中没有同名的对应列。*

我创建了一个复杂类型，即`SaveUserRegistration_Result`并导入了一个`SaveInvitation`返回类型的 函数`SaveUserRegistration_Result`。

如何解决上述异常？存储过程有什么变化吗？

截屏

![在此处输入图像描述](../Images/0318663fa9c244a312ff64ad17a8346f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T13:12:55.500

它给你这个错误是因为你实际上并没有`SELECT`返回结果。***例如，如果您在程序的末尾***添加了一行：

```
SELECT  @InvitationGUID AS InvitationGUID 
```

它应该适合你。

# java - 如何将 GWT 连接到 Oracle 数据库

> ID：14041057
> 
> 赞同：0
> 
> 时间：2012-12-26T13:10:28.467
> 
> 标签：java, database, oracle, gwt, jdbc

我是**GWT**的新手。我正在尝试将我的`Oracle10g`数据库连接到 GWT 服务器程序，我正在使用以下代码：

```
public class Database_connect
{   
    public static void connect() 
    {
        System.out.println("This is a test project");
        Connection con=null;

        try 
        {
            Class.forName("oracle.jdbc.OracleDriver");
            System.out.println("Oracle JDBC driver loaded ok.");
            con=DriverManager.getConnection("jdbc:oracle:thin:@127.0.0.1:1521:XE","naren", "naren");
            System.out.println("Connected with @localhost:1521:XE.");
            System.out.println("We have done it successfully");
        }
        catch(Exception e)
        {
            System.out.println(e);
        }

    }
} 
```

在服务器文件中，我正在调用该`connect()`函数

```
public class GreetingServiceImpl extends RemoteServiceServlet implements GreetingService
{
    public String greetServer(String input) throws IllegalArgumentException 
    {
        Database_connect.connect();
    }
} 
```

但它显示错误。

我不知道现在该怎么办。任何人都可以帮助我。感谢提前。

错误是

```
[WARN] failed Server@6e058516
    java.net.BindException: Address already in use: bind
    at sun.nio.ch.Net.bind0(Native Method)
    at sun.nio.ch.Net.bind(Unknown Source)
    at sun.nio.ch.Net.bind(Unknown Source)
    at sun.nio.ch.ServerSocketChannelImpl.bind(Unknown Source)
    at sun.nio.ch.ServerSocketAdaptor.bind(Unknown Source)
        at org.mortbay.jetty.nio.SelectChannelConnector.open(SelectChannelConnector.java:205)
    at org.mortbay.jetty.nio.SelectChannelConnector.doStart(SelectChannelConnector.java:304)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:39)
    at org.mortbay.jetty.Server.doStart(Server.java:233)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:39)
    at com.google.gwt.dev.shell.jetty.JettyLauncher.start(JettyLauncher.java:672)
    at com.google.gwt.dev.DevMode.doStartUpServer(DevMode.java:509)
    at com.google.gwt.dev.DevModeBase.startUp(DevModeBase.java:1093)
    at com.google.gwt.dev.DevModeBase.run(DevModeBase.java:836)
    at com.google.gwt.dev.DevMode.main(DevMode.java:311)
[ERROR] shell failed in doStartupServer method 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T13:40:49.370

我认为您正在运行该项目 2 次..请杀死任务管理器中的所有 Java 进程并仅运行该项目一次..

# php - 重写规则忽略 /index

> ID：14041058
> 
> 赞同：1
> 
> 时间：2012-12-26T13:10:32.660
> 
> 标签：php, apache, mod-rewrite

我有简单`.htaccess`的：

```
RewriteEngine On
RewriteCond %{REQUEST_URI} ^(?!/static/).+ [NC]
RewriteCond %{REQUEST_URI} ^(?!/media/).+ [NC]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?query=$1 [L] 
```

一切正常（页面/编辑，用户/显示...），但是当我在 URL 上打开浏览器时，`index/something`a 会变空`$_GET`。

请问哪里有问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T13:21:54.163

您当前的重写规则没有考虑 /index/something 的情况。如果您只使用 /something，那么它将被重定向到 index.php?query=something。尝试添加此规则：

```
RewriteRule ^index/(.*)$ index.php?query=$1 [L] 
```

编辑：根据我们看到的评论，Apache 使用 /index 作为 /index.php 的别名。作为一种临时解决方法，直到您确定 Apache 配置所需的更改，您可能可以这样做：

```
RewriteRule ^index/(.*)$ index.php?query=index/$1 [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?query=$1 [L] 
```

将第一条规则放在 RewriteCond 行之前将捕获 /index 情况，其余的将被您的原始规则捕获。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T13:35:05.837

服务器配置可能存在问题，因为“索引”可能是默认文件。所以路由是由于配置而不是由于htaccess而完成的。

尝试检查 Apache 将哪些文件名视为有效的默认名称。另外，如果将 /index(.*) 添加为单独的 RewriteRule 会发生什么？

# android - 使用 Android 4 强制 build.phonegap 导出应用程序

> ID：14041065
> 
> 赞同：0
> 
> 时间：2012-12-26T13:10:51.807
> 
> 标签：android, cordova

有没有办法强制Android OS 版本 4.0.1 或更高版本的[build.phonegap导出应用程序？](http://build.phonegap.com)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T00:11:56.113

config.xml 可以配置最小和最大 SDK 版本：

[http://build.phonegap.com/docs/config-xml](http://build.phonegap.com/docs/config-xml)

请参阅：“Android 特定”中的“最小和最大 SDK 版本”

IE：

`<preference name="android-minSdkVersion" value="10" />`

# unit-testing - 在测试中使用对象列表的最佳实践？

> ID：14041073
> 
> 赞同：1
> 
> 时间：2012-12-26T13:11:43.327
> 
> 标签：unit-testing, mstest

我正在使用 MSTest 在我们的应用程序中改进单元测试。我们的许多测试将使用通常来自我们数据库的对象（类）的模拟列表。我想将此列表保存在测试项目中，然后根据需要为每个需要它的测试阅读该列表。是否有这样做的最佳实践？顺便说一句，这些列表可能包含数百或数千个项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T13:48:57.533

至少有两种解决方案

## 将 JSON 反序列化为域对象

使用库[Json.Net](http://json.codeplex.com/)，您可以将包含 JSON 的文本文件反序列化为对象层次结构

```
var hierarchy = JsonConvert.DeserializeObject<Root>(testJson) 
```

[在此处](https://gist.github.com/4483835)查看完整示例

好处

*   **易于编辑**
*   支持复杂的层次结构
*   测试数据可以存储在单独的文本文件中

缺点

*   **随着时间的推移跟踪域对象的更改可能非常复杂**
*   不支持架构

## NDbUnit 是一个 .NET 库，用于在测试期间管理数据库状态

如果您在测试期间涉及 ORM，您可以[使用 NdbUnit](http://code.google.com/p/ndbunit/)从根据数据库 XSD 创建的 XML 文件将数据加载到 SQLite

```
SQLiteConnection connection = boundSession.GetConnection();

using (var cmd = new SQLiteCommand("PRAGMA foreign_keys = OFF", connection))
{
    cmd.ExecuteNonQuery();
}

var sqlLiteUnitTest = new SqlLiteDbUnitTest(connection);

sqlLiteUnitTest.ReadXmlSchema(xsdFile);
sqlLiteUnitTest.ReadXml(xmlDataFile);
sqlLiteUnitTest.PerformDbOperation(DbOperationFlag.CleanInsertIdentity);

using (var cmd = new SQLiteCommand("PRAGMA foreign_keys = ON", (SQLiteConnection)connection))
{
    cmd.ExecuteNonQuery();
} 
```

[在此处](https://gist.github.com/4483905)查看完整示例

好处

*   **由于 XSD，很容易处理大量数据**
*   适用于复杂的集成测试套件并支持不同的 SQL 引擎

缺点

*   **这是集成测试，而不是单元测试**
*   XSD 通常只包含数据库中的对象
*   您需要使 XSD 保持最新，并且能够在 XSD 更改的情况下重新生成 XML

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T22:23:01.023

# ruby-on-rails - rails, gem tanker, search through several models

> ID：14041082
> 
> 赞同：1
> 
> 时间：2012-12-26T13:12:23.387
> 
> 标签：ruby-on-rails, indextank, searchify

I'm using Searchify (IndexTank) in my rails app. Everything works perfect with separate models. I added tanker conf to my models (ex. Question model):

```
class Question < ActiveRecord::Base
  attr_accessible :name, :user_id
  self.per_page = 2

  has_many :comments
  belongs_to :user

  include Tanker
  tankit 'uaebb_dev' do
    indexes :name
  end

  after_save :update_tank_indexes
  after_destroy :delete_tank_indexes
end 
```

Here is action from question controller

```
def search
  @questions = Question.search_tank(params[:search])
  render :index
end 
```

This code works perfect. But I have several models (Question, Item ...) which have search functionality. Is there way to search through all models in app (like general search)? I know that I can do:

```
@questions = Question.search_tank(params[:search])
@items = Item.search_tank(params[:search])
.... 
```

But it doesn't look like very good solution. Is there any better way using tanker gem?

# java - Hudson: Mechanism for performing database updates

> ID：14041086
> 
> 赞同：-1
> 
> 时间：2012-12-26T13:12:45.633
> 
> 标签：java, build, hudson, build-automation, continuous-deployment

We are planning to automate the build system using Hudson. We are new to Hudson or it would be better to say this way that we are new to build automation process. Our application is on Java platform and the database is on MS SQL. This (automation) milestone is break down into different goals. The first step which we have is to automate database changes (DDL/DML) and during updating database if anything goes wrong it should be able to roll back the changes and send an e-mail to a group to notify the failure (with reasons). Otherwise, if succeed then allow to move on to the next step which is make the build and deploy with [LiveRebel](http://zeroturnaround.com/software/liverebel/#!/).

I think we should have a centric mechanism on build failure on any instance if a build fail it should be able roll back changes what it would have had done. For instance, if database changes failed as I said it should notified and don't proceed further. And, if database succeed and build making process failed (e.g because of Unit Tests) it should be able to roll-back the database changes. If notification can have failure details (like exception details with person responsible for this) it would be very helpful to diagnose and inquire appropriately. How can (should) I do this?

We are also interested to use [LiquidBase](http://www.liquibase.org/) with Hudson.

I would like to ask for your opinion and suggestions how should I plan this and what should be a good way to achieve this.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T13:37:26.610

首先，您不应该混淆构建和部署。数据库更新将是您的部署过程的一部分，而不是您的构建过程。即使使用持续集成，这也应该分开。这意味着您在构建项目并运行所有 JUnit 测试后更改数据库。如果在此之前失败，则不应执行更改，因此无需回滚。

至于你的实际问题：我不知道有什么插件可以做你想做的事。在 Hudson/Jenkins 中，您始终可以执行批处理/shell 脚本。编写一个脚本来执行您的更改。如果您的脚本以错误返回码退出，则构建应该会失败。

对于发送构建失败的通知，有各种插件，包括电子邮件。

# java - Primefaces数据表所选行无法使用viewscope

> ID：14041087
> 
> 赞同：3
> 
> 时间：2012-12-26T13:12:48.503
> 
> 标签：java, jsf-2, primefaces, nullpointerexception, viewstate

我正在使用 JSF 2.0 和 Primefaces 3.4.2，我有一个使用延迟加载填充的数据表。

当我查看 managedbean 的范围时，datatable selectedRow 给出了空指针异常。如果我使用会话范围，那么我可以在 managedbean 中获得 selectedRow。

我正在使用 CDI Spring 注释来指定范围。我已经使用[这种](http://cagataycivici.wordpress.com/2010/02/17/port-jsf-2-0s-viewscope-to-spring-3-0/)方法来创建视图范围。

*更新 1*

我注意到另一件事是当我分页到第二页然后返回第一页时使用视图范围，然后我可以获得 selectedRow。如果我选择没有分页的行，那么我会得到空指针异常。

JSF 页面

```
<p:dataTable id="dataTable" var="req" lazy="true" value="#{emp.lazyModel}"
                paginator="true" rows="10" 
                             selection="#{emp.selectedRequest}"
                            selectionMode="single">                         
          <p:ajax event="rowSelect" listener="#{emp.onRowSelect}" /> 
```

托管豆

```
@Named("emp")
@Scope("view")
public class EmployeesManagedBean implements Serializable {

    @PostConstruct
    public void init() {
        initTable();
    }

    private void initTable() {
        lazyModel = new LazyRequestDataModel(requestList, requestService);
    }

    public LazyDataModel<Employee> getLazyModel() {
        return lazyModel;

    } 
```

我在`onRowSelect`方法的这一行得到空指针异常

```
 Emp emp = (Emp) event.getObject()); 
 System.out.println(emp.getEmpNo() ); 
```

完整的错误堆栈跟踪

```
java.lang.NullPointerException
    at net.test.managed.bean.RequestManagedBean.onRowSelect(RequestManagedBean.java:134)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.sun.el.parser.AstValue.invoke(AstValue.java:187)
    at com.sun.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:297)
    at org.primefaces.component.behavior.ajax.AjaxBehaviorListenerImpl.processAjaxBehavior(AjaxBehaviorListenerImpl.java:52)
    at org.primefaces.event.SelectEvent.processListener(SelectEvent.java:40)
    at javax.faces.component.behavior.BehaviorBase.broadcast(BehaviorBase.java:106)
    at javax.faces.component.UIComponentBase.broadcast(UIComponentBase.java:760)
    at javax.faces.component.UIData.broadcast(UIData.java:1071)
    at javax.faces.component.UIData.broadcast(UIData.java:1093)
    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:794)
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1259)
    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:81)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
    at weblogic.servlet.internal.StubSecurityHelper$ServletServiceAction.run(StubSecurityHelper.java:227)
    at weblogic.servlet.internal.StubSecurityHelper.invokeServlet(StubSecurityHelper.java:125)
    at weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:301)
    at weblogic.servlet.internal.TailFilter.doFilter(TailFilter.java:26)
    at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:56)
    at weblogic.servlet.internal.RequestEventsFilter.doFilter(RequestEventsFilter.java:27)
    at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:56)
    at weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.wrapRun(WebAppServletContext.java:3730)
    at weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.run(WebAppServletContext.java:3696)
    at weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:321)
    at weblogic.security.service.SecurityManager.runAs(SecurityManager.java:120)
    at weblogic.servlet.internal.WebAppServletContext.securedExecute(WebAppServletContext.java:2273)
    at weblogic.servlet.internal.WebAppServletContext.execute(WebAppServletContext.java:2179)
    at weblogic.servlet.internal.ServletRequestImpl.run(ServletRequestImpl.java:1490)
    at weblogic.work.ExecuteThread.execute(ExecuteThread.java:256)
    at weblogic.work.ExecuteThread.run(ExecuteThread.java:221) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T18:37:59.003

我已经设法通过使用`@ViewAccessScoped`which is supported in CDI 解决了这个问题。在maven中添加依赖或者直接从[http://myfaces.apache.org/extensions/cdi/download.html](http://myfaces.apache.org/extensions/cdi/download.html)下载并放到classpath中。

```
<dependency>
    <groupId>org.apache.myfaces.extensions.cdi.core</groupId>
    <artifactId>myfaces-extcdi-core-api</artifactId>
    <version>1.0.5</version>
    <scope>compile</scope>
</dependency> 
```

一个小问题仍然存在，即第一次部署应用程序时，我仍然没有获得选定的行值，对于后续选择，我能够获得选定的行值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T13:16:45.870

如果您想使用选择，我认为您必须在数据表上提供 rowKey 属性。

# css - 快速 Z 索引问题

> ID：14041097
> 
> 赞同：0
> 
> 时间：2012-12-26T13:13:22.177
> 
> 标签：css, z-index

现在还很早，所以我可能在这里遗漏了一些明显的东西，但我想向社区寻求一些快速帮助。当您访问[演示页面](http://genesis.glbranding.com/wp-test/)并将鼠标悬停在滑块上时，您会看到下一个和上一个按钮按应有的方式显示。尽管图像在左侧和右侧具有“折叠”效果，但我试图弄清楚为什么它们没有显示。

我玩弄了z-index，但无法弄清楚。有人可以帮忙解决一下应该快速解决的问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T13:38:54.807

你已经设置了溢出：隐藏在你的

```
<div class="pix_diapo diapostarted"> 
```

由于您的折叠位于包含元素之外，因此它会隐藏它。
只需将其删除，它就会起作用。

# java - 正确释放 I/O 资源

> ID：14041100
> 
> 赞同：6
> 
> 时间：2012-12-26T13:13:32.427
> 
> 标签：java, file, io

我想知道释放文件资源/句柄的最佳/适当方式是什么。

传统代码，

```
BufferredInputStream stream = null
try{
  ----
  stream = new BufferredInputStream(new FileInputStream());
  ----
} finally{
  if(stream != null){
    stream.close()
  } 
```

}

文件句柄是通过`BufferredInputStream.close`单独关闭来释放还是需要`stream(i.e. FileInputStream.close())`显式调用底层。

`P.S. Javadoc for [FilterOutputStream.close]`方法指定它也将显式关闭底层流。但是其他流似乎在文档中没有这个。

```
[FilterOutputStream.close]: http://docs.oracle.com/javase/1.4.2/docs/api/java/io/FilterOutputStream.html#close%28%29 
```

请指教。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T13:25:25.370

您始终可以检查底层类的源代码以确定确切的行为。

但是，在这种情况下，调用`close()`on`BufferedInputStream`也会关闭底层流，即`FileInputStream`.

源代码可[在此处获得](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/io/BufferedInputStream.java#BufferedInputStream.close%28%29)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T13:21:45.697

当多个流被链接时，关闭最后构建的流将关闭底层流。因此，平仓`BufferedInputStream`也将平仓底层证券`FileInputStream`。

因此，您只需在一个流上调用 close() ，它就会自动关闭底层流。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-26T13:23:54.110

你的方法是正确的。如有疑问，请始终检查源代码。[http://www.docjar.com/html/api/java/io/BufferedInputStream.java.html](http://www.docjar.com/html/api/java/io/BufferedInputStream.java.html) close 方法正在关闭链接到 BufferedInputStream 的“in”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T13:27:37.007

BufferredInputStream 本身不包含任何系统资源，因此 BufferredInputStream.close() 将简单地将关闭调用传播到它包装的 InputStream ..所以它应该做得很好。

# javascript - JS: Transfer DataTransferItemList to WebWorker

> ID：14041103
> 
> 赞同：5
> 
> 时间：2012-12-26T13:13:40.553
> 
> 标签：javascript, html, drag-and-drop, web-worker

i want to use the synchroneous JS FileSystem API, therefore, this code has to be put to a webworker. the incoming data for the webworker are taken from a dragndrop event (dataTransfer.items) in order to be able to use chromes newest capabilitiy to upload folders. sadly, every try is canceled by chrome with a "Uncaught Error: DATA_CLONE_ERR: DOM Exception 25".

basically, its like this:

```
 var files=e.dataTransfer.items; [copying the DataTransferItemList]
  var worker=new Worker(...)
  worker.postMessage(files); 
```

this does not work. any idea, why? a similar (but not 100% identical) example can be found here: [http://www.html5rocks.com/en/tutorials/file/filesystem-sync/](http://www.html5rocks.com/en/tutorials/file/filesystem-sync/) - this seems to work. its not a DataTransferItemList, its a FileList there - cant this type of List be serialized?

Thanks, Christoph

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-10T04:37:29.407

您应该使用`event.dataTransfer.files`来获取`FileList`. 然后您可以将其直接发布给工作人员：

```
var files=e.dataTransfer.files || e.target.files; // Cross browser FileList
var worker=new Worker(...);
worker.postMessage({files: files}); 
```

# mysql - 地理距离 MySQL

> ID：14041104
> 
> 赞同：5
> 
> 时间：2012-12-26T13:13:42.690
> 
> 标签：mysql, geo

要搜索距给定位置最近的位置，请按距离排序

1.  我应该使用浮点数还是点数？
2.  我应该预先计算 cos/sin/sqrt [http://www.movable-type.co.uk/scripts/latlong-db.html的值吗](http://www.movable-type.co.uk/scripts/latlong-db.html)
3.  我的搜索是一个城市内的不同地点。
4.  许多旧帖子都告诉 mysql 没有适当的地理支持，最新的 MySQL 版本也是如此吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-26T14:32:21.720

我们`double`用于存储`latitude`和`longitude`. 此外，我们预计算（通过触发器）仅在查看一个点时可预计算的所有值。我目前无法访问我们正在使用的公式，稍后会添加。这已针对最佳速度/精度平衡进行了优化。

对于定义的区域搜索（给我 x 公里内的所有点），我们还存储了乘以`1e6`(1,000,000) 的纬度/经度值，因此我们可以通过比较闪电般快速的整数范围来限制为正方形，例如

```
lat BETWEEN 1290000 AND 2344000
AND
lng BETWEEN 4900000 AND 4910000
AND
distformularesult < 20 
```

**编辑：**

这是PHP中当前位置的值的公式和预先计算。

WindowSize 是您必须使用的值，它的度数因子 1e6，用于缩小中心周围正方形中可能的结果，加快结果查找 - 不要忘记这**至少**应该是您的搜索半径大小。

```
$paramGeoLon = 35.0000 //my center longitude
$paramGeoLat = 12.0000 //my center latitude

$windowSize = 35000;   

$geoLatSinRad = sin( deg2rad( $paramGeoLat ) );
$geoLatCosRad = cos( deg2rad( $paramGeoLat ) );
$geoLonRad    = deg2rad( $paramGeoLon );

$minGeoLatInt = intval( round( ( $paramGeoLat * 1e6 ), 0 ) ) - $windowSize;
$maxGeoLatInt = intval( round( ( $paramGeoLat * 1e6 ), 0 ) ) + $windowSize;
$minGeoLonInt = intval( round( ( $paramGeoLon * 1e6 ), 0 ) ) - $windowSize;
$maxGeoLonInt = intval( round( ( $paramGeoLon * 1e6 ), 0 ) ) + $windowSize; 
```

搜索我的中心特定范围内的所有行

```
SELECT
          `e`.`id`
        , :earthRadius * ACOS ( :paramGeoLatSinRad * `e`.`geoLatSinRad` + :paramGeoLatCosRad * `m`.`geoLatCosRad` * COS( `e`.`geoLonRad` - :paramGeoLonRad ) ) AS `geoDist`

FROM
          `example` `e`
WHERE
        `e`.`geoLatInt` BETWEEN :paramMinGeoLatInt AND :paramMaxGeoLatInt
        AND
        `e`.`geoLonInt` BETWEEN :paramMinGeoLonInt AND :paramMaxGeoLonInt
HAVING `geoDist` < 20
ORDER BY 
        `geoDist` 
```

公式具有相当好的准确性（低于一米，取决于您所在的位置以及点之间的距离）

我已经在我的数据库表中预先计算了以下值`example`

```
CREATE TABLE `example` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `geoLat` double NOT NULL DEFAULT '0',
  `geoLon` double NOT NULL DEFAULT '0',

  # below is precalculated with a trigger
  `geoLatInt` int(11) NOT NULL DEFAULT '0',
  `geoLonInt` int(11) NOT NULL DEFAULT '0',
  `geoLatSinRad` double NOT NULL DEFAULT '0',
  `geoLatCosRad` double NOT NULL DEFAULT '0',
  `geoLonRad` double NOT NULL DEFAULT '0',
  PRIMARY KEY (`id`),
  KEY `example_cIdx_geo` (`geoLatInt`,`geoLonInt`,`geoLatSinRad`,`geoLatCosRad`,`geoLonRad`)  
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci ROW_FORMAT=DYNAMIC 
```

示例触发器

```
DELIMITER $
CREATE TRIGGER 'example_before_insert' BEFORE INSERT ON `example` FOR EACH ROW
BEGIN
    SET NEW.`geoLatInt` := CAST( ROUND( NEW.`geoLat` * 1e6, 0 ) AS SIGNED INTEGER );
    SET NEW.`geoLonInt` := CAST( ROUND( NEW.`geoLon` * 1e6, 0 ) AS SIGNED INTEGER );
    SET NEW.`geoLatSinRad` := SIN( RADIANS( NEW.`geoLat` ) );
    SET NEW.`geoLatCosRad` := COS( RADIANS( NEW.`geoLat` ) );
    SET NEW.`geoLonRad` := RADIANS( NEW.`geoLon` );
END$

CREATE TRIGGER 'example_before_update' BEFORE UPDATE ON `example` FOR EACH ROW
BEGIN
    IF NEW.geoLat <> OLD.geoLat OR NEW.geoLon <> OLD.geoLon
    THEN
        SET NEW.`geoLatInt` := CAST( ROUND( NEW.`geoLat` * 1e6, 0 ) AS SIGNED INTEGER );
        SET NEW.`geoLonInt` := CAST( ROUND( NEW.`geoLon` * 1e6, 0 ) AS SIGNED INTEGER );
        SET NEW.`geoLatSinRad` := SIN( RADIANS( NEW.`geoLat` ) );
        SET NEW.`geoLatCosRad` := COS( RADIANS( NEW.`geoLat` ) );
        SET NEW.`geoLonRad` := RADIANS( NEW.`geoLon` );
    END IF;
END$
DELIMITER ; 
```

问题？否则玩得开心:)

# opencv - how to recognise a zebra crossing from top view using opencv?

> ID：14041109
> 
> 赞同：3
> 
> 时间：2012-12-26T13:14:16.620
> 
> 标签：opencv, computer-vision, robotics

you can get all the details about the problem from this pdf document: www.shaastra.org/2013/media/events/70/Tab/422/Modern_Warfare_ps_v1.pdf

how to recognize a zebra crossing from top view using opencv ?? it is not a straight zebra crossing it has some twists and turns i have some ideas, 1\. parallel line detection but the available techniques only works to find straight parallel not the ones that has curve in it. 2\. template matching to match a template of back to back white and black stripes but it becomes tedious since i cant find any pattern matching techniques with scaling and rotation.

in fact a idea on any single part of the problem will be so helpful!! it is driving me crazy someone please help!!!! any help is appreciated thanks in advance ....

NOTE: the zebra crossing i am talking about has the inside lines perpendicular to the border lines, just like a normal zebra crossing. only difference is that the path has curves like a river

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T14:49:28.197

我[会将类似 Haar 的功能](http://opencv.willowgarage.com/documentation/c/objdetect_cascade_classification.html)视为低级描述符。[它在人脸检测](http://opencv.willowgarage.com/wiki/FaceDetection)中非常常用，但却是一种应用广泛的技术。

一些非常常见的特征对线条很敏感；垂直、水平或对角线。这些应该非常适合检测斑马人行横道。此外，根据您的实现，这些功能集可能对规模不敏感，这将使您的算法更加健壮。

大量具有这种对比度的平行线（白色（或黄色）油漆与路面）应该可以帮助您识别斑马线。我不确定你所说的“曲折”是什么意思，因为斑马线按照设计应该是笔直的。如果您提供一两个边缘案例的图像，也许我们可以与您进行头脑风暴。

**编辑：** 我也非常同意@Algebra 的评论。使用霍夫变换，您可以获得线条的边缘。一定间隔的许多平行线应该是斑马线的强烈指示。

无论您探索哪种方法，您都需要使用机器学习技术进行模式识别，以最终决定斑马线的外观。您不想硬编码诸如“y 宽度和 z 长度的 x 平行线”之类的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T14:10:24.397

这是一篇相关论文：

[使用照相手机检测和定位人行横道](http://www.ncbi.nlm.nih.gov/pmc/articles/PMC2874980/)

虽然这不是一个 opencv 实现，但它应该是一个合理的起点。

# c# - How to select first item of DropDownList if value I'm passing to it in FormView BindItem is not in range?

> ID：14041114
> 
> 赞同：1
> 
> 时间：2012-12-26T13:14:31.630
> 
> 标签：c#, asp.net, asp.net-4.5

I'm using FormView in Asp.net 4.5 to edit entity model like this:

```
<asp:FormView runat="server" ....>
   <EditItemTemplate>
     .....
     <asp:DropDownList runat="server" SelectedValue='<%# BindItem.value %>'>
     </asp:DropDownList>
     .....
   </EditItemTemplate>
</asp:FormView> 
```

If BindItem.value is one of the values in DropDownList items this works perfectly, but if BindItem.value was ,for example, null or any value out of range, this will raise an exception like this:

> Selection out of range
> Parameter name: value

Is there a way to let DropDownList selects first item if BindItem.value is wrong?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T15:15:09.497

这绝对是 ASP.NET 中一直困扰我的事情之一。下拉列表的数据绑定不是很聪明。

我经常手动解决这个问题，而不是使用单向/双向数据绑定。在 Page_PreRender 中，您可以手动检查集合是否包含该值。如果没有，请选择索引 0。注意，您可能必须先进行数据绑定。

```
private void Page_PreRender(object sender, System.EventArgs e)
{
    if (formview1.CurrentMode == FormViewMode.Edit)
    {
        DropDownList ddl = formview1.FindControl("dropdownlist1");
        ddl.ClearSelection();
        var item = ddl.FindByValue("[MYVALUE]");
        if (item == null) ddl.SelectedIndex = 0;
        else item.Selected = true;
    }
} 
```

您也可以尝试这种方法（它可能更干净）：

```
protected void dropdown_DataBound(object sender, EventArgs e)
{
    DropDownList ddl = (DropDownList)sender;
    ddl.ClearSelection();
    var item = ddl.FindByValue("[MYVALUE]");
    if (item == null) ddl.SelectedIndex = 0;
    else item.Selected = true;
} 
```

# actionscript-3 - fscommand 参数的非专有解决方案

> ID：14041123
> 
> 赞同：0
> 
> 时间：2012-12-26T13:15:20.690
> 
> 标签：actionscript-3, apache-flex, fscommand

我想从 swf 传递参数并执行本地批处理脚本。我正在使用 fscommand，我可以从中调用批处理文件，但我无法发送参数。我在网上搜索了很多，并提出了一些解决方案。

[SWF工作室](http://www.northcode.com)

[Flash Studio](http://www.multidmedia.com) 等

但我需要一些免费或便宜的解决方案。为使用一项功能支付超过 300 美元对我来说没有意义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T14:05:47.413

我希望您尝试在空中而不是在浏览器中执行此操作。

在这种情况下，您可以`extendedDesktop`在应用描述符文件中包含配置文件支持，如下所示：

```
<supportedProfiles>extendedDesktop</supportedProfiles> 
```

然后你可以像这样启动你的批处理文件：

```
 protected function launchBatchWithParam(batchFileName:String, arguments:Array):void{
    var params:NativeProcessStartupInfo = new NativeProcessStartupInfo();
    params.arguments = new <String>['/C',File.applicationDirectory.nativePath+'/'+batchFileName];
        for each(var arg:String in arguments){
             params.arguments.push(arg);
        }
    var cmdFile:File =  File.applicationDirectory.resolvePath('C:\\WINDOWS\\system32\\cmd.exe');
    params.executable =  cmdFile;
    var process:NativeProcess = new NativeProcess();
    process.start(params);                  
} 
```

由于 adobe 人员存在可疑的安全问题，您必须在文件被禁止`cmd.exe`的情况下启动您的 bat 。`.bat`

# javascript - JSONP using ContentService of Google Apps Script?

> ID：14041124
> 
> 赞同：3
> 
> 时间：2012-12-26T13:15:24.003
> 
> 标签：javascript, google-apps-script, jsonp

I'm trying to use [ContentService](https://developers.google.com/apps-script/content_service), to serve [JSONP](http://en.wikipedia.org/wiki/JSONP) in a webpage with [Google Apps Script](https://developers.google.com/apps-script/), following the samples provided in [this link](https://developers.google.com/apps-script/content_service) under *"Serving JSONP in Web Pages"* sub-topic.

GS code:

```
function doGet(request) {
  var events = CalendarApp.getEvents(
    new Date(Number(request.parameters.start) * 1000),
    new Date(Number(request.parameters.end) * 1000));
  var result = {
    available: events.length == 0
  };
  return ContentService.createTextOutput(
    request.parameters.prefix + '(' + JSON.stringify(result) + ')')
    .setMimeType(ContentService.MimeType.JSON);
} 
```

HTML/JS Code:

```
<script src="https://script.google.com/macros/s/AKfycbwZCY0qrZ09szGvKOttA30IaJkdMAZrh_oNnvv0qzCqFWyuO5Wc/exec?start=1325437200&end=1325439000&prefix=alert"></script> 
```

I published it, by deploying the GS code as `webapp`, with the following parameters:

*   Executing the app as: User accessing the web app
*   Who has access to the app: Anyone

Unfortunately, whenever I try to run/open the HTML file containing the code, I got the following error in browser's console, and nothing happens:

![enter image description here](../Images/0c5a2984fceace53c831167b877846a3.png)

***How to run this sample provided in Google Apps Script link without errors ?***

* * *

**[OPTIONAL] Investigating the issue in details:**

The error found in resources files generate by the browser is as follows: ![enter image description here](../Images/c4a1ea35c2ea52e611a033458774422e.png)

And the browser translated DOM is as follows:

```
<html>
   <head>
       <script src="https://script.google.com/macros/s/AKfycbwZCY0qrZ09szGvKOttA30IaJkdMAZrh_oNnvv0qzCqFWyuO5Wc/exec?start=1325437200&amp;end=1325439000&amp;prefix=alert">
       </script>
   </head>
   <body></body>
</html> 
```

The generated link, in my case is:
"[https://script.google.com/macros/s/AKfycbwZCY0qrZ09szGvKOttA30IaJkdMAZrh_oNnvv0qzCqFWyuO5Wc/exec?start=1325437200&end=1325439000&prefix=alert](https://script.google.com/macros/s/AKfycbwZCY0qrZ09szGvKOttA30IaJkdMAZrh_oNnvv0qzCqFWyuO5Wc/exec?start=1325437200&end=1325439000&prefix=alert)"

If this link is placed in browser address bar, it shows the following message: ![enter image description here](../Images/d15fc75eb8f345fc063cde5684633970.png)

which means that the returned authorization response wasn't able to be displayed on browser and being translated as valid DOM.

***How to overcome this issue ?***

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-26T15:56:13.047

JSONP 需要以下任何一项才能工作：

1.  匿名访问，“用户访问 webapp”模式不可用 - 您需要以“像我一样执行”运行它。
2.  不使用任何需要授权的服务的脚本，在这种情况下，您可以选择“用户访问 webapp”。这仅适用于登录到 Google 的用户，与以前的模式相比，使用它的唯一优势是所用服务的任何配额都将应用于每个用户，而不是应用于 webapp 的所有用户。一般来说，更喜欢选项1。
3.  已被用户预授权的脚本。这也仅适用于登录用户，但它可以让您使用任何服务。请参阅下文了解如何使用它。

我假设您正在尝试使用 3 - 否则，使用 1 它将正常工作。如果您确实需要 3 个（例如，访问用户电子邮件的 JSONP 服务），您将必须让他们能够在服务运行之前对其进行授权。为此，请在 doGet() 中添加如下内容：

```
function doGet(e) {
  if (e.parameter.auth) 
    return HtmlService.createHtmlOutput('Thank you! Now the script can run!');
  // ... rest of your code
} 
```

然后，您可以为用户提供他们可以访问的 script.google.com/YOUR_SCRIPT_URL?auth=1 的链接。（值 1 无关紧要......任何值都可以）。他们将获得授权页面，如果他们接受授权，他们将看到您的感谢消息，并且 JSONP 服务将为他们工作。只需执行一次...脚本将在用户下次访问您的页面时记住授权，除非您已将其更改为需要新权限或用户已撤销授权。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T21:17:26.177

在任何网页中提供 JSONP 总是会引发错误：

> 未捕获的 SyntaxError：意外的标识符

这可能会得到纠正，但在意料之中，因为它将数据发送到 GAS 环境（UiApp 或 HTMLservice）之外的外部页面。如果您在客户端创建自己的 javascript 函数，ServiceContent 运行良好。

Apps 脚本代码：

```
function doGet(e) {
   // ..more code
   lReturn = true;
   var mymessage = (lReturn==true) ? "your contact details are saved ! ":" data no saved.. ";
   var result = { status: lReturn, message : mymessage };
   return ContentService.createTextOutput(
     e.parameter.prefix + '(' + JSON.stringify(result) + ')')
    .setMimeType(ContentService.MimeType.JSON);`
  } 
```

和 Javascript 代码（使用 JQuery）：

```
var url = <your Apps Script URL>?prefix=myabc
$.ajax({
  type: "GET",
  url: url1,
  data: {callback:"?"},
  dataType: "script"
  }).done( function( data ) {
         console.log(data); //data returned : UNDEFINED
}); 
```

和你自己的javascript函数：

```
function myabc(data) {
  //alert(data);
  //alert(data.message);
  //var xyz = JSON.stringify(data);
  //alert(xyz);
  alert(data.message);
} 
```

最好的问候
@Mlaynes [http://mlaynessanchez.blogspot.com](http://mlaynessanchez.blogspot.com)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T17:39:07.650

问题是您尝试在客户端代码中执行的 jsonp“脚本”不是有效的 Javascript，如您所示，它是授权 html 网页。授权后应该没问题。不过，正如教程所说，在部署网络应用程序时，您可以以自己（“我”）的身份执行该应用程序，然后允许访问“任何人，甚至匿名”，并且您不会收到任何授权提示。尽管在查看您的日历和用户的日历方面，这显然有一些不同的行为。Corey G 提供了一种很好的方式来提示授权。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-05T16:15:35.130

对于 ajax 调用，您必须在服务器端使用 setMimeType (ContentService.MimeType.JAVASCRIPT);

# lua - Lua 外星人返回多个值

> ID：14041125
> 
> 赞同：0
> 
> 时间：2012-12-26T13:15:25.093
> 
> 标签：lua, calling-convention

我有这个功能，我想返回多个值，但我不知道如何实现

```
function GetDiskSpace(_disk)
    require("alien")
    local kernel32 = alien.load("kernel32.dll")
    kernel32.GetDiskFreeSpaceExA:types("int", "pointer", "int", "int", "int")

    if kernel32.GetDiskFreeSpaceExA(_disk, _avail_space, _disk_space, _free_space) ~= 0 then
            return _avail_space, _disk_space, _free_space
            --[[or like this return kernel32.GetDiskFreeSpaceExA(_disk, _avail_space, _disk_space, _free_space)
            GetDiskFreeSpaceExA should retun non zero if function ran properly, 
            and should retun additional values if those are given 
            (btw values are __int64 i'm not sure if I specified them correct, maybe
            I should set them as "long" instead of "int")
            either way it return only function value and nil's.
            --]]
    else
            print("GetDiskSpace returned error.")
    end
end

hdd_a, hdd_b, hdd_c = GetDiskSpace("C:\\") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T16:24:05.417

您给出的类型规范是错误的，原因有几个。第一个参数是 type`"string"`而不是`"pointer"`。您必须编写`"ref int"`，而不仅仅是`"int"`为了引用（或指针）到`int`. 而且您还必须将 ABI 指定为`"stdcall"`.

当使用`"ref int"`参数调用函数时，您传递了一个虚拟的 0 值，但获得了一个额外的返回值，因此这里`GetDiskFreeSpaceExA`有效地返回 4 个结果。

您担心`uint64_t`结果的值类型是正确的。据我所知，Alien**不**支持 64 位整数，因此以下代码仅返回磁盘空间的低 32 位：

```
function GetDiskSpace(_disk)
    require("alien")
    local kernel32 = alien.load("kernel32.dll")
    kernel32.GetDiskFreeSpaceExA:types { ret="int", abi="stdcall", 
        "string", "ref int", "ref int", "ref int" }
    local ok, _avail_space, _disk_space, _free_space = 
        kernel32.GetDiskFreeSpaceExA(_disk, 0, 0, 0)
    assert(ok == 1, "GetDiskSpace returned error.")
    return _avail_space, _disk_space, _free_space
end

hdd_a, hdd_b, hdd_c = GetDiskSpace("C:\\") 
```

要纠正这个问题，您可以通过修改 Alien 的源代码并重新构建它来添加对 64 位整数的支持。

# php - How to show last comments in php?

> ID：14041130
> 
> 赞同：0
> 
> 时间：2012-12-26T13:15:48.587
> 
> 标签：php

I have table with name "Comments", there is few columns: `ID, User, author, date, post`

What I want is to show last 10/20 comments, where newest is from top, all by vertically.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T13:17:59.090

那将是一个与数据库相关的问题，通常在 SQL 查询中进行排序。假设您的评论表具有给定的结构，它将是：

```
SELECT ID, user, author, date, post FROM Comments ORDER BY date DESC LIMIT 0,10 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T13:18:59.357

将此附加到您的 sql 语句`order by date desc limit 0,20` 这应该给您最新的 20 条评论

如果还想显示接下来的20条结果也可以添加`OFFSET 20`，这样可以帮助你达到加载下一页的效果。

要显示评论，您需要显示它们

```
<?php
$result=mysql_query("SELECT ID, user, author, date, post TOP number column_name(s) * FROM comments ORDER BY date DESC LIMIT 0,10");
while($row=mysql_fetch_array($result))
 {
   echo $row[4];
 }
 ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T13:17:36.280

`limit`在 mysql 查询或 jquery 中都`prepend()`可以。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T13:19:01.993

```
SELECT TOP number column_name(s)
FROM table_name ORDER BY column_name(s) ASC|DESC 
```

# actionscript-3 - 如何在 AS3 中通过类使用 geturl

> ID：14041131
> 
> 赞同：0
> 
> 时间：2012-12-26T13:15:54.380
> 
> 标签：actionscript-3, flash, flash-cs5

我试试这个代码（我的班级名称是 bAEForm）

```
package {

      import flash.display.SimpleButton;
      import flash.display.Sprite;
      import flash.net.navigateToURL;
      import flash.net.URLRequest;
      import flash.net.URLRequestMethod;
      import flash.net.URLVariables;

    public class bAEForm extends Sprite {

        public function bAEForm() {
            var url:String = "http://www.google.com";
            var request:URLRequest = new URLRequest(url);

            var variables:URLVariables = new URLVariables();
variables.exampleSessionId = new Date().getTime();
variables.exampleUserLabel = "guest";
request.data = variables;
request.method = URLRequestMethod.POST;

navigateToURL(request);
        }
    }
} 
```

我收到了这个错误

> “bAEForm”类必须是“flash.display.SimpleButton”的子类，因为它链接到该类型的库符号。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T14:01:19.210

在您的 Flash 库中的“bAEForm”中，可能是继承了一个**SimpleButton**或强制转换为一个。

如果这是一个错误，您应该将其更改为**MovieClip**或**Sprite**。

否则，如果它是一个按钮，请更新：

```
public class bAEForm extends SimpleButton { ... 
```

# php - 多个部分到页面。将不同的页面加载到每个部分

> ID：14041138
> 
> 赞同：0
> 
> 时间：2012-12-26T13:16:35.080
> 
> 标签：php, html, css

我有一页分为几个部分。我喜欢在每个部分加载一个页面。如果我有一个表单并单击提交按钮或链接，我想在本节中显示结果。

例如：我在显示 php 页面的“item1_section2”部分`manage_team_teacher.php`。在页面 manage_team_teacher.php 我有一个表单，如果我提交表单或单击链接，我想在“item1_section2”部分再次显示结果。我对如何执行此操作感到非常困惑，因为所有内容都在同一页面中（`index.php`）。我是 PHP 新手，需要您的帮助。你有什么建议？

如您所见，我尝试了很多方法，但遇到了问题：我尝试从 URL 获取页面名称（在类别中）。

```
<a href="index.php?category=manage_team_teacher2.php&amp;id_team=<?= $row['id_team']; ?>#item1_section2">manage</a></td> 
```

以上是我尝试创建的链接示例

```
<div class="content" style="font-size:30px;">
                    <div class="section black" id="item1_section1" style="float: left; overflow: scroll; padding: 30px 0 0 30px; width: 869px;">
                            <h2>Section 1</h2>
                            <p>
                            sdffffffffffffffffffffffffff
                            sdffffff
                            sdf 
                            </p>
                            <ul class="nav">
                            <li>1</li>
                            <li><a href="#item1_section2">2</a></li>
                            <li><a href="#item1_section3">3</a></li>
                            </ul>

                    </div>
                    <div class="section white" id="item1_section2" style="float: left; overflow: scroll; padding: 30px 0 0 30px; height:690px; width: 869px;">
                            <h2>Section 2</h2>
                            <p>

                            <?php
                            include "includes/tests/multiple_choice.php";

                            ?>
                            </p>
                            <ul class="nav">
                            <li><a href="#item1_section1">1</a></li>
                            <li>2</li>
                            <li><a href="#item1_section3">3</a></li>
                            </ul>
                    </div>
                    <div class="section black" id="item1_section3">
                            <h2>Section 3</h2>
                            <p>
                            ‘He scents thy footsteps in the snow
                            Wheresoever thou dost go,
                            Thro’ the wintry hail and rain.
                            When wilt thou return again?

                            </p>
                            <ul class="nav">
                            <li><a href="#item1_section1">1</a></li>
                            <li><a href="#item1_section2">2</a></li>
                            <li>3</li>
                            </ul>
                    </div>
        </div>
        </div>

<!--########################--ITEM 2--########################-->

<?php if ($row['settings_key'] == background-color){
echo '<div id="item2" class="item" style="background-color: #'.$row['settings_value'].';">';
}?>

            <a name="item2"></a>
            <div class="content" style="font-size:30px;">
                <div class="section black" id="item2_section4" style="float: left; overflow: scroll; font-size: 18px; padding: 30px 0 0 30px; height:690px; width: 869px;">
                        <ul class="nav" style="float: left;">
                        <li>1</li>
                        <li><a href="#item2_section5">2</a></li>
                        <li><a href="#item2_section6">3</a></li>
                        </ul>
                        <h2>Section 1</h2>

                        <p>
                        <?php
                        include "create_new_team_teacher.php";
                        ?>
                        </p>

                </div>
                <div class="section white" id="item2_section5" style="float: left; overflow: scroll; font-size: 18px; padding: 30px 0 0 30px; height:690px; width: 869px;">
                        <h2>Section 2</h2>
                        <p>

                        <?php
                        if(isset($_GET['category'])){
                        // include page about me
                        include($_GET['category']);
                        //else if is defined URL variable 'interests'
                        } else {
                        include('manage_team_teacher.php');
                        }

                        ?>
                        </p>
                        <ul class="nav">
                        <li><a href="#item2_section4">1</a></li>
                        <li>2</li>
                        <li><a href="#item2_section6">3</a></li>
                        </ul>
                </div>
                <div class="section black" id="item2_section6">
                        <h2>Section 3</h2>
                        <p>
                        ‘He scents thy footsteps in the snow
                        Wheresoever thou dost go,
                        Thro’ the wintry hail and rain.
                        When wilt thou return again?

                        </p>
                        <ul class="nav">
                        <li><a href="#item2_section4">1</a></li>
                        <li><a href="#item2_section5">2</a></li>
                        <li>3</li>
                        </ul>
                </div>

            </div>

        </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T13:19:07.093

您还需要检查 url 是否存在

```
if(isset($_GET['category']) $$ $_GET['category'] ==bla ){ 
```

否则，如果有人在 url 中设置了 bla 并且它不存在而不是它导致

```
Warning: include(): Failed opening '' for inclusion (include_path='blabal') on line bla 
```

# apache-camel - 骆驼中特定的全局和每个生产者/消费者的超时配置

> ID：14041140
> 
> 赞同：0
> 
> 时间：2012-12-26T13:16:43.087
> 
> 标签：apache-camel

我是新来的（这是我的第一个问题）。我想配置一个超时，所以如果路线上的一个端点需要更长的时间，骆驼会抛出异常或提供控制权。过去似乎考虑过这样的问题：

[https://issues.apache.org/jira/browse/CAMEL-1661?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#issue-tabs](https://issues.apache.org/jira/browse/CAMEL-1661?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#issue-tabs)

我想知道一个简单的拦截器（例如，一个用超时包装端点的拦截器）是否可以完成这项工作，或者这种方法有什么问题（当然，真正的解决方案会比使用多播更轻，但同样主意）。

谢谢，萨吉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T06:28:36.300

我不确定您是否可以比使用多播“更轻松”地做到这一点。如果您有一堆不同的端点，它在错误处理方面肯定不是很灵活。

主要问题是组件之间存在差异以及它们的行为方式。

从[多播文档](http://camel.apache.org/multicast)：

> 如果达到超时而仍在运行的任务仍然存在，那么 Camel 难以以正常方式关闭的某些任务可能会继续运行。因此，请谨慎使用此选项。

我建议您使用正在使用的端点尝试您的特定场景并对其进行全面测试。

另一种选择是在此处发布特定案例以征求 SO 用户的建议。

# grails - grails urlMappings 中的参数化操作名称

> ID：14041145
> 
> 赞同：1
> 
> 时间：2012-12-26T13:17:02.503
> 
> 标签：grails, urlmappings.groovy

我正在尝试将 JSON api 映射到我的控制器，例如：

/api/user/1/location GET --> Controller.getLocation()

/api/user/1/location POST --> Controller.setLocation()

我尝试了以下 url 映射规则，但没有任何运气：

```
 "/api/$controller/$id/$property" {
        action = {[GET: "get${params.property.capitalize()}", POST: "set${params.property.capitalize()}"]}
    } 
```

任何人都尝试过这样的事情

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T17:01:38.880

我尝试并成功了：

```
"/api/$controller/$id/$property"{
     action = {"get"+params.property.capitalize()}            //put all joint into the {} bracelet
} 
```

和

```
"/api/$controller/$id/$property"{
     action = [GET: "getLocation", POST:"setLocation"]         //remove the {} bracelet
} 
```

但未能将动态参数分配到 [GET:'',POST:''] 映射中，例如：

```
"/api/$controller/$id/$property"{
     action = {["POST": "set"+params.property.capitalize(), "GET": "get"+params.property.capitalize()]}
} 
```

和

```
"/api/$controller/$id/$property"{
     action = [POST: {"set"+params.property.capitalize()}, GET: {"get"+params.property.capitalize()}]
} 
```

两者都产生了 404 错误。

所以我猜Grails只允许这种配置是静态的。也许有人可以深入研究源代码以便稍后找到。

# php - 获取其他数据的函数和类

> ID：14041146
> 
> 赞同：0
> 
> 时间：2012-12-26T13:17:23.210
> 
> 标签：php, mysql, function, variables

好的，所以我正在尝试从用户那里获取 id，如果我输入`$getid = '1'`一切正常

```
require_once "../maincore.php";

$getid = '1';
class UploadHandler
{   
    protected $options;
    // ...

    function __construct($options=null, $getid = '1') {

        $this->options = array( 
            'script_url' => 'myfile/'.$getid.'/',

  // ... 
```

如果我输入 like`$getid = $userdata['user_id']` 或者我将某些内容放入类中`$myid = $userdata['user_id'];`并设置，`$getid = $myid` 则没有任何效果。很长一段时间以来，我一直在尝试很多东西和案例。红色教程和什么是私有函数等等

也试过 private`$myid = $userdata['user_id'];`和 var`$myid = $userdata['user_id'];`

所以我只想获取`$userdata['user_id']`我无法让它工作的数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T14:04:43.877

在我看来，好像您正在尝试将全局变量分配为方法参数的默认值...这*是无法完成*的。这有很多原因，但现在最重要的是，这与 OOP 的主要思想相矛盾：OOP 的要点是你不必多次编写代码，不管发生了什么：

```
class My_DB_Object
{
    private $_connection = null;
    public function __construct($dbType = 'mysql', array $loginParams = array())
    {
        switch(strtolower($dbType))
        {
            case 'mysql':
                return $this->constructMySQL($loginParams);
            case 'pgsql':
                return $this->constructPGSql($loginParams);
            case 'mssql':
                return $this->constructMSSQL($loginParams);
            default:
                throw new InvalidArgumentException($dbType.' is not supported, yet?');
        }
    }
    private function constructMySQL(array $loginParams)
    {
        //and so on...
    }
} 
```

该对象*可以*在您的所有项目中使用，无论您要使用什么数据库，它都可能`select`定义了一个方法，处理查询各种数据库的不同方法，而无需重写相同查询的时间和再一次……

无法保证您尝试分配为默认值的变量将被设置或*在范围内*：您可能会在另一个对象的成员函数内创建一个新实例，该实例也可能位于完全不同的命名空间中.

基本上：默认值是硬编码的。
文件包含类定义*或*生成输出的代码，您的代码段似乎两者兼而有之。

您的代码应如下所示：

```
require_once('UploadHandler.php');//or look into __autload()
$uploadInstance = new UploadHandler(null, $userdata['user_id']); 
```

文件`UploadHandler.php`应如下所示：

```
<?php
class UploadHandler
{
    protected $options = null;
    public function __construct (array $options = array(), $getid = '1')
    {//assuming $options should be an array
        $this->options = $options;
        $this->options['script_url'] = 'myfile/'.$getid.'/';
    }
}
//no closing ?> tag! 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T14:06:57.163

您必须将数据传递给类或注入数据（另一个主题）：

当你构建你的类时，你会告诉类值是什么。

```
//some place in your code
$userdata = array(...some data from somewhere ...);
//$options is optional but at the beginning of the args so the 'null' is required
$class = new UploadHandler(null, $userdata['user_id']); 
```

将*可选*参数放在函数参数的末尾通常很有帮助：

```
class UploadHandler
{   
    protected $options;
    // ...

    // Required params first then optional params
    function __construct($getid ,$options=null) {

        $this->options = array( 
            'script_url' => 'myfile/'.$getid.'/', 
```

然后你构建你的类：

```
//some place in your code
$userdata = array(...some data from somewhere ...);
//$options is now optional and at the end so the default value will be 'null'
$class = new UploadHandler($userdata['user_id']); 
```

# php - WordPress WooCommerce 插件的特色图片大小与特色图片不同

> ID：14041148
> 
> 赞同：1
> 
> 时间：2012-12-26T13:17:30.883
> 
> 标签：php, wordpress, woocommerce, wordpress-theming

我只是使用 WooCommerce 插件使用 WordPress 二十一十一主题开发电子商务网站。一切正常。但有一次我被打动了。演示站点链接在[这里](http://modulesoft.info/projects/gamesite/)。在该站点中，您可以在所有产品部分看到一些带有一些折扣选项的产品。现在我已经用简单的 html 和 css 制作了这个静态文件。现在我希望它是纯动态的，以便管理员可以进行更改。为此，我搜索了 WooCommerce 特色产品并获得了此[链接](http://wcdocs.woothemes.com/user-guide/misc/shortcodes/). 现在有了这个链接，我刚刚调用了该区域的特色产品。但是我遇到了产品图像大小的问题。现在就在下面，您可以看到主页中的图像是 100X140。但对于特色图片，我需要 500X75 的图片尺寸。正如我所经历的那样，WooCommerce 使特色产品和主要产品图像的裁剪宽度和高度相同。那么有人可以告诉我如何将特色图像制作成500X75，主页内的图像应该是100X140。任何帮助和建议都将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T00:26:54.487

您是否在横幅类型功能中使用这些？

如果是这样，您可以在横幅或滑块中使用特色图片并将它们链接到产品页面。

# java - 如何在以下情况下唤醒客户端线程？

> ID：14041155
> 
> 赞同：0
> 
> 时间：2012-12-26T13:17:58.753
> 
> 标签：java, multithreading, sockets, networking

```
class Server
{
   while(true)
   new ClientThread(Socket.accept()).start();
}
class ClientThread extends Thread
{
   public void run()
    {
       ppl.chat(Socket s);//a defined protocol object in my program
     }
}
class Protocol
{
   public Protocol(Socket s)
    {
           socket=s;
     }
    public synchronized void chat()
    {
       //here i defined socket input output streams and serverinput is a string given     by server
       if(ServerInput=="wait")
        wait();
       if(ServerInput=="cont")
        notify()
        .....................sending infomation-------
      }
} 
```

在这里我可以离开`wait()`块之后我不能通过这个套接字发送信息。我测试它成功地从等待块中出来。当通过从其他客户端线程给出“cont”来通知它时。有人解决我的问题吗？感谢提前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T13:31:01.237

您的伪代码是一个非常令人困惑的恕我直言，但我会做的是。

仅使用客户端线程进行读取，而不是写入。

当你想写时，获得一个写锁（不要锁定整个对象）或在一次写中发送消息（这做同样的事情）

这样，阅读线程只需要在有要阅读的内容时唤醒。

这意味着您不需要等待或通知，我建议您在任何情况下都使用它。如果您需要它们，您应该使用 Java 5.0 中添加的高级并发库（但在这种情况下不是）

# xml - XSLT 从属性文件中读取值

> ID：14041159
> 
> 赞同：0
> 
> 时间：2012-12-26T13:18:16.220
> 
> 标签：xml, xslt

我正在编写一个 xstl 文件。
我想为 XML 中的值设置最小和最大阈值。
可以说我有

```
<metric id="M12">12.00</metric> 
```

在这里，我想检查值是否`M12`应该在**5-12**的范围内。

我在 XSL 中手动设置这些阈值。
但现在我想从某个`.properties`文件中读取这些阈值。

`.properties`是否可以从 XSL 文件中读取文件中的值？

**如果是，我如何读取`.properties`文件中设置的阈值？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T14:49:26.290

**使用标准 XSLT`document()`函数来动态获取具有其 URI 的 XML 文档**。

如果 .properties 文件不是 XML 文件而是文本文件，则可以使用标准 XSLT 2.0 函数在 XSLT 2.0 中读取它**[`unparsed-text()`](http://www.w3.org/TR/xslt20/#function-unparsed-text)**。

# java - 我可以选择性地刷新 JSP 页面中的内容吗？

> ID：14041161
> 
> 赞同：5
> 
> 时间：2012-12-26T13:18:40.057
> 
> 标签：java, html, jsp, page-refresh, partial-page-refresh

这似乎很奇怪，但仍然：

有什么办法可以只刷新jsp页面的选择性部分吗？认为 ：

```
<% response.setIntHeader("Refresh",1); // refresh at an interval of 1 second %>

<!-- Html5 snippet that plays a sound that lasts more than a second !-->

<% jsp code %> 
```

现在，我想在页面刷新时音频剪辑从它离开的地方开始。那可能吗 ？剪辑的大小是**2.4 MB**？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T13:26:57.097

使用 Jquery 刷新 JSP 中的特定 div 元素

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/
libs/jquery/1.3.0/jquery.min.js"></script>
<script type="text/javascript">
var auto_refresh = setInterval(
function ()
{
$('#load_tweets').load('record_count.php').fadeIn("slow");
}, 10000); // refresh every 10000 milliseconds
</script>

<body>
  <div id="load_tweets"> </div>
</body> 
```

**编辑1**

**reload-window.jsp** // 将此文件放在 WEB-INF 旁边

```
<%@page import="java.util.Calendar"%>
<%@page import="java.util.GregorianCalendar"%>
<%@page contentType="text/html" pageEncoding="UTF-8"%>

<%! GregorianCalendar newYear = new GregorianCalendar(2013, 0, 1);

    /*
     * 0 : January
     * 1 : 1st January
     * 2013 : year
     */%>
        <div>
        Time : 
        <%= (newYear.getTimeInMillis() - new GregorianCalendar().getTimeInMillis()) / 1000%>
        </div> 
```

**主.jsp**

```
<%-- 
    Document   : nyblast
    Created on : Dec 26, 2012, 10:44:27 AM
    Author     : non-admin
--%>
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>JSP Page</title>
</head>
<body bgcolor="#73AF59">

<script type="text/javascript" src="/js/jquery.min.js">

        </script>
<script type="text/javascript">
            var auto_refresh = setInterval(
            function ()
            {
                $('#load_tweets').load('reload-window.jsp').fadeIn("slow");
            }, 5000); // refresh every 10000 milliseconds

          </script>

<table width="100%">
    <tr>
        <td width="40%"></td>
        <td><img src="images/animations/pyear.gif" /></td>
    </tr>
    <tr>
        <td width="40%">
        <center><font face="Chiller" size="+6"> <br />
        Countdown </font></center>
        </td>
        <td>
        <center><font face="Chiller" size="+6"> <br />

        <div id="load_tweets"></div>
        </font></center>
        </td>
    </tr>
    <tr>
        <td colspan="2" style="height: 400px" valign="bottom"><img
            src="images/animations/3D_balloons.gif" /> <em>This poor design
        and animations compiled by Suhail Gupta.</em> <audio
            style="visibility: hidden"> </audio></td>
    </tr>
    <!-- !-->
</table>

</body>

</html> 
```

这里的问题

```
$('#load_tweets').load('reload-window.jsp').fadeIn("slow");
                }, 5000); // refresh every 5000 milliseconds 
```

加载函数我们需要传递我们需要刷新的 JSP

确保您的 js 位于正确的位置。

# javascript - 获取 KnownFolder 的物理路径

> ID：14041171
> 
> 赞同：1
> 
> 时间：2012-12-26T13:19:07.640
> 
> 标签：javascript, windows-store-apps

有没有办法确定 Windows 应用商店 JavaScript 应用程序中已知文件夹的物理路径？我的应用清单声明了对图片库的访问权限，我可以获得该库的文件：

```
Windows.Storage.KnownFolders.picturesLibrary.getFilesAsync().then(function (files) {
    // do something with files
}); 
```

但我也想向用户显示`picturesLibrary`. 上有一个`path`属性`picturesLibrary`，但它是一个空字符串。还有一个`folderRelativeId`价值，这`"D452C811CB5EB8A4\\Pictures"`对用户来说意义不大。

我可以向用户展示一个文件夹选择器并允许他们选择图片库，然后我可以在处理程序中为文件夹选择器获取物理路径。但是有没有办法直接在代码中获取已知文件夹的路径？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T15:37:29.907

您不应该在您的应用程序中使用这样的物理路径 - 您使用 KnownFolders 采用的方法是推荐的方法。

尝试以编程方式导航文件夹只能通过 KnownFolders 或您通过文件夹选择器建议的那样完成。安全模型不允许您以任何其他方式执行此操作。

# visual-studio-2012 - 如何在 TFS 2012 上下载新文件？

> ID：14041179
> 
> 赞同：0
> 
> 时间：2012-12-26T13:20:04.440
> 
> 标签：visual-studio-2012

> **可能重复：**
> [有没有办法让 TFS 中的获取最新行为类似于获取最新签入的特定版本](https://stackoverflow.com/questions/13634401/is-there-a-way-to-make-get-latest-in-tfs-behave-like-get-specific-version-of-the)

我的环境是：

Visual Studio 2012 - 带有 SP1 和 TFS 2012 的终极版

我的疑问：

当我单击解决方案菜单上的“获取最新版本（递归）”时，TFS 只获取我已经下载的文件。其他开发人员签入的新文件在 Source Explorer 中显示为“未下载”。往下看。如何在“获取最新版本（递归）”上下载这个新文件？

![TFS - 源代码控制](../Images/2ff5db4ba9ea07d39ee4ee9a474e6c22.png)

# python - 一种在 python 类中处理 html 内容的方法

> ID：14041180
> 
> 赞同：0
> 
> 时间：2012-12-26T13:20:07.870
> 
> 标签：python, user-interface, user-friendly

我正在处理一些 html 解析，并且我很难定义一种方法来处理所提取的信息。

例如，考虑这样的页面[http://www.the-numbers.com/movies/1999/FIGHT.php](http://www.the-numbers.com/movies/1999/FIGHT.php)。我想处理每个内容，例如`The Numbers Rating`, `Rotten Tomatoes`, `Production Budget`,`Theatrical Release`和其他内容，以便我存储每个“键”可能假设的值。

提取过程为我解决了，我不确定存储这些内容的正确方法。正如我所说，它们就像“钥匙”一样工作，所以 a`dictionary`是一个非常直接的答案。我仍然很想在我正在构建的类中为每个“键”添加一个成员。

问题是在访问这些内容期间，考虑到代码编写，哪种方法效果更好，以及这些方法是否是最好的方法。

对于第一种情况，我会有类似的情况：

```
class Data:

    def __init__(self):
        self.data = dict()

    def adding_data(self):
        self.data["key1"] = (val1, val2)
        self.data["key2"] = val3
        self.data["key3"] = [val4, val5, val6, ...] 
```

对于第二个：

```
class Data:

    def adding_data(self):
        self.key1 = (val1, val2)
        self.key2 = val3
        self.key3 = [val4, val5, val6, ...] 
```

我考虑这个的原因是我正在使用`BeautifulSoup`API，而且我非常喜欢他们在生成的“汤”上处理每个标签的方式。

```
soup = BeautifulSoup(data)
soup.div
soup.h2
soup.b 
```

您认为哪种方式更人性化？有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T14:00:41.097

如果您有固定数量的属性，即。您事先知道键值，那么我认为更好的方法是将这些键中的每一个都作为实例变量，就像在您的第二个示例中一样。

另一方面，如果您事先不知道您将拥有哪些“键”或者它们太多，那么您可以使用像字典这样的容器类型。您可以动态地将数据添加到字典中，因此如果它们很多，它也会减少负担。例如，您可以使用“for ... in ..”循环来添加数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T14:02:27.687

如果您使用类属性（self.key1 ...），静态检查代码的工具（如 pylint）将向您显示未使用和未定义的变量，因此会显示**mistypes**。

```
class toy(object):
    pass

a = toy()
a.key1 = "hello world"
print a.key10 
```

皮林特运行：

```
> pylint toto.py
************* Module toto
C:  1,0: Black listed name "toto"
C:  1,0: Missing docstring
C:  1,0:toy: Invalid name "toy" (should match [A-Z_][a-zA-Z0-9]+$)
C:  1,0:toy: Missing docstring
W:  5,0: Attribute 'key1' defined outside __init__
R:  1,0:toy: Too few public methods (0/2)
C:  4,0: Invalid name "a" (should match (([A-Z_][A-Z0-9_]*)|(__.*__))$)
E:  6,6: Instance of 'toy' has no 'key10' member 
```

字典中的键不会出现这种情况。输入错误会消失，这就是我更喜欢类属性的原因。但是，如果您有字典，则可以轻松地遍历键集。虽然您还可以获取类实例的属性列表，但您会在其中得到一些干扰。（请参阅 key1 在默认定义的其他属性中丢失）

```
>>> class toy(object):
...     pass
... 
>>> a = toy()
>>> a.key1 = "hello world"
>>> dir(a)
['__class__', '__delattr__', '__dict__', '__doc__', '__format__', '__getattribute__', '__hash__', '__init__', '__module__', '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__sizeof__', '__str__', '__subclasshook__', '__weakref__', 'key1'] 
```

因此，如果您不需要在您创建的“键”列表中进行迭代，我会使用类属性方式。

# xml - awk 和/或 sed 命令对 XML 中重复标签中的值求和

> ID：14041183
> 
> 赞同：0
> 
> 时间：2012-12-26T13:20:18.427
> 
> 标签：xml, shell, unix, aix

我有一个`<Amt Ccy="EUR">3.1</Amt Ccy="EUR">`标签重复的 XML。这（Ccy 可能会有所不同）在另一个标签下`<Main>`。我需要对仅使用 awk 和/或 sed 命令的所有值求和`<Amt Ccy="EUR">`（Ccy 可能会有所不同） 。`<Main>`

可以帮忙吗？

示例如下所示

```
<root>
    <Main>
            <someothertag>..</someothertag>
        <Amt Ccy="EUR">3.1</Amt>
    </Main>
                .
                .
                .
                some other tags
    <Main>
          <someothertag>..</someothertag>
             <Amt Ccy="SGD">51</Amt>
    </Main>
    <another>
      <Amt Ccy="EUR">10</Amt>
     </another>
</root> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T15:39:56.710

您的描述与提供的示例文件之间存在一些不一致之处，并且您的 xml 文件中存在一些技术错误。这是我认为您正在寻找使用的内容`awk`：

```
awk '/<Main>/ { f=1 } f && /Amt/ { split($0,a,/[<>]/); s+=a[3] } /<\/Main>/ { f=0 } END { print "The sum is:", s }' file 
```

结果

```
The sum is: 54.1 
```

请注意，我使用的正则表达式可能需要根据您的输入进行调整。如果存在上述脚本失败的情况，请考虑使用更多示例数据和预期输出来[编辑您的问题。](https://stackoverflow.com/posts/14041183/edit)然后，我们将能够为您提供进一步的帮助。此外，根据评论，您可能需要考虑使用适当的 xml 解析器来完成这项工作。

* * *

***编辑：***

从下面的评论中，下面应该计算不同货币的总和，它必须在`<Main>`和`</Main>`标签内。

```
awk '/<Main>/ { f=1 } f && /<Amt.*Amt>/ { split($0,a,/[<>"]/); b[a[3]]+=a[5] } /<\/Main>/ { f=0 } END { for (i in b) printf "The sum of %s is: %s\n", i, b[i] | "sort" }' file 
```

结果：

```
The sum of EUR is: 3.1
The sum of SGD is: 51 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T07:38:51.597

```
echo "cat /root//Amt" |                            \
    xmllint --shell input.xml |                    \
    sed -n '/EUR/{s/[^>]*> *\([0-9.]*\).*/\1/p}' | \
    awk '{sum+=$1} END{print sum;}' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T15:48:00.657

通常，当需要查找 XML 文件时，最好使用 XML 解析器。

但是，如果您的文件足够简单，并且`<Amt Ccy="EUR">...</Amt>`每行仅包含一个而没有其他内容：

```
awk -F "[<>]" '$0 ~ "^[ \t]*<Amt Ccy=\"EUR\">.*</Amt>" { sum += $3}
               END { print sum }' your_file 
```

我正在做的是

*   仅选择以 0 个或多个空格/制表符开头并匹配您的特定标签的行，
*   使用`<`and`>`作为字段分隔符，您的金额是字段编号 3，
*   将所有选定行中的金额相加，
*   在脚本末尾打印总和。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T12:27:14.687

鉴于以下数据

```
$ cat data.xml
<root>
    <Main>
            <someothertag>..</someothertag>
        <Amt Ccy="EUR">3.1</Amt>
    </Main>
    <Main>
          <someothertag>..</someothertag>
             <Amt Ccy="SGD">51</Amt>
    </Main>
    <another>
      <Amt Ccy="EUR">10</Amt>
     </another>
</root> 
```

以下

```
$ echo "cat ///Amt[@Ccy='EUR']/text()" | xmllint --shell data.xml | awk '{s+=$1} END{print s}'
13.1 
```

使用 xmllint 命令解析出 Euro "Amt" XML 标记的值，使用 Xpath 表达式。然后将结果集与 awk 相加。

使用 Xpath 是处理 XML 的更原生的方式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-19T02:12:56.647

如果 gawk 可用，您可以使用记录分隔符模式来匹配 XML 标记。下面的模式匹配以 < 开头的内容，后跟一个或多次不是 > 的字符，并以 > 结尾。当 gawk 匹配一个 RS 时，它会将匹配的文本分配给 RT。这为我们提供了一种匹配标签、检查标签并处理嵌入在标签之间的值的方法。

```
gawk '

  BEGIN { RS="<[^>]+>" }  

  RT == "</Amt>"  { 
    if (previousTag ~ "EUR") { eTotal += $0 }
  } 

  { previousTag = RT; } 

  END { print eTotal }'  myFile 
```

对于给定的示例，上面将打印出 13.1。如果我们想对每种货币求和，previousTag 可以用作 awk 数组/哈希映射键的基础。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-08-19T11:32:40.937

也许有人会发现以下方法很有用。

有一个 xpath **sum()**函数可用于避免使用 xmllint 以外的工具来总结结果：

```
echo "xpath sum(///Amt[@Ccy='EUR'])"|xmllint --shell data.xml 
```

# javascript - 选择 div 选项作为 youtube 建议

> ID：14041184
> 
> 赞同：0
> 
> 时间：2012-12-26T13:20:19.677
> 
> 标签：javascript, jquery

我想知道如何使用键盘向上/向下箭头选择建议 div 的选项，就像在 youtube 中一样，当您键入任何键并出现建议时，您可以使用键盘箭头选择一个选项。我有一个文本框，下面有一个“建议”div。我该怎么做？（我没有使用 jQuery 自动完成）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T13:24:10.787

你可以看看[jQuery UI Autocomplete 插件](http://jqueryui.com/autocomplete/)。这是文档中的一个示例，它说明了如何`<input>`使用指定的数据源将标准元素转换为自动完成框：

```
<!doctype html>

<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>jQuery UI Autocomplete - Default functionality</title>
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css" />
    <script src="http://code.jquery.com/jquery-1.8.3.js"></script>
    <script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
    <link rel="stylesheet" href="/resources/demos/style.css" />
    <script>
    $(function() {
        var availableTags = [
            "ActionScript",
            "AppleScript",
            "Asp",
            "BASIC",
            "C",
            "C++",
            "Clojure",
            "COBOL",
            "ColdFusion",
            "Erlang",
            "Fortran",
            "Groovy",
            "Haskell",
            "Java",
            "JavaScript",
            "Lisp",
            "Perl",
            "PHP",
            "Python",
            "Ruby",
            "Scala",
            "Scheme"
        ];
        $( "#tags" ).autocomplete({
            source: availableTags
        });
    });
    </script>
</head>
<body>

<div class="ui-widget">
    <label for="tags">Tags: </label>
    <input id="tags" />
</div>

</body>
</html> 
```

在此示例中，数据被硬编码到 HTML 中，但插件也支持检索自动完成值[`using a remote datasource`](http://jqueryui.com/autocomplete/#remote)。

因此，如果您在实现中遇到一些特定问题（当然不要忘记展示您到目前为止的进度），您可以使用它并返回 StackOverflow。

# jenkins - 执行脚本时在jenkins中获取错误ssh异常身份验证失败

> ID：14041185
> 
> 赞同：2
> 
> 时间：2012-12-26T13:20:24.887
> 
> 标签：jenkins, jenkins-plugins, jsch

我在 jenkins 预构建步骤中进行了配置--> 使用 ssh 在远程主机上执行 shell 脚本

在构建之前我想执行以下脚本我得到以下错误任何人都可以知道，如果我错过了任何信息，请告诉我实际上下面的脚本是停止服务器 [EnvInject] - 变量注入成功

执行脚本 cd /home/appsusr; ./ims-carte-stop.sh

```
[ssh] Exception:Auth fail
com.jcraft.jsch.jschException: Auth fail
     at com.jcraft.jsch.session.connect(session.java.452)
     at com.jcraft.jsch.session.connect(session.java.150)
     at org.jvnet.hudson.plugins.SSHSite.createSession(SSHSite.java:114)
     at org.jvnet.hudson.plugins.SSHSite.executeCommand(SSHSite.java:124)
     at org.jvnet.hudson.plugins.SSHBuilder.perform(SSHBuilder.java.51)
     at hudson.tasks.BuildStepMonitor$Runner.perform(BuildStepMonitor.java.19)
     at hudson.model.AbstractBuild$AbstractRunner.perform(AbstractBuild.java.700) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-10-02T20:51:21.967

今天碰到这个。我可以从 Jenkins 内部 ssh 到两个系统，但不是第三个系统，所有系统都使用共享凭据。结果发现故障系统上的 /etc/ssh/sshd_config 有“PasswordAuthentication no”。这导致正确报告的身份验证失败。

高温高压

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T22:35:44.583

我遇到了类似的问题，我如何解决它是在启动 jenkins 时添加一个 cmdline 开关。我设置了（啰嗦）`-Dorg...useCLI=true`

```
nohup java -Dorg.jenkinsci.plugins.gitclient.Git.useCLI=true -jar jenkins.war > jenkins.log 2>&1 & 
```

它的要点是这个开关让 jenkins 使用已安装的 git，而不是 JGit 客户端。

希望有帮助。

另外，这是一个可以查看的 URL（尤其是长长的评论）

[https://issues.jenkins-ci.org/browse/JENKINS-17204](https://issues.jenkins-ci.org/browse/JENKINS-17204)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-09T08:27:00.570

更改密码后，我遇到了类似的问题`Remote Linux machine`。

**`Passphrase/Password`**在工作的部分更新**`Credentials`**以及**`Manage Jenkins -> Configure Sytem -> SSH remote hosts`**为我工作不足。

# sql - 使用 SELECT DISTINCT 子句删除重复项？

> ID：14041187
> 
> 赞同：0
> 
> 时间：2012-12-26T13:20:35.903
> 
> 标签：sql, select, distinct

我正在返回一组记录，其中可能包含*一些*相同的行，除了一个特定的列。我对这个专栏不感兴趣，所以它不需要成为记录集的一部分。

使用`SELECT DISTINCT`和省略可能不同的列的最佳方法是什么？

有没有办法在仍然能够`*`在`SELECT`子句中使用的同时做到这一点，或者您是否必须列出所有列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T13:28:56.440

是的，`SELECT DISTINCT`是要走的路，不，根据定义，`*`它包括来自该特定表或连接表的所有列，这些列也将包括不同的列，并且记录将不再是不同的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T13:34:02.407

DISTINCT 关键字可用于仅返回不同（不同）的值。它验证整个结果集，因此如果您不需要可能不同的列，请将其排除在外，为此您必须在结果集中列出您想要的所有列，没有：

```
select *, exclude (column_name) from table 
```

# android - Onclick复选框，更新特定项目的数据库 - android

> ID：14041188
> 
> 赞同：0
> 
> 时间：2012-12-26T13:20:38.303
> 
> 标签：android, listview, checkbox

我想通过单击我的复选框来更新我的数据库

![在此处输入图像描述](../Images/b14e78469320f61ea3c9f3ea31908574.png)

但我不知道如何捕获项目编号。通过单击复选框来查看我的项目列表。

这是我的代码：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_bucket_item);

int value = getIntent().getExtras().getInt("bucketno");
DatabaseHandler myDbHelper = new DatabaseHandler(this);

BucketItem[] bucketItems = myDbHelper.getAllContacts(value);
BucketItemAdapter adapter = new BucketItemAdapter(this, R.layout.row_item, bucketItems);

listView2 = getListView();
View header = (View) getLayoutInflater().inflate(R.layout.row_header, null); 
listView2.addHeaderView(header);
listView2.setAdapter(adapter); 
```

}

activity_bucket_item.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">    

    <ListView
        android:id="@android:id/list"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" 
        android:layout_weight="1"
    />

</LinearLayout> 
```

row_item.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@color/lightgray"
    android:orientation="horizontal" >

    <CheckBox
        android:id="@+id/completed"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

    <TextView
        android:id="@+id/bucketNo"
        android:layout_width="29dp"
        android:layout_height="wrap_content"
        android:layout_marginLeft="5dp" />

    <TextView
        android:id="@+id/bucketItemName"
        android:layout_width="match_parent"
        android:layout_height="50dp"
        android:layout_marginLeft="0dp"
        android:layout_marginRight="10dp"
        android:layout_weight="0.97" />

    <TextView
        android:id="@+id/bucketItemNo"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:visibility="gone" />

</LinearLayout> 
```

如何单击复选框，然后调用数据库的更新方法？任何的想法？

笔记：

我研究过我可以覆盖

```
onListItemClick(ListView listView, View v, int position,
            long id) 
```

方法，但我不能，因为我打算在用户单击项目列表时使用此方法，描述和图像会弹出。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T13:44:33.093

通过 setTag() 方法在适配器中创建视图时，您可以在复选框中添加一些行 ID。然后在处理检查状态更改时提取它。像这样的东西：

```
public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
    int id = (Integer)buttonView.getTag();
} 
```

# wpf - WPF Storyboard 无法控制此类的新实例，与 Silverlight 应用程序混淆

> ID：14041193
> 
> 赞同：2
> 
> 时间：2012-12-26T13:21:18.490
> 
> 标签：wpf, silverlight, xaml, storyboard, controls

我在控制 Storyboard 类的实例时遇到问题。

它在资源中的 XAML 中定义：

```
<Window.Resources>
    <Storyboard x:Name="Storyboard1" x:Key="Storyboard1"> 
```

我也试图让它停止，像这样：

```
 Storyboard sb = (Storyboard)this.TryFindResource("Storyboard1");
        sb.Seek(TimeSpan.Zero); 
```

但是，没有成功。如果我尝试在您的代码中调用实例 Storybord1，那么我会遇到错误，即当前上下文中没有这样的实例（而且，如果在 C# 代码中我尝试使用智能感知也没有成功，原因描述先前的问题）。

当我试图找到这个实例时：

```
 foreach (var item in this.Resources)
        {
            MessageBox.Show(item.ToString());
        } 
```

没有成功。

我没有做任何困难或使用超级封装的设计模式，我找不到/使用它。

只需添加一个 UI 元素和一个具有可变不透明度的 Storyboard。

我只想自己控制 Storyboard 的所有游戏。我什么时候可以停止并启动它。

在 Silverlight 中我没有遇到任何问题（因为 Storyboard1 可以在 Silverlight 中访问），但在 WPF 中，默认的所有故事板都是自动播放的，我无法控制它的实例。

我该如何解决？

谢谢！

PS如果这可以帮助您为我提出一条建议，请看：

[http://ideone.com/O0x93O](http://ideone.com/O0x93O) - C#

[http://ideone.com/Drc1SP](http://ideone.com/Drc1SP) - XAML

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T22:44:52.920

实际上我确实可以访问您的情节提要，您的消息框确实会弹出情节提要名称。我假设您希望您的控制按钮在您在后面的代码中启动它时淡入。我删除了您必须启动 Storyboard 的 Windows.Trigger，之后您的控件才正常显示，然后我将它们的不透明度设置为 0 并将 Storyboard Instance 设为类级别变量。

```
int count = 0;
Storyboard _sb;
public MainWindow()
{
    InitializeComponent();

    var sb = this.TryFindResource("Storyboard1");
     _sb = sb as Storyboard;
} 
```

然后使用您想要用来触发它的任何事件/条件（*在这种情况下，我使用了 Windows 加载事件*）

```
private void Window_Loaded(object sender, RoutedEventArgs e)
{
    _sb.Begin();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T21:18:36.480

那是因为您试图在 Window 构造函数中执行此操作。将您的代码移动到`Loaded`事件中。

# sql - 如何将日期转换为月份数？

> ID：14041200
> 
> 赞同：6
> 
> 时间：2012-12-26T13:22:02.890
> 
> 标签：sql, oracle, sqldatetime

我的表中有**一个月**列。月份名称和日期存储在此月份列中，如

```
Month    
01-JAN-12 
02-FEB-12 
```

等等。

如何**将****DATE**转换为月份数，例如

```
Month
1 
2 
```

等等

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-26T14:11:05.370

```
select 
to_char(to_date('01-JAN-12','dd-mon-yy'),'mm') from dual; 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-12-26T13:41:41.367

[提取物](http://docs.oracle.com/cd/B19306_01/server.102/b14200/functions050.htm)非常适合这个

> EXTRACT extracts and returns the value of a specified datetime field

```
with fullYear as(
  select (to_date('01-jan-12') + 29*level) dte
    from dual
  connect by level <= 12
  )

select extract(month from dte) month, dte from fullYear ; 
```

gives you

```
MONTH       DTE
1           January, 30 2012 00:00:00+0000
2           February, 28 2012 00:00:00+0000
3           March, 28 2012 00:00:00+0000
4           April, 26 2012 00:00:00+0000
5           May, 25 2012 00:00:00+0000
6           June, 23 2012 00:00:00+0000
7           July, 22 2012 00:00:00+0000
8           August, 20 2012 00:00:00+0000
9           September, 18 2012 00:00:00+0000
10          October, 17 2012 00:00:00+0000
11          November, 15 2012 00:00:00+0000
12          December, 14 2012 00:00:00+0000 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-26T13:26:05.520

使用 `TO_CHAR`中的函数`TO_CHAR(my_column, 'MM')`。

对于您的特定格式，您需要格式转换器`TO_CHAR(month, 'FmMM')`（感谢 Nicholas Krasnov 的这个技巧）。

如果您的`month`列还不是日期类型，您首先需要将其转换为日期：`TO_CHAR(TO_DATE(month, 'DD-Mon-IY'), 'FmMM')`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T20:07:37.933

Totally agree regarding writing a case when Oracle offers built-in functionality:

```
SELECT EXTRACT(MONTH FROM DATE '2012-03-15') FROM DUAL;

SELECT EXTRACT(MONTH FROM TO_DATE('01-JAN-12', 'DD-MON-RR')) month_to_number FROM DUAL;

select to_number(to_char(to_date('01-JAN-12','dd-mon-yy'),'mm')) month_to_number from     dual;

select to_number(to_char(trunc(sysdate), 'mm')) month_to_number from dual; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-06-19T04:48:13.427

datepart function do this easily

```
SELECT DATEPART(m, getdate()) 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-12-26T13:30:43.313

您也可以使用“DatePart”功能：

[http://docs.oracle.com/cd/E10530_01/doc/epm.931/html_esb_techref/maxl/dml/funcs/datepart.htm](http://docs.oracle.com/cd/E10530_01/doc/epm.931/html_esb_techref/maxl/dml/funcs/datepart.htm)

* * *

## 回答 #7

> 赞同：-7
> 
> 时间：2012-12-26T13:27:50.953

```
 SELECT  ( CASE yourDate
        WHEN 'Jan' THEN 1
        WHEN 'Feb' THEN 2
        WHEN 'Mar' THEN 3
        WHEN 'Apr' THEN 4
        WHEN 'May' THEN 5
        WHEN 'Jun' THEN 6
        WHEN 'Jul' THEN 7
        WHEN 'Aug' THEN 8
        WHEN 'Sep' THEN 9
        WHEN 'Oct' THEN 10
        WHEN 'Nov' THEN 11
        WHEN 'Dec' THEN 12
       END ) 
```

# php - phpactiverecord：按条件获取对象

> ID：14041202
> 
> 赞同：0
> 
> 时间：2012-12-26T13:22:15.750
> 
> 标签：php, database, activerecord, phpactiverecord

我正在使用[ActiveRecord](http://www.phpactiverecord.org/)，而数据库已经存在。我需要获取与 account_type = 'A' 的人相关的所有帐户，所以我有：

```
class Person extends ActiveRecord\Model {

static $has_many = array(
    array(
        'accounts',
        'conditions' => array('account_type = ?' => array('A')),
        'class_name' => 'Accounts',
        'foreign_key' => 'idpersona'
    )
); 
```

但我得到了错误`No bound parameter for index 3`。我试图删除该行`'conditions' => array('account_type = ?' => array('A'))`并且该应用程序运行良好。我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T14:43:44.797

“语法”不同，条件应该是一个数组 `array('account_type = ?', 'A')`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T13:37:10.510

以下应该工作。注意 array('A') 更改为简单的 'A'。

```
class Person extends ActiveRecord\Model {

static $has_many = array(
    array(
        'accounts',
        'conditions' => array('account_type = ?' => 'A'),
        'class_name' => 'Accounts',
        'foreign_key' => 'idpersona'
    )
); 
```

如果您的查询需要一系列输入或者您有多个要替换的标记，则只需要数组中的值。

在此处查看示例：[http ://www.phpactiverecord.org/projects/main/wiki/Finders#conditions](http://www.phpactiverecord.org/projects/main/wiki/Finders#conditions)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T15:09:07.660

我自己的解决方案：

```
class Person extends ActiveRecord\Model {

static $has_many = array(
    array(
        'accounts',
        'conditions' => "account_type = 'A'",
        'class_name' => 'Accounts',
        'foreign_key' => 'idpersona'
    )
); 
```

# pdf - drupal打印模块pdf在内容后添加“document.write（）”

> ID：14041203
> 
> 赞同：0
> 
> 时间：2012-12-26T13:22:36.633
> 
> 标签：pdf, printing, module, drupal-7

我正在使用**drupal** (7)[打印](http://drupal.org/project/print)模块从页面生成**pdf ，**

所有内容均已成功生成，但

```
document.write("") 
```

之后添加，

关于如何解决这个**错误的任何想法**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T10:24:51.120

By making a simple search in my workspace I found that it was coming from the template of the print module (print.tpl.php)!

I was searching in the wrong place :(

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T10:30:41.043

我制作了一个包含表格结果列表的视图，

我想生成该页面视图的pdf，

存在 pdf 版本的链接（使用打印模块生成），

当我点击时，我得到包含所有页面内容的页面视图的 pdf 版本

但它 `document.write("")`在最后添加

这是 pdf gererated 的屏幕截图：

[截屏](https://www.facebook.com/photo.php?fbid=10200176186946328&set=a.10200176186706322.2199659.1201146688&type=3&src=https://fbcdn-sphotos-f-a.akamaihd.net/hphotos-ak-ash4/429108_10200176186946328_925952037_n.jpg&size=960,295)

# ruby-on-rails - XMPP4r - 无法检索离线消息

> ID：14041204
> 
> 赞同：8
> 
> 时间：2012-12-26T13:22:41.133
> 
> 标签：ruby-on-rails, ruby, xmpp, openfire, xmpp4r

我正在尝试使用带有 openfire 服务器的 ruby​​ xmpp4r 库获取 openfire 多用户群聊历史记录。我能够构建请求，但我没有得到服务器回复。以下是发现请求

```
iqr = Iq.new(:get,"example.com")
iqr.add_namespace("http://jabber.org/protocol/disco#info")
client.send(iqr) 
```

这是框架的请求

```
<iq to='example.com' type='get' xmlns='http://jabber.org/protocol/disco#info'/> 
```

但我没有收到服务器回复。我关注了 XEP-0160 和 XEP-0013。

我在这里想念什么？

* * *

**openfire 是否提供房间聊天记录？有没有一个API？**

**任何帮助都深表感谢。而且我不太了解openfire，因此非常感谢有关它的任何信息。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T17:55:14.967

据我所知，只有当该房间被配置为**持久化**并设置为**记录**转换时，您才能从房间中检索聊天历史记录。服务器返回历史记录的天数也有限制。过去的限制是 2 天，但已经进行[了长期的讨论，并且有一些补丁](http://community.igniterealtime.org/message/225126#225126)可以解决这个限制。

根据此处关于 SO 的[另一个问题](https://stackoverflow.com/questions/6635034/read-chat-histroy-from-openfire-server-with-smack)，如果不首先通过单独的 XMMP 服务器代理历史记录，则无法通过直接 HTTP 请求检索历史记录，这是您尝试做的事情，还是您正在与 Openfire 服务器交谈？

最后，看起来你想要的东西是可能的。[根据 XMPP 规范。](http://xmpp.org/extensions/xep-0045.html#enter-history)任何新用户在加入时都会收到房间的完整历史记录，前提是房间被配置为发送它。因此，只需以随机创建的用户身份加入正确配置的房间，即可获得您正在寻找的历史记录。

因此，取决于这是针对您运行的服务还是您尝试归档其他人的服务器，您的里程可能会保持警惕。如果您设置服务器，它看起来是可能的，即使不是通过特定的 API 调用。如果服务不受您的控制，那么您可能会不走运，因为历史可能根本不存在......

即使我无法给出具体的解决方案，也希望对您有所帮助。

## 服务发现

根据[服务发现的文档，](http://xmpp.org/extensions/xep-0030.html#info-basic)您的请求不完整：

```
<iq type='get'
    from='romeo@montague.net/orchard'
    to='plays.shakespeare.lit'
    id='info1'>
  <query xmlns='http://jabber.org/protocol/disco#info'/>
</iq> 
```

也许您应该[阅读一下](https://github.com/ln/xmpp4r/tree/master/data/doc/xmpp4r/examples)如何使用 gem 与 XMPP 服务建立基本连接？[这看起来是您需要](https://github.com/ln/xmpp4r/blob/master/data/doc/xmpp4r/examples/basic/mucinfo.rb)开始的。他们有很多例子可以帮助你了解宝石的细节......

# android - 如果应用程序在android中被强制关闭，如何重置警报

> ID：14041208
> 
> 赞同：11
> 
> 时间：2012-12-26T13:23:12.107
> 
> 标签：android, alarmmanager

我的应用程序使用 AlarmManager 设置的警报在以下情况下被清除

1.  用户强制在设置中关闭我的应用程序。
2.  一些任务杀手应用程序自动杀死了我的应用程序进程。
3.  由于前端应用程序需要内存，Android 本身杀死了我的应用程序。

请告诉我如何检测它？而是如何设置我的闹钟，以便所有这些情况都不会影响我的闹钟。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-12-26T13:43:41.823

> 用户强制在设置中关闭我的应用程序。

是的，这可以清除警报。

> 一些任务杀手应用程序自动杀死了我的应用程序进程。

这不会清除任何最新版本的 Android 上的警报。

> 由于前端应用程序需要内存，Android 本身杀死了我的应用程序。

这不会清除警报。

> 请告诉我如何检测它？

记录您的警报上次发生的时间（例如，在`SharedPreferences`）。当您的代码运行时（例如，`LAUNCHER`活动开始），检查最后警报时间。如果是很久以前，您知道您的警报已清除，因此您需要重新安排它们。

> 而是如何设置我的闹钟，以便所有这些情况都不会影响我的闹钟。

这是不可能的。实际清除警报的情况很少（重新启动和强制停止），在这些情况下您无法阻止警报被清除。

# nosql - 如何在 Windows 7 上配置 nosql db voldemort

> ID：14041209
> 
> 赞同：1
> 
> 时间：2012-12-26T13:23:12.240
> 
> 标签：nosql, voldemort

我是伏地魔数据库的新用户。

我指的是[http://www.project-voldemort.com/voldemort/quickstart.html](http://www.project-voldemort.com/voldemort/quickstart.html) 我按照第一步，下载了存档并将其解压缩到“D:\Voldemort\”。

在第二步中，当我转到命令提示符并键入命令时

```
D:\Voldemort\voldemort-0.96>bin/voldemort-server.sh config/single_node_cluster 
```

我收到以下错误。

> 'bin' 不是内部或外部命令、可运行程序或批处理文件。

有没有办法解决这个问题？

网上有没有分步指南？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-24T09:05:47.480

你可以参考这个博客：http: [//blog.netoearth.com/html/201107/how-to-install-voldemort-on-windows.htm](http://blog.netoearth.com/html/201107/how-to-install-voldemort-on-windows.htm)

这是蝙蝠文件：[https ://gist.github.com/erikhoward/344463](https://gist.github.com/erikhoward/344463)

voldemort-shell.bat：</p>

```
@echo off

REM
REM   Copyright 2008-2009 LinkedIn, Inc
REM   Copyright 2010 Erik Howard http://www.gonosql.com http://erikhoward.net
REM
REM  Licensed under the Apache License, Version 2.0 (the "License");
REM   you may not use this file except in compliance with the License.
REM   You may obtain a copy of the License at
REM
REM      http://www.apache.org/licenses/LICENSE-2.0
REM
REM  Unless required by applicable law or agreed to in writing, software
REM  distributed under the License is distributed on an "AS IS" BASIS,
REM  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
REM  See the License for the specific language governing permissions and
REM  limitations under the License.
REM

set Count=0
for %%a in (%*) do set /a Count+=1
if %Count% equ 2 goto :continue
echo USAGE: bin/voldemort-shell.bat store_name bootstrap_url [command_file]
goto :eof
:continue

setlocal
SET BASE_DIR=%~dp0..

%BASE_DIR%\bin\run-class.bat jline.ConsoleRunner voldemort.VoldemortClientShell %*

endlocal

:eof 
```

[https://gist.github.com/erikhoward/344450](https://gist.github.com/erikhoward/344450)

运行类.bat：

@echo 关闭

REM REM 版权所有 2008-2009 LinkedIn, Inc REM 版权所有 2010 Erik Howard [http://www.gonosql.com](http://www.gonosql.com) [http://erikhoward.net](http://erikhoward.net) REM REM 根据 Apache 许可证 2.0 版（“许可证”）获得许可；REM 除非遵守许可，否则您不得使用此文件。[REM 您可以在 REM REM http://www.apache.org/licenses/LICENSE-2.0](http://www.apache.org/licenses/LICENSE-2.0) REM REM获得许可证的副本除非适用法律要求或书面同意，否则根据许可证分发的软件 REM 分发于“按原样”基础，REM 不提供任何明示或暗示的保证或条件。REM 请参阅许可证以了解许可证下的特定语言管理权限和 REM 限制。快速眼动

set Count=0 for %%a in (%*) do set /a Count+=1 if %Count% gtr 1 goto :continue echo %0 java-class-name [options] goto :eof :continue

```
SET BASE_DIR=%~dp0..
SET CLASSPATH=.

for %%j in (%BASE_DIR%\dist\*.jar) do (call :append_classpath "%%j")
for %%j in (%BASE_DIR%\lib\*.jar) do (call :append_classpath "%%j")
goto :run

:append_classpath
set CLASSPATH=%CLASSPATH%;%1
goto :eof

:run
REM You might have to adjust the max allowable memory setting to fit your environment
if "%VOLD_OPTS%" == "" set "VOLD_OPTS=-Xmx256M -server -Dcom.sun.management.jmxremote"
java -Dlog4j.configuration=src/java/log4j.properties %VOLD_OPTS% -cp %CLASSPATH% %*

endlocal
:eof@echo off

REM
REM   Copyright 2008-2009 LinkedIn, Inc
REM   Copyright 2010 Erik Howard http://www.gonosql.com http://erikhoward.net
REM
REM  Licensed under the Apache License, Version 2.0 (the "License");
REM   you may not use this file except in compliance with the License.
REM   You may obtain a copy of the License at
REM
REM      http://www.apache.org/licenses/LICENSE-2.0
REM
REM  Unless required by applicable law or agreed to in writing, software
REM  distributed under the License is distributed on an "AS IS" BASIS,
REM  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
REM  See the License for the specific language governing permissions and
REM  limitations under the License.
REM

set Count=0
for %%a in (%*) do set /a Count+=1
if %Count% gtr 1 goto :continue
echo %0 java-class-name [options]
goto :eof
:continue

SET BASE_DIR=%~dp0..
SET CLASSPATH=.

for %%j in (%BASE_DIR%\dist\*.jar) do (call :append_classpath "%%j")
for %%j in (%BASE_DIR%\lib\*.jar) do (call :append_classpath "%%j")
goto :run

:append_classpath
set CLASSPATH=%CLASSPATH%;%1
goto :eof

:run
REM You might have to adjust the max allowable memory setting to fit your environment
if "%VOLD_OPTS%" == "" set "VOLD_OPTS=-Xmx256M -server -Dcom.sun.management.jmxremote"
java -Dlog4j.configuration=src/java/log4j.properties %VOLD_OPTS% -cp %CLASSPATH% %*

endlocal
:eof 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T13:10:09.840

bin/voldemort-server.sh 是 linux 操作系统中的一个 shell 文件。只能在 Linux 中执行。错误是，我试图在 Windows 命令提示符下运行 shell 脚本。

链接[http://www.project-voldemort.com/voldemort/quickstart.html](http://www.project-voldemort.com/voldemort/quickstart.html)给出了在 Linux 中运行 Voldemort nosql db 的步骤。

如果你想在 Windows 上运行 voldemort。你必须将所有 shell 脚本（.sh 文件）转换为批处理文件（.bat）

# android - 特定地点的谷歌地图经度和纬度

> ID：14041214
> 
> 赞同：-1
> 
> 时间：2012-12-26T13:23:49.470
> 
> 标签：android, google-maps, gps, latitude-longitude

我有一部支持 Android GPS 的手机。
它给了我，我在地图上的当前位置位置，包括纬度、经度。

现在，当我在 Google 地图上显示地点时，我想要类似的东西。
我怎样才能找到经度和纬度的地方。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T13:49:48.667

**反向地理编码是将纬度经度坐标转换为人类可读地址的过程。**

Geocoder api 可以做到这一点，在 andriod 项目中可能有这样的示例。

[http://developer.android.com/training/basics/location/geocoding.html](http://developer.android.com/training/basics/location/geocoding.html)

# mongodb - MongoDB 日志记录选项

> ID：14041221
> 
> 赞同：-1
> 
> 时间：2012-12-26T13:24:23.840
> 
> 标签：mongodb, for-loop

我们有日志系统，其中JMS服务器用于发送日志消息。一旦消息到达队列，队列接收器解析消息并插入到Oracle DB中。客户端进程生成的消息很大而且很多次，查询数据库需要很长时间。根原因是与消息生成相比，数据库插入非常慢（消息生成量非常大——平均每天 130 万条消息）。我想检查 MongoDB 是否适合这个系统而不是 Oracle。日志记录/异常模式非常简单，每个有 10/15 列。对于每条日志记录消息，我们附加事务数据（平均大小 50 到 100KB）如果存储和搜索（以及稍后清除）是仅涉及日志记录和例外，MongoDB 是更好的选择吗？（我也在这里读到使用 JMS 进行日志记录不是一个好的设计。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T16:48:45.507

如果您的数据每天都在增长，那么您当然可以考虑使用 MongoDB。

**有两个主要原因。**

根据您的要求，您并不太担心数据，因为它只是一条日志消息，即使您丢失了几条消息，也可能不是那么重要。关键是，如果您尝试跨文档进行事务，则默认情况下不会在 MongoDB 中发生。如果您没有任何此类事务，那么您最好使用 MongoDB，并且不会丢失任何消息。但请记住，MongoDB 操作本质上是文档中的原子操作。

由于它是一个日志记录，您可能希望添加一些非常适合 MongoDB 的列，因为它们完全是无模式的，并且您应该能够在需要时添加新元素而无需修补旧数据（不一定）。

随着数据的增长，您可以添加尽可能多的 Shard 服务器，并且您应该能够跨节点扩展（以水平方式）。

祝你好运！

# php - 使用谷歌地图、PHP 和 MySQL 从 A 点到 B 点的距离

> ID：14041227
> 
> 赞同：2
> 
> 时间：2012-12-26T13:25:09.493
> 
> 标签：php, google-maps-api-3, distance

任何人都可以请帮忙。我只需要一个简单的脚本。我有一个表格发布到另一个页面。两个表单域是：

fromaddress 和 toaddress

我唯一需要的是一个脚本，它向我显示以公里为单位的距离以及使用谷歌地图所需的时间。我找到了几十个脚本，但我无法让它工作。该地图已经与此代码一起存在，似乎可以完美运行。

```
<script type="text/javascript" src="//maps.googleapis.com/maps/api/js?key=AIzaSyDdDwV6_l5n2bS3gM6NBCla3RFLtIFc_HE&sensor=false"></script><script type="text/javascript">
    var directionDisplay;
    var directionsService = new google.maps.DirectionsService();
    var map;

    function initialize() {
        directionsDisplay = new google.maps.DirectionsRenderer();
        var myOptions = {
            zoom: 8,
            mapTypeId: google.maps.MapTypeId.ROADMAP,
        }
        map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
        directionsDisplay.setMap(map);

        var start = "<? echo $_POST[fromaddress]; ?>";
        var end = "<? echo $_POST[toaddress]; ?>";
        var request = {
            origin:start, 
            destination:end,
            travelMode: google.maps.DirectionsTravelMode.DRIVING
        };
        directionsService.route(request, function(response, status) {
            if (status == google.maps.DirectionsStatus.OK) {
                directionsDisplay.setDirections(response);
            }
        });

    }

    $(document).ready(function(){
        initialize();
    });        
</script> 
```

但是我如何显示距离和时间。最好的选择是把它放在一个 php 值中，比如：

```
$distance = some-code;
$time = some-code-too; 
```

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-26T13:52:37.263

您需要为此使用不同的 API。首先，不要使用 JS 而是使用 PHP，这里的代码片段应该适合你；）

```
$from = "Więckowskiego 72, Łódź";
$to = "Gazowa 1, Łódź";

$from = urlencode($from);
$to = urlencode($to);

$data = file_get_contents("http://maps.googleapis.com/maps/api/distancematrix/json?origins=$from&destinations=$to&language=en-EN&sensor=false");
$data = json_decode($data);

$time = 0;
$distance = 0;

foreach($data->rows[0]->elements as $road) {
    $time += $road->duration->value;
    $distance += $road->distance->value;
}

echo "To: ".$data->destination_addresses[0];
echo "<br/>";
echo "From: ".$data->origin_addresses[0];
echo "<br/>";
echo "Time: ".$time." seconds";
echo "<br/>";
echo "Distance: ".$distance." meters"; 
```

输出：

```
To: Gazowa 1, 91-076 Łódź, Poland
From: Więckowskiego 72, Łódź, Poland
Time: 206 seconds
Distance: 1488 meters 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T14:06:57.350

您可以通过将所有航段相加来计算完整的路线持续时间和距离：

```
 function computeTotals(result) {
  var totalDist = 0;
  var totalTime = 0;
  var myroute = result.routes[0];
  for (i = 0; i < myroute.legs.length; i++) {
    totalDist += myroute.legs[i].distance.value;
    totalTime += myroute.legs[i].duration.value;
  }
  totalDist = totalDist / 1000.
  document.getElementById("total").innerHTML = "total distance="+totalDist.toFixed(2) + " km ("+(totalDist*0.621371).toFixed(2)+" miles), time="+totalTime+" seconds";
  } 
```

像这样称呼它：

```
 directionsService.route(request, function(response, status) {
        if (status == google.maps.DirectionsStatus.OK) {
            directionsDisplay.setDirections(response);
            computeTotals(response);
        }
    }); 
```

[工作示例](http://www.geocodezip.com/v3_directions_totalDistDuration.html)

# ios6 - 无法在 iOS 6.1 上安装应用程序

> ID：14041232
> 
> 赞同：7
> 
> 时间：2012-12-26T13:25:39.767
> 
> 标签：ios6, xcode4.5

我在使用 iOS 6.1 的 iphone 上安装 ios 应用程序时遇到问题。所有配置文件和证书都可以正常工作。应用程序在早期版本的 iOS 上成功安装，即。6.0.1、5,4。
我正在使用 testflight 在 iPhone 上下载和安装应用程序。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T13:57:53.500

我也遇到了同样的问题，但我设法从 xcode 4.5 安装了 .ipa，所以如果你小于那个，那么请更新你的 xcode 版本。

# android - 如何检测手机是否有活动数据计划？

> ID：14041235
> 
> 赞同：-4
> 
> 时间：2012-12-26T13:25:58.820
> 
> 标签：android, 3g

是否可以找到手机是否有活动数据计划，即应用程序如何检测它是否可以使用 3G 与后端服务器通信。请指出我的示例代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T13:30:03.720

不，我不认为这是可行的。

**编辑**您能做的最大的事情就是查找 Internet 是否可用。数据计划由网络提供商提供，因此取决于他们。如果他们提供某种 APIS（尽管他们不会），那么您当然可以。

# iphone - 通过将图像分成小块将大图像上传到服务器

> ID：14041238
> 
> 赞同：0
> 
> 时间：2012-12-26T13:26:30.070
> 
> 标签：iphone, ios, xcode, chunks

我想在服务器上上传我的大图。
是否可以将它们分块转换并上传到服务器上？

这是我上传图片的代码我如何在块中发送图片？

```
NSDateFormatter* df = [[NSDateFormatter alloc]init];
    [df setDateFormat:@"MM/dd/yyyy"];
    NSString *result = [df stringFromDate:assetDate];

    NSTimeInterval timeInterval = [assetDate timeIntervalSince1970];
    ALAssetRepresentation *rep = [temp defaultRepresentation];
    CGImageRef iref = [rep fullResolutionImage];
    StrPath = [StrPath stringByAppendingFormat:@"%d.%@",(int)timeInterval,strImageType];
    //UIImage *image = [UIImage imageWithCGImage:[rep fullResolutionImage]];

    UIImage *image =[UIImage imageWithCGImage:iref scale:[rep scale] orientation:(UIImageOrientation)[rep orientation]];
    //------------------ metadata -------------------------------------------------------
    NSDictionary *imageMetadata = [rep metadata];
    NSString *strOrt=[NSString stringWithFormat:@"%@",[imageMetadata valueForKey:@"Orientation"]];

    NSData *dataObj = nil;
    dataObj = UIImageJPEGRepresentation(image, 1.0);
    NSString* StrFileData = [Base64 encode:dataObj];
    NSString* strFileHash = [dataObj md5Test];

    NSMutableDictionary *DictRequest = [[NSMutableDictionary alloc]init];
    [DictRequest setObject:srtprefSessionId forKey:@"SessionId"];
    [DictRequest setObject:StrPath forKey:@"Path"];
    [DictRequest setValue:[NSNumber numberWithBool:isTrash] forKey:@"UploadDirectlyToTrashbin"];
    [DictRequest setObject:StrFileData forKey:@"FileData"];
    [DictRequest setObject:strFileHash forKey:@"FileHash"];
    [DictRequest setObject:result forKey:@"DateCreated"];

    BOOL isNULL = [self stringIsEmpty:strOrt];
    if(!isNULL)
    {
        //[DictRequest setObject:strOrt forKey:@"Orientation"];
    }

    NSString *jsonString = [DictRequest JSONRepresentation];
    NSString *strUrl=[NSString stringWithFormat:@"%@",FileUpload_URL];
    NSURL *url1=[NSURL URLWithString:strUrl];
    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url1];
    [request setTimeoutInterval:60.0];
    [request setHTTPMethod:@"POST"];
    NSData *postData = [jsonString dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES];
    NSString *postLength = [NSString stringWithFormat:@"%d",[postData length]];
    [request setHTTPBody:postData];
    [request setValue:postLength forHTTPHeaderField:@"Content-Length"];
    [request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];

    if(theConnection)
        [self Set2Defaults];

    theConnection = [[NSURLConnection alloc]initWithRequest:request delegate:self];

    [SVProgressHUD dismiss];

    if(theConnection)
        webData = [NSMutableData data];
    else
        NSLog(@"Connection Failed !!!"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T13:53:04.570

将您的图像转换为 utf8 字符串将该字符串分块发送并连接并在服务器端转换为图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T13:39:42.027

当您向服务器发送数据时，可能会丢失数据包。丢包的原因可能是抖动、带宽低、信道拥挤。尝试减小图像大小并将其作为整体发送，以便您可以在流通道中使用其原始编码数据字节检索它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T14:00:15.937

使用转换将您的图像转换为数据，并将其异步发送到服务器上。

# actionscript-3 - Actionscript 绘图仪通讯

> ID：14041239
> 
> 赞同：0
> 
> 时间：2012-12-26T13:26:35.867
> 
> 标签：actionscript-3, air

我们有一个应用程序，我们希望使用 Adob​​e AIR 应用程序与绘图仪硬件进行通信，该硬件当前用于根据给定的输入切割服装材料。目前用于相同的软件称为力克，它是绘图仪公司的软件。这个SW也用于设计目的。

现在我们想根据自己的需要创建自己的软件，并想知道如何与 Plotter 通信以使用我们的软件切割材料。

是否有人将 Actionscript 与诸如切割机/打印机之类的绘图仪一起使用？是否有任何其他实用程序可以通过空中应用程序使用并与绘图仪通信？

任何指向正确方向的指针都值得赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T13:42:10.377

在 Windows 环境中

您可以使用**c/c++**或**Visual c++**并制作一个可执行文件，该文件具有与您的硬件通信等所有功能，向它提供输入，从它获取响应等。制作这个 .exe 文件后，您可以使用套接字连接直接与这个 .exe 文件进行通信。

[在其文档](http://www.adobe.com/devnet/air/flex/articles/creating_socket_server.html)和[其他教程中提供](http://blog.aboutme.be/2011/06/07/handling-websocket-connections-with-adobe-air-serversocket/)了与空气进行套接字通信的详细描述

这可能会帮助你...

# iphone - MS-SQL SmallDateTime 到 NSDate 问题

> ID：14041242
> 
> 赞同：1
> 
> 时间：2012-12-26T13:26:50.407
> 
> 标签：iphone, xcode, json, wcf, ios6

目前正在使用的应用程序是 iPhone 应用程序，后端位于 .Net 中。iPhone 应用程序使用 WCF RestFul API。服务器使用的数据库是 MS SQL 和objective-c（xcode4.5，iOS6）中的客户端。我在服务器端以 smallDateTime 的形式存储日期。在以 JSON 格式获取此日期后，我使用下面提到的代码将其转换为 NSDate。以下是我从服务器接收的示例日期字符串 (serverDate=/Date(1356527635798+0500)/)。

以下是用于转换的 iPhone 端代码。

```
+ (NSDate *)convertServerDateToNSDate:(NSString *)serverDate
{
    serverDate = [serverDate stringByReplacingOccurrencesOfString:@"\"" withString:@""];
    serverDate = [serverDate stringByReplacingOccurrencesOfString:@"\\" withString:@""];
    if(serverDate == nil)
    return nil;

    NSDate * nsDate;

    NSCharacterSet * tempSet1 = [NSCharacterSet characterSetWithCharactersInString:@"("];

    serverDate = [serverDate stringByReplacingOccurrencesOfString:@"-" withString:@"+"];

    NSCharacterSet * tempSet2 = [NSCharacterSet characterSetWithCharactersInString:@"+"];

    NSRange startRange = [serverDate rangeOfCharacterFromSet:tempSet1];
    NSRange endRange = [serverDate rangeOfCharacterFromSet:tempSet2];
    NSRange actualRange;
    actualRange.location = startRange.location + 1;
    actualRange.length = endRange.location - actualRange.location;

    NSString * tempString = [serverDate substringWithRange:actualRange];
    double timeInSecs = [tempString doubleValue]/1000;

    nsDate = [NSDate dateWithTimeIntervalSince1970:timeInSecs];
    return nsDate;
} 
```

日期转换在 iOS-Simulator 6.0 上是完美的，但在我的 ipod 上转换的日期少了一天。我试图搜索它并自己做，但每次我比实际日期少 1 天。

1）有什么问题？

2）我该如何解决？

3) 我确保模拟器和 iPod 上的语言环境相同。

对此的任何帮助将不胜感激。

# iphone - 具有多个视图的 UIScrollView（具有按钮、滚动视图和标签）

> ID：14041243
> 
> 赞同：0
> 
> 时间：2012-12-26T13:26:52.473
> 
> 标签：iphone, objective-c, ios

在我的应用程序中，我使用具有多个视图的 UIScrollView（每个视图都有按钮、滚动视图和标签）。通过使用 for 循环，我将该视图加载到 UIScrollView 中。但是当我试图在 UIScrollView 内的视图中获取触摸操作时，只有最后一个视图能够访问。我们如何才能触摸访问 UIScrollView 中的所有视图？

任何帮助或建议这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T13:51:23.663

只需将标签值分配给您的 all yourView 然后访问您的视图

```
UIView *yourView = (UIView*)[ScrollView viewWithTag:tag]; 
```

或者

```
NSArray *yourView =(NSArray*)[ScrollView subviews];

NSLog(@"Your subView %@",[yourView objectAtIndex:index]); 
```

# android - Android 上 libgdx 项目中的蓝牙

> ID：14041251
> 
> 赞同：3
> 
> 时间：2012-12-26T13:27:33.583
> 
> 标签：android, bluetooth, libgdx

谁能给我一些关于`libgdx`在安卓游戏中使用蓝牙的建议？我的问题是整个代码都在 MyGame 项目中`MyGame-Android`，并且只有`MainActivity`在 Android 上启动游戏的类。

我可以让蓝牙在普通的 Android 应用程序中工作，但`MyGame libgdx`项目看不到`MyGame-Android project`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T19:18:59.223

如果你想在 libgdx 中使用非多平台代码，你应该在不可知项目（MyGame）上创建一个接口，并在本机项目（MyGame-Android）上实现它。然后，在本机项目上创建实现器对象并将其传递给 MyGame 实例。该界面将包含您所说的所有无法访问的方法（提示：尝试尽可能地封装有关蓝牙管理的内容，并仅公开与您的游戏相关的方法，因此您不必创建巨大的界面） .

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-10T01:26:12.730

以防其他人在创建支持蓝牙的应用程序的过程中在这里找到方法。我认为最好的起点是 Android 开发人员指南，以便自己牢牢掌握和理解蓝牙 - 使用他们那里的内容创建一个工作应用程序 [http://developer.android.com/guide/topics/connectivity/bluetooth .html](http://developer.android.com/guide/topics/connectivity/bluetooth.html)

之后，使用上面的方法，就可以实现代码了。一个工作示例是[http://algorhymes.wordpress.com/2013/02/07/java-bluetooth-on-android-with-and-wo-libgdx/](http://algorhymes.wordpress.com/2013/02/07/java-bluetooth-on-android-with-and-wo-libgdx/)但我建议先了解蓝牙，它使调试更容易.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-09-09T13:49:21.630

非常老的问题，但我需要同样的问题，所以我正在分享。

我在 libgdx 上创建和应用，并添加一个实现来管理 android 和 ios 中的蓝牙低功耗连接。（两者都使用踏频传感器）

如果需要，所有代码都在 github 上

[https://github.com/carlgira/ble-cadence-app](https://github.com/carlgira/ble-cadence-app)

我不确定 IOS 部分是如何工作的，但基本上我将一个 Swift 蓝牙 APP 翻译成 robovm java api。名称和内容有一些差异，但几乎相同。

# ios - ActionSheet 抛出无法识别的选择器发送到实例

> ID：14041256
> 
> 赞同：0
> 
> 时间：2012-12-26T13:27:46.507
> 
> 标签：ios, uiactionsheet

我正在使用[Action Sheet Picket](https://github.com/TimCinel/ActionSheetPicker)。我按照自述文件中的说明添加了 .h 和 .m 文件，选择器甚至`cancelAction`运行良好，但不知何故`successAction`抛出`NSInvalidArgumentException`了以下消息：“无法识别的选择器已发送到实例”。

应用程序是一种标签栏应用程序`Navigation Controller`。有一个`TabBarController`作为根，有一个`ViewController`位于下面`TabBarController`，其中一个 ViewController 是导航控制器。但我在导航控制器中没有收到此错误。我不确定这是否会导致任何错误。

这是我如何使用的：

```
- (IBAction)filterResult:(id)sender {
    [ActionSheetStringPicker showPickerWithTitle:@"Pick Filter" rows:self.filterList initialSelection: self.selectedIndexes target:self successAction:@selector(animalWasSelected:element:) cancelAction:nil origin: self];
}

- (void)animalWasSelected:(NSNumber *)selectedIndex element:(id)element {
    self.selectedIndexes = [selectedIndex intValue];
    NSLog(@"Selected");
} 
```

是的，仅此而已。我已经包含了`ActionSheetPicker.h`文件，正如我所说的选择器工作正常。

最后这里是错误：

```
[MYYViewController successAction:]: unrecognized selector sent to instance 0x9032400
2012-12-24 12:14:45.488 Example[54268:11303] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[MYYViewController successAction:]: unrecognized selector sent to instance 0x9032400' 
```

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T13:29:55.530

看起来相当直接，您需要`successAction:`在您的`MYYViewController`类中实现，因为选择器不会检查它是否会响应并直接调用它。

# vim - 从 vim 和 tmux 剪切和粘贴

> ID：14041263
> 
> 赞同：14
> 
> 时间：2012-12-26T13:28:13.090
> 
> 标签：vim, tmux

从 tmux 开始的 vim 会话中的剪切和粘贴是否完全损坏？

如果我想从 github 网站切入我的 vim 会话，反之亦然，它很少能工作，或者如果能，它就完全坏了。

我让其他人确认他们觉得这很困难。

我正在运行以下内容：

*   OS X 10.8.2
*   维姆 7.3
*   多路复用器 1.7

我指的是正常的剪切和粘贴命令`Cmd`+`c`和`Cmd`+ `v`。

是否有任何修复或解决方法？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-12-26T15:04:40.883

1.  在 Vim 中，您不使用`Cmd`+ `c`/ `Cmd`+`v`来“复制”和“粘贴”：您使用`y`/ `p`，可能使用寄存器 ( `"*y`/ `"ap`) 来“拉动”和“放置”。

2.  如果你的 Vim 有内置的剪贴板支持，`"*y`应该足以从 Vim 中拉出并且`"*p`应该足以从另一个应用程序中放入。`*`是“剪贴板”寄存器。

3.  同样，假设 Vim 支持剪贴板，添加`set clipboard^=unnamed`到您`~/.vimrc`应该同步 Vim 的默认寄存器和剪贴板寄存器；允许您简单地使用`y`˘and `p`。

4.  tmux/vim 组合在 Mac OS X 上的系统剪贴板中有一个长期存在的问题。幸运的是，它[非常快速且易于修复](https://github.com/ChrisJohnsen/tmux-MacOSX-pasteboard)。

要查看您的 Vim 版本是否支持剪贴板，请在 shell 中输入以下命令：

```
$ vim --version | grep clipboard 
```

功能之前的A`+`表示“支持”，`-`表示“不支持”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-26T20:48:42.427

只是为了增加一点帮助。

[获得带有剪贴板支持的 vim](http://vimcasts.org/blog/2013/11/getting-vim-with-clipboard-support/)可能会有所帮助

# c# - 选择语句的返回值

> ID：14041264
> 
> 赞同：5
> 
> 时间：2012-12-26T13:28:15.683
> 
> 标签：c#, .net, ms-access, select, oledb

我想将 select 语句的结果值检索到字符串变量中。像这样：

```
OleDbCommand cmd1 = new OleDbCommand();
cmd1.Connection = GetConnection();
cmd1.CommandText = "SELECT treatment FROM appointment WHERE patientid = " + text;
cmd1.ExecuteNonQuery(); 
```

我想将选定的治疗值放入字符串变量中。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-26T13:30:58.120

用[`ExecuteReader()`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executereader.aspx)而不用[`ExecuteNonQuery()`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executenonquery.aspx)。`ExecuteNonQuery()`仅返回受影响的行数。

```
try
{
    SqlDataReader dr = cmd1.ExecuteReader();
}
catch (SqlException oError)
{

}
while(dr.Read())
{
    string treatment = dr[0].ToString();
} 
```

或者更好的是，为它使用一个[`using`声明](https://msdn.microsoft.com/en-us/library/yh598w02.aspx)。

```
using(SqlDataReader dr = cmd1.ExecuteReader())
{
    while(dr.Read())
    {
        string treatment = dr[0].ToString();
    }
} 
```

但是，如果您`SqlCommand`只返回`1`列，则可以使用该[`ExecuteScalar()`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executescalar.aspx)方法。它返回第一行的第一列，如下所示： -

```
cmd.CommandText = "SELECT treatment FROM appointment WHERE patientid = " + text;
string str = Convert.ToString(cmd.ExecuteScalar()); 
```

您也可以将代码打开到[SQL Injection](http://en.wikipedia.org/wiki/SQL_injection)。始终使用参数化查询。Jeff 有一篇很酷的博客文章，名为[Give me parameterized SQL, or give me death](http://www.codinghorror.com/blog/2005/04/give-me-parameterized-sql-or-give-me-death.html)。请仔细阅读。另请阅读[DotNetPerl SqlParameter](http://www.dotnetperls.com/sqlparameter)文章。当您进行查询时，SQL 注入非常重要。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-26T13:36:13.473

[执行标量：从数据库](http://www.visualbuilder.com/aspnet/database/tutorial/execute-scalar%3a-getting-single-value-from-the-database/)方法获取单个值以从数据库中检索单个值（例如，聚合值）。

```
cmd1.Connection = GetConnection();
cmd1.CommandText = "SELECT treatment FROM appointment WHERE patientid = " + text;
if(cmd.ExecuteScalar()==null)
{
    var treatment = cmd.ExecuteScalar();
} 
```

其他方式：**[ExecuteReader()](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executereader.aspx)**

```
try
{
    cmd1.CommandText ="SELECT treatment FROM appointment WHERE patientid=@patientID";
    cmd1.Parameters.AddWithValue("@patientID", this.DropDownList1.SelectedValue);

    conn.Open();
    SqlDataReader dr = cmd1.ExecuteReader();
    while (dr.Read())
    {
        int PatientID = int.Parse(dr["treatment"]);
    }
    reader.Close();
    ((IDisposable)reader).Dispose();//always good idea to do proper cleanup
}
catch (Exception exc)
{
    Response.Write(exc.ToString());
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T13:31:49.197

答案：

```
String res = cmd1.ExecuteScalar(); 
```

备注：使用参数化查询防止sql注入

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T13:31:47.633

您只需要使用命令的 ExecuteScalar 方法 - 这将为您提供结果集第一行和第一列的值。

```
OleDbCommand cmd1 = new OleDbCommand();
cmd1.Connection = GetConnection();
cmd1.CommandText = "SELECT treatment FROM appointment WHERE patientid = " + text;
var result = cmd1.ExecuteScalar(); 
```

如果您的 SQL 语句返回多于一行/一列，那么您可以使用 ExecuteReader()。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-26T13:35:50.483

您需要使用 OleDbAdapter。

```
string connection = "your connection";
string query = "SELECT treatment FROM appointment WHERE patientid = " + text;
OleDbConnection conn = new OleDbConnection(connection);
OleDbDataAdapter adapter = new OleDbDataAdapter();
adapter.SelectCommand = new OleDbCommand(query, conn);
adapter.Fill(dataset); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-26T13:36:26.460

您的示例代码有很多问题。

1.  你有内联 sql，它以一种主要的方式为你打开了 sql 注入的大门。
2.  您正在使用 ExecuteNonQuery() 这意味着您没有得到任何数据。

    ```
     string sSQL = "SELECT treatment FROM appointment WHERE patientid = @patientId";
     OleDbCommand cmd1 = new OleDbCommand(sSQL, GetConnection()); // This may be slight different based on what `GetConnectionReturns`, just put the connection string in the second parameter.

        cmd1.Parameters.AddWithValue("@patientId", text);
        SqlDataReader reader = cmd1.ExecuteReader();
        string returnValue;
        while(reader.Read())
        {
           returnValue = reader[0].ToString();
        } 
    ```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-10-27T07:33:21.717

```
SqlConnection dbConnect = new SqlConnection("your SQL connection string");    
string name = " 'ProjectName' ";
string strPrj = "Select e.type, (e.surname +' '+ e.name) as fulln from dbo.tblEmployees e where id_prj = " + name;
        SqlCommand sqlcmd = new SqlCommand(strPrj, dbConnect);
        SqlDataAdapter sda = new SqlDataAdapter(strPrj, dbConnect);
        ds = new DataSet();
        sda.Fill(ds);
        dbConnect.Open();
        sqlcmd.ExecuteNonQuery();
        dbConnect.Close(); 
```

# asp.net-mvc - 无法使 WebAPI 应用程序在 Windows 2008 服务器上运行

> ID：14041268
> 
> 赞同：5
> 
> 时间：2012-12-26T13:28:45.697
> 
> 标签：asp.net-mvc, asp.net-web-api, windows-server-2008, publish

我是 Web API 应用程序的新手。我创建了我的第一个应用程序，它只有一个简单的控制器，只有一个返回列表的 Get() 方法。在我的电脑上它工作正常。即使在我发布解决方案并通过我的 IIS 7.5 访问它之后，结果也正常：我访问

```
http://localhost/Application/api/Controller 
```

我得到了我期望的答案。

所以我继续下一步：将它部署到另一台服务器，以便我办公室的其他人可以访问它。我们使用的服务器运行 Windows 2008 服务器。我所做的只是简单地复制由 Visual Studio 2012 中的发布命令生成的 Publish 文件夹，并将其粘贴到服务器计算机的 inetpub\wwwroot 文件夹中。然后，我访问了在服务器上运行的 IIS 7.5，并使用 .NET 4.0 应用程序池创建了一个新应用程序，使用 Publish 文件夹作为其物理路径（与我在 PC 中将其发布到 IIS 的步骤完全相同）。

问题：当我尝试访问服务器机器（运行 Windows 2008 服务器）中的应用程序时，我收到 404 错误。似乎它试图找到一个物理路径 Application\api\Controller，像我的机器一样在逻辑上解决它。

我确实尝试了我在网上找到的所有不同的解决方案：

*   我确实在 IIS 中的应用程序的映射配置下启用了 ExtensionlessUrl-Integrated-4.0 中的所有动词。
*   我确实添加了 WebApiConfig.Register(GlobalConfiguration.Configuration); 在我的全球 asax 中。

我注意到我的机器安装了 .NET Framework 4.5，而服务器机器只有 4.0 框架（客户端和扩展）。但即使在编译了针对 4.0 框架的应用程序后，我也会遇到同样的错误。

我的 bin 目录中唯一的 MVC .dll 是 System.Web.Mvc.dll ...我需要任何其他 DLL 吗？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-08-07T23:11:26.150

尝试这个：

```
<system.webServer>
    .....
    <modules runAllManagedModulesForAllRequests="true" />
    .....
</system.webServer> 
```

# php - 如何从 iPad 向 php 页面发送数据？

> ID：14041271
> 
> 赞同：-3
> 
> 时间：2012-12-26T13:29:02.237
> 
> 标签：php, objective-c, ipad

我想向我的 php 页面发送一些数据，php 页面位于不同的系统中，我想从我的 iPad 应用程序调用该页面....如何建立此连接以便我可以从我的应用程序调用 php 页面以及它的连接字符串是什么。请详细描述。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T13:37:46.137

如果你想使用原生 ios 应用程序，你应该使用 web-service。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T13:48:53.837

您可以尝试通过以下步骤来诊断问题：

1) 确保您的 iPad 和定位的系​​统连接到同一网络。

2）从定位系统获取IP地址**（例如IP：121.127.1.4）**

![在此处输入图像描述](../Images/fd074c3f5f3d4237703a8a5923ba6aa1.png)

3）并尝试以下代码：

```
NSURL *url = [NSURL URLWithString:@"http://121.127.1.4/webservices.php"];

NSData *postDatastr = [NSData dataWithBytes:[postStr UTF8String] length:[postStr length]];
NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init] ;
[request setURL:[NSURL URLWithString: SignUpConnection_server]];
[request setHTTPMethod:@"POST"];
[request setHTTPBody:postDatastr];
[request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];

// Create Connection.
NSURLConnection  *conn = [[NSURLConnection alloc] initWithRequest:request delegate:self];

if (conn) {
    resposeData = [[NSMutableData alloc] init];
}
else
{
    NSLog( @"Data could not be received from: %@", request.URL );
} 
```

# html - IE9 FF 和 chrome 中的不同 div 位置

> ID：14041274
> 
> 赞同：0
> 
> 时间：2012-12-26T13:29:41.380
> 
> 标签：html, css

我已经问过这个问题，但我没有得到具体的答案。所以我想问一个简化版的问题

我正在制作一个网站，并希望将 div 放置在特定的高度。我无法以 px 术语设置 margin-top，就好像浏览器窗口重新调整大小一样，div 保持在该 px。我已经在 % 中指定了这个。如果 margin-top 以 px 为单位，则在所有浏览器中都可以，但如果它以 % 为单位，则 IE9 IE10 和 FF 表现得很疯狂。

下面的代码非常简单，没有什么困难。我什至尝试过重置 css，但没有做对。任何人都可以花点时间帮助我。

我目前正在从硬盘而不是从互联网加载页面。

谢谢

```
> <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<html>
<head>
  <meta content="text/html; charset=ISO-8859-1" http-equiv="content-type">
  <title>Train of Thought</title>
  <style type="text/css">

div.content {
  height:200px;
  visibility:visible;
  border-style: none;
  display: block;
  position: fixed;
  text-align: center;
  z-index: 1;
  padding-top: 0px;
  border-top: 0px;
  padding-bottom: 0px;
  border-bottom: 0px;
  background-color: #00FFFF;
  font-family:Arial,sans-serif;
  overflow: auto;
  margin-left: 23%;
  margin-right:25%;
  font-size:150%;
  margin-top: 40%;
}
  </style>
</head>
<body>

<div class="content">This div is supposed to be same in all the browsers. but thisis different in them. IE9 and FF display it in lower bottom of the page while chrome displays in the middle.
<br>This div is supposed to be same in all the browsers. but thisis different in them. IE9 and FF display it in lower bottom of the page while chrome displays in the middle.
</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T13:40:17.120

如果你的意思是“表现得很疯狂”，当你改变浏览器大小时，div 不会动态调整它的位置，原因是你定位它的方式。

您已将位置设置为固定，这意味着您通过顶部、底部、左侧、右侧而不是边距来定义确切的位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T13:46:11.530

HTML：

```
<div class="wrapper">
<div class="content">This div is supposed to be same in all the browsers. but thisis different in them. IE9 and FF display it in lower bottom of the page while chrome displays in the middle.
<br>This div is supposed to be same in all the browsers. but thisis different in them. IE9 and FF display it in lower bottom of the page while chrome displays in the middle.
</div>
</div> 
```

CSS：

```
.wrapper {
position:relative;
top:0;
left:0;
width:1020px;
height:760px;
}
.content {
position:absolute;
top: /* you set it */
left: /* you set it */
/* other props */
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T13:55:05.927

正如我所指出的，该`margin-top`指令似乎是根据其父元素的宽度计算其百分比。但`top`指令并非如此。因此，只需更改：

```
margin-top: 40%; 
```

到：

```
top: 40%; 
```

我在 Firefox、Chrome 和 IE8 上试过这个，它们都工作得一样。

# google-app-engine - 请求工厂 GWT 编辑器更改未保留相关的 JDO 实体

> ID：14041275
> 
> 赞同：2
> 
> 时间：2012-12-26T13:29:43.190
> 
> 标签：google-app-engine, gwt, one-to-many, requestfactory, gwt-editors

我在 GWT 2.5 中使用（并且是新手）RequestFactory，在 AppEngine 数据存储区中使用具有一对多关系的 JDO 实体。我刚刚开始使用 GWT RequestFactoryEditorDriver 来显示/编辑我的对象。

Driver 可以很好地遍历我的对象，并正确显示它们。但是，当我尝试编辑“相关”对象上的值时，更改不会持久保存到数据存储区。

当我更改`b.name`我的 UI 并单击“保存”时，我注意到只调用了 A 的`persist()`调用。B 的 persist() 永远不会被调用。如何让 editorDriver 在 ARequest 和 BRequest 请求上下文中触发？（因为我想要的是`InstanceRequest<AProxy,Void> persist()`在我的编辑仅针对 B 对象时调用 B。）

此外，AFAICT，如果我在 BProxy 上有一个编辑器，则编辑器显示的任何对象 b（并遵循编辑器合同）都应由驱动程序自动“context.edit(b)”编辑以使其可变。但是，在我的情况下，“上下文”是一个 ARequest，而不是 BRequest。

我是否必须像这里提到的那样制作一个 ValueAwareEditor：[GWT Editor framework](https://stackoverflow.com/questions/10145124/gwt-editor-framework) 并在调用中创建一个新的 BRequest`flush()`并触发它，以便在触发 ARequest 之前对 B 的更改单独保留在 BRequest 中？

`editorDriver.getPaths()`给我：“bs”

此外，驱动程序肯定会看到 B 属性的更改，因为`editorDriver.isChanged()`在我 fire() 上下文之前返回 true。

我的客户端或服务器端日志没有错误，注释处理器运行时没有警告。

这是我设置驱动程序的方法：

```
editorDriver = GWT.create(Driver.class);
editorDriver.initialize(rf, view.getAEditor());

final ARequest aRequest = rf.ARequest();
        final Request<List<AProxy>> aRequest = aRequest.findAByUser(loginInfo.getUserId());
        String[] paths = editorDriver.getPaths();
        aRequest.with(paths).fire(new Receiver<List<AProxy>>() {

            @Override
            public void onSuccess(List<AProxy> response) {
                AProxy a = response.get(0);
                ARequest aRequest2 = rf.aRequest();
                editorDriver.edit(a, aRequest2);
                aRequest2.persist().using(a);
            }
        }); 
```

这是我的实体的外观：

```
public abstract class PersistentEntity {
    public Void persist() {
        PersistenceManager pm = getPersistenceManager();
        try {
            pm.makePersistent(this);
        } finally {
          pm.close();
        }
        return null;
    }

    public Void remove() {
        PersistenceManager pm = getPersistenceManager();
        try {
            pm.deletePersistent(this);
        } finally {
          pm.close();
        }
        return null;
    }
}

@PersistenceCapable(identityType = IdentityType.APPLICATION)
@Version(strategy=VersionStrategy.VERSION_NUMBER, column="VERSION",
         extensions={@Extension(vendorName="datanucleus", key="field-name", value="version")})

public class A extends PersistentEntity {

        ... (Id, version omitted for brevity)
    @Persistent
    private String name;

        @Persistent
        private List<B> bs;

    public String getName() {
        return name;
    }

        ...

    public void setName(String name) {
        this.name = name;
    }

    public List<B> getBs() {
        return bs;
    }

    public void setBs(List<B> bs) {
        this.bs = bs;
    }

}

... (same annotations as above omitted for brevity)

public class B extends PersistentEntity {

        ... (Id, version omitted for brevity)
    @Persistent
    private String name;

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }
} 
```

以下是代理：

```
@ProxyFor(A.class)
public interface AProxy extends EntityProxy {
    String getName();
    List<BProxy> getBs();
    void setName(String name);
    void setBs(List<BProxy> bs);
}

@ProxyFor(B.class)
public interface BProxy extends EntityProxy {
    String getName();
    void setName(String name);
} 
```

这是我的服务存根：

```
@Service(A.class)
public interface ARequest extends RequestContext {

    Request<List<A>> findAByUser(String userId);

    InstanceRequest<AProxy, Void> persist();
    InstanceRequest<AProxy, Void> remove();
}

@Service(B.class)
public interface BRequest extends RequestContext {

    Request<List<A>> findB(String key);

    InstanceRequest<BProxy, Void> persist();
    InstanceRequest<BProxy, Void> remove();
} 
```

**编辑**：我现在更改了我的 ARequest 接口和服务实现以支持“saveAndReturn”方法，这样我就可以在服务器端递归地“持久化”“a”：

```
Request<UserSandboxProxy> saveAndReturn(AProxy aProxy); 
```

我现在发现，当我“刷新”我的 RequestFactoryEditorDriver 时，客户端上下文对象具有我的新“b.name”值。但是，如果我调用“context.fire()”并在服务器端检查我的“saveAndReturn”方法，则生成的服务器端对象“a”，就在我“持久化”它之前，不包含对“ b.name”在列表的任何项目上。

为什么会发生这种情况？我如何调试为什么这个客户端信息不通过线路到达服务器？

我考虑过、尝试过并排除的选项：

1) 确保 APT 已经运行，并且 Proxy 或 Service 接口上没有警告/错误

2) 确保我的代理在 AProxy 中确实有一个有效的设置器用于列表

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T20:18:21.050

您**必须**使用每个请求的会话模式才能使 RequestFactory 正常工作。更多详细信息：[https ://code.google.com/p/google-web-toolkit/issues/detail?id=7827](https://code.google.com/p/google-web-toolkit/issues/detail?id=7827)

# python - 使 Python 请求库以文本/纯文本形式发送 Multipart POST

> ID：14041283
> 
> 赞同：1
> 
> 时间：2012-12-26T13:30:04.380
> 
> 标签：python, python-requests

`requests`默认情况下，在发送多部分 HTTP POST 请求时，我通过`files`带有 Content-Type 的参数发送文本。`application/octet-stream`有没有办法可以强迫它`text/plain`代替？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T13:41:32.503

`requests`不幸的是，这不受支持。底层`urllib3`库确实支持处理 3 值元组（带有文件名、数据和 mime 类型），但`requests`不支持对`files`允许您传入 mime 类型的参数进行任何处理。

目前[正在修改](https://github.com/kennethreitz/requests/issues/935)POST 请求的文件处理方式，但现在有一个[补丁](https://github.com/kennethreitz/requests/pull/803)可供您使用。

# wordpress - Wordpress - 为什么我不能在插件中使用条件标签？

> ID：14041284
> 
> 赞同：0
> 
> 时间：2012-12-26T13:30:18.273
> 
> 标签：wordpress, wordpress-theming

我正在尝试使以下代码正常工作：

```
if( is_home() ):
    echo 'User is on the homepage.';
else:
    echo 'User is not on the homepage';
endif; 
```

如果我把它放在主题页眉或页脚中，那么它可以工作，但如果我把它放在我的插件中，它就不起作用。我也尝试过`is_single()`，`is_page()`但它们在插件中不起作用。知道问题是什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T14:13:00.483

`is_home()`并且其他几个 WP 函数并不总是被定义，尝试使用一个合适`hook`的来包含你的代码。例子：

```
add_action('wp', 'check_home');
// or add_action('init', 'check_home');

function check_home($param)
{
    if (is_home()):
        echo 'User is on the homepage.';
    else:
        echo 'User is not on the homepage';
    endif;
} 
```

**编辑：**

在任何情况下，如果您想回显数据，请在`body`标签内使用挂钩。`the_content`使用钩子的示例：

```
add_filter('the_content', 'check_home');

function check_home($content)
{
    if (is_home())
        $echo    = 'User is on the homepage.';
    else
        $echo    = 'User is not on the homepage';

    return $echo . '<hr />' . $content;
} 
```

# c# - 允许字母、数字、小数、空格和下划线的正则表达式模式

> ID：14041286
> 
> 赞同：4
> 
> 时间：2012-12-26T13:30:34.123
> 
> 标签：c#, java, php, javascript, regex

我不擅长正则表达式模式。我必须对字符串进行验证，以允许

```
only alphabets, numbers, decimals, spaces, comma and underscore 
```

允许我拥有的字母和空格`/^[a-zA-Z][a-zA-Z\\s]+$/` 请帮助我以一种模式创建上述所有条件。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-26T13:34:42.620

这个正则表达式应该可以满足您的要求

```
'[a-zA-Z0-9_. ,]*' 
```

在正则表达式中，我指定了范围 a 到 z、A 到 Z（大写）、0 到 9 和单个字符 _、小数点“.”、空格和逗号。

如果您想确保在第一个字母后至少需要一个字符，您可以将 * 替换为 +，或将 {2,} 替换为至少 2 个字符，或将 {2,5} 替换为 2 到 5 个字符.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-26T13:33:42.730

你可以试试：

```
/^[\w., ]+$/ 
```

我不知道起始字符的要求是什么，如果有的话。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T08:58:12.427

拉胡尔的回答给了我思考的方向，但对于游客来说，这可能也有帮助

```
patternForClasName      =   /^([a-zA-Z0-9 _]+\.)*[a-zA-Z0-9 _]+$/;  
// Allowing valid className which has a format abcsasa.dsd.dsd(the class or a package name can have an underscore or a numerical)

patternForName          =   /^([a-zA-Z0-9 _-]+)$/;
// Allowing alphanumeric + spaces + (_)underscore and a (-)dash

patternForDescription   =   /^([a-zA-Z0-9 _-]+[\,\.]+)*[a-zA-Z0-9 _-]*$/;
  // Allowing alphanumeric,spaces, (_)underscore, (-)dash, comma, decimal

patternURLFormat        = /(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/;

// For a valid URL 
```

# jquery - 冲突 beetwen : 在选择器和溢出之后

> ID：14041287
> 
> 赞同：0
> 
> 时间：2012-12-26T13:30:35.137
> 
> 标签：jquery, html, css

大家好，我遇到了 css 和 html 的问题（[小提琴](http://jsfiddle.net/3sg5Y/6/)）

我的问题是，`<div class="bcont"></div>`右侧`<div class="square></div>`有一个脚本，当*鼠标悬停*在`square` `<div>`. 所以，为了让它工作，我必须设置

```
.square{
  font-family: 'Lobster Two';
  background-color: rgba(196, 196, 193, 0.3);
  /* color: rgba(196, 196, 193, 0.3); */
  color: #000;
  width: 300px; 
  height: 160px; 
  margin:30px; 
  border: solid 10px #000; 
  position: relative;
  overflow: hidden;  /* this! */
} 
```

所以`bcont` `<div>`只有当它在`square`on内部移动时才会出现`muoseover`。但是，`overflow: hidden`在 "square" div 上设置，箭头（由 "square:after" 规则创建）不会出现，这让我很生气。对不起我的英语不好。

谢谢你们 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T13:59:03.117

如果您不在方形框上提供溢出属性，而不是从右到左为 div 设置动画，您可以在其宽度上设置动画，您可以获得您想要的效果。

```
$('#quotae').hover(function(){
  $(".bcont", this).stop().animate({width:'60px'},{queue:false,duration:300});
  }, function() {
  $(".bcont", this).stop().animate({width:'0px'},{queue:false,duration:300});
}); 
```

我的意思是首先将宽度保持为 0，然后将其设置为 60 像素；这样，您还需要在 bcont div 上添加隐藏的溢出。

```
.bcont{
    position: absolute;
    top: 0;
    right: 0px; /* -60 */
    margin: 0;
    padding: 0;
    height: 100%;
    width: 0px;
    overflow:hidden;

} 
```

检查[http://jsfiddle.net/sudhanshu414/3sg5Y/10/](http://jsfiddle.net/sudhanshu414/3sg5Y/10/)

# php - 使用 AJAX 时 set_flashdata codeigniter 不起作用

> ID：14041289
> 
> 赞同：1
> 
> 时间：2012-12-26T13:30:38.263
> 
> 标签：php, jquery, codeigniter

我想`set_flasdata`在使用 AJAX 提交时显示，但`set_flashdata`没有出现。

这是我的控制器：

```
public function updatePassword() {
    $idUser = $this->session->userdata('id_user');
    $username = $this->session->userdata('username');
    $data = array();
    $data = $this->user_model->getPassword($idUser, $username);

    $passwordLama = $this->input->post('password-lama');
    $passwordBaru = $this->input->post('password-baru');
    if ($passwordLama == $data['password']) {
        $dataPasswordBaru = array(
            'password' => $passwordBaru
        );
        $this->user_model->updatePassword($idUser, $username, $dataPasswordBaru);
        echo $this->session->set_flashdata('flashSuccess', 'Berhasil mengubah password');
    } else {
        echo $this->session->set_flashdata('flashError', 'Gagal mengubah password');
    }
} 
```

这是我的看法：

```
 <?php if ($this->session->flashdata('flashSuccess')): ?>
            <div class="alert alert-success info-alert" id="result-edit-password2">
                <button type="button" class="close" id="close-edit-password2">&times;</button>
                <div id="result-edit-password-text2"><?php echo $this->session->flashdata('flashSuccess') ?></div>
            </div>
        <?php endif ?>

        <?php if ($this->session->flashdata('flashError')): ?>
            <div class="alert alert-error info-alert" id="result-edit-password2">
                <button type="button" class="close" id="close-edit-password2">&times;</button>
                <div id="result-edit-password-text2"><?php echo $this->session->flashdata('flashError') ?></div>
            </div>
        <?php endif ?> 
```

这是我的 AJAX：

```
 $("#form-edit-password").submit(function(e){
        e.preventDefault();
        $.ajax({
            type: 'POST',
            url: "<?php echo base_url('home/updatepassword'); ?>",                        
            data: $(this).serialize(),               
            success: function(html){
                $('.info-alert').show();                    
            }
        });
    }); 
```

有`set_flashdata`没有出现的问题，请帮忙。

# c++ - 实现多线程 UDP 服务器（线程池？）的问题

> ID：14041291
> 
> 赞同：0
> 
> 时间：2012-12-26T13:30:47.890
> 
> 标签：c++, c, multithreading, udp, threadpool

我正在编写一个音频流媒体（客户端-服务器）作为我的项目（C/C++），我决定为这个项目制作一个多线程 UDP 服务器。

这背后的逻辑是每个客户端都将在他自己的线程中处理。我遇到的问题是线程相互干扰。

我的服务器做的第一件事是创建一种线程池；它创建了 5 个线程，所有这些线程都被一个`recvfrom()`函数自动阻止，尽管在大多数情况下，当我将另一台设备连接到服务器时，多个线程正在响应，然后导致服务器完全被阻止，并且不再操作。

调试它也很困难，所以我写在这里是为了获得一些关于多线程 UDP 服务器通常如何实现的建议。

我应该在部分代码中使用互斥锁还是信号量？如果有，在哪里？

任何想法都会非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T00:30:47.143

退后一步：你说

> 每个客户都将在自己的线程中处理

但是UDP不是面向连接的。如果所有客户端都使用相同的多播地址，则没有自然的方法来决定哪个线程应该处理给定的数据包。

* * *

如果您坚持每个客户端都有自己的线程的想法（我通常会反对，但在这里可能有意义），您需要一些方法来确定每个数据包来自哪个客户端。

这意味着要么

*   使用 TCP（因为您似乎无论如何都在尝试面向连接的行为）
*   读取每个数据包，确定它属于哪个逻辑客户端连接，并将其发送到正确的线程。注意，由于路由信息是全局/共享状态，所以这两者是等价的：

    1.  保留源 IP -> 线程映射，受互斥锁保护，从所有线程读取和访问
    2.  在单个线程中执行所有读取，使用本地源 IP -> 线程映射

    第一个似乎是你想要的，但它的设计很糟糕。当一个数据包进来时，你会唤醒一个线程，然后它会锁定互斥体并进行查找，并可能唤醒*另一个*线程。您要处理此连接的线程也可能被阻塞读取，因此您需要一些机制来唤醒它。

    第二个至少给出了关注点的分离（读取/调度与处理）。

* * *

明智地，您的设计应该取决于

*   客户数量
*   输入输出负载
*   非 I/O 处理量（或 IO:CPU 比率，或...）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T17:33:58.707

*我的服务器做的第一件事是创建一种线程池；它创建了 5 个线程，所有这些线程都被 recvfrom() 函数自动阻止，尽管在大多数情况下，当我将另一台设备连接到服务器时，多个线程正在响应，然后导致服务器完全封锁，不再操作*

与其让所有线程都位于同一个套接字连接上的 recvfrom() 上，不如使用信号量保护连接，并让工作线程在信号量上等待。当一个线程获取信号量时，它可以调用recvfrom()，当它返回一个数据包时，线程可以释放信号量（让另一个线程获取）并自己处理数据包。完成对数据包的服务后，它可以返回等待信号量。这样您就可以避免在线程之间传输数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T13:54:53.590

您的 recvfrom 应该在主线程中，当它获取数据时，您应该将地址 IP:Port 和 UDP 客户端的数据传递给辅助线程。

每次主线程接收到 UDP 数据包时，可以通过生成一个新线程来传递 IP：端口和数据，或者可以通过消息队列将其传递给辅助线程

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T23:52:25.673

我认为您的主要问题是非持久性 udp 连接。Udp 不会让您的连接保持活动状态，它每个会话只交换两个数据报。根据您的应用程序，在最坏的情况下，它将有并发线程从第一个可用信息中读取，即，即使轮到它，recvfrom() 也会解除阻塞。

我认为要走的路是在主线程中使用 select ，并使用并发缓冲区来管理线程将做什么。在此解决方案中，您可以为每个客户端设置一个线程，或为每个文件设置一个线程，前提是您保留了客户端必要的信息以确保发送正确的文件部分。

TCP 是另一种实现方式，因为它为您运行的每个线程保持连接活动，但不是允许应用程序丢失数据的最佳传输方式。

# extjs - 从 Ext JS 2 迁移到 Ext JS 4

> ID：14041300
> 
> 赞同：1
> 
> 时间：2012-12-26T13:31:36.387
> 
> 标签：extjs

我在页面加载本身时收到此错误。

> 错误：[Ext.extend] 试图从页面上尚未加载的类进行扩展。javascript//ext-4.1.1a/ext-all-debug.js 第4391行

我根本无法呈现页面。有任何想法吗？

我还使用 extjs4 兼容性进行迁移。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T17:02:37.470

[您是否使用了此处列出](http://www.sencha.com/blog/ext-js-3-to-4-migration/)的所有资源，包括[截屏视频](http://vimeo.com/23027769)？这些视频需要花费一些时间，但我认为您会发现它们非常有帮助，因为它们会通过几个示例来说明如何准确调试这些类型的问题。学习有效调试将是解决此类迁移的最佳方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T13:01:06.793

ExtJS 中没有名为“TreeNodeUI”的类。如果你想要treepanel，那么你需要扩展'treepanel'。在尝试任何代码之前，请查看 Sencha 网站上给出的示例。

# c# - 现有类的精简版

> ID：14041302
> 
> 赞同：3
> 
> 时间：2012-12-26T13:31:38.447
> 
> 标签：c#, nhibernate

我有一个`A`包含 class 集合的类`B`。最后一堂课非常繁重，对于我正在研究的新模块，我只需要其中的几个字段。

为了提高使用 nhibernate 从 SQL Server 加载实体时的性能，我想创建这个类的精简版，以便在我正在开发的这个模块中使用（类`BLite`）。

此类`BLite`将用于集合和多对一关系。我知道我可以为这个只包含我需要的字段的新类创建一个单独的映射，但如果可能的话，我想避免这种情况（使用组件或类似功能）。

是否可以在不创建额外映射的情况下使用类的“精简版”版本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T14:19:41.397

对您的方案有帮助的是`lazy`属性映射，文档[5.1.9。属性](http://nhforge.org/doc/nh/en/index.html#mapping-declaration-property)点 9):

> lazy（可选 - 默认为 false）：指定此属性是惰性的。初始加载对象时不会加载惰性属性，除非在特定查询中覆盖了获取模式。当访问对象的任何惰性属性时，都会加载惰性属性的值。

这种映射可能适合您，因为这些属性在需要时可用（当对象连接到会话时），但从不隐式加载。在查询中，获取模式仍然可以调整（作为一个 SELECT 子句的一部分）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T13:47:35.240

您可以将[AutoMapper](https://github.com/AutoMapper/AutoMapper)用于相同目的。（您需要定义 lite 类，并为 AutoMapper 指定地图）

使用流畅的界面，您可以仅包含/排除特定字段。

[例子](http://www.codeproject.com/Articles/61629/AutoMapper)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T13:52:02.137

这是 Automapper 的替代品，我发现它更易于使用[http://valueinjecter.codeplex.com/](http://valueinjecter.codeplex.com/)

这里有它们之间的比较[AutoMapper vs ValueInjecter](https://stackoverflow.com/questions/4663577/automapper-vs-valueinjecter)

在任何情况下，创建重类的简单或轻量级版本的最简单方法可能是使用映射器

# asp.net - 使用Oracle数据库的会话状态SQLServer模式

> ID：14041306
> 
> 赞同：4
> 
> 时间：2012-12-26T13:31:57.797
> 
> 标签：asp.net, oracle11g, session-state

是否可以使用Oracle数据库？Web 应用当前正在使用 Oracle，可能无法访问 SQL Server。

谢谢。

反渗透

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T16:31:06.550

是的，事实上 Oracle 提供了 asp.net 提供程序库，包括：成员资格提供程序角色提供程序站点地图提供程序会话状态提供程序配置文件提供程序 Web 事件提供程序 Web 部件个性化提供程序缓存依赖项提供程序

你可以在这里找到它们。 [http://www.oracle.com/technetwork/topics/dotnet/index-087367.html](http://www.oracle.com/technetwork/topics/dotnet/index-087367.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-26T14:41:07.147

开箱即用是不可能的。ASP.NET 支持以下[会话状态提供程序](http://msdn.microsoft.com/en-us/library/ms178586%28v=vs.100%29.aspx)：

*   In-Process - 会话存储在 Web 服务器的内存中
*   状态服务器 - 会话被序列化并存储到运行 ASP.NET 会话状态服务的特定服务器的内存中。这可能是与 Web 服务器不同的机器
*   SQL Server - 会话被序列化并持久化到 MS SQL Server 数据库中

顾名思义，SQLServer sessionState 模式使用 SQL Server。如果要使用 Oracle，则必须通过从[`SessionStateStoreProviderBase`](http://msdn.microsoft.com/en-us/library/system.web.sessionstate.sessionstatestoreproviderbase.aspx)类继承并覆盖所有方法来编写自定义会话状态提供程序。

# spring - 直接交换不适用于默认 routingKey

> ID：14041314
> 
> 赞同：1
> 
> 时间：2012-12-26T13:32:37.747
> 
> 标签：spring, rabbitmq, spring-integration

我有些不明白。我正在使用 Spring Integration 从 RabbitMQ 发送和接收消息。

我的拓扑很简单：

*   一个 JVM 使用 Spring 的 RabbitTemplate 生成消息

    ```
    <rabbit:template id="rabbitTemplate" connection-factory="rabbitConnectionFactory" />

    <bean id="amqpTemplate" parent="rabbitTemplate">
        <property name="queue" value="${queue.name}" />
        <property name="routingKey" value="${queue.name}" />
    </bean> 
    ```

*   RabbitMQ 队列接收消息

    ```
    <rabbit:queue name="${queue.name}" durable="true" /> 
    ```

*   另一个 JVM 使用该消息（启动 Spring-Batch 作业，但这不是重点）：

    ```
    <int-amqp:inbound-channel-adapter
          queue-names="${queue.name}"
          channel="amqp-requests"
          connection-factory="rabbitConnectionFactory" /> 
    ```

使用的发送方法是：

```
/**
 * Convert a Java object to an Amqp {@link Message} and send it to a default exchange with a default routing key.
 * 
 * @param message a message to send
 * @throws AmqpException if there is a problem
 */
void convertAndSend(Object message) throws AmqpException; 
```

* * *

它工作正常，但根据文档，我认为 routingKey 在我的用例中不是强制性的。我不知道为什么有人放了一个routingKey。

所以我尝试删除routingKey：

```
<bean id="amqpTemplate" parent="rabbitTemplate">
    <property name="queue" value="${queue.name}" />
</bean> 
```

然后我仍然可以将消息发送到队列，但它们再也不会被消费了！有人可以解释一下发生了什么吗？我不能在没有 routingKey 的情况下从一个 JVM 向另一个 JVM 发送消息吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T15:30:55.000

> ...但是根据文档，我认为 routingKey 不是强制性的...

您指的是哪个“文档”？

使用 AMQP，生产者不知道队列；他们将消息发送到各种类型的交换器，这些交换器具有路由到队列的绑定。

也许你误解了默认交换的概念，每个`queue`都绑定到它，a`routing key`等于它的`queue name`.

这允许简单地路由到特定队列（通过它们的名称）。默认交换是一种方便，可以为 amqp 消息传递提供快速入口。这很好用，但您可能需要考虑使用显式声明的交换，因为它进一步将生产者与消费者分离。使用默认交换，生产者必须知道消费者正在侦听的队列的名称。

此外，在 RabbitTemplate 上，该`queue`属性仅用于接收（消费）消息，与发送消息无关；正如我所说，生产者不知道队列。

您应该使用以下...

```
<bean id="amqpTemplate" parent="rabbitTemplate">
    <property name="routing-key" value="${queue.name}" />
</bean> 
```

# algorithm - 两个不同正方形的乘积

> ID：14041317
> 
> 赞同：-1
> 
> 时间：2012-12-26T13:33:16.623
> 
> 标签：algorithm, sum, logic

有没有更短更有效的方法来查找
**一个数字是否可以由两个不同的平方数的乘积形成**
，例如

*   36=4*9
*   144=16*9

帮我一个算法或逻辑

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T13:41:58.857

应该相当容易。把你的数字分解成素数。[此处](http://rosettacode.org/wiki/Prime_decomposition)提供了各种语言的算法和实现。

一旦你得到了你的主要因素，那就很容易了。浏览它们并查看是否有两对相同的数字。

例如：

36 = 2 * 2 * 3 * 3。两对（2 和 3）。有用。

144 = 2 * 2 * 2 * 2 * 3 * 3 => 两对（2*2 和 3）。有用

唯一棘手的部分是重新组合您的主要因素，以便您最终得到 X = A * A * B * B。但这也不是很难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T13:51:04.163

我建议你考虑以下几点：

如果一个数是两个不同平方数的乘积，那么它的形式为 n，其中对于某些值 a 和 b，n = a^2 * b^2。但是，我们知道 a^2 * b^2 = (a*b)^2 （您可以在上面的两个示例中自己检查一下）。因此，要知道一个数是否是两个平方的和，该数本身必须是一个平方数。

然后剩下的就是计算出它是两个不同平方数的乘积——这可以简单地通过以下方式完成：

如果 n = a^2 * b^2，那么对于 a <> b，n 不能等于 a^4。如果n = a^4 那么a^2 * b^2 = a^4，这又意味着b^2 = a^2，这最终意味着b = a或-a（你不说你是否计算一个值，对于这个测试来说，它是负数作为“不同的”）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T14:21:39.620

这个怎么样？

```
package Math;
public class NearestNumber {
    public static void main(String[] args) {

        int myNumber = 144;
        int min = (int) Math.sqrt(myNumber);
        int i, j, counter = 0;

        for (i=2;i<min;i++) {
            for (j=i+1;j<=min;j++) {
                if (myNumber == (i*i*j*j)) {
                    System.out.println("Possible combination are " + (i*i) + " and " + (j*j));
                    counter++;
                }
            }
        }
        if (counter==0) {
            System.out.println("No possible combination found!!!");
        }
    }
} 
```

**注意：**这是打印所有可能的组合，而不是最接近的组合。我相信首先是最接近的......

**上面的输出**是

```
Possible combination are 4 and 36
Possible combination are 9 and 16 
```

## [演示](http://ideone.com/uSrbI5)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T18:35:10.263

你问的逻辑，所以这里。实施很简单。

获取数字并提取其平方根。如果它不是整数，则没有数字 A 使得 A*A = N，因此不可能有两个数字使得 B*C = A 并且你停在那里。

如果根 A*是*整数，则再次提取其根；让它的整数部分是 R。循环 2 和 R 之间的所有素数并使用它们来分解 A。每次你找到 A 的素数因子（它除以 A 没有余数），继续除以那个素数，直到你得到一个余。没有余数的除法次数就是那个素数的幂。把那个素数放在一个列表中，次数是它的幂。如果在除法时得到 1，则停止；如果你想出一个大于 R 的数字，你将它添加到列表中并退出循环。

最后，您将有一个列表，例如 [ 3, 3, 5, 5, 5, 7 ]。

如果你的集合只有一个成员，那么问题就没有解决方案。您可以快速检查这一点，因为当您计算 R 时，您会看到它是整数。如果它也是素数，则没有小于 R 的除数，您的集合将是 [ R ]，它不能被划分为两个非空集合。

在您的示例中，您将拥有：

```
144 -- root is 12
Root of 12 is 3.4, so you need only check from 2 to 3 to fill [ ]
2 divides 12 and you get 6: [ 2 ]
2 divides 6 and you get 3 [ 2 2 ]
2 does not divide 3
3 divides 3 and you get 1 [ 2 2 3 ], so exit.
Factors of 12: [ 2, 2, 3 ] 
```

现在，字典的每个[2 分区](http://en.wikipedia.org/wiki/Partition_of_a_set)代表一对合适的数字。例如，您可以有： [ [ 3 2 ], [ 2 ] ] 表示 2^2 和 (2*3)^2 是合适的候选者，或 [ [ 2 2 ] [ 3 ] ] 表示 (2 *2)^2 和 3^2 是合适的候选人。

使用[包含前 1,000 个素数的表格，](http://primes.utm.edu/lists/small/1000.txt)您可以有效地检查多达近 5000 亿个数字；即使您可能需要 BigNum 库（libgmp、NumPy、...）来实现。

# java - 以给定前缀开头的字符串

> ID：14041320
> 
> 赞同：-1
> 
> 时间：2012-12-26T13:33:43.473
> 
> 标签：java

我有以下代码：

```
public List<String> function(String pre) {
    List<String> temp = new ArrayList<>();
    for(String str : list) {
        if(str.startsWith(pre)
            temp.add(str);
        if(str.charAt(0) > pre.charAt(0))
            break;
    }
    return temp;
} 
```

该函数应返回以给定前缀开头的所有单词。
代码中的list是一个排序的ArrayList。这段代码很`O(n)`复杂。
我该如何改进它？
例如及时运行`log(n)`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T13:47:45.337

问题是——你能及时做到`O(logn)`吗？
如果其中的一半元素`list`具有所需的前缀怎么办？您需要将列表的那一半添加到新列表中 - 这仍然是`O(n)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T13:43:09.417

是的你可以

```
List<String> function(List<String> list, String pre) {
    List<String> temp = new ArrayList<>();
    for(String str : list) {
        if(str.startsWith(pre))
            temp.add(str);
    }
    return temp;
} 
```

# azure - 如何使用 Azure 资源提供程序接收我的服务付款？

> ID：14041321
> 
> 赞同：0
> 
> 时间：2012-12-26T13:33:50.237
> 
> 标签：azure, cloud, azure-store

[这是 Windows Azure 资源提供程序 SDK](https://github.com/WindowsAzure/azure-resource-provider-sdk)。我试图阅读有关[概念](https://github.com/WindowsAzure/azure-resource-provider-sdk/blob/master/docs/concepts.md)的内容，但不能完全理解它是否允许我做我想做的事。

我有一个托管在 Windows Azure 中的 Web 服务。用户获得一个用户名-密码对，通过 PayPal 支付服务费用，然后他们可以向提供其用户名-密码对的指定 URL 发出 Web 请求，该服务将根据他们的请求数量扣除资金。当他们通过 PayPal 付款时，他们购买了“发出 N 个请求的权利”——他们在服务中的余额随着他们支付的“请求数量”而增加。因此，它是按使用量付费的服务。

现在，我想使用 Resource Provider SDK 向 Azure Store 公开我的服务，向人们收取他们对我的服务的请求数。

概念[文件](https://github.com/WindowsAzure/azure-resource-provider-sdk/blob/master/docs/concepts.md)说

> 然后用户创建订阅。订阅是一个命名实体，例如 3 个月免费试用或 MyApp 生产。您可以在帐户门户上查看您自己的订阅。
> 
> 接下来，用户创建一个或多个资源，例如网站或虚拟机。网站和虚拟机是两种不同的资源类型。每个资源都部署在一个订阅下。

订阅部分或多或少是清楚的。`Resource`对象呢？我的意思是描述继续“例如网站或虚拟机”，但我想要提供的不是站点也不是虚拟机，它是对我的服务 URL 排队一定数量的请求的权利。

要么我没有得到简单的东西，要么 Azure 资源提供程序 SDK 不是我可以使用的。

如何使用 Azure 资源提供程序 SDK 向 Azure Store 公开我的按使用量付费服务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T11:23:21.807

所有的混乱都是因为文档的措辞方式。它说

> 然后用户创建订阅。订阅是一个命名实体，例如 3 个月免费试用或 MyApp 生产。

这是部分正确的。用户确实创建了订阅，但这通常发生在他第一次从 Azure Store 购买之前很久。订阅是 Azure 的东西，它们并不特定于 Azure Store。RP 看到的是订阅 id（目前以 GUID 字符串表示的形式），并且通过订阅 id，RP 可以区分不同用户的购买。

然后就这样

> 接下来，用户创建一个或多个资源，例如网站或虚拟机。网站和虚拟机是两种不同的资源类型。每个资源都部署在一个订阅下。

这与事实相去甚远。

用户从 Azure Store 展示中选择一个“报价”（基本上是可用服务的列表），然后他选择一个“计划”（这是“您支付 X 钱并获得 Y 的服务”类型的报价，X 为零对于免费计划），他选择了一个“资源名称”。“资源名称”取决于用户 - 他选择它。

“资源类型”是“产品”的唯一符号标识符，它在整个 Azure 存储中必须是唯一的，并且由 RP 设计者选择。所以像“网站”或“虚拟机”这样的例子都非常糟糕和无用 - 事实上，你会想要一个“资源类型”，`CompanyXMalingService`这样当其他人想要提供他可以提供的“邮件服务”`CompanyYMailingService`时，什么时候您自己想提供一种“电话服务”，您可以使用`CompanyXTelephonyService`并且不会与其他人发生冲突。

现在，如果您提供具有“每个周期 N 个请求”计费模型的东西，那么您只能将“一个月”作为一个周期，因此它只能是“每个月 N 个请求”，仅此而已。假设您的产品“资源类型”是`CompanyXCoolRequests`.

模型如下：用户点击您的产品，选择一个计划（例如，每月 1000 个请求）并点击直到他被收费。同时，商店将向您的 RP 发送一个请求，说有一个订阅购买，具有特定类型的资源 ID`CompanyXCoolRequests`和一些资源名称，计划标识符将在请求中。您的 RP 在您的服务中创建一个帐户并记下那里的请求数量，它必须提供用户 ID 和密码（或使用您的服务所需的任何东西） - 或者作为用户单击时显示的“输出项” “连接信息”按钮或通过用户单击“管理”按钮时重定向的服务页面。

现在有以下选项。要么多年来什么都没有发生，然后这意味着用户购买是活跃的并且他每个月都被计费，该月从他购买的日期开始并持续到下个月的同一日期。您必须每月向他提供 1000 个请求。你必须决定如何处理剩余的余额（比如这个月即将结束，他只使用了 800 个请求），以及当他在新的一个月开始之前用完所有东西时该怎么办。用户还可以从他的订阅中“删除”您的产品 - 他将不再被收费，商店将向您的 RP 发送请求，您必须删除或阻止您之前在服务中创建的帐户。也有可能有'

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T16:17:41.357

订阅可以被认为是用户商业关系的标识符[认为要为哪个信用卡收费的标识符] 资源或另一个具有的插件是标识用户正在购买的服务实例的标识。

在您的情况下，让我们将您的服务称为“SharpToothService”，用户可以转到该服务并购买以 9.99 发送“n SharpTooths/month”的能力。

锋利的牙齿将是资源。& 用户名和密码将是输出项 [供应和购买资源的结果]

[随着您的相处，您可能对计划有疑问]-计划是识别已售包装的内容，例如。您可能有“9.99/月的 100 个尖牙”的白银计划：“19.99/月的 500 个尖牙”等的黄金计划

# javascript - 用于 Objective-C 方法调用的 shouldStartLoadWithRequest 委托

> ID：14041325
> 
> 赞同：2
> 
> 时间：2012-12-26T13:34:13.853
> 
> 标签：javascript, objective-c, dom-events, hybrid

我正在尝试从 Javascript 调用 Objective-C 方法。我没有使用任何库，例如phonegap，我也成功调用了Objective-C方法，但为此我每次在调用之前创建一个iframe，然后只`shouldStartLoadWithRequest`调用委托我只是按照以下链接：

[UIWebView 的秘密](http://blog.techno-barje.fr/post/2010/10/06/UIWebView-secrets-part3-How-to-properly-call-ObjectiveC-from-Javascript/)

[UIWebView JavaScript 到 Objective-C 的通信](http://blog.grio.com/2012/07/uiwebview-javascript-to-objective-c-communication.html)

但是如何在不调用 webview 委托的情况下进行 Objective-C 方法调用`shouldStartLoadWithRequest`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T22:18:02.297

首先，这是一个相当大的问题。我现在正在开发一个相当大的混合解决方案，重要的是要了解混合应用程序的本机部分如何在所有目标平台上工作，然后才能使你的 js 对所有平台通用。

shouldStartLoadWithRequest 方法依赖于使用自定义 URL 从网页与本机代码进行通信。点击一个链接，比如 hybrid://showMenu 将尝试在 web 视图中打开链接，并且委托将在 shouldStartLoadWithRequest 中拦截此调用。此时，您将识别调用并执行您想要的任何操作，例如显示菜单并告诉 webview 停止加载。

黑莓（至少在 v10 之前）和 Android 上都有相同的功能，而且很可能是 Windows Phone。PhoneGap 正在跨平台使用这种技术。所有这些函数都将能够捕获 hybrid://showMenu 调用。它们都以不同的方式运行，您必须自己进行研究才能获得代码，但我可以确认绝对可以在不同的本机 shell 中使用相同的 Javascript。

使用 iframe 来加速 Javascript 是正确的，但您还需要采取其他技巧来获得最佳性能。它们因浏览器而异，因此如果您想要获得最佳性能，您的 Javascript 必须在不同平台之间至少有一点不同。这是一篇关于如何在 iOS 上获得良好性能的好文章：

[来自 CocoaControls 的 iOS Hybrid App 入门](http://www.cocoacontrols.com/posts/a-primer-on-hybrid-apps-for-ios)

现在，如果您仍然想避免使用 URL 和 webview 委托在 JS 和本机代码之间进行通信，您可以使用更复杂的使用 WebSockets 的路线。

为此，您必须在每个将侦听本地连接的本机包装器中包含一个 WebSocket 服务器库。然后，您的 Javascript 将包含一个 WebSocket 客户端库，用于将消息传递给本机代码。可以进行两种方式的通信。您的 JS 在不同平台上或多或少是相同的。

我自己还没有实现这个方法，因为它对我需要的东西来说太过分了，但是 LinkdIn 的混合应用程序正在使用它。更多信息在这里：

[LinkdIn 的混合应用日记](http://engineering.linkedin.com/mobile/linkedin-ipad-nativeweb-messaging-bridge-and-websockets)

如果您选择（2）祝您好运，请分享您的结果。

# asp.net - 在表单视图中使用下拉列表控件

> ID：14041333
> 
> 赞同：4
> 
> 时间：2012-12-26T13:35:07.983
> 
> 标签：asp.net, sqldatasource, controlparameter

我是 asp.net 的新手，我在使用 formview 中的下拉列表控件并将其值传递给相关的 sqldatasource 时遇到问题。当我使用下面的代码时，我得到以下异常

**异常详细信息：System.InvalidOperationException：在 ControlParameter 'categoryId' 中找不到控件 'ddlCategory'。**

**表单视图中的下拉列表。**

```
 <asp:DropDownList ID="ddlCategory" DataSourceID="ObjectDataSourceCategory" DataTextField="NAME" DataValueField="ID" runat="server" /> 
```

**SQL 数据源**

```
 <asp:ObjectDataSource ID="sqlDataSourceItem" TypeName="Item" runat="server"
      SelectMethod="getItem"
      InsertMethod="insertItem"
      UpdateMethod="updateItem">
     <SelectParameters>
        <asp:QueryStringParameter QueryStringField="id" Name="id" />
     </SelectParameters>
     <InsertParameters>
        <asp:ControlParameter ControlID="ddlCategory" Name="categoryId" PropertyName="selectedValue" />
     </InsertParameters>
     </asp:ObjectDataSource> 
```

我已经找到了解决这个问题的方法。我在控制参数中更改了 DDL 的 ID。它的工作方式如下所示，因为这是该控件的最终生成 id。但我认为必须有一个更简单更好的方法。任何帮助都将不胜感激。

```
 <asp:ControlParameter ControlID="ctl00$main$frmViewItem$ddlCategory" Name="categoryId" PropertyName="selectedValue" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T16:34:36.973

这是因为您的 ddlCategory 在 formview 内，并且您正在使用母版页。最好的方法是覆盖母版页的“FindControl”功能。详情请查看以下链接：

[http://geekswithblogs.net/AzamSharp/archive/2006/08/27/89475.aspx](http://geekswithblogs.net/AzamSharp/archive/2006/08/27/89475.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T17:22:50.007

[此答案](https://stackoverflow.com/questions/7530720/pass-a-control-to-a-method/7530931#7530931)将为您的问题提供解决方案：

你需要一个递归`findcontrol()`方法。

# git - git add -f 后忽略修改

> ID：14041338
> 
> 赞同：3
> 
> 时间：2012-12-26T13:35:27.873
> 
> 标签：git, cakephp, version-control, gitignore

我刚刚*下载*（不是克隆！）CakePHP 2.2.4。该目录包含一个`.gitignore`文件：

```
# only the relevant part here
/app/Config
/app/tmp 
```

现在我执行了这些命令，因为目录（及其初始内容）*Config*和*tmp*否则将永远不会被提交：

```
git add -f Config
git add -f tmp 
```

我对*tmp*目录没有任何问题，因为那里没有更改任何文件，只会创建新文件！

相比之下，我不得不修改*Config*文件夹中的一些文件（例如数据库配置）。但是 Git 现在又要我再`git add`修改这些文件了！

**我怎样才能忽略这些修改？**

我也可以重新初始化整个 Git 存储库，因为我没有创建/修改太多。

* * *

**我对 CakePHP 的修改以解决实际问题**

我`*.gitignore`的 CakePHP 新文件：

```
# removed: /app/Config/

# start edit
/app/Config/*
!/app/Config/Schema/
!/app/Config/*.default.php
# end edit

/app/tmp
/lib/Cake/Console/Templates/skel/tmp/
/plugins
/vendors
/build
/dist
.DS_Store
/tags 
```

我还在*/app/Config*中的所有文件后缀*.default*：

*   acl.ini.default.php。

*   acl.default.php。

*   bootstrap.default.php。

*   核心.default.php。

*   数据库.php.default --> 数据库.default.php

*   email.php.default --> database.default.php

**编辑：**这比拥有更好，`*.default.php`因为`*.php.default`如果失败，这会阻止将文件输出到浏览器`mod_rewrite`（尽管这不太可能）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T14:11:50.627

Git 不跟踪目录；只有文件。因此，当您运行时`git add -f Config`，git 只是将所有文件添加到下面的工作树中`Config`，而不是目录本身。由于这些文件随后由 Git 跟踪（从而覆盖忽略规则），因此更改它们将导致 Git 认为工作树是脏的。

这些规则存在于 CakePHP 的 .gitignore 文件中`Config`，`tmp`因为 Git 可以有效地忽略整个目录；无需显式创建空目录，因为 CakePHP 可能会自动创建它们。

如果出于某种原因您希望 Git 知道那里应该有一个目录，但要忽略它的内容，那么您可以在其中添加一个 .gitignore 文件`Config`并`tmp`包含 rule `*`，这将告诉它忽略该目录之外的所有内容。但是，由于 .gitignore 文件在那里，它将维护目录本身。

* * *

**更新：**如果您想在 Git 中存储一个“默认”配置，该配置将在每个工作副本的基础上进行自定义，您最好提交一个不同名称的模板配置文件，该文件可以复制到新的 (当存储库被克隆并使用特定于环境的配置选项填充时，忽略) 文件。

正如我所看到的，配置文件本身不应该受版本控制，因为它们需要根据使用工作副本的环境进行定制，因此以这种方式保留模板副本似乎是自然的解决方案（这是Wordpress 做了什么）。

# java - 由于 SQLite，我的程序 To_do List 不起作用

> ID：14041340
> 
> 赞同：0
> 
> 时间：2012-12-26T13:35:46.363
> 
> 标签：java, android

有人可以帮我写这个应用程序，但它不起作用，我找不到解决方案。

第一个错误：

> java.lang.illegalstateexception 无法从光标窗口读取第 0 行第 1 行。确保游标在从中访问数据之前已正确初始化

第二个错误：

> android.database.sqlite.SQLite 异常：靠近“=”：语法错误（代码 1）：编译时：SELECT ZAHL1 FROM Verlauf WHERE ID =

```
package com.example.to_doliste2;

import java.util.ArrayList;
import java.util.List;

import android.os.Bundle;
import android.app.Activity;
import android.view.View;
import android.view.Window;
import android.view.WindowManager;
import android.widget.ArrayAdapter;
import android.widget.EditText;
import android.widget.ListView;
import android.widget.Toast;

public class MainActivityT extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_t);
        datasource = new VerlaufDataSource(this);

    }

    private VerlaufDataSource datasource;

    List<Entry> AufgabenListe = new ArrayList<Entry>();

    public void VerlaufKlick(View view)
    {
        try
        {
        String zahl1;
        EditText Feld1 = (EditText)findViewById(R.id.editText1);

        if (Feld1.getText().toString().length() == 0)
                {
            return;
                }

        zahl1 = (Feld1.getText().toString());

        Feld1.setText(String.valueOf(zahl1));

        try
        {
            datasource.open();
            datasource.createEntry(zahl1);
            datasource.close();         
        }
        catch (Exception ex)
        {
            Toast.makeText(this,ex.toString(),Toast.LENGTH_LONG).show();
        }

        AufgabenListe.clear();
        try
        {
            datasource.open();
            AufgabenListe = datasource.getAllEntries();
            datasource.close();
        }
        catch (Exception ex)
        {
            Toast.makeText(this,ex.toString(),Toast.LENGTH_LONG).show();
        }

        ArrayAdapter<Entry> adapterVerlauf = new ArrayAdapter<Entry>(MainActivityT.this, android.R.layout.simple_list_item_1, AufgabenListe);

        ListView lVerlauf = (ListView)findViewById(R.id.listView1);
        lVerlauf.setAdapter(adapterVerlauf);
        }
        catch (Exception ex)
        {
            Toast.makeText(this,ex.toString(),Toast.LENGTH_LONG).show();
        }

    }

} 
```

```
package com.example.to_doliste2;

    import android.database.sqlite.SQLiteOpenHelper;
    import android.content.Context;
    import android.database.sqlite.SQLiteDatabase;
    import android.util.Log;

    public class MySQLHelper extends SQLiteOpenHelper {

        public static final String DATABASE_NAME = "verlaufAufgaben.db";
        public static final int DATABASE_VERSION = 1;

        private static final String TABLE_CREATE_VERLAUF = ""
                +"create table VERLAUF ("
                +" ID integer primary key, "
                +" Zahl1 int) ";

        public MySQLHelper(Context context) 
        {   
            super (context, DATABASE_NAME, null, DATABASE_VERSION);
        }

        @Override
        public void onCreate(SQLiteDatabase database)
        {
            database.execSQL(TABLE_CREATE_VERLAUF);
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion)
        {
            Log.w(MySQLHelper.class.getName(),
                    "Upgrading database from version " + oldVersion + "to "
                    + newVersion + ", which all destroy all old data");
            db.execSQL("DROP TABLE IF EXISTS SCANITEM");
            onCreate(db);
        }

    } 
```

```
package com.example.to_doliste2;

public class Entry {
    private int zahl1;

    public int getZahl1()
    {
        return zahl1;
    }

    public void setZahl1(int zahl1)
    {
        this.zahl1 = zahl1;
    }

    @Override
    public String toString()
    {
        return String.format("%d", zahl1);
    }

} 
```

```
package com.example.to_doliste2;

import java.util.ArrayList;
import java.util.List;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;

public class VerlaufDataSource {

    private SQLiteDatabase database;
    private MySQLHelper dbHelper;
    private String[] allColumns = {"ZAHL1"};

    public VerlaufDataSource(Context context)
    {
        dbHelper = new MySQLHelper(context);
    }

    public void open() throws SQLException
    {
        database = dbHelper.getWritableDatabase();
    }

    public void close()
    {
        dbHelper.close();
    }

    public Entry createEntry(String zahl1)
    {
        ContentValues values = new ContentValues();
        values.put("ZAHL1", zahl1);

        long insertId = database.insert("Verlauf", null, values);

        Cursor cursor = database.query("Verlauf", allColumns, "ID = " + insertId, null, null, null, null);
        cursor.moveToFirst();

        return cursorToEntry(cursor);

    }

    protected List<Entry> getAllEntries()
    {
        List<Entry> EntriesList = new ArrayList<Entry>();
        EntriesList = new ArrayList<Entry>();

        Cursor cursor = database.query("Verlauf", allColumns, "ID =" , null, null, null, null, null);
        cursor.moveToFirst();

        if(cursor.getCount() == 0) return EntriesList;

        while (cursor.isAfterLast()==false)
        {
            Entry entry = cursorToEntry(cursor);
            EntriesList.add(entry);
            cursor.moveToNext();
        }

        cursor.close();

        return EntriesList;
    }

    private Entry cursorToEntry(Cursor cursor)
    {
        Entry entry = new Entry();
        entry.setZahl1(cursor.getInt(1));

        return entry;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T13:52:14.283

如果您要从数据库中检索所有列，则将查询更改为：

```
 Cursor cursor = database.query("Verlauf", 
                           allColumns, null, null, null, null, null); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T14:21:40.013

首先，把`cursor.getInt(1)`里面`VerlaufDataSource.cursorToEntry(Cursor)`改成`cursor.getInt(0)`，因为计数是从0开始的，而你只查询了一列（`allColumns == { "ZAHL1" }`）。

其次，正如上面提到的 ρяσѕρєя K，`"ID ="`在 中不是正确的 WHERE 子句`VerlaufDataSource.getAllEntries()`。`null`如果您想要所有列，请将其更改为。

# android - Wowza 直播网址

> ID：14041341
> 
> 赞同：0
> 
> 时间：2012-12-26T13:35:47.987
> 
> 标签：android, ios, live-streaming, wowza

我已经下载并配置了Wowza媒体流服务器，还安装了Flash媒体编码器进行直播，但是我在理解URL结构时遇到了问题，有人可以调整如何配置URL吗？

问候，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-10T07:34:09.153

在这里查看[https://www.wowza.com/docs/how-to-set-up-live-streaming-using-an-rtmp-based-encoder](https://www.wowza.com/docs/how-to-set-up-live-streaming-using-an-rtmp-based-encoder)

本教程介绍如何设置直播以在 PC、Android、Ios、机顶盒等终端设备中播放流

如果您使用的是 Adob​​e Flash Media Live Encoder，则需要在其中指定 wowza 服务器地址和流参数。

示例：在 AFMLE 中，在输出部分

```
url : rtmp://Wowza-media-server-ip-address:1935/live
stream : myStream 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T13:11:26.970

如果您的应用程序是视频点播 (vod)、内容类型为 mp4 且文件为 sample.mp4，则

`rtmp://[server_ip_address:port]/vod/mp4:sample.mp4`

# c++ - linux voip 库

> ID：14041342
> 
> 赞同：0
> 
> 时间：2012-12-26T13:35:48.107
> 
> 标签：c++, linux, voip

有人可以为 Linux 推荐免费的 VoIP 库（C/C++）吗？我发现的所有库都已过时，无法在我的 Ubuntu 12.10 机器上编译。我尝试过 OPAL、Sofia、PJ - 什么都做不了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T13:44:12.063

好吧，我已经让 PJ 在 Ubuntu 10.04 和 12.04（32 位）上编译和运行。还有 Linphone 和 GStreamer。我猜你的环境需要清理或一些额外的东西。尤其是 Liknphone，使用最前沿的软件包进行了几次升级。

所以，请选择一个并编译它并告诉我们会发生什么。将配置脚本的日志附加到您的回复中可能是件好事。也许，还有，你在配置之后运行的 make 的输出，

# ruby - 如何改进这个 ruby 代码更惯用？

> ID：14041347
> 
> 赞同：1
> 
> 时间：2012-12-26T13:36:10.273
> 
> 标签：ruby

由于下面的代码看起来很老旧且丑陋。但是在玩这种方式之后只是工作。

```
def duplicated? url
  found = false
  current_user.bookmarks.each do |bookmark|
    if bookmark.url.eql? url
      found = true
    end
  end
  found
end 
```

我消除了找到的本地 var 和这样的 if 语句

```
def duplicated? url
  current_user.bookmarks.each do |bookmark|
    bookmark.url.eql? url
  end
end 
```

它返回错误的预期结果。

知道如何改进吗？谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-26T13:37:53.320

我认为您需要[Enumerable#any？](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-any-3F)这里。应该首选映射/包含对，因为它不会创建临时数组，并且会在找到的第一个元素上尽早返回。

```
def duplicated? url
  current_user.bookmarks.any?{|b| b.url.eql? url }
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T13:44:42.290

```
def duplicated?(url)
   current_user.bookmarks.map{|bm| bm.url}.include?(url)
end 
```

# unix - 如何仅反转字符串而不是一行中的数字和特殊字符

> ID：14041353
> 
> 赞同：1
> 
> 时间：2012-12-26T13:37:06.897
> 
> 标签：unix, sed

我想使用`sed`. 但是，我希望表达式不要颠倒数字和特殊字符。

例如，考虑以下输入：

```
112358 is a fibonacci sequence...
a test line
124816 1392781
final line... 
```

我的预期输出是：

```
112358 si a iccanobif ecneuqes...
a tset enil
124816 1392781
lanif enil... 
```

我已经以多种方式尝试过，但我找不到确切的表达方式。我尝试了以下表达式，但它反转了整个字符串：

```
sed '/\n/!G;s/\([.]\)\(.*\n\)/&\2\1/;//D;s/.//' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T15:51:15.317

这个 sed 脚本将完成这项工作：

```
#!/usr/bin/sed

# Put a \n in front of the line and goto begin.
s/^/\n/
bbegin

# Marker for the loop.
:begin

# If after \n is a lower case sequence, copy its last char before \n and loop.
s/\n\([a-z]*\)\([a-z]\)/\2\n\1/
tbegin

# If after \n is not a lower case sequence, copy it before \n and loop.
s/\n\([^a-z]*[^a-z]\)/\1\n/
tbegin

# Here, no more chars after \n, simply remove it before printing the new line.
s/\n// 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-26T16:02:01.257

我会用`Perl`这个。代码更具可读性：

```
perl -pe 's/\b([A-Za-z]+)\b/reverse($1)/ge' file 
```

结果：

```
112358 si a iccanobif ecneuqes...
a tset enil
124816 1392781
lanif enil... 
```

# ios - 具有根视图的多个主详细信息 - iOS

> ID：14041355
> 
> 赞同：-2
> 
> 时间：2012-12-26T13:37:10.117
> 
> 标签：ios, master-detail, uistoryboardsegue, rootview

我有一个主从应用程序。主场景是一个表格视图，细节是一个带有一些文本的简单视图控制器。

但是，我希望拥有多个主详细信息（每个主题一个）和一个带有图像/按钮的主页。当我单击其中一个时，我想转移到相应的主从。

我在情节提要中添加了一个视图控制器（称为 A），将根视图更改为 A，在 A 中添加了一个按钮，并从该按钮添加了一个 push segue 到主场景（ctrl+drag）。但是当我运行它时，这似乎不起作用。

有任何想法吗？谢谢

我想通了 - 我正在使用

```
UINavigationController * navController = (UINavigationController *) self.window.rootViewController;

MasterViewController * masterController = [navController.viewControllers objectAtIndex:0]; 
```

并且索引 0 处的对象不再是主视图控制器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T13:43:06.533

要拥有多个“主细节”，您需要使用`UINavigationControllers`. 首先确保您的 A 控制器位于导航控制器内，如果它仍然无法正常工作，请检查情节提要，因为可能存在一些错误或未链接的内容

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T20:03:22.757

我认为使用 UITabBarController 作为根视图控制器可能会更好。第一个选项卡可以包含您的主页控制器，其他选项卡将包含 UINavigationControllers，主控制器作为它们的根视图控制器。

# java - 使用逻辑运算符计算闰年

> ID：14041356
> 
> 赞同：0
> 
> 时间：2012-12-26T13:37:11.243
> 
> 标签：java

有人可以解释 if 语句的条件吗？我知道什么`&&`和做什么`||`，但现在我不明白它是如何正确计算的。我侥幸弄对了，我只是想了解它为什么会这样做。

```
import java.util.Scanner;

public class LeapYear {

    public static void main(String[] args) {
        Scanner lukija = new Scanner(System.in);

        System.out.print("Give year: ");
        int year = Integer.parseInt(lukija.nextLine());
        if (year % 4 == 0 && ( year % 100 != 0 || year % 400 == 0 ) ) { 
            System.out.println("Year is leap year");
        } else {
            System.out.println("Year is not a leap year..");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T13:45:54.150

第一部分`if`

```
 //this one----//
if (year % 4 == 0 && ( year % 100 != 0 || year % 400 == 0 ) ) 
```

确定年份是否实际上是闰年。它们在四年后每年都会发生，这就是为什么第一次检查验证将年份除以 4 的模数为零的原因。

然后，第二部分每 100 年（不是闰年）测试类似的东西

```
 //Here ---------//
if (year % 4 == 0 && ( year % 100 != 0 || year % 400 == 0 ) ) 
```

每 400 年例外，那一年实际上是闰年。

```
 //Here --------//
if (year % 4 == 0 && ( year % 100 != 0 || year % 400 == 0 ) ) 
```

长话短说，这条语句定义了`year`当它可以被 4 整除但不能被 100 整除时，该变量代表闰年，除非它也能被 400 整除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T13:45:09.130

```
year % 4 == 0 && ( year % 100 != 0 || year % 400 == 0 ) 
```

`year % k ==0`表示年份可以被 k 整除。

此处，评估遵循短路方法

在 `A && B`中，仅当 A 评估为真时才评估 B，否则不评估 B

在`A || B`中，仅当 A 为假时才会评估 B，否则无论 A 的结果如何，结果都会为真。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T13:45:01.183

如果你使用`m % n == 0`它的意思是，`m`可以被 整除`n`。其余的遵循公历的定义，即每 4 年（精确倍数），但不是每 100 年，除非它是每 400 年。例如，2000 年是闰年。2100不会。

这为您提供了平均 365.2425 天的一年。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T13:45:14.433

```
// divisible by 4
isLeapYear = (year % 4 == 0);

// divisible by 4 and (divisible by not 100 or divisible by 400 (any one should be true))
isLeapYear = isLeapYear && (year % 100 != 0 || year % 400 == 0); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-26T13:46:27.037

[这是来自维基百科](http://en.wikipedia.org/wiki/Leap_year#Algorithm)的闰年计算算法的伪代码：

```
if year modulo 400 is 0 then
   is_leap_year
else if year modulo 100 is 0 then
   not_leap_year
else if year modulo 4 is 0 then
   is_leap_year
else
   not_leap_year 
```

`&&`条件是仅使用 java和运算符在一行中执行算法`||`并正确分组操作数

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-26T13:47:21.903

[闰年](http://en.wikipedia.org/wiki/Leap_year)是任何可以除以除以除以除以除以除以除以除以除以除以之外`4`的任何年。这里使用模算术来检查测试年份是否均匀地分为这两个数字。`100``400`

# android - 额外内容似乎丢失 onResume()

> ID：14041362
> 
> 赞同：3
> 
> 时间：2012-12-26T13:37:30.583
> 
> 标签：android, android-intent, android-activity, extra

我有一个 Intent，它通过一个长的 Extra 从我的数据库中获取信息。它还`Activity`通过 a设置标题`String Extra`。

现在，当我第一次启动 Activity 时，一切都显示得很完美。但是，我有另一个 Activity 用于添加新的数据库项目。问题是，当我按下后退按钮（操作栏中的标志，旁边有一个箭头），回到原来的 Activity 时，似乎 Extras 已经消失了，因为标题`ListView`是空的。

这是启动时显示 ListView 没有问题的 Activity：

```
DaysActivity.java:

package com.gauvion.gfit;

import android.annotation.SuppressLint;
import android.app.ListActivity;
import android.content.Intent;
import android.database.Cursor;
import android.os.Bundle;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.widget.SimpleCursorAdapter;
import android.widget.Toast;

public class DaysActivity extends ListActivity {

    private DaysDataSource datasource;
    private SimpleCursorAdapter dataAdapter;
    private boolean isEditing = false;
    private Toast toast_deleted;
    private String[] columns = new String[] { MySQLiteHelper.COLUMN_NAME, MySQLiteHelper.COLUMN_DAY };
    private int[] to;
    private long routineDataID;
    private String routineDataName;

    @SuppressLint("ShowToast")
    @Override
    public void onCreate(Bundle savedInstanceState) {       
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_days);
        routineDataID = getIntent().getLongExtra("routineDataID", 1);
        routineDataName = getIntent().getStringExtra("routineDataName");
        setTitle(routineDataName);

        toast_deleted = Toast.makeText(this, "", Toast.LENGTH_SHORT);
        datasource = new DaysDataSource(this);
        datasource.open();

        Cursor cursor = datasource.fetchAllDays(routineDataID);
        to = new int[] { R.id.listitem_day_name, R.id.listitem_day_day };
        dataAdapter = new SimpleCursorAdapter(this, R.layout.listitem_day, cursor, columns, to, 0);
        setListAdapter(dataAdapter);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {     
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.activity_days, menu);
        return true;        
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {     
        Cursor cursor = datasource.fetchAllDays(routineDataID);
        switch (item.getItemId()) {
            case R.id.button_days_add:
                Intent startDayAdd = new Intent(this, DayAddActivity.class);
                startDayAdd.putExtra("routineDataID", routineDataID);
                this.startActivity(startDayAdd);
                return true;

            case R.id.button_days_edit:
                to = new int[] { R.id.listitem_day_edit_name, R.id.listitem_day_edit_day };
                dataAdapter = new SimpleCursorAdapter(this, R.layout.listitem_day_edit, cursor, columns, to, 0);
                setListAdapter(dataAdapter);

                isEditing = true;
                invalidateOptionsMenu();
                return true;

            case R.id.button_days_edit_done:
                to = new int[] { R.id.listitem_day_name, R.id.listitem_day_day };
                dataAdapter = new SimpleCursorAdapter(this, R.layout.listitem_day, cursor, columns, to, 0);
                setListAdapter(dataAdapter);

                isEditing = false;
                invalidateOptionsMenu();
                return true;

            default:
                return super.onOptionsItemSelected(item);
        }
    }

    @Override
    public boolean onPrepareOptionsMenu(Menu menu) {
        super.onPrepareOptionsMenu(menu);

        menu.findItem(R.id.button_days_edit).setVisible(!isEditing);
        menu.findItem(R.id.button_days_edit_done).setVisible(isEditing);

        return true;
    }

    @Override
    protected void onResume() {
        datasource.open();
        Cursor cursor = datasource.fetchAllDays(routineDataID);
        dataAdapter.changeCursor(cursor);

        super.onResume();
    }

    @Override
    protected void onPause() {
        datasource.close();
        super.onPause();
    }

    @Override
    public void onSaveInstanceState(Bundle savedInstanceState) {
      super.onSaveInstanceState(savedInstanceState);

      savedInstanceState.putLong("routineDataID", routineDataID);
      savedInstanceState.putString("routineDataName", routineDataName);
    }

    @Override
    public void onRestoreInstanceState(Bundle savedInstanceState) {
      super.onRestoreInstanceState(savedInstanceState);

      routineDataID = savedInstanceState.getLong("routineDataID");
      routineDataName = savedInstanceState.getString("routineDataName");
    }

} 
```

如您所见，我什至尝试过使用`onSaveInstanceState()`and `onRestoreInstanceState()`。也许我没有正确使用它们？

这是我将用来添加新日子的活动：

DayAddActivity.java:

```
package com.gauvion.gfit;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.MenuItem;
import android.support.v4.app.NavUtils;

public class DayAddActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_day_add);
        getActionBar().setDisplayHomeAsUpEnabled(true);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_day_add, menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        case android.R.id.home:
            NavUtils.navigateUpFromSameTask(this);
            return true;
        }
        return super.onOptionsItemSelected(item);
    }

} 
```

它现在什么也没做。但是就像我说的，当我单击后退按钮（操作栏中的徽标）时，它会返回 DaysActivity 但标题和 ListView 是空的。DayAddActivity 的分层父级是 DaysActivity。

`DayAddActivity`将有一个“保存”按钮，它将向数据库添加新的一天，然后`finish()`. 我假设如果我现在不解决这个问题，我会再次遇到这个问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-26T13:42:14.980

你几乎做对了。您在`onSaveInstanceState()`活动结束时放入的所有内容都必须在方法`Activity`内部的新实例中获得`onCreate()`。

你应该有类似的东西：

```
@SuppressLint("ShowToast")
@Override
public void onCreate(Bundle savedInstanceState) {       
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_days);

    Bundle bundle = savedInstanceState != null ? savedInstanceState : getIntent().getExtras();
    routineDataID = bundle.getLongExtra("routineDataID", 1);
    routineDataName = bundle.getStringExtra("routineDataName");
    setTitle(routineDataName);

    //other stuff
} 
```

所以，是的，基本上该`getIntent()`方法在首次显示您的`Activity`. 之后，您将获得您保存的额外内容`onSaveInstanceState()`。

# html - 基于Rails嵌套形式的模型属性分配dom id

> ID：14041368
> 
> 赞同：0
> 
> 时间：2012-12-26T13:37:46.967
> 
> 标签：html, ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.2

我有一个嵌套表格。现在我想用一些 CSS 来安排布局，但是我在为表单分配 dom id 时遇到了麻烦。

这是主题控制器。我想将第 5 行中看到的课程类型分配为 dom id。

```
 1 def index
 2   @subjects = Subject.all
 3   @subject = Subject.new

 4   lecture = @subject.lessons.build
 5   lecture.lesson_type = "lecture"
    lecture.lesson_groups.build
    lecture.destroy

    tutorial = @subject.lessons.build
    tutorial.lesson_type = "tutorial"
    tutorial.lesson_groups.build
    tutorial.destroy

    laboratory = @subject.lessons.build
    laboratory.lesson_type = "laboratory"
    laboratory.lesson_groups.build
    laboratory.destroy

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @subjects }
      format.js
    end
  end 
```

以下是表格。

```
<%= nested_form_for(@subject, :remote=>true) do |f| %>
  <% if @subject.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@subject.errors.count, "error") %> prohibited this subject from being saved:</h2>

      <ul>
      <% @subject.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <%= f.label :subject_code %><br />
    <%= f.text_field :subject_code %>
  </div>

  <%= f.fields_for :lessons do |lesson| %>

     <%= lesson.label :lesson_type %><br/>
     <%= lesson.text_field :lesson_type, :readonly=>true%><br/>
     <%= lesson.label :name %><br/>
     <%= lesson.text_field :name %><br/>

  <%= lesson.fields_for :lesson_groups do |lesson_group| %>

       <%= lesson_group.label :group_index %><br/>
       <%= lesson_group.text_field :group_index %>
       <%= lesson_group.link_to_remove "Remove this task" %>

  <% end %> 
```

这是我要添加 id 的 div。

```
 <%= f.fields_for :lessons do |lesson| %>
     <%= lesson.label :lesson_type %><br/>
     <%= lesson.text_field :lesson_type, :readonly=>true%><br/>
     <%= lesson.label :name %><br/>
     <%= lesson.text_field :name %><br/> 
```

我尝试了以下方法，但没有奏效。

```
<div id = "<%= :lesson_type%>"> 
```

如果有人可以帮助我，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T16:28:01.690

对不起..

```
#controller

def index
  ...
  lecture.lesson_type = @lesson_dom_id = "lecture" # line 5
  ...
end

#view
<div id="<%= @lesson_dom_id %>"> 
```

# c# - 使用枚举在数据模板中绑定组合框

> ID：14041369
> 
> 赞同：0
> 
> 时间：2012-12-26T13:37:51.153
> 
> 标签：c#, xaml, windows-runtime

我有一个包含文本框和组合框的列表项数据模板。

我有两种方式将文本框数据绑定到列表项中的公共字符串属性，但我希望能够将组合框绑定到枚举并在组合框项中显示它们的公共友好版本并保持双向绑定能力。

我对数据绑定的整个概念和 MVVM 的组件仍然很陌生，但我很快就学会了。我环顾四周寻找类似的请求，但找不到合适的答案或任何我能理解/操纵的东西才能正常工作。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T16:00:34.890

这篇[博文](http://blogs.u2u.be/diederik/post/2011/12/27/Databinding-to-an-enumeration-in-WinRT.aspx)应该可以帮到你！实际上，您需要一个枚举转换器。

要将枚举转换为列表，请使用以下代码：-

```
var colors = typeof(Colors).GetTypeInfo().DeclaredProperties;
foreach (var item in colors)
{
   cbBorderColor.Items.Add(item);
} 
```

# php - 检查用户是否存在

> ID：14041372
> 
> 赞同：6
> 
> 时间：2012-12-26T13:38:04.193
> 
> 标签：php, jquery, mysql, cordova, pdo

> **可能重复：**
> [Phonegap - 根据用户 ID 从数据库加载值](https://stackoverflow.com/questions/14024815/phonegap-load-values-from-database-based-on-a-user-id)

我正在创建一个需要用户注册的 Phonegap 应用程序。我通过 PHP 脚本作为 MySQL 数据库的 Web 服务并使用 AJAX POST/Get 方法来执行此操作。

出于某种原因，LogCat 总是给我`"There was an error"`（属于帖子的错误功能）。

**更新：** 从 MySQL 的日志中我收到此错误：
PHP 致命错误：调用`bindValue()`非对象上的成员函数
它指向这一行：`$username = $_POST['username']`;

这是我的 JS 代码片段：

```
var u = $("#username").val();    
var p = $("#password").val();

var userRegData = $('#registration').serialize();

$.ajax({
  type: 'POST',
  data: userRegData,
  dataType: 'JSONp',
  url: 'http://www.somedomain.com/php/userregistration.php',
  success: function(data){   
      if(response==1){
          // User can be saved
      } else {
          // User exsts already 
      }
  },
  error: function(e){
      console.log('There was an error');
      $.mobile.loading ('hide'); 
  }
}); 
return false; 
```

这是我的 PHP 代码片段。我正在使用 PDO。

```
$db = new PDO('mysql:host=' . $config['db']['host'] . ';dbname=' . $config['db']['dbname'], $config['db']['username'], $config['db']['password']);
$db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

$username = $_POST['username'];
$password = $_POST['password'];
$query->bindValue(':username', $username, PDO::PARAM_STR);
$query->bindValue(':password', $password, PDO::PARAM_STR);

try {

$db->beginTransaction();

$db->query("SELECT `user`.`Username` FROM `user` WHERE `user`.`Username` = :username LIMIT 1");
try {
    if ( $query->rowCount() > 0 ) {
        $response=1;
        echo $response;
    }
    else {
        $response=0;
        $db->query("INSERT INTO `user` (`user`.`Username`, `user`.`Password`) VALUES :username, :password");
        echo $response; 
        $db->commit();  
    }
} catch (PDOException $e) {
    die ($e->getMessage());
}

} catch (PDOException $e) {
    $db->rollBack();
    die ($e->getMessage());
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T15:45:43.913

它应该像

您的**HTML 页面**

```
<html>
    <body>
        <script>
            function checkIfUserCanBeSaved(){
                var userRegData = $('#registration').serialize();

                $.ajax({
                  type: 'POST',
                  data: userRegData,
                  url: 'http://www.somedomain.com/php/userregistration.php',
                  success: function(data){   
                      if(response==1){
                          alert('user found');
                      } else {
                          alert('user saved')
                      }
                  },
                  error: function(e){
                      console.log('There was an error');
                      $.mobile.loading ('hide');
                  }
                });
                return false;
            }
        </script>
        <form id="registration">
            <input type="text" name="username">
            <input type="text" name="password">
            <input type="button" onclick="checkIfUserCanBeSaved()" value="submit">
        </form>
    </body>
</html> 
```

您的**PHP 页面**

```
$db = new PDO('mysql:host=' . $config['db']['host'] . ';dbname=' . $config['db']['dbname'], $config['db']['username'], $config['db']['password']);
$db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

$username = $_POST['username'];
$password = $_POST['password'];

try {

$db->beginTransaction();

try {

     $query = $db->prepare("SELECT user.Username FROM user WHERE user.Username = :username LIMIT 1");
     $query->bindValue(':username', $username, PDO::PARAM_STR);
     $query->execute();

    if ( $query->rowCount() > 0 ) {
        $response=1;
        echo $response;
    }
    else {
        $response=0;
        $query = $db->prepare("INSERT INTO user ( username, password ) VALUES ( :username, :password )" );
        $query->bindValue(':username', $username, PDO::PARAM_STR);
        $query->bindValue(':password', $password, PDO::PARAM_STR);
        $query->execute();
        echo $response; 
        $db->commit();  
    }
} catch (PDOException $e) {
    die ($e->getMessage());
}

} catch (PDOException $e) {
    $db->rollBack();
    die ($e->getMessage());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T16:11:14.390

这里有两个基本问题：你不了解 JSONP 的局限性，以及你错误地使用了 PDO。

# PDO

PDO 的使用有几种模式。（为了清晰和代码重用，您可以抽象这些模式，但从根本上说，您必须按此顺序使用对象。）

## 简单查询

```
// 1\. Get a database handle
$dh = new PDO($DSN, $USERNAME, $PASSWORD, array(PDO::ATTR_ERRMODE=>PDO::ERRMODE_EXCEPTION));

// 2\. Issue a string query, no bindings!
$cursor = $dh->query('SELECT 1');

// 3\. read results. There are many ways to do this:
// 3a. Iteration
foreach ($cursor as $row) {
    //...
}

// 3b. *fetch*
// You can use any one of multiple fetch modes:
// http://php.net/manual/en/pdostatement.fetch.php
while ($row = $cursor->fetch()) {
    //...
}

// 3c. *fetchAll*
//     *fetchAll* can also do some aggregation across all rows:
//     http://php.net/manual/en/pdostatement.fetchall.php
$results = $cursor->fetchAll();

// 3d. *bindColumn*
$cursor->bindColumn(1, $id, PDO::PARAM_INT);
while ($cursor->fetch(PDO::FETCH_BOUND)) {
    //$id == column 1 for this row.
}

// 4\. close your cursor
$cursor->closeCursor(); 
```

## 准备好的报表

```
// 1\. Get a database handle
$dh = new PDO($DSN, $USERNAME, $PASSWORD, array(PDO::ATTR_ERRMODE=>PDO::ERRMODE_EXCEPTION));

// 2\. Prepare a statement, with bindings
$cursor = $dh->prepare('SELECT id, name FROM mytable WHERE name = :name');

// 3\. Bind parameters to the statement. There are three ways to do this:
// 3a. via *execute*:
$cursor->execute(array(':name'=>$_GET['name']));

// 3b. via *bindValue*
$cursor->bindValue(':name', $_GET['name']);

// 3c. via *bindParam*. In this case the cursor receives a *reference*.
$name = 'name1';
$cursor->bindParam(':name', $name); // name sent to DB is 'name1'
$name = 'name2'; // name sent to DB is now 'name2'!
$name = 'name3'; // now it's 'name3'!

// 4\. Execute the statement
$cursor->execute();

// 5\. Read the results
//    You can use any of the methods shown above.

foreach ($cursor as $row) { // Iteration
    // ...
}

// 6\. Don't forget to close your cursor!
//    You can execute() it again if you want, but you must close it first.

$cursor->closeCursor(); 
```

# JSONP

您的代码还有许多其他问题似乎归结为您不清楚浏览器和服务器之间的线路上传输的内容。

JSONP 是一种绕过浏览器对跨域请求的限制的技术。它通过向`script`当前页面添加一个带有 url 和`callback=`查询参数的元素来工作。服务器使用 JSON 准备响应，然后将回调字符串包装在 JSON 周围，将响应转换为函数调用。

例子：

函数 doSomething(response) { response.name === 'bob'; response.callback === 'doSomething'; }

在服务器上：

```
header('Content-Type: text/javascript;charset=utf-8'); // NOT application/json!
echo $_GET['callback'], '(', $json_encode($_GET), ')'; 
```

回到浏览器，它返回的脚本是：

```
doSomething({"name":"bob","callback","doSomething"}) 
```

如您所见，JSONP 从根本上说是一种 hack。它不使用 XMLHttpRequest。jQuery 在其函数中做了一些事情来伪造它`$.ajax()`，但它仍然存在无法逃脱的限制：

*   唯一可能的方法是 GET（无 POST），因为它就是这样`script src=`做的。
*   将数据传递到服务器的唯一方法是通过查询字符串。
*   您的响应“回调”必须可从全局范围访问。
*   这是一个巨大的安全漏洞。*您必须完全*信任终端服务器，因为它可以输出*它想要的任何脚本*。

如果可能，请使用[CORS](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)而不是 JSONP。

# 建议的解决方案

这是一种**未经测试**的、建议的方式来做你想做的事。

一些注意事项：

*   注册网址是[http://example.org/register](http://example.org/register)。它总是返回 JSON，即使是错误的（你可以改变它）。它还发出 CORS 标头，因此您可以使用来自其他域的 XHR POST 到它。
*   服务器代码有一点抽象：
    *   `serviceRegisterRequest()`是执行 URL 操作的主要功能。它说明了如何使用 PDO 进行适当的异常处理。它返回 HTTP 响应的抽象。
    *   `userExists()`并`createUser()`展示如何使用 PDO 准备好的语句。
    *   `createUser()`说明正确使用该[`crypt()`方法](http://php.net/manual/en/function.crypt.php)来加密您的密码。（不要存储明文密码！）
    *   `emitResponse()`展示了如何设置 CORS 标头以及如何生成 JSON 输出。

在浏览器上，[http://example.COM/register](http://example.COM/register)：

```
<!DOCTYPE html>
<html>
<head>
<title>test registration</title>
<script src="http://code.jquery.com/jquery-1.8.3.min.js"></script>
</head>
<body>
    <form id="theform">
        <input name="u">
        <input name="p" type="password">
    </form>
    <script>
        $('#theform').submit(function(e){
            $.ajax({
                url: 'http://example.org/register',
                type: 'POST',
                data: $(e.target).serialize()
            }).done(function(response){
                console.log('SUCCESS: ');
                console.log(response);
            }).fail(function(jqXHR, textStatus){
                console.log('FAILURE: ');
                if (jqXHR.responseText) {
                    console.log(JSON.parse(jqXHR.responseText));
                }
            });
        });
    </script>
</body> 
```

在服务器上：

```
function userExists($dbh, $name) {
    $ps = $dbh->prepare('SELECT id, Username FROM user WHERE Username = ?');
    $ps->execute(array($name));
    $user = $ps->fetch(PDO::FETCH_ASSOC);
    $ps->closeCursor();
    return $user;
}

function createUser($dbh, $name, $pass, $salt) {
    $ps = $dbh->prepare('INSERT INTO user (Username, Password) VALUES (?,?)';
    $crypt_pass = crypt($pass, $salt);
    $ps->execute(array($name, $crypt_pass));
    $user_id = $dbh->lastInsertId();
    $ps->closeCursor();
    return array('id'=>$user_id, 'name'=>$name);
}

function serviceRegisterRequest($method, $data, $salt, $DBSETTINGS) {

if ($method==='POST') {
    $dbh = new PDO($DBSETTINGS['dsn'],$DBSETTINGS['username'],$DBSETTINGS['password']);
    $dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

    $response = array('status'=>200,'header'=>array(),'body'=>array());

    $dbh->beginTransaction(); // if using MySQL, make sure you are using InnoDB tables!
    try {
       $user = userExists($dbh, $data['u']);
       if ($user) {
          $response['status'] = 409; // conflict
          $response['body'] = array(
            'error' => 'User exists',
            'data'  => $user,
          );
       } else {
          $user = createUser($dbh, $data['u'], $data['p'], $salt);
          $response['status'] = 201; //created
          $response['header'][] = "Location: http://example.org/users/{$user['id']}";
          $response['body'] = array(
             'success' => 'User created',
             'data'    => $user,
          );
       }
       $dbh->commit();
    } catch (PDOException $e) {
       $dbh->rollBack();
       $response['status'] = 500;
       $response['body'] = array(
          'error' => 'Database error',
          'data'  => $e->errorInfo(),
       );
    } catch (Exception $e) {
       $dbh->rollBack();
       throw $e;  // rethrow errors we don't know about
    }
    return $response;

}

}

function emitResponse($response) {
    // restrict allowed origins further if you can
    header('Access-Control-Allow-Origin: *');
    header('Access-Control-Allow-Methods: POST');
    foreach ($response['header'] as $header) {
        header($header);
    }
    header('Content-Type: application/json', true, $response['status']);
    $output = json_encode($response['body']);
    header('Content-Length: '.strlen($output));
    echo $output;
    exit();
}

$DBSETTINGS = array(
    'dsn'=>'mysql:...',
    'username' => 'USERNAME',
    'password' => 'PASSWORD',
);
$salt = '$6$rounds=5000$MyCr4zyR2nd0m5tr1n9$';

$response = serviceRegisterRequest($_SERVER['REQUEST_METHOD'], $_POST, $salt, $DBSETTINGS);
emitResponse($response); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T14:25:55.557

serialize 方法只是将您的变量转换为 JSON 数组，我假设您没有给出输入名称。所以你应该把名字放在你的 html 中是这样的：

```
<form id="registration">
    <input type="text" name="username" ... 
    <input type="password" name="password" ... 
```

现在，当您运行代码时，userRegData 将类似于：

```
username=value_in_username_input&password=value_in_password_input 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T15:32:57.897

这应该更有帮助，您还需要修改您的 sql。问题是您使用了两种不同的查询方法。绑定参数需要使用 Prepare 语句。

```
$username = $_POST['username'];
$password = $_POST['password'];
//new query
$query = $db->prepare("SELECT `user`.`Username` FROM `user` WHERE `user`.`Username` = :username LIMIT 1");
// since you're only using one argument, the password in the prior query I did not bind this here.
$query->bindParam(':username' PDO::PARAM_STR);

try {

$db->execute(); 
```

# c# - ConcurrentQueue 的内存泄漏

> ID：14041373
> 
> 赞同：9
> 
> 时间：2012-12-26T13:38:05.740
> 
> 标签：c#, memory-leaks

使用时出现内存泄漏`ConcurrentQueue`：

```
requestObject request = xxx;

Item obj= new Item ();
obj.MessageReceived += obj_MessageReceived;
obj.Exited += obj_Exited;

request.Key = obj.Key;

obj.AddRequest(request);

_queue.TryAdd(obj.Key, obj); 
```

在“退出”回调中，我处理资源：

```
void LiveSphere_Exited(string key)
{
    Item instance;

    _queue.TryRemove(key, out instance);

    Task.Factory.StartNew(() =>
    {
        var wait = new SpinWait();
        while (instance.MessageCount > 0)
        {
            wait.SpinOnce();
        }
    })
    .ContinueWith((t) =>
    {
         if (instance != null)
         {
             //Cleanup resources
             instance.MessageReceived -= obj_MessageReceived;
             instance.Exited -= obj_Exited;
             instance.Dispose();
             instance = null;
         }
    });
} 
```

当我分析代码时，我仍然有一个根引用的“Item”对象，但我不知道我可以在哪里处理......，退出的方法被触发并且_queue 已经从队列中删除了“Item”对象。

当我阅读文档时，并发队列将引用复制到队列中。

你能帮我找出内存泄漏在哪里吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T14:46:27.707

与标准 .NET 队列不同，调用 Dequeue() 不会从集合中删除对对象的引用。虽然此行为已从 4.0 版本更改为 4.5 版本（我已阅读此内容，但尚未对其进行测试），但它不是错误，而是框架团队在设计线程安全时做出的有意识的设计决定，可枚举的集合。

[本文](http://blogs.msdn.com/b/pfxteam/archive/2012/05/08/concurrentqueue-lt-t-gt-holding-on-to-a-few-dequeued-elements.aspx)包含更多信息，包括使用 StrongBox 包装进入 ConcurrentQueue 的对象的解决方法。在您可以迁移到 4.5 框架之前，这应该是一个合适的解决方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-12-16T16:07:10.627

我看过并发队列的实现。在某些情况下，队列将在调用 Dequeue() 后保存对对象的引用。

并发队列使用 Segments 来存储数据。它是该段的 TryRemove 方法的一部分：

```
// If there is no other thread taking snapshot (GetEnumerator(), ToList(), etc), reset the deleted entry to null.
// It is ok if after this conditional check m_numSnapshotTakers becomes > 0, because new snapshots won't include 
// the deleted entry at m_array[lowLocal]. 
if (m_source.m_numSnapshotTakers <= 0)
{
    m_array[lowLocal] = default(T); //release the reference to the object. 
} 
```

因此，当您有一个不同的线程同时枚举队列时，您将一个对象出队，对该对象的引用将不会被设置为 null。

# php - Symfony 1.4，基于模型的表单，我不需要一些小部件

> ID：14041376
> 
> 赞同：0
> 
> 时间：2012-12-26T13:38:32.123
> 
> 标签：php, symfony-1.4

在 Symfony 1.4 中，我使用基于模型的表单。但是我必须验证一些小部件/字段。我找不到`removeWidget()`或类似的东西，如何删除一些不被检查/验证的字段？

编辑：baseForm

```
$this->setWidgets(array(
  'f1'          => new sfWidgetFormInputHidden(),
  'f2'  => new sfWidgetFormInputText(),
  'f3'    => sfWidgetFormInputText()
));

$this->setValidators(array(
  'f1'          => new sfValidatorChoice(array('choices' => array($this->getObject()->get('ID')), 'empty_value' => $this->getObject()->get('ID'), 'required' => false)),
  'f2'  => new sfValidatorInteger(),
  'f3'    => new sfValidatorInteger()
));
$this->widgetSchema->setNameFormat('task[%s]');
$this->errorSchema = new sfValidatorErrorSchema($this->validatorSchema);
$this->setupInheritance();
parent::setup(); 
```

现在我必须以某种方式编辑该`configure()`方法，以便验证器不会检查“f1”字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T20:06:16.867

首先你不需要编辑 BaseForm 类。

你（们）能做到：

```
 $this->validatorSchema['widget_name'] = new sfValidatorPass(); 
```

或者例如，每个小部件都有**“必需”选项**

字符串小部件：

```
$this->validatorSchema['widget_name'] = new sfValidatorString(array('required' => false)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T15:13:39.553

您可以简单地从表单中取消设置小部件

```
class XYZForm extends BaseXYZForm
{
    public function configure()
    {
       //....
       unset($this['unwanted_widget']);
    }
} 
```

# php - php date('d') 连续两天计算相同的输出

> ID：14041380
> 
> 赞同：1
> 
> 时间：2012-12-26T13:38:45.497
> 
> 标签：php, date, mktime

我正在通过 PHP 构建一个日历，而我这样做的方式在某些日子里会被写两次。

我复制了这个小脚本中的行为：

```
<?php
//
// define a date to start from
//
$d = 26;
$m = 10;
$y = 2013;
date_default_timezone_set('CET');
$time = mktime(0, 0, 0, $m, $d, $y);

//
// calculate 10 years
//
for($i=0;$i<3650;$i++){ 
  $tomorrowTime = $time + (60 * 60 * 24);

  //
  // echo date if the next day has the same date('d') result
  //
  if(date('d',$time)==date('d',$tomorrowTime)){
    echo date('d-m-Y',$time)." was calculated twice... \n";
  }

  $time = $tomorrowTime;
}

?> 
```

这就是我得到的：

```
27-10-2013 was calculated twice... 
26-10-2014 was calculated twice... 
25-10-2015 was calculated twice... 
30-10-2016 was calculated twice... 
29-10-2017 was calculated twice... 
28-10-2018 was calculated twice... 
27-10-2019 was calculated twice... 
25-10-2020 was calculated twice... 
31-10-2021 was calculated twice... 
30-10-2022 was calculated twice... 
```

当我定义为时`$time`，`0 (unix epoch)`我没有得到相同的行为。使用有什么问题`mktime()`吗？还是十一月只是尴尬？

干杯，杰伦

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T13:40:46.733

有道理，这些是闰秒。并非所有日子都需要 86400 秒。

不要使用 12 AM 进行这些计算，使用 12 PM。这会有很大帮助。

也就是说，有更好的日期计算方法。但是您在下午 12 点的数学运算适用于 UTC 时区（或 CET）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T13:45:04.513

此语句应更好地防止闰秒等：

```
$tomorrowTime = strtotime('+1 days', $time); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T13:43:48.960

这就是为什么您不添加秒数来计算时间的原因。DST 和闰秒使得它在一天中*并不总是*精确的秒。`60 * 60 * 24`您可以使用`mktime`正确的计算：

```
for ($i = 0; $i < 3650; $i++) { 
    $time = mktime(0, 0, 0, $m, $d + $i, $y);
    //                          ^^^^^^^

    ...
} 
```

# python - 分页 Django 表单集

> ID：14041381
> 
> 赞同：9
> 
> 时间：2012-12-26T13:38:49.093
> 
> 标签：python, django, paginator, formsets

我有一个模型表单集，我想使用 Django 的 Paginator 一次显示 10 个表单，但不能像`paginator = Paginator(formset, 10)`. 如果有办法，这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-02T20:41:29.717

这是我发现的问题解决方案的一个通用示例：

在`forms.py`文件中：

```
class MyForm(ModelForm):
    class Meta:
        model = MyModel
        fields = ('description',) 
```

在`views.py`文件中：

```
from django.core.paginator import Paginator, EmptyPage, PageNotAnInteger

FormSet = modelformset_factory(MyModel, form=MyForm, extra=0)
if request.method == 'POST':
    formset = FormSet(request.POST, request.FILES)
    # Your validation and rest of the 'POST' code
else:
    query = MyModel.objects.filter(condition)
    paginator = Paginator(query, 10) # Show 10 forms per page
    page = request.GET.get('page')
    try:
        objects = paginator.page(page)
    except PageNotAnInteger:
        objects = paginator.page(1)
    except EmptyPage:
        objects = paginator.page(paginator.num_pages)
    page_query = query.filter(id__in=[object.id for object in objects])
    formset = FormSet(queryset=page_query)
    context = {'objects': objects, 'formset': formset}
    return render_to_response('template.html', context,
                              context_instance=RequestContext(request)) 
```

您需要使用当前页面中的对象创建表单集，否则，当您尝试`formset = FormSet(request.POST, request.FILES)`在 POST 方法中执行时，Django 会引发 MultiValueDictKeyError 错误。

在`template.html`文件中：

```
{% if objects %}
    <form action="" method="post">
        {% csrf_token %}
        {{ formset.management_form }}
        {% for form in formset.forms %}
            {{ form.id }}
            <!-- Display each form -->
            {{ form.as_p }}
        {% endfor %}
        <input type="submit" value="Save" />
    </form>

    <div class="pagination">
        <span class="step-links">
            {% if objects.has_previous %}
                <a href="?page={{ objects.previous_page_number }}">Previous</a>
            {% endif %}

            <span class="current">
                Page {{ objects.number }} of {{ objects.paginator.num_pages }}
            </span>

            {% if objects.has_next %}
                <a href="?page={{ objects.next_page_number }}">next</a>
            {% endif %}
        </span>
    </div>
{% else %}
    <p>There are no objects.</p>
{% endif %} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-12-29T03:06:09.567

一个更优雅的解决方案是`ordered=True`在[`Page`](https://docs.djangoproject.com/en/3.0/ref/paginator/#page-class)对象上设置，以便可以将其传递给`ModelFormSet`.

这是一个例子：

```
forms_per_page = 10
current_page = 1

ModelFormSet = modelformset_factory(MyModel, form=MyForm)
queryset = MyModel.objects.all()

paginator = Paginator(queryset, forms_per_page)
page_object = paginator.page(current_page)
page_object.ordered = True

form = ModelFormSet(queryset=page_object) 
```

这比接受的答案更有效，因为避免了在该行中发生的第二个数据库查询：

```
page_query = query.filter(id__in=[object.id for object in objects]) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-15T14:33:22.290

更正确的使用方法

```
...
formset = FormSet(queryset=page_query.object_list)
... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-28T00:04:11.927

这里的问题是您在`Page`期望 a 的上下文中使用品牌 (a ) `QuerySet`。所以，我们需要那个该死的`QuerySet`. 您的方法正确，但代码很多。

在源代码中，我们有：

```
class Page(collections.Sequence):

    def __init__(self, object_list, number, paginator):
        self.object_list = object_list
        self.number = number
        self.paginator = paginator
        ... 
```

所以，我们的查询集在`self.object_list`属性中，只需使用它！

```
formset = SomeModelFormSet(queryset=objects.object_list) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-11-02T20:24:03.247

同意[Elrond 支持 Monica](https://stackoverflow.com/questions/14041381/paginate-django-formset/59516574#59516574)。假属性是解决排序错误的有趣方法（一旦获取切片，就无法重新排序查询。）

但它也可以固定在一行中 `queryset = queryset.order_by(Entry._meta.pk.name)`

这种虚假排序需要避免**django.form.modelsBaseModelFormSet(BaseFormSet).get_queryset() 中的错误：第 640 行**
通过 pk 进行人工排序，但切片后不可能（SQL 中的限制）

更详细的例子

```
 queryset = Entry.objects.all()
    queryset = queryset.order_by(Entry._meta.pk.name)

    paginator = Paginator(object_list=queryset, per_page=10)
    page_obj = paginator.get_page(request.GET.get('page'))

    EntryFormSet = modelformset_factory(Entry, EntryForm, extra=0)
    entryformset = EntryFormSet(queryset=page_obj.object_list) 
```

# python - 减少 Lambda 错误：“未定义”对象不可调用

> ID：14041385
> 
> 赞同：0
> 
> 时间：2012-12-26T13:39:00.807
> 
> 标签：python, lambda, undefined, mako

我正在使用`cherrypy`并`mako`与 Python 一起创建一个网站。

在我的一个 HTML 文件中，我有以下 Lambda 函数：

```
${reduce(lambda list, cur : '<li>' + someFunction(cur) + '</li>' + 
                             list, object.listing, '')} 
```

`object.listing`带有字符串的列表在哪里。

执行导致上述错误：“未定义”对象不可调用。如果我删除`someFunction()`. 所以我认为它与`cur`存在`None`或有关`Undefined`，但我不知道如何防止这种情况。

我什至不太确定 reduce 函数是如何工作的。

根据要求，整个堆栈跟踪：

```
[26/Dec/2012:13:15:22] HTTP 
Request Headers:
  REFERER: http://localhost:8080/list
  HOST: localhost:8080
  CONNECTION: keep-alive
  Remote-Addr: 127.0.0.1
  ACCEPT: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
  USER-AGENT: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.8; rv:17.0) Gecko/20100101 Firefox/17.0
  COOKIE: session_id=960e569568ded77610f11c48bec0a806f5a4501b
  ACCEPT-LANGUAGE: en-US,en;q=0.5
  DNT: 1
  ACCEPT-ENCODING: gzip, deflate
[26/Dec/2012:13:15:22] HTTP Traceback (most recent call last):
  File "/Library/Python/2.7/site-packages/CherryPy-3.2.2-py2.7.egg/cherrypy/_cprequest.py", line 656, in respond
    response.body = self.handler()
  File "/Library/Python/2.7/site-packages/CherryPy-3.2.2-py2.7.egg/cherrypy/lib/encoding.py", line 188, in __call__
    self.body = self.oldhandler(*args, **kwargs)
  File "/Library/Python/2.7/site-packages/CherryPy-3.2.2-py2.7.egg/cherrypy/_cpdispatch.py", line 34, in __call__
    return self.callable(*self.args, **self.kwargs)
  File "/Volumes/Ritalin/Projects/splitpot/controller/Splitpot.py", line 54, in event
    return tmpl.render(object=doSomething())
  File "/Library/Python/2.7/site-packages/mako/template.py", line 412, in render
    return runtime._render(self, self.callable_, args, data)
  File "/Library/Python/2.7/site-packages/mako/runtime.py", line 766, in _render
    **_kwargs_for_callable(callable_, data))
  File "/Library/Python/2.7/site-packages/mako/runtime.py", line 798, in _render_context
    _exec_template(inherit, lclcontext, args=args, kwargs=kwargs)
  File "/Library/Python/2.7/site-packages/mako/runtime.py", line 824, in _exec_template
    callable_(context, *args, **kwargs)
  File "base_html", line 31, in render_body
  File "someFile_html", line 58, in render_body
  File "someFile_html", line 58, in <lambda>
TypeError: 'Undefined' object is not callable 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T16:44:20.997

`someFunction()`是指放在那里的任何功能，还是一个特定的功能？如果是后者，我们能看到那个代码吗？当 someFunction 被替换为 eg 时，代码是否仍然出错`(lambda x: x+x)(cur)`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T13:43:14.613

```
'Undefined' object is not callable 
```

意味着您正在尝试调用不存在的东西。调用意味着执行一个函数。对您提供的信息的最佳猜测是，`someFunction`在您尝试使用它的范围内实际上并不存在。

查看您的堆栈跟踪并阅读您已经在 python 而不是 mako 中定义了您的函数，我想我理解了这个问题。

[http://docs.makotemplates.org/en/latest/syntax.html#def](http://docs.makotemplates.org/en/latest/syntax.html#def)描述了如何在模板中定义函数。我不知道从 mako 模板回调 python 文件的方法 - 但您可以在 mako 本身中编写这些函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T13:55:22.560

我不知道问题是什么（因此是 CW），只是想指出列表理解在这里可能是比以下更好的选择`reduce`：

```
html = ''.join('<li>' + someFunction(x) + '</li>' for x in listing) 
```

请注意，您的`reduce`代码实际上反转了一个列表，如果这是故意的，请添加`reversed`到上面：

```
html = ''.join('<li>' + someFunction(x) + '</li>' for x in reversed(listing)) 
```

此外，使用`list`（系统标识符）作为变量名也不是一个好主意。

# d3.js - 使用 d3.js（纽约市行政区和人口普查区）绘制 topojson 文件

> ID：14041388
> 
> 赞同：3
> 
> 时间：2012-12-26T13:39:20.450
> 
> 标签：d3.js, shapefile, map-projections

这是`topojson`关于so的第一个问题。我在渲染地图（纽约市行政区）时遇到问题，无法弄清楚原因。下面的代码只是[此示例](http://bl.ocks.org/4108203)的副本，带有不同的 topojson 文件。我已经在[这里](http://temp-share.com/show/FHKdqfs16)上传了文件。以下也是有关我如何创建文件的详细信息。现在，我只是得到混乱的线条。可能，原因是 topojson 文件，但我不知道出了什么问题。

ps：我无法标记这个，`topojson`因为该标记以前没有使用过

**拓扑JSON文件**

[1) 从这里](http://www.nyc.gov/html/dcp/html/bytes/dwndistricts.shtml)下载 shapefile

（在“自治市镇和社区区”下，文件“自治市镇”（左），ArcView Shapefile）

2) 使用 QGis 简化 shapefile

3）转换为TopoJSON

```
ogr2ogr -f geoJSON nybb-geo.json nybb.shp
topojson -o nybb.json nybb-geo.json 
```

**HTML/JS 代码**

```
<!DOCTYPE html>
<meta charset="utf-8">
<style>

.boundary {
  fill: none;
  stroke: #000;
  stroke-width: .5px;
}

</style>
<body>
<script src="http://d3js.org/d3.v3.min.js"></script>
<script src="http://d3js.org/topojson.v0.min.js"></script>
<script>

var width = 960,
    height = 500;

var path = d3.geo.path();

var svg = d3.select("body").append("svg")
    .attr("width", width)
    .attr("height", height);

d3.json("/geo/nybb.json", function(error, topology) {
  svg.append("path")
      .datum(topojson.object(topology, topology.objects['nybb-geo'].geometries[0]))
      .attr("d", path)
      .attr("class", "boundary");
});

</script> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-27T20:23:08.380

正如用户 10579 的评论所建议的那样，我能够通过将 shapefile 重新投影到 NAD83 (EPSG 4269) 来解决问题。从重新投影的 shapefile 创建 topojson 文件后，d3.js 显示地图

```
var projection = d3.geo.albers();
var path = d3.geo.path().projection(projection); 
```

我遇到的第二个问题与正确的中心、比例和平移值有关。使用上面的代码 nyc 将只是一个带有很多空白的小点。找到正确的中心、比例和平移值可能有点乏味。最后，我添加了下面的代码，它允许您拖放地图并滚动以更改比例参数。每次更改后都会显示这些值，以便轻松地将地图放置在正确的位置，并且只需采用控制台输出中的最后一个参数。

```
 svg.call(d3.behavior.zoom()
          .translate(projection.translate())
          .scale(projection.scale())
          .on("zoom", redraw));

  function redraw() {
      if (d3.event) {
        projection
          .translate(d3.event.translate)
          .scale(d3.event.scale);
      }
      map.datum(topojson.object(topology, topology.objects.nyct2010))
        .attr("d", path)
        .attr("class", "boundary");
      console.log("Current scale:" + projection.scale())
      console.log("Current translate:" + projection.translate())
      console.log("Current rotate:" + projection.rotate())
  } 
```

# file-upload - 如何在 Asp.Net 4.o 项目中上传照片/图像

> ID：14041393
> 
> 赞同：1
> 
> 时间：2012-12-26T13:39:42.943
> 
> 标签：file-upload, asp.net-mvc-4

我想在我的 MVC 4.0 项目中添加上传照片功能，请你告诉我该怎么做。我正在使用 MVC 4.o，对于照片选项，我想**上传文件/图像**。这是我的代码

```
@model WebCart.Category

@{
    ViewBag.Title = "Create";
}

<h2>Create</h2>

@using (Html.BeginForm("Create", "Category", FormMethod.Post, new { enctype = "multipart/form-data" }))

{
        @Html.ValidationSummary(true)

    <fieldset>
        <legend>Category</legend>

        <div class="editor-label">
            @Html.LabelFor(model => model.Title)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Title)
            @Html.ValidationMessageFor(model => model.Title)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Description)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Description)
            @Html.ValidationMessageFor(model => model.Description)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Photo)
        </div>
        <div class="editor-field">
            <input name="PhotoFile" id="File" type="file"/>
        </div>

        <p>
            <input type="submit" value="Create" />
        </p>
    </fieldset>
}

<div>
    @Html.ActionLink("Back to List", "Index")
</div>

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
}

    [HttpPost]
            [ValidateInput(false)]
            public ActionResult Create(Category category)
            {
                if (ModelState.IsValid)
                {
                    db.Categories.AddObject(category);
                    db.SaveChanges();
                    return RedirectToAction("Index");
                }

                return View(category);
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T14:12:11.003

您的控制器操作可能需要一个额外的`PhotoFile`参数：

```
[HttpPost]
[ValidateInput(false)]
public ActionResult Create(Category category, HttpPostedFileBase photoFile)
{
    if (ModelState.IsValid)
    {
        // you could manipulate the PhotoFile parameter here
        // for example let's store the uploaded file to a folder on the server
        if (photoFile != null && photoFile.ContentLength > 0)
        {
            var fileName = Path.GetFileName(photoFile.FileName);
            var path = Path.Combine(Server.MapPath("~/App_Data"), fileName);
            photoFile.SaveAs(path);
        }

        db.Categories.AddObject(category);
        db.SaveChanges();
        return RedirectToAction("Index");
    }
    return View(category);
} 
```

或者，如果您想将上传的文件作为字节数组读取，您可以使用以下命令：

```
byte[] photo = new byte[photoFile.InputStream.Length];
photoFile.InputStream.Read(photo, 0, photo.Length);
// Now you could assign the byte array to some property of your model
// and persist it into the database (even if this is a bad practice - 
// it would be more correct to store the photo on the file system and
// only store the full path to the photo in the database) 
```

在 ASP.NET MVC 中上传文件的必读文章如下：[http ://haacked.com/archive/2010/07/16/uploading-files-with-aspnetmvc.aspx](http://haacked.com/archive/2010/07/16/uploading-files-with-aspnetmvc.aspx)

# javascript - Phantom js 在尝试运行示例 js 文件时返回“无法打开 [文件名]”

> ID：14041406
> 
> 赞同：6
> 
> 时间：2012-12-26T13:41:16.903
> 
> 标签：javascript, phantomjs

环境：Windows 7，Phantomjs 版本 1.8.0。

我尝试从'examples'文件夹运行任何.js文件，之前安装了Phantom.js，添加了PATH变量的路径，检查版本如

```
phantomjs --version 
```

它有效。

但是当我尝试跑步时

```
phantomjs examples/version.js 
```

然后得到“无法打开 version.js”

我检查了文件安全设置并像管理员一样运行 cmd，但结果仍然相同。

我将不胜感激解决此问题的任何帮助。提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-02-25T00:58:30.533

遇到了同样的麻烦。最后通过指定 phatnomjs 可执行文件的绝对路径来解决它。

代替：

```
phantomjs myjsfile.js 
```

做：

```
/my/absolute/path/to/phantomjs/phantomjs myjsfile.js 
```

我怀疑为其设置 PATH 会产生相同的效果，但尚未对其进行测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-22T11:04:40.883

就我而言，

```
/mypath/phantomjs /mypath/myfile.js 
```

发现这个需要三天时间。对我来说非常有线的语法。

如果它不起作用，则使用 . 在第一个 /

```
 ./mypath/phantomjs ./mypath/myfile.js 
```

. 表示您在 R 工作室中设置的基本目录

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-18T15:15:44.030

就我而言，我只是不在正确的文件夹中，请确保与“myfile.js”位于完全相同的文件夹中

# c# - 显示所有文件包含相同的部分类

> ID：14041408
> 
> 赞同：9
> 
> 时间：2012-12-26T13:41:27.780
> 
> 标签：c#, visual-studio-2010, resharper, partial-classes, resharper-6.1

我有部分课程 `public partial class myClass`

在不同的文件中定义，例如 myClass1.cs、myClass2.cs 等。

有没有办法让 resharper 或 Visual Studio 内置功能找到所有文件属于同一个部分类？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-26T13:44:17.383

是的。使用[*导航到相关文件*](http://www.jetbrains.com/resharper/webhelp/Navigation_and_Search__Go_to_Related_Files.html)。

如果您使用 IntelliJ/ReSharper2 键盘绑定，它是`control`+ `shift`+ `alt`+`g`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-24T15:13:04.273

如果您在安装 ReSharper 时将默认设置保留为快捷键的 Visual Studio 设置，则默认设置也可以是 Ctrl + Alt + F7（至少在 ReSharper 8 中）

# deployment - 如何在 weblogic 12c 中检查 ear 是否正确部署？

> ID：14041417
> 
> 赞同：1
> 
> 时间：2012-12-26T13:42:06.633
> 
> 标签：deployment, war, ear, weblogic12c

我有一个应用程序耳朵，我正在尝试将其部署到`Oracle Weblogic 12c`服务器中。[我按照本](http://onlineappsdba.com/index.php/2008/08/12/deploy-application-on-oracle-weblogic-server/)网站上的说明进行操作。

执行完这些步骤后，我尝试点击文件中指定并`myApp`在`application.xml`文件中指定的 URL“http://localhost/myApp/servlet” 。此 web.xml 文件位于该文件中，该 war 文件位于该文件中。`servlet``web.xml``.war``.ear`

我的`application.xml`样子如下：

```
<application xmlns="http://java.sun.com/xml/ns/j2ee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/application_1_4.xsd" version="1.4">
  <description>This is my application</description>
  <display-name>myApp</display-name>
  <module>
    <web>
      <web-uri>myApp.war</web-uri>
      <context-root>/myApp</context-root>
    </web>
  </module>
</application> 
```

我的`web.xml`样子如下：

```
 <servlet>
    <servlet-name>MyServlet</servlet-name>
    <servlet-class>com.foo.bar.MyServlet</servlet-class>
  </servlet>

  <servlet-mapping>
    <servlet-name>MyServlet</servlet-name>
    <url-pattern>servlet</url-pattern>
  </servlet-mapping> 
```

当我在浏览器上点击 url 时，出现 404 (Not Found) 错误。我第一次尝试在 weblogic 12c 上部署任何耳朵/战争，所以我不知道出了什么问题。我也检查了服务器日志，但没有堆栈跟踪或错误。

求你帮忙！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T16:56:01.717

打开您的管理控制台，您可以查看部署是否正确部署。在 NetBeans IDE 中，您可以执行 Services > Servers > Oracle Weblogic Server > 右键单击​​ Oracle Weblogic 并选择**View Admin Console**。

他们必须登录您的会话并在屏幕左侧的菜单中进行部署。在这部分您可以查看部署是否正确。

我希望这能帮到您。

# c# - 在导航到另一个页面之前创建加载动画并在动画期间禁用其上的所有控制

> ID：14041419
> 
> 赞同：0
> 
> 时间：2012-12-26T13:42:10.430
> 
> 标签：c#, asp.net, .net, updatepanel

我在第 1 页上有一个按钮，当按钮单击事件发生时，我必须执行一些大约需要 2-3 秒的过程。因此，我想将加载图像放在中心并禁用页面 1 上的所有其他控件。

我尝试使用`UpdatePanel`：

```
<asp:ScriptManager ID="ScriptManager1" runat="server">
        </asp:ScriptManager>
        <asp:UpdatePanel ID="UpdatePanel1" runat="server">
        <ContentTemplate>
            <asp:Button runat="server" Text="Button" onclick="Unnamed1_Click" />
            <asp:Label runat="server" Text="Label" ID="lbl"></asp:Label>
            </ContentTemplate>
        </asp:UpdatePanel>

        <asp:UpdateProgress ID="UpdateProgress1" runat="server" AssociatedUpdatePanelID="UpdatePanel1" >

        <ProgressTemplate>

        <div id="IMGDIV1" align="center" valign="middle" runat="server" style="position: absolute;visibility:visible;vertical-align:middle;border-style:none;border-color:black;background-color:transparent;">

        <asp:Image ID="Image1" runat="server" ImageUrl="~/ajax-loader (1).gif" />
        </div>

        </ProgressTemplate>
        </asp:UpdateProgress> 
```

但是控件并没有被禁用。任何解决方案或Javascript？

如果想留在同一页面上，我也希望它应该工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T13:46:12.230

为什么不使用 Telerik radgrid 加载面板？

[http://www.telerik.com/help/aspnet-ajax/ajax-center-loadingpanel.html](http://www.telerik.com/help/aspnet-ajax/ajax-center-loadingpanel.html)

# html - 是否可以在不包括连接多个用户的服务器（只是客户端应用程序）的情况下开发 HTML5 社交游戏（如扑克）？

> ID：14041420
> 
> 赞同：2
> 
> 时间：2012-12-26T13:42:10.787
> 
> 标签：html

基本上我想制作一个像扑克这样的社交游戏，其中多个玩家可以联系在一起。但我不想要服务器端交互。

所以我的想法是让一个人的浏览器充当服务器，其他人充当客户端。

人 A 的浏览器将保存数据（客户端 DB）并通过网络套接字或其他东西与人 B 通信。

我不确定两个浏览器是否可以通过套接字连接。Web 套接字（HTML5）或任何有助于 IP 到 IP 连接的 Flash 插件。有可能吗？

到目前为止，我什至不确定用户将如何连接以启动游戏。我可能需要放置服务器进行初始连接。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T13:57:22.767

目前，您无法使用 Web 浏览器执行此操作，因为它们不能像服务器一样工作。不过，将来可能会实现：[Chrome 正在试验 Socket 实现](http://developer.chrome.com/apps/socket.html)（这是 Canary 版本中默认禁用的实验性功能）。[Node.js 已经（部分）](http://iceddev.github.com/blog/2012/11/05/node-js-in-chrome/)使用 chrome.socket 移植。

使用 Flash，从版本 10 开始可以创建 p2p 多人游戏，但您仍然需要一个中央服务器来设置玩家之间的初始连接。这里有一个库：http: [//www.flashrealtime.com/p2p-game-lib/](http://www.flashrealtime.com/p2p-game-lib/)。

请注意，p2p 多人游戏使玩家更容易作弊，因为权限在于一个或多个玩家，而不是中央服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T13:50:38.730

浏览器不可能接受 websocket 请求，因此您需要服务器来处理此类请求。关于如何设置 websocket 服务器，我推荐基于 node.js 的[socket.io 。](http://socket.io/)它非常易于使用，并且只有 javascript 是 Web 开发人员习惯的一种语言。

# ios - SenTestCase 类的核心数据：意外错误

> ID：14041438
> 
> 赞同：1
> 
> 时间：2012-12-26T13:43:30.300
> 
> 标签：ios, cocoa-touch, core-data, sentestingkit

我正在开发一个使用核心数据从 sqlite db 存储和检索数据的应用程序。为此，我创建了一个单独的类，其作用类似于数据链路层 - LocalDBController

下面是其中一种方法的实现——selectAddressWithAddressId：

```
- (NSDictionary *)selectAddressWithAddressId:(NSString *)addressId
{
    NSDictionary *dictToReturn = nil;

    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"address_id == %@",addressId];
    NSEntityDescription *entityDescription = [NSEntityDescription entityForName:@"Address" inManagedObjectContext:self.moc]; // returning nil when invoked from test case class
    NSFetchRequest *request = [[NSFetchRequest alloc] init];
    [request setEntity:entityDescription];
    [request setPredicate:predicate];

    NSError *err = nil;
    NSArray *array = [self.moc executeFetchRequest:request error:&err];

    // some more code...

    return dictToReturn;
} 
```

现在我正在尝试为它实现一个测试用例类（SenTestCase 类）。

我在 LocalDBController 类中编写了下面的 init 方法，因此如果环境变量的值为“Run”，则它使用默认的持久存储，如果环境变量的值为“Test”，则使用内存中的持久存储：

```
- (id)init
{
    if (self = [super init]) {
        // initializing moc based on if run setting is used or test is used
        if ([[[[NSProcessInfo processInfo] environment] objectForKey:@"TARGET"] isEqualToString:@"TEST"]) {

            NSManagedObjectModel *mom = [NSManagedObjectModel mergedModelFromBundles:nil];
            NSPersistentStoreCoordinator *psc = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:mom];
            [psc addPersistentStoreWithType:NSInMemoryStoreType configuration:nil URL:nil options:nil error:NULL];
            self.moc = [[NSManagedObjectContext alloc] init];
            self.moc.persistentStoreCoordinator = psc;
        }
        else
        {
            self.moc = [(AppDelegate *)[[UIApplication sharedApplication] delegate] managedObjectContext];
        }

    }

    return self;
} 
```

在我的测试类中，我试图调用以下方法：

```
STAssertNotNil([self.localDBController selectAddressWithAddressId:@"123"], @"No data found"); 
```

问题是——

> 在这种情况下，在selectAddressWithAddressId **:**方法中获得的**entityDescription**的值为 nil，尽管 self.moc 的值不是 nil。所以它在控制台中抛出这个异常消息：**引发 executeFetchRequest:error: A fetch request must have an entity..**

 ****如果我从我的测试用例包中不包含的类执行上述方法，比如 appDelegate，它工作正常。

如果我做错了什么，谁能建议我？****

# sql - 具有各种列的各种范围的计数和总和

> ID：14041440
> 
> 赞同：-1
> 
> 时间：2012-12-26T13:43:41.713
> 
> 标签：sql, oracle

经过一些帮助后，我在 pl sql developer 中得到了这些命令：

```
 SELECT  CASE
    WHEN t.aaa BETWEEN 1 AND 5000000 THEN '01'
    WHEN t.aaa BETWEEN 5000001 AND 7000000 THEN '02'
    WHEN t.aaa BETWEEN 7000001 AND 10000000 THEN '03'
    WHEN t.aaa BETWEEN 10000001 AND 30000000 THEN '04'
    WHEN t.aaa BETWEEN 30000001 AND 50000000 THEN '05'
    ELSE '06' END T
,count(t.bbb), sum(t.aaa)
FROM t.ccc
WHERE t.ddd IN  ('3','4','5','6','D','E','F')
AND t.zzz like '60%'
GROUP BY CASE 
   WHEN t.aaa BETWEEN 1 AND 5000000 THEN '01' 
   WHEN t.aaa BETWEEN 5000001 AND 7000000 THEN '02' 
   WHEN t.aaa BETWEEN 7000001 AND 10000000 THEN '03'
   WHEN t.aaa BETWEEN 10000001 AND 30000000 THEN '04'
   WHEN t.aaa BETWEEN 30000001 AND 50000000 THEN '05'
   ELSE '06' END order by 1; 
```

结果是：

```
 T    COUNT(T.bbb)    SUM(T.aaa)
   1       1019           5519981
   2       878            8620000
   3       2250           16499000
   4       6844           4638E+11
   5       6061           691E+11
   6       915            8452192 
```

所以我有不同行的计数和总和。现在我想知道如何为不同的列设置相同的行。我的意思是一个`COUNT(T.bbb)`和`SUM(T.aaa)`一个`t.zzz`（有各种各样的`t.zzz`）。

这些结果示例适用于 row 和 2 中的相同范围`t.zzz`：

```
 T    COUNT(T.bbb)    SUM(T.aaa)   COUNT(T.bbb)     SUM(T.aaa)  
   1       1019          5519981       19             654321
   2       878           8620000       654            98765432
   3       2250          16499000      321            3454643
   4       6844          4638E+11      154            3213454
   5       6061          691E+11       2158           23132464
   6       915           8452192       145            341321321 
```

而且我也想要所有的行，即使数量`t.bbb`是“0”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T14:15:08.763

目前尚不清楚您要做什么，但似乎您想要`count()`然后`sum()`使用一些额外的过滤。如果是这种情况，您可以使用`case`与此类似的语句：

```
SELECT  CASE
    WHEN t.aaa BETWEEN 1 AND 5000000 THEN '01'
    WHEN t.aaa BETWEEN 5000001 AND 7000000 THEN '02'
    WHEN t.aaa BETWEEN 7000001 AND 10000000 THEN '03'
    WHEN t.aaa BETWEEN 10000001 AND 30000000 THEN '04'
    WHEN t.aaa BETWEEN 30000001 AND 50000000 THEN '05'
    ELSE '06' END T,
  count(case when t.zzz like '60%' then t.bbb end) Count_BBB_60, 
  sum(case when t.zzz like '60%' then t.aaa end) Sum_AAA_60,
  count(case when t.zzz like '61%' then t.bbb end) Count_BBB_61,
  sum(case when t.zzz like '61%' then t.aaa end) Sum_AAA_61
FROM t.ccc
WHERE t.ddd IN  ('3','4','5','6','D','E','F')
GROUP BY CASE 
   WHEN t.aaa BETWEEN 1 AND 5000000 THEN '01' 
   WHEN t.aaa BETWEEN 5000001 AND 7000000 THEN '02' 
   WHEN t.aaa BETWEEN 7000001 AND 10000000 THEN '03'
   WHEN t.aaa BETWEEN 10000001 AND 30000000 THEN '04'
   WHEN t.aaa BETWEEN 30000001 AND 50000000 THEN '05'
   ELSE '06' END order by 1; 
```

# iphone - 在 MapView 加载时添加用户位置警报 - Xcode

> ID：14041444
> 
> 赞同：1
> 
> 时间：2012-12-26T13:44:00.020
> 
> 标签：iphone, ios, map, mkmapview, mapkit

我正在处理 Map View 项目，但是当我的应用程序加载时，我在第一个屏幕上收到此警报“项目名称希望使用您当前的位置”（警报消息）“不允许”（按钮）“确定” （按钮）'（位置警报框）在地图视图之前，当我切换到地图视图时，它会在我想要的第一个视图上显示警报，然后只会出现警报，以便那时用户可以单击“确定”并且应用程序将能够使用用户的位置，我已经搜索了很多，但没有找到一些好的方法，我知道可以做到，因为我看到一两个应用程序在做那件事，但我不能做这个功能在我的应用程序中...请帮助我...

我只是希望位置搜索的警报应该只在我到达我的应用程序的地图视图屏幕时才出现，而不是在那之前..有什么建议吗？？编码将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T17:34:42.527

在到达要显示警报的屏幕之前，您可以简单地不实例化您的 CLLocationManager。提示操作系统显示警报的是位置管理器的实例化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T09:31:59.277

正如 GeraldWilliam 已经解释的那样，它`CLLocationManager`强制弹出，您无法更改。但是，您*可以*做的是显示地图视图并在加载视图时向用户询问其当前位置，例如使用[`– viewDidAppear:`](http://developer.apple.com/library/ios/documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instm/UIViewController/viewDidAppear%3a)方法。

# iphone - 点击通过 UIWindows

> ID：14041446
> 
> 赞同：1
> 
> 时间：2012-12-26T13:44:14.683
> 
> 标签：iphone, objective-c, ios, cocoa-touch, uiview

我一直在遵循这个[例子](https://stackoverflow.com/questions/2833724/adding-view-on-statusbar-in-iphone)来创建一个`UIWindow`在`statusBar`.

我`UIWindow`的显示在顶部，`statusBar`一切都很好，但是应用程序的实际视图（带有按钮的视图）没有响应我的操作：

![在此处输入图像描述](../Images/3dadfb07c7ffa7f2b50595ec42e1915e.png)

我正在使用情节提要和 iOS6。这是我创建`statusBar`叠加层的代码：

```
- (void)viewDidAppear:(BOOL)animated     {

    UIWindow *overlayWindow = [[ACStatusBarOverlayWindow alloc] initWithFrame:CGRectZero];
    AppDelegate *app = [[UIApplication sharedApplication] delegate];

    overlayWindow.rootViewController = app.window.rootViewController;
    app.window  = overlayWindow;
    [overlayWindow makeKeyAndVisible];

} 
```

下的视图`statusBar`没有响应，我无法点击`UIButton`。是否有可能以某种方式使带有我的应用程序界面的 UIWindow 接受触摸而忽略`ACStatusBarOverlayWindow`? 怎么可能呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T15:54:09.843

通常，如果一个按钮对触摸没有响应，那是因为该按钮超出了其父 UIView 的范围。

您的代码似乎不是解决您要解决的问题的合适方法。如果你只需要你的窗口有一个状态栏，或者你只需​​要在当前视图中添加一个按钮，那么你这样做的方式可能是不正确的。

就我个人而言，我从未见过有人在 viewDidAppear 中实例化 UIWindow，因为该应用程序带有它自己的 UIWindow。您应该使用 UIView 并将叠加层添加到其中。

作为旁注，如果您要按照您尝试的方式进行操作，那么您的窗户至少需要一个框架。所以 initWithFrame:CGRectZero 将是 initWithFrame:CGRectMake(0,0,320,480) 或类似的东西。

解决该问题的更好方法是实例化 UIViewController 并将其设置为您的 rootViewController。或者只是将您的按钮添加到当前 viewController 的视图中。

```
- (void)viewDidLoad     {

    UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    [button addTarget:self 
               action:@selector(myMethod:)
     forControlEvents:UIControlEventTouchUpInside];
    [button setTitle:@"Tap Me" forState:UIControlStateNormal];
    [button sizeToFit];
    [self.view addSubview:button];
} 
```

# python - 在烧瓶应用程序上使用 cx_freeze

> ID：14041450
> 
> 赞同：8
> 
> 时间：2012-12-26T13:44:31.597
> 
> 标签：python, flask, cx-freeze

我正在使用 Flask 开发一个 python 应用程序。目前，我希望这个应用程序在本地运行。它通过 python 在本地运行良好，但是当我使用 cx_freeze 将其转换为 Windows 的 exe 时，我不能再使用 Flask.render_template() 方法。在我尝试执行 render_template 的那一刻，我收到一个 http 500 错误，就像我尝试渲染的 html 模板不存在一样。

主 python 文件称为 index.py。起初我试图运行：`cxfreeze index.py`. 这不包括 cxfreeze“dist”目录中 Flask 项目的“templates”目录。然后我尝试使用这个 setup.py 脚本并运行`python setup.py build`. 这现在包括模板文件夹和 index.html 模板，但是当它尝试呈现模板时我仍然收到 http: 500 错误。

```
from cx_Freeze import setup,Executable

includefiles = [ 'templates\index.html']
includes = []
excludes = ['Tkinter']

setup(
name = 'index',
version = '0.1',
description = 'membership app',
author = 'Me',
author_email = 'me@me.com',
options = {'build_exe': {'excludes':excludes,'include_files':includefiles}}, 
executables = [Executable('index.py')]
) 
```

这是脚本中的示例方法：

```
@app.route('/index', methods=['GET'])
def index():
    print "rendering index"
    return render_template("index.html") 
```

如果我`index.py`在控制台中运行，我会得到：

```
 * Running on http://0.0.0.0:5000/
 rendering index
 127.0.0.1 - - [26/Dec/2012 15:26:41] "GET / HTTP/1.1" 200 -
 127.0.0.1 - - [26/Dec/2012 15:26:42] "GET /favicon.ico HTTP/1.1" 404 - 
```

并且页面在我的浏览器中正确显示，但是如果我运行`index.exe`，我会得到

```
 * Running on http://0.0.0.0:5000/
rendering index
127.0.0.1 - - [26/Dec/2012 15:30:57] "GET / HTTP/1.1" 500 -
127.0.0.1 - - [26/Dec/2012 15:30:57] "GET /favicon.ico HTTP/1.1" 404 - 
```

和

```
Internal Server Error

The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application. 
```

在我的浏览器中。

如果我返回原始 html，例如

```
@app.route('/index', methods=['GET'])
def index():
    print "rendering index"
    return "This works" 
```

然后它工作正常。因此，一种可能的解决方法是停止使用 Flask 的模板并将所有 html 逻辑硬编码到主 python 文件中。不过这会变得非常混乱，所以如果可能的话，我想避免它。

我正在使用 Python 2.7 32 位、Cx_freeze 用于 Python 2.7 32 位和 Flask 0.9

感谢您的任何帮助和想法！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-28T12:52:50.297

在通过 Flask 和 Jinga 模块搜索了许多虚假线索之后，我终于找到了问题所在。

CXFreeze 不承认 jinja2.ext 是一个依赖项，并且没有包含它。

我通过包含`import jinja2.ext`在一个 python 文件中来解决这个问题。

然后将 CXFreeze 添加`ext.pyc`到 library.zip\jinja。（构建后手动复制也可以）

以防万一其他人疯狂尝试使用 Flask 开发本地运行的应用程序:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-01T17:52:11.333

源文件中的替代方法`import jinja2.ext`是专门包含`jinja2.ext`在 setup.py 中：

```
from cx_Freeze import setup,Executable

includefiles = [ 'templates\index.html']
includes = ['jinja2.ext']  # add jinja2.ext here
excludes = ['Tkinter']

setup(
name = 'index',
version = '0.1',
description = 'membership app',
author = 'Me',
author_email = 'me@me.com',
# Add includes to the options
options = {'build_exe':   {'excludes':excludes,'include_files':includefiles, 'includes':includes}},   
executables = [Executable('index.py')]
) 
```

# c++ - 为什么预处理器宏是邪恶的，有什么替代方案？

> ID：14041453
> 
> 赞同：109
> 
> 时间：2012-12-26T13:44:51.563
> 
> 标签：c++, c++11, c-preprocessor

我一直问这个问题，但我从来没有得到一个很好的答案；我认为几乎所有程序员在写第一个“Hello World”之前都遇到过“永远不应该使用宏”、“宏是邪恶的”之类的短语，我的问题是：为什么？这么多年后，有了新的 C++11，还有真正的替代品吗？

简单的部分是关于诸如特定于平台和特定于编译器的宏`#pragma`，并且大多数时候它们具有严重的缺陷`#pragma once`，至少在两种重要情况下容易出错：不同路径中的相同名称以及一些网络设置和文件系统。

但总的来说，宏及其用法的替代品呢？

* * *

## 回答 #1

> 赞同：187
> 
> 时间：2012-12-26T14:18:02.420

宏就像任何其他工具一样 - 用于谋杀的锤子并不邪恶，因为它是锤子。人们以这种方式使用它的方式是邪恶的。如果你想敲钉子，锤子是一个完美的工具。

宏有几个方面使它们“不好”（我稍后会扩展每个方面，并提出替代方案）：

1.  您不能调试宏。
2.  宏扩展会导致奇怪的副作用。
3.  宏没有“命名空间”，因此如果您的宏与其他地方使用的名称冲突，您会在不需要的地方获得宏替换，这通常会导致奇怪的错误消息。
4.  宏可能会影响您没有意识到的事情。

所以让我们在这里稍微扩展一下：

**1) 无法调试宏。** 当您有一个转换为数字或字符串的宏时，源代码将具有宏名称，并且许多调试器无法“看到”宏转换为什么。所以你实际上并不知道发生了什么。

**替换**：使用`enum`或`const T`

对于“类似函数”的宏，因为调试器在“每个源代码行”级别上工作，所以无论是一条语句还是一百条语句，您的宏都将像一条语句一样运行。很难弄清楚发生了什么。

**替换**：使用函数 - 如果需要“快速”，则使用内联（但要注意内联过多不是一件好事）

**2) 宏扩展会产生奇怪的副作用。**

著名的一个是`#define SQUARE(x) ((x) * (x))`和用途`x2 = SQUARE(x++)`。这导致`x2 = (x++) * (x++);`，即使它是有效的代码 [1]，也几乎肯定不是程序员想要的。如果它是一个函数，那么做 x++ 就可以了，x 只会增加一次。

另一个例子是宏中的“if else”，假设我们有这个：

```
#define safe_divide(res, x, y)   if (y != 0) res = x/y; 
```

进而

```
if (something) safe_divide(b, a, x);
else printf("Something is not set..."); 
```

它实际上变成了完全错误的事情......

**替换**：真正的功能。

**3) 宏没有命名空间**

如果我们有一个宏：

```
#define begin() x = 0 
```

我们在 C++ 中有一些使用 begin 的代码：

```
std::vector<int> v;

... stuff is loaded into v ... 

for (std::vector<int>::iterator it = myvector.begin() ; it != myvector.end(); ++it)
   std::cout << ' ' << *it; 
```

现在，你认为你得到了什么错误信息，你在哪里寻找错误[假设你完全忘记了——或者甚至不知道——存在于其他人编写的某个头文件中的 begin 宏？[如果你在 include 之前包含那个宏，那就更有趣了——你会沉浸在奇怪的错误中，当你查看代码本身时，这完全没有意义。

**替换**：好吧，与其说是替换，不如说是“规则”——只对宏使用大写名称，而从不将所有大写名称用于其他事物。

**4）宏有你没有意识到的效果**

采取这个功能：

```
#define begin() x = 0
#define end() x = 17
... a few thousand lines of stuff here ... 
void dostuff()
{
    int x = 7;

    begin();

    ... more code using x ... 

    printf("x=%d\n", x);

    end();

} 
```

现在，不看宏，你会认为 begin 是一个函数，它不应该影响 x。

这类事情，我见过更复杂的例子，真的会搞砸你的一天！

**替换**：要么不使用宏来设置 x，要么将 x 作为参数传入。

有时使用宏绝对是有益的。一个例子是用宏包装一个函数来传递文件/行信息：

```
#define malloc(x) my_debug_malloc(x, __FILE__, __LINE__)
#define free(x)  my_debug_free(x, __FILE__, __LINE__) 
```

现在我们可以`my_debug_malloc`在代码中作为常规 malloc 使用，但是它有额外的参数，所以当它到最后，我们扫描“哪些内存元素没有被释放”，我们可以打印分配的位置，所以程序员可以追踪泄漏。

[1] “在一个序列点”多次更新一个变量是未定义的行为。序列点与语句并不完全相同，但对于大多数意图和目的而言，我们应该将其视为。这样做`x++ * x++`会更新`x`两次，这是未定义的，可能会导致不同系统上的不同值，以及不同的结果值`x`。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-12-26T13:57:32.120

“宏是邪恶的”这句话通常是指使用#define，而不是#pragma。

具体来说，该表达式指的是这两种情况：

*   将幻数定义为宏

*   使用宏替换表达式

> 这么多年后，有了新的 C++ 11，还有一个真正的选择吗？

是的，对于上面列表中的项目（幻数应该用 const/constexpr 定义，表达式应该用 [normal/inline/template/inline template] 函数定义。

以下是通过将幻数定义为宏并用宏替换表达式（而不是定义用于评估这些表达式的函数）而引入的一些问题：

*   在为幻数定义宏时，编译器不保留定义值的类型信息。这可能会导致编译警告（和错误）并使调试代码的人感到困惑。

*   在定义宏而不是函数时，使用该代码的程序员希望它们像函数一样工作，而事实并非如此。

考虑这段代码：

```
#define max(a, b) ( ((a) > (b)) ? (a) : (b) )

int a = 5;
int b = 4;

int c = max(++a, b); 
```

在分配给 c 之后，您会期望 a 和 c 为 6（就像使用 std::max 而不是宏一样）。相反，代码执行：

```
int c = ( ((++a) ? (b)) ? (++a) : (b) ); // after this, c = a = 7 
```

最重要的是，宏不支持命名空间，这意味着在代码中定义宏将限制客户端代码可以使用的名称。

这意味着如果您定义了上面的宏（对于 max），您将无法再`#include <algorithm>`在下面的任何代码中使用，除非您明确编写：

```
#ifdef max
#undef max
#endif
#include <algorithm> 
```

使用宏而不是变量/函数也意味着您不能获取它们的地址：

*   如果作为常量的宏计算为幻数，则不能通过地址传递它

*   对于宏作为函数，您不能将其用作谓词或获取函数的地址或将其视为函子。

编辑：例如，上述的正确替代方法`#define max`：

```
template<typename T>
inline T max(const T& a, const T& b)
{
    return a > b ? a : b;
} 
```

这可以完成宏所做的所有事情，但有一个限制：如果参数的类型不同，则模板版本会强制您显式（这实际上会导致更安全、更显式的代码）：

```
int a = 0;
double b = 1.;
max(a, b); 
```

如果将此最大值定义为宏，则代码将编译（带有警告）。

如果这个最大值被定义为一个模板函数，编译器会指出歧义，你必须说要么`max<int>(a, b)`或`max<double>(a, b)`（从而明确说明你的意图）。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-12-26T13:49:22.940

一个常见的问题是：

```
#define DIV(a,b) a / b

printf("25 / (3+2) = %d", DIV(25,3+2)); 
```

它将打印 10，而不是 5，因为预处理器会以这种方式扩展它：

```
printf("25 / (3+2) = %d", 25 / 3 + 2); 
```

这个版本更安全：

```
#define DIV(a,b) (a) / (b) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-26T13:49:47.590

宏特别适用于创建通用代码（宏的参数可以是任何东西），有时带有参数。

更多的是，这段代码被放置（即插入）在宏被使用的地方。

OTOH，可以通过以下方式获得类似的结果：

*   重载函数（不同的参数类型）

*   C++ 中的模板（通用参数类型和值）

*   内联函数（将代码放置在调用它们的位置，而不是跳转到单点定义——然而，这是对编译器的建议）。

编辑：至于为什么宏不好：

1) 没有对参数进行类型检查（它们没有类型），因此很容易被误用 2) 有时会扩展为非常复杂的代码，在预处理文件中很难识别和理解 3) 很容易出错- 宏中的易发代码，例如：

```
#define MULTIPLY(a,b) a*b 
```

然后打电话

```
MULTIPLY(2+3,4+5) 
```

扩展在

2+3*4+5（而不是：(2+3)*(4+5)）。

要拥有后者，您应该定义：

```
#define MULTIPLY(a,b) ((a)*(b)) 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-12-26T13:55:54.480

我认为使用预处理器定义或您所称的宏没有任何问题。

它们是在 c/c++ 中发现的（元）语言概念，并且与任何其他工具一样，如果您知道自己在做什么，它们可以让您的生活更轻松。宏的问题在于它们在您的 c/c++ 代码之前被处理并生成可能有错误的新代码并导致编译器错误，这些错误几乎是显而易见的。从好的方面来说，如果使用得当，它们可以帮助您保持代码清洁并节省大量打字时间，因此这取决于个人喜好。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-07-04T19:36:15.180

C/C++ 中的宏可以作为版本控制的重要工具。相同的代码可以通过宏的次要配置交付给两个客户端。我使用类似的东西

```
#define IBM_AS_CLIENT
#ifdef IBM_AS_CLIENT 
  #define SOME_VALUE1 X
  #define SOME_VALUE2 Y
#else
  #define SOME_VALUE1 P
  #define SOME_VALUE2 Q
#endif 
```

如果没有宏，这种功能是不容易实现的。宏实际上是一个很棒的软件配置管理工具，而不仅仅是一种创建快捷方式以重用代码的方法。以可重用性为目的在宏中定义函数肯定会产生问题。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-02-25T18:01:22.190

预处理器宏在用于预期目的时并不邪恶，例如：

*   使用#ifdef 类型的构造创建同一软件的不同版本，例如不同区域的窗口版本。
*   用于定义代码测试相关值。

**替代方案** - 可以使用 ini、xml、json 格式的某种配置文件用于类似目的。但是使用它们会对预处理器宏可以避免的代码产生运行时影响。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-12-26T13:52:02.017

根据我的经验，宏对于程序大小并不理想，并且可能难以调试。但如果小心使用，它们是可以的。

通常一个好的替代方案是泛型函数和/或内联函数。

# c++ - 嵌套在模板类中的 C++ 类

> ID：14041459
> 
> 赞同：2
> 
> 时间：2012-12-26T13:45:39.410
> 
> 标签：c++

所以我的模板类有一些问题。

```
<!-- language: lang-c++ -->

template<class T>
class List {
  class Counter
  {       
    T real;
    T imaginary;
    Counter *next;
 //....
  public:
    Counter(T a=0,T b=0);                  
    virtual ~Counter();                     
    friend ostream& operator<<(ostream&,Counter&);
    friend ostream& operator<<(ostream&,List&);
  };
  Counter* first;
  Counter* last;
//....
}; 
```

但是我在方法上有一些问题。如果我将函数写为

```
template<class T> Counter operator/(Counter &one,...) 
```

当我查看 VC++10 中的 Counter 时，它会说类似

```
<error_type>&one 
```

例如。我应该在代码中的任何地方使用`template<class T>`我的 Counter 类吗？

```
//Methods
//Counter. For example some methods
Counter operator/(Counter& one,Counter& two){}
ostream& operator<<(ostream&os,Counter&x){}
istream& operator>>(istream&is,Counter&x){}
 //List
template<class T>void List<T>::add(Counter *T,int i,bool c){} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T14:19:50.253

这取决于您是在类定义*内部还是**外部*定义运算符（无论它们是成员函数还是全局运算符） 。

如果您在类定义中执行此操作，则不需要 for `template<T>`，也不需要 for `List<T>`：

```
template <typename T>
class List
{
public:
  class Counter
  {
    /* This is a global operator* defined inside the class, and
       as friend. */
    friend Counter operator*(const Counter &c1, const Counter &c2)
    {
      return Counter();
    }
  };

}; 
```

（请注意，我的定义`operator*`实际上并没有用，因为它总是返回一个空`Counter`对象。这只是为了演示语法。）

但是，如果您在类之外定义运算符（因此也在模板定义之外`List`），您必须使用函数模板定义的完整语法：

```
template <typename T>
typename List<T>::Counter operator/(const typename List<T>::Counter &c1, const typename List<T>::Counter &c2)
{
  return List<T>::Counter();
} 
```

如您所见，这涉及三个步骤：

1.  将`template <....>`, 所有模板参数的名称放在定义之前的`<`...中。`>`
2.  用于`List<T>::Counter`指示这`Counter`是一个嵌套类型名
3.  使用`typename List<T>::Counter`因为`Counter`嵌套到*依赖类型*（即依赖于模板参数的类型）。

# javascript - 特定 div 上的媒体打印 css

> ID：14041463
> 
> 赞同：1
> 
> 时间：2012-12-26T13:46:11.847
> 
> 标签：javascript, jquery, css, printing

我使用@media print 打印html页面。

`@media`在简单的 html 页面中打印工作正常。

但是当我调用 javascript 时，`@media`css 不适用于文档。

我的 JavaScript 代码是

```
<script type="text/javascript" src="http://jqueryjs.googlecode.com/files/jquery-1.3.1.min.js" > </script>
<script type="text/javascript">

    function PrintElem(elem)
    {
        Popup($(elem).html());
    }

    function Popup(data) 
    {
        var mywindow = window.open('', 'mydiv', 'height=400,width=600');
        mywindow.document.write(data);
        mywindow.print();
        mywindow.close();

        return true;
    }

</script> 
```

如何为特定 div 编写媒体打印 css。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T13:48:28.930

您必须将 CSS 写入该新窗口。新窗口与打开它的窗口是一个完全独立的环境，原始窗口中的 CSS 对弹出窗口绝对没有影响。

# c - 使用 VirtualQueryEx 在远程进程中枚举模块不会返回所有模块

> ID：14041465
> 
> 赞同：1
> 
> 时间：2012-12-26T13:46:33.813
> 
> 标签：c, winapi, dll, virtualalloc

我正在尝试获取给定进程正在使用的 DLL 列表，我正在尝试通过 VirtualQueryEx 来实现。我的问题是它返回给我的只是 DLL 的部分列表，而不是全部（我可以使用 Process Explorer 或在给定进程上使用 VirtualQuery 来查看该列表）。

这是代码：

```
 char szBuf[MAX_PATH * 100] = { 0 };
    PBYTE pb = NULL;
    MEMORY_BASIC_INFORMATION mbi;
    HANDLE h_process = OpenProcess(PROCESS_QUERY_INFORMATION, FALSE, iPID);

    while (VirtualQueryEx(h_process, pb, &mbi, sizeof(mbi)) == sizeof(mbi)) {

        int nLen;
        char szModName[MAX_PATH];

        if (mbi.State == MEM_FREE)
        mbi.AllocationBase = mbi.BaseAddress;

        if ((mbi.AllocationBase == hInstDll) ||
            (mbi.AllocationBase != mbi.BaseAddress) ||
            (mbi.AllocationBase == NULL)) {
        // Do not add the module name to the list
        // if any of the following is true:
        // 1\. If this region contains this DLL
        // 2\. If this block is NOT the beginning of a region
        // 3\. If the address is NULL
        nLen = 0;
        } else {
        nLen = GetModuleFileNameA((HINSTANCE) mbi.AllocationBase, 
            szModName, _countof(szModName));
        }

        if (nLen > 0) {
        wsprintfA(strchr(szBuf, 0), "\n%p-%s", 
            mbi.AllocationBase, szModName);
        }

        pb += mbi.RegionSize;
    } 
```

我正在得到结果`szBuf`。

此函数是 DLL 文件的一部分，因此我很难调试。

现在 DLL 被编译为 x64 二进制文件，我将它用于 x64 进程。

PS 我知道 EnumProcessModules 并且我没有使用它是有原因的（太长了:)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T15:33:44.140

*GetModuleFileName() 只为您提供在您的*进程中加载​​的模块的名称，而不是其他进程。它会给你一些意外的命中，Windows 操作系统的 DLL 将被加载到相同的地址，因此将具有相同的模块句柄值。

您将需要使用 GetModuleFileNameEx() 以便您可以传递进程句柄。

请注意您发布的代码的基本缺陷，您没有做任何事情来确保您可以在另一个进程上安全地使用 VirtualQueryEx()。这要求您暂停其所有线程，以便在您迭代它时无法分配内存，这是调试器所做的事情。EnumProcessModules 也需要。故障模式很糟糕，它是随机的，很容易让你的循环卡住，一遍又一遍地迭代相同的地址。这就是 CreateToolHelp32Snapshot() 函数存在的原因，强调“快照”。

# java - 为什么我们在 Java 中有退出代码？

> ID：14041467
> 
> 赞同：6
> 
> 时间：2012-12-26T13:46:55.413
> 
> 标签：java, exit-code

在Java中，我们使用`System.exit(int)`退出程序。C 中“退出值”的原因是退出值用于检查程序中的错误。但是在Java中，错误是通过抛出异常来反映的，因此可以很容易地处理它们。那么为什么我们在 Java 中有退出值呢？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-26T13:48:36.100

退出值返回给调用程序，例如 shell。异常不能被外部程序捕获。

顺便说一句，当您抛出异常时，它会被该线程捕获或该线程死亡，`finally`仍然会为该线程调用块。当您调用 System.exit() 时，所有线程都会立即停止，并且不会调用 finally 块。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-26T13:51:19.777

出于同样的原因。

退出代码仅供程序外部的各方和应用程序用于调试和处理目的。与尝试解析堆栈跟踪相比，超级应用程序绝对可以更好地处理返回码。

此外，如果您正在为最终用户创建应用程序，您宁愿优雅地退出您的应用程序，也不愿发布一堆堆栈跟踪信息，原因有两个：一个，您只会用很多疯狂的东西吓唬他们- 看起来像技术乱码，第二，堆栈跟踪通常会揭示有关程序基本结构方式的敏感和机密信息（为潜在的攻击者提供更多关于系统的知识）。

对于一个真实的例子，我正在开发一个 Java Batch 程序，它使用退出代码来完成它的工作。用户可以根据退出代码是否为“0”来查看作业是否成功执行。如果是其他问题，他们可以联系技术支持，获得退出代码的附加信息，帮助台将拥有基于该退出代码的所有必要信息来帮助他们。它比试图问一个非技术的最终用户“好的，那么你得到了什么异常？”要好得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T13:50:01.163

退出值返回给调用者以指示程序成功或不成功完成。调用者可能无法捕获异常并相应地处理它。

例如。0 退出值意味着成功完成，而非零返回值意味着执行中的一些错误。

此外， System.exit() 将使应用程序中的所有线程自行停止。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T14:43:45.883

长话短说，退出代码是向运行 Java 程序时遇到异常的用户发出的简化信号。由于我们假设大多数用户不了解异常的堆栈跟踪数据，这些简单的非零自定义代码会告诉他们有问题，应该向供应商报告。因此，供应商获得了代码，他知道与该代码相关的堆栈跟踪并尝试修复系统。这是程序员提供的抽象，因此用户不必阅读和报告大量堆栈跟踪。一个很好的类比是 SQLException 类中的 getErrorCode() 方法。此方法还会关闭客户端计算机上正在运行的当前 JVM。这意味着这将终止 JVM 中的所有线程。此方法调用 Java.lang.Runtime 类中的 exit 方法。

这是链接 [http://docs.oracle.com/javase/6/docs/api/java/lang/Runtime.html#exit%28int%29](http://docs.oracle.com/javase/6/docs/api/java/lang/Runtime.html#exit%28int%29)

# android - Android 一个图标适用于所有小屏幕 - 大屏幕，它会显示吗？

> ID：14041469
> 
> 赞同：0
> 
> 时间：2012-12-26T13:46:59.267
> 
> 标签：android, icons, screen

我有一个简单的问题：当我将相同的 57px x 57px 图标放入所有 drawable-ldpi、drawable-mdpi 和 drawable-hdpi 文件夹时，它会起作用吗？它会在所有设备上运行吗？

换句话说，如果小图标在大屏幕或超大屏幕上可见。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T13:51:04.877

它会起作用，但你真的**不应该对任何屏幕尺寸使用 57x57 的尺寸**- 缩小的图像看起来和放大的一样难看。最好避免它。

请在此处阅读更多信息：http: [//developer.android.com/guide/practices/ui_guidelines/icon_design_launcher.html](http://developer.android.com/guide/practices/ui_guidelines/icon_design_launcher.html)（是的，它是官方文档）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T13:48:25.013

是的，它会起作用的。但是拥有所有图标是件好事。因为它会在大屏幕上像素化。

如果您简单地将图标放在`drawalbe`文件夹（这是默认文件夹）中，并且您没有任何其他文件夹，例如 hdpi、mdpi、ldpi 用于所有屏幕尺寸。那么它也将被考虑用于所有分辨率/尺寸。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-26T13:49:07.603

它会起作用的。但它在某些屏幕上看起来不太好。

# php - php 中 7 和 1 中的工作原理

> ID：14041471
> 
> 赞同：2
> 
> 时间：2012-12-26T13:47:12.620
> 
> 标签：php, bit-manipulation

任何人都可以帮助我理解以下代码的工作原理吗？我知道如果奇数返回 1，偶数返回 0。

```
echo (7 & 1);  // result 1
echo (6 & 1);  // result 0 
```

我认为这些数字已转换为二进制。如果我不正确，请更正。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T13:51:59.287

```
7 = 0000111b
1 = 0000001b
------------
& = 0000001b = 1 
```

对于 6：

```
6 = 0000110b
1 = 0000001b
------------
& = 0000000b = 0 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T13:51:13.927

是的，您正在对数字执行 AND 操作，所以

```
Dec     BINARY   Output
7  ===  0111
1  ===  0001
------------------------
AND  op 0001     1

Dec     BINARY
6  ===  0110
1  ===  0001
------------------------
AND  op 0000     0 
```

**同样地，**

```
Dec     BINARY
7  ===  0111
6  ===  0110
------------------------
AND  op 0110         6 
```

# php - SQL select查询内存问题

> ID：14041479
> 
> 赞同：1
> 
> 时间：2012-12-26T13:47:54.247
> 
> 标签：php, mysql, sql

我让这台服务器设置了一个实时流量日志数据库，其中包含一个大的统计数据表。现在我需要从中创建一个较小的表，假设是 30 天前。

该服务器还有一个复制数据的从服务器，比主服务器晚 5 秒。我创建了这个从站是为了减少用于选择查询的服务器进程，因此它只适用于流量日志的插入/更新。

现在我需要将最后一天复制到较小的表中，并且仍然不使用“真实”数据库，因此我需要从从属中选择并插入到真正的较小表中。（从机只允许读操作）。

我正在使用 PHP，我无法通过一个查询在一个查询中使用两个不同的数据库来解决这个问题......如果可能，请告诉我如何？

当使用两个查询时，我需要将最后一天保存为 PHP MySQL 对象。对于 300K-650K 的行，它开始成为缓存问题。我会使用 ID 的部分选择（通过在 where 术语处设置 id）块，但我没有自动增量 id 字段并且行没有 id（当存储流量数据时，id 会占用大量空间） .

所以我正在尝试这个想法，我想得到第二个意见。

如果我一次取最后一天（300K 行），它将使 PHP 内存过载。我可以使用限制块，或者一个新想法：一次选择一列并将这一列复制到新的真实表中。但我不知道第二种方法是否可行。插入是否在列级别或行级别查看第一个开放空间？主要思想是减少选择的大小..所以是否可以按列构建选择，然后将它们作为列插入 mysql？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T17:24:36.820

那么这里是 php 开始变得奇怪的地方。我接受了你的建议并开始使用数据块。我使用了一个循环来推进 2000 行跳跃的限制。但有趣的是，当我开始使用 php 内存使用和内存峰值函数时，我发现 chunks 方法在大规模和循环中不起作用的原因是因为为 var 设置新值不会释放内存新设置之前的内容..所以你必须使用 unset 或 null 来保持你的记忆在 php，-

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T21:58:19.557

如果这只是 PHP 中的内存问题，您可以尝试使用 PDO 并一次获取 1 个结果行，而不是同时获取所有结果行。

来自PDO 的[PHP.net](http://us3.php.net/manual/en/pdo.query.php)：

```
<?php
function getFruit($conn) {
    $sql = 'SELECT name, color, calories FROM fruit ORDER BY name';
    foreach ($conn->query($sql) as $row) {
        print $row['name'] . "\t";
        print $row['color'] . "\t";
        print $row['calories'] . "\n";
    }
}
?> 
```

# jquery - 获取不可见内容的视口高度

> ID：14041480
> 
> 赞同：0
> 
> 时间：2012-12-26T13:47:59.833
> 
> 标签：jquery, viewport

我得到了`$(window).height()`，但是当页面是纵向的，并且页面可以向下滚动大约 5 页时，我得到了总高度，而不是可见的“视口”。

我想要的是获得页面高度/宽度的比率。因此，当景观为 1600 x 900 时，我得到的比率为 (1600/900) 1.8。

当它在风景中时，我得到的东西是 400 宽，2400 高，然后比率是 5，这不是我想要的。

我尝试了这里提到的几种方法：[http](http://responsejs.com/labs/dimensions/) ://responsejs.com/labs/dimensions/ ，但实际上没有一个给我实际可见的视口，而是给我内容的高度。

我现在只在FF中测试过..

*更新：*

它似乎只发生在纵向模式下，并且只有当 bootstrap.js 认为视口的大小为“手机”大小时，我无法将我的 chrome 窗口调整为那个大小（只有“平板电脑”大小），所以我不不知道 Chrome 是否有同样的问题。

# sql-server - 在 varchar 类型的列上创建非聚集索引是否很好？

> ID：14041481
> 
> 赞同：8
> 
> 时间：2012-12-26T13:48:05.680
> 
> 标签：sql-server

我有一个表，我在其中一个类型的列中创建了一个聚集索引`INT`。我想创建一个非聚集索引来提高查询的性能。但是，我没有任何类型的列`int`。

`varchar`因此，我想到了在类型列上创建一个非聚集索引。

在 type 的列上创建索引会很好`Varchar`吗？它是否有助于提高查询的性能？我知道在类型列上创建索引不是一件好事`varchar`，但只是想知道它是否会提高查询性能。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-26T14:05:18.640

在 VARCHAR 列或列集上创建索引没有任何问题。

关于 VARCHAR/INT 的性能，与 RDBMS 中的所有内容一样，这取决于您在做什么。您可能会想到这样一个事实，即在 VARCHAR 键上对表进行集群（在 SQL Server 中）比在单调递增的数字键上集群效率略低，并且可能会引入碎片。

或者您可能正在考虑您听说过的关于在 VARCHAR 列上编写 JOIN 的内容 - 确实，它比在数字类型上的 JOIN 效率低一点，但它只是效率低一点，没有什么会导致您永远加入 varchar cols。

这并不意味着您不应该在 VARCHAR 列上创建索引。VARCHAR 列上所需的索引将提高查询性能，通常提高几个数量级。如果您需要 VARCHAR 上的索引，请创建它。试图找到一个整数列来创建索引是没有意义的——引擎永远不会使用它。

# typescript - Typescript 中的模糊调用表达式

> ID：14041483
> 
> 赞同：0
> 
> 时间：2012-12-26T13:48:12.947
> 
> 标签：typescript

以下代码段创建了一个不明确的调用表达式错误：

```
/// <reference path="typings/google.maps.d.ts" />
class GoogleMap {
    private geocoder;
    private latlng;

    constructor() {
        this.geocoder = new google.maps.Geocoder();
        this.latlng = new google.maps.LatLng(51.165691, 10.451526000000058);
    }
    private setElements(): void {
        this.geocoder.geocode({ 'address': "Berlin", 'latLng': this.latlng }, (results) => {
            var infowindow = new google.maps.InfoWindow();
            infowindow.setContent(results[0].formatted_address); // 'Ambiguous call expression - could not choose overload'
        })
    } 
```

`setContent(...)`有 2 个重载，即使类型`formatted_address`被正确解析为字符串，编译器也无法解析正确的类型。但是，当我显式设置方法参数的类型时它会起作用：

```
var content: string = results[0].formatted_address;
infowindow.setContent(content); 
```

`infoWindow`还有一个奇怪的点：当我声明为类变量时，我认为这种解决方法不是必需 的。

对我来说，它看起来像一个错误，还是我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T16:06:48.913

据我所知，在 API 的 d.ts 文件中，geocode 的回调函数参数似乎缺少其类型定义，如果是这种情况，TypeScript 默认将其类型定义为“任何”以及该对象内部的任何内容也被定义为“any”类型。

因此，当您打电话时

```
infowindow.setContent(results[0].formatted_address); 
```

TypeScript 正在寻找具有下一个签名的函数：

```
setContent(param1: any); 
```

这在您的 d.ts 文件中没有定义，并且类型“any”可以是任何类型，这可能是您收到此错误的原因。

# mysql - MySQL 与 Symfony2

> ID：14041484
> 
> 赞同：2
> 
> 时间：2012-12-26T13:48:16.980
> 
> 标签：mysql, symfony

我不想使用 Symfony2 学说。而是想编写自己的数据类来处理 MySQL 查询。那么有什么方法可以直接执行sql查询。google 中的大多数文章都在谈论 Doctrine 或 MySQL+Doctrine。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T16:44:06.530

如果您不想使用 Doctrine ORM 甚至 Doctrine DBAL，那么绝对没有什么能阻止您直接使用 PDO/MySQLi。

1.  将 PDO 实例定义为 DIC 服务：

    ```
    <service id="pdo" class="PDO">
        <argument>dns</argument>
        <argument>user</argument>
        <argument>password</argument>
        <call method="setAttribute">
            <argument>2</argument> <!-- use exception for error handling -->
        </call>
    </service> 
    ```

2.  为每个需要数据库连接的服务传递 PDO 实例：

    ```
    <service id="my.custom.service" class="My\Custom\Service">
         <argument type="service" id="pdo" />
    </serivce>

    ---

    namespace My\Custom;

    class Service {
        public function __construct(PDO $pdo) { }
    } 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T15:04:55.183

有一本关于[使用 Doctrine 的 DBAL 层](http://symfony.com/doc/current/cookbook/doctrine/dbal.html)的食谱。

# for-loop - 如何使用批处理脚本评估文件夹中的每个文件

> ID：14041485
> 
> 赞同：1
> 
> 时间：2012-12-26T13:48:23.730
> 
> 标签：for-loop, batch-file, imagemagick, nested-loops

我在批处理脚本中使用 imagemagick 来评估 jpg 和 png 文件的文件夹。我想检查每个图像的打印尺寸，如果它符合我指定的标准，然后输出到一个文本文件。我的代码无法正常工作。它将所有数据输出到文本文件，但前提是文件夹中的每个图像都符合正确大小的标准。我希望它评估每个单独的图像。目前，如果有 1 张图像不在标准范围内，则不会将任何内容写入文本文件。

```
@echo off

REM %f - filename
REM %[size] - original size of image
REM %W - page width
REM %[resolution.x] - X density (resolution) without units
REM %H - page height
REM %[resolution.y] - Y density (resolution) without units
REM \n - newline
REM 1 in = 0.393701 cm - for PNG cm to in conversion

set output="C:\Documents and Settings\mfishm000\Desktop\Image_size.txt"

echo File_name:Size:Width:Height > %output%

REM set width as variable
FOR /F %%x IN ('identify -format "%%[fx:W/resolution.x]" *.jpg') DO SET width=%%x
FOR /F %%x IN ('identify -format "%%[fx:W/resolution.x*0.393701]" *.png') DO SET width=%%x

REM set height as variable
FOR /F %%y IN ('identify -format "%%[fx:H/resolution.y]" *.jpg') DO SET height=%%y 
FOR /F %%y IN ('identify -format "%%[fx:H/resolution.y*0.393701]" *.png') DO SET height=%%y

REM check if width is less than 8.67 and height is less than 11.22\. If yes then output them to txt file
IF %width% LSS 8.67 (
    IF %height% LSS 11.22 (
        identify -format "%%f:%%[size]:%%[fx:W/resolution.x]:%%[fx:H/resolution.y]\n" *.jpg >> %output%
        identify -format "%%f:%%[size]:%%[fx:W/resolution.x*0.393701]:%%[fx:H/resolution.y*0.393701]\n" *.png >> %output%
    )
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T15:24:16.220

认为问题是您需要单独处理每个文件。似乎您最终只得到了最后处理文件的一个宽度/高度值。没有测试过，但这应该可以。

```
 @ECHO OFF

    REM %f - filename
    REM %[size] - original size of image
    REM %W - page width
    REM %[resolution.x] - X density (resolution) without units
    REM %H - page height
    REM %[resolution.y] - Y density (resolution) without units
    REM \n - newline
    REM 1 in = 0.393701 cm - for PNG cm to in conversion

    set output="C:\Documents and Settings\mfishm000\Desktop\Image_size.txt"

    echo File_name:Size:Width:Height > %output%

    for /f %%a in ('dir /b ^| find ".jpg"') do call :processA "%%~a"
    for /f %%a in ('dir /b ^| find ".png"') do call :processB "%%~a"

    exit /B

    :processA
        FOR /F %%x IN ('identify -format "%%[fx:W/resolution.x]" %1') DO SET width=%%x
        FOR /F %%y IN ('identify -format "%%[fx:H/resolution.y]" %1') DO SET height=%%y
        IF %width% LSS 8.67 (
            IF %height% LSS 11.22 (
                identify -format "%%f:%%[size]:%%[fx:W/resolution.x]:%%[fx:H/resolution.y]\n" %1 >> %output%
            )
        )
    goto:eof

    :processB
        FOR /F %%x IN ('identify -format "%%[fx:W/resolution.x*0.393701]" %1') DO SET width=%%x
        FOR /F %%y IN ('identify -format "%%[fx:H/resolution.y*0.393701]" %1') DO SET height=%%y
        IF %width% LSS 8.67 (
            IF %height% LSS 11.22 (
                identify -format "%%f:%%[size]:%%[fx:W/resolution.x*0.393701]:%%[fx:H/resolution.y*0.393701]\n" %1 >> %output%
            )
        )
    goto:eof 
```

# regex - 使用 Jmeter 登录 Facebook

> ID：14041488
> 
> 赞同：0
> 
> 时间：2012-12-26T13:48:30.320
> 
> 标签：regex, facebook, jmeter

我想使用 Jmeter 对我的 Heroku 应用程序进行负载测试。要访问应用程序的功能，我需要先通过 Facebook 登录。我尝试使用代理服务器进行浏览器录制。但问题是 facebook 返回的代码参数（response_type）在回调 URI 中是硬编码的。所以它在运行 Jmeter 脚本时给出异常（代码过期异常）。

我可以在`https://www.facebook.com/dialog/permissions.request`URL 的响应标头中查看代码。所以我需要动态地从这个头中抓取这段代码，并放入回调URL的代码参数中。

为此，我在 URL下的 Jmeter 中使用**正则表达式提取器**`/dialog/permissions.request`。

我的响应标头如下所示：

```
Cache-Control   private, no-cache, no-store, must-revalidate
Date            Wed, 26 Dec 2012 13:37:17 GMT
Expires         Sat, 01 Jan 2000 00:00:00 GMT
Location        http://myapplication.herokuapp.com/oauth/authenticate/facebook?code=SOME-CODE
P3P CP="Facebook does not have a P3P policy. Learn why here: http://fb.me/p3p" 
```

我想提取它`code=some code`并使用正则表达式提取器将其放入下一个 URL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T14:08:05.930

我不知道 JMeter 上下文，但正则表达式可能类似于：

```
\?code=(.*) 
```

您可能需要将反斜杠加倍。如果作为一个整体检查标题`$`可能会出现问题，您可以将其替换为`\n`可能。

[编辑] 我发现[测试人员](http://jakarta.apache.org/oro/demo.html)从[JMeter 页面](http://jmeter.apache.org/usermanual/regular_expressions.html)指向并将其用于您提供的标题内容。显然`$`没有必要，搜索停止在一条线上。仍然不确定是否将反斜杠加倍。实验。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T11:10:16.277

问题不在于 Saswat Sahoo 提到的正则表达式提取器。主要问题是位置标头甚至没有进入 Jmeter 的响应标头。我们可以在浏览器的响应头中看到 Location 头。与浏览器的响应标头相比，Jmeter 响应标头中缺少的信息很少。

# ruby-on-rails - 公司、员工和部门之间的模型关联

> ID：14041489
> 
> 赞同：0
> 
> 时间：2012-12-26T13:48:32.627
> 
> 标签：ruby-on-rails, associations, has-many-through

我在 Ruby on Rails 3 中工作。并试图绘制出三个模型来模拟公司、员工及其各自部门的数据。

得出以下解决方案：

```
class Company < ActiveRecord::Base
  has_many :departments
  has_many :employees, through => :departments
end

class Department < ActiveRecord::Base
  belongs_to :company
  has_many :employees
  has_one :department_description
end

class DepartmentDescription < ActiveRecord::Base
  belongs_to :department
end

class Employee < ActiveRecord::Base
  belongs_to :department
end 
```

这是关联这些模型的“正确”方式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T10:55:48.170

我认为您的最后回应可以解释为什么您正在努力寻找关联这些模型的正确方法。

似乎您将您的部门仅视为一个 join_table，这可能是由于您没有完全理解 has_many => :through 构造，并且它实际上允许您的部门成为具有许多属性的适当模型和其中的方法，因此也是一个“描述”属性。

创建单独的 DepartmentDescription 模型实际上是一种资源浪费。Chad Fowler 在他的 Rails 食谱中有几个很好的例子：has_many => through 和嵌套资源......所以检查一下。

# php - 如果只有 1 个键，则从多维数组中删除数组

> ID：14041492
> 
> 赞同：2
> 
> 时间：2012-12-26T13:48:35.807
> 
> 标签：php, arrays, multidimensional-array

```
Array
(
[9-1] => Array
    (
        [intensity] => 1
        [time] => 43932
    )

[9-2] => Array
    (
        [intensity] => 1
    )

[85-1] => Array
    (
        [intensity] => 1
        [time] => 40271
    )

[85-2] => Array
    (
        [intensity] => 1
    )

) 
```

我将如何删除只有 1 个键的子阵列，那就是“强度”？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-26T13:55:18.933

```
$array = array_filter($array, function (array $i) {
    return count($i) != 1 || key($i) != 'intensity';
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-26T13:56:03.983

```
foreach($yourArray as $key => $value)
  if (is_array($value) && count($value) == 1 && isset($value['intensity']))
    unset($yourArray[$key]); 
```

# java - jpa 命名查询：列表的命名绑定变量

> ID：14041493
> 
> 赞同：7
> 
> 时间：2012-12-26T13:48:44.530
> 
> 标签：java, sql, jpa

如果您有一个带有如下列表的命名查询：

```
@NamedQuery(name="selection" , query=" SELECT x FROM Employee x WHERE x.name IN ('Jack', 'Jill')") 
```

是否可以将列表命名为绑定变量，以便您设置所需的内容：

```
q.setParameter( .......  ); 
```

欢迎大家提出意见

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-26T13:52:48.040

是的，这是可能的。就像对任何其他参数一样：

```
@NamedQuery(name="selection" , query=" SELECT x FROM Employee x WHERE x.name IN :names")

q.setParameter("names", Arrays.asList("Jack", "Jill")); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T13:54:43.967

使用这种方式

```
@NamedQuery(name="selection" , query=" SELECT x FROM Employee x WHERE x.name IN (:availableCollection)") 

namesCollection // conatains your Lsit of names

query.setParameterList('availableCollection', namesCollection); 
```

# c# - Spintax 解析器的正则表达式匹配性能问题

> ID：14041495
> 
> 赞同：4
> 
> 时间：2012-12-26T13:48:53.983
> 
> 标签：c#, regex, spintax

我正在编写一个应用程序，该应用程序旨在处理具有大量自旋税的数千篇文章/条目，格式如下：

```
{Hello|Hi} {World|There!}, how are you? 
```

但是，当我使用分析器运行应用程序时，我注意到处理 Regex 的部分占用了大量资源，并且由于内存不足问题，我的应用程序最终崩溃。任何人都可以提出一种改进我的代码的方法或更好的方法来解析 spintax 吗？

```
public static String Spin(String text)
{
        Regex reg = new Regex(@"\{[^\{\}]*\}");
        Random rand = new Random((int)DateTime.Now.Ticks);
        while (true)
        {
            Match m = reg.Match(text);
            if (!m.Success) break;
            String[] parts = m.Value.TrimStart('{').TrimEnd('}').Split('|');
            int i = rand.Next(parts.Length);
            text = text.Substring(0, m.Index) + parts[i] + text.Substring(m.Index + m.Length);
        }
        return text;
  } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-26T23:31:15.253

我已经实现了我的快速版本（no `Regex`、no `Split`、no `Substring`、no`Replace`和其他字符串操作方法）。要复制字符串，我正在使用`String.CopyTo`它将符号复制到普通`char`数组。

此代码完全支持嵌套 Spintaxes（可能无限深度）。一个限制是每个 Spintax 的最大选项数，目前是 100，但可以更改为 1000 或更多...另一个限制是输入字符串的最大长度，现在是 100000，但也可以增加。

关于性能 - 我的测试表明，此代码比任何优化的 Regex 解决方案（包括 Jim Mischel 的解决方案）快 15 倍以上，比使用 Substring 和其他字符串操作方法的版本快约 5 倍。我已经在 VS 2012 中使用优化代码设置在发布模式下对此进行了测试。

```
 static int[] partIndices = new int[100];
    static int[] depth = new int[100];
    static char[] symbolsOfTextProcessed = new char[100000];

    public static String SpinEvenMoreFaster(String text)
    {
        int cur = SpinEvenMoreFasterInner(text, 0, text.Length, 0);
        return new String(symbolsOfTextProcessed, 0, cur);
    }

    public static int SpinEvenMoreFasterInner(String text, int start, int end, int symbolIndex)
    {
        int last = start;
        for (int i = start; i < end; i++)
        {
            if (text[i] == '{')
            {
                int k = 1;
                int j = i + 1;
                int index = 0;
                partIndices[0] = i;
                depth[0] = 1;
                for (; j < end && k > 0; j++)
                {
                    if (text[j] == '{')
                        k++;
                    else if (text[j] == '}')
                        k--;
                    else if (text[j] == '|')
                    {
                        if (k == 1)
                        {
                            partIndices[++index] = j;
                            depth[index] = 1;
                        }
                        else
                            depth[index] = k;
                    }
                }
                if (k == 0)
                {
                    partIndices[++index] = j - 1;
                    int part = rand.Next(index);
                    text.CopyTo(last, symbolsOfTextProcessed, symbolIndex, i - last);
                    symbolIndex += i - last;
                    if (depth[part] == 1)
                    {
                        text.CopyTo(partIndices[part] + 1, symbolsOfTextProcessed, symbolIndex, partIndices[part + 1] - partIndices[part] - 1);
                        symbolIndex += partIndices[part + 1] - partIndices[part] - 1;
                    }
                    else
                    {
                        symbolIndex = SpinEvenMoreFasterInner(text, partIndices[part] + 1, partIndices[part + 1], symbolIndex);
                    }
                    i = j - 1;
                    last = j;
                }
            }
        }
        text.CopyTo(last, symbolsOfTextProcessed, symbolIndex, end - last);
        return symbolIndex + end - last;
    } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-26T15:15:14.327

这是一个非正则表达式的替代方案。

**2012-12-27 更新（见[新的 ideone 演示](http://ideone.com/C3vjBw)）**

1.  优化 OP 的代码以使用静态成员而不是在循环中声明变量，使用`RegexOptions.Compiled`和使用`Substring`而不是`TrimLeft`和`TrimRight`。这些优化将 OP 代码的执行时间缩短了近 33%。
2.  更新`SpinNoRE`以处理任意嵌套的 spintax、优化的代码和添加的注释。
3.  为清楚起见，分别重命名为`Spin`and 和`SpinFaster`to 。`SpinRE``SpinNoRE`
4.  使用嵌套示例更新了测试用例。OP 的代码在处理嵌套的 spintaxes 时要慢得多（可以理解，因为每一级嵌套都会强制进行额外的正则表达式匹配）。

新的[ideone演示](http://ideone.com/C3vjBw)可用；下面的代码（演示中提供的注释；见链接）：

```
public static String SpinNoRE(String text)
{
    int i, j, e = -1;
    char[] curls = new char[] {'{', '}'};
    text += '~';

    do
    {
        i =  e;
        e = -1;
        while ((i = text.IndexOf('{', i+1)) != -1)
        {
            j = i;
            while ((j = text.IndexOfAny(curls, j+1)) != -1 && text[j] != '}')
            {
                if (e == -1) e = i;
                i = j;
            }
            if (j != -1)
            {
                parts = text.Substring(i+1, (j-1)-(i+1-1)).Split('|');
                text = text.Remove(i, j-(i-1)).Insert(i, parts[rand.Next(parts.Length)]);
            }
        }
    }
    while (e-- != -1);

    return text.Remove(text.Length-1);
} 
```

结果：

```
Input Text:       Oh! {{I'm|You're} here!|How are you{ doing{|, {buddy|pal|guy}}|}?}
Testing SpinRE:   Oh! You're here!
Testing SpinRE:   Oh! How are you doing?
Testing SpinRE:   Oh! How are you?
Testing SpinRE:   Oh! How are you doing, buddy?
Testing SpinRE:   Oh! I'm here!
Testing SpinRE:   Oh! How are you doing, guy?
Testing SpinRE:   Oh! How are you doing?
Testing SpinRE:   Oh! I'm here!
Testing SpinRE:   Oh! I'm here!
Testing SpinRE:   Oh! How are you doing?
Testing SpinNoRE: Oh! How are you doing, buddy?
Testing SpinNoRE: Oh! You're here!
Testing SpinNoRE: Oh! How are you?
Testing SpinNoRE: Oh! How are you?
Testing SpinNoRE: Oh! You're here!
Testing SpinNoRE: Oh! I'm here!
Testing SpinNoRE: Oh! How are you doing?
Testing SpinNoRE: Oh! How are you?
Testing SpinNoRE: Oh! How are you doing, buddy?
Testing SpinNoRE: Oh! I'm here!

Time elapsed over 100,000 runs of each in alternation:

SpinRE:           03.686s
SpinNoRE:         00.921s 
```

（接触C#已经6年多了，如有错误请见谅。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T19:51:41.960

我建议对您的代码进行一些更改。首先，将正则表达式定义移出方法并使用该`RegexOptions.Compiled`选项来减少每次调用的设置时间。此外，将随机数生成器的创建从大量使用的方法中移出。

此外，您可以通过告诉正则表达式从哪里开始匹配来消除许多不必要的字符串搜索。如果您最终对循环进行多次迭代，这一点很重要。这个想法是，如果您已经完成了替换直到字符串中的位置 M，则没有理由检查匹配项，因为不会有任何匹配项。

您可以通过将表达式替换为以下内容来消除对`TrimStart`和的调用：`TrimEnd`

```
String[] parts = m.Value.Substring(1, m.Value.Length-2).Split('|'); 
```

您已经知道字符串以 开头`{`和结尾`}`，并且中间没有这两个字符中的任何一个，因此您所要做的就是剪掉第一个和最后一个字符。没有理由承担由`TrimStart`and创建的临时字符串的成本`TrimEnd`。

另一种可能性是将捕获组添加到正则表达式（在要捕获的部分周围放置括号），并对捕获的文本而不是整个匹配的表达式进行操作。

将所有这些建议放在一起会导致：

```
static Regex reg = new Regex(@"\{([^\{\}]*)\}", RegexOptions.Compiled);
static Random rand = new Random();
public static String Spin(String text)
{
    int matchPos = 0;
    while (true)
    {
        Match m = reg.Match(text, matchPos);
        if (!m.Success) break;
        String[] parts = m.Groups[1].Value.Split('|');
        int i = rand.Next(parts.Length);
        text = text.Substring(0, m.Index) + parts[i] + text.Substring(m.Index + m.Length);
        matchPos = m.Index;
    }
    return text;
} 
```

也就是说，这不支持嵌套，并且制作支持嵌套的正则表达式解决方案可能有些困难。它在速度方面也不是最佳的，因为它花费了大量时间来构建和重建`text`字符串。稍加考虑，您可以对其进行更多优化，但它永远不会像[SergyS 提供](https://stackoverflow.com/a/14047581/56778)的优化自定义解析器解决方案那样快。

如果速度是最重要的，那么您将需要一个自定义解析器。正则表达式版本不会那么快，但如果它足够快，它的好处是比自定义解析器更小，更容易理解和修改。

# java - 带有 HTTP 标头的 Rest 令牌身份验证

> ID：14041496
> 
> 赞同：3
> 
> 时间：2012-12-26T13:49:03.797
> 
> 标签：java, rest, authentication, token

这是一个带有登录屏幕的现有系统，现在我将一些服务公开为 REST 服务。我为此 Rest(jersey) 服务构建了一个身份验证令牌登录系统。用户发送用户名密码，然后服务器返回一个计算为的令牌；

```
sha1(username+password+currenttime(or any random number)) 
```

用户将使用此令牌登录应用程序以获取更多请求。服务器在数据库中保存一个带有时间戳和用户 ID 的令牌副本，如果时间戳有效，则登录该用户。

考虑到会用到**HTTPS ，有几个问题；**

我的设计中的一切看起来都好吗？（哈希的生成和我在数据库中保存的方式）在我看来，最薄弱的一点是我需要通过 POST 请求发送普通的用户名和密码，但由于它是 HTTPS，我想这不会是一个问题。

另一件事，对于第一个请求，因为它是一个现有系统，所以我的数据库中没有用户密码，但保留了它们的加盐哈希版本。我想给所有客户这个加盐算法来向我发送他们的密码哈希是不安全的，所以我比较哈希而不是密码。这有意义吗=

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T13:57:48.737

1.  我通常会在 HTTP 标头中传递令牌。

2.  无论您使用 POST 还是 PUT 都无关紧要。

3.  我建议帮助防止重放类型攻击的其他方法是在每个 POST 请求中包含一个随机数（不断增加的值）。然后，服务器将跟踪最后使用的 nonce，并阻止任何使用以前使用的 nonce 的请求执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T13:58:22.527

1/2-我建议将用户名/密码发布到服务器，然后服务器可以在正文中返回令牌。对我来说最有意义：您实际上并没有在服务器上存储太多，所以 PUT 是错误的，并且查询参数根本没有意义。标头应该在请求之间保持一致，因此它们也没有意义。实际使用令牌进行通信时，请随意使用查询参数或标头。真的没关系。

3-我会选择一个稍长的散列算法（sha256？）

# c# - 运行时的反序列化对象类型转换

> ID：14041497
> 
> 赞同：2
> 
> 时间：2012-12-26T13:49:06.897
> 
> 标签：c#, casting, windows-phone-8

假设我有这个类层次结构：

```
public abstract class Base {};
public class Child1 : Base {};
public class Child2 : Base {}; 
```

在某些时候，我将继承的类之一保留在其中`IsolatedStorageSettings.ApplicationSettings`，然后将其恢复为`object`. 如何在运行时确定它是否`Child1`为`Child2`正确类型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T14:00:01.727

你不能只用 is 吗？

```
if(myobject is Child1)
    var child1 = (Child1)myobject;
else if (myobject is Child2)
    .... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T14:00:48.693

最简单的方法是使用`as`关键字进行转换并检查结果：

```
Base child;
child = mysteryObject as Child1;
if(child == null)
{
    // mysteryObject is Child2
    child = mysteryObject as Child2;
}
else
{
    // mysteryObject is Child1
} 
```

您也可以改用`is`关键字。

# web-scraping - 抓取 yahoo Group 数据

> ID：14041504
> 
> 赞同：0
> 
> 时间：2012-12-26T13:49:38.270
> 
> 标签：web-scraping, yahoo-api

我需要从 yahoo 组导出数据，是否有任何 API 可以导出帖子数据，例如成员列表、主题名称、主题作者、对该主题的总响应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T05:36:07.633

不，很遗憾，没有适用于 Yahoo! 的官方 API！团体。

# java - 睡眠线程失去监控锁的所有权？

> ID：14041505
> 
> 赞同：0
> 
> 时间：2012-12-26T13:49:39.257
> 
> 标签：java, multithreading, wait, monitor, synchronized

我想亲眼验证睡眠和等待之间的区别。

等待只能在同步块中完成，因为它释放了监视器锁的所有权。虽然睡眠与监视器锁无关，并且已经是监视器锁所有者的线程在睡眠时不应失去其所有权。

为此我做了一个测试：

脚步：

1.  启动了一个在同步块中等待 5 秒的线程。
2.  等待 3 秒并启动另一个获取监视器锁的线程（因为 Thread-A 正在等待）并在持有监视器锁的同时简单地休眠 5 秒。

预期结果：线程-A 8 秒后才重新获得锁，当线程-B 最终通过退出同步块释放监视器锁。

实际结果。线程 - A 在 5 秒后获取监视器锁。

有人可以向我解释这里发生了什么吗？

```
public static void main(String[] args) {

    Runnable r1 = new Runnable() {

        @Override
        public void run() {

            System.out.println("r1 before synch block");
            synchronized (this) {

                System.out.println("r1 entered synch block");
                try {

                    wait(5000);
                    System.out.println("r1 finished waiting");

                } catch (InterruptedException e) {

                    e.printStackTrace();

                }

            }

        }

    };

    Runnable r2 = new Runnable() {

        @Override
        public void run() {

            System.out.println("r2 before synch block");
            synchronized (this) {

                System.out.println("r2 entered synch block");
                try {

                    Thread.currentThread();
                    Thread.sleep(5000);
                    //wait(5000);
                    System.out.println("r2 finished waiting");

                } catch (InterruptedException e) {

                    e.printStackTrace();

                }

            }

        }

    };

    try {

        Thread t1 = new Thread(r1);
        Thread t2 = new Thread(r2);

        t1.start();
        Thread.currentThread();
        Thread.sleep(3000);
        t2.start();

        t1.join();
        t2.join();
        System.out.println(Thread.currentThread().getName() + " Finished joining");

    } catch (Exception e) {

        e.printStackTrace();

    }

} 
```

编辑：

好的，我理解我的错误 - 我正在等待这个 - r1/r2 而不是同一个对象。

现在我改变了它并且都在同一个对象上获取 - Main 的类实例。1\. r1 获得 Main.this 的监控锁的所有权 2\. r1 释放它。3\. 当 r1 尝试重新获取它时，我得到一个异常：

```
Exception in thread "Thread-0" java.lang.IllegalMonitorStateException
at java.lang.Object.wait(Native Method)
at Main$1.run(Main.java:28)
at java.lang.Thread.run(Unknown Source)
on synchronized (Main.this) 
```

这里有什么问题？

```
public static void main(String[] args) {

        Main main = new Main();
        main.test();

    }

    public void test() {

        Runnable r1 = new Runnable() {

            @Override
            public void run() {

                System.out.println("r1 before synch block");
                synchronized (Main.this) {

                    System.out.println("r1 entered synch block");
                    try {

                        wait(5000);
                        System.out.println("r1 finished waiting");

                    } catch (InterruptedException e) {

                        e.printStackTrace();

                    }

                }

            }

        };

        Runnable r2 = new Runnable() {

            @Override
            public void run() {

                System.out.println("r2 before synch block");
                synchronized (Main.this) {

                    System.out.println("r2 entered synch block");
                    try {

                        Thread.currentThread();
                        Thread.sleep(5000);
                        //wait(5000);
                        System.out.println("r2 finished waiting");

                    } catch (InterruptedException e) {

                        e.printStackTrace();

                    }

                }

            }

        };

        try {

            Thread t1 = new Thread(r1);
            Thread t2 = new Thread(r2);

            t1.start();
            Thread.currentThread();
            Thread.sleep(3000);
            t2.start();

            t1.join();
            t2.join();
            System.out.println(Thread.currentThread().getName() + " Finished joining");

        } catch (Exception e) {

            e.printStackTrace();

        }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T13:55:10.920

这两个线程实际上持有两个不同的锁。假设你的类名是MyClass，把两行synchronized(this)改成synchronized(MyClass.this)，这样两个线程就持有同一个锁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T18:37:12.713

这是一种更好的方法来使测试工作，并证明它有效。您的问题是您没有正确等待并且无缘无故地使用了 Thread.currentThread() 。

顺便说一句，如果您想在不丢失信号的情况下使用等待通知机制的信号，我建议您阅读[**此链接**](http://tutorials.jenkov.com/java-concurrency/thread-signaling.html)。

```
public class MAIN
  {
  public static void main(final String[] args)
    {
    final Object sync =new Object();
    final long startTime=System.currentTimeMillis();
    final Runnable r1=new Runnable()
      {
        @Override
        public void run()
          {
          System.out.println((System.currentTimeMillis()-startTime)/1000+": r1 before synch block");
          synchronized(sync)
            {
            System.out.println((System.currentTimeMillis()-startTime)/1000+": r1 entered synch block");
            try
              {
              sync.wait(5000);
              System.out.println((System.currentTimeMillis()-startTime)/1000+": r1 finished waiting");
              }
            catch(final InterruptedException e)
              {
              e.printStackTrace();
              }
            }
          System.out.println((System.currentTimeMillis()-startTime)/1000+": r1 exited synch block");
          }
      };
    final Runnable r2=new Runnable()
      {
        @Override
        public void run()
          {
          System.out.println((System.currentTimeMillis()-startTime)/1000+": r2 before synch block");
          synchronized(sync)
            {
            System.out.println((System.currentTimeMillis()-startTime)/1000+": r2 entered synch block");
            try
              {
              Thread.sleep(5000);
              System.out.println((System.currentTimeMillis()-startTime)/1000+": r2 finished waiting");
              }
            catch(final InterruptedException e)
              {
              e.printStackTrace();
              }
            }
          System.out.println((System.currentTimeMillis()-startTime)/1000+": r2 exited synch block");
          }
      };
    try
      {
      final Thread t1=new Thread(r1);
      final Thread t2=new Thread(r2);
      t1.start();
      Thread.sleep(3000);
      t2.start();
      t1.join();
      t2.join();
      System.out.println((System.currentTimeMillis()-startTime)/1000+":  Finished joining");
      }
    catch(final Exception e)
      {
      e.printStackTrace();
      }
    }
  } 
```

# objective-c - 在块内调用块时执行错误访问

> ID：14041510
> 
> 赞同：1
> 
> 时间：2012-12-26T13:49:57.290
> 
> 标签：objective-c, ios, objective-c-blocks

## 界面

```
@interface MyClass

@property (nonatomic, copy) SomeBlock someBlock;

@end 
```

## 执行

```
- (void)myMethodWithBlock:(SomeBlock)theBlock
{
  self.someBlock = theBlock;
  [someHelper doSomethingWithCompletionBlock:^(){
        self.someBlock(arg1);
  }
} 
```

* * *

哪里`self.someBlock(arg1)`给我`EXEC_BAD_ACCESS`，我确实定义`someBlock`了被复制。

可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T16:29:04.347

所以看起来块有时是`nil`. 调用块时，它会被取消引用，但会取消引用`nil`并使`NULL`应用程序崩溃。检查`if (self.someBlock != nil)`，它不应该再崩溃了。

# c# - 事件和线程

> ID：14041513
> 
> 赞同：5
> 
> 时间：2012-12-26T13:50:09.210
> 
> 标签：c#, .net, multithreading, events, event-handling

假设我有：

```
ethernet_adapter.PacketArrived += (s, e) => 
{
    //long processing...
}; 
```

处理可能需要很长时间，当它在中间时，另一个数据包已经到达。接下来会发生什么：处理完成，然后触发另一个事件，或者可能立即触发新事件但在新线程上？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T13:52:40.023

很有可能这是一个同步操作。它发生在另一个线程上的唯一方法是如果引发事件的对象在另一个线程上这样做，或者如果你在处理程序中这样做。有很多方法可以做到这一点，但[`System.Threading.Tasks.Task`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.task.aspx)如果使用 .NET 4，通常会首选使用。

仔细考虑您希望应用程序的行为方式。简单地在新线程上处理每个数据包可能会导致数据包被无序处理。您可能希望将它们排队并在此时让后台线程处理它们。或者你可能根本不需要做任何事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T14:05:14.483

你不应该假设。它可以是任何东西，具体取决于（`ethernet_adapter`对象）类型如何引发事件。

如果是同步操作，则在当前操作正在进行之前不会引发新事件。

如果是异步操作，则立即引发新事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T13:54:20.307

您可以按如下方式在 ThreadPool 中排队整个任务。

```
ethernet_adapter.PacketArrived += (s, e) => 
{
ThreadPool.QueueUserWorkItem("long processing item");
}; 
```

或者您可以为每个线程创建任务（.net 4.0）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T14:09:41.860

假设您的类中有一个方法`ethernet_adapter`：

```
protected virtual void OnPacketArrived(PacketArrivedEventArgs e)
{
    EventHandler<PacketArrivedEventArgs> handler = this.PacketArrived;

    if (handler != null)
    {
        handler(this, e);
    }
} 
```

长时间处理同步订阅者（如您的示例）将阻止所有订阅者的内部枚举。但！它可能不会阻止对`OnPacketArrived`if`ethernet_adapter`每次在不同线程上调用它的后续调用 - 因此您将获得两个并发的长处理，依此类推。

作为一个例子，看一下`Socket`实现：它的异步方法导致在 IOCP 线程上调用完成回调 - 每次都有不同的 IO `ThreadPool`。

# php - Symfony2 中的搜索框与 Solr

> ID：14041524
> 
> 赞同：13
> 
> 时间：2012-12-26T13:50:52.813
> 
> 标签：php, search, symfony, solr

我想在我的网站首页创建*搜索框*，但我不知道如何使用*Solr*创建一个。我所有的网站都是用**Symfony2**开发的。我不使用数据库进行搜索。

我怎么能做到这一点？

在我的项目*Solr* bundle 中使用这个：

```
use SolrClient;
use SolrQuery;
use SolrObject;
use SolrDocument;
use SolrInputDocument; 
```

在基本*树枝*文件中：

```
<form action="{{ path("home_search") }}" method="get">
  <input type="search" name="search"><br>
  <input type="submit" value="search">
</form> 
```

我的控制器的一些例子：

```
public function searchAction($templateName = '')
{
 $solrService = $this->get('rocket.solr_service');

    $solrQuery = new SolrQuery('*:*');
    $solrQuery->addField('id')
        ->addField('name');

    if (!empty($templateName)) {
        $solrQuery->addFilterQuery(sprintf('name:"%s" OR design_template_tag_name:"%1$s" OR design_category_name:"%1$s"',
                                           $templateName));
    }

    $solrQuery->setRows(1000);

    $solrObject = $solrService->query(
        'RocketBraPrintBundle:DesignTemplate',
        $solrQuery,
        SolrService::WRITER_FORMAT_SOLR_OBJECT
    );

    $templates = $solrObject->offsetGet('response')->offsetGet('docs');
    if (!$templates) {

        if (!empty($templateName)) {
            $this->setFlash('catalog-message', 'No results found for your search.');
            return $this->searchDesignTemplates($categoryTreeSlug,
                                                $productFamilyFaceId);
        }

        return array();
    }

    return $templates;

} 
```

但是在渲染的树枝文件中，我不知道我会写什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T15:10:56.823

您可以将 [https://github.com/nelmio/NelmioSolariumBundle](https://github.com/nelmio/NelmioSolariumBundle) 与使用日光浴室实现一起使用

非常适合更好的 solr 查询

我已经用过了

这里有一个样本

```
 $query = 'foo';

    $page = 1;
    if (array_key_exists('page', $params)) {
        $page = (int) $params['page'];
    }
    $rows = 10;
    if (array_key_exists('limit', $params)) {
        $rows = (int) $params['limit'];
    }

    $solarium = $this->get('solarium.client');

    //select
    $select = $solarium->createSelect();
    $escapedQuery = $select->getHelper()->escapePhrase($query);

    //dismax
    $dismax = $select->getDisMax();
    // override the default setting of 'dismax' to enable 'edismax'
    $dismax->setQueryParser('edismax');
    //fields
    $dismax->setQueryFields(
                    array('title^5','description^0.7'));

    $select->setQuery($escapedQuery);

    //limit
    $select->setRows($rows);
    $select->setStart(($page - 1) * $rows);

    //type spot only
    $select->createFilterQuery('typeFilter')
            ->setQuery(sprintf('type:%s', 'spot'));

    $resultset = $solarium->select($select); 
```

使用 foreach 或 twig "for in" 显示您的 solr doc

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-24T12:51:16.037

我还没有尝试过，但是您可以尝试在 Symfony2 中使用这个新的[Jobeet 教程](http://www.intelligentbee.com/blog/2013/08/29/symfony2-jobeet-day-17-search/ "在 Symfony2 中使用 Solr 进行搜索 - Jobeet")，该教程解释了如何构建系统以及如何在其中使用 Solr。
我希望这会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-02T13:06:00.357

您通过以下方式获得 GET 参数

$searchName = $request->query->get('search_name');

但是为此，您仍然需要 $request 变量。您可以将其用作参数并将您的方法签名更改为：

公共函数 anagraficaAction(请求 $request)

这样，您可以在方法中调用 $request 参数。

另一种方法是在您的方法中获取当前控制器的请求。

$request = $this->get('request');

使用它，您可以将 setParameter 更改为：

setParameter('nome', $searchName)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T12:21:57.807

试试这样的..

控制器.php：

```
public function searchAction($templateName = '')
{
    // ------
    // ------

    $resultset = $solrObject->offsetGet('response');

    // Do some error checks

    return array('resultset'=>$resultset);

} 
```

枝条：

```
<ul>
{% for doc in resultset %}
  <li> {{ doc.name }} </li>
{% endfor %}
</ul> 
```

# iphone - 如何在ios中将变量从一个控制器传递到另一个控制器？

> ID：14041525
> 
> 赞同：1
> 
> 时间：2012-12-26T13:50:53.210
> 
> 标签：iphone, objective-c, ios

我有一个带有变量的控制器

```
NSString *str; 
```

在同一个控制器中，我`userId`在字符串中分配`str`。

我需要`userId`在另一个控制器中显示用户数据。

`userId`我应该如何在另一个控制器中获得价值？

下面是我的代码：

主视图控制器.h

```
@property (nonatomatic) NSString *str; 
```

主视图控制器.m

```
@synthesize str;

str = 1; 
```

现在在 FirstViewController.h

```
@property(nonatomatic, retain) MainViewController *mainCon; 
```

第一视图控制器.m

```
@synthesize mainCon;

NSLog(@"user id is %@", mainCon.str); 
```

在日志中我得到空值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T14:27:23.297

您最好的选择是 [prepareForSegue] 方法

在那种方法中，我通常有类似的东西

```
if ([segue.identifier isEqualToString@"segueName"]){
    //I use this if statement to check which segue I am performing, if I have multiple
    //segues from a single view controller
    FirstVc *newViewController = segue.destinationViewController;
    newViewController.str = self.str;
} 
```

这会将字符串从您的主 VC 传递到您的新 VC。这一切都假设您的转换是在 Interface Builder 中布置的，或者以某种方式让您可以访问 segues 和标识符

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T14:05:54.777

在 MainVC 中获取一个属性并从 FirstVC 传递值，然后它将为您工作。

以下代码必须在 MainVC 中

```
@property (strong, nonatomic) NSString *str; 
@synthesize str; 
```

在FirstVC

```
MainVC * vc = [[MainVC alloc]init];
vc.str = @"test"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T14:22:37.640

**第1步：**

您必须创建一个**viewcontroller** 类作为**常量**

**第2步：**

您可以删除**常量**类中的**.m**文件

 ****第三步：**

您必须在**Projectname_Prefix.pch**中导入**Constants.h** ，这将是 xcode 在其他资源文件夹中的。现在，常量类将充当全局类。

 ****第4步：**

**现在，您可以在Constants.h**中声明变量。**在Constants.h**中声明的变量将充当全局变量。您可以在任何地方访问它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-19T06:08:33.257

```
SecondViewController *secondViewController = [[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil];
secondViewController.str1 = str;
[self.navigationController pushViewController:secondViewController animated:YES]; 
```

这是一个更快更简单的解决方案。****

# entity-framework - ef 代码中的 DbMigration 优先 4.4

> ID：14041526
> 
> 赞同：0
> 
> 时间：2012-12-26T13:50:57.453
> 
> 标签：entity-framework, ef-code-first, entity-framework-migrations

我们首先使用 ef 代码 4.4 和 db 迁移。我在我们的`DbContext`. 当我`Update-Database`从包管理器控制台运行命令时，它会生成数据库，但随后会抛出异常并显示消息

```
There is already an object named 'PayPal' in the database. 
```

当我使用详细命令检查包管理器控制台中的 sql 语句时，有两个用于创建 paypal 表的命令，一个来自 Migrations 文件夹中的 InitialCreate.cs，另一个来自同一文件夹中的 test.cs。

**编辑1：**两者中
的`Up`方法都包含以下第一个条目。`DateTime_InitialCreate.cs``DateTime_test.cs`

```
CreateTable(
                "dbo.PayPal",
                c => new
                    {
                        Id = c.Int(nullable: false, identity: true),
                        ActionUrl = c.String(),
                        Cmd = c.String(),
                        Price = c.String(),
                        Interval = c.String(),
                        IntervalType = c.String(),
                        AutoRecurring = c.String(),
                        Business = c.String(),
                        Return = c.String(),
                        CancelUrl = c.String(),
                        NotifyUrl = c.String(),
                        PlanName = c.String(),
                        Amount = c.String(),
                        CurrencyCode = c.String(),
                    })
                .PrimaryKey(t => t.Id); 
```

检查代码时，两个文件看起来完全一样，没有任何区别。

我应该怎么做才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T18:39:45.640

如果我没看错（如果我错了，请纠正我），你试图在这两个位置创建表而不检查它是否已经存在。在这种情况下，当您运行 Update-Database 时，它​​会尝试创建两次，因为它在两个文件中都找到了它。此时您会因为它已经存在而收到错误。

您需要检查以确保两个文件中都不存在该表，以防止这种情况发生。

如果我读错了，请告诉我。

# c++ - 使用 mingw 构建 Qt 5.0

> ID：14041532
> 
> 赞同：2
> 
> 时间：2012-12-26T13:51:14.483
> 
> 标签：c++, c++11, qt5, visual-c++-2012, mingw-w64

有一些方法可以使用 mingw64 或 Visual Studio 2012 构建 Qt 5.0，还是我要等待下一个版本？我已经尝试在以下链接中使用 mingw64 构建 qt 5.0 的说明：http://qt-project.org/wiki/MinGW-64-bit[但](http://qt-project.org/wiki/MinGW-64-bit)似乎我不适合我......有人编译了 Qt 5.0 mingw64（或 Visual C++ 2012）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T17:41:04.317

检查这些预构建的 Qt 二进制文件，用于 4.8.4、5.0.0、5.0.1、32 和 64 位，使用 mingw-w64 编译（我猜是 gcc 4.7.x）

[http://sourceforge.net/projects/mingwbuilds/files/external-binary-packages/Qt-Builds/](http://sourceforge.net/projects/mingwbuilds/files/external-binary-packages/Qt-Builds/)

# jsp - 在 JSP 中调用 bean 方法而不使用 scriptlet

> ID：14041534
> 
> 赞同：3
> 
> 时间：2012-12-26T13:51:19.757
> 
> 标签：jsp, jstl

如何在 JSP 中调用 bean 方法而不使用诸如`<% myBean.method() %>`？

我已经在 J​​SP 中创建了我的应用程序。我知道可以使用 JSF，但我不想创建一个新项目。

是否可以使用 JSP 或 JSTL 来解决这个问题并调用 bean 方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T13:56:37.920

您可以使用 EL 调用 bean 方法。只需将具有该方法的类的引用传递给 JSP 并像这样调用它：`${objectName.methodName()}`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T13:53:51.910

这在 JSP 中是不可能的，更好的解决方案是使用 JSF。阅读 JSF.IN`actionListener`中的相关信息，以便在 JSP 中实现此功能，您必须创建自定义标记。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T13:57:13.500

**调用Bean.jsp**

```
<HTML>
<BODY>
<jsp:useBean id="bean" class="form.Bean" />
Message is: <jsp:getProperty name="bean" property="text" /> 
</BODY>
</HTML> 
```

**Bean.java**

```
package form;
public class Bean
{
private String text;
public String getText()
{
return text;
}
public Bean()
{
 text="Hello World";
}
} 
```

# c# - 在 C# 中创建线程

> ID：14041535
> 
> 赞同：0
> 
> 时间：2012-12-26T13:51:20.990
> 
> 标签：c#, multithreading

我将如何在 C# 中创建线程？

在java中，我要么实现Runnable接口

```
class MyThread implements Runnable{
public void run(){
//metthod
} 
```

进而

```
MyThread mt = new MyThread;
Thread tt = new Thread(mt);
tt.start() 
```

或者我可以简单地扩展 Thread 类

```
class MyThread extends Thread{
public void run(){
//method body
} 
```

进而

```
MyThread mt = new MyThread
mt.start(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-26T13:53:01.410

不，与 Java 相反，在 .NET 中您不能扩展[Thread](http://msdn.microsoft.com/en-us/library/system.threading.thread.aspx)类，因为它是密封的。

因此，要在新线程中执行函数，最天真的方法是手动生成一个新线程并将要执行的函数传递给它（在这种情况下作为匿名函数）：

```
Thread thread = new Thread(() => 
{
    // put the code here that you want to be executed in a new thread
});
thread.Start(); 
```

或者如果您不想使用匿名委托，请定义一个方法：

```
public void SomeMethod()
{
    // put the code here that you want to be executed in a new thread
} 
```

然后在同一个类中启动一个新线程，传递对该方法的引用：

```
Thread thread = new Thread(SomeMethod);
thread.Start(); 
```

如果你想将参数传递给方法：

```
public void SomeMethod(object someParameter)
{
    // put the code here that you want to be executed in a new thread
} 
```

进而：

```
Thread thread = new Thread(SomeMethod);
thread.Start("this is some value"); 
```

* * *

这是在后台线程中执行任务的本机方式。为了避免支付创建新线程的高昂代价，您可以使用[ThreadPool](http://msdn.microsoft.com/en-us/library/system.threading.threadpool.aspx)中的线程之一：

```
ThreadPool.QueueUserWorkItem(() =>
{
    // put the code here that you want to be executed in a new thread
}); 
```

或使用[异步委托执行](http://msdn.microsoft.com/en-us/library/22t547yb.aspx)：

```
Action someMethod = () =>
{
    // put the code here that you want to be executed in a new thread
};
someMethod.BeginInvoke(ar => 
{
    ((Action)ar.AsyncState).EndInvoke(ar);
}, someMethod); 
```

* * *

执行此类任务的另一种更现代的方法是使用 TPL（从 .NET 4.0 开始）：

```
Task.Factory.StartNew(() => 
{
    // put the code here that you want to be executed in a new thread
}); 
```

所以，是的，正如你所看到的，有无数种技术可以用来在单独的线程上运行一堆代码。

# asp.net-mvc - 骨干模型破坏功能不起作用

> ID：14041536
> 
> 赞同：0
> 
> 时间：2012-12-26T13:51:21.380
> 
> 标签：asp.net-mvc, backbone.js

我有一个骨干模型。我只想简单地调用destroy函数来调用控制器（asp.net MVC）中的delete方法。发生删除调用，但我为模型设置的值没有传递给控制器​​。有人可以建议我调用销毁函数的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T14:39:01.663

删除操作仅传递 ID，没有请求正文。默认情况下会这样做`DELETE /model/:id`。如果您需要在您的 asp.net 服务器端代码中访问模型中的值，请在删除之前从数据库中加载它。

# iphone - 如何从 Xcode 项目中删除 iPhone 5 兼容性？

> ID：14041538
> 
> 赞同：6
> 
> 时间：2012-12-26T13:51:22.813
> 
> 标签：iphone, ios, xcode, iphone-5

意外地，我允许 Xcode 为一个我还不想适应 iPhone 5 的大型应用程序项目添加 iPhone 5 启动图像。

我删除了启动图像，但模拟器继续以放大的 iPhone 5 模式启动它。我也无法在 infoplist 中找到密钥。如何完全删除 iPhone 5 支持？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T23:11:46.583

以下对我有用。

*   从 Xcode 中删除文件。
*   从 Finder 文件夹中删除文件。
*   清空垃圾。
*   清理您的 Xcode 项目。
*   从设备和模拟器中删除应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T13:54:38.943

我认为如果你从你的项目中删除 Default-568h@2x.png 那么它将删除 iPhone 5 全屏功能。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-26T13:57:02.747

删除 Build Setting Architecture 中的 armv7s 并删除 Target Clean Build Summary 中的 Retina 4Inch Image。然后您的应用程序将开始仅支持 3.5 英寸屏幕

# android - Android UI Activity 不会更改为 Landscape

> ID：14041549
> 
> 赞同：2
> 
> 时间：2012-12-26T13:52:21.303
> 
> 标签：android, android-activity, orientation

我有一个用于垂直方向的活动（activity_main.xml - 应用程序中的唯一活动），并将 layout-land 添加到 res 目录中，名称相同的 xml。但是，当我将手机的方向更改为横向时，不会创建/替换新屏幕。当然我错过了一些非常简单但找不到的东西......有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T13:54:02.767

在您的 AndroidManifest 文件中，将此代码放入您的活动标签中

```
 android:screenOrientation="landscape" 
```

编辑：改变方向：setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);

并将此代码添加到您的清单文件中：

```
android:configChanges = "orientation" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T13:58:41.113

将此添加到清单文件中的活动中

```
android:configChanges="orientation|keyboardHidden|screenSize" 
```

并关注您的活动

```
 public void onConfigurationChanged(Configuration config) {

        super.onConfigurationChanged(config);
} 
```

# android - 浏览器下载完成通知

> ID：14041552
> 
> 赞同：3
> 
> 时间：2012-12-26T13:52:26.607
> 
> 标签：android, broadcastreceiver, webclient

我正在设计一个应用程序，我偶然发现了一个要求。

我的应用程序正在使用以下语法触发下载。

```
Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse("http://openintents.googlecode.com/files/FileManager-2.0.2.apk"));

startActivity(intent); 
```

上面的代码打开浏览器页面，然后开始下载。

我的要求是下载完成后我需要得到通知。

由于没有可用的广播会在浏览器完成下载时通知我，所以我使用了一些 hacky 的方法。

我用标志`RecursiveFileObserver`来监视 SD 卡的内容。`FileObserver.CLOSE_WRITE`

我的计划是，一旦调用此事件，我会将路径内容与下载的文件名进行比较，并触发下一步操作。

但我面临的问题是 FileObserver.CLOSE_WRITE 被多次调用，并且它因设备而异。

**我的问题是，是否有任何可用的 API 或解决方法可以在浏览器完成下载后通知我？**

下面是我尝试过的代码片段。

```
Intent intent = new Intent(
Intent.ACTION_VIEW,
Uri.parse("http://openintents.googlecode.com/files/FileManager-2.0.2.apk"));

startActivity(intent);

myObserver = new RecursiveFileObserver(Environment.getExternalStorageDirectory().getAbsolutePath()) {

    @Override
    public void onEvent(int event, String path) {

        if (event == FileObserver.CLOSE_WRITE) {

            if (path.indexOf("FileManager") != -1) {
                Log.i("vipul", "CLOSE_WRITE: " + path);

                /*
                 * Intent intent = new Intent(Intent.ACTION_VIEW);
                 * intent.setDataAndType(Uri.fromFile(new File(path)),
                 * "application/vnd.android.package-archive");
                 * startActivity(intent);
                 */

            }

        }
    }

};

myObserver.startWatching();

}

@Override
protected void onDestroy() {

    if (installReceiver != null) {
        myObserver.stopWatching();
        unregisterReceiver(installReceiver);
        installReceiver = null;

    }
    super.onDestroy();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T14:32:46.650

您可以使用自己的服务执行下载并通过在开始使用 getContentLength() 之前获取文件大小并跟踪下载的部分大小来跟踪进度。

# sql-server - 存储过程中的可选参数问题

> ID：14041557
> 
> 赞同：0
> 
> 时间：2012-12-26T13:52:42.850
> 
> 标签：sql-server, stored-procedures

我有这个存储过程

```
ALTER PROCEDURE [dbo].[usp_mySP]
    -- Add the parameters for the stored procedure here
    -- For inventory table check.
    @DealerID       VARCHAR(50),
    @Certified      VARCHAR(50) = NULL,
    -- For fuel value.
    @CityFeatureValue   VARCHAR(50),
    @HwyFeatureValue    VARCHAR(50)

AS
BEGIN
        BEGIN
        SELECT  InventoryID, 
                VIN
        FROM    Inventory
        WHERE   DealerID = @DealerID
                AND Deleted     =   'False'
                AND (IsPending  =   '0'         OR IsPending    IS NULL) 
                --AND (Certified    =   @Certified  OR @Certified   IS NULL)

                AND VIN IN
                        (
                            SELECT      VIN 
                            FROM        FuelPerformance
                            WHERE       (
                                            FeatureTitle = 'Fuel Economy (City)' 
                                            AND FeatureValue = @CityFeatureValue
                                        )
                                        OR 
                                        (
                                            FeatureTitle = 'Fuel Economy (Hwy)' 
                                            AND FeatureValue = @HwyFeatureValue
                                        )
                            GROUP BY    VIN
                            HAVING      COUNT(VIN) > 1
                        )
    END
END 
```

我这样称呼它：

```
EXEC usp_ListOfVehiclesOnFuelCondition_ForSingleDealer
   '09f5245d' , '', '18', '28' 
```

当我评论该行时

```
 AND (Certified = @Certified OR @Certified IS NULL) 
```

它给出了结果，但是当这条线在那里时，结果是空白的。

有什么建议我做错了吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T13:56:09.553

您正在传入一个空字符串 ( `''`)。这与`NULL`.

将参数作为*命名*参数（不带`@Certified`）传入，或测试空字符串，或传入`NULL`.

命名参数：

```
EXEC usp_ListOfVehiclesOnFuelCondition_ForSingleDealer @DealerId = '09f5245d',
                                                       @CityFeatureValue = '18', 
                                                       @HwyFeatureValue = '28' 
```

通过一个`NULL`：

```
EXEC usp_ListOfVehiclesOnFuelCondition_ForSingleDealer '09f5245d', 
                                                       NULL, 
                                                       '18', 
                                                       '28' 
```

检查`''`：

```
AND (Certified = @Certified OR @Certified IS NULL OR @Certified = '') 
```

# reflection - ASP Classic 是否使用反射？

> ID：14041558
> 
> 赞同：1
> 
> 时间：2012-12-26T13:52:44.317
> 
> 标签：reflection, asp-classic, xss

我看到一段 ASP 代码如下所示：

```
<% rs("Server.HTMLEncode(x)") %> 
```

由于我怀疑记录集有一个名为“Server.HTMLEncode(x)”的字段，我想知道他们是否打算写：

```
<% Server.HTMLEncode(rs(x)) %> 
```

或者，如果经典 ASP 进行反射并以某种方式将该字符串文字解释为方法调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T14:03:30.167

我用了十年经典的 ASP，从来没有遇到过任何反思。根据我过去的经验，我同意你的观点，他们可能打算写：

```
<% Server.HTMLEncode(rs(x)) %> 
```

但是，它看起来仍然不正确。他们的意思是使用 Response.Write 写出值吗？如果没有看到更多代码，我无法判断。

对我来说，这看起来像是糟糕的编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T09:29:51.913

经典的 ASP 可以用 VBScript 编写，*它*允许通过使用`Eval()`和`Execute()`方法进行反射。例如：

```
Class Foo
    Public Bar
End Class

Dim oFoo, propName, myValue
Set oFoo = New Foo
oFoo.Bar = "hello world"
propName = "Bar"
myValue = Eval("oFoo." & propName)
Response.Write("Value of " & propName & ":" & myValue) 
```

但是，您的示例代码**并非如此**。这只是传递给 Recordset 对象的字符串文字，用于查找精确匹配。如果给定的参数是一个数字，它将返回具有此类索引的字段的值，否则它需要一个字符串，该字符串是确切的字段名称。

假设`x`用户输入应该是字段名称或索引，它们可能意味着：

```
<%=rs(Server.HTMLEncode(x)) %> 
```

# c# - 多线程数据实体

> ID：14041559
> 
> 赞同：1
> 
> 时间：2012-12-26T13:52:44.680
> 
> 标签：c#, wpf, multithreading, entity-framework

我想重写我目前在 WinForms 上使用 DataSets 的程序并将其移动到 WPF。目前，该程序正在为用户使用 Citrix 以便登录。现在，当有人对数据执行某种操作时，主线程正在提交 BI 的更改并将其发送回服务器，或者从服务器获取新数据（或修改的数据）并将其添加到缓存中。今天的问题是，每次用户处理数据或消息从服务器到达时，都会大量使用锁定和解锁。我正在寻找一个数据实体或某种方式来在我的客户端进行多线程工作。这意味着我希望每个线程都能够在数据上提交 BI 并与服务器通信，同时与所有其他用户及其更改同步。

我查看了 EF，但它不是线程安全的，这意味着当更新将从服务器到达时，我需要锁定我的 EF 并在用户处理 EF 内的数据时再次更新它。

有什么方法可以更轻松地做到这一点，而无需让程序员每次都锁定/解锁数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T14:13:28.720

如果您正在创建多线程应用程序，则无法避免锁定。

这是您在使用 EF 时可以应用的几件事：

1.  不要使用带有锁的唯一上下文（没有单例模式）。
2.  每个请求和一些并发控制系统实例化和处理一个上下文
3.  尽可能避免锁定上下文。

# php - 复选框和 Javascript、PHP 的问题

> ID：14041561
> 
> 赞同：0
> 
> 时间：2012-12-26T13:52:52.613
> 
> 标签：php, javascript, jquery, mysql, checkbox

我正在努力使用以下 PHP 和 JavaScript 代码来让 2 组复选框过滤从 MySQL 数据库获得的一系列数据。

这是代码：

```
<script type="text/javascript">
//http://jsbin.com/ujuse/1/edit
$(function() {
    $("input[type='checkbox']").on('change', function() {
        var boxes = [];
        // You could save a little time and space by doing this:
        var name = this.name;
        // critical change on next line
        $("input[type='checkbox'][name='"+this.name+"']:checked").each(function() {
            boxes.push(this.value);
        });
        if (boxes.length) {
            $(".loadingItems").fadeIn(300);
            // Change the name here as well
            $(".indexMain").load('indexMain.php?'+this.name+'=' + boxes.join("+"),
            function() {
                $(".indexMain").fadeIn('slow');
                $(".loadingItems").fadeOut(300);
            });

        } else {
            $(".loadingItems").fadeIn(300);
            $(".indexMain").load('indexMain.php', function() {
                $(".indexMain").fadeIn('slow');
                $(".loadingItems").fadeOut(300);
            });
        }
    });
});
</script>

<?php
function echoCheckboxSet($header, $divClass, $columnName, $setName) {

    include ("connection.php");
$checkboxes = $con -> prepare("SELECT DISTINCT $columnName FROM item_descr ORDER BY $columnName ASC");
$checkboxes->execute();
?>
<div class="bgFilterTitles">
    <h1 class="filterTitles"><?php echo $header;?></h1>
</div>
<div class="<?php echo $divClass; ?>">
<?php
    while ($box = $checkboxes->fetch(PDO::FETCH_ASSOC)):
    $boxColumnName = str_replace('_',' ',$box[$columnName]);
?>
        <input type='checkbox' class='regularCheckbox' name='<?php echo $setName; ?>' value='<?php echo $box[$columnName]; ?>' />
        <font class='similarItemsText'><?php echo $boxColumnName; ?></font>
        <br />
<?php
endwhile;
?>
</div>
<?php
} // end of echoCheckboxSet

// Call our method twice, once for colors and once for prices
echoCheckBoxSet("COLOR", "colors", "color_base1", "color[]");
echoCheckBoxSet("PRICE", "prices", "price", "price[]");
?> 
```

然后我完美地得到了我的复选框，但是当点击它们中的任何一个时，它们什么都不做。

我`indexMain.php`检索这样的值：

```
$colors = $_GET['color[]'];
echo "TEST".$colors[1];
            $colors = explode(' ', $colors);
            $parameters = join(', ', array_fill(0, count($colors), '?'));
            $items = $con -> prepare("SELECT * FROM item_descr WHERE color_base1 IN ({$parameters})");
            $items ->execute($colors);
            $count = $items -> rowCount(); 
```

----------------- 添加回声：

```
echo "<div>Showing ".$count."items</div>";
while($info = $items->fetch(PDO::FETCH_ASSOC)) 
{
echo "<div name='item' id='".$info['color_base1']."' class='itemBox'><div class='showItem'><a href='items_descr.php?itemId=".$info[id_item]."'><img class='itemImage' alt='' src='images/$info[imageMid].jpg'></img></div><br />";
echo "<div class='indexItemText'><font class='similarItemsText'><a href='items_descr.php?itemId=".$info[id_item]."'>".$info[name]."</a><font class='price'> - $".$info[price]."</div></div>";
$row_count++;
if ($row_count % 2 == 0) 
    {
echo "<br />"; // close the row if we're on an even record
    }

} 
```

知道会发生什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T14:49:30.990

问题是当您在 JS 函数中构建查询时：

```
'indexMain.php?'+this.name+'=' + boxes.join("+") 
```

这发送`color[]=Brown+Grey`而不是`color[]=Brown&amp;color[]=Grey`. 一个正确（但肮脏）的方法是：

```
'indexMain.php?'+this.name+'=' + boxes.join('&amp;' + this.name + '=') 
```

您可以尝试使用 jQuery.param() ( [http://api.jquery.com/jQuery.param/](http://api.jquery.com/jQuery.param/) ) 来获得更好的代码。

此外，在 PHP 中，复选框值在数组中可用`$_GET['color']`（不是`$_GET['color[]']`）。

**编辑：对不起，读得太快了。**

**答：**正如您期望在任何地方都使用字符串一样，在您的 JS 和 PHP 代码中使用`color`而不是。`color[]`

# python - Python PIL 检测图像是全黑还是全白

> ID：14041562
> 
> 赞同：25
> 
> 时间：2012-12-26T13:52:53.723
> 
> 标签：python, python-imaging-library

使用 Python Imaging Library PIL 如何检测图像的像素是黑色还是白色？

*~更新~*

条件：**不**遍历每个像素！

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-12-26T14:19:54.700

```
if not img.getbbox(): 
```

...将测试以查看图像是否完全黑色。（如果图像中没有非黑色像素，则返回`Image.getbbox()`falsy `None`，否则返回点的元组，这是真的。）要测试图像是否完全是白色的，首先将其反转：

```
if not ImageChops.invert(img).getbbox(): 
```

您也可以使用`img.getextrema()`. 这将告诉您图像中的最高和最低值。为了最容易地处理这个问题，您可能应该首先将图像转换为灰度模式（否则极值可能是 RGB 或 RGBA 元组，*或*单个灰度值*或*索引，您必须处理所有这些）。

```
extrema = img.convert("L").getextrema()
if extrema == (0, 0):
    # all black
elif extrema == (1, 1):
    # all white 
```

后一种方法可能会更快，但在大多数应用程序中您不会注意到（两者都会非常快）。

上述技术的单行版本，用于测试黑色或白色：

```
if sum(img.convert("L").getextrema()) in (0, 2):
    # either all black or all white 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-08-03T16:43:04.157

扩展 Kindall：如果您查看名为 img 的图像：

```
extrema = img.convert("L").getextrema() 
```

它为您提供图像中的一系列值。因此，全黑图像为 (0,0)，全白图像为 (255,255)。所以你可以看看：

```
if extrema[0] == extrema[1]:
    return("This image is one solid color, so I won't use it")
else:
    # do something with the image img
    pass 
```

当我从一些数据创建缩略图并想确保它正确读取时，这对我很有用。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-03-07T13:17:43.780

```
from PIL import Image
img = Image.open("test.png")
clrs = img.getcolors() 
```

`clrs`包含`[("num of occurences","color"),...]`

通过检查，`len(clrs) == 1`您可以验证图像是否仅包含一种颜色，并通过查看第一个元组的第二个元素，`clrs`您可以推断出颜色。

如果图像包含多种颜色，那么通过考虑出现次数，如果 99% 的像素共享相同的颜色，您还可以处理几乎完全单色的图像。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-07-19T13:10:38.940

我尝试了 Kindall 解决方案`ImageChops.invert(img).getbbox()`但没有成功，我的测试图像失败了。

我注意到了一个问题，白色应该是 255**但**我发现数字极值是 (0,0) 的白色图像.. 为什么？请参阅下面的更新。

我已经更改了 Kindall 第二种解决方案（getextrema），它工作正常，不需要图像转换，我编写了一个函数并验证了它适用于灰度和 RGB 图像：

```
def is_monochromatic_image(img):
    extr = img.getextrema()
    a = 0
    for i in extr:
        if isinstance(i, tuple):
            a += abs(i[0] - i[1])
        else:
            a = abs(extr[0] - extr[1])
            break
    return a == 0 
```

`img`参数是一个 PIL Image 对象。您还可以通过少量修改检查图像是黑色还是白色。但是您必须确定“白色”是 0 还是 255，也许您有明确的答案，我没有。:-) 希望有用

**更新**：我想里面有零的白色图像..可能是PNG或其他具有透明度的图像格式。

# install4j - 将代理设置传递给捆绑的 JRE install4j 应用程序？

> ID：14041565
> 
> 赞同：1
> 
> 时间：2012-12-26T13:53:15.647
> 
> 标签：install4j

我们向我们的一位客户提供了一个使用 install4j 安装的应用程序，以及捆绑的 JRE。此客户需要为此应用程序手动配置一些代理设置。

我试图将deployment.config 文件放在JRE 的lib 目录中，但它似乎没有改变任何东西。我也找不到相关的 vmoptions。

有没有办法将这些设置传递给 app/jre？

还有一种方法可以指示 JRE 在运行时打开 Java 控制台吗？

谢谢！/什穆利克。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T11:16:55.540

您可以通过设置VM参数来配置代理

```
proxySet=true
proxyHost=...
proxyPort=... 
```

并用于身份验证

```
proxyAuth=true
proxyAuthUser=...
proxyAuthPassword=... 
```

您可以在安装程序操作的启动节点中的“运行脚本”中设置它们，方法是为属性调用 System.setProperty() 或在命令行上传递它们，如下所示：

```
-DproxySet=true -DproxyHost=... etc 
```

至于你的第二个问题（最好在stackoverflow上提出一个单独的问题）

> 还有一种方法可以指示 JRE 在运行时打开 Java 控制台吗？

我假设您的意思是终端窗口，可以通过选择安装程序的“Windows 控制台可执行文件”属性来完成。您不能在命令行上更改此属性，因为这会在 Windows 可执行文件的编译的二进制格式中设置一个静态标志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-04T18:53:22.290

我为 WINDOWS 和 MAC 创建了一个安装程序。该应用程序正在使用嵌入式 JRE。当应用程序运行时，即使浏览器中的选项设置为“自动检测”，它也无法检测到网络的代理设置。但是当浏览器中明确提供代理设置时，它能够检测到代理设置。

选择“LAN 设置->使用自动配置脚本”选项并指向 .pac 文件时，即使代理设置也不会被检测到。

任何建议，如何使用 BUNDLED JRE 和 java 程序提供代理设置都可以检测这些设置，而无需在每台机器上进行任何进一步的更改。

# ruby-on-rails - 单击运行守护程序线程时更改按钮中的文本

> ID：14041566
> 
> 赞同：0
> 
> 时间：2012-12-26T13:53:38.320
> 
> 标签：ruby-on-rails, embedded-ruby

我是rails的新手。我有一个按钮，单击该按钮会启动一个守护线程，我希望该按钮中的文本更改为“正在执行”，视图中的代码是

```
<td>
<% if data.vName == 'BuzzCity' or data.vName == 'neXva'%>
  <%= button_to "Start", { :action=> :execute_rake },  :remote => true  %>
<%end%>
</td> 
```

在控制器中是

```
def execute_rake
  vendor_name = 'neXva'#params[:vendorName]
  @async = ::AppMall::AsyncTask.new()
  if vendor_name == 'BuzzCity'

  elsif  vendor_name == 'neXva'

  else
   render :text => 'Unknown vendor'  
   return    
  end
 render :text => 'Executing'
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T14:48:18.310

只需添加此选项`:disable_with`

尝试这个，

```
<%= button_to "Start", { :action=> :execute_rake },  :remote => true, :disable_with => 'Executing...'  %> 
```

# ember.js - 如何将 ember.js 部分添加到模板中？

> ID：14041568
> 
> 赞同：1
> 
> 时间：2012-12-26T13:53:40.590
> 
> 标签：ember.js, handlebars.js

我在下面尝试做的是使用部分来使我的视图更加模块化。不幸的是，这不起作用。

我明白了

```
 Uncaught TypeError: Cannot read property 'view' of undefined in the (compiled) _dataForLeftPane.js @ the following line,
  stack1 = foundHelper ? foundHelper.call(depth0, stack1, {hash:{}}) : helperMissing.call(depth0, "outlet", stack1, {hash:{}}); 
```

如果我删除了在 container.hjs 中声明的部分（请参见下面的代码）并放置它们各自的内容，那么一切正常。但只有当我引入部分时，事情才会停止工作。

```
file: app_router.js.coffee

root: Ember.Route.extend(
  index: Ember.Route.extend(
    route: '/'
    connectOutlets: (router) ->
      router.get('applicationController').connectOutlet('container')
      router.get('containerController').connectOutlet('dataForLeftPane', 'dataForLeftPane', [{login:'wycats'},{login:'tomdale'}])
      router.get('containerController').connectOutlet('dataForRightPane', 'dataForRightPane', [{id:'1234'},{id:'qwerty'}])
  )
) 
```

```
file: views/application_view.js.coffee

App.ApplicationView = Ember.View.extend(
  templateName: 'application'
)

App.ContainerView = Ember.View.extend(
  templateName: 'a/container'
)

App.DataForLeftPaneView = Ember.View.extend(
  templateName: 'a/dataForLeftPane'
)

App.DataForRightPaneView = Ember.View.extend(
  templateName: 'a/dataForRightPane'
) 
```

```
file: templates/a/container.hjs

{{> _a_leftPane}}
{{> _a_rightPane}} 
```

```
file: templates/a/_leftPane.hbs

{{outlet dataForLeftPane}} 
```

```
file: templates/a/_rightPane.hbs

{{outlet dataForRightPane}} 
```

```
file: templates/a/dataForRightPane.hjs

{{#each person in controller}}
  {{person.id}}
{{/each}} 
```

```
file: templates/a/dataForLeftPane.hjs

{{#each person in controller}}
  {{person.name}}
{{/each}} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T16:51:04.317

您可以在另一个模板中使用[视图助手](http://emberjs.com/api/classes/Ember.Handlebars.helpers.html#method_view)“调用”视图。

```
file: templates/parentView.hjs
{{view.someProperty}}
//here is the parent view calling a template
{{view "App.templateView" contentBinding="view.content"}} 
```

这将插入带有内容绑定的指定 App.templateView 到渲染视图的传递内容属性。您可以将任何您想要的内容作为 templateViews 内容传递。

这很可能是您想要做的，但我不确定我是否正确阅读了您的问题。

此外，这在语义上接近于使用传递的本地渲染部分轨道。所以我认为这可能是您正在寻找的解决方案，因为您指的是“部分”。

# linux - kprobe vs uprobe 系统调用插入

> ID：14041571
> 
> 赞同：2
> 
> 时间：2012-12-26T13:53:48.683
> 
> 标签：linux, linux-kernel, linux-device-driver, system-calls, selinux

我想用Utrace写一个系统调用插入。我了解到 Utrace 项目已被放弃，但其部分代码用于 kprobe 和 uprobe。

我不太了解这些是如何工作的。特别是 uprobe 你能解释一下它们之间有什么区别吗？我可以在不编写模块的情况下使用 uprobe 来检查系统调用的实际参数吗？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-26T14:42:10.217

Kprobe 在内核代码中创建和管理探测点，也就是说，您要探测一些内核函数，例如 do_sys_open()。您需要查看[Documentation/trace/kprobetrace.txt](https://www.kernel.org/doc/Documentation/trace/kprobetrace.txt)以了解 kprobe 的一些用法。

Uprobe 在用户应用程序中创建和管理探查点，也就是说，您要探查一些用户空间功能，但探查代表被探查的进程在内核空间中运行。您需要查看[Documentation/trace/uprobetracer.txt](https://www.kernel.org/doc/Documentation/trace/uprobetracer.txt)以了解 uprobe 的基本用法，了解它的用途。

# php - 为什么 php 中的 chmod 文件夹不起作用？

> ID：14041573
> 
> 赞同：0
> 
> 时间：2012-12-26T13:53:55.610
> 
> 标签：php

我创建文件夹和 chmod：

```
 $mypath = "CSV/" . $dateTimeNow;
 mkdir($mypath, 0777, TRUE);
 chmod($mypath, 0777);
 $tmp='abc.csv'
 move_uploaded_file($_FILES["file"]["tmp_name"], $mypath . '/' . $tmp); 
```

文件 abc.csv 有图标锁定。我无法从文件 abc.csv 读取数据。为什么？你能帮助我吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T14:01:43.880

Many default server config do not accept `777` permissions, Try `0757`. Check server error log for more info...

```
if ( ! file_exists($mypath))
{
    mkdir($mypath, 0757, TRUE);
} 
```

**EDIT:**

If folder/file is already created try `chmod` over the file:

```
chmod($mypath . '/' . $tmp, 0644); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T14:03:48.913

Make sure csv folder is created inside the directory where php file where this code is written

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T13:58:56.063

您正在`chmod`为**目录**分配访问权限，而您的文件具有**其他**访问规则。移动后尝试应用`chmod`到文件。

# android - 如何在 Android 应用中正确集成 Pinterest？

> ID：14041574
> 
> 赞同：3
> 
> 时间：2012-12-26T13:53:56.453
> 
> 标签：android, pinterest

我正在使用 REST API 将 Pinterest 集成到我的 Android 应用程序中，但在尝试访问类别时出现错误。

我的代码：

```
String url = "https://api.pinterest.com/";
String allCategories = "/v2/boards/categories/";
RestClient client = new RestClient(url + allCategories);
String response = "";

    try {
        client.AddParam("limit", "36");

        try {
            client.Execute(RequestMethod.GET);
        } catch (Exception e) {
            e.printStackTrace();
        }
        response = client.getResponse();
    } catch (Exception e) {
        System.out.println(">>> Exception >>> " + e + " >>> Message >>> "
                + e.getMessage());
    }
    System.out.println(">>> response >>> " + response);
    Log.d(">> Login response >>> ", response); 
```

我从端点返回以下错误：

```
{
    "message": "Please upgrade your app!", 
    "error": "Authentication failed: Please upgrade your app!"
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T12:01:14.413

`Pinterest`没有任何官方api，而且它的非官方api[现在不起作用](http://tijn.bo.lt/pinterest-api)。所以我认为你的代码不会以任何方式工作，除非有人发现任何其他非官方 api 或 Pinterest 发布官方版本。

PS：[更多信息](https://stackoverflow.com/questions/9951045/pinterest-api-documentation)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-13T09:19:50.953

截至今天，pinterest API 已下架（看[这里](https://help.pinterest.com/entries/21151603-i-m-a-developer-does-pinterest-have-a-public-api)）

与此同时，您可能想要使用这个由第三方实现的爬虫，它的工作原理就像一个 API

[http://pinterestapi.co.uk/](http://pinterestapi.co.uk/)

您可以使用它来获取用户的看板、点赞和别针。

注意：奇怪的是 v1 api 的计数仍然[有效](http://api.pinterest.com/v1/urls/count.json?callback=receiveCount&url=http://twitter.com)。但这又是无证行为，不要依赖于此

# php - FuelPHP：使用“石油生成模型”时创建表的困惑

> ID：14041575
> 
> 赞同：0
> 
> 时间：2012-12-26T13:54:01.447
> 
> 标签：php, model, migration, fuelphp

我对 FuelPHP、ORM 和迁移完全陌生，如果我像新手一样遇到，我很抱歉，但我已经为此苦苦挣扎了几个小时，所以我想我会寻求帮助。我认为我要么做错了什么，要么错过了一些基本的东西。

我正在尝试创建一个用户模型，为简单起见，假设它只有一个表示名称的字符串。

我的印象是使用以下两个 Oil 命令将创建一个用户模型，以及一个关联的迁移，运行后将构建一个关联的表：

```
php oil generate model user name:string
oil refine migrate 
```

这确实成功地创建了模型和迁移，但运行第二个命令不会在数据库中构建表。

另一方面，如果我运行这些命令：

```
php oil generate migration create_user name:text
oil refine migrate 
```

创建了迁移，并且在我的数据库中构建了表。我注意到将“create_”附加到迁移名称可以创建表，而将其关闭（即`php oil generate migration user name:text`）不会将表插入数据库。我注意到带有和不带有'create_'的生成迁移有很大不同。

所以我的问题最终是，我如何创建模型，创建表的关联迁移？或者，我完全误解了什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T19:35:34.567

如果您收到“已进行最新迁移”，则您的迁移跟踪数据不同步。迁移在数据库（名为迁移的表）和环境文件夹中名为 migrations.php 的配置文件中进行跟踪。

如果其中一个已经有条目，则油将不会再次运行它。

所以不能只通过后门删除表，然后再次运行迁移。您必须运行 'migrate:down' 来恢复上一次迁移，或者如果您全部删除，还需要删除迁移表和配置文件。

再次感谢 FuelPHP 论坛上的 Harro Verton。

# c - Tab width when reading from file

> ID：14041577
> 
> 赞同：0
> 
> 时间：2012-12-26T13:54:04.647
> 
> 标签：c, linux, text

I'm using `<ncurses.h>` library for a simple program in terminal. It reads a file character by character in a conventional way:

```
FILE* f = fopen(filename, "r");
int c;
while ((c = fgetc(f)) != EOF) { /* process c */ } 
```

The characters are put inside an array of chars. I need to know the (y,x) coordinates of each character on terminal screen. To do so, I keep indexes that determine the first and last char in line on screen in another array. It's easily adjustable when the terminal window is resized - each line consists of either `max_x` characters, or a smaller number of characters, if there's a `'\n'`.

Tabs cause a problem - although they are recognised as `'\t'`, their width and therefore number of "pixels" in text interface is different (when displayed by `cat` in terminal or as a consecutive char in a string containing all the characters from file). However, when separated from the rest of file by:

```
if (c == '\t') {...} 
```

they do not differ. I've also tried printing those detected tabs and comparing the cursor's position to get their width, but once again they look the same.

How to get the actual width of a tab when reading a file? I'd like to convert the width to a number of spaces. Thank you for attention and perhaps hints.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T14:02:13.237

Of course the actual tab width is dependant on the way you are presenting it on screen. For the classical presentation, that is a tabulation every eight column, you have to keep track on the `column` number where the tab occurs. You can then use:

```
tab_width = 8 - column % 8 
```

Where `column` starts counting at 0 for the first column.

# java - 将 Bean 列表传递给 oracle 存储过程的 Java 程序 - 一次性传递整个列表，而不是一个接一个地附加对象

> ID：14041592
> 
> 赞同：1
> 
> 时间：2012-12-26T13:55:39.433
> 
> 标签：java, oracle, stored-procedures, bulk-load, oracle-type

我有以下一组 TYPE、PROCEDURE 和 Java 代码。我能够成功调用存储过程，但我必须一个接一个地附加对象。我希望在处理超过 50K+ 记录时一次性完成该过程。任何人都可以让我知道需要进行哪些更改，以便我可以一次性发送整个列表。代码可以在下面找到。

```
TYPES: 
    CREATE OR REPLACE TYPE CER_GL_ENTRY_TYPE AS OBJECT
                      (idKey NUMBER(10)  );

    CREATE or REPLACE TYPE CER_GL_ENTRY_TYPE_LIST AS TABLE OF  CER_GL_ENTRY_TYPE;

PROCEDURE:

    CREATE OR REPLACE PROCEDURE GL_PROCESS_BULK_ENTRIES (
       p_array    IN     CER_GL_ENTRY_TYPE_LIST ,p_status      OUT VARCHAR2)
    AS
       v_count      NUMBER(5);
       row_detail   CER_GL_ENTRY_TYPE;
    BEGIN
       --p_arr_int := NEW array_int ();
       --p_arr_int.EXTEND (10);
       --len := p_array.COUNT;
       v_count := 0;

       FOR i IN 1 .. p_array.COUNT
       LOOP
          row_detail := p_array (i);
          DBMS_OUTPUT.put_line('hello');
          DBMS_OUTPUT.put_line (row_detail.idKey);
          --p_arr_int (i) := v_count;
          v_count := v_count + 1;
          p_status := 'true';
       END LOOP;

       DBMS_OUTPUT.put_line (v_count);
       DBMS_OUTPUT.put_line (p_status);
    EXCEPTION
       WHEN OTHERS
       THEN
          -- handle errors here...
          DBMS_OUTPUT.put_line ('Error: ' || SUBSTR (1, 255, SQLERRM));
    END;
    /

Java Bean:

    import java.sql.SQLData;
    import java.sql.SQLException;
    import java.sql.SQLInput;
    import java.sql.SQLOutput;

    public class SampleListenerBean implements SQLData
    {
        private String sql_type="CER_GL_ENTRY_TYPE";

        private int id;

        public SampleListenerBean() {

        }

        public SampleListenerBean(String sqlType, int id) {
            this.sql_type = sqlType;
            this.id = id;
        }

        public int getId() {
            return id;
        }
        public void setId(int id) {
            this.id = id;
        }

        public String getSQLTypeName() throws SQLException {
            return sql_type; 
        }

        public void readSQL(SQLInput stream, String typeName) throws SQLException {
            sql_type = typeName;

            id = stream.readInt();
        }

        public void writeSQL(SQLOutput stream) throws SQLException {
            stream.writeInt(id);
        }
    }

Main class: 

import java.sql.CallableStatement;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.SQLException;
import java.sql.Types;
import java.util.ArrayList;
import java.util.List;

import oracle.sql.ARRAY;
import oracle.sql.ArrayDescriptor;

public class StProcExample {

    public static void main(String args[]){
            Connection con=null;
            try{
                 DriverManager.registerDriver(new oracle.jdbc.driver.OracleDriver ());
            con = DriverManager.getConnection("jdbc:oracle:thin:@******:1521: TUW1", "*******", "*********");
            String query = "{call GL_PROCESS_BULK_ENTRIES(?,?)}";

            CallableStatement cs = con.prepareCall(query);
            ArrayDescriptor des = ArrayDescriptor.createDescriptor("CER_GL_ENTRY_TYPE_LIST", con);

            List<SampleListenerBean> sampleLst = new ArrayList<SampleListenerBean>();

            SampleListenerBean bean = null;

            for (int i = 0; i < 20; i++) {
                bean = new SampleListenerBean("CER_GL_ENTRY_TYPE",i);
                sampleLst.add(bean);
            }

            SampleListenerBean emp=new SampleListenerBean("TS.TEST_EMP_OBJ",234);
            SampleListenerBean emp1=new SampleListenerBean("TS.TEST_EMP_OBJ",235);
            Object[] employees= new Object[]{emp,emp1};
            Object[] employees= new Object[]{sampleLst};
            ARRAY a = new ARRAY(des, con, employees);
            cs.setObject(1, (Object)a);
            cs.registerOutParameter(2, Types.VARCHAR);
            cs.execute();

            String status = cs.getString(2);

            System.out.print("The status is " + status);
            if (cs != null) {
                cs.close();
             }
            }
            catch(SQLException e){
                e.printStackTrace();
            }

        }

    } 
```

我想要的是替换以下代码

```
 SampleListenerBean emp=new SampleListenerBean("TS.TEST_EMP_OBJ",234);
    SampleListenerBean emp1=new SampleListenerBean("TS.TEST_EMP_OBJ",235);
    Object[] employees= new Object[]{emp,emp1};

    ARRAY a = new ARRAY(des, con, employees);
    cs.setObject(1, (Object)a); 
```

我不想单独设置每个对象，而是直接使用 sampleLst 而不是对象数组“员工”。当我处理 50K+ 对象时，我无法继续将它们添加到对象 []。我也会遇到堆问题。任何人都可以在这里帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T14:29:41.380

我会使用更简单的表格类型：

```
CREATE OR REPLACE TYPE NUM_ARRAY AS TABLE OF NUMBER; 
```

然后稍微简化存储过程：

```
CREATE OR REPLACE PROCEDURE GL_PROCESS_BULK_ENTRIES (
   p_array    IN     NUM_ARRAY,
   p_status   OUT    VARCHAR2)
IS
... 
```

`Integer`然后，您创建一个可以轻松放入内存的数组：

```
Integer[] idArray = new Integer[50000];

// fill the array of integers here
for (int i = 0; i < idArray.length; i++)
    idArray[i] = ....;

ARRAY a = new ARRAY(des, con, idArray);
cs.setObject(1, (Object)a); 
```

没有必要仅仅为了传递一个 ID 列表而创建任何重量级 bean。

# python - 带有 PyQt 的 Matplotlib - axes.clear() 非常慢

> ID：14041594
> 
> 赞同：2
> 
> 时间：2012-12-26T13:55:47.923
> 
> 标签：python, charts, qt4, matplotlib, pyqt

我只想在我的程序上绘制图表。我需要使用`axes.clear()`多次绘制新图表。

```
from PyQt4 import QtGui
from matplotlib.backends.backend_qt4agg import FigureCanvasQTAgg as FigureCanvas   
from matplotlib.figure import Figure

class MplCanvas(FigureCanvas):

    def __init__(self):
        self.fig = Figure()
        self.axes = self.fig.add_subplot(111)

        # do something...
        FigureCanvas.__init__(self, self.fig)
        FigureCanvas.setSizePolicy(self, QtGui.QSizePolicy.Expanding, QtGui.QSizePolicy.Expanding)
        FigureCanvas.updateGeometry(self)
        # do something...

    def refresh(self):
        # FIXME: This method is very, very slow!!!
        self.axes.clear()

        # do something... 
```

但它很慢，它会挂起我的程序大约 0.3 秒。正常吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-12-11T13:30:06.837

我知道这是一个相当古老的问题，但对于所有正在研究这个问题（比如我）并且仍在寻找解决方案的人：

```
class MplCanvas(FigureCanvas):
    def __init__(self):
        #...

        # get a reference to the line you want to plot
        self.line = self.axes.plot(xdata, ydata)

    def resfresh(self, xdata, ydata):
        # set the new data on one or more lines
        self.line.set_data(xdata, ydata)

        # redraw the axis (and re-limit them)
        axes.relim()
        axes.autoscale_view()

        # redraw the figure
        self.fig.canvas.draw() 
```

我在一个图中使用了多个子图和多个轴，这对我来说已经加快了很多。我无法进一步剥离我的代码，因为我的绘图正在调整轴的大小并且标题正在改变。

如果您知道您**只想**重新绘制数据，以便轴、标题和范围保持不变，您可以进一步剥离：

```
def refresh(self, xdata, ydata):
    # "delete" the background contents, this is only repainting an empty
    # background which will look a little bit differently but I'm
    # fine with it
    self.axes.draw_artist(self.axes.patch)

    # set the new data, could be multiple lines too
    self.line.set_data(xdata, ydata)
    self.axes.draw_artist(self.line)

    # update figure
    self.fig.canvas.update()
    self.fig.canvas.flush_events() 
```

我从[这里](http://bastibe.de/2013-05-30-speeding-up-matplotlib.html)获取了很多信息。如果您仍想提高速度，则可能有机会使用*blitting*但在之前发布的链接中写道：

> 事实证明，这`fig.canvas.blit(ax.bbox)`是一个坏主意，因为它会疯狂地泄漏内存。您应该使用的是`fig.canvas.update()`，它同样快但不会泄漏内存。

我也在检查`matplotlib.animation`模块，但我有一些触发重绘的按钮（就像问题中所问的那样），我无法找到如何在我的特定情况下使用动画。

# ember.js - ember.js 中 .hbs 和 .hjs 的区别

> ID：14041597
> 
> 赞同：2
> 
> 时间：2012-12-26T13:56:04.040
> 
> 标签：ember.js, handlebars.js

我不明白 .hjs 和 .hbs 之间的区别。经过一些愚蠢的实验，我发现 .hjs 用于纯模板，而 .hbs 用于部分模板。

有人能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-27T18:05:45.773

我目前的项目中没有使用 hbs——它们都在使用 php 和简单 html+css 的 wp 中——但最近我发现了这个项目，ghost.org，并且模板文件只使用了 HBS。

我认为它们用于模板是有道理的。

# c# - 在资源文件中存储项目的序列化列表

> ID：14041598
> 
> 赞同：2
> 
> 时间：2012-12-26T13:56:04.310
> 
> 标签：c#, unit-testing

我正在为我们的应用程序创建一些单元测试，并且我想将类的序列化（XML）列表存储在资源文件中，以供我们的一些测试使用，作为模拟。其中一些列表可能包含数百或数千个项目，因此单个资源条目可能非常大。C# 资源文件是最好的方法吗？资源文件中的单个资源可以包含这么大的项目吗？

我曾考虑将序列化列表作为文件直接添加到我的项目中，但是我不确定如何在我的应用程序中访问此文件，而不假设其他开发人员可能没有的特定目录结构，因为他们将它们的源代码控制映射设置不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T14:06:26.017

为什么要使用资源文件，对于每种文化，您是否有不同版本的列表要测试？

如果没有，您也可以将您的 XML 列表作为 XML 文件直接添加到您的项目中。XML 文件的最大大小是操作系统支持的最大大小；因此，即使您使用的是 Windows XP，它的长度也可以达到 4 GB。

# r - 用 deqn 和 roxygen 记录方程

> ID：14041601
> 
> 赞同：24
> 
> 时间：2012-12-26T13:56:13.390
> 
> 标签：r, equation, roxygen2

我正在使用`\deqn{}{}`roxygen2 来记录包中函数的方程。LaTeX（的第一个参数`deqn`）渲染得很好，因为在 LaTeX 方程中忽略了空格，但是我对 ASCII（的第二个参数`deqn`）表示有疑问。

问题是我的格式被破坏了（看起来 roxygen 将整个`deqn`命令放在“单行”上，然后将该行包装在大约 60 列左右）。有没有办法强制 roxygen2 保留 .R 文件中我的 roxygen 命令/注释中的空白格式？

我在文件中有以下代码`example.R`：

```
#'Example
#'
#'deqn ASCII example
#'
#'\deqn{ \sigma = \sqrt{ \frac{Z}{n} \sum
#'  \left[ \textstyle\frac{1}{2}\displaystyle
#'    \left( \log \frac{H_i}{L_i} \right)^2  - (2\log 2-1)
#'    \left( \log \frac{C_i}{O_i} \right)^2 \right] }
#'}{sqrt(N/n * runSum(0.5 * log(OHLC[,2]/OHLC[,3])^2 -
#'           (2*log(2)-1) * log(OHLC[,4]/OHLC[,1])^2, n))}
#'
#'@param x An example parameter
#'@return A example result
#'@author Joshua Ulrich
#'@keywords ts
#'@export
"example" <-
function(x) {
} 
```

我使用以下 R 代码生成`example.Rd`文件：

```
library(roxygen2)
setwd("dir/containing/example.R/")
dir.create("man",FALSE)
roclet <- rd_roclet()
roc_proc(roclet, "example.R", ".")
roc_out(roclet, "example.R", ".") 
```

您可以在命令行中使用以下命令生成 example.Rd 文件的文本表示：

```
R CMD Rd2txt dir/containing/example.R/man/example.Rd 
```

上述命令输出的详细信息部分如下所示*：*

```
sqrt(N/n *
  runSum(0.5 * log(OHLC[,2]/OHLC[,3])^2 - (2*log(2)-1) *
  log(OHLC[,4]/OHLC[,1])^2, n)) 
```

而我希望它看起来像：

```
sqrt(N/n * runSum(0.5 * log(OHLC[,2]/OHLC[,3])^2 -
         (2*log(2)-1) * log(OHLC[,4]/OHLC[,1])^2, n)) 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-09T17:17:30.117

[根据 Hadley Wickham](http://twitter.com/hadleywickham/status/288653338042585090)的说法，在 roxygen 的未来版本中将删除换行。所以 roxygen2 的解决方案是 roxygenize 文件（或包），然后手动更新受影响`.Rd`文件中的文本方程。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2020-05-28T10:58:29.747

这个答案没有解决您的 ASCII 问题，但它目前是我在 HTML 中呈现乳胶方程式时的首选方式，所以我希望这对您有所帮助。

看看 mathjaxr 包（[CRAN](https://cran.r-project.org/web/packages/mathjaxr/index.html)，[GitHub](https://github.com/wviechtb/mathjaxr)）。您可以使用`install.packages("mathjaxr")`或安装它`remotes::install_github("wviechtb/mathjaxr")`。

它引入了一个宏，该宏从[MathJax](https://www.mathjax.org)`\loadmathjax`加载必要的 JavaScript以呈现乳胶方程。然后使用宏or代替or就可以了。`\mjeqn{latex}{ascii}``\mjdeqn{latex}{ascii}``\eqn``\deqn`

在您的具体示例中，我们将具有以下内容：

```
#' Example
#'
#' Example mathjax function
#'
#' \loadmathjax
#' \mjdeqn{ \sigma = \sqrt{ \frac{Z}{n} \sum
#'   \textstyle\frac{1}{2}\displaystyle
#'     \left\[ \left( \log \frac{H_i}{L_i} \right)^2  - (2\log 2-1) \left( \log \frac{C_i}{O_i} \right)^2 \right] }
#' }{ASCII representation}
example <- function(a, b, c) {} 
```

（注意左方括号已转义）

`\loadmathjax`如果您使用 RStudio，您可能会在使用宏时遇到一些问题。要快速预览内容，请执行以下操作：

1.  生成文档（Ctrl + Shift + D 或`devtools::document(roclets = c('rd', 'collate', 'namespace'))`）
2.  致电`preview_rd("example.Rd")`预览文档

完成后，您可以通过以下步骤检查最终结果：

1.  生成文档（Ctrl + Shift + D 或`devtools::document(roclets = c('rd', 'collate', 'namespace'))`
2.  安装包（Ctrl + Shift + L 或`devtools::install()`）
3.  *重新启动*R 会话*`.rs.restartR()`*
**   预览文档`?example`*

 *无论哪种方式都应该产生以下结果：

[![渲染的 mathjax 方程](../Images/2581ce27d3cf5a161bbbe18570cf3792.png)](https://i.stack.imgur.com/zbNTRl.png)*

# flash - 通过 cmd 使用本机安装程序更新应用程序？

> ID：14041604
> 
> 赞同：1
> 
> 时间：2012-12-26T13:56:51.960
> 
> 标签：flash, apache-flex, flash-builder

我已经用 flash builder 构建了一个应用程序，并发布了一个本机安装程序。

我可以通过 cmd 使用 -silent 参数和 -location 以静默模式安装文件。

但是，当我发布较新版本时，我无法更新它，即使使用常规安装程序也会给我选择，但是，使用 cmd 给我没有选择。

如何使用 cmd 静默更新应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T09:29:39.133

> 您不能使用静默安装程序选项来更新已安装的 AIR 应用程序。这是因为 AIR 安装程序无法确定要安装的版本是否比已安装的版本新，降级会带来安全风险。

这是来自文档的引用：http: [//help.adobe.com/en_US/air/redist/WS485a42d56cd19641-70d979a8124ef20a34b-8000.html](http://help.adobe.com/en_US/air/redist/WS485a42d56cd19641-70d979a8124ef20a34b-8000.html)

如果您的情况可以接受，您仍然可以手动替换应用程序的 swf（使用其他一些安装程序或批处理文件）。

* * *

**更新：**

您似乎可以静默卸载然后重新安装您的应用程序，而不是使用更新：

[http://help.adobe.com/en_US/air/redist/WS485a42d56cd19641-70d979a8124ef20a34b-8000.html#WS485a42d56cd19641-70d979a8124ef20a34b-7ffa](http://help.adobe.com/en_US/air/redist/WS485a42d56cd19641-70d979a8124ef20a34b-8000.html#WS485a42d56cd19641-70d979a8124ef20a34b-7ffa)

# c++ - 将传递的对象分配给构造函数中的成员对象

> ID：14041607
> 
> 赞同：1
> 
> 时间：2012-12-26T13:57:17.857
> 
> 标签：c++

出于某种原因，我无法做到这一点。

```
Line::Line(const Pixel &aStart, const Pixel &aEnd){
  start = aStart;
  end = aEnd;
} 
```

线类：

```
class Line : public Vertex{
public:
  Line(const Pixel &start, const Pixel &end);
  Pixel getStart();
  Pixel getEnd();
private:
  Pixel start;
  Pixel end;
}; 
```

g++ 告诉我

> 错误：没有调用“Pixel::Pixel()”的匹配函数注意：候选人是：
> 
> ```
> - Pixel::Pixel(int, int, int, int, int)
> - Pixel::Pixel(int, int)
> - Pixel::Pixel(const Pixel&)//not implemented by me, some sort of default constructor? 
> ```

我以为实际上我使用了最后一个构造函数，但有些东西不起作用。非常感谢任何帮助。

编辑：像素类：

```
class Pixel{
public:
  Pixel(int x, int y);
  Pixel(int red, int green, int blue, int x, int y);
  void setRed(int red);
  void setGreen(int green);
  void setBlue(int blue);
  void setColor(int r, int g, int b);
  int getRed();
  int getGreen();
  int getBlue();
  bool isChanged();
  int getX();
  int getY();
private:
  int red;
  int green;
  int blue;
  int x;
  int y;
  bool hasBeenChanged;
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T14:05:08.023

type和的`Line`成员将在运行的构造函数之前默认构造，并将它们设置为作为参数传入的对象。您的类似乎没有默认构造函数（因为提供任何用户定义的构造函数都会阻止编译器为您提供隐式默认构造函数）。您需要使用构造函数成员初始化列表：`Pixel``start``end``Line``Pixel`

```
Line::Line(const Pixel &aStart, const Pixel &aEnd)
  : start(aStart), end(aEnd)
{ } 
```

这将分别初始化`start`和`end`和`aStart`，`aEnd`绕过通常会发生的默认构造。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T14:06:01.977

因为你声明了这个

```
Pixel::Pixel(int, int, int, int, int) 

Pixel::Pixel(int, int) 
```

编译器不会生成默认构造函数，或者存在具有默认值的参数的构造函数。

```
Pixel start;
Pixel end; 
```

这些需要默认构造函数。它没有找到，因此编译器会抱怨。您当前的代码需要默认构造函数。

作为一个好的做法，使用初始化列表，它不会要求默认构造的参数。

```
Line::Line(const Pixel &aStart, const Pixel &aEnd):start(aStart), end(aEnd){} 
```

# c++ - 从纯 C++ 类调用 Objective-C 方法

> ID：14041609
> 
> 赞同：0
> 
> 时间：2012-12-26T13:57:22.583
> 
> 标签：c++, objective-c

我有一个纯 C++ 类，它需要`int`从一些 Objective-C 实例方法中检索一个值。

我知道 C++ 不能直接调用 Objective-C 方法。

我有一个 Objective-C++ 类，它允许我使用 Objective-C 并将数据传递给我的纯 C++ 类。

但是，我还没有想出一种方法来允许纯 C++ 类请求`int`计算和检索值。换句话说，纯 C++ 需要能够在需要时检索该值（通过函数指针或其他方式）。

有谁知道这是如何实现的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T14:02:02.350

C++ 绝对可以调用 Objective-C 代码。将通信的代码存储在 .mm 文件而不是 .cpp 中，Xcode 将为您完成剩下的工作。

.mm 文件存储 Objective-C++ 代码，这就是它起作用的原因。

**[编辑]**
您可能在 C++ 中有一些业务逻辑，并希望将其与您在 Objective-C 中的 UI 结合起来，对吗？您的业​​务逻辑可能跨多个平台共享，这就是为什么您不能将所有代码编译为 Objective-C++。

这就是为什么您基本上可以在 Objective-C++ 包装器中“包装”您的 Objective-C 代码。

```
// myUI.h (C++ header)
class myUI {
    void doSomething1();
    int doSomething2();
}

// main.cpp (C++ code)
int main() {
    myUI ui;
    printf("%d\n", ui.doSomething2());
    ui.doSomething1();
    return 0;
}

// myUI.mm (Objective-C++ code)
int myUI::doSomething2() {
    return [[MyController sharedController] doSomething2];
}

// myUI.cpp (C++ code)
void myUI::doSomething1() {
    printf("Hi!\n");
} 
```

# android - ListView 元素默认不可见

> ID：14041616
> 
> 赞同：1
> 
> 时间：2012-12-26T13:57:56.437
> 
> 标签：android, android-listview

下面是我的代码和图像。我正在使用 arraylist 填充列表视图，`runOnUIThread()`其中`onpostexecute()` 具有从 doInBackground() 中的远程服务器获取的值。但问题是元素只有在焦点位于特定项目上时才可见。我一直在尝试用不同的东西来设置元素可见，但一切都是徒劳的。有人可以建议我如何让这些物品可见。注意：我无法扩展 ListActivity，因为我有另一个需要扩展的类，它是活动的子类。

```
runOnUiThread(new Runnable() {

     public void run() {
             //Updating parsed json data to Listview

            ListView listView = (ListView)findViewById(R.id.listsubcategory);

    ArrayAdapter<String> arrayAdapter = new ArrayAdapter<String>(getApplicationContext(),android.R.layout.simple_list_item_1, subCategoryList);
                        listView.setAdapter(arrayAdapter); 

                        listView.setOnItemClickListener(new OnItemClickListener() {

                                        @Override
                                        public void onItemClick(AdapterView<?> parent, View view,
                                                        int position, long id) {

                         String selectedSubcategory = subCategoryList.get(position);
                         Toast.makeText(getApplicationContext(), "You clicked on "+selectedSubcategory, Toast.LENGTH_SHORT).show();

                                        }
                                });

                 }
             }); 
```

![在此处输入图像描述](../Images/e43d91ff3aef36390214a3edfebd0781.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T14:28:10.233

问题是列表项的样式。在正常状态下，您的项目具有白色背景和白色文本颜色，因此您看不到它们。当状态变为焦点时，颜色会发生变化。您可以通过使用自定义列表项而不是系统的`android.R.layout.simple_list_item_1`.

为项目定义一个布局，它可以是这样的：

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@id/text1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/my_item_background"
    android:textColor="@color/my_text_color"
/> 
```

现在，如果项目的布局是`res/layout/my_list_item.xml`，请以这种方式创建适配器：

```
ArrayAdapter<String> arrayAdapter = new ArrayAdapter<String>(getContext(),
                                    R.layout.my_list_item, subCategoryList); 
```

# java - Java Camel FTP 上传

> ID：14041618
> 
> 赞同：2
> 
> 时间：2012-12-26T13:57:58.990
> 
> 标签：java, ftp, apache-camel, esb

首先，对不起我的英语不好。

问题是我无法在本地 FTP 服务器上上传文件 (.xls) 文件。

这是例外：

```
[org.apache.camel.component.file.GenericFileOperationFailedException - Error writing file GAS_EAV_EMV.xls] 
```

这是我的路线：

```
<route id="sendFtp">
    <from uri="direct:sendFtp"/>
    <setHeader headerName="CamelFileName">
        <simple>GAS_EAV_EMV.xls</simple>
    </setHeader>
    <process ref="egssisFtpProcessor"/>
    <to uri="ftp://foo@127.0.0.1:21/?password=pwd"/>
</route> 
```

这是我的处理器附加文件：

```
public class EgssisFtpProcessor implements Processor {

    @Override
    public void process(Exchange exchange) throws Exception {
        String filename = exchange.getIn().getHeader(Exchange.FILE_NAME, String.class);
        exchange.getIn().addAttachment(filename, new DataHandler(new FileDataSource(filename)));
    }
} 
```

交换对象在处理器末端具有附件。

它适用于 SMTP 协议，但不适用于 FTP。

任何的想法 ？

服务器日志：

```
[14:29:29] - [78] Connecté à 127.0.0.1\. Collecte du Nom d'utilisateur.
[14:29:29] - [78] Usager FOO Connecté IP: 127.0.0.1
[14:29:29] - [78] FOO : Répertoire en Cours: C:\tmp\
[14:29:29] - [78] Client 127.0.0.1 Déconnecté (00:00:00 Min) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T12:24:23.797

不使用附件。相反，只需将消息正文设置为您要上传的文件的 java.io.File。

```
exchange.getIn().setBody(new File(filename)); 
```

而且由于您使用 XML，您可能希望在没有任何 java 代码的情况下执行此操作。您可以使用消息翻译器 EIP 将消息体转换为以标头为文件名的 java.io.File。

```
<transform>
    <simple resultType="java.io.File">${header.CamelFileName}</simple>
</transform> 
```

# maven - 如何使用 maven 包作为依赖项和插件

> ID：14041624
> 
> 赞同：0
> 
> 时间：2012-12-26T13:58:25.253
> 
> 标签：maven, junit, tomcat7

我正在使用 Maven 和 JUnit 组合一个新项目。在maven编译并运行测试后，我正在使用t7插件在tomcat下运行应用程序。在我想在 JUnit 测试中设置 javaURLContextFactory 之前，我没有任何问题。javaURLContextFactory 在 t7 插件中，但不在项目的任何依赖项中。由于插件仅定义为插件，JUnit 测试失败，因为它找不到 javaURLContextFactory 类。如果仅将插件添加为依赖项，则 JUnit 测试有效，但是当我想运行或调试时它找不到插件。如果我在两者中都定义它，我会得到与解析 web.xml 相关的奇怪错误。

这是我当前的 pom.xml：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.star2star</groupId>
    <artifactId>distribute</artifactId>
    <packaging>war</packaging>
    <version>0.8.1-SNAPSHOT</version>
    <name>distribute Maven Webapp</name>
    <url>http://maven.apache.org</url>
    <dependencies>
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>javax.servlet-api</artifactId>
            <version>3.0.1</version>
        </dependency>
        <dependency>
            <groupId>javax.servlet.jsp</groupId>
            <artifactId>javax.servlet.jsp-api</artifactId>
            <version>2.2.1</version>
        </dependency>
        <dependency>
            <groupId>com.googlecode.json-simple</groupId>
            <artifactId>json-simple</artifactId>
            <version>1.1</version>
        </dependency>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.11</version>
        </dependency>
        <dependency>
            <groupId>com.sun.mail</groupId>
            <artifactId>smtp</artifactId>
            <version>1.4.5</version>
        </dependency>
        <dependency>
            <groupId>org.apache.httpcomponents</groupId>
            <artifactId>httpclient</artifactId>
            <version>4.2.2</version>
        </dependency>
        <dependency>
            <groupId>ch.qos.logback</groupId>
            <artifactId>logback-classic</artifactId>
            <version>1.0.9</version>
        </dependency>
        <dependency>
            <groupId>mysql</groupId>
            <artifactId>mysql-connector-java</artifactId>
            <version>5.1.22</version>
        </dependency>
        <dependency>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-surefire-plugin</artifactId>
            <version>2.12.4</version>
            <type>maven-plugin</type>
        </dependency>
        <dependency>
            <groupId>commons-fileupload</groupId>
            <artifactId>commons-fileupload</artifactId>
            <version>1.2.2</version>
        </dependency>
        <dependency>
            <groupId>com.google.guava</groupId>
            <artifactId>guava</artifactId>
            <version>14.0-rc1</version>
        </dependency>
        <dependency>
            <groupId>org.apache.commons</groupId>
            <artifactId>commons-email</artifactId>
            <version>1.2</version>
        </dependency>
        <dependency>
            <groupId>org.mockito</groupId>
            <artifactId>mockito-all</artifactId>
            <version>1.9.5</version>
        </dependency>
        <dependency>
            <groupId>org.apache.tomcat</groupId>
            <artifactId>tomcat-api</artifactId>
            <version>7.0.19</version>
        </dependency>
    </dependencies>
    <build>
        <finalName>distribute-v1</finalName>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>3.0</version>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                </configuration>
            </plugin>
            <plugin>
                <groupId>com.googlecode.t7mp</groupId>
                <artifactId>maven-t7-plugin</artifactId>
                <version>0.9.10.M8</version>
            </plugin>
        </plugins>
    </build>
</project> 
```

有没有办法将插件中的类作为依赖项引用，或者将依赖项作为插件引用？有没有其他方法可以解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T21:53:53.917

与同事交谈后找到了解决方案。

通过将插件作为依赖项包含在内，我知道它很糟糕，并将范围设置为**提供**，它可用于 JUnit 测试，但在使用 t7 插件部署时不包含在战争中。然后单元测试能够运行，使用 javaURLContextFactory 并且它仍然正确部署。

# linux - Linux中的tail和head命令

> ID：14041631
> 
> 赞同：0
> 
> 时间：2012-12-26T13:59:18.670
> 
> 标签：linux, tail, head

执行时，

$ls -1rt /目录 | 头 -n 3 文件1.txt 文件2.txt 文件3.txt

$ls -1rt /目录 | 尾 -n 3 文件 2.txt 文件 3.txt

谁能告诉我文件列表期间尾部和头部如何在内部工作以及为什么文件数量有这种差异？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T14:01:40.367

`head`列出文件的一定数量的行。它不会完整地阅读它，只是前几行。`tail`做完全相同的事情，但从文件末尾开始。此处的`-n 3`参数是在 3 行后停止读取，然后仅打印它们。

# kendo-ui - kendoui：为 kendoGrid 中的列设置日历深度

> ID：14041637
> 
> 赞同：0
> 
> 时间：2012-12-26T13:59:51.223
> 
> 标签：kendo-ui

我的网格中有日期列，`dd/MM/yyyy`当我设置字段时使用格式`12/12/12`更新网格`11/12/12`，（这是由于愚蠢的时间转换而发生的： `kendo.parseDate('Mon Dec 12 2012 00:00:00 GMT+0100 (CET)').toISOString()`。有没有办法解决这个问题？）

所以我决定只坚持“月年”。这是在网格列数组中：

```
{ field: "published", title: "Published", format: "{0:MMMM yyyy}", 
```

日期在行上正确为月年，但`datepicker`在编辑模式下以“日”精度弹出，我该如何调整它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T17:36:31.857

好的，我用包装器狠狠地拍了它一巴掌：

```
function Date2MDY(date) {
  var dmy = '';
  dmy += String(date.getMonth()+1) + '-'
  dmy += String(date.getDate()) + '-'
  dmy += String(date.getFullYear())
  return dmy;
} 
```

它解决了这个问题

# java - 无法创建新的 AWS java Web 项目

> ID：14041641
> 
> 赞同：0
> 
> 时间：2012-12-26T14:00:06.213
> 
> 标签：java, eclipse, macos, amazon-web-services

我在 OSX 10.8.2 下使用 Eclipse 4.2.1。

在 Eclipse > Preferences > Java > Installed JREs 中，我安装了 Java SE 6。

我从 Eclipse Marketplace 安装了 Amazon AWS SDK。

我正在尝试启动一个新的 AWS Java Web 项目，但出现以下错误：

```
Unable to create new AWS Java web project.
One or more constraints have not been satisfied.
Dynamic Web Module 2.5 require Java 1.5 or newer. 
```

但我有 Java SE 1.6！为什么？

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T15:43:03.230

我安装了 Eclipse for Java EE 而不是 Eclipse generic，它解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-24T08:35:02.637

我在使用 Windows 8.1 Pro 时遇到了类似的问题。我尝试了很多方法，但在删除所有现有 Java 版本并安装 Java EE 7u45 win32（以前是 32 位和 64 位的 JEE 8）之前，我无法成功地将任何东西部署到 AWS ElasticBeanstalk。

但这是我完全做的：

*   删除现有工作区并创建一个新工作区。
*   确保您的 AWS Toolkit 首选项设置正确：*Window -> Preferences -> AWS Toolkit*
*   删除了所有现有的 java 版本。
*   下载并安装 Java EE 7u45 win32。
*   确保我的系统路径和 JAVA_HOME 变量设置正确： *控制面板 -> 系统和安全 -> 系统 -> 高级系统设置 -> 高级 -> 环境变量*

希望这可以帮助 ：）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-03-15T20:16:53.027

我安装了 Eclipse 4.3.2，然后在顶部添加了 AWS，我得到了同样的错误。与在 Java 1.7.0_51 或 Java 8 (b132) 上运行 Eclipse 相同。

我还收到一个错误对话框，提示“X 不存在”，其中 X 是我的新项目名称。X 已创建，但只有一个 .project 文件和 .settings 中的一个文件。

我的错误日志包含：

```
Java Model Exception: Java Model Status [X does not exist]
    at org.eclipse.jdt.internal.core.JavaElement.newNotPresentException(JavaElement.java:498)
    at org.eclipse.jdt.internal.core.JavaModelManager.getPerProjectInfoCheckExistence(JavaModelManager.java:2309)
    at org.eclipse.jdt.internal.core.JavaProject.getPerProjectInfo(JavaProject.java:1908)
    at org.eclipse.jdt.internal.core.JavaProject.getRawClasspath(JavaProject.java:1930)
    at com.amazonaws.eclipse.elasticbeanstalk.webproject.CreateNewAwsJavaWebProjectRunnable.findSdkClasspathEntry(CreateNewAwsJavaWebProjectRunnable.java:219)
    at com.amazonaws.eclipse.elasticbeanstalk.webproject.CreateNewAwsJavaWebProjectRunnable.run(CreateNewAwsJavaWebProjectRunnable.java:191)
    at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:121)

org.eclipse.core.commands.ExecutionException: One or more constraints have not been satisfied.
    at org.eclipse.wst.common.componentcore.internal.operation.FacetProjectCreationOperation.execute(FacetProjectCreationOperation.java:110)
    at org.eclipse.wst.common.frameworks.internal.datamodel.DataModelPausibleOperationImpl$1.run(DataModelPausibleOperationImpl.java:385)
    at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:2345)
    at org.eclipse.wst.common.frameworks.internal.datamodel.DataModelPausibleOperationImpl.runOperation(DataModelPausibleOperationImpl.java:410)
    at org.eclipse.wst.common.frameworks.internal.datamodel.DataModelPausibleOperationImpl.runOperation(DataModelPausibleOperationImpl.java:360)
    at org.eclipse.wst.common.frameworks.internal.datamodel.DataModelPausibleOperationImpl.doExecute(DataModelPausibleOperationImpl.java:247)
    at org.eclipse.wst.common.frameworks.internal.datamodel.DataModelPausibleOperationImpl.executeImpl(DataModelPausibleOperationImpl.java:219)
    at org.eclipse.wst.common.frameworks.internal.datamodel.DataModelPausibleOperationImpl.cacheThreadAndContinue(DataModelPausibleOperationImpl.java:89)
    at org.eclipse.wst.common.frameworks.internal.datamodel.DataModelPausibleOperationImpl.execute(DataModelPausibleOperationImpl.java:207)
    at com.amazonaws.eclipse.elasticbeanstalk.webproject.CreateNewAwsJavaWebProjectRunnable.run(CreateNewAwsJavaWebProjectRunnable.java:150)
    at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:121)
Caused by: org.eclipse.core.runtime.CoreException: One or more constraints have not been satisfied.
    at org.eclipse.wst.common.project.facet.core.internal.FacetedProject.modifyInternal(FacetedProject.java:363)
    at org.eclipse.wst.common.project.facet.core.internal.FacetedProject.mergeChangesInternal(FacetedProject.java:1181)
    at org.eclipse.wst.common.project.facet.core.internal.FacetedProject.access$2(FacetedProject.java:1117)
    at org.eclipse.wst.common.project.facet.core.internal.FacetedProject$1.run(FacetedProject.java:324)
    at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:2345)
    at org.eclipse.wst.common.project.facet.core.internal.FacetedProject.modify(FacetedProject.java:339)
    at org.eclipse.wst.common.componentcore.internal.operation.FacetProjectCreationOperation.execute(FacetProjectCreationOperation.java:83)
    ... 10 more 
```

动态 Web 模块 2.5 需要 Java 1.5 或更高版本。

精氨酸，

# objective-c - 没有值的 AFNetworking JSON 数组

> ID：14041644
> 
> 赞同：2
> 
> 时间：2012-12-26T14:00:20.637
> 
> 标签：objective-c, ios, json, afnetworking

我在使用 AFNetworking 从 API 获取 JSON 信息时遇到问题，格式如下：

```
{
    "result": [
        [
            {
                "user": "test user",
                "password": "test password",
                "company": "test company"
            }
        ]
    ]
} 
```

注意 {[[{}]]}（双方括号）。但只有一个值“结果”。

我得到错误：

```
ApiTest[83166:c07] -[__NSCFArray objectForKey:]: unrecognized selector sent to instance 0x7136a30
ApiTest[83166:c07] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSCFArray objectForKey:]: unrecognized selector sent to instance 0x7136a30'
*** First throw call stack:
(0x1da6012 0x123de7e 0x1e314bd 0x1d95bbc 0x1d9594e 0x3d60 0x3122 0x16909 0x179953f 0x17ab014 0x179b7d5 0x1d4caf5 0x1d4bf44 0x1d4be1b 0x21397e3 0x2139668 0x18565c 0x2a9d 0x29c5)
libc++abi.dylib: terminate called throwing an exception 
```

当我在本地设置文件并仅使用一组方括号“{[{}]}”时，我的 AFNetworking/JSON 项目代码可以很好地处理 JSON 数据。

```
{
    "results": [
        {
            "user": "test user",
            "password": "test password",
            "company": "test company"
        }
    ]
} 
```

因此，如果没有方括号集，我可以使用以下方法成功获得“结果”：

```
self.results = [jsonObject objectForKey:@"result"]; 
```

如果我的项目是 javascript 我会使用类似的东西：

```
var userId = data.result[0][0].user; 
```

有谁知道如何使用目标 C 正确选择我的阵列？我花了几天的时间进行调查，但我被困住了。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T14:16:55.507

问题是你在另一个数组中得到一个数组，所以你需要做

```
NSArray *array = [jsonObject objectForKey:@"result"];
if (array.count > 0)
    self.results = [array objectAtIndex:0]; 
```

# c# - GnuPG 必须为每个用户名配置文件安装密钥吗？

> ID：14041645
> 
> 赞同：1
> 
> 时间：2012-12-26T14:00:21.363
> 
> 标签：c#, process, permissions, pgp, gnupg

我正在（在我的本地机器上）运行`GPG`(wingpg ) - 命令行版本。

我在win7的登录名是`RoyiN`。（所以我有它的个人资料）

当我登录时 - 我已经安装了私有和公共密钥（使用 PKA.exe）。

一切都好。

然后我写了这段代码（正在工作）

```
 Process proc = new Process();
  proc.StartInfo.FileName = cfg.PGP_Program_FullPath;
  proc.StartInfo.UserName = "Royin";
  proc.StartInfo.Domain = ...;
  proc.StartInfo.Password = ...
  proc.StartInfo.Verb = "runas";
  proc.Start();
 ... 
```

`UserName`但是，如果我在该字段 中写入-**另一个**也是我本地计算机上的管理员的用户 - 它会说：

> gpg：解密失败：没有密钥

然后我再次换到`RoyiN`它确实有效

*   是否为每个用户安装了密钥？有没有办法改变它，所以它将是全球性的？（因此机器上的每个用户都可以使用这些密钥 -*无需*在每个配置文件下安装密钥）？

*   这也意味着如果我想允许其他人连接到我的计算机 - 我必须以`RoiyN`24/7 登录....

有什么解决方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T14:10:21.083

这里发生了两件与运行 gpg 的“人”有关的不同事情。

*   GPG 在默认密钥环文件中搜索密钥，这些文件安装在您的用户配置文件目录中（在名为 的文件夹下`.gnupg`）。这将是一组文件，例如`pubring.gpg`和`secring.gpg`。这部分很容易解决：`--secret-keyring "path\to\file"`作为参数之一传递，它将将该密钥环文件添加到其搜索路径中。您可能希望首先将其移动到公共可读的位置，例如`%ALLUSERSPROFILE%`。

*   除此之外，GnuPG 密钥是为一个身份生成并与一个身份相关联的，该身份通常是您的电子邮件地址。接收文件时，数据将指定解密和/或验证完整性所需的密钥的人的身份。加密或签名文件时，您必须告诉 GPG 使用谁的密钥。当您为他人*签名或**解密*发送给您的数据时，将使用您的密钥。您需要确保适当的密钥位于您使用的任何密钥环文件中，无论它在哪里。

*如果*你给它一个明确的数据位置，那么你在运行 gpg 时不需要真正保持登录状态。只是 gpg 默认情况下会读取登录时设置的当前环境变量，以确定这些东西在哪里。

如果您想在无人值守的情况下运行 GPG，您可能需要指定密钥环文件路径、秘密密钥环文件路径和配置文件路径。您可以指定的完整选项列表位于[GPG 配置选项](http://www.gnupg.org/documentation/manuals/gnupg-devel/GPG-Configuration-Options.html)页面。

（您可能想尝试仅从该`--homedir`选项开始，*我认为*它会一次性覆盖其他所有内容的默认路径，但您需要对其进行测试以确保。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-26T14:05:56.430

是的，它们是按用户安装的

简单的答案 - 只需导出私钥/公钥对，并为管理员帐户安装它。

虽然，最好使用自己的公钥为您的自动化系统创建一个单独的密钥 - 谁拥有您高度信任的密钥，也会接受这个。

# java - Sonar ANT 任务集成错误

> ID：14041651
> 
> 赞同：1
> 
> 时间：2012-12-26T14:01:10.120
> 
> 标签：java, ant, sonarqube

```
Java and ANT versions:
java version "1.6.0_21"
Java(TM) SE Runtime Environment (build 1.6.0_21-b07)
Java HotSpot(TM) Client VM (build 17.0-b17, mixed mode, sharing)

Apache Ant(TM) version 1.8.4 compiled on May 22 2012

Sonar version: 3.3.2

Sonar Ant Task version: 2.0, using sonar-ant-task-2.0.jar 
```

运行构建脚本时出现以下错误。我也尝试在构建脚本中设置以下属性，但不断收到以下错误。请让我知道是否有人有任何解决方案。

```
sonar.sourceEncoding with value Windows-1252 

sonar.supportSourceFileDuplications with value as true

Error:

BUILD FAILED    

D:\TestProj\build-sonar.xml:40: org.sonar.api.utils.SonarException: Unable to read and import the source file : 'D:\TestProj\WEB-INF\src\com\iwf\ImageSearchCommand.java' with the charset : 'windows-1252'.
    at org.sonar.plugins.java.JavaSourceImporter.importSource(JavaSourceImporter.java:86)
    at org.sonar.plugins.java.JavaSourceImporter.parseDirs(JavaSourceImporter.java:70)
    at org.sonar.plugins.java.JavaSourceImporter.analyse(JavaSourceImporter.java:63)
    at org.sonar.plugins.java.JavaSourceImporter.analyse(JavaSourceImporter.java:59)
    at org.sonar.batch.phases.SensorsExecutor.execute(SensorsExecutor.java:64)
    at org.sonar.batch.phases.Phases.execute(Phases.java:97)
    at org.sonar.batch.bootstrap.ProjectModule.doStart(ProjectModule.java:128)
    at org.sonar.batch.bootstrap.Module.start(Module.java:83)
    at org.sonar.batch.bootstrap.BatchModule.analyze(BatchModule.java:114)
    at org.sonar.batch.bootstrap.BatchModule.doStart(BatchModule.java:104)
    at org.sonar.batch.bootstrap.Module.start(Module.java:83)
    at org.sonar.batch.bootstrap.BootstrapModule.doStart(BootstrapModule.java:121)
    at org.sonar.batch.bootstrap.Module.start(Module.java:83)
    at org.sonar.batch.Batch.execute(Batch.java:104)
    at org.sonar.runner.DeprecatedAntLauncher.execute(DeprecatedAntLauncher.java:83)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.sonar.runner.DeprecatedAntTaskExecutor.delegateExecution(DeprecatedAntTaskExecutor.java:110)
    at org.sonar.runner.DeprecatedAntTaskExecutor.execute(DeprecatedAntTaskExecutor.java:65)
    at org.sonar.ant.SonarTask.launchAnalysis(SonarTask.java:86)
    at org.sonar.ant.SonarTask.execute(SonarTask.java:75)
    at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
    at sun.reflect.GeneratedMethodAccessor6.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
    at org.apache.tools.ant.Task.perform(Task.java:348)
    at org.apache.tools.ant.Target.execute(Target.java:392)
    at org.apache.tools.ant.Target.performTasks(Target.java:413)
    at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1399)
    at org.apache.tools.ant.Project.executeTarget(Project.java:1368)
    at org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:41)
    at org.apache.tools.ant.Project.executeTargets(Project.java:1251)
    at org.apache.tools.ant.Main.runBuild(Main.java:811)
    at org.apache.tools.ant.Main.startAnt(Main.java:217)
    at org.apache.tools.ant.launch.Launcher.run(Launcher.java:280)
    at org.apache.tools.ant.launch.Launcher.main(Launcher.java:109)Caused by: org.sonar.api.resources.DuplicatedSourceException: Duplicate source for resource: com.iwf.ImageSearchCommand
    at org.sonar.batch.index.SourcePersister.saveSource(SourcePersister.java:45)
    at org.sonar.batch.index.DefaultPersistenceManager.setSource(DefaultPersistenceManager.java:78)
    at org.sonar.batch.index.DefaultIndex.setSource(DefaultIndex.java:419)
    at org.sonar.batch.DefaultSensorContext.saveSource(DefaultSensorContext.java:161)
    at org.sonar.plugins.java.JavaSourceImporter.importSource(JavaSourceImporter.java:83) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T01:23:15.633

听上去像：

*   [声纳-2444](http://jira.codehaus.org/browse/SONAR-2444)

根本原因是同名的源文件和测试文件。解决方案是从声纳分析中排除测试文件

# ios - 从 tableview 移动到情节提要的另一个 uiviewcontroller

> ID：14041652
> 
> 赞同：0
> 
> 时间：2012-12-26T14:01:10.550
> 
> 标签：ios, uiviewcontroller, storyboard

当按下表格视图的一行时，我想在故事板的另一个屏幕中移动。

1) 我不想使用导航控制器，还是必须使用？

所以我尝试了这段代码：

```
UIStoryboard * storyBoard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];

UIViewController *vc=[storyBoard instantiateViewControllerWithIdentifier:@"CenterMain"];
    [vc setModalPresentationStyle:UIModalPresentationFullScreen];
    [self presentedViewController:vc animated:YES]; 
```

在我的里面`(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {`

我收到此警告：

```
Instance method '-presentedViewController:animated:' not found (return type defaults to 'id') 
```

运行时出现此错误：

```
MainMap presentedViewController:animated:]: unrecognized selector sent to instance 0x72a2070
 *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[MainMap presentedViewController:animated:]: unrecognized selector sent to instance 0x72a2070' 
```

2）如果使用带有此代码的navigationController：

```
UIStoryboard * storyBoard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
[[self navigationController] pushViewController:[storyBoard instantiateViewControllerWithIdentifier:@"CenterMain"] animated:YES]; 
```

它有效，但问题是我不想在顶部看到导航控制器的栏。

所以我想要么使用 1，要么告诉如何擦除解决方案 2 中的顶部栏。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T14:09:34.967

使用`UIViewController` `- (void)setNavigationBarHidden:(BOOL)hidden animated:(BOOL)animated`or`- (void)setNavigationBarHidden:(BOOL)hidden;`方法。所以在你的情况下，

```
[[self navigationController] setNavigationBarHidden:YES]; 
```

如果您只想隐藏它，或者：

```
[[self navigationController] setNavigationBarHidden:YES animated:YES]; 
```

如果您想在隐藏时设置动画。

# c - c语言中的全局变量和堆变量有什么区别和相似之处？

> ID：14041654
> 
> 赞同：3
> 
> 时间：2012-12-26T14:01:14.403
> 
> 标签：c, global-variables, heap-memory

c语言中的全局变量和堆变量有什么区别和相似之处？

假设我有这段代码。

```
const char* globalVar = "This is a string";

int main(int argc, char* argv[]){
    char* heapVar = malloc(7 * sizeof(char));
} 
```

那么 globalVar 和 heapVar 有什么区别和相似之处呢？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T14:03:34.677

Global variables and heap variables are two different concepts. A heap variable simply tells you where space for the variable was allocated, while a global variable tells you the scope of the variable.

Global means the variable is visible to anything, and it is opposed to local which means a variable's visibility is restricted.

Heap means the variable (pointer) was dynamically allocated (eg: with malloc), and is opposed to stack where the variable was not dynamically allocated.

So you can have a global heap variable, a global stack variable, a local heap variable or a local stack variable.

In your case, globalVar is global because it is declared outside of the scope (braces) of any function, while heapVar is local to main. heapVar is declared on the heap because of the call to malloc. globalVar is a special case because it's using a char* declaration.

For more details on how char* style declarations are handled, please see: [Heap or Stack? When a constant string is referred in function call in C++](https://stackoverflow.com/questions/7440185/heap-or-stack-when-a-constant-string-is-refered-in-function-call-in-c)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T14:05:46.940

全局变量始终存在，它永远不会消失。此外，它在该文件/模块中的所有函数中都是可见的，除非声明为“静态”，否则它在整个文件/模块中也是可见的。

请注意，您的全局变量不是“这是一个字符串”，而只是那个 globalVariable，它只是一个指针（包含内存中的地址）。

heapVar 变量包含指向堆上某物的地址。该变量仅在 main() 函数内可见。

您*可以*使全局变量指向堆。

这里的区别是 globalVariable 指向的内容是静态分配的，而 heapVar 指向的内容是动态分配的（你可以通过调用 free() 和释放内存来销毁它，而你不能释放那个字符串“This is a string”，即 globalVar 指向的内容）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T14:27:21.237

**注意**：这里我谈论的是 globarVar 和 heapVar，而不是他们指向的内存。
区别在于：

**范围**

**heapVar 在 stack 中，而不是在 heap**中，因此它的作用域是其函数的本地范围，并且 globarVar 在任何地方都可以评估。

**人生**

heapVar 在函数调用结束时死亡， globarVar 在程序的所有持续时间内都存在。

**关于他们指向的内存：**

heapVar 指向的内存在堆中，而 globarVar 指向的内存在实现定义的只读内存中，为了安全，将其设为 const char*：

```
char* globalVar = "This is a string"; 
```

堆中的内存可以随时释放，文字字符串在程序的所有持续时间内都存在。在您的情况下，您有泄漏。无论如何，我知道这只是一个示例，也许您已经意识到了。

# javascript - Why won't the concatenation operator work?

> ID：14041657
> 
> 赞同：-2
> 
> 时间：2012-12-26T14:01:22.313
> 
> 标签：javascript, jquery

Here is the test code:

```
var current_page= 0;
$('#background_music').append('<img id="bm'+current_page+'" src="success.png"   width="68px" height= "68px"/>');
$("#"+ "bm'+current_page+'").offset({top: 171, left: 41}); 
```

In this example, it doesn't work since the image won't give the expected offset. What's wrong with this:

```
"bm'+current_page+'" 
```

However, if I change this to

```
$("#"+ "bm"+current_page).offset({top: 171, left: 41}); 
```

It works.

1.  What is the difference?
2.  Doesn't the code `" bm'+current_page+' "` generate a string: `"bm0"`?

Update: 1\. What's the difference? I just can't figure it out this **+variable+**. In my past question, I have posted such a similar one. However, I didn't figure it out after all...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T14:03:46.220

It should be

```
$("#bm" + current_page) 
```

instead of

```
$("#"+ "bm'+current_page+'") 
```

* * *

The following is just one string:

```
"bm'+current_page+'" 
```

The string delimiter here `"` (double quote), so nested single quotes (`'`) here are just nothing else than characters. The string ends by the last `"`.

However, In

```
'<img id="bm' + current_page + '" src="success.png" width="68px" height="68px"/>' 
```

the string delimiter is `'` (single quote) which means that nested double quotes (`"`) are mere characters ending up in a concatenation of two strings.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T14:16:11.377

@Stallman 这应该可以帮助您了解报价的工作原理[http://www.quirksmode.org/js/strings.html](http://www.quirksmode.org/js/strings.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T14:07:13.390

```
$("#"+ "bm'+current_page+'").offset({top: 171, left: 41}); 
```

我认为问题出在这一行。我认为应该是：

```
$("#bm" + current_page).offset({top: 171, left: 41}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T14:04:56.780

It's this line that is wonky:

```
$("#"+ "bm'+current_page+'").offset({top: 171, left: 41}); 
```

Try the following, we're fixing the mixed up quotes.

```
$('#bm'+current_page).offset({top: 171, left: 41}); 
```

# android - Realign Listview after scrolling/fling

> ID：14041659
> 
> 赞同：0
> 
> 时间：2012-12-26T14:01:24.597
> 
> 标签：android, listview, scroll

I am trying to get a ListView to realign after every scroll/fling. By realign I mean realign in such a way, that the top item of the ListView is aligned with the top of the ListView, if it is cut off it should scroll down smoothly until it is realigned and fully visible.

I implemented a scroll-listener:

```
firstRowListView.setOnScrollListener(new OnScrollListener() {
        private boolean correcting = false;

        @Override
        public void onScroll(AbsListView view, int firstVisibleItem, int visibleItemCount, int totalItemCount) {
        }

        @Override
        public void onScrollStateChanged(AbsListView arg0, int scrollState) {
                if (!correcting && scrollState == OnScrollListener.SCROLL_STATE_IDLE) {
                    correcting = true;
                    firstRowListView.smoothScrollToPosition(firstRowListView.getFirstVisiblePosition());
                    correcting = false;
                }
            }
        }
    }); 
```

(For easier visibility I only left the important bits in). If I scroll smoothly (no fling) it works fine, but if I fling the list it doesn't realign itself. Although LogCat tells me that the onScrollStateChange-method is executed in the same way as when I perform a "normal" scroll.

Why is this and how do I get the ListView to realign even after a Fling?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T16:45:14.923

以下应该可以工作，但在 Galaxy tab 7 (4.0.4) 上我可以看到递归正在发生。因此，我强烈建议您实施一些机制以避免这种情况，否则此解决方案将在某些设备上中断：

```
mylv.setOnScrollListener(new OnScrollListener() { 
        @Override
        public void onScroll(AbsListView view, int firstVisibleItem,
                int visibleItemCount, int totalItemCount) {
        }

        @Override
        public void onScrollStateChanged(final AbsListView lv,
                int scrollState) { 
            if (scrollState == OnScrollListener.SCROLL_STATE_IDLE) { 
                lv.post(new Runnable() {

                    @Override
                    public void run() {
                        lv.smoothScrollToPosition(lv
                                .getFirstVisiblePosition());  
                    }
                }); 
            }
        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T14:46:37.520

在较旧的设备`ListView`上不报告`SCROLL_STATE_IDLE`后`SCROLL_STATE_TOUCH_SCROLL`。请使用此处提到的解决方法。[http://code.google.com/p/android/issues/detail?id=5086#c7](http://code.google.com/p/android/issues/detail?id=5086#c7)

您也可以`correcting`安全地删除变量，因为它在此代码中没有用。

# php - 显示保持纵横比的照片

> ID：14041662
> 
> 赞同：-1
> 
> 时间：2012-12-26T14:01:41.910
> 
> 标签：php, html, css, image

我想在不改变纵横比的情况下以固定尺寸显示图像。

我想以这种尺寸显示图像`200px * 200px`，同时保持原始纵横比。这里的所有图像都大于`200px * 200px`.

我想从中心裁剪图像并将宽度和高度设置为 200px，而不更改纵横比，这意味着我们只想显示图像的一部分。

谁能告诉我如何实现它？我尝试过使用 max-width 和 max-height 的 CSS，但似乎 CSS 无济于事。

我使用 PHP 作为服务器端语言。听说有人推荐GD。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T14:09:59.967

这应该可以解决问题

**HTML**

```
 <div>
    <img src="http://www.w3.org/html/logo/downloads/HTML5_Logo_512.png" />
  </div> 
```

**CSS**

```
div {
  width:200px;
  height:200px;
  overflow:hidden;
  position: relative;
}

div > img {
  width:300px;
  height:auto;
  position:absolute;
  top:-100px;
  left:-100px;
} 
```

这是一个**[演示](http://jsbin.com/uhoyes/7/edit)**

# objective-c - how to execute mount_smbfs terminal command to mount

> ID：14041669
> 
> 赞同：2
> 
> 时间：2012-12-26T14:02:16.573
> 
> 标签：objective-c, macos, cocoa, terminal, mount

I mounted the hard drive by using the GUI in Mac.

However, I want to mount the hard drive by using the terminal commands.

How can I execute a terminal command `mount_smbfs` from my Objective-C Cocoa application?

```
NSTask* task = [[NSTask alloc] init];
[task setLaunchPath:@"/sbin/mount_smbfs"];
[task setArguments:[NSArray arrayWithObjects:@"//user:50000@smb://192.168.2.1/Share",@"Volumes/C$/upload", nil]];
[task launch]; 
```

Here is my edited with my code Could you please help me?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T14:08:11.260

您可以包装对 in 的调用以`mount_smbfs`从[`NSTask`](https://developer.apple.com/DOCUMENTATION/Cocoa/Reference/Foundation/Classes/NSTask_Class/Reference/Reference.html)您的 Obj-C 程序执行它：

```
NSTask* task = [NSTask new];
[task setLaunchPath:@"/sbin/mount_smbfs"];
[task setArguments:[NSArray arrayWithObjects:@"//myUser:myPassword@SERVER/share", @"mountPath", nil]]; 
```

在 setArguments 中，您提供一个包含至少 2 个元素的数组：共享路径和挂载点。

还要检查`man mount_smbfs`更多参数选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T00:34:47.590

使用 AppleScript 更简单：

```
- (BOOL) mount {
    NSAppleScript *script = [[NSAppleScript alloc] initWithSource:
                             @"tell application \"Finder\"\n"
                             "  mount volume \"smb://server.domain/SomeMountPoint\"\n"
                             "end tell"];
    if (!script) {
        NSLog(@"Error creating AppleScript object");
        return NO;
    }

    NSDictionary *errorMessage = nil;
    NSAppleEventDescriptor *result = [script executeAndReturnError:&errorMessage];
    return (BOOL)result;
} 
```

有一些限制：

1.  您必须`NSAppleScript`在主线程上使用。
2.  当 Finder 尝试挂载卷时，您的应用程序不会响应任何事件。
3.  如果挂载失败，您将无法控制 Finder 如何显示错误消息。

# python - Flask authentication with Flask-Security

> ID：14041672
> 
> 赞同：3
> 
> 时间：2012-12-26T14:02:33.157
> 
> 标签：python, authentication, flask

Trying to enable login in flask with flask-security. The following code works fine (I import in `__init__.py`)

```
from flask import Blueprint, render_template, request, redirect, url_for
from coursly import app
from coursly.models import *
from flask.ext.security import Security, LoginForm, SQLAlchemyUserDatastore

user_datastore = SQLAlchemyUserDatastore(db, user.User, user.Role)
Security(app, user_datastore)

user = Blueprint('user', __name__)

@user.route('/')
def index():
    return redirect(url_for("user.login"))

@user.route('/login', methods=['GET', 'POST'])
def login():
    return render_template('user/login.html', content='Login Page', action=url_for('auth.authenticate'), form=LoginForm()) 
```

If, however, I change `user = Blueprint('user', __name__)` to `user = Blueprint('user', __name__, url_prefix='/blah')` it fails with a `werkzeug.routing.BuildError BuildError: ('auth.authenticate', {}, None)`. url_for is the problem, however, I don't understand why. HALP!

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-26T17:12:35.110

弄清楚了。原来 Flask-security 已经`/login` `/logout`内置，我的登录功能在很大程度上被忽略了。在正常的应用程序执行期间未使用它。除了`url_for`仍然被处理，因此 BuildError。

我试图使用来自[https://github.com/dracule/FlaskBootstrapSecurity](https://github.com/dracule/FlaskBootstrapSecurity)的过时示例，但失败了。Flask-Security 已于 3 个月前更新。动作参数应该更新为`action=url_for('security.login')`并且它将起作用。

TL;DR 添加一个`url_prefix`不会使用 Flask-Security 的内置`/login` `/logout`并且很多 vars 被重命名

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-06T15:23:07.010

我知道这是一个老问题，但以防万一有人像我一样遇到这个问题，[这里是相关文档](https://pythonhosted.org/Flask-Security/customizing.html)

# c# - XML 循环遍历子数据

> ID：14041676
> 
> 赞同：1
> 
> 时间：2012-12-26T14:02:45.560
> 
> 标签：c#, xml

我有一个如下的 xml 文件

```
<data>
  <request>
    <type></type>
    <query></query>
  </request>
  <current_condition></current_condition>
  <weather>
    <date>26-12-2012</date>
    <astronomy>
      <sunrise></sunrise>
    </astronomy>
    <maxtempC/>
    <maxtempF/>
    <hourly>
      <time>0</time>
      <tempC>4</tempC>
      <tempF>39</tempF>
      <windspeedMiles>17</windspeedMiles>
    </hourly>
    <hourly>
      <time>6</time>
      <tempC>4</tempC>
      <tempF>39</tempF>
      <windspeedMiles>17</windspeedMiles>
    </hourly>
    <hourly>
      <time>12</time>
      <tempC>4</tempC>
      <tempF>39</tempF>
      <windspeedMiles>17</windspeedMiles>
    </hourly>
    <hourly>
      <time>18</time>
      <tempC>4</tempC>
      <tempF>39</tempF>
      <windspeedMiles>17</windspeedMiles>
    </hourly>
  </weather>
  <weather>
    <date>27-12-2012</date>
    <astronomy>
      <sunrise></sunrise>
    </astronomy>
    <maxtempC/>
    <maxtempF/>
    <hourly>
      <time>0</time>
      <tempC>4</tempC>
      <tempF>39</tempF>
      <windspeedMiles>17</windspeedMiles>
    </hourly>
    <hourly>
      <time>6</time>
      <tempC>4</tempC>
      <tempF>39</tempF>
      <windspeedMiles>17</windspeedMiles>
    </hourly>
    <hourly>
      <time>12</time>
      <tempC>4</tempC>
      <tempF>39</tempF>
      <windspeedMiles>17</windspeedMiles>
    </hourly>
    <hourly>
      <time>18</time>
      <tempC>4</tempC>
      <tempF>39</tempF>
      <windspeedMiles>17</windspeedMiles>
    </hourly>
  </weather>
</data> 
```

即使我使用以下内容，我也可以从 current_condition 和天气中获取数据：

`var fiveDayForcastDayTwo = _test("washington, tyne and wear").Skip(1).First();`将于 27 日返回

`var fiveDayForcastDayTwo = _test("washington, tyne and wear").Skip(2).First();`将返回 28 日等

我遇到的问题是每小时，我如何遍历每小时节点并获取时间 0 和时间 6 等的数据，同时也跳到第二天。

任何帮助将不胜感激乔治

cs文件的代码

```
public IEnumerable<DisplayWeatherConditions> DisplayFiveDayForcast(string id)
{
        XDocument doc = XDocument.Load(string.Format("http://www.worldweatheronline.com/feed/premium-weather-v2.ashx?key={0}&feedkey={1}&format=xml&q={2}&tp=6", 
                                       sPartnerID, sLicenseKey, HttpUtility.UrlEncode(id)));

        var displayFiveDayForcast = from wd in doc.Descendants("weather")
                  select new DisplayWeatherConditions()
                  {
                      date          = (string)wd.Element("date") ?? "NA",
                      sunRise       = (string)wd.Element("astronomy").Element("sunrise") ?? "NA",
                      sunSet        = (string)wd.Element("astronomy").Element("sunset") ?? "NA",
                      maxtempC      = (string)wd.Element("maxtempC") ?? "NA",
                      maxtempF      = (string)wd.Element("maxtempF") ?? "NA",
                      mintempC      = (string)wd.Element("mintempC") ?? "NA",
                      mintempF      = (string)wd.Element("mintempF") ?? "NA",
                      hourlyTempC   = (string)wd.Element("hourly")?? "NA",
                  };
        return displayFiveDayForcast.AsEnumerable();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T21:18:11.393

我能够通过使用以下内容从您提供的（固定）XML 数据中获取您请求的值（请注意，我使用匿名类型来收集值）。

```
XDocument doc = XDocument.Load([your source document]);
var v1 = doc.Descendants("weather");
var v3 = v1.Where(e => e.Element("date").Value == "26-12-2012");
var v2 = v3.Elements("hourly")
    .Select(e =>
        new
        {
            hour = e.Element("time").Value,
            tempC = e.Element("tempC").Value,
            tempF = e.Element("tempF").Value,
            wind = e.Element("windspeedMiles").Value
        }); 
```

或者在您已经拥有的代码的上下文中：

```
...
hourlyTempC   = wd.Descendants("hourly").Select(e =>
                    new
                    {
                        hour = e.Element("time").Value,
                        tempC = e.Element("tempC").Value,
                        tempF = e.Element("tempF").Value,
                        wind = e.Element("windspeedMiles").Value
                    })
... 
```

您提供的代码将生成的第一个元素`hourly`转换为字符串 - 但由于您有多个`hourly`元素，您需要一个可以处理它的结构（如 IEnumerable） - 这正是[`Select`](http://msdn.microsoft.com/en-us/library/bb548891.aspx).

# c# - 以正确的格式将数据从剪贴板粘贴到 Excel

> ID：14041679
> 
> 赞同：0
> 
> 时间：2012-12-26T14:02:53.597
> 
> 标签：c#, .net, excel

在性能分析器中，我从剪贴板中的**表**中复制数据。

![在此处输入图像描述](../Images/d6808b55739d54b24c7a1f25eb4f177e.png)

然后将其粘贴到**excel 文件**中。结果是：

![在此处输入图像描述](../Images/fd50e1d8b6a72cd10a7972ed0f8b58ea.png)

但是当我将它粘贴到**文本编辑器**中时，我看起来很简单：

> 函数名称 Inclusive Samples Exclusive Samples Inclusive Samples % Exclusive Samples %
> [clr.dll] 26 26 39.39 39.39
> Bee.Client.Common.BeeRight.CheckRightsForBeeUser() 10 0 15.15 0.00
> Bee.Client.Common.BeeRight.get_Invoke() 6 0 9.09 0.00
> Bee.Client.Common.BeeRight.Method(string,string) 13 0 19.70 0.00
> Bee.Client.Common.Custom.FmCustom..ctor() 9 0 13.64 0.00

那你能告诉我，我怎样才能存档这个效果？

谢谢！

**更新**

我会尽力解释。我的 winform 应用程序中有 DataGridView。我编写了一些函数，将数据从表复制到剪贴板（结果看起来像我示例中的文本）。如果我将此文本从剪贴板粘贴到 excel 中，结果将是带有剪贴板数据的 excel 文件，但根本没有格式，而且这个 excel 将难以阅读。

我想知道，他们如何从表格（图 1）中准备数据，当我将其粘贴到 Excel 时，它具有格式（图 2），当我将其粘贴到文本编辑器中时，我们看到了原始文本。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-26T22:23:57.053

原因，为什么您的数据网格和 Excel 之间的直接工作良好，是 DataGridView 组件的实现及其对复制操作的反应，以及您想要将内容粘贴到的应用程序的行为。它可以使用一些特殊的代码，记事本会忽略这些代码。

**编辑**

所以，现在我非常了解你的兴趣。我不知道它在 C# 中是如何工作的，但在 Java 中看起来是这样。

每次剪贴板中有任何信息时，都会有很多变体，其他应用程序如何使用这些内容。

假设我想从剪贴板中获取内容。我这样做：

```
Clipboard clipboard = Toolkit.getDefaultToolkit().getSystemClipboard();
Transferable contents = clipboard.getContents(null); 
```

但现在我应该确定信息应如何查找我的应用程序，您的问题从这里开始。

如果我在剪贴板中有一张图片，我只有**1**种可能的表示形式：

```
[mimetype=image/x-java-image;representationclass=java.awt.Image] 
```

如果我有一些来自记事本的文本，那么已经有**27**个变体：

```
[mimetype=application/x-java-text-encoding;representationclass=[B]
[mimetype=application/x-java-serialized-object;representationclass=java.lang.String]
[mimetype=text/plain;representationclass=java.io.Reader]
[mimetype=text/plain;representationclass=java.lang.String]
[mimetype=text/plain;representationclass=java.nio.CharBuffer]
and so on... 
```

如果我有一些 Excel 工作表中的单元格，则有**56**个变体：

```
[mimetype=application/x-java-text-encoding;representationclass=[B]
[mimetype=text/html;representationclass=java.io.Reader]
[mimetype=text/html;representationclass=java.lang.String]
[mimetype=text/html;representationclass=java.nio.CharBuffer]
[mimetype=text/html;representationclass=[C]
and so on... 
```

甚至还有一个用于 Excel 单元的图像变体！

```
[mimetype=image/x-java-image;representationclass=java.awt.Image] 
```

这就是为什么可以从 Excel 中复制一些单元格并将它们作为位图粘贴到 Paint 中的原因！当然，记事本是不可能的，因为它的开发人员不想使用这个演示文稿。

现在我们可以看到，剪贴板并没有看起来那么原始。每次应用程序都可以分析内容并获取其最佳变体。

现在您可以尝试查找一些 C# 开发信息。我敢肯定，你会明白的！

# c# - configure json calls from wince 5.0 app in c#.net, compact framework application

> ID：14041680
> 
> 赞同：0
> 
> 时间：2012-12-26T14:02:54.670
> 
> 标签：c#, json, visual-studio, compact-framework, windows-ce

> **Possible Duplicate:**
> [Is there a library to read JSON in C# on Windows Mobile?](https://stackoverflow.com/questions/183473/is-there-a-library-to-read-json-in-c-sharp-on-windows-mobile)

we have a web application working in cakephp. now we need to get data from it and display on a wince device. also we want to update/send dat to the website. For this client have selected json as the method for communication. but, now we are having issues with getting started in visual studio to call the website using json requests and fetch data. can you help with this? i will need details of dll to use and basic example of a json request to the server. any help in this matter will be be great.

thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T14:17:20.690

请查看以下链接

在 Windows Mobile 6 上使用 .NET Compact Framework 3.5 的 JSON Web 服务 [http://community.psion.com/knowledge/w/knowledgebase/1378.consume-json-web-service-from-net-compact-framework-3- 5-on-windows-mobile-6.aspx](http://community.psion.com/knowledge/w/knowledgebase/1378.consume-json-web-service-from-net-compact-framework-3-5-on-windows-mobile-6.aspx)

准备一个 JSON Web 服务并使用 JQuery 访问它 [http://www.codeproject.com/Articles/37727/Prepare-a-JSON-Web-Service-and-access-it-with-JQue](http://www.codeproject.com/Articles/37727/Prepare-a-JSON-Web-Service-and-access-it-with-JQue)

**编辑：**
Codetitans 为不同的 .net 风格编写了 JSon Parser，包括 CF [http://codetitans.codeplex.com/releases/view/52555](http://codetitans.codeplex.com/releases/view/52555)

还要检查同一页面中的其他版本（在“其他下载”中）以获取更新。

或者

您可以编写自己的 JSON 解析器，如下所示。示例实现也在那里。 [http://techblog.procurios.nl/k/618/news/view/14605/14863/How-do-I-write-my-own-parser-for-JSON.html](http://techblog.procurios.nl/k/618/news/view/14605/14863/How-do-I-write-my-own-parser-for-JSON.html)

还有这个 SO question [Is there a library to read JSON in C# on Windows Mobile？](https://stackoverflow.com/questions/183473/is-there-a-library-to-read-json-in-c-sharp-on-windows-mobile)

# ssas - Microsoft.AnalysisServices.AdomdServer.AdomdException in BIDS

> ID：14041681
> 
> 赞同：0
> 
> 时间：2012-12-26T14:02:58.663
> 
> 标签：ssas, bids

We are using following MDX to create dynamic named set to generate future dates for one of our cube -

```
LASTPERIODS(100, STRTOMEMBER("[Calenar].[Calendar Date].&[" + 
CSTR(FORMAT(DATEADD("D",100,[Forecast].[Date Recorded].CURRENTMEMBER.MEMBERVALUE),
    "yyyy-MM-ddT00:00:00")) + 
"]")) 
```

Above query expression executes successfully in MDX Query Analyzer. But after cube is processed successfully, we are facing issue while browsing the cube and getting following error:

*   Error occurred retrieving name set: Execution of the managed stored procedure DATEADD failed with following error 'Microsoft::AnalysisServices::AdomdServer::AdomdException
*   Internal Error : An external component returned an error (HRESULT = ).
*   The following system error occurred: Type Mismatch

Any help on this will be highly appreciated.

Referenced Link - [MDX Named Set Rolling Date Range](http://www.bidn.com/blogs/MikeDavis/ssis/1718/mdx-named-set-rolling-date-range)

Thanks,

Kinjal.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T09:25:09.560

[Forecast].[Date Recorded] 成员中是否有任何空值或“非日期”值？当您在多维数据集上将其作为 MDX 查询运行时，这是否有效？

# asp.net - Ldap authentication in ASP.Net MVC 3

> ID：14041682
> 
> 赞同：0
> 
> 时间：2012-12-26T14:03:06.997
> 
> 标签：asp.net, authentication, active-directory

I´m trying to authenticate users in ASP .Net MVC with ldap, but it isn´t working. I´m running wireshark to see if IIS is at least connecting to the LDAP server, but it´s not connecting.

I have an SQL database for the web, and then I want to authenticate users with a LDAP server.

Here is my Web.config:

```
<configuration>
  <connectionStrings>
    <add name="ADConnectionString" connectionString="LDAP://IP:PORT/OU=...,DC=..."/>
    <add name="MySqlMembershipConnection"
          connectionString="Pipe=MySQL;
                            Protocol=pipe;
                            Server=localhost;
                            Database=My DB;
                            User Id=My User;
                            Password=My Password;
                            "
          providerName="MySql.Data.MySqlClient"/>
  </connectionStrings>

  <appSettings>
    <add key="webpages:Version" value="1.0.0.0" />
    <add key="ClientValidationEnabled" value="true" />
    <add key="UnobtrusiveJavaScriptEnabled" value="true" />
  </appSettings>

  <system.web>
    <compilation debug="true" targetFramework="4.0">
      <assemblies>
        <add assembly="System.Web.Abstractions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.Helpers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.Routing, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.WebPages, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
      </assemblies>
    </compilation>

    <membership>
      <providers>
        <clear/>
        <add name="MySqlMembershipProvider"
             type="MySql.Web.Security.MySQLMembershipProvider, MySql.Web, 
                 Version=6.6.4.0, Culture=neutral, 
                 PublicKeyToken=c5687fc88969c44d"
             connectionStringName="MySqlMembershipConnection"
             enablePasswordRetrieval="false"
             enablePasswordReset="true"
             requiresQuestionAndAnswer="false"
             requiresUniqueEmail="true"
             passwordFormat="Hashed"
             maxInvalidPasswordAttempts="5"
             minRequiredPasswordLength="6"
             minRequiredNonalphanumericCharacters="0"
             passwordAttemptWindow="10"
             applicationName="/"
             autogenerateschema="true"/>

        <add name="ADMembership"
             type="System.Web.Security.ActiveDirectoryMembershipProvider,
               System.Web,
               Version=2.0.0.0, 
               Culture=neutral,
               PublicToken=b03f5f7f11d50a3a"
             connectionStringName="ADConnectionString"
             connectionUsername="LDAP User name"
             connectionPassword="LDAP Password" />
      </providers>
    </membership>

    <authentication mode="Windows" />

    <authorization>
      <deny users="?" />
    </authorization>

    <profile>
      <providers>
        <clear/>
        <add type="MySql.Web.Security.MySQLProfileProvider, MySql.Web, 
                 Version=6.6.4.0, Culture=neutral, 
                 PublicKeyToken=c5687fc88969c44d"
             name="MySqlProfileProvider"
             applicationName="/"
             connectionStringName="MySqlMembershipConnection"
             autogenerateschema="true"/>
      </providers>
    </profile>

    <roleManager enabled="true" defaultProvider="MySqlRoleProvider">
      <providers>
        <clear />
        <add connectionStringName="MySqlMembershipConnection"
             applicationName="/"
             name="MySqlRoleProvider"
             type="MySql.Web.Security.MySQLRoleProvider, MySql.Web, 
                 Version=6.6.4.0, Culture=neutral, 
                 PublicKeyToken=c5687fc88969c44d"
             autogenerateschema="true"/>
      </providers>
    </roleManager>

    <pages>
      <namespaces>
        <add namespace="System.Web.Helpers" />
        <add namespace="System.Web.Mvc" />
        <add namespace="System.Web.Mvc.Ajax" />
        <add namespace="System.Web.Mvc.Html" />
        <add namespace="System.Web.Routing" />
        <add namespace="System.Web.WebPages"/>
      </namespaces>
    </pages>
  </system.web>

  <system.webServer>
    <validation validateIntegratedModeConfiguration="false"/>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>

  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="3.0.0.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
</configuration> 
```

# hadoop - incompatibility of hadoop versions

> ID：14041687
> 
> 赞同：3
> 
> 时间：2012-12-26T14:03:34.937
> 
> 标签：hadoop, mapreduce

I've developed a MapReduce with reduce-side join on Hadoop 0.20.2 version. All java classes compiles without any error. My program works as it has to. But this version of hadoop is on test virtual machine. On my real cluster I have another version of hadoop (hadoop 2.00-cdh4.1.2). When I want to compile java-classes it doesn't work. I get 100 errors like following:

```
JoinMapper.java:8: package org.apache.hadoop.filecache does not exist
import org.apache.hadoop.filecache.DistributedCache;
                                  ^
JoinMapper.java:9: package org.apache.hadoop.fs does not exist
import org.apache.hadoop.fs.Path;
                           ^
JoinMapper.java:10: package org.apache.hadoop.io does not exist
import org.apache.hadoop.io.Text;
                           ^
JoinMapper.java:11: package org.apache.hadoop.io does not exist
import org.apache.hadoop.io.*;
^
JoinMapper.java:12: package org.apache.hadoop.mapred does not exist
import org.apache.hadoop.mapred.FileInputFormat;
                               ^
JoinMapper.java:13: package org.apache.hadoop.mapred does not exist
import org.apache.hadoop.mapred.FileOutputFormat;
                               ^
JoinMapper.java:14: package org.apache.hadoop.mapred does not exist
import org.apache.hadoop.mapred.InputFormat;
                               ^
JoinMapper.java:15: package org.apache.hadoop.mapred does not exist
import org.apache.hadoop.mapred.JobClient;
                               ^
JoinMapper.java:16: package org.apache.hadoop.mapred does not exist
import org.apache.hadoop.mapred.JobConf;
                               ^
JoinMapper.java:17: package org.apache.hadoop.mapred does not exist
import org.apache.hadoop.mapred.MapReduceBase;
                               ^
JoinMapper.java:18: package org.apache.hadoop.mapred does not exist
import org.apache.hadoop.mapred.Mapper;
                               ^
JoinMapper.java:19: package org.apache.hadoop.mapred does not exist
import org.apache.hadoop.mapred.OutputCollector;
                               ^
JoinMapper.java:20: package org.apache.hadoop.mapred does not exist
import org.apache.hadoop.mapred.Reporter;
                               ^
JoinMapper.java:21: package org.apache.hadoop.mapred does not exist
import org.apache.hadoop.mapred.TextOutputFormat;
                               ^
JoinMapper.java:22: package org.apache.hadoop.mapreduce.lib.input does not exist
import org.apache.hadoop.mapreduce.lib.input.MultipleInputs;
                                            ^
JoinMapper.java:23: package org.apache.hadoop.util does not exist
import org.apache.hadoop.util.Tool;
                             ^
JoinMapper.java:24: package org.apache.hadoop.util does not exist
import org.apache.hadoop.util.ToolRunner;
                             ^
JoinMapper.java:26: cannot find symbol
symbol: class MapReduceBase
public class JoinMapper extends MapReduceBase implements Mapper<LongWritable, Text, TextPair, Text> {
                                ^
JoinMapper.java:26: cannot find symbol
symbol: class Mapper
public class JoinMapper extends MapReduceBase implements Mapper<LongWritable, Text, TextPair, Text> {
                                                         ^
JoinMapper.java:26: cannot find symbol
symbol: class LongWritable
public class JoinMapper extends MapReduceBase implements Mapper<LongWritable, Text, TextPair, Text> {
                                                                ^
JoinMapper.java:26: cannot find symbol
symbol: class Text
public class JoinMapper extends MapReduceBase implements Mapper<LongWritable, Text, TextPair, Text> {
                                                                              ^
TextPair.java:2: package org.apache.hadoop.io does not exist
import org.apache.hadoop.io.*;
^
TextPair.java:4: cannot find symbol
symbol: class WritableComparable
public class TextPair implements WritableComparable<TextPair> {
                                 ^
TextPair.java:4: interface expected here
public class TextPair implements WritableComparable<TextPair> {
                                                   ^
JoinMapper.java:26: cannot find symbol
symbol: class Text
public class JoinMapper extends MapReduceBase implements Mapper<LongWritable, Text, TextPair, Text> {
                                                                                              ^
JoinMapper.java:26: interface expected here
public class JoinMapper extends MapReduceBase implements Mapper<LongWritable, Text, TextPair, Text> {
                                                               ^
NcdcRecordParser.java:2: package org.apache.hadoop.io does not exist
import org.apache.hadoop.io.*; 
```

I understand this version doesn't have packages that I need. But I don't know how to solve my problem. Can anyone help me?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T17:59:23.020

据我所知，这些 java 包应该仍然存在于最新版本的 Hadoop 中。

我认为您的问题是 hadoop jar 不在您的类路径中。当我尝试在没有它们的情况下编译我的 map reduce 项目时，我遇到了类似的错误。

如果您使用的是 javac，请尝试以下操作（这使用我的 Ubuntu CDH4 开发机器上的路径位置）：

```
javac -classpath /usr/lib/hadoop/*:/usr/lib/hadoop-0.20-mapreduce/*:/usr/lib/hadoop-hdfs/* JoinMapper.java TextPair.java NcdcRecordParser.java 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T18:48:46.537

Apache Hadoop 在 0.20 和 0.23（也称为 2.0.0）之间对其内部包进行了重大重新命名。这包括重命名`org.apache.hadoop.mapred`为`org.apache.hadoop.mapreduce`.

Hadoop 的 Cloudera 发行版具有单独的 Maven 工件，您可以依赖这些工件来使用旧版本进行构建。工件的名称列在[CDH4 Maven 页面上](https://ccp.cloudera.com/display/CDH4DOC/Using+the+CDH4+Maven+Repository)；你想要带有 version 的工件`2.0.0-mr1-cdh4.1.2`。

另请参阅[使用 mapred 或 mapreduce 包创建 Hadoop 作业是否更好？](https://stackoverflow.com/questions/7598422/is-it-better-to-use-the-mapred-or-the-mapreduce-package-to-create-a-hadoop-job)有关是否要移植到较新 API 的一些详细信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T17:46:01.033

为 Maven 尝试 param -Dhadoop.profile=23。另外，请参阅[https://issues.apache.org/jira/browse/HBASE-4327?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel&focusedCommentId=13098596#comment-13098596](https://issues.apache.org/jira/browse/HBASE-4327?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel&focusedCommentId=13098596#comment-13098596)

# fonts - Tkinter：在调整大小的窗口的按钮中调整字体大小

> ID：14041695
> 
> 赞同：1
> 
> 时间：2012-12-26T14:03:53.380
> 
> 标签：fonts, resize, tkinter

调整窗口大小时，如何使“Hi”的字体大小与窗口大小成正比？

```
import Tkinter

outer_window = Tkinter.Tk()

button_1 = Tkinter.Button(outer_window, text='Hi')
button_1.grid(sticky='nsew')

outer_window.columnconfigure(0, weight=1)
outer_window.rowconfigure(0, weight=1)

outer_window.mainloop() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T17:09:34.077

对此没有内置支持。您必须为`<Configure>`按钮的事件创建绑定。在绑定的处理程序中，您必须获取按钮的大小，然后计算适当的字体大小。然后，您必须重新配置按钮使用的字体。

# c - gdb start tracing from the frame up in the call stack

> ID：14041696
> 
> 赞同：1
> 
> 时间：2012-12-26T14:04:06.097
> 
> 标签：c, debugging, gdb

I want to trace the sequence of calls from frame -5 (frame 5) to 0 (current position). So first I want to go to frame 5 and then move down to frame 0 by doing single stepping to understand the code flow. I tried to do `frame 5` and then `next` , but `next` is taking me to next line in current (frame 0) function.

# android - JSONException: java.lang.String 无法转换为 JSONObject

> ID：14041698
> 
> 赞同：2
> 
> 时间：2012-12-26T14:04:33.440
> 
> 标签：android, json, jsonexception

我知道这个问题已经被问过很多次了，但我没有找到任何与我的问题相关的答案。

我正在尝试从资产文件夹中读取 json 数据，但是在获取时出现以下异常

我搜索了很多东西，但没有帮助。请给我任何参考或提示。
提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T14:06:02.767

采用

```
 String searchedTerm = jsonObject.getString(TAG_SEARCHEDTERM);
   JSONArray results = jsonObject.getJSONArray(TAG_RESULTS); 
```

代替

```
 JSONObject searchedTerm = jsonObject.getJSONObject(TAG_SEARCHEDTERM);
  JSONArray results = searchedTerm.getJSONArray(TAG_RESULTS); 
```

因为`TAG_SEARCHEDTERM`是键值对而不是，`JSONObject`并且您正在尝试将 String 值强制转换为`JsonObject`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T14:23:15.603

我想你需要在你遇到异常的地方获取**Dish Name 。**你可以得到如下所示的菜名...

```
String searchedTerm = jsonObject.getString(TAG_SEARCHEDTERM); 
```

使用这个

```
JSONArray results = jsonObject.getJSONArray(TAG_RESULTS); 
```

您将获得`"results"`JSONArray，如您的 json 文件中所示。

您可以使用 for 循环遍历它。

# php - If true use foreach loop, else use while

> ID：14041702
> 
> 赞同：0
> 
> 时间：2012-12-26T14:04:49.357
> 
> 标签：php, mysql, database, loops

I'm trying to link the MySQL while loop into foreach loop using something like this :

```
if($something == true){
  foreach($array as $arr){
} else {
  while($row = mysql_fetch_array($mysql_query)){
}
  // loop instructions
} 
```

It looks so wrong, I know but you see what I am trying to do ?.. I want to grab data from array if `$something` was true, else then grab data from database

I had another solution idea and its to manually match the array with how `$mysql_query` works so I can use them both with `while` only, something like this :

```
if($something == true){
  $mysql_query = array("username" => "$_GET['username']", "password" => "$_GET['password']");
} else {
  $mysql_query = mysql_query("SELECT * FROM users WHERE usern......");
}

while($row = mysql_fetch_array($mysql_query)){
... 
```

That's a second way to do it but it looks wrong as well because the first array is normal, I want to match that normal array with how `mysql_query` builds it so it can fit with the while loop

**P.S. : I **DO NOT** want to repeat writing the loop instructions, I want them both to work with only one like I mentioned above**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T14:09:20.820

将您的处理放入一个函数中：

```
function process_data($data) {
    // do stuff
}

if($something){
    foreach($array as $arr){
        process_data($arr);
    }
} else {
    while($row = mysql_fetch_array($mysql_query)){
        process_data($row);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T14:10:25.900

这里的其他答案很好，但是最好确保这`$array`是一个有效的数组，不管`something`......怎么样

```
if (!something){
    $array = array();
    while($row=mysql_fetch_array($mysql_query)) {$array[] = $row;}
}

foreach($array as $arr){
   // do work
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T14:12:15.143

如果您扩大了您所解释的范围，您可能会得到更好的答案。如果不知道某物是什么、数据是什么，再加上最终目标，那么很难判断您应该使用哪种结构。

在我看来，如果循环内的代码相同，您只需使用一个函数就可以实现这一点。像这样：

```
if($something == true)
{
    foreach($array as $arr)
    {
        doWork($arr);
    }
}
else
{
     while($row = mysql_fetch_array($mysql_query))
     {
         doWork($row);
     }
}

function doWork($arr)
{
 //...
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-26T14:07:17.513

您不能在这样的循环内嵌套循环指令。您需要在 IF 语句中完全有两个单独的循环。

```
if($something == true){
  foreach($array as $arr){
     // do work
  }
} else {
  while($row = mysql_fetch_array($mysql_query)){
    // do work
  }
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-26T14:17:30.047

也许你可以从这个角度来看。请注意，此代码使用 mysql_fetch_assoc() 而不是 mysql_fetch_array()。尝试这两个函数并使用 var_dump() 查看结果行。您将看到 mysql_fetch_array() 的数据量是原来的两倍。你可能想要那个，但可能不是。

```
if ($something !== true)
{
    $array = array();
    while($row = mysql_fetch_assoc($mysql_query_result_resource))
    {
        $array[] = $row;
    }
}
foreach($array as $arr)
{
    /* PROCESS */
} 
```

# delphi - 用delphi计算谷歌工具栏pagerank的校验和

> ID：14041705
> 
> 赞同：0
> 
> 时间：2012-12-26T14:05:00.863
> 
> 标签：delphi, pagerank

这是请求 pagerank 的一般 url： [http ://toolbarqueries.google.com/tbr?client=navclient-auto&features=Rank&ch=SITECHECKSUM&q=info:SITENAME.com](http://toolbarqueries.google.com/tbr?client=navclient-auto&features=Rank&ch=SITECHECKSUM&q=info:SITENAME.com)

这是一个工作示例网址： [http ://toolbarqueries.google.com/tbr?client=navclient-auto&features=Rank&ch=64012521073&q=info:http://www.yanniel.info/](http://toolbarqueries.google.com/tbr?client=navclient-auto&features=Rank&ch=64012521073&q=info:http://www.yanniel.info/)

你如何用delphi计算校验和？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T14:39:07.570

此页面声称包含校验和算法：[http ://automateeverything.tumblr.com/post/19951549637/google-page-rank-bash-script](http://automateeverything.tumblr.com/post/19951549637/google-page-rank-bash-script)

那里的代码在 C 中，但很简单，可以将其移植到 Delphi。甚至只是将其编译为 .obj 并直接链接。

这是我在港口的快速尝试。也许你会发现它很有用。在真正使用它之前，我当然想对此进行一些适当的测试。

```
{$OVERFLOWCHECKS OFF}
program pagerank;

{$APPTYPE CONSOLE}

uses
  SysUtils;

function ConvertStrToInt(pStr: PAnsiChar; Init, Factor: Integer): Integer;
begin
  Result := Init;
  while pStr^<>#0 do
  begin
    Result := Result*Factor;
    inc(Result, ord(pStr^));
    inc(pStr);
  end;
end;

function HashURL(pStr: PAnsiChar): Integer;
var
  C1, C2, T1, T2: Cardinal;
begin
  C1 := ConvertStrToInt(pStr, $1505, $21);
  C2 := ConvertStrToInt(pStr, 0, $1003F);
  C1 := C1 shr 2;
  C1 := ((C1 shr 4) and $3FFFFC0) or (C1 and $3F);
  C1 := ((C1 shr 4) and $3FFC00) or (C1 and $3FF);
  C1 := ((C1 shr 4) and $3C000) or (C1 and $3FFF);

  T1 := (C1 and $3C0) shl 4;
  T1 := T1 or (C1 and $3C);
  T1 := (T1 shl 2) or (C2 and $F0F);

  T2 := (C1 and $FFFFC000) shl 4;
  T2 := T2 or (C1 and $3C00);
  T2 := (T2 shl $A) or (C2 and $F0F0000);

  Result := Integer(T1 or T2);
end;

function CheckHash(HashInt: Cardinal): AnsiChar;
var
  Check, Remainder: Integer;
  Flag: Boolean;
begin
  Check := 0;
  Flag := False;
  repeat
    Remainder := HashInt mod 10;
    HashInt := HashInt div 10;
    if Flag then
    begin
      inc(Remainder, Remainder);
      Remainder := (Remainder div 10) + (Remainder mod 10);
    end;
    inc(Check, Remainder);
    Flag := not Flag;
  until HashInt=0;

  Check := Check mod 10;
  if Check<>0 then
  begin
    Check := 10-Check;
    if Flag then
    begin
      if (Check mod 2)=1 then
        inc(Check, 9);
      Check := Check shr 1;
    end;
  end;
  inc(Check, $30);
  Result := AnsiChar(Check);
end;

function PageRankCheckSum(const URL: string): string;
var
  HashInt: Cardinal;
begin
  HashInt := Cardinal(HashURL(PAnsiChar(AnsiString(URL))));
  Result := Format('7%s%u', [CheckHash(HashInt), HashInt]);
end;

procedure Main;
begin
  if ParamCount<>1 then
  begin
    Writeln(Format('Usage: %s [URL]', 
      [ChangeFileExt(ExtractFileName(ParamStr(0)), '')]));
    exit;
  end;

  Writeln('Checksum='+PageRankCheckSum(ParamStr(1)));
end;

begin
  try
    Main;
  except
    on E: Exception do
      Writeln(E.ClassName, ': ', E.Message);
  end;
end. 
```

# c++ - 什么是枚举类，我为什么要关心？

> ID：14041711
> 
> 赞同：6
> 
> 时间：2012-12-26T14:05:29.920
> 
> 标签：c++, c++11, enums, enum-class

对于从未写过一行 C++11 并且目前还没有机会使用 C++11 编程的人，你能用一小段话告诉我：

什么是“枚举类”，我们为什么需要它？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-26T14:39:05.197

`enum class`称为*作用域枚举*。它可以防止使用枚举器的名称污染枚举出现的名称空间。

在 C++03 中，您可以通过在`enum`内部放置一个专用的`class`. 也许这就是语法的来源，这有点令人困惑。

另一个区别是这种类型的枚举数不会隐式转换为`int`(`static_cast<int>`是必需的)。这可能很少*需要，*但它可以安全地重载一个`int`带有一个参数`enum`类型的函数。您可以确定`int`不会被意外调用。或者您可以使用专用函数定义伪整数类型`operator`，并确保内置运算符不会干扰。

这两个不相关的差异出现在同一个包中有点烦人，并且您无法在没有隐式转换的情况下获得无范围的*枚举*，但通常这两个更改都是好事，并且`enum class`是 C++11 中的一个很好的默认做法。

**编辑：**范围枚举定义如下：

```
enum class duck { huey, dewey, louie }; 
```

并且必须与范围解析运算符一起使用，`::`如下所示：

```
duck culprit = duck::huey; // or "auto culprit" to avoid redundancy 
```

请注意，该`::`运算符也适用于 C++03 无范围枚举，因此即使第一行丢失，上面的第二行也可以工作`class`。

这可能是过多的细节，但如果向前声明枚举类型，`class`则不会进入*详细类型说明符，如*

```
void quack( enum duck whom ); // not "enum class" 
```

但是，C++11 中有一个新结构*opaque-enum-declaration*，它确实包含`class`关键字并定义了一个完整的类型。

```
enum duck; // duck is declared as incomplete type
enum class duck; // duck is now complete type; underlying type defaults to int 
```

关键字`struct`可以被替换`class`，没有语义差异。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T14:19:28.430

1.  当数据大小很重要时（可能将其打包在结构中），您可以显式指定存储类型。
2.  枚举值仅在枚举名称范围*内*；在 c++11 之前，它们会泄漏到封闭范围内。
3.  我似乎记得转换规则也有所改变......

关于点 1，`enum`s 的存储大小将在 C++11 之前根据分配给枚举的最大值而改变。通常它并不重要，但是当它发生时，你必须诉诸丑陋的黑客来强制大小。

至于第**3**点，在 C++11`enum`中 s 不可隐式转换或与`int`s 或其他`enum`类型相比较：对于避免函数重载头痛和其他隐式转换陷阱很有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T14:21:20.237

就我个人而言，我在基于 tcp 的消息传递协议中使用了它：许多字段都是枚举值，我**只需要在一个字节内**进行编码，以尊重消息传递接口。

我所有的枚举都是这样定义的：

```
enum class EnumFieldA : unsigned char { eValProperty1, eValProperty2};
enum class EnumFieldB : unsigned char { eValProperty1, eValProperty2, eValProperty3};
enum class EnumFieldC : unsigned char { eValProperty1, eValProperty2, eValProperty3, eValProperty4};
... 
```

[在这个 SO question](https://stackoverflow.com/questions/6936030/do-we-really-need-enum-class-in-c11)中也有很多彻底的答案。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-26T14:12:24.273

起初我对你的问题感到困惑，但我想你想知道 c++ 枚举和 c++11 中的枚举之间的区别。据我所知，在后面，你有强类型的枚举，可以让你确定它们的范围。我认为[这](http://www.cprogramming.com/c++11/c++11-nullptr-strongly-typed-enum-class.html)很好地解释了它。干杯

# solr - 为 ezPublish 设置 Solr

> ID：14041712
> 
> 赞同：1
> 
> 时间：2012-12-26T14:05:32.510
> 
> 标签：solr, ezpublish

我正在使用 eZPublis(4.6.0)。我在 xampp 文件夹中设置了 solr 文件夹，并在 \settings\override\site.ini.append.php 中激活了 eZFind 扩展。

我的 solr 在 8080 端口（“http://127.0.0.1:8080/solr/”）上运行。当我运行“http://127.0.0.1:8080/solr/”时，它加载正常。

但是，当我尝试运行命令时：php extension/ezfind/bin/php/updatesearchindexsolr.php -s 显示以下错误“请确保服务器已启动并且 eZ Find 的配置正确”。我正在关注[http://harmssite.com/post/86#comment-113](http://harmssite.com/post/86#comment-113)。

谁能建议我可能做错了什么或任何其他解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T09:26:08.730

如果您确定 solr 正在运行，那么您可能需要编辑 solr.ini（或其覆盖之一）并使用`127.0.0.1`而不是`localhost`. 我有时会遇到这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T19:56:04.267

默认的 Solr 端口是`8983`，因此 eZ Find out of the box 设置为查看该端口。如果您确定 Solr 已启动并在端口上运行，`8080`则查看您的端口`solr.ini`以验证您的 eZ Find 指向正确的 Solr 端口。

# linux - 期望程序从文件发送命令

> ID：14041717
> 
> 赞同：1
> 
> 时间：2012-12-26T14:05:53.490
> 
> 标签：linux, unix, expect

如何使“期望”程序的**发送**命令从文件中读取并使用每一行作为参数。

我想在期望程序中使用类似循环的结构，如下所示（注意：-while 循环是虚构的。）

```
spawn /my/program

expect {
 -re EBtxjjmEcQTxc0SLd4TdXxjUduxCOLZBwEme2Z.*password: { 
             while read_line in FILE; 
             do 
                 send $read-line; 
             done 
} 
```

如何使用“expect”对等价的while循环部分进行编程

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T18:26:32.310

请注意，在您的问题中，您缺少一个右括号，并且您输入了错误的变量名（`read_line`和`read-line`）

Expect 是 Tcl 扩展，因此您可以使用所有Tcl[命令](http://tcl.tk/man/tcl8.5/)

```
spawn /my/program
expect { 
    -re EBtxjjmEcQTxc0SLd4TdXxjUduxCOLZBwEme2Z.*password: { 
        set fh [open FILE r]
        while {[gets $fh read_line] != -1} {
            send "$read_line\r"
        } 
        close $fh
    }
} 
```

如果你安装[tcllib](http://tcllib.sourceforge.net)，你可以做

```
package require fileutil
spawn /my/program
expect { 
    -re EBtxjjmEcQTxc0SLd4TdXxjUduxCOLZBwEme2Z.*password: { 
        fileutil::foreachLine read_line FILE {
            send "$read_line\r"
        } 
    }
} 
```

# ios - 保存/加载IOS数据

> ID：14041727
> 
> 赞同：1
> 
> 时间：2012-12-26T14:06:31.690
> 
> 标签：ios, load, save

我一直在尝试让我的应用程序从应用程序中的一组数组中保存和加载数据，奇怪的问题是，当应用程序终止（完全关闭）时，重新启动时数据似乎没有加载，我我看过很多帖子、教程等，但我似乎无法让它工作，我在应用程序上有两个测试按钮来触发保存和加载方法，还有一个按钮来清除记录，当我使用这些进行测试，它可以完美运行并且数据可以正确保存和加载。

我目前的设置如下：

*   我在支持文件目录中有一个名为 data.plist 的 plist 文件，在这个文件中，我有各种数组，索引 0 中的数据与全局数据类创建自身实例时初始化的数据相同。

我的保存代码：

```
- (void)saveData{

    // get paths from root direcory
    NSArray *paths = NSSearchPathForDirectoriesInDomains (NSDocumentDirectory, NSUserDomainMask, YES);
    // get documents path
    NSString *documentsPath = [paths objectAtIndex:0];
    // get the path to our Data/plist file
    NSString *plistPath = [documentsPath stringByAppendingPathComponent:@"data.plist"];

    // create dictionary with arrays and their corresponding keys
    NSDictionary *plistDict = [NSDictionary dictionaryWithObjects: [NSArray arrayWithObjects: personalitySliderValue, looksSliderValue, humourSliderValue, chemistrySliderValue, emptySlider, notesValues,nameValues, noValues, ratingValues, nil] forKeys:[NSArray arrayWithObjects: @"personality", @"looks", @"humour", @"chemistry",@"empty",@"notes",@"name",@"no",@"rating", nil]];

    NSString *error = nil;
    // create NSData from dictionary
    NSData *plistData = [NSPropertyListSerialization dataFromPropertyList:plistDict format:NSPropertyListXMLFormat_v1_0 errorDescription:&error];

    // check if plistData exists
    if(plistData)
    {
        // write plistData to our Data.plist file
        [plistData writeToFile:plistPath atomically:YES];
    }
    else
    {
        NSLog(@"Error in saveData: %@", error);
    }

} 
```

我的加载代码：

```
- (void)loadData{

    // get paths from root direcory
    NSArray *paths = NSSearchPathForDirectoriesInDomains (NSDocumentDirectory, NSUserDomainMask, YES);
    // get documents path
    NSString *documentsPath = [paths objectAtIndex:0];
    // get the path to our Data/plist file
    NSString *plistPath = [documentsPath stringByAppendingPathComponent:@"data.plist"];

    // check to see if data.plist exists in documents
    if (![[NSFileManager defaultManager] fileExistsAtPath:plistPath])
    {
        // if not in documents, get property list from main bundle CHECK D capitalisation
        plistPath = [[NSBundle mainBundle] pathForResource:@"data" ofType:@"plist"];
    }

    // read property list into memory as an NSData object
    NSData *plistXML = [[NSFileManager defaultManager] contentsAtPath:plistPath];
    NSString *errorDesc = nil;
    NSPropertyListFormat format;
    // convert static property list into dictionary object
    NSDictionary *dictionaryTemp = (NSDictionary *)[NSPropertyListSerialization propertyListFromData:plistXML mutabilityOption:NSPropertyListMutableContainersAndLeaves format:&format errorDescription:&errorDesc];
    if (!dictionaryTemp)
    {
        NSLog(@"Error reading plist: %@, format: %d", errorDesc, format);
    }
    // assign values
    personalitySliderValue = [NSMutableArray arrayWithArray:[dictionaryTemp objectForKey:@"personality"]];
    looksSliderValue = [NSMutableArray arrayWithArray:[dictionaryTemp objectForKey:@"looks"]];
    humourSliderValue = [NSMutableArray arrayWithArray:[dictionaryTemp objectForKey:@"humour"]];
    chemistrySliderValue = [NSMutableArray arrayWithArray:[dictionaryTemp objectForKey:@"chemistry"]];
    emptySlider = [NSMutableArray arrayWithArray:[dictionaryTemp objectForKey:@"empty"]];
    notesValues = [NSMutableArray arrayWithArray:[dictionaryTemp objectForKey:@"notes"]];
    nameValues = [NSMutableArray arrayWithArray:[dictionaryTemp objectForKey:@"name"]];
    noValues = [NSMutableArray arrayWithArray:[dictionaryTemp objectForKey:@"no"]];
    ratingValues = [NSMutableArray arrayWithArray:[dictionaryTemp objectForKey:@"rating"]];

} 
```

最后是应用程序委托方法：

```
- (void)applicationDidEnterBackground:(UIApplication *)application
{

    // Use this method to release shared resources, save user data, invalidate timers, and store enough application state information to restore your application to its current state in case it is terminated later.
    // If your application supports background execution, this method is called instead of applicationWillTerminate: when the user quits.

    // save the app data

    [[GlobalData sharedGlobalData]saveData];
    NSLog(@"save method run");

}

- (void)applicationWillEnterForeground:(UIApplication *)application
{
    // Called as part of the transition from the background to the inactive state; here you can undo many of the changes made on entering the background.

    // load the app data

    [[GlobalData sharedGlobalData]loadData];
    NSLog(@"load method run");
} 
```

这确实让我把头发拔了出来，所以任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T14:19:55.153

您可以在此应用程序委托方法中在启动时加载数据：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
   ....
   [[GlobalData sharedGlobalData] loadData];
} 
```

# cocos2d-iphone - 我可以在运动体上使用 b2MouseJoint

> ID：14041732
> 
> 赞同：0
> 
> 时间：2012-12-26T14:07:00.737
> 
> 标签：cocos2d-iphone, box2d, box2d-iphone

我在 b2MouseJoint 上找不到任何文档。
它仅适用于动态物体吗？或者我可以在运动学上使用它吗？
如果没有，除了施加力之外，我还能如何移动运动学？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T00:44:15.040

您可以将运动体视为具有无限质量，因此它们不会对力或冲量作出反应。通常使用它们的全部目的是因为它们不会被世界上的其他东西推或撞，所以鼠标关节不会有任何作用。

您可以使用 SetLinearVelocity 和 SetAngularVelocity 移动它们。

# linux - GStreamer 自定义插件和 alsasink 无法检测格式

> ID：14041738
> 
> 赞同：5
> 
> 时间：2012-12-26T14:07:19.210
> 
> 标签：linux, ubuntu, plugins, gstreamer, alsa

我正在按照 GStreamer Plugin Writer's Guide 开发一个 GStreamer 插件，并使用 gst-plugins-bad 存储库中的 gst-element-maker 并将基类设置为 basetransform。作为起点，我开发了一个名为 MyFilter 的插件，它简单地沿链传递数据。该插件正在运行，但是当我在调试级别设置为 2 的情况下运行 gst-launch 时，出现以下错误：

> alsa gstalsa.c:124:gst_alsa_detect_formats：跳过非 int 格式。

我正在执行命令：

> gst-launch --gst-debug-level=2 --gst-plugin-load=./src/libgstmyfilter.la filesrc location=./song.mp3 ！扑通扑通！音频转换！音频重采样！我的过滤器！阿尔萨西克

从由 gst-element-maker 创建的基类中，我删除了对 gst_pad_new_from_static_template() 的调用，因为调用返回错误报告接收器和源垫已创建，我使用 gst_pad_set_chain_function() 设置了链函数，有实现了函数 gst_myfilter_transform_caps()，并添加了处理 GST_EVENT_NEWSEGMENT 事件的代码。我用于源和接收器的 STATIC_CAPS 字符串是：

> "audio/x-raw-int,"
> "rate = (int) { 16000, 32000, 44100, 48000 }, "
> "channels = (int) [ 1, 2 ], "
> "endianness = (int) BYTE_ORDER, "
> "有符号 = (boolean) true, "
> "width = (int) 16, "
> "depth = (int) 16"

我使用 gst_pad_get_fixed_caps_func(GST_BASE_TRANSFORM_SRC[[/SINK]]_PAD(trans)) 从 gst_myfilter_transform_caps() 返回上限。使用由 gst-element-maker 在 gst_myfilter_base_init() 中创建的默认代码设置焊盘帽，使用：

> gst_element_class_add_pad_template(element_class, gst_static_pad_template_get(&gst_myfilter_sink_template));

GstBaseTransform 类有问题吗？我有另一个自定义过滤器，它不使用 GstBaseTransform 类并且没有这个问题。我在 Ubuntu 12.04 中使用 GStreamer v0.10.36。

# sql - 如何基于单个字段查询三个表

> ID：14041740
> 
> 赞同：2
> 
> 时间：2012-12-26T14:07:38.193
> 
> 标签：sql, select, database, relational

我在 SQL 数据库中有三个表。这个关系系统是由其他人设计的，但我被要求创建一个新查询，因为他不再为公司工作。出于保密目的，我将使用示例名称。

1.  **客户**
    customer_id
    product_code
    product_color
    product_size
    ...

2.  **customer_link**
    customer_id
    product_id

3.  **customer_stats**
    product_id
    product_actual_product
    product_actual_color
    product_actual_size
    ...

该系统旨在让用户在系统中输入信息并为每个客户提供多种产品。在 customer 中，显示的字段都是由 customer_id 从 (1) 到 (2) 链接的所有代码。然后，基于 (2) 中具有相同 customer_id 和不同 product_id 的多个记录，两个可以在 (2) 和 (3) 之间建立多个链接。(3) 具有链接的 product_id 和 (1) 中列出的代码的实际文本。

底线是我需要一个基于 (1) 中的字段但数据存储在 (3) 中的 SELECT 语句。哇，我很困惑，真的可以使用一些帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T14:09:17.773

这应该很简单，

```
SELECT  a.*, c.*
FROM    customer a
        INNER JOIN customer_link b
            ON a.customer_ID = b.customer_ID
        INNER JOIN Customer_stats c
            ON b.product_id = c.product_id 
```

要了解有关联接的更多信息，请参阅下面的链接

*   [SQL 连接的可视化表示](http://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins)

# c++ - 对 const_cast 感到困惑

> ID：14041741
> 
> 赞同：0
> 
> 时间：2012-12-26T14:07:39.863
> 
> 标签：c++, const-cast

```
Sample_Program-1

#include<iostream>
using namespace std ;

int main(){
const int i = 9;
 int *j = const_cast<int*>(&i); //Ok 
 int *j = const_cast<int*>(i);  //Error
}

Sample_Program-2

#include<iostream>
using namespace std ;

int main(){
const int i = 9;
 int j = const_cast<int&>(i);//Ok
 int j = const_cast<int>(i);//Error
} 
```

我只是在学习一些 c++ 概念并遇到了上述 2 个概念。谁能解释我在上述 2 个示例程序中标记为错误的概念？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T14:35:06.273

1) 您将 (const int*) 转换为 (int*)。因此，由于 const 修饰符，您无法更改放置在该地址的值（指针指向内存中的某个地址）。当您将其转换为 (int*) 时，编译器将允许在该地址更改数据。

2) 您试图将 (const int) 转换为指向 int (int*) 的指针。(int) 和 (int*) 是不同的类型。这与要求 const_cast 将字符串转换为浮点数相同。const_cast 运算符不能更改变量的类型。要制作这样的东西，您应该查看 static_cast 或 reinterpret_cast。

3）您将 const int 转换为对 int 的引用并将值分配给 int（您只需将值复制到一个新变量中）。这可能不是您想要的，因为在这种情况下更改 j 不会更改 i。您可以创建对 int 而不是 j 的引用，然后您可以更改 i 的值。

4）我不明白你想在这里做什么。const_cast 的想法是删除对象上的 const 保护。所以这个操作只能在指针和引用上进行。您不需要任何强制转换即可将 const int 复制到 int。但是在获取指针或引用并删除保护之前，您无法更改 i 的值。

结论。删除 const 是一种糟糕的编程风格。假设您编写了一个函数库，其中函数具有 const int* 参数。您的图书馆的用户将确保他的 int 不会改变，但是您更改了它并且他丢失了他需要的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T14:11:12.910

当你写

```
int *j = const_cast<int*>(i); 
```

您正在尝试将 'i' 转换为指针。 `const_cast`并不意味着用于更改数据类型。

也许你的意思是

```
int *j = const_cast<int*>(&i); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T19:15:02.720

这是解释的第一个语句：

[转换为非常量 int 指针]（[获取指向 'i' (const)] 的指针）；

```
 const_cast<int*>   (        &i            ); 
```

这是解释的第二个语句：

[强制转换为非 const int 指针] ([get value of 'i']);

```
 const_cast<int*>    (     i       ); 
```

错误是因为整数值不是指针值，因此 const_cast 不能进行该转换。它只能将指针映射到指针，或将引用映射到引用。

这是解释的第三个语句：

[强制转换为非常量 int 引用]（[隐式获取对 'i' (const)] 的引用）；

```
 const_cast< int& >    (   i  ); 
```

这是解释的第二个语句：

[强制转换为非 const int 值] ( [get value of 'i' (const)] );

```
 const_cast< int >      (     i   ); 
```

该错误是因为 const_cast 不能用于在值之间进行转换，只能在指针或引用之间进行转换。对于值，我们谈论的是“转换”而不是强制转换。如：

`int i_nc = i;` // OK：不需要 const-cast，因为值被复制了。转换是一种将一种类型的对象的值复制到另一种类型的对象的方法。铸造运营商对此没有意义。

# jmx - 关于JMX的查询

> ID：14041746
> 
> 赞同：0
> 
> 时间：2012-12-26T14:08:03.313
> 
> 标签：jmx

需要回答以下两个问题：

Q1) 哪个 JMX 层由资源组成

选项：

1.Agent 2.Instrumentation 3.Distributed Services 4.None and

Q2) JMX 不包含

选项：

1.仪器 2.代理 3.管理 4.分布式服务。

一些在 JMX 的这些方面启发我的文档将很有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T14:28:21.410

可以参考：[了解JMX](http://docs.oracle.com/cd/E15051_01/wls/docs103/jmxinst/understanding.html)

你会发现：

*   处理资源的 JMX 层是*Instrumentation*
*   JMX 不包含*管理*（但提供接口供客户端实现）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-02-09T13:42:37.640

答案中提到的链接已更改为 - [http://docs.oracle.com/cd/E13222_01/wls/docs100/jmxinst/understanding.html](http://docs.oracle.com/cd/E13222_01/wls/docs100/jmxinst/understanding.html)

# jsf-2 - facelets 库中的组件标记

> ID：14041748
> 
> 赞同：0
> 
> 时间：2012-12-26T14:08:10.107
> 
> 标签：jsf-2, facelets

我正在使用带有 JSF 2.0 的 Facelets。在 facelets 标签库中有一个标签叫做`<ui:component>`. 它将 UIComponent 的一个实例插入到树中，并修剪自身外部的标签。

谁能解释一下这种功能的用途是什么？为什么有人想向`UIComponent`树中添加实例？

我搜索了很多组件标签的示例，但没有找到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T21:48:57.747

在组件树中[`<ui:component>`](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/ui/component.html)插入一个物理`UIComponent`实例，所有内容都作为其子项。

[`<ui:composition>`](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/ui/composition.html)不会在组件树中插入任何物理实例`UIComponent`，而是将所有内容作为其父级的子级插入。您无法通过`findComponent()`.

[复合组件](https://stackoverflow.com/tags/composite-component/info)隐式使用`<ui:component>`，因为它基本上引入了一个`NamingContainer`组件，该组件允许在父级中多次重用相同的复合组件，而不会出现由复合的子级导致的重复组件 ID 错误的风险。

# c - 魔术位如何改进 glibc 中的 strlen 函数

> ID：14041750
> 
> 赞同：4
> 
> 时间：2012-12-26T14:08:10.570
> 
> 标签：c, glibc, strlen

我正在浏览[glibc 的 strlen](http://tsunanet.net/~tsuna/strlen.c.html)的来源。他们习惯于`magic bits`查找字符串的长度。有人可以解释它是如何工作的。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T14:54:37.420

假设这个函数正在查看一个字符串——一次 4 个字节，正如注释所解释的（我们假设`long ints`是 4 个字节）——当前的“块”看起来像这样：

```
'\3'     '\3'     '\0'     '\3'
00000011 00000011 00000000 00000011  (as a string: "\x03\x03\x00\x03") 
```

strlen 函数只是在此字符串中查找第一个零字节。它首先通过首先检查此快捷方式来确定每个 4 字节块中是否有*任何*零字节`magic_bits`：它将 4 字节添加到此值：

```
01111110 11111110 11111110 11111111 
```

向该值添加任何非零字节将导致 1 通过传播进位溢出到由零标记的孔中。对于我们的块，它看起来像这样：

```
 11111111 111111          1 1111111   Carries
  00000011 00000011 00000000 00000011  Chunk
  01111110 11111110 11111110 11111111  Magic bits
+ -----------------------------------
  10000010 00000001 11111111 00000010
  ^      ^        ^        ^ 
```

（孔位用`^`'s 标记。）

而且，从评论中：

```
 /* Look at only the hole bits.  If any of the hole bits
          are unchanged, most likely one of the bytes was a
          zero.  */ 
```

如果块中没有零，则所有空位都将设置为`1`'s。但是，由于字节为零，一个空位没有被传播的进位填充，然后我们可以检查它是哪个字节。

本质上，它通过对 4 字节块应用一些位加法来扫描零，然后将搜索范围缩小到单字节比较，从而加快了 strlen 计算。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T14:44:36.047

这个想法是一次将一个字节与零进行比较，而不是一次检查一个`unsigned long`对象，如果其字节之一为零。这意味着在is`8`时检查字节。`sizeof (unsigned long)``8`

使用位黑客，有一个快速已知的表达式可以确定一个字节是否等于零。然后，如果其中一个字节为零，则单独测试对象的字节以找到第一个为零的字节。使用按位运算的优点是减少了分支指令的数量。

用于检查多字节对象的一个​​字节是否等于 0 的 bit hack 表达式在著名的 Stanford Bit Twiddling Hacks 页面中进行了解释，在

> 确定一个单词是否有零字节 [http://graphics.stanford.edu/~seander/bithacks.html#ZeroInWord](http://graphics.stanford.edu/~seander/bithacks.html#ZeroInWord)

# java - 导入导致验证错误？爪哇

> ID：14041751
> 
> 赞同：2
> 
> 时间：2012-12-26T14:08:12.683
> 
> 标签：java, import, verifyerror

我正在做一个项目，我们想重用最近类似项目的代码。但是，这一次，我们希望将代码拆分为三个库，以便在我们将重用此代码的未来项目中更容易使用。

我将像在 Netbeans 中那样描述项目设置。

之前，我有一个 Java Web 应用程序项目，其中包含许多源代码包和一堆库。

现在，我们已将源代码包分发到三个 Java 应用程序项目中。我们需要第四个 Java Web 应用程序项目，我们将这三个项目作为库导入，我们可以测试代码中实现的 RESTful Web 服务。

问题在于，为了在重构后使所有导入工作，我们最终将原始项目中的所有库都包含在所有四个新项目中。我们很确定这是导致`java.lang.VerifyError`我们几天都无法解决的问题。

在将主项目重构为 3 部分后，它们相互包含如下（它们还包括原始项目中使用的每个库）：

```
A (A imports B and C)
|
B (B imports C)
|
C 
```

Web 应用程序项目导入所有内容：三个源代码项目以及主项目中使用的所有库。如果我们不包括它们，当我们尝试测试 RESTful Web 服务时，我们将看不到左侧的资源。

问题是是否有关于如何组织我们的库的任何建议，以便我们停止收到此 VerifyError（如果这是它发生的原因）

```
ERROR MESSAGE: 
Exception in thread "main" java.lang.VerifyError: (class: com/couchbase/client/CouchbaseClient, method: asyncQueryAndReduce signature: (Lcom/couchbase/client/protocol/views/View;Lcom/couchbase/client/protocol/views/Query;)Lcom/couchbase/client/internal/HttpFuture;) Incompatible argument to function 
```

在测试一个创建 couchbase 客户端的简单类时，我收到了该错误消息。当我们测试真正的 Web 服务时，我们会得到相同的错误，堆栈跟踪更大更复杂，但基本上是相同的错误。

```
FULL ERROR WHEN WE RUN THE WEB SERVICE:
java.lang.VerifyError: (class: com/couchbase/client/CouchbaseClient, method: asyncGetView signature: (Ljava/lang/String;Ljava/lang/String;)Lcom/couchbase/client/internal/HttpFuture;) Incompatible argument to function
at models.cache.utils.PoolableCouchbaseClientObjectFactory.makeObject(PoolableCouchbaseClientObjectFactory.java:53)
at models.cache.utils.PoolableCouchbaseClientObjectFactory.makeObject(PoolableCouchbaseClientObjectFactory.java:24)
at org.apache.commons.pool.impl.GenericObjectPool.borrowObject(GenericObjectPool.java:1188)
at models.cache.utils.CouchbaseConnector.connectCache(CouchbaseConnector.java:48)
at models.cache.controllers.SessionCacheHandler.setUserSession(SessionCacheHandler.java:65)
at services.handlers.LoginPOSTHandler.run(LoginPOSTHandler.java:296)
at services.LoginResource.post(LoginResource.java:128)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$ResponseOutInvoker._dispatch(AbstractResourceMethodDispatchProvider.java:168)
at com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:67)
at com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:259)
at com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:83)
at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:133)
at com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:71)
at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:990)
at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:941)
at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:932)
at com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:384)
at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:451)
at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:632)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.netbeans.modules.web.monitor.server.MonitorFilter.doFilter(MonitorFilter.java:393)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:307)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
at java.lang.Thread.run(Thread.java:722) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T14:26:20.840

Java是一种编译语言，所以有两个时刻：

1.  编译步骤，当编译器被告知使用您的导入语句时，构建限定名称以解析您的符号。一旦生成了字节码，它就不包含任何导入语句，因为导入是源代码的东西，它们在运行时永远不存在。在字节码中，每个符号都是完全限定的包名。
2.  运行时验证，当 JVM 验证器负责将方法调用与该方法的定义匹配时。这`VerifyError`是抛出的时候

这意味着有两个不同的代理对加载定义感兴趣：编译器和 JVM。两者都可以从 CLASSPATH 加载类定义，但是在运行时，例如，您的 webapp 类加载器也可以从 WEB-INF/lib 目录加载类。

在开发库时，您可以将档案添加到构建路径（或者您可以使用 Apache Ivy 或 Maven 等依赖项管理工具），但您不应在构建过程的输出中打包依赖项。由用户提供所需的库。

因此，例如您开发 A 并将 B 和 C 项目添加到构建路径中，因此编译器可以解析符号并愉快地编译所有内容，但最终的 JAR 必须只包含项目 A 的类。对于 B 也是如此，显然对于 C。

当你开发你的 web 应用程序时，你的构建路径中会有 A、B、C，但你还应该注意设置一个构建过程，在部署之前复制 WEB-INF/lib 中的所有内容，否则你会遇到运行时缺少库。

正如我之前所说，您可以使用 Maven 组织您的项目，或者您可以使用 Ivy 管理依赖项，或者您可以简单地使用专有的 Netbeans 项目，如果 Netbeans 是您团队中的标准并且您不想采用其他技术。如果您选择 Netbeans 方式，您应该将 Netbeans 项目添加为依赖项（NB，Netbeans**项目**，而不仅仅是 JAR 文件），这样当更新库时，您的 webapp 部署脚本会自动抓取修改并且您不会有冲突的库安装在不同的地方。

# android - Android JNI：如何实现使用我的 Java 对象创建和删除的 C++ 对象？

> ID：14041752
> 
> 赞同：0
> 
> 时间：2012-12-26T14:08:18.237
> 
> 标签：android, object, java-native-interface, creation

我有一个使用 JNI 创建 C++ 渲染器的 WallpaperService.Engine 实现：

引擎 (Java) -> 渲染器 (C++)

如果渲染器是 Java 代码，我可以简单地说明

```
private Renderer renderer = new Renderer(); 
```

确保渲染器是使用我的引擎创建的，并在不再需要时自动销毁。那么最干净的方法是什么？

PS：我在想：

```
int rendererId = createNativeRenderer();
...
draw(rendererId); // call all native renderer methods specifying the object id
...
deleteNativeRenderer(rendererId); 
```

但它不是很优雅，因为它需要显式删除，这很容易忘记。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T18:04:16.950

是的，它不是很优雅，但它是迄今为止最可靠的方式。Java 试图成为每个钉子的锤子，所以有一个叫做*终结*器的东西- 一个在垃圾收集你的实例时调用的 Object 方法。因此，*理想情况下*，它完全符合您的需要，但*实际上*最好避免使用。如果您仔细阅读[相关的 Javadoc](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html#finalize%28%29)，您会发现：

*   您宝贵的渲染器删除代码不会在您或您的代码认为合适时调用，而是在引用计数引擎决定时调用。更糟糕的是，不是在那个特定的时间点，而是在以后的任何时候。
*   你无法知道也无法影响哪个线程将调用终结器。如果代码与 UI 操作相关（我知道您的代码是），那么双管齐下。

不过，您可以使用终结器进行安全检查。

1.  将渲染器生命周期（创建/使用/删除）包装在具有公共删除方法的对象中
2.  在显式删除时，设置一个内部标志
3.  覆盖`finalize()`并检查那里的标志状态。如果未标记为已删除，则记录讨厌的错误

# mysql - MYSQL：优化表排序中的排序依据

> ID：14041753
> 
> 赞同：2
> 
> 时间：2012-12-26T14:08:23.970
> 
> 标签：mysql, join

我正在为我的大学网站开发一个应用程序，我想从数据库中按日期升序提取所有事件。一共有四张表：

表事件1

```
event_id, mediumint(8), Unsigned
date,     date,                   

Index -> Primary Key (event_id)
Index -> (date) 
```

表 events_users

```
event_id, smallint(5),  Unsigned
user_id,  mediumint(8), Unsigned

Index -> PRIMARY (event_id, user_id) 
```

表 user_bm

```
link,    varchar(26)
user_id, mediumint(8)

Index -> PRIMARY (link, user_id) 
```

表 user_eoc

```
link,    varchar(8)
user_id, mediumint(8)

Index -> Primary (link, user_id) 
```

询问：

```
EXPLAIN SELECT * FROM events1 E INNER JOIN event_users EU ON E.event_id = EU.event_id
 RIGHT JOIN user_eoc EOC ON EU.user_id = EOC.user_id
 INNER JOIN user_bm BM ON EOC.user_id = BM.user_id
WHERE E.date >= '2013-01-01' AND E.date <= '2013-01-31'
  AND EOC.link = "E690"
  AND BM.link like "1.1%"
ORDER BY E.date 
```

解释：

上面的查询做了两件事。

1) 通过 user_bm 和 user_eoc 表搜索并过滤掉所有学生。“链接”列是非规范化列，可按专业/年份/校区等快速过滤学生。

2) 应用过滤器后，MYSQL 抓取所有匹配学生的 user_ids 并找到他们正在参加的所有事件并按升序输出。

查询优化器解释：

```
id  select_type     table   type      possible_keys     key     key_len     ref rows    Extra
1   SIMPLE  EOC     ref     PRIMARY     PRIMARY     26  const   47  Using where; Using index; Using temporary; Using f...
1   SIMPLE  BM  ref     PRIMARY,user_id-link    user_id-link    3   test.EOC.user_id    1   Using where; Using index
1   SIMPLE  EU  ref     PRIMARY,user_id     user_id     3   test.EOC.user_id    1   Using index
1   SIMPLE  E   eq_ref  PRIMARY,date-event_id   PRIMARY     3   test.EU.event_id    1   Using where 
```

问题：

查询工作正常，但可以优化。具体来说 - 使用文件排序和使用临时文件是昂贵的，我想避免这种情况。我不确定这是否可行，因为我想按日期对与匹配用户具有 1:n 关系的事件“排序”。Order BY 适用于连接表。

任何帮助或指导将不胜感激。谢谢你，节日快乐！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T15:34:39.703

订购可以通过两种方式完成。按索引或按临时表。您在表 Events1 中按日期排序，但它使用不包含日期的 PRIMARY KEY，因此在这种情况下，需要在临时表中对结果进行排序。

不过，它不一定很贵。如果结果足够小以适合内存，它将不会是磁盘上的临时表，只是在内存中，这并不昂贵。

文件排序也不是。“使用文件排序”并不意味着它会使用任何文件，它只是意味着它不按索引排序。

因此，如果您的查询执行得很快，您应该很高兴。如果结果集很小，它将在内存中排序并且不会创建文件。

# java - apache commons lang3 stringutils taglib

> ID：14041754
> 
> 赞同：5
> 
> 时间：2012-12-26T14:08:31.600
> 
> 标签：java, jakarta-ee, jstl, apache-commons, apache-stringutils

我想在 jstl 标记中使用 StringUtils.abbreviate()，是否有一个标记库位置？

我搜索了公共站点和网络，但找不到示例。是否还有一种常见的方法来查找 taglib 位置，也许是在 javadoc 树的标准位置？

谢谢！网卡

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T22:28:41.600

尼克，

apache util 方法通常没有预定义的标签，但很容易添加您自己的特殊标签定义以指向您想要的方法。例如，将本地 taglib 定义添加到您的 web.xml 文件：

```
<jsp-config> 
    <taglib> 
        <taglib-uri>mytags</taglib-uri> 
        <taglib-location>/WEB-INF/jsp/mytaglib.tld</taglib-location> 
    </taglib> 
</jsp-config> 
```

您的 mytaglib.tld 文件将如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<taglib version="2.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <tlib-version>1.0</tlib-version>
    <function>
        <description>Exposes the abbreviate() function from Apache StringUtils</description>
        <name>abbreviate</name>
        <function-class>org.apache.commons.lang.StringUtils</function-class>
        <function-signature>java.lang.String abbreviate(java.lang.String,
                            int)</function-signature>
    </function>
</taglib> 
```

在您的 JSP 中，您可以使用新的自定义标签：

```
<%@ taglib prefix="mytags" uri="mytags" %>
...
<c:out value="${mytags:abbreviate(myString, 5)"/> 
```

那应该为你做。有关自定义标签的更多信息，您可以在此处阅读：http: [//docs.oracle.com/javaee/5/tutorial/doc/bnalj.html](http://docs.oracle.com/javaee/5/tutorial/doc/bnalj.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T23:22:13.673

我为 commons-lang 2.4 写了一个。

[https://github.com/hussachai/commons-lang-taglibs](https://github.com/hussachai/commons-lang-taglibs)

顺便说一句，您可以将其用作 3.0 的模板。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-07-13T14:25:07.620

I was initially thinking of going with a custom taglib also. Thanks for the post, it gave me this idea. Creating an instance of StringUtils worked just fine on it's own. Even thought the calls are static. I suppose you could wrap it into a two-liner tag if you wanted to.

The example below will output the following: **Now is the t...**

```
<%@ tag import="org.apache.commons.lang3.StringUtils" %>
<jsp:useBean id="StringUtils" class="org.apache.commons.lang3.StringUtils" />
<c:out value="${StringUtils.abbreviate('Now is the time for all good', 8) }" /> 
```

Note that the tag import statement seems to be optional. The above code works for me with or without it.

# html - HTML CSS 格式化：表格行继承内容高度

> ID：14041757
> 
> 赞同：7
> 
> 时间：2012-12-26T14:09:07.723
> 
> 标签：html, css, css-tables, fixed-width

如何格式化表格行以继承内容的高度？我希望有类似的东西 ![在此处输入图像描述](../Images/d05ba256129427bf1aff5a1ac3ea23c4.png)

我努力了

```
table{
   table-layout:fixed;
   width:700px;
 } 
```

但这不起作用

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T14:13:37.550

通常，如果列具有使用总表宽度的百分比或绝对像素“px”定义的定义宽度，则表将继承内容的高度。此外，请确保表格行没有指定高度，即“高度：30px”。

代码解决方案：

```
table {
  width: 700px;
}
table tr td {
  width: 350px;
  height: auto;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T15:30:29.490

行不能从单元格继承，因为元素不能从其后代继承，只能从祖先继承。[但是表格行高的计算会通过表格高度算法](http://www.w3.org/TR/CSS21/tables.html#height-layout)自动考虑单元格高度要求。

这也发生在给出的示例中。使用给定的样式表和最简单的表格标记，除了垂直对齐之外，结果是所要求的。这种对齐是一个单独的问题，很容易用`td { vertical-align: top }`.

如果您的页面不是这样，请提供一个演示问题的示例（HTML 和 CSS 代码）。

# delphi - delphi 只调试我的源代码

> ID：14041759
> 
> 赞同：5
> 
> 时间：2012-12-26T14:09:15.017
> 
> 标签：delphi, delphi-xe2

> **可能重复：**
> [如何阻止调试器进入 Delphi 提供的单元？](https://stackoverflow.com/questions/12074306/how-do-i-stop-the-debugger-from-stepping-into-delphi-supplied-units)

我有以下问题：当我运行应用程序时，调试器进入 delphi 的 VCL 源。我希望它仅通过我编写的代码运行。

例子：

```
temp := nil;
// Here is breakpoint, after that I wanna go line-by-line, so I'm hitting F7
while (Head <> nil) do begin
   if (Head^.Next = nil) then break;
   Temp := Head^.Next;
   dispose(Head); // <- here debugger goes into [*]
end;
if (Temp <> nil) then dispose(Temp); 
```

* * *

```
// [*]
procedure _Dispose(P: Pointer; TypeInfo: Pointer);
{$IFDEF PUREPASCAL}
begin
  _Finalize(P, TypeInfo);
  FreeMem(P);
end;
{$ELSE}
asm
        { ->    EAX     Pointer to object to be disposed        }
        {       EDX     Pointer to type info                    }

{$IFDEF ALIGN_STACK}
        SUB     ESP, 8
{$ENDIF ALIGN_STACK}
        PUSH    EAX
        CALL    _Finalize
        POP     EAX
{$IFDEF ALIGN_STACK}
        SUB     ESP, 4
{$ENDIF ALIGN_STACK}
        CALL    _FreeMem
{$IFDEF ALIGN_STACK}
        ADD     ESP, 12
{$ENDIF ALIGN_STACK}
end;
{$ENDIF !PUREPASCAL} 
```

我读过[这个](https://stackoverflow.com/questions/2768622/is-there-a-way-to-trace-through-only-project-source-in-delphi)，它对我没有帮助。如何排除delphi源，只调试我的代码？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-26T14:20:20.080

查看`Project->Options`菜单项。转到编译器选项，应该有一个显示“使用调试 DCU”的设置。确保它没有被选中，并且您应该停止跟踪标准库源。

# windows-8 - 如何在 WinRt 中共享文本时添加新行

> ID：14041767
> 
> 赞同：4
> 
> 时间：2012-12-26T14:09:55.133
> 
> 标签：windows-8, microsoft-metro, share, email-client, charms-bar

我想在 Windows 8 上使用邮件客户端共享一些文本，我想在其中显示新行。它在使用时在记事本中正确显示，`\r\n`但不适`SetText`用于`DataTransferManager`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T00:33:21.297

关键是在 HTML 中设置文本，而不是将其作为字符串发送。

假设您要共享的文本在`string textToShare;` 注意您将发送 HTML 中的字符串，因此您需要将所有换行符替换为`<br/>`

代替

```
theRequest.Data.SetText(textToShare); 
```

采用

```
theRequest.Data.SetHtmlFormat(HtmlFormatHelper.CreateHtmlFormat(textToShare)); 
```

# sql - 数据库表的交叉连接和左外连接

> ID：14041768
> 
> 赞同：0
> 
> 时间：2012-12-26T14:09:56.980
> 
> 标签：sql, join

我的数据库中有三个表

**员工表**

*   员工 ID **(PK)**
*   姓

**问题表**

*   启德**(PK)**
*   问题

**问卷**

*   QuestionnaireId **(PK)**
*   QId **(FK)**
*   员工 ID **(FK)**
*   回复
*   细节

这是我自己编写的 SQL 查询，但它产生了我不需要的输出

```
 Select q.qid,e.employeeId, q.Question, eq.response 
 from employee e 
 cross join Question q
 left outer join employeequestionnaire eq on q.Qid= eq.Qid
 where e.employeeId = 1 
```

**这是输出**

```
 Qid   EmployeeId        Question       Response 
             "1"       "1"          "Question1"     "0"
             "1"       "1"          "Question1"     "1"
             "2"       "1"          "Question2"     "1"
             "2"       "1"          "Question2"     "0"
             "3"       "1"          "Question3"     "1"
             "4"       "1"          "Question4"     NULL 
```

但我需要这种输出

```
 Qid    EmployeeId       Question       Response  
             "1"       "1"          "Question1"     "0"
             "2"       "1"          "Question2"     "1"
             "3"       "1"          "Question3"     "1"
             "4"       "1"          "Question4"     NULL 
```

我是 SQL 的新手，对不起我的示例查询..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T14:17:35.350

假设`employeequestionnaire`有employeeID 字段，则不需要该`employee`表。我认为你可以这样做：

```
Select q.qid, eq.employeeId, q.Question, eq.response 
from Question q left outer join
     employeequestionnaire eq
     on q.Qid= eq.Qid and
        eq.employeeId = 1 
```

请注意，我将`where`子句移到了`on`子句中。这在使用`left outer join`.

如果您想包含该表中有关员工的信息，您可以使用 not `cross join`：

```
Select q.qid, eq.employeeId, q.Question, eq.response 
from Question q left outer join
     employeequestionnaire eq
     on q.Qid= eq.Qid and
        eq.employeeId = 1 left outer join
     employees e
     on e.EmployeeID = eq.EmployeeID 
```

# html - FileReader 图片上传

> ID：14041774
> 
> 赞同：0
> 
> 时间：2012-12-26T14:10:24.800
> 
> 标签：html, filereader

[jsfiddle.net 代码链接](http://jsfiddle.net/dasmus/sXkhf/embedded/result/)问题是当您选择多个图像文件时，它会将所有图像加载到浏览器，绘制所有 div，但只显示一张图像。它应该给每个 div 自己的图像。

这似乎是麻烦制造者的代码部分：

```
 $('#import').change( function(event){
        namelist = new Array;
        var files = event.target.files;
        for(i=0;i<event.target.files.length; i++){
                pictures = files[i];
                image = new Image();
                image.id = i;
                image.file = pictures;
                var reader = new FileReader();
                reader.onload = function(evt){
                    image.src = evt.target.result;
                }
                namelist.push({sourceimage: image, id:i});
                reader.readAsDataURL(pictures);
            }
            drawDivs();
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T14:29:35.263

```
reader.onload = (function(image){
                        return function(evt){
                            image.src = evt.target.result;
                        };
                    })(image); 
```

关闭固定它

# magento - 我的模块安装程序没有运行并且没有进入资源表

> ID：14041783
> 
> 赞同：3
> 
> 时间：2012-12-26T14:11:21.460
> 
> 标签：magento

我一直在开发一个模块，该模块需要将一些属性添加到 sales_orders 表中。所以我想我会制作一个资源安装脚本并将其添加到 XML 中。对我来说，这不是一件容易的事。老实说，我不能让它工作。我已经搜索了几个小时以获得解决方案，但我还没有找到它。奇怪的是我的模块不在 core_resource 表中......

好吧，这是我的 XML。我对 XML 编辑有点陌生。也许我犯了一个错误。

XML:

```
<config>
        <global>
       <modules>
        <Sendcloud_Magento>
            <version>0.2.0</version>
        </Sendcloud_Magento>
    </modules>
    <helpers>
          <magento>
            <class>Sendcloud_Magento_Helper</class>
        </magento>
        </helpers>
      <models>
        <magento>
               <class>Sendcloud_Magento_Model</class>
            <resourceModel>magento_resource</resourceModel>
        </magento>
          <magento_mysql4>
            <class>Sendcloud_Magento_Model_Mysql4</class>
        </magento_mysql4>
     </models>

    <resources>
<!-- ... -->
<magento_setup>
    <setup>
        <module>Sendcloud_Magento</module>
        <class>Sendcloud_Magento_Model_Resource_Mysql4_Setup</class>
    </setup>
    <connection>
        <use>core_setup</use>
    </connection>
</magento_setup>
<!-- ... -->
</resources>
</global>
 <admin>
    <routers>
        <magento>
            <use>admin</use>
            <args>
                <module>Sendcloud_Magento</module>
                <frontName>sendcloud</frontName>
            </args>
        </magento>
    </routers>
</admin>
<adminhtml>
    <acl>
        <resources>
            <all>
                <title>Allow Everything</title>
            </all>
            <admin>
                <children>
                    <system>
                        <children>
                            <config>
                                <children>
                                    <sendcloud>
                                        <title>Sendcloud</title>
                                    </sendcloud>
                                </children>
                            </config>
                        </children>
                    </system>
                </children>
            </admin>
        </resources>
    </acl>

    <layout>
        <updates>
            <magento>
                <file>magento.xml</file>
            </magento>
        </updates>
    </layout>
    <events>
        <core_block_abstract_prepare_layout_before>
            <observers>
                <magento_core_block_abstract_prepare_layout_before>
                    <class>Sendcloud_Magento_Model_Observer</class>
                    <method>addMassAction</method>
                </magento_core_block_abstract_prepare_layout_before>
            </observers>
        </core_block_abstract_prepare_layout_before>
    </events>
</adminhtml> 
```

我已经在我的模块中放置了一个安装程序脚本。路径 /local/Sendcloud/Magento/sql/magento_setup/mysql4-install-0.2.0.php

```
echo 'Running This Upgrade: '.get_class($this)."\n <br /> \n";
die("Exit for now"); 
```

我有一个在 Sendcloud/Magento/Model/Resource/Mysql4/Setup.php 中制作的模型

```
class Sendcloud_Magento_Model_Resource_Mysql4_Setup extends Mage_Core_Model_Resource_Setup {
} 
```

我希望你们中的一些人能解决我的问题。

最好的问候和新年快乐，

保罗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T19:56:45.517

所以现在你需要将版本从 0.2.0 更新到 0.3.0，试试这个

**app\code\local\Sendcloud\Magento\etc\config.xml**

```
<?xml version="3.0"?>
<config>
    <modules>
        <Sendcloud_Magento>
            <version>0.3.0</version>
        </Sendcloud_Magento>
    </modules>
    <frontend>
        <routers>
            <magento>
                <use>standard</use>
                <args>
                    <module>Sendcloud_Magento</module>
                    <frontName>magento</frontName>
                </args>
            </magento>
        </routers>
    </frontend>
    <global>
        <models>
            <magento>
                <class>Sendcloud_Magento_Model</class>
                <resourceModel>magento_mysql4</resourceModel>
            </magento>
            <magento_mysql4>
                <class>Sendcloud_Magento_Model_Mysql4</class>
                <entities>
                    <magento>
                        <table>magento</table>
                    </magento>
                </entities>
            </magento_mysql4>
        </models>
        <resources>
            <magento_setup>
                <setup>
                    <module>Sendcloud_Magento</module>
                </setup>
                <connection>
                    <use>core_setup</use>
                </connection>
            </magento_setup>
            <magento_write>
                <connection>
                    <use>core_write</use>
                </connection>
            </magento_write>
            <magento_read>
                <connection>
                    <use>core_read</use>
                </connection>
            </magento_read>
        </resources>
    </global>
</config> 
```

**app\code\local\Sendcloud\Magento\Model\Magento.php**

```
class Sendcloud_Magento_Model_Magento extends Mage_Core_Model_Abstract
{
    public function _construct()
    {
        parent::_construct();
        $this->_init('magento/magento');
    }
} 
```

**app\code\local\Sendcloud\Magento\Model\Mysql4\Magento.php**

```
class Sendcloud_Magento_Model_Mysql4_Magento extends Mage_Core_Model_Mysql4_Abstract
{
    public function _construct()
    {    
        // Note that the magento_id refers to the key field in your database table.
        $this->_init('magento/magento', 'magento_id');
    }
} 
```

**app\code\local\Sendcloud\Magento\Model\Mysql4\Magento\Collection.php**

```
class Sendcloud_Magento_Model_Mysql4_Magento_Collection extends Mage_Core_Model_Mysql4_Collection_Abstract
    {
        public function _construct()
        {
            parent::_construct();
            $this->_init('magento/magento');
        }
    } 
```

**app\code\local\Sendcloud\Magento\sql\magento_setup\mysql4-upgrade-0.2.0-0.3.0.php**

```
$installer = $this;

$installer->startSetup();

$installer->addAttribute(
));

$installer->endSetup(); 
```

**app\etc\modules\Sendcloud_Magento.xml**

```
<?xml version="1.0"?>
<config>
    <modules>
        <Sendcloud_Magento>
            <active>true</active>
            <codePool>local</codePool>
        </Sendcloud_Magento>
    </modules>
</config> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T16:41:52.210

Did you activate your model by putting another XML file in app/etc/modules/ ?

# javascript - 使用 python 或 javascript 将 Hershey 字体 .jhf 解析为 json

> ID：14041784
> 
> 赞同：1
> 
> 时间：2012-12-26T14:11:22.287
> 
> 标签：javascript, python, json, parsing, fonts

我一直在网上搜索解决方案，但我发现没有任何东西在我的技能范围内。您将如何使用 python 或 javascript将这些 Hershey 字体 .jhf 文件[emergent.unpythonic.net/software/hershey转换为 JSON。](http://emergent.unpythonic.net/software/hershey)创建类似的东西：

```
[
    {
        asciival:26,
        points:[[5,-5],[4,7,8],[6,8,7]]
    },
    {
        asciival:27,
        points:[[5,-3],[4,7,33],[6,32,7]]
    },
(…)
] 
```

我知道这里有一个[问题，](https://stackoverflow.com/questions/8042840/parsing-the-hershey-font-format)但这还不足以让我理解这个系统。

## 编辑1

我已经找到了[paulbourke.net/dataformats/hershey/sean](http://paulbourke.net/dataformats/hershey/)在评论中指出的描述。

> 例如，考虑第 8 个符号 8 9MWOMOV RUMUV ROQUQ
> 它有 9 个坐标对（这包括左右位置）。
> 左边的位置是'M' - 'R' = -5
> 右边的位置是'W' - 'R' = 5
> 第一个坐标是“OM” = (-3,-5)
> 第二个坐标是“OV” = (-3,4)
> 举笔 "R"
> 移到 "UM" = (3,-5)
> 画到 "UV" = (3,4)
> 举笔 "R"
> 移到 "OQ" = (-3 ,-1)
> 画到“UQ” = (3,-1)
> 在一张纸上画出来会发现它代表一个“H”。>

我试图理解这一点，但价值观从何而来？
例如为什么是 UM (3,-5)？

## 编辑2

我找到[了这个java类](http://www.batbox.org/font.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T22:19:35.613

坐标是连续的字符对。要将它们转换为数字，请从每个字符中减去字符 'R' = 82 的 ascii 等效值。在您的示例中，“UM”转换为（3，-5），因为 U 是 ascii 代码 85。减去 82（='R'）得到 3。M 是 ascii 代码 77，减去 82 得到 -5。

# c# - 当客户端甚至无法连接到 WCF 服务器时，为什么会出现“服务器堆栈跟踪”异常？

> ID：14041786
> 
> 赞同：5
> 
> 时间：2012-12-26T14:11:45.957
> 
> 标签：c#, .net, wcf

在我的代码中，我向`https://`端点发出 WCF 请求。有时，无论出于何种原因，WCF 服务器都无法访问，然后我的代码将产生异常：

```
System.TimeoutException
The request channel timed out while waiting for a reply after 00:01:00.
Increase the timeout value passed to the call to Request or increase
the SendTimeout value on the Binding. The time allotted to this operation
may have been a portion of a longer timeout. 
```

并且`.StackTrace`异常的包含以下文本：

```
Server stack trace: <<<< THE QUESTION IS ABOUT THIS VERY LINE
   at System.ServiceModel.Channels.RequestChannel.Request(Message message, TimeSpan timeout)
   at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan timeout)
   at System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation)
   at System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message)

Exception rethrown at [0]: 
   at System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)
   at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type)
   at [my code here invoking an OperatiionContract-attributed method 
```

这`.InnerException`是另一个`TimeoutException`带有以下消息的消息：

```
The HTTP request to 'https://management.core.windows.net/subscription-id-here/
   services/hostedservices/service-name-here/deployments/deployment-id-here'
has exceeded the allotted timeout of 00:01:00\. The time allotted to this
operation may have been a portion of a longer timeout. 
```

我不明白的是`Server stack trace`措辞。

如果我的请求甚至没有得到服务器的响应，为什么它是“服务器”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-23T22:51:02.677

连接的两端都可能发生超时；客户端或服务器。因此，根据您的例外情况，我会说客户端连接到服务器，但由于没有及时生成响应（基于服务器对 的绑定`sendTimeout`），WCF 响应如您所见。

有关超时设置的更多信息，请参阅[http://msdn.microsoft.com/en-us/library/hh924831(v=vs.110).aspx 。](http://msdn.microsoft.com/en-us/library/hh924831%28v=vs.110%29.aspx)

# iphone - TestFlight Live、QuincyKit 和 Crashlytics 之间的比较

> ID：14041789
> 
> 赞同：29
> 
> 时间：2012-12-26T14:12:13.223
> 
> 标签：iphone, ios, testing, crash-reports, testflight

我将在 AppStore 上启动我的应用程序，我想跟踪崩溃并尽快修复它们。如果可能的话，收集一些关于用户活动和其他有用信息的附加信息会很好。为此，我寻找了一些崩溃报告工具，我发现最有趣的是：[TestFlight Live](https://testflightapp.com/sdk/live/)、[QuincyKit](https://github.com/TheRealKerni/QuincyKit)和[Crashlytics](http://try.crashlytics.com/)。

在这三个中，QuincyKit 应该是最轻的一个，但另外两个似乎很有趣，因为它们提供了更复杂的报告和其他有趣的东西。

我的目标是尽可能多地了解用户可能遇到的任何问题，但同时我不想让应用程序变慢或消耗更多资源。

1.  在您看来并根据您的个人经验，这些工具中哪一个是最好的（考虑到我的目标和需求）？
2.  通过使用 TestFlight Live 或 Crashlytics 我会让我的应用程序太慢吗？
3.  是否存在使设备过载的风险？
4.  QuincyKit 提供的报告是否足够精确？我可以从他们那里检索到多少信息？

谢谢！

**这是我的决定：**

我正在使用 Crashlytics 进行崩溃报告（是的，它似乎真的很棒）和 TestFlight 用于跟踪用户活动（检查点对于了解用户通常做什么并找出趋势非常有用）。我按照[这里写的说明](http://www.grahamdennis.me/blog/2012/10/21/how-to-disable-testflights-crash-handlers/)

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-12-27T17:16:37.403

老实说，我认为 Crashlytics 是比 Testflight 更好的崩溃报告解决方案。

这是您通过 Crashlytics 获得的，而其他人则无法获得的。

*   重复剔除（TF 也这样做，但它不太擅长，Crashlytics 几乎完美无缺）
*   您实际上可以将崩溃标记为已关闭/已解决，并将它们从给定版本的列表中删除。
*   Crashlytics 可以完成 TF 的 Crash 报告所做的所有事情，但更好一些（日志记录、堆栈跟踪等）
*   受影响用户的百分比，以及随之而来的数字。（即：我应该修复发生在一个人身上的错误，还是修复发生在 10k 身上的错误？）Testflight 没有告诉你这一点。
*   基于发生的优先级。这可能是我认为最重要的收获。

这些只是一些，但我认为它们可能对你来说是最重要的。

我们在一个非常受欢迎的应用程序（数百万 D/L）上使用了 Testflight 的崩溃报告近 2 年。它绝对比没有好，如果您也使用 TF 进行分发，它也非常方便，但是您从 Crashlytics 中获得更多好处。今年夏天我们改用 Crashlytics，现在我们实际上能够管理崩溃并就修复的内容和时间做出明智的决定，而不仅仅是筛选一个巨大的永无止境的列表。

我看到您已经接受了答案，但即使您选择继续使用 Testflight，我也会认真地再看一遍。我发现在你的应用程序发布之前很难真正掌握你所缺少的东西，此时更难改变。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-12-31T16:15:05.143

**Crashlytics**在崩溃报告方面是首屈一指的。

我们与您在同一条船上试图找到最佳的崩溃报告解决方案。在对 TestFlight、HockeyApp 和 Crashlytics 进行了一些彻底的调查和测试运行之后，我们最初选择了 HockeyApp，因为它们允许我们在 iOS 和 Android 上进行测试版分发以及崩溃报告（我们希望这两种解决方案都适用于两个平台）。然而，HockeyApp 的异常回溯并没有给我们任何额外的崩溃细节。这就是**Crashlytics 大放异彩**的地方。他们的异常回溯是惊人的。时期。

所以这是我对所有 3 个 SDK 的总结：

崩溃分析器

*   #1 崩溃报告
*   #1 异常回溯，没有例外（提供非常有用的额外崩溃细节）
*   非常快速和轻量级
*   用于附加崩溃上下文的自定义键日志记录
*   最佳重复崩溃识别和剔除
*   自动 SDK 更新（他们的 Mac 应用程序会自动更新您项目中的 Crashlytics iOS SDK）
*   没有测试版分发（我喜欢崩溃报告和测试版分发的一站式解决方案）
*   自动构建服务器支持

试飞

*   有点重，并为您的应用程序包增加了膨胀
*   出色的 beta 分布
*   不支持 Android（至少当我们在 6 个多月前进行测试时）

HockeyApp（HockeyKit - Beta 分发版，QuincyKit - 崩溃报告）

*   轻的
*   崩溃报告 UI 有点混乱
*   异常回溯受到严重限制（至少在我们在 2011 年 3 月测试时）
*   非常好的 beta 分布

综上所述，我们选择 Crashlytics 进行崩溃报告，选择 HockeyApp 进行 beta 分发。但是您必须选择最适合您需求的方法。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-01-04T15:25:35.707

**绝对推荐Crashlytics**。

TestFlight Live 过去曾给我带来过问题。似乎每次我去使用TestFlight，它反正是下来。

Crashlytics 很棒。原因如下：

*   将它添加到您的项目中再简单不过了。有一个 Mac 应用程序可以为您完成大部分繁重的工作。
*   自动更新自己
*   为您优先考虑崩溃
*   提供方便的统计数据，如操作系统和设备百分比以及可用的平均内存等

我在所有应用程序中都使用 Crashlytics。当我在那里时，我将它添加到 Hipstamatic，我们得到的数据令人震惊。它确实有助于改进我们的产品。我还尝试了 TestFlight Live，并在第一个测试版后迅速将其删除，因为*它*会导致崩溃。

Crashlytics 很棒。你应该使用它。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-12-28T11:56:10.940

如果我们只谈论崩溃报告，Crashlytics 比 TestFlight 好得多。（从未尝试过 QuincyKit，所以我无法比较这 3 个选项）

我们在 Weddar 上使用 Crashlytics 已经一年多了，效果非常好。在我不得不说之前尝试过其他解决方案之前，我对他们所说的强大功能有点怀疑，但安装确实在大约 5 分钟内完成，它只为应用程序增加了大约 40-45Kb。

崩溃报告非常详细，可以非常快速地确定错误的解决方案，并且对 sdk 的更新非常稳定。团队也非常支持。我记得我们在 iPhone5 推出时遇到了新的 ARM7s 的问题，他们在大约 30 分钟内解决了这个问题。

我使用 TestFlight 进行用户 beta 测试管理，所以我在夏天尝试了 TestFlight Live SDK，只是想看看它是否是一个将所有内容集成到一个服务中的解决方案，但我们对它的体验非常糟糕。我第一次在 App Store Approval 中拒绝了 2 个更新（Weddar 于 2011 年 4 月推出），我们失去了大约一个月的时间来试图捕捉这个错误。在 LIVE beta 测试时，没有用户会抱怨任何问题，我们通过移除 TF SDK “解决”了它。一直不太明白是什么问题。我们联系了 TestFlight 团队，但从未联系过。（另一个大细节是 TF SDK 为我们的应用增加了大约 800Kb。）

因此，即使我仍然使用 TestFLight 进行 beta 测试，如果您正在寻找一个出色且轻量级的崩溃报告 SDK，我肯定会说您应该使用 Crashlytics。

希望这可以帮助。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-12-26T15:26:04.963

我会说去**TestFlight** (Live)

根据我的经验，TestFlight SDK 不会使您的设备崩溃/减速，并且具有非常通用的崩溃报告 - 允许您相当准确地调试报告的错误。

当您在开发中进行测试时，TestFlight 还兼作反馈包。

它也是一个非常轻量级的 SDK。

更具体地说（在回答您的问题列表时）：

1.  TestFlight 允许您对用户“检查点”进行剥头皮，并拥有自己的 NSLog 版本，允许您在运行时动态记录事件。
2.  由于网络请求是在主线程之外处理的，因此您的应用程序不会变慢。
3.  我不明白为什么使用您提到的任何一个 SDK 都会使设备过载。
4.  QuincyKit 报告似乎相当精确，但是您需要自行决定所需的精度 - 您可以[在此处](https://github.com/TheRealKerni/QuincyKit/wiki)找到 QuincyKit 文档。

# python - 在python中打印变量和字符串

> ID：14041791
> 
> 赞同：66
> 
> 时间：2012-12-26T14:12:14.687
> 
> 标签：python, printing

好吧，我知道如何打印变量和字符串。但是我怎样才能打印像“我的字符串”card.price（它是我的变量）之类的东西。我的意思是，这是我的代码： `print "I have " (and here I would like to print my variable card.price)`.

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-12-26T14:13:03.390

通过打印以逗号分隔的多个值：

```
print "I have", card.price 
```

[print 语句](http://docs.python.org/2/reference/simple_stmts.html#the-print-statement)将输出由空格分隔的每个表达式，后跟换行符。

如果您需要更复杂的格式，请使用以下[`''.format()`方法](http://docs.python.org/2/library/stdtypes.html#str.format)：

```
print "I have: {0.price}".format(card) 
```

或使用较旧和半弃用的[`%`字符串格式化运算符](http://docs.python.org/2/library/stdtypes.html#string-formatting-operations)。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2016-05-27T09:45:38.387

（令人惊讶的是）这里没有提到的东西是简单的连接。

例子：

```
foo = "seven"

print("She lives with " + foo + " small men") 
```

结果：

> 她和七个小男人住在一起

此外，从 Python 3 开始，该`%`方法已被弃用。不要用那个。

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2018-12-25T06:36:10.623

如果您使用的是 python 3.6 和更新版本，那么您可以使用 f-strings 来完成这样的任务。

```
print(f"I have {card.price}") 
```

只需在字符串前面包含 f 并将变量添加到花括号 {} 内。

请参阅博客[The new f-strings in Python 3.6](https://cito.github.io/blog/f-strings/)：由 Christoph Zwerschke 编写，其中包括各种方法的执行时间。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2012-12-26T14:18:07.070

假设您使用 Python 2.7（不是 3）：

`print "I have", card.price`（正如刚才提到的）。

`print "I have %s" % card.price`（使用[字符串格式](http://docs.python.org/2/library/stdtypes.html#string-formatting-operations)）

`print " ".join(map(str, ["I have", card.price]))`（通过加入列表）

实际上，有很多方法可以做到这一点。我更喜欢第二个。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2019-01-28T03:51:01.553

据我所知，打印可以通过多种方式完成

这是我遵循的：

打印带有变量的字符串

```
a = 1
b = "ball"
print("I have", a, b) 
```

与带有函数的打印字符串

```
a = 1
b = "ball"
print("I have" + str(a) + str(b)) 
```

在这种情况下，str() 是一个函数，它接受一个变量并将其分配的内容作为字符串吐出

它们都产生相同的印刷品，但以两种不同的方式。我希望这有帮助

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-04-24T09:55:18.853

如果你安装的 Python 版本是 3.6.1，你可以通过一行代码打印字符串和变量。例如第一个字符串是“I have”，第二个字符串是“US Dollars”，变量`card.pricè等于300，我们可以这样写代码：

```
print("I have", card.price, "US Dollars") 
```

该`print()`函数将字符串输出到屏幕。
逗号可让您在一行代码中连接和打印字符串和变量。

# php - jQuery开始时间结束时间验证

> ID：14041792
> 
> 赞同：-3
> 
> 时间：2012-12-26T14:12:18.523
> 
> 标签：php, javascript, jquery

> **可能重复：**
> [如何使用 JavaScript 中的格式规范将字符串转换为日期时间？](https://stackoverflow.com/questions/476105/how-can-i-convert-string-to-datetime-with-format-specification-in-javascript)

我有下面给出的代码来验证开始时间和结束时间。

它可以在一定程度上起作用，但是当我给出开始时间*上午 9:00*和结束时间*下午 1:00 时*，它不起作用。

```
$("#dateTimeAddButton").click(function () 
{                       
        var Date = $("#myDatePickerId").val();

        var startTime = $("#start-Time").val();
        var endTime = $("#end-Time").val(); 

        if(startTime > endTime)
           alert('end time always greater then start time');

}); 
```

有人帮我解决这个问题。在此先感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T15:36:40.970

修改@Palash 提出的解决方案

```
 var startDate = new Date($('#start-Time').val());
 var endDate = new Date($('#end-Time').val());

 if (startDate.getTime() > endDate.getTime()){
 // Do something 
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T14:17:38.393

您正在比较两个字符串，而不是比较 Date 对象。您需要将它们转换为时间格式。

# android - 如何在集中式警报类中使用不再显示此选项创建警报

> ID：14041795
> 
> 赞同：0
> 
> 时间：2012-12-26T14:12:31.067
> 
> 标签：android, android-dialog

我有一个 Alerts 类，我用这种形式的方法定义我的应用程序的所有警报窗口

```
 public static void Alert1(Context con) {
            AlertDialog.Builder builder = new AlertDialog.Builder(con);
            builder.setTitle("my title");
            builder.setIcon(android.R.drawable.ic_dialog_info);
            DialogListner listner = new DialogListner();
            builder.setMessage("my message");
            builder.setPositiveButton("ok", listner);

            AlertDialog diag = builder.create();
            diag.show();
    } 
```

现在我想以类似的方式创建一个带有复选框***“不再显示此”***的警报窗口，如果选中该复选框，则避免查看此警报

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-05-31T18:16:55.220

我对这个问题有一个清晰和正确的方法

```
package com.example.user.testing;

import android.content.DialogInterface;
import android.content.SharedPreferences;
import android.support.v7.app.AlertDialog;
import android.support.v7.app.AppCompatActivity;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.widget.CheckBox;

public class MainActivity extends AppCompatActivity {
CheckBox dontShowAgain;
public static final String PREFS_NAME = "MyPrefsFile1";

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    final AlertDialog.Builder adb = new AlertDialog.Builder(MainActivity.this);
    LayoutInflater adbInflater = LayoutInflater.from(MainActivity.this);
    View eulaLayout = adbInflater.inflate(R.layout.checkbox, null);

    dontShowAgain = (CheckBox) eulaLayout.findViewById(R.id.skip);
    adb.setView(eulaLayout);
    adb.setTitle("Attention");
    adb.setMessage("Your message here");
    adb.setPositiveButton("Ok", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int which) {

            SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);
            SharedPreferences.Editor editor = settings.edit();
            editor.putBoolean("skipMessage", dontShowAgain.isChecked());
            editor.commit();
            dialog.cancel();
        }
    });

    adb.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int which) {
            dialog.cancel();
        }
    });
    SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);
    Boolean skipMessage = settings.getBoolean("skipMessage", false);
    if (skipMessage.equals(false)) {
        adb.show();
    }

} 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T14:18:47.883

您可以使用应用程序`SharedPreference`对象。通过第一次尝试阅读，在您共享的偏好中添加一个项目。您所要做的就是为对象设置一个值，然后每次都检查它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T14:27:16.317

正如其他人所建议的那样，您应该使用所需的消息和控件（复选框）创建自定义布局，并使用它`SharedPreferences`来跟踪用户选择

这里有 2 篇描述这些主题的博客文章。[从 SharedPreferences 编写和读取](http://androidresearch.wordpress.com/2012/03/31/writing-and-reading-from-sharedpreferences/)
[Android 中创建和显示自定义对话框](http://androidresearch.wordpress.com/2012/04/16/creating-and-displaying-a-custom-dialog-in-android/) （免责声明：我的博客。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T14:18:12.470

您可以使用此复选框和 textview 为您的对话框创建单独的布局。膨胀此布局并添加将其设置为对话框的视图

那么它会像下面这样。

```
View view = layoutInflator.inflate(R.layout.dialogView,null);
//and set to your dialog
dialog.setView(view);

//Or you can set it to your builder also 
```

并为复选框处理 onCheckListener

# php - PHP环境中的Web服务代理生成器

> ID：14041796
> 
> 赞同：5
> 
> 时间：2012-12-26T14:12:44.187
> 
> 标签：php, web-services, visual-studio, webservice-client, phpstorm

在 Visual Studio 中，当我们想要使用 Web 服务时，我们只需添加**Service Reference**，然后只需将 Web 服务地址复制并粘贴到地址字段并单击 Go ！

![在此处输入图像描述](../Images/d161720874e88f2aa67371e3be8ea056.png)

在 Visual Studio IDE（或 svcutil.exe ）的帮助下，我们可以简单地将生成的代理类用于 Web 服务。

就像是：

```
TopUpServiceClient client = new TopUpServiceClient();

TopUpRequest request = new TopUpRequest();
request.MerchantId = 100;
request.ReferenceId = 1001;
request.ServiceType = ServiceType.Prepaid;

TopUpResponse response = client.TopUp(request); 
```

我们有一个客户想要将我们的服务与 php 一起使用，但是他在创建和使用 Soap 对象以及解析 WSDL 和数据协定对象方面遇到了很多问题。

我已经测试了他的 php 脚本并用 fiddler 进行了调试，传递给我们系统的信封是完全不正确的。（他使用 SoapClient 和 NuSoap 没有运气！）

顺便说一句， **我的问题是：** 有没有像我们在**PHP** World 中的 Visual Studio 中所拥有的那样的 Web 服务代理生成器？任何IDE？PhpStorm、NetBeans、Eclips？或者任何可以帮助我们的工具？

我想给他发一些我们生成的代理环境之类的东西，他可以轻松使用它！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T12:27:27.167

最后我找到了。一个简单、小巧、有用的肥皂代理生成器。

由“Przemek Berezowski”开发的“Soap Proxy”

你可以从[这里](http://www.phpclasses.org/package/6781-PHP-Generate-code-to-access-SOAP-services-from-an-WSDL.html)下载。

还有一些其他的工具和脚本，但是这个小东西对我有很大帮助！

# c++ - C++ Direct2D 径向渐变画笔

> ID：14041802
> 
> 赞同：0
> 
> 时间：2012-12-26T14:13:12.677
> 
> 标签：c++, direct2d, brushes

您好，我正在使用 Direct2D，我正在使用径向渐变画笔，但我被困在一个地方。

我的径向渐变笔刷代码

结构样本窗口：桌面窗口

```
{
    //FOr Radial Gradient Brush

    ComPtr<ID2D1RadialGradientBrush> radialBrush;

    void CrateDeviceResources()
    {
        D2D1_GRADIENT_STOP stops[] =
        {
            {0.0f, COLOR_WHITE},
            {1.0f, COLOR_BLUE}
        };

        ComPtr<ID2D1GradientStopCollection> collection;
        m_target->CreateGradientStopCollection(stops, _countof(stops),collection.ReleaseAndGetAddressOf());

        D2D1_RADIAL_GRADIENT_BRUSH_PROPERTIES props = {};
        m_target->CreateRadialGradientBrush(props,collection.Get(),radialBrush.ReleaseAndGetAddressOf());
    }

    void Draw()
    {
        auto size = m_target->GetSize();
        radialBrush -> SetCenter(Point2F(size.width / 2.0f, size.height / 2.0f));
        radialBrush -> SetRadiusX(size.width / 2.0f);
        radialBrush -> SetRadiusY(size.height / 2.0f);

        auto rect = RectF(0.0f, 0.0f, size.width, size.height);
        m_target -> FillRectangle(rect,radialBrush.Get());
    }

    void MouseMoved(int x, int y, WPARAM)
    {
        auto centere = radialBrush->GetCenter();
        radialBrush->SetGradientOriginOffset(Point2F(x - centere.x, y - centere.y));
        Invalidate();
    }
} 
```

当我使用这条线时，在功能鼠标移动中

```
auto centere = radialBrush->GetCenter(); 
```

我的程序坏了它告诉我

```
Access violation Exception 
```

DesktopWindow 类代码为：

```
BEGIN_MSG_MAP()
        MESSAGE_HANDLER(WM_PAINT, PaintHandler)
        MESSAGE_HANDLER(WM_DESTROY, DestroyHandler)
        MESSAGE_HANDLER(WM_SIZE, SizeHandler)
        MESSAGE_HANDLER(WM_DISPLAYCHANGE, DisplayChangeHandler)
        MESSAGE_HANDLER(WM_MOUSEMOVE, MouseMovedHandler)
    END_MSG_MAP()

LRESULT MouseMovedHandler(UINT, WPARAM wParam, LPARAM lParam,BOOL &)
    {
        MouseMoved(GET_X_LPARAM(lParam), GET_Y_LPARAM(lParam),wParam);
        return 0;
    }

     virtual void MouseMoved(int x, int y, WPARAM)
     {

     } 
```

我将 MouseMoved 函数设为虚拟，以便我可以在其他类中覆盖此函数。我无法理解我在哪里做错了请纠正我我应该在哪里更正我的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T15:16:55.443

这个问题的答案是鼠标移动功能在渲染目标初始化之前出现所以为了避免这种失败使用这个方法

```
LRESULT MouseMovedHandler(UINT, WPARAM wParam, LPARAM lParam,BOOL &)
    {
        if (m_target)
        {
            MouseMoved(GET_X_LPARAM(lParam), GET_Y_LPARAM(lParam),wParam);
        }
        return 0;
    } 
```

现在代码将运行良好

# c# - Wcf 将错误跟踪到 Windows 服务

> ID：14041812
> 
> 赞同：3
> 
> 时间：2012-12-26T14:14:33.130
> 
> 标签：c#, wcf, exception, windows-services

我有一个在 Windows 服务上运行的 WCF 服务。我希望 wcf 服务中引发的任何异常都会到达 Windows 服务，以便我可以将其写入事件日志。

我已经创建了一个实现 IErrorHandler 和 IServiceBehavior 的 ErrorHandler 类。以及一个实现 BehaviorExtensionElement 的 ErrorHandlerElement。

如何将侦听器添加到服务并在 Windows 服务中接收？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T04:51:06.303

你真的需要异常来访问 Windows 服务来记录它吗？通常，您希望 WCF 中的全局错误处理程序 IErrorHandler 处理异常以避免主机重新启动。

过去，我使用 EnterpriseLibrary 异常处理和日志框架 ( [EntLib5](http://entlib.codeplex.com/) ) 来捕获和记录异常。通过使用事件日志跟踪侦听器（默认），您可以在 IErrorHandler 中记录异常，并且该异常不需要传播到 WCF 之外。

# perl - perl中如何对hash进行排序

> ID：14041814
> 
> 赞同：-4
> 
> 时间：2012-12-26T14:14:44.840
> 
> 标签：perl, hash

我需要使用 perl 对哈希进行排序。

我的哈希是：

```
2 nameA
5 nameB
4 nameC
2 nameD
3 nameE 
```

结果应该是：

```
2 nameA
2 nameD
3 nameE
4 nameC
5 nameB 
```

那怎么办？

谢谢，

巫女

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T14:27:29.117

对键进行排序并将它们存储在数组中。数组将保留顺序。我在这里使用了数字排序，因为您的键是数字的。

```
my @sorted_keys = sort { $a <=> $b } keys %hash; 
```

现在您可以根据需要访问它们：

```
print "$_ $hash{$_}\n" for @sorted_keys; 
```

但是，您不能将排序结果存储在散列中，因为散列没有排序。而且你不能有一个散列，其中键`2`出现两个不同的值。这是设计上不可能的。

例如，如果您在文件中有该数据，则可以进行[Schwartzian transform](http://en.wikipedia.org/wiki/Schwartzian_transform)。（从下往上阅读评论，这将是有道理的）：

```
open my $fh, "<", $filename or die $!;
my @sorted = map $_->[2],                   # Then map them back into the third
             sort {                     
                 $a->[0] <=> $b->[0] ||     # Sort them numerically on first
                 $a->[1] cmp $b->[1]        # ..or alphabetically on second col
             } map [ split, $_ ],           # Map them into a 3-element array ref
                 <$fh>;                     # Take all the lines in the file 
```

当无法区分两个值时，排序中的链接语句将生效，例如“2”和“2”从`<=>`运算符返回0。在这种情况下，排序将改为按字母顺序在第二列上进行，我们将其存储在数组元素 1 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T14:25:20.960

```
foreach (sort keys %hash) {
  print "$_ : $hash{$_} \n";
} 
```

# r - 为 R 版本 2.13.0 加载 VennDiagram 包的问题

> ID：14041816
> 
> 赞同：0
> 
> 时间：2012-12-26T14:15:03.897
> 
> 标签：r, plot, venn-diagram

我想使用**VennDiagram**包来关联三个不同的变量。但在 R（版本 2.13.0）中，该包不可用。我尝试从 CRAN 安装它并生成此警告：

```
Installing package(s) into ‘/Library/Frameworks/R.framework/Versions/2.13/Resources/library’
(as ‘lib’ is unspecified)
Warning in install.packages :
package ‘VennDiagram’ is not available (for R version 2.13.0) 
```

另外，我尝试使用 venneuler，但在这种情况下，我没有显示不同区域的标签，结果如下：

![三种不同物种之间共享的不同 ncRNA 的维恩图](../Images/3d1516e1f50bbe3dea15345ceac3adac.png)

一些建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T14:37:30.860

VennDiagram 的 CRAN 页面显示该软件包至少需要 R 2.14 才能工作。我能想到的解决方案有以下三种：

*   更新 R，R 2.13 是旧的。
*   下载 VennDiagram 的源代码并编辑DESCRIPTION 文件。将 R 2.14 的要求替换为低于您现有版本的 R 版本，并从源代码安装包（命令行中的 R CMD INSTALL）。这仅在包不使用仅在 R 2.14 及更高版本中可用的任何功能时才有效。
*   转到 CRAN 上的软件包存档并下载与 R 2.13 兼容的软件包版本（感谢 Dirk）。

# django - Django 可重用查询集

> ID：14041819
> 
> 赞同：5
> 
> 时间：2012-12-26T14:15:20.377
> 
> 标签：django, model, django-queryset

我在如下视图中有一个 QuerySet。我希望能够在其他视图中使用相同的查询，但我不想复制和粘贴代码。这也感觉我会违反 DRY 原则。

如果我想在以后修改查询，我将不得不在我的所有视图中更改它，这显然不理想。在我的模型中是否有我应该创建的类或方法可以让我从许多不同的视图中调用它？有没有这方面的最佳实践？

`tasks = Task.objects.filter(user = request.user).order_by('-created_at', 'is_complete')`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T14:21:33.670

解决方案之一是在模型上创建一个类方法或扩展模型的管理器。

`from django.db import models`

1.  添加类方法

    ```
    class MyModel(models.Model):
        @classmethod
        def get_user_tasks(cls, user):
            return cls.objects.filter(...).order_by(...) 
    ```

2.  压倒一切的经理

    ```
    class MyModelManager(models.Manager):
        def get_user_tasks(self, user):
            return self.filter(...).order_by(...)

    class MyModel(models.Model):
        objects = MyModelManager()

    # and in the view...
    queryset = MyModel.objects.get_user_tasks(request.user) 
    ```

# sql - 将数字转换为阿拉伯语中的单词

> ID：14041820
> 
> 赞同：1
> 
> 时间：2012-12-26T14:15:28.587
> 
> 标签：sql, sql-server

> **可能重复：**
> [递归函数..不会再次工作 SQL](https://stackoverflow.com/questions/14040702/recursive-function-wont-work-again-sql)

我创建了一个包含 0 到 99 之间数字的表格；对于这两个数字之间的数字，查询正在工作，并且它也适用于这些数字：100、200、1000、2000、1100、2100、1000000。通常它适用于数字> 100并且不包含数字从我已经创建的表中......对于所有其他数字，我得到“空”。我认为问题出在变量 @Units 中，但我不能再专注于此了。

```
CREATE FUNCTION dbo.fnIntegerToWords(@Nb as BIGINT) 
RETURNS NVARCHAR(1024)
AS
BEGIN
DECLARE @Millions as int
DECLARE @Remainder as int
DECLARE @Thousands as bigint
DECLARE @Hundreds as int
DECLARE @Units as int
DECLARE @word as nvarchar (1024)
DECLARE @result as nvarchar(1024)

set @Millions = @Nb/1000000
set @Units = @Nb %1000000
IF @Millions > 0
BEGIN
    if @Millions = 1
        set @result = N' مليون'

    if @Units > 0 
    begin
        set @Thousands = @Units / 1000
        set @Units = @Units % 1000

        if @Thousands > 0
        begin
            if @Thousands = 1
                set @result = @result + N' و' + N'ألف'
            else
            if @Thousands = 2
                set @result = @result + N' و' + N'ألفان'
            else
            if @Thousands between 100 and 199
            BEGIN
                set @Hundreds = @Thousands / 100
                set @Remainder = @Thousands % 100
                if @Remainder = 0
                begin
            set @result = @result + N' مائة ألف'
                    set @Thousands = 0
                end
                else
                if @Remainder > 0
                begin
                    set @result = @result + N' و' +  N'مائة'
                    if @Remainder > 0 
                        set @result = @result + N' و' + dbo.fnIntegerToWords(@Remainder) + N' ألف'
                end
            END
            else
            if @Thousands between 200 and 299
            BEGIN
                set @Hundreds = @Thousands / 100
                set @Remainder = @Thousands % 100
                if @Remainder = 0
                begin
                    set @result = @result + N' و' + N' مئتان ألف'
                    set @Thousands = 0
                end
                else
                if @Remainder > 0
                begin
                    set @result = @result + N' و' + N' مئتان'
                    if @Remainder > 0 
                        set @result = @result + N' و' + dbo.fnIntegerToWords(@Remainder) + N' ألف'
                end
            END
            else
            if @Thousands > 299
            BEGIN
                set @Hundreds = @Thousands / 100
                set @Remainder = @Thousands % 100
                if @Remainder = 0
                begin
                    set @result = @result + N' و' + dbo.fnIntegerToWords(@Hundreds) + N' مائة ألف'

                end
                else
                begin
                    set @result = @result + N' و' + dbo.fnIntegerToWords(@Hundreds) +  N' مائة' 

                    if @Remainder > 0
                        set @result = @result + N' و' + dbo.fnIntegerToWords(@Remainder)+ N' ألف'

                end     
            END 
            else
            if @Thousands between 3 and 99
                set @result = @result + N' و' + dbo.fnIntegerToWords(@Thousands) + N' ألف'

        END 
        if @Units > 0
        Begin
            set @Hundreds = @Units / 100
            set @Units = @Units % 100
            if @Hundreds > 0 
            BEGIN
                if @Hundreds = 1
                    set @result = @result + N' و' + N' مائة'
                else
                if @Hundreds = 2
                    set @result = @result + N' و' + N' مئتان'
                else
                    set @result = @result + N' و' + dbo.fnIntegerToWords(@Hundreds) + N' مائة'
            END
            if @Units > 0 
                set @result = @result + N' و' + dbo.fnIntegerToWords(@Units)                            
        End

    end
END
ELSE
IF @Millions = 0 
BEGIN
    set @Thousands = @Units /1000
    set @Units = @Units %1000

    IF @Thousands > 0
    BEGIN
        if @Thousands = 1
            set @result = N' ألف'
        else
        if @Thousands = 2
            set @result = N' ألفان'
        else
        if @Thousands between 100 and 199
        BEGIN
            set @Hundreds = @Thousands / 100
            set @Remainder = @Thousands % 100
            if @Remainder = 0
                set @result = N' مائة ألف'
            else
            if @Remainder > 0
            begin
                set @result = N' مائة'
                if @Remainder > 0 
                    set @result = @result + N' و' + dbo.fnIntegerToWords(@Remainder) + N' ألف'
            end
        END
        else
        if @Thousands between 200 and 299
        BEGIN
            set @Hundreds = @Thousands / 100
            set @Remainder = @Thousands % 100
            if @Remainder = 0
            begin
                set @result = N' مئتان ألف'
            end
            else
            if @Remainder > 0
            begin
                set @result = N' مئتان'
                if @Remainder > 0 
                    set @result = @result + N' و' + dbo.fnIntegerToWords(@Remainder) + N' ألف'
            end
        END
        else

        if @Thousands > 299
            BEGIN
                set @Hundreds = @Thousands / 100
                set @Remainder = @Thousands % 100
                if @Remainder = 0
                begin
                    set @result = dbo.fnIntegerToWords(@Hundreds) + N' مائة ألف'
                end
                else
                begin
                    set @result = dbo.fnIntegerToWords(@Hundreds) + N'         مائة'         
                    if @Remainder > 0
                        set @result = @result + N' و' + dbo.fnIntegerToWords(@Remainder) + N' ألف'

                end
            END 
        else
            set @result = dbo.fnIntegerToWords(@Thousands) + N' ألف' 
        if @Units <> 0 
        BEGIN
            set @Hundreds = @Units / 100

            set @Units = @Units % 100
            if @Hundreds > 0
            BEGIN
                if @Hundreds = 1
                    set @result = @result + N' و' + N' مائة'
                else
                if @Hundreds = 2
                    set @result = @result + N' و' + N' مئتان'
                else
                    set @result = @result + N' و' +  dbo.fnIntegerToWords(@Hundreds) + N' مائة'
            END
            if @Units > 0 
                set @result = @result + N' و' +  dbo.fnIntegerToWords(@Units)
        END
    END
END

ELSE

IF @Thousands = 0
BEGIN
    set @Hundreds = @Units / 100
    set @Units = @Units % 100
    if @Hundreds > 0 
    BEGIN
        if @Hundreds = 1
            set @result = N' مائة'
        else
        if @Hundreds = 2
            set @result = N' مئتان'
        else
            set @result = dbo.fnIntegerToWords(@Hundreds) + N' مائة'

        if @Units > 0 
            set @result = @result + N' و' + dbo.fnIntegerToWords(@Units)
    END
else
    set @result = (select COALESCE(word,'') from number where @Units=number)
END

RETURN @result
END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T14:48:13.160

问题可能是您正在附加到`result`，而没有对其进行初始化。NULL 字符串不是空字符串（在大多数数据库中）。

尝试将声明更改为：

```
DECLARE @result as nvarchar(1024) = '' 
```

或者，如果您使用的是旧版本的 SQL Server：

```
DECLARE @result as nvarchar(1024);
SET @result = = '' 
```

# html - 为标签和文本字段设计一个具有预定义宽度的漂亮表单

> ID：14041823
> 
> 赞同：1
> 
> 时间：2012-12-26T14:15:43.047
> 
> 标签：html, css

我想为我的网页设计一个漂亮的表单，我想像这样。![在此处输入图像描述](../Images/13468d38f7b666d1d6421108aeb577ba.png)

* * *

基本上，我希望描述输入字段以及输入字段的文本具有一些预定义的宽度。我没有为我的表单使用表格布局，而是使用*标签作为*方法。

发生的事情是这样的

![在此处输入图像描述](../Images/1f3326b1ff78987a2526c06d8381c6e3.png)

* * *

我可以像我一样设置文本字段的大小。我不知道如何处理为文本或标签设置宽度。html 是这样的：

```
<form class="myform" method="POST" action="./php/prescribe.php">
        <label for="fname">First Name :</label>
        <input type="password" name="fname" size="35"><br>

        <label for="fname">Give your email address :</label>
        <input type="password" name="lname" size="35"><br>

        <label for="fname">First Name :</label>
        <input type="password" name="fname" size="35"><br>

        <label for="fname">First Name :</label>
        <input type="password" name="fname" size="35"><br>
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T14:21:10.517

使用 CSS。此外，您可能希望在每一行周围使用一个包装器。这是一个快速而肮脏的例子。

CSS：

```
.form-row{}
.form-row-alt {} /* add alternating color here */
.form-row label, .form-row-alt label { display: inline-block; width: 150px; } 
```

HTML：

```
<div class="form-row">
    <label>First Name:</label>
    <input type="text" name="username" />
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T14:18:44.387

您可以浮动标签：

```
.myform label {
  float: left;
  clear: both;
  width: 12em; /* or whatever */
} 
```

浮动可能有点烦人，因为旧的 IE 版本有时会做一些愚蠢的事情。

或者你可以使用`display: inline-block`，我更喜欢：

```
.myform label {
  display: inline-block;
  width: 12em; /* or whatever */
} 
```

有了这个，您需要`<br>`在输入之间添加元素，有些人可能会认为这很不愉快。

另一种选择是`<dl>`对整个事情使用一个块，尽管这并没有改变基本问题。

# unicode - Antlr 生成的词法分析器挂在“补充平面”的 unicode 字符上（antlr 3.4）

> ID：14041826
> 
> 赞同：0
> 
> 时间：2012-12-26T14:16:13.210
> 
> 标签：unicode, antlr, astral-plane

我正在使用 antlr Grammar 和[antlr Ruby Target](https://github.com/ohboyohboyohboy/antlr3)解析 PHP 代码。我必须解析的源文件之一实际上包含翻译，其中一些大量使用 Unicode 字符。语法似乎挂在“补充平面”的一个字符上，即[U+10430](http://www.fileformat.info/info/unicode/char/10430/index.htm)。

过去我也遇到过类似的问题，因为 Ruby antlr 目标很老，而且不兼容 unicode（嗯，当时 Ruby 不兼容）。我们不得不将 RubyTarget.java getMaxCharValue 从 0xFF (ascii) 提高到 0xFFFF (unicode) 来解决它。现在看来，即使是这一套也不够。Unicode 声明此范围之外的字符可以使用两个 UTF-16 字符表示，但 antlr 如何管理呢？再次碰撞 getMaxCharValue 会有所帮助吗（它曾经做过一次，但我不喜欢“尝试”方法）？

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T15:27:20.123

ANTLR 的参考 Java 目标只能通过在语法中使用 UTF-16 代理对并对输入流使用 UTF-16 编码来解析补充平面中的字符。其他目标是由社区成员创建的，可能或（如您所见的 Ruby 目标）可能不支持相同范围的字符。

由于无法在语法本身中表示超过 0xFFFE 的任何内容，因此即使您修改目标以支持高于 0xFF 的字符，您也将被限制为 UTF-16 编码。

# c++ - 如何在 C 中使用模块编译应用程序？

> ID：14041831
> 
> 赞同：4
> 
> 时间：2012-12-26T14:16:57.163
> 
> 标签：c++, c

我想做应用程序，它可以用外部模块编译，例如在 php.ini 中。在php中，你可以在运行时加载模块，或者将php与模块一起编译，这样模块就可以在运行时不加载。但我不明白如何做到这一点。如果我在 module.c 中有一个模块并且有一个名为 say_hello 的函数，如果你明白我的意思，我如何将它注册到主应用程序？

```
/* module.c */
#include <stdio.h>

// here register say_hello function, but how, if i can't in global scope
// call another function?

void say_hello() 
{
  printf("hello!");
} 
```

如果我将所有这些文件（主应用程序 + 模块）编译在一起，则不会从主应用程序中引用 say_hello 函数，因为只有当用户在其代码中调用它时才会调用它。所以我怎么能对我的应用说，嘿，有 say_hello 函数，如果有人想调用它，你知道它存在。

EDIT1：我需要在运行时有类似表的东西，在那里我可以看到用户调用的函数是否存在（有 C equivavent）。头文件对我没有帮助。

EDIT2：我的应用程序是为我的脚本语言解释的。

EDIT3：如果有人在php中调用函数，php解释必须知道该函数存在。我知道动态链接，如果加载了 .so 或 .dll，则调用一些启动例程，您可以在该 dll 中简单地注册函数，因此 php 解释可以看到，如果某些模块注册了例如名为“say_hello”的函数。但是，如果我想用例如 gd 支持编译 php，那么如何将 gd 函数注册到一些 php 函数列表、哈希表或其他什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T14:27:40.703

我猜您正在寻找的是动态库（我们通常将运行时可加载模块称为 C 和 OS 世界中的动态/共享库）。[以Pidgin](http://www.pidgin.im/)为例，它支持插件来扩展其功能。它为它的插件制造商提供了一个特定的接口来遵守，比如注册、加载、卸载和使用的功能，插件必须遵循这些功能。

当程序加载时，它会在其`plugins`目录中查找此类动态库，如果存在，它将加载并使用它，否则它将跳过公开功能。需要接口的原因是因为不同的模块可以具有不同的功能，这些功能在运行时之前是未知的，所以一个应用程序。必须有一个共同的，商定的方式来“交谈”它的插件/模块。

每个 C 程序都可以链接到静态或动态库；static 会将代码从库中复制到所述程序中，这样就不会留下程序运行的依赖关系，而链接到动态库则希望动态库在程序启动时存在。第三种方法是不链接到 DLL，而只是要求操作系统执行库的加载操作。如果成功，则使用动态模块，否则忽略。只有当加载调用成功时，动态库应该执行的功能才会向用户公开。

需要注意的是，这是操作系统提供的功能，与使用的语言无关（C 或 C++ 或 Python 在这里无关紧要）；就 C 而言，编译器仍然链接到已知代码，即在编译时可用的代码。这就是不同操作系统的原因，需要编写不同的代码来加载一个动态模块。更重要的是，syuch 库的文件类型/格式因系统而异。在 Linux 中称为共享对象 (.so)，在 Mac 中称为动态库 (.dylib)，在 Windows 中称为动态链接库 (.dll)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T14:41:14.680

你需要的是**动态库**。我们首先看一下[dlopen(3) 的 Linux 手册页中](http://linux.die.net/man/3/dlopen)提供的示例：

```
/* Load the math library, and print the cosine of 2.0: */
#include <stdio.h>
#include <stdlib.h>
#include <dlfcn.h>

int main(int argc, char **argv) {
    void *handle;
    double (*cosine)(double);
    char *error;

    handle = dlopen("libm.so", RTLD_LAZY);
    if (!handle) {
        fprintf(stderr, "%s\n", dlerror());
        exit(EXIT_FAILURE);
    }

    dlerror();    /* Clear any existing error */

    /* Writing: cosine = (double (*)(double)) dlsym(handle, "cos");
       would seem more natural, but the C99 standard leaves
       casting from "void *" to a function pointer undefined.
       The assignment used below is a workaround. */

    *(void **) (&cosine) = dlsym(handle, "cos");

    if ((error = dlerror()) != NULL)  {
        fprintf(stderr, "%s\n", error);
        exit(EXIT_FAILURE);
    }

    printf("%f\n", (*cosine)(2.0));
    dlclose(handle);
    exit(EXIT_SUCCESS);
} 
```

还有一个[C++ dlopen mini HOWTO](http://www.isotton.com/devel/docs/C++-dlopen-mini-HOWTO/C++-dlopen-mini-HOWTO.html)。

有关动态加载的更多一般信息，请首先从[维基百科页面](http://en.wikipedia.org/wiki/Dynamic_loading)开始。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T14:20:40.513

C 不是解释语言。所以你需要链接，你可能需要静态链接或动态链接。

程序构建包括两个主要阶段：编译和链接。在编译期间，所有 c 文件都被翻译成机器代码，而调用的函数（`obj`或`o`文件）则未被解析。然后链接器将所有这些文件合并到一个可执行文件中，解决未解决的问题。

这是静态链接。链接模块成为可执行文件的组成部分。

动态链接是特定于平台的。在 Windows 下，这些是 DLL。您应该发出系统调用来加载 DLL，之后您将能够从中调用函数。

* * *

## 回答 #4

> 赞同：-5
> 
> 时间：2012-12-26T14:22:21.610

如果我明白你的意思，我认为这是不可能的。因为它是编译语言。

# ruby-on-rails - 哪个 MVC 层应该处理声称玩具的孩子？

> ID：14041833
> 
> 赞同：2
> 
> 时间：2012-12-26T14:17:03.697
> 
> 标签：ruby-on-rails, model-view-controller, associations

我的应用程序中有两个模型：一个`child`that`has_many :toys`和一个`toy`that `belongs_to :child`。我进行了为此工作所需的数据库迁移（添加`child_id`到`toys`表中）。

起初，孩子独立存在，玩具独立存在（没有关联）。在幼儿园的每一天开始时，没有孩子拥有任何玩具。要玩玩具，孩子必须先认领它，然后成为它的主人。所以，现在我需要以某种方式实现一个`child.claim(toy)`方法，在这里我卡住了。具体来说：

1.  这应该进入`child`控制器或模型吗？或者也许它应该以某种方式在两者之间分开？
2.  如果它应该进入控制器，它应该对应于 CRUD 操作之一还是它自己的东西`def claim(toy)`？

**编辑1：**孩子是用户并通过浏览器登录。（今天的孩子可以做一些了不起的事情）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T14:36:28.263

我会建立一个单独的类来处理关于孩子和玩具的所有逻辑。称之为上下文，称之为关注，但要去做。

```
class ToyChild # or ToyInteraction or ChildContext::Toys...

  attr_reader :toy, :child

  def initialize(toy, chid)
    @toy   = toy
    @child = child
  end

  def associate
    toy.child = child
    # could be more difficult: you should check if the child has not enough toys, if the toy is not already assigned to another child etc...
    #I'd avoid saving here since you may want to perform other operations
  end

  def foo
    #code here
  end

end 
```

在控制器中：

```
assoc = ToyChild.new(toy, child).associate
assoc.save 
```

这种编码风格：

*   更容易测试

*   职责分工明确

*   保持干燥（控制器中没有特定代码）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T14:38:43.310

实际上，如果孩子是用户，则不需要声明方法。您可以`claim_toy`在控制器中有一个方法。在每个玩具的玩具索引视图中，您可以提供如下链接。

```
<%= link_to "claim", claim_toy_path(:toy_id => toy.id) %> 
```

你的控制器方法看起来像这样。

```
def claim_toy
  toy = Toy.find(params[:toy_id])
  current_child.toys << toy
end 
```

很简单。顺便说一句，这不是一个安宁的解决方案。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-26T14:46:08.243

### 孩子是玩具的外键

当然还有其他方法可以做到这一点，但根据您最初的问题，最简单的解决方案是使您的行为与儿童与玩具表中的玩具相关联的事实一致。

### 最简单的解决方案

撇开关于在完美的 OOP/MVC 设计中应该做什么的争论不谈，做出改变的明智的地方是在控制器中，因为当孩子要求玩具时，要求由 #update（甚至可能是 #索赔）对玩具控制器的操作。

> 孩子是用户并通过浏览器登录。

在您的情况下，会话已经知道孩子是谁，因此将外键添加到 Toy 模型是微不足道的。控制器是接收关联模型参数的实体，因此它是告诉玩具模型为给定玩具更新哪些属性的正确位置。

当然还有更复杂的解决方案，但根据您原始帖子中提供的信息，它们的价值值得怀疑。与往常一样，您的里程可能会有所不同。

# java - 是否有任何宏或环境来表示 target\classes 文件夹

> ID：14041842
> 
> 赞同：1
> 
> 时间：2012-12-26T14:17:46.770
> 
> 标签：java, maven

使用 maven，所有的类和资源都被复制到 target\classes 文件夹。

有没有办法使用代码中的环境变量来表示 target\classes 文件夹？

或者我可以将资源复制到根文件夹吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T14:19:18.243

您应该根据需要将资源复制到`resources`文件夹`src/main`下`src/test`。您可能需要创建目录。

# java - 双击表格 JButton 不起作用，只是显示 JButton 的类名

> ID：14041844
> 
> 赞同：-3
> 
> 时间：2012-12-26T14:17:48.690
> 
> 标签：java, swing, jtable

我有一个`JTable`只包含一个项目，该项目`JButtton`具有一个设置为`JFreeChart`生成图表的图标。

如果您单击该按钮，它将启动一个带有`JFreeChart`图表的新窗口。

我有一个按钮的单元格渲染器，它只返回`JButton`包含图表项的对象。

如果我单击按钮，它将启动新窗口。

但是，如果我双击按钮，新窗口会启动，但按钮上的图标（以前是`JFreeChart`）将更改为仅具有类名路径的文本字符串和`JButton`类字段值。

我可以让这种行为发生的另一种方法是，如果我删除单元格渲染器，那么`JButton`只显示类名。所以我不确定发生了什么，并且已经玩了很多次并且没有取得任何进展。我打算发布一些代码，但代码太多了。如果有人有任何想法，我可以发布某些代码部分来帮助解释。这是代码：

```
Class init {

    ...
    ItModel itModel = new ItModel ();
    JTable table = new JTable(itModel );
    TableRendrend rend = new TableRend();
    table.getColumn("it").setCellRenderer(rend);

}

class TableRend implements TableCellRenderer {
    JButton itButton;
    ...

    getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int columns){
         if(itButton ==null){
            itButton = new JButton (JButton)value.getIcon();
         }

        return itButton;

    }

}

Class itModel extends AbstractTableModel{
    JButton button;

...

public Object getValueAt(int rowIndex, intColumnIndex){
     if(button==null){
        button = new JButton( new ImageIcon(JFreeChartImage.getImage()));
        }

    return button
    }

} 
```

除了双击 JButton 并显示 TEXT ex 外，这一切都有效。

```
javax.Swing.JButton(0,0,...) 
```

所有字段值，而不是应显示的实际图表图像

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T16:23:36.443

您发布的代码存在几个问题，并且太长而无法将它们全部包含在评论中。

1.  您不应将 Swing 组件存储在模型中。组件的创建是渲染器的任务
2.  我不相信您可以单击渲染器返回的按钮。该按钮不包含在`JTable`显示的哪个中。在屏幕上仅绘制按钮的图像/屏幕截图/图章，但它的行为不像按钮。你需要一个编辑器。有关更多信息，请参阅[`JTable`有关编辑器和渲染器的教程](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editrender)

# php - 带有 CodeIgniter 的 PHP 邮件附件

> ID：14041845
> 
> 赞同：1
> 
> 时间：2012-12-26T14:17:54.057
> 
> 标签：php, codeigniter, email

我想从 Codeigniter 邮件类发送电子邮件，邮件正文中带有附件 img 和 img。

```
$this->email->from('office@office.com', 'Email');
$this->email->to('aaa@aaa.com');

$this->email->attach('pic.png');        

$this->email->set_mailtype("html");

$this->email->subject('Email');
$this->email->message('<img src="??????" />');  

$this->email->send(); 
```

Img 是在附件中发送的，但不是在正文中。有什么帮助吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T14:22:54.787

这是您的操作方法...您需要将附件指定为“内联”，然后使用正文中的图像。

```
$this->email->attach('pic.png', 'inline');
$this->email->message('<img src="cid:pic.png"/>'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T14:22:31.470

您正在附加图像，而不是在 HTML 消息中链接它。尝试将完全限定的图像链接放在图像`src`属性中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T14:22:44.573

要在电子邮件正文中发送图像，请创建一个 html 文件并将其作为消息发送。

```
$message = $this->load->view('view_file_name','',TRUE);

$this->email->message($message); 
```

# netbeans - 停止 Netbeans 发出哔哔声

> ID：14041853
> 
> 赞同：7
> 
> 时间：2012-12-26T14:18:35.197
> 
> 标签：netbeans

在 Windows 7 上，当我在已保存的文件上按住 Ctrl+S 时，会播放 Windows 错误声音。

这很烦人，当我习惯于在工作期间不断按 Ctrl+S 时，这会让人分心。

有没有办法禁用这个烦人的`features`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-21T18:35:10.273

好！这可能会帮助某人（可能是初学者）摆脱这种烦人的哔哔声。遵循这将帮助您禁用 Windows 默认蜂鸣。因此，即使在 netBeans 之外，您也根本不会听到这种哔哔声。

```
1) Go to Control Panel.
2) Click Sound.
3) Click on Sounds in Top Tab Menu.
4) Click on Default Beep from Program Events Sounds List. 
5) Select "None" from the drop down Sounds list.
6) Click Apply. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-09-15T08:40:06.973

在 Linux 上，要在系统范围内禁用硬件扬声器哔声：

```
xset b off 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T19:42:31.007

目前在 NetBeans IDE 中，不允许从用户宏调用“SaveAction”，例如此键盘映射覆盖“Ctrl-S”：

> " " 删除-以前的保存

这意味着**没有办法阻止操作系统发送声音错误**，但是阅读它，似乎其他用户抱怨这种行为，并且现在已经提出了几种解决方案，以使未来我们可以自定义这些行为。

[您可以在此处](http://netbeans.org/bugzilla/show_bug.cgi?id=203979)阅读有关此内容的更多信息

我能想到的唯一解决方案是禁用声音系统错误。

# javascript - gmap上折线的js函数

> ID：14041856
> 
> 赞同：0
> 
> 时间：2012-12-26T14:18:48.767
> 
> 标签：javascript, jquery, google-maps

通过调用我的函数 drawGmapLine() 我的浏览器说“line.setMap 不是函数”。我的地图创建没有任何问题。你能看出问题吗？

```
function drawGmapLine(id) {
    var map =  $("#map");

    var pfad = [
            new google.maps.LatLng(37.772323, -122.214897),
            new google.maps.LatLng(21.291982, -157.821856),
            new google.maps.LatLng(-18.142599, 178.431),
            new google.maps.LatLng(-27.46758, 153.027892)
        ];

        var line = new google.maps.Polyline({
          path: pfad,
          strokeColor: '#FF0000',
          strokeOpacity: 1.0,
          strokeWeight: 2
        });

        line.setMap(map);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T14:44:24.063

您正在使用的插件 (jQuery GMap) 使用 Maps V2。您上面的代码是使用 Maps V3 编写的。您需要找到更新的插件或直接使用 Maps V3 API 才能使`new google.maps.Polyline()`调用正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T15:08:30.553

这不是获取对 google.maps.Map 对象的引用的正确方法。

```
var map =  $("#map"); 
```

所以这行不通：

```
line.setMap(map); 
```

通常的解决方案是在构建地图时保留对地图的引用。

```
var map = new google.maps.Map(...); 
```

# c++ - win32 API 函数 GetModuleFileName 或 GetModuleHandle 中的“模块”是什么？

> ID：14041857
> 
> 赞同：6
> 
> 时间：2012-12-26T14:18:49.660
> 
> 标签：c++, api, winapi

在 win32 中，在某些情况下，我们需要一个模块句柄来执行某些操作。但我不知道究竟什么是模块。请帮帮我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T14:24:54.520

您的程序在程序加载时在操作系统创建的虚拟内存空间内执行。程序本身和加载在虚拟内存空间中的所有动态链接库称为模块。HMODULE 或 HINSTANCE 是加载特定模块的虚拟内存中的地址。您可以使用 GetModuleInstance() 或 LoadLibrary() API 调用来获取句柄。

# php - 标头（位置：URL）不起作用

> ID：14041858
> 
> 赞同：0
> 
> 时间：2012-12-26T14:18:49.147
> 
> 标签：php, redirect, header

我正在从数据库中检索数据以验证用户凭据。如果密码不匹配，我希望将用户重定向到登录页面。然而，这永远不会发生。相反，我被重定向到 chat_main.php。

它适用于所有其他情况（无效的电子邮件、有效的电子邮件和密码组合）。

这是我的代码：

```
<?php
session_start();
require_once("config/db_connect.php");
$usr=$_POST['email'];
$pwd=$_POST['password'];
$q="SELECT * FROM userdata WHERE email=\"$usr\"";
$info=mysql_query($q, $conn);
if(mysql_num_rows($info)!=1){
    header("Location: login.php?err=1");
}
else{
    while($data=mysql_fetch_array($info)){
        if($pwd!=$data['pwd']){
            header("Location: login.php?err=1");
        }
        $usr=$_SESSION['username']=$data['fname'];
        header("Location: chat_main.php?username=$usr");
    }
}
?> 
```

为什么会这样，如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T14:20:57.163

添加出口；在每个标题行之后，使脚本退出并实际处理标题重定向。否则，它将继续运行，并将命中下一个标头重定向..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T14:22:05.840

```
<?php
session_start();
require_once("config/db_connect.php");
$usr=$_POST['email'];
$pwd=$_POST['password'];
$q="SELECT * FROM userdata WHERE email=\"$usr\"";
$info=mysql_query($q, $conn);
if(mysql_num_rows($info)!=1){
header("Location: login.php?err=1");
exit;
}
else{
while($data=mysql_fetch_array($info)){
    if($pwd!=$data['pwd']){
        header("Location: login.php?err=1");
        exit;
    }
    $usr=$_SESSION['username']=$data['fname'];
    header("Location: chat_main.php?username=$usr");
    exit;
}
}
?> 
```

应该可以工作，因为您必须在发送标头后终止脚本。

# iphone - dyld：构建到 iphone 4 时未加载库

> ID：14041860
> 
> 赞同：1
> 
> 时间：2012-12-26T14:18:51.563
> 
> 标签：iphone, load, dylib

我正在使用第三方库，例如：libABC.dylib

我想在开源应用程序中使用 dylib，并且想安装到我的 iphone 4 中，带有 ios 6，没有越狱。在做一个

```
$ otool -L libABC.dylib
libABC.dylib:
    libABC.dylib (compatibility version 1.0.0, current version 1.0.0)
    libXYZ.dylib (compatibility version 0.0.0, current version 0.0.0)
    /usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version
111.1.5) 
```

现在我想将 dylib 与我的应用程序一起安装到我的 iphone 4 中。为此，我将 dylib 路径更改为

```
$ install_name_tool -id    @executable_path/../Frameworks/libABC.dylib   libABC.dylib 
```

另外，我将 libABC.dylib 添加到 Xcode 项目下的 Frameworks 中。

这会将内部 dylib 路径更改为

```
$ otool -L libABC.dylib
libABC.dylib:
    @executable_path/../Frameworks/libABC.dylib (compatibility version
1.0.0, current version 1.0.0)
    libXYZ.dylib (compatibility version 0.0.0, current version 0.0.0)
    /usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version
111.1.5) 
```

问题是：libABC 在应用程序启动时加载，我无法将此路径更改为相对于我的 mach-o 二进制文件的路径（在我的应用程序包中）所以我的应用程序无法加载。

```
Dyld Error Message:
  dyld: Library not loaded: /usr/local/lib/libABC.dylib
  Referenced from:
  ....
  Reason: image not found 
```

请给我一些方向。第三方库只创建dylib，没有静态库

我还尝试设置 XCode 选项以从“@executable_path”获取 dylib，但它没有用。而且我不通过代码加载我的dylib？

请建议。我在这里一无所知。提前谢谢:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T14:24:13.800

不幸的是，不，你运气不好，开始寻找替代品。您不能向 iOS 项目添加自定义/第三方 dylib，iOS 项目仅支持添加内置动态库。此外，任何添加 dylib 的尝试和成功都可能导致您的应用被苹果拒绝。

为什么？请查看[此帖子](https://stackoverflow.com/a/4733885/593709)以进行详细讨论。特别是对标记答案的第二条评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-06T09:56:47.910

就像您在@Adil Soomro 的参考资料中看到的一样，出于安全原因，不支持第三方框架。这就是为什么您在尝试构建应用程序时必须删除日志中出现的所有框架的原因。通常，如果不包含这些框架，它应该可以工作。如果调试器在构建时打开，您应该按播放直到安装应用程序。

但是请继续查看您使用的框架类型，以免在审核应用程序时被拒绝。

此外，如果您在 ios 5.1 或更低版本上启动应用程序并且这些操作系统版本不支持您的某些框架，则可能会出现相关的错误方法。

# sql - 在 asp.net MVC 中使用 Code first 为页面分配权限

> ID：14041873
> 
> 赞同：1
> 
> 时间：2012-12-26T14:19:59.850
> 
> 标签：sql, asp.net-mvc, ef-code-first, entity-framework-4.1

在这里，我在 asp.net mvc 中创建了一个模型结构：

```
public class UserModel
{
    public int UserId {  get;  set;  }
    public string UserName  {  get;   set;  }
    public string Password   {    get; set;    }
    public List<Permission> Permissions {   get;   set;  }
    public string FirstName {  get;  set;  }
    public string LastName {  get;   set;  }
}

public class Permission
{
    public int PermissionID {   get;  set;   }
    public bool IsPermit   {  get;  set;  }
    public string Name  {  get;  set;  }
} 
```

并在列表中设置一些默认值，当我在列表中添加用户时，我通过 UI 将页面权限分配给该用户（通过检查权限复选框），以便用户只能访问分配的页面：

```
public static class Repository
{
    public static List<UserModel> GetUsers()
    {
        List<UserModel> listUsers = new List<UserModel>
        {
            new UserModel
            {
                UserId = 1,
                UserName = "abc",
                Password = "abc",
                Permissions = new List<Permission>
                {
                    new Permission
                    {
                        PermissionID = 1,
                        IsPermit = true,
                        Name = "Page1"
                    },
                    new Permission
                    {
                        PermissionID = 2,
                        IsPermit = false,
                        Name = "Page2"
                    },
                    new Permission
                    {
                        PermissionID = 3,
                        IsPermit = false,
                        Name = "Page3"
                    },
                    new Permission
                    {
                        PermissionID = 4,
                        IsPermit = false,
                        Name = "Page4"
                    }
                },
                FirstName = "Rohit",
                LastName = "Sharma"
            },

            new UserModel
            {
                UserId = 2,
                UserName = "xyz",
                Password = "xyz",
                Permissions = new List<Permission>
                {
                    new Permission
                    {
                        PermissionID = 1,
                        IsPermit = false,
                        Name = "Page1"
                    },
                    new Permission
                    {
                        PermissionID = 2,
                        IsPermit = true,
                        Name = "Page2"
                    },
                    new Permission
                    {
                        PermissionID = 3,
                        IsPermit = true,
                        Name = "Page3"
                    },
                    new Permission
                    {
                        PermissionID = 4,
                        IsPermit = true,
                        Name = "Page4"
                    }
                },
                FirstName = "Rahul",
                LastName = "Sharma"
            }
        };

        return listUsers;
    }
} 
```

现在我想在 DbContext 类的帮助下使用数据库的代码优先方法来做同样的事情。我在数据库表中有一个静态页面权限列表（Id =1，Name=Page1；Id =2，Name=Page2；Id =3，Name=Page3；Id =4，Name=Page4）。

在为数据库创建模型结构时我很困惑。请指导我如何使用表格创建模型结构和结构映射。

我的数据库中有一个带有默认行的表（权限）。

```
ID Name

1 Page1

2 Page2

3 Page3

4 Page4 
```

现在，当我添加用户时，我通过静态复选框（Page1、Page2、Page3 和 Page4）为该用户分配权限。这就是我在包含页面列表的数据库中创建静态表的原因。我的用户表最初是空白的。

```
User

Id            int             NotNull

UserName      nvarchar(100)   AllowNull

Password      nvarchar(100)   AllowNull

FirstName     nvarchar(100)   AllowNull

LastName      nvarchar(100)   AllowNull 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T16:05:18.677

当您首先使用代码时，您可以使用下面提到的结构。当您首先使用代码时，您必须保持约定（但是当您使用 Fluent API 时可以更改）。

**模型类**

```
public class User
{
    public int Id {  get;  set;  }
    public string UserName  {  get;   set;  }
    public string Password   {    get; set;    }
    public string FirstName {  get;  set;  }
    public string LastName {  get;   set;  }

    public virtual ICollection<Permission> Permissions {   get;   set;  }

}

public class Permission
{
    public int Id {   get;  set;   }
    public bool IsPermit   {  get;  set;  }
    public string Name  {  get;  set;  }

    public virtual User {   get;   set;  }

} 
```

**表格**（这将自动生成。但如果您愿意，也可以手动创建）

```
Users

Id            int             NotNull
UserName      nvarchar(100)   AllowNull
Password      nvarchar(100)   AllowNull
FirstName     nvarchar(100)   AllowNull
LastName      nvarchar(100)   AllowNull

Permissions

Id            int             NotNull
IsPermit      bit             AllowNull
Name          nvarchar(100)   AllowNull
User_Id       int             NotNull 
```

**DbContext 派生类**

```
public class UserEntities : DbContext
    {
       public DbSet<User> Users { get; set; }
       public DbSet<Permission> Permissions { get; set; }
    } 
```

有关更多信息，请查看[**使用实体框架进行代码优先开发**](http://weblogs.asp.net/scottgu/archive/2010/07/16/code-first-development-with-entity-framework-4.aspx)

我希望这对你有帮助。

# azure - Windows Azure 上的 Orchard 性能缓慢

> ID：14041875
> 
> 赞同：3
> 
> 时间：2012-12-26T14:20:07.853
> 
> 标签：azure, orchardcms, azure-web-app-service

我在 Windows Azure 上托管了一个小型 Orchard 网站。该网站当前配置为使用免费网站实例。我注意到，在 20-30 分钟后第一次访问该站点时，加载需要一段时间（> 5 秒）。在初始加载之后，我可以重新访问该站点，而且速度很快。我怀疑应用程序池作为一个免费的 Azure 网站实例经常被回收。

我需要这个网站尽可能快地加载。我不反对使用不同的 Azure 选项。我只是不确定我应该使用什么。

1) 我的 Orchard 站点的 web.config 文件中有没有办法设置应用程序池的回收频率？我真的需要这个网站快速。

2) 如果我使用“共享”网站实例，这会让我摆脱回收问题吗？

3) 或者，我是否需要“保留”网站实例。

我的主要目标是经济高效地实现在一段时间未访问后快速加载我的网站的目标。我只是不确定我能/应该做什么。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T17:41:18.927

我使用以下组合来解决性能问题：

1.  我启用[Keep Alive 模块](http://gallery.orchardproject.net/List/Modules/Orchard.Module.Contrib.KeepAlive)
2.  我启用了[预热模块](http://gallery.orchardproject.net/List/Modules/Orchard.Module.Orchard.Warmup)并在`Performance`设置中添加了我最常访问的页面
3.  我在内部手动设置了机器密钥，`web.config`以便会话持续进行而不管回收 - 如果没有为 IIS 内的网站分配足够的内存，这可能是一个问题

这些步骤与 Azure 无关，而是与任何类型的托管相关。尤其是在使用 Azure 共享网站实例时，因为它们只不过是共享主机（与 Azure 云服务不同）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T17:43:42.047

Azure Web 角色可以很容易地变得快速并避免 appPool 回收问题，因此请在尝试使用 Azure 网站的所有选项后考虑您的计划 B。

我没有尝试过使用 Azure 网站，所以那里可能会也可能不会。关于您是否可以为预留实例配置空闲超时设置的信息含糊不清。您可以尝试的一件事是使用预热功能（仪表板 -> 性能）。这应该会定期加载一些页面，这将防止 appPool 的空闲超时。您也可以尝试使用 pingdom.com 之类的外部服务或类似的服务，这些服务会定期 ping 您的网站以防止其被回收。

如果你最终切换到网络角色，你肯定能够做到这一点。最新的 Orchard 版本 (v1.6+) 默认将 appPool 空闲超时设置为 0（从不超时）。如果您使用 Web 角色而不是 azure 网站，您通常会更好地控制性能和其他配置。这种选择的主要缺点是您失去了一些部署选项，并且部署需要更长的时间（它们仍然很容易，只是需要一段时间）。

# css - 几个并排 div 的 CSS/HTML 居中

> ID：14041879
> 
> 赞同：4
> 
> 时间：2012-12-26T14:20:22.653
> 
> 标签：css, css-float, html, centering

我正在创建一个需要将几块文本和图片放在一起的网站。但我也希望他们居中。我为这些元素中的每一个都使用了一个设置大小，所以如果有人调整他们的屏幕大小，我希望我的页面不断更改彼此相邻放置的 div 的数量。通常我会使用 float:left; 为此，但这不起作用，因为我希望我的页面居中。

所以它看起来有点像这样：

```
________
|1 2 3 4| 
|  5 6  |
|_______| 
```

但是当我调整屏幕大小时，它看起来像这样：

```
______
|1 2 3|
|4 5 6|
|_____| 
```

如果我放大它看起来像这样：

```
___________
|1 2 3 4 5 |
|    6     |
|__________| 
```

目前的CSS看起来像这样：

```
 div.child{
width:23%;
float:left;
height:600px;
padding:0px;
min-width:200px;
max-width:230px;
overflow:hidden;
text-align:center;
border-style:solid;
border-width:5px;
overflow:visible;
display:inline-block;
} 
```

和

```
div.parrent{
padding:0px;
border-style:solid;
border-top-style:solid;
border-width:5px;
overflow:hidden;
text-align:center;
} 
```

有人有任何提示吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T14:24:55.090

全部制作并将`display:inline-block`父级设置为拥有`text-align:center`.

## 演示1：http: [//jsfiddle.net/xdEmz/1/](http://jsfiddle.net/xdEmz/1/)

## 演示 2：http: [//jsfiddle.net/E5sHa/2/](http://jsfiddle.net/E5sHa/2/)

![Demo 2 截图](../Images/76041bfdc6da8d0ad92a21d195dfb693.png)

请注意，如果您希望每个项目内的图片居中，您可以：

*   将图像保留为`display:inline`（默认值）并`text-align:center`从父级流过，并使用显式`<br>`强制在它们之后换行，或者
*   您可以将图片设置为`display:block`（正如我在上面的第二个演示中所做的那样），然后使用`margin:0 auto`使它们在其父容器中水平居中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T14:23:17.607

您可以使用`min-width`and`max-width`和 来创建一个容器`text-align:center`。

![在此处输入图像描述](../Images/1cc8844d68a7384a67fa4530443fd643.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-26T14:27:30.543

使单个元素显示：带有文本对齐中心的内联和容器元素...这里的示例[http://psarink.org/gallery.php](http://psarink.org/gallery.php)

# android - AndEngine 将精灵显示为白色矩形？

> ID：14041880
> 
> 赞同：0
> 
> 时间：2012-12-26T14:20:28.007
> 
> 标签：android, andengine

当我尝试将精灵添加到我的场景（在 AndEngine 中）并在我的手机中运行该应用程序时，它只显示一个大矩形。我的代码是：

```
myTex = new BitmapTextureAtlas(512, 512, TextureOptions.DEFAULT);
myTexRegion = BitmapTextureAtlasTextureRegionFactory.createFromAsset(myTex, this, "menu_spr.jpg", 0, 0); 
```

我的图像尺寸为 424*424。我尝试同时使用`TextureOptions.DEFAULT`和`TextureOptions.BILINEAR`。我的形象是不是该死？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T14:27:08.317

您没有说您使用的是哪个版本的 AndEngine，也没有显示所有代码……您是否正在加载 TextureAtlas？就像是

```
myTexRegion.load(); 
```

# html - 在两个不同页面上链接到网站内的视频

> ID：14041881
> 
> 赞同：1
> 
> 时间：2012-12-26T14:20:34.900
> 
> 标签：html, css

我想知道如何使用从一页到另一页的图像拇指链接到视频。

例如，如果我只想从一个页面链接到另一个页面，我会简单地输入

```
<img src="theotherpage.html" /> 
```

但这并不完全适合我。我需要直接链接到视频。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T14:30:28.643

只需用`<a>`标签包装图像

```
<a href="link-to-direct-video">
   <img src="image-thumb-src" />
</a> 
```

如果我正确理解你的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T14:44:17.613

如果您想链接到包含一个视频的页面，请使用[YardenST 的答案](https://stackoverflow.com/a/14041996/1262824)。如果您想链接到包含许多视频的页面，但又想滚动到该视频，则可以使用锚点。

在视频页面上，假设您有以下 HTML：

```
<div id="video1"> ... </div>
<div id="video2"> ... </div> 
```

如果你想链接到第二个视频，你可以使用

```
<a href="/videos.html#video2">
    <img src="image-thumb" />
</a> 
```

# c++ - 在 C++ 中声明具有只读属性的接口

> ID：14041885
> 
> 赞同：1
> 
> 时间：2012-12-26T14:20:45.620
> 
> 标签：c++, qt

我正在将一些 C# 代码转换为 C++。

我遇到了以下数据类型：

```
public interface FooBar
{
     string Name { get; }
     decimal Weight { get; }
     int AgeInYears { get; }
} 
```

我想在我的 C++ 标头中声明这一点，但我不确定解决此问题的最佳方法是什么 - 任何建议都将不胜感激。

PS：我正在使用Qt（但对它来说是新的），所以我愿意使用Qt（**Q_PROPERTY，Q_INTERFACE**）等的任何功能，如果这有助于我声明一个带有（只读）属性的接口。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T14:31:54.647

```
class FooBar {
public:
    QString  getName() = 0;
    double   getWeight() = 0;
    int      getAgeInYears() = 0;
}; 
```

不要忘记将其作为 public: 继承`NewClass : public FooBar { ... };`。

您绝对必须自己声明它，因为`Q_INTERFACE`和`Q_PROPERTY`用于修饰此类声明并通知 Qt 它们可能会以古怪的 Qt 方式使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T14:35:53.727

像这样的东西可以解决问题：

```
类 FooBar
{
上市：
    std::string GetName(){ return _name; }
私人的：
    std::string _name;
}

```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T14:23:11.937

你不能在 C++ 中做到这一点。唯一的可能是将属性设为私有并写入访问器。没有语法糖可以为你做这件事。但是，某些 IDE 可能会生成代码。

# math - 图形编程中的矩阵乘法阶 PVM 与 MVP

> ID：14041888
> 
> 赞同：5
> 
> 时间：2012-12-26T14:21:01.313
> 
> 标签：math, matrix, 3d

您好，我想知道为什么大多数教程和编程代码都使用 MVP 来描述模型-视图-投影矩阵。而不是 PVM 是代码中的实际实现顺序：

```
mat4 MVP = ProjectionMatrix * ViewMatrix * ModelMatrix;
gl_Position = MVP * VertexInModelSpace; 
```

对我来说，编写 PVM 而不是 MVP 似乎更容易理解。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T14:36:41.693

矩阵实际上并没有固定的含义，只是行和列之间的关系。其含义可由开发人员自由定义。MVP 顺序遵循标准数学约定。但是由于没有人说您不能将向量定义为列而不是行，因此没有什么可以排除这种排序。

**澄清：**因为改变符号会改变意思。然后以下适用：

M [mvp] ^T = M [pvm]

由于矩阵乘法的定义，以下规则生效：

(AB) ^T = B ^T A ^T

由于 B 可以递归地是另一个矩阵乘法，因此它们的无限链是可能的。这基本上意味着您已经通过更改符号交换了乘法顺序。

这有点像从外部看问题或从内部看问题。在这种情况下，您作为外部观察者的想法。而另一种方式则是从链中第一个操作员的角度观察事物。就我个人而言，我认为您使用的符号对于这个特定任务可能更直观，而另一种则更常见。主要是因为我见过的所有数学书籍都使用这个约定，所以怪不得数学家。

所以最好坚持使用更常见的方式，让事情更容易理解。例如：没有什么能阻止我用芬兰语输入答案，但 stackoverflow 的惯例是用英语回答，让大多数用户更容易理解答案。使用更常见的形式，因为其他人可能无法掌握差异，这会导致错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T22:38:23.203

另一个问题是矩阵乘法不一定是可交换的：

```
AB != BA 
```

所以坚持约定是个好主意。

# java - 如何在 Java 中检查 if(Object)？

> ID：14041896
> 
> 赞同：0
> 
> 时间：2012-12-26T14:21:41.993
> 
> 标签：java, if-statement, control-flow

我有一个Java代码：

```
for(Iterator it = c.getArrayList().iterator(); it.hasNext(); ) {
    Object i = it.next();

    // Here I have an error, i is not a boolean
    if (i) {
        System.out.format("Delete %s%n", i);
        it.remove();
    }
    else {
        System.out.println("End");
        break;
    }
} 
```

但是该`if`子句会引发错误。它期望`boolean`但`Object`被给予。Java 不能转换类型，对吧？

我如何更改类型或我必须在`if`子句中添加什么才能使其正常工作？

**升级版：**

它是字符串的集合（一个 ArrayList）。

```
Object i = it.next();   // I get one element from collection.
if (i) {   // check if it's not the end, if it's not the last element of the collection 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T14:23:19.130

您是否正在尝试测试它是否为空？

```
if (i != null) {
    System.out.format("Delete %s%n", i);
    it.remove();
}
else {
    System.out.println("End");
    break;
} 
```

* * *

如果您正在检查 的布尔值`i`并且`ArrayList`是 a `List<Boolean>`，那么您可以使用`Iterator<Boolean> it`，但您仍然必须[小心](http://ideone.com/ljv5CT)[空指针](http://ideone.com/YxMfH7)异常。

* * *

**编辑：**如果要在`End`删除所有非空字符串时打印，则可以删除`else`块并`End`在`for`循环后打印。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T14:24:23.877

幸运的是 Iterator 有一个`hasNext()`功能。

所以你会使用：

```
Object i = null;
if(it.hasNext()){
    i = it.next();
}else{
    //done.
}
//Do stuff with i. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T14:26:42.893

不清楚你想测试什么。

如果要测试对象是否存在，则检查 null：

```
if (i==null) 
```

如果要检查某些属性，请转换为特定类型

```
if(((MyClass)i).iDontWantLoLive()) 
```

如果对象是布尔值，则转换为布尔值：

```
if((Boolean)i) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-26T14:28:47.070

Java 是一种强类型语言。如果你想要/期望布尔值，那么做这样的事情......

```
 List<Boolean> list = new ArrayList<Boolean>();
    for (Iterator<Boolean> it = list.iterator(); it.hasNext(); ) {
        boolean i = it.next();

        if (i) {
            System.out.format("Delete %s%n", i);
            it.remove();
        }
        else {
            System.out.println("End");
            break;
        }
    } 
```

否则，如果您只是想基于它为空来删除某些东西，那么（'if (i==null)' 正如其他人所建议的那样）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-26T14:35:28.110

您的“End”输出表明您希望在最后执行此操作。您可以改为这样做。

```
List list = c.getArrayList();
for(Object o: list)
    System.out.println("Delete " + o);
list.clear();
System.out.println("End"); 
```

注意：`format`只返回一个您要丢弃的字符串。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-26T14:40:58.223

这是删除列表最后一个元素的一种非常缓慢的方法。相反，使用

```
list.remove(list.size() - 1); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-26T14:23:28.973

是的，Java 不会自动强制类型。您将不得不手动将其`Object`转换为`Boolean`.

# c++ - MinGW 在 dll 中隐藏方法名称

> ID：14041899
> 
> 赞同：2
> 
> 时间：2012-12-26T14:22:24.347
> 
> 标签：c++, dll, linker, mingw

我一直在寻找 dll 中的隐藏方法。在 MSVC 中，有一种方法可以创建 def 文件并将其与 NONAME 属性链接（参见[此处](https://stackoverflow.com/questions/848144/how-to-hide-the-exporting-functions-in-dll)）。

在 MinGW 中是否也可以这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T14:43:01.987

您可以使用 GCC 扩展，[可见性属性](http://gcc.gnu.org/wiki/Visibility)：

```
__attribute__ ((visibility ("hidden"))) 
```

# c# - 与 ILMerge 或 SmartAssembly 等工具合并时，内部类是否会变为私有类？

> ID：14041902
> 
> 赞同：4
> 
> 时间：2012-12-26T14:22:41.297
> 
> 标签：c#, .net, ilmerge, smartassembly

最近我发现了一些允许将 .Net 库合并到 Windows 应用程序中的工具。

现在真正的问题是图书馆的行为如何改变，

1.  **内部**类是否仍然在库内部？或者它是否**成为**它所合并的应用程序的内部？
2.  图书馆有可能**发生故障**吗？

扩展问题：

3.  合并内部程序集时应该将其设置为私有，这样合并后的应用程序不能使用它，这不是更好吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-26T14:30:42.683

类不能是私有的，除非它们是嵌套的。

但是请考虑一下：如果您要合并程序集 A 和 B，那么您必须在合并之前已经编译它们。当它们被编译时，它们的内部方法彼此无法访问。因此，在合并后的代码中，不可能有调用其他程序集内部方法的方法。

> 在合并内部程序集时应该将其设为私有，以便它们合并的应用程序不能使用它会更好吗？

那将如何运作？如果顶级类型是私有的，那么*其他类型根本无法访问它。* 这就是为什么你不能定义私有类型（除非它们嵌套在另一种类型中）。

假设程序集 A 具有类 C 和 D，其中 C 是内部的，并且 D 从类 C 调用某些方法。当类 C 变为私有时（在可能的 CTS 的某些假设版本中），类 D 中断。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T14:50:49.447

> 没有嵌套到其他类型中的顶级类型只能具有内部或公共可访问性。这些类型的默认可访问性是内部的。

从 MSDN[链接](http://msdn.microsoft.com/en-us/library/ba0a1yw2%28v=vs.71%29.aspx)

> 1 内部类是否仍然在库内部？或者应用程序的内部是否被合并？

它保留在应用程序内部。

> 2 图书馆是否有可能发生故障？

从技术上讲是可能的。假设 A 类是 App 内部的，也是 lib 之一（**具有相同的命名空间**）。在合并之前不会有任何问题。合并后将成为解决模糊引用的问题。

应用程序（SmartAssemply/ILMerger）如何处理这些是另一个问题（我不知道）？他们可以选择提供错误信息，也可以不提供。他们可能选择转换，也可能不转换。

> 在合并内部程序集时应该将其设为私有，以便它们合并的应用程序不能使用它会更好吗？

由于指定的顶级类型不能是私有/受保护的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T14:31:48.083

[MSDN](http://msdn.microsoft.com/en-us/library/7c5ka91b%28v=vs.80%29.aspx)对此非常清楚：

> 内部类型或成员只能在同一程序集中的文件中访问...

由于您将它们合并到一个程序集中，因此合并程序集中的所有文件都可以访问内部类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T15:03:15.917

ILMerge 可以破坏库，尽管只有在库设计不良时才会发生这种情况。

破损将与 无关`internal`。但是如果使用反射来测试从哪个程序集中加载某些东西，或者在特定程序集中搜索类型，结果会发生变化。

我会更担心合并对代码访问安全属性的影响，而不是对`internal`. 但本质上，**不要合并需要在不同信任级别运行的程序集。**

# susy-compass - Susy：不同断点的块顺序不同？

> ID：14041907
> 
> 赞同：1
> 
> 时间：2012-12-26T14:22:59.957
> 
> 标签：susy-compass

我希望我的网站的标题看起来像这样：

```
[_1_] [____2____] [_3_] 
```

在较小的屏幕上，我希望它像这样适应：

```
[____2____]
[_1_] [_3_] 
```

这可以通过 ZenGrids 轻松实现，但我无法为 Susy 提供解决方案。

我怎样才能使用 Susy's 实现这一目标`at-breakpoint`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T18:10:42.190

这应该可以使用源顺序 2-1-3，然后使用推/拉将列移动到位。您还可以使用`columns()`、`gutter()`和`space()`函数手动操作边距 - 这将允许您相当轻松地重新创建 Zen 方法。

# php - shell 脚本 - 解释代码

> ID：14041914
> 
> 赞同：4
> 
> 时间：2012-12-26T14:23:19.253
> 
> 标签：php, shell

我只是shell脚本的初学者。我正在阅读我同事的代码，但我不知道下面的代码是什么意思。任何人都可以帮助我了解以下代码的含义，特别是该`RESULT`行。

```
#!/bin/bash
DATETIME=$(date);
LOGFILE="/var/www/ema/services/generate.log";
ENDRESULT="DONE";

RESULT=$(curl -s 127.0.0.1/services/generatereport.php);

if [[ "$RESULT" =~ "$ENDRESULT" ]]; then
    RESULT="Generation Ended";
    echo "["$DATETIME"]"$RESULT >> $LOGFILE;
else
    echo "["$DATETIME"]"$RESULT >> $LOGFILE;
    /var/www/ema/services/generate.sh;  
fi 
```

该脚本的文件名是`generate.sh`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T14:33:48.040

我已经为你评论了代码:)

```
#!/bin/bash
DATETIME=$(date); // Get current date
LOGFILE="/var/www/ema/services/generate.log"; // Where to save data
ENDRESULT="DONE"; // What to expect at the end of data

RESULT=$(curl -s 127.0.0.1/services/generatereport.php); // Request data from PHP running on localhost

if [[ "$RESULT" =~ "$ENDRESULT" ]]; then // If $RESULT ends with "DONE" then log to file that everything is okay;
    RESULT="Generation Ended";
    echo "["$DATETIME"]"$RESULT >> $LOGFILE;
else // Otherwise write down the error and run some other script.
    echo "["$DATETIME"]"$RESULT >> $LOGFILE; 
    /var/www/ema/services/generate.sh;  
fi 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T14:34:35.873

此行`RESULT=$(curl -s 127.0.0.1/services/generatereport.php);`使用[cURL](http://curl.haxx.se/)加载资源，在本例中为文件*generatereport.php*。**更新：**它基本上是执行命令 curl，它从服务器请求文件。选项 -s 是静默模式，以避免任何错误消息或进度条。从卷曲文档：

> **-s，--静音**
> 
> 静音或静音模式。不要显示进度表或错误消息。使 Curl 静音。

由于使用的 IP 地址是 127.0.0.1 (localhost)，他只是从 localhost 中的文件夹*服务*执行文件。文件的输出存储在变量 RESULT 中。

下一个 if 语句`[[ "$RESULT" =~ "$ENDRESULT" ]];`将**RESULT**的结尾与变量**ENDRESULT**的值（即“DONE”）进行比较，在这种情况下，报告生成已完成，并将该语句存储`"Generation Ended"`在日志文件中，如“[Date] *Generation Ended* ” .

日志文件位于`/var/www/ema/services/generate.log`

在第二种情况下，它也将 的输出存储`generatereport.php`在日志文件中，尽管这一次它也调用位于`/var/www/ema/services/generate.sh`

# c - 在 GCC 4.6 中使用 -mno-cygwin 选项

> ID：14041916
> 
> 赞同：0
> 
> 时间：2012-12-26T14:23:23.577
> 
> 标签：c, linux, makefile, cygwin, winexe

我目前正在从事winexe项目。winexe 使用 -mno-cygwin 作为 CFLAGS 在 linux 上编译 windows C 代码。

以下是目录 winexesvc 下的 Makefile ：-

```
CFLAGS=-mno-cygwin -Os
LDFLAGS=-mno-cygwin -s -Os

CC_WIN32 := $(shell bash -c 'which {i386,i586}-{mingw32,mingw32msvc}-gcc')
CC_WIN64 := $(shell bash -c 'which {x86_64,amd64}-{mingw32,mingw32msvc}-gcc')

all: winexesvc32_exe.c winexesvc64_exe.c

winexesvc32.exe: winexesvc32.o service32.o
    $(CC_WIN32) $(LDFLAGS) -o $@ $^

winexesvc64.exe: winexesvc64.o service64.o
    $(CC_WIN64) $(LDFLAGS) -o $@ $^

%32.o: %.c
    $(CC_WIN32) -c $(CPPFLAGS) $(CFLAGS) -o $@ $^

%64.o: %.c
    $(CC_WIN64) -c $(CPPFLAGS) $(CFLAGS) -o $@ $^

winexesvc32_exe.c: winexesvc32.exe bin2c.exe
    ./bin2c.exe winexesvc32_exe winexesvc32.exe > $@

winexesvc64_exe.c: winexesvc64.exe bin2c.exe
    ./bin2c.exe winexesvc64_exe winexesvc64.exe > $@

bin2c.exe: bin2c.c
    gcc -s -o $@ $^

clean:
    -@rm *.exe *.o *_exe.c 
```

不做任何修改，整个代码编译运行成功。

但是，每当我替换 winexsvc.c 文件或 winexesvc64_exe.c 文件或 winexesvc32_exe.c 时（我需要修改这 3 个文件）。当我用修改后的代码替换 winexesvc.c 时，它显示以下错误。修改后的代码不会调用任何其他文件或文件外的任何函数。

所以，问题是当我对上面提到的 3 个文件进行一些修改时，我得到了上面提到的错误。知道为什么会这样吗？

PS :- 我已经阅读了关于 gcc 中 -mno-cygwin 选项错误的其他帖子。但这些与我的问题无关。附加信息：- [我从 winexe 下的 winexesvc 文件夹的 Makefile 获得此信息。]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T19:53:48.067

已解决：- 我使用 i586-mingw32msvc-gcc 命令和合适的标志来手动编译每个文件，然后相应地链接它。

得到，所需的结果。

# reporting-services - 在 SSRS 2008 R2 中报告部署时，Mozilla 火狐的登录问题？

> ID：14041924
> 
> 赞同：0
> 
> 时间：2012-12-26T14:23:55.090
> 
> 标签：reporting-services, ssrs-2008

我在 ssrs 2008 环境中开发了一份报告。网址如下所示

```
http://test:8080/ReportServer/Pages/ReportViewer.aspx?%2fReport+Project1%2fReport1&rs:Command=Render&rs:Format=excel 
```

它在 IE 和 chrome 中运行良好，但在 Firefox 中它要求使用用户名和登录。

我该如何解决这个问题。

请不要搜索 URL 中的错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T14:49:05.823

即使我在浏览器中遇到了同样的问题。似乎 Firefox 没有将凭据传递给您的 SSRS 报告服务。您需要在 firefox 配置文件中输入您的 SSRS 服务器凭据

查看本文了解 [如何更改报告服务站点安全性设置](http://social.msdn.microsoft.com/Forums/en-AU/sqlreportingservices/thread/2eb3b197-b18b-4b31-a6ab-ba3989e94904)

# kendo-ui - KendoUI 远程数据源：为 url 参数分配一个来自 javascript 变量的值

> ID：14041931
> 
> 赞同：0
> 
> 时间：2012-12-26T14:24:34.887
> 
> 标签：kendo-ui

我正在使用 KendoUI 从远程数据源（即 JSON 文件）创建图表。当我为 `url`参数（内部数据源对象）分配一个远程路径时，指向 JSON 图表不会出现。

说喜欢，

```
var myVar="some remote url"; 

dataSource: {
   transport: {
     read: {
       url: myVar,
       dataType: "json"
     }
   }
} 
```

另一方面，如果我直接将 url 指定为：

```
url: "http://myserver-name/somefile.json" 
```

我可以看到正在显示的图表。

我无法弄清楚我做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T08:06:57.677

好吧，您的解决方案对我有用，但方式不同。我从 .cs 文件中获取 url 值并将其存储在 javascript 变量中。var URL="<%=myCSvariable%>";

但仅此一项不起作用...:(我不得不将 URL 变量值修改为 var completeURL="\"" + URL + "\"";

然后创建 dataSource 对象为，

```
var mydataSource = new kendo.data.DataSource({
         transport: {
             read: {
                 url: URL,   // this is the tricky part. Using 'completeURL'           here doesnt creates my chart , instead 'URL' works just fine.
                 dataType: "json"
             }
         }

 }); 
```

我知道它很奇怪，但这就是它对我有用的方式..无论如何，非常感谢..:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T22:23:07.817

它应该工作！检查在 [jsfiddle](http://jsfiddle.net/OnaBai/7fVpW/2/)上运行的以下内容。

```
var url = "http://demos.kendoui.com/service/Products";
var dataSource = new kendo.data.DataSource({
    transport: {
        read: {
            url: url,
            dataType: "jsonp"
        }
    },
    pageSize: 4,
    schema: {
        model: {
            id: "ProductID",
            fields: {
                ProductID: {
                    editable: false,
                    nullable: true
                },
                ProductName: "ProductName"
            }
        }
    }
});

$("#kendogrid").kendoGrid({
    dataSource: dataSource,
    columns: [
        {
            field: "ProductID",
            title: "ID"},
        {
            field: "ProductName",
            title: "Name"}
    ]
});​ 
```

这是 HTML：

```
<div id="kendogrid"></div>​ 
```

它定义了一个外部 URL 并将其设置为一个变量 ( `url`)，然后使用结果`DataSource`。

检查差异或在 jsfiddle 或 jsbin 中发布尽可能完整的代码。

# python - 整列在python中填写了一个列表

> ID：14041932
> 
> 赞同：4
> 
> 时间：2012-12-26T14:24:36.297
> 
> 标签：python, arrays

好吧，这很奇怪。我不明白，它变得非常令人沮丧。

1.  我声明和数组（列表）
2.  我用字符串（股票代码）启动第一行
3.  对于所需的交易日数，我用零填充其余部分。
4.  我想用当天要购买或出售的股票的数字填充“头寸”矩阵的某些元素。而不是只填充一个元素，而是填充整个列。

    ```
    # Initiating position matrix
    positions = []
    # Initiating a row of zeros (to fill position matrix later)
    empty_row = []
    # Symbols is a list of symbols that will be traded.
    for symbol in symbols:
        empty_row.append(0)

    # First row of positions will be symbols
    positions.append(symbols)

    # All other rows will be empty_rows
    for day in timestamps:
        positions.append(empty_row) 
    ```

    然后我将确定我需要填充哪些“职位”元素。假设第 10 行第 1 列的元素（从零开始索引）。所以我这样做：

    职位[10][1] = 100

    我得到的结果是整个第 1 列充满了 100。不仅仅是元素。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T14:30:00.003

您 一遍又一遍地附加*相同的空列表：*

```
for day in timestamps:
    positions.append(empty_row) 
```

您需要为每个新行创建一个新的“空”列表：

```
for day in timestamps:
    positions.append([0]*len(symbols)) 
```

您可以将所有这些放入列表理解中，因此您的整个代码将变为

```
positions = [symbols]
positions.extend([[0]*len(symbols) for day in timestamps]) 
```

# c# - 访问用户输入

> ID：14041934
> 
> 赞同：1
> 
> 时间：2012-12-26T14:24:53.890
> 
> 标签：c#, asp.net-mvc-3

我正在尝试创建一个电子商务应用程序，现在我必须创建帐户管理逻辑。我正在尝试利用 Membership API，但我似乎无法找到如何继续。

我的应用程序有两个数据库，一个包含电子商务应用程序的所有表，第二个是由 asp.net 生成的，用于与 Membership API 一起使用。

我不知道如何检索用户输入的数据。

这就是我打算做的：

```
 [HttpPost]
    public ActionResult LogIn()
    {
        if(ModelState.IsValid)
        {
            if(Membership.ValidateUser(username , password))
            {

            }
        }
    } 
```

谁能给我一个关于如何检索用户输入的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T14:29:36.007

您将需要传入一个模型。例如，假设我有一个带有表单的视图，它具有以下字段：

```
<input type="textbox" id="username" name="username"/>
<input type="password" id="password" name="password"/> 
```

现在我需要一个模型来将其序列化为：

```
public class LoginModel
{
    public string username { get; set; }
    public string password { get; set; }
} 
```

现在我想要将该模型接收到操作方法中：

```
[HttpPost]
public ActionResult LogIn(LoginModel model) 
```

发生这种`POST`情况时，ASP.NET MVC 将根据表单内的输入字段为您构建模型。

# r - 更改列中的数据

> ID：14041937
> 
> 赞同：-4
> 
> 时间：2012-12-26T14:25:08.147
> 
> 标签：r

我有来自 NFL 的 boxscore 数据，其中一些数据显然不正确。例如，对于某些游戏，麻袋数是负数，这是不可能的。此列名为`SackNumOff`。如何将此列中的任何负值更改为零？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T14:27:16.473

像这样的东西：

```
dat$columnname[dat$columnname < 0] = 0 
```

将所有负数替换为 0。想法是您可以使用子集`[]`来提取子集并将值分配给子集。

# ajax - 如何仅在表单字段完全加载后制作 Ext.Ajax.request

> ID：14041940
> 
> 赞同：0
> 
> 时间：2012-12-26T14:25:21.223
> 
> 标签：ajax, extjs

我有一个使用以下代码获取表单值的函数-

```
var formValues = this.myForm.getForm().getValues(); 
```

MyForm 包含一个加载表单的组合框。（组合加载和表单加载有两个单独的请求）

由于这两个请求同时加载，因此上述代码不会返回组合值，因为它们仍在加载。

有没有办法检查是否加载了组合值，然后只发送表单加载的 ajax 请求，以便上面的代码将具有所有表单值？

**编辑：**

LoadComboBox 函数只是用一些存储填充数据。

以下是表单加载的代码 -

```
loadFormGrid: function (){
var allValues = this.myForm.getForm().getValues(); // this do not consider combobox values

Ext.Ajax.request({
      params: {action: 'getList', data : allValues },

      // ... some code
 });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T14:29:47.053

我会做类似的事情：

在组合框加载成功事件时，调用表单的加载方法/发出 ajax 请求以填充表单的字段。

**编辑：** 这就是我的意思：

您实例化 ComboBox 的位置可能如下所示：

```
var combo = new Ext.form.ComboBox({
 store : new someStoreType({
           //add to catch the loaded event
           listeners : {
              'load' : function(store, recs, options){
                      loadFormGrid(); 
                  } 
            }
         })
}); 
```

上面的商店监听器 ( `'load'`) 将在组合框加载时捕获，并将调用该函数来填充/加载表单。

# image-processing - 过拟合时OpenCV haar训练无限循环的解决方案是什么？

> ID：14041943
> 
> 赞同：4
> 
> 时间：2012-12-26T14:25:44.683
> 
> 标签：image-processing, opencv

我在 openCV 2.4.3 中运行 Haar 培训。

1.  我有 10 张负片和大约 30 张正片（我知道数量很少）。
2.  正样本组织在“vec”文件中，负（背景）图像由存储图像路径的文本文件描述。
3.  对于如此少量的图像，存在一个完美的解决方案（所有背景图像都被归类为假，真实样本为真）。

当找到这个完美的解决方案时，openCV 进入`icvGetHaarTrainingData()`函数内部的无限循环。

它想找到级联失败的背景图像，但没有更多这样的图像，所以这个函数`for(;;)`永远卡在循环中。

`icvGetBackgroundImage()`在此循环中调用的函数只是不断从硬盘加载相同的图像，这些图像被级联拒绝。

有人知道我可以应用补丁或错误修复来解决这个问题吗？

我想出的一种可能的解决方法是让`icvGetBackgroundImage()`每个文件只加载一次，因为如果它被级联拒绝一次，它总是会被拒绝。但这是一个错误的调整，因为相同的函数用于生成“vec”文件，`cvCreateSamples()`在这种情况下，我们确实希望它多次加载相同的文件。

第二个可能的修复 - 在 vec 文件中使用负面示例（如正面示例）而不是信息路径格式。这是一种通过不激活有问题的回调来克服无限循环的方法，但结果是导致崩溃的 openCV 错误。当负'vec'文件到达EOF时会发生这种情况。

同时我通过直接更改openCV的源代码并重新编译二进制文件解决了这两个错误（无限循环和崩溃）。我会尽快将我的更改提交给 openCV 委员会。但我不敢相信我是唯一一个遇到这种问题的人......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-02T08:43:04.387

在此处发布固定代码。请注意，原始的 openCV 许可证也适用于它。 [https://github.com/DanielHsH/OpenCV-HaarTraining-BugFix](https://github.com/DanielHsH/OpenCV-HaarTraining-BugFix)

# android - 3 次拍摄后相机崩溃

> ID：14041945
> 
> 赞同：0
> 
> 时间：2012-12-26T14:26:14.557
> 
> 标签：android, crash, camera

在我拍摄 3 张照片后，相机停止响应（崩溃）。如果我尝试重新启动应用程序相机状态 == 锁定并且默认相机也被锁定。示例代码：

```
private Runnable SimpleShot=new Runnable()
{
    @Override
    public void run()
    {
        int i=0;
        while (i<7)
        {
            simpleShot();
            try
            {
                Thread.sleep(1500);
            } catch (InterruptedException e)
            {
                e.printStackTrace();
            }
            i++;
        }

    }
};

private void simpleShot()
{
    //System.gc();
    camera.takePicture(shutterCallback,rawCallback, this);
} 
```

如果我不使用线程相机在第 3 次拍摄后也没有响应。请帮忙。在结束方法 onPictureTaken 中，我调用 camera.startPreview();

LogCat [http://pastebin.com/qDcthyNe](http://pastebin.com/qDcthyNe)

```
 @Override
public void onPictureTaken(byte[] paramArrayOfByte, Camera paramCamera)
{
    if(Utils.isSDAval() && Utils.PrepareAppFolder())
    {
        String path = Utils.APP_FOLDER+"/"+"APP"+"_"+Utils.getDate()+ CameraPrefsActivity.EXT_PIC;
        try
        {
            FileOutputStream os = new FileOutputStream(path);
            os.write(paramArrayOfByte);
            os.close();

        } catch (Exception e)
        {
            Utils.ShowInfo(this,getString(R.string.app_error_io));
            e.printStackTrace();
        }

        Utils.ShowInfo(this,getString(R.string.app_shot_ok));
        SharedPreferences main_pref = PreferenceManager.getDefaultSharedPreferences(this);
        String string_format = main_pref.getString("pref_preview_time","0");

        int timer_val = -1;
        if(string_format.contains("0"))
        {
            timer_val = -1;
        }

        if(string_format.contains("1"))
        {
            timer_val = 1;
        }

        if(string_format.contains("3"))
        {
            timer_val = 3;
        }

        if(string_format.contains("5"))
        {
            timer_val = 5;
        }

        if(string_format.contains("10"))
        {
            timer_val = 10;
        }

        if(timer_val > 0)
        {
            Intent intent = new Intent(this,CameraPreview.class);
            CameraPreview.setupActivity(path,timer_val);
            startActivity(intent);
        }

    }
    else
    {
        Utils.ShowInfo(this,getString(R.string.app_error_sd));
    }

    paramCamera.startPreview();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T14:42:01.667

[这](https://stackoverflow.com/questions/9155359/camera-service-crashes-in-android)家伙有同样的问题，显然是模拟器，尝试在对他有用的真实设备上运行它。

# postgresql - PostgreSQL 不可变函数使用

> ID：14041948
> 
> 赞同：3
> 
> 时间：2012-12-26T14:26:32.447
> 
> 标签：postgresql, immutability

我试图通过说它是不可变的或稳定的来使用函数来固定 posgresql 选择，所以我有一个函数

```
CREATE OR REPLACE FUNCTION get_data(uid uuid)
RETURNS integer AS $$
BEGIN
    RAISE NOTICE 'UUID %', $1;
-- DO SOME STUFF
    RETURN 0;

END;
$$ LANGUAGE plpgsql IMMUTABLE STRICT; 
```

当我这样称呼它时：

```
SELECT get_data('3642e529-b098-4db4-b7e7-6bb62f8dcbba'::uuid)
  FROM table
 WHERE true LIMIT 100; 
```

我有 100 条结果，只提出了一条通知

当我这样称呼它时：

```
SELECT get_data(table.hash)
  FROM table
 WHERE 1 = 1 AND table.hash = '3642e529-b098-4db4-b7e7-6bb62f8dcbba' LIMIT 100; 
```

我有 100 个结果和 100 个通知

*添加条件 (table.hash = '3642e529-b098-4db4-b7e7-6bb62f8dcbba') 以确保 in 参数相同*

*table.hash 是 uuid 类型*

问题是： **那么如何强制 PG 去一些如何缓存函数的结果呢？**（如果可能的话）我只想在第二种情况下提出一个通知（函数调用）......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T14:35:49.330

在您的第一个示例`get_data('3642e529-b098-4db4-b7e7-6bb62f8dcbba'::uuid)`中，它是一个常量，独立于表行，因此它被评估*一次*。

在第二个示例`get_data(table.hash)`中，在功能上取决于列值，因此*每行评估一次*。

如果您想对函数进行一次评估，则它不能依赖于列中的值（当处理多行时）。

* * *

在评论中讨论之后，这里是一个示例，如何在每个哈希中只调用一次函数：

```
SELECT *, get_data(x.hash) AS some_data_once_per_hash
FROM    (
    SELECT hash, count(*) AS ct
    FROM   table
    WHERE  table.hash = '3642e529-b098-4db4-b7e7-6bb62f8dcbba'
    GROUP  BY 1
    ) x 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T14:57:19.247

如果 Erwin 的回答不适合您的情况，您可以创建[物化视图](http://en.wikipedia.org/wiki/Materialized_view)或[触发器](http://www.postgresql.org/docs/current/interactive/trigger-definition.html)来更新*“计算列”*

# c# - 即使所有事件都已触发，WaitOne() 也会永远等待

> ID：14041951
> 
> 赞同：5
> 
> 时间：2012-12-26T14:26:51.083
> 
> 标签：c#, multithreading, waitone

Threaded 应该创建 4 个单独的线程并等待它们中的每一个直到它们完成。每个线程都会休眠一段时间，并且仅当共享的 Mutex opbject 未被另一个线程占用时才终止，然后通过一个事件发出信号表明它已完成（这是我的代码的简化版本，但在同一位置失败）

但是发生的情况是，大多数时候主线程将永远等待 WaitOne() 看似随机的一个。

此外，我不得不注释掉我的代码的某些部分，因为它会导致更多意想不到的行为（即，在每个线程完成后，主线程会以某种方式跳回 for 子句并导致 IndexOutOfBounds）

```
class Threading
{
    static Mutex CM;
    static List<Manga> SharedList;
    static ManualResetEvent CEvent = new ManualResetEvent(false);
    static ManualResetEvent Event1 = new ManualResetEvent(false);
    static ManualResetEvent Event2 = new ManualResetEvent(false);
    static ManualResetEvent Event3 = new ManualResetEvent(false);
    static ManualResetEvent Event4 = new ManualResetEvent(false);

   public List<Manga> ThreadedMangaIndexCrawl(int MaxThreads)
   {
       CM = new Mutex(false);
       SharedList = new List<Manga>();

       ManualResetEvent[] evs = new ManualResetEvent[4];
       evs[0] = Event1;    // Event for t1
       evs[1] = Event2;    // Event for t2
       evs[2] = Event3;    // Event for t3
       evs[3] = Event4;    // Event for t4

       /*for (int i = 0; i < MaxThreads + 1; i++)
       {
           if (i > MaxThreads)
           { break; }
           Thread t = new Thread(() => this.StartIndexCrawling(1,i,i+1,evs[i]));
           t.Start();
       }*/
       int i = 0;
       Thread t1 = new Thread(() => this.StartIndexCrawling(1, i, i + 1, evs[i]));
       t1.Name = "Thread" + i;
       t1.Start();
       i++;
       Thread t2 = new Thread(() => this.StartIndexCrawling(1, i, i + 1, evs[i]));
       t2.Name = "Thread" + i;
       t2.Start();
       i++;
       Thread t3 = new Thread(() => this.StartIndexCrawling(1, i, i + 1, evs[i]));
       t3.Name = "Thread" + i;
       t3.Start();
       i++;
       Thread t4 = new Thread(() => this.StartIndexCrawling(1, i, i + 1, evs[i]));
       t4.Name = "Thread" + i;
       t4.Start();

      /* foreach (var e in evs)
       { 
           e.WaitOne(); 

       }*/

       evs[0].WaitOne();
       evs[1].WaitOne();
       evs[2].WaitOne();
       evs[3].WaitOne(); 

       return SharedList;
   }

   void StartIndexCrawling(int Target, int Start, int End, ManualResetEvent E)
   {
       Thread.Sleep(1000);
       CM.WaitOne();
       CM.ReleaseMutex();
       E.Set();
   }
} 
```

任何帮助都会很棒

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-26T14:41:54.450

最有可能的是，所有四个线程都将执行：

```
this.StartIndexCrawling(1, 3, 3 + 1, evs[4]); 
```

这与您使用闭包有关。所有四个线程都将绑定到该变量`i`，并在执行代码后使用它所具有的任何值（而不是`Thread`创建对象时的值）。

如果所有四个线程都使用相同的值，则您的代码不太可能工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T14:46:15.390

见科多的回答。
以下是您应该采取的措施来解决它：

```
 int i = 0;
   Thread t1 = new Thread(() => this.StartIndexCrawling(1, 0, 1, Event1));
   t1.Name = "Thread" + i;
   t1.Start();
   i++;
   Thread t2 = new Thread(() => this.StartIndexCrawling(1, 1, 2, Event2));
   t2.Name = "Thread" + i;
   t2.Start();
   i++;
   Thread t3 = new Thread(() => this.StartIndexCrawling(1, 2, 3, Event3));
   t3.Name = "Thread" + i;
   t3.Start();
   i++;
   Thread t4 = new Thread(() => this.StartIndexCrawling(1, 3, 4, Event4));
   t4.Name = "Thread" + i;
   t4.Start(); 
```

# php - 用户文件上传存储的最佳实践

> ID：14041953
> 
> 赞同：4
> 
> 时间：2012-12-26T14:27:11.590
> 
> 标签：php, mysql, database-design, file-upload

我们只是在内部建立了一个基于 PHP/MySQL 的开源软件解决方案，几乎所有的都按照我们想要的方式工作，但是文件上传并不是我们想要的。目前，它处理“上传”的唯一方法是存储/显示远程 URL，但我们需要将内容保留在内部。

是否有关于如何存储上传的用户文件的最佳实践？它们应该存储在文件系统还是数据库中？每种方法的优缺点是什么？鉴于它已经使用 PHP 和 MySQL，是否更容易实现？有没有更好的混合方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-26T14:35:19.150

我通常会做的事情的广泛概述：

1.  将文件本身存储在文件系统中，而不是数据库中。数据库擅长存储数据，文件系统擅长存储文件。最好将每一个用于他们擅长的事情，即使你可以做不同的事情（我的观点）。

2.  将文件存储在 Web 根目录之外。这将使控制对它们的访问变得更加容易。

3.  由于它们位于您的 Web 根目录之外，因此您现在无法直接链接到这些文件，因此请创建一个脚本来提供这些文件本身。您可以将某种文件标识符从数据库传递到脚本，脚本会在数据库中查找文件的实际路径，然后提供文件的内容。如有必要，该脚本还可以进行用户访问检查。

# java - android simplexml解析具有动态名称的元素

> ID：14041960
> 
> 赞同：0
> 
> 时间：2012-12-26T14:27:33.773
> 
> 标签：java, android, xml, dynamic, simple-framework

我需要一些建议如何使用 java simplexml lib 解析这个 xml。问题是我不知道在这个 xml 元素中有多少项目。

```
<Playoffs>
<PlayoffStatus>Potential Brackets</PlayoffStatus>
<LConference>Western Conference</LConference>
<RConference>Eastern Conference</RConference>
<LTeam1>Clippers (1)</LTeam1>
<LTeam2>Nuggets (8)</LTeam2>
<LTeam3>Grizzlies (4)</LTeam3>
<LTeam4>Warriors (5)</LTeam4>
<LTeam5>Spurs (3)</LTeam5>
<RTeam1>Heat (1)</RTeam1>
<RTeam2>Celtics (8)</RTeam2>
<RTeam3>Pacers (4)</RTeam3>
<RTeam4>Bulls (5)</RTeam4>
<RTeam5>Hawks (3)</RTeam5>
    ....... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T10:01:01.700

您可以使用 Converter 对象或 @ElementListUnion 接口。有关示例，请参见此处。

[https://simple.svn.sourceforge.net/svnroot/simple/trunk/download/stream/src/test/java/org/simpleframework/xml/core/UnionInlineListWitinPathTest.java](https://simple.svn.sourceforge.net/svnroot/simple/trunk/download/stream/src/test/java/org/simpleframework/xml/core/UnionInlineListWitinPathTest.java)

[https://simple.svn.sourceforge.net/svnroot/simple/trunk/download/stream/src/test/java/org/simpleframework/xml/convert/HideEnclosureConverterTest.java](https://simple.svn.sourceforge.net/svnroot/simple/trunk/download/stream/src/test/java/org/simpleframework/xml/convert/HideEnclosingConverterTest.java)

# gcc - 为什么使用 gcc 编译汇编代码时会出现操作数类型不匹配错误？

> ID：14041964
> 
> 赞同：1
> 
> 时间：2012-12-26T14:27:56.927
> 
> 标签：gcc, assembly, g++

如果给定角度，以下代码用于计算`sin`和`cos`值。为了尽可能快地计算这些函数，采用了汇编代码实现。

```
#include <stdio.h>

float sinx( float degree ) {
    float result, two_right_angles = 180.0f ;
    __asm__ __volatile__ ( "fld %1;"
                            "fld %2;"
                            "fldpi;"
                            "fmul;"
                            "fdiv;"
                            "fsin;"
                            "fstp %0;" 
                            : "=g" (result) 
                            : "g"(two_right_angles), "g" (degree)
    ) ;
    return result ;
}

float cosx( float degree ) {
    float result, two_right_angles = 180.0f, radians ;
    __asm__ __volatile__ ( "fld %1;"
                            "fld %2;"
                            "fldpi;"
                            "fmul;"
                            "fdiv;"
                            "fstp %0;" 
                            : "=g" (radians) 
                            : "g"(two_right_angles), "g" (degree)
    ) ;
    __asm__ __volatile__ ( "fld %1;"
                            "fcos;"
                            "fstp %0;" : "=g" (result) : "g" (radians)
    ) ;
    return result ;
}

float square_root( float val ) {
    float result ;
    __asm__ __volatile__ ( "fld %1;"
                            "fsqrt;"
                            "fstp %0;" 
                            : "=g" (result) 
                            : "g" (val)
    ) ;
    return result ;
}

int main() {
    float theta ;
    printf( "Enter theta in degrees : " ) ;
    scanf( "%f", &theta ) ;

    printf( "sinx(%f) = %f\n", theta, sinx( theta ) );
    printf( "cosx(%f) = %f\n", theta, cosx( theta ) );
    printf( "square_root(%f) = %f\n", theta, square_root( theta ) ) ;

    return 0 ;
} 
```

上面的代码来自[这里](http://www.codeproject.com/Articles/15971/Using-Inline-Assembly-in-C-C)，我正在尝试用 gcc 编译上面的代码：

```
g++ -Wall -fexceptions  -g     -c /filename.cpp 
```

但是，它失败了，并给出了以下错误消息：

```
Error: operand type mismatch for `fstp'|
Error: operand type mismatch for `fstp'| 
```

我想知道为什么编译会失败以及如何成功编译它们。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T15:22:10.333

该[手册](http://gcc.gnu.org/onlinedocs/gcc/Simple-Constraints.html)说关于`g`约束：`Any register, memory or immediate integer operand is allowed, except for registers that are not general registers`。编译器可能选择了一个`fstp`不接受但符合约束的寄存器。

顺便说一句，这是相当可怕的内联汇编。

另请注意，仅仅因为某些东西在 asm 中，它不一定会更快。编译器非常有能力优化事物，它也做得更好。您可能对`-ffast-math`开关感兴趣。从`return sin(degree * M_PI / 180);`编译器生成这段代码：

```
fldl    .LC0
fmuls   4(%esp)
fsin
ret 
```

# facebook - Facebook 图片 URL 无效（图形 API）

> ID：14041965
> 
> 赞同：2
> 
> 时间：2012-12-26T14:28:07.273
> 
> 标签：facebook, image, facebook-graph-api

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T14:49:58.987

您可以使用此 url 来获取任何使用他/她的 FB 用户 ID 的用户的个人资料图片

```
https://graph.facebook.com/<fb USER ID>/picture?type=large 
```

# android - Android SQLite 查询：WHERE 子句的问题

> ID：14041970
> 
> 赞同：1
> 
> 时间：2012-12-26T14:28:27.760
> 
> 标签：android, where-clause, sqlite

请让我知道为什么我的 where 子句不起作用。我尝试使用查询而不是 rawquery，但没有运气。

```
 try {
        String categoryex = "NAME";
        DBHelper dbHelper = new DBHelper(this.getApplicationContext());
        MyData = dbHelper.getWritableDatabase();

        Cursor c = MyData.rawQuery("SELECT * FROM " + tableName + where Category = '+categoryex'" , null);
        if (c != null ) {
            if  (c.moveToFirst()) {
                do {
                    String firstName = c.getString(c.getColumnIndex("Category"));
                    String age = c.getString(c.getColumnIndex("Text_Data"));
                    results.add(  firstName + " Directions: " + age);
                }while (c.moveToNext());
            } 
        }           
    } catch (SQLiteException se ) {
        Log.e(getClass().getSimpleName(), "Could not create or Open the database");
    } finally {
        if (MyData != null) 
            MyData.execSQL("DELETE FROM " + tableName);
            MyData.close();
    } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-26T14:46:07.977

我认为您应该`rawQuery`以这种形式使用：

```
rawQuery("SELECT * FROM ? where Category = ?", new String[] {tableName, categoryex}); 
```

我认为这种方式更安全。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-26T14:31:04.343

尝试...（您之前遗漏了双引号`where`。

```
Cursor c = MyData.rawQuery("SELECT * FROM " + tableName + " where Category = '" +categoryex + "'" , null); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-26T14:33:02.627

你的报价被窃听了：

```
Cursor c = MyData.rawQuery("SELECT * FROM " + tableName + " where Category = '" + categoryex + "'" , null); 
```

您还应该阅读[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)攻击。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-11T10:54:43.510

如果您使用这种技术而不是 rawQuery，它会更容易，它的简单方法是相应地更改您的表名、列和 where 条件。

```
 public ArrayList<Invitees> getGroupMembers(String group_name) {

    ArrayList<Invitees> contacts = new ArrayList<>();

    SQLiteDatabase db = this.getReadableDatabase();

    String[] projection = {COLUMN_CONTACT, COLUMN_PHONE_NUMBER};

    String selection = COLUMN_GROUP_NAME + "=?";

    String[] selectionArgs = {group_name};

    Cursor cursor = db.query(GROUPS_TABLE_NAME, projection, selection, selectionArgs, null, null, null);

    if (cursor.moveToFirst()) {

        do {
            Invitees invitees = new Invitees();

            invitees.setUserName(cursor.getString(cursor.getColumnIndexOrThrow(COLUMN_CONTACT)));

            invitees.setInviteePhone(cursor.getString(cursor.getColumnIndexOrThrow(COLUMN_PHONE_NUMBER)));

            contacts.add(invitees);

        } while (cursor.moveToNext());

    }
    return contacts;
} 
```

# javascript - Parse.com Cloud Code - saveAll Request timed out

> ID：14041972
> 
> 赞同：2
> 
> 时间：2012-12-26T14:28:41.017
> 
> 标签：javascript, parse-platform

I'm trying to save a collection of objects from a Cloud Code function.

After 30-40 objects I get a time out error. My code looks like this:

```
Parse.Cloud.define("saveInBackground", function (request, response) {
    console.log("saveInBackground begin");

    var objectsToSave = [];

    for (var i = request.params.collectionToSave.length - 1; i >= 0; i--) {
        objectsToSave.push(new LikedObject(request.params.collectionToSave[i])); 
    };

    Parse.Object.saveAll(objectsToSave, {
        success: function(list) {
            // All the objects were saved.
            if (response) {
                response.success(list);
            };

            console.log("saveInBackground success");
        },
        error: function(model, error) {
            // An error occurred while saving one of the objects.
            if (response) {
                response.error(error);
            };

            console.log("saveInBackground error: " + error.message);
        }
    });

    console.log("saveInBackground end");
}); 
```

Can I do something else in order to save a bunch of objects?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-29T17:17:57.147

根据对象的大小，您可以尝试以 20-30 个为一组进行保存。这是必需的，因为`saveAll()`它试图将您提供的所有对象上传到服务器。这是您如何执行此操作的示例代码：

```
var result = true;
for (var i = request.params.collectionToSave.length - 1; i >= 0; i--) {
    objectsToSave.push(new LikedObject(request.params.collectionToSave[i])); 
    if (i % 10 == 0) {
        result = saveObjects(objectsToSave);
        objectsToSave.length = 0;
    }
};
if (result == true) {
    console.log("saveInBackground success");
}

function saveObjects(objects) {

    Parse.Object.saveAll(...);
    ...
} 
```

# excel - 根据重复的名称列表在 Excel/VBA 中创建查找表

> ID：14041977
> 
> 赞同：1
> 
> 时间：2012-12-26T14:29:01.643
> 
> 标签：excel, vba

我在一张表中有一个 Excel 中的名称和实例列表，在另一张表中有一个列表名称和用户 ID。我想在实例表上创建一个引用名称和用户 ID 的列，但是有些用户的名称相同。对于 1:1 匹配，我使用 vlookup 来获取相应的 ID，但这不适用于多个实例。在多：1 关系的情况下，我可以做些什么来创建一个显示与该名称关联的每个可能 ID 的列？例子：

```
User Name:              User ID:
Rusty McShackleford     1234560
Rusty McShackleford     1234570
Rusty McShackleford     1234580
Rusty McShackleford     1230110
Zap Brannigan           0000001 
```

在上面的示例中，我可以将 Zap 匹配到一个用户 ID，因为只有一个实例，我如何将 Rusty（或所有 Rusty 的）匹配到一个实例。谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T14:46:40.773

vlookup() 需要一组唯一的值。在您的特定情况下，我会考虑在 user_id 上运行 vlookup() ，因为这似乎 a 是标识每个用户的唯一值。

在这方面：

1.  创建一个新选项卡（工作表）
2.  在 A 列中，复制并粘贴所有“user_id”。确保删除重复项。
3.  B 列->“实例”使用 vlookup()
4.  C列->“名称”使用 vlookup()
5.  现在要获取所有“生锈”的列列表，只需从 AZ 对列 c（名称）进行排序。如有必要，重新排列列。

vlookup() 的一些提醒。将范围查找指定为 FALSE。确保使用绝对引用或者更好——使用表格作为参考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T19:41:56.690

电子表格布局：

`A2:A15`名称
`B2:B15`ID
`D2` `{=INDEX($A$2:$A$15;MATCH(0;COUNTIF($D$1:D1;$A$2:$A$15);0))}` 数组公式，在公式窗口中按 Ctrl-Shift-Enter 输入，大括号由 Excel 插入，而不是由用户插入。
中列出的唯一名称`A2:A15`，应复制下来。该列可以隐藏。

`E2`: 带有下拉列表的单元格，条目是从 : 列中的名称列表中选择的`D`
`F3`，`=F2+MATCH($E$2;OFFSET($A$1;F2+1;0):$A$15;0)`向下复制。`F2`是一个空单元格。
在 A 列中查找匹配名称的行。F 列可以隐藏。
`E3`：`=OFFSET($A$1;F3;1)` 选择特定名称的 ID。公式将被复制下来。

电子表格示例：[http ://www.bumpclub.ee/~jyri_r/Excel/All_IDs_for_a_name.xls](http://www.bumpclub.ee/~jyri_r/Excel/All_IDs_for_a_name.xls)

# security - 如何制作 IOS 应用 *需要* DNSSec？

> ID：14041980
> 
> 赞同：5
> 
> 时间：2012-12-25T17:24:50.790
> 
> 标签：security, ios, networking, iphone

我需要确保我的 IOS 应用程序在连接到给定服务器时需要 DNSSec。如何确保 DNS 调用始终使用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T10:13:30.017

您必须将 DNS 库合并到您的源代码中。尝试使用 libunbound。使用 libunbound，您可以验证 DNSSEC 答案。有了它，您可以尝试使用 DANE 来保护您的 SSL 证书。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-02-27T15:00:38.983

[作为dnssd 框架](https://developer.apple.com/documentation/dnssd)的一部分，DNSSEC 在 iOS 10+ 的操作系统级别上可用。[在使用DNSServiceQueryRecord](https://developer.apple.com/documentation/dnssd/1804747-dnsservicequeryrecord)查询 DNS 时，您可以使用[kDNSServiceFlagsValidate](https://developer.apple.com/documentation/dnssd/1823436-anonymous/kdnsserviceflagsvalidate?language=occ)标志来使用它。

如果你想保护你的 TLS 连接，你必须在[URLSessions](https://developer.apple.com/documentation/foundation/urlsessiondelegate/1409308-urlsession) `urlSession(_:didReceive:completionHandler:)`方法中实现 dns 查询。

但是，您应该知道那里有[不支持 DNSSEC](https://www.opendns.com/about/innovations/dnscrypt/)的公共 dns 服务器（例如 OpenDNS） 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T06:19:35.360

由于[DNSSEC](https://www.rfc-editor.org/rfc/rfc4033)在操作系统级别不可用，我认为您拥有的最佳选择是通过比操作系统更仔细地检查您的 SSL 服务器证书来保护您的应用程序。有关详细信息，请参阅[此问题](https://stackoverflow.com/questions/5103568/how-to-retrieve-the-ssl-server-certificate-in-ios)。我建议将您希望收到的 CA 证书嵌入到您的应用程序中，并将其逐字节与信任链的根进行比较。

这称为[证书固定](http://www.thoughtcrime.org/blog/authenticity-is-broken-in-ssl-but-your-app-ha/)。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-26T21:06:06.367

DNSSec 位于操作系统级别。您可以在应用程序中控制的唯一内容是连接到服务器的方法。只需在所有通信中使用[安全套接字层 - SSL 。](http://en.wikipedia.org/wiki/Secure_Sockets_Layer)

# powershell - 调用命令提升问题

> ID：14041982
> 
> 赞同：0
> 
> 时间：2012-12-26T14:29:28.300
> 
> 标签：powershell, powershell-2.0

我正在尝试使用用户凭据的答案文件运行 Invoke-Command，但我似乎无法让它完成运行。我使用的是本地管理员帐户，因此域上没有任何内容。这是我所拥有的和错误：

```
$Username = "$Env:Computername\admin"
$Pass = ConvertTo-SecureString "12345" -AsPlainText -Force
$User = New-Object Management.Automation.PSCredential($UserName, $Pass)

Invoke-Command -ComputerName $Env:Computername -Credential $User -ScriptBlock { 
    $Path = 'HKLM:\SOFTWARE\Microsoft\Windows\CurrentVersion\Policies\System'
    $Name = 'DontDisplayLastUserName'
    Set-ItemProperty -path $Path -name $Name -value 0
} 
```

和错误：

```
[computer] Connecting to remote server failed with the following error message : WinRM cannot process the request. The following error occured while using Kerberos authentication: There are curren
tly no logon servers available to service the logon request. 
```

任何帮助是极大的赞赏。

工作解决方案：

```
$Username = "$Env:Computername\admin"
$Pass = ConvertTo-SecureString "12345" -AsPlainText -Force
$User = New-Object Management.Automation.PSCredential($UserName, $Pass)

Invoke-Command -ComputerName localhost -Credential $User -ScriptBlock { 
    $Path = 'HKLM:\SOFTWARE\Microsoft\Windows\CurrentVersion\Policies\System'
    $Name = 'DontDisplayLastUserName'
    Set-ItemProperty -path $Path -name $Name -value 0
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T20:16:25.367

我终于弄清楚了问题，随机打了我。需要更改以下行。

前：

```
Invoke-Command -ComputerName $Env:Computername 
```

后：

```
Invoke-Command -ComputerName localhost 
```

如果没有 localhost，它会将其视为远程计算机，并且不允许它访问。

# iphone - 解析（枚举）NSMutableArray 的最佳（最快）方法。

> ID：14041986
> 
> 赞同：0
> 
> 时间：2012-12-26T14:29:36.463
> 
> 标签：iphone, objective-c, nsmutablearray, nsarray

我得提问。

假设你有一个数组`NSMutableArray myArray;`并且它有 nome 个对象。

我可以说：

```
for (NSObject* anObject in myArray){
  //bla-bla
} 
```

我也可以说：

```
for (int i = 0; i < myArray.count-1; i ++){
  //bla-bla
} 
```

1.  两种方法有什么区别？

2.  哪种方式更快？

任何建议（或链接，或 tut）表示赞赏。

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T14:33:15.607

两个版本不应该有太大的不同，尤其是不明显（除了第二个代码没有迭代所有项目）。如果速度是您想要的一切，您可以使用`enumerateObjectsWithOptions:usingBlock:`并传递`NSEnumerationConcurrent`选项同时枚举数组。但是，除此之外，使用两个版本中的任何一个都不会产生影响，因此您应该使用您更喜欢的任何版本。第一个版本的类型密集度肯定较低，并且也适用于其他基础容器类型（`NSSet`, `NSCountedSet`, `NSDictionary`）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T14:57:57.117

在这里查看这篇很棒的帖子：

[检查 NSArray 枚举性能](http://darkdust.net/writings/objective-c/nsarray-enumeration-performance)

它准确地显示了哪些方法最快，以及为什么。

# javascript - 如何使 iFrame 窗口滚动溢出：隐藏？

> ID：14041990
> 
> 赞同：2
> 
> 时间：2012-12-26T14:30:06.540
> 
> 标签：javascript, jquery, css, firefox, joomla1.5

我想让 Joomla 1.5 中模态框的 iframe 窗口滚动，但不显示滚动条。如果我`overflow:hidden`通过 css 设置它可以在 Chrome 中工作，但不能在 Firefox 中！有谁知道我该怎么做？有什么诀窍吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T21:20:48.117

`Overflow: hidden`应该给出容器无法滚动的外观（即隐藏滚动条。在 Chrome 中适用于您的事实只是 Chrome 的一个*怪癖*，而不是标准。我的建议是将滚动条留在 iframe 上但隐藏它使用浮动 div 或父容器。例如，将 iframe 放在 div 内。强制 div 宽度为 18px（滚动条的估计宽度）小于 iframe 的宽度溢出：隐藏。框架将继续使用鼠标滚轮滚动，但您将看不到滚动条。

[这里的工作示例](http://jsfiddle.net/nLG85/)。

html:

```
<div><iframe src="http://afakesite.com/"></iframe></div>​ 
```

CSS：

```
iframe {
    width: 200px;
    border: none;
}
div {
    width: 182px;
    border: solid 1px black;
    overflow: hidden;
}​ 
```

# sql - SQL递归逻辑

> ID：14041991
> 
> 赞同：6
> 
> 时间：2012-12-26T14:30:09.337
> 
> 标签：sql, sql-server, recursion, common-table-expression

我有一种情况，我需要配置现有的客户端数据来解决我们的应用程序没有正确更新表中的 ID 而应该正确更新的问题。

这是场景。我们有一个父表，可以在其中插入有效替换现有行的行；替换可以是递归的。我们还有一个子表，它有一个指向父表的字段。在现有数据中，子表可能指向已被替换的行，我需要更正它。但是，我不能简单地将每一行更新为替换行，因为*该*行也可能已被替换，我需要反映最新的行。

我试图找到一种方法来编写一个可以为我完成此任务的 CTE，但我正在努力寻找一个能够找到我真正想要的东西的查询。这是我正在使用的表格的示例；'ShouldBe' 列是我希望我的更新查询最终得到的结果，同时考虑到某些行的递归替换。

```
DECLARE @parent TABLE (SampleID int, 
                   SampleIDReplace int,
                   GroupID char(1))

INSERT INTO @parent (SampleID, SampleIDReplace, GroupID)
VALUES (1, -1, 'A'), (2, 1, 'A'), (3, -1, 'A'), 
       (4, -1, 'A'), (5, 4, 'A'), (6, 5, 'A'),
       (7, -1, 'B'), (8, 7, 'B'), (9, 8, 'B')

DECLARE @child TABLE (ChildID int, ParentID int)
INSERT INTO @child (ChildID, ParentID)
VALUES (1, 4), (2, 7), (3, 1), (4, 3) 
```

应用更新脚本后，子表中的所需结果：

```
ChildID     ParentID    ParentID_ShouldBe
1           4           6 (4 replaced by 5, 5 replaced by 6)
2           7           9 (7 replaced by 8, 8 replaced by 9)
3           1           2 (1 replaced by 2)
4           3           3 (unchanged, never replaced) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T15:08:11.723

以下返回您正在寻找的内容：

```
with cte as (
    select sampleid, sampleidreplace, 1 as num
    from @parent
    where sampleidreplace <> -1
    union all
    select p.sampleid, cte.sampleidreplace, cte.num+1
    from @parent p join
         cte
         on p.sampleidreplace = cte.sampleId
)
select c.*, coalesce(p.sampleid, c.parentid)
from @child c left outer join
     (select ROW_NUMBER() over (partition by sampleidreplace order by num desc) as seqnum, *
      from cte
     ) p
     on c.ParentID = p.SampleIDReplace and p.seqnum = 1 
```

递归部分跟踪每个对应关系（4-->5、4-->6）。添加数是“世代”计数。我们实际上想要最后一代。这是通过使用`row_number()`函数来识别的，按 num 以降序排列 - 因此`p.seqnum = 1`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T15:10:10.300

好的，所以我花了一段时间，可能有更好的方法来做到这一点，但这里有一个选择。

```
DECLARE @parent TABLE (SampleID int, 
                   SampleIDReplace int,
                   GroupID char(1))

INSERT INTO @parent (SampleID, SampleIDReplace, GroupID)
VALUES (1, -1, 'A'), (2, 1, 'A'), (3, -1, 'A'), 
       (4, -1, 'A'), (5, 4, 'A'), (6, 5, 'A'),
       (7, -1, 'B'), (8, 7, 'B'), (9, 8, 'B')

DECLARE @child TABLE (ChildID int, ParentID int)
INSERT INTO @child (ChildID, ParentID)
VALUES (1, 4), (2, 7), (3, 1), (4, 3)

;WITH RecursiveParent1 AS
(
    SELECT SampleIDReplace, SampleID, 1 RecursionLevel
    FROM @parent
    WHERE SampleIDReplace != -1
    UNION ALL
    SELECT A.SampleIDReplace, B.SampleID, RecursionLevel + 1
    FROM RecursiveParent1 A
    INNER JOIN @parent B
        ON A.SampleId = B.SampleIDReplace
),RecursiveParent2 AS
(
    SELECT  *, 
            ROW_NUMBER() OVER(PARTITION BY SampleIdReplace ORDER BY RecursionLevel DESC) RN
    FROM RecursiveParent1
)
SELECT A.ChildID, ISNULL(B.ParentID,A.ParentID) ParentID
FROM @child A
LEFT JOIN ( SELECT SampleIDReplace, SampleID ParentID 
            FROM RecursiveParent2
            WHERE RN = 1) B
    ON A.ParentID = B.SampleIDReplace
OPTION(MAXRECURSION 500) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T15:08:49.010

我有一个迭代 SQL 循环，我认为它的排序如下：

```
WHILE EXISTS (SELECT * FROM #child C INNER JOIN #parent P ON C.ParentID = P.SampleIDReplace WHERE P.SampleIDReplace > -1)
BEGIN
    UPDATE #child
    SET ParentID = SampleID
    FROM #parent 
    WHERE #child.ParentID = SampleIDReplace
END 
```

基本上，while条件是比较子表中父ID列的内容，看父表的SampleIDReplace列是否有匹配值。如果有，它会去获取该记录的 SampleID。只有当连接导致每个 SampleIDReplace 都为 -1 时，它才会停止，这意味着我们无事可做。

在您的样本数据上，上述结果产生了预期的输出。

请注意，我必须在此处使用临时表而不是表变量，以便在循环中可以访问该表。如果您必须使用表变量，则需要做更多的手术。

显然，如果您有深层替换层次结构，那么您将进行大量更新，这可能是在针对生产数据库执行查询时需要考虑的问题。

# stored-procedures - 如何连接 Active Reports 7 以使用存储过程？

> ID：14041993
> 
> 赞同：0
> 
> 时间：2012-12-26T14:30:18.237
> 
> 标签：stored-procedures, activereports

如何连接 Active Reports 7 以使用存储过程？我已经编写了存储过程，但是如何连接到它们以使用表中的数据，以便我的报告是动态的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T07:12:31.707

ActiveReports 7 有两种不同的报表类型，使用存储过程的方式略有不同。

如果您使用的是 SectionReport（即 ActiveReports 6 中可用的传统形式的报告），那么您可以通过查询中的 EXEC SQL 命令执行存储过程。铁

`EXEC sp_mysp '<%myparameter%>'`

在 PageReport（即 ActiveReports 7 中引入的新报表类型）中，您需要将命令类型设置为存储过程，然后将查询字符串设置为存储过程的名称。如果您有任何参数要传递，那么您可以通过 DataSet 的参数页面传递它们。

在 PageReports 中，当使用基于 ADO.NET 的数据提供程序（SQL Server、OLE DB 和 Oracle 连接类型）时，数据源中的对象、数据集和 Page Reports 中的参数之间存在一对一的关联，并且您可以在相关的 ADO.NET *Connection、*Command 和 *Parameter 类中看到。因此，如果您对它们的工作方式有疑问，您可以看看如何使用 ADO.NET 类编写相同的代码。

# sql-server - 带有 WHERE 子句 NOT NULL 的 DateDiff

> ID：14041995
> 
> 赞同：0
> 
> 时间：2012-12-26T14:30:25.303
> 
> 标签：sql-server, sql-server-2008

我试图获取表中两个值之间的时间差并消除所有 NULL。

```
SELECT NumberOfMinutes =
   DATEDIFF(millisecond, tbl_hugo_game.time_start, tbl_hugo_game.time_end)
FROM tbl_hugo_game 
WHERE numberofminutes <> NULL 
ORDER BY numberofminutes ASC 
```

没有`WHERE`-clause 它工作正常，否则：

> 消息 207，级别 16，状态 1，第 3 行无效的列名称“分钟数”。

怎么了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T14:33:43.543

您不能在`where`子句中使用列别名。

但是，您可以将具有别名的查询作为另一个查询的源，如下所示：

```
select * from (
  select DATEDIFF(...) AS NumberOfMinutes 
  FROM tbl_hugo_game) source
where NumberOfMinutes is not null 
order by NumberOfMinutes asc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T15:06:31.627

这个 SELECT 语句的逻辑处理顺序是

一种）`FROM tbl_hugo_game`

b)`WHERE numberofminutes <> NULL`

C）

```
SELECT
DATEDIFF(millisecond ,tbl_hugo_game.time_start,tbl_hugo_game.time_end) AS NumberOfMinutes 
```

d)`ORDER BY numberofminutes ASC`

因此，步骤 c)（带有 DATEDIFF ... AS NumberOfMinutes 计算字段的 SELECT 子句）在步骤 b)（WHERE 子句）之后和步骤 d)（ORDER BY 子句）之前处理。这就是为什么步骤 c) (DATEDIFF ... AS NumberOfMinutes) 中的计算域不能用于 WHERE 子句（步骤 b）但可以用于 ORDER BY 子句（步骤 d）的原因。

参考资料：[SELECT (Transact-SQL) # SELECT语句的逻辑处理顺序](http://msdn.microsoft.com/en-us/library/ms189499.aspx)

> 以下步骤显示了 SELECT 语句的逻辑处理顺序或绑定顺序。此顺序确定一个步骤中定义的对象何时可用于后续步骤中的子句。例如，如果查询处理器可以绑定（访问）在 FROM 子句中定义的表或视图，则这些对象及其列可用于所有后续步骤。相反，因为 SELECT 子句是第 8 步，所以在该子句中定义的任何列别名或派生列都不能被前面的子句引用。但是，它们可以被后续子句引用，例如 ORDER BY 子句。请注意，语句的实际物理执行由查询处理器确定，并且顺序可能与此列表不同。
> 
> 1.  从
> 2.  在
> 3.  加入
> 4.  在哪里
> 5.  通过...分组
> 6.  WITH CUBE 或 WITH ROLLUP
> 7.  拥有
> 8.  选择
> 9.  清楚的
> 10.  订购方式
> 11.  最佳

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T16:01:11.087

Where 子句无法访问列别名。对于您的情况来说，重写查询（不使用子选择）会更好，更简单，如下所示：

```
SELECT NumberOfMinutes =
DATEDIFF(millisecond, tbl_hugo_game.time_start, tbl_hugo_game.time_end)
FROM tbl_hugo_game 
WHERE tbl_hugo_game.time_start  IS NOT NULL AND tbl_hugo_game.time_end IS NOT NULL
ORDER BY numberofminutes ASC 
```

# java - 使用java加密和解密密码使用什么API和算法

> ID：14041997
> 
> 赞同：5
> 
> 时间：2012-12-26T14:30:38.417
> 
> 标签：java, security, encryption, passwords, password-encryption

我目前正在使用 Java 创建应用程序，我用 Java 搜索了密码加密，但结果如此巨大，我感到不知所措。如何使用 Java 加密和解密密码？加密和解密密码的最佳实践是什么？我猜 MD5 不是一种方法，因为它是一种单向哈希。我使用 struts2 作为我的框架，想知道他们是否提供密码加密

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-26T14:51:54.037

**更新**：

试试 JBCrypt：

```
String password = "MyPassword123";
String hashed = BCrypt.hashpw(password, BCrypt.gensalt(12));
System.out.println(hashed);  // $2a$12$QBx3/kI1SAfwBDFOJK1xNOXK8R2yC7vt2yeIYusaqOisYbxTNFiMy 
```

从这里下载[jBCrypt-0.3](http://www.mindrot.org/projects/jBCrypt/#download)，查看 README 文件了解更多详情。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-26T14:42:55.617

另外我不建议使用 MD5，因为它已经坏了。而不是你可以使用 SHA512 它是安全的散列方法，你可以使用[MessageDigest](http://docs.oracle.com/javase/6/docs/api/java/security/MessageDigest.html)。下面是我在我的一个项目中使用的代码，它运行良好

```
public String encode(String password, String saltKey)
        throws NoSuchAlgorithmException, IOException {

    String encodedPassword = null;
    byte[] salt = base64ToByte(saltKey);

    MessageDigest digest = MessageDigest.getInstance("SHA-512");
    digest.reset();
    digest.update(salt);

    byte[] btPass = digest.digest(password.getBytes("UTF-8"));
    for (int i = 0; i < ITERATION_COUNT; i++) {
        digest.reset();
        btPass = digest.digest(btPass);
    }

    encodedPassword = byteToBase64(btPass);
    return encodedPassword;
}

private byte[] base64ToByte(String str) throws IOException {
    BASE64Decoder decoder = new BASE64Decoder();
    byte[] returnbyteArray = decoder.decodeBuffer(str);
    if (log.isDebugEnabled()) {
        log.debug("base64ToByte(String) - end");
    }
    return returnbyteArray;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-02T12:19:52.550

好吧，据我所知，我们有一些算法来保护密码。

1.  MD5 -
2.  PBKDF2 -
3.  沙 -
4.  BCrypt 和 SCrypt -

其中 BCrypt 和 SCrypt 是更安全的密码安全方式。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-26T14:52:53.273

有一个很好的项目致力于用 Java 解决这个问题。本质上，它提供了两种加密用户密码的方式： - MD5
- SHA1

看一下链接： [jasypt](http://www.jasypt.org/howtoencryptuserpasswords.html)

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-12-26T14:34:39.840

对我来说，我认为 MD5 是最好的方法，如果用户忘记密码，您无需解密密码，您可以给他一种生成新密码的方法，登录时您可以只比较现有的哈希在数据库中和用户输入的

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2012-12-26T14:42:33.390

**始终使用** ***单向哈希算法。***

我会说 GO 与 MD5 散列。在数据库中存储密码时，使用 MD5 散列。因此，如果您的密码为**pass**，在散列后它将被存储为*asjasdfklasdjf789asdfalsdfashdflasdf*（32 个字符）。

**正如您所说，您还想解密密码。** ***我会说不要那样做***。在对照数据库检查密码时，您可以做的是散列密码并将该字符串与您在数据库中的字符串进行比较。

```
if (DoHashMD5(myPass).equals(rs.getString(2))) {
    System.out.print("You are registered user!!!");
} else {
    System.out.print("Invalid user!!!");
} 
```

这`rs.getString(2)`将是您的查询参数。