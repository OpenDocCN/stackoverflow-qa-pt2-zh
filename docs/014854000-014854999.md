# StackOverflow 问答 14854000-14854999

# c# - 使用 TPL 处理异常

> ID：14854004
> 
> 赞同：9
> 
> 时间：2013-02-13T12:50:53.620
> 
> 标签：c#, task-parallel-library

使用 TPL/Tasks 我可以使用内部 try/catch 语句执行异常处理：

```
 Task.Factory.StartNew(
    ()=>
      {
        try
        {
          // Do stuff
        }
        catch
        {
          // Handle exception
        }
      }); 
```

或使用 ContinueWith，如下所示：

```
Task.Factory.StartNew(
    ()=>
      {
          // Do stuff
      }).ContinueWith(
        task =>
        {
          if(task.Exception != null)
            // Handle exception
        }); 
```

更推荐使用哪种方法？各自的优缺点是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T14:50:27.187

这在很大程度上取决于您的设计需求。需要考虑的一些事项：

**在抛出异常的任务中捕获异常**

*   当一个任务代表一些不可分割的工作单元时，包括在特定异常类型之后进行清理。
*   当特定异常类型由于某种原因不应该传播到任务之外时，例如，它需要被包装在不同类型的外部异常中以满足客户端代码对合同的期望。

**处理延续中的异常**

*   当异常清理应该由不同的调度时`TaskScheduler`，例如在线程池上运行“主要”任务但将所有异常记录编组到 UI 线程。
*   如果有多个延续是有意义的，每个延续都做不同的事情，除了例外，尽管这有点不寻常。
*   为了确保`Task`您未提供代码的 s 的异常得到适当的观察和处理，例如在`TaskFactory.FromAsync`. 虽然视情况而定，但也可以通过等待`Task`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-13T16:04:32.910

如果您能够在任务本身抛出的方法中正确处理异常，您应该在第一个任务中捕获它，而不是继续，除非您有一些令人信服的理由不这样做。在与任务本身相同的范围内创建延续（如您在第二个示例中所做的那样）是不必要地添加更多工作。

当从与定义任务的完全不同的范围处理异常时，继续处理异常是有用的或有必要的。例如，如果您有一个方法被赋予了一些任意任务，并且它不知道该任务的定义可能是什么，但它需要在代码抛出异常的情况下做一些事情，您需要有处理异常的延续。

请注意，如果您*将*拥有一个处理异常的延续，您可以使用`TaskContinuationOptions.OnlyOnFaulted`仅在任务引发异常时运行延续，而不是在延续的定义中进行检查。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T14:03:02.170

在某种程度上，这是一个偏好问题，特别是如果您“拥有”任务代码和调用代码。这里有一些要考虑的事情。

首先，您应该[只捕获您知道如何处理的异常](https://stackoverflow.com/questions/1742940/why-not-catch-general-exceptions)。无论您是通过延续还是在操作中使用 try/catch 来处理它们，这都适用。

还要注意[.NET 4.5](http://blogs.msdn.com/b/pfxteam/archive/2011/09/28/10217876.aspx)中关于未捕获异常的行为变化。这种变化有效地从“纯粹主义”方法（在未捕获的任务异常上拆除过程）到不那么严厉的方法。尽管如此，故意依赖新行为还是不好的。

至于你的两种选择中的哪**一种，选择第二个有一个论点：继续处理异常。** 在 .NET 中返回 .NET 的方法将越来越普遍`Task`。例如，[Stream.ReadAsync](http://msdn.microsoft.com/en-us/library/hh137813.aspx)。要正确使用这些方法，您需要一个延续（传统方式，或者使用带有新`await`功能的 try/catch 块，这相当于同一件事，但更容易编码和阅读）。因此，最好*养成假设任何`Task`可能失败*的习惯，除非您明确知道其他情况，并编写适当的异常处理行为。

如果您有兴趣，这里是在 .NET 4.5 中编写第二个示例的另一种方法。

```
async Task MyMethod()
{
    try
    {
        await Task.Run(
            () =>
            {
                // Some work.
            });
    }
    catch (SomeException ex)
    {
    }
} 
```

另一个差异最常适用于从 UI 线程调用代码的**Windows 窗体或 WPF 应用程序。**这里使用时 TPL 的默认行为`await`是使用将它们编组回 UI 线程的同步上下文来运行延续。也就是说，如果你`Task.Run`是从 UI 线程调用的，延续也将在 UI 线程上运行。

如果您想向用户显示一个对话框以响应异常，这很有用。您将无法在工作负载中成功地做到这`Task`一点。当使用显式延续而不是`await`时，您必须将`TaskScheduler`创建的使用[TaskScheduler.FromCurrentSynchronizationContext传递给](http://msdn.microsoft.com/en-us/library/system.threading.tasks.taskscheduler.fromcurrentsynchronizationcontext.aspx)[ContinueWith](http://msdn.microsoft.com/en-us/library/dd321307.aspx)的适当重载。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-13T14:44:43.373

你的两个例子在概念上是不同的。

第一个在执行任务内部处理您的异常。在 catch 之后运行的任何代码仍将被执行。

第二个调度另一个异步任务，该任务将在第一个任务完成后始终由调度程序运行。

猜猜答案是否完全取决于您要达到的目标-没有明确的答案-但第二个更符合 tpl。

此外，在第二个示例中，task.IsFaulted 比 task.Exception 更清晰

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-13T14:31:07.837

我会说这取决于上下文。正如[Olly](https://stackoverflow.com/a/14855330/238902)所说，您应该只处理您知道如何处理的异常。**如果你知道如何处理异常，**我会说你应该处理它。

一个例子是，如果您有一个任务应该从文件中加载一些数据或回退到某个默认值（可能引发异常），那么一种方法是（**伪代码**）：

```
Task.Factory.StartNew(()=>
{
    MyObject objectToSet = null;
    try
    {
        objectToSet = File.Open("mydata");
    }
    catch (FileException ex)
    {
        // this will catch the FileException because we know how to handle that!

        // the following will however throw an exception that we cannot handle
        objectToSet = GetFallBackValue(); 
    }
    // when we are here we promise that the objectToSet is valid.
}); 
```

在 的情况下`File.Open`，我们知道如何继续。在`GetFallBackValue()`我们没有的情况下，所以我们将它传播给调用者，说明我们处于不一致的状态。

# javascript - jQuery live 函数和添加/删除类

> ID：14854015
> 
> 赞同：1
> 
> 时间：2013-02-13T12:51:17.163
> 
> 标签：javascript, jquery, web, jquery-1.5, client-side-scripting

我正在使用 jquery 1.5，我遇到了添加和删除类功能的问题。下面是我的代码。

我正在创建一个具有正常、悬停和活动状态的导航。我要添加和删除类的活动状态。

```
 $(".class").hover(function(){
          $(this).css("background-color", "#666).css("color", "yellow");
    ), function(){ 
         $(this).css("background-img", url(image).css("color","#fff");
    ).live('click', function(){
           if($("ul.me li").hasClass("current")){
             $("ul.me li").removeClass("current");
                $(this).addClass("current");
             }
        });

<ul class="me">
   <li class="current"> item1 </li>
   <li> item1 </li>
   <li> item1 </li>
</ul> 
```

我是否正确绑定了这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T12:55:00.573

您缺少选择器：-

```
$("ul.me li").live('click', function(){
   if($("ul.me li").hasClass("current")){
     $("ul#me li").removeClass("current");
        $(this).addClass("current");
     }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T15:57:41.913

你的脚本过于复杂了。您需要阅读 .css 的文档。您不能通过 引用元素`$(".class")`。如果您想引用元素类型，请仅使用不带`.`or`#`的名称`$("ul")`。如果你想引用一个类使用`$(".me")`和`$("#idName")`ids。单个 css 命令可以使用一组 css 值来更改。正如我之前所说，请阅读 css 文档。jQuery 1.6 与我在 jsfiddle 中获得的一样接近。这是一个小提琴链接。请参考脚本并根据您的要求修改 css 值。

[小提琴](http://jsfiddle.net/8VenC/)

**注意：** 如果要向 li 添加类并在悬停时删除，请在 css 中而不是 js 中为类添加样式。这更便宜。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T12:52:30.840

您可能需要使用`$("ul.me li").removeClass("current")`而不是`$("ul#me li").removeClass("current")`

```
$("selector").live('click', function(){
   if($("ul.me li").hasClass("current")){
     $("ul.me li").removeClass("current");
        $(this).addClass("current");
     }
}); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-13T12:55:41.463

只是 .live 没有意义。您需要将 .live 设置为 jquery 对象，例如 $('selector')

# c++ - 在恒定时间内交换 std::vector 的内容 - 有可能吗？

> ID：14854016
> 
> 赞同：2
> 
> 时间：2013-02-13T12:51:18.847
> 
> 标签：c++, vector, stdvector

我`std::vector`用来在我的*Image*类中存储图像。我很难理解它们是如何工作的。旋转图像的函数：

```
void Image :: resize (int width, int height)
{
    //the image in the object is "image"

    std::vector<uint8_t> vec;  //new vector to store rotated image

    // rotate "image" and store in "vec"

    image = vec; // copy "vec" to "image" (right?)

    //vec destructs itself on going out of scope
} 
```

有什么办法可以防止最后一个副本？就像在 Java 中一样，只是通过切换引用？如果防止任何复制，那就太好了。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-13T12:52:28.517

您可以使用`std::vector::swap`：

```
image.swap(vec); 
```

这本质上是一个指针交换，内容是转移而不是复制。这是完全有效的，因为您不关心`vec`交换后的内容。

在 C++11 中，您可以将以下内容“移动”`vec`到`image`：

```
image = std::move(vec); 
```

此操作具有基本相同的效果，只是状态`vec`不太明确（它处于自洽状态，但您不能对其内容做出任何假设......但无论如何您都不在乎，因为您知道您正在丢弃它立即地）。

# cordova - PhoneGap 2.3：未找到 InAppBrowser 插件

> ID：14854018
> 
> 赞同：1
> 
> 时间：2013-02-13T12:51:25.507
> 
> 标签：cordova, plugins

我将 iOS 应用程序中的 PhoneGap 升级到了 2.3 版，该版本现在内置了 InAppBrowser 功能。

为了触发它，我调用了 JavaScript：

> window.open(url, "_blank");

但这不起作用（我的应用程序中没有任何反应），而是我在日志中看到：

> CDVPlugin 类 CVDInAppBrowser (pluginName: InAppBrowser) 不存在。错误：未找到插件“InAppBrowser”，或者不是 CDVPlugin。
> 
> 检查 config.xml 中的插件映射。
> 
> -[CDVCommandQueue executePending] [第 103 行] FAILED pluginJSON = ["InAppBrowser1976814969","InAppBrowser","open",[" [http://www.google.com](http://www.google.com) ","_blank",null]]

所以我检查了我的 config.xml 看起来不错（它肯定在那里）：

```
<?xml version='1.0' encoding='utf-8'?>
<cordova>
    ...
    <plugins>
        ...
        <plugin name="InAppBrowser" value="CVDInAppBrowser" />
    </plugins>
    <access origin="*" />
    <access origin="*.jquery.com" />
    <access origin="*mydomain.de" />
</cordova> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-09T17:44:09.687

我认为这里的问题可能是你有“CVDInAppBrowser”，但它应该是“CDVInAppBrowser”。

# php - “第 876 行的 public_html/blog/wp-includes/pluggable.php”中的错误

> ID：14854019
> 
> 赞同：-4
> 
> 时间：2013-02-13T12:51:26.193
> 
> 标签：php, wordpress, wordpress-login

当我调用这个网址 www.website.com/blog/wp-admin 时，我的网站出现了这个错误：

> 警告：无法修改标头信息 - 标头已由 /home/xxx/public_html/blog/ 中的（输出开始于 /home/xxx/public_html/blog/wp-content/themes/theme-name/functions.php:2102）发送wp-includes/pluggable.php 在第 876 行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T12:54:27.883

在使用标头函数之前，您不应该输出任何内容。甚至 1 个空格也是不允许的。下次您提出问题时，您最好使用搜索功能。

[参考 - 这个错误在 PHP 中是什么意思？](https://stackoverflow.com/questions/12769982/reference-what-does-this-error-mean-in-php/12770075#12770075)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T12:58:41.283

问之前至少搜索一下。有许多页面与此问题相关联。它在 wordpress 常见问题页面上。

[关联](http://codex.wordpress.org/FAQ_Troubleshooting#How_do_I_solve_the_Headers_already_sent_warning_problem.3F)

# c# - 除非通过单击按钮调用，否则为什么我的方法不起作用？

> ID：14854020
> 
> 赞同：2
> 
> 时间：2013-02-13T12:51:28.253
> 
> 标签：c#

我昨天发布了这个问题，但我认为我没有提供足够的信息来获得明确的答案。所以这里又是附加代码，希望能让事情更清楚。

我有一个带有 listView 的表单，它是通过调用 showCheckedInFiles() 方法填充的。当我向表单添加一个简单的按钮并按下它时，该方法工作得非常好，这会调用该方法，但是当我从其他地方调用该方法时，它不会填充我的列表视图。

请帮助它让我发疯。下面的第一个方法是从另一个类调用的，它显示在下面，我也包含了按钮方法以供参考，正如我所说，按钮工作得很好，但我需要能够在不单击的情况下调用该方法一个按钮！！：

```
public void openProject(string projectname)
{
    projectName = projectname;
    string userDir = CSDBpath + projectname + "\\checkedOUT\\" + userName;
    if (!Directory.Exists(userDir)) //Does the user's directory exist, if not, create it
    {
        Directory.CreateDirectory(userDir);
    }
    showCheckedInFiles();
 }

 private void button3_Click(object sender, EventArgs e)
 {
    showCheckedInFiles();
 } 
```

调用上述方法的方法：

```
private void buttonOpenProject_Click(object sender, EventArgs e)
{
     ListView.SelectedListViewItemCollection mySelectedItems;
     mySelectedItems = listView1.SelectedItems;
     Form1 mainform = new Form1();
     string myProject = "";

     foreach (ListViewItem item in mySelectedItems)
     {
         myProject = item.Text;
     }

     mainform.openProject(myProject);
     //mainform.showCheckedInFiles();
     this.Close();
 } 
```

这是实际的 showCheckedInFiles() 方法，除非从 button_3_click 方法调用，否则它不会构建我的 listView .... 我不想要！

```
public void showCheckedInFiles() // ListView1 - load the DMs into the listView to create the list
        {
            listView1.Items.Clear(); // this clears the list of files each time the method is called preventing the list from being duplicated over and over - (refreshes it) !!
            string[] checkedINfileList = Directory.GetFiles(CSDBpath + projectName, "*.sgm", SearchOption.AllDirectories); //JAKE I'VE ADDED THE EXTRA ARGUMENTS HERE and removed \\CheckedIN, MAY NEED TO DELETE FROM .SGM ETC

            foreach (string file in checkedINfileList)
            {

                ListViewItem itemName = list1.getName(file); // get this information from the files in the array
                long itemSize = list1.getSize(file);
                DateTime itemModified = list1.getDate(file);

                listView1.Items.Add(itemName);          // now use that information to populate the listview
                itemName.SubItems.Add(itemSize.ToString() + " Kb");
                itemName.SubItems.Add(itemModified.ToString());

                // readFromCSV(); //Reads the data to the CSV file using the method

                //  // StringBuilder sb = ReadingListView(); //writes the data to the CSV file
                //  // fileWrite.writeToCSV(sb);
                showStatus(itemName);

            }
            showMyCheckedOutFiles();

        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T12:58:01.527

失败的原因可能`showCheckedInFiles`不是因为它不是从哪里调用的，而是因为它是从哪里调用的。你可以告诉我们更多关于这方面的信息。

同时，我的猜测是您在创建 listView 的句柄之前调用它（因此该列表实际上还不存在），或者您正在调用不同的线程（但您很可能会看到在这种情况下例外）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T13:00:06.693

buttonOpenProject_Click() 似乎没有调用任何东西来显示它创建的主窗体。我看不到你能看到的任何方式！

# javascript - 是否可以在 openerp 中自动刷新树视图？

> ID：14854021
> 
> 赞同：1
> 
> 时间：2013-02-13T12:51:28.767
> 
> 标签：javascript, python, openerp

是否可以自动刷新树视图，我使用的是 OpenERP 7.0。我在树视图的操作中尝试了“1”，但对我不起作用。我需要在 Web 客户端上使用它。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-05-02T05:28:00.453

尝试使用您自己的 javascript。添加到**openerp** .py 你的 javascript 文件路径

前任 ： -

```
'data': [
         ...  
         'static/src/js/your_file_name.js'], 
```

然后确定你想要执行你的函数的触发点。然后为此编写代码。这是我的方式，在 Eclipse 中按选择**树**标签，然后按**ctrl+alt+G**并在整个工作场所搜索并找到相同的场景。然后将其应用于您的模块。它就像一个压倒一切的 :-)

# events - XL2003：在 Workbook_BeforeClose 事件期间更改 ThisWorkbook.Windows().Visible 属性会阻止工作簿关闭

> ID：14854023
> 
> 赞同：2
> 
> 时间：2013-02-13T12:51:39.483
> 
> 标签：events, excel, excel-2003, visible, vba

如题。这让我发疯，我在网络上的其他任何地方都找不到任何参考。

我有一个加载 VBA 的工作簿，通常通过以下方式隐藏：

```
ThisWorkbook.Windows(1).Visible = False 
```

但是，当工作簿关闭时，我需要它恢复到默认状态，即它的窗口是可见的，并显示一个指示用户启用宏的“特殊”工作表。这是为了在下一个用户打开禁用宏的工作簿时提供指导。在启用宏的情况下打开工作簿时，Workbook_Open 事件负责再次隐藏此消息，此时正常操作继续进行。

我的问题是，当我`.Windows().Visible`从工作簿的 _BeforeClose 事件（仅在 Excel 退出时发生）更改属性时，工作簿只会保留在屏幕上。我已经确认它肯定是在设置`.Windows().Visible`导致这种行为的属性。

我已经尝试使用该`ThisWorkbook.IsAddin`属性，因为这具有从用户视图“隐藏”工作簿的相同效果，但这会导致完全相同的行为。

我也尝试过不以任何方式更改窗口的可见性，希望随后打开禁用宏的工作簿会导致该属性被忽略，但事实并非如此。

我能做的唯一一件事就是`ThisWorkbook.Close`将 _BeforeClose 事件本身作为最后一行，但这会导致不稳定，表现为偶尔的“Excel 已意外关闭，您要恢复/重新启动吗？” Excel 退出后的消息。

感激地接受任何帮助/指点。我无法访问更高版本的 Excel。

我的代码：

```
Private Sub Workbook_BeforeClose(Cancel As Boolean)

    Application.ScreenUpdating = False

    Call cleanUp

    Application.ScreenUpdating = True

End Sub 
```

和

```
Private Sub cleanUp()

Dim s As Worksheet

    shtZNM.Visible = xlSheetVisible

    For Each s In ThisWorkbook.Sheets
        If Not s Is shtZNM Then s.Visible = xlSheetHidden
    Next s

    With ThisWorkbook.Windows(1)
        .DisplayWorkbookTabs = False
        .DisplayHorizontalScrollBar = False
        .DisplayVerticalScrollBar = False
        .Visible = True '<==REMOVING THIS ALLOWS _BEFORECLOSE TO WORK AS EXPECTED
    End With

    On Error Resume Next
    Application.CommandBars("QCS").Delete
    Err.Clear
    Application.CommandBars("Worksheet Menu Bar").Controls("QCS").Delete

    Me.Save

End Sub 
```

# oracle - PL/SQL 将数字转换为文本

> ID：14854026
> 
> 赞同：1
> 
> 时间：2013-02-13T12:51:51.980
> 
> 标签：oracle, function, plsql, jasper-reports

我使用 Jaspersoft iReport 工具从 Oracle DB 中的表设计报告。我得到一个数字值，我想将其转换为文本。

例如，如果我得到的值是**1652** ，我需要一个 Pl/SQL 函数将其转换为**一千五百零二**

有没有可用的功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T13:03:48.863

您可以将数字转换为时间戳并返回以获取整数：

```
SQL>    select to_char(to_timestamp(lpad( 1652 , 9, '0'), 'FF9' ), 'Ffsp' ) str
  2    from dual;

STR
---------------------------------------------------------------------------
One Thousand Six Hundred Fifty-Two

SQL> select to_char(to_timestamp(lpad( 1502 , 9, '0'), 'FF9' ), 'Ffsp' ) str from dual;

STR
---------------------------------------------------------------------------
One Thousand Five Hundred Two 
```

这将在一定程度上起作用（它将返回的字符串的大小是有限的）。否则你必须编写自己的函数来做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T13:02:22.113

你可以使用这个技巧：

```
DECLARE 
   ws_number NUMBER := 30; 
   ws_text   VARCHAR2(60); 
BEGIN 
   ws_text := to_char(to_date(ws_number,'j'), 'jsp'); 
 END; 
```

将`j`数字转换为儒略日期并`jsp`返回儒略日期的值。在[此 Ask Tom 帖子中对其进行了更全面的描述](http://asktom.oracle.com/pls/apex/f?p=100:11:0%3a%3aNO%3a%3aP11_QUESTION_ID:18305103094123#PAGETOP)

# selenium - HtmlUnit 驱动程序不执行 JavaScript

> ID：14854031
> 
> 赞同：6
> 
> 时间：2013-02-13T12:52:10.937
> 
> 标签：selenium, selenium-webdriver, htmlunit

我是 HtmlUnit 的新手，在登录时遇到了一些问题。下面的代码`FireFoxDriver`对于`HtmlUnitDriver`. `javascript`问题是单击“登录”链接时它没有执行；

用于查看 html 的站点 url：[https ://fleetworks.trimbletl.com/fleet/start.do](https://fleetworks.trimbletl.com/fleet/start.do)

```
HtmlUnitDriver driver = new HtmlUnitDriver(BrowserVersion.CHROME_16);
driver.setJavascriptEnabled(true);
WebDriverWait wait = new WebDriverWait(driver, 10);

driver.get(fleetWorkURL);

WebElement usernameElement = driver.findElement(By.name("j_username"));
usernameElement.sendKeys(username);

WebElement passwordElement = driver.findElement(By.name("j_password"));
passwordElement.sendKeys(password);

WebElement loginButtonElement = driver.findElement(By.linkText("Log in"));
loginButtonElement.click();

wait.until(ExpectedConditions.frameToBeAvailableAndSwitchToIt("headerFrame")); 
```

堆栈跟踪：

```
 13, 2013 2:47:54 PM com.gargoylesoftware.htmlunit.IncorrectnessListenerImpl notify
    WARNING: Obsolete content type encountered: 'text/javascript'.
    13, 2013 2:47:54 PM com.gargoylesoftware.htmlunit.IncorrectnessListenerImpl notify
    WARNING: Obsolete content type encountered: 'text/javascript'.
    13, 2013 2:47:55 PM com.gargoylesoftware.htmlunit.IncorrectnessListenerImpl notify
    WARNING: Obsolete content type encountered: 'text/javascript'.
   2013 2:47:56 PM com.gargoylesoftware.htmlunit.WebClient loadDownloadedResponses
   INFO: No usage of download: com.gargoylesoftware.htmlunit.WebClient$LoadJob@1b55ca5

   Exception in thread "main" org.openqa.selenium.TimeoutException: Timed out after 10  seconds waiting for frame to be available: headerFrame
   Build info: version: '2.29.1', revision: 'dfb1306b85be4934d23c123122e06e602a15e446',  time: '2013-01-22 12:58:05'
   System info: os.name: 'Windows 7', os.arch: 'x86', os.version: '6.1', java.version:  '1.7.0_11'
    Driver info: driver.version: unknown
at org.openqa.selenium.support.ui.FluentWait.timeoutException(FluentWait.java:255)
at org.openqa.selenium.support.ui.FluentWait.until(FluentWait.java:224)
at com.yukon.qasetup.xmlService.XMLService.main(XMLService.java:77)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at com.intellij.rt.execution.application.AppMain.main(AppMain.java:120) 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2016-01-12T10:05:23.497

您的类 HtmlUnitDriver 不是标准 Selenium 包的一部分，是吗？据我所知，对于 HtmlUnit，您必须使用 DesiredCapabilities.HtmlUnit() 或 DesiredCapabilities.HtmlUnitWithJavaScript() 创建一个 RemoteWebDriver 实例。

你能看看你的 HtmlUnitDriver 类吗？也许使用了 DesiredCapabilities.HtmlUnit() 而不是 DesiredCapabilities.HtmlUnitWithJavaScript() ！？

# tracking - Doxygen 需求跟踪/逆矩阵

> ID：14854034
> 
> 赞同：1
> 
> 时间：2013-02-13T12:52:20.283
> 
> 标签：tracking, doxygen, requirements

我使用自定义 Doxygen 标签来跟踪我的软件源代码中的需求实现，如下所示：

```
/// @req REQ-BLAH-0010 
```

@req 标签在我的 doxygen.conf 文件中定义：

```
ALIASES += "req=\xrefitem req \"Requirement\" \"Requirements\" " 
```

这可行，Doxygen 为每个方法/类/文件生成一个需求列表。但有时在不同的地方使用相同的需求编号，我想要一种获得反向列表的方法：对于每个需求编号，列出跟踪它的所有位置。

使用 Doxygen 可以做到这一点吗？如果是这样，怎么做？如果没有，您会为此推荐什么工具？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T13:00:18.373

许多年前，我使用 Perl 程序来处理我的源代码。

# jquery - 使用 jQuery 作为依赖项而不用 RequireJS 加载 jQuery？

> ID：14854046
> 
> 赞同：3
> 
> 时间：2013-02-13T12:52:51.610
> 
> 标签：jquery, dependencies, requirejs

考虑以下页面：

```
<html>
<head>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>
</head>
<body>
    <script data-main="app" src="require.js"></script>
</body>
</html> 
```

当没有加载 RequireJS 时，如何使用 jQuery 作为 RequireJS 模块的依赖项？我知道[jQuery 将自己暴露](https://github.com/jquery/jquery/blob/861a45b8fffc2073baa9f62b0648f395f0695f3e/src/exports.js)为一个全局 AMD 模块，所以我应该能够将它添加为依赖项，但我不太确定如何添加。

我希望能够做到以下几点：

```
require(['jquery'], function() {
    console.log('success')
}); 
```

如果 jQuery 还没有完成加载，它应该等待它完成，然后继续。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T08:10:06.253

第二个加载 jQuery，首先加载 RequireJS。加载两者后运行您的主模块。

```
<html>
<head>
    <script src="require.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>
</head>
<body>
    <script>
        require(["app"], function(app){
            app.runMe()
        })
    </script>
</body>
</html> 
```

`define.amd`如果 jQuery 看不到浮动，它不会将自己注册为 AMD 模块。使其正确注册的唯一方法是在 jQuery 之前加载 RequireJS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T20:00:57.377

您应该将 jquery 定义为 shim，如下所示：

```
requirejs.config({
  shim: {
    'jquery': {
        exports: '$'
    }
  },
  path : {
    jquery : '$PATH/jquery.js'
  }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T16:14:10.267

一种方法是使用 data-main 属性通过 require.js 加载 main.js 文件：

```
<script data-main="main" src="require.js"></script> 
```

main.js 文件的风格是：

```
requirejs.config({
    shim: {         // regard the shim structure as a dependency map
        'jquery': [],
        'app': ['jquery']    // app code will not execute before jquery is loaded
    },
    waitSeconds: 20
});

require(
    [
        'jquery',
        'app'
    ],
    function(
        $
    ) {
        //the plugins from the dependency array have been loaded.
        console.log ("jQuery and app loaded through require.js");
    }
); 
```

上面的示例假设您从与 require.js 相同的位置（即您的站点）加载 jquery.js

# templates - 在 Knockout.js 中使用 foreach 绑定而不更改上下文

> ID：14854047
> 
> 赞同：2
> 
> 时间：2013-02-13T12:52:52.540
> 
> 标签：templates, knockout.js, data-binding, foreach

是否可以在不更改上下文的情况下使用 foreach 绑定？

例如，这是我的模板：

```
<div data-bind="foreach:{data:users,as:'user'}">
  <div data-bind="template:{name:'userAvatar',data:user}"></div>
</div>

<div data-bind="template:{name:'userAvatar',data:currentUser}"></div>

<script type="text/template" id="userAvatar">
  <img data-bind="attr:{src:avatarUrl}">
</script> 
```

所以我在foreach循环内部和外部使用模板'userAvatar'。现在我想在用户点击头像时执行一些操作。例如，我的模型是

```
var MyModel = function() {
  this.users = [
    {name:"user1",avatarUrl:"url1"},
    {name:"user2",avatarUrl:"url2"}
  ];
  this.currentUser = {name:"user3",avatarUrl:"url3"};
  this.openProfile = function() {
    // opening user profile
  }
} 
```

这种情况下，如果我想在模板中调用“openProfile”操作，我必须在模板位于 foreach 之外时使用 $parent.openProfile，而在模板位于其中时使用 $parents[1].openProfile。

我可以将 openProfile 的链接复制到每个用户对象，或者在调用模板绑定时指定 openProfile 方法的位置，但是有更自然的解决方案吗？

PS 而且我不能使用 $root 变量，因为在现实世界中，我的 $root 位于这些模型的 10 层之上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T21:09:46.233

我的[重复](https://github.com/mbest/knockout-repeat)绑定执行与 foreach 类似的操作，但不创建子上下文。

```
<div data-bind="repeat:users" 
    data-repeat-bind="template:{name:'userAvatar',data:$item()}"></div> 
```

适用于您的示例的另一个选项（可能更好），因为它使用,`template`是[`foreach`选项](http://knockoutjs.com/documentation/template-binding.html#note_2_using_the_foreach_option_with_a_named_template)：`template`

```
<div data-bind="template:{name:'userAvater',foreach:users}"></div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T14:17:37.737

您可以将 users 数组转换为 Object 并在该对象中实现单击操作。

```
function User(name,avatarUrl) {
   var self = this;

   this.name = ko.observable(name);
   this.avatarUrl = ko.observable(avatarUrl);

   this.openProfile = function() {
      ....
   }
}

users = ko.observableArray([new User(...),new User(...)]); 
```

我认为该动作自然属于用户模型而不是您的根模型。

# post - 带有 Nginx 参数的 Laravel 为空

> ID：14854050
> 
> 赞同：7
> 
> 时间：2013-02-13T12:52:55.633
> 
> 标签：post, parameters, nginx, laravel

我刚刚设置了 Nginx，并试图用它来托管一个 Laravel 应用程序，但我遇到了 2 个问题。

1.  对于 GET 方法，我总是在输入中得到一个额外的参数。
    *   使用 PostMan (Chrome) 进行测试，设置目标 URL 和所需参数并发送请求。我得到的输出，它总是包含`REQUEST_URI`它不应该包含的输出。示例输出：

.

```
Array (
  [/api/user] => // This shouldn't be here
  [test] => test
) 
```

2.  我的参数（以上）根本**不会**显示 DELETE 或 PUT，而对于 POST，我只会得到`REQUEST_URI`

**Nginx 虚拟主机**（随后使用 Nginx[设置 Laravel](https://stackoverflow.com/questions/8856664/setting-up-laravel-w-nginx)）

```
server {
    server_name local.test.com;
    root /var/www/test/public;

    location / {
        index index.php index.html index.htm;
    }

    # serve static files directly
    location ~* \.(jpg|jpeg|gif|css|png|js|ico|html)$ {
        access_log off;
        expires max;
    }

    # removes trailing slashes (prevents SEO duplicate content issues)
    if (!-d $request_filename) {
        rewrite ^/(.+)/$ /$1 permanent;
    }

    # unless the request is for a valid file (image, js, css, etc.), send to bootstrap
    if (!-e $request_filename) {
        rewrite ^/(.*)$ /index.php?/$1 last;
        break;
    }

    # catch all
    error_page 404 /index.php;

    # The PHP Inclusion Block
    # include /etc/nginx/includes/php;
    location ~ \..*/.*\.php$ {
        # I'm pretty sure this stops people trying to traverse your site to get to other PHP files
        return 403;
    }

    #location ~ \.php$ {
    location ~ \.php(.*)$ {
        try_files $uri =404;
        fastcgi_split_path_info ^(.+\.php)(/.+)$;
        fastcgi_pass 127.0.0.1:9000;
        fastcgi_index index.php;
        include /etc/nginx/fastcgi_params;
    }

# Deny Any Access to .htaccess Files That May Be Present (not usually in issue in Laravel)
# include /etc/nginx/includes/deny_htaccess;
location ~ /\.ht
{
    deny all;
}

    error_log  /var/www/logs/test-error.log;
} 
```

**fastcgi_params**：

```
fastcgi_param   QUERY_STRING            $query_string;
fastcgi_param   REQUEST_METHOD          $request_method;
fastcgi_param   CONTENT_TYPE            $content_type;
fastcgi_param   CONTENT_LENGTH          $content_length;

fastcgi_param   SCRIPT_FILENAME         $request_filename;
fastcgi_param   SCRIPT_NAME             $fastcgi_script_name;
fastcgi_param   REQUEST_URI             $request_uri;
fastcgi_param   DOCUMENT_URI            $document_uri;
fastcgi_param   DOCUMENT_ROOT           $document_root;
fastcgi_param   SERVER_PROTOCOL         $server_protocol;

fastcgi_param   GATEWAY_INTERFACE       CGI/1.1;
fastcgi_param   SERVER_SOFTWARE         nginx/$nginx_version;

fastcgi_param   REMOTE_ADDR             $remote_addr;
fastcgi_param   REMOTE_PORT             $remote_port;
fastcgi_param   SERVER_ADDR             $server_addr;
fastcgi_param   SERVER_PORT             $server_port;
fastcgi_param   SERVER_NAME             $server_name;

#fastcgi_param  HTTPS                   $https;

# PHP only, required if PHP was built with --enable-force-cgi-redirect
fastcgi_param   REDIRECT_STATUS         200;

fastcgi_connect_timeout                 60;
fastcgi_send_timeout                    180;
fastcgi_read_timeout                    180;
fastcgi_buffer_size                     128k;
fastcgi_buffers 4                       256k;
fastcgi_busy_buffers_size               256k;
fastcgi_temp_file_write_size            256k;
fastcgi_intercept_errors                on; 
```

**nginx.conf**只有一件事发生了变化，那就是`keepalive_timeout`从 65 到 15

所以我完全不知道这一切哪里出了问题。但我不得不提一下，在我拥有的另外 2 个环境（一个使用 Lighttpd，另一个使用 Apache2）上，该应用程序运行良好。

据我所知，它全部简化为以下代码：

```
# unless the request is for a valid file (image, js, css, etc.), send to bootstrap
if (!-e $request_filename) {
    rewrite ^/(.*)$ /index.php?/$1 last;
    break;
} 
```

这将使 GET 工作......并添加附加参数

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T13:15:46.263

最好避免在你的 nginx 配置中进行不必要的重写（参见[Nginx Pitfalls](http://wiki.nginx.org/Pitfalls)），特别是负责将请求传递给 Laravel 前端控制器的一个：

Laravel 所需要的只是：

```
location / {
    index index.php index.html index.htm;
    try_files $uri $uri/ index.php?$query_string;
} 
```

首先尝试直接访问文件，然后是目录，如果两者都不存在，则将请求传递给 index.php。`$query_string`传递很重要，因为这将包含`$_GET`否则会丢失的数据。

这是我自己的 FastCGI 配置文件：

```
location ~ \.php$ {
    fastcgi_pass   127.0.0.1:9000;
    fastcgi_index  index.php;
    fastcgi_param  SCRIPT_FILENAME    $document_root/$fastcgi_script_name;
    include        fastcgi_params;
} 
```

至于意外输入，可能是您当前重写的工作方式，但可以肯定地说，您在输出什么？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T09:39:00.880

这对我有用：

```
location / {
    index   index.php;
    try_files $uri $uri/ /index.php?q=$uri&$args;
}

location ~ \.php$ {

    include     fastcgi_params;
    fastcgi_pass   127.0.0.1:9000;
    fastcgi_index  index.php;

    fastcgi_split_path_info                 ^(.+\.php)(/.+)$;
    fastcgi_param PATH_INFO                 $fastcgi_path_info;
    fastcgi_param PATH_TRANSLATED           $document_root$fastcgi_path_info;
    fastcgi_param SCRIPT_FILENAME           $document_root$fastcgi_script_name;

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T17:13:20.373

从您的配置：

```
rewrite ^/(.*)$ /index.php?/$1 last; 
```

在这里你有一个重定向到`/index.php?/$1`（例如`/index.php?/some/path`）。

```
fastcgi_split_path_info ^(.+\.php)(/.+)$; 
```

`^(.+\.php)(/.+)$`在这里，您通过正则表达式（例如`/index.php/some/path`）溢出了路径。

你注意到区别了吗？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-06-21T01:15:01.387

我遇到了类似的问题，我用以下配置修复了它：

```
server {
    listen 80;
    server_name subdomain.domain.com;
    root /var/www/dir/public;

    charset utf-8;

    location = /favicon.ico { access_log off; log_not_found off; }
    location = /robots.txt  { access_log off; log_not_found off; }

    access_log off;
    error_log  /var/log/nginx/registration.app-error.log error;
    error_page 404 /index.php;
    sendfile off;

    # Point index to the Laravel front controller.
    index index.php;

    location / {
       # try_files $uri $uri/ index.php?$query_string;
        try_files $uri $uri/ /index.php?&$args;
    }

    location ~ \.php$ {
                include snippets/fastcgi-php.conf;
        #
        #       # With php7.0-cgi alone:
        #       fastcgi_pass 127.0.0.1:9000;
        #       # With php7.0-fpm:
                fastcgi_pass unix:/run/php/php7.2-fpm.sock;
    }

    location ~ /\.ht {
        #deny all;
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-13T15:18:37.380

This is a configuration that works for me with NGINX and Laravel

```
server {

    listen  80;
    server_name sub.domain.com;
    set $root_path '/var/www/html/application_name/public';
    root $root_path;

    index index.php index.html index.htm;

    try_files $uri $uri/ @rewrite;

    location @rewrite {
        rewrite ^/(.*)$ /index.php?_url=/$1;
    }

    location ~ \.php {

        fastcgi_pass 127.0.0.1:9000;
        fastcgi_index /index.php;

        include /etc/nginx/fastcgi_params;

        fastcgi_split_path_info       ^(.+\.php)(/.+)$;
        fastcgi_param PATH_INFO       $fastcgi_path_info;
        fastcgi_param PATH_TRANSLATED $document_root$fastcgi_path_info;
        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
    }

    location ~* ^/(css|img|js|flv|swf|download)/(.+)$ {
        root $root_path;
    }

    location ~ /\.ht {
        deny all;
    }

} 
```

# mysql - mysql str_to_date 警告不显示行号

> ID：14854055
> 
> 赞同：1
> 
> 时间：2013-02-13T12:53:11.200
> 
> 标签：mysql

我正在使用“LOAD DATA LOCAL INFILE”查询将数据从 .csv 文件导入 Mysql db。.csv 包含以下内容：

```
ID | Name | Date | Price

 1\. 01 | abc  | 13-02-2013 | 1500
 2\. 02 | nbd  | blahblahbl | 1000
 3\. 03 | kgj  | 11-02-2012 | 3444 
```

我的 Mysql 表包含以下列：

```
Id INTEGER 
NAME Varchat(100)
InsertionTimeStamp Date
Price INTEGER 
```

MySQL 查询将 .csv 数据加载到上表：

```
LOAD DATA LOCAL INFILE 'UserDetails.csv' INTO TABLE userdetails
FIELDS TERMINATED BY ','
IGNORE 1 LINES
 (Id,Name,InsertionTimeStamp,Price)
 set InsertionTimeStamp = str_to_date(@d,'%d-%m-%Y'); 
```

上面的查询显示警告为 `"Incorrect datetime value : 'blahblahbl' for function str_to_date"`

就好像我`set InsertionTimeStamp = str_to_date(@d,'%d-%m-%Y');`从查询中删除了一样，警告消息包括下面的行号：

```
Data truncated for column 'Date' at row 2 
```

为什么我使用时警告消息不包括行号

```
set InsertionTimeStamp = str_to_date(@d,'%d-%m-%Y') 
```

我想捕获行号。

# ios - ios中的徒手裁剪

> ID：14854056
> 
> 赞同：0
> 
> 时间：2013-02-13T12:53:11.683
> 
> 标签：ios, uiimageview, uiimage

我想使用相机拍摄一个人的图像，然后在应用程序中编辑图像。该应用程序应该具有裁剪（最好是徒手裁剪）仅离开背景的人的功能，以便我能够在不同背景下使用该人。我不确定如何进行裁剪部分..请在 ios 中帮助我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T19:50:48.023

我创建了一个可以满足您需求的手绘裁剪工具。

[https://github.com/nicholjs/BFCropInterface](https://github.com/nicholjs/BFCropInterface)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T13:13:08.867

我已使用此代码手动裁剪图像。我将它用于静止的 UIView，而不是相机图像，但它适用于任何类型的 UIView。这里 startX、startY、endX 和 endY 是在 toucheBegan、touchMove 和 touchEnd 函数中获取的整数值。希望对您有所帮助。

谢谢

```
UIGraphicsBeginImageContextWithOptions(self.view.bounds.size, self.view.opaque, 0.0);
  [self.view.layer renderInContext:UIGraphicsGetCurrentContext()];
  UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
  UIGraphicsEndImageContext();
       if(self.isRetina){
         contentRectToCrop = CGRectMake(startX*2, startY*2, (endX*2-startX*2), endY*2-startY*2);
       }else{
        contentRectToCrop = CGRectMake(startX, startY, (endX-startX), endY-startY);
              }
      CGImageRef imageRef = CGImageCreateWithImageInRect([image CGImage], contentRectToCrop); 
    UIImage *croppedImage = [UIImage imageWithCGImage:imageRef]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T11:38:53.510

是的，您没有使用正确的视网膜显示检查。上述函数以像素为单位计算裁剪图像。我最初面临同样的问题，但这段代码解决了我的问题，请将此功能与以前的代码一起使用，问题将得到解决。

```
-(BOOL)isRetina
{
    if ([[UIScreen mainScreen] respondsToSelector:@selector(scale)] && [[UIScreen mainScreen] scale] == 2.0) {
        return YES;
    }
    return NO;

} 
```

谢谢

# html - 两个输入的单个标签

> ID：14854062
> 
> 赞同：9
> 
> 时间：2013-02-13T12:53:21.060
> 
> 标签：html, forms, input, accessibility, labels

我目前正在向表单添加一些日期输入。我有一个“开始日期”和“结束日期”输入，但只想对两个输入使用一个标签（“日期”）。

是否有可能做到这一点？可访问性问题是什么？

我目前的想法是显示一个标签“日期”，然后为屏幕阅读器的每个输入设置两个隐藏标签等。这是要走的路吗？有没有大型网站做这种事情的例子（如果可能的话，政府网站）？

这是一个可能由政府机构使用的项目，因此对其遵守可访问性有严格的规定。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-14T19:01:27.987

在这种情况下，我认为最好的标记是将输入包装在 a 中`fieldset`，将 a`legend`用于“日期”，`labels`同时使用`inputs`并隐藏标签：

**HTML**

```
<fieldset>
<legend>Dates</legend>
<label for="startdate">Start Date</label>
<input type="text" name="startdate" id="startdate" placeholder="Start Date">
<label for="enddate">End Date</label>
<input type="text" name="enddate" id="enddate" placeholder="End Date">
</fieldset> 
```

**CSS**

```
fieldset {
  border: none;
}
label {
  margin-left: -999em;
}
input {
  display: block;
} 
```

[在这里提琴](http://jsfiddle.net/t2GE3/)

另请参阅：[WCAG 2，H71：使用字段集和图例元素为表单控件组提供描述](http://www.w3.org/TR/WCAG20-TECHS/H71.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-13T13:00:24.597

我认为您最好的选择是在每个输入中包含一个标签。然后对于您不想实际显示在页面上的标签，可以简单地使用 CSS 通过

```
.hide {
   position: absolute;
   left: -9999em;
 } 
```

...或类似的东西

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T12:58:08.013

这里的问题是您只能`for`为每个标签指定一个。我想，出于可访问性目的，最好`labels`为每个日期显示两个。这样，任何使用屏幕阅读器等的人都将获得每个输入的有效标签。

```
<label for="x">x name</label><input name="x"/>
<label for="y">y name</label><input name="y"/> 
```

# reporting-services - 如何在不使用 VPN 的情况下访问报告服务器？

> ID：14854064
> 
> 赞同：0
> 
> 时间：2013-02-13T12:53:29.703
> 
> 标签：reporting-services, rdp

这听起来可能有点杂乱无章，但这就是我正在做的事情

我正在使用位于位置 A 的机器，并通过 VPN 连接到位置 B 的 RDP，该 RDP 上安装了 sql server 2008 R2。

我在机器 A 上工作，并在位置 B 的 RDP 上开发 SSRS 报告。

如果我想查看报告，我只需登录 RDP 并输入将我重定向到报告的报告服务器 url。

现在的问题是我希望其他人查看位于位置 B 的 RDP 上的 SSRS 报告。用户是否有可能不使用 vpn 登录到 rdp，而只是通过输入报告的 url 来查看报告任何机器。就像一个网站？

如果不是，我可以实施以公开报告的最佳方法是什么。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T13:03:23.303

由于位置 B 不是域 A 的一部分，因此您无法从 A 访问报表服务器。您应该实现对报表的匿名访问，但这不是简单的任务。您可以参考此线程以获取更多信息[报告服务匿名访问报告](https://stackoverflow.com/questions/357500/reporting-services-anonymous-access-to-reports)

# email - Mandrill 和在浏览器中查看功能

> ID：14854072
> 
> 赞同：29
> 
> 时间：2013-02-13T12:53:46.647
> 
> 标签：email, mailchimp, mandrill

任何人都知道 Mandrill 是否支持“在浏览器中查看”功能，例如 MailChimp *|ARCHIVE|* 多变的。如果没有，我是否可以使用搜索功能来获取发送邮件（例如，如果我知道相关邮件的某些特定元数据）？还是我必须自己渲染模板并将其存储以供以后检索？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-02-17T03:38:16.670

最好的办法是在您的服务器上存储一份副本，您可以在有意义的时候从电子邮件中链接到该副本，例如批量电子邮件。Mandrill 不自动支持 ARCHIVE 合并标签，因为它是特定于 MailChimp 中的一个活动，可能会同时发送给大量收件人。为成千上万的收件人存储一个副本相当简单。但是，Mandrill 会跟踪您发送的每封电子邮件，因此它需要以可公开访问的方式存储每封电子邮件的一个唯一副本，这会增加大量数据存储（以及数据存储成本和高架）。

我们还知道，许多交易电子邮件是高度个性化的，并且可能包含机密信息，因此在很多情况下，为每封电子邮件创建一个可公开访问的版本是没有意义的。

电子邮件发送后 24 小时内可以在​​您的帐户中查看电子邮件内容，但这些内容无法长期访问，也无法通过 API 访问（[有关查看内容的更多信息，请参见 Mandrill KB 此处](http://help.mandrill.com/entries/22899296-Can-I-view-the-contents-of-email-I-sent-through-Mandrill-)）。有关数据存储时长的更多一般信息，请参见[此处](http://help.mandrill.com/entries/22922457-How-long-does-Mandrill-keep-data-about-my-emails-)。

# mysql - MySQL LIKE... 结果优先级排序

> ID：14854074
> 
> 赞同：2
> 
> 时间：2013-02-13T12:54:01.570
> 
> 标签：mysql, sql-order-by, case, sql-like

所以我决定在 MySQL 中使用...

```
SELECT * 
FROM items AS i 
INNER JOIN tags AS t ON i.id = t.item_id 
WHERE item LIKE ('%s%' OR '%s2%' ... OR '%sn%') 
  AND tag LIKE ('%s%' OR '%s2%' ... OR '%sn%'); 
```

它不是全文，项目是 VARCHAR(32)，标签是 VARCHAR(16)。

我在排序结果时遇到问题......当涉及到一个搜索字符串时，我可以直接获得优先级，但是当我有更多时，它有点胡说八道，我最终得到（搜索字符串的数量）+7 个查询，我觉得使用它真的很脏。我觉得比用它洗澡还脏……这就是它的样子……

```
SELECT 
    t1.item_id, t1.item, t1.created, t1.owner, t1.type, t1.fld, t2.tag
FROM 
    items AS t1
INNER JOIN 
    tagged AS t2 ON t1.item_id = t2.item_id
WHERE 
    (item LIKE '%red%' OR '%apple%')
GROUP BY 
    item_id
ORDER BY 
    CASE 
       WHEN item = 'red'
         THEN 0 
       WHEN item = 'apple'
         THEN 1 
       WHEN (item LIKE 'red%' OR 'apple%')
         THEN 2 
       WHEN (item LIKE '%red%' AND '%apple%') 
        AND (tag LIKE '%red%' AND '%apple%')
        THEN 3 
      WHEN (item LIKE '%red%' AND '%apple%')
       AND (tag LIKE '%red%' OR '%apple%')
        THEN 4 
      WHEN (item LIKE '%red%' AND '%apple%')
        THEN 5 
      WHEN (item LIKE '%red%' OR '%apple%')
       AND (tag LIKE '%red%' OR '%apple%')
        THEN 6 
      WHEN (item LIKE '%red%' OR '%apple%')
        THEN 7 
      WHEN (tag LIKE '%red%' OR '%apple%')
        THEN 8 
      ELSE 9 
    END ASC , 
    created DESC 
LIMIT 0 , 30 
```

是啊，这么脏，怎么剪掉？我实际上使用从搜索字符串生成该查询的 PHP 脚本。那个查询它只比没有排序的那个查询慢一点，而且我们没有得到高负载，但对我来说感觉很脏。有没有更优雅的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T17:23:05.070

我宁愿推动案件......何时选择条款。我的查询将如下所示：

```
SELECT field1, field2,
case 
 when field1 like 's1%' then 1
 when field1 like 's2%' then 2
end as ordering_field
from table_name
group by field1
order by ordering_field 
```

# excel - Excel VBA：修改公式时保留源格式

> ID：14854075
> 
> 赞同：1
> 
> 时间：2013-02-13T12:54:05.557
> 
> 标签：excel, vba

我正在将日期从一张纸复制到另一张纸，如下所示：

```
Worksheets("MySheet1").Range("A1").Formula = Worksheets("MySheet2").Range("A1").Formula 
```

'MySheet1' 中的单元格显示 5 位数的值而不是格式化的日期，尽管我预先格式化了整个列。

如何保留格式？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T14:22:07.207

你可以使用

```
worksheets("MySheet1").Range("A1").Copy
Worksheets("MySheet2").Range("A1").PasteSpecial Paste:=xlPasteFormats 
```

宏记录器总是适合检查这样的任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T10:26:22.297

没关系！由于某种原因，它现在正在工作。我刚刚重新格式化了列，它工作了！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-15T10:20:05.397

```
'Both subs require a reference to Microsoft PowerPoint xx.x Object Library.
'where xx.x is your office version (11.0 = 2003, 12.0 = 2007 and 14.0 = 2010).

'Declaring the necessary Power Point variables (are used in both subs).
Dim pptApp As PowerPoint.Application
Dim pptPres As PowerPoint.Presentation
Dim pptSlide As PowerPoint.Slide
Dim pptSlideCount As Integer
Dim pptShape As PowerPoint.Shape

Sub ChartsToPowerPoint()

Dim strPptTemplatePath As String

    strPptTemplatePath = "C:\Template\2297089_2297089_2015_MB_Cars_presentation_EN_16_9.potx"

     'Get the PowerPoint Application object:

    Set PPT = CreateObject("PowerPoint.Application")

    PPT.Visible = msoTrue

    Set pptPres = PPT.Presentations.Open(strPptTemplatePath, untitled:=msoTrue)

    'Exports all the chart sheets to a new power point presentation.
    'It also adds a text box with the chart title.

    'By Christos Samaras
    'http://www.myengineeringworld.net

    Dim ws As Worksheet
    Dim intChNum As Integer
    Dim objCh As Object

    'Count the embedded charts.
    For Each ws In ActiveWorkbook.Worksheets
        intChNum = intChNum + ws.ChartObjects.Count
    Next ws

    'Check if there are chart (embedded or not) in the active workbook.
    If intChNum + ActiveWorkbook.Charts.Count < 1 Then
        MsgBox "Sorry, there are no charts to export!", vbCritical, "Ops"
        Exit Sub
    End If

    'Open PowerPoint and create a new presentation.
    'Set pptApp = New PowerPoint.Application
    'Set pptPres = pptApp.Presentations.Add

    'Loop through all the embedded charts in all worksheets.
    For Each ws In ActiveWorkbook.Worksheets
        For Each objCh In ws.ChartObjects
            Call pptFormat(objCh.chart)
        Next objCh
    Next ws

    'Loop through all the chart sheets.
    For Each objCh In ActiveWorkbook.Charts
        Call pptFormat(objCh)
    Next objCh

    'Show the power point.
    'pptApp.Visible = True

    'Cleanup the objects.
    Set pptSlide = Nothing
    Set pptPres = Nothing
    Set pptApp = Nothing

    'Infrom the user that the macro finished.
    MsgBox "The charts were copied successfully to the new presentation!", vbInformation, "Done"

End Sub

Private Sub pptFormat(xlCh As chart)

    'Formats the charts/pictures and the chart titles/textboxes.

    'By Christos Samaras
    'http://www.myengineeringworld.net

    Dim chTitle As String
    Dim j As Integer

    On Error Resume Next
   'Get the chart title and copy the chart area.
    'chTitle = xlCh.ChartTitle.Text
    xlCh.ChartArea.Copy

    'Count the slides and add a new one after the last slide.
    pptSlideCount = pptPres.Slides.Count
    Set pptSlide = pptPres.Slides.Add(pptSlideCount + 1, ppLayoutBlank)

    'Paste the chart and create a new textbox.
    'pptSlide.Shapes.PasteSpecial ppPasteOLEObject
    pptApp.CommandBars.ExecuteMso ("PasteSourceFormatting") ' Not executing

   ' If chTitle <> "" Then
    '    pptSlide.Shapes.AddTextbox msoTextOrientationHorizontal, 12.5, 20, 694.75, 55.25
   ' End If

    'Format the picture and the textbox.
    'For j = 1 To pptSlide.Shapes.Count
       ' With pptSlide.Shapes(j)
            'Picture position.
           ' If .Type = msoPicture Then
             '   .Top = 87.84976
             '   .Left = 33.98417
             '   .Height = 422.7964
             '   .Width = 646.5262
            'End If
            'Text box position and formamt.
           ' If .Type = msoTextBox Then
               ' With .TextFrame.TextRange
                 '   .ParagraphFormat.Alignment = ppAlignCenter
                '    .Text = chTitle
                  '  .Font.Name = "Tahoma (Headings)"
                '    .Font.Size = 28
                  '  .Font.Bold = msoTrue
               ' End With
           ' End If
       ' End With
    'Next j

End Sub 
```

# java - 来自 JSP 页面的多语言数据加载错误

> ID：14854077
> 
> 赞同：0
> 
> 时间：2013-02-13T12:54:11.953
> 
> 标签：java, unicode

我有一个 stutrs 项目。在 JSP 页面中，用户可以放置任何语言数据，例如英语/日语/拉丁语等。我已放入`<%@page contentType="text/html;charset=UTF-8"%>`JSP 页面，因此当用户将值放入文本框中时，它会正确显示，或者如果数据来自数据库，则它是在页面中正确显示。

但是在保存过程中数据被破坏（我可以在调试模式下看到它以及在数据库中）。我已经放入`request.setCharacterEncoding("UTF-8");`了动作层，但仍然没有乐趣。

如何解决问题。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T12:58:14.120

您必须在`<form>`元素中设置字符编码，以便浏览器知道您的服务器期望什么。

这个问题解释了如何做到这一点：[Setting the character encoding in form submit for Internet Explorer](https://stackoverflow.com/questions/153527/setting-the-character-encoding-in-form-submit-for-internet-explorer)

# iphone - 如何使用 AssetsLibrary.framework 在 iphone sdk 中打开自定义相机？

> ID：14854081
> 
> 赞同：2
> 
> 时间：2013-02-13T12:54:38.267
> 
> 标签：iphone, assetslibrary

我想打开一个自定义相机。

![在此处输入图像描述](../Images/3ff2003cd6b4d5fb94329170a7cdec67.png)

我尝试过，但没有像上图那样做这种类型的开放式自定义相机，这并不是我真正想要的。我是 AssetsLibrary.framework 的新手。如何像上图一样打开自定义相机？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T15:09:21.130

我认为您可以为此使用CameraOverlay。并尝试使用[Camera takePicture]方法单击选择。使用 Overaly 视图检查相机自定义，您会找到答案。

干杯..

# android - 如果两个精灵放置在 AndEngine 中的同一位置，我如何识别和利用 TouchEvents？

> ID：14854082
> 
> 赞同：2
> 
> 时间：2013-02-13T12:54:38.483
> 
> 标签：android, touch, andengine

我正在 AndEngine 中开发一款奇幻游戏。我已经动态创建了图块（矩阵格式），并在其中一个图块上放置了一个精灵。我使用 onAreatouchlistener 来识别精灵，我给瓷砖和精灵 1 的 zvalue 0，但是 onAreaTouchListener 不识别精灵，它只识别瓷砖。当用户触摸特定位置时，我想知道这两个值。请提出解决方案。

下面是一些正在使用的示例代码：

```
public boolean onAreaTouched(final TouchEvent pSceneTouchEvent, final ITouchArea pTouchArea,
        final float pTouchAreaLocalX, final float pTouchAreaLocalY) {
    if (pSceneTouchEvent.isActionDown()) {
        final Sprite face = (Sprite) pTouchArea;

        String mrc = (String) face.getUserData();

        if (mrc.equals("48")) {
            selectedtlie = true;
            inittileLevel(level1);
        } else
            Toast.makeText(this, "" + mrc, Toast.LENGTH_SHORT).show();

        i++;

        if (i == 2)
            return true;
        else
            return false;
    }
    if (pSceneTouchEvent.isActionUp()) {
        i = 0;
        return true;
    }
    return true;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T04:52:08.020

您可能会问一些不同的问题。您的问题有点难以解释，但我会尝试通过可能的解释来进行可能的解释。

## 检查精灵是否在同一位置

> 当 AndEngine 中的 zindex 值不同时，如何识别两个精灵是否放置在同一位置？

那是你的主题行。我认为你问的有点不同，但如果你只问这些，你可以比较 X 和 Y 并忽略 Z，如下所示：

```
if (sprite1.getX() == sprite2.getX() && sprite1.getX() == sprit2.getY()) return true; 
```

## 检查精灵是否重叠

当然，“相同位置”的含义可能与左上角是否位于同一点不同。例如，您可能想知道两个精灵是否完全重叠，无论它们是否精确地放置在同一个 XY 上。在这种情况下，您想要进行碰撞检测，并且有不止一种方法可以处理碰撞（例如，您想要像素完美的碰撞测试吗？）。无论如何，[这是检测像素完美碰撞的一个很好的例子](https://github.com/m5/andengine-pixel-perfect)。如果你想做一些更简单的事情，你可以为每个精灵获取边界框 Rect 并使用 android.graphics.Rect 中的 intersect() 方法。

## 处理触摸事件

您的问题主体提出以下问题，您似乎遇到了不同的问题：

> 我使用 onAreatouchlistener 来识别精灵，我给瓷砖和精灵 1 的 zvalue 0，但是 onAreaTouchListener 不识别精灵，它只识别瓷砖。当用户触摸特定位置时，我想知道这两个值

现在我很困惑，因为 onAreaTouchListener 不会“识别精灵”，它会监听触摸事件。我的猜测是，您要求的是一种将 touchEvents 用于精灵及其下方的另一个精灵的方法。

## 注册触控区域

首先：确保您为两个精灵注册了处理程序。即，类似：

```
this.mScene.registerTouchArea(sprite); 
```

## 使用 OnTouch() 返回的布尔值

如果 touchevent 没有被传播，另一件事是 onTouch() 返回的布尔值。该布尔值用于指示处理程序是否已使用事件或是否应通过该事件。

## 检查触摸遍历顺序

您还可以使用 scene.setOnAreaTouchTraversalFrontToBack() 和 scene.setOnAreaTouchTraversalBackToFront() 来查看它们是否都在接收触摸事件并且问题正在传播，或者问题是您没有在其中一个精灵上注册处理程序.

## 检查区域绑定

最后看一下scene.setTouchAreaBindingEnabled(true)。您在评论中提到您对“TouchUp”事件特别有疑问。这可能是 touchareabinding 设置为 false 的结果。本质上，toucharea 绑定所做的是它允许触摸区域查看和接收其触摸区域之外的触摸事件。因此，如果手指在该区域内向下并在外面向上（并且绑定已关闭），它将不会接收到触摸事件。如果绑定打开，它仍然会接收到触摸事件。

# css - Kendo UI - 是否可以针对每个组件定位不同的样式？

> ID：14854085
> 
> 赞同：1
> 
> 时间：2013-02-13T12:54:56.800
> 
> 标签：css, grid, styles, kendo-ui

是否可以针对每个组件定位不同的样式？例如，菜单使用 Silver 样式 css，然后网格使用 Default 样式 css。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T15:47:02.597

你可以这样做：

1.  将菜单放在具有“silver”类的元素中：

    ```
    <div class="silver">
        <!-- menu -->
    </div> 
    ```

2.  **通过在每个**CSS 选择器 前面添加来修改**kendo.silver.css ：**`.silver`

     **```
    .silver .k-block,
    .silver .k-widget,
    .silver .k-popup,
    .silver .k-content,
    .silver .k-dropdown .k-input
    /* the rest of kendo.silver.css */ 
    ```** 
***   将网格放置在具有“默认”类的元素内：

    ```
    <div class="default">
        <!-- grid -->
    </div> 
    ```

    *   **通过在每个**CSS 选择器 前面添加来修改**kendo.default.css ：**`.default`

     **```
    .default .k-block,
    .default .k-widget,
    .default .k-popup,
    .default .k-content,
    .default .k-dropdown .k-input
    /* the rest of kendo.default.css */ 
    ```**** 

 ****更多信息可以在[Kendo UI 论坛](http://www.kendoui.com/forums/ui/general-discussions/setting-a-theme-on-individual-controls.aspx)中找到。****

# cocoa-touch - 当 UITableView 在 UIPopoverController 中时，为什么单元格边界和帧大小不正确？

> ID：14854087
> 
> 赞同：2
> 
> 时间：2013-02-13T12:55:03.787
> 
> 标签：cocoa-touch, uitableview, uikit

我有一个带有 XIB 的 UIViewController 子类，它是 320 宽和 400 高。XIB 有一个 UITableView 填充视图的宽度和高度。

在VC的viewDidLoad方法中，我有以下

```
self.contentSizeForViewInPopover = CGSizeMake(600.0, 400.0); 
```

表格视图在弹出窗口中正确显示。到目前为止一切都很好。

现在我以编程方式将 UIProgressView 添加到 tableview 单元格，但有些东西我不明白。在 cellForRowAtIndexPath 方法中，我想设置 UIProgressView 相对于单元格宽度的宽度，但 cell.frame.size.width 和 cell.bounds.size.width 是原始的 320，而**不是**显示的实际 600。

我可以通过使用 tableview 的宽度值来解决它，但我很困惑为什么这些值在单元格级别不正确。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T19:16:46.137

似乎尺寸值与预期的一样

```
- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath 
```

所以我猜测`cellForRowAtIndexPath`和之间`willDisplayCell`是调整弹出框大小的地方。

# json - 如何在 Controller --> Code.js 文件中引用 store？

> ID：14854089
> 
> 赞同：0
> 
> 时间：2013-02-13T12:55:08.410
> 
> 标签：json, extjs, extjs4, extjs4.1, extjs-mvc

我将 JSON 格式存储到存储文件夹的 Code.js 中。

**“商店”文件夹-> Code.js**

```
Ext.define('LoginPage.store.Code', {    
    extend: 'Ext.data.Store',
    model: 'LoginPage.model.Code',
    autoLoad: true,   
    proxy: {
       type: 'ajax',
       api: {
            read: 'data/loginResponse.json',
            update: 'data/checkCredentials.json'  //contains:  {"success": true}
       },
           reader: {
           type: 'json',
           root: 'login',
           successProperty: 'success'
           }
    }
}); 
```

**“模型”文件夹 --> Code.js**

```
Ext.define('LoginPage.model.Code', {
   extend: 'Ext.data.Model',
   fields: [
       {name: 'username', type: 'string'},
       {name: 'password', type: 'string'}   
   ]
}); 
```

现在如何在控制器文件夹的 Code.js 中声明 store 的变量？

我的 JSON 格式如下所示，格式正确：

**登录响应.json**

```
{
"login": [
  {
    "username": "venkat",
    "password": "123"
  },
  {
    "username": "admin",
    "password": "345"
  },
  {
    "username": "sam",
    "password": "234"
  },
  {
    "username": "paul",
    "password": "456"
  }
]
} 
```

我试过 ：

```
var store = Ext.create('LoginPage.store.Code');  
//showing no errors and also I can't see any items in it
//when checked through Chrome console. 
```

当我将创建的存储变量保存在中时，chrome 控制台显示以下消息`console.log(store);`

![在此处输入图像描述](../Images/e5a17abe5ba79116b4fa42469b746f29.png)

**编辑**： *即使凭据正确，以下函数也始终返回 false*

```
checkJson: function(username, password){    
    var store = Ext.create('LoginPage.store.Code');
    var matched = store.query('username', username);
    //console.log(matched);
    if(matched.length && matched[0].get('password') === password) {
         return true;
    }
    else{
        return false;
    }
 } 
```

**Chrome 控制台中匹配**的变量消息。（**用户名**=“venkat”，**密码**=“123”）

![在此处输入图像描述](../Images/0706c4c0d5226bcb3e6216630cecd215.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T15:37:17.827

就像大家说的，首先要知道store有没有加载。加载商店后，您可以像这样检查凭据

```
var match = codeStore.findBy(function(record,id) {
                if(record.get('username')==credentials.username
                       && record.get('password')==credentials.password) {
                    return true;
                }
            });

            if(match != -1) 
                alert('correct');
            else
                alert('incorrect'); 
```

我使用您提供的数据准备了一个示例，但使用的是本地商店。我希望它可以帮助你

[http://jsfiddle.net/alexrom7/chn8Z/1/](http://jsfiddle.net/alexrom7/chn8Z/1/)

编辑：我没有在标题中看到问题，或者我不知道您是否更改了：p。在这种情况下，您可以通过执行此操作来访问控制器文件中的代码存储

```
Ext.getStore('Code'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T13:46:33.483

您可以使用**queryBy**方法。此方法中的指定函数将与此 Store 中的每条记录一起调用。你可以在这个函数中编写你的逻辑来检查记录是否存在。

```
store.queryBy(function(m,id){ 
```

});

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T14:03:56.007

我将首先检查 chrome 开发工具的网络选项卡，以确保您的 json 文件被正确请求并返回。之后，我会检查 store.data.items 以查看数据是否通过但未正确解析。最后，我会将 success: true 属性添加到您在 read 调用中返回的 json 中。这是 Ext 知道服务器上的一切都按计划进行的唯一方法。

# logging - 以“实时”速度重播日志文件？

> ID：14854093
> 
> 赞同：2
> 
> 时间：2013-02-13T12:55:26.597
> 
> 标签：logging, real-time, hbase, simulation, flume

我开始研究一种工具，该工具应该能够近乎实时地处理来自系统（如 apache、syslog 等）的日志文件。

我正准备使用storm/flume/hbase-coprocessors 等工具来实现这一点。

因为我希望能够以“全生产速度”离线测试它，所以我正在寻找一种工具，它可以帮助我以与将系统连接到生产环境时相同的速度重播旧的生产日志文件。

我一直在想，基本上这就是我的想法：

1.  根据日志文件，我使用一些参数运行该工具：
    *   哪个日志文件
    *   行的哪一部分是时间戳
    *   “现在”的时间偏移
2.  然后该工具读取文件（无输出），直到看到“now+offset”。
3.  然后它开始以与日志文件中的时间戳所指示的速度大致相同的速度输出行。

是否存在执行此类操作的现有工具？

还是有更好的解决方案来运行这种离线“全速”模拟？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-22T18:30:58.867

我认为以下开源库（用 GO 编写）可能会满足您的要求： [https ://github.com/buger/gor/](https://github.com/buger/gor/)

# mysql - MySQL：使用范围 Where 子句的 Order By 索引

> ID：14854098
> 
> 赞同：1
> 
> 时间：2013-02-13T12:55:32.930
> 
> 标签：mysql, database-performance

在我重写我的查询和代码等之前，只是想验证一下......

确实没有办法创建索引或重写下面的查询，以使索引用于过滤日期（这是一个范围或一组日期）并用于对价格进行排序？如果可能，怎么做？

```
select id 
from my_table
where  date in ('2013-02-13', '2013-02-14' )
order by price; 
```

我的问题是日期过滤器实际上可能返回很多（> 100,000）行，我需要这些按价格排序。

# jquery-mobile - jQuery Mobile 响应式表不工作

> ID：14854100
> 
> 赞同：3
> 
> 时间：2013-02-13T12:55:40.060
> 
> 标签：jquery-mobile

我一直在使用 jQuery Mobiles 新的响应式表格。我有 3 张桌子，其中 2 张按预期工作，但由于某种原因，最后一张拒绝工作。

这是代码：

```
<table data-role='table' id='TableProfile' class='ui-responsive table-stroke'>
<thead>
    <tr>
        <th data-priority='persist'>#</th>
        <th data-priority='persist'>Title</th>
        <th>Author</th>
        <th>Publisher</th>
        <th>Edition</th>
        <th data-priority='3'>Condition</th>
        <th data-priority='2'>Price</th>
        <th>Sold</th>
    </tr>
</thead>
<tbody>
    <tr>
        <td>1</td>
        <td>Thomas Calculus Early Transcendentals</td>
        <td>MD.Weir, GB.Thomas Jr, J. Hass, FR.Giordano</td>
        <td>Brooks/Cole</td>
        <td>12</td>
        <td>5</td>
        <td>750</td>
        <td><input type='button'  value='Sold' name=70/></td>
    </tr>
    <tr>
        <td>2</td>
        <td>Thomas Calculus Early Transcendentals</td>
        <td>MD.Weir, GB.Thomas Jr, J. Hass, FR.Giordano</td>
        <td>Brooks/Cole</td>
        <td>10</td>
        <td>4</td>
        <td>1000</td>
        <td><input type='button'  value='Sold' name=73/></td>
    </tr>
</tbody>

</table> 
```

我使用的是 jQuery Mobile 1.3 版，但我不知道为什么这个表不工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T13:15:06.457

我确定在某些地方存在错误，因为此功能是新功能。现在解决我的问题是完全关闭我正在使用的选项卡，然后再次打开网站并且它可以工作。刷新页面不会解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T13:29:59.677

你确定你使用的是 jQuery > 1.7 吗？jQuerymobile 需要 jQuery 1.7 或更高版本才能运行。

我已经尝试过了，它似乎有效。

这样做的标准方法是：

```
 <table data-role="table" id="my-table" data-mode="reflow">
      <thead>
        <tr>
          <th>Rank</th>
          <th>Movie Title</th>
          <th>Year</th>
          <th><abbr title="Rotten Tomato Rating">Rating</abbr></th>
          <th>Reviews</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <th>1</th>
          <td><a href="foo.com" data-rel="external">Citizen Kane</a></td>
          <td>1941</td>
          <td>100%</td>
          <td>74</td>
        </tr>
        </tbody>
    </table> 
```

您的代码的工作示例：http: [//jsfiddle.net/AYSJZ](http://jsfiddle.net/AYSJZ)

# c# - 自动记录异常 c#

> ID：14854103
> 
> 赞同：2
> 
> 时间：2013-02-13T12:55:47.273
> 
> 标签：c#

我正在用 vs2010 编写一个自动化（测试项目）。我已经有一个带有相关 Info(string)、Debug(string) 和 Error(string, Exception) 方法的 Logger 类，它实现了将消息正确写入文件。

现在，我知道我的信息日志必须专门写在我的测试代码中，但是无论如何都会自动编写错误消息作为抛出异常的实现？异常是设计的一部分（我需要抛出它们以确定每个测试的通过/失败状态）。

我可以将所有代码包装在 try-catch 中的基本实现，在 catch 块中写入 Logger.error()，然后再次抛出异常，如下所示：

```
public class Test
{
    ["TestMethod"]
    public void RunTest()
    {
        try
        {
            //run my code here
        }
        catch (Exception ex)
        {
            Logger.Error("Error message", ex);
            throw;
        }
    }
} 
```

但是我不确定使用 try-catch 来记录错误是一个正确的设计。

我想到了两件事：

1.  创建一个侦听器线程，它将捕获我的异常，记录它们并重新抛出它们......
2.  操作 Exception 类以使用 mt Log.Error() （或从中派生 MyException 并操作我的代码以仅抛出 MyException）。
3.  我已经尝试安装 Enterprise-Library 并使用日志记录块，但我不确定这是否适合我的需要（而且我无法获取 LogWriter 的实例或使用 Logger.Write 无论如何） .

我走对了吗？还有其他方法可以实现这种“自动写入错误”吗？

谢谢， 埃拉德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T13:50:49.560

满足您的要求的一种可能方法是使用逻辑包装您的函数和方法以处理日志记录/仪器。您可以让您的测试类都扩展一个自定义基类，或者只创建一个实用程序类并调用包装功能。请参见下面的示例。

实用程序类

```
class Utility
{
    public static void Wrap(Action method, params object[] parameters)
    {
        try
        {
            //additional logging / events - see example below
            Debug.WriteLine("Entering : {0} @ {1}", method.Method.Name, DateTime.Now);
            foreach (var p in parameters)
            {
                Debug.WriteLine("\tParameter : {0}", new object[] { p });
            }

            method();
            //additional logging / events - see example below
            Debug.WriteLine("Exiting : {0} @ {1}", method.Method.Name, DateTime.Now);
        }
        catch (Exception ex)
        {
            //Log exception
            throw;
        }
    }

    public static T Wrap<T>(Func<T> method, params object[] parameters)
    {
        try
        {
            //additional logging / events - see example below
            Debug.WriteLine("Entering : {0} @ {1}", method.Method.Name, DateTime.Now);
            foreach (var p in parameters)
            {
                Debug.WriteLine("\tParameter : {0}", new object[]{p});
            }

            var retValue = method();
            //additional logging / events - see example below
            Debug.WriteLine("Exiting : {0} @ {1}", method.Method.Name, DateTime.Now);
            return retValue;
        }
        catch (Exception ex)
        {
            //Log exception
            throw;
        }

    }
} 
```

示例使用

```
public static void SayHello()
    {
        Utility.Wrap(() =>
            {
                SayHello(" world ");
            });
    }

    public static void SayHello(string name)
    {
        Utility.Wrap(() =>
        {
            Console.WriteLine("Hello {0}", name);
        }, name);
    }

    public static int GetCount(string s)
    {
        return Utility.Wrap(() =>
        {
            return string.IsNullOrEmpty(s) ? 0 : s.Length;
        }, s);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T13:09:25.167

您应该只在应用程序的最高级别上实现 try-catch 块。在那里你可以处理你的异常并记录它。

对于未处理的异常，您可以连接一个事件，例如：`AppDomain.CurrentDomain.UnhandledException`

在 Asp 中，您可以使用 On_Error。这取决于项目的类型。

# phpmyadmin - 将文本从一个字段复制到另一个字段

> ID：14854105
> 
> 赞同：0
> 
> 时间：2013-02-13T12:55:49.927
> 
> 标签：phpmyadmin, copy

在 phpmyadmin 表 products_description 中，如何将文本从字段“products_name”复制到字段“products_head_title_tag”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T13:00:06.247

这很简单

```
UPDATE products_description SET products_head_title_tag = products_name; 
```

# wordpress - 如何在 Wordpress 中调用 get_users() 的简单示例

> ID：14854106
> 
> 赞同：1
> 
> 时间：2013-02-13T12:55:54.140
> 
> 标签：wordpress

我是 Wordpress 中高级功能的新手，我只是想了解如何在我的 Wordpress 网站的某个位置获取用户列表。我知道我必须调用该函数`get_users()`（[http://codex.wordpress.org/Function_Reference/get_users](http://codex.wordpress.org/Function_Reference/get_users)），但我不知道我会在哪个文件（以及在哪里）调用它，因此我将使用 URL它？

我希望我可以看到超级基本/最低限度的复制和粘贴示例，我可以将其粘贴在我的 WP 目录中的某个地方，然后运行以说明我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T03:17:28.883

首先，您需要决定要在哪里显示用户列表（页面？主页？），如果您解释了您想对列表做什么，这将有所帮助。

选择一个模板或创建一个新模板，您所要做的就是像这样调用这个函数：

```
<ul>
<?php
    $blogusers = get_users('blog_id=1&orderby=nicename');
    foreach ($blogusers as $user) {
        echo '<li>Nick: ' . $user->user_nicename . '</li>';
        echo '<li>Name: ' . $user->display_name. '</li>';
        echo '<li>Email: ' . $user->user_email. '</li>';
    }
?>
</ul> 
```

> 您知道您可以从仪表板中获取用户列表吗？(..../wp-admin/users.php)

# math - 如何计算 Asus Xtion Pro Live 传感器的可见边界

> ID：14854107
> 
> 赞同：2
> 
> 时间：2013-02-13T12:55:57.097
> 
> 标签：math, computer-vision, kinect, trigonometry, asus-xtion

我使用[Asus Xtion Pro Live 传感器](http://www.asus.com/Multimedia/Xtion_PRO_LIVE/#specifications)进行了基本设置，传感器悬挂在地面以上 3m 处，直视下方。我正在尝试计算以米为单位的可见界限。

这是一个图表来说明这一点： ![华硕地面传感器设置](../Images/3671d050a2c46f5b6ecd2b2ff18dbb6a.png)

我知道 FOV 角度：

```
Field of View
58° H, 45° V, 70° D (Horizontal, Vertical, Diagonal) 
```

我想用一点三角来解决它。如果我将 HFOV 取一半并想象形成的直角三角形，我可以使用切线（相反/相邻），知道角度来计算对面：

```
opposite = adjacent * tan(29)
opposite = 3m * tan(29)
opposite ~= 2.66m 
```

只是为了测试，我还编写了一个非常基本的程序，使用[Processing](http://processing.org)和[SimpleOpenNI](http://code.google.com/p/simple-openni)进行测量：标记两个点，获取 3D 坐标并计算距离。

```
import SimpleOpenNI.*;

SimpleOpenNI ni;
PVector m1,m2,p1,p2;
PVector[] realWorldMap;

void setup(){
  size(640,480);stroke(0,192,0);
  ni = new SimpleOpenNI(this);
  if(!ni.enableDepth()) exit();
  ni.alternativeViewPointDepthToImage();
}
void draw(){
  ni.update();
  realWorldMap = ni.depthMapRealWorld();
  image(ni.depthImage(),0,0);
  if(m1 != null && m2 != null) line(m1.x,m1.y,m2.x,m2.y);
  if(p1 != null && p2 != null) text("distance :"+(int  )(p1.dist(p2)*.1)+" cm",5,15);
}
void mouseReleased(){
  if(!keyPressed){
    m1 = new PVector(mouseX,mouseY);
    p1 = realWorldMap[mouseY*640 + mouseX];
  }else{
    m2 = new PVector(mouseX,mouseY);
    p2 = realWorldMap[mouseY*640 + mouseX];
  }
}
void keyPressed(){
  if(key == ' ') m1 = m2 = p1 = p2 = null;
} 
```

我有 ~2.6 作为最宽的测量值，但我有点困惑，因为我认为对面只有截锥体底部宽度的一半，所以预期 ~5.3m。我的假设是错误的吗？如果是这样，我做错了什么/计算这个的正确方法是什么？

我也使用过 Kinect 标签，因为同样的原理也适用于 kinect 传感器

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-08T09:25:21.413

您应该首先将度数转换为弧度：

```
tan(29 degrees)=tan(0.5061 rad)=0.5543. 
```

因此，`opposite=0.5543*3m=1.663m` 水平可见边界是`2*opposite=3.33m`

因此，上面提到的经验法则是一个很好的估计 ( `3m*1.1=3.3m`)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T01:30:44.277

在 Excel 或 OpenOffice Calc 中计算可能更方便。

根据经验，Kinect 的水平视野（作为线性宽度）大约是距传感器距离的 1.1 倍。更不准确的是，距离传感器给定距离 D 处的图像宽度与距离 D 相同，尤其是当您合并了彩色和深度图像并且边缘周围有黑色深度像素时。

```
D = distance from sensor
theta = angular field of view of Kinect = 57 degrees

tangent (angle) = opposite/adjacent

tan (theta/2) = (ImageWidth/2) / D
D * tan (theta/2) = ImageWidth/2
2 * D * tan (theta/2) = ImageWidth

ImageWidth(D) = 2D * tan(28.5 degrees) 
```

例如，

```
ImageWidth(1.0m) = 2 (1.0) * tan(28.5 degrees) = 2 * (1.0) * 0.543 = 1.08m 
```

# javascript - 谷歌脚本复制列的值并在电子表格中插入新列

> ID：14854109
> 
> 赞同：3
> 
> 时间：2013-02-13T12:56:03.403
> 
> 标签：javascript, google-apps-script, google-sheets

我已经开始创建一个电子表格来监控来自 facebook、youtube 等的一些结果......我做的很多事情都是从这个网站上以前的答案中学到的。

现在我一直在努力寻找一个可以帮助我执行以下操作的脚本：

A 列包含指标的描述
B 列包含从外部来源提取指标的公式（例如，我的 facbeook 页面的点赞数、我的 YT 频道的视频观看次数）

我想要一个每周一运行并执行以下操作的脚本：

1.  在 B 列和 C 列之间插入一个新列（将 B 之后的所有列向下移动 1 个位置）
2.  复制 B 列并仅将值（不是公式）粘贴到新的空列 C 中
3.  在 C 列 (C1) 的顶部写下类似 Week Commencing YYYY/MM/DD 之类的内容，其中 YYYY/MM/DD 是前一周星期一的日期

我已经尝试了这个的修改版本（来自[http://www.kraukoblog.com/marketing/tutorial-watch-your-competitors-facebook-pages-with-google-docs/](http://www.kraukoblog.com/marketing/tutorial-watch-your-competitors-facebook-pages-with-google-docs/)）：

```
function UpdateFblikes() {
  var sheet =SpreadsheetApp.getActiveSheet(); //define spreadsheet name
  var column = sheet.getRange("O1").getValue();
  var row = 4;
   Utilities.sleep(4000);  // Slowdown the script (4 second)
   var nblike = sheet.getRange("E4:E60"); // Select and copy the column
   nblike.copyValuesToRange(sheet, column+5, column+5, row, row+56); // Paste the data
  sheet.getRange(3, column+5).setValue(new Date()); // add date in column title
   sheet.getRange("O1").setValue(column+1);  // Incremente variable
} 
```

但它只在列中写入日期。

这将使我能够比较这些指标的每周变化。

这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T15:22:55.990

通过浏览谷歌开发者页面上的不同教程，我已经能够找到解决方案。这是我创建的功能

```
function insertcolumn() {
// The code below will insert 1 column after column 5 in sheet 4
var ss = SpreadsheetApp.getActiveSpreadsheet();
var sheet = ss.getSheets()[4];
sheet.insertColumns(5, 1); 

// Get the range of cells that store data to be copied having created a named range for the column in the spreadsheet.
  var valuestocopy = ss.getRangeByName("valuestocopy")

// The code below copies the range valuestocopy cells to column five up to 100 rows

valuestocopy.copyValuesToRange(sheet, 5, 5, 1, 100); } 
```

# c# - 由经过身份验证的用户运行时，无法在 Windows 7 Enterprise 64 位中加载 dll 库

> ID：14854110
> 
> 赞同：0
> 
> 时间：2013-02-13T12:56:10.490
> 
> 标签：c#, dll, 64-bit, exe

一段时间以来一直在努力解决这个问题。任何帮助都感激不尽。

我的 Windows 应用程序“exe”无法加载以下 Dll。- zlib.dll 和 zlib1.dll（使用 DOTZLIB 包装器）

简单描述一下运行环境。（该应用程序与管理员用户帐户完美配合。） - 操作系统：Windows 7 Enterprise 64 位 - 用户：经过身份验证的用户（不在管理员组中）

然而奇怪的是，如果使用参数运行，程序会成功加载 Dll。即c:> ApplicationName.exe "Filename.XXX" 或双击filename.xxx。运行实际的 exe 或其快捷方式失败。

任何人都可以阐明这个问题吗？欢迎任何建议或解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T12:59:28.650

问题有点模糊。您是什么意思“应用程序无法加载 DLL”？它会崩溃吗？

如果您在启动时打开文件，听起来应用程序会加载 zlib。这对我来说很有意义......它在需要它之前不会加载它。

# imagemagick - imagemagick -highlight-color 方法

> ID：14854116
> 
> 赞同：1
> 
> 时间：2013-02-13T12:56:29.787
> 
> 标签：imagemagick, qtp

我正在使用 imagemagick 命令：

```
compare imgcopy.tif imgorig.tif -compose src -highlight-color blue imgdif.tif 
```

在 qtp 中是这样的：

```
set img = CreateObject("ImageMagickObject.MagickImage.1")
img.Compare Path & img1.tif, path & img2.tif ,"-compose src -highlight-color blue & path & imgdif.tif 
```

它不起作用......

如果我不使用它

```
-compose src -highlight-color 
```

该命令工作正常

```
 set img = CreateObject("ImageMagickObject.MagickImage.1")
    img.Compare Path & img1.tif, path & img2.tif ,path & imgdif.tif 
```

# php - PHP 只允许访问特定的引荐来源网址/页面

> ID：14854117
> 
> 赞同：11
> 
> 时间：2013-02-13T12:56:31.563
> 
> 标签：php

所以我的问题很简单，我使用以下方法允许通过引用者的域名访问 php 脚本，但我想只允许匹配完整 url 的引用者访问。

```
<?php
if (isset($_SERVER['HTTP_REFERER']) && $_SERVER['HTTP_REFERER'] != 'domain.com')
{
echo "Eexcuting code here";
} else {
echo('Hot Linking Not Permitted');
// display some message / image / video
exit;
}
?> 
```

因此，如果引荐来源网址与[http://www.domain.com/page.html](http://www.domain.com/page.html)匹配，则允许访问，否则如果阻止它。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-02-13T13:08:42.547

这将是不安全的，因为引荐来源数据很容易被欺骗。但是，如果它仍然满足您的需求，那么您应该已经可以使用您的代码，因为`$_SERVER['HTTP_REFERER']`它包含完整的引用 URL 而不仅仅是域。实际上，您当前的代码需要一些调整，因为它不能这样工作：

```
<?php
// This is to check if the request is coming from a specific domain
$ref = $_SERVER['HTTP_REFERER'];
$refData = parse_url($ref);

if($refData['host'] !== 'domain.com') {
  // Output string and stop execution
  die("Hotlinking not permitted");
}

echo "Executing code here";
?> 
```

请注意，如果您在检查它是否是您想要的之前检查是否设置了 HTTP_REFERER，那么人们会在根本没有设置任何引荐来源网址的情况下访问您的脚本，因此无论如何您都应该检查它。现在，检查特定的 URL 要简单得多：

```
<?php
// This is to check if the request is coming from a specific URL
$ref = $_SERVER['HTTP_REFERER'];

if($ref !== 'http://domain.com/page.html') {
  die("Hotlinking not permitted");
}

echo "Executing code here";
?> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-13T13:20:18.767

你想要保护的是什么？

你不应该相信 HTTP_REFERER 因为它可以被欺骗（正如其他人指出的那样）。此外，一些防火墙和安全软件会重写或删除引用者，并非所有浏览器都能正确报告。

如果它是敏感数据，那么我个人会在页面之间传递一个哈希值。

# javascript - 模态关闭时如何关闭所有可折叠的div？

> ID：14854122
> 
> 赞同：0
> 
> 时间：2013-02-13T12:56:44.880
> 
> 标签：javascript, jquery, html, twitter-bootstrap

我的问题很简单，但是在查看了各自的 API 之后，我不知道如何完成以下操作：

在我的网页上，我有一个[modal](http://twitter.github.com/bootstrap/javascript.html#modals)。此模式包含一个带有几个可折叠元素的[手风琴。](http://twitter.github.com/bootstrap/javascript.html#collapse)`div`当我打开模态时，在手风琴中打开一些可折叠项，关闭模态并再次打开模态，打开的可折叠项仍然打开。我宁愿希望在模态关闭时关闭所有打开的可折叠项。我怎么做？

或者，为了进一步简化我的问题，我通常如何一次关闭手风琴中所有打开的可折叠项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T13:09:54.253

如果您`accordion-body`根据链接的示例使用手风琴正文部分的类名，并且您的模态具有`myModal`根据您的其他示例的 id，则：

```
$("#myModal").on("hidden", function() {
    $("#myModal .accordion-body").collapse("hide");
}); 
```

每次隐藏模态时都会折叠模态的手风琴部分。

# asp.net-mvc-4 - 在 MVC 应用程序中右键单击 Controllers 文件夹时的自定义菜单项

> ID：14854125
> 
> 赞同：1
> 
> 时间：2013-02-13T12:56:55.223
> 
> 标签：asp.net-mvc-4, controller, mvcextensions

我可以添加自定义菜单项吗，当用户单击 MVC 应用程序中的 Controllers 文件夹时，可以在右键菜单中说“添加 xxx 控制器”。

问候， 帕蒂尔

# iphone - Segue，堆上的 UIViewController 和 self.view 会发生什么？

> ID：14854127
> 
> 赞同：1
> 
> 时间：2013-02-13T12:57:02.080
> 
> 标签：iphone, objective-c, uiviewcontroller, segue

当在 UIViewController 上调用 viewDidUnload 时，self.view 最终会被销毁，其分配的内存将返回到堆中，但父 UIViewController 仍保留在堆上。

当使用故事板执行 segue 时，目标控制器及其相关视图被创建和初始化，下一次执行 segue 时，会创建一个全新的控制器。

我的问题是有谁知道segue最终是否将UIViewController和视图都返回到堆中，我会假设它确实如此，因为下次执行segue时一切都会重新创建？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T16:03:21.887

我会构建一个测试应用程序。测试的结果是，在调用 viewDidUnload（在目标 viewController 中）之后，再次执行序列（目标 viewController 的）新的 view-和 viewController 实例被创建。

# android - 从 sdcard 读取 json 文件返回 - 空指针异常

> ID：14854130
> 
> 赞同：2
> 
> 时间：2013-02-13T12:57:09.900
> 
> 标签：android, json, android-sdcard

我搜索了所有相关线程，但没有成功，欢迎任何相关答案。

`.json`我在文件夹内的 SDCard 中有一个 JSON 数据作为`.NewFolder`文件，我想读取文件中的数据并解析，找到时间戳，如果时间戳不同，我想重写它。

下面是我使用的代码，我得到了数据`aBuffer`和值，`jdata_fromfile`但是在解析时我得到了 nullPointerException。

```
myFile = new File(Environment.getExternalStorageDirectory() + "/.NewFolder/" +str.get(i));
if(myFile.exists())
{
    FileInputStream fIn = new FileInputStream(myFile);
    BufferedReader myReader = new BufferedReader(new InputStreamReader(fIn));
    String aDataRow = "";
    String aBuffer = "";
    while ((aDataRow = myReader.readLine()) != null) 
    {
        aBuffer += aDataRow;
    }
    myReader.close();
    jdata_fromfile = new JSONObject(aBuffer);

    String timestamp_fromfile = jdata_fromfile.getString(str_timestamp.get(i));
    timestamp_val_fromfile.add(timestamp_fromfile);
}
else
{
    myFile.createNewFile();
    writedate_tofile(value_json.toString());
    timestamp_val_fromfile.add("xxx");
} 
```

而且，当我在记事本中打开文件时，它都在一行中，仅显示部分数据，当我复制到[http://jsonformatter.curiousconcept.com时](http://jsonformatter.curiousconcept.com)

我得到了全部数据和一个有效的 json 。当我这样做时，我可以在记事本中看到其余数据 - ctrl+end 并按 enter 。

为什么会这样，我哪里出错了？

这是我的错误 - 日志

```
02-13 18:44:52.109: E/aBuffer value(7134):  is {"Status":{"Itemlist":[{"x - Drinks":{"Details":[{"type":"","image":"","price":"","name":"Minerals"},{"type":"","image":"","price":"","name":"Milk Shakes"},{"type":"","image":"","price":"","name":"Milk"},{"type":"","image":"","price":"","name":"Mineral Water"},{"type":"","image":"","price":"","name":"Hot Beverages"},{"type":"","image":"","price":"","name":"Chocolate Muffin and Ice Cream"}, ........................................................................{"type":"","image":"","price":"","name":"Blu
02-13 18:44:52.189: E/jdata_fromfile value(7134):  is {"x Time_stamp":"2013-02-12 12:30:00","Status":{"Itemlist":[{"x - Sides":{"Details":[{"type":"","image":"","name":"Onion Rings (6)","price":""},{"type":"","image":"","name":"Sausage Portion (Minimum 2 per portion)","price":""},.................................................................................................................... ,"x - Burgers":{"Details":[{"type":"","image":"","name":"x 5oz Burger","price":""},{"type":"","image":"","name":"x 5oz Cheese Burger","price":""},{"type":"","image":"","name":"x 5oz with Bacon and Cheese","price":""},{"type":"","imag
02-13 18:44:52.189: E/Reading from internal file - Exception e(7134): java.lang.NullPointerException 
```

提前致谢 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T17:17:15.727

我不知道上面的代码有什么问题，但这里是使用不同 JSON 库的解决方案。

我在我的一个 android 应用程序中使用了以下代码，它非常适合从 android 文件系统读取任何 json 文件。我没有使用 Android 的 JSON 库，而是使用`json-simple.jar`了[http://code.google.com/p/json-simple/](http://code.google.com/p/json-simple/)

将上面的 jar 放在你的 Android 项目的 libs 文件夹中。并在`.Manifest`文件中设置以下权限。

```
<uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE"/> 
```

然后将以下代码放在单独的线程中。

```
JSONParser parser  = new JSONParser();
try { 
    String PATH = Environment.getExternalStorageDirectory() + "/Download/list.json";
    Object object = parser.parse(new FileReader(PATH));             
    JSONObject jsonObject = (JSONObject) object;
    //Use JSONArray instead of JSONObject if json file contains array of JSONs
    //
    // Do anything with jsonObject  
    //
} catch(Exception e) {
    // TODO: handle exception
} 
```

我的`list.json`文件位于 location `/mnt/sdcard/Download`。

[这里](http://www.mkyong.com/java/json-simple-example-read-and-write-json/)是一个在简单的 java 项目中使用上述库的示例，供参考。

# python - 如何防止系统挂起/锁定（Python/C/Bash）

> ID：14854131
> 
> 赞同：2
> 
> 时间：2013-02-13T12:57:26.003
> 
> 标签：python, c, linux, ubuntu

如何防止系统（在我的应用程序打开时）暂停？（Linux - Ubuntu 10.04）如果仅通过 python 不可能，也许是一些 Bash、C 命令/库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T13:05:27.727

在蟒蛇

```
import dbus
_session_bus = dbus.SessionBus()

_dbus_screensaver = _session_bus.get_object('org.freedesktop.ScreenSaver','/ScreenSaver')

simulate_activity = _dbus_screensaver.get_dbus_method('SimulateUserActivity','org.freedesktop.ScreenSaver')

simulate_activity() 
```

在 bash 中：

```
qdbus org.freedesktop.ScreenSaver /ScreenSaver org.freedesktop.ScreenSaver.SimulateUserActivity 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T13:01:41.003

如果您想在 C 中执行此操作，请从这里开始：[https ://wiki.ubuntu.com/GnomePowerManagerInactiveSleep](https://wiki.ubuntu.com/GnomePowerManagerInactiveSleep)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T16:35:18.667

您可以添加脚本以`/etc/pm/sleep.d/`在应用程序运行时返回错误

```
#! /bin/sh

ps -e -o comm | grep -q application
if test $? -eq 0; then
    exit 1
fi 
```

当您`application`在进程列表中找到并且脚本以错误 ( `1`) 退出时，挂起将被中止。否则它会返回`0`并且暂停继续。

当然，您可以为您的应用程序使用任何其他测试。

# c# - 在 PHP 上加密但不能在 C# 上解密

> ID：14854133
> 
> 赞同：4
> 
> 时间：2013-02-13T12:57:31.327
> 
> 标签：c#, php, encryption, des

我有一个带有以下内容的 test.php：

```
echo encrypt("something");

function encrypt($str)
{
        $enc_key = "my key is 8 char long";
        $ivArray=array( 0x10, 0x12, 5, 0x11, 0x23, 1, 0x55, 0x43 );
        $iv=null;
        foreach ($ivArray as $element)
                $iv.=CHR($element);

        return strtoupper(bin2hex(base64_encode(mcrypt_encrypt(MCRYPT_DES, $enc_key, $str, MCRYPT_MODE_CBC, $iv))));
} 
```

* * *

然后在我的 C# 代码上，我有：

```
private static byte[] iv = new byte[] { 0x10, 0x12, 5, 0x11, 0x23, 1, 0x55, 0x43 };

public string ConvertString(string input, string myKey)
{
    try
    {
        input = byteArrayString(input);
        byte[] bytes = Encoding.UTF8.GetBytes(myKey);
        byte[] buffer = Convert.FromBase64String(input);
        DESCryptoServiceProvider provider = new DESCryptoServiceProvider();
        MemoryStream stream = new MemoryStream();
        CryptoStream stream2 = new CryptoStream(stream, provider.CreateDecryptor(bytes, iv), CryptoStreamMode.Write);
        stream2.Write(buffer, 0, buffer.Length);
        stream2.FlushFinalBlock();
        return Encoding.UTF8.GetString(stream.ToArray());
    }
    catch
    {
        return string.Empty;
    }
}

private string byteArrayString(string input)
{
    byte[] buffer = new byte[input.Length / 2];
    for (int i = 0; i < input.Length; i += 2)
    {
        if (i < input.Length)
        {
            buffer[i / 2] = (byte)((Uri.FromHex(input[i]) * 0x10) + Uri.FromHex(input[i + 1]));
        }
    }

    return Encoding.UTF8.GetString(buffer);
} 
```

* * *

如果我在 C# 上完成所有操作，那么从 PHP 到 C# 的区别在于 PHP 生成的加密是 12 个字节。

**我在 PHP 端做错了什么来匹配加密？**

* * *

更新（PKCS7）：

```
$block = mcrypt_get_block_size('des', 'cbc');
$len = strlen($str);
$padding = $block - ($len % $block);
$str .= str_repeat(chr($padding),$padding); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T14:10:56.100

在 CodesInChaos 的帮助下，我在 php 端使用以下代码解决了它，以正确填充它。

CodesInChaos 如果您想发布回复，我会将其标记为正确答案，否则我将标记此答案。

```
$block = mcrypt_get_block_size('des', 'cbc');
$len = strlen($str);
$padding = $block - ($len % $block);
$str .= str_repeat(chr($padding),$padding); 
```

# javascript - 将字符串从一个 html 传递到另一个

> ID：14854138
> 
> 赞同：2
> 
> 时间：2013-02-13T12:57:56.330
> 
> 标签：javascript, html, string, local-storage

我试图通过 window.localstorage 将字符串值从一个 html 传递到另一个，但它似乎不起作用，这是我的代码：

index.html 上有一个按钮：

```
<a href="./comer.html" onclick="passString("whatever")"> 
```

功能：

```
function passString(optionch){
    window.localStorage.setItem("option", "optionch");
} 
```

然后在另一个 html 中，我尝试使用该字符串：

```
<body onload="pruebaString()">
<ul>
 ....
<li id="testString"> 
```

功能：

```
function pruebaString(){
    document.getElementById("testString").innerHTML =
        window.localStorage.getItem("option");
} 
```

但`li`不显示任何内容，并且我在 chrome 控制台上没有收到任何错误。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T13:02:54.590

该行将`onclick="passString("whatever")"`导致问题使用单引号代替：`onclick="passString('whatever')"`.

也`.setItem("option", "optionch");`应该`.setItem("option", optionch);`像您传递变量 optionch 而不是字符串 optionch 一样。

编辑：在您的脚本有机会执行之前，该页面也可能被重定向。尝试这样的事情：

**HTML**

```
<a href="#" onclick="passString('whatever')"> 
```

**JS**

```
function passString(optionch){
    window.localStorage.setItem("option", optionch);
    window.location.href = '**[pageyounavigateto]**';
} 
```

# c# - Windows 服务 - 注入回调？

> ID：14854141
> 
> 赞同：1
> 
> 时间：2013-02-13T12:58:06.057
> 
> 标签：c#, .net, topshelf

我创建了一个 TCP 侦听器（网络套接字）实例作为 TopShelf Windows 服务。由于这个项目是一个带有 Main() 的服务而不是一个类库，我不确定如何创建一个允许我注入回调的构造函数。

具体来说，这个想法是当 TCP 侦听器收到消息时，它应该调用注入的回调方法。通常使用类库我会创建一个构造函数，将 ICallback 作为参数并相应地实例化。

我可以使用我的 TopShelf 服务执行构造函数注入吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T14:22:15.310

像这样：

```
 HostFactory.New(x =>
                {
                    x.SetDisplayName("Your service");
                    x.SetServiceName("yourservice");
                    x.Service<MyService>(c =>
                    {
                        c.SetServiceName("My service");
                        c.ConstructUsing(name => container.Resolve<MyService>());
                        c.WhenStarted(s => s.Start());
                        c.WhenStopped(s => s.Stop());
                    });

                })
                    .Run(); 
```

# android - 垂直 ListView (Android) 中的虚线分隔线

> ID：14854149
> 
> 赞同：0
> 
> 时间：2013-02-13T12:58:22.897
> 
> 标签：android, xml, android-linearlayout, divider, dotted-line

我已经浏览了所有虚线分隔线主题，但不知何故我的问题仍然存在：

我有一个垂直的线性布局，并希望在线性布局中的每个项目之间显示虚线分隔线。我使用以下形状，但仍然得到一条直线。

```
<?xml version="1.0" encoding="utf-8"?>
    <shape xmlns:android="http://schemas.android.com/apk/res/android"
        android:shape="line">

    <stroke
        android:color="#7b7b75"
        android:dashGap="2dp"
        android:dashWidth="1dp"
    />

    <size android:height="1dp"/>

</shape> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T13:04:47.633

请试试这个。

```
drawable/dotted.xml:

<shape xmlns:android="http://schemas.android.com/apk/res/android"
android:shape="line">

    <stroke
       android:color="#C7B299"
       android:dashWidth="10px"
       android:dashGap="10px" />
</shape> 
```

视图.xml：

```
<ImageView
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:src="@drawable/dotted" /> 
```

# rest - WSO2 API Manager - 使用非 XML 响应发布 API

> ID：14854157
> 
> 赞同：2
> 
> 时间：2013-02-13T12:58:46.750
> 
> 标签：rest, wso2, wso2-am

我正在尝试通过 WSO2 API Manager 代理以下调用

[http://api.qrserver.com/v1/create-qr-code/?data=HelloWorld&size=100x100](http://api.qrserver.com/v1/create-qr-code/?data=HelloWorld&size=100x100)

它返回一个二维码图像。[我使用http://api.qrserver.com/v1/](http://api.qrserver.com/v1/)作为端点发布了 API ，没有问题。但是当我通过 API Manager 执行调用时，我收到以下错误：

```
curl -H 'Authorization:Bearer 7q6W4LteX9idveFWbSa_oaGPhVsa' 'http://ec2-xx-xx-xx-xx.eu-west-1.compute.amazonaws.com:8280/qrcode/1.0.0/create-qr-code/?data=HelloWorld&amp;size=100x100'

<Exception>Unexpected response received. HTTP response code : 200 HTTP status : OK exception : com.ctc.wstx.exc.WstxIOException: Invalid UTF-8 start byte 0x89 (at char #1, byte #-1)</Exception> 
```

直接执行调用时，响应标头对我来说似乎很好（正确设置了 mime 类型 image/png），但是 WSO2 API 代理拒绝响应......我做错了什么？使用响应 mediaType="image/png" 设置 wadl 文件似乎也无济于事。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T14:38:09.753

此问题是由于默认情况下 API 管理器的 axis2.xml 中没有匹配的消息生成器和格式化程序。请将以下参数添加到axis2.xml。

```
<messageBuilder contentType=".*" class="org.wso2.carbon.relay.BinaryRelayBuilder"/>
<messageFormatter contentType=".*" class="org.wso2.carbon.relay.ExpandingMessageFormatter"/> 
```

谢谢。桑吉瓦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-05T22:50:48.300

我在 wso2 esb 中有类似的问题。似乎响应适用于短 xml 文件，但不适用于大文件。

# php - 将日期连同表单详细信息一起发送到数据库

> ID：14854159
> 
> 赞同：0
> 
> 时间：2013-02-13T12:58:54.340
> 
> 标签：php

将日期与从表单提交的信息一起发送到数据库是多么简单。

如果我为表中的日期创建一个新列，我该如何秘密提交该信息

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T13:23:03.783

添加日期的方式与将任何其他数据添加到数据库中的方式相同。

```
INSERT INTO table VALUES (1,2,3) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T14:17:25.613

例如，如果您在 MySQL 中使用 Date 类型，则需要向它发送一个 unix 时间戳，以便正确存储数据。但是是的，使用 PHP 向数据库发送日期是完全可能的。

# javascript - 将两个 javascript/jquery 代码合二为一

> ID：14854164
> 
> 赞同：-1
> 
> 时间：2013-02-13T12:58:58.910
> 
> 标签：javascript, jquery, html, input

我正在制作一个程序来计算某物的价值。有人知道如何将两件事结合起来吗？

这是我现在拥有的，但不起作用..

怎么了 ？任何人的想法？
Inboedelwaardemeter

```
 function checkTotal() {
                   var a =  document.querySelectorAll('input:checked'); 
                   var total = 0;
                   for(var x=0; x < a.length;x++){
                      total += a[x].value * 1072;
                   var resultaat= parseFloat(document.mijnForm5.getal18.value) + parseFloat(document.mijnForm5.getal19.value) 
                           + parseFloat(document.mijnForm5.getal20.value) + parseFloat(document.mijnForm5.getal21.value);
                   }
                  alert('Uw inboedelwaarde is €'+ (total + resultaat );
                }
        </script>
    </head> 
    <body>
    <center><h1>Inboedelwaardemeter</h1></center>
        <br>
        <b> Leeftijd hoofdkostwinner:</b>
        <form name="mijnForm1">
        <br>
            <input type="radio" id="getal1" name="leeftijd"
                value="22" checked> 35 jaar en jonger
              <br>    
            <input type="radio" id="getal2" name="leeftijd"
                value="29"> 36 t/m 50 jaar
              <br>
            <input type="radio" id="getal3" name="leeftijd"
                value="38"> 51 jaar en ouder
              <br>
            <br>
        <b> Samenstelling huishouden:</b>
        <br>
        <form name="mijnForm2">
            <input type="radio" id="getal4" name="huishouden"
                value="0" checked> Alleenstaande
              <br>    
            <input type="radio" id="getal5" name="huishouden"
                value="10"> Echtpaar / Samenwonende
              <br>
              <br>  
        <b> Netto maandinkomen hoofdkostwinner</b>
        <br>
        <form name="mijnForm3">
            <input type="radio" id="getal6" name="hoofdkostwinner"
                value="0" checked> Tot en met €1000,-
              <br>    
            <input type="radio" id="getal7" name="hoofdkostwinner"
                value="6"> €1001,- tot en met €2000,-
              <br>
            <input type="radio" id="getal8" name="hoofdkostwinner"
                value="18"> €2001,- tot en met €3000,-
             <br>
            <input type="radio" id="getal9" name="hoofdkostwinner"
                value="23"> €3001,- tot en met €4850
                  <br>
            <input type="radio" id="getal10" name="hoofdkostwinner"
                value="23"> €4850,- of hoger
            <br>
            <br>
            <b> Oppervlakte woning</b>
            <br>
        <form name="mijnForm4">
            <input type="radio" id="getal11" name="Oppervlakte"
                value="0" checked> tot en met60m²
              <br>    
            <input type="radio" id="getal12" name="Oppervlakte"
                value="0"> 60m² tot en met 80m²
              <br>
            <input type="radio" id="getal13" name="Oppervlakte"
                value="2">80m² tot en met 100m²
             <br>
            <input type="radio" id="getal14" name="Oppervlakte"
                value="6"> 100m² tot en met 120m²
                  <br>
            <input type="radio" id="getal15" name="Oppervlakte"
                value="8"> 120m² tot en met 150m²
                  <br>
            <input type="radio" id="getal16" name="Oppervlakte"
                value="20"> 150m² t/m 200m²
                  <br>
            <input type="radio" id="getal17" name="Oppervlakte"
                value="23"> 200 m² en meer
            <br>
        </form>
        <form name="mijnForm5">
            <b>Heeft u meer dan €12.000 aan audiovisuele en computerapperatuur?
            <br>
            Zo ja, hoeveel? Zo nee, vul 0 in.
            <br>
            <input type="tekst" name="getal18" value="">
            <br>
            Heeft u meer dan €6.000 aan lijfsiraden?
            <br>
            Zo ja, hoeveel? Zo nee, vul 0 in.
            <br>
            <input type="tekst" name="getal19" value="">
            <br>
            Heeft u meer dan €15.000 aan bijzondere bezittingen?
            <br>
            Zo ja, hoeveel? Zo nee, vul 0 in.
            <br>
            <input type="tekst" name="getal20" value="">
            <br>
            Is het huurdersbelang meer dan €6.000?
            <br>
            Zo ja, hoeveel? Zo nee, vul 0 in.
            <br>
            <input type="tekst" name="getal21" value="">
            <br>
            </b>
        </form>
         <button onclick="checkTotal();">Bereken inboedelwaarde</button>
         <center>
             <img src="infofolio.gif" />
             <form action='indexinboedel.php' method='post'>
            <input type='submit' name='home' value='home'>
            </form></p>
         </center>
    </body>
 </html> 
```

感谢回复！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T13:11:29.347

```
$(document).ready(function(){
    $("button").click(function(){
        var total1 = 0;
        $("[name='mijnForm5'] input").each(function(){
            total1 += parseFloat( $(this).val() );
        });

        var total2 = 0;
        $("input:checked").each(function(){
            total2 += $(this).val() * 1072;
        });

        alert("€ : " + total2 + total1);
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T13:06:15.583

在调用`var resultaat= parseFloat.....`上方的函数中添加`alert`

# wicket - 使用 Wicket 的应用程序的 LoadRunner 相关性（动态 url）

> ID：14854171
> 
> 赞同：0
> 
> 时间：2013-02-13T12:59:28.410
> 
> 标签：wicket, loadrunner

使用 WEB/HTTP 协议记录和回放调用 LoadRunner 对 wicket 应用程序进行负载测试，以应对动态链接带来的挑战。同样的问题与 JMeter 等其他负载测试框架相关，此条目描述了使用基于正则表达式的方法的解决方案： `https://cwiki.apache.org/WICKET/wicket-and-jmeter-with-regular-expressions.html` 我的具体问题是双重的：在上述链接中使用 JMeter 描述的方法有一个关键点，即从上一步的 HTML 响应中导出下一步必须使用的 URL。在 JMeter 示例中，他们使用正则表达式提取器来捕获响应，以便在脚本中进一步重用它。这是否直接适用于使用手动关联的 LoadRunner 方法？我在为 wicket 应用程序记录 LoadRunner HTTP 协议脚本时遇到的问题的初始策略是获取派生 URL 所需的数据，该 URL 必须在下一步中使用。JMeter 的示例使用正则表达式提取器。这可能与 LoadRunner 中的 web_reg_save_param 直接相关吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T20:50:26.223

web_reg_save_param() 应该能够轻松处理这个问题。你试过了吗？

# python - 从命令行获取参数，然后从文件获取参数，然后从默认值获取

> ID：14854174
> 
> 赞同：1
> 
> 时间：2013-02-13T12:59:34.923
> 
> 标签：python, argparse

我有一个根据某些参数运行的 python 程序。比方说，其中一个参数`C`的默认值为`3`. 所以当我在没有任何参数的情况下运行它时，它确实

```
$ python parsing.py
C=3 
```

当我为我的初始数据加载一个文件时，它可以从该文件中获取一些参数值。例如，如果我的文件`MakeC5`说程序应该运行`C=5`，我会得到

```
$ python parsing.py --file=MakeC5
C=5 
```

另一方面，如果我为 C 指定一个不同的值作为可选参数，则采用该值，并优先于文件中的值。

```
$ python parsing.py --C=4
C=4

$ python parsing.py --file=MakeC5 --C=4
C=4 
```

到这里为止，我可以只检查命令行上指定的值是否与默认值不同，否则从文件中获取一个，如

```
if parameters.C == parser.get_default('C'):
    parameters.C = load_file(parameters.file)["C"] 
```

但是，如果我在命令行上为 C 提供默认值，则这种方法不起作用，如

```
$ python parsing.py --file=MakeC5 --C=3
C=3 
```

我怎样才能把那个案子弄好？有没有一种方法不需要像在

```
parameters = parser.parse_args()
parameters_from_file = load_file(parameters.file)
parser.set_defaults(**parameters_from_file)
parameters = parser.parse_args() 
```

对我来说，这看起来不像“明显的 pythonic 方式”？这是准读取一个可以指定为参数的配置文件，所以我希望有一个好方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T13:38:53.587

假设您使用[`argparse`module](http://docs.python.org/2/library/argparse.html)，只需在添加参数时不要设置默认参数。如果参数不存在，则属性将是`None`，您可以检查它而不是解析参数两次：

```
parser.add_argument('--C'   , action='store', dest='C')
parser.add_argument('--file', action='store', dest='file')
# ...

args = parser.parse_args()
# ...

if args.C is None:
    # Argument `--C` not given on command line
    if args.file is not None:
        # Load the file, set `args.C` if the file contains the `C` option
        ...

if args.C is None:
    # `C` was neither specified on the command line argument given,
    # nor in the configuration file, set default value
    args.C = 3

print 'C =', args.C 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T15:05:48.423

在[argsparse](http://docs.python.org/2.7/library/argparse.html)中有[fromfile-prefix-chars](http://docs.python.org/2.7/library/argparse.html#fromfile-prefix-chars)，如果你能忍受它的限制，它似乎可以做一些你想做的事情。

```
import argparse
parser = argparse.ArgumentParser()
parser.add_argument('--foo', default="ABC")
args = parser.parse_args()
print '#1', args.foo

import argparse
parser = argparse.ArgumentParser()
parser.add_argument('--foo', default="ABC")
args = parser.parse_args(['--foo', 'BAR' ])
print '#2', args.foo

import argparse
parser = argparse.ArgumentParser(fromfile_prefix_chars='@')
parser.add_argument('--foo', default="ABC")
args = parser.parse_args(['--foo', 'BAR', '@myargs' ])
print '#3', args.foo

import argparse
parser = argparse.ArgumentParser(fromfile_prefix_chars='@')
parser.add_argument('--foo', default="ABC")
args = parser.parse_args(['@myargs', '--foo', 'BAR' ])
print '#4', args.foo 
```

迈尔格斯

```
--foo
FISH 
```

输出

```
#1 ABC
#2 BAR
#3 FISH
#4 BAR 
```

* * *

请注意@myargs 在命令行上的位置如何影响 的值`foo`，当它位于前面时，如果被覆盖，则它被赋值`--foo` ，反之亦然。

这似乎可以满足您的要求：

> 默认值 < 配置文件 < cli-args

尽管它依赖于您记住将配置文件以正确的顺序放置，但当然除非您获取 args 并重新排序它们，以便它们在 args 中排在首位。

希望值得深思。

# python - python：使用 socket.recv() 循环

> ID：14854175
> 
> 赞同：4
> 
> 时间：2013-02-13T12:59:40.697
> 
> 标签：python, python-sockets

你知道为什么这个循环不会中断吗？

```
#!/usr/bin/env python

from socket import *
import os
import sys

if __name__ == '__main__':
 HOST = '127.0.0.1'
 PORT = 55554

 print 'Creating socket'
 socketProxy = socket(AF_INET, SOCK_STREAM)

 print 'bind()'
 socketProxy.setsockopt(SOL_SOCKET, SO_REUSEADDR, 1)
 socketProxy.bind((HOST, PORT))

 print 'Waiting for connection request'
 socketProxy.listen(1)
 conn, addr = socketProxy.accept()

 print 'Connected to ', addr

 request = ''

 while True:
    data = conn.recv(16);
    if not data: break
    request = request+data

print request
sys.stdout.flush() 
```

我正在编写一个小服务器代理获取可以任意长的请求，所以我必须等到收到所有请求。无论如何，这个循环（当 len(data) == 0 时）不会停止，它会一直等待。我怎样才能阻止它？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T14:07:49.020

一种解决方案是使套接字不阻塞。然后你在一个循环中接收，直到不再接收到数据。如果没有收到数据（即为`request`空），则连接已关闭，否则您有您的请求。

收到请求后，将其发送到实际服务器，并在等待回复时执行与上述相同的操作。将回复发送给客户端。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-06-24T04:54:27.137

您可以尝试设置超时，请参阅[Python socket recv data in while loop not stopping](https://stackoverflow.com/questions/51316029/python-socket-recv-data-in-while-loop-not-stopping)

# c# - 如何等待 Async(geocodeService.GeocodeAsync) 服务/方法完成？

> ID：14854180
> 
> 赞同：0
> 
> 时间：2013-02-13T12:59:52.677
> 
> 标签：c#, windows-phone-7, gps, async-await

我正在使用**GeocodeService**来获取两个地方的`lattitude`和`longitude`（从，到）

我得到了完美的纬度和经度，但我的问题是消息在**异步**调用（`geocodeService.GeocodeAsync`）之前显示我如何等待完成异步调用（`geocodeService_GeocodeCompleted`）？

我的代码是

```
private void point_Click(object sender, RoutedEventArgs e)
{
    getCoordinates(fromText.Text, 1);// this is calling after bellow message box :(
    getCoordinates(toText.Text, 2);
    MessageBox.Show(" completed ");  // 1 why this message is displaying first before above calls      
}

private void getCoordinates(string address, int index)
    {
        GeocodeRequest geocodeRequest = new GeocodeRequest();

        // Set the credentials using a valid Bing Maps key
        geocodeRequest.Credentials = new Credentials();
        geocodeRequest.Credentials.ApplicationId = "ApgLkoHIG4rNShRJAxMMNettsv6SWs3eP8OchozFS89Vex7BRHsSbCr31HkvYK-d";

        // Set the full address query
        geocodeRequest.Query = address;

        // Set the options to only return high confidence results 
        FilterBase[] filters = new FilterBase[1];
        filters[0] = new ConfidenceFilter() { MinimumConfidence = Confidence.High };

        GeocodeOptions geocodeOptions = new GeocodeOptions();
        geocodeOptions.Filters = new ObservableCollection<FilterBase>(filters);
        geocodeRequest.Options = geocodeOptions;

        // Make the geocode request
        GeocodeServiceClient geocodeService = new GeocodeServiceClient("BasicHttpBinding_IGeocodeService");
        geocodeService.GeocodeCompleted += new EventHandler<GeocodeCompletedEventArgs>(geocodeService_GeocodeCompleted);
        geocodeService.GeocodeAsync(geocodeRequest, index);

    }
    void geocodeService_GeocodeCompleted(object sender, GeocodeCompletedEventArgs e)
    {
            GeocodeResponse geocodeResponse = e.Result;
            fromLat = geocodeResponse.Results[0].Locations[0].Latitude;
            fromLon = geocodeResponse.Results[0].Locations[0].Longitude;
            Messagebox.Show("latitude : "+fromLat); // this is displaying randomly 
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T19:08:00.677

创建另一个在加载异步完成时激活计时器的方法。

将 e.result 传递给它

让 timer.tick 检查 e.result 是否长度 > 0

如果它在勾选显示窗口

否则显示加载或什么

像这样的东西

```
#pretend code#
Global Variable -> string location;

getGeoLoc += new geoLocCompleted;

void geoLocCompleted(sender, e){
   location = e.result
   Timer time = new Timer():
   time.tick += OnTick; 
```

}

```
void onTick(send, e){
   if(e.result.length > 0)
      Show your results
   else
      Show loading dialog
} 
```

# c# - 我应该将哪个 ORM 与 ServiceStack 和现有数据库一起使用

> ID：14854187
> 
> 赞同：4
> 
> 时间：2013-02-13T13:00:10.930
> 
> 标签：c#, entity-framework, nhibernate, servicestack, ormlite-servicestack

我目前正在开发一个 Web 服务，它提供对业务对象的基本 CRUD 操作。该服务将由当前使用直接数据库访问的遗留应用程序使用。

由于 ServiceStack 的架构很棒，我决定使用 ServiceStack 而不是 WCF。

但是知道我正在尝试决定是否使用 OrmLite、nHibernate 或 Entity Framework 来访问现有的遗留数据库。

ORM 的要求如下

*   支持连接
*   支持存储过程

我已经尝试过 OrmLite（因为它很快并且已经包含在 ServiceStack 中）。我设法加入两个表的唯一方法是使用 SQL（不是一个选项）。有没有更好的办法？

```
// @stackoverflow: This is my POCO DTO
public class Country
{
    public long Id { get; set; }

    public string Alpha2 { get; set; }

    public string Alpha3 { get; set; }

    public string ShortText { get; set; }

    public string LongText { get; set; }
}

public class CountryRepository : ICountryRepository
{
    // @stackoverflow: This is the query to join countries with translated names stored in another table 
    private const string CountriesSql =
        @"SELECT C.Id, C.Alpha2, C.Alpha3, L.ShortText, L.LongText FROM COUNTRY AS C INNER JOIN LOCALIZATION AS L ON C.LocId = L.Id WHERE (L.Lang_Id = {0})";

    private const string CountrySql = CountriesSql + " AND C.Id={2}";

    private IDbConnection db;
    public IDbConnectionFactory DbFactory { get; set; }

    private IDbConnection Db
    {
        get { return db ?? (db = DbFactory.Open()); }
    }

    public List<Country> GetAll()
    {
        return Db.Select<Country>(CountriesSql, 0);
    }

    public Country GetById(long id)
    {
        return Db.SingleOrDefault<Country>(CountrySql, 0, id);
    }
} 
```

上面的示例显示了一个简单的业务对象。大多数其他人需要使用许多过滤器进行插入、更新、删除、多个连接和读取。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-13T23:47:39.153

如果您只需要连接（延迟加载或急切加载）和存储过程支持并且想要**快速设置，**那么 Entity Framework 和 nHibernate 是不错的选择。这是一个关于 EntityFramework 以及存储库和工作单元模式的很酷的链接。[http://blogs.msdn.com/b/adonet/archive/2009/06/16/using-repository-and-unit-of-work-patterns-with-entity-framework-4-0.aspx](http://blogs.msdn.com/b/adonet/archive/2009/06/16/using-repository-and-unit-of-work-patterns-with-entity-framework-4-0.aspx)

如果您非常关心**性能**并希望更好地控制类的外观（即**POCO**）和行为，那么您可以尝试更轻量级的东西，例如 ORMLite 或 Dapper。这两个只是功能较少的瘦包装器，但它们将为您提供最佳性能和最大灵活性——即使这意味着每隔一段时间编写一些 SQL。

您还可以使用混合方法。不要害怕混搭。使用 POCO 时，这将是最简单的。

我认为重要的是**为您当前的数据库和当前需求编写代码**。但是，要使用适当的接口来做到这一点，所以如果需要切换到不同的数据库或存储机制，那么您只需创建一个新的数据提供程序并将其插入即可。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T02:20:54.093

Ormlite 支持使用表达式的原始连接函数。新的[JoinSqlBuilder](https://github.com/ServiceStack/ServiceStack.OrmLite/blob/master/src/ServiceStack.OrmLite/JoinSqlBuilder.cs)类可以帮助解决这个问题。对于 SP，我添加了一个[新的 T4 文件](https://github.com/ServiceStack/ServiceStack.OrmLite/blob/master/src/T4/OrmLite.SP.tt)来生成相应的 c# 函数。目前SP生成代码只支持Sql Server；如果您使用任何其他数据库，您可以轻松添加对它的支持。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-07T09:06:32.383

您可能会考虑 LLBLGen Pro——它对数据库优先设计有很好的支持，并且如果您使用 nHibernate 或 EF，它还具有加速入门的设计器工具。但它是$$。 [http://llblgen.com](http://llblgen.com)

作为对此的跟进，Matt Cowan 创建了一个 AWESOME 模板生成器，用于使用 LLBLGen 构建此类东西。在此处查看博客文章：

[http://www.mattjcowan.com/funcoding/2013/03/10/rest-api-with-llblgen-and-servicestack/](http://www.mattjcowan.com/funcoding/2013/03/10/rest-api-with-llblgen-and-servicestack/)

并在这里演示：

[http://northwind.mattjcowan.com/](http://northwind.mattjcowan.com/)

该演示完全是自动生成的！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-13T20:47:02.423

[还可以从 NHibernate 3.x 和 Entity Framework 5/6 http://www.dennisdoomen.net/2013/03/entity-framework-56-vs-nhibernate-3.html](http://www.dennisdoomen.net/2013/03/entity-framework-56-vs-nhibernate-3.html)的 OO 角度检查此比较

# php - mySQL INSERT 应该在构造函数中完成吗？

> ID：14854188
> 
> 赞同：1
> 
> 时间：2013-02-13T13:00:18.583
> 
> 标签：php, mysql, oop

我开始`PHP`使用 OOP 构建一个新项目，但我对对象-数据库关系感到两难。

例如，我有一个用户对象。如果构造函数已经这样做了`INSERT INTO... ?`，我会调用`$user = new User($user_data);`

还是我应该有不同的`$user->save()`方法来做`INSERT`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T13:22:13.703

恕我直言，让构造函数执行插入查询听起来不是一个好主意。类`User`，我觉得应该看成一个模型，一个收集数据的对象，可以发送到服务层。这就是实际`insert`可以执行的地方。

只需将`User`类视为一种类型。假设现有用户登录：

```
$login = new User(array('username' => $_POST['username'],
                        'pass' => $_POST['passwd'])); 
```

然后，在`User`课堂上：

```
class User
{
    const SALT = 'fo0bar';
    private $_hash = null;
    private $_name = null;

    public function __construct (array $request, $login = false)
    {
        //this isn't the best hash in the world, of course...
        $this->_hash = sha1($request['username'].SALT.$request['pass']);
        $this->_name = $request['username'];
    }
    public function getHash()
    {
        return $this->_hash;
    }
    public function getName()
    {
        return $this->_name;
    }
} 
```

就构造函数而言，仅此而已。如果需要，只需添加更多数据，以及一些 getter 和 setter。然后可以将此对象传递给具有所有数据库方法并保存所需连接的对象，它可以使用哈希和名称获取器构建查询，检查用户是否存在并在`INSERT`需要时执行查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T13:03:52.217

最好使用单独的“方法”来创建/保存用户。每次实例化用户时都会执行构造函数，即使用“user = new User()”。如果插入到您的构造函数中，则每当创建 User 对象时都将尝试创建一个新用户，这很可能不是您想要的目的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T13:09:01.247

*   有时您可能需要创建一个空实例
*   php 不支持重载：重载将允许您创建一个构造函数来创建和清空实例。
*   您不想为每个对象实例插入一条空记录。

所以我不建议向您的构造函数添加插入查询。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T13:11:49.683

出于以下原因，我建议在您的课程中使用单独的 save() 函数

*   您有机会在保存对象数据之前对其进行操作/修改
*   检索数据时，您无疑会调用`$user->getAll()`. 因此，在初始化您的用户对象时，在这种情况下 - 我们不想存储任何数据。

尝试做这样的事情

```
protected $_data;

public function __construct(array $data) {
    $this->_data = $data;
}

public function save() {
    //TODO: Save $data 

    return $this;
}

public function getAll() {
    //TODO: Get from database and populate $this->_data

    return $this->_data;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-13T13:12:00.137

这样做的一种常见方法是分离模型和映射器。这意味着 User 是一个空的数据存储（模型）-并且您有一个与对象交互的映射器。典型的 CRUD 操作：

```
<?php
$model = new User();
$model->setName('Name');

$mapper->create($model);

$user = $mapper->find('Name');

$user->setName('NewName');
$mapper->update($user);

$model->delete($user); 
```

# sql - SELECT 语句问题 - 在 Gridview 的一个单元格中连接不同字段的数据

> ID：14854191
> 
> 赞同：1
> 
> 时间：2013-02-13T13:00:24.770
> 
> 标签：sql, gridview, field, cell, selectcommand

我正在为 Gridview 使用以下 SELECT 语句：

```
 SelectCommand="SELECT ID, Date, Train, I_R, Dir_Ind, Detn, Rly, DiV, Loco, Shed, locoClass, loco_type,
(maj_sch_type + ','+ ' ' + maj_sch_place +',' +' '+ (CAST(maj_sch_dt as VARCHAR(11)) + ' '+'/' 
+ ' ' + min_sch_type +',' + ' ' + min_sch_place + ',' + ' '+(CAST(min_sch_dt as VARCHAR   (11))) ))    as &quot;major&quot;,
 Equipt, I_R, reason 
 FROM PunctualityMain Order by Date ASC" 
```

有了上述内容，我从 6 (3 + 3) 个不同的 SQL 数据字段中获得了单个单元格的结果

```
 POH, KPA, Jan 2 2012 / IB, Shed, Apr 18 2012 
```

问题是，只要任何 3 个字段组（“/”之前或之后）中的数据为空白，Gridview 单元格就会保持完全空白。如果两组字段的数据都比 Gridview 显示好，如上所述。可以修改 SELECT 语句以在 Gridview 中显示任何一组字段为空的数据吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T04:12:15.673

如果您尝试将空字符串与非空字符串连接，则结果将为空。

```
Select NULL + 'test' 
```

这将返回 NULL。

另外，我认为您的代码没有很好地将粘贴复制到您的问题中，但是您需要使用该`ISNULL()`功能。我想你能明白这一点。您可能需要稍微清理一下代码才能运行。只需用 ISNULL(MyField, '') 包装您连接的每个字段

```
SELECT 
    ID, 
    Date, 
    Train, 
    I_R, 
    Dir_Ind, 
    Detn, 
    Rly,    
    DiV, 
    Loco, 
    Shed, 
    locoClass, 
    loco_type,
    (isnull(maj_sch_type, '') + ', ' + isnull(maj_sch_place, '') +', '+ (isnull(CAST(maj_sch_dt as VARCHAR(11), '')) + ' / ' + isnull(min_sch_type, '') +', ' + isnull(min_sch_place, '') + ', '+ (isnull(CAST(min_sch_dt as VARCHAR   (11)), '')) ))    as &quot;major&quot;,
     Equipt, 
    I_R, 
    reason 
 FROM PunctualityMain 
 Order by Date ASC 
```

**参考**

*   [一片空白](http://msdn.microsoft.com/en-us/library/ms184325.aspx)

# iphone - 我可以以编程方式锁定我的 iPhone 屏幕吗？

> ID：14854205
> 
> 赞同：1
> 
> 时间：2013-02-13T13:01:03.577
> 
> 标签：iphone, objective-c, xcode, jailbreak

我正在使用越狱的 iphone，我不在乎 Apple 是否拒绝这个应用程序。我不是在谈论可以通过以下方式实现的简单键盘锁

```
GSEventLockDevice(); 
```

我说的是密码锁或某种让 iphone 卡住或禁用主页按钮的方法？

是否可以通过编程方式进行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T15:09:53.220

它被称为信息亭模式或引导模式。

这里有几篇文章通常描述这个主题：

[http://joris.kluivers.nl/blog/2012/03/02/kiosk-mode-for-ios/](http://joris.kluivers.nl/blog/2012/03/02/kiosk-mode-for-ios/) [http://www.idownloadblog.com/2012/06/26/ios-6-guided-access/](http://www.idownloadblog.com/2012/06/26/ios-6-guided-access/)

这是具有多种方法的stackoverflow问题：

[锁定 iPhone/iPod/iPad，使其只能运行一个应用程序](https://stackoverflow.com/questions/5011774/lock-down-iphone-ipod-ipad-so-it-can-only-run-one-app/8994690#8994690)

这是另一种方法：

[https://blog.compeople.eu/apps/?p=275](https://blog.compeople.eu/apps/?p=275)

# c# - 两个克隆变量在列表中返回相同的索引

> ID：14854207
> 
> 赞同：0
> 
> 时间：2013-02-13T13:01:10.857
> 
> 标签：c#, list, clone

我有一个列表，其中包含 X 类的许多对象。

我通过`clone`函数添加一个对象，它有自己的索引，但如果我使用克隆添加一个对象，该对象将接收与第一个克隆相同的索引。

这里有一些代码：

```
public void AddCopyObj(List<x> MyList, int Idx)
{
  x AddCloneObj=MyList[Idx].Clone();
  MyList.Insert(Idx+1,AddCloneObj)
}

public List<int> GetAllIndexs(List<x> MyList)
{
  List<int> IndexList = new List<int>();
  foreach(x myXvar in MyList)
  {
    IndexList.add(MyList.IndexOf(myXvar));
  }
  return IndexList ;
} 
```

**例如**：如果我有 10 个对象，其中一个我做了两次克隆，我将有 12 个对象，并且两个克隆的索引相同（它们不在同一个索引上，函数 IndexOf 返回相同的一个）

我能做些什么？

**编辑：**

```
public x Clone()
    {
        x clone = new x(Int32.Parse(this.Name.Split(new char[1] { ' ' })[1]) + 1);
        clone.Copy(this);
        return clone;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T13:04:04.763

引用自 MSDN（强调我自己的）：

> 搜索指定对象并返回List 中从指定索引延伸到最后一个元素的元素范围内**第一次出现的从零开始的索引。**

They are both matching the first occurrence basically. This boils down to equality on the items you have in `List<>`, it uses the default equality comparer:

> This method determines equality using the default equality comparer EqualityComparer.Default for T, the type of values in the list.

[http://msdn.microsoft.com/en-us/library/e4w08k17.aspx](http://msdn.microsoft.com/en-us/library/e4w08k17.aspx)

You could use the override that takes a starting index to preclude prior indices from the search:

[http://msdn.microsoft.com/en-us/library/s8t42k5w.aspx](http://msdn.microsoft.com/en-us/library/s8t42k5w.aspx)

Or, if you want to hold unique items based on hash and equality, use `HashSet<T>` instead.

I thought about offering a code sample, however when I look at the code you provide it makes less and less sense. You current sample will loop the items in index order and add the index to another list, only for duplicate items it'll be the same index. Taking a step back, ***what are you trying to achieve?*** I get the sense there's a better option.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T13:54:57.307

The problem was I did not do twice clone,

I took the same object and put it twice in the list,

after I had done twice clone issue is resolved.

**(Sorry, it was not on a question, you could not tell.)**

# database - Riak 的活动提要

> ID：14854208
> 
> 赞同：1
> 
> 时间：2013-02-13T13:01:15.507
> 
> 标签：database, web-applications, database-design, nosql, riak

本周我读了一篇有趣的[文章](http://qconlondon.com/dl/qcon-london-2010/slides/FabrizioSchmidt_and_LarsGeorge_SocialNetworksAndTheRichnessOfDataGettingDistributedWebservicesDoneWithNosql.pdf)，其中解释了作者如何实施一项活动。基本上，他们使用两种方法来处理活动，我正在适应我的场景，所以假设我们有一个用户 foo，他有一定数量 (x) 的追随者：

```
if x<500, then the activity will be copyied to every follower feed
    this means slow writes, fast reads
if x>500, only a link will be made between foo and his followoers
    in theory, fast writes, but will slow reads 
```

因此，当一些用户访问您的活动提要时，服务器将获取并合并所有数据，因此这意味着在他们自己的复制活动中快速查找，然后跨链接查询。如果时间线有 20 个限制，那么我每个取 10 个然后合并。

我正在尝试使用 Riak 和[Linking](http://docs.basho.com/riak/latest/tutorials/fast-track/Links-and-Link-Walking)的功能来做到这一点，所以这是我的问题：链接比复制快吗？我的建筑理念够好吗？还有其他我应该看到的解决方案和/或技术吗？

PS.：我没有为生产实现活动提要，它只是为了学习如何实现一个表现良好并稍微使用 Riak 的活动提要。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T18:05:39.480

两个想法。

1) 不，[链接](http://docs.basho.com/riak/latest/tutorials/fast-track/Links-and-Link-Walking)（在 Riak Link Walking 的意义上）很可能不是实现这一点的正确方法。一方面，每个链接都存储为一个单独的 HTTP 标头，并且 HTTP 规范中建议限制您应该发送多少标头字段。（虽然，公平地说，在测试中你可以在 Riak 的标题中使用超过 1000 个链接，似乎工作正常。但不推荐）。更重要的是，通过 Link Walking api 查询这些链接实际上在后端使用 MapReduce，并且对于您打算使用的那种用法来说相当慢。

这并不是说您不能存储作为链接列表的 JSON 对象，当然，这是一种有效的方法。我只是建议不要为此使用 Riak 链接。

2）至于如何正确实现它，这是一个更难的问题，并且取决于您的流量和用例。但是你的一般方法是有效的——复制一些 X 更新值的提要（X 是 500 还是更小应该在测试中确定），并在更新数量大于 X 时链接。

你应该如何链接？您有 3 个选择，所有选择都需要权衡。1) 使用二级索引 (2i)，2) 使用搜索，或 3) “手动”使用链接，意思是存储 JSON 文档和您手动取消引用的 URL（相对于使用链接遍历查询）。

我强烈建议您观看剪贴板工程师的视频： http: [//vimeo.com/album/2258285/page](http://vimeo.com/album/2258285/page:2/sort:preset/format:thumbnail) :2/sort:preset/format:thumbnail （在 Riak 上构建社交应用程序），看看他们是如何解决这个问题的问题。（他们基本上使用搜索进行链接）。

# c# - 对 RichTextBox 以外的组件的建议或 C# 中的解决方案

> ID：14854211
> 
> 赞同：0
> 
> 时间：2013-02-13T13:01:18.840
> 
> 标签：c#, checkbox, richtextbox

我目前正在尝试制作一个日志查看器来分析日志。我正在阅读每行都有时间戳、日志类型和文本的日志文件。由此我创建了一个具有 DateTime 对象、Type 和 Text 的对象。

类型分为6种：

```
public enum LogType
{
    DEBUG = 0,
    EVENT,
    ERROR,
    TEST_STEP,
    WARNING,
    SUCCESS
} 
```

这个想法是每个日志级别旁边都有一个复选框，以便我可以快速添加或删除指定的日志级别。现在，这适用于具有不同日志级别的良好分布的小型日志文件。但是，当我有巨大的日志文件时，加载需要一些时间，并且每次复选框更改时我都会迭代对象数组并逐行打印，这是非常无效的。

有没有更好的方法将这些对象连接到每一行，或者有另一个更适合的组件，以便您可以轻松隐藏或显示日志级别？

最好的问候安德烈亚斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T07:57:10.267

由于您不需要实时更新，您可以读取整个文件，并将不同的类型存储在不同的类中，这些类继承自同一个基类。例如，对于每种类型，您都有一个基类`Log`和一个派生类`DebugLog : Log`等。您只能在基类中定义和实现大多数字段，因为它只是存储一些数据，无需修改它。

这些派生类按照日志级别的类型分别存储数据。这样，您可以通过清除列表并仅从您需要的类中加载数据来刷新您的 UI，而无需再次遍历所有数据（当然取决于过滤器）。

不过，您必须构建某种排序处理程序才能正确显示数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T13:05:34.310

我所能推荐的只是使用 WPF，`UI virtualization`这样您就不会用大量代表日志中的一行的元素给 UI 带来负担，并且可以使用过滤`parlallelization`来加快处理速度并让 UI 响应。

# java - 如何使用 Camel 创建和发布 WebService？

> ID：14854213
> 
> 赞同：1
> 
> 时间：2013-02-13T13:01:24.480
> 
> 标签：java, web-services, apache-camel

是否可以在不需要 xml 文件的情况下使用骆驼创建和发布 WebService？

使用 JAX-WS，我可以创建一个像

```
@WebService
@SOAPBinding(style = Style.RPC)
public class CreatorWebService {

public String create(String word1, String word2, String word3) {
return Maker.make(word1, word2, word3);
}} 
```

并很容易发布它

```
public static void main(String args[]) {
    CreatorWebService server = new CreatorWebService ();
    Endpoint endpoint = Endpoint.publish("http://localhost:8080/creator", server);
} 
```

如何使用骆驼来完成，如果可能的话，使用 JAVA DSL 并且不使用 XML（web.xml，bean ...）？

我想将此 WS 的传入消息用作路由的输入，例如：

```
from(WSinputMessage).to("myProcessor").to(doSomething); 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T15:50:31.390

我不确定您希望如何解析 WS 请求以及应该如何处理它，因为可能有多种方法。

[应该可以使用jetty 组件](http://camel.apache.org/jetty)和[CXF BEAN 组件](http://camel.apache.org/cxf-bean-component.html)与 Camel 实现非常相似的设置

IE

```
 from("jetty:http://localhost:9000/").to("cxfbean:serviceObj").to("handleReplySomehow");
     //serviceObj does not have to be a spring bean, but can be a JAX-WS annotated object in the camel registry. 
```

# magento - Magento 侧边栏父当前类别和子类别永久

> ID：14854216
> 
> 赞同：1
> 
> 时间：2013-02-13T13:01:30.743
> 
> 标签：magento

我想将产品的当前类别和子类别添加到侧边栏，但即使我输入子类别也是一样的。现在我有这个左侧菜单的脚本（侧边栏）

```
<?php $_menu = $this->renderCategoriesMenuHtml(0,'level-top') ?>
<?php if($_menu): ?>
<div class="block block-menu-navleft">
    <div class="block-title">
        <strong><span><?php echo $this->__('Category') ?></span></strong>
    </div>
    <div class="block-content">
        <ul id="nav1" class="menu-left">
        <?php echo $_menu ?>
        </ul>
    </div>
</div>
<?php endif ?>
<script type="text/javascript"> 
    var lis=$$('#nav1 li.parent');
    lis.each(function(li) {

     var dt = new Element('dt');
     var dd = new Element('dd');
     var a = li.down(0);
     var ul = li.down(2);
     dt.insert(a);
     dd.insert(ul);
     li.insert(dt,{position:top});
     li.insert(dd);
    });
     jQuery('#nav1 li.parent dd ul ').hide();
      jQuery('#nav1 dt a').click(function()  {

        jQuery('.td_active').removeClass('td_active');
        var string = jQuery(this).parent().parent().parent().parent().parent().attr('class');
        if(string.indexOf('parent')!=-1)
        {
            jQuery(this).parent().parent().parent().parent().parent().addClass('td_active');
            jQuery(this).parent().parent().parent().css("display","block");
            jQuery(this).parent().parent().find('ul').slideUp('slow');
        }
        else
        {
            jQuery('#nav1 li.parent dd ul:visible').slideUp('slow');
        }
        jQuery(this).parent().parent().addClass('td_active').next().slideDown('fast');  
        if(jQuery(this).parent().parent().find('ul').css('display')=='block')
        {
              jQuery(this).parent().parent().removeClass('td_active');
        }
        jQuery(this).parent().parent().children().children(':first-child').css("display","block");
        return false;
    });

</script> 
```

该脚本运行良好，但它向我显示了所有父亲类别和子类别。我想只显示当前类别和子类别。

!示例图片[1](http://i.stack.imgur.com/REsZe.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T13:42:34.357

用这个 ：

```
$menu = $this->drawItem(Mage::registry('current_category'),Mage::registry('current_category')->getLevel()); 
```

代替

```
 $_menu = $this->renderCategoriesMenuHtml(0,'level-top') 
```

要处理所有情况，您应该考虑执行以下操作：

```
$menu = (isset(Mage::registry('current_category'))?$this->drawItem(Mage::registry('current_category'),Mage::registry('current_category')->getLevel()):$this->renderCategoriesMenuHtml(0,'level-top'); 
```

# twitter-bootstrap - Twitter Bootstrap 和 Bootmetro 的区别？

> ID：14854223
> 
> 赞同：-3
> 
> 时间：2013-02-13T13:02:01.427
> 
> 标签：twitter-bootstrap, cakephp-2.0

我在 cakephp 框架中工作，因为我熟悉 twitter-bootstrap 并听到了一个与之相似的新词 bootsmetro。谁能解释我这两个概念？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T13:10:05.077

Boot Metro 是 Windows 8 风格的 web 框架作品。

它建立在引导程序之上，并广泛支持 Windows 8 应用商店。

欲了解更多信息 - [BootMetro](http://aozora.github.com/bootmetro/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-17T11:37:48.377

BootMetro 是一个简单的 Web UI 框架，用于创建模拟 Windows 8 Metro 用户界面的 Web 应用程序。BootMetro 建立在 Twitter Bootstrap 之上。BootMetro 默认支持各种 Metro ui 风格。看看这个网站，它是使用 ASP.NET MVC + BootStrap + KnockoutJS [TechCipher 构建的](http://www.techcipher.com/)。

默认情况下，BootMetro 也没有内置对动态磁贴的支持，但可以看这个[例子](http://csharptechies.blogspot.co.uk/2013/06/live-tiles-with-bootmetro.html)

披露：请注意，提供的链接是针对我自己的网站的

# ruby-on-rails-3 - 我想使用 `layout false` 但我仍然想使用在渲染布局时通常会加载的 CSS - 我该怎么做？

> ID：14854226
> 
> 赞同：2
> 
> 时间：2013-02-13T13:02:07.200
> 
> 标签：ruby-on-rails-3, layout, asset-pipeline

我有一个控制器，我将布局设置为 false：

```
class SplashController < ApplicationController
  layout false
  def index
  end
end 
```

但是当我加载这个页面时，没有任何 css - 我认为这与 rails 的处理方式有关`layout false`- 但我目前对 rails 的了解让我迷失了方向。

我如何不渲染布局，但仍加载所有其他资产（css、js 等），如果我要加载布局，这些资产通常会加载？（*请注意，布局文件没有具体引用任何这些资产）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T13:26:40.343

默认情况下，如果您使用该`:text`选项，则在不使用当前布局的情况下呈现文本。如果希望 Rails 将文本放入当前布局，则需要添加 :layout => true 选项。

由于您只需要显示的信息，我建议使用`:text`渲染。

您可以使用 :text 选项将纯文本（根本没有标记）发送回浏览器以呈现：

```
render :text => "OK" 
```

注意：当您响应 AJAX 或 Web 服务请求时，呈现纯文本最有用，这些请求需要的不是正确的 HTML。

更新：

此外，如果您希望显示资产但 layout 仍然应该为 false，那么您必须在使资产可用后将 layout 渲染为 false。这意味着您创建一些视图，然后在其中定义所需的 css 和 js 文件，然后从控制器调用该视图，然后将布局设置为 false。

查看后将布局设置为 false 将显示 css 和 js 内容，但仍将布局保持为 false。

但是在显示包含 css 和 js 的视图之前将布局设置为 false 将根本不包含资产。

上述的另一种选择也可以：

```
css : <%= eval("render :partial => 'myurl/blah', :formats=> [:css], :layout => false").dump.html_safe %> 
```

`:css`您会看到，当 layout 为 false 时，包含您的资产的局部视图是如何被调用的。

# c - 如何在 Windows 中的 C 中完成端口重定向？

> ID：14854227
> 
> 赞同：0
> 
> 时间：2013-02-13T13:02:08.587
> 
> 标签：c, https, port, winsock2

我有一个 C 项目，我在其中接收 HTTP GET 请求（端口 10000），处理它并发送适当的响应。我使用 winsock 库进行网络连接。我还有一个模块在不同的端口（端口 10001）上接收 HTTPS 请求。客户端指定它必须发送到哪个端口，如果它正在发送 http 消息，它将在端口 10000 上发送，如果是 https 请求，它将发送到端口 10001。因此，我意识到，即将到来的请求是HTTP 或 HTTPS 请求。有一个要求，客户端将只指定一个端口号，无论是 HTTP 还是 HTTPS，即它只会在端口 10000 上发送。

所以现在，当 HTTPS 消息到达端口 10000 时，它将全部加密，但我希望该消息转到端口 10001。有没有办法在服务器级别区分 HTTP 或 HTTPS 请求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T13:10:21.683

如果来自客户端的第一个字节是`0x16`，它是 SSL 握手的开始。由于它不是 HTTP 请求的可能开始，您可以通过此属性区分请求。

# ruby-on-rails-3 - 自定义助手 - 依赖链接到远程

> ID：14854230
> 
> 赞同：0
> 
> 时间：2013-02-13T13:02:13.503
> 
> 标签：ruby-on-rails-3, twitter-bootstrap, dependencies, helper

我目前正在编写一个基于引导程序的自定义表单助手，但我遇到了依赖问题（我认为）：

```
class BootstrapFormBuilder < ActionView::Helpers::FormBuilder
  include ActionView::Helpers::UrlHelper
  include ActionView::Helpers::OutputSafetyHelper

  alias :super_collection_select :collection_select

  def collection_select_append(method, collection, value_method, text_method, options = {}, html_options = {})
    ('<div class="control-group' + has_error(object.errors[method]) + '">' +
      label(method, :class => "control-label") +
      '<div class="controls">' +
        '<div class="input-append">' +
          super_collection_select(method, collection, value_method, text_method, objectify_options(options), @default_options.merge(html_options)) +
          '<span class="add-on">' +
            link_to(raw("<i class\"icon-white icon-ok\"></i>"), {:controller => "myController", :action => "myAction"}, :method => "post", :remote => true, :html => { :val1 => "val1", :val2 => "val2" } ) +
          '</span>' +
        '</div>' +
        get_error_message(object.errors[method]) +
      '</div>' +
    '</div>').html_safe
  end

end 
```

这将返回一个错误：

```
undefined local variable or method `controller' for #<..> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T13:08:15.363

我认为您`:url`在此错过了控制器的选项：

```
link_to(raw("<i class\"icon-white icon-ok\"></i>"), {:controller => "myController", :action => "myAction"}, :method => "post", :remote => true, :html => { :val1 => "val1", :val2 => "val2" } ) 
```

尝试：

```
class BootstrapFormBuilder < ActionView::Helpers::FormBuilder
  include ActionView::Helpers::UrlHelper
  include ActionView::Helpers::OutputSafetyHelper

  alias :super_collection_select :collection_select

  def collection_select_append(method, collection, value_method, text_method, options = {}, html_options = {})
    ('<div class="control-group' + has_error(object.errors[method]) + '">' +
      label(method, :class => "control-label") +
      '<div class="controls">' +
        '<div class="input-append">' +
          super_collection_select(method, collection, value_method, text_method, objectify_options(options), @default_options.merge(html_options)) +
          '<span class="add-on">' +
            link_to(raw("<i class\"icon-white icon-ok\"></i>"), :url => {:controller => "myController", :action => "myAction"}, :method => "post", :remote => true, :html => { :val1 => "val1", :val2 => "val2" } ) +
          '</span>' +
        '</div>' +
        get_error_message(object.errors[method]) +
      '</div>' +
    '</div>').html_safe
  end

end 
```

# multithreading - 如何防止 Lua 中的竞争条件？

> ID：14854234
> 
> 赞同：2
> 
> 时间：2013-02-13T13:02:30.177
> 
> 标签：multithreading, lua, race-condition

我正在编写一个 Lua 脚本，它使用一个库来访问带有按钮的硬件设备。我注册了一个回调函数来处理按钮按下。代码如下所示：

```
globalvar = {}

function buttonCallback(buttonId)
    ...accessing globalvar
end

device.RegisterButtonCallback("buttonCallback")

while true do
end 
```

这行得通。

现在我想更新 globalvar 不仅在按钮按下，而且在 1 分钟间隔。因为无论如何我都需要访问网络资源，所以我计划使用 socket.select 调用来获得 1 分钟的间隔。

```
#require "socket"

globalvar = {}

function buttonCallback(buttonId)
    ...access globalvar
end

device.RegisterButtonCallback("buttonCallback")

while true do
    socket.select(nil, nil, 60)  -- wait 60 seconds
    ...access network
    ...access globalvar
end 
```

现在我关心的是globalvar的并发访问。我怎样才能在这里防止比赛条件？Lua 中关于多线程的大多数资源都建议在协作调度中使用延续，但我不知道如何在我的案例中应用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T13:53:31.257

假设您正在使用的库正在幕后创建另一个线程，并且您唯一关心的是从回调中访问，您可以通过在回调中写入管道并在循环`globalvar`中读取它来避免它。`select`换句话说，使用标准 POSIX 风格的管道将回调传回主线程。在处理例如 POSIX 信号时，这是一种相当常见的技术。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T20:31:32.560

Lua 在特定`lua_State`实例中不是线程安全的。当另一个线程对该 Lua 实例执行其他操作时，您*不能*从一个线程修改全局变量。您当然不能在同一个实例上执行两个单独的脚本。

线程安全是你必须在 Lua 之外做的事情。您不能让检测按钮按下的 C/C++ 线程实际直接调用 Lua 代码。它必须通过某种线程安全机制将该数据发送到主线程，在那里*它将*为它们调用 Lua 脚本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T21:04:58.003

于是我深入研究了 Lua 书籍和在线文档，并联系了设备驱动的作者。正如答案已经表明的那样，安全处理按钮回调需要比预期更多的时间。

我现在的方法是自己编写设备驱动程序，并使用套接字作为设备和 Lua 脚本之间的通信通道。

我最初的方法是使用延续，因为这被提倡作为多线程的 Lua“替代品”，但是当我阅读 Lua 书中的编程时，事实证明，为了防止忙等待，它使用了 socket.select（！）。这增加了我对基于套接字的方法很好的感觉，特别是因为我的脚本中还需要用于 Internet 访问的套接字。

# wix - 如果服务未启动则继续

> ID：14854237
> 
> 赞同：2
> 
> 时间：2013-02-13T13:02:50.843
> 
> 标签：wix, wix3.5, wix3.6

我正在安装 Windows 服务（实际上很少），这是其中一个的片段：

```
<Component Id="cmpD9168A36C32F8D411B6EF4270EE6544F" Guid="{E5811AB8-0949-4C75-99BD-6687EB4672D4}" Win64="yes">
          <File Id="filD9168A36C32F8D411B6EF4270EE6544F" KeyPath="yes" Source="$(var.LoggerService.ProjectDir)\bin\LoggerService.exe" />
          <ServiceInstall
              Id="loggerServiceInstaller"
              Type="ownProcess"
              Vital="yes"
              Name="$(var.Manufacturer)LoggerService"
              DisplayName="$(var.Manufacturer)LoggerService"
              Start="auto"
              Account="[PROP_DOMAINUSER]"
              Password="[PROP_PASSWORD]"
              ErrorControl="ignore"
              Interactive="no">
            <ServiceDependency Id="LanmanWorkstation"/>
            <ServiceDependency Id="LanmanServer"/>
          </ServiceInstall>
          <ServiceControl Id="loggerStartService" Start="install"  Stop="both" Remove="uninstall" Name="$(var.Manufacturer)LoggerService" Wait="yes" />
        </Component> 
```

现在，在安装过程中，服务将尝试启动，但根据设计它可能会失败，但没关系。但是现在，当服务失败时，它会询问我是要取消还是重试。我怎么能忽略失败？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T13:27:23.063

通常这是服务设计的问题。例如，我在 StackOverflow 上回答了一些问题，其中开发人员说他们的服务在启动期间调用了一个 Web 服务，并且它需要的时间比 MSI 允许启动的 30 秒要长。我的回答总是“真的？？”。

那是糟糕的设计。服务的 OnStart() 应该只是启动后台工作线程并报告成功。然后该线程应该正在初始化和处理工作。OnStart 的管道需要具有最小的依赖性和最短的执行时间。

# android - Android - GreenDroid 和 googleapis

> ID：14854240
> 
> 赞同：2
> 
> 时间：2013-02-13T13:02:54.763
> 
> 标签：android, google-maps, greendroid

我在我的应用程序中使用了 GreenDroid 库。编译（构建）没有错误。当我在模拟器上运行此应用程序时，它在控制台中显示此错误为

```
[2013-02-13 18:10:08 - GreenDroid] Could not find GreenDroid.apk!

[2013-02-13 18:10:08 - GreenDroid-GoogleAPIs] Could not find GreenDroid-GoogleAPIs.apk! 
```

并在日志中出现猫错误

```
02-13 18:10:17.115: E/AndroidRuntime(421): FATAL EXCEPTION: main

02-13 18:10:17.115: E/AndroidRuntime(421): java.lang.NoClassDefFoundError: com.cyrilmottier.android.greendroid.R$layout

02-13 18:10:17.115: E/AndroidRuntime(421):  at greendroid.app.GDActivity.createLayout(GDActivity.java:177)

02-13 18:10:17.115: E/AndroidRuntime(421):  at greendroid.app.GDActivity.ensureLayout(GDActivity.java:187)

02-13 18:10:17.115: E/AndroidRuntime(421):  at greendroid.app.GDActivity.getActionBar(GDActivity.java:265)

02-13 18:10:17.115: E/AndroidRuntime(421):  at com.singaporegp.f1.home.F1_Splash.onCreate(F1_Splash.java:41)

02-13 18:10:17.115: E/AndroidRuntime(421):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)

02-13 18:10:17.115: E/AndroidRuntime(421):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)

02-13 18:10:17.115: E/AndroidRuntime(421):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)

02-13 18:10:17.115: E/AndroidRuntime(421):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)

02-13 18:10:17.115: E/AndroidRuntime(421):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)

02-13 18:10:17.115: E/AndroidRuntime(421):  at android.os.Handler.dispatchMessage(Handler.java:99)

02-13 18:10:17.115: E/AndroidRuntime(421):  at android.os.Looper.loop(Looper.java:130)

02-13 18:10:17.115: E/AndroidRuntime(421):  at android.app.ActivityThread.main(ActivityThread.java:3683)

02-13 18:10:17.115: E/AndroidRuntime(421):  at java.lang.reflect.Method.invokeNative(Native Method)

02-13 18:10:17.115: E/AndroidRuntime(421):  at java.lang.reflect.Method.invoke(Method.java:507)

02-13 18:10:17.115: E/AndroidRuntime(421):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)

02-13 18:10:17.115: E/AndroidRuntime(421):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)

02-13 18:10:17.115: E/AndroidRuntime(421):  at dalvik.system.NativeStart.main(Native Method) 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T12:07:40.353

我试图按顺序尝试：

检查项目未设置为库：转到 Project->Properties 从左侧列表中选择 Android 取消选中“Is Library”复选框 清理并重建项目 - 这应该删除并重新创建整个 gen 文件夹，包括 R一些人的回答中提到的.java文件检查eclipse和所有的Android插件都是最新的关闭项目，退出Eclipse，重新打开eclipse，重新打开项目。转到 Java Build Path > Projects 并检查任何不正确的项目依赖项转到 Eclipse 的主要首选项并在 Android->Build 下取消选中“在导出或启动之前跳过打包和 dexing”

# python - DBSCAN 中的替代相似性度量？

> ID：14854243
> 
> 赞同：1
> 
> 时间：2013-02-13T13:03:04.740
> 
> 标签：python, scikit-learn, cluster-analysis, data-mining, dbscan

[`scikit-learn`](http://scikit-learn.org/dev/auto_examples/cluster/plot_dbscan.html)我在python 模块中使用 DBSCAN 算法测试我的图像集。相似度计算有一些替代方案：

```
# Compute similarities
D = distance.squareform(distance.pdist(X))
S = 1 - (D / np.max(D)) 
```

我可以尝试加权度量或类似的方法，例如？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T19:39:49.017

DBSCAN 存在一个泛化，称为“Generalized DBSCAN”。

实际上，对于 DBSCAN，您甚至不需要距离。这就是为什么首先计算相似度矩阵实际上没有意义的原因。

您所需要的只是一个谓词“getNeighbors”，它计算您认为是邻居的对象。

请参阅：在 DBSCAN 中，距离并没有真正使用，除了测试对象是否是邻居。所以你只需要这个布尔决定。

您可以尝试以下方法：使用全 1 初始化矩阵。对于**您认为与您的应用程序相似的**任何两个对象（在不知道您的应用程序和数据的情况下，我们无法为您提供很多帮助），用 0 填充相应的单元格。然后使用 epsilon = 0.5 运行 DBSCAN，显然 DBSCAN 将将所有 0 视为邻居。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T13:39:56.433

您可以使用任何您喜欢的相似度矩阵。它只需要基于有效距离（对称，半正定）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-26T06:41:18.483

我相信 DBSCAN 估计器需要距离而不是相似度。但同样，当涉及到字符串时，它需要一个相似度矩阵，它甚至可以是用于匹配两个字符串之间相等性的一行代码。因此，这取决于您如何使用相似度矩阵并区分邻居和非邻居对象。

# javascript - 是否有适用于三星 Galaxy 选项卡的 JavaScript 手势库？

> ID：14854246
> 
> 赞同：10
> 
> 时间：2013-02-13T13:03:18.023
> 
> 标签：javascript, jquery, swipe, gestures

我一直在尝试使用 javascript 手势库。它们都适用于 iPad mini，但是，当我在三星 Galaxy Tab（GT-P7510，Android 4.04）上试用它们时，结果充其量只是断断续续的。

我得到的最好结果是在纵向模式下。在横向模式下，几乎没有任何效果。

我已经尝试过以下库，所有这些都是我从这篇文章中找到的：[http ://www.queness.com/post/11755/11-multi-touch-and-touch-events-javascript-libraries](http://www.queness.com/post/11755/11-multi-touch-and-touch-events-javascript-libraries)

*   锤子.js
*   quo.js
*   敏感的
*   双击
*   手势
*   触摸滑动

Touchswipe 效果最好，但所有其他人都没有真正打球。

Hammer 页面有一个演示，在 ipad 上运行良好，但在 android 上运行良好：

[http://eightmedia.github.com/hammer.js/](http://eightmedia.github.com/hammer.js/)

那么，有没有人知道我可以通过滑动手势在我的银河系上玩得开心吗？

我已经查看了以前的 stackoverflow 问题所指向的 quirksmode 页面，但据我所见，该页面已过时且不再维护。此外，它实际上并没有提到任何库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-01T14:39:42.207

我运气不错：

[https://github.com/HotStudio/touchy](https://github.com/HotStudio/touchy)

它具有长按、捏合、旋转和滑动手势，并且代码相当容易定制。

请注意，需要处理手势组合——例如，滑动几乎总是会触发长触摸，因此您必须设置标志或以其他方式处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-17T22:45:09.500

这是一个 CodePen 手势比较工具。[http://jsfiddle.net/icoxfog417/uQBvP/](http://jsfiddle.net/icoxfog417/uQBvP/)

经过大量工作后，我们放弃了 Hammer.JS，并搬到了我们认为还不错的 Quo。事情可能已经改变并且现在有所不同。

```
 document.head.insertAdjacentHTML( 'beforeEnd', '<meta name="viewport" content="target-densitydpi=device-dpi,width=device-width,initial-scale=1.0" />' );

$(function(){
  //initialization 
  $(".detector").bind("click touchstart",function(e){
    $(".detector").removeClass("selected");
    $(this).addClass("selected");

    unbindLibrary();
    bindLibrary($(this).prop("id"));
  });

  //bind library to gesture pad
  bindLibrary = function(id){
    var $pad = $("#gesture-pad");
    var events = [];
    var eventStr = "";
    $("#" + id + "List li").each(function(){
      events.push($(this).text());
    })
    //make target event list from each library's gestureList
    eventStr = events.join(" ");

    switch(id){
      case "hammer":
        hammer = Hammer($pad.get(0), {
          prevent_default: true
        })
        .on(eventStr, logEvent);
        break;
      case "quojs":
        for(var i = 0;i<events.length;i++){
          $$("#gesture-pad").on(events[i], logEvent);
        }
        $$("#gesture-pad").on("touchstart",function(e){
          e.preventDefault();
        });
        break;
      case "touchSwipe":
        var options = {};
        var touchSwipeHandler = function(name){
          if(name.indexOf("pinch") < 0){
            return function(event, distance, duration, fingerCount){ 
                     var e = {}; e["type"] = name; logEvent(e);        
                   };
          }else{
            return function(e, direction, distance, d, f, pinchZoom){ 
                     var e = {}; e["type"] = name; logEvent(e);        
                   };
          }
        };

        for(var i = 0;i<events.length;i++){
            options[events[i]] = new touchSwipeHandler(events[i]); 
        }
        $pad.swipe(options);
        break;
      case "touchy" :
        var handler = function(name){
            return function(event, phase, $target, data){
                     var e = {}; e["type"] = name; logEvent(e);
                   }
        }
        for(var i = 0;i<events.length;i++){
            $pad.bind(events[i],new handler(events[i]));
        }
        break;      
    }
  }

  //unbind library from gesture pad
  unbindLibrary = function(){
    var element = $("#gesture-pad").clone();
    $("#gesture-pad").replaceWith(element);
    $(".gesturelist .selected").removeClass("selected");
  }

  //log detected gesture
  logEvent = function(e){
    $("#detected").text(e.type);
    var selected = $(".detector.selected").prop("id");
    $("#" + selected + "List li").each(function(){
        if($(this).text() == e.type){
            $(this).addClass("selected");
`enter code here`        };
    })          
    return false;
  }

  $(".detector").first().addClass("selected");
  bindLibrary($(".detector.selected").prop("id"));

}) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-23T22:04:44.553

我知道这是一个老问题，但我尝试了几个库，但对其中的任何一个都不满意，所以我自己动手了。它是麻省理工学院许可的，可在

[https://github.com/aerik/GestureListener.js](https://github.com/aerik/GestureListener.js)

带有测试/演示页面

[http://aerik.github.io/GestureListener/example.htm](http://aerik.github.io/GestureListener/example.htm)

我经常在我的 Galaxy S4 手机、几台 Ipad 和几台 Windows 8 触摸屏设备上使用它。我们将它用于工作中的生产软件。

欢迎使用错误报告（附示例）。

# jquery - jquery：简单的函数触发/调用

> ID：14854248
> 
> 赞同：0
> 
> 时间：2013-02-13T13:03:21.277
> 
> 标签：jquery, function, triggers, scope

在另一个函数中调用一个函数最直接的方法是什么？

我有：

```
function carousel_animation(){

            $(carousel).transition({y: m + '=10', queue: false});

            $('article div').promise().done(function(){
                $(this).transition({x:2000}, 500, 'easeInCirc');
            });

            $('article div').promise().done(function(){
                $(this).css({x:'-500'}).transition({x:'0'}, 1500, 'easeInOutQuart');
                $(carousel_reset).css({opacity:0});

                $(carousel_content)
                .css({opacity:100, duration:1500});
            });

}; 
```

我需要在这个由点击触发的函数中调用它：

```
function carousel_4way (n, el, m) {
        // remove outline from clicked element
        el.blur();

        // animate
        var carousel = '#carousel-4way-nav-' + n
        var carousel_content = '#carousel-4way-' + n
            transitionState  = (transitionState == '-') ? '+' : '-';

        **// I want the function to be placed inside, here**

        transitionState2 = '-';
        transitionState3 = '-';
        transitionState4 = '-';

    }; 
```

所以它就像一个非常重复的函数，需要在我的代码中多次使用。我怎么做？

* * *

我使用 Robert Koritnik 的建议重写了代码，它正在工作：

```
function karuzela(n,el,m){  
    var carousel = '#carousel-4way-nav-' + n
    var carousel_content = '#carousel-4way-' + n

    function carousel_4way(){
        el.blur();
            transitionState  = (transitionState == '-') ? '+' : '-';
            $(carousel).transition({y: m + '=10', queue: false});
            };

    function carousel_animation(){

            $('article div').promise().done(function(){
                $(this).transition({x:2000}, 500, 'easeInCirc');
            });
            $('article div').promise().done(function(){
            $(this).css({x:'-500'}).transition({x:'0'}, 1500, 'easeInOutQuart');
            $(carousel_reset).css({opacity:0});
            $(carousel_content)
            .css({opacity:100, duration:1500});
            });

            transitionState2 = '-';
            transitionState3 = '-';
            transitionState4 = '-';

    };
    carousel_4way()
    carousel_animation()
}; 
```

但是，现在我看不到将这两个嵌套函数放在外面并像这样单独使用它们的方法：

```
function karuzela(n,el,m){
  var carousel = '#carousel-4way-nav-' + n
  var carousel_content = '#carousel-4way-' + n
    carousel_4way()
    carousel_animation()
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T13:07:32.450

## 您遇到的问题是变量范围

... 以及它们在各个功能中的可见性。当您尝试调用您的函数时，您可能会收到`carousel`未定义其他变量的错误。

尝试更改您的函数以具有此签名：

```
function carousel_animation(carousel, carousel_content, carousel_reset, m)
{
    ...
} 
```

或者因为您是从其他变量生成这些选择器，所以只需传递这些：

```
function carousel_animation(n, el, m)
{
    var carousel = '#carousel-4way-nav-' + n;
    var carousel_content = '#carousel-4way-' + n;
    ...
} 
```

对于我们不知道的相同功能的其他用途，这可能不可行。但是您必须注意变量范围。例如，您的`carousel`变量对于`carousel_4way`函数来说是本地的，因此其他函数（如果未在同一函数中定义）将看不到它。因此，您必须：

*   将两个函数都放在私有函数范围内，并在该范围内定义这些变量，以便两个函数都可以看到：
*   不建议将共享变量设为全局，因为这会打开完全不同*的蠕虫罐，*因为您的变量值可能会开始发生意外的事情

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T13:06:52.157

调用它

```
// I want the function to be placed inside, here
carousel_animation() 
```

# ios - 在我创建的文件上运行打开时出现错误 13（权限被拒绝）（iOS）

> ID：14854257
> 
> 赞同：3
> 
> 时间：2013-02-13T13:04:01.960
> 
> 标签：ios, file, error-handling

我有一个在 iOS (iPad) 上运行的简单程序，它打开一个文件，写入一些数据，关闭文件，然后尝试重新打开文件。奇怪的是，第二次打开有时会失败，返回码 -1 和 errno 13（权限被拒绝）。如果我多次运行代码，它将交替失败和成功（模式似乎是随机的）。

下面是我正在使用的代码，谁能解释我做错了什么？第一次打开总是成功，写入也总是成功。

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *appFile = [documentsDirectory stringByAppendingPathComponent:@"file.txt"];

result = remove([appFile cStringUsingEncoding:NSASCIIStringEncoding]);

int fp = open([appFile cStringUsingEncoding:NSASCIIStringEncoding], O_RDWR | O_CREAT);
result = write(fp, "abc", 3);
close(fp);

fp = open([appFile cStringUsingEncoding:NSASCIIStringEncoding], O_RDONLY);
NSLog(@"fp = %i, errno = %i", fp, errno);
close(fp); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T22:53:10.280

从 open(2) 的手册页：

```
The oflag argument may indicate that the file is to be created if it does
not exist (by specifying the O_CREAT flag). In this case, open requires a
third argument mode_t mode; 
```

由于您没有指定第三个参数，它将使用随机值，这就是它有时会失败的原因。添加第 3 个参数 0644，然后它将始终有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-17T04:32:53.713

打开文件夹必须有可执行权限，所以使用：

```
chmod 0760 "dir" 
```

# php - 如何为相同的数据获得相同的背景颜色？

> ID：14854260
> 
> 赞同：0
> 
> 时间：2013-02-13T13:04:12.237
> 
> 标签：php, html, css, codeigniter

我使用 CodeIgniter PHP 框架。

我的查看代码：

```
<?hp
    $nomor_III=1;

    foreach ($listPertanyaanBlokIII as $data){
        echo '<tr>';
        echo '<td>'.$nomor_III.'</td>';                                                        
        echo '<td style="text-align:left;padding-left:5px;">'.$data['jenis_barang'].'</td>';  
        echo '<td>'.$data['id_kualitas_barang'].'</td>';
        echo '<td style="text-align:left;padding-left:5px;">'.$data['kualitas_barang'].'</td>';
        echo '<td>'.$data['satuan'].'</td>';        
        echo '<td>'.form_input('res1_'.$data['id_kualitas_barang'].'').'</td>';
        echo '<td>'.form_input('res2_'.$data['id_kualitas_barang'].'').'</td>';
        echo '<td>'.form_input('res3_'.$data['id_kualitas_barang'].'').'</td>';
        echo '<td style="width:200px;"><textarea name="ket_'.$data['id_kualitas_barang'].'" rows="2" cols="30"></textarea></td>';
        echo '</tr>';

        $nomor_III=$nomor_III+1;
    }
?> 
```

并且，浏览器中的视图：

```
Num | Product  
----------------
1   | Plate
2   | Plate
3   | Glass
4   | Glass 
```

如何使具有相同描述的数据具有相同的背景颜色？例如“玻璃”变成灰色，“盘子”变成白色，等等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T13:08:49.800

只需将颜色描述添加为一个类。虽然我不了解您的数组键，但它看起来像这样：

```
echo '<td class="'.$data['description'].'">'.$data['description'].'</td>'; 
```

每个描述都有一个相应的类：

```
.paku {
    background-color: #000000;
} 
```

**编辑**：如果你想要一个斑马表，你可以使用 CSS3：

```
tr:nth-child(even) {
  background-color: #DCDCDC;
}

tr:nth-child(odd) {
  background-color: #FFFFFF;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T14:00:46.883

您可以尝试重组您的初始数据集`$listPertanyaanBlokIII`，使其按产品分组：

```
Array
(
[plate] => Array
    (
        [0] => plate 123
        [1] => plate 456
    )

[glass] => Array
    (
        [0] => glass 123
        [1] => glass 456
     )
) 
```

然后（简化代码）：

```
$css_class = 'even';
foreach($listPertanyaanBlokIII as $group => $array){
      $css_class = $css_class == 'even' ? 'odd' : 'even';
      echo $group.'<br>';
          foreach($array as $val){
          echo ' ---- '.$val.' class='.$css_class.'<br>';
          }
 } 
```

输出，这再次只是为了证明这个概念：

```
plate
---- plate 123 class=odd
---- plate 456 class=odd
glass
---- glass 123 class=even
---- glass 456 class=even 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T13:07:43.633

您可以检查子字符串匹配并根据它应用背景颜色

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T14:05:32.470

您正在寻找的是`tbody`用于分组目的的元素。您需要修改循环，使您可以将所有相同类型的产品放在同一个 tbody 中。一旦你这样做了，你可以在身体上做斑马条纹。

```
tbody:nth-child(odd) {
    background: #CCC;
}

<table>
    <tbody>
        <tr>
            <td>1</td>
            <td>Plate</td>
        </tr>

        <tr>
            <td>2</td>
            <td>Plate</td>
        </tr>
    </tbody>

    <tbody>
        <tr>
            <td>3</td>
            <td>Glass</td>
        </tr>

        <tr>
            <td>4</td>
            <td>Glass</td>
        </tr>
    </tbody>
</table> 
```

[http://jsfiddle.net/V8xss/](http://jsfiddle.net/V8xss/)

我已经展示了如何修改循环作为另一个问题的答案： [Displaying table data column-wise in a while loop](https://stackoverflow.com/questions/13348559/displaying-table-data-column-wise-in-a-while-loop/13349518#13349518)（尽管您需要将插入的标签从更改`tr`为`tbody`）

# javascript - 提交包含表格的表单时如何跳过标题验证？

> ID：14854261
> 
> 赞同：0
> 
> 时间：2013-02-13T13:04:15.657
> 
> 标签：javascript, html, forms, html-table

我有一个表格，里面有一张桌子。我正在做类似的事情

```
function validate(){
var result = true;
$("tr").each(function(){

    if($(this).find(".qty").val()<1||isNaN($(this).find(".qty").val())){
        result = false;
        return false;
    }
    if($(this).find(".pvDetails").text()==""){
         result = false;
         return false;
    }
});

if(result)
    return true;
else
    alert('correct the input values | check your ID or Qty field');
return false;

} 
```

但这也会将我的标头用于验证，因为我的标头定义如下 -

```
<tr height="50px" bgcolor="#EEE8CD">
                    <th align="left" width="10%">Serial No.</th>
                    <th align="left" width="15%">Variant ID</th>
                    <th align="left" width="20%">Product Detail</th>
                    <th align="left" width="17%">Product Image</th>
                    <th align="left" width="10%">B2B Price</th>
                    <th align="left" width="13%">Quantity</th>
                    <th align="left" width="12%">Total</th>
                </tr> 
```

休息是我的桌身。

如何在使用与我所采用的方法相同的方法时跳过对表头的验证。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T13:07:14.670

我认为你的标题的标签名称只是`<th>`你的表格内容单元格，`<td>`所以基本的想法是检查你的孩子的标签名称`<tr>`

```
 $("tr").children().each(function () {
    if ($(this).prop("tagName") == "td") {
        if ($(this).find(".qty").val() < 1 || !isNaN($(this).find(".qty").val())) {
            result = false;
            return false;
        }
        if ($(this).find(".pvDetails").text() == "") {
            result = false;
            return false;
        }
    }
   }); 
```

`<tbody>`好吧，另一个想法只是像这样只阅读该部分

```
$("#mytable tbody tr").children().each(function () {

        if ($(this).find(".qty").val() < 1 || !isNaN($(this).find(".qty").val())) {
            result = false;
            return false;
        }
        if ($(this).find(".pvDetails").text() == "") {
            result = false;
            return false;
        }
   }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T13:07:56.043

将“skipvalidation”类名添加到您不想被验证的任何行。然后将第 3 行修改成这样：

```
$("tr").not('.skipvalidation').each(function(){ ... 
```

# macos - UNIX / Linux / Mac OSX 获取文件作为数字的权限

> ID：14854265
> 
> 赞同：19
> 
> 时间：2013-02-13T13:04:32.257
> 
> 标签：macos, posix, file-permissions

这一定很简单，但完全画了一个空白。我可以使用 ls -la 查看文件的权限，它可以提供如下内容：

```
-rwxr-xr-x   1 james  staff   68  8 Feb 13:33 basic.sh*
-rw-r--r--   1 james  staff   68  8 Feb 13:33 otherFile.sh* 
```

如何将其转换为与`chmod`like一起使用的数字`chmod 755 otherFile.sh`（不进行手动转换）。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-02-13T13:57:43.950

`stat -f "%Lp" [filename]`在 OS X 10.8 中为我工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T13:12:06.860

您应该能够使用`stat`命令而不是`ls`. 通过查看[手册页](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/Manpages/man1/stat.1.html)，这应该可以获取文件权限：

```
for f in dir/*
do
    perms=$(stat -f '0%Hp%Mp%Lp' $f)
    echo "$f has permissions $perms"
done 
```

（虽然我现在不在我的 Mac 上，因此无法测试它）。

# sql - ORACLE 中的“小于”两个varchars？

> ID：14854267
> 
> 赞同：3
> 
> 时间：2013-02-13T13:04:39.130
> 
> 标签：sql, oracle

我有一个作业问题：

```
Find the celebs that have been in relationship with the same celeb. 
The result should be (celeb1, celeb2, celeb3) triples, 
meaning that celeb1 and celeb2 have been in relationship with celeb3. 
```

现在“关系”表有 celeb1 和 celeb2 字段..其中值是 VARCHAR。

我对这个问题的解决方案是：

```
 CREATE VIEW Celeb1Rels AS
SELECT celeb1 AS c1, celeb2 AS c2 FROM relationships;

CREATE VIEW Celeb2Rels AS
SELECT celeb1 AS c2, celeb2 AS c3 FROM relationships;

SELECT * FROM Celeb1Rels NATURAL JOIN Celeb2Rels; 
```

它工作正常。然而，教练发布了他的解决方案，他有：

```
SELECT X.celeb1, Y.celeb1, X.celeb2
FROM Relationships X, Relationships Y
WHERE X.celeb2=Y.celeb2 AND X.celeb1<Y.celeb1; 
```

我不明白他为什么使用 X.celeb1 < Y.celeb1 它确实有效并给出了正确的输出，但我认为“<”用于比较数字？

谁能解释在这种情况下“<”在做什么？以及在比较 VARCHARS 时它的行为如何？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T13:20:35.833

这样你就不会得到重复的关系，例如 celeb1 和 celeb2 以及 celeb1 和 celeb3 之间的 2 个假设关系，你想要结果

```
celeb2, celeb3, celeb1 
```

您需要第二个不等式运算符来确保表不会加入相同的关系（即 celeb1 和 Celeb2 加入回 celeb1 和 celeb2）。如果你要使用你的导师查询并修改它，而不是`<`使用不等于`<>`，你会得到结果：

```
celeb2, celeb3, celeb1
celeb3, celeb2, celeb1 
```

但是这些行显示的内容相同，但顺序不同，`>`不等式运算符只是确保第二列始终是第一列之后按字母顺序排列的名称。

`>`因此，在应用于 varchars 时总结运算符按字母顺序工作，所以`'a' < 'b'`，`'abc' > 'aaa'`等等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T13:20:13.593

我想排除双倍的记录，例如：

如果`(A,B)`和`(B,C)`在这个表中，那么如果查询没有`AND X.celeb1<Y.celeb1`我们得到

`(A,B,C)`并`(B,C,A)`在输出中。加上这个条件，我们只输出一条`(A,B,C)`记录`A < C`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T13:19:27.210

讲师的解决方案产生三元组，其中 CELEB2 处于两个关系中。WHERE 子句的这一部分...

```
X.celeb1<Y.celeb1 
```

... 确保您只获得三个不同名人的行（即，它避免将相同的记录与自身匹配），并且每个三人组只能获得一行。

不如您想象的那样工作，它按字母顺序排序。也是如此`'ANDY GARCIA' < 'ANDY KAUFMAN'`。

需要注意的事项：

*   它使用 ASCII 值，因此区分大小写。这意味着`'andy garcia' < 'ANDY KAUFMAN'`是错误的。
*   数字也按字母顺序排序，这`'11' < '2'`是真的。

* * *

> “我不知道这个排序问题”

通过设置 NLS_SORT 参数，可以使 Oracle 排序大小写不敏感。但是，这不会改变比较；为此，我们需要将 NLS_COMP 参数更改为`LINGUISTIC`. 这些不是默认行为，仅仅是因为有太多代码可能依赖于区分大小写的排序。 [了解更多](http://docs.oracle.com/cd/E11882_01/server.112/e10729/ch5lingsort.htm#NLSPG290)。

# php - jPlayer - 根据文件夹中的文件创建动态播放列表

> ID：14854271
> 
> 赞同：0
> 
> 时间：2013-02-13T13:05:06.467
> 
> 标签：php, javascript, json, jplayer

我正在尝试基于文件夹中的 mp3 文件创建 jPlayer 播放列表。我找到了 jPlaylister：http: [//jplaylister.yaheard.us/v_0.65/](http://jplaylister.yaheard.us/v_0.65/)

我在这里发现了一个类似的问题： [Dynamically populate playlist with JSON from PHP in jPlayer](https://stackoverflow.com/questions/8393273/dynamically-populate-playlist-with-json-from-php-in-jplayer?rq=1)

现在，我不是这些事情的专家。我更像是一个设计和简单代码的人。但是我尝试根据自己的喜好构建代码，并且我想出了这个。这根本不起作用。我也不确定如何调试它，因为我无法从 $.getJSON 得到响应

这是我现在的代码：

```
$(document).ready(function(){

        var cssSelector = {
            jPlayer: "#jquery_jplayer_1", 
            cssSelectorAncestor: "#jp_container_1"
        };
        var playlist = []; // Empty playlist
        var options = {
            swfPath: "js", 
            supplied: "mp3"
        };

        //var playlist = [{"title":"Kalimba","mp3":"/path/to/mydirectory/Kalimba.mp3"},{"title":"Maid with  the Flaxen Hair","mp3":"/path/to/mydirectory/Maid with the Flaxen Hair.mp3"},{"title":"Sleep Away","mp3":"/path/to/mydirectory/Sleep Away.mp3"}];
    var url=  "getSongurl.php";
    var song = "Assets/mp3/mysong";

    var myPlaylist = new jPlayerPlaylist(cssSelector, playlist, options);   
    $.getJSON(url, {songurl: song}, function(data) {
        $.each(data, function(key, val) {
            myPlaylist.add(value);
        })
    }); 
}); 
```

我想将歌曲变量传递给 JSON，以便我可以在 PHP 中处理文件夹并返回该文件夹中的所有文件。

现在，这是 PHP 文件：

```
<?php

    $results = array();

    $directory = $_POST['songurl'];
    $handler = opendir($directory);

    while ($file = readdir($handler)) {
            $results[] = $file;
            <script type="text/javascript">
                alert("file: <?php echo $file; ?>");
            </script>
    }

    $limit = count($results();
    $i = 0;

    while ($i < $limit) {
        $filesJson = array(
            'title:' => $i,
            'mp3:' => $i
        );
    }

    //tidy up
    closedir($handler);
    echo json_encode($filesJson);

    ?> 
```

我试图在那里发出警报，但我也没有收到任何警报。可能只有我在这里做错了什么..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-10-15T15:36:37.710

**你的 php 文件就像**

```
<?php
$results = array(); 
$fdirectory = (isset($_REQUEST['songurl']))?$_REQUEST['songurl']:'songs/';
$handler = opendir($fdirectory);
while ($file = readdir($handler)) {
        if($file != '.' && $file != '..')
        $results[] = $file;
}

if(!empty($results)){
    foreach($results as $k=>$song){
        $filesJson[] = array(
            'title' => preg_replace('/\\.[^.\\s]{3,4}$/', '', $song),
            'mp3' => $fdirectory.$song
        );
    }
}    
closedir($handler);
$songList = json_encode($filesJson);
    if(isset($_REQUEST['songurl'])){
        echo $songList;
    } 
```

**JS**

```
var url=  "getSongs.php";
var song = "Assets/mp3/mysong/";
var cssSelector = {
        jPlayer: "#jquery_jplayer_1", 
        cssSelectorAncestor: "#jp_container_1"
    };

var playlist = []; // Empty playlist
var options = {
  swfPath: "dist/jplayer",
  supplied: "mp3"
};
$(document).ready(function(){   
    var myPlaylist = new jPlayerPlaylist(cssSelector, playlist, options);   
   $.getJSON(url, {songurl: song}, function(data) {
      $.each(data, function(key, val) {
        myPlaylist.add(val);
      })
   }); 

}); 
```

**享受**:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-27T15:33:18.273

好吧，对于初学者来说，你需要有`$limit = count($results());`，而不是`$limit = count($results();`. 那可能搞砸了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-15T06:19:30.117

我编写了 jplaylister，乍一看，这里并不真正需要 JSON。该脚本被制作为“指向一个文件夹”，并根据它在该文件夹/子文件夹中找到的所有内容制作一个播放列表（可过滤）。

它使用 php 数组来存储它找到的内容，并且（从当前版本开始）提供播放列表缓存，以防文件数量很大并且从它们获取 ID3 信息开始变得耗时。

让 jplaylister 工作（或者让我知道它不是并告诉我原因或将我链接到您的开发代码）...然后将您的媒体文件添加到其中...然后您可以开始幻想它。

祝你好运！

尼克·C

# c# - 我想在 devexpress 上的 ok 按钮之后存储过滤器表达式

> ID：14854281
> 
> 赞同：-1
> 
> 时间：2013-02-13T13:05:34.357
> 
> 标签：c#, asp.net

我试图在确定按钮位于 DevExpress 过滤器上之后存储过滤器表达式，但我不知道该怎么做。

我想要这个表达式，这样我就可以将她放入数据库中。请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T13:17:46.420

在确定按钮单击事件上，您可以将过滤器字符串作为

```
string criteria = yourGridVIew.ActiveFilterString ; 
```

您可以稍后将网格重新分配为

```
yourGridView.ActiveFilterString = "([ProductID] = 1 OR [ProductID] = 3 " + 
  "OR [ProductID] > 10) AND [Discount] = 0"; // example 
```

对于 AspXGridVIew：

```
string filter =YourGridView.FilterExpression; 
```

# java - 使用反射查找类成员值

> ID：14854283
> 
> 赞同：3
> 
> 时间：2013-02-13T13:05:36.010
> 
> 标签：java, reflection

我使用反射通过以下代码查找类成员及其相关类型，但我的问题是是否有办法找到类默认值？
例如，在这种情况下，我需要值**1L**。

```
public class SalesOrrP implements Serializable {
    private static final long serialUID = 1L;
} 
```

我使用以下代码查找成员名称和类型

```
Field[] declaredFields = clsObj.getClass().getDeclaredFields();
for (Field field : declaredFields) {
    // Get member name & types
    Class<?> fieldType = field.getType();
    Type genericType = field.getGenericType();
    String fieldTypeName = fieldType.getName();
    String memberName = field.getName();
    if (genericType instanceof ParameterizedType) {
        ParameterizedType pt = (ParameterizedType) genericType;
        for (Type typeOfReferance : pt.getActualTypeArguments()) {
            //...
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T13:14:21.953

如果您只需要访问该字段的值，您只需使其可访问并获取该值：

```
field.setAccessible(true);
long value = field.getLong(null); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T13:15:17.960

对于静态字段，您不需要创建新实例。在你的情况下，`SalesOrrP.class.getDeclaredField("serialUID").get(null)`应该足够了。

对于非静态字段，您无法获得您正在谈论的*初始化值，因为它是由编译器在类的构造函数中自动重新定位的。*这意味着您必须创建该类的新实例才能获得您正在寻找的值。

如果您确定这些类提供了一个空构造函数（即没有参数的构造函数），那么您可以执行以下操作：

```
public static <T> Map<String, Object> getDefaultValues(Class<T> clazz, T instance) throws Exception {
    Map<String, Object> defaultValues = new HashMap<String, Object>();
    if (instance == null) {
        instance = clazz.newInstance();
    }
    for (Field field : clazz.getDeclaredFields()) {
        field.setAccessible(true);
        Object defaultValue = field.get(instance);
        defaultValues.put(field.getName(), defaultValue);
    }
    return defaultValues;
} 
```

例如，在您的情况下，`getDefaultValues(SalesOrrP.class, null)`将返回`{serialUID=1}`. 如果您已经有一个类的实例，请将其作为第二个参数（而不是`null`上面的示例）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-13T13:09:49.200

这个最终值只能通过反射来改变。如果您知道不能使用反射，那么您是安全的。

如果没有，您可以创建一个新实例并获取新实例的值。

# javascript - Stackoverflow 在客户端 Javascript 中的“相关条目”算法？

> ID：14854285
> 
> 赞同：1
> 
> 时间：2013-02-13T13:05:39.120
> 
> 标签：javascript, full-text-search, client-side

谷歌搜索了一下，但我想我不知道如何表达我的问题：

我有一个带有一系列问题的客户端 javascript 应用程序。

```
var questions = [
    'How are you?',
    'Where are you?',
    'How far away is the sun?'
]; 
```

我想将一个新问题与一系列现有问题进行比较：

```
var newQuestion = "How are you doing today?"; 
```

是否有一个现有的客户端 javascript 库可以将新问题复制到现有问题数组中并返回如下结果：

```
[
    {
        original: "How are you?",
        similarity: .80
    },
    {
        original: "Where are you?",
        similarity: .71
    },
    {
        original: "How far away is the sun?",
        similarity: .13
    }
] 
```

任何意见将是有益的！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T14:05:36.923

感谢[koopajah](https://stackoverflow.com/users/1606729/koopajah)：

[String_Score](http://github.com/joshaven/string_score)似乎完成了工作

> [koopajah](https://stackoverflow.com/users/1606729/koopajah)：这个库怎么样：在stackoverflow.com/questions/5859561/中找到的github.com/joshaven/string_score

# ios - 获取 iOS 视图的实际尺寸

> ID：14854286
> 
> 赞同：7
> 
> 时间：2013-02-13T13:05:41.207
> 
> 标签：ios, uiview, addsubview

如何获得我正在控制的视图或子视图的实际尺寸？例如：

```
UIView *firstView = [[UIView alloc] initWithFrame:CGRectMake(0,0,200,100)];
[self addSubview:firstView];

UIButton *button = [[UIButton alloc] initWithFrame:CGRectMake(10, 20, 230, 120)];
[firstView addSubview:button]; 
```

如您所见，我的`button`对象超出了它被添加到的视图的尺寸。

考虑到这一点（假设有许多对象被添加为子视图），我如何确定的实际宽度和高度`firstView`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T13:09:14.650

如果您希望按钮具有与 firstView 相同的宽度和高度，您应该使用 UIView 的 bounds 属性，如下所示：

```
UIView *firstView = [[UIView alloc] initWithFrame:CGRectMake(0,0,200,100)];
[self addSubview:firstView];

UIButton *button = [[UIButton alloc] initWithFrame:firstView.bounds];
[firstView addSubview:button]; 
```

要获得 firstView 的宽度/高度，您可以执行以下操作：

```
CGSize size = firstView.bounds.size;
NSInteger width = size.width;
NSInteger height = size.height; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T13:09:35.677

第一个视图实际上是 200 x 100。但是，除非您使用`clipsToBounds`.

您的问题的一个更好的解决方案是停止添加超出尺寸的视图或停止调整视图大小，以便它们在适当的情况下溢出可用空间。

（要实际计算包括层次结构中所有子视图的完整边界并不难，只是很多工作实际上不会让你到达任何地方。`UIView`碰巧允许视图大于它们的容器，但它不一定给出任何保证什么会正常工作，如果被利用，可能会成为错误的来源。原因`clipsToBounds`可能是剪辑很昂贵，但在动画过程中是必要的，其中子视图可能会暂时移出边界以达到效果从视图中删除。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T13:11:05.727

firstview.frame.size.width firstview.frame.size.height

# actionscript-3 - 用于游戏开发的 Autodesk Scaleform

> ID：14854288
> 
> 赞同：0
> 
> 时间：2013-02-13T13:05:45.017
> 
> 标签：actionscript-3, game-engine, scaleform

我很好奇如果 Autodesk Scaleform 框架对 actionscript 中的游戏开发有什么优势？与之相比，史达琳？我假设它也使用 Stage3D。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T13:29:48.567

您无法真正比​​较 Scaleform 和 Starling，因为它们都使用不同的运行时。

Scaleform 是一个为游戏创建 GPU 加速用户界面的工具。您可以使用 Adob​​e Flash IDE 创建交互式界面，但一旦完成，界面将由 Scaleform 运行时处理。据我了解，它使用经典的显示列表，但使用 GPU 进行渲染（非常类似于 Flash 运行时中的 renderMode=GPU）。因此，如果您创建 Scaleform 应用程序，它将无法在常规 Flash Player 或 AIR 上运行。

# c# - 当数据和时间在不同的数组中时，以时间范围模式获取数据

> ID：14854289
> 
> 赞同：1
> 
> 时间：2013-02-13T13:05:51.297
> 
> 标签：c#, .net, arrays, linq

我有一个数据数组（double[] data）和一个日期时间列表（List datetimes）。数据数组的每个位置都与日期时间的位置有关。我的意思是：data[i] 是在 datetimes[i] 中收集的。

现在我想过滤以一周模式（7 天，24 小时）收集的数据。所以，我有周模式：

```
class WeekPattern
{

    List<DayPattern> week;

    public WeekPattern(List<DayPattern> _week)
    {
        week = _week;
    }

    public bool isInRange(DateTime time)
    {
        return week.Any(i => i.isInRange(time));
    }

}

class DayPattern
{

    DayOfWeek day;
    List<bool> hours;

    public DayPattern(List<bool> _hours, DayOfWeek _day)
    {
        hours = _hours;
        day = _day;
    }

    public bool isInRange(DateTime time)
    {
        if (time.DayOfWeek != day)
            return false;

        return hours[time.Hour];
    }

} 
```

过滤范围内的日期时间很容易（我已经阅读了 Weekpattern 模式对象）

```
double[] data = { 1, 2, 3, 4}
string[] times = { "23/01/2013 12:00", "23/01/2013 13:00", "23/01/2013 14:00", "23/01/2013 15:00" }
List<DateTime> datetimes = Array.ConvertAll(_times, time => DateTime.ParseExact(time, "dd/MM/yyyy HH:mm:ss", null)).ToList();

Weekpattern pattern... // Weekpattern object
List<DateTime> filter = datetimes.Where(i => pattern.isInRange(i)).ToList(); 
```

但是，我如何获得数据过滤器（双 [] 数据过滤）而不是日期时间过滤的日期时间列表？

*   1 收集于 23/01/2013 12:00
*   2 收集于 23/01/2013 13:00
*   3 收集于 23/01/2013 14:00
*   4 收集于 23/01/2013 15:00

假设我有一个范围“星期三，13:00 - 14:00”。所以我想得到一个带有 2 和 3 的双精度数组：

```
data = { 2, 3 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T13:31:46.063

获得匹配日期列表后，只需为每个匹配项调用日期时间列表上的 IndexOf() 函数，然后使用返回值从 double[] 中提取值。

样本：

```
 var date = new DateTime(2013, 1, 12);
        List<DateTime> dates = new List<DateTime>() { new DateTime(2013, 1, 11), date, new DateTime(2013, 1, 13) };
        double[] values = new double[] { 0, 1, 2 };

        var filtered = dates.Where(x => x == date);
        foreach (var found in filtered)
        {
            Console.Write(values[dates.IndexOf(found)]);
        }

        Console.ReadLine(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T13:32:28.060

您可以尝试这样的事情（Select 方法的重载接受元素索引）：

```
 var filteredData = datetimes.Select((date, i) =>
        {
            if (pattern.isInRange(date))
            {
                return data[i];
            }
            else
            {
                return -1;
            }
        }); 
```

唯一的问题是我需要验证该值是否等于-1。但这对我有用。

编辑：更好的解决方案是使用在 lambda 表达式上使用元素索引的 Where 方法重载：

```
 var filteredData = data.Where((d, i) =>
        {
            return pattern.isInRange(datetimes[i]);
        }); 
```

# api - REST 最佳实践：商店是否也应该返回元数据？

> ID：14854290
> 
> 赞同：1
> 
> 时间：2013-02-13T13:05:54.953
> 
> 标签：api, rest

我正在为个人项目构建我的第一个 REST API（至少在尝试）。

在这个项目中，有一个名为`player`s 的资源，可以在`team`. 根据[REST API 设计规则手册](http://shop.oreilly.com/product/0636920021575.do)，应将资源设置为*文档或存储**，* **并且**应尽可能隔离这些角色。

 *然而，我想将一些元数据附加到`team`资源中，例如`team`创建日期。那么是否`GET /teams/atlanta`可以将这个元数据（使其成为*文档*）与`player`团队中的 s 列表一起返回（使其成为*商店*）。

这是一个好主意吗？如果是，为什么？如果不是，为什么不以及如何更好地解决这个问题？

我知道开发 REST API 没有规则，但有一些好的做法，我想遵守这些做法。也请不要说这真的是我的第一个 REST API，如果有的话，请原谅我的无知。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T09:22:54.497

我建议`GET /teams/atlanta`只返回有关球队的信息，例如您提到的成立日期，然后`GET /teams/atlanta/players`返回该球队的球员名单。当您呈现使用除 GET 之外的 HTTP 方法的 API 时，这些区别变得更加重要。

例如，如果您想将一名球员添加到一个团队中 - 如果您只需 POST 一个球员对象，这将比每次您想添加一个单独的球员时`/teams/atlanta/players`都必须 PUT 整个团队对象要容易得多。`/teams/atlanta`

如果您的 API 只允许检索数据，并且它是针对特定客户端应用程序的，则有一个论点是将所有团队数据组合到一个对象中，以节省客户端必须对数据提出额外请求，但请记住，它不太灵活。

您的应用程序可能希望通过调用显示球队列表，`GET /teams`但您可能不希望列表中每个对象中包含所有球员信息，因为这是相当多的数据，但如果`GET /teams/atlanta`返回球员信息，那么它将不一致也不要将其包含在列表版本中。

我个人倾向于按照我的建议拆分资源，并接受客户可能需要提出一两个额外请求的事实。*

# backbone.js - 骨干js，在控制台中显示未定义

> ID：14854304
> 
> 赞同：0
> 
> 时间：2013-02-13T13:06:27.897
> 
> 标签：backbone.js

我正在编写一个主干应用程序，其中必须使用登录用户的数据获取用户模型。在我的模板中，我需要显示用户信息（用户名、姓名等）。编译模板错误消息后，控制台中记录了“未捕获的 ReferenceError：未定义用户名”。Ajax 请求也成功完成。可能是什么问题？

我正在链接我的 js 文件。

[链接到js文件](https://mega.co.nz/#!N8YGjQIR!fkwQEWQqnFEBXQE-SIEAtS6NXy45qKOaIppyAARhDNA)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T19:48:41.907

即使您的 AJAX 请求成功，它很可能在您执行下划线模板时还没有成功。`render`之后立即调用`fetch`，这是一个异步操作。当这行代码执行时，`model.toJSON()`call 很可能返回一个空对象。

您应该将`fetch`调用移动到视图的`initialize`函数，如下所示：

```
initialize: function() {
    _.bindAll(this);
    this.model.fetch({success:this.render});
} 
```

这将推迟渲染，直到模型成功获取。

# javascript - 以m结尾的小数和整数的正则表达式字符串颜色变化

> ID：14854305
> 
> 赞同：0
> 
> 时间：2013-02-13T13:06:32.313
> 
> 标签：javascript, html, regex

我想用最后的m改变字符串的颜色例如如果有一个字符串=汽车长100m它有0.5m电缆所以匹配后100m和0.5m的颜色应该是“红色”有人可以吗帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T13:09:41.823

匹配这些数字的正则表达式可能是

```
/\d+(\.\d+)?m/ 
```

然后，您可以将该匹配替换为`<span style='color: red;'>$0</span>`您想要的其他内容。

但请注意，在正确排版的文本中，值与其单位之间至少有半个空格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T13:21:25.177

您需要用正则表达式替换字符串。

```
var str = 'the car is 100m long it has 0.5m cable';
var res = str.replace(/\s(\S*m)\s/gi,' <span class="red">$1</span> '); 
```

小提琴：http: [//jsfiddle.net/kWXQ8/1/](http://jsfiddle.net/kWXQ8/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T13:33:33.930

这可能会奏效：

```
var text = 'the car is 100m long it has 0.5m cable';
text = text.replace(/\d+(\.\d+)?m/g, function () {
    return '<span style="color:red;">' + arguments[0] + '</span>';
});
alert(text); 
```

# .htaccess - mod_rewrite：查询字符串在重写时丢失

> ID：14854307
> 
> 赞同：3
> 
> 时间：2013-02-13T13:06:37.123
> 
> 标签：.htaccess, mod-rewrite, url-rewriting

我的 .htaccess 知识有限，需要一些帮助。我需要将所有页面请求重定向到 www.newdomain.com 除了 www.olddomain/page.json 但重定向时查询字符串会被丢弃。我怎样才能保存它？非常感谢！

当前代码：

```
RewriteEngine on
RewriteCond %{REQUEST_URI} !^/page.json
RewriteRule (.*) http://newdomain.com/$1 [R=301,L] 
```

编辑：为了清楚起见，我只需要留在旧域的 page.json 上，假设用户请求 www.olddomain.com/page1.json?session=gVgr30ExUlM 我需要重定向到 www.newdomain.com /page1.json?session=gVgr30ExUlM 但是当它是 www.olddomain.com/page.json?=LKJHGF 我需要它留在那个旧域上并且不会重定向是否可能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T13:10:03.797

使用[`[QSA]`](http://wiki.apache.org/httpd/RewriteFlags/QSA)标志（“查询字符串追加”）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T13:11:58.870

您需要添加[`[QSA]`](http://httpd.apache.org/docs/2.2/rewrite/flags.html#flag_qsa)，并且可以选择添加[`[NE]`](http://httpd.apache.org/docs/2.2/rewrite/flags.html#flag_ne)哪个应该给您：

```
RewriteRule (.*) http://newdomain.com/$1 [QSA,NE,R=301,L] 
```

# android - 带有操作栏但没有标题的活动？

> ID：14854309
> 
> 赞同：2
> 
> 时间：2013-02-13T13:06:44.747
> 
> 标签：android, android-actionbar

如何做到这一点？这看起来很简单，但实际上要以可接受的方式做到这一点并不容易。我试过这个：

1) 在 AndroidManifest 中，我将活动主题设置为 Theme.NoTitleBar。但是，在我的 Activity 中，getActionBar() 方法返回 null => UNUSABLE

2）我通过调用以编程方式在我的活动中隐藏标题：

```
actionbar.setDisplayShowTitleEnabled(false);
actionbar.setDisplayShowHomeEnabled(false); 
```

它有所帮助，但有一点延迟，所以我可以在活动启动后看到标题栏大约四分之一秒，然后它就消失了。看起来真的很蹩脚。

还有其他选择吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T13:11:01.777

将自定义主题应用于您的活动，例如：

```
<style name="TestTheme" parent="android:Theme.Holo.Light">
    <item name="android:actionBarStyle">@style/TestActionBar</item>
</style>

<style name="TestActionBar" parent="android:style/Widget.Holo.Light.ActionBar">
    <item name="android:background">@drawable/actionbar_background</item>
    <item name="android:displayOptions"></item>
</style> 
```

这将显示带有徽标但没有标题的操作栏。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-13T13:10:03.197

你试试下面的代码： -

```
getWindow().requestFeature(Window.FEATURE_ACTION_BAR);
getActionBar().hide();
setContentView(R.layout.ur activityxml); 
```

或者也试试下面一个

```
 requestWindowFeature(Window.FEATURE_NO_TITLE);  

    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,   
            WindowManager.LayoutParams.FLAG_FULLSCREEN);  

    setContentView(R.layout.activityxml); 
```

# android - 您将在 ListFragment 上加载数据的 AsyncTask 放在哪里？

> ID：14854313
> 
> 赞同：-1
> 
> 时间：2013-02-13T13:07:03.517
> 
> 标签：android, xmlhttprequest

因此，正如问题所述，我将希望将数据加载到 ListFragment 的 AsyncTask 放在哪里？

我的 MainActivity 有三个片段。一种是包含类别的 ListFragment。中间是一个片段，其中包含通过从类别中选择检索到的数据。最后一个是另一个 ListFragment，它将显示用户选择的那些。

这三个片段中的每一个都有自己的 xml 文件和自己的 .java 文件。Main Activity cml 文件是我通过片段标签定义三个片段的地方。当我没有将任何数据加载到第一个列表片段时，它工作得很好。但是当我开始通过 http 请求从远程服务器加载数据时，它失败了。我正在使用 AsyncTask 来实现它。

这是java文件

MenuCategory.java

```
package com.thesis.menubook;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;

import org.apache.http.NameValuePair;import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.annotation.TargetApi;
import android.app.ListFragment;
import android.app.ProgressDialog;
import android.os.AsyncTask;
import android.os.Build;
import android.os.Bundle;
import android.util.Log;
import android.widget.ArrayAdapter;

@TargetApi(Build.VERSION_CODES.HONEYCOMB)
public class MenuCategory extends ListFragment {
    JSONParser jsonParser = new JSONParser();
    ArrayList<HashMap<String, String>> categoryList;
    private ProgressDialog pDialog;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        // LOAD CATEGORY ONTO LIST
        new GetCategories().execute();

    }

    class GetCategories extends AsyncTask<String, String, String> {

        /**
         * Before starting background thread Show Progress Dialog
         * */
        @Override
        protected void onPreExecute() {
             super.onPreExecute();
             pDialog = new ProgressDialog(getActivity().getApplicationContext());
             pDialog.setMessage("Loading Categories. Please wait...");
             pDialog.setIndeterminate(false);
             pDialog.setCancelable(false);
             pDialog.show();
        }

        /**
         * Getting product details in background thread
         * */
        protected String doInBackground(String... param) {
            Bundle b = getActivity().getIntent().getExtras();
            String ipaddress = b.getString("IPAddress");

            List<NameValuePair> params = new ArrayList<NameValuePair>();
            Log.d("IP ADDRESS", ipaddress +" ");

            JSONObject json = jsonParser.makeHttpRequest("http://"+ipaddress+"/MenuBook/selectCategories.php", "GET", params);

            // Check your log cat for JSON reponse
            Log.d("All Categories: ", json.toString() + " ");

            try {
                // Checking for SUCCESS TAG
                int success = json.getInt("success");

                if (success == 1) {
                    // products found
                    // Getting Array of Products

                    JSONArray category_list = json.getJSONArray("category_list");

                    // looping through All Products
                    for (int j = 0; j < category_list.length(); j++) {
                        JSONObject c = category_list.getJSONObject(j);

                        // Storing each json item in variable
                        String category = c.getString("category");

                        // creating new HashMap
                        HashMap<String, String> map = new HashMap<String, String>();

                        // adding each child node to HashMap key => value
                        map.put("category", category);
                        int num = 1;
                        Log.d("category #"+num+"", category + "");
                        num++;
                        // adding HashList to ArrayList
                        if(categoryList.contains(map) != true)
                        {
                            categoryList.add(map);
                        }
                    }
                } 
            } catch (JSONException e) {
                e.printStackTrace();
            }

            ArrayAdapter<ArrayList<HashMap<String, String>>> arrayAdapter = new ArrayAdapter<ArrayList<HashMap<String, String>>>(getActivity().
                    getApplicationContext(), R.layout.activity_menu_category);
            arrayAdapter.add(categoryList);
            setListAdapter(arrayAdapter);

            return null;
        }

        /**
         * After completing background task Dismiss the progress dialog
         * **/
        @Override
        protected void onPostExecute(String result) {
            pDialog.dismiss();

        }

    }

} 
```

我这样做正确吗？或者我应该把它放在主要活动上吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T13:20:30.820

因为当前您正试图从 AsyncTask 的 doInBackground 方法访问 UI 元素。您需要将所有与 UI 更新相关的代码从 onPostExecute 中的 doInBackground 移动为：

```
class GetCategories extends AsyncTask<String, String, 
                     ArrayList<HashMap<String, String>>> {
 String ipaddress="";
        @Override
        protected void onPreExecute() {
          //your code here...
           Bundle b = getActivity().getIntent().getExtras();
           ipaddress = b.getString("IPAddress");
        }

        protected ArrayList<HashMap<String, String>> 
                           doInBackground(String... param) {

           // Your code here...

            return categoryList;
        }

        @Override
        protected void onPostExecute(String result) {

              // update ListView here 

             ArrayAdapter<ArrayList<HashMap<String, String>>> arrayAdapter = 
                  new ArrayAdapter<ArrayList<HashMap<String, String>>>
                                (getActivity().
                    getApplicationContext(), R.layout.activity_menu_category);
            arrayAdapter.add(result);
            Your_ListActivity.this.setListAdapter(arrayAdapter);
            pDialog.dismiss();

        }

    } 
```

# c# - Gridview 的值始终为空

> ID：14854315
> 
> 赞同：0
> 
> 时间：2013-02-13T13:07:11.730
> 
> 标签：c#, asp.net, gridview, boundfield

我在网格内有一个带有边界字段的网格视图。当 OnRowUpdating 被触发时，我试图获取边界字段的值。但是当我尝试读取新值时，结果总是空的。

这是我正在使用的指令：

```
protected void MyGridView_OnRowUpdating(object sender, GridViewUpdateEventArgs e)
{
  string id = MyGridView.Rows[e.RowIndex].Cells[3].Text;
  DataBind();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T13:30:57.110

```
TextBox sampleTextBox=((TextBox)MyGridView.Rows[e.RowIndex].FindControl("CostTextBox"));
string data=sampleTextBox.Text; 
```

试试这个，其中 CostTextBox 是您为网格中的控件指定的控件的 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T13:19:18.620

也许我错了，因为我有一段时间没有使用 GridView，但你不应该访问 的`NewValues`集合`e`吗？

这就是 GridView 的美妙之处：它跟踪旧值与新值，并方便地使它们可供您使用，而无需您四处寻找它们。

```
string id = (string) e.NewValues["whatever"]; 
```

# iphone - 缩放 UIScrollView（不仅是它的内容）

> ID：14854321
> 
> 赞同：0
> 
> 时间：2013-02-13T13:07:43.273
> 
> 标签：iphone, ios, objective-c, uiscrollview, uikit

我有`UIScrollview`几个`UIViews`初始化。

如果我缩放它并不能真正缩放我的`scrollview`，但它会`scrollview`以一种非常奇怪的方式缩放我的内容，

```
 _scrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0.0f, 60.0f, self.bounds.size.width, self.bounds.size.height-60.0f)];
 [self addSubview:_scrollView];
 [_scrollView.layer setAffineTransform:CGAffineTransformScale(_scrollView.layer.affineTransform, .5, .5)]; 
```

是否可以扩展`scrollview`其整体而不仅仅是内容。我想像我`UIScrollView`一样缩放它作为图像而不是控件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T13:31:20.233

你可以试试这个：

```
- (CGRect)zoomRectForScale:(float)scale withScrollView:(UIScrollView *)yourScrollView {

    CGRect zoomRect;

    zoomRect.size.height = [yourScrollView frame].size.height / scale;
    zoomRect.size.width  = [yourScrollView frame].size.width / scale;

    zoomRect.origin.x = (yourScrollView.theScrollView.x - zoomRect.size.width  / 2.0);
    zoomRect.origin.y = (yourScrollView.center.y - zoomRect.size.height / 2.0);

    return zoomRect;

    }

    ...

    [yourScrollView setFrame:[self zoomRectForScale:5 withScrollView:yourScrollView]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T14:03:25.187

如果你在 UIScrollView 中添加一个 UIScrollView 并使用委托方法，你可以做到这一点：

```
- (UIView *)viewForZoomingInScrollView:(UIScrollView *)scrollView {
    return innerScroll;
} 
```

并且仅将 mainScroll 连接到委托，然后在 innerScroll 中添加您的子视图

# ios - NSMutableData replaceBytes vs appendData

> ID：14854323
> 
> 赞同：0
> 
> 时间：2013-02-13T13:07:44.073
> 
> 标签：ios, nsdata, nsmutabledata

在性能方面（速度和内存消耗）。你喜欢哪个？

CASE1：附加`NSData`到一些`NSMutableData`.

CASE2：附加`NSData`到一些`NSMutableData`.

CASE3：（这显然是为了replaceBytes）插入`NSData`到一些`NSMutableData`.

# c - 混乱的时间线没有及时发出信号

> ID：14854327
> 
> 赞同：0
> 
> 时间：2013-02-13T13:08:05.137
> 
> 标签：c, clutter

moblin clutter 中的时间线功能用于每隔给定的毫秒进行一次回调。尽管它发出信号的速度要快得多（每 1 毫秒左右）。为什么会这样？

```
ClutterTimeline * clutter_timeline_new(guint msecs); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T08:20:26.847

您不应该使用时间轴来获取已过去 N 毫秒的通知（并执行代码）。ClutterTimeline 是一个绑定到 UI 重绘周期的对象。每次 Clutter 重绘帧时，时间线都会提前，让应用程序代码知道它必须更新其状态。

如果您只需要在间隔后调用您的代码，请`g_timeout_add()`改用；此函数仅与主循环相关联，与重绘循环无关。使用超时时还有其他注意事项需要注意，因此您应该阅读文档：

[http://developer.gnome.org/glib/stable/glib-The-Main-Event-Loop.html#g-timeout-add](http://developer.gnome.org/glib/stable/glib-The-Main-Event-Loop.html#g-timeout-add)

严格来说，如果您使用的是 Moblin，您可能使用的是**非常**旧的 Clutter 版本，因此也可能存在错误；并不是说我知道每毫秒调用一次 ClutterTimeline::new-frame 信号的错误，请注意。

# c - 如何使用 libcurl 检查收到的摘要信息

> ID：14854329
> 
> 赞同：0
> 
> 时间：2013-02-13T13:08:06.617
> 
> 标签：c, curl, libcurl, digest-authentication

我开发了一个函数，它监听给定端口的 http 数据包。

当我收到一个 http 请求时，我的函数返回一个 401 数据包，然后我再次获得一个带有摘要身份验证信息的新 pckaet。

我想知道是否可以使用 LibCurl 检查摘要信息的有效性

因为我在我的程序中使用 libcurl，并且我知道 libcurl 能够创建摘要信息然后发送它。

是否可以调用 libcur api 函数以根据我拥有的用户名和密码计算摘要信息，然后将其与收到的摘要信息进行比较？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T21:23:31.390

我不确定我是否理解这个问题。

如果你告诉 libcurl 使用摘要（使用[CURLOPT_HTTPAUTH](http://curl.haxx.se/libcurl/c/curl_easy_setopt.html#CURLOPTHTTPAUTH)）并且你给它你的[用户名](http://curl.haxx.se/libcurl/c/curl_easy_setopt.html#CURLOPTUSERNAME)和[密码](http://curl.haxx.se/libcurl/c/curl_easy_setopt.html#CURLOPTPASSWORD)，它将解析 401 响应并正确发送第二个请求，因此请求资源，因为 RFC2617 指示应该完成摘要！

然而，在 libcurl 的摘要逻辑的帮助下，*不可能*以某种方式调用 libcurl 的内部摘要函数来“自行”完成工作。

# c# - 静态类不会首先被调用，而是实例类。为什么？

> ID：14854335
> 
> 赞同：0
> 
> 时间：2013-02-13T13:08:33.760
> 
> 标签：c#, .net, static

我知道，静态构造函数总是优先并在任何实例构造函数之前被首先调用。但是考虑一下我有一个实例类和一个静态类的情况。我想知道为什么结果首先来自基类，然后是静态类？我也验证了互换调用，我得到了相应的结果。但是我的想法是错误的吗，无论任何其他实例类如何，都应该首先调用静态类？为什么向我提出这个问题是因为，我在某处看到，当触发包含该类的命名空间时，会自动加载静态类。然后我希望该静态构造函数首先触发。为什么没有发生呢？有人可以以易于理解和简单的方式解释。

```
 public class Base
    {
        public Base() { Console.WriteLine(" I am from normal Base constructor"); }
        static Base() { Console.WriteLine("Hey I am from Static Base"); } 
    }
    public static class Base1
    {
        static Base1() { Console.WriteLine("I am from Static Constructor"); }
        public static void StaticMethod() { Console.WriteLine("I am from Static Method");   }            
    }

    static void Main(string[] args)
    {
        Base b = new Base();
        Base1.StaticMethod();
        Console.Read();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T13:14:00.403

只有一个保证：

> 类的静态构造函数在任何实例构造函数或该类的任何静态成员之前调用。

这个保证没有说明调用静态构造函数的时间。大多数情况下，它会在实际使用静态类时被调用——而不是更早。

*在创建另一个*类的实例之前没有理由执行静态构造函数。

你说：

> 我在某处看到，当触发包含该类的命名空间时，会自动加载静态类。

那是不正确的，我想你可能误解了那里的东西。

MSDN 声明如下：

> 加载包含类的程序或命名空间时，.NET Framework 公共语言运行时 (CLR) 会自动加载静态类。

我明白这怎么可能被误解。这里的“加载一个类”并不意味着它的构造函数被执行。这意味着 CLR 只是加载类型并对其执行一些验证。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T13:15:09.477

根据 MSDN：

> 静态构造函数用于初始化任何静态数据，或执行只需要执行一次的特定操作。在创建第一个实例或引用任何静态成员之前自动调用它。

所以在你的情况下 - 首先你调用 Base 类构造函数，然后你正在访问 Base1 静态方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T13:14:18.920

[在创建类的实例或访问其静态方法之一（ http://msdn.microsoft.com/en-us/library/k9x6w0hc(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/k9x6w0hc(v=vs.80).aspx)）之前调用静态构造函数，所以你得到的结果是正确的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T13:14:53.843

只有在实际需要时才调用静态构造函数。如果需要它们，则保证在其类的普通构造函数之前调用它们。

但是不能保证所有静态构造函数都会在不同类的任何普通构造函数之前被调用。

这样做并避免调用未使用的静态构造函数是不可能的。你可以做一些事情，比如只在程序终止之前使用静态构造函数访问一个类，然后只有在满足某些条件的情况下。显然，代码无法及时确定是否需要调用静态构造函数；因此，在您的代码访问它之前，它无法调用静态构造函数。

查看[Eric Lippert 的关于静态构造函数的博客了解](http://ericlippert.com/2013/02/06/static-constructors-part-one/)更多详细信息！

# html - 如何使用 CSS 渐变创建像这样的“闪亮”效果？

> ID：14854336
> 
> 赞同：4
> 
> 时间：2013-02-13T13:08:35.203
> 
> 标签：html, css, gradient

是否可以仅使用 CSS 创建以下内容？

![在此处输入图像描述](../Images/58ee9974adf368bbbcb82f0c7bd5730e.png)

我已经创建了容器和圆角。[在这里](http://jsfiddle.net/isuru_nan/UxSdU/)拉小提琴。

但我不知道如何获得轻微的闪亮效果。是否可以在 CSS 中做到这一点？如果有怎么办？

以下是我到目前为止编写的代码。

**HTML**

```
<div id="phone-outer">
    <div id="phone-inner">

    </div>
</div> 
```

**CSS**

```
#phone-outer {
    margin-bottom:200px;
    margin:0 auto;  
    width:400px;
    height:500px;
    background-color:#333;
    -webkit-border-bottom-right-radius:25px;
    -webkit-border-bottom-left-radius:25px;
    -moz-border-radius-bottomright:25px;
    -moz-border-radius-bottomleft:25px;
    border-bottom-right-radius:25px;
    border-bottom-left-radius:25px;
}

#phone-inner {
    margin:0 auto;
    background-color:#FFF;
    width:360px;
    height:460px;   
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-13T13:51:46.483

我希望足够接近：

[http://jsfiddle.net/UxSdU/13/](http://jsfiddle.net/UxSdU/13/)

```
#phone-outer {    
    border: 1px solid #FFFFFF;
    border-bottom-left-radius: 25px;
    border-bottom-right-radius: 25px;

    box-shadow: 0 3px 0.7px 1px #777777, 0 -7px rgba(0, 0, 0, 0.4) inset;

    height: 500px;
    width: 400px;
    margin: 0 auto;

    background-image: linear-gradient(right, #111 11%, #333 56%);
    background-image: -o-linear-gradient(right, #111 11%, #333 56%);
    background-image: -moz-linear-gradient(right, #111 11%, #333 56%);
    background-image: -webkit-linear-gradient(right, #111 11%, #333 56%);
    background-image: -ms-linear-gradient(right, #111 11%, #333 56%);
    background-image: gradient(right, #111 11%, #333 56%);
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-13T13:40:53.920

如果您正在寻找微妙的渐变发光，那么应该这样做：

```
background:#222 -webkit-radial-gradient(20% 80%, 60% 60%, rgba(255,255,255,.15), rgba(255,255,255,0)); 
```

这适用于 webkit，您可以根据您的支持表应用 -moz 和 -o 等效项。

您还可以添加多个框阴影来创建黑色阴影，例如：

```
box-shadow:0px 2px .7px 1px #777, inset 0 -7px rgba(0,0,0,.4); 
```

这是一个演示：http: [//jsbin.com/opinaj/4](http://jsbin.com/opinaj/4)

![在此处输入图像描述](../Images/172b2e681fb57379c34b416d3c29f71c.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-13T13:14:11.863

是的，您可以使用 Box-Shadow 属性，

```
 box-shadow:0px 0px 0px 3px #666; 
```

更新的小提琴在这里：

[http://jsfiddle.net/UxSdU/2/](http://jsfiddle.net/UxSdU/2/)

更新：

为此，您可以使用边框：

更新小提琴：

[http://jsfiddle.net/UxSdU/6/](http://jsfiddle.net/UxSdU/6/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T13:11:35.323

玩弄这个[http://www.colorzilla.com/gradient-editor/](http://www.colorzilla.com/gradient-editor/)你也许能想出办法。但是背景图像会容易得多。有什么理由不能只使用该图像？

# xpath - llegalStateException：无法通过 com.gargoylesoftware.htmlunit.TextPage 的 xpath 定位元素

> ID：14854337
> 
> 赞同：1
> 
> 时间：2013-02-13T13:08:40.347
> 
> 标签：xpath, selenium, htmlunit

突然间，我所有的测试都停止了工作。我得到的错误信息是

```
 java.lang.IllegalStateException: Unable to locate element by xpath for com.gargoylesoftware.htmlunit.TextPage@11d1aa6
at org.openqa.selenium.htmlunit.HtmlUnitDriver.findElementByXPath(HtmlUnitDriver.java:796)
at org.openqa.selenium.By$ByXPath.findElement(By.java:344)
at org.openqa.selenium.htmlunit.HtmlUnitDriver$5.call(HtmlUnitDriver.java:1251)
at org.openqa.selenium.htmlunit.HtmlUnitDriver$5.call(HtmlUnitDriver.java:1248)
at org.openqa.selenium.htmlunit.HtmlUnitDriver.implicitlyWaitFor(HtmlUnitDriver.java:991)
at org.openqa.selenium.htmlunit.HtmlUnitDriver.findElement(HtmlUnitDriver.java:1248)
at org.openqa.selenium.htmlunit.HtmlUnitDriver.findElement(HtmlUnitDriver.java:397) 
```

在线指点

```
 WebElement menu = driver.findElement(By.xpath("//a[starts-with(@href,'/index.html')]")); 
```

我的驱动程序初始化

```
public class ExtendedHtmlUnitDriver extends HtmlUnitDriver {

public ExtendedHtmlUnitDriver(boolean enableJavascript) {
    super(BrowserVersion.FIREFOX_10);
    this.setJavascriptEnabled(enableJavascript);
    this.getWebClient().setCssEnabled(false);

} 
```

告诉我出了什么事！

重新启动计算机似乎可以解决此问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T14:16:17.877

`DomNode`是提供该[`getByXPath(String)`](http://htmlunit.sourceforge.net/apidocs/com/gargoylesoftware/htmlunit/html/DomNode.html#getByXPath%28java.lang.String%29)方法的 HtmlUnit 类。如果你得到一个，`TextPage`那么你不应该使用这样的方法，因为 HtmlUnit 无法识别结果页面中的 DOM 树。

PS：我想知道如何重新启动您的计算机可以解决此问题。你能提供更多细节吗？

# python - 在 Scipy 中，curve_fit 如何以及为什么计算参数估计的协方差

> ID：14854339
> 
> 赞同：34
> 
> 时间：2013-02-13T13:08:42.503
> 
> 标签：python, scipy, curve

我一直在使用`scipy.optimize.leastsq`来拟合一些数据。我想获得这些估计值的一些置信区间，因此我查看了`cov_x`输出，但文档非常不清楚这是什么以及如何从中获取我的参数的协方差矩阵。

首先它说它是雅可比矩阵，但在[注释](http://docs.scipy.org/doc/scipy/reference/generated/scipy.optimize.leastsq.html)中它还说“`cov_x`是黑森矩阵的雅可比近似”，因此它实际上不是雅可比矩阵，而是使用雅可比矩阵的某种近似的黑森矩阵。这些陈述中哪一个是正确的？

其次，这句话让我感到困惑：

> 该矩阵必须乘以残差方差才能得到参数估计的协方差 - 请参阅`curve_fit`。

我确实去看看`curve_fit`他们在哪里做的源代码：

```
s_sq = (func(popt, *args)**2).sum()/(len(ydata)-len(p0))
pcov = pcov * s_sq 
```

这对应于乘以`cov_x`，`s_sq`但我在任何参考文献中都找不到这个等式。有人可以解释为什么这个等式是正确的吗？我的直觉告诉我它应该是相反的，因为`cov_x`它应该是一个导数（雅可比或黑森）所以我在想： 我想要的东西`cov_x * covariance(parameters) = sum of errors(residuals)`在哪里。`sigma(parameters)`

我如何将curve_fit正在做的事情与我在例如看到的事情联系起来。维基百科： [http ://en.wikipedia.org/wiki/Propagation_of_uncertainty#Non-linear_combinations](http://en.wikipedia.org/wiki/Propagation_of_uncertainty#Non-linear_combinations)

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-02-13T15:50:40.477

好的，我想我找到了答案。首先是解决方案： cov_x*s_sq 只是您想要的参数的协方差。取对角线元素的 sqrt 会给你标准偏差（但要小心协方差！）。

残差 = 减少卡方 = s_sq = sum[(f(x)-y)^2]/(Nn)，其中 N 是数据点的数量，n 是拟合参数的数量。[减少卡方](http://en.wikipedia.org/wiki/Goodness_of_fit)。

我感到困惑的原因是，由 minimumsq 给出的 cov_x 实际上并不是其他地方所谓的 cov(x)，而是简化的 cov(x) 或分数 cov(x)。它没有出现在任何其他参考资料中的原因是它是一种简单的重新缩放，在数值计算中很有用，但与教科书无关。

关于 Hessian 与 Jacobian，文档措辞不佳。在这两种情况下计算的都是 Hessian 矩阵，这是显而易见的，因为 Jacobian 矩阵至少为零。他们的意思是他们正在使用雅可比矩阵的近似值来找到黑森矩阵。

进一步说明。似乎curve_fit结果实际上并没有考虑到错误的绝对大小，而只是考虑了所提供的sigma的相对大小。这意味着即使错误栏改变了一百万倍，返回的 pcov 也不会改变。这当然是不对的，但似乎是标准做法，即。Matlab 在使用他们的曲线拟合工具箱时做同样的事情。此处描述了正确的程序：[https ://en.wikipedia.org/wiki/Linear_least_squares_(mathematics)#Parameter_errors_and_correlation](https://en.wikipedia.org/wiki/Linear_least_squares_(mathematics)#Parameter_errors_and_correlation)

一旦找到最优值，至少对于线性最小二乘而言，这样做似乎相当简单。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-07-07T03:12:11.127

我在搜索类似问题的过程中找到了这个解决方案，我对 HansHarhoff 的回答只有一点点改进。leastsq 的完整输出提供了一个返回值 infodict，其中包含 infodict['fvec'] = f(x) -y。因此，要计算减少的卡方 =（在上述符号中）

`s_sq = (infodict['fvec']**2).sum()/ (N-n)`

顺便提一句。感谢 HansHarhoff 完成了大部分繁重的工作来解决这个问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-11-14T10:40:26.227

## 数学

首先，我们从线性回归开始。在许多统计问题中，我们假设变量具有一些带有一些未知参数的潜在分布，并且我们估计这些参数。在线性回归中，我们假设因变量 y [i与自变量 x] [ij]具有线性关系：

y [i] = x [i1] β [1] + ... + x [ip] β [p] + σε [i] , i = 1, ..., n。

其中 ε [i]具有独立的标准正态分布，β [j]是 p 个未知参数，σ 也是未知的。我们可以把它写成矩阵形式：

Y = X β + σε，

其中 Y、β 和 ε 是列向量。为了找到最好的 β，我们最小化平方和

S = (Y - X β) ^T (Y - X β)。

我只是写出解决方案，即

β^ = (X ^T X) ^(-1) X ^T Y。

如果我们将 Y 视为特定的观察数据，则 β^ 是在该观察下对 β 的估计。另一方面，如果我们将 Y 视为随机变量，则估计量 β^ 也将成为随机变量。这样我们就可以看出β^的协方差是多少了。

因为 Y 具有多元正态分布且 β^ 是 Y 的线性变换，所以 β^ 也具有多元正态分布。β^ 的协方差矩阵为

Cov(β^) = (X ^T X) ^(-1) X ^T Cov(Y) ((X ^T X) ^(-1) X ^T ) ^T = (X ^T X) ^(-1) σ ²。

但是这里 σ 是未知的，所以我们也需要估计一下。如果我们让

Q = (Y - X β^) ^T (Y - X β^),

可以证明Q / σ ²具有n - p 个自由度的卡方分布（此外，Q 与β^ 无关）。这使得

σ^ ² = Q / (n - p)

^(σ 2)的无偏估计量。所以 Cov(β^) 的最终估计量是

(X ^T X) ^(-1) Q / (n - p)。

## SciPy API

`curve_fit`是最方便的，第二个返回值`pcov`只是对β^的协方差的估计，也就是上面的最终结果(X ^T X) ^(-1) Q / (n - p)。

在`leastsq`中，第二个返回值为`cov_x`(X ^T X) ^(-1)。从 S 的表达式，我们看到 X ^T X 是 S 的 Hessian（准确地说是 Hessian 的一半），这就是为什么文档说`cov_x`是 Hessian 的逆。要获得协方差，您需要乘以`cov_x`Q / (n - p)。

## 非线性回归

在非线性回归中，y [i]非线性地取决于参数：

y [i] = f( **x** [i] , β [1] , ... , β [p] ) + σε [i]。

我们可以计算 f 对 β [j]的偏导数，所以它变成近似线性的。然后计算与线性回归基本相同，只是我们需要迭代地逼近最小值。在实践中，该算法可以是一些更复杂的算法，例如默认的 Levenberg-Marquardt 算法`curve_fit`。

## 更多关于提供 Sigma

本节介绍 中的`sigma`and`absolute_sigma`参数`curve_fit`。对于`curve_fit`当您对 Y 的协方差没有先验知识时的基本用法，您可以忽略此部分。

### 绝对西格玛

在上面的线性回归中，y [i]的方差是 σ 并且是未知的。如果你知道方差。您可以`curve_fit`通过`sigma`参数和设置提供它`absolute_sigma=True`。

假设您提供的`sigma`矩阵是 Σ。IE

Y ~ N(X β, Σ)。

Y 具有均值 X β 和协方差 Σ 的多元正态分布。我们希望最大化 Y 的似然性。从 Y 的概率密度函数，这相当于最小化

S = (Y - X β) ^T Σ ^(-1) (Y - X β)。

解决方案是

β^ = (X ^T Σ ^(-1) X) ^(-1) X ^T Σ ^(-1) Y。

和

Cov(β^) = (X ^T Σ ^(-1) X) ^(-1)。

`curve_fit`上面的 β^ 和 Cov(β^) 是with的返回值`absolute_sigma=True`。

### 相对西格玛

在某些情况下，您不知道 y [i的确切方差，但您知道不同 y] [i]之间的相对关系，例如 y [2的方差是 y] [1]的方差的 4 倍。然后你可以通过`sigma`和设置`absolute_sigma=False`。

这次

Y ~ N(X β, Σσ)

提供已知矩阵 Σ 和未知数 σ。最小化的目标函数与绝对 sigma 相同，因为 σ 是常数，因此估计量 β^ 是相同的。但协方差

Cov(β^) = (X ^T Σ ^(-1) X) ^(-1) σ ² ,

里面有未知的σ。为了估计 σ，让

Q = (Y - X β^) ^T Σ ^(-1) (Y - X β^)。

同样，Q / σ ²具有自由度为 n - p 的卡方分布。

Cov(β^) 的估计是

(X ^T Σ ^(-1) X) ^(-1) Q / (n - p)。

这是`curve_fit`with的第二个返回值`absolute_sigma=False`。

# firefox - 有什么方法可以像在 Chrome 中一样在 Firebug 中列出加载的图像？

> ID：14854340
> 
> 赞同：1
> 
> 时间：2013-02-13T13:08:49.193
> 
> 标签：firefox, firefox-addon, firebug

我正在寻找网页中加载的图像列表，但我可以找到它..

在 Chrome 中，我可以将图像列出到 Inspector > Resources > Frames > Images。

FF 15.0.1 FB 1.10.6

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T13:20:52.300

您可以在 firebug 扩展中执行此操作。在工具栏中选择“网络”而不是“图像”，重新加载页面后，您可以看到所有图像已加载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-29T16:38:08.800

这种方式可用于列出，以及一次保存页面的所有媒体文件

```
Right click -> View Page Info -> Click on "Media" tab 
```

您可以选择一个图像（或所有图像）和“另存为”

# telerik - radNotification 不适用于更新面板

> ID：14854343
> 
> 赞同：0
> 
> 时间：2013-02-13T13:09:00.643
> 
> 标签：telerik

当我试图将页面内容保留在更新面板中时，我正在使用 Telerik 控件和 radNotification 不显示文本。如果我不将内容保留在更新面板中，那么 radnotification 正在工作 请帮助 radnotification 如何与更新面板一起工作

```
<asp:Content ID="Content3" ContentPlaceHolderID="BasicInformation" runat="server">

    <telerik:RadNotification ID="notification" runat="server" Position="Center"
        TitleIcon="~/Images/warn.gif" ContentIcon="~/Images/warn.gif"
        AutoCloseDelay="0"  Width="350" EnableRoundedCorners="true">
    </telerik:RadNotification>

    <fieldset>
        <legend>CFC Order To Supplier</legend>
        <telerik:RadAjaxPanel ID="RadAjaxpanel1" runat="server">

            <table><tr>
                <td></td>
                <td><telerik:RadButton ID="btn_submit" Text="Submit" runat="server" onclick="btn_submit_Click"></telerik:RadButton></td>
            </tr></table>
        </telerik:RadAjaxPanel>
    </fieldset>

</asp:Content> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T14:58:16.633

如果您需要文本，则应使用 Show(newText) 方法（[http://demos.telerik.com/aspnet-ajax/notification/examples/servershowwithnewtext/defaultcs.aspx](http://demos.telerik.com/aspnet-ajax/notification/examples/servershowwithnewtext/defaultcs.aspx)）。这不需要您使用 AJAX 更新控件。此外，通知已经使用回调并将它们包装在 AJAX 请求中，这使得它们的性能获得了一个有争议的点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T13:15:42.470

`RadNotification`在`RadAjaxPanel`. _ 通过这样做，用户文本将像这样显示。

```
<telerik:RadAjaxPanel ID="RadAjaxpanel1" runat="server">
    <telerik:RadNotification ID="notification" runat="server" 
        Position="Center" 
        TitleIcon="~/Images/warn.gif" 
        ContentIcon="~/Images/warn.gif"
        AutoCloseDelay="0" 
        Width="350" 
        EnableRoundedCorners="true">
    </telerik:RadNotification>

    <table>
        <tr>
            <td>
            </td>
            <td>
                <telerik:RadButton ID="btn_submit" runat="server" 
                    Text="Submit" 
                    onclick="btn_submit_Click">
                </telerik:RadButton>
            </td>
        </tr>
    </table>
</telerik:RadAjaxPanel> 
```

# javascript - 如何使用 Node.js Fibers 运行代码

> ID：14854346
> 
> 赞同：3
> 
> 时间：2013-02-13T13:09:07.377
> 
> 标签：javascript, node.js, node-fibers

我有一个关于 Nodejs Fibers 的问题（这对我来说绝对是新的）......我有这个 Nodejs Fibers 教程，[http: //bjouhier.wordpress.com/2012/03/11/fibers-and-threads-in- node-js-what-for/](http://bjouhier.wordpress.com/2012/03/11/fibers-and-threads-in-node-js-what-for/)，这里有一个例子，它说

```
 var fiber = Fiber.current;
    db.connect(function(err, conn) {
    if (err) return fiber.throwInto(err);
       fiber.run(conn);
    });
   // Next line will yield until fiber.throwInto 
   // or fiber.run are called
   var c = Fiber.yield();
   // If fiber.throwInto was called we don't reach this point 
   // because the previous line throws.
   // So we only get here if fiber.run was called and then 
   // c receives the conn value.
   doSomething(c);
   // Problem solved! 
```

现在基于这个示例，我创建了自己的代码版本，如下所示，

```
 var Fiber = require('fibers');

  function sample(callback){
     callback("this callback");
  }

  var fiber = Fiber.current;
  sample(function(string){
     fiber.run(string);
  });
  var string = Fiber.yield();
  console.log(string); 
```

但这给了我一个错误，

```
/home/ubuntu/Tasks/ServerFilteringV1/test.js:28
    fiber.run(string);
      ^
TypeError: Cannot call method 'run' of undefined 
```

我还有另一种情况，它将在 1000 毫秒后运行一个带有回调的函数（我这样做是为了在回调之前测试长时间执行的函数），

```
var Fiber = require('fibers');

function forEach(callback){
   setTimeout(function(){
       callback("this callback");
   },1000);
}

var fiber = Fiber.current;
forEach(function(string){
   fiber.run(string);
});
var string = Fiber.yield();
console.log(string); 
```

这里的代码给了我另一个错误，

```
/home/ubuntu/Tasks/ServerFilteringV1/test.js:30
var string = Fiber.yield();
                    ^
Error: yield() called with no fiber running 
```

那么，yield() 是否应该在 run() 函数执行后等待？关于我的 nodejs 代码中发生了什么的任何想法？并提前感谢...

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-03T17:58:23.147

## 示例 1

纤程是一种轻量级的执行线程。像真正的线程和进程一样，必须为纤程提供一段代码以在运行时执行。您从*bjouhier 获取*的代码不能按原样工作。它旨在在纤维内运行，如下所示：

```
var f = Fiber(function() {
    var fiber = Fiber.current;

    sample(function(str) {
        fiber.run(string);
    });

    var str = Fiber.yield();
    console.log(str);
});

f.run(); 
```

调用`run`纤程，运行纤程代码，作为回调给`Fiber`. 然而，上面的代码也会给出一个错误（说明光纤已经在运行）。在分析执行顺序时，人们可能很容易明白为什么。

1.  **将**变量设置`f`为光纤。
2.  **运行**光纤：
    1.  **设置**变量`fiber`指向当前运行的光纤。
    2.  **调用**函数`sample`。
    3.  **调用**回调。
    4.  **Call** `fiber.run`，当当前光纤已经在运行时，它会给出错误。

这段代码的结构是正确的，但它假设`sample`是一些不立即调用回调的异步函数。让我们用这个替换你的`sample`函数：

```
function sample(callback) {
    setTimeout(function() {
        callback("this callback");
    }, 500);
} 
```

现在，上面的代码不会发出错误，而是`sample`立即返回。光纤内部的执行顺序是：

1.  **设置** `fiber`指向当前运行的光纤。
2.  **Call** `sample`，它返回而不调用回调（还）。
3.  **调用**`Fiber.yield()，它会“暂停”当前的光纤。
4.  500 毫秒后，**调用**回调。
5.  **调用** `fiber.run()`传递“此回调”，恢复光纤。
6.  `Fiber.yield`返回，**将**str 设置为“此回调”。
7.  **将字符串记录**到控制台。

请注意，步骤 4 是在光纤执行之外完成的。

## 示例 2

虽然在第一个示例中没有运行光纤（因此`fiber`未定义**）**，但在第二个示例中，由于相同的原因引发了错误。同样，代码需要在光纤内运行。

* * *

## 产量和运行功能

一个纤程必须协同控制另一个纤程（或主执行线）。将其与线程和进程的抢占性质进行比较。放弃控制权是“让出控制权”的意思*，*在这种情况下由`Fiber.yield()`.

要继续执行（直接在光纤产生的点之后），必须调用`run()`光纤。

将值传入和传出光纤的机制是通过产量和运行的相互作用：

*   给定的参数`run`（在光纤外）由`yield`（在光纤内）返回。
*   给`yield`（光纤内）的参数由`run`（光纤外）返回。

例如，查看[node-fibers 的 github 存储库中](https://github.com/laverdet/node-fibers)的增量生成器。此外，请注意我们的示例 1，给定的回调`sample`实际上是在光纤*之外*运行的，因为它在下一个滴答时运行（即 的异步性质`setTimeout`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T21:38:45.757

正如 Andrew 所解释的，并且正如我的博客文章中所暗示的那样（请参阅示例后面的句子），您必须创建一个`Fiber`并运行它`run()`才能调用`Fiber.yield`.

当您运行单个异步调用时，fiber 的好处并不明显，但请考虑您有一个`f1`调用`f2`该调用的函数的情况`f3`。如果`f3`使用回调调用低级异步函数并且不使用光纤，则必须将其`f3`转换为带有回调的异步函数，然后通过传染您还必须将其`f2`转换`f1`为异步函数。使用纤维，您可以将`f1`,`f2`和保留`f3`为正常功能（没有回调）。您将需要一些`Fiber.yield()`内部魔法`f3`，您还需要`f1`从内部调用 a`Fiber`但您不必担心 and 主体中的`f1`回调`f2`。

因此，当您在高级函数和它们调用的低级异步函数之间有多层代码或复杂的控制流时，纤维真的会发光。

此外，编写纤维的 Marcel 建议您不要`Fiber.yield()`直接在代码中使用，而是使用他的*期货*库。`Fiber.yield`了解纤维是由什么制成的很有趣，但我鼓励您将*期货*库用于实际项目。它还将帮助您并行化您的代码。

# php - PHP：如何从数组中获取每个元素 3 分钟的值？

> ID：14854349
> 
> 赞同：0
> 
> 时间：2013-02-13T13:09:21.093
> 
> 标签：php, arrays

如果相隔 3 分钟之内，如何从数组中获取值？这是我的数组，$array1

```
 Array ( 
[0] => Array ( [id] => 47523 [date] => 12-02-13 14:36:32 ) 
[1] => Array ( [id] => 65454 [date] => 12-02-13 14:36:32 ) 
[2] => Array ( [id] => 47523 [date] => 12-02-13 13:56:48 ) 
[3] => Array ( [id] => 38639 [date] => 12-02-13 13:56:48 ) 
[4] => Array ( [id] => 38639 [date] => 12-02-13 13:08:51 ) 
[5] => Array ( [id] => 38639 [date] => 12-02-13 13:07:43 ) 
[6] => Array ( [id] => 38639 [date] => 12-02-13 13:09:43 ) 
) 
```

我怎样才能得到这个输出

```
Array ( 
[0] => Array ( [id] => 38639 [date] => 12-02-13 13:08:51 ) 
[1] => Array ( [id] => 38639 [date] => 12-02-13 13:07:43 ) 
[2] => Array ( [id] => 38639 [date] => 12-02-13 13:09:43 ) 
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T13:11:48.827

使用[strtotime](http://www.php.net/manual/en/function.strtotime.php)获取时间戳，然后比较时间戳。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T13:36:40.993

不知道你是如何得到你的结果的，但它看起来不对......因为它们可能是 4 个不同的结果。

想象

```
$data = array(
  0 => Array ( 'id' => 47523, 'date' => "12-02-13 14:36:32" ),
  1 => Array ( 'id' => 47523, 'date' => "12-02-13 13:56:48" ),
  2 => Array ( 'id' => 65454, 'date' => "12-02-13 14:36:32" ),
  3 => Array ( 'id' => 38639, 'date' => "12-02-13 13:56:48" ),
  4 => Array ( 'id' => 38639, 'date' => "12-02-13 13:08:51" ),
  5 => Array ( 'id' => 38639, 'date' => "12-02-13 13:07:43" ),
  6 => Array ( 'id' => 38639, 'date' => "12-02-13 13:09:43" ),
); 
```

**例子**

```
var_dump(getDiff($data));
var_dump(getDiff($data,SORT_ASC));
var_dump(getDiff($data,SORT_DESC)); 
```

**SORT_NONE**

```
array (size=3)
  0 => 
    array (size=2)
      'id' => int 47523
      'date' => string '12-02-13 13:56:48' (length=17)
  1 => 
    array (size=2)
      'id' => int 38639
      'date' => string '12-02-13 13:08:51' (length=17)
  2 => 
    array (size=2)
      'id' => int 38639
      'date' => string '12-02-13 13:07:43' (length=17) 
```

**输出 XSORT_ASC**

```
array (size=4)
  0 => 
    array (size=2)
      'id' => int 38639
      'date' => string '12-02-13 13:08:51' (length=17)
  1 => 
    array (size=2)
      'id' => int 38639
      'date' => string '12-02-13 13:09:43' (length=17)
  2 => 
    array (size=2)
      'id' => int 47523
      'date' => string '12-02-13 13:56:48' (length=17)
  3 => 
    array (size=2)
      'id' => int 47523
      'date' => string '12-02-13 14:36:32' (length=17) 
```

**输出 XSORT_DESC**

```
array (size=4)
  0 => 
    array (size=2)
      'id' => int 65454
      'date' => string '12-02-13 14:36:32' (length=17)
  1 => 
    array (size=2)
      'id' => int 47523
      'date' => string '12-02-13 13:56:48' (length=17)
  2 => 
    array (size=2)
      'id' => int 38639
      'date' => string '12-02-13 13:08:51' (length=17)
  3 => 
    array (size=2)
      'id' => int 38639
      'date' => string '12-02-13 13:07:43' (length=17) 
```

**使用的功能**

```
function getDiff(array $data, $sort = 0) {
    switch ($sort) {
        case SORT_ASC :
            usort($data, function ($a, $b) {
                $a = strtotime($a['date']);
                $b = strtotime($b['date']);
                return ($a == $b) ? 0 : (($a < $b) ? -1 : 1);
            });
            break;
        case SORT_DESC :
            usort($data, function ($a, $b) {
                $a = strtotime($a['date']);
                $b = strtotime($b['date']);
                return ($a == $b) ? 0 : (($a < $b) ? 1 :  -1);
            });

            break;
    }

    $it = new CachingIterator(new ArrayIterator($data), CachingIterator::FULL_CACHE);
    $list = array();
    foreach ( $it as $var ) {
        if ($it->hasNext()) {
            $date = strtotime($var['date']);
            $date2 = $it->getInnerIterator()->current();
            $date2 = strtotime($date2['date']);
            $diff = ($sort === SORT_DESC || $sort === 0) ? $date - $date2  :  $date2 - $date  ;
            if ($diff <= (60 * 3)) {
                $list[] = $it->getInnerIterator()->current();
            }
        }
    }
    return $list;
} 
```

**结论**

这取决于元素中日期的位置....

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T13:15:27.777

将日期存储为 time();

然后...

```
function filterArray3minutes($array) {
  foreach($array as $item) {
   foreach($array as $item2) {
     if($item[date] > $item2[date]-3*60 && $item[date] < $item2[date]+3*60 && !isset($array2[$item[id]]) $array2[$item[id]] = $item;
     }
  }
  foreach($array2 as $item) {
     $array3[] = $item;
  }
   return $array3;
} 
```

我认为保持时间是一个很好的做法，因为只有整数例外是输入和输出，它允许更快地使用它。

编辑：现在此功能使项目彼此相隔 3 分钟，并避免重复条目......我认为你不能想要更多。

# git - 如何在 Git GUI 中添加遥控器？

> ID：14854355
> 
> 赞同：-1
> 
> 时间：2013-02-13T13:09:37.603
> 
> 标签：git

我是 git 新手。我有两台计算机连接在网络中。在第一台计算机上，我在“C:\Test\Test1.git”之类的某个位置有远程存储库。现在我想将这个远程存储库添加到我另一台连接到 netowrk 的计算机中。

在添加时我这样做

![在此处输入图像描述](../Images/8ae95467dc3c279f090fdd98b176486d.png)

它被添加。这里没有错误发生。

但是当我尝试从中获取时。我收到这样的错误

**ssh：C：没有与名称关联的地址**

**致命：无法从远程存储库中读取**

现在做什么？？？

好吧，我对此很陌生？？有没有更好的选择？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-13T15:51:35.540

**注意：我的设置是使用 Windows。**

但是当我设置我的共享时，我只在以下位置创建 LAN 网络名称：

`\\computer_name\share_name\`格式

但 git 不会识别这些名称，因此您需要反转斜杠。

`//computer_name/share_name/`格式

因此，如果调用了机器`git_server`并且共享名称是`repos`并且调用了实际的 git 存储库`test.git`（是的，实际的文件夹名称以 .git 结尾）。我会这样克隆这个仓库：

`git clone //git_server/repos/test.git`

这将克隆您的存储库并允许您从中推拉。

**重要的提示！**

`bare`如果它是一个git repo ，你将只能推送。所以当你创建你的仓库时，一定要使用：`git init --bare`

* * *

我做了更多的研究，如果仍然无法正常工作，则 git 支持 Windows`file:///`命名约定

所以

`git clone file:///git_server/repos/test.git`

或者

`git clone file:///\\git_server\repos\test.git`

两者都应该工作

# sql-server-2008 - 在 SqlServer 2008 R2 的 Web 版本中通过 Service Broker 通知实现 SqlCacheDependency

> ID：14854358
> 
> 赞同：1
> 
> 时间：2013-02-13T13:09:43.077
> 
> 标签：sql-server-2008, sql-server-2008-r2, service-broker, sqlcachedependency

感谢您的帮助：

我们计划购买**SQL Server 2008 R2 Web 版**（我们必须这个版本），但是我们也想使用**Service Broker**的功能来实现**SqlCacheDependency - 通知模式**（**非**轮询模式）。

[http://msdn.microsoft.com/en-us/library/cc645993%28v=sql.105%29.aspx](http://msdn.microsoft.com/en-us/library/cc645993%28v=sql.105%29.aspx)据说Web版对Service Broker（消息传递）的支持是：“仅限客户端” - 所以某种简洁版本。

我们的服务器环境是：

*   一个带有两个 Web 应用程序的 Http 服务器
*   具有单个 SQL Server 2008 R2 Web 版实例的数据库服务器。

这个想法是：当新记录添加到数据库表时，sql server 应该通知两个 web 应用程序并重置它们的缓存（所以我们将有两个完整的缓存）。我们不打算创建分布式缓存（MemCache 或 sth）

有什么方法可以结合这两个需求（**SqlCacheDependency 在 SqlServer 2008 R2 的 WebEdition 中通过 Service Broker 通知**）？购买一个模块，或者一些服务器架构技巧。有什么想法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T14:13:50.523

“仅限客户”有点用词不当。这意味着交换服务的两个 Service Broker 服务必须通过至少一个更高版本的版本来路由消息。Express Edition 不能与另一个 Express Edition 交换消息，除非标准（或更高）版本服务器在它们之间路由消息。

虽然这具有教育意义，但对您来说也完全无关紧要，因为查询通知（[SqlCaheDependency 操作方式背后的功能](http://rusanu.com/2006/06/17/the-mysterious-notification/)）**永远不必将消息远程发送到另一个 SQL Server 实例**。都是本地的，所以“仅限客户端”的限制永远不会适用。为了 100% 准确，我应该补充一点*，SqlCacheDependency 使用查询通知的方式*从不需要远程消息传递，但这很麻烦。

我建议您阅读链接的文章，您的帖子对这项技术的工作原理有很多误解。

# android - Android - 打开软键盘时 html 输入失去焦点 (ASP.net)

> ID：14854359
> 
> 赞同：20
> 
> 时间：2013-02-13T13:09:43.183
> 
> 标签：android, asp.net, html, input, webforms

我在 ASP.net 中编写了一个网页登录表单。

使用 Nexus 4、库存 Android 4.2.1、原生 Chrome 浏览器 - 当我单击`<input>`字段时，出现软键盘，然后字段立即失去焦点。我必须`<input>`在键盘已经打开的情况下再次单击该字段才能实际输入文本。

这不会在桌面版 Chrome 中发生。

我在 ASP 用户控件中有以下登录表单：

```
<asp:Login ID="login_form" runat="server" OnLoginError="OnFail" OnLoggedIn="OnLoggedIn" RenderOuterTable="false" RememberMeSet="True">
    <LayoutTemplate>

        <asp:Panel runat="server" DefaultButton="LoginButton" CssClass="members-login">
            <fieldset>
                <label for="UserName">Username</label>
                <asp:TextBox ID="username" placeholder="e.g. joebloggs12" runat="server"></asp:TextBox>

                <label for="Password">Password</label>
                <asp:TextBox ID="password" runat="server" placeholder="e.g. 1234" TextMode="Password"></asp:TextBox>

                <label id="RememberMe">Remember me</label>
                <asp:CheckBox ID="RememberMe" runat="server" />

                <asp:Button CssClass="button" ID="LoginButton" runat="server" CommandName="Login" Text="SUBMIT" />
            </fieldset>
        </asp:Panel>         
    </LayoutTemplate>
</asp:Login> 
```

在浏览器中看起来像这样：

```
<div class="members-login" onkeypress="javascript:return WebForm_FireDefaultButton(event, &#39;ContentPlaceHolderDefault_contentBody_masterContent_login_form_LoginButton&#39;)">

    <fieldset>
        <label for="UserName">Username</label>
        <input name="ctl00$ctl00$ctl00$ContentPlaceHolderDefault$contentBody$masterContent$login_form$username" type="text" id="ContentPlaceHolderDefault_contentBody_masterContent_login_form_username" placeholder="e.g. joebloggs12" />

        <label for="Password">Password</label>
        <input name="ctl00$ctl00$ctl00$ContentPlaceHolderDefault$contentBody$masterContent$login_form$password" type="password" id="ContentPlaceHolderDefault_contentBody_masterContent_login_form_password" placeholder="e.g. 1234" />

        <label id="RememberMe">Remember me</label>
        <input id="ContentPlaceHolderDefault_contentBody_masterContent_login_form_RememberMe" type="checkbox" name="ctl00$ctl00$ctl00$ContentPlaceHolderDefault$contentBody$masterContent$login_form$RememberMe" checked="checked" />

        <input type="submit" name="ctl00$ctl00$ctl00$ContentPlaceHolderDefault$contentBody$masterContent$login_form$LoginButton" value="SUBMIT" id="ContentPlaceHolderDefault_contentBody_masterContent_login_form_LoginButton" class="button" />
    </fieldset>
</div> 
```

我怀疑 ViewState 正在以某种方式窃取焦点。但我试过`event.stopPropogation()`了，但没有帮助。

* * *

**临时修复**

`<input>`现在我已经解决了一个hacky修复，在点击后700毫秒强制焦点回到元素上：

```
jQuery('input').bind('click',function(evt) {
    var focusClosure = (function(inputElem) {return function() {console.log(inputElem.focus());}}($(evt.target)));
    window.setTimeout(focusClosure, 700);
}); 
```

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-02-13T15:31:59.740

我发现这与 ASP.net 或 ViewState 无关。

当 Android 键盘出现时，**浏览器窗口会调整大小**- 触发**调整大小事件**。

我正在运行类似于以下内容的内容：

```
// Move the navigation on resize
$(window).bind('resize', function() {
    if(maxWidth <= 710px) {
        $('.nav').after($('.main-content'));
    }
}); 
```

这移动了 DOM 中的导航。我猜这会重绘 DOM，因此会导致 DOM 中的任何内容失去焦点。我在调整大小时阻止了这种情况发生 - 使它只在初始页面加载时发生。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-11-25T20:41:39.260

我有一个类似的问题，如果输入是焦点，我防止调整大小执行的方法解决了这个问题：

```
$(window).bind('resize', function() {
    if ($("input").is(":focus")) {
        // input is in focus, don't do nothing or input loses focus and keyboard dissapears
    } else {
        // do whatever you should do if resize happens
    }
}); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-10-07T09:22:58.723

我找到了其他解决方案

首先你必须创建一个函数

```
function getFocus(campo){
    $(window).bind('resize', function() {
        if(windowWidth <= 1025) {
            $(campo).focus();
        }
    }); 

} 
```

当您单击输入时，您会调用该函数

```
$('input').click(function(){
    getFocus(this); 
}); 
```

这对我有用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-01T12:03:47.823

**需要 jQuery**

我自己也遇到过这个问题，最终使用了这个解决方案。它可能对其他人有用。就我而言，调整大小使搜索栏失去焦点。

```
// Makes it so that click events are fired on a mobile device.
$('#searchbar').each(function(){
    this.onclick = function() {}
});

// Runs an interval 10 times with a 50ms delay. Forces focus.
$("#searchbar").click(function() {
    var i = 0;
    var interval = window.setInterval(function(){
        if(i > 10) {
            clearInterval(interval);
        }
        $("#searchbar").focus();
        i++;
    }, 50);
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-02-02T10:07:49.280

对于那些在 WordPress 中遇到此问题的人，请将以下代码插入标题中。

```
<script type="text/javascript">
 jQuery(function($) {
 $(window).bind('resize', function() {
 if ($("input").is(":focus")) {
 var focusClosure = (function(inputElem) {return function() 
 {console.log(inputElem.focus());}}($(evt.target)));
window.setTimeout(focusClosure, 700);
 } else {
    // Other resize functions
}
}); 
});
</script> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-04-05T19:59:58.310

我有`$(window).resize(..)`我想保留的自定义代码，我想将此解决方法限制为仅受影响的特定用例（仅限 Android 移动设备，文本输入或 TextArea 焦点），所以我想出了这个：

```
function isAndroidTextInputFocus() {
    var userAgent = navigator.userAgent.toLowerCase();
    var isAndroid = userAgent.indexOf("android") != -1;

    var result = (isAndroid && 
             ($("input[type=text]").is(":focus") || $("textarea").is(":focus"))     
           );

    return result;
} 
```

然后我像这样调整了我的 $(window).resize(..) ：

```
$(window).resize(function(e) {
    if (!isAndroidTextInputFocus()) {       
        // ... Proceed with my custom Window Resize logic
    }
}); 
```

# jquery - 的颜色 使用jquery更改鼠标悬停并单击事件

> ID：14854368
> 
> 赞同：1
> 
> 时间：2013-02-13T13:10:20.730
> 
> 标签：jquery

我想在鼠标悬停时将 li 的颜色更改为红色。并在点击事件中保持相同的颜色。我有以下清单，

```
<html>
  <body>
     <ul>
        <li>list1</li>
        <li>list2
            <ul>
               <li>sublist1</li>
               <li>sublist2</li>
               <li>sublist3</li>
               <li>sublist4</li>
            </ul>
         </li>
         <li>list3</li>
         <li>list4</li>
     </ul>
  </body>
</html>

list1
list2
  sublist1
  sublist2
  sublist3
  sublist4
list3
list4 
```

如果我单击 list1，它的颜色应该变成红色，同时如果我将鼠标悬停在另一个列表上，它会显示为红色。它的默认颜色是黑色。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T13:12:10.467

```
// CSS: Create the highlight accessible with two classnames.

.highlight, .highlight_stay{
    color:red;
} 
```

jQuery

```
$(function(){
     $('li').hover(function(){
          $(this).addClass('highlight');
      }, function(){
          $(this).removeClass('highlight');
      });

      $('li').click(function(){
           $(this).addClass('highlight_stay');
      });
}); 
```

要在单击不同时删除单击颜色，`li`请将最后一个函数更改为：

```
$('li').click(function(){
     $(li).removeClass('highlight_stay');
     $(this).addClass('highlight_stay');
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-13T13:14:54.823

为此使用 css：

```
li:hover {
    color:red;
} 
```

*不建议这样做：*

```
li:focus {
    color: red;
} 
```

**jQuery**

```
$('li').click(function(){
    $(this).css('color','red');
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-13T13:43:03.273

鼠标悬停 - css

```
li:hover {
color: red;
} 
```

如果你希望它是绿色的，只有你点击 - css

```
li:active {
    color: green;
} 
```

如果您希望它改变颜色并保持该颜色 - JQuery

```
$("li").click(function (){
    $(this).css("color","green")
}); 
```

但是您可能会考虑继续阅读，`$("blah").addClass()`因为它有助于更​​快地加载 DOM。随着项目变大，在 JQuery 上“直接”使用 css`$(this).css("color","green")`会减慢速度

# r - 时钟中的时间显示与 r 中的 xy 散点图

> ID：14854370
> 
> 赞同：7
> 
> 时间：2013-02-13T13:10:23.970
> 
> 标签：r, plot, ggplot2

我想创建以下类型的情节。但不知道是否有任何包已经存在，因为我找不到。数据：

```
myd <- data.frame (X = 1:5, Y = c(0.8, 0.6, 0.7, 0.75,  0.1), 
     clockd = c(12.05, 12.25, 12.45, 1.30, 2.1)) 
```

时钟是时间 12.05 是 12 点过去的分钟。我不知道在 R 中输入时间的合适单位。

```
plot (myd$X, myd$Y) 
```

**编辑：** 红色和绿色箭头代表时钟中时钟臂的小时和分钟位置。 ![在此处输入图像描述](../Images/bad8f69d2ad26fef62f2e90c4858fbae.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-13T14:34:52.663

```
clockplot<-function(x, y, h, m, r, border="black", col="lightblue", 
                    col.hour="darkblue", col.min="red"){
#x and y are the coordinates of the clock
#h and m the hour (base 12) and minutes
# r the radius of the clock
    t<-seq(0,2*pi,by=0.01)
    x.c<-r*cos(t)+x
    y.c<-r*sin(t)+y

    t.h<-pi/2 - 2*pi*(h-m/60)/12
    x.h<-0.5*r*cos(t.h)+x
    y.h<-0.5*r*sin(t.h)+y

    t.m<-pi/2 - 2*pi*m/60
    x.m<-r*cos(t.m)+x
    y.m<-r*sin(t.m)+y

    polygon(x.c,y.c,col=col, border=border)
    segments(x,y,x.h,y.h,col=col.hour)
    segments(x,y,x.m,y.m,col=col.min)
    }

myd <- data.frame (X = 1:5, Y = c(0.8, 0.6, 0.7, 0.75,  0.1), 
                   clockd = c(12.05, 12.25, 12.45, 1.30, 2.1))
myd$hour<-myd$clockd%/%1
myd$min<-myd$clockd%%1 *100

plot(myd$X, myd$Y, type="l", asp=1)
apply(myd,1,function(x)clockplot(x[1],x[2],x[4],x[5], r=0.25)) 
```

![在此处输入图像描述](../Images/5437fd0bbb86fad936d5d39dcc34a9d4.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-14T15:58:07.010

我在这里使用@GregSnow 的建议和包中的`my.symbols`功能`TeachingDemo`。这样，您可以使用一小段（ish）代码来完成，但您可以对图形参数进行相当大的控制，例如时钟圈的大小和填充、箭头的外观、自定义绘图的方式等。用于计算位置我修改了@agstudy 代码，以便正确提取分钟数。

```
myd <- data.frame (X = 1:5, Y = c(0.8, 0.6, 0.7, 0.75,  0.1), 
                   clockd = c(12.05, 12.25, 12.45, 1.30, 2.1))
hour <- round(myd$clockd)#takes hours by ignoring decimals
minute <- 100*(myd$clockd - trunc(myd$clockd,2))#takes decimals
#for getting the angle I'm subtracting from pi/2
#thats because pi/2 orients the arrow into 0 degree position, pointing up 
hourAngle <- pi/2 - (hour/12*2*pi)
minuteAngle <- pi/2 - (minute/60*2*pi)
#now all the plotting
plot(myd$X, myd$Y, type="l", xaxt="n", xlab="", ylab="", 
     xlim=c(0.5,5.5), ylim=c(0,1), col="gray")#standard plot, no x axis
axis(1, at=myd$X, labels=myd$X)#custom x-axis
require(TeachingDemo)
my.symbols(myd$X, myd$Y, ms.arrows, angle=hourAngle, add=T, 
           col="blue", symb.plots=TRUE, adj=0)
my.symbols(myd$X, myd$Y, ms.arrows, angle=minuteAngle, add=T, 
           col="red", symb.plots=TRUE, adj=0)
my.symbols(myd$X, myd$Y, ms.polygon, n=250, add=T, 
           r=1.1, col="gray") 
```

![在此处输入图像描述](../Images/06179ba0fd0f178529bd29d728706f2f.png)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-13T14:33:17.643

![在此处输入图像描述](../Images/71c09d40572aa00811e012bb357cd73f.png)

提供您的数据：

```
read.table(text = 'col1 col2
           0012 0001245',head=T,colClasses=c('character','numeric'))

myd <- data.frame (X = 1:5, 
                   Y = c(0.8, 0.6, 0.7, 0.75,  0.1), 
                   clockd = c(12.05, 12.25, 12.45, 1.30, 2.1)) 
```

使用 lattice+grid 我们可以这样做：

```
library(lattice)
library(grid)
xyplot(Y~X,data=myd,
       panel=function(x,y,...)
       {

         panel.fill(col='yellow')
         panel.lines(x,y)

         h_min <- do.call(rbind,strsplit(as.character(myd$clockd),'[.]'))
         hours <- as.numeric(h_min[,1])
         minutes <- as.numeric(h_min[,2])
         lapply(seq_along(x),
                         function(i)drawClock(x[i],y[i],hour = hours[i], minute = minutes[i]))

       }) 
```

[从这里](https://stackoverflow.com/questions/11877379/how-to-draw-clock-in-r)采用 drawClock 并根据这个问题的需要进行转换：

```
drawClock <- function(x0,y0,hour, minute) {
  t <- seq(0, 2*pi, length=13)[-13]
  x <- cos(t)
  y <- sin(t)
  # Circle with ticks
  grid.circle(x=x0, y=y0, default="native", 
              r=unit(0.4,'in'),gp=gpar(fill='blue',alpha=0.5))
  #         grid.segments(x, y, x*.9, y*.9, default="native")
  # Hour hand
  hourAngle <- pi/2 - (hour + minute/60)/12*2*pi
  grid.segments(x0, y0, 
                x0+.06*cos(hourAngle), y0+.06*sin(hourAngle), 
                default="native", gp=gpar(lex=4))
  # Minute hand
  minuteAngle <- pi/2 - (minute)/60*2*pi
  grid.segments(x0, y0, 
                x0+.08*cos(minuteAngle), y0+.08*sin(minuteAngle), 
                default="native", gp=gpar(lex=2))    
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-14T05:48:15.657

查看`my.symbols`TeachingDemos 包中的函数以获取有助于创建此类绘图的工具。

# eclipse - Eclipse 团队提供者插件

> ID：14854376
> 
> 赞同：0
> 
> 时间：2013-02-13T13:10:57.843
> 
> 标签：eclipse, eclipse-plugin, eclipse-rcp

Eclipse 3.7 有大量关于 Eclipse 的文档和书籍，但我很难找到一种“导航”文档大海捞针的方法。

1.  假设我对 Eclipse 插件有一些基本了解，如何快速浏览到插件文档？例如，我尝试 了[http://help.eclipse.org/juno/index.jsp](http://help.eclipse.org/juno/index.jsp)并尝试搜索“Eclipse Team Provider Plugin”或“org.eclipse.team.core”，但找不到任何东西。
2.  给定一个 Eclipse 插件，我如何知道该插件的作用（动作是什么）以及它的主页（如果可能）
3.  我在 3.7 和我的 Action 委托中编写了一个 Eclipse 插件，当用户选择一个菜单选项时我想调用另一个 Action Delegate。更具体地说，我有一个动作委托，我想调用相当于 Team -> Refresh 的动作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T14:38:53.693

1) 如果插件是由 Eclipse 基金会之外的人编写的，比如 Subclipse，则插件的作者负责记录插件。大多数时候，文档解释的是插件的用法，而不是技术架构。

如果插件是由 Eclipse 基金会编写的，那么文档可能会或可能不会描述 Eclipse 的特定功能。该文档通常不会描述 Eclipse 的技术架构。

对于 Eclipse 技术信息，您最常访问 Eclipse 帮助中的 Platform Plug-in Developer Guide -> Reference -> API Reference。

2) 如果插件是由 Eclipse 基金会以外的人编写的，Google 应该会带您进入主页。如果插件是由 Eclipse 基金会编写的，那么您必须搜索 Eclipse 网站。

3) 这是 CleanDialog 的源代码。您必须在代码中执行类似于 buttonPressed 方法的操作。

```
/*******************************************************************************
 * Copyright (c) 2004, 2012 IBM Corporation and others.
 * All rights reserved. This program and the accompanying materials
 * are made available under the terms of the Eclipse Public License v1.0
 * which accompanies this distribution, and is available at
 * http://www.eclipse.org/legal/epl-v10.html
 *
 * Contributors:
 *      IBM - Initial API and implementation
 *      Remy Chi Jian Suen <remy.suen@gmail.com>
 *          - Fix for Bug 155436 [IDE] Project>Clean dialog should not use a question-mark icon
 *      Mark Melvin <mark_melvin@amis.com>
 *******************************************************************************/
package org.eclipse.ui.internal.ide.dialogs;

import java.util.Arrays;
import java.util.List;

import org.eclipse.core.resources.IProject;
import org.eclipse.core.resources.IncrementalProjectBuilder;
import org.eclipse.core.resources.ResourcesPlugin;
import org.eclipse.core.resources.WorkspaceJob;
import org.eclipse.core.runtime.CoreException;
import org.eclipse.core.runtime.IProgressMonitor;
import org.eclipse.core.runtime.IStatus;
import org.eclipse.core.runtime.Status;
import org.eclipse.core.runtime.SubProgressMonitor;
import org.eclipse.jface.dialogs.IDialogConstants;
import org.eclipse.jface.dialogs.IDialogSettings;
import org.eclipse.jface.dialogs.MessageDialog;
import org.eclipse.jface.viewers.CheckStateChangedEvent;
import org.eclipse.jface.viewers.CheckboxTableViewer;
import org.eclipse.jface.viewers.ICheckStateListener;
import org.eclipse.jface.viewers.Viewer;
import org.eclipse.jface.viewers.ViewerFilter;
import org.eclipse.jface.window.IShellProvider;
import org.eclipse.swt.SWT;
import org.eclipse.swt.events.SelectionAdapter;
import org.eclipse.swt.events.SelectionEvent;
import org.eclipse.swt.events.SelectionListener;
import org.eclipse.swt.graphics.Point;
import org.eclipse.swt.layout.GridData;
import org.eclipse.swt.layout.GridLayout;
import org.eclipse.swt.widgets.Button;
import org.eclipse.swt.widgets.Composite;
import org.eclipse.swt.widgets.Control;
import org.eclipse.swt.widgets.Shell;
import org.eclipse.ui.IWorkbenchWindow;
import org.eclipse.ui.actions.BuildAction;
import org.eclipse.ui.actions.GlobalBuildAction;
import org.eclipse.ui.internal.ide.IDEWorkbenchMessages;
import org.eclipse.ui.internal.ide.IDEWorkbenchPlugin;
import org.eclipse.ui.internal.ide.actions.BuildUtilities;
import org.eclipse.ui.model.WorkbenchContentProvider;
import org.eclipse.ui.model.WorkbenchLabelProvider;
import org.eclipse.ui.progress.IProgressConstants2;

/**
 * Dialog that asks the user to confirm a clean operation, and to configure
 * settings in relation to the clean. Clicking ok in the dialog will perform the
 * clean operation.
 * 
 * @since 3.0
 */
public class CleanDialog extends MessageDialog {
    private class ProjectSubsetBuildAction extends BuildAction {
        private IProject[]  projectsToBuild = new IProject[0];

        public ProjectSubsetBuildAction(IShellProvider shellProvider, int type,
                IProject[] projects) {
            super(shellProvider, type);
            this.projectsToBuild = projects;
        }

        protected List getSelectedResources() {
            return Arrays.asList(this.projectsToBuild);
        }
    }

    private static final String DIALOG_SETTINGS_SECTION = "CleanDialogSettings";    //$NON-NLS-1$
    private static final String DIALOG_ORIGIN_X         = "DIALOG_X_ORIGIN";        //$NON-NLS-1$
    private static final String DIALOG_ORIGIN_Y         = "DIALOG_Y_ORIGIN";        //$NON-NLS-1$
    private static final String DIALOG_WIDTH            = "DIALOG_WIDTH";           //$NON-NLS-1$
    private static final String DIALOG_HEIGHT           = "DIALOG_HEIGHT";          //$NON-NLS-1$
    private static final String TOGGLE_SELECTED         = "TOGGLE_SELECTED";        //$NON-NLS-1$
    private static final String BUILD_NOW               = "BUILD_NOW";              //$NON-NLS-1$
    private static final String BUILD_ALL               = "BUILD_ALL";              //$NON-NLS-1$

    private Button              allButton, selectedButton, buildNowButton,
            globalBuildButton, projectBuildButton;

    private CheckboxTableViewer projectNames;

    private Object[]            selection;

    private IWorkbenchWindow    window;

    /**
     * Gets the text of the clean dialog, depending on whether the workspace is
     * currently in autobuild mode.
     * 
     * @return String the question the user will be asked.
     */
    private static String getQuestion() {
        boolean autoBuilding = ResourcesPlugin.getWorkspace().isAutoBuilding();
        if (autoBuilding) {
            return IDEWorkbenchMessages.CleanDialog_buildCleanAuto;
        }
        return IDEWorkbenchMessages.CleanDialog_buildCleanManual;
    }

    /**
     * Creates a new clean dialog.
     * 
     * @param window
     *            the window to create it in
     * @param selection
     *            the currently selected projects (may be empty)
     */
    public CleanDialog(IWorkbenchWindow window, IProject[] selection) {
        super(window.getShell(), IDEWorkbenchMessages.CleanDialog_title, null,
                getQuestion(), NONE, new String[] { IDialogConstants.OK_LABEL,
                        IDialogConstants.CANCEL_LABEL }, 0);
        this.window = window;
        this.selection = selection;
        if (this.selection == null) {
            this.selection = new Object[0];
        }
    }

    /*
     * (non-Javadoc)
     * 
     * @see org.eclipse.jface.dialogs.Dialog#buttonPressed(int)
     */
    protected void buttonPressed(int buttonId) {
        final boolean cleanAll = allButton.getSelection();
        final boolean buildAll = buildNowButton != null
                && buildNowButton.getSelection();
        final boolean globalBuild = globalBuildButton != null
                && globalBuildButton.getSelection();
        super.buttonPressed(buttonId);
        if (buttonId != IDialogConstants.OK_ID) {
            return;
        }
        // save all dirty editors
        BuildUtilities.saveEditors(null);
        // batching changes ensures that autobuild runs after cleaning
        WorkspaceJob cleanJob = new WorkspaceJob(
                cleanAll ? IDEWorkbenchMessages.CleanDialog_cleanAllTaskName
                        : IDEWorkbenchMessages.CleanDialog_cleanSelectedTaskName) {
            public boolean belongsTo(Object family) {
                return ResourcesPlugin.FAMILY_MANUAL_BUILD.equals(family);
            }

            public IStatus runInWorkspace(IProgressMonitor monitor)
                    throws CoreException {
                doClean(cleanAll, monitor);
                // see if a build was requested
                if (buildAll) {
                    // Only build what was requested
                    if (globalBuild) {
                        // start an immediate workspace build
                        GlobalBuildAction build = new GlobalBuildAction(window,
                                IncrementalProjectBuilder.INCREMENTAL_BUILD);
                        build.doBuild();
                    } else {
                        // Only build what was cleaned
                        IProject[] projects = new IProject[selection.length];
                        for (int i = 0; i < selection.length; i++) {
                            projects[i] = (IProject) selection[i];
                        }

                        ProjectSubsetBuildAction projectBuild = new ProjectSubsetBuildAction(
                                window,
                                IncrementalProjectBuilder.INCREMENTAL_BUILD,
                                projects);
                        projectBuild.runInBackground(ResourcesPlugin
                                .getWorkspace().getRuleFactory().buildRule());
                    }
                }
                return Status.OK_STATUS;
            }
        };
        cleanJob.setRule(ResourcesPlugin.getWorkspace().getRuleFactory()
                .buildRule());
        cleanJob.setUser(true);
        cleanJob.setProperty(IProgressConstants2.SHOW_IN_TASKBAR_ICON_PROPERTY,
                Boolean.TRUE);
        cleanJob.schedule();
    }

    /*
     * (non-Javadoc)
     * 
     * @see
     * org.eclipse.jface.dialogs.MessageDialog#createCustomArea(org.eclipse.
     * swt.widgets.Composite)
     */
    protected Control createCustomArea(Composite parent) {
        Composite area = new Composite(parent, SWT.NONE);
        GridLayout layout = new GridLayout();
        layout.marginWidth = layout.marginHeight = 0;
        layout.numColumns = 2;
        layout.makeColumnsEqualWidth = true;
        area.setLayout(layout);
        area.setLayoutData(new GridData(GridData.FILL_BOTH));
        SelectionListener updateEnablement = new SelectionAdapter() {
            public void widgetSelected(SelectionEvent e) {
                updateEnablement();
            }
        };

        IDialogSettings settings = getDialogSettings(DIALOG_SETTINGS_SECTION);
        boolean selectSelectedButton = settings.getBoolean(TOGGLE_SELECTED);
        // first row
        allButton = new Button(area, SWT.RADIO);
        allButton.setText(IDEWorkbenchMessages.CleanDialog_cleanAllButton);
        allButton.setSelection(!selectSelectedButton);
        allButton.addSelectionListener(updateEnablement);
        selectedButton = new Button(area, SWT.RADIO);
        selectedButton
                .setText(IDEWorkbenchMessages.CleanDialog_cleanSelectedButton);
        selectedButton.setSelection(selectSelectedButton);
        selectedButton.addSelectionListener(updateEnablement);

        // second row
        createProjectSelectionTable(area);

        // third row
        // only prompt for immediate build if autobuild is off
        if (!ResourcesPlugin.getWorkspace().isAutoBuilding()) {
            buildNowButton = new Button(parent, SWT.CHECK);
            buildNowButton
                    .setText(IDEWorkbenchMessages.CleanDialog_buildNowButton);
            String buildNow = settings.get(BUILD_NOW);
            buildNowButton.setSelection(buildNow == null
                    || Boolean.valueOf(buildNow).booleanValue());
            buildNowButton.setLayoutData(new GridData(
                    GridData.HORIZONTAL_ALIGN_BEGINNING));
            buildNowButton.addSelectionListener(updateEnablement);

            globalBuildButton = new Button(parent, SWT.RADIO);
            globalBuildButton
                    .setText(IDEWorkbenchMessages.CleanDialog_globalBuildButton);
            String buildAll = settings.get(BUILD_ALL);
            globalBuildButton.setSelection(buildAll == null
                    || Boolean.valueOf(buildAll).booleanValue());
            GridData data = new GridData(GridData.HORIZONTAL_ALIGN_BEGINNING);
            data.horizontalIndent = 10;
            globalBuildButton.setLayoutData(data);
            globalBuildButton.setEnabled(buildNowButton.getSelection());

            projectBuildButton = new Button(parent, SWT.RADIO);
            projectBuildButton
                    .setText(IDEWorkbenchMessages.CleanDialog_buildSelectedProjectsButton);
            projectBuildButton.setSelection(!globalBuildButton.getSelection());
            data = new GridData(GridData.HORIZONTAL_ALIGN_BEGINNING);
            data.horizontalIndent = 10;
            projectBuildButton.setLayoutData(data);
            projectBuildButton.setEnabled(buildNowButton.getSelection());

            SelectionListener buildRadioSelected = new SelectionAdapter() {
                public void widgetSelected(SelectionEvent e) {
                    updateBuildRadioEnablement();
                }
            };
            globalBuildButton.addSelectionListener(buildRadioSelected);
            projectBuildButton.addSelectionListener(buildRadioSelected);
        }

        return area;
    }

    /*
     * (non-Javadoc)
     * 
     * @see
     * org.eclipse.jface.dialogs.IconAndMessageDialog#createContents(org.eclipse
     * .swt.widgets.Composite)
     */
    protected Control createContents(Composite parent) {
        Control contents = super.createContents(parent);
        updateEnablement();
        return contents;
    }

    private void createProjectSelectionTable(Composite radioGroup) {
        projectNames = CheckboxTableViewer.newCheckList(radioGroup, SWT.BORDER);
        projectNames.setContentProvider(new WorkbenchContentProvider());
        projectNames.setLabelProvider(new WorkbenchLabelProvider());
        projectNames.setComparator(new ResourceComparator(
                ResourceComparator.NAME));
        projectNames.addFilter(new ViewerFilter() {
            private final IProject[]    projectHolder   = new IProject[1];

            public boolean select(Viewer viewer, Object parentElement,
                    Object element) {
                if (!(element instanceof IProject)) {
                    return false;
                }
                IProject project = (IProject) element;
                if (!project.isAccessible()) {
                    return false;
                }
                projectHolder[0] = project;
                return BuildUtilities.isEnabled(projectHolder,
                        IncrementalProjectBuilder.CLEAN_BUILD);
            }
        });
        projectNames.setInput(ResourcesPlugin.getWorkspace().getRoot());
        GridData data = new GridData(GridData.FILL_BOTH);
        data.horizontalSpan = 2;
        data.widthHint = IDialogConstants.ENTRY_FIELD_WIDTH;
        data.heightHint = IDialogConstants.ENTRY_FIELD_WIDTH;
        projectNames.getTable().setLayoutData(data);
        projectNames.setCheckedElements(selection);
        // table is disabled to start because all button is selected
        projectNames.getTable().setEnabled(selectedButton.getSelection());
        projectNames.addCheckStateListener(new ICheckStateListener() {
            public void checkStateChanged(CheckStateChangedEvent event) {
                selection = projectNames.getCheckedElements();
                updateEnablement();
            }
        });
    }

    /**
     * Performs the actual clean operation.
     * 
     * @param cleanAll
     *            if <code>true</true> clean all projects
     * @param monitor
     *            The monitor that the build will report to
     * @throws CoreException
     *             thrown if there is a problem from the core builder.
     */
    protected void doClean(boolean cleanAll, IProgressMonitor monitor)
            throws CoreException {
        if (cleanAll) {
            ResourcesPlugin.getWorkspace().build(
                    IncrementalProjectBuilder.CLEAN_BUILD, monitor);
        } else {
            try {
                monitor.beginTask(
                        IDEWorkbenchMessages.CleanDialog_cleanSelectedTaskName,
                        selection.length);
                for (int i = 0; i < selection.length; i++) {
                    ((IProject) selection[i]).build(
                            IncrementalProjectBuilder.CLEAN_BUILD,
                            new SubProgressMonitor(monitor, 1));
                }
            } finally {
                monitor.done();
            }
        }
    }

    /**
     * Updates the enablement of the dialog's ok button based on the current
     * choices in the dialog.
     */
    protected void updateEnablement() {
        projectNames.getTable().setEnabled(selectedButton.getSelection());
        boolean enabled = allButton.getSelection() || selection.length > 0;
        getButton(OK).setEnabled(enabled);
        if (globalBuildButton != null) {
            globalBuildButton.setEnabled(buildNowButton.getSelection());
        }
        if (projectBuildButton != null) {
            projectBuildButton.setEnabled(buildNowButton.getSelection());
        }
    }

    /**
     * Updates the enablement of the dialog's build selection radio buttons.
     */
    protected void updateBuildRadioEnablement() {
        projectBuildButton.setSelection(!globalBuildButton.getSelection());
    }

    /*
     * (non-Javadoc)
     * 
     * @see org.eclipse.jface.window.Window#close()
     */
    public boolean close() {
        persistDialogSettings(getShell(), DIALOG_SETTINGS_SECTION);
        return super.close();
    }

    /*
     * (non-Javadoc)
     * 
     * @see
     * org.eclipse.jface.window.Window#getInitialLocation(org.eclipse.swt.graphics
     * .Point)
     */
    protected Point getInitialLocation(Point initialSize) {
        Point p = getInitialLocation(DIALOG_SETTINGS_SECTION);
        return p != null ? p : super.getInitialLocation(initialSize);
    }

    /*
     * (non-Javadoc)
     * 
     * @see org.eclipse.jface.window.Window#getInitialSize()
     */
    protected Point getInitialSize() {
        Point p = super.getInitialSize();
        return getInitialSize(DIALOG_SETTINGS_SECTION, p);
    }

    /**
     * Returns the initial location which is persisted in the IDE Plugin dialog
     * settings under the provided dialog setttings section name. If location is
     * not persisted in the settings, the <code>null</code> is returned.
     * 
     * @param dialogSettingsSectionName
     *            The name of the dialog settings section
     * @return The initial location or <code>null</code>
     */
    public Point getInitialLocation(String dialogSettingsSectionName) {
        IDialogSettings settings = getDialogSettings(dialogSettingsSectionName);
        try {
            int x = settings.getInt(DIALOG_ORIGIN_X);
            int y = settings.getInt(DIALOG_ORIGIN_Y);
            return new Point(x, y);
        } catch (NumberFormatException e) {
        }
        return null;
    }

    private IDialogSettings getDialogSettings(String dialogSettingsSectionName) {
        IDialogSettings settings = IDEWorkbenchPlugin.getDefault()
                .getDialogSettings();
        IDialogSettings section = settings
                .getSection(dialogSettingsSectionName);
        if (section == null) {
            section = settings.addNewSection(dialogSettingsSectionName);
        }
        return section;
    }

    /**
     * Persists the location and dimensions of the shell and other user settings
     * in the plugin's dialog settings under the provided dialog settings
     * section name
     * 
     * @param shell
     *            The shell whose geometry is to be stored
     * @param dialogSettingsSectionName
     *            The name of the dialog settings section
     */
    private void persistDialogSettings(Shell shell,
            String dialogSettingsSectionName) {
        Point shellLocation = shell.getLocation();
        Point shellSize = shell.getSize();
        IDialogSettings settings = getDialogSettings(dialogSettingsSectionName);
        settings.put(DIALOG_ORIGIN_X, shellLocation.x);
        settings.put(DIALOG_ORIGIN_Y, shellLocation.y);
        settings.put(DIALOG_WIDTH, shellSize.x);
        settings.put(DIALOG_HEIGHT, shellSize.y);

        if (buildNowButton != null) {
            settings.put(BUILD_NOW, buildNowButton.getSelection());
        }
        if (globalBuildButton != null) {
            settings.put(BUILD_ALL, globalBuildButton.getSelection());
        }
        settings.put(TOGGLE_SELECTED, selectedButton.getSelection());
    }

    /**
     * Returns the initial size which is the larger of the
     * <code>initialSize</code> or the size persisted in the IDE UI Plugin
     * dialog settings under the provided dialog setttings section name. If no
     * size is persisted in the settings, the <code>initialSize</code> is
     * returned.
     * 
     * @param initialSize
     *            The initialSize to compare against
     * @param dialogSettingsSectionName
     *            The name of the dialog settings section
     * @return the initial size
     */
    private Point getInitialSize(String dialogSettingsSectionName,
            Point initialSize) {
        IDialogSettings settings = getDialogSettings(dialogSettingsSectionName);
        try {
            int x, y;
            x = settings.getInt(DIALOG_WIDTH);
            y = settings.getInt(DIALOG_HEIGHT);
            return new Point(Math.max(x, initialSize.x), Math.max(y,
                    initialSize.y));
        } catch (NumberFormatException e) {
        }
        return initialSize;
    }

    /*
     * (non-Javadoc)
     * 
     * @see org.eclipse.jface.dialogs.Dialog#isResizable()
     */
    protected boolean isResizable() {
        return true;
    }
} 
```

有时，找出 Eclipse 如何做某事的唯一方法是搜索源代码。我正在开发一个 Swing 项目，以使搜索 Eclipse 源代码更容易，主要是由于您的问题。

# sorting - 在 Orchard 中对 Content-Item 查询进行排序

> ID：14854383
> 
> 赞同：1
> 
> 时间：2013-02-13T13:11:12.090
> 
> 标签：sorting, content-management-system, orchardcms

我在 orchard 中创建了一个简单的内容类型，其中包含（除其他外）stars 模块，该模块基于投票模块（基本上这使用户能够为一篇文章投票，然后显示由表示的平均结果星星）。到目前为止，这工作得很好，但现在我想要我的文章的前 10 名列表。我开始创建一个查询，从这种类型中获取所有项目，之后我想按它们的平均投票值对它们进行排序，这就是事情变得棘手的地方......

排序标准页面允许我在此内容项中选择我自己的所有内容字段，但没有来自投票模块的字段。我还查看了绑定，看看我是否可以在那里启用某些东西，但我能找到的只是`Contrib.Voting.Models.VoteWidgetPartRecord`其中不包含任何所需信息的字段。

我查看了数据库并发现了一个同名的表，该表包含哪些内容项使用投票插件的信息——我需要的是表中的信息`Contrib_Voting_ResultRecord`。

有什么我没有看到的，可以让它工作吗？我相信我不可能是第一个想要这种功能的人。还是我必须自己编写排序标准，如果是这样，我在哪里可以找到有关如何执行此操作的任何信息？

# c++ - (Qt - QProcess) 与控制台应用程序的通信

> ID：14854384
> 
> 赞同：2
> 
> 时间：2013-02-13T13:11:14.583
> 
> 标签：c++, qt, qprocess

我正在尝试将 Qt 控制台应用程序与另一个用 C 编写的控制台应用程序（国际象棋引擎 - TSCP）进行通信。

我创建了这个类：

```
#include "engine.h"

Engine::Engine(QObject *parent) :
    QProcess(parent)
{
}

Engine::~Engine()
{
    delete process;
}

void Engine::startProcess()
{
    process = new QProcess( this );

    process->setReadChannel( QProcess::StandardOutput );

    connect( process, SIGNAL(error(QProcess::ProcessError)), this, SLOT(error(QProcess::ProcessError)) );
    connect( process, SIGNAL(finished(int,QProcess::ExitStatus)), this, SLOT(finished(int,QProcess::ExitStatus)) );
    connect( process, SIGNAL(readyReadStandardError()), this, SLOT(readyReadStandardError()) );
    connect( process, SIGNAL(readyReadStandardOutput()), this, SLOT(readyReadStandardOutput()) );
    connect( process, SIGNAL(started()), this, SLOT(started()) );
    connect( process, SIGNAL(stateChanged(QProcess::ProcessState)), this, SLOT(stateChanged(QProcess::ProcessState)) );

    //process->start( "/usr/bin/konsole --nofork -e ./TSCP" );
    process->start( "./TSCP" );
    process->waitForStarted(-1);
}

void Engine::stopProcess()
{
    //process->write( "bye" );
    process->closeWriteChannel();
}

void Engine::Write( QByteArray writeBuff )
{
    writeBuff.clear();
    qDebug() << "Sending command: " + writeBuff;
    process->write( writeBuff );
    //process->closeWriteChannel();
}

QByteArray Engine::Read()
{
    readBuffer = process->readAllStandardOutput();
    return readBuffer;
}

void Engine::error( QProcess::ProcessError error )
{
    qDebug() << "Error!";
    qDebug() << error;
}

void Engine::finished( int exitCode, QProcess::ExitStatus exitStatus )
{
    qDebug() << "The process has finished.";
    qDebug( "Exit code: %i", exitCode );
    qDebug( "Exit status: %i", exitStatus );
}

void Engine::readyReadStandardError()
{
    qDebug() << "Ready to read error.";
    qDebug() << process->readAllStandardError();
}

void Engine::readyReadStandardOutput()
{
    qDebug() << "The output:";
    readBuffer = process->readAllStandardOutput();
    qDebug() << readBuffer;
    //process->closeReadChannel( QProcess::StandardOutput );
    //process->waitForBytesWritten();
}

void Engine::started()
{
    qDebug() << "The process has started.";
}

void Engine::stateChanged( QProcess::ProcessState newState )
{
    switch( newState )
    {
    case 0:
        qDebug() << "The process is not running.";
        break;
    case 1:
        qDebug() << "The process is starting, but the program has not yet been invoked.";
        break;
    case 2:
        qDebug() << "The process is running and is ready for reading and writing.";
        break;
    }
} 
```

我的 main.cpp 看起来就像这样：

```
int main(int argc, char *argv[])
{
    QCoreApplication a(argc, argv);

    qDebug() << "----------------------------------";

    Engine engine;
    engine.startProcess();
    engine.Write( "on" );
    qDebug() << "----------------------------------";

    return a.exec();
} 
```

我正在努力实现：

1.  启动进程 - 国际象棋引擎。
2.  向进程-引擎发送命令。
3.  接收答案（能够显示、处理）。
4.  继续通信（步骤 2、3）。
5.  关闭进程。

第一步和最后一步我没有任何困难 - 它正在工作。问题是我无法与国际象棋引擎（控制台应用程序）正常通信。

我肯定做错了什么！;) 如果我取消注释 process->closeWriteChannel(); 在 void Engine::Write( QByteArray writeBuff ) 函数中，我可以写一个命令（例如“on”开始游戏）并接收正确的输出 - 来自国际象棋引擎的响应（移动）。我无法发送下一个推荐，因为通道已关闭（很明显）。如果此行被评论，我将无法收到任何信息。

我想要做：

1.  启动流程：

    发动机发动机；engine.startProcess();

2.  沟通（发送用户并接收引擎移动）：

    engine.Write("a2a3"); 引擎.Write("b2b3"); engine.Write("c2c3");

3.  关闭进程。

我尽力找到答案（帮助，谷歌）。你能帮我找到解决办法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T17:38:34.807

我发现您的代码有两个问题：

1.  你调用`writeBuf.clear()`你的`Engine::Write`成员函数，不要那样做。
2.  我猜你的外部程序通过寻找换行符来分隔命令。请尝试类似`engine.Write( "a2a3\n" )`.

# php - 为什么在使用php时将数据存储在xml中更安全？

> ID：14854385
> 
> 赞同：0
> 
> 时间：2013-02-13T13:11:19.827
> 
> 标签：php, xml, security

我想知道当您在 XML 中格式化页面的各个部分以供以后提取和使用时，是否有人可以帮助阐明 PHP 如何变得更加安全。基本上，我们在“index.php”中有一个函数作为我们的设置，它负责创建页面。调用时，它会抓取一系列包含数据库连接信息和站点设置的 XML 文件。然后它将这些东西解析成一个数组以在代码中使用。随后，对整个页面设置和小部件设置执行相同的操作。

现在我承认，我只是不喜欢 XML。对于任何潜在的好处来说都过于冗长，而且通常是数据存储的糟糕选择（为什么不只使用数据库？），但我的同事坚持认为，由于 XML，我们的代码在某种程度上更加安全。他没有解释原因，但仍然相信。任何想法为什么会这样？

更糟糕的是，XML 文件被解析为全局变量，似乎如果一个漏洞进入索引，攻击者需要做的就是遍历 $GLOBALS 以检索数据库凭据和我们代码中的其他有价值的信息。似乎这破坏了在 XML 中存储数据的任何可能的好处。那么我在这里错过了什么？有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T13:14:22.587

XML 文件本身并不是安全或不安全的，而是它们的使用方式。XML 只是一种数据格式。在这种情况下，听起来数据的分离方式对安全性没有任何重大贡献。

直接回答：不是。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T14:59:25.700

我知道我说这是猜测，但到底是什么。

首先，你不能使用数据库来存储它自己的数据库连接信息，所以那个位必须在某个地方。Deceze 是正确的，XML 本身并不安全。

任何安全方面都来自于您组织中如何对待 XML 文件与 PHP 不同的其他一些细节。我能想到的两件事是：

1.  如果允许不同的人编辑 XML 而不是 PHP，包括是否有一个很好的前端来编辑和保存它们

2.  如果所有网站文件都同步或备份到可能受到威胁的位置（例如 GitHub、USB 拇指驱动器），您希望排除数据库密码等敏感内容，因此可以轻松使用文件扩展名 .xml 过滤文件排除。

当然，这些可以很容易地应用于 .json 或 .csv 文件，或者实际上是单独文件夹中的 .php 文件。

XML 要做的最后一件事是：

*   如果有人在不知道自己在做什么的情况下对文件大发雷霆，他们可以很容易地破坏它，然后就无法解析，整个系统就会失败。结果：有些人对处理 XML 感到厌烦。我不确定这算不算安全，但在一个动机不明的同事世界里，这似乎是合理的。

# mysql - 每个指定组选择 n 个随机行

> ID：14854386
> 
> 赞同：4
> 
> 时间：2013-02-13T13:11:23.383
> 
> 标签：mysql

我正在努力为以下问题找到最佳解决方案。

假设我有一个像这样的表“表”：

```
id    name    report_id
 1    name1    1
 2    name2    3
 3    name3    5
 4    name1    7
 5    name3    8
 .................... 
```

我想为一组中的每个值选择： ('name1', 'name2') 10 个随机唯一行。

当然，可以使用*联合*，例如：

```
(SELECT * FROM Table
WHERE
    name='name1'
ORDER BY RAND() LIMIT 10)
UNION
(SELECT * FROM Table
WHERE
    name='name2'
ORDER BY RAND() LIMIT 10) 
```

但是，如果我有 100 个唯一名称，我必须选择 10 个随机记录 - 这个查询会有点大。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T13:40:52.593

[SQLFiddle 演示](http://sqlfiddle.com/#!2/27ff6/19)

```
select ID,NAME,REPORT_ID
from
(
select *, @row:=if(name=@name,@row,0)+1 as rn, @name:=name from 
(select *,RAND() as trand from t) t1,
(select @row:=0,@name:='') tm2 
order by name,trand
) t2
where rn<=10 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-13T13:18:06.700

试试这个：

```
 SELECT
    id, 
    name,
    report_id
  FROM
  (
    SELECT id,
        report_id,
        name,
        CASE WHEN @name != name THEN @rn := 1 ELSE @rn := @rn + 1 END rn,
        @name:=name
     FROM (SELECT * FROM tbl ORDER BY RAND()) a,
        (SELECT @rn:=0, @name := NULL) r
     ORDER BY name
  ) s
  WHERE rn <= 10; 
```

**[SQL 小提琴演示](http://sqlfiddle.com/#!2/55629/13)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-02T12:49:01.857

这在 MySQL 中不起作用，但在 PostgreSQL 中你可以使用`partition by`

```
select name,report_id from
(select name,report_id,row_number()
over
(partition by name order by random())
as rn from Table) a
where rn<=10 
```

我有同样的问题，并从同事那里找到了这个答案。

# asp.net-mvc - 使用响应式网页设计的 MVC 中图像上的文本框和按钮

> ID：14854387
> 
> 赞同：0
> 
> 时间：2013-02-13T13:11:24.337
> 
> 标签：asp.net-mvc, html, css, responsive-design

我必须为我的公司创建一个 MVC 网站，并且我正在使用响应式网页设计框架（Zurb Foundation）。它的效果惊人。但我的问题是我在其中一个 div 中有一个图像，我需要在图像中添加一个文本框和一个按钮（基本上它是一个登录）。我想要一种控件，带有背景图像，然后是 html 文本框/按钮，但不确定这在 MVC 中是否可行。

我尝试使用 css (position:absolute) 但是当我重新调整页面大小以让 html 适应不同的浏览器大小时，它不起作用。

我怎么解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T15:52:17.207

啊啊啊，我现在明白了。

你需要了解`position`这一点。

[一些信息](http://css-tricks.com/absolute-positioning-inside-relative-positioning/)

相对定位元素中的绝对定位元素...

[jsfiddle](http://jsfiddle.net/6x5gg/2/)

只是玩一些边距，休息等......

# java - 在 javac 中禁用 StringBuilder 优化

> ID：14854395
> 
> 赞同：3
> 
> 时间：2013-02-13T13:11:40.980
> 
> 标签：java, optimization, javac

在 Java 中使用普通字符串连接时，javac 将在可以使用的地方进行优化`StringBuilder`（或 Java 5 之前的 StringBuffer。）

就我而言，将所有这些都关闭会非常有帮助，只需使用 bog 标准的“append”方法来连接字符串即可`String`。这种优化是完全“融入”到 javac 中的，还是有办法完全禁用它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T14:05:08.403

我不是 javac 专家，但它似乎在第 1793 行的[Gen.java](http://hg.openjdk.java.net/jdk7/tl/langtools/file/a72412b148d7/src/share/classes/com/sun/tools/javac/jvm/Gen.java)文件中的 javac 中硬编码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T13:18:27.037

看看这个与 eclipse 相关的[链接](http://help.eclipse.org/helios/index.jsp?topic=/org.eclipse.jdt.doc.isv/guide/jdt_api_options.htm)，但如果你使用 eclipse，你可能会发现一些与优化选项相关的配置，比如未使用的局部变量和 co，希望你会发现一些有用的东西。

或者[，此汇编器](http://jasmin.sourceforge.net/)可以帮助您它采用 Java 类的 ASCII 描述，使用 Java 虚拟机指令集以类似汇编器的简单语法编写。它将它们转换为二进制 Java 类文件，适合由 Java 运行时系统加载。

# jquery - 带有两个链接的两个 div 切换

> ID：14854396
> 
> 赞同：0
> 
> 时间：2013-02-13T13:11:42.420
> 
> 标签：jquery, html, toggle

我有两个最初隐藏的 div。当我单击链接 1 第一个 div 打开时，当我单击链接 2 第二个 div 打开时。但他们关闭了其他打开的 div。

```
 $(document).ready(function(){
    $("#agent, #agency").hide();
    $(".show_hide").show();
    $(".show_hide_two").show();
    $('.show_hide').click(function(){$("#agent").slideToggle();});
    $('.show_hide_two').click(function(){$("#agency").slideToggle();});

});

</script>

<div id="agent">Agents</div>
<div id="agency">Agency</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T13:20:44.250

这是你的追求？

使用 slideUp 隐藏你不想要的东西

```
$("#agency").slideUp(); 
```

[http://jsfiddle.net/j3PFE/](http://jsfiddle.net/j3PFE/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T13:37:33.427

看看 thi[如何使用链接按钮交换内容 div？](http://jqfaq.com/how-to-swap-content-div-using-link-buttons/)链接这将帮助您根据单击的链接获得显示 div 的答案。

```
$("#div1").slideDown();
$("#div2").slideUp(); 
```

我希望这会对你有更多帮助。

# php - 带有样式的 Twitter API 版本 1.1

> ID：14854413
> 
> 赞同：0
> 
> 时间：2013-02-13T13:12:27.113
> 
> 标签：php, api, twitter, styling

我希望在我正在编写的网站上创建一个 twitter 提要，并且在浏览 twitter 网站上的文档时运气不佳，我遇到了[这个页面](https://stackoverflow.com/questions/12916539/simplest-php-example-retrieving-user-timeline-with-twitter-api-version-1-1)。特别是我正在查看河流发布的代码，这似乎得到了推文，但我不清楚显示它们的正确方法，有谁知道推特是否提供任何样式表进行演示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T14:05:34.960

我认为[显示指南](https://dev.twitter.com/terms/display-requirements)与您将要获得用于演示的“样式表”一样接近。无论如何，“样式表”不会给您带来很多好处，因为您将需要构建自己的 HTML 输出来反映样式表的样式，以便它们可以使用。

很难给你很多方向，因为不清楚你真正的目标是什么，但[嵌入的推文](https://dev.twitter.com/docs/embedded-tweets)或[嵌入的时间线](https://dev.twitter.com/docs/embedded-timelines)可能更接近你正在寻找的东西。

# android - 如何在没有 android 市场的情况下以编程方式更新 android 应用程序

> ID：14854418
> 
> 赞同：3
> 
> 时间：2013-02-13T13:12:45.503
> 
> 标签：android, google-play

我需要一些帮助，

1）我正在开发应用程序，我想在其中显示包括视频在内的离线网站，所以我在原始文件夹中添加了视频以供离线访问应用程序，我想在几天后更改该视频（可能会从应用程序中添加或删除一些视频） . 那么是否可以在不使用 android 市场的情况下更新我的应用程序？

这个想法是当我启动应用程序时，它会解析 json 并检查我的网站上是否有新版本的应用程序可用。如果它可用，它将开始下载它（我不想打开浏览器进行下载。更新应该在我的应用程序或后台完成）并重新安装它。我怎样才能通过编程方式做到这一点？

还有我如何在网络视图中缓存整个网站。目前我正在使用此代码，但它只缓存访问过的页面（我们在应用程序中打开的页面）

```
webView.getSettings().setLoadsImagesAutomatically(true);
 webView.getSettings().setDomStorageEnabled(true);
 webView.getSettings().setAppCacheMaxSize(1024*1024*24);
 String appCachePath = getApplicationContext().getCacheDir().getAbsolutePath();
 webView.getSettings().setAppCachePath(appCachePath);
 webView.getSettings().setAllowFileAccess(true);
 webView.getSettings().setAppCacheEnabled(true);
 webView.setWebChromeClient(new WebChromeClient());
 webView.setWebViewClient(new WebViewClient());   
 if (savedInstanceState == null) {
 if(isNetworkAvailable() == true){
 webView.getSettings().setCacheMode(WebSettings.LOAD_DEFAULT);
 webView.loadUrl("http://www.xyz.com");
  } else {
 webView.getSettings().setCacheMode(WebSettings.LOAD_CACHE_ONLY);
 webView.loadUrl("http://www.xyz.com");
  }   } } 
```

2）如何通过usb将apk从mac安装到平板电脑而不点击eclipse的运行按钮。我想将此 apk 安装到 200 台平板电脑，所以我正在寻找一些批处理程序或一些脚本，它们将是应用程序的一键安装脚本。我在谷歌上搜索我发现一个[多 apk 点击](http://forum.xda-developers.com/showthread.php?t=970348)但我不知道它是否适用于无根平板电脑。

等待回复。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T13:20:05.577

有两种方法可以做到这一点，首先使用推送通知，并在用户单击通知时告诉他们新版本从您的网络服务器下载 apk 并让他们安装（我使用过这个）

其他选项可能会在某个固定时间（一天）后轮询您的 Web 服务器，并检查新版本是否可用，一旦可用，将其推送到通知区域，当用户单击新版本可用时，它将再次重复上述过程为此，您所需要的只是您将请求发送的 Web 服务器，以及您将让用户从哪里下载应用程序

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T13:33:39.183

我认为将视频等存储为资源是一种不好的方式。

您可以通过计时器将数据与您的站点同步，并将所有数据存储在数据库或 SD 卡中 - 因此您无需重新安装应用程序，有时只需下载一些数据，所有数据都将在您的设备上并可离线使用。

关于脚本 - 您可以编写自己的脚本并且只运行`abd install app`- 所以您只需要启动您的 adb 而无需打开 IDE。

顺便说一句，您无需用户操作即可“重新安装”您的应用程序（在非 root 设备上） - 因此用户多次重新安装您的应用程序非常不方便。

**更新**

要通过 USB 安装应用程序 - 此人必须有 adb。

> 他们不想等到下载完成

但在这种情况下，他们必须等到应用程序被下载 =)。他们必须下载内容，即使是资源中的内容或在线可用的内容。

如果您想使用内置内容创建此类应用程序，您可能会遇到一些问题：

*   有些设备不会接受你非常大的 APK（例如，对于 htc 的需求>20 mb 是个坏主意 =）
*   每次你想更新你的应用程序时，人们都必须重新下载大量的信息，如果你内置了在线缓存，他们可以花费更少的时间来下载 diff。即使人们通过 USB 安装您的应用程序 - 您也可以将所有数据放在 sdcard 上。
*   您不能以人们不会生气的方式在非 root 设备上升级您的应用程序 - 每次都必须重新安装您的应用程序。但是使用我的方法可以睡觉并且可以下载内容。

因此，当您的方法比通常的“在线”方法更好时，我无法想象任何用例。

# java - node.js 或 netty 上的游戏服务器

> ID：14854422
> 
> 赞同：3
> 
> 时间：2013-02-13T13:12:49.607
> 
> 标签：java, performance, node.js

我无法在 node.js 和 Java(Netty) 之间做出选择。我希望通过游戏过程制定基于步骤的策略，例如[http://www.magicthegatheringtactics.com/](http://www.magicthegatheringtactics.com/)（用户在聊天室中合作并为 2-6 游戏玩家创建游戏会话。游戏会话中的游戏玩家做出他可能的动作一个接一个）我希望使用像 postgreSQL 这样的数据库，或者也许是新的 mysql 版本。我预计一次最多有 4000 个用户。我们将使用 Unity3d 制作客户端。

有人可以帮我做一个选择吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T18:23:30.793

有很多人在谈论速度、吞吐量和性能。您经常可以听到“node.js 更快，因为它是异步的”。

1.  您也可以编写异步 Java
2.  异步并不比线程快，如果您开始使用多个线程，它的扩展性更好
3.  如果“作业”通过事件或线程内部发出其状态信号，则它需要相同的时间。

一些链接： [http ://amix.dk/blog/post/19577#Is-node-js-best-for-Comet](http://amix.dk/blog/post/19577#Is-node-js-best-for-Comet) [http://www.olymum.com/java/java-aio-vs-nodejs/](http://www.olympum.com/java/java-aio-vs-nodejs/)

在我看来，我的观点是：

node.js 是一种炒作。如果你擅长 JavaScript，就使用 node，如果你擅长 Java，就使用 Java。在 JavaScript 中有很多我不喜欢的想法 [对于 CodeMash 2012 的“Wat”演讲中提到的这些奇怪的 JavaScript 行为的解释是什么？](https://stackoverflow.com/questions/9032856/what-is-the-explanation-for-these-bizarre-javascript-behaviours-mentioned-in-the)

甚至更有趣：[https ://www.youtube.com/watch?v=kXEgk1Hdze0](https://www.youtube.com/watch?v=kXEgk1Hdze0)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T17:53:58.503

Java 在计算方面会更快，而 Node 在 IO 方面会更快。如果您正在考虑 Java 和 Node，我认为计算不是您最大的问题，因此请选择哪种语言可以更快地创建您的服务器。

# javascript - Javascript：encodeURI() / encodeURIComponent() 字符集

> ID：14854423
> 
> 赞同：5
> 
> 时间：2013-02-13T13:12:52.737
> 
> 标签：javascript, url, encoding, character-encoding

有没有办法在 Javascript 的 encodeURI() 或 encodeURIComponent() 中指定字符集？例如：

`encodeURIComponent("例子", "UTF-8")`输出`%E4%BE%8B%E5%AD%90`

`encodeURIComponent("例子", "GBK")`输出`%C0%FD%D7%D3`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-10-01T01:29:16.557

我的解决方案是使用 npm 包[urlencode](https://github.com/node-modules/urlencode)和[browserify](http://browserify.org/)。

在 urlencode.js 中编写：

```
var urlencode = require("urlencode");
module.exports = function (s) { return urlencode(s, "gbk"); } 
```

`browserify urlencode.js --s encode > bundle.js`

在 bundle.js 中，声明了一个被调用的函数`encode`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-06T07:43:38.183

根据您修改之前[对该问题的早期编辑，](https://stackoverflow.com/revisions/14854423/1)您似乎正在尝试根据您提交的不同搜索词访问各种百度百科。我的回答与您的新 JS 问题无关，但您的旧问题的简单解决方案（并且不需要 JS 解决方案）是在百度百科 URL 中指定字符编码：`&enc=`. 以下所有正确解决：

*   [http://baike.baidu.com/search/word?word=例子&pic=1&sug=1&enc=utf8](http://baike.baidu.com/search/word?word=%E4%BE%8B%E5%AD%90&pic=1&sug=1&enc=utf8)
*   [http://baike.baidu.com/search/word?word=%E4%BE%8B%E5%AD%90&pic=1&sug=1&enc=utf8](http://baike.baidu.com/search/word?word=%E4%BE%8B%E5%AD%90&pic=1&sug=1&enc=utf8)
*   [http://baike.baidu.com/search/word?word=%C0%FD%D7%D3&pic=1&sug=1&enc=GBK](http://baike.baidu.com/search/word?word=%C0%FD%D7%D3&pic=1&sug=1&enc=GBK)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-20T06:40:14.143

```
const _encodeURIComponent = (x) =>
    x   
        .split('')
        .map((y) => {
            if (!RegExp(/^[\x00-\x7F]*$/).test(y)) {
                return iconv
                    .encode(y, encoding)
                    .reduce((a, b) => a + '%' + b.toString(16), '') 
                    .toUpperCase();
            } else {
                return y;
            }   
        })  
        .join(''); 
```

替换`encoding`为所需的编码

# c# - 将参数添加到与供应商无关的 IDataParameterCollection 的更简洁方法？

> ID：14854429
> 
> 赞同：3
> 
> 时间：2013-02-13T13:13:17.153
> 
> 标签：c#, interface, ado.net, mysql-connector, parameterization

在我们拥有的每个 ADO.NET 连接器上`AddWithValue`，因此添加参数变得轻而易举。令我惊讶的是，这种重载`IDataParameterCollection`在`DbParameterCollection`. 在编写与供应商无关的层（针对接口进行编码）时，如何以最少的麻烦（来自调用方和被调用方）实现相同的目标？

现在我做：

```
public void Execute(string query, Action<IDbCommand> parameterizer)

Execute(query, cmd =>
    {
        var param = cmd.CreateParameter();
        param.ParameterName = "user_id";
        param.Value = 1;
        cmd.Parameters.Add(param);

        param = cmd.CreateParameter();
        param.ParameterName = "mf";
        param.Value = "6CE71037";
        cmd.Parameters.Add(param);
    }); 
```

这工作量太大了吧。否则我可以更改签名：

```
public void Execute(string query, IEnumerable<KeyValuePair<string, object>> parameters)

var parameters = new Dictionary<string, object> 
                 { { "user_id", 1 }, { "mf", "6CE71037" } };
Execute(query, parameters); 
```

`Execute`这种方法需要我在被调用者（方法）中编写另一个循环。这几乎是我想要的，但只是看看是否有更简洁的方法。例如像这样：

```
public void Execute(string query, Action<IDataParameterCollection> parameterizer)

Execute(query, p =>
    {
        p["user_id"] = 1;
        p["mf"] = "6CE71037";
    }); 
```

这给出了一个运行时异常说`Unable to cast object of type 'System.Int32' to type 'System.Data.Common.DbParameter`。我理解错误。只是想知道是否有更优雅的模式..

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-13T13:19:40.263

为什么不在最后一个签名中使用字典：

```
public void Execute(string query, Action<Dictionary<string, object>> parameterizer)

Execute(query, p =>
    {
        p["user_id"] = 1;
        p["mf"] = "6CE71037";
    }); 
```

然后，该`Execute`方法可以使用`Action`填充 a`Dictionary`并基于它创建参数：

```
var parameters = new Dictionary<string, object>();
parametrizer(parameters);
foreach (var pair in parameters)
{
    var parameter = f.CreateParameter();
    parameter.ParameterName = pair.Key;
    parameter.Value = pair.Value;
    cmd.Parameters.Add(parameter);
} 
```

* * *

如果要传递实际值，另一种解决方案`IDbCommand`是使用[扩展方法](http://msdn.microsoft.com/en-us/library/vstudio/bb383977.aspx)：

```
public static void AddWithValue<T>(this IDbCommand command, string name, T value)
{
    var parameter = command.CreateParameter();
    parameter.ParameterName = name;
    parameter.Value = value;
    command.Parameters.Add(parameter);
} 
```

调用它看起来像：

```
Execute(query, cmd =>
    {
        cmd.AddWithValue("user_id", 1);
        cmd.AddWithValue("mf", "6CE71037");
    }); 
```

# php - Yii PHP 框架：无法在 Yii 中使用 require_once

> ID：14854431
> 
> 赞同：-2
> 
> 时间：2013-02-13T13:13:20.863
> 
> 标签：php, extjs, yii

我正在尝试在 Yii 中实现重写的 Ext.Direct 功能。一切都很顺利，除了我无法让`doRpc`函数正常工作，这对应用程序正常工作至关重要，该函数在[Sencha Ext.Direct 教程](http://docs.sencha.com/ext-js/4-1/#!/guide/direct_grid_pt1)中定义，虽然我对它做了一些更改，所以这是我的重写代码：

**组件/Ext_Router.php**

```
class Ext_Router extends CApplicationComponent
{
    public function doRpc($cdata)
    {
        $API = Yii::app()->ext_api->getApi();
        try {
            if(!isset($API[$cdata->action])){
                throw new Exception('Call to undefined action: ' . $cdata->action);
            }

            $action = $cdata->action;
            $a = $API[$action];

            Yii::app()->ext_router->doAroundCalls($a['before'], $cdata);

            $method = $cdata->method;
            $mdef = $a['methods'][$method];
            if(!$mdef){
                throw new Exception("Call to undefined method: $method on action $action");
            }
            Yii::app()->ext_router->doAroundCalls($mdef['before'], $cdata);

            $r = array(
                'type'=>'rpc',
                'tid'=>$cdata->tid,
                'action'=>$action,
                'method'=>$method
            );

            // TODO require_once always returns: No such file or directory
            require_once("index.php?r=direct/classes/index&classaction=$action");

            $o = new $action();
            if (isset($mdef['len'])) {
                $params = isset($cdata->data) && is_array($cdata->data) ? $cdata->data : array();
            } else {
                $params = array($cdata->data);
            }

            $r['result'] = call_user_func_array(array($o, $method), $params);

            Yii::app()->ext_router->doAroundCalls($mdef['after'], $cdata, $r);
            Yii::app()->ext_router->doAroundCalls($a['after'], $cdata, $r);
        }
        catch(Exception $e){
            $r['type'] = 'exception';
            $r['message'] = $e->getMessage();
            $r['where'] = $e->getTraceAsString();
        }
        return $r;
    }

    public function doAroundCalls(&$fns, &$cdata, &$returnData=null)
    {
        if(!$fns){
            return;
        }
        if(is_array($fns)){
            foreach($fns as $f){
                $f($cdata, $returnData);
            }
        }else{
            $fns($cdata, $returnData);
        }
    }
} 
```

**模块/直接/控制器/ClassesController.php**

```
class ClassesController extends Controller
{
    public function actionIndex($classaction)
    {
        $this->render("$classaction");
    }
} 
```

**modules/direct/views/classes/Temporary.php**

```
class Temporary
{
    protected $_result;
    public $results;

    public function getResults(stdClass $params)
    {
        $_result = Temporary::model()->findAllByAttributes(array('id'=>Yii::app()->session['id']));

        $results = array();

        if($_results != null) {
            foreach($_result as $row) {
                $results[] = $row;
            }
        }

        return $results;
    }   

    ...
} 
```

**问题：**

```
require_once("index.php?r=direct/classes/index&classaction=$action"); 
```

绕过这个问题的最佳方法是什么？我如何“解析”/包含/需要这个 PHP 文件？

（请记住，我还没有开始测试我的 Temporary.php，因为我根本没有克服当前的错误）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T13:38:59.267

使用[Yii 的导入](http://www.yiiframework.com/doc/api/1.1/YiiBase/#import-detail)：

```
<?php
Yii::import('application.modules.direct.views.classes.Temporary'); 
```

# javascript - 如何使用 将 javascript 生成的数据传递给支持 bean？

> ID：14854437
> 
> 赞同：0
> 
> 时间：2013-02-13T13:13:53.180
> 
> 标签：javascript, ajax, jsf-2, primefaces

我有一个 js 函数`codeAddress()`，它处理来自 and 的数据并`address`更新其值。 我试图将数据传递给支持 bean ，但 setter 方法似乎被称为一个延迟的请求。`fullAddress``validField`
`<p:ajax>``fullAddress``validField`

```
<h:form id="addressForm">
    <p:inputText id="address">
        <p:ajax onstart="codeAddress()" process="fullAddress validField"/>
    </p:inputText>
    <p:commandButton value="submit" />
    <p:inputText id="fullAddress" value="#{addressBean.fullAddress}" />
    <p:inputText id="validField" value="#{addressBean.valid}" />
</h:form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T13:29:41.503

在即将发送 ajax 请求*之前*`onstart`调用。那时，ajax 请求已经准备好很久了。因此，让它考虑更改的输入值为时已晚。

 *最好改用输入组件的`onchange`属性。在准备好 ajax 请求之前调用它。

```
<p:inputText id="address" onchange="codeAddress()">
    <p:ajax process="fullAddress validField"/>
</p:inputText> 
```*

# php - HTACCESS：操作/更改 URL

> ID：14854438
> 
> 赞同：0
> 
> 时间：2013-02-13T13:13:53.597
> 
> 标签：php, apache, .htaccess, localhost

感谢您花时间阅读本文，

例如，我有一个名为“ADMIN”的文件夹，其中有 3 个文件名为

```
file1.php
file2.php
file3.php 
```

所以当我拜访他们时，会是这样吗？

```
http://localhost/admin/file1.php
http://localhost/admin/file2.php
http://localhost/admin/file3.php 
```

现在有什么办法可以将这些更改为

```
http://localhost/admin/file1/
http://localhost/admin/file2/
http://localhost/admin/file3/ 
```

我知道有一种方法可以单独执行此操作，但我那里没有 3 个文件，更像是 25 个，所以会有点痛苦。

感谢您提前提供任何帮助。

也作为一点额外的。这可能是一个愚蠢或一个好问题，但有什么方法可以使用 .htaccess 隐藏“GET”数据

```
http://localhost/file.php?get=name 
```

至

```
http://localhost/file.php 
```

并且获取数据仍然有效。

再次感谢。

康纳

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T13:56:10.157

`.php`在您的`.htaccess`文件中隐藏扩展名应如下所示：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /admin/
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([a-z0-9_-\.]*)?$ /admin/$1.php [L]
</IfModule> 
```

至于 GET 数据，您不能将这些参数作为 POST 从您的表单发送吗？

# sql-server-2008 - 自定义 SSIS 任务 - 版本属性

> ID：14854442
> 
> 赞同：3
> 
> 时间：2013-02-13T13:14:12.377
> 
> 标签：sql-server-2008, ssis, ssis-2008

我们有一个自定义 SSIS 任务（不是组件），需要添加新属性。支持 SSIS 升级功能会很好，因此所有客户端与现有软件包有关的只是升级它们。

我们已经实现了 Update 和 CanUpdate 方法，但是我们找不到更新自定义任务的 Version 属性的方法，因为它是只读的。

有没有办法设置版本属性？

谢谢大家！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T17:30:47.080

该[`Task.Version`属性](http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.dts.runtime.task.version%28v=sql.105%29.aspx)是虚拟的（`Update`和`CanUpdate`方法一样），因此您可以以相同的方式覆盖它：

```
[DtsTask (/* whatever your task attributes are */)]
public class MyDemoTask : Task
{
    public override bool CanUpdate(string CreationName)
    {
        // your code here
    }
    public override void Update(ref string ObjectXml)
    {
        // your code here
    }
    public override int Version
    {
        get
        {
            return 42;
        }
    }
} 
```

# maps - 从 OpenLayers.Layer.Vector 对象获取 GeoJson 属性时遇到麻烦

> ID：14854444
> 
> 赞同：0
> 
> 时间：2013-02-13T13:14:15.747
> 
> 标签：maps, openlayers

我已经尝试从以前在 SE 中提出的问题中解决问题，但无法通过阅读这些问题来解决问题，因此，作为单独的问题发布。

我正在`marker`使用以下代码创建一个图层

```
mLayer = new OpenLayers.Layer.Vector(layerName, {
        projection: map.displayProjection,
        extractAttributes: true,
        styleMap: new OpenLayers.StyleMap({'default' : Lstyle}),
        strategies: [new OpenLayers.Strategy.Fixed()],
        protocol: new OpenLayers.Protocol.HTTP({
            url: getURL,
            format: new OpenLayers.Format.GeoJSON()
        })
    }); 
```

我的任务是计算`marker`坐标的平均值并将其设置为地图的中心，因为我想从`mLayer`对象中获取坐标。标记在地图上显示良好，但是当我`mLayer.features.length`在控制台中打印时它显示`0`但大小`features`为 10，我可以`firebug console`通过打印看到`vLayer`，[这](http://jsonfiddle.net/95tfb)是我的 JSON 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T15:52:36.520

Openlayers 提供了这个功能：

*   [http://dev.openlayers.org/docs/files/OpenLayers/Layer/Vector-js.html#OpenLayers.Layer.Vector.getDataExtent](http://dev.openlayers.org/docs/files/OpenLayers/Layer/Vector-js.html#OpenLayers.Layer.Vector.getDataExtent)

然后使用`map.getZoomForExtent`和`map.panTo`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T12:02:50.457

将地图中心设置`markers mid point`为`Christophe Roussy`建议的在`comments`某种程度上是正确的，但他的代码的问题是，代码会在`layer`完成下载到浏览器之前执行，所以我们必须检查图层是否完成如下

`layer.events.register('loadend', layer, function(evt){map.zoomToExtent(layer.getDataExtent() )} )`

它对我来说工作正常。

# c# - 递归类 C#

> ID：14854449
> 
> 赞同：1
> 
> 时间：2013-02-13T13:14:26.087
> 
> 标签：c#, oop, class, recursion

我可以这样定义构造函数吗？附加问题：我可以在自己的构造函数中调用类的构造函数吗？

```
class SubArray
{
    List<int> array;
    string parent;
    string name;
    SubArray child;

    public SubArray(SubArray child, string name)
    {
        this.child = child;
        List<int> array = new List<int>();
        this.name = name;
    }
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-13T13:17:47.547

对此没有限制，但就像任何递归一样 - 它需要一个停止条件。否则会导致堆栈溢出（PUN 意图:)）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-13T13:18:36.810

我想你可以做这样的事情并且没有......明显的问题：

```
public SubArray(SubArray child, string name)
{
    this.child = child;
    this.array = new List<int>();
    this.name = name;

    if (child != null && child.child != null)
    {
        this.child.child = new SubArray(child.child,name);
    }
} 
```

# java - 一个简单的 string.split() 发生了可怕的错误

> ID：14854450
> 
> 赞同：2
> 
> 时间：2013-02-13T13:14:29.410
> 
> 标签：java, string-split

这段代码似乎被破坏了，但我不知道为什么：

```
System.out.println(line);
// prints: Some Name;1|IN03PLF;IN02SDI;IN03MAP;IN02SDA;IN01ARC

String args[]            = line.split("|");
String candidatArgs[]    = args[0].split(";");
String inscrieriString[] = args[1].split(";");

System.out.println(args[0]);
System.out.println(args[1]);
System.out.println(candidatArgs);
System.out.println("[0]:" + candidatArgs[0]);
System.out.println("[1]:" + candidatArgs[1]);

// prints: S
//         [Ljava.lang.String;@4f77e2b6
//         [0]: 
```

我不知道为什么会这样。按照我的逻辑：

```
String args[]            = line.split("|");
[0]: Some Name;1
[1]: IN02SDI;IN03MAP;IN02SDA;IN01ARC 
```

代替：

```
[0]: S 
```

**如果您想要更多代码：**即使它没有做太多也应该编译（尽可能多地删除不必要的代码）

**主要的：**

*有一个文件：* `Candidati.txt`

*包含：* `Some Name;1|IN03PLF;IN02SDI;IN03MAP;IN02SDA;IN01ARC`

```
import java.util.ArrayList;

Repository repository = new Repository ("Candidati.txt"); // file name

    ArrayList<Candidat> candidati = repository.getCandidati();
    System.out.println(candidati); 
```

**存储库**

```
import java.util.ArrayList;

public class Repository {

    private String fisierCuCandidati;

    private ArrayList<Candidat> listaCandidati;

    public Repository (String fisierCuCandidati) {

        this.fisierCuCandidati = fisierCuCandidati; // file name

        this.listaCandidati = new ArrayList<Candidat>();

        this.incarcaCandidati();
    }

    public void incarcaCandidati() {
        FileReader in = null;
        BufferedReader input = null;

        //try {

            in = new FileReader (this.fisierCuCandidati);
            input = new BufferedReader (in);

            String line;
            while ((line = input.readLine()) != null) {

                System.out.println(line);

                String args[]            = line.split("|");
                String candidatArgs[]    = args[0].split(";");
                String inscrieriString[] = args[1].split(";");

                System.out.println(args[0]);
                System.out.println(args[1]);
                System.out.println(candidatArgs);
                System.out.println("[0]:" + candidatArgs[0]);
                System.out.println("[1]:" + candidatArgs[1]);
            }

} 
```

**候选人**

```
public class Candidat {

    public Candidat (String nume) {

    }

    public Candidat (String nume, int id) {

    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-13T13:15:56.417

`String.split`使用正则表达式，因此您需要转义 pipe `|`，这是一个特殊字符（意思是*OR*）：

```
String args[] = line.split("\\|"); 
```

此外，要打印`String`数组输出而不是`Object.toString`表示形式，您将需要：

```
System.out.println(Arrays.toString(candidatArgs)); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-13T13:16:02.767

您需要`pipe`在拆分中的字符类中转义或使用它，就像[`String#split`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split%28java.lang.String%29)正则表达式一样，并且`|`是正则表达式中的元字符。所以，改用这个：

```
String args[] = line.split("\\|"); 
```

或者：

```
String args[] = line.split("[|]"); 
```

字符类起作用的原因是，在字符类内部，元字符没有特殊含义。因此，管道只是管道，而不是交替字符。

除此之外，您应该使用[`Arrays#toString`](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#toString%28java.lang.Object%5b%5d%29)方法来打印您的数组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T13:19:27.450

`|`是 java 正则表达式中的一个特殊字符，所以你需要像`\\|`. 我一般会

```
line.split(Pattern.quote(separator)) 
```

其中 Pattern 是[http://docs.oracle.com/javase/1.4.2/docs/api/java/util/regex/Pattern.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/regex/Pattern.html)，而 separator 是您使用的任何分隔符。这会自动处理转义特殊字符。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-13T13:17:55.253

改成：

```
String args[]            = line.split("\\|"); 
```

你`|`不会工作，因为参数`split`是一个正则表达式，`|`在正则表达式中有特殊含义（或）。

# javascript - 使用javascript按持续时间排序的字符串格式数据

> ID：14854451
> 
> 赞同：0
> 
> 时间：2013-02-13T13:14:29.823
> 
> 标签：javascript, jquery

我有一些包含字符串的行数形式的数据。每行包含日期。我想在一定时间内对数据进行排序。例如，从 2012 年 12 月 12 日到 2013 年 3 月 23 日。这应该使用 javascript 和 jquery 来完成。我已经完成了以下代码。

```
for (TempDate = strFrom; TempDate <= strTo; TempDate.setDate(TempDate.getDate() + 1)) {
    var FromDate = $.datepicker.formatDate('yy-mm-dd', strFrom);
    alert("FromDate : " + FromDate);    
    if (temp1[i].indexOf(FromDate) > 0) {
        $('#BasicDetailsPlaceHolderPanel div:eq(' + i + ')').css({ 'display': 'block'});
    }
    else {
        $('#BasicDetailsPlaceHolderPanel div:eq(' + i + ')').css({ 'display': 'none'});
    }
} 
```

但它只显示最后日期的记录。请告诉我解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T13:21:58.073

尝试这个

```
 // assuming an outer loop on temp1
 for (TempDate = strFrom; TempDate <= strTo; TempDate.setDate(TempDate.getDate() + 1)) {
     var FromDate = $.datepicker.formatDate('yy-mm-dd', strFrom);
     $('#BasicDetailsPlaceHolderPanel div:eq(' + i + ')').css({
       'display':  (temp1[i].indexOf(FromDate) >= 0)?"block":"none"
     });
 } 
```

# browser - 目的 ＃ 在 Object 处没有方法 'mapFunction'\n。

> ID：14854452
> 
> 赞同：1
> 
> 时间：2013-02-13T13:14:35.810
> 
> 标签：browser, flash

```
swfobject.embedSWF( .path + '/swf/TestApp.swf', id, "100%", "100%",  
      MINIMUM_REQUIRED_FLASH_PLAYER_VERSION, null, flashVars, params, null,
                function (event) {
                    if (event.success) {
                        _self.flashObject = event.ref;
                        ...
                       }
else{

    ...

} 
```

稍后当我打电话时

```
_self.flashObject.mapFunction(name,params) its giving below error: 
```

对象 # 在对象处没有方法 'mapFunction'\n。

如果有人有任何意见，请分享...它阻止我继续我的开发...

提前致谢...

# android - Android - 自动关闭进度条

> ID：14854457
> 
> 赞同：1
> 
> 时间：2013-02-13T13:14:51.057
> 
> 标签：android, progress-bar

当应用程序启动时，我从**main.xml**文件中填充一个进度条，直到列表为空。一旦列表中填充了来自 URL 的数据，我应该关闭这个进度条。我如何在不使用进度对话框的情况下做到这一点？

我的 main.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <ListView
        android:id="@+id/list_view_places"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:drawSelectorOnTop="false"
        android:fastScrollEnabled="true" >
    </ListView>

    <ProgressBar
        android:id="@+id/empty_progress_bar"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerInParent="true" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-13T13:19:31.073

尝试类似：

```
ProgressBar bar = (ProgressBar) findViewById(R.id.empty_progress_bar);
bar.setVisibility(View.GONE); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-13T13:25:30.023

如果您将使用列表片段，则会自动处理进度条。填充数据后，它将自动关闭。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-29T06:17:39.477

```
Try this :
globalProgressDialog.dismissProgressDialog(); 
```

# c++ - 转换 UYVY FFmpeg

> ID：14854461
> 
> 赞同：0
> 
> 时间：2013-02-13T13:14:59.947
> 
> 标签：c++, opencv, ffmpeg, directshow, video-processing

我想阅读并使用 opencv 播放视频。我用 Direct-show 录制，视频有 UYVY (4:2:2) 编解码器，由于 opencv 无法读取该格式，我想将编解码器转换为 RGB 颜色模型，我阅读了有关 ffmpeg 的信息，我想要知道是否有可能完成这项工作？如果不是，如果您提出建议，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T21:38:10.977

正如[我之前向您解释的那样](https://stackoverflow.com/a/14838999/176769)，OpenCV 可以读取某些格式的 YUV，包括**UYVY**（感谢 FFmpeg/GStreamer）。所以我相信`cv::Mat`你从相机得到的已经转换为 BGR 颜色空间，这是 OpenCV 默认使用的。

我修改了[之前的程序](https://stackoverflow.com/a/14838999/176769)，将视频的第一帧存储为 PNG：

```
cv::Mat frame;
if (!cap.read(frame)) 
{
    return -1;
}            

cv::imwrite("mat.png", frame);

for(;;)
{
 // ... 
```

并且图像是完美的。`file`在*mat.png*上执行命令显示：

```
mat.png: PNG image data, 1920 x 1080, 8-bit/color RGB, non-interlaced 
```

更准确的测试是将整个转储`frame.data()`到磁盘并使用图像编辑器打开它。如果您这样做，请记住 R 和 B 通道将被切换。

# clojure - Clojure unquote '(1 2 (+ 1 2))

> ID：14854477
> 
> 赞同：4
> 
> 时间：2013-02-13T13:15:49.617
> 
> 标签：clojure

我应该如何取消以下引用：

```
(def a '(1 2 (+ 1 2))) 
```

所以它评估为：

```
(1 2 3) 
```

做一个：

```
(def a '(1 2 ~(+ 1 2))) 
```

在 REPL 中评估如下：

```
(1 2 (clojure.core/unquote (+ 1 2))) 
```

我知道我可以做一个：

```
(list 1 2 (+ 1 2)) 
```

但我想知道是否可能有一些语法用于此目的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-13T13:20:33.470

使用```而不是`'`. 取消引用不适用于`'`.

# iphone - 收藏 在枚举时发生了突变

> ID：14854480
> 
> 赞同：9
> 
> 时间：2013-02-13T13:15:59.620
> 
> 标签：iphone, ios, objective-c

从屏幕上删除等待视图时，我的应用程序崩溃了一段时间。请指导我如何改进下面给出的代码。

* * *

仅当应用程序从服务器下载内容时才会调用等待视图。当它完成下载时，我调用 removeWaitView 方法。

**异常类型**：NSGenericException

**原因：** 集合在枚举时发生了突变。

```
+(void) removeWaitView:(UIView *) view{
    NSLog(@"Shared->removeWaitView:");
    UIView *temp=nil;
    temp=[view viewWithTag:kWaitViewTag];
    if (temp!=nil) {
        [temp removeFromSuperview];
    }
} 
```

我的waitview添加代码是

```
 +(void) showWaitViewInView:(UIView *)view withText:(NSString *)text{
   NSLog(@"Shared->showWaitViewWithtag");
   UIView *temp=nil;
   temp=[view viewWithTag:kWaitViewTag];
   if (temp!=nil)
   {
       return;
   }
   //width 110 height 40
   WaitViewByIqbal *waitView=[[WaitViewByIqbal alloc] initWithFrame:CGRectMake(0,0,90,35)];
   waitView.center=CGPointMake(view.frame.size.width/2,(view.frame.size. height/2) -15); 
   waitView.tag=kWaitViewTag;    // waitView.waitLabel.text=text;
   [view addSubview:waitView];
   [waitView release]; 
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-13T13:21:53.643

例外情况很明显 - 一个集合（在本例中类似于数组）正在被修改，同时它也在被枚举。

在这种特定情况下，我们谈论的是层数组，或者更好地说，`UIView`它们的实例都由层支持。

修改发生在您调用`removeFromSuperview`或时`addSubview`。枚举可以在重绘期间随时发生。

我的猜测是 - 你没有从主线程调用你的方法，并且主线程当前正在重绘，所以你会得到一个赛车条件。

解决方案：仅从主线程调用这些方法。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-09-05T08:18:41.717

您应该获得数组的副本，这样您就不会冒在代码枚举它时修改它的风险。当然，这留下了可能由于突变而添加新项目的机会，因此您的枚举将错过该数组项目。这是特定于您的问题标题的示例：

```
[[viewLayer.sublayers copy] enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {
            CALayer * subLayer = obj;
            if(subLayer == theLayerToBeDeleted){
                [subLayer removeFromSuperlayer];
            }

        }]; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-13T13:25:34.163

您可能会在迭代 waitView 的兄弟姐妹（它是 superView 的子视图）时添加或删除 waitView。检查以查看调用了哪些方法`removeWaitView`，并`showWaitInView`确保调用方法不会从迭代等待视图的兄弟（waitView 的父视图的子视图）的 for 循环中调用显示/删除等待视图方法。

# azure - 虚拟网络中的虚拟机之间的联网

> ID：14854481
> 
> 赞同：3
> 
> 时间：2013-02-13T13:16:01.070
> 
> 标签：azure, cloud, azure-storage, azure-virtual-machine, azure-virtual-network

我已经在 Azure 上的虚拟网络中的两个 VM ( `testPC01`, )之间设置了文件共享和 SQL Server 实例连接。`testPC02`

问题是我无法通过名称（`testPC01`, `testPC02`）在这些 VM 之间进行连接，而只能通过它们的 IP 地址（`10.0.0.4`, `10.0.0.5`）进行连接。我连名字都ping不通。

我没有摆弄任何网络设置。这些是新的虚拟机。

如何通过名称而不是 IP 解析？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T13:33:09.170

查看类似线程：[Azure VMs Virtual Network inter-communication](https://stackoverflow.com/questions/13995734/azure-vms-virtual-network-inter-communication)

您必须配置自己的 DNS 以进行名称解析。

# wordpress - Cforms II wordpress 插件显示在小部件区域的弹出窗口中

> ID：14854483
> 
> 赞同：0
> 
> 时间：2013-02-13T13:16:05.043
> 
> 标签：wordpress, popup

我无法在侧边栏中的灯箱中显示 cforms II。有没有办法在灯箱中显示 cforms II？

我发现此代码可在页面中显示，但在小部件区域中不起作用。

```
[formlightbox text="some text"]
<!--cforms name="Call Me Back"-->
[/formlightbox] 
```

即使我在页面中使用了此代码。弹出窗口显示但 cforms 不显示

```
<?php echo do_shortcode('[formlightbox text="some text"]<!--cforms name="Call Me Back"--> [/formlightbox]'); ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T13:02:54.973

我也试图完成表单灯箱插件，首先，您正在使用的简码不再支持，因此请访问插件作者网站以获取适用于新版本 1.1.2 的更新简码，我正在使用此简码

> [formlightbox_call title="FORM NAME" class="1362370254262"]FORM NAME[/formlightbox_call] [formlightbox_obj id="1362370254262" style="" onload="false"][/formlightbox_obj]

但结果是灯箱中什么都没有显示....有什么想法吗？？？？？

# r - 如何避免：read.table 截断以 0 开头的数值

> ID：14854485
> 
> 赞同：13
> 
> 时间：2013-02-13T13:16:11.540
> 
> 标签：r, import, read.table, zero-padding

我想`.txt`在 R 中导入一个表（文件）`read.table()`。我表中的一列是一个包含九个数字的 ID - 一些 ID 以 0 开头，另一些以 1 或 2 开头。

R 会截断第一个 0（012345678 变为 12345678），这会导致在使用此 ID 合并另一个表时出现问题。

有人可以给我一个提示如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-13T13:44:31.427

正如本的回答中所说，`colClasses`这是更简单的方法。这是一个例子：

```
read.table(text = 'col1 col2
           0012 0001245',
           head=T,
           colClasses=c('character','numeric'))

  col1 col2
1 0012 1245      ## col1 keep 00 but not col2 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-13T13:25:27.613

一个可重现的示例会很好，但是：使用`colClasses`参数 to`read.table()`指定您希望将此列作为`character`变量读取，而不是`numeric`. 或者`character`在读入它们后将它们重新变为变量，使用`sprintf`前导零填充数字。（前者可能更容易。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-10T18:43:49.183

这是一个 for 循环，用于根据条件向行添加前导零。虽然这是一个事后解决方案（在阅读表格*后*添加前导 0 ），但它对我有用，所以我想分享：

让我们以一列邮政编码为例。所有值都应包含 5 位数字（例如 01234），但 R 会删除前导零（因此 '01234' 变为 '1234'）。您可以使用以下代码将尾随零添加到仅包含 4 个字符的所有单元格：

```
for (i in 1:nrow(df)){
  if(nchar(df$zipCode[i])<5){
    df$zipCode[i]<- paste0('0',df$zipCode[i])
  }
} 
```

# javascript - Handlebars.js：如何在每个嵌套中访问父索引？

> ID：14854491
> 
> 赞同：57
> 
> 时间：2013-02-13T13:17:02.850
> 
> 标签：javascript, handlebars.js

如何在每个循环中访问父 @index 值？

尝试了以下方法：

```
{{#each company}}
{{#each employee}}
  {{../@index}} // how to access company index here?
{{/each}}
{{/each}} 
```

这会导致错误：

> 期待“ID”，得到“数据”

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2014-11-17T02:25:53.213

示例中存在语法错误。正确的语法是`{{@../index}}`.

我们正在研究如何在未来的语言版本中支持这些参数的自定义命名，以便更容易处理。 [https://github.com/wycats/handlebars.js/issues/907](https://github.com/wycats/handlebars.js/issues/907)

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-03-19T17:03:51.470

这对我有用：

```
{{#each company}}
{{setIndex @index}}
{{#each employee}}
  {{../index}}
{{/each}}
{{/each}} 
```

JS：

```
Handlebars.registerHelper('setIndex', function(value){
    this.index = Number(value + 1); //I needed human readable index, not zero based
}); 
```

只要确保该`company`对象没有`index`属性。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2014-12-19T17:39:38.350

**回答：** `{{@../index}}`

来自[Handlebars 文档](http://handlebarsjs.com/builtin_helpers.html)（参见“每个”助手部分的底部）：

*“嵌套`each`块可以通过深度路径访问交互变量。例如，`{{@../index}}`可以使用访问父索引。”*

注意：我使用的是 v1.3，所以它至少有那么旧。

提醒：助手是您最后的最佳选择。9/10 有更好的解决方案。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-01-12T19:15:37.653

Ember v2.2.0 中似乎有一种新语法。我在这里尝试了所有答案，但它们对我不起作用。

我发现有效的是命名父循环的索引和子循环的索引。

```
{{#each parents as |parent parentIndex|}}
    {{parentIndex}}
    {{#each children as |child childIndex|}}
        {{parentIndex}}
        {{childIndex}}
    {{/each}}
{{/each}} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-06-14T18:52:44.200

注册一个 Helper 方法：

```
Handlebars.registerHelper('eachWithIndex', function(cursor, options) {
    var fn = options.fn, inverse = options.inverse;
    var ret = "";
    var idx = -1;
    //console.log(cursor);
    cursor.forEach(function(item){
        idx++;
        console.log(item.index);
        item.index = idx;
        ret+=fn(item);
    });
    return ret;
}); 
```

车把模板：

```
{{#eachWithIndex outer}}
  {{#each inner}}
   {{../index}} // access outer index like this. I used hanlebars V1.3.0
   {{index}} // access inner index
  {{/each}}
{{/eachWithIndex}} 
```

# phpmyadmin - 从一个表字段复制到phpmyadmin 中的另一个表字段？

> ID：14854492
> 
> 赞同：0
> 
> 时间：2013-02-13T13:17:07.387
> 
> 标签：phpmyadmin, copy

使用 phpmyadmin 如何将文本从位于名为 description 的表中的名为 products_folder 的字段复制到名为 products_us 的字段中，该字段位于名为 products_description 的表中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T13:25:16.063

试试这个：

```
INSERT INTO `products_description ` (`products_us `) SELECT `products_folder ` FROM `description ` 
```

# asp.net-web-api - SignalR 的 CORS 问题 - 不允许来源

> ID：14854495
> 
> 赞同：0
> 
> 时间：2013-02-13T13:17:22.140
> 
> 标签：asp.net-web-api, signalr, cors

因此，我已经阅读了有关此问题的所有先前问题，但遵循这些步骤似乎对我不起作用。我收到“Access-Control-Allow-Origin 不允许 Origin *”，但这对我来说没有意义。如果我在 Chrome 自己的选项卡中打开相同的请求，并查看网络选项卡，我会看到以下 CORS 标头完好无损。此外，集线器生成得很好。我正在使用 Web API、.NET 4.5 和 SignalR 的 rc2。我还尝试删除 web.config 中的 Allow-Credentials，但这也无济于事。

```
Access-Control-Allow-Credentials:true
Access-Control-Allow-Headers:x-requested-with,X-CustomAuth,Content-Type,X-Impersonate
Access-Control-Allow-Methods:GET,OPTIONS,PUT,DELETE,HEADER
Access-Control-Allow-Origin:* 
```

我也设置`jQuery.support.cors`为`true`，即使它已经是真的，我使用的是 JQuery 1.9，这是我与服务器和集线器的连接：

```
 jQuery.support.cors = true;
    $.connection.hub.url = 'http://myserver/api/signalr';
    $.connection.hub.start({ transport: 'longPolling', xdomain: true }); 
```

我也试过这个来连接，两者都有同样的问题。

```
 $.connection('http://myserver/api/signalr/echo').start(function () {
      console.log('Connected');

      $.connection.hub.start().done(function() {
        $log.info('Connected to hub.');
      });          
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T15:57:54.750

如果是，则该`*`值不能与`Access-Control-Allow-Origin`标头一起使用。尝试以下任一方法：`Access-Control-Allow-Credentials``true`

1.  完全删除 Access-Control-Allow-Credentials 标头。
2.  `Access-Control-Allow-Origin`将from的值更改为标头`*`的实际值`Origin`。

#1 可能更容易做到，但如果您需要支持 cookie，则需要 #2。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-05T20:21:08.097

根据官方文档，您**不**应该使用**jQuery.support.cors**

> 不要在代码中将 jQuery.support.cors 设置为 true。

官方文档链接：[official doc](https://www.asp.net/signalr/overview/guide-to-the-api/hubs-api-guide-javascript-client)

# jquery - uploadifive 删除文件扩展名

> ID：14854496
> 
> 赞同：0
> 
> 时间：2013-02-13T13:17:24.923
> 
> 标签：jquery

我如何删除uploadifive上的文件名扩展，我不想触及插件的核心，我只需要这样的东西。

> FROM: 'some pic description.jpg' TO: 'some pic'

我不能 overrideEvent 将 html 放入队列中的第一个函数，因此我能够正则表达式文件名。我试过用这个：

```
'overrideEvents' : ['onUpload', 'onUploadComplete', 'onProgress'], 
```

仍然找不到答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T13:44:59.217

我找到了答案:)

[http://www.uploadify.com/documentation/uploadifive/truncatelength/](http://www.uploadify.com/documentation/uploadifive/truncatelength/)

它为你做了所有的工作！

# codeigniter - CodeIgniter 页面缓存异常

> ID：14854497
> 
> 赞同：1
> 
> 时间：2013-02-13T13:17:30.977
> 
> 标签：codeigniter, caching

我喜欢使用[CodeIgniters 页面缓存](http://ellislab.com/codeigniter/user-guide/general/caching.html)。但是我在控制器中有一个视图计数器，例如：

```
$this->db->query("UPDATE tb_product SET popularity=popularity+1 WHERE product_id=".$this->db->escape($this->uri->segment(2)).""); 
```

是否可以使用页面缓存但只运行此查询例外？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T11:20:55.193

是的。你可以尝试实现一个钩子。这必须是“cache_override”钩子。您可以从钩子中进行数据库调用。

[http://ellislab.com/codeigniter/user-guide/general/hooks.html](http://ellislab.com/codeigniter/user-guide/general/hooks.html)

在进行 DB 调用之后，您的钩子方法将不得不调用原始缓存本身。

```
function your_hook( )
{  

    // your DB code here

    // Use some CI globals for this, see /system/core/Codeigniter.php
    if ($OUT->_display_cache($CFG, $URI) == TRUE)
    {
        exit;
    }
} 
```

您可以编写自定义 Output.php 类并覆盖（装饰）原始 _display_cache 方法。将您的 MY_Ouput.php 放在 /application/core 目录中，CI 将自动使用它。

[http://ellislab.com/codeigniter/user-guide/general/core_classes.html](http://ellislab.com/codeigniter/user-guide/general/core_classes.html)

把这样的东西放进去：

```
class MY_Output extends CI_Output
{
    function _display_cache( &$CFG, &$URI )
    {
        // your DB call

        // The original call
        return parent::_display_cache( $CFG, $URI );
    }

} 
```

我自己没有尝试过，但它应该可以帮助你。其中之一可能会起作用。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T13:56:53.193

感谢您的回答，但我已经删除了计数器并编写了一个 cronjob，它将通过 GAPI 从 Google Analytics 获取统计信息。

# android - android.view.InflateException：膨胀类片段时出错

> ID：14854503
> 
> 赞同：0
> 
> 时间：2013-02-13T13:17:46.143
> 
> 标签：android, android-layout, android-fragments, android-viewpager, android-nested-fragment

我收到以下错误：

```
02-13 12:37:05.015: E/AndroidRuntime(8766): FATAL EXCEPTION: main
02-13 12:37:05.015: E/AndroidRuntime(8766): android.view.InflateException: Binary XML file   line #9: Error inflating class fragment
02-13 12:37:05.015: E/AndroidRuntime(8766): at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:704)
...
02-13 12:37:05.015: E/AndroidRuntime(8766): Caused by: java.lang.IllegalArgumentException: Binary XML file line #9: Duplicate id 0x7f05005f, tag null, or parent id 0x0 with another fragment for com.handmark.pulltorefresh.extras.listfragment.PullToRefreshListFragment
02-13 12:37:05.015: E/AndroidRuntime(8766): at android.support.v4.app.FragmentActivity.onCreateView(FragmentActivity.java:285)
02-13 12:37:05.015: E/AndroidRuntime(8766): at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:676)
02-13 12:37:05.015: E/AndroidRuntime(8766): ... 27 more 
```

我正在创建一个带有 actionbar sherlock 的 android 应用程序，在选项卡之间进行水平滑动。对于每个选项卡，我都加载了一个片段，其中一个有问题。在这个片段中，我有一个嵌套片段，这对于下拉刷新列表至关重要。因此，我有以下布局：

```
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/fragment_people_layout"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

<fragment
    android:id="@+id/frag_ptr_list"
    android:name="com.handmark.pulltorefresh.extras.listfragment.PullToRefreshListFragment"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:fastScrollEnabled="true"
    android:drawSelectorOnTop="false"
    android:divider="@android:color/transparent"
    android:layout_margin="10dp" />

<TextView
    android:id="@id/android:empty"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:gravity="center"
    android:text="@string/footer_loading_data" />

</LinearLayout> 
```

以及以下代码片段：

```
public void onActivityCreated(Bundle savedInstanceState)
{
    super.onActivityCreated(savedInstanceState);
    activity = getActivity();
    mPullRefreshListFragment = (PullToRefreshListFragment) 
    activity.getSupportFragmentManager().findFragmentById(R.id.frag_ptr_list);
    ....
} 
```

当我在选项卡之间滑动以及重新绘制片段时，问题就出现了。

只是让您知道，我正在使用支持库 v4。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T13:24:09.457

碎片不能容纳其他碎片。

但 .....

使用当前版本的 Android 支持包（或 API 级别 17 及更高级别的本机片段），您可以通过 getChildFragmentManager() 嵌套片段。请注意，这意味着您需要在 API 级别 11-16 上使用 Fragment 的 Android 支持包版本，因为即使在这些设备上存在原生版本的 Fragment，该版本也没有 getChildFragmentManager()。

# java - 如何在遍历向量时更新向量的元素数组及其值

> ID：14854505
> 
> 赞同：0
> 
> 时间：2013-02-13T13:17:53.283
> 
> 标签：java, arrays, collections, vector

我有一个数组向量

**像这样的**格式****

 **```
[[],[],[],[],[],[],[],[]] , [[],[],[],[],[],[],[],[]], etc... 
```

**例子：**

```
[['admin'],['FD'],['PRS_12121200019'],['0103AR0040N'],['Supplier'],['ST01'],
  ['null'],['ST01'],['PRS_DOOROUTERLH'],['PRS_DOOROUTERLH2']],
[['admin'],['FD'],['PRS_12121200019'],['0103AR0040N'],['Supplier'],['ST01'],
  ['null'],['ST01'],['PRS_DOOROUTERLH'],['PRS_DOOROUTERLH17']], 
```

我们可以设置、删除、重新定位向量的索引，但是如何在遍历向量时更新一个值。

示例：如果我想更新而不是**供应商**到**Inhouse**，这是更好的方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-19T04:09:55.943

要替换向量中的值，您可以使用`set(int i,String s)`.it 替换旧值`vector.elementAt(i)`with `s`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T13:49:36.160

这是在 Vector 对象中将所有**供应商**字符串替换为**Inhouse**的示例代码。

**示例代码：**

```
 Vector<String[]> vector = new Vector<String[]>();
    vector.add( new String[] { "Supplier" } );
    vector.add( new String[] { "123" , "456" } );
    vector.add( new String[] { "123" , "456" } );

    for( String[] array : vector ) {
        for( int i = 0; i < array.length; i++ ) {
            if( "Supplier".equals( array[i] ) ) {
                array[i] = "Inhouse";
            }
        }
    } 
```**

# xml - xml-schema 可以用于定义元数据（使用 xerces）吗？

> ID：14854507
> 
> 赞同：0
> 
> 时间：2013-02-13T13:17:57.247
> 
> 标签：xml, xsd, xerces

说我有一个 xml 文件。现在我的程序所做的取决于“元素”。xml 模式是否可以定义程序应该执行的操作？即以下可能：

```
 <xs:element name="test" hidden=true action=myActionOnTestElement> 
```

然后，当 xerces 的解析器读取名称为“test”的元素时，它还会存储操作以及该元素是“隐藏的”。如果 xerces 不可能做到这一点，那么 XML 解析器是否有可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T22:26:19.200

如果您的目标是定义具有属性的元素，像这样

```
<test hidden="true" action="myActionOnTestElement"/> 
```

那么你应该`<xs:attribute>`在你的模式中使用元素。此方法适用于所有支持 W3C XML 模式的 XML 解析器。此架构元素的规范在这里[http://www.w3.org/TR/2004/REC-xmlschema-1-20041028/#cAttribute_Declarations](http://www.w3.org/TR/2004/REC-xmlschema-1-20041028/#cAttribute_Declarations)

# haproxy - 如果第一个后端返回带有 404 状态码的 http 响应，HAProxy 使用不同的后端

> ID：14854515
> 
> 赞同：6
> 
> 时间：2013-02-13T13:18:53.347
> 
> 标签：haproxy

如果当前 HTTP 请求的第一个（选择循环）后端返回 HTTP 404 响应，HAProxy 是否可以使用另一个后端？

# sql-server - 将 .sdf 文件插入 SQL Server 列

> ID：14854520
> 
> 赞同：0
> 
> 时间：2013-02-13T13:19:05.310
> 
> 标签：sql-server, sql-server-2012, filetable

我尝试使用 blob：

```
INSERT INTO [dbo].[ProbaImage](Id, Podatak) 
    SELECT 
        1,* 
    FROM 
        OPENROWSET(BULK N'C:\Users\Desktop\AUTOTROLEJ.sdf', SINGLE_BLOB) AS Podatak
GO 
```

但它不起作用，它给了我无法读取此文件的错误。我在 SQL Server 2012 中找到了有关文件表的信息，但我不知道如何使用它们。

有人可以建议我插入此`.sdf`文件的方法吗？

# ios - 在哪里以及如何 __bridge

> ID：14854521
> 
> 赞同：40
> 
> 时间：2013-02-13T13:19:09.413
> 
> 标签：ios, objective-c, memory-management, core-graphics, cgpath

我需要一些关于`__bridge`iOS 中的 -ing 的建议。

希望下面的 SSCCE ^¹能比我用文字更好地解释这个问题，但我需要知道如何将 a 转换`void*`为`NSMutableArray*`; `__bridge`应该使用哪种变体（参见代码中的注释）。

阅读了不同的桥梁，我推断我需要`__bridge_transfer`，但后来我收到一个 EXC_BAD_ACCESS`addObject:`

最终，我希望`CGPoints`在`CGPath`after`CGPathApply`被调用后有一个数组。

```
#import <Foundation/Foundation.h>

void _processPathElement(void* info, const CGPathElement* element)
{
    NSMutableArray *array = (/* WHAT BRIDGE HERE */ NSMutableArray*) info;
    switch (element->type)
    {
        case kCGPathElementMoveToPoint:
        case kCGPathElementAddLineToPoint:
        {
            CGPoint point = element->points[0];
            [array addObject:[NSValue valueWithCGPoint:point]];
            break;
        }
        default:
            break;
    }
}

int main(int argc, char *argv[])
{
    @autoreleasepool
    {
        //Create path
        CGMutablePathRef path = CGPathCreateMutable();
        CGPathMoveToPoint(   path, NULL, 0, 0);
        CGPathAddLineToPoint(path, NULL, 1, 0);
        CGPathAddLineToPoint(path, NULL, 1, 1);
        CGPathAddLineToPoint(path, NULL, 0, 1);
        CGPathCloseSubpath(path);

        NSMutableArray *pathPoints = [NSMutableArray array];
        CGPathApply(path, &pathPoints, _processPathElement);

        NSLog(@"Points:%@", pathPoints);
    }
} 
```

[1：[SSCCE](http://sscce.org/)]

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2013-02-13T14:28:46.413

[可以在此处找到](http://clang.llvm.org/docs/AutomaticReferenceCounting.html)有关使用 bridge 关键字的文档。具体来说，我想指出§3.2.4：

> `(__bridge T) op`将操作数强制转换为目标类型 T。如果 T 是可保留对象指针类型，则 op 必须具有不可保留指针类型。如果 T 是不可保留的指针类型，则 op 必须具有可保留的对象指针类型。否则，演员阵容不正确。没有所有权转移，ARC 没有插入保留操作。
> 
> `(__bridge_retained T) op`将必须具有可保留对象指针类型的操作数强制转换为目标类型，该目标类型必须是不可保留指针类型。ARC 保留该值，但需对本地值进行通常的优化，并且接收者负责平衡该 +1。
> 
> `(__bridge_transfer T) op`将必须具有不可保留指针类型的操作数强制转换为目标类型，该目标类型必须是可保留对象指针类型。ARC 将在封闭的完整表达式的末尾释放该值，这取决于对局部值的通常优化。

您传入的指针 ( `void*`) 是不可保留的指针类型，而您的 NSMutableArray 是可保留的指针类型。这直接排除`__bridge_retained`了。所以问题是，到`__bridge`还是到`__bridge_transfer`？

`__bridge_transfer`当您希望从返回已保留的 CF 对象的方法中获得 Objective-C 指针时，通常使用该指针。例如，CFStringCreateWithFormat 会返回一个保留的 CFString，但是如果你想要一个 NSString 来自它，你需要`__bridge_transfer`在它们之间。这将使 ARC 在适当的时候释放 CF 保留的对象。例如，`NSString* str = (__bridge_transfer NSString*) CFStringCreateWithFormat(...);`

你的代码没有这样做，你不需要干涉所有权。您的 main 方法控制其内存管理，并且只是将引用传递给它调用的方法（尽管是间接的，但都在 main 的范围内）。因此，您将使用`__bridge`.

**但是等等，当我使用 __bridge 时，我的代码会出现内存访问错误！？**

啊，这是您发布的代码的问题，与整个桥接讨论无关。您需要将 a 传递`void*`给 CGApplyPath，用于您的处理功能`_processPathElement`。你正在传递的是`NSMutableArray**`.

当你重铸到 时`NSMutableArray*`，你实际上是在投射`NSMutableArray**`. 这将导致臭名昭著的 EXC_BAD_ACCESS。您需要传递指针本身，而不是指向指针的指针。**但是**,`CGPathApply(path, pathPoints, _processPathElement)`行不通，你不能把 a`NSMutableArray*`当作`void*`. 您需要的（具有讽刺意味的是）是一座桥梁。出于与以前相同的原因，您所需要的只是`__bridge`. 请参阅下面的代码，使用正确的桥接并按预期工作：

```
#import <UIKit/UIKit.h>
#import <Foundation/Foundation.h>

void _processPathElement(void* info, const CGPathElement* element)
{
    NSMutableArray *array = (__bridge NSMutableArray*) info;
    switch (element->type)
    {
        case kCGPathElementMoveToPoint:
        case kCGPathElementAddLineToPoint:
        {
            CGPoint point = element->points[0];
            [array addObject:[NSValue valueWithCGPoint:point]];
            break;
        }
        default:
            break;
    }
}

int main(int argc, char *argv[])
{
    @autoreleasepool
    {
        //Create path
        CGMutablePathRef path = CGPathCreateMutable();
        CGPathMoveToPoint(   path, NULL, 0, 0);
        CGPathAddLineToPoint(path, NULL, 1, 0);
        CGPathAddLineToPoint(path, NULL, 1, 1);
        CGPathAddLineToPoint(path, NULL, 0, 1);
        CGPathCloseSubpath(path);

        NSMutableArray *pathPoints = [[NSMutableArray alloc] init];
        CGPathApply(path, (__bridge void*)pathPoints, _processPathElement);

        NSLog(@"Points:%@", pathPoints);
    }
} 
```

这将打印出：

```
Points:(
    "NSPoint: {0, 0}",
    "NSPoint: {1, 0}",
    "NSPoint: {1, 1}",
    "NSPoint: {0, 1}"
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T14:19:21.917

我实际上不确定为什么会这样，但我发现解决方案是：

```
NSMutableArray *array = (__bridge NSMutableArray*) info;

//AND

CGPathApply(path, (__bridge void*)pathPoints, _processPathElement); 
```

如果有人能解释为什么这有效并确认没有（/是）任何内存泄漏，我将不胜感激

# android - 通过 Wi-Fi 从 PC 向 Android 发送大量数据

> ID：14854524
> 
> 赞同：0
> 
> 时间：2013-02-13T13:19:23.330
> 
> 标签：android, tcp, wifi

我开发了通过[Wi-Fi](http://en.wikipedia.org/wiki/Wi-Fi)处理 PC 和 Android 手机之间连接的应用程序。我尝试经常发送大量数据。我使用的 TCP/IP 协议允许我实现低速 - 大约 1 Mbit/s。我发现使用[802.11n](http://en.wikipedia.org/wiki/IEEE_802.11n-2009)标准，我们可以实现高达 150 Mbit/s 的速度。我已将路由器设置为仅使用 802.11n 标准，但没有发现任何改进。

***应该预期什么水平的速度？***我知道部分数据丢失了，但有没有更好的解决方案？有任何想法吗？我在哪里可以找到一些信息来更好地理解这个主题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T14:02:11.857

您应该期望使用 TCP/IP 运行 11n 时性能会更好，在良好的环境中可能会达到 20 Mbit/s。但由于它是无线电，因此媒体在所有空中用户之间共享，因此很难给出一个在任何地方都有效的好答案。

测试网络吞吐量的工具是[Iperf](http://en.wikipedia.org/wiki/Iperf)，可在适用于您的 Android 设备的 Google Market 和[Sourceforge 上](http://sourceforge.net/projects/iperf/)找到。您可以使用它来查看可能影响性能的是您的应用程序还是外部因素。

如果您想进一步调试它，您可以将[Wireshark](http://en.wikipedia.org/wiki/Wireshark)与 Wi-Fi 嗅探卡一起使用，以查看单个数据包/传输速率和重传。

# jsp - 如何将值从主页面传递到模式页面和 servlet？

> ID：14854529
> 
> 赞同：0
> 
> 时间：2013-02-13T13:19:37.497
> 
> 标签：jsp, modal-dialog

我有一个包含一个文本框和按钮的 jsp(page1.jsp)。单击此按钮时，我将打开一个模式窗口（page2.jsp）。即使这包含一个文本框和按钮。单击此按钮后，它将控制到 servlet。

现在我想要page1和page2中文本框的值。我能够检索 servlet 中的 page2 值，但不能检索 page1。

请指导我怎么做？

# java - 自定义 GCM 广播接收器未在几个设备上使用，但可在其他设备上使用

> ID：14854531
> 
> 赞同：1
> 
> 时间：2013-02-13T13:19:39.540
> 
> 标签：java, android, google-cloud-messaging

我创建了一个应用程序，它使用 GCM 从我们的服务器接收通知，正在使用 Google 的 gcm.jar，并有一个 customGCMIntentService 类处理它。我的问题是只有一部手机在呼叫时实际上从 GCM 获得响应（或更可能正确路由响应）`GCMRegistrar.register()`。

我所看到的是 GCMRegistrar（来自 gcm 库）正确地将我的自定义广播接收器设置为 nexus 3 手机上的重试接收器，这是唯一一个有效的，但在其他手机上无效。这让我相信我可能会收到来自 GCM 的回复，但它没有在其他三部手机上得到处理（详情如下）。

```
GCMRegistrar Setting the name of retry receiver class to <My_application_package>.CustomGCMBroadcastReceiver 
```

他们都有一个允许与 GCM 通信的数据连接，他们都有一个活动的 gmail 帐户（他们都有 playstore 工作）。我还毫无问题地在它们上运行了 Google 的 GCM 演示。

**注册码**：

```
 //This is almost identical to how Google's GCM demo does it.
 private void registerOnGCM(){
    checkNotNull(SERVER_URL, "SERVER_URL"); //What it says on the tin
    checkNotNull(SENDER_ID, "SENDER_ID");
    // Make sure the device has the proper dependencies.
    GCMRegistrar.checkDevice(this);
    // Make sure the manifest was properly set - comment out this line
    // while developing the app, then uncomment it when it's ready.
    GCMRegistrar.checkManifest(this);
    /*
    registerReceiver(mHandleMessageReceiver,
            new IntentFilter(HANDLE_MESSAGE));
    */
    final String regId = GCMRegistrar.getRegistrationId(getApplicationContext());
    if (regId.equals("")) {
        // Automatically registers application on startup.
        GCMRegistrar.register(getApplicationContext(), SENDER_ID);
    } 
    else {
        // Device is already registered on GCM, check server.
        if (GCMRegistrar.isRegisteredOnServer(getApplicationContext())) {
            // Skips registration.
            Log.i(TAG, "Already registered");
        } else {
            // Try to register again, but not in the UI thread.
            // It's also necessary to cancel the thread onDestroy(),
            // hence the use of AsyncTask instead of a raw thread.
            final Context context = this;
            mRegisterTask = new AsyncTask<Void, Void, Void>() {
            @Override
            protected Void doInBackground(Void... params) {
                boolean registered = ServerUtilities.register(context, regId);

                if (!registered) {
                    GCMRegistrar.unregister(context);
                }
                return null;
            }

            @Override
            protected void onPostExecute(Void result) {
                mRegisterTask = null;
            }

        };
        mRegisterTask.execute(null, null, null);
    }
} 
```

CustomGCMBroadcastReceiver 的代码无关紧要，GCMIntentService 也无关紧要，因为它们都没有被调用过。问题不在于他们。

**我正在测试的设备**：

*   HTC Desire GSM 运行 CyanogenMod 7
*   运行 Android 4.1.1 的 Google Nexus 3（应用程序适用于这个）
*   运行 Android 4.0.1 的摩托罗拉 T910
*   运行 Android 4.2.6 的三星 Galaxy mini

**清单**：

```
<uses-sdk  android:minSdkVersion="8" android:targetSdkVersion="16" />
<uses-permission android:name="android.permission.INTERNET" />

<!-- App has permission to read/write files on sd card. Used for RSS document -->
<uses-permission android:name = "android.permission.READ_EXTERNAL_STORAGE"/>
<uses-permission android:name = "android.permission.WRITE_EXTERNAL_STORAGE"/>

<!-- GCM connects to Google Services. -->
<uses-permission android:name="android.permission.INTERNET" />

<!-- GCM requires a Google account. -->
<uses-permission android:name="android.permission.GET_ACCOUNTS" />

<!-- Keeps the processor from sleeping when a message is received. -->
<uses-permission android:name="android.permission.WAKE_LOCK" />

<permission
    android:name="<My_package_name>.permission.C2D_MESSAGE"
    android:protectionLevel="signature" />
<uses-permission
    android:name="<My_package_name>.permission.C2D_MESSAGE" />

<!-- This app has permission to register and receive data message. -->
<uses-permission
    android:name="com.google.android.c2dm.permission.RECEIVE" />

<application
    android:allowBackup="true"
    android:theme="@style/AppTheme"
    android:label="@string/app_name">
    <activity
        android:name="<My_package_name>.MasterActivity"
        android:screenOrientation="portrait">
    </activity>

    <activity   android:name="<My_package_name>.WebActivity">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <!--
      BroadcastReceiver that will receive intents from GCM
      services and handle them to the custom IntentService.

      The com.google.android.c2dm.permission.SEND permission is necessary
      so only GCM services can send data messages for the app.
    -->
    <receiver
        android:name="<My_package_name>.CustomGCMBroadcastReceiver"
        android:permission="com.google.android.c2dm.permission.SEND" >
        <intent-filter>
            <!-- Receives the actual messages. -->
            <action android:name="com.google.android.c2dm.intent.RECEIVE" />
            <!-- Receives the registration id. -->
            <action android:name="com.google.android.c2dm.intent.REGISTRATION" />
            <category android:name="<My_package_name>" />
        </intent-filter>
    </receiver>

    <!--
      Application-specific subclass of GCMBaseIntentService that will
      handle received messages.

      By default, it must be named .GCMIntentService, unless the
      application uses a custom BroadcastReceiver that redefines its name.
    -->
    <service    android:name="<My_package_name>.GCMIntentService"
                android:enabled="true"/>
 </application> 
```

可能是我忘记添加的东西。让我知道。

欢迎所有想法。

-德累斯顿先生

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T17:30:28.357

好吧，它似乎已经通过清理、重建然后将其部署到其他设备来自行修复。

为什么从所有手机上删除所有痕迹，然后在调试模式下运行它们不起作用，除了在一部手机上我不知道。

# java - 正则表达式匹配成绩

> ID：14854534
> 
> 赞同：4
> 
> 时间：2013-02-13T13:19:45.110
> 
> 标签：java, regex

我有一个数组

```
String[] grades = new String[]{"D","C-","C","C+","B-","B","B+","A-","A","A+"}; 
```

我想检查一个字符串是否是这些值之一。

我可以遍历数组来完成这个，但我想通过正则表达式来完成。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-13T13:21:21.143

正则表达式相当简单：

```
[A-C][+-]?|D 
```

第一部分说`A`through`C`后面可以跟一个可选的加号或减号；第二部分允许 a`D`本身。

> 我可以遍历数组来完成这个

您也可以使用`contains()`, 来执行此操作而无需循环：

```
if (Arrays.asList(grades).contains(grade)) {
    ...
} 
```

# c++ - CreateSharedMemory 使用情况

> ID：14854538
> 
> 赞同：0
> 
> 时间：2013-02-13T13:19:58.177
> 
> 标签：c++, winapi, ipc, shared-memory

有没有人有[CreateSharedMemory 函数（Windows）](http://msdn.microsoft.com/en-us/library/windows/desktop/aa374778%28v=vs.85%29.aspx)使用的例子？在共享内存客户端/服务器软件场景中，服务器向函数输入的参数只有`MaxSize`和`InitialSize`，那么客户端如何知道共享的内存地址是什么？[CreateFileMapping](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366537%28v=vs.85%29.aspx)解决了这个问题，因为您[可以命名每个文件映射对象](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366551%28v=vs.85%29.aspx)。我知道 Boost 具有类似的功能，但我希望使用原始 Windows API 功能来解决这个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T13:27:11.623

我想您对页面上的“客户端”和“服务器”术语感到困惑。在 LSA（Windows 安全）上下文之外，它似乎可以满足`CreateSharedMemory`您的需求。它没有：该功能仅在 Windows 安全和身份验证上下文中设计和使用。

尽管有这个名字，但它并不是在两个进程之间分配共享内存的（通用）函数。

您需要什么，在进程之间共享内存（通常）由页面文件支持的内存映射文件完成，所以通过`CreateFileMapping`等。存在其他技术，但我建议使用页面文件支持的内存映射文件。

# linux - 从大 tar 球中提取某些文件需要永远

> ID：14854545
> 
> 赞同：3
> 
> 时间：2013-02-13T13:20:22.503
> 
> 标签：linux, extract, tar

我有一个非常大的“tar.gz”存档（~50 GB），我想知道 tar 是否有可能跳过处理 N 个字节或类似的东西，或者至少让 tar 开始从end 而不是从头开始阅读。

我当然可以，`tar xvf archive.tar.gz path/to/file`但是这个命令将永远持续下去，所以我希望找到一种更快的方法来解决它。

谢谢。

# c# - 直接显示减小视频文件大小

> ID：14854551
> 
> 赞同：1
> 
> 时间：2013-02-13T13:20:46.097
> 
> 标签：c#, video, directshow

我正在使用直接显示来捕获视频并将其保存到文件中。我徒劳地试图找到减小最终视频大小的方法，但无法管理。我想知道是否有人可以告诉我我该怎么做：

1.  降低视频的帧率
2.  降低视频质量（甚至降低到 320 x 240）
3.  对视频应用压缩（mpeg？等）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T19:12:17.163

原始视频的大小很大，并且要节省大小的存储空间假设您压缩了视频。您将使用其中一种视频编码器，例如 MPEG-4 AVC (H.264) 或 Windows Media。您通常会在捕获过滤器和多路复用器/文件写入器之间的管道中插入一个额外的过滤器。在过去的多个主题中阅读此内容：

*   [在 C# 中使用像 XVid 这样的视频编解码器](https://stackoverflow.com/questions/11777246/using-video-codecs-like-xvid-in-c-sharp)
*   [DirectShow 中的实时视频编码](https://stackoverflow.com/questions/3167032/real-time-video-encoding-in-directshow)
*   [如何正确构建直接显示图来压缩视频...](http://social.msdn.microsoft.com/Forums/en/windowsdirectshowdevelopment/thread/ae22a924-d61c-4449-b5bd-98f8eede94a4)

# jquery - AJAX（或 AJAX-esque）文件下载

> ID：14854554
> 
> 赞同：3
> 
> 时间：2013-02-13T13:21:06.933
> 
> 标签：jquery, ajax, http, http-headers, download

这是一个以各种不同方式提出的常见问题，我在下面收集了一些链接并解释了它们为什么不起作用。我正在寻找以下问题的完整解决方案。

在我正在开发的 Web 应用程序中，需要下载具有以下要求的 AJAX-esque 文件

1.  用户可以单击链接下载文件，而无需被定向到新页面，将收到一个正常的“另存为..”对话框，我们都习惯于在 Web 浏览器中下载文件
2.  如果由于某种原因服务器无法提供文件，则应调用 javascript 回调。同样，如果服务器成功提供文件
3.  需要能够修改HTTP**请求**头来指定，例如请求中的*Content-Type* HTTP头
4.  支持所有 A 级浏览器

**目前研究的东西：**

一个。[jquery.fileDownload](https://github.com/johnculviner/jquery.fileDownload)通过使用表单提交、隐藏 iframe 和让服务器设置特定 cookie 的组合非常优雅地解决了需求 1、2 和 4。我对这个项目非常熟悉（也为它做出了贡献）。但不支持要求 3，因为 HTML 表单提交和 iframe（此库使用）不允许为请求的服务器资源指定 HTTP 标头。（[jdownloader](http://code.google.com/p/jquery-jdownload/)也使用了类似的 iframe/form 技术，但它也没有解决要求 3）。

湾。可以使用 XMLHttpRequest 从文件中检索二进制数据（针对不同的浏览器（[链接 1](https://stackoverflow.com/questions/1944241/ajax-request-to-download-an-excel-file-is-showing-me-truncated-response)、[链接 2](https://stackoverflow.com/questions/1095102/how-do-i-load-binary-image-data-using-javascript-and-xmlhttprequest)、[链接 3](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/Sending_and_Receiving_Binary_Data)、[链接 4](https://developer.mozilla.org/en-US/docs/Code_snippets/Downloading_Files)、[链接 5](https://stackoverflow.com/questions/1919972/how-do-i-access-xhr-responsebody-for-binary-data-from-javascript-in-ie)、[链接 6](https://gist.github.com/hubgit/742267)、[链接 7](http://shasini.blogspot.co.il/2007/04/downloading-binary-streams-with.html)、[链接 8](http://web.archive.org/web/20071103070418/http://mgran.blogspot.com/2006/08/downloading-binary-streams-with.html)）进行各种黑客攻击。但没有一个满足要求 1\. 二进制数据可以保存在 javascript 变量中，但是无法调用浏览器的“另存为...”对话框来允许用户将此二进制数据保存到硬盘上的文件中

C。[此链接](http://www.html5rocks.com/en/tutorials/file/xhr2/)（在*“下载 + 将文件保存到 HTML5 文件系统”*标题下）具有使用 XHR2 的完整端到端解决方案并满足要求 1、2 和 3。但它的支持很差（使用非常新的 HTML5 FileWriter ）。

有没有完整的解决方案？

***编辑*** 我们有更多的选择 - 我计划测试。也许唯一的选择是通过将所有黑客/解决方案收集在一起来为这个问题开发一个库，以便创建一个通用的解决方案。

1.  根据以下fibertech的解决方案：使用上面的解决方案（b）将文件保存到变量中，然后：

    对于 Internet Explorer：使用 IE 的 execCommand() 保存此数据

    对于其他人：使用[数据uris](https://developer.mozilla.org/en-US/docs/data_URIs)（[链接2](https://stackoverflow.com/questions/833068/how-to-force-save-as-dialog-box-in-firefox-besides-changing-headers)）和<a>标签的HTML5*下载*属性来指定名称（[链接1](https://developer.mozilla.org/en-US/docs/HTML/Element/a#attr-download)，[链接2](http://codebits.glennjones.net/downloadattr/downloadattr.htm)，[链接3](http://updates.html5rocks.com/2011/08/Downloading-resources-in-HTML5-a-download)，[链接4](http://html5-demos.appspot.com/static/a.download.html)）

2.  [此链接](https://stackoverflow.com/questions/3916191/download-data-url-file)提到与使用画布的文件下载能力有关

3.  [下载](https://github.com/dcneiner/Downloadify)（还有[这个链接](http://davidwalsh.name/downloadify)）

4.  一个看似相关的[链接](http://www.html5rocks.com/en/tutorials/workers/basics/#toc-inlineworkers-bloburis)，与网络工作者有关，但正在使用 Blob 和[FileApi](http://www.w3.org/TR/FileAPI/)来生成文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T13:50:10.993

仅 IE 解决方案：

```
function SaveContents(element) {
    if (typeof element == "string")
        element = document.getElementById(element);
    if (element) {
        if (document.execCommand) {
            var oWin = window.open("about:blank", "_blank");
            oWin.document.write(element.value);
            oWin.document.close();
            var success = oWin.document.execCommand('SaveAs', true, element.id)
            oWin.close();
            if (!success)
                alert("Sorry, your browser does not support this feature");
        }
    }
} 
```

所需的 HTML 示例：

```
<textarea id="myText"></textarea><br />
<button type="button" onclick="SaveContents('myText');">Save</button> 
```

这会将给定 textarea 的内容保存到名称等于 textarea 的 ID 的文件中。

至于其他浏览器，你可以阅读：[Does execCommand SaveAs work in Firefox?](https://stackoverflow.com/questions/833015/does-execcommand-saveas-work-in-firefox)

测试用例和工作示例： http: [//jsfiddle.net/YhdSC/1/](http://jsfiddle.net/YhdSC/1/)（仅限 IE..）

# c++ - Lua Wrapper Class - 通过 DLL 向 Lua 公开 c++ 静态方法

> ID：14854555
> 
> 赞同：1
> 
> 时间：2013-02-13T13:21:15.567
> 
> 标签：c++, dll, methods, lua

我终于遇到了一个在这里找不到解决方案的问题。我正在使用在这里[http://lua-users.org/wiki/CppConvenientLuaWrapperClass](http://lua-users.org/wiki/CppConvenientLuaWrapperClass)找到的 Lua Wrapper 类。我们已经能够公开完整的 API 以及更多其他功能，例如串行通信等。

这个 Lua Wrapper 背后的概念是在编译之前公开每个方法，因此当您运行程序时，所有方法都将添加到 Lua 堆栈中，这样您就可以执行它们。现在的想法是构建一种 Dll 来完成这个暴露方法的过程。这样您就不需要发布包含所有公开方法的版本，而是通过多个 dll 文件加载它们。

我试图创建另一个表并在该表中注册其他方法，但是这样，以前公开的方法就停止工作了。

我能想到的另一种方法是创建一个 dll，但在 C 中包含所有需要的方法并将其直接加载到 Lua。但我认为另一种方式会更好。

你能做类似的事情吗？我有什么错误的概念吗？

谢谢

嗯……我现在真的不想改变我们的包装。我想我可以设法做到这一点。我没有为插件函数添加一个新表，而是添加了一个新的子表，它将包含要从 Lua 调用的函数名称和 cClosures。所以最后我们应该有：

```
application.functionName()
application.plugin.functionName() 
```

即使它以这种方式工作，它也会做得很好。现在我想知道在公开要添加到 application[plugin][pluginFunction] 而不是 aplication[pluginFunction] 的函数时我们如何引用 lua_settable？！这是正常功能的公开方式：

```
//mState is a pointer to a Lua_State
lua_pushstring( mState, functionName );

//methodDesc is a pointer to an object that describes the function arguments/returns 
lua_pushlightuserdata( mState, methodDesc );

//exposeMethodProxy is the method that is responsible for conneting lua c-calls to the c-functions
lua_pushcclosure( mState, exposedMethodProxy, 1 );

//mMethodTableIndex is a member variable that contains the index of the table tha hold all exposed functions
lua_settable( mState, mMethodTableIndex ); 
```

关于如何实现将 cclosures 添加到主表（在 mMethodTableIndex）而不作为 mainTable[functionName] 而是在 maintable[plugin][functionNane] 的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T15:45:19.090

我不确定，你很清楚你想做什么。扩展 lua 的一种典型方法是使用单一方法编写 DLL，该方法使用 Lua API 来注册 C++ 类型和 C 函数。为了方便地绑定 C++ 函数和类，您可以使用[LuaBridge](https://github.com/vinniefalco/LuaBridge)。这种绑定的一个例子在这里：[https ://github.com/d-led/xerceslua](https://github.com/d-led/xerceslua)

xerceslua 模块的 DLL 的头文件只包含一个函数：

```
#include <lua.hpp>
void register_xerceslua (lua_State* L); 
```

在实现内部 LuaBridge 用于绑定到 C++：

```
#include "xerceslua_lib.h"

#include <lua.hpp>
#include <LuaBridge.h>

void register_xerceslua (lua_State* L) {
...
luabridge::getGlobalNamespace(L)
    .beginNamespace("xerces")
    .addVariable("version",&version,false)
... 
```

在 Lua 中，您可以访问公开的 C++ API：

```
assert(require 'xerceslua')

local parser=xerces.XercesDOMParser()
parser:loadGrammar("Employee.dtd",xerces.GrammarType.DTDGrammarType) 
```

您可以将 Lua 用作嵌入式脚本语言，您可以[在软件](http://csl.name/lua/)中执行 lua ，也可以将其用作可扩展的脚本语言，使用上面显示的方法对其进行扩展。两者都是有效的，但你必须考虑你到底想要做什么。

# php - 在 php 或 jquery 中查找从特定字母开始的名称集

> ID：14854556
> 
> 赞同：-2
> 
> 时间：2013-02-13T13:21:16.223
> 
> 标签：php, jquery, mysql, sql, database

我正在创建一个社交网站，我想在其中向特定的人发送消息，但是当我从数据库（Mysql）键入第一个输入字母时，我希望列表应该出现在我面前的所有名字

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T13:23:48.793

在 MySQL 中，您可以`%`为此使用 char：

```
SELECT field FROM table WHERE field LIKE 'a%; 
```

（选择所有以“a”开头的字段，跟随随机数量的随机字符）

更多信息：[http ://dev.mysql.com/doc/refman/5.0/en/string-comparison-functions.html](http://dev.mysql.com/doc/refman/5.0/en/string-comparison-functions.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T13:31:59.993

你的意思是只获取一个特定的字母，还是一组特定的字母。

如果只有一个字母

```
select * from table where field like 'a%' 
```

如果您想使用字母表（字母列表）

```
select * from table where substring(field, 1, 1) IN ('a', 'b', 'c', 'd') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T13:23:57.763

您需要将 like 函数与通配符一起使用

[在这里](https://stackoverflow.com/questions/1951320/find-all-the-name-using-mysql-query-which-start-with-the-letter-a)看到这个

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T13:24:16.577

MySQL：

```
like 'a%' 
```

PostgreSQL

```
ilike 'a%' 
```

# java - 在 Java 货币表示中，使用长/短尾数/指数模式而不是双/epsilon 模式的优缺点是什么

> ID：14854562
> 
> 赞同：2
> 
> 时间：2013-02-13T13:21:32.353
> 
> 标签：java, floating-point, currency

让我首先说明对于我们正在开发的高性能应用程序类型，BigDecimal 的速度慢得令人无法接受。这不能妥协。

在我们的领域中，我们将以不同的精度表示高达 100,000,000 左右的值（在我们迄今为止发现的最深奥的情况下，这可能是小数点后六位）。

鉴于此，我看到了两种以任意精度表示货币信息的方法。第一种是遵循类似于[JSR-354](http://java.net/projects/javamoney/pages/Implementation)中描述的模式，其中 long 表示值的尾数，而 short（或 int）表示指数。在这种情况下，值 12345.6789 将在内部表示为

```
long mantissa = 123456789L;
short exponent = -4; 
```

有了这个，我们可以以我们选择的任何精度表示 18 个数字（9223372036854775807 是 19 个数字）

第二种是使用 double 来表示值，并使用 epsilon 来舍入因对浮点数执行计算而引入的任何错误。根据我对[每个计算机科学家应该了解的浮点运算知识](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)和一些实验的理解，我相信我们可以以任何选择的精度表示 17 个数字。如果我们使用固定的 epsilon，我们可以按照我们预期的最​​多六位小数的要求表示高达 99999999999.999999 的值，我们的 epsilon 能够舍入任何引入的错误。

* * *

我不确定这两种模式中的任何一种都可以被认为是我们工作领域的“最佳”模式。

如果我们需要对两个具有不同精度的值执行操作（这将是必需的），多/空模式需要我们实现一些位置移动逻辑。我认为，但尚未证实，这将使它比在某些操作中使用 double/epsilon 慢。另一方面，使用 double/epsilon 会在每次计算中引入少量开销来执行舍入。

如果需要，两者都可以扩展以提供更多位数 - JSR-354 提到了一个 long/long/int 实现，它以任意精度提供多达 37 位数字。[本文](http://web.mit.edu/tabbott/Public/quaddouble-debian/qd-2.3.4-old/docs/qd.pdf)描述了 double-double 和 quad-double 类型的 C++ 实现。

我一直无法找到任何关于其中一个的优点/缺点的讨论，没有任何特别的理由没有立即下降到“从不使用浮点数作为货币” - 如果性能不是主要的，我同意这个口头禅担心，但在这种情况下，我不太确定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-07T19:26:27.507

我建议使用 a`long`和 an `int`，`long`代表整数单位`int`的数量，代表十亿分之一的数量。这样的表示应该相当容易使用（特别是因为添加`billionths`两个数字的部分的结果不会溢出）并且大大优于任何一种比`double`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T13:47:08.967

> 我不确定这两种模式中的任何一种都可以被认为是我们工作领域的“最佳”模式。

好吧，您还没有提到域是什么，因此很难对此发表评论。

然而，许多与财务相关的系统都受一般会计规则的约束。这些都清楚地说明了应该如何进行财务计算，并且浮点是不可接受的。

如果您的域包含在会计规则中，那么使用浮点确实不是一种选择。

如果不是，那么您需要进行数学分析以确定浮点固有的不精确性是否会对计算结果产生影响。简单地使用更宽的浮点类型并不是一个好的答案……除非您已经“完成了数学运算”以对计算结果设置错误界限。

或者避免分析，只使用缩放`long`或`BigDecimal`. （但请注意，缩放`long`时您需要考虑上溢/下溢的问题。）

* * *

如果您已经“完成了数学计算”并且您不受会计规则（或某些此类规则）的限制，那么：

*   浮点类型将更易于使用，因为您在进行算术运算时不必弄乱比例因子。（即使比例因子是隐含的，也需要考虑在内……）

*   浮点类型将“仅适用于”标准库方法；例如`Math`静态方法。

*   浮点代码将更具可读性，并且不易出现编程逻辑错误。

*   浮点类型是不精确的......但如果你*正确地*完成了数学运算，那就没关系了。（完整的数学分析将告诉您在计算过程中错误是否会累积到导致结果不准确的程度。）

性能……很难说。这可能取决于实际计算。我的建议是对关键计算进行双向编码并仔细对它们进行基准测试。

# android - 以编程方式创建 LoginButton 并设置 View 属性

> ID：14854565
> 
> 赞同：0
> 
> 时间：2013-02-13T13:21:36.980
> 
> 标签：android, actionbarsherlock, facebook-android-sdk

我想以编程方式创建 LoginButton，因为我将它放在 ActionBarSherlock ActionBar 中。

我可以将`<com.facebook.widget.LoginButton>`定义放在布局文件中，然后手动膨胀。

但是，当我只使用 : 时`new LoginButton(this)`，它会显示为“登录”文本，如下所示：

![ActionBarSherlock 上的 Facebook 登录按钮](../Images/376ecc16346d6b46df24a7276f774fe7.png)

是因为它缺少`facebook:confirm_logout`and`facebook:fetch_user_info`属性吗？还是其他属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T13:34:07.920

您可以创建自定义按钮并向该按钮添加点击侦听器事件，点击侦听器检查您的 Facebook 会话

```
private void onClickLogin() {
    Session session = Session.getActiveSession();
    if (!session.isOpened() && !session.isClosed()) {
        session.openForRead(new Session.OpenRequest(this).setCallback(statusCallback));
    } else {
        Session.openActiveSession(this, true, statusCallback);
    }
}

private void onClickLogout() {
    Session session = Session.getActiveSession();
    if (!session.isClosed()) {
        session.closeAndClearTokenInformation();
    }
} 
```

# iphone - 试图触摸我标记顶部的 CALayer

> ID：14854570
> 
> 赞同：1
> 
> 时间：2013-02-13T13:21:46.963
> 
> 标签：iphone, ios, objective-c, cocoa-touch

我的 mapView 上面有注释，有些注释上面有额外`CALayer`的。
问题是上面有这些层的注释不会传递触摸，而是视图检测到一个 CALayer 被点击了。

我将需要一个解决方案来使这些 CALayers “对触摸透明”，以便我可以分辨出哪个注释被点击了。

*   有没有办法以某种方式使最顶层的 CALayers 对触摸透明？
*   是否有另一种方法可以检测被挖掘的底层注释？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T17:34:04.720

尝试在您的 Layer 子类中覆盖这些

```
- (CALayer *)hitTest:(CGPoint)thePoint
{
    return nil;
} 
```

或这个

```
- (BOOL)containsPoint:(CGPoint)thePoint
{
   return NO;
} 
```

它可能会阻止图层捕捉触摸

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T09:43:09.113

阻塞的 CALayer 位于以前的 CALayer 之上，它只需要访问祖先 - `theBlockingLayer.superlayer`。通过检查祖先，我得到了我需要的一切

# php - 自定义 preg_replace 函数有更有效的方法吗？

> ID：14854571
> 
> 赞同：1
> 
> 时间：2013-02-13T13:21:47.590
> 
> 标签：php, mysql, preg-replace, security, performance

我计划在从我的 mysql 表中获取数据并将其打印为 html 时使用下面的自定义函数。由于 htmlspecialchars() 将标签转换为 html 实体，因此我将它们（p、br、strong）重新转换为标签。

我的问题是：它是否足够有效或者是否有任何其他更短或更有效的方法来实现这一目标？如果您知道，请至少用关键字指导我吗？我可以在 php.net 和这个站点中寻找他的详细信息。

感谢和问候

```
 function safe_output_from_mysql($safe_echo_to_html)
{
    $safe_echo_to_html = mb_convert_encoding($safe_echo_to_html, 'UTF-8', mb_detect_encoding($safe_echo_to_html));
    $safe_safe_echo_to_html = htmlspecialchars($safe_echo_to_html, ENT_QUOTES, "UTF-8");
    $safe_echo_to_html = preg_replace("&lt;br /&gt;","<br />",$safe_echo_to_html);
    $safe_echo_to_html = preg_replace("&lt;p&gt;","<p>",$safe_echo_to_html);
    $safe_echo_to_html = preg_replace("&lt;/p&gt;","</p>",$safe_echo_to_html);
    $safe_echo_to_html = preg_replace("&lt;strong&gt;","<strong>",$safe_echo_to_html);
    $safe_echo_to_html = preg_replace("&lt;/strong&gt;","</strong>",$safe_echo_to_html);
    return $safe_echo_to_html;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T13:33:44.407

htmlspecialchars_decode：[http ://www.php.net/manual/en/function.htmlspecialchars-decode.php](http://www.php.net/manual/en/function.htmlspecialchars-decode.php)

此函数与 htmlspecialchars() 相反。它将特殊的 HTML 实体转换回字符。

```
$str = "<p>this -&gt; &quot;</p>\n";

echo htmlspecialchars_decode($str); 
```

上面的示例将输出：

```
<p>this -> "</p> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T13:35:39.027

请看函数 htmlspecialchars_decode($str); 功能。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-13T13:55:37.933

无需多次调用 preg_replace() 。您可以使用单个模式来匹配所有所需的标签：

```
preg_replace('/&lt;\s*(\/?(?:strong|p|br)\s*\/?)&gt;/i', '<\1>', $s); 
```

当然，我假设您实际上打算使用正则表达式进行匹配。如果搜索字符串是纯文本，则 strtr() 更有效。

# python - 如何将 pandas 配置为使用一个 numpy.nan，而不是多个唯一的 float('nan')s？

> ID：14854573
> 
> 赞同：1
> 
> 时间：2013-02-13T13:21:55.137
> 
> 标签：python, numpy, pandas

有没有办法将 pandas 配置`numpy.nan`为它的 NaN 常量，或者至少是一个模块全局常量`pandas.nan = float('nan')`，而不是[***它需要代表的每个 NaN***](https://stackoverflow.com/questions/14846147)[***的全新且唯一的？`float('nan')`***](https://stackoverflow.com/questions/14846147)

（或者，是否有任何理由*不*使用单个全局唯一的 NaN 常数，这样`numpy`做的方式？）

# android - 我似乎无法确定此 Web 服务是否正在获取从 Android 发送的 JSON 对象

> ID：14854575
> 
> 赞同：0
> 
> 时间：2013-02-13T13:22:00.257
> 
> 标签：android, json, web-services, httpresponse

我有一个 android 应用程序，它将 JSON 信息发送到 web 服务以验证信息。我使用 Kate 作为网络服务的编辑器。JSON 和 php webservices 的概念对我来说是新的。我通常用java编写代码。

```
 JSONObject jsonObject = new JSONObject();

    String userID = "";

    HttpClient httpClient = new DefaultHttpClient();
    HttpPost httpPost = new HttpPost(loginURI);
    HttpParams httpParams = new BasicHttpParams();
    HttpConnectionParams.setConnectionTimeout(httpParams, 10000);
    HttpConnectionParams.setSoTimeout(httpParams,10000);

    try {

        jsonObject.put("username", username);
        Log.i("username", jsonObject.toString());
        jsonObject.put("password", password);
        Log.i("password", jsonObject.toString());

        StringEntity stringEntity = new StringEntity(jsonObject.toString());
        stringEntity.setContentEncoding(new BasicHeader(HTTP.CONTENT_TYPE, "application/json"));
        httpPost.setEntity(stringEntity);
        HttpResponse httpResponse = httpClient.execute(httpPost);

        HttpEntity entity = httpResponse.getEntity();

        if (entity != null) {
            userID = EntityUtils.toString(httpResponse.getEntity());
            Log.i("Read from server", userID);
         }

    }catch (IOException e){
        Log.e("Login_Issue", e.toString());
    }catch (JSONException e) {
        e.printStackTrace();  
    }

    return userID;
} 
```

我在网上找到了 StringEntity 代码，并认为它会起作用。我不明白 HttpPost 的 StringEntity 的用途。

这是我用 php 编写的 web 服务。

```
include('dbconnect.php'); 

$tablename = 'users';

//username and password sent from android
$username=$_POST['myusername'];
$password=$_POST['mypassword'];

//protecting mysql injection
$username = stripslashes($username);
$password = stripslashes($password);
$username = mysql_real_escape_string($username);
$password = mysql_real_escape_string($password);

#$array = array($username,$password);
$sql = "SELECT first_name FROM $tablename WHERE u_username='$username' AND    u_password=MD5('$password')"; 
//Querying the database
$result=mysql_query($sql);

if(!$result){
   die(mysql_error();
}

//If found, number of rows must be 1
if((mysql_num_rows($result))==1){

//creating session
session_register("$username");
session_register("$password");

print true;
}else{
print false;
}

mysql_close(); 
```

我不太确定“用户名”和“密码”是否从 android 应用程序正确发送到 web 服务。我怎样才能验证这一点？Web 服务和 Java 代码是否编写得很好，可以以 JSON 格式发送信息？

当我在浏览器上访问网络服务时，出现以下错误： Parse error: parse error in E:\wamp\www\mobile.dcl.mu\webserver\login.php on line 24

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T13:32:47.293

你试图咬掉太多。它应该是 6 个不同的问题（或者只是花钱请人为你编写脚本，或者花一些时间单独学习这些技术）。首先要解决的两件事：

*   **修复解析错误！**就好像您有一个无法编译的 Java 源代码。错误是您在之后忘记了结束括号`die (mysql_error();`
*   **不，无论如何它都行不通。**您将正文中的数据发送为`application/json`，并尝试将其读取为 url 编码的形式。决定你想要哪个，寻求帮助。
*   删除stripslashes。它不会增加任何安全性，并且如果有人在她的密码中使用斜线，则会导致错误。除非您打开了magic_quotes，否则您不应该这样做。

既然你这么早就犯了三个非常基本的错误，我几乎可以肯定还有很多很多需要解决的问题。除了为您重写整个内容或发送一些有关 PHP 编程和 Web 应用程序编程的一般链接之外，我认为没有其他方法可以帮助您。如果您设法拆分问题，孤立地测试事物并提出更多问题，那么可能会有希望。

**更新**

如果您决定围绕 JSON 进行标准化，PHP 文件中的一般模式将是：

```
// get the body of the HTTP request (that's the "http entity")
$body = file_get_contents('php://input');

// translate JSON into ordinary PHP array:
$entity = json_decode($test, true);

// Now you can read parts of it as if you read an array;
// the data may be nested and will mirror exactly your JSONObject:

$username=$entity['myusername'];
$password=$entity['mypassword']; 
```

[是的，那是我乞求赞成:-)]

[而且我认为您的 Java 代码中存在更多问题，但一次只有一件事]

# jquery - Jquery ajax表单提交两次

> ID：14854578
> 
> 赞同：2
> 
> 时间：2013-02-13T13:22:17.057
> 
> 标签：jquery, ajax, double-submit-problem

我在提交两次 ajax 表单时遇到问题。我已经阅读了许多论坛并尝试删除 document.ready 功能。试图解开我的表格 - 这一切都打破了。它是一个图像上传表单。用户上传文件后，他们可以选择上传另一个文件。然后上传两次（发出两次警报）。

我把我的javascript放在这里-http: [//pastebin.com/ryQr5E9e](http://pastebin.com/ryQr5E9e)

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T13:50:29.003

你不需要写这行 $(this).ajaxSubmit(options); 在第 24 行。单击提交按钮时，此表单自动提交。

# jquery - 格式化程序选择不适用于带有 jqGrid-v4.4.1 的 FilterToolBar

> ID：14854579
> 
> 赞同：0
> 
> 时间：2013-02-13T13:22:17.843
> 
> 标签：jquery, jqgrid

我一直在使用 jqGrid v4.0，它运行良好，但自从我升级到 jqGrid v4.4.1 后，FilterTolBar 不再显示选择字段。

这是我的代码：

```
<script type="text/javascript">
$(function() {
    var grid = $("#grid_container");
    grid.jqGrid({
        url:'index.php?getData=xml&',
        datatype: "xml",
        colNames:['id', 'user','sid', 'Status'],
        colModel:[
            {name:'id', index:'id', width:150, hidden:true},
            {name:'user', index:'user', width:150 , stype:'select', editoptions:{value: "Jhon:Jhon;Adam:Adam"}, searchoptions:{sopt:['cn']}},
            {name:'sid', index:'sid', width:65 },
            {name:'status', index:'status', width:110 },
        ],
        rowNum:20,
        rowList:[10,20,100],
        pager:'#grid_pager',
        sortname: 'user',
        sortorder: 'desc',
        height:'100%'
    })
    .jqGrid('filterToolbar' ,{searchOnEnter : true});

}); 
```

谢谢你的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T13:59:11.450

jqGrid 的当前版本是 4.4.4。如果您必须使用旧的，您可以尝试`value`不仅在 中包含相同的内容`editoptions`，还可以在其中包含相同的内容`searchoptions`。如果使用`filterToolbar`，建议添加带有空值的附加值，专门用于搜索。它将允许不过滤列。所以`user`列的定义可能如下所示

```
{ name: 'user', stype: 'select',
    editoptions: { value: "Jhon:Jhon;Adam:Adam" },
    searchoptions: { sopt: ['eq'], value: ":Any;Jhon:Jhon;Adam:Adam" } } 
```

您应该考虑删除隐藏`id`列，因为如果您正确填写数据（请参阅[文档](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aretrieving_data#xml_data)`id`），将根据输入数据的属性分配行（`<tr>`网格元素）的属性。如果您不使用数据编辑，您可以删除并仅使用. 我强烈建议您使用而不是for 选择。will的使用不允许您在一个选择中使用,和等选项。如果用户将同时选择两者并将被选择。如果用户选择然后树选项，将被选中。所以 jqGrid 不会像用户期望的那样工作。`id``editoptions``searchoptions``"eq"``"cn"``"cn"``"a"``"ab"``"abc"``"ab"``"ab"``"abc"``"a"``"a"``"ab"``"abc"`

我建议您另外包括`gridview: true`用于提高性能的所有网格。在大多数用`autoencode: true`例中也需要使用 。

# ubuntu - Ubuntu scp 到外部硬盘驱动器

> ID：14854580
> 
> 赞同：-1
> 
> 时间：2013-02-13T13:22:18.287
> 
> 标签：ubuntu, backup, external, media, scp

我有一个名为 MyDisk 的外部硬盘驱动器 - 我还运行一个命令将另一个服务器的文件夹 scp 到我的外部硬盘驱动器。问题是 - 我的 scp 将备份下载到文件夹 /media/MyDisk ，但这会占用主硬盘上的硬盘空间。

我需要能够将这些直接写入硬盘驱动器而无需下载到 /media/MyDisk （因为这本质上就像将文件下载到 /home/myuser 或其他本地文件夹）

当我直接查看 MyDisk 时，我会看到我的备份，但即使我弹出驱动器并查看 /media/MyDisk - 备份也在那里。

是否可以直接将它们下载到 MyDisk 而不涉及 /media/ 文件夹？我注意到，当您想更改终端中的目录时，您会通过 cd /media/MyDisk 但有没有办法避免使用这个“本地”文件夹？

真的很困惑，任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T14:01:30.017

您是否在安装了外部驱动器和未安装外部驱动器的情况下都执行了 scp？安装了外部驱动器后，scp 将写入 /media/MyDisk，此时安装了外部驱动器。如果随后移除了外部驱动器并再次运行 scp，则文件将作为根文件系统的一部分写入 /media/MyDisk。

# ios - 在 iPhone sdk 中使用 NSPredicate 从 NSMutableArray 获取不同的实体对象

> ID：14854581
> 
> 赞同：5
> 
> 时间：2013-02-13T13:22:21.383
> 
> 标签：ios, objective-c, nsmutablearray

我有一个`NSMutableArray`以实体类对象作为其对象的对象。现在我想从中删除不同的对象。考虑以下示例

```
Entity *entity = [[Entity alloc] init]; 
entity.iUserId = 1;
entity.iUserName = @"Giri"
[arr addObject:entity];

Entity *entity = [[Entity alloc] init]; 
entity.iUserId = 2;
entity.iUserName = @"Sunil"
[arr addObject:entity];

Entity *entity = [[Entity alloc] init]; 
entity.iUserId = 3;
entity.iUserName = @"Giri"
[arr addObject:entity]; 
```

`Array`现在，通过删除重复的 iUserName，我只想要两个对象。我知道迭代的方式，但我想要它而不像`predicate`或其他方式那样迭代它。如果有人知道，请帮助我。我曾尝试使用`[arr valueForKeyPath:@"distinctUnionOfObjects.iUsername"];`，但它没有返回完整的对象。

*这个问题与之前提出的问题完全不同。先前提出的问题是获取不同的对象是正确的，但它们使用循环&我不想要这个。我希望它来自`NSPredicate`或任何其他避免循环的简单选项。*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T14:31:32.160

**编辑**：如果不手动循环数组并建立一个新数组，您将无法做您想做的事情。下面的答案不起作用，因为它假设最多只有两个重复项。

```
NSMutableArray *filteredArray = [NSMutableArray array];

for (Entity *entity in arr)
{
    BOOL hasDuplicate = [[filteredArray filteredArrayUsingPredicate:[NSPredicate predicateWithFormat:@"iUserName == %@", entity.iUserName]] count] > 0;

    if (!hasDuplicate)
    {
        [filteredArray addObject:entity];
    }
} 
```

这将在构建过滤数组时查找重复项。

**开始原始答案**

您不能使用 an ，`NSSet`因为`Entity`实例必须返回`NSOrderedSame`in `compareTo:`，这不是一个好主意，因为您不应该使用名称作为唯一标识符。

您可以使用谓词，但它们仍会在一段`O(n^2)`时间内循环遍历数组，而无需进行一些优化。

```
NSArray *filteredArray = [arr filteredArrayUsingPredicate:[NSPredicate predicateWithBlock:^BOOL(Entity *evaluatedObject, NSDictionary *bindings) {
    return [[arr filteredArrayUsingPredicate:[NSPredicate predicateWithFormat:@"iUserName == %@", evaluatedObject.iUserName]] count] > 1;
}]]; 
```

那会很好的。`iUserName`您可以通过首先按属性对数组进行排序并对排序后的数组进行线性扫描（在看到第一个重复项时停止）来使其更快。如果您要处理小样本量（例如，不到一万左右），那将是很多工作。这可能不值得你花时间，所以只需使用上面的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T14:19:26.103

那么你有几个选择（我能想到的）。

1.  使用 NSSet 而不是 NSArray。
2.  使用 for 循环（但您不想遍历数组）
3.  在将名称添加到数组之前，使用谓词搜索 iUserName 查看名称是否存在。

就像是：

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"iUserName == 'Giri'"];
NSArray *searchArray = [arr filterUsingPredicate:predicate]; 
```

# php - 带有多维数组的Javascript

> ID：14854585
> 
> 赞同：1
> 
> 时间：2013-02-13T13:22:46.543
> 
> 标签：php, javascript

我的多维数组有问题。我正在尝试通过 AJAX 插入一个元素。

我从表中获取数据并将其发送到 PHP 文件，该文件旨在打印结果，但它打印的数据不正确。

我的 HTML 表：

```
<table id="mytable">
   <tr>
       <td>first</td>
       <td>second</td>
       <td>third</td>
   </tr>
   <tr>
       <td>fourth</td>
       <td>fifth</td>
       <td>sixth</td>
   </tr>
</table> 
```

这是我的Javascript：

```
for(i=0; i<=length; i++){  
    for(j=0;j<width;j++){

    //inside of html table grab cell 1x1
            data = document.getElementById("mytable").rows[i].cells[j].innerHTML;

            //define the Array 
            export_table[i]= new Array;
            export_table[i][j] = data;
    }
} 
```

我的 processdata.php 中的 PHP：

```
print_r($_POST) 
```

我看到的问题是 PHP 打印：

```
Array
        (
            [0] => ,,first
            [1] => ,,,second
        ) 
```

但我真的需要它来打印：

```
Array
        (
            [0] => Array
                              (
                                 [0] => "first"
                                 [1] => "second"
                                 [2] => "third"
                              )
            [1] =>  Array
                              (
                                 [0] => "fourth"
                                 [1] => "fifth"
                                 [2] => "sixth"
                              )
        ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T13:26:13.263

从我从您的 Javascript 中可以看出，您似乎正在将 Javascript 数组变量发送到 PHP。
如果这是真的，那么数组值将无法正确发送，因为您无法将数组和对象等高级数据类型传递给 PHP`$_POST`和`$_GET`查询。
您可能需要将其作为序列化字符串发送，然后`explode()`将 PHP 中的数据移回 PHP 数组变量中。

或者你可以试试这个：

```
for(i=0; i<=length; i++){      
       //The first MultiDimensional Array
        export_table[i]= new Array;
        for(j=0;j<width;j++){
        //grab tables cell 1x1
                data = document.getElementById("mytable").rows[i].cells[j].innerHTML;
               //insert 'data' into 2nd dimentional array
                export_table[i][j] = data;
        }
    } 
```

它应该以以下格式返回值：

```
Array
(
    [tab] => Array
        (
            [0] => first,second,third
            [1] => fourth,fifth,sixth
        )

) 
```

现在 PHP 可以使用 explode 将每个数组项移动到自己的数组中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T13:27:30.400

这可能会解决它。

```
for(i=0; i<=length; i++){  

    export_table[i]= new Array; // this line was misplaced.

    for(j=0;j<width;j++){
        data = document.getElementById("mytable").rows[i].cells[j].innerHTML;
        export_table[i][j] = data;
    }
} 
```

但我对你的工作流程感到困惑。这些数据来自哪里，您需要从客户端以表格格式将其发送回服务器？

# android - 活动启动时出现空指针异常

> ID：14854586
> 
> 赞同：0
> 
> 时间：2013-02-13T13:22:47.630
> 
> 标签：android, nullpointerexception, bin, dex

我之前在完美运行的应用程序中出现错误。此处显示的快照是在我清理项目之后出现的。据我所知，android 代码完全正确。

```
 package com.tmresponseportal;

 import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.Menu;
 import android.view.View;
 import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;
import android.widget.Toast;

public class Client1 extends Activity {
TextView text1,tvforpass;
EditText tbid,tbpwd;
Button bsubmit,bclose;
Emailval el = new Emailval();

public void Intentstr() {
    // TODO Auto-generated method stub
    Intent i1 = new Intent();
    i1.setClass(Client1.this,Clwelcome2.class);
    startActivity(i1);

}

public void Intent_start2() {
    // TODO Auto-generated method stub
    Intent i2 = new Intent();
    i2.setClass(Client1.this,Forpass.class);
    startActivity(i2);
}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_client1);

    text1 = (TextView)findViewById(R.id.text1);
    text1.setSelected(true);
    tbid = (EditText)findViewById(R.id.tbid);
    tbpwd = (EditText)findViewById(R.id.tbpwd);
    bsubmit = (Button)findViewById(R.id.bsubmit);
    bclose = (Button)findViewById(R.id.bclose);
    tvforpass = (TextView)findViewById(R.id.tvforpass);

    tvforpass.setOnClickListener(new OnClickListener() {

    bclose.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub

             finish();
                System.exit(0);
        }
    });
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_client1, menu);
    return true;
} 
```

}

当我尝试运行或调试它时，应用程序强制关闭。它甚至不会启动！logcat 显示空指针异常。

我认为该错误与 bin>dexedlib 或构建路径有关。

![这是logcat img](../Images/b63da33c0c9f7ce0886c0323e287bcdd.png)

有没有人对此有任何想法。任何想法都非常感谢。

提前致谢。！

[这是图像。](https://i.stack.imgur.com/bVdxj.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T13:27:20.170

您的项目有一些库错误，

转到属性，然后修复您的 java 构建路径，并检查您是否正在使用任何库项目，它应该与您的主项目位于同一位置

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T13:27:35.250

检查缺少的库。修复项目属性并再次清理它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T06:10:13.257

好吧，我自己正在回答我的愚蠢问题！
库 annotations-3e4e92ba3f3a5427576379deacae2306-e9d0b35cdf8dc6a314b668efa54277b9.jar 以某种方式被删除。

我把它恢复了，它工作了。

要检索，右键单击项目>恢复本地历史记录>以及我想要的库。

完毕 ：）

# python - 检索python opencv中的伸长特征，应该使用什么样的时刻？

> ID：14854592
> 
> 赞同：4
> 
> 时间：2013-02-13T13:23:14.280
> 
> 标签：python, opencv, image-processing, contour, feature-extraction

如何计算 python opencv 中的第一和第二时刻并获得形状伸长特征？

我不太确定伸长率的定义，我发现：“不太常见的伸长率形状因子被定义为粒子围绕其主轴的两个二阶矩之比的平方根”（参考：[http：/ /en.wikipedia.org/wiki/Shape_factor_%28image_analysis_and_microscopy%29#Elongation_shape_factor](http://en.wikipedia.org/wiki/Shape_factor_%28image_analysis_and_microscopy%29#Elongation_shape_factor)）

```
f_elong = sqrt (i2/i1) 
```

根据定义，是 i2 和 i1 空间矩、中心矩还是归一化中心矩（[http://opencv.willowgarage.com/documentation/cpp/imgproc_structural_analysis_and_shape_descriptors.html](http://opencv.willowgarage.com/documentation/cpp/imgproc_structural_analysis_and_shape_descriptors.html)）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T01:14:21.197

计算伸长率的方法不止一种，请参阅论文“从形状边界测量伸长率”以获得更标准的方法以及新方法的建议。

基于同一篇论文，`E`形状的标准伸长率由下`S`式给出：

![在此处输入图像描述](../Images/a77fca99d169e8c4d6ec57835e85c83b.png)

所有使用的时刻都是中心时刻。此特征“源自形状取向的定义，该定义基于最后二阶惯性矩的轴。准确地说，最小二阶惯性矩的轴是最小化距离平方的积分的线。点（属于形状）到线”（取自论文）。

在 OpenCV 中，这直接翻译为：

```
import sys
import cv2

def elongation(m):
    x = m['mu20'] + m['mu02']
    y = 4 * m['mu11']**2 + (m['mu20'] - m['mu02'])**2
    return (x + y**0.5) / (x - y**0.5)

img = cv2.cvtColor(cv2.imread(sys.argv[1]), cv2.COLOR_BGR2GRAY)
# Assuming input has grayscale dark contours:
img = 255 - cv2.threshold(img, 0, 255, cv2.THRESH_OTSU)[1]

m = cv2.moments(img)
print elongation(m) 
```

# perl - 为什么运行 Apache+FastCGI 的催化剂应用程序不提供动态内容？

> ID：14854594
> 
> 赞同：2
> 
> 时间：2013-02-13T13:23:18.227
> 
> 标签：perl, apache2, catalyst

我正在尝试使用 Apache 和 fastcgi 运行我的第一个 Perl Catalyst 应用程序。

启动服务器很好，我可以看到应用程序的主页。所有图像/javascript 均已正确加载（因此，我假设静态内容已正确提供）。

由于我不理解动态内容的原因，给了我一个 404：例如，当我尝试访问 www.webapp.org/search 时，我得到“在此服务器上找不到请求的 URL /search”。

好的，这是我为静态内容设置别名的方法

```
Alias /static /webapp/root/static/
Alias / /webapp/script/webapp_fastcgi.pl 
```

我将documentroot设置为

```
DocumentRoot /webapp/ 
```

此外，我有一个

```
 <Location />
     Options +ExecCGI 
     Order allow,deny
     Allow from all
     AddHandler fcgid-script .pl
 </Location> 
```

和一个指令

```
<Files /webapp/script/webapp_fastcgi.pl> 
    PassEnv PERL5LIB 
    SetHandler fastcgi-script
</Files> 
```

配置文件中没有其他内容。

如何添加指令以允许提供动态内容 (www.webapp.com/search)？

提前非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T15:35:49.143

我在 AddHandler 部分看到一个空格。请检查您的配置文件是否有错字。

```
AddHandler fcgid-script .pl 
```

如果您还没有这样做，请阅读此内容：

[http://wiki.catalystframework.org/wiki/deployment/apache_fastcgi](http://wiki.catalystframework.org/wiki/deployment/apache_fastcgi)

对于开发工作，您可以在没有 apache 麻烦的情况下使用催化剂：[http ://search.cpan.org/~mramberg/Catalyst-Runtime-5.80012/lib/Catalyst/Engine/FastCGI.pm#Standalone_FastCGI_Server](http://search.cpan.org/~mramberg/Catalyst-Runtime-5.80012/lib/Catalyst/Engine/FastCGI.pm#Standalone_FastCGI_Server)

假设 apxs 将 mod_fastcgi.so 安装到 /usr/local/apache/libexec 中，请将以下内容添加到 Apache .conf 文件中：

```
LoadModule fastcgi_module libexec/mod_fastcgi.so
<IfModule mod_fastcgi.c>
  FastCgiExternalServer /tmp/myapp.fcgi -host myhost:8081
  Alias /myapp/    /tmp/myapp.fcgi/
</IfModule> 
```

# sqlite - 运行 Fixtures 时出现 Sql Lite 错误：无法找到请求的 .Net Framework 数据提供程序。它可能没有安装

> ID：14854598
> 
> 赞同：1
> 
> 时间：2013-02-13T13:23:37.527
> 
> 标签：sqlite, nhibernate, tdd, nunit, fixtures

任何人都可以帮助解决这个问题..我在谷歌搜索后尝试了一些保存的东西，但没有运气......

在我的项目中运行固定装置时会发生此错误。

> NHibernate.HibernateException：**无法从 NHibernate.Driver.SQLite20Driver 创建驱动程序**。System.Reflection.TargetInvocationException ：调用目标引发了异常。System.ArgumentException：找不到请求的 .Net Framework 数据提供程序。它可能没有安装

这是堆栈跟踪

```
at NHibernate.Connection.ConnectionProvider.ConfigureDriver(IDictionary`2 settings)
    at NHibernate.Connection.ConnectionProvider.Configure(IDictionary`2 settings)
    at NHibernate.Connection.ConnectionProviderFactory.NewConnectionProvider(IDictionary`2 settings)
    at NHibernate.Cfg.SettingsFactory.BuildSettings(IDictionary`2 properties)
    at NHibernate.Cfg.Configuration.BuildSettings()
    at NHibernate.Cfg.Configuration.BuildSessionFactory()
    at MyApp.Common.Testing.UnitOfWorkTestContext.NHibernateUnitOfWorkTestContext.get_SessionFactory() in UnitOfWorkTestContext.cs: line 199
    at MyApp.Common.Testing.UnitOfWorkTestContext.NHibernateUnitOfWorkTestContext.IntialiseContainerAndUowFactory() in UnitOfWorkTestContext.cs: line 243
    at MyApp.Common.Testing.DatabaseFixture.OneTimeSetup() in DataBaseFixture.cs: line 66
    --TargetInvocationException
    at System.RuntimeTypeHandle.CreateInstance(RuntimeType type, Boolean publicOnly, Boolean noCheck, ref Boolean canBeCached, ref RuntimeMethodHandleInternal ctor, ref Boolean bNeedSecurityCheck)
    at System.RuntimeType.CreateInstanceSlow(Boolean publicOnly, Boolean skipCheckThis, Boolean fillCache)
    at System.RuntimeType.CreateInstanceDefaultCtor(Boolean publicOnly, Boolean skipVisibilityChecks, Boolean skipCheckThis, Boolean fillCache)
    at System.Activator.CreateInstance(Type type, Boolean nonPublic)
    at NHibernate.Bytecode.ActivatorObjectsFactory.CreateInstance(Type type)
    at NHibernate.Connection.ConnectionProvider.ConfigureDriver(IDictionary`2 settings)
    --ArgumentException
    at System.Data.Common.DbProviderFactories.GetFactory(String providerInvariantName)
    at NHibernate.Driver.ReflectionBasedDriver..ctor(String providerInvariantName, String driverAssemblyName, String connectionTypeName, String commandTypeName)
    at NHibernate.Driver.SQLite20Driver..ctor() 
```

我试图通过更改测试设置并通过包管理器控制台加载所需的 sql lite 包来解决它。我正在运行 64 位系统。任何机构都可以帮助我找出可能是什么问题吗？

请帮忙，谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T13:29:39.467

本机 SqlLite dll 是在编译路径中还是在全局程序集缓存中？

您是否有本机 SqLite.dll 的 64 位版本（SqLite dll 包含非托管代码，并且必须具有与您的项目构建相同的 (64/32)）。

如果您强制您的项目构建为 32 位，那么它可以工作吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-30T18:41:14.480

好的，我厌倦了每次升级都修复和重新修复这个问题，我希望通过在此处写下来来节省自己未来的故障排除。

我正在使用 NHibernate **3.3.3.4000**

我正在使用 SqlLite **3.6.23.1**，但 dll 文件属性版本**显示为 1.0.66.0**

1.  使您的单元测试项目平台以任何 CPU 为目标（我知道有人说您需要指定架构，但我发现情况并非如此）
2.  在项目中引用 System.Data.SQLite.dll
3.  在项目中引用一个配套的 System.Data.SQLLite.Linq.dll（它应该与 System.Data.SQLite.dll 一起提供）我不确定 NHibernate 是否需要这个 dll。

在我的 app.config 中，我需要一个 system.data 部分：

```
<system.data>
    <DbProviderFactories>
      <remove invariant="System.Data.SQLite"/>
      <add name="SQLite Data Provider" invariant="System.Data.SQLite" description=".Net Framework Data Provider for SQLite" type="System.Data.SQLite.SQLiteFactory, System.Data.SQLite" />
    </DbProviderFactories>
  </system.data> 
```

我使用内存数据库，我的连接字符串（没有所有 fluentnhibernate 的东西）看起来像：

```
Data Source=:memory:;Version=3;New=True;Pooling=True;Max Pool Size=1; 
```

# c# - C# Listview 中的选中项

> ID：14854600
> 
> 赞同：1
> 
> 时间：2013-02-13T13:23:54.687
> 
> 标签：c#, winforms, listview

我在 C# 应用程序中有一个 Listview 控件，其中填充了一些名称和复选框以选择一个或多个值。除了单击复选框外，用户还可以单击名称，它会变成蓝色。我想保留此功能，因为单击名称会显示更多数据并单击复选框将其标记为进一步处理

我相信单击复选框会更改 Item.Checked 属性并单击名称 Changes Item.Selected 但似乎没有那么简单。

我有一个计算检查项目的代码：

```
private void Listview1_ItemChecked(object sender, ItemCheckedEventArgs e) 
{
    foreach(ListViewItem Item in ListView1.Items) 
    {
        if (Item != null) 
        {
            if (Item.Checked == true) N++;
        }
    }
    Textbox1.Text = N.ToString();
} 
```

当用户单击复选框时，会显示正确的数字，但是当他单击名称时，即使还有更多复选框选中，选中的数字也会变为 1，这显然是错误的。此外，当表单和控件加载时，即使没有选中复选框，我也会得到 N=1。

我究竟做错了什么？

编辑：感谢您的快速响应和有用的提示！

而且我刚刚发现我的问题是我的疏忽，因为我忘记删除我的旧代码！:) 起初我使用多项选择来选择项目，然后我切换到复选框，但仍在调用 SelectionChanged 事件并修改文本框内容

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T13:29:39.610

要获取控件中选中项的数量`ListView`，请使用该`ListView.CheckedItems.Count`属性。

例子：

```
int numCheckedItems = myListView.CheckedItems.Count; 
```

或者

```
TextBox1.Text = myListView.CheckedItems.Count.ToString(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T13:29:53.913

您不应该遍历所有项目，因为`ItemCheckedEventArgs`它提供了您需要的所有信息：

```
private void Listview1_ItemChecked(object sender, ItemCheckedEventArgs e) 
{
    ListViewItem item = e.Item as ListViewItem;
    if (item != null)
    {
       if (item.Checked) 
       {
           N++;
       }  
       else
       {
           N--;
       }
    }
    Textbox1.Text = N.ToString();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-17T15:14:26.507

私人无效保存按钮_点击（对象发送者，EventArgs e）{

```
 SelectEmployeeBLL selectEmployeeBLL = new SelectEmployeeBLL();

        int employeeId = Convert.ToInt32(employeeNameInsertComboBox.SelectedValue);

        int departmentId= Convert.ToInt32(departmentNameInsertComboBox.SelectedValue);

        bool departmentNameCheck = selectEmployeeBLL.DepartmentNameDuplicateCheck(departmentId, employeeId);

        if (departmentNameCheck)
        {
            MessageBox.Show("Department already have");
            return;
        }

        SelectEmployee selectEmployee = new SelectEmployee();
        selectEmployee.DepartmentIDID = departmentId;
        selectEmployee.EmployeeIDID = employeeId;

        bool aselectEmployee = selectEmployeeBLL.SelectEmployeeIsert(selectEmployee);
        if (aselectEmployee)
        {
            MessageBox.Show("save successfull");
            LoadEmployeeDepartment();
        }

    } 
```

# ruby - 使用 has_one 的 Mongoid Map Reduce

> ID：14854612
> 
> 赞同：0
> 
> 时间：2013-02-13T13:24:37.157
> 
> 标签：ruby, ruby-on-rails-3, mongodb, mapreduce, mongoid

我正在制作的应用程序中使用 Mongoid 和 MongoDB。我有一个用户，其个人资料如下：

```
class User

 field :email, :type => String
 field :name, :type => String
 field :date_of_birth, :type => DateTime
 has_one :profile

end

class Profile

 field :votes, :type => Hash
 field :biography, :type => String
 belongs_to :profile

end 
```

投票哈希的结构如下：

```
profile : {
  "user_id" : ObjectId("511b76b0e80c505750000031"),
  "votes": {
    "vote_count": 3,
    "up_votes": 3,
    "down_votes": 0
  }
} 
```

我正在像这样运行 map reduce：

```
map = "
  function () {
    values = {
      name: this.name
    }
    emit(this._id, values);
  }
"

reduce = "
  function (key, emits) {
    return emits;
  }
"

User.map_reduce(map, reduce).out(replace: "leaderboards").each do |document|
  ap document
end 
```

这很好用，并在 Mongo 中创建了一个名为排行榜的新集合。但是，我正在尝试从配置文件中映射一些数据，以便它包含配置文件中的 vote_count 字段。

基本上使我的地图功能看起来像这样：

```
map = "
  function () {
    values = {
      name: this.name,
      votes: this.profile.votes.vote_count
    }
    emit(this._id, values);
  }
" 
```

但是，我很难获取与用户关联的个人资料。有谁知道我如何从用户个人资料中提取数据？

如果这里有什么不清楚的地方，请告诉我。任何帮助，将不胜感激。

托尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T18:59:09.613

在 MongoDB 中，无法在服务器端对来自不同集合的数据进行“连接”——您必须在客户端应用程序中进行，或者更好的是考虑[文档嵌入](http://docs.mongodb.org/manual/core/data-modeling/#data-modeling-decisions)，尤其是在您之间存在 1:1 关系的情况下用户和配置文件集合。

现在，如果不能选择更改设计，您可以按顺序执行两个 mapReduce()：

1.  您在用户上拥有的那个，但使用 user_id 作为键，并将名称添加为字段
2.  具有相同 user_id 键和 vote_count 的 Profile 上的 mapReduce，将[合并输出](http://docs.mongodb.org/manual/reference/method/db.collection.mapReduce/#output-to-a-collection-with-an-action)指定到您的排行榜集合中

这有帮助吗？

问候

罗纳德

# php - 在 php 中，使用 curl 或 file_get_content 通过 url 获取当前位置

> ID：14854615
> 
> 赞同：0
> 
> 时间：2013-02-13T13:24:49.520
> 
> 标签：php, curl, file-get-contents, geoip

此链接返回我当前的位置： [https](https://j.maxmind.com/app/country.js) ://j.maxmind.com/app/country.js这是新加坡。但是，如果我在 php 文件中使用 file_get_contents(' [https://j.maxmind.com/app/country.js](https://j.maxmind.com/app/country.js) ')，它会返回美国。为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T13:27:11.610

因为它是在服务器端执行的。您的网站托管在美国服务器上。因此，如果您通过服务器端语言调用函数，它不会从用户执行，而是从服务器执行并使用服务器位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T13:29:48.797

很简单。JavaScript 在本地运行当您打开[https://j.maxmind.com/app/country.js](https://j.maxmind.com/app/country.js)它在您的计算机中运行并且当您使用 file_get_contents(' [https://j.maxmind.com/app/country.js](https://j.maxmind.com/app/country.js) ')它在您的服务器中运行。

# javascript - CRM 2011 RollUp 12 刷新网格

> ID：14854618
> 
> 赞同：2
> 
> 时间：2013-02-13T13:25:04.580
> 
> 标签：javascript, dynamics-crm-2011

自 rollup 12 更新以来，我们不能再使用此 javascript 代码来刷新网格

从功能区按钮 onClick（网格页面上的功能区）

```
window.document.all.crmGrid.Refresh(); 
```

或从功能区按钮 onClick（主页上的功能区）刷新父网格

```
window.top.opener.document.getElementById('crmGrid').Refresh(); 
```

我们现在应该如何刷新网格？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-13T15:38:30.973

它不再有效，因为您使用的方法不受支持。我假设您指的是更新表单上的子网格。刷新网格的正确方法是使用[此处](http://msdn.microsoft.com/en-us/library/gg334266.aspx#BKMK_refresh)`refresh`记录的网格控件的方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T07:37:40.813

假设您需要刷新表单和 Maingrid（从哪里打开记录）。

//刷新表单

window.location.reload(true);

//刷新主网格

window.parent.opener.document.getElementById("crmGrid").control.refresh();

我在 CRM Online 中尝试过（更新 Roll 12）。

# heroku - Navicat 访问 Heroku 数据库

> ID：14854620
> 
> 赞同：1
> 
> 时间：2013-02-13T13:25:18.930
> 
> 标签：heroku, navicat

我在通过 Navicat 访问免费的 Heroku 数据库（开发计划）时遇到了麻烦。

当我连接时，我可以看到一长串数据库，就像这里[http://twitter.com/bazscott/status/290780256221147136](http://twitter.com/bazscott/status/290780256221147136)一样，但是我在列表中找不到我的特定数据库，也无法连接到其他任何数据库。

这是因为我使用的是免费的数据库计划，而只有付费计划才允许访问 Navicat？

PS。**我通过heroku pg:psql**访问我的数据库没有问题。

# cordova - phonegap InappBrowser 不适用于视口

> ID：14854621
> 
> 赞同：5
> 
> 时间：2013-02-13T13:25:22.307
> 
> 标签：cordova

我正在使用 PhoneGap 2.3，现在当我使用“window.open”打开一个新 URL 时，我的 URL 在 inAppBrowser 中打开。

在这个浏览器中，我的视口元标记不起作用，但是当我将我的 URL 放入 safari 浏览器时，视口工作正常。

在PhoneGap 中，我已将'enableViewportScale' 设置为'yes'，但它不起作用。

有人有解决方案吗？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-28T16:04:01.093

enableViewportScale 是在 2.4.0 中添加的，所以你应该只需要升级。

[http://docs.phonegap.com/en/2.4.0/cordova_inappbrowser_inappbrowser.md.html#InAppBrowser](http://docs.phonegap.com/en/2.4.0/cordova_inappbrowser_inappbrowser.md.html#InAppBrowser)

（在window.open下）

编辑：

此外，调用选项的方式是一个单数字符串，而不是一个对象：

所以它应该是这样的：

```
'location=no,enableViewportScale=yes' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T10:32:48.773

凯文是对的

```
window.open('http://apache.org', '_blank', 'location=no,EnableViewPortScale=yes'); 
```

（仅适用于 iOS）

# .net - Navision 2009R2 上的 .NET Framework 问题

> ID：14854627
> 
> 赞同：0
> 
> 时间：2013-02-13T13:25:37.713
> 
> 标签：.net, visual-studio-2010, add-in, navision, dynamics-nav

我正在使用 Visual Studio 2010 在 c# 中为 Navision 2009R2 创建一个 ControlAddIn。我必须使用 .NET 3.5 框架，因为 Navision 不能使用更高版本的 .NET 框架。

问题是我有一个基于 .NET Framework 4.5 的 dll。如果我引用它，我会收到超过 50 个警告并且无法使用 dll。

有人对此有解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T08:40:44.650

如果您自己创建了 dll。在 Visual Studio 中打开您的项目，单击项目的属性。

在应用程序选项卡中，将您的框架设置为 3.5，然后构建您的项目。

您现在应该可以使用 dll。

# c# - C# 构建一个接受 POST 方法（如 HttpWebRequest 方法）的网络服务方法

> ID：14854631
> 
> 赞同：0
> 
> 时间：2013-02-13T13:25:53.920
> 
> 标签：c#, post, service, web

我需要一个接受 POST 方法的网络服务。访问我的服务器正在使用 POST 方法。它向我发送了一个 xml，我应该用一些 xml 响应。

另一种方式，当我访问他时，我已经使用 HttpWebRequest 类进行了管理，它工作正常。它是这样完成的：

```
HttpWebRequest req = (HttpWebRequest)WebRequest.Create(s.strMvrataUrl.ToString());
req.ClientCertificates.Add(cert);
req.Method = "POST";
req.ContentType = "text/xml; encoding='utf-8'";
s.AddToLog(Level.Info, "Certifikat dodan.");
byte[] bdata = null;
bdata = Encoding.UTF8.GetBytes(strRequest);
req.ContentLength = bdata.Length; 
Stream stremOut = req.GetRequestStream();
stremOut.Write(bdata, 0, bdata.Length);
stremOut.Close();
s.AddToLog(Level.Info, "Request: " + Environment.NewLine + strRequest);
StreamReader streamIn = new StreamReader(req.GetResponse().GetResponseStream());
strResponse = streamIn.ReadToEnd();
streamIn.Close(); 
```

现在我想要一个接受 POST 方法的网络服务。有谁知道如何做到这一点。我被困在这里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T14:07:51.237

可以在配置中启用 HTTP GET 和 HTTP POST。根目录中有一个名为 webconfig 的文件，您必须在其中添加以下设置：

```
<configuration>
    <system.web>
    <webServices>
            <protocols>
                <add name="HttpGet"/>
                <add name="HttpPost"/>
            </protocols>
        </webServices>
    </system.web>
</configuration> 
```

即在system.web 标签内。

现在在 web 服务中，如果您打算发回 XML，您可以设计一个类似于预期 XML 的结构。例如：获取以下类型的 XML：

```
<?xml version="1.0" encoding="utf-8"?> 
    <Quote xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="http://tempuri.org/">  
        <object>Item101</object>
        <price>200</price>
    </Quote> 
```

您必须从 Web 服务返回以下结构的对象：

```
public struct Quote
{
    public int price;
    public string object;
    public Quote(int pr, string obj)
    {
        price = pr;
        object = obj
    }
} 
```

现在可以将其作为字符串作为响应接收，然后根据需要进行解析。

==================================================== ==============================

# **编辑我**

下面是一个HelloWorld WebMethod

```
[WebMethod]
    public string HelloWorld() {  
      return "HelloWorld";
    } 
```

[在结构的情况下，将返回类型更改为相应的结构类型]

以下是一个功能，您可以 POST 到 URL，也可以将 xml 文件发送到 web 服务[根据您的需要使用]：

```
public static XmlDocument PostXMLTransaction(string URL, XmlDocument XMLDoc)
    {

        //Declare XMLResponse document
        XmlDocument XMLResponse = null;

        //Declare an HTTP-specific implementation of the WebRequest class.
        HttpWebRequest objHttpWebRequest;

        //Declare an HTTP-specific implementation of the WebResponse class
        HttpWebResponse objHttpWebResponse = null;

        //Declare a generic view of a sequence of bytes
        Stream objRequestStream = null;
        Stream objResponseStream = null;

        //Declare XMLReader
        XmlTextReader objXMLReader;

        //Creates an HttpWebRequest for the specified URL.
        objHttpWebRequest = (HttpWebRequest)WebRequest.Create(URL);

        try
        {
            //---------- Start HttpRequest

            //Set HttpWebRequest properties
            byte[] bytes;
            bytes = System.Text.Encoding.ASCII.GetBytes(XMLDoc.InnerXml);
            objHttpWebRequest.Method = "POST";
            objHttpWebRequest.ContentLength = bytes.Length;
            objHttpWebRequest.ContentType = "text/xml; encoding='utf-8'";

            //Get Stream object
            objRequestStream = objHttpWebRequest.GetRequestStream();

            //Writes a sequence of bytes to the current stream
            objRequestStream.Write(bytes, 0, bytes.Length);

            //Close stream
            objRequestStream.Close();

            //---------- End HttpRequest

            //Sends the HttpWebRequest, and waits for a response.
            objHttpWebResponse = (HttpWebResponse)objHttpWebRequest.GetResponse();

            //---------- Start HttpResponse
            if (objHttpWebResponse.StatusCode == HttpStatusCode.OK)
            {
                //Get response stream
                objResponseStream = objHttpWebResponse.GetResponseStream();

                //Load response stream into XMLReader
                objXMLReader = new XmlTextReader(objResponseStream);

                //Declare XMLDocument
                XmlDocument xmldoc = new XmlDocument();
                xmldoc.Load(objXMLReader);

                //Set XMLResponse object returned from XMLReader
                XMLResponse = xmldoc;

                //Close XMLReader
                objXMLReader.Close();
            }

            //Close HttpWebResponse
            objHttpWebResponse.Close();
        }
        catch (WebException we)
        {
            //TODO: Add custom exception handling
            throw new Exception(we.Message);
        }
        catch (Exception ex)
        {
            throw new Exception(ex.Message);
        }
        finally
        {
            //Close connections
            objRequestStream.Close();
            objResponseStream.Close();
            objHttpWebResponse.Close();

            //Release objects
            objXMLReader = null;
            objRequestStream = null;
            objResponseStream = null;
            objHttpWebResponse = null;
            objHttpWebRequest = null;
        }
        //Return
        return XMLResponse;
    } 
```

And the call would be like :

```
 XmlDocument XMLdoc = new XmlDocument();
 XMLdoc.Load("<xml file locatopn>");
 XmlDocument response = PostXMLTransaction("<The WebService URL>", XMLdoc);
 string source = response.OuterXml; 
```

**[If this was helpful or need more help please let me know]**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T13:28:51.563

来自[http://support.microsoft.com/kb/819267](http://support.microsoft.com/kb/819267)：

> HTTP GET 和 HTTP POST 可以通过编辑 Web 服务所在的 vroot 的 Web.config 文件来启用。以下配置同时启用 HTTP GET 和 HTTP POST：

```
<configuration>
    <system.web>
    <webServices>
        <protocols>
            <add name="HttpGet"/>
            <add name="HttpPost"/>
        </protocols>
    </webServices>
    </system.web>
</configuration> 
```

# objective-c - Objective-C 运行时如何知道弱引用对象是否仍然存在？

> ID：14854635
> 
> 赞同：2
> 
> 时间：2013-02-13T13:26:36.277
> 
> 标签：objective-c, automatic-ref-counting, weak-references, objective-c-runtime

随着 ARC 的出现，提供了一些新功能，允许开发人员使用弱引用对象。`id objc_loadWeak(id *location)`是其中之一。此函数接收一个参数，该参数与内存中存储弱对象的位置相对应，如果该对象仍然存在或`nil`已被释放，则返回该对象。

似乎当一个对象`obj`存储`weak`在一个带有 的位置`location`时`id objc_storeWeak(id *location, id obj)`，`obj`它被放在一个“弱地图”中，`location`作为一个键。但是，为了检索`obj`，`objc_loadWeak`不能只`location`用作键并返回对应的值`obj`。它还必须检查是否还活着，如果不再`obj`存在则返回。`nil`

但是，`objc_loadWeak`不能尝试读取对象的保留计数，因为对象可能已被释放。此外，尽管弱映射、`objc_storeWeak`和`objc_loadWeak`类`NSObject`是在同一个文件（[NSObject.mm](http://opensource.apple.com/source/objc4/objc4-532.2/runtime/NSObject.mm)）中实现的，但`NSObject`的`dealloc`方法不会向弱映射发出信号，表明正在被释放的对象正在消失。

那么，Objective-C 运行时如何判断一个`weak`对象是否还活着呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-13T13:44:20.853

> NSObject 的 dealloc 方法不会向弱映射发出信号，表明正在被释放的对象正在消失。

确实如此。

```
- [NSObject dealloc] 
```

来电

```
_objc_rootDealloc(self); 
```

这反过来又调用

```
object_dispose() 
```

这反过来又调用

```
objc_destructInstance() 
```

最终调用

```
objc_clear_deallocating() 
```

最后一个函数如下所示：

```
 void 
objc_clear_deallocating(id obj) 
{
    assert(obj);
    assert(!UseGC);

    SideTable *table = SideTable::tableForPointer(obj); /* *** THIS LINE *** */

    // clear any weak table items
    // clear extra retain count and deallocating bit
    // (fixme warn or abort if extra retain count == 0 ?)
    OSSpinLockLock(&table->slock);
    if (seen_weak_refs) {
    arr_clear_deallocating(&table->weak_table, obj); /* *** THIS LINE *** */
    }
    table->refcnts.erase(DISGUISE(obj)); /* *** THIS LINE *** */
    OSSpinLockUnlock(&table->slock);
} 
```

突出显示的三行具有魔力。`SideTable`是一个实现的 C++ 类`NSObject.mm`，其中`refcnts`成员变量的作用与听起来完全一样：它保存引用计数。

# c - 如何防止任务从 CPU 移动到另一个 CPU？

> ID：14854637
> 
> 赞同：0
> 
> 时间：2013-02-13T13:26:42.313
> 
> 标签：c, concurrency, linux-kernel

我目前正在构建一个内核模块，我想以一种非常理想的方式面对 SMP 问题。

目前，我有一组对象，每个对象都绑定到一个特定的 CPU。以下代码说明了这一点：

```
struct my_object {
    int a_field;
};

struct my_object cpu_object[NR_CPUS];
/*
 * cpu_object[i] is "bound" to CPU number "i" !
 */ 
```

一个简单的调用`smp_processor_id()`就会给我当前代码正在运行的处理器。因此，如果我有一个`foo`使用上述 CPU 绑定对象执行某些工作的函数，它可能看起来像：

```
void foo()
{
    int cpu = smp_processor_id();
    do_some_work_with(cpu_object[cpu]);
} 
```

问题是：如何保证

1.  `cpu`分配和`do_some_work_with`?之间没有 CPU 切换
2.  `do_some_work_with()`只会运行`cpu`吗？

当时，我想到的解决方案是：

1.  使用自旋锁禁用抢占
2.  获取 CPU`smp_processor_id`
3.  设置当前任务的处理器亲和性，使其与当前 CPU 保持一致
4.  再次启用抢占，释放锁
5.  做好工作`do_some_work_with()`
6.  将亲和力重置为之前的状态

对我来说，这是相当野蛮的，我想知道是否有更聪明、更轻松的方法来做到这一点。

提前致谢。

* * *

**编辑**：如评论中所述，我编辑以解释为什么我觉得我需要这些功能。我必须在*文件系统*级别执行动态加密。
为此，我将使用内核内置的加密支持（`struct crypto_tfm`和朋友）。这是原始问题...

在多核机器上，可以同时执行多个 R/W 操作。常见的 fs 层可以做到这一点并且做得很好。但是，我来了，把事情搞砸了：

*   类`struct crypto_tfm`对象负责加密操作
*   不能同时使用相同的变换对象，因为某些参数会被更改（私钥和初始化向量）并破坏所有过程
*   由于加密中内置的复杂密码分配系统，下面描述的简单解决方案完全不可能。
    1.  分配`crypto_tfm`转换
    2.  执行加密操作
    3.  释放转换对象
*   只有一个转换可用的经典方案可防止多个并发 R/W 操作，因为一个任务必须等待另一个任务释放持有的锁以保护转换对象。

由于这些原因，我需要处理多个转换对象。我必须找到一个允许并发 R/W 的有效方案。我觉得我的“Y”在这里是“简单、整洁......但错误的解决方案”。任何建议将不胜感激。

*注意*：如果我使用类似于我在原始问题中给出的解决方案，我会将其限制在非常短的部分，以避免对 CPU 负载平衡产生重大影响。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T14:17:34.363

因此，根据您编辑的问题，我不得不说我认为您的解决方案是错误的。

正确的做法是有一个“每个操作” `crypto_tfm`，它遵循跨 CPU 的操作。在这里使用“当前 CPU”是不正确的。[如果这是在具有热插拔 CPU 的系统上运行，并且有人断开了您的任务正在运行的 CPU 的连接，并且从未将其放回原位，会发生什么？]

如果分配`crypto_tfm`每个操作的成本很高，那么您必须找到一些方法来避免分配/释放对象 - 拥有它们的池并为当前操作分配一个可用的对象，当操作完成时，将其放回再次可用列表。

# ios - RestKit 并作为 NSManagedObject 保存到 CoreData

> ID：14854641
> 
> 赞同：11
> 
> 时间：2013-02-13T13:26:48.640
> 
> 标签：ios, objective-c, core-data, restkit

我正在使用[RestKit](http://restkit.org/api/latest/)，我想解析元素并将其保存到核心数据。我有两个 json 文件：

第一（类别）：

```
[
   {
     "cat_id": 3371,
     "cat_name": "myName",
     "image": 762
   },
   {
     "cat_id": 3367,
     "cat_name": "anotherName",
     "image": 617
   }
] 
```

第二个（元素）：

```
[
  {
    "art_id": "1",
    "node": {
      "author": "name"
    },
    "small_url": 0
  },
  {
    "art_id": "12",
    "node": {
      "author": "anotherName"
    },
    "small_url": 0
  }
] 
```

所以基本思想是每个类别里面都有一些元素。所以这是我的 CoreData 结构： ![在此处输入图像描述](../Images/b1f61e77afd4c6210099834b780a86db.png)

我已经下载了 restkit 示例并使用 TwitterCoreData 示例。我的代码是： **AppDelegeta.m**

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    NSURL *baseURL = [NSURL URLWithString:@"http://globalURL.com"];
    RKObjectManager *objectManager = [RKObjectManager managerWithBaseURL:baseURL];
    NSManagedObjectModel *managedObjectModel = [NSManagedObjectModel mergedModelFromBundles:nil];
    RKManagedObjectStore *managedObjectStore = [[RKManagedObjectStore alloc] initWithManagedObjectModel:managedObjectModel];
    objectManager.managedObjectStore = managedObjectStore;

    RKEntityMapping *categoryMapping = [RKEntityMapping mappingForEntityForName:@"Category" inManagedObjectStore:managedObjectStore];
    categoryMapping.identificationAttributes = @[ @"catId" ];
    [categoryMapping addAttributeMappingsFromDictionary:@{
     @"cat_id": @"catId",
     @"node.author": @"author",
     }];

    RKEntityMapping *elementsMapping = [RKEntityMapping mappingForEntityForName:@"Elements" inManagedObjectStore:managedObjectStore];
    elementsMapping.identificationAttributes = @[ @"artId" ];
    [elementsMapping addAttributeMappingsFromDictionary:@{
     @"art_id": @"artId",
     @"node.author": @"author",
    }];
    [elementsMapping addPropertyMapping:[RKRelationshipMapping relationshipMappingFromKeyPath:@"category" toKeyPath:@"category" withMapping:categoryMapping]];
    RKResponseDescriptor *responseDescriptor = [RKResponseDescriptor responseDescriptorWithMapping:elementsMapping
                                                                                       pathPattern:nil
                                                                                           keyPath:nil
                                                                                       statusCodes:RKStatusCodeIndexSetForClass(RKStatusCodeClassSuccessful)];
    [objectManager addResponseDescriptor:responseDescriptor];

    [managedObjectStore createPersistentStoreCoordinator];
    NSString *storePath = [RKApplicationDataDirectory() stringByAppendingPathComponent:@"MyCoreData.sqlite"];
    NSString *seedPath = [[NSBundle mainBundle] pathForResource:@"MyCoreData" ofType:@"sqlite"];
    NSError *error;
    NSPersistentStore *persistentStore = [managedObjectStore addSQLitePersistentStoreAtPath:storePath fromSeedDatabaseAtPath:seedPath withConfiguration:nil options:nil error:&error];
    NSAssert(persistentStore, @"Failed to add persistent store with error: %@", error);

    // Create the managed object contexts
    [managedObjectStore createManagedObjectContexts];

    // Configure a managed object cache to ensure we do not create duplicate objects
    managedObjectStore.managedObjectCache = [[RKInMemoryManagedObjectCache alloc] initWithManagedObjectContext:managedObjectStore.persistentStoreManagedObjectContext];

    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    self.viewController = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];
    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible];
    return YES;
} 
```

和**ViewController.m**：

```
NSFetchRequest *fetchRequest = [NSFetchRequest fetchRequestWithEntityName:@"Elements"];
NSSortDescriptor *descriptor = [NSSortDescriptor sortDescriptorWithKey:@"artId" ascending:NO];
fetchRequest.sortDescriptors = @[descriptor];
[[RKObjectManager sharedManager] getObjectsAtPath:@"/detailaddress/:catId" parameters:nil success:^(RKObjectRequestOperation *operation, RKMappingResult *mappingResult) {
    RKLogInfo(@"Load complete: Table should refresh...");
    NSLog(@"%@",mappingResult);
    [[NSUserDefaults standardUserDefaults] setObject:[NSDate date] forKey:@"LastUpdatedAt"];
    [[NSUserDefaults standardUserDefaults] synchronize];
} failure:^(RKObjectRequestOperation *operation, NSError *error) {
    RKLogError(@"Load failed with error: %@", error);
}]; 
```

映射日志向我显示“nil”。如何使用restkit将我的第一个json（类别）中的数据保存到核心数据中？请记住，我还没有元素列表。

当我使用创建新文件来创建 NEManagedObject 子类时，我有**Elements**类。

```
@interface Elements : NSManagedObject

@property (nonatomic, retain) NSNumber * artId;
@property (nonatomic, retain) NSString * author;
@property (nonatomic, retain) NSString * title;
@property (nonatomic, retain) NSManagedObject *category;

@end 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-02-25T20:32:13.857

在几个月前的 .20 版本发布之前，我一直使用 RESTKit。老实说，虽然这个图书馆有很好的意图，但根据我的经验，它最终浪费的时间比它用来拯救我的时间要多得多。

我已经将它与使用 .NET/MVC、PHP、python/Django/TastyPie 创建的 API 一起使用，并破解了它以使用 Twitter 做一些事情。这一切最终成为一个非常有趣的学术活动，但最终仅此而已。RESTKit 的旧/新版本都假设您的 API 将如何响应请求。

在 .10 版本中，通过使用 Obj-C 块可以实现相当多的可定制性。我可以拦截 RKRequest 的请求/响应，并且几乎可以覆盖 RESTKit 将要执行的任何操作。这看起来相当棒。现在有了 .20 版本，一切都变得非常……**聪明**（聪明的代码通常不好）。

RK 不再试图保持通用性和可塑性，而是为您做了各种“方便”的事情。这有效地剥夺了您将其塞入您的 API 所采用的任何（非理想化和现实）形状的能力。在这一点上，我已经回到使用[AFNetworking](https://github.com/AFNetworking/AFNetworking/)编写我的所有代码。我宁愿花额外的时间编写自己的解析代码，并且知道当我的单元测试通过时，我就完成了。不要花几个小时试图让 RK 注销有意义的错误消息。

RK 的另一个真正问题是它不考虑离线。它的设计假设您的应用程序始终在线，并且只是反映了天空中的持久存储。我的应用程序都在 iOS 设备上处理内容创建，在内容创建时可能或可能不在线。这是我“定制”RK .10 的主要原因。当我看到 .20 中的变化时，我认为足够了，并回到*以前的方式做事*。

也许我会编写自己的 CRUD/RESTful 框架，因为我开始厌倦了花时间使用非常专业的库，这些库试图做所有事情，尽可能少地留给应用程序开发人员。像这样的框架往往是瑞士军刀。他们在纸上看起来真的很棒，*他们*可以做任何事情，然后你实际上尝试切割一些东西并且刀片太钝或折断。好的软件很少能做得很好，如果听起来好得令人难以置信，那很可能就是这样。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-19T11:15:13.003

所以你已经为每个 NSManagedObject 创建了映射（并且它们工作），但是现在你想在“Category”和“Elements”之间建立关系。

问题是没有关于每个元素所属类别的元素映射的信息（缺少唯一键）。因此，您需要将 添加`cat_id`到 Elements JSON 以确保此 keypath 可用。

```
// Elements JSON
[
  {
    "cat_id": "1313",
    "art_id": "1",
    "node": {
      "author": "name"
    },
    "small_url": 0
  },
  ...
]
// Edit keypath in relationship mapping
[elementsMapping addPropertyMapping:[RKRelationshipMapping relationshipMappingFromKeyPath:@"cat_id" toKeyPath:@"category" withMapping:categoryMapping]]; 
```

此外，您可以使用以下方法来跟踪映射是否有效。

```
1) -com.apple.CoreData.SQLDebug 1 // Add in "Arguments" Tab > "Arguments Passed On Launch" 
2) RKLogConfigureByName("RestKit/*", RKLogLevelTrace); // Add to AppDelegate` 
```

## 编辑

### 映射

`Elements`您是否使用给定值更新了数据模型和 NSManagedObject 中的实体？好像你没有。

```
@interface Elements : NSManagedObject

@property (nonatomic, retain) NSNumber * catId;
@property (nonatomic, retain) NSNumber * artId;
@property (nonatomic, retain) NSString * author;
@property (nonatomic, retain) NSString * title;
@property (nonatomic, retain) NSManagedObject *category;

@end 
```

### 路由

您用于获取请求的路径将不起作用，因为`@"/detailaddress/:catId"`它不是有效路径。一方面，您可以设置对象管理器的一般路由或定义响应描述。

```
 // Route for get operation
 [[RKObjectManager sharedManager].router.routeSet addRoute:[RKRoute 
      routeWithClass:[Category class] 
      pathPattern:@"/detailaddress/:catId" 
      method:RKRequestMethodGET]];

 // Response descriptor taken from the Core Data same application 
 RKResponseDescriptor *responseDescriptor = [RKResponseDescriptor responseDescriptorWithMapping:categoryMapping pathPattern:@"/detailaddress/:catId" keyPath:nil statusCodes:RKStatusCodeIndexSetForClass(RKStatusCodeClassSuccessful)];     
 [objectManager addResponseDescriptor:responseDescriptor];

 // Use general path for get request
 [[RKObjectManager sharedManager] getObjectsAtPath:@"/detailaddress" ... 
```

但请先检查映射和数据模型是否按预期设置。

# java - 在框中查找 2d 点

> ID：14854643
> 
> 赞同：1
> 
> 时间：2013-02-13T13:26:51.580
> 
> 标签：java, algorithm, 2d, point

我正在寻找一种算法来获得最快的方法来找到一个盒子中的所有点 2D (x,y)（一个盒子由 2 个点定义：lowerLeft 和 upperRight）。

想象一下，我们在 2D 空间中有 200 万个点。

在那个 2D 空间中，我从 2 个点的某处创建了一个框，一个在左下角，另一个在右上角。获得盒子中所有分数的最快方法是什么？这是最坏情况的java测试：循环每个点（200万！）并确定它是否在盒子内。我敢肯定，如果点列表首先排序，我们会变得更快......

你有想法吗？

```
public class FindPointsInBox {
public static void main(String[] args) throws Exception {
    // List of 2,000,000 points (x,y)
    List<Point> allPoints = new ArrayList<Point>();
    for(int i=0; i<2000000; i++) {
        allPoints.add(new Point(46 - (Math.random()), -74 - (Math.random())));
    }

    // Box defined by 2 points: lowerLeft and upperRight
    List<Point> pointsInBox = new ArrayList<Point>();
    Point lowerLeft = new Point(44.91293325430085, -74.25107363281245);
    Point upperRight = new Point(45.3289676752705, -72.93820742187495);

    Date t1 = new Date();

    // TODO: What is the fastest way to find all points contained in box
    for(int i=0; i<allPoints.size(); i++) {
        if(isPointInBox(allPoints.get(i), lowerLeft, upperRight))
            pointsInBox.add(allPoints.get(i));
    }
    Date t2 = new Date();
    System.out.println(pointsInBox.size() + " points in box");
    System.out.println(t2.getTime()-t1.getTime() + "ms");
}

private static boolean isPointInBox(Point p, Point lowerLeft, Point upperRight) {
    return (
        p.getX() >= lowerLeft.getX() &&
        p.getX() <= upperRight.getX()   &&
        p.getY() >= lowerLeft.getY() &&
        p.getY() <= upperRight.getY());
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T13:42:01.503

改进 Mikhails 的答案（我还不能评论）你可以利用四叉树[http://en.wikipedia.org/wiki/Quadtree](http://en.wikipedia.org/wiki/Quadtree)。这就是米哈伊尔所说的，我认为，并且通过将空间划分为网格来工作。如果一个分区中有很多点，则它本身被划分为一个小网格。

When selecting points one can then compare the extents of the partitions to quickly exclude several points if their containing rectangle does not intersect with your selection rectangle.

四叉树的创建平均需要 O(n log n) 操作，而选择一堆点需要 O(log n)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-13T13:32:19.997

将您的空间分成方形单元格。对于每个单元格存储位于单元格中的点列表。对于给定的矩形，首先找到与其相交的所有单元格，然后遍历这些单元格中的点并测试其中哪些在矩形中。这是演示这种方法的代码：

```
public class PointsIndex {
    private final int width;
    private final int height;
    private final int rows;
    private final int cols;
    private final List<Point> [][] cells;

    @SuppressWarnings("unchecked")
    public PointsIndex (
        int width, int height, int rows, int cols)
    {
        this.width = width;
        this.height = height;
        this.rows = rows;
        this.cols = cols;

        cells = (List<Point> [][])new List<?> [rows][];
        for (int i = 0; i < rows; i++)
            cells [i] = (List<Point> [])new List<?> [cols];
    }

    public void addPoint (int x, int y)
    {
        int r = x * rows / width;
        int c = y * cols / height;

        List <Point> cell = cells [r][c];
        if (cell == null)
        {
            cell = new ArrayList<Point>();
            cells [r][c] = cell;
        }

        cell.add (new Point (x, y));
    }

    public Point [] getPoints (int x, int y, int w, int h)
    {
        int r1 = x * rows / width;
        int r2 = (x + w - 1) * rows / width;
        int c1 = y * cols / height;
        int c2 = (y + h - 1) * cols / height;

        ArrayList<Point> result = new ArrayList<Point>();

        for (int r = r1; r <= r2; r++)
            for (int c = c1; c <= c2; c++)
            {
                List <Point> cell = cells [r][c];
                if (cell != null)
                {
                    if (r == r1 || r == r2 || c == c1 || c == c2)
                    {
                        for (Point p: cell)
                            if (p.x > x && p.x < x + w && p.y > y && p.y < y + h)
                                result.add (p);
                    }
                    else result.addAll (cell);
                }
            }

        return result.toArray(new Point [result.size()]);
    }

    public static void main(String[] args) {
        Random r = new Random ();

        PointsIndex index = new PointsIndex(1000000, 1000000, 100, 100);
        List <Point> points = new ArrayList<Point>(1000000);

        for (int i = 0; i < 1000000; i++)
        {
            int x = r.nextInt(1000000);
            int y = r.nextInt(1000000);

            index.addPoint(x, y);
            points.add (new Point (x, y));
        }

        long t;

        t = System.currentTimeMillis();
        Point [] choosen1 = index.getPoints(456789, 345678, 12345, 23456);
        System.out.println (
            "Fast method found " + choosen1.length + " points in " + 
            (System.currentTimeMillis() - t) + " ms");

        Rectangle rect = new Rectangle (456789, 345678, 12345, 23456);

        List <Point> choosen2 = new ArrayList<Point>();

        t = System.currentTimeMillis();
        for (Point p: points)
        {
            if (rect.contains(p))
                choosen2.add (p);
        }
        System.out.println(
            "Slow method found " + choosen2.size () + " points in " + 
            (System.currentTimeMillis() - t) + " ms");
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-13T13:34:46.907

你的解决方案是线性的，你没有办法做得更好，因为你至少要读取输入数据。

# mysql - 当昨天的数据与今天的数据匹配时，MySQL 从表中删除指定的行

> ID：14854653
> 
> 赞同：1
> 
> 时间：2013-02-13T13:27:23.537
> 
> 标签：mysql, database, join, inner-join

我有一些数据存储在一个名为 MyTable 的 MySQL 表中，如下所示：

```
+----------+-----------+---------------------+
|    my_id |    amount | updated             |
+----------+-----------+---------------------+
|   105415 |        81 | 2013-02-13 00:00:00 |
|   105414 |        33 | 2013-02-13 00:00:00 |
|   220801 |       240 | 2013-02-13 00:00:00 |
|   105411 |       118 | 2013-02-13 00:00:00 |
|   105411 |       118 | 2013-02-12 00:00:00 |
|   220801 |       240 | 2013-02-12 00:00:00 |
|   105414 |        33 | 2013-02-11 00:00:00 |
|   105415 |        81 | 2013-02-11 00:00:00 |
+----------+-----------+---------------------+ 
```

我想做的是删除昨天（2013-02-12）与今天（2013-02-13）具有相同 my_id 和数量的所有行。

我知道如何选择今天的所有数据：

`SELECT * FROM 'MyTable' WHERE 'updated' = CURDATE()`

我知道如何选择昨天的所有数据：

`SELECT * FROM 'MyTable' WHERE 'updated' = CURDATE()-1`

我知道 DELETE 命令 ( `DELETE FROM 'MyTable' WHERE...`) 的语法。

**如何删除昨天和今天 my_id 和 amount 匹配的行？**

在给出的示例中，我想删除这些行：

```
|   105411 |       118 | 2013-02-12 00:00:00 |
|   220801 |       240 | 2013-02-12 00:00:00 | 
```

我想保留这些行：

```
+----------+-----------+---------------------+
|    my_id |    amount | updated             |
+----------+-----------+---------------------+
|   105415 |        81 | 2013-02-13 00:00:00 |
|   105414 |        33 | 2013-02-13 00:00:00 |
|   220801 |       240 | 2013-02-13 00:00:00 |
|   105411 |       118 | 2013-02-13 00:00:00 |

|   105414 |        33 | 2013-02-11 00:00:00 |
|   105415 |        81 | 2013-02-11 00:00:00 |
+----------+-----------+---------------------+ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T14:36:43.217

对@sgeddes 的回答稍作修改，我认为这对您的回答更准确：

无论如何，请把@sgeddes 的答案作为正确答案，因为他的回答引导了这一点：

```
DELETE t1 FROM MyTable AS t1, MyTable as t2
WHERE t1.updated = CURDATE()-1
  AND t2.updated =  CURDATE()
  AND t2.my_id = t1.my_id
  And t2.amount = t1.amount; 
```

如果你有一个主键，你也可以使用它（这是我更喜欢的 SQL）

```
DELETE FROM MyTable 
WHERE  updated = CURDATE()-1 
  AND (my_id,amount) in (select my_id,amount 
                         from MyTable
                         where updated = CURDATE()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T13:36:54.420

像这样的东西应该工作：

```
DELETE M
FROM MyTable M
    INNER JOIN MyTable M2 ON
        M.My_Id = M2.My_Id AND  
        M.amount = M2.amount AND  
        M2.Updated = DATE_ADD(M.Updated, INTERVAL 1 DAY) 
```

这是更新的小提琴上面的示例数据：[http ://sqlfiddle.com/#!2/5e288/1](http://sqlfiddle.com/#!2/5e288/1)

删除后的结果：

```
MY_ID   AMOUNT  UPDATED
105415  81      February, 13 2013 00:00:00+0000
105414  33      February, 13 2013 00:00:00+0000
220801  240     February, 13 2013 00:00:00+0000
105411  118     February, 13 2013 00:00:00+0000
105414  33      February, 11 2013 00:00:00+0000
105415  81      February, 11 2013 00:00:00+0000 
```

祝你好运。

# python - Python：为什么我不能将元组解包到字典中？

> ID：14854659
> 
> 赞同：9
> 
> 时间：2013-02-13T13:27:39.593
> 
> 标签：python, dictionary, iterable-unpacking

为什么这不起作用？：

```
d["a"], d["b"] = *("foo","bar") 
```

有没有更好的方法来实现我想要实现的目标？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-13T13:28:58.087

`d`如果您事先定义字典并`*`从那里删除它，它将起作用：

```
>>> d = {}
>>> d["a"], d["b"] = ("foo","bar") 
```

事实上，你不需要 RHS 上的括号，所以这也可以：

```
>>> d['a'], d['b'] = 'foo', 'bar' 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-13T13:40:33.627

其他人已经展示了如何解压成字典。但是，在回答您的问题“有没有更好的方法”时，我认为：

```
d.update(a='foo',b='bar') 
```

更容易解析。`a`诚然，如果你有`b`哪些是*变量*，这不起作用，但你可以使用：

```
d.update({a:'foo',b:'bar'}) 
```

我认为我仍然更喜欢那个版本，原因如下：

*   它可以更好地扩展到多个（> 2）值，因为它可以更干净地分成多行
*   它可以**立即**清楚哪个键与哪个值相关联

如果你从一个 2 元组值开始，而不是像你展示的那样是静态的，你甚至可以使用`zip`：

```
d.update( zip(("a","b"),("foo","bar")) ) 
```

诚然，这不如其他两个选项好...

...而且我们刚刚介绍了您可以使用的所有 3 种方式`dict.update`:)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T13:32:36.203

这只是一个错字（`*`）。这有效（在 Python 2.7.3 中测试）：

```
d = dict()
d["a"], d["b"] = ("foo", "bar") 
```

# c# - 将 MethodInfo.Invoke 转换为 Expression.Call

> ID：14854660
> 
> 赞同：3
> 
> 时间：2013-02-13T13:27:43.123
> 
> 标签：c#, lambda, invoke, precompiled

在我的项目中，我有以下两种方法，它们用于调用具有可变数量和参数类型的其他方法：

```
 private static object InvokeMethod(MethodInfo method, MyTargetClass target, object[] initialArgs, object[] additionalArgs)
{
    object result = null;
    var methodParams = method.GetParameters();

    if (methodParams.Length == 0)
    {
        result = method.Invoke(target, null);
    }
    else
    {
        var args =  CollectArguments(method, initialArgs, paramArgs);
        // collect arguments with default values for missing ones and invoke the method
        result = method.Invoke(target,args);
    }

    return result;
}

private static object[] CollectArguments(MethodInfo method, object[] initialArgs, object[] paramArgs)
{
    List<object> allArgs = new List<object>();
    allArgs.AddRange(initialArgs);

    // append all param style args
    if (paramArgs != null)
        allArgs.AddRange(paramArgs);

    // do we have enough arguments?
    int missing = method.GetParameters().Length - allArgs.Count;

    if (missing < 0)
        throw new InvalidOperationException(string.Format("Too many arguments passed to the method {0}", method.Name));

    for (int i = 0; i < missing; i++)
    {
        // all parameters after mandatory should be with optional default values, so pass them
        allArgs.Add(Type.Missing);
    }

    return allArgs.ToArray();
} 
```

我的 InvokeMethod 经常被调用，所以我想对其进行优化。我已经在缓存 MethodInfo 引用。所有要调用的方法都有一个自定义属性，我在应用程序启动时将这些方法收集在字典中。我设法为 MyTargetClass 派生类的构造函数缓存 lambda 表达式，现在我还想为方法调用缓存 lambda 表达式。

我找到了一些如何为 Expression.Call 创建 lambda 表达式的示例，但问题是我不知道如何处理变量参数，其中还包括默认值（这就是我添加 Type.Missing 的原因）以及那里可能是参考参数。

我要调用的方法有一些额外的规则（为简洁起见省略），但基本上方法可能如下所示：

```
MyMethod1(int a, long b = 2)
MyMethod2(ref long a, ref long b, string something) 
```

我总是知道那些带有 ref 参数的特殊情况，所以在 method.Invoke 之后我收集了 ref 变量：

```
a = (long)allArgs[0];
b = (long)allArgs[1]; 
```

其中 a 和 b 由 ref 从外部传递。

**如何使用 Expression.Call 实现相同的功能？如何将变量数量的参数传递给它以及如何获取参考值？**

# common-lisp - 将对象打印为唯一字符串，可能使用其地址

> ID：14854661
> 
> 赞同：3
> 
> 时间：2013-02-13T13:27:49.573
> 
> 标签：common-lisp, identity, clos

我需要一种从 CLOS 对象创建 GraphViz 节点名称的方法，这样每个对象都有自己的节点，如果我更改我的对象并重新创建 GraphViz 可视化，我会为保留的对象获得相同的节点名称（参考） 相同。

如果我只是尝试打印我的对象，我会得到几乎很好的东西（因为我从来没有`PRINT-OBJECT`为我的班级覆盖）：

```
CL-USER> (format nil "~A" *g*)
"#<GREF {1002D22C81}>" 
```

有没有办法将那`1002D22C81`部分作为字符串？然后我可以`N1002D22C81`从中创建 GraphViz 节点名称。

或者我应该`(format nil "~A" obj)`通过抓住 之间的部分来处理结果作为字符串`{}`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-13T14:53:28.207

十六进制数是对象地址。它可以在垃圾收集后*更改。*您的实现可能会提供一个函数来直接获取它，但我认为您不应该使用它。

您可能会考虑做的是向`name`您的对象添加一个插槽，并使用例如[`gensym`](http://www.lispworks.com/documentation/HyperSpec/Body/f_gensym.htm).

如果您想跟踪所有对象，您甚至可以[`intern`](http://www.lispworks.com/documentation/HyperSpec/Body/f_intern.htm)将名称放在一个特殊的包中并将它们设置[`symbol-value`](http://www.lispworks.com/documentation/HyperSpec/Body/f_symb_5.htm)为对象（**请注意**，这将使 GC 无法收集这些对象**，**直到您使用[`unintern`](http://www.lispworks.com/documentation/HyperSpec/Body/f_uninte.htm)它们的名称，或者取消设置它们`symbol-value`，或者[删除上述特殊包装](http://www.lispworks.com/documentation/HyperSpec/Body/f_del_pk.htm)）。

PS。即使您覆盖，您也可以获得对象地址`print-object`- 只需传递`:identity t`给[`print-unreadable-object`](http://www.lispworks.com/documentation/HyperSpec/Body/m_pr_unr.htm).

聚苯乙烯。我相信您知道这`(format nil "~A" x)`与`(princ-to-string x)`.

# c# - 为什么 VS 警告我 typeof(T) 永远不是泛型方法中提供的类型，其中类型参数被限制为实现 T？

> ID：14854662
> 
> 赞同：17
> 
> 时间：2013-02-13T13:28:15.540
> 
> 标签：c#, visual-studio, generics, type-parameter

我希望这个问题是正确的，所以让我们举个例子。想象一下以下通用方法：

```
public abstract class Base : IDisposable
{
    public static IEnumerable<T> GetList<T>()
        where T : Base
    {
        // To ensure T inherits from Base.
        if (typeof(T) is Base)
            throw new NotSupportedException();

        // ...
    }
} 
```

根据[MSDN](http://msdn.microsoft.com/de-DE/library/bb384067.aspx)，关键字`where`将类型参数限制`T`为类型`Base`或从此类继承。

> [...] where 子句可以包含一个基类约束，它指出一个类型必须将指定的类作为基类（或者是该类本身）才能用作该泛型类型的类型参数。

此代码也可以编译：

```
public static T GetFirst()
    where T : Base
{
    // Call GetList explicitly using Base as type parameter.
    return (T)GetList<Base>().First();
} 
```

所以当遵循最后一个代码`typeof(T)`应该返回`Base`时，不是吗？为什么 Visual Studio 然后会向我打印此警告？

> 警告 CS0184：给定的表达式永远不是提供的 ('Demo.Base') 类型。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-13T13:30:01.123

`typeof(whatever)`总是返回一个类型的实例`Type`。`Type`不是从`Base`.

你想要的是这样的：

```
if(typeof(T) == typeof(Base))
    throw new NotSupportedException("Please specify a type derived from Base"); 
```

看起来是一样的东西是这样的：

```
if(variableOfTypeT is Base) 
```

但这有不同的含义。
第一个语句（with `typeof(Base)`）仅是`true`if `T`is `Base`。它将`false`适用于从`Base`.
第二条语句 ( `variableOfTypeT is Base`) 始终`true`在您的类中，因为任何派生自的类`Base`都将返回`true`以检查其基类。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-13T13:33:55.213

这不是你检查继承的方式。

`typeof(T)`是类型`System.Type`，不是`Base`。要查看 T 是否从 Base 派生，您应该使用[IsSubclassOf 方法](http://msdn.microsoft.com/en-us/library/system.type.issubclassof.aspx)，如下所示：

```
if(typeof(T).IsSubclassOf(typeof(Base))  ... 
```

# jakarta-ee - OAuth 2.0 和 Resteasy：当 WAR 在 EAR 中时出现 ClassNotFoundException

> ID：14854664
> 
> 赞同：0
> 
> 时间：2013-02-13T13:28:19.503
> 
> 标签：jakarta-ee, jboss, oauth-2.0, resteasy

`Jboss 7.1.1`我正在使用and设置 OAuth 2.0 服务器`Resteasy 3.0-beta-3`。我遵循了官方[文档](http://docs.jboss.org/resteasy/docs/3.0-beta-2/userguide/html/oauth2.html)，最终设法构建了一个简单的应用程序，该应用程序使用`DatabaseServerLoginModule`.

当我把战争放在耳朵里时，问题就出现了。当我重新部署应用程序时，我看到了这个错误：

```
13:32:58,336 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-3) MSC00001: Failed to start service jboss.deployment.subunit."JauBM-EAR.ear"."JauBM-WEB.war".INSTALL: org.jboss.msc.service.StartException in service jboss.deployment.subunit."JauBM-EAR.ear"."JauBM-WEB.war".INSTALL: Failed to process phase INSTALL of subdeployment "JauBM-WEB.war" of deployment "JauBM-EAR.ear"
    at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:119) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) [rt.jar:1.7.0_03]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) [rt.jar:1.7.0_03]
    at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_03]
Caused by: org.jboss.as.server.deployment.DeploymentUnitProcessingException: JBAS018096: Error instantiating container component: org.jboss.resteasy.skeleton.key.as7.OAuthAuthenticationServerValve
    at org.jboss.as.web.deployment.WarDeploymentProcessor.getInstance(WarDeploymentProcessor.java:386)
    at org.jboss.as.web.deployment.WarDeploymentProcessor.processDeployment(WarDeploymentProcessor.java:210)
    at org.jboss.as.web.deployment.WarDeploymentProcessor.deploy(WarDeploymentProcessor.java:114)
    at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:113) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
    ... 5 more
Caused by: java.lang.ClassNotFoundException: org.jboss.resteasy.skeleton.key.as7.OAuthAuthenticationServerValve from [Module "deployment.JauBM-EAR.ear.JauBM-WEB.war:main" from Service Module Loader]
    at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:190)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(ConcurrentClassLoader.java:468)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:456)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:398)
    at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:120)
    at org.jboss.as.web.deployment.WarDeploymentProcessor.getInstance(WarDeploymentProcessor.java:378)
    ... 8 more 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T15:35:53.357

我弄清楚了问题所在，所以我决定回答这个问题，以防有人遇到同样的问题。解决方案是移动`jboss-deployment-structure.xml`EAR 文件中的文件，并根据以下内容进行更改：

**`JauBM-Oauth/WebContent/WEB-INF/jboss-deployment-structure.xml`（已删除）**

```
<jboss-deployment-structure>
    <deployment>
        <dependencies>
            <module name="org.jboss.resteasy.resteasy-jaxrs" services="import"/>
            <module name="org.jboss.resteasy.resteasy-jackson-provider" services="import"/>
            <module name="org.jboss.resteasy.skeleton-key"/>
        </dependencies>
    </deployment>
</jboss-deployment-structure> 
```

**`EAR/META-INF/jboss-deployment-structure.xml`（创建）**

```
<?xml version="1.0" encoding="UTF-8"?>
<jboss-deployment-structure>
    <sub-deployment name="JauBM-Oauth.war">
        <dependencies>
            <module name="org.jboss.resteasy.resteasy-jaxrs" services="import"
                export="true" />
            <module name="org.jboss.resteasy.resteasy-jackson-provider"
                services="import" export="true" />
            <module name="org.jboss.resteasy.skeleton-key" export="true" />
        </dependencies>
    </sub-deployment>
</jboss-deployment-structure> 
```

# javascript - 如何用字符串列表制作数组

> ID：14854667
> 
> 赞同：3
> 
> 时间：2013-02-13T13:28:35.260
> 
> 标签：javascript

我有一个像这样的生成列表

> 196-1526、85-651、197-1519

我需要这样的数组。每个节点有两个部分。我只需要一个数组中每个节点的第一部分。

> 196、85、197

我已经有了这个生成 196 的代码

```
str.substr(0,str.indexOf('-')); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T13:33:00.277

您可以使用以下内容：

```
'196-1526, 85-651, 197-1519'.replace(/-\d+(,|$)/g, '').split(/\s/) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T13:31:54.710

如果它是一个数组

```
var myarray = ["196-1526", "85-651", "197-1519"];
var newarray = [];
var i = 0;
for(i = 0; i < myarray.length; i++){
  var mnode = myarray[i].split("-");
   newarray.push(mnode[0].trim());
} 
```

如果它是一个字符串

```
var myarray = "196-1526, 85-651, 197-1519".split(",");
var newarray = [];
var i = 0;
for(i = 0; i < myarray.length; i++){
  var mnode = myarray[i].split("-");
   newarray.push(mnode[0].trim());
} 
```

**演示**：http: [//jsfiddle.net/Dbbc8/](http://jsfiddle.net/Dbbc8/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-13T13:32:29.823

如果输入是字符串，您可以使用[**split()**](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/split)和[**push()**](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/push)，类似于：

```
var x = "196-1526, 85-651, 197-1519"
var y = x.split(',');

var myArray = [];

for(i = 0; i < y.length; i++){
    myArray.push(y[i].split('-')[0].trim());
} 
```

* * *

[**演示**](http://jsfiddle.net/EPU4z/)- 使用`split()`和`push()`

* * *

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T13:34:56.660

使用拆分尝试此代码

```
var text='196-1526, 85-651, 197-1519';
    var splittedtext=text.split(',');
    var numbers=new Array(); 
    for(var i=0;i<splittedtext.length;i++)
    {
        var furthsplit=splittedtext[i].split('-');
        numbers[i]=furthsplit[0];
    }
    alert(numbers); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-13T13:35:51.790

```
var pairs = str.split(", ");
var values = [];

for (var i=0; i< pairs.length; i++) {
    values.push(pairs[i].substr(0, pairs[i].indexOf('-')));
} 
```

# css - CSS过渡不是线性的

> ID：14854669
> 
> 赞同：0
> 
> 时间：2013-02-13T13:28:46.287
> 
> 标签：css, html, transitions

当悬停在图像之后时，我试图实现一些不错的过渡效果。（悬停 div 从与鼠标相同的方向出现）。

一切正常，除了“悬停”过渡不是直线，而是更像对角线和填充方式。（在下面的示例中，过渡是从左：-378px；到左：0px / 顶部是 0 ）。

正常状态：

```
<div class="hover_effect initial_hover slideFromLeft" style="display: block;">link aici</div> 
```

悬停状态（通过 jQuery 删除和添加类）：

```
<div class="slideFromLeft hover_effect initial_hover slideLeft" style="display: block;">link aici</div> 
```

我希望运动像悬停过渡一样在一条直线上，效果很好。你能指出我的错误吗？

这是html和css代码：

```
<div class="portfolio-sample regular-portfolio coding-2   isotope-item" style="position: absolute; left: 0px; top: 0px; -webkit-transform: translate(0px, 0px);">
<img width="455" height="295" src="http://localhost/wp-content/uploads/2013/01/env0251-455x295.jpg" class="attachment-portfolio-two wp-post-image" alt="env025">        
<div class="slideFromLeft hover_effect initial_hover slideLeft" style="display: block;">link aici</div>
<div class="custom_slider_shadow"></div>
</div> 
```

谢谢！

```
 .hover_effect{
-webkit-transition: all 0.3s ease;
-moz-transition: all 0.3s ease-in-out;
-o-transition: all 0.3s ease-in-out;
-ms-transition: all 0.3s ease-in-out;
transition: all 0.3s ease-in-out;
}

.initial_hover{
position: absolute;
background: rgba(75,75,75,0.7);
width: 378px;
height: 245px;
top: 260px;
}

.slideFromLeft {
top: 0px; 
left: -378px;
}

.slideLeft {
left: 0px;
} 
```

回答： 好的，我想通了 - 这是因为在 slideFromLeft 悬停后添加了 initial_hover 类。一旦我扭转这些，它就会按我的预期工作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T13:36:38.497

它不是线性的，因为它被指定为非线性的。如果你想要一个线性过渡，`ease-in-out`你应该`ease`在.`linear``.hover_effect`

# iphone - 向 UIView 添加褪色和透明度

> ID：14854677
> 
> 赞同：7
> 
> 时间：2013-02-13T13:29:00.810
> 
> 标签：iphone, ios, objective-c, uiview, quartz-core

我知道如何创建和动画视图，如 iOS 6+ 附带的新应用商店应用程序的共享子视图中的视图（见附件截图），但我不知道如何添加**具有透明度的漂亮着色效果**在这个观点上。任何人都可以提供代码示例以使`UIView`外观与屏幕截图中的完全相同？

PS `alpha`UIView 单独的属性不会做这样的事情。

![在此处输入图像描述](../Images/bba6ee2d96b7397e90d7e54d284feb93.png)

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-02-18T16:51:23.947

您可以将此方法添加到 UIView 类别并根据需要重用。它对给定视图应用从“theColor”到透明的线性黑色渐变。

为了使用 CAGradientLayer 对象，您的项目中应该有 QuartzCore.framework。

```
+ (void)addLinearGradientToView:(UIView *)theView withColor:(UIColor *)theColor transparentToOpaque:(BOOL)transparentToOpaque
{
    CAGradientLayer *gradient = [CAGradientLayer layer];

    //the gradient layer must be positioned at the origin of the view
    CGRect gradientFrame = theView.frame;
    gradientFrame.origin.x = 0;
    gradientFrame.origin.y = 0;
    gradient.frame = gradientFrame;

    //build the colors array for the gradient
    NSArray *colors = [NSArray arrayWithObjects:
                       (id)[theColor CGColor],
                       (id)[[theColor colorWithAlphaComponent:0.9f] CGColor],
                       (id)[[theColor colorWithAlphaComponent:0.6f] CGColor],
                       (id)[[theColor colorWithAlphaComponent:0.4f] CGColor],
                       (id)[[theColor colorWithAlphaComponent:0.3f] CGColor],
                       (id)[[theColor colorWithAlphaComponent:0.1f] CGColor],
                       (id)[[UIColor clearColor] CGColor],
                       nil];

    //reverse the color array if needed
    if(transparentToOpaque)
    {
       colors = [[colors reverseObjectEnumerator] allObjects];
    }

    //apply the colors and the gradient to the view
    gradient.colors = colors;

    [theView.layer insertSublayer:gradient atIndex:0];
} 
```

请注意，您应该将 view 的 backgroundColor 设置为 clearColor，这样它就不会干扰渐变。此外，对于屏幕截图中显示的结果，transparentToOpaque 标志应该是 YES。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-09-11T12:48:20.873

如果有人需要，这是 PedroSilva 的解决方案翻译成 Swift（也添加了垂直选项）

```
class func addLinearGradientToView(view: UIView, colour: UIColor, transparntToOpaque: Bool, vertical: Bool)
{
    let gradient = CAGradientLayer()
    let gradientFrame = CGRectMake(0, 0, view.frame.size.width, view.frame.size.height)
    gradient.frame = gradientFrame

    var colours = [
        colour.CGColor,
        colour.colorWithAlphaComponent(0.9).CGColor,
        colour.colorWithAlphaComponent(0.8).CGColor,
        colour.colorWithAlphaComponent(0.7).CGColor,
        colour.colorWithAlphaComponent(0.6).CGColor,
        colour.colorWithAlphaComponent(0.5).CGColor,
        colour.colorWithAlphaComponent(0.4).CGColor,
        colour.colorWithAlphaComponent(0.3).CGColor,
        colour.colorWithAlphaComponent(0.2).CGColor,
        colour.colorWithAlphaComponent(0.1).CGColor,
        UIColor.clearColor().CGColor
    ]

    if transparntToOpaque == true
    {
        colours = colours.reverse()
    }

    if vertical == true
    {
        gradient.startPoint = CGPointMake(0, 0.5)
        gradient.endPoint = CGPointMake(1, 0.5)
    }
    gradient.colors = colours
    view.layer.insertSublayer(gradient, atIndex: 0)
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-13T13:37:35.610

```
CAGradientLayer *layer = [CAGradientLayer layer];
layer.frame = yourView.bounds;
UIColor *blackColor = [UIColor colorWithWhite:0.42f alpha:1.0f];
UIColor *clearColor = [UIColor colorWithWhite:0.42f alpha:0.0f];
layer.colors = [NSArray arrayWithObjects:(id)clearColor.CGColor, (id)blackColor.CGColor, nil];
[myView.layer insertSublayer:layer atIndex:0]; 
```

`layer`您的视图层在哪里。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-16T02:17:31.847

您可以简单地使用半透明的 png 作为背景来获得这样的效果。确保将 UIView 设置`opaque`为`NO`，你会没事的。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-02-20T04:14:01.040

实现这种效果不需要任何魔法。你应该像苹果那样做。UIImageViews 带有小的、拉伸的图像。

此视图（包含图标的下半部分）使用拉伸并产生此效果的图像。

你也应该遵循这个方法。您的视图会很轻，只需在 Photoshop 中进行几次测试即可获得正确的效果。

正如我所注意到的，Apple 从未在 iPhone 上使用渐变层。它一定会消耗更多的 GPU，因为它会为他们节省很多图像......

这是一个类似的图像进行测试。 ![在此处输入图像描述](../Images/c7a828bd279188048caa205f55db7be0.png)

希望能帮助到你。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-02-20T04:55:42.737

您只需**要将视图的背景颜色的 alpha 值**设置为您想要的值。

[见附件邮政编码。转到 AlphaViewController 的 nib 文件并在那里查看](http://www.4shared.com/zip/F_pBkEFW/Alpha.html)

我只将子视图的 alpha 值设置为 70%。你可以根据你的要求去做。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-05-30T09:19:44.950

万一有人需要**Swift 3.X**

```
func addLinearGradientToView(view: UIView, colour: UIColor, transparntToOpaque: Bool, vertical: Bool)
    {
        let gradient = CAGradientLayer()
        let gradientFrame = CGRect(x: 0, y: 0, width: view.frame.size.width, height: view.frame.size.height)
        gradient.frame = gradientFrame

        var colours = [
            colour.cgColor,
            colour.withAlphaComponent(0.9).cgColor,
            colour.withAlphaComponent(0.8).cgColor,
            colour.withAlphaComponent(0.7).cgColor,
            colour.withAlphaComponent(0.6).cgColor,
            colour.withAlphaComponent(0.5).cgColor,
            colour.withAlphaComponent(0.4).cgColor,
            colour.withAlphaComponent(0.3).cgColor,
            colour.withAlphaComponent(0.2).cgColor,
            colour.withAlphaComponent(0.1).cgColor,
            UIColor.clear.cgColor
        ]

        if transparntToOpaque == true
        {
            colours = colours.reversed()
        }

        if vertical == true
        {
            gradient.startPoint =  CGPoint(x: 0, y: 0.5)
            gradient.endPoint = CGPoint(x: 0, y: 0.5)
        }
        gradient.colors = colours
        view.layer.insertSublayer(gradient, at: 0)
    } 
```

**Swift 3.x**中的其他方式

 **```
let gradient = CAGradientLayer()
gradient.frame = view.bounds
gradient.colors = [UIColor.blue.cgColor, UIColor.white.cgColor]
view.layer.insertSublayer(gradient, at: 0) 
```**

# android - 如何在android的sd卡上写

> ID：14854681
> 
> 赞同：0
> 
> 时间：2013-02-13T13:29:20.697
> 
> 标签：android, sd-card

我正在尝试在我的 sd 卡上备份短信并使其正常工作，但是当我进行备份时出现一个问题，它删除了以前存储的文件。但我想将所有文件保留在我的 SD 卡上。我正在使用此代码

```
 backup=(Button)findViewById(R.id.backup);
    backup.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {

            backupSMS();
        }
             public ArrayList<String> smsBuffer = new ArrayList<String>();
                String smsFile = "SMS"+".csv";

        private void backupSMS() {
            smsBuffer.clear();
            Uri mSmsinboxQueryUri = Uri.parse("content://sms/inbox");
            Cursor cursor1 = getContentResolver().query(
                    mSmsinboxQueryUri,
                    new String[] { "_id", "thread_id", "address", "person", "date",
                            "body", "type" }, null, null, null);
            //startManagingCursor(cursor1);
            String[] columns = new String[] { "_id", "thread_id", "address", "person", "date", "body",
                    "type" };
            if (cursor1.getCount() > 0) {
                String count = Integer.toString(cursor1.getCount());
                Log.d("Count",count);
                while (cursor1.moveToNext()) {

                     String messageId = cursor1.getString(cursor1
                            .getColumnIndex(columns[0]));

                     String threadId = cursor1.getString(cursor1
                            .getColumnIndex(columns[1]));

                    String address = cursor1.getString(cursor1
                            .getColumnIndex(columns[2]));
                    String name = cursor1.getString(cursor1
                            .getColumnIndex(columns[3]));
                    String date = cursor1.getString(cursor1
                            .getColumnIndex(columns[4]));
                    String msg = cursor1.getString(cursor1
                            .getColumnIndex(columns[5]));
                    String type = cursor1.getString(cursor1
                            .getColumnIndex(columns[6]));

                    smsBuffer.add(messageId + ","+ threadId+ ","+ address + "," + name + "," + date + " ," + msg + " ,"
                            + type);

                }           
                generateCSVFileForSMS(smsBuffer);
            }               
        }

         private void generateCSVFileForSMS(ArrayList<String> list)
        {

            try 
            {
                String storage_path = Environment.getExternalStorageDirectory().toString() + File.separator + smsFile;
                FileWriter write = new FileWriter(storage_path);

                write.append("messageId, threadId, Address, Name, Date, msg, type");
                write.append('\n');
                write.append('\n');

                for (String s : list)
                {
                    write.append(s);
                    write.append('\n');
                }
                write.flush();
                write.close();
            }

            catch (NullPointerException e) 
            {
                System.out.println("Nullpointer Exception "+e);
                 //  e.printStackTrace();
             }
            catch (IOException e) 
            {
                e.printStackTrace();
            }
            catch (Exception e) 
            {
                e.printStackTrace();
           }

        }
    }); 
```

请帮助我，我是 android 新手。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T14:53:07.747

我无法将代码发布为您要求创建目录的评论。

```
File file = new File(Environment.getExternalStorageDirectory().getAbsolutePath() + 
    "/" + getPackageName() + 
    "/SMS-" + System.currentTimeMillis() + 
    ".csv");

if(file.mkdirs()) {
    // your code here for writing the file
    // your file is now at /sdcard/your.apps.package.name/sms-currenttime.csv
} 
```

这应该在 /sdcard/your.apps.package.name/sms-currenttime.csv 创建一个文件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T13:40:20.873

如果我理解您的要求正确，您的 SMS.csv 文件将被覆盖，并且您希望继续添加其他文件而不是覆盖此文件。

线

`String smsFile = "SMS"+".csv";`

需要更改为类似

```
String smsFile = "SMS-" + SystemClock.currentThreadTimeMillis() + ".csv"; 
```

这应该每次都创建一个新的备份文件。

# javascript - Javascript 正则表达式对象

> ID：14854689
> 
> 赞同：1
> 
> 时间：2013-02-13T13:29:41.747
> 
> 标签：javascript, jquery

我使用下面的这个函数在表中快速查找一个项目
我的问题是这个函数只搜索给定表中包含搜索字符串的文本
我一直在尽力修改它以仅匹配以开头的文本搜索字符串但不起作用。

```
function searchTable(inputVal)
{
    var table = $('#supplier_table_body');
    table.find('tr').each(function(index, row)
    {
        var allCells = $(row).find('td');
        if(allCells.length > 0)
        {
            var found = false;
            allCells.each(function(index, td)
            {
                var regExp = new RegExp(inputVal, '^i');
                if(regExp.test($(td).text()))
                {
                    found = true;
                    return false;
                }
            });
            if(found == true)$(row).show();else $(row).hide();
        }
    });
} 
```

这是我的jQuery

```
 $('#itemname').keyup(function()
    {
        searchTable($(this).val());
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T13:32:37.123

[*字符串起始*锚](http://www.regular-expressions.info/anchors.html)不是[正则表达式修饰符标志](http://www.regular-expressions.info/modifiers.html)，但需要是表达式的一部分：

```
var regExp = new RegExp('^'+inputVal, 'i'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T13:31:59.877

不确定它是否有效，但您可以尝试在 inputVal 之前添加一个插入符号 ( ^ )，同时创建 RegExp。

这应该只允许以 inputVal 开头的单词。

干杯，

编辑：

像这样：

```
new RegExp("^" + inputVal, "i") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T13:35:26.093

我认为你应该使用 \b: `new RegExp("\\b" + inputVal, "i")`。它找到以 inputVal 开头的匹配项。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T13:34:57.717

这个答案作为社区 wiki 答案发布，因为我认为它解决了您遇到的问题并简化了您的代码（但作为评论发布太长），所以我建议，虽然目前未经测试，但将您的功能修改为：

```
function searchTable(needle){
    var table = $('#supplier_table_body'),
        cells = table.find('td');
    cells.filter(function(){
        return this.textContent.indexOf(needle) !== 0;
    }).closest('tr').hide();
} 
```

[简单的概念证明](http://jsfiddle.net/davidThomas/Y3Nx6/)。

# c# - 使用继承自 EventArgs 的类作为参数是否正常？

> ID：14854692
> 
> 赞同：0
> 
> 时间：2013-02-13T13:29:49.707
> 
> 标签：c#, .net, coding-style

使用从 EventArgs 继承的类作为方法中的参数是正常的做法，还是我应该制作接口。例如：

```
public class EvArgsTest : EventArgs
{
  public string Test { get { return "test"; } }
}

public foo()
{
   zoo(new EvArgsTest());
}

public zoo(EvArgsTest tr)
{
   Console.WriteLine(EvArgsTest.Test());
} 
```

是不是很好的风格？（当然，如果我已经在使用 EvArgsTest 进行事件）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T13:43:42.197

这真是一个不好的做法！

`EventArgs`旨在与事件一起使用。

来自 MSDN

> EventArgs 类表示包含事件数据的类的基类，并为不包含事件数据的事件提供一个值。

我不明白为什么需要将继承 EventArgs 的对象传递给方法..

创建自己的类或向方法添加更多参数

# .htaccess - 在url中隐藏文件扩展名？

> ID：14854693
> 
> 赞同：1
> 
> 时间：2013-02-13T13:29:52.793
> 
> 标签：.htaccess

可以帮助我吗？我想在我的网站的 url 中隐藏文件扩展名。

所以一个例子是 [http://www.mysite.com/home.php](http://www.mysite.com/home.php) [http://www.mysite.com/control.php](http://www.mysite.com/control.php)

而是显示为 [http://www.mysite.com/home](http://www.mysite.com/home) [http://www.mysite.com/control](http://www.mysite.com/control)

我一直在研究这个，发现这个代码似乎隐藏了 url 中的文件扩展名，但现在我的链接不起作用，我收到 404 错误。我认为我需要修改我的站点链接路径或类似的东西。

有人可以告诉我我需要做什么，这是我在.htaccess中使用的代码：

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^([^/]+)/$ $1.php
RewriteCond %{THE_REQUEST} ^[A-Z]+\ /([^/]+/)*[^.]+\.php(\?[^\ ]*)?\ HTTP/
RewriteRule ^(([^/]+/)*[^.]+)\.php$ http://www.mysite.com/$1 [R=301,L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !(\.[a-zA-Z0-9]{1,5}|/)$
RewriteRule (.*)$ http://www.mysite.com/$1/ [R=301,L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T13:35:14.440

谷歌可以在堆栈之前提供帮助:)

```
 RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.html -f
RewriteRule ^([^/]+)/$ $1.html 

# Forces a trailing slash to be added
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !(\.[a-zA-Z0-9]{1,5}|/)$
RewriteRule (.*)$ /$1/ [R=301,L] 
```

[http://eisabainyo.net/weblog/2007/08/19/removing-file-extension-via-htaccess/](http://eisabainyo.net/weblog/2007/08/19/removing-file-extension-via-htaccess/) 另请查看 [制作重写器删除 .php 扩展名？](https://stackoverflow.com/questions/781738/making-a-rewriterule-remove-php-extension)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T13:38:12.127

如果要隐藏所有扩展名（不仅仅是 .php、.html），请使用：

```
Options +FollowSymLinks +MultiViews 
```

在你的 httpd.conf 或 .htaccess

# c# - 选择可用房间

> ID：14854695
> 
> 赞同：1
> 
> 时间：2013-02-13T13:29:53.370
> 
> 标签：c#, asp.net, sql

我正在创建一个房间预订系统。

我需要创建一个 SQL 查询，以便一旦用户选择了日期，就会显示在特定日期特定时间可用的房间列表。但我只存储预订的房间。

目前包含在其中的 3 个表是`Tbl_Room`,`Tbl_Booking`和`Tbl_TimeSlot`

`Tbl_Room`存储所有不同的房间。

`Tbl_Booking`存储预订日期、RoomID、TimeslotID、BookingName

`Tbl_TimeSlot`包含 StartTime 和 EndTime

因此，我想显示可用于选定日期和选定时间的每个时间段。我试过的 SQL 查询是：

```
SELECT
    Tbl_TimeSlot.TimeslotID_PK, 
    Tbl_TimeSlot.StartTime, 
    Tbl_TimeSlot.EndTime,
    Tbl_Booking.RoomID_FK, 
    Tbl_Booking.BookingName, 
    Tbl_Booking.BookingDate,  
    Tbl_Room.RoomName         
FROM
    Tbl_Room RIGHT 
    OUTER JOIN
        Tbl_Booking ON Tbl_Room.RoomID_PK = Tbl_Booking.RoomID_FK 
    RIGHT OUTER JOIN
        Tbl_TimeSlot ON Tbl_Booking.TimeSlotID_FK = Tbl_TimeSlot.TimeslotID_PK
WHERE (Tbl_Booking.BookingDate <> @BookingDate)
    AND (Tbl_Booking.RoomID_FK <> @RoomID) 
```

但是什么都没有出现。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T13:41:38.037

由于您需要给定时间段内的可用房间，我认为您应该有 2 个输入参数：`@FromBookingDate`和`@ToBookingDate`。

然后，您可以在数据库中查询该时间段内被**占用**的房间。

在获得已占用房间列表后，您只需假设**其他**房间可用。

获取占用房间的示例：

```
select b.RoomId from Tbl_Booking b
inner join Tbl_TimeSlot s on b.RoomId = s.RoomId
where s.StartTime <= @ToBookingDate and s.EndTime > @FromBookingDate 
```

获取可用房间：

```
select * from Tbl_Room where id not in ( ...<occupied rooms>... ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T13:45:19.793

您想要每个房间的外部连接，然后过滤没有预订的房间。也就是说，使用外连接，其他表为NULL的记录。

```
SELECT ...
FROM Tbl_Room
  LEFT OUTER JOIN Tbl_Booking ON Tbl_Room.RoomID_PK = Tbl_Booking.RoomID_FK 
WHERE Tbl_Booking.BookingDate = @BookingDate
  AND Tbl_Booking.RoomID_FK IS NULL 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T17:01:17.780

使用 CROSS JOIN 将 Tbl_Room 与 Tbl_TimeSlot 相乘（生成：房间 x 时间段 1 天），然后减去已预订的房间 x 时间段 @BookingDate ，如下所示：

```
 SELECT Tbl_Room.RoomName, Tbl_TimeSlot.StartTime
 FROM Tbl_TimeSlot CROSS JOIN Tbl_Room
 EXCEPT
 (SELECT Tbl_Room.RoomName, Tbl_TimeSlot.StartTime
  FROM Tbl_TimeSlot CROSS JOIN Tbl_Room 
    FULL OUTER JOIN Tbl_Booking 
        ON Tbl_TimeSlot.TimeslotID_PK = Tbl_Booking.TimeSlotID_FK
 WHERE (Tbl_Booking.BookingDate = @BookingDate)) 
```

该查询在给定日期（@BookingDate）产生空房间和空槽时间。

# powershell - convertto-html 输出字符代码而不是字符

> ID：14854698
> 
> 赞同：0
> 
> 时间：2013-02-13T13:29:58.070
> 
> 标签：powershell, powershell-3.0

嗨，我编写了一个简单的脚本，用于在 html 中输出 quickfixengineering，但有些东西并没有真正令人满意。

```
$qfe = gwmi -class win32_quickfixengineering
$qfe | select-object -property HotFixID, Description, Caption, 
@{LABEL="URL"; EXPRESSION={ "<a href=""" + $_.caption + """>" + $_.caption + "</a>" } } |
ConvertTo-html -Head $style -body "<H2>Windows Update Information (quickfixengineering)
</H2><H3>Creation Date: $date  /  Entries found: $fixcount</H3> " |
Out-File $scriptpath\html\$file 
```

我的想法是在将其转换为 html 之前将标题属性放在 html 链接标签中，但是当它实际转换时，某些字符会转换为 html 字符代码。

像这样：

```
&lt;a href=&quot;http://go.microsoft.com/fwlink/?LinkId=133041&quot;&gt;http:
//go.microsoft.com/fwlink/?LinkId=133041&lt;/a&gt; 
```

我尝试了几件事。'' 字符也没有真正帮助我（不知道如何用英语称呼这些。）如果事情不够字面化，这些会使它更加字面化。

有没有人有想法/可以帮我解决这个问题:) tnx

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T13:57:53.737

在保存之前尝试对其进行解码：

```
$qfe = gwmi -class win32_quickfixengineering
$html = $qfe | select-object -property HotFixID, Description, Caption, 
@{LABEL="URL"; EXPRESSION={ "<a href=""" + $_.caption + """>" + $_.caption + "</a>" } } |
ConvertTo-html -Head $style -body "<H2>Windows Update Information (quickfixengineering)
</H2><H3>Creation Date: $date  /  Entries found: $fixcount</H3> "

#Decode lines with link and save
$html = $html | % { if($_ -match 'a href' ) { [System.Web.HttpUtility]::HtmlDecode($_) } else { $_ } }
$html | Out-File $scriptpath\html\$file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T14:03:51.557

试试这个：

```
$qfe = gwmi -class win32_quickfixengineering
$qfe | select-object -property HotFixID, Description, Caption, 
@{LABEL="URL"; EXPRESSION={ "<a href=""" + $_.caption + """>" + $_.caption + "</a>" } } |
ConvertTo-html -Head $style -body "<H2>Windows Update Information (quickfixengineering)
</H2><H3>Creation Date: $date  /  Entries found: $fixcount</H3> " |
% { ($_.Replace("&lt;","<")).Replace("&gt;",">").replace("&quot;",'"') }|
Out-File $scriptpath\html\$file 
```

# css - css3简单动画不起作用

> ID：14854699
> 
> 赞同：0
> 
> 时间：2013-02-13T13:29:58.443
> 
> 标签：css

我有一个带有 css3 的动画

```
@keyframes aia2{
from{ opacity:1}
to{ opacity:0}
}/* similar with other prefixes */

.animate{
-webkit-animation: aia2 5s linear infinite alternate;
   -moz-animation: aia2 5s linear infinite alternate;
    -ms-animation: aia2 5s linear infinite alternate;
     -o-animation: aia2 5s linear infinite alternate;
        animation: aia2 5s linear infinite alternate; 
} 
```

html

```
<ul>
<li class="item" id="term1">1</li>
<li class="item" id="term2">2</li>
<li class="item" id="term3">3</li>
</ul> 
```

我需要为 li 设置动画，但它不起作用

```
$(".item").removeClass("animate");
$(specified id).addClass("animate"); 
```

我正在将动画类添加到 an li 并删除其他 li 标签。

我也试过用setTimeout，没用。

我怎么能得到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T11:33:17.793

而不是添加和删除类更改动画播放状态。使用 css3`animation-play-state`属性

参考

[https://developer.mozilla.org/en-US/docs/CSS/animation-play-state](https://developer.mozilla.org/en-US/docs/CSS/animation-play-state)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T13:41:48.477

如果你使用这个：

```
@keyframes aia2{
     0%   { opacity: 1; }
     50%  { opacity: 0.5; }
     100% { opacity: 0; }
    } 
```

你可以为不同的套件使用@-moz-keyframes、@-webkit-keyframes 和@-o-keyframes

你可以[在这里找到我的测试](http://jsfiddle.net/waUgK/)，它会永远持续下去

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T14:01:50.207

实际上，这行得通。但只有一次：

**CSS**

```
@keyframes myfirst
{
from {opacity: 0;}
to {opacity: 1;}
}

@-moz-keyframes myfirst /* Firefox */
{
from {opacity: 0;}
to {opacity: 1;}
}

@-webkit-keyframes myfirst /* Safari and Chrome */
{
from {opacity: 0;}
to {opacity: 1;}
}

@-o-keyframes myfirst /* Opera */
{
from {opacity: 0;}
to {opacity: 1;}
}

.animate{
    -webkit-animation-name: myfirst;
    -webkit-animation-duration: 5s;
    -webkit-animation-direction: linear;
    -webkit-animation-timing-function: infinite;
} 
```

**HTML**

```
<ul>
    <li class="item animate" id="term1">1</li>
    <li class="item" id="term2">2</li>
    <li class="item" id="term3">3</li>
</ul> 
```

### 小提琴：http: [//jsfiddle.net/praveenscience/ACUEg/](http://jsfiddle.net/praveenscience/ACUEg/)

# android - Android SupportMapFragment 不断增加内存使用量

> ID：14854700
> 
> 赞同：0
> 
> 时间：2013-02-13T13:29:58.520
> 
> 标签：android, google-maps, android-fragments

`SupportMapFragment`我在里面有一个活动`Layout`。现在我注意到，当我在这个活动中时，我的记忆会随着时间的推移而增长，即使我只是访问这个活动并继续进一步。

因此，从 17MB 的 RAM 使用量在 10 分钟内增加到 50MB。

我确定这个问题与 UI 中的 SupportMapFragment 或 Map Object 或 Fragment 有关。

有什么建议我应该尝试吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T13:59:08.673

[这是在http://code.google.com/p/gmaps-api-issues/issues/detail?id=4766](http://code.google.com/p/gmaps-api-issues/issues/detail?id=4766)提交的错误。它被标记为 FixedButNotReleased，所以我想我们只需要等到下一个版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T14:00:12.117

这是 Google Maps Android v2 API 上的一个已知错误。

[http://code.google.com/p/gmaps-api-issues/issues/detail?id=4766&q=apitype%3DAndroid2&colspec=ID%20Type%20Status%20Introduced%20Fixed%20Summary%20Stars%20ApiType%20Internal](http://code.google.com/p/gmaps-api-issues/issues/detail?id=4766&q=apitype%3DAndroid2&colspec=ID%20Type%20Status%20Introduced%20Fixed%20Summary%20Stars%20ApiType%20Internal)

# .net - 如何从 silverlight 应用程序运行 shell 脚本？

> ID：14854703
> 
> 赞同：0
> 
> 时间：2013-02-13T13:30:10.827
> 
> 标签：.net, linux, silverlight, shell

我正在开发一个 silverlight 应用程序 (c#)，我需要运行在 linux 服务器中找到的 shell 脚本？

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-08T09:08:01.007

[@technosaurus](https://stackoverflow.com/questions/14854703/how-to-run-a-shell-script-from-silverlight-application#comment20835036_14854703)是对的。您可以使用 cgi（perl、ruby 等）或简单的 http(s) 请求到您的服务器。喜欢：`http://your-server-address/execute.php`并使用 php（或其他）命令[shell_exec](http://php.net/manual/ru/function.shell-exec.php)或 ruby[​​ commands](https://stackoverflow.com/questions/2232/calling-bash-commands-from-ruby)，或者您想要处理脚本输出并将其发送给用户的内容。

* * *

**示例：**
*应用程序（ironruby）：*

```
host = "your_server_address"
wclient = System::Net::WebClient.new
wclient.download_string_completed{|wc, e|
    # do something with e.Result
}
wclient_data.download_string_async(System::Uri.new("#{host}/get_users_dirs.php"))) 
```

*get_users_dirs.php：*

```
print shell_exec("bash ./get_users_dirs.sh"); 
```

*get_user_dirs.sh*

```
ls /home 
```

* * *

[或者您可以像PuTTY](http://www.chiark.greenend.org.uk/~sgtatham/putty/)一​​样开发自己的 ssh 客户端

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T17:39:27.857

也许在`Out of Browser`模式下运行是您正在寻找的答案。

您可以从 OOB 调用 COM，其中您的 Silverlight 程序集被配置为以提升的权限运行 Out Of Browser。从那里你几乎可以做任何事情。

例如：

```
if (Application.Current.HasElevatedPermissions && ComAutomationFactory.IsAvailable)
{
    dynamic cmd = ComAutomationFactory.CreateObject("WScript.Shell");
    cmd.Run(@"c:\windows\notepad.exe", 1, true);
} 
```

[本文将帮助您设置项目](http://jmorrill.hjtcentral.com/Home/tabid/428/EntryId/441/Silverlight-and-Desktop-NET-Integration.aspx)

`Also note that this will only work in Windows, hence the check for ComAutomationFactory.IsAvailable`

# php - PHP- 不使用 file_get_contents 的文件上传和下载

> ID：14854706
> 
> 赞同：1
> 
> 时间：2013-02-13T13:30:23.310
> 
> 标签：php

我使用以下php文件将数据上传到本地存储并将路径存储在db中。文件正在上传。但是当我尝试下载它时，我没有得到文件的内容。我只得到空白页。**我不能使用 File_get 内容方法，因为上传的数据可能更大。**我能为此做些什么？

这是我的上传代码 Upload.php

```
$id=$_POST['id'];
$fileTypes = array('txt','doc','docx','ppt','pptx','pdf');
$fileParts = pathinfo($_FILES['uploaded_file']['name']);
if(in_array($fileParts['extension'],$fileTypes))
{
    $filename = $_FILES["uploaded_file"]["name"];
    $location = "D:\\Uploads/";
    $path = $location . basename( $_FILES['uploaded_file']['name']); 
    move_uploaded_file( $_FILES["uploaded_file"]["tmp_name"], $location . $_FILES['uploaded_file']['name']);
    $result = $mysqli->multi_query("call sp_upload_file('".$id."','" . $filename . "','".$path."')");
    if ($result) 
    {
        do {
            if ($temp_resource = $mysqli->use_result()) 
            {
                while ($row = $temp_resource->fetch_array(MYSQLI_ASSOC)) {
                    array_push($rows, $row);
                }
                $temp_resource->free_result();
            }
        } while ($mysqli->next_result());
    }
    echo "Successfully Uploaded";
}
else
{
    echo " Invalid File Type";
} 
```

存储过程 sp_upload_file 如下。

```
 DELIMITER $$

USE `test`$$

DROP PROCEDURE IF EXISTS `sp_upload_file`$$

CREATE PROCEDURE `sp_upload_file`(IN id INT,IN filename VARCHAR(200),IN path VARCHAR(200))
BEGIN
IF EXISTS(SELECT `Training_Id`, `Material_Name`,Material_Path FROM `training_material` WHERE `Training_Id` = id AND `Material_Name` = filename AND `Material_Path` = path )
THEN

 UPDATE 
    `training_material` 
 SET 
    Training_Id =  id,
    Material_Name = filename,

    Material_Path = path,
    Modified_Date = NOW()
WHERE 
    `Training_Id` = id AND 
    `Material_Name` = filename AND 
    `Material_Path` = path ;
 ELSE
 INSERT INTO 
 `training_material`
    (`Training_Id`,
    `Material_Name`,
    `Material_Path`,

    `Created_Date`,
    `Modified_Date`)
 VALUES 
    (id,
    filename,
    path,

    NOW()
    ,NOW());
END IF;
END$$

DELIMITER ; 
```

以下是下载文件的代码

```
if(isset($_GET['id']))
{
$id=$_GET['id'];
$mid=$_GET['mid'];
$query = "call sp_download_file('".$mid."')";
$result = mysql_query($query) or die('Error, query failed');
list($name) = mysql_fetch_array($result);
header("Content-Disposition: attachment; filename=$name");
ob_clean();
flush();

exit; 
```

}

下面是下载数据的sp：

```
DELIMITER $$

USE `test`$$

DROP PROCEDURE IF EXISTS `sp_download_file`$$

CREATE DEFINER=`root`@`%` PROCEDURE `sp_download_file`(IN id INT)
BEGIN
 SELECT Material_Name FROM training_material WHERE `Training_Material_Id` = id;

END$$

DELIMITER ; 
```

请对此提供帮助。我知道我需要更改 download.php 文件。但不知道我需要进行哪些更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T13:47:13.980

这是一个简单的下载脚本。您可以使用查询来获取文件（或相对文件）的完整路径。它内置了自己的缓冲区，因此无需使用`ob_start`

```
 if ($fd = fopen ($fullPath, "r")) {
        $fsize = filesize($fullPath);
        $path_parts = pathinfo($fullPath);

        header("Content-type: application/octet-stream");
        header("Content-Disposition: attachment; filename=\"".$path_parts["basename"]."\"");
        header("Content-length: $fsize");
        header("Cache-control: private"); //use this to open files directly
        while(!feof($fd)) {
            $buffer = fread($fd, 2048);
            echo $buffer;
        }
    } 
```

# c++ - 任务委托调度器

> ID：14854721
> 
> 赞同：0
> 
> 时间：2013-02-13T13:31:20.563
> 
> 标签：c++, multithreading, scheduled-tasks, scheduling, load-balancing

我实现了调度程序 **任务委托**调度程序而不是**任务窃取**调度程序。所以这个方法的基本思想是每个线程都有自己的私有本地队列。每当产生任务时，在任务进入本地队列之前，会在队列之间进行搜索操作，并通过比较每个队列的大小来找到最小大小的队列。每次使用这个最小大小的队列来将任务排入队列。这是一种将工作压力从繁忙线程的队列中转移并将作业委托给最不繁忙线程的队列的方法。

这种调度技术的问题是，我们不知道每个任务需要多少时间才能完成。IE。队列可能具有最小计数，但任务可能仍在运行，另一方面队列可能具有更高值的计数器，但任务可能很快完成。有什么想法可以解决这个问题吗？

我正在使用我们自己的多线程库中的 linux、C++ 编程语言来实现多速率同步数据流范例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T14:45:00.453

看来您的调度策略不适合手头的工作。通常这种忽略任务完成时间的朴素调度仅在任务的执行时间相对相等时才有意义。我建议做一些研究。一个好的起点是[维基百科的调度文章](http://en.wikipedia.org/wiki/Scheduling_%28computing%29)，但这当然只是冰山一角。我还要考虑**任务委派**要求的第二个（和第三个），因为时间片任务操作允许您通过考虑任务的“历史”来细粒度的队列管理。但是，如果客户端被设计成每个客户端始终发送相同“类型”的任务，那么您可以利用这些知识获得类似的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T14:32:56.773

据我在我的队列理论课上记得，最公平的（在所有这些中）系统是具有单个队列和多个服务器的系统。使用这样的系统可以确保所有任务的最低预期平均执行时间和最大的利用率（它工作的时间百分比，我不确定这个术语是否正确）。

换句话说，除非您有一些优先任务，否则请重新考虑您的任务委派调度程序实现。

# c# - 如何获取测试用例描述？

> ID：14854723
> 
> 赞同：4
> 
> 时间：2013-02-13T13:31:25.583
> 
> 标签：c#, unit-testing, nunit, automated-tests

我对一些测试用例进行了 nunit 测试。

```
[TestCase(1,Description="first")]
[TestCase(2, Description="second")]
public void A(int a)
{
    Assert.True(a==1);
} 
```

如何获取每个测试用例的描述。我尝试在 EventListener 的 TestFinished() 方法中执行此操作，但我只能获得描述数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-10T07:39:57.037

你试过 NUnit 的[CurrentContext](http://www.nunit.org/index.php?p=testContext&r=2.6)吗？

也许（我没有看过）Description 的值在 TestContext.CurrentContext.Test.Properties 中，您至少需要 NUnit 2.6.2 参见[NUnit 2.6.2 TestContext.CurrentContext 始终为空](https://stackoverflow.com/questions/18528413/nunit-2-6-2-testcontext-currentcontext-always-null)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-05-03T15:49:45.180

我想你应该看看看看这个答案[here](https://stackoverflow.com/questions/11762648/how-to-get-unit-test-method-attributes-at-runtime-from-within-an-nunit-test-run)

但是当我尝试这个答案中提到的内容时，它给了我不需要的属性列表本身的对象，当我使用它时它对我很好：

```
TestContext.CurrentContext.Test.Properties.Get("Description") 
```

我希望它也适用于你

# css - 当我将文本放入其中时，DIV 会移动

> ID：14854725
> 
> 赞同：21
> 
> 时间：2013-02-13T13:31:37.187
> 
> 标签：css, html, text

[我花了一些时间在这个网站](http://dev4.peeknpoke.co.uk/dogs/jester.php)上用 div 层创建了一个谱系，我把它们都很好地对齐了。

但是当我将文本放入其中时，无论是在 div 还是在 p 标签中，它都会将 div 层显着向下移动。

它似乎没有添加任何边距或填充或我在检查元素时可以看到的任何其他内容，并且它似乎没有影响孙 div 层。

**[JSFiddle](http://jsfiddle.net/qfjkLze3/)**

HTML：

```
<div id="pedigree">
    <div id="parentwrap">
        <div class="parent">test</div>
    </div>
    <div id="childwrap">
        <div class="child">
            <p>Am. Ch. Kenai's Aldebaran</p>
        </div>
        <div class="child">
            <p>pAm. Ch. Santa Clara Del Viento</p>
        </div>
    </div>
    <div id="grandchildwrap">
        <div class="grandchild">Am. Can. Ch. Ryzann's Eclipse at Kenai</div>
        <div class="grandchild">Am. Ch. Timber Ridge's Abi of Kenai</div>
        <div class="grandchild">Am. Ch. Sky Run Gavril Virtual Zip JC</div>
        <div class="grandchild">Am. Can. Ch. Tazeb's Zena</div>
    </div>
</div> 
```

CSS：

```
#pedigree {
    position: relative;
    width: 584px;
    height: 204px;
    margin: 0 auto;
    margin-top: 15px;
    padding-bottom: 15px;
    border-bottom: 1px dotted black;
}
#parentwrap {
    position: relative;
    display: inline-block;
    margin: 0;
    width:auto;
    height: 205px;
}
.parent {
    position: relative;
    width: 190px;
    height: 202px;
    margin: 0px;
    padding: 0px;
    border: 1px solid black;
}
#childwrap {
    position: relative;
    display: inline-block;
    margin: 0;
    width: auto;
    height: 205px;
}
.child {
    position: relative;
    width: 190px;
    height: 95px;
    margin: 0px;
    padding: 0px;
    border: 1px solid black;
    margin-bottom: 10px;
}
#grandchildwrap {
    position: relative;
    display: inline-block;
    width: auto;
    height: 205px;
}
.grandchild {
    position: relative;
    width: 190px;
    height: 46px;
    margin: 0px;
    padding: 0px;
    border: 1px solid black;
    margin-bottom: 4px;
}
.parent, .child, .grandchild {
    -moz-border-radius: 35px;
    border-radius: 35px; 
```

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-02-13T13:48:00.013

添加文本会为 #parentwrap div 创建基线，因此 div 会与之对齐。没有文本，就没有基线，因此 div 采用后备布局模式。

要修复，请设置添加`#parentwrap { vertical-align:top; }`

# c# - NET Framework String.Remove(char) 方法中的错误？

> ID：14854733
> 
> 赞同：-2
> 
> 时间：2013-02-13T13:32:04.353
> 
> 标签：c#, .net, string, overloading

```
("hello").Remove('e'); 
```

所以`String.Remove`有很多重载，其中之一是：`String.Remove(int startIndex)`

不知何故，我写的字符`'e'`被转换为 an`int`并且调用了 WRONG 重载函数。这是完全出乎意料的行为。我是否必须忍受这个，或者是否有可能提交一个错误，以便在（神圣的）.NET 框架的下一个版本中得到纠正？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-13T13:35:14.113

[String.Remove](http://msdn.microsoft.com/en-us/library/143t8z3d.aspx)正好有**2 个**重载，它们都以 a`int`作为它们的第一个参数。

我相信您正在寻找[String.Replace](http://msdn.microsoft.com/en-us/library/system.string.replace.aspx)，如

```
string newString = "hello".Replace("e", string.Empty); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-13T13:34:13.260

没有`Remove`一种方法需要`char`...

[http://msdn.microsoft.com/en-us/library/143t8z3d.aspx](http://msdn.microsoft.com/en-us/library/143t8z3d.aspx)

但是，`char`可以隐式转换为 a `int`，因此在您的情况下是这样。但它实际上不会删除 letter `e`，而是删除 index 处的字符`(int)'e'`（在您的情况下，这将在运行时超出范围）。

如果要“删除”字母`e`，则：

```
var newString = "Hello".Replace("e", ""); 
```

我预测未来可能会出现字符串的不变性。祝你好运 ;-）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-13T13:36:02.270

请查看方法的智能感知：它是：

```
 //
    // Summary:
    //     Returns a new string in which all the characters in the current instance,
    //     beginning at a specified position and continuing through the last position,
    //     have been deleted.
    //
    // Parameters:
    //   startIndex:
    //     The zero-based position to begin deleting characters.
    //
    // Returns:
    //     A new string that is equivalent to this string except for the removed characters.
    //
    // Exceptions:
    //   System.ArgumentOutOfRangeException:
    //     startIndex is less than zero.-or- startIndex specifies a position that is
    //     not within this string.
    public string Remove(int startIndex); 
```

它照它说的去做；这不是你想要的方法。你想要的是：

```
string s = "hello".Replace("e",""); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-13T13:35:30.497

Remove 将整数作为其参数，而不是字符。'e' 变成 101 作为 int。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-13T13:36:27.693

你的问题是什么？

由于没有采用`char`as 参数的重载，因此您不能期望以`'e'`这种方式删除。

只需使用`string.Replace(string, string)`.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-13T13:36:35.520

string.Remove() 只有 2 个重载，其中一个接受 int 参数（并且没有一个接受 char 参数）。

字符可以轻松转换为整数。

因此 string.Remove(int) 被调用。

不是错误。:)

# android - 单击编辑文本打开菜单

> ID：14854734
> 
> 赞同：-1
> 
> 时间：2013-02-13T13:32:07.703
> 
> 标签：android, android-edittext

我的要求是在使用“粗体”、“斜体”、“下划线”、“字体”和“颜色”选项单击编辑文本时打开一个菜单。

请有人可以帮我解决这个问题..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T13:43:34.867

以下是我最终解决此问题的方法：

```
 EditText menuEdit = (EditText) activity.findViewById(R.id.menuImageView);
    menuEdit.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            activity.openOptionsMenu(); //This is the key method!
        }
    }); 
```

* * *

```
public boolean onCreateOptionsMenu(Menu menu) {
    com.actionbarsherlock.view.MenuInflater inflater = getSupportMenuInflater();
    inflater.inflate(R.menu.main_menu, menu);
    return true;    
} 
```

* * *

```
public boolean onMenuItemClick(MenuItem item) {
     switch (item.getItemId()) {
        case R.id.demographics:

            return true;
        case R.id.settings:
            Log.v("v", "settings clicked");
            return true;
        default:
            return false;
     }
} 
```

# java - selenium WebDriver，无需任何互联网浏览器即可工作。

> ID：14854736
> 
> 赞同：3
> 
> 时间：2013-02-13T13:32:12.617
> 
> 标签：java, selenium, httprequest, selenium-webdriver, httpresponse

我有简单的硒课。它工作得很好。现在我很感兴趣，如何在控制台模式下唱同样的歌。换句话说。我需要一个结果（在代码中，如果请求成功与否。）我不需要在网络浏览器中显示。如果一切正常，我需要一个返回值，如果不是另一个返回值（如真或假）；

```
import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.firefox.FirefoxDriver;

 WebDriver driver;
 WebElement loginInput;
 WebElement passwordInput;
 WebElement loginSubmit;
 driver = new FirefoxDriver();     

 driver.get("URL");
 loginInput = driver.findElement(By.id("id"));

 loginInput.sendKeys("ninotyesh");
 passwordInput =driver.findElement(By.id("id"));
 passwordInput.sendKeys("key");
 loginSubmit = driver.findElement(By.id("id"));
 loginSubmit.click(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T13:42:50.793

您可能会考虑在其中运行脚本`HTMLUnitDriver`- 请参阅有关它的[简短帮助](http://code.google.com/p/selenium/wiki/HtmlUnitDriver)

在你的代码结束时，我会检查成功登录后应该存在的一些元素，并打印出 TRUE 以防驱动程序找到它。

# c# - 一行中的辅助表行

> ID：14854737
> 
> 赞同：0
> 
> 时间：2013-02-13T13:32:18.873
> 
> 标签：c#, sql, sqlite

考虑下表：

### 爸爸桌

```
daddy_id | daddy_name
       1 | daddyA
       2 | daddyB 
```

* * *

### 子表

```
child_id | child_name | daddy_id
       1 | childA     | 1
       2 | childB     | 1
       3 | childC     | 1
       4 | childD     | 2 
```

* * *

出于特殊原因，我需要一些返回结果集的查询，如下所示：

### 结果集 1

```
daddy_id | daddy_name | child_id1 | child_id2 | child_id3 |
       1 | daddyA     | childA    | childB    | childC    | 
```

### 结果集 2

```
daddy_id | daddy_name | child_id1
       2 | daddyB     | childD 
```

我的问题是，我应该继续努力实现这一目标吗？仅使用 C# 和 Sqlite 就可以实现这一点吗？

**注意**：我正在使用 .NET 框架 4.0 的通用[数据读取器](http://msdn.microsoft.com/en-us/library/system.data.common.dbdatareader%28v=vs.100%29.aspx)，但需要一些与 sqlite3 一起使用的查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T15:11:14.777

您可以尝试以下查询：

```
SELECT daddy_id,
       daddy_name,
       (SELECT group_concat(child_name)
        FROM children
        WHERE children.daddy_id = dads.daddy_id
       ) AS children
FROM dads 
```

这会给你这样的结果：

```
daddy_id | daddy_name | children
       1 | daddyA     | childA,childC,childB
       2 | daddyB     | childD 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T13:44:28.837

我猜“非凡”的原因是将结果数据绑定到某个 UI 组件？让查询返回可变数量的列确实不是您想要做的事情，我怀疑它甚至是可能的，更不用说可维护了。

在这种情况下，为什么不执行查询并获取具有固定列数的数据读取器并将数据读取器处理到另一个可以用作数据绑定源的集合中。

# ruby-on-rails - 如何从另一个 .rb 文件访问模块内部和类内部的 Ruby 方法

> ID：14854740
> 
> 赞同：0
> 
> 时间：2013-02-13T13:32:24.853
> 
> 标签：ruby-on-rails, ruby

我想知道如何从另一个 .rb 文件访问此模块中的方法

```
module Decisioning
  module Decision
    class OfferProxy < FinanceApplication::Offer

    def my_method
     "some value"
    end

  end
 end
end 
```

那么如何从另一个 .rb 文件访问 my_method 呢？

也许像

> 包括 ::Decisioning::Decision::OfferProxy

那我可以用吗

> 我的方法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T13:59:29.787

可能更像这样：

```
module Decisioning
  module Decision
    class OfferProxy

    def self.my_method
     "some value"
    end

  end
 end
end

class TestFile

  include Decisioning::Decision

  def test
    puts OfferProxy.my_method
  end

end

TestFile.new.test 
```

或者...

```
module Decisioning
  module Decision
    class OfferProxy

    def my_method
     "some value"
    end

  end
 end
end

class TestFile

  include Decisioning::Decision

  def test
    offer_proxy = OfferProxy.new
    puts offer_proxy.my_method
  end

end

TestFile.new.test 
```

# android - 如何在所有活动中测量 Android 中的触摸压力？

> ID：14854743
> 
> 赞同：0
> 
> 时间：2013-02-13T13:32:31.343
> 
> 标签：android

我知道通过在应用程序活动中使用 android API 提供的函数 getPressure() 很容易测量触摸压力。

但是，我想测量所有的运动事件（不仅在应用程序活动内，而且在应用程序活动之外）。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T13:36:21.330

谢天谢地，你不能。

出于安全原因，Android 不允许您拦截您自己的应用程序活动之外的任何内容的触摸事件。如果允许，恶意应用程序可以通过简单地消耗所有触摸事件来接管并使设备无用。

# c# - 使用 asp.net 的 COM 端口通信

> ID：14854755
> 
> 赞同：0
> 
> 时间：2013-02-13T13:33:09.867
> 
> 标签：c#, asp.net, serial-port, pos-for-.net

我有一个项目，我们想使用 asp.net 开发一个基于 POS 的 Web 应用程序。

我已经看过 POS for net 以及一个众所周知的事实，即由于框架发生变化，POS.net 需要一些配置文件设置更改。我的目标框架是 4.5，到目前为止我不知道还有多少库被折旧。

我尝试为概念验证创建一些示例应用程序，我厌倦了 ActiveX 组件、SL4/5 应用程序来读取客户端计算机的 COM 端口。由于它是一个开发环境，我什至尝试访问网络服务器的 COM 端口。

这些应用程序有其自身的缺点。我还想提一下，由于开发是在受控环境下进行的，因此（ActiveX 的）安全设置不是问题。

1) 使用 ActiveX 将客户端机器限制为 Windows 操作系统。有一个使用 NAPI 创建浏览器插件的选项，但我无法进一步了解它，因为它有自己的学习曲线并且编程是在 pyton 中。2) Silverlight OOB（浏览器外）应用程序看起来很有希望，但来自 [codeplex](http://www.interopcom.codeplex.com)的示例并非在所有场景中都有效

我错过了什么吗？

请注意我已经研究过 WSPOS 的实现。

到目前为止，我们看到的可以访问客户端计算机 COM 端口的应用程序会下载一个 JAR 文件。团队终于到了一个阶段，他们认为这可以使用 JAVA 而不是 C#/.net 来完成。

请让我知道我缺少什么基本点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T13:48:10.327

您对客户端计算机有多少控制权？您可以编写一个您的 Web 服务器将与之交互的 Windows 服务。您只需要知道您的用户是从哪个终端登录的。

# wix - 在 WiX 中的多个 MSi 中安装功能

> ID：14854756
> 
> 赞同：1
> 
> 时间：2013-02-13T13:33:13.883
> 
> 标签：wix, windows-installer

我正在为企业产品开发 Windows 安装程序，该产品具有不同的变体作为单独的 MSI 产品。我们必须检查，如果已经安装了另一个变体，我们无法安装产品。我创建了不同的 WIX 脚本并将它们构建为单独的产品 (MSI)。

每个变体都有一个基本框架和多个模块。我将每个模块创建为一个功能，并根据构建的变体将它们与基本功能一起包含（现在必须安装基本功能）。

我收到要求，我们必须允许在任何已安装的变体之上安装另一个变体。例如，我安装了 Product1，它具有 2 个模块以及基本框架作为三个功能（Base、Mod1、Mod2）。Product2 使用 Base 和 Mod3 构建。现在，当我在安装了 Product1 的系统中安装 Product2 时，应该只安装 Mod3。

我正在使用 WIX 3.5。

任何帮助，将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T06:45:52.310

如果没有测试，我会说你可以用[`ComponentSearch`](http://wix.sourceforge.net/manual-wix3/util_xsd_componentsearch.htm). 定义这样的搜索，搜索产品 1 的组件并将结果写入变量。然后，您可以检查该变量是否不为空，以确定产品 1 是否已安装。

```
 <Property Id="EXISTING_PRODUCT">
      <ComponentSearch Id="SearchMyProduct" Guid="{YOUR-OWN-GUID}" Type="file"/>
</Property> 
```

然后你可以[`Condition`](http://wix.sourceforge.net/manual-wix2/wix_xsd_condition.htm)在 Feature 中使用 a。

```
<Feature Title="Product2">
    <Condition Level="0">EXISTING_PRODUCT <> ""</Condition>
</Feature> 
```

您还可以使用 CustomAction 根据搜索结果定义所需的值以禁用[`Feature`](http://wix.sourceforge.net/manual-wix2/wix_xsd_feature.htm). （应该是 Level 的值）。

我还没有测试过这种方式，但我认为它应该可以工作。请尝试并提供反馈。

附加链接：

[http://wix.tramontana.co.hu/tutorial/getting-started/conditional-installation](http://wix.tramontana.co.hu/tutorial/getting-started/conditional-installation)

# java - 在 Eclipse Juno 4.2 中创建 servlet 时未自动获取 web.xml 文件

> ID：14854760
> 
> 赞同：15
> 
> 时间：2013-02-13T13:33:22.140
> 
> 标签：java, eclipse, servlets

我正在使用 Eclipse Juno 4.2、Java 1.7 和 Tomcat 7。但是在我的系统中，当我创建 servlet 时，该`web.xml`文件不会自动创建，而是在另一个系统中自动创建`web.xml`文件。我很困惑，有什么要配置的吗？

`web.xml`当我要创建一个动态项目时，我还会添加文件。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-02-13T13:40:30.777

Tomcat 7 是一个与 Servlet 3.0 兼容的容器。从 Servlet 3.0 开始，可以通过`@WebServlet`类上的注释来配置 servlet，而无需`web.xml`配置条目。仔细查看您刚刚创建的 servlet 类，上面有一个`@WebServlet`注释，其中包含您在*New Servlet*向导中指定的所有信息。

实际上，这种配置 servlet 的新方法

```
@WebServlet("/hello")
public class HelloServlet extends HttpServlet {} 
```

与配置 servlet 的传统方式完全相同

```
<servlet>
    <servlet-name>helloServlet</servlet-name>
    <servlet-class>com.example.HelloServlet</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>helloServlet</servlet-name>
    <url-pattern>/hello</url-pattern>
</servlet-mapping> 
```

`web.xml`如果您仍然希望 Eclipse出于某种原因创建条目，那么您应该在项目属性的*Project Facets*部分中将*Dynamic Web Module*版本从 3.0 更改回 2.5 。

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-05T10:26:48.497

如果您使用 Servlet 2.5 版本而不是 3.0，那么 web.xml 将自动更新以包含您创建的 servlet。*

# c# - 查询数据库打印到控制台

> ID：14854761
> 
> 赞同：1
> 
> 时间：2013-02-13T13:33:27.280
> 
> 标签：c#, sql

我想在我的数据库上写一个查询，找到所有长于 4 个字符的用户名并打印它们，我的代码是：

我还需要将其更改为列表/数组的某种返回类型吗？

```
public string[] FindNameByLength(int minimumCharNumber)
    {

        var query = from u in db.Users
                    where u.FullName.Length > minimumCharNumber
                    select u.FullName;

        string[] namesLength;
        int counter;

        foreach (var s in query)
        {
         namesLength.Concat(new[] {s });
        }
        return namesLength;

    } 
```

如何将每个名称添加到数组中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T13:38:59.293

使用[Length](http://msdn.microsoft.com/en-us/library/system.string.length.aspx)属性检查字符串长度。尝试这个 ：

```
 public void FindName()
   {
       var query = from u in db.Users
                   where u.FullName.Length > 4
                   select u.FullName;

       foreach(var s in query) 
           Console.WriteLine(s);
   } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T13:39:43.187

您只需一行代码（使用 LINQ）就可以做到这一点：

```
public void FindName()
{
    db.Users.Where(x => x.FullName.Length > 4).ToList().ForEach(x => Console.WriteLine(x.FullName));
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T13:42:09.117

写入控制台并将它们作为列表返回。您也可以将字符长度作为参数传递给函数。

```
public List<string> FindName(int ChrLength)
{
       var query = db.Users.Where(u => u.FullName.Length > ChrLength)
                           .Select(u => u.FullName).ToList();

       foreach(var s in query) 
           Console.WriteLine(s);
       return query;
} 
```

# php - 计算 PHP 数组中的负值

> ID：14854766
> 
> 赞同：0
> 
> 时间：2013-02-13T13:33:34.677
> 
> 标签：php

我有一个看起来像这样的数组：

```
array(-2, -1, 0, 1, 2, 3, 4) 
```

我只想计算负数的数量。我无法在手册中找到它说明如何执行此操作的位置，是否没有执行此操作的功能？我是否必须创建一个循环才能手动通过数组？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T13:34:58.983

> 我是否必须创建一个循环才能手动通过数组？

是的，您必须通过以下方式手动完成：

```
function count_negatives(array $array) {
    $i = 0;
    foreach ($array as $x)
        if ($x < 0) $i++;
    return $i;
} 
```

在脚本的末尾`$i`将包含负数的数量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T13:38:35.413

我应该使用这个：

```
$array = array(-2, -1, 0, 1, 2, 3, 4);

function negative($int) {
     return ($int < 0);
}

var_dump(count(array_filter($array, "negative"))); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T13:40:25.840

您可以使用`array_filter`

```
function neg($var){
    if($var < 0){
        return $var;
    }        
}

$array1 = array(-2, -1, 0, 1, 2, 3, 4);
print count(array_filter($array1, "neg")); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T13:37:09.207

使用 array_filter [http://www.php.net/manual/en/function.array-filter.php](http://www.php.net/manual/en/function.array-filter.php)

```
function isnegative($value){
    return is_numeric($value) && $value < 0;
}

$arr = array_filter(array(-1,2,3,-4), 'isnegative');

echo length($arr); 
```

玩得开心。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-13T14:39:15.200

试试这个：

```
$aValues = array(1, 2, 3, -1, -2, -3, 0);
echo sizeof(array_filter($aValues, create_function('$v', 'return $v < 0;'))); 
```

# c++ - 带有 C++ directx9 调试输出的 Windows 8

> ID：14854767
> 
> 赞同：2
> 
> 时间：2013-02-13T13:33:34.147
> 
> 标签：c++, windows-8, directx-9

我有一个游戏，我需要找出一个特定的问题。

当您最大化、移动或调整窗口大小时，DirectX 设备会重置。但在它重置之前，所有图形分配的对象都应该被释放，而不是托管池的一部分。至于这个游戏，当应用程序退出时（来自基本的 directx 调试库输出）似乎有 30 个未发布的对象，这让我假设当设备重置时，会发生同样的问题。当您最大化、移动或调整窗口大小时，这会导致游戏崩溃，这显然是不可接受的。

更多研究表明，您可以通过 DirectX 控制面板在 DirectX 中启用过度调试，除非您有 Windows 8，否则没有这样的功能可用。您可以安装 DirectX sdk 并打开 DirectX 控制面板，但 Direct3D 选项卡上的所有功能都是灰色的。然后，这种过高的调试输出级别将打印出退出时尚未释放的分配地址，这可以让我了解在重置设备事件期间实际未释放的内容。

该游戏是使用带有 Visual Studio 2010 的 DirectX 9 库在 C++ 中构建的。Windows 8 默认带有 DirectX SDK，但没有控制面板选项，您必须手动安装 DirectX SDK 才能获得它。

我的问题是，如何在我的环境（Windows 8 Pro）上启用过多的 directx 调试？在使用 Directx 调试库编译时，是否有任何方法可以潜在地启用源中每个应用程序的过度调试，或者您必须为此使用 DirectX 控制面板？

干杯，尼科。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T22:37:29.510

[您可以通过此处](http://msdn.microsoft.com/en-us/library/windows/desktop/bb173355%28v=vs.85%29.aspx)提到的注册表启用一些调试

另外，我玩弄了控制面板，发现它修改了我（windows7）机器上的以下键：

```
HKEY_CURRENT_USER\Software\Microsoft\Direct3D\ControlPanel 
```

在控制面板中选中“使用 Direct3D9 的调试版本”将“LoadDebugRuntime”注册表项设置为值 1（否则为 0）。

检查“Break On Memory Leak”将“BreakOnMemLeak”键设置为1。检查“Break On D3D Error”将“BreakOnDPF”键设置为1。

请注意，这些相同的键也在以下位置重复：

```
HKEY_CURRENT_USER\Software\Microsoft\Direct3D\ 
```

因此，如果您没有安装控制面板，它们也可以在那里工作。

# msbuild - MSBuild Web Deploy 不更新连接字符串

> ID：14854768
> 
> 赞同：5
> 
> 时间：2013-02-13T13:33:35.740
> 
> 标签：msbuild, web-deployment, publishing, msdeploy, webdeploy

我目前正在尝试在我的生产服务器上启动并运行我的部署过程。目前我正在使用网络部署和发布配置文件来实现这一点，除了更新连接字符串以适应生产服务器之外，我的一切工作正常。

我在用：

```
msbuild myProj.csproj /p:DeployOnBuild=true;PublishProfile=myProfile;Configuration=Release 
```

创建发布包，以及：

```
call myProj.deploy.cmd /Y /M:http://myServer/MSDeployAgentService -allowUntrusted /U:user /:Password 
```

所以这是可行的，它打包然后将其发送到服务器，并正确配置 IIS，但指向错误的数据库。

我的发布资料如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <PropertyGroup>
    <WebPublishMethod>MSDeploy</WebPublishMethod>
    <SiteUrlToLaunchAfterPublish />
    <MSDeployServiceURL>http://myserver</MSDeployServiceURL>
    <DeployIisAppPath>Website</DeployIisAppPath>
    <RemoteSitePhysicalPath />
    <SkipExtraFilesOnServer>True</SkipExtraFilesOnServer>
    <MSDeployPublishMethod>RemoteAgent</MSDeployPublishMethod>
    <UserName>user</UserName>
    <_SavePWD>True</_SavePWD>
    <PublishDatabaseSettings>
      <Objects xmlns="">
        <ObjectGroup Name="DBContext" Order="1" Enabled="False">
          <Destination Path="Data Source=server;Initial Catalog=ProductionDB;User ID=user;Password=&quot;password&quot;" Name="" />
          <Object Type="DbCodeFirst">
            <Source Path="DBMigration" DbContext="myproj.Repositories.DBContext, myproj.Repositories" MigrationConfiguration="myproj.Repositories.Migrations.Configuration, myproj.Repositories" Origin="Configuration" />
          </Object>
        </ObjectGroup>
        <ObjectGroup Name="DefaultConnection" Order="2" Enabled="False">
          <Destination Path="Data Source=server;Initial Catalog=ProductionDB;User ID=user;Password=&quot;password&quot;" Name="" />
          <Object Type="DbDacFx">
            <PreSource Path="Data Source=localhost;Initial Catalog=devDB;User ID=user;Password=&quot;password&quot;" includeData="False" />
            <Source Path="$(IntermediateOutputPath)AutoScripts\DefaultConnection_IncrementalSchemaOnly.dacpac" dacpacAction="Deploy" />
          </Object>
          <UpdateFrom Type="Web.Config">
            <Source MatchValue="Data Source=localhost;Initial Catalog=devDB;User Id=user;Password=password" MatchAttributes="$(UpdateFromConnectionStringAttributes)" />
          </UpdateFrom>
        </ObjectGroup>
      </Objects>
    </PublishDatabaseSettings>
  </PropertyGroup>
  <ItemGroup>
    <MSDeployParameterValue Include="$(DeployParameterPrefix)DBContext-Web.config Connection String">
      <ParameterValue> Data Source=server;Initial Catalog=ProductionDB;User ID=user;Password="password"</ParameterValue>
    </MSDeployParameterValue>
    <MSDeployParameterValue Include="$(DeployParameterPrefix)DefaultConnection-Web.config Connection String">
      <ParameterValue>Data Source=server;Initial Catalog=ProductionDB;User ID=user;Password="password"</ParameterValue>
    </MSDeployParameterValue>
  </ItemGroup>
</Project> 
```

令人讨厌的是，当直接从 VS2012 发布时，这工作得很好，而不是通过命令行。我的 msbuild 调用中是否缺少开关或选项？

它无法正常工作，因为在我的 myProj.SetParameters.xml 文件中，其中显示的连接字符串是错误的。如果我手动将这些更改为正确的连接字符串，则 web.xml 文件在部署后在生产服务器上是正确的。如何将正确的字符串放入我的 SetParameters 文件？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T09:15:20.370

最后为了解决这个问题，在 Visual Studio 中，我在项目的根目录中创建了一个 Parameters.xml 文件，其中包含要在生产服务器上使用的连接字符串的值。这些被拾取并使用而不是默认值。

Parameters.xml 文件如下所示：

```
<?xml version="1.0" encoding="utf-8" ?>
<parameters>
    <parameter name="DefaultConnection-Web.config Connection String"
        description=""
        defaultValue=""tags="" /> 
```

只需根据需要添加任意数量，并且显然根据需要填充属性

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-04T03:17:50.487

我的 DefaultConnection 也没有更新。结果我不得不删除 MyProject > PublishProfiles .pubxml 文件。

然后在尝试发布新建项目时，它要求我连接到 azure 并下载发布配置文件。

即使该向导有一个复选框，可以选择关闭使用发布配置文件下拉的覆盖 DefaultConnection 字符串的选项，取消选中它也没有任何效果。它继续覆盖字符串。

所以在 azure 控制面板（门户）中，我单击了网站 > 我的网站 > 配置

向下滚动到连接字符串，您可以显示隐藏的连接字符串。我只是通过点击 x 来删除它，然后在我的网络配置中硬编码正确的那个。

然后我再次删除了 .pubxml 并再次通过向导。现在没有使用发布配置文件下拉连接字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-24T20:33:04.277

我的发布配置文件 .pubxml 文件（在 Project\Properties\PublishProfiles 中找到）因额外重复的“DefaultConnection-Web.config Connection String”节点而损坏。删除额外节点后，连接字符串正确更新。

# android - 重新加载 ViewPager 不会创建前 3 个片段

> ID：14854769
> 
> 赞同：3
> 
> 时间：2013-02-13T13:33:39.093
> 
> 标签：android, android-fragments, android-viewpager, viewpagerindicator

我有一个基于 SherlockFragment 的片段，其中包括一个通过 FragmentStatePagerAdapter 与片段一起操作的 ViewPager。我实现了“无限”滚动，因此适配器返回 getCount() 1000。它可以工作。当我用另一个数据替换（）来自主活动的主片段时出现问题，这个主片段的 onCreateView 在第一次初始化期间调用：我重新创建适配器并将其设置为 ViewPager，运行 notifyDataSetChanged（）并设置相关视图设置当前项（）。此时我没有看到 Fragment，因为 getItem() 没有被调用。如果我向左或向右滑动 ViewPager，则显示中间的第三个片段，然后一切正常，即 getItem() 仅在滑动期间被调用：

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    View view = inflater.inflate(R.layout.fragment_timebar, container, false);      
    mPager = (ViewPager)view.findViewById(R.id.timebar_pager);
    mTitleIndicator = (TitlePageIndicator)view.findViewById(R.id.timebar_titles);

    mPagerAdapter = new MyAdapter(container.getContext(), getSherlockActivity().getSupportFragmentManager(), mPager);
    mPager.setAdapter(mPagerAdapter);
mPagerAdapter.setDate(mStartDate, mPagerAdapter.MIDDLE_POSITION);
    return view;
 }

 public class MyAdapter extends FragmentStatePagerAdapter {
    public final int FULL_COUNT = 1000;
    private final int MIDDLE_POSITION = FULL_COUNT/2;
    private long mMiddleFragmentDate;
    private ViewPager mViewPager;

    public MyAdapter(Context context, FragmentManager fragmentManager, ViewPager viewPager)
    {
      super(fragmentManager);
      mMiddleFragmentDate = mStartDate;
      mViewPager = viewPager;
    }

    public long getMiddlePosDate()
    {
      return mMiddleFragmentDate;
    }

    private void refreshData(int position)
    {
      Log.d("TIMEBAR","@@@@@ refreshData pos=" + position); 
      mViewPager.setCurrentItem(position);
      notifyDataSetChanged();
      View localView = mViewPager.findViewWithTag(Integer.valueOf(position));         
      if (localView != null)
      {
        Log.d("TIMEBAR","@@@@@ refreshData localView found & != null");  
        localView.invalidate();
      }
      mTitleIndicator.notifyDataSetChanged();
    }

    public Calendar getDateByPosition(int position)
    {
      Calendar cal = Calendar.getInstance();
      cal.setTimeInMillis(mMiddleFragmentDate);       
      cal.add(Calendar.DAY_OF_YEAR, (position - MIDDLE_POSITION) * mNumOfDaysPerView);
      return cal;
    }

    @Override
    public void destroyItem(ViewGroup viewGroup, int position, Object object)
    {
      super.destroyItem(viewGroup, position, object);
    }

    @Override
    public int getCount()
    {
      return FULL_COUNT;
    }

    @Override
    public Fragment getItem(int position)
    {
      GregorianCalendar cal = (GregorianCalendar)getDateByPosition(position);
      return TimebarFragment.newInstance(position, cal.getTimeInMillis(), mNumOfDaysPerView);
    }

    @Override
    public int getItemPosition(Object paramObject)
    {
      return POSITION_NONE;
    }

    @Override
    public CharSequence getPageTitle(int position)
    {
        Calendar cal = getDateByPosition(position);
        StringBuilder sb = new StringBuilder();
        sb.append(mCalendarUtils.getDayOfMonth(cal));
        sb.append(" ");
        if (mNumOfDaysPerView > 1) {
            sb.append(mCalendarUtils.getMonthNameShort(cal));
        } else {
            sb.append(mCalendarUtils.getMonthNameLong(cal));
        }
        if (mNumOfDaysPerView > 1) {
            sb.append(" - ");           
            cal.add(Calendar.DAY_OF_YEAR, mNumOfDaysPerView - 1); 
            sb.append(mCalendarUtils.getDayOfMonth(cal));
            sb.append(" ");
            sb.append(mCalendarUtils.getMonthNameShort(cal));
        }           
        if (calNow.get(Calendar.YEAR) != cal.get(Calendar.YEAR)) {
            sb.append(",");
            sb.append(cal.get(Calendar.YEAR));
        }               
        return sb.toString();
    }

    public void setDate(long date, int position)
    {
      mMiddleFragmentDate = date;
      refreshData(position);
    }
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T08:34:15.477

最后使用**android-support-v13**库代替**android-support-v4**库并使用**getChildFragmentManager()**代替**getSupportFragmentManager()**解决了所有这些问题。现在：

*   重新加载主片段会导致在寻呼机中重新加载相关片段（调用 onCreateView()）

*   同时实例化多个 ViewPager 实例没有问题。

# clojure - 在 Clojure 中遍历、迭代、访问树

> ID：14854780
> 
> 赞同：9
> 
> 时间：2013-02-13T13:34:09.573
> 
> 标签：clojure

假设我有一个 Clojure 树，定义如下

```
(def eval-logic
  '(:OR
     (:METHOD "methodName1" ["a1" "a2" "a3"])
     (:METHOD "methodName2" ["b1" "b2" "b3"])
     :AND
       (:METHOD "methodName3" [])
       (:METHOD "methodName4" ["d1"])
     )) 
```

即树代表一个布尔表达式，其中像:OR 和:AND 这样的节点代表布尔运算符，而树的叶子是方法调用。树不会被评估，只会被遍历以生成在运行时执行实际评估的代码。我应该如何遍历树、访问不同类型的节点、询问节点的父亲、孩子、兄弟姐妹等？是否有任何指针或库可供研究？

树不能嵌套太深，所以尾递归不是问题。随意提出一些可能更适合遍历的其他数据结构。

*我对深度优先遍历特别感兴趣，因为这是代码必须生成的顺序，以确保在使用函数之前定义函数。此外，树是给定的并且不会改变，所以我对添加或删除孩子等事情不感兴趣*

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-13T13:46:07.233

要随意移动树木，请参阅[clojure.zip](http://richhickey.github.com/clojure/clojure.zip-api.html)。对于简单的步行，请参阅[clojure.walk](http://clojuredocs.org/clojure_core/clojure.walk)和[tree-seq](http://clojuredocs.org/clojure_core/clojure.core/tree-seq)。[在 Clojure 的 Tree 访问者中](http://www.ibm.com/developerworks/library/j-treevisit/index.html)有一篇关于该主题的 IBM 文章。

# android - 在opengl中动态改变纹理的不透明度？

> ID：14854781
> 
> 赞同：0
> 
> 时间：2013-02-13T13:34:09.557
> 
> 标签：android, opengl-es

我是opengl的新手，不知道如何处理不透明度。我有两个重叠的图层，我将两个图层都绘制到屏幕上。我想淡出前景中的图像以过渡到背景图像。有没有办法做到这一点？这是我的绘制方法。

```
public void draw(GL10 gl10) {
    gl10.glDisable(GL10.GL_BLEND);
    gl10.glEnable(GL10.GL_BLEND);
    gl10.glBlendFunc(GL10.GL_TRUE, GL10.GL_ONE_MINUS_SRC_ALPHA);
    gl10.glClearColor(0F, 0F, 0F, 0);
    gl10.glBindTexture(GL10.GL_TEXTURE_2D, this.mTextureId);
    this.layer1.draw(gl10); // i want to transition from this layer
            this.layer2.draw(gl10); // to this layer by changing opacity
            } 
```

我什至不知道我是否正确地提出了我的问题。希望你得到它:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T15:20:11.083

好吧，这取决于您用于此转换的方法。我在动画视图中也有类似的情况。关于您的不透明度问题，您不能使用

```
View v;
int i = 0; /*Values from 0 to 1, float cast might be needed for intermediate values*/
v.setAlpha(i);
this.layer2.setAlpha(i); 
```

或类似的东西，这不适用于您的情况吗？

# c# - 动态表单上的淘汰赛验证

> ID：14854787
> 
> 赞同：0
> 
> 时间：2013-02-13T13:34:23.507
> 
> 标签：c#, asp.net-mvc, knockout.js, knockout-validation

我有一个表单，其中包含根据某些条件可见的字段（此处不相关）。发生的情况是，我想根据字段的可见性对其进行验证。

到目前为止，我还没有设法更改或禁用规则（例如必需的）。

这是一个例子：

```
<form>
 <input type='text' data-bind='{value : name}' />
 <span class='errorMsg' data-bind='validationMessage: name'></span>
 <input type='text' data-bind='{value : email, visible: isEmailVisible}' />
 <span class='errorMsg' data-bind='validationMessage: email'></span>
 <input type='checkbox' value='true' text='Receive an email' />
 <input type='submit' value='Send' />
</form> 
```

在我的 js 中，我有一个带有可观察属性的视图模型来控制表单字段的可见性。当复选框打开时，将显示电子邮件输入，因此是必需的。但如果未选中，验证规则应允许空电子邮件输入。

所以在我的视图模型中，我会有类似的东西

```
self.email = ko.observable().extend({ required : {message : 'Should not be empty'}}); 
```

问题是：如何更改或删除验证规则？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T13:50:22.577

似乎有一个[onlyIf](https://github.com/ericmbarnard/Knockout-Validation/issues/171#issuecomment-10917226)参数可以与验证器一起使用：

```
ko.observable().extend({ required : {message : 'Should not be empty', 
    onlyIf: [viewModel.Observable bound to checkbox]}}); 
```

# c++ - 在计算密集型程序中正确使用流

> ID：14854790
> 
> 赞同：0
> 
> 时间：2013-02-13T13:34:38.683
> 
> 标签：c++, fstream

我有一个可能需要 3-4 小时才能完成的程序。正在进行中，我需要将各种信息输出到一个通用文件“info.txt”中。这是我目前的做法

```
char dateStr [9];
char timeStr [9];
_strdate(dateStr);
_strtime(timeStr);

ofstream infoFile("info.txt", ios::out);
infoFile << "foo @ " << timeStr << " , " << dateStr << endl;
infoFile.close(); 
```

我在一次跑步中这样做了五次。我的问题如下：是否最合适（效率和标准）

1.  每次输出后关闭 infoFile（因此，使用五个流 infoFile1、infoFile2、...、infoFile5，每次输出时使用一个）
2.  还是只使用“infoFile”，因此在整个运行过程中打开它？

编辑：“单次运行”是指程序的单次运行。因此，“单次运行五次”是指在运行程序一次（需要 3-4 小时）时向 info.txt 输出一些内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T13:38:43.003

第一的; 在优化之前获取数字，使用分析器。然后你就知道哪些部分花费的时间最多。如果您没有分析器，请在做任何事情之前考虑一下。在这 3-4 小时内，你会跑多少次？如果每次运行只发生一次的少数事情可能不太可能成为优化的良好目标，如果运行很多很多，那么这些部分也可以考虑，因为磁盘访问可能相当慢。

话虽如此，通过重用流而不是打开和关闭，我在以前的项目中节省了一些时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T14:57:50.403

目前还不清楚您要做什么。如果您发布的代码符合您的要求，那肯定是最好的解决方案。如果您想要*附加*的值，那么您可能希望保持文件打开。

其他一些考虑：

*   除非您关闭文件或刷新数据，否则外部程序可能不会立即看到数据。

*   当您打开文件时，任何具有该名称的现有文件都将被截断：此时尝试读取该文件的外部程序将看不到任何内容。

*   每次输出后刷新（如果你使用自动`std::endl`），并在每次输出之前寻找开始，将解决前面的问题（如果数据看起来很小，写入将是原子的），但可能导致误导数据如果写入的值有不同的长度---文件长度 *不会*被缩短。（这里可能不是这种情况，但需要考虑一些事情。）

关于性能：您所说的操作最多持续几毫秒，并且每小时发生一次或两次。无论是一毫秒还是十毫秒，都完全无关紧要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T14:58:21.637

这是一个明显的[过早优化案例](http://en.wikipedia.org/wiki/Program_optimization#When_to_optimize)

采用哪种方法对应用程序的性能没有实际影响，因为这种情况在几个小时内仅发生 5 次。

按照前面的答案建议分析您的应用程序，并使用它来识别代码中的**真正**瓶颈。

我能想到的唯一情况是，如果你想防止在`info.txt`应用程序运行时范围内被删除/编辑。在这种情况下，您希望保持流活着。否则没关系。

# windows-installer - 升级期间出现警告 1946

> ID：14854798
> 
> 赞同：0
> 
> 时间：2013-02-13T13:35:13.657
> 
> 标签：windows-installer, warnings

然后开始在 msi 中使用 ExcludeFromShowInNewInstall 标志，我们在更新时遇到了罕见且难以重现的警告 1946。

> MSI (s) (8C:78) [14:17:27:198]: 执行操作: ShortcutPropertyCreate(ShortcutName=CHECK_~1|检查更新,PropertyKey={9F4C2855-9F79-4B39-A8D0-E1D42DE1D5F3}, 8, PropVariantValue=1) MSI (s) (8C:78) [14:17:27:198]: 注意: 1: 1946 2: {9F4C2855-9F79-4B39-A8D0-E1D42DE1D5F3}, 8 3: 检查更新.lnk 4: 32 MSI (s) (8C:78) [14:17:27:198]: 注意: 1: 2262 2: 错误 3: -2147287038

与此处描述的相同问题： [https](https://connect.microsoft.com/VisualStudio/feedback/details/543254/silverlight-rc-will-not-install-due-to-error-messages-system-appusermodel-excludefromshowinnewinstall) ://connect.microsoft.com/VisualStudio/feedback/details/543254/silverlight-rc-will-not-install-due-to-error-messages-system-appusermodel-excludefromshowinnewinstall 和这里： [http ://social.msdn.microsoft.com/Forums/en/vssetup/thread/1c1e9a8c-f838-42b9-95a1-6b11060c588b](http://social.msdn.microsoft.com/Forums/en/vssetup/thread/1c1e9a8c-f838-42b9-95a1-6b11060c588b)

他们提出了这个解决方案：

> 属性-a *.lnk

但这是客户端解决方案，而不是开发人员端。

微软似乎在他们的 msiexec 中存在某种错误，因为他们自己的软件也面临同样的问题。但是并没有找到可靠的解决方案或解释。

有知识库： http: [//support.microsoft.com/kb/2745126](http://support.microsoft.com/kb/2745126)但这是不相关的问题。

有没有人遇到过同样的问题？如何避免或解决它？

# session - Cakephp登录后将会话保存到数据库

> ID：14854806
> 
> 赞同：2
> 
> 时间：2013-02-13T13:35:28.387
> 
> 标签：session, cakephp, save, session-variables

在我的网站（Cake 2.x）上，用户可以添加收藏夹。当用户登录时，它就像一个魅力。

如果用户未登录，它会将收藏夹保存到会话数组中。

我现在正在努力解决如何在用户登录后将会话收藏夹保存到数据库中。

目前，我的会话数组如下所示：

```
$sessiondata = array('item_id' => $id, 'title' => $fitem['Item']['title'],'slug' => $fitem['Item']['slug']); 
```

对于我的数据库，我只需要 $id 和 User.id（登录后）。login() 后如何将条目保存到数据库中？

我的联接表包含以下字段： item_id 和 user_id

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T15:42:05.447

您只需将数据设置为模型，然后像这样保存：

```
$this->Item->create(array(
    'item_id' => $sessiondata['item_id'],
    'title' => $sessiondata['title'],
    'slug' => $sessiondata['slug']
));
$this->Item->save(); 
```

那应该将记录保存到数据库中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T20:37:43.647

我花了一段时间，但我终于得到了这个工作。这里是：

在我的 AppController 中，我将用户重定向到我的项目控制器 afterlogin() 操作。

```
public $components = array(
                      'Auth'=>array(
                            'loginRedirect'=>array(
                                   'controller' => 'items', 'action' => 'afterlogin'),
                      ))); 
```

然后在我的 ItemsController 中，我添加了 afterlogin() 函数：

```
public function afterlogin(){
        $favors = $this->Session->read('favorites');//get favorites stored in Session
        $this->loadModel('Item2user');//Load my join-table model
        foreach ($favors as $favor){
            //search for existing favorites
            $found = $this->Item2user->find('all', array(
                    'conditions' => array('item_id =' => $favor['item_id'],
                                    'user_id =' => $this->Auth->user('id'))
                    ));

            if($found){
                //the entry is already in the db, ->do nothing
            }
            else {
                //now save the entry to the join-table
                $this->Item->create(array(
                   'Item' => array('id' => $favor['item_id']),
                   'User' => array('id' => $this->Auth->user('id'))
               ));
               $this->Item->save();
            }
        }
        $this->redirect('/');
    } 
```

希望这对任何人都有帮助..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-10T02:42:55.627

您可以在`UsersController`的登录操作中执行此操作。检查之后`if($this->Auth->login())`和之前，`$this->redirect()`而不是重定向到另一个控制器。

# ruby-on-rails - 即使页面需要另一个清单，带有 twitter 引导程序的清单也会保持缓存

> ID：14854809
> 
> 赞同：0
> 
> 时间：2013-02-13T13:35:30.547
> 
> 标签：ruby-on-rails, twitter-bootstrap, asset-pipeline, browser-cache

系统：rails 4，ruby 1.9.3。

我有针对不同布局的多个资产管道清单。管理布局中有 twitter bootstrap，其他没有。

当我访问管理布局，然后单击指向具有不同清单的另一个布局的链接时，旧清单正在从缓存（带有 twitter 引导程序的那个）而不是新清单文件中加载。如果我刷新页面，则会加载正确的清单。所以基本上带有 twitter bootstrap 的 manifest 无论如何都会保留在那里，除非页面被刷新，否则没有其他 manifest 可以覆盖它。

更新：Safari 不存在此问题。Firefox 和 Chrome 存在问题。

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T09:04:34.470

问题的根源是 tubrolinks.js 文件包含在 admin/application.js 清单中。我猜它作为 twitter bootstrap 的默认包含存在。该文件应该调整缓存，但在我的情况下它出现了问题。

# r - 获取 R 中因子的值列表

> ID：14854813
> 
> 赞同：2
> 
> 时间：2013-02-13T13:35:36.713
> 
> 标签：r

我想将因子的值转换为列表，我该怎么做？PS：对不起，我是 R 新手

示例：我有以下因素：

```
> table(v)
v
       (0,80]      (80,500]    (500,1000]  (1000,10000] (10000,90000] 
         8259          2167           112            62             1 
```

我怎样才能得到：

```
 c(8259,2167,112,62,1) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T13:38:17.143

使用`unname()`：

```
x <- table(cut(runif(100), 5))
x

(0.00448,0.202]   (0.202,0.399]   (0.399,0.596]   (0.596,0.794] 
             24              23              16              19 
  (0.794,0.991] 
             18 

unname(x)
[1] 24 23 16 19 18 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T13:39:53.907

您可以将 table 的结果转换为 data.frame 并且：

```
as.data.frame(x)$Freq
[1] 28 13 20 20 19 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-13T13:47:13.523

或者：

```
test <- as.vector(table(v)[])
test 
```

# php - 简单的要点问题

> ID：14854814
> 
> 赞同：0
> 
> 时间：2013-02-13T13:35:37.123
> 
> 标签：php, html

我试图捕捉文本字段中给出的项目符号并尝试用其他内容替换它，因为`?`在将给定文本呈现给用户之后，它被显示为而不是 •。我是这样测试的：我在word中写了带有项目符号的文本并复制粘贴到文本字段中。

我的愿景是这样的：

```
$test = strstr($input,'&bull;');
if($test){ echo "bullet point found!";
} 
```

但它不起作用或没有捕捉到，或者`&bull;`是错误的正则表达式来捕捉要点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T13:48:53.103

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T13:40:23.007

尝试`&#8226;`代替`&bull;`.

请参阅[HTML 中的特殊字符。](http://www.degraeve.com/reference/specialcharacters.php)

HTML 很可能没有通过 &bull，而是 HTML equivilent。

如果找不到它，请查看[HTMLEntities()](http://php.net/manual/en/function.htmlentities.php)，这实际上可能是更好的方法（除非您可能只是想处理子弹）。

**编辑：**用 html_entity_decode() 解码 HTML，用 HTMLEntities( [)](http://www.php.net/manual/en/function.html-entity-decode.php)重新编码给用户。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T13:54:47.220

First, before checking the input make sure to encode all characters into its HTML equivalents (which `&bull;` is). So like this:

```
$test = strstr(htmlentities($input), '&bull;');

if($test) {
  echo "bullet point found!";
} 
```

However, if you encode your input using `htmlentities`, all UTF-8 characters should be rendered fine to the user afterwards, as the storage won't need to deal with UTF-8 anymore, thus eliminating artifacts.

Also: Please make sure you are escaping user input when saving it into the database, preferably using equivalents of bound parameters as seen in PDO.

# html - html/css 内容不会拉伸

> ID：14854819
> 
> 赞同：2
> 
> 时间：2013-02-13T13:35:51.867
> 
> 标签：html, css

在我的页面中，我希望内容（页面中的红色）延伸到页脚（黄色）......我找不到任何方法来解决过去 3 天的问题。请帮我..

```
index.html

<body>
<div id="wrapper">
    <div id="header">HEADER</div>
    <div id="content">CONTENT</div>
    <div id="footer">FOOTER</div>
</div>
</body> 
```

这是我的风格.css

```
html,
body {
    margin:0;
    padding:0;
    height:100%;
    background-color: blue;
}
#wrapper {
    min-height:100%;
    position:relative;
}
#header {
    padding:10px;
    background:#5ee;
}
#content {
    padding:10px;
    padding-bottom:80px;
    background-color: red;
    width: 1000px;
    margin: 0 auto;
}
#footer {
    width:100%;
    height:80px;
    position:absolute;
    bottom:0;
    left:0;
    background:#ee5;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T13:39:41.567

尝试在#content css 中添加最小高度，例如：

```
#content {
    padding:10px;
    padding-bottom:80px;
    background-color: red;
    width: 1000px;
    margin: 0 auto;
    min-height:600px;
} 
```

见这里：http: [//jsfiddle.net/DAQ7W/](http://jsfiddle.net/DAQ7W/)

另一个技巧是使#wrapper 与#content 具有相同的背景颜色。;)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T13:59:39.743

我认为您正在搜索的术语是“粘性页脚”。在这种情况下，使用我写的这个脚本：

**html**

```
<div id="pagewrap">

    <div id="header">header</div>
    <div id="content">content</div>

</div>

<div id="footer">footer</div> 
```

**Javascript**

```
$(function() {

    function positionFooter() {

        var windowHeight = $(window).height();
        var documentHeight = $('#pagewrap').height();

        if (windowHeight > ($('#content').height() + $('#header').height())) {
            var pagewrapHeight = windowHeight - $('#footer').height();
            $("#pagewrap").height(pagewrapHeight);
        }
    }

    positionFooter();
    $(window).resize(positionFooter)

}); 
```

**CSS**

```
body { background: red; }
#header { text-align: center; height:100px; background: green; }
#content { text-align: center; height: 300px; background: red; }

#footer {
   position: relative;
   height: 35px;
   line-height: 35px; /* Height footer */
   text-align: center;
   clear:both;
   background: yellow;
   color: #fff;
   width: 100%;
} 
```

# extjs - 使用 ExtJS 4.x 捕获 CTRL+S 跨浏览器并避免浏览器操作

> ID：14854822
> 
> 赞同：4
> 
> 时间：2013-02-13T13:35:54.767
> 
> 标签：extjs, cross-browser, extjs4, dom-events, extjs4.1

我想停止默认浏览器操作`CTRL`+`S`并让我的 RIA 在用户为我们的应用程序按下此组合键时保存表单数据。

我们正在使用 ExtJS 4.1.x

此处使用 jQuery 的类似解决方案： [Best cross-browser method to capture CTRL+S with JQuery?](https://stackoverflow.com/questions/93695/best-cross-browser-method-to-capture-ctrls-with-jquery)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T20:20:50.087

这是我通常在 ExtJS 应用程序中执行此操作的方式（下面的最后一个案例声明），它似乎对我很有效：

```
// attach key navigation to document
Ext.getDoc().on('keypress', function(event, target) {
    if (event.ctrlKey && !event.shiftKey) {
        event.stopEvent();

        switch(event.getKey()) {

            case event.LEFT :
                this.shiftTabs(-1);
                break;

            case event.RIGHT :
                this.shiftTabs(1);
                break;

            case event.DELETE :
                this.closeActiveTab();
                break;

            case event.F4 : // this is actually the "S" key
                this.saveAll(); // handler
                break;

            // other cases...
        }
    }
}); 
```

# jquery - 使用 jQuery 从表达式引擎主题加载内容

> ID：14854823
> 
> 赞同：0
> 
> 时间：2013-02-13T13:35:57.000
> 
> 标签：jquery, expressionengine

我用 html、css 和 JavaScript 创建了我的静态主题，我使用 ajax 将 dontent 加载到页面的不同部分，当我使用表达式引擎时，我希望从我制作的模板页面加载外部内容，所以例如在 index.php 中，我希望从以下位置加载内容：

```
index.php/page 
```

在 JavaScript 中：

```
$("#somediv").load('index.php/page'); 
```

但这不起作用。任何想法将不胜感激，谢谢。

# jquery - JQuery点击事件里面for

> ID：14854825
> 
> 赞同：0
> 
> 时间：2013-02-13T13:36:03.150
> 
> 标签：jquery

我真的不知道我发生了什么事。。

代码如下：

```
for (var j=0; j<tours.length; j++){
    var name = tours[j].name;

    var $tourLI = $('<li id="'+name+'"></li>');
    var $tourButton = $('<div class="button-inside"><span>'+name+'</span><span></span></div>');

    $tourButton.click(function() {
        alert(name);
    }
} 
```

我正在尝试为每个显示游览名称的按钮绑定单击事件，但无论我单击哪个按钮，总是显示最后一个游览名称。

我究竟做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T13:39:21.673

您需要将点击处理程序包装在一个闭包中，以便`name`在 for 循环继续之前“关闭”变量的值。

这是因为处理程序在您单击它之前实际上并未执行，因此它只会使用当时的当前值`name`（无论循环中的最后一个值是什么）。

```
for (var j=0; j<tours.length; j++){
    var name = tours[j].name;

    var $tourLI = $('<li id="'+name+'"></li>');
    var $tourButton = $('<div class="button-inside"><span>'+name+'</span><span></span></div>');

    (function(n) {
        $tourButton.click(function() {
            alert(n);
        });
    })(name)
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T13:38:34.407

当点击被触发`j`时会有值`tours.length`。您可以通过闭包锁定循环值以及其余变量。

```
for (var j=0; j<tours.length; j++){
  (function(){ 
    var currentJValue = j;
    var name = tours[currentJValue].name;

    var $tourLI = $('<li id="'+name+'"></li>');
    var $tourButton = $('<div class="button-inside"><span>'+name+'</span><span></span></div>');

    $tourButton.click(function() {
        alert(name);
    }
  })();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T13:39:08.593

无需在循环内调用点击事件..附加动态创建的按钮并在循环外调用它并在委托事件上使用

试试这个

```
 $(document).on('click','div.button-inside',function() {
    alert($(this).text());
} 
```

如果您想了解有关委托事件的更多信息，可以通过[链接...](http://jq4you.blogspot.com/2013/02/jquery-direct-and-delegate-on-event.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T13:42:18.630

试试这个...

```
$('.div.button-inside ').on('click',function() {
    alert($(this).text());
} 
```

# c# - 静态类和私有构造函数

> ID：14854832
> 
> 赞同：3
> 
> 时间：2013-02-13T13:36:27.870
> 
> 标签：c#, .net, static

我无法理解这一点。我尝试在 VS2010 中做一个小例子，如下所示。

“因此，创建静态类与创建仅包含静态成员和私有构造函数的类非常相似”

此语句是否意味着具有私有构造函数和一个或多个如下静态方法的类是静态类？我知道只有在类中提到静态关键字时，我们才称其为静态类。

另外，我们不能继承下面的类，也不能实例化这个类，对吧？

```
public class Base
{
    private Base() { Console.WriteLine(" I am from normal Base constructor"); }
    static void NewMethod() { Console.WriteLine("Hey I am from Static Base"); }
    public void New() { } 
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-13T15:42:55.930

> 因此，创建静态类与创建仅包含静态成员和私有构造函数的类非常相似

该声明试图传达正确的想法，但未能做到。静态类*不像*只有静态成员和私有构造函数的类。这是一个具有静态成员和私有构造函数的类：

```
class X
{
    private X() {}
    public static X Y() { return new X(); }
} 
```

但这根本不像一个静态类！该声明的作者似乎认为拥有私有构造函数会阻止您创建实例，但它当然不会。

更准确的说法是：

> 创建一个静态类很像创建一个既抽象又密封的类，并且不包含实例成员。

事实上，当 C# 编译器为静态类生成代码时，它正是这样做的：它将类标记为抽象的（因此不能直接实例化）和密封的（因此不能扩展）。

我注意到你自己声明一个抽象类和密封类是不合法的；在 C# 中这样做的唯一方法是创建一个静态类。

我会提请 MSDN 文档管理员注意这个误导性的句子。感谢您指出。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-02-13T13:39:25.513

它的意思是：

```
public static class Foo
{
    public static void Bar() { }
} 
```

本质上是一样的

```
public class Foo
{
    private Foo() { }
    public static void Bar() { }
} 
```

因为如果类只有私有构造函数，就不能在类外实例化。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-13T13:43:31.667

> “这句话是否意味着具有私有构造函数和一个或多个如下静态方法的类是静态类？”

[答案是否定的，并且在您从MSDN](http://msdn.microsoft.com/en-us/library/79b3xss3.aspx)引用的那句话之后的下一句中解释了一个区别：

> 使用静态类的优点是编译器可以检查以确保没有意外添加实例成员。

* * *

这意味着您将收到`Class2`如下所示的编译器错误。

```
public class Class1
{
    private Class1() { }
    public static void Method() { }
    private string member; // valid, but pointless
}

public static class Class2
{
    public static void Method() { }
    private string member; // error CS0708
} 
```

* * *

更重要的是，虽然`Class1`有一个私有的构造函数，它仍然可以被实例化：

```
public class Class1
{
    private Class1() { }

    private static Class1 instance = new Class1();

    public static Class1 Instance
    {
        get { return instance; }
    }
} 
```

另一方面，静态类可能永远不会被实例化。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-13T13:44:39.293

您不能继承，因为没有公共构造函数，只有私有构造函数存在。出于同样的原因，您不能创建实例。

在这个问题的范围内，它们可以被看作是相同的。你能称之为静态类吗？我认为正式你没有，因为它没有`static`在类定义中标记。但从功能的角度来看，你可以称之为`static`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-13T13:41:08.663

`New()`在您的示例中，可以调用该方法的唯一方法是添加另一个方法来返回一个`Base`实例，因为`Base`不能被另一个类实例化。没有那个额外的方法使它在功能上与静态类相同。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-13T13:45:43.013

你从哪里得到的声明：

> 因此，创建静态类与创建仅包含静态成员和私有构造函数的类非常相似

它想说的是您不能创建静态类的实例。

创建静态类的方法是使用**static**关键字。类中的所有成员也必须是静态的。

```
public static class MyStaticClass
{
      static MyStaticClass() { /* Constructor.  Optional. */ }
      public static void MyMethod() { ... }
      public static int MyProperty{ get; set; }
} 
```

再次注意，您不能创建此类的实例。以下调用将无法编译：

```
new MyStaticClass(); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-10-22T04:57:20.890

静态类永远不能被实例化、参与继承或使用接口。但是一个类，即使有一个私有构造函数，仍然可以继承，而静态类不能。具有私有构造函数的类仍然可以实例化自身的实例。静态无法做到这一点。所以不，它们不一样。

我不明白为什么微软有时仍然不明白它创造了什么，因为他们是写那个描述的人（正如 Eric Lippert 提到的）？

另一个困惑是静态构造函数是私有的还是公共的？这将有助于解释行为，因为就像每个类中的默认公共构造函数一样，每个静态类也有一个默认构造函数。对我来说，这意味着静态构造函数将是公共的，但事实并非如此。它不能被访问或调用，并且可以被覆盖。

因为静态类在编译为密封的抽象类时会被转换，这表明它的静态构造函数实际上只是另一个默认的公共类构造函数，没有参数，只能调用一次。我可能是错的。但如果是这样的话，整个私有构造函数的解释就没有意义了。

# java - Tomcat 部署显示以下错误 - 很可能会造成内存泄漏

> ID：14854833
> 
> 赞同：1
> 
> 时间：2013-02-13T13:36:34.997
> 
> 标签：java, eclipse, maven, tomcat

org.apache.catalina.loader.WebappClassLoader clearThreadLocalMap

严重：Web 应用程序 [] 创建了一个 ThreadLocal，其键类型为 [com.sun.xml.bind.v2.runtime.Coordinator$1]，值类型为 [com.sun.xml.bind.v2.runtime.Coordinator[ ]] 但在 Web 应用程序停止时未能将其删除。这很可能造成内存泄漏。

它显示了三组具有不同值的此类消息，并显示服务器在 23573 毫秒（一段时间）内启动，但从未出现。

注意：war 文件是使用 Eclipse IDE 中的 maven 构建的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T15:10:55.513

我会查看Tomcat wiki 上的[内存泄漏保护文档。](http://wiki.apache.org/tomcat/MemoryLeakProtection)

# inversion-of-control - 使用 Ninject 对 MS 单元测试中的构造函数进行依赖注入

> ID：14854839
> 
> 赞同：1
> 
> 时间：2013-02-13T13:36:56.193
> 
> 标签：inversion-of-control, ninject, vs-unit-testing-framework

我想知道是否可以使用 Ninject 将依赖项注入到 MS 单元测试类的构造函数中。

这是存储库的代码片段

```
public Class StudentRepository : IRepository
{   
   SchoolContext schoolContext;

   public StudentRepository ()
   {
       schoolContext= new SchoolContext();
   } 

   public IEnumerable<Student> GetAll()
   {
       return DBContext.Students.ToList();
   }

} 
```

这是 IOC 配置的代码

```
public class IocConfig
{
    public static void RegisterIoc()
    {
        var kernel = new StandardKernel();
        kernel.Bind<IRepository>().To<StudentRepository>();          
    }
} 
```

这是 MS 单元测试的代码。

```
[TestClass]
public Class StudentReposiotryTest    
{     

    public IRepository studentRepository;

    [ClassInitialize]
    public static void StudentReposiotryInitialize(TestContext context)
    {
        IocConfig.RegisterIoc();            
    }

     public StudentReposiotryTest(IRepository repository)
     {
         studentRepository= repository;
     }      

    [TestMethod]
    public void GetAllStudentsTest()
    {            
        List<Student> students =  studentRepository.GetAll();
        Assert.IsTrue(students.Count > 0);
    }   

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T08:25:09.413

据我所知，MSTest 没有用于 DI 的钩子。

但通常你不需要这样做，因为单元测试应该保持简单。只需将 Fakes/Mocks 注入到被测类中，无需 IoC 容器即可轻松完成。

# php - 在php中以json格式注册数据

> ID：14854840
> 
> 赞同：0
> 
> 时间：2013-02-13T13:36:59.023
> 
> 标签：php, json

我的 php 脚本中有这段代码

```
$concatenation= array('idcarde',$idcarde ,'mobile' ,$mobile ,'firstname',$firstname ,'lastname',$lastname ,'jour',$jour ,'mois',$mois ,'annee',$annee ,'adress',$adresse ,'Governora',$Governora);
$P = serialize( $concatenation );
$mabase = mysql_connect("localhost", "root", "root");
    if ($mabase) {
        mysql_select_db("mb", $mabase);
    }

    // insere toutes les donness provenant de $_POST
    $sql = " INSERT INTO `test` SET
            `formid` = '" . $formid . "',
            `data` = '" . mysql_escape_string($P) . "',
            `creation_date` = '" . date("Y-m-d H:i:s"). "' ";

    @mysql_query($sql, $mabase); 
```

此代码将数据保存在我的表**测试中**

在列**数据**中我有这个结果：

```
a:18:{i:0;s:7:"idcarde";i:1;s:8:"00688009";i:2;s:6:"mobile";i:3;s:8:"52199200";i:4;s:9:"firstname";i:5;s:6:"dumas";i:6;s:8:"lastname";i:7;s:6:"alen";i:8;s:4:"jour";i:9;s:2:"05";i:10;s:4:"mois";i:11;s:2:"05";i:12;s:5:"annee";i:13;s:4:"1951";i:14;s:6:"adress";i:15;s:54:"11 rue paris";i:16;s:9:"Governora";i:17;s:5:"france";} 
```

我想知道我们怎样才能消除这个值 i:0 i:1 i:2 i:3 ...

我也尝试使用此代码：

它以这种格式保存数据：

```
["idtype","CIN","mobile","20390112","idcard","00731429","firstname","samia","lastname","Mejri","email","","gender","M.","deliv_lieu","","deliv_d","","deliv_m","","deliv_y","","birthdate_d","08","birthdate_m","10","birthdate_y","1944","address","36 rue Grece ","city","France","gouv","France","profession","","field","","bank","","agency","","friends","","followers","","blog_url","","website","","civil_status","","nickname","","zipcode",""] 
```

但是使用前面的代码它显示如下

```
a:18:{i:0;s:7:"idcarde";i:1;s:8:"00688009";i:2;s:6:"mobile";i:3;s:8:"52199200";i:4;s:9:"firstname";i:5;s:6:"dumas";i:6;s:8:"lastname";i:7;s:6:"alen";i:8;s:4:"jour";i:9;s:2:"05";i:10;s:4:"mois";i:11;s:2:"05";i:12;s:5:"annee";i:13;s:4:"1951";i:14;s:6:"adress";i:15;s:54:"11 rue paris";i:16;s:9:"Governora";i:17;s:5:"france";} 
```

这就是我想要的，但我想消除 i:0 i:1 i:2 i:3 直到 i:17

我现在尝试使用此代码：

```
$concatenation= array('idcarde',$idcarde ,'mobile' ,$mobile ,'firstname',$firstname ,'lastname',$lastname ,'jour',$jour ,'mois',$mois ,'annee',$annee ,'adress',$adresse ,'Governora',$Governora);
$P = serialize( $concatenation );
$M=preg_replace('~i:[0-9];~', '', $P);
$mabase = mysql_connect("localhost", "root", "root");
    if ($mabase) {
        mysql_select_db("mb", $mabase);
    }

    // insere toutes les donness provenant de $_POST
    $sql = " INSERT INTO `test` SET
            `formid` = '" . $formid . "',
            `data` = '" . mysql_escape_string($M) . "',
            `creation_date` = '" . date("Y-m-d H:i:s"). "' ";

    @mysql_query($sql, $mabase); 
```

此代码从数据 **i:1 中消除；我：2；**直到**我：9；**但不能消除

例如**我：10；我：11；我：12；**

我尝试解决这个问题但没有成功

$M=preg_replace('~i:~;~', '', $P);

我尝试将a **:18**更改为**a:28**

```
$P = serialize($concatenation) ;
  //$M=preg_replace('~i:[0-9];~', '', $P);
 $M=preg_replace('~i:[0-9]+;~', '', $P);
  $M1=preg_replace('a:[0-9]+~', 'a:28', $M); 
```

但它显示错误

我找到解决方案使用 `$M1=preg_replace('~a:[0-9]+~', 'a:28', $M);`

但我想说 28 是 $P 中的元素数

所以我应该在 $P 中找到元素的数量，然后在 a

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T13:39:18.043

在 PHP 中，[`serialize`](http://us.php.net/manual/en/function.serialize.php)不序列化为 JSON。如果你想要 JSON，你应该[`json_encode`](http://us.php.net/manual/en/function.json-encode.php)改用：

```
$P = json_encode($concatenation); 
```

**编辑：**这个正则表达式将从`i:<digits>`序列化数据中删除，但请记住，一旦删除它，您就不`unserialize`能再生成结果字符串，所以我不确定您为什么要这样做：

```
$M = preg_replace('/([{;])i:\d+;/', '$1', $P); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T13:40:10.893

[serialize()](http://php.net/manual/en/function.serialize.php)函数与json_encode 不同，它用于保存变量名称及其值，稍后您可以使用[universalize()](http://www.php.net/manual/en/function.unserialize.php)则一切都可用。为此，请使用[json_encode()](http://php.net/manual/en/function.json-encode.php)和[json_decode()](http://php.net/manual/en/function.json-decode.php)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T15:29:38.573

因此，`a:number`那里表示您有一个数组以及其中的元素数量这一事实。所有这些`i:number;`都是数组的键。它们一直上升到您拥有的元素数量 - 1（因为它以 0 开头）

如果您删除密钥，它将像反序列化一样

```
 ['idcarde'] => '00688009'
 ['mobile'] => '5265656' 
```

如果这是你想要的，那么在第一行

```
$concatenation= array('idcarde',$idcarde ,'mobile' ,$mobile ,'firstname',$firstname ,'lastname',$lastname ,'jour',$jour ,'mois',$mois ,'annee',$annee ,'adress',$adresse ,'Governora',$Governora); 
```

只需用 a 替换所有其他逗号`=>`即可

# c# - 如何从也是其父客户端的客户端结束 WCF 服务器

> ID：14854842
> 
> 赞同：0
> 
> 时间：2013-02-13T13:37:15.080
> 
> 标签：c#, wcf, named-pipes, kill-process

我有以下 WCF 服务器和客户端代码，我对它们的 [原始形式] ( [http://tech.pro/tutorial/855/wcf-tutorial-basic-interprocess-communication](http://tech.pro/tutorial/855/wcf-tutorial-basic-interprocess-communication) ) 做了一些更改。

服务器：

```
using System;
using System.ServiceModel;

namespace WCFServer
{
    [ServiceContract]
    public interface IStringReverser
    {
        [OperationContract]
        bool ReverseString(string value, out string reversed);
    }

    public class StringReverser : IStringReverser
    {
        public bool ReverseString(string value, out string reversed)
        {
            char[] retVal = value.ToCharArray();
            int idx = 0;
            for (int i = value.Length - 1; i >= 0; i--)
                retVal[idx++] = value[i];

            reversed = new string(retVal);
            return true;
        }
    }

    class Program
    {
        static void Main(string[] args)
        {
            using (var host = new ServiceHost(typeof(StringReverser), new[]{new Uri("net.pipe://localhost")}))
            {
                host.AddServiceEndpoint(typeof(IStringReverser),
                  new NetNamedPipeBinding(),
                  "PipeReverse" + args[0]);

                host.Open();
                while (true)
                {
                }
            }
        }
    }
} 
```

客户：

```
using System;
using System.Diagnostics;
using System.Globalization;
using System.ServiceModel;

namespace WCFClient
{
    [ServiceContract]
    public interface IStringReverser
    {
        [OperationContract]
        bool ReverseString(string value, out string reversed);
    }

    class Program
    {
        static void Main()
        {
            var currentThreadIdStr = System.Threading.Thread.CurrentThread.ManagedThreadId.ToString(CultureInfo.InvariantCulture);

            // Start off the service
            Process server = new Process();
            server.StartInfo.FileName = "WCFServer.exe";
            server.StartInfo.Arguments = currentThreadIdStr;
            server.StartInfo.UseShellExecute = false;
            server.Start();

            // Try to connect to the server
            ChannelFactory<IStringReverser> pipeFactory =
              new ChannelFactory<IStringReverser>(
                new NetNamedPipeBinding(),
                new EndpointAddress(
                  "net.pipe://localhost/PipeReverse" + System.Threading.Thread.CurrentThread.ManagedThreadId.ToString(CultureInfo.InvariantCulture)));

            IStringReverser pipeProxy =
              pipeFactory.CreateChannel();

            Console.WriteLine("type \"quit\" to exit\n");

            string str;
            string reversedString;
            while ( (str = Console.ReadLine()) != "quit")
            {
                bool wasReversedSuccesfully = pipeProxy.ReverseString(str, out reversedString);
                Console.WriteLine("pipe: Succesful: " + wasReversedSuccesfully + "  reverse of " + str + " is:" + reversedString);
            }

            //// Kill the service
            server.Kill();
        }
    }
} 
```

我的问题是：

有没有更好的方法从客户端代码结束服务器？我在上面杀死它的方式有什么缺陷或问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T14:21:25.173

根据您提供的评论，而不是直接杀死服务实例；您可以只标记您的服务`InstanceContextMode=PerCall`和`ConcurrencyMode=Multiple`. 这样，对于每个请求，都会创建一个新实例，并且该实例将在 WCF 主机分配的线程上运行。

请注意，在执行期间，正在执行操作的线程可能会发生变化。

# java - 摇摆绘画问题

> ID：14854844
> 
> 赞同：0
> 
> 时间：2013-02-13T13:37:22.427
> 
> 标签：java, swing, awt, layout-manager, swingx

我有一些挥杆绘画的问题。

我的以下 UI（看下一张图片）在左侧有一个 JTextField，它可以显示自动完成提示。在右侧，应显示从文本字段中选择的元素。这些元素包含在使用 FlowLayout(FlowLayout.LEFT) 作为布局管理器的 JPanel 中。

![我的用户界面](../Images/5b44b1f52789d46ca2ee2d7d43e73738.png)

现在，当从文本字段中选择一些元素时，这些元素将被添加到 flowlayout 中，这些元素将不会被绘制。（如下图所示） ![不会绘制新元素](../Images/7c096b5b92754bf3c787bcab84a1e238.png)

现在我有两种可能性来展示这些非绘画元素。

第一：调整 JFrame 的大小后，将显示元素。

第二：选择足够多的元素，使 FlowLayout 必须换行。换行后将显示所有元素。选择其他元素时，它们直到下一个换行符才会显示。

FlowLayout 换行后的元素：

![FlowLayout 换行后的元素](../Images/a00383da73f62ae31a5db01b54974ea4.png)

我能做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T11:38:18.543

交换 FlowLayout 抛出自定义 WrapLayout 解决了这个问题。似乎是布局问题。

# linq - 如何使用 Entity Framework 5 & Linq 动态设置变量

> ID：14854856
> 
> 赞同：0
> 
> 时间：2013-02-13T13:38:17.697
> 
> 标签：linq, asp.net-mvc-4, entity-framework-5

如何动态设置“sourcePoint”的纬度和经度？

我可以查询数据库以获取我需要的信息（纬度和经度），但我不确定如何使用这些值动态设置 sourcePoint。

这是我对 C#、MVC 4、Entity Framework 5 和 Linq 的第一次尝试，所以我希望能得到一些帮助。提前感谢您的帮助:)

```
 public ActionResult Index(string location = "melbourne-vic-3000")
    {

        ////get the latitude & longitude of the current location
        //var latlong =
        //    (from u in db.Locations
        //     where u.Url.Equals(location)
        //     select u).Take(1);

        //set the latitude & longitude of the sourcePoint
        var sourcePoint = GeoUtils.CreatePoint(-37.815206, 144.963937); //***NEED TO GET THE LATITUDE & LONITUDE FROM THE DATABASE (see query above)***

        //work out the distance each business is from the sourcePoint
        var model =
            from x in db.Businesses
            from y in db.Locations
            where location == y.Url
            select new BusinessDistance
                    {
                        BusinessName = x.BusinessName,
                        Address = x.Address,
                        Distance = Math.Round((x.GeoLocation.Distance(sourcePoint).Value / 1000), 2)
                    };

        return View(model.ToList());

    } 
```

* * *

## ----工作代码----

```
 public ActionResult Index(string location = null)
    {

        var sourcePoint = GeoUtils.CreatePoint(-37.815206, 144.963937); //Set the default latitude & longitude to Melbourne

        //get the latitude & longitude of the current location from the database
        var latlong =
            (from u in db.Locations
             where u.Url.Equals(location)
             select u).FirstOrDefault();

        if (latlong != null)
        {
            //dynamically set the latitude & longitude of the sourcePoint using the latitude & longitude we got from the database
            sourcePoint = GeoUtils.CreatePoint((float)Convert.ToDouble(latlong.Latitude), (float)Convert.ToDouble(latlong.Longitude));
        }

        //work out the distance each business is from the sourcePoint
        var model =
            from x in db.Businesses
            from y in db.Locations
            where location == y.Url
            select new BusinessDistance
                    {
                        LocationSuburb = y.Suburb,
                        BusinessName = x.BusinessName,
                        Address = x.Address,
                        Distance = Math.Round((x.GeoLocation.Distance(sourcePoint).Value / 1000), 2)
                    };

        if (model != null)
        {
            return View(model.ToList());
        }
        else
        {
            //display the error page
            return View(); //TO DO...

        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T13:42:34.990

试试这个：

```
//get the latitude & longitude of the current location
    var latlong =
        (from u in db.Locations
         where u.Url.Equals(location)
         select u).FirstOrDefault();

    // declarre sourcePoint here
    if(latlong != null)
    {
       //set the latitude & longitude of the sourcePoint
       sourcePoint = GeoUtils.CreatePoint(latlong.Latitude, latlong.Longitude);
    } 
```

# save - 将 vtkDistancePolyDataFilter 的结果保存为 .vtk

> ID：14854858
> 
> 赞同：0
> 
> 时间：2013-02-13T13:38:31.320
> 
> 标签：save, actor, vtk

我正在使用 vtkDistancePolyDataFilter，我想将结果保存为 .vtk 文件。结果是正确的，我可以用vtkRenderer显示出来。但是我不能用 vtk writer 保存它，因为他们需要一个对象作为输入。

如何保存我的输出？也许有一种方法可以将 vktActor 转换为对象？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T09:02:45.693

Just create a vtkPolyDataWriter and set its input connection from the vtkDistancePolyDataFilter's output port. You don't need much more here.

# perl - Perl 使用/需要绝对路径？

> ID：14854861
> 
> 赞同：7
> 
> 时间：2013-02-13T13:38:38.513
> 
> 标签：perl, absolute-path

如果我有一个`.pm`文件，有没有办法`use`在不把它放在我的`@INC`路径上的情况下呢？我认为这在我的特定用例中会更清晰 - 比使用相对路径或将此目录添加到`@INC`.

**编辑：澄清：**

我希望避免遍历 中的每个项目`@INC`，而是直接指定我感兴趣的文件。例如，在 Node.JS 中，`require('something')`将搜索路径列表，但`require('/specific/something')`会直接转到我告诉它的位置。

在 Perl 中，我不确定这是否与 中的功能相同`require`，但它似乎可以工作。

但是，`use`语句需要裸词。这让我对如何进入绝对路径感到有些困惑。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-13T13:40:00.677

你可以使用这个：

```
use lib '/path/to/Perl_module_dir'; # can be both relative or absolute
use my_own_lib; 
```

您可以`@INC`自己修改（暂时不用担心，这也是这样`use lib`做的）：

```
BEGIN{ @INC = ( '/path/to/Perl_module_dir', @INC ); } # relative or absolute too
use my_own_lib; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-14T15:03:45.970

根据评论中的讨论，我建议使用`require`它自己。如下图，

```
require "pathto/module/Newmodule.pm";

Newmodule::firstSub(); 
```

您也可以使用以下其他选项

*   `use lib 'pathto/module';`需要将此行添加到您要在其中使用模块的每个文件中。

> 使用库“路径/模块”；
> 使用新模块；

*   使用`PERL5LIB`环境变量。使用 export 在命令行上设置它或将其添加到，`~/.bashrc`以便每次登录时将其添加到您的`@INC`. 记住 PERL5LIB 在所有 @INC 目录之前添加目录。所以会先用。您也可以在 apache httpd.conf 中使用

    ```
    SetEnv PERL5LIB /fullpath/to/module 
    ```

*   或将其设置在 BEGIN 块中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T20:49:20.637

一般来说，设置`PERL5LIB`环境变量。

```
export PERL5LIB=/home/ikegami/perl/lib 
```

如果要查找的模块打算安装在相对于脚本的目录中，请使用以下命令：

```
use FindBin qw( $RealBin );
use lib $RealBin;
  # or
use lib "$RealBin/lib";
  # or
use lib "$RealBin/../lib"; 
```

这将正确处理脚本的符号链接。

```
$ mkdir t

$ cat >t/a.pl
use FindBin qw( $RealBin );
use lib $RealBin;
use Module;

$ cat >t/Module.pm
package Module;
print "Module loaded\n";
1;

$ ln -s t/a.pl

$ perl a.pl
Module loaded 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T14:28:46.127

您可以使用[Module::Load](http://perldoc.perl.org/Module/Load.html)模块

```
use Module::Load;
load 'path/to/module.pm'; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-13T15:40:15.380

[FindBin::libs](https://metacpan.org/module/FindBin%3a%3alibs)可以解决问题：

```
# search up $FindBin::Bin looking for ./lib directories
# and "use lib" them.

use FindBin::libs; 
```

# oracle11g - PetaPoco：将空值转换为空字符串

> ID：14854862
> 
> 赞同：1
> 
> 时间：2013-02-13T13:38:42.223
> 
> 标签：oracle11g, petapoco

有没有一种简单的方法可以连接到 PetaPoco 并将返回为 null 的字符串属性转换为空字符串？我正在查询的数据库是 Oracle。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T07:47:46.260

poco 上的 getter 方法应该可以工作

# asp.net - 在以字符串形式返回数据时，XML 格式未出现在 wcf 中

> ID：14854864
> 
> 赞同：1
> 
> 时间：2013-02-13T13:38:45.747
> 
> 标签：asp.net, xml, wcf, xslt

## 功能：

```
public string getAccomodationspattern2(string AccomodationID)
        {
            SqlCommand cmd = new SqlCommand("XML_AccommodationsDetail_V4", con);

            cmd.Parameters.AddWithValue("@AccommodationID", AccomodationID);

            cmd.CommandType = CommandType.StoredProcedure;

            SqlDataAdapter da = new SqlDataAdapter(cmd);

            DataTable dt = new DataTable();

            da.Fill(dt);
            for (int j = 0; j < dt.Rows.Count; j++)
            {
                for (int k = 0; k < dt.Columns.Count; k++)
                {
                    Response += dt.Rows[j][k].ToString();
                }
            }

            //StringBuilder output = new StringBuilder();
            //XmlReader rawData  = XmlReader.Create(new StringReader(Response));

            //XmlWriterSettings writerSettings = new XmlWriterSettings();
            //writerSettings.OmitXmlDeclaration = true;

            //using (XmlWriter transformedData = XmlWriter.Create(output, writerSettings))
            //{
            //    XslCompiledTransform transform = new XslCompiledTransform();
            //    transform.Load(HttpContext.Current.Server.MapPath("getaccommodation2.xslt"));
            //    transform.Transform(rawData, transformedData);
            //    return output.ToString();
            //}

            XslCompiledTransform transform = new XslCompiledTransform();

            transform.Load(HttpContext.Current.Server.MapPath("getaccommodation2.xslt"));

            StringWriter results = new StringWriter();

            using (XmlReader reader = XmlReader.Create(new StringReader(Response)))
            {
                transform.Transform(reader, null, results);
            }
            return results.ToString();
            //XDocument xdoc = new XDocument(results.ToString());
            //return xdoc.Root;

        } 
```

## 调用函数：

```
 [OperationContract]
    [WebGet(UriTemplate = "/AccommodationsBookingPattern/getAccommodations?id={AccomodationID}",
    BodyStyle = WebMessageBodyStyle.Bare, RequestFormat = WebMessageFormat.Xml, ResponseFormat = WebMessageFormat.Xml)]
    string getAccomodationspattern2(string AccomodationID); 
```

问题是我收到这样的输出：

## 我现在得到的 XML 文件输出：

```
This XML file does not appear to have any style information associated with it. The document tree is shown below.

<string xmlns="http://schemas.microsoft.com/2003/10/Serialization/">
<result><Address></Address><checkin><from>00:30</from><to>01:15</to></checkin><city>London</city><city_id>1</city_id><Location><Latitude>13131313</Latitude><Longitude>11131131</Longitude></Location><city_id>1</city_id><max_persons_in_reservation>1000</max_persons_in_reservation><name>Tahir Hotel</name><ranking>1</ranking><url>123Testing</url><zip>W2 6DX</zip></result><result><Address></Address><checkin><from>00:30</from><to>01:15</to></checkin><city>London</city><city_id>1</city_id><Location><Latitude>13131313</Latitude><Longitude>11131131</Longitude></Location><city_id>1</city_id><max_persons_in_reservation>1000</max_persons_in_reservation><name>Tahir Hotel</name><ranking>1</ranking><url>123Testing</url><zip>W2 6DX</zip></result><result> 
```

## 问题

我想要正确的标签，我可以打开结果地址标签并以 xml 形式关闭。请帮助我将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T14:20:20.430

如果您希望 XML 作为 XML 而不是字符串返回，则应将返回类型更改为`XmlNode`

```
public XmlNode getAccomodationspattern2(string AccomodationID) 
```

然后返回一个：

```
XmlDocument doc = new XmlDocument();
doc.LoadXml(results.ToString());

return doc; 
```

# php - 带有目录的 Apache 虚拟主机 uri

> ID：14854867
> 
> 赞同：1
> 
> 时间：2013-02-13T13:38:52.883
> 
> 标签：php, apache, vhosts

我无法使用子目录在 url 上设置虚拟主机......我需要在这样的地址上运行我的项目：

`http://www.projects.loc/project1/` 这应该模拟在地址类似于的 Web 服务器上的安装

`http://www.someServer.com/projects/project1/`

我需要将重定向调整为“/”，以便返回`www.projects.loc/project1/`

在 hosts.txt 我有：

```
127.0.0.1       www.projects.loc 
```

vhosts 已启用，httpd-vhosts.conf 如下所示：

```
NameVirtualHost *:80

<VirtualHost *:80>
    DocumentRoot "D:/Projects/Project1/public/"         
    ServerName  www.projects.loc/project1/
</VirtualHost> 
```

我错过了什么？

**编辑：** .htaccess 看起来像这样：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule !\.(js|ico|gif|jpg|png|css)$ index.php [NC,L] 
```

该应用程序在干净的域上正常运行，但我无法将其配置为在 domain.com/some_dir/ 上运行

**编辑：**
解决了这个问题！

```
NameVirtualHost *:80   

   <Directory "D:/Projects"> 
      allow from all
   </Directory>

    <VirtualHost *:80>
        DocumentRoot "D:/Projects"      
        ServerName  www.projects.loc/

        Alies /project1  /Project1/public/
    </VirtualHost> 
```

注意：这是仅适用于开发环境的最小配置，
请查看@Mz 接受的答案以获取生产环境的完整详细信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T16:46:08.010

可能你已经解决了这个问题。无论如何，我今天正在寻找类似的东西，因此我在这里记录了解决方案：

您不想在 ServerName 中写斜杠

```
服务器名称 www.projects.loc/project1/
```

如果您只有一个名为“project1”的项目，您可以使用“ServerPath”轻松完成工作，您的虚拟主机配置将如下所示：

```
<VirtualHost *:80>
  ServerName projects.loc
  ServerAlias www.projects.loc
  ServerPath /project1/
  DocumentRoot /PATH/public_html
  ErrorLog /PATH/error_log
  CustomLog /PATH/access_log combined
  DirectoryIndex index.html index.htm index.php index.php4 index.php5

  <Directory /PATH/public_html>
    Options -Indexes +IncludesNOEXEC +FollowSymLinks
    allow from all
  </Directory>

</VirtualHost> 
```

通过 ServerPath，您可以将目录挂载到 projects.loc/project1

无论如何，假设您有多个要绑定到 projects.loc/project1、projects.loc/project2 等的项目（project1、project2），请使用“别名”。您的虚拟主机配置文件应如下所示：

```
<VirtualHost *:80>
  ServerName projects.loc
  ServerAlias www.projects.loc
  DocumentRoot /PATH/public_html
  ErrorLog /PATH/error_log
  CustomLog /PATH/access_log combined
  DirectoryIndex index.html index.htm index.php index.php4 index.php5

  <Directory /PATH/public_html>
    Options -Indexes +IncludesNOEXEC +FollowSymLinks
    allow from all
  </Directory>

  Alias /project1 "/PATH/public_html/project1"
  <Directory "/PATH/public_html/project1">
    DirectoryIndex index.html index.htm index.php index.php4 index.php5
    Options -Indexes +IncludesNOEXEC +FollowSymLinks
    allow from all
  </Directory>

  Alias /project2 "/PATH/public_html/project2"
  <Directory "/PATH/public_html/project2">
    DirectoryIndex index.html index.htm index.php index.php4 index.php5
    Options -Indexes +IncludesNOEXEC +FollowSymLinks
    allow from all
  </Directory>

</VirtualHost> 
```

放置在文件夹 /PATH/public_html/project1 中的应用程序将在 projects.loc/project1 中可用，放置在文件夹 /PATH/public_html/project2 中的应用程序将在 projects.loc/project2 中可用，依此类推。

我宁愿为不同的应用程序使用不同的子域。这样做的好处是每个子域主机都有自己的配置文件，这也使得错误和访问日志处理更容易。通过使用别名，如果您想为每个应用程序配置不同的错误和访问日志将更加困难。

进一步阅读：
关于别名：[http](http://httpd.apache.org/docs/current/mod/mod_alias.html)
://httpd.apache.org/docs/current/mod/mod_alias.html 关于ServerPath：[http ://httpd.apache.org/docs/2.2/vhosts/examples.html#serverpath](http://httpd.apache.org/docs/2.2/vhosts/examples.html#serverpath)

# c# - 使用带参数的方法创建新线程

> ID：14854878
> 
> 赞同：20
> 
> 时间：2013-02-13T13:39:21.553
> 
> 标签：c#, multithreading

我正在尝试创建新线程并传递带有参数的方法，但出现错误。

```
Thread t = new Thread(myMethod);
t.Start(myGrid);

public void myMethod(UltraGrid myGrid)
{
} 
```

---------错误------------

> 错误：CS1502 - 第 92 行 (164) - 匹配“ `System.Threading.Thread.Thread(System.Threading.ThreadStart)`”的最佳重载方法有一些无效参数
> 
> 错误：CS1503 - 第 92 行 (164) - 参数“1”：无法从“方法组”转换为“ `System.Threading.ThreadStart`”

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2013-02-13T14:19:01.953

将参数传递给方法的一种更方便的方法是使用 lambda 表达式或匿名方法，因为您可以传递具有所需参数数量的方法。ParameterizedThreadStart 仅限于只有一个参数的方法。

```
Thread t = new Thread(()=>myMethod(myGrid));
t.Start();

public void myMethod(UltraGrid myGrid)
{
} 
```

如果您有类似的方法

```
public void myMethod(UltraGrid myGrid, string s)
{
}

Thread t = new Thread(()=>myMethod(myGrid, "abc"));
t.Start(); 
```

[http://www.albahari.com/threading/#_Passing_Data_to_a_Thread](http://www.albahari.com/threading/#_Passing_Data_to_a_Thread)

那是一本值得阅读的好书！

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-02-13T13:42:23.077

将线程初始化更改为：

```
var t = new Thread(new ParameterizedThreadStart(myMethod));
t.Start(myGrid); 
```

还有方法：

```
public void myMethod(object myGrid)
{
    var grid = (UltraGrid)myGrid;
} 
```

[匹配`ParameterizedThreadStart`委托人签名](http://msdn.microsoft.com/en-us/library/system.threading.parameterizedthreadstart.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T13:43:56.513

```
 public void myMethod(object myGrid)
    {
        var typedParam = (UltraGrid)myGrid;
        //...
    }

    Thread t = new Thread(new ParameterizedThreadStart(myMethod));
    t.Start(myGrid); 
```

# maven - jtds没有合适的驱动maven tomcat运行

> ID：14854882
> 
> 赞同：0
> 
> 时间：2013-02-13T13:39:36.457
> 
> 标签：maven, jndi, jtds, maven-tomcat-plugin

我遇到了这个小问题：

`pom`像这样添加了对我的依赖

```
 ....

  <dependency>
    <groupId>net.sourceforge.jtds</groupId>
    <artifactId>jtds</artifactId>
    <version>1.2.6</version>
  </dependency> 
```

.. 已将 Maven 依赖项添加到我的`war`应用程序`build path`

我的 context.xml 看起来像：

```
 <?xml version='1.0' encoding='utf-8'?>
 <Context reloadable="true">
  <Resource name="jdbc/TestDS" auth="Container"
        type="javax.sql.DataSource"
        driverClass="net.sourceforge.jtds.jdbcx.JtdsDataSource"
        url="jdbc:jtds:sqlserver://localhost:1433/testdb"
        username="sa" password=""/>     
</Context> 
```

...

仍然当我执行`mvn tomcat:run`. 我明白了

```
org.apache.tomcat.dbcp.dbcp.SQLNestedException: Cannot create JDBC driver of class ''   
for connect URL 'jdbc:jtds:sqlserver://localhost:1433/testdb'
.....
Caused by: java.sql.SQLException: No suitable driver
    at java.sql.DriverManager.getDriver(DriverManager.java:264)
    at     

org.apache.tomcat.dbcp.dbcp.BasicDataSource.createConnectionFactory(BasicDataSource.java:1437)
    ... 36 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T13:46:40.207

如果您使用 JNDI 定义数据源，则驱动程序必须[“可用于 Tomcat 内部类和您的 Web 应用程序”](http://tomcat.apache.org/tomcat-6.0-doc/jndi-resources-howto.html#JDBC_Data_Sources)。

因此，如果您只将驱动程序 jar 添加到您的战争中，Tomcat 将无法找到驱动程序类。

您可以[将 jar 添加到插件依赖项](https://issues.apache.org/jira/browse/MTOMCAT-50)中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-28T04:42:01.547

并查看[http://tomcat.apache.org/maven-plugin-2.2/run-mojo-features.html](http://tomcat.apache.org/maven-plugin-2.2/run-mojo-features.html)（查看如何声明 derby 依赖项）

# c++ - 可转换的类型和不明确的调用

> ID：14854888
> 
> 赞同：0
> 
> 时间：2013-02-13T13:39:52.157
> 
> 标签：c++, casting, type-conversion, implicit-conversion

我有一系列类型，我希望它们可以自由转换。考虑以下玩具示例：

```
struct A {
  int value;
  A(int v) : value(v) { }
};

struct B {
  int value;
  B(int v) : value(v) { }
  B(A a) : value(a.value) { }
  operator A() const { return A(value); }
};

struct C {
  int value;
  C(int v) : value(v) { }
  C(A a) : value(a.value) { }
  C(B b) : value(b.value) { }
  operator B() const { return B(value); }
  operator A() const { return A(B(*this)); } // <-- ambiguous
};

int main(int argc, const char** argv) {
  C c(5);
  A a(3);
  a = c;
} 
```

如您所见，我试图将每个后续类型定义为可以使用强制转换构造函数从所有先前的类型转换，并可以使用强制转换运算符转换为所有先前的类型。唉，这不能按预期工作，因为`C::operator A`根据 gcc 4.7 的定义是不明确的：

```
 In member function ‘C::operator A() const’:
19:40: error: call of overloaded ‘B(const C&)’ is ambiguous
19:40: note: candidates are:
9:3: note: B::B(A)
6:8: note: constexpr B::B(const B&)
6:8: note: constexpr B::B(B&&) 
```

将表达式更改为`static_cast<A>(static_cast<B>(*this))`不会改变任何事情。完全删除该行会导致 中的错误消息`main`，因为没有隐式转换序列可以使用多个用户定义的转换。在我的玩具示例中，我可以直接执行 from`C`到 to的转换`A`，但在我的实际应用程序中，这样做会导致大量重复代码，所以我真的想要一个重用其他转换运算符的解决方案。

那么如何在不复制转换代码的情况下获得一组三种可自由转换的类型呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T13:46:58.877

试试这个：

```
operator A() const { return A(B(value)); } 
```

或这个：

```
operator A() const { return A(operator B()); } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T13:47:11.027

我会在 struct C 中尝试这种方式：

```
operator A() const { return this->operator B(); } 
```

# javascript - JSP 表单验证

> ID：14854898
> 
> 赞同：0
> 
> 时间：2013-02-13T13:40:13.110
> 
> 标签：javascript, forms, jsp, webforms, jsp-tags

我在 JSP 表单中存储了一个短语验证。其中一个名为 FB-Number 的文本字段应该只接受如下格式：FG123-1238234。（可以是任何字母或任何数字）

数字和字母的个数不限，在“-”之前，数字或字母都可以在前（FG123-）或（123FG-）。简而言之，“-”之前只能是大写字母和数字的混合，“-”之后只能是数字。必须在中间写“-”。

我在表单验证函数中编写了以下代码，但它不起作用。如果有人可以提供帮助，我将不胜感激。

```
 var numericExpression =/^[A-Z0-9]+\-[0-9]\+$/;if(theForm.fb_number.value.match(numericExpression)){
            return true;
    }else{
            alert("Enter valid format for FB_Number");
        theForm.fb_number.focus();
            return false;
    }enter code here 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T14:03:37.943

```
 public static void main(String[] args) {
       String REGEX="[A-Z]{0,}[0-9]{0,}[-]{1}[0-9]{0,}";
       String INPUT ="AB877-53434";

       Pattern p = Pattern.compile(REGEX);

       Matcher m = p.matcher(INPUT);

       System.out.println(m.matches());
         }
} 
```

在这里，您还可以将 AZ 或 0-9 的出现从 0 更改为您想要的 {2,}

# javascript - 如何修复冲突的 Jquery 源 1.31 和 1.61？

> ID：14854899
> 
> 赞同：0
> 
> 时间：2013-02-13T13:40:18.140
> 
> 标签：javascript

我有一个带有 js 源的页面。我必须包括两个不同的 jquery 源。如果我拿出一个倒计时时钟不起作用。我如何使用 js conflit？

```
<script type="text/javascript" src="files/js/jquery-1.3.1.min.js"></script>
<script type="text/javascript" src="files/js/jquery.scrollTo.js"></script>
<script type="text/javascript" src="files/js/kivi.js"></script>
        <script type="text/javascript" src="files/js/jquery.leanModal.min.js"></script>
        <script type="text/javascript">
            $(function() {
                $('a[rel*=leanModal]').leanModal({ top : 200, closeButton: ".modal_close" });       
            });
        </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T13:50:11.053

我认为您最好了解如何修复 contdown 时钟，而不是在页面上加载 2 个版本的 jquery。

有一种 noconflict 方法，但我确信插件不会那样做。您可以编辑插件的源代码，将其包装在一个匿名的自执行函数中，该函数采用一个参数

```
(function($) { 
 // your plugin code here
})(JQ); 
```

其中 JQ 是您从该插件所需的任何 jquery 版本中获得的非冲突名称。

所以最安全的方法是修复时钟插件

# html - 当没有任何工作时如何使用 CSS 向上移动文本

> ID：14854900
> 
> 赞同：25
> 
> 时间：2013-02-13T13:40:20.450
> 
> 标签：html, css

我想将页面底部显示的文本稍微向上移动，并尝试了我所知道的几乎所有内容和谷歌，但无法向上移动文本以显示剩余的剪辑文本。

附件是相同的屏幕截图请建议可以做些什么来完成这项任务 ![从底部剪切的文本](../Images/4adcaef515b850d221b0a8248577f2c6.png)

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-02-13T13:42:35.947

你可以试试

```
position: relative;
bottom: 20px; 
```

但我的浏览器（谷歌浏览器）没有发现问题

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2014-02-10T22:46:09.077

尝试负边距。

```
margin-top: -10px; /* as an example */ 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-12-30T01:55:42.600

```
footerText {
    line-height: 20px;
} 
```

你不需要开始玩其他元素的位置甚至布局......使用这个简单的解决方案

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-13T13:56:57.317

使用了以下代码段，它工作正常..

```
.smallText .bmv-disclaimer {
   height: 40px;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-13T13:42:36.077

您的页脚容器正在使用其自身的显式宽度来限制内部元素的宽度，它会看到文本在末尾被剪裁并换行，因此请更改：

```
div#fv2-footer-container {
  width: 1090px;
  ... 
```

# javascript - JS -Jquery - 从 Jquery 插件内部调用方法

> ID：14854913
> 
> 赞同：0
> 
> 时间：2013-02-13T13:41:04.590
> 
> 标签：javascript, jquery, toggle, accordion

我有一个非常实用的手风琴，来自我在一个旧存档网站上找到的第 3 方脚本（因此不是我自己的编码）。

[http://jsfiddle.net/obmerk99/Rm8Py/1/](http://jsfiddle.net/obmerk99/Rm8Py/1/)

现在，我不是 Javascript 人，我想知道如何制作一个全局切换按钮，可以一键打开/关闭整个集合，可以从脚本内部调用方法.. 我试着做

```
jQuery(this).accordion().activate(this, 'toggle', 'parents'); 
```

也只是

```
jQuery('ul').accordion().activate(); 
```

但由于我的 JS 技能接近 NULL，我似乎无法完成这项工作..

有没有办法从这个函数中调用一些内部方法，这将是所有级别和手风琴的全局切换触发器，而无需更改插件代码本身？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T14:19:20.153

我不确定我是否理解；手风琴的全部意义在于一次只打开一个窗格，并且切换代码强制执行此操作。修改该插件以在所有 UL 上调用其辅助函数并不难`activate`，但当它打开每个窗格时，它会关闭所有其他窗格，从而踩到自己。

此外，您不想切换所有窗格，因为有些是关闭的，有些是打开的，所以切换每个窗格不会完成让它们全局打开或关闭。

相反，您必须直接操作 DOM，绕过手风琴的逻辑。当您单击“切换”链接时，这将打开所有窗格：

```
jQuery("#toggle").click(function(){$("ul").slideDown()}); 
```

要真正让它切换，试试这个：

```
(function(){
    var isClosed = true;
    jQuery("#toggle").click(function(){
        if (isClosed) {
            jQuery("ul").slideDown();
        }
        else {
             jQuery("ul").find("ul").slideUp();
        }
        isClosed = !isClosed;
    });
})(); 
```

小提琴：http: [//jsfiddle.net/Rm8Py/2/](http://jsfiddle.net/Rm8Py/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T14:20:59.490

`activate`实际上是一个私有函数，你不能在不改变插件代码的情况下从插件外部调用它。

为了公开它，通常接受方法名称作为参数。（代码简化，通常更优雅一些。）

```
accordion: function(method, arg1, arg2, arg3) {
    return this.each(function () {
        if (method == "activate") {
            activate(arg1, arg2, arg3);
        }
       // ....
    }) 
```

你现在可以这样称呼它：

```
 myAccordion.accordion("activate", $("ul")) 
```

插件代码被缩小（单字符变量名），所以我不确定`activate`函数需要什么参数。

# java - 地图的自省

> ID：14854916
> 
> 赞同：0
> 
> 时间：2013-02-13T13:41:13.717
> 
> 标签：java, introspection

我正在尝试开发一些可移植到 J2SE 和 Android 平台的实用程序代码，用于缓存对象。计划是在我开始工作时提取一个抽象类，但现在它是最终类实现的一部分。

我希望缓存的对象刚刚被实例化并传递给`store(Object, Object)`最终版本中将成为抽象类的一部分的方法，因此它需要使用自省来确定如何存储它所传递的数据。

算法不是很复杂：

1）。扫描对象的方法以查找`@Id`属性，如果找到，则使用它来获取对象的键。

2）。扫描 store() 方法自己的类以查找实现该`put(key.getClass(), value.getClass())`方法的字段并使用它来缓存对象。

第 (1) 部分工作得很好，第 (2) 部分我无法开始工作。我得到：

```
DEBUG c.n.v.ui.cache.Cache Not found: operativesMap.put(String, OperativeEntity)
WARN c.n.v.ui.cache.Cache Object Joe Bloogs, with key cac57510-c9c6-11df-8000-b56f1ffcb182 not cached!
INFO c.n.v.ui.cache.Cache Object Joe Bloggs, with key cac57510-c9c6-11df-8000-b56f1ffcb182 cached. 
```

记录显示自省代码未能找到 put 方法并且已经落入双重检查逻辑（当我将该方法移动到抽象类时必须将其删除）。

一如既往地非常感谢你在这方面的帮助。

史蒂夫

```
public void store(Object key,
          Object value) {
    if (log.isInfoEnabled())
        log.info("Storing:  " + key + " => " + value);

    for (Field field: getClass().getDeclaredFields())
        if (store(field, key, value))
         return;

    log.warn("Object " + value + ", with key " + key + " not cached!");

    if (value instanceof OperativeEntity) {
        operativesMap.put(key.toString(), (OperativeEntity) value);
        log.info("Object " + value + ", with key " + key + " cached.");

        // How did I get here, and I do - the loop above should have found
        // operativesMap, it's put method and stored the value
    }
}

public boolean store(Field field,
             Object key,
             Object value) {
    try {
        Method method = field.getClass().getMethod("put", key.getClass(), value.getClass());

        if (null != method)
            return store(field.get(this), method, key, value);

        else
            return false;

    } catch (NoSuchMethodException cause) {
        if (log.isDebugEnabled())
        log.debug("Not found: " + field.getName() + ".put(" + key.getClass().getSimpleName()
                  + ", " + value.getClass().getSimpleName() + ")");
        return false;

    } catch (Exception cause) {
        log.error("Stroing " + key + "=>" + value + " mapping", cause);
        return false;
    }
}

public boolean store(Object obj,
             Method method,
             Object key,
             Object value) {
    try {
        method.invoke(obj, key, value);
        if (log.isInfoEnabled())
           log.info(">>>>>> Cached " + key + "=>" + value);
        return true;

    } catch (Exception cause) {
        log.error("Stroing " + key + "=>" + value + " mapping", cause);
        return false;
    }
} 
```

**更新**：

对于将来阅读本文的任何人，找到有效的 put 方法的代码如下所示：

```
public boolean store(Field field,
         Object key,
         Object value) {
try {
    Object obj = field.get(this);
    Method method = obj.getClass().getMethod("put", Object.class, Object.class);

    if (null != method) {
    Class[] params = method.getParameterTypes();
    if (log.isDebugEnabled())
        log.debug("  Found: put(" + params[0].getSimpleName() + ", " + params[1].getSimpleName() + ")");

    if (params[0].isAssignableFrom(key.getClass())
        && params[1].isAssignableFrom(value.getClass()))
        return store(obj, method, key, value);

    else
        return false;

    } else
    return false;

} catch (NoSuchMethodException cause) {
    if (log.isDebugEnabled())
    log.debug("Not found: " + field.getName() + ".put(Object, Object)");
    return false;

} catch (Exception cause) {
    log.error("Storing " + key + "=>" + value + " mapping", cause);
    return false;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T13:51:17.540

`Class.getMethod()`接受参数的实际声明类型。所以，对于一张地图，那就是`getMethod("put", Object.class, Object.class)`. 如果您只是想找到一个`put()`可以接受您拥有的键和值类型的方法，您将需要遍历类的方法并检查参数`Class.isAssignableFrom()`。

# ruby-on-rails - (Mongodb & Datamapper) 未初始化常量 DataMapper (NameError)

> ID：14854918
> 
> 赞同：1
> 
> 时间：2013-02-13T13:41:27.773
> 
> 标签：ruby-on-rails, ruby, mongodb, datamapper, ruby-datamapper

我尝试在我的项目中使用 datamapper 和 mongoid。我点击了链接[https://github.com/solnic/dm-mongo-adapter](https://github.com/solnic/dm-mongo-adapter)。但是没有那么多信息。我在这篇文章中融入了 datamapper 和 sqlite3 适配器：http://net.tutsplus.com/tutorials/ruby/ruby-for-newbies-working-with-datamapper/ sqlite3[一切](http://net.tutsplus.com/tutorials/ruby/ruby-for-newbies-working-with-datamapper/)正常，但我陷入了 mongodb 的困境。

当我在控制台中运行“ruby rm.db”时，出现“dm.rb:1:in `': uninitialized constant DataMapper (NameError)”错误。

我该如何解决这个问题？我在下面的 gemfile 中添加了这些 gem：

```
dm-core
dm-aggregates
dm-migrations
mongo
mongodb
mongo_ext 
```

然后我在项目根目录中名为**dm.rb的文件中添加了以下代码。**

```
DataMapper.setup(:default,
  :adapter  => 'mongo',
  :database => 'my_mongo_db',
)

# Define resources
class Student
  include DataMapper::Mongo::Resource

  property :id, ObjectId
  property :name, String
  property :age, Integer
end

class Course
  include DataMapper::Mongo::Resource

  property :id, ObjectId
  property :name, String
end

# No need to (auto_)migrate!
biology = Course.create(:name => "Biology")
english = Course.create(:name => "English")

# Queries
Student.all(:age.gte => 20, :name => /oh/, :limit => 20, :order => [:age.asc])

# Array and Hash as a property
class Zoo
  include DataMapper::Mongo::Resource

  property :id, ObjectId
  property :opening_hours, Hash
  property :animals, Array
end

Zoo.create(
  :opening_hours => { :weekend => '9am-8pm', :weekdays => '11am-8pm' },
  :animals       => [ "Marty", "Alex", "Gloria" ])

Zoo.all(:animals => 'Alex') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T00:28:47.667

我分两部分为你解答。

首先，为了解决您当前的问题，问题是在您尝试使用它之前看起来您不需要 DataMapper。您可以在 rb 文件的顶部要求 dm-mongo-adapter ，或者由于您使用的是捆绑器，您实际上可以`Gemfile`直接在您的文件中执行此操作。

```
# add this to the beginning of your dm.rb file
require 'dm-mongo-adapter'

# or put this in your Gemfile, run with `bundle exec dm.rb`
gem 'dm-mongo-adapter', :require => true 
```

二、关于dm-mongo-adapter的使用。这种方法有几个问题，现在和以后可能会让你头疼。

1.  MongoDB 不使用 SQL 语法进行查询，它是一个非关系型数据库。DataMapper 非常棒，它完全基于 SQL 作为一种查询语言，它的所有 API 和文档建模助手在设计时都考虑到了关系数据建模。

    您使用的 mongo 适配器旨在尝试为习惯于 SQL 语法的开发人员弥合这一差距，但是这两种方法截然不同，以至于由于查询不佳、索引不佳，您最终可能会获得次优性能以及糟糕的数据模型，这些模型从未真正设计用于像 MongoDB 这样的数据库。

    我强烈建议检查[Mongoid](http://mongoid.org/)或[Mongo Mapper](http://mongomapper.com/)（或仅使用[mongo](https://github.com/mongodb/mongo-ruby-driver) gem 本身）而不是采用这种方法。

    此外，您应该查看 10gen 的网站，那里有许多关于 MongoDB 与传统关系数据库的不同之处以及为什么在构建应用程序之前了解差异如此重要的精彩演讲和演示。

    [http://www.10gen.com/presentations/building-your-first-app-introduction-mongodb-0](http://www.10gen.com/presentations/building-your-first-app-introduction-mongodb-0) [http://www.10gen.com/presentations/schema-design-4](http://www.10gen.com/presentations/schema-design-4)

2.  如果您查看[github](https://github.com/solnic/dm-mongo-adapter)的 dm-mongo-adapter，它似乎一年多没有更新。这可能与我刚刚在上面写的内容有很大关系，但也会引起它自己的麻烦。您甚至不可能成功地使用较旧版本的 MongoDB 和较新版本的 MongoDB，而且您肯定无法利用较新的 MongoDB 功能。

# cakephp - cakePHP：如何获取迭代器

> ID：14854930
> 
> 赞同：1
> 
> 时间：2013-02-13T13:42:13.180
> 
> 标签：cakephp, foreach

我使用类似于此代码的内容：

```
<?php foreach ($items as $item): ?>
    <div><?php echo $item['Item']['content']; ?></div>
<?php endforeach; ?> 
```

而且我想知道每个项目是哪个元素，因为我想为每行的第四个项目添加类“last-in-row”。如何制作这样的代码？

```
<?php for ($i=1; $i <= $items.count; $i++) {
    echo "<div ";
    if ($i % 4 == 0) {
        echo " class=\"last-in-row\""; }
    echo ">$items[$i]</div>";
}; ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T13:57:30.020

我尚未对其进行测试，但以下应该可以工作。

```
<?php 
$i = 1;
foreach ($items as $item) {
  $class = ($i % 4 == 0) ? '' : 'class="last-in-row"';
  echo "<div $class>{$item['Item']['content']}</div>";
  $i++;
} 
?> 
```

ps 我希望你正在[清理](http://book.cakephp.org/2.0/en/core-utility-libraries/sanitize.html#Sanitize%3a%3ahtml)$item['Item']['content']。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T14:56:03.137

你想要做的事情可以用 css3 来完成。这意味着您不需要添加更好的类，因为稍后您可能需要连续 3 或 5 个。

```
div:nth-child(4n+4) {
    ....
    clear: both;
    ....
} 
```

没有 css3 的 CakePHP 选项

```
foreach ($items as $i => $item) {
    echo $this->Html->tag('div', $item['Item']['content'], array(
        'class' => ($i + 1) % 4 === 0 ? 'last' : null
    ));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T14:01:33.467

您在第二个示例中几乎拥有它，只需更改`$items.count`为`count($items)`

```
$itemsCount = count($items);
for ($i=1; $i <= $itemsCount ; $i++) {
    echo "<div ";
    if ($i % 4 == 0) {
        echo " class=\"last-in-row\""; }
    echo ">{$items[$i]}</div>";
} 
```

# nfc - 如何使用 ACR122U-A9 进行卡片模拟

> ID：14854933
> 
> 赞同：5
> 
> 时间：2013-02-13T13:42:22.697
> 
> 标签：nfc, hce, acr122

我有一个 ACR122U-A9，我想用它来模拟卡。请问这点是谁做的？你能给我一些建议吗？

现在我还有其他问题，当我将白色智能卡放在这个 NFC 读卡器上时，LED 只闪烁一次。但是当我把手机放在上面时，LED总是闪烁直到手机掉线。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-04-21T12:26:28.840

ACR122U 包含一个 PN532 NFC 控制器芯片。PN532 通过其`TgInitAsTarget`命令支持主机卡仿真（参见[PN532 用户手册](http://www.nxp.com/documents/user_manual/141520.pdf)）。为了将命令传递给 PN532，您需要连接到 ACR122U，就像它是一个普通的智能卡读卡器一样（例如使用 PC/SC）。然后，您可以将 pack PN532 命令发送到格式为 reader-APDU 中

```
> FF000000 <Lc> <Command> 
```

并在表格中得到回复

```
< <Response> 9000 
```

因此，为了让 ACR122 进入卡模拟模式，您需要执行以下操作：

1.  读注册：

    ```
    > FF000000 08 D406 6305 630D 6338
    < D507 xx yy zz 9000 
    ```

2.  更新寄存器值：

    ```
    xx = xx | 0x004;  // CIU_TxAuto |= InitialRFOn
    yy = yy & 0x0EF;  // CIU_ManualRCV &= ~ParityDisable
    zz = zz & 0x0F7;  // CIU_Status2 &= ~MFCrypto1On 
    ```

3.  写寄存器：

    ```
    > FF000000 11 D408 6302 80 6303 80 6305 xx 630D yy 6338 zz
    < D509 9000 
    ```

4.  设置参数：

    ```
    > FF000000 03 D412 30
    < D513 9000 
    ```

5.  TgInitAsTarget

    ```
    > FF000000 27 D48C 05 0400 123456 20 000000000000000000000000000000000000 00000000000000000000 00 00
    < D58D xx ... 9000 
    ```

    其中`xx`应该等于 0x08。

6.  使用一系列 TgGetData 和 TgSetData 命令进行通信：

    ```
    > FF000000 02 D486
    < D587 xx <C-APDU> 9000 
    ```

    状态码在哪里`xx`（应该是`0x00`成功），C-APDU是读写器发出的命令。

    ```
    > FF000000 yy D48E <R-APDU>
    < D587 xx 9000 
    ```

    其中`yy`2 + R-APDU（响应）的长度，`xx`是状态码（应该是`0x00`成功）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-25T07:54:51.367

基本上 ACR122U 不是用来模拟卡的，而制造商仍然很少有信息说它可以用来模拟 NFC 卡。如果这是可能的，那就不会那么直截了当。我建议您尝试 Android Host Card Emulation（Android 4.4 上的 HCE）。

对于第 2 部分：当我打开 NFC 芯片并将手机放在读卡器上时，我尝试使用手机 (Xperia Z)，双方都没有发生任何事情。也许您正在使用手机的卡模拟功能。

# charts - Vaadin InvientCharts formatterJsFunc

> ID：14854934
> 
> 赞同：0
> 
> 时间：2013-02-13T13:42:26.860
> 
> 标签：charts, vaadin

我正在使用 vaadin 插件来显示一些图表，并且我有这样的方法可用：setFormatterJsFunc 并且我不确定它可以使用什么样的变量。

有没有人遇到过这个？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T07:53:17.477

它的输入是一个`javascript`函数，当您将鼠标悬停在图表中的某个点上时，它会显示那里的值。

例如;

```
tooltip.setFormatterJsFunc("function() {"
            + " return '' + this.series.name +': '+ this.y +''; " + "}"); 
```

# java - 例外由于从互联网/本地引用 struts.dtd 文件

> ID：14854935
> 
> 赞同：3
> 
> 时间：2013-02-13T13:42:27.227
> 
> 标签：java, struts2, struts

从早上运行struts2应用程序时遇到异常......应用程序昨天工作

加载一些 struts2-jquery jar 时存在问题，即使它们存在于 WEB-INF/lib 中

浏览后我得到了一些解决方案来改变 struts.xml`<!DOCTYPE ....>`

喜欢改变

```
<!DOCTYPE struts PUBLIC
    "-//Apache Software Foundation//DTD Struts Configuration 2.3//EN"
    "http://struts.apache.org/dtds/struts-2.3.dtd"> 
```

至

```
<!DOCTYPE struts SYSTEM "../dtds/struts-2.0.dtd"> 
```

或者

```
<!DOCTYPE struts SYSTEM "struts-2.0.dtd"> 
```

对于本地引用 struts.dtd 但这些都不起作用..

控制台异常：

```
Unable to load configuration. - action - file:/D:/.........plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/XXXXXXXX/WEB-INF/classes/struts.xml:25:88
    at com.opensymphony.xwork2.config.ConfigurationManager.getConfiguration(ConfigurationManager.java:58)
    at org.apache.struts2.dispatcher.Dispatcher.init_PreloadConfiguration(Dispatcher.java:360)
    at org.apache.struts2.dispatcher.Dispatcher.init(Dispatcher.java:403)
    at org.apache.struts2.dispatcher.ng.InitOperations.initDispatcher(InitOperations.java:69)
    at org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.init(StrutsPrepareAndExecuteFilter.java:48)
    at org.apache.catalina.core.ApplicationFilterConfig.initFilter(ApplicationFilterConfig.java:273)
    at org.apache.catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:254)
    at org.apache.catalina.core.ApplicationFilterConfig.setFilterDef(ApplicationFilterConfig.java:372)
    at org.apache.catalina.core.ApplicationFilterConfig.<init>(ApplicationFilterConfig.java:98)
    at org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:4584)
    at org.apache.catalina.core.StandardContext$2.call(StandardContext.java:5262)
    at org.apache.catalina.core.StandardContext$2.call(StandardContext.java:5257)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: Error building results for action getGroups in namespace  - action - file:/D:/T....plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/XXXXXXX/WEB-INF/classes/struts.xml:25:88 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T13:48:54.837

由于 Apache 项目发布机制发生了变化，此问题已得到解决。

详情：

[https://issues.apache.org/jira/browse/WW-3979](https://issues.apache.org/jira/browse/WW-3979)

# javascript - jquery：创建当前文本选择的 xpath

> ID：14854936
> 
> 赞同：3
> 
> 时间：2013-02-13T13:42:28.043
> 
> 标签：javascript, jquery, xpath

有没有办法，使用 jquery 来获取当前文本选择的 XPath 查询？

谢谢你的帮助，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T13:46:35.887

尝试这个：

*更新*它现在应该可以工作了：

```
var path = "/" + element.parents().map(function () {
    return this.tagName;
}).get().reverse().join("/");

path += "/" + element.prop("tagName") + "[" + (element.prevAll().length + 1) + "]"; 
```

[http://jsfiddle.net/95PnT/5/](http://jsfiddle.net/95PnT/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T13:47:00.077

不，没有使用 jQuery 执行此操作的内置方法。但是，还有其他 javascript 选项，请参见此处：[如何使用 Javascript 计算元素的 XPath 位置？](https://stackoverflow.com/questions/3454526/how-to-calculate-the-xpath-position-of-an-element-using-javascript)

# java - 如何验证 string.split() 是否返回 null

> ID：14854937
> 
> 赞同：8
> 
> 时间：2013-02-13T13:42:33.080
> 
> 标签：java, string-split

我正在从文件中读取数据：

```
Some Name;1|IN03PLF;IN02SDI;IN03MAP;IN02SDA;IN01ARC
Some Other Name;2|IN01ALG;IN01ANZ
Another Name;3|
Test Testson;4|IN03MAP;IN01ARC;IN01ALG 
```

我从该文件中读取的每一行都使用 string.split()，如下所示：

```
String args[]         = line.split("\\|");                  
String candidatArgs[] = args[0].split(";");

if (args[1] != "" || args[1] != null) { 

    String inscrieriString[] = args[1].split(";"); 
```

**事情是：**当我到达第二部分`Another Name;3|`之后（ ）应该是空的，或者 （我真的不知道）。`.split("\\|")``args[1]``null``""`

**但是**我得到一个数组索引越界错误`if (args[1] != "" || args[1] != null)`（再次，在`Another Name;3|`：）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-13T13:45:51.617

args 中只有一个元素。

```
if (args.length > 1) {
    字符串 inscrieriString[] = args[1].split(";");
}

```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-13T13:45:34.340

您需要检查`args`数组的长度。

[`String.split()`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split%28java.lang.String%29)为您的第三行返回一个长度为 1 的数组，因此`args[1]`超出范围。您还应该使用[`String.isEmpty()`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#isEmpty%28%29)而不是`!= ""`.

最有可能的是，您甚至可以跳过额外的检查——检查数组长度就足够了：

```
if (args.length > 1) {
    String inscrieriString[] = args[1].split(";");
    ...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T13:46:07.487

检查`args`拆分时的长度，并且仅在长度允许的情况下访问其他索引（如果`args.length > 1`）。

在这种情况下：

```
String line = "Another Name;3|"; //simplified for the example
line.split("\\|"); 
```

它将返回这个数组：

```
{ "Another Name;3" } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-13T13:46:41.800

尝试

```
String args[]         = line.split("\\|",2);                  
String candidatArgs[] = args[0].split(";");

if (args.length==2) 
    String inscrieriString[] = args[1].split(";"); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-13T13:46:46.050

`args[1]`不为空或为空。它超出了数组的范围。

```
System.out.println("Another Name;3|".split("\\|").length); 
```

在使用它之前，您需要检查数组的长度。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-13T13:51:03.070

我认为你可以测试 args 的长度，它应该返回 1 或 2。如果它是 1，你就知道没有 args[1]。

# php - 当我选择选项卡时，href 不起作用

> ID：14854942
> 
> 赞同：0
> 
> 时间：2013-02-13T13:42:36.697
> 
> 标签：php, jquery, codeigniter

```
<ul id="shortcuts">
    <li class='current'><a href="<?=base_url()?>home" id="home">Home</a></li>
    <li ><a href="<?=base_url()?>message"  id='message'>Messages</a></li>

</ul>

<script src="<?=base_url()?>js/libs/jquery-1.7.2.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){
    $('#shortcuts li').click(function(e){
         $('#shortcuts li').removeClass('current');
         $(this).addClass('current');
         e.preventDefault();
    });
});

</script> 
```

问题是我想突出显示选中的选项卡，当单击此选项卡时它已完成 bt 它不转到下一页意味着 href 不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T13:46:08.597

如果我对您的理解正确，您希望在单击链接时页面不更改，但您希望更改列表项的样式。这应该可以解决问题：

```
$('#shortcuts li a').click(function(e){
     // Prevent the link from changing the page
     e.preventDefault();

     // Remove 'current' from any list item with the 'current' class
     $('#shortcuts li.current').removeClass('current');

     // Add the 'current' class to the link's parent (its list item container)
     $(this).parent().addClass('current');
}); 
```

您当前所拥有的是告诉浏览器在单击列表项时不执行任何默认操作，而不是在单击链接本身时不执行任何默认操作，使其无法正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T13:47:28.897

请检查您的服务器是否允许使用短打开标签。它非常基本，但是，请查看它。

在 php.ini 中，有一个指令：

short_open_tags

对于您的脚本，它必须打开。请检查一下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T13:47:46.973

可能对你有帮助

```
$(document).ready(function(){
    $('#shortcuts li a').click(function(e){
         e.preventDefault();
         $('#shortcuts li').removeClass('current');
         $(this).parent().addClass('current');
         return false;
    });
}); 
```

# r - 如何创建由堆叠正方形组成的“ggplot2”图？

> ID：14854953
> 
> 赞同：0
> 
> 时间：2013-02-13T13:43:09.163
> 
> 标签：r, plot, ggplot2, visualization, data-visualization

我想使用 R 创建一个`ggplo2`看起来像这样的图（最好用 ）： ![情节插图](../Images/9bed8ee7b6df5aa3262efa1377606875.png)

在该图中，当每个正方形指定给定数量时，每个条都由不同数量的正方形组成。

我能想到的唯一方法是创建堆叠条形图（如下图所示）并在图上方放置水平线。但这对我来说看起来很尴尬。

**编辑**对此问题的评论者和指向[另一个 SO 问题](https://stackoverflow.com/questions/13701485/r-graphs-creating-tuftes-horizontal-bar-lines)的指针表明放置水平线是解决我的问题的方法。但是，如果一个人想要使用除正方形以外的积木块，例如圆形、小象形图等，会发生什么？

# ios - 在 cocos2d 中优化动画失败

> ID：14854955
> 
> 赞同：1
> 
> 时间：2013-02-13T13:43:13.097
> 
> 标签：ios, cocos2d-iphone

当我没有优化动画时，它运行良好。但是当我优化我的动画时，程序崩溃了。Xcode日志说：

> -[CCSpriteBatchNode addChild:z:tag:] 中的断言失败，/Users/hanpengbo/Documents/Xcode/cocos2d_helloWorld/cocos2d_helloWorld/libs/coco‌​s2d/CCSpriteBatchNode.m:183

在 CCSpriteBatchNode.m:183 中，有

```
NSAssert( child.texture.name == textureAtlas_.texture.name, @"CCSprite is not using the same texture id"); 
```

这是我的代码

```
// cache
    CCSpriteFrameCache *cache=[CCSpriteFrameCache sharedSpriteFrameCache];
    [cache addSpriteFramesWithFile:@"birdAtlas.plist"];

    // frame array
    NSMutableArray *framesArray=[NSMutableArray array];
    for (int i=1; i<10; i++) {
        NSString *frameName=[NSString stringWithFormat:@"bird%d.png", i];
        id frameObject=[cache spriteFrameByName:frameName];
        [framesArray addObject:frameObject];
    }

    // animation object
    id animObject=[CCAnimation animationWithFrames:framesArray delay:0.1];

    // animation action
    id animAction=[CCAnimate actionWithAnimation:animObject restoreOriginalFrame:NO];
    animAction=[CCRepeatForever actionWithAction:animAction];

    // sprite
    cocosGuy = [CCSprite spriteWithFile: @"Icon.png"];//cocosGuy is CCSprite,declared earler
    cocosGuy.position = ccp( 200, 300 );

    // batchNode
    CCSpriteBatchNode *batchNode=[CCSpriteBatchNode batchNodeWithFile:@"birdAtlas.png"];
    [self addChild:batchNode];
    [batchNode addChild:cocosGuy];

    [cocosGuy runAction:animAction]; 
```

更新：这是更正后的代码，它运行良好

```
 // batchNode
    CCSpriteBatchNode *batchNode=[CCSpriteBatchNode batchNodeWithFile:@"birdAtlas.png"];
    [cocosGuy setTexture:[batchNode texture]];
    [self addChild:batchNode];
    [batchNode addChild:cocosGuy]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T14:02:17.930

为此，您的 Icon.png 纹理应位于 birdAtlas.png 纹理中，并在 .plist 中进行适当的声明。Batchnodes 1) 使用一个纹理（并且只有一个）创建，并且 2) 只接受来自相同纹理的子精灵。

...而且，我不知道你的意图，但通常你会

```
CCSprite *cocosGuy = [CCSprite spriteWithSpriteFrame:[cache spriteFrameByName:@"bird1.png"]; 
```

在这种情况下，我认为批处理节点添加将起作用。

...并且，如果纹理仅包含该动画的动画帧，则不确定使用批处理节点是否会对动画产生任何影响。一次显示一个帧，所以我认为您不会从批量绘制调用中受益。

# python - 再次：在 Windows 上安装 Z3 + Python

> ID：14854956
> 
> 赞同：1
> 
> 时间：2013-02-13T13:43:15.777
> 
> 标签：python, python-2.7, z3

[前面问题](https://stackoverflow.com/questions/13368415/installing-z3-python-on-windows)中指出的安装问题仍然存在。我尝试在 Windows XP SP3 32 位和 Windows 7 64 位下安装 Z3 4.3.0 和 4.1。任何组合都不起作用！我可以做“ `from z3 import *`”，但`init()`Z3 dll 的失败。我的 Python 版本是 2.7.3。Z3 单机版和 Python 单机版确实可以工作，但如果没有很多抱怨，它们就不能一起工作。

这将有助于获得最新的安装配方，它可以回答以下问题：

应该使用哪个Z3下载（源码版、预编译版）？

应该使用哪个 Python 版本？

在 init() 调用中应该引用哪些或各种 Z3 DLL？一个例子会有所帮助（包括带有空格的路径的原始字符串用法）。

应该使用哪些 Z3 Python 源文件（一些 Z3 下载有 *.py 文件，其他有 *.pyc 文件）？编译后的 Python 文件是否兼容多个 Python 版本？

如何设置 PATH 和 PYTHONPATH？

如何以自动提供Z3初始化的方式调用Python的IDLE shell？

抱歉，如果这听起来像是一个新手问题，但是...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-14T21:28:27.403

克里斯托夫的回答是正确的。谢谢！

这里有一些可以帮助其他人的更多细节。（确保相应地调整路径）

修改后的`idle.bat`脚本`Python 2.7.3 (64-bit)`：

```
@echo off
rem Start IDLE using the appropriate Python interpreter
setlocal
set PATH=%PATH%;X:\my\Programme\z3-4.3.0-x64\bin
set PYTHONPATH=X:\my\Programme\z3-4.3.0-x64\bin
set CURRDIR=%~dp0
start "IDLE" "%CURRDIR%..\..\pythonw.exe" "%CURRDIR%idle.pyw" %1 %2 %3 %4 %5 %6 %7 %8 %9
endlocal 
```

`z3`路径必须是in`PATH` **和**in `PYTHONPATH`。

`Python/Idle`shell中的前两个语句：

```
from z3 import *
init(r"X:\my\Programme\z3-4.3.0-x64\bin\libz3.dll") 
```

（注意 'r' 表示带有反斜杠的原始字符串被视为普通字符）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T14:45:35.317

Windows XP 不支持 Z3 需要的 DLL 中的线程本地存储。我们目前正在对此进行修复，但无论如何，这意味着即使修复了，您也必须编译自己的 DLL。

在 Windows 7 上，它应该开箱即用。但是，您需要确保为 64 位编译所有内容或没有任何内容。如果您使用的是 32 位 python 版本，它将无法加载 64 位 DLL，反之亦然。在[Python.org](http://www.python.org/download/)上有两个下载，其中一个标记为 X86-64，它是 64 位版本。

最后需要将libz3.dll和*.pyc/py所在的目录添加到PYTHONPATH中。你可以设置这个系统范围（控制面板、系统、高级系统设置、高级、环境变量），然后 IDLE 也应该看到它。

# php - 使用一个表更新另一个 SQL

> ID：14854957
> 
> 赞同：1
> 
> 时间：2013-02-13T13:43:17.923
> 
> 标签：php, mysql, sql

我在从另一个表更新一个表时遇到问题。我希望 SQL 从两个字段相同`Employees`的数据中更新行。此外，如果其中的一个存在与其中的一个不匹配，那么我需要在其中创建一个新行， 到目前为止我已经尝试了两个表的连接。`CompanyEmployees``EmployeeNum``EmployeeNum``CompanyEmployees``Employees``Employees`

```
SELECT Employees.PhoneNum, Employees.Data, 
       CompanyEmployees.PhoneNum, CompanyEmployees.SystemData 
FROM CompanyEmployees 
INNER JOIN Employees 
ON CompanyEmployees.Employees=Techs.EmployeeNum 
```

我在两个表中都得到了正确的列数据，但我没有更新`Employees`。我需要在某处插入或更新吗？
如何将整行数据从不存在的地方`CompanyEmployees`插入？`Employees``CompanyEmployees.EmployeeNum``Employees`

我需要这样做，因为`CompanyEmployees`它只是一个电话目录，并且`Employees`有电话号码和更多信息。但是`CompanyEmployees`里面有不在里面的新员工`Employees`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T13:45:29.503

请记住，RDBMS 有 R 表示关系。它们是为关系而生的。
要使用 CompanyEmployees 表更新您的员工表，您可以使用如下内容：

```
INSERT INTO Employees (columns) VALUES (SELECT columns FROM CompanyEmployees) ON DUPLICATE KEY UPDATE 
```

您甚至可能不需要“Employees”，因为它是“CompanyEmployees”的超集。我建议合并这两个表或至少将数据移动到一个表中。

# jquery - 在拖放可排序列表中禁用交换功能

> ID：14854958
> 
> 赞同：0
> 
> 时间：2013-02-13T13:43:21.063
> 
> 标签：jquery, drag-and-drop

请找到如下链接：

[http://jqueryui.com/sortable/#connect-lists](http://jqueryui.com/sortable/#connect-lists)

这里有 2 个块，我们可以将 div 一个块拖到另一个块，也可以互换本身。

但是对于我的应用程序，我想禁用交换功能。

禁用交换本身需要哪个参数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T14:36:17.377

我尝试了各种 jquery 可排序事件和方法的组合，但没有找到解决方案来制定您的要求。

这就像要求 iPhone5 将其相机限制回 3.2MP。如果你想要那个功能，那么只需使用 iPhone 3 :P

所以看看可拖放的插件，你会得到你想要的。

# .net - Tridion：更改组件的嵌入式字段值

> ID：14854962
> 
> 赞同：0
> 
> 时间：2013-02-13T13:43:34.687
> 
> 标签：.net, tridion2009

我应该遍历所有组件并更改某些字段的内容。一切都很好，直到我遇到嵌入式文件。我不知道如何从嵌入式字段中获取值、检查嵌入式字段类型、更改值并保存。我可以使用 TOM.NET API 访问嵌入的字段，但在这种情况下我无法保存我的组件。如果我理解得很好，TOM.NET API 是“只读的”——不允许更改。

请帮忙 ！谢谢，米洛斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T09:55:04.863

我找到了解决方案。这是遍历所有嵌入字段的代码的和平：

```
public void loopFileds(ItemField field)
if(field.FieldType.Equals(Tridion.ContentManager.Interop.TDSDefines.EnumTridionWebSchemaFieldType.FieldTypeEmbed))
            {
            ItemFields embeddedFileds = field.value[1] as ItemFields;
            if (embeddedFileds != null)
                {
                foreach (ItemField item in embeddedFileds)
                    {
                       // recursive call to pass through all embedded fields with the custom depth
                       loopFileds(item);
                    }
                }

            } 
```

# iphone - 两个lat long ios之间距离的准确性

> ID：14854965
> 
> 赞同：4
> 
> 时间：2013-02-13T13:43:44.170
> 
> 标签：iphone, ios, objective-c, gps

我正在使用`-(CLLocation)distanceFomLocation:(CLLocation)`和 Haversine 公式计算两个经纬度坐标之间的距离。但它没有给出正确的结果。
我正在使用核心定位框架来找出实际相距 1 米的两个位置的纬度，但上面的公式给出的距离有时是 40m，有时是 30m，依此类推。我已经设置了所需的精度是十米。我正在使用 iPhone 4s 设备。

只想知道`-(CLLocation)distanceFomLocation:(CLLocation)`计算距离的方法的准确性是多少？我必须计算 10 m 范围内的距离。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T13:46:41.420

公式是正确的，对于 1m 距离，精度低于 1/1000 毫米。问题是您从 GPS 设备获得的纬度/经度位置，这可能会偏离 40m。

对于 10m 距离，用于半正弦或`distanceFromLocation`完全准确的公式。当距离相距几公里时，它开始变得有趣。

所以不用担心。但你的主要问题是获得如此准确的职位，这取决于你需要它的目的。

您是否需要一个 GPS 设备（有效）或不同 GPS 设备之间坐标的距离测量（对于同一位置的两个设备，距离可能为 30m，但在开阔天空视野良好时，GPS 精度通常为 3-6m。

进一步确保您使用desiredAccuracy BestForNavigation 或Best。

# c# - 通过字符串连接 SQL Server 时出错，无法识别用户名或密码

> ID：14854968
> 
> 赞同：1
> 
> 时间：2013-02-13T13:43:50.703
> 
> 标签：c#, asp.net, sql-server, dataadapter

我遇到的问题是从 ASP.NET 应用程序连接到我的 sql server (2005) 上的帐户。

我尝试使用默认的 sa 登录名，并且我已经创建的用户也将 sql 管理工作室的设置设置为混合属性，我在 webconfig 中也有字符串连接，但也不起作用。

c# 代码

```
 //string conStr = ConfigurationManager.ConnectionStrings["SQLConnectionString"].ConnectionString;
    string conStr = @"server=JAMES-PC\SQLEXPRESS; database=projectDB; uid=james; password=password;";
    string query = "SELECT [TaskID], [Task], [Start Date] AS Start_Date, [End Date] AS End_Date, [Priority], [Time Allowance] AS Time_Allowance, [Details], [Catagory] FROM [schedulerData0]";
    SqlDataAdapter dataAdapt = new SqlDataAdapter(query, conStr);
    DataTable table = new DataTable();
    dataAdapt.Fill(table);
    GridView1.DataSource = table;
    GridView1.DataBind(); 
```

我收到的错误信息是：

用户“james”登录失败。用户未与受信任的 SQL Server 连接关联。

任何帮助感谢詹姆斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T13:47:57.500

您为连接配置的 SQL SERVER`Windows Only`和您当前的 Windows 用户未关联为受信任。尝试将您的 SQL SEREVR 配置为接受`Mixed Mode`连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T15:40:39.240

尝试将 projectDB 映射到用户：james。打开 SQL Server Management Studio，选择**Security - Logins**，双击 user: **james**，选择页面：**User Mapping**，检查 projectDB。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T13:57:18.380

试试这个，我不确定，但希望它会奏效-

```
<connectionStrings>
<add name ="conStr" connectionString ="Initial Catalog = projectDB; 
Data Source =JAMES-PC\SQLEXPRESS; User Id=james;Password=password;"/>
</connectionStrings> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-13T13:47:42.247

请尝试以下格式如果是 Sql Server 用户模式，

```
ConStr = "Server=JAMES-PC\SQLEXPRESS;Database=projectDB;User Id=james;
Password=password;" 
```

如果您尝试使用 Windows 进行连接，

那么你必须提供`Trusted Connection = true`

# android - 未授予 Android 应用程序执行“su”命令的 Root 权限

> ID：14854969
> 
> 赞同：1
> 
> 时间：2013-02-13T13:43:50.797
> 
> 标签：android, shell, su, root, roottools

我想从应用程序执行“su”命令..我已经植根了模拟器并安装了 Superuser.apk(superuser 2.3.6.1)

```
Process pr= Runtime.getRuntime().exec("su");
process.waitFor();
Log.d("Ex.Value",Integer.toString(process.exitValue())); 
```

但是我得到 255 作为退出值，这似乎是执行“su”时的一些错误。我已经包含了 RootTools 库（[http://code.google.com/p/roottools/](http://code.google.com/p/roottools/)）。当检查方法**RootTools.isRootAvailable(), RootTools.isAccessGiven()** ...它发现模拟器有 SU，但我的应用程序没有被授予 Root 权限。会是真正的问题吗？？..如果是这样你能告诉我如何授予我的应用程序的Root权限吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T14:27:30.590

当您执行“su”时，您应该在该进程中具有 root 访问权限。然后，应用程序应通过对话框自动向用户请求 root 权限。此对话框由 android 提供，但仅存在于已 root 的设备中。

这篇博文有一个可能对您有所帮助的示例：

[http://www.stealthcopter.com/blog/2010/01/android-requesting-root-access-in-your-app/](http://www.stealthcopter.com/blog/2010/01/android-requesting-root-access-in-your-app/)

最后的评论也很丰富。

# java - 尝试扩展 HttpURLConnection 类时出错

> ID：14854979
> 
> 赞同：2
> 
> 时间：2013-02-13T13:44:26.637
> 
> 标签：java, android, httpurlconnection

我正在尝试创建 HttpURLConnection 类的自定义版本。

现在的课程看起来像这样：

```
package com.removed;

import java.net.HttpURLConnection;
import java.net.URL;

public abstract class MyHUC extends HttpURLConnection {

    public MyHUC(URL url) {
        super(url);
        // TODO Auto-generated constructor stub
    }

} 
```

但是当我打电话时：

```
MyHUC connection = (MyHUC) url.openConnection(); 
```

我收到以下错误：

```
02-13 14:42:23.639: E/AndroidRuntime(4735): FATAL EXCEPTION: Thread-760
02-13 14:42:23.639: E/AndroidRuntime(4735): java.lang.ClassCastException: libcore.net.http.HttpURLConnectionImpl cannot be cast to com.removed.MyHUC
02-13 14:42:23.639: E/AndroidRuntime(4735):     at com.removed.TVSlideActivity.DownloadFile(TVSlideActivity.java:603)
02-13 14:42:23.639: E/AndroidRuntime(4735):     at com.removed.TVSlideActivity.access$9(TVSlideActivity.java:588)
02-13 14:42:23.639: E/AndroidRuntime(4735):     at com.removed.TVSlideActivity$5.run(TVSlideActivity.java:337)
02-13 14:42:23.639: E/AndroidRuntime(4735):     at java.lang.Thread.run(Thread.java:856) 
```

这让我发疯了，我已经在网上寻找了几个小时的解决方案，这里的任何专家可以启发我吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T13:59:50.287

在您当前的设置中，`URL`该类对您的自定义 URL 连接类一无所知。您正在进行的调用返回一个`URLConnection`类型（它恰好是 a `HttpURLConnection`，但这是一个实现细节）。您不能将生成的连接强制转换为`MyHUC`类型，因为它*不是 one*。记住这一点对未来很重要。

碰巧的是，有***一种***方法可以为该类指定一个自定义 URL 连接`URL`类。您必须使用备用构造函数来创建 URL，提供`URLStreamHandler`. 示例代码如下所示：

```
public class MyURLConnection extends HttpURLConnection {

    public MyURLConnection(URL arg0) {
        super(arg0);
    }

    @Override
    public void disconnect() {
    }

    @Override
    public boolean usingProxy() {
        return false;
    }

    @Override
    public void connect() throws IOException {
    }
}

public class MyURLStreamHandler extends URLStreamHandler {

    public MyURLStreamHandler() {
        super();
    }

    @Override
    protected URLConnection openConnection(URL arg0) throws IOException {
        return new MyURLConnection(arg0);
    }
} 
```

并使用了这样的：

```
final URL url = new URL("http", "www.google.com", -1, "",
        new MyURLStreamHandler());
final MyURLConnection conn = (MyURLConnection) url.openConnection(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T13:58:26.053

[http://docs.oracle.com/javase/tutorial/java/IandI/subclasses.html](http://docs.oracle.com/javase/tutorial/java/IandI/subclasses.html)

`url.openConnection()`不返回`MyHUC`对象类型，因此您不能安全地将其强制转换为该类。请阅读上面的文章以了解继承是如何工作的。

# android - 避免在 Gridview (Android) 中加载图像的时间

> ID：14854987
> 
> 赞同：-1
> 
> 时间：2013-02-13T13:44:39.960
> 
> 标签：android, android-asynctask, android-gridview

在我的应用程序中，我从移动数据库导入图像并将其显示到我的应用程序的 gridview 中。我在我的活动的 onCreate() 中编写了以下代码。

```
 String[] projection = { MediaStore.Images.Media._ID,};

    Cursor mImageCursor = getContentResolver().query(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, projection, null, null, null ); 

    if (mImageCursor != null)
    {

        mImageCursor.moveToFirst();

        for (int i = 0; i < mImageCursor.getCount(); i++)
        {
            Images im=new Images();
            eachImageView=new ImageView(this);
            int imageId = mImageCursor.getInt((mImageCursor.getColumnIndex( MediaStore.Images.Media._ID)));
            selectedImageUri = Uri.withAppendedPath(
                    MediaStore.Images.Media.EXTERNAL_CONTENT_URI, "" + imageId);

            ContentResolver cr = getContentResolver();

            Bitmap bm = getScaledImage(selectedImageUri, 2, cr);
            im.setBitmap(bm);
            eachImageView.setImageBitmap(bm);
            im.setImageView(eachImageView);

            arrayOfImages.add(im);

            mImageCursor.moveToNext();
        }
    } 
```

但问题是当图像数量更多时需要太多时间。我听说过异步任务可以减少这个时间，但我很困惑如何在我的代码中实现它。请给我解决方案。提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T14:29:00.620

如果您想在不冻结 UI 线程的情况下执行操作，则使用 AsyncTask。在您的情况下，您可以使用一个。但是，您似乎在开始活动时正在加载图像，因此您可以使用加载器。

文档和 DemoApi 中提供了非常好的示例。

[AsyncTask](http://developer.android.com/guide/components/processes-and-threads.html#AsyncTask)和[加载器](http://developer.android.com/guide/components/loaders.html)

# php - 更改格式日期

> ID：14854988
> 
> 赞同：-1
> 
> 时间：2013-02-13T13:44:42.310
> 
> 标签：php, date

我有格式为“mYd”的日期。如何修改此日期以格式化“Ydm”？为此，最好的功能应该是我可以添加旧格式和新格式的功能，但我该怎么做呢？

例如我有

```
$date = '01-2013-13'; // "m-Y-d" 
```

我想收到：

```
$newDate = '2013-13-01'; // "Y-d-m" 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-13T13:47:41.827

见[`DateTime::createFromFormat()`](http://www.php.net/manual/en/datetime.createfromformat.php)和[`DateTime::format()`](http://www.php.net/manual/en/datetime.format.php)

```
$date = DateTime::createFromFormat('m-Y-d', '01-2013-13');
echo $date->format('Y-m-d'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T13:46:49.313

PHP 无法使用`strtotime()`. 你必须做这样的事情：

```
function reformat($old_date)
{
    $parts = explode('-', $old_date);
    return $parts[1].'-'.$parts[2].'-'.$parts[0];
} 
```

然后使用以下命令调用它：

```
$new_format = reformat($date); 
```

或者，您可以使用[`DateTime::createFromFormat()`](http://www.php.net/manual/en/datetime.createfromformat.php)：

```
function reformat($old_date)
{
    $new_date = DateTime::createFromFormat('m-Y-d', $old_date);
    return $new_date->format('Y-m-d');
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T13:47:42.230

您可以使用`DateTime`该类，例如：

```
$date = new DateTime('01-2013-13'); 
```

然后使用该`format()`方法，例如：

```
$date->format('Y-m-d'); 
```

更多信息： [http ://www.php.net/manual/en/datetime.format.php](http://www.php.net/manual/en/datetime.format.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T13:53:46.123

要创建您需要使用：

```
$newDate = date('Y-d-m'); 
```

[您可以在这里](http://php.net/manual/en/function.date.php)找到更多信息！

# odbc - 当应用程序作为服务运行时，建立与 DB2 的连接需要一些时间

> ID：14854989
> 
> 赞同：0
> 
> 时间：2013-02-13T13:44:49.097
> 
> 标签：odbc, db2, jetty

当我在控制台中运行应用程序时，通过手动启动码头“java -jar start.jar”，从码头顶部的 Scala 应用程序连接到 DB2 工作正常（1-2 秒）。但是，当我将 Jetty 作为服务启动时，建立连接需要 30-60 秒。

这是我花了几天时间试图解决的问题。

首先，我认为这与使用的 iSeries Access ODBC 驱动程序有关。我有另一个用 Javascript 编写的应用程序，在 Node.js 之上运行，它似乎可以与这种连接一起工作。我也玩过这个驱动程序提供的大多数选项，但它们似乎没有帮助。然后我认为问题出在 JDBC 上，我尝试使用 com.ibm.db2.jcc.DB2Jcc，但这似乎并没有解决问题。

我放置了一个记录器来检查连接发生了什么，但这并没有带来任何额外的帮助。两个连接看起来很相似，除了作为服务运行时，建立连接需要至少十倍的时间。

我认为问题可能是如果 DB2-driver 尝试对正在使用的 Activer 目录进行身份验证，所以我创建了一个本地用户“foobar”。我将 iSeries 设置为默认使用此用户 ID。这也没有帮助。我还尝试使用我的用户名运行该服务，但没有帮助。

我目前没有想法。是否有可能在控制台上手动启动 Jetty 加载不同的设置而不是将其作为服务启动（网络启动应用程序）。

任何帮助将非常感激！

堆：

*   外部服务器上的 DB2。无权配置。
*   iSeries Access ODBC 驱动程序，版本 9.00.00.00
*   Scala 应用程序，Scalatra 框架
*   码头 8.1.3 容器
*   NSSM 将 Jetty 包装为服务。使用 java.exe（复制到 app-directory），选项是“-jar start.jar”。
*   视窗 2003 服务器

使用 DriverManager 简单地设置连接：

```
private def foobarDbConnection: Connection = {
  Class.forName(Settings.foobarDbDriver)
  DriverManager.getConnection(Settings.foobarDatabase, 
                              Settings.foobarUsername, 
                              Settings.foobarPassword)
} 
```

设置：

```
def foobarDbDriver = "com.ibm.db2.jcc.DB2Jcc"
def foobarDatabase = "jdbc:odbc:FOOBAR"
def foobarUsername = "foo"
def foobarPassword = "bar" 
```

这是来自连接的日志：

```
13.2.2013 13:45:54 com.foo.lib.DbConnectionFactory$JDBCLogWriter write
INFO: DriverManager.getConnection("jdbc:odbc:FOOBAR")

13.2.2013 13:45:54 com.foo.lib.DbConnectionFactory$JDBCLogWriter write
INFO:     trying driver[className=com.ibm.db2.jcc.DB2Driver,com.ibm.db2.jcc.DB2Driver@f6e15e]

13.2.2013 13:45:54 com.foo.lib.DbConnectionFactory$JDBCLogWriter write
INFO:     trying driver[className=sun.jdbc.odbc.JdbcOdbcDriver,sun.jdbc.odbc.JdbcOdbcDriver@e8fdc9]

13.2.2013 13:45:54 com.foo.lib.DbConnectionFactory$JDBCLogWriter write
INFO: *Driver.connect (jdbc:odbc:FOOBAR)

13.2.2013 13:45:54 com.foo.lib.DbConnectionFactory$JDBCLogWriter write
INFO: JDBC to ODBC Bridge: Checking security

13.2.2013 13:45:54 com.foo.lib.DbConnectionFactory$JDBCLogWriter write
INFO: No SecurityManager present, assuming trusted application/applet

13.2.2013 13:45:54 com.foo.lib.DbConnectionFactory$JDBCLogWriter write
INFO: Allocating Environment handle (SQLAllocEnv)

13.2.2013 13:45:54 com.foo.lib.DbConnectionFactory$JDBCLogWriter write
INFO: hEnv=92738208

13.2.2013 13:45:54 com.foo.lib.DbConnectionFactory$JDBCLogWriter write
INFO: Allocating Connection handle (SQLAllocConnect)

13.2.2013 13:45:54 com.foo.lib.DbConnectionFactory$JDBCLogWriter write
INFO: hDbc=92739360

13.2.2013 13:45:54 com.foo.lib.DbConnectionFactory$JDBCLogWriter write
INFO: Connecting (SQLDriverConnect), hDbc=92739360, szConnStrIn=DSN=FOOBAR;UID=foo;PWD=bar 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T09:29:41.313

经过几天的跟踪和使用 Wireshark，我设法通过将本地用户添加到 Windows 服务器来解决这个问题。在这种情况下，本地用户的名称无关紧要（不必与 DB2 连接中使用的用户名相同）。如果本地用户属于管理员组，那么问题仍然存在，所以我创建了没有这个组的本地用户。听起来只有域上的用户或管理员组上的用户会被活动目录检查。

# android - 自定义列表视图错误：java.lang.unsupportedoperationexception：addview

> ID：14854990
> 
> 赞同：3
> 
> 时间：2013-02-13T13:44:57.167
> 
> 标签：android, android-listview, android-view, android-adapter, android-adapterview

我对android真的很陌生，我知道你不应该粘贴整个代码，但老实说我不知道​​问题出在哪里。

我试图创建一个带有文本和图像的自定义列表视图，但不断收到此异常并且不知道如何解决它

> 02-13 13:23:06.477: E/AndroidRuntime(1834): java.lang.UnsupportedOperationException: addView(View, LayoutParams) 在 AdapterView 中不受支持

所以希望这里有人可以帮助我。这就是我的启动器活动的样子

```
public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        ListView list=(ListView) this.findViewById(R.id.list_view);

        int[] stringIds=new int[2];
        stringIds[0]=R.string.text1;
        stringIds[1]=R.string.text2;

        int[] imgIds=new int[2];
        imgIds[0]=R.drawable.ic_launcher;
        imgIds[1]=R.drawable.ic_launcher;

        CustomAdapter custom=new CustomAdapter(this, stringIds, imgIds);
        list.setAdapter(custom);
        setContentView(R.layout.activity_main);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

我的自定义适配器：

```
public class CustomAdapter extends BaseAdapter {

    Context context;
    int[] stringIds;
    int[] imgIds;
    public CustomAdapter(Context context, int[]stringIds, int[] imgIds) {

        this.stringIds=stringIds;
        this.imgIds=imgIds;
        this.context=context;
        // TODO Auto-generated constructor stub
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent){
        View finalView=convertView;
        if(finalView==null){
             LayoutInflater inflater=((Activity)context).getLayoutInflater();
             finalView= inflater.inflate(R.layout.list_view_row, parent);
        } 

        TextView txt=(TextView)finalView.findViewById(R.id.list_view_row_text_view);
        ImageView img=(ImageView)finalView.findViewById(R.id.imageView1);

        img.setImageResource(imgIds[position]);

        return finalView;

    }

    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return this.stringIds.length;
    }

    @Override
    public Object getItem(int arg0) {
        // TODO Auto-generated method stub
        return arg0;
    }

    @Override
    public long getItemId(int arg0) {
        // TODO Auto-generated method stub
        return arg0;

    }
} 
```

activity_main.xml 布局

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <ListView
        android:id="@+id/list_view"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"

        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true" >
    </ListView>

</RelativeLayout> 
```

list_view_row.xml 布局

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

   <TextView 
       android:id="@+id/list_view_row_text_view"
        android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" />

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/ic_launcher" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T13:50:03.617

**这里：**

```
finalView= inflater.inflate(R.layout.list_view_row, parent); 
```

**删除父级**

```
finalView= inflater.inflate(R.layout.list_view_row, null); 
```

或者

```
finalView= inflater.inflate(R.layout.list_view_row, parent, false); 
```

也使用

```
setContentView(R.layout.activity_main); 
```

在得到之前

> 列表显示

# winapi - dev cpp win32 程序无法启动，因为缺少 sqlite3.dll

> ID：14854994
> 
> 赞同：0
> 
> 时间：2013-02-13T13:45:18.883
> 
> 标签：winapi, sqlite, static-libraries, dev-c++

1.  我正在使用使用 ming gcc 的 dev c++ IDE（我不确定）
2.  我想在我的 win32 c 应用程序中使用 sqlite3
3.  我下载了 sqlite3.dll 和 sqlite3.dev 并使用 dlltool 创建了一个类似 libsqlite3.a 的 .a 文件并粘贴到 dev cpp 的 lib 文件夹中，并在项目选项 -> 参数中添加了这个路径
4.  我将头文件 sqlite3.h 复制到包含文件夹中（我从另一个网站获得 - [http://www.opensource.apple.com/source/SQLite/SQLite-74/derived_source/sqlite3.h](http://www.opensource.apple.com/source/SQLite/SQLite-74/derived_source/sqlite3.h)）
5.  我执行了程序并收到消息“程序无法启动，因为您的计算机中缺少 sqlite3.dll”
6.  所以我将 sqlite3.dll 复制到我的工作目录中，然后它就可以工作了

但

如何在编译时使 sqlite.* 静态？

我的意思是我认为通过包含 libsqlite3.a，最终的 exe 将不依赖于任何外部 dll。

因此，我想知道如何以不需要 dll 的方式进行编译，并通过这样做使我的 windows 程序独立。

我有创建一个 .lib 文件而不是 .a 文件吗？

**回答和评论后编辑**：此外，devpak工作正常......但我想知道如何将文件包含到项目或创建.a文件所以我正在尝试这种方式，因为如果某些组件不提供devpak那么这将是我们需要编译的方式..不是吗？

**编辑以显示我在 CL 的回答和两条评论之后所做的事情**

**这就是我将 sqlite.c 添加到项目列表的方式**

![在此处输入图像描述](../Images/f742b792c1c7184bd328cac3496ba033.png)

**这是编译日志**

> 编译器：默认编译器
> 
> 构建 Makefile：“C:\Users\jayapalc\Documents\test-sqlite\Makefile.win”
> 
> 执行制作...
> 
> make.exe -f "C:\Users\jayapalc\Documents\test-sqlite\Makefile.win" 全部
> 
> g++.exe -c sqlite3.c -o sqlite3.o -I"lib/gcc/mingw32/3.4.2/include" -I"include/c++/3.4.2/backward" -I"include/c++/3.4\. 2/mingw32" -I"include/c++/3.4.2" -I"include"
> 
> sqlite3.c：在函数“void strftimeFunc（sqlite3_context*，int，sqlite3_value**）”中：
> 
> sqlite3.c:14727：错误：从`void*' to`char*'进行的无效转换

**我在 sqlite.org/sqlite-amalgamation-3071502.zip 中得到的文件是**

shell.c、sqlite3.h、sqlite3.c、sqlite3ext.h，我在其他讨论中看到不需要 shell.c...

**此外**，人们在谈论 gcc 和 g++...。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T15:13:03.967

只需在项目中包含[sqlite3.c](http://www.sqlite.org/download.html)文件即可。

您只需要这个文件，并且它必须编译为 C，而不是 C++。

显然，Dev-C++ 不允许在一个项目中混合 C 和 C++ 源文件。相反，您可以尝试编译`sqlite3.c`为 C，然后将生成的 .o 文件包含到 C++ 项目中（在链接器页面上）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T11:36:36.457

除了更新 Dev-C++ 本身，尝试将 sqlite.c 编译为 C 文件：

*   转到项目>>项目选项>>文件。
*   找到我们正在谈论的C文件。取消勾选“将文件编译为 C++”。

这应该通知 Dev-C++ 它应该调用 gcc.exe，而不是 g++.exe。

如果您不想通过将 sqlite 添加到项目中来自己编译它，可以尝试将 -static 标志传递给 GCC/G++ 以强制它静态链接 libsqlite.a。

# visual-studio-2010 - 安装项目安装程序仅在调试时添加注册表项

> ID：14854996
> 
> 赞同：0
> 
> 时间：2013-02-13T13:45:22.043
> 
> 标签：visual-studio-2010, debugging, installation, conditional-statements, setup-project

我正在为我的应用程序创建安装程序（Visual Studio 2010 中的安装项目）。我希望它添加一些注册表项，但前提是它处于调试模式。我能做到这一点吗？如果您添加注册表项，则会有一个属性`Condition`，但这些都不起作用：

```
 %DEBUG=1
    DEBUG=1 
```

请帮忙，非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T10:15:31.503

没有属性可以告诉您 MSI 是由 Debug 或 Release 构建构建的。据我所知，您也不能仅在 VS 编辑器的一个构建中添加注册表值。

一个解决方案是在 VS 中创建一个构建后事件，该事件在调试时从 MSI 构建[插入](http://msdn.microsoft.com/en-us/library/aa368568%28VS.85%29.aspx)[注册表表](http://msdn.microsoft.com/en-us/library/windows/desktop/aa371168%28v=vs.85%29.aspx)中的行。

要查看要在表中插入哪些行，只需使用其中的值构建 MSI，使用 Orca 打开它并查看它在包中添加的内容。它应该在 Registry、Component 和 FeatureComponent 表中添加条目。但是，您可以简单地通过将新值分配给包中的现有组件来创建仅在注册表中创建条目的脚本。