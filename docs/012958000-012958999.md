# StackOverflow 问答 12958000-12958999

# django - Django，让装饰器值在视图函数中可用

> ID：12958000
> 
> 赞同：0
> 
> 时间：2012-10-18T15:17:56.360
> 
> 标签：django, django-views, decorator

我有一个装饰器：

```
def site_login_required(function=None):
    def _dec(view_func):
        def _view(request, *args, **kwargs):
            gets site_id. checks stuff. if else. 
```

这以正常方式调用：

```
@site_login_required
def frontPage(request, url_arg): 
```

装饰器找到一个site_id。在 frontPage 函数中提供此功能会很好。那可能吗？如果有怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T16:16:32.987

当您在装饰器中调用视图函数时，您可以将其作为 kwarg 传递：

```
def site_login_required(function=None):
    def _dec(view_func):
        def _view(request, *args, **kwargs):
            site_id = get_site_id()
            url_arg = get_a_url()
            view_func(request, url_arg, site_id=site_id)

@site_login_required
def frontPage(request, url_arg, site_id=None, *args, **kwargs):
    ... 
```

`*args`附带说明一下，接受并在所有视图函数中很有用`**kwargs`，因此它们会消耗额外的参数，而不是像包裹在它们周围的装饰器那样窒息。

# sql-server-2008-r2 - 为什么从 bat 多次调用 sqlcmd 会失败？

> ID：12958003
> 
> 赞同：1
> 
> 时间：2012-10-18T15:18:04.330
> 
> 标签：sql-server-2008-r2, sql-server-express

我正在使用执行以下操作的 bat 文件将一些数据导入 SQL Server 2008 R2：

```
sqlcmd -E -S fooserver -d fooDB -e -i foo.sql -o foo.output
sqlcmd -E -S fooserver -d fooDB -e -i bar.sql -o bar.output
sqlcmd -E -S fooserver -d fooDB -e -i baz.sql -o baz.output
sqlcmd -E -S fooserver -d fooDB -e -i qux.sql -o qux.output 
```

当我指向开发人员版本实例时，一切正常。然而，如果我指向一个 SQL Express 实例，前几个命令运行正常，而下一个命令失败并出现身份验证错误：

```
Login failed for user 'MYDOMAIN\FOOUSER'. Reason: Failed to open the explicitly specified database. [CLIENT: <local machine>] 
```

但是，如果我一次运行一个上述命令，那么它们都运行没有错误。

另外值得注意的是，目标数据库短暂进入恢复模式（在 SQL Server 管理控制台中，在数据库旁边可以看到“恢复中”），因此登录失败似乎是因为目标数据库暂时处于恢复模式。我将重申此问题不会发生在开发人员版本实例上。

针对 SQL Express 2008 R2 RTM 和 SP2 观察到的相同问题（尚未测试 SP1）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T16:04:27.367

对于遇到此问题并寻找解决方案的任何人 - 它原来是由数据库上的数据库“自动关闭”选项引起的（MyDatabase->Properties->SQL Server 管理控制台中的选项）。在 Developer edition 实例上，默认值似乎为“false”，而 SQL Express 实例默认为“true”。

对我来说失败的 sqlcmd 跟随一个插入大量数据的 sqlcmd，并且这可能导致自动关闭逻辑的足够工作使其与下一个 sqlcmd 重叠。

# panel - 如何清除透明面板？

> ID：12958007
> 
> 赞同：1
> 
> 时间：2012-10-18T15:18:22.427
> 
> 标签：panel, transparent, ws-ex-transparent

我做了一个这样的透明面板（在 C# 中）：

```
public class TransparentPanel : Panel
{
    public TransparentPanel()
    {
    }

    protected override CreateParams CreateParams
    {
        get
        {
            CreateParams createParams = base.CreateParams;
            createParams.ExStyle |= 0x00000020; // WS_EX_TRANSPARENT
            return createParams;
        }
    }

    protected override void OnPaintBackground(PaintEventArgs e)
    {
        // Do not paint background.
    }
} 
```

它显示在普通面板上。我想画一个圆圈来在另一个面板中显示一些东西，所以我在透明的 OnPaint 方法上画了我的圆圈。然后，我想展示其他东西，所以我需要这个圈子“移动”到其他地方。

但我不能。

尽管我确实在 OnPaint 方法中绘制了这个圆圈，但我在这里找不到的任何解决方案都对我有用。我不使用事件的 Graphics 对象，因为如果我这样做了，什么都不会显示。

所以，我必须使用这个：

```
this.CreateGraphics() 
```

我无法使用背景颜色在其上绘制另一个圆圈：我的背景需要保持透明。并且用 Color.Transparent 画一个圆圈不起作用。

清除透明面板会导致黑色背景替换透明面板。

该指令

```
Graphics.Clear(); 
```

不编译。

这个也没有：

```
gr.Clear(); 
```

因为它需要一个 Color 参数。

和这个：

```
gr.Clear(Color.transparent); 
```

创建黑色背景。

在我看来，我已经尝试了我能想到的一切。

任何想法 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T19:09:31.237

我在 Java 中遇到了类似的问题，可以通过重新绘制父面板来解决它。这也清除了透明子面板。

# android - Android 在不断开 3G 的情况下检查 Wifi 连接

> ID：12958012
> 
> 赞同：1
> 
> 时间：2012-10-18T15:18:46.577
> 
> 标签：android, mobile, wifi, connectivity

如果/当我发现任何东西时，目前正在调查这个领域将更新这篇文章。对此，任何额外的脑力都将不胜感激。

类似但不重复的线程 - [Android：检查 3G 或 Wifi 网络是否打开或在 android 设备上可用或不可用](https://stackoverflow.com/questions/11343249/android-check-3g-or-wifi-network-is-on-or-available-or-not-on-android-device)

用例。

用户在使用 3G 的道路上行走。当后台服务看到网络可用时：

*   检查我们现在看到的 Wifi 网络是否可以关联。
*   检查 Wifi 是否提供活动连接（进行测试 ping 并寻找预期结果）
*   Wifi 网络是否需要 Wispr 登录。
*   如果它确实执行了我们的 Wispr 身份验证逻辑。

*   然后，只有在我们获得活动连接后，才能将用户关闭 3G 并进入该 WiFi 网络。

基本上，我可以在允许用户继续使用 3G 的同时，专门使用 WIFI 设备端口发送呼叫吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T15:54:52.497

看起来可能有一种方法 -[通过入侵 ConnectivityService.java 让 WiFi 和 3G 连接一起工作](http://mobisocial.stanford.edu/news/2011/03/let-wifi-and-3g-connection-work-together-by-hacking-connectivityservice-java/)- 但看起来很讨厌。

您能否同时启用两者 - 检查 wifi 连接，然后根据结果断开 3g / 或 wifi？

# javascript - 有效地确定一个点在二维空间中的哪个矩形

> ID：12958018
> 
> 赞同：4
> 
> 时间：2012-10-18T15:18:57.483
> 
> 标签：javascript, algorithm, data-structures, html5-canvas, kdtree

我有一大组在 html5 画布上绘制的矩形。

![在此处输入图像描述](../Images/5396e4bf32fdc87a50b80094708f4a8c.png)

我希望能够使用鼠标跟踪与此图像进行交互（我不能使用 SVG，因为它不能缩放到 10-100k 矩形）。是否有任何数据结构/算法，假设鼠标 x,y 坐标能够告诉您鼠标在哪个框上（使用矩形的计算位置）？我在想像 kd 树之类的东西，但不确定。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T15:39:13.827

如果您的数据始终采用所示形式，我认为您应该能够比空间树数据结构做得更好。

由于数据是结构化的，`y`您应该能够根据时间偏移量计算点所在的矩形“条带” `O(1)`。

如果您按排序顺序（使用say）将各个矩形存储在每个“条带”中，`xmax`那么您应该能够使用二分搜索（in `O(log(n))`）在条带中找到特定的矩形。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T15:40:41.413

天真的解决方案是遍历所有矩形并检查您是否在其中。检查单个矩形很容易（如果你愿意，我会明确地写下来）。

如果您有许多矩形并且关心性能，您可以通过将矩形放入一个更快查看的数据结构中来轻松加快速度。查看您发送的图像，您的数据的一个明显属性是有限垂直位置的数量（“行”）。这意味着如果您检查您所在的行，则只需检查该行内的矩形。最后，要选择您所在的行或行内选择哪个矩形，请保持已排序的数据结构（例如某些搜索树）。

因此，您的数据结构可能类似于行的搜索树，其中每个节点都包含沿行的矩形搜索树。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T15:50:21.350

[R-tree](http://en.wikipedia.org/wiki/R-tree)适用于提供这种空间访问

但有些问题：

你的矩形设置是静态的还是动态的？

您期望矩形集有多少点查询？

**编辑：**

因为矩形集是静态的：有方法，用于传统的位图图形（不知道是否适用于html5画布）：

制作与主图片大小相同的附加位图。用相同的坐标绘制每个矩形，但用唯一的颜色填充它（例如，颜色 = 矩形索引）。然后检查鼠标点下的颜色 => 在 O(1) 中获取矩形索引

# iphone - 如何在iphone中移动触摸重新绘制已擦除的图像

> ID：12958023
> 
> 赞同：2
> 
> 时间：2012-10-18T15:19:04.270
> 
> 标签：iphone, ios, uiimage

我正在使用混合模式目的地通过触摸擦除图像。我成功地做到了这一点。

实际上，我正在通过触摸降低 alpha，因此我也可以设置强度。
现在我的问题是关于用触摸重新绘制图像的擦除部分（即我想用强度绘制图像或者想将 alpha 设置为更暗）。为此，我有原始图像的备份，然后我裁剪了触摸部分并将其与图像合并。但问题是它画的比它应该画的多。

请注意，重绘过程只是在绘制重叠时使图像比原始图像更暗（需要设置上限）。那么如何避免在我已经绘制图像的点处重新绘制以避免原始图像变暗。

我还附上了代码。

```
// Code to erase an image  

        UIGraphicsBeginImageContext(self._overlayImage.image.size);
        CGRect rect =CGRectMake(0, 0, self._overlayImage.image.size.width, self._overlayImage.image.size.height) ;
        CGContextRef context = UIGraphicsGetCurrentContext();
        CGImageRef imageRef=self._overlayImage.image.CGImage;

        if (imageRef) {
            // Restore the screen that was previously saved
            CGContextTranslateCTM(context, 0, rect.size.height);
            CGContextScaleCTM(context, 1.0, -1.0);

            CGContextDrawImage(context, rect, imageRef);
            //CGImageRelease(imageRef);

            CGContextTranslateCTM(context, 0, rect.size.height);
            CGContextScaleCTM(context, 1.0, -1.0);
        }

        // Erase the background -- raise the alpha to clear more away with eash swipe
        //  [[UIImage imageNamed:@"eraser222.png"] drawAtPoint:point blendMode:kCGBlendModeDestinationOut alpha:.2];
        [ [UIImage imageNamed:@"eraser222.png"] drawInRect:CGRectMake(newPoint.x-self.imgOrignal.size.width*2*radius/self._overlayImage.bounds.size.width, newPoint.y-self.imgOrignal.size.height*2*radius/self._overlayImage.bounds.size.height, self.imgOrignal.size.width*2*radius/self._overlayImage.bounds.size.width, self.imgOrignal.size.height*2*radius/self._overlayImage.bounds.size.height) blendMode:kCGBlendModeDestinationOut alpha:strength/3];

        self._overlayImage.image=UIGraphicsGetImageFromCurrentImageContext();
        UIGraphicsEndImageContext();

// code to draw an image

 UIImage *cropped = [self imageByCropping:self.imgOrignal toRect:CGRectMake(newPoint.x-self.imgOrignal.size.width*2*radius/self._overlayImage.bounds.size.width, newPoint.y-self.imgOrignal.size.height*2*radius/self._overlayImage.bounds.size.height, self.imgOrignal.size.width*2*radius/self._overlayImage.bounds.size.width, self.imgOrignal.size.height*2*radius/self._overlayImage.bounds.size.height)];
 UIGraphicsBeginImageContext(self._overlayImage.image.size);
        CGRect rect =CGRectMake(0, 0, self._overlayImage.image.size.width, self._overlayImage.image.size.height) ;
        CGContextRef context = UIGraphicsGetCurrentContext();
        CGImageRef imageRef=self._overlayImage.image.CGImage;

        if (imageRef) {
            // Restore the screen that was previously saved
            CGContextTranslateCTM(context, 0, rect.size.height);
            CGContextScaleCTM(context, 1.0, -1.0);

            CGContextDrawImage(context, rect, imageRef);
            //CGImageRelease(imageRef);

            CGContextTranslateCTM(context, 0, rect.size.height);
            CGContextScaleCTM(context, 1.0, -1.0);
        }

        [ cropped drawInRect:CGRectMake(newPoint.x-self.imgOrignal.size.width*2*radius/self._overlayImage.bounds.size.width, newPoint.y-self.imgOrignal.size.height*2*radius/self._overlayImage.bounds.size.height, self.imgOrignal.size.width*2*radius/self._overlayImage.bounds.size.width, self.imgOrignal.size.height*2*radius/self._overlayImage.bounds.size.height) blendMode:kCGBlendModeNormal alpha:strength];

        cropped= [UIImage imageWithData:UIImagePNGRepresentation(cropped)];

        UIImage *finalimage = UIGraphicsGetImageFromCurrentImageContext();
        UIGraphicsEndImageContext();

        self._overlayImage.image=finalimage; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-03-15T11:26:08.787

我知道在这里回答为时已晚，但我已经找到了一种解决方案，我想在这里分享，因为它可以帮助有需要的人。无法删除和重绘相同的图像。所以我处理了两张图片。一个是原始图像，第二个图像是零。第二张图片用于绘制用户触摸屏幕的路径。此后创建一个新的上下文，绘制原始图像，然后使用 kCGBlendModeDestinationOut 混合模式绘制路径图像。它是 kCGBlendModeDestinationOut 这个方法的主角。主要任务是通过使用 kCGBlendModeDestinationOut 混合模式完成的。从而获得所需的效果。[在这里](http://objective-c-code.blogspot.in/2016/03/how-to-erase-image-and-redraw-same.html)查看我的博客。

# c++ - 按时间管理许可证

> ID：12958024
> 
> 赞同：0
> 
> 时间：2012-10-18T15:19:14.113
> 
> 标签：c++, c, licensing, software-distribution, platform-independent

是否有任何框架可以使用 C/C++ 实现许可证管理？

我需要限制我的应用程序的时间使用。例如，通过一个许可证文件，某人可以使用软件 util december/2012。

我可以使用机器时钟，但用户可以更改机器时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T07:49:56.063

我知道这样的软件有三个供应商：

*   宏媒体 (FlexLM)
*   威布
*   安全网 (HASP)

在所有情况下，您都必须静态链接到对守护进程或文件进行验证的库。当然，这三者都有一个复杂的商业模式，可以支持各种各样的商业案例，机器（节点）锁定、用户锁定、浮动等。

# ruby - 无法弄清楚 ruby 方法“目录”及其作用

> ID：12958028
> 
> 赞同：1
> 
> 时间：2012-10-18T15:19:21.787
> 
> 标签：ruby, chef-infra

我对 ruby​​ 很陌生，当我被困在这个片段时试图理解一些代码：

```
directory "test_dir" do
    action :create
    recursive true
end 
```

我尝试使用谷歌搜索`directory`课程，但没有成功。我找到了一个类`Dir`，但它不一样。我直观地看到这个片段应该创建一个新目录并命名它，`test_dir`但我不想假设事情并继续前进。

**编辑** 这是用于启动特定任务的厨师食谱的一部分。为了启动的目的，它需要创建一个目录并下载一些 jars 到它。下面有一个`execute`方法是这样的：

```
execute 'deploy' do
    action :nothing
    # ignore exit status of storm kill command
    command <<-EOH
      set -e
      storm kill #{name} -w 1 || true
      sleep 3
      storm jar #{points to the jar}
    EOH
end 
```

对不起，我必须有点混淆，因为有些东西不是开源的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T15:30:06.640

它是用于目录管理的 Chef 内部 DSL。在此处阅读更多信息：[http ://wiki.opscode.com/display/chef/Resources#Resources-Directory](http://wiki.opscode.com/display/chef/Resources#Resources-Directory)

PS：`recursive true`告诉它创建文件夹很像`mkdir -p`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T15:30:44.503

`directory`不是一个类，它是一个方法。我不知道它是哪个模块的一部分，但该片段大致相当于：

```
Kernel.directory.call("test_dir",lambda {action :create; recursive true}) 
```

该片段使用了一些 gem，它`directory`向 Kernel 对象添加了一个方法。

正如其他人所提到的，它是目录管理 DSL [Chef](http://www.opscode.com/chef/)的一部分。DSL 是集成到 Kernel 对象中的一组方法；由于 Ruby 非常灵活的方法调用语法，方法调用看起来很像语言关键字。这使得特定于任务的命令（领域特定语言：DSL）在 Ruby 中看起来非常好；易于使用且灵活。因此，添加 DSL 的 gem 非常常见。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T15:30:58.537

它是[Chef](http://www.opscode.com/chef/)框架的[Directory](http://wiki.opscode.com/display/chef/Resources#Resources-Directory)资源。（DSL 代表特定领域的语言。Ruby 非常适合它们。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-18T15:32:17.543

您粘贴的片段信息不足以继续（需要上下文；片段来自哪里？）

这`directory`看起来更像是一种方法而不是一个类。首先，它是小写的，并且类是 CamelCased。

如果它是一种方法，它是在应用程序中的某个地方定义的。你有没有尝试过这样的事情：

`grep -r "def directory" ./`或者

`grep -r "directory" ./| grep "def"`

如果不在应用程序本身中，它将在应用程序的依赖项之一中定义（`grep -r "..." $GEM_HOME/gems`而不是）

# javascript - 正则表达式验证器 - 如何包含某些特殊字符

> ID：12958029
> 
> 赞同：0
> 
> 时间：2012-10-18T15:19:22.930
> 
> 标签：javascript, regex

我在我的正则表达式验证器上使用以下正则表达式

```
<asp:RegularExpressionValidator ID="revAddress" runat="server" ControlToValidate="txtAddress" ValidationExpression="^[a-zA-Z0-9 ]+$" ErrorMessage="Alphabets and Numbers only" ForeColor="Red"> </asp:RegularExpressionValidator> 
```

表达式为 - ^[a-zA-Z0-9 ]+$

这允许字母、数字和空格，我试过了。\，它现在不起作用，想知道如何包含这些特殊字符。

点 (.) 逗号 (,) 连字符 (-) 和斜线 (/)

我感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T15:21:18.807

只需在您的课程中添加这些字符（转义连字符和`/`）

```
 ^[a-zA-Z0-9,.\/\-]+$ 
```

示例 jsbin：http: [//jsbin.com/eweren/2/edit](http://jsbin.com/eweren/2/edit)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T15:21:34.723

我想这应该可以解决问题：

```
ValidationExpression="^[a-zA-Z0-9 ./,-]+$" 
```

在提到的符号中，只有`'-'`（连字符）*可以*在正则表达式字符类中具有特殊含义 - 但前提是它不是那里的第一个或最后一个（它用于指定字符范围）。

换句话说，它不应该这样写：

```
ValidationExpression="^[a-zA-Z0-9 .-/,]+$"
                                  ^^^ <- parsed as 'characters between . and /' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T15:46:35.687

您需要`-`列为第一个或最后一个字符`[...]`

```
^[a-zA-Z0-9 .,/-]+$ 
```

或者

```
[-a-zA-Z0-9 .,/]+$ 
```

介于两者之间，它具有*范围含义*，正如您将其用于`a-z`,`A-Z`和`0-9`.

其他选择是`-`通过`\`

```
^[a-zA-Z0-9 .,\-/]+$ 
```

某些环境还`/`需要转义字符。因为逃跑没有伤害，你应该去

```
^[a-zA-Z0-9 .,\-\/]+$ 
```

# jquery - 单击链接时查找壁橱输入的值

> ID：12958031
> 
> 赞同：1
> 
> 时间：2012-10-18T15:19:24.767
> 
> 标签：jquery, html

我有一组文本输入，每个输入的右侧都有一个链接

```
<p><input type="text" name="color[]" value="orange" /> <a href="#" class="show-color">color</a><br />
<input type="text" name="color[]" value="purple" /> <a href="#" class="show-color">color</a><br />
<input type="text" name="color[]" value="blue" /> <a href="#" class="show-color">color</a></p> 
```

我想找出我单击的链接旁边的输入字段的值，使用 jQuery，任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T15:21:00.213

JAVASCRIPT

```
$('.show-color').click(function(){
alert($(this).prev().val());
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T15:21:09.023

您可以使用jquery 的[**prev()**](http://api.jquery.com/prev/)方法在单击锚点时查找上一个元素，

**[现场演示](http://jsfiddle.net/rajaadil/vD5NA/)**

```
$('.show-color').click(function(){
    alert($(this).prev().val());
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-18T15:21:12.957

我相信你想要的`prev`不是`next`链接标签之前的输入。

```
$('.show-color').click(function () {
   alert($(this).prev().val());
}); 
```

# java - 我可以强制所有继承一个类的孩子继承一个特定的方法吗？

> ID：12958032
> 
> 赞同：1
> 
> 时间：2012-10-18T15:19:28.340
> 
> 标签：java, inheritance

所以，我有一个抽象类作为父类，这就是我想要发生的事情。

在抽象类中：

```
public void run(){
    while(!booleanStatement){
        //do specific stuff here
    }
} 
```

在儿童班：

```
public class extends parentClass{
public void run(){
    //do child stuff here effected by the while loop above
} 
```

有没有办法做到这一点？超级（）也许？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-18T15:21:32.337

当然。只需定义一个额外的抽象方法：

```
public final void run(){
  while(!booleanStatement){
    doRun();
  }
}

public abstract void doRun(); 
```

在这种情况下，子类不能覆盖`run()`并*被迫*提供一个实现，`doRun()`该实现在循环内完成工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T15:20:45.390

是的，调用`super.run()`会执行父类的方法。

因此，您可以通过执行以下操作来扩展它：

```
public void run() {
    super.run();
    //do child stuff
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T15:23:30.150

在抽象类中：

```
public void run(){
    while(!booleanStatement){
        doStuff();
    }
}

protected abstract void doStuff(); 
```

在儿童班：

```
public class extends parentClass{
protected void doStuff() {
    // do something
} 
```

这样的事情会做。

# jquery - 导致表单无法提交的远程函数（Unobtrusive Ajax 和 MVC 4 表单验证问题）

> ID：12958033
> 
> 赞同：0
> 
> 时间：2012-10-18T15:19:30.730
> 
> 标签：jquery, asynchronous

我有一个在 MVC 4 框架中使用不显眼的验证来验证的表单。我在我的视图模型中的一个字段上有一个远程注释，它似乎阻止了表单提交。这向我表明有些事情不太正常。然而，我似乎无法弄清楚它是什么？

```
 [Remote("ValidateHosFin", "EditEncounter", AdditionalFields = "HostpitalFinNumber, IsFlagSet", ErrorMessage = "Got Damn this is complex!")]
    [MinLength(6,ErrorMessage="The Hospital Fin must have 6 numerals")]
    public string HostpitalFinNumber { get; set; } 
```

它应该调用这个方法......它永远不会被调用，因为我设置的断点永远不会被命中......

```
 [HttpPost]
    [OutputCache(Location = OutputCacheLocation.None, NoStore = true)]
    public ActionResult ValidateHosFin(string hospitalFin, string encflag) {
        return Json(DataRepository.ValidateHosFin(encflag, hospitalFin), JsonRequestBehavior.AllowGet);
    } 
```

这当然是在`public class EditEncounterController : Controller{ //... }`

我立即想到的一件事是我的输入值不正确......但它们看起来很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-16T19:01:58.223

尝试将 HospitalFinNumber 从 AdditionalFields 参数中取出。这已经是 Remote 属性的主题，所以会自动发送。您导致它被发送两次，这意味着它正在寻找具有三个参数的方法。

另一件事...... MVC4绑定匹配字段名......您正在发送附加字段“IsFlagSet”，但您的方法正在寻找字段“encflag”......这些不会在远程调用中链接.

# android - 将多维字符串数组传递给Android中的新活动

> ID：12958035
> 
> 赞同：3
> 
> 时间：2012-10-18T15:19:37.670
> 
> 标签：android, android-intent, multidimensional-array

我想将二维字符串数组传递给新活动。我看到了很多答案，但我没有得到任何人。我怎样才能做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T15:24:05.563

use

```
Intent mIntent = new Intent(this, Example.class);
Bundle mBundle = new Bundle();
mBundle.putSerializable("list", selected_list);
mIntent.putExtras(mBundle); 
```

To get the passed array use

```
String[][] passedString_list = (String[][]) bundle.getSerializable("list"); 
```

# c - RegLoadKey 从卷影副本中到配置单元文件

> ID：12958039
> 
> 赞同：1
> 
> 时间：2012-10-18T15:19:46.763
> 
> 标签：c, windows, registry, backup, shadow-copy

我正在创建一个卷影副本，我想从该卷影副本安装一个注册表配置单元，`RegLoadKey()`因此我使用普通的注册表函数检查其内容。
这通常工作得很好，除了在某些根本不工作的机器上。

我创建了卷影副本并获得了它的挂载点——就像
`\\?\GLOBALROOT\Device\HarddiskVolumeShadowCopy8`
我然后调用 的那样

```
RegLoadKeyW(HKEY_LOCAL_MACHINE, "\\?\GLOBALROOT\Device\HarddiskVolumeShadowCopy8\Windows\System32\config\SOFTWARE", "mntpoint"); 
```

此调用返回`1009 - The configuration registry database is corrupt.`

如果我使用`CreateFileW()`，我可以使用该路径成功打开此文件，因此它肯定存在。

我已经确保卷影副本是使用注册表编写器创建的，所以我认为这不是问题。
如果我创建卷影副本并在重新启动后尝试这个没有区别。
这只发生在某些机器上。大多数情况下它工作得很好。我不确定它不能运行的机器有什么区别。
本机为windows 2008 64位。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T22:50:16.817

原来问题是要使用`RegLoadKeyW()`加载的蜂巢需要在某个地方可写。由于卷影副本是只读的，因此它失败了。
当我将安装的文件复制到影子副本之外时，它工作正常。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-10-18T21:00:32.820

您是否在创建卷影副本的同一台机器上加载？

RegLoadKeyW [()](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724889%28v=vs.85%29.aspx)评论之一说：

> 有两种注册表配置单元文件格式。在当前操作系统上创建的注册表配置单元通常无法由早期操作系统加载。

# ios - 动画：如何使用图层为视图设置动画？

> ID：12958041
> 
> 赞同：1
> 
> 时间：2012-10-18T15:19:52.957
> 
> 标签：ios, core-animation

[图片显示了我想要实现的目标](http://i.stack.imgur.com/Nrsyl.png)

我想将视图从一个位置动画移动到一个新位置。如果更新视图的图层位置，我认为视图会动画移动到新位置，`implicit animation`我猜是这样，但是没有动画，为什么？

```
- (IBAction)startAnimation:(id)sender {
    CGPoint position = self.imageView.layer.position;
    position.y += 90;
    self.imageView.layer.position = position;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T17:47:38.560

隐式动画仅适用于独立层，而不是支持视图的层。您将需要明确地为该位置设置动画。您可以通过为位置创建 CABasicAnimation 并将其添加到图层来实现，或者使用 UIView 动画来为视图的中心属性设置动画。

## 创建显式动画

```
CABasicAnimation *move = [CABasicAnimation animationWithKeyPath:@"position"];
move.toValue = [NSValue valueWithCGPoint:newPoint];
move.duration = 0.3;
[self.imageView.layer addAnimation:move forKey:@"myMoveAnimation"]; 
```

## 使用 UIView 动画

```
[UIView animateWithDuration:0.3 animations:^{
    self.imageView.center = newCenter;
}]; 
```

# javascript - LESS 中的 Javascript 似乎步履蹒跚：解决方法？

> ID：12958042
> 
> 赞同：2
> 
> 时间：2012-10-18T15:19:55.067
> 
> 标签：javascript, css, node.js, svg, less

我发现 LESS 有一个笨拙的 JavaScript 评估器，至少我使用它的方式是，在将 *.less 文件上传到 Web 服务器之前在客户端上将它们编译成 *.css。

我知道编译可能更经常在服务器端完成，但为了性能和简单性，我们只希望服务器上的 CSS 文件。我在 Fedora Linux 上编译 LESS 文件，并按照[这些说明](http://lists.fedoraproject.org/pipermail/devel/2012-February/163070.html)`lessc`将ruby​​ gem 安装到节点包管理器中。

编译器运行良好，但据我所知，JavaScript 表达式评估非常有限。我相信这也适用于基于[此帖子](https://stackoverflow.com/questions/9254549/is-javascript-evaluation-working-in-less-leaner-css)的服务器端 JavaScript 表达式评估，这表明 JavaScript 引擎如何插入 LESS 环境的不确定性。

我只能使用简单的逗号分隔表达式，如下所示：

```
@bar: `
"ignored-string-expression"
,
5
`;
div.test-thing { content: ~"@{bar}"; } 
```

编译成：

```
div.test-thing {
  content: 5;
} 
```

当我尝试定义一个函数时，编译器会出错（表达式中的分号是否被反斜杠转义）：

```
[719] anjaneya% cat testfunc.less
@bar: `function foo() {return 5}; foo()`;
div.test-thing { content: ~"@{bar}"; }

[720] anjaneya% lessc testfunc.less
SyntaxError: JavaScript evaluation error: `function foo() {return 5}; foo()` ... 
```

似乎也没有任何循环方式，即使您尝试像上面的“忽略字符串表达式”那样尝试欺骗它来评估循环，例如：

```
@foo: `x = 0,
for (var n = 0; n <= 10; n++) { x++; },
x
`;
div.test-thing { content: ~"@{bar}"; } 
```

其中说：

```
ParseError: Syntax Error on line 1 ... 
```

***何必？*** 为了能够编译这个 LESS：

```
@svgSource: '<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%"><linearGradient id="g" x1="0" y1="0" x2="0" y2="1"><stop offset="0" stop-color="@{start}" /><stop offset="1" stop-color="@{end}" /></linearGradient><rect x="0" y="0" width="100%" height="100%" fill="url(#g)" /></svg>'; 
```

进入这个 CSS：

```
background: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiPjxsaW5lYXJHcmFkaWVudCBpZD0iZyIgeDE9IjAiIHkxPSIwIiB4Mj0iMCIgeTI9IjEiPjxzdG9wIG9mZnNldD0iMCIgc3RvcC1jb2xvcj0iIzU3OWRkYiIgLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiMwMDAwMjIiIC8+PC9saW5lYXJHcmFkaWVudD48cmVjdCB4PSIwIiB5PSIwIiB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJ1cmwoI2cpIiAvPjwvc3ZnPg==); 
```

使用这样的[程序](http://www.webtoolkit.info/javascript-base64.html)，无论算法是用 JavaScript、PHP、Perl、UNIX shell 还是其他任何方式实现的。这种处理可以在没有函数定义的情况下完成，但在没有循环的情况下也可以完成，没有函数你甚至不能有递归。

鉴于函数和循环都是复合语句，可能不会被评估为表达式（它不是 LISP），这可能是失败的基础......它实际上并不是一个完整的 JavaScript 解释器。所以我希望真正了解 LESS 编译器的人会：

*   澄清上面的限制，所以我可以便携地使用 JavaScript 和 LESS 来完成这个任务
*   说明如何解决这个问题（例如，使用“shell 转义”或任何可以迭代处理字符串的评估环境）和/或
*   说一下如何用这种文本处理能力来扩展 LESS 编译器，就像一个“真正的”JavaScript 引擎。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-23T12:33:17.917

data-uri() 函数现在内置在 LESS 中：

[http://lesscss.org/functions/#misc-functions-data-uri](http://lesscss.org/functions/#misc-functions-data-uri)

那会有帮助吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-31T21:51:00.483

我认为你正在寻找的是**一堆**关于在 LESS 中使用 javascript 的小令人沮丧的事情的混合物。

1.  所有的 javascript 都必须在一行上。（我......甚至不......无论如何。）
2.  所有的javascript都必须返回一些东西，否则你会得到完全无用的错误“无法读取未定义的属性'值'”
3.  所有 javascript 必须是一个语句。这来自最初的用例，他们认为你会做类似@foo 的事情：~'something.javascript.is.good.at({@bar});'

数字 1 是格式化， 2 只是意味着你需要返回一些东西，即使你不使用它，但是数字 3 让很多人措手不及。要绕过它，只需让你“一件事”成为一个自动执行的匿名函数。

例如：

```
(function(){
    do.some.cool.stuff(); 
    other.cool.things();
    return('Fry');
})(); 
```

因此，LESS 解析器看到了这一点（确保所有内容都在一行中，而不是我编写的方式！），将其捆绑到 javascript 领域作为单次执行，读取返回值，并在一天中调用它。

如果您想看到它的实际效果，我最近编写了 LESS mixin 来制作[RGBA 1x1 像素用于背景填充](http://jsbin.com/EdiYaRO/4/edit?css,output)等，它使用了所有这些疯狂。

希望有帮助！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-12-26T00:36:05.923

我知道这篇文章已经有几年的历史了，但是嵌入在 LESS 中的 javascript 非常方便，所以我想发布一些提示：

```
 //All javascript must 
 // a. be on the rhs of an assignment   e.g.  @x:` var x = @{val}+7`;
 // b. must evaluate to a value
 // c. cannot be terminated by a ';'
 //
 // To get around this, multiline code can be packed into an IIFE......

 @val:7;

 @loop:`(function(val){
   var sum=0;
   for(var i=0; i<val; i++){sum+=i;}
   return sum;
 } )(@{val})`;

 .test{
   content:@loop;  // content: 21;
 }

 // console.log writes directly to the beginning of the output file
 @x:`console.log('/*...... loop = @{loop}.......*/')`;  //   /*...... loop =    21.......*/

 // you can use the global variable.  Here we attach a library module to it.....
 @x:`global.myLib={}`;

 // Then add a method to the module..............
 @btoa:`myLib.btoa=function(str){
   var buffer = new Buffer((str).toString(), 'binary');
   return buffer.toString('base64');
 }`;

 // And invoke the method to encode some text............................
 @sometext:'LESS is more (more or less)';

 .test2{
    content:`myLib.btoa(@{sometext})`;// content: "TEVTUyBpcyBtb3JlIChtb3JlIG9yIGxlc3Mp";
 } 
```

# javascript - 包含文本的动态插入的 div 的宽度

> ID：12958043
> 
> 赞同：1
> 
> 时间：2012-10-18T15:19:57.033
> 
> 标签：javascript, jquery, html, css, dom

我有一个脚本可以在 dom 中动态插入一个包含文本的 div。文本内容事先不知道。

我需要知道这个div的宽度，但是似乎`document.defaultView.getComputedStyle(node, "").getPropertyValue("width")`或者node.offsetWidth的返回值是不可信的。

我使用 setInterval 来记录它，并且值会随着时间而变化。例如，在我的例子中，它从 929px 开始，然后变为 908px。

这个 div 处于绝对位置，它有空格 nowrap，所以我认为它不会被其他 dom 元素“推送”，或者一旦插入它就会以某种方式发生变化。

是否有一种优雅的方式来检索宽度，或者一旦返回值稳定，我是否必须使用丑陋的 setTimeout 来检索它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T15:34:02.070

由于滚动条，视口可以更改其大小。一旦滚动条出现，文档就不能再使用它的宽度。`overflow: scroll`在通过添加或元素`overflow-y:scroll`来测量大小之前强制滚动条存在。`<html>`

默认情况下，块级元素的大小是其容器宽度减去边距和填充（即使它是`position`ed `absolute`ly），这最终是 wiewport 宽度，除非您在沿途某处设置固定宽度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T15:29:42.600

尝试：

```
yourDOMElement.getClientBoundingRect() 
```

这将返回一个具有顶部、左侧、右侧、底部、高度和**宽度**属性的对象。这应该是跨浏览器的。

注意：如果您要使用返回的位置属性（顶部、左侧、右侧、底部、高度），请在必要时考虑滚动偏移。

**更新：**为了确保这适用于没有宽度/高度属性的旧浏览器，计算它从左/上减去右/下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T15:29:14.293

使用 jQuery，您应该能够做到这一点：

```
var width = $("div-selector").width(); 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-10-18T15:26:19.777

这很容易吗？

在浏览器中打开页面并按 f12。使用 Firefox，顶部有一个“检查元素”按钮，而在 chrome 中，它在底部。单击它并将鼠标悬停在它上面。这应该为您提供以 px 为单位的高度和宽度。对我来说从来没有错。

如果它仍然没有显示，请单击它，您可以在控制台的 css 面板中看到它。

# asp.net - 使用服务器上的 TextBox 从 ASP.NET GridView 获取值

> ID：12958046
> 
> 赞同：0
> 
> 时间：2012-10-18T15:20:08.087
> 
> 标签：asp.net, gridview, viewstate

我有一个带有文本框的gridview

我想在按钮单击时获取此文本框的值

但我总是收到“0”（默认）值

我认为这个问题与视图状态有关，但我不确定

请告诉我我做错了什么？

源代码：

```
protected void Page_Load(object sender, EventArgs e)
{
    DataSet dataSet = new DataSet("MyDataSet");
    DataTable table = new DataTable();
    table.Columns.Add(new DataColumn("NameValue"));
    table.Columns.Add(new DataColumn("Number"));
    table.Columns.Add(new DataColumn("NumberValue"));
    dataSet.Tables.Add(table);

    DataRow row = dataSet.Tables[0].NewRow();
    row[0] = "Name";
    row[1] = "0";

    dataSet.Tables[0].Rows.Add(row);

    this.MyGridView.DataSource = dataSet;
    this.MyGridView.DataBind();
}

protected void Button1_Click(object sender, EventArgs e)
{
    TextBox txtsn = ((TextBox)this.MyGridView.Rows[0].FindControl("NumberTextBox"));
    string sn = txtsn.Text;
}

<body>
    <form id="form1" runat="server">
    <div>
        <asp:Button ID="Button1" runat="server" Text="Button" OnClick="Button1_Click" />
        <asp:GridView ID="MyGridView" AutoGenerateColumns="false" ShowHeader="false" runat="server" >
            <Columns>
                <asp:TemplateField>
                    <ItemTemplate>
                        <asp:Label ID="NameLabel" runat="server" Text='<%#Eval("NameValue")%>' />
                    </ItemTemplate>
                </asp:TemplateField>
                <asp:TemplateField>
                    <ItemTemplate>
                        <asp:TextBox ID="NumberTextBox" runat="server" Text='<%#Eval("NumberValue")%>' />
                    </ItemTemplate>
                </asp:TemplateField>
            </Columns>
        </asp:GridView>
    </div>
    </form>
</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T15:22:22.473

问题是您总是将网格绑定到它，`DataSource`即使在回发时也是如此。这会覆盖用户所做的所有更改。

而是使用该[`IsPostBack`](http://msdn.microsoft.com/en-us/library/system.web.ui.page.ispostback.aspx) 属性：

```
protected void Page_Load(object sender, EventArgs e)
{
    if(!IsPostback)
    {
        DataSet dataSet = new DataSet("MyDataSet");
        DataTable table = new DataTable();
        table.Columns.Add(new DataColumn("NameValue"));
        table.Columns.Add(new DataColumn("Number"));
        table.Columns.Add(new DataColumn("NumberValue"));
        dataSet.Tables.Add(table);

        DataRow row = dataSet.Tables[0].NewRow();
        row[0] = "Name";
        row[1] = "0";

        dataSet.Tables[0].Rows.Add(row);

        this.MyGridView.DataSource = dataSet;
        this.MyGridView.DataBind();
    }
} 
```

只有在某些内容发生更改时才需要重新加载`DataSource`（删除或添加记录，用户单击排序列或您有分页）。但是你应该只在适当的事件处理程序中而不是在 page_load 中这样做。因此，最好将此代码包装在可以从任何地方调用的方法中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T15:23:48.043

You're data binding your grid on postbacks, which is causing this issue. You want to check to see if the request is a post:

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostback)
    {
        DataSet dataSet = new DataSet("MyDataSet");
        DataTable table = new DataTable();
        table.Columns.Add(new DataColumn("NameValue"));
        table.Columns.Add(new DataColumn("Number"));
        table.Columns.Add(new DataColumn("NumberValue"));
        dataSet.Tables.Add(table);

        DataRow row = dataSet.Tables[0].NewRow();
        row[0] = "Name";
        row[1] = "0";

        dataSet.Tables[0].Rows.Add(row);

        this.MyGridView.DataSource = dataSet;
        this.MyGridView.DataBind();
    }
} 
```

# c++ - 关闭句柄/存储句柄

> ID：12958047
> 
> 赞同：1
> 
> 时间：2012-10-18T15:20:12.037
> 
> 标签：c++, windows, handle

我有一些事件句柄，并将它们添加到列表中。我想知道我是否可以存储这些句柄，关闭本地句柄，以后仍然使用存储的句柄。

例子：

```
std::map<std::string, HANDLE> Events;

DWORD OpenSingleEvent(std::string EventName, bool InheritHandle, DWORD dwDesiredAccess, DWORD dwMilliseconds)
{
    Handle hEvent = OpenEvent(dwDesiredAccess, InheritHandle, EventName.c_str()); //Local Handle.
    if (hEvent)
    {
        DeleteSingleEvent(EventName); //Delete the correct/old handle in the map.
        Events.insert(EventName, hEvent);  //Add this new handle to the map.
        DWORD Result = WaitForSingleObject(hEvent, dwMilliseconds);
        CloseHandle(hEvent);  //Close THIS handle. Not the one in my Map.
        return Result;
    }
    CloseHandle(hEvent);  //Close this handle.
    return WAIT_FAILED;
} 
```

上面的方法有用吗？如果没有，还有其他方法可以做到这一点吗？它用于共享内存通信，所以我不能复制句柄，因为我只有客户端 PID 而不是服务器的。

也有人可以解释 InheritHandle 的作用吗？我使用的函数是 OpenEvent，它具有该参数，但我不确定它的作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T15:23:29.480

A `HANDLE` is simply a `void *`, it's a token which actually represents an object in kernel space. Calling `CloseHandle` actually deallocates the kernel object so the short answer to your question is no, you can't keep a list of them and then close all the local ones. All you'll have is a list of `void*` which don't represent anything.

What you can do is use `DuplicateHandle` which actually creates another kernel object on your behalf. However... why not just close the handles when you've finished with the entry in the list?

# matlab - 使用 fmincon 时出错（第 300 行） A 必须有 'n' 列

> ID：12958050
> 
> 赞同：0
> 
> 时间：2012-10-18T15:20:29.417
> 
> 标签：matlab, optimization

我收到错误“使用 fmincon 时出错（第 300 行）A 必须有 'n' 列。” 尝试解决以下优化代码时。我认为约束的定义存在错误。有人遇到同样的问题[http://goo.gl/35MeC](http://goo.gl/35MeC)但不幸的是我不会读中文！！

目标是找到受 Y 及其积分 IntY 约束的数组 Y 的最优值。为了更好地理解问题的本质，Y 的每个值都代表一个变量在连续时间步中的值，而要最小化的目标函数基本上是交互成本。

```
function [Y, IntY] = optTest()
    % inputs of the problem
    TS        = 10;   % number of time steps
    YMin      = -0.1; % minimum value of Y
    YMax      = 0.2;  % maximum value of Y
    IntYMin   = 0.1;  % min value of the integral of Y
    IntYMax   = 0.9;  % max value of the integral of Y
    IntYInit  = 0.2;  % initial value of the integral of Y
    Prices    = PricesFun(TS);

    % use of function 'fmincon', preparation of the inputs
    % x = fmincon(fun,x0,A,b,Aeq,beq,lb,ub)
    A = [tril(ones(TS))*1;tril(ones(TS))*-1];
    b = [ones(TS,1)*(IntYInit-IntYMin);ones(TS,1)*(IntYMax-IntYInit)];
    lb = ones(TS,1)*YMax;
    ub = ones(TS,1)*YMin;

    Y0 = ones(TS)*IntYInit;
Y = fmincon(@(x) costFun(x, Prices),Y0,A,b,[],[],lb,ub);
IntY = cumsum(Y);

function cost = costFun(x, Prices)
cost = sum(x*Prices);

function P = PricesFun(TS)
    x = linspace(1,TS,TS);
    pi = 3.1415;
P = 2 + sin(x/TS*4*pi); 
```

上面的代码是自包含的，如果你想尝试，你只需将它粘贴到matlab中并调用函数：

```
[Y, IntY] = optTest(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T17:08:20.050

您最初的猜测`Y0`是定义优化中涉及的变量数量。您正在为 输入一个 TS x TS 方阵`Y0`，这需要 TS*TS 线性约束。鉴于您将列向量用于`lb`and `ub`，我假设您也打算创建`Y0`为列向量，或者`Y0 = ones(TS,1)*IntYInit;`

# nservicebus - NServiceBus - Visual Studio 2010 中的“项目类型不受支持”错误

> ID：12958058
> 
> 赞同：1
> 
> 时间：2012-10-18T15:20:53.110
> 
> 标签：nservicebus

NServiceBus 的安装是顺利和直接的。那里没有问题。

现在，我正在尝试使用示例解决方案来查看屏幕后面会发生什么。只是想按照这里的说明 - [http://docs.particular.net/samples/](http://docs.particular.net/samples/)

创建端点时出现此错误。

![在此处输入图像描述](../Images/e9fdd767fbddd8b0f0eb0ec2132abd39.png)

重新安装了 VS 插件。重新启动VS 2010。没有运气。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T14:46:25.653

您的环境中似乎没有安装 ASP NET MVC 3 项目类型。[请尝试从http://www.asp.net/mvc/mvc3](http://www.asp.net/mvc/mvc3)安装 ASP.Net MVC

如果您尝试使用 Web Platform Installer Tool 安装它，请确保您安装了正确的版本和产品（至少对我来说，很容易在有这么多类似命名产品的情况下选择错误的产品）。

# vb.net - 在VB中获取类型预期错误

> ID：12958059
> 
> 赞同：1
> 
> 时间：2012-10-18T15:20:57.233
> 
> 标签：vb.net

请看附件代码

```
topThird = RuntimeHelpers.GetObjectValue(NewLateBinding.LateGet(Nothing, GetType((System.Math), "Round", New Object() {Operators.DivideObject(totalTitles, CType(3, Integer))}, Nothing, Nothing, Nothing)) 
```

我在 VS 2008 中收到一个错误，上面写着“Type Expected”。我不知所措，无法弄清楚我需要添加什么。我可以从错误中看到一些不正确的东西，但我不确定是什么。BTW 选项严格是 ON

如果需要，我可以发布整个功能，如果这有帮助，请发表评论

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T20:30:56.567

我认为刹车有一个错误：你有 8 个打开刹车，只有 7 个关闭......也许在 GetType 附近有一个多余的刹车。

# asp.net - OWASP ASVS V10.4 验证是否记录了后端 TLS 连接失败----如何？

> ID：12958060
> 
> 赞同：2
> 
> 时间：2012-10-18T15:20:58.337
> 
> 标签：asp.net, ssl, audit, owasp

我们正在开发一个 ASP.NET 项目，该项目需要遵守 OWASP ASVS 清单。其中一个术语是“**验证是否记录了后端 TLS 连接失败。** ”我找不到实现此目的的方法，但客户一直在坚持。有什么建议/参考吗？示例代码会更好。

这是 owasp 的链接： [http ://code.google.com/p/owasp-asvs/wiki/Verification_V10](http://code.google.com/p/owasp-asvs/wiki/Verification_V10)

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T04:07:36.923

我同意这是措辞不好。目前正在对 ASVS 进行改造。来吧，帮助我们使事情变得更加具体和可测试。

在您的实例中，TLS 连接通常由操作系统代表应用程序和库代码维护，这些代码很少（如果有的话）真正努力验证 TLS 连接就是它在锡上所说的那样。浏览器在警告用户方面做得越来越好，但库非常糟糕，应用程序在检查端到端错误和对连接状态做出明智的安全决策方面更糟糕。即使是证书吊销之类的基本操作也应该是轻而易举的事，但很少有库默认启用此功能。

我们每天都在手机应用程序中看到这一点 - 让大多数移动应用程序通过 MITM 代理连接是微不足道的，这些代理不提供任何用户反馈连接是不可信的。

我希望看到这个要求是：

“用户代理软件（移动应用程序、浏览器、Web 服务、库）必须让最终用户清楚地了解连接是不可信的，并进一步拒绝连接，或要求用户干预以建立不安全的连接。连接。应记录此类失败或不安全的连接。”

这将确保 - 无论是操作系统、库还是应用程序 - 有人拥有这种交互，并且具有明确的安全目标（没有不受信任的连接），有利于安全的可用性控制，最后是检测控制如果用户做出非常糟糕的选择（因为我们知道他们总是有机会的话），允许事前监控和事后重建。

我知道这本身并不能回答您的问题，但您没有提及您是否使用 OpenSSL 或 WCF 或......如果您让我知道您想要的平台，我很乐意提供代码片段。

# php - 为图像 GD 添加额外空间

> ID：12958065
> 
> 赞同：1
> 
> 时间：2012-10-18T15:21:15.610
> 
> 标签：php, gd

我想对 9gag 的图像做同样的事情......

但到目前为止，我只能在图像顶部添加水印，添加额外的空间......

这是原始图片： http: [//www.matamoros.gob.mx/test/595.jpg](http://www.matamoros.gob.mx/test/595.jpg)

这是我的代码：

```
header("Content-type: image/jpeg");

$img_name = "595.jpg";

$img_src = imagecreatefromjpeg($img_name);

$width_src = imagesx($img_src);

$height_src = imagesy($img_src);

$width_dst = $width_src;

$height_dst = $height_src;

$quality = 80;

$img = imagecreatetruecolor($width_src, $height_dst);

imagecopyresampled($img, $img_src, 0, 0, 0, 0, $width_dst, $height_dst, $width_src, $height_src);

$x1_rect = 0;

$y1_rect = $height_dst - 30;

$x2_rect = $width_dst;

$y2_rect = $height_dst;

$color = imagecolorallocate($img, 245, 245, 245);

$letter_color = imagecolorallocate($img, 140, 140, 140);

$text = "http://en1.me/f/xxxxxxxx";

imagefilledrectangle($img, $x1_rect, $y1_rect, $x2_rect, $y2_rect, $color);

imagettftext($img, 20, 0, $x1_rect+5, $y1_rect+22, $letter_color, "Harabara.ttf", $text);

imagejpeg($img, '', $quality);

imagedestroy($img_src);

imagedestroy($img); 
```

这就是结果： http: [//www.matamoros.gob.mx/test/test2.php](http://www.matamoros.gob.mx/test/test2.php)

如您所见，它将信息放在图像的顶部……我怎样才能使它位于图像下方？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T17:41:37.053

您必须创建比源高 30px 的新图像：

```
$img = imagecreatetruecolor($width_src, $height_dst + 30); 
```

并将您的文本从源图像的末尾开始，填充所有新空间：

```
$y1_rect = $height_dst;
$y2_rect = $height_dst + 30; 
```

# eclipse - Eclipse插件拖放

> ID：12958067
> 
> 赞同：0
> 
> 时间：2012-10-18T15:21:19.747
> 
> 标签：eclipse, plugins, drag-and-drop

我开发了一个日食视图，其中一些项目显示在树中。我想启用从树中拖动概念，并将它们拖放到打开进行编辑的 .java 文件的文本区域中。

有没有人有任何示例代码或任何链接来帮助我？

谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T15:25:31.337

Lars Vogel的 Eclipse[拖放教程](http://www.vogella.com/articles/EclipseDragAndDrop/article.html)可能会有所帮助。IBM 自己也创建了一个[教程](http://www.eclipse.org/articles/Article-Workbench-DND/drag_drop.html)，但我会小心那个，因为它已经 9 岁了。

# xml - AS3 XML Looping，抓取属性和子项

> ID：12958068
> 
> 赞同：0
> 
> 时间：2012-10-18T15:21:20.387
> 
> 标签：xml, actionscript-3

这是我的 XML 文件：

```
<cm>
    <strategy_description>
        <category name="Account">
            <item name="tree">test1</item>
            <item name="type">test2</item>
        </category>
        <category name="Account2">
            <item name="tree">test1</item>
            <item name="type">test2</item>
        </category>
    </strategy_description>
</cm> 
```

我想输出这样的东西：

```
Account
tree: test1
type: test2
Account2
tree: test1
type: test2 
```

我做到了这一点，并设法以 XML 格式跟踪输出所有类别和项目节点：

```
var categoryList:XMLList = xmlData.strategy_description.category;
for each(var category:XML in categoryList){
    trace(category);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T15:35:01.797

您将需要嵌套循环，例如：

```
var categoryList:XMLList = xmlData.strategy_description.category;

for each(var category:XML in categoryList)
{
    trace(category.@name);

    for each(var item:XML in category.item)
    {
        trace("  "+item.@name +": "+ item);
    }
} 
```

希望这可以帮助！

# web-services - 处理发布到 Nodejs 服务器的 JSON 消息数组的最佳方法是什么？

> ID：12958071
> 
> 赞同：0
> 
> 时间：2012-10-18T15:21:28.747
> 
> 标签：web-services, api, node.js, asynchronous

客户端发送一组 JSON 消息以存储在 Nodejs 服务器上；但是客户端需要对每条消息进行某种确认（通过唯一的 id），它已正确存储在服务器上，因此不需要再次发送。

在服务器上，我想解析 JSON 数组，然后循环遍历它，将每条消息存储在 db 中，将此消息的响应存储在名为响应的 JSON 数组中，最后将此响应数组发送到客户端。但是由于 db 操作是异步的，所有其他代码都在从 db 存储方法返回任何结果之前执行。我的问题是如何不断更新响应数组，直到所有数据库操作完成？

```
var message = require('./models/message');
var async = require('async');

var VALID_MESSAGE = 200;
var INVALID_MESSAGE = 400;
var SERVER_ERROR = 500;

function processMessage(passedMessage, callback) { 
var msg = null;
var err = null;  
var responses = [];

isValidMessage(passedMessage, function(err, result) {
if(err) {
  callback( createResponse(INVALID_MESSAGE, 0) );
}else{ 
 var keys = Object.keys(result);
for(var i=0, len = keys.length; i<len; i++) {
async.waterfall([     
  //store valid json message(s)
  function storeMessage(callback) {   
    (function(oneMessage) {
      message.processMessage(result[i], function(res) {
        callback(res, result[i].mid, callback);  
      });
    })(result[i]);
    console.log('callback returns from storeMessage()');
  },

  //create a json response to send back to client
  function createResponse(responseCode, mid, callback) {
    var status = "";
    var msg = "";

    switch(responseCode) {
    case VALID_MESSAGE: { 
      status = "pass";
      msg = "Message stored successfuly.";
      break;
    }
    case INVALID_MESSAGE: {
      status = "fail";
      msg = "Message invalid, please send again with correct data.";
      break;
    }
    case SERVER_ERROR: {
      status = "fail";
      msg = "Internal Server Error! please contact the administrator.";
      break;
    }
    default: {

      responseCode = SERVER_ERROR;
      status = "fail";
      msg = "Internal Server Error! please contact the administrator.";
      break;
    }
  }
  var response = { "mid": mid, "status": status, "message": msg, "code": responseCode};   
  callback(null, response );   
  }                     
],

function(err, result) {
  console.log('final callback in series: ', result);
  responses.push(result);          
});
}//loop ends
}//else ends
console.log('now we can send response back to app as: ', responses);  
});//isValid finishes
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T17:50:49.720

为了扩展 lanzz 所说的，这是一个非常常见的解决方案（同时启动多个“任务”，然后使用通用回调来确定它们何时全部完成）。这是我的 userStats 函数中的函数的快速粘贴，它获取活跃用户的数量（DAU、WAU 和 HAU）：

```
exports.userStats = function(app, callback)
{
    var res = {'actives': {}},
       day = 1000 * 60 * 60 * 24,
       req_model = Request.alloc(app).model,
       actives = {'DAU': day, 'MAU': day*31, 'WAU': day*7},
       countActives = function(name, time) {
           var date = new Date(new Date().getTime() - time);
           req_model.distinct('username',{'date': {$gte: date}}, function(e,c){ 
               res.actives[name] = parseInt(c ? c.length : 0, 10);
               if(Object.keys(actives).length <= Object.keys(res.actives).length)
                   callback(null, res);
           });
       };

    var keys = Object.keys(actives);
    for(var k in keys)
    {
        countActives(keys[k], actives[keys[k]]);
    }
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T15:29:36.280

`responses`仅当其中的项目数等于对象中的键数时才发送您的数组`result`（即您已经收集了所有这些的响应）。推送数组中的每个响应后，您可以检查是否可以发送。

# sql - 获得一周内所有不同的总和

> ID：12958072
> 
> 赞同：0
> 
> 时间：2012-10-18T15:21:29.917
> 
> 标签：sql, sql-server-2005

我想知道这个查询到底在哪里我不清楚。我想获得在特定周内工作的所有不同 RepID 的计数。这是在 SQL Server 2005 中。谢谢！！

此查询为我提供了整周不同的 RepID。如果他在 2 个不同的日子有记录，我想计算 RepID 两次，但即使他在任何特定的日子有超过 1 条记录，我也只计算一次。我希望我很清楚。对不起，我之前不清楚！谢谢！

```
Select count(distinct(RepID)) as SalesPeople from DailyInfo
where Date > DATEADD(dd, -(DATEPART(dw, @Date)-1), @Date) 
     and Date < DATEADD(dd, 7-(DATEPART(dw, @Date)), @Date) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T15:31:36.847

您可以对 RepID+Date 进行唯一组合以使其唯一（[SQLFiddle](http://sqlfiddle.com/#!3/2e83a/3)）：

```
 SELECT COUNT(distinct RIGHT(DateDiff(d,0,Date),10)
                       +RIGHT(RepID,10)) as SalesPeople
    FROM DailyInfo
   WHERE Date > DATEADD(dd, -(DATEPART(dw, @Date)-1), @Date)
     AND Date < DATEADD(dd, 7-(DATEPART(dw, @Date)), @Date); 
```

我假设`DailyInfo.Date` *可以*包含时间信息。`DateDiff(d,0,Date)`您可以在上面交换`Date`. 同样，`CAST(DateDiff(d,0,Date) as datetime)`下面可以只是`Date.

如果您需要查看每天的细分，下面是查询。

```
 SELECT CAST(DateDiff(d,0,Date) as datetime) TheDay,
         COUNT(distinct RepID) as SalesPeople
    FROM DailyInfo
   WHERE Date > DATEADD(dd, -(DATEPART(dw, @Date)-1), @Date)
     AND Date < DATEADD(dd, 7-(DATEPART(dw, @Date)), @Date)
GROUP BY CAST(DateDiff(d,0,Date) as datetime) -- by day
ORDER BY TheDay 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T15:37:35.017

让我通过建议你应该如何思考这个问题来回答这个问题。您正在寻找每天的代表次数。因此，您的查询应该在此级别有一个摘要（子查询）。然后，您可以计算每周的天数。

假设您的日期没有任何时间组件，您可以使用以下内容：

```
select count(*)
from (select RepId, date as thedate, count(*) as NumOnDay
      from DailyInfo
      group by RepId, date
      where Date > DATEADD(dd, -(DATEPART(dw, @Date)-1), @Date) 
           and Date < DATEADD(dd, 7-(DATEPART(dw, @Date)), @Date)
     ) rd 
```

或者，您可以计算代表在一周内工作的天数，然后将它们相加：

```
select sum(numdates)
from (select RepId, count(distinct date) as numdates
      from DailyInfo
      group by RepId 
      where Date > DATEADD(dd, -(DATEPART(dw, @Date)-1), @Date) 
           and Date < DATEADD(dd, 7-(DATEPART(dw, @Date)), @Date)
     ) rd 
```

如果您的`date`字段有时间组件，那么您需要删除时间组件才能使其正常工作。或者使用一些技巧，例如`day(date)`，因为 day 函数将为一周中的每个日期返回不同的值。在更高版本的 SQL Server 中`cast(date as date)`，如果原始日期是 datetime，则可以只使用 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T15:40:10.743

```
Select count(1)
from DailyInfo
group by convert(varchar(10),[date], 120) 
where [put your condition here] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T15:40:14.357

您可以使用 CTE，但可能会过度杀戮。并且在 CTE 中按天分组，您需要做的就是对总数求和。

```
WITH cte ([day], total) as
(
    Select DATENAME(DW,[Date]), count(distinct(RepID)) as SalesPeople from DailyInfo
    where [Date] > DATEADD(dd, -(DATEPART(dw, @Date)-1), @Date) and [Date] < DATEADD(dd, 7-(DATEPART(dw, @Date)), @Date)
    GROUP BY DATENAME(DW,[Date])
)
select SUM(total) FROM cte; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-18T15:43:56.323

要执行我认为您想要的操作，您需要按天分组，并按周过滤，然后对结果执行不同的操作：

```
 Select Distinct(RepID) 
 From (Select RepID
       Group By DateDiff(day, 0, Date)
       From DailyInfo
       Where Date > DateAdd(dd, -(DATEPART(dw, @Date)-1), @Date) 
         And Date < DateAdd(dd, 7-(DATEPART(dw, @Date)), @Date) 
```

# facebook - Cordova Facebook Connect - 无法获取用户 ID

> ID：12958077
> 
> 赞同：0
> 
> 时间：2012-10-18T15:21:38.293
> 
> 标签：facebook, cordova

我添加到 phonegap 应用程序 Facebook Connect，它工作正常并生成访问令牌，但是当我尝试获取用户 ID 时，我的函数的值为 **“Undenified”** ：

```
 FB.init({
        appId: "************",
        nativeInterface:CDV.FB,
        xfbml: true,
        useCachedDialogs: false,
        status: true,
        cookie: true,
        oauth: true
    });
    //alert("Init Done");
    FB.getLoginStatus(function (response) {
        if (response.authResponse) {               
            if (response.status == 'connected') {                  
                Token = response.authResponse.accessToken;// This one is Good!                   
                userid = response.authResponse.userID;// This one is Bad                  

            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T04:59:55.150

我使用以下，它工作正常：

```
FB.api('/me', {}, function (response) {
    fbuserid = response.userid;
}); 
```

这为您提供了用户数据。您还可以传递范围只是为了获得您想要的内容，例如电子邮件、用户 ID 等...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T05:12:21.080

遍历键以查看存储的内容

```
for (var key in response.authResponse) {
    console.log(key);
    console.log(response.authResponse[key]);
} 
```

# visual-studio-2010 - 发布 SQL Data Tools 2012 项目：强制进入单用户模式

> ID：12958083
> 
> 赞同：5
> 
> 时间：2012-10-18T15:21:48.230
> 
> 标签：visual-studio-2010, sql-server-2012, publishing

我有一个尝试使用 Visual Studio 发布的 CLR 项目。我不得不将项目更改为 SQL Data Tools 项目，现在它没有发布。每次尝试时，我都会收到超时错误。当我一步一步进行时，我发现这行代码挂在我的服务器上。

```
`IF EXISTS (
  SELECT 1
  FROM [master].[dbo].[sysdatabases]
  WHERE  [name] = N'fwDrawings')
BEGIN
  ALTER DATABASE [fwDrawings]
  SET READ_COMMITTED_SNAPSHOT OFF;
END`
```

`基本上，我知道当我尝试发布它时它试图强制服务器进入单用户模式。它只是针对我的登台服务器而不是生产服务器，但这仍然是一个问题。每次我想在测试 CLR 的功能时更新 CLR 时，我都无法将所有人都踢出服务器并尝试将其切换到单用户模式。而且我不想等待维护周期或停机时间来将其推广到生产。有没有解决的办法？`

 `* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-13T09:48:43.727

大概你已经`READ_COMMITTED_SNAPSHOT`为你的数据库打开了。

如果是这种情况，您需要更改数据库项目设置以匹配。在项目的数据库设置的操作选项卡中检查“读取提交的快照”事务隔离。

对我来说，这防止了发布超时，即我现在可以成功发布。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T19:37:58.220

要以更安全的方式部署到正在使用的服务器，请尝试改用[模式比较](http://arcanecode.com/2012/08/28/sql-server-data-tools-in-visual-studio-2012schema-comparison/)。`

# vb6 - VB6 中的 Form_Paint 和 AutoRedraw

> ID：12958089
> 
> 赞同：0
> 
> 时间：2012-10-18T15:21:57.110
> 
> 标签：vb6

使用 VB6，我知道如果 AutoRedraw 为真，则不会调用 Form_Paint。

我有一些代码只有在 Form_Paint 中调用时才能始终如一地工作。

此代码（在 MDI 项目中工作）通过 GetMenu() API 调用获取父级当前活动菜单的句柄。如果没有在 Form_Paint 中调用，该调用有时会返回旧的菜单句柄。

我的一种形式有 AutoRedraw = true。我已经在 Form_Activate 中尝试过 GetMenu(parent.hWnd)，但这为时过早。

我也尝试过覆盖 WindowProc 并从 Form_Activate 发送 WM_USER 消息。这是一个改进，但仍然不够一致。

您如何在子窗体的生命周期中稍后调用 GetMenu(parent.hWnd)？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T20:35:07.170

您可以尝试使用**GotFocus**事件。它在**Activated**事件之后和**Paint**事件之前。

# extjs - PDF 在窗口中显示

> ID：12958094
> 
> 赞同：0
> 
> 时间：2012-10-18T15:22:23.653
> 
> 标签：extjs, extjs4

我需要传递要在窗口中显示的 PDF 路径，但是找不到路径，我收到以下错误：

`GET http://localhost:8081/home/MyPdf.pdf 404 (Not Found)`

该文件夹具有读取、写入和执行的权限。

```
Ext.create(Ext.window.Window', {
     width : 800,
     height : 600,
     maximizable : true,    
     layout : 'fit',
     items : [ {
     html : '<object width="100%" height="100%" data=
     + /home/MyPdf.pdf + '"></object>'
    } ]
}).show(); 
```

有谁知道可能会发生什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T15:46:48.257

可能是您在“data =”之后缺少一个：'。考虑到您收到包含路径的错误，这可能不太可能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T17:46:16.610

您必须从保存网页的文件夹中访问该文件夹，如下所示：

```
//if your webpage is held in the directory: /opt/apache/htdocs/index.html, 
//then your path should look like this:
Ext.create(Ext.window.Window', {
     width : 800,
     height : 600,
     maximizable : true,    
     layout : 'fit',
     items : [ {
     html : '<object width="100%" height="100%" data="' + ../../../home/MyPdf.pdf + '"></object>'
    } ]
}).show(); 
```

试试看，告诉我们会发生什么

# javascript - 如何从 Chrome 扩展程序发送更长的电子邮件？

> ID：12958096
> 
> 赞同：3
> 
> 时间：2012-10-18T15:22:26.157
> 
> 标签：javascript, google-chrome-extension, local-storage

我想制作一个 Chrome 扩展程序，让用户发送带有自动填充某些文本的电子邮件。我使用的是`mailto:`链接，但它不能处理超过 1024 个字符的字符串，也不能创建 html 链接。有没有办法可以从电子邮件页面（可能使用本地存储）中填写其他文本甚至是 HTML 链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T17:15:40.920

不幸的是，据我所知，没有原生的 chrome/javascript API。我做了一些搜索，发现有人正在研究一个开源选项，但它非常简陋。他希望其他人能和他一起跳起来，充实它。

**听起来你正在尝试这个：**

要创建 URL，您可以使用 &body= 标签和 url 对消息进行编码，但是长度有限制。听起来您已经知道如何使用 chrome 打开新标签，因此您可以使用修改后的 URL 字符串来创建更短的电子邮件。我在我的第一个 chrome 扩展中做了类似的事情。它看起来像这样。

```
function sendToUrl(){ chrome.tabs.query({active:true, windowId: chrome.windows.WINDOW_ID_CURRENT}, function(tab) {
    //while this seems to generate the URL correctly, gmail limits how long the body text can be therefore this is not a viable solution
    //Also there is no javascript API therefore there is no hope of sending an email.

    //Need to loop through each tab and not just the first one
    var currentTab = tab[0];
    var tabInformation = RPATH.getTab(currentTab.id);

        var mailUrl = "https://mail.google.com/mail/?view=cm&fs=1&tf=1&su=My%20Subject&to=";
        // grab the email addresss from popup.html
        mailUrl += document.getElementById("to").value + "&body=";

        // get formBody from popup.html
        var formBody = document.getElementById("body").value;
...
//I did some other stuff that isn't relevant here
...
        //Concat final mailto url
        mailUrl = mailUrl + formBody;
        chrome.extension.sendMessage({mailUrl: mailUrl}, function(response){ console.log(response.farewell);});
});} 
```

**对于更长的电子邮件正文**

但这只会让你成功一半。我能想到的唯一选择是拆分打开的选项卡并填写电子邮件正文。您可以在页面加载完成后使用追加修改电子邮件正文。这可能看起来像我下面的内容。请注意，我选择了 iframe 元素，然后在其中找到 body 标签，最后在标签打开后添加一些 html。请注意，电子邮件正文只不过是 html，因此 div、tr、br 等标签都应该适用于创建格式良好的电子邮件。在我之前的示例中，我将表单中的文本作为字符串提取出来。您可以改为使用 jquery 在您的 popup.html 页面上克隆 html 并附加克隆的 html。为简单起见，我只将文本放在追加内容中。

```
$("iframe#:1t4").find("body.editable").append('<p>My long email body</p>'); 
```

我想从那里你可以运行一个点击事件，但你也可以把它留给用户。

# lisp - CL - obj 参数如何传递到标签函数中？

> ID：12958099
> 
> 赞同：0
> 
> 时间：2012-10-18T15:22:29.013
> 
> 标签：lisp

```
(defparameter *objects* '(whiskey bucket frog chain))

(defparameter *object-locations* '((whiskey living-room)
                                   (bucket living-room)
                                   (chain garden)
                                   (frog garden)))

(defun objects-at (loc objs obj-locs)
  (labels ((at-loc-p (obj)
             (eq (cadr (assoc obj obj-locs)) loc)))
    (remove-if-not #'at-loc-p objs)))

(objects-at 'living-room *objects* *object-locations*) 
```

`(WHISKEY BUCKET)`在 REPL 中返回。

是如何`obj`进入的`at-loc-p`？的任何参数`objects-at`都没有命名`obj`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T15:30:14.473

没有一个参数`objects-at`是命名`obj`的，但是其中一个参数（实际上是唯一的参数）`at-loc-p`是。因此，当`at-loc-p`使用参数 (by `remove-if-not`) 调用时，该参数将`at-loc-p`使用 name传递给`obj`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T15:30:48.247

`labels`定义功能。所以

```
(labels ((square (x) (* x x))) (square 2)) 
```

是相同的

```
(let ((square (lambda (x) (* x x)))) (funcall square 2)) 
```

并且`x`（在您的示例中，`obj`) 只是`square`( `at-loc-p`) 函数的参数名称。

编写函数的另一种方法`objects-at`是

```
(defun objects-at (loc objs obj-locs)
  (defun at-loc-p (obj)
    (eq (cadr (assoc obj obj-locs)) loc))
  (remove-if-not #'at-loc-p objs))) 
```

除了 this 全局定义函数`at-loc-p`。

# python - Python - 追加到嵌套在 dict 子类中的列表

> ID：12958110
> 
> 赞同：3
> 
> 时间：2012-10-18T15:23:08.057
> 
> 标签：python, list, dictionary, append, subclass

我有一个 dict 子类，它的工作是在嵌套 dict 键不存在时动态添加它，如果调用 append 则执行列表追加：

```
class PowerDict(dict):
    def __getitem__(self, item):
        try:
            return dict.__getitem__(self, item)
        except KeyError:
            value = self[item] = type(self)()
            return value
    def append(self,item):
        if type(self) != list:
            self = list()
            self.append(item) 
```

所以

```
a = PowerDict()
a['1']['2'] = 3 
```

产生输出：

```
a = {'1': {'2': 3}} 
```

但是，有时我需要做这样的事情：

```
b = PowerDict()
b['1']['2'].append(3)
b['1']['2'].append(4) 
```

应该产生输出：

```
b = {'1': {'2': [3, 4]}} 
```

但上面的代码产生输出：

```
{'1': {'2': {}}} 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T15:46:12.020

```
class PowerDict(dict):
    # http://stackoverflow.com/a/3405143/190597 (gnibbler)
    def __init__(self, parent = None, key = None):
        self.parent = parent
        self.key = key
    def __missing__(self, key):
        self[key] = PowerDict(self, key)
        return self[key]
    def append(self, item):
        self.parent[self.key] = [item]
    def __setitem__(self, key, val):
        dict.__setitem__(self, key, val)
        try:
            val.parent = self
            val.key = key
        except AttributeError:
            pass

a = PowerDict()
a['1']['2'] = 3
print(a)

b = PowerDict()
b['1']['2'].append(3)
b['1']['2'].append(4)
print(b)

a['1']['2'] = b
a['1']['2'].append(5)
print(a['1']['2']) 
```

产量

```
{'1': {'2': 3}}
{'1': {'2': [3, 4]}}
[5] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T15:34:29.103

您的问题之一是重新分配自我，但事实并非如此。尝试在 append 命令中打印出 self 的值，可以看到另一个问题：循环进入无限递归。这是因为您在 append 命令中调用 powerDict 上的 append 命令！

这应该可以在不重写 append 命令的情况下解决您的问题，但我强烈建议您无论如何都要重写它以避免上述问题：

```
b['1']['2']= [3]
b['1']['2'].append(4) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T15:28:25.253

您的 append() 方法永远不会起作用。通过这样做`self = list()`，您只是将名称重新分配`self`给一个新列表，然后将其丢弃。

而且我不明白您要做什么-从getitem开始，如果缺少某些东西，您正在即时创建新词典……您将如何混合列表行为？

# puppet - 如何遍历 Puppet 中的数组

> ID：12958114
> 
> 赞同：24
> 
> 时间：2012-10-18T15:23:16.437
> 
> 标签：puppet

我想遍历一个存储为 Facter 事实的数组，并为数组的每个元素创建一个新的系统用户和一个目录，最后对 AWS 进行 API 调用。

事实示例：`my_env => [shared1,shared2,shared3]`

如何遍历 Puppet 中的数组？

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-10-22T09:48:12.853

这可能有效，具体取决于您在做什么

```
# Assuming fact my_env => [ shared1, shared2, shared3 ]

define my_resource {
  file { "/var/tmp/$name":
    ensure => directory,
    mode   => '0600',
  }
  user { $name:
    ensure => present,
  }
}
my_resource { $my_env: } 
```

如果您的要求很简单，它将起作用，如果不是，Puppet 使这很难做到。基于对声明式语言如何工作的误解，Puppet 开发人员对迭代有非理性的偏见。

如果这种资源不适合您，也许您可​​以更好地了解您尝试从数组中设置哪些资源属性？

**编辑：**

在 Puppet 4 中，这个可悲的缺陷终于得到了修复。[此处](https://puppet.com/docs/puppet/5.5/lang_iteration.html "这里")记录了当前的事态。正如文档所说，您会在许多旧代码中找到上述解决方案的示例。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-06-18T18:58:28.167

从 puppet 3.2 开始，这可以使用“未来”解析器，如下所示：

```
$my_env = [ 'shared1', 'shared2', 'shared3', ]
each($my_env) |$value| {
  file { "/var/tmp/$value":
    ensure => directory,
    mode => 0600,
  }
  user { $value:
    ensure -> present,
  }
} 
```

另请参阅：[http ://docs.puppetlabs.com/puppet/3/reference/lang_experimental_3_2.html#background-the-puppet-future-parser](http://docs.puppetlabs.com/puppet/3/reference/lang_experimental_3_2.html#background-the-puppet-future-parser)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-09-18T20:27:34.147

本月初发布的 Puppet 3.7 具有新的 DSL，其中一个功能是迭代，请查看以下 URL [https://docs.puppetlabs.com/puppet/latest/reference/experiments_lambdas.html#enabling-lambdas-and-iteration](https://docs.puppetlabs.com/puppet/latest/reference/experiments_lambdas.html#enabling-lambdas-and-iteration)

这些新功能可以通过以下方式启用：

在 puppet.conf 文件中设置 parser = future 或添加命令行开关 --parser=future

希望有帮助

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-06-11T16:01:58.630

从最新的 Puppet (6.4.2) 开始，从 Puppet 4 开始，数组的迭代通过以下几种方式得到支持：

```
$my_arr = ['foo', 'bar', 'baz'] 
```

**每个功能：**

```
$my_arr.each |$v| {
  notice($v)
} 
```

**每个函数的替代语法：**

```
each($my_arr) |$v| {
  notice($v)
} 
```

**获取索引：**

将第二个参数传递给`each`：

```
$my_arr.each |$i, $v| {
  notice("Index: $i, value: $v")
} 
```

**与 Ruby 的比较：**

请注意，此语法受 Ruby 启发，但略有不同，将两者并排显示以避免混淆很有用。Ruby 将允许：

```
my_arr.each do |v|
  notice(v)
end 
```

或者：

```
my_arr.each { |v|
  notice(v)
} 
```

**其他迭代函数：**

请注意，Puppet 提供了许多其他迭代函数：

*   [`each`](https://puppet.com/docs/puppet/5.4/function.html#each)- 多次重复一段代码，每次使用一组值提供不同的参数。

*   [`slice`](https://puppet.com/docs/puppet/5.4/function.html#slice)- 使用集合中的值组作为参数，多次重复一段代码。

*   [`filter`](https://puppet.com/docs/puppet/5.4/function.html#filter)- 使用代码块通过删除不匹配的元素来转换数据结构。

*   [`map`](https://puppet.com/docs/puppet/5.4/function.html#map)- 使用代码块来转换数据结构中的每个值。

*   [`reduce`](https://puppet.com/docs/puppet/5.4/function.html#reduce)- 使用代码块通过组合来自提供的数据结构的值来创建新值或数据结构。

*   [`with`](https://puppet.com/docs/puppet/5.4/function.html#with)- 评估一次代码块，将其隔离在自己的本地范围内。它不迭代，但与迭代函数具有家族相似性。

**Puppet 3 及更早版本：**

如果您继承了仍在使用 Puppet 3 的旧代码，则接受的答案仍然正确：

```
define my_type {
  notice($name)
}

my_type { $my_arr: } 
```

但是请注意，这在现代 Puppet 中通常被认为是不好的风格。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-20T14:48:56.467

itsbruce 的答案可能是目前最好的，但是有一个[迭代提案](https://github.com/puppetlabs/puppet-rfc/blob/master/prfc-2.iteration/index.md)正在通过 puppetlabs 的骨架流程，以便将来可能实施。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-01-19T04:49:35.047

puppet 中有一个“create_resources()”函数。在迭代项目列表时这将非常有帮助

# django - 使用 Google App Engine 管理命令的 Django 抛出 DatabaseError

> ID：12958115
> 
> 赞同：0
> 
> 时间：2012-10-18T15:23:17.933
> 
> 标签：django, google-app-engine

当我运行管理命令时，它会打开一个浏览器窗口。我验证了创建 oauth 文件的应用程序`~/.googlesql_oauth2.dat`。

但它之后会抛出一个 DatabaseError 。

```
End user Google Account not authorized.enter 
```

任何想法如何解决这一问题？

堆栈跟踪：

```
Unhandled exception in thread started by <bound method Command.inner_run of <django.core.management.commands.runserver.Command object at 0x100646f50>>
Traceback (most recent call last):
  File "/usr/local/google_appengine/lib/django_1_3/django/core/management/commands/runserver.py", line 88, in inner_run
    self.validate(display_num_errors=True)
  File "/usr/local/google_appengine/lib/django_1_3/django/core/management/base.py", line 249, in validate
    num_errors = get_validation_errors(s, app)
  File "/usr/local/google_appengine/lib/django_1_3/django/core/management/validation.py", line 102, in get_validation_errors
    connection.validation.validate_field(e, opts, f)
  File "/usr/local/google_appengine/lib/django_1_3/django/db/backends/mysql/validation.py", line 14, in validate_field
    db_version = self.connection.get_server_version()
  File "/usr/local/google_appengine/lib/django_1_3/django/db/backends/mysql/base.py", line 338, in get_server_version
    self.cursor()
  File "/usr/local/google_appengine/lib/django_1_3/django/db/backends/__init__.py", line 250, in cursor
    cursor = self.make_debug_cursor(self._cursor())
  File "/usr/local/google_appengine/google/storage/speckle/python/django/backend/base.py", line 223, in _cursor
    self.connection = Connect(**kwargs)
  File "/usr/local/google_appengine/google/storage/speckle/python/django/backend/base.py", line 195, in Connect
    return driver.connect(**kwargs)
  File "/usr/local/google_appengine/google/storage/speckle/python/api/rdbms_googleapi.py", line 183, in __init__
    super(GoogleApiConnection, self).__init__(*args, **kwargs)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/storage/speckle/python/api/rdbms.py", line 583, in __init__
    self.OpenConnection()
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/storage/speckle/python/api/rdbms.py", line 606, in OpenConnection
    response = self.MakeRequest('OpenConnection', request)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/storage/speckle/python/api/rdbms.py", line 718, in MakeRequest
    response.sql_exception.message))
google.storage.speckle.python.api.rdbms.DatabaseError: 0: End user Google Account not authorized.enter 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T08:22:19.723

好吧，我在授权时以​​其他用户身份登录-.-

# c# - WPF frame rate unusably low when D3D application is running

> ID：12958120
> 
> 赞同：0
> 
> 时间：2012-10-18T15:23:25.970
> 
> 标签：c#, wpf, direct3d, slimdx, d3dimage

I am encountering a problem where a WPF application runs with a very low frame rate when a D3D application is running at the same time.

The situation is as follows: The first application is a Winforms form that renders 3D graphics using SlimDX and D3D10\. The application doesn't run in fullscreen mode, but in a maximized window. This is very smooth and fast.

The second application consists of a WPF window that renders a `ScatterView` with some images. The WPF window is transparent (`AllowsTransparency="True"` with a transparent background). The general idea here is that the WPF window should look like it is composited on top of the 3D scene.

However, as soon as the D3D10 application is running, the performance of the WPF app deteriorates to as low as 1-2 fps (as measured by the WPF Performance Tool). That's not because my computer hardware is not capable of rendering both applications: the D3D10 app is always rendering the 3D scene very smoothly, and GPU and CPU utilization does not max out when I have both applications running. Even when I give the WPF app a higher process priority, the rendering performance stays at 1-2 fps.

I have also tried to combine both applications into a single process and using a `D3DImage` and using a shared D3D10 surface (with a D3D9Ex device) to feed it into the `D3DImage`. Furthermore I tried using an `InteropBitmap` and writing the frame data into it. All of those solutions work and produce a D3D10 scene with some WPF controls on top of it, but none of them make WPF run smoothly.

The idea of using two different application processes was my final idea to decouple the WPF rendering stack from any eventual performance impacts that may arise from having D3D10 render in the same process.

# configuration - Override WP_SITEURL and WP_HOME for WordPress Multisite

> ID：12958123
> 
> 赞同：8
> 
> 时间：2012-10-18T15:23:29.840
> 
> 标签：configuration, development-environment, wordpress

For doing local development on a WordPress site ([http://www.example.com](http://www.example.com)), I was previously overriding the `WP_SITEURL` and `WP_HOME` values in `wp-config.php` like so:

```
define('WP_SITEURL', 'http://local-example/');
define('WP_HOME', 'http://local-example/'); 
```

This would allow me to copy the database and site files to a local server, and make modifications as necessary, testing on the local install.

It was then necessary to convert the install to a WordPress Multisite so that users, authentication, plugins, etc. could be shared between the main site and a secondary site, hosted on a subdomain ([http://second.example.com](http://second.example.com)).

The method above to override the values in the `wp_options` table no longer works, but I am unsure the proper way to set a value for the entries in `wp_blogs` as well as the `wp_2_options` table for the primary and subdomain.

Updating my `HOSTS` file is somewhat of a workaround, but it not ideal (I am not able to compare to the live site, etc). Running a script to change the database values is another option I have tried, but is slightly more cumbersome, so my questions is whether or not there is an option in MultiSite to override these values in a settings file, such as `wp-config.php`, and if so what it would look like.

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-18T18:06:35.423

* * *

***更新：****可以在此处找到带有附加说明的完整更新插件代码：http: [//justinsilver.com/technology/wordpress/wordpress-plugins/wordpress-plugin-wp-server-migration/](http://justinsilver.com/technology/wordpress/wordpress-plugins/wordpress-plugin-wp-server-migration/)*

* * *

在@user916011 的帮助下，我想出了一个解决方案。我需要能够将`wp_options`表​​复制到我的开发环境中，因为它们包含所需的配置。为了克服无法在 MultiSite 中设置 WP_SITEURL 和 WP_HOME 值的问题，我编写了一个自定义过滤器来替换可用于非多站点安装的`_config_wp_siteurl()`和`_config_wp_home()`函数，该插件包含在网络范围内可用的插件中，并且是配置在`wp-config.php`. 然后，我可以将除本地数据库*之外* `wp_site`的所有数据库表复制`wp_blogs`到本地数据库。

我强烈推荐Chris Murphy 撰写的[WordPress 3.0 的 URL 令牌替换技术](http://web.archive.org/web/20150221112238/http://www.farfromfearless.com/2010/09/07/url-token-replacement-techniques-for-wordpress-3-0)文章，以帮助处理内容中的 URL。

此示例假定子域多站点安装，具有一个域`example.com`和两个子域，`www.example.com`并且`second.example.com`. 本地开发 URL 将分别是`www.example.local`和`second.example.local`。

**数据库更改**：

更新 中的域值`wp_site`：

```
UPDATE wp_site SET domain = 'example.local' WHERE domain = 'example.com'; 
```

更新 中的域值`wp_blogs`：

```
UPDATE wp_blogs SET domain = 'www.example.local' WHERE domain = 'www.example.com';
UPDATE wp_blogs SET domain = 'second.example.local' WHERE domain = 'second.example.com'; 
```

**插件代码**：应在网络范围内安装以下插件。

```
<?php
/*
Plugin Name: MultiSite WP_HOME and WP_SITEURL
Plugin URI: http://doublesharp.com/
Description: Allows wp_options values to be overwritten in wp-config.php for MultiSite
Author: Justin Silver
Version: 1.0
Author URI: http://doublesharp.com
License: GPL2
*/

function _ms_config_wp_siteurl( $url = '' ) {
    if (is_multisite()):
        global $blog_id, $current_site;
        $cur_blog_id = defined('BLOG_ID_CURRENT_SITE')? BLOG_ID_CURRENT_SITE : 1;
        $key = ($blog_id!=$cur_blog_id)? $blog_id.'_' : '';
        $constant = 'WP_'.$key.'SITEURL';
        if ( defined( $constant ) )
            return untrailingslashit( constant($constant) );
    endif;
    return $url;
}
add_filter( 'option_siteurl', '_ms_config_wp_siteurl' );

function _ms_config_wp_home( $url = '' ) {
    if (is_multisite()):
        global $blog_id;
        $cur_blog_id = defined('BLOG_ID_CURRENT_SITE')? BLOG_ID_CURRENT_SITE : 1;
        $key = ($blog_id!=$cur_blog_id)? $blog_id.'_' : '';
        $constant = 'WP_'.$key.'HOME';
        if ( defined( $constant ) )
            return untrailingslashit( constant($constant) );
    endif;
    return $url;
}
add_filter( 'option_home',    '_ms_config_wp_home'    );
?> 
```

**配置 wp-config.php**：

将新常量添加到`wp-config.php`. 主站点应使用标准`WP_HOME`，`WP_SITEURL`并且第三级 URL 应使用`WP_{$blog_id}_HOME`和`WP_{$blog_id}_SITEURL`

```
define('WP_HOME',      'http://www.example.local');
define('WP_SITEURL',   'http://www.example.local');
define('WP_2_HOME',    'http://secondary.example.local');
define('WP_2_SITEURL', 'http://secondary.example.local'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T16:14:22.580

There's a similar question being asked here: [Team Development of a Wordpress Site](https://stackoverflow.com/questions/12954788/team-development-of-a-wordpress-site) which I provided a possible solution for. In your case, you may not want to go to that extent (though it would be very flexible); however, you could always look at the portion of the answer that mentions a domain-replacement technique.

I've outlined that solution here: [URL Token Replacement Techniques...](http://www.farfromfearless.com/2010/09/07/url-token-replacement-techniques-for-wordpress-3-0/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T15:40:52.930

您可以在 functions.php 中使用[update_option](http://codex.wordpress.org/Function_Reference/update_option)

```
update_option("siteurl","http://example.com");
update_option("home","http://example.com"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-01T21:46:52.677

我遇到了同样的问题，并且想要一个类似于在 wp-config.php 中定义 WP_HOME 和 WP_SITEURL 的解决方案。

我不能使用插件，因为我正在与 GIT 同步并且不想在我的 repo 中有那个插件，我每次都必须添加插件......我想它可以通过 wp_sitemeta 表在网络范围内激活...但这对我来说并不理想。

我想出了这个解决方案。

确保不同步 wp_blogs、wp_site、wp_sitemeta。然后将此代码添加到以下某处的本地 wp-config.php 中`$table_prefix`：

```
/* Update local database */
mysql_connect( DB_HOST, DB_USER, DB_PASSWORD ) or die( mysql_error() );
mysql_select_db( DB_NAME );

$result = mysql_query("SELECT * FROM `". $table_prefix ."blogs`") or die( mysql_error() );
while( $row = mysql_fetch_array( $result ) )
{
    $id = (1 == $row['blog_id']) ? '' : $row['blog_id'] .'_';
    mysql_query( "UPDATE `". $table_prefix . $id ."options` SET `option_value`='http://". $row['domain'] ."/' WHERE (`option_name`='siteurl' OR `option_name`='home')" ) or die( mysql_error() );
} 
```

这将确保您的网站同步到您的本地 wp_blogs 表。

唯一的缺点是，当您添加新站点时，您确实需要手动将其复制到 wp_blogs 表中并更新其本地 url。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-06-07T14:06:27.307

这个问题太老了，无法回答，但最近我遇到了类似的情况，我必须将我的 wp 站点从暂存迁移到生产，这很痛苦，因为它有 5 个子站点。

经过一整天的挠头，我找到了一个简单而有用的解决方案。

当然，必须对**wp-config.php**进行更改。

除此之外，您必须按照以下步骤操作。

使用以下命令生成数据库转储。

```
mysqldump -u [user name] –p [password] [options] [database_name] [tablename] > [FileName] 
```

之后在任何编辑器中打开该文件。

查找并用新域替换旧域。

现在使用您创建的转储恢复数据库。

```
mysql -u [user name] -p [password] [database name] < [file anme] 
```

# vim - 带有递增数字的 Vim 插入序列

> ID：12958133
> 
> 赞同：4
> 
> 时间：2012-10-18T15:23:58.410
> 
> 标签：vim

在一行中，我希望将其转为：

```
"".format(...) 
```

进入这个：

```
"{0}, {1}, {2}, ..... {n}".format(...) 
```

`n`我希望重复的元素数量在哪里。无需手动插入每个参数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T15:42:32.837

我不知道这种方式是否适合您：

```
"I(cursor here)
".format(...) 
```

执行命令：

```
:r! seq -s, -f "{\%g}" 0 20 
```

然后加入 ( `J`) 3 行。20`n`在你的情况下。

或者`"I".format(...)`

插入模式，`ctrl-R`然后键入`=system("seq -s, -f '{%g}' 0 20")`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T15:46:34.563

用空双引号之间的光标，我会做（for `n`= 5）：

```
i<C-R>=join(map(range(5), 'printf("{%d}", v:val)'), ', ')<CR> 
```

一些*vimgolf*爱好者可能可以进一步浓缩这一点。但我可能会为它编写一个映射（如果需要如此频繁地发生），或者像这样手动进行：

```
5i{0}, <Esc>^f0;<C-A>;2<C-A>;3<C-A>;4<C-A> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T15:59:05.963

我会使用宏，例如：

```
0a{0}, <esc>lqqyF{f"PB<C-a>;q 
```

然后只需使用 n-1 与`@q`. 例如`4@qXX`会给：

```
"{0}, {1}, {2}, {3}, {4}, {5}".format(...) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T08:06:13.247

Windows 中没有“seq”命令，所以我更喜欢这个：

```
:call append(".", map(range(6), '"{".v:val."},"')) 
```

然后加入这些行使用'6J'。

# android - Get rid of ndk build from a project

> ID：12958134
> 
> 赞同：0
> 
> 时间：2012-10-18T15:24:02.663
> 
> 标签：android, android-ndk

I have added ndk support in my project because I needed to convert from one pixel format to another and I thought it would be faster in native code than in java. Now I realized I don't actually need to convert anything so I no longer need the ndk-build in my project. How do I get rid of android building the *.so files that I no longer use?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T15:34:16.767

如下`Eclipse`：

```
Project -> Properties -> Builders 
```

并禁用`CDT`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T15:32:19.400

删除完整的 jni 文件夹。同样从 java 中删除所有本机方法。删除 libs/armeabi 下存在的库

同时删除 obj/local/armeabi

# html - HTML5 Drag and Drop dataTransfer and Chrome

> ID：12958136
> 
> 赞同：10
> 
> 时间：2012-10-18T15:24:06.093
> 
> 标签：html, drag-and-drop

The following code:

```
<!DOCTYPE HTML>
<html>
<head>
<style type="text/css">
#div1 {width:350px;height:70px;padding:10px;border:1px solid #aaaaaa;}
</style>
<script>
function allowDrop(ev)
{
console.log(ev.dataTransfer.getData("Text"));
ev.preventDefault();
}

function drag(ev)
{
ev.dataTransfer.setData("Text",ev.target.id);
}

function drop(ev)
{
ev.preventDefault();
var data=ev.dataTransfer.getData("Text");
ev.target.appendChild(document.getElementById(data));
}
</script>
</head>
<body>

<p>Drag the W3Schools image into the rectangle:</p>

<div id="div1" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
<br>
<img id="drag1" src="img_logo.gif" draggable="true" ondragstart="drag(event)" width="336" height="69">

</body>
</html> 
```

with Firefox get correctly the `dataTransfer` object and returns the image's id (`drag1`) when the `allowDrop` function called by `ondragover` event is executed, but in Chrome `getData` returns an empty string. Is it a bug or Chrome returns a valid `dataTransfer` object only with the `ondrop` event?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-06-18T16:22:20.250

Chrome 没有在 drop 之前设置 dataTransfer。我只是将拖动引用设置在“全局”变量中。:-)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-08-07T15:28:57.587

**除了drop** event之外，您不能在 chrome 中使用**dataTransfer 。**

 **您应该改为声明一个**全局**变量。

对于你的情况试试这个：

```
function drag(ev)
{
   el = ev.target;
   ev.dataTransfer.setData("Text",ev.target.id);
}
function allowDrop(ev)
{
   console.log(el);
   ev.preventDefault();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-07T02:54:47.663

实际上，这在 Chrome 中是非常巧妙的。我有一个简单的页面可以将一些 div 拖到某个容器中。我在**ondragstart**方法中将拖动的 div 元素 id 设置为**dataTransfer 。**我尝试在**ondrop回调中从****dataTransfer**中获取拖动的 div ，然后将其复制到容器中。一切都在本地的 Chrome 中运行良好（我的意思是从资源管理器中打开它，**file://**）。但是当我将它部署到网站时，然后通过**http://**打开它。它不适用于铬。所以我对 Per Digre 使用相同的解决方案。**在dragstart**上设置全局变量，在**dragend**上清理变量。希望对你有帮助！**

# ajax - Mongolab and network latency?

> ID：12958138
> 
> 赞同：2
> 
> 时间：2012-10-18T15:24:10.447
> 
> 标签：ajax, mongodb, network-programming, mlab

I'm just curious, there's a few services like MongoLab where data is hosted on remote servers. Anyone who's worked with databases knows that there's a certain amount of network latency, even when all servers are internal. Is a remote data storage service such as MongoLab a good idea for production environments?

This question is mainly for AJAX based web apps or websites in general.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T15:51:34.077

我发现 MongoLab 非常好。显然，您需要考虑一般的往返行程，并优化它们将最大限度地减少您的整体延迟。

将自己放入与 MongoLab 相同的数据中心也很有意义（您可以选择在哪里）。他们现在还在 Azure 上提供（测试版）服务。

我一直在运行具有高延迟的服务（浏览器、Web 服务器和 Mongo 的三个不同地理区域，它在我的情况下仍然表现良好，因为我的交互不是“健谈”。

您可能知道，Mongo 的设计限制之一是缺乏连接，因此我的数据结构自然而然地适合于简单的 Q&A 数据获取。我不会阅读一个集合，然后使用该信息去查看另一个集合（手动连接）。因此，我不会将延迟成本与这些复杂的交互相加。最坏的情况通常是单个请求/响应（或一系列并行的单个请求/响应查询），因此总共大约 200 毫秒的差异是可以接受的。

但是，当然，您的网络服务器越接近您的数据库，您就会越好。

据推测，如果您花费足够的钱，MongoLab 等人可以为您提供自定义配置，可能您可以在其中拥有本地辅助服务器。

# iphone - XCode: Adding password protection to an existing ios app

> ID：12958141
> 
> 赞同：1
> 
> 时间：2012-10-18T15:24:16.860
> 
> 标签：iphone, objective-c, ios, xcode

I have a huge tabbed bar application which uses storyboards and is already on the app store - but now I am adding in password protection to it.

I have already implemented a settings page in my app in which the user can toggle whether or not a password is required. They can also change their password here.

However, I can't find a solution to the next stage. Here is some code from my App Delegate:

```
-(void)requestPassword {
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    NSString *passwordON = [defaults objectForKey:@"passwordBOOL"];
    if ([passwordON isEqualToString:@"ON"]) {
        NSLog(@"ON");
    }
    else {
        NSLog(@"Off");
    }
} 
```

As you can see, I am detecting whether or not the password is on or off. If the password is on, how do I go to a different view or set up an overlay password entry view? I am not sure if I should have a separate view for this or run some code from the first view of my app.

Any suggestions are greatly appreciated!

# php - xmlhttp.status = 500 前 2 次调用后

> ID：12958142
> 
> 赞同：0
> 
> 时间：2012-10-18T15:24:18.743
> 
> 标签：php, javascript, jquery

我正在创建一个多重下拉选择，作为表单的一部分。

这个想法是，6 个选择级别最终将导致一个值插入到表单字段中。

表单标题中的 javascript

```
 <script type="text/javascript">
    function getInfo(str) 
    {
if (str=="")
  {
  document.getElementById("catTitle").innerHTML="";
  return;
  } 
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("catTitle").innerHTML=xmlhttp.responseText;
    }
  }
xmlhttp.open("GET","cat_title.php?q="+str,true);
xmlhttp.send();
}
</script> 
```

我为每个选择创建了 1 个脚本——我是 javascript/jquery 的新手，知道的很少，我还没有看到一种简化的方法，但是，使用一个脚本并多次调用——结果，我调用 getInfo( ) 用于第一个，getInfo2() 用于第二个，getInfo3() 用于第三个，依此类推。

在文件的正文中，我开始了一个表格。在表单内，我有我的选择框——并且想使用 onchange='function()' 来调用每个值，并将导致将值插入到

这是现在的选择。

```
Select Category : <br>
                            <select  name="level1" id="level1" onchange="getInfo(this.value)">
                                <option></option>
                                <?
                                $sql="SELECT * FROM Ebay_Category WHERE Level='1' ORDER BY Category";
                                $results=mysql_query($sql);
                                while($row=mysql_fetch_array($results)){
                                    if($row['CategoryID']!=$lastrowid){
                                    echo "<option value='".$row['CategoryID']."' >".$row['Category']."</option>";
                                    $lastrowid=$row['CategoryID'];
                                    }
                                }

                                ?>      

                                </select>
                                <br>

                                <span id="catTitle"></span><br>
                                <span id="catTitle2"></span><br>
                                <span id="catTitle3"></span><br>
                                <br><br> 
```

这是我的第一个 cat_title.php 文件中的代码，每个都更改下一个创建的选择框上的 id；（我还利用每次通话来跟踪会话时间，所以我可以让它在 10 分钟后超时。——我也养成了收集用户名的习惯，所以我以后可以很容易地添加到日志文件中，虽然我看不到将日志文件添加到简单的选择中 - 我只是想解释一下，以防这有助于我达到我不知道的调用限制）

```
 <?php
    include "signup/include/session.php";
include "signup/include/z_db.php";// database connection details stored here
$gap=10; // change this to change the time in minutes, This is the time for which active users are collected. 
$tm=date ("Y-m-d H:i:s", mktime (date("H"),date("i")-$gap,date("s"),date("m"),date("d"),date("Y")));
$ListerID=$_SESSION['userid'];
mysql_connect("$servername", "$dbusername", "$dbpassword")or die("cannot connect"); 
mysql_select_db("$dbname")or die("cannot select DB");
$userInfo=(mysql_fetch_array(mysql_query("SELECT * FROM plus_signup WHERE userid='$ListerID'")));
$UserLevel=$userInfo['users_level'];
//check to see if leaf, if yes - echo result only

$vx=$_GET["q"];
$LeafCheckSQL="SELECT * FROM Ebay_Category WHERE ParentID='".$vx."' ORDER BY Category";
$result=mysql_query($LeafCheckSQL);

echo "<select id=\"lev2\" onchange=\"getInfo2(this.value)\">";
while ($row=mysql_fetch_array($result)){
    echo "<option value='".$row['CategoryID']."'>".$row['Category']."</option>";
}
    echo "</select>";
//}
?> 
```

用于构建第二个下拉菜单，一旦被选中，就可以构建第三个下拉菜单。

我添加了 alert('messages') 来帮助我跟踪问题，并且在第三个下拉列表中，当我调用 getInfo(str) 调用时——它会逐步完成整个过程，但需要的 xmlhttp.readyState为 4，而需要为 200 的 xmlhttp.status，首先分别显示为 2:500，然后似乎是对 onreadystatechange 的重试，它变为 4:500 --

这是另一个奇怪的事情，如果它是一个限制 - 为什么我可以使用表单选择 1 2 就好了，每次调用 4:200，即使在第 3 次失败之后也是如此。我很迷茫。

我正在添加尽可能多的信息，在这个项目之后，我将认真研究学习 jquery，因为它似乎非常有用。

但是，如果有人将我视为绝对的初学者，并让我了解我做错了什么，以及我能做些什么来解决这个问题，我会很高兴。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T15:39:51.293

答案很简单——下次更彻底。

我发现我新创建的 cat_title.php 文件被上传到服务器，权限太低——我无法从浏览器中读取它们。

在filezilla中通过简单的右键单击修复，并更改了权限。

感谢任何花时间尝试为我解决此问题的人，对于给我带来的麻烦，我深表歉意。

# json - mongodb find() 顺序与模式顺序不同

> ID：12958144
> 
> 赞同：1
> 
> 时间：2012-10-18T15:24:21.723
> 
> 标签：json, mongodb

```
db.blog.save({ title : "My First Post", author: {name : "Jane", id : 1}}) 
```

由于键顺序不匹配，下面应该返回什么？

```
db.blog.find({"author" : {"id" : 1, "name" : "Jane"}}) 
```

编辑：

根据官方 mongodb[文档](http://www.mongodb.org/display/DOCS/Dot+Notation+%28Reaching+into+Objects%29)，keyorder 必须匹配（至少 for `findOne()`）。它不会使用返回仅匹配对象`db.blog.findOne({"author" : {"id" : 1, "name" : "Jane"}})`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T15:33:12.330

查询选择器中键的顺序无关紧要。添加要搜索的文档时，它不需要与您使用的键的顺序相匹配。

**更新**

如果您只是在寻找一种基于嵌入文档的与顺序无关的查询方式，则需要使用点表示法：

```
db.blog.find({"author.id" : 1, "author.name" : "Jane"}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T15:33:09.067

根据[JSON 定义](https://www.rfc-editor.org/rfc/rfc4627)，键顺序无关紧要。

```
An object is an unordered collection of zero or more name/value pairs 
```

我对 MongoDB 一无所知，但我认为它遵循 JSON 的正常规则，此时它应该返回“My First Post”条目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T16:51:27.043

通常，正如@JohnnyHK 所述，查询键的顺序无关紧要，除了您显示的示例：

```
db.blog.find({"author" : {"id" : 1, "name" : "Jane"}}) 
```

此查询不会返回不完全匹配的结果。使用他显示的查询：

```
db.blog.find({"author.id" : 1, "author.name" : "Jane"}) 
```

将独立于关键顺序。造成这种差异的原因是因为在第一个查询中您正在搜索对象，因此查询器实际上搜索的是该对象（用最简单的术语）。这同样适用于在包含一组子文档的字段上创建的索引，顺序很重要。

# c++ - 如何在 C/C++ 中模拟中断？

> ID：12958151
> 
> 赞同：3
> 
> 时间：2012-10-18T15:24:42.637
> 
> 标签：c++, c, embedded, simulation, interrupt

我正在尝试设计一个人工学习单元。自然，我想在微控制器实现之前模拟模型。模拟的主要问题是尝试模拟微控制器传感器中断（例如使用 PIC18）。我并没有考虑实际造成中断，而是试图用代码模拟一个中断。

我想这可以归结为基本的 C/C++ 信息。如果可以，您如何在其中实现/模拟/模拟中断？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-18T15:27:06.907

你可以使用信号

见这里： [http ://en.cppreference.com/w/cpp/utility/program/signal](http://en.cppreference.com/w/cpp/utility/program/signal)

您可以使用您的操作系统来发送信号。

# javascript - None regular width for more than six list elements

> ID：12958159
> 
> 赞同：0
> 
> 时间：2012-10-18T15:25:00.663
> 
> 标签：javascript, jquery, css

i have some problem with my jquery, i need to set up function for two kinds of list. First if elements in this list lenght 6 or less, second when it's more than 6\. So i have this function but it's not working, can u help me?

```
if (
   $('.producer_other_articles ul').children('li').length < 7) {
   $('.producer_series_info').css('width','390px');
}
else {
   $('.producer_series_info').css('width','980px');
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T15:28:27.543

尝试[`size()`](http://api.jquery.com/size/)

```
if (
   $('.producer_other_articles li').size() < 7) {
      $('.producer_series_info').css('width','390px');
}
else {
   $('.producer_series_info').css('width','980px');
} 
```

# javascript - jCarouselLite container with round corners

> ID：12958160
> 
> 赞同：0
> 
> 时间：2012-10-18T15:25:04.997
> 
> 标签：javascript, html, css

I dramatically need help with my slider. It must have round corners. I'm using jCarousellLite, which code you can find here: [http://www.gmarwaha.com/jquery/jcarousellite/js/jcarousellite_1.0.1.js](http://www.gmarwaha.com/jquery/jcarousellite/js/jcarousellite_1.0.1.js) .

My own code:

```
<script type="text/javascript">
$(function() {
$(".newsticker-jcarousellite").jCarouselLite({
        vertical: true,
        visible: 6,
        auto:1000,
        speed:500
    });
});

</script> 
```

```
 <div class="newsticker-jcarousellite" style="float:left;width:120px;border-top-left-radius:20px">
                <ul>
                    <li><img style="width:110px;height:165px" src="http://www.minusport.ee/files/images/reklaam.jpg" /></li>
                    <li><img style="width:110px;height:165px" src="http://www.minusport.ee/files/images/reklaam.jpg" /></li>
                    <li><img style="width:110px;height:165px" src="http://www.minusport.ee/files/images/reklaam.jpg" /></li>
                    <li><img style="width:110px;height:165px" src="http://www.minusport.ee/files/images/reklaam.jpg" /></li>
                    <li><img style="width:110px;height:165px" src="http://www.minusport.ee/files/images/reklaam.jpg" /></li>
                    <li><img style="width:110px;height:165px" src="http://www.minusport.ee/files/images/reklaam.jpg" /></li>
                    <li><img style="width:110px;height:165px" src="http://www.minusport.ee/files/images/reklaam.jpg" /></li>
                    <li><img style="width:110px;height:165px" src="http://www.minusport.ee/files/images/reklaam.jpg" /></li>
                </ul>
            </div> 
```

The border radius for the div doensnt work, and I know why, but I do not know how to fix this.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T15:27:07.157

尝试隐藏溢出：

```
<div class="newsticker-jcarousellite" style="float:left;width:120px;border-top-left-radius:20px;overflow:hidden"> 
```

# iphone - 使用文档目录中的文件以编程方式打开 ibook

> ID：12958162
> 
> 赞同：1
> 
> 时间：2012-10-18T15:25:08.033
> 
> 标签：iphone, ios, ipad, ibooks, uidocumentinteraction

是否可以在没有任何 UIDocumentInteractionController 的情况下自动在我的文档目录中打开一个 .ibooks 文件？也许通过操纵网址或类似的东西？

我尝试通过共享应用程序打开它，但效果不佳：

```
NSString *filePath = [self.serviceMedia pathToIbook];
NSURL *url = [NSURL filePath];
[[UIApplication sharedApplication] openURL:url]; 
```

顺便说一句：网址有效且不为零，并且以“file：//var ...”开头

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T15:44:11.823

iBooks 有一个未记录的**ibooks** URL 方案。这意味着您可以使用类似`[NSURL URLWithString:@"ibooks://"]`.

但是，没有关于如何将特定文件传递到此 URL 的文档。所以基本上，没有记录在案的方法来做你所要求的。

尽管您有要求，**但 UIDocumentInteractionController**是执行此操作的正确方法。这是 Apple 希望您这样做的方式。另外，使用**UIDocumentInteractionController**的好处是让用户决定如何处理文件。

# php - MySQLi：从表中获取所有内容，结果具有传递引用

> ID：12958164
> 
> 赞同：2
> 
> 时间：2012-10-18T15:25:16.780
> 
> 标签：php, arrays, reference, mysqli, fetch

我在使用 MySQLi 时遇到问题，我想创建一个函数以将数据库中的所有用户作为数组返回。

这里的代码：

```
public function getAll() {
    $statement = $this->database->prepare('SELECT `id`, `email`, `firstname`, `lastname`, `last_time`, `type`, `activated`, `enabled` FROM `users` ORDER BY `id`');
    $statement->execute();
    $statement->bind_result($result['id'], $result['email'], $result['firstname'], $result['lastname'], $result['last_time'], $result['type'], $result['activated'], $result['enabled']);

    $users = array();

    while($statement->fetch()) {
        $users[$result['id']] = $result;
    }

    return $users;
} 
```

问题是`&$result`有一个 reference `&`，所以当`$users`Array 被填满时。每次执行 while 循环时，先前插入的记录将更新为`&$result`变量中的最后一个值。因此，总体结果`$users`将包含每条记录的所有相同数据的列表。

那么如何从`&$result`变量中删除引用呢？

它通过将每一列自己放在一个新数组中来工作：

```
while($statement->fetch()) {
    $users[$result['id']] = array($result['id'], $result['email'], ..etc);
} 
```

但我想这太多了，必须有一个更简单的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T15:32:10.397

尝试像这样取消它：

```
$users[$result['id']] = unserialize(serialize($result)); 
```

# r - 按因子水平分割的切割函数

> ID：12958170
> 
> 赞同：5
> 
> 时间：2012-10-18T15:25:55.870
> 
> 标签：r

我的剪切功能有问题。我有这种情况：

```
 codice
1 11GP2-0016
2 11GP2-0016
3 11GP2-0016
4  11OL2-074
5  11OL2-074 
```

我想要一个新的变量“campione”，由变量“codice”分割，如下所示：

```
 codice campione
1 11GP2-0016    [1,3]
2 11GP2-0016    [1,3]
3 11GP2-0016    [1,3]
4  11OL2-074    (4,5]
5  11OL2-074    (4,5] 
```

如何使用 cut 函数拆分“代码”创建一个变量，显示从 1 到 3 我有相同的代码，从 4 到 5 相同的代码等等？

我需要解决另一个问题。对于同样的问题，我想获得：

```
 codice campione
1 11GP2-0016    [11GP2-0016,11GP2-0016,11GP2-0016]
2 11GP2-0016    [11GP2-0016,11GP2-0016,11GP2-0016]
3 11GP2-0016    [11GP2-0016,11GP2-0016,11GP2-0016]
4  11OL2-074    (11OL2-074,11OL2-074]
5  11OL2-074    (11OL2-074,11OL2-074] 
```

有什么解决方案可以做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T15:51:30.207

使用您的数据：

```
d <- read.table(text = "1 11GP2-0016
2 11GP2-0016
3 11GP2-0016
4  11OL2-074
5  11OL2-074", row.names = 1, stringsAsFactors = FALSE)
names(d) <- "codice" 
```

这是一个稍微复杂的示例，使用`rle()`：

```
drle <- with(d, rle(codice)) 
```

这给了我们运行长度`codice`：

```
> drle
Run Length Encoding
  lengths: int [1:2] 3 2
  values : chr [1:2] "11GP2-0016" "11OL2-074" 
```

它是`$lengths`我用来创建两个指示的组件，即开始 ( `ind1`) 和结束 ( `ind2`) 位置：

```
ind1 <- with(drle, rep(seq_along(lengths), times = lengths) +
                     rep(c(0, head(lengths, -1) - 1), times = lengths))
ind2 <- ind1 + with(drle, rep(lengths- 1, times = lengths)) 
```

然后我把这些粘贴在一起：

```
d <- transform(d, campione = paste0("[", ind1, ",", ind2, "]")) 
```

给予

```
> head(d)
      codice campione
1 11GP2-0016    [1,3]
2 11GP2-0016    [1,3]
3 11GP2-0016    [1,3]
4  11OL2-074    [4,5]
5  11OL2-074    [4,5] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T15:57:47.027

这会做到的。如果需要，您可以添加括号/括号。

```
dat <- read.table(text='codice
1 11GP2-0016
2 11GP2-0016
3 11GP2-0016
4  11OL2-074
5  11OL2-074', header=TRUE)

within(dat, 
    campione <- with(rle(as.character(codice)), {
        starts <- which(! duplicated(codice))
        ends <- starts + lengths - 1
        inverse.rle(list(values=paste(starts, ends, sep=','), lengths=lengths))
    })
)

#       codice campione
# 1 11GP2-0016      1,3
# 2 11GP2-0016      1,3
# 3 11GP2-0016      1,3
# 4  11OL2-074      4,5
# 5  11OL2-074      4,5 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-18T22:46:12.683

另一种方法是使用`rank`：

```
left <- rank(factor(d$codice), ties.method = "min")
right <- rank(factor(d$codice), ties.method = "max")
d$campione <- paste("[", left, ",", right, "]", sep = "") 
```

# php - Yii 会话不工作

> ID：12958171
> 
> 赞同：1
> 
> 时间：2012-10-18T15:25:57.420
> 
> 标签：php, session, yii, webserver, session-variables

当我将网站上传到在线服务器时，出现了一些问题。用户身份验证在我的本地计算机上工作，但是当我尝试将其上传到服务器时，它不起作用。当我登录时，它会将我重定向回登录页面。

我已经签出并指出当页面刷新时，会话中的用户信息会被清除并重定向回登录页面。

```
$this->setState('username', $user->username); 
```

setState 方法也没有在下一页提供信息。

请帮助我解决可能的问题。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T13:40:29.683

确保您的会话是在 php.ini config "session.auto_start = 1" 中自动启动的，或者是由 session_start() 或 Yii 类似函数手动启动的

```
$session=new CHttpSession;
  $session->open(); 
```

并通过 session_status() 函数检查您的会话状态。

# java - 如何从 AutoCAD 中创建的 DXF 中提取组件？

> ID：12958173
> 
> 赞同：0
> 
> 时间：2012-10-18T15:26:10.977
> 
> 标签：java, parsing, autocad, cad, dxf

我试图找到一些方法，我可以从 AutoCAD 创建的 .dxf 文件中获取一些具体组件。具体来说，将有一个在 AutoCAD 中绘制的建筑物，其中指定了窗户、门和其他类似的组件。

我从ribbonsoft 或kabeja 中找到了一些库，如dxflib，它们能够提取直线、弧线等。但是，如果我可以直接识别窗户、门等组件，那将非常有帮助。我需要它的原因是，我必须在我的应用程序中将现有建筑物转换为我自己的数据模型（抽象一些不必要的属性）。

有这样的解决方案吗？不管是免费的还是付费的。解决方案是否使用 C/C++、Java、Lisp 也无关紧要......（最好是 java :)）

非常感谢您的回答和帮助:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T19:31:39.263

使用下面的代码......它会帮助你。它在 C# 中

```
List<Entity> tListEntities = new List<Entity>();
Database database = HostApplicationServices.WorkingDatabase;
using (Transaction transaction = database.TransactionManager.StartTransaction())
{
BlockTableRecord btRecord = (BlockTableRecord)transaction.GetObject(SymbolUtilityServices.GetBlockModelSpaceId(database), OpenMode.ForRead);
foreach (ObjectId id in btRecord)
{
    tListEntities.Add((Entity)transaction.GetObject(id, OpenMode.ForRead));
}
transaction.Commit(); 
```

}

# sitecore - 导出用户权限？

> ID：12958176
> 
> 赞同：3
> 
> 时间：2012-10-18T15:26:27.657
> 
> 标签：sitecore, sitecore6

有谁知道导出用户和角色权限的任何方法，然后在 Sitecore 的另一个副本上重新导入它们？

我进行了搜索，并且编写了一些代码来执行此操作，似乎没有任何立即可用的东西...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T00:20:57.833

权限实际上存储在*项目本身*上，而不是 Role 或 User 对象。有两种方法可以像斯蒂芬提到的那样导出对象，对您授予/撤销访问权限的项目执行导出/导入，而不是角色或用户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T16:54:32.873

有两种方法可以做到这一点..您可以制作一个 Sitecore 包并将它们添加到其中，另一种方法是使用序列化，它将文本文件写入磁盘，然后您可以将其恢复到另一个 sitecore 实例。

选择很大程度上取决于您必须移动多少用户/角色。如果它只有几个，你可以使用 Sitecore 包，但如果你有很多，你可能会想要使用序列化来做到这一点。

可以在此处找到有关每个主题的更多信息。

*   [序列化指南](http://sdn.sitecore.net/Reference/Sitecore%206/Serialization%20Guide.aspx)
*   [包裹信息](http://sdn.sitecore.net/Reference/Sitecore%206/Package%20Designer%20Administrator%20Guide.aspx)

# javascript - 根据字符数突出显示子文本

> ID：12958178
> 
> 赞同：3
> 
> 时间：2012-10-18T15:26:29.667
> 
> 标签：javascript, jquery

基本思路是高亮输入中指定长度值后的字符，同时显示提示信息。

开始了：

```
<div id="test_box">
   <input type="text" id="text_text">
</div> 
```

CSS：

```
 #notice {
    width: 140px;
    height: 40px;
    background-color: black;   

    }
 #test_box {
       width: 400px;
       height: 400px;

 } 
```

和 jQuery 代码：

```
$(document).ready(function() {
        var length = $('#text_text').val().length; 
        var char_limit = 5;       
        $('#text_text').bind('keyup', function() {
            new_length = $('#text_text').val().length;
            if (new_length > char_limit) {
              $('#text_text').css('color','red');
                $('#test_box').append('<div id="notice"> There are limit of character for home page title of this field </div>'); // wrong too much divs :/

            } else {
               $('#text_text').css('color', 'black');
               $('#notice').hide(); //wrong             
            }
        });
 }); 
```

在`char_limit`超出之后突出显示的字符的那一刻，我需要的是仅突出显示那些之后的字符`char_limit`。并且还注意到每次输入字符时都会添加块，我认为我应该手动创建该 div 或者可能不创建该 div，并在`char_limit`超出时以某种方式显示它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T16:01:26.123

突出显示文本的某些部分并非不可能，因为您可以通过选择突出显示它。

看看这个：http: [//jsfiddle.net/9BrpD/3/](http://jsfiddle.net/9BrpD/3/)

```
$(document).ready(function(){
    var input = $('#text_text');
    var warning = $('#warning');
    input.on('keyup', function(){
       var val = $(this).val();
        if ( val.length > 3 ) {
            warning.html('hello').css('display', 'block');
            l = val.length
            var input = document.getElementById("text_text");
            input.setSelectionRange(l-3, l);
            input.focus();
        }
        else {
             warning.css('display', 'none');
        }
    });   

});​ 
```

它还解决了您重复 div 的问题。但是，我觉得这个解决方案对用户不是很友好。您可以尝试将焦点移到输入字段之外，但仍然不能完全令人满意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T15:49:04.947

我不确定“突出显示”超过 char_limit 的字符是什么意思。如果您想将样式应用于输入文本的一部分，那么这是不可能的：样式将应用于整个输入。您可以尝试使用 span 和一些 javascript 来模拟输入字段来监听键盘事件。这在[这个与你的类似问题的答案中得到了](https://stackoverflow.com/a/3121753/39622)解释。

对于通知，确实，您不应该每次都添加它。它应该在您的 HTML 中，带有 css“display:none”，并在适当的时候显示和隐藏。

```
<div id="test_box">
    <input type="text" id="text_text">
    <div id="notice"> There are limit of character for home page title of this field </div>
</div> 
```

--

```
#notice {
    width: 140px;
    height: 40px;
    background-color: black;   
    display:none;
} 
```

--

```
$(document).ready(function() {
    var length = $('#text_text').val().length; 
    var char_limit = 5;       
    $('#text_text').bind('keyup', function() {
        new_length = $('#text_text').val().length;
        if (new_length > char_limit) {
          $('#text_text').css('color','red');
            $('#notice').show();

        } else {
           $('#text_text').css('color', 'black');
           $('#notice').hide();          
        }
    }); 
```

});

这是带有该代码[的JSFiddle 。](http://jsfiddle.net/Bu8bK/1/)

# asp.net - Sql更新表

> ID：12958179
> 
> 赞同：0
> 
> 时间：2012-10-18T15:26:34.190
> 
> 标签：asp.net, sql, visual-studio-2010

我正在使用以下代码更新用户信息，但出现错误。谁能指出我出了什么问题。我正在为 Web 服务编写此代码。

```
public string UpdateUser(int uID, string fName,
            string lName, string password, string emailAddress)
        {
            // Create connection object
            int ix = 0;
            string rTurn = "";
            OleDbConnection oleConn = new OleDbConnection(connString);
            try
            {
                oleConn.Open();
                string sql = "UPDATE [User] SET [fName]=@fName, [lName]=@lName, [password]=@password, [emailAddress]=@emailAddress" + "WHERE [ID]=@uID";
                OleDbCommand oleComm = new OleDbCommand(sql, oleConn);

                oleComm.Parameters.Add("@fName", OleDbType.Char).Value = fName;
                oleComm.Parameters.Add("@lName", OleDbType.Char).Value = lName;
                oleComm.Parameters.Add("@password", OleDbType.Char).Value = password;
                oleComm.Parameters.Add("@emailAddress", OleDbType.Char).Value = emailAddress;
                oleComm.Parameters.Add("@uID", OleDbType.Integer).Value = uID;

                ix = oleComm.ExecuteNonQuery();
                if (ix > 0)
                    rTurn = "User Updated";
                else
                    rTurn = "Update Failed";
            }
            catch (Exception ex)
            {
                Console.WriteLine(ex.ToString());
                rTurn = ex.ToString();
            }
            finally
            {
                oleConn.Close();
            }
            return rTurn;
        } 
```

**错误** **当我尝试更新用户时出现以下错误。**

```
 <string>
System.Data.OleDb.OleDbException: Syntax error (missing operator) in query expression '@emailAddressWHERE [ID]=@uID'.
       at System.Data.OleDb.OleDbCommand.ExecuteCommandTextErrorHandling(OleDbHResult hr)
       at System.Data.OleDb.OleDbCommand.ExecuteCommandTextForSingleResult(tagDBPARAMS dbParams, Object& executeResult)
       at System.Data.OleDb.OleDbCommand.ExecuteCommandText(Object& executeResult)
       at System.Data.OleDb.OleDbCommand.ExecuteCommand(CommandBehavior behavior, Object& executeResult)
       at System.Data.OleDb.OleDbCommand.ExecuteReaderInternal(CommandBehavior behavior, String method)
       at System.Data.OleDb.OleDbCommand.ExecuteNonQuery()
       at UserManagement.UserRegistration.UpdateUser(Int32 uID, String fName, String lName, String password, String emailAddress) in C:\Users\smartamrit\Desktop\SystemSoftware\UserManagement\UserRegistration.asmx.cs:line 97
</string> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T15:27:42.487

您需要先添加额外的空间`WHERE`

```
string sql = @"UPDATE [User] 
              SET [fName]=@fName, 
                  [lName]=@lName, [password]=@password, 
                  [emailAddress]=@emailAddress" + " WHERE [ID]=@uID";
                                                   ^ here 
```

或者如果你没有连接它我看不出有什么区别，为什么不直接做

```
string sql = @"UPDATE [User] 
               SET [fName]=@fName, 
                   [lName]=@lName, 
                   [password]=@password, 
                   [emailAddress]=@emailAddress 
               WHERE [ID]=@uID"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T15:27:32.907

该错误是不言自明的：

```
'@emailAddressWHERE [ID]=@uID' 
```

`@emailAddress`和之间没有空格`WHERE`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-18T15:27:34.060

`WHERE`您需要在此处之前有一个空格

```
@emailAddress" + " WHERE 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-18T15:38:20.070

您需要在开始之前添加空间。

您可以像下面提到的那样编写查询。

```
string sql = "UPDATE [User] SET [fName]=@fName, [lName]=@lName, 
    [password]=@password, [emailAddress]=@emailAddress" +" "+ "WHERE [ID]=@uID"; 
```

# python - 管理任务的 Google 应用引擎数据存储超时

> ID：12958181
> 
> 赞同：1
> 
> 时间：2012-10-18T15:26:43.407
> 
> 标签：python, google-app-engine

我为我的谷歌应用程序创建了一个后端，如下所示：

```
backends:
- name: dbops
  options: dynamic 
```

我为它创建了一个管理处理程序：

```
- url: /backend/.*
  script: backend.app
  login: admin 
```

现在我知道管理作业应该能够永远运行，并且我正在使用 TaskQueue 启动这项作业，但由于某种原因我的不是。我的工作只是从一个更大的表在数据存储中创建一个汇总表。该表包含大约 12000 条记录，它需要几分钟才能处理开发服务器上的作业，但它工作正常。当我将代码推送到 apppot 并尝试让它运行相同的工作时，我得到了看起来像数据存储超时的东西。

```
Traceback (most recent call last):
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.5.1/webapp2.py", line 1536, in __call__
    rv = self.handle_exception(request, response, e)
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.5.1/webapp2.py", line 1530, in __call__
    rv = self.router.dispatch(request, response)
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.5.1/webapp2.py", line 1278, in default_dispatcher
    return route.handler_adapter(request, response)
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.5.1/webapp2.py", line 1102, in __call__
    return handler.dispatch()
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.5.1/webapp2.py", line 572, in dispatch
    return self.handle_exception(e, self.app.debug)
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.5.1/webapp2.py", line 570, in dispatch
    return method(*args, **kwargs)
  File "/base/data/home/apps/s~myzencoder/dbops.362541511260492787/backend.py", line 626, in get
    for asset in assets:
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/ext/db/__init__.py", line 2314, in next
    return self.__model_class.from_entity(self.__iterator.next())
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/datastore/datastore_query.py", line 2816, in next
    next_batch = self.__batcher.next()
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/datastore/datastore_query.py", line 2678, in next
    return self.next_batch(self.AT_LEAST_ONE)
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/datastore/datastore_query.py", line 2715, in next_batch
    batch = self.__next_batch.get_result()
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/api/apiproxy_stub_map.py", line 604, in get_result
    return self.__get_result_hook(self)
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/datastore/datastore_query.py", line 2452, in __query_result_hook
    self._batch_shared.conn.check_rpc_success(rpc)
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/datastore/datastore_rpc.py", line 1224, in check_rpc_success
    raise _ToDatastoreError(err)
Timeout: The datastore operation timed out, or the data was temporarily unavailable. 
```

有人对如何使这项工作有任何建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T17:13:07.597

虽然后端请求可以运行很长时间，但查询只能运行 60 秒。您必须使用游标遍历查询结果。

Mapreduce 将通过并行执行查询更快地为您提供结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T15:53:25.127

在生产中，您使用 HR 数据存储，您可能会遇到争用问题。见这篇文章。 [https://developers.google.com/appengine/articles/scaling/contention?hl=nl](https://developers.google.com/appengine/articles/scaling/contention?hl=nl)

并查看 mapreduce 以创建报告。也许这是一个更好的解决方案。

# .net - Java Web服务响应是编码的，所以.Net无法理解

> ID：12958184
> 
> 赞同：0
> 
> 时间：2012-10-18T15:26:51.987
> 
> 标签：.net, web-services, encoding

我正在调用一个 Java Web 服务，它返回一些数据。当我在 Fiddler 中查看返回的结果时，它看起来像这样：

```
HTTP/1.1 200 OK
Date: Thu, 18 Oct 2012 15:14:03 GMT
Server: Apache
Keep-Alive: timeout=300, max=99
Connection: Keep-Alive
Transfer-Encoding: chunked
Content-Type: text/xml; charset=UTF-8
Content-Language: en

46f
<?xml version="1.0" encoding="utf-8"?>
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:cre="http://www.example.org/getOrderList/">
   <soapenv:Header/>
   <soapenv:Body>
      <cre:getOrderListResponse1 status="success">
          <GetOrderList company="LO" OrderNumber="0423180" CustomerNumber="2150" Branch="000" customerReference="1001" orderStatus="cancelled" suspendCode=""/>
      </cre:getOrderListResponse1>
   </soapenv:Body>
</soapenv:Envelope>

0 
```

Fiddler 报告说“响应已编码，可能需要在检查前解码。”

我假设标题和正文之间的 4F6 和结束的 0 端正在使.Net 无法处理结果。

有什么想法可以解决这个问题吗？

编辑：看来问题可能是我正在使用 HTTP 1.1 调用服务，并且服务正在返回 HTTP 1.0。知道如何强制服务使用 HTTP 1.0 调用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T19:23:54.063

事实证明你是完全正确的，LB 这是一个 XY 问题。

问题最终是响应中的命名空间不正确。

```
<soapenv:Envelope 
    xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"
    xmlns:cre="http://www.example.org/getOrderList/"> 
```

需要是

```
<soapenv:Envelope 
    xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"
    xmlns:cre="http://www.example.org/LathamIntOE/"> 
```

一旦在 Java 服务中进行了更改，它就可以正常工作。

# android - 应用小部件中的 AdapterViewFlipper：setPendingIntentTemplate() 和 setOnClickFillInIntent() 不起作用

> ID：12958186
> 
> 赞同：1
> 
> 时间：2012-10-18T15:27:01.367
> 
> 标签：android, android-adapterview, android-appwidget

我正在将我的应用小部件中的 ListView 更改为 AdapterViewFlipper。问题是，我需要处理一个项目的点击。它完美地使用 setPendingIntentTemplate() 为整个 ListView 设置待处理的意图模板，并使用 setOnClickFillInIntent() 为其每个项目设置一个 fillInIntent。但是现在，有了 AdapterViewFlipper，它就不再起作用了。我错过了什么吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-18T16:42:45.603

您不能使用项目的根视图的 id 调用 setOnClickFillInIntent()。请改用任何子视图。

# php - phpunit 在 yii 框架项目中不起作用

> ID：12958191
> 
> 赞同：0
> 
> 时间：2012-10-18T15:27:10.753
> 
> 标签：php, yii, phpunit

我今天早上一直坚持想弄清楚这一点，但没有运气。

我在测试/单元下创建了一个测试

```
<?php

  class DbTest extends CTestCase {

    public function testConnection() {
  $this->assertTrue( true );
    }
  }

?> 
```

当我在终端中运行它时

```
$ cd tests
$ phpunit unit/DbTest.php 
```

我收到此错误：

```
PHPUnit 3.7.8 by Sebastian Bergmann.

Function 'phpunit_autoload' not found (function 'phpunit_autoload' not found or invalid function name) 
```

我的 phpunit 版本是 3.7.8

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T10:33:21.447

以下事情对我来说效果很好。谷歌搜索发现。 [http://www.yiiframework.com/forum/index.php/topic/37294-yii-unit-test-not-working/](http://www.yiiframework.com/forum/index.php/topic/37294-yii-unit-test-not-working/)

framework/test/CTestCase.php 中的旧代码，注释掉。

```
 require_once('PHPUnit/Util/Filesystem.php'); // workaround for PHPUnit <= 3.6.11
   require_once('PHPUnit/Autoload.php');
   spl_autoload_unregister('phpunit_autoload');
   Yii::registerAutoloader('phpunit_autoload'); 
```

并改成这个

```
require_once('PHPUnit/Runner/Version.php');
require_once('PHPUnit/Util/Filesystem.php'); // workaround for PHPUnit <= 3.6.11
require_once('PHPUnit/Autoload.php');
if (in_array('phpunit_autoload', spl_autoload_functions())) { // PHPUnit >= 3.7 'phpunit_alutoload' was obsoleted
spl_autoload_unregister('phpunit_autoload');
Yii::registerAutoloader('phpunit_autoload'); 
```

}

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T18:35:44.490

这是一个[已知的错误](https://github.com/yiisoft/yii/issues/1563)。

你需要[改变 autoloader](http://www.yiiframework.com/forum/index.php/topic/36320-phpunit-not-working-with-yii-ctestcase-phpunit-autoload-not-found/)的

或者

[将 PHPUnit 降级到 3.7.1](https://stackoverflow.com/questions/1569012/how-to-install-an-older-version-of-phpunit-through-pear)

# woocommerce - 在 woocommerce 中按订单显示自定义字段

> ID：12958193
> 
> 赞同：16
> 
> 时间：2012-10-18T15:27:18.513
> 
> 标签：woocommerce

我在网上商店工作并遵循本教程[http://wcdocs.woothemes.com/snippets/tutorial-customising-checkout-fields-using-hooks-and-filters/](http://wcdocs.woothemes.com/snippets/tutorial-customising-checkout-fields-using-hooks-and-filters/)将一些客户字段添加到我的帐单中。

```
// Hook in
add_filter( 'woocommerce_checkout_fields' , 'custom_override_checkout_fields' );

// Our hooked in function - $fields is passed via the filter!
function custom_override_checkout_fields( $fields ) {
 $fields['billing']['billing_gls_name'] = array(
    'label'     => __('Name for pickup person', 'woocommerce'),
'placeholder'   => _x('Name', 'placeholder', 'woocommerce'),
'required'  => true,
'class'     => array('form-row-wide'),
'clear'     => true
 );

 return $fields;
} 
```

这增加了我的领域。到目前为止，一切都很好。所以我的问题是：

如何在订单视图中查看这个新字段？计费详细信息仅显示通常的计费字段。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-21T15:06:01.483

第一个答案（Cesar）接近正确。如果有人遇到这个旧帖子试图找出相同的东西，下面是在原始海报给出的代码之后插入您的functions.php文件所需的代码，根据他/她提供的变量量身定制。请注意，他们使用字段名称“billing_gls_name”，并且在我们的新函数中将其引用为“_billing_gls_name”。开头的额外“_”是必要的。这适用于运行 WooCommerce 2.0.3 的 Wordpress 3.5.1。

```
function your_custom_field_function_name($order){
    echo "<p><strong>Name of pickup person:</strong> " . $order->order_custom_fields['_billing_gls_name'][0] . "</p>";
}

add_action( 'woocommerce_admin_order_data_after_billing_address', 'your_custom_field_function_name', 10, 1 ); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-09-02T13:22:53.903

在定义您的自定义字段（您在上面提到的代码中所做的）之后，将下面提到的代码添加到：

1.  处理您的领域

2.  将其作为 Order 元数据保存在数据库中

3.  在 Woocommerce-> 订单部分的“订单详细信息”中显示它

**处理您的领域：**

```
add_action('woocommerce_checkout_process', 'my_custom_checkout_field_process');

function my_custom_checkout_field_process() {

if (!$_POST['billing']['billing_gls_name']) {
    wc_add_notice(__('Please tell us the Location Type that we are billing to.'), 'error');
}

} 
```

**将数据库中的字段保存为订单元数据：**

```
add_action('woocommerce_checkout_update_order_meta','my_custom_checkout_field_update_order_meta');

function my_custom_checkout_field_update_order_meta($order_id) {

  if (!empty($_POST['billing']['billing_gls_name'])) {
     update_post_meta($order_id, 'Billing Gls Name', esc_attr($_POST['billing']['billing_gls_name_type']));
     }
 } 
```

**最后在订单详情屏幕中显示：**

```
 add_action('woocommerce_admin_order_data_after_billing_address', 'my_custom_billing_fields_display_admin_order_meta', 10, 1);

  function my_custom_billing_fields_display_admin_order_meta($order) {
echo '<p><strong>' . __('Billing Gls Name') . ':</strong><br> ' . get_post_meta($order->id, '_billing_gls_name', true) . '</p>';
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-17T18:03:13.207

添加操作`woocommerce_admin_order_data_after_billing_address`，您可以在计费信息后插入一些数据。自定义字段在`$order->order_custom_fields`数组下。

```
function display_rfc_in_order_metabox($order){
    echo "<p><strong>RFC:</strong> {$order->order_custom_fields['_billing_rfc'][0]}</p>";
}

add_action( 'woocommerce_admin_order_data_after_billing_address', 'rxm_details_to_order', 10, 1 ); 
```

# jquery - jQuery 鼠标滚轮仅在某些情况下阻止默认设置

> ID：12958201
> 
> 赞同：0
> 
> 时间：2012-10-18T15:27:49.870
> 
> 标签：jquery, events

我有一个简单的页面，它带有`jquey.mousewheel`插件和水平滚动`$('html, body').mousewheel();`

在里面我做了水平滚动并使用`event.preventDefault();`- 防止垂直滚动。但是我有一类带有评论部分的 div，当我使用该 div 并使用鼠标滚轮时，我想垂直滚动`hovered`。但防止默认阻止它。

那么如何仅在鼠标悬停时禁用全局水平滚动并在 div 内启用正常的 werical 呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T15:32:33.037

请考虑使用此代码：

```
$('html, body').not(".nomousewheel").mousewheel(); 
```

此选择器不会将该函数应用于具有 class 的元素`.nomousewheel`。

# python - .pyw 在启动时通过注册表启动并退出但通过双击启动可以工作......？

> ID：12958203
> 
> 赞同：2
> 
> 时间：2012-10-18T15:27:59.317
> 
> 标签：python, windows, registry, pythonw

我有一个 .pyw 脚本，当我双击它等时它会工作，它会一直打开直到我关闭它，但我已将它添加到注册表以在启动时运行。它确实在启动时运行，但不会像它设置的那样保持打开状态。它闪烁gui，然后关闭。

任何想法为什么会发生这种情况或如何解决它？

PS 我不想在链接到 .pyw 文件的启动文件夹中创建快捷方式。

我使用另一个 python 脚本将我的 python 脚本添加到注册表中：p

```
import _winreg
aReg    = _winreg.ConnectRegistry(None,_winreg.HKEY_LOCAL_MACHINE)
aKey    = _winreg.OpenKey(aReg, "SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Run", 0, _winreg.KEY_WRITE)
_winreg.SetValueEx(aKey,"MyScript",0, _winreg.REG_SZ, myScript_path) 
```

当我在注册表中浏览该路径时： HKEY_LOCAL_MACHINE > SOFTWARE > Microsoft > Windows > CurrentVersion > Run 它在数据中具有正确的路径并输入 REG_SZ

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T14:07:41.350

由于脚本似乎使用的进程之一尚未启动，因此仅在启动时发生了一个非常奇怪的错误。使用 python.exe 作为 .py 运行不会产生错误，它仅在脚本作为 .pyw 运行时发生，因此我将 sys.stdout 写入文件以记录其进度和错误。

在我使用日志记录模块之前，它似乎没有提供像直接输出到文件那样多的细节。

检查文件后，我能够修复代码，所以本质上这是一个代码问题，但却是一个偷偷摸摸的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-14T17:58:49.703

我的两分钱：有同样的问题（启动文件夹中的 .pyw 只是闪现了它的 gui 然后关闭）。在导入命令之前添加了一个“睡眠”并且它起作用了。我相信操作系统需要一些时间来为我的代码中的一个/一些导入命令做好准备。

```
#coding:utf-8

from time import sleep

sleep(20)

from Tkinter import *
from Tix import *
from time import strftime
import urllib
from itertools import izip_longest
import winsound 
```

# php - 获取 system() 的 STDOUT；在 PHP 中调用

> ID：12958206
> 
> 赞同：0
> 
> 时间：2012-10-18T15:28:08.933
> 
> 标签：php

我想问你我是否用 system() 调用任何应用程序；在 PHP5 中是否可以将该应用程序的结果直接获取到 php？（而不是做 SomeApp >> file.txt - 并在 PHP 中读取文件）。

例如：system('lynx page.html'); 我想将“lynx page.html”的结果放入变量中。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T15:32:16.770

最简单的方法是使用[反引号运算符](http://www.php.net/manual/en/language.operators.execution.php)：

```
$out = `ls -a`; 
```

您也可以使用`shell_exec("command")`，这是等效的。

# jsf-2 - 不启动回发

> ID：12958208
> 
> 赞同：3
> 
> 时间：2012-10-18T15:28:12.490
> 
> 标签：jsf-2, primefaces, cdi

我在 JBoss AS 7.1.1 上使用 JSF 2.1.7 和 Myfaces CODI 1.0.5。我`<h:commandButton>`的不工作。我已经阅读了要求并通过许多博客中的示例都无济于事。我的facelets代码如下

```
<ui:define name="pagecontent">  
    <h1 class="title ui-widget-header ui-corner-all">Upload Bulk Contact File</h1>
    <div class="entry">
        <h:form enctype="multipart/form-data" id="upload">
            <p:panel closable="false" collapsed="false" header="Excel Contact Uploader"
                id="pnlupload" rendered="true" toggleable="false" visible="true" widgetVar="pnlupload">
                <p:growl id="msg"  showDetail="true" life="3000" showSummary="true"/>
                <p:fileUpload auto="true" 
                    allowTypes="/(\.|\/)(xls)$/" 
                    sizeLimit="1024000" 
                    mode="advanced" 
                    multiple="true" invalidFileMessage="Invalid file type" invalidSizeMessage="File too
                    large" dragDropSupport="true" 
                    fileUploadListener="#{excelFileController.handleFileUpload}" showButtons="true"
                    update="msg, tblcontacts" required="false"/>
                <p:scrollPanel rendered="true" style="height:200px;">
                    <p:dataTable draggableColumns="false" editable="false" emptyMessage="No 
                        Contacts Uploaded" id="tblcontacts" rendered="true"  rows="8"
                        selection="#{excelFileController.contactsSelected}" 
                        value="#{excelFileController.contactDataModel}" var="contact" style="width:50pc;">
                        <p:column selectionMode="multiple" style="width:18px" />
                        <p:column headerText="File Name">
                            #{contact.groupName}  
                        </p:column>  
                        <p:column headerText="Number of Contacts">  
                            #{contact.numberofentries}  
                        </p:column> 
                        <p:column>
                            <h:button  outcome="blkedit?faces-redirect=true" rendered="true" value="Edit">
                                <f:param name="contact" value="#{contact.contactId}"/>
                            </h:button>
                        </p:column>
                    </p:dataTable>
                </p:scrollPanel>
                <br />
            </p:panel>
            <h:commandButton value="Delete" id="btndelete" 
                action="#{excelFileController.removeContact}"  type="button" immediate="true" 
                disabled="false"     rendered="true"/>
            <h:message for="btndelete" />
        </h:form>
    </div>
</ui:define> 
```

的代码`ExcelFileController`如下：

```
@Named
@ViewAccessScoped
public class ExcelFileController implements Serializable, IFileController {
    /**
     * 
     */
    private static final long serialVersionUID = -8117258104485487921L;

    @Inject
    PhoneNumberFormatter formatter;

    @Inject
    @Authenticated
    UserProfile profile;

    public PhoneNumberFormatter getFormatter() {
    return formatter;
    }

    public void setFormatter(PhoneNumberFormatter formatter) {
    this.formatter = formatter;
    }

    @EJB
    BulkContactDeleter deleter;

    @Inject
    Logger logger;

    @Inject
    @CurrentContext
    FacesContext context;

    @Inject
    BulkSMSContactListProducer listProducer;

    @Inject
    ConfigurationListProducer producer;

    private BulkSMSContacts[] contactsSelected;

    private BulkContactDataModel contactDataModel;

    public BulkSMSContacts[] getContactsSelected() {
        return contactsSelected;
    }

    public void setContactsSelected(BulkSMSContacts[] contactsSelected) {
        this.contactsSelected = contactsSelected;
    }

    public BulkContactDataModel getContactDataModel() {
        return contactDataModel;
    }

    @PostConstruct
    public void init() {
        logger.log(Level.INFO, "Entering excel file controller");
        contactDataModel = new BulkContactDataModel(
                listProducer.getBulkSMSContacts());

    }
    /*
     * (non-Javadoc)
     * 
     * @see
     * org.jboss.tools.examples.controller.IFileController#handleFileUpload(
     * org.primefaces.event.FileUploadEvent)
     */
    @Override
    public void handleFileUpload(FileUploadEvent event) {
        StringBuffer buffer = new StringBuffer();
        // create a new file input stream with the input file specified
        // at the command line

        InputStream fin = null;
        try {
            fin = event.getFile().getInputstream();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        // create a new org.apache.poi.poifs.filesystem.Filesystem
        POIFSFileSystem poifs = null;
        try {
            poifs = new POIFSFileSystem(fin);

        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        HSSFWorkbook wb = null;
        try {
            wb = new HSSFWorkbook(poifs);
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        int numberofsheets = wb.getNumberOfSheets();
        for (int i = 0; i < numberofsheets; i++) {
            HSSFSheet sheet = wb.getSheetAt(i);
            for (Row row : sheet) {
                for (Cell cell : row) {
                    switch (cell.getCellType()) {
                        case Cell.CELL_TYPE_STRING :
                            if (!cell.getStringCellValue().isEmpty())
                                buffer.append(formatter.formatPhoneNumber(cell
                                        .getStringCellValue()));
                            buffer.append(producer.getConfiguration(
                                    SettingsName.SMS_PHONENUMBERDELIMITER
                                            .toString()).getValue());

                            break;
                        case Cell.CELL_TYPE_NUMERIC :
                            if (cell.getNumericCellValue() != 0) {

                                buffer.append(formatter
                                        .formatPhoneNumber(String.valueOf(cell
                                                .getNumericCellValue())));
                                buffer.append(producer.getConfiguration(
                                        SettingsName.SMS_PHONENUMBERDELIMITER
                                                .toString()).getValue());
                                break;
                            }

                        default :
                            break;
                    }

                }

            }
        }
        BulkSMSContacts contacts = new BulkSMSContacts();
        contacts.setAccount(profile.getSmsAccount());
        int number = formatter.splitPhoneNumbers(buffer.toString()).length;
        contacts.setContacts(buffer.toString());
        String filenameString = event.getFile().getFileName();
        int index = filenameString.indexOf(".");
        filenameString = filenameString.substring(0, index);
        contacts.setGroupName(filenameString);
        contacts.setNumberofentries(number);
        try {
            deleter.addContact(contacts);
            List<BulkSMSContacts> temp = listProducer.getBulkSMSContacts();
            contactDataModel.setWrappedData(temp);
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_INFO,
                "Success", number
                        + " entries processed. Please refresh page to view"));

    }

    /*
     * (non-Javadoc)
     * 
     * @see org.jboss.tools.examples.controller.IFileController#removeContact()
     */
    @Override
    public String removeContact() {
        int contactsdeleted = 0;
        if (contactsSelected != null) {
            for (BulkSMSContacts contacts : contactsSelected) {
                if (contacts != null) {
                    deleter.deleteContact(contacts);
                    contactsdeleted += 1;
                }

            }

            List<BulkSMSContacts> temp = listProducer.getBulkSMSContacts();
            contactDataModel.setWrappedData(temp);

            logger.log(Level.INFO, "Deleted " + contactsdeleted + " Contacts");
            context.addMessage(null, new FacesMessage(
                    FacesMessage.SEVERITY_INFO, "Success", contactsdeleted
                            + " entries where deleted successfully"));
        } else {
            context.addMessage(null, new FacesMessage(
                    FacesMessage.SEVERITY_ERROR, "Error",
                    "No contact file was selected!"));
        }
        return null;
    }
} 
```

所有方法都可以正常工作，除了最后一个“removeContact”，其中相关的命令按钮甚至不启动回发。

这是如何引起的，我该如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T16:09:16.400

您需要`type="button"`从`<h:commandButton>`. 应该是`type="submit"`，这已经是默认设置了。

这`type="button"`使它成为一个`<input type="button">`而不是`<input type="submit">`仅对您通常使用的客户端处理程序有用`onclick`等等。

# java - 如何让这个 switch 语句识别整数？

> ID：12958212
> 
> 赞同：0
> 
> 时间：2012-10-18T15:28:19.020
> 
> 标签：java, int, switch-statement, java.util.scanner

我正在尝试编写一个程序，它将字母表中的任何字母（大写或小写）**和数字**转换为拼音字母表。例如，如果我输入“A”或“a”，我的程序会给我（将其更改为）“Alpha”。此外，如果我输入“1”，它将返回“一”。我已经成功地处理了它的“输入任何字母”方面，但我的程序无法识别数字。我尝试输入**int**但我的扫描仪无法识别这一点。我在我的代码中设置了一个**默认值**，但仍然......没有占上风。我应该改用 if 语句吗？

进一步说明：这是这个[问题的延续](https://stackoverflow.com/questions/12938563/how-can-i-get-this-switch-statement-to-work-using-a-scanner)

这是我到目前为止所得到的：

```
import java.util.Scanner;
public class PhoneticTranslate {
public static void main(String[] args) {

 int number = 0;
char letter;
String phonetic = null;

Scanner kb = new Scanner(System.in);

System.out.print("Please enter a letter or number: ");
letter = kb.next().charAt(0);

switch(Character.toUpperCase(letter))
{
case 'A':
    phonetic = "Alpha"; 
break;
case 'B':
    phonetic = "Bravo";
    break;
// ... rest of cases for letters
case 'Z':
    phonetic = "Zulu";
    break;
    default:

            Scanner x = new Scanner(System.in);
            number = kb.nextInt();

            switch(number)
            {
            case '1':
                phonetic = "One";
                break;
            case '2':
                phonetic = "Two";
                break;
                            // ... rest of cases for numbers
            case '8':
                phonetic = "Eight";
                break;
            case '9':
                phonetic = "Nine";
                break;
            }

}
            System.out.println("You Entered " +  letter + ". This letter indicates: " + phonetic);
            System.out.println("You Entered" + number + ". This number indicates: " + phonetic);

}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T15:34:14.790

一个**巨大的 switch/case 子句**是一种代码味道，试试这个：

将每个键/值对添加到 Map 中，然后使用`get`. 无需开关/外壳。

```
String letter;
String phonetic;
Map<String,String> codes = new HashMap<String,String>();
codes.put("A","Alpha");
codes.put("B","Bravo");
codes.put("C","Charlie");
codes.put("D","Delta");
    // not showing all "puts" to make it shorter
codes.put("W","Whiskey");
codes.put("X","X-Ray");
codes.put("Y","Yankee");
codes.put("Z","Zulu");
codes.put("0","Zero");
codes.put("1","One");
    // not showing all "puts" to make it shorter
codes.put("9","Nine");    

Scanner kb = new Scanner(System.in);

System.out.print("Please enter a letter: ");
letter = kb.next().toUpperCase(); // convert key to uppercase

phonetic = codes.get(letter);  // search the value in the map using the key

if (phonetic == null) {
    System.out.println("bad code : " + letter);
} else {
    System.out.println("Phonetic: " + phonetic);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T15:30:50.603

您已将案例写在字符上：-

```
case '1': // This is checking for character '1' 
```

您需要更改案例以获取`integer`值：-

```
switch(number) {
    case 1:
           phonetic = "One";
           break;
    case 2:
        ... so on 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T15:45:04.677

您可以尝试检查输入值是否为数字（整数）。如果不返回

```
while(true){

Scanner x = new Scanner(System.in);
int number=0;    
try{
    int number = x.nextInt();
    }catch(IllegalArgumentException e){
    continue;
    }
    String phonetic = null;
    switch(number)
    {
    case 1:
        phonetic = "One";
        break;
    case 2:
        phonetic = "Two";
        break;
    case 3:
        phonetic = "Three";
        break;
    case 4:
        phonetic = "Four";
        break;
    case 5:
        phonetic = "Five";
        break;
    case 6:
        phonetic = "Six";
        break;
    case 7:
        phonetic = "Seven";
        break;
    case 8:
        phonetic = "Eight";
        break;
    case 9:
        phonetic = "Nine";
        break;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T15:30:58.777

要么不要在数字周围加上引号（“ case 1: phonetic = "One"" 等），要么继续使用 char 值。我认为任何一个都应该工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-18T15:31:31.163

您的 switch 语句正在检查整数的 unicode char 表示形式。根据这个规范，`'1'`是字符“1”，它转换为整数 49。

将每个值的 int 表示形式放在 switch 语句中：

```
switch (number) {
    case 1:
        phonetic = "One";
        break;
    case 2:
    ...
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-18T15:32:14.517

尝试：

```
 Scanner x = new Scanner(System.in);
    int number = x.nextInt();
    String phonetic = null;
    switch(number)
    {
    case 1:
        phonetic = "One";
        break;
    case 2:
        phonetic = "Two";
        break;
    case 3:
        phonetic = "Three";
        break;
    case 4:
        phonetic = "Four";
        break;
    case 5:
        phonetic = "Five";
        break;
    case 6:
        phonetic = "Six";
        break;
    case 7:
        phonetic = "Seven";
        break;
    case 8:
        phonetic = "Eight";
        break;
    case 9:
        phonetic = "Nine";
        break;
    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-18T15:32:42.487

使用 ASCII 码代替数字，这就是字符。但是为什么你需要这样做呢？你的代码不是已经工作了吗？

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-18T15:32:51.677

将您的案例继续到表示整数的字符中：

```
case 'Z':
    phonetic = "Zulu";
    break;
case '1':
    phonetic = "One";
    break;
case '2':
    // ... 
```

只要您只想处理一位数，这将起作用。

这与您的问题描述相匹配，尽管同时保留 a`letter`和`number`变量并将它们分别打印出来暗示了一些额外的功能？

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-02-07T12:24:35.130

试试这个先生

```
package phone;

import java.util.Scanner;

public class PhoneticTranslate {

 /**
  * @param args
  */
 public static void main(String[] args) {
  int number = 0;
  char letter;
  String phonetic = null;

  Scanner kb = new Scanner(System.in);

  System.out.print("Please enter a letter or number: ");
  letter = kb.next().charAt(0);

  switch (Character.toUpperCase(letter)) {
   case 'A':
    phonetic = "Alpha";
    break;
   case 'B':
    phonetic = "Bravo";
    break;
    // ... rest of cases for letters
   case 'Z':
    phonetic = "Zulu";
    break;
   default:

    Scanner x = new Scanner(System.in);
    number = kb.nextInt();

    switch (number) {
     case 1:
      phonetic = "One";
      break;
     case 2:
      phonetic = "Two";
      break;
      // ... rest of cases for numbers
     case 8:
      phonetic = "Eight";
      break;
     case 9:
      phonetic = "Nine";
      break;
    }

  }
  System.out.println("You Entered " + letter + ". This letter indicates: " + phonetic);
  System.out.println("You Entered" + number + ". This number indicates: " + phonetic);

 }

} 
```

# windows - 浏览到“Internet 临时文件”文件夹的脚本

> ID：12958214
> 
> 赞同：1
> 
> 时间：2012-10-18T15:28:26.277
> 
> 标签：windows, internet-explorer, shell, wininet

我只是希望能够删除我的临时 Internet 文件夹（用于 Internet Explorer）中的一些特定文件，但是我知道这是一个*特殊*文件夹，而且它似乎并不简单。我是否需要使用 Shell 对象并引用 WinINET？计划在 C# 或 VB 中执行此操作。一些简单的东西。非常感谢任何输入。

谢谢

# python - Python 在 __new__ 方法中检查可迭代

> ID：12958217
> 
> 赞同：4
> 
> 时间：2012-10-18T15:28:39.637
> 
> 标签：python, iterator

我正在尝试编写一个 python (2.7) 矩阵模块。（我知道 numpy，这只是为了好玩。）

### 我的代码：

```
from numbers import Number
import itertools

test2DMat = [[1,2,3],[4,5,6],[7,8,9]]
test3DMat = [[[1,2,3],[4,5,6],[7,8,9]],[[2,3,4],[5,6,7],[8,9,0]],[[9,8,7],[6,5,4],[3,2,1]]]

class Dim(list):
    def __new__(cls,inDim):
        # If every item in inDim is a number create a Vec
        if all(isinstance(item,Number) for item in inDim):
            #return Vec(inDim)
            return Vec.__new__(cls,inDim)

        # Otherwise create a Dim
        return list.__new__(cls,inDim)

    def __init__(self,inDim):
        # Make sure every item in inDim is iterable
        try:
            for item in inDim: iter(item)
        except TypeError:
            raise TypeError('All items in a Dim must be iterable')

        # Make sure every item in inDim has the same length
        # or that there are zero items in the list
        if len(set(len(item) for item in inDim)) > 1:
            raise ValueError('All lists in a Dim must be the same length')

        inDim = map(Dim,inDim)
        list.__init__(self,inDim)

class Vec(Dim):
    def __new__(cls,inDim):
        if cls.__name__ not in [Vec.__name__,Dim.__name__]:
            newMat = list.__new__(Vec,inDim)
            newMat.__init__(inDim)
            return newMat
        return list.__new__(Vec,inDim)

    def __init__(self,inDim):
        list.__init__(self,inDim)

class Matrix(Dim):
    def __new__(cls,inMat):
        return Dim.__new__(cls,inMat)

    def __init__(self,inMat):
        super(Matrix,self).__init__(inMat) 
```

### 当前功能：

到目前为止，我已经写了几个类，`Matrix`，`Dim`， 和`Vec`。`Matrix`并且`Vec`都是 的子类`Dim`。创建矩阵时，首先会从列表列表开始，然后他们会创建一个矩阵，如下所示：

```
>>> startingList = [[1,2,3],[4,5,6],[7,8,9]]
>>> matrix.Matrix(startingList)
[[1,2,3],[4,5,6],[7,8,9]] 
```

这应该创建一个`Matrix`. created`Matrix`应该包含多个`Dim`长度相同的 s。这些`Dim`s 中的每一个都应该包含多个`Dim`长度相同的 s，等等。最后`Dim`一个包含数字的 s 应该只包含数字，并且应该是 a`Vec`而不是 a `Dim`。

### 问题：

所有这些都适用于列表。但是，如果我要使用迭代器对象（例如返回的对象`iter()`），则它不会像我想要的那样起作用。

例如：

```
>>> startingList = [[1,2,3],[4,5,6],[7,8,9]]
>>> matrix.Matrix(iter(startingList))    
[] 
```

### 我的想法：

我相当肯定这正在发生，因为在`Dim.__new__`我迭代输入迭代时，当相同的迭代被传递给`Matrix.__init__`它时，它已经被迭代，因此看起来是空的，导致我得到空矩阵。

我尝试使用 复制迭代器`itertools.tee()`，但这也不起作用，因为我实际上并没有调用`Matrix.__init__`它在返回时被隐式调用`Matrix.__new__`，因此我不能使用与传递给的参数不同的参数来调用它`Matrix.__init__`。我想做的所有事情都遇到了同样的问题。

我有什么方法可以保留现有功能并允许`matrix.Matrix()`使用迭代器对象进行调用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T15:40:05.150

关键是`Vec.__init__`被调用*两次*；一次在您的`__new__`方法中，一次在您从`__new__`方法中返回时。因此，如果您将其标记为已初始化并在已初始化的情况下提前返回`Vec.__init__`，那么您可以忽略第二次调用：

```
class A(object):
    def __new__(cls, param):
        return B.__new__(cls, param + 100)
class B(A):
    def __new__(cls, param):
        b = object.__new__(B)
        b.__init__(param)
        return b
    def __init__(self, param):
        if hasattr(self, 'param'):
            print "skipping __init__", self
            return
        self.param = param
print A(5).param 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T15:39:06.353

您需要做的是检查传入的变量是元组还是列表。如果是那么你可以直接使用它，否则你需要将迭代器转换为列表/元组。

```
if isinstance(inDim, collections.Sequence):
    pass
elif hastattr(inDim, '__iter__'): # this is better than using iter()
    inDim = tuple(inDim)
else:
    # item is not iterable 
```

还有一种更好的方法来检查所有列表的长度是否相同：

```
if len(inDim) > 0:
    len_iter = (len(item) for item in inDim)
    first_len = len_iter.next()
    for other_len in len_iter:
        if other_len != first_len:
            raise ValueError('All lists in a Dim must be the same length') 
```

# java - 空闲时的JVM锯齿模式？JVM 在此期间做了什么？

> ID：12958219
> 
> 赞同：3
> 
> 时间：2012-10-18T15:28:48.090
> 
> 标签：java, swing, memory, jvm

我想知道。我有一个带有 servlet 的简单 Java Web 项目。当没有用户使用它时（我在 GlassFish 上本地托管它），我仍然在进程的内存使用中看到锯齿模式。我似乎无法理解 JVM 在做什么？我了解JVM使用的内存的正常流动。堆中充满了应用程序正在创建的对象。在某个点，堆到达垃圾收集器进入的点，它将删除所有不再使用的“缓存”对象，以便可以创建新对象并可以填充堆大小。

我想知道的是，JVM 在空闲时一直在做什么？![在此处输入图像描述](../Images/8e0d8c4585d59154fce75850f889e709.png)

编辑：

就像我在评论中说的那样。我在 Eclipse 中创建了一个非常简单的 Java 应用程序，它显示了一个 Swing 窗口，上面写着“hello world”。当我在 Java VisualVM 中观察 JVM 的内存使用情况时，我看到了相同的锯齿模式。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-29T15:23:54.490

事实证明，VisualVM 是罪魁祸首。这是因为 VisualVM 不断地询问 JVM 它的统计数据是什么，因此 JVM 创建对象以将信息提供给 VisualVM。

感 [谢彼得劳里](https://stackoverflow.com/users/57695/peter-lawrey)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T15:37:45.860

我的猜测是应用服务器正在做某种幕后记账。请记住，即使没有人使用它，仍然有线程在后台运行。另外，您的应用程序是否使用任何类型的按时间顺序触发的框架，例如 Quartz？或者，日志记录呢。即使它可能没有主动将日志消息发送到文件，记录器仍然被调用，这导致各种事物被创建/销毁。

# salesforce - Salesforce 元数据 API 部署不推送系统权限

> ID：12958220
> 
> 赞同：2
> 
> 时间：2012-10-18T15:28:52.507
> 
> 标签：salesforce

您如何获得要提取的系统权限？

我正在为我们公司构建[元数据部署](http://www.salesforce.com/us/developer/docs/api_meta/index.htm)，部分部署包括创建几个新配置文件。我们正在尝试捕获这些配置文件的所有权限，但似乎无法在我们的测试运行中获得匹配的系统权限。

我知道，当您检索配置文件对象时，[您得到的是动态的，基于您正在检索的其他对象。](http://www.salesforce.com/us/developer/docs/daas/salesforce_migration_guide.pdf)（见第 4 章第 2 点）

我们的源环境和目标环境之间的以下系统权限不同

```
Customize Application
Manage Connections
Manage Custom Report Types
Manage Dashboards
Manage Public Documents
Manage Public List Views
Manage Public Reports
Manage Public Templates
Manage Translation
Manage Users
Modify All Data
Reset User Passwords and Unlock Users
+ Send Email
Transfer Record
View All Data 
```

注意：+ 表示添加到目的地。所有其他人都丢失了。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-03-07T23:12:53.310

为了使用元数据 API - 用户必须拥有“API Enabled”和“Modify All Data”权限。

# eclipse - 在eclipse中构建DOJO

> ID：12958221
> 
> 赞同：0
> 
> 时间：2012-10-18T15:29:01.320
> 
> 标签：eclipse, dojo

我在我的 Eclipse 工作区中包含了 dojo 构建。每次我点击 clean 都需要花费大量时间来构建这个 DOJO 项目。

我不想每次都从要清理的项目列表中取消选中它，因为这非常不方便，还尝试禁用 xml 和 JS 验证。

有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T16:13:59.227

看来您已在 eclipse 的构建路径中添加了 dojo 库文件夹。

右键单击包含 dojo js 文件的文件夹并转到“构建路径”，然后单击“从构建路径中删除”。

请记住，普通文件夹不会建立。这也意味着如果您有一个包含 .java 文件但不是构建路径的一部分的文件夹，则不会编译其中的 .java 文件。

希望能解决您的问题。

# python - 在 MongoAlchemy 的索引中设置 TTL

> ID：12958226
> 
> 赞同：0
> 
> 时间：2012-10-18T15:29:19.387
> 
> 标签：python, mongodb, mongoalchemy

我可以以某种方式`expireAfterSeconds`在 MongoAlchemy 中指定集合的​​索引，或者我需要像这样进行破解：

```
class TtlIndex(Index):
    def expires(self, seconds):
        self.expireAfterSeconds = seconds

    def ensure(self, collection):
        extras = {}
        if self.__min is not None:
            extras['min'] = self.__min
        if self.__max is not None:
            extras['max'] = self.__max
        if self.__bucket_size is not None:
            extras['bucket_size'] = self.__bucket_size
        if self.expireAfterSeconds:
            extras['expireAfterSeconds'] = self.expireAfterSeconds
        collection.ensure_index(self.components, unique=self.__unique,
            drop_dups=self.__drop_dups, **extras)
        return self 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T06:45:53.067

MongoAlchemy 0.13 没有提供索引过期时间的可能性。我们需要直接使用 PyMongo 来做。

# javascript - Twitter Bootstrap Scrollspy，离开区域时删除活动

> ID：12958228
> 
> 赞同：3
> 
> 时间：2012-10-18T15:29:27.233
> 
> 标签：javascript, jquery, twitter-bootstrap

我正在使用来自twitter bootstrap的scrollspy，如果它没有触发另一个部分，它会在离开一个部分后保持选择导航元素。

任何人都知道是否有办法清除选择，一旦它离开所选区域并且不会触发另一个项目？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-06T22:45:50.103

由于更新引导程序版本时的长期后果，我不太热衷于修补 twitter 引导程序。我最终添加了隐藏的导航元素来表示我不希望 scrollspy 突出显示导航元素的区域。

```
<ul class="nav navbar-nav">
  <li class="hidden">
    <%= link_to "Top", '#top' %>
  </li>
  <li>
    <%= link_to "Features", '#features' %>
  </li>
  <li>
    <%= link_to "Gift Collections", '#gift-collections' %>
  </li>
  <li>
    <%= link_to "Pricing", '#pricing' %>
  </li>
</ul>
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-09T19:47:38.780

我在寻找同样的东西，发现了这个：[https ://gist.github.com/kirov/9482666](https://gist.github.com/kirov/9482666)

这些是您需要添加的更改：

```
 if (scrollTop <= offsets[0]) {
      this.deactivate();
      return;
    }

    if (scrollTop >= maxScroll) {
      return activeTarget != (i = targets.last()[0]) && this.activate(i)
    }

    if (activeTarget && scrollTop <= offsets[0]) {
      return activeTarget != (i = targets[0]) && this.activate(i)
    }

  ScrollSpy.prototype.deactivate = function (target) {
    $(this.selector)
      .parent('.active')
      .removeClass('active');
    this.activeTarget = null;
  } 
```

# c - 多字节字符表示 ASCII&Hex

> ID：12958233
> 
> 赞同：2
> 
> 时间：2012-10-18T15:29:39.760
> 
> 标签：c, ascii, asciiencoding

我很难理解多字节字符在 ascii 表中的表示方式：十进制格式，然后是十六进制。

例如：

```
char *c = "é";
printf("%d\n%d", c[0], c[1]); 
```

它将显示：

```
-61

-87 
```

在 ascii 表中，十进制的“é”是 130，十六进制的 82。我知道 82 是 130 的十六进制值，但是我们如何从 -61 和 -87 获得 130 呢？

提前谢谢我的拼写抱歉

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T15:59:17.700

根据 UTF-8 字符集（除其他外，许多 GNU/Linux 发行版使用），`'é'`字符常量的值为`0xC3A9`，相当于`11000011 10010101`二进制。在这里我们可以理解结果，假设两个补码表示。

*   序列`11000011`等于`-61`十进制。
*   序列`10010101`等于`-87`十进制。

# rest - RESTful HATEOAS 客户端网址

> ID：12958237
> 
> 赞同：3
> 
> 时间：2012-10-18T15:29:51.937
> 
> 标签：rest, hateoas

我有理由确定我了解 HATEOAS 设计的服务器端——在响应中返回状态 URL——但我对如何设计客户端来接受这些有点困惑。

例如，我们访问 //somehost.com/resource/1 上的资源 - 这为我们提供了资源数据和链接。我们假设返回到 //somehost.com/resource 的 POST，表示一个“新”操作。现在我知道将一些数据发布到该 url 会创建一个新资源并提供响应，但是发布该数据的表单在哪里？我已经看到 //somehost.com/resource/1/new 提供了一个 POSTS 到 /resource 的表单的实现，但是该 URL 本身包含一个动词，并且似乎违反了 REST。

我认为我的困惑在于我在同一个应用程序中实现了一个 RESTful API 和一个使用它的客户端。

这种事情有某种最佳实践吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T08:55:12.580

> 我已经看到 //somehost.com/resource/1/new 提供了一个 POSTS 到 /resource 的表单的实现，但是该 URL 本身包含一个动词，并且似乎违反了 REST。

这是不正确的。*包含*动词的 URI本身并不违反任何 REST 约束。只有当该 URI**表示一个操作**时，这才成为违规。如果您可以对 URL 执行 GET 请求并接收一些有意义的资源（例如“创建新资源”表单），那么这就是完美的 RESTful**和良好实践。**

我自己的 API 和你描述的完全一样：`/{collection}/new`返回一个表单。`/new`只是一个假设的简写`/new-resource-creation-form`，仍然代表一个名词，并且只支持 GET 请求（不支持 HEAD、OPTIONS 和 TRACE）。
HATEOAS 禁止的是用户代理需要知道，为了创建新资源，它必须添加`/new`到集合的名称中。

基本上，如果您将 API 实现为 (X)HTML，并且可以[在浏览器中浏览它](http://vimeo.com/20781278)并执行所有操作（在 HTML 和浏览器赶上 HTTP 之前，非 POST 表单提交可能需要 AJAX），那么它符合REST 的超媒体约束。

**编辑**从评论中提升：

只要响应否定了对*先验*知识的任何需求，它就符合超媒体约束。如果客户端声称理解 HTML，并且您发回包含指向外部样式表或 javascript（无论托管在何处）的链接的响应，客户端需要能够正确呈现页面，那么可以合理地说满足约束。客户端应该知道如何处理它声称支持的所有媒体类型。普通的人类 Web 浏览器是客户端对任何一个 HTTP 服务（网站）没有带外知识的完美示例。

明确地说，网站是一种 HTTP 服务。Web 浏览器不会以不同的方式对待不同的网站。为了在亚马逊上搜索产品，您需要加载亚马逊服务端点`http://amazon.com/`并点击链接或填写该响应中提供的表格。为了在 eBay 上搜索产品，您需要加载 eBay 服务端点`http://ebay.com/`并执行相同操作。
浏览器事先并不知道搜索 eBay 必须这样做*，*但搜索 Amazon 必须这样*做*。浏览器是无知的。其他 HTTP 服务的客户端也应该是无知的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-26T21:58:09.403

是的，您*可以*提供一个返回资源创建表单的 URI。可以想象，该表单可用于动态发现构建新资源所需的元素（但您需要确定这在机器对机器环境中的实际应用程度）。

除非**要求**API 以某种方式具有精确的浏览器可浏览等效项，否则媒体类型的文档将描述需要哪些元素。

请记住，媒体类型的文档和资源允许的 HTTP 动词并不违反 RESTful 原则。以[SunCloud API](http://kenai.com/projects/suncloudapis/pages/CloudAPISpecificationResourceModels#Cloud_%5Bapplication/vnd.com.sun.cloud.Cloud+json%5D)为例。

事实上，根据你的例子，POST'ing to

> //somehost.com/resource

创建新资源比首先返回表单更标准

> //somehost.com/resource/1/new

然后发布到

> //somehost.com/resource

反正。

# javascript - CodeIgniter 和 Javascript url 重写冲突

> ID：12958239
> 
> 赞同：3
> 
> 时间：2012-10-18T15:29:53.583
> 
> 标签：javascript, .htaccess, mod-rewrite

我的项目是在 CodeIgniter 中设置的。为了清理 CI 的 url，我在页面的 htaccess 中添加了一个 RewriteRule，它删除了丑陋的“index.php”：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule .* index.php/$0 [PT,L] 
```

该规则重写：

```
https://baseurl/index.php 
```

至

```
https://baseurl/ 
```

现在，我还想使用 javascript 深度链接，因为该项目严重依赖 Ajax 页面刷新。深层链接如下所示：

```
https://baseurl/#/deeplink 
```

问题是：重写规则删除了我漂亮地注入的深层链接并将用户重定向到根站点......我怎样才能摆脱 index.php 而不会在硬页面刷新时删除我的深层链接？

谢谢！

戴夫·蒂默曼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T01:45:43.317

片段`#/deeplink`永远不会发送到服务器，URL 片段仅保留在客户端（浏览器）上。它永远不会作为请求的一部分发送到服务器。请求：

```
https://baseurl/#/deeplink 
```

看起来与`index.php`脚本没有什么不同：

```
https://baseurl/ 
```

不知道你是如何开始读取服务器上的片段的。

# c++ - 程序总是返回二进制 '>>' ：没有找到接受错误类型左操作数的运算符

> ID：12958242
> 
> 赞同：2
> 
> 时间：2012-10-18T15:30:03.253
> 
> 标签：c++, temperature

所以我被设置了一个任务来使用这个等式在 C++ 中创建一个温度转换器：

```
Celsius = (5/9)*(Fahrenheit – 32) 
```

到目前为止，我已经想出了这个（我从一开始就删掉了价值 10 行的评论，所以发布的代码从第 11 行开始，如果这有意义的话）

```
#include <iostream>
#include <string>
#include <iomanip>
#include <cmath>

using namespace std;

int main ()
{ 
float celsius;
float farenheit;

std::cout << "**************************" << endl;
std::cout << "*4001COMP-Lab5-Question 1*" << endl;
std::cout << "**************************" << endl << endl;
std::cout << "Please enter a temperature in farenheit: "; 
std::cin >> farenheit >> endl;
std::cout << "Temperature (farenheit): " << endl;
std::cout << "Temperature (celsius): " << celsius << endl;
std::cin.get();
return 0;
} 
```

每次我尝试运行这个程序时，我都会得到一堆错误，每次都会出现这个错误：

> 1>m:\visual studio 2010\projects\week 5\week 5\main.cpp(26): error C2678: binary '>>' : no operator found which take a left-hand operand of type 'std::basic_istream <_Elem,_Traits>'（或没有可接受的转换）

我已经尝试了我能想到的一切来摆脱这个错误，但它每次都会重新出现，关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-18T15:31:23.503

```
std::cin >> farenheit >> endl; 
```

该声明无效。`>> endl`从中删除。

```
std::cin >> farenheit ; 
```

这句话只有当你`cout`有事时才有效。像这儿。

```
std::cout << farenheit << endl ; 
```

原因是`endl`用于输出新行的结束行字符。所以只有输出流接受它。您可以在此处查找有关和的返回值和原型的更多`cin`信息`cout`。

[http://en.cppreference.com/w/cpp/io](http://en.cppreference.com/w/cpp/io)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T15:33:40.320

`std::endl`实际上是一个函数，并且没有定义流入它的运算符。是的，这是一个令人困惑的错误消息，因为它抱怨的是 LHS 而不是 RHS。

它的实现类似于：

```
namespace std {
  std::ostream& endl( std::ostream& os )
  {
    os << '\n';
    os.flush();
    return os;
  }
} 
```

流然后定义了这样的东西：

```
namespace std {
  std::ostream & operator<<( std::ostream & os, (std::ostream& *)(std::ostream&) func )
  {
    return func(os); // or is it (*func)(os)
  }
} 
```

它实际上是 iostream 的一个非常“强大”的功能，因为您可以使用该签名编写一个函数并将该函数流式传输到您的流中以使用 iostream 执行操作。

这实际上是一个类似于`<iomanip>`库如何工作的概念（尽管它使用对象）。

# powershell - Powershell将行附加到for循环中的变量

> ID：12958243
> 
> 赞同：14
> 
> 时间：2012-10-18T15:30:03.707
> 
> 标签：powershell

我有一个 foreach 循环并使用 write-host cmdlet 写入控制台。我现在希望将这些行写入一个变量，该变量将存储循环的所有结果。什么是 cmdlet/语法？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-18T16:48:02.523

这里有几种方法可以做到这一点。将这些行放在一个字符串中：

```
$lines = ''
for ($i=0; $i -lt 10; $i++)
{
    $lines += "The current value of i is $i`n"
}
$lines 
```

或者作为一个字符串数组，其中每一行是数组中的不同元素：

```
$lines = @()
for ($i=0; $i -lt 10; $i++)
{
    $lines += "The current value of i is $i"
}
$lines 
```

# sql-server - 如何根据查询返回的记录数控制 SSIS 包流？

> ID：12958244
> 
> 赞同：15
> 
> 时间：2012-10-18T15:30:05.080
> 
> 标签：sql-server, ssis, sql-server-2008-r2

在执行我的包之前，我正在尝试首先检查是否有任何新记录要处理。我在 SQL Server 2008 R2 表中有一个名为“已处理”的位字段，如果已处理，则其值为 1，否则为 0。

我想这样查询它：

```
select count(processed) from dbo.AR_Sale where processed = 0 
```

如果结果为 0，我想发送一封电子邮件，说明记录不存在。如果大于零，我想继续执行包。我是 SSIS 新手，似乎不知道要使用什么工具。

我的包有一个数据流项，其中包含与数据库的 OLE DB 连接。该连接使用查询来返回记录。不幸的是，即使没有要处理的记录，查询也会成功完成（应该如此）。这是查询：

```
Select * from dbo.AR_Sale where processed = 0 
```

我将这些记录复制到数据仓库，然后运行另一个查询，通过将已处理的字段从 0 更改为 1 来更新源表。
任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-10-18T17:42:41.420

一种选择是将优先约束与执行 SQL 任务结合使用来实现此功能。这是一个如何在`SSIS 2008 R2`.

我根据问题中提供的信息创建了一个简单的表格。

***创建表脚本***：

```
CREATE TABLE dbo.AR_Sale(
    Id int NOT NULL IDENTITY PRIMARY KEY,
    Item varchar(30) NOT NULL,
    Price numeric(10, 2) NOT NULL,
    Processed bit NOT NULL
) 
GO 
```

然后用一些示例数据填充新表。您可以看到其中一行已将已处理标志设置为零。

***填充表脚本***：

```
INSERT INTO dbo.AR_Sale (Item, Price, Processed) VALUES
    ('Item 1', 23.84, 1),
    ('Item 2', 72.19, 0),
    ('Item 3', 45.73, 1); 
```

在 SSIS 包上，创建以下两个变量。

*   `Processed`数据类型`Int32`
*   `SQLFetchCount`数据类型`String`的值设置为`SELECT COUNT(Id) ProcessedCount FROM dbo.AR_Sale WHERE Processed = 0`

![变量](../Images/eeb488df66e46a0ce79918f4c6ca84d0.png)

在 SSIS 项目上，创建一个指向您选择的数据库的 OLE DB 数据源。将数据源添加到包的连接管理器。在此示例中，我使用将数据源命名为`Practice`.

在包的`Control Flow`选项卡上，从工具箱中拖放执行 SQL 任务。

配置Execute SQL Task的*General*页面，如下图：

*   给一个合适的*名字*，说`Check pre-execution`
*   *将ResultSet*更改为，`Single row`因为查询返回标量值
*   设置*连接*到 OLE DB 数据源，在本例中`Practice`
*   将*SQLSourceType*设置为，`Variable`因为我们将使用存储在变量中的查询
*   将*SourceVariable*设置为`User::SQLFetchCount`
*   点击`Result Set`左侧页面

![执行 SQL 任务 - 常规](../Images/22cdd94da5ee53e69ece110d3bcd2329.png)

配置Execute SQL Task的*Result Set*页面，如下图：

*   单击添加按钮添加一个新变量，该变量将存储查询返回的计数值
*   更改*结果名称*以`0`指示查询返回的第一列值
*   将*变量名称*设置为`User::Processed`
*   点击`OK`

![执行 SQL 任务 - 结果集](../Images/93f34af60c1323c66a4030459ade296e.png)

在包的`Control Flow`选项卡上，从工具箱中拖放发送邮件任务和数据流任务。控制流选项卡应如下所示：

![控制流选项卡](../Images/530d64a0173daa3be68f619e1918742f.png)

右键单击连接执行 SQL 任务和发送邮件任务的绿色箭头。单击 Edit... 绿色箭头称为 Precedence Constraint。

![右键单击约束 1](../Images/dfe48118026e6e2b0d8dc31d62d7ab3f.png)

在 Precedence Constraint Editor 上，执行以下步骤：

*   将*评估操作*设置为`Expression`
*   将*表达式*设置为`@[User::Processed] == 0`。这意味着仅当变量 Processed 设置为零时才采用此路径。
*   点击确定

![等于零](../Images/d357ec6e980d3ca663517dd3dbb28a22.png)

右键单击连接执行 SQL 任务和数据流任务的绿色箭头。单击 Edit... 在 Precedence Constraint Editor 上，执行以下步骤：

*   将*评估操作*设置为`Expression`
*   将*表达式*设置为`@[User::Processed] != 0`。这意味着仅当变量 Processed 未设置为零时才采用此路径。
*   点击确定

![不等于零](../Images/900abf4ac1ff76fa8ca2437eba4ec67e.png)

控制流选项卡看起来像这样。您可以根据需要配置发送邮件任务发送电子邮件和数据流任务更新数据。

![控制流最终](../Images/f90b9e0ecc0d2cf8e35ad1cb2af9de50.png)

当我根据填充表脚本使用数据集执行包时，包将执行数据流任务，因为有一行未处理。

![数据流任务逻辑](../Images/5b25fe8125dd0a24ffb66cb18cfa2edf.png)

当我使用脚本在表中的所有行上将 Processed 标志设置为 1 后执行包时`UPDATE dbo.AR_Sale SET Processed = 1`，包将执行发送邮件任务。

![发送邮件任务逻辑](../Images/77d3b48b31f1266f8c63874e241ef450.png)

希望有帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-18T15:48:14.770

你的 SSIS 设计应该是

源：

```
Select count(processed) Cnt from dbo.AR_Sale where processed = 0 
```

条件拆分阶段[在数据流转换下]：

```
output1: Order 1, Name - EmailCnt, Condition - Cnt = 0
output2: Order 2, Name - ProcessRows, Condition - Cnt > 0 
```

输出链接：

```
EmailCnt Link: Send email

ProcessRowsLink: DataFlowTask 
```

# asp.net-mvc-4 - 在 MVC4 模型中将 0 或 1 转换为是或否以用于显示目的

> ID：12958248
> 
> 赞同：0
> 
> 时间：2012-10-18T15:30:06.990
> 
> 标签：asp.net-mvc-4

我将在我的 MVC 4 应用程序中显示一些结果，这些结果将是 0 或 1。我希望他们显示是（1）或否（0）。有没有我可以添加到我的字段中的注释来做到这一点？或者我必须以某种方式在视图中这样做......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T15:50:49.040

您可以为此使用自定义 HTML 帮助程序： [http ://www.asp.net/mvc/tutorials/older-versions/views/creating-custom-html-helpers-cs](http://www.asp.net/mvc/tutorials/older-versions/views/creating-custom-html-helpers-cs)

或者也许只是一个简单的扩展方法。我有一个用于布尔值的。

```
 public static bool ToYesNo(this Boolean boolValue)
    {
        return (boolValue ? "Yes" : "No");
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T16:08:12.683

在模型中，添加一个支持字段并指定属性的 getter

```
private string _myString;
public string MyString
    {
        get
        {
            _myString = _myString.Equals( "0" ) ? "No" : "Yes";
            return _myString;
        }
        set { _myString = value; }

    } 
```

# iphone - 线程 1：EXC_BAD_ACCESS（代码=2，地址 0x1）

> ID：12958250
> 
> 赞同：-2
> 
> 时间：2012-10-18T15:30:08.917
> 
> 标签：iphone, xcode, ios6

是的。我运行了我的应用程序（一个 RSS 阅读器）并收到了这个错误。它指向这一行：`0x10e0098: movl (%eax), %edx`我的 MainViewController.m 中的代码是

```
UIViewController *WebViewController =
 [[WebViewController alloc] initWithNibName:@"WebViewController.h" bundle:nil]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T15:32:54.127

笔尖名称没有 .h 扩展名（即头文件）。尝试这个：

```
UIViewController *WebViewController =
 [[WebViewController alloc] initWithNibName:@"WebViewController" bundle:nil]; 
```

假设您的 nib 的文件名是 WebViewController.xib。

# c++ - 如何使用 Microsoft PPL 轻量级任务计划程序实现回退？

> ID：12958253
> 
> 赞同：5
> 
> 时间：2012-10-18T15:30:13.900
> 
> 标签：c++, visual-c++, c++11, scheduled-tasks, ppl

我们使用 PPL **Concurrency::TaskScheduler**将事件从我们的媒体管道分派到订阅的客户端（通常是 GUI 应用程序）。

这些事件是传递给**Concurrency::TaskScheduler::ScheduleTask()**的 C++ lambda 。

但是，在负载下，管道生成事件的速率可能高于客户端消耗它们的速率。

如果计划任务的“队列”大于 N，是否可以使用 PPL 策略使事件调度程序**不对事件（实际上是计划任务）进行排队？**如果没有，我将如何推出自己的产品？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T18:16:16.493

查看 API，似乎没有办法知道调度程序是否正在承受重负载，也没有办法告诉它在这种情况下如何表现。我的理解是，虽然可以使用策略设置调度程序中可以运行的并发线程数量的限制，但调度程序可以接受或拒绝新任务的协议对我来说并不清楚。

我敢打赌，您必须自己实现该机制，通过计算调度程序中已经有多少任务，并且在调度程序之前有一个大小有限的队列，这可以帮助您减轻传入任务的流量。

我想你可以为你的 lambdas 使用一个简单的 std::queue ，每次你有一个新事件时，你检查有多少任务正在运行，并从队列中添加尽可能多的任务以达到你的最大运行任务数。如果在那之后队列仍然是满的，那么你拒绝新的任务。

要处理正在运行的任务记帐，您可以使用在完成时递减计数器的函数来包装任务（使用互斥锁来避免竞争），并在安排新任务时递增计数器。

# apache - Symfony 2 设置，404 在任何不在“网络”中的东西上

> ID：12958258
> 
> 赞同：0
> 
> 时间：2012-10-18T15:30:39.193
> 
> 标签：apache, symfony, apache2, php

我正在尝试设置 Symfony 2。我已直接从该站点下载，但没有进行任何更改。我可以浏览到`config.php`它说`Your configuration looks good to run Symfony.`。如果我转到`app_dev.php`，我会收到一个 javascript 警报，说它无法打开 Web 调试工具栏。它询问我是否要转到分析器，如果单击确定，我会得到 404。在我的 apache 错误日志中，我看到它说文件不存在，因此是 404。

在`.htaccess`我的网络文件夹中看起来像：

```
<IfModule mod_rewrite.c>
    RewriteEngine On

    #<IfModule mod_vhost_alias.c>
    #    RewriteBase /
    #</IfModule>

    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^(.*)$ app.php [QSA,L]
</IfModule> 
```

但我认为这`.htaccess`与它没有任何关系，因为 url 是`/app_dev.php/_profiler/50801f9707c71`.

我究竟做错了什么？

注意：这不是开发版本。我正在使用 Symfony 下载页面中的 2.1.2 标准。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T15:57:08.870

我认为这是 symfony 2.1.3 版（开发版）中的一个错误。如果您更改 composer.json 2.1.2（而不是 2.1.*），然后点击“composer.phar update”，应该没问题。几天前，类似的事情发生在我身上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T17:36:58.873

我也有同样的问题。考虑在继续之前分析此命令的输出。

```
php app/check.php 
```

你已经去了：localhost/path/to/symfony/app/web/config.php

```
php app/console config:dump-reference framework 
```

.htaccess 在 2.1.2 和 2.1.3 中完全相同，对我来说这两个版本都失败了。:(

试过了

```
php app/console assetic:dump
php app/console assets:install 
```

而且没有成功

```
composer update 
```

我将尝试将其安装在另一台服务器上以避免任何 apache 配置错误

希望有人可以帮助我们。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-09-05T09:12:02.607

这完全与您的 Apache 有关。将您的虚拟主机设置为

```
<VirtualHost *:80>
    ServerName domain.tld
    ServerAlias www.domain.tld

    DocumentRoot /var/www/project/web
    <Directory /var/www/project/web>
        # enable the .htaccess rewrites
        AllowOverride All
        Order allow,deny
        Allow from All
    </Directory>

    ErrorLog /var/log/apache2/project_error.log
    CustomLog /var/log/apache2/project_access.log combined
</VirtualHost> 
```

使用 NGINX conf 文件，应该类似于

```
 location / {
            # try to serve file directly, fallback to rewrite
            try_files $uri @rewriteapp;
    }

    location @rewriteapp {
            # rewrite all to app.php
            rewrite ^(.*)$ /app.php/$1 last;
    }

    location ~ ^/(app|app_dev|config)\.php(/|$) {
             fastcgi_pass unix:/var/run/php5-fpm.sock;
             fastcgi_split_path_info ^(.+\.php)(/.*)$;
             include fastcgi_params;
             fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
             fastcgi_param HTTPS off;
   } 
```

现在它应该消失了。

参考[这里](http://symfony.com/doc/current/cookbook/configuration/web_server_configuration.html)

# html - H1 图像替换出现在除 ie 之外的所有浏览器中？

> ID：12958268
> 
> 赞同：2
> 
> 时间：2012-10-18T15:30:59.483
> 
> 标签：html, css, graphical-logo, image-replacement

我已经设法让我的标题作为 ff、safari 和 opera 中的链接以及 css 图像替换

```
#header h1 {
    background-image: url(../images/logo.png);
    background-repeat: no-repeat;
    text-indent: -9999px;
    margin-left: 15px;
}
#header h1 a {
    display: block;
    height: 120px;
    width: 400px;
    margin-top: -135px;
} 
```

我正在尝试在 IE 中优化该网站，这是我在周一启动它之前的最后一步，但徽标根本没有出现在 IE 8 或 9 中，但它在 IE 7 中却非常令人惊讶。我设法得到了通过使 display inline-block 出现在 IE9 中的徽标

```
.ie9 #header h1 {
    background-image: url(../images/logo.png);
    background-repeat: no-repeat;
    text-indent: -9999px;
    margin-left: 15px;
}

.ie9 #header h1 a {
    display: inline-block;
    height: 120px;
    width: 400px;
    margin-top: -135px;
} 
```

当我这样做时，图像不再是链接，有人知道如何解决这个问题吗？我会将图像放在 HTML 中，而不是使用图像替换，但是从 SEO 的角度来看，使用图像替换更好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T15:43:06.283

我认为这是`margin-top: -135px`造成问题的原因。高度只有 120 像素，所以它最终会是 -15 像素（高度 - 边距），因此会消失在 H1 标签的底部下方。

# ejb - 查询RMI工作

> ID：12958271
> 
> 赞同：0
> 
> 时间：2012-10-18T15:31:06.500
> 
> 标签：ejb, rmi

我在 RMI 中一无所获。实际上这有点令人困惑。

在客户端，我们有业务接口（Hello.class），客户端代码（HelloClient.class）和远程存根（可能是Hello_stub.class），在服务器端，我们有服务器代码（HelloImpl.class），业务接口（Hello.class）和骨架。

从 Java 5 开始，我们不创建存根，但我相信它们仍然是 c=in picture。

那么，沟通是如何发生的呢？

客户端调用 Hello.class 上的方法，然后调用 Hello_stub.class 进行所有 n/w 操作。Hello_stub.class 调用骨架，然后调用 Hello.class，然后调用 HelloImpl.class 上的方法？

阅读Head first EJB 后我有点困惑:)。如果有人澄清它会很高兴。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T20:48:04.073

当调用存根的方法时：

1.  它从客户端连接池中获取到 s 目标的 TCP 连接，或者如果没有池连接则创建一个

2.  将调用和参数捆绑到一个可序列化的对象中。

3.  将对象连同其他一些东西（如 JRMP 协议标头和远程 objectID）一起写入连接。

4.  从连接中读取回复对象。

5.  返回到池的连接，在一定的空闲时间后它会在池中关闭。

6.  如果回复对象是异常，则抛出它。

7.  否则返回回复对象作为方法结果。

在服务器上，一个线程位于侦听套接字上，接受连接，创建线程，并通过指定的对象 ID 将传入的远程调用分派到正确的远程对象。

这是通过反射完成的。RMI 骨架自 1998 年以来就没有使用过，除了您故意使用 生成的存根`rmic -v1.1`，但无论哪种方式，原理都是相同的。

# javascript - 菜单功能需要 HTML 代码

> ID：12958272
> 
> 赞同：-4
> 
> 时间：2012-10-18T15:31:09.383
> 
> 标签：javascript, jquery, html, drop-down-menu, menu

我为下拉菜单找到了以下 jquery 代码。HTML 代码应该包含什么才能使用它？

```
jQuery(document).ready(function(){

  jQuery("html").bind("click", function (e) {
    jQuery('.dropdown-toggle, a.menu').parent("li").removeClass("open");
  });

  jQuery(".dropdown-toggle, a.menu").click(function(e) {

    //  First look an see if a menu is open.  If it is, then just close it.
    if (jQuery(this).parent("li").hasClass("open")) {
        jQuery("ul").find('li').removeClass('open');
    }

    //  If menu was not open, then close any other menus that were open and just open the one.
    else {
        jQuery("ul").find('li').removeClass('open');
        jQuery(this).parent("li").addClass('open');
    }
    return false;
  });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T15:38:27.050

您应该为您的特定情况创建自己的 HTML 和 js 代码，而不仅仅是使用 jquery 代码并猜测标记应该是什么。网上有很多教程：[http ://www.google.com/search?q=tuto+menu+jquery&aq=0&oq=tuto+menu+jquery](http://www.google.com/search?q=tuto+menu+jquery&aq=0&oq=tuto+menu+jquery)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T15:35:52.660

### 你需要这个 HTML：

```
<div class="dropdown">
  <a class="dropdown-toggle" data-toggle="dropdown" href="#">Dropdown trigger</a>
  <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
    ...
  </ul>
</div> 
```

或者，另一种方法：

```
<div class="dropdown">
  <a class="dropdown-toggle" id="dLabel" role="button" data-toggle="dropdown" data-target="#" href="/page.html">
    Dropdown
    <b class="caret"></b>
  </a>
  <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
    ...
  </ul>
</div> 
```

在里面`<UL>`，你需要这样：

```
<ul id="menu1" class="dropdown-menu" role="menu" aria-labelledby="drop4">
  <li><a href="#">Action</a></li>
  <li><a href="#">Another action</a></li>
  <li><a href="#">Something else here</a></li>
  <li class="divider"></li>
  <li><a href="#">Separated link</a></li>
</ul> 
```

如果你想给一个分隔符，你可以这样给：

```
<li class="divider"></li> 
```

如果您想通过 JavaScript 调用它，可以使用以下代码：

```
$('.dropdown-toggle').dropdown() 
```

它以这种方式显示：

![截屏](../Images/af190420415960470b3883a9a21eadcd.png)

### 它是[Twitter Bootstrap](http://twitter.github.com/bootstrap/)的 JavaScript DropDown 菜单插件。[你可以在这里](http://twitter.github.com/bootstrap/javascript.html#dropdowns)了解更多。

# c# - 如何确定运行时是否使用了枚举值？

> ID：12958278
> 
> 赞同：1
> 
> 时间：2012-10-18T15:31:27.393
> 
> 标签：c#, linq, entity-framework, reflection

我们正在使用准动态方法使用 t4 模板从 sql 查找表创建枚举。该模板为每个符合查找模式的表生成一个枚举。其中一些枚举没有在代码中使用，但任何一个都可以。

这很好而且很花哨，但现在我们被要求创建一个查找管理界面，以便用户可以添加新值、编辑描述等。

他们不想修改当前在代码中作为枚举值使用的任何项目，那么是否有一种简单（或不那么简单）的方法来查询我们的程序集以查明是否使用了枚举值？

我们有很多类似于这个虚构示例的代码：

```
public Role GetAdminRole
{
  using (myContext ctx = new myContext()
  {
    return ctx.Roles.Where(i=> i.RoleId == (int)RoleEnum.Admin).SingleOrDefault();;
  }
} 
```

有没有办法使用 Type.FindMembers() 并构建一个可以查询方法内部的过滤器？

我查看了`System.Reflection.Emit`命名空间，它基于 EnumBuilder 类似乎很有希望，但无法弄清楚如何将构建器连接到现有程序集。命名空间听起来很有趣，`System.Diagnostics.CodeAnalysis`但它只包含两个属性（用于抑制警告和将代码排除在覆盖范围之外）。

编辑：在通过 ILSpy 戳时，我发现我知道但没有放在一起，方法中的枚举值在编译时以上述方式使用时会转换为它们的整数值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T15:37:02.063

如果您坚持在*运行时*检查，您可以使用[类](http://msdn.microsoft.com/en-us/library/system.reflection.methodbody.aspx)上的[`GetILAsByteArray`方法](http://msdn.microsoft.com/en-us/library/system.reflection.methodbody.getilasbytearray.aspx)来获取 IL 并[解析它](http://blogs.msdn.com/b/haibo_luo/archive/2005/10/04/476242.aspx)，搜索使用枚举的地方。[`MethodBody`](http://msdn.microsoft.com/en-us/library/system.reflection.methodbody.aspx)

正如您可以想象的那样，这将是*非常*痛苦的，因为您必须遍历所有模块、所有程序集中的所有类型中的所有方法。

我*强烈建议您**对代码*使用某种静态分析；[例如， ReSharper](http://www.jetbrains.com/resharper/)可以告诉您是否使用了成员。

如果您想编写内部解决方案，可以查看[Roslyn](http://msdn.microsoft.com/en-us/roslyn)来分析您的代码（警告，在撰写本文时它是 CTP）；您可以解析项目中的代码并自己进行分析。

也就是说，您最好找到一个分析*代码*而不是最终输出程序集的工具。

# sql - 如何将数据库从格式 iso 转换为 db3？

> ID：12958286
> 
> 赞同：9
> 
> 时间：2012-10-18T15:31:50.010
> 
> 标签：sql, database, converter, iso

如何将数据库从[Isis](http://en.wikipedia.org/wiki/CDS_ISIS)导出到[SQL](http://en.wikipedia.org/wiki/Microsoft_SQL_Server)？

我可以将数据库从 Isis 导出到 iso。我相信我可以将 iso 转换为[dBase 3](http://en.wikipedia.org/wiki/DBase#dBase_III)，然后将[dBase 3](http://en.wikipedia.org/wiki/DBase#dBase_III)转换为[SQL](http://en.wikipedia.org/wiki/Microsoft_SQL_Server)，但我还没有找到一种方法来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T00:46:46.720

1）如果您有可重复的子字段，请使用以下两行之一 - 第二行（MODE）：

```
'"',v10,'","',v20,'"'/ 
mhl,'"',v10,'","',v20,'"'/ 
```

2) 保存此格式并使用它通过标准 PRINT 选项打印到文件（菜单数据库 -> 打印）

3) 选择“输出到：ASCII 文件 (Windows)”并从列表中选择正确的打印格式。然后点击“打印”。

4) 为 TXT 文件命名，然后单击确定。

5) 任一个：

A) 运行 MS Excel 并打开 TXT 文件。然后[将数据从 Excel 导入 SQL Server](http://support.microsoft.com/kb/321686)，或者

[B) 将平面文件直接](http://msdn.microsoft.com/en-us/library/ms141209.aspx)加载到 SQL Server

在 David Strachnan 的评论和[UNESCO CDS/ISIS 常见问题解答的帮助下回答](http://portal.unesco.org/ci/en/ev.php-URL_ID=13332&URL_DO=DO_TOPIC&URL_SECTION=201.html)

# java - Java 以太网流量生成器 - 读取以太网负载

> ID：12958288
> 
> 赞同：0
> 
> 时间：2012-10-18T15:31:59.540
> 
> 标签：java, tcp, generator, ethernet, sniffer

我正在开发一个 Java 应用程序来通过 Modbus TCP 读取/写入 PLC 值，我正在使用 modbus4j。在同一个应用程序中，我想生成以太网 TCP 流量，并读取以太网负载。

你知道一些熔岩库可以做到这一点吗？

此致。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T15:34:42.723

我认为您必须使用原始库来执行此操作。我知道 Java 对于它可以/不能做什么有一些限制。例如，Java 中没有原生的“ping”。

# iphone - 将 cURL 转换为 IOS HTTPRequest

> ID：12958302
> 
> 赞同：1
> 
> 时间：2012-10-18T15:32:46.780
> 
> 标签：iphone, ios, xcode, curl, httprequest

对于新手问题，我很抱歉，但我是 cURL 和 IOS 的新手，问题是：

如何将这些 cURL 调用转换为 IOS HTTPRequest？

卷曲[https://www.box.com/api/2.0/folders/0](https://www.box.com/api/2.0/folders/0) \

-H "授权：BoxAuth

api_key=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx&auth_token=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"

卷曲[https://www.box.com/api/2.0/files/content](https://www.box.com/api/2.0/files/content) \

-H "授权：BoxAuth api_key=xxxxxxxxxxxxxxxxxxxxxxxxxxxxx&auth_token=xxxxxxxxxxxxxxxxxxxxxxxxxxxxx"

-F 文件名=@FILE_NAME \

-F 文件夹ID=文件夹ID

任何帮助将不胜感激，在此先感谢。

# javascript - javascript是否可以引用创建它的脚本元素？

> ID：12958303
> 
> 赞同：0
> 
> 时间：2012-10-18T15:32:50.257
> 
> 标签：javascript, jquery, html

> **可能重复：**
> [如何引用加载当前执行脚本的脚本标签？](https://stackoverflow.com/questions/403967/how-may-i-reference-the-script-tag-that-loaded-the-currently-executing-script)
> [您可以选择包含 JavaScript 的脚本元素吗？](https://stackoverflow.com/questions/6779515/can-you-select-the-script-element-that-included-the-javascript)

有什么`identifyScript`可以使这项工作？jQuery 也很酷：

```
<script type="text/javascript" id="script1">
    function identifyScript(){...}
</script>
<script type="text/javascript" id="script1">
    identifyScript(); //This function would alert "script1"
</script>
<script type="text/javascript" id="script2">
    identifyScript(); //This function would alert "script2"
</script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T15:36:28.387

只要保证脚本文件是按顺序加载的（这意味着，**不是异步的），您就可以***在*每个 javascript 文件中调用以下代码：

```
var scripts        = document.getElementsByTagName( 'script' ),
    lastTag        = scripts[ scripts.length - 1 ];

alert( lastTag.id ); 
```

但是，一旦这些元素中有`async`or`defer`属性，这个概念就会中断。`<script>`这些属性中的每一个都允许浏览器延迟脚本的加载，并且不再保证顺序。

但是，如果您在没有任何*异步*标志的情况下加载文件，这将正常工作，因为每个脚本都访问最后插入的`<script>`节点，该节点必须是从中加载的节点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T15:38:04.570

```
<script type="text/javascript">
    function identifyScript() {
        scripts = document.getElementsByTagName("script");
        alert(scripts[scripts.length - 1].id);
    }
</script>
<script type="text/javascript" id="script1">
    identifyScript(); //This function would alert "script1"
</script>
<script type="text/javascript" id="script2">
    identifyScript(); //This function would alert "script2"
</script> 
```

这是有效的，因为在每个块中运行时，该块是最后一个存在的块，因此也是集合中的最后一个。

# sql - 当表连接到自身时，WHERE 子句如何工作？

> ID：12958307
> 
> 赞同：2
> 
> 时间：2012-10-18T15:33:02.463
> 
> 标签：sql, teradata

我正在重写一个由 Business Objects 生成并使用“老式”隐式连接语法的查询。该代码将一个表与自身连接在一起，并且还有一个“全局”where 子句。例如：

```
select   a.col1
       , b.col2
from     MYDB.TABLE a, MYDB.TABLE b
where    a.something=b.something_else
     and MYDB.TABLE.source='A' 
```

以上是对问题的虚构说明。实际查询很长，大概要连接十张表。

我的问题：如上所述，“额外”条件是否适用于同一张表的两个实例？我认为是的，但我以前从未见过这样的代码。我正在使用 Teradata，但我认为这是一个一般的 SQL 问题。

**更新：** 也许我试图缩小问题的范围并不准确。这是我要修改的完整查询：

```
SELECT
  abs_contrct_prof.contrct_nbr_txt,
  gbs_org_LVL1.bus_pln_sgmnt_cd,
  abs_gnrc_lst_of_val_LVL1.wirls_val_1_txt
FROM
  EDWABSUSERVIEWS.abs_contrct  abs_contrct_prof,
  EDWABSUSERVIEWS.gbs_org  gbs_org_LVL1,
  EDWABSUSERVIEWS.abs_gnrc_lst_of_val  abs_gnrc_lst_of_val_LVL1,
  EDWABSUSERVIEWS.abs_contrct,
  EDWABSUSERVIEWS.gbs_sls_actv_blng_org_rltd,
  EDWABSUSERVIEWS.gbs_sls_actv_org_rltd
WHERE
  ( abs_contrct_prof.type_cd = 'PROFILE'  )
  AND  ( EDWABSUSERVIEWS.abs_contrct.type_cd = 'AGREEMENT'  )
  AND  ( abs_contrct_prof.prnt_contrct_id=EDWABSUSERVIEWS.abs_contrct.contrct_id  )
  AND  ( abs_contrct_prof.org_id=EDWABSUSERVIEWS.gbs_sls_actv_org_rltd.org_id  )
  AND  ( EDWABSUSERVIEWS.gbs_sls_actv_org_rltd.gbs_lvl_3_org_id=EDWABSUSERVIEWS.gbs_sls_actv_blng_org_rltd.gbs_lvl_3_org_id  )
  AND  ( EDWABSUSERVIEWS.gbs_sls_actv_blng_org_rltd.gbs_lvl_1_org_id = gbs_org_LVL1.org_id  )
  AND  ( gbs_org_LVL1.bus_pln_sgmnt_cd=abs_gnrc_lst_of_val_LVL1.nm_txt and abs_gnrc_lst_of_val_LVL1.actv_ind = 'Y' and abs_gnrc_lst_of_val_LVL1.type_cd ='ABS_MOBILITY_SEGMENT'  )
  AND  
  abs_contrct_prof.contrct_nbr_txt  IN  @variable('FAN')
  AND  ( EDWABSUSERVIEWS.abs_contrct.sts_cd = 'Active'  )
  AND  ( EDWABSUSERVIEWS.abs_contrct.type_cd='AGREEMENT'  ) 
```

请注意，该表`EDWABSUSERVIEWS.abs_contrct`在 FROM 子句中被引用两次，一次使用别名，一次不使用。是的，这个查询按书面形式工作，但我想重写它以使用显式连接语法（正如有人评论的那样）。

我对查询进行了解释，似乎“额外”条件（用于“活动”和“协议”）实际上分别应用于表的两个实例。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T15:36:34.760

> “额外”条件是否适用于同一张表的两个实例？

不，它没有。它仅适用于表的一个实例。

另外，这样写的查询不正确，它应该（并且可能会）在大多数 SQL 实现中给出错误。您必须命名`a`或`b`：

```
select   a.col1
       , b.col2
from     MYDB.TABLE a, MYDB.TABLE b
where    a.something=b.something_else
     and a.source = 'A'                     --or:--   and b.source = 'A' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T16:27:11.673

如果您`TRANSACTION MODE`是`TERADATA`优化器，则优化器会将子句中的完全限定表引用与`WHERE`包含 INNER JOIN 结果的假脱机文件相结合。我还不能用`TRANSACTION MODE`set to测试这个`ANSI`。

**例子**

```
CREATE VOLATILE TABLE Test1
    (
        Col1 SMALLINT NOT NULL,
        col2 VARCHAR(10) NOT NULL
    )
    PRIMARY INDEX (Col1)
    ON COMMIT PRESERVE ROWS;

CREATE VOLATILE TABLE Test2
    (
        Col1 SMALLINT NOT NULL,
        col2 VARCHAR(10) NOT NULL
    )
    PRIMARY INDEX (Col1)
    ON COMMIT PRESERVE ROWS;

SELECT A.Col1
     , B.Col2
     , Test1.Col1
  FROM Test1 A
     , Test2 B
 WHERE A.Col1 = B.Col1
   AND Test1.Col1 = 1; 
```

**解释 - Teradata 模式**

```
 1) First, we do an all-AMPs JOIN step from USER.B by way of a RowHash
     match scan with no residual conditions, which is joined to USER.A
     by way of a RowHash match scan with no residual conditions. 
     USER.B and USER.A are joined using a merge join, with a join
     condition of ("USER.A.Col1 = USER.B.Col1").  The result goes into
     Spool 2 (one-amp), which is redistributed by the hash code of (9)
     to all AMPs.  The size of Spool 2 is estimated with low confidence
     to be 1 row (15 bytes).  The estimated time for this step is 0.02
     seconds. 
  2) Next, we do a single-AMP JOIN step from Spool 2 (Last Use) by way
     of an all-rows scan, which is joined to USER.Test1 by way of the
     primary index "USER.Test1.Col1 = 1" with no residual conditions. 
     Spool 2 and USER.Test1 are joined using a product join, with a
     join condition of ("(1=1)").  The result goes into Spool 1
     (all_amps), which is built locally on that AMP.  The size of Spool
     1 is estimated with low confidence to be 1 row (22 bytes).  The
     estimated time for this step is 0.01 seconds. 
  3) Finally, we send out an END TRANSACTION step to all AMPs involved
     in processing the request.
  -> The contents of Spool 1 are sent back to the user as the result of
     statement 1\.  The total estimated time is 0.03 seconds. 
```

**更新**

```
INSERT INTO Test1 VALUES (1,'C');
INSERT INTO Test1 VALUES (2,'D');
INSERT INTO Test2 VALUES (1, 'C1');
INSERT INTO Test2 Values (2, 'D2'); 
```

**结果**

```
Col1  Col2  Test1.Col1
----++----++----------
1     C1    1
2     D2    1 
```

过滤条件未应用于`FROM`子句中的表。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-18T15:44:54.317

dbms 在解析查询时所做的第一件事（就像它所做的那样）是从所有表构造函数（FROM 子句、JOIN 等）构建一个工作表。

紧接着*，* dbms （就像它一样）进入 WHERE 子句，并从工作表中删除所有未测试为 TRUE 的行。

因此，*有效*的WHERE 子句适用于工作表中的所有行。暴躁的 Joe Celko 是早期 SQL 标准委员会的成员，他经常在网上写过关于[处理顺序的文章。](http://social.msdn.microsoft.com/Forums/en-US/transactsql/thread/a15ae946-90bc-440c-9b7c-118f1dec0347/)（在该链接中搜索主题以获取*Effectively materialize*。）

# wcf - EF 不支持 FirstOrDefault

> ID：12958312
> 
> 赞同：0
> 
> 时间：2012-10-18T15:33:14.440
> 
> 标签：wcf, entity-framework

我正在使用 EF，当我在表上使用 FirstOrDefault 时，我收到一条错误消息，指出它不受支持。我正在通过 WCF 拨打电话。这是问题吗？为什么不支持？为什么我必须做一个

```
Where(...).FirstOrDefault(); 
```

而不仅仅是

```
FirstOrDefault(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T15:34:07.683

你可以做`FirstOrDefault`一个`IEnumerable`

# bash - 是否可以将多个流的内容输出到终端的单独列中？

> ID：12958313
> 
> 赞同：3
> 
> 时间：2012-10-18T15:33:17.353
> 
> 标签：bash, awk, grep, less-unix

为了工作，我偶尔需要监控我创建的服务的输出日志。这些日志是短暂的，并且包含很多我不一定需要的信息。到目前为止，我一直在使用以下方法观察它们：

```
grep <tag> * | less 
```

其中`<tag>`是 INFO、DEBUG、WARN 或 ERROR。警告的数量大约是错误的 10 倍，调试的数量是警告的 10 倍，依此类推。在大量相关的 DEBUG 消息中很难发现一个错误。例如，我想要一种方法，让所有“警告”消息出现在终端的左侧，所有“错误”消息出现在右侧。

我曾尝试使用 tmux 和 screen，但它似乎不适用于我的开发机器。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T15:37:55.710

尝试这样做：

```
FILE=filename.log
vim -O <(grep 'ERR' "$FILE") <(grep 'WARN' "$FILE") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T15:40:22.130

如果这些是实时日志，那么如何在不同的终端中运行这两个命令：

错误：

```
tail -f * | grep ERROR 
```

警告：

```
tail -f * | grep WARN 
```

### 编辑

要自动执行此操作，您可以在 tmux 会话中启动它。我倾向于使用类似于我[在此处](https://unix.stackexchange.com/a/38488/17666)描述的 tmux 脚本来执行此操作。

在您的情况下，脚本文件可能包含如下内容：

*监视器.tmux*

```
send-keys "tail -f * | grep ERROR\n"
split
send-keys "tail -f * | grep WARN\n" 
```

然后像这样运行：

```
tmux new -d \; source-file monitor.tmux; tmux attach 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-18T16:54:37.147

只需使用 sed 缩进所需的行。或者，使用颜色。例如，要将 ERRORS 设为红色，您可以执行以下操作：

```
$ r=$( printf '\033[1;31m' )  # escape sequence may change depending on the display
$ g=$( printf '\033[1;32m' )
$ echo $g  # Set the output color to the default
$ sed "/ERROR/ { s/^/$r/; s/$/$g/; }" * 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T15:53:53.610

[您可以使用screen](http://en.wikipedia.org/wiki/GNU_Screen)来做到这一点。只需垂直拆分屏幕并`tail -f LOGFILE | grep KEYWORD`在每个窗格上运行。

作为快捷方式，您可以使用以下 rc 文件：

```
split -v
screen bash -c "tail -f /var/log/syslog | grep ERR"
focus
screen bash -c "tail -f /var/log/syslog | grep WARN" 
```

然后`screen`使用以下命令启动您的实例：

```
screen -c monitor_log_screen.rc 
```

您当然可以通过进行更多拆分和使用命令来进一步扩展此概念，例如`tail -f`和`watch`获取不同输出的实时更新。

还可以探索 screen 的其他屏幕功能，例如使用多个窗口（带[监控](http://www.gnu.org/software/screen/manual/screen.html#Monitor)）和[hardstatus](http://www.gnu.org/software/screen/manual/screen.html#Hardstatus)，您可以想出一个非常全面的“监控控制台”。

# css - 基于 a:link 的悬停隐藏/显示的 CSS 选择器

> ID：12958314
> 
> 赞同：0
> 
> 时间：2012-10-18T15:33:19.180
> 
> 标签：css, css-selectors

我在确定应该与我的 CSS 一起使用哪个选择器或选择器层次结构来显示“子菜单”时遇到了一些麻烦。

我想让子菜单基于`a:link`在一个完全独立`<nav>`的`<ul>`.

我只是不确定如何编写 CSS 以获得该效果

HTML

```
<div class="row">
    <nav id="nav" class="nav-holder">
        <ul id="nav" class="menu">
            <li><a href="#">Links!</a></li>
            <li><a href="#">Links!</a></li>
            <li><a href="#">Links!</a></li>
            <li><a href="#">Links!</a></li>
            <li><a href="#">Links!</a></li>
            <li><a href="#">Links!</a></li>
        </ul>
    </nav>
    </div>
    <div class="cleared"></div>

    <div class="row">
        <div class="submenunav"></div>
    </div> 
```

错误的 CSS

```
.submenunav { display:none;}

#nav ul#nav li a:hover .submenunav {
   position:absolute;
   z-index:500;
   display:block;
   margin:0px;
   padding:0px;
   width:940px;
   height:200px;
   background:#E9EAEE;
   border-bottom:9px #67B7E1 solid;
   box-shadow:0 8px 6px -6px black;
}​ 
```

我的小提琴 - [http://jsfiddle.net/NVwks/](http://jsfiddle.net/NVwks/)

期望的效果是子菜单块基于悬停在任何链接上出现，尽管最终我将为`a:links`独特的子菜单提供独特的类。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T15:36:07.473

这里的问题是您的`a:link`元素包含在您的`nav`元素中，正如您所说，它与您要显示的子菜单元素完全分开。`:hover`结构中的这种分离使得单独使用和其他 CSS 选择器是不可能实现的。

重组标记的空间似乎不大，因此您可能必须使用脚本来实现所需的功能。

# syslog - syslog-ng 安装完成，但没有所需文件

> ID：12958324
> 
> 赞同：0
> 
> 时间：2012-10-18T15:33:47.320
> 
> 标签：syslog, syslog-ng

我从站点下载了 syslog-ng OSE（版本 3.4.0alpha3）成功运行

```
./configure
make
make install 
```

但我没有 /etc/syslog-ng.conf 也没有 /etc/init.d/syslog-ng

可能是什么原因？

环境是centos 6.3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T15:24:01.303

`/usr/local`这会在您的配置下安装 syslog-ng ，`/usr/local/etc/syslog-ng.conf`请检查`./configure --help`选项。

据我记得，源代码树中有初始化脚本示例，但不是自动安装的。

# java - 为什么我们需要在数据源中提供密码？

> ID：12958327
> 
> 赞同：2
> 
> 时间：2012-10-18T15:34:00.507
> 
> 标签：java, jdbc, datasource

我只想了解数据库连接如何通过数据源工作。

当我们设置数据源时，我们需要提供用户名/密码。但是，如果您想通过数据源检索连接，我们仍然提供另一个用户名/密码。

```
datasource.getConnection(username,password) 
```

对比

```
datasource.getConnection(); 
```

我们为什么要这样做？那是冗余吗？

我希望有人可以帮助我澄清这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T15:39:22.993

我不这么认为：这是通过 DataSource 获得连接的代码：

```
try {

    Context initialContext = new InitialContext();
    DataSource datasource = (DataSource)initialContext.lookup(DATASOURCE_CONTEXT);
    Connection con = datasource.getConnection();
    }catch(Exception e) {} 
```

现在在这里我在获取连接时没有提供 uname/passw，因为它们已经在 mysql-ds.xml [my environ jboss, mysql] 中指定。

没有 JNDI：

```
oracle.jdbc.pool.OracleDataSource ds = new oracle.jdbc.pool.OracleDataSource();
ds.setDriverType("thin");
ds.setServerName("localhost");
ds.setPortNumber(1521);
ds.setDatabaseName("XE"); // Oracle SID
Connection con = ds.getConnection(user, password); 
```

请让我知道这可不可以帮你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T23:28:21.560

在多用户系统中，可能会使用一个id/pwd部署数据源，而不同用户（不同用户id/pwd）使用相同部署的数据源获得连接。

# jquery - 有没有办法查看 jQuery 生成的实际 JavaScript？

> ID：12958329
> 
> 赞同：0
> 
> 时间：2012-10-18T15:34:05.167
> 
> 标签：jquery

显而易见，jQuery 非常适合初学者，因为它可以帮助我们编写更少的代码，但它需要引用一个大文件。我认为没有工具可以将用 jQuery 编写的代码转换为 vanilla JavaScript。有什么好的方法可以利用我对 jQuery 的知识为复杂的场景快速编写/生成 vanilla JavaScript？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-18T15:35:32.593

jQuery 是原生 JavaScript。没有完成翻译或代码生成。你只是在调用函数。如果您想知道这些函数的作用，请下拉未缩小的代码并查看您感兴趣的函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T15:36:58.597

jQuery 是一个库，是一个函数集合，有助于更简单地完成复杂的工作。

用 jQuery 编写的代码是普通的 javascript。你可以看看他们的[**未压缩源代码**](http://code.jquery.com/jquery.js)

对于初学者，您可以使用此站点的[**jQuery Source Viewer**](http://james.padolsey.com/jquery/#v=git&fn=)来浏览任何特定功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T15:36:06.843

您可以随时阅读 jQuery 源代码：

[http://james.padolsey.com/jquery/](http://james.padolsey.com/jquery/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-18T15:36:16.390

JQuery 只是一个包装器 - 它有很多用普通 javascript 编写的函数，所以你可以做的是：

1.  深入研究 jquery 源代码并查看函数以了解它们在做什么。

2.  在浏览器中打开调试模式并查看调用了哪些函数以及具体执行的操作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-18T15:36:09.167

jQuery 不生成 javascript，jQuery 是 javascript。没有简单的方法可以自动将其转换为 vanilla javascript，因为它是 vanilla javascript。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-18T15:39:56.253

那么你可以看看当前版本的开发文件：http: [//code.jquery.com/jquery-1.8.2.js](http://code.jquery.com/jquery-1.8.2.js)

但正如这里的一些人已经说过的那样：jQuery 不会生成任何 Javascript。jQuery 是一个库，用 Javascript 编写。

利用您的 jQuery 知识快速编写 vanilla Javascript 的一个好方法是实际使用 jQuery。jQuery 之所以出名，是因为它抽象了很多东西并使任务变得简单，这在普通的 javascript 中会很痛苦。

恕我直言，还学习了一些关于闭包、函数（以及它们在 JS 中的几率）和 javascript 中的作用域的知识。这将使您对 javascript 的了解比网络上的大多数人拥有的更扎实。你越了解 JS 的实际工作原理，你的代码就会越好。

# direct3d - 如何访问由 direct3D 渲染的 2D 点？

> ID：12958330
> 
> 赞同：2
> 
> 时间：2012-10-18T15:34:05.260
> 
> 标签：direct3d

这是我的第一个 direct3d 程序。我什至不知道要搜索的关键字。我已经建立了一个简单的 3D 世界和一个相机。我需要掌握为给定相机位置渲染的实际像素坐标。我还需要知道屏幕空间中的点映射到哪些 3D 点。截至目前，我的代码调用：

```
device.DrawIndexedPrimitives(PrimitiveType.TriangleList, 0, 0, vertexBuffer.VertexCount, 0, indexBuffer.IndexCount / 3); 
```

这个电话对我来说是一个黑匣子。如果此调用仅返回屏幕空间中与我传递给它的顶点相对应的二维点列表，我的问题将得到解决。

如果没有办法做我正在寻找的东西，那么我能得到的最接近的东西是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T05:43:01.670

For each vertex you are rendering, you can apply it with the world, view and projection matrix to get the protective points on the screen. By the way, why do you need the screen points?

# ios6 - 如何在 Xcode 中设置 passkit 权利

> ID：12958331
> 
> 赞同：2
> 
> 时间：2012-10-18T15:34:06.090
> 
> 标签：ios6, xcode4.5, passbook

我在配置文件中创建了一个通行证 ID，生成了证书和私钥，我们的服务器代码可以生成通行证。但是我无法弄清楚如何使项目权利与 passkit 一起使用。你如何将 pass id 与你的 app id 或 bundle id 或其他东西相关联？XCode 显示“使用配置文件中的传递类型标识符”选项。然而，门户中似乎没有任何东西可以将个人资料与通行证 ID 联系起来。

我可以在本地设备上进行调试，但如果没有权利，我无法将其分发给任何人。

显然我错过了一些魔法，所有文档都在谈论构建通行证和使用它们，但没有关于构建权利。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T15:18:16.710

显然答案是，什么都没有。Xcode 用户界面令人困惑，但显然您不必做任何事情来支持您的组织创建的任何 pass id。通行证对于您的开发者帐户是唯一的，而不是您的任何特定应用程序。

这一次，我希望 Apple 能够真正记录 XCode UI 中的新功能。

# r - 比较两个匹配名称的字符向量

> ID：12958335
> 
> 赞同：5
> 
> 时间：2012-10-18T15:34:15.707
> 
> 标签：r

我有两个具有不同名称和值集的字符向量：

```
x <- c("a", "b", "c", "d", "e")
names(x) <- c("foo", "bar", "baz", "qux", "grault")

y <- c("c", "a", "d", "b")
names(y) <- c("bar", "foo", "qux", "corge") 
```

有没有办法比较`x`，`y`以便我们知道它们对应于名称的值`bar`是不同的，因为这里`x.bar = "b"`和`y.bar = "c"`？请注意，这些名称没有排序。我试过了`setdiff`，`which(x != y)`但没有人给我正确的答案。谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-18T15:41:05.657

你可以这样做：

```
x[intersect(names(x), names(y))] == y[intersect(names(x), names(y))] 
```

# iphone - CATiledLayer 没有排列“层”

> ID：12958342
> 
> 赞同：0
> 
> 时间：2012-10-18T15:34:30.900
> 
> 标签：iphone, ios, uiscrollview, catiledlayer

我在滚动视图中有一个 CATiledLayer。

总图像为 11,000 x 17,000，我已将其切成 256 x 256 的图块。

当我处于放大模式时，它与`UIScrollview`完美配合`CATiledLayer`，我可以看到它们都在闪烁，我可以滚动到照片的所有边缘。

但是，我有第二层细节，它使用大小为 1650 × 2550 的图像，我也将其切割成 256 x 256 的图块。

我遇到的问题是当我缩小`UIScrollView`并且低分辨率图像接管图像时，图像被移动并被底部和右侧的黑色包围。即滚动视图内容大小仍然是相同的大小，并且显示的图像在左上角非常小。

当详细程度发生变化时，我需要做些什么吗？

这是我第一次使用，`CATiledLayer`所以我可能会错过一些东西。

：：编辑：：

我知道如何更好地解释它。正在加载和绘制低分辨率图块，但它们以与高分辨率图块相同的物理尺寸绘制。

# php - PHP Soap 连接周期性故障

> ID：12958346
> 
> 赞同：0
> 
> 时间：2012-10-18T15:34:44.870
> 
> 标签：php, soap, salesforce

我正在使用 Fore.com PHP 工具包与 SFDC API 集成。

我将应用程序托管在客户的办公室中，并且在连接超时且无法连接到销售人员主机时出现周期性错误。

该应用程序在我的笔记本电脑上运行良好，无论我使用的是何种互联网连接。我还在许多环境中使用过这个库，因此确信这不是代码问题。

有人可以推荐一种方法，我可以分析此盒子上的连接情况，以便我可以向客户的系统管理员证明/阐明问题吗？我们现在有点互相指责，想找到解决办法。

我意识到我可以增加应用程序的超时时间，但是为了使应用程序对客户端实用，他们不能在通过向导运行时等待很长时间才能建立连接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T10:44:40.407

我遇到了同样的问题，当我联系 SFDC 支持时，他们提到
这个问题是因为 SFDC 服务器的性能下降。

当我检查[http://trust.salesforce.com](http://trust.salesforce.com)以验证系统状态时，没有降级记录。

[当被问到时，SFDC 支持人员提到http://trust.salesforce.com](http://trust.salesforce.com)上没有提到它，只是时间很短。

他们还建议调用 PHP 脚本应该有重试机制，以便在放弃之前尝试 3 次左右。

希望这可以帮助你。

# ios - iOS 中提供了哪些用户统计数据？

> ID：12958349
> 
> 赞同：0
> 
> 时间：2012-10-18T15:35:06.303
> 
> 标签：ios

`NSLocale preferredLanguages`提供用户选择的语言，并`UIDevice`提供一些其他设备信息，如硬件型号和操作系统版本。

但是还有其他人口统计数据，例如性别和生日吗？还是只有通过提示用户才有可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T16:03:39.383

不，此信息无法从设备获得，您也无法访问 Apple id 信息。您可以要求用户提供此信息，并要求用户提供他在联系人应用程序数据库中的联系信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T16:10:15.793

你最好的选择是[Flurry](http://flurry.com)。他们拥有从用户使用的其他应用程序提供的信息获得的人口统计数据。他们还有一种算法可以最好地猜测他们没有信息的人口统计数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T16:14:06.417

正如所评论的，此信息不可从设备获得。如果您想按性别或年龄估计应用程序的使用情况，那么我建议您集成[Flurry](http://www.flurry.com)：

> Flurry Estimates 分析使用 Flurry Analytics 的所有应用程序的人口统计分布，并尝试确定可用信息不完整的应用程序的人口统计数据。与基准测试类似，此过程在匿名数据上聚合运行，因此不会将任何个人数据用于给定的个人或应用程序。估计的准确性因许多因素而异，包括用户是否在您的应用中向您传递人口统计信息。您收集并提供给 Flurry Analytics 的数据越多，对您所有用户的估计就越准确。

不幸的是，不可能根据人口统计数据以编程方式做出反应。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T16:02:39.880

获得此信息的最佳机会是询问用户访问设备联系人的权限（ABAddressBook 框架），然后要求他们从该列表中识别自己（称之为“设置帐户”）。我在自己的一个应用程序中执行此操作。

尽管 iOS 在内置的联系人应用程序中使用启发式方法来识别设备用户“我”，但它不支持通过框架以编程方式获取相同的信息。

即便如此，联系人也不会记录性别，用户输入生日的可能性很小。

# c# - 如何使用 SyndicationFeed 类合并提要？

> ID：12958353
> 
> 赞同：0
> 
> 时间：2012-10-18T15:35:21.897
> 
> 标签：c#, xml, rss, syndicationfeed

我想知道如何使用 SyndicationFeed 类合并几个 RSS 提要？

# php - Codeigniter 缩短网址

> ID：12958356
> 
> 赞同：0
> 
> 时间：2012-10-18T15:35:27.343
> 
> 标签：php, codeigniter

是否可以在 codeigniter 中创建这样的 url？ [http://site.com/shorturl/](http://site.com/shorturl/)

其中 shorturl 不是物理控制器文件，而是变量。

我希望解析 url 查询的算法是这样的：1）搜索物理控制器文件。如果存在，请执行标准的 codeigniter 例程。如果不是 2) 尝试加载特殊的控制器文件，其中“shorturl”是一个变量。在该控制器内做进一步的事情。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T15:52:09.307

以前的答案似乎很好，但我想我会分享我的想法。

如果你设置你`404_override`的指向一个控制器，你已经设置如下：

```
$route['404_override'] = 'welcome/short'; 
```

任何不存在的 URL（例如任何短 URL）都会被发送到那里，您可以在其中执行以下操作来检查值：

```
public function short() {

    $shortCode = $this->uri->segment(1);

} 
```

这将为您提供需要检查的值。如果一切顺利，进行重定向，如果代码不存在，则可以使用该`show_404`方法实际显示 404 页面。

# ninject - NInject 对 GetHashCode 的假设是什么？

> ID：12958357
> 
> 赞同：1
> 
> 时间：2012-10-18T15:35:28.543
> 
> 标签：ninject

Ninject 使用一种`ActivationCacheStrategy`策略，将对象简单地存储在哈希映射中。这意味着对象的 GetHashCode 方法必须可用。我有类似以下的情况：

```
var something = kernel.Get<ISomething>();
something.Load() { 
```

它执行以下操作：

```
var objectA = kernel.Get<IFoobar>();
objectA.Init(...);

var objectB = kernel.Get<IFoobar>();
objectB.Init(...) 
```

等等

问题是在调用 Init 之前 objectA 的 GetHashCode 不可用。似乎 Ninject 假定 GetHashCode 在对象完全激活之前可用。

我的问题是这种行为是否是有意的，如果是，那么预期的解决方案是什么。我当然可以向我的内核添加各种非缓存激活缓存（删除默认值），但这感觉不对。

# php - 对于不稳定的排序，我如何对待相等的项目有关系吗？

> ID：12958358
> 
> 赞同：3
> 
> 时间：2012-10-18T15:35:31.377
> 
> 标签：php, sorting

我试图在 PHP 中简化一个人为的回调函数以进行排序。

```
function my_sort($a, $b) {
    if($a == $b) return 0;
    return $a < $b ? 1 : -1;
} 
```

根据[有关 usort 的 PHP 文档](http://www.php.net/manual/en/function.usort.php#38827)，当您返回 equal 时，顺序未定义。

这是否意味着我可以完全跳过平等测试？

```
function my_sort($a, $b) {
    return $a < $b ? 1 : -1;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T15:45:59.200

正如@lanzz 所说，以这种方式编写排序函数会降低效率。相等的元素将被视为不相等（= 应该重新排序），因此排序函数的调用次数会更高。

例如：

```
$aops = 0;
$x = array(1, 1, 1, -1, -1, -1, 0, 0, 0);
usort($x, function($a, $b) use (&$aops) { $aops++; return $a < $b ? -1 : 1; });
var_dump($aops); // 34

$bops = 0;
$x = array(1, 1, 1, -1, -1, -1, 0, 0, 0);
usort($x, function($a, $b) use (&$bops) { $bops++; return $a === $b ? 0 : ($a < $b ? -1 : 1); });
var_dump($bops); // 17 
```

但是，如果*保证*已排序数组的所有元素都是唯一的，这显然不是问题。

# silverlight - Silverlight WCF 服务部署设置

> ID：12958363
> 
> 赞同：1
> 
> 时间：2012-10-18T15:35:46.640
> 
> 标签：silverlight

我一直在尝试使用 WCF 服务部署我的 Silverlight 应用程序，并且在调用该服务时不断收到通信错误。我希望大家看看我的配置文件，看看你们是否发现任何不合适的地方。我的 WCF 服务位于同一个项目中。

**网络配置**

```
<system.serviceModel>
    <bindings>
      <basicHttpBinding>
        <binding name="PCCWITCGenerator.Web.Services.ITCGeneratorService.customBinding0"
                 closeTimeout="03:00:00"
                 openTimeout="03:00:00"
                 receiveTimeout="03:00:00"
                 sendTimeout="03:00:00">
        </binding>
      </basicHttpBinding>
    </bindings>
    <behaviors>
      <serviceBehaviors>
        <behavior name="ITCGeneratorService">
          <serviceMetadata httpGetEnabled="True"/>
          <serviceDebug includeExceptionDetailInFaults="true"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <services>
      <service behaviorConfiguration="ITCGeneratorService" name="ITCGeneratorService">
        <endpoint address="/ITCGeneratorService/"
                  binding="basicHttpBinding"
                  bindingConfiguration="PCCWITCGenerator.Web.Services.ITCGeneratorService.customBinding0"
                  contract="PCCWITCGenerator.Web.Services.ITCGeneratorService">
          <identity>
            <dns value="localhost"/>
          </identity>
        </endpoint>
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>
        <host>
          <baseAddresses>
            <add    baseAddress="http://localhost:38095/ITCGeneratorService/PCCWITCGenerator.Web.Services.ITCGeneratorService.svc"/>
          </baseAddresses>
        </host>
      </service>
    </services>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true" multipleSiteBindingsEnabled="true" />
  </system.serviceModel> 
```

**ServiceReferences.ClientConfig**

```
<configuration>
    <system.serviceModel>
        <bindings>
            <basicHttpBinding>
                <binding name="CustomBinding_ITCGeneratorService" closeTimeout="03:00:00"
                    openTimeout="03:00:00" receiveTimeout="03:00:00" sendTimeout="03:00:00"
                    maxBufferSize="2147483647" maxReceivedMessageSize="2147483647"/>
            </basicHttpBinding>
        </bindings>
        <client>
            <endpoint address="http://10.30.20.58:38095/ITCGeneratorService/PCCWITCGenerator.Web.Services.ITCGeneratorService.svc"
                binding="basicHttpBinding" bindingConfiguration="CustomBinding_ITCGeneratorService"
                contract="ITCGeneratorServiceReference.ITCGeneratorService"
                name="CustomBinding_ITCGeneratorService" />
        </client>
    </system.serviceModel>
</configuration> 
```

**客户端访问策略.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<access-policy>
  <cross-domain-access>
    <policy>
      <allow-from http-request-headers="SOAPAction">
        <domain uri="http://*"/>
      </allow-from>
      <grant-to>
        <resource path="/" include-subpaths="true"/>
        <socket-resource port="38095" protocol="tcp" />
      </grant-to>
    </policy>
  </cross-domain-access>
</access-policy> 
```

# asp.net-mvc - ASP.NET MVC 中 WIF (Windows Identity Foundation) 的用户名和密码身份验证

> ID：12958364
> 
> 赞同：0
> 
> 时间：2012-10-18T15:35:49.383
> 
> 标签：asp.net-mvc, wif, claims-based-identity, windows-identity

我们有两个现有的旧 Web 应用程序，一个用于在域内使用 Windows 身份验证的 Intranet，另一个用于执行基于用户名 + 密码的自定义 Web 表单身份验证的 Internet 应用程序。现在开发了一个新的 Web 应用程序，并将在 Internet 上提供给 Internet 和 Intranet 用户，处理两种身份验证模型。因此我们决定使用[WIF](http://msdn.microsoft.com/en-us/library/hh377151.aspx)。我们将在 Windows Server 2012 上使用 ASP.NET 4.5 MVC 4。

Intranet 身份验证应该不是问题，因为我们可以在这里使用 ADFS 2.0。

但是我们目前不知道如何解决用户名+密码认证。看起来我们需要开发一个自定义[UserNameSecurityTokenHandler](http://msdn.microsoft.com/en-us/library/ee517261.aspx)来验证提供用户名 + 密码信息的用户，这些信息通过我们的自定义会员提供程序进行验证。但我需要一些帮助来完成整个工作流程......

假设我们有一个互联网用户的自定义登录页面；并假设我们设法将互联网用户路由到这个登录页面（在 ASP.NET MVC 中），从这里到有效令牌的缺失部分是什么？收到提供的用户名 + 密码的表单或 MVC 控制器操作将如何继续触发配置的 WIF 身份提供程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T17:48:58.483

最优雅的解决方案是为外部用户创建另一个 STS，并让 ADFS 信任它作为身份提供者：

![在此处输入图像描述](../Images/bf979ca0fa4ba2ea43c06666efd0f1bc.png)

外部用户将被重定向到将使用 usr/pwd 数据库的 IdP STS。内部用户将直接通过 ADFS 进行身份验证（针对 AD）。

在这种情况下，ADFS 既充当 IdP 又充当*联合提供者*。

为此，您需要 ADFS 和 IdP（以及应用程序）都暴露在互联网上。您可以使用的利用成员资格的 STS 是[IdentityServer](http://thinktecture.github.com/)，它是开源的，您当然可以根据自己的需要进行定制。

使用这种架构，您不需要在应用程序中进行任何特殊的自定义/扩展。不过，您将需要处理“家庭领域发现”。这是知道在哪里对用户进行身份验证的过程（例如 Intranet 与 Extranet）。据推测，您可能有不同的 URL 等。

# jquery - IE 在调用 fadeOut 时崩溃

> ID：12958366
> 
> 赞同：2
> 
> 时间：2012-10-18T15:35:53.253
> 
> 标签：jquery, internet-explorer, jquery-effects

听起来很奇怪，就这么简单。我不明白为什么，但如果我评论淡入淡出它不会崩溃并且工作得很好。

IE 8 &9 中的结果相同

当我说崩溃时，我的意思是我收到以下消息（Windows 7）：

```
Internet Explorer has stopped working, windows will look for solution 
```

我认为你不想看到整个代码，因为涉及到很多 JS，但相关部分是：

```
$('#add_image_upload').fadeOut(1000, function(){
 }); // has some commented code inside 
```

html：

```
 <div id="add_image_upload">
<form action="http://localhost/ci/index.php/do_upload" 
    method="post" accept-charset="utf-8" enctype="multipart/form-data">
    <span id="fileinput_button_label">TEXT</span>
    <input type="file" name="userfile" id="fileupload_input" multiple="">
     </form>
</div> 
```

有谁知道这可能是什么原因？是否与内存大小有关，因为我在此页面中做了很多 jQuery 效果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T13:30:10.647

显然，在输出一些 HTML 时，我忘记在结束标记中添加 /，其他浏览器会自动更正它，所以它可以正常工作，但 IE 不能。

如果发生这种情况，请确保您的 HTML 有效。

# php - 在 PHP 中创建两个等高的随机纵向和横向图像列

> ID：12958367
> 
> 赞同：5
> 
> 时间：2012-10-18T15:35:58.730
> 
> 标签：php, image, landscape, portrait

**给定随机数量的纵向和横向图像，我正在尝试编写 PHP 代码以输出两列等高：**

*   通过将值“1”分配给横向图像并将“2”分配给肖像，我的想法是将总图像（$totalphotos）除以二，然后检查图像值（$photoval）是否不超过该数字因为它遍历循环。
*   例如，如果您总共有 6 张图像，并且第一列已经有 2 张风景图像，并且它遇到的第三张图像是肖像，它将重新排列数组 (array_splice) 并将肖像图像向下移动，然后继续下一个图片。
*   如果输出已经创建了两个等高的列（比如第一列中的 3 个横向，第二列中的 1 个横向 + 1 个纵向，则丢弃最后一个图像）

我不确定我的方法在循环期间尝试输出 html 是否正确，或者是否更有意义分析数组并首先重新排序图像，然后创建第二个循环来输出 html。

我的代码有点脏，我的“array_splice”方法甚至可能不完全正确。如果你看到更好的方法，请随意废弃我的代码，给我看更好的东西！任何帮助是极大的赞赏！！

```
<?php

     $photoval = 0;
     $totalcolumns = 0;
     $totalphotos = count($photos);

     for ($counter = 0; $counter < $totalphotos; $counter++) :

            $photo = $photos[$counter];

            if ($photoval == 0) echo "        <div class=\"column\">\n";

            if ($photo['orientation'] == "portrait" && $photoval >= $totalphotos/2) {
            if ($counter == $totalphotos)
                    echo "        </div>\n";                
                    array_splice($photos, $counter, 1, array($photo));

                    continue;
            }
?>
     <div class="<? echo $photo['orientation'] ?> thumbnail">
          <a href="<?php echo $photo['link'] ?>">
               <img src="<?php if ($photo['orientation'] == "landscape") echo $photo['src']; else echo $photo['src_medium'];?>" alt="<? echo htmlentities($photo['caption'], ENT_QUOTES) ?>">
          </a>
     </div>
<?php
            if ($photoval >= $totalphotos/2 || $counter == $totalphotos) {
                echo "        </div>\n";
                $photoval = 0;
                $totalcolumns++;
                if ($totalcolumns == 2)
                    break;
            }

     endfor;
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T08:24:22.673

这是我的解决方案：

```
<?php

/*
**  Simulated photo array for testing purposes, to be substituted with the real photo array
*/
$photos = array(
  array('orientation' => 'portrait' , 'link' => '#', 'src' => '', 'src_medium' => '', 'caption' => ''),
  array('orientation' => 'portrait' , 'link' => '#', 'src' => '', 'src_medium' => '', 'caption' => ''),
  array('orientation' => 'portrait' , 'link' => '#', 'src' => '', 'src_medium' => '', 'caption' => ''),
  array('orientation' => 'landscape', 'link' => '#', 'src' => '', 'src_medium' => '', 'caption' => ''),
  array('orientation' => 'landscape', 'link' => '#', 'src' => '', 'src_medium' => '', 'caption' => ''),
  array('orientation' => 'landscape', 'link' => '#', 'src' => '', 'src_medium' => '', 'caption' => ''),
  array('orientation' => 'landscape', 'link' => '#', 'src' => '', 'src_medium' => '', 'caption' => ''),
  array('orientation' => 'landscape', 'link' => '#', 'src' => '', 'src_medium' => '', 'caption' => ''),
  array('orientation' => 'landscape', 'link' => '#', 'src' => '', 'src_medium' => '', 'caption' => '')
);

$album = array(
  'portrait'  => array(),
  'landscape' => array()
);

foreach ($photos as $photo) {
  extract($photo);
  $album[$orientation][] = array(
    'orientation' => $orientation,
    'link'        => $link,
    'src'         => ($orientation == 'landscape') ? $src : $src_medium,
    'caption'     => htmlentities($caption, ENT_QUOTES)
  );
}

$columns = array(
  array(),
  array()
);

while (count($album['portrait']) >= 2) {
  if (count($album['landscape']) >= 2) {
    $columns[0][] = array_shift($album['portrait']);
    $columns[1][] = array_shift($album['landscape']);
    $columns[1][] = array_shift($album['landscape']);
  } else {
    $columns[0][] = array_shift($album['portrait']);
    $columns[1][] = array_shift($album['portrait']);
  }
}

while (count($album['landscape']) >= 2) {
  $columns[0][] = array_shift($album['landscape']);
  $columns[1][] = array_shift($album['landscape']);
}

?>
<!DOCTYPE html>
<html>
<head>
  <style>
  .column { width: auto; float: left; border: dashed 1px #666; padding: 10px }
  .column div:not(:last-child) { margin-bottom: 10px }
  .portrait { width: 200px; height: 200px; background-color: red; }
  .landscape { width: 200px; height: 95px; background-color: green; }
  </style>
</head>
<body>
  <?php foreach ($columns as $photos): ?>
  <div class="column">
    <?php foreach ($photos as $photo): ?>
    <div class="<?= $photo['orientation'] ?>">
      <!-- uncomment the following line when using the real photo array -->
      <!-- a href="<?= $photo['link'] ?>"><img src="<?= $photo['src'] ?>"> alt="<?= $photo['caption'] ?>"></a -->
    </div>
    <?php endforeach ?>
  </div>
  <?php endforeach ?>
</body>
</html> 
```

*** 更新 ***

另一种解决方案：

```
<?php

/*
**  Create a random photo array
*/
$photos = array();
$totalphotos = rand(10, 30);
for ($i = 0; $i < $totalphotos; $i++) {
    $o = (rand(0, 1) == 1) ? 'portrait' : 'landscape';
    $photos[] = array('orientation' => $o, 'link' => '#', 'src' => '', 'src_medium' => '', 'caption' => '');
}

//----------------------------------
//--- Here starts the real stuff ---
//----------------------------------

/*
**  The "last" array contains the index of the last added
**  portrait and landscape image in each column of the
**  "album" array
*/
$last = array(
    'portrait' => array(0, 0), 
    'landscape' => array(0, 0)
);

/*
**  Add each photo to the lowest height column
*/
$album = array();
$len  = array(0, 0);
for ($i = 0; $i < $totalphotos; $i++) {
    $o = $photos[$i]['orientation'];
    $c = ($len[0] < $len[1]) ? 0 : 1;
    $len[$c] += ($o == 'portrait') ? 2 : 1;
    $album[$c][] = $i;
    $last[$o][$c] = count($album[$c]) - 1;
}

/*
**  If the columns heights are different,
**  remove the last portrait or landscape image
**  from the highest column
*/
$c = ($len[0] > $len[1]) ? 0 : 1;
$diff = abs($len[0] - $len[1]);
//echo "<pre>diff={$diff}</pre>\n";
if ($diff == 1) {
    unset($album[$c][$last['landscape'][$c]]);
} else if ($diff == 2) {
    unset($album[$c][$last['portrait'][$c]]);
}

?>
<!DOCTYPE html>
<html>
    <head>
        <style>
        .column { border: dashed 1px #666; width: 50px; padding: 0 10px 10px 10px; overflow: auto; float: left; }        
        .column div { margin: 10px 5px 0 0; }
        .portrait { width: 50px; height: 100px; background-color: red; }
        .landscape { width: 50px; height: 45px; background-color: green; }
        </style>
    </head>
    <body>
        <?php for ($c = 0; $c < 2; $c++) { ?>
        <div class="column">
            <?php foreach ($album[$c] as $p): ?>
            <div class="<?= $photos[$p]['orientation'] ?> thumbnail">
                <!--a href="<?= $photos[$p]['link'] ?>"><img src="<?= $photos[$p]['src'] ?>" alt="<?= $photos[$p]['caption'] ?>"></a-->
            </div>
            <?php endforeach ?>
        </div>
        <?php } ?>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T08:42:11.093

## 分成小块

解决任何问题的最简单方法是单独查看每个位，请参见下面的代码：

```
/**
 * Turn the array of photos into 2 equal height columns
 *
 * @param array photos - array of photos
 * @return string
 */
function printPhotos($photos) {
    $cells = buildCells($photos);
    return renderColumns($cells);
}

/**
 * Take the input array, and build an indexed array
 *
 * Use variable references to construct portrait and landscape arrays,
 * and maintain an ordered list such that the original order (after
 * accounting for the cell logic) is maintained.
 * If at the end there is one portrait image on its own - delete it.
 *
 * @param array photos - array of photos
 * @return array
 */
function buildCells($photos) {
    $return = array(
        'ordered' => array(),
        'landscape' => array(),
        'portrait' => array()
    );
    $i = 0;

    foreach($photos as $photo) {
        unset($cell);
        $orientation = $photo['orientation'];

        if ($orientation === 'portrait') {
            if (empty($return['portrait'][$i])) {
                $cell = array();
                $return['portrait'][$i] =& $cell;
                $return['ordered'][] =& $cell;
            } else {
                $cell =& $return['portrait'][$i];
            }
            $cell[] = $photo;

            if (count($cell) === 2) {
                $i++;
            }
        } else {
            $cell = array($photo);
            $return['landscape'][] =& $cell;
            $return['ordered'][] =& $cell;
        }

    }

    if (count($return['portrait'][$i]) === 1) {
        $return['portrait'][$i] = null;
        $return['portrait'] = array_filter($return['portrait']);
        $return['ordered'] = array_filter($return['ordered']);
    }

    return $return;
}

/**
 * Convert the output of buildCells into html
 *
 * @param array cells - indexed array of cells
 * @return string column html
 */
function renderColumns($cells) {
    $orderedCells = renderCells($cells);

    $cellsPerColumn = (int)(count($orderedCells) / 2);
    $columns = array_slice(array_chunk($orderedCells, $cellsPerColumn), 0, 2);

    $return = '';

    foreach($columns as $cellsInColumn) {
        $return .= "<div class=\"column\">\n";
        $return .= implode('', $cellsInColumn);
        $return .= "</div>\n";
    }

    return $return;
}

/**
 * Process portrait and landscape photo-cells
 *
 * Converts the array representation of cells into html, and returns
 * The cells in presentation order
 *
 * @param array cells - indexed array of cells
 * @return array
 */
function renderCells($cells) {
    foreach(array('landscape', 'portrait') as $orientation) {
        foreach($cells[$orientation] as &$cell) {
            $cell = renderCell($cell, $orientation);
        }
    }

    return $cells['ordered'];
}

/**
 * For each photo in the cell - turn it into html
 *
 * @param array cell - array of photo(s)
 * @param string orientation
 * @return string
 */
function renderCell(&$cell, $orientation) {
    $return = "\t<div class=\"cell\">\n";

    foreach($cell as $photo) {
        $return .= renderPhoto($photo, $orientation);
    }

    $return .= "\t</div>\n";

    return $return;
}

/**
 * Convert the photo into a html string
 *
 * @param array photo
 * @param string orientation
 * @return string
 */
function renderPhoto($photo, $orientation) {
    if ($orientation === 'landscape') {
        $src = $photo['src'];
    } else {
        $src = $photo['src_medium'];
    }
    $caption = htmlentities($photo['caption'], ENT_QUOTES);

    $return = "\t\t<div class=\"$orientation thumbnail\">\n";
    $return .= "\t\t\t<a href=\"{$photo['link']}\"><img src=\"$src\" alt=\"$caption\"></a>\n";
    $return .= "\t\t</div>\n";

    return $return;
} 
```

通过创建只做一件事的函数 - 它可以更容易地验证代码是否符合您的期望。该问题中有许多要求，如果将其编写为单个代码块，则难以验证是否满足这些要求。

主要功能是`buildCells`。

## 例子

鉴于此示例数据：

```
$data = array(
    array('src' => 'x', 'src_medium' => 'y', 'orientation' => 'landscape', 'link' => 'z', 'caption' => 'one'),
    array('src' => 'x', 'src_medium' => 'y', 'orientation' => 'portrait', 'link' => 'z', 'caption' => 'two'),
    array('src' => 'x', 'src_medium' => 'y', 'orientation' => 'portrait', 'link' => 'z', 'caption' => 'three'),
    array('src' => 'x', 'src_medium' => 'y', 'orientation' => 'portrait', 'link' => 'z', 'caption' => 'four'),
    array('src' => 'x', 'src_medium' => 'y', 'orientation' => 'landscape', 'link' => 'z', 'caption' => 'five'),
    array('src' => 'x', 'src_medium' => 'y', 'orientation' => 'portrait', 'link' => 'z', 'caption' => 'six'),
    array('src' => 'x', 'src_medium' => 'y', 'orientation' => 'portrait', 'link' => 'z', 'caption' => 'seven')
);

echo printPhotos($data); 
```

问题中包含的代码输出是：

```
<div class="column">
    <div class="cell">
        <div class="landscape thumbnail">
            <a href="z"><img src="x" alt="one"></a>
        </div>
    </div>
    <div class="cell">
        <div class="portrait thumbnail">
            <a href="z"><img src="y" alt="two"></a>
        </div>
        <div class="portrait thumbnail">
            <a href="z"><img src="y" alt="three"></a>
        </div>
    </div>
</div>
<div class="column">
    <div class="cell">
        <div class="portrait thumbnail">
            <a href="z"><img src="y" alt="four"></a>
        </div>
        <div class="portrait thumbnail">
            <a href="z"><img src="y" alt="six"></a>
        </div>
    </div>
    <div class="cell">
        <div class="landscape thumbnail">
            <a href="z"><img src="x" alt="five"></a>
        </div>
    </div>
</div> 
```

一些笔记/分析，跟随。

### 2个等高柱

该方法`renderColumns`采用照片数据的嵌套数组，并首先将其转换为 html 字符串的平面数组。此方法假定每个 html 字符串的尺寸相同（1 个横向图像，或并排的 2 个纵向图像）。如果有奇数个 html 片段 - 它会删除最后一个。

### 没有孤独的肖像图像

该方法`buildCells`检查最后一个肖像图像是否是它自己的，如果是 - 将其删除。如果这不完全是您想要的 - 只需删除 return 语句之前删除孤独的肖像图像的行。

### “单元格”的额外标记

您可能会发现为结果设置样式更容易——用一些一致的 html 包装你的 2 张图像——因此我为单元格 div 添加了一些标记：`div.column > div.cell > div.thumbnail > img`。如果这不是我们想要的 - 再次，很容易删除。

请注意，除非`div.thumbnail`问题中的标记更多，否则没有必要。

## 或者用js做

有两个 js 解决方案，每个都出自同一个作者，它们用 js 做的事情类似于你用 php 做的事情：[masonry](http://masonry.desandro.com/)和[isotope](http://isotope.metafizzy.co/demos/layout-modes.html)。使用 js 可以更轻松地解决各种（不仅仅是两种）大小的图像，以及导致最终 html 大小与预期不同的任何其他渲染怪癖。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-27T19:23:16.363

这是一个很好的问题......好吧，我有一个似乎尽可能高效的解决方案。第一个图像对象在初始堆栈上创建，然后移动到左侧堆栈，只要它有位置，然后移动到右侧堆栈。如果将肖像（2）移动到左侧堆栈并且只有风景（1）的位置，则将风景移动到垃圾堆，并将肖像移动到左侧。右侧的逻辑相同。

只需保存此代码并使用它...（它是自我发布的）

```
<style type="text/css">
    * { margin: 0; padding: 0; }
    ul { list-style-type: none; width: 100px; }
    b { color: white; }
    .landscape { width: 100px; height: 50px; background-color: #f00; }
    .portrait { width: 50px; height: 100px; background-color: #00f; }
</style>

<form action="<?php echo $_SERVER['REQUEST_URI']; ?>" method="get">
    number of images to simulate: <input type="text" name="nimgs" value="<?php if(isset($_REQUEST['nimgs'])) echo intval($_REQUEST['nimgs']); else echo 10; ?>" /><br/>
    <input type="submit">
</form><br/>
<hr/>

<?php

    class ImageStack
    {
        public $images, $height;
        function __construct()
        {
            $this->images = array();
            $this->height = 0;
        }
        function push($image)
        {
            if( $image === false ) return; # catch failed calls to pop()
            $this->height += $image['height'];
            array_push( $this->images, $image );
        }
        function shift()
        {
            $image = array_shift( $this->images );
            $this->height -= $image['height'];
            return $image;
        }
        function total()
        {
            return $this->height;
        }
        function has($size)
        {
            foreach( $this->images as $i )
            {
                if( $i['height'] == $size ) return true;
            }
            return false;
        }
        function move( $size, $to, $max )
        {
            foreach( $this->images as $key => $value )
            {
                if( $value['height'] == $size )
                {
                    if( $to->total() + $size <= $max )
                    {
                        $this->height -= $size;
                        $to->push( $value );
                        unset( $this->images[$key] );
                    }
                    return;
                }
            }
        }
        function output( $msg )
        {
            echo '<ul style="float: left; margin-left: 10px; background-color: #000;"><b>'.$msg.'&nbsp;</b>';
            foreach( $this->images as $image )
            {
                echo "<li class='".($image['height'] == 1 ? 'landscape' : 'portrait')."'>$image[src]</li>";
            }
            echo '</ul>';
        }
    }

    ### create the random images ###
    $nimgs = intval($_REQUEST['nimgs']);

    $images = new ImageStack;
    for($i=0; $i<$nimgs; $i++)
    {
        $images->push(  array( 'height' => 1+rand()%2, 'src' => "img $i" )  );
    }

    ### write the first column ###
    $images->output('All: '.$images->total());

    ### initialization ###
    $half  = floor($images->total() / 2);
    $left  = new ImageStack;
    $right = new ImageStack;
    $temp  = new ImageStack;

    ### if we got an odd total() of image height, remove a single 1 to temp ###
    if( $images->total() % 2 )
    {
        $images->move(1, $temp, 3*$half); # sad but true: this moves the first one to temp, better would be the last
    }

    ### while we got images on the initial stack ###
    while( $images->total() )
    {
        $next = $images->shift();
        if( $left->total() + $next['height'] <= $half )             # enough space @ left
        {
            $left->push( $next );
        }
        else
        {
            if( $left->total() < $half && $left->has(1) )           # enough space @ left if we move a 1 to temp
            {
                $left->move( 1, $right, $half );
                $left->push( $next );
            }
            else
            {
                if( $right->total() + $next['height'] <= $half )    # enough space @ right
                {
                    $right->push( $next );
                }
                else
                {
                    if( $right->total() < $half && $right->has(1) ) # enough space @ right if we move a 1 to temp
                    {
                        $right->move(1, $temp, 3*$half);
                        $right->push( $next );
                    }
                    else                                            # nowhere enough space left, except @ temp
                    {
                        $temp->push( $next );
                    }
                }
            }
        }
    }

    $left->output('Left: '.$left->total());
    $right->output('Right: '.$right->total());
    $temp->output('Ignore: '.$temp->total());   
?> 
```

# ios - 如何将 NSDate 转换为 NSString 为 2012-10-17T10:13:15.343+02:00

> ID：12958374
> 
> 赞同：-1
> 
> 时间：2012-10-18T15:36:21.797
> 
> 标签：ios, nsstring, nsdate

> **可能重复：**
> [将 NSDate 转换为 NSString](https://stackoverflow.com/questions/576265/convert-nsdate-to-nsstring)

更新：重复问题的直接答案在哪里？请提供此答案的链接。

如何像这样将 NSDate 转换为 NSString

```
2012-10-17T10:13:15.343+02:00 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T15:44:15.407

所以类似这样的东西：“yyyy'-'MM'-'dd'T'HH':'mm':'ss'Z'”

更多信息：[日期格式指南-日期](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/DataFormatting/Articles/dfDateFormatting10_4.html#//apple_ref/doc/uid/TP40002369-SW1)

# android - 如何在android中将大数据快速保存到sqlite数据库中

> ID：12958379
> 
> 赞同：0
> 
> 时间：2012-10-18T15:36:42.490
> 
> 标签：android, sqlite

我为 android 创建了日历应用程序，当我在日历应用程序的单个实例中存储一个月的数据（每日计划）时，模拟器显示没有响应警报或存储数据大约需要 5 分钟。如何快速将数据存储到数据库中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T15:39:53.983

始终建议使用它`SQLite Transactions`来存储大量数据。事务创建单个日志文件来执行 SQLite 操作，从而使整个过程快速完成。

一个简单的交易看起来像：

```
db.beginTransaction();
try {
    /*
     *
     perform sql add/edit/delete here
     *
     */

    db.setTransactionSuccessful();
}
catch {
    //Error in between database transaction 
}finally {
    db.endTransaction();
} 
```

PS如果没有交易需要5分钟，那么我希望它应该在使用时在±10秒内完成。

此外，如果它不响应 ui 手势，则您正在主线程中执行数据库操作，将数据库操作移动到后台线程，最好使用[`AsyncTask`](http://developer.android.com/reference/android/os/AsyncTask.html).

# google-apps-script - 如何将 Google Drive 文件夹添加到“我的云端硬盘”部分给其他用户

> ID：12958382
> 
> 赞同：2
> 
> 时间：2012-10-18T15:37:09.843
> 
> 标签：google-apps-script, google-drive-api, google-apps

我有一个属于我的 Google Drive 分层文件夹和子文件夹结构，我想将它自动添加到我们 Google Apps for Business 域中所有用户的“我的云端硬盘”部分。

我怎样才能做到这一点？我听说过 Google Apps Script 和 AddToFolder 函数。拜托，你能帮帮我吗？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T15:56:13.360

首先，设置一个简单的[网络应用程序](https://developers.google.com/apps-script/execution_web_apps)。Google App Script 编辑器甚至有一个模板，可以帮助您完成大部分工作。

其次，实现类似以下的内容并从处理函数中调用它。

```
function addRequiredFolders() {
  var root = DocsList.getRootFolder();
  var folderIds = ["somefolderid", "anotherfolderid"];
  folderIds.map( function(id) { DocsList.getFolderById(id).addToFolder(root) } );
} 
```

到目前为止，我已经测试了这个变体。下一步是为您的域发布 Web 应用程序，并将其通过电子邮件发送给人们或以其他方式分发。我认为他们会有一个不愉快的步骤，即需要授予 Web 应用程序访问其文档的权限。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T20:59:10.090

如果每个用户都可以访问一个链接并授权一个脚本（您构建的）为他们完成这项工作（在他们的根文件夹中放置一个共享文件夹），这很容易做到。

但是如果有很多用户，**你是域的管理员**，你真的想在没有人做任何事情的情况下自动完成这一切，这是可能的，但可能很难做到。我的意思是，你需要直接访问[Drive API](https://developers.google.com/drive/v2/reference/parents/insert)并设置[oAuth 2.0 来模拟](https://developers.google.com/accounts/docs/OAuth2ServiceAccount)你的用户，因为 Apps Script 内置的 DocsList API 没有这个模拟功能。如果您真的要这样做，请查看this [other question](https://stackoverflow.com/questions/11638186/can-a-google-apps-admin-manage-users-files-with-drive-sdk)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-28T20:53:57.090

现在我已经使用“Google Documents List API”实现了这个功能。我知道这个 API 已被弃用，但现在它可以工作。

（代码未完成）

```
 (...)

  //var user = Session.getActiveUser().getUserLoginId()  OR
  var user = e.parameter.user_email 

  var TB_folder = e.parameter.TB_folder 
  var TB_sub_folder = e.parameter.TB_sub_folder 

  var base = 'https://docs.google.com/feeds/';
  var fetchArgs = googleOAuth_('docs', base);

  fetchArgs.method = 'POST';

  var rawXml =  "<?xml version='1.0' encoding='UTF-8'?>" + "<entry xmlns='http://www.w3.org/2005/Atom'>"
         +  "<category scheme='http://schemas.google.com/g/2005#kind' "
         +  "term='http://schemas.google.com/docs/2007#folder'/>"
         +  "<title>" + TB_folder +"</title>"
         +  "</entry>";

  fetchArgs.payload = rawXml;
  fetchArgs.contentType = 'application/atom+xml';
  fetchArgs.contentLength = 245;

 // POST a https://docs.google.com/feeds/default/private/full

 var url = base + user + '/private/full/?v=3&alt=json';
 var content = UrlFetchApp.fetch(url, fetchArgs).getContentText()
 var json = Utilities.jsonParse(content)

 var folder = json.entry.gd$resourceId.$t // -> I get "folder:folder_id"
 var id_folder = folder.split(':')[1]

 var folder_created_by = json.entry.gd$lastModifiedBy.email.$t
 var folder_owner      = json.entry.author['0'].email.$t 
```

(...)

现在，您有了文件夹 ID，并且可以使用它来创建另一个子文件夹或文件...

你需要这个功能：

```
 //Google oAuth
  function googleOAuth_(name,scope) {
    var oAuthConfig = UrlFetchApp.addOAuthService(name);
    oAuthConfig.setRequestTokenUrl("https://www.google.com/accounts/OAuthGetRequestToken?scope="+scope);
    oAuthConfig.setAuthorizationUrl("https://www.google.com/accounts/OAuthAuthorizeToken");
    oAuthConfig.setAccessTokenUrl("https://www.google.com/accounts/OAuthGetAccessToken");

    oAuthConfig.setConsumerKey("XXXXXXXX");
    oAuthConfig.setConsumerSecret("XXXXXXXXXXXXXXXXXXX");

    //oAuthConfig.setConsumerKey("anonymous");
    //oAuthConfig.setConsumerSecret("anonymous");

    return {oAuthServiceName:name, oAuthUseToken:"always"};
  } 
```

* * *

您可以创建文件或将用户添加到文件（[添加 wriker](https://stackoverflow.com/questions/10565463/add-an-writer-to-a-spreadsheet-via-google-document-list-api)）。

现在我想用“Drive API”来实现这个功能。如果有人这样做了，得到一些帮助会很好。

塞尔吉

# python - 使用 Python 从 URL 获取 XML 中的字段

> ID：12958392
> 
> 赞同：0
> 
> 时间：2012-10-18T15:37:56.667
> 
> 标签：python, xml, url, xml-parsing, python-2.7

我正在尝试从 URL 的 XML 文件中的特定字段获取信息。在我开始尝试之前，我就遇到了这些奇怪的错误。这是我的代码：

```
url1 = 'http://www.dac.unicamp.br/sistemas/horarios/grad/G5A0/indiceP.htm'
data1 = urllib.urlopen(url1)
xml1 = minidom.parse(data1) 
```

我收到此错误：

```
File "C:\Users\Administrator\Desktop\teste.py", line 15, in <module>
    xml1 = minidom.parse(data1)
  File "C:\Python27\lib\xml\dom\minidom.py", line 1920, in parse
    return expatbuilder.parse(file)
  File "C:\Python27\lib\xml\dom\expatbuilder.py", line 928, in parse
    result = builder.parseFile(file)
  File "C:\Python27\lib\xml\dom\expatbuilder.py", line 207, in parseFile
    parser.Parse(buffer, 0)
ExpatError: not well-formed (invalid token): line 4, column 22 
```

我做错什么了吗？我从教程中复制了这些功能，它似乎应该可以工作..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T15:45:49.573

使用[lxml.html](http://lxml.de/)，它可以更好地处理无效的 xhtml。

```
import lxml.html as lh
In [24]: xml1=lh.parse('http://www.dac.unicamp.br/sistemas/horarios/grad/G5A0/indiceP.htm') 
```

# ascii - 扩展的 Ascii 代码不完整 DART？没有从 128 到 160 的字符

> ID：12958393
> 
> 赞同：2
> 
> 时间：2012-10-18T15:38:01.717
> 
> 标签：ascii, dart

我创建了一小段代码来打印 DART 中的扩展 ASCII 字符，但 128 到 160 之间的字符似乎是空白的。

```
 PrintExtendedASCII(){
  var listCodes = new List();
  for (var i = 128; i < 256  ; i++) {
   listeCodes.add(i);
  }
  var list = new String.fromCharCodes(listCodes);
  print(list);
} 
```

它只打印：¡¢£¤¥¦§¨©ª«¬®¯°±²´µ¶·¸¹º»¼½¾¿ÀÁÂÃÄÅÆÇÈÉÊËÌÍÎÏÐÑÒÓÔÕÖ×ØÙÚÛÜÝÞßàáâãäåæçèééêêëììíîïïðñòóôþöõöøùùúûü

DART 中的扩展 ASCII 字符有什么不同吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T15:46:04.770

Dart 中没有“扩展 ASCII”。您在代码示例中使用的字符代码不是 ASCII - 它们是[Unicode](http://en.wikipedia.org/wiki/Unicode)代码点。对于代码点 0-127，字符代码与 ASCII 完全匹配。您缺少的块，从 128 到 160（0x80 到 0x9F），都是不可打印的控制字符。

这是[0x000-0xFFF 块的 Unicode 代码点](http://en.wikibooks.org/wiki/Unicode/Character_reference/0000-0FFF)表。如果您仔细看，字符顺序与您机器上打印的字符串完全匹配。

# c# - 替换 XML 属性

> ID：12958394
> 
> 赞同：1
> 
> 时间：2012-10-18T15:38:02.153
> 
> 标签：c#, xml

我有一个 XML 文件，其中包含一个名为 translateID 的属性中的 ID。

该属性几乎存在于文档中的每个元素中，因此我不想逐个搜索每个元素，而是想选择文档中的所有 translateID 并对每个属性的值运行一些代码。

需要的结果是 - 用一些其他数据替换 translateID。

如何选择我的 XML 文档中存在的所有已翻译 ID？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T15:41:55.813

听起来像是 LINQ to XML 的一个很好的案例：

```
XDocument doc = XDocument.Load("doc.xml");
var attributes = doc.Descendants().Attributes("translatedID");

foreach (var attribute in attributes)
{
    attribute.Value = DoSomethingWith(attribute.Value);
}

doc.Save("transformed.xml"); 
```

（假设您想要更改属性的*值*。如果您想做其他事情，这是可行的 - 但您需要提供更多信息。）

# python - 现有数据的分布

> ID：12958398
> 
> 赞同：-5
> 
> 时间：2012-10-18T15:38:09.720
> 
> 标签：python

我有一些数据（TEMP_2），我想获得该数据的分布。我知道如何使用以下方法制作直方图：

```
import numpy as np
from pylab import *

plt.figure(1)
data1 = loadtxt("TEMP_2")

a= data1[:,1]
plt.hist(a,100, normed=True,)
show () 
```

但是，我想要一个发行版。有人可以帮我解决这个问题吗..

数据文件：

```
1000 299.23
2000 310.56
3000 308.21
4000 305.86
5000 305.21
6000 301.35
7000 295.37
8000 307.80
9000 295.61
:      :
:      :
200000 307.18 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T16:16:20.240

尝试：

```
import matplotlib.pyplot as plt
import numpy as np
import matplotlib.mlab as mlab
from scipy.stats import norm

mean, sigma = norm.fit(data) #your data here
x = np.linspace(-3,3,100)
plt.plot(x,mlab.normpdf(x,mean,sigma))

plt.show() 
```

如此处所述：[python pylab plot normal distribution](https://stackoverflow.com/questions/10138085/python-pylab-plot-normal-distribution)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T16:13:55.340

为了绘制适合您的数据的正态分布，您需要执行以下操作：

首先，您需要计算哪种正态分布最适合您的数据。在 scipy 中有`norm.fit`. 接下来，您只需要绘制具有给定属性（均值、标准差）的正态分布。

完整脚本：

```
# Load data
import numpy as np
from pylab import *
data1 = loadtxt("TEMP_2")
a = data1[:,1]

# Fit data into normal distribution
from scipy.stats import norm
mean, stdev = norm.fit(a)

# Plot normal distribution
import matplotlib.mlab as mlab
x = np.linspace(min(a), max(a), 100)
plot(x, mlab.normpdf(x, mean, stdev))
show() 
```

结果：

![剧情截图](../Images/e435818d2ec99d495e0f1c221d3b94eb.png)

如果您也想绘制“垃圾箱”，那么只需在之前添加`plot.show()`：

```
plt.hist(a, len(data1), normed=True,) 
```

# iphone - 创建标题 NIB 并在所有视图上显示

> ID：12958399
> 
> 赞同：0
> 
> 时间：2012-10-18T15:38:10.167
> 
> 标签：iphone, ios, ipad, nib

这就是我想在 iPad 应用程序上实现的目标。我有一个标题，其中包含公司徽标和顶部的几个按钮。这应该出现在所有视图或屏幕上。但是标题中的按钮或徽标经常更改。因此，我创建了一个带有名为 HeaderViewController 的控制器的 NIB。现在，我想在所有视图和主 nib 文件中包含这个头 nib 文件。我想使用界面生成器添加它。

非常感谢任何形式的指导。另外，让我知道是否有更好的方法来处理这个问题。我是 iOS 开发的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T15:45:27.417

创建一个`BaseClass`，您想在哪里显示您的标题创建新类，这将是您的子类`BaseClass`。意味着创建后`BaseClass`你需要这样做。

```
@interface YourClassName : BaseClass 
```

# c# - 防止更新实体框架 5 中的特定实体

> ID：12958402
> 
> 赞同：0
> 
> 时间：2012-10-18T15:38:19.593
> 
> 标签：c#, entity-framework, entity-framework-5

代码优先 EF 5 中是否有任何方法可以防止特定实体/表的更新？我们在 WCF Web 服务中使用 EF。我们希望更新发生在其中一个主要对象上，而不是一些子对象上。

这个想法是，如果我们有一个这样的主要对象：

```
 class Person
 {
       public Address { get; set; }
       public string FirstName { get; set; }
       public string LastName { get; set; }
 }

 class Address
 {
       public string City { get; set; }
       public string State { get; set; }
 } 
```

我们希望更改`Person`持久化，但不更改`Address`.

# tomcat - 更改默认端口后，Tomcat 7.0.32 应用程序无法运行

> ID：12958409
> 
> 赞同：0
> 
> 时间：2012-10-18T15:38:33.173
> 
> 标签：tomcat

我更改了 server.xml 文件中的默认端口（8080 -> 9080 和 8443 -> 9443），之后，所有应用程序都停止工作。我总是收到 404 Not Found。喜欢 /manager 或 /samples

我应该触摸任何其他配置文件吗？

带有 Tomcat 7.0.32 的 Windows 64 位

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T16:52:03.847

忘了它。似乎是浏览器缓存问题。从远程浏览器它工作......对不起。

# c# - c#如果元素有ID，我如何点击webbrowser文档中的按钮？

> ID：12958410
> 
> 赞同：0
> 
> 时间：2012-10-18T15:38:37.887
> 
> 标签：c#, web-applications, web, browser, element

我有 ac# 网络浏览器，当它加载页面时，我希望程序点击元素

当我知道 ID 时，我找到了单击此元素的方法

```
 htmlelement    ele = webBrowser1.Document.GetElementById("the ID"); if (ele != null)
                ele.InvokeMember("click"); 
```

但是有些元素没有 ID 或可更改的 ID 我怎么能通过值或类或其他东西而不是 ID 来做到这一点？

网页是java页面，可能有源代码，但正确的方法是什么

如果我知道如何识别元素，如果元素是文本框，我怎么能更改值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T15:52:31.713

就像是

```
var elems = webBrowser1.Document.InvokeScript("document.querySelectorAll('some-css-selector')"); 
```

可能会奏效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T15:54:17.123

你可以尝试使用像[http://watin.org/](http://watin.org/)这样的网络自动化工具，它会做你想做的一切，甚至更多。

从更多信息中查看这里：[使用 C# 和 WebBrowser 的网站自动化](https://stackoverflow.com/questions/3378449/website-automation-using-c-sharp-and-webbrowser)

# php - 静态数组中的静态变量

> ID：12958411
> 
> 赞同：2
> 
> 时间：2012-10-18T15:38:45.060
> 
> 标签：php

我正在尝试在这样的数组中插入一个静态变量：

```
static $datas = array(
    'link' => config::$link
); 
```

但我有这个错误

> 解析错误：语法错误，意外的 T_VARIABLE，期待 T_STRING

我发现[PHP 文档](http://php.net/manual/en/language.oop5.static.php)说：

> 与任何其他 PHP 静态变量一样，静态属性只能使用文字或常量进行初始化；不允许表达。因此，虽然您可以将静态属性初始化为整数或数组（例如），**但您不能将其初始化为另一个变量**、函数返回值或对象。

但我确信有办法做到这一点，有什么建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T15:45:36.717

不，没有解决方法。`static`变量和属性只能用常量值初始化。这意味着文字或常量。变量，`static`或者不，不能使用，句号。您必须稍后在某处使用程序代码分配一个变量值。

# .net - Visual Studio 2012 在调试期间随机超时？

> ID：12958412
> 
> 赞同：2
> 
> 时间：2012-10-18T15:38:46.250
> 
> 标签：.net, visual-studio, debugging, visual-studio-2012, visual-studio-debugging

我有一个 Visual Studio 2012 项目，我做了很多调试。每隔一段时间（每天多次），我会进行调试，Visual Studio 会随机阻塞 5-10 秒。之后，我无法评估任何变量的值（通过它会说的变量`function evaluation timed out`）并且单步执行将不起作用。我唯一能做的就是重新开始调试。

这是一个非常随机的问题。有时它会在我调试了 15 分钟的长时间会话时发生……有时它会发生在我遇到的第一个断点上。大多数情况下，Visual Studio 2012 都能正常工作……只是时不时地我会遇到这个奇怪的问题。我不知道如何重现它。它不仅与一种类型的对象相关联，甚至也与一个项目相关联。另外，我可以在VS2010中打开同一个项目，我从来没有遇到过这种问题

这个问题在其他地方见过吗？有谁知道我可以做任何额外的配置来避免这种烦恼的发生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-06T16:55:59.183

自从 2005 年以来的每个 Visual Studio 版本（仍然使用 VS 2013 Update 3），这个错误让我发疯了！在我的情况下，发生超时后，进程将无法正确继续（当前执行的线程死亡），当您想要分离 VS 时，它只允许您在终止进程时执行此操作。

我没有真正解决这个问题，但多年来我发现了以下可能对你有帮助的东西：

*   大型复杂程序更容易出现此错误。
*   多线程更容易发生。
*   越是单步执行代码，就越有可能发生。在某处放置一个断点并按 F5 跳到那里比一直走到那个位置要好。
*   当它发生时，不要尝试在代码中进一步，它会随机跳转到任何地方，然后在下一步中，线程死亡。就我而言，大多数时候只有重新启动程序会有所帮助。
*   尝试**删除/禁用断点**。您拥有的活动断点越多，风险就越高。条件断点特别“危险”。
*   尽可能尝试**关闭所有带有监视变量的窗口（Autos、Locals、Watch 窗口）。**
*   当您需要监视窗口时，请从中**删除所有不需要的变量**。评估的变量越多，挂起的风险就越高。
*   取消选中*工具 -> 选项 -> 调试 -> 常规 -> 启用属性评估*...这是防止此错误的最有效方法。但是，它使调试器对我来说相当不可用，所以我不想使用它。
*   *[仅适用于 VS 2013：]*尝试启用*Tools -> Options -> Debugging -> General -> Use Managed Compatibility Mode*。这将使我阅读的 VS 2012 中的调试行为可能更加健壮，至少在 VS 2013 中修复该问题之前。

# java - AlertDialog OnClose 事件 Android

> ID：12958417
> 
> 赞同：3
> 
> 时间：2012-10-18T15:39:01.210
> 
> 标签：java, android, android-alertdialog

我一直在环顾四周，找不到任何东西，所以我不知道它是否可能，但是有没有办法为 alertdialogs 做一些关闭的事情？

在我的情况下，当对话框作为暂停屏幕启动时，我暂停了后台 UI。如果您单击对话框中的按钮，它将运行 onClick 内容，因此我将其取消暂停，但如果他们单击对话框，它将关闭对话框但不运行 onClick。当他们点击到一边时，有什么东西可以运行吗？谢谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-18T15:44:22.010

您可以设置一个`onDismissListener()`在对话消失时收听。[文档](http://developer.android.com/reference/android/app/Dialog.html#setOnDismissListener%28android.content.DialogInterface.OnDismissListener%29)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-05-15T20:57:02.477

您可以使用`onDismissListener()`，但它是在更高的 API 中引入的，因此与旧的 API 不兼容。你可以`onCancel()`改用。

```
 AlertDialog.Builder alertDialog = new AlertDialog.Builder(this);
    alertDialog.setTitle("My Titile");
    alertDialog.setOnCancelListener(new OnCancelListener() {

        @Override
        public void onCancel(DialogInterface dialog) {
            //your logic
        }
    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T15:49:39.557

这样做的唯一方法是不使用 AlertDialog.Builder 而是创建一个 PopupWindow 子类。

可以在第 37 行找到一个很好的例子： [https ://github.com/lorensiuswlt/NewQuickAction/blob/master/src/net/londatiga/android/PopupWindows.java](https://github.com/lorensiuswlt/NewQuickAction/blob/master/src/net/londatiga/android/PopupWindows.java)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T15:50:35.373

您可以使用 setCanceledOnTouchOutside(false) 强制用户单击取消按钮。您也可以（如果您使用 DialogFragment）覆盖 onDetach() 方法。最后你可以设置一个解雇监听器。

# java - 在导出的 rcp eclipse 产品中读取文件

> ID：12958418
> 
> 赞同：0
> 
> 时间：2012-10-18T15:39:04.593
> 
> 标签：java, eclipse, eclipse-rcp, static-files

我正在开发一个 Eclipse RCP 应用程序，在某些情况下，我需要阅读一些模板文件，这些模板文件存储在一些包中。

我尝试了很多方法，它们在执行代码时工作正常，但在我导出产品时没有成功，因为可能捆绑包被导出为 jar 并且它无法访问存储的文件夹/文件......

我尝试了这里建议的两种方法： [http ://www.vogella.com/blog/2010/07/06/reading-resources-from-plugin/](http://www.vogella.com/blog/2010/07/06/reading-resources-from-plugin/)

如果您有任何建议，如果我能在导出产品之前看到这些错误，也会容易得多

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T16:11:19.520

好的，所以问题是我没有为构建选择 manifest.mf 中包含文件的文件夹。

但这确实令人困惑，因为代码在未导出时运行，这意味着它不使用插件的构建配置。

[http://www.eclipsezone.com/eclipse/forums/t115424.html](http://www.eclipsezone.com/eclipse/forums/t115424.html)

# c++ - 显式 int 类型作为参数

> ID：12958426
> 
> 赞同：3
> 
> 时间：2012-10-18T15:39:31.490
> 
> 标签：c++, type-conversion

是否可以将函数编写为：

```
void func(uint64_t val) {template <typename T> 
```

void call_with(std::function<void(T)> f, T val) { f(val); }

int main() { auto print = [](int x) { std::cout << x; }; call_with(打印, 42); }}

`uint64_t`如果使用任何其他整数类型而不是在不修改我的警告的情况下调用它，则会在哪里生成编译时错误`#pragma`？

IE：

```
uint32_t x = 0;
func(x) {…} // Error!
func(uint64_t(x)) {…} // Succes! 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T15:41:34.827

使用函数模板重载函数。函数模板将更好地匹配除`uint64_t`. 您可以定义函数模板，以便在使用时会产生错误。

```
void func(uint64_t val) { ... }

template <typename T>
void func(T)
{
    static_assert(false, "argument type is not uint64_t");
} 
```

使用 C++11，您可以使用以下模板：

```
template <typename T>
void func(T&&) = delete; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-18T16:02:16.727

这会起作用：

```
template< typename T >
void func( T param );

template<>
void func<uint64_t>( uint64_t param )
{
} 
```

你会得到一个链接器错误（足够接近）。示例：http: [//ideone.com/5ft4F](http://ideone.com/5ft4F)

# eclipse - 我无法使用带有 eclipse 的模拟器获得环境温度

> ID：12958428
> 
> 赞同：1
> 
> 时间：2012-10-18T15:39:37.367
> 
> 标签：eclipse, android-emulator, android-sensors

我无法使用 android 模拟器获得环境温度，是否需要使用 android 设备来测试传感器？虽然我在模拟器中添加了温度支持并遵循本教程的环境温度部分，但我仍然得到一个空温度值，所以有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T15:50:21.367

您可以使用[传感器模拟器](http://code.google.com/p/openintents/wiki/SensorSimulator)来模拟温度输入，以及来自其他硬件传感器的输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-17T12:36:19.060

传感器模拟器仍然只能识别已弃用的版本`TYPE_TEMPERATURE`，而不是`TYPE_AMBIENT_TEMPERATURE`版本 25.2.2-3098464。尝试这个：

```
mSensorManager = (SensorManager) getSystemService(SENSOR_SERVICE);
senseTemperature = mSensorManager
            .getDefaultSensor(Sensor.TYPE_AMBIENT_TEMPERATURE);
if (senseTemperature == null) {
    senseTemperature = mSensorManager
            .getDefaultSensor(Sensor.TYPE_TEMPERATURE);
} 
```

# jquery - 在 MVC 操作后重新绑定 Ajax 成功回发的 javascript 函数

> ID：12958430
> 
> 赞同：1
> 
> 时间：2012-10-18T15:39:50.053
> 
> 标签：jquery, asp.net-mvc-4

我有一个 Html 下拉列表，允许用户拥有网格的页面大小。

```
@Html.DropDownList("PageSizes", Model.PageSizes) 
```

然后我有一个javascript块：

```
 <script type="text/javascript">
        function ChangePageSize(size, msg) {
            alert("alert inside ChangePageSize: " + msg + " " + size); //msg = from: Initial; first dropdown change (grid updates with new page size)
                                                                       //msg = from: Initial; second dropdown  change (alert pops twice, grid does not update)
            var filterPage = "/Search/Filter";
            $.ajax({
                cache: false,
                url: filterPage,
                data: { pagesize: size },
                type: 'GET',
                success: function (data) {
                alert("success" + data);                             //this alert pops twice on the second dropdown change as well, data does have html in it.
                $('#searchResults').replaceWith(data);                       
            },
                error: function () { alert('Error changing page size.'); }
            });
        }

        $(function() {
            $('body').on('change', '#PageSizes', function() {
                var size = this.value;
                if (size != 'undefined') ChangePageSize(size, "from: Initial");
            });
        });
    </script> 
```

这只能工作一次。我也尝试过使用 bind() 和 live()。有谁知道如何正确重新绑定到更改事件？

更新：按照建议修改了 javascript 并添加了一些调试警报。该函数似乎再次与事件绑定，并且控制器操作似乎正在返回部分视图。但是为什么我的#searchResults DIV 没有再次更新？为什么 ChangePageSize 函数会被调用两次？

Update2：我找出了我的网格没有填充的原因。指定要替换的 DIV 在被替换后就消失了。我交叉手指，用同名的 DIV 围绕局部视图中的表格，并希望找到正确的 DIV 来替换。

所以这现在正在工作。我仍然担心该函数被多次调用，我猜这也会多次访问服务器。为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T15:41:26.143

改变

```
$(function() {
    $('#PageSizes').change(function () {
        var size = this.value;
        if (size != 'undefined')
            ChangePageSize(size);
    });
}); 
```

到

```
$(function() {
    $('body').on( "change", "PageSizes", function () {
        var size = this.value;
        if (size != 'undefined')
            ChangePageSize(size);
    });
}); 
```

这样，所有具有 id PageSizes 的元素都将具有事件处理程序，而不仅仅是与初始 document.ready 事件一起出现的那些

# facebook - 用于网站的 facebook 应用程序中的货币化

> ID：12958436
> 
> 赞同：0
> 
> 时间：2012-10-18T15:40:03.617
> 
> 标签：facebook, facebook-canvas, facebook-credits

我有一个游戏网站，其中还有一个用于通过 facebook 连接的 facebook 应用程序。

我有要购买的优惠和虚拟货币，而不是 FB 积分。

从 facebook 打开应用程序时，它会连接到站点，但会在画布中显示它，就像 Facebook 中的 ifram。

我读到不允许在 facebook.com 中使用除 FB 积分以外的任何东西获利，但我看到像 zoosk.com 这样的网站也有同样的问题，但保持获利不变，你可以从他们那里购买东西，在画布/ iframe中。

zoosk.com 是否违反了 FB 法律，或者他们是否实施了任何解决方法以便它可以工作。

此外，Gameduell.com 在打开应用程序时会立即重定向到他们的网站。它不会出现在画布中。我读到这也违反了规则。是因为它是在新标签页中打开的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T20:37:51.077

这里有几个问题，我将尝试分别解决。

*   游戏和非游戏应用程序的货币化和 FB Credits 规则（目前）不同，因此 Zoosk 对您来说不是一个有用的比较点。
*   目前可以将用户发送到一个单独的站点，但这很快就会改变（参见[http://developers.facebook.com/blog/post/2012/08/29/platform-updates--operation-developer-love/](http://developers.facebook.com/blog/post/2012/08/29/platform-updates--operation-developer-love/)和[https://developers.facebook.com/roadmap/#december-2012](https://developers.facebook.com/roadmap/#december-2012)） - 从 12 月 5 日开始，您不仅不再被允许在 FB 内推广替代（场外）支付选项，您甚至不会允许在 FB 内外显示的游戏使用相同的应用 ID。因此，您可能应该考虑在未来提供 FB 积分作为一种选择，同时您可能需要齐心协力确保您的用户了解其他付款方式。
*   我不能 100% 确定您所说的 GameDuell 使用的带有重定向的最新规则，如果您不确定，则必须进行更多研究。我只想补充一点，意外重定向对用户体验有害，但只有您可以决定这样做是否对您的情况有意义。

# java - 在覆盖的 finalize() 方法中关闭类 IO 资源

> ID：12958440
> 
> 赞同：2
> 
> 时间：2012-10-18T15:40:12.790
> 
> 标签：java, garbage-collection

如果我有一个使用 IO 资源的类，例如磁盘平面文件、DB 或其他形式的外部资源，那么在要运行的覆盖的 finalize() 方法中关闭这些流/连接的优缺点是什么GC？我虽然这可以利用现有的 JVM GC 并减少依赖客户端调用类方法的风险，例如 closeResources() 以及编写类似意大利面条的 try-catch（嵌套的 try-catch 和 ifs 是我最不喜欢的编程结构）。

作为一个具体的例子，我有一个简单的文件读取包装器。该类是用 构造的`String filePath`，它将文件读入`List<String[]>`. 如果打开文件时出现问题（catch 子句），我不想`BufferedReader`在多个地方关闭它，但如果文件读取正常等也关闭它。我想把它放在一个地方并且确保它始终关闭，无论对象何时获得 GC。

这种方法是一种好的做法，还是我试图在 Java 的范围内为自己提供过高水平的便利？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T15:45:22.507

这不是一个好主意，因为`finalize()`不能保证调用该方法。

当你的代码完成后关闭资源会更容易更好。

如果您讨厌编写嵌套的 try-finally 块来正确关闭资源，请使用[commons-io 的](http://commons.apache.org/io/) [IOUtils](http://commons.apache.org/io/api-release/org/apache/commons/io/IOUtils.html#closeQuietly%28java.io.InputStream%29)之类的东西来静默关闭资源（或编写自己的简单 util 方法以静默关闭它们）：

```
InputStream stream = ...;
try {
    ...
}
finally {
    IOUtils.closeQuietly(stream);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T16:01:42.500

**当 IO 资源是一个实例变量**时，你应该在`finalize()`方法中关闭它。

为什么 ？

1.  因为作为一个实例变量，您需要它处于打开状态，因为某些方法会重复使用它。

2.  如果您在 finalize 以外的方法中关闭它，那么您正在创建 a `temporal coupling`，这意味着类用户需要知道他必须以特定的时间顺序调用某些方法，即 A 在 B 之前等。

编辑：

Java 文档指出，垃圾收集器不能保证在任何**特定时间**`finalize()`运行，并且只要有对对象的任何**引用**就不会运行 。如果引用仍然存在，那就是内存泄漏、编程错误。`finalize()`当资源不是方法的本地资源时，这是最佳选择。如果资源是方法的本地资源，则`finally`在`try/cath block`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T15:54:19.977

是的，finally 块始终是释放连接、I/O Sreams 等资源的最佳方法。

# linq - LINQ 扩展方法 .SelectMany() 写成另一种形式

> ID：12958442
> 
> 赞同：2
> 
> 时间：2012-10-18T15:40:14.250
> 
> 标签：linq

如何以另一种 .SelectMany() 形式编写此 LINQ 表达式？

```
var result = 
                    from a in numbersA
                    where a < 3
                    from b in numbersB
                    where b < 5
                    select new { a, b }; 
```

?

`var result = numbersA.Where(x => x < 3).Select`.. ?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T15:45:32.067

这是编译器会做什么的粗略翻译：

```
var result = numbersA.Where(a => a < 3)
                     .SelectMany(a => numbersB, (a, b) => new { a, b })
                     .Where(z => z.b < 5)
                     .Select(z => new { z.a, z.b }); 
```

现在您可以更有效地编写如下：

```
var result = numbersA.Where(a => a < 3)
                     .SelectMany(a => numbersB.Where(b => b < 5),
                                 (a, b) => new { a, b }); 
```

...但这不是编译器会做的。目前尚不清楚您的目标是查看编译器的功能，还是只是编写查询。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T15:42:57.793

就像是

```
var result = numbersA.Where(a => a < 3).SelectMany(a =>
    numbersB.Where(b => b < 5).Select(b => new { a, b })); 
```

`numbersB` *请注意，只过滤一次*可能更有效：

```
var filteredB = numbersB.Where(b => b < 5).ToArray();
var result = numbersA.Where(a => a < 3).SelectMany(a =>
    filteredB.Select(b => new { a, b })); 
```

# css - 如何制作没有滚动的宽度为 100% 的响应式视频？

> ID：12958445
> 
> 赞同：0
> 
> 时间：2012-10-18T15:40:23.987
> 
> 标签：css

关键是让这个视频始终是视口宽度的 100%；但是要使高度刚好到不需要滚动的程度。

这可以在不使用溢出的情况下实现吗：隐藏；?

*您可以按原样复制粘贴以下内容。*

```
<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="utf-8">
   <title>Hello User!</title>   
   <style type="text/css">    
        div#video-border { border: 2px solid red; }
        video { max-width: 100%; height: auto; width: 100%; }
   </style>
</head>  

<body>
   <div>
   <div>
     Im the navigation!! Wupii
    </div>
     <div>
       <p>I'm more text, more things</p>
       <p>I'm more text, more things</p>
     </div>  
     <div id="video-border">
       <video controls="controls">
         <source src="http://video-js.zencoder.com/oceans-clip.webm" type="video/webm" />
       alt text
       </video>
     </div>
     <div id="footer"><p>I'm the footer hello</p><p>I'm the footer yeah again</p></div>
</body>
</html> 
```

老实说，我什至不确定这个解决方案是否能正常工作。不确定视频是否会在这些情况下运行，仍然......想知道。

请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T15:54:24.390

同意帕特里克。

如果您想在固定的、*预先计算*好的高度框中使用它，请使用以下命令：

```
div#video-border {
    background-color: black;
    border: 2px solid red;
}

video {
   max-width: 100%;
   width: 100%;
   height: auto;
   max-height: 150px; /* your desired height */
} 
```

# amazon - 如何使用 Amazon SES 发送相关电子邮件？

> ID：12958450
> 
> 赞同：1
> 
> 时间：2012-10-18T15:40:34.243
> 
> 标签：amazon

我正在使用 Amazon SES 服务器向我的用户发送通知电子邮件。我已验证电子邮件和验证域。所以 SES_Client 正在成功发送电子邮件。

这是我的代码：

公共函数发送（$subject，$recipients，$body，$senderName）{

```
 $response = $this->SESClient->send_email(
        $senderName.'-noreply@example.com',
        array(
            'ToAddresses' => $recipients
        ),
        array(
            'Subject' => array(
                'Data' => $subject,
                'Charset' => 'UTF-8'
            ),
            'Body' => array(
                'Text' => array(
                    'Data' => $body,
                    'Charset' => 'UTF-8'
                ),
                'Html' => array(
                    'Data' => $body,
                    'Charset' => 'UTF-8'
                )
            )
        )
    );

    return $response->isOK();
} 
```

**问题：**

如何在收件人数组中传递属于单个收件人的电子邮件文本中的参数值？

亚马逊服务器有没有一种方法可以创建收件人队列以及 SES 服务器何时发送我的电子邮件。它将替换属于每个收件人的所有参数值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T21:36:02.037

该`ToAddresses`字段应该是一个数组。

> 亚马逊服务器有没有一种方法可以创建收件人队列以及 SES 服务器何时发送我的电子邮件。它将替换属于每个收件人的所有参数值。

不，AWS 和 SES 服务目前不支持此功能。

# c++ - C++ 多维数组运算符

> ID：12958451
> 
> 赞同：6
> 
> 时间：2012-10-18T15:40:36.000
> 
> 标签：c++

是否可以为多维数组以某种方式重载运算符？

就像是：

```
class A {
  ...
  int& operator[][] (const int x, const int y);
  ...
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-18T15:45:41.943

不，那是不可能的。不过，有两种选择：

您可以`operator[]`返回一个较小维度的数组（对于 3D 数组，它将返回一个 2D 数组，对于 2D 数组，它将返回一个 1D 数组，对于 1D 数组，它将返回一个元素）。然后你可以用你想要的语法“把它们串在一起”。( `arr[x][y][z]`)

或者，您可以重载`operator()`，因为它可以采用多个参数。

然后您可以像这样使用它来索引 3D 数组，例如：`arr(x,y,z)`

但是您不能重载`[][]`或`[][][]`作为单个运算符。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-18T15:43:47.857

不是直接的，但您可以实现相同的功能重载`operator[]()`并让它返回支持`operator[]()`自身的东西。

例如：

```
class A {
  std::vector<std::vector<int> > vec;
public:
  std::vector<int>& operator[] (int x)
  {
      return vec[x];
  }
}; 
```

将允许您编写：

```
A a;
//...
int y = a[1][2]; 
```

因为`a[1]`返回一个`std::vector<int>`你可以应用`operator[](2)`的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-18T15:43:42.707

您需要重载`operator[]`并使其返回一个只有另一个`operator[]`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-18T15:44:18.827

不，只有`operator[]`. 作为替代方案，您可以重载：

```
int &operator()(int x, int y); 
```

你可以使用它：

```
m(4, 5); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-18T15:43:21.507

它是一个运算符被使用两次来取消引用。您可以取消引用`[]`运算符并`[][]`通过更改返回类型来使用它来执行功能和用法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-12-18T10:59:30.757

没有这样的运营商。前段时间，我实现了一个试图接近 stl 标准的矩阵。我使用了这个方法：首先我重载了 operator[] 以返回另一个我称为 _C_row 的类：

```
_C_row operator[](size_type index) { return _C_row(/*some parameters*/); } ///< This operator is overloaded to permit the use of double pointer notation.
_C_row operator[](size_type index) const { return _C_row(/*some parameters*/); } ///< This operator is overloaded to permit the use of double pointer notation. 
```

在 _C_row 中，我重载的不仅仅是 operator[]：

```
value_type operator*() { return _r[0]; }
pointer operator->() { return _i[_idx]; }
double_pointer operator&() { return &(_i[_idx]); }
reference operator[](size_type col) { return _r[col]; }
const_reference operator[](size_type col) const { return _r[col]; } 
```

我发现这个解决方案非常灵活。希望我的回答对你有用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-05-03T16:04:24.050

如前所述，没有 operator[][] 这样的东西。然而，这是一个使用嵌套类的实现，类似于“jalf”提出的。为简单起见，我硬编码了一个 3x3 原始数组。

```
 class Array2D final{
    public:
        class PartialArr final{
    private:
        friend Array2D;
        PartialArr(Array2D* ptr, int index) :original(ptr), firstIndex(index) {}
        int firstIndex;
        Array2D* original;
    public:
        int& operator[](int index) { return this->original->data[firstIndex][index];  }
    };

        PartialArr operator[](int index) { return PartialArr(this, index); }
    private:
        int data[3][3];
    }; 
```

此解决方案可防止 Array2D 的用户在仅索引数组的第一个维度时直接操作数据。

也可以添加两个 operator[] 的 const 版本以使类完整。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-12-21T12:16:02.827

从 C++23 开始，重载`operator[]`现在将采用 0 个或多个参数，其行为与`operator()`

```
class A {
  // ...
  int& operator[](std::size_t x, std::size_t j);
  // ...
}; 
```

调用：

```
A a = /* ... */;

a[1, 2]; // equivalent to 'a.operator[](1, 2)' 
```

# javascript - 修复IE8中的背景图片

> ID：12958452
> 
> 赞同：1
> 
> 时间：2012-10-18T15:40:39.953
> 
> 标签：javascript, jquery, css

在所有浏览器中，我使用以下 css 规则，并且可以正常工作

```
// it fits the background image to container
background-size: contain;
background-size: cover; 
```

是否有 css 规则使其也可以在 IE8 中运行，或者我应该使用 javascript 吗？

如果是 javascript，我使用的是 jquery。
激活我的目标的最佳方式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T16:02:57.257

我也遇到了同样的问题，但是通过下面的链接，我的问题解决了

[http://css-tricks.com/perfect-full-page-background-image/](http://css-tricks.com/perfect-full-page-background-image/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T16:00:28.060

有一个[jQuery 插件](http://louisremi.github.com/jquery.backgroundSize.js/demo/)或这个带有过滤器的[javascript 后备](http://css-tricks.com/perfect-full-page-background-image/)

```
filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='.myBackground.jpg', sizingMethod='scale');
-ms-filter: "progid:DXImageTransform.Microsoft.AlphaImageLoader(src='myBackground.jpg', sizingMethod='scale')"; 
```

查看[同一页面了解更多](http://css-tricks.com/perfect-full-page-background-image/)跨浏览器方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T16:15:05.573

you can do it like this:

```
<!DOCTYPE html>
<html>
<head>
<title>Test</title>
</head>
<body>
  <img src="http://i47.photobucket.com/albums/f156/Bob_McBobBob/Awesome_Background_by_smirfy.jpg" class="bgimg" />
  <div class="frame">
    <div class="contents">
    page contents
    page contents
    page contents
    page contents
    page contents
    </div>
  </div>
</body>
</html> 
```

css:

```
html {
 background:#000; 
}

html, body { 
  padding:0;
  margin:0;
  overflow:hidden;
  height:100%;
}

.bgimg {
  position:absolute;
  z-index:-1;
  width:100%;
  height:100%;
}

.frame {
  color:white;
  width:100%;
  height:100%;
  overflow:auto;
}

.contents {
 padding:10px; 
} 
```

demo site: [http://jsbin.com/enevov/1/edit](http://jsbin.com/enevov/1/edit)

you can achieve different effects by changing width:100%; height:100%; on .bgimg, to accomplish different effects, depending on whether you want a distortion or not, for instance just `width: 100%` will make it touch across the top, etc...

hope this helps -ck

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-24T07:16:15.797

这适用于我在 IE8 的全窗口上拉伸图像

[http://css-tricks.com/perfect-full-page-background-image/](http://css-tricks.com/perfect-full-page-background-image/)

# c# - 使用 Binding 将 Listbox 绑定到 DataTable

> ID：12958453
> 
> 赞同：1
> 
> 时间：2012-10-18T15:40:40.603
> 
> 标签：c#, wpf, data-binding, datatable

我是新手，谷歌这次没有帮助我。我能够遵循一些示例并填充 DataGrid 并修改数据库，但 ListView 给了我一个问题。这是我的课：

```
public class GlobalDataviews : INotifyPropertyChanged   
{
    ...

    //Billable data table
    //Populated elsewhere with "SELECT ID, Value FROM BillableTable;"
    private DataTable mBillable;
    public DataView Billable()
    {
        return mBillable.DefaultView; 
    }  
} 
```

这是我的 XAML 片段：

```
<Window.Resources>
    <ObjectDataProvider x:Key="GlobalDataviews" ObjectType="{x:Type local:GlobalDataviews}" />
    <ObjectDataProvider x:Key="BillableData" ObjectInstance="{StaticResource GlobalDataviews}" MethodName="Billable" />
</Window.Resources> 
```

现在对于我的 ListView：

```
<ListBox Name="listBox1" DataContext="{StaticResource BillableData}" SelectedValuePath="ID" DisplayMemberPath="Value"/> 
```

我可能错过了一些非常简单的东西。什么是正确的方法？我还想将所选值（无多选）绑定到我的代码中的另一个属性。任何人都可以帮忙吗？不知道为什么我会变得如此困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T17:11:20.940

如果要设置 DataContext，则必须设置 ItemsSource 属性以绑定数据。

```
<ListBox x:Name="listBox1" DataContext="{StaticResource BusinessData}" ItemsSource="{Binding}" SelectedValuePath="ID" DisplayMemberPath="Value" /> 
```

否则，您可以直接绑定 ItemsSource，如下所示：

```
<ListBox x:Name="listBox1" ItemsSource="{Binding Source={StaticResource BusinessData}}" SelectedValuePath="ID" DisplayMemberPath="Value" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T15:43:17.050

您缺少 ItemsSource 的绑定。

像这样的东西：

```
<ListBox Name="listBox1" DataContext="{StaticResource BusinessData}" ItemsSource="{Binding myCollection}" SelectedValuePath="ID" DisplayMemberPath="Value"/> 
```

`myCollection`暴露列表的属性在哪里。

# asp.net - 如何从代码中填充 asp:GridView？

> ID：12958457
> 
> 赞同：3
> 
> 时间：2012-10-18T15:40:46.910
> 
> 标签：asp.net, data-binding, gridview, binding, populate

我的代码中有一个`List<string[]> items`包含字符串数组的列表。在 ASPX 页面上，我添加了一个新的网格视图控件：

```
<asp:GridView ID="ProductList" runat="server" AllowSorting="True" AutoGenerateColumns="False" DataKeyNames="ProductID" EnableViewState="False">
  <Columns>
    <asp:BoundField DataField="ProductName" HeaderText="Product" SortExpression="ProductName" />
    <asp:BoundField DataField="CategoryName" HeaderText="Category" ReadOnly="True" SortExpression="CategoryName" />
    <asp:BoundField DataField="SupplierName" HeaderText="Supplier" ReadOnly="True" SortExpression="SupplierName" />
    <asp:BoundField DataField="UnitPrice" DataFormatString="{0:C}" HeaderText="Price" HtmlEncode="False" SortExpression="UnitPrice" />
    <asp:CheckBoxField DataField="Discontinued" HeaderText="Discontinued" SortExpression="Discontinued" />
  </Columns>
</asp:GridView> 
```

我知道我应该以类似于以下的方式为网格视图指定 DataSourceID 属性：

```
<asp:GridView ... `DataSourceID="ObjectDataSource1" ... > 
</asp:GridView>
<asp:ObjectDataSource ID="ObjectDataSource1" runat="server" OldValuesParameterFormatString="original_{0}" SelectMethod="GetProducts" TypeName="ProductsBLL">
</asp:ObjectDataSource> 
```

但是，我不知道 do`OldValuesParameterFormatString`和attributes 代表什么。另外，我没有要绑定的数据库，我只有一个名为. 你能帮我填充网格视图吗？根本不需要通过绑定来完成。谢谢！`SelectMethod``TypeName``items`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-18T15:43:21.147

您甚至不需要 ObjectDataSource。在代码隐藏中的 Page_Load 中，您可以解析字符串数组列表并动态创建 DataTable。

确保将其包裹在 a 周围，`Not Page.IsPostback`以便它不会在回发时重新绑定。

```
List<string[]> stringList = null;

DataTable dt = new DataTable();
DataRow dr = null;
dt.Columns.Add("ProductName", System.Type.GetType("System.String"));
dt.Columns.Add("CategoryName", System.Type.GetType("System.String"));
dt.Columns.Add("SupplierName", System.Type.GetType("System.String"));
dt.Columns.Add("UnitPrice", System.Type.GetType("System.Double"));
dt.Columns.Add("Discontinued", System.Type.GetType("System.String"));

foreach (string[] s in stringList) {
    foreach (string str in s) {
        dr = dt.NewRow();
        dr["ProductName"] = s[0];
        dr["CategoryName"] = s[1];
        dr["SupplierName"] = s[2];
        dr["UnitPrice"] = s[3];
        dr["Discontinued"] = s[4];
        dt.Rows.Add(dr);
    }
}

dt.AcceptChanges();
ProductList.DataSource = dt;
ProductList.DataBind(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T15:45:31.787

编辑：您必须更改其中的一些代码以满足您的需求。我正在`string[]`根据`GridView`您提供的代码对您存储的数据类型进行假设。

您需要考虑`class`为您的项目创建一个使用，而不是一个`string[]`. 也许是这样的：

```
public class MyObject
{
    public string ProductName { get; set; }
    public string CategoryName { get; set; }
    public string SupplierName { get; set; }
    public decimal UnitPrice { get; set; }
    public bool Discontinued { get; set; }
} 
```

然后你需要一些东西来翻译`string[]`成`MyObject`：

```
private MyObject ConvertToMyObject(string[] values)
{
    var myObject = new MyObject();
    myObject.ProductName = values[0];
    myObject.CategoryName = values[1];
    myObject.SupplierName = values[2];

    decimal unitPrice;
    if (decimal.TryParse(values[3], out unitPrice))
    {
        myObject.UnitPrice = unitPrice;
    }

    bool discontinued;
    if (boo.TryParse(values[4], out discontinued))
    {
        myObject.Discontinued = values[4];
    }
} 
```

然后您可以在代码中使用该方法，然后绑定：

```
protected void Page_Load(parameters here)
{
    if (IsPostback)
    {
        var myObjects = new List<MyObject>();
        foreach (string[] values in items)
        {
            myObjects.Add(ConvertToMyObject(values));
        }

        ProductList.DataSource = myObjects;
        ProductList.DataBind();
    }
} 
```

就像我在评论中所说的那样，确保您可以`items`在`Page_Load`事件处理程序中访问。另外，我是从内存中输入的，忘记了`Page_Load`. `Page_Load`不过，您很可能在您的代码中已经有一个处理程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T16:12:48.493

你可以试试这个

```
List<string[]> items = List<string[]>();
//add items to List

GridView1.DataSource = items;
GridView1.DataBind(); 
```

你的 GridView

```
<asp:GridView runat="server" ID="GridView1">
<Columns>
<asp:TemplateField>
<ItemTemplate>
   <asp:Label ID="stringLabel" Text="<%# Container.DataItem %>" runat="server"></asp:Label>
</ItemTemplate>
</asp:TemplateField>
</Columns>
</asp:GridView> 
```

# windows - 使用vbscript搜索列Excel中的所有单元格

> ID：12958458
> 
> 赞同：0
> 
> 时间：2012-10-18T15:40:51.497
> 
> 标签：windows, excel, scripting, vbscript

我编写了一个 vbScript 来收集登录时每个用户计算机的计算机信息，并且我想让脚本将信息记录到服务器上的 Excel 工作表中，每台计算机都有自己的行。

我在 6 年前写了这个，但丢失了脚本，从那以后就没有接触过 vbScript。

所以我需要做的是，

1.  检查 B 列（将是计算机名称）中具有值的所有单元格
2.  将该值与为计算机名称保存的值进行比较
3.  如果匹配，将计算机信息写入该行
4.  如果没有匹配项，则将信息写入第一个空行

我不知道从哪里开始，因为 vbScript 对我来说很陌生。

编辑 - 到目前为止我有这个循环和那个回显来测试它，但它只到 1，而我有 6 行的值在第 0 列。我尝试了这个条件来检查单元格值是否存在我知道的值和我收到运行时错误。

```
Set objExcel = CreateObject("Excel.Application")
Set objWorkbook = objExcel.Workbooks.Open("test.xlsx")
Do While objExcel.ActiveCell.Offset(iRow,0).Value<>""
   WScript.Echo iRow
   If objExcel.Cells(iRow,0).Value = "three" Then
    WScript.Echo "three"
   End If
   iRow = iRow+1
Loop
WScript.Quit 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T19:11:30.020

您的脚本中很可能有某个`On Error Resume Next`地方，这会使代码静默失败。

据我从您的代码中可以看出，这可能是正在发生的事情：

*   `Do While objExcel.ActiveCell.Offset(iRow,0).Value<>""`

    该脚本检查`(iRow,0)`活动单元格偏移处的单元格是否为空，以及它是否进入循环。

*   `WScript.Echo iRow`

    `iRow`该脚本回显（可能为 0）的当前值。

*   `If objExcel.Cells(iRow,0).Value = "three" Then`

    The script tries to access the **cell** `(iRow,0)` (**not** the cell at the **offset** `(iRow,0)`), which fails, because `Cells()` is not zero-based. The first row as well as the first column have the index 1 in the `Cells()` property. Not to mention that with `Cells()` you have to use the absolute row and column numbers, not the ones relative to `ActiveCell` as in `Offset()`.

To fix the issue I'd remove `On Error Resume Next` and simply use `Cells()` instead of `ActiveCell.Offset()`:

```
iRow = 1
Do While objExcel.Cells(iRow, 2).Value <> ""
  WScript.Echo iRow
  If objExcel.Cells(iRow, 2).Value = "three" Then
    WScript.Echo "three"
  End If
  iRow = iRow + 1
Loop 
```

# grails - 用于控制器的 grails 缓存头插件

> ID：12958460
> 
> 赞同：0
> 
> 时间：2012-10-18T15:40:54.953
> 
> 标签：grails, browser-cache, cache-control, dynamic-content

这个问题不是 grails 插件的实现特定问题，而是更多使用 grails 说明的问题。

Grails 一个用于编写缓存相关标头的插件（http://grails.org/plugin/cache-headers），它们显示了一个看起来像的示例

```
class ContentController
   def show = {
       cache shared:true, validFor: 3600  // 1hr on content
       render(....)
   }
} 
```

由于到达这里的 grails 请求看起来像`http://myapp/content/show`，浏览器是否会尝试缓存它，因为它不是具有文件名的特定资源（例如，它不是`show.gsp`，即使这是用于生成 html 的内容）？

在浏览器不会缓存的动态内容上指定缓存时间的目的是什么（假设我根据上面的陈述了解浏览器将如何缓存它）？这什么时候有用？这在用户不输入完整 url 而是我们动态更新页面的一部分的 ajax 环境中可能有用吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T16:15:16.993

浏览器缓存 URL，而不是文件名（因为 HTTP 不是文件系统）。我认为这是两个问题的答案，对吧？

看：

*   [http://www.w3.org/Protocols/rfc2616/rfc2616-sec13.html#sec13](http://www.w3.org/Protocols/rfc2616/rfc2616-sec13.html#sec13)
*   [http://www.mnot.net/cache_docs/](http://www.mnot.net/cache_docs/)
*   [https://developers.google.com/speed/docs/best-practices/caching](https://developers.google.com/speed/docs/best-practices/caching)

# ruby - Ruby 中的 If 块中的“或”

> ID：12958471
> 
> 赞同：2
> 
> 时间：2012-10-18T15:41:49.653
> 
> 标签：ruby

所以我正在为学校编写一个 Ruby 程序，如果某个值是 1 或 3，则将布尔值的值更改为 true，如果它是 0 或 2，则更改为 false。由于我来自 Java 背景，我认为这代码应该工作：`if n == 1 || n == 3`

但事实并非如此。所以我的问题是，是否可以在 Ruby 的 If 块中使用“或”表达式？我知道我目前的情况可以通过以下方式轻松解决：

```
if n == 0
    t_o_f = false
elsif n == 1
    t_o_f = true 
```

等等。但我想知道将来是否可以在 If 块中使用 Or 。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T15:48:04.033

是的，任何表达式都可以在`if`条件中使用，包括那些使用`||`（逻辑或）运算符的表达式。

与 Java 一样，Ruby 的`||`运算符也会短路。也就是说，如果左侧为真，则不评估右侧。

惯用的 ruby​​ 使用*后缀 if*用于单行：

```
puts "Yes" if n == 4 || n == 5 
```

但是，如果行很长，请避免*使用后缀，并将其分成多行：*

```
if n == 4 || n == 5
  puts "This is a big long string to be output....................."
end 
```

那是因为*后缀 if*可能会在长行的末尾失去视觉效果。

您*可以使用带有**前缀 if*的单行代码，但这种情况并不常见：

```
if n == 4 || n == 5 then puts "foo" end 
```

也许：

```
if n == 4 || n == 5 ; puts "foo" ; end 
```

如果浓缩成一条线，这确实是一条多线；分号充当换行符。

在测试多种条件时，有时使用它可能很有价值`Array#include?`：

```
puts "foo" if [4, 5].include?(n) 
```

仅在两个条件下，此值的价值并不大。对于三个或更多，它读起来很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T15:49:24.703

or 运算符有效，您也可以编写关键字：

```
if n==1 or n==2
end 
```

[http://www.tutorialspoint.com/ruby/ruby_operators.htm](http://www.tutorialspoint.com/ruby/ruby_operators.htm)

你也可以这样写你想要的：

```
x = (n%2) ? true : false 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T20:52:06.423

除了@Wayne Conrad：如果几乎没有“逻辑”来决定 n 是真还是假，那么这也是一个不错的选择：

```
result = case n
  when 1, 3 then true
  when 0, 2 then false
end 
```

# jquery - 使用链接打开 jqueryUI 模式

> ID：12958477
> 
> 赞同：1
> 
> 时间：2012-10-18T15:42:05.250
> 
> 标签：jquery, jquery-ui

我这辈子都想不通。我想用 jqueryUI 打开一个模式（对话框）框。所有示例都使用按钮来执行此操作。

有人可以发布一个使用简单链接打开基本 jqueryui 对话框的示例吗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T15:51:57.220

试试我在 jsfiddle 上制作的这个示例：http: [//jsfiddle.net/qWNa9/](http://jsfiddle.net/qWNa9/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T15:49:00.773

如果您想将对话框打开事件绑定到单击链接的人，您可以使用以下内容：

```
$("#linkid").on("click", function() {
    $("#dialogId").dialog();
}); 
```

linkid == 标签上的 ID，dialogId == 您希望在对话框中显示的内容的包含元素上的 ID

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T15:44:01.247

只需使用对话框（“打开”）功能。

```
$(".alink").dialog("open"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T15:44:57.497

尝试使用

```
<a href="javascript:void(0)"> 
```

然后绑定到 .click() 事件

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-18T15:46:52.207

以下将帮助您，根据您的情况进行调整

[http://www.ericmmartin.com/projects/simplemodal-demos/](http://www.ericmmartin.com/projects/simplemodal-demos/)

# node.js - 在 nodejs 中导入 TypeScript 模块

> ID：12958479
> 
> 赞同：22
> 
> 时间：2012-10-18T15:42:13.243
> 
> 标签：node.js, typescript

使用打字稿在nodejs中导入模块的最佳实践是什么？我来自 c# 背景，所以我想做这样的事情

**MyClass.ts**

```
module MyNamespace {
    export class MyClass {
    }
} 
```

**应用程序.ts**

```
// something like using MyNamespace
new MyNamespace.MyClass(); 
```

或者

**MyClass.ts**

```
export class MyClass {
} 
```

**应用程序.ts**

```
import MyClass = module("MyClass")
new MyClass(); 
```

我知道我可以做到这一点并且它会起作用，但是我必须为每个班级想出两个名字

```
import MyClass2 = module("MyClass")
new MyClass2.MyClass(); 
```

要点是将类分隔为多个 .ts 文件（最好每个类一个文件）。所以问题是，这是怎么做到的？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-18T16:06:22.970

您在这里有两个选择：

如果您坚持使用 CommonJS 或 AMD 模块，那么您将不得不按照您在问题中描述的方式使用**外部模块。**是否使用模块来声明自己的命名空间主要是个人喜好问题。避免指定两个名称问题的唯一方法是创建一个为该类型起别名的变量：

**我的模块.ts**

```
export module MyNamespace {
    export class MyClass {
    }
} 
```

**应用程序.ts**

```
import ns = require('mymodule');
var myclass = new ns.MyNamespace.MyClass();
var myclassalias = ns.MyNamespace.MyClass;
var myclass2 = new myclassalias(); 
```

您的另一个选择是使用**内部**模块，这些模块主要用于在内部构建您的代码。*内部模块在编译时使用引用路径*进入范围。

**我的模块.ts**

```
module MyNamespace {
    export class MyClass {
    }
} 
```

**应用程序.ts**

```
///<reference path='mymodule.ts'/>
var myclass = new MyNamespace.MyClass(); 
```

我认为您必须自己决定这两种方法中的哪一种更合适。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T01:05:45.483

[您可以使用typescript-require](https://github.com/eknkc/typescript-require)模块将 TypeScript 模块导入 node.js 文件，该模块是为此特定目的而创建的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-05-19T03:36:26.610

我建议不要使用显式`module`（或`namespace`）关键字，它是早期的遗迹。*您通常不需要它们，因为任何具有顶级`import`或`export`自动模块的打字稿文件。您的第二个**myModule.ts**示例很好。

```
export class MyClass {
   ...
} 
```

但是当你将它导入另一个打字稿模块时，你会想要使用这样的东西：

```
import { MyClass } from './myModule';
var myInstance = new MyClass(); 
```

就个人而言，我不喜欢第 1 行的重复，但这是语言所要求的，所以我学会了接受它。我认为除非您放弃 file-per-class 模式，否则这种语法的实用性并不明显。您选择从模块中导入的名称，这样就不会发生意外的命名空间污染。

另一种导入语法从模块中提取所有名称，但在使用它们时必须使用模块限定名称。因此它也具有抗碰撞的名称。

```
import * as myModule from './myModule';
var myInstance = new myModule.MyClass(); 
```

关于不需要`module`/`namespace`关键字的一般规则有例外，但不要从关注它们开始。想想*文件 == 模块*。

# c# - 电子邮件地址中的 EWS C# 国际字符返回错误

> ID：12958481
> 
> 赞同：0
> 
> 时间：2012-10-18T15:42:20.773
> 
> 标签：c#, exchangewebservices

当电子邮件地址包含外来字符时，我在使用 EWS 将电子邮件地址保存给联系人时遇到问题。特别是，德语变音符号给我带来了问题。以下是尝试创建有效电子邮件地址的示例。EWS 抛出一个错误，指出电子邮件地址无效。有人可以帮忙吗？谢谢

```
Mailbox mailbox = new Mailbox("box@blah.com");
FolderId folderId = new FolderId(WellKnownFolderName.Contacts, mailbox);
Contact contact = new Contact(service);
contact.GivenName = "John";
contact.Surname = "Döe";

EmailAddress address = new EmailAddress();
address.Address = "JohnDöe@blah.com";
address.RoutingType = "SMTP";

contact.EmailAddresses[EmailAddressKey.EmailAddress1] = address;
contact.Save(folderId); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T16:02:24.870

Exchange 是否允许在电子邮件地址中使用变音符号？

[RFC 5321](http://tools.ietf.org/rfc/rfc5321.txt)是电子邮件地址的管理规范，不允许它们。有关更多信息，请参阅[有关允许的电子邮件地址字符的 SO 问题](https://stackoverflow.com/questions/2049502/what-characters-are-allowed-in-email-address)。

# java - 递归划分正方形区域

> ID：12958484
> 
> 赞同：1
> 
> 时间：2012-10-18T15:42:22.280
> 
> 标签：java, recursion, illegalargumentexception

我试图通过随机选择正方形中的一个点并通过它画两条线，然后将这些象限中的每一个分成4个，依此类推，直到宽度/高度为1，将正方形分成4个较小的象限一种*递归*方式。我的代码在这里：

```
public static void draw(int x0, int y0, int xmax, int ymax) {

if (Math.abs(xmax - x0) > 1 && Math.abs(ymax - y0) > 1) {
    int rx = r.nextInt(xmax - 1) + 1;    // line A
    int ry = r.nextInt(ymax - 1) + 1;    // line B

    StdDraw.line(rx, y0, rx, ymax);
    StdDraw.line(x0, ry, xmax, ry);

    draw(x0, y0, rx, ry);        // line C
    draw(x0, ry, rx, ymax);      // line D
    draw(rx, ry, xmax, ymax);    // line E
    draw(rx, y0, xmax, ry);      // line F
}
else ; 
```

也就是说，我传递的是左下角坐标（x0，y0）和右上角坐标（xmax，ymax）。每当我注释掉 D、E 和 F 行时，一切正常。但是，当我取消注释 D、E 或 F 中的任何一个时，我会收到此错误`java.lang.IllegalArgumentException: n must be positive`，通常指向 A 行或 B 行。有人可以告诉我这个错误的含义以及如何解决它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T15:46:19.680

这是因为在递归期间的某个地方，传入的值`nextInt`->`(xmax - 1)`变为负数。

```
r.nextInt(xmax - 1); 
```

如果`(xmax - 1)`为负，您将获得异常。因为，`nextInt()`方法只接受`positive`值。

*   您可以在此行之前添加额外的检查，以检查您的差异是负数还是正数。因此，您可以跳过这部分代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T15:46:33.060

考虑到这`nextInt(int n)`似乎包含`n`那段代码中唯一的变量，很可能是引发该错误的变量。

确保`xmax-1`并且`ymax-1`不要变成负数，因为文档`nextInt`特别说明它会在负数上引发此错误：

[http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Random.html#nextInt(int)](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Random.html#nextInt%28int%29)

# smartclient - 如何使用 serverType Hibernate 配置 SmartClient DataSource 以仅选择必填字段？

> ID：12958495
> 
> 赞同：0
> 
> 时间：2012-10-18T15:42:53.457
> 
> 标签：smartclient

我正在使用 SmartClient 版本 8.3。

我配置了这个数据源：

```
 <DataSource ID="example"
                serverType="hibernate"
                dropExtraFields="true"
                beanClassName="com.msp.dao.entities.Status">
        <fields>
            <field name="id"/>
            <field name="name"/>
        </fields>
    </DataSource> 
```

我正在使用 ListGrid 查看结果。

由于某种原因，正在生成的 HQL 查询选择整个实体而不是选定的字段。

这是生成的 HQL 查询： select _status from com.msp.dao.entities.Status _status
我希望它像这样生成： select _status.id, _status.name from com.msp.dao.entities.Status _status

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T03:54:03.020

您应该使用 OperationBinding.outputs。但只有从第 9 版开始，他们才会支持它。

# c++ - 删除了 powerPC 编译器上的函数，而不是 gcc

> ID：12958500
> 
> 赞同：0
> 
> 时间：2012-10-18T15:43:01.223
> 
> 标签：c++, c++11, powerpc

在我当前的项目中，我们必须为 openSUSE - 12.1 和 powerPC 编译源代码。
该项目是用 C++11 编写的。

openSUS 使用 gcc-4.7.2
构建 powerPC 使用 powerpc-e500v2-linux-gnuspe 构建

我有一个纯虚拟基类（虚拟析构函数和一些虚拟函数），我们称之为 VirtualIf

我现在想这样做：

```
someStdMap[key] = std::vector<std::unique_ptr<VirtualIf> >(); 
```

用唯一的 ptr 初始化向量和

```
someStdMap[key].push_back(std::move(uniquePtrToVirtualIf)); 
```

将它们添加到该向量

这在 gcc 构建上完美运行，但在 powerPC 构建上失败：

```
deleted function 'std::unique_ptr<_Tp, _Tp_Deleter>... 
```

在两条线上。

我知道这个错误意味着默认构造函数被删除了，但是为什么呢？为什么这两个编译器之间有区别？我怎样才能为手臂构建解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T08:40:39.170

这似乎是一个编译器问题。更新编译器解决了这个问题。

# ruby-on-rails - ShopifyAPI：产品发现 since_id 陌生

> ID：12958504
> 
> 赞同：1
> 
> 时间：2012-10-18T15:43:10.607
> 
> 标签：ruby-on-rails, shopify

Shopify API 发生了一些奇怪的事情，我无法理解我做错了什么。

我想从 Shopify 获取所有产品的列表，因此我使用以下代码：

```
def get_all_products_from_shopify
  limit = 250
  all_products = Array.new

  self.connect_to_store
  products = ShopifyAPI::Product.find(:all, :params => {:limit => limit})

  all_products = all_products.concat products
  puts products.length
  while products.length == limit do
    since_id = products.last.id
    products = ShopifyAPI::Product.find(:all, :params => {:limit => limit, :since_id => since_id})
    all_products = all_products.concat products
  end
  ShopifyAPI::Base.site = nil
  return all_products
end 
```

问题是我在 Shopify 上有 251 种产品，但是通过这种方法，我检索了一个包含 277 个元素的产品数组。为什么？

另外，如果我这样做：

```
products = ShopifyAPI::Product.count
> 251

products = ShopifyAPI::Product.find(:all, :params => {:limit => limit})
products.count
>250
since_id = products.last.id
ShopifyAPI::Product.count(since_id: since_id)
>26 
```

谁能告诉我我做错了什么？

谢谢，奥古斯托

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T14:29:30.423

默认情况下，产品在产品列表 API中按**标题升序返回。**不要省略`:since_id`结果第一页的参数，而是使用`:since_id => 0`.

# c++ - 堆排序 C++ 的内存错误

> ID：12958505
> 
> 赞同：1
> 
> 时间：2012-10-18T15:43:10.703
> 
> 标签：c++, segmentation-fault, heapsort

所以我用 C++ 编写了一个堆排序程序，它接受一个双精度数组和数组的大小，然后对其进行排序。该程序可以工作，但是当我尝试传递大于 1000 的数组时，我得到“总线错误：10”我认为这与内存的分配方式有关，但是我似乎找不到解决方案。

```
 #ifndef _HEAPSORT_
    #define _HEAPSORT_

void Heapsort(double arrayToSort[], int sizeOfArray);

void Heapsort(double arrayToSort[], int sizeOfArray)
{

//      Building Heap:
// ==========================

int halfSize = sizeOfArray-1 / 2;

for(int i = halfSize; i >= 0; i--){
    double temp = arrayToSort[i];
    int I1 = i, I2 = i+i;
    do {
        if( I2 < sizeOfArray - 1 && arrayToSort[I2+1] > arrayToSort[I2] ) { I2++; }
        if( arrayToSort[I2] > temp ){
            arrayToSort[I1] = arrayToSort[I2];
            I1 = I2;
            I2 = I1+I1;
        } else {
            I2 = sizeOfArray;
        }
    } while ( I2 < sizeOfArray );
    arrayToSort[I1] = temp;
}

//      Sorting Heap:
// =========================

for(int i = sizeOfArray-1; i >= 2; i--){ // i is the number of still competing elements
    double temp = arrayToSort[i];
    arrayToSort[i] = arrayToSort[0]; // store top of the heap
    int I1 = 0, I2 = 1;
    do {
        if((I2+1) < i && arrayToSort[I2+1] > arrayToSort[I2] ) { I2++; }
        if(arrayToSort[I2] > temp ){
            arrayToSort[I1] = arrayToSort[I2];
            I1 = I2;
            I2 = I1+I1;
        } else {
            I2 = i;
        }
    } while( I2 < i );
    arrayToSort[I1] = temp;

}

double Temp = arrayToSort[1];
arrayToSort[1] = arrayToSort[0];
arrayToSort[0] = Temp;
}

#endif /* _HEAPSORT_ */ 
```

任何有关如何解决此问题的见解将不胜感激。这是我分配内存的代码。

```
#include <iostream>
#include "heapsort.h"
#include "rmaset.h"
#include "ranmar.h"
#include "common.h"

using namespace std;

int main(void)
{
const int size = 1000;
struct Common block;

rmaset(block);

double array[size];

for(int i = 0; i < size; i++){
    array[i] = ranmar(block);
}

Heapsort(array,size);

return 0;
} 
```

这只是创建一个结构，然后将其传递给初始化它的函数，然后传递给另一个函数ranmar，该函数用随机数填充它。我已经彻底检查了所有其他功能，并确定错误来自 Heapsort 功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T15:59:13.633

在下一行`int halfSize = sizeOfArray-1 / 2;`中，右侧被评估为`sizeOfArray-(1 / 2)`。整数除法的`(1 / 2)`结果是它用 value`0`初始化。您从数组的末尾开始循环。我想你打算这样做。`halfSize``sizeOfArray``(sizeOfArray-1) / 2`

# javascript - 在服务器端将样式表和 javascript 文件合并为 1

> ID：12958507
> 
> 赞同：0
> 
> 时间：2012-10-18T15:43:16.097
> 
> 标签：javascript, asp.net, css, vb.net

我喜欢在我的 Web 项目中使用单独的 javascript 文件和 css 文件。为了我的清楚起见，每个页面都有自己的 javascript 和 css 文件。

在我最新的项目中，我最终得到了 10 个单独的样式表和 9 个 javascript 文件，这降低了我的应用程序的速度。

我的问题：在服务器端将所有样式表合并到一个文件中并将所有 javascripts 合并到一个文件中的最快方法是什么？最后，浏览器应该将其视为 1 个文件，但我喜欢将我的文件单独保存在后端。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T15:47:00.230

这是我过去使用的：http: [//yuicompressor.codeplex.com/](http://yuicompressor.codeplex.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T16:19:05.697

您应该考虑在构建时使用 MSBuild 来执行此操作。

这些文章可能会有所帮助：

[http://blog.lupi-software.com/2011/05/16/minifying-css-and-javascript-automatically-in-asp-net/](http://blog.lupi-software.com/2011/05/16/minifying-css-and-javascript-automatically-in-asp-net/)

[在 ASP.NET MVC 中将 javascript 和 css 文件与 Rejuicer 相结合](https://stackoverflow.com/questions/9302821/combining-javascript-and-css-files-with-rejuicer-in-asp-net-mvc)

# wamp - WAMP - 本地主机错误

> ID：12958511
> 
> 赞同：1
> 
> 时间：2012-10-18T15:43:23.120
> 
> 标签：wamp

我最近重新安装了 WAMP。我不断收到此错误：

> 404 未找到
> 未找到

在此服务器上找不到请求的 URL /。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T16:56:13.840

点击开始，键入`services.msc`，向下滚动并查找`wampmysqld`and `wampapache`。确保两者都已列出并已启动。如果没有，请执行以下操作：

*   如果它们不存在，请单击 Wampserver 图标，选择服务（Apache 用于 wampapache，MySQL 用于 wampmysqld），然后选择服务，然后选择安装服务

*   如果存在但未启动，请尝试启动它们。您可以右键单击它们，属性并单击开始（如果您喜欢将它们设置为在 Windows 启动时也自动启动），或者您可以从 WampServer 图标执行与上一步相同的操作。

检查 apache 是否在端口 80 或 8080 上运行。试试这个，查看 apache 配置并找到端口：

`httpd -t`（您从命令提示符运行它 - 开始 -> 运行 -> cmd）。

请注意，如果 wamp/apache/Apachex.x.xx/bin 文件夹不在您的 PATH 变量中，您将需要在命令提示符中导航到该文件夹​​，或者在文件夹内按住 shift+右键单击并选择`Open Command Window Here`.

# java - 在几个JLabel中设置相同的gif作为图标

> ID：12958517
> 
> 赞同：2
> 
> 时间：2012-10-18T15:43:51.653
> 
> 标签：java, swing, jlabel, gif

我想将一个 gif （没有循环，只播放一次）设置为几个 JLabel 的图标（使用 setIcon）。问题是：当我将它设置为第一个 JLabel 的图标时，gif 以正常方式播放，但在第二个和其他人只停留在最后一帧......

我的问题是：如何在不干扰过去的 JLabels 的情况下让该 gif 播放任意多次？

希望我已经说明了我的观点。

编辑：我尝试过使用 repaint() 但仍然无法使其工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T16:00:41.237

将图像加载为 a`byte[]`并将其标记为每个标签的单独图像。

`URL`如果由or加载，JRE 通常会缓存图像实例`File`，但向加载方法提供`byte[]`(or `ByteArrayInputStream`) 会阻止缓存。

# java - 如何从上一个故障点重新启动方法

> ID：12958529
> 
> 赞同：5
> 
> 时间：2012-10-18T15:44:16.393
> 
> 标签：java

我有这样的方法：

```
 public void runMethod()
    {
    method1();
    method2();
    method3();
    } 
```

我想根据一个 id 多次调用这个 runMethod。但是，如果说method2（）由于某种原因失败，那么当我调用runMethod时，它应该执行method3（）而不是再次尝试执行method1（）（对于这个id已经成功运行）。

实现这一目标的最佳方法是什么？

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T15:48:15.750

您可以在地图中记录方法是否已成功执行。

```
private Map<String, Boolean> executes = new HashMap<String, Boolean>();

public void method1() {
    Boolean hasExecuted = executes.get("method1");
    if (hasExecuted != null && hasExecuted) {
        return;
    }
    executes.put("method1", true);
    ...
}

// and so forth, with method2, method3, etc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T15:50:20.040

您正在寻找某种状态机。将方法执行的状态保存在数据结构（例如映射）中。

在方法的开头，您需要检查给定id的method1执行是否成功。

```
public void runMethod()
{
  method1();
  method2()
  method3();
}
private Set<Integer> method1Executed = new HashSet<Integer>();
private Set<Integer> method2Executed = new HashSet<Integer>();

private void method1(Integer id)
{
    if (method1Executed.contains(id)) {
        return;
    }
    // Processing. 
    method1Executed.add(id)
}

 // Similar code for method2. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T16:02:51.033

我的解决方案是添加一个 int 是一个指示符，而不是引入映射，尤其是在经常调用代码的情况下。它看起来像这样：

```
public int runMethod(int flag) {
    if (flag < 1) {
        method1();
        if (method1failed) {
            return 1;
        }
    }
    if (flag < 2) {
        method2();
        if (method2failed) {
            return 2;
        }
    }
    if (flag < 3) {
        method3();
        if (method3failed) {
            return 3;
        }
    }
    return 4;
} 
```

# grails - 事务中的 Grails pogo 方法调用

> ID：12958531
> 
> 赞同：0
> 
> 时间：2012-10-18T15:44:20.090
> 
> 标签：grails

这可能是一个愚蠢的问题。

我有时间限制，所以我没有太多时间玩它，但是如果我从 grails 服务调用驻留在 src/groovy 中的 pogo 对象的方法并且它执行 JDBC 数据库工作，那么所有这些都将包括在内在当前交易中？或者我应该把这些 pogo 变成服务吗？

无法在任何地方直接找到答案，也没有太多时间进行实验。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T16:03:29.927

一旦您在一个事务中，您从那里调用（直接或间接）的任何 GORM 方法都将在该事务中执行，除非代码特别努力做一些不同的事情（例如使用它自己的`withTransaction {}`块）。

# javascript - 禁用点击事件

> ID：12958532
> 
> 赞同：-2
> 
> 时间：2012-10-18T15:44:21.147
> 
> 标签：javascript, jquery

我得到了这个功能：

```
function pre_move_callback(anchor){
 $('#etichette div').fadeOut(800);
 $(anchor).delay(800).fadeIn(1800);
} 
```

我需要在淡出时禁用名为“freccia_sx”和“freccia_dx”的两个 div 中的点击事件。我怎样才能？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T15:48:01.493

从事件回调中返回 false 会阻止此事件进一步发送：

```
$('#freccia_sx, #freccia_dx').click(function() {return false;}); 
```

如果要删除处理程序，请查看此帖子：

[在 jQuery 中删除事件处理程序的最佳方法？](https://stackoverflow.com/questions/209029/best-way-to-remove-an-event-handler-in-jquery)

# sql - T-SQL ORDER BY 根据条件

> ID：12958536
> 
> 赞同：7
> 
> 时间：2012-10-18T15:44:30.163
> 
> 标签：sql, sql-server, database, tsql

我正在编写某种资源管理系统。

资源是定义的一个实例。定义是元数据，基本上它包含属性。

这通常是我的数据库：

```
TypeDefinition
id    name
===============
1     CPU

PropertyDefinition
id    name       typeDefinitionId   valueType
================================================
1     frequency  1                  int
2     status     1                  string

TypeInstance
id    name     typeDefinitionId
=================================
1     CPU#1    1  
2     CPU#2    1

PropertyInstanceValue
id   propertyDefinitionId  typeInstanceId   valueType   intValue  StringValue FloatValue
========================================================================================
1    1                     1                int         10
2    2                     1                string                Pending
3    1                     2                int         20
4    2                     2                string                Approved 
```

***要求：***

根据**特定的属性值**对所有资源进行排序。

例如：根据**状态**对所有资源进行排序--> 意思是 CPU#2 将出现在 CPU#1 之前，因为“Approved”在“Pending”之前。

如果我们按照**频率**排序，CPU#1 会出现在 CPU#2 之前，因为 10 在 20 之前。

所以我每次都需要根据不同的列（intValue / stringValue / FloatValue / etc）进行排序，具体取决于属性的valueType。

有什么建议吗？

***局限性：***

PIVOT 目前是我们想到的唯一选择，但这实际上是不可能的，因为数据库很大，我需要尽可能快的查询。

非常感谢提前，

迈克尔。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T16:04:44.810

如果问题是您不想动态构建查询，请使用以下`order by`结构：

```
order by case @orderby
    when 'status' then status
    when 'frequency' then frequency
    end
option (recompile) 
```

您将传递`@orderby`参数。最后`recompile` `option`是强制引擎根据传递的参数构建一个新的计划，也就是假设你使用的是存储过程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T20:00:50.390

如果我正确理解您的问题，我将按如下方式处理：

1.  创建一个允许的字符串值表，确保包含一个用于指定排序优先级的列（我们称之为 AllowedValues）

    > 创建表 [dbo].[AllowedStringValues] ( PropertyDefinitionId int, stringValue varchar(250), sortOrder int)

2.  创建一个复杂的子查询，根据行的 PropertyDefinition 选择正确的值（看起来它需要在 3 列中查找，具体取决于它是什么数据类型）。

3.  如果值是字符串类型，则将子查询与 AllowedStringValues 表进行内连接（假设值存储在值列中）

    > 内连接 AllowedStringValues on ValueType=String AND value = stringValue OR ValueType <> string

4.  如果是字符串，则按 AllowedValues 中的排序优先级排序，否则按数值排序。

    > 'string' 时按大小写 ValueType 然后 sortOrder 否则值结束

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T16:04:51.047

如果要使用 SQL 对查询结果进行排序（而不是在返回结果后在调用应用程序中对它们进行排序），则需要生成动态 SQL 并使用 sp_executesql 执行它。

[http://msdn.microsoft.com/en-us/library/ms188001.aspx](http://msdn.microsoft.com/en-us/library/ms188001.aspx)

# iphone - 如何从代码中将插座与 xib 对象连接？

> ID：12958538
> 
> 赞同：2
> 
> 时间：2012-10-18T15:44:43.487
> 
> 标签：iphone, objective-c, ios

当我们将 xib 对象与类出口连接时会发生什么？如何从代码进行这种连接而不在接口构建器中连接它们？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T15:57:03.207

IBOutlets 只是在运行时加载 nib 时由 nib 加载机制设置的实例变量或属性。他们没有什么特别的。以编程方式设置它们的技巧是在笔尖中找到要连接的对象。如果您使用加载笔尖，`-[NSBundle loadNibNamed:owner:options:]`您将获得一个包含笔尖中所有顶级对象的 NSArray（即，在 IB 中的文档大纲检查器中位于层次结构顶部的对象）。您可以遍历这些及其子视图以查找要连接 IBOutlets 的对象。查看资源编程指南的以编程方式加载[Nib 文件](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/LoadingResources/CocoaNibs/CocoaNibs.html#//apple_ref/doc/uid/10000051i-CH4-SW24)部分。

# maven - 现代 Maven Pom 模板

> ID：12958546
> 
> 赞同：1
> 
> 时间：2012-10-18T15:45:10.233
> 
> 标签：maven, build, pom.xml, maven-archetype, giter8

每次我使用托管在 Github 上的 Maven 创建一个新*的适当*项目时，我都必须查看我自己的一个旧项目并复制 pom 文件，或者我去找一个我认为做得很好的项目并在那里复制 POM 文件。然后我必须去搜索并替换项目名称......等内容。

现在 Maven 通过原型有一个解决方案，但我还没有看到一个足够现代的解决方案：

*   使用发布插件并部署到 SonaType Central Maven reop。
*   连接到 Github（意味着 scm 连接和发布插件工作做正确的事）
*   制作所有*三个*jar 工件（源、javadoc 和常规 jar）

我曾考虑制作一些[giter8](https://github.com/n8han/giter8)模板，但希望有人已经做过类似的事情（大多数 g8 模板都是用于`sbt`）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T07:44:15.750

您可以使用[`com.jcabi:parent:pom`](http://parent.jcabi.com/index.html)which 完全满足您的需要以及更多功能。它部署到 Sonatype，定义版本的常见依赖项，预配置最流行的插件，并定义一些有用的配置文件。

这篇文章解释了更多：[不要在 Maven POM 中重复你自己；使用 Jcabi-Parent](http://www.yegor256.com/2015/02/05/jcabi-parent-maven-pom.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T15:58:31.987

你可以看看Sonatype 发布的[父 pom 。](http://uk.maven.org/maven2/org/sonatype/oss/oss-parent/7/oss-parent-7.pom)它旨在用作部署到`oss.sonatype.org`（可能会或可能不会提升到 Maven Central）的项目的父 pom。

当启用 sonatype-oss-release 配置文件时，它将确保构建源代码和 javadocs。它还包括一个`<scm>`pom 元素的示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T15:59:22.590

事实证明，创建自己的 Maven 原型非常容易。

1.  只需使用您喜欢使用的东西制作一个通用项目
2.  在项目目录下运行`mvn archetype:create-from-project`
3.  通常 Maven 会猜测正确的东西来制作变量，但如果不是，您只需编辑 Velocity 模板。
4.  在本地安装你的原型`mvn install`
5.  要使用您的新原型：`mvn archetype:generate -DarchetypeGroupId=com.mygroup -DarchetypeArtifactId=my-archetype`

现在唯一需要注意的是，我在原型系统上找不到很好的网络文档。就像它不清楚您可以为 Velocity 使用哪些变量（尽管其中大多数是显而易见的）。

[http://maven.apache.org/archetype/maven-archetype-plugin/create-from-project-mojo.html](http://maven.apache.org/archetype/maven-archetype-plugin/create-from-project-mojo.html)

# android - Android替换片段仍然显示一些被替换的片段

> ID：12958555
> 
> 赞同：16
> 
> 时间：2012-10-18T15:45:30.900
> 
> 标签：android, android-fragments

我有一个选项卡，其中包含带有搜索视图和列表视图的线性布局。当用户单击其中一个搜索结果时，我想将该布局替换为另一个包含选择详细信息的布局。

当我替换搜索片段时会发生什么，只有布局的列表视图部分被替换；搜索视图在屏幕上仍然可见并处于活动状态。

这是我的搜索布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/search_layout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <SearchView
        android:id="@+id/public_calendar_search"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:iconifiedByDefault="false"
    </SearchView>

    <ListView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@android:id/list"
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight="1.0"
        android:choiceMode="singleChoice" />

    <TextView
        android:id="@android:id/empty"
        android:layout_width="match_parent"
        android:layout_height="fill_parent"
        android:gravity="center"/>

</LinearLayout> 
```

以下是详细布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/detail_layout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:baselineAligned="false"
        android:orientation="vertical" >

        <Space
            android:layout_width="0dip"
            android:layout_height="20dip"
            android:layout_weight="1" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:baselineAligned="false"
        android:orientation="horizontal" >

        <Space
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:layout_weight=".1" />

        <TextView
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight=".8"
            android:text="@string/label_Name" />

        <Space
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:layout_weight=".1" />
    </LinearLayout>

    .........

</LinearLayout> 
```

还有我替换搜索片段的代码：

```
FragmentTransaction transaction = getFragmentManager().beginTransaction();

// Replace whatever is in the fragment_container view with this fragment,
// and add the transaction to the back stack.
DetailFragment fragment = DetailFragment.newInstance(cal);
transaction.replace(R.id.search_layout, fragment);

transaction.addToBackStack(null);
transaction.commit(); 
```

细节片段创建：

```
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    View v = inflater.inflate(R.layout.detail_layout, container, false);
    return v;
}

static DetailFragment newInstance(String cal) {
    DetailFragment d = new DetailFragment();
    return d;
} 
```

我究竟做错了什么？如何让整个搜索布局被替换。

谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-19T00:04:15.193

我发现了我的问题。Marco 并不完全正确，但他指出了我正确的方向。

问题是我传递给 replace 方法的容器 ID 是我要替换的片段的 ID，而不是片段容器的 ID。这似乎解释了为什么在替换后保留了一些原始片段控件 - 整个片段没有被替换。

我将其更改为获取片段容器视图 ID，并且有效！这是代码：

```
transaction.replace(((ViewGroup)(getView().getParent())).getId(), fragment); 
```

我在这里找到了获取片段的容器视图 ID 的答案，[获取片段的容器视图 ID](https://stackoverflow.com/questions/6925941/get-fragments-container-view-id)。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-01-03T03:28:33.873

我使用了正确的 ID，然后它也没有消失。事实证明，您需要`Background color`在新的 Fragment 布局中将 设置为所需的颜色，如下所示。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
            xmlns:app="http://schemas.android.com/apk/res-auto"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:orientation="vertical"
            android:background="@color/white_color"> 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-09-07T10:02:29.943

要解决此问题，请在片段布局文件中将 android:background 属性设置为“?android:windowBackground”。

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical" 
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="?android:windowBackground"
    tools:context=".MainFragment">

    ...

</LinearLayout> 
```

在 Fragment_2

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical" 
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="?android:windowBackground"
    tools:context=".SomeFragment">

    ...

</LinearLayout> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-03-25T23:02:38.280

我遇到了同样的问题，解决方案对我不起作用。也许这会帮助某人......

我在活动布局 xml 文件中添加了一个片段。这引起了很多问题。

相反，在您的 xml 文件中添加框架布局，然后以编程方式添加和替换片段。这会导致整个片段被替换。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-09-20T14:40:21.420

我曾经遇到过同样的问题，这是我的解决方案。尝试这样做，在你的布局文件中使用`FrameLayout`而不是。`fragment`像这样：

```
 <fragment android:id="@+id/your_fragment" /> 
```

然后，在活动方法中添加您的默认片段`onCreate()`。

```
getFragmentManager().beginTransaction()
.add(R.id.your_fragment, YourFragment)
.commit(); 
```

现在，可以正确替换旧片段，看起来很棒。

这对我有用，我希望它对你也有帮助。

# facebook-like - Facebook Like on site 在时间线上错误地显示为标志图标

> ID：12958566
> 
> 赞同：1
> 
> 时间：2012-10-18T15:45:50.683
> 
> 标签：facebook-like, facebook-opengraph, facebook-timeline

我在一个页面上有一个点赞按钮，其中包含所有必需的打开图形标签，并由 Facebook 调试器验证。在此处查看调试器结果：

[http://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fclasstivity.com%2Fiyengar-yoga-institute-nyc](http://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fclasstivity.com%2Fiyengar-yoga-institute-nyc)

当在网站上按赞时，该页面在 Facebook 时间轴中显示为： - 没有图像，只有标志的图标 - 在 Facebook 页面的点赞框中（它与带有赞页面的赞框模块分开）其他网站）

该页面需要经常访问的用户登录，但允许 Facebook 用户代理查看该页面，因此 Facebook 调试器的成功结果（上面的链接）。

使用的like按钮是iframe之一。但是，在您生成“赞”按钮的页面中输入该页面的 URL 并点击“赞”会产生相同的结果。

有没有人遇到过这个问题和/或知道解决方案？

# vb.net - 从没有节的 ini 文件中读取

> ID：12958567
> 
> 赞同：2
> 
> 时间：2012-10-18T15:45:53.740
> 
> 标签：vb.net, ini, read-write

我正在使用一个类似于[http://forgottencoders.co.uk/showthread.php?tid=53](http://forgottencoders.co.uk/showthread.php?tid=53)的类，但我试图读取的 ini 文件格式不同。例如，它根本没有节标题，并且设置采用以下格式：

```
setting1 0
setting2 0
setting_this true 
```

除了 INI 读/写类之外，还有其他方法可以用来轻松读/写这种类型的 INI 文件吗？我可以想到几种方法，例如 readline 但这有点……粗糙

在 VB.Net 中编码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T05:28:41.187

阅读您显示的设置非常简单，并且在空格上`ReadLine`带有 a`String.Split`就可以了（或者将是最低级别发生的事情）。

但是，RHS 上是否存在多于（或少于）一个“单词”的设置（不难，因为`String.Split`可以在第一个空格处停止）？

是否有空行或注释，注释标记是什么？

# mercurial - How to move versions of files between branches

> ID：12958573
> 
> 赞同：3
> 
> 时间：2012-10-18T15:46:29.340
> 
> 标签：mercurial

I am using Mercurial. I have a file `X` that has two versions in two different branches. I have a version in the `R1` branch and an updated version with bugfixes in the `R0` branch. I have merged the fixes from `R0` into `R1`, but somehow file X was not properly merged.

I now want to move the version of `X` that is in my `R0` branch into the `R1` branch.

How can I do this?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T20:02:18.850

Update to the target branch, revert the file to the the revision of the other branch, then commit.

```
hg update R1
hg revert -r R0 X
hg commit 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T22:21:46.283

Consider [graft](http://www.selenic.com/hg/help/graft) as well (NOTE: I don't know enough about the state of your repository after the merges, but `graft` has helped me when I had to transfer changesets from one branch to another)

# html - 是否有使用 processing.js 可视化麦克风输入的代码示例？

> ID：12958577
> 
> 赞同：0
> 
> 时间：2012-10-18T15:46:44.953
> 
> 标签：html, google-chrome, visualization, processing.js, web-audio-api

我想使用 p5.js 在浏览器中可视化麦克风输入（最好是 chrome）。

然而，网络音频 api [https://dvcs.w3.org/hg/audio/raw-file/tip/webaudio/specification.html](https://dvcs.w3.org/hg/audio/raw-file/tip/webaudio/specification.html)让我抓狂，因为它非常复杂。

我只想使用声音的幅度来控制 p5 中的绘图。就这么简单。

有人知道是否有任何相关的代码示例吗？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-03T23:21:03.347

对于任何有兴趣使用处理语法在 JS 中可视化麦克风输入的人，请尝试使用[p5.js](http://p5js.org)和[p5.sound.js](http://p5js.org/reference/#/libraries/p5.sound)插件库。

这是一个测量 p5.AudioIn 幅度的示例（[http://p5js.org/reference/#/p5.AudioIn](http://p5js.org/reference/#/p5.AudioIn)）

```
var mic;

function setup(){
  mic = new p5.AudioIn()
  mic.start();
}

function draw(){
  micLevel = mic.getLevel();
} 
```

您还可以轻松分析频谱，这是另一个示例 [http://p5js.org/learn/examples/Sound_Frequency_Spectrum.php](http://p5js.org/learn/examples/Sound_Frequency_Spectrum.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T16:46:16.310

看起来这篇文章可以为您提供数据。不过，您必须自己将结果修补到处理中。

[http://www.html5rocks.com/en/tutorials/webaudio/games/](http://www.html5rocks.com/en/tutorials/webaudio/games/)

此功能着眼于削波强信号，但看起来您应该能够获得音频电平。

```
function processAudio(e) {
  var buffer = e.inputBuffer.getChannelData(0);

  var isClipping = false;
  // Iterate through buffer to check if any of the |values| exceeds 1.
  for (var i = 0; i < buffer.length; i++) {
    var absValue = Math.abs(buffer[i]);
    if (absValue >= 1) {
      isClipping = true;
      break;
    }
  }
} 
```

# c# - 通用参数推断和模棱两可的函数调用 - 有解决方法吗？

> ID：12958579
> 
> 赞同：3
> 
> 时间：2012-10-18T15:46:51.803
> 
> 标签：c#, generics, type-inference, ambiguous-call

> **可能重复：**
> [两个 C# 扩展泛型方法之间的不明确调用，一个是 T:class，另一个是 T:struct](https://stackoverflow.com/questions/4014036/ambiguous-call-between-two-c-sharp-extension-generic-methods-one-where-tclass-a)

我有这两个功能：

```
public static Degrees Convert<TInput>(this TInput input)
  where TInput : NumericValue, IDegreesBased, new()
{
  //Some stuff
}

public static SquarredMeters Convert<TInput>(this TInput input)
  where TInput : NumericValue, ISquarredMetersBased, new()
{
  // Some stuff
} 
```

当我打电话时`new SquarredKilometers(10).Convert()`，有一个错误说上面两个函数之间的调用不明确。该类`SquarredKilometers`实现 ISquarredMetersBased 接口。

**编辑**：所以这似乎是正常的。这个精确问题的任何解决方法？（接口实现）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T15:55:01.913

约束不是方法签名的一部分，因此这些方法具有相同的参数类型。Eric Lippert 总是最好地解释 C#：http: [//blogs.msdn.com/b/ericlippert/archive/2009/12/10/constraints-are-not-part-of-the-signature.aspx](http://blogs.msdn.com/b/ericlippert/archive/2009/12/10/constraints-are-not-part-of-the-signature.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T15:59:22.393

您不能拥有这两种方法，因为它们接受相同数量的参数。要使您的代码编译，您必须更改其中一种方法的签名，或者您可以按照 Grumbler85 的建议实现接口。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T15:49:15.993

您的函数签名是相同的 - 这是行不通的。
尝试显式地实现您的接口。

# javascript - 选择其他项目时从选择框中添加和删除选项

> ID：12958582
> 
> 赞同：2
> 
> 时间：2012-10-18T15:46:54.407
> 
> 标签：javascript, jquery, forms

我使用了 jsfiddle 上的代码（如下）。我遇到的问题是，如果我将选项值更改为与文本值不同，它会在更改时将该值添加回文本字段。

```
jQuery(function(){
            jQuery('.selbox').change(function(){
            var val = jQuery(this).val();

            var sel = jQuery(this);

            if(val != "")
            {
            if(sel.data("selected"))
            {   
            var oldval = sel.data("selected");

            sel
           .siblings('select')
           .append(jQuery('<option/>').attr("value", oldval).text(oldval));
           }

           sel
            .data("selected", val)
            .siblings('select')
            .children('option[value=' + val + ']')

            .remove();
          }
          else if(val == "")
          {
          if(sel.data("selected"))
          {   
           var oldval = sel.data("selected");

           sel
           .removeData("selected")
           .siblings('select')
           .append(jQuery('<option/>').attr("value", oldval).text(oldval));
           }
           }            
           });
           }); 
```

我正在使用代码

```
<option value="1">text here</option> 
```

请在此处查看原始代码[http://jsfiddle.net/BUuZv/2/](http://jsfiddle.net/BUuZv/2/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T15:52:00.477

`hide/show`您可以像[这个小提琴](http://jsfiddle.net/BUuZv/17/)一样简单地删除它们并添加它们，而不是删除它们

```
$(function() {
    $('.selbox').change(function() {
        var val = $(this).val();
        var sel = $(this);

        if (val != "") {
            if (sel.data("selected")) {
                var oldval = sel.data("selected");
                sel.siblings('select').find('option[value="' + oldval + '"]').show()
            }

            sel.data("selected", val).siblings('select').children('option[value=' + val + ']').hide();
        }
        else {
            if (sel.data("selected")) {
                var oldval = sel.data("selected");
                sel.removeData("selected").siblings('select').find('option[value="' + oldval + '"]').show()
            }
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-05T05:32:32.463

今天想解决这个问题，这就是我的做法。当用户选择其他时，它会给出一个提示框来添加新的选项值。

```
 function edit_other(e){ //e just stands for element, it can be any varaible name e is just standard practice after using "this"

        if(e.value == "Other"){
            //only run function if "other" option has been selected

                var proceed = false;
            while(proceed == false){
                prompt_response = prompt("Please enter new material type:"); //Create Prompt box
                if (typeof(prompt_response) == "string"){

                             prompt_response = prompt_response.trim(); //tidy end

                    if (prompt_response != ""){//// no value provided by the user on "ok button press"
                         proceed = true;
                        //alert('Please Enter a value to continue or press Cancle!');
                    }

                }
                if (prompt_response === null){////cancel hits
                    proceed = false; //make sure proceed is still false
                    break;
                }
            }
                //once the user enters a valid value add option script
            if(proceed == true){

                    var new_option = document.createElement("option"); //create nre DOM option element
                new_option.text = prompt_response; //Make the text value equal to promt repsonse
                    new_option.value = prompt_response; //Make the option select value equal to promt repsonse
                    new_option.selected = true; //OPTIONAL: select the new added value, most people will select this if they are adding a new value
                    e.add(new_option); //add new option
            }

        }
    }

 <select id="xxx" onchange="edit_other(this)">
       <option value="1"> First Option </option>
       <option value="Other">Other</option>
    <select> 
```

# c - 如何使用通过引用传递给 C 中的函数的指针来分配 2d 锯齿状数组

> ID：12958583
> 
> 赞同：3
> 
> 时间：2012-10-18T15:46:55.503
> 
> 标签：c, function, malloc, multidimensional-array

我在我的`main()`块中声明了一个 2D 锯齿状数组。这将被传递给函数以分配内存。以下是最精简的情况，它编译但在运行时崩溃。我哪里错了？

```
#include <stdio.h>
#include <stdlib.h>

void alloc2d(double ***p);

int main () {

    double **data;

    alloc2d(&data);
    printf("Before assign to data\n");
    data[0][0] = 0.1;
    printf("After assign to data\n");
    free(data);
}

void alloc2d(double ***p) {

    int i, n, m;

    // Get some dynamically assigned sizes
    printf("Enter size: ");
    scanf("%d %d", &n, &m);    
    // Now allocate
    *p = malloc(n * sizeof(double*));
    for (i = 0; i < n; i++) {
        *p[i] = malloc(m * sizeof(double));
    }
    printf("End of alloc2d\n");
} 
```

这会读取值，但当我输入低数字（即“1 1”）时会崩溃，但当我输入高数字（即“10 10”）时会崩溃。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-18T15:52:22.037

你犯了一个非常简单的语法错误

```
*p[i] = (double*)malloc(m * sizeof(double)); 
```

真的应该

```
(*p)[i] = (double*)malloc(m * sizeof(double)); 
```

这是因为在 C 中，[] 运算符的优先级高于 *。因此，当您键入时`*p[i]`，它会被翻译成`**(p + i)`.

这意味着：您要求编译器通过将 p 的地址偏移来计算地址`i * sizeof(double**)`，这显然不是您真正想要的。

因此，为了强制编译器首先取消引用 p，只需`*p`用括号括起来。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T15:54:10.377

运算符优先级就是答案。`*p[i]`相当于`*(p[i])`。这使您可以访问位于`data`指针之后的内存，这将破坏堆栈上的其他一些变量，或者完全崩溃。

您正在寻找`(*p)[i]`，这将是新分配数组中的第 i 个条目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T21:47:18.757

您的 alloc2d() 分配的并不是真正的二维数组，而是：

*   1 1D n-long 指针数组，指向 double
*   n 1D m 长的双精度数组

只有在编译时知道除了最后一个维度之外的所有维度时，C 中的多维数组才是可能的：

```
double a[5][11]; 
```

也许，这个程序可以帮助你理解......注意，COLUMNS 如何是编译时常量，即使 rows 是运行时变量：

```
#include <stdio.h>
#include <stdlib.h>
#include <sysexits.h>
#include <err.h>

typedef double  myrow_t[11]; /* 11 columns */
#define COLUMNS (sizeof(myrow_t)/sizeof(double))

static unsigned
alloc2d(myrow_t **pd)
{
unsigned int rows;

printf("Enter the number of rows: ");
while (scanf("%u", &rows) != 1)
    printf("\ninvalid input, please, try again: ");

*pd = malloc(rows * sizeof(**pd));
if (*pd == NULL)
    err(EX_TEMPFAIL, "Out of memory");

return rows;
}

int
main()
{
myrow_t     *d;
unsigned int     row, column, rows;

rows = alloc2d(&d);

for (row = 0; row < rows; row++)
    for (column = 0; column < COLUMNS; column++)
        d[row][column] = row * column;

for (row = 0; row < rows; row++) {
    printf("Row %3d:\t", row);
    for (column = 0; column < COLUMNS; column++)
        printf("%.0f\t", d[row][column]);
    puts("");
}

free(d);
return 0;
} 
```

# jquery - 单击相邻时关闭下拉菜单

> ID：12958584
> 
> 赞同：1
> 
> 时间：2012-10-18T15:46:58.810
> 
> 标签：jquery, drop-down-menu, slidedown, slideup

我正在使用以下下拉菜单。它工作得很好，但是，如果单击正文中的某处或单击另一个下拉列表，我无法弄清楚如何获得一个打开的下拉列表来滑动。

```
$(document).ready(function () { 
$('.nav li').click(function() {

  var slideToggle = this;
  if ($('ul', this).is(':visible')) {
      $('ul', this).slideUp(function() {
          $(slideToggle).removeClass('active');
      });
  }
  else {
      $('ul', this).slideDown();
      $(slideToggle).addClass('active');
  }
});
}); 
```

在此处查看操作：http: [//jsfiddle.net/Ngh5C/1/](http://jsfiddle.net/Ngh5C/1/)

什么是我所问的最简单的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T15:56:47.800

利用事件冒泡并将点击处理程序绑定到合适的父容器（例如主体）。检查处理程序中的目标，如果它不是您的菜单之一，请使用选择器找到打开的菜单并关闭它。

这是一个简单的示例作为起点：

[http://jsfiddle.net/Ngh5C/6/](http://jsfiddle.net/Ngh5C/6/)

试试这个小提琴，一次只打开一个：

[http://jsfiddle.net/Ngh5C/7/](http://jsfiddle.net/Ngh5C/7/)

如果您真的只想关闭单击的项目的邻居（这是一个奇怪的要求），那么这有效：

[http://jsfiddle.net/Ngh5C/8/](http://jsfiddle.net/Ngh5C/8/)

# c++ - C++ - 无符号整数

> ID：12958589
> 
> 赞同：3
> 
> 时间：2012-10-18T15:47:05.850
> 
> 标签：c++, integer, unsigned

我有以下用 C++ 编写的程序：

这个程序的问题是，如果用户输入一个负数，它不会被 line 捕获`if(!cin)`。我认为无符号整数不能接受负数。那么为什么如果我输入一个负数来调整大小，它不会被捕获`if(!cin)`并且程序继续执行而没有错误消息？

我无法使用`if(size < 0)`. 我想展示无符号整数如何解决负输入问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T15:53:46.403

大多数平台上无符号整数和有符号整数之间的区别是符号位......除此之外，实际的二进制值是相同的，它只是根据二进制值所代表的类型的符号来解释两种不同的方式. 因此，您绝对可以将负值输入“表示”为无符号值......它不会被重新解释为该值，但它绝对可以作为该值输入，而不会在流上设置错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T15:55:46.030

不是 c++ 大师或其他任何东西，但您是否尝试过使用而不是 !cin 并通过[更深入的解释](http://www.cplusplus.com/forum/beginner/2957/)`cin.fail()`清除缓冲区`cin.clear()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T15:54:54.650

C 和 C++ 允许您将负值分配给无符号类型的对象。结果是原始值减少模`2^n`，其中`n`是无符号类型的大小。因此，例如，`unsigned i = -1;`初始化`i`为`UINT_MAX`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T15:55:21.707

检查 `if(!cin)`只会表明*没有*读取任何内容，例如文件结尾。

整数`unsigned`不会*强制*输入为正数；它只是意味着该值将始终被*解释*为正数（请参见[符号位](http://en.wikipedia.org/wiki/Sign_bit)），如果该数字实际上是负数，这可能会产生巨大的影响。

您最好的选择可能是输入一个有符号整数，然后在您的代码中测试它是否为正。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-18T15:57:28.680

如果您想阻止用户输入负数，请将输入作为有符号数并检查它是否等于或大于零。

该标准基本上说，当您尝试将数字分配给超出类型范围的整数类型时，将添加或减去类型大小的倍数，直到该值在范围内。

碰巧的是，对于表示为 2-s 补码并在有符号和无符号整数范围内的值，这意味着完全相同的位模式将分配给任何值。负 1 具有全为 1 的位模式，它转换为 unsigned int 的最高可能值，等于或原始值加上 unsigned int 的大小。`-1 + 2^(32)`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-18T18:03:12.430

或者您可以只使用更大的有符号整数类型。

```
long long n = -1;
cout << "Enter a number: ";
cin >> n;

if( !cin.good() )
    cout << "Not a valid number." << endl;
else if( n > UINT_MAX )
    cout << "Overflow, value is more than UINT_MAX." << endl;
else if( n < 0 )
    cout << "Negative, value is less than 0." << endl;
else {
    unsigned int m = (unsigned int)n;
    cout << "Valid unsigned int was input: " << m << "." << endl;
} 
```

# java - 基于 Eclipse 的自定义内容协助？（爪哇）

> ID：12958590
> 
> 赞同：1
> 
> 时间：2012-10-18T15:47:10.973
> 
> 标签：java, eclipse, content-assist

是否可以编辑 Eclipse 的内容帮助？为它添加规则或功能？我知道 Eclipse 是开源的，但我有“更简单的方法”还是界面？

例如，我正在使用 Java 1.4.2，所以我不相信我有神奇的“自动装箱”（我认为自动装箱会解决这个问题是正确的吗？）。因此，当我从请求中获取参数时，当我可能需要 Long 或 Int 时，它们都会返回字符串。我一直对使事情更加自动化（就像任何计算机科学家通常会的那样）感兴趣，所以我想知道是否可以让内容辅助建议使用常见的 java 解析函数（Integer.parseInt、Long.parseLong 等）对于传入的参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T15:55:52.177

如果您想以非常详细的定制方式实际增强 Content Assist，则必须编写一个插件。Eclipse 的架构非常好，因此有无数的扩展点，插件可以通过这些扩展点扩展基本功能，包括 Content Assist。但是，写一篇文章并不是一件小事（尽管如果你有时间学习的话，这项技能可以很好地为你服务）。

另一种选择是编写您自己的 Java 编辑器模板，该模板可以发出您想要的任何预定义代码片段（包括插入参数值），并将包含在 Content Assist 中。打开 Eclipse 的 Preferences 并导航到*Java* > *Editor* > *Templates*。你可以使用 ? 该首选项页面上的帮助按钮以了解有关它们的更多信息。

# css - IE7 兼容模式下的 IE9 在 css 中呈现数据 URI

> ID：12958594
> 
> 赞同：3
> 
> 时间：2012-10-18T15:47:31.787
> 
> 标签：css, internet-explorer-7, internet-explorer-9, data-uri, ie-compatibility-mode

我在 IE9 中测试一个站点并使用兼容模式在 IE7 标准模式下进行测试

一些调整，在 IE7 中一切看起来都很好

然而，我注意到所有的 css 都在使用数据 uris 到图像（你知道图像包含的 base64 乐趣）。这很好，花花公子。

但是，IE7 不支持数据 URI 是吗？！那么为什么IE7模式下的IE9可以正常显示呢？！如果这是正确的，那么 IE9 的兼容模式对于完整的 IE7 测试来说是毫无用处的。

我对么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-19T12:38:18.910

原因是 IE9 兼容模式不等于 IE7（只是兼容）并且不应该用于测试 IE7 的东西。不要依赖它。

# php - 追踪分段错误 11 到大型 PHP 代码库

> ID：12958595
> 
> 赞同：5
> 
> 时间：2012-10-18T15:47:39.383
> 
> 标签：php, apache, segmentation-fault

好的，所以有一个相当庞大的内部系统。我们有一位友善的主人，如果出现问题，他通常会与我们一起工作，以保持工作正常，或者至少为我们指明正确的方向。

不久前，我们不得不复制代码并将其托管在由 Rackspace 托管的客户端外部专用服务器上。考虑到几个月来一切都运行良好，突然间服务器不断抛出嘶嘶声和分段错误，例如

> [通知] child pid 8628 exit signal Segmentation fault (11)

即使没有更改任何代码，主机也表示这可能是 PHP 问题，开发人员（我们）将不得不调查它。我什至没有看到问题，只是在某些时候当 apache 日志旋转时（深夜），这会导致它翻倒。

我让它们启用核心转储，并且我拥有一堆它们，以及[Fixing Apache Segmentation Faults Caused by PHP](http://www.omh.cc/blog/2008/mar/6/fixing-apache-segmentation-faults-caused-php/)，但是 rackspace 似乎已将所有 php 和 apache 源目录移动到天知道在哪里，我找不到 .gdbinit使用'find'在服务器上的任何地方，我能从gdb中得到的只是

```
Program terminated with signal 11, Segmentation fault.
#0  0x00002b8d6fc36c60 in ?? () 
```

......如果它尝试过，它的帮助不会减少！！！

关于从哪里开始在我的代码中跟踪这个假定问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T16:06:14.250

您可以首先将 PID 添加到 apache 日志中，然后查看哪个死了……您将看到它是否至少是相同的请求。

也许您可以在崩溃开始之前看到更新的内容，并且如果某些模块已更新并且没有它们就无法生存，也许您可​​以回滚到以前的配置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T17:00:24.437

如果您知道如何使用 GDB 调试应用程序内核，[这里](http://iuscommunity.org/pages/Repos.html)是源 RPM 和 RPM。

我还建议您在应用程序核心上运行“字符串”。这不会给你确切的问题，但在许多情况下，它会提供一些有用的东西。

高温高压

# batch-file - 删除多个包含空格的目录/文件夹的批处理

> ID：12958599
> 
> 赞同：0
> 
> 时间：2012-10-18T15:48:06.563
> 
> 标签：batch-file, directory, spaces

我正在尝试编写一个删除目录中多个目录/文件夹的批处理

我在用

```
for /D %f in (*) do rmdir %f /s /q 
```

现在这可以工作并删除不包含空格的文件夹名称。

在为执行此操作的文件夹运行上述命令后，我收到此消息。

```
d:\test\testworld\rmdir remove me /s /q 
```

> 该系统找不到指定的文件。
> 该系统找不到指定的文件。

大多数文件夹都包含空格。无论如何我可以更改命令以包含带空格的文件夹吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T15:51:44.173

使用**引号**。

```
rmdir remove me /s /q 
```

失败，但是

```
rmdir "remove me" /s /q 
```

作品。

对命令行的更改将是`for /D %f in (*) do rmdir "%f" /s /q`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T15:51:26.460

您可以使用 " 双引号，例如`rmdir "remove me" /s /q`

# perl - Perl 的 "not" 运算符不能按预期使用 defined() 函数

> ID：12958603
> 
> 赞同：9
> 
> 时间：2012-10-18T15:48:15.843
> 
> 标签：perl

以下代码段未按预期工作：

```
$k{"foo"}=1;
$k{"bar"}=2; 
if(not defined($k{"foo"}) && not defined($k{"bar"})){
    print "Not defined\n";
}
else{
    print "Defined"
} 
```

由于 $k{"foo"} 和 $k{"bar"} 都已定义，因此预期输出为“已定义”。但是，运行代码会返回“未定义”。

现在，玩弄代码我意识到在每个调用周围放置括号`not defined()`会产生所需的结果：

```
if((not defined($k{"foo"})) && (not defined($k{"bar"}))){print "Not Defined"} 
```

我想这与运算符优先级有关，但有人可以解释到底发生了什么吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-18T15:50:38.387

优先级问题。

```
not defined($k{"foo"}) && not defined($k{"bar"}) 
```

方法

```
not ( defined($k{"foo"}) && not defined($k{"bar"}) ) 
```

这相当于

```
!defined($k{"foo"}) || defined($k{"bar"}) 
```

当你真正想要的时候

```
!defined($k{"foo"}) && !defined($k{"bar"}) 
```

解决方案：

*   `!defined($k{"foo"}) && !defined($k{"bar"})`
*   `not defined($k{"foo"}) and not defined($k{"bar"})`
*   `(not defined($k{"foo"})) && (not defined($k{"bar"}))`

PS - 该语言被命名为“Perl”，而不是“PERL”。

# jquery - 减少包含超过 500 个事务的数据表页面的加载时间

> ID：12958612
> 
> 赞同：0
> 
> 时间：2012-10-18T15:49:06.233
> 
> 标签：jquery, jsf-2, tabs, datatables

1.  有没有办法通过使用数据表来减少 IE 中页面的加载时间。
2.  如果我们使用服务器端的分页和排序，我们是否也可以在服务器端进行快速搜索，并且只呈现特定的选项卡而不是整个页面。

    `<h:panelGroup id="transactionsPanel"> <h:dataTable> </h:dataTable> <ui:repeat value="#{backing.pages}" var="page" varStatus="current"> <h:commandLink value="#{page}" actionListener="#{backing.page}" rendered="#{page != backing.currentPage}" > <f:ajax render="transactionsPanel"/> </h:commandLink> <ui:repeat>
    </h:panelGroup>`

调用了侦听器，但页面未更新以显示单击的下一页。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T15:53:58.743

> *有没有办法通过使用数据表来减少 IE 中页面的加载时间。*

不。

至少，不是没有用更健全的网络浏览器替换 IE。众所周知，IE 的 HTML`<table>`渲染器很差。这是客户端问题，而不是服务器 (JSF) 问题。您可以通过测量网络流量速度和浏览器 HTML 渲染速度来确认这一点。

* * *

> *如果我们使用服务器端的分页和排序，我们是否也可以在服务器端进行快速搜索，并且只呈现特定的选项卡而不是整个页面。*

只需在服务器端执行搜索（通过 ajax）。

我建议查看 JSF 组件库，而不是抓住松散的 jQuery 插件并将松散的脚本拼凑在一起。例如，PrimeFaces 有一个延迟加载`<p:dataTable>`，只需干净的 XHTML 和 JPA 就可以解决您的所有问题。另请参阅[惰性`<p:dataTable>`展示示例](http://www.primefaces.org/showcase/ui/data/datatable/lazy.xhtml)和[高效 JSF 分页](https://stackoverflow.com/questions/7382486/efficient-jsf-pagination)。

# c - 在 Windows 7 上实现 C 程序的“\a”输出的正常音量

> ID：12958613
> 
> 赞同：0
> 
> 时间：2012-10-18T15:49:14.923
> 
> 标签：c, windows

我编写了一个简单的 C 程序，通过 printf() 将 '\a' 输出到标准输出。我已经在运行 Windows 7 的 PC 上在 Cygwin 下使用 gcc 编译了它。我在执行程序时听到的声音是常见的 Windows 警报声音之一的非常微弱的版本（听起来像是某种弦被敲击乐器）。但我无法获得具有通常音量的声音。有没有办法获得那个音量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T16:47:32.250

使用 printf() 输出 '\a' 通常会通过集成的 pc 扬声器输出哔声。要通过声卡播放 veep，请使用WinAPI 中的[MessageBeep](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680356%28v=vs.85%29.aspx)。

例如：

```
#include <Windows.h>

int main() {
    MessageBeep(MB_ICONERROR);
    return 0;
} 
```

# asp.net - 无法使用 IIS7 Url Rewrite 重写 URL

> ID：12958620
> 
> 赞同：0
> 
> 时间：2012-10-18T15:49:29.137
> 
> 标签：asp.net, iis-7, url-rewriting

我在 IIS7 中遇到了 Url Rewrite 模块的问题。我已经阅读了几篇关于此类问题的帖子，但我似乎无法弄清楚。

这是规则：

```
<rule name="Imported Rule 11" stopProcessing="true">
   <match url="/s\/([\w\%20\s]+)\/default\.aspx" />
   <action type="Rewrite" url="\/landingpage.aspx\?mc={R:1}" 
     logRewrittenUrl="true" />
</rule> 
```

我从以前的 ISAPI ini 过滤器导入它，如下所示：

```
RewriteRule ^\/s\/([\w\-\_\%20\s]+)\/default\.aspx \/landingpage.aspx\?mc=$1 [L,I] 
```

我不得不稍微调整正则表达式以使其与内置测试器一起使用，但它与 url 匹配

```
/s/RETQ211CA/default.aspx 
```

根据日志，请求通过以下方式：

```
2012-10-18 15:41:54 ::1 GET /s/RETQ211CA/default.aspx - 80 - ::1 Mozilla/4.0+(compatible;+MSIE+8.0;+Windows+NT+6.1;+WOW64;+Trident/4.0;+SLCC2;+.NET+CLR+2.0.50727;+.NET+CLR+3.5.30729;+.NET+CLR+3.0.30729;+.NET4.0C;+.NET4.0E) 404 0 0 1468 
```

这发生在本地或通过互联网。

有人可以告诉我我在这里到底做错了什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T16:12:57.883

以下规则可以解决问题：

```
s\/([\w\%20\s]+)\/default\.aspx 
```

如果您愿意，您可以使用 ^ 开始此规则并以 $ 结束。

令人困惑的是 url rewrite 假设您在根目录中。

# jquery - 数据更新后重新加载 Telerik 网格

> ID：12958623
> 
> 赞同：0
> 
> 时间：2012-10-18T15:49:48.813
> 
> 标签：jquery, asp.net-mvc, telerik-grid

数据更新后如何重新加载/刷新 Telerik 数据网格？是否有一个内置的 Telerik 函数，我可以在 ajax 成功中调用它？如果没有，如何最好地刷新/重新加载 Telerik 网格？

jQuery：

```
$("#SaveHours").click(function (e) {

    e.preventDefault();
    var link = '/Project/SaveHours';

    $.ajax({
        type: 'POST',
        url: link,
        data: { hours: $("#HoursWorked").val(),
            descType: $("#Description").val(),
            wrkType: $("#WorkType").val()
        },
        dataType: 'json',
        success: function (result) {
            alert(result.message);
        },
        error: function (result) {
            alert("Failed");
        }
    }); 
```

网格位于局部视图中，这是我返回局部的方式：

```
 <%  Html.RenderAction("Hours"); %> 
```

这是我的控制器动作：

```
[GridAction]
public ActionResult Hours()
{
    ViewData.Model = db.vwHours;
    return View();
} 
```

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T16:44:30.697

您可以使用 Telerik 网格重新绑定方法

```
$.ajax({
        type: 'POST',
        url: link,
        data: { hours: $("#HoursWorked").val(),
            descType: $("#Description").val(),
            wrkType: $("#WorkType").val()
        },
        dataType: 'json',
        success: function (result) {
            //rebind here
            var grid =  $("#MyGrid").data("tGrid");
            grid.dataBind(result.data)
        },
        error: function (result) {
            alert("Failed");
        }
    }); 
```

# javascript - Internet Explorer 9 无法获取属性值错误

> ID：12958625
> 
> 赞同：2
> 
> 时间：2012-10-18T15:50:10.630
> 
> 标签：javascript, variables

在以下代码中，我收到以下错误：

`Unable to get value of the property 'deal_score_round_img': object is null or undefined`

调试器将值报告`jdeals[i]['deal_score_round_img']`为：

`"<img src=\"assets/deal_scores/80.gif\" width=\"40\" height=\"35\" />"`

错误发生在第一行 (typeof)。

```
if(typeof(jdeals[i]['deal_score_round_img'])!="undefined")
{
    var nums = jdeals[i]['deal_score_round_img'].match(/([[0-9]+)/ig);
    t.deal_score = nums[0];//80
} 
```

该脚本的目的是从图像字符串中提取“80”。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T15:54:52.893

似乎 jdeals 可能为 null 或未定义，如果这是预期的，您也想检查它：

```
if(typeof(jdeals[i])!="undefined" && 
    typeof(jdeals[i]['deal_score_round_img'])!="undefined") 
```

# sencha-touch - 启动与 facebook javascript sdk 集成的 web 应用程序移动

> ID：12958633
> 
> 赞同：0
> 
> 时间：2012-10-18T15:50:40.443
> 
> 标签：sencha-touch, facebook-javascript-sdk

我是这个主题的新手，我已经在 Sencha 有一个应用程序，现在我想集成 facebook 登录，我正在学习这个 facebook 教程[https://developers.facebook.com/docs/guides/mobile/ web/#register](https://developers.facebook.com/docs/guides/mobile/web/#register) 但我不明白什么是移动网络 URL，因为我的应用程序在 Sencha 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T19:30:54.090

在 ST2 SDK 中，有一个名为 examples 的文件夹，很好的 Jog With Friends 应用程序，你可以看到如何实现 facebook

# excel - 如何通过两列之间的差异填充列表框

> ID：12958635
> 
> 赞同：1
> 
> 时间：2012-10-18T15:50:44.020
> 
> 标签：excel, vba

我想通过两列之间的差异来填充 ListBox，
即如果一个单元格存在于一列中，并且不存在于第二列中

```
Dim r1 As Range, r2 As Range
Set r1 = Range(Sheets(1).Range("B2"), Sheets(1).Range("B" & Rows.Count).End(xlUp))
Set r2 = Range(Sheets(2).Range("B2"), Sheets(2).Range("B" & Rows.Count).End(xlUp))
For Each cc In r1.Cells
For Each cell In r2.Cells
If Not cc.Value = cell.Value Then Form1.ListBox1.AddItem cell.Value
Next cell
Next cc
Form1.Show 
```

我得到的是无尽的过程（沙钟图标）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T17:54:42.680

替代解决方案，我认为可以满足 OP 要求

```
Private Sub UserForm_Initialize()
    Dim r1 As Range, r2 As Range
    Dim i As Long, j As Long
    Dim d1, d2
    Dim mtch As Boolean

    Set r1 = Range(Sheets(1).Range("B2"), Sheets(1).Range("B" & Rows.Count).End(xlUp))
    Set r2 = Range(Sheets(2).Range("B2"), Sheets(2).Range("B" & Rows.Count).End(xlUp))
    d1 = r1
    d2 = r2

    For i = 1 To UBound(d1)
        mtch = False
        For j = 1 To UBound(d2)
            If d1(i, 1) = d2(j, 1) Then
                mtch = True
                Exit For
            End If
        Next j
        If Not mtch Then
            Me.ListBox1.AddItem d1(i, 1)
        End If
    Next i
    Me.Show
End Sub 
```

请注意，还有其他方法可能更有效，但是对于 1400 行，这几乎可以立即填充列表

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T16:16:01.847

您的嵌套循环现在的工作方式是：对于 r1.cells 中的每个 cc，它会检查每个单元格是否等于 cc(1)，如果不是，则将其添加到您的列表中，然后继续下一个 cc。所以你最终会进行 1400x1400 次迭代而不是 1400 次。

我认为你所追求的更像是这样的：

```
 Dim r1 As long, r2 As long
    r1 = Sheets(1).Range("B" & Rows.Count).End(xlUp).row
    r2 = Sheets(2).Range("B" & Rows.Count).End(xlUp).row
    'set looping integer = to the longest column
    if r1>r2 then 
        r3 = r1
    elseif r2>r1 then 
        r3 = r2
    else: r3 = r1 'if equal set to sheet1 column length
    end if
    for i = 1 to r3 'loop through each row at same time for both sheets
        If sheets(1).range("B" & i).Value <> sheets(2).range("B" & i).Value Then Form1.ListBox1.AddItem sheets(2).range("B" & i).Value
    Next i
    Form1.Show 
```

请注意，我将循环长度设置为记录最多的列的长度

# filter - 从 NN 表创建过滤器

> ID：12958644
> 
> 赞同：0
> 
> 时间：2012-10-18T15:51:22.027
> 
> 标签：filter, symfony-1.4

我的项目涉及音乐。我想让我的用户过滤音乐的风格然后想要跟随。

这是我的桌子

```
sfGuardUser ------ n -------------------------- n --------- Style
                                 |
                             LikeStyle 
```

我的想法是用过滤器处理它。它应该通过复选框显示所有现有样式，然后用户可以选中这些框并将其保存在 LikeStyle 表中。

我已经使用了过滤器，我想知道我是否可以这样做。

# ipad - iPad 上的 JQuery UI 自动完成

> ID：12958649
> 
> 赞同：1
> 
> 时间：2012-10-18T15:51:36.090
> 
> 标签：ipad, jquery-mobile, jquery-ui-autocomplete

有没有人尝试过使用 JQuery UI for iPad web 应用程序开发自动完成输入？

我使用 JQuery mobile 并添加了 JQuery UI 来执行自动完成。它在 Firefox 上运行良好，但在 iPad 上却不行。

是否有任何限制或不兼容？

# jquery - 自定义 jQuery 事件仅触发一次

> ID：12958653
> 
> 赞同：2
> 
> 时间：2012-10-18T15:51:55.963
> 
> 标签：jquery

我正在使用此代码创建一个 onshow 事件：

```
(function($){
  $.fn.extend({ 
    onShow: function(callback, unbind){
      return this.each(function(){
        var obj = this;
        var bindopt = (unbind==undefined)?true:unbind; 
        if($.isFunction(callback)){
          if($(this).is(':hidden')){
            var checkVis = function(){
              if($(obj).is(':visible')){
                callback.call();
                if(bindopt){
                  $('body').unbind('click keyup keydown', checkVis);
                }
              }                         
            }
            $('body').bind('click keyup keydown', checkVis);
          }
          else{
            callback.call();
          }
        }
      });
    }
  });
})(jQuery); 
```

然后我叫它：

```
$(document).ready(function(){

    $('.mydiv').onShow(function(){
        alert('myDiv is now showing');

    });

}); 
```

我还切换了触发 div 显示和隐藏的链接：

```
$('.myLink').click(function(){
        $(".mydiv").slideToggle();
}); 
```

最后是html：

```
<a href="#" class="myLink">Step 1</a>
        <div class="myDiv">content here</div> 
```

问题是，当我在页面加载后单击链接时，警报只显示一次。如果我再次单击它，我将不会显示。

任何想法为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T16:53:20.053

我认为这是对事件如何在 javascript 中工作的误解。您的自定义扩展程序正在运行一次。该行`$('body').bind('click keyup keydown', checkVis);`侦听​​ click keyup 和 keydown 事件，但此侦听器仅应用于隐藏且已通过`if($(this).is(':hidden')){`检查的元素。

因此，如果有问题的元素开始隐藏，它将响应`checkVis`“单击 keyup 和 keydown”，但这是在`onShow`扩展完成第一次运行后运行任何东西的唯一实例。

`.slideToggle();`默认情况下不会触发任何事件，因此您的扩展程序无法侦听此类事件的触发。

最接近监听改变其可见性的元素是使用类似 dom 突变事件的东西，但这已被弃用并且不支持跨浏览器。

如果您真的需要能够在 jQuery“显示”元素时运行扩展，我能想到的最好方法是扩展您希望用来触发自定义事件的 jQuery 函数，它看起来像这样：

```
 var existingSlideToggle = $.fn.slideToggle;

    $.fn.slideToggle = function(){
         var returner = existingSlideToggle(this, arguments);
         $(this).trigger('customOnShowEvent');
         return returner;
    } 
```

然后你可以这样做：

```
 $('#foo').on('customOnShowEvent', function(){  
       // do stuff 
    }); 
```

或者继续您的扩展策略：

```
(function($){
  $.fn.extend({ 
    onShow: function(callback, unbind){
      return this.each(function(){
        var obj = this;
        var bindopt = (unbind==undefined)?true:unbind; 

        var localRun = function(){
          if($(obj).is(':hidden')){
            var checkVis = function(){
              if($(obj).is(':visible')){
                callback.call();
                if(bindopt){
                  $('body').unbind('click keyup keydown', checkVis);
                }
              }                         
            }
            $('body').bind('click keyup keydown', checkVis);
          }
          else{
            callback.call();
          }
        }

        if($.isFunction(callback)){
            localRun();
            $(obj).on('customOnShowEvent', localRun);
        }

      });
    }
  });
})(jQuery); 
```

这样它将第一次运行，然后在新的“customOnShowEvent”被触发（“触发”）时重新运行。

# java - 启用 OSGi/RCP 插件以从另一个非依赖插件加载类

> ID：12958655
> 
> 赞同：2
> 
> 时间：2012-10-18T15:51:58.073
> 
> 标签：java, osgi, eclipse-rcp, classloader, gridgain

我有一组三个 RCP 插件：一个是我的主应用程序插件，另一个是计算集合，第三个是 GridGain 的包装器，其中必须从计算插件创建类的实例。

主插件使用 ExtensionPoint 实例化从计算和 GridGain 插件中实例化类，例如：

```
 IExtensionRegistry registry = Platform.getExtensionRegistry();

    IExtensionPoint providerExtensionPoint = registry.getExtensionPoint(EXT_CORE_DATA_PROVIDERS);
    IConfigurationElement[] providers = providerExtensionPoint.getConfigurationElements();

    List<DataProviderFactory> dataProviders = new ArrayList<DataProviderFactory>();
    for (IConfigurationElement member : providers) {
        try {
            Object obj = member.createExecutableExtension(K_CLASS);
            if (obj instanceof DataProviderFactoryFactory) {
                DataProviderFactoryFactory factory = (DataProviderFactoryFactory) obj;
                for (Object o : factory.createProviderFactories(this, holdingProperties())) {
                    dataProviders.add((DataProviderFactory) o);
                }
            }
        }
        catch (Exception e) {
            throw new RuntimeException(e);
        }
    }

    return dataProviders; 
```

因此与其他插件没有直接依赖关系。

当 GridGain 必须从计算插件实例化类的实例时，我的问题就出现了。由于 GridGain 插件没有直接依赖于计算插件，它的类加载过程看不到那里的类，所以我得到了 ClassNotFoundException。

我过去曾使用[RCP buddy policies](http://rajakannappan.blogspot.com/2010/03/eclipse-classloading-and-buddy-policy.html)解决过类似的问题，这似乎是一个类似于您在使用 ORM 时遇到的问题。但是，“注册”策略取决于定义类的插件（在我的情况下为计算插件）依赖于实例化它们的插件（GridGain 插件）这一事实。在我的场景中，没有这样的依赖。因此，将 BuddyPolicy: 注册到 GridGain 和 RegisterBuddy: gridgain 添加到计算插件不起作用。

我发现让 GridGain 插件从计算插件中解析类的唯一方法是将 GridGain 显式定义为对计算具有依赖性。在我看来，这不应该是必要的，应该有一种方法可以让它成为一个软依赖，如果存在计算插件，GridGain 可以从中实例化类。是否有另一种方法来模拟这种相互依赖关系，以便我的类加载问题消失？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T22:26:48.183

GridGain 插件应该有某种方式依赖于您的计算插件。如果您不定义任何依赖项，GridGain 将无法访问计算类。我可以想到这一点，创建另一个具有通用接口的插件（基本插件）并使 GridGain 和计算依赖于基本插件。在计算插件中为您在基本插件中定义的接口公开声明性服务。

在 GridGain 插件中，使用 osgi`ServiceTracker`等待 Calculations 插件中暴露的服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T06:06:19.373

有两种安全的方法可以在不导入包的情况下从另一个包中实例化类。

在大多数情况下，您想要一个您知道的接口的实现。对于这种情况，一种好的方式是为包中的类创建一个工厂，该类知道 impl 并发布它，例如使用 OSGi 服务。然后可以在工厂内部使用 new 实例化该类。

另一种方法是使用知道 impl 的包的类加载器。在这种情况下，您必须使用允许检索其他包的类加载器的接口。然后你可以通过它的名字来加载这个类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T09:11:06.903

你可以：

1.  使对计算插件的依赖成为可选的。

2.  如果您事先知道包名称，请使用`Import-Package`而不是（同样，可能是可选的）。`Require-Bundle`

3.  使用[`DynamicImport-Package`](http://wiki.osgi.org/wiki/DynamicImport-Package)，但在大多数情况下应避免使用。

# c# - C# .NET 2.0 更改 Google Chrome 或 Firefox 设置

> ID：12958657
> 
> 赞同：0
> 
> 时间：2012-10-18T15:52:06.993
> 
> 标签：c#, json, firefox, google-chrome, .net-2.0

我正在尝试使用 c# 进行以下操作：

我想阅读 Chrome 或 Firefox 设置并编辑一些配置（例如搜索引擎、下载文件夹）。

问题是，我看不到如何在可循环的数据结构中解析来自 JSON 的设置，因此我可以遍历数组并更改我需要的设置，然后将其写回 JSON。

有人做过类似的事情并且可以帮助我吗？

这是我的程序中的代码片段以及我现在如何做：

```
 ch_path = "path to Chrome settings";
    if (File.Exists(ch_path))
        {
            try
            {
                string[] ch_string = File.ReadAllLines(ch_path);

                    foreach (string ch_line in ch_string)
                        {

                            if (ch_line.Contains("homepage"))
                            {
                                    temp = "{\"homepage\": \"" + page_adress + "\",";
                                    new_ch_File.Append(temp + "\r\n");
                            }
                        }
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T15:54:59.853

除非您的措辞有误，否则我有理由确定这将是一个巨大的安全问题。你将无法做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T15:07:00.027

作为具有提升权限的桌面应用程序的一部分，我也想这样做。这是按下载日期归档下载。Chrome/Chromium 将用户首选项保存在 JSON 序列化设置文件中。我没有看到任何 Chromium API。应用程序不关注 JSON 文件；退出时它会覆盖它。我如何让它重新读取文件或者我可以在 c#/.net 中使用的 API 在哪里。请参阅 1 月 1 日提出的问题。

# python - 使用 WebKitGTK+ 等待网站完全加载

> ID：12958660
> 
> 赞同：2
> 
> 时间：2012-10-18T15:52:12.720
> 
> 标签：python, webkit, python-2.7, webkitgtk

> **可能重复：**
> [Webkit GTK：确定文档何时完成加载](https://stackoverflow.com/questions/11728195/webkit-gtk-determine-when-a-document-is-finished-loading)

我想使用 WebKitGTK+ 获取网站的 HTML 内容以自动处理 javascript 重定向。

我正在使用以下 Python 代码：

```
def scanURL(domain, retries=3):
    status = 0
    loading = 0

    browser = webkit.WebView()
    browser.open('http://' + domain)
    while browser.get_load_status() < 2:
        continue

    if browser.get_load_status() == 4:
        if retries > 0:
            return scanURL(domain, retries - 1)
        return 'Failed'

    return 'Success' 
```

该网站加载正常，但是有一些特殊的网站正在重定向到重定向到其他地方的网页，我试图将`load-finished`事件连接到一个函数，它被调用了两次。

有没有办法知道 WebKit 何时完全加载了网页？

我如何知道 WebKit 是否仍在执行一些 JavaScript 代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T16:55:00.983

没有确定的方法可以为所有网站以编程方式完成该任务，因为有些页面使用 javascript 启动这些重定向，通常在 n 秒后由**setTimeout**启动，并且没有内置方法来扫描此类“怪癖” . 但是，如果您正在解析一组已知的网站，并且您肯定知道会发生此类重定向，您可以创建一个包含所需秒数的这些 url 列表，然后重定向将发生。触发初始 loadFinished 后，您可以启动 QTimer，将其信号连接到将再次触发 loadFinished 的函数，因此在您等待结果时肯定会开始下一个页面加载。等待页面结果，直到没有新的 loadStarted 信号被触发并且不需要再次进行重定向。

# ruby-on-rails - 语法错误，意外的keyword_ensure，期待keyword_end

> ID：12958664
> 
> 赞同：0
> 
> 时间：2012-10-18T15:52:21.550
> 
> 标签：ruby-on-rails, if-statement, haml

我目前有这个代码：

```
- if @ue.id = 1

  = form_tag("/about-us/upcoming-events/process", :id => "theoneform") do
    %table.cellone
      %input{ :type => "hidden", :value => "#{ @ue.title }", :name => "upcoming_event" }
      %input{ :type => "hidden", :value => "#{ @ue.campaign_id }", :name => "campaign_id"}
      %input{ :type => "hidden", :value => "#{ @ue.date }", :name => "event_date" }

      - "1,2,3,4,19,20,260, 263, 265,237,45".split(",").each do |ff3|
        = raw make_me_a_field(ff3, @form_info)

- else if @ue.id = 6

  = form_tag("/about-us/upcoming-events/process", :id => "theoneform") do
    %table.cellone
      %input{ :type => "hidden", :value => "#{ @ue.title }", :name => "upcoming_event" }
      %input{ :type => "hidden", :value => "#{ @ue.campaign_id }", :name => "campaign_id"}
      %input{ :type => "hidden", :value => "#{ @ue.date }", :name => "event_date" }

      - "1,2,3,4,19,20,260,237,45".split(",").each do |ff3|
        = raw make_me_a_field(ff3, @form_info) 
```

我收到了这个错误：

`syntax error, unexpected keyword_ensure, expecting keyword_end`

我认为这与缩进有关，但我看不出问题..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T16:40:49.663

对于 if 语句，您正在使用 '=' 进行赋值，我们应该使用 '==' 代替。

而且我认为您需要使用“elsif”而不是“else if”。

# php - 代码帮助，无限 php 菜单

> ID：12958667
> 
> 赞同：0
> 
> 时间：2012-10-18T15:52:34.640
> 
> 标签：php, menu, customization, multi-level

刚刚让这段代码适用于我的菜单的 2 个级别。但我希望它可以无限级别地工作。你们中有人知道从哪里开始吗？现在，如果我在数据库中输入更多级别，它会显示“未定义索引链接和标签行 29”，并且已输入的新父级不会显示。

```
$sql = "SELECT id, label, link_url, parent_id FROM dyn_menu ORDER BY parent_id, id ASC";
$items = mysql_query($sql);
while ($obj = mysql_fetch_object($items)) {
    if ($obj->parent_id == 0) {
        $parent_menu[$obj->id]['label'] = $obj->label;
        $parent_menu[$obj->id]['link'] = $obj->link_url;
    } else {
        $sub_menu[$obj->id]['parent'] = $obj->parent_id;
        $sub_menu[$obj->id]['label'] = $obj->label;
        $sub_menu[$obj->id]['link'] = $obj->link_url;
        if (!isset($parent_menu[$obj->parent_id]['count'])) {
            $parent_menu[$obj->parent_id]['count'] = 0;
        }
        $parent_menu[$obj->parent_id]['count']++;
    }
}
mysql_free_result($items);

function dyn_menu($parent_array, $sub_array, $qs_val = "menu", $main_id = "nav", $sub_id = "subnav", $extra_style = "foldout") {
    $menu = "<ul id=\"".$main_id."\">\n";
    foreach ($parent_array as $pkey => $pval) {
        if (!empty($pval['count'])) {
            $menu .= "  <li><a class=\"".$extra_style."\" href=\"".$pval['link']."?".$qs_val."=".$pkey."\">".$pval['label']."</a></li>\n";
        } else {
            $menu .= "  <li><a href=\"".$pval['link']."\">".$pval['label']."</a></li>\n";
        }
        if (!empty($_REQUEST[$qs_val])) {
            $menu .= "<ul id=\"".$sub_id."\">\n";
            foreach ($sub_array as $sval) {
                if ($pkey == $_REQUEST[$qs_val] && $pkey == $sval['parent']) {
                    $menu .= "<li><a href=\"".rebuild_link($sval['link'], $qs_val, $sval['parent'])."\" target=\"_blank\">".$sval['label']."</a></li>\n";
                }
            }
            $menu .= "</ul>\n";
        }
    }

    $menu .= "</ul>\n";
    return $menu;
}

function rebuild_link($link, $parent_var, $parent_val) {
    $link_parts = explode("?", $link);
    $base_var = "?".$parent_var."=".$parent_val;
    if (!empty($link_parts[1])) {
        $link_parts[1] = str_replace("&amp;", "##", $link_parts[1]);
        $parts = explode("##", $link_parts[1]);
        $newParts = array();
        foreach ($parts as $val) {
            $val_parts = explode("=", $val);
            if ($val_parts[0] != $parent_var) {
                array_push($newParts, $val);
            }
        }
        if (count($newParts) != 0) {
            $qs = "&amp;".implode("&amp;", $newParts);
        }
        return $link_parts[0].$base_var.$qs;
    } else {
        return $link_parts[0].$base_var;
    }
}

echo dyn_menu($parent_menu, $sub_menu, "menu", "nav", "subnav"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T16:04:56.940

为此，您需要使用递归函数来处理您的数组 -> 列表转换。

这是一个例子：

```
<?php
function arrToUl($arr) {
    $out = '<ul>';
    foreach($arr as $key=>$val) {
        $out .= '<li>';
        $out .= is_array($val) ? arrToUl($val) : $val;
        $out .= '</li>';
    }
    return $out . '</ul>';
}

$arr = array('firstval','secondval',array('firstval2','secondval2',array('firstval3','secondval3',array('firstval4','secondval4',array('firstval5','secondval5')))));
echo arrToUl($arr); 
```

在[jsfiddle](http://jsfiddle.net/FTHQd/)中输出。

# excel - 使用 VBA Excel 在两个不同的单元格中添加/减去日期更改

> ID：12958668
> 
> 赞同：1
> 
> 时间：2012-10-18T15:52:41.957
> 
> 标签：excel, vba

如何创建一个宏，将在一个单元格中添加一天并同时在另一个单元格中减去一天？这是我到目前为止所拥有的。

```
Sub ChangeDates()

Dim cell As Range

For Each cell In Range("B:B")
    cell.Value = cell.Value + 1
Next cell

For Each cell In Range("C:C")

    cell.Value = cell.Value - 1

End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T16:36:13.530

我知道您已经接受了答案，但我想提供这种方法，它比遍历所有这些单元格更快、更有效。

如果您的日期在 A 列中，则 B 列将保留`date +1`，C 列将保留`date -1`

```
Option Explicit
Sub ChangeDates()

Dim myRange As range
Dim mySheet As Worksheet

Set mySheet = Sheets("Sheet7") 'change to your sheet

With mySheet

    Set myRange = .range("A1:A" & .range("A" & .Rows.Count).End(xlUp).Row)

    myRange.Offset(, 1).FormulaR1C1 = "=RC[-1]+1"
    myRange.Offset(, 2).FormulaR1C1 = "=RC[-2]-1"

End With

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T16:09:59.983

抵消救援！

```
Sub ChangeDates()  
Dim cell As Range  
   For Each cell In Range("B:B")     
      cell.Value = cell.Value + 1
      cell.offset(0,1).value = cell.offset(0,1).value - 1
   Next cell  
End Sub 
```

您可能会考虑的另一件事是查看 usedrange 以不必遍历所有 B 列或进行检查以确保单元格不为空白...只是更快，更好的编码并阻止您在哪里有错误的值单元格最初是空白的...

```
Sub ChangeDates()
Dim cell As Range
   For Each cell In Intersect(Range("B:B"), ActiveSheet.UsedRange)
      cell.Value = cell.Value + 1
      cell.Offset(0, 1).Value = cell.Offset(0, 1).Value - 1
   Next cell
End Sub 
```

# java - 使用带有 pylucene 2.9.4 的自定义收集器

> ID：12958669
> 
> 赞同：1
> 
> 时间：2012-10-18T15:52:42.597
> 
> 标签：java, python, lucene, nlp, pylucene

我正在尝试计算 pylucene 中特定令牌的高 PMI 项。一位同事给了我一些有效的 Java 代码，但我无法将其转换为 Python。特别是，代码依赖于自定义收集器。这是初始查询代码：

```
def __init__(self, some_token, searcher, analyzer):
    super(PMICalculator, self).__init__()

    self.searcher = searcher
    self.analyzer = analyzer
    self.escaped_token = QueryParser.escape(some_token)
    self.query = QueryParser("text",self.analyzer).parse(self.escaped_token)
    self.term_count_collector = TermCountCollector(searcher)
    self.searcher.search(self.query, self.term_count_collector)
    self.terms = self.term_count_collector.getTerms() 
```

这是术语计数收集器类：[http ://snipt.org/vgGi8](http://snipt.org/vgGi8)

`self.searcher.search`此代码因错误而中断：

```
File <filename>, line 26, in __init__
    self.searcher.search(self.query, self.term_count_collector)
lucene.JavaError: org.apache.jcc.PythonException: collect() takes exactly 2 arguments (3    given)
TypeError: collect() takes exactly 2 arguments (3 given)

    Java stacktrace:
org.apache.jcc.PythonException: collect() takes exactly 2 arguments (3 given)
TypeError: collect() takes exactly 2 arguments (3 given)

    at org.apache.pylucene.search.PythonHitCollector.collect(Native Method)
    at org.apache.lucene.search.HitCollectorWrapper.collect(HitCollectorWrapper.java:46)
    at org.apache.lucene.search.TermScorer.score(TermScorer.java:86)
    at org.apache.lucene.search.TermScorer.score(TermScorer.java:74)
    at org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:252)
    at org.apache.lucene.search.Searcher.search(Searcher.java:110) 
```

我做了一些谷歌搜索，但无济于事 - 我是 lucene 的新手，无法判断这是否只是 2.9.4 不支持的功能，或者它是否是 pylucene 问题，或者我的代码是否错误。请帮忙！

# actionscript - ActionScript：Tweener 可以向上而不是向下缩放吗？

> ID：12958670
> 
> 赞同：0
> 
> 时间：2012-10-18T15:52:43.720
> 
> 标签：actionscript, scale, tweener

我从[这里使用 ActionScript Tweener](http://code.google.com/p/tweener/)

我的一张图像上有一个缩放动画，但我似乎无法让它向上而不是向下缩放（放大）

```
Tweener.addTween(myImage,
{
  scaleX: 1.5;
  scaleY: 1.5;
  transition: "linear";
} 
```

我尝试修改保存图像的 flex 组件，但动画似乎忽略了图像容器的尺寸。有什么方法可以使用 Tweener 但没有任何其他外部组件来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T17:26:54.603

知道了。将容器更改为 HGroup 并将 VerticalAlign 设置为 center

```
<s:HGroup verticalAlign="bottom">
  <s:Graphic mouseOver="enlargeImg(event)" mouseOut="shrinkImg(event)" ../>
  <s:Graphic ../>
</s:HGroup> 
```

# google-analytics - 谷歌分析 - 跟踪虚假网页浏览

> ID：12958672
> 
> 赞同：0
> 
> 时间：2012-10-18T15:52:55.860
> 
> 标签：google-analytics

我已经尝试了一段时间，但我似乎无法让它工作。我只是想知道如何在谷歌分析中跟踪虚假网页浏览，我有一个指向外部网站的链接，我想在用户点击它时将其跟踪到虚假页面。这是我的代码

```
<script type="text/javascript">
function track(someurl){
_gaq.push(['trackPageview', someurl]);
   }
 </script>

 <a onclick="track('/financeclick.html');" target="_blank" href="http://www.external-link.net/"><img width="75px" class="right left-marg" src="<?php echo get_template_directory_uri(); ?>/images/financing2.png" /></a> 
```

任何人都可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T14:26:29.417

`<a onclick="recordOutboundLink(link);" href="#">link</a>`

```
<script type="text/javascript">
function recordOutboundLink(link) {
try {
_gaq.push(['_trackPageview', link]);
setTimeout('document.location = "' + link.href + '"', 100)
}catch(err){}
}
</script> 
```

顺便说一句，您应该使用 trackEvent 而不是综合浏览量

# c# - EF 投影中的计算

> ID：12958673
> 
> 赞同：0
> 
> 时间：2012-10-18T15:53:00.070
> 
> 标签：c#, sql-server, entity-framework, lambda, projection

有没有办法可以实现以下目标？

```
// colourInfo.Discount = 75, but can change
// allPrice type has Part, Desc, Type

var a = allPricesForPgs.Where(x => x.PG == c && x.ColourCode == colourInfo.ColourCode).Select(y=> new AllPrice {Part=y.Part, Desc=y.Desc, Price=y.Price*(colourInfo.Discount/100)})); 
```

我收到错误消息：**无法在 LINQ to Entities 查询中构造实体或复杂类型“Portal.AllPrice”。**

似乎 EF 无法处理计算，我有什么选择，因为我从一个表中获取动态值来对另一个表进行计算？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T16:15:13.983

Sam1 的评论是正确的。你不能投射到另一个实体。您拥有的其他选项可以是创建一个匿名类型，如下所示：

```
var a = allPricesForPgs
        .Where(x => x.PG == c && x.ColourCode == colourInfo.ColourCode)
        .Select(y=> new 
            {
                Part=y.Part, 
                Desc=y.Desc, 
                Price=y.Price*(colourInfo.Discount/100)
             }
         )); 
```

或者创建一个保存临时数据的类（例如 DTO）。

由于您似乎需要做的就是拥有这些信息来修改其他实体，因此您应该能够使用匿名类型来做到这一点。

编辑：

您可以在 .Select(...) 之前添加一个 '.ToList()'。您实际上是在使用 LINQ TO OBJECTS 而不是 LINQ TO ENTITIES，因此如果很多实体可能与 allPricesForPgs.Where(...) 语句匹配，您应该远离这种情况。

但是，如果您想要这些作为 AllPrice 的，为什么不将它们添加到 AllPrice 数据库中？您是否保留了来自 Entity Framework 的一些 AllPrice 的单独列表和来自该列表的一些 AllPrice 的单独列表？这可能会令人困惑并导致错误。

最后一个选择是扩展类。所有实体都被声明为 PARTIAL。您可以创建另一个类，例如：

```
partial class AllPrice
{
    Double DiscoutedPrice { get { Price * myDiscount/100; } } 
```

# android - Android EditText 带线

> ID：12958677
> 
> 赞同：0
> 
> 时间：2012-10-18T15:53:15.817
> 
> 标签：android

我正在寻找`EditText`在文本下方用一条线定义一个。

我已经定义了这段代码来实现这一点。虽然它符合其目的，但我想知道这是否是实现这一目标的最佳方式。

首先，我在一个名为的可绘制 XML 文件中定义了一个形状`text_item_layout.xml`

```
<shape xmlns:android="http://schemas.android.com/apk/res/android" 
        android:shape"line">
    <padding android:bottom="20dp" />
    <stroke android:width="match_parent" android:color="@color/my_color"/>
</shape> 
```

然后，我定义`edit_text_style`了样式`EditText`：

```
<style name="my_edit_text" parent="@android:style/TextAppearance">
    <item name="android:layout_width">fill_parent</item>
    <item name="android:layout_height">wrap_content</item>
    <item name="android:textColor">#00FF00</item>
    <item name="android:texdtSize">10dp</item>
    <item name="android:background">@drawable/text_item_layout</item>
</style> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T12:40:37.763

尝试

yourEditText.setPaintFlags(yourEditText.getPaintFlags() | Paint.UNDERLINE_TEXT_FLAG);

# haskell - 使用 liftIO 部分提升

> ID：12958686
> 
> 赞同：4
> 
> 时间：2012-10-18T15:53:49.447
> 
> 标签：haskell

我正在尝试做一些可能不可能的事情。我有一个类型是`MonadIO`. 如果您在这种类型是某些转换器堆栈的基本单子的上下文中`liftIO`执行`IO`操作，它将正常工作。所以，我希望能够做的是取一个已经被部分提升（对我的类型）的值，并在一步中提升它的“其余部分”。

我可以通过两种方式做到这一点。一个是我的类型实际上可以很容易地重新嵌入到普通 IO 中，所以我可以这样做：

```
liftMore :: (MonadIO m) => MyType a -> m a
liftMore x = liftIO $ embedMyTypeInIO x 
```

这有效。`IO`但是，如果在仅是基本 monad的上下文中使用，这也提供了一种完全脱离我的类型的方法，这是不可取的。

我也可以通过构建一个`MonadIO`使用我的类型作为基础的新类型类来做到这一点，但是它需要为所有东西实例化，这是非常不可取的。我尝试使用 newtype 包装器使每个 monad 转换器成为此类的实例，但无法完全理解。

关于我可以尝试实现此目标的策略的任何想法？（我愿意使用语言扩展，但当然更可取的是 Haskell98 的解决方案）。

# r - 在 R 中安装 texreg 包

> ID：12958689
> 
> 赞同：0
> 
> 时间：2012-10-18T15:53:56.280
> 
> 标签：r, package, texreg

我尝试`texreg`在 R 中安装软件包，但出现以下错误：

```
> install.packages("texreg", "~/R/x86_64-unknown-linux-gnu-library/2.13/")
--- Please select a CRAN mirror for use in this session ---
Loading Tcl/Tk interface ... done
trying URL 'http://cran.wustl.edu/src/contrib/texreg_1.06.tar.gz'
Content type 'application/x-gzip' length 204278 bytes (199 Kb)
opened URL
==================================================
downloaded 199 Kb
installing *source* package ‘texreg’ ...
** R
** inst
** preparing package for lazy loading
Error in is(signature, "list") : could not find function "className"
Error : unable to load R code in package 'texreg'
ERROR: lazy loading failed for package ‘texreg’ 
```

这是我的 R 安装的问题吗？我正在运行 2.13，但很遗憾无法升级，因为我在集群上。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T16:05:34.443

`className`在 R-2.14.0 中引入。我建议尝试[以前版本的 texreg 之一](http://cran.r-project.org/src/contrib/Archive/texreg/)。

```
> db <- news()
> news(grepl("className",Text), db=db)
Changes in version 2.14.0:

BUG FIXES

    o   In principle, S4 classes from different packages could have the same
         name.  This has not previously worked.  Changes have now been
         installed that should allow such classes and permit methods to use
         them.  New functions className() and multipleClasses() are related
         tools for programming. 
```

# buildroot - 跳过部署阶段（生成根文件系统映像）

> ID：12958691
> 
> 赞同：0
> 
> 时间：2012-10-18T15:54:03.090
> 
> 标签：buildroot

是否可以执行 buildroot 并让它跳过部署阶段？

在 LTIB 中，您只需添加 --no-deploy。

这是构建过程中最昂贵的一步，100 次中有 99 次，我对最终图像不感兴趣，因为我在开发过程中使用 NFS 挂载目标目录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T10:13:44.603

您可以从 .config 中删除所有 BR2_TARGET_ROOTFS_FOO 变量

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T23:08:38.093

如果您正在执行 NFS 挂载，那么您*必须*至少创建一个 tarball 映像。用作`output/target`您的 NFS 挂载点是完全不正确的：权限/所有权不正确，并且设备文件不存在于`output/target`. 只有 Buildroot 生成的图像才是正确的。

我们今天甚至提交了 Buildroot 更改，强烈警告用户不要将`output/target`其用作根文件系统：[http ://git.buildroot.net/buildroot/commit/?id=9226a9907c4eb0fffab777f50e88b74aa14d1737](http://git.buildroot.net/buildroot/commit/?id=9226a9907c4eb0fffab777f50e88b74aa14d1737)

# android - 逻辑上正确但“if 语句”的方法使我的应用程序崩溃

> ID：12958693
> 
> 赞同：1
> 
> 时间：2012-10-18T15:54:07.890
> 
> 标签：android, sqlite, android-asynctask

我的 MapActivity 中有一个 AsyncTask 类。在 doInBacground() 方法中，我必须使用代码块。

它看起来像这样：

```
 @Override
        protected List<GeoPoint> doInBackground(String... arg0) {

            // check if the query (word and the distance) existing queries and return its id 
            int checkQuery = db.getQueryMatch(arg0[3].toString() , arg0[2].toString());
            Log.v(" CheckQuery int ", " equal? " + checkQuery );

            if (checkQuery  < 1) 
            {
                Block 1
            }
            else
            { 
                 Block 2
            } 
```

getQueryMatch 方法将检查是否存在两个文本字段，然后返回记录 ID。

```
int getQueryMatch(String word, String meter) {
    SQLiteDatabase db = this.getReadableDatabase();
    int getidd = 0; 
    Cursor cursor = db.query(TABLE_HISTORY, new String[] { KEY_ID, QUERYWORD, DISTANCEQ, KEY_TIMESTAMP }, QUERYWORD + "=? AND " + DISTANCEQ + "=?", new String[] { word, meter  }, null, null, null, null);
    //String selectQuery = "SELECT *  FROM " + TABLE_HISTORY + " WHERE " + QUERYWORD +  "= '" + word + "' AND " + DISTANCEQ + "= '"+ meter +"'"   ;
    if (cursor != null)
        cursor.moveToFirst();
    getidd = Integer.parseInt(cursor.getString(0));

    db.close(); // Closing database connection

    // return History
    return getidd;
} 
```

当我在 AsyncTask 类中没有**if 语句**的情况下对其进行测试时，它工作得很好。如果返回值为 0，它会使应用程序崩溃。所以我要做的是，如果从数据库中找不到任何记录（由 getQueryMatch 检查），则运行块 1，否则运行块 2。

以下是错误：

```
10-19 02:47:50.464: E/AndroidRuntime(11967): FATAL EXCEPTION: AsyncTask #2
10-19 02:47:50.464: E/AndroidRuntime(11967): java.lang.RuntimeException: An error occured while executing doInBackground()
10-19 02:47:50.464: E/AndroidRuntime(11967):    at android.os.AsyncTask$3.done(AsyncTask.java:299)
10-19 02:47:50.464: E/AndroidRuntime(11967):    at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
10-19 02:47:50.464: E/AndroidRuntime(11967):    at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
10-19 02:47:50.464: E/AndroidRuntime(11967):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
10-19 02:47:50.464: E/AndroidRuntime(11967):    at java.util.concurrent.FutureTask.run(FutureTask.java:137)
10-19 02:47:50.464: E/AndroidRuntime(11967):    at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
10-19 02:47:50.464: E/AndroidRuntime(11967):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
10-19 02:47:50.464: E/AndroidRuntime(11967):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
10-19 02:47:50.464: E/AndroidRuntime(11967):    at java.lang.Thread.run(Thread.java:856)
10-19 02:47:50.464: E/AndroidRuntime(11967): Caused by: android.database.CursorIndexOutOfBoundsException: Index 0 requested, with a size of 0
10-19 02:47:50.464: E/AndroidRuntime(11967):    at android.database.AbstractCursor.checkPosition(AbstractCursor.java:418)
10-19 02:47:50.464: E/AndroidRuntime(11967):    at android.database.AbstractWindowedCursor.checkPosition(AbstractWindowedCursor.java:136)
10-19 02:47:50.464: E/AndroidRuntime(11967):    at android.database.AbstractWindowedCursor.getString(AbstractWindowedCursor.java:50)
10-19 02:47:50.464: E/AndroidRuntime(11967):    at com.example.phooogle.DatabaseHandler.getQueryMatch(DatabaseHandler.java:148)
10-19 02:47:50.464: E/AndroidRuntime(11967):    at com.example.phooogle.GoogleMapsAppActivity$InitTask.doInBackground(GoogleMapsAppActivity.java:142)
10-19 02:47:50.464: E/AndroidRuntime(11967):    at com.example.phooogle.GoogleMapsAppActivity$InitTask.doInBackground(GoogleMapsAppActivity.java:1)
10-19 02:47:50.464: E/AndroidRuntime(11967):    at android.os.AsyncTask$2.call(AsyncTask.java:287)
10-19 02:47:50.464: E/AndroidRuntime(11967):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305) 
```

对我来说，这在逻辑上是正确的，但不起作用！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T15:59:07.683

您需要检查 movetofirst 返回的值。如果光标为空，则返回 false

```
 boolean notEmpty = cursor.moveToFirst();
   if(notEmpty)
        getidd = Integer.parseInt(cursor.getString(0)); 
```

编辑：

```
getidd = -1;
 if (cursor != null){
   boolean notEmpty = cursor.moveToFirst();
   if(notEmpty)
        getidd = Integer.parseInt(cursor.getString(0));    
}
 db.close(); // Closing database connection
// return History
return getidd; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T16:02:54.803

显然，`cursor.getString(0)`失败是因为没有任何数据。

您还必须检查 的返回值`cursor.moveToFirst()`。

# vb.net - Microsoft.Xrm.Sdk.AttributeLogicalNameAttribute 未定义？

> ID：12958694
> 
> 赞同：0
> 
> 时间：2012-10-18T15:54:09.570
> 
> 标签：vb.net, sdk, dynamics-crm, dynamics-crm-2011

我正在尝试创建一个类似于 Dynamics CRM 2011 的 SDK 项目 basicoperations 的新项目。我正在使用 SDK 帮助程序代码中包含的 myorganizationcrmsdktypes.vb 文件，但是当我尝试构建代码时，我在 myorganizationcrmsdktypes 中遇到大量错误.vb 我不知道为什么。错误如下所示：

```
Type 'Microsoft.Xrm.Sdk.AttributeLogicalNameAttribute' is not defined. 
```

代码在原始项目中运行时运行良好，只是在我的项目中不行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T20:15:09.050

添加对：Microsoft.Xrm.Sdk (/sdk/bin/microsoft.xrm.sdk.dll) 的引用

还要添加另一个引用：System.Runtime.Serialization

此外，在您的项目设置中 - 尝试清除 Root 命名空间

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T12:56:01.980

您是否在另一台机器上尝试过您的代码？这与其说是 CRM 问题，不如说是 .net 问题。如果您的 vb 项目有对`Microsoft.Xrm.Sdk`dll 的引用，但您的代码在其中找不到类，我几乎想知道是否有东西损坏了。

我会尝试重新创建解决方案/项目。我也会尝试做一个`ctrl-.`（控制期）来看看VS是否可以为你解决它......

# ruby-on-rails-3 - Rails 3 has_many order_by 和 group_by 没有按预期工作

> ID：12958696
> 
> 赞同：1
> 
> 时间：2012-10-18T15:54:10.783
> 
> 标签：ruby-on-rails-3, activerecord, group-by, sql-order-by

我的`Group`模型中有以下关联：

```
has_many :subscriptions, :order => 'subscriptions.expiration_date DESC', :group => 'subscriptions.product_name', :conditions => ['subscriptions.status IN (?)', [:active, :canceled]] 
```

模型（用户、订阅、组）分解如下：

```
**User**
has_many :groups, :before_add => :validates_group, :through => :group_users, :conditions => ["groups_users.status = ?", 'active']
**Group**
has_many :users, :through => :group_users, :conditions => ['groups_users.status = ?', 'active']
has_many :subscriptions, :order => 'subscriptions.expiration_date DESC', :group => 'subscriptions.product_name', :conditions => ['subscriptions.status IN (?)', [:active, :canceled]]
**Subscription**
belongs_to :group 
```

因此，一个组可以有多个订阅（针对不同的产品；subscription.product_name）针对同一产品（取决于它们是续订还是只是系统中的旧产品）。`has_many :subscriptions`order_by 无法正常工作。

**例如：**
如果用户有 3 个订阅（一个用于产品 X，2 个用于产品 Y）。你运行以下命令

用户模型中的订阅方法：

```
 def subscriptions
    subs = []
    groups.collect(&:subscriptions).each do |sub|
      if sub
        subs << sub
      end
    end
    subs.flatten!
  end

u = User.last
u.subscriptions 
```

产品 X 的返回很好，但是当它拉回产品 Y 时，它会拉回列表中的第一个（过期日期在过去的那个）。

抱歉，如果这没有意义，我会尽力解释它。任何人都遇到过这种情况，即订单和组在关联中无法正常工作？

# c# - 在 HTML 或 JavaScript 中查找特定字符串

> ID：12958697
> 
> 赞同：1
> 
> 时间：2012-10-18T15:54:13.380
> 
> 标签：c#, webbrowser-control

我想获取一些我正在导航的 html 页面的文本 这是一个程序版本号

```
"(\d\.\d\.\d\.\d)" The regex code. 
```

我想在 webBrowser1_DocumentCompleted 中执行这个命令

像这样的东西

> 字符串 html = webBrowser1.Document.Body.InnerText;
> 
> ```
>  // scrape keywords
>             version = Regex.Match(html, @"""(\\d\\.\\d\\.\\d\\.\\d)""", 
> ```
> 
> RegexOptions.IgnoreCase).Groups[0].Value;

这似乎不起作用。（我要查找的文本不在正文或指定的任何位置，我只需要获取整个 html 代码并在那里找到它）

我可以确认这不起作用的是我获取 HTML 文本的方式，我需要替代方式，因为没有主体或任何东西我只需要整个网络浏览器文本并使用正则表达式（我认为正则表达式工作正常）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T16:16:48.290

表达式`@"(\d\.\d\.\d\.\d)"`应该匹配并捕获整个版本号，无论它在 HTML 中的什么位置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T16:10:45.630

此 RegEx`\d\.?`将匹配此 HTML 中的版本号：

```
<html>
<body>
    <span>3.4.2.6</span>
</body>
</html> 
```

请记住，返回了四个匹配项，因此在使用它时，您需要获取整个匹配项而不是单个组。

所以，你可以这样使用它：

```
var version = RegEx.Match(html, @"\d\.?").Value; 
```

另一个更具体的可能正则表达式也是`((\d\.){3}\d{1})`. 此 RegEx 将在以下字符串中两次捕获特定版本号，HTML 或 JavaScript，没关系。但它会忽略`3.4.2`.

```
<html> 
<body> 
    <span>3.4.2.6</span> 
    3.4.2
</body> 
</html> 

function(){
    var test = "something";
    var version = "3.4.2.6"
} 
```

要检索当前控件所在网页的文本，请`WebBrowser`尝试在`DocumentCompleted`事件处理程序中使用以下代码：

```
var html = webBrowser1.DocumentText; 
```

# python - Tastypie：如何在没有数据库的情况下填充资源？

> ID：12958702
> 
> 赞同：6
> 
> 时间：2012-10-18T15:54:21.210
> 
> 标签：python, django, foursquare, tastypie

我想从 Foursquare 获取一些信息，添加一些字段并通过 django-tastypie 返回。更新：

```
def obj_get_list(self, request=None, **kwargs):
    near = ''
    if 'near' in request.GET and request.GET['near']:
        near = request.GET['near']
    if 'q' in request.GET and request.GET['q']:
        q = request.GET['q']

    client = foursquare.Foursquare(client_id=settings.FSQ_CLIENT_ID, client_secret=settings.FSQ_CLIENT_SECRET)

    a = client.venues.search(params={'query': q, 'near' : near, 'categoryId' : '4d4b7105d754a06374d81259' })

    objects = []

    for venue in a['venues']:
        bundle = self.build_bundle(obj=venue, request=request)
        bundle = self.full_dehydrate(bundle)
        objects.append(bundle)

    return objects 
```

现在我得到：

```
{
  "meta": {
    "limit": 20,
    "next": "/api/v1/venue/?q=Borek&near=Kadikoy",
    "offset": 0,
    "previous": null,
    "total_count": 30
  },
  "objects": [
    {
      "resource_uri": ""
    },
    {
      "resource_uri": ""
    }]
} 
```

有 2 个空对象。我应该怎么做才能填补这个资源？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-18T16:31:08.553

`ModelResource`仅当您在资源后面有 ORM 模型时才适用。在其他情况下，您应该使用`Resource`.

这个主题在`ModelResource`描述中讨论，提到什么时候合适，什么时候不合适：[http ://django-tastypie.readthedocs.org/en/latest/resources.html#why-resource-vs-modelresource](http://django-tastypie.readthedocs.org/en/latest/resources.html#why-resource-vs-modelresource)

文档中还有一整章，旨在提供有关如何实现非 ORM 数据源的详细信息（在本例中：外部 API）：[http ://django-tastypie.readthedocs.org/en/latest/non_orm_data_sources .html](http://django-tastypie.readthedocs.org/en/latest/non_orm_data_sources.html)

# flash - 如何在动作脚本中暂停加载框架

> ID：12958706
> 
> 赞同：2
> 
> 时间：2012-10-18T15:54:25.640
> 
> 标签：flash, actionscript, time-wait

我有一个游戏，其中一架飞机会发射子弹，当子弹击中敌舰时，会出现爆炸效果并加载另一个帧。现在我面临的问题是爆炸效果和下一帧一次加载。所以，我添加了这个脚本：

```
if (this.hitTest(_root["enemy1"])) {
    this.removeMovieClip();
    _root.enemy1._x=2000;
    _root.option1._x=2000;
    addExplosion(800, 200, explosionParticleAmount, explosionDistance, explosionSize, explosionAlpha);
    this._x=-900000;
    var sound:Sound = new Sound(this);
    sound.attachSound("explode");
    sound.start();
    flag = true;
    wait();
    checkAnswer(_root.option1.text);
}

function wait() {
  stop();
  var myInterval = setInterval(function () {
      play();
      clearInterval(myInterval);
  }, 5*1000); // stop for 5 seconds
}

function checkAnswer(answer){
  if(questions[level][1] == answer){  
     status_flag=true;
     score=score+10;
     bullet_fire=false;
     gotoAndStop(3);
  }else{
      bullet_fire=false;
     gotoAndStop("Scene 2",1);
  }
} 
```

但结果还是一样。我也尝试增加时间，但我仍然无法阻止另一帧暂停。请帮帮我。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T16:26:27.837

我认为以下内容应该对您有用，尽管更强大的方法是暂停，直到您收到一个表明您的爆炸动画已完成的事件。当前方法的问题在于，如果您更改爆炸序列的长度，您还需要记住更新暂停的长度。

```
if (this.hitTest(_root["enemy1"])) {
    this.removeMovieClip();
    _root.enemy1._x=2000;
    _root.option1._x=2000;
    addExplosion(800, 200, explosionParticleAmount, explosionDistance, explosionSize, explosionAlpha);
    this._x=-900000;
    var sound:Sound = new Sound(this);
    sound.attachSound("explode");
    sound.start();
    flag = true;
    wait();
}

function wait() {
  stop();
  var myInterval = setInterval(function () {
      //play();
      checkAnswer(_root.option1.text); // check answer after explosion has finished
      clearInterval(myInterval);
  }, 5*1000); // stop for 5 seconds
}

function checkAnswer(answer){
  if(questions[level][1] == answer){  
     status_flag=true;
     score=score+10;
     bullet_fire=false;
     gotoAndStop(3);
  }else{
      bullet_fire=false;
     gotoAndStop("Scene 2",1);
  }
} 
```

# jquery - jQuery插件可以在不反转内容的情况下进行旋转/翻转动画？

> ID：12958707
> 
> 赞同：2
> 
> 时间：2012-10-18T15:54:33.100
> 
> 标签：jquery, rotation, jquery-animate, flip

我想要一个 jQuery 插件来帮助我`div`在 x 轴上的元素上进行翻转动画，同时保留背景图像并且不反转内容。我尝试了一些插件，但无法达到我想要的结果。如果有人可以提出解决方案，那就太好了。这是我到目前为止尝试过的，但没有成功：

[http://ricostacruz.com/jquery.transit/](http://ricostacruz.com/jquery.transit/) - 我可以使用rotateX，并且卡片内容在旋转时可见，但我不希望在旋转后反转内容。

[http://css3.bradshawenterprises.com/flip/](http://css3.bradshawenterprises.com/flip/) - 与上述插件相同的问题

[http://lab.smashup.it/flip/](http://lab.smashup.it/flip/) - 这个没有反转内容，这很棒，但是它在翻转时使用了纯色背景，而不是保留卡片的内容。

有没有人可以解决我遇到的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-28T16:31:07.367

为什么不嵌套 div，一个作为背景图片的容器，另一个作为内容的容器。

只需反转包含背景图像的 div

# installation - pub install -> HttpParserException：在收到完整标头之前连接已关闭

> ID：12958709
> 
> 赞同：2
> 
> 时间：2012-10-18T15:54:35.670
> 
> 标签：installation, dart, dart-pub

尝试安装具有一个依赖项的简单应用程序会产生错误

```
Pub install fail, Resolving dependencies...
Downloading html5lib 0.0.12 from hosted...
HttpParserException: Connection closed before full header was received 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-14T06:00:17.130

这听起来像是一个短暂的错误。如果它仍然发生，请在 dartbug.com/new 上打开一个错误，其中包含有关您的操作系统、Dart 版本和运行 pub --verbose 的详细信息。谢谢！

# ios6 - iOS 6 - 蓝牙 LE 断开连接

> ID：12958711
> 
> 赞同：8
> 
> 时间：2012-10-18T15:54:39.413
> 
> 标签：ios6, core-bluetooth, disconnect, bluetooth-lowenergy

好的，iOS6 到底是怎么回事，它如何处理蓝牙 LE 断开连接？之前设备会立即断开连接，但现在，出于某种奇怪的原因，设备等待断开连接大约 30-60 秒。我需要它来断开 ASAFP！

我一直在互联网上搜索，试图弄清楚如何立即断开与外围设备的连接，我发现[这封漂亮的电子邮件](http://lists.apple.com/archQives/bluetooth-dev/2012/Sep/msg00090.html)解释了一种解决方法是取消订阅有关服务特性的通知。

现在我想我正在这样做..当我想断开连接时，我会打电话`[connected_device setNotifyValue:NO forCharacteristic:connected_characteristic]`

然后，在 didUpdateNotificationStateForCharacteristic 函数中，我有......

```
if((int)characteristic.isNotifying == 0){
   [manager cancelPeripheralConnection:peripheral];
} 
```

在函数 didDisconnectPeripheral...

```
connected_peripheral = nil;
connected_characteristic = nil;
[connected_peripheral release];
[connected_characteristic release]; 
```

我还仔细研究了 Apple 的[CoreBluetooth 温度传感器](http://developer.apple.com/library/ios/#samplecode/TemperatureSensor/Introduction/Intro.html#//apple_ref/doc/uid/DTS40012194-Intro-DontLinkElementID_2)示例，但它并没有太大帮助....

对此的任何帮助都会很棒！我只是不知道我错过了什么......

更新：看起来应用程序需要连接到蓝牙设备至少一分钟才能允许断开连接。如果应用程序连接超过一分钟，它会在发送命令时立即断开连接。否则，它将等到那一分钟标记才真正断开连接。

更新：当我尝试在一分钟之前断开连接时，当设备实际断开连接时，我会在日志中获得以下输出。

```
Oct 24 16:49:35 Christophers-iPhone awdd[8168] <Error>: libMobileGestalt copySystemVersionDictionaryValue: Could not lookup ReleaseType from system version dictionary
Oct 24 16:49:35 Christophers-iPhone awdd[8168] <Error>: CoreLocation: CLClient is deprecated. Will be obsolete soon. 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-25T15:27:26.777

根据苹果的说法，这个新功能是“设计的”。我们解决此问题的方法是向外围设备发送命令并使其与末端断开连接。如果你这样做，那么断开是立即的。我不知道为什么 Apple 将这种行为从 iOS5 更改为 iOS6，但他们一定有他们的理由。当然，此解决方案仅在您可以访问外围固件并且可以更改它的情况下才有效。如果有不同的解决方案，那么我们还没有找到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T16:30:19.813

这是 iOS 6.0 中的错误，在 6.1 中已修复。

# javascript - 内存不足使用 Node.js 优化与 mongodb 数据库的路由配对

> ID：12958712
> 
> 赞同：3
> 
> 时间：2012-10-18T15:54:44.267
> 
> 标签：javascript, algorithm, node.js, optimization

我已经尝试破解这个好几天了，任何帮助都将**不胜**感激。基本上我试图遍历这个目的地配对数组，看看是否可以通过重新计算每个“倒置”配对的里程来改善总距离。如果倒置对的总里程比原来的要好，我用它们的倒置版本替换原来的对。

我发现的问题是我要么内存不足，要么让这个进程继续运行，或者结果没有按照我期望的方式优化（我获得了里程）。

我很感激，我在这里有点粗略，但我不确定我哪里出错了。把它变成一个建设性的问题：任何人都可以帮助在 JavaScript 中创建一个函数/算法，它可以遍历一组配对并对其进行优化吗？...请？

```
var firstResult = [{"from":"DE55 7RA","to":"DE55 4XJ","oNum":"3740003654","dNum":"3650645273","metres":"536"},{"from":"WF2 0XF","to":"WF2 0XE","oNum":"3740003632","dNum":"3650645256","metres":"304"},{"from":"WF9 2RH","to":"WF9 3AP","oNum":"3740003657","dNum":"3650645279","metres":"4132"},{"from":"LS10 1BG","to":"LS9 8HY","oNum":"3740003637","dNum":"3650645266","metres":"2941"},{"from":"WF10 5UA","to":"WF8 4QD","oNum":"3740003646","dNum":13,"metres":"7248"},{"from":"HD2 1UA","to":"WF15 6JL","oNum":"3740003641","dNum":"3650645270","metres":"6745"},{"from":"HU14 3HJ","to":"HU15 2PE","oNum":"3740003640","dNum":"3650645259","metres":"13309"},{"from":"WF2 0XF","to":"WF5 8NE","oNum":"3740003631","dNum":"3650645262","metres":"9862"},{"from":"WF9 2XX","to":"WF8 4QD","oNum":"3740003656","dNum":83,"metres":"13705"},{"from":"WF9 2XX","to":"WF8 4QD","oNum":"3740003647","dNum":67,"metres":"13705"},{"from":"WF9 2XR","to":"WF8 4QD","oNum":"3740003636","dNum":59,"metres":"13545"},{"from":"DN14 6XL","to":"DN14 0SB","oNum":"3740003642","dNum":"3650645268","metres":"20763"},{"from":"NG16 4HY","to":"NG15 0DR","oNum":"3740003635","dNum":"3650645258","metres":"13165"},{"from":"DN6 7FB","to":"S73 0UN","oNum":"3740003639","dNum":"3650645255","metres":"18835"},{"from":"LS25 6JH","to":"WF6 1GX","oNum":"3740003652","dNum":"3650645253","metres":"22861"},{"from":"DN3 3FF","to":"DN9 1LB","oNum":"3740003660","dNum":"3650645264","metres":"21343"},{"from":"DN6 7FB","to":"S71 3HQ","oNum":"3740003638","dNum":"3650645278","metres":"19268"},{"from":"S43 4UX","to":"S6 1LY","oNum":"3740003633","dNum":"3650645276","metres":"30365"},{"from":"S43 4UX","to":"S6 1LY","oNum":"3740003651","dNum":"3650645275","metres":"30365"},{"from":"DN14 6XL","to":"HU3 4UW","oNum":"3740003667","dNum":"3650645277","metres":"41502"},{"from":"LS25 6JH","to":"LS7 1PZ","oNum":"3740003653","dNum":"3650645274","metres":"25194"},{"from":"LS25 6JH","to":"BD4 0SG","oNum":"3740003658","dNum":"3650645269","metres":"43788"},{"from":"DN14 6XL","to":"HU7 0XS","oNum":"3740003648","dNum":"3650645265","metres":"49066"},{"from":"NG90 1BS","to":"DE6 1EX","oNum":"3740003643","dNum":"3650645261","metres":"44283"},{"from":"S80 3YY","to":"HD6 1LJ","oNum":"3740003665","dNum":"3650645260","metres":"80026"},{"from":"S80 2RZ","to":"BD8 9HQ","oNum":"3740003634","dNum":"3650645263","metres":"95649"},{"from":"NG90 1BS","to":"HU7 0YW","oNum":"3740003650","dNum":"3650645272","metres":"156190"},{"from":"NG90 1BS","to":"HU12 8TB","oNum":"3740003644","dNum":"3650645267","metres":"160285"},{"from":"NG90 1BS","to":"YO17 6YA","oNum":"3740003645","dNum":"3650645257","metres":"172388"},{"from":"NG90 1BS","to":"YO17 9HG","oNum":"3740003649","dNum":"3650645271","metres":"176868"}],
    fs = require('fs'),
    _ = require('underscore'),
    mongoose = require('mongoose'),
    Schema = mongoose.Schema,
    logPostals = fs.createWriteStream('postals.txt', {'flags' : 'w'}),
    db = mongoose.connect('mongodb://localhost/legs');

var Leg = new Schema({
      from: {
        type: String,
        validate: /^([A-PR-UWYZ0-9][A-HK-Y0-9][AEHMNPRTVXY0-9]?[ABEHMNPRVWXY0-9]? {1,2}[0-9][ABD-HJLN-UW-Z]{2}|GIR 0AA)$/i,
        trim: true
      },
      to: {
        type: String,
        validate: /^([A-PR-UWYZ0-9][A-HK-Y0-9][AEHMNPRTVXY0-9]?[ABEHMNPRVWXY0-9]? {1,2}[0-9][ABD-HJLN-UW-Z]{2}|GIR 0AA)$/i,
        trim: true
      },

      time: Number,
      distance: Number
    })

var legModel = mongoose.model('Leg', Leg);

var legIndex = 0, armIndex= 0 , inverted = 0, original = 0;
var goCompare = function(){
   _.each(firstResult , function(leg){
     _.each(firstResult , function(arm){
      if(leg.from !== arm.from){
              legModel.find({
              from: leg.from,
              to: arm.to
            }, function(err, data) {      
              if (data.length > 0) {
                legModel.find({
                  from: arm.from,
                  to : leg.to
                },function(e,d){
                   inverted = data[0].distance +  d[0].distance;
                   original = (leg.metres*1) + (arm.metres*1) ;
                   if( original  >  inverted ){
                   legIndex = firstResult.indexOf(leg);
                   armIndex = firstResult.indexOf(arm);

                  firstResult[legIndex] ={
                    from : leg.from,
                    to : arm.to,
                    metres : data[0].distance,
                    oNum : leg.oNum,
                    dNum : arm.dNum
                   };
                   firstResult[armIndex] = {
                    from : arm.from,
                    to : leg.to,
                    metres : d[0].distance,
                    oNum : arm.oNum,
                    dNum : leg.dNum
                   };

                   _.each(firstResult , function( item ){
                      logPostals.write(item.from +'\t'+ item.to +'\t'+item.metres +'\r\n')
                   })

                  goCompare();
                 }else{

                 }//end of if distance comparison
                })//end of function callback from search
              }//end of if data...
            }//end of err...data
        )//end of find
      }
    })
  })
}//end of go compare###############
goCompare(); 
```

# binary - 缩小硬件和软件之间的差距

> ID：12958713
> 
> 赞同：1
> 
> 时间：2012-10-18T15:54:46.507
> 
> 标签：binary, hardware

所以，我在我的一天做了一些编程。Java、C#、C++，而且我一直对计算机很着迷。我真正想学习的一件事，而且我认为真正有助于我的编程技能的是软件如何告诉硬件该做什么。

我知道这是一项艰巨的任务：我知道每种语言都不同；每个操作系统。我不是在要求一个实际的答案，就像我在要求一个起点一样。此外，如果这实际上是在浪费时间，例如，如果它不会真正帮助我的编程和/或不值得，因为它需要学习大量的东西，而且它需要数年才能真正支付关闭，说这也会有帮助。

我无法摆脱我在问一个愚蠢的问题的感觉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T08:02:20.917

Have you thought of hardware design? Either studying it by reading up, or by actually designing your own hardware. You could buy yourself a Raspberry PI, or Arduino, or something else if you don't want to get your hands dirty. Use any of these options to get your hands on hardware, or even use something like Vbox and write your own operating system.

Some random thoughts to consider. And, no your question isn't a stupid one at all.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-21T19:26:29.240

我们通常所说的硬件可以被认为是根据某些特定规则运行的（大量）电气设备。通过在输入中放置一些电子，输出将在遵循固定规则后发生变化（类似设备的行为相同）。最著名的器件是晶体管。晶体管可以以执行逻辑功能的方式连接，最常用的是 NAND（非与）。使用 NAND 门可以（并且是）实现任何类型的逻辑。总而言之，硬件通过移动电子来执行逻辑功能。

现在是有趣的问题。什么是软件？人们倾向于认为，因为编写软件涉及思想，所以它不存在于现实世界中。这不是真的。该程序在您编写时存储在 RAM* 中，实际上是一种电子模式。现在这个模式经历了一些转换（编译器，汇编器），在这些步骤中，模式从对人类有意义的东西变成了可以用作上面逻辑函数的输入的东西。

切线：RS触发器是一个有趣的设备。它使用两个 NAND 块来创建一个存储单元。

# powershell - Powershell - 某些命令无法使用 Invoke-Command 运行

> ID：12958714
> 
> 赞同：3
> 
> 时间：2012-10-18T15:54:50.710
> 
> 标签：powershell

我正在尝试将一些命令从服务器发送到大约 50 个运行 Powershell 的客户端。大多数命令使用 Invoke-Command 工作。我使用了与其他命令完全相同的格式，但这个格式不起作用。基本上我想让每个客户端从我的服务器获取一个 .xml 文件，以便稍后导入。我在这里的代码示例中缺少 $credentials 和其他变量，但它们在我的脚本中的其他位置正确设置。

权限方面，winrm 中的 TrustedHosts 设置为 *，脚本执行设置为 Unrestricted。

```
 clear
    $temp = RetrieveStatus

    $results = $temp.up  #Contains pinged hosts that successfully replied.

    $profileName = Read-Host "Enter the profile name(XML file must be present in c:\share\profiles\)"
    $File = "c:\profiles\profile.xml"
    $webclient = New-Object System.Net.WebClient
    $webclient.Proxy = $NULL
    $ftp = "ftp://anonymous:anonymous@192.168.2.200/profiles/$profileName"
    $uri = New-Object System.Uri($ftp)
    $command = {write-host (hostname) $webclient.DownloadFile($uri, $File)}

    foreach($result in $results)
        {           
    # download profile from C:\share\profiles
    Invoke-Command $result.address -ScriptBlock $command -Credential $credentials
    # add profile to wireless networks
    # Invoke-Command $result.address -ScriptBlock {write-host (hostname) (netsh wlan add profile filename="c:\profiles\$args[0].xml")} -argumentlist $profileName -Credential $credentials
        } 
```

我收到以下错误：

```
You cannot call a method on a null-valued expression.
+ CategoryInfo          : InvalidOperation: (DownloadFile:String) [], RuntimeException
+ FullyQualifiedErrorId : InvokeMethodOnNull 
```

任何想法？在本地运行时，相同的命令可以在客户端上完美运行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T16:55:50.400

您在另一端不会定义`$webclient`的脚本块中使用。`$webclient`为什么不在脚本块中创建 Web 客户端，例如：

```
$command = {
    param($profileName)
    $File = "c:\profiles\profile.xml"
    $webclient = New-Object System.Net.WebClient
    $webclient.Proxy = $NULL
    $ftp = "ftp://anonymous:anonymous@192.168.2.200/profiles/$profileName"
    $uri = New-Object System.Uri($ftp)
    Write-Host (hostname)
    $webclient.DownloadFile($uri, $File)}
}

$profileName = Read-Host "Enter the profile name(XML file must be present in c:\share\profiles\)"

Invoke-Command $result.address -ScriptBlock $command -Credential $credentials -Arg $profileName 
```

这将要求您通过`-ArgumentList`参数 on将一些变量从客户端提供给远程机器`Invoke-Command`。这些提供的参数然后映射到脚本块中的`param()`语句。

# facebook - IOS 6 中的 SLRequest

> ID：12958723
> 
> 赞同：4
> 
> 时间：2012-10-18T15:55:09.600
> 
> 标签：facebook, ios6

如何使用**SLRequest将****UIImage**附加到 Facebook 上的帖子。这是我的代码：

 **```
SLRequest *facebookRequest = [SLRequest requestForServiceType:SLServiceTypeFacebook
                                                                 requestMethod:SLRequestMethodPOST
                                                                      URL:[NSURL   URLWithString:@"https://graph.facebook.com/me/feed"]
                                                               parameters:[NSDictionary dictionaryWithObject:post forKey:@"message"]]; 
```

我知道有必要在参数中指定图片，但我不知道如何制作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-20T14:01:38.683

将图像添加为多数据并命名为“图片”。

```
UIImage *myImage = [UIImage imageNamed:@"test.png"];
NSData *myImageData = UIImagePNGRepresentation(myImage);
[facebookRequest addMultipartData:myImageData withName:@"picture" type:@"image/png" filename:nil]; 
```**

# asp.net-mvc - 带有 Unity 的 MVC 4 的 ModelFactory

> ID：12958724
> 
> 赞同：2
> 
> 时间：2012-10-18T15:55:13.533
> 
> 标签：asp.net-mvc, dependency-injection, inversion-of-control, unity-container

在我的 MVC 4 项目中，我有一个像这样的模型：

```
public class MyModel
{
    private readonly IService MyService;

    public MyModel([Dependency]IService service)
    {
        this.MyService = service;
    }
    // ...
} 
```

我的控制器有一个动作，它是一个 HttpPost，如：

```
[HttpPost]
public ActionResult Show(MyModel myModel)
{
    // do stuff 
```

我的控制器没有（也不应该）有我的 IoC 容器的实例。当 HttpPost 发生并调用操作时，MVC 在执行模型绑定时尝试创建我的模型的实例。它需要一个无参数的构造函数来做到这一点。如果它使用默认构造函数创建模型，则不会设置 MyService，并且模型不会存在所有依赖项。我不想调用 myModel.Init(someIServiceInstance)。我想插入框架，以便在创建模型时解决依赖关系（调用正确的构造函数）。

我目前使用 Unity 作为我的依赖解析器，并且有一些工厂用于控制器、服务客户端等。对于控制器，我能够注册 ControllerFactory 并将依赖项传递给控制器​​，但我没有看到我可以注册的 ModelFactory。我不太关心绑定过程本身。模型实例化后，我对绑定的完成方式感到满意。我只想实现模型的创建/构造方式。如果 ModelFactory 使用对容器的引用来解决依赖关系，我也可以（我可以将容器作为构造函数的参数注入工厂，我只是不希望控制器直接引用容器）。

有没有人有一个 ModelFactory（或 ModelBinder，和/或 ModelBinderResolver 等）的样本来处理模型的创建，然后依靠框架实现来完成其余的绑定过程？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T16:06:07.010

您可以编写自定义模型绑定器：

```
public class MyModelModelBinder : DefaultModelBinder
{
    protected override object CreateModel(ControllerContext controllerContext, ModelBindingContext bindingContext, Type modelType)
    {
        // TODO: create the model instance here using your DI framework or the 
        // DependencyResolver which is more correct
    }
} 
```

然后在你的注册这个模型活页夹`Global.asax`：

```
ModelBinders.Binders.Add(typeof(MyModel), new MyModelModelBinder()); 
```

但通常这是不好的做法。我建议您使用视图模型并让您的控制器操作将视图模型作为参数并将视图模型传递给视图。这些视图模型将具有无参数构造函数。然后你可以将你的域模型或存储库注入到控制器构造函数中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T17:19:25.000

我想我想通了：

```
public class MyModelBinder : DefaultModelBinder
{
    private readonly UnityContainer container;

    public MyModelBinder(UnityContainer container)
    {
        this.container = container;
    }

    protected override object CreateModel(ControllerContext controllerContext, ModelBindingContext bindingContext, Type modelType)
    {
        if (modelType == null)
        {
            return base.CreateModel(controllerContext, bindingContext, null);
        }

        return this.container.Resolve(modelType);
    }
} 
```

在 Global.asax、Application_Start() 或您的 IoC 配置中：

```
ModelBinders.Binders.Add(typeof(object), new MyModelBinder(container)); 
```

# symfony - 用 sonataMediaBundle 覆盖 BaseMediaAdmin

> ID：12958725
> 
> 赞同：1
> 
> 时间：2012-10-18T15:55:14.297
> 
> 标签：symfony, overriding, sonata-admin

我正在寻找将 BaseMediaBundle 覆盖为自定义，例如函数“configureListFields”。

我已经覆盖了这个包的控制器，但不是 BaseMediaAdmin。

此代码的问题是我的仪表板中的实体“媒体”消失了！

*//在我的 services.xml 中：*

```
<service id="sonata.media.admin.media" class="Application\Sonata\MediaBundle\Admin\MediaAdmin">
        <tag name="sonata.media.admin" manager_type="orm" group="Gestion des médias"
            label="Média" />
        <argument />
        <argument>Application\Sonata\MediaBundle\Entity\Media</argument>
        <argument>Application\SonataMediaBundle:MediaAdmin</argument>
        <call method="setTranslationDomain">
            <argument>SonataMediaBundle</argument>
        </call>
    </service> 
```

*//在我的应用程序\奏鸣曲\MediaBundle\Admin\MediaAdmin*

```
namespace Application\Sonata\MediaBundle\Admin;

use Sonata\AdminBundle\Admin\Admin;
use Sonata\AdminBundle\Form\FormMapper;
use Sonata\AdminBundle\Datagrid\DatagridMapper;
use Sonata\AdminBundle\Datagrid\ListMapper;
use Sonata\AdminBundle\Show\ShowMapper;
use Sonata\AdminBundle\Route\RouteCollection;
use Sonata\MediaBundle\Provider\Pool;
use Sonata\MediaBundle\Form\DataTransformer\ProviderDataTransformer;

use Knp\Menu\ItemInterface as MenuItemInterface;

use Sonata\MediaBundle\Admin\BaseMediaAdmin as BaseMediaAdmin;

class MediaAdmin extends BaseMediaAdmin
{

    /**
     * {@inheritdoc}
     */
    protected function configureListFields(ListMapper $listMapper)
    {
        $listMapper
//            ->add('image', 'string', array('template' => 'SonataMediaBundle:MediaAdmin:list_image.html.twig'))
            ->add('custom', 'string', array('template' => 'SonataMediaBundle:MediaAdmin:list_custom.html.twig'))
            ->add('enabled', 'boolean', array('editable' => true))
            ->add('_action', 'actions', array(
                'actions' => array(
                    'view' => array(),
                    'edit' => array(),
                    'delete' => array(),
                )
            ))
        ;
    }

} 
```

如果有人有想法？谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-25T22:08:55.370

尝试使用[Sonata Admin 扩展](http://sonata-project.org/bundles/admin/master/doc/reference/extensions.html)。

# c++ - 派生类外的纯虚函数定义

> ID：12958727
> 
> 赞同：4
> 
> 时间：2012-10-18T15:55:18.310
> 
> 标签：c++

我在头文件中有抽象基类和派生类。是否可以在派生类之外定义纯虚函数？

例如：

```
//file .h
class Baseclass
{
public:
    virtual int vfunc() = o;
   //assume Ctor and Dctor
};
class Derivedclass : public Baseclass
{
public:
    int vfunc();
    //assume Ctor and Dctor
}; 
```

现在在 cpp 文件中：

```
#include <file.h>
int Derivedclass :: vfunc()
{
    // Body of the function
} 
```

上述方法是否正确/可能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T16:01:30.770

这不仅是可能的，而且是标准做法。您唯一需要担心将函数定义放入标题中的是模板。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T15:59:07.370

对的，这是可能的。你可以在课堂之外定义它们，如果你想问的话。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T16:04:58.973

> 是否可以在派生类之外定义纯虚函数？

该函数在派生类中不是纯虚函数，它只是在基类中是纯虚函数。

派生类覆盖函数并且没有纯说明符（`=0`函数声明符之后的位），因此`DerivedClass::vfunc()`不是纯虚拟的，因此如果在程序中使用它*必须在某处定义。*在与标头分开的文件中定义它是完全正常的。

# jquery - 在使用 hide() 和 on() 时需要帮助

> ID：12958729
> 
> 赞同：0
> 
> 时间：2012-10-18T15:55:37.473
> 
> 标签：jquery

有人可以告诉我如何使用 on() 实现隐藏功能。我试过了：

```
 $(document).on('hide','selector');
    $(document).on('selector', function(){
        $(this).hide();
    }); 
```

想知道如何使用 on() 正确应用这样的功能；

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T16:00:09.790

该[`.on`](http://api.jquery.com/on/)函数用于将*事件*连接到某物。您甚至没有告诉它要连接什么。您希望元素何时隐藏？假设您希望在单击按钮时隐藏它。

HTML：

```
<div id="a">This will hide</div>
<button id="b">Hide!</button>​ 
```

jQuery：

```
$(document).on('click', '#b', function() {
    $('#a').hide();
});​ 
```

如果您只是想隐藏元素，而不是由事件或任何东西触发，只需调用`$('#a').hide();`它就会隐藏元素。当然，更改您的选择器以使用您的 HTML。

小提琴：http: [//jsfiddle.net/gromer/Zq756/](http://jsfiddle.net/gromer/Zq756/)

编辑：

有趣的。您是否可以控制动态添加的元素？如果是这样，我会为您希望在添加时隐藏的元素添加一个类。就像是：

`<div class="initial-hide">This div should be hidden when it's loaded.</div>`

然后在你的CSS中，添加这个：

```
.initial-hide {
    dislay: none;
} 
```

然后，每当一个元素与`initial-hide`该类一起加载时，它就会被隐藏。请参阅此更新的小提琴：http: [//jsfiddle.net/gromer/Zq756/1/](http://jsfiddle.net/gromer/Zq756/1/)。添加按钮将说明添加的类将如何帮助您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T15:58:42.593

javascript中没有要捕获的事件`on hide`或事件。`on show`您所做的是捕获元素的隐藏和显示并将自定义功能附加到它。

```
$('element').hide(delay, onHide);

function onHide(){
    //do whatever
}

$('element').show(delay, onShow);

function onShow(){
    //do whatever
} 
```

# arrays - Visual Basic：索引超出数组范围

> ID：12958730
> 
> 赞同：0
> 
> 时间：2012-10-18T15:55:38.213
> 
> 标签：arrays, vb.net, visual-studio-2010

我试图让这个 Visual Basic 程序将值存储在多维数组中。由于索引超出数组范围，我看到的所有其他错误都是由于数组是在变量之前声明的，但我很确定我在正确的位置声明了我的。任何人都可以看到有什么问题吗？

```
 Randomize()
    Dim roll As Integer = 0
    Dim player As Integer
    Dim index As Integer

        Console.Writeline("Enter the number of players: ")
        index = Convert.ToInt32(Console.Readline)

        player = index - 1

        Dim players(player,roll) As Integer

        Do Until index = 0

            Do Until roll = 5
                players(player,roll) = CInt(Int((6 * Rnd()) + 1))
                roll +=1
            Loop

            player -=1

        Loop 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T15:58:58.120

你用 标注尺寸`players()`，`roll=0`然后循环直到`roll=5`。这显然超出了您的数组范围。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T16:05:19.207

我会添加一个新变量 - 尝试将您的代码更改为：

```
Dim MaxRolls as integer
MaxRolls = 5 
```

然后：

```
Dim players(player,MaxRolls) As Integer 
```

那应该解决它

# firefox-addon - Firefox 扩展启动通知

> ID：12958731
> 
> 赞同：0
> 
> 时间：2012-10-18T15:55:39.797
> 
> 标签：firefox-addon, observer-pattern

我无法按照[此处](https://developer.mozilla.org/en-US/docs/XPCOM/Receiving_startup_notifications)有关在 Firefox 扩展中接收启动通知的说明进行操作。它说在那里添加

```
category profile-after-change MyComponent @foobar/mycomponent;1 
```

到 chrome.manifest。我要做什么`MyComponent`和`foobar/mycomponent;1`？

我的扩展实际上是另一个扩展的插件。在它的主要 .js 文件中，我有

```
MainExtension.MyPlugin = {... 
```

然后在 MainExtension 对象的 MyPlugin 对象属性中定义我的所有函数。

我相信我应该设置`MyComponent`为`MainExtension.MyPlugin`. 我不确定第二部分。我也不确定我需要做什么来调用我想要在启动时调用的函数。查看其他一些扩展，我想我可能需要添加一个`observe()`方法来`MainExtension.MyPlugin`在收到`profile-after-change`通知时调用另一个函数，但我不确定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T18:12:57.287

我猜你真正想要的是在 MainExtension 可用时得到通知。试试[AddonManager](https://developer.mozilla.org/en-US/docs/Addons/Add-on_Manager/AddonManager)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T14:50:36.443

正如 Wladimir Palant 在对该问题的评论中指出的那样，要使用更改后的配置文件通知，您必须拥有一个 XPCOM 组件。然后`MyComponent`是组件创建的类，并且`@foobar/mycomponent;1`是组件的合同 ID。我不知道这些是什么，因为我的扩展只是覆盖了另一个定义 XPCOM 组件的扩展。我的扩展没有自己的 XPCOM 组件。

# jquery - jQuery $('html, body').not()

> ID：12958734
> 
> 赞同：5
> 
> 时间：2012-10-18T15:55:45.697
> 
> 标签：jquery, click

[这里](http://jsfiddle.net/m2eqS/1/)- 我希望当你点击任何地方而不是 div 时发生警报。

当我单击 div 时，也会显示警报。

***JS***

```
$("html, body").not('.entry-content').click(function() {            
    alert('d');                        
}); ​ 
```

***HTML***

```
<div class="entry-content"> kkkk </div>​ 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-18T16:01:03.230

您可以使用 event 参数来查看单击了哪个目标并返回 false

```
$("html, body").click(function(e) {
    if ($(e.target).hasClass('entry-content')) {
        return false;
    }
    alert('d');
});​ 
```

[http://jsfiddle.net/keyZw/](http://jsfiddle.net/keyZw/)

您正在使用 .not() 过滤器..但它仍然是您的 html/body 的一部分..所以您需要在 click 函数中处理它。你也只是绑定点击事件..

所以

```
 // find html,body - not ones with class=entry-content - bind click
 $("html, body").not('.entry-content') 
```

所以这不会阻止警报，因为您的 div 仍在体内

如前所述..您只需要真正绑定到身体

```
$("body").click(function(e) {
    if ($(e.target).hasClass('entry-content')) {
        return false;
    }
    alert('d');
});​ 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-18T16:00:43.433

```
$("html *").click(function(e) {
    if ( e.target.className.indexOf("entry-content") < 0 ) {
        alert('d');
    }
}); 
```

[**演示**](http://jsfiddle.net/m2eqS/7/)

* * *

原始代码不起作用，因为它`.not()`适用于它前面的选择器 -`html`和`body`. 他们都没有 的类`entry-content`，所以事件触发

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T16:03:29.037

您还可以在单​​击的元素上停止传播

```
$("body").click(function() {
    alert();
});

$(".entry-content").click(function(e) {
    e.stopPropagation();
}); 
```

也可以通过单击子元素来工作

```
<div class="entry-content">Element
  <span>Sub element</span>
</div>​ 
```

看看[小提琴](http://jsfiddle.net/m2eqS/8/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T16:10:39.023

问题是您将单击事件添加到 HTML 和 BODY 标记。因此，首先，当您单击正文区域时，您将收到 2 个警报。此外，由于事件向上传播的方式，点击有问题的 DIV 也会将点击事件向上传播到 body 和 html。因此，您需要在点击处理程序内部进行检查，以确定是否要显示警报消息。

我在下面修改了你的 jsfiddle，只在你的选择器中包含 HTML，并检查`entry-content`处理程序中的类。

[http://jsfiddle.net/m2eqS/6/](http://jsfiddle.net/m2eqS/6/)

```
$("html").click(function(e) {
    if(!$(e.target).hasClass("entry-content")){
      alert('TEST');
   }                        
}); ​ 
```

绑定到 HTML 和绑定到 BODY 之间的区别在于，如果您希望能够单击页面上的任何位置，在内容/正文结束的位置下方，您应该使用 HTML。否则使用身体。

# c# - Sql 运行但在日历控件中不显示任何内容

> ID：12958740
> 
> 赞同：1
> 
> 时间：2012-10-18T15:56:03.930
> 
> 标签：c#, asp.net, sql, calendar, db2

我有一个将执行的 sql 选择脚本，并显示在运行时选择了数据。我遇到的问题是试图让这些数据显示在我的日历控件中。我想通过用户登录的部门更改日历。现在没有任何显示，除非我在其中硬编码部门，否则它不会显示任何数据。

我正在使用 c# asp.net。

这是我正在尝试获取数据的方法

```
 private DataSet GetData()
    {
        var CurrUser = "a73      ";
        var UsrDepartment = "60      ";

        Account.Login uusr = new Account.Login();
        CurrUser = uusr.User.Identity.Name.ToString().ToUpper();

        ConnectionStringSettingsCollection cssc = ConfigurationManager.ConnectionStrings;

        var sql = "select (substring(status, 1,1)) AS stat1, lastname, firstname, ldate, edate,depdivid, requestid from TIME.employee E inner join TIME.request T on E.EMPID = T.empid where E.depdivid =  @UsrDepartment ";

        using (iDB2Connection conn = new iDB2Connection(GetConnectionString()))
        {
            conn.Open();

            using (iDB2Command cmd = new iDB2Command(sql, conn))
            {
                cmd.DeriveParameters();

                using (iDB2DataAdapter da = new iDB2DataAdapter(cmd))
                {
                    DataSet ds = new DataSet();
                    da.Fill(ds);

                    return ds;
                }
            }
        }
    } 
```

我用这个填写日历：

```
DataSet ds = GetData();    
foreach (DataRow row in ds.Tables[0].Rows)
                {
                    //need to fill from first to last date
                    string scheduledDate = Convert.ToDateTime(row["ldate"]).ToShortDateString();
                    string endDate = Convert.ToDateTime(row["edate"]).ToShortDateString();

                    e.Cell.Width = 120;
                    e.Cell.Height = 100;

                    Int32 start = 0;
                    Int32 end = 0;

                    start = string.CompareOrdinal(scheduledDate, s);
                    end = string.CompareOrdinal(endDate, s);

                    if ((start <= 0) & (end >= 0) & (!e.Day.IsWeekend))
                    {
                        HyperLink lb = new HyperLink();
                        lb.Text = link + (Int64)row["requestid"] + "' >" + row["lastname"] + "</a>" as String + "(" + row["stat1"] + ")" as String + "<br />";

                        //code to change color of button
                        if (scheduledDate == endDate)
                        {
                            lb.CssClass = "changecolor";
                        }
                        e.Cell.Controls.Add(lb);
                    }
                } 
```

这种方式不会在我的日历中显示任何链接，但如果我让部门有一个值（这不是我想要的），它将显示链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T16:17:40.473

我认为您需要这样的线路

```
cmd.Parameters["@UsrDepartment"].Value = myDept 
```

# jsf - 是否可以有条件地在 jsf 中定义 ui:define？

> ID：12958741
> 
> 赞同：1
> 
> 时间：2012-10-18T15:56:05.140
> 
> 标签：jsf, el

我使用 jsf 1.2 但我想做这样的事情：

```
<c:if test="#{'1' eq '1'}">
    <ui:define name="title">
        <h:panelGrid columns="2" style="background-color: lightblue;">
                  My special super title
              </h:panelGrid>
        </ui:define>
    </c:if> 
```

这不起作用 - 例如，即使`'1' eq '1'`总是`true`，`ui:define`只有在没有使用它的情况下才起作用`c:if` 是否有另一种方法可以实现这一目标？

用例是我有一个类似这样的父 template.xhtml

```
<ui:define name="title">
  #{empty pageTitle ? 'MyAppName' : pageTitle}
</ui:define> 
```

我有两个应用程序，App1 和 App2。对于 App1，我必须保持标题不变，例如：#{empty pageTitle ? 'MyAppName' : pageTitle}

对于 App2，我必须在那里添加一些花哨的东西，例如愚蠢的 panelGrid。还有其他一些半干净的方法吗？

**编辑**我不得不提到两个应用程序都使用相同的页面和模板

# python - & 符号混淆

> ID：12958745
> 
> 赞同：-2
> 
> 时间：2012-10-18T15:56:22.137
> 
> 标签：python, unicode

可能是一个愚蠢的问题，但由于某种原因 & 未被识别为 &。我从 API 获取文本并`&amp;`打印为`&amp;`而不是 &。我通过 UTF8 编码，但它没有捕捉到它

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T15:58:45.160

`&amp;`是 & 符号的 HTML 转义序列。它与字符编码无关。如果您在浏览器中打开要获取的页面（如果可能），您也会在源代码中看到它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T16:10:56.170

您可以尝试使用[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/)来翻译[HTML 实体名称。](http://www.w3schools.com/tags/ref_entities.asp)

```
from BeautifulSoup import BeautifulStoneSoup
BeautifulStoneSoup("&amp;",convertEntities=BeautifulStoneSoup.ALL_ENTITIES) 
```

# c - Mercurial 预合并钩子

> ID：12958747
> 
> 赞同：0
> 
> 时间：2012-10-18T15:56:25.887
> 
> 标签：c, mercurial, merge

在允许在 Mercurial 中进行合并之前，有没有办法进行一些检查？

通过将以下内容添加到以下内容，我找到了更新前挂钩并有一个在允许更新之前运行的脚本`~/.hg/hgrc`：

```
[hooks]
pre-update = ~/hg_pre_update.sh 
```

但我也想在允许合并之前运行检查，目前它只允许合并通过而不运行我的检查。

**背景**

如果有其他方法可以解决问题...

Mercurial 下的“丢失”编辑存在许多问题。我现在已经将它们中的大多数追踪到相同的根本原因：有人打开了 vim 编辑会话，而他们或其他人进行了 hg 更新或合并。编辑器警告文件已从外部更改，用户忽略警告并保存更改。

当这些更改被提交时，对于 Mercurial 来说没有什么争议。用户只需恢复上次更新带来的所有更改并放入他们自己的更改。

一段时间后，我们注意到代码已经消失了。暗示各种侮辱性的方式随波逐流……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T16:23:31.397

如果没有进行本地更改，请将 vim 设置为自动重新加载更改。（否则询问，或强制合并）

这就是我在任何编辑器中避免此类问题的方式...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T08:03:03.500

抱歉，刚刚发现有一个`pre-merge`与`pre-update`. 我在问这个问题之前试过了，但现在只看我的 hgrc 我意识到我把被调用的脚本用于那个`~/hg_pre_merge.sh`不存在的钩子。

我在任何地方都找不到合并前的存在记录，但现在仍然感觉有点像木偶。

![现在感觉有点像傀儡。](../Images/83fa4df33440ccdb14a3781464ce502f.png)

# regex - 是否可以使用正则表达式进行算术运算？

> ID：12958748
> 
> 赞同：2
> 
> 时间：2012-10-18T15:56:29.677
> 
> 标签：regex, backreference

我想知道是否有办法匹配整数及其继承者：

我想匹配：“1 Victor 2 Marconi”

但不是：“1 Victor 3 Marconi”

有没有办法反向引用第一个数字并像这样增加它： (\d) [[:alpha:]]* \1 **+1** [[:alpha:]]* (INVALID)

我不知道 regexp 是否是正确的工具。如果不是，那会是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T15:58:52.347

你不能用正则表达式做算术。您可能会创建一个非常大的正则表达式，用它们的继任者替换有限数量的数字，但通常不会。

递增时，总是有可能出现进位 -> `9+1=10`。

无论如何，您为什么要使用正则表达式呢？

# c++ - 为什么在重载“<<”运算符时使用“out”而不是“cout”？

> ID：12958749
> 
> 赞同：1
> 
> 时间：2012-10-18T15:56:31.153
> 
> 标签：c++, operator-overloading

我正在学习运算符重载。重载“<<”运算符时，使用“out”而不是“cout”。我不明白为什么。

```
 ostream &operator<<( ostream &out, const IntList &L ) {
    out << "[ ";
    for (int k=0; k< L.numItems; k++) {
    out << L.Items[k] << ' ';
    }
   out << ']';
} 
```

我想问一下 cout 和 out 之间的区别以及如果我使用 cout 而不是 out 会发生什么。感谢您的回答。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-18T15:58:21.753

`ostream`您正在查看的是一个重载的“流插入”运算符，它允许使用典型`cout << myObject`语法将一些自定义类写入对象。

在这种情况下，变量被调用`out`是因为这是他们`ostream`为传递给函数的对象赋予的名称，它可以是*任何*输出流，无论是`cout`还是 an`fstream`或 a `stringstream`。这只是一个变量名，他们本可以调用它`blah`并编写：

```
ostream &operator<<( ostream &blah, const IntList &L ) {
   blah << "[ ";
   // ...
} 
```

通常，您选择一个描述性的变量名称，并且`out`作为输出流的名称是非常具有描述性的。

`cout`将是一个特别*糟糕的*变量名，因为它与 密切相关`std::cout`，用于专门写入标准输出流。此代码不专门写入标准输出，它通过运算符写入*任何* `ostream`对象，`<<`因此他们为`ostream`参数选择了更通用的名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T16:00:18.103

> 我想问一下 cout 和 out 之间的区别以及如果我使用 cout 而不是 out 会发生什么。感谢您的回答。

在这种情况下，`ostream&`( `out`) 是传递给函数的参数。这允许`operator<<`在*任何* `ostream`.

[`cout`](http://www.cplusplus.com/reference/iostream/cout/)是一个*特定* `ostream`的实例——标准输出流。如果他们`cout`在这里使用，您将无法`<<`在`cerr`（标准错误流）或任何其他`ostream`. 如果您将正文`out`中的 （当然，如果您将参数更改为 named ，这不会发生 - 但它会误导任何查看此代码的人，因为人们会*期望*代码写入标准输出流，而不是流被传入。） `cout``cout``cout`

 *一般来说，`cout`如果您特别提到`std::cout`标准输出流，您只会希望将其用作名称，因为在其他上下文中使用它会非常混乱。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T16:02:23.843

out 是传递给重载运算符（在运算符的实现内部）的 ostream 对象的名称。

重载运算符允许您编写这样的代码

```
IntList i;
cout<<i; 
```

或者

```
cerr<<i; 
```

在实现中，如果您*用**cout*替换，则第二次调用

```
cerr<<i; 
```

将打印到标准输出，而它应该打印到标准错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T16:07:17.653

这里的关键实际上是函数签名中的类型：只要它是一个具有两个参数的独立函数 - 一个是类型`std::ostream&`，另一个能够与要流式传输的值匹配，那么函数体就会被调用。它应该返回对流的引用以允许链接（如 中`if (cout << firstIntList << secondIntList)`）。

只要不是保留字，实际的参数名称就可以随心所欲。我倾向于使用“os”，就像在输出流中一样。*

# .htaccess - 如何在服务器中使用 HTACCESS 执行 url 重写

> ID：12958750
> 
> 赞同：1
> 
> 时间：2012-10-18T15:56:31.647
> 
> 标签：.htaccess, url, url-rewriting

我有以下**.htaccess**文件

```
Options +FollowSymLinks
RewriteEngine On
Options -Indexes
RewriteRule   ^index/?$   index1.php  [NC]
RewriteRule   ^index/(.*\.html)/?$   index1.php?load=$1  [NC,L]
RewriteRule   ^page/?$   page.php  [NC]
RewriteRule  ^page/([0-9]+)/([a-z]+)/([{a-z}{0-9}{\-\}]+)/?$   page.php?id=$1&cat=$2&title=$3 [NC,L] 
```

并且它在我的本地主机中完美地工作。但不适用于服务器，

以下**.htaccess**在我的服务器上运行良好

```
RewriteEngine on
RewriteRule testpage\.html http://www.google.com [R] 
```

我犯了什么错误吗？有什么帮助吗？

# ruby-on-rails - 尝试使用工厂女孩在我的 Rails 应用程序中测试用户登录时，在创建操作时缺少模板错误

> ID：12958755
> 
> 赞同：0
> 
> 时间：2012-10-18T15:56:42.703
> 
> 标签：ruby-on-rails, testing, capybara, factory-bot, minitest

当我尝试使用工厂在我的 Rails 应用程序上测试我的登录时，我不断收到缺少模板的错误。即使我的控制器中有一个重定向，它也需要一个用于我的创建操作的模板。这是我的会话控制器：

```
class SessionsController < ApplicationController
  def new
  end

  def create
    user = login(params[:email], params[:password], params[:remember_me])
    if user
      redirect_back_or_to dashboard_path, :success => "Logged in!"
    else
      flash.now.alert = "Email or password was invalid."
    end
  end

  def destroy
    logout
    redirect_to root_url, :notice => "Logged out!"
  end
end 
```

还有我的gemfile：

```
source 'https://rubygems.org'

gem 'rails', '3.2.8'
gem 'jquery-rails'
gem 'pg'
gem 'heroku'
gem 'taps'
gem 'simple_form'
gem 'bootstrap-sass'
gem 'sorcery'

group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'uglifier', '>= 1.0.3'
end

group :test do
  gem 'minitest'
  gem 'capybara'
  gem 'capybara_minitest_spec'
  gem 'turn'
  gem 'factory_girl_rails'
end 
```

我的工厂.rb：

```
FactoryGirl.define do
  factory :user do
    sequence(:email) { |n| "foo#{n}@example.com" }
    password "secret"
    password_confirmation "secret"
  end
end 
```

这是我的测试：

需要“test_helper”

```
describe "Login integration" do
  it "logs in a user successfully" do
    user = FactoryGirl.create(:user)
    visit login_path
    fill_in "Email", :with => user.email
    fill_in "Password", :with => user.password
    check "Remember me"
    click_button "Log in"
    current_path == "/dashboard"
    page.text.must_include "Logged in!"
    page.text.must_include "Your Dashboard"
  end

end 
```

但是当我运行该测试时出现此错误：

```
 Missing template sessions/create, application/create with {:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder, :coffee]}. 
```

相反，如果我只是不尝试使用工厂女孩，它可以像这样正常工作：

需要“test_helper”

```
describe "Login integration" do
  it "logs in a user successfully" do
    visit signup_path
    fill_in "Email", :with => "joey@ramones.com"
    fill_in "Password", :with => "rockawaybeach"
    fill_in "Password confirmation", :with => "rockawaybeach"
    click_button "Create User"
    current_path == "/"
    page.text.must_include "Signed up!"
    visit login_path
    fill_in "Email", :with => "joey@ramones.com"
    fill_in "Password", :with => "rockawaybeach"
    check "Remember me"
    click_button "Log in"
    current_path == "/dashboard"
    page.text.must_include "Logged in!"
    page.text.must_include "Your Dashboard"
  end

end 
```

关于可能导致这种情况的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T17:33:54.633

很明显，当您使用时发生的事情`FactoryGirl`是您`if`在控制器中的条件正在评估为假（也许`login`正在返回`nil`？）。由于您的重定向仅在条件块内，如果您错过了，那么您将进入默认渲染。所以我不知道你的`login`方法是做什么的，因此不能告诉你为什么`user`是`false`or `nil`，但在我看来，这一定是正在发生的事情。尝试在条件子句中为现有视图模板添加`redirect`或，看看是否可以防止异常。`render``else`

# mysql - MySQL LIMIT 结果与 NO LIMIT 不同的值

> ID：12958757
> 
> 赞同：1
> 
> 时间：2012-10-18T15:56:50.683
> 
> 标签：mysql, limit

我想为查询返回一个有限的结果，但同时返回所有 DISTINCT 值，就好像没有设置限制一样。

```
SELECT artnr, color FROM table WHERE catID=1 LIMIT 20
SELECT DISTINCT(color) FROM table WHERE catID=1 
```

如果用户选择 catID=1 的所有产品，这将返回有限的结果。我想向用户显示此类别的所有可能颜色，以便用户选择特定颜色。

这可以在一个查询中完成，还是需要如上所述的单独查询？

* * *

假设我没有限制地抓取所有行。然后使用 php，我可以使用数组来获取不同的颜色值。

SELECT artnr, color FROM table WHERE catID=1

```
$color_array = array();  
while($row... {  
 $color_array[$row["color"]];  
}  
for($a=0;$a<20;$a++) {  
  // Print 20 rows from the result  
} 
```

但我想限制结果，并且仍然获取所有颜色值。

# java - 在Jsp页面中获取客户端的IP地址

> ID：12958759
> 
> 赞同：0
> 
> 时间：2012-10-18T15:56:55.613
> 
> 标签：java, jsp

我想在我的 jsp 页面中获取客户端的 IP 地址并希望存储在我的数据库中。

我在 Jsp 页面中使用以下代码来获取 IP 地址，但它显示了服务器 IP 地址。

```
 <input type="hidden" name="ipaddress" value="<%=request.getRemoteAddr()%>"/> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-18T16:28:05.890

在通常情况下，方法`ServletRequest.getRemoteAddr()`（或`getRemoteHost()`和`getRemotePort()`）应该返回实际客户端的详细信息。但是，如果它通过代理或不同的 servlet 引擎路由，您将获得这些机器的 ip。要解决这些情况，您可以尝试以下操作

```
request.getHeader("VIA")             --> Gateway   
request.getHeader("X-FORWARDED-FOR")--> IPaddress 
```

但如果请求直接来自客户端，这可能会返回 null。您可以通过一些附加条件来处理这种情况以获取有效数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T16:11:10.240

尝试使用`request`对象从服务器端获取客户端 IP 地址绝不是一种可靠的方法。

最可靠的往往在客户端执行，ActiveX、Applet 或 Javascript 仅举几例。然而，这也带来了一些挑战。检查[这个问题](https://stackoverflow.com/q/391979/1434089)的答案，这样你就知道你在反对什么（[这是我最喜欢的答案](https://stackoverflow.com/a/391990/1434089)）

# android - 带有应用登录的 Facebook SSO

> ID：12958761
> 
> 赞同：0
> 
> 时间：2012-10-18T15:57:04.547
> 
> 标签：android, facebook, authentication, single-sign-on

所以我有一个应用程序，我希望用户在我的应用程序中创建一个登录，然后在登录后可以选择将他们的 Facebook 连接到应用程序/他们的帐户。

问题是：**如果 user1 注销，并且他们的朋友 (user2) 想在 user1 的手机上创建一个帐户。然后一旦 user2 登录它，它会为 user1 尝试 Fbook SSO，即使它是 user2 登录的。**

我正在寻找一种方法来检查 fbook 应用程序以查看哪个用户已登录，然后在正确的用户从我的应用程序登录时让我的应用程序仅 SSO。

有什么建议么？

====

让我澄清一下，我不希望 user1 和 user2 能够登录到 Facebook。我只想确保 fbook sso 仅在 user1 登录时发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T19:21:58.320

不要使用 SSO，使用 Web 登录。

# ruby-on-rails - 包含模块的元编程

> ID：12958763
> 
> 赞同：1
> 
> 时间：2012-10-18T15:57:07.253
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.1, metaprogramming

我在rails上使用ruby，我目前有代码

```
if level == "Grad"
  include Grad
else
  include Undergrad 
```

其中 level 是一个字符串，表示“Grad”或“Undergrad”

我想使用元编程来包含没有 if 语句的正确模块

像这样的东西。

```
send :include, level 
```

我该怎么做呢。做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T15:58:32.643

`include "#{level}".constantize`. 这对你有用吗？

# xsd - 将元素的值限制为其他元素 XSD 中的值

> ID：12958767
> 
> 赞同：0
> 
> 时间：2012-10-18T15:57:10.473
> 
> 标签：xsd, referential-integrity

给定以下类型：

```
<xsd:complexType name="Options">
    <xsd:sequence>
        <xsd:element name="option" maxOccurs="unbounded">
            <xsd:complexType>
                <xsd:all>
                    <xsd:element name="id" type="xsd:integer" />
                    <xsd:element name="label" type="xsd:string" />
                    <xsd:element name="value" type="xsd:string" minOccurs="0" />
                    <xsd:element name="dependency" type="xsd:integer" minOccurs="0" />
                </xsd:all>
            </xsd:complexType>
        </xsd:element>
    </xsd:sequence>
</xsd:complexType> 
```

我如何表达 a `dependency`of one`option`必须作为 an `id`of a different存在`option`？

我想我应该使用`xsd:key`and `xsd:keyref`，但无法理解如何使用它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T16:28:30.203

约束只能在元素的上下文中表达。

```
<?xml version="1.0" encoding="utf-8" ?>
<!--XML Schema generated by QTAssistant/XML Schema Refactoring (XSR) Module (http://www.paschidev.com)-->
<xsd:schema elementFormDefault="qualified" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <xsd:complexType name="Options">
        <xsd:sequence>
            <xsd:element name="option" maxOccurs="unbounded">
                <xsd:complexType>
                    <xsd:all>
                        <xsd:element name="id" type="xsd:integer"/>
                        <xsd:element name="label" type="xsd:string"/>
                        <xsd:element name="value" type="xsd:string" minOccurs="0"/>
                        <xsd:element name="dependency" type="xsd:integer" minOccurs="0"/>
                    </xsd:all>
                </xsd:complexType>
            </xsd:element>
        </xsd:sequence>
    </xsd:complexType>
    <xsd:element name="Options" type="Options">
        <xsd:key name="PK">
            <xsd:selector xpath="option"/>
            <xsd:field xpath="id"/>
        </xsd:key>
        <xsd:keyref name="FK" refer="PK">
            <xsd:selector xpath="option"/>
            <xsd:field xpath="dependency"/>
        </xsd:keyref>
    </xsd:element>
</xsd:schema> 
```

![在此处输入图像描述](../Images/e0bee6ff0fc0a4919fa4e867a62c08d7.png)

如果您希望在多个实例中引用此类型以及您指定的约束，那么您将必须始终定义一个全局元素，然后在您的特定上下文中引用该元素。

我要提到的是，了解您在问题中使用“不同”一词非常重要。如果你真的是认真的，那么上面的内容并没有给你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T16:25:20.877

XSD 1.0 不支持这一点。XSD 1.1 支持可能允许您执行此操作的[条件类型和断言。](http://www.xfront.com/xml-schema-1-1/xml-schema-1-1.ppt?v=13)对于 xsd 1.0，您可以使用[Schematron](http://www.schematron.com/)来实现这一点。

# objective-c - 为 NSTimer 增加价值的可行性

> ID：12958768
> 
> 赞同：0
> 
> 时间：2012-10-18T15:57:12.520
> 
> 标签：objective-c, nstimer

我目前正在使用 NSTimer 作为记录时间的基础制作应用程序。但是，如果玩家在当前问题上使用了提示或弃权，我希望对正在进行的 NSTimer 增加时间进行惩罚。

我的问题是，是否可以为正在进行的 NSTimer 增加更多价值？例如，计时器在 0:23:41.2，用户按下提示/放弃。我想要一个添加功能，比如说 10 分钟。当玩家按下提示/没收时，如何制作一个功能，使计时器变为 0:33:41.2？

我尝试在谷歌和 SO 上查找与 NSTimer 相关的文章，并遇到了这个可能有用的 SO 线程。[如何为 NSTimer 赋值](https://stackoverflow.com/questions/6054928/how-to-value-for-nstimer)

而不是线程中显示的经过时间，我想我可以用下面的变量交换它。（但如果我下面展示的例子不可行，请赐教，我真的很想让这个游戏成功）

```
-(BOOL)hintButtonPressed 
```

.

```
-(void) timerFireMethod:(NSTimer *) theTimer {

        if (hintButtonPressed == true) {
            // do something to increase value
            [theTimer invalidate];
        } 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T16:31:14.890

`NSTimer`不是跟踪时间的好工具。它是调度周期性动作的好工具（尤其是对时间要求不高的动作）。

您跟踪时间的方式是使用三个 ivars：最近的“计时器开始”时间、“累积时间”（即最近开始之前的时间）和“isRunning”布尔值。在任何给定时间，总时间为：

```
accumulated + (now - start) * (isRunning ? 1 : 0) 
```

有了这个，你可以很容易地通过修改来增加或减少时间`accumulated`。而且您不需要`NSTimer`更新数据（这很少是一个好方法）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T17:09:41.467

即使我不会使用 NSTimer 进行倒计时，也有一种简单的方法可以将时间添加到它的 fireDate：

```
[_timer setFireDate:[[_timer fireDate] dateByAddingTimeInterval:600]]; 
```

这会给我的 _timer 增加 10 分钟（600 秒）。

您的示例的最佳解决方案是为按钮创建一个动作方法并检查该动作方法是否用户已经获得了时间奖励。

当然，您可以在 fire 方法中修改 fireDate 但我的代码行不会再次触发。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T16:31:16.680

据我所知，您不能添加、增加 NSTimer 的时间，您需要创建一个新的，并释放/使旧的无效。

顺便说一句，如果它是一个简单的计时器，你仍然可以让它变得简单

```
[NSObject cancelPreviousPerformRequestsWithTarget: self]
[self performSelector:<#(SEL)#> withObject:<#(id)#> afterDelay: incrementedTime]; 
```

但是你如果你执行Selector，你不能像NSTimer那样得到精确的时间信息，你只能盲目地增加时间。所以一切都取决于你的需求。

# c# - 在 c#.Net 中将日期时间转换为日期，但不是字符串日期

> ID：12958776
> 
> 赞同：0
> 
> 时间：2012-10-18T15:57:56.153
> 
> 标签：c#

> **可能重复：**
> [从 Excel 工作表中读取日期时间值](https://stackoverflow.com/questions/4538321/reading-datetime-value-from-excel-sheet)

我想将日期（例如 18/10/2012 00:00:00）与 Excel 日期进行比较。如果我使用 datetime.toshortdatestring() ，则该值将转换为字符串，并且将字符串与 Excel 日期进行比较不起作用。你能建议我解决这个问题的其他方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T16:12:54.250

`DateTime.Date`房产适合你吗？

[http://msdn.microsoft.com/en-us/library/system.datetime.date.aspx](http://msdn.microsoft.com/en-us/library/system.datetime.date.aspx)

# php - 必须有一种更有效的方法来做到这一点

> ID：12958777
> 
> 赞同：2
> 
> 时间：2012-10-18T15:57:58.790
> 
> 标签：php, mysql, optimization, unlink

基本上我正在尝试将图像表修剪为 3,500 行未保存或未过滤的图像。未保存和未过滤指的是数据库中的其他表。用户可以保存图像以及将图像标记为安全工作等...我想将所有图像保留在保存表和过滤器表中。

最终，图像表将被修剪为（3,500 张未保存/未过滤的图像）+（“X”已保存）+（“X”未过滤）。保存/过滤器/图像之间的链接是赋予`images`表中记录的 auto_incremented id。所以 saves 有一个 image_id 字段来获取`images`表中记录的键。与过滤器表相同

```
//connect to database
$connect = xxxxxxxxxxx;

//GET ALL IMAGES FROM `images` Table - NEWEST FIRST (`id` is auto_increment)
$sql = mysql_query("SELECT * FROM `images` ORDER BY `id` DESC") or die(mysql_error());
$x = 0;
while($row = mysql_fetch_array($sql)){
    //GET CURRENT IMAGES ID AND URL
    $id = $row['id'];
    $file = $row['url'];

    //SEE IF IMAGE IS IN THE saves Table
    $saves = mysql_query("SELECT `id` FROM `saves` WHERE `img_id` = '".$id."'") or die(mysql_error());
    if(mysql_num_rows($saves) == 0){$saved = FALSE;}
    else {$saved = TRUE;}

    //SEE IF IMAGE IS IN THE filters Table
    $filter = mysql_query("SELECT `id` FROM `filter` WHERE `img_id` = '".$id."'") or die(mysql_error());
    if(mysql_num_rows($filter) == 0){$filtered = FALSE;}
    else {$filtered = TRUE;}

    //If the image has not been saved or filtered then put it in a que for deletion
    if(!$saved || !$filtered){
        $IdQue[$x] = $id;
        $FileQue[$x] = $file;
        $x++;
    }//END if   
}//END while

//Process the delete que: Delete node from database, delete file on server. Keep 3,500 of the newest images.
for($i=3500; $i<$x; $i++){
    mysql_query("DELETE FROM `images` WHERE id='".$IdQue[$i]."' LIMIT 1") or die("line 33".mysql_error());

    if(file_exists($FileQue[$i])){
        unlink($FileQue[$i]) or die("file Not deleted");
    }//END if
}//END for
echo ($i-3500)." files deleted<br/>";

//terminate connection
mysql_close($connect); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T14:05:25.610

这应该让你去某个地方，但不是完整的代码：

首先，将选择 id 减少到 2 个查询：

```
$missing_from_filters = SELECT id FROM images WHERE img_id NOT IN (SELECT img_id FROM filter)
$missing_from_saves = SELECT id FROM images WHERE img_id NOT IN (SELECT img_id FROM saves) 
```

然后，获取两个数组中的 id

```
$to_delete = array_intersect($missing_from_filters,$missing_from_saves); 
```

运行一个查询以将它们全部删除

```
$remove_query = 'DELETE FROM images WHERE img_id IN ( '.implode(',',$to_delete).') LIMIT 3500'; 
```

# r - R 聚合与 rle 功能

> ID：12958780
> 
> 赞同：2
> 
> 时间：2012-10-18T15:58:05.187
> 
> 标签：r

努力解决这个问题：
示例数据：

```
 foo <- structure(c("1", "1", "1", "1", "1", "1", "2", "2", "2", "2",
"2", "2", "2", "2", "2", "C", "C", "C", NA, NA, NA, NA, "C",
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, "C",
"C", NA, NA, NA, NA, NA, "C", "C", "C", "C", "C", "C", "C", "C",
"C", "C", "C", NA, NA, NA, NA, "C", "C", "C", "C", "C", "C",
"C", "C", NA, NA, NA, NA, NA, NA, NA, NA, "C", "C", "C", NA,
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, "C", "C", "C", NA, NA,
NA, NA, NA, "C", "C", NA, NA, NA, NA, NA, "C", "C", "C", NA,
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, "C", "C", NA, NA,
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, "C", "C", "C", "C",
"C", "C", "C", "C", "C", "C", "C", "C", "C", "C", "C", "C", "C",
"C", NA, NA, "C", "C", "C", "C", "C", NA, "C", "C", "C", "C",
"C", "C", "C", "C", "C", "C", "C", "C", "C", "C", "C", "C", "C",
"C", "C", NA, NA, "C", "C", NA, NA, NA, NA, NA, NA, NA, NA, NA,
NA, NA), .Dim = c(15L, 13L), .Dimnames = list(NULL, c("weeks",
"vv", "rv", "ja", "aa", "bv", "aj", "vb", "rj", "rr", "vr", "bb",
"jr"))) 
```

如何按周对这些数据进行分组并应用 rle 功能？预期输出为：

```
out <- structure(c("weeks", "1", "2", "vv", "1", "1", "rv", "0", "1",
"ja", "1", "1", "aa", "1", "1", "bv", "1", "0", "aj", "1", "1",
"vb", "1", "0", "rj", "1", "0", "rr", "1", "1", "vr", "2", "2",
"bb", "1", "1", "jr", "1", "0"), .Dim = c(3L, 13L), .Dimnames = list(
    NULL, NULL)) 
```

到目前为止尝试过：

```
test <- aggregate(foo, by=data.frame(foo[,1]), function(x,na.rm=T) rle(as.numeric(x))$values) 
```

给我一个列表（与 rle 一样），然后我可以计算并尝试获得预期的输出。但我确信有一种更清洁的方法可以实现这一目标......有什么想法吗？

感谢您的关注！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T16:44:09.437

我得到了一些非常相似的东西......不确定你在寻找哪个答案：

```
aggregate(list(foo[, -1]), list(weeks = foo[, 1]), 
          function(x) length(na.omit(rle(x)$values)))

  weeks vv rv ja aa bv aj vb rj rr vr bb jr
1     1  1  0  1  1  1  1  1  1  1  2  1  1
2     2  1  1  1  1  0  1  0  0  1  2  1  0 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-18T16:51:47.070

显然是一堆处理 rle 输出的方法；这是另一个。

```
d <- data.frame(foo)
aggregate(!is.na(d[,-1]), d[,1,drop=FALSE], function(x) sum(rle(x)$values))
#   weeks vv rv ja aa bv aj vb rj rr vr bb jr
# 1     1  1  0  1  1  1  1  1  1  1  2  1  1
# 2     2  1  1  1  1  0  1  0  0  1  2  1  0 
```

# javascript - onclick 清除表单字段 JavaScript

> ID：12958793
> 
> 赞同：0
> 
> 时间：2012-10-18T15:58:51.540
> 
> 标签：javascript, forms

我希望这个问题不会重复档案中的某些内容；我已经看过但找不到解决我问题的答案，因为我似乎正在遵循给出的建议。

我正在使用 JavaScript 制作一个动态表单，并希望在用户单击它时清除每个字段中的提示。这是我对其中一个表单字段的部分内容。我不明白为什么 onlick="this.value=' '"; 不工作。任何帮助将非常感激。

```
 var VMake1 = document.createElement("input"); 
    VMake1.name = "veh_1_make"; 
    VMake1.type = "text";
    VMake1.value= "Please enter the make of vehicle 1";
    if (VMake1.value=="Please enter the make of vehicle 1") {   
        onclick="this.value=''";    }   
    placeVeh1Make.parentNode.insertBefore(VMake1,placeVeh1Make); 
```

预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T16:04:00.327

您应该在该字段上查找 onFocus 事件并将该字段的值设置为该事件的空字符串。如果用户通过表单输入字段进行选项卡，这还具有从字段中清除值的好处。

您还需要`VMake1`在设置 onfocus 时引用该元素。所以它可能看起来像这样：

```
var VMake1 = document.createElement("input"); 
VMake1.name = "veh_1_make"; 
VMake1.type = "text";
VMake1.value= "Please enter the make of vehicle 1";
VMake1.onfocus = "if (this.value === "Please enter the make of vehicle 1") {this.value='';}";   
placeVeh1Make.parentNode.insertBefore(VMake1,placeVeh1Make); 
```

请注意，我将条件移到了实际的 onfocus 代码中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T16:12:20.990

```
onclick="this.value=''"; 
```

用。。。来代替

```
VMake.onclick="this.value=''"; // or onfocus 
```

或者，更好的是，

```
VMake.addEventListener("click", function(){this.value=''}); // or "focus" 
```

如果你愿意使用一个框架，这是 jQuery 的方式：

```
$(VMake).click(function(){ //or .focus(...)
  this.value=''
}); 
```

甚至

```
$(VMake).click(function(){
  $(this).val('')
}); 
```

# iis - IIS 7.5 将请求指向错误的物理路径

> ID：12958802
> 
> 赞同：4
> 
> 时间：2012-10-18T15:59:22.317
> 
> 标签：iis, iis-7, iis-7.5

我在 IIS 7.5 上建立了一个网站。主机标头工作正常，页面返回正常。但是当浏览器请求图像时，我收到 404 消息。我注意到在 404 详细信息中，指定的“物理路径”位于“c:\inetpub\wwwroot\images...”上。

这很奇怪的原因是该网站位于“D:”驱动器上：“d:\inetpub\wwwroot\images...”。在 IIS 上正确配置了物理路径（我已经这样做了一百万次）但是在尝试提供图像时，它使用了错误的驱动器......为什么？它从哪里得到这个？我在 IIS 方面拥有十多年的丰富经验，而且我以前从未见过这种情况。怎么回事？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T18:09:27.900

您可能有两个网站绑定到同一个 IP 地址，其中一个（显示的物理路径）正在使用。

如果您在一个不受欢迎的网站下添加您的应用程序/虚拟程序，您将看到此错误。

使用 IP 时，您需要在 IIS 支持的网站下设置应用程序。

# java - 自定义属性在 Lucene 4 中是如何工作的？

> ID：12958804
> 
> 赞同：2
> 
> 时间：2012-10-18T15:59:23.567
> 
> 标签：java, search, lucene

如果我向 TokenStream 添加自定义属性（例如词性），它是否用于索引过程？

我可以从索引中检索此属性吗？它是否为每个令牌存储？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T16:26:18.117

如果我了解您在此处查找的内容，我认为您需要创建自己的自定义 TokenStream（我认为扩展标准 TokenStream）来完成此操作，并确定您希望如何存储所有这些额外信息。以及如何从索引中有意义地检索该信息。我知道没有办法完成这样的开箱即用的事情。

在我的脑海中，我认为您需要为通过您的自定义令牌流来的每个令牌编写一个新文档。然后在搜索时，使用荧光笔或类似的工具来获取查询匹配的术语并再次查询索引以检索有关该术语的这些元数据文档。这假设任何被这个或另一个写入的文档重用的令牌都将具有相同的元数据分配给它。如果不是这种情况，您必须确定如何识别您正在寻找的对冲突不敏感的文档。

或者，您可以编写同一文档的另一个字段，为每个标记创建一个有序的元数据列表，与数据结构平行。存储两者，再次使用荧光笔查找搜索结果，并解析出您的令牌流创建的列表中的匹配位置。

好吧，无论如何，这是一些想法。

# java - 如何确定实体是否具有 NamedQuery

> ID：12958810
> 
> 赞同：0
> 
> 时间：2012-10-18T15:59:42.457
> 
> 标签：java, jpa, reflection, annotations, named-query

*[再次，根据我前几天遇到的](https://stackoverflow.com/questions/12948103/transactionrolledbacklocalexception-clients-transaction-aborted-when-accessing)问题发布和回答一个为他人谋福利的问题。希望这可以节省一些时间。我有点惊讶这没有内置到 JPA 的`EntityManager`.*

**如何确定实体是否具有`NamedQuery`特定名称的注释？**

`@NamedQuery`在我尝试执行它之前，我需要确定一个实体是否有特定的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T15:59:42.457

嵌套注释时，您可以获取注释的属性以获取它的子级。在 的情况下`@NamedQueries`，它是`.value()`。

```
public boolean hasNamedQuery(Class<?> clazz, String nameOfQuery) {
    boolean foundQueryByName = false;
    NamedQueries namedQueries = clazz.getAnnotation(NamedQueries.class);
    if (namedQueries != null && namedQueries.value() != null) {
        NamedQuery[] values = namedQueries.value();
        for (int i = 0; i < values.length && !foundQueryByName; i++) {
            foundQueryByName |= (nameOfQuery.equals(values[i].name()));
        }
    }
    return foundQueryByName;
} 
```

# bash - 从一行复制文本并创建一个新行，下一行在其下

> ID：12958811
> 
> 赞同：0
> 
> 时间：2012-10-18T15:59:43.643
> 
> 标签：bash, terminal

我有一个文本文件，我想在其中找到所有 ID:= "abc123" 当它发现我希望它采用 abc123 的值并创建一个新行并设置一个字符串 newId:= "abc123 怎么能我在终端内这样做？

我想用bash，下面是一些例子，找到字符串'“ID”：“，复制值（abc123）并用这个数据换行。

```
"ID": "abc123"
"newID": "abc123" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T16:34:42.090

你可以这样做：

```
sed -e 's/^"ID": "\(.*\)"/&\
"newID": "\1"/' myfile.txt 
```

首先，我将尝试解释搜索匹配项的正则表达式：

1.  `^`匹配行首
2.  `"ID": "`匹配那个确切的字符串
3.  `\(.*\)``*`匹配任意字符 ( )的零个或多个 ( ) 序列`.`。将此表达式放在反斜杠括号之间会创建一个“捕获”，它允许我们将匹配的结果部分存储到辅助变量`\1`中。
4.  `"`匹配双引号字符

当它找到匹配项时，将其替换为：

1.  `&`比赛本身。该运算符是一个辅助变量，表示匹配的内容。
2.  `\<new-line>`反斜杠后跟一个实际的换行符转义一个新行，即。它允许我们在替换中打印一个换行符
3.  `"newId": "`打印确切的字符串
4.  `\1`打印我们捕获的内容，所以它打印我们找到的 ID
5.  `"`打印一个双引号字符。

希望这会有所帮助=)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T16:22:14.657

尝试这样做：

```
sed -r 's@^"ID": "([a-Z0-9]+)"@"newID": "\1"@' file.txt 
```

*   `sed`: 可执行文件
*   `-r`: 扩展模式（不需要反斜杠括号）
*   `s`：我们执行替换，骨架是`s@origin@replacement@`（分隔符可以是任何东西）
*   `^`: 表示*正则表达式中的行首*
*   `( )`: 括号是*捕获*
*   `"newID":`是新字符串的开始
*   `\1`: 是替换字符串的结尾（捕获的字符串）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-18T16:21:39.990

考虑到您的问题非常模糊，我做了一些假设，这些假设将在我的实施中变得显而易见。

输入文件——称之为 t

```
ID="one"
dkkd
ID="two"

ffkjf
ID="three"
ldl 
```

命令在输入文件上运行

```
for line in `cat t`; do newID=`echo $line | grep ID | cut -d= -f2`; if [[ "$newID" != "" ]]; then echo $line >> t2; echo newID=$newID >> t2; else echo $line >> t2; fi; done 
```

输出文件——名称是 t2（从命令中可以看出）

```
ID="one"
newID="one"
dkkd
ID="two"
newID="two"
ffkjf
ID="three"
newID="three"
ldl 
```

基本上，此命令在文件中逐行（在本例中称为 t）查找 ID 行。如果它找到一个，它会获取它的值，打印带有 ID 的原始行，然后打印另一行，紧随其后的是 newID。如果有问题的行没有 ID，那么它只会打印它自己的行。

注意事项：

如果文件中有任何其他行包含“ID”但不是您请求的正常 ID，这将不起作用。

# locking - raspbian wheezy 上的 vlock 无法正常工作

> ID：12958820
> 
> 赞同：1
> 
> 时间：2012-10-18T16:00:12.210
> 
> 标签：locking, debian, raspberry-pi, debian-based, raspbian

我已经在我最近到达的 raspberry-pi（型号 B，但具有 256MB RAM）上设置了 raspbian“wheezy”（更多信息[在这里](http://www.raspbian.org/FrontPage)，和图像文件[在这里](http://www.raspberrypi.org/downloads)）。由于我计划从其他位置通过 SSH 使用它，因此我一直在寻找一种将控制台锁定在实际机器上的方法。

Raspbian 是我正在使用的第一个基于 unix 的操作系统，所以我对它不是很熟悉，但我想我正在寻找类似“vlock”的东西。

我这样安装 vlock：

```
apt-get install vlock 
```

当我现在通过 SSH 从我的 Windows PC vlock 登录到我的 pi 时，工作正常，但是当我尝试在机器本身上使用它时，它显示出一种奇怪的行为。
如果我输入了错误的密码，我会收到通常的消息：

```
vlock: Authentication failure 
```

但在那之后，命令行立即出现，就好像我输入了正确的一样。所以基本上每个人都可以在我的键盘上转动他或她的头来解锁我的 pi。

有谁知道这是否是一个已知的错误（甚至是有意的）？或者有没有可以尝试的 vlock 等价物？

提前致谢。

PS：这是我关于stackoverflow的第一个问题，所以我希望我提供了足够的信息。如果我没有，请随时发表评论/询问。

# java - GUI - 旧式 (Java)

> ID：12958822
> 
> 赞同：0
> 
> 时间：2012-10-18T16:00:18.807
> 
> 标签：java, user-interface, dos

我很绝望：我一直在寻找如何在 Java（如 VIM）中创建“老式图形用户界面”的问题。好吧，但是 VIM 不是用 Java 编写的（很遗憾）。我确信这是可能的，但我真的不知道如何。如果你仍然不知道我打算做什么，这里是 VIM 的截图[http://commons.wikimedia.org/wiki/File:Vim-(logiciel)-console.png](http://commons.wikimedia.org/wiki/File:Vim-(logiciel)-console.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T16:04:41.940

您应该能够使用 java / swing 模仿相同的外观和行为。您不使用按钮，但您正在响应输入的命令，摆动中有全局事件侦听器，这也可以帮助实现这一点。

# extjs - 比较企业应用程序的 Web GUI 框架

> ID：12958826
> 
> 赞同：3
> 
> 时间：2012-10-18T16:00:27.680
> 
> 标签：extjs, wicket, vaadin, google-closure, zk

我需要为我们的私有 Intranet 企业应用程序（tomcat + Java + MySQL）选择一个 web ui 框架，并且我比较了 Google Closure、Apache wicket、Ext JS、ZK 和 Vaadin。我有以下要求。

1）许可证——只要它满足其余的要求，它是否是商业框架都没有关系。

2) 良好的小部件支持 - Ext JS 和 ZK 具有令人印象深刻的小部件集。在 Wicket 中，我们可以创建自己的自定义组件。闭包怎么样？拥有“企业”类型的小部件（例如复杂表、树等）很重要。Vaadin 也有一个很大的列表，但其中大多数是第三方插件，那么它们有多可靠？

3) 良好的 ajax 支持——据我所知，除了 Wicket 之外，所有这些都具有完整的 AJAX 支持。看起来 Wicket 只支持少数组件的 AJAX。是真的吗？

4) 安全性——我知道我们必须在后端实现身份验证和授权。但是我们仍然需要注意浏览器的安全性，并且 GUI 会根据用户角色而改变。因此基于用户登录创建动态 GUI 应该很容易。由于 Wicket 和 ZK 是服务器端的实现，我相信在这些框架中是可以做到的。我在 Ext JS 论坛上看到了关于如何创建动态 GUI 的讨论，因此那里支持它。其他 2 个框架，Closure 和 Vaadin 怎么样？ZK 还提供浏览器安全性，这是一个优势。

5）矢量图形——我们必须画一些图表和某种电路图。Closure 和 Ext JS 支持 Raphael.js。ZK、Wicket 和 Vaadin 怎么样？

6) 谷歌地图 - 我们希望在其中一个 GUI 页面中嵌入交互式谷歌地图。基于 JS 的框架很容易做到。zk 有一个插件。有哪位用过的可以评论一下好用吗？Wicket 也有一个插件，但我读到它无法与服务器交互，这意味着我将无法根据用户选择向服务器发送请求。瓦丁怎么样？

7) 布局管理器 - 拥有一个好的布局管理器是一个加分项。它将有助于创建动态 GUI。Ext JS、vaadin 和 ZK 支持多种布局。wicket 和 Closure 怎么样？

8) 速度——我们不需要超快的 UI 响应，但应该可以接受。我们确实在 GUI 中显示了几千行的表。我读了很多关于 Ext JS 非常慢的文章。其他基于服务器的框架怎么样？往返会导致减速吗？

关于我应该使用哪一个的任何建议？除此以外还有其他框架可以满足这些要求吗？我们主要是 Java 开发人员，所以我们更喜欢基于服务器的框架。但是如果有一个 JS 框架可以满足这些条件并且还允许更多的灵活性，那么我们不介意花一些时间来学习它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T19:17:45.073

我们刚刚为我们的团队评估了一堆库。

尽管有成本和许可，我们还是决定坚持使用 ExtJS，因为它很好，而且是我们所知道的。

我们考虑过 Vaadin，但与 ExtJS 相比，它还没有用于小部件。此外，他们的附加组件很昂贵。不过我喜欢。我喜欢它的纯 Java 方面。

Dojo/Dijit 是我们的 #2，如果我们没有 ExtJS 经验，我们会去那里。他们也有漂亮的模型设计工具。

ExtJS 当然有最好的图表，他们也有用于高端地图支持的 geoext。

众所周知，ExtJS 不是速度恶魔，但它在现代浏览器上很好。

您可能想在您的列表中考虑 KendoUI。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T19:51:58.773

我们曾经做过一些类似的评估，发现每天弹出的新 JavaScript 框架的数量有点高。但是，它们中的大多数不提供对企业级的支持。在这方面，我注意到 Ext JS 非常好，鉴于他们将来试图融合 Sencha Touch 和 Ext JS。相同的代码库也可能在移动触摸屏设备上变得容易获得。

# arm - 在以非 root 用户身份运行的程序上通过 sysfs、mmap 或设备驱动程序控制 GPIO？

> ID：12958827
> 
> 赞同：2
> 
> 时间：2012-10-18T16:00:35.030
> 
> 标签：arm, embedded-linux, gpio

我正在尝试制作 ac 程序来访问嵌入式 linux 系统上的 GPIO，该系统将由非 root 用户运行。我已经可以通过 sysfs (/sys/class/gpio) 访问 GPIO，并制作了一个使用 mmap（通过 /dev/mem/）来控制 GPIO 的简单程序。但是，要写入 /sys/class/gpio/ 和 /dev/mem/，您必须具有 root 权限。在以非 root 用户身份运行的程序中访问 GPIO 的最“正确”或标准方法是什么？
编写设备驱动程序？
授予用户对 /sys/class/gpio/ 的读/写访问权限，以便程序可以使用 sysfs？
或者授予用户对 /dev/mem/ 的读/写访问权限，以便程序可以使用 mmap()？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T21:39:04.613

一种可能的选择是 通过设置该位来创建进程[setuid 。](http://en.wikipedia.org/wiki/Setuid)`s`

例如

`chmod +s myExectuable`

但是，这具有可怕的安全隐患，因为该过程随后以 root 身份运行 - 伴随着所有危险。如果您真的信任用户空间应用程序，那么只有一个选择，即使那样，也是有风险的。

我认为在不破坏内核的情况下更改 sysfs 的默认所有权和权限是不可能的，即使这样也很棘手：sysfs 与 Linux 驱动程序模型的对象模型有着错综复杂的联系。

您可能对`/dev/`.

最终，解决这个问题的正确方法是内核模式驱动程序——您可以在其中实现您希望的任何细粒度安全性（或缺乏安全性）。此外，您可以针对允许用户模式应用程序控制硬件的任何潜在不良影响实施缓解措施。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T20:17:25.860

在 /sys/class/gpio 下授予自定义用户组访问特别需要的节点的权限是一个相当可靠的解决方案 - 它可以完全通过引导脚本完成，不需要内核级编程。

# php - 几个表的 COUNT() 相加和相乘

> ID：12958828
> 
> 赞同：4
> 
> 时间：2012-10-18T16:00:35.920
> 
> 标签：php, mysql, optimization

是否可以添加和乘以 id 相同的不同表的计数？想象：

```
Table_1       Table_2    Table_3
id            id         id
1             1          1
1             2          2
2             2          3
3             2          3
3             2          3
3             3          3 
```

所以最终结果将是这个有 2 列的表：

```
id        (COUNT(Table_1.id) + 2*COUNT(Table_2.id) + 3*COUNT(Table_3.id))
1                                   7
2                                   12
3                                   17 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T16:13:26.193

我不知道我是否理解正确，但请尝试一下，

```
SELECT a.ID,
       a.aa + (2 * b.bb) + (3 * c.cc)
FROM
  (
    SELECT ID, COUNT(*) aa
    FROM table1
    GROUP BY ID
  ) a LEFT JOIN
  (
    SELECT ID, COUNT(*) bb
    FROM table2
    GROUP BY ID
  ) b ON a.ID = b.ID
  LEFT JOIN
  (
    SELECT ID, COUNT(*) cc
    FROM table3
    GROUP BY ID
  ) c ON a.ID = c.ID 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/e1b3a/4)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T16:13:20.893

```
SELECT id, counts_1.number + 2 * counts_2.number + 3 * counts_3.number
FROM
(SELECT id, COUNT(*) AS number FROM Table_1 GROUP BY id) AS counts_1
JOIN
(SELECT id, COUNT(*) AS number FROM Table_2 GROUP BY id) AS counts_2 USING (id)
JOIN
(SELECT id, COUNT(*) AS number FROM Table_3 GROUP BY id) AS counts_3 USING (id) 
```

请注意，此解决方案要求每个 id 在每个表中至少存在一次，否则它将被排除在结果之外。改变这一点需要 MySQL 无法实现的 FULL OUTER JOIN。不过，有一些[方法可以绕过这个限制](http://www.xaprb.com/blog/2006/05/26/how-to-write-full-outer-join-in-mysql/)。

# css - Google Webfonts 在 Firefox、Chrome 和 Opera 中的呈现方式不同

> ID：12958832
> 
> 赞同：6
> 
> 时间：2012-10-18T16:00:45.263
> 
> 标签：css, firefox, google-chrome, formatting, google-webfonts

我在使用 Google webfonts 时遇到了一些问题。

我正在使用名为“Bitter”的 Google Webfont。但在 Firefox 和 Chrome 中，它的呈现方式有所不同。Chrome 和 Opera 似乎以类似的方式呈现它。它并没有太大的不同，但它弄乱了段落的格式和组成。

这是CSS：

```
.small-col h3{

color: #606060;
font-family: 'Bitter', Georgia, "Times New Roman", Times, serif;
font-size: 16px;
line-height: 20px;
margin-bottom: 2px;
letter-spacing: -0.06em;

} 
```

这是我正在谈论的问题的屏幕截图：http: [//i49.tinypic.com/2u46mpi.png](http://i49.tinypic.com/2u46mpi.png)

谁能建议我如何在 Firefox、Chrome 和 Opera 中获得一致的渲染？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-18T16:07:20.553

字体永远不会在所有浏览器中呈现相同的。他们使用不同的渲染引擎——试图让网站在每个浏览器上看起来都一样是徒劳的。

对于您的具体问题，请使用不间断的空格来防止联系和我们分开。

```
<p> ... contact&nbsp;us </p> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-24T19:44:49.220

我对衬线字体有同样的问题。如果您写`"serif"`而不是`serif`（不带“”），Chrome 将呈现与 Firefox 相同的内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T17:00:52.627

浏览器之间的字体渲染可能存在差异，但更常见的是，平台之间存在差异。

但是，这里的差异似乎是由字母间距引起的。更准确地说，Firefox 正确地应用了它，而 WebKit 浏览器则没有。对于`16px`字体大小，`-0.06em`应该会导致超过一个像素，如果您使用检查模式（F12，计算样式），您将看到 Firefox 适用`-1px`，而 Chrome 使用`normal`（即，零）用于`letter-spacing`. Chrome 似乎对字母间距值有一些阈值；让它`-0.065em`改变一些事情。

因此，特别是如果您更喜欢 Chrome 渲染，只需省略`letter-spacing`. 通常最好避免字母间距——字体设计师应该更清楚，如果你同意她或他的选择，请使用另一种字体，而不是试图“修复”字体。

浏览器之间的差异之一是 Firefox 默认应用字距调整，而其他浏览器则没有。但这与示例中的特定文本无关，因为 Bitter 的字距调整表只有成对的大写字母（例如，“VA”看起来会有所不同）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-18T16:06:25.123

看起来firefox渲染的重量有点不同，间距也有点不同。也许也可以尝试以数字方式定义它们，以覆盖任何浏览器默认值。不幸的是，不同的浏览器，尤其是操作系统有时喜欢以不同的方式呈现字体，并且有时会按照自己的规则。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-28T10:50:35.360

尝试使用提供的 javascript 代码而不是 css 或 @import 将 google webfonts 代码添加到您网站的头部。

这解决了我在这个主题上的问题。

# java - 从 onItemSelectedListener 中传递变量

> ID：12958834
> 
> 赞同：0
> 
> 时间：2012-10-18T16:00:50.630
> 
> 标签：java, android, onclicklistener

我在其中声明了不同的变量（temperature_var、size_var、yolk_var），`setOnItemSelectedListeners`并且我想将这些变量传递给另一个`setOnClickListener`按钮。

问题是我无法访问其中的变量（示例`temperature_var`），`setOnClickListener`因此 Eclipse 告诉我在本地声明变量。我不确定如何在`onclick`/中传递这些变量`OnItemSelectedListeners`。完整的代码如下所示：

```
package com.example.eggtimer;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemSelectedListener;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.Spinner;
import android.widget.TextView;
import android.widget.Toast;

public class MainActivity extends Activity implements OnItemSelectedListener {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        // Call Spinners & Buttons
        Spinner temperature = (Spinner) findViewById(R.id.spinnerTemperature);
        Spinner size = (Spinner) findViewById(R.id.spinnerSize);
        Spinner yolk = (Spinner) findViewById(R.id.spinnerYolk);

        // Register Spinners & Buttons
       temperature.setOnItemSelectedListener(this);
       size.setOnItemSelectedListener(this);
       yolk.setOnItemSelectedListener(this);

        // Call Adapters
         ArrayAdapter<String> adapter_temperature = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, getResources().getStringArray(R.array.temperature));
            // Sets the list template
            adapter_temperature.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
         ArrayAdapter<String> adapter_size = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, getResources().getStringArray(R.array.size));
            // Sets the list template
            adapter_size.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
         ArrayAdapter<String> adapter_yolk = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, getResources().getStringArray(R.array.yolk));
            // Sets the list template
            adapter_yolk.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);        

        // Combine Adapters with Spinners   
        temperature.setAdapter(adapter_temperature);
        size.setAdapter(adapter_size);
        yolk.setAdapter(adapter_yolk);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    public void onItemSelected(AdapterView<?> arg0, View v, int arg2,
            long arg3) {
        Toast.makeText(getApplicationContext(), "It works", Toast.LENGTH_LONG).show();

        // Call Adapters again ==> I do not know why this is necessary but otherwise the array adapters can not be found within onItemSelected
         ArrayAdapter<String> adapter_temperature = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, getResources().getStringArray(R.array.temperature));
            // Sets the list template
            adapter_temperature.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
         ArrayAdapter<String> adapter_size = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, getResources().getStringArray(R.array.size));
            // Sets the list template
            adapter_size.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
         ArrayAdapter<String> adapter_yolk = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, getResources().getStringArray(R.array.yolk));
            // Sets the list template
            adapter_yolk.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);   

        // Call next button
         Button next = (Button) findViewById(R.id.buttonNext);

        // Debug Variables
        TextView debug1 = (TextView) findViewById(R.id.textViewDebug1);
        TextView debug2 = (TextView) findViewById(R.id.textViewDebug2);
        TextView debug3 = (TextView) findViewById(R.id.textViewDebug3);

        switch(v.getId()) {
        case R.id.spinnerSize:

            Toast.makeText(getApplicationContext(), "Spinner selected", Toast.LENGTH_LONG).show();

            break;
        default:
            break;
        }

    }

    public void onNothingSelected(AdapterView<?> arg0) {
        // TODO Auto-generated method stub

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T16:14:32.627

如果要在侦听器之外使用它们，请在 onclick 侦听器之外声明变量。

只需将它们放入活动中，所有不同的听众都可以访问它们。

另外，如果他们所做的只是在视图上设置文本，您可以让活动实现 OnItemSelectedListener 并让它们都进入相同的 onItemSelected 方法。然后您可以调用`list.getItemAtPosition()`并将其转换为字符串。它稍微简化了你的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T16:21:36.853

基本上，声明为 final 的字段在第一次设置后无法更改。

因此，为了能够从 OnItemSelectedListeners（和其他侦听器）中获取字段，我建议您选择让 Activity 实现 OnItemSelectedListener，而不是像在代码中那样使用匿名方法。

看看这个例子：[http ://start-jandroid.blogspot.dk/2011/01/android-spinner-example.html](http://start-jandroid.blogspot.dk/2011/01/android-spinner-example.html)

这家伙只使用了一个 Spinner，但正如您所见，Spinner 将其 ItemSelectedListener 设置为活动（this）。

现在在 Activity 的 onItemSelected 监听器中，您应该像这样创建一个开关：

```
@Override
public void onItemSelected(AdapterView<?> parent, View v, int position,
    long id) {
    switch(v.getId) {
    case R.id.mySpinner1:
        // Do stuff when the mySpinner1 has been selected like changing some text on a button like so:
        someString = "myNewString";
        myButton1.setText(someString);
        break;
    case R.id.mySpinner2:
        // Do stuff when the mySpinner2 has been selected like changing some text on another button like so:
        someOtherString = "mybrandNewString";
        myButton2.setText(someOtherString);
        break;
    default:
        break;
    }
} 
```

# python - 类型错误：不能将序列乘以“float”类型的非整数

> ID：12958835
> 
> 赞同：1
> 
> 时间：2012-10-18T16:00:56.083
> 
> 标签：python

我是 python 的新手（和一般的编程），我正在遵循 Python Programming: An Introduction to Computer Science John M. Zelle, Ph.D. 中的示例。版本 1.0rc2 2002 年秋季 显然这有点过时了，我使用的是 Python 3.3，我正在输入练习中的内容，完全按照书中的说明（在 print 语句周围添加 ()），但我一直遇到错误。这是我尝试运行程序时输入的内容和结果的副本。我究竟做错了什么？

```
>>> def main():
    print ("This program illustrates a chaotic function.")
    x=input ("Enter a number between 0 and 1:")
    for i in range(10):
        x= 3.9*x*(1-x)
        print (x)

>>> main()
This program illustrates a chaotic function.
Enter a number between 0 and 1:1
Traceback (most recent call last):
  File "<pyshell#12>", line 1, in <module>
    main()
  File "<pyshell#11>", line 5, in main
    x= 3.9*x*(1-x)
TypeError: can't multiply sequence by non-int of type 'float'
>>> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T16:03:41.440

使用`x=float(input ("Enter a number between 0 and 1:"))`as`input()`在 python 3k 中返回一个字符串 not `float`：

```
>>> def main():
...     print ("This program illustrates a chaotic function.")
...     x=float(input ("Enter a number between 0 and 1:"))
...     for i in range(10):
...         x= 3.9*x*(1-x)
...         print (x)
... 
>>> main()
This program illustrates a chaotic function.
Enter a number between 0 and 1:.45
0.96525
0.13081550625
0.443440957341
0.962524191305
0.140678352587
0.47146301943
0.971823998886
0.106790244894
0.372005745109
0.911108135788 
```

# sql-server-2008 - sql server 2008 在传入的大列表上过滤

> ID：12958838
> 
> 赞同：0
> 
> 时间：2012-10-18T16:01:05.663
> 
> 标签：sql-server-2008, tsql

我遇到了性能问题。我正在尝试根据很长的参数列表从表中进行选择

目前正在使用这个存储过程

```
CREATE PROC [dbo].[GetFileContentsFromTitles]
@MyTitles varchar(max)
AS
SELECT [Title], [Sequence] From [dbo].[MasterSequence]
WHERE charindex(',' + Title + ',', ',' + @MyTitles + ',') > 0; 
```

@MyTitles 可能是一个非常大的数字（目前正在做一个包含 4000 个条目的字符串，以逗号分隔）。有什么建议么？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T16:21:47.070

好的，如果你想要这样的性能，那么你需要使用最好的东西。首先，创建这个用于分割字符串的函数（大约两周前我从 Jeff Moden 那里得到的）：

```
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
 ALTER FUNCTION [dbo].[DelimitedSplit8K]
/**********************************************************************************************************************
 Purpose:
 Split a given string at a given delimiter and return a list of the split elements (items).

 Notes:
 1\.  Leading a trailing delimiters are treated as if an empty string element were present.
 2\.  Consecutive delimiters are treated as if an empty string element were present between them.
 3\.  Except when spaces are used as a delimiter, all spaces present in each element are preserved.

 Returns:
 iTVF containing the following:
 ItemNumber = Element position of Item as a BIGINT (not converted to INT to eliminate a CAST)
 Item       = Element value as a VARCHAR(8000)

 Statistics on this function may be found at the following URL:
 http://www.sqlservercentral.com/Forums/Topic1101315-203-4.aspx

 CROSS APPLY Usage Examples and Tests:
--=====================================================================================================================
-- TEST 1:
-- This tests for various possible conditions in a string using a comma as the delimiter.  The expected results are
-- laid out in the comments
--=====================================================================================================================
--===== Conditionally drop the test tables to make reruns easier for testing.
     -- (this is NOT a part of the solution)
     IF OBJECT_ID('tempdb..#JBMTest') IS NOT NULL DROP TABLE #JBMTest
;
--===== Create and populate a test table on the fly (this is NOT a part of the solution).
     -- In the following comments, "b" is a blank and "E" is an element in the left to right order.
     -- Double Quotes are used to encapsulate the output of "Item" so that you can see that all blanks
     -- are preserved no matter where they may appear.
 SELECT *
   INTO #JBMTest
   FROM (                                               --# & type of Return Row(s)
         SELECT  0, NULL                      UNION ALL --1 NULL
         SELECT  1, SPACE(0)                  UNION ALL --1 b (Empty String)
         SELECT  2, SPACE(1)                  UNION ALL --1 b (1 space)
         SELECT  3, SPACE(5)                  UNION ALL --1 b (5 spaces)
         SELECT  4, ','                       UNION ALL --2 b b (both are empty strings)
         SELECT  5, '55555'                   UNION ALL --1 E
         SELECT  6, ',55555'                  UNION ALL --2 b E
         SELECT  7, ',55555,'                 UNION ALL --3 b E b
         SELECT  8, '55555,'                  UNION ALL --2 b B
         SELECT  9, '55555,1'                 UNION ALL --2 E E
         SELECT 10, '1,55555'                 UNION ALL --2 E E
         SELECT 11, '55555,4444,333,22,1'     UNION ALL --5 E E E E E 
         SELECT 12, '55555,4444,,333,22,1'    UNION ALL --6 E E b E E E
         SELECT 13, ',55555,4444,,333,22,1,'  UNION ALL --8 b E E b E E E b
         SELECT 14, ',55555,4444,,,333,22,1,' UNION ALL --9 b E E b b E E E b
         SELECT 15, ' 4444,55555 '            UNION ALL --2 E (w/Leading Space) E (w/Trailing Space)
         SELECT 16, 'This,is,a,test.'                   --E E E E
        ) d (SomeID, SomeValue)
;
--===== Split the CSV column for the whole table using CROSS APPLY (this is the solution)
 SELECT test.SomeID, test.SomeValue, split.ItemNumber, Item = QUOTENAME(split.Item,'"')
   FROM #JBMTest test
  CROSS APPLY dbo.DelimitedSplit8K(test.SomeValue,',') split
;
--=====================================================================================================================
-- TEST 2:
-- This tests for various "alpha" splits and COLLATION using all ASCII characters from 0 to 255 as a delimiter against
-- a given string.  Note that not all of the delimiters will be visible and some will show up as tiny squares because
-- they are "control" characters.  More specifically, this test will show you what happens to various non-accented 
-- letters for your given collation depending on the delimiter you chose.
--=====================================================================================================================
WITH 
cteBuildAllCharacters (String,Delimiter) AS 
(
 SELECT TOP 256 
        'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789',
        CHAR(ROW_NUMBER() OVER (ORDER BY (SELECT NULL))-1)
   FROM master.sys.all_columns
)
 SELECT ASCII_Value = ASCII(c.Delimiter), c.Delimiter, split.ItemNumber, Item = QUOTENAME(split.Item,'"')
   FROM cteBuildAllCharacters c
  CROSS APPLY dbo.DelimitedSplit8K(c.String,c.Delimiter) split
  ORDER BY ASCII_Value, split.ItemNumber
;
-----------------------------------------------------------------------------------------------------------------------
 Other Notes:
 1\. Optimized for VARCHAR(8000) or less.  No testing or error reporting for truncation at 8000 characters is done.
 2\. Optimized for single character delimiter.  Multi-character delimiters should be resolvedexternally from this 
    function.
 3\. Optimized for use with CROSS APPLY.
 4\. Does not "trim" elements just in case leading or trailing blanks are intended.
 5\. If you don't know how a Tally table can be used to replace loops, please see the following...
    http://www.sqlservercentral.com/articles/T-SQL/62867/
 6\. Changing this function to use NVARCHAR(MAX) will cause it to run twice as slow.  It's just the nature of 
    VARCHAR(MAX) whether it fits in-row or not.
 7\. Multi-machine testing for the method of using UNPIVOT instead of 10 SELECT/UNION ALLs shows that the UNPIVOT method
    is quite machine dependent and can slow things down quite a bit.
-----------------------------------------------------------------------------------------------------------------------
 Credits:
 This code is the product of many people's efforts including but not limited to the following:
 cteTally concept originally by Iztek Ben Gan and "decimalized" by Lynn Pettis (and others) for a bit of extra speed
 and finally redacted by Jeff Moden for a different slant on readability and compactness. Hat's off to Paul White for
 his simple explanations of CROSS APPLY and for his detailed testing efforts. Last but not least, thanks to
 Ron "BitBucket" McCullough and Wayne Sheffield for their extreme performance testing across multiple machines and
 versions of SQL Server.  The latest improvement brought an additional 15-20% improvement over Rev 05\.  Special thanks
 to "Nadrek" and "peter-757102" (aka Peter de Heer) for bringing such improvements to light.  Nadrek's original
 improvement brought about a 10% performance gain and Peter followed that up with the content of Rev 07\.  

 I also thank whoever wrote the first article I ever saw on "numbers tables" which is located at the following URL
 and to Adam Machanic for leading me to it many years ago.
 http://sqlserver2000.databases.aspfaq.com/why-should-i-consider-using-an-auxiliary-numbers-table.html
-----------------------------------------------------------------------------------------------------------------------
 Revision History:
 Rev 00 - 20 Jan 2010 - Concept for inline cteTally: Lynn Pettis and others.
                        Redaction/Implementation: Jeff Moden 
        - Base 10 redaction and reduction for CTE.  (Total rewrite)

 Rev 01 - 13 Mar 2010 - Jeff Moden
        - Removed one additional concatenation and one subtraction from the SUBSTRING in the SELECT List for that tiny
          bit of extra speed.

 Rev 02 - 14 Apr 2010 - Jeff Moden
        - No code changes.  Added CROSS APPLY usage example to the header, some additional credits, and extra 
          documentation.

 Rev 03 - 18 Apr 2010 - Jeff Moden
        - No code changes.  Added notes 7, 8, and 9 about certain "optimizations" that don't actually work for this
          type of function.

 Rev 04 - 29 Jun 2010 - Jeff Moden
        - Added WITH SCHEMABINDING thanks to a note by Paul White.  This prevents an unnecessary "Table Spool" when the
          function is used in an UPDATE statement even though the function makes no external references.

 Rev 05 - 02 Apr 2011 - Jeff Moden
        - Rewritten for extreme performance improvement especially for larger strings approaching the 8K boundary and
          for strings that have wider elements.  The redaction of this code involved removing ALL concatenation of 
          delimiters, optimization of the maximum "N" value by using TOP instead of including it in the WHERE clause,
          and the reduction of all previous calculations (thanks to the switch to a "zero based" cteTally) to just one 
          instance of one add and one instance of a subtract. The length calculation for the final element (not 
          followed by a delimiter) in the string to be split has been greatly simplified by using the ISNULL/NULLIF 
          combination to determine when the CHARINDEX returned a 0 which indicates there are no more delimiters to be
          had or to start with. Depending on the width of the elements, this code is between 4 and 8 times faster on a
          single CPU box than the original code especially near the 8K boundary.
        - Modified comments to include more sanity checks on the usage example, etc.
        - Removed "other" notes 8 and 9 as they were no longer applicable.

 Rev 06 - 12 Apr 2011 - Jeff Moden
        - Based on a suggestion by Ron "Bitbucket" McCullough, additional test rows were added to the sample code and
          the code was changed to encapsulate the output in pipes so that spaces and empty strings could be perceived 
          in the output.  The first "Notes" section was added.  Finally, an extra test was added to the comments above.

 Rev 07 - 06 May 2011 - Peter de Heer, a further 15-20% performance enhancement has been discovered and incorporated 
          into this code which also eliminated the need for a "zero" position in the cteTally table. 
**********************************************************************************************************************/
--===== Define I/O parameters
        (@pString VARCHAR(8000), @pDelimiter CHAR(1))
RETURNS TABLE WITH SCHEMABINDING AS
 RETURN
--===== "Inline" CTE Driven "Tally Table" produces values from 1 up to 10,000...
     -- enough to cover VARCHAR(8000)
  WITH E1(N) AS (
                 SELECT 1 UNION ALL SELECT 1 UNION ALL SELECT 1 UNION ALL 
                 SELECT 1 UNION ALL SELECT 1 UNION ALL SELECT 1 UNION ALL 
                 SELECT 1 UNION ALL SELECT 1 UNION ALL SELECT 1 UNION ALL SELECT 1
                ),                          --10E+1 or 10 rows
       E2(N) AS (SELECT 1 FROM E1 a, E1 b), --10E+2 or 100 rows
       E4(N) AS (SELECT 1 FROM E2 a, E2 b), --10E+4 or 10,000 rows max
 cteTally(N) AS (--==== This provides the "base" CTE and limits the number of rows right up front
                     -- for both a performance gain and prevention of accidental "overruns"
                 SELECT TOP (ISNULL(DATALENGTH(@pString),0)) ROW_NUMBER() OVER (ORDER BY (SELECT NULL)) FROM E4
                ),
cteStart(N1) AS (--==== This returns N+1 (starting position of each "element" just once for each delimiter)
                 SELECT 1 UNION ALL
                 SELECT t.N+1 FROM cteTally t WHERE SUBSTRING(@pString,t.N,1) = @pDelimiter
                ),
cteLen(N1,L1) AS(--==== Return start and length (for use in substring)
                 SELECT s.N1,
                        ISNULL(NULLIF(CHARINDEX(@pDelimiter,@pString,s.N1),0)-s.N1,8000)
                   FROM cteStart s
                )
--===== Do the actual split. The ISNULL/NULLIF combo handles the length for the final element when no delimiter is found.
 SELECT ItemNumber = ROW_NUMBER() OVER(ORDER BY l.N1),
        Item       = SUBSTRING(@pString, l.N1, l.L1)
   FROM cteLen l
; 
```

是的，它很长，但这主要是解释它及其历史的评论。别担心，它是 T-SQL 中最快的（AFAIK 只有 SQLCLR 更快，这不是 T-SQL）。

请注意，它最多只支持 VARCHAR(8000)。如果你真的需要 VARCHAR(MAX)，那么它可以很容易地改成那个，但是 VARCHAR(MAX) 的速度大约是原来的两倍。

现在您可以像这样实现您的过程：

```
CREATE PROC [dbo].[GetFileContentsFromTitles]
@MyTitles varchar(max)
AS
SELECT *
INTO #tmpTitles
FROM dbo.DelimitedSplit8K(@MyTitles, ',')

SELECT [Title], [Sequence] From [dbo].[MasterSequence]
WHERE Title IN (SELECT item FROM #tmpTitles) 
```

如果没有您的 DDL 和一些数据，我无法为您测试，但它应该更快。如果没有，那么我们可能需要在临时表中的 [item] 列上添加一个索引。

* * *

下面是另一个使用 VARCHAR(MAX) 的 split 函数版本：

```
 ALTER FUNCTION [dbo].[DelimitedSplitMax]
/**********************************************************************************************************************
 Purpose:
 Split a given string at a given delimiter and return a list of the split elements (items).

 Notes:
 1\.  Leading a trailing delimiters are treated as if an empty string element were present.
 2\.  Consecutive delimiters are treated as if an empty string element were present between them.
 3\.  Except when spaces are used as a delimiter, all spaces present in each element are preserved.

 Returns:
 iTVF containing the following:
 ItemNumber = Element position of Item as a BIGINT (not converted to INT to eliminate a CAST)
 Item       = Element value as a VARCHAR(MAX)

 Statistics on this function may be found at the following URL:
 http://www.sqlservercentral.com/Forums/Topic1101315-203-4.aspx

-----------------------------------------------------------------------------------------------------------------------
 Other Notes:
 1\. Optimized for VARCHAR(8000) or less.  No testing or error reporting for truncation at 8000 characters is done.
 2\. Optimized for single character delimiter.  Multi-character delimiters should be resolvedexternally from this 
    function.
 3\. Optimized for use with CROSS APPLY.
 4\. Does not "trim" elements just in case leading or trailing blanks are intended.
 5\. If you don't know how a Tally table can be used to replace loops, please see the following...
    http://www.sqlservercentral.com/articles/T-SQL/62867/
 6\. Changing this function to use NVARCHAR(MAX) will cause it to run twice as slow.  It's just the nature of 
    VARCHAR(MAX) whether it fits in-row or not.
 7\. Multi-machine testing for the method of using UNPIVOT instead of 10 SELECT/UNION ALLs shows that the UNPIVOT method
    is quite machine dependent and can slow things down quite a bit.
-----------------------------------------------------------------------------------------------------------------------
 Credits:
 This code is the product of many people's efforts including but not limited to the following:
 cteTally concept originally by Iztek Ben Gan and "decimalized" by Lynn Pettis (and others) for a bit of extra speed
 and finally redacted by Jeff Moden for a different slant on readability and compactness. Hat's off to Paul White for
 his simple explanations of CROSS APPLY and for his detailed testing efforts. Last but not least, thanks to
 Ron "BitBucket" McCullough and Wayne Sheffield for their extreme performance testing across multiple machines and
 versions of SQL Server.  The latest improvement brought an additional 15-20% improvement over Rev 05\.  Special thanks
 to "Nadrek" and "peter-757102" (aka Peter de Heer) for bringing such improvements to light.  Nadrek's original
 improvement brought about a 10% performance gain and Peter followed that up with the content of Rev 07\.  

 I also thank whoever wrote the first article I ever saw on "numbers tables" which is located at the following URL
 and to Adam Machanic for leading me to it many years ago.
 http://sqlserver2000.databases.aspfaq.com/why-should-i-consider-using-an-auxiliary-numbers-table.html
-----------------------------------------------------------------------------------------------------------------------
 Revision History:
 Rev 00 - 20 Jan 2010 - Concept for inline cteTally: Lynn Pettis and others.
                        Redaction/Implementation: Jeff Moden 
        - Base 10 redaction and reduction for CTE.  (Total rewrite)

 Rev 01 - 13 Mar 2010 - Jeff Moden
        - Removed one additional concatenation and one subtraction from the SUBSTRING in the SELECT List for that tiny
          bit of extra speed.

 Rev 02 - 14 Apr 2010 - Jeff Moden
        - No code changes.  Added CROSS APPLY usage example to the header, some additional credits, and extra 
          documentation.

 Rev 03 - 18 Apr 2010 - Jeff Moden
        - No code changes.  Added notes 7, 8, and 9 about certain "optimizations" that don't actually work for this
          type of function.

 Rev 04 - 29 Jun 2010 - Jeff Moden
        - Added WITH SCHEMABINDING thanks to a note by Paul White.  This prevents an unnecessary "Table Spool" when the
          function is used in an UPDATE statement even though the function makes no external references.

 Rev 05 - 02 Apr 2011 - Jeff Moden
        - Rewritten for extreme performance improvement especially for larger strings approaching the 8K boundary and
          for strings that have wider elements.  The redaction of this code involved removing ALL concatenation of 
          delimiters, optimization of the maximum "N" value by using TOP instead of including it in the WHERE clause,
          and the reduction of all previous calculations (thanks to the switch to a "zero based" cteTally) to just one 
          instance of one add and one instance of a subtract. The length calculation for the final element (not 
          followed by a delimiter) in the string to be split has been greatly simplified by using the ISNULL/NULLIF 
          combination to determine when the CHARINDEX returned a 0 which indicates there are no more delimiters to be
          had or to start with. Depending on the width of the elements, this code is between 4 and 8 times faster on a
          single CPU box than the original code especially near the 8K boundary.
        - Modified comments to include more sanity checks on the usage example, etc.
        - Removed "other" notes 8 and 9 as they were no longer applicable.

 Rev 06 - 12 Apr 2011 - Jeff Moden
        - Based on a suggestion by Ron "Bitbucket" McCullough, additional test rows were added to the sample code and
          the code was changed to encapsulate the output in pipes so that spaces and empty strings could be perceived 
          in the output.  The first "Notes" section was added.  Finally, an extra test was added to the comments above.

 Rev 07 - 06 May 2011 - Peter de Heer, a further 15-20% performance enhancement has been discovered and incorporated 
          into this code which also eliminated the need for a "zero" position in the cteTally table. 

 Rev 07a- 18 Oct 2012 - RBarryYoung, Varchar(MAX), because its needed, even though its slower...
**********************************************************************************************************************/
--===== Define I/O parameters
        (@pString VARCHAR(MAX), @pDelimiter CHAR(1))
RETURNS TABLE WITH SCHEMABINDING AS
 RETURN
--===== "Inline" CTE Driven "Tally Table" produces values from 1 up to 100,000,000...
     -- hopefully enough to cover most VARCHAR(MAX)'s
  WITH E1(N) AS (
                 SELECT 1 UNION ALL SELECT 1 UNION ALL SELECT 1 UNION ALL 
                 SELECT 1 UNION ALL SELECT 1 UNION ALL SELECT 1 UNION ALL 
                 SELECT 1 UNION ALL SELECT 1 UNION ALL SELECT 1 UNION ALL SELECT 1
                ),                          --10E+1 or 10 rows
       E2(N) AS (SELECT 1 FROM E1 a, E1 b), --10E+2 or 100 rows
       E4(N) AS (SELECT 1 FROM E2 a, E2 b), --10E+4 or 10,000 rows max
       E8(N) AS (SELECT 1 FROM E4 a, E4 b), --10E+8 or 100,000,000 rows max
 cteTally(N) AS (--==== This provides the "base" CTE and limits the number of rows right up front
                     -- for both a performance gain and prevention of accidental "overruns"
                 SELECT TOP (ISNULL(DATALENGTH(@pString),0)) ROW_NUMBER() OVER (ORDER BY (SELECT NULL)) FROM E8
                ),
cteStart(N1) AS (--==== This returns N+1 (starting position of each "element" just once for each delimiter)
                 SELECT 1 UNION ALL
                 SELECT t.N+1 FROM cteTally t WHERE SUBSTRING(@pString,t.N,1) = @pDelimiter
                ),
cteLen(N1,L1) AS(--==== Return start and length (for use in substring)
                 SELECT s.N1,
                        ISNULL(NULLIF(CHARINDEX(@pDelimiter,@pString,s.N1),0)-s.N1,999999999)
                   FROM cteStart s
                )
--===== Do the actual split. The ISNULL/NULLIF combo handles the length for the final element when no delimiter is found.
 SELECT ItemNumber = ROW_NUMBER() OVER(ORDER BY l.N1),
        Item       = SUBSTRING(@pString, l.N1, l.L1)
   FROM cteLen l
; 
```

但是请注意，我只将其设置为最多计数 100,000,000 个字符。另外，我还没有机会测试它，你应该确保自己测试它。

# c++ - 6 IntelliSense：不存在从“std::string”到“int”的合适转换函数

> ID：12958840
> 
> 赞同：0
> 
> 时间：2012-10-18T16:01:12.857
> 
> 标签：c++, string, validation

嘿，我正在验证一个字符串。

```
string getString(string q)
{
    string input;

    do
    {
        cout << q.c_str() << endl;
        cin >> input;
    } while (!isalpha(input));

    return input;
} 
```

使用`while(!isalpha(input));` 输入时会出现该错误。

谁能帮我这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T16:22:58.523

[另一个答案](https://stackoverflow.com/a/12958948/241631)描述了问题所在，但这是一个使用[标准库中的算法](http://en.cppreference.com/w/cpp/algorithm)而不是自己编写的解决方案（示例需要 C++11 ）

```
bool all_alpha( std::string const& s )
{
  return std::all_of( s.cbegin(), s.cend(), static_cast<int(*)(int)>(std::isalpha) );
} 
```

仅当字符串中的所有字符都是字母时，上述函数才会返回 true。如果您只想禁止数字字符，我会使用稍微不同的功能。

```
bool any_digit( std::string const& s )
{
  return std::any_of( s.cbegin(), s.cend(), static_cast<int(*)(int)>(std::isdigit) );
} 
```

或者

```
bool no_digits( std::string const& s )
{
  return std::none_of( s.cbegin(), s.cend(), static_cast<int(*)(int)>(std::isdigit) );
} 
```

使用这些函数来验证您从用户那里收到的输入。

* * *

如果不能使用C++11的特性，可以修改函数来[`std::find_if`](http://en.cppreference.com/w/cpp/algorithm/find)代替使用，比较`find_if`to的返回值`s.end()`判断成功/失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T16:06:32.143

[isalpha](http://msdn.microsoft.com/en-us/library/xt82b8z8%28v=vs.71%29.aspx)函数将整数作为参数，但您传递给它的是一个`std::string`. 您可以编写这样的函数来测试您的字符串是否仅包含字母字符：

```
bool   noDigitInString(std::string str)
{
  for (int i = 0; i < str.size(); i++)
  {
    if (isdigit(str[i]))
      return false;
   }
  return true;
} 
```

# asp.net-mvc - 我无法锻炼如何在 MVC 中使用 Knockout 的表单中使用部分视图

> ID：12958843
> 
> 赞同：1
> 
> 时间：2012-10-18T16:01:22.473
> 
> 标签：asp.net-mvc, knockout.js

这是我的观点；

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Views/Shared/Site.Master" 
Inherits="System.Web.Mvc.ViewPage<SHP.Models.TrainingListEmployeesViewModel>" %>
<%@ Import Namespace="System.Web.Script.Serialization" %>
<%@ Import Namespace="SHP.Helpers" %>

<asp:Content ID="Content1" ContentPlaceHolderID="TitleContent" runat="server">
    Bulk Training
</asp:Content>

<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">
<form class="employeeListEditor" data-bind="submit: save">
    <fieldset>
    <legend>Allocate or cancel training for the selected employees</legend>
    <table>
        <tr>
            <td style="text-align: right;">Course Name</td>
            <td><%: Html.EditorFor(model => model.TrainingName)%></td>
        </tr>
        <tr>
            <td style="text-align: right;">Description (optional)</td>
            <td><%:
           Html.TextAreaFor(
               model => model.TrainingDescription, new { maxlength = "255", style = "width:400px;height:100px;" })%></td>
        </tr>
    </table>
    <%: Html.EditorFor(model => model.ClientEmployeeSelector)%>
    <button id="btnAdd" data-bind="click: addEmployee">Add</button><button data-bind="click: clearEmployee">Clear</button>
    <div id="displayEmployees" style="margin-top:10px;" data-bind="visible: employees().length > 0">
        <table id="employeeDataTable" class="groupBorder">
            <thead>
                <tr>
                    <th></th>
                    <th>Employee</th>
                </tr>
            </thead>
            <tbody data-bind="foreach: employees">
                <tr>
                    <td>
                        <a href="#" data-bind="click: $parent.removeEmployee">Remove</a>
                        <input type="hidden" data-bind="value: SearchTextId"/>
                    </td>
                    <td><span data-bind="text: SearchText"></span></td>
                </tr>               
            </tbody>
        </table>
    </div>

    <div id="employeeCalendar">
        <% if(Model.Cvm != null)
           {%>
            <% Html.RenderPartial("Calendar", Model.Cvm); %>
            <div><span style="margin-top: 10px"></span></div>
            <div style="margin-top:20px;">
                <div style="display: inline; margin-right:20px; padding:5px;">
                    <%:Html.MakePopupForm<SHP.Controllers.LeaveController>(o => o.TrainingSingleDate(), refreshOnSuccess: true)%>
                    <%:Html.PopupFormActionLink<SHP.Controllers.LeaveController>(o => o.TrainingSingleDate(), "Add a single date")%>
                </div>
            </div>    
            <% if (TempData["SuccessMessage"].ToSafeString().Length > 0)
               {%>
                    <p class="success" style="padding-top: 20px;"><%: TempData["SuccessMessage"].ToSafeString() %></p>
            <% } %>     
        <% }%>
    </div>
    </fieldset>
</form>

    <script type="text/javascript">
        function Employee(id, text) {
            var self = this;
            self.SearchTextId = ko.observable(id);
            self.SearchText = ko.observable(text);
        }
        $(document).ready(function () {         
            $('#SearchText').attr("data-bind", "value: autocompleteSearchText");
            $('#SearchTextId').attr("data-bind", "value: autocompleteSearchTextId");
            $("#TrainingName").attr("data-bind", "value: trainingName");
            $("#TrainingDescription").attr("data-bind", "value: trainingDescription");

            var initialData = <%= new JavaScriptSerializer().Serialize(Model) %>;
            var autocompleteData = { "autocompleteSearchTextId": 0, "autocompleteSearchText": null };
            function viewModel() {
                var self = this;
                self.employees = ko.observableArray(initialData.EmployeeList);
                self.trainingName = ko.observable(initialData.TrainingName);
                self.trainingDescription = ko.observable(initialData.TrainingDescription);
                self.autocompleteSearchText = ko.observable(autocompleteData.autocompleteSearchText);
                self.autocompleteSearchTextId = ko.observable(autocompleteData.autocompleteSearchTextId);
                self.removeEmployee = function(employee) {
                    $("#btnAdd").after("<span class='error'>Please wait for calendar update ...</span>");
                    self.employees.remove(employee);
                    self.save();
                };
                self.clearEmployee = function() {
                    self.autocompleteSearchText('');
                };
                self.addEmployee = function() {
                    $("#btnAdd").after("<span class='error'>Please wait for calendar update ...</span>");
                    self.employees.push(new Employee(self.autocompleteSearchTextId(), self.autocompleteSearchText()));
                    self.autocompleteSearchText('');
                    self.save();
                };
                self.save = function() {
                    var list = ko.toJS(self.employees);
                    var name = ko.toJS(self.trainingName);
                    var description = ko.toJS(self.trainingDescription);
                    ko.utils.postJson(location.href, { employees: list, trainingName: name, trainingDescription: description });
                };
            }   
            ko.applyBindings(new viewModel());
        });
    </script>
</asp:Content> 
```

您可能会注意到我在此视图中有一个弹出表单。另外，我想将employeeCalendar div中的所有代码放在部分视图中。由于弹出窗口，我必须确保在我的控制器中将我的 Post 方法重定向到我的 Get 方法，以便当弹出数据输入完成并取消此视图的日期时，我不会从窗口收到不需要的重新发送消息。做这些重定向的问题是我得到一个看起来不愉快的整页回发。所以我宁愿通过 Ajax 从局部视图中刷新我的 claendar。那么我该怎么做呢？这是我的控制器

```
 [HttpGet]
    [Authorize(Roles = "Administrator, Trainer, ManagerAccounts, ManagerIT")]
    public ActionResult BulkTraining()
    {
        if (SessionObjects.Tlevm == null)
        {
            return this.View(new TrainingListEmployeesViewModel());
        }

        return this.View(new TrainingListEmployeesViewModel(
            SessionObjects.Tlevm.EmployeeList,
            SessionObjects.TrainingName,
            SessionObjects.TrainingDescription));
    }

    [HttpPost]
    [Authorize(Roles = "Administrator, Trainer, ManagerAccounts, ManagerIT")]
    public ActionResult BulkTraining([FromJson] IEnumerable<ClientEmployeeSelector> employees, string trainingName, string trainingDescription)
    {
        // Items stored in Session used when saving the training dates for the employee
        // via the popup window
        SessionObjects.TrainingName = trainingName.JsonTrim();
        SessionObjects.TrainingDescription = trainingDescription.JsonTrim();
        SessionObjects.EmployeeIdList = employees.Select(x => x.SearchTextId).ToList();
        SessionObjects.EmployeeNameList = SessionObjects.EmployeeIdList.Count > 0
                        ? Employee.GetNameList(SessionObjects.EmployeeIdList)
                        : string.Empty;
        SessionObjects.Tlevm = new TrainingListEmployeesViewModel(
            employees.ToList(),
            SessionObjects.TrainingName,
            SessionObjects.TrainingDescription);
        return this.RedirectToAction("BulkTraining");
    } 
```

# ruby-on-rails - 重构控制器动作

> ID：12958845
> 
> 赞同：0
> 
> 时间：2012-10-18T16:01:27.493
> 
> 标签：ruby-on-rails, controller, refactoring

例如：

```
class Post < ActiveRecord::Base
  belongs_to :article
end 

class Article < ActiveRecord::Base
  has_many :posts
end 
```

我需要在文章中更改状态，当我删除最后一个帖子或将最后一个帖子中的文章更改为 nil 时，我有两个具有共同逻辑的操作：

```
 def destroy
    post = Post.find(params[:id])
    article = post.article
    post.destroy
    if article && !article.posts.present?
      if article.status == 2 
        article.status = 1
        article.save
        notice = " and it was last post for article #{article.title} and article status change to empty!"
      end
    end
    redirect_to(posts_path(:by_status=>:all), :notice => "Post was successfully deleted #{notice}")
  end

  def remove_from_article
    post = Post.find(params[:id])
    article = post.article
    post.article = nil
    post.save
    if article && !article.posts.present?
      if article.status == 2 
        article.status = 1
        article.save
        notice = " and it was last post for article #{article.title} and article status change to empty!"
      end
    end
    redirect_to(posts_path(:by_status=>:all), :notice => "Post was successfully updated #{notice}")
  end 
```

如何重构此代码，我应该在过滤器之后还是在过滤器周围使用，如果是，我如何将文章传递给它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T16:35:35.963

您可以使用 before_destroy 回调，例如：

```
class Post < AR::Base
  belongs_to :article

  before_destroy :change_article_status

  private
  def change_article_status
    article = self.article
    # Status update logic here
  end
end 
```

您可以使用`self`来获取您的模型并遍历您想要的任何关系。在这种情况下，它正在获取文章。

# c# - 方法中包含常用条件的 Azure 表存储范围查询

> ID：12958848
> 
> 赞同：7
> 
> 时间：2012-10-18T16:01:30.737
> 
> 标签：c#, azure, azure-storage, azure-table-storage

我在我的应用程序中经常出现这样的情况，我创建了一个查询来获取 partitionkey 是常量但 rowkey 应该在词法范围内的所有实体（例如，只有以某个前缀开头的行）：

```
//query to get all entities in partition "KnownPartition" where RowKey starts with "Prefix_"
CloudTableQuery<MyEntity> query =
    (from e in tableServiceContext.CreateQuery<MyEntity>(tableName)
     where e.PartitionKey == "KnownPartition"
           && e.RowKey.CompareTo("Prefix_") > 0
           && e.RowKey.CompareTo("Prefix`") <= 0 // ` is '_' + 1
     select e).AsTableServiceQuery(); 
```

我必须使用 CompareTo，因为此类查询不支持 StartsWith 等字符串函数。这行得通，但是条件很难阅读并且重复了很多次。因此，与其使用这种难以阅读的条件编写大量查询，我更愿意创建一个“内联”它的函数：

```
public static Boolean HasPrefix(this String rowKey, String prefix)
{
    return rowKey.CompareTo(prefix + '_') > 0 && rowKey.CompareTo(prefix + '`') <= 0;
}

CloudTableQuery<MyEntity> query =
    (from e in tableServiceContext.CreateQuery<MyEntity>(tableName)
     where e.PartitionKey == "KnownPartition" && e.RowKey.HasPrefix("Prefix")
     select e).AsTableServiceQuery(); 
```

但是当我运行它时，我从 Azure 收到一个关于我的功能不受支持的异常。有没有办法写这个以便支持它？毕竟，我使用的条件与有效的查询完全相同，只是包装在一个函数中......

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-23T17:56:14.857

这是凯文答案的概括。它做同样的事情，但适用于任何前缀字符串，而不仅仅是大卫在原始问题中询问的特定情况。

```
public static Expression<Func<MyEntity, bool>> HasPrefix(String prefix) 
{ 
    char lastChar = prefix[prefix.Length - 1];
    char nextLastChar = (char)((int)lastChar + 1);
    string nextPrefix = prefix.Substring(0, prefix.Length - 1) + nextLastChar;

    return e => e.RowKey.CompareTo(prefix) >= 0 && e.RowKey.CompareTo(nextPrefix) < 0;
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-18T17:52:48.877

如果将条件分解为函数，则函数需要返回表达式树而不是布尔值。我不知道 LINQ 查询语法是否支持这一点，但您可以使用方法语法如下：

```
public static Expression<Func<MyEntity, bool>> HasPrefix(String prefix) 
{ 
    return e => e.RowKey.CompareTo(prefix + '_') > 0 && e.RowKey.CompareTo(prefix + '`') <= 0;
}

CloudTableQuery<MyEntity> query =
    (from e in tableServiceContext.CreateQuery<MyEntity>(tableName)
    where e.PartitionKey == "KnownPartition"
    select e)
    .Where(HasPrefix("Prefix"))
    .AsTableServiceQuery(); 
```

# vim - vim：将连续行与当前行左对齐

> ID：12958851
> 
> 赞同：10
> 
> 时间：2012-10-18T16:01:44.697
> 
> 标签：vim, indentation

很多时候，当我粘贴到 vim 中时，我会得到级联的缩进，修复起来非常令人沮丧。结果将如下所示

```
This is line one
    This is line two
        This is line three
            This is line four 
```

我想知道是否有一种方法可以告诉 vim 将第 2 到第 4 行与第 1 行对齐。如果第一行文本从光标位置 6 开始，有没有办法说“让接下来的十行也从位置 6 开始？”

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-18T16:06:11.727

要更正这种级联缩进，您可以使用`=`. 选择一个视觉块并输入`=`或提供一个动作：`=4j`重新缩进接下来的 4 行。

`paste`您可以通过在粘贴前设置来避免级联缩进： `:set paste`. 粘贴后`:set nopaste`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-18T16:06:31.813

粘贴文本时可以使用`:set paste`来避免这种情况。您可以使用 . 设置范围的缩进级别`left`。

```
:<range>left3 
```

例如

```
.,+4left3 
```

将接下来 4 行的缩进设置为 3。

注意：范围可以在可视模式下定义，只需选择一些行，`S-v`然后按`:left4`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-18T16:06:34.793

贴前做`:set paste`，贴后做`:set nopaste`。

或者使用 Vim 的内置粘贴命令和剪贴板寄存器：

```
"+p (paste after the cursor or below the line)
"+P (paste before the cursor or above the line) 
```

见`:help 'paste'`和`:help registers`。

# symfony - 如何将动态数量的输入值传递给 Symfony2.1 中的控制器

> ID：12958854
> 
> 赞同：5
> 
> 时间：2012-10-18T16:02:01.333
> 
> 标签：symfony, controller, symfony-2.1

假设在**Symfony2.1**中有一个控制器，它接收一个数值列表，例如

```
public function showAction($el1, $el2, $el3){...} 
```

我假设第*i*个*$eli*是一个数字 id。因此，我将在 Twig 模板中呈现该控制器，如下所示：

```
{% render 'AcmeBundle:BundleName:show' with {'el1':'1', 'el2':'5',  'el3':'7'}  %} 
```

传递一个将它们全部分组的唯一值（如数组）会很好，例如

```
public function showAction($els){...} 
```

其中*$els*是一个值数组。当然，我想这是不可能的，即使控制器是在 Twig 模板中呈现的。

我发现让输入更具动态性的唯一方法是传递一个唯一值，该值将所有 id-input 值分组并用令牌分隔它们。例如：

```
{% render AcmeBundle:BundleName:show with {'els': '1_5_7'} %} 
```

这是最好的方法还是我可以做得更好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T11:12:34.203

为什么不只传递一组参数？

**控制器：**

```
public function showAction(array $els)
{
    // ...

    return ['els' => $els];
} 
```

**看法：**

```
{% render 'AcmeBundle:Demo:show' with {'els': {'el1': 1, 'el2': 5, 'el3': 7}} %} 
```

或者如果你想传递一个数字索引数组：

```
{% render 'AcmeBundle:Demo:show' with {'els': [1, 5, 7]} %} 
```

这样，您可以传入任意数量的参数。

# delphi - 为什么我不能在接收数组参数的函数中使用 SetLength？

> ID：12958858
> 
> 赞同：9
> 
> 时间：2012-10-18T16:02:18.727
> 
> 标签：delphi, parameters

我正在尝试使用以下函数来设置作为 var 参数的动态数组的长度。当我尝试编译代码时只有一个错误：

[dcc64 错误] lolcode.dpr(138): E2008 不兼容类型

```
function execute(var command : array of string) : Boolean;
begin
  // Do something
  SetLength(command,0);
end; 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-18T16:15:15.543

You are suffering from a common and fundamental mis-understanding of array parameters. What you have here:

```
function execute(var command: array of string): Boolean; 
```

is not in fact a [*dynamic array*](http://docwiki.embarcadero.com/RADStudio/XE3/en/Structured_Types#Dynamic_Arrays). It is an [*open array parameter*](http://docwiki.embarcadero.com/RADStudio/XE3/en/Parameters_%28Delphi%29#Open_Array_Parameters).

Now, you can pass a dynamic array as a parameter to a function that receives an open array. But you cannot modify the length of the dynamic array. You can only modify its elements.

If you need to modify the length of the dynamic array, the procedure must receive a dynamic array. In modern Delphi the idiomatic way to write that is:

```
function execute(var command: TArray<string>): Boolean; 
```

If you are using an older version of Delphi that does not support generic arrays then you need to declare a type for the parameter:

```
type
  TStringArray = array of string;
....
function execute(var command: TStringArray): Boolean; 
```

* * *

How should you choose whether to use open array or dynamic array parameters? In my opinion you should always use open arrays if possible to do so. And if not possible, then use dynamic arrays as a final resort. The reason being a function with an open array parameter is more general than one with a dynamic array parameter. For example, you can pass a constant sized array as an open array parameter, but not if the function receives a dynamic array.

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-18T16:03:27.647

定义一个类型

```
type
  TStringArray = array of string; 
```

你可以做

```
function Execute(var StringArray: TStringArray): boolean;
begin
  // Do something
  SetLength(StringArray, 0);
end; 
```

# paypal - Paypal IPN 侦听器问题

> ID：12958859
> 
> 赞同：1
> 
> 时间：2012-10-18T16:02:19.633
> 
> 标签：paypal, listener, host, paypal-ipn

我目前的 Paypal IPN 监听器有问题，并且每天都收到来自 paypal 的以下电子邮件：

“请检查您处理 PayPal 即时付款通知 (IPN) 的服务器。发送到以下 URL 的 IPN 失败：

[http://www.mysales.ie/create_promo_listener.php](http://www.mysales.ie/create_promo_listener.php) "

我有一个演示站点，它使用户能够创建广告并完美运行（IPN 没有问题），但是我正在开发的正确站点存在这个问题（它位于不同的主机上）。

我已经联系了主机提供商，他们说这不是他们的问题。我已经尝试过 php 错误日志，但找不到任何问题。我在两个站点上都有完全相同的代码，所以我无法理解问题所在。

```
<?php include 'ipn_handler.class.php';

/**
* Logs IPN messages to a file.
*/
class Logging_Ipn_Handler extends IPN_Handler
{
    public function process(array $post_data)
    {
            $data = parent::process($post_data);

            if($data === FALSE)
            {
                    header('HTTP/1.0 400 Bad Request', true, 400);
                    exit;
            }

           $random_number = $_POST['custom'];

            file_put_contents( 'logs/listenerTest.txt', "listener = " .              $random_number, FILE_APPEND);
            header("location:create_promo_creator.php?random_number=" .            $random_number);

    }
 }

date_default_timezone_set('Europe/Oslo');

$handler = new Logging_Ipn_Handler();
$handler->process($_POST); 
```

我一直试图找到问题的根源很长时间，但无法弄清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T03:50:04.413

似乎您的 $data = parent::process($post_data); 方法返回 FALSE。

您的代码中是否有任何日志记录工具来验证这一点？

简单的解决方法是返回 200 响应以保持 PayPal 的 IPN 系统正常运行，并记录错误以供进一步审查。

# javascript - 以编程方式更改 html 选择下拉菜单后，onchange 不会触发

> ID：12958863
> 
> 赞同：9
> 
> 时间：2012-10-18T16:02:28.617
> 
> 标签：javascript, html, dojo

我在 HTML 中有一个选择

```
<select id="league" name="league"> 
```

我正在监听我的javascript中的变化。

```
var league = dojo.byId("league");
dojo.connect(league, "onchange", function (evt) { //do stuff } 
```

哪个工作正常。但是我有一个链接，我可以单击它更新选择：

```
<a href=javascript:void(0) onclick="updateSelection(league);"> League </a> 
```

该链接在使用以下函数更新 select 的选定值时起作用。

```
function updateSelection(NewLeague){
dojo.byId('league').value = NewLeague;  // works
dojo.byId('league').onChange;   //this isnt working
//dojo.byId('league').onChange();  //this throws: TypeError: dojo.byId("league").onChange is not a function 
} 
```

我的问题是，正如我阅读其他堆栈帖子一样，以编程方式更新值不会触发 onChange，因此我需要在代码中调用 onchange（如上所示）。根据内联评论， onChange 没有被触发或引发错误。我的第一个想法是它与监听 onChange 的 dojo.Connect 有关，但我没有找到任何说明我**不能**这样做的信息，也没有任何解释如何解决它。

有任何想法吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-18T16:06:59.817

选择 onchange 不会触发程序更改，您需要自己触发它`league.onchange();`

正如@Greg 所指出的，调用应该是小写的。

此外，我不知道 dojo 是否有触发方法，但在 jQuery 中，这将作为`jQuery('#league').trigger('change')`.

根据您的 dojo 版本，您可能还需要检查：[http ://dojotoolkit.org/reference-guide/1.8/dojo/connect.html](http://dojotoolkit.org/reference-guide/1.8/dojo/connect.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T16:32:24.873

您是否尝试过使用普通 js 通过它的 id 调用选择？

```
document.getElementById('league').onchange.call(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T16:39:24.277

正如其他人所说，您需要自己触发事件，仅设置值不会这样做。请参阅[如何在 JavaScript 中触发事件的代码？](https://stackoverflow.com/questions/2490825/how-to-trigger-event-in-javascript)以跨浏览器的方式查看。

# java - 在“Service”中获取对象“FragmentManager”

> ID：12958868
> 
> 赞同：3
> 
> 时间：2012-10-18T16:02:42.177
> 
> 标签：java, android, service

是否可以在“服务”中获取对象“FragmentManager”？是否可以从“服务”中的“活动”传递对象“片段管理器”。

PS：包括非官方支持的功能。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-18T16:08:43.760

> 是否可以在“服务”中获取对象“FragmentManager”？

不，对不起。

> 是否可以从“服务”中的“活动”传递对象“片段管理器”。

那将是一个非常糟糕的主意。

如果您希望您的服务更新您的 UI，请记住*可能没有 UI*。欢迎用户按他们的 BACK 或 HOME 按钮退出您的 UI，即使您的服务正在运行。

还要记住，它可能是*不同的 UI*。例如，当用户将设备从纵向旋转到横向时，您的活动（和片段，默认情况下）将被销毁并重新创建。或者，用户可以点击某些东西，将不同的活动带到前台，并且该活动有自己的片段和管理器。

因此，要让您的服务更新您的 UI，您需要使用支持这种解耦操作的通信路径，例如：

*   发送广播
*   使用发送广播`LocalBroadcastManager`
*   通过 a 更新内容`ContentProvider`，活动使用`CursorLoader`或`ContentObserver`收到有关数据更改的通知
*   等等

# android - 自定义进度可绘制有时不显示

> ID：12958870
> 
> 赞同：6
> 
> 时间：2012-10-18T16:02:46.200
> 
> 标签：android, progress-bar

我有一个非常奇怪的问题 - 我为进度条定义了一个可绘制的自定义进度，并且

有时它显示，有时它不显示。

我尝试清理我的项目，重新启动 Eclipse，甚至重新启动计算机。

它仍然发生。

这是进度可绘制的xml：

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">

<item android:id="@android:id/background">
<shape
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle">

    <corners android:radius="5dp" />
    <gradient
        android:startColor="#6f7754"
        android:endColor="#858762"
        android:angle="90"/>
</shape>
</item>

<item android:id="@android:id/secondaryProgress">
<clip>
    <shape 
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:shape="rectangle">

        <corners android:radius="5dp" />
        <gradient
                android:startColor="#ffba00"
                android:endColor="#af6c03"
                android:angle="90"/>
    </shape>
</clip>
</item>

<item android:id="@android:id/progress">
<clip>
    <shape 
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:shape="rectangle">

        <corners
            android:radius="5dp" />
        <gradient
            android:startColor="#ffba00"
            android:endColor="#af6c03"
            android:angle="90" />
    </shape>
</clip> 
```

这是我使用它的xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:gravity="center"
android:layout_marginBottom="2dp"
android:background="@drawable/quick_action_item_btn">

<ImageView
    android:id="@+id/icon" 
    android:layout_width="21dp" 
    android:layout_height="21dp"
    android:scaleType="centerInside"/>

<ProgressBar 
    android:id="@+id/progress"
    android:layout_width="20dp"
    android:layout_height="4dp"
    android:layout_marginTop="2dp"
    style="@android:style/Widget.ProgressBar.Horizontal"
    android:progressDrawable="@drawable/achievement_progress_bar"/>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-08T11:56:37.513

try with this

```
android:indeterminateDrawable="@drawable/yourXML" 
```

it is working for me..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T05:13:14.573

它对我来说工作正常。只需将您的 indeterminateDrawable 设置为您的 custum xml 文件。应该没问题..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T12:26:54.093

也许这是一个与这个类似的问题...... [SharedPreferences.onSharedPreferenceChangeListener 没有被一致地调用](https://stackoverflow.com/questions/2542938/sharedpreferences-onsharedpreferencechangelistener-not-being-called-consistently)

自定义 xml 是否定义为活动的变量？如果没有，可能它正在被垃圾收集器收集。我的建议是使其成为类（活动类）的字段变量。

# linux - 没有所有权限的 webdav 文件转到 lost+found

> ID：12958872
> 
> 赞同：5
> 
> 时间：2012-10-18T16:02:47.290
> 
> 标签：linux, liferay, webdav

我正在尝试将 liferay 6.0.6 文档库（安装在 linux 中并在 tomcat 上运行）连接到通过 webdav 共享的外部安装文件夹。

我正在使用 mount.dafvs 在 linux 中挂载文件夹，但是每当我通过 sftp 创建文件或将文件添加到已挂载的文件夹时，它的文件夹都没有 777 权限，而且 95% 的时间它只是转到lost+found 文件夹，留下一个空文件。所以我可以看到从门户上传的文件，但我无法从我的 linux 机器上传文件。

但是，如果我将文件的权限更改为 777，然后我再次编辑或者我再次从 sftp 上传替换它，文件就在那里，也可以从门户网站看到/下载！

知道为什么会发生这种情况，以及如何使这种共享与双方的 R/W 选项一起工作？

# ms-access - MS Access - 拆分数据库上的“文件已在使用”错误

> ID：12958873
> 
> 赞同：6
> 
> 时间：2012-10-18T16:02:48.507
> 
> 标签：ms-access

我在 Windows 7 上的 MS Access 2010 中有一个拆分数据库。

后端位于网络驱动器上的文件夹中，只有某些人具有写入权限；每个人都有读取权限。

每个用户都有自己的前端副本存储在他们的本地机器上。

BE 和 FE 都设置为对所有用户共享而不是独占打开。

如果具有只读权限的用户在另一个具有只读权限的用户打开时尝试继续，他们可以正常工作。

如果具有只读权限的用户尝试在具有写入权限的用户打开它时继续，他们会收到一条消息说“文件已在使用中”并且他们无法打开数据库。

如果具有写入权限的用户尝试打开数据库，而具有只读权限的用户将其打开，则该用户也会以只读方式打开该数据库。

拆分数据库的所有用户都需要完全访问权限吗？我真的不希望每个人都能够进行编辑。我能做些什么来让它发挥作用？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-19T02:10:31.607

这个问题肯定与只读客户端无法管理`.laccdb`锁定文件这一事实有关，因为它们对数据库文件所在的共享文件夹没有写权限。

当数据库以共享模式打开时，每个客户端都会创建或更新锁文件。
很可能由于只读客户端无法创建锁定文件，它们回退到相信自己处于独占模式。
一旦完全访问的客户端创建了锁文件，任何后续客户端都会尝试使用它，而只读客户端将失败，因为它们无法更新锁。

有关锁定文件的一些文档：[.ldb 文件简介](http://support.microsoft.com/kb/299373/EN-US)

如果您想解决您的问题，您必须授予所有客户端对该文件夹的完全访问权限，但您可以将对`.accdb`数据库文件本身的访问权限限制为不应修改其中数据的客户端组。

或者，如果您不使用 Access 2007/2010 功能，您可以恢复为使用旧`.mdb`文件作为后端并使用其旧式组安全功能。

最终，如果您真的想控制访问，您可能需要在客户端内推出自己的安全方案，强制用户登录（或使用他们的机器身份）并更新表单的数据编辑属性取决于该特定用户/机器被允许做什么。

# android - 定义和设置元素属性时，Android 应用程序崩溃

> ID：12958875
> 
> 赞同：0
> 
> 时间：2012-10-18T16:02:51.333
> 
> 标签：android, android-asynctask

我的应用程序崩溃了。我究竟做错了什么？

我在 fetchsSchools 类中使用 AsyncTask。

```
public class fetchSchools extends AsyncTask<Void, Void, ArrayList<String>>{     
@Override
protected ArrayList<String> doInBackground(Void... arg0) {
    ArrayList<School> schools = new ArrayList<School>();
    ArrayList<String> schoolNames = new ArrayList<String>();
     ... code omitted for conciseness...

   return schoolNames;   
} 
```

在这个类中，我有一个 onPost Execute，如果我注释掉我的应用程序运行的 cls2 行，我的代码就会到达这个位置：

```
public void onPostExecute(ArrayList<String> schoolNames) {
MainActivity cls2=new MainActivity();
cls2.updateSpinner(schoolNames);
cls2.switchScreens();
} 
```

上面会在 MainActivity 中触发这两个大纲，这会使应用程序崩溃：

```
public void updateSpinner(ArrayList<String> schoolNames) {     
Spinner schoolSpinner = (Spinner)findViewById(R.id.school_spinner);
schoolSpinner.setAdapter(new ArrayAdapter<String>(this,     
android.R.layout.simple_spinner_dropdown_item, schoolNames));
}

public void switchScreens() {    
ProgressBar progressBar1 = (ProgressBar)findViewById(R.id.progressBar1);   
progressBar1.setVisibility(View.GONE);  
TextView loading_label = (TextView)findViewById(R.id.loading_label);     
loading_label.setVisibility(View.GONE);
} 
```

Eclipse 没有显示任何编码错误。我是否正确地创建和处理这些变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T16:34:58.803

尽管您还没有给出 MainActivity 和 logcat 的代码。看到你的代码看起来像是 MainActivity 扩展了 Activity。如果是这样你不能打电话

```
MainActivity cls2=new MainActivity(); 
```

MainActivity 必须`android framework`使用适当的上下文进行初始化。自己调用构造函数不会调用Activity的任何生命周期方法。

所以后续所有使用 Context 的调用都会失败，尤其是`findViewByid`

你需要做`startActivity`而不是你正在做的事情。

编辑：在实例化和分配时在 Asynctask 中创建一个构造函数传递 MainActivity，如下所示并删除`new MainActivity`行

```
public class fetchSchools extends AsyncTask<Void, Void, ArrayList<String>>{  
       MainActivity cls2;
       fetchSchools(MainActivity activity){
         cls2 = activity;
      }   
@Override
protected ArrayList<String> doInBackground(Void... arg0) {
    ArrayList<School> schools = new ArrayList<School>();
    ArrayList<String> schoolNames = new ArrayList<String>();
     ... code omitted for conciseness...

   return schoolNames;   
}

public void onPostExecute(ArrayList<String> schoolNames) {
cls2.updateSpinner(schoolNames);
cls2.switchScreens();
} 
```

}

在 MainActivity 中，您调用

```
new fetchSchools(mMainActivity).execute(param); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T18:06:31.430

如果这是与您的主要活动不同的课程，那么您正试图从哪里找到ViewById？您可能会在 onPostExecute 的第一行得到 NullPointerException，即：

```
cls2.updateSpinner(schoolNames); 
```

因为你试图在这个方法中找到一个视图。但是您没有任何包含您要查找的视图的父视图。

所以我建议你把这个 fetchSchools 类作为你的 mainActivity 的私有内部类。因此您将能够在全局范围内找到这些视图并根据需要进行设置。

# c++ - 当 img(roi) 没有返回正确的值时如何正确提取 ROI

> ID：12958878
> 
> 赞同：0
> 
> 时间：2012-10-18T16:02:56.963
> 
> 标签：c++, opencv

我过去做过这个并且效果很好，但是我的功能很奇怪。我正在尝试提取图像的 roi。这是我的代码：

```
cv::Rect roi(x - 1, y - 1, 3, 3);
cv::Mat patch_t(current_frame, roi);

cout << (int)current_frame.at<unsigned char>(y - 1, x - 1) << endl;
cout << (int)patch_t.at<unsigned char>(0, 0) << endl; 
```

这两个 cout 调用应该返回相同的值，但事实并非如此。一个返回 150，而另一个返回 37。这显然是行不通的。在不复制图像的情况下，我还能如何提取图像的 ROI？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T16:39:06.747

你的输入框是彩色的吗？

您的代码仅在`current_frame`CV_8UC1 或 CV_8SC1 类型矩阵时才有效。

用于`current_frame.at<Vec3b>(i, j)`访问 RGB 像素。另请注意，有时灰度图像被读取为 3 通道矩阵。

# sql-server - 性能：在 INSERT & UPDATE 上触发 1 个或在 INSERT && UPDATE 上各触发 2 个触发器

> ID：12958881
> 
> 赞同：1
> 
> 时间：2012-10-18T16:03:03.293
> 
> 标签：sql-server, triggers, dml

我有一个场景，我需要为更新和插入 DML 操作实现触发器。但是，我正在修复是在一个触发器中实现更新和插入，还是分别为插入和删除创建 2 个触发器......

另外，请注意，在我的情况下，我可能需要一次执行多个插入命令......

请建议我在性能方面有更好的选择，因为代码优化是我项目中的一个大问题（我的意思是我的客户..!!））..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T16:11:00.880

我建议创建一个触发器，以便为 UPDATE 创建一个单独的触发器，而 INSERT 将成为维护问题。关于代码优化，没有这样的性能问题。
从性能优化的角度来看，您可以检查类似`IF EXISTS`.

# orbeon - 使用 AVT 禁用 xforms:upload 控件

> ID：12958894
> 
> 赞同：0
> 
> 时间：2012-10-18T16:03:48.070
> 
> 标签：orbeon, xforms

我有一个 Orbeon 应用程序，它显示一个测试结果表，在这个表中是上传控件，使用户能够上传分析所需的数据。我设置这个表我需要`xforms:upload`根据我的初始化数据中的字段禁用控件。

我试图使用 AVT 在代码`required="true"`在实例数据中找到的任何地方调用 display:none 样式 - 但据我所知，这对 Form Runner 显示的输出没有影响。有人可以帮忙吗？

我的 XML 数据和代码如下 - 请查看`xforms:upload`我的问题所在位置的标记 ( `display: none`)：

**样本输出：**

```
+------+------+---------------------+------------------------+--------+
| Test | Case |     EB Log          |     COM Log            | Status |   
+------+------+---------------------+------------------------+--------+
| 022  | 01   | Upload              |                        |        |
+------+------+---------------------+------------------------+--------+
| 022  | 02   | Upload              |                        |        |
+------+------+---------------------+------------------------+--------+
| 032  | 01   |                     | Upload                 |        |
+------+------+---------------------+------------------------+--------+
| 032  | 02   | Upload              | Upload                 |        |
+------+------+---------------------+------------------------+--------+
| 032  | 03   | Upload              |                        |        |
+------+------+---------------------+------------------------+--------+
| 032  | 04   | Upload              |                        |        |
+------+------+---------------------+------------------------+--------+ 
```

**样本数据：**

```
<test_view>
    <test id="022">
        <case id="01"><eb_log required="true" filename="" mediatype="" size=""></eb_log><com_log required="false" filename="" mediatype="" size=""></com_log><status>PASS</status></case>
        <case id="02"><eb_log required="true" filename="" mediatype="" size=""></eb_log><com_log required="false" filename="" mediatype="" size=""></com_log><status>FAIL</status></case>
    </test>
    <test id="032">
        <case id="01"><eb_log required="false" filename="" mediatype="" size=""></eb_log><com_log required="true" filename="" mediatype="" size=""></com_log><status>none</status></case>
        <case id="02"><eb_log required="true" filename="" mediatype="" size=""></eb_log><com_log required="true" filename="" mediatype="" size=""></com_log><status>none</status></case>
        <case id="03"><eb_log required="true" filename="" mediatype="" size=""></eb_log><com_log required="false" filename="" mediatype="" size=""></com_log><status>Run</status></case>
        <case id="04"><eb_log required="true" filename="" mediatype="" size=""></eb_log><com_log required="false" filename="" mediatype="" size=""></com_log><status>Run</status></case>
    </test>
</test_view> 
```

**测试代码：**

```
<xhtml:html xmlns="http://www.w3.org/1999/xhtml"
xmlns:xhtml="http://www.w3.org/1999/xhtml"
xmlns:xforms="http://www.w3.org/2002/xforms"
xmlns:fr="http://orbeon.org/oxf/xml/form-runner" 
xmlns:xs="http://www.w3.org/2001/XMLSchema"
xmlns:ev="http://www.w3.org/2001/xml-events"
xmlns:xxforms="http://orbeon.org/oxf/xml/xforms">
    <xhtml:head>
        <xhtml:title>XForms Log Analyser</xhtml:title>

        <xforms:model>
            <!-- <xforms:instance id="tests-instance" src="test-view.xml" xmlns=""/> -->
            <!-- <xforms:submission id="tests-submission" serialization="none" method="get" resource="http://localhost:8080/orbeon/log-analyser/test-view.xml" replace="instance" instance="tests-instance"/>  -->
            <!-- <xforms:bind nodeset="instance('tests-instance')" type="xs:anyURI"/> -->

                <!-- Load tests when the XForms engine is ready -->
                <xforms:send ev:event="xforms-ready" submission="list-submission"/>

                <!-- Autosave instance data if any value changes in the instance data -->
                <xforms:send ev:event="xxforms-value-changed" ev:observer="tests-instance" submission="save-submission"/>           

                <!-- Instance that contains all the books -->
                <xforms:instance id="tests-instance">
                <swate_view>
                    <test id="">
                        <case id=""><eb_log required="" filename="" mediatype="" size=""></eb_log><com_log required="" filename="" mediatype="" size=""></com_log><status></status></case>
                    </test>
                </swate_view>
                </xforms:instance>

                <xforms:bind nodeset="instance('tests-instance')"/>

                <!-- Submission to load/reset the default data -->
                <xforms:submission id="reset-submission" serialization="none"
                    method="get" action="oxf:/apps/log-analyser/test-view.xml"
                    replace="instance" instance="tests-instance"/>

                <!-- Submission to get the document containing all the tests -->
                <xforms:submission id="list-submission" serialization="none"
                    method="get" action="/exist/rest/db/orbeon/log-analyser/tests.xml"
                    replace="instance" instance="tests-instance"/>

                <!-- Submission to save the document containing all the tests -->
                <xforms:submission id="save-submission" ref="instance('tests-instance')"
                    action="/exist/rest/db/orbeon/log-analyser/tests.xml"
                    method="put" replace="none">
                    <xforms:message ev:event="xforms-submit-error" level="modal">An error occurred while saving!</xforms:message>
                </xforms:submission>

        </xforms:model>
    </xhtml:head>
    <xhtml:body>
        <fr:datatable paginated="true" rowsPerPage="5" maxNbPagesToDisplay="7">
            <thead>
                <xhtml:tr>
                    <xhtml:th fr:sortable="true" fr:resizeable="true">Test</xhtml:th>
                    <xhtml:th fr:sortable="true" fr:resizeable="true">Case</xhtml:th>
                    <xhtml:th fr:sortable="true" fr:resizeable="true">EB Log</xhtml:th>
                    <xhtml:th fr:sortable="true" fr:resizeable="true">Com Log</xhtml:th>
                    <xhtml:th fr:sortable="true" fr:resizeable="true">Status</xhtml:th>
                </xhtml:tr>
            </thead>
            <tbody>
            <xhtml:tr repeat-nodeset="test/case">
                <xhtml:td>
                    <xforms:output ref="../@id"/>
                </xhtml:td>
                <xhtml:td>
                    <xforms:output value="@id"/>
                </xhtml:td>
                <xhtml:td> 
                    <!-- <xforms:output value="if(eb_log[@required='true']) then ('Upload') else ('-')"/> -->
                    **<xforms:upload style="{if(eb_log[@required='false']) then ('display: none')}" ref="eb_log"><xforms:filename ref="@filename"/><xforms:mediatype ref="@mediatype"/><xxforms:size ref="@size"/></xforms:upload>**
                </xhtml:td>
                <xhtml:td>
                    <!-- <xforms:output value="if(com_log[@required='true']) then ('Upload') else ('-')"/> -->
                    **<xforms:upload style="{if(com_log[@required='false']) then ('display: none')}" ref="com_log"><xforms:filename ref="@filename"/><xforms:mediatype ref="@mediatype"/><xxforms:size ref="@size"/></xforms:upload>**
                </xhtml:td>
                <xhtml:td>
                    <xforms:output ref="status/text()"/>
                </xhtml:td>
            </xhtml:tr>
            </tbody>
        </fr:datatable>
        <xforms:submit submission="save-submission">
            <xforms:label>Save</xforms:label>
        </xforms:submit>
        <xforms:submit submission="reset-submission">
            <xforms:label>Reset</xforms:label>
        </xforms:submit>
    </xhtml:body>
</xhtml:html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T17:55:39.923

一个常见的技巧是使用该`ref`属性并在其上放置一个条件。因此，您的上传将如下所示：

```
<xforms:upload ref="com_log[@required = 'false']" ...> 
```

这是有效的，因为如果条件是`false`，则`ref`属性指向空序列。并且具有指向空序列的绑定的控件会自动变得不相关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T10:36:08.430

下面的片段似乎在我的表中工作（首先删除了我在`xforms:upload`标签中定义的样式），因为我已经在利用 Yahoo！Form Runner 中的 UI 库。

我仍然很想知道是否有官方方法可以禁用`xforms:upload`控件的显示。

```
<xhtml:td class="if{(eb_log[@required='false']) then 'yui-dt-hidden' else ''}"> 
```

# prolog - Prolog 中的模式匹配类型

> ID：12958897
> 
> 赞同：3
> 
> 时间：2012-10-18T16:03:56.107
> 
> 标签：prolog, pattern-matching

假设我有一个如下所示的列表：

```
List=[alpha(1,2),beta(3,4),gamma(4,1)] 
```

好的，所以我想在这里进行某种模式匹配......我知道我可以做到：

```
Try=alpha(Y,Z).
    Try=alpha(1,2)
    Y=1
    Z=2 
```

但我想做例如：

```
Try=X(Y,Z)
    X=alpha
    Y=1
    Z=2 
```

...这样我就可以将数据传递给另一个谓词：

```
targetPredicate(Type,Value1,Value2):-
    Type=alpha
    ... 
```

然后用它做一些事情，而不必为我可能遇到的每种类型创建一个帮助谓词：

```
helpPredicate(Input):-
    Input=alpha(Value1, Value2),
    targetPredicateAlt(Value1, Value2).

helpPredicate(Input):-
    Input=beta(Value1, Value2),
    targetPredicateAlt(Value1, Value2).

helpPredicate(Input):-
    Input=gamma(Value1, Value2),
    targetPredicateAlt(Value1, Value2). 
```

有什么办法可以解决这个问题，还是我注定要使用大量的帮助谓词？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T16:10:44.337

你可以使用[univ](http://www.swi-prolog.org/pldoc/doc_for?object=%28=..%29/2)谓词`=../2`：假设你有`Try=alpha(1,2)`，那么

```
Try =..[Name, X, Y]. 
```

将产生 Name = alpha，X = 1，Y = 2。

# layout - JavaFX – 从布局中动态排除/包含父级及其所有子级

> ID：12958898
> 
> 赞同：3
> 
> 时间：2012-10-18T16:03:56.087
> 
> 标签：layout, parent, javafx

**背景/上下文：**

我有一个 HBox 作为父节点和许多子节点（按钮、文本字段、标签……）。HBox 是其他容器的子容器 (BorderPane/VBox/Grid)

**我的问题：**

如何从布局中动态删除/排除父级（HBox）及其所有子级？

我正在寻找 Node 上的一些三态属性（例如在 Microsoft WPF 中）：

*Visible* – 可见并参与布局

*Collapsed* – 不可见且不参与布局（也适用于其子级）

*隐藏*- 不可见但参与布局

[http://msdn.microsoft.com/en-us/library/ms590101.aspx](http://msdn.microsoft.com/en-us/library/ms590101.aspx)

JavaFX 提供哪些选项？

**到目前为止我的解决方案：**

```
hBox.setManaged(false); 
```

*   这项工作仅适用于 HBox，它的孩子仍然存在

root.getChildren().remove(hBoxTop);

root.getChildren().add(hBoxTop);

*   好吧，这看起来可以工作..，但例如在 root 是 BorderPane 的情况下，一旦我删除/添加和删除 HBox，它后面的空间仍然未使用。我已经尝试过 requestLayout() 但 id 不会强制 thr rrot 填充它。我错过了什么吗？这是解决这个问题的正确方法吗？

**编辑：**

好吧，我得到了这个工作。

可以通过以下方式动态删除和添加此特定情况：

*消除：*

```
root.setTop(null); 
```

*添加：*

```
root.setTop(hBoxTop); 
```

当我在移除时没有调用 setTop(null) 时，BorderPane 仍然为 HBox 保留空间（即使在从其子项中移除之后）。

恕我直言：它不是很好的模型，因为它是特定于父容器的。例如，如果我将 BorderPane 更改为 VBox a，我也必须更改这些方法。对于 VBox，在子集合上删除/添加有效，但我需要记住索引，以便在调用 add 后 HBox 出现在同一位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-20T09:20:31.223

使用`root.setTop(null)`不是一个好主意，因为正如您所说，它特定于 BorderPane。

我认为最好的解决方案是使用：

```
root.getChildren().remove(yourPane); 
```

并使用布局方法根据需要放置其他孩子。但也许您不应该首先将 BorderPane 与您希望在应用程序中的行为一起使用。

请注意，您也可以`root.getChildren().clear()`删除所有组件并将其再次添加到您的布局中，但有所不同。

# wordpress - 仅适用于 wordpress 网站的某些 url 重定向到 https

> ID：12958906
> 
> 赞同：2
> 
> 时间：2012-10-18T16:04:24.013
> 
> 标签：wordpress, apache, .htaccess, mod-rewrite, https

我在一个 wordpress 网站上工作。并且刚刚安装了 SSL。它已正确安装，但我只想将访问者重定向到某些页面的 https url。我还想强制浏览器对其他页面使用 http。

我知道这可以用 .htaccess 来完成，并且也尝试了几件事。但无法根据需要得到这个。我是处理 .haccess 重写规则的新手，找不到可以指导我的文档。

例如，我需要强制浏览器对这两个 url 使用 https： `http://www.example.com/sells/payment/` `http://www.example.com/customer/login/`

并且所有其他网址都只能强制使用普通的http。我需要写什么样的规则？

**更新 1**

我还有一个将非 www url 重定向到 www url 的规则，这可能与这些规则冲突。这是我将所有非 www url 重定向到 www url 的方法。

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^example\.com$ [NC]
RewriteRule ^(.*)$ http://www.example.com/$1 [R=301,L] 
```

我面临的问题是，在应用 https 规则后，它被重定向到[https://www.www.example.com/sells/payment/](https://www.www.example.com/sells/payment/)这是一个错误的 URL。

有什么办法解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T16:15:38.673

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteRule ^(sells/payment|customer/login)/ - [E=MY_URL:1]

RewriteCond %{HTTPS} off
RewriteCond %{ENV:MY_URL} 1
RewriteRule ^ https://www.%{HTTP_HOST}%{REQUEST_URI} [R=302,L]

RewriteCond %{HTTPS} on
RewriteCond %{ENV:MY_URL} !=1
RewriteRule ^ http://www.%{HTTP_HOST}%{REQUEST_URI} [R=302,L] 
```

### 更新：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteRule ^(sells/payment|customer/login)/ - [E=MY_URL:1]

RewriteCond %{HTTPS} off
RewriteCond %{ENV:MY_URL} 1
RewriteRule ^ https://%{HTTP_HOST}%{REQUEST_URI} [R=302,L]

RewriteCond %{HTTPS} on
RewriteCond %{ENV:MY_URL} !=1
RewriteRule ^ http://%{HTTP_HOST}%{REQUEST_URI} [R=302,L] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T16:10:59.523

这是我在我的项目中一直使用的，我有与你自己相似的用例：

```
RewriteCond %{SERVER_PORT}s ^(443(s)|[0-9]+s)$
RewriteRule ^(.+)$ - [env=askapache:%2]

# redirect urls with index.html to folder
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /([^/]+/)*index\.html\ HTTP/
RewriteRule ^(([^/]+/)*)index\.html$ http%{ENV:askapache}://%{HTTP_HOST}/$1 [R=301,L]

# change // to /
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /(.*)//(.*)\ HTTP/ [NC]
RewriteRule ^.*$ http%{ENV:askapache}://%{HTTP_HOST}/%1/%2 [R=301,L] 
```

这是我找到解决方案的网站的摘录，所以我不能相信它： [Smart HTTP and HTTPS .htaccess Rewrite](http://www.askapache.com/htaccess/http-https-rewriterule-redirect.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T16:11:22.493

我还没有尝试过，但你能像处理 cononcial URL 一样处理它吗？

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^example.com/your-page
RewriteRule (.*) https://www.example.com/your-page [R=301,L] 
```

# mysql - 查找重复记录并在 concat 字符串中给出结果

> ID：12958908
> 
> 赞同：4
> 
> 时间：2012-10-18T16:04:35.587
> 
> 标签：mysql, sql, group-concat

我有 2 个表，其中一些记录是相同的（id 除外）

表 A：

```
id, numA, codeA
6, 34, aa 
7, 34, bb 
8, 567, bc 
```

表 B

```
id, numB, codeB 
1, 34, aa 
2, 34, bb 
3, 567, bc 
```

我需要在表 B 上运行一个查询，它将检查表 A 中是否存在给定的 num 和 code 组合，并以这种格式给出结果：

```
num, concat code
34, (aa,bb) 
567, (bc) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T16:08:55.820

加入两个表并使用`GROUP_CONCAT`

```
SELECT  a.NumA, GROUP_CONCAT(DISTINCT b.codeB)
FROM    table1 A
        INNER JOIN table2 b
          on a.numA = b.numB
GROUP BY a.NumA 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/87ad9/2)

# android - 在 Android 上的 Facebook 应用程序之间切换？

> ID：12958913
> 
> 赞同：2
> 
> 时间：2012-10-18T16:04:50.653
> 
> 标签：android, facebook, mobile

我正在一个 android 应用程序中集成一些 facebook 功能。为了测试，我自己制作了一个 facebook 应用程序，但客户很可能会创建自己的 fb 应用程序，并希望我在测试完成后将我的应用程序的信息与他们的交换。

由于对于 android，您需要在 facebook 应用程序仪表板中为您的 android 应用程序提供签名/哈希密钥，这是否意味着我的 android 应用程序始终与同一个 facebook 应用程序绑定，或者将来可以轻松交换凭据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T17:42:32.453

您可以将您的签名/哈希密钥放在任意数量的 Facebook 应用程序中，所以应该没有问题。此外，facebook 应用程序可以拥有尽可能多的 android 签名/哈希密钥，并且可以随时更换。在仪表板中尝试以确认。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T17:49:49.000

只要应用程序仍在开发中并且尚未发布到 Android Play 商店，您始终可以更改`APP_ID`应用程序中的值以将您的值替换为客户端的 fb 应用程序 ID。只要您在同一台机器上构建应用程序，签名/哈希密钥就应该相同。

因此，当您的应用程序为客户端准备就绪时，

1.  让他们告诉您应用程序 ID，以便您可以在代码中替换它
2.  向他们提供您用于签署应用程序的 android 密钥哈希（确保您使用正确的密钥而不是 android 调试密钥，如果您的应用程序的此版本正在应用商店上线），以便他们可以将其放入他们的Facebook 上的应用仪表板。

我认为这就是解决您的问题所需的所有步骤。让我知道这是否有帮助。

# python - 为什么使用替换函数时，反向引用在 Python 的 re.sub 中不起作用？

> ID：12958914
> 
> 赞同：5
> 
> 时间：2012-10-18T16:04:52.143
> 
> 标签：python, regex, python-2.7

`re.sub`在 Python 2.7 中，以下示例使用了一个简单的反向引用：

```
re.sub('-{1,2}', r'\g<0> ', 'pro----gram-files') 
```

它按预期输出以下字符串：

```
'pro-- -- gram- files' 
```

我希望以下示例是相同的，但事实并非如此：

```
def dashrepl(matchobj):
    return r'\g<0> '
re.sub('-{1,2}', dashrepl, 'pro----gram-files') 
```

这给出了以下意外输出：

```
'pro\\g<0> \\g<0> gram\\g<0> files' 
```

为什么这两个示例给出不同的输出？我是否错过了解释这一点的文档中的某些内容？有什么特别的原因表明这种行为比我预期的更可取吗？有没有办法在替换函数中使用反向引用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T16:14:36.247

由于有更简单的方法可以实现您的目标，您可以使用它们。

正如您已经看到的，您的替换函数获取一个匹配对象作为它的参数。

这个对象有一个`group()`可以代替使用的方法：

```
def dashrepl(matchobj):
    return matchobj.group(0) + ' ' 
```

这将给出你的结果。

* * *

但你是完全正确[的 - 文档](http://docs.python.org/library/re.html#re.sub)有点令人困惑：

他们描述了这个`repl`论点：

> `repl`可以是字符串或函数；如果它是一个字符串，则处理其中的任何反斜杠转义。

和

> If`repl`是一个函数，每次出现不重叠的模式时都会调用它。该函数采用单个匹配对象参数，并返回替换字符串。

您*可以*将此解释为函数返回的“替换字符串”也适用于反斜杠转义的处理。

但是由于这个处理只针对“它是一个字符串”的情况来描述，它变得更加清晰，但乍一看并不明显。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-18T16:08:29.477

如果您将函数传递给`re.sub`，它允许您将匹配项替换为从函数返回的字符串。基本上，`re.sub`根据您传递的是函数还是字符串，使用不同的代码路径。是的，这实际上是可取的。考虑要替换with 的匹配项和`foo`with的`bar`匹配项的`baz`情况`qux`。然后你可以把它写成：

```
repdict = {'foo':'bar','baz':'qux'}
re.sub('foo|baz',lambda match: repdict[match.group(0)],'foo') 
```

你可以争辩说你可以在 2 次通过中做到这一点，但你不能这样做，如果`repdict`看起来像`{'foo':'baz','baz':'qux'}`

而且我认为您不能通过反向引用来做到这一点（至少不容易）。

# mysql - 无法在 MAC OS X 10.7.5 中启动 mysql

> ID：12958915
> 
> 赞同：0
> 
> 时间：2012-10-18T16:04:56.253
> 
> 标签：mysql, macos

我通过位于 MySQL 站点中的包安装了 MySQL。

我改变了这个目录：

```
/usr/local/mysql-5.5.28-osx10.5-x86/data 
```

为了`_mysql`

但是，当我尝试执行 mysqld start 时，我收到以下错误和警告：

```
121018 18:04:17 [Warning] Can't create test file /usr/local/mysql-5.5.28-osx10.5-x86/data/homer.lower-test
121018 18:04:17 [Warning] Can't create test file /usr/local/mysql-5.5.28-osx10.5-x86/data/homer.lower-test
121018 18:04:17 [Note] Plugin 'FEDERATED' is disabled.
mysqld: Can't find file: './mysql/plugin.frm' (errno: 13)
121018 18:04:17 [ERROR] Can't open the mysql.plugin table. Please run mysql_upgrade to create it.
121018 18:04:17 InnoDB: The InnoDB memory heap is disabled
121018 18:04:17 InnoDB: Mutexes and rw_locks use InnoDB's own implementation
121018 18:04:17 InnoDB: Compressed tables use zlib 1.2.3
121018 18:04:17 InnoDB: Initializing buffer pool, size = 128.0M
121018 18:04:17 InnoDB: Completed initialization of buffer pool
121018 18:04:17  InnoDB: Operating system error number 13 in a file operation.
InnoDB: The error means mysqld does not have the access rights to
InnoDB: the directory.
InnoDB: File name ./ibdata1
InnoDB: File operation call: 'create'.
InnoDB: Cannot continue operation. 
```

关于可能发生的事情的任何提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T16:09:06.307

最简单的做法是安装下载时获得的系统偏好设置插件，并使用它启动/停止 MySQL。您可以将其设置为在系统重新启动时自动启动。

# ruby - 厨师服务器无法启动

> ID：12958922
> 
> 赞同：0
> 
> 时间：2012-10-18T16:05:16.073
> 
> 标签：ruby, ubuntu, gem, chef-infra

试图让 chef-server 启动我收到以下错误：

```
[root@SCM: /etc/chef]$ /etc/init.d/chef-server-webui start
 * Starting chef-server-webui                                                                          
/usr/lib/ruby/1.8/rubygems/remote_fetcher.rb:14: uninitialized constant Gem::UserInteraction (NameError)
        from /usr/local/lib/site_ruby/1.8/rubygems/custom_require.rb:36:in `gem_original_require'
        from /usr/local/lib/site_ruby/1.8/rubygems/custom_require.rb:36:in `require'
        from /usr/lib/ruby/1.8/rubygems/spec_fetcher.rb:4
        from /usr/local/lib/site_ruby/1.8/rubygems/custom_require.rb:36:in `gem_original_require'
        from /usr/local/lib/site_ruby/1.8/rubygems/custom_require.rb:36:in `require'
        from /usr/lib/ruby/1.8/chef/provider/package/rubygems.rb:31
        from /usr/local/lib/site_ruby/1.8/rubygems/custom_require.rb:36:in `gem_original_require'
        from /usr/local/lib/site_ruby/1.8/rubygems/custom_require.rb:36:in `require'
        from /usr/lib/ruby/1.8/chef/providers.rb:59
        from /usr/local/lib/site_ruby/1.8/rubygems/custom_require.rb:36:in `gem_original_require'
        from /usr/local/lib/site_ruby/1.8/rubygems/custom_require.rb:36:in `require'
        from /usr/lib/ruby/1.8/chef.rb:25
        from /usr/local/lib/site_ruby/1.8/rubygems/custom_require.rb:36:in `gem_original_require'
        from /usr/local/lib/site_ruby/1.8/rubygems/custom_require.rb:36:in `require'
        from /usr/sbin/chef-server-webui:42 
```

这是我的宝石清单

```
*** LOCAL GEMS ***

bundler (1.0.18)
bunny (0.7.6)
chef (0.10.4)
chef-server-webui (0.10.4)
coderay (1.0.0)
daemons (1.1.4)
erubis (2.7.0)
eventmachine (0.12.10)
extlib (0.9.15)
haml (3.1.3)
highline (1.6.2)
json (1.5.2, 1.4.6)
merb-assets (1.1.3)
merb-core (1.1.3)
merb-haml (1.1.3)
merb-helpers (1.1.3)
merb-param-protection (1.1.3)
mime-types (1.16)
mixlib-authentication (1.1.4)
mixlib-cli (1.2.2)
mixlib-config (1.1.2)
mixlib-log (1.3.0)
moneta (0.6.0)
net-ssh (2.1.4)
net-ssh-gateway (1.1.0)
net-ssh-multi (1.1)
ohai (0.6.4)
polyglot (0.3.2)
rack (1.3.3)
rake (0.9.2)
rest-client (1.6.7)
ruby-openid (2.1.8)
systemu (2.4.0)
thin (1.2.11)
treetop (1.4.10)
uuidtools (2.1.2)
yajl-ruby (1.0.0) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T16:14:05.017

这是针对此问题的[Chef bugtracker](http://tickets.opscode.com/browse/CHEF-2138)问题。简短总结：Chef 升级后似乎从不同的地方获取了不同版本的 RubyGems。

重新升级到 RubyGems 似乎有所帮助。

# python - 在 Django admin 中，包含 auth.User 作为内联

> ID：12958923
> 
> 赞同：7
> 
> 时间：2012-10-18T16:05:17.287
> 
> 标签：python, django, django-models, django-admin

我已经看到了很多相反的问题，其中有以下内容：

```
class UserProfileInline(admin.StackedInline):
    model = UserProfile
    can_delete = False
    verbose_name_plural = 'profile'

class NewUserAdmin(UserAdmin):
    inlines = (UserProfileInline, )

admin.site.unregister(User)
admin.site.register(User, NewUserAdmin) 
```

我想做的是相反的，但我看不到让它工作。这是我的代码不起作用。

```
from django.contrib import admin
from django.contrib.auth.admin import UserAdmin
from django.contrib.auth.models import User
from myapp.models import SpecialUserType

class UserInline(admin.StackedInline):
    model = User
    can_delete = False

class IncludeUserAdmin(admin.ModelAdmin):
    inlines = (UserInline,)

admin.register(SpecialUserType, IncludeUserAdmin) 
```

我怎样才能使这项工作`User`成为管理员的内联`SpecialUserType`？

我得到的错误是：

```
<class 'django.contrib.auth.models.User'> has no ForeignKey to <class 'students.models.SpecialUserType'> 
```

这是有道理的，因为显然`OneToOneField`是在`SpecialUserType`模型中而不是在`User`. 但是我怎样才能让它逆转`OneToOneField`呢？

（我知道这似乎是一件不寻常的事情，但有充分的理由我想以这种方式设置管理员，而不是相反。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-05T21:25:52.807

不幸的是，它无法完成。我曾经几次遇到过这个问题。

正如错误消息所说，内联模型必须有一个指向主模型的 ForeignKey（或 OneToOneField）。

正如其他人所提到的，我发现子类化 User 对我非常有帮助：

```
class UserProfile(User):
    user = OneToOneField(User, parent_link=True)
    # more fields, etc 
```

# c - 在带引号的字符串中展开宏

> ID：12958925
> 
> 赞同：39
> 
> 时间：2012-10-18T16:05:21.487
> 
> 标签：c, macros, c-preprocessor, c-strings

> **可能重复：**
> [创建字符串的 C 宏](https://stackoverflow.com/questions/798221/c-macros-to-create-strings)

我有一个接受一个类型参数的函数`char*`，例如`f("string");`
如果字符串参数是在函数调用中由动态定义的，如何在字符串主体中扩展宏？

例如：

```
#define COLOR #00ff00
f("abc COLOR"); 
```

相当于

```
f("abc #00ff00"); 
```

而是不执行扩展，并且函数按字面意思接收`abc COLOR`.

特别是，我需要将宏扩展为完全`\"#00ff00\"`，以便将这个带引号的标记与传递给的字符串参数的其余部分连接`f()`起来，包括引号；也就是说，预处理器必须完成他的工作并欢迎编译器将代码`f("abc COLOR");`从`f("abc \"#00ff00\"");`

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-10-18T16:06:40.520

你不能在字符串中展开宏，但你可以写

```
#define COLOR "#00ff00"

f("abc "COLOR); 
```

请记住，这种连接是由 C 预处理器完成的，并且只是连接纯字符串的功能，而不是变量左右。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-18T16:07:35.757

```
#define COLOR "#00ff00"
f("abc "COLOR); 
```

# winforms - 处理 MDI 子表单

> ID：12958926
> 
> 赞同：1
> 
> 时间：2012-10-18T16:05:22.157
> 
> 标签：winforms, garbage-collection, dispose, mdi

根据[msdn](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.close.aspx)

> 表单未在 Close 上处理的两种情况是： (1) 它是多文档界面 (MDI) 应用程序的一部分，并且表单不可见；(2) 您已经使用 ShowDialog 显示了表单。在这些情况下，您将需要手动调用 Dispose 以将表单的所有控件标记为垃圾回收。

对于第一种情况，我该如何处理？如果我手动处理表单的 this.dispose() 并在 dispose 中设置断点（在表单的设计器文件中找到），则永远不会到达断点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T16:13:58.720

从不隐藏 MDI 子窗口开始，这没什么意义。如果您确实需要隐藏它们，请调用它们的 Dispose() 方法而不是它们的 Close() 方法。如果没有隐藏，Dispose() 也会关闭窗口。

# git - git 子模块需要来自超级项目的提交？

> ID：12958927
> 
> 赞同：0
> 
> 时间：2012-10-18T16:05:27.647
> 
> 标签：git

我有一个 git 项目存储库，其中包含其他两个项目作为子模块。当对子模块中的文件进行修改时，当移出“超级项目”时，子模块的所有者--- git status 显示

```
modified:   on_of_my_submodules (new commits) 
```

...我觉得这很奇怪，也很烦人...任何时候在这些子模块之一中进行提交时，我都必须离开目录并提交它吗？这真的是每个人在使用子模块时所做的工作流程吗？

我很想尝试将子模块添加到我的超级项目的 .gitignore 中，并且只知道在克隆超级项目时，有必要进入所有子模块并从那里拉取最新的东西。

我很想听听一些关于如何正确处理这个问题的见解......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T16:18:14.753

超级项目被锁定到子模块中的特定提交；每当在子模块中进行新的提交，并且您希望超级项目被锁定到该提交时，您必须提交该更改。

（这实际上非常有用，因为它将超级项目中的特定提交与子模块中的特定提交联系起来。）

# wpf - MVVM 应用程序中的命令热键和文本框输入

> ID：12958930
> 
> 赞同：0
> 
> 时间：2012-10-18T16:05:35.930
> 
> 标签：wpf, mvvm, textbox, command, hotkeys

我有一个使用 MVVM 模式的应用程序。有一些使用 CommandReference 和 DelegateCommand 类实现的命令。Thay 在 MainWindow InputBindings 中绑定到一些热键。例如： KeyBinding Key="W" Command="{StaticResource WireframeCommandReference}"

然后我有一个属性窗口，它显示一些对象的属性。其中一些属性是“字符串”类型的，它们在 TextBox 中显示。在这里我遇到了一个问题。当我尝试在 TextBox 中输入“w”时，没有输入任何内容，但会触发 WireframeCommand 命令。我想要的是，如果 TextBox 处于活动状态，则能够在不触发任何命令的情况下编辑属性，否则触发命令。有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T07:32:58.393

非常感谢。决定是将命令从 MainViewModel 移动到相应的 VM。如果是线框，我将它移到 ViewportVM 中，一切正常。我的问题是 MainViewModel 被用作所有命令的全局存储。

# c - 警告：X 可能在此函数中未初始化使用

> ID：12958931
> 
> 赞同：41
> 
> 时间：2012-10-18T16:05:42.983
> 
> 标签：c, warnings

我正在编写一个自定义的“向量”结构。我不明白为什么我在`Warning: "one" may be used uninitialized`这里。

这是我的 vector.h 文件

```
#ifndef VECTOR_H
#define VECTOR_H

typedef struct Vector{
    int a;
    int b;
    int c;
}Vector;

#endif /* VECTOR_ */ 
```

警告在线发生在这里`one->a = 12`

```
#include<stdio.h>
#include<stdlib.h>
#include<math.h>
#include "vector.h"

int main(void){
    Vector* one;
    one->a = 12;
    one->b = 13;
    one->c = -11;
} 
```

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-10-18T16:07:51.967

`one`尚未分配，因此指向不可预测的位置。您应该将其放在堆栈上：

```
Vector one;
one.a = 12;
one.b = 13;
one.c = -11 
```

或为其动态分配内存：

```
Vector* one = malloc(sizeof(*one))
one->a = 12;
one->b = 13;
one->c = -11
free(one); 
```

注意`free`在这种情况下的使用。一般来说，`free`每次调用`malloc`.

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-10-18T16:07:38.073

您收到警告是因为您没有`one`为指针分配值。这是未定义的行为。

你应该像这样声明它：

```
Vector* one = malloc(sizeof(Vector)); 
```

或像这样：

```
Vector one; 
```

在这种情况下，您需要将`->`运算符替换为`.`：

```
one.a = 12;
one.b = 13;
one.c = -11; 
```

最后，在 C99 及更高版本中，您可以使用*指定的初始化程序*：

```
Vector one = {
   .a = 12
,  .b = 13
,  .c = -11
}; 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-10-18T18:33:49.587

当您使用时，`Vector *one`您只是创建一个指向该结构的指针，但没有分配给它的内存。

只需使用`one = (Vector *)malloc(sizeof(Vector));`来声明内存并实例化它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-07-16T17:09:58.837

这可能不是最专业的解决方案，但除了使用 初始化它`malloc`，您还可以使用初始化它`new`：

`Vector *one = new Vector();`

我个人觉得它更优雅。

# ruby-on-rails - 为什么 Rails 3 在覆盖范围时不排除“或”-ed 条件？

> ID：12958933
> 
> 赞同：0
> 
> 时间：2012-10-18T16:05:47.740
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, scope, arel

考虑 ActiveRecord 模型上的这些范围：

```
scope :onsale, where(:sales_state => "onsale")
scope :outdated, where(:sales_state => "outdated")
scope :onsale_or_outdated, where(" sales_state = 'onsale' OR sales_state = 'outdated' ") 
```

**为什么 Rails 知道用 覆盖`:onsale`，`:outdated`但不知道`:onsale`用覆盖`:onsale_or_outdated`？**

**我的用例：**

我有一个具有许多范围的关系对象（假设它是一个保存的搜索），其中之一是`:onsale`. 我想从那开始建立另一个关系，但这次我希望`sales_state`是`onsale`or `outdated`。

如果我使用`relation.onsale_or_outdated`，`sales_state`则不会被覆盖，它只会添加一个新条件。

```
[...] WHERE "cars"."sales_state" = 'onsale' [...] AND (("cars"."sales_state" = 'onsale' OR "cars"."sales_state" = 'outdated')) 
```

**在这种情况下，我如何使用我的“或”-ed 条件？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T16:07:12.877

> 如果我使用relation.onsale_or_outdated，sales_state 不会被覆盖，它只是添加一个新条件。

这就是作用域的工作原理。它们是附加的，而不是替换的。如果您有两个互斥范围，则需要使用其中一个，而不是同时使用两者。特殊情况是当您的范围涉及`:symbol = <value>`语法中的单个字段时。Rails 足够聪明，可以让一个作用域抵消另一个作用域。在您的情况下，`onsale_or_updated`范围只是一个字符串，Rails 无法判断涉及哪些字段，因此范围是链接的。

您应该重写您的范围以使用字段/值而不是 SQL 的 blob，以便 Rails 知道涉及哪些字段。

```
scope :onsale_or_outdated, where(:sales_state => %w(onsale outdated)) 
```

或者，如果您只想使用您的`onsale_or_outdated`范围，您可以[`unscope`](http://apidock.com/rails/ActiveRecord/Scoping/Default/ClassMethods/unscoped)建立关系并重新应用范围：

```
relation.unscoped.onsale_or_outdated 
```

请注意，这将删除*任何*以前应用的范围。

# uiview - 如何使用图像作为按钮背景？

> ID：12958934
> 
> 赞同：0
> 
> 时间：2012-10-18T16:05:54.967
> 
> 标签：uiview, uibutton, uiimage

我有以下图像代表我的按钮：

![在此处输入图像描述](../Images/f601dc5125bc31578fe8f67d45630dfd.png)

我想使用该图像创建一个将其用作背景的按钮，但这比我提供的图像宽得多。

以下是我尝试过的两种方法：

```
 UIButton *emailSupportButton = [[UIButton alloc] initWithFrame:CGRectMake(25, 315, 200, 60)];
  [emailSupportButton setTitle:@"Email Support" forState:UIControlStateNormal];
  [emailSupportButton setImage:[UIImage imageNamed:@"toolbar-button"] forState:UIControlStateNormal]; 
```

此方法导致按钮图像不会被拉伸并准确显示 .png 的正常显示方式。

我尝试过的另一种方法是设置背景图像，就像这样......

```
 UIButton *emailSupportButton = [[UIButton alloc] initWithFrame:CGRectMake(25, 315, 200, 60)];
  [emailSupportButton setTitle:@"Email Support" forState:UIControlStateNormal];
  [emailSupportButton setBackgroundImage:[UIImage imageNamed:@"toolbar-button"] forState:UIControlStateNormal]; 
```

这种方法以一种非常难看的方式拉伸图像，而不是达到预期的效果，导致按钮几乎是椭圆形的，边框非常难看。

问题是我没有使用正确的方法来创建自定义按钮，还是我的图像不适合我要完成的任务？我的图像是否应该是矩形而不包括按钮的边框，让 UIButton 为我处理边框/舍入？我的图像是否应该已经是按钮的大小（这似乎有点限制）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T16:24:05.020

您列出的第二种方法（代码方面）是您想要的。您缺少的是可拉伸图像。尝试这个：

```
UIButton *emailSupportButton = [[UIButton alloc] initWithFrame:CGRectMake(25, 315, 200, 60)];
[emailSupportButton setTitle:@"Email Support" forState:UIControlStateNormal];
UIImage *backgroundImage = [UIImage imageNamed:@"toolbar-button"];
CGSize size = backgroundImage.size;
backgroundImage = [backgroundImage stretchableImageWithLeftCapWidth:size.width/2.0 topCapWidth:size.height/2.0];
[emailSupportButton setBackgroundImage:backgroundImage forState:UIControlStateNormal]; 
```

如果您仅在 iOS 5 及更高版本上进行部署，那么您将希望使用新的`-[UIImage resizableImageWithCapInsets:(UIEdgeInsets)capInsets];`iOS 6 还添加`-[UIImage resizableImageWithCapInsets:(UIEdgeInsets)capInsets resizingMode:(UIImageResizingMode)resizingMode];`

# maven - 通过 SSO 进行 Maven 设置？

> ID：12958935
> 
> 赞同：7
> 
> 时间：2012-10-18T16:05:57.610
> 
> 标签：maven, single-sign-on, nexus

我有一些开发人员不喜欢将他们的 LDAP 用户名/密码存储在 settings.xml 中以访问 Nexus。他们的不满部分是 FUD，但也有每当他们的 LDAP 密码过期时必须重新加密密码的不便（这在此处相对频繁）。

有什么办法可以让 Maven 改用 SSO / LDAP？我们使用的工件存储库是 Nexus，其 Web 前端确实已经使用 SSO。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-12T14:16:20.493

您可以在 settings.xml 文件中启用加密，这样它也不会以纯文本形式存在。

[http://maven.apache.org/guides/mini/guide-encryption.html#How_to_encrypt_server_passwords](http://maven.apache.org/guides/mini/guide-encryption.html#How_to_encrypt_server_passwords)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T22:15:07.693

Nexus 的最新版本启用了新的安全令牌功能来解决这个问题。我还没有使用它，但它记录在这里：

*   [http://www.sonatype.com/books/nexus-book/reference/config-sect-usertoken.html](http://www.sonatype.com/books/nexus-book/reference/config-sect-usertoken.html)

# c# - MEF 可以导出/导入静态类吗？

> ID：12958936
> 
> 赞同：5
> 
> 时间：2012-10-18T16:05:57.147
> 
> 标签：c#, .net-4.0, mef

是否可以执行以下操作：

```
[Export(typeof(Settings)]
public static class Settings
{
   public string Name {get;set;}
   public string Color {get;set;}
}

[Import(typeof(Settings)]
Settings s; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T16:07:50.617

您不能导出静态类，因为没有要连接的实例。第二行：

```
Settings s; 
```

将是编译器错误，因为您无法实例化静态类。

话虽如此，这实际上是没有必要的。MEF 将自动创建您的类的单个实例（默认情况下）`Settings`（前提是它不是静态的），并将同一个实例设置为任何`Import`指定的实例。这有效地为您提供了一个“类似单例”的类，而没有使用静态类或单例的任何缺点。

# regex - 如何使用非拉丁词的正则表达式定义促销？

> ID：12958937
> 
> 赞同：4
> 
> 时间：2012-10-18T16:06:02.257
> 
> 标签：regex, unicode, utf-8, google-custom-search

以下正则表达式适用并匹配任何以“How”开头的搜索查询（最多 25 个字符），作为 Google 自定义搜索中的促销查询：

```
How\b.{0,25}\b 
```

但是，当我使用非拉丁 UTF-8 单词时，它不起作用，例如阿拉伯语“كيف”：

```
كيف\b.{0,25}\b 
```

有人知道解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T17:13:01.540

我对 Google 自定义搜索不是很熟悉，但似乎这是一个 JavaScript 正则表达式，对吧？

如果是这样，那么问题是`\b`表示“单词”字符和“非单词”字符之间的边界，其中“单词”字符是 ASCII 字母、下划线或数字 ( `[A-Za-z_0-9]`)。

没有真正的通用解决方案；JavaScript 根本不知道 ASCII 范围之外的单个字符，因此它无法分辨哪些是字母，哪些不是。但是你可以这样写：

```
/^كيف(?:\s.{0,24})?$/ 
```

匹配任何*只是*word 的查询，`كيف`或者由 word`كيف`后跟一个空格字符和最多 24 个字符组成的查询。我认为这应该非常接近满足您的要求。

# android - 无法从内部存储中读取文件..？

> ID：12958939
> 
> 赞同：0
> 
> 时间：2012-10-18T16:06:09.913
> 
> 标签：android, file

我无法读取内部手机目录中的文件，即 /sdcard/Android/data/com.proj.p/files/FILENAME ..请告诉我如何从那里读取文件..？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T16:16:38.600

sdcard 目录不是内部存储。它是外部的。确保您的清单具有 EXTERNAL_STORAGE 权限。

# infowindow - 选择标记时，如何在谷歌可视化“geochart”上添加类似信息窗口的内容？

> ID：12958942
> 
> 赞同：1
> 
> 时间：2012-10-18T16:06:13.123
> 
> 标签：infowindow, google-visualization

我尝试在 geochart 上添加一个 infowindow 导致失败，因为 infowindow 需要添加类似于 anchor 的东西，在 geochart 的文档中没有指定如何添加这些，并且在谷歌上搜索数小时后没有任何显示。是否可以在 geochart 上添加信息窗口？如果是的话怎么做？还是有办法获取标记的位置？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T09:37:00.647

不幸的是，这是不可能的。此外，geochart api 是可视化 API 中少数几个不接受 HTML 作为工具提示的 API 之一，但我希望它们能尽快改变。

此外，根据我的经验，如果您使用该信息构建标记，则只能获取标记的位置（或与标记相关的任何其他信息）。例如，如果您使用 lat/lon 值来构建标记，则可以在单击时获取这些值。

# ruby-on-rails - ActionMailer 中的内存泄漏

> ID：12958956
> 
> 赞同：3
> 
> 时间：2012-10-18T16:06:46.043
> 
> 标签：ruby-on-rails, memory, memory-leaks

我有以下代码。它是一个 ActionMailer 类方法，它发送包含两种附件的电子邮件：

1.  pdf 文件（_attachment），在内存中呈现并直接添加到消息中

2.  可以从文件系统添加的其他一些文件（_attached_files）。

一切都很完美，除了一件事 - 它会泄漏内存。只要用户发送带有附件的消息，内存消耗就会不断增长。它不会返回内存。据我测试，我怀疑这个问题与文件系统中的附件有关，而不是与呈现的 PDF 文件有关。

```
 attachments[_attachment.pdf_filename] = render(_attachment.pdf_template_path, :format => :pdf)

 _attached_files.try(:each) do |file|
      attachments[file.attachment_file_name] = File.read(file.attachment.path, mode:"rb")
 end

mail(:to =>_recipients, :from=>_sender_name, :subject => _subject) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T15:56:58.813

哦，终于找到内存泄漏的原因了。我错了 - 它与 pdf 文件有关。

我使用虾来渲染 pdf 文件。我错误地包含了外部字体系列并在表格中使用了它们。每次大虾生成表时，都会分配一些内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T16:18:59.910

我做类似的事情，除了我做

```
 attachments[file.attachment_file_name] 
     = File.open(file.attachment.path, "rb") {|f| f.read} 
```

我不确定这是否是您的问题，但值得一试

# javascript - 位函数返回未定义

> ID：12958958
> 
> 赞同：3
> 
> 时间：2012-10-18T16:06:57.633
> 
> 标签：javascript, jquery

我有一个基本功能，我试图从 bit.ly 返回一个缩短的 url。我的用户名和 api_key 刚刚在这篇文章中被删除，但它们已经过测试，我得到了正确的回复。我们还进行了检查，我们收到了包含正确数据的 JSON 响应。

我遇到的问题是我希望这个函数成为我们可以在网站上的不同位置调用的东西，以缩短将包含在推文中的链接。所以这个想法只是编写一个我们可以及时调用的函数，因为我们特别知道会从推文中发送一些东西，并且需要动态调用页面的 url。

当 url 传递给函数时，我们将 undefined 作为返回值。这里的功能：

```
 var UrltoShorten = 'http://google.com',
        bitly = shortenUrl(UrltoShorten);

    function shortenUrl(longUrl) {

        var username = 'removed',
            key = 'removed';

        $.ajax({
            url: 'http://api.bit.ly/v3/shorten',
            data: { 
                longUrl: longUrl,
                apiKey: key,
                login: username
            },
            dataType: 'jsonp',
            success: function (v) {
                var shortUrl = v.data.url;
                return shortUrl; 
                //console.log(shortUrl); // Will return shorten Url 
            }
        });
    }

console.log(bitly); // Returns undefined 
```

在我们的测试中，我们发现 console.logging 成功函数内的值每次都会返回缩短的 URL。Console.logging该shortcutUrl函数之外的值每次都返回未定义。

是否有原因我们无法在函数之外获得正确的值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T16:09:22.317

ajax 调用是异步的，这意味着程序不会像您期望的那样逐行运行。ajax 调用之外的 javascript 将继续运行，然后当 ajax 调用在后台完成时，控件将跳回成功/错误回调。

简短的回答：您想对来自 ajax 调用的数据执行的任何操作都必须在该调用的成功处理程序中。

如果出于某种原因，您想在 ajax 调用完成之前停止一切，则将 ajax 传递给 option `async: false`。这将冻结浏览器，直到 ajax 调用完成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T16:09:33.237

使用以下方法设置 ajax 同步：

```
 $.ajax({
    async:false,
    ...
}) 
```

# perl - 可以在 Perl 中将一个数组的地址分配给另一个数组吗？

> ID：12958962
> 
> 赞同：0
> 
> 时间：2012-10-18T16:07:05.407
> 
> 标签：perl, reference

在以下 C# 代码中：

```
int[] X = new int[2];
X[0] = 1;
X[1] = 2;
int[] Y = X;
X[1] = 3; 
```

执行此操作后，Y[1] 也将为 3，因为操作 Y = X 不会进行克隆，而是将 X 指向的引用或指针分配给 Y。

如果在 Perl 5 下尝试相同的操作：

```
my @X = (1, 2);
my @Y = @X;
$X[1] = 3; 
```

与 C# 不同的是，Y[1] 不是 3，而是 2，这表明 Perl 在 @Y = @X 操作之后制作了数组的副本。

所以，我的问题是 - 有没有办法使用另一个 Perl 数组的引用来分配或初始化一个 Perl 5 数组，以便它们都指向相同的数据？我已经知道引用并尝试取消引用对数组的引用，但这也产生了副本。我也知道使用对数组的引用将解决我正在尝试做的大部分事情，所以我不需要任何答案来展示如何使用引用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T16:14:19.170

您在 C# 程序中使用了引用，而不是在 Perl 程序中。如果你在 Perl 中使用引用，它的工作原理是一样的。

```
my $X = [ 1, 2 ];
my $Y = $X;
$X->[1] = 3;
print "@$Y\n";  # 1 3 
```

或者

```
my @X = ( 1, 2 );
my $Y = \@X;
$X[1] = 3;
print "@$Y\n";  # 1 3 
```

您也可以创建别名。

```
use Data::Alias qw( alias );

my @X = ( 1, 2 );
alias my @Y = @X;
$X[1] = 3;
print "@Y\n";  # 1 3 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T16:10:10.403

创建对特定命名变量的引用的方法是使用反斜杠，如下所示：

```
my @x = (1,2);
my $y = \@x;            # create reference by escaping the sigil

$y->[1] = 3;            # $x[1] is now 3
for ( @$y ) { print }   # how to reference the list of elements 
```

您还可以使用匿名数组创建引用：

```
my $x = [1,2];          # square brackets create array reference
my $y = $x;             # points to the same memory address 
```

引用是一个标量值，所以`$y`在你的情况下。如果将数组引用放入数组中，则会得到一个二维数组，便于将来参考。例如：

```
my @two = (\@x, \@y);                 # $two[0][0] is now $x[0]
my @three = ( [1,2], [3,4], [4,5] );  # using anonymous arrays 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T16:10:39.257

尝试这样做：

```
my @X = (1, 2);
my $ref = \@X;        # $ref in now a reference to @X array (the magic is `\`)
$ref->[0] = "foobar"; # assigning "foobar" to the first key of the array
print join "\n", @X;  # we print the whole @X array and we see that it was changed 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-18T16:13:16.760

在 Perl 中，数组不是指针。

您可以使用运算符获取数组的引用`\`：

```
my @array = ( 1, 2 );
my $array_ref = \@array; 
```

`$array_ref`然后将指向原始数组（如在 C 中）

```
${$array_ref}[0] = 3 
```

将更改原始数组的第一个单元格（即，`$array[0]`将是 3）

# .net - EF Code First 中的一对一映射问题

> ID：12958963
> 
> 赞同：1
> 
> 时间：2012-10-18T16:07:09.193
> 
> 标签：.net, entity-framework

考虑这种情况：

```
public class House
{
    public string Name { get; set; }
    public virtual Person Person1 { get; set; }
    public virtual Person Person2 { get; set; }
}

public class Person
{
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public House House { get; set; }
}

// Relationships
this.HasOptional(t => t.Person1)
    .WithRequired(t => t.House);
this.HasOptional(t => t.Person2)
    .WithRequired(t => t.House); 
```

当我尝试插入 House 的实例时，会抛出 MetaDataException：

> 指定的架构无效。错误：(36,6)：错误 0040：类型 House_Person1 未在命名空间 Company.Models 中定义（别名=Self）。

经过更多的黑客攻击，发现这可行：

```
// Relationships
this.HasOptional(t => t.Person1)
    .WithRequired();
this.HasOptional(t => t.Person2)
    .WithRequired(); 
```

但是我不会让 EF 填充 Person.House 属性。我可以模仿这种行为（如下所示）吗？

```
 public virtual Person Person1
    {
        get
        {
            return _person1;
        }
        set
        {
            _person1 = value;
            _person1.Haushalt = this;
        }
    }

    public virtual Person Person2
    {
        get
        {
            return _person2;
        }
        set
        {
            _person2 = value;
            _person2.Haushalt = this;
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T18:03:55.360

您不能`Person.House`在两个不同的关系（`House_Person1`和）中使用相同的导航属性（ `House_Person2`）。

另一个限制是 EF 仅支持将[共享主键关联](http://weblogs.asp.net/manavi/archive/2011/04/14/associations-in-ef-4-1-code-first-part-3-shared-primary-key-associations.aspx)作为真正的一对一关系。这意味着一个相关`House`且`Person`必须具有相同的主键值。但随之而来的是`House.Person1`，`House.Person2`需要具有与`House`. 换句话说：`Person1`永远`Person2`不可能是不同的人。

我建议您将关系映射为一对多关系，并确保在应用程序的业务逻辑中 a`House`不能超过两个`Person`s。（因为您当前的映射允许`Person1`并且`Person2`是可选的，所以将允许零个或只允许一个人）：

```
public class House
{
    public string Name { get; set; }
    public virtual ICollection<Person> People { get; set; }
}

public class Person
{
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public House House { get; set; }
}

this.HasMany(t => t.People)
    .WithRequired(t => t.House); 
```

**编辑**

如果您想保留两个`Person`导航属性，`House`则只能将其映射为两个一对多关系（即使从业务角度来看这种关系是错误的）而没有导航属性（如此[处](http://weblogs.asp.net/manavi/archive/2011/05/01/associations-in-ef-4-1-code-first-part-5-one-to-one-foreign-key-associations.aspx)`Person`所示）：

```
this.HasOptional(t => t.Person1)
    .WithMany();
this.HasOptional(t => t.Person2)
    .WithMany(); 
```

您可以像在上一个代码片段`House`中一样使用该属性`Person`，但您需要将其从模型中排除：

```
modelBuilder.Entity<Person>()
    .Ignore(t => t.House); 
```

`Person.House`不再是导航属性，当您`Person`从数据库加载实体时，您无法加载它（使用急切或延迟加载）。

# groovy - Groovy 进程执行

> ID：12958964
> 
> 赞同：1
> 
> 时间：2012-10-18T16:07:11.843
> 
> 标签：groovy

以下命令在终端上使用时可以正常工作

// 终端

```
mysql -h localhost -u root my_database -e "select count(*) from page;" 
```

但是当在 groovy 脚本中使用时（通过 groovyconsole），它无法执行。而是打印 mysql 使用选项，就好像某些未知命令已传递给 mysql。

// Groovy 控制台

```
def p1 = 'mysql -h localhost -u root my_database -e "select count(*) from page;"'.execute()
p1.text 
```

有谁知道这是怎么回事？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T16:15:33.483

不知道为什么它会倒下，我猜这是mysql处理引号中的选择调用的方式......

作为一种解决方法，这有效：

```
[ 'mysql', 
  '-h', 'localhost',
  '-u', 'root',
  'my_database',
  '-e', 'select count(*) from page' ].execute().text 
```

处理输出的更好方法是使用它（而不是使用`text`），因为如果您的缓冲区填满，这应该可以缓解任何阻塞问题......

就像是：

```
String output = new StringWriter().with { writer ->
  [ 
    'mysql', 
    '-h', 'localhost',
    '-u', 'root',
    'my_database',
    '-e', 'select count(*) from page'
  ].execute().with { proc ->
    consumeProcessOutput( writer, writer )
    waitFor()
  }
  writer.toString() 
}

println output 
```

### 编辑：

当然，你总是可以只使用 JDBC：

```
@GrabConfig(systemClassLoader=true)
@Grab('mysql:mysql-connector-java:5.1.21')
import groovy.sql.Sql

def rowcount = Sql.newInstance( 'jdbc:mysql://localhost/my_database', 'root', '', 'com.mysql.jdbc.Driver' ).with { sql ->
  def count = sql.firstRow( 'select count(*) from page' )[ 0 ]
  sql.close()
  count
}

println rowcount 
```

### 解释

如果您编写这样的 shell 脚本（并将其另存为`/tmp/run.sh`）：

```
#!/bin/bash

for var in "$@"
do
  echo "$var"
done 
```

然后，当您运行时：

```
println( '/tmp/run.sh "select count(*) from page"'.execute().text ) 
```

[groovy 调用](https://github.com/groovy/groovy-core/blob/master/src/main/org/codehaus/groovy/runtime/ProcessGroovyMethods.java#L509)的简单形式[`Runtime.getRuntime.exec()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Runtime.html#exec%28java.lang.String%29)，并打印出：

```
"select
count(*)
from
page;" 
```

正如你所看到的，参数都搞砸了，因为它将`select`位分隔成单词。

当您改为致电时：

```
println( [ '/tmp/run.sh', '"select count(*) from page"' ].execute().text ) 
```

它打印出来：

```
"select count(*) from page" 
```

由于[groovy调用](https://github.com/groovy/groovy-core/blob/master/src/main/org/codehaus/groovy/runtime/ProcessGroovyMethods.java#L569)的[`String[]`形式，`Runtime.exec`](http://docs.oracle.com/javase/6/docs/api/java/lang/Runtime.html#exec%28java.lang.String%5B%5D%29)所以java不必猜测不同的参数是什么，所以保持`select`all in one参数。

希望这能解释它:-)

# javascript - ckeditor 3.x dataProcessor 获取本机 dom 元素

> ID：12958965
> 
> 赞同：0
> 
> 时间：2012-10-18T16:07:12.207
> 
> 标签：javascript, ckeditor

我正在尝试使用 dataProcessor htmlFilter 为与我的条件匹配的 ckeditor“元素”附加 onclick 事件。sdk 记录了一个方法 $，它返回内部“元素”的本机 dom 元素。

> {Object} $ 自：3.0 此类实例表示的本机 DOM 对象。var element = new CKEDITOR.dom.element('span'); 警报（元素。$.nodeType）；// "1"

我想要完成的是：

我想显示一个自定义弹出窗口，以便用户在用户单击文档中具有“数据注释”属性的 div 时输入特殊注释。然后将用户输入的内容插入到该 div 的 innerHTML 中。我可能在文档中有几个部分可以插入“注释”，并且用户可能在当前文档中包含一个模板，该模板也将包含“注释”或其他应该可以通过附加 htmlFilter 规则单击的部分。

```
 editor.dataProcessor.htmlFilter.addRules(
                    {
                        elements :
                        {
                            div : function( element )
                            {
                                if (element.attributes.data-notes) {
                                  console.log(element) // exists..great
                                  console.log(element.$) // undefined!
                                  element.$.onclick = function() { ... }
                                }

                            }
                        }
                    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T22:23:39.060

dataProcessor 既不适用于原生 DOM 元素，也不适用于 CKEditor 元素。它适用于简化的合成元素，这些元素只不过是 DOM 的文本表示（标签 + 属性 + 内部内容）。所以你不能按照这种方式。

适合您的解决方案类似于[占位符插件](https://github.com/ckeditor/ckeditor-dev/blob/master/plugins/placeholder/plugin.js)( [demo](http://nightly.ckeditor.com/7654/_samples/placeholder.html) )。不同之处在于您的插件将具有稍微不同的[getSelectedPlaceholder](https://github.com/ckeditor/ckeditor-dev/blob/master/plugins/placeholder/plugin.js#L132)实现（因为您正在寻找具有特定属性的 div ），[onclick](https://github.com/ckeditor/ckeditor-dev/blob/master/plugins/placeholder/plugin.js#L58)（而不是双击；我不会改变这一点），没有[createPlaceholder](https://github.com/ckeditor/ckeditor-dev/blob/master/plugins/placeholder/plugin.js#L103)和没有[dataProcessor 的东西](https://github.com/ckeditor/ckeditor-dev/blob/master/plugins/placeholder/plugin.js#L74-99)。

有一个很好的编码！;)

# java - java回溯生成数字

> ID：12958968
> 
> 赞同：1
> 
> 时间：2012-10-18T16:07:13.450
> 
> 标签：java, backtracking

我写了一个小程序来生成具有两个条件的数字：

1.  有从 1 到 9 的所有数字，所以像 123456789 这样的数字
2.  该数字必须能被最后一位整除，例如 442，因为 4 % 2 == 0 和 4 % 4 == 0

这是我的回溯算法：

```
static void backTrack(int value)
    {
        //Check if the number has all 9 digits, that it is dividable
        if(isNine(value) && isDiv(value))
        {
            //System.out.println(value);
            System.out.println("Found solution.");
            System.out.println(aantal);
            aantal++;
        }
        else
        {

            if(howMany(value) >= 9)
                return;

            for(int i = 1; i < 10; i++)
            {
                value = value * 10 + i;
                if(value % i == 0  && howMany(value) <= 9)
                {
                    //System.out.println(value);
                    backTrack(value);
                }
                value = value / 10;
            }
        }
    }

    //Gives length of integer for example 124 must give 3, 13 gives 2
    static int howMany(int value)
    {
        int test = value % 10;
        value = value / 10;
        int teller = 0;

        while(test != 0)
        {
            teller++;
            test = value % 10;
            value = value / 10;
        }
        return teller;
    }

    //Checks if the number is dividable by the last digit of the number and keeps recursive doing this for the whole number so 442 = YES 235 = NO
    static boolean isDiv(int value)
    {
        int test = value % 10;
        value = value / 10;

        while(test != 0)
        {
            if(value % test == 0)
            {
                test = value % 10;
                value = value / 10;
            }
            else
                return false;
        }
        return true;
    }

    //Checks if the number has all digits from 1 to 9
    static boolean isNine(int value)
    {
        boolean values[] = new boolean[10];
        int test = value % 10;
        int counter = 0;

        for(int i = 1; i < values.length; i++)
            values[i] = false;

        while( test != 0)
        {
            if(values[test])
                return false;
            else
            {
                values[test] = true;
                value = value /10;
                test = value % 10;
            }
        }

        for(int i = 1; i < values.length; i++)
        {
            if(values[i])
                counter++;
        }

        if(counter == 9)
            return true;
        else
            return false;
    } 
```

它从来没有找到解决方案，我测试了所有子功能，并且效果很好。

我的回溯方案有问题吗？这`System.out.println(aantal)`只是一个变量来计算我找到了多少解决方案。

我从`backtrack(0);`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T16:21:52.870

```
static void backTrack(int value)
    {
        //Check if the number has all 9 digits, that it is dividable
        if(isNine(value)) // CHANGED this if test. 
        {
            System.out.println("Found solution.");
            System.out.println(value);
            aantal++;
        }
        else
        {

            if(howMany(value) >= 9)
                return;

            for(int i = 1; i < 10; i++)
            {
                value = value * 10 + i;
                if(value % i == 0  && howMany(value) <= 9)
                {
                    //System.out.println(value);
                    backTrack(value);
                }
                value = value / 10;
            }
        }
    }

    //Gives length of integer for example 124 must give 3, 13 gives 2
    static int howMany(int value)
    {
        int test = value % 10;
        value = value / 10;
        int teller = 0;

        while(test != 0)
        {
            teller++;
            test = value % 10;
            value = value / 10;
        }
        return teller;
    }

    //Checks if the number has all digits from 1 to 9
    static boolean isNine(int value)
    {
        boolean values[] = new boolean[10];
        int test = value % 10;
        int counter = 0;

        for(int i = 1; i < values.length; i++)
            values[i] = false;

        while( test != 0)
        {
            if(values[test])
                return false;
            else
            {
                values[test] = true;
                value = value /10;
                test = value % 10;
            }
        }

        for(int i = 1; i < values.length; i++)
        {
            if(values[i])
                counter++;
        }

        if(counter == 9)
            return true;
        else
            return false;
    }
} 
```

# matlab - 在matlab中，找到3D邻域

> ID：12958969
> 
> 赞同：3
> 
> 时间：2012-10-18T16:07:15.203
> 
> 标签：matlab, 3d, neighbours

我有一个经过分割过程的体积（3D 矩阵）。大部分卷由 NaN（或零）组成，除了通过某些标准的区域（见图）。我需要知道每个剩余部分的体素数量有多大，以及它们在 2D 平面（xy、xz、yz）上的分布情况。matlab 中是否有任何东西可以帮助我以有效的方式而不是直接搜索来做到这一点？体积可以相当大。例如。在附图中，有 7 个体素的黄色/棕色部分，并且比 xy 更垂直地延伸。提前致谢。![在此处输入图像描述](../Images/07b812e41eec36a3b2e8eeefc8d2eb80.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T16:14:03.047

最方便的解决方案是使用[REGIONPROPS](http://www.mathworks.com/help/images/ref/regionprops.html)。在您的示例中：

```
stats = regionprops(image, 'area', 'centroid') 
```

对于每个特征，在结构统计中都有一个带有面积（即体素数）和质心的条目。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T16:14:24.653

I think that what you are looking for is called `bwlabeln`. It allows you to find blobs in 3D space, just like `bwlabel` does in 2D. Afterwards, you can use `regionprops` to find out the properties of the data.

Taken directly from help:

> bwlabeln Label connected components in binary image. L = bwlabeln(BW) returns a label matrix, L, containing labels for the connected components in BW. BW can have any dimension; L is the same size as BW. The elements of L are integer values greater than or equal to 0\. The pixels labeled 0 are the background. The pixels labeled 1 make up one object, the pixels labeled 2 make up a second object, and so on. The default connectivity is 8 for two dimensions, 26 for three dimensions, and CONNDEF(NDIMS(BW),'maximal') for higher dimensions.

# java - android devolpment将按钮链接到其他xml页面

> ID：12958976
> 
> 赞同：0
> 
> 时间：2012-10-18T16:07:45.180
> 
> 标签：java, android, xml

我正在为安卓开发一个应用程序。主屏幕有 6 个按钮。每个按钮通向另一个屏幕。我在使用使按钮在单击时执行任何操作的代码时遇到问题。这就是我所拥有的：在主页上，我的按钮 ID 是 glass 单击时打开的页面是 glass.xml

```
android:onClick="Intent i = new Intent(FirstActivity.this, SecondActivity.class);" 
```

和我的 scr 文件夹我有 java 活动 FirstActivity.java

```
package install.fineline;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class FirstActivity extends Activity implements OnClickListener {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_fine_line);

    Button btnload = (Button) findViewById(R.id.glass);
    btnload.setOnClickListener(this);
}

@Override
public void onClick(View v) {
    // TODO Auto-generated method stub
    Intent i = new Intent(this, SecondActivity.class);
    startActivity(i);
}
} 
```

和 SecondActivity.java

```
package install.fineline;

import android.app.Activity;
import android.os.Bundle;

public class SecondActivity extends Activity {
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.glass);

}
} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T16:14:21.013

在 xml 中的按钮定义上删除该`onClick`属性。

按钮单击操作是在代码中设置的，因此它不需要在 xml 文件中。

[这里](http://developer.android.com/training/basics/firstapp/starting-activity.html)有示例代码，展示了如何做你想做的事。

# ruby - 我可以用rails遍历控制器的每个实例变量吗？

> ID：12958980
> 
> 赞同：0
> 
> 时间：2012-10-18T16:08:04.187
> 
> 标签：ruby, ruby-on-rails-3

我将如何遍历控制器中的每个实例变量“@anything”？我不想循环一个，我想将它们作为一个集合循环。理想情况下，仅限于我的控制器方法定义的那些。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T16:25:11.407

您可以使用`instance_variables`and `instance_variable_get`，例如：

```
@foo = 'Foo'
@bar = 'Bar'

instance_variables # => [:@foo, :@bar]

instance_variables.map(&method(:instance_variable_get))
# => ['Foo, 'Bar'] 
```

> 理想情况下，仅限于我的控制器方法定义的那些。

实例变量的范围是实例，而不是方法。这就是为什么它们被称为实例变量。而且它们不是由方法定义的，事实上，它们根本没有定义*：*它们只是在第一次被分配时就出现了。

# ruby-on-rails - 为什么我的 Rails 规范无法运行？

> ID：12958985
> 
> 赞同：2
> 
> 时间：2012-10-18T16:08:16.350
> 
> 标签：ruby-on-rails, rspec

当我尝试运行我的规范时，我得到一个未初始化的常量错误。我的规格如下所示：

```
describe Facility do 
  it { should have_many(:units) }
  it { should have_many(:facilities_users) }
  it { should have_many(:administrators) }
  it { should have_many(:facility_employees) }
end 
```

错误是： `facility_spec.rb:1:in `<top (required)>': uninitialized constant Facility (NameError)`

我当然有一个 Facility 模型，所以我不确定为什么会发生这种情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T17:01:48.697

您应该尝试运行`rake spec`而不是`rspec spec`. 但两者都可能有效。

如果不工作尝试尝试`bundle exec rspec spec`或`bundle exec rake spec`。

*资料来源：[尝试运行 rspec 时，我得到 uninitialized constant](https://stackoverflow.com/questions/8055040/when-trying-to-run-rspec-i-get-uninitialized-constant-activemodel)。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T16:17:47.667

在文件顶部添加以下内容：

```
require 'spec_helper' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T17:34:46.287

如果您使用的是“rspec-rails”gem，请运行

`rails g rspec:install`

这将创建`spec/spec_helper.rb`文件（如果您不使用 ActiveRecord，则应对其进行编辑，以便它正确运行您的规范设置）。

之后，确保您在规范文件的顶部需要帮助程序：

`require 'spec_helper'`

如果这对您不起作用，则可能还有更多问题，例如：

1.  You're trying to test a file under the lib/ directory. In this case, make sure this file is loaded with the environment (config/application.rb -> autoload_paths) or require it explicitly.
2.  The constant actually doesn't exist. It could be inside a namespace or just a typo.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T04:41:06.677

In the spec file, require the file where `Facility` class is defined.

# c# - 从 C# 代码中删除 dataGridView1_CellContentClick() 会导致构建失败 - 为什么？

> ID：12958992
> 
> 赞同：3
> 
> 时间：2012-10-18T16:08:51.223
> 
> 标签：c#, winforms, visual-studio-2010, datagridview

如果我从不双击新创建的 DataGridView 控件，`dataGridView1_CellContentClick()`则不会创建处理程序，但应用程序可以毫无问题地构建和运行。

但是，一旦我`dataGridView1_CellContentClick()`通过双击 DataGridView 控件创建此处理程序，**然后将其删除**，我就会收到此**构建**失败：

> 错误 CS1061：“App1.Form1”不包含“dataGridView1_CellContentClick”的定义，并且找不到接受“App1.Form1”类型的第一个参数的扩展方法“dataGridView1_CellContentClick”（您是否缺少 using 指令或程序集引用？ )

为什么？

框架如何知道我创建了它？

是否有删除此处理程序的正确方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T16:10:17.473

创建该事件处理程序时，Visual Studio 还将在`.designer.cs`文件中分配事件，以便表单知道在引发事件时要调用什么方法。

您基本上是在删除该方法，而不是调用该方法的内容。

删除事件的另一种方法是获取控件并在“属性”窗口中查看它。清除事件列表中的事件，然后删除方法本身。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-18T16:11:05.623

您必须从 Designer.cs 文件以及代码背后的代码中删除它。

在错误列表中，只需 dbl 单击错误。它会带你去那里。

干杯

# android - IntentService 无法启动的原因？

> ID：12958993
> 
> 赞同：3
> 
> 时间：2012-10-18T16:08:55.093
> 
> 标签：android, service, android-intent, intentservice

我有一个行为异常的 Android IntentService。我通过调用 startService(intent) 向它发送一个意图。

（抱歉，我不在办公桌前，无法粘贴任何实际代码。）

当我拨打上述电话时​​，什么也没有发生。Intent Service 中既不调用构造函数，也不调用 onHandleIntent 方法。没有编译器警告或错误，我在控制台或日志中看不到任何有趣的东西。

当我继续调查这个问题时，我只是想知道是否有一个简短的可能原因列表，为什么 IntentService 不会像这样启动，而没有明显的证据证明原因。问题可能在清单文件中吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-18T16:11:36.423

我怀疑您需要仔细查看 LogCat。这里的常见问题包括：

*   未能在清单中列出服务
*   未能在服务上创建公共零参数构造函数（默认构造函数`IntentService`接受一个参数，您需要添加自己的构造函数）
*   其他语法问题（例如，声明了服务`abstract`）

但是，所有这些都会导致 LogCat 中出现消息。我想不出在没有`startService()`LogCat 消息的情况下不会调用您的代码的情况。