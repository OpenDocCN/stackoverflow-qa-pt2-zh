# StackOverflow 问答 13279000-13279999

# c# - 将 lambda 表达式转换为 linq 查询

> ID：13279000
> 
> 赞同：2
> 
> 时间：2012-11-07T21:59:29.447
> 
> 标签：c#, linq, lambda

有没有办法在 linq 查询中转换这个 lambda 表达式？

```
function List<ViewModel> CreateViewModels(List<Model> models)
{
   return models.Select(x =>
   {
      var viewModel = new ViewModel();

      this.UpdateViewModel(x, viewModel);

      return viewModel;
   }).ToList();
} 
```

其中“UpdateViewModel”是将值从 Model 对象传输到 ViewModel 对象的函数。

好的，这段代码很干净，但我想知道是否有与 linq 查询等效的代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T22:13:14.343

我同意你可能做对了——方法链语法非常有用，实际上是我编写 LINQ 的首选方法。

但是如果你真的想使用 LINQ 查询语法，我认为你必须做这样的事情，这基本上只是将大 lambda 分解成单独的东西：

```
Func<Model, ViewModel> func = m =>
    {
        var viewModel = new ViewModel();
        this.UpdateViewModel(m, viewModel);
        return viewModel;
    };

return (from m in models
        select func(m)
       ).ToList(); 
```

或者，如果您愿意，当然可以将其分解为真正的方法而不是 a `Func`。

如果可以的话，你最好做一些类似的事情：

```
public class ViewModel
{
    public ViewModel(Model m)
    {
        // Do whatever it is you're currently doing in UpdateViewModel
    }
} 
```

然后你可以这样做：

```
from m in models
select new ViewModel(m) 
```

# emacs - Windows下Emacs字体渲染不好

> ID：13279014
> 
> 赞同：9
> 
> 时间：2012-11-07T22:00:17.727
> 
> 标签：emacs, fonts

经过一番谷歌搜索后，我发现人们推荐字体 Inconsolata 用于在 Emacs 中编程。我从这里将它安装在 Windows 和 Linux 上：

[http://www.levien.com/type/myfonts/inconsolata.html](http://www.levien.com/type/myfonts/inconsolata.html)

以下是相同文本 1 - Linux、2 - Windows XP SP3 的屏幕截图：

![Linux](../Images/292ed5d1815e7d9185eff2bfa1196820.png)

![视窗](../Images/26409e3e2695f8e61082ed0de27f342c.png)

在 Windows 下，字体很细，不清晰，阅读不便。是否有可能让它像在 Linux 上一样渲染它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T08:10:51.990

下载并安装 Inconsolata.ttf 字体并安装它而不是 otf：

[http://googlefontdirectory.googlecode.com/hg-history/fffda675769720a297f4d239e7065f751bbe655f/inconsolata/Inconsolata.ttf](http://googlefontdirectory.googlecode.com/hg-history/fffda675769720a297f4d239e7065f751bbe655f/inconsolata/Inconsolata.ttf)

它将在 Windows 上顺利渲染。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-07T22:31:36.170

只需使用 Consolas，它无疑是在 Windows 上使用的最佳等宽字体（[截图](http://i.imgur.com/bC8dB.png)）。

```
(set-face-attribute 'default nil :height 115 :family "Consolas") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-01T17:31:15.327

我最喜欢的是 Source Code Pro ( [https://github.com/adobe-fonts/source-code-pro/releases/tag/1.017R](https://github.com/adobe-fonts/source-code-pro/releases/tag/1.017R) ) - 再次确保使用`ttf`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T03:43:49.803

您可以使用 X11 运行 Cygwin 版本。在这方面，它应该为您提供与 GNU/Linux 下完全相同的输出。

# c++ - 我需要链接哪些库来构建 googlemock 示例？

> ID：13279015
> 
> 赞同：7
> 
> 时间：2012-11-07T22:00:23.110
> 
> 标签：c++, unit-testing, googletest

我能够在 VS2010 中编译 googlemock v1.6.x 并生成发布和调试库。换句话说，我遇到的问题不是[Visual Studio 2010 中的 GoogleMock 和 GoogleTest](https://stackoverflow.com/questions/3141835/googlemock-and-googletest-in-visual-studio-2010)

现在我正在按照[http://code.google.com/p/googlemock/wiki/ForDummies](http://code.google.com/p/googlemock/wiki/ForDummies)的示例进行操作，但我遇到了这些错误。我确实链接了生成的 *.lib 文件并在 VS2010 中添加了正确的库目录。那么我还需要链接什么？

```
1>msvcprtd.lib(MSVCP100D.dll) : error LNK2005: "public: __thiscall std::_Container_base12::~_Container_base12(void)" (??1_Container_base12@std@@QAE@XZ) already defined in gmockd.lib(gmock-all.obj)
1>msvcprtd.lib(MSVCP100D.dll) : error LNK2005: "public: __thiscall std::_Container_base12::_Container_base12(void)" (??0_Container_base12@std@@QAE@XZ) already defined in gmockd.lib(gmock-all.obj)
1>msvcprtd.lib(MSVCP100D.dll) : error LNK2005: "public: void __thiscall std::_Container_base12::_Orphan_all(void)" (?_Orphan_all@_Container_base12@std@@QAEXXZ) already defined in gmockd.lib(gmock-all.obj)
1>msvcprtd.lib(MSVCP100D.dll) : error LNK2005: "public: class std::basic_ostream<char,struct std::char_traits<char> > & __thiscall std::basic_ostream<char,struct std::char_traits<char> >::operator<<(int)" (??6?$basic_ostream@DU?$char_traits@D@std@@@std@@QAEAAV01@H@Z) already defined in gmockd.lib(gmock-all.obj)
1>msvcprtd.lib(MSVCP100D.dll) : error LNK2005: "public: virtual __thiscall std::basic_ios<char,struct std::char_traits<char> >::~basic_ios<char,struct std::char_traits<char> >(void)" (??1?$basic_ios@DU?$char_traits@D@std@@@std@@UAE@XZ) already defined in gmockd.lib(gmock-all.obj)
1>msvcprtd.lib(MSVCP100D.dll) : error LNK2005: "public: virtual __thiscall std::basic_iostream<char,struct std::char_traits<char> >::~basic_iostream<char,struct std::char_traits<char> >(void)" (??1?$basic_iostream@DU?$char_traits@D@std@@@std@@UAE@XZ) already defined in gmockd.lib(gmock-all.obj)
1>msvcprtd.lib(MSVCP100D.dll) : error LNK2005: "public: __thiscall std::basic_iostream<char,struct std::char_traits<char> >::basic_iostream<char,struct std::char_traits<char> >(class std::basic_streambuf<char,struct std::char_traits<char> > *)" (??0?$basic_iostream@DU?$char_traits@D@std@@@std@@QAE@PAV?$basic_streambuf@DU?$char_traits@D@std@@@1@@Z) already defined in gmockd.lib(gmock-all.obj)
1>msvcprtd.lib(MSVCP100D.dll) : error LNK2005: "protected: __thiscall std::basic_ios<char,struct std::char_traits<char> >::basic_ios<char,struct std::char_traits<char> >(void)" (??0?$basic_ios@DU?$char_traits@D@std@@@std@@IAE@XZ) already defined in gmockd.lib(gmock-all.obj)
1>msvcprtd.lib(MSVCP100D.dll) : error LNK2005: "public: virtual __thiscall std::basic_streambuf<char,struct std::char_traits<char> >::~basic_streambuf<char,struct std::char_traits<char> >(void)" (??1?$basic_streambuf@DU?$char_traits@D@std@@@std@@UAE@XZ) already defined in gmockd.lib(gmock-all.obj)
1>msvcprtd.lib(MSVCP100D.dll) : error LNK2005: "protected: char * __thiscall std::basic_streambuf<char,struct std::char_traits<char> >::gptr(void)const " (?gptr@?$basic_streambuf@DU?$char_traits@D@std@@@std@@IBEPADXZ) already defined in gmockd.lib(gmock-all.obj)
1>msvcprtd.lib(MSVCP100D.dll) : error LNK2005: "protected: void __thiscall std::basic_streambuf<char,struct std::char_traits<char> >::setg(char *,char *,char *)" (?setg@?$basic_streambuf@DU?$char_traits@D@std@@@std@@IAEXPAD00@Z) already defined in gmockd.lib(gmock-all.obj)
1>msvcprtd.lib(MSVCP100D.dll) : error LNK2005: "protected: void __thiscall std::basic_streambuf<char,struct std::char_traits<char> >::setp(char *,char *)" (?setp@?$basic_streambuf@DU?$char_traits@D@std@@@std@@IAEXPAD0@Z) already defined in gmockd.lib(gmock-all.obj)
1>msvcprtd.lib(MSVCP100D.dll) : error LNK2005: "protected: char * __thiscall std::basic_streambuf<char,struct std::char_traits<char> >::eback(void)const " (?eback@?$basic_streambuf@DU?$char_traits@D@std@@@std@@IBEPADXZ) already defined in gmockd.lib(gmock-all.obj)
1>msvcprtd.lib(MSVCP100D.dll) : error LNK2005: "protected: char * __thiscall std::basic_streambuf<char,struct std::char_traits<char> >::_Pninc(void)" (?_Pninc@?$basic_streambuf@DU?$char_traits@D@std@@@std@@IAEPADXZ) already defined in gmockd.lib(gmock-all.obj)
1>msvcprtd.lib(MSVCP100D.dll) : error LNK2005: "protected: void __thiscall std::basic_streambuf<char,struct std::char_traits<char> >::setp(char *,char *,char *)" (?setp@?$basic_streambuf@DU?$char_traits@D@std@@@std@@IAEXPAD00@Z) already defined in gmockd.lib(gmock-all.obj)
1>msvcprtd.lib(MSVCP100D.dll) : error LNK2005: "protected: char * __thiscall std::basic_streambuf<char,struct std::char_traits<char> >::pbase(void)const " (?pbase@?$basic_streambuf@DU?$char_traits@D@std@@@std@@IBEPADXZ) already defined in gmockd.lib(gmock-all.obj)
1>msvcprtd.lib(MSVCP100D.dll) : error LNK2005: "protected: char * __thiscall std::basic_streambuf<char,struct std::char_traits<char> >::epptr(void)const " (?epptr@?$basic_streambuf@DU?$char_traits@D@std@@@std@@IBEPADXZ) already defined in gmockd.lib(gmock-all.obj)
1>msvcprtd.lib(MSVCP100D.dll) : error LNK2005: "protected: char * __thiscall std::basic_streambuf<char,struct std::char_traits<char> >::pptr(void)const " (?pptr@?$basic_streambuf@DU?$char_traits@D@std@@@std@@IBEPADXZ) already defined in gmockd.lib(gmock-all.obj)
1>msvcprtd.lib(MSVCP100D.dll) : error LNK2005: "protected: void __thiscall std::basic_streambuf<char,struct std::char_traits<char> >::gbump(int)" (?gbump@?$basic_streambuf@DU?$char_traits@D@std@@@std@@IAEXH@Z) already defined in gmockd.lib(gmock-all.obj)
1>msvcprtd.lib(MSVCP100D.dll) : error LNK2005: "protected: char * __thiscall std::basic_streambuf<char,struct std::char_traits<char> >::egptr(void)const " (?egptr@?$basic_streambuf@DU?$char_traits@D@std@@@std@@IBEPADXZ) already defined in gmockd.lib(gmock-all.obj)
1>msvcprtd.lib(MSVCP100D.dll) : error LNK2005: "protected: void __thiscall std::basic_streambuf<char,struct std::char_traits<char> >::pbump(int)" (?pbump@?$basic_streambuf@DU?$char_traits@D@std@@@std@@IAEXH@Z) already defined in gmockd.lib(gmock-all.obj)
1>msvcprtd.lib(MSVCP100D.dll) : error LNK2005: "protected: __thiscall std::basic_streambuf<char,struct std::char_traits<char> >::basic_streambuf<char,struct std::char_traits<char> >(void)" (??0?$basic_streambuf@DU?$char_traits@D@std@@@std@@IAE@XZ) already defined in gmockd.lib(gmock-all.obj)
1>msvcprtd.lib(MSVCP100D.dll) : error LNK2005: "public: struct std::_Iterator_base12 * * __thiscall std::_Container_base12::_Getpfirst(void)const " (?_Getpfirst@_Container_base12@std@@QBEPAPAU_Iterator_base12@2@XZ) already defined in gmockd.lib(gmock-all.obj)
1>msvcprtd.lib(MSVCP100D.dll) : error LNK2005: "public: void __thiscall std::basic_ios<char,struct std::char_traits<char> >::setstate(int,bool)" (?setstate@?$basic_ios@DU?$char_traits@D@std@@@std@@QAEXH_N@Z) already defined in gmockd.lib(gmock-all.obj)
1>msvcprtd.lib(MSVCP100D.dll) : error LNK2005: "public: __int64 __thiscall std::ios_base::width(__int64)" (?width@ios_base@std@@QAE_J_J@Z) already defined in gmockd.lib(gmock-all.obj)
1>msvcprtd.lib(MSVCP100D.dll) : error LNK2005: "public: __int64 __thiscall std::basic_streambuf<char,struct std::char_traits<char> >::sputn(char const *,__int64)" (?sputn@?$basic_streambuf@DU?$char_traits@D@std@@@std@@QAE_JPBD_J@Z) already defined in gmockd.lib(gmock-all.obj)
1>msvcprtd.lib(MSVCP100D.dll) : error LNK2005: "public: int __thiscall std::basic_streambuf<char,struct std::char_traits<char> >::sputc(char)" (?sputc@?$basic_streambuf@DU?$char_traits@D@std@@@std@@QAEHD@Z) already defined in gmockd.lib(gmock-all.obj)
1>msvcprtd.lib(MSVCP100D.dll) : error LNK2005: "public: class std::basic_streambuf<char,struct std::char_traits<char> > * __thiscall std::basic_ios<char,struct std::char_traits<char> >::rdbuf(void)const " (?rdbuf@?$basic_ios@DU?$char_traits@D@std@@@std@@QBEPAV?$basic_streambuf@DU?$char_traits@D@std@@@2@XZ) already defined in gmockd.lib(gmock-all.obj)
1>msvcprtd.lib(MSVCP100D.dll) : error LNK2005: "public: char __thiscall std::basic_ios<char,struct std::char_traits<char> >::fill(void)const " (?fill@?$basic_ios@DU?$char_traits@D@std@@@std@@QBEDXZ) already defined in gmockd.lib(gmock-all.obj)
1>msvcprtd.lib(MSVCP100D.dll) : error LNK2005: "public: int __thiscall std::ios_base::flags(void)const " (?flags@ios_base@std@@QBEHXZ) already defined in gmockd.lib(gmock-all.obj)
1>msvcprtd.lib(MSVCP100D.dll) : error LNK2005: "public: __int64 __thiscall std::ios_base::width(void)const " (?width@ios_base@std@@QBE_JXZ) already defined in gmockd.lib(gmock-all.obj)
1>msvcprtd.lib(MSVCP100D.dll) : error LNK2005: "public: class std::basic_ostream<char,struct std::char_traits<char> > & __thiscall std::basic_ostream<char,struct std::char_traits<char> >::flush(void)" (?flush@?$basic_ostream@DU?$char_traits@D@std@@@std@@QAEAAV12@XZ) already defined in gmockd.lib(gmock-all.obj)
1>msvcprtd.lib(MSVCP100D.dll) : error LNK2005: "public: class std::basic_ostream<char,struct std::char_traits<char> > * __thiscall std::basic_ios<char,struct std::char_traits<char> >::tie(void)const " (?tie@?$basic_ios@DU?$char_traits@D@std@@@std@@QBEPAV?$basic_ostream@DU?$char_traits@D@std@@@2@XZ) already defined in gmockd.lib(gmock-all.obj)
1>msvcprtd.lib(MSVCP100D.dll) : error LNK2005: "public: bool __thiscall std::ios_base::good(void)const " (?good@ios_base@std@@QBE_NXZ) already defined in gmockd.lib(gmock-all.obj)
1>msvcprtd.lib(MSVCP100D.dll) : error LNK2005: "public: void __thiscall std::basic_ostream<char,struct std::char_traits<char> >::_Osfx(void)" (?_Osfx@?$basic_ostream@DU?$char_traits@D@std@@@std@@QAEXXZ) already defined in gmockd.lib(gmock-all.obj)
1>msvcprtd.lib(MSVCP100D.dll) : error LNK2005: "public: class std::basic_ostream<char,struct std::char_traits<char> > & __thiscall std::basic_ostream<char,struct std::char_traits<char> >::operator<<(unsigned int)" (??6?$basic_ostream@DU?$char_traits@D@std@@@std@@QAEAAV01@I@Z) already defined in gmockd.lib(gtest-all.obj)
1>msvcprtd.lib(MSVCP100D.dll) : error LNK2005: "public: class std::locale::facet * __thiscall std::locale::facet::_Decref(void)" (?_Decref@facet@locale@std@@QAEPAV123@XZ) already defined in gmockd.lib(gmock-all.obj)
1>libcpmtd.lib(ios.obj) : error LNK2005: "private: static void __cdecl std::ios_base::_Ios_base_dtor(class std::ios_base *)" (?_Ios_base_dtor@ios_base@std@@CAXPAV12@@Z) already defined in msvcprtd.lib(MSVCP100D.dll)
1>libcpmtd.lib(ios.obj) : error LNK2005: "public: static void __cdecl std::ios_base::_Addstd(class std::ios_base *)" (?_Addstd@ios_base@std@@SAXPAV12@@Z) already defined in msvcprtd.lib(MSVCP100D.dll)
1>libcpmtd.lib(locale0.obj) : error LNK2005: "private: static void __cdecl std::locale::facet::_Facet_Register(class std::locale::facet *)" (?_Facet_Register@facet@locale@std@@CAXPAV123@@Z) already defined in msvcprtd.lib(locale0_implib.obj)
1>libcpmtd.lib(locale0.obj) : error LNK2005: "private: static class std::locale::_Locimp * __cdecl std::locale::_Getgloballocale(void)" (?_Getgloballocale@locale@std@@CAPAV_Locimp@12@XZ) already defined in msvcprtd.lib(MSVCP100D.dll)
1>libcpmtd.lib(locale0.obj) : error LNK2005: "private: static class std::locale::_Locimp * __cdecl std::locale::_Init(void)" (?_Init@locale@std@@CAPAV_Locimp@12@XZ) already defined in msvcprtd.lib(MSVCP100D.dll)
1>libcpmtd.lib(locale0.obj) : error LNK2005: "public: static void __cdecl std::_Locinfo::_Locinfo_ctor(class std::_Locinfo *,char const *)" (?_Locinfo_ctor@_Locinfo@std@@SAXPAV12@PBD@Z) already defined in msvcprtd.lib(MSVCP100D.dll)
1>libcpmtd.lib(locale0.obj) : error LNK2005: "public: static void __cdecl std::_Locinfo::_Locinfo_dtor(class std::_Locinfo *)" (?_Locinfo_dtor@_Locinfo@std@@SAXPAV12@@Z) already defined in msvcprtd.lib(MSVCP100D.dll)
1>libcpmtd.lib(xlock.obj) : error LNK2005: "public: __thiscall std::_Lockit::_Lockit(int)" (??0_Lockit@std@@QAE@H@Z) already defined in msvcprtd.lib(MSVCP100D.dll)
1>libcpmtd.lib(xlock.obj) : error LNK2005: "public: __thiscall std::_Lockit::~_Lockit(void)" (??1_Lockit@std@@QAE@XZ) already defined in msvcprtd.lib(MSVCP100D.dll)
1>LIBCMTD.lib(_file.obj) : error LNK2005: ___iob_func already defined in MSVCRTD.lib(MSVCR100D.dll)
1>LIBCMTD.lib(setlocal.obj) : error LNK2005: __configthreadlocale already defined in MSVCRTD.lib(MSVCR100D.dll)
1>LIBCMTD.lib(dbgheap.obj) : error LNK2005: __free_dbg already defined in MSVCRTD.lib(MSVCR100D.dll)
1>LIBCMTD.lib(dbgheap.obj) : error LNK2005: __CrtSetCheckCount already defined in MSVCRTD.lib(MSVCR100D.dll)
1>LIBCMTD.lib(osfinfo.obj) : error LNK2005: __open_osfhandle already defined in MSVCRTD.lib(MSVCR100D.dll)
1>LIBCMTD.lib(dosmap.obj) : error LNK2005: __errno already defined in MSVCRTD.lib(MSVCR100D.dll)
1>LIBCMTD.lib(crt0dat.obj) : error LNK2005: _exit already defined in MSVCRTD.lib(MSVCR100D.dll)
1>LIBCMTD.lib(crt0dat.obj) : error LNK2005: __exit already defined in MSVCRTD.lib(MSVCR100D.dll)
1>LIBCMTD.lib(crt0dat.obj) : error LNK2005: __cexit already defined in MSVCRTD.lib(MSVCR100D.dll)
1>LIBCMTD.lib(crt0dat.obj) : error LNK2005: __amsg_exit already defined in MSVCRTD.lib(MSVCR100D.dll)
1>LIBCMTD.lib(crt0dat.obj) : error LNK2005: __initterm_e already defined in MSVCRTD.lib(MSVCR100D.dll)
1>LIBCMTD.lib(fflush.obj) : error LNK2005: _fflush already defined in MSVCRTD.lib(MSVCR100D.dll)
1>LIBCMTD.lib(lconv.obj) : error LNK2005: _localeconv already defined in MSVCRTD.lib(MSVCR100D.dll)
1>LIBCMTD.lib(dbghook.obj) : error LNK2005: __crt_debugger_hook already defined in MSVCRTD.lib(MSVCR100D.dll)
1>LIBCMTD.lib(mlock.obj) : error LNK2005: __lock already defined in MSVCRTD.lib(MSVCR100D.dll)
1>LIBCMTD.lib(mlock.obj) : error LNK2005: __unlock already defined in MSVCRTD.lib(MSVCR100D.dll)
1>LIBCMTD.lib(winxfltr.obj) : error LNK2005: __XcptFilter already defined in MSVCRTD.lib(MSVCR100D.dll)
1>LIBCMTD.lib(crt0init.obj) : error LNK2005: ___xi_a already defined in MSVCRTD.lib(cinitexe.obj)
1>LIBCMTD.lib(crt0init.obj) : error LNK2005: ___xi_z already defined in MSVCRTD.lib(cinitexe.obj)
1>LIBCMTD.lib(crt0init.obj) : error LNK2005: ___xc_a already defined in MSVCRTD.lib(cinitexe.obj)
1>LIBCMTD.lib(crt0init.obj) : error LNK2005: ___xc_z already defined in MSVCRTD.lib(cinitexe.obj)
1>LIBCMTD.lib(hooks.obj) : error LNK2005: "void __cdecl terminate(void)" (?terminate@@YAXXZ) already defined in MSVCRTD.lib(MSVCR100D.dll)
1>LIBCMTD.lib(invarg.obj) : error LNK2005: __invalid_parameter already defined in MSVCRTD.lib(MSVCR100D.dll)
1>LIBCMTD.lib(invarg.obj) : error LNK2005: __invoke_watson already defined in MSVCRTD.lib(MSVCR100D.dll)
1>LIBCMTD.lib(sprintf.obj) : error LNK2005: _sprintf_s already defined in MSVCRTD.lib(MSVCR100D.dll)
1>LIBCMTD.lib(tolower.obj) : error LNK2005: _tolower already defined in MSVCRTD.lib(MSVCR100D.dll)
1>LIBCMTD.lib(strtol.obj) : error LNK2005: _strtol already defined in MSVCRTD.lib(MSVCR100D.dll)
1>LIBCMTD.lib(strtoq.obj) : error LNK2005: __strtoui64 already defined in MSVCRTD.lib(MSVCR100D.dll)
1>LIBCMTD.lib(dbgrptw.obj) : error LNK2005: __CrtDbgReportW already defined in MSVCRTD.lib(MSVCR100D.dll)
1>LIBCMTD.lib(vsnprnc.obj) : error LNK2005: __vsnprintf_s already defined in MSVCRTD.lib(MSVCR100D.dll)
1>LIBCMTD.lib(printf.obj) : error LNK2005: _printf already defined in MSVCRTD.lib(MSVCR100D.dll)
1>LIBCMTD.lib(vprintf.obj) : error LNK2005: _vprintf already defined in MSVCRTD.lib(MSVCR100D.dll)
1>LINK : warning LNK4098: defaultlib 'MSVCRTD' conflicts with use of other libs; use /NODEFAULTLIB:library
1>LINK : warning LNK4098: defaultlib 'LIBCMTD' conflicts with use of other libs; use /NODEFAULTLIB:library
1>LIBCMTD.lib(crt0.obj) : error LNK2019: unresolved external symbol _main referenced in function ___tmainCRTStartup
1>C:\Documents and Settings\fouts\My Documents\Visual Studio 2010\GMockTest\Debug\GMockTest.exe : fatal error LNK1120: 1 unresolved externals
1> 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-07T23:57:24.183

这看起来您选择的 C 运行时和 C++ 标准库不匹配。

您可以使用编译器开关 、 或 . 在静态 (.lib) 或共享 (DLL) 版本`/MT`之间进行`/MTd`选择。 变体表示静态库和共享库。附录指出了每个的调试版本。`/MD``/MDd``MT``MD``d`

这些可以通过转到项目 => 属性 => 配置属性 => C/C++ => 代码生成 => 运行时库在 Visual Studio 中设置

问题似乎是您的项目使用`/MD`and `/MDd`，但 GMock 和 Gtest 是使用`/MT`and构建的`/MTd`。您需要使用`/MD`and`/MDd`标志重新编译 GMock/Gtest，或者将您的标志更改为`/MT`and `/MTd`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-23T16:26:51.630

您可以将 Gmock 构建为 dll 并使用它（这是 1.7 不知道它是否适用于 1.6）设置预处理器标志（属性->c/c++->预处理器->预处理器定义） GTEST_CREATE_SHARED_LIBRARY 将 Gmock 构建为 dll，并使用 GTEST_LINKED_AS_SHARED_LIBRARY 构建消耗 gmock 的 dll

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-07-18T12:44:08.620

我有类似的问题： 解决方案：发布版本属性：配置属性>c/c++>常规>警告级别>level4（/W4）属性：配置属性>代码生成>运行时库：多线程（/Mt）属性：配置属性>预编译头文件：不使用预编译头文件

调试版本属性：配置属性>c/c++>General>Warning level>level4(/W4) 属性：配置属性>代码生成>运行库：多线程(/MTd) 属性：配置属性>预编译头：不使用预编译标题

# unix - 如何在屏幕会话中控制屏幕会话？

> ID：13279016
> 
> 赞同：7
> 
> 时间：2012-11-07T22:00:24.077
> 
> 标签：unix, ssh, gnu-screen

```
my local machine's terminal
    screen session 12345
        ssh me@remotemachine (I want to be here)
            screen session 67890 (I'm here) 
```

我让自己陷入了无法通过 ssh 会话断开连接的困境。

如果我在屏幕会话 67890 中按 ctrl-a ctrl-d，它会将我从会话 12345 中分离出来。那么我如何进入第 3 级 ssh 会话以便断开它？

您提供的任何基于终止的解决方案都不得损害屏幕会话 67890 中运行的进程。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-07T22:22:44.830

`ctrl-a a`相当于发送`ctrl-a`给孩子`screen`，所以`ctrl-a a d`应该从第一个嵌套会话断开。如果您将它们嵌套得更深，`ctrl-a a a d`将断开第二个嵌套会话，并`a`根据需要继续添加额外的 s。但是，如果您的嵌套深度超过 1 或 2 层，当您试图保持直截了当向哪个会话发送命令时，请不要寻求同情……

# c# - 如何避免在我的服务层上引用实体框架？

> ID：13279018
> 
> 赞同：10
> 
> 时间：2012-11-07T22:00:29.617
> 
> 标签：c#, .net, entity-framework, oop, generics

在尝试为新项目创建数据访问层时，我遇到了我只能想象为 OOP/设计/泛型问题（使用 EF 4.3 访问数据库）。

主要是我想用这个数据层实现两件事：

*   我在项目中拥有的不同 Context 对象应该共享相同的连接字符串。
*   具有通用实现的抽象存储库类。

出于某种原因，如果不引用服务层上的 EntityFramework，我就无法编译我的解决方案。我正在寻找解决此问题的方法。这是我所拥有的：

```
//Project/Namespace BusinessLogicLayer.DomainClasses
//POCO classes mapped on Entity Framework.

//Project/Namespace DataAccessLayer.Base
//Base classes and interfaces for all data access layer, such as:

public abstract class BaseContext<TContext> : DbContext where TContext : DbContext
{
  //To allow multiple contexts sharing the same connection string
  protected BaseContext(): base("name=MyConnectionString") {}
}

//Generic interface for a read-only repository
public interface IReadOnlyRepository<T> : IDisposable where T : class

//Generic interface for a read/write repository
public interface IRepository<T> : IReadOnlyRepository<T> where T : class

//Basic implementation for a read-only repository
public abstract class BaseReadOnlyRepository<C, T> : IReadOnlyRepository<T>
    where T : class
    where C : BaseContext<C>, new()
{
}

//Basic implementation for a read/write repository
public abstract class BaseRepository<C, T> : IRepository<T>
    where T : class
    where C : BaseContext<C>, new()
{
}

//Project DataAccessLayer.AccountContext/ Namespace DataAccessLayer
//Context class:

public class AccountContext : BaseContext<AccountContext> {}

//With this, I can have simple repositories:

public class UserRepository : BaseRepository<AccountContext, User>
{ //All implementation comes from the base abstract class, unless I need to change it (override methods)
} 
```

我在数据访问和应用程序（Windows 窗体）之间有一个服务层。因为我有一个通用存储库，所以拥有通用服务似乎是一个很好且合乎逻辑的想法。最后，与存储库结构非常相似：

```
//Project/Namespace BusinessLogicLayer.Services
//Service layer supposed to reference only the repository project and not Entity Framework.

//Generic interface for a read-only service working with a read-only repository
public interface IReadOnlyService<T> where T : class {}

//Generic interface for a read/write service working with a read/write repository
public interface IService<T> : IReadOnlyService<T> where T : class

//Base implementation for a read-only service
public abstract class BaseReadOnlyService<T, R> : IReadOnlyService<T>
    where T : class
    where R : IReadOnlyRepository<T>, new()
{
}

//Base implementation for a read/write service
public abstract class BaseService<T, R> : IService<T>
    where T : class
    where R : IRepository<T>, new()
{
}

//Concrete sample service
public class UserService : BaseService<User, UserRepository>
{ //As with the repository I can change the default behavior of implementation overriding methods
} 
```

使用此设置，编译的唯一方法是在服务层项目上引用实体框架。我怎样才能避免在那里引用实体框架？

在这一点上，我什至愿意把它全部扔掉并重建所有东西，但这是我发现根据我的需要使它工作的唯一方法（DbContext 共享连接字符串，通用存储库以避免复制代码）。

感谢任何帮助。谢谢。

*--编辑--包括我在发布问题 3 小时后执行的一些额外步骤--*

为了弄清楚这一点，我开始创建一个示例项目，其中包含与上面相同的代码以及一些实现，以尽可能地模仿原始项目的结果。

我创建了域类项目、整个基础数据层项目，然后是上下文项目。我注意到我需要在上下文项目中引用实体框架，即使上下文类不是直接从 DbContext 派生的。相反，它从派生自 DbContext 的抽象类派生。这没关系，因为我的上下文将包含 DbSet 和任何其他与 DbContext 相关的实现。

接下来是存储库项目。需要引用所有其他三个（域、基础数据层和上下文）。我的存储库没有代码。所有功能都依赖于祖先。我尝试编译存储库项目，而 VS 要求我参考实体框架。我想知道这是否真的只是嵌入库的问题。如果这一点得到证实，那将是一个惊喜。实体框架库出现在其他项目的输出中。为什么我也需要在这里引用它？是什么让 VS 需要这个？

无论如何，出于测试目的，我添加了参考。毕竟，我在数据层里面。我可以忍受这一点。转到服务层。为了简单起见，我将所有的服务类放到同一个项目中。

一个可能的缺陷是服务抽象类的约束之一是存储库接口。这需要我在我的服务层上添加对基础数据层的引用。也许已经在这里，我可以做一些事情，让我只使用存储库引用。我别无选择，只能引用基础数据层。

最后，创建了我的具​​体服务，VS 给了我以下错误消息：“System.Data.Entity.DbContext”类型是在未引用的程序集中定义的。您必须添加对程序集“EntityFramework, Version=4.3.1.0, Culture=neutral, PublicKeyToken=b77a5c561934e089”的引用。

所以，最后，唯一的办法就是在服务层引用Entity Framework。在某些时候，在构建 Windows 窗体应用程序时，我还必须引用实体框架。

我应该怎么做才能避免这些参考？我可以对这个结构进行哪些改进？

我所知道的是，我的应用程序当然不必知道实体框架在其他层的任何地方都涉及。服务层也没有。服务只会使用存储库。存储库甚至可以为测试提供虚假数据。

如果有人感兴趣，我上传了我在写这篇文章时创建的项目。这是一个 1,17Mb 的 zip 文件，没有任何二进制文件（我通过 Nuget 获得的 Entity Framework 4.3.1 dll 除外）。链接：[http](http://www.mediafire.com/?b45zkedy2j7eocc) ://www.mediafire.com/?b45zkedy2j7eocc 。

再次感谢您的帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-08T03:45:27.570

`BaseContext`而不是在你的抽象`BusinessLogicLayer`，声明一个接口。然后在您的数据访问层中实现它。

```
public interface IDataContext : IDisposable
{
   int SaveChanges();
}

//Generic interface for a read-only repository
public interface IReadOnlyRepository<T> : IDisposable where T : class

//Generic interface for a read/write repository
public interface IRepository<T> : IReadOnlyRepository<T> where T : class

//Basic implementation for a read-only repository
public abstract class BaseReadOnlyRepository<C, T> : IReadOnlyRepository<T>
    where T : class
    where C : IDataContext
{
}

//Basic implementation for a read/write repository
public abstract class BaseRepository<C, T> : IRepository<T>
    where T : class
    where C : IDataContext
{
}

public interfaces IAccountContext : IDataContext
{
   //other methods
} 
```

然后在数据访问层

```
public abstract class BaseContext : DbContext, IDataContext
{
  //To allow multiple contexts sharing the same connection string
  protected BaseContext(): base("name=MyConnectionString") {}
}

public class AccountContext : BaseContext, IAccountContext {}

//With this, I can have simple repositories:

public class UserRepository : BaseRepository<AccountContext, User>
{ //All implementation comes from the base abstract class, unless I need to change it (override methods)
} 
```

您可以使用 DI/Ioc 将上下文和存储库注入服务，而不是在存储库中实例化上下文。

这种解耦将消除在业务逻辑层中引用 EF 程序集的需要，但请记住，您的域实体并非完全独立于 EF。例如导航属性、关系修复将无法在 EF 上下文之外工作。所以在某种程度上你实际上是在隐藏一个依赖！

# matlab - 在 MATLAB GUIDE 中动态创建编辑文本框

> ID：13279021
> 
> 赞同：0
> 
> 时间：2012-11-07T22:00:43.953
> 
> 标签：matlab, user-interface, dynamic, input, matlab-guide

我想知道我们是否可以在运行时确定 MATLAB GUIDE 中编辑文本框的数量？

一个典型的场景是用户将输入一些输入，并根据这个数字，我想生成一些编辑文本框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T09:58:45.667

你的问题有3个部分。

要回答您的问题标题“在 matlab 指南中动态创建编辑文本框”，我建议使用 Slayton 的解决方案并创建一个带有*n 个*编辑文本框提示的新图形。如果您真的希望在初始指南图中使用它，另一种解决方案是最初禁用它们/使它们不可见。然后在输入导入函数的回调函数中，您可以决定要启用多少个编辑文本框。

回答你的问题

> 我想知道我们是否可以在运行时确定 matlab 指南中编辑文本框的数量？

在运行时，您可以这样计算“句柄”结构中的所有文本框：

```
hCell=struct2cell(handles);
a=0;
for i=1:length(hCell)
    if strcmp(get(hCell{i},'Type'),'uicontrol')
        if strcmp(get(hCell{i},'Style'),'edit')
            a=a+1;
        end
    end
end
a%number of edit boxes 
```

如果在您的“句柄”结构中您有一个非句柄，您应该多问一个“如果”...

关于你信息的最后一部分，我不明白：

> 我不会生成许多编辑文本框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T22:09:19.860

我从未使用过 GUIDE，但您可以`uicontrols`像这样以编程方式创建：

```
f = figure;
nEdit = 10;

for i = 1:nEdit
   textEl(i) = uicontrol('Parent', f, 'Style', 'edit', 'Position', [0 (i-1)*30, 100, 20])
end 
```

# c++ - 是否有类似于循环（循环）迭代器的东西？

> ID：13279023
> 
> 赞同：3
> 
> 时间：2012-11-07T22:00:45.873
> 
> 标签：c++, iterator, iteration

我想知道是否有某种迭代器可以迭代 std::string 中的值，当它到达结尾时从头开始。换句话说，这个对象会无限迭代，一遍又一遍地吐出相同的值序列。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T22:03:12.510

生成器函数可能就是这样。Boost Iterator 有一个迭代器适配器：

*   [http://www.boost.org/doc/libs/1_52_0/libs/utility/generator_iterator.htm](http://www.boost.org/doc/libs/1_52_0/libs/utility/generator_iterator.htm)

样本：[http ://coliru.stacked-crooked.com/a/267279405be9289d](http://coliru.stacked-crooked.com/a/267279405be9289d)

```
#include <iostream>
#include <functional>
#include <algorithm>
#include <iterator>
#include <boost/generator_iterator.hpp>

int main()
{
  const std::string data = "hello";
  auto curr = data.end();

  std::function<char()> gen = [curr,data]() mutable -> char
  { 
      if (curr==data.end())
          curr = data.begin();
      return *curr++;
  };

  auto it = boost::make_generator_iterator(gen);
  std::copy_n(it, 35, std::ostream_iterator<char>(std::cout, ";"));
} 
```

# c - 将 uint16_t 转换为 char[2] 以通过套接字（unix）发送

> ID：13279024
> 
> 赞同：13
> 
> 时间：2012-11-07T22:00:47.310
> 
> 标签：c, sockets, unix, tcp, stream

我知道在这方面有一些大致的事情......但是我的大脑很疼，我找不到任何东西来完成这项工作......

我正在尝试通过 unix 套接字发送一个 16 位无符号整数。为此，我需要将 uint16_t 转换为两个字符，然后我需要在连接的另一端读取它们并将其转换回unsigned int 或 uint16_t，此时使用 2bytes 或 4bytes 都没有关系（我正在运行 64bit，这就是为什么我不能使用 unsigned int :)

我在 C 顺便说一句

谢谢

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-11-07T22:10:15.233

为什么不直接用掩码和移位把它分解成字节呢？

```
 uint16_t value = 12345;
 char lo = value & 0xFF;
 char hi = value >> 8; 
```

（编辑）

在另一端，你用相反的方式组装：

```
 uint16_t value = lo | uint16_t(hi) << 8; 
```

在我的头顶上，不确定是否需要演员表。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-07T22:08:59.767

```
char* pUint16 = (char*)&u16; 
```

即投射uint16_t的地址。

```
char c16[2];
uint16_t ui16 = 0xdead;
memcpy( c16, ui16, 2 ); 
```

c16 现在包含 u16 的 2 个字节。在远端，您可以简单地反转该过程。

```
char* pC16 = /*blah*/
uint16_t ui16;
memcpy( &ui16, pC16, 2 ); 
```

有趣的是，尽管调用了 memcpy，但几乎每个编译器都会对其进行优化，因为它的大小是固定的。

正如 Steven sudt 指出的那样，您可能会遇到大端序问题。为了解决这个问题，您可以使用 htons（host-to-network short）功能。

```
uint16_t ui16correct = htons( 0xdead ); 
```

并在远端使用 ntohs (network-to-host short)

```
uint16_t ui16correct = ntohs( ui16 ); 
```

在 little-endian 机器上，这会将 short-endian 转换为 big-endian，然后在远端从 big-endian 转换回来。在大端机器上，这两个函数什么都不做。

当然，如果您*知道*网络上两台机器的架构使用相同的字节序，那么您可以避免这一步。

查找 ntohl 和 htonl 以处理 32 位整数。大多数平台也支持 64 位的 ntohll 和 htonll。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-07T22:11:32.770

听起来您需要使用[位掩码和移位运算符](http://en.wikipedia.org/wiki/Bitwise_operation)。

要将一个 16 位数字拆分为两个 8 位数字：

*   您使用按位与运算符（C 中的 &）屏蔽低 8 位，以便高 8 位全部变为 0，然后将该结果分配给一个字符。
*   您使用右移位运算符（C 中的>>）将高 8 位向右移动，以便将低 8 位全部推出整数，只留下前 8 位，并将其分配给另一个字符。

然后，当您通过连接发送这两个字符时，您会执行相反的操作：将过去的前 8 位向左移动 8 位，然后使用按位或将其与其他 8 位组合。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-07T22:14:01.923

基本上，您通过套接字发送 2 个字节，这就是套接字需要知道的所有内容，无论字节顺序、符号等...只需将您的 uint16 分解为 2 个字节并通过套接字发送它们。

```
char byte0 = u16 & 0xFF;
char byte1 = u16 >> 8; 
```

在另一端以相反的方式进行转换

# javascript - 检测元素是否指定了背景？

> ID：13279026
> 
> 赞同：8
> 
> 时间：2012-11-07T22:01:01.647
> 
> 标签：javascript, jquery, html, css

我试图确定一个元素是否明确设置了背景。我想我可以检查一下是否`.css('background')`设置了 *，但是，它在浏览器之间是不一致的。例如，chrome 显示一个没有设置背景的元素

```
background: rgba(0, 0, 0, 0) none repeat scroll 0% 0% / auto padding-box border-box
background-color: rgba(0, 0, 0, 0)
background-image: none 
```

而 IE8 显示

```
background: undefined
background-color: transparent
background-image: none 
```

[（这里是](http://jsfiddle.net/WG9MC/3/)测试用例）

*（在 jQuery 中获取渲染样式不支持 CSS 的简写属性）

如果不处理每个单独的案例，是否有更好的方法来检测这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T22:17:01.917

### 临时元素方法

这并不理想，但是您可以在 js 启动时创建一个临时元素，将其插入文档中隐藏的某个位置*（因为如果您没有为 webkit 浏览器获取空样式）*，然后读取该元素的默认背景样式集。这将为您提供基线值。然后当你与你的真实元素进行比较时，如果它们不同，你就知道背景已经设置好了。显然，这种方法的缺点是它无法检测您是否专门将背景设置为基线状态。

```
var baseline = $('<div />').hide().appendTo('body').css('background');

var isBackgroundSet = ( element.css('background') != baseline ); 
```

如果你想避免元素上可能的全局样式，那会破坏系统，即：

```
div { background: red; } 
```

...您可以改用以下内容，但我怀疑它是否适用于较旧的浏览器：

```
var baseline = $('<fake />').hide().appendTo('body').css('background'); 
```

### 背景

我花了一些时间来解决类似的问题 - 当设置为百分比时，尝试从元素中获取原始宽度值。这比我想象的要棘手得多，最后我使用了类似的临时元素解决方案。正如 Rene Koch 上面所做的那样，我还期望该`getComputedStyle`方法会起作用……真的很烦人，它没有。试图检测源 CSS 世界和运行时 CSS 世界之间的差异是一件困难的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T22:19:40.103

这应该有效：

```
function isBGDefined(ele){
    var img = $(ele).css('backgroundImage'),
        col = $(ele).css('backgroundColor');

    return img != 'none' || (col != 'rgba(0, 0, 0, 0)' && col != 'transparent');
}; 
```

[**演示**](http://jsfiddle.net/dH6zZ/1/)

我没有费心测试该`background`属性，因为最后，它会改变计算的样式`backgroundImage`和/或`backgroundColor`。

这是针对您的测试用例运行的代码（添加了另一个）：http: [//jsfiddle.net/WG9MC/4/](http://jsfiddle.net/WG9MC/4/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T16:13:18.043

使用@pebbl 建议的方法，我编写了一个小的 jQuery 函数，`hasBack()`来确定元素是否具有其背景集。

```
$.fn.hasBack = function()
{
    var me = $.fn.hasBack;
    if(!me.cache)
    {
        // get the background color and image transparent/none values
        // create a temporary element
        var $tmpElem = $('<div />').hide().appendTo('body');
        $.fn.hasBack.cache = {
            color: $tmpElem.css('background-color'),
            image: $tmpElem.css('background-image')
        };
        $tmpElem.remove();
    }
    var elem = this.eq(0);
    return !(elem.css('background-color') === me.cache.color && elem.css('background-image') === me.cache.image);
} 
```

这在 Chrome v22、Firefox v15、Opera 12.1、IE9、IE9 中进行了测试，设置为浏览器模式 9 compat、9、8、7 和 quirks 模式。

测试用例[在这里](http://jsfiddle.net/emosaurusrex/DACwz/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T22:08:49.233

这篇文章解释了如何： [http ://robertnyman.com/2006/04/24/get-the-rendered-style-of-an-element/](http://robertnyman.com/2006/04/24/get-the-rendered-style-of-an-element/)

```
function getStyle(oElm, strCssRule){
    var strValue = "";
    if(document.defaultView && document.defaultView.getComputedStyle){
        strValue = document.defaultView.getComputedStyle(oElm, "").getPropertyValue(strCssRule);
    }
    else if(oElm.currentStyle){
        strCssRule = strCssRule.replace(/\-(\w)/g, function (strMatch, p1){
            return p1.toUpperCase();
        });
        strValue = oElm.currentStyle[strCssRule];
    }
    return strValue;
} 
```

# cakephp - cakephp：如何在 $paginate 的条件下使用或/和

> ID：13279030
> 
> 赞同：0
> 
> 时间：2012-11-07T22:01:22.903
> 
> 标签：cakephp

实际上，我想满足这个 sql 要求：

... 其中 (type_id = 6 OR type_id = 8) 和状态 = 2 ....

但我不知道如何在 $paginate 中设置条件。

```
var $paginate = array(
        'Student'=>array(
                    'limit' => 10,
                    'fields'=>array('Student.id','Student.firstname','Student.lastname'),
                    'order' =>array('Student.id'=>'desc'),
                    'conditions' => ?,
                ),
        ); 
```

任何人都知道如何设置条件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T22:23:26.370

基于此站点[http://book.cakephp.org/1.3/view/1030/Complex-Find-Conditions](http://book.cakephp.org/1.3/view/1030/Complex-Find-Conditions) （它不是最新版本，但可以尝试）

```
var $paginate = array(
        'Student'=>array(
                    'limit' => 10,
                    'fields'=>array('Student.id','Student.firstname','Student.lastname'),
                    'order' =>array('Student.id'=>'desc'),
                    'conditions' => array(
                         'Student.type_id' => array(6, 8),
                         'Student.status' => 2
                         )

                ),
        ); 
```

或者

```
var $paginate = array(
        'Student'=>array(
                    'limit' => 10,
                    'fields'=>array('Student.id','Student.firstname','Student.lastname'),
                    'order' =>array('Student.id'=>'desc'),
                    'conditions' => array(
                          'Student.status' => 2,
                          "OR" => array (
                               'Student.type_id' => 6,
                               'Student.type_id' => 8
                                )                             
                         )

                ),
        ); 
```

**编辑：在这种情况下不能使用第二个版本，因为现在 OR 数组有两个具有相同键的元素，并且只会检查最后一个 (8)**

[NB] 如果我犯了一些语法错误，请见谅 :)

# c# - AppFabric 1.0 错误 服务器集合不能为空

> ID：13279038
> 
> 赞同：2
> 
> 时间：2012-11-07T22:01:56.543
> 
> 标签：c#, asp.net, appfabric, windows-server, appfabric-cache

**运行简单的Windows Server App Fabric 1.0**演示控制台应用程序时出现以下错误：

```
ErrorCode<ERRCA0021>:SubStatus<ES0001>:Server collection cannot be empty. 
```

请帮帮我..我错过了什么..?? 我已经查看了互联网上的每个地方，似乎没有任何东西可以解决这个问题。谢谢..

我的申请如下：

```
static void Main(string[] args)
{
    var factory = new Microsoft.ApplicationServer.Caching.DataCacheFactory(); <--- *** Error here

    var cache = factory.GetDefaultCache();
    var key = "mykey";
    var obj = cache[key];
    if (obj == null)
    {
        cache[key] = "I am data for caching";
    }
    obj = cache[key];
    Console.WriteLine(obj);
    Console.Read();
} 
```

我的 app.config 如下：

```
<?xml version="1.0"?>
<configuration>
<configSections>
    <section name="dataCacheClients"
                type="Microsoft.ApplicationServer.Caching.DataCacheClientsSection, Microsoft.ApplicationServer.Caching.Core" /> 
</configSections>
<dataCacheClients>
<dataCacheClient>
    <hosts>
        <host name="MyMachineNameHere" cachePort="22233" />
    </hosts>
</dataCacheClient>
</dataCacheClients>
</configuration> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T22:16:13.407

我按如下方式更新了我的 appconfig 并且它有效....

```
<?xml version="1.0"?>
<configuration>

    <!--configSections must be the FIRST element -->
    <configSections>
        <!-- required to read the <dataCacheClient> element -->
        <section name="dataCacheClient"
            type="Microsoft.ApplicationServer.Caching.DataCacheClientSection,
            Microsoft.ApplicationServer.Caching.Core, Version=1.0.0.0, 
            Culture=neutral, PublicKeyToken=31bf3856ad364e35"
            allowLocation="true"
            allowDefinition="Everywhere"/>
    </configSections>

    <!-- cache client -->
    <dataCacheClient>
        <!-- cache host(s) -->
        <hosts>
            <host
               name="MyMachineNameHere"
               cachePort="22233"/>
        </hosts>
    </dataCacheClient>

</configuration> 
```

# c++ - 编译 C++ 应用程序时的错误 (Apache Thrift)

> ID：13279040
> 
> 赞同：3
> 
> 时间：2012-11-07T22:02:06.927
> 
> 标签：c++, macos, compiler-errors, makefile, thrift

我想使用 C++ 程序[Apache Thrift](http://thrift.apache.org/)进行一些开发，我将在其中更改一些源代码并尝试为开源社区贡献一些代码。为此，我需要能够从源代码构建和安装 Apache Thrift，但是当我尝试构建它时遇到了一些错误。

我在 Google 上搜索过，但找不到任何可以解决我一直遇到的问题的答案。我正在运行 OSX Mountain Lion 10.8.2，我想我已经安装了[http://thrift.apache.org/docs/install/](http://thrift.apache.org/docs/install/)中列出的所有要求。

我认为真正的问题是当我跑步时`make`（如果你现在想查看该信息，请向下滚动），但以防万一，我将提及所有内容。

当我按照[http://thrift.apache.org/docs/BuildingFromSource/](http://thrift.apache.org/docs/BuildingFromSource/)`./bootstrap.sh`的说明在 thrift 文件夹中运行时，我会在输出顶部收到一些警告，但我认为它们不是问题，因为我已经在“[成功的构建](https://builds.apache.org/job/Thrift/lastSuccessfulBuild/consoleFull)”中看到了它们。以下是警告：

```
configure.in:3: warning: prefer named diversions
configure.in:3: warning: prefer named diversions
configure.ac: warning: missing AC_CHECK_HEADERS([wchar.h]) wanted by: lib/py/compat/win32/stdint.h:52 
```

如果需要，这里是`./bootstrap.sh`命令的整个输出：

```
Configuring for:
PHP Api Version:         20090626
Zend Module Api No:      20090626
Zend Extension Api No:   220090626
configure.in:3: warning: prefer named diversions
configure.in:3: warning: prefer named diversions
configure.ac: warning: missing AC_CHECK_HEADERS([wchar.h]) wanted by: lib/py/compat/win32/stdint.h:52
configure.ac:103: installing './config.guess'
configure.ac:103: installing './config.sub'
configure.ac:26: installing './install-sh'
configure.ac:26: installing './missing'
compiler/cpp/Makefile.am: installing './depcomp'
configure.ac: installing './ylwrap'
lib/cpp/test/Makefile.am:178: warning: variable 'concurrency_test_SOURCES' is defined but no program or
lib/cpp/test/Makefile.am:178: library has 'concurrency_test' as canonical name (possible typo)
lib/cpp/test/Makefile.am:187: warning: variable 'processor_test_SOURCES' is defined but no program or
lib/cpp/test/Makefile.am:187: library has 'processor_test' as canonical name (possible typo)
lib/cpp/test/Makefile.am:195: warning: variable 'processor_test_LDADD' is defined but no program or
lib/cpp/test/Makefile.am:195: library has 'processor_test' as canonical name (possible typo)
lib/cpp/test/Makefile.am:184: warning: variable 'concurrency_test_LDADD' is defined but no program or
lib/cpp/test/Makefile.am:184: library has 'concurrency_test' as canonical name (possible typo) 
```

接下来，我运行`./configure`它似乎成功运行。当我尝试将输出放入我的帖子中时，我的字符用完了，所以如果需要，我将整个输出放入[Google Doc](https://docs.google.com/document/d/1fYH7JfTpO2oDZOgqBz65y4-GHXElZ5PtlIaE9E2NWME/edit)中。

接下来我尝试运行`make`它记录一堆错误。我认为罪魁祸首可能是第一个错误：

```
thriftl.ll:51:21: error: thrifty.h: No such file or directory 
```

我不知道如何解决这个错误。以防万一，这里是`make`命令的整个输出：

```
make  all-recursive
Making all in compiler/cpp
make  all-am
\
     \
    /bin/sh ../../ylwrap `test -f 'src/thrifty.yy' || echo './'`src/thrifty.yy y.tab.c thrifty.cc y.tab.h `echo thrifty.cc | sed -e s/cc$/hh/ -e s/cpp$/hpp/ -e s/cxx$/hxx/ -e s/c++$/h++/ -e s/c$/h/` y.output thrifty.output -- bison -y -d 
thrifty.hh is unchanged
g++ -DHAVE_CONFIG_H -I. -I../..  -I./src  -Wall -Wno-sign-compare -Wno-unused -g -O2 -MT libparse_a-thrifty.o -MD -MP -MF .deps/libparse_a-thrifty.Tpo -c -o libparse_a-thrifty.o `test -f 'thrifty.cc' || echo './'`thrifty.cc
mv -f .deps/libparse_a-thrifty.Tpo .deps/libparse_a-thrifty.Po
\
     \
    /bin/sh ../../ylwrap `test -f 'src/thriftl.ll' || echo './'`src/thriftl.ll lex.yy.c thriftl.cc -- flex  
g++ -DHAVE_CONFIG_H -I. -I../..  -I./src  -Wall -Wno-sign-compare -Wno-unused -g -O2 -MT libparse_a-thriftl.o -MD -MP -MF .deps/libparse_a-thriftl.Tpo -c -o libparse_a-thriftl.o `test -f 'thriftl.cc' || echo './'`thriftl.cc
thriftl.ll:51:21: error: thrifty.h: No such file or directory
thriftl.ll: In function ‘int yylex()’:
thriftl.ll:114: error: ‘yylval’ was not declared in this scope
thriftl.ll:114: error: ‘tok_int_constant’ was not declared in this scope
thriftl.ll:115: error: ‘yylval’ was not declared in this scope
thriftl.ll:115: error: ‘tok_int_constant’ was not declared in this scope
thriftl.ll:117: error: ‘tok_namespace’ was not declared in this scope
thriftl.ll:118: error: ‘tok_cpp_namespace’ was not declared in this scope
thriftl.ll:119: error: ‘tok_cpp_include’ was not declared in this scope
thriftl.ll:120: error: ‘tok_cpp_type’ was not declared in this scope
thriftl.ll:121: error: ‘tok_java_package’ was not declared in this scope
thriftl.ll:122: error: ‘tok_cocoa_prefix’ was not declared in this scope
thriftl.ll:123: error: ‘tok_csharp_namespace’ was not declared in this scope
thriftl.ll:124: error: ‘tok_delphi_namespace’ was not declared in this scope
thriftl.ll:125: error: ‘tok_php_namespace’ was not declared in this scope
thriftl.ll:126: error: ‘tok_py_module’ was not declared in this scope
thriftl.ll:127: error: ‘tok_perl_package’ was not declared in this scope
thriftl.ll:128: error: ‘tok_ruby_namespace’ was not declared in this scope
thriftl.ll:129: error: ‘tok_smalltalk_category’ was not declared in this scope
thriftl.ll:130: error: ‘tok_smalltalk_prefix’ was not declared in this scope
thriftl.ll:131: error: ‘tok_xsd_all’ was not declared in this scope
thriftl.ll:132: error: ‘tok_xsd_optional’ was not declared in this scope
thriftl.ll:133: error: ‘tok_xsd_nillable’ was not declared in this scope
thriftl.ll:134: error: ‘tok_xsd_namespace’ was not declared in this scope
thriftl.ll:135: error: ‘tok_xsd_attrs’ was not declared in this scope
thriftl.ll:136: error: ‘tok_include’ was not declared in this scope
thriftl.ll:137: error: ‘tok_void’ was not declared in this scope
thriftl.ll:138: error: ‘tok_bool’ was not declared in this scope
thriftl.ll:139: error: ‘tok_byte’ was not declared in this scope
thriftl.ll:140: error: ‘tok_i16’ was not declared in this scope
thriftl.ll:141: error: ‘tok_i32’ was not declared in this scope
thriftl.ll:142: error: ‘tok_i64’ was not declared in this scope
thriftl.ll:143: error: ‘tok_double’ was not declared in this scope
thriftl.ll:144: error: ‘tok_string’ was not declared in this scope
thriftl.ll:145: error: ‘tok_binary’ was not declared in this scope
thriftl.ll:146: error: ‘tok_slist’ was not declared in this scope
thriftl.ll:147: error: ‘tok_senum’ was not declared in this scope
thriftl.ll:148: error: ‘tok_map’ was not declared in this scope
thriftl.ll:149: error: ‘tok_list’ was not declared in this scope
thriftl.ll:150: error: ‘tok_set’ was not declared in this scope
thriftl.ll:151: error: ‘tok_oneway’ was not declared in this scope
thriftl.ll:152: error: ‘tok_typedef’ was not declared in this scope
thriftl.ll:153: error: ‘tok_struct’ was not declared in this scope
thriftl.ll:154: error: ‘tok_union’ was not declared in this scope
thriftl.ll:155: error: ‘tok_xception’ was not declared in this scope
thriftl.ll:156: error: ‘tok_extends’ was not declared in this scope
thriftl.ll:157: error: ‘tok_throws’ was not declared in this scope
thriftl.ll:158: error: ‘tok_service’ was not declared in this scope
thriftl.ll:159: error: ‘tok_enum’ was not declared in this scope
thriftl.ll:160: error: ‘tok_const’ was not declared in this scope
thriftl.ll:161: error: ‘tok_required’ was not declared in this scope
thriftl.ll:162: error: ‘tok_optional’ was not declared in this scope
thriftl.ll:165: error: ‘tok_oneway’ was not declared in this scope
thriftl.ll:275: error: ‘yylval’ was not declared in this scope
thriftl.ll:279: error: ‘tok_int_constant’ was not declared in this scope
thriftl.ll:284: error: ‘yylval’ was not declared in this scope
thriftl.ll:288: error: ‘tok_int_constant’ was not declared in this scope
thriftl.ll:292: error: ‘yylval’ was not declared in this scope
thriftl.ll:293: error: ‘tok_dub_constant’ was not declared in this scope
thriftl.ll:297: error: ‘yylval’ was not declared in this scope
thriftl.ll:298: error: ‘tok_identifier’ was not declared in this scope
thriftl.ll:302: error: ‘yylval’ was not declared in this scope
thriftl.ll:303: error: ‘tok_st_identifier’ was not declared in this scope
thriftl.ll:347: error: ‘yylval’ was not declared in this scope
thriftl.ll:348: error: ‘tok_literal’ was not declared in this scope
make[3]: *** [libparse_a-thriftl.o] Error 1
make[2]: *** [all] Error 2
make[1]: *** [all-recursive] Error 1
make: *** [all] Error 2 
```

而且，虽然我怀疑它是否需要，因为我认为错误在`make`，最后一个输出 - `sudo make install`：

```
Making install in compiler/cpp
make  install-am
g++ -DHAVE_CONFIG_H -I. -I../..  -I./src  -Wall -Wno-sign-compare -Wno-unused -g -O2 -MT libparse_a-thriftl.o -MD -MP -MF .deps/libparse_a-thriftl.Tpo -c -o libparse_a-thriftl.o `test -f 'thriftl.cc' || echo './'`thriftl.cc
thriftl.ll:51:21: error: thrifty.h: No such file or directory
thriftl.ll: In function ‘int yylex()’:
thriftl.ll:114: error: ‘yylval’ was not declared in this scope
thriftl.ll:114: error: ‘tok_int_constant’ was not declared in this scope
thriftl.ll:115: error: ‘yylval’ was not declared in this scope
thriftl.ll:115: error: ‘tok_int_constant’ was not declared in this scope
thriftl.ll:117: error: ‘tok_namespace’ was not declared in this scope
thriftl.ll:118: error: ‘tok_cpp_namespace’ was not declared in this scope
thriftl.ll:119: error: ‘tok_cpp_include’ was not declared in this scope
thriftl.ll:120: error: ‘tok_cpp_type’ was not declared in this scope
thriftl.ll:121: error: ‘tok_java_package’ was not declared in this scope
thriftl.ll:122: error: ‘tok_cocoa_prefix’ was not declared in this scope
thriftl.ll:123: error: ‘tok_csharp_namespace’ was not declared in this scope
thriftl.ll:124: error: ‘tok_delphi_namespace’ was not declared in this scope
thriftl.ll:125: error: ‘tok_php_namespace’ was not declared in this scope
thriftl.ll:126: error: ‘tok_py_module’ was not declared in this scope
thriftl.ll:127: error: ‘tok_perl_package’ was not declared in this scope
thriftl.ll:128: error: ‘tok_ruby_namespace’ was not declared in this scope
thriftl.ll:129: error: ‘tok_smalltalk_category’ was not declared in this scope
thriftl.ll:130: error: ‘tok_smalltalk_prefix’ was not declared in this scope
thriftl.ll:131: error: ‘tok_xsd_all’ was not declared in this scope
thriftl.ll:132: error: ‘tok_xsd_optional’ was not declared in this scope
thriftl.ll:133: error: ‘tok_xsd_nillable’ was not declared in this scope
thriftl.ll:134: error: ‘tok_xsd_namespace’ was not declared in this scope
thriftl.ll:135: error: ‘tok_xsd_attrs’ was not declared in this scope
thriftl.ll:136: error: ‘tok_include’ was not declared in this scope
thriftl.ll:137: error: ‘tok_void’ was not declared in this scope
thriftl.ll:138: error: ‘tok_bool’ was not declared in this scope
thriftl.ll:139: error: ‘tok_byte’ was not declared in this scope
thriftl.ll:140: error: ‘tok_i16’ was not declared in this scope
thriftl.ll:141: error: ‘tok_i32’ was not declared in this scope
thriftl.ll:142: error: ‘tok_i64’ was not declared in this scope
thriftl.ll:143: error: ‘tok_double’ was not declared in this scope
thriftl.ll:144: error: ‘tok_string’ was not declared in this scope
thriftl.ll:145: error: ‘tok_binary’ was not declared in this scope
thriftl.ll:146: error: ‘tok_slist’ was not declared in this scope
thriftl.ll:147: error: ‘tok_senum’ was not declared in this scope
thriftl.ll:148: error: ‘tok_map’ was not declared in this scope
thriftl.ll:149: error: ‘tok_list’ was not declared in this scope
thriftl.ll:150: error: ‘tok_set’ was not declared in this scope
thriftl.ll:151: error: ‘tok_oneway’ was not declared in this scope
thriftl.ll:152: error: ‘tok_typedef’ was not declared in this scope
thriftl.ll:153: error: ‘tok_struct’ was not declared in this scope
thriftl.ll:154: error: ‘tok_union’ was not declared in this scope
thriftl.ll:155: error: ‘tok_xception’ was not declared in this scope
thriftl.ll:156: error: ‘tok_extends’ was not declared in this scope
thriftl.ll:157: error: ‘tok_throws’ was not declared in this scope
thriftl.ll:158: error: ‘tok_service’ was not declared in this scope
thriftl.ll:159: error: ‘tok_enum’ was not declared in this scope
thriftl.ll:160: error: ‘tok_const’ was not declared in this scope
thriftl.ll:161: error: ‘tok_required’ was not declared in this scope
thriftl.ll:162: error: ‘tok_optional’ was not declared in this scope
thriftl.ll:165: error: ‘tok_oneway’ was not declared in this scope
thriftl.ll:275: error: ‘yylval’ was not declared in this scope
thriftl.ll:279: error: ‘tok_int_constant’ was not declared in this scope
thriftl.ll:284: error: ‘yylval’ was not declared in this scope
thriftl.ll:288: error: ‘tok_int_constant’ was not declared in this scope
thriftl.ll:292: error: ‘yylval’ was not declared in this scope
thriftl.ll:293: error: ‘tok_dub_constant’ was not declared in this scope
thriftl.ll:297: error: ‘yylval’ was not declared in this scope
thriftl.ll:298: error: ‘tok_identifier’ was not declared in this scope
thriftl.ll:302: error: ‘yylval’ was not declared in this scope
thriftl.ll:303: error: ‘tok_st_identifier’ was not declared in this scope
thriftl.ll:347: error: ‘yylval’ was not declared in this scope
thriftl.ll:348: error: ‘tok_literal’ was not declared in this scope
make[2]: *** [libparse_a-thriftl.o] Error 1
make[1]: *** [install] Error 2
make: *** [install-recursive] Error 1 
```

我试过用谷歌搜索很多这些错误，但我不擅长 C++，也找不到任何帮助。

我需要做什么来修复这些错误？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-09T23:39:49.257

[我相信你遇到了这里描述的错误： https](https://issues.apache.org/jira/browse/THRIFT-1614) ://issues.apache.org/jira/browse/THRIFT-1614 。

你可能有 automake-1.12（这是你会得到的`brew install automake`），它创建一个 thrifty.hh 文件而不是包含的 thrifty.h。错误报告中给出的解决方法是手动将包含更改`thriftl.cc`为`thrifty.hh`. 如果您使用的是 brew，您也可以尝试降级 automake，[这](https://stackoverflow.com/a/4158763/145823)应该会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-17T08:23:17.760

出现此问题是因为 automake 生成文件“thrifty.hh”而不是“thrifty.h”。所以有两种方法可以解决这个问题。

1）将automake降级到1.11.5，然后修复；2) 编辑文件“thriftl.cc”，搜索“thrift.h”并将“thrifty.hh”替换为“thrifty.hh”，然后重新编译。

# ruby-on-rails - 当一个类在引号中时，Rails 有什么区别

> ID：13279045
> 
> 赞同：1
> 
> 时间：2012-11-07T22:02:27.160
> 
> 标签：ruby-on-rails, ruby, rspec, factory-bot

我注意到 Rspec 和 FactoryGirl 中的几个示例，其中有些人将类名放在引号中，而有些则没有。

示例 rspec：

```
describe "User" do
...specs...
end

describe User do
...specs...
end 
```

示例工厂女孩

```
factory :high_school_account, class: "Account" do
  Name "Test Account Name"
  AccountTypeId 1
end

factory :high_school_account, class: Account do
  Name "Test Account Name"
  AccountTypeId 1
end 
```

我以为我在某个地方读到了当类加载到 ruby​​ 环境时它必须做的事情，但我可能完全是在弥补。

引用版本和未引用版本之间有区别吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T22:07:03.910

来自 factory_girl[源代码](https://github.com/thoughtbot/factory_girl/blob/master/lib/factory_girl/factory.rb#L22)：

```
module FactoryGirl
  class Factory
    # ...
    def build_class
      @build_class ||= if class_name.is_a? Class
        class_name
      else
        class_name.to_s.camelize.constantize
      end
    end
  end
end 
```

所以不，在这种情况下没有区别 - 两者都被接受。字符串只是简单地转换为类。即使是符号也会起作用。

# configure - 如何在 Automake 中选择编译器版本？

> ID：13279046
> 
> 赞同：0
> 
> 时间：2012-11-07T22:02:29.150
> 
> 标签：configure, autoconf, automake

我有几个名称相同但版本或位置不同的编译器。该`./configure`脚本似乎在它找到的第一个`PATH`. 我如何告诉 Automake 根据自定义规则选择其中一个？我已经有一个可以检查编译器版本的宏。

我想避免手动设置路径（使用`FC`变量），因为每次输入整个路径时都会很麻烦。

在我的例子中，几个 MPI 包装器编译器位于不同的目录中，具有相同的名称（`PATH`并由用户添加）。

这个想法是使用类似的东西`./configure --with-intel`来查找和选择 IntelMPI 编译器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T19:12:36.743

`CC`我的解决方案是通过 shell 脚本设置和其他“宝贵”变量，其中很多用于交叉编译。所以我有一堆 shell 脚本，内容如下：

```
export CROSS_COMPILE=arm-linux
export CC=${CROSS_COMPILE}-gcc
...
PATH=$PATH:/some/arm/compiler/bin:/some/arm/compiler/usr/bin # for arm compiler tools
export CFLAGS="..." 
```

设置`configure`配置。所以在配置时我这样做：

```
source /path/to/configuration/some-arm-compiler.sh
./configure ... 
```

它节省了大量的打字。

编辑：所以它可以适用于您的特定情况，例如：

**mpi-a.sh**

```
export FC=mpif90
PATH=$PATH:/path/to/mpi-a/bin:/path/to/mpi-a/usr/bin 
```

**mpi-b.sh**

```
export FC=mpif90
PATH=$PATH:/path/to/mpi-b/bin:/path/to/mpi-b/usr/bin 
```

因此，要使用其中之一进行编译：

```
source /path/to/mpi-a.sh
./configure ... 
```

和另一个：

```
source /path/to/mpi-b.sh
./configure ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T09:24:45.437

`configure`我的解决方案：使用自定义匹配标准复制宏中的搜索策略。`PATH`通过设置`IFS`变量（已在配置中定义）来完成解析。在 Bash 中，查找所有可执行文件类似于：

```
#!/bin/bash

IFS=":"
exe="mpif90"
for dir in $PATH
do
   if test -f "$dir/$exe"; then
     custom_test($dir/$exe)
   fi
done 
```

**注意：**这是[手册中推荐的](http://www.gnu.org/software/autoconf/manual/autoconf-2.67/html_node/Generic-Programs.html)

> 如果您需要检查程序的行为并确定它是否存在，您必须为它编写自己的测试。

# variables - 需要正确的方法将变量添加到 URLWithString

> ID：13279050
> 
> 赞同：0
> 
> 时间：2012-11-07T22:02:46.887
> 
> 标签：variables, nsuserdefaults, nsurl

我有一个名为“sellPhone”的变量。我想将它添加到 URLWithString 中。这样做的正确代码是什么？

```
- (IBAction)buttonCall:(id)sender {

NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
NSString *sellPhone = [defaults objectForKey:@"sellPhone"];

[[UIApplication sharedApplication]
 openURL:[NSURL URLWithString:@"tel:%",sellPhone]]; //something like this!!! 
```

什么是正确的方法？谢谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T22:26:46.453

[NSURL URLWithString:[NSString stringWithFormat:@"tel:%@",sellPhone]]

通话结束后返回应用程序： UIWebView *callWebview = [[UIWebView alloc] init]; NSURL *telURL = [NSURL URLWithString:[NSString stringWithFormat:@"tel:%@",sellPhone]; [callWebview loadRequest:[NSURLRequest requestWithURL:telURL]];

# php - 不缓存样式表中链接的图像

> ID：13279052
> 
> 赞同：1
> 
> 时间：2012-11-07T22:03:02.923
> 
> 标签：php, javascript, css

当我调试以确保某些文件没有被缓存并因此每次重新加载时，我经常将文件链接到类似的东西

```
<script src="script/js.js?<?=time()?>"></script> 
```

有什么方法可以在 css 中做一些事情来确保每次页面加载时都重新加载背景图像，而不会使样式成为 .css 文件以外的东西？（例如带有 css 标头的 php）

```
#bg_div{
background: url(../images/darrow.png.....)
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T22:10:15.767

您可以像这样使用 .htaccess：

```
<filesMatch "\.(gif|jpg|png)$">
 FileETag None
 <ifModule mod_headers.c>
 Header unset ETag
 Header set Cache-Control "max-age=0, no-cache, no-store, must-revalidate"
 Header set Pragma "no-cache"
 Header set Expires "Mon, 26 Jul 1990 05:00:00 GMT"
 </ifModule>
</filesMatch> 
```

这可以防止缓存所有图像。如果您将 .htaccess 文件放在特定文件夹中，则此文件夹中的图像不会被缓存。

请注意，在具有重负载缓存控制的站点上应仔细规划。使用这样的 htaccess 指令会极大地影响页面加载时间。

# objective-c - 如何在两个 UIView 之间切换？

> ID：13279058
> 
> 赞同：2
> 
> 时间：2012-11-07T22:03:33.080
> 
> 标签：objective-c, ios5, uiview, xcode4, uiviewanimation

我正在使用两个`UITextView`对象。每个`UITextView`代表闪存卡应用程序中单张卡的一面。就像使用普通闪存卡时一样，我希望用户能够翻转卡片。我在问如何在两个 UIView 对象之间翻转，因为`UITextView`它们是`UIView`子类，所以同样的想法应该可行。

我正在寻找的动画看起来像[这样](http://www.youtube.com/watch?feature=player_embedded&v=547FUpPVGRE)。

上述示例的唯一问题是它使用了两个`UIViewController`对象，并且`UITextView`不是其子类，`UIViewController`因此不适用相同的原则。

关于如何制作翻转动画的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T22:50:22.923

您可以使用 UIView 类方法[`+transitionFromView:toView:duration:options:completion:`](http://developer.apple.com/library/ios/documentation/uikit/reference/uiview_class/UIView/UIView.html#//apple_ref/doc/uid/TP40006816-CH3-SW113)来完成此操作。您的两个文本视图都需要是公共超级视图的后代。使用选项`UIViewAnimationOptionTransitionFlipFromLeft`（或 ... `FromRight`）获得水平翻转。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T07:23:37.170

您可以先隐藏一个 UITextView 并显示另一个 UITextView。要翻转它，您可以隐藏显示的 UITextView 并显示隐藏的 UITextView。您还可以使用[此处](https://stackoverflow.com/questions/14426233/uiview-flip-animation)解释的动画来创建翻转效果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T22:21:04.717

看起来您的问题已经[在这里](https://stackoverflow.com/questions/5392629/uiview-vertical-flip-animation)得到解答，只需调整变换以使其水平翻转而不是垂直翻转：

```
- (void)horizontalFlip {
    [UIView animateWithDuration:someDuration animations:^{
        yourView.layer.transform = CATransform3DMakeRotation(M_PI, 0.0, 1.0, 0.0);
    } completion:^(BOOL finished){
        // code to be executed when flip is completed
    }];
} 
```

如该链接问题中所述，您可以使用 进一步修改它以进行一半翻转`M_PI_2`，然后在第一个动画的完成块中换出`UITextView`s 并开始一个新动画以完成翻转。

不要忘记文件顶部的`#import math.h`和！`#import <QuartzCore/Quartz.h>`

# c# - Sitecore item:created vs item: added

> ID：13279060
> 
> 赞同：7
> 
> 时间：2012-11-07T22:03:37.130
> 
> 标签：c#, asp.net, content-management-system, sitecore, sitecore6

`item:created`events和有什么区别`item:added`？每个事件什么时候被击中？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-07T22:33:55.063

查看 Sitecore.Data.Events.ItemAddedDelegate 的代码，您可能会读到此委托已被弃用，您应该改用 ItemCreatedDelegate。根据我的测试：

1.  创建新项目 - item:added 和 item:created 都被执行
2.  克隆项目 - item:added 和 item:created 都被执行
3.  复制项目 - item: added 不执行，仅 item:created 执行

    ```
    namespace Sitecore.Data.Events
    {
        [Obsolete("Use the ItemCreatedDelegate event instead.")]
        public delegate void ItemAddedDelegate(object sender, ItemAddedEventArgs args);
    } 
    ```

所以一般来说，总是使用 item:created

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-11T08:16:49.567

> item: added 和 item:created 事件看起来很相似，但 Sitecore 仅在用户通过 UI 创建项目时触发 item: added，但它会在代码通过 API 创建项目时触发 item:created。如果您只需要捕获手动添加的项目，请使用 item: added。

参考：取自 John West 的博文

[http://www.sitecore.net/learn/blogs/technical-blogs/john-west-sitecore-blog/posts/2011/05/all-about-events-in-the-sitecore-aspnet-cms](http://www.sitecore.net/learn/blogs/technical-blogs/john-west-sitecore-blog/posts/2011/05/all-about-events-in-the-sitecore-aspnet-cms)

# php - 我需要的正确正则表达式是什么？

> ID：13279061
> 
> 赞同：-2
> 
> 时间：2012-11-07T22:03:37.940
> 
> 标签：php, preg-replace

我想`preg_replace`在相对较大的文本中使用 php 在字符串中搜索和替换。

搜索：`[3,Name]` 替换：`<a href="/Name/3/">Name</a>`

有人可以帮我建立正确的查询吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T22:09:19.437

帮助构建您的查询：

```
 0: [3,Name]

 1: "[" "3" "," "Name" "]"
     1   2   3    4     5

 2: "[" \d+ ","   \w+  "]"
         1         2           

 3: "<a href=\"" 2 "/" 1 "/\">" 2 "</a>

 4: "<a href=\"Name/3/\">Name</a>" 
```

如果你想创建一个正则表达式，你需要先找到你的模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T22:08:13.450

我会使用类似的东西：

```
#\[(\d+),(\w+)\]#i 
```

所以结果会是这样的：

```
preg_replace('#\[(\d+),(\w+)\]#i', '<a href="/$2/$1/">$2</a>', $text); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T22:07:18.937

我会使用`explode()`：

```
$string='[3,Name]';
$string=str_replace(array(']','['),array('',''),$string);//remove the brackets
$array= explode(',',$string);
echo '<a href="/'.$array[1].'/'.$array[0].'/">'.$array[1].'</a>' 
```

也许根据您输入的可变性进行一些错误检查。

# .net - 如何实现参数化字符串？

> ID：13279065
> 
> 赞同：0
> 
> 时间：2012-11-07T22:03:55.163
> 
> 标签：.net, string, parameterized

我的应用程序需要允许用户输入和保存通用参数化字符串。

在 .NET 中执行此操作的最佳方法是什么？

目前我允许用户将带有预定义“参数”的字符串输入到文本框中。

> 例如。“嗨 %%Name%%，请拿起你的订单号 %%Order%%。”

然后存储这个通用字符串，然后在需要时用真实数据填充。人口只是通过一系列这些类型的语句来完成：

```
Str1.Replace("%%Name%%", data.Name)
Str1.Replace("%%Order%%", data.Order) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T22:07:26.660

您在寻找格式字符串吗？

```
string str = String.Format("five = {0} hello {1}", 5, "World"); 
```

或者

```
string base = "five = {0} hello {1}"
string str = String.Format(base, 5, "World"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T22:13:47.427

你所拥有的是“足够好”......你只需要记住将 Replace() 调用的结果分配回原来的：

```
Str1 = Str1.Replace("%%Name%%", data.Name)
Str1 = Str1.Replace("%%Order%%", data.Order) 
```

您可以通过将其实现为状态机来获得更好的性能，但所涉及的复杂性不太可能证明它是合理的，而且我同样觉得功能齐全的模板库在这里可能有点矫枉过正。雅尼

如果我要推荐不同的语法，我可能会使用前导 @ 符号或问号来匹配常见的数据库参数语法。或者，如果您可以忍受索引参数而不是命名参数，则可以按照另一个答案中的建议使用 String.Format() 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T22:13:54.167

Stack Overflow 上的其他地方也有类似的问题。这是在[https://stackoverflow.com/a/4077118/1721527上对](https://stackoverflow.com/a/4077118/1721527)[Dogget](https://stackoverflow.com/users/492813/doggett "狗仔队")部分答案的修改

定义一个这样的函数：

```
public string Format(string input, object p)
{
    foreach (PropertyDescriptor prop in TypeDescriptor.GetProperties(p))
    {
        input = input.Replace("%%" + prop.Name + "%%", (prop.GetValue(p) ?? "(null)").ToString());
        return input;
    }
} 
```

像这样称呼它：

```
Format("test %%first%% and %%another%%", new { first = "something", another = "something else" }) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T22:15:11.153

根据用例的复杂性，您可能希望使用模板库，例如[NVelocity](http://old.castleproject.org/others/nvelocity/usingit.html#step1)、[StringTemplate](http://www.stringtemplate.org/)或类似的。

使用 NVelocity，您可以拥有这样的模板：

```
"Hi $data.Name, please pick up your order number $data.Order." 
```

然后您只需将您的模板和`data`对象传递给 NVelocity 引擎并让它替换占位符。

# asp.net-mvc - 使用 Azure Emulator 时使用 signalR 的套接字超时，如果我运行 mvc 项目，它工作正常

> ID：13279066
> 
> 赞同：3
> 
> 时间：2012-11-07T22:03:57.130
> 
> 标签：asp.net-mvc, azure, signalr

我有一个使用 signalR 的 MVC 4 项目。我启动一个线程，每 5 秒向所有客户端发送一条消息。这运行良好。我可以看到客户端的消息。当我以 MVC 项目作为角色运行 Azure 项目时。客户端收到前 2 或 3 个消息，然后超时并开始表现奇怪。

运行 azure 项目和 mvc 项目时有什么区别，模拟器也启动 iss express 所以我看不出问题可能是什么。

任何人都对下一步去哪里有一些建议。

# c++ - 在 Visual Studio 2010 中创建 .lib 文件

> ID：13279068
> 
> 赞同：4
> 
> 时间：2012-11-07T22:04:00.967
> 
> 标签：c++, visual-studio-2010, static-libraries

您好我正在尝试创建一个生成 .lib 文件的静态库。我有file1.h 和file1.cpp。file1.cpp 的代码需要在 file2.cpp 和 file2.h 中定义函数。在我的项目中（在项目属性->配置中，我已将我的项目定义为静态库）。我编译后是在 release 文件夹中看到 file2.obj 和 file1.obj 文件。我没有看到任何 .lib 文件。我应该在哪里以及如何在 Visual Studio 2010 中进行更改，以便获得一个 .lib 文件，该文件具有文件 file1.cpp 中定义的功能。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T22:09:00.073

输出文件的名称在以下位置指定：

```
Configuration Properties -> Librarian -> General -> Output File 
```

它可能具有与 .obj 文件的位置不同的值，因此 - 即使它正在创建 .lib - 它也不是您期望的位置。

此外，在构建时注意“输出”窗口。它应该在写入 .lib 文件的位置回显。

# php - 在 http 发布后将图像保存到服务器 - android 到 php

> ID：13279070
> 
> 赞同：0
> 
> 时间：2012-11-07T22:04:20.420
> 
> 标签：php, android, image, file, post

现在为此挣扎了几个小时，所以有时间问一个问题。

我使用 apachehttpclient jar 包将多部分 http 帖子从 android 发送到 php 服务器。

将信息发布到 php 后，我会尝试将图像保存到文件夹中，以便我可以使用它：

```
<?php

require("fpdf.php");

//Receive the data from android
$name = $_POST['email'];
$data = $_POST['data'];

//Receive the file
$file = $_FILES['image'];

//$newpath = "/";
//file_put_contents($newpath, $file);

if(move_uploaded_file($file, $newpath)) {

echo json_encode(
        array(
            'result'=>$data,
            'msg'=>'Report added successfully.'
            )
        );
}else {
//something else 
};

?> 
```

我已经尝试过`move_upload_file` *如上所述*`file_put_contents($newpath, $file);`

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T22:22:42.077

这是我用于从 ios 应用程序将照片上传到服务器的 php 脚本。

```
<?php
$uploadDir = './images/';      //Uploading to directory specified
$file = basename($_FILES['userfile']['name']);
$uploadFile = $file;
$randomNumber = rand(0, 99999999999); 
$newName = $uploadDir . $randomNumber . $uploadFile;

if (is_uploaded_file($_FILES['userfile']['tmp_name'])) {
    echo "Temp file uploaded. \r\n";
} else {
    echo "Temp file not uploaded. \r\n";
}

if ($_FILES['userfile']['size']> 100000000) {
    exit("Your file is too large."); 
}

if (move_uploaded_file($_FILES['userfile']['tmp_name'], $newName)) {
    $maxsize = ini_get('upload_max_filesize');
    echo "http://www.mydomain.com/images/{$file}" . "\r\n" . $_FILES['userfile']['size'] . "\r\n" . $_FILES['userfile']['type'] ;
    echo $randomNumber;
}
?> 
```

# django - 无法从一页到另一页进行选择 - 需要知道用户选择了什么选项

> ID：13279073
> 
> 赞同：0
> 
> 时间：2012-11-07T22:04:52.093
> 
> 标签：django, django-models, django-forms

我试图让用户从列表（从数据库）中选择一个“事物”，然后使用该记录在数据库中查找其他内容。但我无法从选择页面获取选择信息。

我会尽量让这成为相关代码的一个非常完整的快照，但我可能会删除太多或留下太多，抱歉。

我的模型.py：

```
urlpatterns = patterns('',
url(r'^$', 'dblook.views.index', name='home'),
url(r'^dblook3/', 'dblook.views.try3', name='home2'),
url(r'^dblook4/', 'dblook.views.try4', name='home3'),
) 
```

我的 dblook/models.py：

```
from django.db import models
class serial_number(models.Model):
    def __unicode__(self):
        return self.serialno
        #return self.question
    class Meta:
        managed=False
        db_table='serial_number'
    sn_id = models.AutoField(primary_key=True)
    serialno = models.CharField(max_length=128)
    comment = models.ForeignKey(comment,null=True,db_column='comment') 
```

我的views.py（我将跳过除了数据库模型导入之外的所有导入。如果有人真的想要它们，我会用它们更新）

```
from dblook.models import *
class SerialnoSelectForm(forms.Form):
    serialno = forms.CharField(max_length=16)
    selected = forms.BooleanField()

class serialform(ModelForm):
    class Meta:
        model = serial_number
        exclude=('comment','sn_id')
    selected = forms.BooleanField()

class snselect(forms.Form):
    sno = forms.ChoiceField()

def try3(request):
    if ( request.POST ):
        output = "HEllo world, thanks for posting"
        return HttpResponse(output)
    else:
        sslst = snselect(serial_number.objects.filter(serialno__startswith="A128").order_by('-serialno'))
        t = loader.get_template('select_serialno.html')
        c = Context({
            'sslst': sslst,
            })
        c.update(csrf(request))
        return HttpResponse(t.render(c))

def try4(request,dsn):
    if ( request.POST ):
        output = "HEllo world, thanks for posting to 4"
        return HttpResponse(output)
    else:
        return HttpResponse("Error") 
```

我的模板（select_serialno.html）是：

```
<h1>Select a serial number</h1>
 <ul>
   <form method='post' action'='/dbtest4/{{serial_number.sn_id}}/showme'>
     {% csrf_token %}
     {% for sn in sslst %}
     <input type="submit" name="sn.serialno" id="choice{{ forloop.counter }}" value="{{choice.id}}"/>
     <label for="choice{{ forloop.counter }}">{{ sn.serialno }}</label><br/>
     {% endfor %}
     <input type="submit" value="data" />
</form> 
```

当我转到 dblook3 时，我从序列号数据库中获得了一个不错的列表，以及一个按钮，如果我点击该按钮，它会立即转到 dblook4 URL（在这种情况下，它总是'/dbtest4//showme/' 而不是类似'/dbtest4/3/showme/)。不幸的是，我似乎无法分辨他们按下了什么按钮。

无论我为 '东西' 放入什么`<form method='post' action'='/dbtest/{{stuff}}/showme'>`，它总是空的。

我也尝试过`if( 'choice' in request.POST ):`veiws.py 中的 try4 之类的方法，但这也不起作用。

那么，我如何获得有关从“look3”到“look4”中选择的内容的任何信息？我会接受任何事情...但是，如果您能解释我为什么这样做，希望您的回答不仅可以解决我的问题，还可以帮助其他人理解...

（如果上面看起来很“进化”，那是因为我已经破解了 3 天了......）

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T22:28:13.777

您需要`POST`将信息发送到`look4`dblook 表单：

```
<form method='post' action'='{% url dblook.views.try4 %}'> 
```

目前你有`/dbtest/{{serial_number.sn_id}}/showme`这没有任何意义。您的上下文中没有`serial_number`变量，所以我不知道它来自哪里。您`def try4(request,dsn):`的视图定义表明您正在尝试`try4`根据从视图中选择的内容在视图上加载信息`try3`（尽管我猜测这是因为您没有解释您要做什么）。如果是这种情况，您需要根据通过 POST 传递的数据而不是 url 参数来执行此操作。非常模糊的东西如下：

```
def try4(request):
    if request.method == "POST":
        form = snselect(request.POST)
        if form.is_valid():
            data = form.cleaned_data
            # Get the selected item from your choice field and retrieve the 
            # corresonding model object with that id
            ... 
```

# java - 这个用于 RMI JMX 连接的 Java 代码有什么问题？

> ID：13279082
> 
> 赞同：2
> 
> 时间：2012-11-07T22:05:34.997
> 
> 标签：java, groovy, rmi, jmx

这个用于 RMI JMX 连接的 Java 代码有什么问题？我显然没有尝试连接到本地主机，但错误暗示我是。在远程服务器上，我在端口 1099 上启用了 JMX 选项（无身份验证）。

这是我的常规脚本：

```
import javax.management.remote.*;    
JMXServiceURL u = 
 new JMXServiceURL("service:jmx:rmi://10.222.244.185:9999/jndi/rmi://10.222.244.185:1099/jmxrmi");    
JMXConnector c = JMXConnectorFactory.connect(u); 
```

这是我得到的错误：

```
C:\Temp>groovy jmx.gv
Caught: java.io.IOException: Failed to retrieve RMIServer stub: javax.naming.ServiceUnavailableException [Root exception is java.rmi.ConnectException: Conn
ection refused to host: 10.222.244.185; nested exception is:
        java.net.ConnectException: Connection refused: connect]
java.io.IOException: Failed to retrieve RMIServer stub: javax.naming.ServiceUnavailableException [Root exception is java.rmi.ConnectException: Connection r
efused to host: 10.222.244.185; nested exception is:
        java.net.ConnectException: Connection refused: connect]
        at jmx.run(jmx.gv:5)
Caused by: javax.naming.ServiceUnavailableException [Root exception is java.rmi.ConnectException: Connection refused to host: 10.222.244.185; nested except
ion is:
        java.net.ConnectException: Connection refused: connect]
        at com.sun.jndi.rmi.registry.RegistryContext.lookup(RegistryContext.java:101)
        at com.sun.jndi.toolkit.url.GenericURLContext.lookup(GenericURLContext.java:185)
        ... 1 more
Caused by: java.rmi.ConnectException: Connection refused to host: 10.222.244.185; nested exception is:
        java.net.ConnectException: Connection refused: connect
        at com.sun.jndi.rmi.registry.RegistryContext.lookup(RegistryContext.java:97)
        ... 2 more
Caused by: java.net.ConnectException: Connection refused: connect
        ... 3 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T22:29:30.840

这就是著名的 java.rmi.server.hostname 问题。通常是由某些 Linux 发行版中的 /etc/hosts 配置错误引起的。127.0.0.1 应该映射到 localhost，而您的真实主机名应该映射到您的真实 IP 地址。有关另一种解决方案，请参见 RMI 常见问题解答中的 A.1 项。

**编辑：**现在您已经编辑了问题中的 IP 地址，您正在查找的 JMX 服务很可能没有在该 IP 地址上运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T22:08:19.353

不知何故你的代码试图连接`127.0.0.1`而不是远程

```
Connection refused to host: 127.0.0.1; nested exception is: 
```

我怀疑您正在执行的代码与您有问题的代码不同。确保正在执行您有问题的代码。

# parsing - 可以处理歧义的解析器库

> ID：13279087
> 
> 赞同：13
> 
> 时间：2012-11-07T22:05:55.540
> 
> 标签：parsing, scala, haskell

我正在为 Scala 或 Haskell 寻找一个成熟的解析器库。最重要的一点是，图书馆可以处理歧义。如果表达式不明确，我想要与表达式匹配的所有可能的抽象语法树。简单的例子：表达式**a ⊗ b ⊗ c**可以看作**(a ⊗ b) ⊗ c**或**a ⊗ (b ⊗ c)**，我需要两个变体。谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-08T02:12:22.283

当 Walder 的论文 Comprehending Monads（do 表示法的前身）令人兴奋和新颖时，我感觉就像是个老家伙。这个想法是你（引用）用成功列表替换失败，这意味着维护所有可能解析的列表。最后，您通常只参加第一场比赛，但是通过此设置，您可以参加所有比赛。

对于确定性解析器来说，这些并不是那么有效，这就是为什么它们不太流行，但它们正是你所需要的。

看看[polyparse](http://www.haskell.org/haskellwiki/Polyparse)，尤其是`Text.ParserCombinators.HuttonMeijer`and `Text.ParserCombinators.HuttonMeijerWallace`。

（Hutton & Meijer 将解析器库翻译为 Haskell（来自 Gofer），Wallace 添加了额外的功能。）

确保你在简单的情况下检查它，比如`"aaaa"`解析

```
testP = do
   a <- many $ char 'a'
   b <- many $ char 'a'
   return (a,b) 
```

看看它是否具有您所寻求的语义。

你要求成熟。这些库是纯函数式编程遗产的一部分！话虽如此，我认为秒差距更成熟，即使它更年轻。

（推测：我不认为 parsec 可以做你想做的事。它的标准选择组合是确定性的。我没有考虑调整或替换这种行为，我不想我害怕。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-08T15:53:38.130

这个问题立即让我想起了[Yacc 已死](http://arxiv.org/abs/1010.5023)/[不，这不是](http://research.swtch.com/yaccalive)2010 年底的辩论。Yacc 的作者*已死*论文提供了一个在 Scala（未维护）、Haskell 和 Racket 中的[库。](http://www.ucombinator.org/projects/parsing/)在*Yacc is alive*响应中，Russ Cox 指出对于模棱两可的语法，代码在指数时间内运行。

众所周知，可以在 中解析模棱两可的语法`O(n^3)`，但显然，在它们的数量成倍增加的情况下，枚举所有解析树可能需要指数时间——在`x1 + x2 + x3 ... + xn`. `bison`实现这样做的 GLR 算法；不幸的是，虽然`bison`它确实很成熟（如果不是真的垂死），它既不是用 Haskell 也不是用 Scala 编写的。

Daniel Spiewak 在 Scala IIRC 中实现了 GLL 解析器，但我上次查看它时，遇到了一些性能问题。所以我也不确定它是否可以被描述为成熟。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-08T15:11:53.223

我不能说它有多成熟或给你任何使用示例，但我已经在标签中打开了 scala [gll-combinators](https://github.com/djspiewak/gll-combinators)库几天。它处理模棱两可的语法，看起来很漂亮。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-29T11:04:23.470

最后，选择落在了语法定义形式主义（[SDF2 ）上，](http://www.syntax-definition.org/)[这里](http://www.syntax-definition.org/Sdf/SdfSoftware)有一个 sdf 表生成器， 而[JSGLR](http://strategoxt.org/Stratego/JSGLR/)作为解析器生成器。

# asp.net-mvc - 依赖注入 - 一直向下传递依赖

> ID：13279088
> 
> 赞同：0
> 
> 时间：2012-11-07T22:05:58.333
> 
> 标签：asp.net-mvc, dependency-injection, castle-windsor

我有一个具有典型架构的 MVC 应用程序......

> ASP.NET MVC 控制器 -> 人员服务 -> 人员存储库 -> 实体框架数据库上下文

我正在使用 Castle Windsor，我可以看到将它与 ControllerFactory 一起使用来创建具有正确依赖关系的控制器的好处。使用这种方法，Controller 获得了一个 Service 注入，它反过来知道如何构造正确的 Repository，而 Repository 又知道要使用的正确 DbContext。

温莎配置是这样的......

```
dicontainer = new WindsorContainer();
dicontainer.Register(Component.For<IPersonService>().ImplementedBy<PersonService>());
dicontainer.Register(
    Component.For<IPersonRepository>().UsingFactoryMethod(
        () => new PersonRepository(new HrContext("connectionString")))); 
```

这是正确的方法吗？我不喜欢UsingFactoryMethod，但想不出其他方法。

此外，如果存储库需要服务层不需要的依赖项（例如 ILogger）怎么办？这是否意味着我必须将 ILogger 传递到服务层而不使用它。这似乎是一个糟糕的设计。我会很感激这里的一些指示。我已经阅读了大量文章，但没有找到一个具体的例子来验证我是否做对了。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T00:05:05.697

我尽量避免使用工厂方法（正如你提到的，你觉得这闻起来很有趣）。为避免这种情况，您可以创建一个创建新 DbContext 的数据库会话对象。然后，您的存储库只需要获取 IDbSession 的实例并使用其 dbContext 属性。然后，您还可以轻松控制 IDbSession 对象的范围（不要使用单例，因为它不是线程安全的）。

我想说明这一点，以便我可以使这一点更重要......让您的构造函数只接受在 DI 容器中注册的对象（构造函数中没有选项或配置）。选项和配置应该在类中读取/写入，其唯一目的是读取/写入这些值。如果所有类都遵循这个模型，那么你的 DI 注册就变得容易了，类可以在它们的构造函数中添加它们需要的任何依赖项。

如果您尝试使用在构造函数中具有选项的第三方库，请将该类包装在您自己的类中，该类具有易于使用的构造函数，并使用配置类来读取传递给第三方库所需的值。这种设计还在您的代码和第三方库之间引入了一层抽象，然后可以在必要时更轻松地交换（或存根）第三方库。

# php - 循环请求php图像文件

> ID：13279092
> 
> 赞同：1
> 
> 时间：2012-11-07T22:06:11.943
> 
> 标签：php, session-variables

我有一个 php 文件，它生成一个图形，通过 4 个 sql 语句的答案填充，在另一个 php 文件中，我有一个简单的循环，通过会话将变量发布到嵌套在图像文件的 sql 中的变量来请求图像。

我已经检查了“发送”变量是否正在遍历我的循环......但问题是，如果我想迭代 2，我得到的 2 个图像是最后一个结果而不是 graph1、graph2，我得到的是 graph2、graph2 ...

我想念他们的东西吗？请任何帮助 - 对 PHP 非常陌生，谢谢 :) 继承人循环；

```
<?php
session_start();

for ($i = 1; $i < 3; $i++)
{
    $_SESSION['question'] = $i;
    ?>
    <div id="apDiv1"><img src="round.php"></div>
    <?php
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T22:12:08.527

> 我想念他们的东西吗？

是的，PHP 中的会话是阻塞的。这意味着当您的脚本运行时，该`round.php`脚本不会运行。它将等到相关脚本完成。

*更准确地说：*甚至更长。输出甚至必须先到浏览器。

然后它为您提供图形作为图像。然后`$_SESSION`变量已经很长时间为 2 了。

而是传递一个查询参数（`$_GET`parameter），`$_SESSION`这里行不通。

```
<?php

for ($i = 1; $i < 3; $i++)
{     
    ?><div id="apDiv1"><img src="round.php?graph=<?php echo $i; ?>"></div><?php
}

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T22:12:34.920

如果您暂时忽略 html 输出，则循环不会影响您的会话设置：

```
for ($i = 1; $i < 3; $i++){
  $_SESSION['question'] = $i;
} 
```

和

```
$_SESSION['question'] = 2; 
```

是等价的。您只是两次覆盖相同的值。

# wordpress - WordPress 自定义插入到帖子按钮

> ID：13279093
> 
> 赞同：3
> 
> 时间：2012-11-07T22:06:14.977
> 
> 标签：wordpress, media, uploader

对于使用 WordPress 的媒体上传器上传的图像，有一个“插入到帖子”按钮，用于向编辑器发送该图像的短代码。

我有一个文本输入，当聚焦时，我希望媒体上传器出现，以便用户可以选择图像并将文件 URL 发送到文本输入。

我遇到的主要问题是创建附加的“插入帖子”按钮，将文件 URL 发送到相应的文本字段。

我应该使用哪个钩子，如何将文件 URL 数据返回到输入字段？

感谢您的指导！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T05:14:54.220

你所描述的是旧的 Wordpress 做它的方式......如果你想在 Wordpress 3.5+ 中使用新的上传器，你可以创建一个`wp.media`对象来上传它，类似于 wp-admin/js/custom 中的代码-background.js：

```
 // Create the media frame.
            frame = wp.media.frames.customBackground = wp.media({
                // Set the title of the modal.
                title: $el.data('choose'),

                // Tell the modal to show only images.
                library: {
                    type: 'image'
                },

                // Customize the submit button.
                button: {
                    // Set the text of the button.
                    text: $el.data('update'),
                    // Tell the button not to close the modal, since we're
                    // going to refresh the page when the image is selected.
                    close: false
                }
            });

            // When an image is selected, run a callback.
            frame.on( 'select', function() {
                // Grab the selected attachment.
                var attachment = frame.state().get('selection').first();

                // Run an AJAX request to set the background image.
                $.post( ajaxurl, {
                    action: 'set-background-image',
                    attachment_id: attachment.id,
                    size: 'full'
                }).done( function() {
                    // When the request completes, reload the window.
                    window.location.reload();
                });
            });

            // Finally, open the modal.
            frame.open(); 
```

选择`frame.on('select' function(){`文件时运行代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T07:06:49.747

进一步搜索，我找到了一些很好的资源来解释如何做到这一点。我选择了 JavaScript、PHP 组合：

## JavaScript

```
$j('input').live('focusin',function(){

    var target = '#'+$j(this).attr('id');

    tb_show('','media-upload.php?post_id=[post_id]&tab=gallery&context=choose&TB_iframe=1');

    window.send_to_editor = function(html) {            

        fileurl = $j(html).attr('href');
        $j(target).val(fileurl);
        tb_remove();

    };

}); 
```

来源：http: [//jaspreetchahal.org/wordpress-using-media-uploader-in-your-plugin/](http://jaspreetchahal.org/wordpress-using-media-uploader-in-your-plugin/)

# PHP

```
/* Customize button */

function media_uploader_btn($form_fields, $post) {

    $send = "<input type='submit' class='button' name='send[$post->ID]' value='" . esc_attr__( 'Choose This File' ) . "' />";

    $form_fields['buttons'] = array('tr' => "\t\t<tr class='submit'><td></td><td class='savesend'>$send</td></tr>\n");
    $form_fields['context'] = array( 'input' => 'hidden', 'value' => 'choose' );

    return $form_fields;

}

/* Check for button context */

function check_upload_image_context($context){

    if(isset($_REQUEST['context']) && $_REQUEST['context'] == $context){

        return true;

    } elseif(isset($_POST['attachments']) && is_array($_POST['attachments'])){

        /* check for context in attachment objects */

        $image_data = current($_POST['attachments']);

        if (isset($image_data['context']) && $image_data['context'] == $context ){

            return true;

        }

    }

    return false;
}

if(check_upload_image_context('choose')){

    add_filter('attachment_fields_to_edit', 'media_uploader_btn', 20, 2);

} 
```

来源：[http ://shibashake.com/wordpress-theme/how-to-hook-into-the-media-upload-popup-interface](http://shibashake.com/wordpress-theme/how-to-hook-into-the-media-upload-popup-interface)

# c# - 如何决定布尔运算符的使用、性能问题与可读性

> ID：13279096
> 
> 赞同：2
> 
> 时间：2012-11-07T22:06:38.950
> 
> 标签：c#, performance, asp.net-4.0, code-readability, boolean-operations

甚至有两个以上的选项可供选择，这让我产生疑问，如果结果/结果相同，该选择哪一个。

在`.NET` `C#` 以下情况下使用不同的运算符提出相同的问题，所以问题是，有经验的开发人员使用什么，我倾向于假设现成的运算符`Equals`会经历更多的处理动作。

您何时以及为什么会选择“传统”`!`而`Equals`不是“传统” `==`？

```
//bool
if (!Page.IsPostBack) 
{
    //bool
    if (NotAuthorized().Equals(false)) 
    {            
        AppsCtrls.DDLs_Init();

        //bool
        if (CurrSeSn.Raised(Flag.MainDataSet_IsPopulated) == false)
        {
            initALLDataSet(AllDataStColsSelectionMod.doneViaSP);
        }

        custid = RConv.Str2int(Request.QueryString["custid"]);
        username = GetTableData.AsString("name", "tblCustomers", "custid", custid);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T23:10:28.700

这个问题有点主观。。。

> “我倾向于假设像 Equals 这样的现成运算符会经历更多的处理操作。”
> 
> “您何时以及为什么会选择！而不是 Equals ，而且都超过 '传统' ==”

该`Equals`方法作为对象实例的一部分用于检查该实例与另一个实例的相等性，而`==`and`!=`运算符是静态的，因此不受任何对象实例的约束。相反，它们就像一个特殊的静态方法，它接受两个参数（通常是相同的类型）并比较它们。

考虑以下示例：

```
public class CustomObject
{
    int someValue, anotherValue;    

    public bool Equals(CustomObject obj)
    {
        return (this.someValue == obj.someValue && this.anotherValue == obj.anotherValue);
    }

    public static bool operator ==(CustomObject a, CustomObject b)
    {
        return a.Equals(b);
    }

    public static bool operator !=(CustomObject a, CustomObject b)
    {
        return !(a == b);
    }
} 
```

在此示例中，该`Equals`方法用于生成将 中的值`CustomObject`与相同类型的另一个实例进行比较的结果。`==`CustomObject的运算符只需调用`Equals`其中一个参数对象并针对另一个执行相等性检查。`!=`运算符简单地否定`==`并产生相反的结果。因此，`==`并`!=`没有太多的性能开销`Equals`，因为无论如何它们都调用了该方法。

**最佳实践：**

如果条件本质上是布尔值，则无需使用`Equals`,`!=`或`==`，但您应该使用`!`来否定布尔条件。

例如：

```
if(IsPostBack) // this is good

if(IsPostBack == true) // this is unnecessary

if(!IsPostBack) // this is good

if(IsPostBack == false) // this is unnecessary 
```

如果条件本质上不是布尔值，或者您正在比较两个布尔值，或者您正在比较枚举或其他值类型，则使用`!=`or`==`是可以接受的。

例如：

```
if(a == b) // this is good

if(a != b) // this is good 
```

如果条件本质上不是布尔值，并且您正在比较的对象没有实现`==`or`!=`运算符，那么使用`Equals`是可以接受的。*请注意，禁止使用`!=`和`==`泛型，因为在编译时不知道在泛型对象类型参数表示的对象上实现`!=`或实现。`==`*

例如：

```
if(a.Equals(b)) //this is good

if(!a.Equals(b)) // this is good

if(a.Equals(b) == true) // this is unnecessary 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T22:09:35.227

我通常选择最短的选项，即：

```
if (!Page.IsPostBack) 
```

或者：

```
if (Authorized()) 
```

由于 C# 不允许在 if 语句中使用非布尔表达式，这非常清楚，所以我认为没有理由额外输入。

话虽如此，这实际上纯粹是一个约定和偏好的问题——使用一种形式相对于另一种形式没有性能优势。

这与 C++ 不同，例如，您可以在哪里使用`if (42)`，在这种情况下，仅仅看到`if (foo)`并不足以知道`foo`是布尔值还是其他类型。在这种情况下，有时包含条件检查（即：）是有意义的，`if (foo == false)`因为这样您就可以清楚地看到类型并明确您的意图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T22:14:07.083

使用第一个。与零/null == false 的 C/C++ 不同，在 C# 中，只有布尔值类型可以与布尔运算符一起使用，即：

```
int i=1;
if (i) { .... } 
```

不会编译，因此不需要显式测试布尔值的相等性，特别是在使用描述性名称（IsSomething、HasHappened、NotSomething 等）时

# objective-c - CGImageRelease 导致崩溃

> ID：13279101
> 
> 赞同：1
> 
> 时间：2012-11-07T22:07:15.153
> 
> 标签：objective-c, ios, uiimage

我正在使用 AGImagePickerController 从相册中挑选多张图片，然后将选定的资产推送到视图控制器，在那里它尝试将每个资产转换为 UIImage。但是，我发现如果我选择了超过 20 张图像，我将开始收到内存不足警告并退出应用程序。这是我的转换代码

```
for(int i =0 ; i < [self.selectedPictures count] ; i++)
{
    NSLog(@"Object %d",i);
    ALAsset *asset = [self.selectedPictures objectAtIndex:i];
    ALAssetRepresentation *rep = [asset defaultRepresentation];
    CGImageRef iref = [rep fullResolutionImage];
    UIImage *anImage = [UIImage imageWithCGImage:iref scale:[rep scale] orientation:(UIImageOrientation)[rep orientation]];
    float newHeight = anImage.size.height / (anImage.size.width / 1280);

    UIImage *resizedImage = [anImage resizedImageWithContentMode:UIViewContentModeScaleAspectFit bounds:CGSizeMake(newHeight, 1280.f) interpolationQuality:kCGInterpolationHigh];

    UIImage *resizedThumbnailImage = [anImage resizedImageWithContentMode:UIViewContentModeScaleAspectFill bounds:CGSizeMake(290.0f, 300.f) interpolationQuality:kCGInterpolationHigh];

    // JPEG to decrease file size and enable faster uploads & downloads
    NSData *imageData = UIImageJPEGRepresentation(resizedImage, 0.6f);
    //NSData *thumbnailImageData = UIImagePNGRepresentation(thumbnailImage);
    NSData *thumbnailImageData = UIImageJPEGRepresentation(resizedThumbnailImage, 0.6f);

    PFFile *photoFile = [PFFile fileWithData:imageData];
    PFFile *thumbnailFile = [PFFile fileWithData:thumbnailImageData];

    [photoFile saveinbackground];
    [thumbnailFile saveinbackground];
} 
```

所以我想我应该添加 CGImageRelease(iref); 在 anImage 释放 iref 之后，内存警告就消失了。但是，在最后一个资产转换为 UIImage 后，我的应用程序将崩溃。到目前为止，我无法找出它崩溃的原因。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T22:09:27.703

你不应该这样做`CGImageRelease(iref);`，除非你使用`CGImageCreate`, `CGImageCreateCopy`或`CGImageRetain`. 这就是它崩溃的原因。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-07T23:29:35.403

我找到了解决这个问题的方法。采用`@autoreleasepool`

# ios - 从父 iOS 访问容器视图控制器

> ID：13279105
> 
> 赞同：209
> 
> 时间：2012-11-07T22:07:28.517
> 
> 标签：ios, objective-c, swift, uiviewcontroller, uicontainerview

在 iOS6 中，我注意到新的容器视图，但不太确定如何从包含视图访问它的控制器。

设想：

![例子](../Images/5fa27c35232d6742d9a90d88b031889f.png)

我想从包含容器视图的视图控制器访问警报视图控制器中的标签。

他们之间有一个segue，我可以使用它吗？

* * *

## 回答 #1

> 赞同：367
> 
> 时间：2012-11-07T22:56:10.813

是的，您可以使用 segue 访问子视图控制器（及其视图和子视图）。`alertview_embed`使用 Storyboard 中的属性检查器给 segue 一个标识符（例如）。然后让父视图控制器（包含容器视图的那个）实现如下方法：

```
- (void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
   NSString * segueName = segue.identifier;
   if ([segueName isEqualToString: @"alertview_embed"]) {
       AlertViewController * childViewController = (AlertViewController *) [segue destinationViewController];
       AlertView * alertView = childViewController.view;
       // do something with the AlertView's subviews here...
   }
} 
```

* * *

## 回答 #2

> 赞同：57
> 
> 时间：2012-11-08T00:11:26.007

您可以简单地使用`self.childViewControllers.lastObject`（假设您只有一个孩子，否则使用`objectAtIndex:`）。

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2015-03-29T08:02:06.903

用于 Swift 编程

你可以这样写

```
var containerViewController: ExampleViewController?
override func prepareForSegue(segue: UIStoryboardSegue, sender: AnyObject?) {
    // you can set this name in 'segue.embed' in storyboard
    if segue.identifier == "checkinPopupIdentifierInStoryBoard" {
        let connectContainerViewController = segue.destinationViewController as ExampleViewController
        containerViewController = connectContainerViewController
    }
} 
```

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2016-04-30T07:47:35.347

该`prepareForSegue`方法有效，但它依赖于 segue 标识符魔术字符串。也许有更好的方法。

如果您知道您所追求的 VC 的类，您可以使用计算属性非常巧妙地做到这一点：

```
var camperVan: CamperVanViewController? {
  return childViewControllers.flatMap({ $0 as? CamperVanViewController }).first
  // This works because `flatMap` removes nils
} 
```

这依赖于`childViewControllers`. 虽然我同意依赖第一个可能很脆弱，但命名您所寻求的类会使这看起来很可靠。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2016-10-16T02:22:50.887

Swift 3 的更新答案，使用计算属性：

```
var jobSummaryViewController: JobSummaryViewController {
    get {
        let ctrl = childViewControllers.first(where: { $0 is JobSummaryViewController })
        return ctrl as! JobSummaryViewController
    }
} 
```

这只会迭代子列表，直到它到达第一个匹配项。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2014-10-05T09:10:25.767

`self.childViewControllers` 当您需要来自父母的控制时，它更相关。例如，如果子控制器是一个表格视图，并且您想强制重新加载它或通过按钮点击或父视图控制器上的任何其他事件更改属性，您可以通过访问 ChildViewController 的实例而不是通过 prepareForSegue 来实现。两者都有不同的应用方式。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-12-30T12:16:29.997

在视图控制器的类型上使用 Swift 的 switch 语句还有另一种方法：

```
override func prepare(for segue: UIStoryboardSegue, sender: Any?)
{
  switch segue.destination
  {
    case let aViewController as AViewController:
      self.aViewController = aViewController
    case let bViewController as BViewController:
      self.bViewController = bViewController
    default:
      return
  }
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-05-18T11:01:09.403

我使用如下代码：

```
- (IBAction)showCartItems:(id)sender{ 
  ListOfCartItemsViewController *listOfItemsVC=[self.storyboard instantiateViewControllerWithIdentifier:@"ListOfCartItemsViewController"];
  [self addChildViewController:listOfItemsVC];
 } 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-11-25T01:13:23.340

如果有人正在寻找**Swift 3.0**，

**viewController1**，**viewController2**等将可以访问。

```
let viewController1 : OneViewController!
let viewController2 : TwoViewController!

// Safety handling of optional String
if let identifier: String = segue.identifier {

    switch identifier {

    case "segueName1":
        viewController1 = segue.destination as! OneViewController
        break

    case "segueName2":
        viewController2 = segue.destination as! TwoViewController
        break

    // ... More cases can be inserted here ...

    default:
        // A new segue is added in the storyboard but not yet including in this switch
        print("A case missing for segue identifier: \(identifier)")
        break
    }

} else {
    // Either the segue or the identifier is inaccessible 
    print("WARNING: identifier in segue is not accessible")
} 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2018-04-24T12:20:17.550

使用泛型你可以做一些甜蜜的事情。这是 Array 的扩展：

```
extension Array {
    func firstMatchingType<Type>() -> Type? {
        return first(where: { $0 is Type }) as? Type
    }
} 
```

然后，您可以在 viewController 中执行此操作：

```
var viewControllerInContainer: YourViewControllerClass? {
    return childViewControllers.firstMatchingType()!
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-08-17T11:41:26.040

你可以这样写

```
- (IBAction)showDetail:(UIButton *)sender {  
            DetailViewController *detailVc = [self.childViewControllers firstObject];  
        detailVc.lable.text = sender.titleLabel.text;  
    }  
} 
```

# c - 使用结构指针作为参数对函数进行原型设计

> ID：13279107
> 
> 赞同：0
> 
> 时间：2012-11-07T22:07:43.557
> 
> 标签：c, struct, function-prototypes

我一直在纠结这个问题。我在 extern.h 中声明了一个结构：

```
typedef struct {
    char data[Q_SIZE];
    int head;
    int tail;
    int size;
}queue; 
```

在 main.c 我声明了这个结构的两个实例：

```
queue rxq, txq; 
```

在其他 .c 文件中，如果使用这些结构，它们将被声明为全局外部，即：

```
extern queue rxq, txq; 
```

在 queue.c 中有几个函数接受指向这些结构之一的指针作为参数：

```
int QGetSize(queue * q)
{
    return q->size;
} 
```

我的编译器要求我对这些函数进行原型制作，但不喜欢我制作它们原型的方式：

```
int QGetSize(queue *);
ERROR: parse error at near '*'

int QGetSize(queue);
ERROR: invalid functions argument declaration

int QGetSize(struct *);  // this is the one that to me, should work. the other errors make sense.
ERROR: parse error at near '*'

int QGetSize(struct);
ERROR: parse error at near ')'

int QGetSize(struct queue *);
WARNING: struct declared inside parameter list 
```

可能需要注意的是，在prototype.h文件中，它们不是队列的typedef作为这个结构，如果我尝试对它进行typedef或重新定义它甚至包含最初声明它的.h文件，我会得到更多错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T22:24:39.170

*您可以使用include guard*防止重复包含同一文件：

```
#ifndef FILE_H
#define FILE_H

/* Declarations etc. here. */

#endif 
```

这样你就可以自动防止像你观察到的 typedef 那样的重定义。尽管您可能经常看到以下划线开头的宏用作包含保护，但这是一种不好的做法，因为这些名称位于实现的命名空间中，因此是保留的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T23:02:40.543

关于您的编译器错误：

```
int QGetSize(queue *);
ERROR: parse error at near '*' 
```

这可能是因为您没有包含 extern.h，或者如果包含，则未定义“queue”的 typedef。如果 C 找到一个应该是类型但还没有（还）被定义为类型的词，它会非常困惑。

```
int QGetSize(queue);
ERROR: invalid functions argument declaration 
```

和上面一样。定义*必须*出现在使用之前。

```
int QGetSize(struct *);
ERROR: parse error at near '*' 
```

这是无效的。'struct' 不是类型；'struct queue' 是类型。也就是说，您需要在 'struct' 之后指定类型标记才能使其有意义。

```
int QGetSize(struct);
ERROR: parse error at near ')' 
```

同上。此外，编译器会在“结构”之后期待另一个词，如果没有的话会非常困惑。

```
int QGetSize(struct queue *);
WARNING: struct declared inside parameter list 
```

这意味着尚未定义类型“结构队列”。它没有。'typedef struct { ... } queue' 与'struct queue { ... }' 不同。

所以这里有一些建议：

*首先*，标准做法是用“#ifndef”包装头文件的主体，以确保它只被包含一次：

```
#ifndef __HDR_H
#define __HDR_H

... code goes here ...

#endif 
```

（__HDR_H 必须是唯一的，并且通常是文件名的变体。）

然后，您始终可以将定义类型的标头#include 到使用它们的任何文件中。#ifndef（通常）允许您不受惩罚地包含在内。

*其次*，你需要弄清楚结构标签和类型定义之间的区别。

结构标记是特定结构定义的名称：

```
struct queue { ... };       // Defines struct queue

struct queue foo;           // foo is a queue structure. 
```

typedef 是现有类型的别名：

```
typedef int HANDLE;         // HANDLE is just another way of saying 'int'

typedef struct queue QUEUE; // QUEUE is shorthand for 'struct queue' 
```

两者是非常不同的东西。第一个定义了特定类型的结构，而第二个为现有类型创建了一个新名称。事实上，您可以将它们组合起来：

```
typedef struct queue { ... } QUEUE; 
```

你经常想要，特别是如果'struct queue'包含指向另一个'struct queue'的指针。

所以在这个：

```
QUEUE foo;
struct queue bar; 
```

'foo' 和 'bar' 具有完全相同的类型。

（此外，与此半相关：C 中的常见做法是使 typedef 名称全部大写。）

*第三*，你应该谨慎使用 typedef。在你的情况下，我建议完全摆脱它，只使用'struct'关键字。这使得知道发生了什么变得容易得多，因为局部结构变量在其声明中具有“结构”，因此不经意的读者可以看到它是一个结构，而不是重命名的 int。

更重要的是，它可以让编译器为您提供更有意义的错误消息。如果结构未定义并且编译器看到如下内容：

```
int foo(struct bar x); 
```

它知道 bar 是一个结构，所以整个事情是一个参数声明，可以告诉你“struct bar”是未定义的。但是，如果它看到这一点：

```
int foo(BAR x); 
```

它不知道 BAR 应该是什么，所以错误消息往往是一个很大的 WTF？！？！？！？！？反而。

最后，如果你使用 'struct' 形式，你可以预先声明结构：

```
struct bar;
int foo (struct bar x);
struct bar { ... }; 
```

这很少有必要，但您偶尔会发现自己有一些非常扭曲的循环依赖。在这种情况下，这可以让你摆脱困境。（这也是为什么上面的最后一个编译器警告是警告而不是错误的原因；编译器将未知的结构参数解释为前向声明。这是合法的，但不是一个好主意。）

无论如何，我希望这会有所帮助并祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T22:50:30.130

在 C 中，有两种不同的类型命名空间：结构/联合/枚举标记名称的命名空间和 typedef 名称的命名空间。

```
typedef struct {
    ...
}queue; 
```

上面的声明声明了一个匿名结构并为其创建了一个 typedef。它在 typedef 命名空间中只有一个名称，但在 tag 命名空间中没有名称。这意味着它不能被前向声明。如果要进行前向声明，则必须在标签命名空间中为其命名。

请进一步参考此[https://stackoverflow.com/a/612350/1450257](https://stackoverflow.com/a/612350/1450257)

# java - h:graphicImage JSF 的图像路径

> ID：13279115
> 
> 赞同：2
> 
> 时间：2012-11-07T22:08:23.900
> 
> 标签：java, jquery, jsf, resources, prettyphoto

我正在使用 h:graphicImage 使用该`name`属性显示图像。现在，为了成功实现[PrettyPhoto（JQuery 实现）](http://www.no-margin-for-errors.com/projects/prettyphoto-jquery-lightbox-clone/)，我也需要图像的结果路径（`/javax.faces.resource/pictures/file.png.xhtml`）`<a href />`。

正如您从 PrettyPhoto 的文档片段中看到的那样，我需要图像的路径作为我的路径`<a href />`（由于使用缩略图，实际上存在差异）：

```
<a href="images/fullscreen/2.jpg" rel="prettyPhoto" title="This is the description">
    <img src="images/thumbnails/t_2.jpg" width="60" height="60" alt="This is the title" />
</a> 
```

**有没有办法为`h:graphicImage`我提取资源名称（因为它的命名）`h:outputLink`？**

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-07T22:12:01.143

您可以使用隐式 EL 变量映射器`#{resource}`将 JSF 资源库/名称转换为完整 URL。

所以，在你的特殊情况下，

```
<h:outputLink value="#{resource['images/fullscreen/2.jpg']}">
    <h:graphicImage name="images/thumbnails/t_2.jpg" />
</h:outputLink> 
```

如果您还使用资源库，则语法应如下所示：

```
<h:outputLink value="#{resource['default:images/fullscreen/2.jpg']}">
    <h:graphicImage library="default" name="images/thumbnails/t_2.jpg" />
</h:outputLink> 
```

*（请注意，您甚至可以只使用`<a href>`代替`<h:outputLink value>`）*

# django - Django注释奇怪的行为

> ID：13279120
> 
> 赞同：0
> 
> 时间：2012-11-07T22:08:58.547
> 
> 标签：django, annotate

我正在使用 django annotate 向用户显示某个地方的评分和评论数量。我有三个模型可以做到这一点：

```
class Descriptions(models.Model):
    name=models.CharField(max_length=50)
    website=models.CharField(max_length=50,blank=True)
    street1=models.CharField(max_length=50,blank=True)
    street2=models.CharField(max_length=50,blank=True)
    city=models.CharField(max_length=50,blank=True)
    state=models.CharField(max_length=50,blank=True)
    zip=models.CharField(max_length=5,blank=True)
    description=models.TextField()
    areas_related=models.TextField()
    add_area=models.CharField(max_length=50,blank=True)
    federal=models.NullBooleanField(null=True)
    lat=models.TextField(blank=True)
    long=models.TextField(blank=True)
    creator=models.ForeignKey(User)

    def __unicode__(self):
        return u'%s %s %s %s %s %s %s %s %s %s %s %s %s' %(self.name,self.website,self.street1,
        self.street2,self.city,self.state,self.zip,self.description,self.add_area, self.federal, self.lat, self.long, self.creator) 
```

对于这些地方。然后我有：

```
class Rating(models.Model):
    rating=models.IntegerField(blank=True)
    place=models.ForeignKey(Descriptions)

    def __unicode__(self):
        return u'%s %s' %(self.rating, self.place) 
```

对于收视率。最后：

```
class Review(models.Model):
    user=models.ForeignKey(User)
    place=models.ForeignKey(Descriptions)
    review=models.TextField(blank=True)

    def __unicode__(self):
        return u'%s %s %s' % (self.user, self.place, self.review) 
```

我正在使用它来获取位置，以及评分和评论：

```
relevant=Descriptions.objects.annotate(Avg('rating')).annotate(Count('review')) 
```

...但是，我有一个 1 到 5 的评分系统。当我输入评分时，我得到的 avg 值为 16，然后增加 0.5 一个新的评分。此外，每次我添加评分时，评论的数量都会增加 3。所以，发生了一些奇怪的事情，但我不确定它到底是什么，特别是考虑到我输入的任何评级值都会增加 3 的评论数量......任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T22:16:08.440

尝试：

```
relevant=Descriptions \
    .objects \
    .annotate(average_rating = Avg('rating__rating')) \
    .annotate(review_count = Count('review')) 
```

目前，您正在获取评级对象数量的平均值，而不是每个对象的评级值的平均数量

# nlp - 开源Summly（语言总结）

> ID：13279123
> 
> 赞同：2
> 
> 时间：2012-11-07T22:09:06.533
> 
> 标签：nlp

有没有复制Summly功能的开源库，即总结大篇文章？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T15:57:54.013

有 Open Text Summarizer，可在[Sourceforge](http://sourceforge.net/projects/libots/)下载。有关更多想法，请参阅[此](https://stackoverflow.com/questions/5479333/summarize-text-or-simplify-text)问题的答案。

# ajax - 我试图通过 jquery ajax 调用 servlet 类但我失败了，并得到了这个错误

> ID：13279125
> 
> 赞同：0
> 
> 时间：2012-11-07T22:09:18.893
> 
> 标签：ajax, servlets

我试图通过 jquery ajax 调用 servlet 类但我失败了，并得到了这个错误。我该怎么做才能解决它？

```
POST http//localhost:8080/AkiDar/CpanelServlet 404 (Not Found) jquery-1.8.2.js:8416
send jquery-1.8.2.js:8416
jQuery.extend.ajax jquery-1.8.2.js:7968
sendToServlet
onclick 
```

这是 jQuery Ajax

```
var mainDesID=document.staticForm.mainDesID.value;

var firstName=document.staticForm.firstName.value;

var lastName=document.staticForm.lastName.value;
var address=document.staticForm.address.value;
var xpoint=document.staticForm.xpoint.value;
var ypoint=document.staticForm.ypoint.value;

var xstreet=document.staticForm.xstreet.value;

var ystreet=document.staticForm.ystreet.value;
var phoneNumber=document.staticForm.phoneNumber.value;
var email=document.staticForm.email.value;
var url=document.staticForm.url.value;
var description=document.staticForm.description.value;
var details=document.staticForm.details.value;
var type=document.staticForm.type.value;

var json= {
    'mainDesID':mainDesID , 
    'firstName':firstName,
    'lastName':lastName,
    'xpoint':xpoint,
    'ypoint':ypoint,
    'xstreet':xstreet,
    'ystreet':ystreet,
    'address':address,
    'phoneNumber':phoneNumber,
    'email':email,
    'url':url,
    'description':description,
    'type':type,
    'specialize':'dddd',
    'details':details
};

console.log(json);
$.ajax({
    url:"/AkiDar/CpanelServlet",
    type:"POST",
    dataType:'json',
    success:function(data){

    },
    data:json

}); 
```

和 web.xml

```
<?xml version="1.0" encoding="UTF-8"?> 
    <web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns="http://java.sun.com/xml/ns/javaee"
        xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
        xsi:schemaLocation="http://java.sun.com/xml/ns/javaee
        http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID"
        version="2.5">   
        <display-name>AkiDar</display-name>  
        <welcome-file-list>
            <welcome-file>index.html</welcome-file>
            <welcome-file>index.htm</welcome-file>
            <welcome-file>index.jsp</welcome-file>
            <welcome-file>default.html</welcome-file>
            <welcome-file>default.htm</welcome-file>
            <welcome-file>default.jsp</welcome-file>   
        </welcome-file-list> 
</web-app> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T22:24:47.483

您没有在 web.xml 文件中声明任何 servlet，也没有映射任何 URL。很明显，您的 servlet 不可用。

这是一个解释如何声明和映射 servlet[的教程。](http://tutorials.jenkov.com/java-servlets/web-xml.html)您的 web.xml 中需要以下内容：

```
<servlet>
    <servlet-name>someServletName</servlet-name>
    <servlet-class>fully.qualified.name.of.ServletClass</servlet-class>
</servlet>

<servlet-mapping>
    <servlet-name>someServletName</servlet-name>
    <url-pattern>/CpanelServlet</url-pattern>
</servlet-mapping> 
```

# wpf - 我还可以使用哪些 LINQ 运算符/方法来优化基于 C# 集合的代码？

> ID：13279133
> 
> 赞同：1
> 
> 时间：2012-11-07T22:09:34.037
> 
> 标签：wpf, linq, c#-4.0, .net-4.0, observablecollection

**有没有办法（`LINQ`可能使用）我可以优化下面的代码**。这段代码所做的是`myFirstCollection`通过比较变量中的项目来添加、删除和更新变量中的项目`mySecondCollection`。我能否以某种方式使用更多 LINQ 方法/查询或其他 LINQ 运算符，以便`myFirstCollection`尽快比较和更新变量。

**为了满足我的要求，我的`ObservableCollection`变量`myfirstCollection`绑定到 ，`WPF Grid`以便添加、删除和更新通过数据绑定立即反映在网格中。**

```
private void UpdateFirstCollection(ObservableCollection<MyDTO> myFirstCollection, IEnumerable<MyDTO> mySecondCollection)
{
//Code to add items to First Collection, how to optimize this block?
    foreach (var item in mySecondCollection.ToList())
    {
        if (!myFirstCollection.Contains(item))
        {
            myFirstCollection.Add(item);
        }
        else
        {
//Code to update items from First Collection, how to optimize this block?
            var itemToUpdate = myFirstCollection.FirstOrDefault(dto => dto.ID == item.ID);
            if (itemToUpdate != null)
            {
                itemToUpdate = item;
            }
        }
    }

//Code to remove items from First Collection, how to optimize this block?
    var copy = new ObservableCollection<myDTO>(myFirstCollection);
    foreach (var item in copy.ToList())
    {
        if (!mySecondCollection.Contains(item))
        {
            myFirstCollection.Remove(item);
        }
    }
} 
```

非常感谢根据任何文章/链接*重构*/*改进*上述代码的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T22:17:00.580

也许我遗漏了一些东西，但既然你只是添加东西到`myFirstCollection`存在的`mySecondCollection`东西，然后删除不存在的东西，你`mySecondCollection`为什么不清除`myFirstCollection`并添加所有东西`mySecondCollection`呢？

```
private void UpdateFirstCollection(ObservableCollection<MyDTO> myFirstCollection, IEnumerable<MyDTO> mySecondCollection)
{
    myFirstCollection.Clear();
    foreach(var item in mySecondCollection)
    {
        myFirstCollection.add(item);
    }
} 
```

请告诉我我是否过度简化了这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T22:17:23.850

您正在添加任何新项目、删除任何已删除的项目以及更新任何更改的项目。您实际上是在替换整个集合。

```
myFirstCollection = mySecondCollection; 
```

`ObservableCollection`我知道从某个角度来看这可能是不可取的，所以相反

```
myFirstCollection.Clear();
foreach (var item in mySecondCollection)
    myFirstCollection.Add(item); 
```

# database-design - 如何在 Symfony2 环境之间分离数据？

> ID：13279135
> 
> 赞同：2
> 
> 时间：2012-11-07T22:09:54.740
> 
> 标签：database-design, symfony, doctrine

这是场景：

我们想要构建一个 Symfony2 应用程序，我们将在其上托管不同的客户端。每个客户都拥有自己的环境，而不是拥有一个环境（假设是事实上的“prod”环境）。

所以，假设我们有客户“foo”和“bar”。然后我们将拥有三种环境：一种用于“foo”，一种用于“bar”，然后一种用于我们的开发用途（我们称之为“dev”）。虽然我只举这个例子，但假设我们可以拥有数十到数百个客户。

这样做的重点是我们要为客户端分离数据。我们的应用程序将在我们所有的客户端（相同的包等）中运行相同，但是，它们每个都有自己的数据，并且其他客户端确实不应该访问它（这为他们提供了数据安全性并使我们更容易为每个客户端备份、恢复、导入和导出数据）。我们已经有了允许这种功能的方法（每个环境一个客户端），但是，在存储数据库数据时，我们相信我们会遇到一些麻烦。

根据我在文档中阅读的内容，我假设 Symfony2 环境实际上只允许您加载不同的配置文件（除非进行了其他更改）。所以，我还假设如果在这些配置文件中，它们都指向同一个数据库配置，那么环境将“共享”数据库。或多或少，无论有人在环境“foo”中输入什么，都可以在环境“bar”中访问。这是不希望的。

使用这种开箱即用的环境概念，我看到了三个选择：

1.  给每个客户自己的数据库服务器。这将提供最大的性能并分离数据。将这些信息放入配置文件也很容易。然而，它昂贵且难以维护。
2.  使用一台数据库服务器，但为每个服务器提供自己的架构。这样可以分离数据并且最具成本效益，但是，我确信最终会出现性能问题（因为模式计数变得相当大），并且仍然难以维护（例如必须更新表时结构体）。
3.  将所有信息放入一个数据库和一个模式中，但是，使用某种应用程序逻辑来区分它。虽然这是合理的（这是我们目前在旧版应用程序中所做的；将所有内容与客户端 PKID 绑定），但我不太确定使用我们想要使用的 ORM 会有多容易......

就个人而言，我在第三种选择（一个数据库、一个模式和按应用程序逻辑过滤）和第一种和第二种混合（为每个客户端提供自己的模式并提供新服务器并在一次性能后调动人员）之间纠结问题出现）。我相信我的 1 和 2 的混合将是最简单的，因为它只需要更改配置选项（将环境指向服务器和模式）。但是，我认为选项 3 在性能方面是最好的，即使可能的话，它可能更难设置。

那么，我想知道是否有办法通过第三个选项（使用应用程序逻辑来分离数据）来实现这一点？我真的在寻找一个“简单”的解决方案。“简单”是指使用 Symfony2 或 Doctrine 中已经内置的工具和功能，例如可能是一个教义配置设置，甚至是编写一个 Doctrine 扩展，以某种方式记录一段数据的环境并将其链接到它。

或者，如果有人有其他建议，我也有兴趣听听。

我们预计将 MySQL 用于数据库。此应用程序将在安装了 Apache 和 PHP 的 Linux VM 上运行。我们还将使用最新版本的 Symfony2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T22:48:10.110

我想首先声明 symfony 中的环境在客户端之间没有区别，而是在 dev/test/staging/prod 之间有所不同。我不知道您使用环境的方式会导致问题的用例，但是针对框架工作通常是一个坏主意。

我当然对您的项目一无所知，但在我看来，您有一个非常常见的用例，即不同的“用户”（您称他们为客户）访问您的项目并且需要在具有不同“设置”的同时查看不同的数据（你称之为配置）。

但是，如果这是您决定构建应用程序的方式，那么让我们使用它。您的解决方案点 1 和 2 与 symfony 相同。Symfony 不关心 dbms 是否在不同的服务器上，或者服务器上是否正在运行 100 个数据库。它只需要一个主机和正确的凭据。因此，您可以从 1 台数据库服务器开始，如果发现性能下降，您可以添加第二台。

然而，这个解决方案在面临更新时当然是至关重要的。您部署应用程序并且必须更新 100 个数据库。由于您不能只为一个客户端部署，您要么关闭整个应用程序，直到数据库迁移完成，要么开发具有向后兼容性的应用程序。这可能会奏效，但当需要第三个解决方案以做出关于模式布局的错误决策时，它往往会变得难看。

您的第三个解决方案将是经典方法。根据安全风险，您将在应用程序和原则之间添加另一层，以改变查询的方式，只有特定客户端的数据可以访问。

我会选择选项三。如果您认为您可能有性能问题，您可能需要考虑扩展技术，特别是因为使用 MySQL（或任何 RDBMS）这往往不是那么容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T21:34:33.453

由于我们的资源（我们负担不起并且想要使用 MySQL），这对我们来说不是一个真正的选择，但我想提一下，因为我觉得它非常有趣，它可以解决我们在数据库中的问题等级。

Oracle 数据库（我相信是企业版）有一个名为“虚拟专用数据库”的特性，它完全可以满足我们的需求。基本上，您可以根据连接到数据库的用户在 SQL 引擎中为表、行甚至列添加访问策略。这样，数据可以全部保存在同一个表中，但您可以使用 SQL 引擎自动隐藏和阻止对用户不应该看到的数据行/列的访问。

这似乎是一个很棒的功能，但是许可要求和其他成本会阻止我们（可能还有很多人）能够使用它......

[虚拟专用数据库](http://www.oracle.com/technetwork/database/security/index-088277.html)

[使用 Oracle 虚拟专用数据库控制数据访问](http://docs.oracle.com/cd/B28359_01/network.111/b28531/vpd.htm)

# regex - 在 Perl 中转义美元符号时遇到问题

> ID：13279138
> 
> 赞同：4
> 
> 时间：2012-11-07T22:10:12.197
> 
> 标签：regex, perl, escaping

我从外部源获取一堆文本，将其保存在一个变量中，然后将该变量显示为更大的 HTML 块的一部分。我需要按原样显示它，而美元符号给我带来了麻烦。

这是设置：

```
# get the incoming text
my $inputText = "This is a $-, as in $100\. It is not a 0.";

print <<"OUTPUT";
before-regex: $inputText
OUTPUT

# this regex seems to have no effect
$inputText =~ s/\$/\$/g;

print <<"OUTPUT";
after-regex:  $inputText
OUTPUT 
```

在现实生活中，这些`print`块是更大的 HTML 块，其中直接插入了变量。

我尝试使用转义美元符号，`s/\$/\$/g`因为我的理解是第一个`\$`转义正则表达式以便它搜索`$`，第二个`\$`是插入的内容，然后转义 Perl 以便它只显示`$`。但我无法让它工作。

这是我得到的：

```
before-regex: This is a 0, as in . It is not a 0.
after-regex:  This is a 0, as in . It is not a 0. 
```

这就是我想看到的：

```
before-regex: This is a 0, as in . It is not a 0.
after-regex:  This is a $-, as in $100\. It is not a 0. 
```

谷歌搜索让我想到了[这个问题](https://stackoverflow.com/q/9716443/324625)。当我尝试在答案中使用数组和 for 循环时，它没有效果。

如何让块输出完全按原样显示变量？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-07T22:14:50.283

当你用双引号构造一个字符串时，变量替换会立即发生。在这种情况下，您的字符串将永远不会包含该`$`字符。如果您希望`$`出现在字符串中，请使用单引号或转义它，并且请注意，如果您这样做，您将不会得到*任何*变量替换。

至于你的正则表达式，这很奇怪。它正在寻找`$`并将它们替换为`$`. 如果你想要反斜杠，你也必须逃避那些。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-07T22:13:09.180

> 这就是我想看到的：
> 
> ```
> before-regex: This is a 0, as in . It is not a 0.
> after-regex:  This is a $-, as in $100\. It is not a 0. 
> ```

嗯，嗯，我不确定一般情况是什么，但也许以下会做：

```
s/0/\$-/;
s/in \K/\$100/; 
```

或者你的意思是从

```
 my $inputText = "This is a \$-, as in \$100\. It is not a 0.";
 # Produces the string: This is a $-, as in $100\. It is not a 0. 
```

或者

```
 my $inputText = 'This is a $-, as in $100\. It is not a 0.';
 # Produces the string: This is a $-, as in $100\. It is not a 0. 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-07T22:14:58.817

您的错误是在变量声明中使用双引号而不是单引号。

这应该是：

```
# get the incoming text
my $inputText = 'This is a $-, as in $100\. It is not a 0.'; 
```

了解 ' 和 " 和 ` 之间的区别。参见[http://mywiki.wooledge.org/Quotes](http://mywiki.wooledge.org/Quotes)和[http://wiki.bash-hackers.org/syntax/words](http://wiki.bash-hackers.org/syntax/words)

这适用于 shell，但在 Perl 中也是如此。

# scala - 在 Play 中使用 Anrom 时，我可以从“as”获得结果流吗？框架？

> ID：13279139
> 
> 赞同：0
> 
> 时间：2012-11-07T22:10:12.210
> 
> 标签：scala, playframework, playframework-2.0, scala-collections, anorm

> **可能重复：**
> [是否有一种简单的方法可以将 Stream 作为 RowParser 的输出？](https://stackoverflow.com/questions/13270825/is-there-an-easy-way-to-get-a-stream-as-output-of-a-rowparser)

当我在 Play 中使用 Anorm 时有这样的声明时！框架：

```
def all(): List[Note] = 
    DB.withConnection { implicit c => SQL("select * from note").as(note *) } 
```

它似乎返回了我的模型对象的列表。我可以以不同的方式执行此操作，以便我可以获取 Stream[Note] 以便它“延迟”加载行吗？或者，即使它声称要返回一个列表，它也可能已经以某种方式存在。

换句话说，如果我做 all().head 我希望它只获取第一行。在我看来，在“as”之前它以流的形式开始，但在“as”之后它是一个列表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T13:48:00.907

我昨天问[了一个非常相似的问题](https://stackoverflow.com/questions/13270825/is-there-an-easy-way-to-get-a-stream-as-output-of-a-rowparser)，所以你可能想检查一下。我为你的问题提供了一个解决方案，但我的问题是关于有一个更优雅/简洁的方式来实现同样的目标。

如果您生成 a `List`，则没有什么懒惰的，您的整个结果都会被解析并返回。但是，即使您使用 a `Stream`，出于性能原因，您也应该尝试减少查询中已经存在的行数。例如，如果您只对前 n 行感兴趣，则应该添加`limit n`，否则仍然会查询数据库中的所有行，并且使用`Stream`而不是解析时，您将节省一点时间`List`。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-08T11:56:55.187

Check this link [http://www.playframework.org/documentation/2.0/ScalaAnorm](http://www.playframework.org/documentation/2.0/ScalaAnorm)

You can use the `apply()` method instead of the `as()` to get the Stream but then you will have to parse the Note yourself.

# java - 调试 java-native 交互

> ID：13279144
> 
> 赞同：1
> 
> 时间：2012-11-07T22:10:40.010
> 
> 标签：java, debugging, profiling, native

我需要调试我们的 Java 代码与某个本机 dll 的交互。我在windbg + sosex中调试.NET-native交互有一些经验。

但是，似乎不存在任何可以显示 Java 调用堆栈的 windbg 扩展。

另外，我找不到任何 jdk 6 的调试版本。

我并不**急于**从源代码编译 jdk 6（即使我知道如何）。

所以，我的问题是你将如何调试或分析你的 Java 代码与一些本机 DLL 的交互？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T14:26:53.650

我已经使用 jdb 和 windbg 的组合来完成此操作。在本地调用之前和之后使用 jdb 在 java 中设置 bp，并使用 windbg 在本地函数的开头设置 bp。调试器都不知道对方，也不需要知道。您将无法同时获得包含 Java 字节码帧和本机帧的堆栈跟踪，但这没什么大不了的，因为您可以在本机调用之前和之后查看 Java 堆栈。

注意：jvm（至少 1.5 版本）在正常情况下使用异常，这在本机调试器下运行时是一个巨大的痛苦。幸运的是，EIP 对于所有这些几乎都是相同的，所以你可以忽略使用类似的东西：`.if (@eip == <addr>) {gn}`

# entity-framework-4 - EF4 Code First 与现有数据库和同一类型上的一对一/一对多

> ID：13279148
> 
> 赞同：0
> 
> 时间：2012-11-07T22:11:02.753
> 
> 标签：entity-framework-4, code-first, one-to-one

经过无数个小时后，我终于设法获得了流畅的 api 设置，将我们现有的复杂 SQL DB 映射到 POCO 类。有一件事我没有开始工作，我想知道它是否不受支持。

类权力有：

```
List<Transaction> PowerTransactions;
Transaction LastPowerTransaction;
int PowerTransactionId; 
```

事务是一对多的，其中事务表有一个指向 Power.PowerID 的 FK，可以正常工作。

Power 具有指向事务表中的 TransactionId 的列 PowerTransactionId 和 FK。

我设置了流畅的 API：

Power 具有可选的 Last Transaction 和所需的功率

```
HasOptional(x => x.LastPowerTransaction).WithRequired(x => x.PowerLastPowerTransaction).Map(x =>     x.MapKey("PowerTransactionId")); 
```

powers TransactionID为123，选择功率时，PowerID为1。lastPopertransaction我获得了ID 1而不是123的交易。

由于多对多从 PowerID=1 的 PowerTransaction 中选择 ..，因此一对一执行相同的操作，而不是从 PowerID=123 的 PowerTransaction 中选择 ..。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T20:36:53.983

Mystere Man 的评论不是真正的答案，但使用提到的工具可以得出正确的答案。EF4 代码首先只与共享主键建立一对一的关系。尊敬的工程揭示了这一点，因为没有创建一对一。因此我的流畅映射是错误的。这是 EF4 代码中的一个限制，如果现有数据库不使用共享主键，则必须解决使用一对一作为“假”一对多的问题。

# mysql - 对所有行应用 SQL 查询，为一行工作

> ID：13279153
> 
> 赞同：0
> 
> 时间：2012-11-07T22:11:31.197
> 
> 标签：mysql

在找到字符串后，我试图从文本字段中删除部分字符串。我要删除的将始终位于字符串的末尾，不会完全相同，但始终以相同的字符串 < iframe 开头（< 和 i 之间没有空格，我只是把它放在那里，因为它不会打印如果我不这样做）。

在我姐夫的帮助下，我能够确定如何对其进行编码以运行指定的一行。但是我们现在无法弄清楚如何为所有行运行它。到目前为止，我们拥有的一行代码如下：

```
update products_description  
set products_description 
        = (select test 
            from
            ( 
                select substr(PD.products_description,1,instr(PD.products_description, '<iframe') -1) as test  
                from products_description PD 
                where products_id=36
            ) as x)
where products_id=36 
```

这实际上是[该](https://stackoverflow.com/questions/13132841/remove-everything-after-string)线程的后续，我无法确定解决方案。

感谢任何可以对此有所了解的人。

编辑：只是想指出，我正在处理的表和列都命名为 products_description。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T22:19:33.423

尝试不使用嵌套查询：

```
 UPDATE products_description
   SET products_description = SUBSTR(products_description,1,INSTR(products_description, '<iframe') -1)
   WHERE products_id IN (/* list of ids goes here */) 
```

要为整个表运行它，只需省略 WHERE 子句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T22:30:09.030

您必须从选择的句子中进行更新

[http://dev.mysql.com/doc/refman/5.0/en/update.html](http://dev.mysql.com/doc/refman/5.0/en/update.html)

可能是这样的：

```
update products_description as t 
join (select
            products_id,
            substr(PD.products_description,1,instr(PD.products_description, '<iframe') -1) as test
        from products_description PD
    ) as x 
on x.products_id = t.products_id
set t.products_description = x.test 
```

# clearcase - 在 ClearCase 快照视图中检测仅内容更改的劫持

> ID：13279156
> 
> 赞同：3
> 
> 时间：2012-11-07T22:12:00.787
> 
> 标签：clearcase

通常，快照视图的更新通过检查文件大小和时间戳来检测劫持。有没有办法在 clearcase 中检测大小和时间戳未更改但文件内容已更改的文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T22:27:45.387

ClearCase 没有考虑到这一点，因为它假设，如果内容发生了变化，时间戳也会发生变化。

请参阅“[更新操作如何确定文件是否被劫持](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/index.jsp?topic=/com.ibm.rational.clearcase.hlp.doc/cc_main/how_update_hijack.htm)”：

> 当版本加载到快照视图中时，文件大小和最后修改的时间戳（由 UNIX® 或 Windows® 文件系统报告）将记录在视图数据库中。
> 每次签出文件、签入文件或将新版本加载到视图中时，都会修改这些值。

### 更新操作

> 更新视图时，会将未签出文件的当前大小和上次修改的时间戳与它在视图数据库中记录的大小和时间戳进行比较。
> 如果任一值与视图数据库中的值不同，则认为文件被劫持。
> 仅更改未签出文件的只读权限（在 UNIX 系统上）或属性（在 Windows 系统上）并不一定意味着该文件被视为被劫持

这里不考虑内容。

我遇到这种情况的唯一实例是，我只是创建了另一个快照视图并启动了一个差异工具（WinMerge、KDiff3、BeyondCompare，...），比较两个快照视图的*内容*。

# javascript - 这个javascript在语法上是正确的还是有更好的方法？

> ID：13279162
> 
> 赞同：4
> 
> 时间：2012-11-07T22:12:38.707
> 
> 标签：javascript, jquery

基本上，如果未设置变量，则将其设置为另一个值。

必须有更好的方法，这看起来很混乱。

```
 if ($image_src === undefined) {
                $image_src = $apple_icon;
            }

            if ($image_src === undefined) {
                $image_src = $apple_icon2;
            }

            if ($image_src === undefined) {
                $image_src = $item_prop_image;
            }

            if ($image_src === undefined) {
                $image_src = $image_first;
            } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-07T22:14:51.953

在 JavaScript 中，您可以使用 or`||`运算符来压缩未定义的内容。所以这是有效的：

```
$image_src = $image_src || $apple_icon || $apple_icon1; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-07T22:14:16.990

```
$image_src = $image_src || $apple_icon; 
```

[http://billhiggins.us/blog/2007/02/13/the-javascript-logical-or-assignment-idiom/](http://billhiggins.us/blog/2007/02/13/the-javascript-logical-or-assignment-idiom/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T22:27:53.270

扩展我的评论-以防万一您确实遇到可能未声明变量之一的情况，您可以执行以下操作-更难阅读，但更安全：

```
$image_src = getWhateverTheInitialValueIsSupposedToBe();

$image_src = $image_src || (
    (typeof($apple_icon) !== "undefined" && $apple_icon) ? $apple_icon :
    (typeof($apple_icon2) !== "undefined" && $apple_icon2) ? $apple_icon2 :
    (typeof($item_prop_image) !== "undefined" && $item_prop_image) ? $item_prop_image :
    (typeof($image_first) !== "undefined" && $image_first) ? $image_first :
    $image_src); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T22:19:32.293

老实说，我认为您编写它的方式清楚地表明了您想要做什么。

您可以通过其他答案中显示的方式使其更紧凑，但我发现您编写它的方式乍一看比其他 IMO 更容易理解。

这一切都取决于你想要什么。该`||`方法可能更有效，但您的方法非常易读。

将它包装在一个函数中会很好。

# d3.js - 如何在 d3.js 中查找点是否在多边形内

> ID：13279165
> 
> 赞同：10
> 
> 时间：2012-11-07T22:13:01.897
> 
> 标签：d3.js

我知道有手动方法可以做到这一点（参见[Point in Polygon](http://en.wikipedia.org/wiki/Point_in_polygon)），但是在 d3.js 中是否有确定点是否在多边形内的本地方法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-04-01T17:07:36.723

**更新**：这现在是[d3-polygon](https://github.com/d3/d3-polygon)的一部分。

```
d3.polygonContains(polygon, point) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-04-21T21:09:55.803

这是[一个实现](https://github.com/substack/point-in-polygon)，以防您不想自己动手。演示[在这里](http://bl.ocks.org/bycoffe/5575904)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-07T22:22:46.710

不，没有这个功能。支持此功能的唯一非常特殊的情况是检查该点是否是多边形的质心（使用该`polygon.centroid`函数），但通常您必须提供自己的函数。

# iphone - NSUndoManager 以及如何让重做工作

> ID：13279166
> 
> 赞同：5
> 
> 时间：2012-11-07T22:13:04.110
> 
> 标签：iphone, objective-c, ipad, nsundomanager

我有一个应用程序，我想在每次更改之前保存项目的当前状态，以便撤消和重做能够在这些状态中来回切换。当我进行更改时，保存位置的代码是：

```
if(!undoManager){
    undoManager = [[NSUndoManager alloc] init];
}
[[undoManager prepareWithInvocationTarget:self] replaceSelf:currentState]; 
```

还有我的撤消/重做功能：

```
-(void)undo{
    if(undoManager){
        [undoManager disableUndoRegistration];
        [undoManager undo];
        [undoManager enableUndoRegistration];
    }
}
-(void)redo{
    if(undoManager){
        [undoManager disableUndoRegistration];
        [undoManager redo];
        [undoManager enableUndoRegistration];
    }
} 
```

replace self 函数只是获取项目状态属性并分发信息以便恢复状态。

撤消效果很好，我可以执行 5 个步骤，然后按 5 次撤消以倒回开始，但重做什么也没做！不应该调用重做导致它用最后一个被撤消的对象击中我的选择器吗？我在这里有什么误解？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T15:57:10.783

我得到了这个工作，在撤消/重做调用的 replaceSelf 函数中，我添加了以下代码：

```
[undoManager registerUndoWithTarget:self selector:@selector(replaceSelf:) object:ps]; 
```

其中 ps 是撤消/重做完成之前的当前项目状态。这让它为我工作！

# javascript - 在 Javascript 中对多维 JSON 对象进行排序

> ID：13279178
> 
> 赞同：1
> 
> 时间：2012-11-07T22:13:52.177
> 
> 标签：javascript, json, sorting, flickr

我试图在这里找到答案，但不断提出真正简单的例子，所以这里是：

我正在从 Flickr 的 API 中提取照片集列表，它需要在 javascript 中。无论如何，他们的响应与大多数其他人不同，它们将要排序的值放在子对象中，如下所示：

```
"photoset":[
    {..."photos":"15", "videos":0, "title":{"_content":"Shocktoberfest 2012"}, "description":{"_content":""}, "needs_interstitial":0, "visibility_can_see_set":1, "count_views":"0", "count_comments":"0", "can_comment":0, "date_create":"1351829136", "date_update":"1351829309"}
    ...
    ...
    ...
] 
```

例如，当值在子对象中时，如何对标题进行排序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T22:16:57.163

您可以为[Array.sort](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/sort)提供回调并返回通常的 -1、0、1 进行排序：

```
some_response.photoset.sort(function(a, b){ 
    return a.title._content.localeCompare(b.title._content); 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T22:29:21.847

也不确定，但是，我会开始用 for/in 语句循环来解决这个问题......

```
var photoObjects= {};
for(k in initialObject){
    photoObjects[k] = initalObject.photoset[0][k];
    console.log(photoObjecs[k]);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T22:32:21.140

Javascript 允许您将函数作为参数传递给数组排序函数，

您可以只编写一个简单的辅助函数来在标题之后对带有对象的数组进行排序

```
var arr = [
  {title:"A"},
  {title:"F"},
  {title:"B"}
];

function sortarr (arr,item) {
  arr.sort(function (a,b) {
    if (typeof a == "object" && typeof b == "object" ) {
      console.log(a[item]);
      if ( a[item] < b[item] )
        return -1;
      if ( a[item] > b[item] )
        return 1;
      return 0;
    }
  });
return arr;
}

console.log(JSON.stringify(sortarr(arr,"title"))); 
```

这是一个关于[jsbin的例子](http://jsbin.com/aqeluc/1/edit)

# iphone - 如何重新启动iDevice？

> ID：13279182
> 
> 赞同：3
> 
> 时间：2012-11-07T22:14:01.050
> 
> 标签：iphone, ios, xcode, jailbreak, reboot

我正在尝试制作一个应用程序来重新启动和重新启动任何 iDevice。我的代码在 iOS 模拟器中运行良好，但在我的 iDevice 上没有任何反应（是的，它已越狱）。

这是我的呼吸代码：

```
 if(system("killall SpringBoard"));

        if(system("killall -9 SpringBoard"));

        if (system([@ "reboot" UTF8String]));

        if ([[[UIDevice currentDevice] systemVersion] hasPrefix:@"2."])
            notify_post("com.apple.language.changed");

        if (system([@ "killall SpringBoard" UTF8String])); 
```

这是我的重启代码：

```
if (system([@ "reboot" UTF8String])); 
```

respring 只工作一次，然后停止工作:(

我的脚本：

```
#!/bin/sh

#  Script.sh
#  Respring
#
#  Created by David on 08.11.12.
#  Copyright (c) 2012 David. All rights reserved.

app binary - root:wheel 4755

script - root:wheel 0755

C=/${0}
C=${C%/*}
declare -a flags
[[ :${DYLD_INSERT_LIBRARIES}: == */MobileSubstrate.dylib: ]] && flags[${flags[@]}]=--substrate
exec "${C:-.}"/Respring "${flags[@]}" -- "$@" 2>>/tmp/Respring.log 
```

这是我的 alertView，用于在呼吸不起作用时使用 BugReport 重新启动和重新启动

```
//Respring

-(IBAction)respring {

    UIAlertView *respring=[[UIAlertView alloc]initWithTitle:@"Respring"
                                                     message:@"Do you want to respring your iDevice?"
                                                    delegate:self
                                           cancelButtonTitle:@"No"
                                           otherButtonTitles:@"Yes", nil];
    respring.tag = 1;       
    [respring show];
}

//AlertView   
-(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex {

    if (buttonIndex == 1){            
        if (alertView.tag ==1) {            
            setuid(0); system("killall i5MMS_");                

            UIAlertView *respringerror=[[UIAlertView alloc]initWithTitle:@"Error"
                                                                message:@"Respring is not possible, please send me an Bug Report."
                                                               delegate:self
                                                      cancelButtonTitle:@"OK"
                                                      otherButtonTitles:@"Send Bug Report",nil];                
                respringerror.tag = 3;                
                [respringerror show];                
        }

        if (alertView.tag ==2) {                
            if (system([@ "reboot" UTF8String]));

            UIAlertView *respringerror=[[UIAlertView alloc]initWithTitle:@"Error"
                                                                 message:@"Rebooting is not possible, please send me an Bug Report."
                                                                delegate:self
                                                       cancelButtonTitle:@"OK"
                                                       otherButtonTitles:@"Send Bug Report", nil];

            respringerror.tag = 4;                
            [respringerror show];            
        }                

    if (alertView.tag ==3) {            
        iDevice.text = [UIDevice currentDevice]. model;            
        ios.text = [UIDevice currentDevice]. systemVersion;            
        MFMailComposeViewController *composer = [[MFMailComposeViewController alloc] init];            
        [composer setMailComposeDelegate:self];            
        if ([MFMailComposeViewController canSendMail]) {                
            [composer setToRecipients:[NSArray arrayWithObjects:@"david.goelzhaeuser@me.com", nil]];                
            [composer setSubject:@"Bug Report"];                
            [composer setMessageBody: [NSString stringWithFormat: @"%@ \n%@ \n%@", ios.text,iDevice.text, jailbreakstatus.text]isHTML:NO];                
            [composer setModalTransitionStyle:UIModalTransitionStyleCoverVertical];                
            [composer setModalPresentationStyle:UIModalPresentationFormSheet];                
            [self presentModalViewController:composer animated:YES];
        }

    }

    if (alertView.tag ==4) {

        iDevice.text = [UIDevice currentDevice]. model;            
        ios.text = [UIDevice currentDevice]. systemVersion;            
        MFMailComposeViewController *composer = [[MFMailComposeViewController alloc] init];            
        [composer setMailComposeDelegate:self];    
        if ([MFMailComposeViewController canSendMail]) {                
            [composer setToRecipients:[NSArray arrayWithObjects:@"david.goelzhaeuser@me.com", nil]];                
            [composer setSubject:@"Bug Report"];
            [composer setMessageBody: [NSString stringWithFormat: @"%@ \n%@ \n%@", ios.text,iDevice.text, jailbreakstatus.text]isHTML:NO];                
            [composer setModalTransitionStyle:UIModalTransitionStyleCoverVertical];                
            [composer setModalPresentationStyle:UIModalPresentationFormSheet];                
            [self presentModalViewController:composer animated:YES];
        }

        }
    }
}

//Reboot

-(IBAction)reboot;{        
    UIAlertView *reboot=[[UIAlertView alloc]initWithTitle:@"Reboot"
                                                    message:@"Do you want to reboot your iDevice? If you have a tethered jailbreak you have to make a tethered boot after rebooting!"
                                                    delegate:self
                                                    cancelButtonTitle:@"No"
                                                    otherButtonTitles:@"Yes", nil];

    reboot.tag = 2;        
    [reboot show];        
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T05:10:20.460

**例子**

我将把我的应用命名为 Respring

在我的应用程序代码中，我有一个`RespringViewController.h`和`RespringViewController.m`

在里面`ResringViewController.h`我将添加一个按钮来调用我的重新启动动作。

```
#import <UIKit/UIKit.h>

@interface RespringViewController : UIViewController
//Creates the button
- (IBAction) respring:(id)sender;

@end 
```

现在里面`RespringViewController.m`

```
#import "RespringViewController.h"

@interface RespringViewController ()

@end

@implementation RespringViewController
//This calls the button created in RespringViewController.h
- (IBAction) respring: (id) sender {
setuid(0); system("killall SpringBoard");
}
//This makes the view for the button programmatically
UIButton *button9 = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    [button9 addTarget:self
                action:@selector(respring:)
      forControlEvents:UIControlEventTouchUpInside];
    button9.frame = CGRectMake(96.0, 262.0, 130.0, 37.0);
    button9.adjustsImageWhenDisabled = YES;
    button9.adjustsImageWhenHighlighted = YES;
    button9.alpha = 1.000;
    button9.autoresizesSubviews = YES;
    button9.autoresizingMask = UIViewAutoresizingFlexibleRightMargin | UIViewAutoresizingFlexibleBottomMargin;
    button9.clearsContextBeforeDrawing = YES;
    button9.clipsToBounds = NO;
    button9.contentHorizontalAlignment = UIControlContentHorizontalAlignmentCenter;
    button9.contentMode = UIViewContentModeScaleToFill;
    button9.contentStretch = CGRectFromString(@"{{0, 0}, {1, 1}}");
    button9.contentVerticalAlignment = UIControlContentVerticalAlignmentCenter;
    button9.enabled = YES;
    button9.hidden = NO;
    button9.highlighted = NO;
    button9.multipleTouchEnabled = NO;
    button9.opaque = NO;
    button9.reversesTitleShadowWhenHighlighted = NO;
    button9.selected = NO;
    button9.showsTouchWhenHighlighted = NO;
    button9.tag = 0;
    button9.titleLabel.font = [UIFont fontWithName:@"Helvetica-Bold" size:15.000];
    button9.titleLabel.lineBreakMode = UILineBreakModeMiddleTruncation;
    button9.titleLabel.shadowOffset = CGSizeMake(0.0, 0.0);
    button9.userInteractionEnabled = YES;
    [button9 setTitle:NSLocalizedString(@"APPLY SETTINGS", nil) forState:UIControlStateNormal];
    [button9 setTitleColor:[UIColor blackColor] forState:UIControlStateNormal];
    [button9 setTitleColor:[UIColor colorWithWhite:1.000 alpha:1.000] forState:UIControlStateHighlighted];
    [button9 setTitleShadowColor:[UIColor colorWithWhite:0.500 alpha:1.000] forState:UIControlStateNormal];

//Adds the button to the view
[view addSubview:button9]; 
```

现在我继续构建它并获取一个名为`Respring.app`

里面`Respring.app`有例如这些文件

> 信息列表
> 
> 图标.png
> 
> 重生

我必须在`Respring`里面重命名`Respring.app`为`Respring_`

现在我必须将下面的脚本上传到`/path/to/Respring.app/`

```
#!/bin/bash
C=/${0}
C=${C%/*}
declare -a flags
[[ :${DYLD_INSERT_LIBRARIES}: == */MobileSubstrate.dylib: ]] && flags[${#flags[@]}]=--substrate
exec "${C:-.}"/Respring_ "${flags[@]}" -- "$@" 2>>/tmp/Respring.log 
```

并命名`Respring`

您现在需要使用该工具对二进制文件进行伪造代码签名`ldid`

你可以[在这里下载](http://code.google.com/p/networkpx/downloads/detail?name=ldid)

从终端使用以下命令

`sudo ldid -S /path/to/Respring.app/Respring_`

确保签署二进制文件而不是脚本

脚本必须具有正确的权限才能从终端以 root 用户身份启动应用程序，您可以运行它

`sudo chown 0:0 /path/to/Respring.app/Respring*`

`sudo chmod 0755 /path/to/Respring.app/Respring`

`sudo chmod 4755 /path/to/Respring.app/Respring_`

现在一切都准备就绪，您可以启动应用程序，任何日志现在都将存储在`/tmp/Respring.log`您的设备内，您可以使用按钮重新启动。

# c# - INotifyPropertyChanged 和 BindingList ListChanged 事件

> ID：13279186
> 
> 赞同：3
> 
> 时间：2012-11-07T22:14:13.497
> 
> 标签：c#, inotifypropertychanged, bindinglist

如果我有一个像下面这样的课程：

```
public class MyClass : INotifyPropertyChanged
{
    private BindingList<String> myList;

    public BindingList<String> MyList
    {
        get { return myList; }
        set
        {
            if (myList == value) return;
            myList = value;
            OnPropertyChanged("MyList");
        }
    }
} 
```

我是否需要设置以下事件处理程序：

```
myList.ListChanged += (object sender, ListChangedEventArgs e) => OnPropertyChanged("MyList"); 
```

还是被检测到了？我知道 BindingList 类将在它所属的模板类型上查找 INotifyPropertyChanged 接口，因此它可以确定它是否应该引发 ListChanged 事件，但我不确定它是否以其他方式工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T22:18:49.027

您的`myList`字段被封装在您的类中 - 它所做的任何事情都不会自动“冒泡”。绑定到您的类实例的事物不会知道更改，`myList`除非您使用您编写的事件处理程序之类的东西将它们传播出去。但是，绑定到该`MyList`属性的事物将获得对该`BindingList`对象的直接引用，因此它们将看到由`myList`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T22:18:48.263

该`INotifyPropertyChange`接口用于在更改类内的属性时进行通知。要在集合项目更改时通知您，您必须使用`INotifyCollectionChanged`.

# actionscript-3 - 在 AS3 中分配一组对象的宽度

> ID：13279189
> 
> 赞同：0
> 
> 时间：2012-11-07T22:14:18.567
> 
> 标签：actionscript-3

假设我有一组 5 个具有相同 y 位置但按升序分布 x 位置（例如`obj1.x = 0`, `obj5.x = 10`）的 MovieClip，是否有一种 AS3 方法可以帮助我分配它们的宽度，例如在 Flash 中*修改*>*对齐*下的选项，所以它们的 x 位置是否在 0 和 10 之间等距？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T22:52:04.300

这是我多年前编写的一个函数，您可能会发现它很有用。它假定您想要分隔的东西是父/容器的唯一子级。您将该父级作为第一个参数 (displayObj) 传递给此函数。希望开头的评论能很好地向您解释每个参数的作用，如果不只是评论，我会澄清一下。

```
/**
* Distribte all the children of the specified display object on either x or  y axis
* @param    displayObj - the display oject whose children should be distributed
* @param    onX - should it distribute along the x axis (true) or the y axis (false)
* @param    spacing - how much space between children in pixels
* @param    center - should the children be centered on the opposite axis
* @param    startingX - default 0
* @param    startingY - default 0
* @param    fixedWidth - use a fixed width instead the automatic width of each child
* @param    foldPoint - how far along before the item should fold and be a new row/col
*/
public static function distributeAxis(displayObj:Sprite,onX:Boolean = true,spacing:Number = 5, center:Boolean = false, startingX:Number = 0,startingY:Number = 0,fixedWidth:Number = 0, foldPoint:Number = 0):void {

    //Loop Through Children
        var tObj:DisplayObject;
        var tNum    :Number = (onX) ?   startingX   : startingY;
        var tNum2   :Number = (onX) ?   startingY   : startingX;
        var max     :Number = 0;

        var centeringArray:Vector.<DisplayObject>
        if (center) {
            centeringArray = new Vector.<DisplayObject>();
        }

        for(var i:int = 0; i<displayObj.numChildren;i++)
        {
            tObj = displayObj.getChildAt(i);

            if (onX) {
                if (foldPoint > 0 && tNum + tObj.width > foldPoint) {
                    tNum = startingX;
                    tNum2 += max + spacing;

                    if(center){
                        distributeAxisCenterIt(centeringArray, max, onX);
                        centeringArray = new Vector.<DisplayObject>();
                    }

                    max = 0;
                }

                if(tObj.height > max) max = tObj.height;

                tObj.x = tNum;
                tObj.y = tNum2;

                if(fixedWidth > 0){
                    tNum += fixedWidth + spacing;
                }else{
                    tNum += tObj.width + spacing;
                }

                if(center){
                    centeringArray.push(tObj);
                }

            }else{
                if(tObj.width > max) max = tObj.width;

                if (foldPoint > 0 && tNum + tObj.height > foldPoint) {
                    tNum = startingY;
                    tNum2 += max + spacing;

                    if(center){
                        distributeAxisCenterIt(centeringArray, max, onX);
                        centeringArray = new Vector.<DisplayObject>();
                    }
                    max = 0;
                }

                tObj.y = tNum;
                tObj.x = tNum2;

                if(fixedWidth > 0){
                    tNum += fixedWidth + spacing;
                }else{
                    tNum += tObj.height + spacing;
                }

                if(center){
                    centeringArray.push(tObj);
                }
            }

        }

    if (center) {
        distributeAxisCenterIt(centeringArray, max, onX);
    }
}

private static function distributeAxisCenterIt(array:Vector.<DisplayObject>, max:Number, onX:Boolean = true):void {
                for each(var tObj:DisplayObject in array){
                    if(onX){
                        tObj.y += ((max - tObj.height) * .5);
                    }else{
                        tObj.x += ((max - tObj.width) * .5);
                    }

                }
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T07:42:07.093

你需要使用这个：[AS3 Commons UI](http://sibirjak.com/osflash/projects/as3commons-ui/)。它拥有您想要的一切:) 带有布局/对齐等和组件

但是如果你想要一个代码而不是一个框架，这就是我用来在我自己的“框架”中跨给定宽度传播项目的方法：

```
 /**
     * Distributes all components using given value as a limit.
     * @param   p_nMaxWidth width of the area to spread items
     */
    protected function spreadComponents(p_nMaxWidth:Number):void
    {
        if (numChildren == 0) return;

        if (p_nMaxWidth < 0 || isNaN(p_nMaxWidth)) p_nMaxWidth = 600;
        var _oItem:DisplayObject;
        var dx:Number = 0;
        var i:int;
        var _nWidth:Number = calculateWidths();//get sum of all items widths
        var _nStep:Number = (p_nMaxWidth - _nWidth - getChildAt(numChildren - 1).width) / (numChildren-1);
        for (i = 0; i < numChildren; i++)
        {
            _oItem = getChildAt(i);
            //if(m_bResetChildrenPosition) _oItem.y = 0;//this I was using to reset or keep intact the items y position
            _oItem.x = Math.round(dx);
                dx += _oItem.width + _nStep;
        }
        //as a precaution if rounding would give incorrect position (which should be for last item exactly at the p_nMaxWidth - width (right edge aligned)).
        getChildAt(numChildren - 1).x = p_nMaxWidth - getChildAt(numChildren - 1).width;

        updateDimension();
    }

//
    /**
     * Utility method, returns width of all children (sum).
     * @return
     */
    protected function calculateWidths():Number
    {
        var _nWidth:Number = 0;
            for (var i:int = 0; i < numChildren-1; i++)
            {
                _nWidth += getChildAt(i).width;
            }
        return _nWidth;
    } 
```

此代码在给定宽度上水平扩展项目 - 第一项的左边缘在开始，最后一项的右边缘在该“宽度”的末尾。

此致

# objective-c - AFNetworking 上传进度发送 SOAP NSData

> ID：13279194
> 
> 赞同：0
> 
> 时间：2012-11-07T22:15:01.200
> 
> 标签：objective-c, ios, afnetworking, nsmutableurlrequest

我正在使用`AFNetworking`并想将`NSData`对象上传到我的服务器。我正在尝试上传到我们的 SOAP 服务器，所以我有已转换为`NSData`对象的 XML。出于某种原因，以下方法不起作用：

```
// Back to NSData
    NSData *convertedFile = [xml dataUsingEncoding:NSUTF8StringEncoding];

    NSURL *url = [NSURL URLWithString:siteConfiguration.soapURL];
    AFHTTPClient *httpClient = [[AFHTTPClient alloc] initWithBaseURL:url];
    NSMutableURLRequest *request = [httpClient multipartFormRequestWithMethod:@"POST" path:@"" parameters:nil constructingBodyWithBlock: ^(id <AFMultipartFormData>formData) {
        [formData appendPartWithFormData:convertedFile name:assetCreation.name];
    }];

    AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:request];
    [operation setUploadProgressBlock:^(NSUInteger bytesWritten, long long totalBytesWritten, long long totalBytesExpectedToWrite) {

        // Progress
        float totalProgress = (float)totalBytesWritten/(float)totalBytesExpectedToWrite;
        progress(totalProgress, totalBytesWritten, totalBytesExpectedToWrite);
        if (totalBytesExpectedToWrite == totalBytesWritten) {

            completion();

        }
    }];
    [operation start]; 
```

但是当不使用该`multipartFormRequestWithMethod`块时，它确实可以工作并且文件已正确上传，但没有显示任何进度，因为回调只调用了一次：

```
// Back to NSData
NSData *convertedFile = [xml dataUsingEncoding:NSUTF8StringEncoding];

NSURL *url = [NSURL URLWithString:siteConfiguration.soapURL];
NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:url];
[request setHTTPMethod: @"POST"];
[request setHTTPBody:convertedFile];

AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:request];
[operation setUploadProgressBlock:^(NSUInteger bytesWritten, long long totalBytesWritten, long long totalBytesExpectedToWrite) {

    // Progress
    float totalProgress = (float)totalBytesWritten/(float)totalBytesExpectedToWrite;
    progress(totalProgress, totalBytesWritten, totalBytesExpectedToWrite);
    if (totalBytesExpectedToWrite == totalBytesWritten) {

        MatrixAsset *asset = [[MatrixAsset alloc] init];
        completion(asset);

    }
}];
[operation start]; 
```

看来我的服务器真的想`HTTPBody`和我的`NSData`对象一起发送。是否可以对`AFNetworking`进度回调做同样的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-30T07:00:32.453

您需要 SOAPAction 才能继续：

```
[serviceRequest setValue:@"SOAP_ACTION_URL" forHTTPHeaderField:@"SOAPAction"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T01:27:03.553

好的，我得到它的工作。看起来我做错了：

```
// Setup the connection
    NSString *wsdlURL = [NSString stringWithFormat:@"%@?WSDL", siteConfiguration.soapURL];
    NSURL *serviceUrl = [NSURL URLWithString:wsdlURL];
    NSMutableURLRequest *serviceRequest = [NSMutableURLRequest requestWithURL:serviceUrl];
    [serviceRequest setValue:@"text/xml" forHTTPHeaderField:@"Content-type"];
    [serviceRequest setHTTPMethod:@"POST"];
    [serviceRequest setHTTPBody:[xml dataUsingEncoding:NSUTF8StringEncoding]];

    // Operation
    AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:serviceRequest];
    [operation setUploadProgressBlock:^(NSUInteger bytesWritten, long long totalBytesWritten, long long totalBytesExpectedToWrite) {

        // Progress
        float totalProgress = (float)totalBytesWritten/(float)totalBytesExpectedToWrite;
        progress(totalProgress, totalBytesWritten, totalBytesExpectedToWrite);

    }];
    [operation  setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {
        NSLog(@"Success");
        MatrixAsset *asset = [[MatrixAsset alloc] init];
        completion(asset);
    } failure:^(AFHTTPRequestOperation *operation, NSError *error) {
        NSLog(@"error: %@", error.localizedDescription);
        NSLog(@"error: %@", error.localizedFailureReason);
    }];
    [operation start]; 
```

# c++ - const 对象初始化为`const Vect const_vect = Vect() << 1 << 2;`

> ID：13279197
> 
> 赞同：1
> 
> 时间：2012-11-07T22:15:20.583
> 
> 标签：c++, initialization, constants

几个小时前，我读到[了这个问题](https://stackoverflow.com/q/13270738/1714661)`const`，其中用户将对象初始化为

```
const QList warnings = QList() << 0 << 3 << 7; 
```

确实，这个表达式在某种程度上伤害了我，因为违背了我所拥有的`const`和重载的概念`operator<<`。

我试图定义一个`operator<<`可能允许提到的表达式，这就是我得到的：

```
typedef vector<int> Vect; 
Vect operator<<(Vect v, const int i){ //ByVal v, This way it works, but at which cost? 
    v.push_back(i);                   //v is copied at every call!
    return v;
};      

//Here is where I build the object
const Vect const_vect = Vect() << 1 << 2;  
//it works fine but I see massive overhead due to copies..@_@

//Just for testing
int main() {
    for(auto e = const_vect.begin(); e!=const_vect.end() ; ++e){ 
       cout << *e << " ";
    }
    return 0;
} 
```

前面的代码（也在[这里](http://ideone.com/xFOwuu)）工作正常。

另一方面，以下是我从 的定义中所期望的表达式`operator<<`：

```
 Vect& operator<<(Vect& v, const int i){  //ByRef v<-this I would have expected;                                                
    v.push_back(i);                        //however it can't work because receives and 
    return v;                              //returns reference to temporary object.
 }; 
```

* * *

我的问题是：*我错过了什么？*与我的`operator<<`定义`QList`不同，特别是它可以接收和返回`ByRef`吗？

其次，也许上述是初始化*复杂* `const`对象的标准程序？

第三（可能不方便），编译器如何处理这样的表达式？在编译时做什么，在运行时做什么？

# portlet - 强制从 Vaadin portlet 重新加载页面

> ID：13279201
> 
> 赞同：0
> 
> 时间：2012-11-07T22:15:45.197
> 
> 标签：portlet, reload, vaadin

有没有一种简单的方法可以强制从 Vaadin 重新加载整个页面？我有一个portlet，它会影响显示的标头值，该标头值是从IBM WebSphere 的动态缓存中提取的单独JSP 中的。

我正在将一个旧的 JSF portlet 移植到 Vaadin，这取决于操作之间的页面重新加载以反映标题模板中的新值。所以现在我需要强制重新加载整个页面（不仅仅是 portlet），以使操作看起来生效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T15:16:29.300

您可以使用 JavaScript 重新加载托管网页：

```
getMainWindow().executeJavaScript("window.location.reload();"); 
```

我认为这也应该在门户中起作用。

# javascript - 不同域上的 Javascript 未调用 Flash

> ID：13279202
> 
> 赞同：0
> 
> 时间：2012-11-07T22:15:52.430
> 
> 标签：javascript, html, flash, apache-flex

我正在尝试使用 Javascript 来调用 flash 函数。当 html 文件和 swf 在同一个域上时，我让它工作，但当它在另一个域上时它停止工作。

这是我在服务器上使用 SWF 的跨域文件：

```
<?xml version="1.0"?>
   <!DOCTYPE cross-domain-policy SYSTEM "http://www.macromedia.com/xml/dtds/cross-domain-policy.dtd">
   <cross-domain-policy>
<site-control permitted-cross-domain-policies="all"/>
   <allow-access-from domain="*" />
   <allow-http-request-headers-from domain="*" headers="*"/>
   </cross-domain-policy> 
```

SWF 之前已加载：

```
AC_FL_RunContent("src", "http://www.eyespeakpro.com/OneSentenceLogin.swf",
    "width", "100%",
    "height", "80%",
    "align", "middle",
    "id", "OneSentenceLogin",
    "quality", "high",
    "bgcolor", "#ffffff",
    "name", "OneSentenceLogin",
    "allowScriptAccess","sameDomain",
    "type", "application/x-shockwave-flash",
    "pluginspage", "http://www.adobe.com/go/getflashplayer"
); 
```

这是当它是另一台服务器上的 html 页面的一部分时失败的 javascript 代码。SWF 名为 OneSentenceLogin，函数为 callChangeSentIn。

```
 function callExternalInterface(sentIn) {
    /* Call a function registered as callChangeSentIn in the SWF named myMovie. */
    getMovieName("OneSentenceLogin").callChangeSentIn(sentIn); 

// The following error only happens on the other server:
// Uncaught TypeError: Object #<HTMLEmbedElement> has no method 'callChangeSentIn'

    }
    /* This utility function resolves the string movieName to a Flash object reference based on browser type. */
    function getMovieName(movieName) {
    if (navigator.appName.indexOf("Microsoft") != -1) {
    return window[movieName]
    }
    else {
    return document[movieName]
    }
 } 
```

为什么从另一台服务器调用方法 callChangeSentIn 时找不到，即使 swf 仍在加载？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T02:48:11.377

这是加载 swf 时所需要的： Security.allowDomain("www.example.com") 在我的情况下，我输入

```
Security.allowDomain("74.52.88.189");
Security.allowDomain("http://74.52.88.189");
Security.allowDomain("http://74.52.88.189/"); 
```

不确定哪一个是特别必要的。

这里也有回答，但不知什么原因没找到。 [不同域上的 Javascript 未调用 Flash](https://stackoverflow.com/questions/13279202/flash-not-being-called-by-javascript-on-different-domain)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T00:26:48.460

尝试将 allowScriptAccess 设置为 always。

[更多信息](http://helpx.adobe.com/flash/kb/control-access-scripts-host-web.html)

# c - 当我使用多个字符串时，函数 sscanf_s 失败

> ID：13279209
> 
> 赞同：0
> 
> 时间：2012-11-07T22:16:22.500
> 
> 标签：c, visual-studio-2010, parsing, scanf

我不明白为什么下面的代码会失败：

```
char    toto[54], titi[54]; //I already tried with allocations

sscanf_s(line, "%s-%s", &toto, &titi, sizeof(toto) + sizeof(titi)); 
```

或者

```
sscanf_s(line, "%s-%s", &toto, &titi, sizeof(toto) + sizeof(titi)); 
```

我的问题只是字符串（float、int、double 等都可以），我使用 Visual 2010。

有人有想法吗？非常感谢您的回答。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T22:20:43.130

从[`sscanf_s()`](http://msdn.microsoft.com/en-us/library/t6z7bya3%28v=vs.100%29.aspx)参考页面：

> sscanf_s 函数将数据从缓冲区读取到每个参数给定的位置。格式字符串后面的参数指定指向变量的指针，该变量的类型对应于格式中的类型说明符。**与不太安全的版本 sscanf 不同，在使用类型字段字符 c、C、s、S 和 [ 时需要缓冲区大小参数。必须在每个需要它的缓冲区之后作为附加参数提供以字符为单位的缓冲区大小。**有关详细信息，请参阅 scanf_s、_scanf_s_l、wscanf_s、_wscanf_s_l 和 scanf 类型字段字符。

这意味着每个缓冲区后面必须跟它的大小：

```
sscanf_s(line, "%s-%s", toto, sizeof(toto), titi, sizeof(titi)); 
```

此外，`-`is not 空格字符不会充当`"%s"`格式说明符的终止符，因此如果`line`包含`hello-world`，则它将被读入`toto`并且`titi`不会被分配。要`-`用作终止符，请使用扫描集：

```
if (2 == sscanf_s(line, "%[^-]-%s", toto, sizeof(toto), titi, sizeof(titi)))
{
    /* Both 'toto' and 'titi' where assigned. */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T22:27:03.047

除非`sscanf_s()`很奇怪，否则您不想传递指向数组 ( `&toto`) 的指针，而是传递指向数组第一个元素( ) 的指针`toto`。此外，安全函数的目标是避免缓冲区溢出，即，您需要为每个单独的缓冲区指定它包含多少个字符：

```
if (sscanf_s(line, "%s-%s", toto, sizeof(toto), titi, sizeof(titi)) == 2) {
    ...
} 
```

（错误处理，因为尝试读取应始终在处理数据之前检查是否发生错误）

就个人而言，我会使用`std::istringstream`字符串和合适的自定义操纵器并完全避免这个问题：

```
std::istream& minus(std::istream& in) {
    if ((in >> std::ws).peek() != std::char_traits<char>::to_int_type('-')) {
        in.setstate(std::ios_base::failbit);
    }
    else {
        in.ignore();
    }
    return in;
}

std::string toto, titi;
if (std::istringstream(line) >> std::skipws >> toto >> minus >> titi)) {
    ...
} 
```

# javascript - 数组中的逗号用作值。cookie 中的数组

> ID：13279210
> 
> 赞同：0
> 
> 时间：2012-11-07T22:16:25.050
> 
> 标签：javascript, jquery, arrays, cookies, escaping

`($.cookie('cIDlist")`是一个看起来像这样的数组：`2, 0, 1, 2, 4`.

该函数按预期工作，但不知何故，该函数`imageToSlotNr()`同时使用整数和逗号作为值。如何让它忽略分隔符或逗号或仅删除逗号？为什么会发生这种情况？

```
$("#vkorzinu").click(function(){
    SLOTNUM = 1;
    $.each($.cookie('cIDlist'), function(){
        imageToSlotNr(this);
        SLOTNUM++;
    });
});

function imageToSlotNr(idnum){
  if(SLOTNUM<9){
  $("#slot"+SLOTNUM).css({"backgroundImage":"url('http://localhost/musli/"+idnum+"ingrid.png'    )","background-size":"70px"});
  } else {
       alert("full");
}}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T22:19:09.213

您`$.each`正在迭代字符串中的字符。

您需要在迭代之前转换为数组。将其解析为 JSON 在这里很有用。

```
var arr = $.parseJSON("[" + $.cookie('cIDlist') + "]");

$.each(arr, function(){
    imageToSlotNr(this);
    SLOTNUM++;
}); 
```

如果您希望将数字作为字符串，您可以使用`.split()`而不是将其解析为 JSON 数据。

```
var arr = $.cookie('cIDlist').split(/\s*,\s*/);

$.each(arr, function(){
    imageToSlotNr(this);
    SLOTNUM++;
}); 
```

# machine-learning - 比较贝叶斯线性回归与线性回归

> ID：13279213
> 
> 赞同：10
> 
> 时间：2012-11-07T22:16:37.517
> 
> 标签：machine-learning, bayesian

最近学习了贝叶斯线性回归模型，但是比较疑惑的是什么情况下应该使用线性回归，什么时候使用贝叶斯版本。这两个人的表现如何？贝叶斯逻辑回归和逻辑回归是否相同？我读了一篇关于使用贝叶斯概率回归预测广告点击率的论文，我只是想知道为什么使用贝叶斯版本？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-08T00:46:21.513

在您的两种情况下，线性回归和逻辑回归，贝叶斯版本在贝叶斯推理的背景下使用统计分析，例如，[贝叶斯线性回归](http://en.wikipedia.org/wiki/Bayesian_linear_regression)。

根据维基百科，

> 这种（普通线性回归）是一种常客方法，它假设有足够的测量值来说明有意义的事情。在贝叶斯方法中，数据以先验概率分布的形式补充了额外的信息。根据贝叶斯定理，关于参数的先验信念与数据的似然函数相结合，以产生关于参数的后验信念。

### 常用的贝叶斯分析方式（加入贝叶斯味道）：

1.  找出数据的似然函数。
2.  选择所有未知参数的先验分布。
3.  使用贝叶斯定理找到所有参数的后验分布。

### 为什么是贝叶斯版本？^([[1]](http://www.medicine.mcgill.ca/epidemiology/Joseph/courses/EPIB-621/bayeslogit.pdf))

*   贝叶斯模型更灵活，处理更复杂的模型。
*   贝叶斯模型选择可能更胜一筹（BIC/AIC）。
*   贝叶斯层次模型更容易扩展到许多层次。
*   哲学差异（与常客分析相比）。
*   贝叶斯分析在小样本中更准确（但可能取决于先验）。
*   贝叶斯模型可以包含先验信息

[这](http://www.medicine.mcgill.ca/epidemiology/Joseph/EPIB-621-Course-Outline.html)提供了一些关于贝叶斯分析的好演讲幻灯片。

# objective-c - 如何根据 objC 中先前动作的发送者进行不同的动作？

> ID：13279214
> 
> 赞同：0
> 
> 时间：2012-11-07T22:16:37.673
> 
> 标签：objective-c, xcode, function, delegates, selector

```
- (IBAction)popUpAreYouSureView:(id)sender {
    self.areYouSureView.hidden = NO;
}

- (IBAction)pressedYes {
    // if sender from popUpAreYouSureView was switch, do something

    // else if sender from popUpAreYouSureView was close, do something else
} 

- (IBAction)pressedNo {
    // if sender from popUpAreYouSureView was switch, do something

    // else if sender from popUpAreYouSureView was close, do something else
} 
```

假设我有 2 个按钮“切换”和“关闭”，它们都连接到 popUpAreYouSureView，当点击时会取消隐藏名为 areYouSureView 的视图。“你确定？” view 有 2 个按钮：“yes”和“no”，分别连接到 pressdYes 和pressedNo。

当我按下“是”或“否”时，我会检查“切换”或“关闭”按钮是否已取消隐藏我的视图。根据哪个按钮取消隐藏我的视图，我想执行不同的逻辑。我遇到的问题是我如何知道“切换”或“关闭”按钮是否在不存储该信息的情况下取消隐藏我的视图。

什么是干净的方法来做到这一点？我查看了代表，但这似乎不起作用，因为我为 switch 和 close 案例传递了相同的代表。选择器也有同样的问题。我是否必须存储 (id)sender 告诉我上一个操作是否来自开关或关闭按钮，以便连接到“是”或“否”按钮的操作可以查找并找出要执行的逻辑做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T22:24:05.513

您需要跟踪导致该操作的原因，实际上没有办法解决这个问题。因此，请充分利用该`sender`参数。

```
__weak UIButton* m_buttonSelected;

- (IBAction)popUpAreYouSureView:(id)sender {
    self.areYouSureView.hidden = NO;
    m_buttonSelected = (UIButton*)sender;
}

- (IBAction)pressedYes {
    // if sender from popUpAreYouSureView was switch, do something
    if ([m_buttonSelected isEqual:self.switchButton]) {
        ...
    }
    // else if sender from popUpAreYouSureView was close, do something else
    else if ([m_buttonSelected isEqual:self.closeButton]) {
        ...
    }

    m_buttonSelected = nil;
} 

- (IBAction)pressedNo {
    // if sender from popUpAreYouSureView was switch, do something
    if ([m_buttonSelected isEqual:self.switchButton]) {
        ...
    }
    // else if sender from popUpAreYouSureView was close, do something else
    else if ([m_buttonSelected isEqual:self.closeButton]) {
        ...
    }

    m_buttonSelected = nil;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T22:37:51.780

您可以尝试在以下位置重新定义您的按钮操作`popUpAreYouSureView`：

```
- (IBAction)popUpAreYouSureView:(id)sender {

  if ([sender...]) {
    [self.yesButton addTarget:self action:@selector(...) forControlEvents:...];
    [self.yesButton addTarget:self action:@selector(...) forControlEvents:...];
  } else {
    [self.yesButton addTarget:self action:@selector(...) forControlEvents:...];
    [self.yesButton addTarget:self action:@selector(...) forControlEvents:...];
  }
} 
```

一个稍微好一点的解决方案是使用一个委托，`pressedYes`并在`pressedNo`实现中负责设置委托`popUpAreYouSureView`：

```
- (IBAction)popUpAreYouSureView:(id)sender {

  if ([sender...]) 
     self.buttonsDelegate = ...;
  else
     self.buttonsDelegate = ...;
}

- (IBAction)pressedYes {
    [self.delegate doYes];
} 

- (IBAction)pressedNo {
    [self.delegate doNo];
} 
```

两种方法都应该有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T22:25:51.413

一个快速（但不是那么漂亮）的解决方案是使用 areYouSureView 视图的“标记”属性。给每个按钮一个不同的标签（例如，1 表示关闭，2 表示切换），然后您可以执行以下操作：

```
- (IBAction)popUpAreYouSureView:(id)sender {
    self.areYouSureView.hidden = NO;
    self.areYouSureView.tag = ((UIView*)sender).tag; 
}

- (IBAction)pressedYes {
    if (self.areYouSureView.tag == 1)
        NSLog(@"Button 1");
    else
        NSLog(@"Button 2");
} 

- (IBAction)pressedNo {
    if (self.areYouSureView.tag == 1)
        NSLog(@"Button 1");
    else
        NSLog(@"Button 2");
} 
```

# c# - 使用方法声明将 Linq 查询包装在 try/catch 块中

> ID：13279215
> 
> 赞同：6
> 
> 时间：2012-11-07T22:16:39.093
> 
> 标签：c#, .net, linq, extension-methods

所以这就是我想要做的。

```
var a = Item.CatchLog().Where(x=>x.Property=="value").Take(10); 
```

或者

```
var a = Item.CatchLog().FirstOrDefault(x=>x.Property=="value"); 
```

或者

```
var a = Item.CatchLog().Any(x=>x.Property=="value"); 
```

从本质上讲，我希望`CatchLog()`基本上将查询的执行包装在 try catch 中，`Debug.WriteLine()`然后`Exception`是`throw`它。

关于如何实现这样的事情的任何想法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-07T22:23:23.487

您需要重写您的语句，如下所示：

```
var a = Item.CatchLog(c => c.Where(x => x.Property=="value").Take(10)); 
```

如果您允许，您可以编写如下内容：

```
public static U CatchLog<T,U>(this IEnumerable<T> collection, Func<IEnumerable<T>,U> method)
{
    try
    {
        return method(collection);
    }
    catch(Exception e)
    {
         Debug.WriteLine(e.Message);
         throw;
    }
} 
```

# ruby - 没有 `rescue` 用作代码块的 Ruby 的 `begin ... end` 会产生意想不到的后果吗？

> ID：13279217
> 
> 赞同：21
> 
> 时间：2012-11-07T22:16:47.017
> 
> 标签：ruby

我偶尔会看到`begin...end`在 ruby​​ 中使用的块之间没有任何`rescue`, `else`,`ensure`等语句。例如：

```
foo = begin
   whatever = 3
   "great"
   42
end 
```

看来，编码员的意图是`begin...end`仅将块用于其块分组质量（好像`begin`是`do`）。我个人认为这种用法违反了最小意外原则（`begin`对我来说意味着异常处理）。

以这种方式使用是否有任何意想不到的后果`begin...end`？块是否`begin...end`有任何语义差异（可能在异常处理中？）使这种用法很危险？

Ruby 的语法非常微妙，如果这里有奇怪的陷阱等着我，我也不会感到惊讶。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-11-07T22:23:44.710

如果我想为变量分配一些东西，我有时会使用它，但我必须先计算我想分配的值。这样可以使代码更加整洁。我认为这是用户偏好。基本上你是在说：我正在为 foo 分配一些东西，但是为了获得我想要的值，我首先需要做一些事情。它在做记忆时特别有用，所以代替

```
if @cache.nil?
  do_something!
  @cache = read_value
end 
```

你可以做

```
@cache ||= begin
  do_something!
  read_value
end 
```

您在这里利用的是 Ruby 解释器有一个堆栈，每个表达式通常会将某些内容推送到堆栈上，或者从堆栈中获取某些内容。赋值只是从堆栈中取出最后一件事并分配它（在这种情况下，从开始/结束的最后一行）。很多时候知道这一点（Ruby 中的堆栈方法）会很有用。

我不认为它违反了最小的惊喜，我认为这是用户的偏好，无论你想不想使用它。

通过查看它在 Ruby MRI 1.9 中生成的字节码指令，您可以看到它没有做任何意外的事情：

```
 RubyVM::InstructionSequence::compile("c = begin; a = 5; 6; end").to_a

 [:trace, 1],
 [:trace, 1],
 [:putobject, 5],
 [:setlocal, 2],
 [:trace, 1],
 [:putobject, 6],
 [:dup],
 [:setlocal, 3],
 [:leave] 
```

Trace 仅用于堆栈跟踪，您可以忽略它。Dup 复制堆栈上的最后一项。在这个例子中，局部变量的编号是，局部变量`a`的`2`编号`c`是`3`（因此`putobject, 2`将分配给变量`a`等）。与此相比，唯一的副作用`a = 5; c = 6`是`dup`指令，这意味着您的方法的堆栈大小将大 1 个插槽。但这并不是特别重要，因为它仅在解释器在此特定方法中时才有效，并且堆栈的内存无论如何都是预先保留的，因此它仅意味着堆栈指针将比其他情况多减 1。所以基本上没有任何变化。随着优化的开启，甚至`dup`可能会消失。

# objective-c - 如何使用 Cocoa 或 Foundation 获取当前连接的网络接口名称？

> ID：13279220
> 
> 赞同：2
> 
> 时间：2012-11-07T22:16:55.503
> 
> 标签：objective-c, macos, cocoa, networking, core-foundation

我需要知道当前连接的网络接口的网络接口名称，如**en0**、**lo0**等。

是否有一个 Cocoa/Foundation 函数可以为我提供这些信息？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-07T23:00:20.717

您可以循环浏览网络接口并获取它们的名称、IP 地址等。

```
#include <ifaddrs.h>
// you may need to include other headers

struct ifaddrs* interfaces = NULL;
struct ifaddrs* temp_addr = NULL;

// retrieve the current interfaces - returns 0 on success
NSInteger success = getifaddrs(&interfaces);
if (success == 0)
{
    // Loop through linked list of interfaces
    temp_addr = interfaces;
    while (temp_addr != NULL)
    {
      if (temp_addr->ifa_addr->sa_family == AF_INET) // internetwork only
      {
        NSString* name = [NSString stringWithUTF8String:temp_addr->ifa_name];
        NSString* address = [NSString stringWithUTF8String:inet_ntoa(((struct sockaddr_in *)temp_addr->ifa_addr)->sin_addr)];
        NSLog(@"interface name: %@; address: %@", name, address);
      }

      temp_addr = temp_addr->ifa_next;
    }
}

// Free memory
freeifaddrs(interfaces); 
```

上面的结构中还有很多其他的标志和数据，希望你能找到你想要的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-02T23:22:15.350

由于 iOS 的工作方式与 OSX 略有不同，我们很幸运地使用了基于 Davyd 的回答的以下代码来查看 iPhone 上所有可用网络接口的名称：（[有关 ifaddrs 的完整文档，请参见此处](http://man7.org/linux/man-pages/man3/getifaddrs.3.html)）

```
#include <ifaddrs.h>

struct ifaddrs* interfaces = NULL;
struct ifaddrs* temp_addr = NULL;

// retrieve the current interfaces - returns 0 on success
NSInteger success = getifaddrs(&interfaces);
if (success == 0)
{
    // Loop through linked list of interfaces
    temp_addr = interfaces;
    while (temp_addr != NULL)
    {
            NSString* name = [NSString stringWithUTF8String:temp_addr->ifa_name];
            NSLog(@"interface name: %@", name);

        temp_addr = temp_addr->ifa_next;
    }
}

// Free memory
freeifaddrs(interfaces); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-01-17T20:48:38.867

或者，您也可以利用`if_indextoname()`来获取可用的接口名称。以下是**Swift**实现的样子：

```
public func interfaceNames() -> [String] {

    let MAX_INTERFACES = 128;

    var interfaceNames = [String]()
    let interfaceNamePtr = UnsafeMutablePointer<Int8>.alloc(Int(IF_NAMESIZE))
    for interfaceIndex in 1...MAX_INTERFACES {
        if (if_indextoname(UInt32(interfaceIndex), interfaceNamePtr) != nil){
            if let interfaceName = String.fromCString(interfaceNamePtr) {
                interfaceNames.append(interfaceName)
            }
        } else {
            break
        }
    }

    interfaceNamePtr.dealloc(Int(IF_NAMESIZE))
    return interfaceNames
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-02T13:38:54.173

将@ambientlight 的示例代码移植到iOS 13：

```
public func interfaceNames() -> [String] {

        let MAX_INTERFACES = 128;

        var interfaceNames = [String]()
        let interfaceNamePtr = UnsafeMutablePointer<Int8>.allocate(capacity: Int(Int(IF_NAMESIZE)))
        for interfaceIndex in 1...MAX_INTERFACES {
            if (if_indextoname(UInt32(interfaceIndex), interfaceNamePtr) != nil){
                let interfaceName = String(cString: interfaceNamePtr)
                interfaceNames.append(interfaceName)
            } else {
                break
            }
        }

        interfaceNamePtr.deallocate()
        return interfaceNames
    } 
```

**最有可能泄漏内存 - 谨慎使用。**

输出：

```
▿ 20 elements
  - 0 : "lo0"
  - 1 : "pdp_ip0"
  - 2 : "pdp_ip1"
  - 3 : "pdp_ip2"
  - 4 : "pdp_ip3"
  - 5 : "pdp_ip5"
  - 6 : "pdp_ip4"
  - 7 : "pdp_ip6"
  - 8 : "pdp_ip7"
  - 9 : "ap1"
  - 10 : "en0"
  - 11 : "en1"
  - 12 : "en2"
  - 13 : "ipsec0"
  - 14 : "ipsec1"
  - 15 : "ipsec2"
  - 16 : "ipsec3"
  - 17 : "awdl0"
  - 18 : "utun0"
  - 19 : "utun1" 
```

# javascript - jQuery 代码仅在硬刷新时触发？

> ID：13279232
> 
> 赞同：0
> 
> 时间：2012-11-07T22:18:18.547
> 
> 标签：javascript, jquery, syntax-error, facebook-iframe, page-refresh

Facebook 注册插件的 XFBML 版本仅加载 HTTPS。我需要它来加载 HTTP，因此我的表单不会调用域之间的安全错误不匹配。

我编写了这段代码来获取 SRC 并在没有 HTTPS 的情况下重写它

它在第一次加载时运行良好，但在 Chrome 和 Safari 上它只在第一次加载和硬刷新时加载。它不会在标准重新加载或按地址栏上的“输入”时加载。这是代码

```
$(window).load(function () {
          // Replace HTTPS with HTTP when frame has loaded
       $(".subscribe iframe").each(function(){
        var source = $(this).attr("src");
        //alert(source);
        var sourceNew = source.replace("https", "http"); // change https to http
        alert(sourceNew);
        $(this).attr("src", sourceNew); 
    }); 
}); 
```

我已将 .HTACCESS 设置为禁用服务器缓存

```
<Files *>
Header set Cache-Control: "private, pre-check=0, post-check=0, max-age=0"
Header set Expires: 0
Header set Pragma: no-cache
</Files> 
```

是什么导致它不能可靠地触发？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T22:28:29.037

尝试将 htaccess 中的 Expires 指令更改为：

```
Header set Expires "Mon, 01 Jan 1990 01:00:00 GMT" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-16T08:19:22.440

尝试使用`<body onload="replacehttps()">`然后更改

```
$(window).load(function () { 
```

至

```
function replacehttps(){ 
```

并且不要忘记将功能块的末尾从更改`});`为`};`

# .htaccess - 如果客户端支持 gzip，则提供手动压缩索引

> ID：13279241
> 
> 赞同：2
> 
> 时间：2012-11-07T22:18:51.973
> 
> 标签：.htaccess, webserver, apache

我有两个文件：index.html 和 index.html.gz。

如果客户端支持 gzip，我想提供 index.html.gz。如果客户没有，我想提供 index.html。

如果访问者访问 www.site.com，这应该可以工作

真的不确定如何做到这一点:(

编辑：我正试图让它在 .htaccess 中工作

我可以通过执行以下操作轻松使用其他页面：

```
RewriteCond %{HTTP:Accept-encoding} gzip
RewriteRule ^contact\.html$ contact.gz 
```

但我不能用索引来做，因为人们不输入 www.site.com/index.html。他们将 index.html 排除在外。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-20T06:30:00.797

如果有人在读这篇文章，我最终找到了答案。

有多种方法可以做到这一点，例如，如果文件的“.gz”版本存在（index.html.gz），一些网络服务器（如 H2O）甚至支持自动提供网站的预压缩版本。

然而，我在 Apache 上做的方式是使用 .htaccess 将文件的所有请求重定向到“.gz”实例。这可以使用 RewriteRule

然而，当浏览器试图渲染 GZipped 数据时，所有数据都会出现在浏览器中，并认为它是文本。当我发回文件的 gzip 压缩版本时，我必须使用 .htaccess 将内容编码标头正确设置为 gzip。在那之后，一切都很完美。

另一个建议是，当您对文件进行 gzip 压缩时，请使用批处理脚本使用每种压缩模式 1-9 对文件进行 gzip，您最终将得到 10 个文件。您会注意到，在压缩模式 ~5 之后保存的大小几乎不可见，通常小于 1 KB，但解压缩此文件所需的 CPU 周期不断增长。所以为每个文件找到最佳的压缩级别，不要默认去9。

# php - mysqli_num_rows = 0 当它应该是 1

> ID：13279248
> 
> 赞同：0
> 
> 时间：2012-11-07T22:19:34.423
> 
> 标签：php, mysql, sql, mysqli, mysql-num-rows

我一直在尝试自己解决这个问题，但我终生无法解决它..

```
//If they are, retreive them from the Person table    
var_dump($_POST['username']);
var_dump($_POST['password']);
$select = $this-> doQuery("SELECT * FROM Person WHERE username = '{$_POST['username']}' AND password = '".md5($_POST['password'])."'");
var_dump($select);  

try {    
    if (mysqli_num_rows($select) > 0){
        var_dump(mysqli_num_rows($select));
        //fetching username and password from database
        $fetch_array = mysqli_fetch_assoc($select);
        var_dump($fetch_array);     
        //Building a session for the user
        $_SESSION['username'] = $fetch_array['username'];

        //var_dump($_SESSION['username']);

        //Redirecting the user to the index page        
        header('Location:index.php');
        return true;
    } 
```

第 4 行和第 5 行的用户名和密码上的两个 var_dump 返回以下内容：

```
string(8) "johnny03" 
string(9) "password3" 
object(mysqli_result)#3 (5) { ["current_field"]=> int(0) ["field_count"]=> int(8) ["lengths"]=> NULL ["num_rows"]=> int(0) ["type"]=> int(0) } 
```

我为密码和用户名输入的值都是有效的（它们在数据库中正确的列下，相信我）。我感觉我的选择查询出了点问题，因为 mysqli_num_rows($select) 上的 var 转储没有返回任何内容。话虽如此，我已经尝试了几乎所有我能想到的查询更改它有效，但仍然没有：[有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T22:36:09.980

首先：尝试从查询中删除大括号：

```
$select = $this-> doQuery("SELECT * FROM Person WHERE username = '{$_POST['username']}' AND password = '" . md5($_POST['password']) . "'"); 
```

***编辑：大括号没问题，请参阅draw010的评论。***

如果这不是问题，正如 draw010 所指出的，请检查您的结果哈希（使用简单的回显将其输出并将其与您的数据库进行比较。

**如果这些看起来确实匹配，但缺少一块，则调整数据库中密码字段的容量。**

***您的密码字段很可能有一个大小，例如 varchar(20)，它太小而无法容纳整个散列。调整数据库中的大小并存储正确的散列结果***。

另外，至少看看一些盐渍，md5 已经被破坏了一段时间，所以你***应该***用 sha 系列的哈希替换它。

您也可以使用[在线 md5 散列](http://md5-hash-online.waraxe.us/)验证数据库中的散列，并通过使用 strlen 测量它来获取长度

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T22:41:33.163

试试这个：

```
var_dump("SELECT * FROM Person WHERE username = '{$_POST['username']}' AND password = '".md5($_POST['password'])."'"); 
```

它将转储查询。您应该能够立即找出任何明显的错误。如果查询看起来不错，请尝试将其复制并粘贴到 PHPMyAdmin（或类似）中以测试查询。如果它也返回零行，那么用户/密码可能不匹配？

# symfony - 使用 Symfony2 创建 API

> ID：13279254
> 
> 赞同：0
> 
> 时间：2012-11-07T22:19:45.657
> 
> 标签：symfony, symfony-2.1

我有一个关于 API 的问题，然后是如何使用 Symfony2 创建 API 以及我可以使用哪些包来帮助创建它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T22:34:56.560

如果您想创建一个 REST API（基于服务的 API），[这里](http://williamdurand.fr/2012/08/02/rest-apis-with-symfony2-the-right-way/)有一个分步教程，可以帮助您以正确的方式进行操作 > [REST APIs with Symfony2](http://williamdurand.fr/2012/08/02/rest-apis-with-symfony2-the-right-way/)

另外，看看[FOSRestBundle](https://github.com/FriendsOfSymfony/FOSRestBundle)

# r - 如何在 Windows 上找出哪个 .c 文件包含 R 内部的 .c 函数？

> ID：13279256
> 
> 赞同：16
> 
> 时间：2012-11-07T22:20:07.197
> 
> 标签：r, windows, function, internals

我想查看R`match.call`函数的源代码。因为它是一个内部函数，所以我下载了 R 源代码，去 ./src/main/names.c 并在`match.call`那里寻找。

因此，我发现调用了相应的 .c 函数`do_matchcall`。好的，但是我怎样才能找出 ./src/main/ 中的几十个 .c 文件中的哪一个包含该函数`do_matchcall`？

顺便说一句，我使用的是 Windows 机器，以防万一。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-07T22:45:34.313

作为 Windows 用户，这里有几个选项。第一个更可取，但第二个偶尔使用也可以：

*   下载[**grepwin**](http://tools.tortoisesvn.net/grepWin.html)，它将允许您使用`grep`Joshua 和 Gavin 都提到的强大命令搜索 Windows 目录。如果您要在程序源目录中做很多事情，它（或一些等效的）是**必不可少的。**

*   [使用此站点](http://fossies.org/dox/R-2.15.2/index.html)上的搜索栏在R 源目录中搜索`do_matchcall`. 单击它返回的结果将告诉您`do_matchcall`“在文件 unique.c 的第 1193 行 [已定义]”，并将提供指向 unique.c 中代码的超链接。

就像我说的，不过，如果你为你的 Windows 机器配备了*一些*`grep`.

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-04-17T10:40:23.457

我知道很久以前就有人问过这个问题，但由于它仍然相关，我想我会添加一些人们可以用来查找正确 R 源文件的资源。

1.  首先，使用**pryr** ，您可以使用`show_c_source`在 GitHub 上搜索 C 源文件中相关代码的功能。

    ```
    body(match.call)

    # .Internal(match.call(definition, call, expand.dots))

    pryr::show_c_source(.Internal(match.call(definition, call, expand.dots))) 
    ```

    这会将您带到[此页面](https://github.com/search?q=SEXP%20attribute_hidden%20do_matchcall%20repo:wch/r-source&type=Code)，显示`unique.c`包含函数[do_matchcall](https://github.com/wch/r-source/blob/ec8db8be924cf4ffd49438cbca38b876c7931863/src/main/unique.c#L1261)。

2.  我已经把这个[制表符分隔的文件](https://gist.github.com/dcomtois/261ff939d1a1b27525f1)放在一起，建立在`names.c`文件上并使用文件中*查找*来确定源代码的位置。有一些函数具有特定于平台的文件，还有一些函数有多个具有相关源代码的文件。但是对于其余部分，映射已经很好地建立了，至少对于当前版本（3.1.2）。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-07T22:36:40.050

[Uwe Ligges 在R News (2006, 6(4):43-45)](http://cran.r-project.org/doc/Rnews/Rnews_2006-4.pdf)上写了一篇关于这个主题的“R Help Desk”文章。

一旦确定了实际使用的 C 函数，然后使用文件系统搜索工具在相关源文件夹中搜索函数名称；在这种情况下`./src/main/`，例如在 Linux 上

```
$ grep -r -H "do_matchcall" ./src/main/
./src/main/.svn/text-base/names.c.svn-base:{"match.call",   do_matchcall,   0,  11, 3,  {PP_FUNCALL, PREC_FN,   0}},
./src/main/.svn/text-base/unique.c.svn-base:SEXP attribute_hidden do_matchcall(SEXP call, SEXP op, SEXP args, SEXP env)
./src/main/unique.c:SEXP attribute_hidden do_matchcall(SEXP call, SEXP op, SEXP args, SEXP env)
./src/main/names.c:{"match.call",   do_matchcall,   0,  11, 3,  {PP_FUNCALL, PREC_FN,   0}}, 
```

表明这`unique.c`是在这种情况下看的地方。

据我所知，没有办法（除了调用对终端的系统调用）从 R 中识别哪个源文件包含 R 中给定函数的 C 代码 - 好吧，不是没有重写`grep`或`find`类似使用R代码:-)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-06-07T12:15:40.853

不要下载用于一次性文件内容搜索的实用程序。您可以使用 findstr。它不适合完整的文件系统搜索，但我认为它非常适合您尝试做的事情。

1.  运行命令外壳

**命令**

2.  转到目录（如果您不确定路径是什么，请在资源管理器中找到它，而不是通过单击地址栏查看完整路径）您可以复制/粘贴该目录。
    如果路径是 C:\Users\jsmith\documents\projects\happy\src\main

**cd C:\Users\jsmith\documents\projects\happy\src\main**

3.  使用 findstr

**findstr do_matchcall**

如果你想搜索子目录

**findstr /s do_matchcall**

如果只想知道文件名

**findstr /m do_matchcall**

如果要将结果发送到另一个文件

**findstr /s /m do__matchcall >searchresult.txt**

如果你想要行号

**findstr /n do_matchcall**

Findstr 还支持正则表达式。查看所有选项

**查找str /？**

# android - 在 AndEngine 中，操作一个 body 总是返回一个 NullPointerException

> ID：13279260
> 
> 赞同：1
> 
> 时间：2012-11-07T22:20:35.780
> 
> 标签：android, opengl-es-2.0, box2d, andengine

我从 AndEngine (GLES2) 开始，我正在尝试制作一个简单的桨精灵，并且在使用 TouchScreen 时它连接的身体移动。但是，无论我如何调整代码，当我尝试对有问题的主体进行调用时，它总是返回 NullPointerException，无论调用是什么。

这是我创建 Paddle 的代码：

```
// Create the Paddle, body for said paddle, and register with the PhysicsWorld
    final FixtureDef objectFixtureDef = PhysicsFactory.createFixtureDef(1, 0.5f, 0.5f);    
    paddleSprite = new Paddle(mPaddle, getVertexBufferObjectManager());
    Body paddleBody = PhysicsFactory.createBoxBody(mPhysicsWorld, paddleSprite, BodyType.DynamicBody, objectFixtureDef);
    mPhysicsWorld.registerPhysicsConnector(new PhysicsConnector(paddleSprite, paddleBody, true, false));
    paddleBody.setUserData("Paddle");

// .... other Code for initializing sprites ..... //
    mScene.attachChild(paddleSprite);
    mScene.registerTouchArea(paddleSprite);
    mScene.setTouchAreaBindingOnActionDownEnabled(true);

// Method for TouchScreenInteraction
public boolean onSceneTouchEvent(Scene pScene, TouchEvent pSceneTouchEvent) {
    if(this.mPhysicsWorld != null){
    paddleBody.setTransform(new Vector2((pSceneTouchEvent.getX() - paddleSprite.getWidth() / 2)/PhysicsConstants.PIXEL_TO_METER_RATIO_DEFAULT,
            (pSceneTouchEvent.getY() - paddleSprite.getHeight() / 2)/PhysicsConstants.PIXEL_TO_METER_RATIO_DEFAULT),
            0);
    return true;
    }
return false;
} 
```

paddleSprite、paddleBody 和physicsWorld 是全局对象，因此访问不是问题。

NullPointerException 在我触摸屏幕的那一刻发生。如果我删除了有问题的函数调用，它会起作用，因为在稍微触摸它之后偶尔会破坏游戏。除了这个问题，Box2D 引擎运行平稳，另一个动态对象（一个小球）与桨的交互也很好。

如果无法从中确定问题，我可以发布其余的代码，但我已经坚持了一周，我非常感谢一些帮助，这样我就可以真正开始项目了。

非常感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T14:35:25.140

这条线就是你的问题。您正在创建一个新的、*本地范围* `paddleBody`的.

```
Body paddleBody = PhysicsFactory.createBoxBody(...); 
```

当您尝试将它用于触摸事件时，您正在使用一个`paddleBody`可能根本没有初始化的类级别。只需`Body`从违规行中删除 以避免创建新对象：

```
paddleBody = PhysicsFactory.createBoxBody(...); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T15:17:25.043

paddleBody 是您方法中的局部变量。使其全球化。

# php - 检测和存储注销时间

> ID：13279264
> 
> 赞同：0
> 
> 时间：2012-11-07T22:20:46.207
> 
> 标签：php, session, logging, tracking, logout

我的应用程序当前存储了一些基本的 _SESSION 事件，例如登录和请求的每个页面/URI。我被要求增强事件日志记录以包括用户注销时的跟踪。

注销的问题在于用户并不总是记得单击专用的注销按钮。有时他们只是让浏览器保持打开状态，或者关闭打开的浏览器窗口，或者干脆关闭。我不能总是保证确切的注销事件。

我可以通过在我的事件表中查询没有活动的时间段来粗略了解用户注销时间，但这似乎很粗鲁。

是否有在 PHP 中检测被动注销的最佳实践？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T22:32:44.487

你基本上有你的答案 - 没有活动意味着他们已经注销。

如果您的服务器可以处理它，并且它非常重要，您可以将 Javascript 超时设置为每分钟“ping”一次。如果你得到了 ping，那么浏览器仍然在页面上，如果你没有，他们可能已经移动了。确切地说，当您定义“注销”时仍然有点猜测工作，添加用户可能会离开页面，然后在会话有效时稍后返回。

# c# - C# 服务集成

> ID：13279276
> 
> 赞同：0
> 
> 时间：2012-11-07T22:21:35.477
> 
> 标签：c#, windows-services

需要构建一个服务，在拔下网络电缆时显示一条消息并锁定计算机（只需使用 Windows 窗体）（因此他们无法在没有网络的情况下继续进行 - 它适用于学生不断拔下电缆以绕过某些块）

我已经看到，如果您允许的话，您可以通过服务与桌面交互，我只是想知道即使没有用户登录，Windows 窗体也会显示吗？

由于该程序需要在进行身份验证时将其捕获，然后将其拔下。

干杯理查德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T23:30:17.037

您可以创建一个简单的应用程序，该应用程序显示任何启动屏幕并有机会取消，然后锁定计算机（或者您希望它工作），而不是作为 Windows 服务，而是作为桌面应用程序。只要网络断开事件触发，就可以触发该应用程序启动。

请参阅[这篇文章](https://superuser.com/a/262880/132762)，了解如何设置计划任务以在网络断开时启动应用程序。

请参阅[这篇](http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/7aab9893-430a-4aed-8d51-b8368a61860e)关于如何以编程方式锁定计算机的帖子

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T22:28:01.237

Windows 上有几个桌面，一个用于 Windows 服务，一个用于登录，一个用于用户等。有关详细信息，请参阅[此链接](http://blogs.technet.com/b/askperf/archive/2007/07/24/sessions-desktops-and-windows-stations.aspx)。

我认为您可以做的是创建一个新桌面，然后在网络连接丢失时切换到该桌面。请参阅[此问题](https://stackoverflow.com/questions/8152207/c-sharp-and-win32-api-switch-between-two-desktops-how-to-get-back-to-the-origi)作为开始。但是，由于安全限制，这不适用于 Windows 服务，因为它是不同的会话。但是，您可以做的（我认为）是让应用程序在用户登录时自动启动并让该应用程序与 Windows 服务对话。该应用程序可以进行桌面切换。

然后该服务将管理网络并通知应用程序。如果应用程序未在固定超时内启动或被终止，我认为您应该能够使用[WTS-api](https://stackoverflow.com/questions/5207506/logoff-interactive-users-in-windows-from-a-service)注销用户。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T22:29:39.207

从 Vista 开始，Windows 服务无法与任何交互式桌面交互。这意味着您无法执行您从 Windows 服务中提出的建议。您将需要一个标准的桌面应用程序。

# python - Apple Mail.app 使用插件设置 HTML 签名

> ID：13279277
> 
> 赞同：2
> 
> 时间：2012-11-07T22:21:43.040
> 
> 标签：python, objective-c, cocoa

我使用 Python 创建了一个 Mail.app 插件，通过在 ComposeBackEnd 中调配 setSignature: 方法来设置从远程服务器提取的自定义签名。根据下面的类转储，我可以使用 setSignatureContents: 设置纯文本签名：这是功能性的。

```
@interface Signature : NSObject <NSCopying>
{
    NSString *_uniqueId;
    NSString *_name;
    NSData *_webArchiveData;
    BOOL _isRich;
    BOOL _isSavedAsRich;
    BOOL _isDirty;
    MFSyncedFile *_syncedFile;
}

- (id)syncedFile;
- (id)signaturePath;
- (unsigned long long)hash;
- (BOOL)isEqual:(id)arg1;
- (BOOL)isRich;
- (void)setIsRich:(BOOL)arg1;
- (void)setWebArchive:(id)arg1;
- (id)webArchive;
- (id)webArchiveData;
.....
- (void)setSignatureContents:(id)arg1;
- (id)signatureContents;
- (void)setSignatureName:(id)arg1;
- (id)signatureName;

@end 
```

但是，当我尝试使用 setWebArchive 设置 HTML 签名时：（应该采用 NSData 对象）：

```
signature.setWebArchive_(NSData.dataWithContentsOfURL_(NSURL.URLWithString_('http://...'))) 
```

我收到以下错误：

```
11/7/12 11:07:38.858 AM Mail[8820]: -[NSConcreteData data]: unrecognized selector sent to instance 0x7ffc2386bc00 
```

（远程文件已经是正确的格式）

有什么办法可以使这项工作？提前致谢。

* * *

编辑 - 试过这个（返回应该响应的 WebArchive 对象`-[data]`）：

```
wds = WebDataSource.alloc().initWithRequest_(NSURLRequest.requestWithURL_(NSURL.URLWithString_('http://...')))
        webarchive = wds.webArchive
        signature.setWebArchive_(webarchive) 
```

结果：

```
11/7/12 3:26:59.173 PM Mail[16814]: An uncaught exception was raised
11/7/12 3:26:59.173 PM Mail[16814]: Class OC_PythonObject: no such selector: data 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T23:50:12.673

> 但是，当我尝试使用 setWebArchive 设置 HTML 签名时：（应该采用 NSData 对象）...我收到以下错误：

```
11/7/12 11:07:38.858 AM Mail[8820]: -[NSConcreteData data]: unrecognized selector 
```

此错误告诉您`-[setWebArchive:]`正在尝试调用`-[data]`您的`NSData`对象。由于`-[NSData data]`不存在，您会得到一个无法识别的选择器异常。

显然它不需要一个`NSData`，它需要`-[data]`通过返回一个响应的东西`NSData`。

> 编辑 - 尝试了这个（返回应该响应 -[data] 的 WebArchive 对象）：

```
wds = WebDataSource.alloc().initWithRequest_(NSURLRequest.requestWithURL_(NSURL.URLWithString_('http://...')))
webarchive = wds.webArchive
signature.setWebArchive_(webarchive) 
```

等等……你还没有显示这个类的转储，但是另一个类有一个方法`-[webArchive]`，而不是一个正确的`webArchive`。所以，如果它们完全一致，那么这个也可能有一个方法，而不是一个属性。

如果是这样，这意味着`wds.webArchive`将不会是`WebArchive`一个对象，它将是一个包装器对象，大致代表 Python 绑定方法的 ObjC 等价物。调用`-[data]`那个东西几乎肯定会失败。

```
11/7/12 3:26:59.173 PM Mail[16814]: Class OC_PythonObject: no such selector: data 
```

如果您只是将其更改为`wds.webArchive()`，那应该可以解决问题。

最后，值得在这里做一些调试打印。如果你认为你有 a`WebArchive`并`-[WebArchive data]`返回 a `NSData`，你可以很容易地测试它：

```
print webArchive
print webArchive.data() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T21:40:52.563

如果有人想要这样做，这里是创建和设置 Web 存档的解决方案（您需要添加 WebKit 框架）：

```
WebView *webView = [[WebView alloc] init];
WebFrame *webFrame = [webView mainFrame];

NSURLRequest *urlRequest = [NSURLRequest requestWithURL:[NSURL URLWithString:@"http://..."]];
[webFrame loadRequest:urlRequest]; 
```

-

```
WebDataSource *webDataSource = webFrame.dataSource;
WebArchive *webArchive = webDataSource.webArchive;
[signature setWebArchive:webArchive]; 
```

转换为 PyObjC 语法后的上述代码在最新版本的 Mail 中运行良好。不幸的是，它不能是本地文件，因为 10.8 上的 Gatekeeper 对其进行了限制，并且您必须在 setSignature 之前调用 URL 请求：（例如，将 webFrame 设置为全局变量并将主窗口加载子类化）否则它不会及时加载你只会得到一个空的WebArchive。

# objective-c - 以编程方式创建和 UITabBar 并检测更改

> ID：13279279
> 
> 赞同：0
> 
> 时间：2012-11-07T22:21:48.407
> 
> 标签：objective-c, ios, uikit, uitabbar

因此，我尝试使用 UITabBar 而不是 UITabBarController 来创建应用程序，因此我在标题中声明了 UITabBar 以使其可以从我的所有方法中访问，因此我只是这样做了：

```
tabBar = [[UITabBar alloc] initWithFrame:CGRectMake(0, 430, 320, 50)];
[self.view addSubview:tabBar]; 
```

我使用 NSMutableArray 添加我的对象......但在我的标题中，我也删除了：

```
@interface RootViewController: UIViewController {
IBOutlet UITabBar *tabBar;
}
@property (nonatomic, retain) UITabBar *tabBar;
- (void)tabBar:(UITabBar *)tabBar didSelectItem:(UITabBarItem *)item; 
```

然后我做了一个简单的函数来配合它：

```
- (void)tabBar:(UITabBar *)tabBar didSelectItem:(UITabBarItem *)item {
    NSLog(@"didSelectItem: %d", item.tag);
} 
```

但是当我进入应用程序并尝试更改选项卡时，日志什么也没有返回，所选的选项卡发生了变化，但我的日志什么也没有！我已经在互联网上看到这个功能设置为完成这项工作，但我不明白为什么它不适用于我的代码。那么有人可以告诉我我做错了什么，这个功能不会选择标签更改吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T22:58:34.147

在 RootViewController.h 中，执行以下操作：

```
@interface RootViewController : UIViewController

@end 
```

在 RootViewController.m 中，执行以下操作：

```
@interface RootViewController () <UITabBarDelegate>
@end

@implementation RootViewController {
    UITabBar *tabBar;
}

#pragma mark UITabBarDelegate methods

- (void)tabBar:(UITabBar *)tabBar didSelectItem:(UITabBarItem *)item {
    NSLog(@"didSelectItem: %d", item.tag);
}

#pragma mark UIViewController methods

- (void)viewDidLoad {
    [super viewDidLoad];

    tabBar = [[UITabBar alloc] initWithFrame:CGRectMake(0, 430, 320, 50)];
    tabBar.delegate = self;
    [self.view addSubview:tabBar];
}

@end 
```

这种布局利用了现代 Objective-C 的新 LLVM 编译器特性。

您不需要属性，因为该类的任何用户都不需要访问标签栏。您不需要将任何内容标记为，`IBOutlet`因为您没有使用 Interface Builder 来设置选项卡栏。您没有在 .h 文件中声明选项卡栏委托方法，因为该类的任何客户端都不会调用该方法。

# asp.net-mvc - 如何指向 .NET WEB API 应用程序以从 BIN 子目录加载未引用的控制器

> ID：13279283
> 
> 赞同：0
> 
> 时间：2012-11-07T22:22:20.717
> 
> 标签：asp.net-mvc, rest, web-config, asp.net-web-api

我正在使用框架 4.5 开发 .NET WEB Api REST 服务，现在的架构方向是分离我们 API 的功能区域。换句话说，将控制器放入单独的程序集中，例如将控制器放在诸如 company.web.administration、company.web.claims 等程序集中。

在尝试了它之后，我注意到了 MVC 框架的强大功能。我可以将控制器放入单独的类库中，但只要这些库位于 bin 文件夹中，它们**甚至不必被引用**。MVC 在程序集中找到它们，并且 API 调用工作正常。

但是在这种架构下，问题就出现了，我们可能会得到大量的这些控制器库。因此，例如，将它们打包在 bin\controllers 下会很有帮助。将控制器放入子文件夹会停止 ASP.NET MVC WEB API 框架找到它们的能力。

我正在寻找一种方法来告诉框架在我的目录下以及 bin 中查找这些控制器。我使用的选项之一是我修改了 Web.config 文件，如下所示：

```
<runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
        <probing privatePath="bin;bin\controllers;controllers"/>
    </assemblyBinding>
</runtime> 
```

那没有用。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T01:36:01.763

不久前，我写了一篇关于如何做到这一点的博客文章 - [http://www.strathweb.com/2012/06/using-controllers-from-an-external-assembly-in-asp-net-web-接口/](http://www.strathweb.com/2012/06/using-controllers-from-an-external-assembly-in-asp-net-web-api/)

基本上，您需要推出自己的或`IAssembliesResolver`覆盖`GetAssemblies()`.`DefaultAssembliesResolver`

```
public class CustomAssemblyResolver : IAssembliesResolver
{
  public ICollection<Assembly> GetAssemblies()
  {
    List<Assembly> baseAssemblies = AppDomain.CurrentDomain.GetAssemblies().ToList();
    var controllersAssembly = Assembly.LoadFrom(@"C:\PATH_TO_MY_CONTROLLERS_ASSEMBLY");
    baseAssemblies.Add(controllersAssembly);
    return baseAssemblies;
   }
} 
```

# jquery - 如何获取 JQuery 弹出对话框 url

> ID：13279289
> 
> 赞同：-1
> 
> 时间：2012-11-07T22:22:57.800
> 
> 标签：jquery, asp.net, jquery-ui

我有一个名为的网页`Main.aspx`，其中我正在调用一个 JQuery 弹出对话框，并从这里转到另一个弹出对话框。我的问题是，当我`window.location.href`在弹出窗口中检索时，它`Main.aspx`作为页面 url 而不是弹出对话框 url 获取。有人可以帮我吗？我需要从这些对话框中检索一些参数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T23:40:37.300

真的..对不起，我忘记了我可以使用 document.getElementById(); 访问父窗口元素；有效。不管怎么说，多谢拉。

# c++ - C++ 标准如何适应与平台相关组件的链接？

> ID：13279291
> 
> 赞同：0
> 
> 时间：2012-11-07T22:23:22.597
> 
> 标签：c++, linker, cross-platform, standards

在编写程序时，我的目标是避免任何未指定或实现定义的行为。当链接到 C++ 库时，我希望它们以类似的方式编写。如果我链接到一个在编译时使用实现定义行为的库，这是否会立即使我自己的程序实现根据标准定义？

在这一点上它甚至重要吗？如果库已经编译为目标代码，我什至不会处理实现定义的 C++ - 事实上，它甚至可能不是用 C++ 编写的。当我使用本质上依赖于平台的 API（例如 POSIX）时，会怎样？

该标准的编写方式似乎假设我的“C++ 程序”完全由我编写，不涉及其他预编译组件。它如何适应这些组件的链接以及标准在什么时候不再关心我的程序的功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T22:35:24.873

如果您调用具有未指定（或实现定义或未定义）行为的函数，则您的程序具有未指定（或实现定义或未定义）行为。

该标准没有定义程序“实现定义”的含义，所以我不能回答那部分，只能说不，您的程序不是根据标准实现定义的。它的行为是。

如果你使用从 Posix 调用函数，那么你的程序依赖于 Posix 的（那部分）。这种程序的行为不是由 C++ 标准单独定义的，因为 C++ 标准不知道也不关心 Posix 函数的作用。但是，*如果*了解 Posix 函数的作用，您可以使用 C++ 标准来计算整个程序的作用。所以行为可以由 C++ 标准定义，除了 C++ 标准范围之外的部分。

在某些情况下，您只需链接到库即可使程序具有未定义的行为，而无需调用其中的代码。违反单一定义规则就是一个明显的例子。就标准而言，您有权定义一个名为 的函数`pthread_create`，但如果您将该程序与 pthread 链接，您将有未定义的行为。

无论 Posix 和其他操作系统功能是“程序的一部分”还是“实现的一部分”，都存在灰色地带。例如`strdup`，您可以在非 Posix 环境中轻松实现。如果它是“实现的一部分”，那么它的行为当然是实现定义的。如果它是“程序的一部分”，那么程序的行为就取决于程序，与每个 C++ 程序的行为一样！C++ 标准并不真正关心您选择哪种方式来考虑它。

该标准不假设程序有多少作者。如果您使用的组件已记录在案，那么作为将最终程序组合在一起的人，您有责任确定您是否以某种方式使用它们以使您的程序行为符合您的定义. 如果他们没有记录，或者他们的行为不像他们的文档所说的那样，那么你可能想向他们的作者提出一个案例，*他们*有责任对此做些什么;-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T22:40:35.677

如果该库是标准库的一部分，您可以假设它在任何符合标准的平台上都可用，并且它的行为将与它的接口有关。

如果没有，你不能。而且您不能假设它可以从该平台的源代码编译，或以任何其他方式移植。然后，您不能仅通过重新编译将程序移植到该平台。这是编写没有实现定义行为的程序的目的。

# java - 如何从对象中获取值

> ID：13279292
> 
> 赞同：0
> 
> 时间：2012-11-07T22:23:22.823
> 
> 标签：java, object

从下面的行我得到一个对象`PdsLongAttrImpl`

```
Object obj = typeInfo.getParseMethod().invoke(null, rawValue); 
```

该对象具有`propertyKey`和`Value`作为字段。

如何从上述特定对象中获取值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T22:24:44.123

`obj`将返回的类型转换为类型。

例如，如果您的预期返回类型是`PdsLongAttrImpl`

那么，它将是：

```
PdsLongAttrImpl pdsObj = (PdsLongAttrImpl)obj; 
```

//然后对`pdsObj`.

注意：如果 obj 不是您要转换的类型，您最终会得到`ClassCastException`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T22:26:10.487

只需将值转换为正确的类型：

```
 YourTypeHere obj = (YourTypeHere)typeInfo.getParseMethod().invoke(null, rawValue); 
```

如果您不确定类型，可以使用：

```
 System.out.println(typeInfo.getParseMethod().invoke(null, rawValue).getClass().getName)); 
```

这将在控制台上打印类的名称

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T22:25:52.253

如果您知道对象是什么类型（并且 PdsAttrImpl 是代码的可见类），则可以将其转换为

```
PdsLongAttrImpl casted = (PdsLongAttrImpl)obj;

//assuming you have getXXX methods for the two fields

casted.getPropertyKey();
casted.getValue(); 
```

# emacs - symfony2 与 emacs 互锁文件有关的问题

> ID：13279296
> 
> 赞同：2
> 
> 时间：2012-11-07T22:23:47.690
> 
> 标签：emacs, symfony

我最近才开始使用 Emacs 在 Symfony 2 上进行开发。

我遇到过 Emacs 互锁文件干扰 Symfony 2 的自动加载器功能的两个地方。

第一个例子，当使用控制器时，Emacs 会创建一个互锁符号链接文件，名为

`.#DefaultController.php -> user@local.1234`

旁边

`DefaultController.php`

当我尝试在我的网络浏览器中加载项目时，我收到以下错误：

> SplFileInfo::getMTim​​e(): stat failed for /home/user/project/src/DefaultBundle/Controller/.#DefaultController.php

当我手动删除时错误消失`.#DefaultController.php`

显然，Symfony 2 试图统计文件并失败，因为它是一个死胡同。

第二个例子，在处理实体时，Emacs 创建了一个互锁符号链接文件，名为

`.#Product.php -> user@local.1234`

旁边

`Product.php`

当我尝试跑步时

`app/console doctrine:schema:update`

然后，当我运行 app/console dictionary:schema:update 时出现以下错误

> 致命错误：Doctrine\Common\Persistence\Mapping\Driver\AnnotationDriver::getAllClassNames(): 无法在 /home/ 中打开所需的 '' (include_path='.:/usr/share/php:/usr/share/pear') user/project/vendor/doctrine/common/lib/Doctrine/Common/Persistence/Mapping/Driver/AnnotationDriver.php 在第 194 行

手动删除 .#Product.php 文件后，错误消失。

有没有其他人遇到过这样的问题？

我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T22:58:25.120

这是关于注释阅读器的问题，当遇到无法解析的符号链接时，它不应该如此失败：

看看为什么会失败：[https ://github.com/doctrine/common/blob/master/lib/Doctrine/Common/Persistence/Mapping/Driver/AnnotationDriver.php#L194](https://github.com/doctrine/common/blob/master/lib/Doctrine/Common/Persistence/Mapping/Driver/AnnotationDriver.php#L194)

这应该在适当的邮件列表中与 Doctrine 的开发人员进行讨论。

# c# - 在 MVC3 模型中显示运行时数据时 DisplayName DataAnnotation 的替代方案

> ID：13279297
> 
> 赞同：1
> 
> 时间：2012-11-07T22:23:50.473
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

我需要显示一个标签，其文本在运行时确定。

以前，当文本在编译时已知时，我能够使用 DisplayName DataAnnotation 来设计我的模型如何表示其数据。

例如，我曾经有这个：

```
[DisplayName("Task Template")]
public List<KeyValuePair<int, string>> TaskTemplate { get; set; }

<%= Html.LabelFor(model => model.TaskTemplate) %>
<%= Html.DropDownListFor(model => model.TaskTemplateFlag, new SelectList(Model.TaskTemplate, "Key", "Value"))%> 
```

但现在 DisplayName 需要在运行时确定。

根据[这个 StackOverflow 答案](https://stackoverflow.com/questions/9434918/displayattribute-name-with-a-variable-dynamic-displayname)，没有办法使用 DataAnnotation 来做到这一点。

我想知道最佳实践是什么？我是否完全停止使用 LabelFor？我是否应该在我的模型中存储一堆字符串属性，将我的值加载到属性中，然后使用 DisplayFor 进行渲染？

**更新：**我认为这可能是一个足够好的解决方案：

```
public string TaskTemplateLabel { get; set; }
public List<KeyValuePair<int, string>> TaskTemplate { get; set; }

//Constructor: TaskTemplateLabel = GetLabelFromDataSource();

<%= Html.LabelFor(model => model.CurrentDeviceName, Model.TaskTemplateLabel)%> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T22:39:22.253

根据我的理解，这就像使用`LabelFor`html 助手的重载一样简单

```
@Html.LabelFor(x => item.ID, item.ID.ToString()) 
```

在上面的示例中，将为`ID`属性创建一个标签，文本**实际上**是**属性的值**

这是渲染的结果：

```
<label for="item_ID">7061207d-4ad4-45dd-aada-8335b98538c3</label> 
```

将此与传统示例进行比较：

```
@Html.LabelFor(x => item.ID) 
```

呈现：

```
<label for="item_ID">ID</label> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T22:35:35.043

如果在运行时确定标签文本所需的所有输入在编译时都可用，则您可以构建自己的数据注释属性，该属性继承自 DisplayName 属性。虽然我不确定你是否可以从 DisplayName 类继承。它可能被密封。

另一种选择是实现您自己版本的 LabelFor 扩展方法。

# windows - 如何使用 VBS 连接到网络文件夹 - 首先提示输入计算机名称？

> ID：13279298
> 
> 赞同：0
> 
> 时间：2012-11-07T22:23:53.337
> 
> 标签：windows, networking, scripting, vbscript, windows-xp

我整个下午都在搜索 SO 和谷歌，试图解决这个问题，

我想要一个 .vbs 脚本，提示我输入计算机名称，例如 PC123，然后连接到计算机的 C 驱动器 (\PC123\c$) 并使用所需的登录凭据打开一个 Windows 资源管理器窗口（这将是每台计算机的格式相同）

IE：

用户名：PC123\PC123_ADMIN

密码：PC123#ADMINpass

这是我目前拥有的：

```
Set objNetwork = WScript.CreateObject("WScript.Network")
objNetwork.MapNetworkDrive "R:", "\\PC123\C$", False, "PC123\PC123_ADMIN",     "PC123#ADMINpass" 
```

这可以将 R: 连接并映射到我想要的 pc，但必须硬编码到一台特定的计算机，并且不允许我进入我想连接的计算机。

如果可能的话，我想直接打开 C$ 的资源管理器窗口，因为我需要连接到不同数量的计算机。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T00:31:28.860

查找 InputBox 函数。它会提示您输入值。例如

```
Input = InputBox("Enter your computer name") 
```

要在资源管理器中打开映射的驱动器，请使用运行。例如

```
Dim oShell
Set oShell = WScript.CreateObject ("WSCript.shell")
oShell.run "start R:" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T12:43:57.573

另一种选择可能是`explorer.exe`直接从 UNC 路径开始（如果运行该命令的用户有权访问共享）：

```
computer = InputBox("Enter computer name")
CreateObject("WScript.Shell").Run "explorer /e,\\" & computer & "\C$", 1, False 
```

**编辑：**如果您必须传递凭据，请坚持使用您所拥有的并将静态计算机名称替换为变量：

```
computer = InputBox("Enter computer name")
path     = "\\" & computer & "\C$"
username = computer & "\" & computer & "_ADMIN"
password = computer & "#ADMINpass"

Set objNetwork = CreateObject("WScript.Network")
objNetwork.MapNetworkDrive "R:", path, False, username, password 
```

您可以像使用 UNC 路径一样使用该驱动器号打开资源管理器窗口：

```
CreateObject("WScript.Shell").Run "explorer /e,R:\", 1, False 
```

# javascript - 在表单发布返回文件时显示“等待”光标

> ID：13279303
> 
> 赞同：0
> 
> 时间：2012-11-07T22:24:06.893
> 
> 标签：javascript, jquery, asp.net, html

在这个论坛上花了很长时间寻找与我的问题相似的答案，但找不到与我的情况相匹配的答案。

我有一个 HTML 表单，我通过 javascript 提交到我的 aspx 页面。

```
function Submit()
{
  document.MyFormName.action = 'StreamPDF.aspx'
  document.MyFormName.submit();
} 
```

StreamPDF.aspx 返回向用户显示打开/保存对话框的 application/pdf。PDF 生成需要相当长的时间，用户需要看到“等待”光标。这是一个简单的 aspx 页面（没有 MVC，没有其他插件）。

所以我唯一的选择是使用 javascript 发布数据。最接近的答案是[this](http://johnculviner.com/post/2012/03/22/Ajax-like-feature-rich-file-downloads-with-jQuery-File-Download.aspx)。我从这个链接中获得了这个想法，就在我提交 iframe 之前，我正在设置等待光标。但我无法知道 PDF 是否返回，因为我无法将 cookie 发送到浏览器。这是我的局限。所以我仍然在第一方。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T22:49:57.610

你能试试吗`blockui`

[http://forums.asp.net/p/1620326/4457438.aspx/1?Re+Show+wait+message+on+submit](http://forums.asp.net/p/1620326/4457438.aspx/1?Re+Show+wait+message+on+submit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T17:02:53.177

经过几次尝试使其正常工作后，我意识到解决此问题的唯一非侵入性方法是我发布的链接中的建议。让服务器通过设置一个被客户端脚本删除的 cookie 来通知客户端该文件是流式传输的。

感谢您的所有回复。

# css - 如何：在 2 列中显示垂直子菜单（附加 css 代码）

> ID：13279304
> 
> 赞同：1
> 
> 时间：2012-11-07T22:24:21.277
> 
> 标签：css, menu

我有一个带有子菜单的垂直菜单。我希望子菜单显示在 2 列中。我现在可以在 1 列中显示子菜单。

谁能帮我？我在网上搜索了很多信息，很难找到有关此主题的垂直菜单。

这是我的CSS：

```
 #menuvertical { 
        text-align: left;
        width:180px;
        position: absolute;
        top:200px;
        left: 10px;
        /*opacity: .9;*/
        z-index: 1;
        border: 2px solid #ffc82b;
    }

#menuvertical_location {
    position: absolute;
    top:11px;
    left: 170px;
    }

#menuvertical ul {
    list-style-type: none;
    padding:0;
    }

#menuvertical ul li.nivel1 {
width: 180px; /* Ancho de las pestañas */
}
#menuvertical ul li.primera { /*Líneas división celdas*/
    border-top-width: thin;
    border-top-style: solid;
    border-top-color: #e0d9aa;
}
#menuvertical ul li {
    padding:0;
    background-image: url(../images/flecha_categoria.png);
    background-repeat: no-repeat;
    background-position: right center;
}

#menuvertical ul li a {
    display: block;
    text-decoration: none;
    color: #9c503b; /* Color del texto */
    background-color: #fff3d6; /* Color de fondo */
    border: solid 0px #fee; /* Borde de las pestañas */
    border-top: none;
    padding: 10px; /*Ancho celda*/
    position: relative;
    font-family: Verdana, Geneva, sans-serif;
    font-size: 12px;
    font-weight: bolder;
}
#menuvertical ul li:hover {
position: relative;
color: #000; /* Color del texto al pasar el mouse */
}
#menuvertical ul li a:hover, #menuvertical ul li:hover a.nivel1 {
    background-color: #FFF; /* Color de fondo al pasar el mouse */
    color: #000;
    position: relative;
    list-style-type: none;
    border-top-width: 1px;
    border-right-width: 1px;
    border-bottom-width: 1px;
    border-left-width: 1px;
    border-top-style: solid;
    border-bottom-style: solid;
    border-left-style: solid;
    border-top-color: #d6d6e6;
    border-right-color: #d6d6e6;
    border-bottom-color: #d6d6e6;
    border-left-color: #d6d6e6;
    border-right-style: solid;
}
#menuvertical ul li a.nivel1 {
display: block !important;
display: none;
position: relative;
}
#menuvertical ul li ul {
    display: none;
    border-top-width: 1px;
    border-right-width: 1px;
    border-bottom-width: 1px;
    border-left-width: 1px;
    border-top-style: solid;
    border-bottom-style: solid;
    border-top-color: #d6d6e6;
    border-right-color: #d6d6e6;
    border-bottom-color: #d6d6e6;
    border-left-color: #d6d6e6;
    border-right-style: solid;

}
#menuvertical ul li a:hover ul, #menuvertical ul li:hover ul {
    display: block;
    position: absolute;
    left: 179px;
    top: -1px;
    /*border: 1px solid #d6d6e6;*/  
}

#menuvertical ul li ul li ul {
    float:left;
    width: 150px;

    }

#menuvertical ul li ul li a { /*COLOR AZULLLLLLLLLLLLLLLL*/
    background-color: #FFF; /* Color de fondo subpestañas */
    color: #103856; /* Color del texto subpestañas */
    width: 300px;
    border: 0px solid #ffc82b;
    font-family: Arial, Helvetica, sans-serif;
    font-size: 12px;

    /*-moz-column-width: 300px;
    -moz-column-count: 2;*/

}

#menuvertical ul li ul li a:hover {
    position: relative;
    /*background-color: #6E6E6E;*/ /* Color de fondo al pasar el mouse subpestañas */
    color: #ff7800; /* Color del texto al pasar el mouse subpestañas */
    border-top-style: none; /*Para q no halla bordes sobre el submenú al hacer hover sobre el menu de nivel 1*/
    border-right-style: none;
    border-bottom-style: none;
    border-left-style: none;

} 
```

提前感谢您的帮助。

# java - Java中的语法排序

> ID：13279311
> 
> 赞同：3
> 
> 时间：2012-11-07T22:24:49.150
> 
> 标签：java, syntax

以下两种语法顺序在 Java 中有效。为什么两者都被允许并且有首选的语法顺序？

```
 private final static String consultantType = "consultantType";
  private static final String consultantId = "consultantId"; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-07T22:27:15.403

[Java 语言规范第 8.3.1 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.3.1)指出：

> *如果两个或多个（不同的）字段修饰符出现在字段声明中，尽管不是必需的，但习惯上它们的出现顺序与上面在 FieldModifier 的产生式中显示的顺序一致。*

的产生`FieldModifier`是：

```
FieldModifier：其中之一
    注释公共保护私有
    静态最终瞬态易失

```

因此，在您的情况下，习惯上使用`private static final`，尽管任何订单都是有效的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-07T22:27:12.040

任何顺序都是允许的，因为限制顺序没有任何价值，那么为什么还要把记住虚假顺序的负担强加给程序员呢？

无论您使用哪种顺序，这绝对没有区别。选择你喜欢的那个，坚持使用它，然后继续解决一个更有趣的问题。

对于它的价值，我认为“私有静态最终”可能更常见。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T22:41:05.427

**任何订单都是有效的**。因此，[Checkstyle](http://checkstyle.sourceforge.net)在遇到以下顺序之外的修饰符时会标有警告。见[`ModifierOrder`](http://checkstyle.sourceforge.net/availablechecks.html)支票。

1.  `public`
2.  `protected`
3.  `private`
4.  `abstract`
5.  `static`
6.  `final`
7.  `transient`
8.  `volatile`
9.  `synchronized`
10.  `native`
11.  `strictfp`

# ruby - Rails 3 从 Collection.each 块返回数组

> ID：13279312
> 
> 赞同：1
> 
> 时间：2012-11-07T22:24:48.403
> 
> 标签：ruby, arrays, ruby-on-rails-3, loops

我正在尝试将一些 json 返回到调用操作。我要传递的参数之一是通过循环遍历集合构建的数组数组，如下所示：

```
render :json => {     
:rows => @classrooms.each do |classroom|
          [classroom.name, classroom.students.count]
        end    
} 
```

但是，这将 :rows 设置为整个集合，而不是我想要的：

> [[教室，学生]，[教室，学生]，[教室，学生]]

有没有办法遍历集合并在单个块中返回一个数组？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T22:44:18.500

[Enumerable#map](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-map)是这里的正确工具。

```
render :json => {
  :rows => @classrooms.map {|c| [c.name, c.students.count]}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T22:42:12.243

另一种方法... **[each_with_object](http://apidock.com/rails/Enumerable/each_with_object)**方法：

```
render :json => {     
:rows => @classrooms.each_with_object([]) do |classroom, a|
          a << [classroom.name, classroom.students.count]
        end    
} 
```

# r - 按条件划分的 qplot 因子

> ID：13279318
> 
> 赞同：3
> 
> 时间：2012-11-07T22:25:40.253
> 
> 标签：r, bar-chart, ggplot2

使用此数据框，`df`：

```
bat.condition bat.group      bat.money
1              safe          2825.882
2              safe          2931.875
1              glsa          6975.882
2              glsa          5407.500
1              studyabroad   3084.706
2              studyabroad   2253.750 
1              jcc           4134.706
2              jcc           5550.625
1              eagg          4578.824
2              eagg          5456.250 
```

我想在 x 轴上绘制一个带有组的条形图，在 y 轴上绘制货币。此外，我希望将条形图按它们发生的条件分开/分解。到目前为止，我已经使用了以下代码，它几乎是理想的。我有按组分解的条形，我想按条件进一步分解它。

```
qplot(factor(bat.group), data = df, geom = "bar", fill = bat.group, 
      weight = bat.money, position = "dodge") 
```

这会产生这里看到的图像。

![在此处输入图像描述](../Images/401670996efba2e1310b6aa5fe13ea4c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T23:09:33.163

您通常可以使用以下`interaction`功能进行分组：

```
 qplot(interaction(bat.condition, bat.group), data = df, geom = "bar", fill = bat.group, 
      weight = bat.money, position = "dodge") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T23:29:02.007

您可以向数据框添加新变量并使用如下方面：

```
df$factor = factor(df$bat.group)
qplot(as.character(bat.condition), data = df, geom = "bar", fill = bat.group, 
      weight = bat.money, position = "dodge", facets = . ~ factor) 
```

![结果](../Images/38ab4f57c91538c18ce2b5a4f9d49b3b.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T23:06:43.873

这是一个解决方案，可以满足我的要求。我使用`ggplot`了语法而不是`qplot`. 我曾经用`facet_wrap`bat.condition 来分隔你的数据。此外，`geom_barplot`需要该参数`stat="identity"`，否则它将尝试对您的数据进行分类。

```
# Using ggplot2 version 0.9.2.1
library(ggplot2)

dat = read.table(header=TRUE, 
text="bat.condition bat.group      bat.money
1              safe          2825.882
2              safe          2931.875
1              glsa          6975.882
2              glsa          5407.500
1              studyabroad   3084.706
2              studyabroad   2253.750 
1              jcc           4134.706
2              jcc           5550.625
1              eagg          4578.824
2              eagg          5456.250")

p1 = ggplot(data=dat, aes(x=bat.group, y=bat.money, fill=bat.group)) +
     geom_bar(stat="identity") +
     facet_wrap(~ bat.condition)

ggsave(plot=p1, filename="plot_1.png", height=5, width=8) 
```

![在此处输入图像描述](../Images/234013b7747ed5aaed779447aaf951ee.png)

**编辑：** 使用`fill=bat.condition`和添加`position="dodge"`将产生一个像您在评论中链接到的图形。

```
p2 = ggplot(data=dat, aes(x=bat.group, y=bat.money, fill=factor(bat.condition)))+
     geom_bar(position="dodge")

ggsave(plot=p2, filename="plot_2.png", height=4, width=6) 
```

![在此处输入图像描述](../Images/bef8ed678c1e3391e012ace189aae733.png)

# c++ - 在 Linux 上将文件写入磁盘的最快方法

> ID：13279319
> 
> 赞同：1
> 
> 时间：2012-11-07T22:25:50.337
> 
> 标签：c++, file, optimization, boost, fwrite

假设我在 Linux 上有一个非常快速且无限的数据源（比如套接字、/dev/null 或 /dev/random），我需要用 C/C++ 将这些数据写入磁盘。在给定的硬件上最快的代码是什么？fwrite()，无缓冲的 write()，一些增强 ASIO 功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T22:28:42.600

那么就原始输出速度而言，那么您将不得不对其进行基准测试，具体取决于测试、QoI、平台、您正在编写的内容以及任何 FILE、fstreams 或 POSIX 原语都可以是最快的。

但是，如果您可以使用 Boost asio 之类的东西，那么由于它的异步特性，您可能会获得明显的加速，它可以在仍在写入磁盘的同时继续读取下一个工作。

编辑：我会选择 boost asio，它可以让你在等待固有的缓慢操作（文件和网络 IO）的同时最好地利用你的资源。

# c# - 查找动态添加的 ScatterViewItem

> ID：13279322
> 
> 赞同：1
> 
> 时间：2012-11-07T22:25:51.243
> 
> 标签：c#, wpf, pixelsense

我有以下内容：

```
Window window = Application.Current.Windows.Cast<Window>().SingleOrDefault(x => x.IsActive);
ScatterView main = UIHelper.FindChild<ScatterView>(window, "MainScatterView");
        main.Items.Add(type);

//Neither of these work
ScatterViewItem parent = (ScatterViewItem)main.ContainerFromElement(type);

ScatterViewItem parent = UIHelper.FindVisualParent<ScatterViewItem>(type); 
```

文档说：*当您添加不是 ScatterViewItem 类型的对象时，ScatterView 控件首先将对象包装在 ScatterViewItem 控件中，然后再将其添加到集合* [http://msdn.microsoft.com/en-us/library/microsoft .surface.presentation.controls.scatterviewitem.aspx](http://msdn.microsoft.com/en-us/library/microsoft.surface.presentation.controls.scatterviewitem.aspx)

如何获得包裹在其中的 scatterviewitem？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T22:42:12.243

与其他所有[ItemsControl一样，ScatterView 通过](http://msdn.microsoft.com/en-us/library/ms611045.aspx)[ItemContainerGenerator](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.itemcontainergenerator.aspx)创建和管理其项目容器，它提供了获取某个项目的容器或获取某个容器的项目的方法：

```
ScatterView scatterView = ...
object item = ...
ScatterViewItem scatterViewItem =
    scatterView.ItemContainerGenerator.ContainerFromItem(item) as ScatterViewItem; 
```

或者

```
ScatterViewItem scatterViewItem = ...
object item = scatterView.ItemContainerGenerator.ItemFromContainer(scatterViewItem); 
```

# python - Python C 扩展 - 维护状态

> ID：13279329
> 
> 赞同：4
> 
> 时间：2012-11-07T22:26:13.007
> 
> 标签：python, python-c-extension

我需要用 C 语言编写一个 Python 扩展，用于：

1.  对文件执行 CPU 密集型初始化；

2.  进行多个依赖于初始化数据的函数调用以将结果返回给我；和

3.  完成后释放内存

一种解决方案是在 Python 中实现“状态持有者”类。当我在 C 中调用初始化时，它会返回我将存储在 Python 状态对象中的初始化数据。然后每次我需要执行第 (2) 步时，我都会将其传递给 C 函数。但这似乎非常低效，因为 Python 端和 C 端之间发生的所有数据穿梭/接口。

如果可能的话，我想使用 C 端的状态对象来维护状态。Python 端的初始化调用不会返回所有初始化数据，而只会返回一个 ID，以便在后续调用期间需要时引用 C 状态对象。

**我将如何维护 C 端的状态？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T22:36:34.317

首先，我将回答您实际提出的问题。

在 C 中创建一个`struct State`，就像不涉及 Python 一样。

如果你不打算复制这些（你只通过它们`struct State *`），那么你可以只`(intptr_t)theStatePtr`为 Python 获取一个 id。当然，您确实需要注意 Python 对象的生命周期永远不会超过 C 对象的生命周期，但这是可行的。

如果您出于某种原因确实需要复制/移动结构，或者您需要更多帮助来管理状态（例如，将 Python id 视为弱引用），请选择适当的集合（哈希表、树、数组等）您的用例，然后将密钥作为 id 传递给 Python。

但是，我认为您可能在这里优化了错误的部分。来回传递对象没什么——它只是一个指针副本。重新计数可能是一个问题，但很少发生，而且您从生命周期管理中获得的好处通常是值得的。可能会影响性能的部分是您的 C 代码不断将一堆 Python 整数转换为 C`int`等。如果这是您的问题，只需创建一个具有 C 状态的 C 结构，并将其包装在一个不支持的 Python 对象中将任何内部结构暴露到 Python 中。

最后，您真的需要在这里进行任何优化吗？如果您正在做 CPU 密集型工作，我敢打赌，真正的工作完全掩盖了 Python 对象访问的成本，后者甚至不会出现在分析中。如果您还没有进行分析，那绝对是您应该做的第一件事，因为这里的正确答案很可能是“不要费心做任何事情”。

更进一步：如果您只是在 C 中编写 C 代码以进行优化，您确定还需要*它*吗？在 C 中处理内存管理是烦人且容易出错的，在 Python 的 C 扩展模块中处理它更是如此，当你不知道它是如何工作的时第一次这样做几乎是保证支出的秘诀你所有的时间都在追踪段错误和泄漏，而不是编写你的实际代码。因此，我将按顺序尝试以下操作，对每个进行分析，并且仅在太慢时才将列表向下移动：

*   只需用 Python 编写算法，并使用现有的 CPython 解释器。
*   确保你有一个最佳算法。
*   尝试 PyPy 而不是 CPython。
*   获取[Cython](http://docs.cython.org/src/userguide/extension_types.html)并尝试使用尽可能少的更改来编译您的 Python 代码。
*   根据需要修改您的代码以利用 Cython 功能，例如静态类型、直接调用 C 函数等。
*   用 C 语言编写低级代码，用 Cython 或使用`ctypes`.
*   使用您最喜欢的接口机制，用 C 语言编写整个低级和中级。这可能*仍然*不是本机 C API，除非您有很多经验并且正在做一些非常简单的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T23:06:20.097

查看[Cython](http://docs.cython.org/src/userguide/extension_types.html)以轻松实现 python 到 C 的桥接。那里的文档有很多示例——我链接到一个页面，该页面解释了如何构建某种状态对象并解释了内存问题。

这是一个用 cython/pyrex 编写的[AIO 绑定](https://github.com/ironport/shrapnel/blob/master/coro/aio.pyx)(github) 的例子，一个相当花哨的 I/O 的例子。根据我的经验，我们已经使用诸如此类的 I/O 例程将自定义对象以压缩格式编组到磁盘 - 在内存中，cython 代码负责处理 python 可见的内容（例如自定义滚动[套接字对象](https://github.com/ironport/shrapnel/blob/master/coro/socket.pyx)）

我最好的建议是让您四处搜索`.pyx`示例，您会发现一些可以为您提供解决方案的东西。

我也同意其他发帖者的观点：问问自己是否需要迁移到 C，因为扩展类型会增加整个系统的复杂性。

# c# - 使用 TcpListener 监听多个端口

> ID：13279333
> 
> 赞同：0
> 
> 时间：2012-11-07T22:26:38.453
> 
> 标签：c#, networking, tcp, ports

我需要通过 TCP 监听大约 100 个不同的端口。查看 C# 中的 TcpListener 类，它显然只监听一个端口。创建 100 个不同的 TcpListener 实例是否有意义，每个实例都有自己的端口。

我不认为它是一个干净的解决方案，但它似乎是唯一的选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T22:29:37.283

是的 - 你需要 100`TcpListener`秒。最好的方法是将它们放在一个列表中（通过端口列表初始化循环），并将它们作为一个循环中的单个实体进行管理

# objective-c - 如何从静态库中获取版本号？

> ID：13279334
> 
> 赞同：6
> 
> 时间：2012-11-07T22:26:39.840
> 
> 标签：objective-c, ios, static-libraries

我有一个链接到 iOS 应用程序的库的 .a 文件。我怎么知道库的版本号？我不需要以编程方式执行此操作，我只需要手动获取一次。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-07T22:30:19.187

关于如何将版本号编码到静态库中没有共同的主题。

有时根本不存在。有时这是使用属于该库的标头完成的。有时它是使用返回此类信息的函数来完成的。在某些情况下，静态库是伪框架的一部分，其中包含**可能**包含正确版本号的 plist。

请记住，静态库本身只不过是将一堆目标文件放入文件存档中。几乎没有任何额外的信息，更不用说元数据了。

# django - 将子类模型组合到父模型中

> ID：13279341
> 
> 赞同：2
> 
> 时间：2012-11-07T22:27:11.497
> 
> 标签：django

我正在使用 django 的表单向导进行调查，我想将整个调查保存到一个模型中。我已将模型拆分为多种形式，以便在每个 FormWizard 步骤中拥有模型的子集。问题是，最后我如何将它们重新组合在一起？我的 models.py 看起来像这样：

```
class BigSurvey(models.Model):
    field1 = models.TextField()
    field2 = models.TextField()
    ...
    field40 = models.CharField(max_length=10) 
```

我的 forms.py 是这样的：

```
class FirstPageForm(ModelForm):
    class Meta:
        model = BigSurvey
        fields = ('field1', 'field2')

class SecondPageForm(ModelForm):
    class Meta:
        model = BigSurvey
        fields = ('field3', 'field4') 
```

依此类推，总共有 4 个表单和 30 个字段。每个子类模型表单的字段组合起来就是 BigSurvey 模型中的所有字段。

这使我可以将 BigSurvey 分为四个步骤。表单向导返回一个对象 form_list，它是四个表单（FirstPageForm、SecondPageForm 等）中的每一个的列表。

如何将这四种形式组合成一个 BigSurvey 对象进行保存？

**更新：** 通过遍历表单和字段并使用值字典填充新表单来解决。使用 setattr 填充（根据下面的 Colleen 的回答）会导致未绑定的表单。我的工作解决方案：

```
newvalues={}
for form in form_list:
    for field in form.cleaned_data.keys():
        newvalues[field]=form.cleaned_data[field]   
newform = QuestForm(newvalues)
newform.save() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T22:30:27.770

您可以遍历每个表单中的所有字段并将 BigSurvey 字段分配给它们的值。

```
bg = BigSurvey()

for form in form_list
    for field in form.cleaned_data.keys():
        setattr(bg, field, form.cleaned_data[field])

bg.save() 
```

# perl - 如何在 Perl 中进行非生化

> ID：13279349
> 
> 赞同：2
> 
> 时间：2012-11-07T22:27:29.863
> 
> 标签：perl, autovivification

假设我有一个 Perl 脚本：

```
my $hash = {};
$hash->{'a'} = {aa => 'b'};
$hash->{'b'} = undef;

for (qw(a b c)) {
    if(defined $hash->{$_}->{aa})
    {
        say "defined $_";
    }
    else
    {
        say "undef $_";
    }
}
print Dumper $hash; 
```

但是我的输出会自动创建“c”，这是我不想要的。

```
defined a
undef b
undef c
$VAR1 = {
      'c' => {},
      'a' => {
               'aa' => 'b'
             },
      'b' => {}
    }; 
```

此外，我的发行版不允许我禁用自动生存。有没有办法制作一个检查每个级别的子程序？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-07T22:30:36.133

`no autovivification`在所需范围内调用：

```
for (qw(a b c)) {
    no autovivification;
    if(defined $hash->{$_}->{aa})
    {
        say "defined $_";
    }
    else
    {
        say "undef $_";
    }
} 
```

如果`autovivification`pragma 不可用，通常的习惯用法是在更深层次运行检查之前测试顶级哈希是否存在：

```
if ($hash && $hash->{$_} && defined($hash->{$_}->{aa}) {
   ...
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-08T00:07:05.083

出什么问题了：

```
if (exists $hash->{$_} and defined $hash->{$_}->{aa}) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T23:07:14.037

这是一个简单的函数，它检查每个级别的存在并在不自动激活中间级别的情况下停止。原型不是必需的；它使它的行为（有点）像内置的`defined`. 此版本仅适用于嵌套散列（除了祝福散列和看起来像散列的重载对象）。

```
sub noVivDefined(+@) {
    my ($x, @keys) = @_;
    foreach my $k (@keys) {
        return unless ref $x eq 'HASH';
        return unless exists $x->{$k};
        $x = $x->{$k};
    }
    return defined $x;
}

my %h = (
    a => { b => 1 },
    b => { b => 0 },
    c => { b => undef },
    d => { c => 1 },
);

say noVivDefined %h, qw(a b);   # prints '1'
say noVivDefined %h, qw(a b c); # prints ''
say noVivDefined %h, qw(x y z); # prints ''
say noVivDefined %h, qw(b b);   # prints '1'
say noVivDefined %h, qw(c b);   # prints ''
say noVivDefined %h, qw(d b);   # prints ''
say noVivDefined \%h, qw(a b);  # prints '1' 
```

# c# - 如何禁用 Web 服务器中的 Visual C++ 运行时错误？

> ID：13279350
> 
> 赞同：2
> 
> 时间：2012-11-07T22:27:35.230
> 
> 标签：c#, wcf, web-services, error-handling, windows-server-2003

在 Windows Server 2003 机器上运行 WCF 的生产 Web 服务没有响应。[我在DebugDiag 1.2](http://www.microsoft.com/en-us/download/details.aspx?id=26798)中捕获了一个用于分析的内存转储文件。

DebugDiag 显示一个线程遇到了 OutOfMemoryException。通常，我们会尝试捕获所有异常，将它们打印到事件日志中，然后将它们作为 WCF 错误返回。

这个 OutOfMemoryException 不知何故未被捕获并导致 C++ 错误。我接受 .NET 运行时无法处理此错误。当你没有记忆时，你就没有记忆了。

分析显示，其中一个线程试图显示 Visual C++ 运行时错误：

> Microsoft Visual C++ 运行时库运行时错误！程序：C:\windows\system32\inetsrv"。

堆栈跟踪如下所示：

```
ntdll!KiFastSystemCallRet    
ntdll!ZwRaiseHardError+c    
user32!ServiceMessageBox+145    
user32!MessageBoxWorker+13e    
user32!MessageBoxTimeoutW+7a    
user32!MessageBoxTimeoutA+9c    
user32!MessageBoxExA+1b    
user32!MessageBoxA+45    
msvcr71!__crtMessageBoxA+f4   f:\vs70builds\3052\vc\crtbld\crt\src\crtmbox.c @ 118 + 10 
msvcr71!_NMSG_WRITE+12e  f:\vs70builds\3052\vc\crtbld\crt\src\crt0msg.c @ 240 + 10 
msvcr71!abort+7   f:\vs70builds\3052\vc\crtbld\crt\src\abort.c @ 48 
kernel32!UnhandledExceptionFilter+12a    
kernel32!BaseThreadStart+4a    
kernel32!_except_handler3+61    
ntdll!ExecuteHandler2+26    
ntdll!ExecuteHandler+24    
ntdll!RtlRaiseException+3d    
kernel32!RaiseException+53    
msvcr80!_CxxThrowException+46    
mscorwks!ThrowOutOfMemory+24 
```

[中止](http://msdn.microsoft.com/en-us/library/k089yyh0.aspx)的文档说：

> 在基于 Windows 的单线程或多线程应用程序中，abort 调用 Windows MessageBox 函数来创建一个消息框以显示带有 OK 按钮的消息。当用户单击确定时，程序立即中止。可以通过使用适当的参数调用[_set_abort_behavior](http://msdn.microsoft.com/en-us/library/e631wekh%28v=vs.80%29.aspx)来抑制消息 。

此消息框挂起服务器。一个线程触发了 GC，但该线程禁用了抢占式 GC。其余大部分线程在等待 GC 完成时阻塞。

**如何禁用Web 服务器[的 Visual C++ 运行时错误对话框？](https://stackoverflow.com/questions/1938715/disable-microsoft-visual-c-runtime-error)**

- 编辑 -

OutOfMemoryException 是在处理大型数据集的一个线程中引发的。一旦抛出这个，就会抛出一个跨上下文异常。这导致了 WinDbg 中的以下堆栈跟踪：

```
1c54eee8 78158e89 e06d7363 00000001 00000003 kernel32!RaiseException+0x53 (FPO: [Non-Fpo])
1c54ef20 7a14fd18 1c54ef30 7a37d92c 7a3c4aa8 **msvcr80**!_CxxThrowException+0x46 (FPO: [Non-Fpo])
1c54ef34 7a1082db f74a69a8 79f38888 1c54f108 mscorwks!ThrowOutOfMemory+0x24 (FPO: [Non-Fpo])
1c54f060 7a10a245 00000000 1c54f098 1c54f108 mscorwks!Thread::RaiseCrossContextException+0x408 (FPO: [Non-Fpo])
1c54f114 79fd882b 00000002 79fd87f6 1c54f20c mscorwks!Thread::DoADCallBack+0x2a2 (FPO: [Non-Fpo])
1c54f130 79e9846b 1c54f20c 1c54f1b8 79f7762b mscorwks!Thread::DoADCallBack+0x310 (FPO: [Non-Fpo])
1c54f1c4 79e98391 1c54f20c f74a6bc8 23e78e00 mscorwks!Thread::ShouldChangeAbortToUnload+0xe3 (FPO: [Non-Fpo])
1c54f200 79e9851d 1c54f20c 00000002 00000000 mscorwks!Thread::ShouldChangeAbortToUnload+0x30a (FPO: [Non-Fpo])
1c54f228 79fd8f6c 00000002 7a0b68a2 1c54f264 mscorwks!Thread::ShouldChangeAbortToUnload+0x33e (FPO: [Non-Fpo])
1c54f240 7a0b6b5b 00000002 7a0b68a2 1c54f264 mscorwks!ManagedThreadBase::ThreadPool+0x13 (FPO: [Non-Fpo])
1c54f294 7a0b6b8d 00000000 00000000 04a47fe0 mscorwks!BindIoCompletionCallbackStubEx+0x95 (FPO: [Non-Fpo])
1c54f2ac 79f3e605 00000000 00000000 04a47fe0 mscorwks!BindIoCompletionCallbackStub+0x13 (FPO: [Non-Fpo])
1c54f314 79f920a5 00000000 00000000 7ffdc000 mscorwks!ThreadpoolMgr::CompletionPortThreadStart+0x430 (FPO: [Non-Fpo])
1c54ffb8 77e64829 23e29018 00000000 00000000 mscorwks!Thread::intermediateThreadProc+0x49 (FPO: [Non-Fpo])
1c54ffec 00000000 79f9205f 23e29018 00000000 kernel32!BaseThreadStart+0x34 (FPO: [Non-Fpo]) 
```

*该*异常导致调用运行时以显示此消息：

```
1c54e340 7c82775b 773d7a4b 50000018 00000004 ntdll!KiFastSystemCallRet
1c54e344 773d7a4b 50000018 00000004 00000003 ntdll!NtRaiseHardError+0xc
1c54e3a0 773b8377 1d05ff70 1d052e48 00012010 user32!ServiceMessageBox+0x145
1c54e4fc 7739eec9 1c54e508 00000028 00000000 user32!MessageBoxWorker+0x13e
1c54e554 773d7d0d 00000000 1d05ff70 1d052e48 user32!MessageBoxTimeoutW+0x7a
1c54e588 773c42c8 00000000 1c54e62c 7c37f480 user32!MessageBoxTimeoutA+0x9c
1c54e5a8 773c42a4 00000000 1c54e62c 7c37f480 user32!MessageBoxExA+0x1b
1c54e5c4 7c34c224 00000000 1c54e62c 7c37f480 user32!MessageBoxA+0x45
1c54e5f8 7c348e6c 1c54e62c 7c37f480 00212010 msvcr71!__crtMessageBoxA+0xf4 [f:\vs70builds\3052\vc\crtbld\crt\src\crtmbox.c @ 118]
1c54e81c 7c34cf83 0000000a 00000000 1c54ead4 msvcr71!_NMSG_WRITE+0x12e [f:\vs70builds\3052\vc\crtbld\crt\src\crt0msg.c @ 240]
1c54e854 77e761b7 1c54ead4 00000000 00000000 msvcr71!abort+0x7 [f:\vs70builds\3052\vc\crtbld\crt\src\abort.c @ 48]
1c54eaac 77e792a3 1c54ead4 77e61ac1 1c54eadc kernel32!UnhandledExceptionFilter+0x12a
1c54eab4 77e61ac1 1c54eadc 00000000 1c54eadc kernel32!BaseThreadStart+0x4a
1c54eadc 7c828752 1c54ee98 1c54ffdc 1c54ebb8 kernel32!_except_handler3+0x61
1c54eb00 7c828723 1c54ee98 1c54ffdc 1c54ebb8 ntdll!ExecuteHandler2+0x26
1c54eba8 7c82863c 1c549000 1c54ebb8 00010007 ntdll!ExecuteHandler+0x24
1c54ee88 77e4bee7 1c54ee98 00000002 e06d7363 ntdll!RtlRaiseException+0x3d
1c54eee8 78158e89 e06d7363 00000001 00000003 kernel32!RaiseException+0x53 
```

我不确定为什么堆栈上有 2 个版本的 Visual Studio 运行时库。这是不寻常的。我在堆栈上没有看到其他 3rd 方 DLL 的证据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T23:01:42.303

您必须在程序集中调用 Win32 设置中止行为。您可以使用 P/Invoke 来执行此操作。

这是一篇关于类似问题的有趣文章。[http://blogs.msdn.com/b/pfedev/archive/2010/08/25/whodunit-who-threw-the-message-box-and-why.aspx](http://blogs.msdn.com/b/pfedev/archive/2010/08/25/whodunit-who-threw-the-message-box-and-why.aspx)

他们建议这是一个尚未解决的已知问题，因此建议使用 _set_abort_behavior 将其关闭。

# iphone - OpenGL-GLKit：透明对象和纹理

> ID：13279356
> 
> 赞同：1
> 
> 时间：2012-11-07T22:27:55.213
> 
> 标签：iphone, textures, transparent, glkit

我的项目是一个使用 OpenGL 2.0 和 GLKit 的 IOS 应用程序。简而言之，我有一个透明背景的星形纹理，我想将它应用在一个正方形上。理想的最终结果是看到一颗星星；不是广场上的星星。

我当前的问题是，当我在正方形上应用纹理时，我看到一个带有由其材质颜色变量定义的彩色正方形的星星。我想要的是只看到星星并让正方形的其余部分透明。

代码如下：

```
 glEnable(GL_BLEND);
    glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA); 

    [effectTmp prepareToDraw];

    glEnableVertexAttribArray(GLKVertexAttribPosition);
    glEnableVertexAttribArray(GLKVertexAttribTexCoord0);
    glEnableVertexAttribArray(GLKVertexAttribNormal);

    glVertexAttribPointer(GLKVertexAttribPosition, 3, GL_FLOAT, GL_FALSE, sizeof(ColoredVertexData3D), &vertexDataTexture[0].vertex);
    glVertexAttribPointer(GLKVertexAttribNormal, 3, GL_FLOAT, GL_FALSE, sizeof(ColoredVertexData3D), &vertexDataTexture[0].normal);

    glVertexAttribPointer(GLKVertexAttribTexCoord0, 2, GL_FLOAT, GL_FALSE, sizeof(ColoredVertexData3D), &vertexDataTexture[0].color);

    glDrawArrays(GL_TRIANGLES, 0, [drawObjectTmp getSizeFromVertexIndicesArray]);
    glDisableVertexAttribArray(GLKVertexAttribPosition);
    glDisableVertexAttribArray(GLKVertexAttribTexCoord0);
    glDisableVertexAttribArray(GLKVertexAttribNormal);

    glDisable(GL_BLEND); 
```

并且 envMode 设置为 GLKTextureEnvModeDecal，如下所示：

effect.texture2d0.envMode = GLKTextureEnvModeDecal;

可能走廊里有一头我没看到的大象；并且欢迎任何帮助或指针来帮助查看具有透明正方形的星星。

干杯，斯蒂芬

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T01:24:24.210

来自[文档](http://developer.apple.com/library/ios/#documentation/GLkit/Reference/GLKEffectPropertyTexture_ClassRef/Reference/Reference.html#//apple_ref/doc/c_ref/GLKTextureEnvModeReplace)- GLKTextureEnvModeDecal 使用纹理的 alpha 分量将纹理的颜色与输入颜色混合。

我想你想要 GLKTextureEnvModeReplace。

# c# - 如何在特定时间后停止执行方法？

> ID：13279362
> 
> 赞同：4
> 
> 时间：2012-11-07T22:28:17.527
> 
> 标签：c#, c#-3.0

如果一个方法在有限的时间内没有完成，我需要停止它的执行。

要完成这项工作，我可以通过以下方式使用该`Thread.Abort`方法：

```
void RunWithTimeout(ThreadStart entryPoint, int timeout)
{
    var thread = new Thread(() =>
    {
        try
        {
            entryPoint();
        }
        catch (ThreadAbortException)
        {   }

    }) { IsBackground = true };

    thread.Start();

    if (!thread.Join(timeout))
        thread.Abort();
} 
```

鉴于我使用的是 .NET 3.5，有没有更好的方法？

编辑：按照这里的评论 my `entryPoint`，但我正在为任何`entryPoint`.

```
void entryPoint()
{
   // I can't use ReceiveTimeout property
   // there is not a ReceiveTimeout for the Compact Framework
   socket.Receive(...);
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-07T23:16:31.103

答案取决于“工作”。如果工作是可以安全停止的（即不是某些 I/O 阻塞操作） - 使用`Backgroundworker.CancelAsync(...)`

如果您确实必须努力削减-我会考虑使用 a `Process`，在这种情况下，该`Aborting`过程会更干净-并且`process.WaitForExit(timeout)`是您的朋友。

建议的 TPL 很棒，但不幸的是 .Net 3.5 中不存在。

编辑：您可以使用[响应式扩展](https://stackoverflow.com/questions/2987439/can-i-use-the-task-parallel-library-in-a-net-3-5-project)来遵循 Jan de Vaan 的建议。

这是我的“动作超时”片段——主要是在这里供其他人评论：

```
 public static bool WaitforExit(this Action act, int timeout)
    {
        var cts = new CancellationTokenSource();
        var task = Task.Factory.StartNew(act, cts.Token);
        if (Task.WaitAny(new[] { task }, TimeSpan.FromMilliseconds(timeout)) < 0)
        { // timeout
            cts.Cancel();
            return false;
        }
        else if (task.Exception != null)
        { // exception
            cts.Cancel();
            throw task.Exception;
        }
        return true;
    } 
```

**编辑**：显然这不是 OP 想要的。这是我设计“可取消”套接字接收器的尝试：

```
public static class Ext
{
    public static object RunWithTimeout<T>(Func<T,object> act, int timeout, T obj) where T : IDisposable
    {
        object result = null;
        Thread thread = new Thread(() => { 
            try { result = act(obj); }
            catch {}    // this is where we end after timeout...
        });

        thread.Start();
        if (!thread.Join(timeout))
        {
            obj.Dispose();
            thread.Join();
        }
        return result;
    }       
}

class Test
{
    public void SocketTimeout(int timeout)
    {
        using (var sock = new Socket(AddressFamily.InterNetwork, SocketType.Dgram, ProtocolType.Udp))
        {
            Object res = Ext.RunWithTimeout(EntryPoint, timeout, sock);
        }
    }

    private object EntryPoint(Socket sock)
    {
        var buf = new byte[256];
        sock.Receive(buf);
        return buf;
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-07T23:01:06.867

[Thread.Abort 通常是一个糟糕的解决方案](https://stackoverflow.com/questions/1559255/whats-wrong-with-using-thread-abort)。您应该使用一个标志来指示操作是否被取消，并在您的 entryPoint 函数中检查它。

```
 class Program
    {
        static void Main(string[] args)
        {
            RunWithTimeout((token) =>
                               {
                                   Thread.Sleep(2000);
                                   if (token.Cancel)
                                   {
                                       Console.WriteLine("Canceled");
                                   }
                               }, 1000);

            Console.ReadLine();
        }

        private class Token
        {
            public bool Cancel { get; set; }
        }

        static void RunWithTimeout(Action<Token> entryPoint, int timeout)
        {

            Token token = new Token();

            var thread = new Thread(() => entryPoint(token)) { IsBackground = true };

            thread.Start();

            if (!thread.Join(timeout))
                token.Cancel = true;
        }
    } 
```

# python - 将 HTML 转换为纯文本并保持基本格式

> ID：13279364
> 
> 赞同：3
> 
> 时间：2012-11-07T22:28:24.090
> 
> 标签：python, html, templates

我正在寻找一种在保持其基本结构的同时将 HTML 格式的文本转换为纯文本的方法，并且可能会稍作调整，因此：

```
<p>This is a paragraph.</p>
<ol>
  <li>List item 1.</li>
  <li>List item 2.</li>
</ol>
<p>This is an <a href="www.google.com">anchor</a>.</p> 
```

变成：

> 这是一个段落。
> 
> *   列出项目 1。
> *   列出第 2 项。
> 
> 这是一个锚（www.google.com）。

关于如何有效实现大量 HTML 格式模板的任何想法？

*   请注意，结构之外最重要的部分是保留锚。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T22:35:38.190

使用基于文本的浏览器，例如 lynx，并将其输出到标准输出。我不确定它是否适合你所有的调整需求，但它是一个非常快速和简单的开始

`lynx -crawl -dump http://stackoverflow.com/questions/13279364/convert-html-to-plain-text-and-keep-basic-formatting`

（实际上，我希望您的清单是

```
1\. List item 1.
2\. List item 2. 
```

因为它是一个有序列表）

编辑：实际上更多地研究了您的实际用例，它完美地工作：

```
> echo '<p>This is a paragraph.</p>
<ol>
  <li>List item 1.</li>
  <li>List item 2.</li>
</ol>
<p>This is an <a href="http://www.google.com">anchor</a>.</p>' | lynx -stdin -dump 
```

变成

```
 This is a paragraph.
    1\. List item 1.
    2\. List item 2.

   This is an [1]anchor.

References

   1\. http://www.google.com/ 
```

# iphone - UIAlertView里面的UIView

> ID：13279371
> 
> 赞同：1
> 
> 时间：2012-11-07T22:28:47.200
> 
> 标签：iphone, ipad, uialertview

我想创建一个自定义 UIAlertView 来显示图像中的视图

![在此处输入图像描述](../Images/be05ab616417900498d366a9c3044b2b.png)

我想在它旁边添加一个 textView 的图标，它的文本是可点击的并打开 UIWebView。

这在 iPhone 中可能吗？我用谷歌搜索，但没有找到如何做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T22:44:04.830

在我看来，您正在尝试创建一个不需要警报的弹出窗口。

如果是这样的话，这个库可能会有所帮助：

[MJPopupViewController](https://github.com/martinjuhasz/MJPopupViewController)

您可以创建任何大小的弹出窗口，即普通视图。因此，您可以在其中放置任何其他视图或控件。

# java - Sitebricks 的官方 javadoc (0.8.6)

> ID：13279373
> 
> 赞同：0
> 
> 时间：2012-11-07T22:28:51.673
> 
> 标签：java, javadoc, sitebricks

我在哪里可以找到 Sitebricks 的官方 Javadoc（在我的例子中是 0.8.6 版）？[Google 代码页](http://code.google.com/p/google-sitebricks/)和[Sitebricks.org](http://sitebricks.org/#home)上都没有任何内容。我能找到的最接近的东西是在 Jarvana（[http://www.jarvana.com/jarvana/doc?search_type=javadoc_project&project=sitebricks](http://www.jarvana.com/jarvana/doc?search_type=javadoc_project&project=sitebricks)）上，但这与我所寻找的相差甚远。我想使用谷歌**官方**的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T23:19:07.657

[您可以从存储库](https://github.com/dhanji/sitebricks)中获取官方源代码并自己构建 javadoc。

如果您使用 Eclipse，您也可以只使用源代码的 zip 并将其附加到您的库 jar 中。Eclipse 将从源文件动态呈现 javadoc。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T11:09:42.150

SiteBricks 不再是谷歌产品。我们不会从谷歌那里得到任何官方消息。github 上的存储库是项目的所在地。

[https://github.com/dhanji/sitebricks](https://github.com/dhanji/sitebricks)

问候

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T05:02:19.873

Javadocs 是作为 Maven 发布过程的一部分发布的。您可以从 Central 获得它们。

# asp.net - WEBScraping 在 asp.net C#

> ID：13279374
> 
> 赞同：-1
> 
> 时间：2012-11-07T22:28:56.827
> 
> 标签：asp.net

伙计们，我必须从网站页面获取彩票结果.....通过网络服务并将其显示在网络客户端上。

到目前为止，我必须在代码中提取 z 结果：

```
using System.Configuration;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Web.UI.HtmlControls;
using System.IO;
using System.Text.RegularExpressions;
using System.Text;
using System.Net;
using System.Collections.Generic;
using System.Linq;

public partial class Default2 : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        HttpWebRequest webRequest = WebRequest.Create("http://www.loterienationale.mu/loto/tirages-et-archives") as HttpWebRequest;
        StreamReader responseReader = new StreamReader(webRequest.GetResponse().GetResponseStream());
        string responseData = responseReader.ReadToEnd();
        responseReader.Close();
        webRequest.GetResponse().Close();

        MatchCollection m1 = Regex.Matches(responseData, @"(?<=<span class=""text-resultat-num""[^>]*>).*?(?=</span>)", RegexOptions.Singleline);

        foreach (Match m in m1)
        {
            Response.Write(m.ToString());
        }
    }
} 
```

但我不想让它写。相反，我希望它将值返回给客户端。

我该怎么做？？？

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T22:34:01.250

使用 HTML 敏捷包或其他一些工具。正则表达式可能不是您尝试做的最佳候选者。正如 Andrew 建议的那样，使用 Label 控件并将值分配给控件的 Text 属性。

# python - 尝试从网络获取图像时，pycurl 中的断言失败

> ID：13279375
> 
> 赞同：1
> 
> 时间：2012-11-07T22:28:58.163
> 
> 标签：python, curl, pycurl

我正在尝试使用以下代码从站点获取图像：

```
image="http://the.site.com/view/ashx/Handler.ashx?Command=Avatar&TC=TQB"
curlobj = pycurl.Curl()
curlobj.setopt(pycurl.COOKIEFILE, '')
curlobj.setopt(pycurl.CONNECTTIMEOUT, 30)
curlobj.setopt(pycurl.TIMEOUT, 30)
curlobj.setopt(pycurl.FAILONERROR, True)
curlobj.setopt(pycurl.FOLLOWLOCATION, 1)
curlobj.setopt(pycurl.MAXREDIRS, 5)
imgf = open("logo.jpg", "wb")
curlobj.setopt(pycurl.URL, image)
curlobj.setopt(pycurl.WRITEDATA, imgf)
curlobj.perform()
imgf.close()
curlobj.close() 
```

但它给出了：

```
python2`.6: src/pycurl.c:272: get_thread_state: Assertion `self->ob_type == p_Curl_Type' failed.` 
```

问题是什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-23T05:24:18.777

当我的代码出现此错误时，可以通过确保 curl/pycurl 不重用现有连接来修复它。

如果您在 c.perform() 之前启用 c.setopt(c.VERBOSE , 1) 它将在输出中提供更多（调试）信息，并且前几行应该告诉您它是否在开始时建立新连接c.执行（）。

# sql-server - 无法连接到托管在 Azure 虚拟机中的 SQL Server 2008 命名实例

> ID：13279378
> 
> 赞同：2
> 
> 时间：2012-11-07T22:29:14.070
> 
> 标签：sql-server, sql-server-2008, azure, named-instance

当我尝试连接到托管在 Azure VM 中的 SQL Server 中的命名实例时，我收到以下消息：

> *建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：SQL 网络接口，错误：26 - 错误定位服务器/指定的实例）（Microsoft SQL Server，错误：-1）*

问题是 SQL Server 浏览器无法正常工作，当我启动浏览器服务时，它会在几秒钟后关闭，并且事件日志显示

> *没有 SQL Server 或 SQL Server Analysis Services 的实例。*

但我确实有一个命名实例，我可以在本地连接到这个实例。

我已经重新安装了 SQL Server 浏览器和实例，但 ii 不起作用。

主机是 Azure 虚拟机 Windows Server 2008 数据中心。

请帮忙。

谢谢

更新 11/08/2012 实际上我可以远程连接到默认实例，但是我不能使用命名实例来执行此操作，例如，我使用 dns: 远程连接，但是如果我尝试使用 \UAT，我无法连接。

更新好吧，问题似乎是当有人尝试连接到命名实例时，SQL 浏览器的端口 1434 必须打开，这意味着我们需要在 azure 管理门户中创建该端点，问题是 sql 浏览器看起来对于命名实例并使用动态端口回答。最后，我认为配置所有这些很麻烦，无论如何我的 sql 浏览器没有检测到我的命名实例，所以我决定创建一个新端点来侦听命名实例并为该实例分配一个静态端口，现在我可以连接到 IP/端口。我仍然很好奇如何配置 Azure VM、SQL 浏览器、SQL Sever 和防火墙，以便能够使用 SQL 浏览器连接到 dns/instance。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T23:00:20.467

您需要通过防火墙打开 1433 端点。您是否按照这些说明进行操作？ [http://www.windowsazure.com/en-us/manage/windows/common-tasks/install-sql-server/](http://www.windowsazure.com/en-us/manage/windows/common-tasks/install-sql-server/)

您是否尝试使用 DNS 地址连接？

编辑：你能试试双斜杠吗（使用“\\”而不是“\”）：“domain.server.net\\UAT”

# ios - 如何将 audioPlayer 实例的引用存储在核心数据中？

> ID：13279379
> 
> 赞同：0
> 
> 时间：2012-11-07T22:29:13.547
> 
> 标签：ios, core-data, categories, nsmanagedobject

我的目标是以这种方式将 audioPlayer 实例的引用存储在核心数据中，以便稍后我可以在该条目上使用属性。像这样：

```
-(void)didTapButton
{
    if (!self.sound.audioPlayer.playing)
    {
        [[NSNotificationCenter defaultCenter] postNotificationName:@"playSound" object:self.sound];
        self.soundProgress.hidden = NO;
    } else {
        [[NSNotificationCenter defaultCenter] postNotificationName:@"stopSound" object:self.sound];
        self.soundProgress.hidden = YES;
    }
} 
```

我的 MOS 看起来像这样

```
@interface MCSound : NSManagedObject

@property (nonatomic, retain) AVAudioPlayer *audioPlayer;
@property (nonatomic, retain) NSString * category;
@property (nonatomic, retain) NSString * duration;
@property (nonatomic, retain) NSString * fileURL;
@property (nonatomic, retain) NSString * id;
@property (nonatomic, retain) NSNumber * isLooping;
@property (nonatomic, retain) NSString * name;
@property (nonatomic, retain) NSString * theme;
@property (nonatomic, retain) MCTheme *ofTheme;

@end 
```

到目前为止有效。但是，如果我再次生成 MOS，则 AVAudioPlayer 类将被 id 替换。有没有办法我可以用类别做到这一点？我是否必须在类别之后使用我的声音实例的类别？

**编辑**

我需要在应用程序运行时引用 AVAudioPlayer，因为我经常切换视图，并且 AVAudioPlayer 被初始化为一个 gridView。结构是：

gridView -> detailView -> soundButton

按钮向设置了 AVAudioPlayer 的 gridView 发送通知。当我回到 detailView 时，我必须显示声音是否仍在播放，并且正在播放的时间必须显示在进度条上。我使用 NSMutableDisctionary 进行了所有操作，但现在切换到核心数据模型，因为我必须使用默认声音集预填充数据库。

因此，我认为这是在录音中引用 AVAudioPlayer 的最佳方式。因为当我回到detailView时需要audioPlayer的引用。我必须知道它是否还在播放和播放时间。

你会怎么解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T01:21:35.383

不应将 AVAudioPlayer 添加到 core-data 中的持久存储中，因为它不符合 NSCoding 协议。

我要做的是从您的模型中删除 AVAudioPlayer，但将其保留在您的 NSManagedObject 中。然后在实现中将音频播放器的@dynamic 切换为@synthesized。（也添加一行以在 dealloc 上释放音频播放器）。

然后做这样的事情

```
-(AVAudioPlayer*)audioPlayer {
if (self.audioPlayer) return audioPlayer;
else {
NSError * error = nil;
AVAudioPlayer * lAudioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:self.fileURL error:&error];

if (!error) {
self.audioPlayer = lAudioPlayer;
[lAudioPlayer release];
} else {
[lAudioPlayer release];
NSLog(@"%@",error);
}

}

} 
```

我还建议使用与 isLooping 和 duration 类似的东西，并让它们直接从 audioPlayer 中取出，而不是将它们存储在持久存储中，除非你需要它们持久保存。

编辑

听起来您的问题是您在对象中引用 avaudioplayer（为了持久性）然后保存上下文，然后当您返回时从持久存储重新请求对象，这将不起作用，因为您的持久存储无法处理音频播放器。有多种方法可以解决这个问题。

第一个是将所有 avaudioplayers 存储在 nsmutabledictionary 中（我会将其设为静态或单例）。这个 nsmutabledictionary 将由一个唯一标识符作为关键字。您可以创建一个唯一标识符并将其存储在您的持久存储中（在您的对象上有一个新属性），或者只使用声音对象的 objectid（我相信）。那时，按照我之前所说的在您的托管对象类中创建 audioPlayer，而不是在那里创建它，只需使用已创建的唯一标识符从 nsmutabledictionary 中取回它，如果没有，则意味着您需要创建一个新的音频播放器并将其添加到 nsmutabledictionary。

我希望我能理解你的问题，我认为这是最简单的解决方案，也是最优雅的。另一个非常简单的方法是您将所有正在播放的声音管理对象保存在内存中，这样您就不需要从持久存储中重新请求它们，因此您的音频播放器仍然可以访问。

确实有一千种方法可以做到这一点，我只是给你我会使用的 2 个，当你完成它们时，不要忘记释放你的音频播放器并将它们从可变字典中删除。

# c# - 在用户输入之前阻止表单加载

> ID：13279380
> 
> 赞同：0
> 
> 时间：2012-11-07T22:29:18.260
> 
> 标签：c#, winforms

因此，管理层决定实施一个想法，允许用户选择程序的语言。在我看来，他们想要的方式是愚蠢的。但是，我无法改变他们的想法。这是它的工作原理。主窗体（`frmMain`）将开始加载。在 之前`InitializeComponent()`，他们希望加载另一个表单（`frmLanguage`），要求用户选择一种语言。现在，我可以让 frmLanguage 在适当的时间弹出。我的问题是，一旦显示 frmLanguage，如何防止或暂停 frmMain 继续加载？

```
public FrmMain()
{
    var language = new FrmLanguage();
    language.Show();

    // I need to pause the FrmMain right here

    InitializeComponent();
} 
```

我在想线程可能是做到这一点的方法，但我对它的经验为零，所以我不确定这是否是正确的思路。我不想做`Sleep()`类似的事情，因为谁知道用户需要多长时间才能输入他们的选择。此外，这将是一次性弹出窗口。我将更改预先存在的 INI 文件中的一行，这样如果他们已经选择了一种语言，就不会弹出该行。感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T22:40:47.923

使用`language.ShowDialog();`. 根据[MSDN](http://msdn.microsoft.com/en-us/library/c7ykbedk.aspx)，它后面的代码直到对话框关闭后才会执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T22:50:30.543

之前放代码有点危险-如果您忘记避免尝试触摸表单上的控件，`InitializeComponent`您将遇到s 。`NullReferenceException`不过，更新成员字段是可以的。

加载的代码能否首先`FrmMain`加载并执行`FrmLanguage`，可能是在检查 INI 文件的位置附近？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T22:52:39.847

我不确定这是否会起作用，所以请告诉我它是否对您有帮助。

在您的 Main() 方法中，您可以加载第一个表单：

```
Application.Run(new FrmLanguage()); 
```

然后从那个表格中收集语言设置，然后像往常一样加载另一个表格。

# android - 获取正在运行的应用程序包？

> ID：13279382
> 
> 赞同：0
> 
> 时间：2012-11-07T22:29:25.903
> 
> 标签：android, package

如何获取正在运行的应用程序包？我已经设法获取名称，但找不到如何获取包。这是我的代码。

```
ActivityManager am = (ActivityManager)this.getSystemService(ACTIVITY_SERVICE);
    List list = am.getRunningAppProcesses();
    Iterator iter = list.iterator();
    PackageManager pm = this.getPackageManager();
    while(iter.hasNext()) {
      ActivityManager.RunningAppProcessInfo info = (ActivityManager.RunningAppProcessInfo)(iter.next());
      try {
        CharSequence c = pm.getApplicationLabel(pm.getApplicationInfo(info.processName, PackageManager.GET_META_DATA));
        Log.w("APPS", c.toString());
      }catch(Exception e) { }
    }catch(Exception e) { }
    } 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T22:54:49.863

进程可以包含来自多个包的正在运行的组件，请参见 RunningAppProcessInfo 类中的字段[pkgList](http://developer.android.com/reference/android/app/ActivityManager.RunningAppProcessInfo.html#pkgList)。

# php - Android和PHP加载网站

> ID：13279384
> 
> 赞同：0
> 
> 时间：2012-11-07T22:29:31.237
> 
> 标签：php, android, amazon-s3

我想在 webview android中打开[亚马逊登录。](https://www.amazon.com/ap/signin?_encoding=UTF8&openid.assoc_handle=amzn_clouddrive_us&openid.claimed_id=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&openid.identity=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&openid.mode=checkid_setup&openid.ns=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0&openid.ns.pape=http%3A%2F%2Fspecs.openid.net%2Fextensions%2Fpape%2F1.0&openid.pape.max_auth_age=0&openid.return_to=https%3A%2F%2Fwww.amazon.com%2Fclouddrive%2F%3F_encoding%3DUTF8%26action%3Dsign-out%26associationHandle%3Damzn_clouddrive_us%26pageId%3Dclouddrive_authportal_us%26path%3D%252Fclouddrive%252F%26ref_%3Dpd_irl_gw_r%26signIn%3D1%26useAuthPortal%3Dtrue%26useRedirectOnSuccess%3D1&pageId=clouddrive_authportal_us)但我希望在代码的帮助下自动完成此登录。因为我是 android 开发人员，所以对 PHP 不太了解。

请告诉我如何在 php 中自动提交此表单。如何在 php 中 $_POST ？

# sql - 子查询，嵌套选择，加入，还有别的吗？- 没有把握

> ID：13279388
> 
> 赞同：0
> 
> 时间：2012-11-07T22:29:40.433
> 
> 标签：sql, sql-server-2005

当我试图限制我的结果时，我限制得太多了。

```
Select Distinct Agreements.AgrmntID, Agreements.Status, JobSites.SiteName,
  AgreementCharges.TotalSaleAmt, AgreementCharges.PartID,
  AgreementSchedules.FormanEmpID, LaborCodeTypes.RepairCode
From Agreements Inner Join
  AgreementCharges On Agreements.AgrmntID = AgreementCharges.AgrmntID Inner Join
  JobSites On JobSites.CustSiteID = Agreements.CustSiteID Left Outer Join
  AgreementSchedules On Agreements.AgrmntID = AgreementSchedules.AgrmntID
  Left Outer Join
  LaborCodeTypes On LaborCodeTypes.RepairID = AgreementSchedules.RepairID
Where Agreements.Status = 2 And AgreementCharges.PartID = 31 And
  LaborCodeTypes.RepairCode = '04 - LS' 
```

如果没有与“04 - LS”匹配的 RepairCode，我仍然需要 AgrmntID 和 TotalSaleAmt。同样，如果根本没有 AgreementSchedule，我需要 AgrmntID 和 TotalSaleAmt。

输出：

```
AgrmntID  Status  SiteName  TotalSaleAmt  PartID  FormanEmpID  RepairCode
-------------------------------------------------------------------------
2         2       TEST01    $100.00       31      66           04 - LS
2         2       TEST03    $300.00       31      21           04 - LS 
```

预期输出：

```
AgrmntID  Status  SiteName  TotalSaleAmt  PartID  FormanEmpID  RepairCode
-------------------------------------------------------------------------
2         2       TEST01    $100.00       31      66           04 - LS
2         2       TEST02    $200.00       31
2         2       TEST03    $300.00       31      21           04 - LS 
```

我看了又看，现在来这里寻求帮助。先感谢您！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T08:55:16.820

我的版本：

```
Select Distinct 
    Agreements.AgrmntID, 
    Agreements.Status, 
    JobSites.SiteName,
    AgreementCharges.TotalSaleAmt, 
    AgreementCharges.PartID,
    AgreementSchedules.FormanEmpID, 
    LaborCodeTypes.RepairCode
From Agreements
Inner Join JobSites On 
    JobSites.CustSiteID = Agreements.CustSiteID
Left Join AgreementCharges On 
    Agreements.AgrmntID = AgreementCharges.AgrmntID 
Left Join AgreementSchedules On 
    Agreements.AgrmntID = AgreementSchedules.AgrmntID
Left Join LaborCodeTypes On 
    LaborCodeTypes.RepairID = AgreementSchedules.RepairID
Where 
    Agreements.Status = 2 
    AND AgreementCharges.PartID = 31
    AND coalesce(LaborCodeTypes.RepairCode, '04 - LS') = '04 - LS' 
```

PS下次如果您要向其他人展示它，请更好地格式化您的查询:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T04:45:48.477

这就是最终的工作：

```
Select Distinct Agreements.AgrmntID, Agreements.Status, JobSites.SiteName,
  AgreementCharges.TotalSaleAmt, AgreementCharges.PartID, a.FormanEmpID,
  a.RepairCode
From Agreements Inner Join
  JobSites On JobSites.CustSiteID = Agreements.CustSiteID Left Join
  AgreementCharges On Agreements.AgrmntID = AgreementCharges.AgrmntID Left Join
  (Select AgreementSchedules.AgrmntID, AgreementSchedules.FormanEmpID,
      b.RepairCode
    From AgreementSchedules Inner Join
      (Select LaborCodeTypes.RepairCode, LaborCodeTypes.RepairID
        From LaborCodeTypes) b On AgreementSchedules.RepairID = b.RepairID
    Where b.RepairCode = '04 - LS') a On Agreements.AgrmntID = a.AgrmntID
Where Agreements.Status = 2 And AgreementCharges.PartID = 31 
```

非常感谢 pkuderov，您的回复一直为我指明正确的方向。并认为你是奇异果，即使你删除了你的回复。

# asp.net - 编译器错误消息：CS1502

> ID：13279389
> 
> 赞同：0
> 
> 时间：2012-11-07T22:29:56.633
> 
> 标签：asp.net, linq

对于我添加的以下 linq 查询

```
w = document.tblTransmittalls.Select(dx => dx.tblFiles) 
```

字段以及以下函数，我添加了“theDocument.w”参数，但我有错误，它告诉我：

```
IEnumerable<System.Data.Linq.EntitySet<tblFile>> 
```

虽然我喜欢和其他争论一样：`IEnumerable<tblFile> w` 我不知道发生了什么。

> 编译器错误消息：CS1502

在向我的函数添加“theDocument.w”参数之前，我没有出错。

```
private void DisplayDocument()
{
    var documents =
      from document in _DataContext.tblDocuments
      where document.DocId == _DocID
      select new
      {
          DocId = document.DocId,
          Title = document.TITLE,
          DocNo = document.DocumentNo,
          Originator = document.Originator,
          Type = document.Document_Type,
          Unit = document.Unit,
          MaterialCode = document.EQ_IN_Identify_Material_Code,
          Transmittals = document.tblTransmittalls.Select(dt => dt.tbltransmittalNo),
          x = document.tblTransmittalls.Select(dp => dp.tblDocTranstoCons.tblTranstoCon),
          //Authors = book.BookAuthors.Select(bookAuthor => bookAuthor.AuthorObject),
          y = document.tblTransmittalls,
          z = document.tblTransmittalls.Select(dp => dp.tblDocTranstoCons),
          w = document.tblTransmittalls.Select(dx => dx.tblFiles)
      }

DisplayTransmittals(theDocument.Transmittals, theDocument.x, theDocument.DocId, theDocument.y, theDocument.z, theDocument.w);

private void DisplayTransmittals(IEnumerable<tbltransmittalNo> transmittals, IEnumerable<tblTranstoCon> x, int d,
    IEnumerable<tblTransmittall> y, IEnumerable<tblDocTranstoCon> z, IEnumerable<tblFile> w)
{
    Transmittallistfortest transmittalList = (Transmittallistfortest)DetailsView1.FindControl("Transmittallistfortest1");
    GridView g3 = transmittalList.FindControl("GridViewTtransmittals") as GridView;
    transmittalList.Transmittals = transmittals;
    transmittalList.Doc = d;
    transmittalList.Transmittaltocons = x;
    transmittalList.DocTranstoCons = z;
    transmittalList.tblTransmittall = y;
    transmittalList.Efiles = w;
    transmittalList.DataBind();

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T22:46:24.610

谷歌搜索你的错误代码会返回[这个页面](http://msdn.microsoft.com/en-us/library/b66k5sz9%28v=vs.80%29.aspx)，上面说它是`The best overloaded method match for 'declaration' has some invalid arguments`错误代码。

基于此以及添加`theDocument.w`导致错误的结果，听起来`theDocument.w`is not of type `IEnumerable<tblFile>`。

# java - 在 Java 中使用集合消除重复

> ID：13279390
> 
> 赞同：0
> 
> 时间：2012-11-07T22:30:00.597
> 
> 标签：java, duplicates, set

编写一个程序，读取一系列名字并通过将它们存储在一个集合中来消除重复。允许用户搜索名字。

（相信我，我没有上任何 Java 课程。所以，不是我的作业）。

我的问题是实现这一点：**允许用户搜索名字。**

其他一切正常，只是搜索功能。

*到目前为止我的代码....*

```
package com.Sets;

import java.util.Arrays;
import java.util.Collection;
import java.util.Collections;
import java.util.HashSet;
import java.util.List;
import java.util.Scanner;
import java.util.Set;

public class DuplicateElimination {

    public static void main(String[] args) {

        // Write a program thats ask for first names and store it in an array.

        String fName;

        Scanner input = new Scanner(System.in);
        String[] names = new String[10];

        for (int i = 0; i < names.length; i++) {
            System.out.println("Enter First Name: ");
            names[i] = input.nextLine();
        }
        // Printout that array as a list.
        List<String> list = Arrays.asList(names);

        // Initial Array Elements
        System.out.printf("%s ", list);
        System.out.println();

        // Calling removeDuplicates method
        removeDuplicates(list);

    }

    // Make a method called removeDuplicates.
    private static void removeDuplicates(Collection<String> values) {

        // Implement a Hashset in it.
        Set<String> set = new HashSet<String>(values);

        // Printout a non-duplicate list of elements.
        for (String value : set) {
            System.out.printf("%s ", value);
        }

        System.out.println();

    }

    // Make a method to search for a first name.
    public static void searchForName(Collection<String> names) {

        String someName;

        Set<String> set = new HashSet<String>(names);
        Scanner input = new Scanner(System.in);

        for (int i = 0; i <= 10; i++) {
            System.out.println("Search this name: ");
            someName = input.nextLine();
        }

        if (someName ) {

        } else {

        }
    }

} 
```

我对我的 searchForName 方法没有信心......有人可以给我一个关于如何使这项工作的想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T22:38:25.540

您可以使用 A TreeSet，然后使用[tailSet](http://docs.oracle.com/javase/6/docs/api/java/util/TreeSet.html#tailSet%28E,%20boolean%29)和[headSet](http://docs.oracle.com/javase/6/docs/api/java/util/TreeSet.html#headSet%28E,%20boolean%29) 按字母顺序查找所有“大于或等于”和“小于或等于”搜索键的元素。

```
final TreeSet<String> p = new TreeSet<String>();

        p.addAll(Arrays.asList(new String[] { "aaaaaa", "bbbbbbb", "cccccc", "dddddd", "eeeeeee", "fffff" }));

        System.out.println(p.headSet("dd", true));
        System.out.println(p.tailSet("dd", true)); 
```

结果：

```
[aaaaaa, bbbbbbb, cccccc]
[dddddd, eeeeeee, fffff] 
```

tailSet 的第一个元素是以搜索键（“dd”）开头的键。有一个问题 - 如果未找到姓氏“dddddd”，tailSet 将返回：

```
[eeeeeee, fffff] 
```

所以你总是必须检查第一个元素是否为startsWith（“dd”）否则notFound！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T22:33:22.780

考虑`removeDuplicates`返回`Set`. 传递`Set`给`searchForName`. 然后只需使用`Set.contains`.

[Set.contains](http://docs.oracle.com/javase/6/docs/api/java/util/Set.html#contains%28java.lang.Object%29)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T22:33:49.847

```
public static boolean searchForName(Collection<String> names, String someName) 
{
    Set<String> set = new HashSet<String>(names);
    return set.contains(someName);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-07T22:34:37.983

使用`set.contains()`方法检查一个集合是否包含输入字符串。

```
 for (int i = 0; i <= 10; i++) {
            System.out.println("Search this name: ");
            someName = input.nextLine();
        }

if(set.contains(someName)) {
System.out.println("set contains name");

}
else {
System.out.println("set doesnt contain this name");
} 
```

# xml - java类的相对路径

> ID：13279393
> 
> 赞同：1
> 
> 时间：2012-11-07T22:30:09.193
> 
> 标签：xml, jakarta-ee, path

我的 Java EE 应用程序中的相对路径有问题，情况如下：

1.  我正在尝试解析我在`/WebContent/files/queries.xml`使用 SaxParser API 时拥有的 xml 文件。

2.  当我`./files/queries.xml`在 java 类中提供此路径（）以便我可以执行解析操作时，我得到了一个`java.io.FileNotFoundException: /home/james/./files/queries.xml`！

有人可以帮我吗？

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T22:33:43.030

WebContent 是您的 webapp 源的位置。部署时，所有内容都捆绑到一个 war 文件中，无法使用文件 IO 访问。

用于[`ServletContext.getResourceAsStream()`](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContext.html#getResourceAsStream%28java.lang.String%29)从 webapp 的上下文中获取资源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T22:32:17.217

要获得真正的路径，您可以这样做：

```
String path = s.getServletContext().getRealPath("/WebContent/files/queries.xml"); 
```

# c# - 如何创建可绑定的命令代理

> ID：13279397
> 
> 赞同：1
> 
> 时间：2012-11-07T22:30:24.730
> 
> 标签：c#, mvvm, windows-8, windows-runtime, windows-store-apps

我目前正在使用 MVVM 模式开发 Windows 商店应用程序。ViewModel 实现了视图使用的几个命令。在某些情况下，我希望视图触发的不仅仅是一个命令。因此，我创建了一个从 ICommand 派生的 CommandGroup 类，并拥有一个可观察的命令集合。为了能够使用 XAML 填充此集合，我创建了另一个名为 CommandProxy 的类，它派生自 DependencObject 并且还实现了 ICommand。

这个想法是在视图中支持这样的东西：

```
<Button Content="Test">
   <Button.Command>
      <vm:CommandGroup>
         <vm:CommandGroup.Commands>
            <vm:CommandProxy Command="{Binding Command1}" CommandParameter="{Binding ElementName=Object1}"/>
            <vm:CommandProxy Command="{Binding Command2}" CommandParameter="{Binding ElementName=Object2}"/>
            <vm:CommandProxy Command="{Binding Command3}" CommandParameter="{Binding ElementName=Object3}"/>
         </vm:CommandGroup.Commands>
      </vm:CommandGroup>
   </Button.Command>
</Button> 
```

进行语法检查时一切看起来都很好，但绑定在运行时没有解析。假设 ViewModel 实现命令 MyCommand 并且视图包含一个名为 MyElement 的元素，可以使用以下示例重现这一点：

```
<Button Content="Test">
   <Button.Command>
      <vm:CommandProxy Command="{Binding MyCommand}" CommandParameter="{Binding ElementName=MyElement}"/>
   </Button.Command>
</Button> 
```

这是可用于重现问题的 CommandProxy 类的简化版本：

```
public class CommandProxy : DependencyObject, ICommand
{
    public static readonly DependencyProperty CommandProperty =
        DependencyProperty.Register("Command", typeof(object), typeof(CommandProxy), new PropertyMetadata(null));

    public static readonly DependencyProperty CommandParameterProperty =
        DependencyProperty.Register("CommandParameter", typeof(object), typeof(CommandProxy), new PropertyMetadata(null));

    /// <summary>
    /// Command
    /// </summary>
    public ICommand Command
    {
        get
        {
            return (ICommand)GetValue(CommandProperty);
        }

        set
        {
            SetValue(CommandProperty, value);
        }
    }

    /// <summary>
    /// Command Parameter
    /// </summary>
    public object CommandParameter
    {
        get
        {
            return GetValue(CommandParameterProperty);
        }

        set
        {
            SetValue(CommandParameterProperty, value);
        }
    }

    /// <summary>
    /// Event used to singnal that CanExecute has changed
    /// </summary>
    public event EventHandler CanExecuteChanged;

    /// <summary>
    /// Create new CommandGroupElement
    /// </summary>
    public CommandProxy()
    {
    }

    /// <summary>
    /// Determine whether command can be executed
    /// </summary>
    /// <param name="parameter"></param>
    /// <returns></returns>
    public bool CanExecute(object parameter)
    {
        if (Command != null)
            return Command.CanExecute(CommandParameter);
         return false;
    }

    /// <summary>
    /// Execute Command
    /// </summary>
    /// <param name="parameter">Parameter</param>
    public void Execute(object parameter)
    {
        if (Command != null)
            Command.Execute(CommandParameter);
    }

    /// <summary>
    /// Raise CanExecuteChanged event
    /// </summary>
    /// <param name="sender"></param>
    /// <param name="e"></param>
    protected void raiseCanExecuteChanged()
    {
        raiseCanExecuteChanged(this, EventArgs.Empty);
    }

    /// <summary>
    /// Raise CanExecuteChanged event
    /// </summary>
    /// <param name="sender">Parameter</param>
    /// <param name="e"></param>
    protected void raiseCanExecuteChanged(object sender, EventArgs e)
    {
       if (CanExecuteChanged != null)
           CanExecuteChanged(this, EventArgs.Empty);
    }
} 
```

有没有人可以告诉我我做错了什么或解释我为什么这不起作用？

亲切的问候

托马斯

# python - 如何使用 Python 和 Flask 获取请求变量的值

> ID：13279399
> 
> 赞同：80
> 
> 时间：2012-11-07T22:30:29.997
> 
> 标签：python, variables, request, flask

我想知道如何使用 Python 和 Flask 来获取 POST/GET 请求变量的值。

使用 Ruby，我会做这样的事情：

```
variable_name = params["FormFieldValue"] 
```

我将如何用 Flask 做到这一点？

* * *

## 回答 #1

> 赞同：170
> 
> 时间：2013-12-03T01:40:01.930

如果要检索 POST 数据：

```
first_name = request.form.get("firstname") 
```

如果要检索 GET（查询字符串）数据：

```
first_name = request.args.get("firstname") 
```

或者，如果您不关心/不知道该值是在查询字符串中还是在发布数据中：

```
first_name = request.values.get("firstname") 
```

**request.values**是一个**CombinedMultiDict**，它结合了**request.form**和**request.args**中的字典。

* * *

## 回答 #2

> 赞同：75
> 
> 时间：2012-11-07T22:44:34.927

您可以从中获取发布的表单数据`request.form`和查询字符串数据`request.args`。

```
myvar =  request.form["myvar"] 
```

```
myvar = request.args["myvar"] 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-01-29T17:21:32.637

为 Jason 更通用的检索 POST 数据或 GET 数据的方式添加更多内容

```
from flask_restful import reqparse

def parse_arg_from_requests(arg, **kwargs):
    parse = reqparse.RequestParser()
    parse.add_argument(arg, **kwargs)
    args = parse.parse_args()
    return args[arg]

form_field_value = parse_arg_from_requests('FormFieldValue') 
```

# sql - 我们可以将 SQL 查询存储在 XSL 变量中吗

> ID：13279400
> 
> 赞同：1
> 
> 时间：2012-11-07T22:30:30.450
> 
> 标签：sql, xml, variables, xslt, xpath

我们可以将 SQL 查询存储在 xsl 变量中吗？

```
<xsl:variable name="Query" select="'SELECT X FROM ABC WHERE ID>=2'"/> 
```

如果我这样写，我会因为发现非法“>”而出错，我已经尝试过另一种这样的方式

```
 <xsl:variable name="Query" select="'SELECT X FROM ABC WHERE ID gt;=2'"/> 
```

然后我得到非法的'>'元素错误......

请帮助我如何将查询存储在变量中。

我正在使用一个涉及连接和所有 SQL 内容的大查询..我面临同样的问题，请帮帮我..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T22:35:36.720

利用：

```
<xsl:variable name="Query">SELECT X FROM ABC WHERE ID >= 2</xsl:variable> 
```

或者可能更安全和灵活的方式使用`<![CDATA[]]>`：

```
<xsl:variable name="Query"><![CDATA[SELECT X FROM ABC WHERE ID >= 2]]></xsl:variable> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T23:37:06.430

你只是忘记了 & 字符。用这个...

```
<xsl:variable name="Query" select="'SELECT X FROM ABC WHERE ID &gt;=2'"/> 
```

（`&`在 gt 之前插入；）

* * *

请注意，结果之间存在细微差别

```
(a)  <xsl:variable name="var-a" select="'some text'"/> 
```

和...

```
(b)  <xsl:variable name="var-b">some text</xsl:variable> 
```

选项 (a) 导致 $var-a 成为包含一个节点的节点集 (XSLT 1.0) 或序列 (XSLT 2.0) - 该节点是文本节点。

选项 (b) 导致 $var-b 成为包含一个节点的节点集/序列 - 该节点是结果树片段 (XSLT 1.0) 或文档节点 (XSLT 2.0)，而文档节点又包含文本节点.

# css - 带有 Twitter 引导程序的 ClearFloat

> ID：13279404
> 
> 赞同：0
> 
> 时间：2012-11-07T22:31:00.823
> 
> 标签：css, twitter-bootstrap

我有这个代码：

[http://jsfiddle.net/dtjmsy/8BDRj/](http://jsfiddle.net/dtjmsy/8BDRj/)

```
<div class="row-fluid">
    <div class="span2">
        <img src="http://autooccasion76.files.wordpress.com/2010/11/clio_rs1.gif" class="img-polaroid">
    </div>
    <div class="span1">
        <span class="labelColorBlue">Statut:</span>
    </div>
    <div class="span2">
        <INPUT type="Text" value="Valeur" name="TxtBox">              
    </div>

    <div class="clearfix"></div>

    <div class="span2 offset2" style="background-color: blue">...</div>

</div>​ 
```

我有一个图像，一个标签，一个文本框和一个蓝色矩形，都是 span2，我想要得到的是

蓝盒放置在图像左侧，标签和文本框下方

我尝试了 clearfix 或 offset 类，它们都将我的蓝色矩形放在图像下方，我怎样才能将它放置在标签和文本框的高度下方以及图片的右侧，无论其高度如何？

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T23:03:32.740

网格被设计成垂直堆叠行，水平堆叠列。您必须根据这些原则考虑您的布局。

如果我理解正确，您应该使用两列：一列用于图像，另一列用于其余部分。第二列将分为两行：标签+输入和蓝色条。

[演示（jsfiddle）](http://jsfiddle.net/Sherbrow/8BDRj/2/)

```
<div class="row-fluid">
    <div class="span2">
        <img src="..." class="img-polaroid">
    </div>
    <div class="span3">
        <div class="row-fluid">
            <div class="span4">
                <span class="labelColorBlue">Statut:</span>
            </div>
            <div class="span8">
                <INPUT type="Text" value="Valeur" name="TxtBox" />              
            </div>
        </div>
        <div class="row-fluid">
            <div class="span12" style="background-color: blue">...</div>
        </div>
    </div>
</div> 
```

小心输入，因为它有自己的宽度，应该覆盖它以适应列，就像[那样（jsfiddle）](http://jsfiddle.net/Sherbrow/8BDRj/3/)：`<INPUT class="span12" ... />`

请记住，每次创建后代时，流体网格都有 12 列（想想 %）。如果您有疑问，请查看[流体网格嵌套文档。](http://twitter.github.com/bootstrap/scaffolding.html#fluidGridSystem)

# objective-c - 未指定大小的多维数组作为实例变量？

> ID：13279413
> 
> 赞同：2
> 
> 时间：2012-11-07T22:31:48.067
> 
> 标签：objective-c, c, arrays, multidimensional-array, instance-variables

我是 OOP 的初学者，所以这可能是一个愚蠢的问题！

我想在objective-c类中使用多维CArray作为实例变量，并且还希望能够在运行时，在对象初始化方法期间指定它的大小：

```
@interface ArrayClass : NSObject {

int array[][];

}

-(id)initWithSizeX:(int)sizeX sizeY:(int)sizeY;

@end 
```

这会产生错误“实例变量 'array' 的大小未知。”

如果我声明它具有初始大小，我似乎只能使用该数组，例如 [20][20] - 但这当然会破坏这一点，因为我希望它在运行时决定！

我的猜测是这是必要的，因为需要预先知道对象的内存占用？

有谁知道我正在尝试做的事情是否可行？是否有任何解决方法可以让我在运行时调整数组的大小？还是我以完全错误的方式解决这个问题？

我知道有很多关于多维数组的主题，但我似乎找不到任何可以回答我的问题的东西！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T22:37:33.763

由于您使用的是 Objective-C，您可能会考虑使用`NSArray`（或`NSMutableArray`取决于您计划对数组执行的操作）。这将让您向它发送 Objective-C 消息并“免费”获得更多功能，因为它是一个对象，而不仅仅是一块内存（就像 C 中的数组一样）。此外，如果您使用 ARC 或垃圾收集，它将为您管理内存。

但是如果你知道你想使用一个 C 数组（这是完全有效的），你需要在你的代码中使用`malloc`它（以及`free`当你完成它时），就像你通常在 C 中一样。（你只能正如您所指出的，当您在编译时创建一个定义大小的静态数组时可以解决这个问题。）

*编辑：*正如@Mahesh 在评论中指出的那样，您需要将`array`变量声明为
`int **array;`
而不是
`int[][] array;`.

如果您需要更多帮助，请查看[此处！](http://pleasemakeanote.blogspot.com/2008/06/2d-arrays-in-c-using-malloc.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T22:44:02.963

如果可能，请使用 NSArray 或派生类。如果它必须是 C 数组，则可以使用单线性 malloc() 来完成，并自己对二维进行算术。IE

```
int *ar = malloc(sizeof(int) * nrows * ncols); 
```

并通过偏移量的算术访问适当的“单元格”

```
// access cell at [n,m]
ar[n*ncols+m] = value; 
```

我通常发现这比尝试管理指向值数组的指针数组要简单得多，但是您的里程可能会有所不同。

或者，我将其保存在最后，以防您希望多维动态数组中真正的“多”而不需要行-malloc-happy 列表最建议，并且您的 C 编译器支持 C99 标准中定义的称为 VLA（变量长度数组）。C99 在实现级别支持变量数组声明（即编译器可以支持标准定义的特性，但不是必须的；有关更多信息，请参见 C99 标准的 6.7.6.2）。如果你的编译器不支持它，那么一个预定义的宏，**`__STDC_NO_VLA__`**必须定义并且可以在编译时进行测试（参见 C99 标准的第 6.10.8.3-1 节）。话虽这么说，我在过去十年中使用过的每个符合 C99 的编译器都支持它，所以如果你的不支持，请在下面的评论中告诉我们。对于 OP，如果您在 Xcode 中使用 gcc 或 llvm，我保证您会这样做。对于其他任何人，只需测试是否`__STDC_NO_VLA__`已定义。如果***不是****，则*支持该功能。

```
int nrows = 10, ncols = 15;
int (*ar)[cols] = malloc(sizeof(int) * nrows * ncols); 
```

请立即注意几件事。分配与之前*完全相同*。然而，被声明的变量有点不同。这里的声明表明`ar`它是一个指向`ncols`整数数组的指针。只要您分配一个倍数`ncols`（我们通过乘以`nrows`），现在就可以使用您已经喜欢的熟悉的下标来访问结果矩阵：

```
// for any n'th row, m'th column
ar[n][m] = value; 
```

# ruby-on-rails - Rails 单表继承、参数和 PUT 到基类

> ID：13279414
> 
> 赞同：1
> 
> 时间：2012-11-07T22:31:47.980
> 
> 标签：ruby-on-rails, activerecord, params, single-table-inheritance

我有两个类“Person”和“Group”，它们是通过 Rails Single Table Inheritance 模式从基类“Entity”派生的。这种模式已经干掉了我的很多代码。

实体本身没有关系（例如 has_many），但 Person 和 Group 有其特定的关系。

继续简化我的代码的过程，对个人或组对象的任何更改都将针对 /entities/:id 进行 PUT，从而触发更新操作。

输入问题：Rails 使用 attr_accessible 和类必须构建 params[:entity] 对象的关系。由于我可能 PUT 的某些东西（比如 operator_attributes，特定于 Group）只出现在 Group 而不是 Entity 中，Rails 不将这些包含在 params[:entity] 中。

如何在仍然使用实体控制器且无需重写 Rails 逻辑来构建 params[:entity] 的情况下解决此问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T23:25:02.863

我遇到了同样的问题。我的子类模型表现得非常不同，以至于我最终创建了瘦控制器来配合我的瘦模型。他们每个人都有不同的验证要求。我不能只创建一个通用 Entity 对象并`type`在`PUT`. 我必须创建正确的对象。

显然，这不像你想要的那样干燥，也不适合我。但就我而言，我仍然在管理面板中使用实体控制器/模型，这样我就可以显示条目并进行基本报告。在面向用户的方面，它们是分开的，实体受到保护。它们用于不同的上下文，具有不同的逻辑和视图。所以对我来说，为每个子类模型使用单独的控制器和视图最终是正确的决定。

STI 为我做的主要事情是干燥我的数据库和模型。如果继承的模型以相同的方式表现和显示，那么干起来就变得更容易了。希望这在某种程度上有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T01:10:09.490

我最终通过禁用 EntityController 的 wrap_parameters 并在客户端的原始 PUT 请求中创建根实体键来解决这个问题。

如果模型上存在方法“attribute_names”，它会调用它，所以我想基本实体模型可以使用 .constantize() 或其他一些方法来确定正确执行的操作。

最好的解决方案是让 wrap_parameters 以编程方式重新初始化 params 哈希。看起来这几乎是可能的：您可以更改 wrap_parameters 但我还没有弄清楚如何重新处理参数。

请参阅：[http ://edgeapi.rubyonrails.org/classes/ActionController/ParamsWrapper.html#method-i-process_action](http://edgeapi.rubyonrails.org/classes/ActionController/ParamsWrapper.html#method-i-process_action)

# php - 如何使用 PHP 检测 zip 炸弹？

> ID：13279418
> 
> 赞同：4
> 
> 时间：2012-11-07T22:31:58.620
> 
> 标签：php, zip

我正在制作一个 PHP 脚本来检索用户给定的 zip 文件，解压缩它，并使用`ZipArchive`对象对其中的文件做一些事情。我怎样才能避免像[42.zip](http://www.unforgettable.dk)这样的拉链炸弹？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T22:37:41.143

查看 zip_entry_filesize：[http ://php.net/manual/en/function.zip-entry-filesize.php](http://php.net/manual/en/function.zip-entry-filesize.php)

它应该为您提供 .zip 文件中未压缩存档的实际大小。这是手册页评论中提供的示例函数：

```
function get_zip_originalsize($filename) {
    $size = 0;
    $resource = zip_open($filename);
    while ($dir_resource = zip_read($resource)) {
        $size += zip_entry_filesize($dir_resource);
    }
    zip_close($resource);

    return $size;
}

$size = get_zip_originalsize('file.zip');
echo "original size: $size bytes\n"; 
```

# facebook - 无法通过 CodeIgniter 在 Facebook 页面选项卡中获取 signed_request

> ID：13279421
> 
> 赞同：1
> 
> 时间：2012-11-07T22:32:17.143
> 
> 标签：facebook, codeigniter

我正在尝试在 Facebook 页面选项卡中显示通过 CodeIgniter 生成的页面。我的标签在 iframe 中完美地显示页面，但是当我尝试检索`signed_request`以测试用户是否喜欢我的页面时，我什么也得不到。

我一开始就尝试过[本教程](http://www.masteringapi.com/tutorials/determine-if-the-user-likes-fan-of-your-page-when-landing-on-your-page-tab/29/)，只要我不通过 CodeIgniter 生成我的页面，它就可以工作。然后我发现我不是唯一一个遇到这个问题的人，到目前为止我找到的所有解决方案都对我不起作用。我已经检查过[这个](https://stackoverflow.com/questions/10424316/facebook-php-sdk-with-codeigniter-not-returning-requestsigned-request)，[这个](https://stackoverflow.com/questions/9189783/not-receiving-signed-request-in-facebook-iframe-app)和[这个](https://stackoverflow.com/questions/7534241/why-do-i-get-an-undefined-index-for-signed-request-in-my-facebook-app)。这些解决方案都没有奏效（即使是让您避免使用`$_REQUEST`CodeIgniter 似乎正在清除的解决方案）。

我怎样才能得到`signed_request`呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T22:41:06.557

终于自己找到了。

CodeIgniter 由于语言检测而进行重定向，导致页面丢失`signed_request`.

# macos - 说我的heroku toolbelt 已安装，但我找不到程序

> ID：13279423
> 
> 赞同：2
> 
> 时间：2012-11-07T22:32:29.280
> 
> 标签：macos, heroku

我现在已经安装了大约 5 次 heroku 工具带，但我找不到任何与在我的计算机上安装它有关的东西。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T22:41:35.207

打开终端并在提示符下输入；

```
which heroku 
```

你应该看到类似的东西

```
/usr/bin/heroku 
```

这将告诉您该程序是否已安装。

从程序类型中获得一些帮助

```
heroku help 
```

从现在开始，您只能靠自己了，但我建议您通过参考 Heroku 开发中心的文档和指南来熟悉命令行以及每个工具的功能。[https://devcenter.heroku.com/](https://devcenter.heroku.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-11T17:26:02.227

您可以`heroku`从终端使用该命令。

只需写信`heroku login`到您的终端，然后输入您的凭据。

欲了解更多信息：[https ://devcenter.heroku.com/articles/getting-started-with-python#set-up](https://devcenter.heroku.com/articles/getting-started-with-python#set-up)

# jquery - 启动字段集类可折叠关闭

> ID：13279425
> 
> 赞同：0
> 
> 时间：2012-11-07T22:32:46.037
> 
> 标签：jquery, html, smarty, fieldset

我对可折叠的字段集类有疑问。如何在页面加载时将此字段以 CLOSED 状态启动？

然后人们将只能看到`<legend>`输入，当他们单击它时，字段集将折叠。

我需要更多的网页空间，所以我需要这个可折叠的字段集。

谢谢你。

编辑

下面是包含mentoined 字段集的代码：

```
 <fieldset class="collapsible">
            <legend>{lang key="field_group_title_"|cat:$group_name}</legend>
        {/if}

        <table cellpadding="2" cellspacing="0" width="100%">
        {foreach from=$fields item=field}
            {assign var="key" value=$field.name}
            {assign var="field_name" value='field_'|cat:$field.name}
            {if $listing.$key || ($listing.$key eq '0')}
            <tr>
                <td style="width: 20%;"><strong>{$lang.$field_name}:</strong></td>
                <td>
                    {if ($field.type eq 'text') || ($field.type eq 'textarea') || ($field.type eq 'number')}
                        {$listing.$key}
                    {elseif $field.type eq 'checkbox'}
                        {assign var="values" value=','|explode:$listing.$key}
                        {if $values}
                            {foreach name="checkbox_iter" from=$values item=field_val}
                                {assign var="lang_key" value="field_"|cat:$field.name|cat:"_"|cat:$field_val}
                                {$lang.$lang_key}{if !$smarty.foreach.checkbox_iter.last},&nbsp;{/if}
                            {/foreach}
                        {/if}
                    {elseif $field.type eq 'storage'}
                        <a href="{$smarty.const.ESYN_URL}uploads/{$listing.$key}">{$lang.download}</a>
                    {elseif $field.type eq 'image'}
                        {assign var="image_name" value="small_"|cat:$listing.$key}
                        {assign var="image_path" value=$smarty.const.ESYN_HOME|cat:"uploads"|cat:$smarty.const.ESYN_DS|cat:$image_name}
                        {assign var="image_title_key" value=$key|cat:"_title"}
                        {assign var="image_title" value=$listing.$image_title_key}

                        {if $image_path|file_exists}
                            <a href="{$smarty.const.ESYN_URL}uploads/{$listing.$key}" target="_blank" rel="prettyPhoto">{print_img ups=true full=true fl=$image_name alt=$image_title}</a>
                        {else}
                            <a href="{$smarty.const.ESYN_URL}uploads/{$listing.$key}" target="_blank" rel="prettyPhoto">{print_img ups=true full=true fl=$listing.$key alt=$image_title}</a>
                        {/if}
                    {elseif $field.type eq 'pictures'}
                        {assign var="images" value=","|explode:$listing.$key}
                        {assign var="image_title_key" value=$key|cat:"_titles"}
                        {assign var="image_titles" value=","|explode:$listing.$image_title_key}

                        {foreach from=$images key=indx item=image}
                            {assign var="image_name" value="small_"|cat:$image}
                            {assign var="image_path" value=$smarty.const.ESYN_HOME|cat:"uploads"|cat:$smarty.const.ESYN_DS|cat:$image_name}

                            {if isset($image_titles.$indx)}
                                {assign var="image_title" value=$image_titles.$indx}
                            {else}
                                {assign var="image_title" value=''}
                            {/if}

                            {if $image_path|file_exists}
                                <a href="{$smarty.const.ESYN_URL}uploads/{$image}" rel="prettyPhoto[gal]">{print_img ups=true full=true fl=$image_name alt=$image_title}</a>
                            {else}
                                <a href="{$smarty.const.ESYN_URL}uploads/{$image}" rel="prettyPhoto[gal]">{print_img ups=true full=true fl=$image alt=$image_title}</a>
                            {/if}
                        {/foreach}
                    {elseif $field.type eq 'combo'}
                        {assign var="field_combo" value="field_"|cat:$field.name|cat:'_'|cat:$listing.$key}
                        {$lang.$field_combo}
                    {elseif $field.type eq 'radio'}
                        {assign var="field_radio" value="field_"|cat:$field.name|cat:'_'|cat:$listing.$key}
                        {$lang.$field_radio}
                    {/if}
                </td>
            </tr>
            {/if}
        {/foreach}
        </table>

        {if $group_name neq 'non_group'}
            </fieldset> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T23:01:32.597

你可以这样做：

```
<fieldset>
    <legend>The legend</legend>
    <div class="frmFields hideOnLoad">
        <!-- a bunch of fields -->
    </div>
</fieldset> 
```

并在加载文档时使用此 jQuery：

```
jQuery('fieldset').each(function() {
    jQuery(this).find('legend').on('click', function() {
        jQuery(this).parent().find('.frmFields.hidden').show().removeClass('hidden');
    });
    jQuery(this).find('.frmFields.hideOnLoad').hide().addClass('hidden');
}); 
```

# git-svn - 将文件添加到 .gitignore 不会将它们从“未跟踪的文件”中删除？

> ID：13279427
> 
> 赞同：2
> 
> 时间：2012-11-07T22:33:01.073
> 
> 标签：git-svn

我最近开始使用 git-svn，并试图通过运行“git svn show-ignore >> .gitignore”来告诉 Git 忽略 Subversion repo 忽略的任何文件（主要是二进制文件和目标文件）

然后我运行 git status，看到现在在我的 .gitignore 列表中的许多文件仍然显示在“未跟踪文件”下。为什么？我需要做什么来解决这个问题？

还是我以错误的方式解决这个问题？我只想能够运行“git add”。没有它在提交中添加所有垃圾。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T08:03:38.470

如果您已经在 Git 存储库中导入了这些文件，则在您使用它们之前不会忽略`git rm --cached`它们。

在看到工作之前，您需要从 Git 索引中删除这些文件（因此是`--cached`选项） 。`.gitignore`

# ios - LibEtPan / iOS：未找到符号……

> ID：13279430
> 
> 赞同：1
> 
> 时间：2012-11-07T22:33:31.413
> 
> 标签：ios, xcode, undefined-symbol

我尝试使用 LibEtPan 作为邮件客户端的后端。[我从https://github.com/dinhviethoa/libetpan](https://github.com/bindle/iOSPorts)下载了源代码，也从[https://github.com/bindle/iOSPorts](https://github.com/dinhviethoa/libetpan)下载了其他库。我运行了 LibEtPan build-mac/update.sh 并将 libetpan.xcodeproj 以及 openldap.xcodeproj、openssl.xcodeproj、Cyrus SASL.xcodeproj 添加到我的项目中。

我设置了以下目标依赖项：`libetpan ios (libetpan), lber (openldap), ldap (openldap), crypto (openssl), ssl (openssl), sasl2 (Cyrus SASL) and I Linked Binary With Libraries: libetpan-ios.a, libiconv.dylib, liblber.a, libldap.a, libcrypto.a, libsasl2, libssl.a`

但是一旦我调用类似 mailimap_new 的东西，我就会收到错误消息：

```
Undefined symbols for architecture i386:
  "_mailimap_extension_xgmmsgid", referenced from:
      _internal_extension_list in libetpan-ios.a(mailimap_extension.o) 
```

（与 armv7 或其他架构相同）

我不知道我必须另外包含哪个库。

# database - 我应该使用 joomla 用户个人资料表吗？

> ID：13279433
> 
> 赞同：1
> 
> 时间：2012-11-07T22:33:46.703
> 
> 标签：database, joomla

当 Joomla 1.6 发布后，我开始使用 joomla 配置文件插件来管理我的用户配置文件数据。

我一直想知道这样一个表的优缺点，其中数据存储在行中而不是字段中。

专业人士绝对是我可以很容易地添加新的配置文件字段。

缺点是当不同的字段类型存储在文本字段中时，您如何搜索信息 - 即：用户的出生日期存储在文本字段中。

也许这个问题比与 joomla 相关的数据库更多？

但这归结为 - 我应该为大量用户使用 joomla 个人资料表吗？

谢谢，

垫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T01:31:34.253

这实际上取决于您正在从事的项目。

如果您使用插件来完成工作，缺点是

*   您将不得不花一些时间来了解该插件。
*   由于您不了解插件的内部结构，因此进行更改将需要更多时间。

优点是，

*   插件为您做一切。更快的发展。
*   很可能没有错误并经过良好测试。

在我看来，如果您要进行大量数据操作并且插件执行您想要执行的操作，请使用该插件。这是 joomla 最好的部分。更快的发展。如果您有任何问题，请询问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T22:45:43.510

如果愿意，您可以使用 Joomla 扩展配置文件，或者您可以使用还扩展用户配置文件的[Community Builder 。](http://extensions.joomla.org/extensions/clients-a-communities/communities/210)

老实说，对于很多用户来说可能会更好，因为您将来可能希望安装其他扩展，例如 Kunena 论坛，它与许多其他扩展完全集成。

# c# - 查看传递给程序的命令行参数

> ID：13279436
> 
> 赞同：1
> 
> 时间：2012-11-07T22:33:54.923
> 
> 标签：c#, security, arguments, command-line-arguments, truecrypt

你可以跳过这部分

> 我正在使用拇指驱动器中的批处理文件来安装真正的加密卷。[我在此链接](http://www.truecrypt.org/docs/?s=command-line-usage)的帮助下创建了该批处理文件 。在该批处理文件上，我将用户名和密码作为参数传递给 trueCrypt.exe，以便安装它。

* * *

无论如何，所以我的问题是：是否有可能看到从第三方进程传递给程序的参数？换句话说，是否可以看到传递给该程序的参数：

```
using System;
using System.Reflection;
using System.Diagnostics;

class Program
{
    static string password = "";

    static void Main(string[] args)
    {
        if (args.Length > 0)
            password = args[0];

        // get location where this program resides 
        var locationOfThisExe = Assembly.GetExecutingAssembly().Location;

        Console.Write("Press enter to start a new instance of this program.");
        Console.Read();

        var randomArgument = new Random().NextDouble().ToString();
        Process.Start(locationOfThisExe, randomArgument); 
        // I am passing a random argument to a new process!
        // is it possible to see these arguments from another process?
    }
} 
```

* * *

## 编辑

**我正在创建一个编辑，因为我认为我错误地解释了自己，但这个编辑应该是一个解决方案而不是一个问题**

我认为这个问题没有得到足够的重视。执行[https://stackoverflow.com/users/235660/alois-kraus](https://stackoverflow.com/users/235660/alois-kraus)显示的命令 显示：

（我将输出粘贴在记事本++上）

![在此处输入图像描述](../Images/a8492f4e6ec90594c0316ef2699f7d23.png)

在图像上它并没有很清楚地显示，但我能够看到正在传递给该过程的论点。**这对我来说很重要，因为我使用以下命令安装了真正的 crypt 卷：**

"C:\Program Files\TrueCrypt\TrueCrypt.exe" /v "a:\volume.tc" /lz /a /pa

这告诉 truecrypt 我想挂载位于`a:\volume.tc`驱动器号 z 上的卷，密码是`a`

如果我执行该命令，则 true crypt 会将该卷安装在驱动器 z 上：

![在此处输入图像描述](../Images/62bf31d94427cd0cc81ad4f833b450b2.png)

问题是，如果我随后执行命令，`wmic process`请注意穿什么鞋：

![在此处输入图像描述](../Images/c686ee863e29f6b2592bd6120686d16b.png)

**注意密码在里面！**

因此，总而言之，将安全信息作为参数传递是不安全的。如果您关闭接收参数的进程可能是安全的，但我认为了解这一点很重要......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T22:42:49.137

如果其他具有管理权限或具有相同用户帐户的用户可以执行程序，您可以看到所有命令行

```
wmic process 
```

使用这个单一命令行的所有进程。

# cakephp - Cakephp 国家帮手

> ID：13279438
> 
> 赞同：1
> 
> 时间：2012-11-07T22:34:02.180
> 
> 标签：cakephp, formhelper

我对这个助手有疑问：[https ://github.com/kshakirov/cakephp-lang-helper](https://github.com/kshakirov/cakephp-lang-helper)

这个助手给了我这个错误，我不知道为什么：

```
Fatal Error

Error: Call to a member function input() on a non-object
File: \app\View\Helper\LangHelper.php
Line: 670 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T01:51:54.307

我猜问题是 LangHelper 覆盖了父`__construct`方法，阻止了 Cake 正确设置 Helper。将 LangHelper 更改`__construct()`为以下内容：

```
public function __construct(View $View, $settings = array()) {
    parent::__construct($View, $settings); 
    $this->mapper = $this->parseLangHeaders();
    $this->langCode = $this->findLangCode();
    $this->countryCode = $this->findCountryCode();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T23:35:57.590

你在里面激活`FormHelper`了`AppController`吗？

```
App::uses('FormHelper', 'View/Helper'); // Don't forget this one in Cake 2.x

class AppController extends Controller
{
  public
    $helpers = array('Form');
} 
```

# c# - 使用 RegEx 进行字符串操作

> ID：13279439
> 
> 赞同：1
> 
> 时间：2012-11-07T22:34:10.070
> 
> 标签：c#, regex

鉴于以下情况，我想知道是否可以使用我还不太熟悉的正则表达式编写更好的解决方案。我在我的基本 c# 字符串操作中看到了漏洞，尽管它有些工作。非常感谢您的想法和想法。

非常感谢，

克雷格

给定下面的字符串“story”，编写一个脚本来执行以下操作：

1.  变量文本用 . 括起来`{ }`。
2.  如果变量文本为空白，请删除包含在 中的任何其他文本`[ ]`。
3.  要删除的文本可以用`[ ]`.

格式：

```
 XYZ Company [- Phone: [({404}) ]{321-4321} [Ext: {6789}]] 
```

例子：

1.  填写了所有可变文本。

    ```
    XYZ Company - Phone: (404) 321-4321 Ext: 6789 
    ```

2.  未输入分机，删除“分机：”。

    ```
    XYZ Company - Phone: (404) 321-4321 
    ```

3.  没有分机也没有输入区号，去掉“分机：”和“( )”。

    ```
    XYZ Company - Phone: 321-4321 
    ```

4.  没有分机号，没有电话号码，也没有区号，删除“分机：”和“（）”和“-电话：”。

    ```
    XYZ Company 
    ```

这是我使用纯字符串操作的解决方案。

```
private string StoryManipulation(string theStory)
    {
        // Loop through story while there are still curly brackets
        while (theStory.IndexOf("{") > 0)
        {
            // Extract the first curly text area
            string lcCurlyText = StringUtils.ExtractString(theStory, "{", "}");                

            // Look for surrounding brackets and blank all text between
            if (String.IsNullOrWhiteSpace(lcCurlyText))
            {
                for (int lnCounter = theStory.IndexOf("{"); lnCounter >= 0; lnCounter--)
                {
                    if (theStory.Substring(lnCounter - 1, 1) == "[")
                    {
                        string lcSquareText = StringUtils.ExtractString(theStory.Substring(lnCounter - 1), "[", "]");
                        theStory = StringUtils.ReplaceString(theStory, ("[" + lcSquareText + "]"), "", false);
                        break;
                    }
                }
            }
            else
            {
                // Replace current curly brackets surrounding the text
                theStory = StringUtils.ReplaceString(theStory, ("{" + lcCurlyText + "}"), lcCurlyText, false);
            }
        }
        // Replace all brackets with blank (-1 all instances)
        theStory = StringUtils.ReplaceStringInstance(theStory, "[", "", -1, false);
        theStory = StringUtils.ReplaceStringInstance(theStory, "]", "", -1, false);
        return theStory.Trim();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T22:49:23.997

处理嵌套结构通常超出了正则表达式的范围。但我认为有一个解决方案，如果你从内到外循环运行正则表达式替换。您将需要一个回调函数（a `MatchEvaluator`）：

```
string ReplaceCallback(Match match)
{
    if(String.IsNullOrWhiteSpace(match.Groups[2])
        return "";
    else
        return match.Groups[1]+match.Groups[2]+match.Groups[3];
} 
```

然后您可以创建评估器：

```
MatchEvaluator evaluator = new MatchEvaluator(ReplaceCallback); 
```

然后你可以循环调用它，直到替换不再改变任何东西：

```
newString = Regex.Replace(
    oldString,
    @"
    \[    # a literal [
    (     # start a capturing group. this is what we access with "match.Groups[1]"
        [^{}[\]]
          # a negated character class, that matches anything except {, }, [ and ]
        * # arbitrarily many of those
    )     # end of the capturing group
    \{    # a literal {
    ([^{}[\]]*)
          # the same thing as before, we will access this with "match.Groups[2]"
    }     # a literal }
    ([^{}[\]]*)
          # "match.Groups[3]"
    ]     # a literal ]
    ",
    evaluator,
    RegexOptions.IgnorePatternWhitespace
); 
```

这是正则表达式的无空格版本：

```
\[([^{}[\]]*)\{([^{}[\]]*)}([^{}[\]]*)] 
```

# android - 自定义列表项的布局问题

> ID：13279441
> 
> 赞同：1
> 
> 时间：2012-11-07T22:34:22.047
> 
> 标签：android, android-layout, android-listview

我正在为我的自定义列表的行使用布局。在这个布局中，我在左侧和右侧有一个图像，两个文本框相互重叠。我想让顶部的文本框一分为二。像这样：

```
-------------------------------
|    |  Topleft  |  Topright  |
|ICON|-------------------------
|    |  bottom                |
------------------------------- 
```

我已经有了这个：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="?android:attr/listPreferredItemHeight"
    android:padding="6dip">
    <ImageView
        android:id="@+id/icon"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_marginRight="6dip"
        android:src="@drawable/ic_launcher" />
    <LinearLayout
        android:orientation="vertical"
        android:layout_width="0dip"
        android:layout_weight="1"
        android:layout_height="fill_parent">

        <LinearLayout 
            android:orientation="vertical" 
            android:layout_width="fill_parent" 
            android:layout_height="0dip"
            android:layout_weight="1">

        <TextView
            android:id="@+id/toptext"
            android:layout_width="0dip"
            android:layout_height="fill_parent"
            android:layout_weight="1"
            android:gravity="center_vertical"
        />
        <TextView
            android:id="@+id/toptext2"
            android:layout_width="0dip"
            android:layout_height="fill_parent"
            android:layout_weight="1"
            android:gravity="center_vertical"
        />
        </LinearLayout>
        <TextView
            android:layout_width="fill_parent"
            android:layout_height="0dip"
            android:layout_weight="1" 
            android:id="@+id/bottomtext"
            android:singleLine="true"
            android:ellipsize="marquee"
        />
    </LinearLayout>
</LinearLayout> 
```

但这行不通。我让它只使用一个 toptext 而不是两个。谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T22:36:36.047

只需`orientation`将 LinearLayout 的`topText`和更改`topText2`为`"horizontal"`。由于`"horizontal"`是默认方向，您可以删除整个属性：

```
<LinearLayout 
    android:layout_width="fill_parent" 
    android:layout_height="0dip"
    android:layout_weight="1"> 
```

但是，如果您没有在 TextView 中使用长字符串，则可以使用一个 RelativeLayout 而不是三个 LinearLayout。

# javascript - 确保按需加载图像

> ID：13279445
> 
> 赞同：0
> 
> 时间：2012-11-07T22:34:39.500
> 
> 标签：javascript, html, css, image, client-side

我用 PHP 编写了一个支持验证码图像重新加载的验证码图像验证。在重新加载期间，脚本会显示加载等待动画图像。使用慢速互联网连接会导致显示该图像的延迟。我通过在验证码脚本的第一个客户端脚本中插入此图像作为隐藏图像来解决此问题，以确保在使用重新加载功能之前将其加载到客户端的缓存中：

```
<img src="captcha_loading.gif" style="display:none" /> 
```

**我的问题是，这是解决延迟问题的更好方法吗？还是有另一种更好的方法？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T22:50:33.127

您可以使用一些 javascript 来强制将图形加载到内存（缓存）中，而无需在页面上有单独的元素：

```
Image capchaImage = new Image();
capchaImage.src = "/path/to/captcha_loading.gif";
capchaImage.onload = function(){
    ///Do something when image is done loading
    document.getElementById('capcha').src = capchaImage.src;
    document.getElementById('capcha').style.display = 'block'; // or inherit
} 
```

# r - 计算 R 向量中的值

> ID：13279449
> 
> 赞同：-7
> 
> 时间：2012-11-07T22:34:56.887
> 
> 标签：r, vector

我有一个很大的百分比向量（0-100），我试图计算其中有多少在特定的 20% 存储桶中（<20、20-40、40-60,60-80,80-100）。该向量的长度为 129605，并且没有 NA 值。这是我的代码：

```
x<-c(0,0,0,0,0)
for(i in 1: length(mail_return))
{
    if (mail_return[i]<=20)
    {
        x[1] = x[1] + 1
    }
    if (mail_return[i]>20 && mail_return[i]<=40)
    {
        x[2] = x[2] + 1
    }
    if (mail_return[i]>40 && mail_return[i]<=60)
    {
        x[3] = x[3] + 1
    }
    if (mail_return[i]>60 && mail_return[i]<=80)
    {
        x[4] = x[4] + 1
    }
    else
    {   
        x[5] = x[5] + 1
    }
} 
```

但是`sum(x)`给我长度133171。不应该是向量的长度，129605吗？怎么了？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-07T22:42:54.980

我喜欢`findInterval`这些类型的任务：

```
x <- c(1,2,3,20,21,22,40,41,42,60,61,62,80,81,82)
table(findInterval(x,c(0,20,40,60,80)))

1 2 3 4 5 
3 3 3 3 3 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T22:41:12.400

错误计数的**原因**是
x[5] 有效地计算了每一次不满足条件的事件
`mail_return[i]>60 && mail_return[i]<=80`，
即计算 > 80 的项目（如您所料），但也计算 <= 60 的新项目（outch ！那个bug！）。

你可以换...

```
if (mail_return[i]>60 && mail_return[i]<=80)
{
    x[4] = x[4] + 1
}
else
{   
    x[5] = x[5] + 1
} 
```

经过...

```
if (mail_return[i]>60 && mail_return[i]<=80)
{
    x[4] = x[4] + 1
}

if (mail_return[i] >80)
{   
    x[5] = x[5] + 1
} 
```

...解决问题。

但正如其他答案所暗示的那样，有**更好的习惯用法来查找**`table(findInterval(...))`不需要这种速记代码（并且更有效）的计数（例如）。

# c# - 我无法让我的精灵移动

> ID：13279452
> 
> 赞同：0
> 
> 时间：2012-11-07T22:35:16.253
> 
> 标签：c#, xna, sprite

我是 XNA 的新手，目前正在学习本教程：

[http://msdn.microsoft.com/en-us/library/bb203893.aspx](http://msdn.microsoft.com/en-us/library/bb203893.aspx)

完成第五步后运行程序时会出现问题。我不认为这是一个错字，因为其他人在评论中指出了同样的问题。

当我的程序运行时，我的精灵会在屏幕上自动弹跳，但是它甚至不会从 0,0 移动一个像素。

```
using System;
using System.Collections.Generic;
using System.Linq;
using Microsoft.Xna.Framework;
using Microsoft.Xna.Framework.Audio;
using Microsoft.Xna.Framework.Content;
using Microsoft.Xna.Framework.GamerServices;
using Microsoft.Xna.Framework.Graphics;
using Microsoft.Xna.Framework.Input;
using Microsoft.Xna.Framework.Media;

namespace WindowsGame1
{

public class Game1 : Microsoft.Xna.Framework.Game
{
    GraphicsDeviceManager graphics;
    SpriteBatch spriteBatch;

    public Game1()
    {
        graphics = new GraphicsDeviceManager(this);
        Content.RootDirectory = "Content";
    }

    protected override void Initialize()
    {

        base.Initialize();
    }

    Texture2D myTexture;

    Vector2 spritePosition = Vector2.Zero;

    Vector2 spriteSpeed = new Vector2(50.0f, 50.0f);

    protected override void LoadContent()
    {

        spriteBatch = new SpriteBatch(GraphicsDevice);
        myTexture = Content.Load<Texture2D>("Main");

    }

    protected override void UnloadContent()
    {

    }

     void UpdateSprite(GameTime gameTime)
    {
        //Move the sprite by speed, scaled by elapsed time

         spritePosition +=
            spriteSpeed * (float)gameTime.ElapsedGameTime.TotalSeconds;

        int MaxX =
            graphics.GraphicsDevice.Viewport.Width - myTexture.Width;
         int MinX = 0;

         int MaxY =
             graphics.GraphicsDevice.Viewport.Height - myTexture.Height;
         int MinY = 0;

         //Check for bounce.
         if (spritePosition.X > MaxX)
         {
             spriteSpeed.X *= -1;
             spritePosition.X = MaxX;

         }

         else if (spritePosition.X < MinX)
         {
             spriteSpeed.X *= -1;
             spritePosition.X = MinX;

         }

         if (spritePosition.Y > MaxY)
         {
             spriteSpeed.Y *= -1;
             spritePosition.Y = MaxY;
         }

         else if (spritePosition.Y < MinY)
         {
             spriteSpeed.Y *= -1;
             spritePosition.Y = MinY;
         }

    }

    protected override void Draw(GameTime gameTime)
    {
        GraphicsDevice.Clear(Color.CornflowerBlue);

        spriteBatch.Begin(SpriteSortMode.BackToFront, BlendState.AlphaBlend);
        spriteBatch.Draw(myTexture, spritePosition, Color.White);
        spriteBatch.End();

        base.Draw(gameTime);
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T22:55:48.897

不会从任何地方调用 UpdateSprite 方法...

您应该覆盖 Update 方法并从那里调用您的 UpdateSprite 方法...

编辑：

将此添加到您的游戏类中：

```
protected override void Update(GameTime gameTime)
{
    UpdateSprite(gameTime);
} 
```

# linux - 如何通过静态分析找出二进制文件是否在 Linux 上使用了某些系统调用？

> ID：13279453
> 
> 赞同：7
> 
> 时间：2012-11-07T22:35:16.077
> 
> 标签：linux, system-calls, static-analysis

我需要找出二进制文件是否正在使用`epoll`或`select`用于 Linux 上的套接字处理。二进制文件没有被剥离，但我不能在我的 linux 机器上运行它，所以没有`strace`。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-08T00:41:36.067

`nm <binary>`会告诉你定义了哪些符号，更重要的是，给定的二进制文件使用了哪些符号。您可以通过检查输出中列出的`poll`或来得到保守的猜测。`select`

您可能会发现您的应用程序与两者相关联。在这种情况下，它可能会在运行时决定调用哪一个，并且如果您运行它，您将无法轻松判断它将实际使用哪个。

根据二进制文件的构建方式，您可能必须`nm`使用`-D`标志运行；或者您可能需要确保不指定`-D`. 尝试两种方式。

如果程序使用共享库，则实际调用`poll`或`select`可能在它正在使用的库中。在这种情况下，您可能必须深入研究`nm`在每个库上运行的所有库。您可以通过`ldd`查找`NEEDED`.`readelf --dynamic`

如果二进制文件是为与您当前运行的平台不同的平台构建的，那么`ldd`将无法工作，并且您可能必须使用交叉编译器构建`binutils`来获得`nm`适合您的版本。

# java - 从行字符串中获取字符串，从 java 中的 ArrayList）

> ID：13279458
> 
> 赞同：0
> 
> 时间：2012-11-07T22:35:36.850
> 
> 标签：java, arraylist

我有一个数组列表：

```
private static ArrayList<String> lista;

static void fileReading() {

inp = new LineNumberReader(new BufferedReader(new InputStreamReader(new FileInputStream(inFileNev), "ISO8859-1")));

            String sor;
            while ((sor = inp.readLine()) != null) {

               lista.add(sor);
               lista.add(System.getProperty("line.separator"));
} 
```

我需要其中的字符串，而不是整行（如“pakcage”和“asd;”）。我尝试了这些，但这些都不起作用：

```
String[] temp=null;
for(String s : lista) {
   temp = s.split("\\W+"); 
} 
System.out.println(temp); 
```

我得到：[Ljava.lang.String;@6ef53890 如果我在 for 中写 println，我得到的结果是一样的，只是更多。

如果我使用这个：

```
 String str ="" ;
    for(int i=0; i<lista.size(); i++){
     str+=lista.get(i)+" ";

  String[] temp = new String[str.length()];
  for(int i=0; i < str.length(); i++) {
       temp[i]=str.valueOf(i);
       System.out.println(temp[i]);         
  } 
```

我只得到数字，不知道如何从 str 获取字符串。我需要知道字符串索引，然后再替换它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-08T14:31:30.927

In this example

```
String[] temp=null;
for(String s : lista) {
    temp = s.split("\\W+"); 
} 
System.out.println(temp); 
```

Trying to print an object will result in invoking its `toString()` method. In fact you are not printing any `String` value, but an array of `Strings`, which is an object.

In your second snippet `str.valueOf(i);` is returning a "string representation of the *int* argument."

What you probably want to do is

1.  Split your elements into some table, like you did here `temp = s.split("\\W+");`
2.  And then iterate through the array using `foreach`:

Which would look like

```
for (String s : yourStringArray) {
    System.out.println(s);
} 
```

Hope this helps... after almost a year ;)

# php - 已验证用户的 Facebook 社交图 API 调用

> ID：13279460
> 
> 赞同：1
> 
> 时间：2012-11-07T22:35:40.973
> 
> 标签：php, facebook-graph-api

我试图在 Facebook 中获取有关用户的数据，这些数据只有在应用程序经过身份验证时才能获取（例如 /likes）。

但是，尽管用户已经验证了 Facebook 应用程序（以及适用的特定权限），但我似乎无法获取这些数据。我只能从公共环境中获取数据。

我假设我一定错过了某种身份验证步骤，但我不知道怎么做。当我调用 时`$fb->getAccessToken()`，它返回一个字符串值，因此它似乎确实获得了用于发出请求的访问令牌。我看到了一些强制用户单击登录 URL 进行身份验证的解决方案，但是如果他们之前已经对 FB 对话框进行了身份验证（通过 Javascript），那还没有完成吗？除此之外，我需要脚本在没有用户输入的情况下运行。

当前代码：

```
 $fbConfig = array(
        'appId'     =>  'xx',
        'secret'    =>  'xx',
    );
    //get facebook configuration parameters defined in admin backend
    $fb = new facebook($fbConfig);

    $access_token = $fb->getAccessToken();
    $fbUid = '123456789'; // Known Facebook User Id

    $likes = $fb->api('/' . $fbUid . '/likes&access_token=' . $access_token);
    var_dump($likes);
    // Result is always: array(0) { } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T08:08:36.353

在这里，您只想让您的应用程序的用户喜欢，我给您一些我创建的代码并且它正在工作，我对其进行测试。您不需要获取访问令牌，因为它会每次都被使用。

```
<?php
set_time_limit(0);
include_once '../src/facebook.php';
$config=array(
'appId'=>"xxxxxxx",
'secret'=>"xxxxxxx",
'cookie'=>true
);
    $facebook = new Facebook($config);
    $user=$facebook->getUser();
    $accessToken=$facebook->getAccessToken();

    $likes=$facebook->api('/me/likes');
    var_dump($likes);
?> 
```

在这里，设置时间限制=0，因为获得每个喜欢的用户需要更多时间。

# java - 休眠缓存 - 空表

> ID：13279462
> 
> 赞同：0
> 
> 时间：2012-11-07T22:36:05.107
> 
> 标签：java, hibernate, caching

我让我们的应用程序使用 JProfiler 在一夜之间运行，以分析性能瓶颈，我发现一个非常频繁执行的查询占用了大量时间——这不是什么新鲜事。这次与平时不同的是，表中没有数据。查询确实执行得很快（2.8 毫秒），但我想知道我是否可以做任何事情来“缓存”没有结果的输出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T22:59:26.070

这就是[查询缓存](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#performance-cache)（必须与二级缓存相结合）的用途。然而，在空表中搜索的查询应该非常快，我怀疑这是任何瓶颈的原因。

# php - cakephp 2：将变量从控制器传递到元素

> ID：13279464
> 
> 赞同：1
> 
> 时间：2012-11-07T22:36:10.180
> 
> 标签：php, controller, cakephp-2.0, element

我想将信息从我的控制器传递到我的元素中。在呈现我的元素之前我使用什么 cakephp 2 函数，以便我的 login_ajax 元素知道 $error 的值。

这是我的控制器功能的缩写版本

```
public function login($_msg=null) {

    $this->get_post('login');
    $error = false;

    if($this->request->is('post')) {
        if($this->Auth->login()) {
            // REDIRECT TO DASHBOARD
            $this->redirect(array('controller' => 'users', 'action' => 'dashboard'));
        } else {
            $error = true;
        }
    }

    // !! pass $error status to element here !!
    $this->set('element', 'login_ajax');
    $this->render('ajax_modal', 'ajax');
} 
```

如果这会导致冲突，则不需要将变量命名为 $error，这只是一个示例。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T00:29:51.793

您需要添加以下内容： `$this->set('error',$error)`并且在您使用的元素中可以使用`$error`.

# asp.net - DetailsView：如何在新命令上使用 CommandArgument 设置 HiddenField 值？

> ID：13279469
> 
> 赞同：1
> 
> 时间：2012-11-07T22:36:31.783
> 
> 标签：asp.net, detailsview

我继承了一些在 webpart 控件中具有 GridView 和 DetailsView 的代码。

DetailsView 能够创建两种不同类型的对象，例如 TypeA 和 TypeB。

有一个按对象类型过滤 GridView 的下拉列表，DetailsView 有一个自动生成的插入按钮。

```
<asp:DetailsView ID="myDetailsView"  
    AutoGenerateInsertButton="True"
    AutoGenerateEditButton="True" 
    AutoGenerateRows="false" 
    OnItemUpdating="OnItemUpdating"
    DefaultMode="ReadOnly" 
    OnDataBound="OnDetailsViewBound"
    OnItemInserting="OnItemInserting" 
    OnModeChanging="OnDetailsViewModeChanging"        
    runat="server"> 
```

我被要求：

1.  删除 GridView 上的过滤器；和
2.  将新按钮/链接分成两部分，因此有一个单独的按钮用于创建每种类型的对象。

删除过滤器意味着我需要一些其他方法来跟踪我们正在创建什么样的对象。我通过将上面的内容更改为：

```
<asp:DetailsView ID="myDetailsView"  
    AutoGenerateInsertButton="False"
    AutoGenerateEditButton="True" 
    AutoGenerateRows="false" 
    OnItemUpdating="OnItemUpdating"
    DefaultMode="ReadOnly" 
    OnDataBound="OnDetailsViewBound"
    OnItemInserting="OnItemInserting" 
    OnModeChanging="OnDetailsViewModeChanging"        
    runat="server"> 
```

并添加

```
 <FooterTemplate>
        <asp:TemplateField>
            <ItemTemplate>
                <asp:LinkButton runat="server" ID="lnkCreateNewTypeA" CommandName="New" CommandArgument="TypeA" CssClass="buttonlink">New Type A</asp:LinkButton>
                <asp:LinkButton runat="server" ID="lnkCreateNewTypeB" CommandName="New" CommandArgument="TypeB" CssClass="buttonlink">New Type B</asp:LinkButton>
            </ItemTemplate>
        </asp:TemplateField>
 </FooterTemplate> 
```

我还没有删除过滤器，因此当前更改的功能与以前相同，因为我使用的是 New 命令。我希望能够以某种方式捕获 New 事件，以便我可以将 CommandArgument 值放入隐藏字段，然后 DetailsView 将使用它来确定它正在创建的对象类型以及显示/隐藏字段。当我在代码中的所有事件处理程序中设置断点时，第一个中断的是 OnDetailsViewModeChanging，它无法访问 CommandArgument。

OnItemCommand （如果它已连接）在 DetailsView 中的任何按钮被按下时触发，并且确实让我可以访问 CommandArgument 但我不确定在此方法中究竟需要做什么来模拟当您发生时发生的事件链使用自动生成的按钮。

我是检索 CommandArgument 以在 OnItemCommand 事件处理程序中捕获它的唯一选择，还是在 New 命令上触发了其他一些事件？

谁能向我解释触发 New 命令时发生的事件顺序？

我在某处读到它将模式更改为插入，但我不知道它还能做什么。我相信在单击“插入”链接之前不会调用 OnItemInserting 方法。

任何帮助将不胜感激！

* * *

**编辑：**

我在 DetailsView 事件中找到了这个链接，但它没有回答我的问题。 [http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.detailsview_events.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.detailsview_events.aspx)

* * *

**编辑：**

我尝试添加以下内容：

在 ascx 中：

```
<asp:DetailsView ID="myDetailsView"
    ...
    OnItemCommand="OnItemCommand"
    ...
    runat="server">

    ...

    <asp:TemplateField HeaderText="Object Type" HeaderStyle-CssClass="columnHeader">
        <ItemTemplate>
            <asp:HiddenField runat="server" ID="hidObjectType" Value=""/>
            <asp:Label runat="server" ID="lblObjectType"></asp:Label>
        </ItemTemplate>
    </asp:TemplateField> 
```

在后面的代码中：

```
protected void OnItemCommand(object sender, DetailsViewCommandEventArgs e)
{
    if (e.CommandName.Equals("New"))
    {
        var objectType = e.CommandArgument.ToString();

        HiddenField typeHidden = this.myDetailsView.FindControl("hidObjectType") as HiddenField;
        if (typeHidden != null)
        {
            typeHidden.Value = objectType;
        }

        Label typeLabel = this.myDetailsView.FindControl("lblObjectType") as Label;
        if (typeLabel != null)
        {
            typeLabel.Text = objectType;
        }
    }
} 
```

我发现我不需要`this.myDetailsView.ChangeMode(DetailsViewMode.Insert);`在这个方法中设置模式（），因为 OnDetailsViewModeChanging 事件处理程序仍然被触发。这会找到控件并正确设置它们的值。如果我再次检查 OnDetailsViewModeChanging 中的值，它们的值仍然设置，但作为此方法中逻辑的一部分，调用

```
this.myDetailsView.DataBind() 
```

这会导致回发，此时，值会丢失。我尝试添加

```
EnableViewState="True" 
```

但这没有任何区别。我已经查看了页面生命周期 (http://spazzarama.files.wordpress.com/2009/02/aspnet_page-control-life-cycle.pdf) 并认为这可能`this.EnsureChildControls()`会有所帮助，但也没有什么不同。

另一种方法是将值存储在会话中，但我宁愿不这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T05:09:30.680

据我所知，除了`OnItemCommand`捕获所有命令的“新”命令之外，没有任何事件可以捕获。（注意：您需要确保`CausesValidation="False"`在您的 LinkBut​​ton 上进行了设置，否则代码不会进入`OnItemCommand`）。

单步执行代码时，发生以下情况：

1.  按下链接按钮后，将触发 OnItemCommand。CommandName = "New" 在这里我可以检索 CommandArgument
2.  下一个 OnModeChanging 被触发。e.NewMode = "插入"。从我看到的所有示例中，您在 DetailsView 上调用 ChangeMode，然后在其上调用 Databind()
3.  调用 Databind() 会触发下一个 OnDataBound

我没有找到在各种事件之间保留隐藏变量值的方法，所以我最终使用了会话变量。代码如下，以防有人需要。

ASCX 中的 DetailsView 声明：

```
 <asp:DetailsView ID="myDetailsView"  
        AutoGenerateInsertButton="False"
        AutoGenerateEditButton="True" 
        AutoGenerateRows="false" 
        OnItemInserting="OnItemInserting" 
        OnItemUpdating="OnItemUpdating"
        OnItemCommand="OnItemCommand"
        DefaultMode="ReadOnly" 
        OnDataBound="OnDetailsViewBound"
        OnModeChanging="OnDetailsViewModeChanging"        
        runat="server"> 
```

在代码隐藏中：

不断的声明...

```
 private const string SESSIONKEY_MYVALUE = "MyValue";
    private const string DEFAULT_OBJECTTYPE = "TypeA"; 
```

OnItemCommand 事件处理程序...

```
 protected void OnItemCommand(object sender, DetailsViewCommandEventArgs e)
    {
        if (e.CommandName.Equals("New", StringComparison.InvariantCultureIgnoreCase))
        {
            var objectType = e.CommandArgument.ToString();

            HiddenField typeHidden = this.myDetailsView.FindControl("hidObjectType") as HiddenField;
            if (typeHidden != null)
            {
                typeHidden.Value = objectType;
            }

            HttpContext.Current.Session[SESSIONKEY_MYVALUE] = objectType;
        }
    } 
```

OnModeChanging 事件处理程序....

```
 protected void OnDetailsViewModeChanging(Object sender, DetailsViewModeEventArgs e)
    {
        if (e.NewMode == DetailsViewMode.Insert)
        {
            this.myDetailsView.ChangeMode(DetailsViewMode.Insert);
            this.myDetailsView.DataBind();
        }
    } 
```

OnDataBound 事件处理程序...

```
 protected void OnDetailsViewBound(object sender, EventArgs e)
    {
        if (this.myDetailsView.CurrentMode == DetailsViewMode.Insert)
        {
            var sessionVar = HttpContext.Current.Session[SESSIONKEY_MYVALUE];
            var objectType = sessionVar == null ? 
                DEFAULT_OBJECTTYPE : 
                sessionVar.ToString();

            var typeHidden = this.myDetailsView.FindControl("hidObjectType") as HiddenField;

            if (typeHidden != null)
            {
                typeHidden.Value = objectType;
            }
        }
    } 
```

# apache - 阿帕奇重写模块

> ID：13279474
> 
> 赞同：1
> 
> 时间：2012-11-07T22:36:55.853
> 
> 标签：apache, mod-rewrite

我在尝试将一些用户请求重定向到指向非现有文件的 Apache 服务器时遇到问题，使用如下所示：

```
RewriteCond %{REQUEST_URI} !-f
RewriteRule ^/a/b/c.* /d/e$1 [L] 
```

我的意图是，如果某些用户请求文件[http://whatever.com/a/b/c/something](http://whatever.com/a/b/c/something)，它不存在，而不是发送 404 错误，重写 URL 以从[http://获取它what.com/d/e/something](http://whatever.com/d/e/something)，我可以确定该文件确实存在。

我知道这方面有很多主题，但我做了非常深入的研究，我的问题是无论我尝试什么组合，我似乎都无法让重写模块工作..

即使有这样的事情：

```
RewriteRule ^(.*) /index.html [L] 
```

这可能会将每个请愿书重定向到 index.html ，但它什么也没做。

它应该被加载，因为 apache2ctl -M 输出**rewrite_module**正确加载

在调试级别记录错误，我只看到，用户请求不存在的文件，而 Apache 回答“404 文件不存在”错误..

我是服务器管理员，所以我没有使用 .hcaccess，我直接编辑 httpd.conf 文件，所以应该没有覆盖指令问题。

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T22:42:25.223

```
RewriteCond %{HTTP_HOST} ^yourdomain.com
RewriteRule (.*) http://www.yourdomain.com/$1 [R=301,L] 
```

...将用户重定向到索引页面。

# c# - C# 中的隧道 HTTP、HTTPS 和 DNS

> ID：13279475
> 
> 赞同：1
> 
> 时间：2012-11-07T22:36:58.597
> 
> 标签：c#, sockets, https, dns, tunnel

我想要所有网络流量（HTTP、HTTPS 和 DNS - 还有其他的吗？）通过本地应用程序进入服务器应用程序，然后从那里进入互联网。我怎样才能做到这一点？

我已经编写了一个异步 TCP 服务器，并且我知道使用 SocketAsyncEventArgs 在 C# 中进行套接字异步编程（我不是只有一个项目的大师，但我想我可以理解一些基础知识）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T23:24:48.370

做到这一点的唯一方法是编写一个 Windows 网络驱动程序——你不能从用户空间做到这一点。这就是 VPN 的工作方式。

有一些用户级隧道，您可以开发该隧道单个连接，但它们需要用户配置他们的应用程序以首先使用它，因此您不能单方面重定向所有网络活动。

根据您的问题，我猜您对 Winsock 内部或编写内核网络驱动程序不太熟悉，所以现在我要说我认为这超出了您目前的能力水平。

但是，如果您愿意采用一些不纯的方法，您可以轻松实现 SOCKS 代理，但这需要配置浏览器以使用您的代理服务器 - 至少这样您将隧道 HTTP 和 HTTPS，但是我不确定浏览器是否将 SOCKS 服务器用于 DNS，或者是否使用操作系统提供的 DNS 功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T00:22:32.557

像@Dai 建议的那样，使用[SOCKS](http://en.wikipedia.org/wiki/SOCKS)代理。它在传输层*之上*运行，因此可以将 SOCKS 服务器配置为服务于在典型 TCP/UDP 上运行的任何应用程序协议。

这正是 TOR 为屏蔽*所有*流量所做的，而不仅仅是 HTTP。

# analytics - 组合分析

> ID：13279477
> 
> 赞同：1
> 
> 时间：2012-11-07T22:37:05.773
> 
> 标签：analytics

我在 ssas 上有 olap 多维数据集，其中包含所有操作历史数据可以实时运行 拥有 OBIEE 但需要一个平台，该平台可以通过 wrbsitw 上的搜索屏幕帮助设计此类报告，并由用户输入参数

# php - 如何更改日期格式？（二）

> ID：13279482
> 
> 赞同：4
> 
> 时间：2012-11-07T22:37:40.883
> 
> 标签：php, date, yii, format

我正在使用 YII 框架......并且我正在使用以下代码显示我的日期：

```
<?php echo $classified->created_date ?> 
```

问题是它显示如下：2012-11-04 09:34:03

如何删除时间并只显示日期？

如果可能的话，也许可以这样展示：2012 年 1 月 20 日（缩短月份）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T02:37:52.497

你可以使用 Yii 的`CFormatter`类：

```
echo Yii::app()->format->date(strtotime($classified->created_date)); 
```

您可以将 CFormatter 扩展到您自己的类中，然后根据需要格式化日期，您只需要在主配置文件中包含新的组件类。

另一种选择是使用 Yii 的日期解析器和 dateFormatter：

```
echo Yii::app()->dateFormatter->formatDateTime(CDateTimeParser::parse($classified->create_date, 'yyyy-MM-dd'),'medium',null); 
```

有很多方法可以做到这一点……如果你愿意，你可以使用标准的 PHP。唯一的缺点是，如果您决定更改格式，您可能必须更改许多不同的视图：

```
echo date("m/d/Y",strtotime($classified->create_date)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-25T21:20:15.353

```
Yii::app()->dateFormatter->formatDateTime($classified->created_date, 'medium', false); 
```

日期格式的更多例子看这里： [http ://www.yiiplayground.com/index.php?r=InternationalizationModule/datetime/basic](http://www.yiiplayground.com/index.php?r=InternationalizationModule/datetime/basic)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-30T23:59:52.697

这是我对日期问题的解决方案，日期格式化程序对我不起作用

```
<div class="row">
    <?php echo $form->labelEx($model,'fecha_inicio'); ?>
    <?php //echo $form->textField($model,'fecha_inicio'); 
    $this->widget('zii.widgets.jui.CJuiDatePicker',array(
        'name'=>'Eventos[fecha_inicio]',
        // additional javascript options for the date picker plugin
        'options'=>array(
            'showAnim'=>'fold',
            'dateFormat' => 'yy-mm-dd',
            'value' => 'yy-mm-dd',
        ),
        'htmlOptions'=>array(
            'placeholder'=>'Fecha',
        ),
    ));
    ?>
    <?php echo $form->error($model,'fecha_inicio'); ?>
</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T22:43:11.057

使用 php 日期函数。日期（格式，epoch_timestamp）

见这里[http://php.net/manual/en/function.date.php](http://php.net/manual/en/function.date.php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-01T16:38:53.543

当然可以。您应该在下面使用此代码：

```
Yii::app()->dateFormatter->format("dd MMM yyyy", $classified->create_data) 
```

2012 年 1 月 20 日更改格式默认设置表格 2012-11-04 09:34:03

链接到文档/api：

[格式](http://www.yiiframework.com/doc/api/1.1/CDateFormatter#format-detail)

# delphi - Delphi HtmlHelpAPI-如何引导 CHM 文件打开到不同的部分

> ID：13279485
> 
> 赞同：1
> 
> 时间：2012-11-07T22:37:50.093
> 
> 标签：delphi, delphi-xe, chm

我可以通过传递 ShortInteger 并将其转换为 dwData 参数的 Word 来打开 CHM 文件。IE

```
Unit Help;   //this is where the Id's are set with their description
 Interface
 Const

Address_File = 35;  //delphi identifies Address_File as a shortint
etc.. 
```

呼叫获取帮助传递我的 ID

```
GetHelp(Address_File); //call get help pass my ID to open to the Address_File topic 
```

获取帮助程序

```
procedure GetHelp(HelpID : Word);
begin
  Application.HelpFile := ProgramPath + 'help.chm';
  HtmlHelpW(0, PWideChar(Application.HelpFile),HH_HELP_CONTEXT , HelpID);
end; 
```

HtmlHelpW 函数

```
function HtmlHelpW(hwndCaller : HWND; pszFile: PWideChar; uCommand : Integer;
         dwData : DWORD) : HWND; stdcall; external 'hhctrl.ocx' name 'HtmlHelpW'; 
```

当我传递不同的 ShortIntegers 时，我可以在不同的部分初始化帮助文件。但是我无法弄清楚这些值是如何映射的。我希望能够映射到 chm 文件中的某些部分，但与它们关联的短整数或上下文 ID 未记录在程序中或未映射。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T18:49:01.403

Free Pascal 带有一个 chmls.exe 实用程序，它有一个尝试恢复别名（上下文）数据的命令：

```
chmls, a CHM utility. (c) 2010 Free Pascal core.

Usage: chmls [switches] [command] [command specific parameters]

Switches :
 -h, --help     : this screen
 -p, --no-page  : do not page list output
 -n,--name-only : only show "name" column in list output

Where command is one of the following or if omitted, equal to LIST.
 list       <filename> [section number]
            Shows contents of the archive's directory
 extract    <chm filename> <filename to extract> [saveasname]
            Extracts file "filename to get" from archive "filename",
            and, if specified, saves it to [saveasname]
 extractall <chm filename> [directory]
            Extracts all files from archive "filename" to directory
            "directory"
 unblockchm <filespec1> [filespec2] ..
            Mass unblocks (XPsp2+) the relevant CHMs. Multiple files
            and wildcards allowed
 extractalias <chmfilename> [basefilename] [symbolprefix]
            Extracts context info from file "chmfilename"
            to a "basefilename".h and "basefilename".ali,
            using symbols "symbolprefix"contextnr
 extracttoc <chmfilename> [filename]
            Extracts the toc (mainly to check binary TOC)
 extractindex <chmfilename> [filename]
            Extracts the index (mainly to check binary index) 
```

这可能是一个开始，因为至少您会知道哪些页面是使用 ID 导出的，并且 URL 名称可能会提供一些信息。

该实用程序在最近的版本中（确保您获得 2.6.0）并且在 Free Pascal 源代码中也可用，它应该可以通过相对较小的努力转换为 Delphi。

基本上，chmls 工具是由各种测试代码库创建的。测试程序反编译和打印不同 CHM 部分的内容，并在创建帮助文件编译器 chmcmd 时使用，它也是 FPC 的一部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T03:01:55.063

在 Delphi 中，调用帮助文件相当容易。在任何 VCL Forms 应用程序中，您`HelpContext`几乎可以将任何控件的属性设置为唯一的上下文 ID，它对应于帮助文件中的特定主题。帮助文件是使用这些映射编译的，但是当您反编译它时，这些映射不再存在。您必须有权访问原始帮助文件项目才能知道这些 ID。

1.  `HelpContext`帮助文件中对应上下文 ID 的控件集
2.  使用ID`HelpType`的控件集`htContext``HelpContext`
3.  分配`Application.HelpFile`给 CHM 文件的适当位置
4.  在应用程序中按`F1`任意位置时，帮助文件将根据控件或其父控件上的帮助上下文 ID 打开

如果您没有原始项目，并且您不想重新创建它，那么您将有一项很长的任务是遍历帮助文件的上下文 ID。尝试调用从 0 到 1,000 或可能 50,000 的帮助文件，具体取决于它的大小。

我实施的一种做法是在一个名为的指定单元中的一组常量，该单元`HelpConstants.pas`在我们的公共应用程序库中共享。每个常量名称都唯一且简要地描述了它所代表的主题。在启动应用程序时，我将这些上下文 ID 动态分配给它们相应的控件（通常是表单），而 VCL 会负责其余的工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-16T15:07:16.973

我从 [https://github.com/alrieckert/freepascal_arm/blob/master/packages/chm/bin/i386-win32/chmls.exe](https://github.com/alrieckert/freepascal_arm/blob/master/packages/chm/bin/i386-win32/chmls.exe)获得了 Marco 建议的实用程序 （通过选择 View Raw 下载）。我能够从 .chm 帮助文件中提取所有上下文标签，并通过调用 Application->HelpJump() 将我感兴趣的标签添加到我的 C++ Builder 程序中。高温高压

# iphone - 在不丢失先前信息的情况下返回

> ID：13279488
> 
> 赞同：1
> 
> 时间：2012-11-07T22:38:11.700
> 
> 标签：iphone, xcode, storyboard, segue

所以我有两个场景......第一个有 2 个输入文本字段。在进入下一个场景之前，我在第一个字段中输入信息。下一个场景生成信息，我需要在第一个场景中使用这些信息来输入第二个文本字段。每次我回到第一个场景时，第一串信息都会被清除。我不能简单地使用后退按钮，我需要使用 prepareforsegue 所以我很好奇是否有任何方法可以在场景 1 中输入我的文本信息，继续到场景 2（生成其他信息）并继续回到场景 1 而不会丢失之前的信息进入？

我希望这是足够的信息。提前致谢。

已编辑

这是我的一些代码。

inputMilesViewController.h（第一视图）

```
@property  (weak, nonatomic)IBOutlet UIButton *myTodayButton; 
```

（myTodayButton 转为 dvc - 在转之前 myTodayButton.titleLabel.text 等于“TODAY”）

dvc.m（第二视图）

```
- (IBAction)myNewSelectDate:(id)sender {

 inputMilesViewController *classInstance = [[inputMilesViewController alloc] init];

[classInstance changeButtonText:[_myNewDatePicker date]];

[self dismissViewControllerAnimated:YES completion:nil];

 } 
```

inputMilesViewController.m（第一视图）

```
-(void) changeButtonText:(NSDate*) dateForInput{
NSLog(@"The button is titled %@", self.myTodayButton.titleLabel.text);

NSDate *now = [NSDate date];
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
[formatter setDateFormat:@"EEE, MMM d,''yy"];

NSString *formattedDateString = [formatter stringFromDate:dateForInput]; 
```

... ...（在这里我尝试将按钮的文本更改为 formattedDateString 但是 NSLog 指示按钮文本现在为（null）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T05:43:50.283

我同意佩德罗斯的观点。听起来你做错了。您可能正在使用 segue 从 vc1 到 vc2，然后使用另一个 segue 从 vc2 到 vc1 - 这是错误的！这是错误的，因为真正的 segue 创建了一个新的视图控制器实例。所以你不会回到你之前离开的同一个 vc1；相反，你正在制作一个全新的 vc1 并继续这样做！这就是字段为空的原因；这是一个全新的干净视图控制器。

相反，你想做的是做一个真正的转场，然后一个“退出”（或“放松”）转场回来。这是一个新的 iOS 6 功能。我这里有一些例子：

[https://github.com/mattneub/Programming-iOS-Book-Examples](https://github.com/mattneub/Programming-iOS-Book-Examples)

特别是看四个名字以“ch19p560”和“ch19p561”开头的例子。这些展示了如何在你转场时将信息从 vc1 传递到 vc2，然后在你放松时如何将信息从 vc2 传递回同一个 vc1 实例。它们说明了不同程度的展开（例如，跳回几个视图控制器）和在不同的情况下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T02:52:42.770

新编辑

**在顶部添加导入`inputMilesViewController.m`**

```
// At the top with the other #imports
#import "dvc.h" 
```

我还建议在进入 iOS 之前学习面向对象。它的一个关键部分。它并不难，但绝对是必不可少的。

将此代码添加到您的项目中。在`inputMilesViewController.m`添加

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender { 
    [segue.destinationViewController setClassInstance];    
} 
```

在`dvc.h`添加这个：

```
@property (weak, nonatomic) inputMilesViewController *classInstance; 
```

在`dvc.m`添加这个：

```
@synthesize classInstance = _classInstance;

- (IBAction)myNewSelectDate:(id)sender {

    // Removed this line
    //inputMilesViewController *classInstance = [[inputMilesViewController alloc] init];

    [self.classInstance changeButtonText:[self.myNewDatePicker date]];

    [self dismissViewControllerAnimated:YES completion:nil];

 } 
```

因此，正如我在评论中所说，这段代码所做的是将您的字符串提供给原始的 fisrtViewController，而不是您刚刚创建的新字符串。要实现这一点，您需要创建属性`classInstance`并使其成为对原始 viewController 的引用。

快速提示：让你的类名以大写开头，这样你就可以将它们与变量区分开来。所以在这种情况下：`InputMilesViewController`和`Dvc`。

另外，在我看来，您对面向对象编程不是很熟悉。我建议您尝试了解更多关于它和 MVC 模型的信息。两者都是 iOS 编程的关键部分。

如果它仍然不起作用告诉我。

希望能帮助到你。

# c# - 循环复制/克隆流...

> ID：13279489
> 
> 赞同：0
> 
> 时间：2012-11-07T22:38:14.593
> 
> 标签：c#, .net, itextsharp

我在这个循环中基本上做错了什么。第一次通过循环，流工作正常，但随后通过循环失败，流被损坏。我知道可能正在做一些愚蠢的事情。我每次都尝试将 updateTemplate 设置为 0，但 InputStream 不支持搜索。我基本上是在此处将填写的多个表格附加到列表中。任何建议将不胜感激，尤其是那些会带来更好性能的建议。

```
...
files.Add(PDFhelper.fillTemplate(template, mappings));

foreach (Update u in myObject.Updates)
{
    mappings = this.GenerateFieldMappings(u);
    Stream output = new MemoryStream();
    template.CopyTo(output);
    files.Add(PDFhelper.fillTemplate(output, mappings)); //First time stream is good  

}

return PDFhelper.MergeFiles(files);

... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T22:59:44.140

好吧，这是我找到的一个解决方案。虽然，我觉得它不是很有效。它确实完成了工作。

```
files.Add(PDFhelper.fillTemplate(mainTemplate, mappings));
byte[] templateData = updateTemplate.ReadToEnd();

foreach (Update u in myobject.Updates)
{
    mappings = this.GenerateFieldMappings(u);
    MemoryStream output = new MemoryStream();
    output.Write(templateData, 0, templateData.Length);
    output.Position = 0;
    files.Add(PDFhelper.fillTemplate(output, mappings));

 }

 return PDFhelper.MergeFiles(files); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T23:01:46.353

如果`using`在循环结束时添加关键字或添加 output.Dispose() 是否有效？请参阅[此链接](http://social.msdn.microsoft.com/Forums/is/csharpgeneral/thread/b07a3cad-22cc-450c-981e-ea91655a2695)。

```
files.Add(PDFhelper.fillTemplate(template, mappings));

foreach (Update u in myObject.Updates)
{
    mappings = this.GenerateFieldMappings(u);
    using(Stream output = new MemoryStream())
    {
        template.CopyTo(output);
        files.Add(PDFhelper.fillTemplate(output, mappings)); //First time stream is good
    }
}

return PDFhelper.MergeFiles(files); 
```

# java - 将 Weka 模型保存为文本

> ID：13279495
> 
> 赞同：3
> 
> 时间：2012-11-07T22:38:34.073
> 
> 标签：java, machine-learning, data-mining, weka

我想将我的 Weka 分类器模型保存到其他（非 Java）程序可以读取的文件中。Weka wiki 说 Weka 支持通过 PMML 文件导出 XML，但是当我尝试通过资源管理器将模型保存为 PMML 类型时，它会将其保存为非文本格式。是否可以通过 Weka GUI 以某种文本格式保存模型？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T00:19:55.127

我无法在 Weka wiki 中找到据说可以将模型导出到 PMML 的地方。但是，我*确实*找到了几个链接，这似乎表明这不是 Weka 中的功能：

*   [https://list.scms.waikato.ac.nz/pipermail/wekalist/2010-August/049539.html](https://list.scms.waikato.ac.nz/pipermail/wekalist/2010-August/049539.html)
*   [http://old.nabble.com/Weka-models-into-PMML-td15528516.html](http://old.nabble.com/Weka-models-into-PMML-td15528516.html)

诚然，这两个问题都可以追溯到 2 年前，所以从那时起事情很可能发生了变化。然而，在 Google 的快速搜索中，所有链接似乎都指向 Weka 只能使用 PMML 而不能导出的事实。

# ios - 使用 VoiceOver 更改阅读项目的顺序

> ID：13279498
> 
> 赞同：39
> 
> 时间：2012-11-07T22:39:05.383
> 
> 标签：ios, accessibility, voiceover

我在屏幕上有一堆按钮，这些按钮在视觉上直观地定位，但 VoiceOver 并没有以直观的顺序阅读。这是因为某些按钮（例如向上和向下）位于彼此上方和下方。但是，画外音似乎开始从左到右，从上到下阅读。

这导致画外音在“向上”之后读取“向上”右侧的按钮，而不是在之后立即读取“向下”。

如何强制画外音阅读我想阅读的按钮？我应该提一下，我在画外音中使用了滑动到循环元素功能。

我所有的按钮都是 UIView 和 UIButton 的子类版本。这是我使用的按钮启动器的示例。忽略像素数 - 我知道这是不好的形式，但我现在处于紧要关头：

```
UIButton* createSpecialButton(CGRect frame, 
                                 NSString* imageName, 
                                 NSString* activeImageName,
                                 id target,
                                 SEL obClickHandler) 
{
    UIButton* b = [UIButton buttonWithType:UIButtonTypeCustom];
    [b setImage:[GlobalHelper nonCachedImage:imageName ofType:@"png"] 
       forState:UIControlStateNormal];
    [b setImage:[GlobalHelper nonCachedImage:activeImageName ofType:@"png"] 
       forState:UIControlStateHighlighted];
    [b addTarget:target action:obClickHandler forControlEvents:UIControlEventTouchUpInside];    
    b.frame= frame;
    return b;
}

- (UIButton *) createSendButton {
    CGFloat yMarker = 295;

    UIButton* b = createSpecialButton(CGRectMake(160, yMarker, 70, 45),
                                          @"Share_Btn",
                                          @"Share_Selected_Btn",
                                          self,
                                          @selector(sendAction));
    b.accessibilityHint = @"Send it!";
    b.accessibilityLabel = @"Stuff for voiceover to be added";
    [self.view addSubview:b];

    return b;
} 
```

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2015-07-21T20:01:17.147

您可以更改设置视图的 accessibilityElements 数组的顺序：

```
self.view.accessibilityElements = @[self.view1, self.view2, self.view3, self.view4]; 
```

或者

```
self.anotherView.accessibilityElements = @[self.label1, self.txtView1, self.label2, self.txtView2]; 
```

如果您需要以编程方式设置启用交互：

```
[self.view1 setUserInteractionEnabled:YES]; 
```

*如果视图被隐藏，则配音将不会通过它。*

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-11-15T22:41:08.277

最简单的答案是创建一个`UIView`包含按钮的子类，并对来自系统的可访问性调用做出不同的响应。这些重要的电话是：

```
-(NSInteger)accessibilityElementCount
-(id)accessibilityElementAtIndex:
-(NSInteger)indexOfAccessibilityElement: 
```

我已经看过其中一些问题，并且[之前回答过一个](https://stackoverflow.com/a/13133633/927947)问题，但我还没有看到如何重新排序 VoiceOver 焦点的通用示例。因此，这里有一个示例，说明如何创建一个`UIView`子类，通过标签将其可访问的子视图公开给 VoiceOver。

**AccessibilitySubviewsOrderedByTag.h**

```
#import <UIKit/UIKit.h>
@interface AccessibilitySubviewsOrderedByTag : UIView
@end 
```

**AccessibilitySubviewsOrderedByTag.m**

```
#import "AccessibilityDirectional.h"
@implementation AccessibilitySubviewsOrderedByTag {
    NSMutableArray *_accessibilityElements;
}
    //Lazy loading accessor, avoids instantiating in initWithCoder, initWithFrame, or init.
-(NSMutableArray *)accessibilityElements{
    if (!_accessibilityElements){
        _accessibilityElements = [[NSMutableArray alloc] init];
    }
    return _accessibilityElements;
}
// Required accessibility methods...
-(BOOL)isAccessibilityElement{
    return NO;
}
-(NSInteger)accessibilityElementCount{
    return [self accessibilityElements].count;
}
-(id)accessibilityElementAtIndex:(NSInteger)index{
    return [[self accessibilityElements] objectAtIndex:index];
}
-(NSInteger)indexOfAccessibilityElement:(id)element{
    return [[self accessibilityElements] indexOfObject:element];
}
// Handle added and removed subviews...
-(void)didAddSubview:(UIView *)subview{
    [super didAddSubview:subview];
    if ([subview isAccessibilityElement]){
        // if the new subview is an accessibility element add it to the array and then sort the array.
        NSMutableArray *accessibilityElements = [self accessibilityElements];
        [accessibilityElements addObject:subview];
        [accessibilityElements sortUsingComparator:^NSComparisonResult(id obj1, id obj2){
            // Here we'll sort using the tag, but really any sort is possible.
            NSInteger one = [(UIView *)obj1 tag];
            NSInteger two = [(UIView *)obj2 tag];
            if (one < two) return NSOrderedAscending;
            if (one > two) return NSOrderedDescending;
            return NSOrderedSame;
        }];
    }
}
-(void)willRemoveSubview:(UIView *)subview{
    [super willRemoveSubview:subview];
    // Clean up the array. No check since removeObject: is a safe call.
    [[self accessibilityElements] removeObject:subview];
}
@end 
```

现在只需将您的按钮包含在此视图的一个实例中，并将按钮上的标记属性设置为本质上是焦点顺序。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2017-07-18T07:03:18.730

在 Swift 中你只需要设置视图的`accessiblityElements`数组属性：

`view.accessibilityElements = [view1, view2, view3]`// 你想要的订单

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-02-09T16:27:04.063

我知道这是一个旧线程，但我发现最简单的方法是将 UIView 子类化（Swift 3）。然后只需将情节提要中的主要 UIView 类型修改为`AccessibiltySubviewsOrderedByTag`并更新您要按顺序阅读的每个子视图中的标签。

```
class AccessibilitySubviewsOrderedByTag: UIView {

    override func layoutSubviews() {

        self.accessibilityElements = [UIView]()
        for accessibilitySubview in self.subviews {
            if accessibilitySubview.isAccessibilityElement {
                self.accessibilityElements?.append(accessibilitySubview)
            }
        }
        self.accessibilityElements?.sort(by: {($0 as AnyObject).tag < ($1 as AnyObject).tag})
    }
} 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-08-12T17:10:09.097

这并没有直接回答原始问题，但它回答了问题的标题：

当我希望 VoiceOver 向下滑动列时，我一直在使用包含视图来`shouldGroupAccessibilityChildren`设置列。

我希望我早点知道这一点，因为将容器追溯插入自动布局情况可能会很痛苦……</p>

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-12-22T18:44:05.240

我尝试了[韦斯利](https://stackoverflow.com/a/31548554/156210)设置数组的答案，`accessibilityElements`但它对我不起作用。

Apple 有一些文档[Enhancing the Accessibility of Table View Cells](https://developer.apple.com/library/ios/documentation/UserExperience/Conceptual/TableView_iPhone/TableViewCells/TableViewCells.html#//apple_ref/doc/uid/TP40007451-CH7-SW5) with an example in code。基本上，您将单元格（父视图）的可访问性标签设置为子视图的可访问性标签的值。

```
[cell setAccessibilityLabel:[NSString stringWithFormat:@"%@, %@", cityLabel, temperatureLabel]]; 
```

这对我有用。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-02-16T13:06:43.920

我认为你可以在故事板中做到这一点。VoiceOver 顺序由文档大纲中视图的顺序决定。

只需以正确的顺序拖放视图层次结构中的视图即可。

编辑：

对不起，我不能发布截图，直到 10 声望。在情节提要中，文档大纲是左侧列出您的场景及其子视图的区域。在这里，子视图按顺序排列在彼此的下方。当您更改此顺序时，VoiceOver 的阅读顺序将发生变化。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-06-01T08:01:44.083

Swift5 你可以设置视图的 accessiblityElements 数组属性：
当父视图是 UIStackView 时也有效

`view.accessibilityElements = [view1, label2, button3...]`// 你想要的订单

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-09-02T07:41:42.330

我昨天找到了一个方便的方法。类似于@TejAces 的回答。制作一个新的 swift 文件，然后将这些内容复制到其中。

```
import UIKit

extension UIView {
    func updateOrder(_ direction: Bool = true) {
        var tempElements: [Any]? = [Any]()
        let views = (direction) ? subviews : subviews.reversed()
        for aView in views {
            tempElements?.append(aView)
        }
        accessibilityElements = tempElements
    }
}

class ReorderAccessibilityByStoryBoardView: UIView {
    override func didAddSubview(_ subview: UIView) {
        updateOrder()
        super.didAddSubview(subview)
    }
} 
```

将 UIView（包含要重新排序的视图）的类设置为 ReorderAccessibilityByStoryBoardView。然后您可以通过重新排序故事板的视图列表来重新排序它们。

[![查看列表](../Images/9603e46f27625f6697b244eebae3199e.png)](https://i.stack.imgur.com/e2Gp0.png)

因为子视图不包含StackView/ScrollView中的视图，所以需要在这个文件中创建一个独立的类。比如下面的 ReorderAccessibilityByStoryBoardStackView。

```
class ReorderAccessibilityByStoryBoardStackView: UIStackView {
    override func didAddSubview(_ subview: UIView) {
        updateOrder(false)
        super.didAddSubview(subview)
    }
} 
```

使用这些代码，您还可以通过按特定顺序添加视图来重新排序代码中添加的视图。

# objective-c - 返回第一个视图控制器后内容移动

> ID：13279501
> 
> 赞同：2
> 
> 时间：2012-11-07T22:39:22.153
> 
> 标签：objective-c, xcode, uiviewcontroller, uiscrollview, navigationcontroller

我在导航控制器中有 2 个视图控制器。

在第一个视图控制器中，我有一个 UIButton 打开第二个视图控制器。

当第二个 viewController 加载时，我可以看到屏幕左上角的“后退”按钮。

现在，当我回到第一个 viewController 时，内容比上次高一些。

像下一张图片[http://imperiosweb.com/tmp/sample.png](http://imperiosweb.com/tmp/sample.png)

现在，第一个 ViewController 有一个包含内容的 UIScrollView。

第一视图控制器.h

```
...
@interface FirstViewController : UIViewController{
    IBOutlet UIScrollView *Scroller;
}
@property (weak, nonatomic) IBOutlet UIScrollView *Scroller;
... 
```

第一视图控制器.m

```
...
@implementation FirstViewController
...
@synthesize Scroller  = _scroller;
...

- (void)viewDidLoad
{
  [self.Scroller setBounces:YES];
  ...
} 
```

我不知道是滚动视图的中心还是其他什么，我试图设置中心，工作但没有修复问题（内容移动）

```
- (void)viewDidAppear:(BOOL)animated {

    [self.view setCenter:self.Scroller.center];
    self.Scroller.frame = CGRectMake(0,0,320,416);
    self.Scroller.contentSize = CGSizeMake(320, (550 + self.Scroller.contentOffset.y));
    [self.Scroller setCenter:(CGPointMake(160.0,208.0))];

} 
```

我可以做些什么来修复第一次（应用程序刚刚启动）的内容？

谢谢！

# javascript - Javascript 跨域 WCF 自托管限制

> ID：13279502
> 
> 赞同：1
> 
> 时间：2012-11-07T22:39:28.900
> 
> 标签：javascript, xml, wcf, soap, cross-domain

我有一个有点独特的问题。我有一个静态 HTML 和 Javascript 页面，需要从 Javascript 调用 Web 服务。此 WCF Web 服务将作为 Windows 服务自托管在单独的服务器上。由于跨域限制，我在尝试在 javascript 页面和 Web 服务之间进行通信时遇到了问题。我已经看到了一些关于如何解决此问题的示例，但是由于我的网页将是静态的并且不是从 IIS 提供的，所以我不确定如何去做。

我在下面附上了我的一些代码。任何帮助，将不胜感激。

**应用程序配置**

```
<?xml version="1.0"?>
<configuration>

  <configSections>
  </configSections>
  <connectionStrings>
    <add name="test.XKORE.MobileDeviceServices.Properties.Settings.ConnectionString"
      connectionString="Data Source=tester;Initial Catalog=test;User ID=testc;Password=testp" />
  </connectionStrings>
  <system.web>
    <compilation debug="true"/>
  </system.web>
  <!-- When deploying the service library project, the content of the config file must be added to the host's 
  app.config file. System.Configuration does not support config files for libraries. -->
  <system.serviceModel>
    <services>
      <service name="test.XKORE.MobileDeviceServices.XKOREMobileService" behaviorConfiguration="XKOREMobileServiceBehavior">
        <host>
          <baseAddresses>
            <add baseAddress="http://localhost:8523/test/XKORE/XKOREMobileService" />
          </baseAddresses>
        </host>
        <endpoint address="" binding="basicHttpBinding" contract="test.XKORE.MobileDeviceServices.IXKOREMobileService" bindingNamespace="http://test.XKORE.MobileDeviceServices" />
        <endpoint address="mex" binding="mexHttpBinding" contract="test.XKORE.MobileDeviceServices.IXKOREMobileService" bindingNamespace="http://test.XKORE.MobileDeviceServices" />

      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior name="XKOREMobileServiceBehavior">
          <serviceMetadata httpGetEnabled="true"/>
          <serviceDebug includeExceptionDetailInFaults="false"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel>

<startup><supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/></startup></configuration> 
```

**界面**

```
[ServiceContract]
    public interface IXKOREMobileService
    {
        [OperationContract]
        string GetChartData();

        // TODO: Add your service operations here
    } 
```

**SOAP 请求**

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
  <s:Header>
    <Action s:mustUnderstand="1" xmlns="http://schemas.microsoft.com/ws/2005/05/addressing/none">http://tempuri.org/IXKOREMobileService/GetChartData</Action>
  </s:Header>
  <s:Body>
    <GetChartData xmlns="http://tempuri.org/" />
  </s:Body>
</s:Envelope> 
```

**Javascript（不工作）**

```
var response = BuildSOAPMessage('GetChartData');
alert(response);

function BuildSOAPMessage (func) {
    var xmlhttp = new XMLHttpRequest();
    xmlhttp.open("POST", "http://localhost:8523/test/XKORE/XKOREMobileService", false);

    var msg = '';
    msg += '<?xml version="1.0" encoding="utf-8"?>'
    msg += '<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:tem="http://tempuri.org/">'
    msg += '<soapenv:Header/>'
    msg += '<soapenv:Body>'
    msg += '<tem:' + func + '/>'
    msg += '</soapenv:Body>'
    msg += '</soapenv:Envelope>'
    alert (msg);

     // Send the POST request
     xmlhttp.setRequestHeader('Content-Type', 'text/xml');
     xmlhttp.setRequestHeader("SOAPAction", "http://tempuri.org/IXKOREMobileService/GetJSONChartData");
     xmlhttp.send(msg);

    return xmlhttp.responseXML;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T07:35:00.937

您的问题不是唯一的......由于 CORS，对您的 WS 的调用失败了。

因此，您必须通过实现[IDispatchMessageInspector](http://msdn.microsoft.com/en-us/library/system.servicemodel.dispatcher.idispatchmessageinspector.aspx)在您的 WS 中设置 HTTP 标头“Access-Control-Allow-Origin” ：

```
public void BeforeSendReply(ref Message reply, object correlationState)
{
    var httpResponse = reply.Properties["httpResponse"] as HttpResponseMessageProperty;
    if (httpResponse != null)
    {
        //CORS
        httpResponse.Headers["Access-Control-Allow-Origin"] = "*";
    }
} 
```

# lambda - 在 Prolog 对列表中查找键

> ID：13279503
> 
> 赞同：2
> 
> 时间：2012-11-07T22:39:30.967
> 
> 标签：lambda, prolog

我目前有一个（键，值）对列表，我想提取所有键以在另一个函数中使用。

这样我就有一个名为

```
PairsList 
```

我想

```
retractall(map(Key,_). 
```

我努力了：

```
retractall(map(PairsList[(Key,_)],_). 
```

但这只会引发语法错误。

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T00:37:19.647

[收回](http://www.swi-prolog.org/pldoc/doc_for?object=retractall/1)它是一个强大的 Prolog 记忆工具，对动态信息管理很有用，但重要的是不要滥用它。在你的问题中，似乎无关紧要。如果您有对 (Key,Value) 的列表，那么

*   如果你可以使用 SWI-Prolog，有这个有趣的库（[pairs](http://www.swi-prolog.org/pldoc/doc_for?object=section%282,%27A.18%27,swi%28%27/doc/Manual/pairs.html%27%29%29)）。而不是`(A,B)`uses `A-B`，但对于表示更改，您会获得很多。使用该库，您将使用的内置函数是[pairs_keys](http://www.swi-prolog.org/pldoc/man?predicate=pairs_keys/2) (Pairs, Keys)

*   没有任何库，函数（但它是一个关系，*而不是*函数）很容易用纯 Prolog 编写。

    ```
    键（[（键，_）|对]，[键|键]）：-键（对，键）。
    键（[]，[]）。

    ```

*   我认为最好的方法是使用库中的 maplist（[apply](http://www.swi-prolog.org/pldoc/doc_for?object=section%282,%27A.2%27,swi%28%27/doc/Manual/apply.html%27%29%29)）和一个非常简单的谓词：

    ```
    键（对，键）：- maplist（键，对，键）。
    键（（K，_），K）。

    ```

    请注意，这样我们可以重用从“实际”对表示中抽象出来的逻辑：只需添加

    ```
    键（K - _，K）。
    ```

    处理首选的 Prolog 方式

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T00:13:17.243

如果你使用 SWI-Prolog 和 module(lambda)，你可以写

```
maplist(\X^Y^(X = (Y,_)), L, L1), 
```

例如这段代码：

```
:- use_module(library(lambda)).

t(L, L1) :-
    maplist(\X^Y^(X = (Y,_)), L, L1). 
```

给

```
?- t([(1,a), (2,b), (3,c)], L).
L = [1,2,3]. 
```

# javascript - 从 $scope 之外访问集合

> ID：13279504
> 
> 赞同：2
> 
> 时间：2012-11-07T22:39:43.703
> 
> 标签：javascript, angularjs

好的..我试过 angular.js。太棒了。我印象深刻。我可以得到绑定和东西..酷。现在，如果我需要从 $scope 之外访问我的数据怎么办？假设我有一个 signalR 集线器，它发送一些数据和拦截该数据的函数，应该添加一个新项目或修改现有项目。我怎么做？你能告诉我这个例子如何`$scope.twitterResult`从`click`句柄访问吗？

```
<script>
    angular.module('Twitter', ['ngResource'])

    function TwitterCtrl($scope, $resource){
        $scope.twitter = $resource('http://search.twitter.com/:action',
        {action: 'search.json', q: 'obama', callback:'JSON_CALLBACK'},
        {get:{method:'JSONP'}});
        $scope.doSearch = function(){
        $scope.twitterResult = $scope.twitter.get();
      }
    }

    $(function(){
      $('#addItem').click(function(){
           // add a row to $scope.twitterResult
      });
   });
</script>

<body>
   <div data-loading></div>
    <div ng-controller='TwitterCtrl' ng-init="doSearch()">
        <ul>
           <li ng-repeat='tweet in twitterResult.results'><p> {{tweet.text}}</p></li>
         </ul>
    </div>
</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T05:57:20.677

更好的方法是将您的“信号集线器”包装在 AngularJS 服务中。看看我关于[在 AngularJS 中使用 Web 套接字的](http://briantford.com/blog/angular-socket-io.html)博文，特别是“与 Socket.IO 交互”。

你为什么写：

```
$(function(){
  $('#addItem').click(function(){
       // add a row to $scope.twitterResult
  });
}); 
```

而不仅仅是使用`ng-click`? 这是一些第 3 方代码或小部件吗？在此之前，我会尽力为您提供更好的建议并编写一些示例代码。

如果你必须注册一个事件处理程序，你应该通过一个[指令](http://docs.angularjs.org/guide/directive)来注册。否则，当您开始管理这些外部事件绑定的生命周期时，事情会变得复杂。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T23:15:02.623

一般的答案是：你不只是从外面弄乱范围。

但是您的要求是真实的。

所以为了做你想做的事，你需要在范围外和范围本身之间建立通信。

最简单的方法是将 $scope 导出到窗口并对其进行处理，从外部侵入范围。你永远不应该这样做。有龙。

范围应保持其内部状态。

我不完全熟悉，`angular`但你可以做一些事情：

```
function TwitterCtrl($scope, $resource) {
    // ...

    $('body').bind('newTweetsArrived', data) {
         // data contains the new tweets

         // the decision to accept or not new tweets is made within the control
         if (in_the_mood_to_accept_new_tweets) {
             // add new tweets to the $scope.twitterResult
         }

         // optionally notify other components that new tweets are accepted
         // so that they can adjust or whatever
         $('body').trigger('afterNewTweetsArrived');
    }

}

// you add new tweets by triggering global custom event
$(function(){
    $('#addItem').click(function(){
       $('body').trigger('newTweetsArrived', { ...here_are_the_tweets... });
    });
}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-07T23:01:27.013

你可能会做这样的事情，但我不确定这是否是最好的主意：

```
var myTwitterScope;
angular.module('Twitter', ['ngResource'])

function TwitterCtrl($scope, $resource){
    $scope.twitter = $resource('http://search.twitter.com/:action',
    {action: 'search.json', q: 'obama', callback:'JSON_CALLBACK'},
    {get:{method:'JSONP'}});
    $scope.doSearch = function(){
        myTwitterScope = $scope;
        $scope.twitterResult = $scope.twitter.get();
    }
}

$(function(){
    $('#addItem').click(function(){
        // add a row to $scope.twitterResult
        myTwitterScope.twitterResult.push(...); // or however you would do this.
    });
}); 
```

正如其他人所提到的，这不是最干净的解决方案。

# android - Android 多个画布层

> ID：13279505
> 
> 赞同：1
> 
> 时间：2012-11-07T22:39:46.193
> 
> 标签：android, view, imageview, ondraw

我正在尝试学习 android 并编写了一些简单的图形绘图功能，我设法使捏缩放工作，但不幸的是，当它缩放包括轴在内的整个画布缩放时。我真正想要的是在缩放时仍然显示轴，有没有一种简单的方法可以使用 sme 分层技术在 android 中实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T01:35:41.723

Canvas 具有用于保存和恢复画布矩阵的 save() 和 restore() 函数。

1.  以正常比例绘制轴
2.  调用 canvas.save() 推送当前状态。
3.  缩放和绘制情节。
4.  调用 canvas.restore() 返回之前的状态。

# java - 随机数，非均匀分布

> ID：13279509
> 
> 赞同：2
> 
> 时间：2012-11-07T22:40:03.337
> 
> 标签：java, random

> **可能重复：**
> [生成密度不均匀的随机数](https://stackoverflow.com/questions/4908811/generate-random-number-with-non-uniform-density)

我尝试识别/创建一个函数（在 Java 中），它给我一个非均匀分布的数字序列。如果我有一个函数说它`function f(x), and x>0`会给我一个从`0`to的随机数`x`。

**最适用于任何给定的功能`x`，下面这只是我想要的一个示例。**

但是，如果我们说`x=100`该函数`f(x)`将返回 s nonunifrom 分布式。

我想例如说

`0 to 20`大约占所有情况的 20%。

`21 to 50`大约占所有情况的 50%。

`51 to 70`大约占所有情况的 20%。

`71 to 100`大约是所有情况的 10。

简而言之，这给了我一个像正态分布这样的数字，在这种情况下它`x`是30-40 `100`。

[http://en.wikipedia.org/wiki/Normal_distribution](http://en.wikipedia.org/wiki/Normal_distribution)

（如果需要，我可以使用一个统一的随机生成作为分数，并且只有一个可以从统一结果转换为非统一结果的函数。）

**编辑**

我对这个问题的最终解决方案是：

```
/**
 * Return a value from [0,1] and mean as 0.3, It give 10% of it is lower
 * then 0.1\. 5% is higher then 0.8 and 30% is in rang 0.25 to 0.45
 *
 * @return
 */
public double nextMyGaussian() {
    double d = -1000;
    while (d < -1.5) {
        // RANDOMis Java's normal Random() class.
        // The nextGaussian is normal give a value from -5 to +5?
        d = RANDOM.nextGaussian() * 1.5;
    }
    if (d > 3.5d) {
        return 1;
    }
    return ((d + 1.5) / 5);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T22:49:00.470

一个简单的解决方案是生成 0 到 9 之间的第一个随机数。

0 表示前 10 个百分比，1 表示后面的 10 个百分比，依此类推。

因此，如果你得到 0 或 1，你会生成第二个介于 0 和 20 之间的随机数。如果你得到 2、3、4、5 或 6，你会生成第二个介于 21 和 50 之间的随机数，依此类推。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T23:04:25.827

你能写一个函数，将1-X范围内的随机数相加并取平均值吗？随着 n 的增加，这将趋于正态分布

看：

[在 C/C++ 中按照正态分布生成随机数](https://stackoverflow.com/questions/2325472/generate-random-numbers-following-a-normal-distribution-in-c-c)

我破解了以下内容：

```
class CrudeDistribution {

    final int TRIALS = 20;

    public int getAverageFromDistribution(int upperLimit) {
        return getAverageOfRandomTrials(TRIALS, upperLimit);
    }

    private int getAverageOfRandomTrials(int trials, int upperLimit) {
        double d = 0.0;
        for (int i=0; i<trials; i++) {
            d +=getRandom(upperLimit);
        }
        return (int) (d /= trials);
    }

    private int getRandom(int upperLimit) {
        return (int) (Math.random()*upperLimit)+1;
    }
} 
```

Commons-Math 中有一些库可以根据均值和标准差（测量分布）生成分布。并在链接中执行此操作的一些算法。

可能是一个有趣的小时寻找相关的 2 班轮：

[https://commons.apache.org/math/userguide/distribution.html](https://commons.apache.org/math/userguide/distribution.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T22:50:47.090

一种解决方案是做一个 1-100 之间的随机数，并根据结果在适当的范围内做另一个随机数。

1-20 -> 0-20

21-70 -> 21-50

71-90 -> 51-70

91-100 -> 71-100

希望这是有道理的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T23:09:33.507

您需要先创建 f(x)。

假设值 x 是等概率的，您的 f(x) 是

```
double f(x){
if(x<=20){
 return x;
}else if (x>20 && x<=70){
 return (x-20)/50*30+20;
} else if(... 
```

ETC

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-07T23:10:50.913

只需生成一堆，例如至少 30 个，介于 0 和 x 之间的均匀随机数。然后取它们的平均值。根据中心极限定理，平均值将是来自以 x/2 为中心的正态分布的随机数。

# python - Python - 在调用类方法时从父类访问子类的变量

> ID：13279510
> 
> 赞同：2
> 
> 时间：2012-11-07T22:40:14.900
> 
> 标签：python, oop, class, static

我正在尝试构建一种“迷你 django 模型”，用于在不使用 norel Django 的 dist 的情况下使用 Django 和 MongoDB（我不需要这些的 ORM 访问权限......）。

所以，我想做的是模仿django默认模型的标准行为或“实现”......这就是我到目前为止所得到的：

文件“models.py”（基础）

```
from django.conf import settings
import pymongo

class Model(object):
    @classmethod
    def db(cls):
        db = pymongo.Connection(settings.MONGODB_CONF['host'], settings.MONGODB_CONF['port'])

    @classmethod
    class objects(object):
        @classmethod
        def all(cls):
            db = Model.db() #Not using yet... not even sure if that's the best way to do it
            print Model.collection 
```

文件“mongomodels.py”（实现）

```
from mongodb import models

class ModelTest1(models.Model):
    database = 'mymongodb'
    collection = 'mymongocollection1'

class ModelTest2(models.Model):
    database = 'mymongodb'
    collection = 'mymongocollection2' 
```

文件“views.py”（视图）

```
from mongomodels import ModelTest1, ModelTest2

print ModelTest1.objects.all() #Should print 'mymongocollection1'
print ModelTest2.objects.all() #Should print 'mymongocollection2' 
```

问题是它不是从 ModelTest1 访问变量，而是从原始模型访问变量......怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T22:46:25.760

您必须为`objects`包含它的类提供某种链接。目前，您只是对其进行硬编码以使用`Model()`s 属性。因为您没有实例化这些类，您将不得不使用装饰器或元`object`类在`Model()`.

# java - 如何读取没有大括号的循环？

> ID：13279511
> 
> 赞同：2
> 
> 时间：2012-11-07T22:40:17.147
> 
> 标签：java, for-loop, while-loop

我正在尝试阅读此代码的输出，但这对我来说根本没有意义。

即使在得知没有大括号的循环仅循环通过第一行之后，输出仍然毫无意义。有些数字可以，但有些数字却没有。

我的代码：

```
int n = 8;
int i = 1;
int j = 1;

j = n + 2;

System.out.println (n + " " + i + " " + j );

while (n > 1)
{
    n = n/2;
    for (i = 2; i <= n; i = i+2)
        System.out.println (n + " " + i + " " + j );

    j++;
}
System.out.println (n + " " + i + " " + j ); 
```

它输出：

```
8 1 10
4 2 10
4 4 10
2 2 11
1 2 13 
```

我得到 8-1-10 和 4-2-10

但在那之后的任何事情，我都很难过，我不明白计算机是如何计算其余部分的。

有人介意和我一起逐步完成其余的输出吗？

提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-07T22:41:24.460

没有大括号意味着循环只影响循环后面的下**一条语句**。

所以

```
for (i = 2; i <= n; i = i+2)
System.out.println (n + " " + i + " " + j ); 
```

相当于

```
for (i = 2; i <= n; i = i+2)
{
    System.out.println (n + " " + i + " " + j );
} 
```

通常，在这些情况下使用缩进以使代码更易于理解，如下所示：

```
for (i = 2; i <= n; i = i+2)
    System.out.println (n + " " + i + " " + j ); 
```

**编辑：**现在，这是问题的实际答案。这完全取决于循环执行的不同迭代以及变量如何递增。

```
int n = 8;
int i = 1;
int j = 1;

j = n + 2; //This means that j takes the value 10.

System.out.println (n + " " + i + " " + j ); // 8 1 10 So far, so good. 
```

现在，继续迭代：

```
while (n > 1)
{
    n = n/2;
    for (i = 2; i <= n; i = i+2)
        System.out.println (n + " " + i + " " + j );

    j++;
} 
```

对于第一次迭代，我们有，`n=8 i=1 j=10`所以循环发生了。`n > 0``true`

```
n = n / 2; //n = 4 
```

然后，`for`（请注意，它只是将值分配`2`给`i`）：

```
for (i = 2; i <= 4; i = i+2) //Since n = 4 
```

由于`n = 4`，唯一`i`可以取的值是`2`和`4`，那么打印结果是：

```
4 2 10
4 4 10 
```

之后，`j`加一，使其成为`j = 11`。的条件`while`再次满足，因为`n = 4`。`n = n/2`使得`n`取值`2`，所以它进入`while again`. 让我们再看一下for：

```
for (i = 2; i <= 2; i = i+2) //Since n = 2 
```

这一次，唯一`i`可以采用`2`的值是（请注意，在开始迭代时，值`i`会再次重置`2`），这就是您得到的打印结果。

```
2 2 11 
```

在再次迭代之前， make`j++`具有`j`值`12`。

在最后一次迭代`n = n/2`中，`n = 1`由于 n 是 an `int`，但这是在 while 内完成的，所以它再次进入。现在`n = 1`循环看起来像这样：

```
for (i = 2; i <= 1; i = i+2) //Since n = 1 
```

`i`设置为`2`并且不满足 for 的条件 ( `2 <= 1`is `false`)。然后这次没有打印，但在while结束时`j`递增。`13`

在下一次迭代中`n = 1`，这意味着`while`不满足 ' 条件，因此迭代中断。最后你有`n = 1`,`i = 2`和`j = 13`。那是你得到的最后一张照片。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T22:51:51.340

您以 n = 8、i = 1 和 j = 10 开始 while 循环。

```
start while: (n=8 > 1) is true
n = 4
i = 2 (i <= 4, so do for loop, then change i to i+2=4)
print 4,2,10
i = 4 (i <= 4, so do for loop again, then i = i+2 = 6
print 4,4,10
i = 6 (i <= 4 is false, so exit for)
j++ so j becomes 11

next while:
n = n/2 = 2
i = 2 (i <= 2, so do for loop, then change i to i+2=4)
print 2,2,11
i = 4 (i <= 2 is false, so exit for)
j++ -> j = 12

next while:
n = n/2 = 1
i = 2 (i <= 1 is false, so exit loop)
j++ -> j = 13

exit while.
Final print= n = 1, i = 2 (value assigned in last for loop, loop doesn't get executed so i doesnt get incremented by 2), and j = 13 
```

希望这可以帮助 ：）

# c++ - 在 C++ 中创建指针类型的 STL 队列

> ID：13279513
> 
> 赞同：0
> 
> 时间：2012-11-07T22:40:22.703
> 
> 标签：c++, pointers, stl, queue

我似乎不太明白为什么这不起作用。我试图创建一个指针类型队列，但失败了。我有一个教室，我想制作一个指向房间的指针队列..所以我做了：

```
queue<*Room> bfsRooms; 
```

这给了我错误：

> `*' 不能出现在常量表达式中

这是否意味着不可能创建一个 STL 指针队列？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-07T22:42:24.667

不，应该没问题，您应该真正链接确切的代码和确切的错误，以便我们可以更好地帮助您。

也就是说，指针队列看起来像这样：

```
 Room r;
 std::queue<Room*> rooms;
 rooms.push(&r); 
```

编辑：值得注意的是，如果这些指针拥有它们指向的对象，则应该真正将指针封装在智能指针中，例如：

```
std::queue<std::unique_ptr<Room>> rooms; 
```

这遵守了RAII原则，会自动清理资源。

# bash - Bash shell：如何添加名称

> ID：13279516
> 
> 赞同：1
> 
> 时间：2012-11-07T22:40:42.247
> 
> 标签：bash, shell, rename

我正在尝试使用 _orig 重命名 bash 中的一些 zip 文件，但我似乎遗漏了一些东西。有什么建议么？？

我的目标：

*   将文件移动到原始目录
*   重命名名称中带有“_orig”的原始文件

我尝试编写的代码：

```
mv -v  $PICKUP/*.zip $ORIGINALS
for origfile in $(ls $ORIGINALS/*.zip);do
    echo "Adding _orig to zip file"
    echo
    added=$(basename $origfile '_orig').zip
    mv -v $ORIGINALS/$origfile.zip $ORIGINALS/$added.zip
done 
```

抱歉，这还是有点新意。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T22:43:05.347

使用 (p) 重命名：

```
cd <ZIP DIR>
mkdir -p orig
rename 's@(.*?)\.zip@orig/$1_orig.zip@' *.zip 
```

`rename`是[http://search.cpan.org/~pederst/rename/](http://search.cpan.org/~pederst/rename/)（许多发行版的默认设置）

感谢从不使用

```
for i in $(ls $ORIGINALS/*.zip);do 
```

但使用*glob*代替：

```
for i in $ORIGINALS/*.zip;do 
```

请参阅[http://porkmail.org/era/unix/award.html#ls](http://porkmail.org/era/unix/award.html#ls)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T03:10:39.473

我知道您已经有了解决方案，但只是为了后代，您自己的 shell 脚本的这个简化版本也应该适用于您似乎描述的情况：

```
mkdir -p "$ORIGINALS"
for file in "$PICKUP"/*.zip; do
    mv -v "$file" "$ORIGINALS/${file%.zip}_orig.zip"
done 
```

这利用了 bash 中的“参数扩展”（您可以在 bash 的手册页中查找）。初始`mkdir -p`只是确保目标目录存在。引号`$PICKUP`和`$ORIGINALS`旨在确保在目录名称中包含空格和换行符等特殊字符是安全的。

虽然`prename`它是解决许多问题的强大解决方案，但它肯定不是工具箱中唯一的锤子。

# php - 我可以运行单个 SELECT 而不是两个嵌套来链接两个表，省略重复项，如果它们匹配则返回值？MySQL / PHP

> ID：13279518
> 
> 赞同：1
> 
> 时间：2012-11-07T22:40:46.277
> 
> 标签：php, mysql, mysqli

这里总 n00b，第一次发帖，所以请有建设性！我买了一本书来自学 PHP / MySQL——不幸的是，这本书没有得到普遍的赞扬——所以我的进步有点不稳定。

我有两个要链接的表。我想显示表 1 中保存的所有信息（我们称之为记录），但只显示一次。然后，我想检查 Records 中的每个项目是否与表 2 (UserTable) 中的特定字段匹配，如果匹配，则显示一个勾选的复选框，如果不匹配，则显示一个空复选框。

我迄今为止遇到的问题是仅显示记录中存在匹配项的项目，或者显示记录中每个项目的多个实例，其中存在多个匹配项。我已经用下面的代码解决了这些问题 - 但我一直认为必须有更好的方法来做到这一点，也许只有一个链接？

无论如何，这里有一些代码摘录：

```
$sql = "SELECT * FROM Records";
$res = mysqli_query($mysqli,$sql);

while ($iteminfo = mysqli_fetch_array($res, MYSQLI_ASSOC)) {
$recordid2 = $iteminfo['record_id']; 
```

我省略了从 Records 中提取相关数据并开始构建表的部分，然后：

```
$sql2 = "SELECT COUNT(*) AS matches FROM UserTable 
where usertable.item = '$recordid2' and User_ID = '$current_user_id'";

$res2 = mysqli_query($mysqli, $sql2);
$matches = mysqli_fetch_array($res2, MYSQLI_ASSOC);
$matches2 = $matches['matches'];

if ($matches2) {
        $output = "<input type='checkbox' name='test' checked>"; } else {
        $output = "<input type='checkbox' name='test'>"; 
```

正如我所说，这可行，但感觉有点笨拙 - 我正在为 Records 中的每个项目运行一个单独的嵌套查询，随着时间的推移，它可能会变得非常慢。有没有一种方法可以针对整个查询运行单个查询，该查询会根据 UserTable 中是否存在匹配项来遍历所有行信息（一次）和 0 或 1？我试过使用 DISTINCT 但无法让它工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T22:54:21.677

这个怎么样：

```
SELECT * FROM Records
LEFT JOIN (
    SELECT usertable.item, COUNT(User_ID) AS matches FROM UserTable
    WHERE User_ID = '$current_user_id'
    GROUP BY usertable.item
) as UserTable ON record_id = usertable.item 
```

这将获取所有记录，并且仅获取 UserTable 中给定用户 ID 的匹配行（更改用户 ID 以获取不同用户的详细信息）。

如果 Record 中存在行，但 UserTable 中不存在匹配行，则“matches”将为 NULL。否则它应该是一个大于零的数值。

只需在 PHP 中运行它来处理复选框的内容。（它检查大于零的匹配，只有找到，才会打印出“checked”属性）

```
<input type="checkbox" name="test" <?=((int)$record['matches'] > 0) ? 'checked="checked"' : ''; ?> /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T22:55:05.027

做得很好，因为注意到这种方法很笨拙。花一些时间看一下 SQL 语言并更好地理解它。特别是您想学习如何加入。可能是 INNER JOIN。其他类型有 FULL OUTER JOIN、LEFT OUTER JOIN 和 RIGHT OUTER JOIN。

我建议不要在程序代码中加入，而是在 SQL 中加入。然后对数据库进行一次调用，例如

```
select records.field1, records.field2, matches.field1, matches.field2
from records
   , matches
where records.field = matches.field; 
```

玩这个查询，直到你得到你想要的结果，然后从 PHP 调用它

```
$sql = <query from above>
$res = mysqli_query($mysqli,$sql); 
```

这样做的一个好处是 SQL 语言是相当可移植的。Access to Oracle 的所有内容都使用类似的语法。无论您使用哪种程序语言（PHP、.NET 等），您都可以使用这些知识

祝你好运。

# python - 在 vim 中自动插入标题

> ID：13279520
> 
> 赞同：9
> 
> 时间：2012-11-07T22:40:54.273
> 
> 标签：python, command-line, vim

当我在 vim 中打开一个新文件时，有没有办法自动添加标题？`"#! /usr/bin/python"`我的目标是在我使用命令打开一个新文件时自动添加 shebang `"vim test.py"`。如果文件已经存在，则不应插入任何标题。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-11-07T22:46:13.330

在配置文件中添加这一行：

```
autocmd BufNewFile *.py 0put =\"#!/usr/bin/python\<nl>\"|$ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-07T22:57:44.817

这可能有点过头了，但是您可以查看 Vim 的片段脚本之一，例如 snipMate -- [http://www.vim.org/scripts/script.php?script_id=2540](http://www.vim.org/scripts/script.php?script_id=2540)

但是，对于您想要的，您可能只是将一个键映射到一个读取文件的命令。例如：

```
nmap <leader>r :r boiler_mashbang<cr> 
```

然后，将您的样板文件放入文件中：boiler_mashbang。

# r - 如何为每个观察调用变量的因子水平，并使用这些值在 R 中创建一个新变量？

> ID：13279524
> 
> 赞同：0
> 
> 时间：2012-11-07T22:41:06.883
> 
> 标签：r, binary-data, r-factor

我有一个`hospital_code`包含 10 个级别的分类变量的数据集。

我正在运行的程序循环并获取数据的一个子集，以便该变量`compLbl`恰好包含 10 个医院代码中的 2 个，以便可以将它们相互比较。我现在有一种情况，在每个循环中，我需要对 compLbl 进行二进制编码（1s 和 0s）。

如果我只是从第一个循环中获取子集数据，其中 compLbl 的可能值为`AMH`和`BJH`，我可以轻松地执行以下操作：

```
nData$compLbl2 = with(nData,(ifelse(compLbl == "AMH", 1,0))) 
```

并获取如下所示的数据：

```
head(nData)
compLbl outLbl Race_Code Age Complexity_Subclass_Code compLbl2
1     AMH      0         W  63                        1        1
2     AMH      0         W  44                        2        1
3     AMH      0         W  88                        3        1
4     BHC      0         W  64                        1        0
5     BHC      0         W  61                        2        0
6     BHC      0         W  61                        1        0 
```

我如何概括这一点，以便无论其中有什么两个值都会对`compLbl`它们进行二进制编码？我的想法是可能通过为因子变量 compLbl 中存在的任何两个值引用因子级别 1 来做到这一点。像这样：

```
nData$compLbl2 = with(nData,(ifelse(FACTORLEVEL(compLbl) == 1, 1,0))) 
```

在我上面的示例中，`FACTORLEVEL(compLbl)`将返回 1`AMH`和 2，`BHC`因为这些是 R 将自动分配的因子水平。但是，我不确定如何执行此操作，或者是否可能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T20:42:36.313

我会使用这个命令：

```
nData <- within(nData, compLbl2 = rev(as.numeric(compLbl[drop = TRUE]) -1)) 
```

# import - x3d 从内联 url 导入和导出节点

> ID：13279526
> 
> 赞同：0
> 
> 时间：2012-11-07T22:41:16.543
> 
> 标签：import, export, inline, x3d

我需要从父 x3d 文件中的内联 x3d 文件访问节点。例如，假设我们有一个房间模型作为 x3d 文件。我们在这个房间里放了几把椅子。我们使用内联 url 用几个 chair.x3d 文件填充 room.x3d。我们在 room.x3d 文件中有这样的东西来放置椅子：

```
<Transform DEF = 'Chair'
        translation = '0 0 0'
        scale = '1 1 1'
        rotation='-0.600546 0.600546 90 0'>
        <Inline DEF ='chr' url = 'Chair.x3d' />
    </Transform> 
```

现在，我需要访问 Chair.x3d 中的一些节点来操作场景。我已经阅读了有关 IMPORT 和 EXPORT 以及它们如何用于从内联 url 获取节点的信息，但是我还没有找到一个好的工作示例。我看过这个：

[http://www.web3d.org/x3d/content/examples/Basic/development/_pages/page27.html](http://www.web3d.org/x3d/content/examples/Basic/development/_pages/page27.html)

但这似乎不起作用。

我也读过这个：

[http://www.web3d.org/files/specifications/19775-1/V3.2/Part01/components/networking.html](http://www.web3d.org/files/specifications/19775-1/V3.2/Part01/components/networking.html)

但是语法是 VRML 而不是 x3d。

如果有人能给我一个关于如何使用 IMPORT 和 EXPORT 以及如何从内联 url 路由节点以便我可以发送事件等的快速示例，将不胜感激。如果我不够清楚，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T18:43:03.427

这对我有用： X3D 对象的源文件（棕色圆柱体）：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE X3D PUBLIC "ISO//Web3D//DTD X3D 3.0//EN" .stuff..>
<X3D profile='Interchange' version='3.0'
    xmlns:xsd='http://www.w3.org/2001/XMLSchema-instance' ..stuff..>
<Scene>
<Transform DEF='XFER_OBJECT'>
    <Shape> 
        <Cylinder radius='1' height='1'/> 
        <Appearance> 
            <Material diffuseColor='.9 .3 .3'/> 
        </Appearance>
    </Shape> 
</Transform>
<Export localDEF='XFER_OBJECT' as='Cyl'/>
</Scene>
</X3D> 
```

以及我的 xhtml 文件中的 url/import 代码：

```
<Transform translation='2 0 0' >
    <Inline DEF='objectBrnCyl' url='"test33.x3d"' />
</Transform>
<IMPORT InlineDEF='objectBrnCyl' exportDEF='Cyl' as='brnCyl'/> 
```

还没有完成对命令的案例测试——文档有点吓人。

# haskell - Haskell：函数中的点

> ID：13279528
> 
> 赞同：1
> 
> 时间：2012-11-07T22:41:29.583
> 
> 标签：haskell, max, ghci, function-composition, pointfree

谁能告诉我为什么在这个函数中使用“。” ?

```
 longestProductLen :: [(Barcode, Item)] -> Int
     longestProductLen = maximum . map (length . fst . snd) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T23:28:56.530

```
longestProductLen :: [(Barcode, Item)] -> Int
longestProductLen = maximum . map (length . fst . snd) 
```

`.`是函数组合，所以`maximum. map f`表示 map `f`，然后取最大值，例如如果`f`是`(+5)`，那么我们得到

```
 ( maximum .map (+5) ) [1,2,3,4] 
= maximum (map (+5) [1,2,3,4])
= maximum [6,7,8,9]
= 9 
```

在您提供的代码中，`.`也用于`(length . fst . snd)`.

请注意`longestProductLen :: [(Barcode, Item)] -> Int`，如果我们`f`在该列表上进行映射，则因为`f`必须接受 类型的数据`(Barcode, Item)`。

它需要`snd`，这给了它一个项目，然后`fst`，所以它必须是`type Item = (Product,???)`。我不知道是什么？？？是，但这对您的功能无关紧要。我猜`Double`。

接下来我们拿`length`，所以`type Product = [????]`。我怀疑它是`[Char]`，即字符串，但无论如何，我们可以取它的长度。

因此，让我们通过一些示例数据来解决这个问题：

```
 (length . fst . snd) ("|| ||| | ||| | || |||| | |", ("Gruyere",1.05))
= (length . fst)  (snd ("|| ||| | ||| | || |||| | |", ("Gruyere",1.05)) )
= (length . fst) ("Gruyere",1.05)
= length ( fst ("Gruyere",1.05) )
= length "Gruyere"
= 7 
```

把它放在一起给出

```
 longestProductLen [("|| ||| | ||| | || |||| | |", ("Gruyere",1.05)),
                     ("| ||| || ||| ||  |||| || |", ("Emmental",0,97)),
                     ("||||| ||| ||| ||  | || |||", ("Gouda",1,21))]
= maximum . map (length . fst . snd) 
                    [("|| ||| | ||| | || |||| | |", ("Gruyere",1.05)),
                     ("| ||| || ||| ||  |||| || |", ("Emmental",0,97)),
                     ("||||| ||| ||| ||  | || |||", ("Gouda",1,21))]
= maximum [7,8,5]
= 8 
```

所以我们发现最长的产品长度是 8（来自 Emmental）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-07T22:44:02.683

`.`是功能组合。它可以定义为

```
(.) :: (b->c) -> (a->b) -> a -> c
f . g = \x -> f (g x) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T08:45:59.580

其他答案很好，但为了便于阅读，您可以在心理上在等式两侧添加一个变量并`.`用 a`$`或 parens 替换，因此您的示例将显示为：

```
longestProductLen xs = maximum $ map (\y -> length $ fst $ snd y) xs 
```

供参考：原版称为“ [pointfree style](http://www.haskell.org/haskellwiki/Pointfree) ”（“points”不是点而是变量）。

# c++ - 本周大师 #2 与操作员不匹配==

> ID：13279531
> 
> 赞同：2
> 
> 时间：2012-11-07T22:41:37.190
> 
> 标签：c++

来自[第 2 周的大师](http://www.gotw.ca/gotw/002.htm)。我们有原来的功能：

```
string FindAddr( list<Employee> l, string name )
{
    for( list<Employee>::iterator i = l.begin(); // (1)
         i != l.end(); 
         i++ ) 
    {
        if( *i == name ) // (2)
        {
            return (*i).addr;
        }
    }
    return "";
} 
```

我向其中添加了虚拟 Employee 类：

```
class Employee
{
    string n;
public:
    string addr;

    Employee(string name) : n(name) {}
    Employee() {}

    string name() const
    {
        return n;
    }

    operator string()
    {
        return n;
    }
}; 
```

并得到编译错误：

到位（1）：

```
conversion from ‘std::_List_const_iterator<Employee>’ to non-scalar type ‘std::_List_iterator<Employee>’ requested 
```

到位（2）：

```
no match for ‘operator==’ in ‘i.std::_List_iterator<_Tp>::operator* [with _Tp = Employee]() == name’ 
```

为了消除第一个，我们`iterator`改为`const_iterator`。消除第二个错误的唯一方法是编写自己的运算符==。**然而，赫伯萨特写道：**

> Employee 类未显示，**但要使其工作，它必须具有到 string 的转换或采用 string 的转换 ctor**。

但是 Employee 有一个转换函数和转换构造函数。GCC 版本 4.4.3。正常编译，`g++ file.cpp`没有任何标志。

应该有隐式转换，它应该工作，为什么不呢？我不想要 operator==，我只希望它像 Sutter 所说*的那样工作，转换为 string 或转换 ctor 采用 string*。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T22:53:56.840

Herb Sutter 在这种情况下是错误的（我没有“Exceptional C++”的副本，但我希望该 GotW 条目能够为本书清理。）

但首先，为了解决相关错误，您必须`const`从`l`参数声明中删除 。（请注意，替换`iterator`为`const_iterator`只会混淆问题：您的`operator string()`is not `const`，这意味着它不可用于常量 object `*i`）。

一旦你解决了第一个问题，你的代码确实无法编译

```
if( *i == name ) 
```

线。这是因为`std::operator ==`比较`std::string`对象的函数实际上被标准库定义为*模板*函数

```
template<class charT, class traits, class Allocator>
bool operator==(
  const basic_string<charT,traits,Allocator>& lhs,
  const basic_string<charT,traits,Allocator>& rhs); 
```

为了让这个函数参与重载决议，它的模板参数必须被成功推导出来。这在您的上下文中是不可能的，因为在`*i == name`一个参数中是`std::string`，另一个是`Employee`。模板参数推导失败，因此，此模板函数不考虑用于重载解析。没有其他候选者，编译器会报告错误。

出于这个原因，Herb Sutter 声称代码应该`operator string()`在类中存在转换函数的情况下可编译的说法`Employee`是不正确的。代码可能会与标准库的某些特定实现一起编译，该实现为 声明一个专用的非模板比较运算符`std::string`，但通常标准库实现不会那样做。

他还提出了另一个毫无根据的主张，坚持认为这种转换的结果必须是暂时的。实际上，`Employee`类可以具有`operator const string &() const`转换功能，这不会创建临时对象（而是返回对数据成员的引用，就像您的示例中所做的那样）。

最后，他声称转换构造函数将使这段代码工作的说法只有在程序声明一个专用`operator ==`于`Employee vs. Employee`比较的情况下才是正确的。如果不引入这样的专用运算符，转换构造函数将不会影响这段代码的有效性。即在您的示例中，声明`Employee(string name)`构造函数没有任何意义——它没有实现任何目标。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-07T23:02:42.557

我相信代码可以编译，但不是必须的。请记住，这`string`是一个 typedef `basic_string<char>`，它本身不是一个类。最小的例子：

```
template <typename T>
struct basic_string
{
};

typedef basic_string<char> string;

struct Employee
{
    operator string() const;
};

template <typename T>
bool operator==(const basic_string<T>& a, const basic_string<T>& b);

// Compilation succeeds when this is uncommented
// bool operator==(const basic_string<char>& a, const basic_string<char>& b);

bool f(const Employee& e, const string& s)
{
    return e == s; // error
} 
```

是的，`Employee`可转换为`string`，但它并不是*真正*的 a `string`，因此这不足以确定用于 的模板参数`operator==`。

如果添加了一个额外的重载`operator==(const string&, const string&)`，它就可以工作，另一个标准库实现可能会提供这个重载。如果提供，代码将编译，但它是标准 C++ 不需要的扩展。

**编辑**：实际上，正如其他人所提到的，这还不够（`const`问题），但即使解决了其他问题，这仍然存在，我相信这是您核心问题的答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T23:00:13.367

**免责声明**：在我撰写并发布此问题时，问题的代码已经更改。该代码不再是 GOTW 代码的引用。这是不同的代码，所谓的编译错误显然也不正确，但我让这个答案（对原始帖子）保持不变，因为它主要涉及其他问题（我不打算通过相应的编辑来对问题进行一系列编辑并修改这个答案）。

@Vaibhav[已经回答](https://stackoverflow.com/a/13279585/464581)了核心问题，即需要明确表达转换。

但是由于引用的 GOTW（本周大师）涉及不必要的临时人员，您的课程`Employee`代码，

```
class Employee
{
    string n;
public:
    string addr;

    Employee(string name) : n(name) {}
    Employee() {}

    string name() const
    {
        return n;
    }

    operator string()
    {
        return n;
    }

}; 
```

重复该 GOTW 中讨论的一些陷阱。

在

```
Employee(string name) : n(name) {} 
```

通过值获取字符串参数对于 C++11 来说很好，因为无论如何都会创建一个副本。但是你应该**`move`**把这个值放入成员中，

```
Employee(string name) : n(move(name)) {} 
```

那么，你的

```
operator string()
{
    return n;
} 
```

遭受 not being `const`，因此不能在`const`对象上调用它，因此为了调用此运算符，必​​须复制该对象。

所以，从技术上讲，做

```
operator string() const
{
    return n;
} 
```

但在设计层面上，这也是*错误*的。员工不是字符串。希望员工转换为哪个字符串？他或她的名字？员工代码？社会安全号码？

隐式转换通常很麻烦，这就是一个例子。没有帮助`explicit`。由于相关字符串已经可以通过命名操作获得（这是一件好事），因此只需*删除*此转换运算符即可改进类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T22:45:34.453

您从迭代器收到一个 Employee 对象，因此 *i 指向一个 Employee 对象。然后，您需要指向该员工的姓名。

试试这个：

```
if( (*i).name == name ) 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-07T22:54:05.040

当您反转比较运算符的操作数时会发生什么？编译器抱怨没有`operator ==`for `List<>`，但它定义了 for `string`。

更改`if( *i == name )`为`if( name == *i )`应该工作。

# c# - 在数组中查找用户类型的数字平均值

> ID：13279532
> 
> 赞同：0
> 
> 时间：2012-11-07T22:41:42.417
> 
> 标签：c#, arrays, sum, average

有人可以向我解释为什么当我运行我的程序时我的平均值一直为 0 吗？我在这里列出了我项目的全部代码，并且之前从未使用过数组。另外，这个数组的名称是 mData 吗？我试着在我的书中阅读以确定在这些项目中寻找什么，但一无所获。

```
public partial class frmMain : Form
{

    private const int mSize = 20;
    private int[] mData = new int[mSize];
    private int mIndex = 0;

    private static void Main()
    {
        frmMain main = new frmMain();
        Application.Run(main);
    }
    private frmMain()
    {
        InitializeComponent();
    }

    private void btnEnter_Click(object sender, EventArgs e)
    {
        int num;
        num = int.Parse(txtInput.Text);

        //store num in the array
        mData[mIndex] = num;
        mIndex = mIndex + 1;

        //check for full array
        if (mIndex == mSize)
        {
            //inform user that array is full
            MessageBox.Show("The array is full.");
            btnEnter.Enabled = false;
        }
    }

    private void btnExit_Click(object sender, EventArgs e)
    {
        Close();
    }

    private void btnDisplay_Click(object sender, EventArgs e)
    {
        int n;

        for (n = 0; n < mIndex; n++)
            listBoxOutput.Items.Add(mData[n]);
    }

    private void btnAverage_Click(object sender, EventArgs e)
    {

        int sum = 0;
        int average = 0;

        if (mIndex == 0)
        {
            //inform user that array is empty
            MessageBox.Show("The array is empty.");
        }

        //add up the values
        for (int i = 0; i < mData.Length; i++)
        {
            sum += mData[i];
        }

        //divide by the number of values
        average = sum / mSize;

        listBoxOutput.Items.Add("The average of the array is: " + average);
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T22:46:55.603

因为`average`, `sum`, 和`mSize`是整数，所以当你将它们相除时，结果将被截断。

```
 average = sum / mSize; 
```

因此，如果`sum/mSize`小于 1，`average`则始终等于 0

获得平均有小数点将声明更改为

```
 double average = 0; 
```

和计算

```
average = (double)sum / (double)mSize; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T22:48:54.327

一个问题是您使用的是整数。如果最终值是小于 1 的小数，则 int 平均值将存储 0。将平均值更改为浮点数将解决此问题。此外，除非您知道整个数组已填满，否则不应除以 mSize。用户可以插入一个值，但它会被平均为 19 个 0。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T23:47:48.687

数组有一个内置属性来计算平均值，它返回一个十进制值作为输出。示例如下

int[] 整数 = 新 int[] { 1, 2, 3 }; Console.WriteLine(integer.Average().ToString());

希望这可以帮助。

# objective-c - RestKit：映射复杂嵌套的问题，需要 forceCollectionMapping 的多个级别

> ID：13279533
> 
> 赞同：0
> 
> 时间：2012-11-07T22:41:52.837
> 
> 标签：objective-c, ios, mapping, restkit

我正在尝试使用 RestKit 映射一些 JSON 数据，但到目前为止一直无法正确完成。数据是一组分层的天数和注册。它看起来如下（我不可能更改它）：

```
{
  "days": 
  {
    "2012-10-29": {
        "2106303": {
            "activityCode": "LU",
            "approved": false,
            "hours": 0.5,
            "description": "some description",
        },
        "2106304": {
            "activityCode": "VF",
            "approved": false,
            "hours": 7.5,
            "description": "some other description",
        }
        },
        "2012-10-30": null,
  }
} 
```

我的代码如下所示：

```
- (void)setupWeekMappingForManager:(RKObjectManager *)manager
{
    RKObjectMapping *registrationMapping = [RKObjectMapping mappingForClass:[Registration class]];
    registrationMapping.forceCollectionMapping = YES;
    [registrationMapping mapKeyOfNestedDictionaryToAttribute:@"registrationNumber"];

    RKObjectMapping *dayMapping = [RKObjectMapping mappingForClass:[Day class]];
    dayMapping.forceCollectionMapping = YES;
    [dayMapping mapKeyOfNestedDictionaryToAttribute:@"date"];

    // how can this relationship be mapped?
    [dayMapping mapKeyPath:@"(date)." toRelationship:@"registrations" withMapping:registrationMapping]; 

    [manager.mappingProvider setMapping:dayMapping forKeyPath:@"days"];
} 
```

它愉快地返回了日子，但我找不到映射两种类型之间关系的好方法，

任何朝着正确方向的推动将不胜感激，

最好的问候，汤米

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T17:45:59.000

这对我有用：

```
- (void)setupWeekMappingForManager:(RKObjectManager *)manager
{
    RKObjectMapping *registrationMapping = [RKObjectMapping mappingForClass:[Registration class]];
    registrationMapping.forceCollectionMapping = YES;
    [registrationMapping mapKeyOfNestedDictionaryToAttribute:@"registrationNumber"];
    [registrationMapping mapKeyPath:@"(registrationNumber).description" toAttribute:@"description"];

    RKObjectMapping *dayMapping = [RKObjectMapping mappingForClass:[Day class]];
    dayMapping.forceCollectionMapping = YES;
    [dayMapping mapKeyOfNestedDictionaryToAttribute:@"date"];
    [dayMapping mapKeyPath:@"(date)" toRelationship:@"registrations" withMapping:registrationMapping];

    [manager.mappingProvider setMapping:dayMapping forKeyPath:@"days"];
} 
```

这给了我一个日对象，其中包含一个很好的小时注册数组作为 NSArray。作为参考，它看起来像这样：

```
@interface Day : NSObject
@property (nonatomic, readonly, copy) NSDate *date;
@property (nonatomic, readonly, strong) NSMutableArray *registrations;
@end 
```

# sharepoint-2010 - 如何在 Sharepoint 2010 中向 Web 部件添加列表？

> ID：13279534
> 
> 赞同：1
> 
> 时间：2012-11-07T22:42:04.247
> 
> 标签：sharepoint-2010

我在 Visual Studio 中有一个 Web 部件。Web 部件将包含 3 个文本框、1 个按钮和 1 个列表显示。

我使用什么控件在 Web 部件上显示自定义列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T08:15:36.677

如果您想在 Web 部件中显示列表，您可以通过编辑页面来添加您的 Web 部件并从可用 Web 部件的列表和库部分添加。如果您希望您的文本框、按钮和列表显示在您的 Web 部件上，那么您可以执行以下操作。

1.  在 Visual Studio 中创建一个可视化 Webpart（将其部署为场解决方案）。

2.  在那里添加您的控件。如果要显示列表，可以在网格控件中显示它们。

# eclipse - eclipse插件开发项目的启动器如何加载\处理“plugin.xml”文件？

> ID：13279535
> 
> 赞同：1
> 
> 时间：2012-11-07T22:42:09.717
> 
> 标签：eclipse, eclipse-plugin

我想弄清楚如何将文件放在项目的根文件夹中并在运行时使用它，在那里它可以访问。

我这样做的问题（将文件放在根文件夹中） - 默认情况下它意味着：

1.  它不在项目的类路径中。
2.  它不会复制到 bin（输出）文件夹。

我看不到我对文件的修改将如何影响运行过程。

# 据我所知，eclipse中有一个类似的机制可以做到这一点：

Plugin开发项目在项目的根文件夹中有一个文件——“plugin.xml”。
当您在文件中进行更改而不构建项目或将其复制到 bin 文件夹时，更改会在您运行它时发生。

例如：
在“plugin.xml”中添加一个扩展点并点击“RUN”，它将立即生效。

有人知道这种机制在 Eclipse 中是如何工作的吗？

编辑-澄清：我对eclipse插件开发项目的启动器如何加载\处理“plugin.xml”文件感兴趣。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T23:30:50.317

我假设当您说要将文件放在“项目的根文件夹”中时，您指的是正在开发的插件，然后在运行时您想要访问该文件。如果我没有正确理解这个问题，请不要投票给我，但根据我的理解，这里有一些步骤：

1.  打开您的 MANIFEST.MF 文件 /MANIFEST.MF，这将打开一个多页编辑器。
2.  单击构建选项卡（右起第三个）。
3.  您可以在此处指定您希望构建器在运行时包含在插件中的插件中的哪些资源。你会注意到 plugin.xml 已经被检查过，这就是扩展每次都更新的原因。
4.  检查此编辑器页面上的资源以获取您希望能够在运行时加载和访问的资源。在幕后，这是更新您的 build.xml，内部构建器使用它来确定在构建/导出插件时要构建/添加的源。

您已经这样做了，这就是您可以访问该文件的方式，您获取插件的 Bundle 并使用文件的路径调用 getEntryMethod，然后从那里在输入流中打开，您可以将其加载为文件或任何您想。下面的代码示例：希望这会有所帮助 - 邓肯

捆绑 myBundle = Platform.getBundle("com.mycompany.myplugin.id")
InputStream in = myBundle.getEntry("/myfile.txt").openStream();

# .net - Html.BeginForm - HTTP POST 方法 - VB.NET 2012 MVC 4 Visual Studio

> ID：13279538
> 
> 赞同：0
> 
> 时间：2012-11-07T22:42:19.653
> 
> 标签：.net, vb.net, visual-studio, asp.net-mvc-4

重点是**Html.BeginForm**函数的***“controllerName As String”***部分。

 **# 的HTML：

### 根/Views/Home/Therequestform.vbhtml

```
 <h2>Therequestform</h2>

@Html.BeginForm("Therequest", "Home", method:= FormMethod.Post)

    <fieldset>
        <input type="text" name="ColorName" />
        <input type="submit" name="ColorName_SubmitButton" />
    </fieldset> 
```

# 控制器：

### 根/控制器/HomeController.vb

```
Function Therequestform() As ActionResult

    Return View()

End Function

    <HttpPost()>
    Function Therequest() As ActionResult

        Response.Write("The color you have submitted: " & Request.Form("ColorName"))

        Return View()
    End Function

End Class 
```

# 问题：

**编辑：**对视图的调用是在控制器中使用函数“Therequest”对 HTTP POST 方法的请求调用之上完成的。

对 的引用`ControllerName`已在 的第二部分完成，而在对调用 a 的函数的引用的`Html.BeginForm`第一部分已完成。`Html.BeginForm``request``HTTP POST method`

我遇到的问题是，在按下 之后`submit button`，对函数的调用（在控制器中）没有在设置的位置完成。在按下“提交按钮”后出现以下错误消息：

* * *

> **应用程序中的服务器错误。** 未找到视图“请求”或其主视图，或者没有视图引擎支持搜索的位置。搜索了以下位置：
> 
> **说明：**执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> **异常详细信息：** System.InvalidOperationException：未找到视图“请求”或其主视图，或者没有视图引擎支持搜索的位置。搜索了以下位置：
> 
> ~/Views/Home/Therequest.aspx

~/Views/Home/Therequest.ascx

> ~/Views/Shared/Therequest.aspx

~/Views/Shared/Therequest.ascx

> ~/Views/Home/Therequest.cshtml

~/Views/Home/Therequest.vbhtml

> ~/Views/Shared/Therequest.cshtml

~/Views/Shared/Therequest.vbhtml

> **源错误：**在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。

* * *

“搜索”或“呼叫”**不在**该`set`位置完成。其中通过*Html.BeginForm*的参数数组，设置了`executed`函数名称，并且`controllerName`设置了 - 设置为（**root/Controllers/HomeController.vb**） - 在第三部分中，方法设置为`POST`.

问题是，是什么导致**它**不在设定的位置进行呼叫？

* * *

**使用的工具：** VB.NET 2012、MVC 4、Visual Studio 2012、Microsoft SQL Server 2012

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T01:00:51.593

它正在尝试渲染视图命名`Therequest.vbhtml`，而您的视图已命名`Therequestform.vbhtml`

将视图名称更改为`Therequest.vbhtml`或将控制器名称更改为`Therequestform`以及引用它的所有位置**

# c# - COM 的 C# 接口泄漏内存......奇怪的是

> ID：13279539
> 
> 赞同：1
> 
> 时间：2012-11-07T22:42:23.147
> 
> 标签：c#, com, memory-leaks

我有一个 C# 程序，它可以访问一个名为 Aspen Plus 的模拟软件的 COM 接口。我有一个非常奇怪的内存泄漏。

当我需要从模拟中获取结果值时，我会运行一系列这样的调用，在某些情况下，返回的变量可能为空，所以我插入了一个检查。然后我使用 FinalReleaseComObject 清理 COM 引用。

```
 public override ValueType recvValueFromSim<ValueType>(string path) {
       Happ.IHNode tree = this.Aspen.Tree;
       dynamic node = tree.FindNode(path);
       ValueType retVal = default(ValueType);
       if (node != null && node.Value != null) {
           retVal = node.Value;
       }
       Marshal.FinalReleaseComObject(node);
       Marshal.FinalReleaseComObject(tree);
       node = null;
       return retVal;
   } 
```

不幸的是，上面的代码泄漏了很多。每次模拟泄漏 2MB。起初我以为垃圾收集器最终会运行并清理它，但没有骰子。在运行了几百次模拟后，我的内存不足。

奇怪的是，下面的代码可以正常工作并且不会泄漏。我不喜欢它，因为使用 catch 检查空引用似乎是一种不好的形式，但这不会泄漏。

```
 public override ValueType recvValueFromSim<ValueType>(string path) {
      ValueType node;
      try {
         node = this.Aspen.Tree.FindNode(path).Value;
         return node;
      } catch {
         return default(ValueType);
      }
   } 
```

为什么不漏？有人知道吗？这就是为什么我认为我知道临时引用和释放 COM 对象的原因。

# facebook - 用于重新验证多访问令牌的 Facebook api 批处理

> ID：13279543
> 
> 赞同：0
> 
> 时间：2012-11-07T22:42:37.330
> 
> 标签：facebook, api, batch-file, access-token

我想进行 Facebook 批量调用以读取注册用户的墙。

据我所知，我需要在每个调用的正文中批量指定用户访问令牌。但是由于离线访问折旧，我需要在使用之前重新验证所有用户访问令牌。

因此，如果我要批处理多个调用，则单独重新验证每个访问令牌是没有意义的（如此处所述：http: [//goo.gl/M3Jrr](http://goo.gl/M3Jrr)）。

如何更快地重新验证这些访问令牌？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T00:19:52.763

> 如何更快地重新验证这些访问令牌？

你**不能**。一旦用户访问令牌过期，您需要捕获它并让用户与您的应用互动以*刷新*访问令牌。

现在我不知道您为什么需要批量阅读您的注册用户墙，根据您的动机，这可能违反 Facebook 政策，但我想在批量调用的响应正文中，您应该收到一个明确的错误信息过期的访问令牌，因此，例如，在数据库中为那些（*非活动*）用户添加一个标志，以便以后重新参与。

# jquery - 使用带有选择标签的 Jquery

> ID：13279546
> 
> 赞同：2
> 
> 时间：2012-11-07T22:42:53.193
> 
> 标签：jquery

这是一个小提琴，让您了解我想要做什么

[http://jsfiddle.net/g4ymr/13/](http://jsfiddle.net/g4ymr/13/)

```
<a href="">Menu 1</a>
<a href="">Menu 2</a>
<a href="">Menu 3</a>
<a href="">Menu 4</a>

<select name="type1">
   <option value="1">Menu 1</option>
   <option value="2">Menu 2</option>
   <option value="2">Menu 3</option>
   <option value="2">Menu 4</option>
</select> 
```

​</p>

Menu 1 2 3 4 代表我网站上的主要导航....

当用户单击菜单 2 时，我希望选择标签表单转到菜单 2

用户点击菜单 3 时的菜单 3

等等

我对 jquery 很陌生，所以我需要帮助开始

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T22:45:00.523

## *[jsFiddle 演示](http://jsfiddle.net/g4ymr/14/)*

```
$('a').click(function(e){
    e.preventDefault();
   $('select[name=type1] option').eq( $(this).index() ).prop('selected', true);
}); 
```

在此示例中，我使用单击的按钮*来*`.index()`引用（定位`.eq()`）所需的`option`元素。希望我不需要说您最好使用更具体的选择器，而不仅仅是`a`. ...嗯，我刚刚说过：D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T23:04:42.890

使用 anchors href 属性指向选项意味着后退/前进按钮也会更改选项。可能需要也可能不需要，但值得了解：

[http://jsfiddle.net/EUZb3/](http://jsfiddle.net/EUZb3/)

```
$("a").click(function(e) {
    $("select[name=type1]").val($(this).attr("href").substring(1))
});​ 
```

# jquery - .css('width') 和 .css('height') 与 .width() 和 .height()

> ID：13279555
> 
> 赞同：23
> 
> 时间：2012-11-07T22:43:18.387
> 
> 标签：jquery

伙计们，我一直在问，没有人能真正告诉我使用`.css(‘width’)`and`.css(‘height’)`而不是`.width()`and的好处`.height()`。

我知道它们都返回偏移尺寸，这是元素的真实尺寸，无论它的内部内容如何拉伸。

我猜有些事情可以做而另一件做不到，因为我`css()`用来返回窗口和文档的尺寸，FF 这样做没有问题，但 IE 向我抛出了一个错误。所以我猜测它们可能适用于某些浏览器和其他浏览器。那么我是否必须同时使用两者才能实现 100% 的跨浏览器兼容性或仅在某些情况下？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-07T22:45:44.047

从[.height()](http://api.jquery.com/height/)文档中-

> .css('height') 和 .height() 之间的区别在于**后者返回一个无单位的像素值（例如，400）**，而**前者返回一个单位完整的值（例如，400px）**。当需要在数学计算中使用元素的高度时，建议使用 .height() 方法。

如果您需要在计算中使用高度，请使用`.height()`.

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-07T23:05:41.423

> 伙计们一直在问，没有人能真正告诉我使用 .css('width') 和 .css('height') 而不是 .width() 和 .height() 的好处。

查询 CSS 将为您提供应用的值，如 in`5px`或`1em`分配给它的任何大小。

使用 jQuery，您可以使用以下方法：

*   `.height`（元素高度，没有填充，边距或边框）
*   `.innerHeight`（元素高度+填充）
*   `.outerHeight`（元素高度+填充和边框）
*   `.outerHeight(true)`（元素高度 + 内边距 + 边框 + 边距）
*   `.width`（元素宽度，没有填充，边距或边框）
*   `.innerWidth`（元素宽度+填充）
*   `.outerWidth`（元素宽度+填充和边框）
*   `.outerWidth(true)`（元素宽度 + 内边距 + 边框 + 边距）

所有这些方法都将只返回一个数字，表示以像素为单位的高度/宽度单位。

> 使用 jQuery 的好处是跨浏览器，您可以通过忽略/包含边距、填充或边框来更好地控制确切的宽度/高度。
> 
> 此外，由于这些方法总是将单位作为纯数字返回，因此如前所述，使用它们进行计算更容易，因为您无需担心测量本身，即：`px`、`em`等。

### [**DEMO**](http://jsfiddle.net/yVq5H/) - 演示高度方法（同样适用于宽度）

上面的演示使用了一个 div：

```
<div id="myDiv">My Div</div> 
```

使用以下 CSS：

```
div{
    border: 1px solid blue;
    padding: 5px;
    margin: 10px;
} 
```

使用此脚本：

```
var $div = $("#myDiv");
var height = $div.height();
var heightWithPadding = $div.innerHeight();
var heightWithPaddingAndBorder = $div.outerHeight();
var heightWithPaddingAndBorderAndMargin = $div.outerHeight(true);

var $result = $("#result");
$result.append("height: " + height);
$result.append("<br />height with padding: " + heightWithPadding);
$result.append("<br />height with padding and borders: " + heightWithPaddingAndBorder);
$result.append("<br />height with padding and borders and margin: " + heightWithPaddingAndBorderAndMargin); 
```

结果如下：

```
height: 20
height with padding: 30
height with padding and borders: 32
height with padding and borders and margin: 52 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-11-07T22:55:04.717

```
var elH = someElement.height();           // 200 
```

`.height()`返回一个**Number**，而

```
var elH = someElement.css("height");      // "200px" 
```

上面的 jQuery`style`像 JS 一样访问元素的属性：

```
var height = someDOMelement.style.height; // "200px" 
```

中返回一个**字符串**值`px`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-06-23T14:59:39.057

他们还将返回/设置不同的值（不是在谈论“px”后缀）

如果你有`box-sizing: border-box`

看这个例子： http: [//jsbin.com/fugusixila/edit ?html,css,js,console,output](http://jsbin.com/fugusixila/edit?html,css,js,console,output)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-07T23:58:22.393

我提供了这个答案，因为问题是询问您可以做的事情，`css()`反之亦然`width()`。隐藏的页面元素有一个有趣的案例。

我最近遇到了一种情况，我需要动态移动一些有时隐藏的元素，有时在页面加载时不需要。当元素没有被隐藏时，很容易只使用元素的实际宽度来创建新的 DOM 结构。但是当元素被隐藏时，使用`.width() returned 0`，并且正确地如此。所以我需要向元素类添加一些 CSS 宽度信息，然后我可以创建一个类似的语句

```
var width = $('#element').width() == 0 ? parseInt($('#element').css('width')) : $('#element').width(); 
```

这使我能够确保我在可用时使用宽度，而且还为隐藏元素时提供了一个后备值。

希望这能加深对这两种方法的区别的理解。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-07T22:46:20.747

.width 返回一个无单位的值，其中 .css("width") 返回 css 值，宽度应与数学计算一起使用

[http://api.jquery.com/width/](http://api.jquery.com/width/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-03-21T13:22:22.770

是的！
主要的是，正如大多数人所说的“ ***.height() 返回一个无单位的像素值***”。

> 但问题仍然存在：为什么会这样......？......为什么会有这样的想法？

@Jay Blanchard 说得好：“***当需要在数学计算中使用元素的高度时，建议使用 .height() 方法。*** ”

所以，如果我可以补充，每次处理原生*独立时都使用“* **CSS** ”dim's浏览器反应 - 在响应式窗口/div 重新尺寸调整过程中计算/响应元素配置非常方便。 使用**width()** / **height()**计算**JQuery**效果结果，例如 hide()/show() 内层（您知道**不会**影响 CSS ）。 还要注意，例如，CSS 属性**不**包括填充、边框或边距（您没有 *********`height`
`height`***内部*X /*外部*X CSS 暗淡）。所以必须计算这些。

看一下[jQuery：获取 jQuery 中隐藏元素的高度](https://stackoverflow.com/questions/2345784/jquery-get-height-of-hidden-element-in-jquery)***********

 ******** * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-02-06T17:39:08.093

现在人们应该知道一个应该用于数学，另一个不应该......

还是应该？

根据我的发现，我对各种选项进行了一些[速度测试：](http://jsfiddle.net/ce511sds/2/)

1.  用`.css`
2.  设置宽度更快`.width`

所以换句话说，要抓一些东西并设置另一个，你可能应该：

```
$('#element1').width(parseInt($('#element2').css('width'), 10)); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-09-21T15:10:33.890

".height() 将始终返回内容高度，无论 CSS box-sizing 属性的值如何。从 jQuery 1.8 开始，这可能需要检索 CSS height 加上 box-sizing 属性，然后减去任何潜在的边框和填充每个元素当元素有 box-sizing:border-box。为了避免这种惩罚，使用 .css("height") 而不是 .height()"

[http://api.jquery.com/height/](http://api.jquery.com/height/)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-05-08T13:33:39.803

由于这是当我试图记住两者之间的区别时谷歌的第一次点击，我想我会用一个例子来解释一下。

我有一个名为 myDiv 的 div，如下所示：

```
border:1px solid black;
padding-right: 15px;
padding-left:15px;
margin-right:10px;
margin-left:10px 
```

控制台给了我这个：

```
$('#myDiv').css('width') = 1100px;
$('#myDiv').width() = 1068; 
```

1100 包括右侧填充的 15 个像素，左侧填充的 15 个像素，边框的 2 个像素（每边 1 个）但*不*包括边距。至少对我来说铬。 `1068+15+15+1+1 = 1100`

是的，这样做有开销，`Number($('#myDiv').css('width').replace('px', ''))`但您每次只需执行一次。而且你必须将结果转换为数字，假设你想要`Number($('#myDiv').css('width').replace('px', '')) + 99`1199。否则你会得到 110099 作为答案。*******

# java - 在 mac os 中，使用 rxtx 时出现错误 java.lang.UnsatisfiedLinkError: no rxtxSerial in java.library.path throw while loading gnu.io.RXTXCommDriver

> ID：13279558
> 
> 赞同：0
> 
> 时间：2012-11-07T22:43:51.310
> 
> 标签：java, eclipse, macos, classpath, rxtx

```
java.lang.UnsatisfiedLinkError: no rxtxSerial in java.library.path thrown while loading gnu.io.RXTXCommDriver
Exception in thread "main" java.lang.UnsatisfiedLinkError: no rxtxSerial in java.library.path
    at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1758)
    at java.lang.Runtime.loadLibrary0(Runtime.java:823)
    at java.lang.System.loadLibrary(System.java:1045)
    at gnu.io.CommPortIdentifier.<clinit>(CommPortIdentifier.java:83)
    at healthyMouse.SerialPortTest.initialize(SerialPortTest.java:27)
    at healthyMouse.SerialPortTest.main(SerialPortTest.java:81) 
```

我正在使用 MAC OS 10.7.5 和 Eclipse。我使用 buildPath->configure build path->add external jars 来导入 RXTXcomm.jar。我得到了错误。我是 MAC OS 的新手，所以我有点困惑如何在 MAC 中为 eclipse java 导入库。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-28T21:27:26.513

这只是一个建议，因为我不使用 Mac OS，但我在 Windows 上使用过 RXTX，因此必须将其复制`rxtxSerial.dll`到项目文件夹中才能正常工作。尝试复制`librxtxSerial.jnilib`到您的项目文件夹中，也许您很幸运。

# node.js - express js会话序列化不正确

> ID：13279563
> 
> 赞同：0
> 
> 时间：2012-11-07T22:44:04.597
> 
> 标签：node.js, express

我使用 node.js 和 expressexpress。我将字典添加到 req.session。看来字典中的值在客户调用之间没有保存（））

我将非常感谢任何解决方案。

```
'req.session.test = [];
'req.session.test["obj1"] = obj; // Does not save in the session! - disappears between client calls'
'req.session.test.push(obj);     // saved in the session and can be found between client calls' 
```

提前谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T06:41:21.913

您不能将对象添加到这样的数组中。如果您想要命名键（“哈希”），那么您将不得不使用一个对象。尝试

```
req.session.test = {};
req.session.test["obj1"] = obj; 
```

# ios - 有什么方法可以在 iOS 中作弊以使网络在后台工作？

> ID：13279564
> 
> 赞同：1
> 
> 时间：2012-11-07T22:44:04.773
> 
> 标签：ios, networking, background

我正在尝试构建一个 hack，以便我可以将传入的 TCP 数据包回显到本地 UDP（以连接到不支持 TCP 的第 3 方控制界面）。

我不在乎 Apple 是否会批准它，我只需要在我自己的 iPad 上执行此操作。我试着假装我的应用程序支持音频，但没有奏效。

这是可能的（没有越狱？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T23:32:37.583

我实际上并没有尝试过，但您可以通过将应用程序设置为 VoIP 应用程序来做到这一点。

来自[开发者文档](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html)：

> 该系统不是让 VoIP 应用程序一直处于唤醒状态，而是允许它们被暂停并为它们提供监控其套接字的设施。当检测到传入流量时，系统会唤醒 VoIP 应用程序并将其套接字的控制权返回给它。

# android - 活动加载，但不显示

> ID：13279569
> 
> 赞同：1
> 
> 时间：2012-11-07T22:44:20.837
> 
> 标签：android, android-listview, android-actionbar

我有这个代码：

```
ListView listView;
static final String[] Liste = {"Satz des Pythagoras", "abc-Formel", "pq-Formel"};

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_home);
    setTitle("CalcPlus");
    listView = getListView();
    //Own row layout
    listView.setAdapter(new ArrayAdapter<String>(this,
                R.layout.activity_home, Liste));
    listView.setOnItemClickListener(this);
}
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_home, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
        case R.id.maths:
            return true;
        case R.id.physics:
            Intent myIntent2 = new Intent(Home.this, ActivityPhysics.class);
            startActivity(myIntent2);
        default:
            return super.onOptionsItemSelected(item);
    }
}
public void onItemClick(AdapterView<?> adapter, View view,
            int position, long id) {
    if ("Satz des Pythagoras".equals(Liste[position])) {
        Intent sdp = new Intent(view.getContext(), MainActivity.class);
        startActivityForResult(sdp, 0);
    }
    else if ("abc-Formel".equals(Liste[position])) {
        Intent abc = new Intent(view.getContext(), ActivityABC.class);
        startActivityForResult(abc, 0);
    }
    else if ("pq-Formel".equals(Liste[position])) {
        Intent pq = new Intent(view.getContext(), ActivityPQ.class);
        startActivityForResult(pq, 0);
    }
} 
```

这应该显示一个列表和一个操作栏。确实，有一段时间了。

看起来我把代码搞砸了，因为我没有那么多经验，所以找不到我的错误……所以有人可以检查我的代码吗？:)

因为现在它加载了活动..但不显示列表或操作栏：o

这是 \menu\activity_home.xml 中的 XML：

```
<menu xmlns:android="http://schemas.android.com/apk/res/android">
<item android:id="@+id/menu_settings"
    android:orderInCategory="100"
    android:showAsAction="never" />
<item android:id="@+id/maths"
    android:title="@string/maths"
    android:orderInCategory="1"
    android:showAsAction="always|withText" 
    android:titleCondensed="@string/maths" 
    android:icon="@drawable/ic_action_calculator" /> 
<item android:id="@+id/physics"
    android:icon="@drawable/ic_action_line_chart"
    android:title="@string/physics"
    android:orderInCategory="2"
    android:showAsAction="always|withText"/> 
```

这是布局\activity_home.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:text="@string/hello_world"/>

</RelativeLayout> 
```

所以基本上是空的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T23:10:46.047

如果您使用的是 ListActivity，您的 R.layout.activity_home 必须有一个 ListView，例如：

```
 <ListView android:id="@android:id/list"
           android:layout_width="match_parent"
           android:layout_height="match_parent"/> 
```

然后，您可以为适配器中的列表视图项创建一个新布局，或者为列表项使用预定义的布局，例如：

```
listView.setAdapter(new ArrayAdapter<String>(this,
        android.R.layout.simple_list_item_1, Liste)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T22:54:12.913

用这两行：

```
setContentView(R.layout.activity_home);
...
listView.setAdapter(new ArrayAdapter<String>(this,
            R.layout.activity_home, Liste)); 
```

您对整个 Activity 和每一行使用相同的布局，这没有意义。Activity 的布局应该包含一个 ListView 并且行布局不应该...

* * *

要使用默认布局，请删除此行：

```
setContentView(R.layout.activity_home); 
```

并改变这个：

```
listView.setAdapter(new ArrayAdapter<String>(this,
            android.R.layout.simple_list_item_1, Liste)); 
```

* * *

**此外**，您需要[`onListItemClick()`](http://developer.android.com/reference/android/app/ListActivity.html#onListItemClick%28android.widget.ListView,%20android.view.View,%20int,%20long%29)不要`onItemClick()`让行点击工作。

```
@Override
protected void onListItemClick (ListView l, View v, int position, long id) {...} 
```

* * *

> 好的，现在 LogCat 中唯一的条目是 Array Adapter：“您必须为 textview 提供资源 ID。

你必须给你的 TextView 一个 id：

```
<TextView
    android:id="@+id/text"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:text="@string/hello_world"/> 
```

并将创建适配器的方式更改为：

```
listView.setAdapter(new ArrayAdapter<String>(this,
            R.layout.activity_home, R.id.text, Liste)); 
```

# tfs - 无步骤查询 TFS2010 测试用例

> ID：13279570
> 
> 赞同：1
> 
> 时间：2012-11-07T22:44:23.490
> 
> 标签：tfs, tfs-2010, tfs-query

我在 TFS2010 中将测试用例从一个项目复制到另一个项目。一些测试用例处于“就绪”状态并且它们没有步骤。我想确保可以轻松找到这些测试用例，以便我可以将它们的状态更改回“设计”。我希望能够构建如下查询：

团队项目 = @Project
AND @Project 下的区域路径
AND 工作项类型 = 测试用例
AND 状态 = 就绪
AND 步骤 =

我注意到当我选择 Steps 作为字段时，Operator 的选择变成了“包含”和“不包含”。有谁知道任何方式来建立一个查询，将带回我正在寻找的结果？我不知道任何其他可用于此的字段。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T18:15:40.553

一个解决方案的破解，但一个有效的解决方案：

```
AND Steps Does Not Contain a*
AND Steps Does Not Contain b*
...
AND Steps Does Not contain z* 
```

这似乎完成了任务。

# javascript - 如何在extjs中获取文件夹路径而不是文件路径

> ID：13279572
> 
> 赞同：1
> 
> 时间：2012-11-07T22:44:33.193
> 
> 标签：javascript, jquery, html, extjs

如何使用 extjs 中的 Ext.form.field 访问文件夹而不是文件的路径。在extjs中是否有可能。

我可以使用上面的组件，但它只给了我文件名而没有文件的路径。

或者我应该使用第三方工具，如 jquery 还是动态 html/plain js？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T19:43:31.737

您可以使用 java、flash 或 activex 控件来执行此操作。

您还可以在 Sencha Desktop Packaging 中托管 extjs，即在带有嵌入式浏览器的已安装可执行文件中。

您也许可以使用 HTML5 获得文件夹访问权限，但这只是您域的本地文件夹，并且受到严格限制。

否则，存在浏览器文件/文件夹安全限制是有充分理由的，您应该考虑上传/下载以外的文件不受限制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T23:04:20.633

出于安全原因，无法使用网站获取有关客户端文件系统的任何信息。也不是 Javascript，也不是 PHP...

因此，您无法获取客户端文件的路径。

但是，您可以使用安装在他的计算机上的非网站应用程序来完成。

# python - 当客户端断开连接时，服务器会打印无穷无尽的换行符

> ID：13279577
> 
> 赞同：2
> 
> 时间：2012-11-07T22:44:50.223
> 
> 标签：python, sockets

我正在创建服务器，但我碰壁了，似乎无法爬过它......

我当前的代码运行良好，直到用户与服务器断开连接。无数的 \n 被打印出来，我似乎无法弄清楚为什么。

我知道问题出在 recv 函数上。我相信这与我的线程有关，但我似乎无法弄清楚它是什么。

这是代码，如果有人可以帮助我，我将不胜感激。

```
def recv(self, obj, addr, s):
    while True:
        try:print obj.recv(1024)
        except:pass

def connect(self, port):
    s = socket.socket()
    s.bind(('', port))
    s.listen(1)
    self.clearscreen()

    print "Waiting for connections..."
    while True:
        obj, addr = s.accept()
        verify = obj.recv(1024)
        if verify == "ea25364e2dab91b40ae4f73163854b5d":
            print "\n"+str(addr) + " has connected.\n "
            self.conns[addr] = obj
            try:
                Thread(target=self.handle, args=(obj, addr, s)).start()
                Thread(target=self.recv, args=(obj, addr, s)).start()
            except:pass
        else:pass 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T22:52:31.867

发生的情况是，您不断地从空缓冲区获取和打印数据。你应该检查你在 recv()ing 什么，以确保你真的得到了一些东西。

```
data = obj.recv(1024)
if not data:
    return
print data 
```

# php - 对 htmlspecialchars、real_escape_string 等感到困惑

> ID：13279578
> 
> 赞同：2
> 
> 时间：2012-11-07T22:44:50.930
> 
> 标签：php, mysql, security

我编写了一个不错的管理界面，包括库存管理、内容管理和博客。现在是时候将其锁定并确保其安全（是的，我应该从一开始就这样做......

对于博客创建/编辑，我使用 ckeditor 将 HTML 输出发布到 editblog.php。我也在使用简单的文本输入标题、作者等......

我很担心，因为博客会有 img src="uploads/etc.jpg"，以及 div、spans 等...

所以！当我清理这些数据时，我如何确保所有这些引号和斜杠都可以安全地推入我的 SQL 数据库中，我该怎么做才能将其吐回前端？我也很担心，因为如果博主“引用”了某些东西，我也不希望它被弄乱。

简单的输入，如标题、作者等 我正在使用 $title = mysqli_real_escape_string($title) 但这足够了吗？如何在避免攻击的同时保留用户的预期输入？

我已经完成了我的研究，但我仍然不明白。我希望有人能为我把它分解得又好又简单......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T23:15:25.760

又好又简单...

**您总是针对要写入的上下文进行清理。**

这些技术将保留用户的输入，但防止该输入被解释为特定上下文中的代码。

当您要查询数据库时，您担心SQL注入攻击：

*   使用 mysql_real_escape_string 为数据库查询清理 SQL。

当您想要显示将由浏览器解析的内容（如 HTML）时，您会担心跨站点脚本：

*   使用 htmlspecialchars 清理 HTML 输出。

这将提供基本的安全级别。

*   为了提高数据库端的安全性，您应该查看**准备好的语句**和 PHP **PDO**。
*   有关 htmlspecialchars 的一些陷阱的更多信息，请查看@Cheekysoft 的出色解释：[htmlspecialchars 和 mysql_real_escape_string](https://stackoverflow.com/questions/110575/do-htmlspecialchars-and-mysql-real-escape-string-keep-my-php-code-safe-from-inje)

# regex - 如何在powershell的正则表达式中插入变量

> ID：13279580
> 
> 赞同：3
> 
> 时间：2012-11-07T22:45:03.130
> 
> 标签：regex, powershell

我正在尝试查看文件中是否存在某些输入的条目，因此我使用正则表达式来查询每一行：

`cat $file | where {$_ -match "^script\$fileName -*"}`

其中 $fileName 是在别处定义的一些输入。

如何更改正则表达式以插入变量而不是匹配 '$fileName' ？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-08T10:02:47.143

除了给出的答案，因为 $fileName 可能包含诸如“。”之类的字符。或 '\' 您应该按如下方式对其进行转义：

```
cat $file | where {$_ -match "^script\\$([regex]::Escape($fileName)) -*"} 
```

Escape 方法将转义像 '.' 这样的位。以及对于你。

例如

```
[regex]::Escape(".\bar.txt") 
```

给

```
\.\\bar\.txt 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-08T00:33:08.767

`$fileName`被插值，所以你最终得到一个传递给正则表达式的字符串，如下所示：

```
cat $file | where {$_ -match "^script\foo.txt -*"} 
```

当实际上我们想要一个 liternal来匹配`\`时，它充当了下一个字符的转义字符。`\`在这种情况下，您需要转义转义字符，例如：

```
cat $file | where {$_ -match "^script\\$fileName -*"} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-17T15:55:08.137

也可以在 powershell 内部分解 RegEx。

```
$fileName = 'test'
'^script\test-*' -match ('\^script\\' + $fileName + '-*') 
```

更具可读性，并且可以与变量有括号的多维数组一起使用`[]`

```
$fileName = New-Object object[][] 1
$fileName[0] = @('test')
'^script\test-*' -match ('\^script\\' + $fileName[0][0] + '-*') 
```

# r - 按组选择第一行

> ID：13279582
> 
> 赞同：101
> 
> 时间：2012-11-07T22:45:17.027
> 
> 标签：r, dataframe, sqldf

从这样的数据框

```
test <- data.frame('id'= rep(1:5,2), 'string'= LETTERS[1:10])
test <- test[order(test$id), ]
rownames(test) <- 1:10

> test
    id string
 1   1      A
 2   1      F
 3   2      B
 4   2      G
 5   3      C
 6   3      H
 7   4      D
 8   4      I
 9   5      E
 10  5      J 
```

我想用每个 id / string 对的第一行创建一个新的。如果 sqldf 接受其中的 R 代码，则查询可能如下所示：

```
res <- sqldf("select id, min(rownames(test)), string 
              from test 
              group by id, string")

> res
    id string
 1   1      A
 3   2      B
 5   3      C
 7   4      D
 9   5      E 
```

是否有没有像创建新列这样的解决方案

```
test$row <- rownames(test) 
```

并使用 min(row) 运行相同的 sqldf 查询？

* * *

## 回答 #1

> 赞同：129
> 
> 时间：2012-11-07T23:12:54.090

您可以使用`duplicated`它非常快速地执行此操作。

```
test[!duplicated(test$id),] 
```

基准，对于速度怪胎：

```
ju <- function() test[!duplicated(test$id),]
gs1 <- function() do.call(rbind, lapply(split(test, test$id), head, 1))
gs2 <- function() do.call(rbind, lapply(split(test, test$id), `[`, 1, ))
jply <- function() ddply(test,.(id),function(x) head(x,1))
jdt <- function() {
  testd <- as.data.table(test)
  setkey(testd,id)
  # Initial solution (slow)
  # testd[,lapply(.SD,function(x) head(x,1)),by = key(testd)]
  # Faster options :
  testd[!duplicated(id)]               # (1)
  # testd[, .SD[1L], by=key(testd)]    # (2)
  # testd[J(unique(id)),mult="first"]  # (3)
  # testd[ testd[,.I[1L],by=id] ]      # (4) needs v1.8.3\. Allows 2nd, 3rd etc
}

library(plyr)
library(data.table)
library(rbenchmark)

# sample data
set.seed(21)
test <- data.frame(id=sample(1e3, 1e5, TRUE), string=sample(LETTERS, 1e5, TRUE))
test <- test[order(test$id), ]

benchmark(ju(), gs1(), gs2(), jply(), jdt(),
    replications=5, order="relative")[,1:6]
#     test replications elapsed relative user.self sys.self
# 1   ju()            5    0.03    1.000      0.03     0.00
# 5  jdt()            5    0.03    1.000      0.03     0.00
# 3  gs2()            5    3.49  116.333      2.87     0.58
# 2  gs1()            5    3.58  119.333      3.00     0.58
# 4 jply()            5    3.69  123.000      3.11     0.51 
```

让我们再试一次，但只有第一场比赛的竞争者，更多的数据和更多的复制。

```
set.seed(21)
test <- data.frame(id=sample(1e4, 1e6, TRUE), string=sample(LETTERS, 1e6, TRUE))
test <- test[order(test$id), ]
benchmark(ju(), jdt(), order="relative")[,1:6]
#    test replications elapsed relative user.self sys.self
# 1  ju()          100    5.48    1.000      4.44     1.00
# 2 jdt()          100    6.92    1.263      5.70     1.15 
```

* * *

## 回答 #2

> 赞同：64
> 
> 时间：2018-06-20T18:43:04.247

我赞成 dplyr 方法。

`group_by(id)`其次是

*   `filter(row_number()==1)`或者
*   `slice(1)`或者
*   `slice_head(1)` #(dplyr => 1.0)
*   `top_n(n = -1)`
    *   `top_n()`内部使用 rank 函数。负数从排名的底部选择。

在某些情况下，可能需要在 group_by 之后安排 id。

```
library(dplyr)

# using filter(), top_n() or slice()

m1 <-
test %>% 
  group_by(id) %>% 
  filter(row_number()==1)

m2 <-
test %>% 
  group_by(id) %>% 
  slice(1)

m3 <-
test %>% 
  group_by(id) %>% 
  top_n(n = -1) 
```

所有三种方法都返回相同的结果

```
# A tibble: 5 x 2
# Groups:   id [5]
     id string
  <int> <fct> 
1     1 A     
2     2 B     
3     3 C     
4     4 D     
5     5 E 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2012-11-08T00:12:09.793

关于什么

```
DT <- data.table(test)
setkey(DT, id)

DT[J(unique(id)), mult = "first"] 
```

* * *

# 编辑

还有一个独特的方法，`data.tables`它将按键返回第一行

```
jdtu <- function() unique(DT) 
```

* * *

我认为，如果您`test`在基准之外订购，那么您也可以从基准中删除`setkey`and`data.table`转换（因为 setkey 基本上按 id 排序，与 相同`order`）。

```
set.seed(21)
test <- data.frame(id=sample(1e3, 1e5, TRUE), string=sample(LETTERS, 1e5, TRUE))
test <- test[order(test$id), ]
DT <- data.table(DT, key = 'id')
ju <- function() test[!duplicated(test$id),]

jdt <- function() DT[J(unique(id)),mult = 'first']

 library(rbenchmark)
benchmark(ju(), jdt(), replications = 5)
##    test replications elapsed relative user.self sys.self 
## 2 jdt()            5    0.01        1      0.02        0        
## 1  ju()            5    0.05        5      0.05        0 
```

并且有更多的数据

**用独特的方法编辑**

```
set.seed(21)
test <- data.frame(id=sample(1e4, 1e6, TRUE), string=sample(LETTERS, 1e6, TRUE))
test <- test[order(test$id), ]
DT <- data.table(test, key = 'id')
       test replications elapsed relative user.self sys.self 
2  jdt()            5    0.09     2.25      0.09     0.00    
3 jdtu()            5    0.04     1.00      0.05     0.00      
1   ju()            5    0.22     5.50      0.19     0.03 
```

独特的方法在这里最快。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2012-11-07T22:50:49.943

一个简单的`ddply`选择：

```
ddply(test,.(id),function(x) head(x,1)) 
```

如果速度是一个问题，可以采用类似的方法`data.table`：

```
testd <- data.table(test)
setkey(testd,id)
testd[,.SD[1],by = key(testd)] 
```

或者这可能会更快：

```
testd[testd[, .I[1], by = key(testd]$V1] 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2014-07-29T12:03:18.090

现在，对于`dplyr`，添加一个不同的计数器。

```
df %>%
    group_by(aa, bb) %>%
    summarise(first=head(value,1), count=n_distinct(value)) 
```

您创建组，它们在组内进行汇总。

如果数据是数字，您可以使用：
`first(value)`[there is also `last(value)`] 代替`head(value, 1)`

见： [http ://cran.rstudio.com/web/packages/dplyr/vignettes/introduction.html](http://cran.rstudio.com/web/packages/dplyr/vignettes/introduction.html)

满的：

```
> df
Source: local data frame [16 x 3]

   aa bb value
1   1  1   GUT
2   1  1   PER
3   1  2   SUT
4   1  2   GUT
5   1  3   SUT
6   1  3   GUT
7   1  3   PER
8   2  1   221
9   2  1   224
10  2  1   239
11  2  2   217
12  2  2   221
13  2  2   224
14  3  1   GUT
15  3  1   HUL
16  3  1   GUT

> library(dplyr)
> df %>%
>   group_by(aa, bb) %>%
>   summarise(first=head(value,1), count=n_distinct(value))

Source: local data frame [6 x 4]
Groups: aa

  aa bb first count
1  1  1   GUT     2
2  1  2   SUT     2
3  1  3   SUT     3
4  2  1   221     3
5  2  2   217     3
6  3  1   GUT     2 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2012-11-08T17:15:38.603

(1) SQLite 有一个内置的`rowid`伪列，所以这有效：

```
sqldf("select min(rowid) rowid, id, string 
               from test 
               group by id") 
```

给予：

```
 rowid id string
1     1  1      A
2     3  2      B
3     5  3      C
4     7  4      D
5     9  5      E 
```

(2)`sqldf`本身也有`row.names=`论据：

```
sqldf("select min(cast(row_names as real)) row_names, id, string 
              from test 
              group by id", row.names = TRUE) 
```

给予：

```
 id string
1  1      A
3  2      B
5  3      C
7  4      D
9  5      E 
```

(3) 混合上述两种元素的第三种选择可能会更好：

```
sqldf("select min(rowid) row_names, id, string 
               from test 
               group by id", row.names = TRUE) 
```

给予：

```
 id string
1  1      A
3  2      B
5  3      C
7  4      D
9  5      E 
```

请注意，所有这三个都依赖于 SQL 的 SQLite 扩展，其中使用`min`or`max`保证会导致从同一行中选择其他列。（在其他可能无法保证的基于 SQL 的数据库中。）

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2012-11-07T22:56:41.263

基本 R 选项是`split()`- `lapply()`-`do.call()`成语：

```
> do.call(rbind, lapply(split(test, test$id), head, 1))
  id string
1  1      A
2  2      B
3  3      C
4  4      D
5  5      E 
```

更直接的选择是`lapply()`函数`[`：

```
> do.call(rbind, lapply(split(test, test$id), `[`, 1, ))
  id string
1  1      A
2  2      B
3  3      C
4  4      D
5  5      E 
```

`1, )`调用结束时的逗号空格`lapply()`是**必不可少**的，因为这相当于调用`[1, ]`选择第一行和所有列。

# javascript - 在 javascript 中的函数内部传递的 href 属性中插入一个函数

> ID：13279592
> 
> 赞同：0
> 
> 时间：2012-11-07T22:45:51.273
> 
> 标签：javascript, function, call

我需要在 href 属性中调用 javascript 中的函数，该属性本身正在另一个 javascript 函数中传递。

```
$('head').append('<link type="text/css" rel="stylesheet" href="'document.write(getBaseURL());'/dao_comingsoon/assets/css/layoutArabic.css"/>'); 
```

但它不起作用。

这是 getBaseURL 函数

```
function getBaseURL() {
var url = location.href;  // entire url including querystring - also: window.location.href;
var baseURL = url.substring(0, url.indexOf('/', 14));

if (baseURL.indexOf('http://localhost') != -1) {
    // Base Url for localhost
    var url = location.href;  // window.location.href;
    var pathname = location.pathname;  // window.location.pathname;
    var index1 = url.indexOf(pathname);
    var index2 = url.indexOf("/", index1 + 1);
    var baseLocalUrl = url.substr(0, index2);

    return baseLocalUrl + "/";
}
else {
    // Root Url for domain name
    return baseURL + "/";
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T22:48:00.297

它应该是这样的：

```
$('head').append('<link type="text/css" rel="stylesheet" href="' + getBaseURL() + '/dao_comingsoon/assets/css/layoutArabic.css"/>'); 
```

# asp.net-mvc - 401 Unauthorized：由于凭据无效，访问被拒绝

> ID：13279593
> 
> 赞同：88
> 
> 时间：2012-11-07T22:45:53.900
> 
> 标签：asp.net-mvc, iis, http-status-code-401, form-authentication

我正在使用 IIS Express 部署 MVC4 应用程序。该网站在同一台计算机上完美运行。但在 Lan 它给了我错误 401。

```
<authentication mode="Forms">
    <forms loginUrl="~/" slidingExpiration="true" timeout="20">
    </forms>
</authentication> 
```

在家庭控制器

```
[HttpPost]
[AllowAnonymous]        
public ActionResult Index(LoginModel model, string returnUrl)
{
} 
```

我在管理员模式下从命令提示符启动 IIS 服务器。IIS 以错误响应请求`401`。

有什么线索吗？

* * *

## 回答 #1

> 赞同：249
> 
> 时间：2015-03-03T16:31:14.423

我意识到这是一篇较旧的帖子，但我在 IIS 8.5 上遇到了同样的错误。希望这可以帮助另一个遇到相同问题的人（我没有在其他类似标题的问题中看到我的问题）。

应用程序池标识似乎已正确设置一切，但我继续收到错误消息。经过大量挖掘，匿名用户可以使用应用程序池身份或特定用户的凭据进行设置。无论出于何种原因，我的默认用户都是特定用户。将设置更改为 App Pool Identity 为我解决了这个问题。

1.  IIS 管理器 → 站点 → 网站
2.  双击“身份验证”
3.  选择匿名身份验证
4.  从“操作”面板中，选择“编辑”
5.  选择应用程序池标识并单击确定

希望这可以节省其他人一些时间！

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-12-05T06:10:26.770

如果您使用的是 IIS 7，请执行以下操作：

1.  选择您的网站。
2.  单击错误页面。
3.  编辑功能设置。
4.  选择详细错误。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-11-08T07:19:52.330

确保您在 iis 上启用了匿名身份验证，如下所示：

![在此处输入图像描述](../Images/dd4412dc1fb6e5a5e2ea737ee918c406.png)

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2014-04-23T21:05:12.780

如果有人仍在寻找这个，这为我们解决了问题：

不管这对谁有帮助，这救了我的命……

IIS 7 很难弄清楚为什么我得到 401 - 未经授权：由于凭据无效，访问被拒绝......直到我这样做......

1.  打开 IIS 并选择导致 401 的网站
2.  打开“IIS”标题下的“Authentication”属性
3.  单击“Windows Authentication”项，然后单击“Providers”
4.  对我来说，问题是协商高于 NTLM。我假设在幕后进行了某种握手，但我从未真正通过身份验证。我把 NTLM 移到了最上面的位置，然后 BAM 修复了它。

[这是找到它的链接](http://social.technet.microsoft.com/Forums/en-US/c9239a89-fbee-4adc-b72f-7a6a9648331f/401-unauthorized-access-is-denied-due-to-invalid-credentials?forum=winserversecurity)。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2014-08-05T16:14:41.870

我意识到这是一个老问题，但这在我的搜索中出现了。对于最近构建、首次部署的 MVC 应用程序有类似的问题，并且身份验证机制没有完全散列。

就我而言，这不是 IIS 设置，而是未`[AllowAnonymous]`装饰的控制器。我在 Layout.cshtml 中使用了 Render.Action/Html.Action 并且用户未经身份验证。因此，布局尝试在未经身份验证的上下文中加载经过身份验证的操作。

一旦我将操作更新为 AllowAnonymous，问题就消失了，[这就是导致我的原因](https://serverfault.com/questions/137073/401-unauthorized-on-server-2008-r2-iis-7-5)。

希望这可以帮助某人。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2020-12-16T18:49:41.223

我在 IIS 10 上遇到了这个问题。这就是我修复它的方法。

1.  打开 IIS
2.  选择站点
3.  开放认证
4.  编辑匿名身份验证
5.  选择应用程序池标识

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-06-13T20:21:52.953

我今天有一个类似的问题。出于某种原因，我的**GET**请求很好，但是我的**WCF WebHttp 服务的****PUT**请求失败

 **将以下内容添加到 Web.config 解决了该问题

```
 <system.web>
  <authentication mode="Forms" />
 </system.web> 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-07-31T14:32:12.600

当我使用 MVC 文件夹创建一个空项目然后将应用程序部署到服务器时，我遇到了这个错误。我的问题是我没有在 中定义身份验证`Web.config`，所以我所要做的就是将此行添加到`system.web`标签中。

```
<system.web>
    <authentication mode="None"/>
</system.web> 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2016-11-17T08:33:50.397

我在 IIS 8.5 下遇到了同样的问题。对我来说，一个可行的解决方案是更改 IIS 以显示详细的错误。请参阅 sna2stha 的回答。但我认为将详细的错误消息转发到生产环境中的浏览器并不是一个好主意。我在 httpErrors-Section 中添加/更改了 existingResponse 属性，因此 IIS 没有处理任何现有的 Asp.net 响应：

```
<system.webServer>
   <httpErrors existingResponse="PassThrough" />
</system.webServer> 
```

这对我有用。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2015-08-31T09:31:58.960

我遇到了类似的问题。

该文件夹已共享并提供了经过身份验证的用户权限，这解决了我的问题。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-06-27T20:13:36.483

在我的例子中，使它起作用的是**将匿名用户身份从特定用户 (IUSR) 更改为应用程序池身份。**很奇怪，因为其他网站正在使用特定用户 IUSR 并且工作正常。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2021-04-02T13:55:58.750

正如许多答案所表明的那样，错误可能是由多种原因引起的。在我的例子中，它与授权规则相关联：它们是在应用程序部署后很久才添加的。IIS 的此功能作为 Windows 组件打开（万维网服务->安全性->URL 授权）。

web.config 中的这个特定部分是罪魁祸首：

```
<system.webServer>
  <security>
    <authorization>
      <remove users="*" roles="" verbs="" />
      <add accessType="Deny" users="?" />
      <add accessType="Deny" users="user1,user2" />
      <add accessType="Allow" users="*" />
    </authorization>
  </security>
</system.webServer> 
```

因此，`users="?"`由于默认情况下继承了规则，因此也阻止了对具有匿名身份验证的路径的访问记录。但是，在 IIS 中，您可以转到应匿名访问的特定文件夹/文件，然后选择授权规则：

[![在此处输入图像描述](../Images/bcc011924b52f170773266707bddfcfe.png)](https://i.stack.imgur.com/j6Oxs.jpg)

在这里，可以通过删除旧规则并可选地添加允许的规则来在本地覆盖规则以使其更明确：

[![在此处输入图像描述](../Images/5cd6564c5a439b01130606983e26de27.png)](https://i.stack.imgur.com/fGGtc.jpg)

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2022-01-12T14:09:28.403

右键单击项目文件所在的主目录。

属性-> 安全-> 编辑-> 添加-> 键入`IIS_IUSRS`并单击“检查名称”按钮。

结果看起来像`ComputerUsername\IIS_IUSRS`

例如：桌面-M0R6PVF\IIS_IUSRS

然后点击“确定”按钮。

[![在此处输入图像描述](../Images/51e193105cd3b8bcb4699b6d2cc22b81.png)](https://i.stack.imgur.com/hHV9u.png)

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-01-14T10:10:18.363

我有一个网站的权限问题，只是无法让 Windows 身份验证工作。这最终是一个[文件夹权限而不是 ASP.NET 配置问题](https://stackoverflow.com/questions/5437723/iis-apppoolidentity-and-file-system-write-access-permissions/59731509#59731509)，一旦`Everyone`用户被授予权限，它就开始工作。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-02-28T00:11:38.843

我有一个稍微不同的问题。凭证问题是针对运行应用程序的底层用户，而不是尝试登录的用户。对此进行测试的一种方法是转到 IIS 管理 -> 站点 -> 您的站点 -> 基本设置 -> 测试设置。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2021-11-15T18:07:49.423

您可以在 Web 项目上按 F4 以获取“项目属性”窗口。

然后确保在“开发服务器”部分中**启用了匿名身份验证：**

[![在此处输入图像描述](../Images/c7b39ac4b8cf49dc0e2d5e5e1766efc0.png)](https://i.stack.imgur.com/VxHSu.png)

* * *

## 回答 #17

> 赞同：-1
> 
> 时间：2018-01-31T14:02:32.057

就我而言，
我的应用程序是在其中开发的，`MVC`并且我的家庭控制器类被装饰了，`[Authorize]`这导致了这个问题。
所以我删除了它，因为我的应用程序不需要任何身份验证。**

# c# - 带有强制键盘的 GridView 文本框

> ID：13279594
> 
> 赞同：0
> 
> 时间：2012-11-07T22:45:56.263
> 
> 标签：c#, android, asp.net, gridview

我有一个 GridView ，它有一个名为的列`Run Time`，它使用 TextBoxes `rTime`。我将在安卓操作系统上使用这个 GridView 并希望它在有人点击文本框时拉出键盘。这在没有 GridView 的情况下以前可以工作，但我遇到了一个`The name 'rTime' does not exist in the current context`错误。这是我的aspx代码：`

```
 <asp:TemplateField HeaderText="labelID" Visible="false">
        <ItemTemplate>
            <asp:Label ID="ID" runat="server" Text='<%# Eval("Id") %>' />
        </ItemTemplate>
    </asp:TemplateField>

    <asp:TemplateField HeaderText="First Name">
        <ItemTemplate>
            <asp:Label ID="labelfirstname" Visible="true" runat="server" Text='<%# Eval("fName") %>' />

        </ItemTemplate>
    </asp:TemplateField>
     <asp:TemplateField HeaderText="Last Name">
        <ItemTemplate>
            <asp:Label ID="labellastname" Visible="true" runat="server" Text='<%# Eval("lName") %>' />
        </ItemTemplate>
    </asp:TemplateField>
     <asp:TemplateField HeaderText="Run Time Needed">
        <ItemTemplate>
            <asp:Label ID="labelrTimeN" Visible="true" runat="server" Text='<%# Eval("rTimeN") %>' />
        </ItemTemplate>
    </asp:TemplateField>
    <asp:TemplateField HeaderText="Run Time">
        <ItemTemplate>
            <div style="display:none"><asp:TextBox ID="rTime" runat="server" Height="16px" 
        ontextchanged="TextBox1_TextChanged" Width="108px"></asp:TextBox></div>
    <span class="style4"><strong>Meter Run:</strong></span><span class="style5">&nbsp;</span><input onblur="document.getElementById('<%=rTime.ClientID %>').value = this.value" 
    type="tel" style="width: 100px; height: 31px;" />
        </ItemTemplate>
    </asp:TemplateField>

</Columns>
</asp:GridView>` 
```

这是c#：

```
private bool isEditMode = false;
    protected void Page_Load(object sender, EventArgs e)
    {

        if (!Page.IsPostBack)
        {
            BindData();
        }
        UpdatePanel1.Visible = false;
    }
    private void BindData()
    {

        string connectiongString = "Data Source=WSCJTCSQ1;Initial Catalog=TestDB;Persist Security Info=True;User ID=v2soft;Password=passwordv2soft";
        SqlConnection myConnection = new SqlConnection(connectiongString);
        SqlDataAdapter ad = new SqlDataAdapter("SELECT Id, fName, lName, rTimeN, rTime FROM bleaTest", myConnection);
        DataSet ds = new DataSet();
        ad.Fill(ds);
        GridView1.DataSource = ds;
        GridView1.DataBind();

    }

    protected void Button1_Click(object sender, EventArgs e)
    {
        isEditMode = true;
        UpdatePanel1.Visible = true;
        BindData();
    }
    protected void TextBox1_TextChanged(object sender, EventArgs e)
    {

    }

    protected void Button2_Click(object sender, EventArgs e)
    {
        Update();
    }
    protected bool IsInEditMode
    {

        get { return this.isEditMode; }

        set { this.isEditMode = value; }

    }

    private void Update()
    {
        StringBuilder sb = new StringBuilder();

        foreach (GridViewRow row in GridView1.Rows)
        {
            sb.Append("UPDATE bleaTest SET rTime = '");

            sb.Append((row.FindControl("rTime") as TextBox).Text);

            sb.Append("'");

            sb.Append(" WHERE id = ");

            sb.Append(Convert.ToInt32((row.FindControl("ID") as Label).Text));

            sb.Append(" ");

        }
        string connectiongString = "Data Source=WSCJTCSQ1;Initial Catalog=TestDB;Persist Security Info=True;User ID=v2soft;Password=passwordv2soft";
        SqlConnection myConnection = new SqlConnection(connectiongString);
        SqlCommand myCommand = new SqlCommand(sb.ToString(), myConnection);
        myConnection.Open();
        myCommand.ExecuteNonQuery();
        myConnection.Close();

        isEditMode = false;

        BindData();

        UpdatePanel1.Visible = false;

    }
    protected void gvUsers_RowDataBound(object sender, GridViewCommandEventArgs e)
    {

    } 
```

先感谢您！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T16:26:23.160

做了一些更多的研究并重新编写了一些代码。这是更新：

```
<asp:TemplateField HeaderText="Run Time">
        <ItemTemplate>
           <div style="display:none"> <asp:TextBox ID="rTime" runat="server" type="number" Text='<%# Eval("rTime") %>' ></asp:TextBox></div>
           <input onblur="document.getElementById('<%# ((GridViewRow)Container).FindControl("rTime").ClientID %>').value = this.value" 
    type="tel" style="width: 100px; height: 31px;" />
        </ItemTemplate> 
```

# perl - 全局销毁期间的 SIG 错误

> ID：13279600
> 
> 赞同：3
> 
> 时间：2012-11-07T22:46:28.803
> 
> 标签：perl, signals, runtime-error

我创建的脚本有问题。这是我第一次使用信号，因为我希望我的脚本像守护进程一样运行，所以我设置了几个信号处理程序来正确结束我的脚本：

```
local $SIG{HUP} = \&StopSuperviser;
local $SIG{INT} = \&StopSuperviser;
local $SIG{QUIT} = \&StopSuperviser;
local $SIG{ILL} = \&StopSuperviser;
local $SIG{ABRT} = \&StopSuperviser;
local $SIG{TERM} = \&StopSuperviser; 
```

这工作正常，但是当我将其中一个信号发送到我的脚本（Crt-C，kill -15，kill -1 ...）时，StopSuperviser 函数被正确调用，但我总是在脚本的输出中收到以下错误：

> 在全局销毁期间，参数“HUP”在空操作中不是数字。

我在谷歌上搜索过，但没有找到任何处理这种行为的东西。

有人可以对此有所了解吗？

非常感谢您的帮助

此致

弗洛朗

#

感谢四位您的回复，这里是 StopSuperviser 函数：

```
sub StopSuperviser
{
    print "On quite\n";
    $StopAlarm = 1;
    &DeleteThreadOrder($AllProcess);
    foreach my $Subprocess (@$AllProcess) {
        foreach my $thread (@{$Subprocess->{Thread}}) {
            $thread->kill('USR1');
            $thread->join();
        }
    }
    exit;
} 
```

我还使用以下包：

```
use Alarm::Concurrent; 
```

这可能很重要，也可能不重要:)希望这有帮助:)

再次感谢您的回复和帮助

此致

弗洛朗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T21:49:38.260

今年早些时候我遇到了这个问题，最终在 PerlMonks 上找到了解决方案，但我现在找不到链接。如果我遇到它，我会更新。他们的解释比我在这里介绍的要详细得多。

它是 perlsub 中描述的特性的一种表达方式：

> 如果使用 & 形式调用子程序，则参数列表是可选的，如果省略，则不会为子程序设置 @_ 数组：调用时的 @_ 数组对子程序可见。

如果有记忆，您应该可以通过更改来修复它：

```
local $SIG{HUP} = \&StopSuperviser; 
```

至

```
local $SIG{HUP} = sub { StopSuperviser() }; 
```

# php - Javascript 比 PHP 大三倍

> ID：13279602
> 
> 赞同：-2
> 
> 时间：2012-11-07T22:46:33.267
> 
> 标签：php, javascript

> **可能重复：**
> [PHP 右移](https://stackoverflow.com/questions/3325640/php-shift-right)

有什么能力在 php中获得与[(>>> ) 相同的 javascript 的三倍结果？](http://msdn.microsoft.com/en-us/library/342xfs5s%28v=vs.94%29.aspx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T22:50:40.837

```
function urshift($n, $s) {
    return ($n >= 0) ? ($n >> $s) :
        (($n & 0x7fffffff) >> $s) | 
            (0x40000000 >> ($s - 1));
} 
```

未经测试，[信用在这里](http://www.sitepoint.com/forums/showthread.php?449434-Unsigned-right-bitwise-shift)。

# php - 什么是“美国州”的 sql 查询首先出现？

> ID：13279604
> 
> 赞同：-1
> 
> 时间：2012-11-07T22:46:50.287
> 
> 标签：php, mysql, database

我有名为员工的 MySQL 表

```
 1\. id 
 2\. employee 
 3\. state 
```

我不知道如何查询数据库，其中名称为“纽约”的州将首先出现，所有其他记录将正常出现。这是我到目前为止所拥有的

```
$sql = "select * from employees order by"; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-07T22:55:50.540

最简单的选择：

```
ORDER BY (state = 'New York') DESC, state 
```

因为`(state = 'New York')`将返回 1 (true) 或 0 (false)，您可以轻松地对结果进行排序，以便在其他州之前返回纽约（`state = 'New York'`返回 1）。

另一种选择是使用`CASE`：

```
ORDER BY CASE WHEN state = 'New York' THEN 0 ELSE 1 END, state 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-07T22:58:37.177

```
select * from employees order by state="New York" desc; 
```

这会按州对记录进行排序，是否等于纽约。我注意到您将它拼写为 New Yark 两次，因此您可能需要取消更正上述内容才能使用您的数据。“desc”导致排序下降而不是上升，将“真实”值放在首位。

正如 JClaspill 所指出的，没有状态等于“纽约”的记录将自然排序，而不是按状态排序。添加`, state`到该`order by`语句将按州按字母顺序对这些其他记录进行排序，但首先保留“纽约”记录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T22:53:01.963

使用[控制流函数](http://dev.mysql.com/doc/refman/5.0/en/control-flow-functions.html)和[字符串函数](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html)将“AAA”添加到“New York”而不是其他任何内容。

按结果字符串排序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T22:59:25.010

您可以通过强制相关状态提高等级来向订单添加条件：

```
mysql [sandbox]> create table t1 (id integer primary key, state varchar(20));
mysql [sandbox]> insert into t1 values(1,'Last State'), (2, 'First State');
mysql [sandbox]> select * from t1;
1   Last State
2   First State
mysql [sandbox]> select * from t1 order by state='Last State';
2   First State
1   Last State 
```

这对 2 行的计算结果为“假，真”，这对将假条件置于顶部进行排序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-07T23:57:58.513

$sql = "SELECT * FROM employees ORDER BY CASE WHEN state = \'New York\' THEN 0 ELSE 1 END, state";

# php - 在 app/AppKernel.php 中找不到 FOSUserBundle 'Class 'FOS\UserBundle\FOSUserBundle' 的 Symfony 2.1 配置

> ID：13279606
> 
> 赞同：3
> 
> 时间：2012-11-07T22:47:02.640
> 
> 标签：php, windows, symfony, wamp, fosuserbundle

我在 Windows 上使用 symfony，并尝试按照[官方文档中的说明配置 FOSUserBundle](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Resources/doc/index.md)

当我运行时，`php app/console doctrine:schema:update --force`我收到此消息：

```
Class 'FOS\UserBundle\FOSUserBundle' not found in app/AppKernel.php line 24; 
```

我按照我的方式配置了 AppKernel.php：

```
public function registerBundles()
{
    $bundles = array(
        // The rest
        new FOS\UserBundle\FOSUserBundle(),
    );

    return $bundles;
} 
```

我的`FOSUserBundle.php`文件位于`vendor/friendsofsymfony/user-bundle/FOS/UserBundle`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T08:36:20.560

我认为您还需要在自动加载 ex. 中注册一个命名空间：

```
$loader->registerNamespaces(array(
        //all the rest
        'FOS' => $vendor_dir . '/bundles',
)); 
```

它应该由作曲家在这里完成。所以运行`php composer update`。如果您使用缓存，`APC`请记住重新启动`apache`. 但请记住，APC 是从 bootstrap.php.cache 加载的，女巫是由`php composer update`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-07T21:16:53.217

我有同样的问题。我发现 FOSUserBundle 没有正确安装。您应该删除 /vendor/friendsofsymfony/ 目录，然后使用以下命令运行更新包：

```
php composer.phar update friendsofsymfony/user-bundle 
```

这对我有用。我希望它可以帮助遇到同样问题的其他人。

# c - 如何在结构中创建指针

> ID：13279609
> 
> 赞同：2
> 
> 时间：2012-11-07T22:47:20.330
> 
> 标签：c, data-structures

我有以下结构：

```
typedef struct bucket {
    unsigned int contador; 
    unsigned int * valor;
} Bucket;

typedef struct indice {
    unsigned int bs;            
    unsigned int valor;      
    unsigned int capacidade; 
    Bucket * bucket;
} Indice;

typedef struct tabela {
    unsigned int bs; 
    Indice * indice;
} Tabela; 
```

我想做这样的事情：

```
tabela->indice[2].bucket = &tabela->indice[0].bucket; 
```

但我得到分段错误。

如何获取`tabela->indice[0].bucket`地址并关联到`tabela->indice[2].bucket`.

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T22:52:22.380

我可能会因为试图回答交流问题而被否定，但这里什么都没有

你试过摆脱`&`吗？

```
tabela->indice[2].bucket = tabela->indice[0].bucket; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T22:52:31.693

您必须初始化指针以指向有效的东西。简单地创建结构的实例并不能为您做到这一点。例如：

```
Tabela t = {};  /* t is a valid, zero-initialized object, but indice is not valid */

t.indice = malloc(sizeof(Indice) * some_count);
/* now t.indice is valid */

for(int i = 0; i < some_count; ++i)
    t.indice[i].bucket = malloc(sizeof(Bucket));

/* now t.indice[0-(some_count-1)].bucket are all valid */ 
```

* * *

顺便说一句，您的指针副本不正确。

```
tabela->indice[2].bucket = tabela->indice[0].bucket;
/* assuming indices 0 and 2 are valid, this now works (but leaks memory)
   note that I removed the &.  It is incorrect and produces
   a Bucket** because t.indice[n].bucket is already a pointer */ 
```

但是，这会导致内存泄漏。我很难弄清楚你在这里真正想要完成什么。

# network-programming - 添加新地址系列 (AF_xxx)

> ID：13279610
> 
> 赞同：2
> 
> 时间：2012-11-07T22:47:22.243
> 
> 标签：network-programming, linux-kernel

我遇到了实现某种 IGMP 侦听后端的内核驱动程序代码，作为其功能的一部分，它创建了一个新的套接字地址系列 AF_IGMPSNOOP，但实际上只为这种类型的套接字实现了一些操作：

```
static struct proto_ops igmp_snoop_ops = {
   family:       AF_IGMP_SNOOP,
   release:      _igmp_snoop_sock_release,
   bind:         sock_no_bind,
   connect:      sock_no_connect,
   socketpair:   sock_no_socketpair,
   accept:       sock_no_accept,
   getname:      sock_no_getname,
   poll:         datagram_poll,
   ioctl:        sock_no_ioctl,
   listen:       sock_no_listen,
   shutdown:     sock_no_shutdown,
   setsockopt:   _igmp_snoop_setsockopt,
   getsockopt:   sock_no_getsockopt,
   sendmsg:      _igmp_snoop_sock_sendmsg,
   recvmsg:      _igmp_snoop_sock_recvmsg,
   mmap:         sock_no_mmap,
   sendpage:     sock_no_sendpage,
} 
```

然而，从用户空间的角度来看，一个套接字被创建为：

```
fd = socket (AF_IGMPSNOOP, SOCK_RAW, IPPROTO_IGMP) 
```

我想知道添加一个新系列的理由是什么，而实际上是使用原始套接字来访问 IGMP 数据包的堆栈？只创建 AF_INET 原始套接字并做这些事情不是一样吗？

期待您的来信！谢谢。

标记

# php - 通过 php 登录重定向功能将 URL 中的变量传递到 wp-login 表单输入

> ID：13279611
> 
> 赞同：1
> 
> 时间：2012-11-07T22:47:21.983
> 
> 标签：php, javascript, wordpress

这是一个有趣的问题，但可能只有天才才能解决这个问题。这是一个奇怪的。

需要一点 javascript 和对我现有的 php wordpress 功能进行一点调整。

我有一个使用此功能对公众锁定的 wp 网站...

```
add_action('get_header', 'wpq_member_only_site');
function wpq_member_only_site() {

    if ( !is_user_logged_in() ) {

        $redirect_after_login = get_home_url();

        $login_url = wp_login_url( $redirect_after_login );

        wp_redirect( $login_url, 302 );
        exit;
    }

} 
```

...它将未登录的用户重定向到登录表单。

我的问题是，我想使用这样的 URL 变量...

**http://example.com?user=media&password=23747**

...不知何故，（我猜）通过函数将其传递到登录页面 URL ...

**http://example.com/wp-login.php?redirect_to=http%3A%2F%2Fexample.com&user=media&password=23747**

...所以我的 login_head 中的脚本可以使用，并自动预填充登录表单。

我将使用此函数将脚本插入到我的 login_head 中...

```
function my_login_head() {
  echo '

      <!-- script here -->
  ';
}
add_action('login_head', 'my_login_head'); 
```

有人认为他们可以帮助我吗？或者知道它是否可能。

这个想法是，所以我可以使用这个 URL 让人们无需知道用户名或密码即可访问。

任何想法或帮助都会很棒，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T00:08:00.603

对于这样的网址...

**http://example.com/wp-login.php?ul=media&up=5434535**

```
function my_login_head() {
        if(isset($_GET['ul'])&& isset($_GET['up'])){
                $ul=esc_attr($_GET['ul']);
                $up=esc_attr($_GET['up']);
                echo '<script>
                        window.onload = function() {
                                var ul=document.getElementById("user_login");
                                ul.value = "'.$ul.'";
                                var up=document.getElementById("user_pass");
                                up.value = "'.$up.'";
                        }
                </script>';
        }
}
add_action('login_head', 'my_login_head'); 
```

如果您想使用如下网址：

**http://example.com/?ul=media&up=5434535**

要将非成员重定向到预先填写的登录表单，您可以使用原始“wpq_member_only_site”函数的修改版本：

```
add_action('get_header', 'wpq_member_only_site');
function wpq_member_only_site() {
        if ( !is_user_logged_in() ) {
                $redirect_after_login = get_home_url();
                $autofill="";
                if(isset($_GET['ul']) && isset($_GET['up'])){
                        $ul=esc_attr($_GET['ul']);
                        $up=esc_attr($_GET['up']);
                        $autofill="&ul=".$ul."&up=".$up;
                }
                $login_url = wp_login_url( $redirect_after_login ).$autofill;
                wp_redirect( $login_url, 302 );
                exit;
        }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T23:06:03.793

写完后，您似乎可以通过另一种方法来做到这一点：只需调用[wp_signon()](http://codex.wordpress.org/Function_Reference/wp_signon)函数，因此您无需弄乱 wp-login.php。只需 wp_signon($credentials) 然后 wp_redirect($wherever)。

您可以在任何页面上执行此操作，因此您的拇指驱动器技术可以链接到`site.com/member-login/?query=string`. `/member-login`将是处理此信息的自定义模板。

我可能会建议：创建一个散列以使其更加模糊。然后它看起来像： `/member-login/?x=Ajzf29xjz4jfjAJkdSlj3`或其他。

无论如何......回到我原来的答案。听起来你很接近...

```
wp_redirect('wp-login.php?redirect_to=http%3A%2F%2Fexample.com&user=media&password=23747'); 
```

在您的登录头函数中，尝试追踪这些`$_GET`变量以确保它们通过。我认为这个页面上没有加载 jQuery，所以`<script>`如果你要使用它，你会想要回显一个 jQuery 包含。

您的登录头功能：

```
<script src="jquery.js"></script>
<script>
$(document).ready(function(){
    $("form selector").val("<?php echo $_GET['user']; ?>");
}); 
```

类似的东西？

**事情是这样的：**

他们仍然必须单击提交按钮。

您知道您可以使用简单的函数调用登录用户吗？ [wp_signon()](http://codex.wordpress.org/Function_Reference/wp_signon)

# c# - 我无法使用我已经在项目中作为参考导入的库

> ID：13279613
> 
> 赞同：3
> 
> 时间：2012-11-07T22:47:33.877
> 
> 标签：c#, .net, c#-4.0, sift

我正在用 c# 编写一个计算机视觉程序，需要 SIFT 项目的一部分；我下载了 SIFT 的 MEMO 库：

[http://www.nowozin.net/sebastian/tu-berlin-2006/libsift/](http://www.nowozin.net/sebastian/tu-berlin-2006/libsift/)

在我的项目中，我添加了两个库 ****libsift.dll 和 ICSharpCode.SharpZipLib.dll** ** 作为对我的项目的引用。

![在此处输入图像描述](../Images/56440a1185a39f6ba2f7797b66c7c0b8.png)

现在我想在代码“USING libsift”之上提到 libsift，它无法识别它；

![在此处输入图像描述](../Images/610592176d556eead8d17968e4e8c96f.png)

如果我想制作此类 atuo detect 的实例，则更甚，无法识别它。

![在此处输入图像描述](../Images/5eb06cfb19cbd4c9c28a9bc240ed8bb1.png)

这很奇怪，因为我可以在对象浏览器中看到这个库的功能。

![在此处输入图像描述](../Images/4fcf98885de30d954d751fc4fd92a1fb.png)

尽管我可以在对象浏览器中看到这些功能，但我无法使用我已经在项目中作为引用导入的库？可能是什么问题呢？

（我在 Windows 中有 c# .Net VS2010。）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-07T22:52:45.643

*看起来*它们在根命名空间中 - 而不是在名为`libsift`. 如果是这种情况，您不需要`using libsift;`指令 - 只需尝试`Keypoint`直接访问 etc。或者可能`global::Keypoint`。应该注意的是，将类型转储到根命名空间是不受欢迎的——它很难避免冲突。但那是 的错`libsift`。

另一种可能性是您更改了引用上的“别名”属性；那应该是“全球性的”。当您在解决方案资源管理器中选择单个引用时，您可以在属性面板中看到这一点 - 旁边是“复制本地”、“特定版本”等内容。如果是其他内容：将其更改回“全局”，或学习关于*外部别名*。

在本地测试（类型在全局命名空间中）：

![在此处输入图像描述](../Images/108cc75621528052c3a1dd0e7307381f.png)

# javascript - JavaScript 对象：动态处理访问器？

> ID：13279614
> 
> 赞同：0
> 
> 时间：2012-11-07T22:47:35.410
> 
> 标签：javascript, v8, accessor

如何检查以查看正在访问的对象，从而有效地创建动态设置器？

我想做这样的事情：

```
var People = {};
// ...some code to change accessor on People...
var greeting = People.StevenSpielberg;
alert(greeting); // "Hi StevenSpielberg!" 
```

我可能写的*伪代码是：*

```
People[name] = function(name) { return "Hi " + name; } 
```

有任何想法吗？

# java - Mockito 的 ArgumentCaptor：一个方法名，两个方法定义

> ID：13279617
> 
> 赞同：1
> 
> 时间：2012-11-07T22:48:01.177
> 
> 标签：java, unit-testing, mockito

我正在尝试编写一个测试来验证可以接受两个不同参数的相同方法名称的调用。我最初尝试的代码片段：

```
ArgumentCaptor<Label> labelCaptor = ArgumentCaptor.forClass(Label.class);
Mockito.verify(fakeSheet, Mockito.times(4)).addCell(labelCaptor.capture());

ArgumentCaptor<Number> numberCaptor = ArgumentCaptor.forClass(Number.class);
Mockito.verify(fakeSheet, Mockito.times(2)).addCell(numberCaptor.capture()); 
```

然而，Mockito 抱怨 addCell 在第一次验证时运行了 6 次。所以，我尝试了这个：

```
ArgumentCaptor<Label> labelCaptor = ArgumentCaptor.forClass(Label.class);
Mockito.verify(fakeSheet, Mockito.times(6)).addCell(labelCaptor.capture());

ArgumentCaptor<Number> numberCaptor = ArgumentCaptor.forClass(Number.class);
Mockito.verify(fakeSheet, Mockito.times(6)).addCell(numberCaptor.capture()); 
```

哪个运行，但在两个 ArgumentCaptor 中给了我所有 6 个参数调用，将我期望的所有 6 个对象的信息存储到两个 ArgumentCaptor 实例中。

这感觉非常错误，我可以用它写一个测试，但我的捕获者没有区分这两个类的事实让人感觉很脏。有没有办法让 Mockito 区分两者？

# joomla2.5 - 在 Virtuemart 中获取产品自定义字段值

> ID：13279619
> 
> 赞同：3
> 
> 时间：2012-11-07T22:48:09.170
> 
> 标签：joomla2.5, joomla-extensions, virtuemart

我正在尝试获取产品自定义字段的值。我只有那个产品的 ID。我知道自定义字段的标题。

如何获得该自定义字段的值？

请帮忙。

PS：我很了解 PHP，但我是 Joomla/Virtuemart 的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T14:52:18.010

这适用于 VM2.x

VM 将自定义字段值存储在 #__virtuemart_customs

产品和自定义字段之间的关系在#__virtuemart_product_customfields 中维护

你有标题和产品 ID，所以你可以试试这个

```
$db = &JFactory::getDBO();
$sql = "SELECT F.custom_value #__virtuemart_customs AS C LEFT JOIN #__virtuemart_product_customfields AS F ON F.virtuemart_customfield_id = C.virtuemart_custom_id where (C.custom_title='$your_customtitle' and F.virtuemart_product_id = '$product_id')";
$db->setQuery($sql);
$db->query();
$res = $db->loadAssoc();
echo $res['custom_value']; 
```

您也尝试使用内部子查询。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-07T23:01:11.417

```
 $db = JFactory::getDBO();
    $query = $db->getQuery(true);
    $query->select('virtuemart_product_id,custom_value');
    $query->from('#__virtuemart_product_customfields');
    $db->setQuery((string)$query);
    $results = $db->loadObjectList();
    if ($results){
    foreach($results as $result) 
    {
        // do your stuff here
    } 
```

# asp.net - 如何检索在 Asp.net 页面上的用户控件中单击的按钮的 ID？

> ID：13279621
> 
> 赞同：0
> 
> 时间：2012-11-07T22:48:19.070
> 
> 标签：asp.net, user-controls

我有一个正在处理的页面，我正在将多个用户控件链接到。用户控件包含 3 个按钮，一个附加、清除和查看按钮。当用户单击页面上的任何控件时，结果信息将“转储”到页面上最后一个可见控件中。

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="Default.aspx.cs" Inherits="Default" MasterPageFile="DefaultPage.master" %>
<%@ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit" TagPrefix="ajaxToolkit" %>
<%@ Register tagName="FileHandler" src="FileHandling.ascx" tagPrefix="ucFile" %>
<asp:Content ID="Content1" ContentPlaceHolderID="Main" Runat="Server">
<asp:UpdatePanel ID="upPanel" UpdateMode="Conditional" runat="server">
<ContentTemplate>
<table>
<tr>
<td>
<ucFile:FileHandler ID="fFile1" runat="server" />
</td>
<td>
<ucFile:FileHandler ID="fFile2" runat="server" />
</td>
</tr>
</table>
</ContentTemplate>
</asp:UpdatePanel>
</asp:Content> 
```

所有文件处理和处理都在控件内处理，当通过生成的文件名完成上传到文件服务器时会发生一个事件。单击任一按钮时，文件名始终存储在最后一个控件的文本框中的控件内部。控制代码：

```
<table style="width: 50%;">
    <tr style="white-space: nowrap;">
        <td style="width: 1%;">
            <asp:Label runat="server" ID="lblFile" />
        </td>
        <td style="width: 20%;">
           <asp:TextBox ID="txtFile" CssClass="backColor" runat="server" OnTextChanged="FileInformationChanged" />
        </td>
        <td style="width: 1%">
            <%--<asp:Button runat="server" ID="btnUpload" CssClass="btn" Text="Attach"  OnClick="UploadFile"/>--%>
            <input type="button" id="btnUpload" class="btn" tabindex="30" value="Attach" onclick="SetupUpload();" />
        </td>
        <td style="width: 1%">
            <%--<asp:Button runat="server" ID="btnClear" Text="Clear" CssClass="btn" OnClick="ClearTextValue"/>--%>
            <input type="button" id="btnClearFile" class="btn" value="Clear" onclick="document.getElementById('<%=txtFile.ClientID%>').value = '';document.getElementById('<%=hfFile.ClientID%>').value = '';" />
        </td>
        <td style="width: 1%">
            <a href="#here" onclick="ViewLink(document.getElementById('<%=hfFile.ClientID%>').value, '')">View</a>
        </td>
        <td style="width: 1%">
            <asp:HiddenField ID="hfFile" runat="server" />
        </td>
    </tr>
</table>
<script type="text/javascript">
    var ItemPath = "";
    function SetupUpload(File) {
        ItemPath = File;
        VersionAttach('<%=UploadPath%>', 'true');
    }
    function UploadComplete(File) {
        document.getElementById('<%=txtFile.ClientID%>').value =  File.substring(File.lastIndexOf("/") + 1);
        document.getElementById('<%=hfFile.ClientID%>').value = File;
        alert('<%=txtFile.Text %>');
        alert('<%=ClientID %>')
    }
    function ViewLink(File, Alert) {
        if (File != "") {
            if (File.indexOf("../data/") != -1) {
                window.open(File, '_blank');
            }
            else {
                window.open('../data/<%=UploadPath%>/' + File, '_blank');
            }
        }
        else if (Alert == "") {
            alert('No file has been uploaded for this field.');
        }
    }
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T22:56:25.397

有几种方法

a) 使用 control.FindControl("hfFile")

b)

```
private HiddenField hfFile;
protected void hfFile_OnInit(object sender, EventArgs e){
    hfFile = (HiddenField)sender;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T21:18:09.617

在我的情况下，我让它工作的方法是在输入按钮（客户端控件）上放置一个标题，然后将我想要的控件的 clientid 的值（在本例中为文本框）传递给 onclick 事件中的函数（客户事件）。然后，我“强制”控件的使用者在单击按钮时使用此信息。这里提出问题的原因是要找出是否有更好的方法在控件内完成此操作，而不是让控件的使用者处理数据。这确实符合我的目的，只是看起来不像我希望的那样干净。

# java - Java 日历：凌晨 1 点切换到标准时间（从 DST 开始）

> ID：13279622
> 
> 赞同：2
> 
> 时间：2012-11-07T22:48:32.923
> 
> 标签：java, calendar

我有一些代码使用 Calendar.set() 返回给定日期值的小时开始。我在 2012 年 11 月 4 日星期日（东部时区 - EDT 到 EST 切换）遇到了以下问题：

```
public void testStartOfHourDST1() {

    Calendar cal = Calendar.getInstance();

    long time = 1352005200000L; // Nov 4, 2012, 1AM EDT
    cal.setTimeInMillis(time);

    cal.set(Calendar.MILLISECOND, 0);
    cal.set(Calendar.SECOND, 0);
    cal.set(Calendar.MINUTE, 0);

    System.out.println(new Date(time));
    System.out.println(new Date(cal.getTimeInMillis()));
    System.out.println(System.getProperty("java.version"));

    assertEquals(cal.getTimeInMillis(), time); // fails

    return;
} 
```

输出：

> 2012 年 11 月 4 日星期日 01:00:00 EDT
> 
> 2012 年 11 月 4 日星期日 01:00:00 EST
> 
> 1.6.0_35

也许这不是使用日历的正确方法，但在下一小时（或前一小时）运行相同的测试可以正常工作。这是JVM问题吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T23:12:17.657

从某种意义上说，这不是一个真正的问题，它是确定性的，并且按照它的编程去做。如果您希望它选择两个凌晨 1 点中较早的一个，这是一个问题！

更改日历上的字段后，它拥有的唯一信息是“美国/东部时间凌晨 1 点”。好吧，你的时区那天有两个凌晨 1 点，应该选择哪一个？OpenJDK 的作者做出了一个决定，当出现这种歧义时，他们总是将其解释为标准时间的后者。此评论来自 java.util.GregorianCalendar OpenJDK 6：

> ```
>  // 2\. The transition out of DST.  Here, a designated time of 1:00 am - 1:59 am
>     //    can be in standard or DST.  Both are valid representations (the rep
>     //    jumps from 1:59:59 DST to 1:00:00 Std).
>     //    Again, we assume standard time. 
> ```

如果您打印出数字的实际值，您将看到`cal.getTimeInMillis()`实际上已经从 的值更改了一个小时`time`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T00:42:43.460

获取正确的时区非常重要。例如，我确信您知道系统当前时间（以毫秒为单位）是从 1970 年 1 月 1 日午夜开始测量的。这是有据可查的。Date 构造函数 JavaDoc 说：

> **公开日期（长日期）**
> 
> 分配一个 Date 对象并将其初始化以表示自称为“纪元”的标准基准时间（即 1970 年 1 月 1 日 00:00:00 GMT）以来的指定毫秒数。

这很好，但是一开始这个程序的输出有点难以理解：

```
import java.util.Date;
import java.util.TimeZone;
import java.text.SimpleDateFormat;

public class Demo {
    public static void main(String[] args) {
        TimeZone tz = TimeZone.getTimeZone("Europe/London");
        Date d = new Date(-3600000);

        SimpleDateFormat df = new SimpleDateFormat("MMMM dd, yyyy HH:mm:ss.SSS z");
        df.setTimeZone(tz);
        System.out.println(String.format("%8dms -> %s",
                    Long.valueOf(d.getTime()) ,df.format(d)));

        d.setTime(0);
        System.out.println(String.format("%8dms -> %s",
                    Long.valueOf(d.getTime()) ,df.format(d)));
   }
} 
```

输出是：

```
-3600000ms -> January 01, 1970 00:00:00.000 GMT
       0ms -> January 01, 1970 01:00:00.000 GMT 
```

如您所见，纪元显然偏移了一个小时！

除非它不是。如果您明确使用“GMT”时区，一切都很好。“欧洲/伦敦”时区就是这么棘手。

使用日历时，请了解您正在使用的时区或被抓到的时区。

# selenium - Selenium Basic Authentication Tomcat - 适用于 Chrome、IE、Firefox 的解决方案

> ID：13279626
> 
> 赞同：1
> 
> 时间：2012-11-07T22:49:12.760
> 
> 标签：selenium, cross-browser, basic-authentication, selenium-webdriver

嗨，我正在将 Selenium WebDriver 与 Java 一起使用。所以我有一个网站 A，在我填写表格后，我会转到网站 B，但在它询问基本身份验证用户名和密码之前。

我在 SO 中读到，Selenium 中不提供基本身份验证支持。

我在某处读到我可以使用 ROBOT 类（不知道你在 Java 中是什么意思），但使用起来有风险。

我不确定如何处理此事件，因为在我到达 BI 之后必须在通过测试用例之前进行更多验证。

我希望有人能帮帮忙。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T18:32:49.277

我认为您应该能够通过使用以下 URL 来克服它

```
http://username:password@www.example.com/ 
```

最后别忘了给a `/`。我想你可以参考[这个](https://stackoverflow.com/questions/10395462/handling-browser-authentication-using-selenium)

# linux - 启用 POSIX 计时器时，不会在 seg 故障上生成核心转储文件

> ID：13279630
> 
> 赞同：1
> 
> 时间：2012-11-07T22:49:47.007
> 
> 标签：linux, posix

每当我使用 POSIX 计时器（使用`timer_create`and `timer_settime`）并且代码中某处发生段错误时，都不会生成核心转储文件。我用测试错误（使用空指针）对此进行了测试。

注释掉`timer_settime`并运行到 seg 错误（空指针使用）确实会产生一个核心转储文件（因此 ulimit 被有效地设置正确），从而验证其他一切都正常。

`timer_create`在 sigevent 设置为 的情况下调用`NULL`，因此使用默认值`SIGALRM`。

更多信息

我发现在某些系统（都是 Ubuntu 12.04）上会生成核心文件。但不是在其他人身上（特别是在虚拟机中作为猜测运行时）。在所有平台上，不调用 timer_settime 并使用显式分段错误（使用空指针）会导致生成核心转储文件。我测试了 2 个裸机和 2 个 VM（每个裸机 1 个）。在其中一个裸机上，运行 VM 并在裸机中使用程序不会生成核心转储，但停止 VM 确实允许生成文件。所有物理都有 8GB 的​​ RAM，程序 Vm 是几 MB。

# c - Valgrind 错误

> ID：13279631
> 
> 赞同：1
> 
> 时间：2012-11-07T22:49:52.623
> 
> 标签：c, valgrind

我无法破译我得到的 Valgrind 输出。例如，我有一个错误，说我正在执行大小为 1 的非法写入。所以我在 malloc 中添加了一个，但这并没有改变任何东西。由于我以前从未使用过 Valgrind，所以我认为最好在网上搜索没有回应后寻求帮助。请注意，我不是在寻找答案，所以我没有复制我的代码。我想被推向正确的方向，这样我就可以与未来的错误作斗争。谢谢！

```
==28881== Memcheck, a memory error detector
==28881== Copyright (C) 2002-2009, and GNU GPL'd, by Julian Seward et al.
==28881== Using Valgrind-3.6.0.SVN-Debian and LibVEX; rerun with -h for copyright info
==28881== Command: ./sws root
==28881==
==28892== Conditional jump or move depends on uninitialised value(s)
==28892==    at 0x4C286D9: __GI_strlen (mc_replace_strmem.c:284)
==28892==    by 0x4040B7: get_headers (html.c:280)
==28892==    by 0x402D77: read_page (networking.c:341)
==28892==    by 0x402B8E: get_page (networking.c:310)
==28892==    by 0x40268E: header_parse (networking.c:232)
==28892==    by 0x401D96: retrieve_msg (networking.c:62)
==28892==    by 0x401AAB: main (sws.c:139)
==28892==
==28892== Conditional jump or move depends on uninitialised value(s)
==28892==    at 0x4C286D9: __GI_strlen (mc_replace_strmem.c:284)
==28892==    by 0x4040C5: get_headers (html.c:280)
==28892==    by 0x402D77: read_page (networking.c:341)
==28892==    by 0x402B8E: get_page (networking.c:310)
==28892==    by 0x40268E: header_parse (networking.c:232)
==28892==    by 0x401D96: retrieve_msg (networking.c:62)
==28892==    by 0x401AAB: main (sws.c:139)
==28892==
==28892== Conditional jump or move depends on uninitialised value(s)
==28892==    at 0x4C286D9: __GI_strlen (mc_replace_strmem.c:284)
==28892==    by 0x4040D3: get_headers (html.c:280)
==28892==    by 0x402D77: read_page (networking.c:341)
==28892==    by 0x402B8E: get_page (networking.c:310)
==28892==    by 0x40268E: header_parse (networking.c:232)
==28892==    by 0x401D96: retrieve_msg (networking.c:62)
==28892==    by 0x401AAB: main (sws.c:139)
==28892==
==28892== Conditional jump or move depends on uninitialised value(s)
==28892==    at 0x4C286D9: __GI_strlen (mc_replace_strmem.c:284)
==28892==    by 0x4040E1: get_headers (html.c:280)
==28892==    by 0x402D77: read_page (networking.c:341)
==28892==    by 0x402B8E: get_page (networking.c:310)
==28892==    by 0x40268E: header_parse (networking.c:232)
==28892==    by 0x401D96: retrieve_msg (networking.c:62)
==28892==    by 0x401AAB: main (sws.c:139)
==28892==
==28892== Invalid write of size 1
==28892==    at 0x4C2874C: strcpy (mc_replace_strmem.c:311)
==28892==    by 0x4041E1: get_headers (html.c:299)
==28892==    by 0x402E00: read_page (networking.c:347)
==28892==    by 0x402B8E: get_page (networking.c:310)
==28892==    by 0x40268E: header_parse (networking.c:232)
==28892==    by 0x401D96: retrieve_msg (networking.c:62)
==28892==    by 0x401AAB: main (sws.c:139)
==28892==  Address 0x53be030 is 0 bytes after a block of size 32 alloc'd
==28892==    at 0x4C274A8: malloc (vg_replace_malloc.c:236)
==28892==    by 0x402D84: read_page (networking.c:341)
==28892==    by 0x402B8E: get_page (networking.c:310)
==28892==    by 0x40268E: header_parse (networking.c:232)
==28892==    by 0x401D96: retrieve_msg (networking.c:62)
==28892==    by 0x401AAB: main (sws.c:139)
==28892==
==28892== Invalid write of size 1
==28892==    at 0x4C2875F: strcpy (mc_replace_strmem.c:311)
==28892==    by 0x4041E1: get_headers (html.c:299)
==28892==    by 0x402E00: read_page (networking.c:347)
==28892==    by 0x402B8E: get_page (networking.c:310)
==28892==    by 0x40268E: header_parse (networking.c:232)
==28892==    by 0x401D96: retrieve_msg (networking.c:62)
==28892==    by 0x401AAB: main (sws.c:139)
==28892==  Address 0x53be034 is 4 bytes after a block of size 32 alloc'd
==28892==    at 0x4C274A8: malloc (vg_replace_malloc.c:236)
==28892==    by 0x402D84: read_page (networking.c:341)
==28892==    by 0x402B8E: get_page (networking.c:310)
==28892==    by 0x40268E: header_parse (networking.c:232)
==28892==    by 0x401D96: retrieve_msg (networking.c:62)
==28892==    by 0x401AAB: main (sws.c:139)
==28892==
==28892== Invalid read of size 1
==28892==    at 0x4C28374: strcat (mc_replace_strmem.c:176)
==28892==    by 0x4041F7: get_headers (html.c:300)
==28892==    by 0x402E00: read_page (networking.c:347)
==28892==    by 0x402B8E: get_page (networking.c:310)
==28892==    by 0x40268E: header_parse (networking.c:232)
==28892==    by 0x401D96: retrieve_msg (networking.c:62)
==28892==    by 0x401AAB: main (sws.c:139)
==28892==  Address 0x53be030 is 0 bytes after a block of size 32 alloc'd
==28892==    at 0x4C274A8: malloc (vg_replace_malloc.c:236)
==28892==    by 0x402D84: read_page (networking.c:341)
==28892==    by 0x402B8E: get_page (networking.c:310)
==28892==    by 0x40268E: header_parse (networking.c:232)
==28892==    by 0x401D96: retrieve_msg (networking.c:62)
==28892==    by 0x401AAB: main (sws.c:139)
==28892==
==28892== Invalid write of size 1
==28892==    at 0x4C2838C: strcat (mc_replace_strmem.c:176)
==28892==    by 0x4041F7: get_headers (html.c:300)
==28892==    by 0x402E00: read_page (networking.c:347)
==28892==    by 0x402B8E: get_page (networking.c:310)
==28892==    by 0x40268E: header_parse (networking.c:232)
==28892==    by 0x401D96: retrieve_msg (networking.c:62)
==28892==    by 0x401AAB: main (sws.c:139)
==28892==  Address 0x53be034 is 4 bytes after a block of size 32 alloc'd
==28892==    at 0x4C274A8: malloc (vg_replace_malloc.c:236)
==28892==    by 0x402D84: read_page (networking.c:341)
==28892==    by 0x402B8E: get_page (networking.c:310)
==28892==    by 0x40268E: header_parse (networking.c:232)
==28892==    by 0x401D96: retrieve_msg (networking.c:62)
==28892==    by 0x401AAB: main (sws.c:139)
==28892==
==28892== Invalid write of size 1
==28892==    at 0x4C2839F: strcat (mc_replace_strmem.c:176)
==28892==    by 0x4041F7: get_headers (html.c:300)
==28892==    by 0x402E00: read_page (networking.c:347)
==28892==    by 0x402B8E: get_page (networking.c:310)
==28892==    by 0x40268E: header_parse (networking.c:232)
==28892==    by 0x401D96: retrieve_msg (networking.c:62)
==28892==    by 0x401AAB: main (sws.c:139)
==28892==  Address 0x53be061 is 15 bytes before a block of size 40 alloc'd
==28892==    at 0x4C274A8: malloc (vg_replace_malloc.c:236)
==28892==    by 0x403E53: get_headers (html.c:224)
==28892==    by 0x402E00: read_page (networking.c:347)
==28892==    by 0x402B8E: get_page (networking.c:310)
==28892==    by 0x40268E: header_parse (networking.c:232)
==28892==    by 0x401D96: retrieve_msg (networking.c:62)
==28892==    by 0x401AAB: main (sws.c:139)
==28892==
==28892== Invalid read of size 1
==28892==    at 0x4C28374: strcat (mc_replace_strmem.c:176)
==28892==    by 0x40420D: get_headers (html.c:301)
==28892==    by 0x402E00: read_page (networking.c:347)
==28892==    by 0x402B8E: get_page (networking.c:310)
==28892==    by 0x40268E: header_parse (networking.c:232)
==28892==    by 0x401D96: retrieve_msg (networking.c:62)
==28892== Invalid read of size 1
==28892==    at 0x4C28374: strcat (mc_replace_strmem.c:176)
==28892==    by 0x40420D: get_headers (html.c:301)
==28892==    by 0x402E00: read_page (networking.c:347)
==28892==    by 0x402B8E: get_page (networking.c:310)
==28892==    by 0x40268E: header_parse (networking.c:232)
==28892==    by 0x401D96: retrieve_msg (networking.c:62)
==28892==    by 0x401AAB: main (sws.c:139)
==28892==  Address 0x53be030 is 0 bytes after a block of size 32 alloc'd
==28892==    at 0x4C274A8: malloc (vg_replace_malloc.c:236)
==28892==    by 0x402D84: read_page (networking.c:341)
==28892==    by 0x402B8E: get_page (networking.c:310)
==28892==    by 0x40268E: header_parse (networking.c:232)
==28892==    by 0x401D96: retrieve_msg (networking.c:62)
==28892==    by 0x401AAB: main (sws.c:139)
==28892==
==28892== Invalid write of size 1
==28892==    at 0x4C2838C: strcat (mc_replace_strmem.c:176)
==28892==    by 0x40420D: get_headers (html.c:301)
==28892==    by 0x402E00: read_page (networking.c:347)
==28892==    by 0x402B8E: get_page (networking.c:310)
==28892==    by 0x40268E: header_parse (networking.c:232)
==28892==    by 0x401D96: retrieve_msg (networking.c:62)
==28892==    by 0x401AAB: main (sws.c:139)
==28892==  Address 0x53be061 is 15 bytes before a block of size 40 alloc'd
==28892==    at 0x4C274A8: malloc (vg_replace_malloc.c:236)
==28892==    by 0x403E53: get_headers (html.c:224)
==28892==    by 0x402E00: read_page (networking.c:347)
==28892==    by 0x402B8E: get_page (networking.c:310)
==28892==    by 0x40268E: header_parse (networking.c:232)
==28892==    by 0x401D96: retrieve_msg (networking.c:62)
==28892==    by 0x401AAB: main (sws.c:139)
==28892==
==28892== Invalid read of size 1
==28892==    at 0x4C28374: strcat (mc_replace_strmem.c:176)
==28892==    by 0x404223: get_headers (html.c:302)
==28892==    by 0x402E00: read_page (networking.c:347)
==28892==    by 0x402B8E: get_page (networking.c:310)
==28892==    by 0x40268E: header_parse (networking.c:232)
==28892==    by 0x401D96: retrieve_msg (networking.c:62)
==28892==    by 0x401AAB: main (sws.c:139)
==28892==  Address 0x53be030 is 0 bytes after a block of size 32 alloc'd
==28892==    at 0x4C274A8: malloc (vg_replace_malloc.c:236)
==28892==    by 0x402D84: read_page (networking.c:341)
==28892==    by 0x402B8E: get_page (networking.c:310)
==28892==    by 0x40268E: header_parse (networking.c:232)
==28892==    by 0x401D96: retrieve_msg (networking.c:62)
==28892==    by 0x401AAB: main (sws.c:139)
==28892==
==28892== Invalid read of size 1
==28892==    at 0x4C28374: strcat (mc_replace_strmem.c:176)
==28892==    by 0x404239: get_headers (html.c:303)
==28892==    by 0x402E00: read_page (networking.c:347)
==28892==    by 0x402B8E: get_page (networking.c:310)
==28892==    by 0x40268E: header_parse (networking.c:232)
==28892==    by 0x401D96: retrieve_msg (networking.c:62)
==28892==    by 0x401AAB: main (sws.c:139)
==28892==  Address 0x53be030 is 0 bytes after a block of size 32 alloc'd
==28892==    at 0x4C274A8: malloc (vg_replace_malloc.c:236)
==28892==    by 0x402D84: read_page (networking.c:341)
==28892==    by 0x402B8E: get_page (networking.c:310)
==28892==    by 0x40268E: header_parse (networking.c:232)
==28892==    by 0x401D96: retrieve_msg (networking.c:62)
==28892==    by 0x401AAB: main (sws.c:139)
==28892==
==28892== Invalid write of size 1
==28892==    at 0x4C2838C: strcat (mc_replace_strmem.c:176)
==28892==    by 0x404239: get_headers (html.c:303)
==28892==    by 0x402E00: read_page (networking.c:347)
==28892==    by 0x402B8E: get_page (networking.c:310)
==28892==    by 0x40268E: header_parse (networking.c:232)
==28892==    by 0x401D96: retrieve_msg (networking.c:62)
==28892==    by 0x401AAB: main (sws.c:139)
==28892==  Address 0x53be098 is 0 bytes after a block of size 40 alloc'd
==28892==    at 0x4C274A8: malloc (vg_replace_malloc.c:236)
==28892==    by 0x403E53: get_headers (html.c:224)
==28892==    by 0x402E00: read_page (networking.c:347)
==28892==    by 0x402B8E: get_page (networking.c:310)
==28892==    by 0x40268E: header_parse (networking.c:232)
==28892==    by 0x401D96: retrieve_msg (networking.c:62)
==28892==    by 0x401AAB: main (sws.c:139)
==28892==
==28892== Invalid read of size 1
==28892==    at 0x4C286E4: __GI_strlen (mc_replace_strmem.c:284)
==28892==    by 0x402E0F: read_page (networking.c:348)
==28892==    by 0x402B8E: get_page (networking.c:310)
==28892==    by 0x40268E: header_parse (networking.c:232)
==28892==    by 0x401D96: retrieve_msg (networking.c:62)
==28892==    by 0x401AAB: main (sws.c:139)
==28892==  Address 0x53be030 is 0 bytes after a block of size 32 alloc'd
==28892==    at 0x4C274A8: malloc (vg_replace_malloc.c:236)
==28892==    by 0x402D84: read_page (networking.c:341)
==28892==    by 0x402B8E: get_page (networking.c:310)
==28892==    by 0x40268E: header_parse (networking.c:232)
==28892==    by 0x401D96: retrieve_msg (networking.c:62)
==28892==    by 0x401AAB: main (sws.c:139)
==28892==
==28892== Syscall param socketcall.sendto(msg) points to unaddressable byte(s)
==28892==    at 0x5121052: send (send.c:28)
==28892==    by 0x40276D: send_msg (networking.c:245)
==28892==    by 0x402E29: read_page (networking.c:348)
==28892==    by 0x402B8E: get_page (networking.c:310)
==28892==    by 0x40268E: header_parse (networking.c:232)
==28892==    by 0x401D96: retrieve_msg (networking.c:62)
==28892==    by 0x401AAB: main (sws.c:139)
==28892==  Address 0x53be030 is 0 bytes after a block of size 32 alloc'd
==28892==    at 0x4C274A8: malloc (vg_replace_malloc.c:236)
==28892==    by 0x402D84: read_page (networking.c:341)
==28892==    by 0x402B8E: get_page (networking.c:310)
==28892==    by 0x40268E: header_parse (networking.c:232)
==28892==    by 0x401D96: retrieve_msg (networking.c:62)
==28892==    by 0x401AAB: main (sws.c:139)
==28892==
==28892==
==28892== HEAP SUMMARY:
==28892==     in use at exit: 337 bytes in 10 blocks
==28892==   total heap usage: 19 allocs, 9 frees, 3,307 bytes allocated
==28892==
==28892== LEAK SUMMARY:
==28892==    definitely lost: 337 bytes in 10 blocks
==28892==    indirectly lost: 0 bytes in 0 blocks
==28892==      possibly lost: 0 bytes in 0 blocks
==28892==    still reachable: 0 bytes in 0 blocks
==28892==         suppressed: 0 bytes in 0 blocks
==28892== Rerun with --leak-check=full to see details of leaked memory
==28892==
==28892== For counts of detected and suppressed errors, rerun with: -v
==28892== Use --track-origins=yes to see where uninitialised values come from
==28892== ERROR SUMMARY: 348 errors from 17 contexts (suppressed: 4 from 4)
==28881==
==28881== HEAP SUMMARY:
==28881==     in use at exit: 0 bytes in 0 blocks
==28881==   total heap usage: 0 allocs, 0 frees, 0 bytes allocated
==28881==
==28881== All heap blocks were freed -- no leaks are possible
==28881==
==28881== For counts of detected and suppressed errors, rerun with: -v
==28881== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 4 from 4) 
```

* * *

```
217 int get_headers(char* time, char* last_modified, char* server, char* content_type, size_t msglen, char* header, int flag)
218 {
219         char* header1 = NULL;
220         char* header2 = NULL;
221         char* header3 = NULL;
222         char* header4 = NULL;
223         char* header5 = NULL;
224
225         if ((header1 = (char*)malloc(strlen("Date: ")+strlen(time)+2) ) ==NULL)
226         {
227                 fprintf(stderr, "%s: No more memory\n", getprogname());
228                 exit(EXIT_FAILURE);
229         }
230
231
232         strcpy(header1, "Date: ");
233         strcat(header1, time);
234         strcat(header1, "\n");
235
236
237         if ((header2 = (char*)malloc(strlen("Last-Modified: ")+strlen(last_modified)+5) ) ==NULL)
238         {
239                 fprintf(stderr, "%s: No more memory\n", getprogname());
240                 exit(EXIT_FAILURE);
241         }
242
243
244         strcpy(header2, "Last-Modified: ");
245         strcat(header2, last_modified);
246         strcat(header2, "\n");
247
248
249         if ((header3 = (char*)malloc(strlen("Server: ")+strlen(server)+5) ) ==NULL)
250         {
251                 fprintf(stderr, "%s: No more memory\n", getprogname());
252                 exit(EXIT_FAILURE);
253         }
254
255
256         strcpy(header3, "Server: ");
257         strcat(header3, server);
258         strcat(header3, "\n");
259
260
261         if ((header4 = (char*)malloc(strlen("Content-Type: ")+strlen(content_type)+5) ) ==NULL)
262         {
263                 fprintf(stderr, "%s: No more memory\n", getprogname());
264                 exit(EXIT_FAILURE);
265         }
266
267
268         strcpy(header4, "Content-Type: ");
269         strcat(header4, content_type);
270         strcat(header4, "\n");
271
272
273         int content_length = strlen(header1)+strlen(header2)+strlen(header3)+strlen(header4)+strlen("Content-Length: ")+msglen+5;
274         char temp[10] = {' '};
275         snprintf(temp, sizeof(msglen),"%d", content_length);
276
277         if ((header5 = (char*)malloc(strlen("Content-Length: ")+strlen(temp)+5) ) ==NULL)
278         {
279                 fprintf(stderr, "%s: No more memory\n", getprogname());
280                 exit(EXIT_FAILURE);
281         }
282
283
284         strcpy(header5, "Content-Length: ");
285         strncat(header5, temp, strlen(temp));
286         strcat(header5, "\n\n");
287
288
289         if(flag == 1)
290         {
291                 strcpy(header, header1);
292                 strcat(header, header2);
293                 strcat(header, header3);
294                 strcat(header, header4);
295                 strcat(header, header5);
296         }
297
298         return content_length;
299         free(header1);
300         free(header2);
301         free(header3);
302         free(header4);
303         free(header5);
304 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T23:09:01.730

如果`flag`为 0，那么您永远不会初始化`header1..4`字符串中的任何数据，因此当您尝试使用 获取它们的长度时`strlen`，您会读入未初始化的垃圾。无论设置如何，您都应确保始终将标头值初始化为空字符串`flag`。

此外，不需要`strcat(..., "\0")`在字符串上 -`strcpy`并且`strcat`始终以空值终止字符串（实际上，`"\0"`与空字符串无法区分`""`，因为它们的第一个字节都是 NUL 字节）。在将一堆字符串连接在一起时，请注意[Shlemiel the Painter 算法。](http://en.wikipedia.org/wiki/Schlemiel_the_Painter%27s_algorithm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T23:11:57.413

1）你 malloc 了 5 块内存，并没有在你的函数中释放它们。这些应该在您返回或退出之前释放。请注意 valgrind 是如何说您有 326 个字节的`definitely lost`.

2）如果`flag`是假的，你的`header*`变量永远不会被设置为任何东西，这就是为什么 valgrind 在第 280 行给你一堆错误。随后，它在第 301 行附近复制没有什么好处，所以你会得到更多的错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-10T06:13:47.603

由于您对编写“整洁+酷”的代码感兴趣，我将尝试将您推向正确的方向。对抗未来错误的最佳方法是保持简单。

什么是简单的？尽可能少行，但仍保持可读性和易于理解。您可以用 30 行代码代替 87 行 (304-217) 的代码。

此外，寻找代码可能进入“未定义”行为的地方也是一种很好的心态。在 get_header() 中包含标头的大小是一种很好的做法。如果它在 get_header() 中不可用，则无法防止潜在的缓冲区溢出/内存损坏。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int
get_header(char *date, char *last_m, char *server, char *c_type,
        int c_len, char *header, int flag, int h_len);

int
main()
{
        char header[500];
        int n;

        n = get_header(
                "Fri, 09 Nov 2012 09:22:06 GMT", /* Date            */
                "Fri, 09 Nov 2012 09:10:32 GMT", /* Last modified   */
                "MySuperDuperServer/V 1.0.0.0",  /* Server name     */
                "Text/html",                     /* Content type    */
                1234,                            /* Content length  */
                header,                          /* Destination buf */
                1,             /* 1 = write into header, 0 = Do not */
                sizeof(header)                   /* header buf size */
        );             

        printf("%s\n", header);

        exit(0);
}

/* Header lines should end with CR LF */

#define DATE   "Date: %s\r\n"
#define LAST_M "Last-Modified: %s\r\n"
#define SERVER "Server : %s\r\n"
#define C_TYPE "Content-Type: %s\r\n"
#define C_LEN  "Content-Length: %d\r\n\r\n"

#define HEADER DATE LAST_M SERVER C_TYPE C_LEN

int
get_header(char *date, char *last_m, char *server, char *c_type,
        int c_len, char *header, int flag, int h_len)
{
        char *d;
        int r;

        if (flag == 1) {
                d = header;
        }
        else if ((d = (char *)malloc(h_len)) == 0) {
                printf("out of memory\n");
                exit(1); /* exit(EXIT_FAILURE); */
        }

        r = snprintf(d, h_len, HEADER, date, last_m, server, c_type, c_len);

        if (flag == 0) {
                free(d);
        }

        return(r);
} 
```

我希望你觉得这有帮助。

# scheme - 想不出如何从列表中删除数字 - 方案

> ID：13279641
> 
> 赞同：0
> 
> 时间：2012-11-07T22:50:32.160
> 
> 标签：scheme

这是我的功能：

```
(define (remove-digit digit list)
  (cond ((null? list ...))
    (( = (car list) digit) (remove-digit digit (cdr list)))
      (else (cons (car list) (if (null? list) (cons(remove-digit digit (cdr list))))))is: 
```

它应该这样做：

(1 2 4 5 2 5 6) 在 (remove-digit 2 list) 之后应该是 (1 4 5 5 6)

但我想不出当列表变为空时该怎么办。

你能给我一点帮助或一些想法吗？非常感谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T23:05:37.453

返回一个空列表（或`list`自身）。这是您的功能的基本情况。

```
(define (remove-digit digit list)
  (cond ((null? list) list)
        ((= digit (car list)) (remove-digit digit (cdr list)))
        (else (cons (car list) (remove-digit digit (cdr list)))))) 
```

要推断基本情况，请考虑`remove-digit`以空列表作为参数的“最小”情况。

```
(remove-digit digit '()) 
```

对于任何一种供应的价值，它`'()`显然应该返回。`digit`

# android - Flash AIR 3.2 Android Captive Runtime URLLoader 引发流错误 #2032 本地文件

> ID：13279660
> 
> 赞同：1
> 
> 时间：2012-11-07T22:52:37.830
> 
> 标签：android, actionscript-3, flash, air

以下代码是我正在处理的一个更大项目的片段。问题是当我在 Flash CS6 中测试应用程序时，urlLoader 完美读取 25Notes.txt，但是当我尝试在我的 Android 设备（HTC Incredible）上调试应用程序（通过 Flash 内置的“调试>调试电影>通过 USB 在设备上”）时引发流错误 #2032。

我正在使用 Flash CS6 从 AIR 3.2 部署具有 Captive Runtime 的应用程序，并且我的项目被组织起来，没有多余的文件或文件夹。

如果您有任何见解或建议，以及是否需要更多解释或代码，请告诉我。

我也不确定 Flash CS6 中的 Captive Runtime 是打包根项目文件夹中的所有本地文件，还是只打包应用程序中使用的文件，或者根本没有打包。任何有关此的信息也将不胜感激。

```
 var FILE_LIST_PATH:String = "/25Notes/25Notes.txt";
var mp3List:Array = new Array();

LoadFile();

function LoadFile()
{
    var urlRequest:URLRequest = new URLRequest(FILE_LIST_PATH);
    var urlLoader:URLLoader = new URLLoader();

    urlLoader.addEventListener(Event.COMPLETE, processTextFile);
    urlLoader.addEventListener(IOErrorEvent.IO_ERROR, onIOError);
    urlLoader.load(urlRequest);
}

function onIOError(e:IOErrorEvent){
    trace("can't load file list:   " + e);
}

function processTextFile(event:Event):void
{
    var loader:URLLoader = URLLoader(event.target);
    var textFile:String = loader.data;
    mp3List = textFile.split("\n");
    for (i=0;i<mp3List.length;i++){
        trace(mp3List[i],i);
    }
} 
```

以下是 IOError 跟踪返回的内容：

```
can't load file list:   [IOErrorEvent type="ioError" bubbles=false cancelable=false eventPhase=2 text="Error #2032: Stream Error. URL: app:/25Notes/25Notes.txt" errorID=2032] 
```

我完全被难住了。请帮忙！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T23:17:40.300

该文件是否在运行时由应用程序保存并且您正在尝试检索它？如果不是，则该 URL 不正确。该`app:/`目录是设备上的 applicationStorageDirectory，而不是应用程序本身的位置。您需要将 txt 文件作为类嵌入并以这种方式访问​​它

```
[Embed(source="assets/ui/images/phone/menu-myvideos-active-160.png")]
var MyVideosActive160:Class; 
```

那是我现在正在完成的一个项目中的一些东西。这嵌入了一个图像，并允许我之后访问它。要访问它，我只需这样做

```
var bmp:Bitmap = new MyVideosActive160(); 
```

如果您不嵌入，我不相信您可以实际访问该文件。必须嵌入需要包含在应用程序中的每个文件。

如果您在某个时间点在运行时保存文件，您会希望这样做

```
var path:String = new File(new File.applicationStorageDirectory.resolvePath("/25Notes/25Notes.txt").nativePath).url; 
```

这将输出一个`file:///`URL，而不是使用`app:/`. 我正在使用这种方法在我的应用程序中播放下载的视频。Adobe 应该在 SDK 中内置了一个糟糕的解决方法，但这是我们必须处理的。

# sql - 如何在数据表中存在的特定行之后在 oracle 中插入数据？

> ID：13279666
> 
> 赞同：0
> 
> 时间：2012-11-07T22:53:04.313
> 
> 标签：sql, oracle

我的表中有 10 行数据。现在我想在第 9 个数据之后和第 10 行之前插入一行数据。如果我没记错的话，在 mysql db 中，这件事在有 before 和 after 子句之前是可能的，在 oracle 中怎么样？

这是我的开始插入语句，假设我想在第 9 个数据之后插入它，如何？

```
INSERT INTO MYTABLE (TITLE,DESCRIPTION,STATUS) VALUES ('blahblah','descriptionblah',1); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-07T23:00:45.583

表中的行没有固有的顺序，也不能保证在选择之间保留特定的顺序。**考虑添加包含所需排序的列，并在查询表时按该列对结果集进行排序。**

要插入应该出现在结果集中特定位置的行，请确保放置在排序列中的值是适当的。

# c++ - 没有重载函数getline c ++的实例

> ID：13279668
> 
> 赞同：0
> 
> 时间：2012-11-07T22:53:14.597
> 
> 标签：c++

我对导致此错误的脚本有什么不正确感到有些困惑。

我有一个调用游戏设置填充的函数，但它不喜欢我的 getline。

我还应该提到这些是我为它包含的文件：

```
#include <fstream>
#include <cctype>
#include <map>
#include <iostream>
#include <string>
#include <algorithm>
#include <vector>
using namespace std;' 
```

这就是我所拥有的：

```
std::map<string, string> loadSettings(std::string file){

ifstream file(file);
string line;

std::map<string, string> config;

while(std::getline(file, line))
{
    int pos = line.find('=');
    if(pos != string::npos)
    {
        string key = line.substr(0, pos);
        string value = line.substr(pos + 1);
        config[trim(key)] = trim(value);
    }
}
return (config);
} 
```

* * *

我的函数是这样调用的`main.cpp`

```
 //load settings for game
 std::map<string, string> config = loadSettings("settings.txt");
 //load theme for game
 std::map<string, string> theme = loadSettings("theme.txt"); 
```

我哪里做错了 ？请帮忙！

错误：

`settings.h(61): error C2784: 'std::basic_istream<_Elem,_Traits> &std::getline(std::basic_istream<_Elem,_Traits> &&,std::basic_string<_Elem,_Traits,_Alloc> &)' : could not deduce template argument for 'std::basic_istream<_Elem,_Traits> &&' from 'std::string'`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T22:56:54.943

```
std::map<string, string> loadSettings(std::string file){
    std::ifstream file(file); 
```

文件是为 a`std::string`和 a定义的`std::ifstream`，给出不同的名称。

该错误告诉您它无法与期望 a`std::string`的函数的第一个参数匹配；`std::getline``std::basic_istream<E,T>`

编辑：您也应该尝试与您的`std::`前缀更加一致，字符串和 ifstream 都在命名空间中`std::`

# c - 2个孩子写入管道，父母从C中的管道读取

> ID：13279671
> 
> 赞同：1
> 
> 时间：2012-11-07T22:53:56.260
> 
> 标签：c, fork, pipe

我找了又找都无济于事，所以我终于来寻求帮助。我的任务涉及（在 RedHat Linux 上运行的 C 语言中）创建两个子进程，每个子进程将任意数量的迭代写入管道的字符。该管道与创建它们的父进程共享。父级从管道读取，而子级仍然有要写入的字符。一旦孩子退出并且管道为空，则父母（主）可以终止。

这是我编写的代码逻辑的一个快速而肮脏的示例。

```
main()
{
      //create pipe

      fork(); //childA
      //writes to pipe 

      fork(); //childB
      //writes to pipe

      //parent reading
      while(condition) {
          //read from pipe + print chars to terminal
      }
} 
```

现在，我的问题是关于 while 循环的条件。当孩子们因管道满而无法写作时，我需要阅读，但我无法弄清楚什么类型的条件可以让我这样做。任何帮助都将是绝对惊人的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T23:35:58.897

阅读时是否要求管道必须充满？还是仅仅是要求您继续阅读两个孩子的内容，即使其中一个管道已满，因此孩子无法书写？

如果管子满了，我不知道有什么标准的增高方法。您可以尝试使用`FIONREAD`ioctl 来确定管道上要读取的数据量，并将`PIPE_BUF`其`PIPE_BUF`与它结束了`PIPE_BUF`；该调用可能会阻塞而不填满管道。我不会依赖这种技术工作。

继续从两个文件描述符中读取的常用方法，无论哪个已准备好，都是使用[`select`](http://www.kernel.org/doc/man-pages/online/pages/man2/select.2.html)系统调用。这允许您等到一个或另一个文件描述符有可用数据。这意味着父进程不会阻止尝试从一个没有任何可用数据的子进程中读取数据，而另一个子进程会因为缓冲区已满而阻塞。

**编辑**：重新阅读您的问题后，听起来实际上只有一个管道，两个孩子都在写信。那是对的吗？同样，问题出现了，您是否需要等到孩子们阻塞。如果父级只是从管道中读取，它将阻塞，直到其中一个子级写入管道为止；你不需要做任何特别的事情。

如果您的任务要求您等到管道实际上已满，我有兴趣查看确切的措辞，因为我不确定您为什么要这样做。

**编辑2**：针对您在评论中的问题：

1.  > 我的父进程的代码是否需要遵循程序中我的两个子进程的代码？

    不，对父进程或子进程的代码顺序没有要求。为了区分父级运行的代码和子级运行的代码，您检查`fork()`. 如果返回值为 0，则处于子进程中。如果不是，那么您在父母中；如果返回值为-1，则有错误，如果为正，则为子进程的PID。

    因此，您可以编写如下代码：

    ```
    int pid = fork();
    if (pid) { 
        // in the parent, check if pid is -1 for errors
    } else {
        // in the child
    } 
    ```

    或者：

    ```
    int pid = fork();
    if (pid == 0) {
        // in the child, do whatever you need to do and...
        exit(0);
    }

    // in the parent; since the child calls exit() above, control will never
    // reach here in the child.  Or you could do an execl() in the child, which 
    // replaces the current program with another one, so again, control will 
    // never reach here within the child process. 
    ```

2.  > 我怎样才能继续从管道读取，直到两个孩子终止并且管道为空？

    继续读取直到`read`返回 0。`read`在管道的读取端不会返回 0，直到所有进程都关闭了管道的写入端，并且所有数据都已从管道中读取出来。如果某些东西仍然打开，但管道中没有数据，`read`则会阻塞，直到数据写入管道。

    一个问题是记住在尝试之前关闭父进程中管道的写入端`read`；否则，当父级在子级完成后尝试执行 a 时`read`，它将阻塞等待它关闭自己的管道。

# javascript - Socket.io 重新授权

> ID：13279676
> 
> 赞同：1
> 
> 时间：2012-11-07T22:54:19.990
> 
> 标签：javascript, node.js, socket.io

在授权发生很久之后，我正在尝试将 cookie 传输回服务器。原因是我想在套接字打开一段时间后检查用户是否仍然登录。有没有办法用socket.io做到这一点？也许通过再次强制授权；这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T23:14:37.457

您应该能够通过启用 socket.io 授权来做到这一点。一旦启用，它将在 socket.io 连接时调用提供的函数。

这是我不久前使用的一些代码，可以帮助您入门。

```
var connect = require('connect');

// these should be the same as you use for setting the cookie
var sessionKey = "yourSessionKey"; 
var sessionSecret = "yourSessionSecret";

socketIO.set('authorization', function (data, accept) {
    // check if there's a cookie header
    if (data.headers.cookie) {
        // if there is, parse the cookie
        data.cookie = connect.utils.parseSignedCookies(cookie.parse(decodeURIComponent(data.headers.cookie)), sessionSecret);
        if (!data.cookie[sessionKey]) return accept('No cookie value for session key ' + sessionKey, false);
        var parts = data.cookie[sessionKey].split('.');
        data.sessionId = parts[0];

        // at this point you would check if the user has been authenticated 
        // by using the session id as key. You could store such a reference
        // in redis after the user logged in for example.

        // you might want to set the userid on `data` so that it is accessible
        // through the `socket.handshake` object later on
        data.userid = username;

        // accept the incoming connection
        return accept(null, true);
    } else {
       // if there isn't, turn down the connection with a message
       // and leave the function.
       return accept('No cookie transmitted.', false);
    }
}); 
```

一旦设置了`data`属性（例如`data.userid`在上面的示例中），您就可以通过`socket.handshake`对象访问它们。例如：

```
io.sockets.on('connection', function (socket) {
    var userId = socket.handshake.userid;

    socket.on('reauthorize-user', function(){
         // check the user status using the userId then emit a socket event back
         // to the client with the result
         socket.emit('reauthorization-result', isAuthorized);
    });
}); 
```

在客户端上，您只需发出`reauthorize-user`事件并收听该`reauthorization-result`事件。您显然可以有一个 setTimeout 来以特定的时间间隔执行检查。

# sencha-touch - Sencha Touch 2：从数组中设置存储

> ID：13279680
> 
> 赞同：0
> 
> 时间：2012-11-07T22:54:39.840
> 
> 标签：sencha-touch, extjs, sencha-touch-2

我正在尝试创建一个商店，然后我可以从中创建一个列表。问题是当我创建商店时，它是空的。

这是我的模型：

```
Ext.define('MyApp.model.TrackingCode', {
    extend: 'Ext.data.Model',

    config: {
        fields: [
            'id',
            'code',
            'count'
        ]
    }
}); 
```

这是我试图填充商店的代码：

```
var tc = [{id: 1, code: 'abc', count: 5}];
var store = Ext.create('Ext.data.Store', {
  model: 'MyApp.model.TrackingCode',
  data: tc
}); 
```

console.log(store) 的摘要；显示了这一点：

类{_proxy：类，数据：类，_totalCount：null，eventDispatcher：类，initialConfig：对象...}

它将总计数值显示为空，所以我认为我的商店没有人满为患。

任何见解将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T07:32:33.130

当您通过内联加载数据时，_totalCount 将为空。当您从服务器加载数据时，_totalCount 会有一些值。简而言之，_totalCount 是指服务器中的总数据集。所以不用担心。

尝试这个

```
console.log(store.getCount()); 
```

这将返回存储中加载的数据的确切计数。如果它返回一些值，那么您的代码是好的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T12:29:14.263

您必须将“数据”属性放入 Store 的**配置**对象中，如下所示：

```
var tc = [{id: 1, code: 'abc', count: 5}];
var store = Ext.create('Ext.data.Store', {
  model: 'MyApp.model.TrackingCode',
  config : {
    data: tc
  }
}); 
```

# mysql - innoDB - 我应该关闭 innodb_flush_log_at_trx_commit 吗？

> ID：13279681
> 
> 赞同：2
> 
> 时间：2012-11-07T22:54:42.647
> 
> 标签：mysql, sql, innodb

我有一个有 100 万行的数据库表。输入新行或更新行需要一点时间。要进行 50 次更新（格式为`update table set field = 1234 where id = 5678; update table set field = 912 where id = 582; ...`），可能需要 4 或 5 秒。

我怎样才能减少这个时间？值得玩这个`innodb_flush_log_at_trx_commit`设置吗？如何仅为某些连接/查询设置该设置？

玩起来安全`innodb_flush_log_at_trx_commit`吗？数据并不重要，只要一个副本（在`UPDATE`命令之前或之后）完好无损（它只是设置一些随机数据更新......在这些查询中没有重要数据被更改）

此表上的大部分查询都是`SELECT`如此，这就是我使用 innodb 的原因。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T01:51:21.530

是的，更改 innodb_flush_log_at_trx_commit 是安全的。将其从 1（默认值）更改为 0 或 2 的效果是日志写入大约每秒发生一次，而不是每次提交发生一次。换句话说，现在您的 50 次更新会导致 50 次 fsync（假设您正在使用自动提交）。您可以将其更改为每秒 1 个 fsync。

但是你也可以通过*不*使用自动提交来获得类似的效果，而是将 50 个更新包装在显式事务中：

1.  启动一个事务，它会暂时禁用自动提交。
2.  运行 50 次更新。
3.  犯罪。

这将导致在提交时进行 1 次 fsync（加上每秒 1 次 fsync，无论配置如何）。这可能足以提高您的吞吐量。

综上所述，我认为 50 个 fsync 在任何系统上都不需要 5 秒，除非您的硬盘驱动器非常糟糕，或者服务器还加载了很多其他流量。

您还应该确保更新受益于索引。我可以假设`id`是表的主键，因此它是聚集索引。但我想确认一下。您可以在上述问题的编辑中运行`SHOW CREATE TABLE <tablename>`并发布输出吗？

# sql - 在具有值的列上连接 SQL 表

> ID：13279685
> 
> 赞同：1
> 
> 时间：2012-11-07T22:54:50.173
> 
> 标签：sql, join

假设我有以下表格

```
Collection DirectorId StudioId
   1             NULL      1
   2             2         NULL
   3             NULL      2

Director MovieId
  1        1
  2        4

Studio   MovieId
  1        1
  2        3
  2        4
  1        2 
```

收藏表将始终具有导演或工作室 ID，但不会同时具有两者。

我怎么能写一个查询来把所有的电影都放在一个集合中，这样我最终得到

```
CollectionID MovieID
1            1
1            2
2            4
3            3
3            4 
```

我希望这是有道理的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T22:59:51.783

这应该有效（不确定您的列名，但您明白了）：

```
select c.CollectionID, isnull(d.MovieId, s.MovieId) MovieID
from Collection c
left join Director d on d.Director=c.DirectorId
left join Studio s on s.Studio=c.StudioId 
```

# php - 基于域切换环境是否不安全？

> ID：13279689
> 
> 赞同：2
> 
> 时间：2012-11-07T22:55:19.057
> 
> 标签：php, security, environment

我很好奇是否根据 dev.domain.com、staging.domain.com 等域名将“环境”设置为 Production、Dev、Staging 等是否是个坏主意。

有人可以编辑他们的主机文件，将 dev.domain.com 指向 domain.com，所以现在系统*认为*它在 Dev 中，而实际上它在 Prod 中？这意味着任何特定于开发的代码都将由一个完全陌生的人运行。

这是可能的还是有更好的方法来确定您的环境，例如在服务器变量中手动设置它？

作为参考，我正在使用 PHP。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T22:58:24.400

我会在机器上的服务器变量中设置环境。这使您可以在部署期间对其进行控制，并且不能被无权这样做的人弄乱。尽管如果您担心开发人员无意中连接到生产环境，那就是另一回事了。您应该通过其他一些过程控制对生产凭证的访问，例如 jndi（在 Java 世界中）或在运行时或部署时替换的环境密钥（以任何语言工作）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T23:02:44.027

根据域名将您的“环境”设置为生产、开发、登台等是绝对安全的。这是因为您可以完全控制您的域名。

当心：不要相信别人让你相信你的域名是什么。例如，`$_SERVER['HTTP_HOST']`不是您的域名。它是客户端发送给您的 HTTP Host 标头的值，因此可以自由操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T23:28:07.947

这取决于您如何使用您的域？假设有 domain.com，但有几个子域，sub1.domain.com、sub2.domain.com 等，每个子域由不同的用户和/或应用程序管理！

# python - 在 pandas 中组合两个数据框时出现意外行为

> ID：13279690
> 
> 赞同：3
> 
> 时间：2012-11-07T22:55:24.420
> 
> 标签：python, pandas

这可能是一个错误，但也可能是我错过的熊猫的一个微妙之处。我正在组合两个数据框，结果的索引未排序。奇怪的是，我从未见过一个无法维护之前排序的索引的 combine_first 实例。

```
>>> a1
                            X  Y
DateTime                                    
2012-11-06 16:00:11.477563      8        80
2012-11-06 16:00:11.477563      8        63
>>> a2
                        X  Y
DateTime                                   
2012-11-06 15:11:09.006507      1        37
2012-11-06 15:11:09.006507      1        36
>>> a1.combine_first(a2)
                            X  Y
DateTime                                   
2012-11-06 16:00:11.477563      8        80
2012-11-06 16:00:11.477563      8        63
2012-11-06 15:11:09.006507      1        37
2012-11-06 15:11:09.006507      1        36
>>> a2.combine_first(a1)
                            X  Y
DateTime                                    
2012-11-06 16:00:11.477563      8        80
2012-11-06 16:00:11.477563      8        63
2012-11-06 15:11:09.006507      1        37
2012-11-06 15:11:09.006507      1        36 
```

我可以复制，所以我很乐意接受建议。最欢迎猜测发生了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T11:28:24.480

该`combine_first`函数用于`index.union`对索引进行组合和排序。`index.union`文档字符串指出它仅在可能的情况下进行排序，因此不一定`combine_first`会按设计返回排序结果。

对于非单调索引，`index.union`尝试排序，但如果出现异常则返回未排序的结果。我不知道这是否是一个错误，但`index.union`甚至没有尝试对单调索引进行排序，例如您的示例中的日期时间索引。

我在[GitHub 上](https://github.com/pydata/pandas/issues/2196)打开了一个问题，但我想你现在应该`a2.combine_first(a1).sort_index()`为任何日期时间索引做。

**更新**：此错误现已在 GitHub 上修复

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T00:55:25.663

你真的是想使用`.append()`吗？

尝试：-

```
a2.append(a1) 
```

`combine_first`实际上不是一个`append`操作。见 - [http://pandas.pydata.org/pandas-docs/dev/basics.html?highlight=combine_first#combining-overlapping-data-sets:-](http://pandas.pydata.org/pandas-docs/dev/basics.html?highlight=combine_first#combining-overlapping-data-sets:-)

> 偶尔出现的问题是两个相似数据集的组合，其中一个中的值优于另一个。一个例子是代表特定经济指标的两个数据系列，其中一个被认为具有“更高质量”。但是，较低质量的系列可能会更早地追溯历史或具有更完整的数据覆盖范围。因此，我们想组合两个 DataFrame 对象，其中一个 DataFrame 中的缺失值有条件地用来自另一个 DataFrame 的类似标记值填充。

虽然`append`是[http://pandas.pydata.org/pandas-docs/dev/generated/pandas.DataFrame.append.html?highlight=append](http://pandas.pydata.org/pandas-docs/dev/generated/pandas.DataFrame.append.html?highlight=append)

> 将 other 的列附加到此帧的列和索引的末尾，返回一个新对象。不在此框架中的列将添加为新列。

# multithreading - 可以将线程池 （如 boost）初始化为类构造函数并在调用类成员时使用吗？

> ID：13279696
> 
> 赞同：1
> 
> 时间：2012-11-07T22:55:51.280
> 
> 标签：multithreading, threadpool, boost-thread

假设我有一个线程池（例如[http://threadpool.sourceforge.net/](http://threadpool.sourceforge.net/)）；我有这个代码：

```
class Demigod{ 
public:
   Demigod();
   void AskObedienceFast();
   void AskObedienceSlow();
   void WorkHardGodDamn();
   ~Demigod();
private:
   ThreadPool m_PitySlaves;
   int m_Quota;
};
Demigod::Demigod() : m_PitySlaves(manyPlease) { 
}
void Demigod::WorkHardGodDamn(){ 
    //something irelevant just to annoy slaves
}
void Demigod::AskObedienceFast() { 
    for(int q=0; q<m_Quota; ++q){
       m_PitySlaves.schedule(boost::bind(&Demigod::WorkHardGodDamn, this)); 
    }
    m_PitySlaves.wait();
}
void Demigod::AskObedienceSlow() { 
    ThreadPool poorSouls;
    for(int q=0; q<m_Quota; ++q){
       poorSouls.schedule(boost::bind(&Demigod::WorkHardGodDamn, this)); 
    }
    poorSouls.wait();
}
void main(){ 
   Demigod someDude;
   for(size_t i=0; i<dontstop; ++i){ 
      someDude.AskObedienceFast();
   }
} 
```

与 AskObedienceSlow 相比，AskObedienceFast 能否更快、更有效？这样我就可以拥有一些线程（从属）并随时准备工作，而不必在每次调用时浪费时间创建线程池。我知道我可以自己验证代码，但我的问题更广泛，如果这不是从根本上失去其他地方的性能，比如线程池中的那些线程做一些等待过程？它归结为避免昂贵的线程池初始化（和线程）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T10:33:42.853

没有像“等待过程”这样的东西。如果一个线程正在等待（在某个条件下），调度程序只是简单地跳过它，因此这样的线程不会做任何事情，也不会被切换进出。正如您非常正确地指出的那样，线程中最昂贵的任务是设置线程（尽管所有主要操作系统都在采取措施尽可能减少它，以跟上最近的内核倍增），紧随其后的是切换线程上下文。所以你可以看到为什么`AskObedienceSlow`是可怕的。你的临时建筑应该只是“便宜”的结构，建造和破坏需要尽可能少的时间。`ThreadPool`绝对不是这样的。甚至`AskObedienceFast`不会保护您免受上下文切换开销的影响，但这就是为什么更大的线程池并不总是更好的原因，最佳性能大小是根据您的实际工作负载仔细平衡的问题。出于这个原因，一些性能最好的高负载、高吞吐量应用程序是单线程、消息传递设计。用于此类应用程序的编程语言（如 Erlang）是明确的无线程的。

# java - 如何使用 ajax 设置 wicket listview 面板更新的锚点

> ID：13279697
> 
> 赞同：0
> 
> 时间：2012-11-07T22:55:52.850
> 
> 标签：java, html, ajax, wicket

我在面板中有一个 ListView，它启用了垂直滚动并使用 css 进行绝对定位。当我选择一个添加到 listView 的 IndicatingAjaxFallbackLink 时，它会更新页面上的其他面板，以便为 listItem 提供更多信息/选项。它还会刷新 listView 以添加一个 css 类来突出显示选定的 listItem。我正在尝试向 listView 添加一个锚点，以便它呈现滚动以显示选定的 listItem。

问题：当我从列表中选择一个项目时，listView 将重新加载并滚动到面板顶部，而不是选择的项目。如果没有 url 重定向和整页重新加载，这可能吗？

标记：

```
<div wicket:id="psbContainer" style="position: absolute; top: 325px; height: 300px; overflow-y: auto; left: 4px; right: 305px;">
    <table width="100%">
        <tr wicket:id="psbList" valign="top">
            <td><a wicket:id="viewRelated"><span wicket:id="psbNum"/></a></td>
            <td wicket:id="summary"/>
            <td wicket:id="psbMilestone"/>
            <td wicket:id="dueDate"/>
            <td wicket:id="devCount"/>
            <td wicket:id="activeCount"/>
            <td wicket:id="ccCount"/>
            <td wicket:id="team"/>
        </tr>
    </table>
</div> 
```

爪哇：

```
 psbListView = new ListView("psbList", psbList) {
        protected void populateItem(ListItem listItem) {
            final Space psb = (Space) listItem.getModelObject();
            if(psb.equals(psbSelected)) {
                listItem.add(selected);
            }
            // viewRelated ========================================================
            IndicatingAjaxFallbackLink viewRelated = new IndicatingAjaxFallbackLink("viewRelated") {
                public void onClick(AjaxRequestTarget target) {
                    psbSelected = psb;
                    target.addComponent(pslpContainer);
                }
            };
            this.setOutputMarkupId(true);
            this.setMarkupId(psb.getPsbNum());
            viewRelated.setAnchor(this);
            viewRelated.add(new Label("psbNum", new Model(psb.getPsbNum())));
            listItem.add(viewRelated);
            ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T09:59:40.940

为什么不在 AjaxRequestTarget 中使用纯 javascript 更新客户端 css 样式？应该不会超过

```
ListItem<?> previousSelected = ...;
ListItem<?> currentSelected = ...;

target.appendJavaScript("document.getElementById('" + previousSelected.getMarkupId() + "').className=\"\";");
target.appendJavaScript("document.getElementById('" + currentSelected.getMarkupId() + "').className=\"selected\";"); 
```

这样您就不必更新整个列表视图来更改某些类。

# c# - IDataReader 不读取，没有错误

> ID：13279698
> 
> 赞同：1
> 
> 时间：2012-11-07T22:55:56.883
> 
> 标签：c#, asp.net, sqldatareader, idatareader

我意识到 IDataReader 已经过时，有些人认为它是脏代码，但在我正在研究的网站上，这就是他们使用的。我有一个 IDataReader 语句来运行查询以使用多个连接从表中获取特定的 id。现在这个站点有一个 DAL，但它只支持一次从一个表中选择的能力，因此使用带有连接的 select 语句不适用于它。这就是我被迫使用 IDataReader 的原因。

```
 if (Request.QueryString["CategoryId"].ToString() == "0")
                {
                    using (IDataReader getCategoryID = DB.GetRS("SELECT ItemCatalogCategory.CategoryID FROM UserCustomerCatalog INNER JOIN ItemCatalogCategory ON UserCustomerCatalog.ItemProfileCatalogID = ItemCatalogCategory.ItemProfileCatalogID " +
                              "INNER JOIN ItemCategory ON ItemCatalogCategory.CategoryID = ItemCategory.CategoryID INNER JOIN StoreCatalog ON UserCustomerCatalog.StoreCatalogID = StoreCatalog.StoreCatalogID " +
                              "WHERE UserCustomerCatalog.ItemProfileCatalogID = '" + Request.QueryString["CatalogID"] + "' AND UserCustomerCatalog.CustomerID =' " + Session["Customer"].ToString() + "' AND ItemCategory.ProductID = '" + productis + "'"))
                    {

                        if (getCategoryID.Read())
                        {
                            string categoryID = getCategoryID["ItemCatalogCategory.CategoryID"].ToString();

                            string lookmike = Request.Url.AbsolutePath + "?CatalogID=" + catalogis + "&ProductID=" + productis + "&CatalogIndex=" + Request.QueryString["CatalogIndex"] + "&CategoryID=" + categoryID;
                            Response.Redirect(Request.Url.AbsolutePath + "?CatalogID=" + catalogis + "&ProductID=" + productis + "&CatalogIndex=" + Request.QueryString["CatalogIndex"] + "&CategoryID=" + categoryID);

                        }
                        else
                        {
                            Response.Redirect(Request.Url.AbsolutePath + "?CatalogID=" + catalogis + "&ProductID=" + productis + "&CatalogIndex=" + Request.QueryString["CatalogIndex"] + "&CategoryID=" + Request.QueryString["CategoryId"]);
                        }

                    }//end using getCategoryID
                } 
```

这就是我所拥有的，但是当它到达时：

```
if (getCategoryID.Read()) 
```

它呈现为假，没有抛出异常，也没有错误或警告。我过去做过这种类型的选择没有问题，但我不知道为什么 .Read() 返回错误。

任何人都可以提出它不阅读的可能原因吗？如果需要更多代码，我可以根据需要提供。任何帮助表示赞赏，在此先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T14:00:22.467

查看您的 SQL 文本，有一个小错字可能会对结果造成严重破坏

```
 "WHERE UserCustomerCatalog.ItemProfileCatalogID = '" + Request.QueryString["CatalogID"] + 
 "' AND UserCustomerCatalog.CustomerID =' " + Session["Customer"].ToString() + "' AND ..... "
                                    here ^ 
```

该空间破坏了您的查询并且没有给出任何结果。

让我再重复一遍，正如其他成员已经说过的那样，您遇到了[SQL 注入问题。](http://www.unixwiz.net/techtips/sql-injection.html)您可以向 GetRS 的实际实现添加一个重载，它还接收一个 SQLParameter 集合以添加到用于构建 SqlDataReader 的命令中。像这样的东西

```
public SqlDataReader GetRS(string sqlText, SqlParameter[] prm)
{
      ....
      SqlCommand cmd = new SqlCommand(sqlText, conn);
      cmd.Parameters.AddRange(prm);
      .....
} 
```

然后开始更新调用代码。

# javascript - 无法找到悬停/鼠标悬停 css 更改

> ID：13279700
> 
> 赞同：0
> 
> 时间：2012-11-07T22:56:01.277
> 
> 标签：javascript, css, joomla1.5

我正在使用 Joomla 模板，我已经更改了顶级菜单颜色以匹配我们的徽标，但是当您将鼠标悬停在下拉菜单上时，我无法找到颜色变化的来源。我使用萤火虫将顶级菜单项设置为悬停，因此它保持打开状态，但当我检查下拉元素时，我看不到颜色变化的来源。我已经在每个后续的 div 和 li 上设置了悬停状态，但这并没有触发颜色的变化，所以我对颜色变化的来源感到困惑。这是我正在处理的网页[http://www.webchild.com.au/search-results](http://www.webchild.com.au/search-results)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T23:03:37.783

您有一个 Javascript 更新了 hover-box1 类的颜色，请检查...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T23:04:51.627

我认为您的案例菜单背景颜色是位于此处的图像：

[http://www.webchild.com.au/templates/yoo_mellow_July2012_Wider/css/variations/../../images/variations/bluegrey/menu_level1_item.png](http://www.webchild.com.au/templates/yoo_mellow_July2012_Wider/css/variations/../../images/variations/bluegrey/menu_level1_item.png)

# java - 检查日期对象和日历对象是否在同一月份的最有效方法

> ID：13279701
> 
> 赞同：3
> 
> 时间：2012-11-07T22:56:01.230
> 
> 标签：java, performance, date, comparison, deprecated

我正在做一个项目，该项目将在日期之间进行数千次比较，看看它们是否在同一个月，我想知道最有效的方法是什么。

这不完全是我的代码的样子，但要点如下：

```
List<Date> dates = getABunchOfDates();
Calendar month = Calendar.getInstance();
for(int i = 0; i < numMonths; i++) 
{
    for(Date date : dates)
    {
        if(sameMonth(month, date)
            .. doSomething
    }
    month.add(Calendar.MONTH, -1);
} 
```

当这种比较会发生数千次时，为每个日期创建一个新`Calendar`对象似乎是一个相当大的开销，所以我有点想作弊并使用不推荐使用的方法`Date.getMonth()`和`Date.getYear()`

```
public static boolean sameMonth(Calendar month, Date date)
{
    return month.get(Calendar.YEAR) == date.getYear() && month.get(Calendar.MONTH) == date.getMonth();
} 
```

我非常接近使用这种方法，因为它似乎是最快的，但是**有更快的方法吗？** 这**是一种愚蠢的方式**吗，因为这些`Date`方法已被弃用？注意：此项目将始终使用 Java 7 运行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T23:01:16.690

我无法评论是否使用已弃用的方法，但如果您选择不使用，则无需`Calendar`为每次`Date`检查都实例化一个新方法。只需使用另一个`Calendar`并`setTime(date)`在检查之前调用（`Calendar`如果并行化，则为每个线程调用一个）。

作为旁注，我必须同意 ChristopheD 的评论，即这是值得数据库的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T23:02:20.183

我认为您可以定义一个静态`DateFormat`来从中提取月份和年份，`Date`并将这两个对象仅用作日期。

```
 public static DateFormat formatter= new SimpleDateForm("MMyyyy");
    public static boolean sameMonth(Date date1, Date date2)
    {
      return formatter.format(date1).equals(formatter.format(date2));
    } 
```

# java - 如何在支持 J2ME 的设备中获取设备、制造商和型号？

> ID：13279706
> 
> 赞同：2
> 
> 时间：2012-11-07T22:56:25.517
> 
> 标签：java, java-me, operating-system, nokia, system-properties

我有一个诺基亚 2730 并且想阅读型号和制造商，我如何使用 j2me 应用程序来做到这一点？

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T05:50:00.397

使用`microedition.platform`系统属性。它通常包括设备信息。[您可以在诺基亚文档](http://www.developer.nokia.com/Resources/Library/Java/#!developers-guides/application-framework/system-properties/generic-system-properties.html)中查看其格式

# javascript - jquery each 循环和动画

> ID：13279707
> 
> 赞同：1
> 
> 时间：2012-11-07T22:56:30.257
> 
> 标签：javascript, jquery

我有一些跨度标签：

```
<span w="560"></span>
<span w="340"></span>
<span w="120"></span> 
```

使用 jQuery，我想选择每个跨度，获取其 w 属性中的值并将其设置为该值 +“px”。

我有一个不起作用的简单代码：

```
$(document).ready(function(){

    $('span').animate({width: $(this).attr('w') + 'px'}, 2000);

}); 
```

有什么建议么？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T22:57:53.797

**这**在没有上下文的情况下没有任何意义。

使用`$.each loop`并且您的代码应该可以工作，因为**这**将引用迭代中的当前跨度

```
$('span').each(function() {
    $(this).animate({width: $(this).attr('w') + 'px'}, 2000);
  }); 
```

**更新**

正如`adeneo`建议的那样，您的 HTML 在使用自定义属性时不会被验证。在它前面加上数据，以便您的 HTML 也将被验证。

```
<span data-w="560"></span> 
```

要访问它，您可以使用

`$(this).data('w');` **或者** `$(this).attr('data-w')`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T22:58:47.257

使用有效的属性，例如 data-w：

```
<span data-w="560"></span>
<span data-w="340"></span>
<span data-w="120"></span> 
```

并遍历元素

```
$(document).ready(function(){

    $('span').each(function(idx, elm) {
        $(elm).animate({width: $(elm).data('w')}, 2000);
    });

}); 
```

# objective-c - @synthesize 用于类变量

> ID：13279711
> 
> 赞同：2
> 
> 时间：2012-11-07T22:56:52.737
> 
> 标签：objective-c, ios, xcode, xcode4

```
//SecondPage.h
@property (nonatomic, copy) NSString *secondLabelText;
+(SecondPage *) newAlloc;
+(id) totalOpen;
+(void)setSecondLabelText; 
```

第二页.m

```
@synthesize secondLabelText;   //DOESNT WORK.
NSString* secondLabelText;   //DOES WORK. 

+(void) setSecondLabelText
{
    secondLabelText = @"TEST";
}

+(id) totalOpen
{
    [self setSecondLabelText];
    return secondLabelText;
} 
```

有没有办法可以对类变量使用综合？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T23:16:17.390

Objective-c 没有类变量，部分原因是静态 C 变量（和类方法）通常可以发挥相同的作用，因此添加它们并不是优先事项。

没有类变量意味着没有类属性，因此没有类@Synthesize。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T05:25:39.663

使用强关键字而不是复制

```
 @property (nonatomic,strong) NSString *secondLabelText; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T23:04:36.963

@synthesize 可以轻松获取和设置接口部分中公开的属性。

类变量仅供类内部使用，不用于外部世界。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T23:11:18.177

我想你可能正在寻找一个静态变量？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-07T22:59:05.767

您不能在类`@interface`声明中声明类变量，也不可以`@synthesize`。

# ios - UIWebView 中的 PDF 大小

> ID：13279719
> 
> 赞同：2
> 
> 时间：2012-11-07T22:57:38.647
> 
> 标签：ios, pdf, uiwebview

我只想知道在 UIWebView 中加载 pdf 后是否可以知道它的大小？当我们使用这样的代码时：

```
[self.siteWebView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://www.test.fr/test.pdf"]]]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-08T08:11:10.673

是的。绝对有可能在 uiwebview 中获得 pdf 的高度（1 页高度或任何内容）。我以前做过。下面的代码显示了如何在 uiwebview 中获得 1 个页面高度。

```
-(void)getPDFInfo    
{
NSURL* pdfFileUrl = self.fileLocation;

CGPDFDocumentRef pdf = CGPDFDocumentCreateWithURL((CFURLRef)pdfFileUrl);
CGPDFPageRef page;

// CGRect aRect = CGRectMake(0, 0, 100, 200); // thumbnail size

NSUInteger totalNum = CGPDFDocumentGetNumberOfPages(pdf);
numberOfPage= totalNum;
for(int i = 0; i < totalNum; i++ ) {
    CGPDFPageRef myPageRef=CGPDFDocumentGetPage(pdf, i+1);
    //aRect=CGPDFPageGetBoxRect(myPageRef, kCGPDFCropBox);

    CGRect cropBox = CGPDFPageGetBoxRect(myPageRef, kCGPDFCropBox);
    pdfWidth= cropBox.size.width;
    pdfHeight=cropBox.size.height;

    NSLog(@"cropbox size is %@",NSStringFromCGRect(cropBox));

    int pageRotation = CGPDFPageGetRotationAngle(myPageRef);

    CGSize pageVisibleSize = CGSizeMake(cropBox.size.width, cropBox.size.height);
    if ((pageRotation == 90) || (pageRotation == 270) ||(pageRotation == -90)) {
        pageVisibleSize = CGSizeMake(cropBox.size.height, cropBox.size.width);
    }

}
} 
```

调用此函数后，调用此行以获取 uiwebview 中的 pdf 文件大小。

```
documentHeightInWebview = pdfHeight * (documentWidthInWebview/pdfWidth); 
```

其中 documentWidthInWebview 是您的真实 uiwebview 宽度，它将显示您的 pdf 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T23:48:20.900

您可以使用 javascript 来获取信息。把它放在 webview 中确实加载了。例如，以下将获取页面的高度。

```
-(void) webViewDidFinishLoad:(UIWebView *)webView {

//get the height of the chunk, and store it.
CGFloat height = [[webView stringByEvaluatingJavaScriptFromString:@"document.height;"] floatValue]; 
```

# android - 如何从“window.plugins.barcodeScanner.scan”PhoneGap Zxing 插件中检索和使用数据？

> ID：13279721
> 
> 赞同：1
> 
> 时间：2012-11-07T22:57:42.547
> 
> 标签：android, qr-code, zxing, phonegap-plugins, barcode-scanner

我正在使用 PhoneGap 开发一个 Android 应用程序。我正在使用 ZXing 插件来扫描二维码。

在 index.html 中，我放置了一个按钮以扫描 QR 码：

```
<a href="#" onclick="scanCode();"> 
```

这是java-script文件中scanCode的代码：

```
var scanCode = function() {
window.plugins.barcodeScanner.scan(
    function(result) {
    alert("Scanned Code: " + result.text 
            + ". Format: " + result.format
            + ". Cancelled: " + result.cancelled);    
}, function(error) {
    alert("Scan failed: " + error);
}); 
```

}

我想从“结果”中检索数据，尤其是“result.text”，以便在另一个 html 文件中使用它们。

请问我该怎么做？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T08:13:45.637

`result.text`已经是扫描的文本了。

尝试这个：

```
var thetext = result.text; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T21:10:19.447

[https://github.com/phonegap/phonegap-plugins/tree/master/Android/BarcodeScanner](https://github.com/phonegap/phonegap-plugins/tree/master/Android/BarcodeScanner) talks about adding src.com.phonegap.plugins.barcodescanner.BarcodeScanner.java.

# iphone - 如何运行支持真实 iOS 设备的自动化测试、截取屏幕截图并通过 ID 识别控件？

> ID：13279723
> 
> 赞同：1
> 
> 时间：2012-11-07T22:57:45.707
> 
> 标签：iphone, automation, screenshot

我需要在我们的原生 iPhone 应用程序上运行一些自动化的 UI 检查。我希望能够做到以下几点：

*   我想自动化一些动作并拍摄屏幕截图。

*   我不希望该工具通过图像或文本来识别按钮，因为我的应用程序一直在更改图像和文本。我想通过 ID 识别控件。

*   我想在真正的 iPhone 设备上运行这些测试。

*   最后，当我完成一项测试时，我需要访问设置以修改一些更改，然后重新启动应用程序进行测试。（无需恢复应用）

有没有实现这些自动化 UI 测试的好方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T04:02:42.283

你可以使用苹果提供的工具——UIAutomation，它提供了所有预期的自动化设施。也可以截图。在此处检查文档[apple doc](http://developer.apple.com/library/ios/#documentation/DeveloperTools/Reference/UIAutomationRef/_index.html)

这是一个很好的教程，从[http://cocoamanifest.net/articles/2011/05/uiautomation-an-introduction.html开始](http://cocoamanifest.net/articles/2011/05/uiautomation-an-introduction.html)

# javascript - 使用 CSS 和 jQuery 在 Instagram 的 iPhone 应用程序中获得一个“上推”的粘性标题

> ID：13279725
> 
> 赞同：71
> 
> 时间：2012-11-07T22:57:53.433
> 
> 标签：javascript, html, css, instagram, sticky

Instagram 应用程序有一个很好的粘性标题，可以将当前的标题推到新的位置。我找到了一个很棒的教程，关于如何在 Android 上原生地做到这一点，但我希望用 JavaScript 和 CSS 来做到这一点。

我能够让我的标题换一个新的，但我似乎无法找到一种方法来模仿 Instagram 的做法。任何帮助是极大的赞赏。

****编辑：****在评论中使用航点作为 Cj 滚动时，我能够让页眉贴在页面顶部。（[链接到航点](http://imakewebthings.com/jquery-waypoints/sticky-elements/)）。我遇到的主要问题是 instagram 在他们的 iPhone 移动应用程序中使用的“上推”效果。我会链接到一个例子，但我以前从未见过它使用过。**

* ***编辑 2：**使用@Chris 提供的部分代码笔，我能够让标题保持不变。然后我添加了一个 .slideUp 效果。我现在的问题是让 .slideUp 效果仅在到达下一个标题时发生。现在效果在滚动时激活。

这是代码：

```
(function() {
function stickyTitles(stickies) {
    this.load = function() {
        stickies.each(function(){
            var thisSticky = jQuery(this);
            jQuery.data(thisSticky[0], 'pos', thisSticky.offset().top);
        });
    }
    this.scroll = function() {      
        stickies.each(function(){           
            var thisSticky = jQuery(this),          
                pos = jQuery.data(thisSticky[0], 'pos');
            if (pos <= jQuery(window).scrollTop()) {
                thisSticky.addClass("fixed");
                // added this 
                 $(".followMeBar:parent").slideUp();

            } else {
                thisSticky.removeClass("fixed");
            }
        });         
    }
}
jQuery(document).ready(function(){
    var newStickies = new stickyTitles(jQuery(".followMeBar"));
    newStickies.load();
    jQuery(window).on("scroll", function() {
        newStickies.scroll();

    }); 
}); 
```

})();

* * *

## 回答 #1

> 赞同：133
> 
> 时间：2012-11-08T16:49:29.167

对此没有快速或简单的答案，但通过一些创造性的哄骗，我们可以模拟相同的功能。

我们需要的是一系列我们可以识别、循环然后设置的元素，以便当我们点击它们在页面上的位置时，前一个项目被向上推，新项目变得固定。我们将需要使用 jQuery 的`offset().top`方法检索元素的初始位置并将其存储在`data`标签中，以便我们以后可以引用它。然后其余的将在我们滚动时计算。

**这应该可以解决问题：**

```
var stickyHeaders = (function() {

  var $window = $(window),
      $stickies;

  var load = function(stickies) {

    if (typeof stickies === "object" && stickies instanceof jQuery && stickies.length > 0) {

      $stickies = stickies.each(function() {

        var $thisSticky = $(this).wrap('<div class="followWrap" />');

        $thisSticky
            .data('originalPosition', $thisSticky.offset().top)
            .data('originalHeight', $thisSticky.outerHeight())
              .parent()
              .height($thisSticky.outerHeight()); 			  
      });

      $window.off("scroll.stickies").on("scroll.stickies", function() {
		  _whenScrolling();		
      });
    }
  };

  var _whenScrolling = function() {

    $stickies.each(function(i) {			

      var $thisSticky = $(this),
          $stickyPosition = $thisSticky.data('originalPosition');

      if ($stickyPosition <= $window.scrollTop()) {        

        var $nextSticky = $stickies.eq(i + 1),
            $nextStickyPosition = $nextSticky.data('originalPosition') - $thisSticky.data('originalHeight');

        $thisSticky.addClass("fixed");

        if ($nextSticky.length > 0 && $thisSticky.offset().top >= $nextStickyPosition) {

          $thisSticky.addClass("absolute").css("top", $nextStickyPosition);
        }

      } else {

        var $prevSticky = $stickies.eq(i - 1);

        $thisSticky.removeClass("fixed");

        if ($prevSticky.length > 0 && $window.scrollTop() <= $thisSticky.data('originalPosition') - $thisSticky.data('originalHeight')) {

          $prevSticky.removeClass("absolute").removeAttr("style");
        }
      }
    });
  };

  return {
    load: load
  };
})();

$(function() {
  stickyHeaders.load($(".followMeBar"));
});
```

```
.followMeBar {
  background: #999;
  padding: 10px 20px;
  position: relative;
  z-index: 1;
  color: #fff;
}
.followMeBar.fixed {
  position: fixed;
  top: 0;
  width: 100%;
  box-sizing: border-box;
  z-index: 0;
}
.followMeBar.fixed.absolute {
  position: absolute;
}
/* For aesthetics only */

body {
  margin: 0;
  font-family: Segoe, "Segoe UI", "DejaVu Sans", "Trebuchet MS", Verdana, sans-serif;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<div class="followMeBar">A</div>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<div class="followMeBar">B</div>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<div class="followMeBar">C</div>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<div class="followMeBar">D</div>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<div class="followMeBar">E</div>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<div class="followMeBar">F</div>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<div class="followMeBar">G</div>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<div class="followMeBar">H</div>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<div class="followMeBar">I</div>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<div class="followMeBar">J</div>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<div class="followMeBar">K</div>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<div class="followMeBar">L</div>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<div class="followMeBar">M</div>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<div class="followMeBar">N</div>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<div class="followMeBar">O</div>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<div class="followMeBar">P</div>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<div class="followMeBar">Q</div>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<div class="followMeBar">R</div>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<div class="followMeBar">S</div>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<div class="followMeBar">T</div>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<div class="followMeBar">U</div>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<div class="followMeBar">V</div>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<div class="followMeBar">W</div>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<div class="followMeBar">X</div>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<div class="followMeBar">Y</div>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<div class="followMeBar">Z</div>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
```

# 这是纯 CSS 版本：

在你说“什么？！当只有 CSS 版本时，我刚刚经历了所有这些？！”之前 它只适用于几个浏览器。**例如在 Firefox 中试试这个：**

```
.sticky {
  position: -webkit-sticky;
  position: -moz-sticky;
  position: -o-sticky;
  position: -ms-sticky;
  position: sticky;
  top: 0;
  left: 0;
  right: 0;
  display: block;
  z-index: 1;
  background: #999;
  color: #fff;
  padding: 10px 20px;
}

/* For aesthetics only */
body {
  margin: 0;
  font-family: Segoe, "Segoe UI", "DejaVu Sans", "Trebuchet MS", Verdana, sans-serif;
}
```

```
<div data-lorem="p">
  <span class="sticky">a</span>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
</div>
<div data-lorem="p">
  <span class="sticky">b</span>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
</div>
<div data-lorem="p">
  <span class="sticky">c</span>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
</div>
<div data-lorem="p">
  <span class="sticky">d</span>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
</div>
<div data-lorem="p">
  <span class="sticky">e</span>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
</div>
<div data-lorem="p">
  <span class="sticky">f</span>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
</div>
<div data-lorem="p">
  <span class="sticky">g</span>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
</div>
<div data-lorem="p">
  <span class="sticky">h</span>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
</div>
```

[http://caniuse.com/#feat=css-sticky](http://caniuse.com/#feat=css-sticky)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-08-16T14:44:51.873

首先，感谢@Chris Spittles 的出色回答。

我创建了一个修改版本，无需包装每个粘性元素，因为它只是更改它们的相对位置而不是使用固定定位。

```
var stickyHeaders = (function() {

    var $stickies;

    var load = function(stickies, target) {

        if (typeof stickies === "object" && stickies instanceof jQuery && stickies.length > 0) {

            $stickies = stickies.each(function() {

                var $thisSticky = $(this);

                $thisSticky
                    .data('originalPosition', $thisSticky.offset().top)
                    .data('originalHeight', $thisSticky.outerHeight());               
            });

            target.off("scroll.stickies").on("scroll.stickies", function(event) {
                 _whenScrolling(event);     
            });
        }
    };

    var _whenScrolling = function(event) {

        var $scrollTop = $(event.currentTarget).scrollTop();

        $stickies.each(function(i) {            

            var $thisSticky = $(this),
                $stickyPosition = $thisSticky.data('originalPosition'),
                $newPosition,
                $nextSticky;

            if ($stickyPosition <= $scrollTop) {

                $newPosition = Math.max(0, $scrollTop - $stickyPosition);
                $nextSticky = $stickies.eq(i + 1);

                if($nextSticky.length > 0) {

                    $newPosition = Math.min($newPosition, ($nextSticky.data('originalPosition') -  $stickyPosition) - $thisSticky.data('originalHeight'));
                }

            } else {

                $newPosition = 0;
            }

            $thisSticky.css('transform', 'translateY(' + $newPosition + 'px)');

            //could just as easily use top instead of transform
            //$thisSticky.css('top', $newPosition + 'px');
        });
    };

    return {
        load: load
    };
})();

$(function() {
    stickyHeaders.load($(".followMeBar"), $(window));
}); 
```

css被简化为：

```
.followMeBar {
    background: #999;
    padding: 10px 20px;
    position: relative;
    z-index: 1;
    color: #fff;
}

/* For aesthetics only */

body {
    margin: 0;
    font-family: Segoe, "Segoe UI", "DejaVu Sans", "Trebuchet MS", Verdana, sans-serif;
} 
```

[http://plnkr.co/edit/wk3h40LfBdN1UFtDLZgY?p=preview](http://plnkr.co/edit/wk3h40LfBdN1UFtDLZgY?p=preview)

这是另一个示例，展示了在使用固定标头时如何使用偏移量：

[http://plnkr.co/edit/8YBqdCIKruVKYRXbZnCp?p=preview](http://plnkr.co/edit/8YBqdCIKruVKYRXbZnCp?p=preview)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-10-18T06:13:46.460

我尝试了上面提供的解决方案，但没有一个可以完美运行而没有错误（主要是滚动和浏览器兼容性的错误）。刚刚找到了这个[https://github.com/sarahdayan/feedify](https://github.com/sarahdayan/feedify)，它对我很有用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-05-24T18:40:57.880

确保将其包裹在`div`

注意第 6 个标题，因为它没有被包裹`div`

```
h1, h2{
position: sticky;
top: 0;
}

div{
height: 500px;
}
```

```
<div>
<h1>lorem ipsum doloro sit <br> amet 1</h1>
</div>

<div>
<h1>lorem ipsum doloro sit 2</h1>
</div>

<div>
<h2>lorem ipsum doloro sit 3</h2>
</div>

<div>
<h1>lorem ipsum doloro sit <br> amet 4</h1>
</div>

<div>
<h2>lorem ipsum doloro sit <br> amet 5</h2>
</div>

<h2>lorem ipsum doloro sit <br> amet 6</h2>

<div></div>

<div>
<h1>lorem ipsum doloro sit  7</h1>
</div>

<div>
<h1>lorem ipsum doloro sit <br> amet 8</h1>
</div>

<div>
<h1>lorem ipsum doloro sit <br> amet 9</h1>
</div>
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-03-13T15:43:12.400

我很难让克里斯的答案为我准确地工作，因为所有的便利贴都在一个相对定位的 div 内（上面有一个标题，在相对 div 之外） - 这个答案只是存储 .offset() var 中相对容器 div 的 .top 并从脚本中的 .css('top', **value ) 中减去它。**就像在 chris 的版​​本中一样，最高价值是推开文档的顶部，这可以正常工作。当您添加相对 div 时，top 现在是从顶部推动，因此相对 div 上方的任何空间都包含在您不想要的值中。希望这对其他人有帮助。詹姆士

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-05-25T22:03:47.560

解决方案的基本版本：

CSS

```
.sectionWrapper{
    background-color: #1E1E1E;
    padding: 10px 20px;
    color: #FF7B05;
    width: 100%
    height: 45px;
    min-height: 45px;

    margin-top: 30px;   
    position: relative;
    z-index: 10;
}
.sectionHeader{
}
.sectionEmbed {
}
.sectionFixed {
    background-color: #1E1E1E;
    padding: 10px 20px;
    color: #FF7B05;
    width: 100%;
    height: 45px;

    position: fixed;
    top: 0;
    left: 0;
    margin: 0;
} 
```

HTML

```
<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 sectionWrapper sectionEmbed">
    <div class="sectionHeader">Headers here</div>
</div> 
```

jQuery

```
//check doc is ready
$(function() {
    $(window).on("scroll.sectionWrapper", function() {
        stickSections();
    });
});

//function stickSection
function stickSections()
{
    //detach the listener
    $(window).off("scroll.sectionWrapper");

    $scrollPos = $(window).scrollTop();
    $currentSticky = null;

    $('.sectionWrapper').each(function(){

        $(this).children().removeClass('sectionFixed');     

        if($scrollPos >= ($(this).offset().top - ($(this).height() - $(this).children().height() - 6)) ){
            $currentSticky = $(this);
        }
        else $(this).children().addClass('sectionEmbed');
    });

    //apply the fixed class to our scrollPos match
    if($currentSticky) $currentSticky.children().addClass('sectionFixed');

    //reattach the listener
    $(window).on("scroll.sectionWrapper", function() {
        stickSections();        
    });
} 
```

例子

[https://codepen.io/ZombiesByte/pen/EyYwVO](https://codepen.io/ZombiesByte/pen/EyYwVO)

玩得开心 ：）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-04-07T13:34:00.143

如果 div 上方有带有粘性标题的内容，这并不总是有效： `$thisSticky.css('transform', 'translateY(' + $newPosition+ 'px)');`

但是这条线可以解决问题 `//could just as easily use top instead of transform $thisSticky.css('top', $newPosition+ 'px');`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-09-27T22:49:20.290

@chris-spittles 提供的解决方案帮助了我很多，但我还想提供一个普通的 Javascript 解决方案。此外，我还添加了处理最后一个粘性的功能，以应对您不希望它在其内容区域之外继续固定的情况。

[https://codepen.io/jamigibbs/pen/QZWjBy](https://codepen.io/jamigibbs/pen/QZWjBy)

```
const StickySubsections = (function(){
  let el

  return {
    elements: function () {
      return {
        stickies: [...document.querySelectorAll('.followMeBar')]
      }
    },

    init: function () {
      el = this.elements()
      this.load()
    },

    load: function () {
      this.setupStickyWrap()
      window.addEventListener('scroll', () => this.whenScrolling())
    },

    setupStickyWrap: function(){
      el.stickies.forEach((sticky, i) => {
        const stickyWrap = this.addWrap(sticky, 'sticky-wrap')
        const heightToTop = sticky.getBoundingClientRect().top + window.scrollY
        const outerHeight = sticky.offsetHeight

        stickyWrap.parentElement.id = `sticky-content-${i}`
        sticky.setAttribute('data-originalPosition', heightToTop)
        sticky.setAttribute('data-originalHeight', outerHeight)

        stickyWrap.style.height = outerHeight + 'px'
      })
    },

    addWrap: function(el, className, wrap = 'div') {
      const wrapper = document.createElement(wrap)
      wrapper.classList.add(className)
      el.parentNode.insertBefore(wrapper, el)
      wrapper.appendChild(el)
      return wrapper
    },

    elementExists: function(el){
      return typeof(el) != 'undefined' && el != null
    },

    stickyPosition: function(el){
      return el.getAttribute('data-originalPosition')
    },

    nextStickyPosition: function(current, next){
      return next.getAttribute('data-originalPosition') - current.getAttribute('data-originalHeight')
    },

    scrollingPositionTop: function(el){
      return el.getBoundingClientRect().top + window.scrollY
    },

    offsetTop: function(el){
      return el.getBoundingClientRect().top
    },

    scrollingPositionBottom: function(el){
      return el.getBoundingClientRect().bottom + window.scrollY
    },

    headerPosition: function(){
      return window.scrollY
    },

    bottomSectionHit: function(contentElement, sticky){
      const contentSection = document.getElementById(contentElement)
      const sectionBottom = contentSection.getBoundingClientRect().bottom + window.scrollY
      const stickyPositionScrolling = sticky.getBoundingClientRect().bottom + window.scrollY

      return stickyPositionScrolling >= sectionBottom
    },

    whenScrolling: function() {
      el.stickies.forEach((sticky, i) => {
        const nextSticky = el.stickies[i + 1]
        const prevSticky = el.stickies[i - 1]

        if (this.stickyPosition(sticky) <= this.headerPosition()) {
          sticky.classList.add('fixed')

          if (this.elementExists(nextSticky)) {

            while (this.scrollingPositionBottom(sticky) >= this.nextStickyPosition(sticky, nextSticky) + 50) {
              sticky.classList.add('absolute')
              sticky.style.top = this.nextStickyPosition(sticky, nextSticky)
            }

          // Handle last sticky element
          } else {
            if (this.bottomSectionHit(`sticky-content-${i}`, sticky)) {
              sticky.classList.remove('fixed')
            }
          }

        } else {

          sticky.classList.remove('fixed')

          if (this.elementExists(prevSticky) && window.scrollY <= this.stickyPosition(sticky)){
            prevSticky.classList.remove('absolute')
            prevSticky.removeAttribute('style')
          }
        }
      })
    }

  }
}())

StickySubsections.init() 
```

# ruby - 红宝石无限循环

> ID：13279730
> 
> 赞同：7
> 
> 时间：2012-11-07T22:58:34.077
> 
> 标签：ruby

我目前正在学习 ruby​​，但我遇到了这个问题：

编写聋奶奶程序。无论您对奶奶说什么（无论您输入什么），她都应该回应 HUH？！SPEAK UP, SONNY!，除非你大声喊出来（输入所有大写字母）。如果你大喊大叫，她会听到你的声音并回喊，不，不是自 1938 年以来！为了让你的节目真正可信，让奶奶每次都喊出不同的年份；可能是 1930 年到 1950 年之间的任意一年。在你喊 BYE 之前，你不能停止和奶奶说话。

这是我试过的代码：

```
puts "Say something to Grandma!"
something = gets.chomp
while something != "BYE"
    if something == something.upcase
      puts "NO, NOT SINCE 19" + (rand(30..50)).to_s + "!"
    else
      puts "HUH? SPEAK UP SONNY!"
    end
end 
```

每当我执行此操作时，if 和 else 字符串都会进入无限循环。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-07T23:02:52.833

您只获得一次输入，您需要在每个循环开始时读取它，如下所示：

```
something=""
while something != "BYE"
    puts "Say something to Grandma!"
    something = gets.chomp
    if something == something.upcase
      puts "NO, NOT SINCE 19" + (rand(30..50)).to_s + "!"
    else
      puts "HUH? SPEAK UP SONNY!"
    end
end 
```

希望这是有道理的。

# .net - 反序列化缺失整数时的不同 .NET XML 序列化程序行为

> ID：13279731
> 
> 赞同：2
> 
> 时间：2012-11-07T22:58:35.027
> 
> 标签：.net, soap, xml-serialization, xmlserializer

我最近遇到了一个 SOAP Web 服务的问题，其中 WSDL 为特定字段指定一个整数，但是 XML 带有一个空元素，这会导致 .NET 反序列化逻辑抛出 FormatException。

WSDL 如下所示：

```
<xsd:element minOccurs="0" maxOccurs="1" name="TransID" type="xsd:int" /> 
```

SOAP 看起来像这样：

```
<TransID></TransID> 
```

这会在解析响应时导致异常。我正在与之交谈的服务器属于供应商，因此我无法更改它。我在短期内通过将字段重新定义为字符串来解决这个问题。

我的问题是：在尝试诊断此问题时，我将 XML 提取到一个文件中并创建了自己的 XmlSerializer 来测试使用 WSDL 导入生成的 POCO 进行反序列化。我创建的 XmlSerializer 可以很好地解析这个 XML 并按预期生成父类型。没有例外。该字段值为零，这是预期的。为什么我创建的 SOAP 反序列化器和普通反序列化器可以正常工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T23:19:07.870

这是正常和预期的；空白字符串作为整数无效，无法解析。`XmlSerializer`行为相同：

```
using System.IO;
using System.Xml.Serialization;

static class Program {
    static void Main() {
        var obj = new XmlSerializer(typeof(Foo)).Deserialize(
            new StringReader("<Foo><TransID></TransID></Foo>"));
    }
}
public class Foo
{
    public int TransID { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T16:07:03.600

IMO 你应该将你的属性声明为 Nullable：

```
public int? TransID { get; set; } 
```

这应该足以使其在序列化和反序列化对象时工作

# java - 翻转多维数组java

> ID：13279740
> 
> 赞同：4
> 
> 时间：2012-11-07T22:59:20.290
> 
> 标签：java, multidimensional-array

我目前正在研究俄罗斯方块 AI，并且正在寻找一种翻转 4 x 4 多维数组的方法。我已经看了一遍，我能找到的最多的是旋转，这对我来说是行不通的。从

```
o o o o 

o x x o

o x o o

o x o o 
```

至

```
o x o o

o x o o

o x x o

o o o o 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T23:11:10.317

我不知道你需要翻转哪个维度，但这是其中之一……请注意，此方法破坏了原始数组！你没有说清楚你的需求。

*   你没有说需要翻转哪个维度
*   你没有说它是应该就地还是创建一个新数组

也就是说，这是一个解决方案

```
public static void main(String args[]) {
    Integer[][] myArray = {{1, 3, 5, 7},{2,4,6,8},{10,20,30,40},{50,60,70,80}};

    // Before flipping  
    printArray(myArray);
    System.out.println();

    // Flip
    flipInPlace(myArray);

    // After flipping
    printArray(myArray);
}

public static void printArray(Object[][] theArray) {
    for(int i = 0; i < theArray.length; i++) {
        for(int j = 0; j < theArray[i].length; j++) {
            System.out.print(theArray[i][j]);
            System.out.print(",");
        }
        System.out.println();
    }
}

// *** THIS IS THE METHOD YOU CARE ABOUT ***
public static void flipInPlace(Object[][] theArray) {
    for(int i = 0; i < (theArray.length / 2); i++) {
        Object[] temp = theArray[i];
        theArray[i] = theArray[theArray.length - i - 1];
        theArray[theArray.length - i - 1] = temp;
    }
} 
```

产生：

```
1,3,5,7,
2,4,6,8,
10,20,30,40,
50,60,70,80,

50,60,70,80,
10,20,30,40,
2,4,6,8,
1,3,5,7, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T23:06:49.770

我不知道翻转到底是什么意思，但根据你的例子，结果可以通过做

```
temp = array[0];
array[0] = array[3];
array[3] = temp;
temp = array[1];
array[1] = array[2];
array[2] = temp; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T23:17:53.653

你可以编写类似的代码（伪代码，我已经很久没有做过Java了，但你明白了）

```
function flipGridVertically(gridToFlip){

Array gridToReturn;

//start from the bottom row (gridToFlip.size is the vertical size of the grid)
//size is the horizontal size of the grid.
for (counter=gridToFlip.size-1; counter>0; counter--)
  //start the second loop from the top 
  for (counter2=0;counter2<gridToFlip.size;counter2++)
    gridToReturn[counter2] = gridToFlip[counter];

return gridToReturn;
} 
```

# api - 在 POST 正文中使用 JSON 字符串相对于在 POST 正文中使用键/值对的优势

> ID：13279745
> 
> 赞同：1
> 
> 时间：2012-11-07T22:59:36.800
> 
> 标签：api, http, web-applications

与在 POST 正文中使用键/值对相比，在 POST 正文中使用 JSON 字符串有哪些优势？似乎有很多 API 可以做到这一点。

我的意思示例：user={"username":"bob", "age":1} vs username=bob&age=1 在 POST 表单数据中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T23:12:25.870

当您使用 JSON 字符串时，您只需对对象进行编码/解码并准备就绪。这在使用多个平台时特别有用。

此外，当您想向请求添加新值/字段时，只需将其添加到 JSON 对象，而不必在多个文件中添加额外的验证，这可能会破坏代码已经起作用。

我能想到的另一件事是，当使用 JSON 时，您可以编写一个组件，其唯一目的是发送/接收数据，您可以在其中声明将接收解码的 JSON 并对其进行任何操作的函数。这样，您就不会重复代码，而是让每个函数/类/文件/无论做什么都执行其应有的特定功能。

# visual-studio-2010 - VS2010图片库，不同大小的png有什么用？

> ID：13279748
> 
> 赞同：0
> 
> 时间：2012-11-07T22:59:45.633
> 
> 标签：visual-studio-2010, imagelibrary

VS2010 图像库包含几个并排的不同大小的标准图标（警告、错误、...）的 png。这样的png有什么用？

1.  它是否意味着作为削减最佳尺寸并将其保存为新 png 的来源？
2.  或者有没有办法使用这样的 png 并自动选择最佳分辨率。如果是这样，这是如何完成的？

我想知道为什么会有这样的并排图像而不是几个文件，例如 Warning32.png、Warning16.png ....

例子：`Information.png`

![并排图像示例](../Images/831a84a8429d4e12bf1d4e19beba144f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T15:40:17.623

这是一个古老的编程技巧，它正是你所假设的。位图是“胶卷”，要使其工作，您必须知道图像的间距，资源不会告诉您。在源代码中硬编码。微软的源代码，你得到了他们工作的副本。

# valgrind - valgrind `--track-fds=yes` 没有 fds 0,1,2

> ID：13279749
> 
> 赞同：10
> 
> 时间：2012-11-07T22:59:47.690
> 
> 标签：valgrind

我正在使用以下设置运行 valgrind `valgrind --tool=memcheck --tool=callgrind --num-callers=20 --track-fds=yes --error-exitcode=1 CMD`：特别是，`--track-fds=yes`按需要工作，但是由于 fds 0,1,2 应该是打开的，每次运行都会失败。但是，我不想放弃`--track-fds`，因为它确实提供了有意义的信息。那么，是否有一个 valgrind 选项/方法来跟踪不包括 0、1、2 的 fds？

```
==5872== FILE DESCRIPTORS: 3 open at exit.
==5872== Open file descriptor 2:
==5872==    <inherited from parent>
==5872== 
==5872== Open file descriptor 1:
==5872==    <inherited from parent>
==5872== 
==5872== Open file descriptor 0: /dev/pts/0
==5872==    <inherited from parent>
==5872== 
==5872== 
==5872== Events    : Ir
==5872== Collected : 3081079256
==5872== 
==5872== I   refs:      3,081,079,256 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-11T23:37:49.747

那些`stdin`是`stdout`和`stderr`。通常你可以忽略这些，但如果你真的想要挑剔：

> fclose（标准输入）；
> fclose（标准输出）；
> fclose（标准错误）；

# c++ - C++：本地参考

> ID：13279750
> 
> 赞同：1
> 
> 时间：2012-11-07T22:59:48.413
> 
> 标签：c++, reference, local

我想了解以下代码中发生的情况

```
struct A
{
  vector<double> x;
};

void f(A &a)
{
  vector<double> &y = a.x;
} 
```

当函数 f 退出时， ax 被销毁了吗？提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T23:03:04.650

不`a.x`，不被破坏。您只是创建了一个本地引用`a.x`，然后函数退出 - 没有任何改变。您的代码实际上什么都不做。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-07T23:19:44.370

请记住，引用不是对象。`y`是一个*变量*，但不是一个*对象*。它是对现有对象的引用`a.x`，但该对象本身不是范围的本地对象`f`。所以变量`y`在 结尾处超出范围`f`，但它所引用的对象没有。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-07T23:28:41.013

在这种情况下，当您输入时，您`f()`会在本地创建一个独立`y`于世界其他地方`a.x`存在的引用。`a`当您离开`f()`本地创建的引用`y`时，它会超出范围并被销毁。世界其他地方都和你进入之前一样`f()`。

# macos - 安装了 thrift 但是当尝试运行 thrift 命令时它说 Thrift: command not found

> ID：13279753
> 
> 赞同：6
> 
> 时间：2012-11-07T22:59:52.470
> 
> 标签：macos, installation, thrift

我已经在 mac 中安装了 Thrift。

从终端看来，thrift 已成功安装，但是当我尝试运行 thrift 命令时，我得到以下信息

```
Thrift: command not found 
```

我使用终端中的 whereis 命令查找 thrift 的位置，但找不到。

有什么建议么？

安装 thrift thrift 0.9.0 后的终端输出

```
Building C++ Library ......... : yes
Building C (GLib) Library .... : no
Building Java Library ........ : yes
Building C# Library .......... : no
Building Python Library ...... : yes
Building Ruby Library ........ : yes
Building Haskell Library ..... : no
Building Perl Library ........ : yes
Building PHP Library ......... : yes
Building Erlang Library ...... : no
Building Go Library .......... : no
Building D Library ........... : no 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T05:33:37.873

我认为您实际上并没有安装节俭。您必须在 ./configure 之后执行以下操作

* * *

```
$ make
$ sudo make install 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-15T17:26:54.107

遇到同样的问题并尝试执行

```
 $ make
    $ sudo make install 
```

命令但出现错误

```
./src/thrift/cxxfunctional.h:93:18: error: no member named 'bind' in namespace 'std'
using ::std::bind;
~~~~~~~^
src/thrift/concurrency/ThreadManager.cpp:569:8: warning: private field 'firstTime_' is not used [-Wunused-private-field]
bool firstTime_;
^
1 warning and 1 error generated.
make[4]: *** [ThreadManager.lo] Error 1
make[3]: *** [all-recursive] Error 1
make[2]: *** [all-recursive] Error 1
make[1]: *** [all-recursive] Error 1
make: *** [all] Error 2 
```

之后发现问题[https://issues.apache.org/jira/browse/THRIFT-2229](https://issues.apache.org/jira/browse/THRIFT-2229)

并尝试按照`thrift`说明[http://thrift.apache.org/docs/BuildingFromSource/](http://thrift.apache.org/docs/BuildingFromSource/)从源安装，现在一切都很好。

也许这些步骤会对您有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-06T16:17:18.220

我和你遇到了同样的问题。

但我通过使用 HomeBrew 安装它来修复它。

您可以尝试使用以下链接：

[http://blog.evernote.com/tech/2012/12/20/building-apache-thrift-on-mac-os-x/](http://blog.evernote.com/tech/2012/12/20/building-apache-thrift-on-mac-os-x/) [http://brew.sh](http://brew.sh)

# java - NodeJS TCP 服务器，onData 小块

> ID：13279754
> 
> 赞同：3
> 
> 时间：2012-11-07T23:00:00.837
> 
> 标签：java, node.js, networking, tcp

我做了一个简单的 NodeJS TCP 服务器，一个 Java 客户端发送一个图像：

```
encodedImage = <a base64 encoded image>
out.write("IMG;" + encodedImage);
out.flush(); 
```

我的 NodeJS 服务器如下：

```
net.createServer(function(TCPSocket){
        TCPSocket.on("data", function(data){
            console.log("TCP Recieved: " + data.length);    
        });
}).listen(5000); 
```

但是，即使我发送所有数据并立即刷新，输出如下：

```
TCP Recieved: 13
TCP Recieved: 1344
TCP Recieved: 1344
TCP Recieved: 1344
TCP Recieved: 1344
TCP Recieved: 1344
TCP Recieved: 1472
TCP Recieved: 1344
TCP Recieved: 1344
TCP Recieved: 1344
TCP Recieved: 1344 
```

我希望它以一个简单的块接收它，但我认为它是由于 NodeJS 的事件处理机制而发生的，对于作为单个块发送的数据实现单个块数据的最佳方法是什么？据我所知，一个 TCP 窗口可以比 1344 字节的数据大得多。我想过将标头值用作 HTTP，所以我知道长度广告构造了我想要的对象。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-07T23:31:42.103

您是对的，在 Node 中，数据将分块出现。您需要保留一个缓冲区，连接所有进入的块，然后当套接字关闭时，将数据写入文件系统。这是一个能够接收图像的示例：

```
net = require('net');
fs = require('fs');

net.createServer(function(socket){
  var buffer = new Buffer(0, 'binary');

  socket.on("data", function(data){
    buffer = Buffer.concat([buffer, new Buffer(data,'binary')]);
  });

  socket.on("end", function(data) {
    fs.writeFile("image.jpg", buffer, function(err) {
      if(err) {
        console.log(err);
      } else {
        console.log("Socket[" + socket.name + "] closed, wrote data out to sinfo.data");
      }
    }); 

  });

}).listen(5000);

console.log('ready'); 
```

[我使用netcat](http://en.wikipedia.org/wiki/Netcat)向它发送了图像：

```
$ netcat localhost 5000 < input.jpg 
```

# javascript - 使用 HTML5/Javascript 的可视麦克风级别显示

> ID：13279758
> 
> 赞同：3
> 
> 时间：2012-11-07T23:00:25.933
> 
> 标签：javascript, html, audio, web, volume

这是想法：

显示用户麦克风声音输出的电平表。

棘手的部分：

让它在仅使用 HTML5/Javascript 的网站上工作。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T00:29:08.467

查看新生的[GetUserMedia API](http://dev.w3.org/2011/webrtc/editor/getusermedia.html)，您可以使用它从麦克风捕获流。[这里](http://updates.html5rocks.com/2012/09/Live-Web-Audio-Input-Enabled)有一个例子应该足以让你开始。浏览器支持目前[非常有限](http://caniuse.com/#search=GetUserMedia)。

[Web Audio API](https://dvcs.w3.org/hg/audio/raw-file/tip/webaudio/specification.html)将允许您处理和可视化流，但类似地，浏览器支持[非常不完整](http://caniuse.com/#search=web%20audio%20api)。[此处](http://www.smartjava.org/content/exploring-html5-web-audio-visualizing-sound)的示例将来自静态源的信号的音量可视化，但我想它可以适用于通过 GetUserMedia API 捕获的信号。

# iphone - 在 Objective-C iPhone 程序中嵌入 MonoTouch

> ID：13279759
> 
> 赞同：2
> 
> 时间：2012-11-07T23:00:26.773
> 
> 标签：iphone, objective-c, ios, xamarin.ios, embed

我正在寻找一些关于在 iPhone 上从 Objective-C 调用 C# 方法的建议。我已经阅读了[http://www.mono-project.com/Embedding_Mono](http://www.mono-project.com/Embedding_Mono)上的说明以及许多 stackoverflow 线程，但我仍然遇到问题。我可以让一切都在模拟器上工作，但不能在设备上工作。起初，调用`mono_jit_init()`失败，其中一个蹦床函数中的断言。最终我发现在调用之前我必须执行以下操作`mono_jit_init()`：

```
const char *path = [[[NSBundle mainBundle] bundlePath] UTF8String];
setenv("MONO_PATH", path, 1);
mono_jit_set_aot_only(YES); 
```

不幸的是，现在我收到以下错误：

> 无法在仅 aot 模式下加载 AOT 模块“/private/var/mobile/Applications/DD55C2F7-A692-4E68-B4DB-927690F9F3F2/DummyTest.app/mscorlib.dll.dylib”。

这是我到目前为止所做的：

1.  运行 mtouch 如下：

    ```
    /Developer/MonoTouch/usr/bin/mtouch --xcode=dummy --fat DummyLib.dll 
    ```

    注意：这并没有生成文档中描述的 main.m 文件。

2.  将生成的 DummyLib.dll、mscorlib.dll 和 DummyLib.dll.7.s 文件复制到我的 xcode 项目中。

3.  将以下行添加到我的 xcode 项目配置中的“标题搜索路径”行

    ```
    /Developer/MonoTouch/SDKs/MonoTouch.iphoneos.sdk/usr/include 
    ```

4.  将以下行添加到我的 xcode 项目配置中的“其他 C 标志”行

    ```
    -D_THREAD_SAFE
    -DNS_BLOCK_ASSERTIONS=1 -D_THREAD_SAFE 
    ```

5.  将以下行添加到我的 xcode 项目配置中的“其他链接器标志”行

    ```
    -L/Developer/MonoTouch/SDKs/MonoTouch.iphoneos.sdk/usr/lib -lmono-2.0 -lpthread -liconv 
    ```

6.  编译并运行我的 xcode 项目。

我确定我一定做错了什么，或者我在某个地方错过了一步，因为其他人声称可以这样做。有人知道我做错了什么吗？

# django - 多个值的 django 字段/小部件

> ID：13279762
> 
> 赞同：5
> 
> 时间：2012-11-07T23:01:04.193
> 
> 标签：django, django-forms

我真的无法弄清楚如何做到这一点。

我想使用 django 表单来验证以下内容（数量未知`aname`）：

```
<input type="hidden" name="aname" value="someJSONdump1"/>
<input type="hidden" name="aname" value="someJSONdump2"/>
<input type="hidden" name="aname" value="someJSONdump3"/>
<input type="hidden" name="aname" value="someJSONdump4"/>
```

在 django 方面，我打电话给：

```
form = myforms.MyForm(request.POST, request.FILES)
if (form.is_valid()):
    # do something
else:
    # redisplay the form
```

我如何定义`MyForm`以允许我验证每个`aname`以及在出错时重新显示上面的小部件`<input>s`？

我不知道如何使用[MultiValueField](https://docs.djangoproject.com/en/dev/ref/forms/fields/#multivaluefield)，或者即使它是正确的使用方法。当您知道您有多少个字段时，这似乎是一个解决方案？

`clean_aname()`在表单中使用没有帮助，因为`self.cleaned_data.get('aname')`只有最后一个值。

如果没有表格，我会使用类似的东西`request.POST.getlist('aname')`，但如果我能做到的话，我想避免这种情况`django.forms`。

谢谢你的帮助。

* * *

*****编辑*****

我已经离开了，我正在从 ModelForm 中定义更多字段。我认为这可能会对表单集产生一些影响。这就是我所在的地方......这个解决方案是否被认为是“Django forms”兼容的？

```
class MyField(forms.Field):
    widget = MyWidget

    def to_python(self, value):
        if (isinstance(value, basestring)):
            value = [value]
        return [json.loads(v) for v in value]

class MyForm(forms.ModelForm):
    class Meta:
        model = models.MyModel

    aname = MyField()

    def clean(self):
        cleaned_data = super(MyForm, self).clean()
        cleaned_data['aname'] = self.fields['aname'].clean(self.data.getlist('aname'))
        return cleaned_data
```

现在，我必须定义`MyWidget`允许我显示的列表`<input type="hidden">`，但我想知道这个解决方案是否听起来可以接受。也许我也可以这样做`clean_aname()`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T00:29:58.200

您可以尝试使用一组表单（在 Django 中称为表单集）来实现这一点，其中每个表单都是您想要的验证表单的一个实例。例如，

```
class ValidationForm(forms.Form):
    aname = forms.CharField()

    def clean_aname(self):
        aname = self.cleaned_data['aname']
        # TODO validate aname
        return aname

    def save(self, commit=False):
        # TODO implement this form's save logic
        return 'It works!' 
```

要创建一组这些表单（请参阅表单集[文档](https://docs.djangoproject.com/en/dev/topics/forms/formsets/)），请执行以下操作：

```
from django.forms.formsets import formset_factory
ValidationFormSet = formset_factory(ValidationForm) 
```

在您看来，使用 ValidationFormSet 接收数据：

```
def my_view(request):
    if request.method == 'POST':
        form = ValidationFormSet(request.POST, request.FILES)

        if form.is_valid():
            # All anames were validated by clean_aname
            results = form.save()

            for r in results:
                print r # Should print 'It works!'
    else:
        form = ValidationFormSet()

    return <your_result> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T00:33:15.007

您可以使用前缀将多个表单传递给您的视图，如下所示：

```
jsondumplist = ['jsondump1', 'jsondump2', 'jsondump3', 'jsondump4'....]
if request.method == 'POST':
        forms = [YourForm(request.POST, prefix=x) for x in jsondumplist]                        
        for f in forms:
                if f.is_valid():
                        f.save()                 
else:
        forms = [YourForm(prefix=x) for x in jsondumplist] 
```

YourForm 可能只有您感兴趣的单个字段或多个字段。

```
class YourForm(forms.Form):
    aname = forms.CharField(widget=forms.HiddenInput()) 
```

然后，您的模板将如下所示：

```
{% for form in forms %}
    {% for field in form %}
        {{ field }}
    {% endfor %}
{% endfor %} 
```

# ios - 如何让页面像 iOS 6 上的 Apple 地图一样卷曲？

> ID：13279764
> 
> 赞同：3
> 
> 时间：2012-11-07T23:01:07.297
> 
> 标签：ios, map, ios6, page-curl

我如何让我的页面像在新的苹果地图中那样卷曲？我知道如何让它卷曲以查看另一页，但我说的是地图右下角的卷曲。如果你想看看我在说什么，这是一张照片：

![在此处输入图像描述](../Images/c51878e557d101e9923cbc97b183db2a.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T23:46:10.630

要显示这个卷角，只需使用 PNG 图像（其中包含带有渐变和阴影的卷曲白色部分 + 假定的下面视图的灰色背景部分，PNG 的其余部分是透明的 -*类似于[通过 Google 找到的这个图片例如](http://www.zapmedia.co.uk/support_files/page_curl.png)*）。

然后，您可以将此图像用作`backgroundImage`a `UIButton`-- 或作为您可以添加 a的`image`an -- 然后将其添加为最前面视图的子视图，在其右下角。然后只需配置此按钮（或's ），以便在点击时触发卷曲动画。`UIImageView``UITapGestureRecognizer``UIImageView``UITapGestureRecognizer`

# c# - 在 Windows Phone SDK 7.1 中启动应用程序时调用方法

> ID：13279769
> 
> 赞同：0
> 
> 时间：2012-11-07T23:01:17.227
> 
> 标签：c#, visual-studio-2010, windows-phone-7

当应用程序启动时，我需要调用通常由 mainpage.xaml 的按钮触发的方法。我需要使用 app.xaml 的 Application_Launching 方法吗？如果是，如何？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T00:39:02.567

您的目标应该是尽快显示 MainPage.xaml。

而不是实际调用该方法，您应该只设置一个布尔值，指示您*应该*调用它，然后在 MainPage.xaml.cs 中调用该方法（或者您的项目是结构化的）。

应用程序.xaml.cs：

```
public static bool IsInitialLaunch = true; 
```

MainPage.xaml.cs

加载事件：

```
if (App.IsInitialLaunch){
   SomeMethod();
   App.IsInitialLaunch = false;
} 
```

# php - 序列化并将数组发布到进程文件

> ID：13279772
> 
> 赞同：0
> 
> 时间：2012-11-07T23:01:25.103
> 
> 标签：php, javascript

我正在尝试将数组发布到另一个要处理的文件。数组在下面，它正确地填充了行。我在脚本标记的开头对其进行了初始化以使其成为全局。
在 JavaScript 中：

```
var locationsall = new Array();
locationsall[counter] = new Array();
locationsall[counter][0] = address;
locationsall[counter][1] = lat;
locationsall[counter][2] = lng; 
```

在我的表格中，我尝试将其序列化并发布

```
 <input type="hidden" name="result" value="<?php echo serialize($locationsall); ?>"> 
```

当我尝试反序列化它时，它没有任何东西..

```
 $locations = unserialize($_POST['result']); 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T23:36:55.717

当您通过 jQuery 更新客户端数据时，您需要将 result 的值设置为您想要传递的任何值。[您可以使用jQuery.param()](http://api.jquery.com/jQuery.param/)序列化 JS 对象，这样您就可以将 JSON 编码的数据传递给 PHP。在处理发布数据时，您需要[解码 JSON 数据](http://uk.php.net/manual/ro/function.json-decode.php)`$_POST['result']`

JS

```
var test = new Array('a', 'b');
var data = $.param(test);
$('#result').val(data);
... 
```

PHP

```
if (isset($_POST['result'])) {
    $data = (array) json_decode($_POST['result']);
} 
```

# php - 当前在 PHP 中执行的响应的内容类型？

> ID：13279776
> 
> 赞同：0
> 
> 时间：2012-11-07T23:01:47.053
> 
> 标签：php, content-type

假设有一个库函数需要知道当前由 PHP 脚本生成的 HTTP 响应的确切 MIME 类型，无论它是否通过显式设置`header('Content-type: ...')`。另外，如果可能的话，无论输出是否实际开始（我怀疑这个，但是......）。

例如，它可能是一个输出诊断/调试信息并希望根据当前内容类型是 HTML、XML 还是纯文本来格式化其输出的函数。

脚本知道它是否从命令行 ( `php_sapi_name() == 'cli'`) 运行，因此可以假定内容类型`text/plain`，但是，在服务器下运行时，有什么方法可以准确地检测到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T23:18:33.303

默认情况下`Content-type`，PHP 的输出将是`text/html`不在 cli 上运行时。如您所知，从 cli 运行时，输出为`text/plain`.

有一个函数[headers_list](http://www.php.net/manual/en/function.headers-list.php)将告诉您将发送（或已发送）的标题。您可以利用它来确定`Content-type`将是什么。我从来没有用过它；我只知道它存在。

# java - Intent 无法运行

> ID：13279781
> 
> 赞同：-2
> 
> 时间：2012-11-07T23:02:14.243
> 
> 标签：java, android, android-intent

我有两个活动（主要和计算器）。单击 main 中的按钮时，活动更改为计算器，但在 startActivity(intent) 运行时我不断收到错误

MainActivity.java

```
public class MainActivity extends Activity {
    public final static String  EXTRA_MESSAGE = "com.example.myfirstapp.MESSAGE";
    public int mult = 1;

    public int num1;
    public int num2;
    public int answer;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    public void calculator(View view)
    {
        Intent intent = new Intent(this, CalculatorActivity.class);
        startActivity(intent);
    }

} 
```

CalculatorActivity.java

```
public class CalculatorActivity extends Activity
{
    Button b0; 
    Button b1; 
    Button b2; 
    Button b3; 
    Button b4; 
    Button b5; 
    Button b6; 
    Button b7; 
    Button b8; 
    Button b9; 
    Button bDot; 
    Button bNeg;
    Button bDiv; 
    Button bMult;
    Button bSub; 
    Button bPlus;
    Button bEnter;

    EditText edit;
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_calculator);

        //Intent intent = getIntent();

        //Intent intent = getIntent();
        b0 = (Button) findViewById(R.id.button0);
        b1 = (Button) findViewById(R.id.button1);
        b2 = (Button) findViewById(R.id.button2);
        b3 = (Button) findViewById(R.id.button3);
        b4 = (Button) findViewById(R.id.button4);
        b5 = (Button) findViewById(R.id.button5);
        b6 = (Button) findViewById(R.id.button6);
        b7 = (Button) findViewById(R.id.button7);
        b8 = (Button) findViewById(R.id.button8);
        b9 = (Button) findViewById(R.id.button9);
        bDot = (Button) findViewById(R.id.buttonDot);
        bNeg = (Button) findViewById(R.id.buttonNeg);
        bDiv = (Button) findViewById(R.id.buttonDiv);
        bMult = (Button) findViewById(R.id.buttonMult);
        bSub = (Button) findViewById(R.id.buttonMinus);
        bPlus = (Button) findViewById(R.id.buttonPlus);
        bEnter = (Button) findViewById(R.id.buttonEnter);

        edit= (EditText) findViewById(R.id.editText);
    }

    /** Called when the user clicks on a number */
    public void enterNum(View view)
    {
        b0.setOnClickListener(new OnClickListener()
        {
            public void onClick(View view)
            {
                edit.setText(b0.getText().toString());
            }
        });

        if(b0.isPressed())
            edit.setText( b0.getText().toString() );

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T11:31:15.273

在创建意图对象时试试这个

```
intent=new Intent(MainActivity.this, CalculatorActivity.class); 
```

并检查 CalculatorActivity 是否在清单文件中注册

# ruby-on-rails - 在 Mac OS X Lion 中使用 bundle 安装 fusefs gem

> ID：13279784
> 
> 赞同：0
> 
> 时间：2012-11-07T23:02:33.353
> 
> 标签：ruby-on-rails, ruby, rubygems

我是 RoR 的新手，我正在尝试安装我们正在工作的应用程序，我必须运行 bundle install 来安装应用程序工作所需的一些 gem。其中之一是 fusefs v 0.7.0 但是当我运行 bundle install 它尝试安装 fusefs 时失败

错误：安装 fusefs 时出错：错误：构建 gem 原生扩展失败

```
 /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/bin/ruby extconf.rb
  checking for main() in -lfuse_ino64... no
  checking for main() in -lfuse... no 
```

*** extconf.rb 失败 *** 由于某种原因无法创建 Makefile，可能缺少必要的库和/或头文件。检查 mkmf.log 文件以获取更多详细信息。

所以在这一点上，我花了几天时间试图让 ruby​​、rails、passenger、mysql 和 apache 在 10.8 上运行良好，但我被困在最后一点。

任何帮助将不胜感激。

**更新***** *** 好吧，我刚刚找到了答案。fusefs 是专门为 linux 构建的。**

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T00:17:13.290

FUSE 最初是一个 Linux 功能。已经为 OS X（[osxfuse](http://osxfuse.github.com/)和[fuse4x](http://fuse4x.github.com/)）和各种 BSD 编写了类似的接口。您可能想查看其中之一是否兼容。看起来有一个[fusefs-osx Gem](http://rubygems.org/gems/fusefs-osx)；我不确定这是否使用 osxfuse、fuse4x 或不再维护的旧 MacFUSE，但您可以尝试用 fusefs-osx 替换 fusefs 依赖项，看看是否有效。**

# haskell - XMonad 在不同的工作空间上启动

> ID：13279791
> 
> 赞同：2
> 
> 时间：2012-11-07T23:02:54.580
> 
> 标签：haskell, xmonad

我想在 xmonad 启动时在不同的工作区（这很重要）中启动一些应用程序。所以，我写了以下内容`startupHook`：

```
startupApps :: [String]
startupApps = ["konsole", "emacs", "firefox", "gvim", "konsole"]

startupSpawn :: X ()
startupSpawn =  zipWithM_ id (map (spawnOn . show) [1..])  startupApps 
```

但是，它会在第一个工作区中生成所有应用程序。这似乎是更普遍问题的一部分——如果我启动应用程序，它不是在实际启动时而是在加载时获得工作区。所以，如果我在 WS1 上启动 firefox，然后切换到 WS2，firefox 将在 WS2 上生成。

不过，我能对我的意图做些什么呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T23:10:10.617

您可以使用[`manageHook`](http://xmonad.org/xmonad-docs/xmonad/XMonad-ManageHook.html)告诉 xmonad 将某些应用程序移动到某些桌面。

```
myManageHook = composeAll . concat $ [
    [ className =? "Firefox" --> doF (shiftToWs 2) ]
  , [ className =? "gvim" --> doF (shiftToWs 3) ]
  -- and so on
  ] 
```

不过，`className`s 可能会有所不同。

# c++ - 函数的输入验证

> ID：13279793
> 
> 赞同：0
> 
> 时间：2012-11-07T23:02:59.537
> 
> 标签：c++, validation, loops, input

```
float getTestScore();
float score;
cout<<"Please enter a test score"<<endl;
cin>>score; 
return score; 
```

我正在制作一个算法，它需要三个测试分数并计算平均值。我正在使用函数，我的函数的这一部分获得了测试分数。我需要输入验证，因为分数需要在 0 到 100 之间，包括 0 到 100。我尝试了一个 do-while 循环

```
do { /* ... */ } while ((score>=0) && (score<=100)) 
```

但这会导致无限循环，反复要求分数。我只需要0到100之间的三个分数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T23:06:04.717

*   首先检查您的输入是否实际上是一个数字。
*   如果它确实是一个数字，请检查它是否在您需要的范围内。

# php - php 和会话：如何从会话变量中获取关联数组？

> ID：13279794
> 
> 赞同：2
> 
> 时间：2012-11-07T23:02:59.110
> 
> 标签：php

> **可能重复：**
> [能够在 print_r() 的输出中看到一个变量，但不确定如何在代码中访问它](https://stackoverflow.com/questions/6322084/able-to-see-a-variable-in-print-rs-output-but-not-sure-how-to-access-it-in-c)

我需要在现有网站上与连接的用户一起工作：

```
<?php session_start();
print_r($_SESSION); ?> 
```

此代码输出：

```
Array([%http_user%] => Array
    (
        [profile_id] => 72
        [username] => john
        [session_id] => 4ek79umrrpael7vvb4ls3diaq4
    )

[registration_invite_code] => 
```

)

这就是我需要的。它试图让“约翰”进入我的`$username`变量：

知道怎么做吗？

我试过：

```
$_SESSION[0]

$_SESSION["%http_user%"]

$_SESSION->username 
```

没门。

任何方式如何检索此用户名？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T23:05:55.147

`$variable = $_SESSION['%http_user%']['username'];`

# php - 如何使用 php 将字符串下载到浏览器？不是文本文件

> ID：13279801
> 
> 赞同：3
> 
> 时间：2012-11-07T23:03:22.387
> 
> 标签：php, text, download, text-files

我的问题是我有一个从数据库查询、时间戳和其他随机事物生成的字符串，并且总是不同，所以我没有要下载的“文件”。如何使用此生成的字符串作为`.txt`文件下载到浏览器中供用户使用？我知道您可以使用标头将文件下载到浏览器，所以可能是这样的：

```
$result = 'Generated string that is different every time. 20121107160322';

header("Content-Type: text/plain");
header("Content-Disposition: attachment; content=$result");
header("Content-Length: " . strlen($result)); 
```

显然这不起作用，但我什至不知道从哪里开始。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T23:07:16.040

你几乎明白了，你只是缺少将字符串实际输出到浏览器，并且还给它一个浏览器可以用来提示用户的文件名，所以这样做：

```
$result = 'Generated string that is different every time. 20121107160322';
$filename = 'result_file.txt';

header("Content-Type: text/plain");
header('Content-Disposition: attachment; filename="'.$filename.'"');
header("Content-Length: " . strlen($result));
echo $result;
exit; 
```

# php - 压缩字符串数据以进行存储和检索

> ID：13279806
> 
> 赞同：1
> 
> 时间：2012-11-07T23:04:00.520
> 
> 标签：php, mysql

我有一些文本数据想存储在 mysql 数据库中。我目前将数据作为字符串存储在变量中。

我担心由于每行的文本数据量很大，表格会变得非常大。

因此，以适合存储和检索的格式压缩此字符串数据的最简单方法（最好是 php 内置函数）是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T23:06:19.550

[您可以使用GZEncode](http://www.php.net/manual/en/function.gzencode.php) GZIP 字符串。

这是非常标准的，因此如果您愿意，应该可以从其他语言中恢复。

我建议存储结果的 Base64 版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T23:08:25.750

如果您使用 InnoDB，您可以对整个表启用压缩，这根本不会影响您的代码。

```
ALTER TABLE database.tableName ENGINE='InnoDB' ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8; 
```

您可以将 KEY_BLOCK_SIZE 更改为更小的值以获得更多压缩（取决于数据），但这会增加 CPU 的开销。在测试了一系列表之后，我发现 KEY_BLOCK_SIZE 为 8 可以很好地平衡压缩与性能。

# logging - 日志文件已创建但未写入

> ID：13279808
> 
> 赞同：0
> 
> 时间：2012-11-07T23:04:15.027
> 
> 标签：logging, log4net, log4net-configuration

我已阅读与此问题相关的所有答案，但没有任何帮助。这是我的 Web.config 文件（我在 WCF 服务中使用 log4net）

（仅相关部分）

```
 <configSections>
    <section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler,Log4net"/>
  </configSections>

  <!-- Log4Net -->
  <log4net>
    <root>
      <level value="All" />
      <appender-ref ref="FileAppender" />
    </root>

    <appender name="FileAppender" type="log4net.Appender.RollingFileAppender">
      <file value="logs\server.log" />
      <appendToFile value="true" />
      <rollingStyle value="Size" />
      <maxSizeRollBackups value="5" />
      <maximumFileSize value="10MB" />
      <staticLogFileName value="true" />
      <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%date [%thread] %-5level %logger [%property{NDC}] [%property{ip}] - %message%newline" />
      </layout>
    </appender>
  </log4net> 
```

正在创建日志文件，但没有写入任何内容。我读过一个回答说这可能是由于没有提供布局模式，但我正在提供。我正在关注变化：

```
[assembly: log4net.Config.XmlConfigurator(Watch = true)]
namespace Foo
{
    class Bar : IBar {
        //..
    }
} 
```

我已经挣扎了一个多小时，找不到任何帮助。我尝试跟踪 log4net 消息，但没有错误（没有任何内容写入跟踪文件）。有人能看出我的配置有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T14:06:57.003

尝试将级别更改为全部大写：

```
<root>
   <level value="ALL" />
   <appender-ref ref="FileAppender" />
</root> 
```

请参阅[为什么我的所有 log4net 级别都是错误的？](https://stackoverflow.com/questions/8658070/why-are-all-my-log4net-levels-false)

# c# - 对自定义对象列表进行排序

> ID：13279812
> 
> 赞同：7
> 
> 时间：2012-11-07T23:04:21.580
> 
> 标签：c#

我有一个名为 Person 的类，它包含一个属性 LastName，它反映了与 Person 的姓氏相对应的字符串。

我创建了一个列表，如下所示：

```
var People = List<Person> 
```

我想做的是按字母顺序按他们的姓氏属性对人们进行排序。

看了一些例子后，我试过了

```
People = People.OrderBy(p => p.LastName); 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-07T23:06:49.987

使用 LINQ，您需要将结果转换回`List<Person>`：

```
People = People.OrderBy(p => p.LastName).ToList(); 
```

由于`OrderBy`返回一个`IOrderedEnumerable<T>`，您需要额外的调用`ToList()`才能将其转回列表。

但是，由于您实际上需要就地排序，因此您也可以[`List<T>.Sort`](http://msdn.microsoft.com/en-us/library/w56d4y5z.aspx)直接使用：

```
People.Sort((p1, p2) => p1.LastName.CompareTo(p2.LastName)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T23:07:09.830

最简单的是使用`ToList():`

```
People = People.OrderBy(p => p.LastName).ToList(); 
```

您需要`ToList`创建一个新的订单 `List<Person>`

对原始列表进行排序的另一个选项是使用[`List.Sort`](http://msdn.microsoft.com/en-us/library/w56d4y5z.aspx)：

```
People.Sort((p1,p2) => p1.LastName.CompareTo(p2.LastName)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T23:18:10.767

您需要将 orderby 的结果转换为`.Tolist()`如下所示

```
var people = People.OrderBy(p => p.LastName).ToList(); 
```

# python - subprocess + multiprocessing - 多个命令按顺序

> ID：13279813
> 
> 赞同：2
> 
> 时间：2012-11-07T23:04:24.007
> 
> 标签：python, multiprocessing

我有一组命令行工具，我想在一系列文件上并行运行。我编写了一个 python 函数来包装它们，看起来像这样：

```
def process_file(fn):
    print os.getpid()
    cmd1 = "echo "+fn
    p = subprocess.Popen(shlex.split(cmd1))

    # after cmd1 finishes
    other_python_function_to_do_something_to_file(fn)

    cmd2 = "echo "+fn
    p = subprocess.Popen(shlex.split(cmd2))
    print "finish"

if __name__=="__main__":
    import multiprocessing
    p = multiprocessing.Pool()
    for fn in files:
        RETURN = p.apply_async(process_file,args=(fn,),kwds={some_kwds}) 
```

虽然这可行，但它似乎并没有运行多个进程；似乎它只是串行运行（我尝试过使用`Pool(5)`相同的结果）。我错过了什么？是否呼吁`Popen`“阻止”？

编辑：澄清一点。我需要 cmd1，然后是一些 python 命令，然后是 cmd2，以便在每个文件上按顺序执行。

EDIT2：上面的输出具有以下模式：

```
pid
finish
pid
finish
pid
finish 
```

而类似的调用，使用`map`代替`apply`（但没有任何传递的规定`kwds`）看起来更像

```
pid
pid
pid
finish
finish
finish 
```

但是，地图调用有时（总是？）在显然成功后挂起

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T23:15:14.163

> 是否呼吁`Popen`“阻止”？

不。只需立即创建一个`subprocess.Popen`退货，给您一个可以等待或以其他方式使用的对象。如果你想阻止，这很简单：

```
subprocess.check_call(shlex.split(cmd1)) 
```

同时，我不确定你为什么将你的 args 放在一个字符串中，然后尝试将`shlex`它们返回到一个列表中。为什么不直接写清单？

```
cmd1 = ["echo", fn]
subprocess.check_call(cmd1) 
```

> 虽然这可行，但它似乎并没有运行多个进程；似乎它只是串行运行

是什么让你这么想？鉴于每个进程只是尽可能快地将两个进程启动到后台，因此很难判断它们是否并行运行。

如果您想验证您是否从多个处理中获得工作，您可能需要添加一些打印或日志记录（并`os.getpid()`在消息中抛出类似的内容）。

同时，您似乎正在尝试完全复制`multiprocessing.Pool.map_async`out of a loop around的效果`multiprocessing.Pool.apply_async`，除了不是累积结果，而是将每个结果存储在一个名为的变量中`RESULT`，然后在使用它之前将其丢弃。为什么不直接使用`map_async`？

最后，您询问是否`multiprocessing`是适合这项工作的工具。好吧，你显然需要一些异步的东西：`check_call(args(file1))`必须 block `other_python_function_to_do_something_to_file(file1)`，但同时不能 block `check_call(args(file2))`。

我可能会使用`threading`，但实际上，它并没有太大区别。即使您在一个进程启动成本高昂的平台上，您也已经支付了这笔费用，因为整个过程都在运行 N * M 组子进程，因此另一个 8 个池不会有任何损害。并且通过在线程之间共享数据而意外创建竞赛的风险很小，或者意外创建看起来像是在进程之间共享数据但实际上没有共享数据的代码，因为没有什么可共享的。所以，不管你更喜欢哪一个，去吧。

另一种选择是编写一个事件循环。我实际上可能会开始为这个问题自己做，但我会后悔的，你不应该这样做......</p>

# windows-shell - windows IPropertyStore 处理程序扩展不返回属性值

> ID：13279820
> 
> 赞同：2
> 
> 时间：2012-11-07T23:04:40.593
> 
> 标签：windows-shell, ipropertystorage

我正在尝试为我们的产品创建的文件类型编写属性处理程序，我大部分时间都在那里，但处理程序无法通过 IPropertyStore::GetValue 返回任何数据。

我可以通过跟踪/调试看到正在调用 Initialise 方法并用值填充存储。

但是我可以看到，尽管在商店中找到了密钥，但每当调用 GetValue 时，变体中都没有数据！如果那时我做类似的事情：

```
 InitPropVariantFromString(L"BLANK", pPropVar); 
```

进入 outval 然后一切正常，BLANK 将出现在 InfoTip 上。

奇怪的是，如果我编写一个使用 SHGetPropertyStoreFromParsingName 的测试应用程序并要求我得到正确的数据的属性。

真的有点难过，有人吗？

TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T15:30:51.000

固定 - 我的愚蠢。

我错误地定义了我的属性键。看来整个属性键联合需要“填充”

像这样

const PROPERTYKEY PK_TING={{0x96892702, 0xc272, 0x4792, 0xa2, 0x7, 0xdf, 0xe7, 0xd5, 0x60, 0xd6, 0xb8}, THE_PID};

正在使用 PROPERTYKEY UNION 的 guid 和 pid。

甜心。

# javascript - 将高度从 javascript 函数发送到 jquery

> ID：13279838
> 
> 赞同：0
> 
> 时间：2012-11-07T23:06:07.307
> 
> 标签：javascript, jquery, iframe

我正在使用 JavaScript 函数计算 iframe 的高度并将其存储在变量中，现在我想将该变量发送到 jQuery 以设置高度（）。

我的 JavaScript 函数

```
function iframeLoaded()
{
    var iFrameID = document.getElementById('ftwo');
    iFrameID.height = iFrameID.contentWindow.document.body.scrollHeight;
} 
```

这些函数工作正常，因为当我提醒该值时，它会正确显示它，并且我在计算高度的同一个域中

```
$(document).ready(function(){
    $("#ftwodiv").height(iFrameID);
}); 
```

在我的身体标签上，我有这个：

```
<iframe id="ftwo" width="455px" onLoad="iframeLoaded()"  
        scrolling="no" frameborder="0" src="http://www.company.com"></iframe> 
```

我尝试了一些不起作用的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T23:13:03.590

您可以从函数中返回并使用它。，。

```
function iframeLoaded(){
     var hgt = 0;
     var iFrameID = document.getElementById('ftwo');
     hgt = iFrameID.height = iFrameID.contentWindow.document.body.scrollHeight;

     return hgt;
};

$(document).ready(function(){
    var iFrameID = iframeLoaded();
    $("#ftwodiv").height(iFrameID);
}); 
```

您也可以使用全局变量来实现相同的..

```
var iFrameHeight = 0;

function iframeLoaded(){
         var hgt = 0;
         var iFrameID = document.getElementById('ftwo');
         iFrameHeight  = iFrameID.height = FrameID.contentWindow.document.body.scrollHeight;
    };

    $(document).ready(function(){
        $("#ftwodiv").height(iFrameHeight);
    }); 
```

但是第一种方法更清洁

# facebook - 无法获得赞按钮

> ID：13279851
> 
> 赞同：0
> 
> 时间：2012-11-07T23:06:55.913
> 
> 标签：facebook, button, facebook-like

我只是尝试使用生成器中的代码在我的网站上获得一个喜欢和分享按钮：

```
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/de_DE/all.js#xfbml=1&appId=278654312150503";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script> 
```

……

……

```
<div class="fb-like" data-href="http://wwww.friendsmap.info" data-send="true" data-layout="box_count" data-width="70" data-show-faces="true"></div> 
```

Firebug 对我说“无效的 ApplicationID”但是 appID 与我的 facebook 开发人员显示的一样

有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T23:11:30.973

对我来说看起来不错，可能的问题是您在开发人员设置中激活了沙盒模式。但是您的 URL 确实有错误：[http](http://wwww.friendsmap.info) : //www.friendsmap.info > 4 w´s

还要检查开发人员设置中的网站 URL，也许你也弄错了。

# ruby-on-rails - 编译器未能生成可执行文件。（运行时错误）

> ID：13279856
> 
> 赞同：23
> 
> 时间：2012-11-07T23:07:23.200
> 
> 标签：ruby-on-rails, ruby, xcode, rubygems

我最近升级到 OS Mountain Lion。我正在处理的项目需要 gem sys-proctable 作为依赖项，但是当我运行时，`bundle install`我得到：

```
Fetching gem metadata from https://rubygems.org/.........
.
.
.
Installing sys-proctable (0.9.2) with native extensions 
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.

        /Users/mgriffel/.rvm/rubies/ruby-1.9.3-p194/bin/ruby extconf.rb 
checking for rb_pid_t in ruby.h... *** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
    --with-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --without-make-prog
    --srcdir=.
    --curdir
    --ruby=/Users/mgriffel/.rvm/rubies/ruby-1.9.3-p194/bin/ruby
/Users/mgriffel/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:381:in `try_do': The compiler failed to generate an executable file. (RuntimeError)
You have to install development tools first.
    from /Users/mgriffel/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:491:in `block in try_compile'
    from /Users/mgriffel/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:443:in `with_werror'
    from /Users/mgriffel/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:491:in `try_compile'
    from /Users/mgriffel/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:1022:in `try_type'
    from /Users/mgriffel/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:1050:in `block in have_type'
    from /Users/mgriffel/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:790:in `block in checking_for'
    from /Users/mgriffel/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:284:in `block (2 levels) in postpone'
    from /Users/mgriffel/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:254:in `open'
    from /Users/mgriffel/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:284:in `block in postpone'
    from /Users/mgriffel/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:254:in `open'
    from /Users/mgriffel/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:280:in `postpone'
    from /Users/mgriffel/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:789:in `checking_for'
    from /Users/mgriffel/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:1049:in `have_type'
    from extconf.rb:3:in `<main>'

Gem files will remain installed in /Users/mgriffel/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/sys-proctable-0.9.2-universal-darwin for inspection.
Results logged to /Users/mgriffel/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/sys-proctable-0.9.2-universal-darwin/ext/darwin/gem_make.out
An error occurred while installing sys-proctable (0.9.2), and Bundler cannot continue.
Make sure that `gem install sys-proctable -v '0.9.2'` succeeds before bundling. 
```

但我确实安装了开发人员工具！运行`gem install sys-proctable -v '0.9.2'`给了我几乎相同的错误：

```
Building native extensions.  This could take a while...
ERROR:  Error installing sys-proctable:
    ERROR: Failed to build gem native extension.

        /Users/mgriffel/.rvm/rubies/ruby-1.9.3-p194/bin/ruby extconf.rb
checking for rb_pid_t in ruby.h... *** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
    --with-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --without-make-prog
    --srcdir=.
    --curdir
    --ruby=/Users/mgriffel/.rvm/rubies/ruby-1.9.3-p194/bin/ruby
/Users/mgriffel/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:381:in `try_do': The compiler failed to generate an executable file. (RuntimeError)
You have to install development tools first.
    from /Users/mgriffel/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:491:in `block in try_compile'
    from /Users/mgriffel/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:443:in `with_werror'
    from /Users/mgriffel/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:491:in `try_compile'
    from /Users/mgriffel/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:1022:in `try_type'
    from /Users/mgriffel/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:1050:in `block in have_type'
    from /Users/mgriffel/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:790:in `block in checking_for'
    from /Users/mgriffel/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:284:in `block (2 levels) in postpone'
    from /Users/mgriffel/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:254:in `open'
    from /Users/mgriffel/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:284:in `block in postpone'
    from /Users/mgriffel/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:254:in `open'
    from /Users/mgriffel/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:280:in `postpone'
    from /Users/mgriffel/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:789:in `checking_for'
    from /Users/mgriffel/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:1049:in `have_type'
    from extconf.rb:3:in `<main>'

Gem files will remain installed in /Users/mgriffel/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/sys-proctable-0.9.2-universal-darwin for inspection.
Results logged to /Users/mgriffel/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/sys-proctable-0.9.2-universal-darwin/ext/darwin/gem_make.out
[sample_app(filling-in-layout)]$ /Users/mgriffel/.rvm/rubies/ruby-1.9.3-p194/bin/ruby
                                                                              A [sample_app(filling-in-layout)]$ gem install sys-proctable -v '0.9.2'
Building native extensions.  This could take a while...
ERROR:  Error installing sys-proctable:
    ERROR: Failed to build gem native extension.

        /Users/mgriffel/.rvm/rubies/ruby-1.9.3-p194/bin/ruby extconf.rb
checking for rb_pid_t in ruby.h... *** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
    --with-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --without-make-prog
    --srcdir=.
    --curdir
    --ruby=/Users/mgriffel/.rvm/rubies/ruby-1.9.3-p194/bin/ruby
/Users/mgriffel/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:381:in `try_do': The compiler failed to generate an executable file. (RuntimeError)
You have to install development tools first.
    from /Users/mgriffel/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:491:in `block in try_compile'
    from /Users/mgriffel/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:443:in `with_werror'
    from /Users/mgriffel/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:491:in `try_compile'
    from /Users/mgriffel/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:1022:in `try_type'
    from /Users/mgriffel/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:1050:in `block in have_type'
    from /Users/mgriffel/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:790:in `block in checking_for'
    from /Users/mgriffel/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:284:in `block (2 levels) in postpone'
    from /Users/mgriffel/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:254:in `open'
    from /Users/mgriffel/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:284:in `block in postpone'
    from /Users/mgriffel/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:254:in `open'
    from /Users/mgriffel/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:280:in `postpone'
    from /Users/mgriffel/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:789:in `checking_for'
    from /Users/mgriffel/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:1049:in `have_type'
    from extconf.rb:3:in `<main>'

Gem files will remain installed in /Users/mgriffel/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/sys-proctable-0.9.2-universal-darwin for inspection.
Results logged to /Users/mgriffel/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/sys-proctable-0.9.2-universal-darwin/ext/darwin/gem_make.out 
```

这是我的`mkmf.log`文件的内容：

```
"/usr/bin/gcc-4.2 -o conftest -I/Users/mgriffel/.rvm/rubies/ruby-1.9.3-p194/include/ruby-1.9.1/x86_64-darwin11.4.0 -I/Users/mgriffel/.rvm/rubies/ruby-1.9.3-p194/include/ruby-1.9.1/ruby/backward -I/Users/mgriffel/.rvm/rubies/ruby-1.9.3-p194/include/ruby-1.9.1 -I. -I/Users/mgriffel/.rvm/usr/include -D_XOPEN_SOURCE -D_DARWIN_C_SOURCE   -I/opt/sm/pkg/active/include -fno-common -pipe conftest.c  -L. -L/Users/mgriffel/.rvm/rubies/ruby-1.9.3-p194/lib -L/Users/mgriffel/.rvm/usr/lib -L. -L/opt/sm/pkg/active/lib -L/usr/local/lib     -lruby.1.9.1  -lpthread -ldl -lobjc "
checked program was:
/* begin */
1: #include "ruby.h"
2: 
3: int main() {return 0;}
/* end */ 
```

现在我最近重新安装了 XCode 和命令行工具，但我担心我以某种方式搞砸了我的 C 编译器，因为当我尝试运行时`rvm --force install 1.9.3`出现以下错误：

```
No binary rubies available for: downloads/ruby-1.9.3-p194.
Continuing with compilation. Please read 'rvm mount' to get more information on binary rubies.
lipo: can't open input file:  (No such file or directory)
Fetching yaml-0.1.4.tar.gz to /Users/mgriffel/.rvm/archives
Extracting yaml to /Users/mgriffel/.rvm/src/yaml-0.1.4
Configuring yaml in /Users/mgriffel/.rvm/src/yaml-0.1.4.
Error running 'env LDFLAGS=-L/opt/sm/pkg/active/lib CFLAGS=-I/opt/sm/pkg/active/include CPATH=/opt/sm/pkg/active/include ./configure --prefix=/Users/mgriffel/.rvm/usr', please read /Users/mgriffel/.rvm/log/ruby-1.9.3-p194/yaml/configure.log
Compiling yaml in /Users/mgriffel/.rvm/src/yaml-0.1.4.
Installing yaml to /Users/mgriffel/.rvm/usr
Installing Ruby from source to: /Users/mgriffel/.rvm/rubies/ruby-1.9.3-p194, this may take a while depending on your cpu(s)...
ruby-1.9.3-p194 - #downloading ruby-1.9.3-p194, this may take a while depending on your connection...
ruby-1.9.3-p194 - #extracted to /Users/mgriffel/.rvm/src/ruby-1.9.3-p194 (already extracted)
Patch cflags was already applied.
ruby-1.9.3-p194 - #configuring
Error running 'env LDFLAGS=-L/opt/sm/pkg/active/lib CFLAGS=-I/opt/sm/pkg/active/include CPATH=/opt/sm/pkg/active/include -L/Users/mgriffel/.rvm/usr/lib ./configure --enable-shared --disable-install-doc --prefix=/Users/mgriffel/.rvm/rubies/ruby-1.9.3-p194 --with-gcc=clang', please read /Users/mgriffel/.rvm/log/ruby-1.9.3-p194/configure.log
There has been an error while running configure. Halting the installation. 
```

的内容`configure.log`

```
[2012-11-07 18:02:12] env LDFLAGS=-L/opt/sm/pkg/active/lib CFLAGS=-I/opt/sm/pkg/active/include CPATH=/opt/sm/pkg/active/include -L/Users/mgriffel/.rvm/usr/lib ./configure --enable-shared --disable-install-doc --prefix=/Users/mgriffel/.rvm/rubies/ruby-1.9.3-p194 --with-gcc=clang
checking build system type... x86_64-apple-darwin12.2.0
checking host system type... x86_64-apple-darwin12.2.0
checking target system type... x86_64-apple-darwin12.2.0
checking whether the C compiler works... no
configure: error: in `/Users/mgriffel/.rvm/src/ruby-1.9.3-p194':
configure: error: C compiler cannot create executables
See `config.log' for more details 
```

最后，内容`config.log`：

```
This file contains any messages produced by compilers while
running configure, to aid debugging if configure makes a mistake.

It was created by configure, which was
generated by GNU Autoconf 2.69\.  Invocation command line was

  $ ./configure --enable-shared --disable-install-doc --prefix=/Users/mgriffel/.rvm/rubies/ruby-1.9.3-p194 --with-gcc=clang

## --------- ##
## Platform. ##
## --------- ##

hostname = Mattans-MacBook-Air.local
uname -m = x86_64
uname -r = 12.2.0
uname -s = Darwin
uname -v = Darwin Kernel Version 12.2.0: Sat Aug 25 00:48:52 PDT 2012; root:xnu-2050.18.24~1/RELEASE_X86_64

/usr/bin/uname -p = i386
/bin/uname -X     = unknown

/bin/arch              = unknown
/usr/bin/arch -k       = unknown
/usr/convex/getsysinfo = unknown
/usr/bin/hostinfo      = Mach kernel version:
     Darwin Kernel Version 12.2.0: Sat Aug 25 00:48:52 PDT 2012; root:xnu-2050.18.24~1/RELEASE_X86_64
Kernel configured for up to 4 processors.
2 processors are physically available.
4 processors are logically available.
Processor type: i486 (Intel 80486)
Processors active: 0 1 2 3
Primary memory available: 4.00 gigabytes
Default processor set: 138 tasks, 703 threads, 4 processors
Load average: 3.07, Mach factor: 1.53
/bin/machine           = unknown
/usr/bin/oslevel       = unknown
/bin/universe          = unknown

PATH: /Users/mgriffel/.rvm/usr/bin
PATH: /opt/local/bin
PATH: /opt/local/sbin
PATH: /usr/local/bin
PATH: /usr/local/sbin
PATH: /usr/local/mysql/bin
PATH: /Users/mgriffel/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/bin
PATH: /Users/mgriffel/.rvm/gems/ruby-1.9.3-p194@global/bin
PATH: /Users/mgriffel/.rvm/rubies/ruby-1.9.3-p194/bin
PATH: /Users/mgriffel/.rvm/bin
PATH: /usr/bin
PATH: /bin
PATH: /usr/sbin
PATH: /sbin
PATH: /opt/sm/bin
PATH: /opt/sm/pkg/active/bin
PATH: /opt/sm/pkg/active/sbin

## ----------- ##
## Core tests. ##
## ----------- ##

configure:2788: checking build system type
configure:2802: result: x86_64-apple-darwin12.2.0
configure:2870: checking host system type
configure:2883: result: x86_64-apple-darwin12.2.0
configure:2903: checking target system type
configure:2916: result: x86_64-apple-darwin12.2.0
configure:3395: checking for C compiler version
configure:3404: clang --version >&5
Apple clang version 4.1 (tags/Apple/clang-421.11.66) (based on LLVM 3.1svn)
Target: x86_64-apple-darwin12.2.0
Thread model: posix
configure:3415: $? = 0
configure:3404: clang -v >&5
Apple clang version 4.1 (tags/Apple/clang-421.11.66) (based on LLVM 3.1svn)
Target: x86_64-apple-darwin12.2.0
Thread model: posix
configure:3415: $? = 0
configure:3404: clang -V >&5
clang: error: argument to '-V' is missing (expected 1 value)
clang: error: no input files
configure:3415: $? = 1
configure:3404: clang -qversion >&5
clang: error: no input files
configure:3415: $? = 1
configure:3435: checking whether the C compiler works
configure:3457: clang   -L/opt/sm/pkg/active/lib CFLAGS=-I/opt/sm/pkg/active/include CPATH=/opt/sm/pkg/active/include -L/Users/mgriffel/.rvm/usr/lib conftest.c  >&5
clang: error: no such file or directory: 'CFLAGS=-I/opt/sm/pkg/active/include'
clang: error: no such file or directory: 'CPATH=/opt/sm/pkg/active/include'
configure:3461: $? = 1
configure:3499: result: no
configure: failed program was:
| /* confdefs.h */
| #define PACKAGE_NAME ""
| #define PACKAGE_TARNAME ""
| #define PACKAGE_VERSION ""
| #define PACKAGE_STRING ""
| #define PACKAGE_BUGREPORT ""
| #define PACKAGE_URL ""
| #define CANONICALIZATION_FOR_MATHN 1
| /* end confdefs.h.  */
| 
| int
| main ()
| {
| 
|   ;
|   return 0;
| }
configure:3504: error: in `/Users/mgriffel/.rvm/src/ruby-1.9.3-p194':
configure:3506: error: C compiler cannot create executables
See `config.log' for more details

## ---------------- ##
## Cache variables. ##
## ---------------- ##

ac_cv_build=x86_64-apple-darwin12.2.0
ac_cv_env_CCC_set=
ac_cv_env_CCC_value=
ac_cv_env_CC_set=
ac_cv_env_CC_value=
ac_cv_env_CFLAGS_set=
ac_cv_env_CFLAGS_value=
ac_cv_env_CPPFLAGS_set=
ac_cv_env_CPPFLAGS_value=
ac_cv_env_CPP_set=
ac_cv_env_CPP_value=
ac_cv_env_CXXFLAGS_set=
ac_cv_env_CXXFLAGS_value=
ac_cv_env_CXX_set=
ac_cv_env_CXX_value=
ac_cv_env_LDFLAGS_set=set
ac_cv_env_LDFLAGS_value='-L/opt/sm/pkg/active/lib CFLAGS=-I/opt/sm/pkg/active/include CPATH=/opt/sm/pkg/active/include -L/Users/mgriffel/.rvm/usr/lib'
ac_cv_env_LIBS_set=
ac_cv_env_LIBS_value=
ac_cv_env_build_alias_set=
ac_cv_env_build_alias_value=
ac_cv_env_host_alias_set=
ac_cv_env_host_alias_value=
ac_cv_env_target_alias_set=
ac_cv_env_target_alias_value=
ac_cv_host=x86_64-apple-darwin12.2.0
ac_cv_prog_CC=clang
ac_cv_target=x86_64-apple-darwin12.2.0

## ----------------- ##
## Output variables. ##
## ----------------- ##

ALLOCA=''
AR=''
ARCHFILE=''
ARCH_FLAG=''
AS=''
ASFLAGS=''
BASERUBY='ruby'
BUILTIN_ENCOBJS=''
BUILTIN_TRANSOBJS=''
BUILTIN_TRANSSRCS=''
CAPITARGET=''
CC='clang'
CCDLFLAGS=''
CFLAGS=''
CHDIR=''
COMMON_HEADERS=''
COMMON_LIBS=''
COMMON_MACROS=''
COUTFLAG=''
CP=''
CPP=''
CPPFLAGS=''
CPPOUTFILE=''
CXX=''
CXXFLAGS=''
DEFS=''
DLDFLAGS=''
DLDLIBS=''
DLEXT2=''
DLEXT=''
DLLWRAP=''
DOT=''
DOXYGEN=''
ECHO_C='\c'
ECHO_N=''
ECHO_T=''
EGREP=''
ENABLE_SHARED=''
EXECUTABLE_EXTS=''
EXEEXT=''
EXPORT_PREFIX=''
EXTOUT=''
EXTSTATIC=''
GCC=''
GNU_LD=''
GREP=''
INSTALLDOC=''
INSTALL_DATA=''
INSTALL_PROGRAM=''
INSTALL_SCRIPT=''
LDFLAGS='-L/opt/sm/pkg/active/lib CFLAGS=-I/opt/sm/pkg/active/include CPATH=/opt/sm/pkg/active/include -L/Users/mgriffel/.rvm/usr/lib'
LDSHARED=''
LDSHAREDXX=''
LIBEXT=''
LIBOBJS=''
LIBPATHENV=''
LIBPATHFLAG=''
LIBRUBY=''
LIBRUBYARG=''
LIBRUBYARG_SHARED=''
LIBRUBYARG_STATIC=''
LIBRUBY_A=''
LIBRUBY_ALIASES=''
LIBRUBY_DLDFLAGS=''
LIBRUBY_LDSHARED=''
LIBRUBY_RELATIVE=''
LIBRUBY_SO=''
LIBS=''
LINK_SO=''
LN_S=''
LTLIBOBJS=''
MAINLIBS=''
MAJOR='1'
MAKEDIRS=''
MAKEFILES=''
MANTYPE=''
MINIOBJS=''
MINIRUBY=''
MINOR='9'
MKDIR_P=''
NM=''
NROFF=''
NULLCMD=''
OBJCOPY=''
OBJDUMP=''
OBJEXT=''
OUTFLAG=''
PACKAGE=''
PACKAGE_BUGREPORT=''
PACKAGE_NAME=''
PACKAGE_STRING=''
PACKAGE_TARNAME=''
PACKAGE_URL=''
PACKAGE_VERSION=''
PATH_SEPARATOR=':'
PKG_CONFIG=''
PREP=''
RANLIB=''
RDOCTARGET=''
RI_BASE_NAME=''
RM=''
RMALL=''
RMDIR=''
RMDIRS=''
RPATHFLAG=''
RUBYW_BASE_NAME='rubyw'
RUBYW_INSTALL_NAME=''
RUBY_BASE_NAME='ruby'
RUBY_INSTALL_NAME=''
RUBY_PROGRAM_VERSION='1.9.3'
RUBY_RELEASE_DATE='2012-04-20'
RUBY_SO_NAME=''
RUNRUBY=''
SET_MAKE=''
SHELL='/bin/sh'
SOLIBS=''
STATIC=''
STRIP=''
SYMBOL_PREFIX=''
TEENY='1'
TEST_RUNNABLE=''
THREAD_MODEL=''
TRY_LINK=''
UNIVERSAL_ARCHNAMES=''
UNIVERSAL_INTS=''
USE_RUBYGEMS=''
WERRORFLAG=''
WINDRES=''
XCFLAGS=''
XLDFLAGS=''
XRUBY=''
XRUBY_LIBDIR=''
XRUBY_RUBYHDRDIR=''
XRUBY_RUBYLIBDIR=''
ac_ct_CC=''
ac_ct_CXX=''
ac_ct_OBJCOPY=''
ac_ct_OBJDUMP=''
arch=''
bindir='${exec_prefix}/bin'
build='x86_64-apple-darwin12.2.0'
build_alias=''
build_cpu='x86_64'
build_os='darwin12.2.0'
build_vendor='apple'
cflags=' ${optflags} ${debugflags} ${warnflags}'
configure_args=''
cppflags=''
cxxflags=' ${optflags} ${debugflags} ${warnflags}'
datadir='${datarootdir}'
datarootdir='${prefix}/share'
debugflags=''
docdir='${datarootdir}/doc/${PACKAGE}'
dvidir='${docdir}'
exec=''
exec_prefix='NONE'
host='x86_64-apple-darwin12.2.0'
host_alias=''
host_cpu='x86_64'
host_os='darwin12.2.0'
host_vendor='apple'
htmldir='${docdir}'
includedir='${prefix}/include'
infodir='${datarootdir}/info'
libdir='${exec_prefix}/lib'
libexecdir='${exec_prefix}/libexec'
localedir='${datarootdir}/locale'
localstatedir='${prefix}/var'
mandir='${datarootdir}/man'
oldincludedir='/usr/include'
optflags=''
pdfdir='${docdir}'
prefix='/Users/mgriffel/.rvm/rubies/ruby-1.9.3-p194'
program_transform_name='s&^&&'
psdir='${docdir}'
ridir=''
ruby_pc=''
ruby_version=''
rubyhdrdir=''
rubylibprefix=''
rubyw_install_name=''
sbindir='${exec_prefix}/sbin'
setup=''
sharedstatedir='${prefix}/com'
sitearch=''
sitedir=''
sitehdrdir=''
sysconfdir='${prefix}/etc'
target='x86_64-apple-darwin12.2.0'
target_alias=''
target_cpu='x86_64'
target_os='darwin12.2.0'
target_vendor='apple'
try_header=''
vendordir=''
vendorhdrdir=''
warnflags=''

## ----------- ##
## confdefs.h. ##
## ----------- ##

/* confdefs.h */
#define PACKAGE_NAME ""
#define PACKAGE_TARNAME ""
#define PACKAGE_VERSION ""
#define PACKAGE_STRING ""
#define PACKAGE_BUGREPORT ""
#define PACKAGE_URL ""
#define CANONICALIZATION_FOR_MATHN 1

configure: exit 77 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-13T07:39:47.103

发生了同样的问题，我终于解决了。以下是我遵循的步骤：

*   Xcode，Xcode CLT
*   `sudo xcodebuild -license`
*   `sudo port upgrade outdated`
*   `sudo port install apple-gcc42`
*   `rvm reinstall 1.9.3` **＃重要的！**

真的，我认为只需要第一步，第二步和最后一步，但无法测试。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2014-10-20T22:03:15.280

请务必在更新后打开 XCode。我发现在最近通过 App Store 更新 XCode 后，我必须打开它并接受新的许可协议。否则我会收到“编译器无法生成可执行文件。（RuntimeError）您必须先安装开发工具。”

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-08-07T16:35:06.967

如果您使用的是 rbenv 和自制软件：

```
brew tap homebrew/dupes ; brew install apple-gcc42 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2015-01-07T18:25:04.497

以下步骤解决了该问题。

1.  `xcode-select --install`
2.  `sudo xcodebuild -license`

希望它可以帮助某人。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-11-16T21:30:32.123

事实证明这是 RailsInstaller OSX 1.0.3 中的一个错误 - （在阅读[在 Mountain Lion 上安装 Ruby 时发现的问题 - ruby​​ 1.9.3 wont' compile](https://stackoverflow.com/questions/12928581/problems-installing-ruby-on-mountain-lion-ruby-1-9-3-wont-compile)）

我需要更改`/etc/rvmrc`以包含此内容：

```
umask g+w
export -a rvm_configure_env
rvm_configure_env=('LDFLAGS=-L/opt/sm/pkg/active/lib' 'CFLAGS=-I/opt/sm/pkg/active/include' 'CPATH=/opt/sm/pkg/active/include') 
```

有关更多信息，请参阅：[https ://github.com/railsinstaller/railsinstaller-nix/issues/10](https://github.com/railsinstaller/railsinstaller-nix/issues/10)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-04-29T09:36:27.720

因为我确信我会再次登陆这里。

我的问题是它`sudo xcodebuild -license`实际上什么也没做，我必须手动启动 xcode 以同意他们的条款才能使其正常工作。多么光荣的操作系统。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-10-02T17:13:55.570

我在“捆绑安装”期间收到以下错误：

* * *

```
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.

        /Users/bob/.rvm/rubies/ruby-1.9.3-p194/bin/ruby extconf.rb 
creating Makefile

make
compiling generator.c
make: /usr/bin/gcc-4.2: No such file or directory
make: *** [generator.o] Error 1

Gem files will remain installed in /Users/bob/.rvm/gems/ruby-1.9.3-p194@storefront/gems/json-1.8.0 for inspection.
Results logged to /Users/bob/.rvm/gems/ruby-1.9.3-p194@storefront/gems/json-1.8.0/ext/json/ext/generator/gem_make.out
An error occurred while installing json (1.8.0), and Bundler cannot continue.
Make sure that `gem install json -v '1.8.0'` succeeds before bundling. 
```

* * *

更新 Xcode 并安装 CLT 后，执行以下操作解决了该问题：

```
bundle clean --force

bundle install 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-07T23:14:47.037

您必须安装最新的 Xcode 和命令行工具（在 Xcode 中）。这显然与您的 Xcode 或 PATH 有关。给予什么`which clang`？

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-02-17T00:51:42.743

当我在 Mountain Lion 上遇到同样的问题时，我无法重复这对我来说是多么令人沮丧。在我读到 Mountain Lion 存在一些 GCC 问题后，我最终将我的操作系统升级到了 Mavericks。我仍然有同样的错误：/

唯一有效的方法是在安装命令行工具后重新安装 ruby​​。

“对于未来的访客来说，这对我有用。没关系，但我用 brew 安装了 rvm。Xcode 和 Xcode CLT 已经安装。我只需要（在所有这些中都没有 sudo）rvm 使用 2.0.0，然后是 xcode -license，同意许可然后rvm重新安装2.0.0。最后一步非常重要，确实”

然后 $ gem install rails

这完美地解决了我的问题。此博客提供了有关如何以多种方式安装 Mac 开发工具（命令行工具）的屏幕截图的精彩演练（[http://www.moncefbelyamani.com/how-to-install-xcode-homebrew-git-rvm-ruby-on -mac/](http://www.moncefbelyamani.com/how-to-install-xcode-homebrew-git-rvm-ruby-on-mac/) )

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-03-11T07:45:28.350

关于 Centos 和 Fedora。

> 您必须先安装开发工具。

应该安装

```
dnf install @development-tools 
```

有关更多信息，请参阅此[https://stackoverflow.com/a/35303883/9003945](https://stackoverflow.com/a/35303883/9003945)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2022-01-07T07:53:26.970

就我而言，当我打开`mkmf.log`文件时，我看到错误是找不到“ruby/config.h”文件。所以我使用 brew, 安装了另一个 ruby `brew install ruby`​​，然后将`PATH`and设置`PKG_CONFIG_PATH`为`~/.zshrc`这样。

```
export PATH="/usr/local/opt/ruby/bin:$PATH"
export PKG_CONFIG_PATH="/usr/local/opt/ruby/lib/pkgconfig" 
```

最后执行gem install agin，成功。

# vb.net - 测试用户控件是否已经在表单中

> ID：13279857
> 
> 赞同：1
> 
> 时间：2012-11-07T23:07:35.500
> 
> 标签：vb.net

我的项目中有一个用户控件，我希望在单击按钮时将此用户控件添加到表单中，但是如果用户控件已经在我想要显示的表单中。

这是我到目前为止写的代码：

```
Using GstAbonnement As New GestionAbonnement
            GstAbonnement.Dock = DockStyle.Fill
            Me.Controls.Add(GstAbonnement)
End Using 
```

**如何测试用户控件是否已经在表单中？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T00:22:26.757

您可以使用**Form.Controls.Find**在窗体上搜索特定控件。它还接受一个属性来启用搜索可能包含该控件的子控件（例如面板、组框）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T19:29:33.197

您可以像苏莎所说的那样使用 Form.Controls.Find 。或者您可以遍历 Form.Controls 以找到具有特定名称的控件。

我更喜欢 Form.Controls.Find 功能，它更安全，更容易。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T19:38:55.347

使用您当前的代码，将永远不会在表单中找到该控件，因为`Using...End Using`带有 dispose 控件的语法。

尝试将其更改为：

```
Dim GstAbonnement As New GestionAbonnement
GstAbonnement.Name = "gestionAbonnement1"
GstAbonnement.Dock = DockStyle.Fill
Me.Controls.Add(GstAbonnement) 
```

请注意，我提供了控件的名称。

现在您可以简单地检查控件是否在集合中：

```
If Me.Controls.ContainsKey("gestionAbonnement1") Then
  Me.Controls("gestionAbonnement1").Visible = True
  Me.Controls("gestionAbonnement1").BringToFront()
  MessageBox.Show("Found!")
End If 
```

# php - 使用 file_get_contents 访问 POST 数据

> ID：13279858
> 
> 赞同：0
> 
> 时间：2012-11-07T23:07:51.077
> 
> 标签：php, post

> **可能重复：**
> [PHP php://input vs $_POST](https://stackoverflow.com/questions/8893574/php-php-input-vs-post)

我正在使用 Facebook 实时更新 API 来订阅更改。文档状态：

> 成功订阅后，Facebook 将在每次发生更改（所选字段或连接）时继续调用您的端点。对于每次更新，它都会发出一个 HTTP POST 请求。
> 
> 请求的内容类型为`application/json`，正文将包含一个 JSON 编码的字符串，其中包含一个或多个更改。

~ [https://developers.facebook.com/docs/reference/api/realtime/](https://developers.facebook.com/docs/reference/api/realtime/)

我一遍又一遍地尝试访问`POST`ed data use `$_POST`，它总是空的。在谷歌上搜索了一段时间后，我发现这篇[博客文章](https://developers.facebook.com/blog/post/2012/01/31/how-to--subscribing-to-data-changes-using-the-real-time-updates-api/)包含这条神奇的线路：`$post_body = file_get_contents('php://input');`.

我以前从未见过`php://input`……这是什么？它有什么作用？Facebook 在做什么来创建我认为是其中包含 JSON 字符串的文件？他们为什么要这样做而不是通过发送`$_POST`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T23:10:03.410

[php://input](http://php.net/manual/en/wrappers.php.php)是原始输入主体的流包装器。它由 php 自动解析，因此您可以输入`$_POST`您的代码。如果不是 - 这意味着它是一种意外的格式。

在 facebook 的情况下 - 他们只发送一个 json 字符串，这不是 PHP 解释器期望的（它期望它是一个`key=val&key2=val&...`字符串，`{key: "val",...}`而是得到）。

这就是为什么您需要手动读取和解析它的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T23:10:42.503

php://input 是一个只读流，允许您从请求正文中读取原始数据。对于 POST 请求，最好使用 php://input 而不是 $HTTP_RAW_POST_DATA，因为它不依赖于特殊的 php.ini 指令。

参考 [http://php.net/manual/en/wrappers.php.php](http://php.net/manual/en/wrappers.php.php)

# html - html颜色与图像颜色

> ID：13279859
> 
> 赞同：2
> 
> 时间：2012-11-07T23:07:55.913
> 
> 标签：html, colors, hex, photoshop

是否有可能使图像颜色与 HTML 颜色完全相同？

我有一个圆角框，角是图像，背景颜色是 HTML，在我的笔记本电脑上它看起来完美无瑕，但在好的显示器上，颜色的差异是显而易见的。

是否不可能让 HTML 生成的颜色与图像颜色完全匹配？

编辑：我正在使用 Photoshop，并且正在使用与 RGB 颜色完全等效的十六进制。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T23:13:13.337

如果您使用相同的颜色，例如`#E1E1E1`在您的 CSS 和图像中（“GIMP”之类的工具将帮助您使用颜色选择器，您可以在其中直接输入这些十六进制值），颜色*将*是相同的。

我的猜测是您的问题很可能是压缩（通过保存为 .jpg 及其引入的工件）。使用其他格式（如无损 PNG 格式）或以无损方式保存 JPG（在大多数工具中质量滑块最高可达 100）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T23:21:16.053

另一个潜在的解决方案：您看到由颜色配置文件引起的颜色偏移。

这可能是由于其他显示器的配置方式（您可以更新您的机器以使用特定的配置文件；像设计师这样的人会这样做以确保摄影或印刷设计中的颜色准确）或[由于您的图像在](http://viget.com/inspire/the-mysterious-save-for-web-color-shift)何时保存从你最喜欢的图像编辑工具（我在看着你，Photoshop）导出它们。无论您的十六进制颜色是否正确并且令人沮丧，这些问题都可能并且将会发生。

试一试该链接；如果您正在处理嵌入式颜色配置文件问题，那可能会让您朝着正确的方向前进。

编辑：您从 Photoshop 导出的内容让我认为这可能是罪魁祸首。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T23:14:52.560

对于某些颜色，浏览器/监视器可能看起来略有不同。即使您正在匹配具有与您在 css 中使用的相同十六进制值的图像，匹配某些颜色可能被证明是一项艰巨的任务。（这适用于大多数情况，但并非总是如此）我的建议是尽可能使用网络安全颜色，这些颜色往往在多个显示器上呈现相同的颜色。

# javascript - JavaScript 按键给出奇怪的响应

> ID：13279860
> 
> 赞同：0
> 
> 时间：2012-11-07T23:08:00.747
> 
> 标签：javascript, events, keycode, keyup

我已经从箭头键输入了好几天了，它并没有给我带来任何问题。但是，当我尝试从字母键中获取输入时，它们会给出奇怪且不一致的响应。

当我打印出按下控制台按键的输出时，我得到的数字不一致。例如，当我按 Q 时，我可以得到 48-57 左右的任何值，并且它似乎在递增和循环（我第一次按它时，它是 48，或者偶尔是 81 [这是我研究的正确键码]. 第二次，它是 49 [但再也不会是 81]，等等，直到我达到 57-ish，此时它再次变为 48）。

同样令人烦恼的是，我用所有的字母键得到了相同的数字。这也不只是我的网站；[这个](http://www.cambiaresearch.com/articles/15/javascript-char-codes-key-codes)网站的底部给了我同样的问题！我不确定这是否是本地问题。

如果它是相关的，我会得到这样的键码：

`window.addEventListener('keyup',function(event){console.log(event.keyCode);},false);`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T23:34:56.300

离开charCode，我的运气要好得多。如果没有 charCode 值，我只使用 keyCode。Chrome 应该可以正常工作。您可以通过 String.fromCharCode(charCode) 将 charCode 转换为 charString。

# regex - JMeter - 选择正则表达式的一部分

> ID：13279861
> 
> 赞同：0
> 
> 时间：2012-11-07T23:08:08.190
> 
> 标签：regex, jmeter

我有一个 JMeter 正则表达式提取器，它搜索以下正则表达式：

```
myId=[0-9]{10} 
```

这将从我的网站表单中检索 10 位数字 ID 号。然后，我为 ID 号设置了 myId 的“参考名称”。我的模板值为 $0$，我的匹配号设置为空白。

在我的 HTTP 请求中，我传递了一个参数值：

```
${myId} 
```

当我运行我的 JMeter 测试时，它会以以下形式插入文本：

```
myId=myId=1234567890 
```

如何摆脱重复的 myId=？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T23:15:09.733

不确定 JMeter 的 RegEx 实现，但通常

```
myId=[0-9]{10} 
```

将匹配所有内容，包括`myId=`. 您需要使用 () 定义要提取的捕获组，然后您将引用捕获组数组并获取所需的项目。例如

```
myId=([0-9]{10}) 
```

第 0 组仍然是全部，但第 1 组只是由 () 分隔的数字部分，即没有`myId=`. 希望这可以帮助。

# qtp - 使用 QTP11 描述性编程，我如何验证元素不存在？

> ID：13279864
> 
> 赞同：2
> 
> 时间：2012-11-07T23:08:40.980
> 
> 标签：qtp

我是QTP新手。

我可以使用对象存储库编写这样的语句：

```
If Trim(DataTable.Value("ExpectedValue")) = "" _
  And Not Browser("MyApp").Page("MyPage").WebElement("MissingDataBanner").Exist  Then
    Reporter.ReportEvent micFail, "MissingDataBanner", "Element expected"
End If 
```

虽然我可以使用描述性编程来检查确实存在的元素的属性......

```
If Not Browser("MyApp").Page("MyPage").WebElement("text:=" + DataTable.Value("ExpectedValue")).Exist Then
  Reporter.ReportEvent micFail, "My Data Field", "Element does not contain expected value"
End If 
```

当我尝试这样的事情时：

```
If Trim(DataTable.Value("ExpectedValue")) = "" _
  And Not Browser("MyApp").Page("MyPage").WebElement("text:=" + DataTable.Value("ExpectedValue")).Exist  Then
    Reporter.ReportEvent micFail, "MissingDataBanner", "Element expected"
End If 
```

当然 QTP 找不到 web 元素，并且尝试访问 Exist 方法的测试错误。

有没有办法使用描述性编程来检查页面上不存在元素？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T07:45:49.337

1.  看看第一个 if 语句，特别是这一行：`If Trim(DataTable.Value("ExpectedValue")) = ""`。你说'如果 ExpectedValue 为空并且对象不存在，则报告错误' 这真的是你想要的还是你想在'not empty' 上测试 ExpectedValue: `If Trim(DataTable.Value("ExpectedValue")) <> ""`？

2.  VBScript 中的连接是用一个`&`符号而不是用一个来完成的`+`，这个语句`Browser("MyApp").Page("MyPage").WebElement("text:=" + DataTable.Value("ExpectedValue")).Exist`将解析为`Browser("MyApp").Page("MyPage").WebElement(0).Exist`，导致意想不到的结果。改为使用`"text:=" & DataTable.Value("ExpectedValue")`。

3.  QTP 有一些怪癖，对对象的 .exist 属性进行测试就是其中之一（我在这里代表 QTP10 发言）。这听起来很奇怪，但在某些情况下（不幸的是，我不记得哪一次，如果我有空闲的时间，我会尝试重现它）`.exist`返回一个 False，它在条件语句中本身不被识别为 False。测试对象是否不存在的最佳方法是显式测试存在属性是否等于 false: `If Browser("foo").Page("bar").WebElement("xizzy").exist = False then print "Object does not exist!)`。

4.  提示：为了加快测试速度，您可以将存在与计时器一起使用，如果使用`.exist(0)`它将立即测试对象的存在，而不使用您在 testsettings 中设置的同步计时器。

也许这不能直接解决您的确切问题，但它会提供更可靠的结果并最终引导您找到解决方案。使用该方法测试对象是否不存在`.Exist`是正确的方法。当您遇到错误时，还有其他问题。例如浏览器或页面不存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-21T14:47:53.087

嗨希望这会帮助你..谢谢你..

```
 Set NavigationTab = Browser ().Page().WebElement()
 CheckExist ( 10 , NavigationTab )

Function CheckExist ( intDelay , object )

object.RefreshObject

' -- validating the object is exist or not.
  If object.Exist ( intDelay ) Then

    CheckExist = True

  Else

    CheckExist = False

  End If

 End Function 
```

# objective-c - XCode/Objective-C：UIView 实例的同步动画？

> ID：13279866
> 
> 赞同：1
> 
> 时间：2012-11-07T23:09:20.090
> 
> 标签：objective-c, xcode, animation, uiview

我有两个`IBOutlet`变量连接到`UIView`Interface Builder 中的两个实例`blankView`，`fadedBGView`在我的`ViewController`.

如何设置此代码，以便实例使用过渡`blankView`淡入淡出，并且两者可以同时从当前位置（它们具有相同的位置）转换（移动）到 0,0？`fadedBGView``UIViewAnimationOptionTransitionCrossDissolve``UIViews`

正在发生的是淡入淡出，然后`fadedBGView`视图突然移动到 0,0。

换句话说，我想让第一个`UIView`淡入第二个，同时向上移动屏幕。

希望这足以回答清楚。最好的...SL

```
[UIView transitionFromView:blankView
                    toView:fadedBGView
                    duration:1.0
                    options:UIViewAnimationOptionTransitionCrossDissolve
                    completion:^(BOOL finished) {
                    [blankView removeFromSuperview];
                    }];

[UIView commitAnimations];

CGRect frame = fadedBGView.frame;
frame.origin.x = 0;
frame.origin.y = 0;
[UIView animateWithDuration:1.0 animations:^{
    NSLog(@"UIView Transition/Move Called");
    fadedBGView.frame = frame;
}]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T23:15:35.407

iOS 4 和更新版本提供了基于块的动画，您的代码已经在使用这些动画：

```
+[UIView animateWithDuration:animations:];
+[UIView animateWithDuration:animations:completion:]; 
```

在动画块中，您可以设置多个目标值。有关动画属性的参考，请参阅[Apple 的 UIView 文档。](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIView_Class/UIView/UIView.html)因此，在一个块内，您可以修改视图的帧和 alpha（透明度）值。我不确定交叉溶解动画是如何工作的，但如果它只是一个视图从 0 到 1，另一个视图从 1 到 0，那很容易实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T23:32:44.010

代替

```
UIViewAnimationOptionTransitionCrossDissolve 
```

利用

```
UIViewAnimationOptionTransitionCrossDissolve | UIViewAnimationOptionAllowAnimatedContent 
```

`UIViewAnimationOptionAllowAnimatedContent`选项允许在过渡期间附加动画。确保您的`fadedBGView`起始帧正确。

# java - 正则表达式城市名称

> ID：13279870
> 
> 赞同：0
> 
> 时间：2012-11-07T23:09:43.503
> 
> 标签：java, regex

我使用这个正则表达式来检查字段 City：

```
"[a-zA-Z]+[[ '-]?[a-zA-Z]+]*" 
```

但它也适用于以下名称：

> 圣'''''安吉洛
> 
> 安德里亚---------巴列塔

我希望单词之间的特殊字符“”，“”和“-”必须是一个且只有一个。例如：

> 圣天使-代隆巴第

它必须是好的，但不是：

> 圣天使---Dei Lombardi

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T23:12:51.407

您想使用括号进行重复：

```
[a-zA-Z]+(?:[ '-][a-zA-Z]+)* 
```

您尝试的 ( `[[ '-]?[a-zA-Z]+]`) 表示一个字符类，包含`[ '-]`、和`?`，实际上与. 另一个上的子模式用and分隔，这使得它不被捕获，这是一个轻微的优化。`[a-zA-Z]``+``[a-zA-Z?+ '-]``(``)``?:`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T17:52:21.060

使用此代码验证城市：

```
public static boolean validateCity( String city )
{
return city.matches( "([a-zA-Z]+|[a-zA-Z]+\\s[a-zA-Z]+)" );
} 
```

# php - PHP Simple HTML DOM - 单步浏览页面

> ID：13279875
> 
> 赞同：1
> 
> 时间：2012-11-07T23:10:25.873
> 
> 标签：php, dom

我使用简单的 HTML DOM 已经有一段时间了，并且一直喜欢我可以用它做的事情。但是，我遇到了我想做的事情。首先给出 html 长什么样的基本概念

```
<html>
<div><div><table><tr><td class="alt2"> texty texty </td></tr></table></div></div>
Text text
<div><div><table><tr><td class="alt2"> texty2 texty2 </td></tr></table></div></div>
Text2 text2
<div><div><table><tr><td class="alt2"> texty3 texty3 </td></tr></table></div></div>
Text2 text3
</html> 
```

所以基本上我需要在 TD 的粗体中取什么，然后在这个 div 下的每个 div 下放置什么。

所以我知道我可以做 $text = $html->find('td[class=alt2]') 例如得到“texty texty”，但是之后我如何将“text text”与它相关联，

如果我抓住 texty2 texty2，我如何将 text2 text 2 与它相关联？

* * *

最后，我的目标是`<p>texty texty</p><br>text text` 输出

我应该指出，div 可以有不同的类等，所以简单的 reg 表达式不起作用（如果可能的话，我想坚持使用简单的 html dom）

--

更新：

我做了这个小代码

```
if ($html) {

// Pulls the div that holds the links to the champion profiles (where they have the english names)
$text = $html->find('td[class="alt2"]');
$count = 0;
foreach ($text as $holder) {

    $tdholder[] = $holder->innertext;
    $html->find('div',$count*2)->innertext = $holder->innertext;
    echo $holder."<br><br>";
    $count++;
}
} 
```

此代码的唯一问题是它按 div 的总数计算。在我的例子中这没关系，因为总是有 2 个。但如果有 2 个或三个，这就会产生问题。所以现在我只需要弄清楚如何抓住第一个，第二个或第三个顶级div，我应该很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T23:40:59.430

`Text text`,`Text2 text2` 并且`Text2 text3`不在任何使您的请求模棱两可的 html 标记中

下面的解决方案可以工作`but it is code specific`，它只适用于上面的 HTML 示例添加您的原始 HTML 以便更好地实施

```
$list = array();
foreach ( $html->find('text') as $td ) {
    $list[] = $td->plaintext;
}

echo "<pre>";   
foreach (array_chunk(array_filter(array_map("trim", $list)), 2) as $info ) {
    vprintf("TD: %s,\tTXT: %s \n", $info);
} 
```

输出

```
TD: texty texty,    TXT: Text text 
TD: texty2 texty2,  TXT: Text2 text2 
TD: texty3 texty3,  TXT: Text2 text3 
```

# javascript - 如何更改Firefox插件上的脚本位置？

> ID：13279883
> 
> 赞同：2
> 
> 时间：2012-11-07T23:10:55.950
> 
> 标签：javascript, firefox, browser, google-chrome-extension, firefox-addon

制作 Firefox 插件的最简单方法是什么，它重复了这个 chrome 功能：

```
chrome.webRequest.onBeforeRequest.addListener(
  function(info) {
    if(info.url.indexOf("notifier") + 1){
        return {redirectUrl: "https://domain.null/1.js"};
    }

  },
  {
    urls: [
      "*://domain2.null/*"
    ],
    types: ["script"]
  }, ["blocking"]); 
```

我知道Firefox中的**nsIContentPolicy**，但我不明白如何使用它。

我们将不胜感激所有意见、建议和帮助

## **回答**

我已经确定了无重启扩展的问题。
要阻止内容，我们可以使用 Wladimir 所说的 nsIContentPolicy。我们还可以使用**windowListener** (aWindow.gBrowser) 将脚本注入页面。

例如，这种做法非常有效：[https ://github.com/jvillalobos/AMO-Admin-Assistant/blob/master/src/bootstrap.js](https://github.com/jvillalobos/AMO-Admin-Assistant/blob/master/src/bootstrap.js)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T09:51:48.670

我认为现在没有重大黑客攻击就无法做到这一点。这是[错误 765934](https://bugzilla.mozilla.org/show_bug.cgi?id=765934)`redirectTo() method`的主题，它将向[`nsIHttpChannel`界面](https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIHttpChannel)添加一个。一旦实现，这样的代码应该可以工作：

```
const Ci = Components.interfaces;
const Cu = Components.utils;

Cu.import("resource://gre/modules/Services.jsm");
Cu.import("resource://gre/modules/XPCOMUtils.jsm");

var observer = {
  QueryInterface: XPCOMUtils.generateQI([
    Ci.nsIObserver,
    Ci.nsISupportsWeakReference
  ]),

  observe: function(subject, topic, data)
  {
    if (topic == "http-on-modify-request" &&
        subject instanceof Ci.nsIHttpChannel)
    {
      var uri = subject.URI;
      if (uri.host == "domain2.null" && /\.js(\?|$)/.test(uri.path))
      {
        var redirectUri = Services.io.newURI("https://domain.null/1.js",
                                             null, null);
        subject.redirectTo(redirectUri);
      }
    }
  }
};

Services.obs.addObserver(observer, "http-on-modify-request", true); 
```

供参考：[Services.jsm](https://developer.mozilla.org/en-US/docs/JavaScript_code_modules/Services.jsm) , [XPCOMUtils.jsm](https://developer.mozilla.org/en-US/docs/JavaScript_code_modules/XPCOMUtils.jsm) ,[观察者通知](https://developer.mozilla.org/en-US/docs/Observer_Notifications#HTTP_requests), [nsIHttpChannel](https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIHttpChannel) , [nsIURI](https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIURI)

# ios - SocialFramework 与 iOS5

> ID：13279886
> 
> 赞同：0
> 
> 时间：2012-11-07T23:11:10.647
> 
> 标签：ios, ios5, xamarin.ios, ios6

我正在使用 SocialFramework 在我的应用程序中的 Twitter 上发布图片和状态更新。问题是使用 iOS SDK 6 创建的应用程序在 iOS 5.1 设备上崩溃，因为缺少社交框架。问题：什么会更好：希望每个人都升级到 iOS 6 还是在没有社交框架的情况下重新实现 Twitter 功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T23:46:52.313

**阅读Apple 文档中的[SDK 兼容性指南](http://developer.apple.com/library/ios/#documentation/developertools/conceptual/cross_development/Introduction/Introduction.html)**。

它解释了如何使您的应用程序与旧 iOS 版本（如 iOS5.1）兼容，同时仍然能够使新 iOS 版本（如 iOS6）的用户拥有最新功能（如仅与 iOS6 兼容的 SocialFramework）。

*全局原则是测试 SocialFramework 类在运行时是否可用，如果它们是可用的（因此用户在 iOS6 或更高版本上）使用它们，如果不是，则做任何你想要的（例如显示一个`UIAlertView`来煽动用户将其 iOS 版本升级到 6.0 或更高版本）。
有关如何执行此操作和管理所有案例的更多详细信息和代码示例，请参阅上面提到的 SDK 兼容性指南。*

* * *

另请注意，在 iOS5 中，在 iOS6 中发布[`Twitter Framework`](http://developer.apple.com/library/ios/#documentation/Twitter/Reference/TwitterFrameworkReference/_index.html#//apple_ref/doc/uid/TP40011014)之前可用`Social Framework`（现在替换并扩展了它，使得 Twitter 框架在 iOS6 中已过时，但在 iOS5 中仍然可用）。

所以你可以使用上面SDK兼容性指南中描述的做法来检测`SocialFramework`类是否可用，如果是，则使用它们，如果不检测`TwitterFramework`类是否可用，则在可用时在iOS5中使用此框架。当两个框架都不可用时（例如对于 iOS4 用户） ，仍然回退到`UIAlertView`鼓励更新。*同样，此类情况在上述文档中进行了描述。*

# database - 将回复表关联到工单表

> ID：13279887
> 
> 赞同：0
> 
> 时间：2012-11-07T23:11:09.803
> 
> 标签：database, database-design, relational-database, rdbms

假设我有一张票/问题可以有零个或多个回复。

我可以通过两种方式关联“回复”和“票证”表。

*第一种方法：*

```
Ticket(**ticket_id**, title, message) //ticket_id: PK
Reply(**reply_id**, reply_message, ticket_id) //reply_id: PK and ticket_id: FK 
```

*第二种方法：*

```
Ticket(**ticket_id**, title, message) //ticket_id: PK
Reply(**reply_id**, **ticket_id**, reply_message) //reply_id: PK and ticket_id: FK & PK 
```

在我看来，两者都是正确的。

如我所见，第二种方法中的回复被认为是弱实体，因为回复与票证密切相关。但是，我更喜欢第一种方法，因为它在编程级别更容易处理；在第一种方法中，我们只需要处理一个 PK。**你同意吗？为什么和为什么不？**.

*注意：票证和回复是模型样本。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T15:31:47.047

> 正如我所看到的，第二种方法中的回复被认为是弱实体......

正确的。

> ...因为回复与票证密切相关。

不知道你的意思是什么。它很弱，因为如果没有从父级迁移的属性，就无法**识别它。**

> 但是，我更喜欢第一种方法，因为它在编程级别更容易处理；在第一种方法中，我们只需要处理一个 PK。你同意吗？为什么和为什么不？

这得看情况 ;）

强实体和非识别关系（您的“第一种方法”）：

*   可能对客户端代码更友好，特别是如果您使用 ORM。
*   防止父 PK 进一步向下传播表层次结构¹，其中：
    *   将使儿童 FK 更瘦。
    *   将“切断” ON UPDATE CASCADE 并防止它进一步向下传播到表层次结构。

弱实体和识别关系（你的“第二种方法”）：

*   生成的 PK 是[聚类](http://use-the-index-luke.com/sql/clustering/index-organized-clustered-index)键的良好候选者。²
*   ^(避免在 FK 3)上附加索引，因为主索引涵盖两个字段⁴。每个额外的索引都会消耗空间和性能（修改数据时）。
*   沿表层次结构¹传播父 PK ，其中：
    *   可以让你避免一些 JOIN。
    *   [对于正确建模某些类型的菱形依赖项](https://stackoverflow.com/a/12626987/533120)可能是必需的。

总而言之，这两种解决方案都不是绝对“更好”的——这是选择正确平衡的问题。

* * *

*¹与您的情况无关（尚），因为您（尚）没有任何引用`Reply`.*

*²许多（但不是全部）DBMS 只允许在 PK 上进行集群。在您的情况下，集群`{ticket_id, reply_id}`（注意字段的顺序）会将所有连接到物理上靠近的相同勾选的回复存储在一起，从而显着减少某些类型的查询的 I/O。*

*³在从`Ticket`.*

*⁴假设您将订单更改为`{ticket_id, reply_id}`。*

# php - 如何使用 Facebook 的 v3 SDK 和 PHP 发布帖子？

> ID：13279890
> 
> 赞同：-2
> 
> 时间：2012-11-07T23:11:28.430
> 
> 标签：php, facebook, facebook-php-sdk

我正在尝试使用我的应用程序在用户的 Facebook 墙上发帖。我还希望之后能够访问和显示此人的用户信息 - 但我遇到了困难。

到目前为止我的代码如下（当然敏感部分被屏蔽了）：

```
<?php
include("src/facebook.php");

$facebook = new Facebook(array(
    'appId'  => ##############,
    'secret' => #####################################,
));

$user = $facebook->getUser();

if ($user) {
  try {
    $user_profile = $facebook->api('/me');
  } catch (FacebookApiException $e) {
    // The access token we have is not valid
    $user = null;
  }
}
if (!$user) {
    $args['scope'] = 'offline_access, read_stream, friends_likes, email, read_stream, publish_stream, user_birthday,user_hometown, user_photos, uid, username, first_name';
    $loginUrl = $facebook->getLoginUrl($args);
}
 if (!$user): ?>
    <a href="<?php echo $loginUrl ?>">Login with Facebook</a>
<?php endif ?> 
```

我不知道出了什么问题——也许我错过了一些关键的东西？任何指导将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T00:03:17.540

1) 确保阅读[权限文档](https://developers.facebook.com/docs/reference/login/#permissions)。例如，`offline_access`已弃用，并且您要求的大多数权限都不存在！

2）要在用户墙上发帖，您需要获得`publish_stream`许可（您已经在请求）

3）按照我的[教程](http://www.masteringapi.com/tutorials/how-to-post-a-message-on-the-user-wall-using-facebook-graph-api/33/)，类似下面的东西会让你开始：

```
$args = array(
    'message'   => 'Hello from my App!',
    'link'      => 'http://www.masteringapi.com/',
    'caption'   => 'Visit MasteringAPI.com For Facebook API Tutorials!'
);
$post_id = $facebook->api("/me/feed", "post", $args); 
```

4) 改进您的视图（在您的上述代码中混合 PHP 和 HTML 在编程上没有错误，但不推荐）。并且要回答您的最后一个请求，`$user_profile`它将保存您需要的信息，只需查看 Facebook[示例](https://github.com/facebook/facebook-php-sdk/blob/master/examples/example.php)即可开始。

5) 努力提高你的英语水平，欢迎来到 Stack Overflow！

# c++ - C++ 声明许多类似的类而不重复自己

> ID：13279892
> 
> 赞同：1
> 
> 时间：2012-11-07T23:11:45.997
> 
> 标签：c++, metaprogramming, declaration

我想知道一种聪明的方法来避免在类似结构的以下声明中重复自己。下面代码中的所有结构都公开继承自 boost::spirit::qi::symbols，其中每个结构的 EnumType 都不同。

```
struct website_ : qi::symbols<char, Website>
{
  website_() : qi::symbols<char, Website>(website_names, Website_values) { }
} website_;

struct currency_name_ : qi::symbols<char, Currency>
{
  currency_name_ () : qi::symbols<char, Currency>(currency_names, Currency_values) { }
} currency_name_; 
```

例如在哪里

```
 enum Website { /*list of websites*/ };
 const std::vector<Website> Website_values = { /*same list as above*/ };
 const std::vector<std::string> website_names = { /* list of corresponding names of websites*/ }; 
```

目标是初始化每个结构，只给出适当的枚举、枚举值向量和字符串向量以及值的名称。

我已经想到了一个新的 qi::symbols 子类的解决方案，我的所有结构都将从中继承，但我认为这可能是一种矫枉过正，另一个可能使用宏（我不太熟悉）。是否有另一种方法使用其他类型的元编程？或者也许我已经在使用的 Boost Library 中的其他一些技巧？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T23:17:40.047

这就是发明模板的原因。

```
template<EnumType t>
struct symbol_type: qi::symbols<char, t>
{
  symbol_type(const std::vector<std::string>& names, const std::vector<t>& values) 
  : qi::symbols<char, t>(names, values) { }
};

symbol_type<Website> website(website_names, website_values);
symbol_type<Currency> currency(currency_names, currency_values); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T23:22:09.927

如果我理解您的问题，您可以使用以下代码：

```
typedef  qi::symbols<char, Website> website_;
typedef  qi::symbols<char, Currency> currency_name_; 
```

# c# - 噪音框，当表格布局滚动时，未启用“AutoScroll”属性

> ID：13279895
> 
> 赞同：0
> 
> 时间：2012-11-07T23:12:15.090
> 
> 标签：c#, .net, infragistics, tablelayout, noise

我有一个大问题，当我在表格布局上没有启用“Autoscool”属性的情况下进行滚动时，我得到一个噪音框，似乎布局继续滚动（见附图）。我已经尝试过更新/刷新/无效...它的容器布局，但我的问题无法成功。

我的其他奇怪行为是，一旦屏幕上有噪音框，并启动任何对话框，完整的布局就固定了。

以前有没有人遇到过类似的问题？

请参阅下面我用来滚动表格布局的代码：

```
 private void panelSelectorTrackBar_ValueChanged(object sender, EventArgs e)
    {
        galleryTableLayoutPanel.Top = panelSelectorTrackBar.Value;
        dashboardPanelDetails.Hide();
    } 
```

其中**galleryTableLayoutPanel**是*TableLayout*实例，*panelSelectorTrackBar*是*UltraTrackBar*实例。

![噪音箱](../Images/af1117c17d274532165c67ea212646ff.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T22:44:11.183

假设您设置了 UltraTrackBar 的值，以便它们与 TableLayoutPanel 的可能垂直滚动值匹配，那么最好设置 VerticalScroll 的值，而不是在窗体上移动控件的位置：

```
this.tableLayoutPanel1.VerticalScroll.Value = ultraTrackBar1.Value; 
```

# php - 为什么这个 ajax 脚本不使用 ajaxRequest.open 调用后端 php？

> ID：13279896
> 
> 赞同：1
> 
> 时间：2012-11-07T23:12:15.657
> 
> 标签：php, javascript, html, ajax

```
<html><head><title>Loses</title></head><body>

<script language="javascript" type="text/javascript">
function ajaxFunction() {
    var ajaxRequest;
    try{
        // Opera 8.0+, Firefox, Safari
        ajaxRequest = new XMLHttpRequest();
    }catch (e){
        // Internet Explorer Browsers
        try{
            ajaxRequest = new ActiveXObject("Msxml2.XMLHTTP");
        }catch (e){
            try {
                ajaxRequest = new ActiveXObject("Microsoft.XMLHTTP");
            }catch (e){
                // Something went wrong
                alert("Your browser broke!");
                return false;
            }
        }
    }

    // Receive data from the server to update div
    ajaxRequest.onreadystatechange = function(){
        if(ajaxRequest.readyState == 4){
            var ajaxDisplay = document.getElementById('ajaxDiv');
            ajaxDisplay.value = ajaxRequest.responseText;
        }
    }

    // Get the value from user.
    if (!target) target = document.getElementById("name");
    var queryString = "?name=" + escape(target.value);

    var url = "db.php" + queryString;

    ajaxRequest.open("GET", url, true);
    ajaxRequest.send(null); 
}
</script>

<form name="myForm">
    Victim: <input type="text" id="name" name="name"/> <br/>
    <br/>
    <input type="button" onclick="getLoses()" value="Show Loses"/>
</form>

<div id="ajaxDiv">Results:</div>
<br>

</body></html> 
```

为什么这没有任何作用？

我已经在 apache 和 lightpd 下试过了。我没有收到任何投诉或错误，但它什么也没做。

如果我手动调用后端， db.php?name=Player1 它可以工作。所以它不能是 db.php 中的任何东西。上面的代码有问题，我只是不知道缺少什么。谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T23:22:12.773

1.  您在单击按钮时调用函数 getLoses()，但没有这样的函数（名称为 ajaxFunction）
2.  `if (!target) target = document.getElementById("name");`

    没有可变目标，因此检查`!target`将导致脚本错误。
    从该行中删除`if(!target)`或将条件更改为：

    ```
    if (typeof target=='undefined' || !target)
    ```

# java - 为什么我无法删除 jtable 中的单元格

> ID：13279897
> 
> 赞同：0
> 
> 时间：2012-11-07T23:12:16.773
> 
> 标签：java, swing, jtable

看我的方法

```
public void removeRow(int[] selectedRow) {
    int len = selectedRow.length;
    for(int i=0; i<len; i++) {
        data.remove(selectedRow[i]);
    }
    fireTableDataChanged();
} 
```

这是错误调用堆栈

线程“AWT-EventQueue-0”中的异常 java.lang.IndexOutOfBoundsException：索引：1，大小：1 在 java.util.ArrayList.RangeCheck(ArrayList.java:547) 在 java.util.ArrayList.remove(ArrayList.java :387) 在 table.MyTableModel.removeRow(MyTableModel.java:89) 在 table.Tables$2.actionPerformed(Tables.java:61) 在 javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:1995) 在 javax.swing。 AbstractButton$Handler.actionPerformed(AbstractButton.java:2318) at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:387) at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:242)

我使用静态 ArrayList 数据作为数据持有者

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T23:22:49.270

问题是，当您删除一行时，您的表索引会在每次删除时调整/减少，从而导致`IndexOutOfBoundsException`. 您可以以相反的顺序删除行以防止出现这种情况：

```
for (int i = selectedRow.length - 1; i >= 0; i--) {
   data.removeRow(selectedRow[i]);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T23:29:11.037

问题是，一旦删除一行，`selectedRow`索引就不再与`data`列表中的行匹配

因此，例如，如果我有两行并且我想删除第 0 行和第 1 行，那么当我删除第 0 行时，第 1 行不再存在（它变为 0）

您需要做的是创建一个临时列表，其中包含您实际要删除的行...

```
List<MyRowData> toDelete = new ArrayList<MyRowData>(selectedRow.length);
for(int index : selectedRow) {
    toDelete.add(data.get(index));
} 
```

您应该能够简单地用于从列表[`List#removeAll`](http://docs.oracle.com/javase/7/docs/api/java/util/List.html#removeAll%28java.util.Collection%29)中删除要删除的行`data`

```
data.removeAll(toDelete); 
```

# sql - 在 SQL 中按周分组，但显示完整的日期时间？

> ID：13279901
> 
> 赞同：1
> 
> 时间：2012-11-07T23:12:45.937
> 
> 标签：sql, tsql

以下声明：

```
group by datepart(wk, createdon) 
```

根据所选行所在的周对所选行进行分组。我的选择语句显示以下内容：

```
SELECT 
    datepart(wk, createdon) week, 
```

如何显示一周的实际日期时间（“12-10-2012”），而不是数字（“12”）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T23:17:45.717

一种选择是使用 cte`ROW_NUMBER`代替：

```
WITH CTE AS 
(
   SELECT 
       RN = ROW_NUMBER() OVER (PARTITION BY datepart(wk, createdon) ORDER BY createdon)
     , DATEADD(ww, DATEDIFF(ww,0,createdon), 0) As Week
     , *
   FROM dbo.Table
)
SELECT * FROM CTE
WHERE RN = 1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T23:23:00.157

如果我理解正确，您希望按周分组，但也要返回完整的日期时间。您必须在聚合列中包含选定的字段。因此应该工作：

```
SELECT DATEPART(wk, createdon) week, createdon
FROM TableName
GROUP BY DATEPART(wk, createdon), createdon 
```

适用于 MSSQL2008R2

编辑：由于 OP 似乎想要一周的开始日期，所以有[答案](https://stackoverflow.com/questions/7168874/get-first-day-of-week-in-sql-server)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T23:17:15.647

您不能按周分组，然后显示它的组成部分，即天。您将需要按日期分组。

# android - 程序不会运行，但没有错误

> ID：13279907
> 
> 赞同：0
> 
> 时间：2012-11-07T23:13:19.077
> 
> 标签：android, eclipse

我搜索了我的问题，发现其他人的问题非常相似，但他们的解决方案不一样。我编写了一个代码来执行简单的乘法任务，具体取决于用户点击的按钮。main.xml 文件和随附的 java 文件都没有错误，甚至页面上也没有警告。一切看起来都很棒，但是当我尝试运行该程序时，它会弹出告诉我有错误并请修复它们。控制台和 LogCat 中均未显示任何内容。当我转到 windows -> 显示视图 -> 问题时，它也不会列出与该程序有关的任何内容。

我的 main.xml 代码是：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_marginTop="16dp"
    android:text="@string/number" />

<EditText
    android:id="@+id/editText1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/textView1"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="16dp"
    android:ems="10"
    android:inputType="numberDecimal" />

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/editText1"
    android:layout_marginLeft="16dp"
    android:layout_marginTop="23dp"
    android:text="@string/1" />

<Button
    android:id="@+id/button2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/button1"
    android:layout_alignBottom="@+id/button1"
    android:layout_centerHorizontal="true"
    android:text="@string/2" />

<Button
    android:id="@+id/button3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/button2"
    android:layout_alignBottom="@+id/button2"
    android:layout_alignRight="@+id/textView1"
    android:text="@string/3" />

<Button
    android:id="@+id/button4"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/button1"
    android:layout_below="@+id/button1"
    android:layout_marginTop="16dp"
    android:text="@string/4" />

<Button
    android:id="@+id/button5"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/button4"
    android:layout_alignBottom="@+id/button4"
    android:layout_alignLeft="@+id/button2"
    android:text="@string/5" />

<Button
    android:id="@+id/button6"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/button5"
    android:layout_alignBottom="@+id/button5"
    android:layout_alignLeft="@+id/button3"
    android:text="@string/6" />

<Button
    android:id="@+id/button7"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/button4"
    android:layout_below="@+id/button4"
    android:layout_marginTop="22dp"
    android:text="@string/7" />

<Button
    android:id="@+id/button8"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/button7"
    android:layout_alignBottom="@+id/button7"
    android:layout_alignLeft="@+id/button5"
    android:text="@string/8" />

<Button
    android:id="@+id/button9"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/button8"
    android:layout_alignBottom="@+id/button8"
    android:layout_alignLeft="@+id/button6"
    android:text="@string/9" />

<TextView
    android:id="@+id/textView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/button8"
    android:layout_below="@+id/button8"
    android:layout_marginTop="70dp"
     />

</RelativeLayout> 
```

我的爪哇：

```
package com.deitel.multiplicationtables;

import android.os.Bundle;
import android.app.Activity;
import android.widget.Button;
import android.widget.TextView;
import android.widget.EditText;
import android.view.View;

//Implements the listener for an onclick event (implements View.onClickListener)
public abstract class Main extends Activity implements View.OnClickListener{
// creates a button 
private Button bone, btwo, bthree, bfour, bfive, bsix, bseven, beight, bnine;

// Called when the activity is first created.
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

  //assigns the resource id of 1 - 9 to each button.
    bone = (Button) findViewById(R.id.button1);
    btwo = (Button) findViewById(R.id.button2);
    bthree = (Button) findViewById(R.id.button3);
    bfour = (Button) findViewById(R.id.button4);
    bfive = (Button) findViewById(R.id.button5);
    bsix = (Button) findViewById(R.id.button6);
    bseven = (Button) findViewById(R.id.button7);
    beight = (Button) findViewById(R.id.button8);
    bnine = (Button) findViewById(R.id.button9);

    //Adds the buttons to the onclicklistener
    bone.setOnClickListener(this);
    btwo.setOnClickListener(this);
    bthree.setOnClickListener(this);
    bfour.setOnClickListener(this);
    bfive.setOnClickListener(this);
    bsix.setOnClickListener(this);
    bseven.setOnClickListener(this);
    beight.setOnClickListener(this);
    bnine.setOnClickListener(this);

 }

 //creates a method (or action) for when the button is clicked.
 public void onclick(View view)
 {
    //Makes a variable for the entered number
    Double amount = 0.0;
    Double product = 0.0;
    Double variable = 0.0;

    // constants
    final double one = 1; 
    final double two = 2;
    final double three = 3;
    final double four = 4; 
    final double five = 5;
    final double six = 6;
    final double seven = 7; 
    final double eight = 8;
    final double nine = 9;

    if (view.getId() == R.id.button1)
    {
      variable = one;
    }
    if (view.getId() == R.id.button2)
    {
        variable = two;
    }
    if (view.getId()== R.id.button3)
    {
        variable = three;
    }

    if (view.getId() == R.id.button4)
    {
      variable = four;
    }
    if (view.getId() == R.id.button5)
    {
        variable = five;
    }
    if (view.getId()== R.id.button6)
    {
        variable = six;
    }

    if (view.getId() == R.id.button7)
    {
      variable = seven;
    }
    if (view.getId() == R.id.button8)
    {
        variable = eight;
    }
    if (view.getId()== R.id.button9)
    {
        variable = nine;
    }

    //creates an editext and assigns the resource id of the xml edittext.
    EditText number = (EditText)findViewById(R.id.editText1);

    //Receives the input from the edittext, converts it to a double (number).
    amount = Double.parseDouble(number.getText().toString());
    //Calculates the product
    product = variable * amount;

    //Creates a textview object, assigns the xml r.id, and then changes the text to
   report the amount.
     TextView t = (TextView)findViewById(R.id.textView2); 
        t.setText("Your product is: " + product);

     }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T23:29:09.973

```
public abstract class Main extends Activity implements View.OnClickListener{
    ...
} 
```

`abstract class`? 为什么？您将永远无法实例化摘要`Activity`！

删除`abstract`声明，它将正常工作。并确保您已`Main`在应用程序清单中声明了活动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-05T16:27:10.490

我不会检查你所有的乘法逻辑，但你问题的核心是为什么按钮点击不起作用。你还需要做两件事：

1.  实例化一个**单独**的OnClickListener 对象来处理点击。你这样做的方式是行不通的，而且会引起头痛。它违背了 Android 的整个 MVC 特性，我不会在这里讨论，但简而言之，您是在要求控制器完成视图的工作。在这里相信我。

2.  键入方法名称时请注意区分大小写。您的方法名称是 onclick(View v)。方法名称必须是 onClick(View v)（注意大写字母 C）。Java 是一种区分大小写的语言，因此永远不会调用您的方法。

（您的 Activity 类不能像其他人指出的那样声明为抽象类，但听起来您已经解决了这个问题。）

请参阅我的评论，前面有 NOTE 评论

例子：

```
//NOTE Main no longer implements View.OnClickListener
public class Main extends Activity {
// creates a button 
private Button bone, btwo, bthree, bfour, bfive, bsix, bseven, beight, bnine;

// Called when the activity is first created.
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

  //assigns the resource id of 1 - 9 to each button.
    bone = (Button) findViewById(R.id.button1);
    btwo = (Button) findViewById(R.id.button2);
    bthree = (Button) findViewById(R.id.button3);
    bfour = (Button) findViewById(R.id.button4);
    bfive = (Button) findViewById(R.id.button5);
    bsix = (Button) findViewById(R.id.button6);
    bseven = (Button) findViewById(R.id.button7);
    beight = (Button) findViewById(R.id.button8);
    bnine = (Button) findViewById(R.id.button9);

//NOTE seperate onClickListener()
OnClickListener oc = new OnClickListener(){

    @Override
    //creates a method (or action) for when the button is clicked.
    public void onClick(View view) //NOTE the capital C in Click
    {
        //Makes a variable for the entered number
        Double amount = 0.0;
        Double product = 0.0;
        Double variable = 0.0;

        // constants
        final double one = 1; 
        final double two = 2;
        final double three = 3;
        final double four = 4; 
        final double five = 5;
        final double six = 6;
        final double seven = 7; 
        final double eight = 8;
        final double nine = 9;

        if (view.getId() == R.id.button1)
        {
            variable = one;
        }
        if (view.getId() == R.id.button2)
        {
            variable = two;
        }
        if (view.getId()== R.id.button3)
        {
            variable = three;
        }

        if (view.getId() == R.id.button4)
        {
            variable = four;
        }
        if (view.getId() == R.id.button5)
        {
            variable = five;
        }
        if (view.getId()== R.id.button6)
        {
            variable = six;
        }

        if (view.getId() == R.id.button7)
        {
            variable = seven;
        }
        if (view.getId() == R.id.button8)
        {
            variable = eight;
        }
        if (view.getId()== R.id.button9)
        {
            variable = nine;
    }

    }
};

//NOTE setting the seperate OnClickListener
//Adds the buttons to the onclicklistener
bone.setOnClickListener(oc);
btwo.setOnClickListener(oc);
bthree.setOnClickListener(oc);
bfour.setOnClickListener(oc);
bfive.setOnClickListener(oc);
bsix.setOnClickListener(oc);
bseven.setOnClickListener(oc);
beight.setOnClickListener(oc);
bnine.setOnClickListener(oc);

//...snip...
}
} 
```

# wpf - CurrentCell 更改为不是 Datagrid 中 SelectedItem 的行

> ID：13279908
> 
> 赞同：3
> 
> 时间：2012-11-07T23:13:27.340
> 
> 标签：wpf, binding, datagrid

我有一个 DataGrid，它是分配给 TabControl 的 ContentTemplate 的 DataTemplate 的一部分。TabControl 的 ItemsSource 绑定到一个集合，因此，一旦选择了每个 Tab，DataGrid 的 DataContext 就会更改为一个新集合。目前，DataGrid 上有 ItemsSource 和 SelectedItem 的绑定。

当我在选项卡中移动时，DataGrid 能够保持所选行正确同步，但我遇到的问题是 CurrentCell 始终设置为第一列和第一行，无论 SelectedItem 等于什么。

当 DataGrid 的 DataContext 更改时，我尝试设置 CurrentCell 属性，但 DataGrid 总是将其重置回第一行和第一列。有谁知道当 DataContext 发生变化时，我如何将 CurrentCell 保持在与 SelectedItem 相同的行上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T08:39:44.800

这对我有用（其中 dg 是 DataGrid）：

```
 DataGridCellInfo cellInfo = new DataGridCellInfo(dg.SelectedItem, dg.Columns[0]);
   dg.CurrentCell = cellInfo; 
```

# login - 在moodle中添加帮助按钮

> ID：13279909
> 
> 赞同：-1
> 
> 时间：2012-11-07T23:13:42.677
> 
> 标签：login, registration, moodle

我正在使用 Moodle 2.3 我正在尝试将帮助按钮添加到我在 moodle 中的自我注册表单中。我正在更改 *`/login/signup_form.php`*页面。

我在用：

```
 $mform->addHelpButton('country','country','moodle'); 
```

这会在页面上创建一个帮助图标。但是单击该图标会在同一页面上加载帮助信息。弹出窗口不起作用。在 firebug 中未发现 JavaScript 错误。

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T09:22:12.550

您需要从管理员进行 ajax/javascript 设置。

```
Site administration > Appearance > AJAX and Javascript 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T05:36:49.970

您还应该向 lang/en/moodle.php 添加一个条目

例如在 course/edit_form.php 我添加了以下字段

// 课程冠军
$mform->addElement('text', 'champion', 'Champion', get_string('champion'), 'size="256"');

// 新字段
$mform->addHelpButton('champion','courseChampion');

// 字段帮助
$mform->setDefault('champion', 'Firstname Lastname');

然后在 lang/en/moodle.php 我添加了该字段的帮助信息。
$string['courseChampion'] = '课程冠军';
$string['courseChampion_help'] = '输入冠军的名字和姓氏。';

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-05T07:18:50.740

在 /root/lang/en 下的 moodle.php 中，添加以下字符串：

$string['country_help'] = '你的文字在这里';

# ruby - 从 ruby 向 Google Analytics 发送“点击”

> ID：13279911
> 
> 赞同：0
> 
> 时间：2012-11-07T23:14:15.290
> 
> 标签：ruby, google-analytics

我正在构建一个具有一些“邮件跟踪”功能的应用程序，并希望通知谷歌分析关于点击来自 ruby​​ 的链接。

我已经将电子邮件中的所有外部链接更改为转到我的服务器进行重定向，所以我知道用户点击了什么以及何时点击。

我想发送这个点击只是知道'UA-XXXXX'和点击的网址。

有办法吗？或者最好的解决方案是渲染一个 html 页面并用 JS 发送点击事件？

**更新**：好的，我找到[了 gabba](https://github.com/hybridgroup/gabba/)，但不知道如何发送“点击”事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T00:33:33.833

通常最好使用 JS api，因为它可以访问分析跟踪的所有其他数据，例如访问者浏览器/os/geoip，并且可以将所有这些与“访问”联系起来。

如果您在电子邮件中嵌入链接，您可以考虑在链接中使用源/媒体/广告系列标志。

[http://support.google.com/analytics/bin/answer.py?hl=en&answer=1033867](http://support.google.com/analytics/bin/answer.py?hl=en&answer=1033867)

因此，从技术上讲，它不会将“点击”作为事件进行跟踪，更像是跟踪用户从该特定电子邮件访问您的网站的事实。如果您想要单个点击粒度，您可以使用单独的广告系列标签。（例如，如果您在电子邮件中多次使用相同的 url，并且您想知道他们是点击了电子邮件中的第一个还是第二个）

# javascript - 三.js为什么用for循环而不是while

> ID：13279912
> 
> 赞同：0
> 
> 时间：2012-11-07T23:14:16.573
> 
> 标签：javascript, performance, for-loop, while-loop, three.js

> **可能重复：**
> [什么循环更快，while 或 for](https://stackoverflow.com/questions/3629174/what-loop-is-faster-while-or-for)

我在three.js中看到很多语言都有共同的代码特性：

```
for ( var i = 0, l = something.length; i < l; i++ ) {
    do some stuff over i
} 
```

但我读到在javascript中的性能可以通过使用更好：

```
var i = something.length;
while(i--){
    do some stuff over i
} 
```

这实际上会显着提高任何性能吗？有理由更喜欢一个吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T23:23:52.223

> 这实际上会显着提高任何性能吗？

不。不能可靠地跨浏览器（也就是说，跨 JavaScript 实现）。

此外，请注意，在您的示例中，您的`while`循环向后循环（*n*到 0），`for`您引用的循环向前循环（0 到*n*）。有时这很重要。

一般来说，微优化很少是合适的，在 JavaScript 的情况下*尤其*如此，在这种情况下，不同的实现具有明显不同的性能特征。相反，编写**清晰**和可维护的代码，并仅在出现*特定*性能问题时解决它们，并且如果它们出现，则在您的目标引擎上解决它们。

# wordpress - 如何在 Wordpress 3.4.2 上列出我的帖子。和主题二十

> ID：13279914
> 
> 赞同：0
> 
> 时间：2012-11-07T23:14:29.270
> 
> 标签：wordpress, list, indexing

我试图找到一种解决方案，让我可以为我发布的帖子（349 个帖子、27 个页面、28 个类别和 50 个标签）制作一个“索引”。是否有一个简单的解决方案允许我使用 WordPress 将所有帖子、页面等的“索引”显示为页面或帖子？读者和/或订阅者可以点击帖子/页面并被带到该特定帖子的“索引页面”。我尝试了各种插件 - (Index Press)、(Table of Contents Plus) 仅提及几个，但除非我做错了什么，否则似乎没有什么对我有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T00:53:18.767

```
<?php wp_get_archives('type=alpha'); ?> 
```

这将按字母顺序列出所有帖子。

更多信息可以在 Codex 中找到：[wp_get_archives](http://codex.wordpress.org/Function_Reference/wp_get_archives)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T02:07:31.277

[WP Query](http://codex.wordpress.org/Class_Reference/WP_Query)是您最好的朋友。

这将以链接的形式为您提供所有帖子和页面的列表。如果您有任何其他帖子类型，请将 slug 添加到 post_type 数组。

```
<?php
$args = array(
    'posts_per_page' => -1,
    'post_type' => array('post', 'page')
);
$q = new WP_Query($args);
if($q->have_posts()) : while($q->have_posts()) : $q->the_post();
?>
<a href="<?php the_permalink(); ?>"><?php the_title(); ?></a><br/>
<?php
endwhile;endif;
?> 
```

# php - PHP异常/奇怪的行为

> ID：13279919
> 
> 赞同：3
> 
> 时间：2012-11-07T23:15:08.053
> 
> 标签：php, floating-point

当我运行时：

`for($o=1;$o<=655;$o++){ $r = $r+0.01; echo $r." ";}`

在某些时候我得到：

```
...4.29 4.3 4.31 4.32 4.33 4.34 4.35 4.36 4.37 4.38 4.39 4.4
4.41 4.42 4.4299999999999 4.4399999999999 4.4499999999999
4.4599999999999 4.4699999999999 ... 
```

但是当我运行时：

`for($o=1;$o<=5;$o+=0.01){ echo $o." "; }`

异常开始于：

```
4.34 4.35 4.36 4.37 4.38 4.3899999999999 4.3999999999999 
```

为什么加法是 for 循环的一部分，还是在 for 循环中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T23:17:11.410

欢迎来到舍入误差的奇迹。

0.01 不能完全表示为有限二进制分数，因此如果将其重复添加到另一个浮点数，最终会出现舍入误差。

您看到舍入误差的具体点取决于所涉及数字的二进制扩展如何产生舍入误差。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T23:17:23.533

浮点数学不能准确地表示这些值。见[这里](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T01:26:47.467

当数字“.01”转换为 64 位 IEEE 754 二进制浮点时，结果为 0.010000000000000000208166817117216851329430937767028809。当 $r 设置为 0 并将这个 0.01 的近似值添加到它 100 次时，结果是 1.0000000000000006661338147750939242541790008544921875，因为在添加过程中存在额外的舍入误差。

现在考虑 $r 从这个值进一步增加 1，而 $o 从它的起始值正好 1 增加。首先，由于 $r 和 $o 以不同的值开始，所以它们以后通常会有不同的值。其次，因为它们不同，当增量被添加到它们中时，它们在加法中遇到来自四舍五入的不同错误。这个错误可能会加强或取消，导致 $r 或 $o 或多或少不同。

最后，PHP 有一些标准来决定是否打印带有两个或更多小数点的数字。据推测，在某些时候，$r 或 $o 的值距离最近的带有两个小数点的数字足够远，PHP 决定它应该打印更多的数字。如上所述，对于 $r 和 $o，这发生在不同的时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T23:50:01.723

您可以使用 Round() 函数。这是一个链接： http: [//php.net/manual/en/function.round.php](http://php.net/manual/en/function.round.php)

# python - Heroku上的美味汤？

> ID：13279930
> 
> 赞同：1
> 
> 时间：2012-11-07T23:16:09.617
> 
> 标签：python, django, heroku, beautifulsoup, virtualenv

我试图在 heroku 上使用 Beautiful soup 部署应用程序并运行类似 "python manage.py" 的命令。我的命令使用美丽的汤库。尽管该命令在我的本地机器上运行良好，但它在 heroku 上找不到漂亮的汤模块。我尝试使用 pip install beautifulsoup 安装它，然后将其添加到需求文件并使用 git 推送更新。但它仍然找不到漂亮的汤模块。我知道这不太具体，而且我对 heroku、django 还是陌生的。我不确定如何调试它？有人可以指导我正确的方向吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T23:19:07.567

如果您尝试使用 BeautifulSoup 4，则必须明确添加该版本：

```
$ pip install beautifulsoup4
$ pip freeze
beautifulsoup4==4.1.3
$ pip freeze > requirements.txt 
```

# ruby-on-rails - 无法将 Rails 应用程序部署到 Heroku

> ID：13279933
> 
> 赞同：0
> 
> 时间：2012-11-07T23:16:18.687
> 
> 标签：ruby-on-rails, heroku, ssh-keys

以下是我尝试将我的 rails 应用程序部署到 heroku 的步骤。但是，我收到“您的带有指纹的密钥无权访问”我的应用程序。

1.  从 ~/.ssh 中删除所有现有密钥
2.  $ heroku 键：清除
3.  $ heroku 创建午餐-tr
4.  输入您的 Heroku 凭据。
5.  电子邮件：adam.aahrens@gmail.com
6.  密码（输入将被隐藏）：
7.  找不到现有的公钥。
8.  你想生成一个吗？[Yn] 是
9.  生成新的 SSH 公钥。
10.  上传 SSH 公钥 /.ssh/id_rsa.pub... 完成
11.  创建午餐-tr...完成，堆栈是雪松
12.  [http://lunch-tr.herokuapp.com/](http://lunch-tr.herokuapp.com/) | git@heroku.com:lunch-tr.git Git 远程 heroku 添加
13.  $ git远程-v
14.  heroku git@heroku.com:lunch-tr.git (获取) heroku git@heroku.com:lunch-tr.git (推送)
15.  $ git push heroku 大师

    ！您的指纹为 2f:0b:2c:e9:95:b4:52:af:dc:db:9c:57:e3:f2:57:7f 的密钥无权访问 lunch-tr。致命：远端意外挂断

不知道我还应该尝试什么我的想法已经不多了。感谢您的任何建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T23:20:27.327

尝试`ssh-add`命令，这会将私钥身份添加到身份验证代理。

# python - Scipy 的 normaltest 函数似乎不准确

> ID：13279940
> 
> 赞同：1
> 
> 时间：2012-11-07T23:16:38.093
> 
> 标签：python, statistics, scipy, normal-distribution

用于`scipy.stats.norm`生成随机样本，然后运行它`scipy.stats.normaltest`会产生变化很大的输出：

```
from scipy.stats import norm, normaltest

normaltest(norm.rvs(size=1000))
# (0.10435743048081543, 0.94915922246569517)
normaltest(norm.rvs(size=1000))
# (0.57583529133190114, 0.74982334089826597)
normaltest(norm.rvs(size=1000))
# (0.074086867327589984, 0.96363428027274967)
normaltest(norm.rvs(size=1000))
# (2.0817923824843461, 0.35313806086602029)
normaltest(norm.rvs(size=1000))
# (0.25177398640139054, 0.88171448088503002)
normaltest(norm.rvs(size=1000))
# (2.5213062252950227, 0.2834688289515595)
normaltest(norm.rvs(size=1000))
# (2.0550957310741165, 0.35788346385342579)
normaltest(norm.rvs(size=1000))
# (4.5722298301301869, 0.10166065590209576)
normaltest(norm.rvs(size=1000))
# (3.0060164141422421, 0.22245994699827343)
normaltest(norm.rvs(size=1000))
# (1.8870291791486471, 0.38925734860089078)
normaltest(norm.rvs(size=1000))
# (0.24931060262844901, 0.88280115054104014) 
```

其中只有一个的 p 值 < 0.05。这似乎真的坏了。我错过了什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T23:21:33.640

`normaltest`返回一个 2 元组。第一个值是卡方统计量，第二个值是 p 值。

所以在你上面的例子中，实际上没有 p 值 < 0.05。

的文档字符串`normaltest` [可能不正确](http://projects.scipy.org/scipy/ticket/1479)；查看源代码（/usr/share/pyshared/scipy/stats/stats.py）证实了我的说法：

```
def normaltest(a, axis=0):
    a, axis = _chk_asarray(a, axis)
    s,p = skewtest(a,axis)
    k,p = kurtosistest(a,axis)
    k2 = s*s + k*k
    return k2, chisqprob(k2,2) 
```

（编辑：注意文档字符串在最新版本中[是正确](http://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.normaltest.html#scipy.stats.normaltest)`scipy.stats`的。）

* * *

一点都不异常！

p 值 < 0.05 的概率约为 5%。尝试运行该命令 1000 次，看看是否正确：

```
In [67]: import scipy.stats as stats

In [69]: pvals = [stats.normaltest(stats.norm.rvs(size=1000))[1] for i in range(1000)]

In [71]: sum([1 for p in pvals if p < 0.05])/1000.0
Out[71]: 0.053 
```

# ravendb - 使用 Autofac 注册 RavenDb？

> ID：13279942
> 
> 赞同：9
> 
> 时间：2012-11-07T23:16:55.160
> 
> 标签：ravendb, autofac

谁能指导我如何使用 Autofac 注册 RavenDB？

`builder.Register<DocumentStore>(`.. 之后呢？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-08T00:13:37.763

这是一个示例控制台程序，它不仅说明了如何连接文档存储，还说明了如何设置它，以便您可以注入您的文档会话：

```
using System.Threading.Tasks;
using Autofac;
using Raven.Client;
using Raven.Client.Document;

namespace ConsoleApplication1
{
  internal class Program
  {
    private static void Main()
    {
      var builder = new ContainerBuilder();

      // Register the document store as single instance,
      // initializing it on first use.
      builder.Register(x =>
        {
          var store = new DocumentStore { Url = "http://localhost:8080" };
          store.Initialize();
          return store;
        })
           .As<IDocumentStore>()
           .SingleInstance();

      // Register the session, opening a new session per lifetime scope.
      builder.Register(x => x.Resolve<IDocumentStore>().OpenSession())
           .As<IDocumentSession>()
           .InstancePerLifetimeScope()
           .OnRelease(x =>
             {
               // When the scope is released, save changes
               //  before disposing the session.
               x.SaveChanges();
               x.Dispose();
             });

      // Register other services as you see fit
      builder.RegisterType<OrderService>().As<IOrderService>();

      var container = builder.Build();

      // Simulate some activity.  5 users are placing orders simultaneously.
      Parallel.For(0, 5, i =>
        {
          // Each user gets their own scope.  In the real world this would be
          // a new inbound call, such as a web request, and you would let an
          // autofac plugin create the scope rather than creating it manually.
          using (var scope = container.BeginLifetimeScope())
          {
            // Let's do it.  Again, in the real world you would just inject
            // your service to something already wired up, like an MVC
            // controller.  Here, we will resolve the service manually.
            var orderService = scope.Resolve<IOrderService>();
            orderService.PlaceOrder();
          }
        });
    }
  }

  // Define the order service
  public interface IOrderService
  {
    void PlaceOrder();
  }

  public class OrderService : IOrderService
  {
    private readonly IDocumentSession _session;

    // Note how the session is being constructor injected
    public OrderService(IDocumentSession session)
    {
      _session = session;
    }

    public void PlaceOrder()
    {
      _session.Store(new Order { Description = "Stuff", Total = 100.00m });

      // we don't have to call .SaveChanges() here because we are doing it
      // globally for the lifetime scope of the session.
    }
  }

  // Just a sample of something to save into raven.
  public class Order
  {
    public string Id { get; set; }
    public string Description { get; set; }
    public decimal Total { get; set; }
  }
} 
```

请注意， DocumentStore 是单个实例，但 DocumentSession 是每个生命周期范围内的实例。对于这个示例，我手动创建生命周期范围并并行执行，模拟 5 个不同的用户可能如何同时下订单。他们每个人都将获得自己的会话。

将 SaveChanges 放入 OnRelease 事件是可选的，但您不必将其放入每个服务中。

在现实世界中，这可能是 Web 应用程序或服务总线应用程序，在这种情况下，您的会话应分别限定为单个 Web 请求或消息的生命周期。

如果您使用的是 ASP.Net WebApi，您应该从 NuGet 获取 Autofac.WebApi 包并使用他们的 .InstancePerApiRequest() 方法，该方法会自动创建适当的生命周期范围。

# c# - 使用 do while 语句将 asp:FileUpload 更改为 Visible="true"

> ID：13279943
> 
> 赞同：1
> 
> 时间：2012-11-07T23:16:54.997
> 
> 标签：c#, do-while

我正在尝试创建一个页面，该页面具有可变数量的 FileUpload 字段，具体取决于用户从下拉列表中选择的数量。

我的 .apsx 代码如下；

```
 <tr>

            <td>Number of photo's to upload</td>
            <td><asp:DropDownList ID="DLPhotoCount" runat="server" OnSelectedIndexChanged="OnSelectedIndexChanged_PhotoCount" AutoPostBack="true">

                <asp:ListItem Text="..."></asp:ListItem>
                <asp:ListItem Text="1"></asp:ListItem>
                <asp:ListItem Text="2"></asp:ListItem>

            </asp:DropDownList></td>

        </tr>

        <tr>

            <td>Picture 1:</td>
            <td><asp:FileUpload runat="server" ID="Pic1" Visible="false"/></td>
        </tr>

       <tr>

            <td>Picture 2:</td>
            <td><asp:FileUpload runat="server" ID="Pic2" Visible="false"/></td>
        </tr>

        <tr>

            <td><asp:Button runat="server" ID="BtnUploadFiles" text="Upload Files" OnClick="OnClick_BtnUploadFiles" Visible="false"/></td>

        </tr> 
```

我的 C# 是；

```
 protected void OnSelectedIndexChanged_PhotoCount(object sender, EventArgs e)
{
    string Pic = "Pic";
    int PicNo = Convert.ToInt32(DLPhotoCount.SelectedItem.Text);

    if (DLPhotoCount.SelectedItem.Text != "...")
    {
        string StPicNo = Pic + PicNo;

        do
        {                
            FileUpload StPicNo.Visible = true;
            PicNo = PicNo + 1;

        }
        while (PicNo < Convert.ToInt32(DLPhotoCount.SelectedItem.Text + 1));

        BtnUploadFiles.Visible = true;

    }
    else
    {
        Pic1.Visible = false;
        Pic2.Visible = false;
        BtnUploadFiles.Visible = false;
    }
} 
```

如果这不是实现所需功能的最佳方式，请接受有关任何替代方案的建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T23:33:50.483

根据从下拉列表中选择的值动态创建文件上传控件是一种很好的做法。

以下链接提供了使用 javascript 添加文件上传控件的示例示例

[http://www.aspsnippets.com/Articles/Uploading-Multiple-Files-using-JavaScript-Dynamic-FileUpload-Controls-in-ASP.Net.aspx](http://www.aspsnippets.com/Articles/Uploading-Multiple-Files-using-JavaScript-Dynamic-FileUpload-Controls-in-ASP.Net.aspx)

[http://www.codeproject.com/Articles/24914/Multiple-Dynamic-File-Uploading](http://www.codeproject.com/Articles/24914/Multiple-Dynamic-File-Uploading)

这样做的好处是您不必在文件后面的代码中进行条件检查，如果您的企业将来需要添加更多文件上传控件，则无需更改代码。

# c# - 将 2 个下拉列表中的值相乘

> ID：13279944
> 
> 赞同：1
> 
> 时间：2012-11-07T23:16:55.647
> 
> 标签：c#, asp.net

我有 2 天最好的部分试图弄清楚如何相互“乘以 2 个下拉列表”并将其显示在标签中......

就像在数学中一样，当你把 2 个数字相乘时..

请帮助我...

欢迎所有建议

```
Protected void Button1_Click(object sender, EventArgs e)
{
     int amount1 = int.parse(DropDownList1.selectedValue.ToString());
     int amount2 = int.parse(DropDownList1.selectedValue.ToString());

     Label.Text = amount1 * amount2;
} 
```

我收到一个错误：

无法将类型“Int”隐式转换为“字符串”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T23:18:38.293

只需使用：

```
Label.Text = (amount1 * amount2).ToString(); 
```

因为您不能将整数结果分配给字符串 Label.Text 属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T23:51:43.780

你也可以这样做

```
int val = amount1 * amount2;
Label.Text = val.ToString(); 
```

`Label.Text`期望 String 并且您试图将整数分配给它。

# iphone - UIView 过渡

> ID：13279948
> 
> 赞同：1
> 
> 时间：2012-11-07T23:17:11.870
> 
> 标签：iphone, objective-c, ios, xcode, transition

我将 ViewControllers 用于不同的视图，这就是我目前从页面切换到页面的方式：

```
- (IBAction)switchToSecondPage:(id)sender 
{
    SecondPage * secondPage = [[SecondPage alloc] initWithNibName:nil bundle:nil];
    [self presentViewController: secondPage animated:YES completion:NULL];
} 
```

这是从屏幕底部出现的典型新视图。我可以用它来改变过渡风格，但我只有几个选择可供选择，而且没有一个是好的。

```
secondPage.modalTransitionStyle = UIModalTransitionStylePartialCurl; 
```

我正在寻找与您获得的原始转换相似的转换（页面从底部向上滑动）。所以我想要“从顶部向下滑动”和“从左/右滑动”。有什么办法可以做到这一点。我看到各种各样的应用程序都在这样做，但我没有成功找到任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T23:23:01.853

一种方法是，

```
 [self.view addSubview:secondPage.view];
  secondPage.view.frame = frameOutSideCurrentView;//Frame is set as outside the screen
  [UIView animateWithDuration:1.0f
                     animations:^{
                         //actual frame needed with an animation.
                         secondPage.view.frame = originalFrame;
                     }
                     completion:^(BOOL finished) { 
                        //if you need to anything specific once the animation is completed.
                     }]; 
```

另一种方法是[使用 this](https://gist.github.com/1394947)。`TransitionController`是有助于做到这一点的自定义实现。如果您遇到上述代码的问题，请使用此实现中的类别方法。有一些方法，例如，

```
- (id)initWithViewController:(UIViewController *)viewController;
- (void)transitionToViewController:(UIViewController *)viewController
                     withOptions:(UIViewAnimationOptions)options; 
```

可以用来实现这一点。

# android - Sqlite 现在与日期时间比较只是比较日期

> ID：13279952
> 
> 赞同：2
> 
> 时间：2012-11-07T23:17:35.723
> 
> 标签：android, sqlite

我正在为 android 使用 sqllite，并且我在数据库中有一个 completedDate，格式如下

```
2012-06-26 17:20 
```

我正在尝试获取任务表的所有行，其完成日期在未来（大于现在）

我这样做

```
select * from Task where completedDate > datetime ('now') 
```

问题是比较似乎仅基于没有时间戳的日期。我正在获取从明天开始的完成日期的所有行。但是，如果它是今天的日期（无论时间如何），那么我不会得到该行

这是为什么？任何指针

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T03:27:12.263

如果有人感兴趣，我找到了解决方案。

创建当前日期的字符串表示形式并与它进行比较，如下所示

```
Date d = new Date();
String dStr = ..... //convert d to string using using simple date formated
select * from Task where completedDate > dStr 
```

# mysql - 用循环计算mysql查询的结果数

> ID：13279955
> 
> 赞同：1
> 
> 时间：2012-11-07T23:17:39.840
> 
> 标签：mysql

我正在尝试在 mysql 中编写一个循环，以便一个查询的结果通知第二个。这是我当前的查询集：

```
 select @post_date := from_unixtime(post_date)
 from posts
 where post_date > unix_timestamp('2012-10-20') and nsfw=1;

 select @countofpost := count(@post_date);

 while @countofpost > 0 DO

  select count(*)
  from live_sharedata.users
  where joined between @post_date and (@post_date + 21600) and joined_site_id="RS";

  set @countofpost = @countofpost -1;

 end while; 
```

我收到的错误是 [Err] 1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，了解在 'while @countofpost > 0 DO 附近使用的正确语法。

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T01:08:13.473

两件事情：

1.  运行`SELECT @post_date;`- 它是否向您显示正确的信息？MySQL 中的变量不能包含数组或多个项目。如果您需要变量来保存多个对象，则需要使用`CURSOR`.
2.  对于您的`select @countofpost := count(@post_date);`查询，您也可以将其重写为`SET @countofpost = FOUND_ROWS();`. `FOUND_ROWS()`返回如果没有 LIMIT 子句将返回的行数，因此无需`COUNT()`在行集中运行该命令。

我相信，您需要使用游标重新编写查询，因为（我认为）您希望第一个`SELECT @post_date := from_unixtime(post_date) ...`查询返回多个对象。请查看[参考手册的光标部分](http://dev.mysql.com/doc/refman/5.6/en/cursors.html)以获取更多信息。

# java - 在 Amazon EMR 中运行 hadoop jar

> ID：13279959
> 
> 赞同：0
> 
> 时间：2012-11-07T23:18:01.350
> 
> 标签：java, hadoop, amazon-emr

我为 map-reduce 应用程序创建了一个自定义 jar，并尝试在 Amazon EMR 作业流中运行它。我在 hadoop 1.0.4 中编译了代码，但是 Amazon EMR 支持 Hadoop 1.0.3。另外我在 jdk 1.7 下编译了代码，我不确定 Amazon EMR 使用哪个版本的 java，我们可以在哪里更改它？

这是堆栈跟踪

```
Exception in thread "main" java.lang.UnsupportedClassVersionError: com/test/GWASMapReduce : Unsupported major.minor version 51.0
at java.lang.ClassLoader.defineClass1(Native Method)
at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)
at java.lang.ClassLoader.defineClass(ClassLoader.java:615)
at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
at java.net.URLClassLoader.defineClass(URLClassLoader.java:283)
at java.net.URLClassLoader.access$000(URLClassLoader.java:58)
at java.net.URLClassLoader$1.run(URLClassLoader.java:197)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
at java.lang.Class.forName0(Native Method)
at java.lang.Class.forName(Class.java:247)
at org.apache.hadoop.util.RunJar.main(RunJar.java:180) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T23:22:56.223

Amazon EMR 似乎不支持 Java 7。您需要尝试编译您的 jar 以针对较旧的 JVM：

```
javac -target 1.6 -cp .... etc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T15:33:39.387

根据 Muel，Amazon EMR 不支持 Java 7，截至今天，Amazon EMR 支持版本 1.0.3、0.20.205。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-23T12:05:04.627

EMR 平台仍然不支持 Java 7，请参见[此处](https://forums.aws.amazon.com/thread.jspa?messageID=458701)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-24T09:36:46.363

它现在支持了一段时间。最低为 AMI 版本 2.4。请参阅[http://docs.aws.amazon.com/ElasticMapReduce/latest/DeveloperGuide/ami-versions-supported.html](http://docs.aws.amazon.com/ElasticMapReduce/latest/DeveloperGuide/ami-versions-supported.html)

# ruby - RSpec -- 测试是否使用之前定义的块调用块

> ID：13279966
> 
> 赞同：1
> 
> 时间：2012-11-07T23:18:37.233
> 
> 标签：ruby, testing, rspec, call, block

我[最近询问](https://stackoverflow.com/questions/13249177/rspec-test-if-method-called-its-block-parameter#comment18053559_13249177)如何在 RSpec 中测试是否调用了一个块，并且该问题的答案似乎在一个简单的情况下有效。问题是当块的初始化更复杂时。然后它`before`在上下文中被许多不同的测试完成并重用，其中一个测试块是否被评估。请参阅示例：

```
context "the node definition using block of code" do
  before do
     @n=node do
        # this block should be called
     end
     # some more complex setup concerning @n
  end

  it "should call the block" do
     # how to test it?
  end

  # here a bunch of other tests using @n

end 
```

在这种情况下，具有副作用改变局部变量值的解决方案不起作用。从块中引发异常是没有用的，因为必须正确评估整个语句才能被其他测试使用。

显然我可以单独进行测试，但它似乎很臭，因为我必须复制粘贴初始化部分，并且因为被称为块的测试本身就属于这个上下文。

在这种情况下如何测试块是否被评估？

* * *

以下@zetetic 提出的问题的解释。

上下文是我正在实现一种 DSL，*节点*由其参数和代码块定义（可以在节点范围内定义其他内容）。由于节点块定义的东西可能非常通用，至少在第一次尝试时，我只需要确保对块进行评估，并且将考虑用户提供的内容。现在不管它是什么。

可能我现在应该重构我的测试并使用模拟使它们测试行为而不是实现。然而，它会有点棘手，因为一些混合和动态处理发送到对象的消息。目前，此类测试的概念在我的脑海中有点模糊；-)

无论如何，您的回答和评论帮助我更好地理解 RSpec 是如何工作的，并解释了为什么我正在尝试做的事情看起来好像不适合 RSpec。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T09:13:19.993

尝试这样的事情（未经我测试）：

```
context "the node definition using block of code" do
  let(:node){
    node = Node.new "arg1", "arg2", node_block
    # more complex stuff here
    node
  }
  context "checking the block is called" do
    let(:node_block) {
      double = double("node_block")
      double.should_receive("some kind of arg").and_return("something")
      # this will now cause a fail if it isn't called
      double
    }
    it "should call the block" do
      node.blah()
    end
  end

  let(:node_block) {
    # some real code
  }

  subject { node.blah() }
  it { should == 2 }
  # ...
end 
```

所以这是一段非常不稳定的代码（你必须填补空白，因为你没有付出太多，而且`let`显然也是一个 lambda，这可能意味着你必须玩弄它bit) 使用`let`and a`double`来检查它是否被调用，并避免使用`before`，这实际上是为了副作用*而不是*设置用于规范的变量。

@zetetic 发表了一个非常有见地的评论，即您没有在这里测试行为。我不反对使用 rspec 来做更多的单元测试风格的东西（准则被打破），但你可能会问，如果没有调用一个真正的代码块，以后的测试将如何通过？在某种程度上，我什至不确定您是否需要检查块是否被调用，但只有您知道。

# javascript - 切换 div 以在加载时关闭？

> ID：13279970
> 
> 赞同：4
> 
> 时间：2012-11-07T23:18:56.420
> 
> 标签：javascript, jquery, toggle

以下函数在单击相对 id 时切换 div。有什么方法可以设置它，以便在页面加载时，被切换的 div 开始关闭？

我不希望他们被看到，直到点击。

最好的，

乔伊

```
<script type="text/javascript">
    $(document).ready(function() {
        $("#architects").click(function() {
             $(".exclusive-architects").toggle();
        });
        $("#international").click(function() {
             $(".exclusive-international").toggle();
        });
        $("#designers").click(function() {
             $(".exclusive-designers").toggle();
        });
        $("#historical").click(function() {
             $(".exclusive-historical").toggle();
        });
    });
    </script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T23:22:45.963

只需将它们隐藏在 dom ready 上，如下所示：

```
<script type="text/javascript">
    $(document).ready(function() {
        $(".exclusive-architects, .exclusive-international, 
           .exclusive-designers, .exclusive-historical").hide();

        $("#architects").click(function() {
             $(".exclusive-architects").toggle();
        });
        $("#international").click(function() {
             $(".exclusive-international").toggle();
        });
        $("#designers").click(function() {
             $(".exclusive-designers").toggle();
        });
        $("#historical").click(function() {
             $(".exclusive-historical").toggle();
        });
    });
    </script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T23:31:06.600

**[演示](http://jsbin.com/atipum/1/edit)**

如果您的**HTML**如下所示：

```
<div id="buttons">

    <div>toggle architects</div>
    <div>toggle international</div>
    <div>toggle designers</div>
    <div>toggle historical</div>

</div>

<div class="cont"> architects content </div>
<div class="cont"> international content </div>
<div class="cont"> designers content </div>
<div class="cont"> historical content </div> 
```

比**你需要的是**：

```
$('.cont').hide(); // HIDE ALL INITIALLY

$('#buttons div').click(function(){
  $('.cont').eq(  $(this).index()  ).toggle();
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T23:26:35.753

你应该只需要在`display:none`你的起始 CSS中添加一个

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T23:22:27.357

```
$(function(){ // DOM ready

    $(".exclusive-architects").hide();
    $(".exclusive-international").hide();
    $(".exclusive-designers").hide();
    $(".exclusive-historical").hide();

}); 
```

它应该工作:)

# android - Android Drawable setLevel(); 没有适当地填充 SeekBar

> ID：13279971
> 
> 赞同：1
> 
> 时间：2012-11-07T23:19:01.093
> 
> 标签：android, drawable, seekbar

好的，所以我已经能够自定义一些 SeekBar 以用作条形图类型的图像，但是因为我需要能够在绿色或红色图像（取决于某些值）之间切换，您可以在下面看到。问题是，无论我在 setLevel 中为 Drawable 使用什么值，它都不能正确填充（您可以查看下图作为示例，因为根据这两个值，绿色条应该更靠近右侧）

![在此处输入图像描述](../Images/3cfd6d9f4d2cb67c54cac0bc5071339c.png)

下面是设置整个 MTD 佣金栏部分的代码，我不知道您需要查看多少代码，所以我决定发布所有这一部分。

```
void setupMTDBarSection() {
    //Get Current Date and Number of Days in Current Month
    Calendar cal = Calendar.getInstance();
    int numberOfDays = cal.getActualMaximum(Calendar.DAY_OF_MONTH);
    SimpleDateFormat today = new SimpleDateFormat("dd");
    String currentDate = today.format(new Date());

    //Get MTD Goal value from Preferences
    String goalString = preferences.getString("keyMonthlyGoal", "0");
    float mtdGoalFloat = Float.valueOf(goalString);
    Integer mtdGoal = (int)mtdGoalFloat;
    MTDGoalValue.setText(NumberFormat.getCurrencyInstance().format(mtdGoalFloat));

    //Get Current MTD Value
    String mtdString = preferences.getString("keyMTDValue", "0");
    float mtdValueFloat = Float.valueOf(mtdString);
    Integer mtdValue = (int)mtdValueFloat;
    MTDCurrentProgress.setText(NumberFormat.getCurrencyInstance().format(mtdValueFloat));

    //Do some math to determine if the Rep is below/above the daily goal
    Integer dailyGoal = mtdGoal/numberOfDays;
    Integer currentDayGoal = dailyGoal * Integer.valueOf(currentDate);

    if (mtdValue >= currentDayGoal) {
        MTDGreenTrack.setLevel(mtdValue);
        MTDProgressBar.setProgressDrawable(MTDGreenTrack);
        MTDProgressBar.setMax(mtdGoal);
        MTDProgressBar.setProgress(mtdValue);
    }
    else {
        MTDRedTrack.setLevel(mtdValue);
        MTDProgressBar.setProgressDrawable(MTDRedTrack);
        MTDProgressBar.setMax(mtdGoal);
        MTDProgressBar.setProgress(mtdValue);
    }

    //Add Percentage to MTD Text
    NumberFormat percentFormat = NumberFormat.getPercentInstance();
    float percent = mtdValueFloat/mtdGoalFloat;
    String percentage = percentFormat.format(percent);
    MTDPercentText.setText("(" + percentage + ")");

    //Setup MTD Indicator
    MTDIndicator.setMax(numberOfDays);
    MTDIndicator.setProgress(Integer.valueOf(currentDate));
    MTDIndicator.setOnTouchListener(new View.OnTouchListener() {
        @Override
        public boolean onTouch(View view, MotionEvent motionEvent) {
            return true;
        }
    });

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T17:57:24.683

我相信我找到了问题所在。显然，当您多次调用 setProgressDrawable 时，您需要重新绘制使用的图像，因为它会丢失以前存在的格式。另外，也不需要每次都设置drawable的级别，它与Seekbar的进度值相匹配。以下是到目前为止对我有用的代码

```
Rect bounds = MTDProgressBar.getProgressDrawable().getBounds();
        MTDProgressBar.setProgressDrawable(MTDGreenTrack);
        MTDProgressBar.getProgressDrawable().setBounds(bounds);
        MTDProgressBar.setProgress(mtdValue);
        MTDProgressBar.setMax(mtdGoal); 
```

# ruby-on-rails-3 - Rails：使用数据库表中的数据创建调查

> ID：13279979
> 
> 赞同：1
> 
> 时间：2012-11-07T23:19:29.230
> 
> 标签：ruby-on-rails-3

我目前正在尝试创建一个调查，该调查将使用存储在表格中的问题。我已经从 rails casts 中阅读了[嵌套模型形式的第 1 部分](http://railscasts.com/episodes/196-nested-model-form-part-1)，但是由于调查中没有显示问题，所以我没有得到任何结果。

我有三个表格，一个表格包含问题的文本，另一个表格记录谁进入了调查，第三个表格记录了用户对问题的回答。

**变量表**：名称：varchar id：整数

**报表表** 员工姓名：varchar 日期：日期 id：整数

**report_variable 表** question_id report_id 答案

我为报告/新修改的代码：

```
 # GET /reports/new
 # GET /reports/new.json
 def new
   @report = Report.new
   #variable = @report.variable.build #dont know what to do here, gives an error with report_id
   respond_to do |format|
     format.html # new.html.erb
     format.json { render json: @report }
   end
 end 
```

修改报告/_form.html.erb

```
 <div >
     <%= f.fields_for :variable do |builder| %>
       <%= render variable_fields, :f => builder %>
     <% end %>
   </div> 
```

创建报告/_variable_fields.html.erb

```
 <p>
      <%= f.label :name %>
      <%= f.text_field :name, :class => 'text_field' %>
   <p> 
```

report_variable 的模型

```
class ReportVariable < ActiveRecord::Base
  attr_accessible :report_id, :value, :variable_id
  has_and_belongs to many :reports
  has_and_belongs to many :variables
end 
```

报告模型

```
class Report < ActiveRecord::Base
  attr_accessible :employeeName
  has_many :report_variable
  has_many :variable

  accepts_nested_attributes_for :report_variable
  accepts_nested_attributes_for :variable
end 
```

对不起，如果这是一个简单的问题，我对 Rails 很陌生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T00:59:32.953

Welcome to Rails!

I think the simple answer is the fields aren't showing up because there aren't any nested records. You can probably get around that by uncommenting the `variable` line as you have it:

```
def new
  @report = Report.new
  @report.variables.build #this line creates 1 new empty variable, unsaved.
  respond_to do |format|
    format.html # new.html.erb
    format.json { render json: @report }
  end
end 
```

If you want more than one variable, call something like:

```
3.times { @report.variables.build } 
```

That way the `@report` object you're placing in the form helper will have three variables on it. This should get you moving again, the harder thing is going to be adding ajax addition / removal of variables, but if you know how many there are in advance you don't have to deal with that.

Good luck!

# c# - C# 控制台应用程序电话簿数组

> ID：13279982
> 
> 赞同：1
> 
> 时间：2012-11-07T23:19:55.347
> 
> 标签：c#, arrays, addressbook

我被告知要设计一个电话簿，它将使用 2D 数组来存储名称和电话号码，类型为：字符串。它应该具有添加、删除、打印方法等功能。

我还在这个阵列中挣扎。每当名称记录不存在且其编号为“000”时，我不知道如何用“none”填充整个数组成员。

默认情况下，我需要它打印：（20 条记录，无 000）无 000 无 000 无 000 ... 无 000 无 000 无 000

我想出了：

```
string[,] db = new db[20,2]; 
```

我不确定它是否正确，但我只想要一个 20 行 2 列的二维数组。

然后我想使用 for 或 foreach 循环来填充元素 none 和 000：

```
for (int i=0; i<db.Length/2; i++)
     for (int j=0; j<db.Length/20; j++) 
```

你能帮我填一下吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T23:23:06.547

```
class Address {
    public string Name {get; set; }
    public string Phone {get; set; }
}

List<Address> addressBook = new List<Address>();

// Do stuff with your list 
```

无需使用数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T23:28:16.313

您正在寻找初始化数组的循环是：

```
for (int i = 0; i < 20; ++i)
{
    db[i,0] = "none";
    db[i,1] = "000";
} 
```

# ruby - 如何在 Rails 3.01 中强制构建出售的宝石 - 出售时的 rmagick 问题

> ID：13279985
> 
> 赞同：4
> 
> 时间：2012-11-07T23:20:17.067
> 
> 标签：ruby, ruby-on-rails-3, imagemagick, rmagick

我已经出售了 rmagick，但它没有表现。在不出售时工作正常，但在使用以下方式出售时：

```
gem unpack rmagick --target vendor/gems

Fetching: rmagick-2.13.1.gem (100%)
Unpacked gem: '/Users/joelnylund/Projects/aras/vendor/gems/rmagick-2.13.1' 
```

然后当我尝试加载我的服务器时，我得到：

```
/Users/joelnylund/.rvm/gems/ruby-1.9.2-p320/gems/activesupport-3.0.17/lib/active_support/dependencies.rb:242:in `require': no such file to load -- RMagick2.so (LoadError) 
```

我曾经在 Rails 2.3.5 上执行“rake gems:build:force”来修复这个问题，但这现在给了我同样的错误。如何告诉 rails 3 本地构建 vendored gem？

类似的问题，但这里没有答案： [没有要加载的文件——RMagick2.so](https://stackoverflow.com/questions/7169178/no-such-file-to-load-rmagick2-so)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T13:53:44.540

你试过跑步`rake gems:build`吗？

# c++ - 线程崩溃后离开临界区

> ID：13279987
> 
> 赞同：2
> 
> 时间：2012-11-07T23:20:26.103
> 
> 标签：c++, multithreading, winapi, synchronization, critical-section

我有线程执行列表中的命令

```
do
{
    commandExec->criticalSection.EnterCS();
    if (!commandExec->commands.empty())
    {
        commandExec->ExecuteCommand(commandExec->commands.front());
        commandExec->commands.pop_front();
    }
    else
        commandExec->criticalSection.SuspendThread();
    commandExec->criticalSection.LeaveCS();
} while (commandExec->maintainCommandExecution); 
```

第二个线程将命令添加到列表：

```
criticalSection.EnterCS();
commands.push_back(Command(code, parameters));
criticalSection.LeaveCS();
criticalSection.ResumeThread(); 
```

第一个线程在执行命令时可能会崩溃，因此第二个线程无法访问临界区：

> 如果线程在拥有临界区所有权时终止，则临界区的状态未定义。 [资源](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682608%28v=vs.85%29.aspx)

**那么，处理这个问题的好方法是什么？** 我可以想到一些解决方案，但它们似乎很棘手（添加第三个线程、第二个关键部分等）

（criticalSection 它只是 CRITICAL_SECTION 的简单包装器）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T23:46:14.060

您可以使用 Mutex 代替关键部分（但要注意[了解 WAIT_ABANDONED 的后果中](http://blogs.msdn.com/b/oldnewthing/archive/2005/09/12/463977.aspx)概述的问题）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T00:10:27.037

您可以创建一个类 LockCriticalSection，它在构造函数中锁定临界区，在析构函数中解锁临界区。

然后，在您的代码中，您分配一个 LockCriticalSection 对象，您想在其中启动锁。当对象 LockCriticalSection 超出范围时，临界区将自动释放（因为函数正确终止或由于异常）

以下是负责锁定和解锁关键部分的代码：

```
/// \brief This class locks a critical section in the
///         constructor and unlocks it in the destructor.
///
/// This helps to correctly release a critical section in
///  case of exceptions or premature exit from a function
///  that uses the critical section.
///
///////////////////////////////////////////////////////////
class LockCriticalSection
{
public:
        /// \brief Creates the object LockCriticalSection and
        ///         lock the specified CRITICAL_SECTION.
        ///
        /// @param pCriticalSection pointer to the CRITICAL_SECTION 
        ///                         to lock
        ///
        ///////////////////////////////////////////////////////////
        LockCriticalSection(CRITICAL_SECTION* pCriticalSection):
            m_pCriticalSection(pCriticalSection)
        {
            EnterCriticalSection(pCriticalSection);
        }

        /// \brief Destroy the object LockCriticalSection and
        ///         unlock the previously locked CRITICAL_SECTION.
        ///
        ///////////////////////////////////////////////////////////
        virtual ~LockCriticalSection()
        {
            LeaveCriticalSection(m_pCriticalSection);
        }
private:
        CRITICAL_SECTION* m_pCriticalSection;
}; 
```

这是您问题中修改后的源代码：

```
do
{
    {
        LockCriticalSection lock(&criticalSectionToLock);
        while (!commandExec->commands.empty())
        {
            commandExec->ExecuteCommand(commandExec->commands.front());
            commandExec->commands.pop_front();
        }
    } // here the critical section is released
    // suspend thread here
} while (commandExec->maintainCommandExecution); 
```

# java - 将选项卡添加到 jTabbedPane，其中每个选项卡都有一个不同名称的 textArea java

> ID：13279988
> 
> 赞同：1
> 
> 时间：2012-11-07T23:20:26.520
> 
> 标签：java, swing, tabs, jtextarea, jtabbedpane

我正在尝试将选项卡动态添加到 JTabbedPane 我使用以下代码执行此操作：

```
private tab = new JTabbedPane();

frame.add(tab, BorderLayout.CENTER);

public void newTab(String tab){
      JPanel panel1 = new JPanel();
      JTextArea tArea = new JTextArea();
      panel1.add(tArea);
      tab.add(tab, panel1);
      } 
```

问题是我需要在整个类中都可以查看文本区域名称，以便稍后我可以附加到它，并且它应该可以有很多选项卡，因此每个文本区域应该有不同的名称。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T23:24:38.677

您应该使用 a `List`of `JTextArea`s。

```
private final List<JTextArea> areas = new ArrayList<JTextArea>();

public void newTab(String tab){
      JPanel p = new JPanel();
      JTextArea tArea = new JTextArea();
      p.add(tArea);
      tab.add(tab, p);
      areas.add(tArea);
} 
```

甚至是A `Map`（仅当标题标题是唯一的）。

```
private final Map<String, JTextArea> areas = new HashMap<String, JTextArea>();

public void newTab(String tab){
      JPanel p = new JPanel();
      JTextArea tArea = new JTextArea();
      p.add(tArea);
      tab.add(tab, p);
      areas.put(tab, tArea);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T23:59:13.317

您有名称冲突问题

```
public void newTab(String tab){ // <-- tab declared as String here
    JPanel panel1 = new JPanel();
    JTextArea tArea = new JTextArea();
    panel1.add(tArea);
    tab.add(tab, panel1); // <-- tab (String) doesn't have an add method - error~~
} 
```

尝试类似：

```
public void newTab(String tabName){
    JPanel panel1 = new JPanel();
    JTextArea tArea = new JTextArea();
    panel1.add(tArea);
    tab.add(tabName, panel1); // <-- Now we know which tab we're talking about ;)
} 
```

反而

一旦你解决了这个问题，`Map`@mercutio 的建议使用应该可以正常工作

# c++ - 删除除“最大”元素之外的所有矢量元素

> ID：13279990
> 
> 赞同：3
> 
> 时间：2012-11-07T23:20:32.763
> 
> 标签：c++, stl, vector

给定一个像这样的向量：

```
struct product {
    float price;
    float shipping;
};

vector<product> products; 
```

如何从向量中删除所有产品，除了最大比率的`shipping`产品`price`？

我尝试将迭代器保持到迄今为止发现的最高迭代器...

```
vector<product>::iterator it = products.begin();
vector<product>::iterator largest = products.begin();

while (it != products.end())
{
    if (it->shipping / it->price > largest->shipping / largest->price)
    {
        products.erase(largest);
        largest = it;
        ++it;
    }
    else
    {
        it = products.erase(it);
    }
} 
```

这一切都很好，但是如果向量中的第一个元素具有最高的比率（它被删除），它就会失败。如果未初始化，我可以解决这个问题（我认为）`largest`，然后在语句中检查它`if`，但据我所知，没有真正的方法可以做到这一点（[如何检查迭代器是否已初始化？](https://stackoverflow.com/questions/6954949/how-to-check-if-the-iterator-is-initialized)）。

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T23:22:43.670

```
 vector<product> products;
 //populate products

 products.erase(
      products.begin(),
      std::max_element(
          product.begin(), 
          producted.end()
      )
 );
 products.resize(1u); 
```

这假设您有一个适合您的类型的 operator<，如果没有，请创建一个比较函数并将其作为第三个参数提供给 max_element。

编辑：

这项工作也是如此，在这种情况下，不是显式查找元素并删除任一侧的元素，而是排序找到 1 个元素，然后我们可以进行一次擦除。

```
 vector<product> products;
 //populate products
 std::nth_element(
      products.begin(), 
      products.begin()+1, 
      products.end(), 
      std::greater<product>()
 );
 products.resize(1u); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T02:29:09.127

您可以定义`largest`为第一个元素并从第二个元素开始迭代，如下所示：

```
bool operator < (const struct product& p1, const struct product& p2)
{
   return p1.price/p1.shipping < p2.price/p2.shipping;
}

vector<product>::iterator largest = products.begin();
vector<product>::iterator it = products.begin();
++it;

while (it != products.end())
{
    if (*largest < *it)
    {
        products.erase(largest);
        largest = it;
        ++it;
    }
    else
    {
        it = products.erase(it);
    }
 } 
```

但是这里有个bug，`products.erase(largest)`调用后`it`会失效，所以你最好采用这里其他建议的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T23:23:32.553

只需重写代码以仅进行*一次删除*：

```
std::vector<product>::iterator largest = products.begin();

for (std::vector<product>::iterator it = products.begin(); it != products.end(); ++it)
{
    if (...) { largest = it; }
}

products.erase(it); 
```

# mongodb - 具有多个 OR 的复杂 MongoDB 查询

> ID：13279992
> 
> 赞同：3
> 
> 时间：2012-11-07T23:20:35.103
> 
> 标签：mongodb

我正在使用 mongodb，并且我已经构建了以下查询。

```
1 AccessToken.where('resource_owner_id').equals(event.resource_owner_id)
2           .where('revoked_at').equals(undefined)
3           .or([ { scopes: /resources/i }, { scopes: new RegExp(event.resource,'i') } ])
4           .or([ { device_ids: [] }, { device_ids: event.body.id } ]) 
```

对于这个例子，我使用的是 Mongoose 和 coffescript。

不幸的是，它不能按我的意愿工作，主要是为了`or`声明。我想要的是`or`第 3 行和第 4 行的两个是独立的。

这意味着字段`scopes`（第 3 行）必须包含字符串`resources`或存储在 event.resource 中的字符串，同时该字段`device_ids`必须为空或包含 id `event.body.id`。

从我准备的测试中，我可以看到该`or`命令将所有内容放在一起。这意味着当仅满足四个 or 条件之一时，我将获得该文档。

```
- { scopes: /resources/i }
- { scopes: new RegExp(event.resource,'i') }
- { device_ids: [] }
- { device_ids: event.body.id } 
```

我无法达到的是将它们分成两组，以便同时满足与该领域相关`scopes`的条件和与该领域相关的条件`device_ids`。

希望问题得到很好的描述。谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-07T23:38:04.313

`$where`除非绝对必须，否则不要使用，因为性能很糟糕。[`$or`](http://docs.mongodb.org/manual/reference/operator/or/)请改用and运算符的组合[`$size`](http://docs.mongodb.org/manual/reference/operator/size/)：

**更新**没有 Mongoose`and`方法，因此您必须[`$and`](http://docs.mongodb.org/manual/reference/operator/and/)直接使用运算符。

```
AccessToken.find({
    resource_owner_id: event.resource_owner_id,
    revoked_at: undefined,
    $and: [
        { $or: [{ scopes: /resources/i }, { scopes: new RegExp(event.resource,'i') }] },
        { $or: [{ device_ids: { $size: 0 } }, { device_ids: event.body.id }] }
    ]
}, callback); 
```

# php - 使用 PHP 调用 SOAP API

> ID：13279995
> 
> 赞同：4
> 
> 时间：2012-11-07T23:20:57.477
> 
> 标签：php, api, soap, call

现在为此工作了一周。执行此代码时遇到问题。我想通过 SOAP 检索数据并在 PHP 中使用它。我的麻烦是，我无法发送“RequesterCredentials”。

我将显示 xml 代码，以便大家可以看到我尝试发送的信息，然后是我正在使用的 PHP 代码。

XML 示例代码

```
POST /AuctionService.asmx HTTP/1.1
Host: apiv2.gunbroker.com
Content-Type: text/xml; charset=utf-8
Content-Length: 200
SOAPAction: "GunBrokerAPI_V2/GetItem"

<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xmlns:xsd="http://www.w3.org/2001/XMLSchema" 
xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
 <soap:Header>
   <RequesterCredentials xmlns="GunBrokerAPI_V2">
     <DevKey>devkey</DevKey>
     <AppKey>appkey</AppKey>
   </RequesterCredentials>
 </soap:Header>
 <soap:Body>
<GetItem xmlns="GunBrokerAPI_V2">
  <GetItemRequest>
    <ItemID>312007942</ItemID>
    <ItemDetail>Std</ItemDetail>
  </GetItemRequest>
</GetItem> 
```

我用来拨打电话的 PHP 代码

```
$client = new SoapClient("http://apiv2.gunbroker.com/AuctionService.asmx?WSDL");

$appkey = 'XXXXXX-XXXXXX-XXXXXX';
$devkey = 'XXXXXX-XXXXXX-XXXXXX';

$header = new SoapHeader('GunBrokerAPI_V2','RequesterCredentials',array('DevKey' => $devkey,'AppKey' => $appkey),0);
$client->__setSoapHeaders(array($header));

$result = $client->GetItem('312343077');

echo '<pre>',print_r($result,true),'</pre>'; 
```

我得到的结果

```
stdClass Object
(
[GetItemResult] => stdClass Object
    (
        [Timestamp] => 2012-11-07T18:17:31.9032903-05:00
        [Ack] => Failure
        [Errors] => stdClass Object
            (
                [ShortMessage] => GunBrokerAPI_V2 Error Message : [GetItem]
You must fill in the 'RequesterCredentialsValue' SOAP header for this Web Service method.
                [ErrorCode] => 1
            )
// the rest if just an array of empty fields that I could retrieve if i wasnt havng problems. 
```

我不确定问题是我发送 SoapHeaders 的方式还是我误解了语法。我将不胜感激任何和所有的帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-08T18:14:13.867

使用对象而不是关联数组作为标题：

```
$obj = new stdClass();

$obj->AppKey = $appkey;
$obj->DevKey = $devkey;

$header = new SoapHeader('GunBrokerAPI_V2','RequesterCredentials',$obj,0); 
```

您可能面临的下一个问题将是随时`GetItem`待命，您还需要对象，包裹在关联数组中：

```
$item = new stdClass;
$item->ItemID = '312343077';
$item->ItemDetail = 'Std';

$result = $client->GetItem(array('GetItemRequest' => $item)); 
```

# css - 如何修改自定义 app-ios 按钮的触摸事件

> ID：13279996
> 
> 赞同：0
> 
> 时间：2012-11-07T23:21:06.197
> 
> 标签：css, mobile, jquery-mobile

我正在尝试将悬停、活动状态添加到自定义后退按钮。自定义数据主题是“app-ios” 这是

`

```
<div data-role="page" id="main">
    <div data-theme="c" data-role="header">
        <h3>
            Header
        </h3>
        <a data-role="button" data-rel="back" data-icon="arrow-l" data-theme="app-ios">Back</a>
    </div>
    <div data-role="content"></div
</div> 
```

` CSS

```
 /* button background and borders color */
a[data-theme="app-ios"] {
    border: none;
    }
    a[data-theme="app-ios"] .ui-btn-corner-all {
        border: 1px solid rgba(0,0,0, 0.4);
        -webkit-border-radius: 5px;
        background: #ba2669; /* Old browsers */
       -webkit-box-shadow: 0 1px 0 rgba(255,255,255, 0.25), inset 0 1px 1px rgba(0,0,0, 0.2);
        overflow: visible;
        padding-left: 8px !important;
        padding-right: 8px !important;
        }
/* shadows and label color */
/* button background and borders color */
a[data-theme="app-ios"] {
    border: none;
    }
    a[data-theme="app-ios"] .ui-btn-corner-all {
        border: 1px solid rgba(0,0,0, 0.4);
        -webkit-border-radius: 5px;
        background: #ba2669;
        -webkit-box-shadow: 0 1px 0 rgba(255,255,255, 0.25), inset 0 1px 1px rgba(0,0,0, 0.2);
        overflow: visible;
        padding-left: 8px !important;
        padding-right: 8px !important;
        }
/* shadows and label color */
a[data-theme="app-ios"].ui-shadow,
a[data-theme="app-ios"] {
    box-shadow: none; -moz-box-shadow: none; -webkit-box-shadow: none;
    background-clip: none; -webkit-background-clip: none; -moz-background-clip: none;
    color: white;
    font-weight: bold;
    font-size: 12px!important;
    text-transform: uppercase;
    top: 5px;
    text-decoration: none;
    text-shadow: 0 -1px 0 rgba(0,0,0, 0.4);
    width: 51px;
    }
/* make room for the point */
a[data-theme="app-ios"].ui-btn-left {
    left: 14px;
    }
    a[data-theme="app-ios"].ui-btn-left .ui-btn-corner-all {
        padding-left: 5px !important;
        }
/* position the DIV that contains the point */
a[data-theme="app-ios"] .ios-tip {
    float: left;
    left: -10px;
    top: 6px;
    position: absolute;
    -webkit-transform: scale(.7, 1.0);
    }
/* apply gradient */
a[data-theme="app-ios"] .ios-tip span {
    display: block;
    width: 19px;
    height: 18px;
    border: 2px solid rgba(0,0,0, 0.4);
    border-right: 0;
    border-top: 0;
    /* the gradient color mus be slightly different since the point is within the body of the button */
    background: #ba2669; /* Old browsers */
    border-radius: 1px; -webkit-border-radius: 1px; -moz-border-radius: 1px;
    /*box-shadow: 0 1px 0 rgba(255,255,255, 0.25); -webkit-box-shadow: 0 1px 0 rgba(255,255,255, 0.25); -moz-box-shadow: 0 1px 0 rgba(255,255,255, 0.25);*/
    -webkit-transform: rotate(45deg) scale(.9, .9);
    } 
```