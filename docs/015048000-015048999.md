# StackOverflow 问答 15048000-15048999

# python - 如何使用 SQL 表达式语言建立多对多关系

> ID：15048000
> 
> 赞同：0
> 
> 时间：2013-02-24T02:18:05.597
> 
> 标签：python, sqlalchemy, flask-sqlalchemy

根据Sqlalchemy 创建者的[建议](https://stackoverflow.com/questions/11769366/why-is-sqlalchemy-insert-with-sqlite-25-times-slower-than-using-sqlite3-directly)，我正在尝试使用 [SQL Expression Language](http://docs.sqlalchemy.org/ru/latest/core/tutorial.html)编写我的初始批量插入数据。详情请参阅。

本教程涵盖了我认为是用户和地址之间一对多关系的示例。他们使用 executemany() 方法创建关系：

```
>>> conn.execute(addresses.insert(), [ 
...    {'user_id': 1, 'email_address' : 'jack@yahoo.com'},
...    {'user_id': 1, 'email_address' : 'jack@msn.com'},
...    {'user_id': 2, 'email_address' : 'www@www.org'},
...    {'user_id': 2, 'email_address' : 'wendy@aol.com'},
... ])
INSERT INTO addresses (user_id, email_address) VALUES (?, ?)
((1, 'jack@yahoo.com'), (1, 'jack@msn.com'), (2, 'www@www.org'), (2, 'wendy@aol.com'))
COMMIT
<sqlalchemy.engine.ResultProxy object at 0x...> 
```

在我的设计中，我有几个多对多的关系。一种介于用户和组织之间。注意我正在使用[Flask-Sqlalchemy。](http://pythonhosted.org/Flask-SQLAlchemy/)

```
# assuming a relationship like:

# organizations = db.Table('organizations',
#         db.Column('organization_id', db.Integer, db.ForeignKey('organization.id')),
#         db.Column('user_id', db.Integer, db.ForeignKey('user.id')))
# class User(db.Model):
#     ...
#     organizations = db.relationship('Organization', secondary=organizations,
#         backref=db.backref('users', lazy='dynamic'))

# class Organization(db.Model):
#     ...

def db_reset():
    # lets reset it
    db.drop_all()
    db.create_all()

    # establish our connection
    engine = create_engine(SQLALCHEMY_DATABASE_URI)
    conn = engine.connect()

    # load in our users
    user_insert = User.__table__insert()
    for user in users: # users is a list of named tuples
        conn.execute(user_insert, name=user.name, role=user.role, 
            organizations= [orgA,orgB,...etc] # how do i do this? 
```

所以我的问题包含在我的代码和标题中。使用 SQL 表达式语言如何建立多对多关系？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T18:42:59.180

您当然应该仍然使用 ORM 定义所有内容，包括您的多对多关系。ORM 建立在 SQL 表达式语言之上。因此，对于需要进行批量插入的用例，您可以将底层`Table`对象与 结合使用`insert()`，但是当您执行其他任何操作时，请坚持使用常规 ORM 模式。

# c# - 正则表达式匹配 * 不匹配非英文字符的文本

> ID：15048002
> 
> 赞同：2
> 
> 时间：2013-02-24T02:18:29.193
> 
> 标签：c#, regex

我正在尝试抓取包含希伯来语文本的页面。它包含以下 HTML：

```
<div id="AgeRating">דירוג גיל: ‎12+‎&lt;/div> 
```

我只想要 12+ 部分（事实上：我只想要 '12' 部分）。我目前正在使用其他语言的这条正则表达式：

```
new Regex(@"<div id=""AgeRating"">.*(\d{1,2})\+</div>", RegexOptions.Compiled); 
```

但我就是无法让这个匹配。我尝试了所有的正则表达式选项，如 RightToLeft、CultureInvariant、SingleLine、MultiLine 等，但没有任何效果。不过，它确实适用于许多其他语言。

注意：我知道 HtmlAgilityPack 可以正确[解析 HTML](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags)。这是关于为什么看似正确的 RegEx 无法匹配特定字符串的问题（因为这是我目前拥有的示例）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T02:41:27.663

这个正则表达式对我有用：

```
<div id="AgeRating">.*?(\d{1,2})\+ 
```

这返回`12`。我添加了一个`?`to`.*`使点不贪心。

我认为让你失望的是你在加号后面有一个隐藏的字符（也许是希伯来字符？）。以下内容也适用于您的字符串（注意加号后面的点，它包含您的隐藏字符）：

```
<div id="AgeRating">.*?(\d{1,2})\+.</div> 
```

如上所述，您还需要`?`after以防止正则表达式返回而不是.`.*``2``12`

# asp.net - 本地 IIS 网站错误

> ID：15048008
> 
> 赞同：0
> 
> 时间：2013-02-24T02:19:58.443
> 
> 标签：asp.net

我正在使用 Visual Studio Web Developer 4.0，在其中我正在创建一个本地 ISS 托管的网站。

我的问题是，当我从 Visual Studio 打开网站时，出现以下错误：

```
ASP.NET 4.0 has not been registered on the webserver. You need to manually configure your web server for asp.net 4.0 in order for your site to run correctly... 
```

当我尝试为调试网站提供服务时，出现错误：

```
Unable to start debugging on the server. Could not start asp.net debugging. More information my available by starting the project without debugging. 
```

然后我在没有调试的情况下导航到我的启动页面，然后浏览器中的错误是

```
The page you are requesting cannot be served because of the extension configuration. If the page is a script, add a handler. If the file should be downloaded, add a MIME map. 
```

我试过用 aspnet_regiis -1 注册 asp.net。我正在使用 Windows 8。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T04:14:01.020

你有两个选择：

1.  为 asp.net 4.0 手动配置 Web 服务器
2.  重新安装 .NET 框架

推荐二号。

# c# - 显示调用者的参数超出范围

> ID：15048010
> 
> 赞同：1
> 
> 时间：2013-02-24T02:20:17.580
> 
> 标签：c#, debugging

我想知道是否有办法从方法/函数的调用者那里获取“ArgumentOutOfRangeException”：

几天来一直在寻找这个，但没有运气......要么是罕见的，要么是搜索参数的错误选择......

例子：

```
class Main
{
    struct XYZ
    {
        public int X, Y, Z;
        public XYZ(int x, int y, int z)
        {
            X = x;
            Y = y;
            Z = z;
        }
    }
    class ArrayE<T>
    {
        public T[, ,] data;

        public ArrayE(XYZ xyz)
        {
            data = new T[xyz.X, xyz.Y, xyz.Z];
        }
        public T this[XYZ xyz]
        {
            get
            {
                if (OutOfBounds(xyz))
                {
                    throw new ArgumentOutOfRangeException(); // Error shows here in debug
                }
                else
                {
                    return data[xyz.X, xyz.Y, xyz.Z];
                }
            }
            set
            {
                if (OutOfBounds(xyz))
                {
                    throw new ArgumentOutOfRangeException(); // Error shows here in debug
                }
                else
                { 
                    data[xyz.X, xyz.Y, xyz.Z] = value; 
                }
            }
        }

        bool OutOfBounds(XYZ xyz)
        {
            return xyz.X < 0 | xyz.Y < 0 | xyz.Z < 0 |
                       xyz.X >= data.GetLength(0) |
                       xyz.Y >= data.GetLength(1) |
                       xyz.Z >= data.GetLength(2);
        }
    }

    ArrayE<int> Data;
    public void Test()
    {
        XYZ xyz = new XYZ(10, 10, 10);
        Data = new ArrayE<int>(xyz);

        xyz = new XYZ(1,0,2);
        Data[xyz] = 2;

        xyz = new XYZ(1, -1, 2);
        Data[xyz] = 4; // I would like the debugger to stop here
        //As if I did this:
        Data[xyz.X,xyz.Y,xyz.Z] = 4 // The debugger would then stop at this line

        //Example of what I want
        int[] array = new int[10];
        array[2] = 1;
        array[-1] = 3; // This is the behavior I would like to happen when out of bounds, The error shows here.
    }
} 
```

**编辑：**更具体：
当我开始调试时，我希望调试器在“Data[xyz] = 4;”行停止 其中 xyz 是无效索引，所以我可以看到它是从哪里调用的，而不是从 Data[xyz] get set 函数内部。

如果常规的 int[] 会得到一个无效的索引，例如 -1，那么调试器会在该行停止，您可以查看访问数组之前的行，这样就可以找出索引的原因就是这样。在当前设置下，当在 ArrayE[xyz] 上使用无效的 xyz 索引时，调试器会在 get 集中停止，这使我无法跟踪并找出 xyz 超出数组边界的原因......

希望它更清楚，至于我在问什么。
我可以使用try catch，但没有其他方法吗？执行 try catch 会很快使代码变得不可读和难以管理，因为程序非常大......

那么，如果可能的话，怎么做呢？

我正在使用 Visual C# 2010 Express

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T03:15:30.430

只需运行您发布的此代码，它似乎正在做您想做的事。下面是调用者捕获和处理它的示例。如果你想在你的测试函数中处理这些，你只需将 try catch 向下移动。

```
public class Program
{
    public static void Main(string[] args)
    {
        try
        {
            Main m = new Main();
            m.Test();
        }
        catch (Exception e)
        {
            Console.Write("Uh oh :O " + e.StackTrace);
        }
    }
} 
```

编辑：好的，在看了这个之后，我想出了一种方法来做你所要求的。您必须设置一个 DebugerHidden 属性。例子：

```
 public T this[XYZ xyz]
        {
            //add attribute here to say this function is 'ignored'
            [DebuggerHidden]
            get
            {
                if (OutOfBounds(xyz))
                {
                    throw new ArgumentOutOfRangeException(); // Error shows here in debug
                }
                else
                {
                    return data[xyz.X, xyz.Y, xyz.Z];
                }
            }
            //add attribute here to say this function is 'ignored'
            [DebuggerHidden]
            set
            {
                if (OutOfBounds(xyz))
                {
                    throw new ArgumentOutOfRangeException(); // Error shows here in debug
                }
                else
                {
                    data[xyz.X, xyz.Y, xyz.Z] = value;
                }
            }
        } 
```

# mapreduce - 在 master 和 reduce 之间共享数据

> ID：15048013
> 
> 赞同：1
> 
> 时间：2013-02-24T02:20:44.870
> 
> 标签：mapreduce, elastic-map-reduce

我需要使用所有reduce任务的结果来执行聚合。基本上，reduce 任务找到总和和计数以及一个值。我需要将所有总和和计数相加并找到最终平均值。

我尝试`conf.setInt`在减少中使用。但是当我尝试从主函数访问它时它失败了

```
class Main {

public static class MyReducer 
extends Reducer<Text, Text,Text,IntWritable> {

    public void reduce(Text key, Iterable<Text> values, 
            Context context
            ) throws IOException, InterruptedException {
        int i = 0;
        int fd = 0, fc = 0;
        fd = context.getConfiguration().getInt("fd", -1);
        fc = context.getConfiguration().getInt("fc", -1);
        //when I check the value of fd, fc here they are fine. fc fd is shared across all reduce tasks and the updated value is seen by all reduce task. Only main function doesnt seem to have access to it.
    }
}

public static void main(String[] args) throws Exception{
    Configuration conf = new Configuration();
    conf.setInt("fc", 5);

    Job job = new Job(conf, "Flight Data");
    job.setJarByClass(FlightData.class);
    job.setMapperClass(TokenizerMapper.class);
    job.setReducerClass(MyReducer.class);

    job.setPartitionerClass(FirstPartitioner.class);
    job.setGroupingComparatorClass(GroupComparator.class);
    job.setSortComparatorClass(KeyComparator.class);

    job.setNumReduceTasks(10);
    job.setMapOutputKeyClass(Text.class);
    job.setMapOutputValueClass(Text.class);
    job.setOutputKeyClass(Text.class);
    job.setOutputValueClass(IntWritable.class);

    flightCount = job.getConfiguration().getInt("fc", -1);
    flightDelay = job.getConfiguration().getInt("fd", -1);
    //here when I access fc, fd, I get back 5 & 5
    System.out.println("Final " + flightCount +" " + flightDelay+ " " + flightDelay/flightCount);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T18:21:15.733

使用新的API覆盖`run()`mapper 和 reducer 。`org.apache.hadoop.mapreduce`在这些方法中，您可以从每个映射器或化简器发出累积的总和/计数。

此外，您还需要将 reducer 计数限制为 1，以便获得多个映射器生成的所有总和的全局总和。

请参阅下面的代码以获得更清晰的信息：

```
import java.io.IOException;

import org.apache.hadoop.conf.Configuration;
import org.apache.hadoop.conf.Configured;
import org.apache.hadoop.fs.Path;
import org.apache.hadoop.io.LongWritable;
import org.apache.hadoop.io.Text;
import org.apache.hadoop.mapreduce.Job;
import org.apache.hadoop.mapreduce.Mapper;
import org.apache.hadoop.mapreduce.Reducer;
import org.apache.hadoop.mapreduce.lib.input.FileInputFormat;
import org.apache.hadoop.mapreduce.lib.input.TextInputFormat;
import org.apache.hadoop.mapreduce.lib.output.FileOutputFormat;
import org.apache.hadoop.mapreduce.lib.output.TextOutputFormat;
import org.apache.hadoop.util.Tool;
import org.apache.hadoop.util.ToolRunner;

public class AggregationExample extends Configured implements Tool {

    /**
     * This is Mapper.
     * 
     */
    public static class MapJob extends Mapper<LongWritable, Text, Text, Text> {

        private Text outputKey = new Text();
        private Text outputValue = new Text();
        private double sum;

        @Override
        public void map(LongWritable key, Text value, Context context) throws IOException, InterruptedException {

            try {
                // say that you need to sum up the value part
                sum+= Double.valueOf(value);
        }

        @Override
        public void run(Context context) throws IOException, InterruptedException {

            setup(context);
            while (context.nextKeyValue()) {
                map(context.getCurrentKey(), context.getCurrentValue(), context);
            }

            // emit out the sum per mapper
            outputKey.set(sum);
            context.write(outputKey, outputValue);// Notice that the outputValue is empty
            cleanup(context);

        }
    }

    /**
     * This is Reducer.
     * 
     */
    public static class ReduceJob extends Reducer<Text, Text, Text, Text> {

        private Text outputKey = new Text();
        private Text outputValue = new Text();
        private double sum;

        @Override
        protected void reduce(Text key, Iterable<Text> values, Context context) throws IOException,
                InterruptedException {

            // summation of values from each mapper
            sum += Double.valueOf(key.toString());

        }

        @Override
        public void run(Context context) throws IOException, InterruptedException {

            setup(context);
            while (context.nextKey()) {
                reduce(context.getCurrentKey(), context.getValues(), context);
            }

            // emit out the global sums
            outputKey.set(sum);
            context.write(outputKey, outputValue);
            cleanup(context);
        }
    }

    @Override
    public int run(String[] args) throws Exception {

        try {
            Configuration conf = getConf();

            // output key and value separator is empty as in final output only
            // key is emitted and value is empty
            conf.set("mapred.textoutputformat.separator", "");

            // Configuring mapred to have just one reducer as we need to find
            // single sum values from all the inputs
            conf.setInt("mapred.tasktracker.reduce.tasks.maximum", 1);
            conf.setInt("mapred.reduce.tasks", 1);

            Job job = new Job(conf);

            job.setJarByClass(AggregationExample.class);
            job.setJobName("Aggregation Example");

            job.setMapperClass(MapJob.class);
            job.setReducerClass(ReduceJob.class);
            job.setOutputKeyClass(Text.class);
            job.setOutputValueClass(Text.class);

            job.setInputFormatClass(TextInputFormat.class);
            job.setOutputFormatClass(TextOutputFormat.class);
            job.setMapOutputKeyClass(Text.class);
            job.setMapOutputValueClass(Text.class);
            FileInputFormat.setInputPaths(job, args[0]);
            FileOutputFormat.setOutputPath(job, new Path(args[1]));

            boolean success = job.waitForCompletion(true);
            return success ? 0 : 1;
        } catch (Exception e) {
            e.printStackTrace();
            return 1;
        }

    }

    public static void main(String[] args) throws Exception {

        if (args.length < 2) {
            System.out
                    .println("Usage: AggregationExample <comma sparated list of input directories> <output dir>");
            System.exit(-1);
        }

        int result = ToolRunner.run(new AggregationExample(), args);
        System.exit(result);
    }

} 
```

您可以很好地将这种方法映射到您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T17:54:17.163

找到了解决方案。我用计数器

[http://diveintodata.org/2011/03/15/an-example-of-hadoop-mapreduce-counter/](http://diveintodata.org/2011/03/15/an-example-of-hadoop-mapreduce-counter/)

公共类 FlightData {

```
//enum for counters used by reducers
public static enum FlightCounters {
    FLIGHT_COUNT,
    FLIGHT_DELAY;
}
public static class MyReducer 
extends Reducer<Text, Text,Text,IntWritable> {

    public void reduce(Text key, Iterable<Text> values, 
            Context context
            ) throws IOException, InterruptedException {

        delay1 = Float.parseFloat(origin[5]);
        delay2 = Float.parseFloat(dest[5]);
        context.getCounter(FlightCounters.FLIGHT_COUNT).increment(1);
        context.getCounter(FlightCounters.FLIGHT_DELAY)
        .increment((long) (delay1 + delay2));

    }
}
public static void main(String[] args) throws Exception{
    float flightCount, flightDelay;
    job.waitForCompletion(true);
    //get the final results updated in counter by all map and reduce tasks
    flightCount = job.getCounters()
            .findCounter(FlightCounters.FLIGHT_COUNT).getValue();
    flightDelay = job.getCounters()
            .findCounter(FlightCounters.FLIGHT_DELAY).getValue();
} 
```

}

# clojure - 在 compojure 中编写路由时出错

> ID：15048014
> 
> 赞同：0
> 
> 时间：2013-02-24T02:20:47.933
> 
> 标签：clojure, compojure

以下复合路线有效。

```
(defroutes app-routes
  (GET "/" [] (index))
  (GET "/twauth" [] (tw/authorize))
  (ANY "/twcallback" [] (do
                          (tw/callback)
                          (index)))
  (route/resources "/")
  (route/not-found "Not Found"))

(def app (handler/site app-routes)) 
```

但是我收到以下错误。它抛出一个 java.nullpointer.exception。我在这里做错了什么？

(defroutes app-routes (GET "/" [] (index)) (GET "/twauth" [] (tw/authorize)) (ANY "/twcallback" [] (do (tw/callback) (index))) )

```
(defroutes base-routes
  (route/resources "/")
  (route/not-found "Not Found"))

(def app
  (-> app-routes
      base-routes
      handler/site)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T13:26:56.610

您的基本路线匹配所有请求。我认为以下内容更好地说明了这一点：

```
(defroutes base-routes
  (route/not-found "Not found"))

(def app
  (-> app-routes
      base-routes
      handler/site)) 
```

无论你在上面的 app-routes 中做什么，base-routes 都会在之后检查并且总是返回 not-found。请注意，每个请求都通过两个路由进行处理，而不是第一个匹配获胜。

因此，您需要将基本路由移动到您的应用程序路由中作为后备 - 就像您在工作示例中所做的那样 - 或者在应用程序中编写它们：

```
(def app
  (-> (routes app-routes base-routes)
      handler/site)) 
```

在这里，组合路线确保第一场比赛获胜。

# html - 我无法使用 css 将图像文件移动到任何地方

> ID：15048016
> 
> 赞同：0
> 
> 时间：2013-02-24T02:21:11.007
> 
> 标签：html, css

这是我第一次在这里发帖。很长一段时间的粉丝每隔一段时间就会来这里，希望有人能引导我走向正确的方向。我有一个无法移动到任何地方的图像文件。图像文件位于一个 div 中，该 div 位于我想要定位到 div 右下角的标签中。我使用了上边距和左边距无济于事，它总是坐在同一个位置。下面是与问题区域相关的代码。Html 部分后跟 css 部分。

```
 <div id = "container">
    <section id = "content">
        <article>
            <div id ="monkey_img"><img src="images/cartoon-monkey_1.png" width="250" height="252"></div>

        </article>
    </section>
    <aside id="sidebar">
      <p>Monkey</p>
    </aside>
</div>
    <!--css-->
    #content{
width: 600px;
height: 475px;
background-color: #FFF;
border-style: solid;
border-width: 2px;
float:left;
margin-right:30px;
}
    #monkey_img{
width:500px;
height:425px;
margin-top:100px;
margin-left:100px;
display:block;
}
    #container{
width:1000px;
height:550px;
margin:auto;
margin-top:65px;
}
    #container p{
padding:15px;

}
    #sidebar{
width 275px;
height:475px;
background-color:#FFF;
border-style:solid;
border-width: 2px;
margin-left:30px;
overflow:auto;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T02:32:33.493

您可能希望`{position: relative}`在父级以及`{position: absolute}`您要移动的元素上进行设置。然后，您可以根据需要设置上/右/下/左。

[http://jsfiddle.net/XemPh/2/](http://jsfiddle.net/XemPh/2/)

```
#monkey_img {
    width:200px;
    height:200px;
    background-color: #eee;
    position: relative;
}
#monkey_img img {
    position: absolute;
    right: 0;
    bottom: 0;
}

<div id="monkey_img">
    <img src="http://placehold.it/100x100" />
</div> 
```

在本例中，我将样式直接应用于图像，但您也可以执行图像的包装器和该元素的父元素。

# android - 如何在横向模式下启动启动画面？

> ID：15048023
> 
> 赞同：1
> 
> 时间：2013-02-24T02:23:04.977
> 
> 标签：android, landscape, splash-screen

我正在尝试在 Landscape 中启动我的应用程序。在我的应用程序中，我使用的是初始屏幕图像 (480 X 320)。我在网上查看过，但没有找到问题的答案，我的 Splash 图像一直以纵向模式出现。

任何人都可以建议如何在横向模式下实现启动画面吗？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T02:36:05.797

在您拥有“启动画面”的活动中：

```
setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE); 
```

顺便说一句，这似乎是一个非常糟糕的做法。此外，除非你有一个像游戏这样的应用程序，在启动应用程序时会加载大量数据，否则应尽可能避免启动画面。您希望用户尽快启动并运行应用程序。

# asp.net - EF add-migration 生成空迁移

> ID：15048025
> 
> 赞同：11
> 
> 时间：2013-02-24T02:23:42.977
> 
> 标签：asp.net, asp.net-mvc, entity-framework, migration

我在模型中添加了一个新表：

```
public DbSet<ReturnedTransactions> ReturnedTransactions { get; set; } 
```

我希望我的迁移为我生成该表，所以我这样做了：

```
PM> Add-migration returnedTransactions 
```

它产生了

```
public partial class returnedTransactions : DbMigration
{
    public override void Up()
    {
    }

    public override void Down()
    {
    }
} 
```

我如何强制这个东西为我生成正确的代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-10-16T15:19:35.667

当我没有将我的 DBSet 实体添加到与迁移配置文件关联的 DbContext 类时，我看到了这种情况。

虽然，这里可能并非如此，因为我们可以看到 Asker 包含以下行：

```
public DbSet<ReturnedTransactions> ReturnedTransactions { get; set; } 
```

尽管如此，当他们返回一个空的迁移类时，这是一个应该检查的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-17T13:07:31.423

清理`_MigrationHistory`桌子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-10T17:15:42.010

我刚遇到这个问题，我在 Add-Migration 命令中添加了 -Force 并且它起作用了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-12-17T19:03:54.510

这听起来可能很愚蠢，但是您是否安装了所有需要的软件包？我遇到了同样的问题，结果发现缺少一个包，我认为是 Microsoft.AspNetCore 或 Mircosoft.AspNetMVC。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-02T23:16:39.690

除了上面的答案，对我来说，我必须`Microsoft.AspNetCore.Identity.EntityFrameworkCore`通过 NuGet 在另一个项目中添加，该项目与包含数据库上下文的项目连接。

# ruby-on-rails - rails 模型动作检查

> ID：15048026
> 
> 赞同：0
> 
> 时间：2013-02-24T02:23:46.043
> 
> 标签：ruby-on-rails

我有**优惠券模型**，在这个模型文件中我有一个**合适的_for_use 方法。****如果优惠券.suitable_for_use == true** ，我想列出优惠券。有什么捷径可以做到吗？我写了这段代码，但它不起作用。

```
@coupons = []
coupons = Coupon.all.each do |coupon|
  if coupon.suitable_for_use
    @coupons << coupon
  end
end
@coupons = coupons 
```

**适合使用的方法**

```
def suitable_for_use
    result = true
    if is_used?
      result = false
    elsif self.start > Time.now.in_time_zone 
      result = false
    elsif self.end < Time.now.in_time_zone
      result = false
    end
    return result
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T02:33:08.150

问题是您两次分配给@coupons。from 的返回值`each`是它被赋予的集合。因此，您的最后一行重新分配了返回的原始优惠券集`Coupon.all`。

```
@coupons = Coupon.all.select(&:suitable_for_use) 
```

如果您不确定那是做什么的，这里是扩展版本。

```
@coupons = Coupon.all.select {|coupon| coupon.suitable_for_select} 
```

基本上， select 需要一个它将迭代的块，如果该块返回 true，那么它将将该元素添加到返回的集合中。所以任何返回 false 的优惠券都不会被 select 返回。

&:suitable_for_use 被称为 proc 的符号。它从字面上扩展到第二行中的块，并且在 ruby​​ 单行中很常见。

# python - 将列表列表中的元组字符串转换为 Python 中的列表项

> ID：15048028
> 
> 赞同：0
> 
> 时间：2013-02-24T02:24:05.573
> 
> 标签：python, eval, abstract-syntax-tree

List`l`包含由两种类型的列表组成的项目，第一种是由字符串组成的可接受列表，第二种由包含字符串的元组字符串组成。第二种类型的所有列表都具有相同的长度 - 2。我想将第二种类型的所有列表转换为与第一种类型相同的约定，如下所示（`l2`是更新的列表）。

编辑：我应该澄清我正在处理的实际列表不止两个项目，所以我需要一个循环函数来适应这个。

```
l = [["('N', '', 'SHOWERS', '', 'RD', '11734', '11734', '', '')", "('61060', '61060')"], ['', '', 'NORA', '', 'RD', '10301', '10999', '10400', '10998', '61089', '61089']]

l2 = [['N', '', 'SHOWERS', '', 'RD', '11734', '11734', '', '', '61060', '61060'], ['', '', 'NORA', '', 'RD', '10301', '10999', '10400', '10998', '61089', '61089']] 
```

以下仅让我到目前为止：

```
from csv import reader
from cStringIO import StringIO

l2 = []

for i in l:
    if len(i) == 2:
        filestr = StringIO(i[0] + i[1])
        csv_reader = reader(filestr, quotechar="'")
        for t in csv_reader:
            l2.append(t)
    else:
        l2.append(i) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T02:50:41.920

您可以使用 ast：

```
>>> import ast
>>> l = [["('N', '', 'SHOWERS', '', 'RD', '11734', '11734', '', '')", "('61060', '61060')"], ['', '', 'NORA', '', 'RD', '10301', '10999', '10400', '10998', '61089', '61089']]
>>> l2=[e for e in ast.literal_eval(l[0][0])]
>>> l2+=[e for e in ast.literal_eval(l[0][1])]
>>> l2=[l2]
>>> l2.append(l[1])

>>> l2
[['N', '', 'SHOWERS', '', 'RD', '11734', '11734', '', '', '61060', '61060'], ['', '', 'NORA', '', 'RD', '10301', '10999', '10400', '10998', '61089', '61089']] 
```

如您所知，`eval`存在一些真正的安全问题。`ast`非常安全，因为它只能生成 Python 基础数据结构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T02:44:13.303

当*且仅当*您信任输入时，您可以评估它：

```
l2 = eval(l[0][0]) 
```

我不完全理解整个输入的结构，所以我无法帮助你遍历所有输入。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T03:11:08.517

这不是 csv 问题，因为您没有 csv。（事实上​​，你让我困惑了一段时间，因为我试图想象 csv 文件的样子！）

1.  建立一个列表是否需要标准化的“测试”（`is_tuple_string_row`下面的函数）。
2.  用于[`ast.literal_eval`](http://docs.python.org/2/library/ast.html#ast.literal_eval)安全地将元组字符串转换为实际元组。
3.  用于[`chain.from_iterable`](http://docs.python.org/2/library/itertools.html#itertools.chain.from_iterable)将所有元组组合成一个序列。

下面的完整代码实现为生成器`normalized_list()`。

```
l = [["('N', '', 'SHOWERS', '', 'RD', '11734', '11734', '', '')", "('61060', '61060')"], ['', '', 'NORA', '', 'RD', '10301', '10999', '10400', '10998', '61089', '61089']]

l2 = [['N', '', 'SHOWERS', '', 'RD', '11734', '11734', '', '', '61060', '61060'], ['', '', 'NORA', '', 'RD', '10301', '10999', '10400', '10998', '61089', '61089']]

import ast
from itertools import imap, chain

def is_tuple_string_row(L):
    """Return whether list L is a list of strings containing tuples"""
    return len(L)==2 and all(s.startswith("('") and s.endswith("')") for s in L)

def normalized_list(L):
    """Yield lists in sequence L as lists of strings

    Normalizes a list of strings of tuples down to a simple list of strings
    """
    for item in L:
        if is_tuple_string_row(item):
            yield list(chain.from_iterable(imap(ast.literal_eval, item)))
        else:
            yield item

# You can iterate efficiently
for item in normalized_list(l):
    print item

# or you can put the whole thing to a single new list
aslist = list(normalized_list(l))

# verify results
assert aslist == l2 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-24T02:51:11.467

我建议使用列表而不是元组，然后在必要时索引列表/子列表/和列表的子列表以实现您想要的。

另一个想法是制作一个你想要的结构的类。放置切片列表的方法。看来您希望元组中的前 9 个项目，以及单独的元组中的最后两个项目。这也是将它们分开的好方法。

# c# - 没有服务定位器的 IFilterProvider 注入

> ID：15048030
> 
> 赞同：2
> 
> 时间：2013-02-24T02:24:53.087
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4, dependency-injection, asp.net-mvc-filters

我的目标：在 DI 提供 IFilterProvider 的情况下注入 IFilterProvider，但默认回退到全局 FilterProviders.Providers.GetFilters() 方法。

Internet 上有很多资源（包括“官方”Microsoft 资源）演示了如何将 IFilterProvider 接口注入到一个类中。但是，它们都使用服务定位器反模式（根据 Mark Seeman）来执行此操作。这是我找到的列表：

1.  [http://msdn.microsoft.com/en-us/vs2010trainingcourse_aspnetmvcdependencyinjection_topic4.aspx](http://msdn.microsoft.com/en-us/vs2010trainingcourse_aspnetmvcdependencyinjection_topic4.aspx)
2.  [http://merbla.blogspot.com/2011/02/ifilterprovider-using-autofac-for-mvc-3.html](http://merbla.blogspot.com/2011/02/ifilterprovider-using-autofac-for-mvc-3.html)
3.  [http://thecodinghumanist.com/blog/archives/2011/1/27/structuremap-action-filters-and-dependency-injection-in-asp-net-mvc-3](http://thecodinghumanist.com/blog/archives/2011/1/27/structuremap-action-filters-and-dependency-injection-in-asp-net-mvc-3)
4.  [IFilterProvider 和关注点分离](https://stackoverflow.com/questions/10708565/asp-net-mvc-ifilterprovider-and-separation-of-concerns)

那么这些方法有什么问题呢？它们都将 DI 容器注入到目标类中，而不是相反。如果您在类中看到诸如 container.Resolve() 之类的内容，那么您并没有将对象生命周期的控制权交给 DI 容器，而这正是控制反转的真正意义所在。

此外，尝试创建回退到全局 FilterProviders.Providers 实例的问题在于，尽管它与 IFilterProvider 接口具有相同的签名，但它实际上并未实现该接口。那么如何将全局静态成员作为逻辑默认值注入，并且仍然允许使用 DI 覆盖它呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T02:24:53.087

基于返回全局 FilterProviders.Providers.GetFilters() 结果的 IFilterProvider 创建一个包装类，如下所示：

```
public class FilterProvider
    : IFilterProvider
{
    #region IFilterProvider Members

    public IEnumerable<Filter> GetFilters(ControllerContext controllerContext, ActionDescriptor actionDescriptor)
    {
        return FilterProviders.Providers.GetFilters(controllerContext, actionDescriptor);
    }

    #endregion
} 
```

然后，调整需要依赖项的类中的构造函数。

```
public class MyBusinessClass
    : IMyBusinessClass
{
    public MyBusinessClass(
        IFilterProvider filterProvider
        )
    {
        if (filterProvider == null)
            throw new ArgumentNullException("filterProvider");
        this.filterProvider = filterProvider;
    }
    protected readonly IFilterProvider filterProvider;

    public IEnumerable<AuthorizeAttribute> GetAuthorizeAttributes(ControllerContext controllerContext, ActionDescriptor actionDescriptor)
    {
        var filters = filterProvider.GetFilters(controllerContext, actionDescriptor);

        return filters
                .Where(f => typeof(AuthorizeAttribute).IsAssignableFrom(f.Instance.GetType()))
                .Select(f => f.Instance as AuthorizeAttribute);
    }
} 
```

接下来，将您的 DI 容器配置为使用 FilterProvider 具体类型作为默认值。

```
container.Configure(x => x
    .For<IFilterProvider>()
    .Use<FilterProvider>()
); 
```

如果您需要覆盖默认值并提供自己的 IFilterProvider，现在只需基于 IFilterProvider 创建一个新的具体类型并交换在 DI 容器中注册的内容。

```
//container.Configure(x => x
//    .For<IFilterProvider>()
//    .Use<FilterProvider>()
//);

container.Configure(x => x
    .For<IFilterProvider>()
    .Use<NewFilterProvider>()
); 
```

最重要的是，这种模式中的任何地方都没有服务定位器。

# javascript - 使用从函数外部 ajax 请求内部的点击处理程序中接收的值

> ID：15048033
> 
> 赞同：0
> 
> 时间：2013-02-24T02:25:27.600
> 
> 标签：javascript, jquery

有人建议我尝试不用代码来解释我的问题，所以就这样吧。我有一个网页，其中列出了一系列带有项目名称的链接，如[jsfiddle 所示](http://jsfiddle.net/Fz5ZB/1/)。我接下来要做的是在用户单击项目链接后显示第二个网页。第二个网页需要像[第二个页面 jsfiddle一样发出第二个 ajax 请求](http://jsfiddle.net/KS3dD/)获取新信息以显示该特定项目的项目摘要、引文和名称。杀死我的部分是第二页的 ajax 请求当前在 url 中有一个数字 504216b6e4b04b508bfd333b 这意味着它只会将该项目用于第二页来显示摘要、引用和名称。我需要那个 ajax 请求来获取任何 id 号的变量。然而，为了使问题更加复杂，ID 号来自用户单击第一页上的链接。所以我的问题是在单击链接后获取 id 的值并将其放入下一页的 ajax 请求中。我已经完成了页面将显示的所有工作，但我无法从一个文件到下一个文件中获取值。任何帮助表示赞赏，谢谢。

不放一些代码就不会让我保存，所以这只是最基本的，

```
// The ajax request is in another file but it works good
promise.done(function (json) {
    // Make some links

    // Which link was clicked? I need to see some id please
    $('#sbItems a').on('click', function (e) {  
        e.preventDefault();                      

        // Do stuff to find the id for the link the user clicked

        // Assign the id to a variable that I can use in the next ajax request
        // that is called in a seperate file
        testId = json.items[itemId].id;

    }); // END Click event  

}).fail(function() {
    alert("Ajax call failed!");
});

second file has,

// Need to somehow, someway get the testId variable that holds the id
// into this file

var url = 'https://www.sciencebase.gov/catalog/item/ + THE TESTID + ?format=
jsonp&fields=relationships,title,body,contacts';    
$.ajax({
    type: 'GET',
    url: url,
    jsonpCallback: 'getSBJSON',
    contentType: "application/json",
    dataType: 'jsonp',
    complete: onComplete,
    success: function(json) {  
        // Display some stuff based off this url
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T02:41:34.080

如果您尝试在单击将您带到第二页的链接时从第一页获取一个数字并进入第二页，以便您可以在第二页 ajax 调用中使用它，那么有几个选项：

1.  在请求第二页作为搜索参数时，将值附加到 URL 上，如下所示：[http](http://www.sample.com/mypage?id=504216b6e4b04b508bfd333b) ://www.sample.com/mypage?id=504216b6e4b04b508bfd333b 。在第二页中，从 URL 中解析出该 id 值并将其用于您的 ajax 调用。这是这三个选项中最安全的，因为即使用户打开多个窗口并点击您网站中的不同页面，它也能正常工作。

2.  单击第一页中的链接时，将 id 值存储为 cookie。在第二个页面中，从 cookie 中检索 id。

3.  与选项 2 相同，但将值存储在本地存储中。

# matlab - 线性双方程系统，两个变量的二阶导数

> ID：15048034
> 
> 赞同：1
> 
> 时间：2013-02-24T02:25:31.203
> 
> 标签：matlab, differential-equations, dsolve

如果这被认为是重新发布，请原谅我，但我被告知我可能给出了错误的格式。

我正在尝试求解两个线性二阶微分方程。我想将它们分解为单阶方程，但我看不出两个变量在这两个问题中如何具有二阶导数。

```
(m*a)u” + (I + m*a^2 )θ” + (d*a^2 )θ’ + (K - m*g*a)θ = 0

(M + m)u” + (m*a)θ” = -F 
```

我对 dsolve 和 ode45 都做了一些努力

这是我的 dsolve 代码：

```
M =70-5.876;
m =5.876;
a =(((0.05)^2)+((0.13^2))^0.5);
IG = 0.0233;
d = 500;
k = 500;
g = 9.81;
f = 628;

%y is u, x is theta

syms M m a IG d k g y(t) x(t)
Dy = diff(y);
Dx = diff(x);

eqn1 = (M+m)*diff(y,2) + M*diff(x,2) == -f;

eqn2 = m*a*diff(y,2) + (IG + m*a*a)*diff(x,2) + (d*a*a)*diff(x) + (k - m*g*a)*x == 0;

t=0:0.01:10;

z = dsolve(eqn1,eqn2, y(0)==0, Dy(0)==0, x(0)==0, Dx(0)==0, 't');

z.x
z.y 
```

它确实给了我非常*非常*长的方程式，我似乎无法根据时间绘制，我也不知道为什么。如果有人能给我建议，我将不胜感激。感谢您的关注！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T06:13:39.293

在这种情况下`u"`，可以用简单的代数操作代替一般方程。得到的方程将是这样的：

方程1：`K1*θ” + K2*θ’ + K3*θ = -F`

`u`可以直接用方程1的解法求解。尽量避免将 u 置于等式中。如果必须，您需要重写方程以便用 θ 的三次微分求解。

# c - 使树水平生长，对当前节点应用修改

> ID：15048037
> 
> 赞同：1
> 
> 时间：2013-02-24T02:26:21.423
> 
> 标签：c, recursion, tree

给定一个输入，我正在尝试构建一个应该水平生长的树，将转换应用于该输入和随之而来的孩子。

例如，给定输入“aab”和两个转换规则，例如：

```
ab -> bba
b -> ba 
```

需要构建这样的树：

![在此处输入图像描述](../Images/bc84274e06c53b7b8df8cc5b17b9e642.png)

我已经编写了代码，但是按照我的方式，我的树是垂直工作的，我不希望这样。我需要它水平工作，但我看不到我将在哪里/如何编写递归。这是我现在所拥有的：

```
 #include <string.h>
#include <stddef.h>
#include <stdio.h>
#include <stdlib.h>

typedef struct t_string_node {
    struct t_string_node *next;
    char *value;
} string_node;

typedef struct t_transformation_rule {
    struct t_transformation_rule *next;
    char *needle;
    char *replacement;
} transformation_rule;

void findTransformations(char *origin, string_node **transformations, char *needle, char *replacement)
{
    char *str = origin; 

    for (char *p = str; *p != '\0'; p++) {
        if (strncmp(p, needle, strlen(needle)) == 0) {
            char *str_ = malloc(strlen(str)+1+strlen(replacement)-strlen(needle));
            strcpy(str_, str);
            char *p_ = p - str + str_;
            memmove(p_+strlen(replacement), p_+strlen(needle), strlen(p_)+1-strlen(replacement));
            memcpy(p_, replacement, strlen(replacement));
            //Create new string node.
            string_node *transformation; 
            transformation = malloc(sizeof(string_node));
            transformation->value = str_;
            transformation->next = NULL;

            while (*transformations != NULL) {
                transformations = &(*transformations)->next;
            }
            *transformations = transformation;
        }
    }
}

int hasTransformation(char *origin, char *target, transformation_rule *list_of_rules)
{
    int level;
    level = 0;
    int found;

    string_node *current;
    current = malloc(sizeof(string_node));
    current->value = origin;
    current->next = NULL;

    if(list_of_rules == NULL) {
        if (strcmp(origin, target) == 0) {
            printf("Solution in 0 steps");
            return 1;
        } else {
            printf("No solution");
            return 0;
        }
    }

    string_node *transformations;
    transformations = NULL;

    while (current != NULL) {
      findTransformations(current->value, target, &transformations, list_of_rules->needle, list_of_rules->replacement);
      findTransformations(current->value, &transformations, list_of_rules->next->needle, list_of_rules->next->replacement);
      current = current->next;
    }

    while (transformations != NULL) {
        printf("%s \n", transformations->value);
        transformations = transformations->next;
    }

    return 1;
}

void main()
{
  char *input = "aab";
  char *target = "bababab";
  char *needle = "ab";
  char *replacement = "bba";

  transformation_rule *list_of_rules;
  list_of_rules = NULL;
  list_of_rules = malloc(sizeof(transformation_rule));

  list_of_rules->needle = "ab";
  list_of_rules->replacement = "bba";
  list_of_rules->next = NULL;

  //Create another rule
  transformation_rule *new_rule;
  new_rule = malloc(sizeof(transformation_rule));
  new_rule->needle = "b";
  new_rule->replacement = "ba";
  new_rule->next = NULL;
  list_of_rules->next = new_rule;

  int has_trans;

  has_trans = hasTransformation(input, target, list_of_rules);
} 
```

任何人都可以帮助我意识到我将如何做到这一点，以便树水平而不是垂直生长？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T11:03:37.290

[@All：这个问题是这个](https://stackoverflow.com/questions/15033832/find-the-minimum-number-of-needed-transformations-given-input-and-target-string/15033902#15033902)问题的延续（即使使用我制作的图片）。

现在是深度优先与广度优先问题的答案：为此，您根本不应该构建树数据结构。你只需要关心***当前****层*和***下****一层*。

因此，您只需为每个创建一个列表。一开始，您将起始字符串放在***当前***字符串中，而***下一个***字符串为空。然后你看到你可以推导`abba`，`aaba`所以你把它们放到下一个。然后你*清除* ***current***并将所有内容从***next***放入***current***然后 clear ***next***。

您不断重复此操作，直到您注意到您正在将目标字符串添加到***下一个***，然后您可以停止搜索。

*并且*：正如我在上面引用的答案中所说：这可能不会终止并且无法确定它是否最终会终止（Halting-problem），但是在*特定*情况下有许多启发式方法来检测非终止。

**编辑**：好的，这是代码！

```
#include "stdlib.h"
#include "stdio.h"
#include "string.h"
struct list_s {
    struct list_s* next;
    char* entry;
};
char* paste(char* begin, int len1, char* mid, int len2, char* end, int len3) {
    char* a = malloc(len1+len2+len3+1);
    memcpy(a, begin, len1);
    memcpy(a+len1, mid, len2);
    memcpy(a+len1+len2, end, len3);
    a[len1+len2+len3] = '\0';
    return a;
}
void push(struct list_s** top, char* p) {
    struct list_s* l = malloc(sizeof(struct list_s));
    l->next = *top;
    l->entry = p;
    *top = l;
}
char* pop(struct list_s** top) {
    char* res = (*top)->entry;
    struct list_s* next = (*top)->next;
    free(*top);
    *top = next;
    return res;
}
int main() {
    char* input = "aab";
    // char* target = "bbabaa"; // 11th try
    char* target = "abbaa";     // 5th try
    // char* target = "bababab";// has no solution
    #define cRules 2
    char* from[cRules] = {"ab", "b"}; // ab->bba and b->ba
    char* to[cRules] = {"bba", "ba"};
    struct list_s* current = 0;
    struct list_s* nextLayer = 0;
    char* inputAlloc = malloc(strlen(input));
    strcpy(inputAlloc, input);
    push(&current, inputAlloc);
    int counter = 0;
    while(current) { // = while not empty
        char* cur = pop(&current);
        int lenCur = strlen(cur);
        printf("%s:\n", cur);
        int iRule=0; for(; iRule<cRules; ++iRule) { // for each rule
            char* pos = cur;
            for(;;) { // apply the rule wherever it fits
                pos = strstr(pos, from[iRule]);
                if(!pos) break;
                char* mod = paste(
                    cur, pos-cur, 
                    to[iRule], strlen(to[iRule]), 
                    pos+strlen(from[iRule]), 
                    cur+lenCur-(pos+strlen(from[iRule])) );
                printf("->%s\n", mod);
                if(!strcmp(mod, target)) {
                    printf("DONE\n");
                    return 0;
                }
                push(&nextLayer, mod);
                ++pos;
            }
        }
        free(cur);
        if(!current) { // next round!
            current = nextLayer;
            nextLayer = 0;
        }
        ++counter;
        // here you can add some of the fail-conditions we talked about
        if(counter==100) {
            printf("heuristic: no solution\n");
            return 0;
        }
    }
    return 0;
} 
```

# zend-framework - 我应该将 index.php 放在 Zend Framework 的公用文件夹之外吗？

> ID：15048040
> 
> 赞同：1
> 
> 时间：2013-02-24T02:26:47.227
> 
> 标签：zend-framework, frameworks

我在共享主机服务器上，我将把 zend 应用程序放在那里，但我不能触摸 httpd.conf 文件来创建一个虚拟主机，因为它是共享主机，他们不允许我这样做。

如果我将 index.php 文件和 .htaccess 保存在公用文件夹中，我必须创建一个虚拟主机以从 url 隐藏公众。

因此，尽管我可以将公共文件夹文件（index.php、.htaccess）放在站点根目录中，因此我不需要为此创建虚拟服务器，并且我的站点无需在 url 中公开即可访问。

如果我将 index.php 文件从公用文件夹中取出，有什么东西会使我的网站不安全吗？

***我英语不好，很抱歉。我从其他帖子中复制的东西来描述我想要解释的东西。***

我已经尝试过这种方式，但它仍然不起作用，当我输入**localhost/public/zend/**时，它返回“找不到对象”

目录结构：

```
zend/
    application/
    library/
    public/
           index.php
           .htaccess
.htaccess 
```

公共文件夹中 .htaccess 的内容：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L] 
```

根文件夹中 .htaccess 的内容：

```
SetEnv APPLICATION_ENV development

RewriteEngine On
RewriteRule ^\.htaccess$ - [F]
RewriteCond %{REQUEST_URI} =""
RewriteRule ^.*$ /public/index.php [NC,L]
RewriteCond %{REQUEST_URI} !^/public/.*$
RewriteRule ^(.*)$ /public/$1
RewriteCond %{REQUEST_FILENAME} -f
RewriteRule ^.*$ - [NC,L]
RewriteRule ^public/.*$ /public/index.php [NC,L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T03:16:39.453

“public”文件夹是 Zend Framework 的一个重要的关键特性，因为它限制 Apache 只能读取该目录中的文件。除了可通过 HTTP 访问的公用文件夹之外，您不应该拥有其他任何东西，并且移动索引文件会引入容易受到攻击的威胁。

看看[这个链接](http://www.alberton.info/zend_framework_mod_rewrite_shared_hosting.html)它可能会有所帮助。

如果您使用的是 Cpanel [，这](https://serverfault.com/questions/337991/how-do-i-avoid-public-folder-name-from-zend-framework-project-url)可能会很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T07:35:07.523

可以在 Apache 的 htdocs 目录中拥有 .htaccess 和 index.php 而不会出现任何问题。

有一个名为“public”的文件夹不是强制性的，只是将公共部分（公共目录（和应用程序部分（项目文件的其余部分））放在不同的目录中。应用程序部分不能从用户的浏览器访问（所以放置它在 Apache 文档根目录之外）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T11:28:16.860

有很多方法可以让 ZF 工作，而无需将虚拟主机映射到`public`文件夹。

[这个答案](https://stackoverflow.com/questions/3753459/zend-framework-deployment-in-server)突出了其中许多。

就个人而言，当我被共享主机困住并且无法重新映射时，我倾向于执行以下操作：

1.  将公共文件夹的内容（index.php、.htaccess、css、js、img 等公共资源）保存在主机提供的文档根目录中，并且

2.  将应用程序的其余部分下推到一个文件夹`_zf`中，就像我在文件中添加`Deny All`指令一样`.htaccess`。然后我将`APPLICATION_PATH`设置修改`index.php`为指向`_zf/application`.

而已。

完整的细节[在这里](http://www.papayasoft.com/2010/05/08/zend-framework-shared-hosting/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-24T02:32:31.467

那么在这种情况下你将无法访问 index.php。如果你不能把东西放在 web 根目录中，那么最好的办法是将 ZF 配置为使用一个文件夹而不是`public`你的 doc 根目录，这样你的布局可能如下所示：

```
application/
library/
modules/
public_html/
  index.php
  js/
  css/
  images/ 
```

# sql - 找到包含外键的记录

> ID：15048046
> 
> 赞同：2
> 
> 时间：2013-02-24T02:28:02.297
> 
> 标签：sql, join

假设我有两张表，Product 和 Sale，Sale 持有 Product 的外键，所以它是一对多的关系，Product as one 和 Sale as many。如何编写 sql 来获取销售产品？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T02:29:20.417

[`JOIN`](http://en.wikipedia.org/wiki/Join_%28SQL%29)两张表：

```
SELECT
  *
FROM Product AS p
INNER JOIN Sale AS s ON s.ProductId = p.ProductId
WHERE s.SaleId = ... 
```

然后，您可以指定一个`WHERE`子句来过滤`Sale`表，以及`SELECT`要从两个表中选择的任何列。

您可能需要查看不同类型的`JOIN`s：

*   [**SQL 连接的可视化解释**](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)。

# java - 在 android 中使用 SAXParser 访问 XML 中的子节点

> ID：15048047
> 
> 赞同：0
> 
> 时间：2013-02-24T02:28:04.793
> 
> 标签：java, android, xml, saxparser

我的 XML 树具有以下结构：

```
<building id="5" name="Barracks" hp="2000" >
    <cost metal="100" wood = "300"></cost>
    <unit id="1" name="Swordsman" hp="40" attack="3"/>
    <tech id="1" name="Research Heavy Swordsman"/>
</building> 
```

这是我用来访问它的代码：

```
public void startElement(String uri, String localName,String qName, 
                    Attributes attributes) throws SAXException {
            int civId=0, id=0;
            if(qName.equalsIgnoreCase("building"))
            {
                inBuilding = true;
                building = true;
                //Fetching the ID of TownCenter, we use it as a reference to fetch the child nodes.
                id = Integer.parseInt(attributes.getValue("id"));
                if(id==5)
                {
                    XMLfetch.put("id", attributes.getValue("id"));
                    XMLfetch.put("name", attributes.getValue("name"));
                    XMLfetch.put("hp", attributes.getValue("hp"));
                    ......
                }               
            }
            if(inBuilding && id==5){ //<----- Condition which matters
                if(qName.equalsIgnoreCase("cost")){

                    Log.i("resources", "Wood "+attributes.getValue("wood"));
                    Log.i("resources", "MetaL "+attributes.getValue("metal"));

                    XMLfetch.put("costWood", attributes.getValue("wood"));
                    XMLfetch.put("costMetal", attributes.getValue("stone"));

                }               
            }
        }

        // END ELEMENT here     
                @Override
                 public void endElement(String uri, String localName, String qName) throws SAXException {

                    if(inBuilding)
                    {
                        if(qName.equalsIgnoreCase("building")) {
                              building=false;
                              //inBuilding=false;
                              }
                        if(qName.equalsIgnoreCase("cost")){
                            inBuilding=false;
                        }
                    }

                 } 
```

现在的问题是，我无法进入标签。我无法访问它的属性，什么都没有。如果我从我提到的行中删除“id==5”的条件，代码会从整个树中获取所有成本值。但是，当我提出条件时，它什么也得不到！:( ...

请帮忙。多谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T22:06:04.350

解决了！我在错误的地方声明了 inBuilding 变量。:( .... 因此，变量被重写，我无法检测到我在哪里。感谢所有阅读它并试图给出解决方案的人。:) civId 和 id 变量在 startElement( )，这意味着它们每次都会被重新编写......因此它们是无用的。它们需要在不会被重写的任何地方声明。谢谢 ianhanniballake

# php - Arduino 通讯停止工作

> ID：15048048
> 
> 赞同：1
> 
> 时间：2013-02-24T02:28:19.137
> 
> 标签：php, javascript, html, ajax, arduino

我正在运行一个带有 Apache 2.2.22 和 PHP 5.3.13的小型[WAMP服务器。](http://en.wikipedia.org/wiki/WAMP)我的问题是我的 JavaScript/Ajax 代码不再发送`$POST`到我的外部 PHP 文件，该文件应该通过串行将消息发送到我的 Arduino。

它工作得很好，然后我只是更改了输入的值，即我正在发送的“消息”，突然它不开心了。我以前遇到过这个问题，所以我只是将值改回原来的值，但现在即使这样也行不通。我试图清除我所有的 Web 历史记录，重新启动 WAMP 服务器，甚至重新启动我的计算机，但都没有成功。

无论如何，这是我的代码：

### HTML

```
 <div id="Room1Controls">
        <div id="ControlButton" class="Control1"><a>B
            A
            C
            K</a></div>
        <div class="Room1SwitchContainer">
            <div id="LightsSwitchBox" class="SwitchBox">
            <h1>Lights</h1>
            <input type="checkbox" class="SwitchButton1" value="L11"><a class="SButton1">On</a></input>
            <input type="checkbox" class="SwitchButton2" value="L10"><a class="SButton2">Off</a></input>
        </div>
        <div id="DoorsSwitchBox" class="SwitchBox">
            <h1>Doors</h1>
            <input type="checkbox" class="SwitchButton3" value="D10"><a class="SButton3">Open</a></input>
            <input type="checkbox" class="SwitchButton4" value="D11"><a class="SButton4">Lock</a></input>
        </div>
        <div id="BlindsSwitchBox" class="SwitchBox">
            <h1>Blinds</h1>
            <input type="checkbox" class="SwitchButton5" value="B11"><a class="SButton5">Open</a></input>
            <input type="checkbox" class="SwitchButton6" value="B10"><a class="SButton6">Close</a></input>
        </div>
    </div>
</div> 
```

### JavaScript/Ajax

```
$(document).ready(function(){
    var value;
    $(".SButton1").click(function(){
        $(".SwitchButton1").trigger('click');
    });
    $(".SButton2").click(function(){
        $(".SwitchButton2").trigger('click');
    });
    $(".SButton3").click(function(){
        $(".SwitchButton3").trigger('click');
    });
    $(".SButton4").click(function(){
        $(".SwitchButton4").trigger('click');
    });
    $(".SButton5").click(function(){
        $(".SwitchButton5").trigger('click');
    });
    $(".SButton6").click(function(){
        $(".SwitchButton6").trigger('click');
    });
    $("#Room1Controls input").click(function(){
        value=$(this).val();
        $.post('Inc/Parts/arduino.php',{message:value});
    });
}); 
```

### PHP

```
<?php
    $message=$_POST['message'];

    if (isset($_POST['message'])) {
        require("php_serial.class.php");
        $serial = new phpSerial();
        $serial->deviceSet("COM3");
        exec('mode COM3 BAUD=96 PARITY=n DATA=8 STOP=1 xon=off octs=off rts=on');
        $serial->deviceOpen();
        if ($_POST['message'] == "L11") {
            $serial->sendMessage("L");
        } else if ($_POST['message'] == "L10") {
            $serial->sendMessage("l");
        } else if ($_POST['message'] == "D10") {
            $serial->sendMessage("D");
        } else if ($_POST['message'] == "D11") {
            $serial->sendMessage("d");
        } else if ($_POST['message'] == "B11") {
            $serial->sendMessage("B");
        } else if ($_POST['message'] == "B10") {
            $serial->sendMessage("b");
        }
        $serial->deviceClose();
    }
?> 
```

以及在 Arduino Uno 上运行的代码：

```
int ldr = 0;
int door = 13;
int blind = 12;
int led = 11;
int in = 0;

void setup() {
    pinMode(door, OUTPUT);
    pinMode(blind, OUTPUT);
    pinMode(led, OUTPUT);
    pinMode(ldr, INPUT);

    Serial.begin(9600);
}

void loop() {
    if (Serial.available() > 0) {
        in = Serial.read();
    }

    if (in == 'L')
    {
        int val = (analogRead(ldr));
        val = constrain(val, 150, 500);
        int LightLvl = map(val, 150, 500, 255, 0);
        analogWrite(led, LightLvl);
    }
    else
        if (in == 'l') (analogWrite(led, LOW));

    if (in == 'D')
    {
        digitalWrite(door, LOW);
    }
    else
        if (in == 'd') (digitalWrite(door, HIGH));

    if (in == 'B')
    {
      digitalWrite(blind, HIGH);
    }
    else
        if (in == 'b') (digitalWrite(blind, LOW));
} 
```

如果您能指出我的代码中的任何不一致或错误，那就太好了。另外，我是编码新手，所以如果您对如何改进我的代码以使其更高效或替代做事方式有任何建议，我将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T21:06:08.210

原来我的`.htaccess`文件是问题所在。我有一些脚本来隐藏扩展，但由于某种原因`$POST`不喜欢它。

这是`.htaccess`文件中的代码：

```
<IfModule mod_rewrite.c>
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s([^.]+)\.php [NC]
RewriteRule ^ %1 [R=301,L]
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule ^ %{REQUEST_URI}.php [L]
</IfModule> 
```

如果有人知道解决此问题的方法，如果您分享它，我会很高兴的；）

# linq - 需要帮助将 CTE 查询转换为 linq（非递归）

> ID：15048049
> 
> 赞同：2
> 
> 时间：2013-02-24T02:28:22.863
> 
> 标签：linq, common-table-expression

当您不知道其背后的数据时，不知道仅通过查看示例 SQL 查询来回答这个问题有多容易，但无论如何我都会尝试。这是一个 SQL 查询，用于列出源代码控制数据库中的文件——并排显示源文件路径及其最近签入的版本路径：

```
WITH [recentCheckins] AS (
    SELECT [SourceFileID], MAX([Version]) AS [LatestVersion]
    FROM [Checkin]
    GROUP BY [SourceFileID]     
) SELECT 
    [sf].[Path], -- current version
    [ci].[ArchivePath] -- most recent previous checkin
FROM 
    [recentCheckins] 
    INNER JOIN [SourceFile] [sf] ON [recentCheckins].[SourceFileID]=[sf].[ID]
    INNER JOIN [Checkin] [ci] ON 
        [recentCheckins].[SourceFileID]=[ci].[SourceFileID] AND
        [recentCheckins].[LatestVersion]=[ci].[Version] 
```

这是我能做的最多的事情：

```
var query2 =
    from latestCheckins in (
         from checkin in _project.Checkin
         group checkin by checkin.SourceFileID into results
         select new
         {
             SourceFileID = results.Key,
             LatestCheckinVersion = results.Max(s => s.Version)
         })
         join sourceFile in _project.SourceFile on latestCheckins.SourceFileID equals sourceFile.ID
         join checkins in _project.Checkin on // fails on this line, does not like join keyword here
             new { latestCheckins.SourceFileID, latestCheckins.LatestCheckinVersion }               
                  equals new { checkins.SourceFileID, checkins.Version }
             select new
             {
                Filename = sourceFile.Path,
                CheckinDate = checkins.DateCreated,
                TaskID = checkins.TaskID,
                Comments = checkins.Comments,
                Version = latestCheckins.LatestCheckinVersion.ToString(),
                NewFile = _project.GetSourceFilename(sourceFile.Path),
                OldFile = checkins.ArchivePath,
                ID = sourceFile.ID
             }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T19:09:43.817

正如上面 Gert 所建议的，通过将其分解为单独的查询来使其工作。

# ruby-on-rails - 如何为无模式控制器编写 CanCan rspec？

> ID：15048050
> 
> 赞同：0
> 
> 时间：2013-02-24T02:28:29.230
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec, cancan

我有一个模型 group.rb，然后是一个无模型的控制器 group_invitations.rb。

```
GroupInvitationsController

  before_filter :find_group_by_group_id
  before_filter :authenticate_user!
  before_filter :current_ability
  authorize_resource :class => false

  def current_ability
    @current_ability ||= Ability.new(current_user, @group)
  end 
```

当我为此编写 rspec 时：

```
 it "should be able to create" do
    ability = Ability.new(nil)
    ability.should be_able_to(:create, GroupInvitation.new)
  end 
```

rspec 然后错误：

NameError：未初始化的常量 GroupInvitation

如何设置 rspec 来测试这个无模式控制器？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T03:54:24.877

你需要打电话`@ability.should be_able_to(:create, :group_invitation)`。您可以在文档中阅读有关使用无模型控制器时授权的[内容](https://github.com/ryanb/cancan/wiki/Non-RESTful-Controllers)。

这是相关部分：

```
class ToolsController < ApplicationController
  authorize_resource :class => false
  def show
    # automatically calls authorize!(:show, :tool)
  end
end 
```

# python - 在 SQLAlchemy 中，为什么在映射任意选择时必须给 select 结构加上别名？

> ID：15048052
> 
> 赞同：4
> 
> 时间：2013-02-24T02:29:00.477
> 
> 标签：python, sql, sqlalchemy

我试图从[有关将模型映射到任意表](http://docs.sqlalchemy.org/en/rel_0_8/orm/mapper_config.html#mapping-a-class-against-arbitrary-selects)的文档中复制代码，但出现以下错误：

```
sqlalchemy.exc.InvalidRequestError: When mapping against a select() construct, map against an alias() of the construct instead.This because several databases don't allow a SELECT from a subquery that does not have an alias. 
```

这是我实现代码示例的方式。

```
from sqlalchemy import (
    select, func,
    Table, Column,
    Integer, ForeignKey,
    MetaData,
)

from sqlalchemy.ext.declarative import declarative_base

metadata = MetaData()
Base = declarative_base()

customers = Table('customer', metadata,
                  Column('id', Integer, primary_key=True),
                  )

orders = Table('order', metadata,
               Column('id', Integer, primary_key=True),
               Column('price', Integer),
               Column('customer_id', Integer, ForeignKey('customer.id')),
               )

subq = select([
            func.count(orders.c.id).label('order_count'),
            func.max(orders.c.price).label('highest_order'),
            orders.c.customer_id
            ]).group_by(orders.c.customer_id).alias()

customer_select = select([customers,subq]).\
            where(customers.c.id==subq.c.customer_id)

class Customer(Base):
    __table__ = customer_select 
```

我可以使用以下方法完成这项工作：

```
class Customer(Base):
    __table__ = customer_select.alias() 
```

不幸的是，这会在子选择中创建所有查询，这非常慢。

有没有办法将模型映射到任意选择？这是文档错误吗？文档中的代码示例对我不起作用（在 sqlalchemy==0.8.0b2 或 0.7.10 中）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-24T19:11:55.277

If a subquery is turning out to be "prohibitively slow" this probably means you're using MySQL, which as I've noted [elsewhere](https://stackoverflow.com/questions/14754994/why-is-sqlalchemy-count-much-slower-than-the-raw-query/14758255#comment20667269_14758255) has really unacceptable subquery performance.

The mapping of a select needs that statement to be parenthesized, basically, so that it's internal constructs don't leak outwards into the context in which it is used and so that the select() construct itself doesn't need to be mutated.

Consider if you were to map to a SELECT like this:

```
SELECT id, name FROM table WHERE id = 5 
```

now suppose you were to select from a mapping of this:

```
ma = aliased(Mapping)
query(Mapping).join(ma, Mapping.name == ma.name) 
```

without your mapped select being an alias, SQLAlchemy has to modify your select() in place, which means it has to dig into it and fully understand its geometry, which can be quite complex (consider if it has LIMIT, ORDER BY, GROUP BY, aggregates, etc.):

```
SELECT id, name FROM table 
 JOIN (SELECT id, name FROM table) as anon_1 ON table.name = anon_1.name 
 WHERE table.id = 5 
```

whereas, when it's self-contained, SQLAlchemy can remain ignorant of the structure of your select() and use it just like any other table:

```
SELECT id, name FROM (SELECT id, name FROM table WHERE id = 5) as a1 
JOIN (SELECT id, name FROM table WHERE id = 5) as a2 ON a1.name = a2.name 
```

In practice, mapping to a SELECT statement is a rare use case these days as the `Query` construct typically plenty flexible enough to do whatever pattern you need. Very early versions of SQLAlchemy featured the `mapper()` as the primary querying object, and internally we do make use of `mapper()`'s flexibility in this way (especially in joined inheritance), but the explicit approach isn't needed too often.

> Is this a documentation error--the code sample from the docs doesn't work for me (in sqlalchemy==0.8.0b2 or 0.7.10)

Thanks for pointing this out. I've corrected the example and also added a [huge note](http://docs.sqlalchemy.org/en/rel_0_8/orm/mapper_config.html#mapping-a-class-against-arbitrary-selects) discouraging the practice overall, as it doesn't have a lot of use (I know this because I never use it).

# ruby-on-rails - 使用 ruby on rails 为用户登录创建计数方法

> ID：15048057
> 
> 赞同：1
> 
> 时间：2013-02-24T02:29:42.577
> 
> 标签：ruby-on-rails, ruby, session, login, counter

我想要什么：用户登录他的帐户并自动更新他自己的计数器（@counter += 1）。

我是 Ruby 和 Rails 的新手，我正在使用 Rails 3.2.12。我阅读了《雄辩的 ruby​​》一书，搜索了有关此问题的 stackoverflow，并观看了 pragmaticstudio.com 的视频 ruby​​ 课程。在那个视频课程中，他们创建了一个这样的类：

```
class User < ActiveRecord::Base
  attr_accessible :name, :email, :password, :password_confirmation, :counter
  has_secure_password
  before_save { |user| user.email = email.downcase }
  before_save :create_remember_token

  def initialize(counter=0)
    @counter = counter
  end

  def w00t
    @counter += 15
  end

  private
    def create_remember_token
       self.remember_token = SecureRandom.urlsafe_base64
    end
end 
```

现在在我的应用程序中，用户登录是通过 SessionsController 解决的，我的问题来了，因为来自 User 模型的每个方法对于 SessionsController 来说都是“未知的”。

```
class SessionsController < ApplicationController
  def new
  end

  def create
    user = User.find_by_email(params[:session][:email].downcase)
    if user && user.authenticate(params[:session][:password])
      sign_in user
      redirect_back_or templates_path
    else
      flash.now[:error] = 'something went wrong.'
      render 'new'
    end
  end

  def destroy
    sign_out
    redirect_to root_url
  end
end 
```

这是我已经尝试过但不适用于我的解决方案的方法：我添加了

```
user.w00t 
```

在 SessionsController 中，上面的 1 行

```
sign_in user 
```

返回的错误是：“SessionsController 的未定义方法‘w00t’”。

我还尝试在 Sessions Helper 中编写一个方法：

```
def woot(template)
  template.counter += 1    
end 
```

然后我重新订购了我的 SessionsController 'create' 方法，如下所示：

```
def create
    template = Template.find_by_bosskey(params[:bession][:bosskey])
    if template
      woot template                  #that is my new line !
      tsign_in template
      redirect_back_or template
    else
      flash.now[:error] = 'something went wrong.'
      render 'new'
    end
  end 
```

有了这个我没有得到任何错误，但计数器仍然没有改变。我比以往任何时候都更加困惑。请告诉我在哪里放置该方法或如何为我的应用解决此问题，我迷路了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T03:17:14.467

您的计数器没有被增加，因为它没有被持久化到数据库中。您使用的实例变量仅对当前请求有效。一旦您重定向并重新加载页面，该对象就会与您的计数器一起丢失给垃圾收集器。

要使计数器持久化，您需要在用户上创建一个新列来保存计数器，然后您可以使用 Rails 提供的增量方法。

```
# create the migration

rails g migration add_sign_in_count_to_users sign_in_count:integer
rake db:migrate

# Then increment

class User < ActiveRecord::Base
  def w00t
    increment! :sign_in_count
  end
end 
```

[ActiveRecord::Persistence#increment！](http://api.rubyonrails.org/classes/ActiveRecord/Persistence.html#method-i-increment-21)

# c# - 更改为自定义字体 xaml (Windows Phone)

> ID：15048059
> 
> 赞同：1
> 
> 时间：2013-02-24T02:29:56.047
> 
> 标签：c#, windows-phone-7, xaml, fonts

我在一个名为 Font 的文件夹中有 ttf，我正在尝试使用将文本设置为字体

```
FontFamily="Font/compctab.ttf#Compacta Bd Bt" 
```

在我的另一个项目上它工作了，而在这个项目上它没有改变这里是我在我的项目上工作的东西

```
FontFamily="Fonts/ninjanaruto.ttf#Ninja Naruto" 
```

我什至将那个 ttf 放在文件夹中并复制了代码，但它仍然无法正常工作......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T10:37:54.250

您需要使用表达式混合并使用字体管理器添加手机。然后将字体设置为 BlendResource，然后可以使用

有关分步说明，请参阅之前的帖子

[http://www.markarteaga.com/custom-fonts-in-windows-phone-7-with-expression-blend/](http://www.markarteaga.com/custom-fonts-in-windows-phone-7-with-expression-blend/)

# c++ - LIBUSB 编译错误

> ID：15048061
> 
> 赞同：2
> 
> 时间：2013-02-24T02:30:30.787
> 
> 标签：c++, c, ubuntu, installation, libusb

我在 Ubuntu 上运行 c/c++ 并尝试编译以下代码

```
#include <cassert>
#include <cstdio>
#include <libusb-1.0/libusb.h>

int main() {
    libusb_context *context = NULL;
    libusb_device **list = NULL;
    int rc = 0;
    ssize_t count = 0;

    rc = libusb_init(&context);
    assert(rc == 0);

    count = libusb_get_device_list(context, &list);
    assert(count > 0);

    for (size_t idx = 0; idx < count; ++idx) {
        libusb_device *device = list[idx];
        libusb_device_descriptor desc = {0};

        rc = libusb_get_device_descriptor(device, &desc);
        assert(rc == 0);

        printf("Vendor:Device = %04x:%04x\n", desc.idVendor, desc.idProduct);
    }
} 
```

编译代码后出现以下错误。不知道我该怎么办？

```
/tmp/ccESLZ0k.o: In function `main':
libusbtest.cpp:(.text+0x2f): undefined reference to `libusb_init'
libusbtest.cpp:(.text+0x64): undefined reference to `libusb_get_device_list'
libusbtest.cpp:(.text+0xd4): undefined reference to `libusb_get_device_descriptor'
collect2: ld returned 1 exit status 
```

我是 Ubuntu、c/c++ 和 libusb 的新手用户，因此将不胜感激

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T02:34:18.493

这是一个*链接器*错误。

您需要告诉链接器 include `libusb`，其中包含这些引用的函数（例如`-lusb`）以及它的位置（例如`-L/usr/local/lib`）。实际值将取决于您的安装。

正如[Avidanborisov 的回答](https://stackoverflow.com/a/15051610/78845)所强调的那样，您可以使用[pkg-config](/questions/tagged/pkg-config "显示标记为“pkg-config”的问题")工具来确定链接器标志。在我的系统上，这看起来像：

```
% pkg-config --libs libusb-1.0                                    
-L/usr/local/Cellar/libusb/1.0.9/lib -lusb-1.0 
```

您可以将此信息直接提供给[gcc](/questions/tagged/gcc "显示标记为“gcc”的问题")：

```
% g++ libusbtest.cpp $(pkg-config --libs libusb-1.0) -o libusbtest 
```

假设一切按计划进行，您现在应该`libusbtest`在当前工作目录中有一个可执行文件。你可以像这样运行它：

```
% ./libusbtest                                                    
Vendor:Device = 05ac:8006
Vendor:Device = 05ac:8006
Vendor:Device = 05ac:8005
Vendor:Device = 05ac:8005
Vendor:Device = 05ac:850a
Vendor:Device = 05ac:023f
Vendor:Device = 05ac:8403 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T12:15:02.617

Use `pkg-config` to get the compiler flags needed for the library:

```
g++ libusbtest.cpp `pkg-config --libs libusb` -o libusbtest 
```

# php - 将 -WebKit-filter Sepia 值转换为 PHP GD Sepia

> ID：15048063
> 
> 赞同：2
> 
> 时间：2013-02-24T02:30:36.647
> 
> 标签：php, css, gd, imagefilter

使用 CSS3，您可以使用 -webkit-filter 设置棕褐色

例子：

```
-webkit-filter: sepia(55%); 
```

过滤器取一个介于 0% 和 100% 之间的值。

使用 PHP，我看到大多数人使用以下代码来应用棕褐色过滤器

```
 imagefilter($img,IMG_FILTER_COLORIZE,100,50,0); 
```

它接受 3 个值。

如何将 CSS Sepia 过滤器值转换为可用于使用 PHP GD 创建过滤器效果的值？

# javascript - 自动完成并打开新窗口

> ID：15048064
> 
> 赞同：0
> 
> 时间：2013-02-24T02:30:45.450
> 
> 标签：javascript, autocomplete

**目标**：用户在具有自动填充功能的文本框中输入一个项目，单击按钮后，他们将被带到第二个页面，该页面已经在表单中填写了其他相应的项目。

**问题**：自动填充有效，但在打开第二页时被擦除/清除（换句话说，表单是空白的。

**问题**：我怀疑我没有正确地将“表单自动填充”和“打开第二页”的操作与一个按钮相关联。有任何想法吗？

```
$("#nextbutton").click(function () {
    $("#favorite_appetizer").trigger("meals");
    window.location.href = 'dinner-ideas.html';
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-29T08:12:28.107

好吧，问题可能已经解决了，但是尝试将 $_GET 添加到 javascript href 中，例如：

```
window.location.href = '/index.php?first=1&second=2'; 
```

在您声明可以在第二个 php 页面中捕获的变量名称和值之后部分执行，例如：

```
$_GET['first'];
$_GET['second']; 
```

当然，您需要使用`.val()`or`.text()`等​​从表单元素中获取值。当然，这也有缺点，最适合用于数字和单词，但不适用于带有符号的文本。了解更多有关表单内容类型的信息会有所帮助，例如，如果要将其数据保存到数据库中，您可以使用 AJAX 半填充表单，然后通过查询从数据库中检索其数据。如果您只是过滤数据，您可以 URL`$_GET`表单元素的数据库 id，然后通过这些 id 在第二页中查询。同样，这取决于您要传递到第二页的表单中的数据。

# php - Codeigniter 中的模板插件

> ID：15048067
> 
> 赞同：1
> 
> 时间：2013-02-24T02:31:07.340
> 
> 标签：php, codeigniter

我一直在使用和研究 Collin Williams 模板插件（[http://williamsconcepts.com/ci/codeigniter/libraries/template/reference.html#manipulation](http://williamsconcepts.com/ci/codeigniter/libraries/template/reference.html#manipulation)），我已经在 CI 的论坛上发布了这个问题，但我认为最后一个帖子是去年的，也许它没有受到 Colllin 或 wat 的监控，但我想我只需要在这里发布，也许你们可以提供帮助。

CI论坛上的原始帖子

> 你好科林，
> 
> ```
> I’ve been studying your template plugin lately, as i was following your guide, 
> i came across this line of code
> 
> $data = array('name' => 'John Smith', 'birthdate' => '11/15/1950'); 
> $this->template->write_view('content', 'user/profile', $data, TRUE); 
> ```
> 
> 在视图文件中，例如 mymastertemplate.php，我如何访问 $data 数组，它是否必须是由第一个参数定义的 $content，这有点令人困惑。一个地区，还是按 $name 和 $birthdate？...因为它说 $content 将显示数据数组？它有点令人困惑。希望你能启发我。

基本上这就是我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T02:39:34.060

在`Template.php`库上我们可以看到 function `write_view()`。现在，专注于`$data = NULL`. 现在然后在 APPPATH.'views/'.$suggestion.'.php' 上找到一个现有数据文件，所以我认为这`$args[0]`应该是一个加载并破坏它的文件，而不是在`$data`.

```
function write_view($region, $view, $data = NULL, $overwrite = FALSE)
   {
      $args = func_get_args();

      // Get rid of non-views
      unset($args[0], $args[2], $args[3]);

      // Do we have more view suggestions?
      if (count($args) > 1)
      {
     foreach ($args as $suggestion)
     {
        if (file_exists(APPPATH .'views/'. $suggestion . EXT) or file_exists(APPPATH .'views/'. $suggestion))
        {
           // Just change the $view arg so the rest of our method works as normal
           $view = $suggestion;
           break;
        }
     }
      }

      $content = $this->CI->load->view($view, $data, TRUE);
      $this->write($region, $content, $overwrite);

   } 
```

以另一种方式，`$data`应该是数组，它将响应 Codeigniter 库上的 View 模板数据（CI 的标准视图`$this->CI->load->view(...)`：）

```
$data = array('name' => 'John Smith', 'birthdate' => '11/15/1950'); 
$this->template->write_view('content', 'user/profile', $data, TRUE); 
```

在模板文件 '/user/profile.php' 上用作示例：

HTML/PHP 模板文件`profile.php`：

```
Your name: <?php echo $data["name"]; ?>
Your name: <?php echo $data["birthdate"]; ?> 
```

正如我所看到的，由于文档的原因，一个 CONTENT 变量必须是一个数组......

```
$template['default']['regions'] = array(
  'header' => array(
    'content' => array('<h1>Welcome</h1>','<p>Hello World</p>'), ### <----- AS EXAMPLE
    'name' => 'Page Header',
    'wrapper' => '<div>',
    'attributes' => array('id' => 'header', 'class' => 'clearfix')
  )
); 
```

区域必须定义为模板，因此如果您没有不起作用的`header`区域：

```
$template['default']['regions'] = array(
  'header',
  'content',
  'footer',
); 
```

！！！！！！简单地说，他无法访问`_ci_cached_vars`存储数据的私有访问变量，例如`$name`. 相关主题：[CodeIgniter 在调用 load->view 之间共享数据](https://stackoverflow.com/questions/5098636/codeigniter-shared-data-between-calls-to-load-view)

# c++ - 打破主要问题 GDB

> ID：15048070
> 
> 赞同：0
> 
> 时间：2013-02-24T02:31:23.907
> 
> 标签：c++, gdb, main, break

我目前是 C++ 和处理 GDB 的新手。

我使用了“break main”命令，得到以下输出

> 0x14fc0 处的断点 1。

有了这个，我怎么知道现在该做什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T03:06:20.100

听起来您确实需要花一些时间阅读 gdb 教程或参考资料，不幸的是，好书不容易找到。这可能是我找到的更好的介绍之一[GDB 指南](http://www.lashi.org/writing/guide_to_gdb_1.1.pdf)。这是一个很好的备忘单：[GDB 备忘单](http://darkdust.net/files/GDB%20Cheat%20Sheet.pdf)。

但是，如果您真的很想从 No Starch Press 学习 gdb “调试的艺术”，这可能是目前最好的书，而且比我找到的任何在线资料都要好得多。

# json - 用于数据描述、数据验证和输入验证的 JSON 模式

> ID：15048071
> 
> 赞同：8
> 
> 时间：2013-02-24T02:31:38.260
> 
> 标签：json, validation, schema, jsonschema

在我能找到的关于使用 JSON 模式的内容中，描述有效数据、验证存储数据和验证输入数据的任务似乎存在混淆（或至少缺乏区别）。

一个典型的例子如下：

```
var schema = {
    type: 'object',
    properties: {
        id: { type: 'integer', required: true },
        name: { type: 'string', required: true },
        description: { type: 'string', required: false }
    }
}; 
```

这适用于描述数据存储中的有效数据应该是什么样子，因此也可以验证它（后者并不是非常有用——如果它在存储中它应该已经有效）：

```
var storedData = {
    id: 123,
    name: 'orange',
    description: 'delicious'
}; 
```

它不能很好地验证输入。`id`最有可能留给应用程序生成，而不是让用户作为输入的一部分提供。以下输入未通过验证，因为它缺少`id`架构声明的内容`required`：

```
var inputData = {
    name: 'orange',
    description: 'delicious'
}; 
```

*好吧，*有人可能会说，*模式并不意味着验证直接输入，验证应该只在应用程序添加后进行`id`，并且数据就是要存储的内容。*

但是，如果模式不是为了验证直接输入，那么 1）在浏览器中运行的 JavaScript 验证器的意义是什么，可能是直接输入和 2）`readonly`规范中明显面向输入的模式特性的意义是什么？

当考虑可以设置一次但不能更新的属性（如用户名）以及不同的访问级别（例如，管理员和橙色的所有者应该能够更改`description`，而对于其他用户应该留`readonly`）。

处理此问题的最佳（或至少有效）做法是什么？每个用例都有不同的架构，如下所示？

```
var baseSchema = {
    type: 'object',
    properties: {
        id: { type: 'integer', required: true },
        name: { type: 'string', required: true },
        description: { type: 'string', required: false }
    }
};

var ownerUpdateSchema = {
    type: 'object',
    properties: {
        id: { type: 'integer', required: false, readonly: true },
        name: { type: 'string', required: true },
        description: { type: 'string', required: false }
    }
};

var userUpdateSchema = {
    type: 'object',
    properties: {
        id: { type: 'integer', required: false, readonly: true },
        name: { type: 'string', required: false, readonly: true },
        description: { type: 'string', required: false, readonly: true }
    }
}; 
```

或者是其他东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T11:17:37.553

*旁注：“required”现在是 v4 中父元素中的一个数组，“readOnly”大写不同——我将在示例中使用该表单*

我同意验证存储的数据非常罕见。如果你只是描述数据，那么你不需要指定“id”是必需的。

要说的另一件事是，这些模式都应该具有可以引用它们的 URI（例如`/schemas/baseSchema`）。此时，您可以扩展模式以使其中一些模式需要“id”：

```
var ownerInputSchema = {
    type: 'object',
    properties: {
        id: {type: 'integer', readOnly: true},
        name: {type: 'string'},
        description: {type: 'string'}
    },
    required: ['name']
};

var userInputSchema = {
    allOf: [{"$ref": "/schemas/inputSchema"}],
    properties: {
        name: {readOnly: true}
    }
};

var storedSchema = {
    allOf: [{"$ref": "/schemas/inputSchema"}],
    required: ["id"]
} 
```

虽然，正如我上面所说，我不确定`storedSchema`是否有必要。你最终得到的是一个描述数据格式的“所有者”模式（作为服务，并且可以由数据所有者编辑），并且你有一个辅助模式扩展它以`readOnly`在附加属性上声明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-17T06:59:24.043

好吧，我认为 Json-Schema 的目的在 v4 中定义得更清楚。目标是帮助您进行数据结构验证（无论是要存储它，它已经通过网络发送给您，还是您正在以交互方式创建）。

readOnly 不是 Json-Schema 验证属性，因为它没有验证约束。在 Json-Schema v4 中，只读是超模式定义的一部分。它可以用来表示您不能在 POST 请求中更改此属性。

Json-schema 没有定义你应该如何实现与用户的交互，如果你允许暂时的“坏”数据，或者在你向系统添加更多数据之前必须纠正任何错误。这取决于你。

# applet - 如何在没有 jre7 的情况下运行小程序？

> ID：15048077
> 
> 赞同：-1
> 
> 时间：2013-02-24T02:32:38.837
> 
> 标签：applet, java

我需要 jre7 来运行某个站点发布的小程序，另一方面，我需要在我的机器上使用 java6，以便我的 hadoop 命令可以工作。我无法从 java6 升级到 java7。除非我的机器上有 java7，否则我无法安装 jre7。我应该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T02:39:50.457

您可以并排安装 Java 6 和 Java 7。由于您显然需要两者，这是一种选择。

Hadoop 也很有可能与 Java 7 和 Java 6 一起工作：

*   Java 7 旨在向后兼容早期的 Java 版本。
*   很可能很久以前就修复了 Java 7 上的 Hadoop 的任何（假设的）兼容性问题。）

所以第二种选择是简单地升级到 Java 7，然后卸载 Java 6 以节省磁盘空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T02:48:35.873

首先你需要删除openjdk

```
sudo apt-get purge openjdk* 
```

要安装 java 7，请运行以下代码

> sudo add-apt-repository ppa:webupd8team/java
> 
> sudo apt-get 更新
> 
> sudo apt-get install oracle-java7-installer

# boolean-expression - 如何解决这个布尔代数表达式

> ID：15048080
> 
> 赞同：-1
> 
> 时间：2013-02-24T02:33:25.217
> 
> 标签：boolean-expression, digital-logic

我想帮助简化这个布尔代数表达式：

B*C + ~A*~B + ~A*~C => A*B*C + ~A

我需要知道如何将其简化为 ABC + ~A 的步骤

'*' 表示“与”

'+' 表示“或”

“~A”表示“A NOT”

任何帮助，将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T16:55:16.910

为了更好地了解，我将跳过`*`连接，并使用`'`否定。

首先，您应该扩展 2 项析取： Expand`B*C`和`A'*B'``A'*C'`

**1)** `(A + A')BC + A'B'(C + C') + A'(B + B')C'`

现在分发括号。

**2)** `ABC + A'BC + A'B'C + A'B'C' + A'BC' + A'B'C'`

第四项和最后一项是相同的`A'B'C'`，因此请忽略其中一个，因为`p + p = p`或者您可以根据需要扩展情况（在某些情况下可能需要），如`p+p+p+p+....+p = p`

**3）**所以现在，让我们尝试搜索常用术语。见第 2 项和第 5 项，`A'BC`以及`A'BC'`。取共同括号，`A'B(C+C') => A'B`。对第 3 项和第 4 项执行相同操作，`A'B'C`并且`A'B'C'`。`A'B'(C+C') => A'B'`因为`X+X' = 1`.

现在我们有：

`ABC + A'B + A'B'`

**4)**再次取共同括号，第 2 和第 3 项：`A'(B+B')`

你有`ABC + A'`

`BC + A'B' + A'C' => ABC + A'`

# opengl - 是否有用于绘制“可见”线条的混合模式？

> ID：15048084
> 
> 赞同：2
> 
> 时间：2013-02-24T02:34:01.787
> 
> 标签：opengl

我正在制作一个类似绘画的程序。我想允许用户绘制矩形（选择）。目前，我正在使用白线绘制矩形。但是，如果他们尝试在白色图像上绘制一个，则该线将不可见。

其他程序通过使用“行进蚂蚁”或使用一种倒置的颜色来解决这个问题，这样线条总是可见的。

在 OpenGL 中实现这种效果的最简单方法是什么？

如果相关，我正在使用带有 OpenTK + WinForms 的 C#。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T11:53:09.990

OpenGL 也可以做到这一点。查看 OpenGL 提供的各种逻辑操作。使用 XOR 逻辑运算，您将得到一条对比鲜明的线条。

[OpenGL glLogicOp 参考](http://www.opengl.org/sdk/docs/man/xhtml/glLogicOp.xml)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T03:14:21.640

您可以绘制两个矩形，颜色彼此相对，彼此偏移一个像素。或者您可以只使用他们正在绘制的颜色（所见即所得风格）。在白色图像上绘制白色矩形不会改变图像，那么为什么反馈会建议它这样做呢？

# .htaccess - 如果 url 以 /text/text/ 结尾，我如何重定向

> ID：15048088
> 
> 赞同：1
> 
> 时间：2013-02-24T02:34:29.303
> 
> 标签：.htaccess, mod-rewrite

当我的斜线后面有文字时，`www.anitajohansen.nl/text`我的网站将正常工作并显示`www.anitajohansen.nl/?id=text`.

但是，当我在后面加上更多文字的斜线时`www.anitajohansen.nl/text/text`，我网站上的图像就会混乱。我不明白这如何导致更改我网页上图像资源的 url。

为什么会发生这种情况，我该如何解决？

我的 .htaccess 文件：

```
RewriteEngine On 
RewriteBase /

# If url ends with double forward slashes, will remove the latter one 
RewriteRule (.*)/$ $1 [L,R=301]

Header set X-UA-Compatible "IE=edge"

# Dont redirect if the map/file exists
RewriteCond %{REQUEST_FILENAME} -f [NC,OR] 
RewriteCond %{REQUEST_FILENAME} -d [NC] 
RewriteRule ^(.*?)$ $1 [L] 

# Redirect with everything after tld/ and put it inside ?id= 
RewriteRule ^(.*)$ ?id=$1 [L] 
```

**编辑：**

它似乎只会“弄乱”来自当前目录的 url，例如`./images/image1.png`. 来自 webroot ( `/images/image1.png`) 的 url 很好，不会弄乱。

# go - 为什么使用 make() 在 Go 中创建切片？

> ID：15048090
> 
> 赞同：8
> 
> 时间：2013-02-24T02:34:47.610
> 
> 标签：go

*   `var a [4]int`和 和有什么不一样`b := make([]int, 4)`？`b`可以扩展，但不能，`a`对吗？但是如果我知道我真的需要 4 个元素，那么数组是否比切片更快？

*   `var d []int`和之间有任何性能差异`e := make([]int)`吗？会`f := make([]int, 5)`比没有前 5 个元素的长度提供更多的性能吗？

*   这`c := make([]int, 5, 10)`不会分配比我可以访问更多的内存吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-24T03:02:05.223

*   `a`是一个数组，并且`b`是一个切片。切片与数组的不同之处在于切片是指向数组的指针。切片是引用类型，这意味着如果将一个切片分配给另一个切片，它们都引用同一个底层数组。例如，如果一个函数接受一个切片参数，它对切片元素所做的更改将对调用者可见，类似于传递一个指向底层数组的指针（上面来自[Learning Go](http://www.miek.nl/projects/learninggo/)）。您可以轻松地使用`append`和`copy`切片。Array 应该比 slice 快一点，但差别不大。除非您确切知道大小，否则最好使用 slice 来简化操作。
*   make([]type,length, capacity)，您可以估计大小和可能的容量以提高性能。

更多细节，可以参考：[Go Slices: usage and internals](http://blog.golang.org/2011/01/go-slices-usage-and-internals.html)

# function - GNU make 通配符函数找不到运行时生成的文件

> ID：15048091
> 
> 赞同：13
> 
> 时间：2013-02-24T02:34:53.220
> 
> 标签：function, makefile, wildcard, gnu, is-empty

**摘要：**
我在类 unix 系统上使用 GNU Make (3.81)，我遇到了一个问题，即该`$(wildcard, pattern)`函数无法找到由（可能/显然？）先前执行的配方生成的文件，而其他程序（例如 ls）能够验证它的存在。我想知道为什么通配符函数没有返回任何内容，它何时被扩展（到空字符串），以及我如何让它找到生成的文件。

**测试用例：**
下面的测试用例说明了这个问题。
生成文件内容：

```
.PHONY: build clean

test:
    @echo "Creating test file 'test'."
    @echo "this is a test file" > test

build: test
    @echo "Directory contents:"
    @ls
    @echo "Test file contents:"
    @cat test
    @echo "Wildcard output:"
    @echo $(wildcard test)

clean:
    @rm -f test 
```

运行 makefile 两次（然后清理）表明只有在第二次运行时才会检测到创建的文件。
输出：

```
Creating test file 'test'.
Directory contents:
makefile  test
Test file contents:
this is a test file
Wildcard output:

Directory contents:
makefile  test
Test file contents:
this is a test file
Wildcard output:
test 
```

**重现：**
将生成文件保存在一个空目录中，然后运行“make build;make build;make clean”。

**研究：**
处理目标的先决条件的[顺序与它们在冒号后面的列表中出现的顺序无关](https://stackoverflow.com/questions/1647480)，因此如果要定义它们的顺序，必须引入显式的先决条件间依赖关系处理。

但是，我认为我不能再剥离依赖项了。`build`取决于`test`，并且`test`对应于一个不存在的文件，它是由它的配方生成的。我想它会在`build`处理配方时出现。

根据我对make如何解析makefile的了解，配方中的通配符函数在处理之前不应扩展。但是，我清楚地看到内置 make 功能的输出与通过 shell 访问的常用实用程序的输出之间存在差异，所以这个假设可能是错误的，但我没有遇到任何关于应该做什么的好的解释发生在这里，甚至在 GNU make 手册中也没有。

*注意这个问题的目的只是为了了解与这个问题相关的通配符函数的工作原理；有一个实际用例，我从中提炼出这个淡化版本，但我对这个案例更感兴趣。*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T04:33:27.250

GNU make在执行*任何*命令之前扩展目标的*所有*命令。在这种情况下，“扩展”意味着“用它们的值（递归地）替换所有变量引用，并评估任何函数引用。” 当然是函数引用。由于扩展发生在执行任何命令之前，因此当然找不到该文件——它还没有被创建。第二次运行构建时，已经存在，所以可以找到它。*`$(wildcard)``test``test``$(wildcard)`*

 *关于您关于处理先决条件的顺序的声明：从 *技术上讲*，GNU make 不保证顺序，但*实际上*，先决条件是从左到右处理的，尽管纯粹主义者试图改变它（仅出于拧紧的目的对于没有完全指定依赖关系的人），GNU make 实际上会改变实现细节的可能性非常小。 **但是**，您只能真正依赖*串行*构建中的排序。如果您并行运行构建，那么事情会变得有点棘手：GNU make*可以*仍然以从左到右的顺序处理 prereq，但它不再等待一个完成后再开始下一个，因此实际上它们可能看起来是以随机或“任何”顺序处理的，受 prereq 间依赖关系的影响，这就是为什么最好指定这些依赖项。*

# java - 值结果无意四舍五入？

> ID：15048093
> 
> 赞同：3
> 
> 时间：2013-02-24T02:35:24.797
> 
> 标签：java, android, decimal

所以我这段代码，基本上是对变量应用简单的数学算术。rrdistance、qsdistance、heartrate 给出了理想的值，而 pamp 和 qamp 没有。我认为它圆了？假设在 i = 1 时，trial[1] 的值为 120，Pycoor[1] 为 102，Qycoor[1] 为 134。FINALBOXWIDTH(bitmap_Source) 为 10。

所以 pamp = ((120-102)/10) * 0.1 = 0.18 而 qamp = ((134-120)/10) * 0.1 = 0.14 的预期结果

我不明白为什么它们都显示 pamp = 0.1 和 qamp = 0.1。

```
static int[] Pxcoor = new int[50];
static int[] Pycoor = new int[50];
static int[] Qxcoor = new int[50];
static int[] Qycoor = new int[50];
static int[] Rxcoor = new int[50];
static int[] Rycoor = new int[50];
static int[] Sxcoor = new int[50];
static int[] Sycoor = new int[50];
static int[] Txcoor = new int[50];
static int[] Tycoor = new int[50];
    static int[] trial = new int[450];

public static int FINALBOXWIDTH(Bitmap src) {  ...
}

private void StratBackgroundProcess() {

if (i >= 2) {
  rrdistance += (((Rxcoor[i] - Rxcoor[i - 1]) / FINALBOXWIDTH(bitmap_Source)) * 0.04); 
  //durations in seconds
  printerval += (((Rxcoor[i] - Pxcoor[i]) / FINALBOXWIDTH(bitmap_Source)) * 0.04);
  qsdistance += (((Sxcoor[i] - Qxcoor[i]) / FINALBOXWIDTH(bitmap_Source)) * 0.04);
  heartrate += (1500 / (rrdistance / 0.04)); 

  //amplitude in mV
  pamp = (( (trial[1] - Pycoor[i]) / FINALBOXWIDTH(bitmap_Source))  * 0.1);
  qamp = (( (Qycoor[i] - trial[i]) / FINALBOXWIDTH(bitmap_Source)) *0.1);

    }
} 
```

帕普=帕普；Qamp = qamp;

坐标.setText("" + pamp + "," + qamp + " ");

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T02:42:02.307

问题几乎可以肯定是试验、Pycoor、Qycoor 和 FINALBOXWIDTH 项的声明。如果这些是整数（几乎可以肯定它们来自您的结果），那么：

((120-102)/10) * 0.1 = (18/10) * 0.1 = 1（注意整数数学向下舍入）* 0.1 = 0.1

现在，我实际上并不知道试验中的值等，因为您没有提供它们（不过，您已经提供了它们，并且它验证了我的工作），但尝试将这两行更改为：

```
 pamp = (( (trial[1] - Pycoor[i]) / (double)FINALBOXWIDTH(bitmap_Source))  * 0.1);
  qamp = (( (Qycoor[i] - trial[i]) / (double)FINALBOXWIDTH(bitmap_Source)) *0.1); 
```

注意我只是将 FINALBOXWIDTH 强制为 double 类型，这将强制浮点运算。

请注意，您将获得双精度值，这些值并不总是显示良好。尝试这个：

```
DecimalFormat df = new DecimalFormat("#.##");
System.out.println(df.format(pamp));
System.out.println(df.format(qamp)); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-24T02:47:20.910

这可能是因为您使用的数据类型。
1\. 确保计算中涉及的所有变量的数据类型是浮点型或双精度型（或任何其他可以很好地处理小数的数据类型，例如 Decimal、BigDecimal 等）
2\. 每当在公式中使用浮点值时，它都是必需的用 f 指定它们。所以你的公式应该是

```
pamp = (( (trial[1] - Pycoor[i]) / FINALBOXWIDTH(bitmap_Source))  * 0.1f);
qamp = (( (Qycoor[i] - trial[i]) / FINALBOXWIDTH(bitmap_Source)) *0.1f); 
```

# javascript - 如何强制传单地图重新加载所有图块，包括可见图块？

> ID：15048096
> 
> 赞同：4
> 
> 时间：2013-02-24T02:35:34.397
> 
> 标签：javascript, leaflet

我正在开发一个图形网络应用程序，我已经决定传单可以制作一个不错的图形视图。我让它显示（有点），但我需要一种方法来强制它在用户输入新公式进行图形时更新。

我也在使用 JQuery，但这没关系。以下是相关代码：

```
function formulaChange(formula){
     //submits a request to the server to add a graph to display
     map.setView(map.getCenter(),map.getZoom(),true);//doesn't work
     //and neither does:
     //map.fire('viewreset');
     //tiles.redraw();
}

function enterHandler(event){
    if(event.keyCode==13){
        formulaChange(document.getElementById("formula").value);
    }

}

var map;
var tiles;
$(document).ready(function(){
    map=L.map('plot',{crs:L.CRS.Simple}).setView([0,0],10);
    //url is actually a servlet on the server that generates an image on the fly
    tiles = L.tileLayer('./GraphTile.png?x={x}&y={y}&z={z}&tilesize={tileSize}&{s}', 
    {
        maxZoom: 20,
        continuousWorld: true,
        tileSize: 128,
        //subdomains used as a random in the URL to prevent caching
        subdomains: 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890'
    }
    ).addTo(map);
}); 
```

这有效，但在用户单击时不会刷新，事件肯定正在运行（我省略了其他更新文本显示的代码）。它显示正确，但是当用户添加一个功能来显示视图永远不会更新并且传单继续显示缓存的图像时，只有新的缩放级别或平移到从未查看过的区域会导致它更新图块。我的问题是：如何强制传单完全重新加载所有内容并删除并重新加载所有图像？

编辑添加了另一个失败的尝试

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-24T15:15:39.390

我找到了答案。尽管没有缓存标头，但我的浏览器仍在缓存图像。子域不是文档声称的“随机选择”，它们是使用瓦片位置的哈希生成的。所以我不得不即兴创作一种将“&RANDOM##”添加到 URL 末尾而不是子域的方法。

新代码如下所示：

```
function enterHandler(event){
    if(event.keyCode==13){
        formulaChange(document.getElementById("formula").value);
    }
}
function formulaChange(formula){
    val.item=Math.random();
    tiles.redraw();
}
var map;
var tiles;
var val={
    item: Math.random(),
    toString: function(){
        return this.item;
    }
};
$(document).ready(function(){
    map=L.map('plot',{crs:L.CRS.Simple}).setView([0,0],10);
    tiles = L.tileLayer('./GraphTile.png?x={x}&y={y}&z={z}&tilesize={tileSize}&{test}', 
    {
        maxZoom: 20,
        continuousWorld: true,
        tileSize: 128,
        test: val
    }
    ).addTo(map);
}); 
```

希望这对其他人有帮助。如果有更好的方法可以做到这一点，请发表评论。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-02-12T17:53:54.690

您可以通过使用函数而不是缓存破坏器的全局函数来简化这一点。

在您的情况下，您可以删除 val 全局变量并将文档就绪函数调用更改为如下所示：

```
$(document).ready(function(){
    map=L.map('plot',{crs:L.CRS.Simple}).setView([0,0],10);
    tiles = L.tileLayer('./GraphTile.png?x={x}&y={y}&z={z}&tilesize={tileSize}&{test}', 
    {
        maxZoom: 20,
        continuousWorld: true,
        tileSize: 128,
        test: Math.random()
    }).addTo(map);
}); 
```

# c - 在没有数学库的情况下编写日志函数？

> ID：15048098
> 
> 赞同：-3
> 
> 时间：2013-02-24T02:35:54.577
> 
> 标签：c

写

```
function double mylog( double  y); 
```

当 时计算 y 的自然对数`y>0`。通过对幂级数的项求和来做到这一点，

```
mylog( y ) = 2*( x + x^3/3 + x^5/5 + x^7/7 + x^9 /9 + … ) 
```

将各项相加至`x^151`。请注意，参数 y 不是幂级数的 x。在计算幂级数之前，计算 x：

```
x = (y‐1)/(y+1) 
```

编写无副作用的函数（无 I/O、无输出、无全局变量）。如果`y<=0.0`那么 `return 0`. （实际的 math.h 函数做得比这更好。）例如， for `mylog( 3 )`，`x = 2/5 = .4` `mylog( 3 ) = 2*( 0.4 + 0.4^3/3 + 0.4^5/5 + 0.4^7/7 + 0.4^9/9 + … ) ≈ .8473` 您的循环可以保留一个变量 xpow ，该变量建立了 x 的递增幂，因此您不需要嵌套循环。

```
#include <stdio.h>
#include <stdlib.h>

double  mylog(double y)
{
double x = (y-1)/(y+3);
double sum = 1.0;
double xpow=x;

for(int n = 1; n <= 151; n++)
{

if(n%2!=0)
{

sum = sum + xpow/(double)n;
}
xpow = xpow * x;

 }    

 sum *= 2;

 return sum;
 }

 int main()
 {
double num;

printf("Enter Number ");
scanf("%lf", &num);

num = mylog(num);
printf("%lf \n", num);
system("pause");
  } 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T03:03:34.067

有一个[fastapprox 库](https://github.com/romeric/fastapprox)可以回答这个问题，并且在[一个 C 头文件](https://github.com/romeric/fastapprox/blob/master/fastapprox/src/fastonebigheader.h)中还有更多：

引用它：

```
static inline float 
fastlog2 (float x)
{
    union { float f; uint32_t i; } vx = { x };
    union { uint32_t i; float f; } mx = { (vx.i & 0x007FFFFF) | 0x3f000000 };
    float y = vx.i;
    y *= 1.1920928955078125e-7f;

    return y - 124.22551499f
             - 1.498030302f * mx.f 
             - 1.72587999f / (0.3520887068f + mx.f);
}

static inline float
fastlog (float x)
{
    return 0.69314718f * fastlog2 (x);
} 
```

# c++ - 用值替换列表中的元素，以新列表结尾

> ID：15048099
> 
> 赞同：0
> 
> 时间：2013-02-24T02:36:00.160
> 
> 标签：c++, stl

我在板上有路径，例如索引对列表，例如

```
list<pair<int,int> > *path; 
```

当角色到达障碍物时，我需要用新路径替换所有从当前位置到结束的路径，但要保存从起点到障碍物的路径相同（以澄清一个小角色具有起点和目标单元格并从起点移动到终点并返回并再次重复相同。为了避免大量计算，我会尝试保存没有障碍的部分路径，并将旧部分替换为从障碍到结束的新部分）。有没有简单的方法可以在不迭代的情况下做到这一点？

稍后编辑以澄清：旧路径是 [(0,0),(0,1),(1,1),(1,2),(1,3),(1,4)] 并且障碍物在单元格上(1,2) 所以字符去 [(0,0),(0,1),(1,1)] 搜索新路径，例如 [(1,1),(2,1),(2 ,2),(1,3),(1,4)] 所以我需要从旧路径 (1,1),(1,2),(1,3),(1,4) 替换为 (1 ,1),(2,1),(2,2),(1,3),(1,4)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T03:39:15.930

If I understand your question correctly: You have a list `path` from `start` to `destination`, which hits an obstacle somewhere in the middle (you have to know where, so let's say you have a valid `list<...>::iterator obstacle` that points to the obstacle). You also have a `newpath` going from `*(obstacle - 1)` to `destination`, and you want to cut and paste those two paths together. This is how you could do it (I'm assuming `list`s instead of `list*`s here, but if you really need that you can easily rewrite it to work with the pointer):

```
//kill the wrong bit of the old path
path.erase(obstacle, path.end());
//append the correct newpath
path.splice(path.end(), newpath, newpath.begin(), newpath.end()); 
```

Note that `newpath` is empty after this operation.

# proxy - HttpRoutePlanner - 它如何与 HTTPS 代理一起工作

> ID：15048102
> 
> 赞同：5
> 
> 时间：2013-02-24T02:37:41.163
> 
> 标签：proxy, apache-httpclient-4.x, apache-commons-httpclient

我设置了 HTTPS 代理，以便 HTTP 客户端可以安全地将纯 HTTP 请求发送到代理。例如，客户端可以向代理发送加密的 HTTP GET 请求，代理将删除加密并将纯 HTTP GET 请求发送到终端站点。

我了解到这不是一个常见的设置，只有谷歌浏览器具有支持这种情况的内置功能。（此处的信息 - [http://wiki.squid-cache.org/Features/HTTPS#Encrypted_browser-Squid_connection](http://wiki.squid-cache.org/Features/HTTPS#Encrypted_browser-Squid_connection)）。我已经让 Google Chrome 与我的 HTTPS 代理一起工作，因此代理端没有问题。

我希望编写一个 HTTP 客户端来加密对我的 HTTPS 代理的所有请求。我尝试以这种方式将 HTTPS 代理设置为 DefaultHttpClient -

```
DefaultHttpClient dhc = new DefaultHttpClient();
HttpHost proxy = new HttpHost("192.168.2.3", 8181, "https"); //NOTE : https
dhc.getParams().setParameter(ConnRoutePNames.DEFAULT_PROXY, proxy); 
```

然后尝试执行任何请求都会给我一个 SSLPeerUnverifiedException。我不明白为什么。

在我探索 DefaultHttpClient API 的过程中，我遇到了 HttpRoutePlanner 和 HttpRoute，我们可以使用它们指定与代理的连接是否应该加密。但是，我无法完成这项工作。

这是一个图表，通过将其与 HTTP 代理设置区分开来解释我的设置 -

**HTTP 代理：**

```
HTTP Client <------- Plain Text GET, POST Requests -------> HTTP Proxy <------- Plain Text GET, POST Requests -------> HTTP End-Site

HTTP Client <------- Plain Text CONNECT Requests -------> HTTP Proxy <------- Plain Text CONNECT Requests -------> HTTPS End-Site 
```

注意：对于 HTTPS 终端站点，代理只能看到 CONNECT 请求。然后在客户端和终端站点之间建立 SSL 隧道

**HTTPS 代理：**

```
HTTP Client <------- Encrypted GET, POST Requests -------> HTTPS Proxy <-------- Plain Text GET, POST Requests -------->  HTTP End-Site

HTTP Client <------- Encrypted CONNECT Requests -------> HTTPS Proxy <------- Plain Text CONNECT Requests -------> HTTPS End-Site 
```

注意：对于 HTTPS 终端站点，只有初始 CONNECT 请求应加密到代理。无论如何，后续请求将被隧道化。

任何人都可以让我知道如何实现这个目标吗？我相信 HttpRoutePlanner 应该会有所帮助，但我不知道如何。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T11:09:52.433

我能够使 Apache HttpClient 4.x 与 HTTPS 代理一起工作。我在问题中提到的 SSLPeerUnverifiedException 被抛出，因为我不信任代理服务器的证书。一旦解决了这个问题，与 HTTPS 终端站点的连接就会按预期工作。

对于到 HTTP 终端站点的连接，我必须使用自己的 HttpRoutePlanner 才能使其工作。这是带有解释的代码 -

```
DefaultHttpClient dhc = new DefaultHttpClient();
HttpHost proxy = new HttpHost("192.168.2.3", 8181, "https");
dhc.getParams().setParameter(ConnRoutePNames.DEFAULT_PROXY, proxy);

SchemeSocketFactory factory = null;
try {
    factory = new SSLSocketFactory(new SimpleTrustStrategy()); //Trust All strategy
} catch (GeneralSecurityException e1) {
    e1.printStackTrace();
}
Scheme https = new Scheme("https", 443, factory);
dhc.getConnectionManager().getSchemeRegistry().register(https);

HttpGet request = new HttpGet("http://en.wikipedia.org/wiki/Main_Page");    

try {
    HttpHost host = determineTarget(request);

    if(host.getSchemeName().equalsIgnoreCase("http")){
        dhc.setRoutePlanner(new MyRoutePlanner());
    }

} catch (ClientProtocolException e1) {
    e1.printStackTrace();
} 
```

的实现`MyRoutePlanner`如下 -

```
public class MyRoutePlanner implements HttpRoutePlanner {
    @Override
    public HttpRoute determineRoute(HttpHost target, HttpRequest request,
            HttpContext context) throws HttpException {
        return new HttpRoute(target, null
                , new HttpHost("192.168.2.3", 8181, "https")
                , true, TunnelType.PLAIN, LayerType.PLAIN); //Note: true
    }
} 
```

要使 HttpClient 通过 HTTPS 代理与 HTTP 终端站点通信，路由应该是安全的，但不应该有任何隧道或分层。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T10:36:53.800

Apache HttpClient 4.x 仅通过连接隧道支持通过代理的 SSL。它不支持 HTTPS 代理。

# oracle - 选中“此处不允许”的子查询

> ID：15048108
> 
> 赞同：0
> 
> 时间：2013-02-24T02:38:50.120
> 
> 标签：oracle, subquery, constraints, assertions, data-integrity

我试图在我的一张桌子上添加一个约束，以确保我的工人维护一个工作站，当且仅当该工作站处于该工人当前受雇的状态时。但是，Oracle 似乎不喜欢约束内的子查询。

我记得在我上过的一堂课上，当我这样做时，sqlplus 不喜欢跨表检查：

```
ALTER TABLE STATION ADD CONSTRAINT Check_Worker CHECK (Maintainer IN (
    SELECT *
        FROM 
            STATION s,
            FOREST f,
            COVERAGE c,
            STATE st,
            WORKER w
        WHERE
            s.x BETWEEN f.MBR_XMin AND f.MBR_XMax AND 
            s.y BETWEEN f.MBR_YMin AND f.MBR_YMax AND 
            f.Forest_Id = c.Forest_Id AND
            st.State = w.employing_state
        )
    ); 
```

它对我大喊大叫：

```
'Question 3'
    SELECT *
    *
ERROR at line 2:
ORA-02251: subquery not allowed here. 
```

那么，我有什么选择可以轻松解决这个问题吗？可能有多个约束？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T13:45:18.993

解决这个问题的一种方法是使用数据模型。使用交集表连接 WORKER 和 STATION。

诀窍是创建唯一的复合键，将 STATE 添加到 WORKER 和 STATION 的实际主键中。

所以，像这样：

```
alter table WORKER add constraint wrk_state_uk unique (worker_id, employing_state) ;

alter table STATION add constraint stn_state_uk unique (station_id, state) ; 
```

然后我们创建一个有*很多*约束的相交表:)。（显然，我在这里猜测数据类型以及列名。）

```
create table station_maintainer (
    station_id number not null
    , station_state number not null
    , worker_id number not null
    , employing_state number not null
    , constraint stn_mnt_pk primary key (station_id, worker_id)
    , constraint stn_mnt_uk unique (station_id )
    , constraint stn_mnt_stn_fk foreign key (station_id)
          references station (station_id)
    , constraint stn_mnt_wrk_fk foreign key (worker_id)
          references worker (worker_id)
    , constraint stn_mnt_state_ck check (station_state = employing_state) 
```

;

UNIQUE 密钥确保每个站点只有一个维护者。我假设一个作品可以维护一个以上的站点，

我们需要两个表上的唯一键，以便外键可以引用状态以及实际的主键。这是一个闪避，但它确实确保交集表上的状态列与父表上的状态列匹配。

* * *

您发布的 CHECK 中的实际表格很混乱。没有任何东西将 WORKER 和 STATE 加入到 STATION，所以我猜测这些表可能是如何相关的。如果我的猜测与您的实际模型不符，请不要抱怨：相反，修改您的问题以提供准确和充分的细节。

# mysql - 子查询不给出输出

> ID：15048109
> 
> 赞同：2
> 
> 时间：2013-02-24T02:39:18.570
> 
> 标签：mysql, sql, subquery, aggregate-functions

我正在尝试运行一个查询，该查询返回在名为 Hospital 的表中出现超过 3 次的 ID 列表。到目前为止，我想出了这个：

```
SELECT doctorID
FROM Hospital 
WHERE doctorID IN

(SELECT temp.doctorID, count(temp.doctorID) as frequency
FROM Hospital as temp
GROUP BY temp.doctorID
HAVING frequency >3); 
```

但由于某种原因，当我运行它时出现错误

```
Code: 1241\. Operand should contain 1 column(s) 
```

当我环顾四周时，这似乎是一个流行的错误，但我找不到适用于我的现有解决方案。当我单独运行括号中的查询时，它工作正常。那么它为什么不能作为子查询呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T02:41:29.030

从子查询中删除第二列，将其`count()`移入`HAVING`子句：

```
SELECT doctorID
FROM Hospital 
WHERE doctorID IN

(SELECT temp.doctorID
FROM Hospital AS temp
GROUP BY temp.doctorID
HAVING count(temp.doctorID) > 3); 
```

您可以更简单地获得相同的结果，而无需子查询：

```
SELECT doctorID
FROM   Hospital
GROUP  BY doctorID
HAVING count(doctorID) > 3; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T02:42:19.483

```
SELECT doctorID
FROM Hospital 
WHERE doctorID IN

(SELECT temp.doctorID 
FROM Hospital as temp
GROUP BY temp.doctorID
HAVING count(temp.doctorID)>3); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T02:41:24.027

您的子查询返回 2 列。从您的 SELECT 列表中删除该`COUNT`列，如下所示：

```
SELECT doctorID
FROM Hospital 
WHERE doctorID IN
   (SELECT temp.doctorID
   FROM Hospital as temp
   GROUP BY temp.doctorID
   HAVING count(temp.doctorID) >3); 
```

# asynchronous - chrome.management.getAll - 存储值的问题（等待时间）

> ID：15048116
> 
> 赞同：1
> 
> 时间：2013-02-24T02:40:14.367
> 
> 标签：asynchronous, google-chrome-extension, google-chrome-devtools

我遇到了一个我知道是因为异步方法的问题。
我需要将我所有的 chrome 扩展存储在一个数组中。
有问题的代码：

```
1  var ArrayExtensions = new Array ();<br>
2  chrome.management.getAll(function (info) {<br>
3  for (var i = 0; i < info.length; i++) {<br>
4  if (info[i].type== "extension" ){<br>
5  ArrayExtensions.push(info[i].name);}}   });<br>
6  for (var i = 0; i < ArrayExtensions.length; i++) {<br>
7  alert(ArrayExtensions[i]);<br>
8  } 
```

使用此代码，我没有收到任何警报窗口。

但是，当我 `alert(ArrayExtensions.length);`在第 5 行和第 6 行之间添加时，在第 9 行中，我收到了一个编号为 0 的警报，我的扩展名（代码工作）和最后一个窗口显示了正确的扩展数。

显然我需要等待一段时间才能将值存储在数组中，但是我怎样才能以更好的方式解决这个问题呢？

# c++ - c++ - 命名空间'std'中的'function'没有命名类型

> ID：15048117
> 
> 赞同：4
> 
> 时间：2013-02-24T02:40:26.953
> 
> 标签：c++, debugging, gcc, g++

主.cc：

```
#include <cstdio>
#include <functional>
#include "segtree.h" // NOLINT

int main() {
  const int n = 8;
  SegmentTree<int> segmentTree(n, 1,
      std::multiplies<int>());
  for (int i = 0; i < n; ++i)
    segmentTree.set(i, i + 1);

  for (int i = 0; i < n; ++i)
    for (int j = i; j < n; ++j) {
      int s = segmentTree.get(i, j);
      std::printf(
          "Function applied from data[%d] to data[%d] is equal to %d \n",
          i, j, s);
    }
  return 0;
} 
```

segtree.h: #ifndef SEGTREE_H_ // NOLINT #define SEGTREE_H_

```
#include <cassert>
#include <functional>
#include <vector>

template <typename T>
class SegmentTree {
 private:
  std::vector<T> tree;
  int levels;
  int n;
  int el;
  std::function<T(T, T)> f;

  T query(int l, int r, int st, int fi) {
    if (l == r)
      return get(l);

    int mid = (st + fi + 1) / 2;
    if (r < mid) {
      return query(l, r, st,  mid - 1);
    } else if (l >= mid) {
      return query(l, r, mid, fi);
    } else {
      T left  = query(l,   mid - 1, st,  mid - 1);
      T right = query(mid, r,       mid, fi);
      return f(left, right);
    }
  }

 public:
  SegmentTree(const std::vector<T>& data,
      std::function<T(T, T)> f = std::plus <T>()) {
    this->f = f;
    this->n = data.size();

    // build tree
    levels = 1, el = 1;
    while (el < static_cast<int>(data.size())) {
      el <<= 1;
      ++levels;
    }
    tree.assign(2 * el, T());
    for (size_t i = 0; i < data.size(); ++i)
      tree[i + el - 1] = data[i];
    for (int i = el - 2; i >= 0; --i)
      tree[i] = f(tree[2 * i + 1], tree[2 * i + 2]);
  }

  SegmentTree(int n, T val = T(),
      std::function<T(T, T)> f = std::plus <T>()) :
        SegmentTree(std::vector<T>(n, val), f) {
  }

  T get(int l, int r) {
    return query(l, r, 0, n);
  }

  T get(int index) {
    return tree[el - 1 + index];
  }

  void set(int index, T value) {
    int i = el - 1 + index;
    tree[i] = value;
    do {
      i = (i-1) / 2;
      tree[i] = f(tree[i*2 + 1], tree[i*2 + 2]);
    } while (i > 0);
  }
}; 
```

之后的错误信息`g++ main.cc`：

```
In file included from main.cc:9:0:
segtree.h:22:3: error: ‘function’ in namespace ‘std’ does not name a type
segtree.h:42:12: error: ‘std::function’ has not been declared
segtree.h:42:20: error: expected ‘,’ or ‘...’ before ‘&lt;’ token
segtree.h:60:12: error: ‘std::function’ has not been declared
segtree.h:60:20: error: expected ‘,’ or ‘...’ before ‘&lt;’ token
segtree.h:59:3: error: default argument missing for parameter 3 of ‘SegmentTree<T>::SegmentTree(int, T, int)’
segtree.h: In constructor ‘SegmentTree<T>::SegmentTree(const std::vector<T>&, int)’:
segtree.h:43:15: error: ‘f’ was not declared in this scope
segtree.h: In constructor ‘SegmentTree<T>::SegmentTree(int, T, int)’:
segtree.h:61:45: error: ‘f’ was not declared in this scope
main.cc: In function ‘int main()’:
main.cc:14:29: error: no matching function for call to ‘SegmentTree<int>::SegmentTree(const int&, int, std::multiplies<int>)’
main.cc:14:29: note: candidates are:
segtree.h:59:3: note: SegmentTree<T>::SegmentTree(int, T, int) [with T = int]
segtree.h:59:3: note:   no known conversion for argument 3 from ‘std::multiplies<int>’ to ‘int’
segtree.h:41:3: note: SegmentTree<T>::SegmentTree(const std::vector<T>&, int) [with T = int]
segtree.h:41:3: note:   candidate expects 2 arguments, 3 provided
segtree.h:16:7: note: SegmentTree<int>::SegmentTree(const SegmentTree<int>&)
segtree.h:16:7: note:   candidate expects 1 argument, 3 provided
In file included from main.cc:9:0:
segtree.h: In member function ‘void SegmentTree<T>::set(int, T) [with T = int]’:
main.cc:16:29:   instantiated from here
segtree.h:78:7: error: ‘f’ was not declared in this scope
segtree.h: In member function ‘T SegmentTree<T>::query(int, int, int, int) [with T = int]’:
segtree.h:66:28:   instantiated from ‘T SegmentTree<T>::get(int, int) [with T = int]’
main.cc:20:35:   instantiated from here
segtree.h:36:27: error: ‘f’ was not declared in this scope 
```

我从 github 得到了这段代码，但是我对 c++ 不是很熟悉。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-24T02:44:45.767

确保您有相当新的版本`g++`并尝试`-std=c++11`在编译期间添加：

```
g++ -std=c++11 main.cc 
```

你至少`g++-4.7`需要让它工作。

# java - Android：在 Fragment 内启动 Activity

> ID：15048118
> 
> 赞同：3
> 
> 时间：2013-02-24T02:41:07.140
> 
> 标签：java, android, android-activity

我是android开发的新手。现在我的操作栏中有标签。我为这些片段创建了类。我的第一堂课目前只有一个按钮。我稍后会添加更多。当您单击一个按钮时，我尝试在此类中启动一个活动，但它不起作用......它只是崩溃了这是代码：

```
package com.cydeon.plasmamodz;

import com.cydeon.plasmamodz.R;
import android.app.Activity;
import android.app.Fragment;
import android.content.Intent;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.Button;

  public class ThemeFragment extends Fragment {

   @Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    View view = inflater.inflate(R.layout.theme_frag,
            container, false);
    Button button = (Button) view.findViewById(R.id.button1);
    button.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            Intent intent = new Intent(getActivity(), Themes.class);
            getActivity().startActivity(intent);
        }
    });

    return view;
}} 
```

我确实在清单中定义了主题类。我不确定我做错了什么，并且真的可以使用一些帮助。正如我所说，我只有 15 岁，而且是新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T02:49:07.827

我的代码很好。我开始在我的 ThemeFragment 类中创建 Themes 类，但后来将它变成了一个新类，却忘了删除它。现在一切正常。

# php - 停止索引某些图像

> ID：15048127
> 
> 赞同：1
> 
> 时间：2013-02-24T02:42:39.657
> 
> 标签：php, html, google-image-search, noindex

所以我有一个 robots.txt 文件，其中包含：

```
User-agent: Googlebot-Image
Disallow: / 
```

最多，它会停止对许多图像的索引。但是，我也有附属图像，当您搜索时会出现在 Google 中的结果（可能还有其他搜索引擎）。

我想知道是否有可能（我搜索过没有结果）向`rel="noindex"`图像添加 a 或等效项。

附属图像是通过 PHP 循环提供的，所以如果可能的话，我一直在寻找单行修复，并且知道我不必每次都手动添加代码 :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T17:03:25.897

由于图像是通过 PHP 提供的，您可以通过发送专门为此目的设计的 HTTP 标头轻松告诉 Google 不要索引它们。

只需将此行放在图像输出之前：

```
header("X-robots-tag: noindex"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T06:00:20.837

您不能告诉谷歌或任何搜索引擎不要索引不是来自您的域的图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T04:22:04.970

添加您不想在某个文件夹中编入索引的图像，例如 dontindex，然后添加：

```
User-agent: Googlebot-Image
Disallow: /dontindex/ 
```

这告诉机器人不要在`dontindex`目录中包含内容。如果您将图像保存在不同的目录中，请将其更改为您保存图像的目录名称。

因此，下次 Google 抓取您的网站时，它会看到此指令并将您的图片从搜索结果中删除。请参阅：[防止图像被索引](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=35308)

# javascript - Angularjs 承诺不会在单元测试中解决

> ID：15048132
> 
> 赞同：21
> 
> 时间：2013-02-24T02:44:50.290
> 
> 标签：javascript, unit-testing, angularjs, jasmine

我正在使用 jasmine 对 angularjs 控制器进行单元测试，该控制器将范围上的变量设置为调用返回 promise 对象的服务方法的结果：

```
var MyController = function($scope, service) {
    $scope.myVar = service.getStuff();
} 
```

服务内部：

```
function getStuff() {
    return $http.get( 'api/stuff' ).then( function ( httpResult ) {
        return httpResult.data;
    } );
} 
```

这在我的 angularjs 应用程序的上下文中工作正常，但在 jasmine 单元测试中不起作用。我已经确认“then”回调正在单元测试中执行，但 $scope.myVar 承诺永远不会设置为回调的返回值。

我的单元测试：

```
describe( 'My Controller', function () {
  var scope;
  var serviceMock;
  var controller;
  var httpBackend;

  beforeEach( inject( function ( $rootScope, $controller, $httpBackend, $http ) {
    scope = $rootScope.$new();
    httpBackend = $httpBackend;
    serviceMock = {
      stuffArray: [{
        FirstName: "Robby"
      }],

      getStuff: function () {
        return $http.get( 'api/stuff' ).then( function ( httpResult ) {
          return httpResult.data;
        } );
      }
    };
    $httpBackend.whenGET( 'api/stuff' ).respond( serviceMock.stuffArray );
    controller = $controller( MyController, {
      $scope: scope,
      service: serviceMock
    } );
  } ) );

  it( 'should set myVar to the resolved promise value',
    function () {
      httpBackend.flush();
      scope.$root.$digest();
      expect( scope.myVar[0].FirstName ).toEqual( "Robby" );
    } );
} ); 
```

此外，如果我将控制器更改为以下单元测试通过：

```
var MyController = function($scope, service) {
    service.getStuff().then(function(result) {
        $scope.myVar = result;
    });
} 
```

为什么在单元测试中 promise 回调结果值没有被传播到 $scope.myVar？有关完整的工作代码，请参见以下 jsfiddle [http://jsfiddle.net/s7PGg/5/](http://jsfiddle.net/s7PGg/5/)

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-24T11:00:10.653

我猜这个“谜团”的关键在于，如果模板中的插值指令中使用了承诺，AngularJS 将自动解析承诺（并呈现结果）。我的意思是，给定这个控制器：

```
MyCtrl = function($scope, $http) {
  $scope.promise = $http.get('myurl', {..});
} 
```

和模板：

```
<span>{{promise}}</span> 
```

AngularJS 在 $http 调用完成后，将“看到”一个承诺已解决，并将使用已解决的结果重新呈现模板。这是[$q 文档](http://docs.angularjs.org/api/ng.%24q)中模糊提到的内容：

> $q promises 被模板引擎以角度识别，这意味着在模板中，您可以将附加到范围的 promises 视为结果值。

可以在[这里](https://github.com/angular/angular.js/blob/1ed638582d2f2c7f89384d9712f4cfac52cc5b70/src/ng/parse.js#L584)看到发生这种魔法的代码。

但是，这种“魔法”只有在有模板（`$parse`更准确地说是服务）在起作用时才会发生。**在您的单元测试中没有涉及模板，因此不会自动传播承诺解决方案**。

现在，我必须说这种自动解析/结果传播非常方便，但可能会令人困惑，正如我们从这个问题中看到的那样。这就是为什么我更喜欢像您一样显式传播分辨率结果：

```
var MyController = function($scope, service) {
    service.getStuff().then(function(result) {
        $scope.myVar = result;
    });
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-08-20T23:38:34.347

我遇到了类似的问题，让我的控制器直接将 $scope.myVar 分配给了 Promise。然后在测试中，我链接了另一个 Promise，当它被解决时，它断言 Promise 的预期值。我使用了这样的辅助方法：

```
var expectPromisedValue = function(promise, expectedValue) {
  promise.then(function(resolvedValue) {
    expect(resolvedValue).toEqual(expectedValue);
  });
} 
```

**请注意**，根据您调用 expectPromisedValue 的顺序以及当您的被测代码解析承诺时，您可能需要手动触发最终的摘要循环以运行这些 then() 方法 - 如果没有它，您的无论是否`resolvedValue`等于，测试都可能通过`expectedValue`。

为了安全起见，将触发器放在 afterEach() 调用中，这样您就不必为每个测试记住它：

```
afterEach(inject(function($rootScope) {
  $rootScope.$apply();
})); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-22T20:10:14.080

@pkozlowski.opensource 回答了原因（谢谢！），但没有回答如何在测试中绕过它。

我刚刚得出的解决方案是测试服务中是否调用了 HTTP，然后在控制器测试中监视服务方法并返回实际值而不是承诺。

假设我们有一个与我们的服务器对话的用户服务：

```
var services = angular.module('app.services', []);

services.factory('User', function ($q, $http) {

  function GET(path) {
    var defer = $q.defer();
    $http.get(path).success(function (data) {
      defer.resolve(data);
    }
    return defer.promise;
  }

  return {
    get: function (handle) {
      return GET('/api/' + handle);    // RETURNS A PROMISE
    },

    // ...

  };
}); 
```

测试该服务，我们不关心返回值会发生什么，只关心 HTTP 调用是否正确。

```
describe 'User service', ->
  User = undefined
  $httpBackend = undefined

  beforeEach module 'app.services'

  beforeEach inject ($injector) ->
    User = $injector.get 'User'
    $httpBackend = $injector.get '$httpBackend'

  afterEach ->
    $httpBackend.verifyNoOutstandingExpectation()
    $httpBackend.verifyNoOutstandingRequest()          

  it 'should get a user', ->
    $httpBackend.expectGET('/api/alice').respond { handle: 'alice' }
    User.get 'alice'
    $httpBackend.flush() 
```

现在在我们的控制器测试中，无需担心 HTTP。我们只想看到用户服务正在投入使用。

```
angular.module('app.controllers')
  .controller('UserCtrl', function ($scope, $routeParams, User) {
    $scope.user = User.get($routeParams.handle);
  }); 
```

为了测试这一点，我们监视用户服务。

```
describe 'UserCtrl', () ->

  User = undefined
  scope = undefined
  user = { handle: 'charlie', name: 'Charlie', email: 'charlie@example.com' }

  beforeEach module 'app.controllers'

  beforeEach inject ($injector) ->
    # Spy on the user service
    User = $injector.get 'User'
    spyOn(User, 'get').andCallFake -> user

    # Other service dependencies
    $controller = $injector.get '$controller'
    $routeParams = $injector.get '$routeParams'
    $rootScope = $injector.get '$rootScope'
    scope = $rootScope.$new();

    # Set up the controller
    $routeParams.handle = user.handle
    UserCtrl = $controller 'UserCtrl', $scope: scope

  it 'should get the user by :handle', ->
    expect(User.get).toHaveBeenCalledWith 'charlie'
    expect(scope.user.handle).toBe 'charlie'; 
```

无需解决承诺。希望这可以帮助。

# php - 如何在 PHP 中打印从 MySQL 查询中选择的列？

> ID：15048135
> 
> 赞同：-1
> 
> 时间：2013-02-24T02:46:30.417
> 
> 标签：php, mysql

这让我很困惑。例如，我在 MySQL的表中*有一条记录。*

```
 | name | pizza |  burger | fries |  sundae  |
   1 | boo  |   0   |    0    |   1   |    2     | 
```

要手动打印此表：

```
mysql_select_db("my_db", $con);

$result = mysql_query("SELECT * FROM yes WHERE name = 'boo' ");

while($row = mysql_fetch_array( $result ))
{
    echo $row['name'];
    echo "<br />";
    echo $row['fries'];
    echo $row['sundae'];
} 
```

所以，我知道只有薯条会有一个非零值，所以它是我回应的唯一列值。有没有办法在不手动回显列的情况下遍历查询中的所有列？

例如，如果我有 100 种食物，而只有 69 种有非零值，这是否意味着我必须一一回显循环中的所有列？

理想情况下，我希望 PHP 仅显示名称和订购的具有非零值的食品。

输出将类似于 Boo，您订购了 1 个薯条、2 个圣代、n 个食物，等等。

使用 MySQL 和 PHP。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T02:59:24.827

你为什么不试试这个。希望它有所帮助。

请注意，**房间是列名**，**宿舍是表名**

```
<?php

$query = "SELECT rooms FROM dorm";
$result = mysql_query($query);
$get_data = mysql_fetch_array($result);
while (list($column_name, $column_value) = each($get_data)) {
    if ($column_value != 0) {
        echo $column_name; //Outputs Column name
        echo $column_value; //Outputs Column Value
    }
}

?> 
```

# image - 将位图图像加载到特定大小

> ID：15048136
> 
> 赞同：3
> 
> 时间：2013-02-24T02:46:37.827
> 
> 标签：image, bitmap, allegro, allegro5

我正在尝试使用 allegro 将位图加载到特定大小。

al_crate_bitmap(x,y) - 创建一个特定大小的位图 al_load_bitmap(filename) - 加载我需要的图像，但要加载到它的原始大小。

我需要将位图加载到我设置的大小。有任何想法吗？

谢谢，桑尼

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T06:42:33.123

关键是`al_draw_scaled_bitmap()`。有了它，您可以将任何源位图以任何新大小粘贴到目标位图上。因此，您实际上可能不需要创建新的位图。您始终可以使用该函数以不同的大小绘制位图。Allegro 5 是硬件加速的，因此这些类型的操作通常是“免费的”。

直接回答问题：

```
ALLEGRO_BITMAP *load_bitmap_at_size(const char *filename, int w, int h)
{
  ALLEGRO_BITMAP *resized_bmp, *loaded_bmp, *prev_target;

  // 1\. create a temporary bitmap of size we want
  resized_bmp = al_create_bitmap(w, h);
  if (!resized_bmp) return NULL;

  // 2\. load the bitmap at the original size
  loaded_bmp = al_load_bitmap(filename);
  if (!loaded_bmp)
  {
     al_destroy_bitmap(resized_bmp);
     return NULL;
  }

  // 3\. set the target bitmap to the resized bmp
  prev_target = al_get_target_bitmap();
  al_set_target_bitmap(resized_bmp);

  // 4\. copy the loaded bitmap to the resized bmp
  al_draw_scaled_bitmap(loaded_bmp,
     0, 0,                                // source origin
     al_get_bitmap_width(loaded_bmp),     // source width
     al_get_bitmap_height(loaded_bmp),    // source height
     0, 0,                                // target origin
     w, h,                                // target dimensions
     0                                    // flags
  );

  // 5\. restore the previous target and clean up
  al_set_target_bitmap(prev_target);
  al_destroy_loaded_bmp(loaded_bmp);

  return resized_bmp;      
} 
```

我已经注释了代码中的基本步骤。请记住，Allegro 5 有一个隐式目标，通常是显示器的后台缓冲区。但是，如上面的代码所示，如​​果您需要对位图进行位图操作，则可以定位其他位图。

另一种方法，将目标位图移到函数之外：

```
void load_bitmap_onto_target(const char *filename)
{
  ALLEGRO_BITMAP *loaded_bmp;
  const int w = al_get_bitmap_width(al_get_target_bitmap());   
  const int h = al_get_bitmap_height(al_get_target_bitmap());

  // 1\. load the bitmap at the original size
  loaded_bmp = al_load_bitmap(filename);
  if (!loaded_bmp) return;

  // 2\. copy the loaded bitmap to the resized bmp
  al_draw_scaled_bitmap(loaded_bmp,
     0, 0,                                // source origin
     al_get_bitmap_width(loaded_bmp),     // source width
     al_get_bitmap_height(loaded_bmp),    // source height
     0, 0,                                // target origin
     w, h,                                // target dimensions
     0                                    // flags
  );

  // 3\. cleanup
  al_destroy_bitmap(loaded_bmp);
}

ALLEGRO_BITMAP *my_bmp = al_create_bitmap(1000,1000);
al_set_target_bitmap(my_bmp);
load_bitmap_onto_target("test.png");
// perhaps restore the target bitmap to the back buffer, or continue
// to modify the my_bmp with more drawing operations. 
```

# shell - /bin/sh: 1: /home/qingjinlyc/IDEs/llvm-gcc-4.2-2.9-i686-linux: 权限被拒绝

> ID：15048137
> 
> 赞同：1
> 
> 时间：2013-02-24T02:46:42.773
> 
> 标签：shell, uclibc, klee

在构建 klee 时，我需要先为 klee 构建 uclibc。但是当我尝试制作 uclibc 时出了点问题，错误信息是：

```
qingjinlyc@qingjinlyc:~/IDEs/klee-uclibc-0.02-i386$ make
/bin/sh: 1: /home/qingjinlyc/IDEs/llvm-gcc-4.2-2.9-i686-linux: Permission denied
make: execvp: /home/qingjinlyc/IDEs/llvm-gcc-4.2-2.9-i686-linux: Permission denied
make: execvp: /home/qingjinlyc/IDEs/llvm-gcc-4.2-2.9-i686-linux: Permission denied
/bin/sh: 1: /home/qingjinlyc/IDEs/llvm-gcc-4.2-2.9-i686-linux: Permission denied
make[1]: execvp: /home/qingjinlyc/IDEs/llvm-gcc-4.2-2.9-i686-linux: Permission denied
make[1]: execvp: /home/qingjinlyc/IDEs/llvm-gcc-4.2-2.9-i686-linux: Permission denied
extra/scripts/gen_bits_syscall_h.sh: 30: extra/scripts/gen_bits_syscall_h.sh:             /home/qingjinlyc/IDEs/llvm-gcc-4.2-2.9-i686-linux: Permission denied
extra/scripts/gen_bits_syscall_h.sh: 26: extra/scripts/gen_bits_syscall_h.sh:   /home/qingjinlyc/IDEs/llvm-gcc-4.2-2.9-i686-linux: Permission denied
make locale_headers
/bin/sh: 1: /home/qingjinlyc/IDEs/llvm-gcc-4.2-2.9-i686-linux: Permission denied
make[1]: execvp: /home/qingjinlyc/IDEs/llvm-gcc-4.2-2.9-i686-linux: Permission denied
make[1]: execvp: /home/qingjinlyc/IDEs/llvm-gcc-4.2-2.9-i686-linux: Permission denied
make[1]: Nothing to be done for `locale_headers'.
CC libcrypt/crypt.os
/bin/sh: 1: /home/qingjinlyc/IDEs/llvm-gcc-4.2-2.9-i686-linux: Permission denied
make: *** [libcrypt/crypt.os] Error 126 
```

我已经检查了相应目录的权限：

```
drwxrwxrwx  9 qingjinlyc root 4096 Feb 24 08:52 llvm-gcc-4.2-2.9-i686-linux 
```

似乎所有组中的所有用户都有权访问该目录，所以这个make错误是如何发生的很奇怪......

我已经被这个问题困了一整天，任何可以提供帮助的人将不胜感激:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T02:56:34.917

为了执行给定的文件或目录，用户需要对其父目录及其父目录的父目录等的执行权限。我猜这很好`/`，`/home/`所以问题可能出在`/home/qingjinlyc/`和/或其后代之一上。要确认`/`并且`/home/`没问题，您可以运行以下命令：

```
ls -ld / /home/ 
```

并确认其中一个子目录*不是*，您可以运行以下命令：

```
ls -ld /home/qingjinlyc/{,IDEs/{,llvm-gcc-4.2-2.9-i686-linux/}} 
```

然后，要解决此问题，您可以运行以下命令：

```
chmod +x /home/qingjinlyc/{,IDEs/{,llvm-gcc-4.2-2.9-i686-linux/}} 
```

（但您可能需要花点时间考虑一下您是否真的希望该系统的所有用户都能够看到您的主目录中的内容。我的意思是，这可能没问题，但值得花点时间来确定一下。）

# ruby-on-rails - 创建到另一个表后插入 id

> ID：15048142
> 
> 赞同：0
> 
> 时间：2013-02-24T02:48:06.807
> 
> 标签：ruby-on-rails, activerecord

我正在尝试找出在创建项目后获取项目 ID 并将该 ID 传递到另一个表的最佳方法。即用户创建了一个保存到团队数据库中的团队，我想将其分配`team_id`到我的用户表中。

我尝试了以下但没有成功

```
 def create
    @team = Team.new(params[:team])
    @user = current_user
    respond_to do |format|
      if @team.save
        format.html { redirect_to(teams_url,
                                  :notice => "Team #{@team.name} was successfully created.") }
        format.json { render :json => @team, :status => :created, :location => @team }
        @user.update_attributes(params[:user][@team.id])
      else
        format.html { render :action => "new" }
        format.json { render :json => @team.errors, :status => :unprocessable_entity }
      end
    end
  end 
```

团队模式

```
class Team < ActiveRecord::Base
  has_many  :users
  has_many  :events
  belongs_to :division
  belongs_to :sport
  attr_accessible :name, :division_id, :sport_id
  validates :name, :presence => true

end 
```

用户模型

```
class User < ActiveRecord::Base

devise :database_authenticatable, :registerable, :confirmable,
         :recoverable, :rememberable, :trackable, :validatable, :omniauthable

  belongs_to :sport
  belongs_to :team
  has_many :availabilities 
```

sql执行

```
 Started POST "/teams" for 127.0.0.1 at 2013-02-24 15:24:40 +1100
Processing by TeamsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"ztr8E+jg3hCe3cQoDefS3Rw5GQJGZfHsffffbCZiGRs=", "team"=>{"sport_id"=>"19", "division_id"=>"", "name"=>"test"}, "commit"=>"Create Team"}
  User Load (2.1ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  User Load (3.3ms)  SELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
   (0.2ms)  BEGIN
  SQL (0.9ms)  INSERT INTO "teams" ("created_at", "division_id", "name", "sport_id", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Sun, 24 Feb 2013 15:24:40 EST +11:00], ["division_id", nil], ["name", "test"], ["sport_id", 19], ["updated_at", Sun, 24 Feb 2013 15:24:40 EST +11:00]]
   (1.7ms)  COMMIT
   (0.2ms)  BEGIN
   (0.4ms)  ROLLBACK
Redirected to http://localhost:3000/teams 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T02:56:33.883

最简单的修复方法是修复传递给 update_attributes 的参数

```
@user.update_attributes(:team_id => @team.id) 
```

那时，params 散列没有参与其中。它主要包含来自 GET/POST 变量的信息，例如来自您的表单的 params[:team]。

**更新**

看到您的模型后，如果不使 team_id 可访问，update_attributes 将无法工作，这是一个安全问题，通常不应使外键可访问。而是将 update_attributes 替换为分配。

```
def create
  @team = Team.new(params[:team])
  respond_to do |format|
    if @team.save
      format.html { redirect_to(teams_url, :notice => "Team #{@team.name} was successfully created.") }
      format.json { render :json => @team, :status => :created, :location => @team }
      # use assignment instead to avoid mass assignment errors
      current_user.team = @team
    else
      format.html { render :action => "new" }
      format.json { render :json => @team.errors, :status => :unprocessable_entity }
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T03:59:47.657

这个问题应该使用活动记录关联来解决。[http://guides.rubyonrails.org/association_basics.html](http://guides.rubyonrails.org/association_basics.html)
这是将一个项目 id 存储到不同数据库的另一个项目的最佳方法。所以尝试使用活动记录关联。
更新

```
 if @team.save
    @user.update_attributes(:team_id => @team.id)
    format.html { redirect_to(teams_url,
                                  :notice => "Team #{@team.name} was successfully created.") }
   format.json { render :json => @team, :status => :created, :location => @team } 
```

保存后而不是重定向后使用更新代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T04:53:50.700

以下3个选项

```
def create
  @team = Team.new(params[:team])
  saved = false

  Team.transaction do
    saved = @team.save
    if saved
      # 1) this should work ?
      @team.users << current_user
      # 2) if that doesn't then this most def
      current_user.team = @team
      current_user.save!
      # 3) or 
      current_user.update_attribute(:team_id, @team.id)
    end
  end

  respond_to do |format|
    if saved        
      format.html { redirect_to(teams_url, :notice => "Team #{@team.name} was successfully created.") }
      format.json { render :json => @team, :status => :created, :location => @team }        
    else
      format.html { render :action => "new" }
      format.json { render :json => @team.errors, :status => :unprocessable_entity }
    end
  end     
end 
```

# cocoa - NSString 字符串扩展不起作用

> ID：15048147
> 
> 赞同：1
> 
> 时间：2013-02-24T02:49:22.433
> 
> 标签：cocoa, nsstring

我正在尝试以下的 GTMNSString+XML.h 字符串扩展名。

```
NSString *value = @"some text";
NSString *newString = [value gtm_stringBySanitizingAndEscapingForXML]; 
```

但是，这会崩溃，但有一个例外：

> [__NSCFConstantString gtm_stringBySanitizingAndEscapingForXML]：无法识别的选择器发送到实例 0x541f4

GTMNSString+XML.h[在这里](http://code.google.com/p/google-toolbox-for-mac/source/browse/trunk/Foundation/GTMNSString%2BXML.m)定义。

问题可能是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T12:24:37.840

您将需要包含或导入才能获得该功能。您可以通过使用 respondsToSelector 进行记录来验证：

# json - 使用 NSDateFormatter 转换 NSDate 时遇到问题

> ID：15048153
> 
> 赞同：1
> 
> 时间：2013-02-24T02:50:29.463
> 
> 标签：json, nsstring, nsdate, nsdateformatter

我正在尝试将“2013-02-21T01:25:00.000Z”格式的日期转换为凌晨 1:25

```
 NSDate *DepartTimeString = [DepartATime valueForKey:@"dateLocal"]; 
```

NSDate 是从 JSON 中解析出来的，并在标签上显示为字符串，但它不会使用以下方法转换为更小的格式：

```
 NSDateFormatter *timeFormatter = [[NSDateFormatter alloc] init];
    [timeFormatter setTimeStyle:NSDateFormatterLongStyle];
    NSString *timeString = [timeFormatter stringFromDate:DepartTimeString];
    NSLog(timeString); 
```

NSLog 什么也没显示...

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T08:57:12.300

代替：

```
[timeFormatter setTimeStyle:NSDateFormatterLongStyle]; 
```

至：

```
[timeFormatter setDateFormat: @"yyyy-MM-ddTHH:mm:ss.SSS"]; 
```

并检查验证**DepartTimeString**

# cmd - 为什么我的程序无法编译？（在 cmd.exe 中）

> ID：15048157
> 
> 赞同：0
> 
> 时间：2013-02-24T02:50:56.543
> 
> 标签：cmd, c++builder

我刚刚制作了一个名为“firstprog.c”的程序，现在我在“cmd.exe”中；我正在按照说明进行操作：

> “通过执行 C 编译器来编译文件。您可以通过运行 BCC32 编译器来执行此操作：只需键入“bcc32 firstprog.c””

我下载并安装了 Bcc32（borland C++ 编译器），然后在 'cmd.exe' 中输入了它告诉我的内容（bcc32 firstprog.c）；它想出了这个：

> “'bcc32' 不是内部或外部命令、可运行程序或批处理文件。”

当我键入`dir`时，它会列出“firstprog.c”程序，这很好。有人能告诉我为什么它不编译吗？我认为这是因为没有配置 Borland C++ 还是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T02:53:40.123

它根本找不到 bcc32 可执行文件。要从命令提示符内的任何目录中找到它，它的目录必须是 PATH 环境变量的一部分。将适当的目录添加到其中，您应该一切顺利。

您很可能会在以下位置找到此内容：

> “我的电脑”>“属性”>“高级”>“环境变量”>“路径”

添加正确的路径后，请确保关闭命令提示符并重新打开它。

# php - PHP中添加Object(Class)数组，不识别对象类型

> ID：15048161
> 
> 赞同：2
> 
> 时间：2013-02-24T02:51:54.600
> 
> 标签：php, arrays, class

我有下一个类和接口

```
namespace includ\views;
interface IView 
{
    public function getContenido( );
    public function imprimirContenido( );
} 
```

```
namespace includ\views;

require_once ('IView.php' );
use includ\views\IView as IView;

interface IMenu extends IView
{

    public  function getTipo();
   public function __clone();
} 
```

```
namespace includ\views;

require ('IMenu.php');
use includ\views\IMenu;

class MenuAdministrador implements IMenu
{
  ...
} 
```

并制作一个数组

```
 require_once ( 'menu/MenuAdministrador.php' );

 $menus=array();
 $menus[] = new includ\views\MenuAdministrador();
  //or other way
 //array_push(  $menus, new includ\views\MenuAdministrador() ); 
```

但是，我尝试检查课程的类型，我做了一些类似的事情：

```
 var_dump($menus[0] instanceof IMenu ); 
```

答案是：

```
 bool(false) 
```

将对象（类）添加到数组的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T08:33:45.533

这是一个命名空间问题。您必须`use Includ\views\IMenu`首先或更好地将完全限定的类名与`instanceof`.

# ios - 在 iOS 的 Flash 或 Air 中，同时使用 stage 和 stage3d 是否会让您在设备上使用过多的 CPU/GPU 资源？

> ID：15048164
> 
> 赞同：1
> 
> 时间：2013-02-24T02:53:31.600
> 
> 标签：ios, flash, air, rendering, gpu

由于 stage3d 使用 GPU 绘制而舞台 DisplayObjects 主要使用 CPU 绘制，我想知道是否同时使用 stage 和 stage3d 可以让您使用每个实例不使用的 CPU/GPU 资源？

我的游戏使用了一些繁重的矢量图形（它们的动画太长，无法转换为 stage3d 纹理），如果 stage 可以使用 CPU 渲染它们并将其他所有内容留给 stage3d（GPU），那就太好了。

它会那样工作吗？

# c++ - “1.0f”和“1.f”有什么区别？

> ID：15048165
> 
> 赞同：11
> 
> 时间：2013-02-24T02:53:39.513
> 
> 标签：c++, floating-point, conventions

作为 John Carmack 的崇拜者，我正在阅读 Id Tech 的公开可用的编码约定文档（如果您有兴趣，请访问[ftp://ftp.idsoftware.com/idstuff/doom3/source/CodeStyleConventions.doc](ftp://ftp.idsoftware.com/idstuff/doom3/source/CodeStyleConventions.doc) ），并且遇到了一个我不完全理解的约定：

> 除非明确需要双精度，否则对浮点值使用精度规范。
> 
> `float f = 0.5f`
> 
> 代替
> 
> `float f = 0.5;`
> 
> 和
> 
> `float f = 1.0f;`
> 
> 代替
> 
> `float f = 1.f;`

这些有什么不同？

我可以理解第一个示例中两者之间的区别（后者在引擎盖下进行双浮点转换），尽管我怀疑它只需要一个不愚蠢的编译器来捕获并生成相同的字节码，没有运行时差异。

但是在任何情况下，在浮点值声明中添加尾随 0 会改变事情吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-24T02:56:26.943

> 但是在任何情况下，在浮点值声明中添加尾随 0 会改变事情吗？

添加零会改变的唯一“事情”是可读性。结果代码将完全相同，因为编译器不在乎，但是带有零的常量会更容易被人类读者阅读。

# javascript - 了解backbone.js 属性和toJSON()

> ID：15048167
> 
> 赞同：1
> 
> 时间：2013-02-24T02:53:52.683
> 
> 标签：javascript, backbone.js

我很困惑，可以使用一些帮助。

我在一个渲染函数中，我有以下三个调试行：

```
 console.debug(this.model);
            foo = this.model.toJSON();
            console.debug(foo); 
```

第一行的输出是一个模型实例，其中包含从服务器获取的数据，并且 attributes 属性填充了我所期望的。

但是，第二个 console.debug 调用包含一个空对象。

是什么赋予了？这第二位调试输出不应该包含相同的属性但 JSON 化了吗？

以下是完整的代码：

```
 function get_race() {

    var RaceModel = Backbone.Model.extend({
        urlRoot: api_root + 'race/1/?format=json',

    });

    var RaceView = Backbone.View.extend({
        template: _.template('<h1>a template</h1><h2>desc: <%= year %></h2>'),
        initialize: function() {
            this.model = new RaceModel();
            this.model.fetch();
            this.render();
        },
        render: function() {
            console.debug(this.model);
            foo = this.model.toJSON();
            console.debug(foo);
            this.$el.html(this.template(this.model));
            return this;
        }
    });

    var race_view = new RaceView({ el: $("#backbone_test") }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T03:20:53.720

我认为正在发生的事情是在获取模型之前调用了渲染。您应该在调用 fetch 之前将其放入 initialize 并删除对渲染的调用。

```
this.listenTo(this.model, "change", this.render); 
```

当像这样直接调用 render 时， this.model.toJSON() 将返回一个空对象，因为此时那里没有任何内容。但是您的调试器将在获取 this.model 时对其进行更新，因为它正在显示引用。

为了证明这一点，请尝试记录一些不可变的内容，例如 console.log(JSON.stringify(this.model));

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T08:01:30.300

将您的获取代码更改为：

```
that = this
this.model.fetch(
    success: function () { 
        that.render();
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T16:11:17.733

您很可能被日志中的结果欺骗了。使用正确值记录对象的原因是因为 console.log() 保留对已记录对象的引用。这可以使用以下 html 页面在 Chrome 中观察到：

```
<!doctype html>
<html lang="en">
<head>
<script type="text/javascript">
    var object = { title: null };
    console.log(object);
    function update() { object.title = document.getElementById("title").value; }
</script>
</head>
<body>
    <input id="title" type="text" value="New title"/><br/>
    <button onclick="update()">Update title</button>
</body>
</html> 
```

1.  在未加载开发者工具的情况下在 Chrome 中加载页面。
2.  打开 javascript 控制台并检查记录的实例的值是否为空。
3.  关闭 JavaScript 控制台。
4.  单击按钮以更新标题。
5.  重新打开 JavaScript 控制台。标题现在使用新值更新，即使它是同一日志行。

为了确保在渲染视图之前已经加载了值，您需要等待结果。我个人会选择 nEEbz 解决方案。

# java - Thread.yield() 和 Thread.sleep() 的区别

> ID：15048170
> 
> 赞同：2
> 
> 时间：2013-02-24T02:55:42.007
> 
> 标签：java, multithreading, synchronization, thread-safety

`Thread.yield()`有人可以解释方法和`Thread.sleep()`方法之间的区别吗？

我是如何理解的：`Thread.yield()`将监视器锁放弃给 JVM 决定接下来执行的其他线程，`Thread.sleep()`并将当前线程置于睡眠模式给定的毫秒数，而不会放弃监视器锁。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-24T02:59:17.643

这取决于您使用的 Java 版本，根据[这个](http://www.javamex.com/tutorials/threads/yield.shtml)：

> 在 Java 5 中，`Thread.yield()`调用 Windows API `Sleep(0)`。这具有清除当前线程的量子（分配的 CPU 时间片数）并将其置于队列末尾以获取其优先级的特殊效果。换句话说，所有具有相同优先级（以及更高优先级）的可运行线程将有机会在产生的线程下一次给定 CPU 时间之前运行。当它最终被重新调度时，它将返回一个完整的量程，但不会“结转”任何剩余的量程，从让步时开始。这种行为与非零睡眠略有不同，在非零睡眠中，睡眠线程通常会丢失 1 个量子值（实际上是 10 或 15 毫秒滴答的 1/3）。
> 
> 在 Java 6 中，这种行为发生了变化。Hotspot VM 现在 `Thread.yield()`使用 Windows `SwitchToThread()`API 调用来实现。此调用使当前线程放弃其当前时间片，但不放弃其整个时间片。这意味着根据其他线程的优先级，屈服线程可以在稍后的一个中断周期内重新调度。

* * *

`Thread.sleep()`无论您使用什么 Java 版本，都将当前线程挂起指定时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T02:59:32.697

Thread.sleep() 让你的线程休眠一段时间或直到被中断。Thread.yield() 不会让你的线程进入睡眠状态。相反，它只是暂时暂停线程，让其他线程完成它们的工作。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-24T03:01:59.623

关。Thread.sleep 使线程休眠指定的时间，但不放弃锁。

Thread.yield 也不会放弃锁。它只是提示线程调度程序给另一个线程一些周期。

他们真的一点都不像，他们是非常不同的。

您是否正在尝试解决某个特定问题？

# c# - 多个文件上传重置 Request.Files

> ID：15048179
> 
> 赞同：0
> 
> 时间：2013-02-24T02:57:50.020
> 
> 标签：c#, asp.net, file-upload, multifile-uploader

我正在使用 asp.net 文件上传器控件，但是当用户选择文件两次时，第一个选择被重置。例如：我选择了3个文件，在点击上传按钮之前，我再次点击“浏览”，然后再选择两个。比我点击上传按钮。如果我调用 Resquest.Files，我只会得到最后两个文件。我需要获取所有 5 个文件。

WebForm1.aspx： http: [//pastebin.com/kkpUA3dr](http://pastebin.com/kkpUA3dr)

WebForm1.aspx.cs： http: [//pastebin.com/N9ahyU8c](http://pastebin.com/N9ahyU8c)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T03:07:29.443

我不确定你想达到什么目标，但我认为这是意料之中的。我猜如果您使用上传文件控件多次选择文件，该控件只会保留最后一次选择，即默认行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T04:51:06.007

然后你需要多个文件上传器

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-05T07:45:01.023

`asp:FileUpload`不支持你这样做。在这种情况下，您可以使用其他库来上传多个文件。HTML：

```
<html >
<head runat="server">
    <title>Multiple file Upload</title>
    <script src="http://jquery-multifile-plugin.googlecode.com/svn/trunk/jquery.js" 
    type="text/javascript"></script>
    <script src="http://jquery-multifile-plugin.googlecode.com/svn/trunk/jquery.MultiFile.js" 
    type="text/javascript"></script>
</head>
<body>
    <form id="form1" runat="server">
    <div>

        <asp:FileUpload ID="FileUploadJquery" runat="server" 
        class="multi" accept="jpg|png" />

    </div>
    </form>
</body>
</html>
```

处理文件上传控制的 C# 代码：

```
string fileName1 = "";
string FullName1 = "";
HttpFileCollection uploads = Request.Files;
//for (int fileCount = 0; fileCount < uploads.Count; fileCount++)
for (int fileCount = 1; fileCount < 6; fileCount++)
{
    if (fileCount < uploads.Count)
    {
        HttpPostedFile uploadedFile = uploads[fileCount];
        fileName1 = Path.GetFileName(uploadedFile.FileName);
        if (uploadedFile.ContentLength > 0)
        {
            string[] a = new string[1];
            a = uploadedFile.FileName.Split('.');
            fileName1 = a.GetValue(0).ToString() + 
            "." + a.GetValue(1).ToString();
            uploadedFile.SaveAs(Server.MapPath
            ("mobile_image/mob_img/" + fileName1));
        }
} 
```

来源： http: [//www.codeproject.com/Tips/531692/Multiple-File-Upload-Using-jQuery](http://www.codeproject.com/Tips/531692/Multiple-File-Upload-Using-jQuery)

# mysql - MySQL 数据库 - 优化相同的多个字段

> ID：15048190
> 
> 赞同：0
> 
> 时间：2013-02-24T03:00:00.693
> 
> 标签：mysql, optimization, field

最近我创建了一个成就系统，`achievement1`当某件事取得成就时，它将一个字段设置为 int 1，问题是我们有超过 100 个字段`achievement1`，`achievement2`等等`achievement3`......

所以我的问题是如何优化这个？我正在考虑在一个字段中存储一个字符串，例如`1,0,1,0,1,0,1...`0 表示未实现的成就，1 表示已完成。但这会不会更糟，因为我每次都必须更新一个很长的字符串而不是 1 个整数？

我到处寻找答案，但没有发现任何有用的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T03:05:06.383

您可以创建一个表来存储每个用户的成就（假设它们以某种方式与用户相关）。UserID 可能有一个外键，然后是成就编号的整数值。所以 (15,1) 表示 ID 为 15 的用户已经完成了成就 1。如果您想查找用户已完成的所有成就，只需执行以下操作：

`SELECT achievementNumber FROM tblAchievements WHERE UserID = 15`.

“成就”的文字真的很随意，重要的是你如何使用它。

# excel - 在 Excel 2010 中使用 VBA 隐藏列

> ID：15048191
> 
> 赞同：2
> 
> 时间：2013-02-24T03:00:25.240
> 
> 标签：excel, vba

根据存储在特定单元格（例如`A1`工作表）中的值，我想隐藏工作表中从 B 列开始的许多列。

我正在尝试做的示例：

*   如果单元格 A1 的值 = 10，则隐藏 B 列加上 B 之后的 10 列
*   如果单元格 A2 的值 = 11，则隐藏 B 列加上 B 后的 11 列

困难实际上是 Excel（或至少我的 Excel 文件）使用字母表（A、B、...）作为列名的方式。`rows("2:" & range("A1").value)`在使用类似和设置的代码之前，我已经在行上完成了此操作`.hide = true`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T12:04:58.820

我想在上面的格伦回答中添加评论，但没有足够的声誉。我要补充的是，您不需要激活工作表或选择列，您可以简单地继续隐藏列：

```
Worksheets("TheSheet").Columns(2).Resize(, numColumnsToHide).EntireColumn.Hidden = True 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T04:57:22.857

您可以通过索引号来引用列：[`Columns(indexnumber)`](http://msdn.microsoft.com/en-us/library/office/aa214202%28v=office.11%29.aspx)并且您可以使用[`Resize()`](http://msdn.microsoft.com/en-us/library/office/aa176182%28v=office.11%29.aspx)设置要选择的列数，如下所示：

```
Sub HideColumns()
    Dim numColumnsToHide

    numColumnsToHide = Cells(1, 1).Value

    Columns(2).Resize(, numColumnsToHide).Select

    Selection.EntireColumn.Hidden = True
End Sub 
```

显然，这段代码没有任何对 in 值的验证，`A1`所以如果有人在`HideColumns()`没有整数 in 的情况下运行`A1`，就会发生不好的事情。这也不会取消隐藏任何隐藏的列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-23T23:58:26.480

请不要复杂化就去做

Sub occultaColunas()

Range("D:E").EntireColumn.Hidden = True

结束子

# c# - 在 X 轴值的任一侧添加空格 - Microsoft Charting

> ID：15048193
> 
> 赞同：2
> 
> 时间：2013-02-24T03:01:09.780
> 
> 标签：c#, charts

我正在使用 C# Microsoft Charting Controls 生成此图表...

如何消除左右手边的间隙，使系列实际上从 0 值 y 轴开始？我的系列数据中没有空白值，但它在左侧和右侧添加了这些额外的空白值......

例如，我希望图表在右侧的“S”值处停止，之后没有空白的额外值。

![示例图表](../Images/b1b28f57789f511d17ced5180e3fe21b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-02-08T12:35:48.483

转到`ChartAreas -> Axes -> X axis -> IsMarginVisible -> false`图表上的属性框。

那是如果您总是希望隐藏边距。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T03:12:53.187

好的，这个帖子解决了我的问题，谢谢！！

[删除 DataVisualization 图表 x 轴末端的空白](https://stackoverflow.com/questions/14060239/remove-blanks-at-ends-of-datavisualization-chart-x-axis)

这段代码很好用：

```
 this.chart1.ChartAreas[0].AxisX.Minimum = 0;   // if your minimum X = 0
 this.chart1.ChartAreas[0].AxisX.Maximum = 100; // if your maximum X = 100 
```

但在我的情况下，最小值 = 1 和最大值 = 30 ......

# javascript - 为什么我会收到这个 jsfiddle 错误，document.write 可以是 eval 的一种形式

> ID：15048194
> 
> 赞同：11
> 
> 时间：2013-02-24T03:01:24.233
> 
> 标签：javascript, jsfiddle

我正在测试我在读书时发现的代码。我在 JS fiddle 中对其进行测试时遇到此错误，`document.write`可能是 eval 的一种形式。

```
 var text = '<html><body bgcolor=linen><p>' +
    'This is <b>bold<\/b>!<\/p><\/body><\/html>';

var tags = /[^<>]+|<(\/?)([A-Za-z]+)([^<>]*)>/g;
var a, i;
while ((a = tags.exec(text))) {
    for (i = 0; i < a.length; i += 1) {
        document.writeln(('// [' + i + '] ' + a[i]).entityify());
    }
    document.writeln();
} 
```

我在两行都收到了上面的 JSfiddle 警告`document.writeln()`。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-24T03:09:13.207

请注意，这只是一个警告 - 但应该受到尊重。它实际上是由一个名为[JSLint](http://en.wikipedia.org/wiki/JSLint)的检查器生成的——关于这个警告的推理，可以在[http://www.jameswiseman.com/blog/2011/03/31/jslint-messages-document-write-可以是 eval/ 的形式](http://www.jameswiseman.com/blog/2011/03/31/jslint-messages-document-write-can-be-a-form-of-eval/)。

基本上，其基础是“ [eval 是邪恶的](http://www.jameswiseman.com/blog/2011/01/18/jslint-messages-eval-is-evil/)” -`document.write`可用于执行评估。

除此之外 - 上面没有提到，`document.write`尽可能避免，除了可能是简单的测试。它在被认为“完成”后写入 DOM，此时只能使用支持的 DOM 方法进行修改。与此相关的其他详细信息在[为什么 document.write 被认为是“不好的做法”？](https://stackoverflow.com/questions/802854/why-is-document-write-considered-a-bad-practice)- 提到“使用安全且对 DOM 友好的[DOM 操作方法](https://developer.mozilla.org/en-US/docs/Web/API/Document)要好得多”（`document.createElement`,`element.appendChild`等）。[https://developer.mozilla.org/en-US/docs/Web/API/Document_object_model/Using_the_W3C_DOM_Level_1_Core](https://developer.mozilla.org/en-US/docs/Web/API/Document_object_model/Using_the_W3C_DOM_Level_1_Core)提供了一个很好的具体示例。

# python - SyntaxError：mysqlDb python中的语法无效

> ID：15048197
> 
> 赞同：1
> 
> 时间：2013-02-24T03:01:40.700
> 
> 标签：python, python-2.4

我正在尝试使用 python 测试以下内容，但出现无效的语法错误：

```
db = None

try:

db = mdb.connect("localhost","user","pass","dbName") 

with db:

    cur = db.cursor()                   
    cur.execute("SELECT * from product")

    rows = cur.fetchall()
    for row in rows:
        print row

except mdb.Error, e:

print "Error %d: %s" % (e.args[0],e.args[1])
sys.exit(1) 
```

错误如下：

```
 File "script.py", line 11
with db:
      ^
SyntaxError: invalid syntax 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T03:51:07.513

我也很高兴看到你所有的导入声明，看看你的代码中可能缺少什么。我假设您至少在某处有 import MySQLdb。我制作了一个带有几个数据行的虚拟数据库来测试这一点。不知道python如何让你摆脱所有被弄乱的缩进块，但也许这只是你的代码缩进在这里发布错误。

这是我尝试过的代码，似乎没有问题：

```
import MySQLdb as mdb

db = None

try:

    db = mdb.connect("localhost","user", "password", "test_data")

    ## with db:  ## try taking this out for Python 2.4
    cur = db.cursor()
    cur.execute("SELECT * FROM PRODUCT")
    rows = cur.fetchall()
    for row in rows:
        print row

except mdb.Error, e:

    print "Error %d: %s" % (e.args[0],e.args[1])
    sys.exit(1) 
```

# eclipse - cmake 无法识别 CMAKE_ECLIPSE_VERSION 设置

> ID：15048204
> 
> 赞同：15
> 
> 时间：2013-02-24T03:03:00.230
> 
> 标签：eclipse, variables, cmake, eclipse-cdt

我正在尝试从现有的 cmake 文件生成 eclipse .project 和 .cproject 。从项目根目录运行 cmake 我尝试添加到根 CMakeLists.txt 集（CMAKE_ECLIPSE_VERSION=4.2），如果我理解正确的话，它显然可能什么都不做，因为它是一个局部变量，而不是全局环境变量。

尝试像这样将标志添加到命令行：

```
cmake -G"Eclipse CDT4 - Unix Makefiles" -DCMAKE_ECLIPSE_VERSION=4.2 . 
```

产生以下警告。那么如何让 cmake 知道 eclipse 版本呢？

-- 无法确定 Eclipse 版本，假设至少为 3.6 (Helios)。如果这是错误的，请调整 CMAKE_ECLIPSE_VERSION。

我检查了 .project 文件，它似乎正在使用 cdt 4。很旧。

凯斯滕

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-23T22:35:24.307

我遇到了同样的问题，在查看 CMake 的代码后，我注意到用于获取 Eclipse 版本的实际变量名为 _ECLIPSE_VERSION（以下划线开头）而不是 CMAKE_ECLIPSE_VERSION。代码如下所示：

```
cmake -G"Eclipse CDT4 - Unix Makefiles" -D_ECLIPSE_VERSION=4.2 . 
```

这对我有用！

**编辑：旧版本的 CMake 无法识别 Eclipse 4.2**（使用 CDT 8.1），但可以识别 3.7（使用 CDT 8.0）。我使用 -D_ECLIPSE_VERSION=3.7 并且 Juno 很好地选择了项目配置（以前由于默认生成的 CDT4 文件不兼容，我有未解决的包含）。正如 m3tikn0b 所指出的，在 Eclipse Kepler 4.3 之前，较新版本的 CMake 可以识别。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-12-06T19:47:37.607

CMake 中有一个错误。请参阅[0014422：CMAKE_ECLIPSE_VERSION 未考虑在内](http://www.cmake.org/Bug/view.php?id=14422)。问题跟踪器说它将在 cmake 2.8.13 中更正。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-11-03T17:19:57.717

同样的问题。经过搜索，我找到了以下解决方案：

以前尝试过：

```
cmake -G"Eclipse CDT4 - Unix Makefiles" -D_ECLIPSE_VERSION=4.2  ../src 
```

它不起作用。然后我尝试了：

```
cmake -G"Eclipse CDT4 - Unix Makefiles" -DCMAKE_ECLIPSE_VERSION=4.2  ../src 
```

这对我有用..我希望它有所帮助。

# java - 尝试使用 JAVA 将位置传递给 Web 服务时出现问题 [关闭]

> ID：15048209
> 
> 赞同：1
> 
> 时间：2013-02-24T03:03:39.700
> 
> 标签：java, android, http-post

我正在尝试通过我的 android 应用程序在我的网络服务上传递我的位置。但我现在有这样的错误。

日志猫：

```
02-24 21:37:35.438: E/AndroidRuntime(657): FATAL EXCEPTION: main
02-24 21:37:35.438: E/AndroidRuntime(657): android.os.NetworkOnMainThreadException
02-24 21:37:35.438: E/AndroidRuntime(657):  at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1099)
02-24 21:37:35.438: E/AndroidRuntime(657):  at libcore.io.BlockGuardOs.connect(BlockGuardOs.java:84)
02-24 21:37:35.438: E/AndroidRuntime(657):  at libcore.io.IoBridge.connectErrno(IoBridge.java:127)
02-24 21:37:35.438: E/AndroidRuntime(657):  at libcore.io.IoBridge.connect(IoBridge.java:112)
02-24 21:37:35.438: E/AndroidRuntime(657):  at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:192)
02-24 21:37:35.438: E/AndroidRuntime(657):  at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:459)
02-24 21:37:35.438: E/AndroidRuntime(657):  at java.net.Socket.connect(Socket.java:842)
02-24 21:37:35.438: E/AndroidRuntime(657):  at org.apache.http.conn.scheme.PlainSocketFactory.connectSocket(PlainSocketFactory.java:119)
02-24 21:37:35.438: E/AndroidRuntime(657):  at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:144)
02-24 21:37:35.438: E/AndroidRuntime(657):  at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
02-24 21:37:35.438: E/AndroidRuntime(657):  at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
02-24 21:37:35.438: E/AndroidRuntime(657):  at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
02-24 21:37:35.438: E/AndroidRuntime(657):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
02-24 21:37:35.438: E/AndroidRuntime(657):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
02-24 21:37:35.438: E/AndroidRuntime(657):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
02-24 21:37:35.438: E/AndroidRuntime(657):  at com.example.projectthesis.JSONParser.makeHttpRequest(JSONParser.java:51)
02-24 21:37:35.438: E/AndroidRuntime(657):  at com.example.projectthesis.LocationGetter.onLocationChanged(LocationGetter.java:138)
02-24 21:37:35.438: E/AndroidRuntime(657):  at android.location.LocationManager$ListenerTransport._handleMessage(LocationManager.java:234)
02-24 21:37:35.438: E/AndroidRuntime(657):  at android.location.LocationManager$ListenerTransport.access$000(LocationManager.java:167)
02-24 21:37:35.438: E/AndroidRuntime(657):  at android.location.LocationManager$ListenerTransport$1.handleMessage(LocationManager.java:183)
02-24 21:37:35.438: E/AndroidRuntime(657):  at android.os.Handler.dispatchMessage(Handler.java:99)
02-24 21:37:35.438: E/AndroidRuntime(657):  at android.os.Looper.loop(Looper.java:137)
02-24 21:37:35.438: E/AndroidRuntime(657):  at android.app.ActivityThread.main(ActivityThread.java:4424)
02-24 21:37:35.438: E/AndroidRuntime(657):  at java.lang.reflect.Method.invokeNative(Native Method)
02-24 21:37:35.438: E/AndroidRuntime(657):  at java.lang.reflect.Method.invoke(Method.java:511)
02-24 21:37:35.438: E/AndroidRuntime(657):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
02-24 21:37:35.438: E/AndroidRuntime(657):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
02-24 21:37:35.438: E/AndroidRuntime(657):  at dalvik.system.NativeStart.main(Native Method) 
```

**

我已经把我的网络传递代码放到 onLocationChange 部分，这里是：

位置获取器：

```
public class LocationGetter extends MapActivity implements LocationListener { // <1>
    private static final String TAG = "LocationActivity";
        LocationManager locationManager; // <2>
    Geocoder geocoder; // <3>
    TextView locationText;
    MapView map;
    MapController mapController; // <4>

// Progress Dialog
private ProgressDialog pDialog;
//JSONParser Object creation
JSONParser jsonParser = new JSONParser();
// url to pass location to web
//private static String url_create_product = "http://student-thesis.netii.net/location_adding.php";
private static String url_create_product = "http://10.0.2.2/TheCalling/location_adding.php";

// JSON Node names
private static final String TAG_SUCCESS = "success";
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.maps);
    locationText = (TextView) this.findViewById(R.id.lblLocationInfo);
    map = (MapView) this.findViewById(R.id.mapview);
    map.setBuiltInZoomControls(true);
    mapController = map.getController(); // <4>
    mapController.setZoom(19);
    locationManager = (LocationManager) this
            .getSystemService(LOCATION_SERVICE); // <2>
    geocoder = new Geocoder(this); // <3>
    Location location = locationManager
            .getLastKnownLocation(LocationManager.GPS_PROVIDER); // <5>
    if (location != null) {
        Log.d(TAG, location.toString());
        this.onLocationChanged(location); // <6>
    }
}
@Override
protected void onResume() {
    super.onResume();
    locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER,
            60000, 5, this); // <7>
}
@Override
protected void onPause() {
    super.onPause();
    locationManager.removeUpdates(this); // <8>
}
@Override
public void onLocationChanged(Location location) { // <9>
    Log.d(TAG, "onLocationChanged with location " + location.toString());
    String text = String.format(
            "Lat:\t %f\nLong:\t %f\nAlt:\t %f\nBearing:\t %f \n",
            location.getLatitude(), location.getLongitude(),
            location.getAltitude(), location.getBearing());
    this.locationText.setText(text);
    try {
        List<Address> addresses = geocoder.getFromLocation(
                location.getLatitude(), location.getLongitude(), 10); // <10>
        for (Address address : addresses) {
            this.locationText.append(" " + address.getAddressLine(0));
        }
        int latitude = (int) (location.getLatitude() * 1000000);
        int longitude = (int) (location.getLongitude() * 1000000);      

        GeoPoint point = new GeoPoint(latitude, longitude);
        mapController.animateTo(point); // <11>

        List<Overlay> mapOverlays = map.getOverlays();
        Drawable drawable = this.getResources().getDrawable(R.drawable.reddot);
        AddItemizedOverlay itemizedOverlay =
        new AddItemizedOverlay(drawable, this);

        OverlayItem overlayitem = new OverlayItem(point, "Hello", "Sample Overlay item");

        itemizedOverlay.addOverlay(overlayitem);
        mapOverlays.add(itemizedOverlay);

        String strLatitude = Integer.toString(latitude);
        String strLongitude = Integer.toString(longitude);

        //Building parameters
        List<NameValuePair> params = new ArrayList<NameValuePair>();
        params.add(new BasicNameValuePair("latitude", strLatitude));
        params.add(new BasicNameValuePair("longitude", strLongitude));

        // getting JSON Object
        // Note that create product url accepts POST method
        JSONObject json = jsonParser.makeHttpRequest(url_create_product,
                "POST", params);

        // check log cat fro response
        Log.d("Create Response", json.toString());

        try {
            int success = json.getInt(TAG_SUCCESS);
            if (success == 1) {
                // successfully updated
                Toast.makeText(getBaseContext(), "Location Passing successful", Toast.LENGTH_SHORT).show();
            } else {
                // failed to create product
                Toast.makeText(getBaseContext(), "Location Passing Unsuccessful", Toast.LENGTH_SHORT).show();
            }
        } catch (JSONException e) {
            e.printStackTrace();
        }

    } catch (IOException e) {
        Log.e("LocateMe", "Could not get Geocoder data", e);
    }
}
@Override
public void onProviderDisabled(String provider) {
    // TODO Auto-generated method stub
}
@Override
public void onProviderEnabled(String provider) {
    // TODO Auto-generated method stub
}
@Override
public void onStatusChanged(String provider, int status, Bundle extras) {
    // TODO Auto-generated method stub
}
@Override
protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    return false;
}
} 
```

我该如何处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T03:28:35.790

在您的 onLocationChanged 中启动一个自定义 AsyncTask 并在他的 doInBackground 方法中放入所有使用 http 连接（如 jsonParser.makeHttpRequest）的代码。

然后在 AsyncTask 的 postExecute 方法中，您应该更新数据和/或 ui。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T03:31:50.870

我的天啊。不允许在主线程上*进行*网络操作。当然，除非您希望您的用户讨厌您。

AsyncTask 工作正常，但我认为使用后台服务 (IntentService) 可以获得更好的结果。这将您的位置上传与您的前景分离，这将允许您缓存更新等。

另外，我注意到您在尝试发送数据之前没有检查您是否有网络连接。似乎*tubez*无处不在:)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T03:24:29.323

在这里看到这个[问题](https://stackoverflow.com/questions/6343166/android-os-networkonmainthreadexception)。您不能在主线程上进行网络操作。无论是 Mark sed 还是 AsyncTask

或（这是不推荐的）

您可以在主线程中允许网络操作。这不好，因为它会锁定你的 UI，给用户带来不好的体验。

```
StrictMode.ThreadPolicy policy = new StrictMode. ThreadPolicy.Builder().permitAll().build(); 
StrictMode.setThreadPolicy(policy); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-24T03:18:27.720

我的网络服务也有这样的例外。发生这种情况是因为我没有在异步任务私有类中进行 Web 服务调用。您应该尝试将代码放在该类中，这样它就不会导致网络超时。

如果这没有帮助，我将删除我的答案。我不想有一个糟糕的答案作为唯一的答案。只是评论

# python - MATLAB的place函数有python版本吗

> ID：15048210
> 
> 赞同：2
> 
> 时间：2013-02-24T03:03:48.350
> 
> 标签：python, matlab, numpy, eigenvalue

MATLAB 的[place](http://www.mathworks.com/help/control/ref/place.html)函数非常方便地确定一个矩阵，该矩阵为您提供所需的系统特征值。

我正在尝试在 Python 中实现它，但[numpy.place](http://www.scipy.org/Numpy_Example_List_With_Doc#head-046cf7230c3f738a12bf552fc7f13c3ee1715813)似乎不是一个类似的函数，而且我一生都无法在 numpy 或 scipy 文档中找到更好的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T03:47:39.203

[在Python 控制系统库](http://python-control.sourceforge.net/manual/index.html)中找到了这个和其他控制函数

# opengl - OpenGL 4 VBO 和 Numpy 数组、Pyglet/Python 的问题

> ID：15048211
> 
> 赞同：9
> 
> 时间：2013-02-24T03:03:58.477
> 
> 标签：opengl, numpy, vbo, pyglet, vertex-array-object

我开始在 Python 中使用 OpenGL 4（通过 Pyglet 和一些框架代码，我从网上下载/自己编写用于加载着色器/程序），但我认为我对事情的理解相当好，所以我认为没有我的代码中某处有问题。

那么我的问题是什么？似乎当 numpy 数组或缓冲区达到一定大小时，我在绘图时会发生奇怪的事情。请查看链接的图片以了解我的意思。 [http://i.imgur.com/8Oym6VA.png?1](https://i.imgur.com/8Oym6VA.png?1)

在图片上你可以看到我正在画一些“机器人”，每个机器人都是由 8 个盒子组成的。机器人的数据只计算一次，使用基本的立方体顶点/颜色/索引数据，然后适当地平移/缩放/旋转并附加到更大的数组中。在左图中，我在一个 VAO 中绘制了 172 个机器人，右图有 173 个机器人。正如你所看到的，当我检查那个“神奇”的数字时会发生奇怪的事情。看起来好像所有顶点都以某种方式连接到要在屏幕上绘制的第一个点（第一个绘制的机器人“身体”的右上角部分）。如果我将第一个机器人移动到其他地方，所有点仍然连接到该点 - 以说明我确保图片中的点不以 (0,0,0) 或类似的东西为中心。左图有 131328 个浮点数的顶点和颜色数据，索引数据为 49248 长。右图有 132096 个浮点数的顶点和颜色数据，而索引数据为 49536 个浮点数。如果我把数据分成不止一个VAO，那么我可以很容易地画出价值100倍的机器人（当然是100个VAO）没有任何问题（即使是价值1000倍的1000个VAO的机器人也能很好地工作，除了拿了很多内存和大约 0.2 FPS 的工作）。

为了测试 Pyglets 类（或我自己的）是否有任何问题，我还用 OpenGL 调用重写了整个事情，我遇到了同样的问题。那么，VBO 是否根本就没有那么大（我不知何故怀疑 VBO 每个只能有大约 17k 个三角形）？还是它与 Numpy 有关（我以前在 Numpy 中使用过更大的数组，但我不记得有任何问题）？哦，顺便说一句，浮动的大小似乎并不重要（如果所有顶点都在 [-1,1] 范围内，如果上升到 [-35000, 35000]，也会发生同样的事情。

我已经广泛搜索了该主题，但在搜索中没有遇到任何类似的东西——如果有，我道歉。当使用非常大的 numpy 数组时，我能找到的只是 MemoryError，但我的数组远不及产生它所需的大小。

我的系统规格是：

*   英特尔酷睿 i7
*   英伟达 GeForce GTX 465
*   Windows 8 64 位
*   Python 3.3（64 位）
*   Pyglet 1.2alpha1
*   用于 Python 3.3 64 位的 Numpy 二进制包，来自[这里](http://www.lfd.uci.edu/~gohlke/pythonlibs/#numpy)

虽然我几乎可以肯定我的代码没有任何问题，但我仍然在此处弹出与绘图相关的片段（同样，我也尝试过使用基本 OpenGL 调用，但效果并不好） .

首先，我有一个“处理程序”类，用于存储大量静态数据，因此我可以通过一个 glDraw* 调用（例如游戏关卡或类似内容）来绘制它。它创建了添加数据的方法、初始化其 VBO 和 VAO 的方法以及获取堆栈并在其上绘制的绘制函数。它还获得了它绘制的程序（顶点/颜色着色器）。

```
class Handler:
def __init__(self, program):
    self.vertexData = numpy.array((), dtype=GLfloat)
    self.colorData = numpy.array((), dtype=GLfloat)
    self.indexData = numpy.array((), dtype=GLshort)

    self.program = program

def initBuffers(self):
    self.vao = GLuint()
    glGenVertexArrays(1, self.vao)
    glBindVertexArray(self.vao)

    #=======================================================================
    # Vertices
    #=======================================================================
    self.vertexBufferObject = pyglet.graphics.vertexbuffer.create_buffer(self.vertexData.nbytes, GL_ARRAY_BUFFER, GL_STATIC_DRAW)
    self.vertexBufferObject.bind()
    self.vertexBufferObject.set_data(self.vertexData.ctypes.data)
    glEnableVertexAttribArray(0)
    glVertexAttribPointer(0, 4, GL_FLOAT, GL_FALSE, 0, 0)

    #=======================================================================
    # Color
    #=======================================================================
    self.colorBufferObject = pyglet.graphics.vertexbuffer.create_buffer(self.colorData.nbytes, GL_ARRAY_BUFFER, GL_STATIC_DRAW)
    self.colorBufferObject.bind()
    self.colorBufferObject.set_data(self.colorData.ctypes.data)
    glEnableVertexAttribArray(1)
    glVertexAttribPointer(1, 4, GL_FLOAT, GL_FALSE, 0, 0)

    #=======================================================================
    # Index
    #=======================================================================
    self.indexBufferObject = pyglet.graphics.vertexbuffer.create_buffer(self.indexData.nbytes, GL_ELEMENT_ARRAY_BUFFER, GL_STATIC_DRAW)
    self.indexBufferObject.bind()
    self.indexBufferObject.set_data(self.indexData.ctypes.data)

    glBindBuffer(GL_ARRAY_BUFFER, 0)
    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, 0)
    glBindVertexArray(0)

    self.len = len(self.indexData)

def addTo(self, vertices, color = None, index = None):
    if(color != None):
        self.colorData = numpy.append(self.colorData, color)
    if(index != None):
        self.indexData = numpy.append(self.indexData, index + len(self.vertexData)//4)
    self.vertexData = numpy.append(self.vertexData, vertices)

def draw(self, stack):
    glBindVertexArray(self.vao)
    self.indexBufferObject.bind()
    self.program.install()

    stack.push()
    self.program.usetM4F("modelToWorldMatrix", stack.ready(), row = GL_FALSE)
    glDrawElements(GL_TRIANGLES, self.len, GL_UNSIGNED_SHORT, 0)
    stack.pop()
    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, 0)
    glBindVertexArray(0)
    self.program.uninstall() 
```

我用一些非常简单的代码初始化处理程序，其中 translateMatrix(x, y, z) 返回一个平移矩阵，而 applyTrans(base, trans) 将 trans 应用于 base 中的每个顶点 (x,y,z,w)。

```
self.handler = Handler(self.ObjectColor)
    for i in range(1,n):
        self.handler.addTo(applyTrans(self.robots.vertexData, translateMatrix(2*i*(-1)**(i//2), 1.5*i*(-1)**i, 0.5*i*(-1)**i)), self.robots.colorData, self.robots.indexData)
self.handler.initBuffers() 
```

并在 Pyglet Window 的 on_draw 部分调用它

```
self.handler.draw() 
```

**更新：**

我发现了问题所在，我现在觉得自己完全愚蠢：P。显然我忘了指定一个numpy数组的dtype，它默认为'int32'。由于我使用 GL_UNSIGNED_SHORT 标志（又名“uint16”）进行绘图，因此它成为了一个问题。我现在确保它尽可能长时间地保持“uint16”（直到索引数据的最大值高于 2^16）并添加了一个检查以查看 indexData 是“uint16”还是“uint32”并添加了适当的glDraw 命令上的标志。

这似乎已经解决了它，因为我现在可以轻松地将几千个（尝试最多 5.000 个）机器人添加到一个 VBO 并且它仍然有效。

不过，我仍然不明白，为什么它看起来像这样（所有顶点都连接到第一个顶点）以及为什么它会在它出现时开始。indexData 正常时的最大值是 32831，开始起作用时的最大值是 33023。所以这两个值明显低于 2^16，为什么 GL_UNSIGNED_SHORT 仍然不起作用？如果有人可以回答这个问题，我将把这个问题留得更久一些，并在几天后/当我得到答案时关闭。谢谢！

# php - 防止盗链/访问 mp4 文件

> ID：15048212
> 
> 赞同：0
> 
> 时间：2013-02-24T03:04:02.943
> 
> 标签：php, mysql, mp4, uniq

我有一个用 PHP 创建的网站，我通过 Flash 播放器或 html5 播放器播放 mp4 文件。最近我发现我的文件也在其他网站上，这占用了我的带宽。

我在存储 mp4 文件的远程主机上使用 httpd/apache。在网站上，我使用 nginx。

我对 PHP 和 MySQL 有一些了解，但我不知道该怎么做。我怎样才能让它们只能通过我的网站访问？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T03:08:25.590

示例 1，阻止所有盗链（当可检测到时）

```
location ~* (\.png)$ {
   valid_referers blocked mysite.com www.mysite.com;
   if ($invalid_referer) {
       return 405;
   }     
} 
```

示例 2，仅针对某些站点重定向热链接文件

```
location ~* (\.mp4)$ {
   if ($http_referer ~ ^(http://www.bad.com|http://stupid.com) ) {
       # Redirect to a specific file
       #rewrite  ^/(.*)$ http://mysite.com/dont-hotlink.html last; 

       # Redirect to a dynamic url where /hotlinked/ is some script that
       # displays some info about the hotlinked file.
       rewrite  ^/(.*)$ http://mysite.com/hotlinked/$1/ last; 
   }   
} 
```

来源： [使用 nginx 重定向或阻止热链接文件](http://kuttler.eu/code/redirect-hotlinked-files-nginx/)

# c# - C# Rpg 随机敌人分配

> ID：15048214
> 
> 赞同：0
> 
> 时间：2013-02-24T03:04:16.110
> 
> 标签：c#

我正在尝试将一个 Enemy 敌人类实例分配给一个随机的 newenemy 实例。例如：

```
public Enemy GetEnemy()
    {
        Random rand = new Random();
        Enemy newenemy = new Enemy(string.Empty, 0, 0, 0, 0, 0);

        if (Main.level == 1)
        {
            int z = rand.Next(0, 2);

            if (z == 0)
            {
                newenemy = new Enemy("Chicken", 50, 0, 4, 11, 32); 
            }

            else if (z == 1)
            {
                newenemy = new Enemy("Common Goblin", 67, 0, 8, 14, 36); 
            }

            else if (z == 2)
            {
                newenemy = new Enemy("Rabbit", 50, 0, 15, 25, 9); 
            }
        }

        return newenemy;
    } 
```

然后在我的战斗功能中使用它：（我会发布一些因为它有点长）

```
if (whathappen == 2 || whathappen == 4 || whathappen == 6 || whathappen == 8 || whathappen == 10) //battle code
        {

            Console.Write("You were engaged by the enemy!  \nYou are fighting an enemy {0}\n", GetEnemy().name);

            while (Main.health > 0 || GetEnemy().health > 0)
            {
                Console.Write("1) Attack With Weapon ");
                int choose;
                int.TryParse(Console.ReadLine(), out choose); 

                if (choose == 1)
                {
                    int miss = r.Next(0, 6);

                    if (miss < 6)
                    {
                        int totaldamage = (r.Next(0, Main.RHand.damage) + r.Next(0, Main.LHand.damage)) - GetEnemy().armor;
                        GetEnemy().health -= totaldamage;
                        Console.WriteLine("You attack the {0} with a {1} and deal {2} damage!", GetEnemy().name, Main.RHand.name, totaldamage);
                        Console.WriteLine("The {0} has {1} health remaning!", GetEnemy().name, GetEnemy().health); 
```

但是，当我测试我的游戏时，战斗中没有分配敌人，我不明白为什么。这是输出：

你被敌人搞定了！你在和敌人作战！（敌人的名字应该在敌人之后）

你用青铜匕首攻击（名字应该再次出现）并造成 15 点伤害！

谁能解释为什么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T03:14:51.940

您的代码存在一些问题：

*   根据您对问题的描述，我的猜测是`Main.level`不等于 1
*   你没有完全`Random.Next`正确使用：`Random.Next(0, 2)`永远不会等于 2

但是即使在你解决了这些问题之后，你还有一个更大的问题是你创建了太多的实例`Enemy`并且你没有将它们保存在任何地方。

每次调用`GetEnemy()`方法时，您都在创建类的*全新实例*，访问其上的一个属性，然后将其丢弃。您正在尝试维护敌人的状态，您需要保存您创建的实例并重用它，例如：

```
Enemy enemy = GetEnemy();
while (Main.health > 0 || enemy.health > 0)
{
    .
    .
    .
} 
```

# jersey - 如何捕捉 Jersey 406 Not Acceptable

> ID：15048217
> 
> 赞同：3
> 
> 时间：2013-02-24T03:04:34.917
> 
> 标签：jersey

当客户端请求不可接受的 MIME 类型时，如何防止 Jersey 在客户端喷出 HTML 页面？我想使用`ExceptionMapper`，但我不确定要捕获什么异常，或者这是否是处理 406 的最佳方法。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T14:28:42.797

您可以控制客户端吗？

您的客户端接受 MIME 类型列表。如果您的服务器**无法**生成请求的 MIME 类型，则返回 406 HTTP 是有意义的。您还希望服务器做什么？

如果您知道客户端请求的 MIME 类型，并且如果服务器端的方法能够生成请求的类型，则可以修改 @Produces 注释以允许服务器提供所需的内容。

编辑：我手头没有一个简单的解决方案（可能涉及 ContainerRequestFilter），但如果你使用 tomcat，也许你可以非常简单地拥有这个，但设置一个自定义错误页面，内容简单

```
<error-page>
    <error-code>406</error-code>
    <location>whatever you want</location>
</error-page> 
```

# macos - Java 7 可以使用 Apple Java 扩展吗？

> ID：15048220
> 
> 赞同：6
> 
> 时间：2013-02-24T03:06:10.627
> 
> 标签：macos, java-7

为了帮助 Java 应用程序在 Mac OS X 上运行时看起来更像原生应用程序，Apple 创建了[Apple Java Extensions](https://developer.apple.com/library/mac/documentation/Java/Reference/1.5.0/appledoc/api/overview-summary.html)以使 Java 应用程序的行为更像 Mac OS X。这些允许处理“关于”的行为之类的事情菜单并支持拖放到应用程序图标上。

但是，我找不到任何信息表明这些扩展是否包含在 Java 7 中，甚至是否可用于 Java 7。据我了解，Apple 将他们的 OS X 实现合并到 OpenJDK 中，但我不确定这些扩展是否适用用它。我确实看到[OpenJDK 的 Mac OS X 端口的](http://openjdk.java.net/projects/macosx-port/)目标是“包含一个完整的、原生的基于 Cocoa 的 UI 工具包”，但我找不到太多关于这意味着什么。搜索网络并没有证明非常有成效，我不知道它们是否与 Java 7 兼容，甚至是否包含在内。

所以我想我有三个问题：

*   运行 Java 7 的 Mac 能否使用 Apple Java Extensions？
*   它们是否包含在 Java 7 中，如果没有，我可以下载它们以捆绑到我的应用程序中吗？
*   这些与 Java 7 兼容的扩展是否有任何替代方案？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-24T17:48:02.127

> 运行 Java 7 的 Mac 能否使用 Apple Java Extensions？

是的。它们包含在 Oracle 发行版和 OpenJDK 中。请参阅下面的第二个答案。

我不能保证完整的 API，因为我只需要一个子集来支持应用程序图标和应用程序框架上的拖放行为。我可以确认，尽管这与 OpenJDK 7 的预期一样。在分发方面也没有问题，因为该应用程序在 Mac App Store 上出售。

> 它们是否包含在 Java 7 中，如果没有，我可以下载它们以捆绑到我的应用程序中吗？

它们包含在 OpenJDK 7 中，您可以在*/src/macosx/classes/com/apple*中找到源代码，并由 Oracle 支持，如[macosx-port-dev 邮件列表中](http://mail.openjdk.java.net/mailman/listinfo/macosx-port-dev)可读的消息和错误修复所暗示的那样。

它们也包含在 Oracle 发行版中，解压 rt.jar 以查看它们。

您无需下载任何内容，只需在您的编辑器中开始使用它们：

![IntelliJ 补全](../Images/6085219527a374caa7df045a9e98708d.png)

> 这些与 Java 7 兼容的扩展是否有任何替代方案？

不是我知道的，但我怀疑你需要一个替代方案。

# python - 将列表列表转换为字典时出现Python KeyError

> ID：15048221
> 
> 赞同：0
> 
> 时间：2013-02-24T03:06:13.157
> 
> 标签：python, list, dictionary, keyerror

我被这个简单的任务困住了。我有一个列表列表，我需要将其转换为字典，但到目前为止没有任何成功。

我用下面的代码试过了，但它给了我 KeyError:0

```
list = [[3,0,7,4,5],[2,3,0,1,2],[6,6,7,6,6]]

d = {}
for x in list:
    i = 0
    for number in x:
        d[i].append(number)
        i += 1 
```

我需要它是这样的：

```
{0: [3,2,6], 1: [0,3,6], 2: [7,0,7], 3: [4,1,6], 4: [5,2,6]} 
```

任何帮助表示赞赏，在此先感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T03:11:35.167

`enumerate`顺便说一句，您可以通过使用and`zip`函数非常简单地做到这一点。

```
lst = [[3, 0, 7, 4, 5], [2, 3, 0, 1, 2], [6, 6, 7, 6, 6]]
d = dict(enumerate(zip(*lst))) 
```

*   `zip(*lst)`基本上是一个*转置*函数。它返回 Python 2 中的列表，或`zip`Python 3 中的对象，可以将其转换为等效列表。

    ```
    [(3, 2, 6), (0, 3, 6), (7, 0, 7), (4, 1, 6), (5, 2, 6)] 
    ```

*   `enumerate()`基本上只是在它之前添加一个元素的索引，并返回一个`enumerate`对象，该对象在转换为列表时返回一个元组列表。

    ```
    [(0, (3, 2, 6)), (1, (0, 3, 6)), (2, (7, 0, 7)), (3, (4, 1, 6)), (4, (5, 2, 6))] 
    ```

*   `dict()`获取元组列表并将它们转换为键/值对。

    ```
    {0: (3, 2, 6), 1: (0, 3, 6), 2: (7, 0, 7), 3: (4, 1, 6), 4: (5, 2, 6)} 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T03:11:13.123

请不要使用内置插件作为 ID。

```
>>> lst = [[3, 0, 7, 4, 5], [2, 3, 0, 1, 2], [6, 6, 7, 6, 6]] 
```

你`KeyError`第一次打电话：

```
d[i].append(number) 
```

这是因为 没有键`i`。`d`让我们看看使用[`enumerate()`](http://docs.python.org/2/library/functions.html#enumerate)and [`zip()`](http://docs.python.org/2/library/functions.html#zip)，而不是修复这段代码，这可能更“Pythonic”：

```
>>> d = dict(enumerate(zip(*lst)))
>>> d
{0: (3, 2, 6), 1: (0, 3, 6), 2: (7, 0, 7), 3: (4, 1, 6), 4: (5, 2, 6)} 
```

对于 Python 新用户来说，这可能有点令人生畏。让我分解一下。

```
>>> zip(*lst)
[(3, 2, 6), (0, 3, 6), (7, 0, 7), (4, 1, 6), (5, 2, 6)] 
```

这会将列表[解压缩](https://stackoverflow.com/questions/3141152/keyword-argument-in-unpacking-argument-list-dict-cases-in-python)为[`zip()`](http://docs.python.org/2/library/functions.html#zip)，这会将三个较小的列表“压缩”在一起。

```
>>> enumerate(zip(*lst) 
```

这将返回对的迭代器。每对都是一个索引（从 0 开始）和输入中的一个项目。

```
>>> dict(enumerate(zip(*lst))) 
```

该[`dict()`](http://docs.python.org/2/library/stdtypes.html#dict)函数返回一个新的字典对象，使用传入的键值对进行初始化。

# javascript - 在 AJAX 驱动的网站上选择并激活正确的控件

> ID：15048223
> 
> 赞同：15
> 
> 时间：2013-02-24T03:06:29.257
> 
> 标签：javascript, jquery, greasemonkey, tampermonkey

所以，我试图让它每次访问任何 nike.com 运动鞋页面（没有 HTML 链接）时，它都会自动选择我的鞋码，将其添加到购物车，然后为我结账。

我目前正在尝试使用这个脚本（如下），但每次我去运动鞋页面时，它都没有正确添加我想要的鞋码，而是直接去结账，我的购物车里什么都没有。

有人告诉我，我需要将代码与实际页面 HTML 相匹配，但我不知道该怎么做。请帮忙。

```
// ==UserScript==
// @name     _Nike auto-buy(!!!) script
// @include  http://*/*
// @require  http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js
// @require  https://gist.github.com/raw/2625891/waitForKeyElements.js
// @grant    GM_addStyle
// ==/UserScript==
/*- The @grant directive is needed to work around a design change
    introduced in GM 1.0\.   It restores the sandbox.
*/

var okayToClickAddtoCart = false;

//-- Assumes that size is a standard <option> tag or similar...
waitForKeyElements (".selectBox-label[value='10']", selectShoeSize);

function selectShoeSize (jNode) {
    jNode.prop ('selected', true);

    okayToClickAddtoCart = true;
}

waitForKeyElements (".add-to-cart.nike-button", clickAddToCart);

function clickAddToCart (jNode) {
    if ( ! okayToClickAddtoCart) {
        return true;    //-- Don't click yet.
    }

    var clickEvent  = document.createEvent ('MouseEvents');
    clickEvent.initEvent ('click', true, true);
    jNode[0].dispatchEvent (clickEvent);
}

waitForKeyElements (".checkout-button", clickCheckoutButton);

function clickCheckoutButton (jNode) {
    var clickEvent  = document.createEvent ('MouseEvents');
    clickEvent.initEvent ('click', true, true);
    jNode[0].dispatchEvent (clickEvent);
} 
```

[链接到“目标页面”](http://store.nike.com/us/en_us/?l=shop,pdp,ctr-inline/cid-1/pid-656545/pgid-656543)
[目标 HTML 的快照](http://pastebin.com/6M7cMw40)（以防目标页面被耐克删除或更改）

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-02-24T14:02:33.877

我希望快速概述如何使用 Greasemonkey/Tampermonkey 编写此类页面和操作的脚本，而不是仅仅更改问题中的脚本。

步骤是：

1.  请仔细记下您手动执行的操作。特别注意页面的 javascript 添加/更改的元素，以及所需的步骤顺序（如果有）。

2.  使用*Firebug*和/或 Firefox 的*检查*器和/或 Chrome 的*开发者工具*，确定您将阅读或操作的所有元素的 CSS/jQuery 选择器。使用 Firebug 尤其容易做到这一点。

3.  使用 jQuery 操作静态 HTML。使用[waitForKeyElements](https://gist.github.com/2625891)处理由 javascript (AJAX) 添加或更改的节点。使用[Greasemonkey API](http://wiki.greasespot.net/Category:API_Reference)（Tampermonkey 也支持该 API，Chrome 用户脚本也部分支持该 API）来执行任何跨域页面调用，或在跨域页面集的页面加载之间存储任何值。

* * *

* * *

# 具体例子：

1.  对于[OP 的目标页面](http://store.nike.com/us/en_us/?l=shop,pdp,ctr-inline/cid-1/pid-656545/pgid-656543)，OP 想要：(a) 自动选择鞋子尺码，(b) 将鞋子添加到购物车，以及 (c) 点击结帐按钮。

    这需要等待和/或点击五 (5) 个页面元素，如下所示：

    [![设置大小](../Images/26aa522c8df1a98f123b9fc30f76eb32.png)](https://i.stack.imgur.com/mdg9N.gif "点击查看大图。")

    [![查看](../Images/398c144b0dec225f2d83db69b8e6b46e.png)](https://i.stack.imgur.com/R4ouh.gif "点击查看大图。")

2.  使用 Firebug（或类似工具），我们获得关键节点的 HTML 结构。例如，*SIZE*下拉列表的 HTML 如下所示：

    ```
    <div class="size-quantity">
        <span class="sizeDropdown selectBox-open">
            ...
            <label class="dropdown-label selectBox-label-showing">SIZE</label>
            ...
            <a class="selectBox size-dropdown mediumSelect footwear selectBox-dropdown" ...>
                ...
            </a>
        </span>
    </div> 
    ```

    链接实际触发`mousedown`事件的位置，而不是点击。

    Firebug 为我们提供了一个 CSS 路径：

    ```
    html.js body div#body div#body-wrapper.fullheight div#body-liner.clear div#content div#pdp.footwear div#product-container.clear div.pdp-buying-tools-container div.pdp-box div.buying-tools-container div#PDPBuyingTools.buying-tools-gadget form.add-to-cart-form div.product-selections div.size-quantity span.sizeDropdown a.selectBox 
    ```

    我们可以减少到：

    ```
    div.footwear form.add-to-cart-form span.sizeDropdown a.size-dropdown 
    ```

    对于一个合理的选择器，它可能会在微不足道的页面更改中幸存下来，并且不太可能在不需要的页面/产品上触发。

    ~~~~~~~~~~~~~
    请注意，Firebug 还可以帮助我们查看附加了哪些事件，这在确定我们需要触发什么时至关重要。例如，对于那个节点，我看到：

    [![关键第一个节点的事件](../Images/45350cf4d491ea35ed44a67a6a85d1db.png "点击查看大图。")](https://i.stack.imgur.com/gJppo.gif "点击查看大图。")

    该链接没有`href`，也没有监听`click`事件。在这种情况下，我们必须触发一个`mousedown`（或`keydown`）。

    ~~~~~~~~~~~~~
    对其他 4 个关键节点使用类似的过程，我们获得 CSS/jQuery 选择器：

    ```
    Node 1:     div.footwear form.add-to-cart-form span.sizeDropdown a.size-dropdown

    Node 2:     ul.selectBox-dropdown-menu li a:contains('10')
                (But this will need an additional check)

    Node 3:     div.footwear form.add-to-cart-form span.sizeDropdown a.selectBox span.selectBox-label:contains('(10)')

    Node 4:     div.footwear form.add-to-cart-form div.product-selections div.add-to-cart

    Node 5:     div.mini-cart div.cart-item-data a.checkout-button:visible 
    ```

3.  最后，我们使用`waitForKeyElements`将所需的事件发送到关键节点并通过正确的操作顺序进行排序。

生成的**完整工作脚本**是：

```
// ==UserScript==
// @name     _Nike auto-buy shoes(!!!) script
// @include  http://store.nike.com/*
// @include  https://store.nike.com/*
// @require  http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js
// @require  https://gist.github.com/raw/2625891/waitForKeyElements.js
// @grant    GM_addStyle
// ==/UserScript==
/*- The @grant directive is needed to work around a design change
    introduced in GM 1.0\.   It restores the sandbox.
*/

var targetShoeSize  = "10";

//-- STEP 1:    Activate size drop-down.
waitForKeyElements (
    "div.footwear form.add-to-cart-form span.sizeDropdown a.size-dropdown",
    activateSizeDropdown
);
function activateSizeDropdown (jNode) {
    triggerMouseEvent (jNode[0], "mousedown");

    //-- Setup step 2.
    waitForKeyElements (
        "ul.selectBox-dropdown-menu li a:contains('" + targetShoeSize + "'):visible",
        selectDesiredShoeSize
    );
}

//-- STEP 2:    Select desired shoe size.
function selectDesiredShoeSize (jNode) {
    /*-- Because the selector for this node is vulnerable to false positives,
        we need an additional check here.
    */
    if ($.trim (jNode.text () ) === targetShoeSize) {
        //-- This node needs a triplex event
        triggerMouseEvent (jNode[0], "mouseover");
        triggerMouseEvent (jNode[0], "mousedown");
        triggerMouseEvent (jNode[0], "mouseup");

        //-- Setup steps 3 and 4.
        waitForKeyElements (
            "div.footwear form.add-to-cart-form span.sizeDropdown a.selectBox "
            + "span.selectBox-label:contains('(" + targetShoeSize + ")')",
            waitForShoeSizeDisplayAndAddToCart
        );
    }
}

//-- STEPS 3 and 4: Wait for shoe size display and add to cart.
function waitForShoeSizeDisplayAndAddToCart (jNode) {
    var addToCartButton = $(
        "div.footwear form.add-to-cart-form div.product-selections div.add-to-cart"
    );
    triggerMouseEvent (addToCartButton[0], "click");

    //-- Setup step 5.
    waitForKeyElements (
        "div.mini-cart div.cart-item-data a.checkout-button:visible",
        clickTheCheckoutButton
    );
}

//-- STEP 5:    Click the checkout button.
function clickTheCheckoutButton (jNode) {
    triggerMouseEvent (jNode[0], "click");

    //-- All done.  The checkout page should load.
}

function triggerMouseEvent (node, eventType) {
    var clickEvent = document.createEvent('MouseEvents');
    clickEvent.initEvent (eventType, true, true);
    node.dispatchEvent (clickEvent);
} 
```

# java - 带有布局管理器的 PaintComponent

> ID：15048224
> 
> 赞同：2
> 
> 时间：2013-02-24T03:06:30.367
> 
> 标签：java, image, swing, layout, paintcomponent

是否可以定位由 PaintComponent 方法绘制的 BufferedImage？例如，如果它是在重写的 PaintComponent 方法中绘制的图像，是否可以为此使用布局管理器（即 BoxLayout、BorderLayout、FlowLayout、GridBagConstrains、GridBagLayout）？还是您必须将图像转换为 JComponent（即 JLabel）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T03:10:53.573

> 是否可以定位由 PaintComponent 方法绘制的 BufferedImage？

对的，这是可能的。您可以通过and在其`paintComponent(...)`方法中获取绘图组件的尺寸，然后使用这些尺寸来定位事物。此外，该方法具有为您简化此操作的重载。`getWidth()``getHeight()``Graphics#drawImage(...)`

> 例如，如果它是在重写的 PaintComponent 方法中绘制的图像，是否可以为此使用布局管理器（即 BoxLayout、BorderLayout、FlowLayout、GridBagConstrains、GridBagLayout）？

不，不是直接的，因为布局管理器仅用于布局子组件。

> 还是您必须将图像转换为 JComponent（即 JLabel）？

您可以轻松地做到这一点——将您的 Image 放入 ImageIcon 和 JLabel 中，然后使用任何嵌套组件及其最有效的布局管理器将其放置在容器中。

**编辑 1**
你在评论中问：

> 我如何获得尺寸？

同样，在`paintComponent(...)`方法内部只需调用`getSize()`or`getHeight()`并且`getWidth()`您已经获得了尺寸。真的没有什么比这更容易了。

> 你能提供你的第一个实例paintComponent（...）的代码片段吗？

我建议你先去。向我们展示您的一些可编译和运行的代码，并尝试演示您的问题，然后让我们处理它。

# python - 凯撒密码（不同于其他密码）

> ID：15048226
> 
> 赞同：-2
> 
> 时间：2013-02-24T03:07:15.090
> 
> 标签：python, encryption

嘿伙计们，所以我正在尝试按照这些说明制作密码：

1.  打印页眉。
2.  提示用户输入带有加密消息的文件名、解码密钥（移位号）和存储解密消息的文件名。
3.  从文件中读取加密消息。
4.  使用解码密钥将加密消息中的每个字符移动适当的数字，以生成与解密消息对应的新字符串。
5.  将解密的消息保存在第二个文件中。
6.  在屏幕上打印加密和解密的消息。我不允许使用 ord() 或 chr() 函数。

真正让我困惑的是加密和解密文件部分。我真的不知道如何为此编码。

我对此很陌生，因此将不胜感激任何帮助。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T04:10:35.467

**注意：听起来你可能是在做这个学校作业。我*强烈*建议您*仅将以下代码用作示例，而不是作为完整的解决方案*。我讨厌围绕你的作业存在剽窃问题，我相信你的教授/老师在谷歌搜索之前的工作知识渊博。祝你的任务好运！**

我写了一个简单的例子来说明我如何尝试解决你的问题。该示例有几个已知问题：

1.  它不处理大写字母。（除了将它们转换为对应的小写字母。）
2.  它不处理标点符号或非字母数字字符。（数字、空格或行尾。）
3.  没有错误检查。
4.  如果您尝试转换一个 < -25 的数字，它会扔给您。

可能需要解决的最大问题是不使用`ord()`and的限制`chr()`。我通过创建自己的字母到数字的转换列表绕过了这个限制，反之亦然。确保您处理的一个棘手的极端情况是，如果移位将一个字母移动到转换范围 [0,25] 之外会发生什么。

作为旁注，如果你想解密一个文件，你可以简单地将它作为明文打开并使用一个负偏移量，其绝对值等于加密偏移量。或者用简单的英语，如果你使用参数：

```
infile = clear.txt, offset = 1, outfile = encrypted.txt 
```

要解密，您可以使用：

```
infile = encrypted.txt, offset = -1, outfile = decrypted.txt 
```

**凯撒密码.py**

```
import itertools

letters = ['a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q',
           'r','s','t','u','v','w','x','y','z']
numbers = range(26) # Numbers 0 - 25
lettersToNumbers = dict(zip(letters, numbers))
numbersToLetters = dict(zip(numbers, letters))

def printHeader():
    """ Print the program informational header """
    print """=======================================
Welcome to CaesarCipher - The unbreakable
Roman cipher.
======================================="""

def convertToNumber(letter):
    """ Convert a letter to a number using our predefined conversion table
        @param letter: The letter to convert to an integer value
        @type letter: str
        @rtype: int
    """
    return lettersToNumbers[letter]

def convertToLetter(number):
    """ Convert a number to a letter using our predefined conversion table
        @param number: The number to convert to a letter
        @type number: int
        @rtype: str
    """
    # If we shift outside of our range make sure to wrap
    if number > 25:
        return numbersToLetters[number%25]
    elif number < 0:
        return numbersToLetters[number+25]
    else:
        return numbersToLetters[number]

def shiftUp(letter, shift):
    """ Shift letter up a given number of positions
        @param letter: The letter we're shifting
        @param shift: The number of positions to shift up
        @type letter: str
        @type shift: int

        @note: For simplicity we encode both capital and lowercase letters
               to the same values
    """
    number = convertToNumber(letter.lower())
    number += shift
    return convertToLetter(number)

def prompt():
    """ Prompt for user input
        @rtype: tuple of str, int, str
    """
    infile = raw_input("File to encrypt: ")
    offset = int(raw_input("Encoding number: "))
    outfile = raw_input("Encrypted file destination: ")
    return (infile, offset, outfile)

def encrypt(infile, offset, outfile):
    """ Encrypt the file using the given offset """
    print "=== Plaintext input ==="
    printFile(infile)
    with open(infile) as red_file:
        with open(outfile, 'w') as black_file:
            for line in red_file:
                for letter in line:
                    # Only convert alphabetic characters
                    if letter.isalpha():
                        black_file.write(shiftUp(letter, offset))
                    else:
                        black_file.write(letter)
    print "=== Ciphertext output ==="
    printFile(outfile)

def printFile(path):
    """ Print the data in the given file """
    with open(path) as print_file:
        for line in print_file:
            print line

printHeader()
encrypt(*prompt()) # `*` unpacks the tuple returned by `prompt()` into 
                   # three separate arguments. 
```

**测试.txt**

```
abcdef
ABCDEF
This is some text I want to try and encrypt. 
```

**示例运行：**

```
mike@test:~$ python caesarcipher.py 
=======================================
Welcome to CaesarCipher - The unbreakable
Roman cipher.
=======================================
File to encrypt: test.txt
Encoding number: 1
Encrypted file destination: test.out 
=== Plaintext input ===
abcdef

ABCDEF

This is some text I want to try and encrypt.

=== Ciphertext output ===
bcdefg

bcdefg

uijt jt tpnf ufyu j xbou up usz boe fodszqu. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T05:04:18.753

既然你说文件位是你最大的问题，我假设功能如下：

```
def decaesar(message, shift):
   pass 
```

它在字符串的基础上为您解密 - 也就是说，它将加密的消息作为字符串并将解密的消息作为字符串返回给您。如果你还没有写过，先写，然后用硬编码的字符串测试它。在这个阶段忽略“加密和解密*文件*”位 - 编程就是一次解决一个问题。

一旦你有了这个函数并且你很高兴它可以工作，扩展你的程序来处理文件而不是字符串就像问一样简单：

*   给定文件名，我可以得到一个包含文件内容的字符串吗？，反之，
*   我可以将字符串写入具有给定名称的文件吗？

如果您可以用“是”回答这两个问题，那么您可以在不更改`decaesar`功能的情况下以这种方式扩展您的程序 - 您的逻辑如下所示：

```
# Print header
encrypted_filename, decrypted_filename, shift = # get from user input
encrypted_message = # get the contents of encrypted_filename as a string
decrypted_message = decaesar(encrypted_message, shift)
# write decrypted_message to decrypted_filename
# print encrypted_message and decrypted_message 
```

有用的是，Python 的文件 IO 正是基于这种在字符串和文件之间转换的原理。如果您有一个文件打开以供阅读：

```
in_file = open(filename) 
```

，则返回值：

```
in_file.read() 
```

正是回答第一点的字符串。同样，如果您打开了一个文件进行写入：

out_file = 打开（文件名，'w'）。然后：

out_file.write(my_string)

将放入`my_string`该文件。

所以这意味着如果你已经有了你的`decaeser`函数，那么你可以在适当的地方将此代码放入上面的伪代码中，你将有一个大部分工作的解决方案。

# php - PHP 部分字符串匹配

> ID：15048231
> 
> 赞同：1
> 
> 时间：2013-02-24T03:08:11.927
> 
> 标签：php, arrays, search

我是 PHP 新手。

我正在尝试搜索数据数组，并匹配包含部分字符串的任何项目

例如：如果用户输入“oh”，搜索将找到任何包含“oh”的项目，因此该项目可能是 John。

到目前为止我有这个，不匹配任何东西

```
if(isset($_POST['firstName'])){
    for($i = 0 ; $i<count($studentInfo);$i++){
        if(strpos($firstName,$studentInfo[$i][2])) 
```

当然，一旦找到该项目，还有其他代码可以做某事。我见过很多 substr 方法和 STRPOS 函数，我只是不知道如何使它与我的代码一起工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T03:11:11.090

编辑：仔细查看您的问题，您似乎正在搜索数组值中的匹配项。有一些类似于 preg_match() 的东西叫做[preg_grep()](http://php.net/manual/en/function.preg-grep.php)。

```
$arrMatchingValues = preg_grep("/^findme/", $array); 
```

* * *

看看[preg_match()](http://php.net/manual/en/function.preg-match.php)。使用该页面中的一些示例代码：

```
<?php
$subject = "abcdef";
$pattern = '/^def/';
preg_match($pattern, $subject, $matches, PREG_OFFSET_CAPTURE, 3);
print_r($matches);
?> 
```

`$subject`是您要搜索的内容。 `$pattern`是您要匹配的正则表达式模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T03:09:00.037

您将需要使用[正则表达式。](http://weblogtoolscollection.com/regex/regex.php)在您的特定情况下，您应该遍历数组，并为每个项目使用 preg_match （如链接文章中所述）。任何匹配的项目都应该添加到另一个数组中，或者你可以用它做任何你想做的事情。

# java - Java 嵌套类函数

> ID：15048232
> 
> 赞同：1
> 
> 时间：2013-02-24T03:08:21.177
> 
> 标签：java, binary-search-tree

我正在使用 Java 进行作业，并且遇到了一个相当独特的问题。本质上，我的包中有两个文件：一个用于测试的驱动程序文件，然后是实际的类文件。我想知道如何从驱动程序/测试文件中调用或执行两个类深的语句？（即我们有公共类 Hello，在这个类中我们声明了另一个类，称为公共类 Goodbye。我们想在 Goodbye 中执行语句。）

下面是我的类声明和驱动程序文件的代码。我要执行的功能是 InOrder/PostOrder/PreOrder 类。我什至不确定使用“public void main(String args[])”是否是定义此函数的正确方法。如果您对定义函数的方法有其他建议，我愿意接受建议。

驱动文件：

```
package binTreeImprovedTwo;
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.util.Random;

/**
 * Class TreeTest.
 */
public class TreeTest {

    /**
     * The main method.
     *
     * @param default arguments
     */
    public static void main (String[] args) {
        BufferedReader br = new BufferedReader (new InputStreamReader(System.in));
        BinTree tree = new BinTree();
        int value;
        String loop = "";
        Random randomNumber = new Random();
        System.out.println("Bulding binary tree...");
        for (int i = 1; i <= 10; i++) {
            value = randomNumber.nextInt(100);
            System.out.printf("%d ", value);
            tree.insertNode(tree.root, value);
        }
        while(loop != "quit"){
                System.out.println("\nPlease select a traveral path:");
                System.out.println("(Enter the choice in parenthesis EXACTLY)\n");
                System.out.println("(inorder)Invokes InOrder Traversal");
                System.out.println("(postorder)Invokes PostOrder Traversal");
                System.out.println("(preorder)Invokes PreOrder Traversal");
                System.out.println("(quit)Quits the Program");
                System.out.println("Your choice: ");

                try{
                    loop = br.readLine();
                } catch (IOException ioe) {
                    System.out.println("IO error trying to read your choice!\n");
                    System.exit(1);
                }

                System.out.println("\n");

                if(loop == "inorder"){
                    InOrder.main();     //the calls for executing the statements
                } else if(loop == "postorder"){
                    PostOrder.main();   // ''   
                } else if(loop == "preorder"){
                    PreOrder.main();    // ''
                } else if (loop == "quit");
        }

    }

} 
```

类声明：

```
package binTreeImprovedTwo;

import binTreeImprovedTwo.BinTree.Node;

/**
 * Class BinTree.
 */
public class BinTree {

    /** The root. */
    public Node root = new Node(1111);

    /**
     * The Class Node.
     */
    static class Node{

        /** The left. */
        Node left;

        /** The right. */
        Node right;

        /** The data. */
        int data;

        /**
         * Instantiates a new node.
         *
         * @param newData the new data
         */
        public Node(int newData){
            left = null;
            right = null;
            this.data = newData;
        }
    }

    /**
     * Bin tree.
     */
    public void BinTree(){
    }

    /**
     * Insert node.
     *
     * @param root is the root
     * @param value is the value to be inserted
     */
    public void insertNode(Node root, int value){
        if(root.data == 1111){
            root.data = value;
        } else if(value < root.data){
            if(root.left != null){
                insertNode(root.left, value);
            } else {
                root.left = new Node(value);
                }
        } else if(value > root.data){
            if(root.right != null){
                insertNode(root.right, value);
            } else {
                root.right = new Node(value);
            }
        }
    }

    /**
     * Super Class traverse.
     *
     */
    public class Traverse{

        public void left(Node root){
            if(root != null){
                left(root.left);
            }
        }   //end left function

        public void print(){
            System.out.println(" " + root.data);
        }   //end of print function

        public void right(Node root){
            if(root != null){
                right(root.right);
            }
        }   //end right function
    }   //end of class traverse

    public class InOrder extends Traverse{
        public void main(String args[]){
            super.left(root);
            super.print();
            super.right(root);
        }       
    }   //end of InOrder class

    public class PostOrder extends Traverse{
        public void main(String args[]){
            super.left(root);
            super.right(root);
            super.print();
        }
    }   //end of PostOrder class

    public class PreOrder extends Traverse{
        public void main(String args[]){
            super.print();
            super.left(root);
            super.right(root);
        }
    }   //end of PreOrder class
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T03:27:59.053

看起来您将类定义与应用程序中创建的实际对象混合在一起。特别是，如果你想调用一个 Node 的方法，你需要在你的代码中找到一个 Node 对象。查看您的代码，我发现您可能想在名为 root 的 Node 实例上调用 Node 方法。

您所做的只是首先引用根节点，然后调用方法：

```
tree.root.<method> 
```

您还没有在 Node 上定义任何公共方法，所以我不知道您要使用哪个方法名称。

* * *

我认为您需要像这样更改 Traverse API：

对于超类：

```
 public abstract static class Traverse {
        public abstract void run(Node node);

        protected void print(Node node) {
            System.out.println(" " + node.data);
        }
    } 
```

对于一个实施。我将其称为 AnOrder 并由您决定您想要哪个订单。

```
 public static class AnOrder extends Traverse {
        public void run(Node node) {
            run(node.left);
            run(node.right);
            print(node);
        }
    } 
```

这就是您在代码中调用它的方式。创建时：

```
Traverse traverse = new AnOrder() // or any other XXXOrder based on user input 
```

当你使用它时：

```
traverse.run(tree.root); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T03:29:02.200

你问错问题了。

我通常不这样做——我主要赞成回答某人提出的问题，但在我认为我比他们更了解这个问题的情况下，我会例外。

OO 编程背后的想法是使用类来表示程序中的“对象”；您可能没有这样做的提示是您的某些类的名称——inorder、postorder 等。这些是操作，而不是对象。你可以用这种方式组织你的代码，但是你可能会发现有些方法更容易，而且肯定会更符合大多数其他人的做法。

快速猜测一下，您的“BinTree”类可以使用这些名称对其进行操作；BinTree 类包含在您的编程问题中表示对象（二叉树）的代码。您可以声明该类型的变量（BinTree tree = new BinTree(); 或其他），用其节点填充它，然后对其调用操作（tree.inOrder()）。

static void main(String[] args) 不是做你正在做的事情的正确方法。它是一个特殊的方法名；将它放在一个类中可以使该类作为 java 程序调用，参数来自命令行或等效项。

所以我建议你再试一次——在驱动类中使用static void main()；让它创建一个 BinTree 对象，用节点填充对象，然后在该类上调用操作。

# jquery - 如何在不使用 jquery ajax 方法的情况下在 jquery 加载中调用包含服务器端代码的 aspx 页面？

> ID：15048235
> 
> 赞同：0
> 
> 时间：2013-02-24T03:08:43.063
> 
> 标签：jquery, asp.net

我有一个 asp 日历控件，它包含在更新面板中。单击日期时，不会触发 SelectionChanged() 事件。这是代码。

ASPX -

```
<asp:Calendar ID="Calendar" runat="server" BorderColor="green" NextPrevStyle-BackColor="green"
BorderStyle="Solid" Height="414px" NextPrevFormat="FullMonth" TitleStyle-BackColor="green"
DayStyle-Font-Underline="false" ShowGridLines="True" Width="567px" onvisiblemonthchanged="Calendar_VisibleMonthChanged"
SelectedDate="02/23/2013 15:33:22" VisibleDate="2013-02-23" onselectionchanged="Calendar_SelectionChanged">
    <DayStyle Font-Underline="True" />
    <NextPrevStyle BackColor="green" />
    <SelectedDayStyle BackColor="green" Font-Bold="True" ForeColor="Black"
    />
    <SelectorStyle Font-Bold="True" />
    <TitleStyle BackColor="green" Font-Underline="False" />
    <TodayDayStyle BackColor="green" Font-Bold="True" ForeColor="White" />
</asp:Calendar>
<asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode="Conditional">
    <ContentTemplate>
        <asp:Label ID="Label1" runat="server" Text="Label"></asp:Label>
    </ContentTemplate>
    <Triggers>
        <asp:AsyncPostBackTrigger ControlID="Calendar" EventName="SelectionChanged"
        />
    </Triggers>
</asp:UpdatePanel> 
```

服务器端代码 -

```
protected void Calendar_SelectionChanged(object sender, EventArgs e)
        {
            Label1.Text = CalEdairy.SelectedDate.ToShortDateString();
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T04:02:29.007

我尝试了上面的代码，它对我来说工作正常。（除了我删除了 onvisiblemonthchanged="Calendar_VisibleMonthChanged"）

![](../Images/f0823ac47b47d110438c04f40106102a.png)

# php - 用一个语句检查值是否存在

> ID：15048237
> 
> 赞同：0
> 
> 时间：2013-02-24T03:09:03.407
> 
> 标签：php, mysql, pdo, prepared-statement

我有一个值列表，我想用一个语句检查 MySQL 中是否存在任何值。

```
$tags = "VALUE-IN-MySQL,DOESNT-EXIST1,DOESNT-EXIST2";

$tagArray = explode(",", $tags);
$qMarks = str_repeat('?,', count($tagArray) - 1) . '?';

$tagsCheck = $dbh->prepare("SELECT * FROM tags WHERE tag IN ($qMarks)");
$tagsCheck -> execute($tagArray);
echo $tagsCheck -> rowCount(); 
```

这样做的问题是，如果语句中至少存在一个值，它会回显 1，但即使组中仅存在一个值，我也不会否认该语句，但其他值不存在。

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T04:15:28.980

基于上述问题，我的脚本确实有效。但是，它会计算存在的数量，如果不存在，那么我会按照 Madan Sapkota 的建议进行检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T03:46:32.360

尝试这个：

```
"SELECT count(*) total, * FROM tags WHERE tag IN ($qMarks) GROUP by tag HAVING total > 0" 
```

# javascript - IE 从 onbeforeunload 请求冻结

> ID：15048238
> 
> 赞同：1
> 
> 时间：2013-02-24T03:09:11.537
> 
> 标签：javascript, ajax, internet-explorer, browser, freeze

我遇到了 Internet Explorer 7、8 和 9 由于在 onbeforeunload JavaScript 事件中发出的请求而冻结的问题。这是一个复杂的站点，发生了很多事情，但我已经设法将问题隔离到一个小测试中。在 IE7 中重现的具体步骤：

1.  打开 Internet Explorer 7
2.  在整个测试过程中保持一个标签打开（以保持相同的会话）
3.  打开一个新标签并转到[http://www.brillbrothers.com/LockIE/test2/](http://www.brillbrothers.com/LockIE/test2/)
4.  关闭选项卡
5.  重复步骤 3 和 4，直到请求开始挂起（我通常需要两次）。一旦它们挂起，根据我正在运行的网络代理/网络监视器，IE 甚至不再发出请求。

在 IE8 中重现的步骤大致相同，尽管结果有些不同。它通常在前两次工作，然后间歇工作一段时间，然后请求每次都开始挂起。

在 IE9 中，步骤仍然相同，但重现问题需要更长的时间。

我无法在 IE10 中重现这一点。

我还发现调整一些注册表值可以使问题变得更好。如果我将每个域的最大连接数更改得更高（kb # 282402），则重现问题需要更长的时间。在这种情况下，我确实可以完全控制浏览器，因为它用于内部工具，所以任何类型的注册表更改等都可以，只要它不会导致任何不同的问题。

我还设置了一个脚本来自动运行上述步骤。它基本上会打开一个指向测试 URL 的新窗口，等待几秒钟，然后关闭窗口。您可以在此处运行它以快速查看问题（您必须允许页面打开新窗口）：[http ://brillbrothers.com/LockIE/test2/runTest.html](http://brillbrothers.com/LockIE/test2/runTest.html)

疯狂的是，几乎所有事情似乎都会影响结果。如果我在 AJAX 调用中设置不同的 cookie，更改 AJAX 调用的内容等，它可以使其工作不同。完全疯了。如果有人对此有解决方案，我会印象深刻。:)

# scala - 如何在 scala 中翻译具有多个 monad 的 for 表达式？

> ID：15048240
> 
> 赞同：9
> 
> 时间：2013-02-24T03:09:19.883
> 
> 标签：scala, monads

我正在阅读“Scala 2nd Edition 中的编程”，并且从我参加的 Haskell 课程中对 monad 有了一些想法。但是，我不明白为什么以下代码“神奇地”起作用：

```
scala> val a: Option[Int] = Some(100)
a: Option[Int] = Some(100)

scala> val b = List(1, 2, 3)
b: List[Int] = List(1, 2, 3)

for ( y <- b; x <- a ) yield x;
res5: List[Int] = List(100, 100, 100) 
```

我不明白上述内容，因为根据本书的第 23.4 章，`for`表达式被翻译成如下内容：

```
b flatMap ( y =>
  a map ( x => x )
) 
```

我很困惑为什么上面的代码编译因为`y => a map (x => x)`是 type `Int => Option[Int]`，而`b.flatMap`期望 a `Int => List[Something]`。

另一方面，以下代码无法编译（这很好，否则我会更加迷失）：

```
scala> for ( x <- a; y <- b ) yield y;
<console>:10: error: type mismatch;
 found   : List[Int]
 required: Option[?]
              for ( x <- a; y <- b ) yield y;
                          ^ 
```

那么第一个例子有什么神奇之处呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-24T03:23:04.830

> […]`b.flatMap`期望一个`Int => List[Something]`.

这不是真的：它期望的是一个`Int => GenTraversableOnce[Something]`. （参见[http://www.scala-lang.org/api/current/index.html#scala.collection.immutable.List](http://www.scala-lang.org/api/current/index.html#scala.collection.immutable.List)并在页面中搜索`flatMap`.）`List[A]`是`GenTraversableOnce[A]`继承的子类型。由于 的结果的协方差，类型的函数`Int => List[Something]`可以被替换，其定义为：。`R``Function1``trait Function1[-T1, +R]`

`Option[A]`不是，但[Option 的伴随对象](http://www.scala-lang.org/api/current/index.html#scala.Option$)`GenTraversableOnce[A]`中存在隐式转换： 。是 的子类型。所以 for 表达式将扩展为`implicit def option2Iterable[A](xo: Option[A]): Iterable[A]``Iterable[A]``GenTraversableOnce[A]`

```
b flatMap ( y =>
  option2Iterable(a map ( x => x ))
) 
```

> 另一方面，以下代码无法编译 […]

这是因为`a.flatMap`，相比之下，更具体：它确实需要一个`Int => Option[Something]`. （请参阅[http://www.scala-lang.org/api/current/index.html#scala.Option](http://www.scala-lang.org/api/current/index.html#scala.Option)并在页面中搜索`flatMap`。）这是有道理的，因为 an`Option[Something]`只能保存一个值，所以你不能将任意`GenTraversableOnce[Something]`内容展平。唯一可以成功扁平化为 an 的`Option[Something]`是 another `Option[Something]`。

# html - 具有多个“阶段”的 SWF

> ID：15048255
> 
> 赞同：1
> 
> 时间：2013-02-24T03:12:35.777
> 
> 标签：html, flash, flash-cs5

是否可以让一个 SWF 文件在页面的不同部分出现多个“阶段”并共享数据？我正在尝试做的需要共享无法通过 LocalConnections 或通过 JS 共享的大量数据（图像数据的字节数组）（非常慢），所以我试图避免“共享”部分并以某种方式在单个 SWF。问题是，这些图像需要出现在页面的不同部分，因此我被卡住了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T17:42:39.553

swfs 中只有一个 Stage——Stage 实际上是背景；而且你不能有多个背景。

“问题是，这些图像需要出现在页面的不同部分” - 为什么不能调整图像的位置？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T16:45:17.320

使用 swf 100x100 % 的浏览器窗口和透明背景 (wmode='transparent')，加载图像并将它们放置在适当的位置。主要问题如何计算缩略图的坐标... ^)

并且用透明bg闪烁也很慢......

# jakarta-ee - Tomcat、HTTP 身份验证和 Active Directory

> ID：15048261
> 
> 赞同：0
> 
> 时间：2013-02-24T03:14:35.680
> 
> 标签：jakarta-ee, authentication, tomcat, active-directory, http-authentication

在我们的 Intranet 中，所有用户都从 Active Directory 域登录 Windows。我必须开发一种针对 Active Directory 对用户进行身份验证的解决方案，该解决方案在 Tomcat 中运行并适用于 Servlet 和 Axis2。

我已经能够使用基本的 JavaSE 手动验证身份验证。我还创建了一个测试 Servlet，它从 POST 接收登录名和密码并且它也经过身份验证，所以如果我使用 HTTPS，至少我可以使用这个丑陋的解决方案。

我认为 HTTP 身份验证是最好的方法，因为它是 HTTP 标准，适用于 Servlet 和 Axis2 以及浏览器和任何类型的 SOAP 客户端。

对于浏览器，期望的行为是浏览器将打开登录模式窗口，用户将输入登录名和密码，我从 Servlet 中检索它们并针对 AD 进行验证。对于 Axis2，客户端处理其设置 HTTP 标头的方式，我从 Axis2 用于创建 WebService 的类中检索它（如何做到这一点我不知道也没有搜索过......）并做同样的事情确认。

问题是我面临着很多可能性，无法让其中任何一个发挥作用。大多数教程使用`conf/tomcat-users.xml`并且从不给我密码。其他人使用 NTLM 或 Kerberos，我已经尝试将 spnego 用于 Servlet，但它根本不起作用，并且不适用于 Axis2。我宁愿使用不需要第三方库的本机解决方案。

关于我可以从哪里开始的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T03:24:49.197

看来您不需要用户单点登录。在这种情况下，您不需要 NTLM 或 Kerberos。您只需要使用 Active Directory 进行服务器端身份验证。

幸运的是，AD 将自己暴露为 LDAP，但有一些怪癖。请查看此答案： [Configuring Tomcat to authentication using Windows Active Directory](https://stackoverflow.com/questions/267869/configuring-tomcat-to-authenticate-using-windows-active-directory)

如果针对 AD 正确配置领域和容器 (Tomcat) 身份验证，则无需检索标头或编写任何代码来进行身份验证 - 容器 (Tomcat) 将为您完成。

编辑：

Web XML 示例：

```
 <security-constraint>
  <web-resource-collection>
    <web-resource-name>Wildcard means whole app</web-resource-name>
    <url-pattern>/*</url-pattern>
    <http-method>GET</http-method>
    <http-method>POST</http-method>
  </web-resource-collection>
  <auth-constraint>
    <role-name>user</role-name>
  </auth-constraint>
 </security-constraint>

      <login-config>
          <auth-method>BASIC</auth-method>
          <realm-name>default</realm-name>
      </login-config>
        <security-role>
           <role-name>user</role-name>
       </security-role> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T11:57:42.710

Active Directory 环境中唯一合理的方法是仅使用 Kerberos。对用户最好的方法是 Kerberos。如果您使用的是 Tomcat 7，则您有内置支持。Java 6 具备使其工作的一切。这就是我多年来一直在做的事情。

# android - Arrayindexoutofboundsexception ArrayList customListView

> ID：15048269
> 
> 赞同：0
> 
> 时间：2013-02-24T03:16:18.207
> 
> 标签：android

我对我在 android 中的 customListview 有疑问。我正在尝试使用 onclick 事件（tv.setOnClickListener）在列表中动态添加内容，我有我的客户国家/地区类，我使用 geter 和 seter 方法存储我的数据。问题：当我动态添加新内容并向下滚动到列表末尾时，我得到 Arrayindexoutofboundexception

请帮助

```
 public class PosterList extends Activity 
   {

 MyCustomAdapter dataAdapter = null;
ArrayList<Country> countryList = new ArrayList<Country>();

TextView tv;

@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.posterlist);

            //Click on textview to add element in contrylist

    tv = (TextView) findViewById(R.id.myFilter);
    tv.setOnClickListener(new View.OnClickListener() 
    {
            public void onClick(View v) 
            {
                Country country = new Country("df","df","df","m");
                countryList.add(country);      
                dataAdapter.notifyDataSetChanged();
            }
    });

    displayListView();

}

private void displayListView() 
{

            //Parse my JSON and store it in to different arrays

    for(int k=0;k<len;k++)
    {
        Country country = new Country(subcategory[k],caseid[k],time[k],newpost[k]);
        countryList.add(country);
    }

    dataAdapter = new MyCustomAdapter(this,R.layout.country_info, countryList);
    ListView listView = (ListView) findViewById(R.id.listView1);
    listView.setAdapter(dataAdapter);

    listView.setOnItemClickListener(new OnItemClickListener()
    {
        public void onItemClick(AdapterView<?> parent, View view,
            int position, long id) 
        {

                Country country = (Country) parent.getItemAtPosition(position);
                Toast.makeText(getApplicationContext(),
                country.getContinent(), Toast.LENGTH_SHORT).show();

        }
    });

}

private class MyCustomAdapter extends ArrayAdapter<Country> 
{

    private ArrayList<Country> originalList;
    private ArrayList<Country> countryList;

    public MyCustomAdapter(Context context, int textViewResourceId, 
        ArrayList<Country> countryList) {
    super(context, textViewResourceId, countryList);
    this.countryList = new ArrayList<Country>();
    this.countryList.addAll(countryList);
    this.originalList = new ArrayList<Country>();
    this.originalList.addAll(countryList);
}

private class ViewHolder 
{
    TextView code;
    TextView name;
    TextView continent;
    TextView region;
 }

@Override
public View getView(int position, View convertView, ViewGroup parent) 
{

    ViewHolder holder = null;
    Log.v("ConvertView", String.valueOf(position));
    if (convertView == null) 
    {

        LayoutInflater vi = (LayoutInflater)getSystemService(
            Context.LAYOUT_INFLATER_SERVICE);
        convertView = vi.inflate(R.layout.country_info, null);

        holder = new ViewHolder();
        holder.code = (TextView) convertView.findViewById(R.id.code);
        holder.name = (TextView) convertView.findViewById(R.id.name);
        holder.continent = (TextView) convertView.findViewById(R.id.continent);
        holder.region = (TextView) convertView.findViewById(R.id.region);

        convertView.setTag(holder);

    } 
    else
     {
            holder = (ViewHolder) convertView.getTag();
     }

    Country country = countryList.get(position);
    holder.code.setText(country.getCode());
    holder.name.setText(country.getName());
    holder.continent.setText(country.getContinent());
    holder.region.setText(country.getRegion());

    return convertView;

  }
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T03:22:46.517

我看到了问题。在您的`getView`方法中，您引用`countryList`. 你有两个`countryList`变量：一个在`PostList`班级里，一个在`MyCustomAdapter`班级里。您引用的是`MyCustomerAdapter`类中的那个，它**不是适配器支持的数据**。在方法中以这种方式获取您的`Country`对象`getView`：

```
Country country = (Country) getItem(position); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T03:27:30.007

这是你的 for 循环。您必须在动态添加信息之前对其进行初始化。mso 初始化它，然后在 for 循环内使用类方法添加该信息。应该能解决你的问题。

# routes - 在 Ember 中定义资源路由的正确方法？

> ID：15048275
> 
> 赞同：4
> 
> 时间：2013-02-24T03:16:57.950
> 
> 标签：routes, ember.js

在指南中，我可以看到两种定义资源路由的方法，我想知道我应该使用哪种方法，为什么？

* * *

在这里找到：http: [//emberjs.com/guides/routing/defining-your-routes/](http://emberjs.com/guides/routing/defining-your-routes/)

```
App.Router.map(function() {
  this.resource('posts');
  this.resource('post', { path: '/posts/:post_id' });
}); 
```

* * *

在这里找到：http: [//emberjs.com/guides/templates/links/](http://emberjs.com/guides/templates/links/)

```
App.Router.map(function() {
  this.resource("posts", function(){
    this.route("post", { path: "/:post_id" });
  });
}); 
```

我发现必须定义 2 个资源很奇怪，`posts`而且`post`，当它实际上只是一个`Post`资源时。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T01:47:27.840

我相信当你这样做时

```
App.Router.map(function() {
  this.resource("posts", function(){
    this.route("post", { path: "/:post_id" });
  });
}); 
```

它在帖子模板的 {{outlet}} 内呈现帖子模板。

当你这样做时

```
App.Router.map(function() {
  this.resource('posts');
  this.resource('post', { path: '/posts/:post_id' });
}); 
```

当您访问 /posts/:post_id 时，帖子模板不会呈现

# c++ - 关于 c++11 标准中可变参数模板的混淆

> ID：15048277
> 
> 赞同：3
> 
> 时间：2013-02-24T03:17:22.927
> 
> 标签：c++, templates, c++11, variadic-templates

这两个功能有什么区别？

```
template <class ...Types> void f(Types... args...){}
template <class ...Types> void g(Types... args){} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-24T03:21:51.317

`f`完全一样

```
template <class ...Types> void f(Types... args, ...){}
//                                            ^^^^^ 
```

即，它只是 C 中的一个普通的老式可变参数列表。由于历史原因，它可以在没有`,`分隔参数所需的常用参数的情况下使用。的区别`g`正是那个参数。

请注意，不会将任何参数传递给 C 风格的可变参数列表，因为 C++ 风格的可变参数将“吞下”*所有*参数。

# memory - 为什么 64 位对齐 XOR 的运行速度不比 32 位对齐 XOR 快？

> ID：15048278
> 
> 赞同：1
> 
> 时间：2013-02-24T03:17:53.400
> 
> 标签：memory, xor

我想测试两块内存的速度，我在64位机器（4M缓存）上做了一个实验，分别对32位对齐和64位对齐的两个内存区域进行异或。我认为64-位对齐区域异或可能比 32 位对齐区域异或快得多，但两种异或的速度是相同的。

代码：

```
void region_xor_w32(   unsigned char *r1,         /* Region 1 */
                       unsigned char *r2,         /* Region 2 */
                       unsigned char *r3,         /* Sum region */
                       int nbytes)       /* Number of bytes in region */
{
    uint32_t *l1;
    uint32_t *l2;
    uint32_t *l3;
    uint32_t *ltop;
    unsigned char *ctop;

    ctop = r1 + nbytes;
    ltop = (uint32_t *) ctop;
    l1 = (uint32_t *) r1;
    l2 = (uint32_t *) r2;
    l3 = (uint32_t *) r3;

    while (l1 < ltop) {
        *l3 = ((*l1)  ^ (*l2));
        l1++;
        l2++;
        l3++;
    }
}

void region_xor_w64(   unsigned char *r1,         /* Region 1 */
                       unsigned char *r2,         /* Region 2 */
                       unsigned char *r3,         /* Sum region */
                       int nbytes)       /* Number of bytes in region */
{
    uint64_t *l1;
    uint64_t *l2;
    uint64_t *l3;
    uint64_t *ltop;
    unsigned char *ctop;

    ctop = r1 + nbytes;
    ltop = (uint64_t *) ctop;
    l1 = (uint64_t *) r1;
    l2 = (uint64_t *) r2;
    l3 = (uint64_t *) r3;

    while (l1 < ltop) {
        *l3 = ((*l1)  ^ (*l2));
        l1++;
        l2++;
        l3++;
    }
} 
```

结果： ![速度比较](../Images/16d886013e09bd6d1979533b3a4aab99.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T16:18:40.780

我相信这是由于数据匮乏造成的。也就是说，您的 CPU 非常快，您的代码非常高效，以至于您的内存子系统根本跟不上。即使以 32 位对齐的方式进行异或运算也比从内存中获取数据所需的时间更少。这就是为什么 32 位和 64 位对齐的方法具有相同的速度 - 即您的内存子系统的速度。

为了演示，我复制了您的实验，但这次使用了四种不同的 XORing 方式：

1.  非对齐（即字节对齐）异或；
2.  32 位对齐异或；
3.  64 位对齐的异或；
4.  128 位对齐 XORing。

最后一个是通过[_mm_xor_si128()](http://software.intel.com/sites/products/documentation/studio/composer/en-us/2011Update/compiler_c/intref_cls/common/intref_sse2_integer_logical.htm)实现的，它是 SSE2 指令集的一部分。 ![不同异或方式的速度（优化二进制）](../Images/0280adcc49078651a26b5f1665221933.png)

如您所见，切换到 128 位处理并没有提高性能。另一方面，切换到按字节处理会减慢一切——这是因为在这种情况下，**内存子系统仍然胜过 CPU。**

# javascript - drawImage（）不工作

> ID：15048279
> 
> 赞同：35
> 
> 时间：2013-02-24T03:17:59.517
> 
> 标签：javascript, canvas, drawimage, preloading

我正在阅读“使用 HTML5、CSS3 和 Javascript 制作等距社交实时游戏”。

我对它的了解并不多，而且我遇到了一个画布问题，让我在一天的大部分时间里都感到困惑。

drawImage() 似乎没有在绘图。我已经研究过这个问题并尝试了许多预加载图像的排列，但到目前为止没有任何效果。

这是我的代码：

HTML：

```
<canvas id="game" width="100" height="100">
    Your browser doesn't include support for the canvas element.
</canvas> 
```

CSS：

```
html {
height:100%;
overflow:hidden
}

body {
margin:0px;
padding:0px;
height:100%;
} 
```

和js：

```
 window.onload = function() {

var canvas = document.getElementById('game');

canvas.width=document.body.clientWidth;
canvas.height=document.body.clientHeight;

var c = canvas.getContext('2d');

function showIntro() {

    var phrase = "Click or tap screen to start";

    c.clearRect (0, 0, canvas.width, canvas.height);

    var grd = c.createLinearGradient(0, 0, canvas.width, canvas.height);
    grd.addColorStop(0, "#9db7a0");
    grd.addColorStop(1, "#e6e6e6");

    c.fillStyle = grd;
    c.fillRect (0, 0, canvas.width, canvas.height);

    var logoImg = new Image();      
    logoImg.src = '../img/logo.png';

    var originalWidth = logoImg.width;

    logoImg.width = Math.round((50 * document.body.clientWidth) / 100);
    logoImg.height = Math.round((logoImg.width * logoImg.height) / originalWidth);

  var logo = {
     img: logoImg,
     x: (canvas.width/2) - (logoImg.width/2),
     y: (canvas.height/2) - (logoImg.height/2)
  }

  c.drawImage(logo.img, logo.x, logo.y, logo.img.width, logo.img.height);

    c.font = "bold 16px sans-serif";
    var mt = c.measureText(phrase);
    var xcoord = (canvas.width / 2 ) - (mt.width / 2);
    c.fillStyle = '#656565'
    c.fillText (phrase, xcoord, 30);
}

showIntro();

 } 
```

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2013-02-24T23:56:25.670

你几乎拥有它...

您只需要在绘制之前给图像时间加载。

你给一个图像时间来加载这个代码：

```
var logoImg = new Image();
logoImg.onload = function() {

    // At this point, the image is fully loaded
    // So do your thing!

};
logoImg.src = "myPic.png"; 
```

这是完整的代码和小提琴：http: [//jsfiddle.net/m1erickson/GKK39/](http://jsfiddle.net/m1erickson/GKK39/)

```
<!doctype html>
<html>
<head>
<link rel="stylesheet" type="text/css" media="all" href="css/reset.css" /> <!-- reset css -->
<script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>

<style>
    body{ background-color: ivory; }
    canvas{border:1px solid red;}
</style>

<script>
    $(function(){

        var canvas=document.getElementById("canvas");
        var c=canvas.getContext("2d");

        function showIntro() {

            var phrase = "Click or tap screen to start";

            var logoImg=new Image();
            logoImg.onload=function(){

                c.clearRect (0, 0, canvas.width, canvas.height);

                var grd = c.createLinearGradient(0, 0, canvas.width, canvas.height);
                grd.addColorStop(0, "#9db7a0");
                grd.addColorStop(1, "#e6e6e6");
                c.fillStyle = grd;
                c.fillRect (0, 0, canvas.width, canvas.height);

                var originalWidth = logoImg.width;
                logoImg.width = Math.round((50 * document.body.clientWidth) / 100);
                logoImg.height = Math.round((logoImg.width * logoImg.height) / originalWidth);

                var logo = {
                  img: logoImg,
                  x: (canvas.width/2) - (logoImg.width/2),
                  y: (canvas.height/2) - (logoImg.height/2)
                }
                c.drawImage(logo.img, logo.x, logo.y, logo.img.width, logo.img.height);

                c.font = "bold 16px sans-serif";
                var mt = c.measureText(phrase);
                var xcoord = (canvas.width / 2 ) - (mt.width / 2);
                c.fillStyle = '#656565'
                c.fillText (phrase, xcoord, 30);

            }
            logoImg.src="http://dl.dropbox.com/u/139992952/car.png";

        }

        showIntro();       

    }); // end $(function(){});
</script>

</head>

<body>
    <canvas id="canvas" width=300 height=300></canvas>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-05-09T15:16:37.723

上述答案的简化版本。

```
 //Create Canvas
  var canvas = document.createElement("canvas");
  canvas.width = 720 
  canvas.height = 500;

  //Get Context
  var ctx  = canvas.getContext("2d");
  ctx .fillStyle = "black";
  ctx .fillRect(0, 0, canvas.width, canvas.height);

  //Load Image
  var img = new Image();
  img.src = "https://images.pexels.com/photos/3722151/pexels-photo-3722151.jpeg";
  img.onload = function() {
  ctx .drawImage(
    img,
    0,
    0,
    canvas.width,
    canvas.height
  );
};

  //Add Canvas
  canvas.id = "fatLady";
  document.body.appendChild(canvas); 
```

在 CodePen 上试用

[https://codepen.io/hiteshsahu/pen/QWjrygb?editors=1111](https://codepen.io/hiteshsahu/pen/QWjrygb?editors=1111)

# java - 验证退出的代码语句？

> ID：15048281
> 
> 赞同：1
> 
> 时间：2013-02-24T03:18:24.103
> 
> 标签：java

在尝试验证用户响应以退出我的应用程序或重试（它是一个简单的游戏）时遇到问题？当游戏结束时，我询问用户是否要继续输入“y”表示是或“n”表示否退出。我如何验证他们的响应，所以如果它既不是 y 也不是 n 我显示错误消息并要求他们再次输入？？？

这似乎对我不起作用？？？

```
if (!choice.equalsIgnoreCase("n") && !choice.equalsIgnoreCase("y"))

           System.out.println("Error enter y for yes and n for no");
            System.out.println("Would you like to play again (y/n):");
           choice = sc.next(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T03:28:19.583

只需更改

`if (!choice.equalsIgnoreCase("n") && !choice.equalsIgnoreCase("y"))`

到

`while (!choice.equalsIgnoreCase("n") && !choice.equalsIgnoreCase("y"))`

每次他们不选择字母“n”或“y”时，这将继续要求他们再输入一个字母。

`if`编辑：另外，您可能希望在(soon to be `while`) 语句中的代码周围加上括号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T03:24:55.143

没有任何完整的上下文，很难给出相关的答案。

`if`但是您已经可以在语句周围使用花括号来测试您的代码：

```
if (!choice.equalsIgnoreCase("n") && !choice.equalsIgnoreCase("y")){
  System.out.println("Error enter y for yes and n for no");
  System.out.println("Would you like to play again (y/n):");
  choice = sc.next();
} 
```

实际上，使用您当前的代码，只有第一行：

`System.out.println("Error enter y for yes and n for no");`

是根据您的情况考虑的。

# vb.net - 从资源打开存根

> ID：15048282
> 
> 赞同：0
> 
> 时间：2013-02-24T03:18:25.077
> 
> 标签：vb.net, build, resources

我正在尝试使用 Stubs 进行试验，我看到的所有教程都告诉你要这样获取 Stub.exe：

```
FileOpen(1, Application.StartupPath & "\sub.exe", OpenMode.Binary, OpenAccess.Read) 
```

这是后来的解释：

```
FileOpen(Reference number, file name including the path, mode to open the file as, Mode Of Access) 
```

我试图从我的项目中的资源输入存根，但是当我将它添加到该行时（它看起来像这样:)

```
FileOpen(1, My.Resources.Stub, OpenMode.Binary, OpenAccess.Read, OpenShare.Default) 
```

然后它用红色强调它并说：

> “一维字节数组”类型的值无法转换为“字符串”。

我相信这想说的是 .exe 不能放入字符串中？如我错了请纠正我...

我的完整代码如下：

```
Public Class Form1
    Const FileSplit As String = "|split|"
    Dim stub, text1, button As String
    Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
        Dim sfd As New SaveFileDialog
        sfd.Filter = "Executables(.exe)|*.exe"
        If sfd.ShowDialog = Windows.Forms.DialogResult.OK Then
            text1 = TextBox1.Text
            button = TextBox2.Text
        Else
            Exit Sub
        End If

        FileOpen(1, My.Resources.Stub, OpenMode.Binary, OpenAccess.Read, OpenShare.Default)
        stub = Space(LOF(1))
        FileGet(1, stub)
        FileClose(1)

        FileOpen(1, sfd.FileName, OpenMode.Binary, OpenAccess.ReadWrite, OpenShare.Default)
        FilePut(1, stub & FileSplit & text1 & FileSplit & button)
        FileClose(1)

        MsgBox("Success")
    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T06:09:38.253

使用代码将存根从资源复制到应用程序启动文件夹中。使用代码在“表单加载”中复制存根。因此，当您传输应用程序时，只要您打开应用程序，存根就在那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T06:14:07.670

使用此代码：这适用于我的活页夹，我正在使用此...将此代码放入您的 form1.load........ 如果在 jhonniewalker58@gmail.com 不起作用，请给我发电子邮件

```
 If My.Computer.FileSystem.FileExists(Application.StartupPath & "\stub.exe") = False Then
        IO.File.WriteAllBytes(Application.StartupPath & "\stub.exe", My.Resources.stub)
    End If 
```

# html - 带有来自 django 的选择选项的下拉菜单 html 代码

> ID：15048289
> 
> 赞同：0
> 
> 时间：2013-02-24T03:19:33.590
> 
> 标签：html, django, drop-down-menu

我的 HTML 代码如下：

```
<select name="txn" tabindex="3" id="txn" class="fixed" onfocus="highlightInput(this.id)" onblur="unhighlightInput(this.id)">
    <option value="RR" my="{{txn|genselected:"RR"|safe}>RR</option>
    <option value="CR" my="{{txn|genselected:"CR"|safe}}">CR</option>
    <option value="SR" my="{{txn|genselected:"SR"|safe}}">SR</option>
    <option value="OR" my="{{txn|genselected:"OR"|safe}}">OR</option>
</select> 
```

txn 在 forms.py 中定义为：

txn = forms.ChoiceField(label="txn", 选择 = it_const.TXN),

我的问题：选项值在数据库中动态增加？我想从数据库中读取选项值并将它们放在 html 的下拉菜单中。您能帮我编写 HTML 代码以及如何从 txn 表单字段中读取选项并将其显示在菜单选项中吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T03:58:14.003

意见

```
def view_name(request):
    form = OptionForm()
    options = Option.objects.filter()
    return render(request, 'page.html', {
        'form': form, 
        'options': options,
    }) 
```

html

```
<form method="post">
    {% csrf_token %}    
    {{form}}
    <input type="submit" value="Submit">
</form>

{% for option in options %}
<p>{{option.field}}</p>
{% endfor %} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-24T03:40:04.687

You can retrieve the database values in the view file, and then add them to an array, and then render the array as option for form field.

```
TXN_choices = Options.objects.all()

#and then run a for loop to dynamically generate the options array:
TXN = (
        ('x', 'xxx'),
        ('y', 'yyyy'),
    )

and then render the ModelForm. 
```

# android - SQLite，根据列中的较高值合并两个表

> ID：15048290
> 
> 赞同：2
> 
> 时间：2013-02-24T03:19:41.247
> 
> 标签：android, sqlite

我有两个 SQLite 数据库，每个数据库都有一个表，我需要通过合并具有相同键的行来保持同步。这些表的布局如下：

```
CREATE TABLE titles ( name    TEXT    PRIMARY KEY,
                      chapter TEXT               ,
                      page    INTEGER DEFAULT 1  ,
                      updated INTEGER DEFAULT 0  ); 
```

我希望能够在两个表中的每一个上运行相同的命令，结果对于具有相同*名称的行对，**更新*中具有较大值的行将完全覆盖另一行，而没有的行有一个匹配被复制，所以两个表在完成时是相同的。

这是一个 Android 应用程序，所以我可以在 Java 中进行比较，但如果可能的话，我更喜欢 SQLite 解决方案。我对 SQL 不是很有经验，所以你能给出的解释越多，它就越有帮助。

**编辑**
澄清一下：我需要可以在任意时间执行的东西，以便由其他代码调用。两个数据库中的一个并不总是存在，并且在另一个数据库上发生操作时可能不会完全完整，所以我认为触发器不会起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T05:11:52.967

为此，您可以使用触发器。

IE

```
CREATE TRIGGER sync_trigger 
AFTER INSERT OR UPDATE OF updated ON titles
REFERENCING NEW AS n
FOR EACH ROW
DECLARE updated_match;
DECLARE prime_name;
DECLARE max_updated;
BEGIN
    SET prime_name = n.name;
    ATTACH database2name AS db2;
    SELECT updated
    INTO updated_match
    FROM db2.titles t
    WHERE t.name=prime_name)

    IF updated_match is not null THEN
        IF n.updated > updated_match THEN
            SET max_updated=n.updated;
        ELSE
            SET max_updated=updated_match;
        END IF;

        UPDATE titles
        SET updated=max_updated
        WHERE name=prime_name;

        UPDATE db2.titles
        SET updated=max_updated
        WHERE name=prime_name;
    END IF;
END sync_trigger; 
```

语法可能有点偏离。我不经常使用触发器，这是一个相当复杂的触发器，但它至少应该让您知道从哪里开始。您需要将其分配给一个数据库，将“database2name”交换为另一个数据库的名称，然后将其再次分配给另一个数据库，将“database2name”交换为另一个数据库。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T11:13:07.083

假设您已将另一个数据库[附加](http://www.sqlite.org/lang_attach.html)到主数据库：

```
ATTACH '/some/where/.../the/other/db-file' AS other; 
```

您可以先删除所有要被覆盖的记录，因为它们的`updated`字段小于`updated`另一个表中的相应字段：

```
DELETE FROM main.titles
WHERE updated < (SELECT updated
                 FROM other.titles
                 WHERE other.titles.name = main.titles.name); 
```

然后复制所有更新和丢失的记录：

```
INSERT INTO main.titles
SELECT * FROM other.titles
WHERE name NOT IN (SELECT name
                   FROM main.titles); 
```

要在另一个方向进行更新，请交换`main`/`other`数据库名称。

# windows - 从来宾操作系统访问虚拟主机（oracle 虚拟机）

> ID：15048295
> 
> 赞同：1
> 
> 时间：2013-02-24T03:20:19.000
> 
> 标签：windows, apache, ubuntu, virtualbox, virtualhost

我正在使用 ubuntu 11.10 并在不同的 ip 上安装了不同的虚拟主机，比如

```
127.0.0.2 www.example.local
127.0.0.3 www.wordpress.local
... etc 
```

我想在 IE9 中测试这些网站，为此我在 oracle 虚拟框中安装了 windows7，还修改了 windows7 的主机文件，并在文件末尾添加了这一行**10.0.2.2 localhost**并创建了一个新的网桥。
在所有这些设置之后，我可以从 windows7 访问 ubuntu 的本地主机，但是在访问 ubuntu 的虚拟主机时发现问题。请帮助我在 Windows 7 上访问这些虚拟主机，我已经为此搜索了 google、ubuntu 论坛和 stackoverflow，但没有找到正确的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T03:40:55.713

If I understand you correctly, you want the virtual adapters ip, ie. the gateway ip.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T03:50:35.943

只需将您添加到 Ubuntu 主机文件的那些行添加到您的 Windows 7 VM 中的主机文件中，替换`127.0.0.x`为`10.0.2.2`应该使您的 Windows VM 连接到您的 Ubuntu 主机以向这些主机发出请求。这通常就足够了，除非您的 HTTP 服务器配置为仅用于`www.example.local`连接到.`127.0.0.2``www.wordpress.local`

# android - 执行if语句时Android应用程序崩溃？

> ID：15048298
> 
> 赞同：0
> 
> 时间：2013-02-24T03:21:13.493
> 
> 标签：android, crash, integer

我不知道为什么我的 Android 应用程序崩溃了。当我输入简单的 firstTime 变量时，我注意到它发生了，但老实说，我不知道为什么 firstTime 变量会使整个应用程序崩溃。如果我取出 if 语句，其他所有部分都有效。这是我到目前为止所做的：

```
public class MainActivity extends Activity {

static int firstTime = 0;
BroadcastReceiver receiver = null;
@Override
protected void onCreate(Bundle savedInstanceState) {

    if(firstTime == 0){
        logTime(false);
        firstTime++;
    }
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    IntentFilter filter = new IntentFilter(Intent.ACTION_SCREEN_ON); 
    filter.addAction(Intent.ACTION_SCREEN_OFF); 
    receiver = new BroadcastReceiver(){
        @Override
        public void onReceive(Context arg0, Intent arg1) {
          if(arg1.getAction().equals(Intent.ACTION_SCREEN_OFF)){
            logTime(true);
          }
          else if(arg1.getAction().equals(Intent.ACTION_SCREEN_ON)){
            logTime(false);
          }
        } 
      }; 
      registerReceiver(receiver, filter);

} 
```

可能有人知道为什么 firstTime 变量会使我的应用程序崩溃吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T03:40:43.570

我以前没有想到这一点，我以为你只想增加`int`，所以我没有考虑`logTime()`再次调用，也没有看到它怎么会因为这么简单的概念而崩溃。

您的问题很*可能*是顺序，因为使用您当前的代码，`textView`方法中的方法将`null`在访问时抛出 NPE。

这是因为`findViewById()`in`logTime()`将返回`null`（未设置内容视图 - 因此找不到任何东西）：

```
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_main);
 if(firstTime == 0){
    logTime(false);
    firstTime++;
} 
```

# mysql - 多列的 SQL 组函数？

> ID：15048300
> 
> 赞同：1
> 
> 时间：2013-02-24T03:21:39.200
> 
> 标签：mysql, sql, database

我真的需要这个问题的帮助。

给定两个关系的实例，查询的结果是什么？我知道答案，我只需要知道你是怎么得到它的？我真的对这`GROUP`条线感到困惑。

关系 R (A, B)：

```
1  2
3  4
1  3 
```

关系 S（B，C）：

```
1  3
2  4 
```

询问：

```
SELECT R.A, avg(R.B) as av
FROM R, S
WHERE R.B < 4
GROUP BY R.A, S.C
HAVING max(S.B) >= 2 
```

答案是：

```
A   Av
1   2.5 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T04:34:15.143

看看这个[SQLFiddle](http://www.sqlfiddle.com/#!12/0899d/9)演示，它通过几个步骤运行您的语句。

首先，这个

```
SELECT R.A, R.B, S.B AS sb, S.C
FROM R, S
ORDER BY R.A, S.C 
```

这给了你：

```
A   B   SB  C
1   2   1   3
1   3   1   3
1   2   2   4
1   3   2   4
3   4   1   3
3   4   2   4 
```

`WHERE`然后在约束下运行它：

```
SELECT R.A, R.B, S.B AS sb, S.C
FROM R, S
WHERE R.B < 4
ORDER BY R.A, S.C 
```

这使：

```
A   B   SB  C
1   2   1   3
1   3   1   3
1   2   2   4
1   3   2   4 
```

然后通过`GROUP BY`. 通常，您只能使用或其他列中提到的列，但只能在诸如or之`GROUP BY`类的聚合函数中使用（但 MySQL 是宽容的，这就是为什么在此示例中使用 PostgreSQL 服务器以更好地与 SQL92 兼容）：`avg``max`

```
SELECT R.A, avg(R.B) AS av, S.C, max(S.B) AS maxsb
FROM R, S
WHERE R.B < 4
GROUP BY R.A, S.C 
```

产生：

```
A   AV  C   MAXSB
1   2.5     3   1
1   2.5     4   2 
```

添加`HAVING`子句（并且只保留一行之前的结果）：

```
SELECT R.A, avg(R.B) as av, S.C, max(S.B) AS maxsb
FROM R, S
WHERE R.B < 4
GROUP BY R.A, S.C
HAVING max(S.B) >= 2 
```

产生：

```
A   AV  C   MAXSB
1   2.5     4   2 
```

最后，将未使用的列删除`SELECT`：

```
SELECT R.A, avg(R.B) as av
FROM R, S
WHERE R.B < 4
GROUP BY R.A, S.C
HAVING max(S.B) >= 2 
```

并得到：

```
A   AV
1   2.5 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T03:50:09.643

`JOIN`两张表：

```
SELECT R.A, R.B
FROM RelationR AS r
LEFT JOIN RelationS AS s ON r.b = s.b 
```

它为您提供：

```
| A | B |
---------
| 1 | 2 |
| 3 | 4 |
| 1 | 3 | 
```

然后，您只需要`A`像这样分组：

```
SELECT 
  R.A, 
  AVG(R.B) * 1.0    AS av
FROM RelationR      AS R
LEFT JOIN RelationS AS S ON R.B = S.B
WHERE R.B < 4
GROUP BY R.A
HAVING MAX(S.B) >= 2; 
```

## [SQL 小提琴演示](http://sqlfiddle.com/#!2/0e1f6/4)

这会给你：

```
| A |  AV |
-----------
| 1 | 2.5 | 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T03:47:54.130

您正在选择 RA，其中 RB < 4。有两个符合条件的记录，它们的值都为 1。

您正在 R 和 S 之间进行笛卡尔连接，但没有从 S 中选择任何内容，因此与 S 相关的任何事情都无关紧要。

回到 R，B 的两个小于 4 的值是 2 和 3。这两个数字的平均值是 2.5。

您按 SC 分组而不选择它的事实应该会导致您的查询崩溃。

# java - 为什么要使用 instanceof 运算符？

> ID：15048307
> 
> 赞同：0
> 
> 时间：2013-02-24T03:23:33.517
> 
> 标签：java, instanceof

我试图回答这个简短的回答问题，但我很难理解我的导师所说的“我们为什么想知道这个？”的意思。任何意见是极大的赞赏。

问题：

“instanceof 运算符有什么用处？显然它会指定它是否是某物的“实例”——这不是答案。问题是，我们为什么想知道这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T03:29:37.900

运算符最明显和最常见（误用）的用法`instanceof`是决定对子类进行特殊处理：

```
void recordPayment(Payment pmt) {
    // Do something common for all subclasses
    recordAmount(pmt.getAmount());
    // Do something special for the credit card subclasses
    if (pmt instanceof CreditCardPayment) {
        CreditCardPayment ccPmt = (CreditCardPayment)pmt;
        recordCreditCardNumber(ccPmt.getCardNumber());
    }
} 
```

使用`instanceof`通常几乎可以肯定地表明您的设计缺少基类中的函数和派生类中的覆盖。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T03:25:28.040

如果想要[向下转换](http://en.wikipedia.org/wiki/Downcasting)一种类型，他可能需要 instanceof 运算符。但这[通常表明代码有异味](http://codebetter.com/jeremymiller/2006/12/26/downcasting-is-a-code-smell/)。

你可以参考这篇文章：[“Prefer polymorphism over instanceof and downcasting”](http://www.artima.com/interfacedesign/PreferPoly.html)。

**更新**：

似乎 OP 没有贬低的意思，让我们更详细地解释一下。

**向下转换将对象/值的表观类型**细化/缩小为其**子**类型之一，使其具有子类型的**语义**。

*当一个对象/值被声明为它的超类型*时，这很有用，但是调用者需要一些*特定*于子类型中的语义或接口（即超类型中*不存在的那些）。*只有在对象/值通过`instanceof`'s 测试并向下转换为该子类型之后，调用者才能使用其特定的语义或接口。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T03:30:04.070

一个非常常见的需要使用它的地方是使用 JSON。您可以接收一个 JSON 值，它是类地图项和类数组项的“嵌套”，例如，类数组项的特定元素的类型可能是类地图项或类数组项，具体取决于在许多因素上。

So`instanceof`用于解决这个问题，或者至少确保存在预期的类型，而不是尝试强制转换和炸毁。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-24T03:25:18.690

取决于你需要什么。我几乎所有时间都使用“实例”，例如当我处理具有“对象”类型的变量等时。

一个简单的事情是在数组中使用具有不同类型的对象。例如：

```
Object[] data = new Object[4];

data[0] = "String";
data[1] = 32;
data[2] = 32.64D;
data[3] = new ArrayList<String>(); 
```

然后，您可以检查内容：

```
if (data[0] instanceof String) {
  // Content at index '0' is a String
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-24T04:21:58.003

在这种情况下，您有一个`superclass`, 引用，它可以引用它的任何派生类实例。
例如，有一个`abstract`类`Clothes`。三个类`Shirt`，`Shorts`并且`Jeans`是从它派生的。

```
Clothes coolshirt=new Shirt();
Clothes coolshorts=new Shorts();
Clothes cooljeans=new Jeans();
Clothes gift=receiveGift();
if(gift instanceof Shirt)//Is the gift refers to a instance of Shirt
sendGratitude("Thanks for your new Shirt. It is really cool");
else if(gift instanceof Shorts)//Is the gift refers to a instance of Shorts
sendGratitude("Your shorts fits nice for me.Thank you.");
else if(gift instanceof Jeans)//Is the gift refers to a instance of Jeans
sendGratitude("In your Jeans I really look, Handsome, Very Thanks"); 
```

# java - 使用向上和向下键单步执行 JList

> ID：15048309
> 
> 赞同：0
> 
> 时间：2013-02-24T03:23:40.337
> 
> 标签：java, swing, jlist

我在 JScrollPane 中显示一个包含文件名的 JList。我想通过单击一行或使用向上和向下键来选择文件。

使用鼠标可以正常工作，但是如果我选择一行，然后单击“向下”或“向上”，它会跳过一个条目，并选择下一行，而不是一个。我想也许键在弹跳，但每次击键只有一个键事件。

我不断在代码中添加跟踪，但我就是看不到我的问题！

我需要做些什么`ListModel`吗？非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T03:36:54.310

您可以将您的方法与[使用](https://stackoverflow.com/a/7620726/230513)`ListSelectionListener`. 特别要检查您对`getValueIsAdjusting()`. 还要确认您不干扰现有的[键绑定](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)，并且不要添加不必要的[`KeyListener`](http://docs.oracle.com/javase/tutorial/uiswing/events/keylistener.html)。这种[变化](https://stackoverflow.com/a/13754697/230513)如下图所示。

![图片](../Images/4a9a78523c9dc91b3fd39cc9340e1b7d.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T15:42:36.717

我只是想确保这个问题得到正式回答...... Kleopatra 指出向上和向下键是自动处理的，这解释了我为什么跳过条目。另外，我添加了一个 ListSelectionListener（由垃圾神推荐）来为键处理添加一些特定于应用程序的逻辑。感谢你们俩！

# c - 为什么 AMD 驱动程序渲染全屏四边形不正确？

> ID：15048310
> 
> 赞同：1
> 
> 时间：2013-02-24T03:23:55.063
> 
> 标签：c, opengl, gpu, amd-processor

在我的游戏引擎中，我在绘制到实际屏幕之前先绘制到帧缓冲区，然后使用后处理着色器绘制到实际帧缓冲区。但是，我在使用 AMD 驱动程序时遇到了一个问题，我的 quad 渲染不正确。

该代码可以在多个操作系统的 Nvidia 和 Intel GPU 上按预期工作。这是一个示例： http: [//i.stack.imgur.com/5fiJk.png](http://i.stack.imgur.com/5fiJk.png) 它已在具有不同 AMD gpu 的 3 个系统上复制，并且在非 AMD 系统上未见。

创建四边形的代码在这里：

```
static int data[] = {
    0, 0,
    0, 1,
    1, 1,
    1, 0
};
GLuint vao, vbo;
glGenVertexArrays(1, &vao);
glBindVertexArray(vao);
glGenBuffers(1, &vbo);
glBindBuffer(GL_ARRAY_BUFFER, vbo);
glBufferData(GL_ARRAY_BUFFER, sizeof(data), &data, GL_STATIC_DRAW);
glVertexAttribPointer(0, 2, GL_INT, GL_FALSE, 0, NULL);
glVertexAttribPointer(1, 2, GL_INT, GL_FALSE, 0, NULL);
glEnableVertexAttribArray(0);
glEnableVertexAttribArray(1);
/* code which draws it */
glBindVertexArray(vao);
glBindBuffer(GL_ARRAY_BUFFER, vbo);
glDrawArrays(GL_TRIANGLE_FAN, 0, 4); 
```

我尝试了其他选项，例如使用两个独立的三角形，但到目前为止没有任何效果。我完全不知道为什么这种行为会发生在 AMD 驱动程序中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T04:14:57.570

然后停止将它们发送为`GL_INT`. 您已经在每个位置使用 8 个字节，因此您也可以使用`GL_FLOAT`浮点值。如果您想节省空间，请使用`GL_SHORT`或`GL_BYTE`。

是的，这在技术上是一个驱动程序错误。但是你并没有通过使用获得任何东西`GL_INT`。

# installation - Wix：为单一文件类型创建多个关联

> ID：15048311
> 
> 赞同：1
> 
> 时间：2013-02-24T03:24:02.613
> 
> 标签：installation, wix, file-association

我有一个基于 Wix 的安装程序，可以安装两个可执行文件。我想将我自己的自定义文件类型与两个可执行文件相关联

```
<Component Id="A.exe" Guid="{GUID}">
    <File Id="A.exe" Name="A.exe" Source="../A.exe" KeyPath="yes" Checksum="yes"/>
    <ProgId Id="cfgfilerun" Description="Config file for A" Advertise="no" >
        <Extension Id="cfg" ContentType="application/text" Advertise="no" >
            <Verb Id="Run" Command="Run" TargetFile="A.exe" Argument='"%1"' />
        </Extension>
    </ProgId>
</Component> 
```

然后稍后

```
<Component Id="B.exe" Guid="{GUID}">
    <File Id="B.exe" Name="B.exe" Source="../B.exe" KeyPath="yes" Checksum="yes"/>
    <ProgId Id="cfgfileopen" Description="Config file" Advertise="no" >
        <Extension Id="cfg" ContentType="application/text" Advertise="no" >
            <Verb Id="Open" Command="Open" TargetFile="B.exe" Argument='"%1"' />
        </Extension>
    </ProgId>
</Component> 
```

不起作用。怎么修？行为是只有一个扩展出现并起作用，一个用于 B。如果我注释掉 B 的 ProgId，那么我会得到一个用于 A。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T06:34:17.323

通过将两个文件放在同一个组件中来修复它：

```
<Component Id="A.exe" Guid="{GUID}">
    <File Id="A.exe" Name="A.exe" Source="../A.exe" KeyPath="yes" Checksum="yes"/>
    <File Id="B.exe" Name="B.exe" Source="../B.exe" Checksum="yes"/>
    <ProgId Id="cfgfilerun" Description="Config file for A" Advertise="no" >
        <Extension Id="cfg" ContentType="application/text" Advertise="no" >
            <Verb Id="Run" Command="Run" TargetFile="A.exe" Argument='"%1"' />
            <Verb Id="Open" Command="Open" TargetFile="B.exe" Argument='"%1"' />
        </Extension>
    </ProgId>
</Component> 
```

我查看了 logging from 的调试输出`msiexec`，它之前对 cfg 文件所做的操作看起来很糟糕。我认为这是 Wix 中的一个错误，您需要将所有内容都放在同一个组件中。一般来说，我对 Wix 整体有点失望，但我又一次没有使用任何竞争对手。也许所有的 Windows 安装程序都是一团糟。

# python - 使用 -e 选项从 github 安装到 virtualenv 无法将包添加到 python 路径

> ID：15048316
> 
> 赞同：7
> 
> 时间：2013-02-24T03:24:39.447
> 
> 标签：python, virtualenv, pip

我正在尝试以“可编辑”（-e）模式从我的 github 安装一个包，以便能够在使用它的同时轻松地在存储库上工作。

但是它会导致问题，因为在我安装它之后它在 python 路径中不可用。

创建并激活一个全新的、干净的 virtualenv “发布者”，我运行以下命令：

```
pip install -e git+https://github.com/roberts81/easy-thumbnails.git#egg=easy_thumbnails
Obtaining easy-thumbnails from git+https://github.com/roberts81/easy-thumbnails.git#egg=easy_thumbnails
  Cloning https://github.com/roberts81/easy-thumbnails.git to /Users/ben/Envs/publisher/src/easy-thumbnails
  Running setup.py egg_info for package easy-thumbnails

    no previously-included directories found matching 'docs/_build'
Installing collected packages: easy-thumbnails
  Running setup.py develop for easy-thumbnails

    no previously-included directories found matching 'docs/_build'
    Creating /Users/ben/Envs/publisher/lib/python2.7/site-packages/easy-thumbnails.egg-link (link to .)
    Adding easy-thumbnails 1.2 to easy-install.pth file

    Installed /Users/ben/Envs/publisher/src/easy-thumbnails
Successfully installed easy-thumbnails
Cleaning up... 
```

然后，如果我运行 python（仍在我的 virtualenv 中）并尝试从该包中导入任何内容，它会失败。

```
Python 2.7.2 (default, Jun 20 2012, 16:23:33) 
[GCC 4.2.1 Compatible Apple Clang 4.0 (tags/Apple/clang-418.0.60)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import easy_thumbnails
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ImportError: No module named easy_thumbnails
>>> 
```

如果我在没有 -e 选项的情况下安装它，那么一切正常。我得到了与其他 repo 相同的效果（即安装它们后它们不在 python 路径上），例如`pip install -e git+http://github.com/django/django.git@stable/1.5.x#egg=django`. 那么给了什么？

我注意到的一件事是它似乎并没有真正更新 easy-install.pth 文件，即使它说它是......这里发生了一些奇怪的事情。

但是，如果我使用 sudo 运行它（pip install... 命令），它就可以工作！我也可以全局安装包（在 virtualenv 之外，当然使用 sudo）并且可以。

版本：

pip==1.2.1 virtualenv==1.8.4 virtualenvwrapper==3.6 python==2.7.2 Mac OSX 10.8.2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T03:32:57.520

使用 pip 1.2.1 和 virtualenv 1.8.4 为我工作：

```
$ virtualenv -p python2.7 venv
Running virtualenv with interpreter /usr/local/bin/python2.7
New python executable in venv/bin/python
Installing setuptools............done.
Installing pip...............done.

$ source venv/bin/activate

$ pip install -e git+https://github.com/roberts81/easy-thumbnails.git#egg=easy_thumbnails
Obtaining easy-thumbnails from git+https://github.com/roberts81/easy-thumbnails.git#egg=easy_thumbnails
  Cloning https://github.com/roberts81/easy-thumbnails.git to ./venv/src/easy-thumbnails
  Running setup.py egg_info for package easy-thumbnails

    no previously-included directories found matching 'docs/_build'
Installing collected packages: easy-thumbnails
  Running setup.py develop for easy-thumbnails

    no previously-included directories found matching 'docs/_build'
    Creating /Users/jterrace/test/venv/lib/python2.7/site-packages/easy-thumbnails.egg-link (link to .)
    Adding easy-thumbnails 1.2 to easy-install.pth file

    Installed /Users/jterrace/test/venv/src/easy-thumbnails
Successfully installed easy-thumbnails
Cleaning up...

$ python
Python 2.7.3 (default, Nov 12 2012, 09:50:25) 
[GCC 4.2.1 Compatible Apple Clang 4.1 ((tags/Apple/clang-421.11.66))] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import easy_thumbnails
>>> easy_thumbnails.VERSION
'1.2' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-23T01:58:37.343

现在这似乎很愚蠢，因为问题已经得到解答，这解决了一个不同的问题——但是当我遇到这个错误时，这就是我的解决方案。（我希望这对其他人有帮助）

确保您有一个`__init__.py`文件。结构应如下所示：

```
/myprojectname
  /myprojectname
    __init__.py
    mymodule.py
  setup.py 
```

然后`pip install -e .`从顶级`myprojectname`文件夹中运行“”，一切正常。我忘记了`__init__.py`我的情况，忘记了这是该消息的可能原因。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-15T20:45:43.603

我有一个类似的问题，并通过删除我的 virtualenv、重新创建它、激活它，然后（在做任何其他事情之前）更新环境中的 pip 和 setuptools 来解决它。首先打开一个新的终端窗口（以确保未激活虚拟环境）并导航到您的虚拟环境所在的目录。然后做：

```
rm -rf env
virtualenv env
. env/bin/activate
pip install -U pip setuptools 
```

在此之后，我能够从 GitHub 安装包（使用`pip`），并能够将其导入 python。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-24T04:45:29.437

虽然它解决了一个不同的问题，但遵循[这个 Mac OSX 10.8 特定线程](https://bitbucket.org/dhellmann/virtualenvwrapper/issue/158/installing-virtualenvwrapper-on-on-osx-108)的结论似乎为我解决了这个问题。

具体来说，我安装了不使用 pip 的分发：

```
$ curl -O http://python-distribute.org/distribute_setup.py
$ python distribute_setup.py 
```

然后我添加`export VIRTUALENV_DISTRIBUTE=1`到我的 ~/.bashrc 文件并重新启动我的终端。

为了安全起见，我卸载并重新安装了 virtualenv 和 virtualenvwrapper。

然后我销毁了旧的虚拟环境并重新创建了它们。无论出于何种原因，修复 virtualenv 以使用和安装分发解决了问题。古怪。

# java - 将单击的按钮名称传递给Android中的不同类

> ID：15048319
> 
> 赞同：1
> 
> 时间：2013-02-24T03:24:53.097
> 
> 标签：java, android, android-intent, countdowntimer

我是 android 新手（对它不是很热，但正在努力学习）。

我正在创建一个应用程序，它有许多不同的按钮，当它们被点击时，它们会启动倒数计时器。

在具有这些按钮的活动上，以下代码用于启动计时器：

```
 //Button 1 Start On Click
    final CountDown buttonOneTimer = new CountDown(15000,1000);
    buttonOne.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            buttonOneTimer.start();
        }
    });

    //Button 2 Start On Click
    final CountDown buttonTwoTimer = new CountDown(15000,1000);
    buttonTwo.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            buttonTwoTimer.start();
        }
    }); 
```

我的 CountDown 类如下所示：

```
public class CountDown extends CountDownTimer {

    public CountDown (long millisInFuture, long countDownInterval) {
        super(millisInFuture, countDownInterval);
    }

    @Override
    public void onFinish() {
        System.out.println("Timer Completed.");
        ****NAMEOFTHEBUTTONCLICKED****.setText("Timer Completed.");
    }

    @Override
    public void onTick(long millisUntilFinished) {
        ****NAMEOFTHEBUTTONCLICKED****.setText((millisUntilFinished/1000)+"");
        System.out.println("Timer  : " + (millisUntilFinished/1000));
    }

} 
```

我正在尝试将按钮的名称压入类中，以便可以将按钮上的文本设置为倒计时。

我确定我做错了各种各样的事情，或者可能有更好的方法来做 - 所以如果你看到我可以改进的地方 - 请随时批评我！

我在这里阅读了[教程，](http://www.coderzheaven.com/2011/08/24/simple-countdown-timer-in-android/)但是它在当前类中有一个“内部类”（我相信这就是它的名称？）。我的一个朋友说很少这样做，只是创建一个单独的类，例如 CountDown。如果我按照教程中的方式执行此操作，我可以让计时器工作（通过硬编码上面显示*** *NAMEOFTHEBUTTONCLICKED* ***的按钮名称，这意味着它仅适用于该按钮） - 但我仍然需要弄清楚如何将该类传递按钮名称，因此我不必为每个计时器编写单独的类。

那会通过Extras来完成吗？我很难找到有关我的具体问题的更多信息。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T03:34:36.717

Try passing off the button instance to the Timer:

```
public class CountDown extends CountDownTimer {

    Button button;
    public CountDown (long millisInFuture, long countDownInterval, Button button) {
        super(millisInFuture, countDownInterval);
        this.button = button;
    }

    @Override
    public void onFinish() {
        System.out.println("Timer Completed.");
        button.setText("Timer Completed.");
    }

    @Override
    public void onTick(long millisUntilFinished) {
        button.setText((millisUntilFinished/1000)+"");
        System.out.println("Timer  : " + (millisUntilFinished/1000));
    }

} 
```

Then call like this:

```
//Button 1 Start On Click
    final CountDown buttonOneTimer = new CountDown(15000,1000,buttonOne);
    buttonOne.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            buttonOneTimer.start();
        }
    }); 
```

# mysql - 如何在 MySQL 数据库中构建一堆链接在一起的项目？

> ID：15048325
> 
> 赞同：2
> 
> 时间：2013-02-24T03:25:24.347
> 
> 标签：mysql, sql, database, database-design, recursion

对于我的问题标题含糊不清，我深表歉意，但我什至不知道该怎么称呼我要完成的工作。

描述我想要的最好的方式是我希望能够将一堆项目链接在一起，然后（可能）递归地找到所有包含目标项目的链中的所有项目。例如，请注意以下链中的 **item3 ：**

```
item1 => item2 => item3 => item4
item5 => item3 => item6  
item3 => item7 => item8  
item3 => item9 => item10  
item11 => item12 => item13 => item3
```

如果用户要搜索**item3**，那么我希望显示上面的所有五个链。换句话说，我希望能够找到 item3 的所有后代和祖先，以便我可以在 HTML 表格中显示数据（或任何最有效的 HTML 结构）。
让这件事变得棘手的是（如上所示）任何给定的项目可能有许多后代和许多祖先。因此，我不确定 MySQL 中的常规递归是否有效。
我确实查看了以下 SO 线程的最佳答案中链接的两篇文章，但我认为建议的解决方案不适用于我想要的数据结构：
[Mysql recursion？](https://stackoverflow.com/questions/4345909/mysql-recursion)

有没有办法将这种数据结构化到 MySQL 数据库中，以便通过相当简单和轻量级的查询（即，希望每个项目请求一个查询），我可以获得我正在寻找的信息和结构？
非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T03:33:55.097

我有一个建议。

将项目存储在以下结构中。

```
+---------+-----------+
|   id    |    item   |
+---------+-----------+
|   1     |   item3   |
+---------+-----------+ 
```

并在下面添加链接引用

```
+---------+-----------+------------+
|  itemid |  ancestor | descendant |
+---------+-----------+------------+
|  1      |  3        | 2          |
+---------+-----------+------------+
|  1      |  5        | 7          |
+---------+-----------+------------+ 
```

在所有三列上创建索引。这将使您能够添加与链上出现的时间一样多的时间。您还可以查询特定项目以查找其所有相关链接。

# java - 双链表上的冒泡排序

> ID：15048327
> 
> 赞同：0
> 
> 时间：2013-02-24T03:25:41.483
> 
> 标签：java, linked-list, bubble-sort

花了几个小时试图让冒泡排序的实现在双链表上工作。我的代码似乎可以通过一次，但在没有完成排序的情况下过早完成。任何指导将不胜感激。

```
public void bubbleSort()
{
    Node cur = head.getNext();
    boolean done = false;

    while (!done)
    {
        done = true;
        while(cur != tail)
        {
            if (cur.getNext().getCount()>cur.getCount())
            {
                swap(cur.getNext(),cur);
                done=false;
            }
            cur = cur.getNext();
        }
    }
} 
```

我使用的交换方法似乎破坏了节点的放置，直到它成为两个节点之间的循环。

```
private void swap(Node n1, Node n2)
{
    Node b1, b2, a1, a2;
    System.out.println("Swapping n1: " + n1 + " with n2: " + n2);
    b1 = n2.getPrev();
    if (b1 == n1) // handle adjacent nodes
        b1 = n2;
    a1 = n2.getNext();

    b2 = n1.getPrev();
    if (b2 == n2) // handle adjacent nodes
        b2 = n1;
    a2 = n1.getNext();

    // swap

    n1.setPrev(b1);
    n1.setNext(a1);

    n2.setPrev(b2);
    n2.setNext(a2);

    b1.setNext(n1);
    a1.setPrev(n1);

    b2.setNext(n2);
    a2.setPrev(n2);
} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T05:46:34.840

我在您的代码中看到的问题：

*   您应该从 开始`head`，而不是从`head.getNext()`.
*   您应该`Node cur`在每次`while(!done)`迭代时重新开始。

通过这些更改，您的代码应该是

```
public void bubbleSort() {
    boolean done = false;
    while (!done) {
        Node cur = head;
        done = true;
        while(cur != tail) {
            if (cur.getNext().getCount()>cur.getCount()) {
                swap(cur.getNext(),cur);
                done=false;
            }
            cur = cur.getNext();
        }
    }
} 
```

此代码假定您的`swap`方法没有问题。使用`int count`作为您`Node`班级中的数据进行测试，在列表中分配 10000 个 int 值。

* * *

编辑：根据您的问题编辑，我的`Node`课程和`swap`功能如下：

```
private static class Node {
    int count;
    Node next;
    //getters and setters...
}

//this function just swaps data, no need to swap the nodes prev and next
//(note that yours is an algorithm design issue)
private void swap(Node node1, Node node2) {
    int aux = node1.getCount();
    node1.setCount(node2.getCount());
    node2.setCount(aux);
} 
```

无需执行您在`swap`实现中完成的所有样板代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T03:44:59.543

在外循环的开头添加`cur = head.getNext();`对于我的链表实现来说很好。所以问题出在`swap`列表的方法或实现上。

根据你的`bubbleSort`方法，该`swap`方法只交换节点的数据，而不是节点本身。我的意思是，它只是交换 的值`count`。如果不是这样，`swap`方法就是问题。否则，您的双链表实现会出现问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T05:44:16.810

您肯定需要保持`cur = head.getNext();`在外部 while 循环的末尾，否则在第二次通过时，内部 while 循环将被完全跳过并且 done 将是真的。

您是否考虑过冒泡排序的运行时间？我在您对 MD.Unicorn 的回答中注意到，它适用于 <100 的列表，但不适用于 1000 的列表。1000 的预期运行时间列表至少比小于 100 的列表慢 100 倍。您可能不会给它足够的时间来完成。

对 100 个列表进行排序需要多长时间？

# c# - 查找总和为指定目标数的所有数字（整数分区）

> ID：15048329
> 
> 赞同：2
> 
> 时间：2013-02-24T03:26:45.263
> 
> 标签：c#, performance, algorithm, combinations

*首先我想说我还在学习所以我的编程技能不是很好，我愿意接受你的任何建议。其次，我还在学习英语，所以我想对给您带来的不便表示歉意。*

那么**我的问题是**这个，我需要帮助改进我的算法或任何关于它的信息，我不知道用什么词来搜索这个。

该算法应该找到添加等于给定数字的所有数字组合。示例：如果我有数字 6，我的结果应该是：[1,5],[2,4],[2,2,2],[3,3]

**我有以下内容：**

```
public List<List<int>> discompose(int number)
    {
        List<List<int>> discomposedPairs = new List<List<int>>();
        if (number <= 3)
            return discomposedPairs;
        int[] numsForCombine = new int[number-1];
        for(int i = 1; i < number;i++){
            numsForCombine[i - 1] = i;
        }
        int ini = 0;
        int end = numsForCombine.Length - 1;
        while (ini <= end)
        {
            List<int> pair = new List<int>();
            pair.Add(numsForCombine[ini++]);
            pair.Add(numsForCombine[end--]);
            discomposedPairs.Add(pair);
        }
        return discomposedPairs;
    }
    public List<List<int>> discomposePair(List<int> pair)
    {
        List<List<int>> parDisc = new List<List<int>>();
        for (int i = 0; i < pair.Count; i++) {
            if (pair[i] > 3)
            {
                List<List<int>> disc = discomposeList(discompose(pair[i]));
                foreach (List<int> item in disc)
                {
                    if (i > 0)
                    {
                        var temp = pair.GetRange(0, i);
                        temp.AddRange(item);
                        parDisc.Add(temp);
                    } else {
                        item.AddRange(pair.GetRange(i+1, pair.Count-(i+1)));
                        parDisc.Add(item);
                    }
                }
            }
        }
        return parDisc;
    }
    public List<List<int>> discomposeList(List<List<int>> list)
    {
        List<List<int>> mainDiscomposedList = new List<List<int>>();
        for (int i = 0; i < list.Count; i++)
        {
            mainDiscomposedList.Add(list[i]);
           List<List<int>> discomposedSubset = discomposePair(list[i]);
            foreach(List<int> item in discomposedSubset){
                mainDiscomposedList.Add(item);
            }
        }
        return mainDiscomposedList;
    } 
```

第一种方法分解成对给出的数字，相加等于给定的数字。第二种和第三种方法是最丑陋的，它们是递归的并且有 bucles，所以它们没有任何好的性能。正如问题所说，两者之间会生成一个带有数字的列表，但有一些不便之处：1）性能不佳 2）给出了很多重复序列这里是数字 10 的输出

```
[2,8,]
[2,2,6,]
[2,2,2,4,]
[2,2,2,2,2,]
[2,2,3,3,]
[2,3,5,]
[2,3,2,3,]<-------------repeated
[2,4,4,]
[2,2,2,4,]<-------------repeated
[2,4,2,2,]<-------------repeated
[3,7,]
[3,2,5,]<-------------repeated
[3,2,2,3,]<-------------repeated
[3,3,4,]
[3,3,2,2,]
[4,6,]
[2,2,6,]<-------------repeated
[4,2,4,]<-------------repeated
[4,2,2,2,]<-------------repeated
[4,3,3,]<-------------repeated
[5,5,]
[2,3,5,]<-------------repeated
[5,2,3,]<-------------repeated 
```

最后，我想提高性能，让重复项目越少越好 [1,1,3], [1,3,1], [3,1,1] [这里是完整的项目链接] [1](http://www.mediafire.com/?1f4gnkgaayy42u0)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-24T04:39:28.437

这是一种方法，它首先将组合构建成树结构，然后将它们排列到`int`s 列表中：

```
internal class Combination
{
    internal int Num;
    internal IEnumerable<Combination> Combinations;
}

internal static IEnumerable<Combination> GetCombinationTrees(int num, int max)
{
    return Enumerable.Range(1, num)
                     .Where(n => n <= max)
                     .Select(n =>
                         new Combination
                         {
                             Num = n,
                             Combinations = GetCombinationTrees(num - n, n)
                         });
}

internal static IEnumerable<IEnumerable<int>> BuildCombinations(
                                               IEnumerable<Combination> combinations)
{
    if (combinations.Count() == 0)
    {
        return new[] { new int[0] };
    }
    else
    {
        return combinations.SelectMany(c =>
                              BuildCombinations(c.Combinations)
                                   .Select(l => new[] { c.Num }.Concat(l))
                            );
    }
}

public static IEnumerable<IEnumerable<int>> GetCombinations(int num)
{
    var combinationsList = GetCombinationTrees(num, num);

    return BuildCombinations(combinationsList);
}

public static void PrintCombinations(int num)
{
    var allCombinations = GetCombinations(num);
    foreach (var c in allCombinations)
    {
        Console.WriteLine(string.Join(", ", c));
    }
} 
```

当使用输入值运行时`6`，这会产生：

```
1, 1, 1, 1, 1, 1
2, 1, 1, 1, 1
2, 2, 1, 1
2, 2, 2
3, 1, 1, 1
3, 2, 1
3, 3
4, 1, 1
4, 2
5, 1
6 
```

# bash - 我如何让用户设置要在一行代码中使用的变量？

> ID：15048333
> 
> 赞同：-2
> 
> 时间：2013-02-24T03:27:55.860
> 
> 标签：bash

因此，我想知道用户是否可以设置要在以下代码中使用的变量：

```
Word 1="Example 1"
Word 2="example 2"

echo $Word 1 $Word 2 
```

然后它会说

> 示例 1 示例 2

我知道这行得通

但我想知道它是否可以做到，这样脚本的用户可能会被要求输入的值，`word 1`就像`word 2`这样

```
what should word one be:  123

What should word two be : 456 
```

然后它将数据植入代码中，脚本将生成并运行以下命令：

```
echo $Word 1 $Word 2 
```

它会说

```
123 456 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T03:33:07.170

您正在寻找[`read`](http://tldp.org/LDP/Bash-Beginners-Guide/html/sect_08_02.html)内置命令。

### 例子：

```
% cat reading.bash 
#!/bin/bash
echo -n "what should word one be: "
read one
echo -n "what should word two be: "
read two
echo "${one} ${two}" 
```

### 跑步：

```
% ./reading.bash 
what should word one be: abc
what should word two be: xyz
abc xyz 
```

# xcode - 架构 armv7 的未定义符号：

> ID：15048344
> 
> 赞同：0
> 
> 时间：2013-02-24T03:30:15.047
> 
> 标签：xcode

运行此项目时出现 2 个错误，标题中的一个错误和 ld: symbol(s) not found for architecture armv7。看图片。我不知道我做错了什么，查看了所有其他关于此的帖子并且没有工作。非常感谢您的支持，如果您有任何问题，请提出，我会告诉您！

**图片在我的网站上，他们不会让我在这里发布任何内容。** ***图片链接：[http ://www.nicmacengineering.com/image](http://www.nicmacengineering.com/image)**

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T03:45:08.063

我认为这是因为文件 JARRightViewController 未添加到目标中。

[http://devcenter.kinvey.com/ios/tutorials/ios-oauth2-tutorial/compiler_flags.png](http://devcenter.kinvey.com/ios/tutorials/ios-oauth2-tutorial/compiler_flags.png)

按照该图像...在“编译源”下单击“+”号，将显示一个弹出窗口，其中包含您的项目文件...从那里选择 JARRightViewController.m ..然后单击添加。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T03:50:59.580

什么是 JARightViewController 和 JASidePanelController？

确保将文件添加到您的项目目标中，查看 Build Phases: Compile Sources。如果它们不存在，请添加它们。

# ssl - Haproxy ssl 配置 - 安装根证书和中间证书

> ID：15048346
> 
> 赞同：17
> 
> 时间：2013-02-24T03:30:52.833
> 
> 标签：ssl, openssl, centos, load-balancing, haproxy

经过大量谷歌搜索，我终于让我的 haproxy ssl 正常工作。但是现在我遇到了问题，因为没有安装根证书和中间证书，所以我的 ssl 没有绿条。

我的 haproxy 配置

```
global
      maxconn     4096 
      nbproc      1
      #debug
      daemon
      log         127.0.0.1    local0

  defaults
      mode        http
      option      httplog
      log         global
    timeout connect 5000ms
    timeout client 50000ms
    timeout server 50000ms

  frontend unsecured
      bind 192.168.0.1:80
      timeout     client 86400000
      reqadd X-Forwarded-Proto:\ http
      default_backend      www_backend

  frontend  secured
  mode http
   bind 192.168.0.1:443 ssl crt /etc/haproxy/cert.pem
   reqadd X-Forwarded-Proto:\ https
  default_backend www_backend

  backend www_backend
      mode        http
      balance     roundrobin
      #cookie      SERVERID insert indirect nocache
      #option      forwardfor
      server      server1 192.168.0.2:80  weight 1 maxconn 1024 check
      server      server2 192.168.0.2:80  weight 1 maxconn 1024 check 
```

192.168.0.1 是我的负载均衡器 ip。/etc/haproxy/cert.pem 包含私钥和域证书，例如。www.domain.com

ssl 配置还有[另一个问题](https://stackoverflow.com/questions/14670160/haproxy-ssl-segfault-with-1-5-dev17)，其中包括 bundle.crt。当我联系我的 ssl 支持时，他们告诉我需要安装根证书和中间证书。

从[Comodo Documentation](https://support.comodo.com/index.php?_m=knowledgebase&_a=viewarticle&kbarticleid=1209)，创建捆绑包很简单，就像合并我制作的 crt 一样。

但是当我尝试将我的 haproxy 配置重新配置为

```
bind 192.168.0.1:443 ssl crt /etc/haproxy/cert.pem ca-file /path/to/bundle.crt 
```

我收到错误，我无法在绑定时使用该配置参数。

ps 我使用 1.5 dev12 版本。使用最新的 dev17 版本，我什[至在这篇文章中启动 haproxy 时遇到了问题](https://stackoverflow.com/questions/14670160/haproxy-ssl-segfault-with-1-5-dev17)

![在此处输入图像描述](../Images/d7878a61fc26adf29c628a1b3e2a646d.png)

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-03-06T14:18:56.627

看起来您需要像这样重新编译：

```
make clean
make \
    TARGET="linux26" \
    USE_STATIC_PCRE=1 \
    USE_OPENSSL=1
make install PREFIX="/opt/haproxy" 
```

之后，`bind`应该识别您的 crt 选项。就我而言，我使用了：

```
bind 0.0.0.0:443 ssl crt /envs/production/ssl/haproxy.pem 
```

我将所有 ssl 文件连接到订单证书链中的 1 个大文件中，即私钥。例如：

```
-----BEGIN MY CERTIFICATE-----
-----END MY CERTIFICATE-----
-----BEGIN INTERMEDIATE CERTIFICATE-----
-----END INTERMEDIATE CERTIFICATE-----
-----BEGIN INTERMEDIATE CERTIFICATE-----
-----END INTERMEDIATE CERTIFICATE-----
-----BEGIN ROOT CERTIFICATE-----
-----END ROOT CERTIFICATE-----
-----BEGIN RSA PRIVATE KEY-----
-----END RSA PRIVATE KEY----- 
```

重新启动，并使用`openssl s_client -connect 127.0.0.1:443 -servername www.transloadit.com |head`.

它应该返回正确的证书信息。

编辑：我刚刚通过 HackerNews 找到了本教程：[https](https://serversforhackers.com/c/using-ssl-certificates-with-haproxy) ://serversforhackers.com/c/using-ssl-certificates-with-haproxy 。认为添加更多细节会很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-27T16:08:12.397

抱歉，我不确定哪个版本的 haproxy 是可用的 USE_OPENSSL 选项...我在我的代码库中找不到该选项是 V 1.4.24

```
Valid USE_* options are the following. Most of them are automatically set by
# the TARGET, others have to be explictly specified :
#   USE_CTTPROXY         : enable CTTPROXY on Linux (needs kernel patch).
#   USE_DLMALLOC         : enable use of dlmalloc (see DLMALLOC_SRC) patch).
#   USE_EPOLL            : enable epoll() on Linux 2.6\. Automatic. patch).
#   USE_GETSOCKNAME      : enable getsockname() on Linux 2.2\. Automatic. patch).
#   USE_KQUEUE           : enable kqueue() on BSD. Automatic. patch).
#   USE_MY_EPOLL         : redefine epoll_* syscalls. Automatic. patch).
#   USE_NETFILTER        : enable netfilter on Linux. Automatic.patch).
#   USE_PCRE             : enable use of libpcre for regex. Recommended.patch).
#   USE_POLL             : enable poll(). Automatic.patch).
#   USE_REGPARM          : enable regparm optimization. Recommended on x86.patch).
#   USE_SEPOLL           : enable speculative epoll(). Automatic.patch).
#   USE_STATIC_PCRE      : enable static libpcre. Recommended.patch).
#   USE_TPROXY           : enable transparent proxy. Automatic. patch).
#   USE_LINUX_TPROXY     : enable full transparent proxy. Automatic. patch).
#   USE_LINUX_SPLICE     : enable kernel 2.6 splicing. Automatic. patch).
#   USE_LIBCRYPT         : enable crypted passwords using -lcrypt patch).
#   USE_CRYPT_H          : set it if your system requires including crypt.h 
```

# javascript - JavaScript 不工作，想知道如何解决

> ID：15048353
> 
> 赞同：-1
> 
> 时间：2013-02-24T03:32:52.133
> 
> 标签：javascript, jquery

想知道如何修复这个 js 以使其正常工作。我正在隐藏一个部分以显示另一个部分，并且如果“关闭？”，我还会禁用小时文本框。复选框被选中。隐藏/显示/禁用部分有效，但时间选择器不起作用。在尝试添加编码的日期选择器部分之前，我试图弄清楚为什么它不起作用......

无论如何，这是我所指部分的代码......

```
 <link rel="stylesheet" type="text/css" href="includes/css/adm.css" />
<script type="text/javascript" src="http://code.jquery.com/jquery-1.9.0.min.js"></script>
<script type="text/javascript" src="http://code.jquery.com/ui/1.10.0/jquery-ui.min.js"></script>
<script type="text/javascript" src="includes/js/timepicker.js"></script>
<script type="text/javascript" src="jquery-ui-sliderAccess.js"></script>

<script>
$("#tstart").timepicker({
timeFormat: "hh:mm tt",
stepMinute: 15,
minuteGrid: 15,
hourMin: 6,
hourMax: 16
});
</script>

<script>
$("#tend").timepicker({
timeFormat: "hh:mm tt",
stepMinute: 15,
minuteGrid: 15,
hourMin: 11,
hourMax: 23
});
</script>

<script type="text/javascript"> 
function fields(){ 
    if (document.getElementById('working').checked == 1){ 
    document.getElementById('tstart').disabled='disabled'; 
    document.getElementById('tend').disabled='disabled'; 
    document.getElementById('type').style.display = 'none';
    document.getElementById('type').style.visibility = 'hidden';
    document.getElementById('off').style.display = 'inline'; 
    document.getElementById('off').style.visibility = 'visible';
    }else{ 
    document.getElementById('tstart').disabled=''; 
    document.getElementById('tend').disabled=''; 
    document.getElementById('type').style.display = 'inline';
    document.getElementById('type').style.visibility = 'visible';
    document.getElementById('off').style.display = 'none'; 
    document.getElementById('off').style.visibility = 'hidden';
    }
}
</script>

<td class="add_hours_left_top">Date:&nbsp;</td>
                <td class="add_hours_right_top">
                    <input type="text" name="date" id="date" size="22" value="">
                    <input type="hidden" name="work" value="0">
                    <input type="checkbox" title="Check if off work!" name="work" id="working" value="1" onclick="fields();" />Off?
                </td>
            </tr>
            <tr>
                <td class="add_hours_left">Hours:&nbsp;</td>
                <td class="add_hours_right">
                    <input type="text" name="timestart" id="tstart" size="10" value=""> to 
                    <input type="text" name="timeend" id="tend" size="10" value="">
                </td>
            </tr>
            <tr>
                <td class="add_hours_reason_select" colspan="2" id="type">
                    <div class="add_hours_type_name">Type of work to be done:</div>
                    <input type="hidden" name="work_type" value="0" checked />
                    Temps <input type="radio" name="work_type" value="1" /><b>&middot;</b>&nbsp;
                    Scrub Floors <input type="radio" name="work_type" value="2"/></br>
                    Leave Early or Later <input type="radio" name="work_type" value="3"/><b>&middot;</b>&nbsp;
                    Training <input type="radio" name="work_type" value="4"/></br>
                    </label>
                </td>
            </tr>
            <tr>
                <td class="add_hours_reason_select" colspan="2" id="off" style="display:none;">
                <div class="add_hours_type_name">Reason off work:</div>
                    <input type="hidden" name="why_off" value="0" checked />
                    Request <input type="radio" name="why_off" value="1" /><b>&middot;</b>&nbsp;
                    Medical Leave <input type="radio" name="why_off" value="2"/></br>
                    </label>
                </td> 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T05:35:55.620

引用操作：

> “......但是时间选择器不起作用。我试图弄清楚它为什么不起作用......”

如果没有 DOM 就绪处理程序，代码将无法工作，因为在调用时间选择器初始化方法时 HTML 元素还不存在。DOM 就绪函数可确保在触发方法之前完全构造DOM *。*`.timepicker()`

当您将代码包装在[DOM 就绪函数](http://api.jquery.com/ready/)中时，您的时间选择器工作得很好。

**演示：http: [//jsfiddle.net/nHAcA/2/](http://jsfiddle.net/nHAcA/2/)**

```
$(document).ready(function () {  // <-- use a DOM Ready handler function

    $("#tstart").timepicker({
        timeFormat: "hh:mm tt",
        stepMinute: 15,
        minuteGrid: 15,
        hourMin: 6,
        hourMax: 16
    });

    $("#tend").timepicker({
        timeFormat: "hh:mm tt",
        stepMinute: 15,
        minuteGrid: 15,
        hourMin: 11,
        hourMax: 23
    });

    function fields() {
        if (document.getElementById('working').checked == 1) {
            document.getElementById('tstart').disabled = 'disabled';
            document.getElementById('tend').disabled = 'disabled';
            document.getElementById('type').style.display = 'none';
            document.getElementById('type').style.visibility = 'hidden';
            document.getElementById('off').style.display = 'inline';
            document.getElementById('off').style.visibility = 'visible';
        } else {
            document.getElementById('tstart').disabled = '';
            document.getElementById('tend').disabled = '';
            document.getElementById('type').style.display = 'inline';
            document.getElementById('type').style.visibility = 'visible';
            document.getElementById('off').style.display = 'none';
            document.getElementById('off').style.visibility = 'hidden';
        }
    }

}); 
```

如果我们删除 DOM 就绪功能并在 jsFiddle 中禁用 DOM 就绪，时间选择器就会停止工作：http: [//jsfiddle.net/nHAcA/3/](http://jsfiddle.net/nHAcA/3/)

阅读更多： [http ://api.jquery.com/ready/](http://api.jquery.com/ready/)

* * *

**奖励积分：**

由于您使用的是 jQuery，因此请摆脱您的内联`onclick`函数并将其替换为[jQuery`on()`方法](http://api.jquery.com/on/)。见：http: [//jsfiddle.net/nHAcA/4/](http://jsfiddle.net/nHAcA/4/)

```
$('#working').on('click', function () {
    if (document.getElementById('working').checked == 1) {
        document.getElementById('tstart').disabled = 'disabled';
        document.getElementById('tend').disabled = 'disabled';
        document.getElementById('type').style.display = 'none';
        document.getElementById('type').style.visibility = 'hidden';
        document.getElementById('off').style.display = 'inline';
        document.getElementById('off').style.visibility = 'visible';
    } else {
        document.getElementById('tstart').disabled = '';
        document.getElementById('tend').disabled = '';
        document.getElementById('type').style.display = 'inline';
        document.getElementById('type').style.visibility = 'visible';
        document.getElementById('off').style.display = 'none';
        document.getElementById('off').style.visibility = 'hidden';
    }
}); 
```

此外，使用 jQuery...

`document.getElementById('off')`可以替换为`$('#off')`

和...

```
document.getElementById('off').style.display = 'none'; 
```

可以换成...

```
$('#off').css('display','none'); 
```

和...

```
document.getElementById('off').style.display = 'none';
document.getElementById('off').style.visibility = 'hidden'; 
```

都可以换成...

```
$('#off').css({
    'display': 'none',
    'visibility': 'hidden'
}); 
```

或者您可能想尝试[使用 jQuery`hide()`方法](http://api.jquery.com/hide/)。

```
$('#off').hide(); 
```

它与 相同`display: none`。`visibility: hidden`使用时是多余的`display: none`。由于后者还使元素大小为零并将其从流中取出，因此消除它的可见性是没有意义的……它已经消失了。

然后使用[jQuery`.show()`方法](http://api.jquery.com/show/)将元素带回来。

```
$('#off').show(); 
```

根据文档：*“这大致相当于调用`.css('display', 'block')`，**除了**显示属性恢复到最初的状态。如果元素的显示值为`inline`，则隐藏并显示，它将再次显示`inline`。”*

另请参阅[jQuery`.css()`文档](http://api.jquery.com/css/)、[jQuery`.prop()`文档](http://api.jquery.com/prop/)和[jQuery Selectors 文档](http://api.jquery.com/category/selectors/)。

你明白了....

```
$('#working').on('click', function () {
    if ($(this).prop('checked')) {
        $('#tstart').prop('disabled',true);
        $('#tend').prop('disabled',true);
        $('#type').hide();
        $('#off').show();
    } else {
        $('#tstart').prop('disabled',false);
        $('#tend').prop('disabled',false);
        $('#type').show();
        $('#off').hide();
    }
}); 
```

**更新演示：http: [//jsfiddle.net/nHAcA/6/](http://jsfiddle.net/nHAcA/6/)**

# html - Flash 悬停 caurina 饱和度

> ID：15048357
> 
> 赞同：1
> 
> 时间：2013-02-24T03:33:14.867
> 
> 标签：html, flash, tween

我有一个加载图像并在其上应用灰色饱和度的 Flash 项目。图像下方有一个按钮，当突出显示或鼠标悬停在该按钮上时，它会消除饱和度并恢复图像的原始颜色。这在演示模式和独立的 Flash 播放器中运行良好，但是当我尝试在线 (HTML) 页面使用它时，功能的悬停不再恢复图像的颜色。我的代码在下面，我希望比我聪明的人知道问题所在。

谢谢。

```
 function parsXML()
{
    mainGalleryNode = gallery_xml.childNodes[0].childNodes;
    path = mainGalleryNode[_root.gallerySel - 1].attributes.path;
    lenGall = mainGalleryNode[_root.gallerySel - 1].childNodes.length;
    lenCat = mainGalleryNode.length;
    for (var _loc2 = 0; _loc2 < lenGall; ++_loc2)
    {
        arrayImage[_loc2] = path + mainGalleryNode[_root.gallerySel - 1].childNodes[_loc2].attributes.pic;
        arrayThumb[_loc2] = path + mainGalleryNode[_root.gallerySel - 1].childNodes[_loc2].attributes.thumbnail;
        arrayTitle[_loc2] = mainGalleryNode[_root.gallerySel - 1].childNodes[_loc2].attributes.name;
        arrayDescription[_loc2] = mainGalleryNode[_root.gallerySel - 1].childNodes[_loc2].attributes.description;
    } // end of for
} // End of the function

function arrayThumbs()
{
    for (var _loc3 = 1; _loc3 <= lenGall; ++_loc3)
    {
        _thumbs._thumbs.attachMovie("thumb", "thumb" + _loc3, _loc3);
        var _loc2 = _thumbs._thumbs["thumb" + _loc3];
        _loc2.index = _loc3;
        _loc2._y = Math.floor(_loc2._height + 1) * (_loc3 - 1);
        _loc2._mc._txt.text = _loc2.index;
        _loc2.onRollOver = function ()
        {
            this.gotoAndPlay("over");
        };
        _loc2.onRollOut = _loc2.onReleaseOutside = function ()
        {
            this.gotoAndPlay("out");
        };
        _loc2.onRelease = function ()
        {
            caurina.transitions.Tweener.addTween(_mc1._mc, {_saturation: 1, time: 5.000000E-001});
            mcLoader.loadClip(arrayImage[this.index - 1], _mc1._mc);
            currentIndex = this.index - 1;
            getDes();
        };
    } // end of for
    counter = 1;
} // End of the function

function menuCat()
{
    for (var _loc4 = 1; _loc4 <= lenCat; ++_loc4)
    {
        _category.attachMovie("btnCat", "btnCat" + _loc4, _loc4);
        var _loc3 = _category["btnCat" + _loc4];
        var _loc6 = _category["btnCat" + (_loc4 - 1)];
        _loc3.index = _loc4;
        arrayNameGall[_loc4 - 1] = mainGalleryNode[_loc4 - 1].attributes.name;
        _loc3._mc._txt.autoSize = true;
        _category["btnCat" + _loc4]._mc._txt.text = arrayNameGall[_loc4 - 1];
        _loc3._red._width = _loc3._mc._txt.textWidth + 10;
        _loc3._red._x = _loc3._mc._txt.textWidth / 2;
        _loc3._mask._width = _loc3._mc._txt.textWidth + 10;
        _loc3._mask._x = _loc3._mc._txt.textWidth / 2;
        for (var _loc5 = 1; _loc5 <= 3; ++_loc5)
        {
            _loc3["_arr" + _loc5]._x = _loc3._mc._txt.textWidth / 2 - 5;
        } // end of for
        _loc3._mask_red._txt.text = arrayNameGall[_loc4 - 1];
        _loc3._x = Math.floor(_loc6._x + _loc6._mc._txt.textWidth + intervalCat);
        if (_loc4 < lenCat)
        {
            _category._breakers.attachMovie("breaker", "breaker" + _loc4, _loc4);
            var _loc7 = _category._breakers["breaker" + _loc4];
            _loc7._x = _loc3._x + _loc3._mc._txt.textWidth + intervalBr;
        } // end if
        _category._x = 881 - _category._width;
        _loc3.onRollOver = function ()
        {
            if (this.index != _root.gallerySel)
            {
                btnCatOver(this._red, this._arr1);
            } // end if
        };
        _loc3.onRollOut = _loc3.onReleaseOutside = function ()
        {
            if (this.index != _root.gallerySel)
            {
                btnCatOut(this._red, this._arr1);
            } // end if
        };
        _loc3.onRelease = function ()
        {
            if (this.index != _root.gallerySel)
            {
                btnCatOut(_category["btnCat" + _root.gallerySel]._red, _category["btnCat" + _root.gallerySel]._arr1);
                clearThumbs();
                caurina.transitions.Tweener.addTween(_thumbs._thumbs, {_y: 0, time: 1, transition: "easeOutCubic"});
                yPos = 0;
                _root.gallerySel = this.index;
                parsXML();
                arrayThumbs();
                getDes();
                mcLoader.loadClip(arrayImage[0], _mc1._mc);
            } // end if
        };
    } // end of for
    btnCatOver(_category.btnCat1._red, _category.btnCat1._arr1);
} // End of the function

function btnCatOver(clip1, clip2)
{
    caurina.transitions.Tweener.addTween(clip1, {_y: 17, time: 3, transition: "easeOutCubic"});
    caurina.transitions.Tweener.addTween(clip2, {_y: -6, time: 5.000000E-001, transition: "easeOutCubic"});
    var _loc1 = new Sound();
    _loc1.attachSound("bt_snd");
    _loc1.start();
} // End of the function
function btnCatOut(clip1, clip2)
{
    caurina.transitions.Tweener.addTween(clip1, {_y: -27, time: 3, transition: "easeOutCubic"});
    caurina.transitions.Tweener.addTween(clip2, {_y: -24, time: 5.000000E-001, transition: "easeOutCubic"});
} // End of the function
function clearThumbs()
{
    for (var _loc1 = 1; _loc1 <= lenGall; ++_loc1)
    {
        _thumbs._thumbs["thumb" + _loc1].removeMovieClip();
    } // end of for
} // End of the function
function getDes()
{
    var _loc2 = new Object();
    _loc2.onMouseMove = function ()
    {
        if (_mask_des.hitTest(_root._xmouse, _root._ymouse))
        {
            caurina.transitions.Tweener.addTween(_descr, {_y: 407, time: 5.000000E-001, transition: "easeOutCubic"});
        }
        else
        {
            caurina.transitions.Tweener.addTween(_descr, {_y: 467, time: 5.000000E-001, transition: "easeOutCubic"});
        } // end else if
    };
    Mouse.addListener(_loc2);
    _descr._txt.text = arrayTitle[currentIndex];
} // End of the function
_thumbs._thumbs.setMask(_thumbs._mask);
_root.gallerySel = 1;
var lenGall;
var lenCat;
var mainGalleryNode;
var path;
var arrayImage = new Array();
var arrayThumb = new Array();
var arrayTitle = new Array();
var arrayDescription = new Array();
var arrayNameGall = new Array();
var currentIndex = 0;
var descStr;
var titleStr;
var sel = false;
var counter;
var intervalCat = 54;
var intervalBr = intervalCat / 2;
var yPos = 0;
var gallery_xml = new XML();
gallery_xml.ignoreWhite = true;
gallery_xml.onLoad = function (ok)
{
    if (ok)
    {
        parsXML();
        arrayThumbs();
        menuCat();
        getDes(); //Shows the Colour view bar
        _mc2._mc.unloadMovie();
        mcLoader.loadClip(arrayImage[0], _mc1._mc);

    } // end if
};
gallery_xml.load("cgal.xml");
btnTop.onRollOver = btnBottom.onRollOver = function ()
{
    this.gotoAndPlay("over");
};
btnTop.onRollOut = btnBottom.onRollOut = function ()
{
    this.gotoAndPlay("out");
};
btnBottom.onRelease = function ()
{
    if (_thumbs._thumbs._height > _thumbs._mask._height)
    {
        if (Math.abs(_thumbs._thumbs._y) < _thumbs._thumbs._height - _thumbs._mask._height && caurina.transitions.Tweener.isTweening(_thumbs._thumbs) != true)
        {
            yPos = yPos - (_thumbs._thumbs.thumb1._height + 1);
            caurina.transitions.Tweener.addTween(_thumbs._thumbs, {_y: yPos, time: 5.000000E-001, transition: "easeOutCubic"});
        } // end if
    } // end if
};
btnTop.onRelease = function ()
{
    if (_thumbs._thumbs._height > _thumbs._mask._height)
    {
        if (Math.abs(_thumbs._thumbs._y) > 0 && caurina.transitions.Tweener.isTweening(_thumbs._thumbs) != true)
        {
            yPos = yPos + (_thumbs._thumbs.thumb1._height + 1);
            caurina.transitions.Tweener.addTween(_thumbs._thumbs, {_y: yPos, time: 5.000000E-001, transition: "easeOutCubic"});
        } // end if
    } // end if
};
caurina.transitions.properties.ColorShortcuts.init();
_descr._btn_color.onRollOver = function ()
{
    caurina.transitions.Tweener.addTween(_mc2._mc, {_saturation: 1, time: 2});
};
_descr._btn_color.onRollOut = function ()
{
    caurina.transitions.Tweener.addTween(_mc2._mc, {_saturation: 0, time: 2});
};
var mcLoader = new MovieClipLoader();
var loadListener = new Object();
loadListener.onLoadStart = function (mcTarget)
{
    _root.loadImBig = true;
    _root._content.pages.page1.page1.attachMovie("mcPercents", "mcPercents", this.getNextHighestDepth());
    _root._content.pages.page1.page1.mcPercents._x = _mask_des._width / 2 - 10;
    _root._content.pages.page1.page1.mcPercents._y = _mask_des._height / 2 - 25;

};
loadListener.onLoadProgress = function (mcTarget, bytesLoaded, bytesTotal)
{
    var _loc2 = Math.ceil(bytesLoaded / bytesTotal * 100);
    _root._content.pages.page1.page1.mcPercents.txtPercents.text = _loc2 + "%";
};
loadListener.onLoadComplete = function (mcTarget)
{
    _root._content.pages.page1.page1.mcPercents.mcLoading.removeMovieClip();
    _root._content.pages.page1.page1.mcPercents.removeMovieClip();
};
loadListener.onLoadInit = function (mcTarget) //Controls the different tabs at the bottom
{
    caurina.transitions.Tweener.addTween(_mc2._mc, {_saturation: 0, time: 5.000000E-001});
    mask_mc.gotoAndPlay(2);
    _white.gotoAndPlay(2);
};
mcLoader.addListener(loadListener); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T17:09:12.577

*编辑：*

查看 snapplex 的项目文件后，问题似乎是当掩码完全为空时，Flash 版本之间的行为差​​异。

灰色饱和度有一个蒙版，可以在空白帧上制作动画并完成。这*将隐藏*测试环境中的蒙版对象（针对 Flash Player 8），但在浏览器中*显示整个对象*（使用最新的播放器版本）。

一个快速的解决方法是向舞台外的蒙版添加一个形状，这会使蒙版对象在两个播放器版本中都不可见。

（我最初的回答表明 Flash 没有收到没有焦点的翻转事件，但这是不正确的。）

# javascript - 在 Javascript 中创建 HTML DOM 选择元素并具有 onchange 事件

> ID：15048359
> 
> 赞同：3
> 
> 时间：2013-02-24T03:33:34.127
> 
> 标签：javascript, html, dom, select, onchange

我正在使用 Javascript 创建 HTML DOM 元素（是的，我知道这很讨厌）。
我可以创建选择元素，但无法添加 onchange 属性。

例子：

```
var sel = document.createElement('select');
sel.id = 'someID';
sel.title = 'Some title';
sel.style.fontWeight = 'bold';
sel.size = 1; 
```

一旦我添加了选项并完成了一个
`document.getElementById('someOtherID').appendChild(sel);`
我得到我的选择元素。

我想要做的是，在上面的 A 处，添加：
`sel.onChange = 'someJavascriptFunction()';`
但它不喜欢它。

我应该在广场之外思考吗？哪一个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T03:42:15.133

The event name should be lowercase, and you need to assign a function instead of a string.

```
sel.onchange = someJavascriptFunction; 
```

If there's more work to do, you can assign an anonymous function.

```
 //  v----assign this function
sel.onchange = function() {
    // do some work
    someJavascriptFunction();  // invoke this function
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T03:35:32.103

You should be doing something like this:

```
sel.onChange = someJavascriptFunction; 
```

(notice that there are no parens after `someJavascriptFunction`. This means you are attaching the function, not the invocation of the function.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T03:54:57.627

如果您有可能将多个函数绑定到该事件，您将希望使用这种稍微冗长的方法。

```
if (sel.addEventListener) {
    sel.addEventListener('change', changeFunction, false);
} else if (sel.attachEvent) {
    sel.attachEvent('onchange', changeFunction);
} else {
    sel.onchange = changeFunction;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-17T06:01:20.553

完成整个事情的更简单方法是：页面中已经存在的某个位置：

<div id=someContainer></div>

然后在你的javascript中这样做：

document.getElementById('someContainer').innerHTML = "<select id=someId title='some title' size=1 style='font-weight: bold' onchange='someJavascriptFunction()' >";

或更慢：

var html = "<select id=someId title='some title' size=1 style='font-weight: bold' onchange='someJavascriptFunction()' >";

var someContainer = document.getElementById('someContainer');

someContainer.innerHTML = html;

document.getElementById() 很常见，你可能有一个库，如 jquery 或原型，更容易做到这一点，如 $('someContainer')，或者自己定义它（var $ = document.getElementById;）。

innerHTML 是每个 dom 元素上的伪变量，它返回或设置您执行它的元素内的所有 html。你可以传递任意长的 HTML，如果你愿意，我猜是整个页面。你可以编写一个巧妙的程序来构建 html 文本，他们甚至有模板系统，比如 hogan (google it)。

# c - C：编程：如何从 main.c 创建 main.o？

> ID：15048361
> 
> 赞同：-3
> 
> 时间：2013-02-24T03:33:55.780
> 
> 标签：c, unix

我正在尝试编写一个makefile并编译了main.c。然后我正在尝试创建 main.o，但我对如何创建感到困惑。我在 UNIX 中使用 vi 编辑器。我试过`gcc -o main.c`了，我收到一个致命错误，说没有输入文件。什么地方出了错？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T03:37:28.007

You can use gcc's `-c` option to compile a source file without linking. This will leave you with a `.o` file:

```
gcc -c main.c 
```

You can then create an executable by linking that `.o` file with the standard libraries, and other `.o` or `.c` files if you like:

```
gcc -o myprogram main.o 
```

The primary advantage of this is when you have multiple `.c` files. In that case you can save time by not recompiling them all when one of them changes.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T13:13:25.683

如果您使用的是 Makefile，那么您可能包含太多内容。警告：以下内容将覆盖您的 Makefile。尝试：

```
echo 'all: main.o' > Makefile
make 
```

甚至：

```
> Makefile  # truncate the Makefile.  That is, make it empty
make main.o 
```

甚至：

```
rm Makefile
make main.o 
```

别这么辛苦了。

# c# - 跨程序集模拟部分类

> ID：15048362
> 
> 赞同：2
> 
> 时间：2013-02-24T03:34:17.223
> 
> 标签：c#, .net

我正在尝试将许多辅助类组合成一个公共父类以方便使用。例如，在我想要做的应用程序中

```
Tools.StringTool.foo(..)
Tools.NumberTool.bar(..)
Tools.NetworkTool.something(...) 
```

这里的想法是将所有工具组织在一个公共工具类下，以便智能感知可以在我键入“工具”时将它们全部显示出来。

在父静态部分类工具下定义所有工具工作正常，但不适用于不同程序集中的工具。

我试图通过用命名空间 XYTools 替换父工具类来模拟程序集之间的静态部分类，但是对于在 XY 命名空间之外编写的代码，我需要在使用它之前完全限定每个工具。

即在应用程序代码中

```
 Tools.MyTool(..) // won't compile
  X.Y.Tools.MyTool(...) // will compile but ugly 
```

有什么建议可以解决这个问题或组织工具的替代方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T05:50:55.333

在这种情况下，您可以使用扩展方法。导入命名空间时，命名空间内的类中定义的所有扩展方法都可用。

这样，您将拥有像这样的静态类，`MyUtilityNamespace.MyClassInAssembly1`并且`MyUtilityNamespace.MyClassInAssembly2`它们都在单个类实例上提供扩展方法，但这与获取该类实例相关联的丑陋，如下所示：

```
// in central assembly
class Tool {
    private static Tool _t = new Tool();
    public static Tool T { get { return _t; } }
}
// in utility assembly 1
public static class MyExtensionClassInAssembly1 {
    public static void SomeUtilityMethodX(this Tool tool, Object arg1, Object arg2) {
        // do something
    }
}
// in utility assembly 2
public static class MyExtensionClassInAssembly2 {
    public static void SomeUtilityMethodY(this Tool tool) {
        // do something
    }
} 
```

你会像这样使用它：

```
Tool.T.SomeUtilityMethodX( Tool.T.SomeUtilityMethodY(), null ); 
```

它不漂亮，但意味着您只需要导入一个命名空间一次，并且`Tool.T`是恒定的，不需要记住`StringTool`或`NetworkTool`.

另一种选择是使用命名空间或类型别名，但是这很费力，因为您需要在`using Tools = X.Y.Tools.MyTool;`您拥有的每个源文件上指定行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-02-27T10:08:49.833

事实证明，最简单的方法就是使用命名空间

```
 // in project 1
 namespace Tools {
      public static class NetworkTool {
      }
 }

 // in project 2
 namespace Tools {
      public static class FileTool {
      }
 }

 // in client code (references both projects)
 Tools.NetworkTool.SomeMethod();
 Tools.FileTool.SomeMethod() 
```

# jquery - 显示一段时间后淡出一个元素

> ID：15048365
> 
> 赞同：0
> 
> 时间：2013-02-24T03:34:48.410
> 
> 标签：jquery, jquery-ui

我试图让`.status-bar`%100 在设定的时间间隔内出现，然后在时间间隔到期时开始消失。我遇到的问题是，现在只要执行下面的代码，状态栏就会出现并立即开始消失（请注意，下面的代码是更大点击功能的一部分）。

我想知道是否有人可以帮助我确定我需要做些什么来完成这个。

```
setTimeout(function(){
     $(".status-bar").show();
     $(".status-bar").fadeOut(5000, function () {

    });
}, 0); 
```

提前谢谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T03:38:43.507

不要使用 setTimeout。除了使用[**delay()**](http://api.jquery.com/delay/)

```
$('.status-bar"').delay(2000).fadeOut(); 
```

# jquery - Submit / Goto when focused in input and press enter

> ID：15048370
> 
> 赞同：0
> 
> 时间：2013-02-24T03:35:34.227
> 
> 标签：jquery, submit, goto, enter

I'm not sure why this isn't working? I've tried a couple methods and looked around, but none of the examples work for me. My code:

HTML

```
<div id='SearchBar'>

    <form id='SearchBar'>

        <input placeholder='Search' id='SearchBar'></input>

    </form>

</div> 
```

CSS

```
#SearchBar{
                background:#ffffff;
                width:224px;
                height:32px;
                float:right;
            }

                form#SearchBar {
                    width:100%;
                    height:100%;
                }

                    input#SearchBar {   
                        font-size:16px;
                        border:none;
                        width:208px;
                        height:32px;
                        padding:0 8px;
                    }

                        input#SearchBar:focus{
                            outline-color:#2c5aa0;
                        } 
```

jQuery

```
$('input#SearchBar').keypress(function(event) {

    if (event.which == 13) {

              window.location = list.html; //or submit or do whatever

    }

}); 
```

Any help is appreciated. Where am I going wrong?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T03:38:53.017

Listen to `keyup` event and you are missing quotation marks for `list.html`, `list` object is `undefined` so it doesn't have `html` property!

```
$(function(){
    $('#SearchBar').keyup(function(event) {
        if (event.which == 13) {
            window.location.href = 'list.html'; 
        }
    });
}) 
```

# ruby - 数字转换 - Fixnum / Bignum

> ID：15048377
> 
> 赞同：2
> 
> 时间：2013-02-24T03:36:34.257
> 
> 标签：ruby, data-conversion

我认为 Ruby 会自动转换为 Bignum。[我在这里](https://stackoverflow.com/questions/6494514/avoid-automatic-conversion-from-fixnum-to-bignum-in-ruby)找到了确认

但是，它没有发生：

```
ruby 1.8.7 (358) [universal-darwin12.0]
>> 2 ** 62    
=> 4611686018427387904
>> 2 ** 63
=> -9223372036854775808   #why minus - how about automatic Bignum conversion?
>> 2 ** 64
=> 0                      #- how about automatic Bignum conversion? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T03:43:21.057

## 使用较新的 Ruby 版本

Ruby 1.8.7（在互联网术语中）是古老的。使用更新的东西。例如：

```
[1] pry(main)> RUBY_VERSION
=> "2.0.0"
[2] pry(main)> 2 ** 63
=> 9223372036854775808
[3] pry(main)> 2 ** 64
=> 18446744073709551616 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T03:43:59.540

很可能是特定于您正在使用的构建的错误。例如，当我这样做时，`ruby -v`我得到：

```
ruby 1.8.7 (2011-02-18 patchlevel 334) [i686-darwin12.2.1], MBARI 0x6770, Ruby Enterprise Edition 2011.03 
```

...在一次`irb`会议中，我得到：

```
1.8.7 :006 > 2 ** 64
 => 18446744073709551616 
1.8.7 :007 > (2 ** 64).class
 => Bignum 
1.8.7 :008 > RUBY_VERSION
 => "1.8.7" 
```

如果我使用较新的版本，我也不会遇到这个问题。如果您可以从中发布您的输出`ruby -v`，将会对这种情况有所了解。例如 Ruby REE vs. MRI vs. JRuby 等。

另外，这只是一个意见，所以请接受它的价值，但我认为 Apple 在保持其内置版本的 Ruby 更新方面做得不是很好，所以以防万一你使用的是内置版本然后考虑转移到另一个版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T03:44:08.477

这可能是旧版本 Ruby 中的一个错误。换个新版本，问题就解决了。今天是 Ruby 2.0 的发布日。Ruby 1.8 很快就会死掉。在我的 Ruby 1.9.3 上，我只是没有`2**1000000`任何问题，只是它持续了一段时间，所以我不得不终止它。

# php - Google Calendar Add Events anonymously Via Page Form

> ID：15048381
> 
> 赞同：1
> 
> 时间：2013-02-24T03:37:57.237
> 
> 标签：php, web-applications, google-calendar-api, google-api-php-client

I have a website that I'm integrating with a Google calendar. I want to allow users to add events to this calendar, but not directly. I've got a form setup on the page that can add events to the calendar presently, but you have to be logged in to use that form. Is there a way to authorize the webpage itself, or put the auth token in the code so that you don't have to be logged in to add an event? All I get on the Google developer site is a bunch of "Google knows best" brow beating about how it's a bad idea from a security stand point, but no real answers. Has anyone ever done something similar?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-24T10:15:57.143

您需要创建一个服务帐户并将您的私钥存储为 .p12 文件。

这是有关服务帐户的 Google 信息：[服务帐户](https://developers.google.com/accounts/docs/OAuth2#serviceaccount)

您需要对服务帐户执行的操作：[后续步骤](https://code.google.com/p/google-api-php-client/wiki/OAuth2#Service_Accounts)

我和你有同样的问题；我正在创建一个脚本来自动验证用户以将事件添加到谷歌日历（作为后台进程）......使用在日历事件详细信息和时间/日期的表单中捕获的数据。

到目前为止，我已经设法将表单详细信息发布到单击表单的提交按钮后加载的新文件。目前该页面将要求用户接受（“您是否同意此应用程序可以访问您的日历设置？：是，否？”）......然后它将允许用户确认提交的详细信息，确认后，用户被重定向到主页。创建了一个新事件。

（如果您想查看我当前的进度，请查看我的 youtube 视频：**www.youtube.com/watch** ?v=9pU_RvpGqx0&hd= 1 注意：我已经更新了我的脚本。）

祝你好运！

乔希。

# html - Why does the framerate for my canvas game rise when I drag the window?

> ID：15048386
> 
> 赞同：0
> 
> 时间：2013-02-24T03:39:14.270
> 
> 标签：html, canvas, html5-canvas, google-chrome-devtools

I'm making a simple HTML5 game and decided to enable the FPS counter in Chrome, and I noticed something odd.

When running the game normally I get around 24 FPS, but when I move the window using two fingers on my mac, enabling the bounce-back effect the frame rate shoots up to 50-70 FPS.

I've tried to find out why by using the Dev Tools in Chrome, but unfortunately I don't seem to be able to make sense of it.

I've posted pictures of the game with the FPS counter just below: ![Game with low FPS](../Images/03ec72a3e82d209024bf0c74f08c3afb.png) Low FPS

![Game with high FPS, by dragging the window](../Images/b079bc336d72eef09198aada4d2d68e0.png) High FPS

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T17:30:34.100

您是否尝试[过带帧模式的时间轴](http://updates.html5rocks.com/2013/02/Profiling-Long-Paint-Times-with-DevTools-Continuous-Painting-Mode)？

# c# - Bind Controls Position to Another Path

> ID：15048388
> 
> 赞同：0
> 
> 时间：2013-02-24T03:39:15.730
> 
> 标签：c#, wpf, controls

I have a Path who's data comes from a LineGeometry. I also have a TextBlock that is created when the path is created. What is the correct way to get the TextBlock's position to follow the Path's position?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T06:50:26.273

有很多方法

*   在自定义面板中包含 Path 和 TestBlock，并实现 MeasureOverride 和 ArrangeOverride
*   使用已经存在的面板（Grid、StackPanel 等）
*   监听 Path 对象的 LayoutUpdated，然后使用 TranslatePoint 方法定位 TextBlock

每种方式都有其缺点和优点，这取决于整个窗口的布局方式以及路径布局变化的动态程度

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T10:18:57.197

The perhaps simplest solution would be to put the Path and the TextBlock into a common container that perform the necessary layout on the TextBlock. This could be a Grid:

```
<Canvas>
    <Grid>
        <Path ... />
        <TextBlock Text="Label" HorizontalAlignment="Center" VerticalAlignment="Center"/>
    </Grid>
</Canvas> 
```

* * *

You could also position the TextBlock relative to the Path's center by binding its [`RenderTransform`](http://msdn.microsoft.com/en-us/library/system.windows.uielement.rendertransform.aspx) (or [`LayoutTransform`](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.layouttransform.aspx)) to the Path's `Geometry` and use a [binding converter](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.converter.aspx) for the actual calculation. The converter would for example convert a Geometry into a [`TranslateTransform`](http://msdn.microsoft.com/en-us/library/system.windows.media.translatetransform.aspx). Note that it does not even require the Geometry to be a LineGeometry. It just uses the Geometry's `Bounds`. You could however do any specialized calculation, depending on the actual type of Geometry.

```
public class GeometryCenterConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        var result = new TranslateTransform();
        var geometry = value as Geometry;

        if (geometry != null)
        {
            result.X = (geometry.Bounds.Left + geometry.Bounds.Right) / 2;
            result.Y = (geometry.Bounds.Top + geometry.Bounds.Bottom) / 2;
        }

        return result;
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        throw new NotSupportedException();
    }
} 
```

You would write the binding like this:

```
<Path Name="path" ... />
<TextBlock Text="Label"
    RenderTransform="{Binding Path=Data, ElementName=path,
                      Converter={StaticResource GeometryCenterConverter}}"/> 
```

* * *

Note that the above example does not take any alignment of the TextBlock into account. If you need it to be centered or perhaps right- and bottom-aligned, you may need a more complex binding (perhaps a MultiBinding) or you may put all elements in a Canvas and set `Canvas.Left` and `Canvas.Top` appropriately on the TextBlock.

# java - 从地图中检索第一个和第二个值

> ID：15048391
> 
> 赞同：1
> 
> 时间：2013-02-24T03:40:45.623
> 
> 标签：java, hashmap

从地图中获取第一个值和第二个值的最佳方法是什么。我正在尝试阅读`tableLists`地图并`first and second value`从地图中获取。

下面是我`ReadTableConnectionInfo`的类代码。

```
private final LinkedHashMap<String, ReadTableConnectionInfo> tableLists;

ReadTableConnectionInfo table = tablePicker();

private ReadTableConnectionInfo tablePicker() {

    Random r = new SecureRandom();
    ReadTableConnectionInfo table;

    if (r.nextFloat() < Read.percentageTable / 100) {
        table = get first value from tableLists map
    } else {
        table = get second value from tableLists map
    }

    return table;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T03:55:10.010

假设您确定您的 LinkedHashMap 至少包含两个值，您可以这样做：

```
Iterator<Map.Entry<String, ReadTableConnectionInfo >> it = tableLists.entrySet().iterator();
if (r.nextFloat() < Read.percentageTable / 100) {
  table = it.next().getValue();
} else { //since you have an else, you have to re-ignore the first value just below
  it.next(); // ignoring the first value
  table = it.next().getValue(); //repeated here in order to get the second value
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T04:03:49.100

LinkedHashMap 值的迭代按插入顺序排序。所以 values() 是你需要的：

```
Iterator it = values().iterator();
Object first = it.next().getValue();
Object second = it.next().getValue(); 
```

# angularjs - 角度 - 可重用的对话框

> ID：15048392
> 
> 赞同：6
> 
> 时间：2013-02-24T03:40:48.063
> 
> 标签：angularjs, angularjs-directive

我需要构建一个对话框以用于项目列表中的任何项目。除了明显依赖于项目的字段值之外，无论项目如何，对话框都几乎相同。

我正在构建的指令是从文件中读取模板，使用 $compile 对其进行编译，然后将其绑定（链接）到项目的范围。绑定的结果是一个 DOM 树。为了使对话框可见，我需要将此树附加到现有 DOM 中的某个元素。我的对话框的性质使得将其直接附加到 body 标记是有意义的。该对话框将与列表中的不同项目组合使用多次

所以这是我的问题：这个过程（编译、绑定、追加）有多少可以提前完成？我当然可以运行编译一次。我还可以将编译结果绑定到 $rootscope 并将其附加（隐藏）到 body 标记。这样我以后可以打开可见性并显示对话框。

但是，如果它已经绑定并附加到 DOM，是否可以将其重新绑定到其他范围，如果是，那么正确的方法是什么？另一个问题是它是否值得？可能只是在每次需要时重新插入它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-24T08:47:09.937

如果您一次只显示一个这样的对话框并且您会经常使用它，则不必将其重新绑定到另一个范围，只需更改范围上的数据即可。像这样的东西：

1.  为您的对话创建服务
2.  创建指令并将您的服务注入其中。当链接函数执行时，将类似 $scope.dialogData 的内容传递给服务，以便服务可以更新数据。
3.  创建一个控制器来注入服务。通过服务设置对话数据以显示对话。由于您正在修改指令范围内的控制器中的数据，因此 Angular 会注意到并更新您的对话框。
4.  在您的对话框包装器上添加 ng-show 以简化在您的服务上实现 open()/close() 方法。

现在您有了一个可以在系统中的任何位置使用的对话框，并且您只需重新使用相同的指令，而不必弄乱 DOM 或编译。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-24T12:09:37.253

这确实是一个很好的问题，我很高兴看到越来越多的人开始将对话视为服务。

关于您的具体问题，以下是我的一些想法：

*   您可以“缓存”链接函数（即 - 从`$compile`调用返回的函数），然后根据需要调用此函数（传入范围变量）。
*   您只能在打开对话框时按需附加它，而不是插入（隐藏）编译元素。最重要的是，我宁愿将模态元素附加到[$rootElement](http://docs.angularjs.org/api/ng.%24rootElement)而不是`<body>`仅仅不触及`ng-app`定义位置上方的 DOM 元素。只是不要触摸 AngularJS 无法控制的 DOM 部分。
*   IMO 对话框非常接近 AngularJS 路由（因为它们提供了不同的“视图”），因此能够在显示模式之前解决承诺会非常好（就像路由一样）。

事实上，在设计一个好的、通用的对话服务时，有很多事情需要考虑，我希望这些建议以及其他人提供的出色输入能够帮助您入门。但这一切都是理论上的，所以如果您正在查看此处讨论的内容的实现，您可以查看[此实现](https://github.com/angular-ui/bootstrap/blob/master/src/dialog/dialog.js)。[（来自http://angular-ui.github.com/bootstrap/](http://angular-ui.github.com/bootstrap/)的$dialog 服务- 它是完全可定制的，因此可以与 Bootstrap 以外的 CSS 一起使用。[此处](https://github.com/angular-ui/bootstrap/blob/master/src/dialog/README.md)的文档）。

它可以在这个 plunk 中看到：[http ://plnkr.co/edit/PG0iHG?p=preview](http://plnkr.co/edit/PG0iHG?p=preview)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-24T03:55:05.913

我认为很好的问题。您想知道是否可以“热交换”元素的范围。我不知道是否有办法做到这一点，或者即使有，如果那是 Angular 方式。我认为您查看了[ng-view](https://github.com/angular/angular.js/blob/master/src/ng/directive/ngView.js)如何达到您的目标？

我的建议是 $compile 一次，将结果、链接或嵌入函数或任何它在 Angular 用语中称为的东西保留在某个地方。并为每个需要的对话框实例调用它。

# qt - Qt 的 bindTexture 里面有什么魔力？

> ID：15048395
> 
> 赞同：1
> 
> 时间：2013-02-24T03:41:43.497
> 
> 标签：qt, opengl, opengl-es, qt5

我正在使用 Qt5 和 QGLWidget 类来呈现像素的实时流。我遇到了一些性能问题，想设置一个像素缓冲区来执行异步数据传输。

我正在尝试以老式方式绑定纹理，但它呈现为空白。当我回到我的 Qt5 代码时，一切正常。

有人知道如何让标准 OpenGL 版本工作吗？

**在职的**

```
void glStream::reserveTextures()
{
    displayBuff = (GLubyte*) calloc(numGLFrames*widthGL*heightGL,
    sizeof(GLubyte));

    QImage mySurface(&displayBuff[displayStart],widthGL,heightGL,
    QImage::Format_Indexed8);
    textures[0]=bindTexture(mySurface,GL_TEXTURE_2D,GL_LUMINANCE);

    glBindTexture(GL_TEXTURE_2D,0);
    glECheck();//no errors
} 
```

**不工作**

```
void glStream::reserveTextures()
{
    displayBuff = (GLubyte*) calloc(numGLFrames*widthGL*heightGL,sizeof(GLubyte));

    glGenTextures(1,&textures[0]);
    glBindTexture(GL_TEXTURE_2D,textures[0]);
    glTexImage2D(GL_TEXTURE_2D,0,GL_LUMINANCE,widthGL,heightGL,0,GL_LUMINANCE,
    GL_UNSIGNED_BYTE,&displayBuff[displayStart]);

    glBindTexture(GL_TEXTURE_2D,0);
    glECheck();//no errors
} 
```

**更新功能**

```
glECheck();
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
glLoadIdentity();
program1.bind();
program1.setUniformValue("texture", 0);
program1.enableAttributeArray(vertexAttr1);
program1.enableAttributeArray(vertexTexr1);
program1.setAttributeArray(vertexAttr1, vertices.constData());
program1.setAttributeArray(vertexTexr1, texCoords.constData());
glBindTexture(GL_TEXTURE_2D, textures[0]);
glECheck();
glDrawArrays(GL_TRIANGLES, 0, vertices.size());
glBindTexture(GL_TEXTURE_2D,0);
program1.disableAttributeArray(vertexTexr1);
program1.disableAttributeArray(vertexAttr1);
program1.release();
glECheck(); 
```

**着色器**

```
QGLShader *fshader1 = new QGLShader(QGLShader::Fragment, this);
    const char *fsrc1 =
        "uniform sampler2D texture;\n"
        "varying mediump vec4 texc;\n"
        "void main(void)\n"
        "{\n"
        "    gl_FragColor = texture2D(texture, texc.st);\n"
        "}\n";

    fshader1->compileSourceCode(fsrc1);
    program1.addShader(fshader1); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T03:50:43.430

您似乎需要启用一些其他设置才能显示纹理。

```
void glStream::reserveTextures()
{
    displayBuff = (GLubyte*) calloc(numGLFrames*widthGL*heightGL,sizeof(GLubyte));

    glGenTextures(1,&textures[0]);
    glBindTexture(GL_TEXTURE_2D,textures[0]);
    glTexImage2D(GL_TEXTURE_2D,0,GL_LUMINANCE,widthGL,heightGL,0,GL_LUMINANCE,
    GL_UNSIGNED_BYTE,&displayBuff[displayStart]);

    //This is the magic inside Qt5's implementation
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST); 

    glBindTexture(GL_TEXTURE_2D,0);
    glECheck();//no errors
} 
```

# mysql - cloudbees中数据库的可见性？

> ID：15048396
> 
> 赞同：0
> 
> 时间：2013-02-24T03:41:44.453
> 
> 标签：mysql, cloudbees

我正在研究使用 CloudBees 进行一些应用程序原型设计。我现在正在使用免费帐户，目前我没有支付任何订阅费用。

对我来说，第一步是创建一个 MySQL 数据库来托管我的应用程序数据。我已经这样做了（这很容易！）。我还使用 Liquibase 来管理数据库（我已经开始使用本地 H2 数据库进行预原型设计），并且我已经能够按预期构建所有内容。

作为检查 liquibase 是否创建表的一部分，我在 NetBeans 中启动了 MySQL 数据库。而且，它确实运作良好。但我也可以看到其他模式以及我刚刚创建的模式。他们都被无辜地命名为（test，test_6hob）。但是，我可以看到表格并查看它们的数据。

我的问题是关于 CloudBees 数据库中数据的可见性。连接到同一台机器的其他人是否可以查看为免费帐户创建的数据库？如果我使用付费帐户，这会改变吗？还是更多的是数据库创建方式的本质？我可以看到其他模式（及其数据），但我不知道其他人是否可以看到我的？我需要确保设置权限方面吗？我对 MySQL 的内部运作相当无知。

虽然这是一个原型，但如果我开始将 CloudBees 用于生产应用程序，我不希望碰巧连接到与我的应用程序相同的数据库的任何人都可以看到这些数据。我完全有可能在这个新的云世界中遗漏了一些东西。:)

感谢您提供任何信息

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T11:50:35.030

所有 CloudBees MySQL 数据库都是单独保护的（尽管将在共享实例中，除非您有专用服务器） -**默认情况下**，任何其他帐户都**无法**读取它们。

 **但是，如果您真的愿意，数据库所有者可以从同一数据库服务器上的其他帐户授予用户访问权限 - 即使这样做没有什么意义（并且您的特殊用户配置将在故障转移期间丢失）。

所以这就是你可以看到的测试数据库发生的事情——数据库所有者已经在这些数据库/表上打开了安全性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T04:18:19.823

这个问题可能是题外话，但无论如何我都会咬一口。数据库数据对您的帐户是私有的。实际的硬件/虚拟机可能是共享的，但数据/数据库不是。**

# c# - 在 SqlCommand 中调用函数

> ID：15048398
> 
> 赞同：5
> 
> 时间：2013-02-24T03:41:49.107
> 
> 标签：c#, asp.net, sql, sql-server, tsql

```
public void CreateMySqlCommand() 
 {
    SqlCommand myCommand = new SqlCommand();
    myCommand.CommandText = "SELECT * FROM Categories ORDER BY CategoryID";
    myCommand.CommandTimeout = 15;
    myCommand.CommandType = CommandType.Text;
 } 
```

我可以在 myCommand.CommandText 中使用 Sql Server 函数吗？为什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-24T04:00:53.003

如果您的意思是[SQL Server 用户定义函数](http://msdn.microsoft.com/en-us/library/ms186755%28v=sql.100%29.aspx)。那么，**是**的；您可以正常使用它，例如：

```
myCommand.CommandText = "SELECT fn_Yourfunctionname(@parameternames)";
myCommand.CommandType = CommandType.Text;
myCommand.Parameters.Add(new SqlParameter("@parameternames", ... 
```

它起作用的原因是因为这是在 SQL Server 中直接调用函数的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-29T20:17:10.263

另一种方法：

```
 public T ExecuteScalarFunction<T>(string functionName, List<SqlParameter> parameters, SqlDbType returnSqlType) where T : new()
    {
        using (var conn = new SqlConnection(CTX.Database.GetDbConnection().ConnectionString))
        {
            if (conn.State != ConnectionState.Open)
                conn.Open();

            using (var cmd = new SqlCommand(functionName, conn)) { 
                cmd.CommandType = CommandType.StoredProcedure;
                SqlCommandBuilder.DeriveParameters(cmd);

                foreach (var parameter in parameters)
                {
                    cmd.Parameters.Add(parameter);
                }

                cmd.Parameters.Add("@RETURN_VALUE", returnSqlType).Direction = ParameterDirection.ReturnValue;

                cmd.ExecuteNonQuery();
                return (T)cmd.Parameters["@RETURN_VALUE"].Value;
            }
        }
    } 
```

# css - Convert -WebKit-Filter hue into RGB

> ID：15048400
> 
> 赞同：0
> 
> 时间：2013-02-24T03:41:52.927
> 
> 标签：css, webkit, imagefilter

The `-webkit-filter` in CSS3 allows you to apply a hue filter by passing a degree value between 0-360

example:

```
-webkit-filter: hue-rotate(80deg); 
```

How would you convert the degree value into an RGB value?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-14T16:53:16.817

CSS 过滤器 hue-rotate 不是真正的色调旋转，它是 RGB 空间的近似值，对于饱和颜色不是很准确。如果你想复制它正在做的事情，你需要使用相同的算法——这不是标准的 HSL/RGB 转换。其底层算法在[SVG 1.1 过滤器规范中用于 feColorMatrix](http://www.w3.org/TR/SVG/filters.html#feColorMatrixElement)

对于 type="hueRotate"，'values' 是单个实数值（度）。hueRotate 操作等价于以下矩阵操作：

```
| R' |     | a00  a01  a02  0  0 |   | R |
| G' |     | a10  a11  a12  0  0 |   | G |
| B' |  =  | a20  a21  a22  0  0 | * | B |   
| A' |     | 0    0    0    1  0 |   | A |
| 1  |     | 0    0    0    0  1 |   | 1 |

where the terms a00, a01, etc. are calculated as follows:

| a00 a01 a02 |    [+0.213 +0.715 +0.072]
| a10 a11 a12 | =  [+0.213 +0.715 +0.072] + 
| a20 a21 a22 |    [+0.213 +0.715 +0.072]

                        [+0.787 -0.715 -0.072]
cos(hueRotate value) *  [-0.213 +0.285 -0.072] +
                        [-0.213 -0.715 +0.928]

                        [-0.213 -0.715+0.928]
sin(hueRotate value) *  [+0.143 +0.140-0.283]
                        [-0.787 +0.715+0.072] 
```

# java - 将概率分配给随机枚举对象

> ID：15048404
> 
> 赞同：1
> 
> 时间：2013-02-24T03:42:31.467
> 
> 标签：java, string, random, enums, arraylist

所以我在这里有一个枚举：

```
public enum Party {

    DEMOCRAT, INDEPENDENT, REPUBLICAN
} 
```

我目前有这个，三个课程之一：

```
public class ElectoralCollege {
    public static final String FILE = "Electoral201X.txt";
    private ArrayList <State> stateVotes;
    Random rand = new Random();

    public ElectoralCollege() throws IOException    {

        stateVotes = new ArrayList<State>();
        assignStates();
    }

    public void assignStates() throws IOException   {

        File f = new File(FILE);
        Scanner fReader = new Scanner(f);

        while(fReader.hasNext())    {

            String stateData = fReader.nextLine();
            int stateEnd = stateData.indexOf(" - ");
            String stateName = stateData.substring(0, stateEnd);
            String stateVotes = stateData.substring(stateEnd + 2);
            //System.out.println(stateName + " " + stateVotes);

        } 
```

在这里，我从一个包含州名称及其选举人票数量的文件中读取如下“佛罗里达 - 29”，所以这一切都弄清楚了。

接下来我要做的是使用一个随机对象从我的 Party 枚举中为他们分配一个派对。共和党和民主党必须有 2/5 的获胜机会......而独立必须有 1/5 的机会。然后我必须创建一个 State 对象（它以状态名称、投票数和参与方作为参数）并将其放入该数组列表中。很可能会为此使用 for each 循环，只需要对此进行更多研究。

我的问题是我如何以设定的概率为这三个方使用这个随机对象 rand 并执行它？有人有什么想法吗？

编辑：底线是：我如何为这三个政党实施 2/5 和 1/5 的概率，然后根据这些概率调用随机对象给我一个政党？

在mre的回答之后，我这样做了：

```
Random rand = new Random();
    List<Party> parties = Arrays.asList(Party.DEMOCRAT, Party.DEMOCRAT, Party.REPUBLICAN, Party.REPUBLICAN, Party.INDEPENDENT); 
```

稍后......

公共 void assignStates() 抛出 IOException {

```
File f = new File(FILE);
Scanner fReader = new Scanner(f);

while(fReader.hasNext())    {

    String stateData = fReader.nextLine();
    int stateEnd = stateData.indexOf(" - ");
    String stateName = stateData.substring(0, stateEnd);
    String numVote = stateData.substring(stateEnd + 2);

    Party winner = parties.get(rand.nextInt(5));
    //System.out.println(stateName + " " + numVote + " " + winner);

    State voteInfo = new State(stateName, Integer.parseInt(numVote.trim()), winner);
    stateVotes.add(voteInfo);

} 
```

}

已回答的新问题：[使用 foreach 循环从数组列表中添加值，然后使用访问器打印它们](https://stackoverflow.com/questions/15048973/using-a-foreach-loop-to-add-values-from-an-arraylist-and-then-print-them-using/15049027#comment21155196_15049027)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T04:03:54.123

有5个`Party`实例的集合，其中2个是`DEMOCRAT`，2个是`REPUBLICAN`，1个是一个`INDEPENDENT`，然后使用随机数生成器生成一个随机索引（即0-4）用于访问例如，

```
import java.util.Arrays;
import java.util.List;
import java.util.Random;

public class Demo 
{
    public static void main(String[] args) 
    {
       Random r = new Random();
       List<Party> parties = Arrays.asList(Party.DEMOCRAT, Party.DEMOCRAT, Party.REPUBLICAN, Party.REPUBLICAN, Party.INDEPENDENT);

       System.out.println(parties.get(r.nextInt(parties.size())));
    }

    enum Party
    {
        DEMOCRAT,
        REPUBLICAN,
        INDEPENDENT;
    }
} 
```

# powershell - 将select的结果转换为数组

> ID：15048405
> 
> 赞同：5
> 
> 时间：2013-02-24T03:42:55.357
> 
> 标签：powershell

我有以下代码。

```
$l = @("A", "B", "X", "Y")
echo "A,B,X`n1,2,3,4" > .\myFile # Create test file

$f = cat myFile | ConvertFrom-Csv | gm -MemberType NoteProperty | select Name
compare $l $f

$a = .... # convert $f to array
compare $l $a 
```

如何将`$f`数组转换为可以与数组进行比较？支撑`@(...)`不起作用。

`$l`比较和时得到以下结果`$f`。

```
PS C:\Users\nick> compare $l $f

InputObject                                                 SideIndicator
-----------                                                 -------------
@{Name=A}                                                   =>
@{Name=B}                                                   =>
@{Name=X}                                                   =>
A                                                           <=
B                                                           <=
X                                                           <=
Y                                                           <= 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-24T12:29:39.227

替换`select Name`为`select -Expand Name`或`ForEach-Object { $_.Name }`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T03:00:31.270

另一种方法，如果您希望从单个属性中获取数组，则可以使用“ExpandProperty”开关，`Select`如下所示：

```
$f = cat myFile | ConvertFrom-Csv | gm -MemberType NoteProperty | Select -ExpandProperty Name 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T09:21:46.883

您可以将两个对象都转换为 ArrayLists，然后进行比较。

```
[System.Collections.ArrayList]$array1 = $l
[System.Collections.ArrayList]$array2 = $f 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-24T12:04:13.327

试试这个：

```
$a = New-Object System.Collections.ArrayList;
$f | % { $null = $a.Add($_.Name); }
compare $l $a; 
```

# c# - 当我尝试将 JArray 转换为线程中的对象时出现 System.TypeLoadException

> ID：15048409
> 
> 赞同：1
> 
> 时间：2013-02-24T03:43:25.733
> 
> 标签：c#, ios, multithreading, xamarin.ios, json.net

我有一个 C# 代码将 JArray 对象**jsonArray** (JSON.Net) 转换为对象列表**jsonList** (List< MyClass >)：

```
List<MyClass> jsonList = jsonArray.ToObject<List<MyClass>> (); 
```

当我在主线程上运行上面的代码时，它可以正常工作，但是如果我将相同的代码放在不同的线程中，如下所示：

```
Thread t = new Thread(delegate() {
    List<MyClass> jsonList = jsonArray.ToObject<List<MyClass>> ();
});
t.Start(); 
```

我收到以下错误消息：“System.TypeLoadException has been throwed. A type load exception has occurred”。

有人知道为什么会这样吗？完整的堆栈跟踪如下。提前致谢！

> System.TypeLoadException：发生类型加载异常。在 Newtonsoft.Json.Utilities.ThreadSafeStore `2[System.Type,System.Type].AddValue (System.Type key) [0x00000] in <filename unknown>:0 at Newtonsoft.Json.Utilities.ThreadSafeStore`2[System.Type,System.Type].Get (System.Type key) [0x00000] in :0 在 Newtonsoft.Json.Serialization.JsonTypeReflector.GetAssociatedMetadataType (System.Type 类型) [0x00000 ] 在：0 在 Newtonsoft.Json.Serialization.JsonTypeReflector.GetAttribute[JsonContainerAttribute]（System.Type 类型）[0x00000] 在：0 在 Newtonsoft.Json.Serialization.JsonTypeReflector.GetAttribute[JsonContainerAttribute]（ICustomAttributeProvider attributeProvider）[0x00000] 在:0 在 Newtonsoft.Json.Utilities.ThreadSafeStore`2[System.Reflection.ICustomAttributeProvider,Newtonsoft.Json.JsonContainerAttribute].AddValue (ICustomAttributeProvider key) [0x00000] in <filename unknown>:0 at Newtonsoft.Json.Utilities.ThreadSafeStore`2[System.Reflection.ICustomAttributeProvider,Newtonsoft.Json.JsonContainerAttribute].Get (ICustomAttributeProvider key) [0x00000] in :0 at Newtonsoft.Json.Serialization.CachedAttributeGetter `1[Newtonsoft.Json.JsonContainerAttribute].GetAttribute (ICustomAttributeProvider type) [0x00000] in <filename unknown>:0 at Newtonsoft.Json.Serialization.JsonTypeReflector.GetJsonContainerAttribute (System.Type type) [0x00000] in <filename unknown>:0 at Newtonsoft.Json.Serialization.JsonTypeReflector.GetJsonObjectAttribute (System.Type type) [0x00000] in <filename unknown>:0 at Newtonsoft.Json.Serialization.DefaultContractResolver.CreateContract (System.Type objectType) [0x00000] in <filename unknown>:0 at Newtonsoft.Json.Serialization.DefaultContractResolver.ResolveContract (System.Type type) [0x00000] in <filename unknown>:0 at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.GetContractSafe (System.Type type) [0x00000] in <filename unknown>:0 at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.Deserialize (Newtonsoft.Json.JsonReader reader, System.Type objectType, Boolean checkAdditionalContent) [0x00000] in <filename unknown>:0 at Newtonsoft.Json.JsonSerializer.DeserializeInternal (Newtonsoft.Json.JsonReader reader, System.Type objectType) [0x00000] in <filename unknown>:0 at Newtonsoft.Json.JsonSerializer.Deserialize (Newtonsoft.Json.JsonReader reader, System.Type objectType) [0x00000] in <filename unknown>:0 at Newtonsoft.Json.Linq.JToken.ToObject (System.Type objectType, Newtonsoft.Json.JsonSerializer jsonSerializer) [0x00000] in <filename unknown>:0 at Newtonsoft.Json.Linq.JToken.ToObject (System.Type objectType, Boolean isNullable) [0x00000] in <filename unknown>:0 at Newtonsoft.Json.Linq.JToken.ToObject (System.Type objectType) [0x00000] in <filename unknown>:0 at Newtonsoft.Json.Linq.JToken.ToObject[List`1] () [0x00000] in :0 at GuiaTV.AgoraController.GetJSON () [0x00015] 在 /Users/vegidio/Documents/Dev/Xamarin/GuiaTV/GuiaTV/Controllers/AgoraController.cs:24 在 GuiaTV.AgoraScreen.m__2 () [0x0000d] 在 /Users/vegidio/Documents/Dev/Xamarin /GuiaTV/GuiaTV/Views/AgoraScreen.cs:43 在 /Developer/MonoTouch/Source/mono/mcs/class/corlib/System.Threading/Thread.cs:697 中的 System.Threading.Thread.StartInternal () [0x0001d]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T03:51:55.407

看来您正在为此开发一个基于触摸的应用程序，您需要最新版本的 NewtonSoft for Mono Touch。从[这里](https://github.com/ayoung/Newtonsoft.Json)获取。

如果您正在为现代 UI 构建它，那么很容易遵循 Win 8 模板或使用任务来启动线程。

尝试放入 Try,Catch,Finally 块以获取异常详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T03:49:40.160

如果你设置断点

```
List<MyClass> jsonList = jsonArray.ToObject<List<MyClass>> (); 
```

并悬停该断点以查看内部异常，它说明了什么？

我问的原因是因为 TypeLoad 异常要么抛出 null 要么给你一个关于内部异常的消息，它可以帮助你比这个堆栈跟踪多一点。

# python - 自我节点上的python链表评估

> ID：15048410
> 
> 赞同：1
> 
> 时间：2013-02-24T03:43:41.720
> 
> 标签：python, linked-list

我建立了两个链表，但第二个函数丢失了链接。我可以看到我对自己没有任何东西，但它怎么会失去来自其父级的链接。因为 None 是一个独立的内存地址？

```
class Node:
    def __init__(self,data):
        self.next=None
        self.data=data

    def buildLink1(self):
        temp=1
        while temp<10:
            self.next=Node(temp)
            self=self.next
            temp+=1

    def buildLink2(self):
        temp=1
        while temp<10:
            self=self.next
            self=Node(temp)
            temp+=1

    def traverse(self):
        while self:
            print self.data
            self=self.next

if __name__=='__main__':
    print "link 1:"
    root1=Node(10)
    root1.buildLink1()
    root1.traverse()
    print "link 2:"
    root2=Node(10)
    root2.buildLink2()
    root2.traverse() 
```

输出：链接1：10 1 2 3 4 5 6 7 8 9 链接2：10

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T03:52:09.157

问题在这样的部分。

```
def buildLink2(self):
    temp=1
    while temp<10:
        self=self.next
        self=Node(temp)
        temp+=1 
```

`self`是对当前对象的引用，但它并不特殊（按照惯例），并且当您分配给它时，python 使其成为局部变量。

所以这里发生的事情是，您是否设置`self`为对曾经`self.next`引用的内容的引用（在这种情况下是`None`），然后您设置`self`为指向一个新`Node`对象。下一次循环时，你`self`在`None`做任何事情之前再次指向。

我认为您真的不希望这些函数成为实例方法，而是成为类方法或独立方法。例如：

```
def build_link(first_node):

    cur_node = first_node
    for tmp in range(10):
        cur_node.next = Node(tmp)
        cur_node = cur_node.next 
```

# xml - XSLT：从一个上下文移动到 for-each 中的其他上下文节点

> ID：15048411
> 
> 赞同：2
> 
> 时间：2013-02-24T03:43:43.407
> 
> 标签：xml, xslt, xslt-1.0, xslt-2.0

我正在编写一个 XSL 转换，我无法移动到根目录并访问每个内部的其他节点。

假设我在一个上下文中。我有一种情况，我必须去外部节点从那里获取一个值并返回到相同的上下文。

这是我的 XML 文件。

```
 <xml version=1.0>

    <abc>
     <parts>
            <part pno="10506">
              <pname>Land Before Time I</pname>
              <qoh>200</qoh>
              <price>19.99</price>
              <level>20</level>
            </part>
            …
      </parts>
       <orders>
            <order ono="1022" takenBy="1001" customer="2222">
              <receivedDate>1995-02-13</receivedDate>
              <shippedDate>1995-02-20</shippedDate>
              <items>
                <item>
                  <partNumber>10601</partNumber>
                  <quantity>1</quantity>
                </item>
                <item>
                  <partNumber>10701</partNumber>
                  <quantity>1</quantity>
                </item>
              </items>
         </order>

     .....
     </orders>
    </abc> 
```

我在 xsl:for-each 中的“item”标签内进行迭代，但我想进入“part”标签并获取一个值并返回到相同的上下文。

更详细地说：我正在填一张桌子。我的表有 4 列：

*   partname：我必须`<part>`去取名字。（这是我卡住的地方）
*   数量：对我来说这不是问题，因为它是 的子元素`<item>`。
*   价格：我面临同样的问题。
*   总：这很容易。

请帮助我从零件标签中获取零件名称和价格的值。

以下代码对我不起作用。

```
 <?xml version="1.0" encoding="UTF-8"?>

    <xsl:stylesheet>

        <table>
             <xsl:param name="param1" />

             <xsl:variable name="temp" select ="name(/*)"/>
               <xsl:for-each select=".//order[@ono=$param1]/items/item">
                     <tr>
          <td> <xsl:value-of select="$temp//part[@pno=partNumber]/pname"/>  </td>
          <td> <xsl:value-of select="quantity"/> </td>                                                       
          <td> <xsl:value-of select="$temp//part[@pno=partNumber]/price"/>  </td>
          <td> <xsl:value-of select="quantity*$temp//part[@pno=partNumber]/price"/>  </td>
                </tr>
            </xsl:for-each>
           </table>      

    <xsl:stylesheet> 
```

我尝试使用谷歌搜索，但无法为我的问题找到确切的解决方案。我写的代码抛出了一些错误。我尝试将“temp”的选择值更改为 root(.)，但它不起作用。

我只需要一个提示。我不需要答案。对我来说，一个提示就足够了。

在过去的 5 个小时里，我陷入了这个问题。请回复并帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T05:36:35.277

当您想从谓词内部引用与当前上下文相关的内容时，可以使用`current()`：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes"/>
  <xsl:param name="param1" select="1022" />

  <xsl:template match="/">
    <table>
      <xsl:for-each select="//order[@ono=$param1]/items/item">
        <tr>
          <td>
            <xsl:value-of select="//part[@pno=current()/partNumber]/pname"/>
          </td>
          <td>
            <xsl:value-of select="quantity"/>
          </td>
          <td>
            <xsl:value-of select="//part[@pno=current()/partNumber]/price"/>
          </td>
          <td>
            <xsl:value-of select="quantity * //part[@pno=current()/partNumber]/price"/>
          </td>
        </tr>
      </xsl:for-each>
    </table>
  </xsl:template>
</xsl:stylesheet> 
```

然而，这里更有效的方法是使用密钥。我还对 XSLT 进行了一些清理，以更好地利用模板并避免路径中的重复：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes"/>
  <xsl:key name="kPart" match="part" use="@pno" />

  <xsl:param name="param1" select="1022" />

  <xsl:template match="/">
    <table>
      <xsl:apply-templates select="//order[@ono=$param1]/items/item" />
    </table>
  </xsl:template>

  <xsl:template match="item">
    <xsl:variable name="part" select="key('kPart', partNumber)" />
    <tr>
      <td>
        <xsl:value-of select="$part/pname"/>
      </td>
      <td>
        <xsl:value-of select="quantity"/>
      </td>
      <td>
        <xsl:value-of select="$part/price"/>
      </td>
      <td>
        <xsl:value-of select="quantity * $part/price"/>
      </td>
    </tr>
  </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T04:20:50.577

根不是`.`。根是`/`。如果您想要元素名称为“part”的根的任何后代，请使用`//part`.

如果将`<xsl:template match="/">`before`<table>`和`</xsl:template>`after放在一起`</table>`，那么当 XML 解析器解析文档根时，XSL 处理器将生成您的表格元素。

您的`xsl:stylesheet`开放标签需要几个属性。它应该`<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">`适用于 XSLT 1.0。

我认为这一点信息可能足以让你让它发挥作用。

如果你需要提高效率，你应该避免`//`使用an`xsl:key`来代替。[`xsl:key`您可以在 XSL 转换规范](http://www.w3.org/TR/xslt#key)中找到 的定义、基础知识和简单示例。

# c - 使用随机生成的数字播种数组并排序

> ID：15048420
> 
> 赞同：0
> 
> 时间：2013-02-24T03:45:19.520
> 
> 标签：c

我试图通过创建大小相等的数组（由用户的输入确定）并用随机数填充它们来练习我的 C。我遇到了一些问题。首先，我创建和分配数组：

```
 srandom((int)time(NULL)); /* initialize random seed for later use*/

    unsigned long arraySize = strtoul(argv[1], NULL, 0); 

    int *originalArray = malloc(arraySize * sizeof(int));
    int *ascendingOrderArray = malloc(arraySize * sizeof(int));
    int *descendingOrderArray = malloc(arraySize * sizeof(int)); 
```

接下来，我用随机数填充数组的循环：

```
 int i = 0;
    int randInt;
    /* Seed each array with identical randomly generated numbers */
    while(i++ < arraySize){
        randInt = (int)random()%100;
        *originalArray++ = randInt;
        printf("original array assign: %d\n", originalArray);
        *ascendingOrderArray++ = originalArray;
        printf("ascending array assign: %d\n", ascendingOrderArray);
        *descendingOrderArray++ = originalArray;
        printf("descending array assign: %d\n", descendingOrderArray);

    } 
```

在这里，事情变得很奇怪。我希望每个数组的编号与为每个索引分配给 originalArray 的编号相同。然而，我从`printf`声明中得到的输出并没有反映这一点。此外，这些数字很大，但它们都有一个相似的基数，从 2 开始并扩展到许多数字。这应该发生吗？

最后，当我完成所有操作并进行一些无关紧要的打印和格式化时，我尝试释放我的数组：

```
free(originalArray);
originalArray = NULL;
free(ascendingOrderArray);
ascendingOrderArray = NULL;
free(descendingOrderArray);
descendingOrderArray = NULL;
return 0; 
```

但我遇到了一个`pointer being freed was not allocated`错误。

我确定我在这里搞砸了多个级别，但问题是：在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T04:03:40.373

您对所有 3 个数组都有相同的基本问题，但我们只看一个。在这里你分配它：

`int *originalArray = malloc(arraySize * sizeof(int));`

所以变量`originalArray`指向分配的内存块。然后你开始使用它来分配给数组：

`*originalArray++ = randInt;`

这是不好的。您刚刚增加了`originalArray`，现在没有指向内存块开头的指针。你应该做的是

`originalArray[i] = randInt;` `printf("original array assign: %d\n", originalArray[i]);`

这样，您就可以使用索引`i`来说明数字应该在数组中的位置，并且`originalArray`它本身仍然是指向已分配内存块的指针，即数组的开头。

由于`originalArray`这一切都没有改变，当你

`free(originalArray);`

then`originalArray`仍然是从 返回的值`malloc`，这是`free`想要返回的值。

摘要：您应该始终释放 malloc 返回的确切指针，并且永远不应该丢弃/更改该指针的值。

# iphone - 向现有应用推送通知更新：是否会要求用户允许？

> ID：15048421
> 
> 赞同：0
> 
> 时间：2013-02-24T03:45:28.467
> 
> 标签：iphone, ios, push-notification, push, apple-push-notifications

我有一个没有推送通知功能的现有应用程序。现在我必须使用推送通知功能更新应用程序。我的问题是

1.  更新应用后是否会询问用户是否启用推送通知？如果不是，默认值是什么？

2.  该应用程序会包含在设置的通知部分吗？

3.  如何让用户通过应用程序控制多次启用/禁用推送通知？

如果上述任何问题已经得到解答，我很抱歉，我尝试过搜索，但遇到了令人困惑和对比鲜明的解决方案。

提前谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T03:53:06.763

它的工作原理很像定位服务（如果你有这方面的经验）。由于这是一项新功能，因此当您的应用在更新后首次启动时，系统会要求用户允许推送通知。

如果设置正确，通知设置中会有一个条目。用户将能够根据需要删除或添加它。

我不确定你的意思是什么：

> 3) 如何让用户通过应用程序控制多次启用/禁用推送通知？

如果您的 Web 服务设置为存储此类信息，则有一些方法可以自定义用户收到的通知。

# c# - 双精度？

> ID：15048423
> 
> 赞同：1
> 
> 时间：2013-02-24T03:45:52.680
> 
> 标签：c#, for-loop, double, precision

我有一种情况，我将一个数字发送给一个方法，它将该数字分成 6 并返回一个列表，其中数字 6 除以 n 个项目。我正在从 dictionary.count 中提取除数，并将返回列表与我从中提取的字典结合起来。返回列表，由于某种原因，它并不总是返回正确数量的项目。它在 12 岁之前运行良好。但是如果不可靠的话，它是可以预测的。以下数字返回一个比所需索引少 1 个索引的列表...13、15、18、23、25、20、27、28、30 ......下面的代码是从一个更大的项目中提取的。

```
public void DivTest()
{
    double value;
    Double.TryParse(textBox1.Text, out value);

    double div = 6 / value;
    int count = 1;

    StringBuilder sb = new StringBuilder();

    for (double d = div; d <= 6; d += div)
    {
        sb.Append(count.ToString()).Append("  :  ")
            .Append(d.ToString("0.0000")).Append("  :  ")                                                                                                                             
            .Append(div.ToString("0.0000")).AppendLine();

        count++;
    }

    label1.Text = sb.ToString();
} 
```

如果您将此代码添加到具有默认命名的文本框、标签和按钮的表单中，它也可能无法正常工作。最后一行应该总是 6，但它是我提到的数字。我认为这是一个舍入问题，但在此示例中我没有使用舍入。有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T03:57:23.850

这是一个舍入问题，或者更确切地说是数字精度有限的问题。

进行除法时会发生舍入。结果无法准确表示，受精度限制。

将结果四舍五入后，将它们相加时会得到一个稍大的数字，例如 6.000000000000001 而不是 6。由于它大于 6，因此不会进入循环中的最后一次迭代。

您可以通过对循环使用整数变量来解决此问题，只需从 1 循环到`value`.

# python - Pyglet 的 ZIPLocation

> ID：15048425
> 
> 赞同：0
> 
> 时间：2013-02-24T03:46:15.600
> 
> 标签：python, pyglet

我发现 Pyglet 具有可以加载 zip 文件的类：http: [//www.pyglet.org/doc/api/pyglet.resource.ZIPLocation-class.html](http://www.pyglet.org/doc/api/pyglet.resource.ZIPLocation-class.html)

我是如何使用它的：

```
myzip = zipfile.ZipFile('testzip.zip')
myzip = pyglet.resource.ZIPLocation(myzip, '')
myzip = myzip.open('test.png', mode='rb') 
```

但它返回的是`<StringIO.StringIO instance at 0x41ec670>`，所以我不能以我使用 pyglet.resource.image 的方式使用。我实际上将该文件作为纯文本获取。有什么方法可以转换吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T05:17:13.140

好吧，我想它仍然没有实现。该类唯一要做的就是在 StringIO 中返回文件的数据。使用纯 zipfile 做到这一点更加容易。我就是这样做的：

```
# That class is necessary, it's explained why in Loader's class comments
class Cleaner(dict):
   pass

class Loader:
    def __init__(self):
        self.sprite = pyglet.resource.image(self.unzip('test.png'))
        self.sprite = pyglet.resource.image(self.unzip('test2.png'))
    def unzip(self, file):
        zip = zipfile.ZipFile('test.zip')
        file = open('.buffer', 'wb')
        # without 'b' it wont work on windows
        file.write(zip.read(file))
        file.close()
        '''now the tricky part: pyglet save every file with weakref to
           dont load save thing more than once, it wouldnt let to load
           files from buffer so we need to block it somehow after each
           file reading i do that with empty dict class (dont need to import weakref)'''
        pyglet.resource._default_loader._cached_images = Cleaner()
        return 'data/.buffer' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-06T07:11:46.643

我也试图弄清楚如何从 ZIP 加载文件。

显然，ZIPLocation 主要用于 Pyglet 以查找您使用它打开的 ZIP 的方式。您可以通过将 ZIP 文件添加到路径来打开它们：

```
pyglet.resource.path.append("./spam.zip")
pyglet.resource.reindex()
data = pyglet.resource.file("spam.txt").read()#Imagine spam.txt is inside the zip. 
```

# java - 谁能看到我程序中的无限循环在哪里？

> ID：15048427
> 
> 赞同：0
> 
> 时间：2013-02-24T03:46:33.383
> 
> 标签：java, infinite-loop

这个程序的目的是找到能被所有整数 1 到 20 整除的最小数。我知道它可以变得更高效，但我现在对优化它不感兴趣。当我执行程序时，它似乎永远挂起，这让我相信某处存在无限循环。不过我好像找不到。我不确定是代码的哪一部分导致了问题，并且相对简洁，所以我将其全部发布在这里。

```
public class Problem5{
  public static void main(String[]args){

    boolean notFound = true;
    while(notFound){
      int n = 20;
      if(testDivide(n)){
        System.out.println(n);
        notFound = false;
      }
      else
        n++;
    }
  }

  private static boolean testDivide(int target){
    for(int i = 20; i > 0; i--){
      if(target % i != 0)
        return false;
    }
    return true;
  }
} 
```

如果有人可以帮助我解决这个问题，我将不胜感激。

附加信息：该程序也从不输出任何数字，这让我相信这`if(testDivide(n))`永远不会评估为真。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T03:55:15.220

```
boolean notFound = true;
while(notFound){
    int n = 20; 
```

应该

```
boolean notFound = true;
int n = 20;
while(notFound) { 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-24T03:55:40.210

您正在将`n`while 循环内的值初始化为`20`，因为`n`对于 testDivide(20) 始终为 20，因为`20 % 19 != 0`返回时将始终返回 false `false`。因此`int n = 20`从您的 while 循环中删除。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T03:58:35.420

您的 for 循环确保您返回 false，然后您的 while 循环始终将 i 设置为 20，这是您的无限循环。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-24T04:01:25.570

查看`while`循环：

```
while(notFound){
      int n = 20;
      if(testDivide(n)){
        System.out.println(n);
        notFound = false;
      }
      else
        n++;
    } 
```

第`while`一次执行循环时， 的值`n`设置为`20`。
测试除法返回假。
的值`n`递减为`19`。
循环再次执行
的值`n`被重新初始化为`20`。
这是循环`n`外初始化的问题。`while`

# javascript - 如何使用 CSS 或 Javascript 在鼠标悬停时尽可能简单轻量地切换图像？

> ID：15048431
> 
> 赞同：0
> 
> 时间：2013-02-24T03:47:31.153
> 
> 标签：javascript, css, mouseover

我试图在鼠标悬停时将一个图像更改为另一个图像。具体来说，当访问者将鼠标悬停在此上方时：

![在此处输入图像描述](../Images/9f66f2032db040f17b332029faa49fd0.png)

图像将变为：

![在此处输入图像描述](../Images/2e6bdff1158ec03111868d5c37fdf5d5.png)

**当前代码**

我想尽可能轻量级地做到这一点。但是图像背景 CSS 对我不起作用。我的代码如下：

```
<div id="featured-box-right"><a href="/videos/"  
target="_self"><img src="../images/box-featured-home-right.png" title="videos" 
alt="videos" width="300" height="150"></a></div> 
```

但是当我对 CSS 执行此操作时：

```
#featured-box-right a:hover
{
background-image: url(../images/box-featured-home-right-hover.png); 
} 
```

效果不对；这不是背景。这是一个真实的图像。任何关于我如何尽可能轻量级地实现这一目标的指导将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T03:56:22.690

轻量级的方法是使用CSS，并使用`background-image`div的属性：

[**jsFiddle**](http://jsfiddle.net/promatik/pRrhF/)

```
<div id="featured-box-right"></div> 
```

CSS：

```
#featured-box-right {
    width: 300px;
    height: 150px;
    background-image: url('http://i.stack.imgur.com/OywDf.png'); 
}

#featured-box-right:hover {
    background-image: url('http://i.stack.imgur.com/aRJOk.png'); 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T03:54:58.567

您应该使用 css 图像精灵技术，并且不要在此处使用 img 标签使用 css 背景属性。你应该试试下面的东西。您可以使用完全取决于您的类或身份或父子关系。

```
<div id="featured-box-right">
 <a href="/videos/" target="_self" id="img1"></a>
</div> 
```

**CSS：**

```
#img1
{
    background: url(../images/box-featured-home-right.png); 
}

#img1:hover
{
  background: url(../images/box-featured-home-right-hover.png); 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T03:56:02.063

完全删除`<img/>`标签并尝试这个 css。

```
#featured-box-right a {
  background-image: url(../images/box-featured-home-right.png); 
}
#featured-box-right a:hover {
  background-image: url(../images/box-featured-home-right-hover.png); 
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-24T03:56:28.510

***`CSS Sprites`是一种技术，您可以使用 a `background-image`，设置宽度和高度，并调整背景位置以仅显示您需要显示的部分。通过这种方式，您可以使用单个图像并使用它显示许多不同的图形，从而节省`server requests`和加快`page load`时间***：

HTML：

```
<img src="images/arrow-sprite.png" alt="arrow" class="clip pos-1" /> 
```

CSS：

```
.clip               { position: absolute; top: 0; left: 0; }

.pos-1              { clip:rect(0 48px 48px 0); }
.pos-2              { clip:rect(0 96px 48px 48px); left: -48px; }
.pos-3              { clip:rect(48px 48px 96px 0); top: -48px; }
.pos-4              { clip:rect(48px 96px 96px 48px); top: -48px; 
                      left: -48px; } 
```

从[这里取](http://css-tricks.com/css-sprites-with-inline-images/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-24T04:01:41.270

您可以删除`<img>`标签并使用CSS背景iamge方法，但您需要将2张图片合二为一（一张在顶部，一张在底部）

接下来，您需要使用以下代码：

```
#featured-box-right {
    width: 300px;
    height: 150px;
    background-image: url(image url here) center top; 
}

#featured-box-right:hover {
    background-image: url(image url here) center bottom; 
} 
```

使用此方法只需 1 张图片

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-24T04:58:41.077

不需要图像（背景或其他）。

结果只有两个图像组合的大小的 3.84%： http:
[//fiddle.jshell.net/gWytK/show/](http://fiddle.jshell.net/gWytK/show/)：

```
<!doctype html>
<html>
	<头部>
		<标题></标题>
		<风格>
身体 {
	边距：8px；
}
#链接{
	列表样式：无；
	边距：0；
	填充：0；
	显示：块！重要；
	显示：内联块；
	溢出：隐藏；
}
#链接李{
	向左飘浮;
	宽度：300px；
	高度：150px；
	溢出：隐藏；
	背景：#000000；
	边框半径：20px；
}
#链接一个{
	显示：块；
	字体：粗体 30px/30px 'comic sans ms', sans-serif;
	填充：40px 66px 100px；
	颜色：#5496ff；
	文字装饰：无；
	文本转换：大写；
	文字阴影：0 0 100px #ffffff，0 0 100px #ffffff；
}
#链接一个：在{之后
	内容：'>>'；
}
#links a：悬停，
#链接一个：焦点{
	颜色：#1b1b1b；
	背景：#5496ff；
	文字阴影：无；
}
		</style>
	</head>
	<正文>
		<ul id="链接">
			<li>
				<a href="videos/">我们的视频收藏</a>
			</li>
		</ul>
	</正文>
</html>
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-24T03:55:06.370

CSS 中没有`image`属性。为了获得所需的效果，您应该将其替换为并从您的 HTML 代码中`background-image`删除该标记。`img`

```
#featured-box-right
{
  background-image: url(../images/box-featured-home-right.png); 
}

#featured-box-right:hover
{
  background-image: url(../images/box-featured-home-right-hover.png); 
} 
```

# c++ - C ++随机数游戏来自集合，rand正在选择一个不在集合中的数字

> ID：15048434
> 
> 赞同：1
> 
> 时间：2013-02-24T03:48:08.520
> 
> 标签：c++, random

由于某种原因，即使我没有将它分配给数组中的一组数字，也会输出“0”。我怎样才能摆脱零？

```
#include <iostream>
#include <time.h>
#include <string>

using namespace std;

int n;
int size=10;
int setNums[10];

int main()
{
    string ans = "";
    do  {
        for (int n=0; n<size;n++ )
        {
            setNums[size] = n+1;\
          cout << setNums[size] << endl;
        }
     srand (time(NULL));
     int choice = rand() % setNums[size];
     cout << choice << endl;
     cout << "Keep guessing?" << endl;
     cin >> ans;
    } while (ans == "Y");

  cout << "\n\n...Press ENTER to Exit System...";
  cin.get();

  return 0; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T03:51:46.670

您想要的是找到索引，而不是值本身。改变这个：

```
int choice = rand() % setNums[size]; 
```

对此：

```
int choice = setNums[rand() % size]; 
```

**此外**，分配总是在索引上执行`size`。你应该有：

```
...
for (int n=0; n<size;n++ ) {
    setNums[n] = n+1;\
    cout << setNums[n] << endl;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T03:53:53.080

你在滥用`setNums`，你根本不需要它。只需这样做：

```
int choice = rand() % size + 1; 
```

# google-chrome-extension - 当 Chrome 扩展程序的选项发生变化时，如何更新上下文菜单项的数量？

> ID：15048437
> 
> 赞同：0
> 
> 时间：2013-02-24T03:49:28.327
> 
> 标签：google-chrome-extension, options

我想要的一个简化版本是一个带有可变 # 个子菜单的父菜单。在我的选项页面中，用户可以指定应该有多少子菜单。当此值更改时，我希望父菜单的子菜单更新为选项中指定的正确 #。

我的大部分代码在 main.js 中，而选项代码在 options.js 中。

我的一个想法是每次选项更改时重新加载扩展程序；这将重新调用我的循环，该循环使用新的 localStorage 值生成子菜单。

另一个想法是在函数调用中生成子菜单，它会删除任何现有的菜单并使用更新的 localStorage 值重新生成它们，然后以某种方式从我的 options.js 中调用该函数。

当然，我也不知道怎么办！问题是选项处理在 options.js 中，我需要以某种方式影响 main.js。到今天为止，我还是 Java 新手，在遇到这个障碍之前我进展得很好。我已经尝试寻找解决方案，但无济于事；毫无疑问，因为我在寻找错误的东西。

最终目标是允许用户在选项菜单中指定硬盘驱动器位置，并通过父菜单访问这些位置。

非常感谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T18:42:32.853

已解决，使用 chrome 消息传递系统。

[http://developer.chrome.com/extensions/messaging.html](http://developer.chrome.com/extensions/messaging.html)

# magento - 为什么没有输出测试代码？

> ID：15048441
> 
> 赞同：1
> 
> 时间：2013-02-24T03:49:55.140
> 
> 标签：magento

在 Magento CMS 页面中，我添加了代码：

```
 {{block type=”core/template” name=”review” template=”catalog/product/reviewall.phtml”}} 
```

URL 键是**review.html**

然后添加文件 reviewall.phtml(app/design/frontend/default/mytheme/template/catalog/product/reviewall.phtml)

然后在其文件中添加测试代码。

```
echo "hello world"; 
```

当我访问 URL 时`mysiteurl/review.html`，没有 hello world 输出。为什么？如何纠正它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T07:08:11.757

您的代码看起来正确，但是您的引号看起来像 unicode 结束引号 -​​ 替换引号然后您应该没问题。

# windows - 让我的 MDI 应用程序位于其他应用程序的顶部？

> ID：15048446
> 
> 赞同：0
> 
> 时间：2013-02-24T03:50:37.667
> 
> 标签：windows, mfc, window, mdi

我想尽我所能`MDI MFC` `application`在`all other applications' windows`Windows 操作系统上运行。`one view`所以我可以在我的应用程序中制作屏幕截图。
但是像`SetWindowPos(&CWnd::wndTopMost, 0, 0, 0, 0, SWP_SHOWWINDOW);`or `SetFocus()`（在 my 中调用`view class`）这样的函数根本不起作用。
每当`another application's window`在我的顶部并且我制作一个`screenshot`时，它都会保存我`window`顶部的图片。

**那么如何制作`my application's windows`（特别`the view window)`是在`other applications' windows`?**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T19:41:58.913

尝试：

```
SetWindowPos(&CWnd::wndTopMost, 0, 0, 0, 0, SWP_SHOWWINDOW|SWP_NOMOVE|SWP_NOSIZE); 
```

或者：

```
BringWindowToTop( ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T19:43:41.687

> 我想让我的 MDI MFC 应用程序在所有其他应用程序的窗口中居于首位。

这根本不可能。如果您的应用程序可以做到这一点，那么其他应用程序也可以。只有一个可以获胜，没有理由让您的应用程序比其他应用程序更特别。

# java - 我无法使用扫描仪获取 If/Else 语句以证明其为真

> ID：15048463
> 
> 赞同：0
> 
> 时间：2013-02-24T03:53:07.400
> 
> 标签：java

帮助。我是 Java 编程的新手，所以我会尽量利用你的术语。我想知道如何让这个程序注册为真的。当我输入“密码”作为输入时，它不会执行“if”正文中的任何代码。我还将这段代码粘贴到另一个类中，无论如何它仍然不起作用。

我在这个程序上工作了大约半个小时，调试它的时间是原来的两倍。请仔细阅读编码。

```
import java.util.Scanner;

public class whileloop {

    public void whileloop1() {

        //DEBUG THIS PROGRAM! "password" does not work for input

        System.out.println("Please enter the password to continue: ");
        Scanner password = new Scanner(System.in);
        String passwordinput = password.nextLine();

        System.out.println("This is your entered password: " + passwordinput);

        if (passwordinput == "password") {

            System.out.println("Startup sequence has been iniciated.");
            System.out.println("System is working correctly.");

            //Terminate all here ---

         } else {

             System.out.println("Wrong password! Terminating program. /END");

        }

        System.out.println("Supressing the program's scanner!");
        password.close();

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T03:55:55.617

在 Java 中比较字符串内容时，您使用*.equals()*方法。== 运算符检查引用相等性，含义，测试它们是否都是同一对象的引用。

所以，在你的情况下：

```
if(passwordinput.equals("password")) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T03:56:43.417

这已经说过很多次了，但是我再说一遍，在java中比较字符串时，如果您想知道它们是否指向相同的引用，请使用`==`运算符。如果您想检查它们的价值是否相等，请`.equals("somestringhere")` 在您的情况下使用`passwordinput.equals("password")`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T04:13:15.060

因为，`Java`在行中：

`String s;`声明对`String`对象的引用，不像`C++`，它可以声明 的对象`String`。
因此，如果`(passwordinput == "password")`将 的引用`"password"`和 的引用进行比较`passwordinput`，结果将是错误的。
所以，使用，它通过与`if(passwordinput.equals("password")`来比较对象`referenced``passwordinput``"password"`

# java - 通过防火墙或 NAT 进行双向异步调用和回调的 RMI 替代方案

> ID：15048465
> 
> 赞同：4
> 
> 时间：2013-02-24T03:53:37.877
> 
> 标签：java, networking, asynchronous, architecture, rmi

我正在用 Java 编写基于服务器-客户端架构的游戏。

出于设计原因，我想使用异步调用将客户端操作传递给服务器，并使用异步回调将所述操作的结果传递回客户端。异步调用允许缓冲客户端操作。排队缓冲允许对客户端操作进行简单的、基本上是一个线程的处理。

目前，我的服务器和客户端代码非常对称。他们创建一个注册表，然后导出并绑定自己。

异步性是通过在 ConcurrentLinkedQueue 中缓冲传入的操作或结果来实现的。实际处理由定期运行的线程完成。

但是，当客户端有防火墙或在 NAT 后面时，此当前架构不起作用。在这种情况下，服务器根本无法联系到客户端将结果推送给他们。

此外，在当前的架构中，服务器不知道哪个客户端发送了给定的操作，除非引入了冗余的身份验证或会话处理层。这允许伪造行为和作弊。

* * *

我一直在考虑可能的解决方案，但没有找到合适的解决方案：

*   客户端拉取而不是服务器推送。服务器上可能存在客户端定期调用以获取其结果的方法。然而，这种方法看起来很丑陋，它引入了额外的延迟、带宽和时序问题。也不解决伪造行为。直接通知也非常受欢迎。

*   TCP 连接本身允许双向通信，并且肯定可以识别客户端，因此 RMI 或 JRemoting*可能会*被黑客入侵以支持它，但我不知道如何，而且我不知道任何现有的解决方案。

*   消息传递。我不确定消息传递框架是否支持身份验证/会话或客户端识别。不过，我肯定会失去远程方法。

*   我相信正确的解决方案是找到一个支持以上所有内容的远程方法调用框架。

* * *

所以简而言之，我正在寻找一种方法：

*   异步调用服务器或将消息传递给它
*   异步调用客户端或将消息传递给它，即使在防火墙或 NAT 之后
*   识别发送动作的客户端
*   最好能够调用方法，而不仅仅是传递消息
*   保持使用 JUnit 和 Mockito 轻松测试它的能力（每台机器有多个客户端）

是否有任何支持这些的远程方法调用框架？哪个是最好的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T05:38:35.177

我不知道您为什么要坚持使用 RMI 或类似的东西，因为根据定义它是单向的。但是我必须学习类似的教训……对于[我的一个客户端-服务器系统](https://github.com/HarvardEconCS/TurkServer)，我使用 RMI 和长轮询实现了与您现在所拥有的类似的东西。结果证明这是一个可怕的混乱，而且越来越糟。

然后我发现了[发布-订阅](http://en.wikipedia.org/wiki/Publish%E2%80%93subscribe_pattern)框架的美妙世界。这些是构建客户端-服务器应用程序的自然方式，无需实现大量自己的管道。此外，这些框架支持自动保活、时间同步、会话身份验证和权限，以及您不想自己实现的大量其他内容。

对于我的项目，我删除了我自己的所有工作并用[CometD](http://cometd.org/)替换它，它支持 Java 和浏览器 (Javascript) 客户端，并且非常高兴。它肯定会支持您的所有需求——从任何一方发起的异步通信、客户端识别（和许多其他功能）以及 NAT 后面的客户端一旦建立连接就不会成为问题。编写测试也很容易，并且整个框架已经扩大到能够处理 10 万个客户端，这对于 RMI 来说是不可能的。

我强烈建议您考虑放弃能够远程调用方法的要求。方法本质上是片面的，但它们仍然需要调用和返回。[使用事件驱动编程](http://en.wikipedia.org/wiki/Event-driven_programming)来设计系统要好得多。

**更新**：我已经转向网络应用程序的世界，特别是使用[Meteor](http://www.meteor.com)。

# c++ - 将元素插入已排序的向量并保持元素排序

> ID：15048466
> 
> 赞同：13
> 
> 时间：2013-02-24T03:53:44.933
> 
> 标签：c++, sorting, vector, insertion-sort

所以我有一个向量，我希望元素始终被排序。我应该如何将元素插入该向量并在弹出元素时保持元素排序。`std::lower_bound`然而，我调查了这与我想要的相反。

例如，这就是我想要的：当我弹出向量中的所有元素时，它应该是：1 2 3 4 5。这意味着向量必须将它们存储为 5 4 3 2 1。如果使用下限，向量将它们存储为 1 2 3 4 5，并将其弹出为 5 4 3 2 1。此外，将传入一个比较函子，以便该`lower_bound`函数使用比较函子。有没有办法与比较函子相反？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-02-24T04:23:58.007

为了始终保持矢量排序，您应该始终将新元素插入适当的位置。由于您想按升序弹出元素并且 vector 仅提供 pop_back() 方法，因此您应该按降序对元素进行排序。所以首先你需要找到合适的位置，然后插入那里：

```
typedef std::vector<int> ints;

void insert( ints &cont, int value ) {
    ints::iterator it = std::lower_bound( cont.begin(), cont.end(), value, std::greater<int>() ); // find proper position in descending order
    cont.insert( it, value ); // insert before iterator it
} 
```

# opengl-es - 为什么我的 android 原生活动在渲染位图时有时会显示错误的图像？

> ID：15048467
> 
> 赞同：1
> 
> 时间：2013-02-24T03:53:45.717
> 
> 标签：opengl-es, android-ndk, native-activity, skia

我正在尝试使用`NDK`全屏显示位图。该要求迫使我使用完全本机代码进行开发。我`Skia`用来画一个`SkBitmap`，然后用`Opengl APIs`. 当我的应用程序第一次在真正的 android 设备上运行时，它总是运行良好。但是，在我多次打开和关闭程序后，它会显示一个不好的图像。为什么会这样？

功能`engine_init_display`是初始化OpenGL ES和EGL，创建位图和加载纹理。

```
static int engine_init_display(struct engine* engine){
// initialize OpenGL ES and EGL

/*
 * Here specify the attributes of the desired configuration.
 * Below, we select an EGLConfig with at least 8 bits per color
 * component compatible with on-screen windows
 */
const EGLint attribs[] = {
        EGL_SURFACE_TYPE, EGL_WINDOW_BIT,
        EGL_DEPTH_SIZE, 16,
        EGL_BLUE_SIZE, 8,
        EGL_GREEN_SIZE, 8,
        EGL_RED_SIZE, 8,
        EGL_NONE
};
EGLint w, h, dummy, format;
EGLint numConfigs;
EGLConfig config;
EGLSurface surface;
EGLContext context;

EGLDisplay display = eglGetDisplay(EGL_DEFAULT_DISPLAY);
eglInitialize(display, 0, 0);

/* Here, the application chooses the configuration it desires. In this
 * sample, we have a very simplified selection process, where we pick
 * the first EGLConfig that matches our criteria */
eglChooseConfig(display, attribs, &config, 1, &numConfigs);

/* EGL_NATIVE_VISUAL_ID is an attribute of the EGLConfig that is
 * guaranteed to be accepted by ANativeWindow_setBuffersGeometry().
 * As soon as we picked a EGLConfig, we can safely reconfigure the
 * ANativeWindow buffers to match, using EGL_NATIVE_VISUAL_ID. */
eglGetConfigAttrib(display, config, EGL_NATIVE_VISUAL_ID, &format);

ANativeWindow_setBuffersGeometry(engine->app->window, 0, 0, format);
surface = eglCreateWindowSurface(display, config, engine->app->window, NULL);
context = eglCreateContext(display, config, NULL, NULL);

if (eglMakeCurrent(display, surface, surface, context) == EGL_FALSE) {
    LOGW("Unable to eglMakeCurrent");
    return -1;
}

eglQuerySurface(display, surface, EGL_WIDTH, &w);
eglQuerySurface(display, surface, EGL_HEIGHT, &h);

engine->display = display;
engine->context = context;
engine->surface = surface;
engine->width = w;
engine->height = h;
engine->state.angle = 0;
engine->format=format;
// Initialize GL state.

glHint(GL_PERSPECTIVE_CORRECTION_HINT, GL_FASTEST);
glEnable(GL_CULL_FACE);
glShadeModel(GL_SMOOTH);
glDisable(GL_DEPTH_TEST);
SkBitmap bitmap;
GLvoid* bitmapBuffer;
createBitmap(bitmap,bitmapBuffer,width,height);
drawBitmap(bitmap,width,height);
glEnable(GL_TEXTURE_2D);
glGenTextures(1,&sTexture);
glBindTexture(GL_TEXTURE_2D,sTexture);
glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, width, height, 0, GL_RGBA, GL_UNSIGNED_BYTE, (GLvoid*)bitmapBuffer);
glDisable(GL_TEXTURE_2D);
glFinish();
clearBitmapBuffer(bitmap,bitmapBuffer);
//engine_draw_frame(engine);
return 0;
} 
```

功能`render`是显示位图

```
void render(struct engine* engine, int width, int height){

glViewport((engine->width-width)/2, (engine->height-height)/2, width, height);
glClearColorx((GLfixed)(0.1f * 65536),(GLfixed)(0.2f * 65536),(GLfixed)(0.3f * 65536), 0x10000);
glClear(GL_COLOR_BUFFER_BIT);
glMatrixMode(GL_PROJECTION);
glLoadIdentity();
glMatrixMode(GL_MODELVIEW);
glLoadIdentity();

glMatrixMode(GL_TEXTURE);
glLoadIdentity();
glEnable(GL_TEXTURE_2D);
glTexParameterx(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
glTexParameterx(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
glEnableClientState(GL_VERTEX_ARRAY);
glEnableClientState(GL_TEXTURE_COORD_ARRAY);
glBindTexture(GL_TEXTURE_2D,sTexture);
glFrontFace(GL_CW);
glTexCoordPointer(2, GL_FLOAT, 0, textureCoords);
glVertexPointer(3, GL_FLOAT, 0, vertices);
glDrawArrays(GL_TRIANGLE_STRIP, 0, 4);
glDisable(GL_TEXTURE_2D);
glDisableClientState(GL_VERTEX_ARRAY);
glDisableClientState(GL_TEXTURE_COORD_ARRAY);
glFlush();
eglSwapBuffers(engine->display, engine->surface);
} 
```

当窗口被关闭时，`engine_term_display`将被调用

```
static void engine_term_display(struct engine* engine) {
if (engine->display != EGL_NO_DISPLAY) {
    eglMakeCurrent(engine->display, EGL_NO_SURFACE, EGL_NO_SURFACE, EGL_NO_CONTEXT);
    if (engine->context != EGL_NO_CONTEXT) {
        eglDestroyContext(engine->display, engine->context);
    }
    if (engine->surface != EGL_NO_SURFACE) {
        eglDestroySurface(engine->display, engine->surface);
    }
    eglTerminate(engine->display);
}
engine->display = EGL_NO_DISPLAY;
engine->context = EGL_NO_CONTEXT;
engine->surface = EGL_NO_SURFACE;
} 
```

**更新**

`android_main`是我本机应用程序的主要入口点。我发现当这个主函数返回时，整个应用程序仍在运行。

```
void android_main(struct android_app* state) {
struct engine engine;

// Make sure glue isn't stripped.
app_dummy();
memset(&engine, 0, sizeof(engine));
state->userData = &engine;
state->onAppCmd = engine_handle_cmd;
state->onInputEvent = engine_handle_input;
engine.app = state;
ANativeActivity_setWindowFlags(engine.app->activity, AWINDOW_FLAG_FULLSCREEN, 0);

if (state->savedState != NULL) {
    // We are starting with a previous saved state; restore from it.
    engine.state = *(struct saved_state*)state->savedState;
}
while(1){
    int ident;
    int events;
    struct android_poll_source* source;
    if((ident=ALooper_pollAll(-1, NULL, &events,(void**)&source))>=0){
      // Process this event.
       if (source != NULL) {
           source->process(state, source);
       }
       if (state->destroyRequested != 0) {
           engine_term_display(&engine);
           return;
       }
  }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T12:25:12.760

我自己修复它，使用`exit(0)`而不是`return`完全完成活动。

```
if (state->destroyRequested != 0) {
       engine_term_display(&engine);
       exit(0);
   } 
```

# ios - UILabels 阻止自定义 UITableViewCell 上的单元格选择

> ID：15048474
> 
> 赞同：2
> 
> 时间：2013-02-24T03:54:45.780
> 
> 标签：ios, uitableview

我有 4 个从 nib 生成的自定义 UITableViewCell 子类，它们都包含 UILabel。我注意到，当我点击 UIlabel 的框架时，我无法选择单元格。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-24T03:57:38.850

我相信您可以设置`userInteractionEnabled`为`NO`不被 UILabel 拦截。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T03:58:18.670

进入 UIBuilder 并选择标签，并确保 userInteractionEnabled（它在视图属性下）设置为 no。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T05:28:37.650

好的，我想通了。我需要将整个 UITableViewCell 子类 nib 设置为 userinteractionenabled = NO。在每个子类的 init 方法中，我添加了以下代码：

```
 [[NSBundle mainBundle] loadNibNamed:@"ROIUITableViewCellType1"
                                  owner:self
                                options:nil];
    [self addSubview:self.mainView]; 
```

笔尖的子视图遮盖了响应点击事件的单元格。我不确定这是否是为 UITableViewCell 子类加载笔尖的正确方法，这可能会导致我的问题。有什么想法吗？

# jquery - jQuery ajax() / post() & 成功

> ID：15048489
> 
> 赞同：3
> 
> 时间：2013-02-24T03:56:21.200
> 
> 标签：jquery, ajax, forms, post

我有一个非常简单的电子邮件发送表格，只有一个电子邮件字段和一个文本区域。

```
jQuery('#contact').validator().submit(function(e){
    $.ajax({
      type: "POST",
      url: this.action,
      data: { 
        mail: $('input[name="mail"]').val(), 
        message: $('textarea[name="message"]').val(), },
      success: function(){
                alert('yo');
               }
     }); 
     e.preventDefault();
}); 
```

我的操作文件 (send.php) 只进行基本的电子邮件和文本区域检查，然后使用 mail() 发送它们（如果它们经过验证）。

我面临的问题是，即使我发送了错误的数据/所有字段都是空的，也会显示警报消息“哟”。

任何想法如何解决这个问题？当输入失败和从我的 send.php 文件成功时，有什么方法可以“告诉”ajax？

我正在使用 jQuery Tools Validator 来验证字段，我知道有 onSuccess 操作，但在我的情况下不能使用该操作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T04:17:42.443

当您的服务器发送 HTTP 200 响应代码时，$.ajax() 上的成功回调会触发。200 意味着：

*   您的服务器收到一个请求，可选数据
*   它接受了
*   它处理了它
*   它知道如何处理它
*   它向您的客户返回了一个有效的响应（可选，它可以发送一个空的正文）

所以有两种方法可以做到这一点：

1.  使您的服务器在出错时返回非 200 HTTP 代码。例如一个 400（错误的请求，如果参数没有验证，可以说是错误的请求）。这会触发 $.ajax() 的错误回调，而**不是**你的成功回调（你问的）
2.  将错误处理放在应用程序逻辑而不是 http 层中。这意味着，您引入自己的约定来报告服务器响应中的应用程序级错误。

对于 2，这里是可能的 json 响应（由您提出您喜欢的任何约定）

```
// in case of success:
{status: 'ok', error: {errno: 0, msg: ""}}

// in case of error:
{status: 'fail, 'error: {errno: 1, msg: "invalid parameters"}} 
```

然后在您的 ajax 调用中相应地处理响应

```
jQuery('#contact').validator().submit(function(e)
{
    e.preventDefault();
    $.ajax(
    {
        type: "POST",
        dataType: 'json',
        url: this.action,
        mail: $('input[name="mail"]').val(), 
        message: $('textarea[name="message"]').val(),
        success: function(data)
        {
             if (data && data.error && data.errorno)
             {
                   // there is an application-level error. Hande it.
                   // ...
                   return;
             }
             alert('yo!);
        }
    }); 
}); 
```

One more thing: if you intend to do a preventDefault() in all cases. You should put that call as the first entry in your event handler. That will ensure the default event will indeed be prevented, in case any error occurs in the rest of your function (causing it to abort).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T03:58:51.943

您需要让您的 PHP 以非 200“OK”HTTP 状态响应，或者检查您的 PHP 响应的消息，并相应地更改您的逻辑。

您会发现，如果您在`success`函数中接受一个参数，例如 `success: function(o)'，那么来自 AJAX 调用的响应的属性将有助于执行此操作。

通常，您最好查看一些使用 AJAX 的附加示例，包括使用和不使用 jQuery。 [http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)特别有用。

# c - 为什么位掩码中使用十进制数字？

> ID：15048494
> 
> 赞同：0
> 
> 时间：2013-02-24T03:56:59.107
> 
> 标签：c, bit-manipulation

这是一个非常基本的问题，我确信有一个简单的答案，但我不知道我应该使用哪个搜索词来寻找答案。它是这样的：

我试图了解位掩码是如何工作的。在 Linux 系统上有：

```
struct stat 
```

它有一个 st_mode 成员，用于确定被检查的文件是否是常规文件、目录、符号链接等。因此，可以编写一个简单的函数，您可以将名称传递给并获取该名称是否代表目录：

```
16 int isadir( char *name )
17 /*
18  *      calls stat, then masks the st_mode word to obtain the
19  *      filetype portion and sees if that bit pattern is the
20  *      pattern for a directory
21  */
22 {
23         struct stat info;
24 
25         return ( stat(name,&info)!=-1 && (info.st_mode & S_IFMT) == S_IFDIR );
26 } 
```

当我查看位掩码时，我看到它表示如下：

```
/* Encoding of the file mode.  */

#define __S_IFMT        0170000 /* These bits determine file type.  */ 
```

我认为位掩码只能有 0 和 1。为什么面具上有一个7？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T04:01:03.113

以 0 开头的数字是八进制数——这是标准的 C 语法。

这些对于位掩码很有用，尤其是表示 Unix 权限。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-24T04:05:10.247

一个字节为 8 位，可以用十进制（0 到 255）、八进制（000 到 377）、十六进制（00 到 FF）或二进制（00000000 到 11111111）来表示。让我们对位进行编号，从位 0 到位 7：

```
76543210 
```

实际上，一个数字可以用任何基数表示，但是当要将数字分解为位时，主要是八进制和十六进制比较方便；用八进制表示一个字节更容易

```
 z  y  x
76543210 
```

*x*是位 0 到 2，*y*是位 3 到 5，*z*是位 6 和 7。

因此，在您的示例中，`017`八进制数是

```
 0   1   7
00 001 111 
```

以八进制（8 进制）表示的数字更容易转换为二进制。（在六边形中是`0F`）。

在 C (...) 中，八进制文字数字以前导零 (0...) 开头，而在十六进制中，它们以前`0x`导 (0x...) 开头。因为用八进制表示的数字位更容易*可视化，*

```
022 & 017 
```

以二进制形式给出

```
"00 010 010" &
"00 001 111" 
```

结果很容易找到

```
"00 000 010" 
```

在十进制中，那将是`18 & 15`.

# javascript - 使用 Javascript 保存游戏

> ID：15048499
> 
> 赞同：1
> 
> 时间：2013-02-24T03:57:43.627
> 
> 标签：javascript, canvas, save

假设我有一个在 HTML5 画布上绘制的 Javascript 游戏，它会循环更新和绘制一堆对象。保存游戏当前状态的最佳方法是什么？我想我可以遍历所有对象，并以加载函数可以读取的格式以文本形式写入所有值，但这对我和游戏来说似乎都是相当多的工作，以及大量保存文件大小。有一个更好的方法吗？我以前从来没有做过这样的事情，我真的不知道从哪里开始。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T04:04:49.407

像这样的标准做法是维护一个代表您的系统的数据模型和一个代表您的模型的视图。模型应该主要是数据，可能相对复杂，但它包含视图渲染所需的所有信息。

假设这个模型是一个对象树，你可以调用`var serialized = JSON.stringify(model)`将你的数据模型序列化为一个字符串，然后`var model = JSON.parse(serialized)`将其取回。这是一个非常简单但不灵活的方法，但它是一个开始。

存储此信息的一种快速方法是使用，`localStorage`但您可能希望移动到后端存储，在该后端存储中将值放入 REST 服务（或类似的东西），以便可以从任何地方检索此数据。

我建议研究类似 MVC 的框架，例如 Backbone.js（例如），它可以帮助您将模型与视图分离，并且还可以很好地从数据存储中持久化/混合数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T04:05:02.783

您需要对“序列化”和“反序列化”的关键字进行一些研究。

我建议您让所有游戏对象都实现一个序列化函数，而不是对每个对象进行递归循环。您可以使用 JSON 来构建整个对象树，每个对象决定需要保留哪些属性，以及可以从其余部分派生哪些属性。虽然这似乎在某些级别上与递归循环做同样的事情，但最大的区别在于每个对象都可以自己定义如何序列化/反序列化自身及其内容..

取决于您希望保存游戏状态的精确程度，您可以通过这种方式减少大量数据。例如，也许您可​​以简单地将它们重置为当前关卡的开头，或者您可以转储一些其他地方可用的数据（例如，关卡数据可能不应该存储在保存文件中，只有关于游戏状态的信息这让您可以使用现有的关卡数据存储重现关卡）。

# java - PriorityQ 协助

> ID：15048511
> 
> 赞同：0
> 
> 时间：2013-02-24T04:00:27.663
> 
> 标签：java, priority-queue

> 我在使用此代码时遇到问题。我必须创建一个 PriorityQ，它具有快速的 O(1) 插入时间，但删除高优先级项目的速度较慢，谁能告诉我我做错了什么？

```
public class PriorityQ {
private long[] pq;
private int nElems;

public void PQ() { 
    pq= new long[3];
    nElems=0;
    }

public boolean isEmpty() { return nElems==0;}

public void insert(long x) {
    pq[nElems++]=x;
}
public long remove(long x){
long max = 0;
        for (int i = 1; i < nElems; i++)
            if (pq[i] == x) {
                max = pq[i];
                pq[i] = pq[--nElems];
                break;
            }

        return max;
}
 public static void main (String []args){
     PriorityQ theQ = new PriorityQ();
     theQ.insert (10);
     theQ.insert (20);
     theQ.insert (30);
     theQ.remove (10);

      for(int i=0; i<theQ.nElems; i++){
       System.out.print ("");
       System.out.print (theQ.pq[i]);
      } 
```

} }

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T05:23:54.797

对于初学者，您没有正确定义构造函数。

```
public void PQ() { 
pq= new long[3];
nElems=0;
} 
```

应该更像

```
PriorityQ() { 
pq= new long[3];
nElems=0;
} 
```

# sqlite - 奇怪的 SQLite 行为：不返回简单查询的结果

> ID：15048513
> 
> 赞同：2
> 
> 时间：2013-02-24T04:00:58.697
> 
> 标签：sqlite

好的，所以我有一个名为“ledger”的基本表，它包含各种类型的字段，整数，varchar 等。

在我的程序中，我曾经使用没有“来自”谓词的查询来收集所有行，这当然可以正常工作。但是......我更改了我的代码以允许使用“where acctno = x”一次选择一行（其中X是我当时想要选择的帐号）。

我认为这一定是我的编程语言的客户端库中的一个错误，所以我在 SQLite 命令行客户端中对其进行了测试——它仍然无法正常工作！

我对 SQLite 比较陌生，但多年来我一直在使用 Oracle、MS SQL Server 等，以前从未见过此类问题。

我可以告诉你的其他事情： * 使用其他整数字段的查询也不起作用 * 对 char 字段的查询起作用 * 将其作为字符串查询（在引号中带有帐号）仍然不起作用。（我想也许这些数字无意中被存储为字符串）。* 通过 rowid 访问行工作正常 - 这就是为什么我可以使用 GUI 工具编辑数据库而没有明显问题。

例子：

没有 WHERE 的查询（工作正常）：

```
1|0|0|JPY|8|实收资本|C|X|0|X|0|0||||0|0|0|
0|0|0|JPY|11|根账户|P|X|0|X|0|0|SYSTEM|20121209|150000|0|0|0|
3|0|0|JPY|13|三菱银行富通|A|X|0|X|0|0|SYSTEM|20121209|150000|0|0|0|
4|0|0|JPY|14|日本邮政银行|A|X|0|X|0|0|SYSTEM|20121209|150000|0|0|0|
...

```

使用 WHERE 子句查询：（无结果）

```
sqlite> select * from ledger where acctno=1;                                    
sqlite>

```

在上面的 1 周围加上引号不会改变任何事情。

有趣的是，“select * from ledger where acctno > 1”返回结果！然而，由于它返回所有结果，它并不是非常有用。

我相信有人会问表结构，所以这里是：

```
sqlite> .schema 账本
创建表“分类帐”（
 “ACCTNO”整数（10,0）非空，
 “drbal”整数（20,0）非空，
 “crbal”整数（20,0）非空，
 "CURRKEY" char(3,0) NOT NULL,
 “TEXTKEY”整数（10,0），
 "文本" VARCHAR(64,0),
 "ACCTYPECD" CHAR(1,0) 非空，
 "ACCSTCD" CHAR(1,0),
 “PACCTNO”数字（10,0）不为空，
 “CATCD”编号（10,0），
 "TRANSNO" number(10,0) NOT NULL,
 “extrefno”数字（10,0），
 "更新用户" VARCHAR(32,0),
 “更新日期”文本（8,0），
 “更新时间”文本（6,0），
 “PAYEECD”数字（10,0）不为空，
 “drbal2”数字（10,0）不为空，
 “crbal2”数字（10,0）不为空，
 “delind”布尔值，
主键（“ACCTNO”），
约束 "fk_curr" 外键 ("CURRKEY") 引用 "CURRENCY" ("CUR
RKEY") ON DELETE RESTRICT ON UPDATE CASCADE
);

```

最奇怪的是，我还有其他类似的表格可以正常工作！

```
sqlite> select * from journalhdr where transno=13;
13|测试交易ATM取款20130213|20130223||20130223||
该表中的 TransNo 也是整数 (10,0) NOT NULL - 这就是让我觉得它与值有关的原因。

另一个线索是排序顺序似乎基于 ascii，而不是数字：

```
sqlite> select * from ledger order by acctno;
0|0|0|JPY|11|根账户|P|X|0|X|0|0|SYSTEM|20121209|150000|0|0|0|
1|0|0|JPY|8|实收资本|C|X|0|X|0|0||||0|0|0|
10|0|0|USD|20|Sallie Mae|L|X|0|X|0|0|SYSTEM|20121209|153900|0|0|0|
21|0|0|美元|21|Skrill|A|X|0|X|0|0|SYSTEM|20121209|154000|0|0|0|
22|0|0|USD|22|AES|L|X|0|X|0|0|SYSTEM|20121209|154200|0|0|0|
23|0|0|日元|23|丸井|L|X|0|X|0|0|SYSTEM|20121209|154400|0|0|0|
24|0|0|JPY|24|Amex JP|L|X|0|X|0|0|SYSTEM|20121209|154500|0|0|0|
3|0|0|JPY|13|三菱银行富通|A|X|0|X|0|0|SYSTEM|20121209|150000|0|0|0|

```

当然，journalhdr 上的排序顺序（选择正常工作的地方）是数字的。

解决了！（有点）
数据可以这样固定：

sqlite>更新分类帐集acctno = 23 where rowid = 13;
sqlite> select * from ledger where acctno = 25;                                 
25|0|0|日元|0|测试|L|X|0|X|0|0|系统|20130224|132500|0|0|0|                        

```

尽管如此，如果它被存储为字符串，那么就会留下几个问题： 1\. 为什么我不能使用引号将它选择为字符串？2\. 它是一个有效的整数，它是如何存储为字符串的？3\. 除了注意到奇怪的症状，你会如何正常检测这个问题？

虽然数据通常会由我的程序输入，但其中一些是使用 Navicat 手动创建的，所以我认为问题一定出在那里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T08:39:55.040

你是 SQLite[动态类型](http://www.sqlite.org/datatype3.html)的受害者。

尽管 SQLite 定义了[相似性类型](http://www.sqlite.org/datatype3.html#affinity)的系统，它设置了一些关于如何将输入字符串或数字转换为实际内部值的规则，但它不会阻止使用准备好的语句的软件显式设置任何类型（和数据值）列（每行可能不同！）。

这可以通过这个简单的例子来说明：

```
CREATE TABLE ledger (acctno INTEGER, name VARCHAR(16));
INSERT INTO ledger VALUES(1,          'John'); -- INTEGER '1'
INSERT INTO ledger VALUES(2 || X'00', 'Zack'); -- BLOB    '2\0' 
```

我插入的第二行不是整数，而是包含*嵌入零字节*的二进制字符串。这完全重现了您的问题，请逐步查看此[SQLFiddle 。](http://www.sqlfiddle.com/#!5/10fc5/3)您也可以在 中执行这些命令`sqlite3`，您将得到相同的结果。

# 下面是也重现此问题的 Perl 脚本

此脚本仅创建 2 行，第一行和第二行`acctno`的值为整数。表示由 2 个字节组成的字符串：第一个是 digit ，第二个是（零）字节。`1``"2\0"``"2\0"``2``0`

当然，很难从视觉上分辨`"2\0"`出 just `"2"`，但这就是下面的脚本演示的内容：

```
#!/usr/bin/perl -w
use strict;
use warnings;
use DBI qw(:sql_types);
my $dbh = DBI->connect("dbi:SQLite:test.db") or die DBI::errstr();
$dbh->do("DROP TABLE IF EXISTS ledger");
$dbh->do("CREATE TABLE ledger (acctno INTEGER, name VARCHAR(16))");
my $sth = $dbh->prepare(
    "INSERT INTO ledger (acctno, name) VALUES (?, ?)");
$sth->bind_param(1, "1", SQL_INTEGER);
$sth->bind_param(2, "John");
$sth->execute();
$sth->bind_param(1, "2\0", SQL_BLOB);
$sth->bind_param(2, "Zack");
$sth->execute();
$sth = $dbh->prepare(
    "SELECT count(*) FROM ledger WHERE acctno = ?");
$sth->bind_param(1, "1");
$sth->execute();
my ($num1) = $sth->fetchrow_array();
print "Number of rows matching id '1' is $num1\n";
$sth->bind_param(1, "2");
$sth->execute();
my ($num2) = $sth->fetchrow_array();
print "Number of rows matching id '2' is $num2\n";
$sth->bind_param(1, "2\0", SQL_BLOB);
$sth->execute();
my ($num3) = $sth->fetchrow_array();
print "Number of rows matching id '2<0>' is $num3\n"; 
```

该脚本的输出是：

```
Number of rows matching id '1' is 1
Number of rows matching id '2' is 0
Number of rows matching id '2<0>' is 1 
```

如果您要使用任何 SQLite 工具（包括 ）查看结果表`sqlite3`，它将打印`2`第二行 - 当 BLOB 被强制为字符串或数字时，它们都会被 BLOB 中的尾随 0 弄糊涂。

请注意，我必须使用自定义参数绑定来强制类型为 BLOB 并允许存储空字节：

```
 $sth->bind_param(1, "2\0", SQL_BLOB); 
```

长话短说，要么是你的一些客户端程序，要么是一些像 Navicat 这样的客户端工具把它搞砸了。

# php - Cakephp Upload Plugin 2.0 如何存储没有扩展名的文件名？

> ID：15048521
> 
> 赞同：1
> 
> 时间：2013-02-24T04:01:47.870
> 
> 标签：php, cakephp, cakephp-2.3

我正在使用上传插件 2.0 ( [https://github.com/josegonzalez/upload](https://github.com/josegonzalez/upload) )，但在填充名称字段时遇到了一些麻烦。

我的表单有一个隐藏的名称字段输入字段。

```
<?php echo $this->Form->create('Image', array('type' => 'file')); ?>
    <fieldset>
        <legend><?php echo __('Add Image'); ?></legend>
    <?php
        echo $this->Form->input('animal_id');
        echo $this->Form->input('name', array('type' => 'hidden'));
        echo $this->Form->input('attachment', array('type' => 'file'));
        echo $this->Form->input('dir', array('type' => 'hidden'));
        echo $this->Form->input('type', array('type' => 'hidden'));
        echo $this->Form->input('size', array('type' => 'hidden'));
        echo $this->Form->input('active', array('type' => 'hidden'));
    ?>
    </fieldset>
<?php echo $this->Form->end(__('Submit')); ?> 
```

我正在使用 madel 的 $actAs 数组中的字段行为：

```
'fields' => array(
    'dir' => 'dir',
    'name' => 'name',
), 
```

该文档建议创建“名称”字段，但由于它没有像大小/类型字段那样自动填充，所以我必须遗漏一些东西。我只希望它是最后没有扩展名的文件名（即 jpg、.gif）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T10:22:51.440

在您的控制器中，您可以使用[pathinfo](http://php.net/manual/en/function.pathinfo.php)

```
public function add(){

   //...
   $path = $this->request->data['Image']['name'];
   $file_info = pathinfo($path);
   if(isset($file_info['filename'])){
      $this->request->data['Image']['name'] = $file_info['filename'];
   }
   //....
} 
```

# html - 如何使子 div 不重定向到父标签 href？

> ID：15048523
> 
> 赞同：0
> 
> 时间：2013-02-24T04:02:13.890
> 
> 标签：html

是否可以使具有`not_linked`id 的 div 不将浏览器重定向到父 href？我这样做是有充分理由的，但我已经删除了它的长代码，并将其压缩为这个基本示例：

```
<a href='google.com'>
  <div>Part 1</div>
  <div id='not_linked'>Middle</div>
  <div>Part 3</div>
</a> 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T04:05:14.800

您可能可以使用一些 javascript 来分析实际的点击目标并查看实际点击了哪些文本。如果是中间，则中止链接。但是，当您可以简单地做的时候，为什么还要麻烦呢？

```
<a href="http://google.com"><div>Part 1</div></a>
<div>Middle</div>
<a href="http://google.com"><div>Part 3</div></a> 
```

另请注意，这是无效的 html。`div`是块级元素，不应放置在行内元素 ( `<a>`) 内。

# ruby-on-rails - 使用 rails 从 CSV 导入特定的行和列

> ID：15048534
> 
> 赞同：3
> 
> 时间：2013-02-24T04:04:16.060
> 
> 标签：ruby-on-rails, csv, import

```
require 'csv'    

CSV.foreach(filename, :headers => true) do |row|
  if column3 = true || column 4 = true
    Model.create!(row.to_hash)
  else
    skip
  end
end 
```

首先，有没有办法只在 期间抓取某些列`row.to_hash`？

其次，我使用`if`语句是获取特定行的最佳方式吗？我可以将整个 CSV 加载到某种临时表中，然后获取我需要的东西吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T04:16:52.740

`row.to_hash`将根据标头生成属性哈希。要选择一组特定的属性，您应该使用 slice。

```
>> row.to_hash # { :attr1 => 'val1', :attr2 => 'val2', :attr3 => 'val3' }
>> row.to_hash.slice(:attr1, :attr2) # { :attr1 => 'val1', :attr2 => 'val2' } 
```

关于您的第二个问题：是的，您仍然需要加载整个 csv 并检查每一行。

# django - Django UserProfile 匹配查询不存在

> ID：15048535
> 
> 赞同：3
> 
> 时间：2013-02-24T04:04:27.850
> 
> 标签：django

我正在使用本教程[http://lightbird.net/dbe/forum2.html](http://lightbird.net/dbe/forum2.html)创建一个论坛，但遇到了一个错误。

当我单击编辑配置文件时，它假设指向此页面而不是我得到一个错误（下）

![在此处输入图像描述](../Images/0b1206535b79a6887af6ba0d5b0841f0.png)

```
 DoesNotExist at /forum/profile/1/

 UserProfile matching query does not exist.

 Request Method:    GET
 Request URL:   http://127.0.0.1:8000/forum/profile/1/
 Django Version:    1.4.3
 Exception Type:    DoesNotExist
 Exception Value:   

 UserProfile matching query does not exist.

 Traceback Switch to copy-and-paste view

 C:\djcode\mysite\forum\views.py in profile

         profile = UserProfile.objects.get(user=pk) 
```

我认为这个错误意味着，django 无法接收我的管理员登录。

这是我的 fbase.html 的一部分

```
 <a href="{% url ben:profile user.pk %}">Edit profile</a> 
```

这指向我的 URLconf。

```
 from django.conf.urls import patterns,include,url
  from django.contrib import admin
  from django.conf import settings

  urlpatterns = patterns('forum.views',
                   url(r'^$','main',name='main'),
                   url(r"^forum/(\d+)/$", "forum",name ="forum"),
                   url(r"^thread/(\d+)/$","thread",name = "thread"),
                   url(r"^post/(new_thread|reply)/(\d+)/$", "post",name = "post"),
                   url(r"^reply/(\d+)/$", "reply" , name ="reply"),
                   url(r"^new_thread/(\d+)/$", "new_thread" , name  ="new_thread"),
                   url(r"^profile/(\d+)/$", "profile",name= "profile"),
  ) 
```

并进入我的视图功能

```
 def profile(request, pk):
      """Edit user profile."""
      profile = UserProfile.objects.get(user=pk)
      img = None

      if request.method == "POST":
          pf = ProfileForm(request.POST, request.FILES, instance=profile)
          if pf.is_valid():
              pf.save()
              # resize and save image under same filename
              imfn = pjoin(MEDIA_ROOT, profile.avatar.name)
              im = PImage.open(imfn)
              im.thumbnail((160,160), PImage.ANTIALIAS)
              im.save(imfn, "JPEG")
      else:
          pf = ProfileForm(instance=profile)

      if profile.avatar:
          img = "/media/" + profile.avatar.name
      return render_to_response("forum/profile.html", add_csrf(request, pf=pf, img=img)) 
```

这是我的models.py

```
 from django.db import models
  from django.contrib.auth.models import User
  from django.contrib import admin
  from string import join
  from mysite.settings import MEDIA_ROOT

  class Forum(models.Model):
      title = models.CharField(max_length=60)
      def __unicode__(self):
          return self.title
      def num_posts(self):
          return sum([t.num_posts() for t in self.thread_set.all()])

      def last_post(self):
          if self.thread_set.count():
              last = None
              for t in self.thread_set.all():
                  l = t.last_post()
                  if l:
                      if not last: last = l
                      elif l.created > last.created: last = l
              return last
  class Thread(models.Model):
      title = models.CharField(max_length=60)
      created = models.DateTimeField(auto_now_add=True)
      creator = models.ForeignKey(User, blank=True, null=True)
      forum = models.ForeignKey(Forum)

      def __unicode__(self):
          return unicode(self.creator) + " - " + self.title
      def num_posts(self):
          return self.post_set.count()

      def num_replies(self):
          return self.post_set.count() - 1

      def last_post(self):
          if self.post_set.count():
              return self.post_set.order_by("created")[0]
  class Post(models.Model):
      title = models.CharField(max_length=60)
      created = models.DateTimeField(auto_now_add=True)
      creator = models.ForeignKey(User, blank=True, null=True)
      thread = models.ForeignKey(Thread)
      body = models.TextField(max_length=10000)

      def __unicode__(self):
          return u"%s - %s - %s" % (self.creator, self.thread, self.title)

      def short(self):
          return u"%s - %s\n%s" % (self.creator, self.title, self.created.strftime("%b %d, %I:%M %p"))
short.allow_tags = True

  ### Admin

  class ForumAdmin(admin.ModelAdmin):
      pass

  class ThreadAdmin(admin.ModelAdmin):
      list_display = ["title", "forum", "creator", "created"]
      list_filter = ["forum", "creator"]

  class PostAdmin(admin.ModelAdmin):
      search_fields = ["title", "creator"]
      list_display = ["title", "thread", "creator", "created"]
  class UserProfile(models.Model):
      avatar = models.ImageField("Profile Pic", upload_to="images/", blank=True, null=True)
      posts = models.IntegerField(default=0)
      user = models.ForeignKey(User, unique=True)

      def __unicode__(self):
          return unicode(self.user) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T04:34:28.873

您忘记将 pk 放入渲染中：

```
return render_to_response("forum/profile.html", add_csrf(request, pf=pf, 'profile': profile, img=img)) 
```

在 html 中：

```
<a href="{% url ben:profile profile.id %}">Edit profile</a> 
```

# javascript - 如何在 Coffeescript 中将函数作为参数传递

> ID：15048540
> 
> 赞同：1
> 
> 时间：2013-02-24T04:05:01.633
> 
> 标签：javascript, jquery, callback, coffeescript

我是 Coffeescript 的新手，我想将一个函数作为参数传递，以便在动画完成时用作回调。现在，我的“回调”正在我的动画完成之前运行。

```
 closeItem: ($elem) ->
    @close($elem, @myCallback($elem))

  close: ($elem, callback) ->
    $elem.slideUp 300, (-> callback) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T04:11:28.823

您的问题是您在调用`close`. 我们在这里重载了术语，但您似乎想要“关闭”`$elem`变量以实现这一点。试试这个：

```
closeItem: ($elem) ->
    @close $elem, => @myCallback($elem)

close: ($elem, callback) ->
    $elem.slideUp 300, callback 
```

注意几点：

我们`=>`在对 的调用中使用了粗箭头`@close`。这将使用当前对象的上下文创建一个函数，以便它可以调用`@callback`然后关闭它`$elem`以便可以将其传递给`@myCallback`

此外，在`close`函数本身中，您只需将回调传递给`slideUp`

# mysql - 使用 Google Chrome 扩展连接 MySQL 数据库？

> ID：15048541
> 
> 赞同：2
> 
> 时间：2013-02-24T04:05:02.103
> 
> 标签：mysql, database, google-chrome, google-chrome-extension

是否有可能做到这一点？

在 webapps 方面我很熟悉 MySQL，但我正在学习如何创建 google chrome 扩展，我想以某种方式从现有的 web 应用程序连接到我的数据库。我在`popup.html`来自 google 的示例中创建了一个表单，并希望在用户提交此数据时将输入值发送到脚本以将数据插入 MySQL。我该怎么做？

是的，我正处于开发阶段，无需上传到我的服务器即可轻松上传 chrome 扩展。所以我只是想知道如果不是本地主机，我如何连接 MySQL 数据库？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T04:11:41.233

我认为您不想让您的 chrome 扩展访问数据库。这是圣经比例的安全*噩梦*。

您要做的是创建一个扩展可以与之通信的远程 Web 服务，然后处理您的数据库操作。

这可以是您调用的 PHP 脚本，它返回一些 JSON，或者更复杂。

# php - 使用 PHP 从类和函数中读取/输出 JSON

> ID：15048542
> 
> 赞同：-1
> 
> 时间：2013-02-24T04:05:03.007
> 
> 标签：php, jquery, mysql, class, pdo

我通常使用 Jquery 获取所有 JSON 数据，但我目前只需要使用 PHP 来获取。

本质上，这就是我通常使用 Jquery 获取和输出它的方式：（片段，而不是整个代码）

```
$.post('getdata.php', {uid:uid} , function(data){
    if(data){   
    $.each(data, function(key, data) {
    $('#div #span-'+key).html(data);
    });

}

} , 'json') 
```

其中 uid 是传递给 php 用于查询数据库的值。

这是 php 后端：（再次只是 JSON 部分的一个片段）

```
while ($row = $result->fetch(PDO::FETCH_ASSOC)) {
    $ret["ID"]       = $row['id'];
    $ret["username"] = $row['username'];
    $ret["email"]    = $row['email'];
    $ret["age"]      = $row['age'];
    echo json_encode($ret);
} 
```

显然，在输出页面上，我与 jquery 一起启动了类和函数：

```
$class = new retrieveData();
$class->userDetails(); 
```

然后输出我想要的数组的各个部分，我将为特定数组部分创建一个具有相同唯一键的跨度，如 jquery 中所述。

我将如何将其中的 jquery 部分转换为 PHP？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T04:52:36.433

因此，如果我理解您，您只想重新设计整个 ajax 端以从服务器发送请求：

```
$ch = curl_init($theUrlThatReturnsTheData);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, array('uid' => $uid));
curl_setopt($ch, CURLOPT_POST, true);
$jsonData = curl_exec($ch);

$data = json_decode($jsonData); 
```

现在做任何你需要用json做的事情......假设你的jquery片段是这样的：

```
<div id="<?php echo $uid ?>">
   <?php foreach($data as $key => $value): ?>
       <span id="span-<?php echo $key ?>">
         <?php echo $value ?>
       </span>
   <?php endforeach; ?>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T04:15:59.357

jQuery 是用 JavaScript 编写的，在用户的浏览器上运行，而 PHP 只在服务器上运行。您无法将在浏览器上运行的东西转换为在服务器上运行的东西。换句话说，您不能使用 AJAX 函数，例如`post`

阅读[这篇文章](http://www.virtualshowrooms.co.za/articlepage.php?cp=101)

# java - Facebook 图形 API 服务器端登录问题

> ID：15048544
> 
> 赞同：0
> 
> 时间：2013-02-24T04:05:08.333
> 
> 标签：java, facebook-graph-api, struts

几天以来我一直有一个奇怪的问题。我在我的网站上实现了从 FB 图形 API 进行的服务器端登录，直到最近一切正常。最近，我收到以下错误。

{"error":{"message":"此授权码已被使用。","type":"OAuthException","code":100}}

我的登录流程如下 - 使用 uri 重定向响应、接收代码、发送访问令牌请求、从响应中检索用户 ID。它是一个基于 struts 的 Web 应用程序。我在网上搜索了这个问题，并没有取得任何进展。我在 stackoverflow 和其他地方找到的流行解决方案之一是将“/”添加到 redirect_uri 的末尾，但这不适用于我的应用程序，因为我重定向到像[http://sitename.com/这样的 struts 操作ABC.do](http://sitename.com/ABC.do)并在 struts 层添加一个“/”，如[http://sitename.com/ABC.do/](http://sitename.com/ABC.do/)炸弹，因为它不理解末尾的额外“/”。谁能指出我正确的解决方案。为什么我最后需要这个“/”。解决方法是什么？

# asp.net - ASP.MVC Bundles - 如何正确定义它们？

> ID：15048548
> 
> 赞同：2
> 
> 时间：2013-02-24T04:05:33.577
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3

我有这样的事情：

```
bundles.Add(new StyleBundle("~/Content/Styles/Default/Forums").Include("~/Content/Styles/Default/Forums/Main.css",
                                                                           "~/Content/Styles/Default/Forums/Slider.css")); 
```

现在，当我发布我的应用程序并运行它时，它会创建一个如下链接：

```
<link href="/Content/Styles/Default/Forums?v=8vn0bgRpB8BncmaT_onrpNlXa4t9ydK6_Fep81xhhm01" rel="stylesheet"/> 
```

它指的是我的站点目录，并且对它的访问被禁用。但是 ASP 不允许我在应用程序之外指定文件，那我该怎么做呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T04:19:22.310

构造函数中的虚拟路径`StyleBundle`不必与应用程序中的现有路径匹配：

```
bundles.Add(new StyleBundle("~/Content/css").Include(
  "~/Content/Styles/Default/Forums/Main.css",
  "~/Content/Styles/Default/Forums/Slider.css")); 
```

如果要使用外部文件，可以使用 bundle 上的 CDN 路径（需要将`UseCDN`属性设置为`true`）：

```
bundles.UseCdn = true;

bundles.Add(new StyleBundle("~/Content/css", "<CDN Path>").Include(
  "<CDN Path>/Main.css",
  "<CDN Path>/Slider.css")); 
```

# javascript - getScript 本地加载而不是全局？

> ID：15048551
> 
> 赞同：4
> 
> 时间：2013-02-24T04:06:11.153
> 
> 标签：javascript, jquery, ajax

根据我的阅读，JQuery 的 getScript 函数使用名为“global eval”的函数在全局上下文中加载脚本文件。是否有特定的设置或方法来改变它，所以它会在我调用它的函数中加载？

如果我执行以下代码名称，则返回未定义，因为它没有在本地上下文中加载脚本。

```
 function callscript(){
        var name='fred';
    getScript(abc.js);
    }

//abc.js:
alert(name); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-24T05:29:31.637

我相信我已经找到了使用常规 JQuery ajax 调用的解决方案。诀窍是您将数据类型设置为“文本”，否则如果其脚本或使用 getScript 或替代 .get() 它将自动在其中运行脚本并将其放置在全局上下文中。

```
 function abc(){
    var msg="ciao";
    $.ajax({
      url: 'themes/_default/system/message.js',
      success: function(data){
          eval(data);
      },
      dataType: "text"
    });
    }
    //message.js
(function() {
    alert(msg);
})(); 
```

这会按预期提醒'ciao' :)

在有人说是之前，我正在使用 eval 但在这种情况下它非常好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T04:26:10.370

正如您已经注意到的那样，文档中没有关于此的任何内容。我仔细检查了源代码，发现底层调用没有选项可供您传递以覆盖此行为。

```
// http://code.jquery.com/jquery-1.9.1.js
...
getScript: function( url, callback ) {
    return jQuery.get( url, undefined, callback, "script" );
},
... 
```

据我所知，使用 jQuery 将脚本异步加载到本地范围是不可能的。jQuery 的 API 没有为您提供任何其他方式来配置它的用法。

我仍在研究如何使用其他技术。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-06T12:50:40.437

好吧，我知道这是 2017 年，4 年后，但似乎 jQuery 团队从来没有费心解决这个问题，好吧。我有同样的问题，我认为这是解决方案，在本地环境中使用 getScript 的实际预期方式。我注意到的是，无法在本地上下文中针对您的代码轻松评估代码，而 jQuery 不知道它是如何进行的。我没有更深入，但是如果您查看 jQuery 源代码，它是如何将脚本注入到文档中的，它是天才，它完全避免了 eval。因此，它运行的脚本就好像它是通过脚本标签导入的文件一样。无需再费周折...

我决定反之亦然，这样可以更好地解释发生了什么。然后，您可以将其反转为有问题的示例。

如果您注意到 getScript 实际上在查询字符串中向服务器发送了一个唯一 ID。我不知道他们为什么没有在文档中提到这一点。使用它来识别返回的脚本。但是你必须在后端做一些事情......

```
let imports;

$.getScript("scripts.php?file=abc.js", (data, textStatus, jqXHR) => {
    window[jqXHR.getResponseHeader('X-scriptID')](imports);
    alert (imports.name);
}); 
```

abc.js：

```
imports.name = 'fred'; 
```

后端包装我们得到的任何脚本 scripts.php：

```
// code that gets the file from  file system into var $output
$output = file_get_contents($_REQUEST['file']);

// generate a unique script function name, sort of a namespace
$scriptID = "__script" . $_REQUEST['_'];

// wrap the script in a function a pass the imports variable 
// (remember it was defined in js before this request) we will attach
// things we want to become local on to this object in script file
$output = "window.".$scriptID."=function(imports) { ".$output." };";

// set the script id so we can find this script in js           
header ("X-scriptID: " . $scriptID);

// return the output
echo $output; 
```

发生的事情是 js 通过 getScript 请求脚本，但它不直接请求文件，它使用 php 脚本来获取文件的内容。我这样做是为了修改返回的数据并附加用于标识返回脚本的标头（这是一个大型应用程序，这里需要大量脚本）。

当 getScript 像往常一样在浏览器中运行返回的脚本时，脚本的实际内容不会运行，只是使用唯一名称 __script1237863498 或类似名称的包装函数声明（该编号由 getScript 在之前请求该脚本时给出)，附加到全局窗口对象。然后 js 使用该响应来运行包装函数并将属性注入到导入对象中......这成为请求范围内的本地对象。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-02-24T04:11:49.657

```
// global.js
var global1 = "I'm a global!";

// other js-file
function testGlobal () {
    alert(global1);
} 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-02-24T04:21:22.310

我不知道 jQuery 实现，但`name`返回的原因`undefined`是因为`name`它是对象的私有属性`callscript`。要否定这一点，您可以在函数调用之外声明变量：

```
var name = ''; //Declare name outside of the function
function callscript(){
  name='fred';
  getScript('abc.js'); //Shouldn't it be $.getScript? and argument should be passed as a string
}

//abc.js:
console.log(name) //Returns undefined
callscript(); //Call the script
console.log(name); //Returns "fred" 
```

# ios - 查看堆栈、UIViewController 和旋转

> ID：15048552
> 
> 赞同：0
> 
> 时间：2013-02-24T04:06:52.967
> 
> 标签：ios, xcode, ipad, uiviewcontroller

我有一个 UIViewcontroller 托管了很多 Viewcontrollers。我在它及其子视图上设置了自动旋转，一旦应用程序加载它就可以正常工作。我遇到的问题是，在初始加载过程中，应用程序必须在本地连接并下载一些文件。在此加载过程中，如果用户旋转 iPad，UIViewController 将无法正确旋转！我确实设置了标志并应该自动旋转，但仍然无法正常工作。

PS：我允许这四个方向：

```
 - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
 {
  return (interfaceOrientation == UIInterfaceOrientationPortrait ||
        interfaceOrientation == UIInterfaceOrientationLandscapeLeft ||
        interfaceOrientation == UIInterfaceOrientationPortraitUpsideDown ||
        interfaceOrientation == UIInterfaceOrientationLandscapeRight);
 } 
```

加载完成后，行为正确并正确旋转。现在我认为这可能是因为其中一些内部 VC 正在加载一些数据，让我解释一下：大视图控制器托管所有其他 VC（我们称他为 BigDaddy），在 bigdaddy 的 Viewdidload 中我有（为了论证）另外三个视图控制器：Busta、Skeezix 和劳伦斯。所以我这样做：

```
[[Busta alloc] initWithNibName:@"Busta" bundle:nil]; 
```

这反过来又调用了`-viewDidLoad`Busta，所以我通过执行以下操作使该异步的文件加载部分：

```
 dispatch_async(dispatch_get_main_queue(), ^{
    }); 
```

这些更改确实有点帮助，因为在异步调度之前加载过程需要 5 秒（在这几秒内，iPad 中的任何倾斜都会导致旋转事件并且我的整个视图都消失了。现在我得到了那些 5秒减少到 1.2 秒。我的问题是，我的问题有解决方案吗？它永远不会工作吗？是否可以让应用程序在四个方向上旋转并在加载数据时响应旋转变化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T04:23:25.543

我怀疑问题在于您如何进行“连接”。我假设您的意思是您正在使用 NSURLConnection 或类似方法连接到远程服务器。请注意，如果您在主线程上使用同步连接，您*将*冻结应用程序，直到连接完成。适当的方法是利用异步调用，或者更好地将工作转移到辅助线程（参见 NSOperationQueue 文档），然后将基于该信息的 UI 更新移回主线程（再次参见 NSOperationQueue 文档）。

WWDC 2012 视频中有一个很好的例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T04:23:52.887

为什么不直接实现您的`-shouldAutorotateToInterfaceOrientation...`方法，使其仅在应用程序完成加载所需数据后才允许旋转？

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    BOOL appIsFinishedLoadingData = <your code here>
    return shouldRotate;
} 
```

（考虑到您允许所有可能的轮换，我缩短了您的代码，因此实际上无需检查提供的轮换。您的方式更具前瞻性，我的方式更易于阅读。）

# vtk - VTK：将标签/文本放在 3d 图中的点附近

> ID：15048553
> 
> 赞同：1
> 
> 时间：2013-02-24T04:07:48.667
> 
> 标签：vtk

我编写了一个将多个 3d 点绘制为球体的代码。我想在 3D 中的每个球体附近添加一些文本，以提及有关每个点的一些信息。但是我有 vtkPoints 来存储点位置，这些位置没有我在 labelMApper 中需要的 GetOutputPort （并且还使用 glyph3d 来制作球体）

```
vtkSmartPointer<vtkLabeledDataMapper> labelMapper = vtkSmartPointer<vtkLabeledDataMapper>::New();
labelMapper->SetInputConnection( vtkpoints->GetOutputPort() ); // No GetOutputPort()
vtkSmartPointer<vtkActor2D> labelActor = vtkSmartPointer<vtkActor2D>::New();
labelActor->SetMapper(labelMapper);
renderer->AddActor(labelActor); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T09:01:16.037

您应该从这些点构造一个 vtkPolyData 并将其设置为标签映射器的输入。

像这样的东西：

```
vtkNew<vtkPolyData> labelPolyData;
labelPolyData->SetPoints(labelPoints);
labelMapper->SetInput(labelPolyData);  // Note: If you're using VTK from master (6.x), this is SetInputData(...)
renderer->AddActor2D(labelActor); 
```

# ubuntu - ubuntu in openvz，文件创建有前途

> ID：15048556
> 
> 赞同：0
> 
> 时间：2013-02-24T04:09:44.003
> 
> 标签：ubuntu, time, future, createfile, openvz

我在 openvz 容器中有一个 ubuntu 10.04 系统。

现在，我遇到了时间和时区的问题。

我已通过以下命令将时区更改为亚洲/上海：

```
sudo dpkg-reconfigure tzdata 
```

当我运行命令时它开始工作：

```
~$ date
2013年 02月 24日 星期日 12:00:05 CST 
```

但是如果我触摸一个文件，文件的修改时间就是未来！

```
~$ touch somefile
~$ ls -l
total 1
-rw-r--r-- 1 chen chen 0 2013-02-24 20:07 somefile 
```

请注意，新触摸的文件`somefile`有 8 小时的未来时间！！它是怎么发生的！！

```
~$ ls --full-time
total 1
-rw-r--r-- 1 chen chen 0 2013-02-24 20:07:33.340285883 +0800 somefile 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T04:23:52.923

触摸没有被别名吗？那就是命令 touch 不是 touch -d '+8 hours' 或类似的别名吗？

# ember.js - 如何在 jsFiddle 中进行基本的 ember 设置

> ID：15048558
> 
> 赞同：2
> 
> 时间：2013-02-24T04:10:23.437
> 
> 标签：ember.js, jsfiddle

我正在尝试在我的[jsFiddle中测试我的余烬代码](http://jsfiddle.net/synthresin/KBANX/)

我将框架设置为`Ember 1.0.0-rc1`和`onDomReady`

我添加了 jQuery 作为资源。

我在 html 中设置基本应用程序模板并在 js 中声明应用程序。

我想我设置了一个非常基本的 ember 应用程序。但它不起作用。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T10:12:25.630

Ember 贡献文档中有一个最新的 fiddle/jsbin 链接：

[https://github.com/emberjs/ember.js/blob/master/CONTRIBUTING.md](https://github.com/emberjs/ember.js/blob/master/CONTRIBUTING.md)

它始终与 ember 的主版本保持同步。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T06:26:59.420

这里有两件事出了问题。

1.  jsFiddle 实现 ember 支持的方式存在一个错误。首先它应该包括 jQuery，并且它在车把之前加载 ember。您可以通过右键单击输出帧并选择查看源来查看发生了什么。作为一种解决方法，手动添加对这些库的引用。

2.  你有一个错字。而不是`type="type/handlebars"`你应该指定`type="text/handlebars"`

[在这里](http://jsfiddle.net/zHWje/)工作小提琴

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-24T12:06:52.953

你绝对应该使用[emberjs.jsbin.com](http://emberjs.jsbin.com/)。它已经设置了所有内容。

# bing-api - 通过 Bing Search API v2 获取自动建议

> ID：15048560
> 
> 赞同：0
> 
> 时间：2013-02-24T04:10:31.877
> 
> 标签：bing-api

如何从必应搜索 API 中获取给定搜索的自动建议列表，如下面的屏幕截图所示？这似乎不在 的选择提供的结果中`[Web|Image|Video|News|SpellingSuggestion|RelatedSearch]`。或者，谷歌提供这个吗？

作为背景，Bing 可以通过 REST API 使用查询字符串进行查询，例如此 URL（请注意，它需要开发人员密钥才能进行基本身份验证）。可以更改“Web”关键字来获得其他结果，但我真的很想得到具体的建议：

[https://api.datamarket.azure.com/Bing/Search/Web?Query=%27sushi%27&$format=JSON&$top=5](https://api.datamarket.azure.com/Bing/Search/Web?Query=%27sushi%27&$format=JSON&$top=5)

[必应开发人员文档](https://skydrive.live.com/view.aspx?resid=9C9479871FBFA822!109&app=Word&authkey=!ACvyZ_MNtngQyCU)

![必应自动建议](../Images/1c4222bee4a3a88c74e89d60ad728bdd.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T02:09:15.773

有一个直接指向 Bing 建议列表的 api 路由。有趣的是，这与开发人员 API 列表是分开的。目前链接是

`api.bing.com/osjson.aspx?query=[URI encoded search term here]`

# html - 在 Windows 应用程序中另存为 HTML？

> ID：15048565
> 
> 赞同：-1
> 
> 时间：2013-02-24T04:11:24.487
> 
> 标签：html, windows, macos, text, editor

这应该很容易，但我在 Mac 上，还没有找到适用于 Windows 的好的解决方法。

这是我在 Mac 上所做的，我需要在 Windows 环境中或使用在线文本编辑器重新创建：

1.  从 PDF 复制文本
2.  在 TextEdit 中粘贴文本
3.  执行“另存为”并选择 HTML

就是这样。

Windows 上的记事本都是纯文本，因此会丢失格式。而我用过的其他文本编辑器只能保存为.htm。

最终产品需要是具有 PDF 原始格式的单个 HTML 文件。Windows 或通过网络应用程序都可以工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T04:13:14.140

如果它必须是准确的，这个应用程序似乎相关： http: [//www.addictivetips.com/windows-tips/convert-pdf-files-to-html-format-in-windows-mac-and-linux/](http://www.addictivetips.com/windows-tips/convert-pdf-files-to-html-format-in-windows-mac-and-linux/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T04:13:27.830

使用实际的文字处理器——记事本是一个非常纯文本的编辑器，而 textEdit 不是。

我会推荐 LibreOffice。

# ruby - 无法在 OSX 10.6 上加载此类文件 - mechanize.rb (LoadError)

> ID：15048572
> 
> 赞同：1
> 
> 时间：2013-02-24T04:11:58.103
> 
> 标签：ruby, rvm, mechanize-ruby

我有一个简单的脚本：

```
require 'rubygems'
require 'mechanize'
p 'Success!' 
```

当我运行脚本时，我得到：

```
/Users/.../.rvm/rubies/ruby-1.9.3-p385/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot load such file -- mechanize.rb (LoadError)
from /Users/.../.rvm/rubies/ruby-1.9.3-p385/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
from test.rb:2:in `<main>' 
```

无奈之下，我安装了 RVM 并从系统 1.8.7 更新了 ruby​​。然而，我仍然遇到与安装 rvm 之前相同的错误。我现在正在运行：

```
mute:nfg ..$ ruby -v
ruby 1.9.3p385 (2013-02-06 revision 39114) [x86_64-darwin10.8.0] 
```

irb 报告相同：

```
1.9.3p385 :001 > require 'rubygems'
 => false 
1.9.3p385 :002 > require 'mechanize'
LoadError: cannot load such file -- mechanize
from /Users/../.rvm/rubies/ruby-1.9.3-p385/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
from /Users/../.rvm/rubies/ruby-1.9.3-p385/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
from (irb):2
from /Users/../.rvm/rubies/ruby-1.9.3-p385/bin/irb:16:in `<main>' 
```

我已经从项目目录中多次使用 sudo 和不使用 sudo 重新安装了 mechanize。

我尝试手动要求 gem 及其完整路径。

```
mute:nfg ..$ ruby -l ~/.gems/gems/mechanize-2.5.1/lib/mechanize.rb
/Users/../.rvm/rubies/ruby-1.9.3-p385/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot load such file -- mime/types (LoadError)
from /Users/../.rvm/rubies/ruby-1.9.3-p385/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
from /Users/../.gems/gems/mechanize-2.5.1/lib/mechanize.rb:4:in `<main>' 
```

（我也尝试过安装 mime-types。）

RVM 很好地列出了 gem：

```
mute:nfg ..$ rvm all do gem list
*** LOCAL GEMS ***
...
libxml-ruby (2.3.3, 1.1.2)
mechanize (2.5.1)
mime-types (1.21, 1.19)
... 
```

和宝石一样：

```
mute:nfg ..$ gem list
*** LOCAL GEMS ***
...
libxml-ruby (2.3.3, 1.1.2)
mechanize (2.5.1)
mime-types (1.21, 1.19)
... 
```

奇怪的是，$GEM_PATHs`~/.rvm/gems/ruby-1.9.3-p385`和看起来大多是空的（第一个中有两个宝石，最后一个都没有）。但是，GUI JewelleryBox 确认所有三个宝石组都包含.`~/.rvm/gems/ruby-1.9.3-p385@global``~/.rvm/gems/ruby-1.9.3-p385@project``Mechanize`

编辑：这是 gem env 的结果：

```
RubyGems Environment:
  - RUBYGEMS VERSION: 1.8.25
  - RUBY VERSION: 1.9.3 (2013-02-06 patchlevel 385) [x86_64-darwin10.8.0]
  - INSTALLATION DIRECTORY: /Users/../.gems
  - RUBY EXECUTABLE: /Users/../.rvm/rubies/ruby-1.9.3-p385/bin/ruby
  - EXECUTABLE DIRECTORY: /Users/../.gems/bin
  - RUBYGEMS PLATFORMS:
    - ruby
    - x86_64-darwin-10
  - GEM PATHS:
     - /Users/../.gems
     - /Users/../.gem
     - /usr/lib/ruby/gems/1.8
     - /Library/Ruby/Gems/1.8
     - /usr/bin
  - GEM CONFIGURATION:
 - :update_sources => true
 - :verbose => true
 - :benchmark => false
 - :backtrace => false
 - :bulk_threshold => 1000
 - :sources => ["http://gems.rubyforge.org/", "http://gems.github.com"]
 - "gemhome" => "/Users/../.gems"
 - "gempath" => ["/Users/../.gem", "/usr/lib/ruby/gems/1.8", "/Library/Ruby/Gems/1.8", "/usr/bin"]
- REMOTE SOURCES:
 - http://gems.rubyforge.org/
 - http://gems.github.com 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T14:07:02.600

您的环境设置为对 gems 使用自定义路径，这会使 ruby​​gems 在您安装到不可用的地方时感到困惑`PATH`

运行`rvm get head`并仔细阅读输出，它会警告您有关`*gemrc`中断 ruby​​gems / RVM中的条目

# jboss - 从 maven 到 JBoss 的战争部署

> ID：15048573
> 
> 赞同：0
> 
> 时间：2013-02-24T04:12:00.983
> 
> 标签：jboss, maven-2, jboss7.x

我有一个具有特定属性的 pom 文件要部署到**jboss 7.10**。我在本地主机和默认端口上运行。所以我使用的是**硬部署**而不是**部署**。mojo 插件总是将战争复制到 \server\standalone\deploy\standalone\deployments\ROOT.war ，我为此做了一个解决方法。

```
 <plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>jboss-maven-plugin</artifactId>
        <version>1.5.0</version>
        <configuration>
          <jbossHome>C:\work\jboss-as-7.1.0.Final</jbossHome>
          <deploySubDir>..\..\..\standalone\deployments</deploySubDir>
          <serverName>standalone</serverName>
          <fileNames>
            <fileName>target/ROOT.war</fileName>
          </fileNames>
          <unpack>true</unpack>
        </configuration>
    </plugin> 
```

硬**取消部署需要一组与****硬部署**目标不同的配置。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T21:41:13.513

在 AS7 中使用适当的 maven 插件

[http://docs.jboss.org/jbossas/7/plugins/maven/latest/](http://docs.jboss.org/jbossas/7/plugins/maven/latest/)

# mysql - 全文搜索仅列值的前 100 个字符

> ID：15048576
> 
> 赞同：0
> 
> 时间：2013-02-24T04:13:02.580
> 
> 标签：mysql, full-text-search

如何在 MySQL 中执行仅搜索列中值的前 100 个字符的全文搜索？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T05:32:09.283

创建全文索引时可以指定前缀长度

```
ALTER TABLE  table_name ADD FULLTEXT (
    column (100)
); 
```

[http://dev.mysql.com/doc/refman/5.0/en/create-index.html](http://dev.mysql.com/doc/refman/5.0/en/create-index.html)

> 对于非二进制字符串类型，前缀长度以字符为单位，对于二进制字符串类型，前缀长度以字节为单位。也就是说，索引条目由 CHAR、VARCHAR 和 TEXT 列的每个列值的第一个长度字符以及 BINARY、VARBINARY 和 BLOB 列的每个列值的第一个长度字节组成。

# c# - 不会被释放的静态变量

> ID：15048580
> 
> 赞同：1
> 
> 时间：2013-02-24T04:13:15.910
> 
> 标签：c#, memory-management, memory-leaks, dispose, resource-management

我的班级中有一个`static StreamWriter`变量：

```
private static StreamWriter streamWriter = CreateStreamWriter(pathToFile); 
```

我没有在我的应用程序中关闭此 StreamWriter，因为它需要在应用程序运行时打开。

如果我多次启动和停止此应用程序，我会出现内存泄漏吗？还是在关闭应用程序时正确处理了对象？

此类是 ASP.NET MVC 4 和 WPF 应用程序都使用的实用程序类。

感谢大家的回复。这是我添加的代码：

在包含 StreamWriter 的类中：

```
public static void OnApplicationExit(object sender, EventArgs e)
{
    try
    {
        streamWriter.Flush();
        streamWriter.Close();
        streamWriter.Dispose();
    }
    catch { }
}

public static void OnApplicationExit()
{
    try
    {
        streamWriter.Flush();
        streamWriter.Close();
        streamWriter.Dispose();
    }
    catch { }
} 
```

在 ASP.NET MVC Global.Asax 中：

```
 protected void Application_End()
    {
        Utilities.MyClass.OnApplicationExit();
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T15:22:12.807

> 如果我多次启动和停止此应用程序，我会出现内存泄漏吗？

不会。当进程结束时，与进程关联的所有资源都会自动返回给操作系统。这是 Windows 的一个功能；所有进程都是如此，而不仅仅是托管代码进程。

正如其他人指出的那样，您可能会丢失*数据*，但不会*泄漏内核对象*。

> 关闭应用程序后对象是否正确处理？

不必要。如果应用程序因“快速失败”而终止，那么显然没有终结器运行，因为*没有任何东西*运行。如果应用程序被未处理的异常终止，那么终结器是否运行是实现定义的。

此外，正如 Raymond Chen 曾经指出的那样，当您知道进程正在关闭时运行终结器就像在拆除建筑物之前扫地一样。这是浪费时间和精力。

简而言之，您不应该依赖运行终结器来确保程序的正确性。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-24T04:20:01.520

`StreamWriter`不保证在应用程序关闭时被释放。有时会，但在某些情况下这是不可能的。

没有内存泄漏，因为它使用托管内存。当应用程序关闭时，整个堆被删除。

这也不是资源泄漏，因为打开的文件句柄将在应用程序关闭时关闭。

但是，`StreamWriter`如果没有处理，则有一个不会刷新的缓冲区。这意味着您使用 writer 编写的最后内容可能会从文件中丢失。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-24T04:22:38.803

Streamwriter 实现 IDisposable。所以如果你不调用它的 Dispose 方法，你就不能保证你正确地处理了它的资源。

在我看来，您有两个基本选择：

1.  保留 StreamWriter 的静态实例，但在应用程序关闭时捕获，然后调用 Streamwriter.Dispose() 以释放资源。我不知道您的应用程序是 WPF 还是 Windows 窗体应用程序，但如果您可以找到在应用程序关闭时触发的事件，您可以在那里调用 dispose。我认为[Application.ApplicationExit](http://msdn.microsoft.com/en-us/library/system.windows.forms.application.applicationexit.aspx)可能是您需要的。

2.  将 StreamWriter 转换为实例变量，使用 using 语句对其进行实例化，执行 IO，然后立即处理它：

    ```
    using(var writer = new StreamWriter())
    {
        //do your IO here
    } 
    ```

**编辑：**您指出您的应用程序是 ASP.Net 应用程序。对于 ASP.Net 应用程序，您可以在 global.asax 的 Application_Start 事件中创建静态变量，并在 global.asax 的 Application_End 事件中处置静态变量。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-24T04:22:02.737

当您说“多次启动和停止此应用程序”时，您的意思是该进程退出并且您每次都启动一个新进程吗？当一个进程退出时，它的所有内存都会被操作系统回收，所以实际上没有“内存泄漏”。

话虽如此，我确实觉得在关机时清理资源是个好习惯；您可能决定确实要在同一进程中重新启动。修复泄漏比一开始就没有泄漏要困难得多。

假设您必须在关闭时执行其他操作，例如刷新写入器。然后，您需要某种在关机时启动的钩子。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-24T04:14:13.297

使用 using 语句，这是最好的方法。

使用 (var r = new StreamWriter(,,)) {

}

# java - 在类中定义 C++ 方法，如 Java

> ID：15048584
> 
> 赞同：3
> 
> 时间：2013-02-24T04:14:10.647
> 
> 标签：java, c++, class, class-design

我是 Java 程序员，我是 C++ 编程的新手。在 java 中，我们必须将所有类编写在单独的文件中，并且所有方法的定义都在类中。但是现在在 C++ 中，我想知道为什么 C++ 允许程序员在类之外编写方法的定义。有没有办法编写像 Java 这样的 C++ 程序？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-24T04:17:42.973

如果您愿意，可以在头文件中为您的类编写代码。这使得 C++ 中的头文件类似于 java 中的 java 文件。

## 我的类.h

```
#ifndef _MYCLASS_H_
#define _MYCLASS_H_

#include "OtherClass.h"

class MyClass {
public:
    MyClass() { _otherClass=0; }

    void set(OtherClass* oc) { _otherClass = oc; );
    OtherClass* get(void) { return _otherClass; };

private:
   OtherClass* _otherClass;
};
#endif 
```

但是您也可以在 C++ 中将标头和代码拆分为两个文件。这允许您分离方法的定义和声明，并减少编译时头文件的依赖性。

请注意，在上面的示例中，任何包含 MyClass.h 的类都将自动包含 OtherClass.h，无论它是否需要，对 OtherClass.h 的更改将需要重新编译 MyClass.h 的所有客户端。

但是在下面的分离示例中，有一个 OtherClass.h 的前向声明（这是可能的，因为它仅用作指针），而实际的 OtherClass.h 仅包含在 cpp 文件中。现在对 OtherClass.h 的更改只会强制重新编译 MyClass.cpp，而不是 MyClass.h 的客户端（除非它们还包括 OtherClass.h），

这也意味着您可以对 MyClass::get() 进行更改，您只需要重新编译 MyClass.cpp，而不是 MyClass 的所有客户端

## 我的类.h

```
#ifndef _MYCLASS_H_
#define _MYCLASS_H_

class OtherClass;

class MyClass {
public:
    MyClass();

    void set(OtherClass* oc);
    OtherClass* get(void);

private:
   OtherClass* _otherClass;
};
#endif 
```

## 我的类.cpp

```
#include "MyClass.h"
#include "OtherClass.h"

MyClass::MyClass() : _otherClass(0) {}

MyClass::set(OtherClass* oc) { _otherClass=oc; }

OtherClass* MyClass::get() { return _otherClass; }; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-24T04:18:42.520

> 但是现在在 C++ 中，我想知道为什么 C++ 允许程序员在类之外编写方法的定义。

两个主要原因是编译时间和将实现与接口分离。[这在 C++ 中为什么有头文件和 cpp 文件](https://stackoverflow.com/q/333889/78845)中有更详细的介绍？

> 有没有办法编写像 Java 这样的 C++ 程序？

您*可以*在头文件中编写整个实现，但不*应该*. *使用任何*语言编写代码时，您都应该遵循该语言的习惯用法，因为这样更易于阅读和维护。

# xcode - 尝试使用 ldid 时权限被拒绝

> ID：15048588
> 
> 赞同：0
> 
> 时间：2013-02-24T04:15:07.087
> 
> 标签：xcode, compilation, entity, code-signing, cydia

我正在尝试使用 ldid 为 cydia 签署应用程序。为了签署armv7，我从[https://code.google.com/p/networkpx/downloads/detail?name=ldid获得了 ldid。](https://code.google.com/p/networkpx/downloads/detail?name=ldid)尝试使用它时，我一直被拒绝权限。我以 root 身份登录，使用 sudo，并实际将文件拖入以确保它获得了正确的文件。我应该更改文件的权限吗？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T04:16:17.133

这就是问题所在。我用过`chmod -R 777`，现在可以了

# matlab - 如何在 MATLAB 中读取 MAT 文件的内容

> ID：15048590
> 
> 赞同：3
> 
> 时间：2013-02-24T04:15:41.783
> 
> 标签：matlab

我有一个 .mat 文件，其中包含训练数据，即近 1000 个图像样本的直方图。我想分析该程序以绘制其他一些图像的直方图，但是如果我在 mat-lab 中打开该文件，我会得到一些奇怪的语言代码..!! 如何阅读内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T04:34:08.047

假设`histData.mat`是文件名。然后将该文件拖到 MATLAB 命令窗口或写入`load histData.mat`，前提是 MATLAB 目录与 MAT 文件的目录相同。

这将加载 1000 个直方图样本的数据，然后您可以使用`plot`命令。

# java - 如何连接两个命令行参数？

> ID：15048592
> 
> 赞同：1
> 
> 时间：2013-02-24T04:15:47.540
> 
> 标签：java, command-line, arguments, apache-commons, args

我需要连接两个命令行参数。用户应该输入`-input`“filename.txt”和/或`-output`“filename.txt”，但我似乎无法将`-input`或`-output`部分与文件名连接起来。

因此，例如，用户可以输入以下任何内容：

```
java classname
java classname -input filename.txt
java classname -output filename.txt
java classname -input filename.txt -output filename.txt
java classname -output filename.txt -input filename.txt 
```

我试过这个：

```
 for(int i = 0; i < args.length; i++){
        if(args[i].equals("-input")){
            input = args[i + 1];
        }
        else{
            //input from terminal
        }

        if(args[i].equals("-output")){
            output = args[i + 1];
        }
        else{
            //output to terminal
        } 
```

但它不起作用，而且看起来不优雅。我一直在研究 Apache Commons CLI，但我似乎无法弄清楚它是如何工作的以及是否有适用的功能。使用 Apache 的东西或其他方式有什么方法可以将 -input 连接到 filename.txt？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T04:26:31.143

这应该工作

```
public static void main(String[] args) {
    String input = findArg("input", args);
    String output = findArg("output", args);
}

static String findArg(String name, String[] args) {
    for (int i = 0; i < args.length; i += 2) {
        if (args[i].equals("-" + name)) {
            return args[i + 1];
        }
    }
    return null;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T04:27:28.627

你的逻辑有缺陷；这就是为什么它不起作用。如果我使用以下参数运行程序，`java classname -input input.txt -output output.txt`那么您的代码将从终端获取输入并输出到 output.txt。

更新 - 实际上它会因 NullPointerException 而崩溃

# jquery - 在可编辑的 div 中拖放一个元素并在移动设备上工作

> ID：15048595
> 
> 赞同：1
> 
> 时间：2013-02-24T04:16:25.450
> 
> 标签：jquery, html, drag-and-drop, contenteditable

是否有人对如何将元素拖入内容可编辑的 div 并在移动设备上工作有任何想法？我尝试了许多不同的方法，但似乎没有一个可以在移动设备上运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T04:35:06.093

如果您也愿意使用[jQuery UI draggable](http://jqueryui.com/draggable/)，[Touch Punch](http://touchpunch.furf.com/)可以帮助您在移动设备上运行。

# debugging - Clojure、emacs、ritz-swank：`Mx slime-connect` 给出错误消息

> ID：15048596
> 
> 赞同：1
> 
> 时间：2013-02-24T04:16:31.890
> 
> 标签：debugging, emacs, clojure, swank, pallet

我花了一个下午试图让 ritz-swank 包与 emacs 和 Clojure 一起工作。（谷歌搜索错误消息等等并没有提供有用的线索。）我希望有人能给我一些指导，让我启动并运行。

错误是`Symbol's value as variable is void: slime-ritz`。

根据[http://www.delorie.com/gnu/docs/elisp-manual-21/elisp_142.html](http://www.delorie.com/gnu/docs/elisp-manual-21/elisp_142.html)：

“如果你从来没有给一个符号任何值作为全局变量，我们说那个符号的全局值是无效的。换句话说，这个符号的值单元格中没有任何 Lisp 对象。如果你尝试评估这个符号，你得到一个 void-variable 错误而不是一个值.... 一个 void 变量没有任何值。”

我尝试`slime-ritz`使用 Emacs 'describe-variable' (Ch v) 找到 的值，但它没有返回任何内容。对“ritz”进行适当的搜索没有结果，但搜索“slime”返回了一堆函数（所以我假设`slime`包存在）。

**我的安装过程**

[我按照https://github.com/pallet/ritz/tree/develop/swank（pallet/ritz](https://github.com/pallet/ritz/tree/develop/swank)项目页面）的安装部分中的说明进行操作，从头开始两次以确保我做对了。这是我最后一次尝试的顺序：

1.  从一个既不包含 Emacs 也不包含`~/.emacs.d`目录的系统开始。

2.  安装 Emacs 24.2，最新可用的 Mac OS X 版本（来自[http://emacsformacosx.com/](http://emacsformacosx.com/)）

3.  通过`curl`命令安装 Emacs Prelude（参见[http://batsov.com/prelude/](http://batsov.com/prelude/)）

4.  下载（如项目页面所说）的特定版本`slime`和`slime-ritz`

5.  使用手动安装它们`M-x package-install-file`

6.  退出并重新启动 emacs，以防万一....

7.  按照页面说明安装了 lein-ritz 并成功获得：

    Greggs-Mac-Pro:combolock gr$ lein ritz user=> Swank 服务器监听本地端口 51521

8.  `M-x slime-connect`（应该建立从 Emacs 到 Swank 服务器的连接）`Symbol's value as variable is void: slime-ritz`在 Emacs 迷你缓冲区中返回错误。

**诊断数据**

运行`M-x package-activated-list`产生了以下已加载包的列表：

`(ace-jump-mode ack-and-a-half elisp-slime-nav exec-path-from-shell expand-region flycheck gist gh guru-mode helm-projectile helm logito magithub magit melpa paredit pcache projectile dash rainbow-delimiters rainbow-mode s slime slime-ritz solarized-theme undo-tree volatile-highlights yasnippet zenburn-theme)`

运行`M-x package-list-packages`列出了已安装的以下软件包：

```
ace-jump-mode      20121104....
ack-and-a-half     20130204....
dash               20130223....
elisp-slime-nav    20130127....
exec-path-from-... 20121108.945
expand-region      20130223....
flycheck           20130223....
gh                 20121231.208
gist               20121231.212
guru-mode          20121016....
helm               20130223....
helm-projectile    20130131....
logito             20120225....
magit              20130222....
magithub           20121130....
melpa              20120202....
paredit            20110508....
pcache             20120408....
projectile         20130220....
rainbow-delimiters 20120428.45 
rainbow-mode       0.6         
s                  20130216....
slime              20101113.1   <-- manually installed, from sources
slime-ritz         0.6.0        <--  specified by pallet/ritz page
solarized-theme    20130215....
undo-tree          20130119.926
volatile-highli... 20120215.9  
yasnippet          20130218....
zenburn-theme      20130215.... 
```

我注意到它`clojure-mode`不存在，所以我添加了它，但是上面的第 8 步给出了相同的错误消息。

**一些暗中提问**

1）我需要安装`pallet`吗？

2）我是否需要安装该`ritz`系列的任何其他软件包（[https://github.com/pallet/ritz](https://github.com/pallet/ritz)）？

我真的很期待使用 ritz-swank——它看起来真的很强大！（感谢 Hugo Duncan 的辛勤工作！）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T06:12:10.013

Emacs Predule 提供 nrepl.el 而不是 swank-clojure。您需要安装 nrepl-ritz 而不是 swank-ritz。Swank-clojure 是一个死项目，在 clojure-mode 2.0.0（Predule 附带的那个）中不再支持。

# scala - 如何在Scala中通过全名获取对对象的引用？

> ID：15048600
> 
> 赞同：3
> 
> 时间：2013-02-24T04:17:02.207
> 
> 标签：scala, reflection

假设我们有

```
package MyApp.foo

object Bar {
  def apply(x: Int) = x + 1
} 
```

如何使用其全名（“MyApp.foo.Bar”）字符串通过此对象增加值？

这个功能帮助我在 C# 中有效地解决了一项任务，而我在 Scala 中很怀念它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T05:40:08.820

我假设你想要反思。Java 反射是 Scala 2.9.x 之前唯一可用的反射，Scala 反射是从 2.10.0 开始可用的。我将只解释后者——查找前者的 Java 反射。

这相当长，但您可以在其他地方查找 Scala 反射，或阅读[此处的文档](http://docs.scala-lang.org/overviews/reflection/overview.html)。或者，使用[SMirror](https://github.com/fwbrasil/smirror)，它是 Scala 反射的包装器，提供更高级别。

```
import scala.reflect.runtime.universe._
val m = runtimeMirror(getClass.getClassLoader)
val barSymbol = m staticModule "MyApp.foo.Bar"
val barType = barSymbol.typeSignature
val applySymbol = (barType declaration TermName("apply")).asMethod
val barMirror = m reflectModule barSymbol
val barInstance = barMirror.instance
val barInstanceMirror = m reflect barMirror.instance
val applyMirror = barInstanceMirror reflectMethod applySymbol
def increase(n: Int) = applyMirror.apply(n) match {
  case x: Int => Some(x)
  case _      => None
} 
```

# netbeans - 在 NetBeans 7.3 中使用文件资源管理器创建文件夹

> ID：15048603
> 
> 赞同：1
> 
> 时间：2013-02-24T04:17:41.757
> 
> 标签：netbeans, directory

我是 NetBeans 的新手，无法理解项目浏览器。我在一个拥有现有资源的 HTML 项目中，我可以做的一切都很好。除了我不知道如何使用文件资源管理器创建文件夹。

![没有文件夹按钮？](../Images/b81446b14511156a31586ca49f5f0cb7.png)

在我看来应该有一个文件夹按钮，但没有，我无法弄清楚。

**编辑：**
我*确实*发现，如果我复制我在其他地方创建的文件夹，然后按 Ctrl+V（粘贴）它会将其放入其中，但我不想这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T04:38:38.047

我很确定这不是 SO 的问题。但是，既然您已经问过了，请转到“其他”。将打开一个窗口。从那里转到“其他”（再次）然后选择“文件夹”......应该这样做。

# google-analytics - 谷歌分析——遵循单一用户路径？

> ID：15048606
> 
> 赞同：2
> 
> 时间：2013-02-24T04:17:47.350
> 
> 标签：google-analytics

如何使用 Google Analytics 跟踪单个用户通过网页的路径？我对那个用户是谁不感兴趣，只对用户走了什么路径感兴趣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T04:24:10.183

当用户访问网站时，您可以为[访问者级自定义变量](https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingCustomVariables)分配一个唯一值。然后，您可以根据要检查的值进行过滤/细分，以按个人缩小路径。不过，这是否违反谷歌的条款尚不完全清楚。从技术上讲，您不是在跟踪个人，您只是在关联各种匿名用户的行为。

# vb.net - 通过 GSM 调制解调器向手机发送短信

> ID：15048609
> 
> 赞同：2
> 
> 时间：2013-02-24T04:18:16.893
> 
> 标签：vb.net, sms, gsm, modem

使用 VB.NET 我需要使用 GSM 调制解调器向手机发送短信。

目前我有以下代码：

```
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    If serialport.IsOpen Then
        serialport.Close()
    End If
    Try
        With serialport
            .PortName = ComboBox1.Text
            .BaudRate = 96000
            .Parity = Parity.None
            .DataBits = 8
            .StopBits = StopBits.One
            .Handshake = Handshake.RequestToSend
            .DtrEnable = True
            .RtsEnable = True
            .NewLine = vbCrLf
        End With
        serialport.Open()
    Catch ex As Exception
    End Try
    serialport.WriteLine("AT+CMGF=1" & vbCr)
    System.Threading.Thread.Sleep(200)
    serialport.WriteLine("AT+CMGS=" & Chr(34) & "destination" & Chr(34) & vbCr)
    System.Threading.Thread.Sleep(200)
    serialport.WriteLine("test message" & vbCrLf & Chr(26))
    System.Threading.Thread.Sleep(200)
End Sub 
```

问题是，这段代码似乎不起作用。

你能检查一下这是否正确。或者只是给我一些可以帮助我的线程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-04-07T03:10:15.833

此代码适用于我，可以向您的手机发送消息：

```
{
    SerialPort1.WriteLine("AT")
    System.Threading.Thread.Sleep(300)
    SerialPort1.WriteLine("AT+CMGF=1" & vbCrLf)
    System.Threading.Thread.Sleep(300)
    SerialPort1.WriteLine("AT+CSCA=" & Chr(34) & MessageCenter & Chr(34) & vbCrLf)
    System.Threading.Thread.Sleep(300)
    SerialPort1.WriteLine("AT+CMGS=" & Chr(34) & PhoneNumber & Chr(34) & vbCrLf)
    System.Threading.Thread.Sleep(300)
    SerialPort1.WriteLine(Message & Chr(26))
    MsgBox("Send")
} 
```

> 笔记; 我尝试使用此代码并从我的手机收到这样的消息；“?????#$??#????”。

# c - 编译c代码的奇怪错误

> ID：15048611
> 
> 赞同：-1
> 
> 时间：2013-02-24T04:18:23.513
> 
> 标签：c, gcc

我有下面我正在尝试构建的代码

```
#include stdio.h
#include stdlib.h
#include signal.h
#include wiringPi.h
#include softPwm.h

void control_event(int sig);
int HARD_PWM_PIN=1; Hardware PWM Pin(GPIO18-12)
int SOFT_PWM_PIN=0; Software PWM Pin(GPIO0-11)
int DELAY_MS=10;
int main(void)
{
  (void)signal(SIGINT,control_event);
  (void)signal (SIGQUIT,control_event);
  printf(Hardware and software based PWM test on LEDn);
  if(getuid()!=0) wiringPi requires root privileges
  {
    printf(ErrorwiringPi must be run as root.n);
    return 1;
  }
  if(wiringPiSetup()==-1)
  {
    printf(ErrorwiringPi setup failed.n);
    return 1;
  }
  pinMode(HARD_PWM_PIN,PWM_OUTPUT); setup hardware pwm
  softPwmCreate(SOFT_PWM_PIN,0,100); setup software pwm pin
  int up;
  int down;
  while(1)
  {
    for(up=1;up=5;down--)
    {
      pwmWrite(HARD_PWM_PIN,down);
      softPwmWrite(SOFT_PWM_PIN,down);
      delay(DELAY_MS2);
    }
    delay(DELAY_MS5);
  }
}
void control_event(int sig)
{
  printf(bbExiting...n);
  pwmWrite(HARD_PWM_PIN,0);
  softPwmWrite(SOFT_PWM_PIN,0);
  delay(100); wait a little for the pwm to finish write
  exit(0);
} 
```

但是我不断收到以下错误，这只是其中的一部分，但它们与奇数符号和数字几乎相同。

```
test1.c:20:1: error: stray â\302â in program
test1.c:20:1: error: stray â\240â in program
test1.c:21:1: error: stray â\302â in program
test1.c:21:1: error: stray â\240â in program
test1.c:22:1: error: stray â\302â in program
test1.c:22:1: error: stray â\240â in program
test1.c:23:1: error: stray â\302â in program
test1.c:23:1: error: stray â\240â in program
test1.c:23:1: error: stray â\302â in program
test1.c:23:1: error: stray â\240â in program
test1.c:24:1: error: stray â\302â in program
test1.c:24:1: error: stray â\240â in program
test1.c:24:1: error: stray â\302â in program
test1.c:24:1: error: stray â\240â in program
test1.c:25:1: error: stray â\302â in program
test1.c:25:1: error: stray â\240â in program
test1.c:26:1: error: stray â\302â in program
test1.c:26:1: error: stray â\240â in program
test1.c:26:38: error: unknown type name âsetupâ
test1.c:26:53: error: expected â=â, â,â, â;â, âasmâ or â__attribute__â before âpwmâ 
```

有什么问题？我从中获取此代码的地方是[这里](http://www.rpiblog.com/2012/11/pwm-on-raspberry-pi.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T04:29:23.853

你有一些语法错误 -

*   除此之外，您的编辑器包含 unicode 字符而不是 gcc 预期的 ASCII。- "作为后向双引号或前向双引号而不是 ASCII 34 的可能示例。

当您使用非西方字符集或扩展 unicode 作为默认编码时，您必须小心您的编辑器设置。

这也是为什么 " 字符不会出现在您的帖子中的原因。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-24T04:29:57.077

奇数符号和数字是因为文件中的某些空格实际上不是空格。复制和粘贴后，查看链接中文件中的某些行：

```
'void control_event(int sig);\n'
'int HARD_PWM_PIN=1; //Hardware PWM Pin(GPIO18-12)\n'
'int SOFT_PWM_PIN=0; //Software PWM Pin(GPIO0-11)\n'
'int DELAY_MS=10;\n'
'int main(void)\n'
'{\n'
'\xc2\xa0 (void)signal(SIGINT,control_event);\n'
'\xc2\xa0 (void)signal (SIGQUIT,control_event);\n'
'\xc2\xa0 printf("Hardware and software based PWM test on LED\\n");\n'
'\xc2\xa0 if(getuid()!=0) //wiringPi requires root privileges\n' 
```

这些`\xc2\xa0`s 是不间断的空格字符 ( `&nbsp;`)，或`302/240`八进制。

另请注意，您似乎`//`在传输过程中丢失了几个注释标记 ( )，这会导致其自身的不同问题，因为编译器试图将注释解释为代码。

# android - 具有复杂布局的自定义 AdapterView

> ID：15048612
> 
> 赞同：0
> 
> 时间：2013-02-24T04:18:32.767
> 
> 标签：android, android-layout, android-view, android-adapterview

我正在尝试制作一个可滚动的列表。该列表将填充各种大小和不同位置（x，y）的自定义视图（列表项）。除了实际的视图外，在主布局周围还会有一些侧视图，子视图将放置在这些位置。有点像页眉或页脚，但围绕着它。列表的总高度是固定的。
现在我只是在活动 xml 布局中定义复杂的布局，并在它所在的活动中拥有逻辑。我希望能够通过适配器填充它（因为我的视图数据来自数据库）并将其封装在自定义组件中以供重用。

**我要封装的布局。这是我目前使用的布局**

```
RelativeLayout (fixed height h)
-->LinearLayout (side views around the main framelayout)
------ .......
------ (extra views)
------ .......
-->FrameLayout (to be populated dynamically)
------ .......
------ (dynamicly added child views)
------ ....... 
```

**如何创建支持这些东西的自定义 AdapterView？**

PS 除了网络上的介绍性教程，我还没有做过复杂的自定义组件

# c# - 从 C# 调用非托管 (C++) 函数时出现 PInvoke 错误

> ID：15048615
> 
> 赞同：2
> 
> 时间：2013-02-24T04:18:46.087
> 
> 标签：c#, c++, dll, pinvoke, marshalling

我有一个我已经编写和测试过的未管理的 C++ dll。在未托管的控制台应用程序中构建和运行时，未托管的代码可以正常工作。函数声明如下所示。

```
#ifndef IMPORT_MYLIB
#    define MYLIB_API __declspec(dllexport)
#else
#    define MYLIB_API __declspec(dllimport)
#endif

namespace gsod_data_parsing {
extern "C"
{
  MYLIB_API int parse_raw_gsod_file_nocb(
    const char *path,
    int temp_threshold
  );
}
} 
```

我正在尝试从托管应用程序中调用它。我在我的 C# 文件中声明该函数，如下所示：

```
 [DllImport("GSODDLL.dll")]
 public static extern int parse_raw_gsod_file_nocb(
   [MarshalAs(UnmanagedType.LPStr)] string path,
   int temp_threshold
 ); 
```

然后在几个并行任务上执行这些函数，如下所示：

```
// Start a task - this runs on the background thread...
task1 = Task.Factory.StartNew(() => 
{
  int t1 = parse_raw_gsod_file_nocb(filePaths[i], this._frostTemp);
  return (t1 == 0);
}, this._tokenSource.Token); 
```

一开始它似乎运行良好，但后来（我相信当函数完成执行时）我收到以下错误。

> 调用 PInvoke 函数 'Database Creator!Database_Creator.Form1::parse_raw_gsod_file_nocb' 使堆栈失衡。这可能是因为托管 PInvoke 签名与非托管目标签名不匹配。检查 PInvoke 签名的调用约定和参数是否与目标非托管签名匹配。

[我在这里](https://stackoverflow.com/questions/2303533/a-call-to-pinvoke-function-has-unbalanced-the-stack-when-including-a-c-dll-into)看到了一个类似的问题，但我不太明白接受的答案。

有人有想法么？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T04:18:46.087

所以事实证明我的问题是由于调用约定不匹配造成的。根据本[文档](http://msdn.microsoft.com/en-us/library/zkwh89ks%28v=vs.100%29.aspx)，Windows 中 C/C++ 程序的默认调用约定是 Cdecl。此外，根据本[文档](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.dllimportattribute.callingconvention.aspx)，PInvoke 的默认调用约定是 StdCall。我最初没有指定任何调用约定，所以它默认为 StdCall。由于这些约定指定了在函数调用后如何清理堆栈，因此在函数执行结束时抛出错误是有道理的。

将我的 PInvoke 声明更改为此解决了我的问题：

```
[DllImport("GSODDLL.dll", CallingConvention = CallingConvention.Cdecl)]
public static extern int parse_raw_gsod_file_nocb(
  [MarshalAs(UnmanagedType.LPStr)] string path,
  int temp_threshold
); 
```

# c - 用通用风格在 C 中实现堆栈

> ID：15048618
> 
> 赞同：1
> 
> 时间：2013-02-24T04:18:50.180
> 
> 标签：c, generics

文件 stack.h

```
typedef struct
{
    void *elems;
    int elem_size;
    int log_len;
    int alloc_len;
    void (*free_fn)(void *);
} stack;

void stack_new(stack *s, int elem_size, void (*free_fn)(void *));
void stack_dispose(stack *s);
void stack_push(stack *s, void *value);
void stack_pop(stack *s, void *address); 
```

和实现文件stack.c

```
#include <string.h>
#include <stdlib.h>
#include <stdio.h>
#define assert(condition) if(!condition) printf("assert fail\n");exit(0) 

void strfree(void *elem);

int main()
{
    stack s;
    int i;
    char *copy, *top;
    const char *friends[] = {"joe", "castiel", "lily"};
    stack_new(&s, sizeof(char *), strfree);
    for(i=0; i<3; i++)
    {
        copy = strdup(friends[i]);
        stack_push(&s, &cp);
    }

    for(i=0; i<=3; i++)
    {
        stack_pop(&s, &top);
        printf("%s\n", top);
    }
    stack_dispose(&s);
    return 1;
}

void strfree(void *elem)
{
    free(*(char **)elem);
}

void stack_new(stack *s, int elem_size, void (*free_fn)(void *))
{
    assert(elem_size > 0);
    s->alloc_len = 4;
    s->free_fn = free_fn;
    s->log_len = 0;
    s->elem_size = elem_size;
    s->elems = malloc(s->alloc_len * s->elem_size);
    assert(s->elems != NULL);
}

void stack_dispose(stack *s)
{
    int i;
    if(s->free_fn)
    {
        for(i=0; i<s->log_len; i++)
        {
            s->free_fn((char *)s->elems + i * s->elem_size);
        }
    }
    free(s->elems);
}

void stack_push(stack *s, void *v)
{
    if(s->log_len == s->alloc_len)
    {
        s->alloc_len *= 2;
        s->elems = realloc(s->elems, s->alloc_len*s->elem_size);
        assert(s->elems != NULL);
    }
    memcpy((char *)s->elems+s->log_len*s->elem_size, v, s->elem_size);
    s->log_len++;
}

void stack_pop(stack *s, void *address)
{
    assert(s->log_len > 0);
    void *source =  (char *)s->elems + (s->log_len - 1) * s->elem_size;
    memcpy(address, source, s->elem_size);
    s->log_len--;
} 
```

所以它编译但它不运行。

1.  它有一个关于指针和整数之间比较的警告，它来自代码

    ```
    assert(s->elems != NULL); 
    ```

2.  它在某处坏了，它不会打印出这里定义的三个名称

    ```
    const char *friends[] = {"joe", "castiel", "lily"}; 
    ```

我知道代码有点太多了，但我真的很想得到一些帮助，我无能为力。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T04:21:15.703

一个问题是你的`assert`宏：

```
#define assert(condition) if(!condition) printf("assert fail\n");exit(0) 
```

`exit(0);`无论条件是真还是假，都会执行（再次查看生成的代码）。如果您想要断言，请使用标准`#include <assert.h>`.

您发现的第一个问题是：

```
assert(s->elems != NULL); 
```

给定定义，这相当于：

```
if (!s->elems != NULL)
    printf("assert fail\n");
exit(0); 
```

是`!s->elems`一个整数，0 或 1，与空指针常量进行比较。因此发出警告。编写宏时，将参数括在括号中。至少：

```
#define assert(condition) if(!(condition)){printf("assert fail\n");exit(1);} 
```

这仍然不是一个好的宏，但至少它会摆脱第一个编译错误，并且在`stack_new()`调用它时不会因为它被调用而退出。请注意，当出现问题时，通常以非零状态退出 - 以零退出表示成功。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T04:22:27.783

使用 GDB 在调试器中运行您的代码，以逐行查看它在做什么。谷歌“gdb 备忘单”开始使用`-g`.

# javascript - jQuery 动画的几个问题

> ID：15048621
> 
> 赞同：0
> 
> 时间：2013-02-24T04:19:35.937
> 
> 标签：javascript, jquery, jquery-animate

我正在使用 jQuery Animate 在图像上创建 Pan-Zoom 效果。总体而言，它运行良好，但有两个例外。

首先它开始动画并且似乎撞到了墙上然后继续放大。有没有办法防止这种情况并使运动成为一个平滑的运动。

其次是动作有点生涩，尤其是在最后。有没有办法解决这个问题？如果我应该尝试添加某种形式的缓动，我会在页面上使用缓动。（这是在 Firefox 和 Chrome 中测试的，两者都很生涩。）

这是动画的[jsFiddle](http://jsfiddle.net/Lynda333/fsBbr/1/)。

注意：我使用的是 jQuery 1.8.3，我可以使用 CSS，但坚持使用 jQuery 以实现跨浏览器兼容性。（不幸的是，我的大多数用户都在使用 IE。）

***HTML***

```
<div style="width:1140px; height:500px; overflow:hidden; text-align:center;">
    <img id="pan-zoom" style="width:900px; height:600px; position:relative; top:-80px; left:0;" alt="European Bee-eaters" src="http://upload.wikimedia.org/wikipedia/commons/9/96/Pair_of_Merops_apiaster_feeding.jpg" />
</div> 
```

***JS***

```
$(window).load(function() {
    $('#pan-zoom').animate({
        width: '2141px',
        height: '1428px',
        top: '-200px',
        left: '-405px'
    }, 8000, function() {
            // Fade In Hidden DIV
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T04:33:22.227

改变

```
<div style="width:1140px; ... 
```

到

```
<div style="width:900px; ... 
```

这个想法是，在放大之前，图像被缩放以适合父宽度，这是您要删除的效果。

更新[了 fidde](http://jsfiddle.net/fsBbr/3/)。

* * *

编辑：或绝对位置，如评论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T04:44:35.603

如果你加快动画速度，它会显得更流畅。动画越慢，它的粗糙度就越明显。

将缓动改为线性似乎也有帮助。默认缓动（摆动）结束时的缓慢使动画的粗糙度非常明显。下面的代码使用线性缓动并且速度提高了一倍（以及将外部宽度更改为 900px，正如@loxxy 建议的那样），并且看起来相当不错。

```
$(window).load(function() {
    $('#pan-zoom').animate({
        width: '2141px',
        height: '1428px',
        top: '-200px',
        left: '-405px'
    }, 4000, 'linear', function() {
        // Fade In Hidden DIV
    });
}); 
```

只有通过 WebGL 等硬件支持才能使大型动画既流畅又缓慢。除此之外，在平滑和缓慢之间进行选择，以更重要的为准。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T04:40:00.473

如果您使用 css 转换属性的缩放功能，这两个问题都将得到解决。我认为（自从我使用 jquery 并且没有跟进以来已经很长时间了）jquery.animate 函数与这些不兼容。如果您想继续使用 jquery，您应该使用插件或编写一个插件。

在您的小提琴中，您使用 left、top、width 和 height 属性。这在 webkit 中尤其生涩。

Jquery 转换插件顶部 google 结果： [http ://ricostacruz.com/jquery.transit/](http://ricostacruz.com/jquery.transit/)

# ruby - 为什么 SecureRandom#hex 方法将其长度参数 n 加倍？

> ID：15048622
> 
> 赞同：4
> 
> 时间：2013-02-24T04:19:36.647
> 
> 标签：ruby

尝试在 ruby​​ on rails 应用程序中为密码生成盐时，我遇到了 SecureRandom#hex 方法。为什么它将长度参数加倍/坚持返回的字符串长度是偶数？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-24T04:28:49.687

该方法生成一个*n*字节的随机序列（参见`random_bytes`方法），然后返回该序列的 base-16 表示（每个字节有两个十六进制数字）。

这也是`base64`and`urlsafe_base64`方法返回长度大约为 4 *n* /3 的字符串的原因：它们生成*n*个字节，然后执行 Base-64 编码。

# python - Python tkinter Canvas 动态 Create.Line

> ID：15048624
> 
> 赞同：2
> 
> 时间：2013-02-24T04:19:42.123
> 
> 标签：python, user-interface, canvas, tkinter

我想要做的是让用户单击画布上的某个位置，然后单击其他位置并在两点之间绘制一条直线。我是 TKinter 的新手，经过一番谷歌搜索和在这里搜索后，我很难找到一个可靠的答案。

我一直在考虑它的方式，应该有一个 onclick 事件，它在画布上传递鼠标坐标，然后是一个 onrelease 事件，它在画布上传递这些坐标，从而在它们之间创建一条线。这条线必须是一个对象，然后我可以在某个时候通过另一个按钮将其删除，但这是一个单独的问题。

任何帮助将不胜感激，甚至任何可能有帮助的文章/教程的链接

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-24T04:59:59.240

您唯一需要做的就是绑定`"<Button-1>"`到`"<ButtonRelease-1>"`画布：

```
from Tkinter import Tk, Canvas

start = None

def onclick_handler(event):
    global start
    start = (event.x, event.y)

def onrelease_handler(event):
    global start
    if start is not None:
        x = start[0]
        y = start[1]
        event.widget.create_line(x, y, event.x, event.y)
        start = None

master = Tk()
canvas = Canvas(master, width=200, height=200)
canvas.bind("<Button-1>", onclick_handler)
canvas.bind("<ButtonRelease-1>", onrelease_handler)
canvas.pack()
master.mainloop() 
```

我根本不喜欢使用全局变量，将所有小部件和相关函数包装在一个类中会更干净。但是，作为一个例子，我认为这已经足够清楚了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T05:11:05.410

对我来说看起来很简单。

只需在此处查看有关 Canvas 的文档：http: [//effbot.org/tkinterbook/canvas.htm](http://effbot.org/tkinterbook/canvas.htm)

关于这里的事件：http: [//effbot.org/tkinterbook/tkinter-events-and-bindings.htm](http://effbot.org/tkinterbook/tkinter-events-and-bindings.htm)

而他们，只需输入一些这样的代码 - 该类甚至比一个简单的 hello World 更复杂 - 两个全局变量可以用于更简单的代码：

```
from Tkinter import Canvas, Tk, mainloop
w = Tk()
c = Canvas(w)
c.pack()

class DrawLines(object):
    def __init__(self, canvas):
        self.canvas = canvas
        self.start_coords = None
        self.end_coords = None
    def __call__(self, event):
        coords = event.x, event.y
        if not self.start_coords:
            self.start_coords = coords
            return
        self.end_coords = coords
        self.canvas.create_line(self.start_coords[0],
                                self.start_coords[1],
                                self.end_coords[0],
                                self.end_coords[1])
        self.start_coords = self.end_coords

c.bind("<Button-1>", DrawLines(c))

mainloop() 
```

# python - 详细视图未一致地显示数据

> ID：15048631
> 
> 赞同：0
> 
> 时间：2013-02-24T04:21:13.267
> 
> 标签：python, django

有没有人遇到过这个问题？我有一个详细视图，当我第一次单击它时 - 我希望显示的所有内容都可以。但是，如果我刷新页面 (ctrl + F5)，或者导航离开和返回，则只会再次显示其中的一部分。

这是我的观点的简化示例：

```
@login_required(login_url='/login/')
def detail(request, id):
    queryset1 = ...filter(id = id).values().get() 
    queryset2 = ...filter(id = id)
    queryset3 = ...filter(id = id) 
    return render_to_response('template.html',{'q1':queryset1,...} 
```

网址：

```
urls = ('',
    url(r'^respondent-detail/(?P<id>\d+)/$', 'myapp.views.detail',name='detail'),
) 
```

看法：

```
{% include 'includes/header.html' %}
{% include 'includes/navigation.html' %}
{{ q1.x }}
{{ q1.y }}
{{ ...}} 

{% if q2 %}
    {% include 'q2.html' %}
{% else %}
    <p>Post this 2</p>
{% endif %}     

{% if q3 %}
    {% include 'q3.html' %}
{% else %}
    <p>Post this 3</p>
{% endif %} 
```

*   在第一次刷新时，q2 和 q3 都返回“发布这个”
*   在第二次刷新时，q2 按预期返回，q3 返回“Post this”
*   在第三次刷新时，q2 和 q3 按预期返回。

*更新*

我找到了一个解决方案，`@never_cache`在视图的顶部添加完全消除了这个问题，这表明当我使用硬刷新时缓存发生了一些奇怪的事情。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T14:04:06.630

使用[`django-debug-toolbar`](https://github.com/django-debug-toolbar/django-debug-toolbar)and [`django-debug-cache-panel`](https://github.com/jbalogh/django-debug-cache-panel)or [`django-cache-panel`](https://github.com/lincolnloop/django-cache-panel)I 已经能够嗅出大多数不明显的缓存问题，您可以锁定工具栏，使其仅对某些 IP 可见。

# asp.net - 两个局部视图中的验证错误

> ID：15048640
> 
> 赞同：2
> 
> 时间：2013-02-24T04:22:36.880
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3

我有一个索引页面，它有两个部分视图_Register 和_Login。我有三个视图模型，即 LoginViewModel、RegisterViewModel、LoginOrRegisterViewModel。现在，我希望如果模型状态无效，我想重定向回具有登录和注册表单的索引页面。但是，在这里，它也重定向到注册视图或其他视图模型中的验证登录。请指导我正确返回类型和正确的视图。

索引.cshtml

```
@model Project.ViewModels.LoginOrRegisterModel
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
 }
    @Html.Partial("_Register", Model.Registermodel)
    @Html.Partial("_Login", Model.Loginmodel) 
```

_Register.cshtml

```
@model ProjectHub.ViewModels.RegisterModel

@using (Html.BeginForm("Register", "account", FormMethod.Post))
{
    <div class="label">@Html.Label("Name")</div>
    <div class="field">@Html.TextBoxFor(m => m.FullName)</div>
    <div class="error">@Html.ValidationMessageFor(model => model.FullName)</div>

    //similar html for other attributes

    <input class="field" id="submit" type="submit" value="Sign Up" />
    @Html.ValidationSummary()   
} 
```

_Login.cshtml

```
@model ProjectHub.ViewModels.LoginModel
@using (Html.BeginForm("Login", "account", FormMethod.Post))
{
    @Html.ValidationSummary(true)
    <div class="label">@Html.Label("Username")</div>
    <div class="field">@Html.TextBoxFor(m => m.Username)</div>
    <div class="error">@Html.ValidationMessageFor(model => model.Username)</div>

    <div class="label">@Html.Label("Password")</div>
    <div class="field">@Html.PasswordFor(m => m.Password)</div>
    <div class="error">@Html.ValidationMessageFor(model => model.Password)</div>

    <input class="field" id="submit" type="submit" value="Login" />
} 
```

视图模型

```
using System;
using System.Collections.Generic;
using System.ComponentModel.DataAnnotations;
using System.Linq;
using System.Web;

namespace Project.ViewModels
{
    public class LoginModel
    {
    [Required(ErrorMessage="Username is Required")]
    public string Username { get; set; }
    [Required(ErrorMessage = "Password is Required")]
    public string Password { get; set; }
    }

    public class RegisterModel
    {
    [Required(ErrorMessage = "Username is Required")]
    public string Username { get; set; }
    [Required(ErrorMessage = "Password is Required")]
    public string Password { get; set; }
    [Required(ErrorMessage = "Password is Required")]
    public string ConfirmPassword { get; set; }
    [Required(ErrorMessage = "Name is Required")]
    public string FullName { get; set; }
    [Required(ErrorMessage = "Email is Required")]
    public string Email { get; set; }
    [Required(ErrorMessage = "Country is Required")]
    public string Country { get; set; }
    }

    public class LoginOrRegisterModel
    {
         public LoginModel Loginmodel { get; set; }
         public RegisterModel Registermodel { get; set; }
    }
} 
```

账户控制器

```
 public ActionResult Index()
    {
        LoginOrRegisterModel model = new LoginOrRegisterModel();
        model.Loginmodel = new LoginModel();
        model.Registermodel = new RegisterModel();
        return View(model);
    }
    [HttpPost]
    public ActionResult Index(LoginOrRegisterModel model)
    {
        return View(model);
    }

    [HttpGet]
    public ViewResult Login()
    {
        LoginModel model = new LoginModel();
        return View("_Login",model);
    }
    [HttpPost]
    public ActionResult Login(LoginModel usermodel)
    {
           if (ModelState.IsValid)
           {
                //some validation loic
                return RedirectToAction("Index", "Home");
            }
            return View("Index", new LoginOrRegisterModel() { Loginmodel = usermodel, Registermodel = new RegisterModel() });
        }
        else
        {
            ModelState.AddModelError("", "Invalid Username/Password");
            return View("Index",new LoginOrRegisterModel() { Loginmodel = usermodel, Registermodel = new RegisterModel() });
        }
    }

    public ViewResult Register()
    {
        RegisterModel model = new RegisterModel();
        return View("_Register",model);
    }
    [HttpPost]
    public ActionResult Register(RegisterModel usermodel)
    {
        if (!ModelState.IsValid)
        {
            return View("Index", new LoginOrRegisterModel() { Loginmodel = new LoginModel(), Registermodel = usermodel });
        }
        try
        {
            //Some logic for validation
            return RedirectToAction("activationemail", new { username = usermodel.Username, email = usermodel.Email });
        }
        catch (Exception ae)
        {
           return View("Index", new LoginOrRegisterModel() { Loginmodel = new      LoginModel(), Registermodel = usermodel });
        }
    } 
```

请帮助我，我收到[这样的错误](http://tinypic.com/view.php?pic=m819vm&s=6)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T09:43:39.460

1.  渲染部分时添加 HtmlFieldPrefix：

    ```
    @Html.Partial("_Register", Model.Registermodel, new ViewDataDictionary(this.ViewData) { TemplateInfo = new TemplateInfo { HtmlFieldPrefix = "Registermodel" } })
    @Html.Partial("_Login", Model.Loginmodel, new ViewDataDictionary(this.ViewData) { TemplateInfo = new TemplateInfo { HtmlFieldPrefix = "Loginmodel" } }) 
    ```

    或使用[PartialFor](https://stackoverflow.com/questions/1488890/asp-net-mvc-partial-views-input-name-prefixes)

2.  添加带有前缀的操作方法 BindAttribute：

    ```
    public ActionResult Register([Bind(Prefix = "Registermodel")]RegisterModel usermodel)
    public ActionResult Login([Bind(Prefix = "Loginmodel")]LoginModel usermodel) 
    ```

# css - 带有箭头的对话框背景图像使用相同的背景

> ID：15048644
> 
> 赞同：0
> 
> 时间：2013-02-24T04:23:20.357
> 
> 标签：css, facebook, background

我正在制作一个 facebook 应用程序并与 iframe 中的 facebook 设计流程保持一致，我正在“复制”一些 facebook 功能。我遇到的问题是使用父背景图像的带有箭头的悬停卡弹出对话框。

在下面的链接中，您将看到我正在尝试做的事情。 [http://grab.by/k9Na](http://grab.by/k9Na)

在该图片中，我使用了 2 个具有相同位置属性的绝对 div。第一层有一个透明的背景图像，带有一个倒置的白色箭头（与背景颜色相同）。第二层设置为封面照片，并与第一层重叠，使其具有箭头外观。

我无法将封面照片的正确位置放入第二个箭头层。我试着搜索了一段时间，结果是空的。我也检查了 facebook 的代码并且变得更加困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T20:36:13.287

我想到了。它可能不是最好或最有效的解决方案，但它确实有效。

[http://grab.by/kapw](http://grab.by/kapw)

在上图中，您将看到我绘制了 3 个蓝色框（div）。这些框被放置在一个绝对容器内，该容器具有与弹出对话框相同的宽度和 15 像素的固定高度。

这 3 个框的位置取决于哪个面框悬停在容器上方。在此示例中，左起第二个框被悬停 - 请注意箭头指向它。

将 ' **left** ' div 宽度设置为面框左侧位置。

将 ' **bg** ' div 左侧位置设置为面部框左侧位置。

将 ' **right** ' div 左侧位置设置为 left 和 bg div 宽度之和。

将 ' **right** ' div 宽度设置为父宽度减去 left 和 bg 宽度之和。

将 div**容器**的 zIndex 设置为较大的数字。

在**bg** div 内部 html内放置一个*透明的反向箭头*

 **`````
 <div class="container">
  <div class="left"></div>
  <div class="bg">
   <img src="inversedArrow.png">
  </div>
  <div class="right"></div>
 </div> 
````  `中提琴！``**

# grails - Grails如何在控制器上调用MyUserDetailsS ervice？

> ID：15048655
> 
> 赞同：0
> 
> 时间：2013-02-24T04:25:34.220
> 
> 标签：grails, service, spring-security

我有自定义 MyUserDetailsS​​ervice

```
class MyUserDetailsService implements GrailsUserDetailsService {
 ...
} 
```

我想打电话给我的控制器

```
class MyController {
    def springSecurityService

    def check() {
        String user = springSecurityService.principal.username
        def MyUserdetails = MyUserDetailsService.loadUserByUsername(user)
    }
} 
```

并得到错误

> 没有方法签名：静态 MyUserDetailsS​​ervice.loadUserByUsername() 适用于参数类型：(java.lang.String) 值：[user] 可能的解决方案：loadUserByUsername(java.lang.String), loadUserByUsername(java.lang.String, boolean )

我想在登录后检查用户，所以我不把它放在 bean 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T08:19:02.230

我相信您会在文件 grails-app/conf/spring/resources.groovy 中使用 Grails 注册自定义用户详细信息服务，例如：

```
beans = {
    userDetailsService(com.mycompany.myapp.MyUserDetailsService)
} 
```

注册后，您可以通过在控制器中声明 userDetailsS​​ervice 变量并使用它来依赖 Grails 自动服务注入，例如：

```
class SomeController {
    def userDetailsService
    ...
    def someAction() {
        String user = springSecurityService.principal.username
        CustomUserDetails userdetails = userDetailsService.loadUserByUsername(user)
    }
} 
```

[这里](http://grails-plugins.github.com/grails-spring-security-core/docs/manual/guide/11%20Custom%20UserDetailsService.html)的文档很有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T08:26:51.027

将您的服务放在服务文件夹中并从您的控制器中引用它：

```
 import your.package.MyUserDetailsService

 class MyController {

        MyUserDetailsService muds
        def springSecurityService

        def check() {
            String user = springSecurityService.principal.username
            def MyUserdetails = muds.loadUserByUsername(user)
        }
  } 
```

# ruby - 理解 Ruby 方法#call

> ID：15048657
> 
> 赞同：17
> 
> 时间：2013-02-24T04:26:00.733
> 
> 标签：ruby

```
def test
  "Hello World"
end

p method(:test).call  #"Hello World"
p method("test").call #"Hello World" 
```

我的问题是：当我们将符号传递给`call`方法时会发生什么？ruby 会将符号转换为字符串然后执行吗？如果是这样，那么它的目的是什么？

如果不是，那么实际上会发生什么？你能详细说明一下吗？对不起，如果我没有让自己清楚。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-24T04:56:00.637

当您`def test ...`在任何显式类或模块定义之外执行时，您基本上处于 Object 类上下文中，因此`test`现在是`Object`

在`irb`...

```
1.8.7 :001 > def test
1.8.7 :002?>   "Hello world"
1.8.7 :003?>   end
 => nil
1.8.7 :004 > Object.instance_methods.sort
 => ["==", "===", "=~", "__id__", "__send__", "class", "clone", "display", "dup", "enum_for", "eql?", "equal?", "extend", "freeze", "frozen?", "hash", "id", "inspect", "instance_eval", "instance_exec", "instance_of?", "instance_variable_defined?", "instance_variable_get", "instance_variable_set", "instance_variables", "is_a?", "kind_of?", "method", "methods", "nil?", "object_id", "private_methods", "protected_methods", "public_methods", "respond_to?", "send", "singleton_methods", "taint", "tainted?", "tap", "test", "to_a", "to_enum", "to_s", "type", "untaint"] 
```

`method`是`Object`类的实例方法，它基本上被所有东西继承。当您`method`在任何显式类或模块定义之外调用时，您实际上是在将其作为`Object`类的方法来调用，并且该类本身就是 的实例`Class`，它是`Object`(对不起 - 我知道这有点令人困惑）。

所以——该`method`方法接受一个字符串或一个符号并返回一个对象，该对象将该名称的绑定方法封装在被调用的同一对象`.method`上。在这种情况下，这就是`test`绑定到`Object`对象的方法。

`method(:test).call`表示调用您`test`之前`Object`通过`def test ...`.

# asp.net-mvc - 完整日历单元格背景颜色

> ID：15048658
> 
> 赞同：0
> 
> 时间：2013-02-24T04:26:01.247
> 
> 标签：asp.net-mvc, fullcalendar

我需要更改全日历中日期的背景颜色。我的情况类似于这个问题：[更改全日历中一系列日期的背景颜色，](https://stackoverflow.com/questions/13622985/change-background-color-of-a-range-of-dates-in-fullcalendar)但解决方案是更改事件背景颜色。我想要的是更改从控制器收到的日期的单元格背景颜色，例如`["2013-02-22", "2013-2-20"]`

我尝试解析这些日期，然后使用 jquery css 函数更改其背景颜色，但它没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T13:24:44.317

在月视图中，您可以像这样设置各个日期的背景颜色（使用 jQuery）：

```
$(".fc-day4").addClass("myBackgroundClass"); 
```

在您的 CSS 文件中，您将拥有如下内容：

```
.myBackgroundClass {
    background-color: grey;
} 
```

这将使视图的第四天（不一定是一个月的第四天，因为月份视图中的第一天通常实际上来自上个月）一个灰色背景。

鉴于`agendaWeek`它的工作方式不同：

```
$(".fc-col0").addClass("myBackgroundClass"); 
```

这将使一周中最左边的一天视图呈现灰色背景（`fc-col1 .. fc-col6`用于一周中的其他六天）。鉴于`agendaDay`，只需使用`fc-col0`.

困难的部分是计算哪个日期对应于日历中的哪个列（如果是月视图，则为行）。您可以在`viewDisplay`回调中进行这些计算，根据[文档](http://arshaw.com/fullcalendar/docs/display/viewDisplay/)，“当日历加载并且每次显示不同的日期范围时”都会触发这些计算。

当您开始计算时，您需要从所有列和行中删除您的自定义背景，您可以这样做：

```
$(".myBackgroundClass").removeClass("myBackgroundClass"); 
```

# c++ - 从另一个线程和 C++ 类更新 Winform 控件

> ID：15048659
> 
> 赞同：1
> 
> 时间：2013-02-24T04:26:04.033
> 
> 标签：c++, multithreading, class, user-interface, forward-declaration

我一直在努力尝试从另一个线程和 C++ 中的另一个类更新 Winform 控件。我看到关于这个主题的几个问题，但每个问题在某种程度上似乎都不完整，我无法解决缺失的部分。

我的 Winform 线程有一个图片框。我有一个单独的类，它在一个单独的线程上运行，该线程从网络摄像头捕获图像，处理它们，然后我想在图片框中的 Winform 线程上显示图像。我正在使用 VS2010 SE C++。

我的代码如下：

```
//CameraThread.h
using namespace System;
using namespace System::Windows;
using namespace System::Windows::Forms;

class Form1;

public class CameraThread
{
    private:
    Form1* frm1;  // compiler does not like this line
    public: CameraThread(Form1 *tfrm1)  {
    frm1 = tfrm1;
    }

void PictureUpdater(void)   {
    try {
        frm1->Invoke( Form1->UpdateBox() );
            }
            catch
            { };
}

//Form1.h
namespace SV7 {

using namespace System;
using namespace System::ComponentModel;
using namespace System::Collections;
using namespace System::Windows::Forms;
using namespace System::Data;
using namespace System::Drawing;

/// <summary>
/// Summary for Form1
/// </summary>
public ref class Form1 : public System::Windows::Forms::Form
{
    public: delegate void UpdateDelegate(void);

    public:
    Form1(void)  {
              // constructor code
            }

    void UpdateBox(void)  {
        if (this->RawImageBox->InvokeRequired)  {
        UpdateDelegate^ d = gcnew UpdateDelegate(this,&Form1::UpdateBox);
            this->RawImageBox->Invoke(d);
        }
    else {
         // code that actually updates this->RawImageBox
    }
        }
} 
```

我的 Form1 类编译得很好。但是，CameraThread 需要引用 Form1.UpdateBox 方法。当我编译上面的代码时，我收到一个错误，指的是一个“const”，CameraThread 绑定到声明一个指向 Form1 的指针。我认为 Form1 的前向声明会处理这个问题，但显然不是。我的问题似乎是每个使用单独的线程和类从 GUI 线程执行重要工作的人都会遇到的问题，所以我希望我的问题会提示一个可以被其他人用作模板的响应。我对多线程比较陌生，也没有声称在 C++ 方面拥有丰富的专业知识，所以如果这是愚蠢的事情，我深表歉意。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T05:53:20.977

您使用不同的类这一事实并不重要。这就是您组织代码的方式。您可以将所有内容放在一个类中，创建 10 个类，等等。目标是逻辑地组织您的代码。

您不能从任何不同的线程对 UI 线程中使用的对象/数据字段进行任何操作。这行不通。这是完全错误的。在您的工作线程的堆上分配数据，`PostMessage`使用指向此数据的指针调用，在您的 UI 线程（直接在您的表单中）获取您的数据，处理并释放此数据。

这就是它应该组织的方式。

# ios - 没有 InterfaceBuilder 的 UIScrollview 缩放实现

> ID：15048663
> 
> 赞同：1
> 
> 时间：2013-02-24T04:26:58.587
> 
> 标签：ios, objective-c, uiscrollview, uiscrollviewdelegate

我无法放大`UIScrollView`工作。所以问题是平移工作正常。但是，捏合和缩放不起作用。我假设的原因是我没有代表。

我的方法：

1.  我尝试使用代表，我想出的唯一解决方案是`scrollView.delegate=self`

2.  我知道我需要在 中包含一些东西`ViewController.h`，但我不知道如何放置`@property UIScrollView *scrollView;`然后将其连接到缩放功能。

我相信我走在正确的轨道上，但高度赞赏有关在哪里连接的建议。

视图控制器.h

```
#import <UIKit/UIKit.h>
@interface ViewController : UIViewController
@end 
```

视图控制器.m

```
@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];

    UIScrollView *scrollView = [[UIScrollView alloc] initWithFrame:
    CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height)];

    scrollView.delegate = self;
    CGSize containerSize = CGSizeMake(1280, 1280);
    UIView *containerView = [[UIView alloc] initWithFrame:(CGRect)    {.origin=CGPointMake(0.0f, 0.0f), .size=containerSize}];
    containerView.backgroundColor = [UIColor grayColor ];
    [scrollView addSubview:containerView];

    // Set up our custom view hierarchy
    UIView *redView = [[UIView alloc] initWithFrame:CGRectMake(0.0f, 0.0f, 640.0f, 80.0f)];
    redView.backgroundColor = [UIColor redColor];
    [containerView addSubview:redView];

    UIView *blueView = [[UIView alloc] initWithFrame:CGRectMake(0.0f, 560.0f, 640.0f, 80.0f)];
    blueView.backgroundColor = [UIColor blueColor];
    [containerView addSubview:blueView];

    UIView *greenView = [[UIView alloc] initWithFrame:CGRectMake(160.0f, 160.0f, 320.0f, 320.0f)];
    greenView.backgroundColor = [UIColor greenColor];
    [containerView addSubview:greenView];

    UIImageView *imageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"slow.png"]];
    imageView.center = CGPointMake(320.0f, 320.0f);
    [containerView addSubview:imageView];
    scrollView.panGestureRecognizer.minimumNumberOfTouches=2;
    CGSize containerSize2 = CGSizeMake(640, 640);
    scrollView.contentSize=containerSize2;

    CGRect viewRect = CGRectMake(self.view.bounds.origin.x, self.view.bounds.origin.y,  self.view.bounds.size.width, self.view.bounds.size.height);

    [self.view addSubview:scrollView];

}

- (UIView*)viewForZoomingInScrollView:(UIScrollView *)scrollView {
    // Return the view that we want to zoom
    return self.containerView; //This gives error. 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T04:29:52.987

问题很可能是您没有添加`viewForZoomingInScrollView`.

> UIScrollView 类可以有一个必须采用 UIScrollViewDelegate 协议的委托。要使缩放和平移工作，代理必须同时实现 viewForZoomingInScrollView: 和 scrollViewDidEndZooming:withView:atScale:; 另外，最大（maximumZoomScale）和最小（minimumZoomScale）缩放比例必须不同。

所以添加这个：

```
- (UIView *)viewForZoomingInScrollView:(UIScrollView *)scrollView; 
```

[从此处](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIScrollView_Class/Reference/UIScrollView.html)的文档中阅读更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T05:24:05.320

只需提供适当的缩放比例。

```
scrollView.maximumZoomScale = 2.0; //Anything greater than 1.0 will allow you to zoom in 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T19:34:57.853

解决了我的问题的答案：在 ViewRect() 之后的 viewDidLoad() 中添加此代码

```
CGRect viewRect = CGRectMake(self.view.bounds.origin.x, self.view.bounds.origin.y,  self.view.bounds.size.width, self.view.bounds.size.height);

CGRect scrollViewFrame = scrollView.frame;
CGFloat scaleWidth = scrollViewFrame.size.width / scrollView.contentSize.width;
CGFloat scaleHeight = scrollViewFrame.size.height / scrollView.contentSize.height;
CGFloat minScale = MIN(scaleWidth, scaleHeight);

scrollView.minimumZoomScale = minScale;
scrollView.maximumZoomScale = 1.0f;
scrollView.zoomScale = minScale; 
```

这应该是 viewController.h 的样子：

```
@interface ViewController ()
@property UIView *containerView;
@end
@implementation ViewController

@synthesize containerView = _containerView; 
```

# c++ - 为什么复制时调用析构函数？

> ID：15048664
> 
> 赞同：1
> 
> 时间：2013-02-24T04:27:10.073
> 
> 标签：c++

我有一个严重的问题，我使用默认构造函数来初始化对象，并使用带有参数的构造函数来复制 DirectX 接口。

```
SpriteBatch spriteBatch; //Creating an Object to SpriteBatch Class

//This Function Gets Called when Device is Created with Parameter to Device
void LoadContent(GraphicDevice graphicDevice) 
{
  /*Here is the Problem, When it Assigns to the Object it creates a Temp Object and
  Destructor gets called where I free everything, I can't use the GraphicDevice after
  this.*/

  spriteBatch = SpriteBatch(graphicDevice); 
}

//SpriteBatch Class

class SpriteBatch
{
  GraphicDevice graphicDevice;

  public:
    SpriteBatch();
    SpriteBatch(GraphicDevice graphicDevice);
    ~SpriteBatch();
}

SpriteBatch::SpriteBatch()
{
}

SpriteBatch::SpriteBatch(GraphicDevice graphicDevice)
{
  this->graphicDevice = graphicDevice;
}

SpriteBatch::~SpriteBatch()
{
   graphicDevice-Release();
} 
```

我希望在程序结束时调用析构函数，而不是在复制两个对象时调用。我尝试重载赋值运算符和复制构造函数，但这对我没有帮助。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T04:46:40.863

使用 a`shared_ptr`以便`graphicDevice`它只会在引用计数达到零时才被释放。首先，您不应该在析构函数中处理这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T04:31:22.053

通过引用传递以减少副本、临时对象及其销毁的数量：

```
void LoadContent(GraphicDevice& graphicDevice) 
{
    spriteBatch = SpriteBatch(graphicDevice); 
} 
```

接着：

```
SpriteBatch::SpriteBatch(GraphicDevice& graphicDevice)
    :graphicDevice(graphicDevice)
{
} 
```

如果您想避免`GraphicDevice`为 的每个实例创建一个新的`SpriteBatch`，请`GraphicDevice graphicDevice;`参考：

```
GraphicDevice& graphicDevice; 
```

这将需要在所有`SpriteBatch`构造函数中进行初始化。

# c# - System.InvalidCastException 循环通过 GridView.SelectedItems

> ID：15048667
> 
> 赞同：0
> 
> 时间：2013-02-24T04:27:58.187
> 
> 标签：c#, xaml, microsoft-metro, windows-store-apps

我正在编写一个 Windows 8 应用程序（XAML-C#-Windows Store 应用程序（地铁）），我必须在其中循环遍历 GridView 的 SelectedItems 集合。

这是我的代码：

```
private void bottomAppBarBotonEliminar_Tapped(object sender, TappedRoutedEventArgs e)
{
    //Borrar el(los) elemento(s) seleccionado(s)
    foreach (GridViewItem elItem in GVElementos.SelectedItems)
    {
        MiColeccion.RemoveAt(GVElementos.Items.IndexOf(elItem));
    }
    ElementoSQL.Sincronizar(MiColeccion);
} 
```

当我运行它并触发该方法时，我收到以下错误（翻译自西班牙语）：

```
An exception of type 'System.InvalidCastException' occurred 
in Lista.exe but was not handled in user code
Additional information: Unable to convert an object of 
type 'System.String' to the type 'Windows.UI.Xaml.Controls.GridViewItem'. 
```

当程序中断时，Visual Studio 会使用 foreach 语句突出显示该行。

“GVElementos”是一个 XAML GridView。
“GridViewItem”和“GVElementos.SelectedItems”类型的“elItem”不是“GridViewItem”类型元素的集合吗？
我究竟做错了什么？还有另一种迭代GridView的方法吗？我来自 ASP.NET，这种做法很有意义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T04:45:17.477

这个例外真的很明确。您应该注意该消息，而不是从以前的工作实现中粘贴代码。**特别是如果您的实现来自另一个框架或环境！**

基本上，正如人们对您问题的评论所建议的那样，并且异常状态表明您正在从字符串到 GridViewItem 进行无效转换。

尝试执行以下操作：

```
foreach (string elItem in GVElementos.SelectedItems)
{
     MiColeccion.RemoveAt(GVElementos.Items.IndexOf(elItem));
} 
```

如果您阅读控件的文档，您将了解每个项目都是一个字符串对象。

这是一个快速入门链接： http: [//msdn.microsoft.com/en-us/library/windows/apps/xaml/hh780650.aspx ?cs-save-lang=1&cs-lang=csharp#code-snippet-2](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh780650.aspx?cs-save-lang=1&cs-lang=csharp#code-snippet-2)

这是一个更具体的例子：[http ://code.msdn.microsoft.com/windowsapps/ListViewSimple-d5fc27dd](http://code.msdn.microsoft.com/windowsapps/ListViewSimple-d5fc27dd)

# mysql - Sequelize 关联得到错误

> ID：15048668
> 
> 赞同：0
> 
> 时间：2013-02-24T04:28:00.010
> 
> 标签：mysql, node.js, sequelize.js

我想通过“Sequelize”生成表格的“代码优先”，这里我的代码是

```
var  Sequelize = require('sequelize'); 
```

export.createTable = function (req,res) { var sequelize = new Sequelize('myblog','root','');

```
var Blog = sequelize.define('Blog',{
    // the blog id
    bid: { type: Sequelize.INTEGER, allowNull: false, autoIncrement: true ,primaryKey: true },
    // bname
    btitle: { type: Sequelize.STRING, allowNull: false },
    // blog Content
    bcontent: { type: Sequelize.TEXT, allowNull: false },
    // blog date
    bdate: { type: Sequelize.DATE, defaultValue: Sequelize.NOW }
});

var User = sequelize.define('User',{
    // uid
    uid: { type: Sequelize.INTEGER, allowNull: false ,autoIncrement: true, primaryKey: true },
    // uname
    uname: { type: Sequelize.TEXT, allowNull: false, },
    // register date
    regDate: { type: Sequelize.DATE, allowNull: false, defaultValue: Sequelize.NOW },

});

Blog.hasMany(User);
User.hasMany(Blog);

Blog.sync();
User.sync();

var blog = Blog.build({
    btitle: 'this is a title',
    bcontent: 'this is a Content!',
    bdate: new Date()
});

var user1 = User.build({
    uname: 'www',
    uregDate: new Date()
});

var user2 = User.build({
    uname: 'www2',
    uregDate: new Date()
});

blog
    .save()
    .success(function () {
        console.log('blog save suc');
    });

user1
    .save()
    .success(function () {
        console.log('user save suc')
    }); 
user2
    .save()
    .success(function () {
        console.log('user save suc')
    }); 

blog
    .setUsers([user1,user2])    
    .success(function () {
        console.log('saved')
    })
    .error(function (err) {
        console.log(err);
    });
// blog.getUsers()
//  .success(function (ascUser) {
//      console.log(ascUser);
//  }); 

sequelize
    .sync()
    .success(function () {
        res.send('createTable ok!');
    })
    .error(function () {
        res.send('createTable falied!');    
    }); 
```

}

我得到了错误：错误：ER_BAD_FIELD_ERROR：'where子句中的未知列'User.id'。。。。谁能帮帮我？多谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T19:34:50.333

字段bid和uid是干什么用的？Sequelize 会自动为你创建一个 id，所以如果这就是所有这些，你应该删除它们，除非它们是必需的。我不是很肯定，但我猜如果你创建一个自动递增的主键，Sequelize 可能不会自动创建一个 id 字段，认为你想使用它。但是协会希望该列是 id。同样，不知道为什么，但我敢打赌，如果您删除了这些投标和 uid 字段，它会按您的预期工作。

# php - php切换代码错误

> ID：15048674
> 
> 赞同：1
> 
> 时间：2013-02-24T04:29:58.907
> 
> 标签：php, switch-statement

每次我在我的 index.php 上回显这个时都会出现错误

下面是我的开关代码，因为我使用的是 php 动态站点，因此每次调用不同的 php 时我都使用 switch 来更改数据。

```
<?php
function title_switch()
{
    $var = (isset($_GET['page']) && !empty($_GET['page'])) ? $_GET['page'] : 'home';
    switch ($var) {
        case 'home':
            $a['title']   = " &#187; Home";
            $a['meta_d']  = "This page is about my site!";
            $a['meta_k']  = "something, somethingelse";
            $a['slider1'] = "<script type=\"text/javascript\" src=\"./js/jquery.easing.1.3.js\"></script>\n";
            $a['slider2'] = "<script type=\"text/javascript\" src=\"./js/tms-0.3.js\"></script>\n";
            $a['slider3'] = "<script type=\"text/javascript\" src=\"./js/tms_presets.js\"></script>\n";
            $a['main']    = "<script type=\"text/javascript\" src=\"./js/script.js\"></script>\n";
            $a['pageid']  = "page1";
            $a['slider']  = "slide";
            break;
        case 'company':
            $a['title']  = " &#187; Company";
            $a['meta_d'] = "This page is about my site!";
            $a['meta_k'] = "something, somethingelse";
            $a['all']    = "<script type=\"text/javascript\" src=\"./js/all.js\"></script>\n";
            $a['pageid'] = "page2";
            $a['slider'] = "banner";
            break;
        default:
            $a['title']  = " &#187; HTTP 404 - Page Not Found";
            $a['meta_d'] = "";
            $a['meta_k'] = "";
            break;
    }
    return $a;
}
$details = title_switch();
?> 
```

这是我在第 21 行的 index.php

```
<?php echo $details['all']; ?> 
```

如果调用 home.php 它将显示以下错误

> 注意：未定义的索引：全部在 C:\wamp\www\site\index.php 第 21 行调用堆栈
> 
> # 时间记忆功能位置
> 
> 1 0.0035 258968 {main}( ) ..\index.php:0

如果我打电话给 company.php 它不会显示任何错误...

我可以知道我哪里出错了吗？这里有点混乱...

例如：如果我调用 www.example.com/company 它没有显示错误，但如果我调用 www.example.com 它显示错误。

我想要这个代码

```
<?php echo $details['all']; ?> 
```

仅在 www.example.com/company 时显示，如果 www.example.com 被调用则不会显示。

里面的代码：

```
<?php echo $details['all']; ?> 
```

是

```
case 'company':
        $a['title']  = " &#187; Company";
        $a['all']    = "<script type=\"text/javascript\" src=\"./js/all.js\"></script>\n"; 
```

希望这可以为每个可以帮助我解决错误的人提供一个更好更清晰的画面。谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T04:34:23.287

`$a['all']`仅在`switch($var)`等于时设置`'company'`。您需要在每种情况下都设置它。

在您的开关中，您可以设置`$a['all']`一个空值，这样 PHP 至少可以找到索引。一个简短的例子：

```
switch ($var) {
    case 'home':
        $a['all'] = '';
    case 'company':
        $a['all'] = '<script type=\"text/javascript\" src=\"./js/all.js\"></script>\n';
    default:
        $a['all'] = '';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T08:59:19.183

目前尚不清楚您要做什么。但是在函数中定义 $a['all'] 即使它是空的。因此，它将被设置并且不会发出警告。添加行 $a['all'] = ''; 在默认情况下：

# ruby-on-rails - Omniauth-facebook 弹出式身份验证不返回omniauth.auth

> ID：15048677
> 
> 赞同：2
> 
> 时间：2013-02-24T04:30:16.710
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise, omniauth, facebook-login

我已经为此苦苦挣扎了 2 天：

我使用 Devise 正确实现了 Omniauth-factbook。现在，我想通过使 Facebook 身份验证发生在弹出窗口中而不是转到 facebook.com 来改进它。我遵循了[Ryan 的 RailsCast](http://railscasts.com/episodes/360-facebook-authentication?view=asciicast)并添加`display => 'popup'`到我的提供程序配置中`omniauth.rb`

我成功地将登录加载到 facebook 并返回了一个哈希 request.authRequest，其中包含有关 userId 的信息。

但是，当我回到回调路径 (/auth/facebook/callback) 时，我没有像以前那样从 request.evn[omniauth.auth] 获得 :provider 和 :uid。

为什么即使 Facebook API 返回身份验证哈希也没有创建omniauth 哈希？我能做些什么来解决这个问题？

我处理 facebook 回调的控制器很简单：

```
class ServicesController < ApplicationController
  def create
    auth = request.env["omniauth.auth"]
    debugger 
```

在调试器中，当我使用 IRB 检查时，request.env 中没有omniauth 哈希。

顺便说一句，我想我在我的咖啡脚本文件中打开了 cookie：

```
jQuery ->
 $('body').prepend('<div id="fb-root"></div>')

  $.ajax
    url: "#{window.location.protocol}//connect.facebook.net/en_US/all.js"
    dataType: 'script'
    cache: true

window.fbAsyncInit = ->
  FB.init(appId: '<%= "myAppID" %>', cookie: true)

  $('#facebook_signin').click (e) ->
    e.preventDefault()
    FB.login (response) ->
      window.location = '/auth/facebook/callback' if response.authResponse

  $('#facebook_signout').click (e) ->
    FB.getLoginStatus (response) ->
      FB.logout() if response.authResponse
    true 
```

谢谢你。

更新：我的 omniauth.rb 看起来像这样：

```
Rails.application.config.middleware.use OmniAuth::Builder do
  # The following is for facebook
  provider :linkedin, '3yn', 'iMJ'
  provider :twitter, 'SQ', 'T5fo'
  provider :facebook, '081', 'e80',
           scope: "email"
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T04:52:38.710

（当我是新手时，我必须回答而不是发表评论。）

你似乎混淆了一些事情。指定`:display => 'popup'`不会触发弹出窗口。它是一个与 Facebook 相关的选项，用于指定登录表单的显示模式（此处解释：[https](https://developers.facebook.com/docs/reference/dialogs/oauth/) ://developers.facebook.com/docs/reference/dialogs/oauth/ ）

[Turnomniauth facebook login into a popup](https://stackoverflow.com/questions/4491433/turn-omniauth-facebook-login-into-a-popup)解释了一些正在发生的事情，但您可能不想维护自己的弹出窗口。Facebook 的 JavaScript SDK 使用 FB.login 函数执行此操作（此处解释：[https](https://developers.facebook.com/docs/reference/javascript/FB.login/) ://developers.facebook.com/docs/reference/javascript/FB.login/ ）

如果没有发布所有相关代码，就很难进行故障排除。从您写的内容来看，听起来 JavaScript 端工作正常。出于好奇，您的 omniauth.rb 初始化程序是什么样的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T01:12:52.720

我做了一些测试并阅读了有关 railscast 的评论，您需要降级 gem

宝石'omniauth-facebook'，'1.4.0'

如果您需要有关它的更多信息：

[http://railscasts.com/episodes/360-facebook-authentication?view=comments#comment_159418](http://railscasts.com/episodes/360-facebook-authentication?view=comments#comment_159418)

这里的代码：[https ://github.com/senayar/facebook_connect](https://github.com/senayar/facebook_connect)

希望能帮助到你 ：）

# character-encoding - 这里使用的文件编码方法是什么？

> ID：15048683
> 
> 赞同：0
> 
> 时间：2013-02-24T04:31:01.203
> 
> 标签：character-encoding, xbrl

二进制文件经常附加到 SEC 文件中[（参见此处的示例）](ftp://ftp.sec.gov/edgar/data/706688/13/000000000013004276/0000000000-13-004276.txt)，我正在编写一个解析器来捕获此文本并重新创建文件。

不管文件是 Excel 电子表格还是 PDF（下面是链接的示例），编码方法看起来都是一样的。它不是 Base64；我不认识它。

你？TIA。

```
<DOCUMENT>
<TYPE>LETTER
<SEQUENCE>1
<FILENAME>filename1.pdf
<TEXT>
<PDF>
begin 644 filename1.pdf
M)5!$1BTQ+C4-)>+CS],-"C,W(#`@;V)J#3P\+TQI;F5A<FEZ960@,2],(#$T
M-C0S,2]/(#,Y+T4@,30Q-S0W+TX@,2]4(#$T-C$R,R]((%L@-#8X(#$V,ET^
M/@UE;F1O8FH-("`@("`@("`@("`@("`@#0HT-R`P(&]B:@T\/"]$96-O9&50
M87)M<SP\+T-O;'5M;G,@-2]0<F5D:6-T;W(@,3(^/B]&:6QT97(O1FQA=&5$
M96-O9&4O241;/#`T-#$S,4$Q.#`Q-D,X-#!!-S$X0S-%,T$X1D5$0S!!/CQ!
M,31&,S%#,T(Y-T(T-#0P.3)"-#<P148U,D8W0C,X13Y=+TEN9&5X6S,W(#,R
....
...<snip>...
....
M``$F1B;-S0Q,#`S,"2"2-PU$,O:!2(:C0-E_QTS!;`;&H4$R/0&1C`P``08`
M_(\&40T*96YD<W1R96%M#65N9&]B:@US=&%R='AR968-"C$Q-@T*)25%3T8-
!"C\_
`
end
</PDF>
</TEXT>
</DOCUMENT> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T04:54:42.573

答案原来是老派：[UUEncoding](http://en.wikipedia.org/wiki/Uuencoding)

感谢所有查看问题的人。

# plugins - Dynamics CRM 2011 Plugin Retrieve and Retrieve Multiple

> ID：15048688
> 
> 赞同：3
> 
> 时间：2013-02-24T04:31:53.817
> 
> 标签：plugins, dynamics-crm-2011, crm, microsoft-dynamics, xrm

我正在寻找一些检索消息和检索多个消息插件（早期绑定）的工作示例。我没有找到任何在线查找的成功示例。我检查了 SDK 和各种论坛。链接或工作示例将不胜感激！

我想要完成的是在 UI 上呈现之前拦截和更新特定字段。我可以通过首选方法 javascript 部分完成此操作，但不幸的是，网格等中的表示无法以这种方式处理。

[我在网上](http://davecorun.com/blog/2012/01/05/crm-2011retrieve-plugin/)找到了一个链接

在这个例子中，他能够截获消息并更新值，但这似乎只在汇总 6 中起作用（我在 10 上）。

与上述帖子进一步相关的是[Chaitany的一篇](http://chaitanyaprasadtk.blogspot.com/2012/06/retrieve-plugin-mscrm-2011-i-was.html)

在这个例子中，他正在实现一个与后期操作类似的解决方案，并从上下文输出参数中获取属性“BusinessEntity”。（这让我感到困惑，因为我没有看到在[Retrieve Reponse](http://msdn.microsoft.com/en-us/library/microsoft.xrm.sdk.messages.retrieveresponse_properties.aspx)中定义的这个属性，我认为这应该是 RetrieveResponse 的一个属性。

最终，我想要一个解决方案，拦截检索或检索多个，调整表示值，然后在保存表单时恢复。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T21:22:18.750

对于retrieveMultiple：

```
EntityCollection entities = (EntityCollection)context.OutputParameters["BusinessEntityCollection"]; 
```

对于检索：

```
Entity entity = (Entity)context.OutputParameters["BusinessEntity"]; 
```

检索倍数很酷的一点是，您在检索中所做的任何调整都将应用于检索倍数。

进行调整后，只需发布​​以下内容：

*   xrm.Attach(电话号码);
*   xrm.UpdateObject(phoneNumber);

# php - 仅将键插入 json 没有值

> ID：15048693
> 
> 赞同：0
> 
> 时间：2013-02-24T04:32:47.057
> 
> 标签：php, c, json

```
$arr['key1'] = "";
$arr['key2'] = "";
echo json_encode($arr); 
```

我明白了`{"key1":"","key2":""}`。我怎么能只添加一个没有值的关键元素？会是这样`{"key1","key2"}`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T04:36:37.703

您想要的输出不是[有效的 JSON](http://www.json.org/)。如果要创建列表，请使用：

```
$arr[0] = 'key1';
$arr[1] = 'key2';
echo json_encode($arr); 
```

输出：

```
["key1","key2"] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T04:36:44.493

你所追求的不是正确的 JSON。JSON 中的对象使用花括号，但这意味着每个键都必须有一个值。您可以使用 JSON 数组，它使用方括号代替。

换句话说，你可以这样做：

```
$arr = array( 'key1', 'key2' );` 
```

这将产生 json string `'["key1", "key2"]'`，但这是你能得到的最接近的。

# c# - 安装 Visual Studio 2012 后无法添加 Mysql.Data 作为参考

> ID：15048694
> 
> 赞同：0
> 
> 时间：2013-02-24T04:32:52.767
> 
> 标签：c#, .net, visual-studio, visual-studio-2012, mysql.data

我的机器上安装了 VS 2010 Professional。我尝试下载 VS 2012 Express 来检查一下。我对此进行了探索并尝试创建一个示例网站。但是当我尝试添加 Mysql.Data 时，我无法添加它。当我尝试在 Assembly>Extension 中添加引用时，Mysql.Data 在那里我添加了它，但我发现它没有添加到引用中，我不能使用它。

这是我尝试过的一些解决方案：

1.  删除 C:\Users\Name\AppData\Roaming\Microsoft\VisualStudio 中的包
2.  试图卸载并重新安装 mysql.data 库

你能帮我解决这个问题吗？多谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T02:27:21.897

这是为那些与我有相同经历的人准备的。

你可以看到'JW'的评论。这才是正确答案。

通过 nuget 安装 mysql.data 扩展：

1.  在网站/项目选项卡中查找“管理 NuGet 包”。

2.  搜索 mysql.data 并安装

完毕！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-16T19:44:55.537

我在 VS 2010 上遇到了同样的问题，
我将设法解决重新安装 mysql 数据库的问题。
这是下载链接：[http](http://dev.mysql.com/downloads/mirror.php?id=413555)
://dev.mysql.com/downloads/mirror.php?id=413555 确保：
1-卸载 wamp 或 xamp 服务器。
2-安装 MySQL 数据库后，您已经检查了 C# 和 Visual Studio。
3-关闭 VS ，然后再次打开它。
您将在添加引用列表中找到 MYSQL.data。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T04:39:52.720

我刚刚浏览了 mySQL 论坛，发现 Visual Studio 2012 与 mySQL Connector v.6.5.5 集成

我们将在 Connector/NET 6.5.5 和更高版本 6.6.x 中添加对 VS 2012 的支持同时，请尝试已经提到的解决方法：

[http://forums.mysql.com/read.php?38,546265,555870#msg-555870](http://forums.mysql.com/read.php?38,546265,555870#msg-555870)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-12T17:25:51.103

我有点晚了，但最近我遇到了同样的问题。幸运的是我解决了。您可以通过转到**工具**菜单手动添加它，选择**库包管理器**，然后单击**包管理器控制台**。然后将下面的代码放入控制台，你就完成了。

> 安装包 MySql.Data

供参考，您可以转到[链接](http://docs.nuget.org/consume/package-manager-console)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-07-22T06:30:44.980

1.  从 MySQL 官网下载并安装 MySQL Connector/NET
2.  在解决方案资源管理器中右键单击您的项目
3.  单击添加参考
4.  点击浏览
5.  查看：C:\Windows\Microsoft.NET\assembly\GAC_MSIL\MySql.Data\v4.0_8.0.11.0__c5687fc88969c44d
6.  完毕！

# javascript - 在 Javascript 中创建的 DIV 不显示 onload？

> ID：15048696
> 
> 赞同：0
> 
> 时间：2013-02-24T04:33:09.890
> 
> 标签：javascript, html, onload

出于某种原因，我无法获得以下代码来生成我在 Javascript 代码中创建的 DIV。我很确定它与`creatediv('xdiv', html, 100, 100, 10, 10)`where中的函数参数 id 有关`id = 'xdiv'`。

```
<!DOCTYPE html>
<html>
<head>
</head> 
<script>
var my_div = null;
var newDiv = null; 
function creatediv(id, html, width, height, left, top) 
{ 
    var newdiv = document.createElement('div'); 
    newdiv.setAttribute('id', id); 
    if (width) 
    { 
        newdiv.style.width = 300; 
    } 
    if (height) 
    { 
        newdiv.style.height = 300; 
    } 
    if ((left || top) || (left && top)) 
    { 
        newdiv.style.position = "absolute"; 

        if (left) 
        { 
            newdiv.style.left = left; 
        } 
        if (top) 
        { 
            newdiv.style.top = top; 
        } 
    } 

    newdiv.style.background = "#00C"; 
    newdiv.style.border = "4px solid #000"; 

    if (html) 
    { 
        newdiv.innerHTML = html; 
    } 
    else 
    { 
        newdiv.innerHTML = "nothing"; 
    } 
    document.body.appendChild(newdiv); 

    my_div = document.getElementById(id);
    document.body.insertBefore(newdiv, my_div);
}
</script> 
<body onload=" creatediv('xdiv', html, 100, 100, 10, 10) ">
<div id='xdiv'> c</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T04:49:30.310

您可以将代码修改为

```
<body onload=" creatediv('xdiv', html, 100, 100, 10, 10) ">

to

<body onload=" creatediv('xdiv', 'html', 100, 100, 10, 10) "> 
```

# bash - Shell 脚本和路径中的引用

> ID：15048700
> 
> 赞同：2
> 
> 时间：2013-02-24T04:33:29.613
> 
> 标签：bash, shell, escaping, quotes

我必须很密集，但我根本无法解决这个问题。我在这里用谷歌搜索和搜索过，但没有找到任何东西。

我有一个简单的 shell 脚本。目前它看起来如下。diff 命令失败，第二个参数（下面红色的那个）上显示“没有这样的文件或目录”。

```
#!/bin/bash

set -x

cd "/Volumes/$1/Backups.backupdb/SkiAddict’s Mac/Latest"
time diff -qr /Users/n/Documents/Code "SkiAddict’s Mac/Users/n/Documents/Code" 
```

我从终端调用这样的脚本：

```
bash myScript.sh Quadra 
```

我不太了解 shell 脚本（实际上，一点也不了解），但这真的不可能是火箭科学！

我花了一个多小时把头撞在墙上，让第一个命令 (cd) 起作用；事实证明，除非“SkiAddict's”中的引号字符是智能引号，否则我得到了同样的错误（没有这样的文件或目录）。现在该行工作正常，即使我从该行复制文本并将其粘贴到 diff 命令中，它也不起作用。

整个脚本是从一个已经在工作的 QuicKeys 宏中复制的，该宏将文本输入到终端窗口中，所以我真的认为制作一个 shell 脚本不会是一件大事。宏首先将这一行“键入”到一个新的终端选项卡中：

```
cd /Volumes/Quadra/Backups.backupdb/SkiAddict’s\ Mac/Latest 
```

然后它按 Enter 并“键入”这一行：

```
time diff -qr /Users/n/Documents/Code "SkiAddict's Mac/Users/n/Documents/Code" 
```

然后，它再次按 Enter。这件事完美无缺。

我尝试过在任一端使用双引号，在任一端使用单引号，转义引号，无论两端是否有双引号或单引号。没有任何效果。

帮助？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T19:26:21.130

我昨晚找到了答案，但由于我是新来的，所以我无法回答我自己的问题。感谢[Bash 常见问题解答](http://mywiki.wooledge.org/BashFAQ)，我能够了解 $'...' 这使得路径中的单引号可以被反斜杠，这使得`diff`命令很开心。

不，`cd`不能以同样的方式处理命令。如果我对该行进行任何更改，它将不再起作用！！！叹...

所以，这两行看起来像这样：

```
cd "/Volumes/$1/Backups.backupdb/SkiAddict’s Mac/Latest"
time diff -qr /Users/n/Documents/Code $'SkiAddict\'s Mac/Users/n/Documents/Code' 
```

非常感谢@askewchan 的帮助。即使我们没有与它在一起，但有人可以“谈论”它仍然非常好:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T04:48:05.037

要查看您的脚本实际在做什么，请在您的脚本中添加一些 echo 命令，以查看它是否按照您的预期扩展引号和转义。只需替换为`time diff`，`echo`如果它打印出的路径与您希望它们运行的​​方式不同，请相应地修改它们

* * *

我认为实际上您尝试打开的第二个文件可能*不*存在。您想要的路径很可能是：

```
/Users/n/Documents/Code 
```

在 Unix（或 mac）机器上，所有路径都从 'root' 目录开始，也简称为：

```
/ 
```

不是您计算机的“名称”，它对您来说是`SkiAddict's Mac`

* * *

另一方面，如果您实际上是在尝试访问`TimeMachine`卷中的目录，则需要有一个相对路径，这在您的脚本中可能只是不正确。尝试使用完整路径，从`/Volumes/...`行开始`diff`。就目前而言，在`cd`this 之后，它将尝试与以下文件进行比较：

```
"/Volumes/$1/Backups.backupdb/SkiAddict’s Mac/Latest/SkiAddict’s Mac/Users/n/Documents/Code" 
```

您可以通过`cd /Volu...`在终端中键入并使用制表符完成来确定正确的路径，直到您在`TimeMachine`. 制表符补全将正确转义空格和特殊字符，并找到现有路径。也许这将帮助您找到路径名中的错误。

# c - 为什么 Apache MPM prefork.c 使用互斥锁来保护 accept()？

> ID：15048701
> 
> 赞同：8
> 
> 时间：2013-02-24T04:33:31.923
> 
> 标签：c, multithreading, apache, sockets, thread-safety

我坐下来阅读[Apache 的 MPM prefork.c](http://code.metager.de/source/xref/apache/httpd/server/mpm/prefork/prefork.c)，这段代码使用了一个名为的变量`accept_mutex`来防止多个线程调用`accept()`. 这很奇怪，因为据我所知[`accept()`是 thread-safe](https://stackoverflow.com/questions/5124320/is-accept-thread-safe)。

接受（）线程安全吗？这是平台兼容性问题吗？如果是这样，哪个平台实现了非线程安全`accept()`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-24T04:50:46.737

这在[Apache 性能调整文档](http://httpd.apache.org/docs/2.2/misc/perf-tuning.html)中的“`accept()`序列化 - 多个套接字”下进行了解释。简而言之，至少在某些操作系统下，传入连接将唤醒*所有*等待传入连接的 Apache 进程`select()`or `poll()`，但会导致`accept()`除一个之外的所有进程失败。这是低效的，因此使用互斥锁来确保一次只有一个进程接受传入连接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T04:42:15.863

阅读您链接到的来源中的评论。似乎互斥锁并没有真正保护`accept`操作，而是需要轮询的侦听套接字列表（请注意，只有一个侦听套接字时不使用互斥锁，至少在`accept`正常工作的非损坏系统上不使用） . 如果这可以在运行时改变，那么代码可能是正确的。但我有一种感觉，他们只是在做一些荒谬的事情。这是 Apache，所以你不应该期望高质量甚至合理的代码......

# javascript - 用户在浏览器中滚动时隐藏按钮，完成后淡入按钮

> ID：15048702
> 
> 赞同：0
> 
> 时间：2013-02-24T04:33:41.347
> 
> 标签：javascript, jquery, css

我试图在用户滚动时隐藏一个 ID 为 #stats 的按钮，然后我希望它在他们完成滚动后淡入。

由于某种原因，这在下面不起作用。

谢谢你的帮助！

```
<button id="stats">
    <span class="icon prs">&#59146;</span><h3 id="views" class="prm">@file.views</h3>
    <span class="icon prs">&#59160;</span><h3 id="comments">20</h3>       
</button><!--end stats-->

<script>
    //fade stats in on load
    $(function(){  // $(document).ready shorthand
        $('#stats').hide().fadeIn('slow');
    });

    //hide stats when scrolling
    var $stats = $("#stats");
    var opacity = $stats.css("opacity");
    var scrollStopped;

    var fadeInCallback = function () {
        if (typeof scrollStopped != 'undefined') {
            clearInterval(scrollStopped);
        }

        scrollStopped = setTimeout(function () {
            $stats.animate({ opacity: 1 }, "slow");
        }, 200);
    };

    $(window).scroll(function () {
        if (!$stats.is(":animated") && opacity == 1) {
            $stats.animate({ opacity: 0 }, "slow", fadeInCallback);
        } else {
            fadeInCallback.call(this);
        }
    });
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T04:50:25.293

我会尝试简化一点，并做更多这样的事情：

```
$(function(){
    var stats = $('#stats'),
        vis   = true;
        timer,

    stats.hide().fadeIn('slow');
    $(window).on('scroll', function() {
        clearTimeout(timer);
        if (vis) {
            stats.stop(true,true).fadeOut('slow');
            vis = false;
        }
        timer = setTimeout(function() {
            stats.stop(true,true).fadeIn('slow');
            vis = true;
        }, 400);
    });
}); 
```

[**小提琴**](http://jsfiddle.net/ZWx94/)

# javascript - jQuery this() 似乎不起作用

> ID：15048711
> 
> 赞同：0
> 
> 时间：2013-02-24T04:35:09.887
> 
> 标签：javascript, jquery, html, ajax, this

我有这个简单的表单和验证，一切都很好，除了“this”指向，好吧，我不知道是什么：

```
$('#contact').validator().submit(function(e){
        e.preventDefault();
        $.ajax({
          type: "POST",
          url: this.action,
          data: { 
            mail: jQuery('input[name="mail"]').val(), 
            message: jQuery('textarea[name="message"]').val(),
          success: function(){
            $(this).hide();
          }
        }); 
    }); 
```

我希望这段代码在成功时隐藏#contact，但这永远不会发生。

我试过了`alert(this)`，但我得到了`[object Object]`，同样的事情发生在我做`console.log( $(this) )`的时候（只有对象旁边有+，当我点击+时，我看到除了这个元素的类/id之外的各种数据:(）。有什么想法吗？我的代码有问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T04:38:57.700

你失去了上下文。在`submit`功能`#contact`元素中是上下文。在 ajax 回调中，ajax 设置是上下文。

来自 jQuery 文档：

> 所有回调中的 this 引用是设置中传递给 $.ajax 的 context 选项中的对象；如果未指定上下文，则这是对 Ajax 设置本身的引用。

```
$('#contact').validator().submit(function (e) {
  e.preventDefault();

  var self = this;

  $.ajax({
    type: "POST",
    url: this.action,
    data: {
      mail: jQuery('input[name="mail"]').val(),
      message: jQuery('textarea[name="message"]').val(),
      success: function () {
        $(self).hide();
      }
    });
  });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T04:41:59.863

`this`在`success`方法的上下文中不引用单击的元素，您应该缓存该元素：

```
$('#contact').validator().submit(function(e){
        e.preventDefault();
        var $this = $(this); // cache the object
        $.ajax({
          type: "POST",
          url: this.action,
          data: { 
            mail: jQuery('input[name="mail"]').val(), 
            message: jQuery('textarea[name="message"]').val()
          }, // missing }
          success: function(){
            $this.hide();
          }
        }); 
}); 
```

# itextsharp - itextsharp 在 pdf 文件中创建链接以启动程序

> ID：15048712
> 
> 赞同：1
> 
> 时间：2013-02-24T04:35:27.257
> 
> 标签：itextsharp

我正在使用 iTextSharp 创建 PDF 文件。我可以使用 iTextSharp 在 PDF 文档中创建允许用户启动程序的链接吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T10:03:29.417

您正在寻找[Launch 操作](http://itextpdf.com/themes/keyword.php?id=279)。我是有关 iText 的书的作者，我通常不谈论此功能，因为它被认为是一种安全隐患（您在评论中指出：用户确实必须信任 PDF）。

在 iTextSharp 中，您将创建一个如下所示的启动操作：

```
 Paragraph p = new Paragraph(
      new Chunk( "Click to open test.txt in Notepad.")
      .SetAction(
        new PdfAction(
          "c:/windows/notepad.exe",
          "test.txt", "open",
          Path.Combine(Utility.ResourceText, "")
        )
    ));
    document.Add(p); 
```

查看代码，您会立即看到第二个问题：PDF 应该依赖于平台，但我们在此代码示例中引入了两个依赖项：

1.  在这个示例中，我们只为在 Windows 上打开的 PDF 提供启动操作（可以为其他操作系统添加额外的属性）。
2.  我们假设可执行文件存在于我们定义的路径上。如果您希望此 PDF 在每个环境中工作，这可能是一个大问题。

您必须与您的客户讨论这个问题，看看他们是否可以满足这些额外的要求：操作系统和可执行文件的位置。

# silverlight - 当我尝试将字符串写入大小超过 8192 字节的文件时，Silverlight 引发异常

> ID：15048716
> 
> 赞同：0
> 
> 时间：2013-02-24T04:36:07.740
> 
> 标签：silverlight

我正在尝试将大小超过 8192 字节的字符串（它是一个 xml）写入文件。

异常：在 System.Runtime.Serialization.dll 中发生了“System.Xml.XmlException”类型的第一次机会异常

附加信息：读取 XML 数据时已超出最大字符串内容长度配额 (8192)。可以通过更改创建 XML 阅读器时使用的 XmlDictionaryReaderQuotas 对象的 MaxStringContentLength 属性来增加此配额。第 1 行，位置 9322。

在 web.config、configuration.svcinfo、configuration91.svcinfo 和 servicerefernces.clientinfo 中为 readerquotas 放置了以下条目：

```
 <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647"
                    maxArrayLength="2147483647" maxBytesPerRead="2147483647"
                    maxNameTableCharCount="2147483647" /> 
```

这是遇到错误的代码：

```
 public void saveD2ConfigFile(string d2ConfigString, string generatedConfigFilePath)
    {

        TextWriter d2Writer = new StreamWriter(@generatedConfigFilePath);

        try
        {
            string[] tempArray = d2ConfigString.Split('\n');
            for (int iterator = 0; iterator < tempArray.Count(); iterator++)
            {
                d2Writer. WriteLine(tempArray[iterator]);
            }
        }
        catch (Exception e)
        {
        }
        d2Writer.Flush();
        d2Writer.Close();
        d2Writer.Dispose();
    } 
```

# assembly - NASM 汇编字节边界对齐

> ID：15048717
> 
> 赞同：-1
> 
> 时间：2013-02-24T04:36:31.323
> 
> 标签：assembly, nasm

每个人，

我是学习 NASM 汇编语言的新手。从我的教科书中，示例代码之一如下：

```
ORG 0100H
JMP start
value DW 0
csmsg DB 13,10, 'CS (in hex) = ', '$'
dsmsg DB 13,10, 'DS (in hex) = ', '$'
esmsg DB 13,10, 'ES (in hex) = ', '$'
ssmsg DB 13,10, 'SS (in hex) = ', '$'
spmsg DB 13,10, 'SP (in hex) = ', '$'
;
%include "../mymacro/showbyte.mac"
;
start:
    MOV [value], CS
    MOV DX, csmsg
    CALL show
;
    MOV [value], DS
    MOV DX, dsmsg
    CALL show
;
    MOV [value], ES
    MOV DX, esmsg
    CALL show
;
    MOV [value], SS
    MOV DX, ssmsg
    CALL show
;
    MOV [value], SP
    MOV DX, spmsg
    CALL show
;
    MOV AX, 4c00H
    INT 21H
show:
    MOV AH,09H
    INT 21H
    showbyte value+1;
    showbyte value
    RET 
```

我的问题是我不知道以下代码行是做什么的......以及为什么我们需要这样做：

```
csmsg DB 13,10, 'CS (in hex) = ', '$' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T04:49:14.667

在 DOS 中，字符串以美元符号结束 - $ 而不是 NULL。13 是返回的 ASCII 码，10 是 ASCII 码换行。

# java - 计数器循环不起作用

> ID：15048720
> 
> 赞同：0
> 
> 时间：2013-02-24T04:36:45.047
> 
> 标签：java, loops, linked-list, counter

此方法旨在每次 a 中的项目`linked list`等于给定元素（在我的情况下为 elem）时添加到计数器。

我有;

```
public int count(E elem) {
    Node <E> current = new Node <E>();
    current = head;
    int counter = 0;

    if (current == null) {
        return 0; //current is null
    }

    for (int i = 0; i<size; i++){
            if (elem == current){
                counter++;
                head = current.getNext();
            }
    }
    return counter;
    }

public static void main(String[] args) {

    SLinkedListExtended<String> x = new SLinkedListExtended<String>();

    x.insertAtTail("abc");
    x.insertAtTail("def");
    x.insertAtTail("def");
    x.insertAtTail("xyz");
    System.out.println(x.count("def")); // should print "2"
    x.insertAtTail(null);
    x.insertAtTail("def");
    x.insertAtTail(null);
    System.out.println(x.count("def")); // should print "3"
    System.out.println(x.count(null)); // should print "2"
}
} 
```

但是在运行时，它每次都返回 0。我查看了我的循环，无法弄清楚我哪里出错了

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T04:43:08.537

在您的 for 循环中，您将 a 与 a 进行`Node<E>`比较`E`。他们永远不会平等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T04:48:36.510

三个问题：

1.  `elem == current`elem 是 E 类型， current 是 Node 类型。他们不会平等。您大概想要类似`current.getElement()`.
2.  您应该使用`.equals()`该比较，例如`elem.equals(current.getElement())`. 请注意，即使没有这个，您的测试也可能会起作用，但这只是因为您正在检查字符串并且它们是一种特殊情况（查找字符串实习）
3.  您的循环没有在列表中移动。你有`head = current.getNext();`你想要的`current = current.getNext()`

# php - Laravel 3 - 404 事件侦听器未从控制器中拾取

> ID：15048722
> 
> 赞同：0
> 
> 时间：2013-02-24T04:37:04.943
> 
> 标签：php, laravel, laravel-3

我正在尝试使用 Laravel 中的默认事件侦听器来检测错误（即 404）。

我有以下代码：

```
Event::listen('404', function()
{
    return Controller::call('errors@404');
}); 
```

如果 URL 不存在（即没有击中控制器），这可以正常工作（它调用错误控制器的 404 操作）。但是当路径到达控制器时，它似乎会忽略该事件侦听器。

我需要做些什么来告诉它使用那个监听器吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T12:54:52.153

如果您使用的是包罗万象的路线 - 例如：

```
Route::controller(Controller::detect()) 
```

那么你是对的 - 事件似乎没有被事件类捕获。这可能是一个错误 - 我不确定。

但是对于 404，这是一个非常简单的修复 - 只需更改您的 base_controller：

```
public function __call($method, $parameters)
{
    return Response::error('404');
} 
```

到

```
public function __call($method, $parameters)
{
    Event::fire('404');
} 
```

它按预期工作

# php - URI 正确时出现 404 错误

> ID：15048724
> 
> 赞同：2
> 
> 时间：2013-02-24T04:37:19.530
> 
> 标签：php, zend-framework2, zend-studio, zend-server

我正在使用 PHP 5.4、Zend Studio 和 Zend-Server。

使用此 uri 时出现 404 错误：

```
http://localhost/MyExample/public/index.php 
```

但是当我使用这个 uri 时，我得到了正确的页面来显示：

```
http://localhost/MyExample/public/index.php/ 
```

我认为这两个 uri 都是一样的。

这是 .htaccess 文件：

```
RewriteEngine On  
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteCond %{REQUEST_URI}::$1 ^(/.+)(.+)::\2$
RewriteRule ^(.*)$ - [E=BASE:%1]
RewriteRule ^(.*)$ %{ENV:BASE}index.php [NC,L] 
```

这是 index.php 代码：

```
<?php

/**
* This makes our life easier when dealing with paths. Everything is relative
* to the application root now.
*/
chdir(dirname(__DIR__));

// Setup autoloading
require 'init_autoloader.php';

// Run the application!
Zend\Mvc\Application::init(require 'config/application.config.php')->run(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T14:47:38.057

**注意：添加以前的评论作为答案**

这是正确的行为。键入时传递给路由器的 URI`http://localhost/index.php`包含`"index.php"`.

由于没有路由匹配`"index.php"`，Zend Framework 2 显示 404 错误。

使用`"/"`or`"/index.php/"`时，[路由匹配到的路径为空，所以得到](https://github.com/zendframework/zf2/blob/master/library/Zend/Mvc/Router/Http/TreeRouteStack.php#L133-L142)[ZendSkeletonApplication](https://github.com/zendframework/ZendSkeletonApplication)的默认`"home"`路由匹配。

# javascript - ajax 请求被“取消”，现在该网站已经上线

> ID：15048725
> 
> 赞同：0
> 
> 时间：2013-02-24T04:37:24.067
> 
> 标签：javascript, ajax, http

当我将新版本放在我网站的子目录 (www.staging.easyuniv.com) 中时，我所有的 AJAX 请求都运行良好。然后，当我将位于暂存中的站点移动到主目录中并使其生效时（www.easyzag.com），一切正常，但是在查看时，发送的几个 AJAX 请求显示为“已取消” chrome 开发工具的网络选项卡。

![展示](../Images/cea7de16695acb4cf0905b6b840b6b7d.png)

将请求发送到完全相同的 API 文件的其他人完全可以正常工作。此外，如果我复制它发送请求的 url，我会得到一个有效的响应。

我尝试使用调试器并没有真正获得任何见解。此外，控制台中没有错误。

关于我应该研究什么的任何想法？

谢谢

编辑：它也不再适用于分期，所以它必须是在上传中改变的东西。唯一令人困惑的部分是，就像我说的，一些请求确实有效，只有交易/randomActive 无效

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T05:06:25.123

问题是您的浏览器与发出 ajax 请求的方式不同。您的浏览器将遵循 301，但 ajax 请求不会自动执行此操作（至少它们可能不会）。看到这个小提琴：http: [//jsfiddle.net/pRvKz/](http://jsfiddle.net/pRvKz/)

```
$.get("http://easyuniv.com/API/deals/randomActive/2/0/0",function(x){
    alert(x);
}).fail(function(){
    alert("oh no the non-www request failed");
});

$.get("http://www.easyuniv.com/API/deals/randomActive/2/0/0",function(x){
    alert(x);
}).fail(function(){
    alert("oh no the www request failed");
}); 
```

PS 在制作上述小提琴时，我不小心偶然发现了您拥有的 SQL 注入。请在其他人发现它之前修复*它*。

# qt - Qt5 中的 glGenBuffers 在哪里？

> ID：15048729
> 
> 赞同：4
> 
> 时间：2013-02-24T04:38:06.240
> 
> 标签：qt, opengl, opengl-es, qt5

我似乎在 Qt5 中找不到该`glGenBuffer`函数，我的包含列表看起来像

```
#include <QtOpenGL/qgl.h>
#include <QtOpenGL/qglbuffer.h>
#include <QtOpenGL/qglcolormap.h>
#include <QtOpenGL/qglframebufferobject.h>
#include <QtOpenGL/qglfunctions.h>
#include <QtOpenGL/qglpixelbuffer.h>
#include <QtOpenGL/qglshaderprogram.h>
#include <GL/GLU.h> 
```

我正在尝试执行类似以下示例的操作：

[http://qt-project.org/doc/qt-5.0/qtopengl/cube.html](http://qt-project.org/doc/qt-5.0/qtopengl/cube.html)

它在哪里？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-06-18T13:28:59.573

我知道我迟到了，但这里有一个更优雅的解决方案（你不需要 GLEW =)）

除了确保您`QT += opengl`的 *.pro 文件中有，并且您的 Qt 版本有 OpenGL，并且您有`#include <QGLFunctions>`（您不需要上面列出的所有这些；只需这一行）头文件，你还需要一件事。

因此，假设您有一个调用所有这些函数的类：

```
class MeGlWindow : public QGLWidget
{
   // bla bla bla...
} 
```

您需要继承一个受保护的类[QGLFunctions](http://qt-project.org/doc/qt-4.8/qglfunctions.html)：

```
class MeGlWindow : public QGLWidget, protected QGLFunctions // add QGLFunctions
{
   // bla bla bla...
} 
```

`glewInit()`此外，就像在调用 OpenGL 函数之前需要调用一次 GLEW 一样，`QGLFunctions`需要调用`initializeGLFunctions()`. 例如， in `QGLWidget`,`initializeGL()`在开始绘制任何东西之前被调用一次：

```
void MeGlWindow::initializeGL()
{
    initializeGLFunctions();

    // ...now you can call your OpenGL functions!
    GLuint myBufferID;
    glGenBuffers(1, &myBufferID);

    // ...
} 
```

现在您应该能够在没有 GLEW 的情况下调用、`glGenBuffers`或任何 openGL 函数。`glBindBuffer``glVertexAttribPointer`

**更新**： 某些 OpenGL 函数喜欢`glVertexAttribDivisor`和`glDrawElementsInstanced`不使用`QGLFunctions`。这是因为`QGLFunctions`只提供 OpenGL/ES 2.0 API 特有的功能，可能没有这些功能。

要解决这个问题，您可以使用[QOpenGLFunctions_4_3_Core](http://qt-project.org/doc/qt-5/qopenglfunctions-4-3-core.html)（或类似的），它仅在 Qt 5.1 之后才可用。替换`QGLFunctions`为`QOpenGLFunctions_4_3_Core`和。`initializeGLFunctions()`_`initializeOpenGLFunctions()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T05:51:42.747

查看您引用的示例的来源：

[http://qt-project.org/doc/qt-5.0/qtopengl/cube-geometryengine-h.html](http://qt-project.org/doc/qt-5.0/qtopengl/cube-geometryengine-h.html)

它有：

```
#include <QGLFunctions> 
```

哪个有`glGenBuffers`

[http://qt-project.org/doc/qt-5.0/qtopengl/qglfunctions.html](http://qt-project.org/doc/qt-5.0/qtopengl/qglfunctions.html)

[http://qt-project.org/doc/qt-5.0/qtopengl/qglfunctions.html#glGenBuffers](http://qt-project.org/doc/qt-5.0/qtopengl/qglfunctions.html#glGenBuffers)

希望有帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T15:50:17.833

如果你添加`QT += opengl`到你的项目（.pro）文件中，你会发现你不需要指定你正在导入的每个头文件的文件夹，*你*就可以立即使用`#include <QGLFunctions>`。

使用`QGLFunctions`GLEW 的优势在于，您确信您的应用程序可以在任何平台上编译，并且不依赖于您的系统中 GLEW 库隐藏的位置：Qt 库将为您完成这项工作。正如@phyatt 所指出的，Qt 的 Cube 示例是了解如何使用该库的一个很好的示例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T09:11:30.437

我在示例文件夹中找到了我的问题的答案。

具体来说，有必要复制一个名为`glextensions.h`which functions like GLEW 的标题。

我最终使用了 GLEW。

# cassandra - 如何在 Hector 中使用复合键读取行？

> ID：15048730
> 
> 赞同：0
> 
> 时间：2013-02-24T04:38:07.823
> 
> 标签：cassandra, hector

我仍然不明白我应该如何编写一个带有复合键的 RangedSliceQuery。周围的其他问题不是太笼统。

我的表中的主键是 PRIMARY KEY (Year int, Month int, DayofMonth int, UniqueCarrier varchar, FlightNum int))，还有 20 列。我应该如何创建复合变量？我应该如何设置开始和结束？我的目标是使用 RangedSliceQuery 对表格进行分页。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T17:24:59.613

由于看起来您正在使用 CQL 来定义密钥，因此这会创建一个复合 CQL 密钥，而不是复合 Cassandra 密钥。RangedSliceQuery 将使用 Cassandra（存储级别）键，根据[这篇文章](http://www.datastax.com/dev/blog/schema-in-cassandra-1-1)，它将是主键的第一个元素。所以这会影响你在 Hector 中执行 RangeQuery 的方式。该博客文章还描述了数据的 CQL 查询，您也可以在您的情况下使用这些查询。

如果您创建 Cassandra 键是 Composite 的模式，那么您将像任何其他模式一样选择开始和结束值，只是类型是 Composite。您如何遍历密钥受您选择的分区的影响，即顺序保留 (OPP) 或随机 (RP)。

# jquery - 如何在 Rails 中动态添加选择菜单选项

> ID：15048733
> 
> 赞同：1
> 
> 时间：2013-02-24T04:38:54.907
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3

有谁知道是否有一个简单的解决方案可以在 Rails 的表单中动态添加新选项到选择菜单？

动态表单 railscast ( [http://railscasts.com/episodes/403-dynamic-forms](http://railscasts.com/episodes/403-dynamic-forms) ) 专注于根据在另一个选择菜单中所做的选择动态过滤第二个选择菜单，这不是我想要的。我正在寻找一种解决方案，其中表单仅包含一个选择菜单，并且可以在表单上添加新选项。

我觉得解决方案可能类似于嵌套模型表单 railscast ( [http://railscasts.com/episodes/196-nested-model-form-revised](http://railscasts.com/episodes/196-nested-model-form-revised) ) 中提到的解决方案，但在该示例中，表单必须在值之前提交在数据库中更新。我希望用户能够添加一个新的选择菜单选项，然后在提交之前继续表单的其余部分。

在这个阶段，我还想避免使用 railscast jquery 自动完成解决方案，因为它使用文本字段而不是选择菜单。

目前，我认为解决方案在选择菜单旁边有一个“添加新”按钮。当单击按钮时，会打开一个模式，允许用户输入新的选择菜单选项然后保存（更新数据库），模式关闭并更新表单。我只是想知道现有的优雅解决方案是否已经存在。

任何帮助将不胜感激。

谢谢。

更新：

我还没有创建任何代码来实现它，但这是我的表单：

```
<%= simple_form_for @other, :html => { :class => 'form-horizontal' } do |f| %>  
<fieldset>
  <%= f.error_notification %>           
  <%= f.association :other_type, :include_blank => false %>      
  <%= f.input :cost%>
  <%= f.input :invoice %>             
  <%= f.input :notes, :input_html => {:class => "row-fluid"} %>
<%= f.error :base %>
<div id="eze_form_actions" class="form-actions">
  <%= f.submit nil, :class => 'btn btn-primary' %>
  <%= link_to 'Cancel', others_path, :class => 'btn' %>
</div>
</fieldset>    
<% end %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T16:37:44.630

我在我们的 CMS 中为类别做了类似的事情，用户可以轻松地添加一个新类别，然后我们 POST 到服务器，它以 HTML 响应（通过部分呈现），然后我们将其注入到我们的复选框中。您可以轻松地复制它以用于您的目的：

要让它工作，你需要一个表单、一个端点和一些 javascript：

**形式**

不确定您的表单将包含哪些内容，但请使用常规表单助手并确保表单设置为`remote: true`.

**终点**

您的端点应该呈现一个部分，它应该只包含 .. 的 html，我们将呈现为一个字符串并传递回要添加的前端。

```
def endpoint
  # create your new model with the params
  @model = Model.create(some: attribute)
  if @model.errors.empty and @model.save
    render json: { html: render_to_string(partial: "path/to/partial", locals: { model: @model })
  end
end 
```

** JavaScript **

```
$(form)
  .bind('ajax:success', function(data, status) {
    $(select).append(status.html)
  }) 
```

status.html 应该是这样的`<option>...</option>`，所以我们只是附加到我们的选择中。

让我知道这是否没有意义。我希望它有所帮助。

# python - 无法执行“python setup.py build”命令..！

> ID：15048747
> 
> 赞同：0
> 
> 时间：2013-02-24T04:42:40.117
> 
> 标签：python, gcc, build, setup.py

我正在尝试在 BACKTRACK 5 R1 虚拟机上安装**pylorcon-1**（用于编写无线数据包嗅探器的 Lorcon 的 Python 包装器）...我从 [Pylorcon 官方页面] [1] 下载的包有 3 个文件 pylorcon .c 、 setup.py 和 tx.py .. 所以正如 README 文件中给出的那样，我尝试执行命令...

```
python setup.py build 
```

执行上述命令后，我得到以下输出：

```
running build 
running build_ext
building 'pylorcon' extension 
gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -I/usr/include/python2.6 -c pylorcon.c -o build/temp.linux-i686-2.6/pylorcon.o 
pylorcon.c:8:20: error: Python.h: No such file or directory
pylorcon.c:9:26: error: structmember.h: No such file or directory
pylorcon.c:10:21: error: tx80211.h: No such file or directory
pylorcon.c:11:28: error: tx80211_packet.h: No such file or directory
pylorcon.c:13: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
pylorcon.c:16: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
pylorcon.c:74: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
pylorcon.c:81: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
pylorcon.c:118: error: expected specifier-qualifier-list before ‘PyObject_HEAD’
pylorcon.c: In function ‘Lorcon_dealloc’:
pylorcon.c:128: warning: implicit declaration of function ‘tx80211_getmode’
pylorcon.c:128: error: ‘Lorcon’ has no member named ‘in_tx’
pylorcon.c:129: warning: implicit declaration of function ‘tx80211_close’
pylorcon.c:129: error: ‘Lorcon’ has no member named ‘in_tx’
pylorcon.c:131: error: ‘Lorcon’ has no member named ‘ob_type’
pylorcon.c:131: error: ‘PyObject’ undeclared (first use in this function)
pylorcon.c:131: error: (Each undeclared identifier is reported only once
pylorcon.c:131: error: for each function it appears in.)
pylorcon.c:131: error: expected expression before ‘)’ token
pylorcon.c: At top level:
pylorcon.c:136: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
pylorcon.c:151: error: expected declaration specifiers or ‘...’ before ‘PyObject’
pylorcon.c:151: error: expected declaration specifiers or ‘...’ before ‘PyObject’
pylorcon.c: In function ‘Lorcon_init’:
pylorcon.c:152: error: ‘PyObject’ undeclared (first use in this function)
pylorcon.c:152: error: ‘iface’ undeclared (first use in this function)
pylorcon.c:152: error: ‘driver’ undeclared (first use in this function)
pylorcon.c:152: warning: left-hand operand of comma expression has no effect
pylorcon.c:153: error: ‘NULL’ undeclared (first use in this function)
pylorcon.c:155: warning: implicit declaration of function ‘PyArg_ParseTupleAndKeywords’
pylorcon.c:155: error: ‘args’ undeclared (first use in this function)
pylorcon.c:155: error: ‘kwds’ undeclared (first use in this function)
pylorcon.c:161: warning: implicit declaration of function ‘Py_INCREF’
pylorcon.c:162: error: ‘Lorcon’ has no member named ‘iface’
pylorcon.c:162: warning: statement with no effect
pylorcon.c:164: error: ‘Lorcon’ has no member named ‘driver’
pylorcon.c:164: warning: statement with no effect
pylorcon.c:166: error: ‘Lorcon’ has no member named ‘drivertype’
pylorcon.c:166: warning: implicit declaration of function ‘tx80211_resolvecard’
pylorcon.c:166: warning: implicit declaration of function ‘PyString_AsString’
pylorcon.c:166: error: ‘Lorcon’ has no member named ‘driver’
pylorcon.c:166: warning: statement with no effect
pylorcon.c:168: error: ‘Lorcon’ has no member named ‘drivertype’
pylorcon.c:168: error: ‘INJ_NODRIVER’ undeclared (first use in this function)
pylorcon.c:169: warning: implicit declaration of function ‘PyErr_SetString’
pylorcon.c:169: error: ‘LorconError’ undeclared (first use in this function)
pylorcon.c:173: warning: implicit declaration of function ‘tx80211_init’
pylorcon.c:173: error: ‘Lorcon’ has no member named ‘in_tx’
pylorcon.c:173: error: ‘Lorcon’ has no member named ‘iface’
pylorcon.c:174: error: ‘Lorcon’ has no member named ‘drivertype’
pylorcon.c:175: warning: implicit declaration of function ‘tx80211_geterrstr’
pylorcon.c:175: error: ‘Lorcon’ has no member named ‘in_tx’
pylorcon.c:179: warning: implicit declaration of function ‘tx80211_open’
pylorcon.c:179: error: ‘Lorcon’ has no member named ‘in_tx’
pylorcon.c:180: error: ‘Lorcon’ has no member named ‘in_tx’
pylorcon.c:183: warning: implicit declaration of function ‘tx80211_initpacket’
pylorcon.c:183: error: ‘Lorcon’ has no member named ‘in_packet’
pylorcon.c: At top level:
pylorcon.c:191: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
pylorcon.c:196: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
pylorcon.c:201: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
pylorcon.c:238: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
pylorcon.c:269: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
pylorcon.c:297: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
pylorcon.c:310: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
pylorcon.c:327: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
pylorcon.c:372: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
pylorcon.c:422: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
pylorcon.c:455: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
pylorcon.c:496: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
pylorcon.c:502: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
pylorcon.c:523: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘Lorcon_members’
pylorcon.c:527: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘Lorcon_methods’
pylorcon.c:562: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘LorconType’
pylorcon.c:604: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘pylorcon_methods’
pylorcon.c: In function ‘initpylorcon’:
pylorcon.c:617: error: ‘PyObject’ undeclared (first use in this function)
pylorcon.c:617: error: ‘m’ undeclared (first use in this function)
pylorcon.c:617: error: invalid operands to binary * (have ‘char **’ and ‘char **’)
pylorcon.c:617: warning: statement with no effect
pylorcon.c:619: warning: implicit declaration of function ‘PyType_Ready’
pylorcon.c:619: error: ‘LorconType’ undeclared (first use in this function)
pylorcon.c:622: warning: implicit declaration of function ‘Py_InitModule3’
pylorcon.c:622: error: ‘pylorcon_methods’ undeclared (first use in this function)
pylorcon.c:623: warning: statement with no effect
pylorcon.c:625: error: ‘NULL’ undeclared (first use in this function)
pylorcon.c:628: error: ‘LorconError’ undeclared (first use in this function)
pylorcon.c:628: warning: implicit declaration of function ‘PyErr_NewException’
pylorcon.c:628: warning: statement with no effect
pylorcon.c:630: warning: implicit declaration of function ‘PyModule_AddObject’
pylorcon.c:633: error: expected expression before ‘)’ token
pylorcon.c:633: error: invalid operands to binary * (have ‘char **’ and ‘char **’)
error: command 'gcc' failed with exit status 1 
```

我怎样才能解决这个问题？

@Ric ...我执行了您告诉我的命令 **sudo apt-get install python-dev**然后再次执行命令**python setup.py build**我得到以下输出：

运行 build
运行 build_ext
构建 'pylorcon' 扩展
gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -I/usr/include/python2.6 -c pylorcon.c - o build/temp.linux-i686-2.6/pylorcon.o pylorcon.c:10:21: 错误: tx80211.h: 没有这样的文件或目录
pylorcon.c:11:28: 错误: tx80211_packet.h: 没有这样的文件或目录
pylorcon.c：在函数“capToList”中：
pylorcon.c:20：错误：“TX80211_CAP_SNIFF”未声明（在此函数中首次使用）

pylorcon.c:20：错误：（每个未声明的标识符仅报告一次
pylorcon.c :20: 错误: 对于它出现的每个函数。)
pylorcon.c:23: 错误: 'TX80211_CAP_TRANSMIT' 未声明（在此函数中首次使用）

pylorcon.c:26：错误：未声明“TX80211_CAP_SEQ”（在此函数中首次使用）
pylorcon.c：29：错误：未声明“TX80211_CAP_BSSTIME”（在此函数中首次使用）
pylorcon.c:32：错误：未声明“TX80211_CAP_FRAG” （在此函数中首次使用）
pylorcon.c:35：错误：'TX80211_CAP_CTRL'未声明（在此函数中首次使用）
pylorcon.c:38：错误：'TX80211_CAP_DURID'未声明（在此函数中首次使用）
pylorcon.c:41 : 错误：'TX80211_CAP_SNIFFACK' 未声明（首次在此函数中使用）
pylorcon.c:44：错误：'TX80211_CAP_SELFACK' 未声明（首次在此函数中使用）
pylorcon.c:47：错误：'TX80211_CAP_TXNOWAIT' 未声明（首次在此使用功能）
pylorcon.c:50: 错误: 'TX80211_CAP_DSSSTX' 未声明（在此函数中首次使用）
pylorcon.c:53: 错误: 'TX80211_CAP_OFDMTX' 未声明（在此函数中首次使用
） （在此函数中首次使用）
pylorcon.c:59：错误：未声明“TX80211_CAP_SETRATE”（在此函数中首次使用）
pylorcon.c:62：错误：未声明“TX80211_CAP_SETMODULATION”（在此函数中首次使用）
pylorcon.c:65 : 错误 : 'TX80211_CAP_NONE' 未声明（在此函数中首次使用
）
'：
pylorcon.c:86：警告：函数“tx80211_getcardlist”的隐式声明<br> pylorcon.c:86：警告：赋值使指针从整数而不进行
强制转换 pylorcon.c:91：错误：取消引用指向不完整类型
pylorcon.c的指针：96：错误：取消引用指向不完整类型
pylorcon.c：103的指针：错误：取消引用指向不完整类型
pylorcon.c：105的指针：错误：取消引用指向不完整类型
pylorcon.c：111的指针：警告：函数'tx80211_freecardlist的隐式声明'<br> pylorcon.c：在顶层：
pylorcon.c:119：错误：字段“in_tx”的类型不完整
pylorcon.c:120：错误：字段“in_packet”的类型不完整
pylorcon.c：在函数“Lorcon_dealloc”中'：
pylorcon.c:128：警告：函数“tx80211_getmode”的隐式声明<br> pylorcon.c:129：警告：函数“tx80211_close”的隐式声明<br> pylorcon.c：在函数“Lorcon_new”中：
pylorcon.c： 142：错误：未声明“INJ_NODRIVER”（在此函数中首次使用）
pylorcon.c：在函数“Lorcon_init”中：
pylorcon.c:166：警告：函数“tx80211_resolvecard”的隐式声明<br> pylorcon.c:168：错误: 'INJ_NODRIVER' 未声明（在此函数中首次使用）
pylorcon.c:173：警告：函数“tx80211_init”的隐式声明<br> pylorcon.c:175：警告：函数“tx80211_geterrstr”的隐式声明<br> pylorcon.c:179：警告：函数“tx80211_open”的隐式声明'<br> pylorcon.c:183：警告：函数“tx80211_initpacket”的隐式声明<br> pylorcon.c：在函数“Lorcon_getmode”中：
pylorcon.c:210：错误：未声明“TX80211_MODE_AUTO”（首次在此函数中使用)
pylorcon.c:213: error: 'TX80211_MODE_ADHOC' undeclared (first use in this function)
pylorcon.c:216: error: 'TX80211_MODE_INFRA' undeclared (first use in this function)
pylorcon.c:219: error: 'TX80211_MODE_MASTER'未声明（在此函数中首次使用）
pylorcon.c:222: 错误: 'TX80211_MODE_REPEAT' 未声明（在此函数中首次使用）
pylorcon.c:225: 错误: 'TX80211_MODE_SECOND' 未声明（在此函数中首次使用
） （在此函数中首次使用）
pylorcon.c：在函数'Lorcon_setmode'中：
pylorcon.c：247：错误：'TX80211_MODE_AUTO'未声明（在此函数中首次使用）
pylorcon.c：249：错误：'TX80211_MODE_ADHOC'未声明（第一次在此函数中使用）
pylorcon.c:251：错误：未声明“TX80211_MODE_INFRA”（在此函数中首次使用）
pylorcon.c:253：错误：未声明“TX80211_MODE_MASTER”（在此函数中首次使用）
pylorcon.c:255：错误: 'TX80211_MODE_REPEAT' 未声明（在此函数中首次使用）
pylorcon.c:257：错误：未声明“TX80211_MODE_SECOND”（首次在此函数中使用） pylorcon.c
:259：错误：未声明“TX80211_MODE_MONITOR”（首次在此函数中使用 ） c:278: error: 'TX80211_FUNCMODE_RFMON' undeclared (first use in this function) pylorcon.c:280: error: 'TX80211_FUNCMODE_INJECT' undeclared (first use in this function) pylorcon.c:282: error: 'TX80211_FUNCMODE_INJMON' undeclared (first use在此函数中使用） pylorcon.c:287：警告：函数“tx80211_setfunctionalmode”的隐式声明<br> pylorcon.c：在函数“Lorcon_getchannel”中：

pylorcon.c:300：警告：函数“tx80211_getchannel”的隐式声明<br> pylorcon.c：在函数“Lorcon_setchannel”中：
pylorcon.c:317：警告：函数“tx80211_setchannel”的隐式声明<br> pylorcon.c：在函数“Lorcon_gettxrate”中：
pylorcon.c:329：警告：函数“tx80211_gettxrate”的隐式声明<br> pylorcon.c:332：错误：未声明“TX80211_RATE_DEFAULT”（在此函数中首次使用）
pylorcon.c:335：错误: 'TX80211_RATE_1MB' 未声明（首次在此函数中使用）
pylorcon.c:338: 错误：'TX80211_RATE_2MB' 未声明（首次在此函数中使用）
pylorcon.c:341: 错误：'TX80211_RATE_5_5MB' 未声明（首次在此函数中使用）
pylorcon.c:344：错误：'TX80211_RATE_6MB' 未声明（在此函数中首次使用）
pylorcon.c:347：错误：未声明“TX80211_RATE_9MB”（在此函数中首次使用）
pylorcon.c：350：错误：未声明“TX80211_RATE_11MB”（在此函数中首次使用）
pylorcon.c:353：错误：未声明“TX80211_RATE_24MB” （在此函数中首次使用）
pylorcon.c:356：错误：未声明“TX80211_RATE_36MB”（在此函数中首次使用）
pylorcon.c：359：错误：未声明“TX80211_RATE_48MB”（在此函数中首次使用）
pylorcon.c:362 : 错误 : 'TX80211_RATE_108MB' 未声明（在此函数中首次使用
）
'TX80211_CAP_SETRATE' 未声明（在此函数中首次使用）
pylorcon.c:386: 错误: 'TX80211_RATE_DEFAULT' 未声明（首次在此函数中使用）
pylorcon.c:388: 错误: 'TX80211_RATE_1MB' 未声明（首次在此函数中使用）
pylorcon.c:390: 错误: 'TX80211_RATE_2MB' 未声明（在此函数中首次使用）
pylorcon.c:392：错误：未声明“TX80211_RATE_5_5MB”（在此函数中首次使用）
pylorcon.c：394：错误：未声明“TX80211_RATE_6MB”（在此函数中首次使用）
pylorcon.c:396 : error: 'TX80211_RATE_9MB' undeclared (first use in this function)
pylorcon.c:398: error: 'TX80211_RATE_11MB' undeclared (first use in this function)
pylorcon.c:400: error: 'TX80211_RATE_24MB' undeclared (first use in this function)功能）
pylorcon.c:402：错误：未声明“TX80211_RATE_36MB”（在此函数 中
首次使用）
（在此函数中首次使用）
pylorcon.c:412：警告：函数“tx80211_settxrate”的隐式声明<br> pylorcon.c：在函数“Lorcon_getmodulation”中：
pylorcon.c:425：警告：函数“tx80211_getmodulation”的隐式声明<br> pylorcon.c:427: error: 'TX80211_MOD_DEFAULT' undeclared (first use in this function)
pylorcon.c:430: error: 'TX80211_MOD_FHSS' undeclared (first use in this function)
pylorcon.c:433: error: ' TX80211_MOD_DSSS' 未声明（本函数首次使用）
pylorcon.c:436：错误：未声明“TX80211_MOD_OFDM”（在此函数 中
首次使用）
（在此函数中首次使用）
pylorcon.c:445：错误：未声明“TX80211_MOD_MIMOGF”（在此函数中首次使用）
pylorcon.c：在函数“Lorcon_setmodulation”中：
pylorcon.c:459：错误：未声明“TX80211_CAP_SETMODULATION”（首先在此函数中使用）
pylorcon.c:469：错误：未声明“TX80211_MOD_DEFAULT”（在此函数中首次使用）
pylorcon.c：471：错误：未声明“TX80211_MOD_FHSS”（在此函数中首次使用）
pylorcon.c:473：错误: 'TX80211_MOD_DSSS' 未声明（在此函数中首次使用）
pylorcon.c:475：错误：未声明“TX80211_MOD_OFDM”（在此函数 中
首次使用）
（在此函数中首次使用）
pylorcon.c:481：错误：未声明“TX80211_MOD_MIMOGF”（在此函数中首次使用）
pylorcon.c:487：警告：函数“tx80211_setmodulation”的隐式声明<br> pylorcon.c：在函数中“Lorcon_txpacket”：
pylorcon.c:514：警告：函数“tx80211_txpacket”的隐式声明<br>错误：命令“gcc”失败并退出状态

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T04:46:08.377

您需要为您的操作系统安装所需的开发头文件。

来自[Building pylorcon2 页面](http://code.google.com/p/pylorcon2/wiki/BuildingPyLorcon2)

```
$ sudo apt-get install libpcap-dev libnl-dev python-dev 
```

如果您仍然遇到问题，请按照其余说明进行操作。

# python - Python中二维数组的替代方案

> ID：15048752
> 
> 赞同：1
> 
> 时间：2013-02-24T04:44:10.657
> 
> 标签：python, arrays, class

我需要一个`n`元素数组，其中每个元素都有 2 个属性。

```
A.element[0].name="qwe"
A.element[0].age=23
A.element[1].name="www"
A.element[1].age=24
...
A.element[n].name="e"
A.element[n].age=25 
```

是否有另一种不涉及设计类的形式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T04:48:36.673

有[`collections.namedtuple`](http://docs.python.org/3/library/collections.html?highlight=namedtuple#collections.namedtuple)。

```
>>> from collections import namedtuple
>>> Element = namedtuple('Element', 'name age')
>>> A.element[0] = Element('qwe', 23)
>>> print A.element[0].name
qwe
>>> print A.element[0].age
23 
```

然而，这些是元组，而不是列表，因此不能更改。此外，这些本质上仍然是类，但您只是不使用`class`关键字定义它们。请参阅[this](https://stackoverflow.com/a/2970722/1907098)以获得深入的解释。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T04:47:33.743

您可以使用字典数组。

像这样的东西：

```
A = [
    {'name': 'qwe', 'age': 23},
    {'name': 'www', 'age': 24}
] 
```

您可以通过执行以下操作来简化插入：

```
A = []

def addPerson(name, age):
    global A
    A.append({'name': name, 'age': age}) 
```

或者只是将字典制作成数组，这样您就不必在每一行中指定“姓名”和“年龄”。编写一个代表一个人（或任何它）的类可能更容易。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T06:03:24.363

如果你使用numpy，你也可以使用结构数组：

```
In [66]: struct = np.dtype([("name", np.object), ("age", np.int)])
a = np.array([("abc", 12), ("def", 20), ("xyz", 50)], dtype=struct)
a[0]
Out[66]: ('abc', 12)

In [67]: a[0]["name"]
Out[67]: 'abc'

In [68]: a["name"]
Out[68]: array([abc, def, xyz], dtype=object)

In [69]: a["age"]
Out[69]: array([12, 20, 50])

In [72]: a["age"][2]
Out[72]: 50 
```

# opencv - SimpleCV 无法加载 OpenCV 库

> ID：15048753
> 
> 赞同：1
> 
> 时间：2013-02-24T04:44:27.210
> 
> 标签：opencv, simplecv

我已经从 Win Server 2008 R2 中的 1.3 Superpack 安装了 SimpleCV。

在 Python 中，我可以将图像库加载为：

> 从 SimpleCV 导入图像

这在执行为的 Python 脚本中正常工作

> 蟒蛇脚本.py

它也适用于 IDLE 和 python 交互。

这只有在我以安装 SimpleCV 时使用的用户帐户登录时才能正常工作。

我已将系统变量 PYTHONPATH 设置为值 C:\SimpleCV1.3\files\opencv\build\python\2.7

如果我使用另一个帐户登录，“从 SimpleCV 导入图像”在交互模式下从 IDLE 正确执行。如果我从 Windows Run "C:\Python27\python" 启动 python，它也会正确执行。如果我只是启动一个命令 shell 并启动 python interactve，我会得到：

> C:\Python27>python Python 2.7.3 (default, Apr 10 2012, 23:31:26) [MSC v.1500 32 bit (Intel)] on win 32 键入“help”、“copyright”、“credits”或“许可证”以获取更多信息。
> 
> > > > 从 SimpleCV 导入图像
> 
> 回溯（最后一次调用）：文件“”，第 1 行，在文件“C:\Python27\lib\site-packages\SimpleCV__init__.py”，第 3 行，在
> 
> ```
> from SimpleCV.base import *   File "C:\Python27\lib\site-packages\SimpleCV\base.py", line 59, in <module>
> raise ImportError("Cannot load OpenCV library which is required by SimpleCV" ) ImportError: Cannot load OpenCV library which is required by SimpleCV 
> ```

谁能帮我理解为什么这只能在原始安装帐户中正常工作，并且（部分）在其他帐户中工作？我特别困惑的是它会在 IDLE 交互中正确执行，而不是从脚本的命令行执行中正确执行。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T14:55:30.457

您能否验证您是否正确设置了两条路径？

```
SETX PATH C:/Python27/;C:/Python27/Scripts/;C:/OpenCV2.3/opencv/build/x86/vc10/bin/;%PATH%
SETX PYTHONPATH C:/OpenCV2.3/opencv/build/python/2.7/;%PYTHONPATH% 
```

您可能还想在脚本和终端中尝试以下操作：

```
import cv
print cv.__file__
import cv2
print cv2.__file__ 
```

看看一个有效还是另一个无效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-21T15:30:38.337

`enter code here`如果我在进行安装（make install）时选择使用 PYTHON 构建 opencv（使用 CMAKE 配置和生成），我曾经从源代码中安装 opencv消息引发 ImportError（“无法加载 SimpleCV 所需的 OpenCV 库”），但我可以看到库 cv2.so 在尝试查找后存在于路径 /usr/local/lib/python2.7/dist-packages在几个站点上回答并花了很多时间但没有成功我试图将 CV2.SO 重命名为 CV2.PYD !!!!它工作了为此我在 linux 中使用了非常简单的命令::

cd /usr/local/lib/python2.7/dist-packages

mv cv2.so cv2.pyd

# java - gnu trove 库中是否有任何有序的地图？

> ID：15048754
> 
> 赞同：2
> 
> 时间：2013-02-24T04:44:28.250
> 
> 标签：java, trove4j

我`LinkedHashMap<Double, String>`在我的程序中使用 a 。但我需要一个原始数据类型。我们有地图但没有订购？关于订购一个的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-31T20:43:03.627

Trove 中目前没有类似于 LinkedHashMap 的实现。[此处](https://bitbucket.org/robeden/trove/issue/12/linkedhashmap)存在功能请求。如果它是您仍然感兴趣的功能，那么在那里投票会很有用。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-09-18T06:19:54.130

这根本不是问题使用这个：

```
 private TDoubleObjectMap<String> obj = new TDoubleObjectHashMap<String>(); 
```

其中 TDoubleObjectMap 来自 gnu.trove.map 和 HashMap 来自 gnu.trove.map.hash；PS看起来没有链接的地图类。

# javascript - 我在尝试使用 RegExp 匹配电子邮件地址时犯了什么错误？

> ID：15048757
> 
> 赞同：0
> 
> 时间：2013-02-24T04:44:53.433
> 
> 标签：javascript, regex

我正在尝试使用以下脚本检查*电子邮件地址*的格式，但在某个地方我犯了一个错误。当我尝试将模式`reg_1`与我匹配时，`str_1 , str_2, str_3`我得到了错误。这是为什么 ？

```
var reg_1 = /^[a-zA-Z][0-9_.][@]{1}[a-zA-Z0-9][.]{1}[a-zA-Z0-9]$/;
var id_1 = "suhailgupta03@gmail.com";
var id_2 = "gupta.suhail@rediff.com";
var id_3 = "suhail_gupta03@ovi.com";

document.write(reg_1.test(id_1));
document.write("<br / >" + reg_1.test(id_2));
document.write("<br / >" + reg_1.test(id_3)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T04:47:21.200

您似乎误解了字符类表示法`[...]`。例如，`[a-zA-Z][0-9_.]`表示“一个字母`a-z`或`A-Z`，后跟一个数字`0-9`或下划线`_`或点`.`”。

我猜你想要的是：

```
var reg_1 = /^[a-zA-Z0-9_.]+@[a-zA-Z0-9]+\.[a-zA-Z0-9]+$/; 
```

除了真正必要的更改之外，我还进行了一些清理：具体来说，我更改`[@]`为 just `@`（没有理由将其包装在字符类中）和`[.]`更改为`\.`（同样，除了`.`当您的意思是“时需要转义”点”而不是“任何字符”），我删除了`{1}`（因为无论如何这是隐含的）。

（但请注意，这不是通用的电子邮件地址验证正则表达式。电子邮件地址实际上非常复杂，真正验证电子邮件地址的唯一方法是向它发送电子邮件，看看是否它来了！）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T04:47:12.557

不要这样做。我实际上只是在写一篇关于为什么这是一种有缺陷的方法的博客文章：[如何（不）验证电子邮件地址](http://blogger.ziesemer.com/2013/02/how-to-not-validate-email-address.html)

总之，这样的事情应该绰绰有余：

```
var emailValidation = /.+@.+\..+/;
console.log(emailValidation.exec("user@example.com") != null); // Result: "true"
console.log(emailValidation.exec("www.example.com") != null); // Result: "false" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T04:49:37.557

一方面，您正在寻找一个以两个字符后跟一个 @ 符号开头的字符串，而您的所有电子邮件都不是这样开头的。

# javascript - 需要创建jquery密码提示（应该很简单）

> ID：15048760
> 
> 赞同：0
> 
> 时间：2013-02-24T04:45:57.193
> 
> 标签：javascript, jquery, html, password-protection

所以我为我托管的寻宝游戏创建了一个网站，但我需要一个密码提示来显示几乎每个页面，以确保他们已经完成了继续前进的挑战。我正在使用 Jquery，让密码提示出现的唯一方法是在我刷新页面之后，这不好。我需要一种将一个页面链接到另一个页面的方法，并在他们看到该页面之前显示密码提示。这是重要的html。另外，如果可以的话。每当我刷新页面时，所有的 CSS 似乎都消失了，我留下了文字。如果你能请帮忙。

```
 <!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>jQuery</title>
      <link rel="stylesheet" href="../themes/scavenger-hunt.min.css" />
    <link rel="stylesheet" href="../Publish/jquery-mobile/jquery.mobile.structure-1.0.min.css" />
    <script src="http://code.jquery.com/jquery-1.8.3.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.3.0-rc.1/jquery.mobile-1.3.0-rc.1.min.js"></script>
  <body> 
<script language="javascript">
var password
var pass1="123"

password=prompt('Please enter password to view page')
if (password==pass1)
alert('password correct! Press ok to continue.')

else{
  window.location="index.html";
  alert('password incorrect! Redirecting')
}

</script>
<div data-role="page" id="home">
  <div data-role="header">
    <h1>Hint 1</h1>

  </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T05:02:34.403

有几种方法可以解决这个问题，但这里有两种。一个比另一个容易。我这样做的第一种方法是将所有内容都放在页面上，但在页面加载时将其隐藏。如果密码输入正确，则会显示该页面。

```
body { display:none; }

if (password == pass1) { $('body').show(); } 
```

[http://jsfiddle.net/5JyTy/](http://jsfiddle.net/5JyTy/)

另一种是使用 AJAX 并且仅在密码实际正确时才请求/显示内容。

```
if (password == pass1) { $('body').load('ajax/test.html'); } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-26T07:16:57.757

你可以使用ajax调用和jquery msg插件，很好很简单

[http://dreamerslab.com/blog/en/jquery-blockui-alternative-with-jquery-msg-plugin/](http://dreamerslab.com/blog/en/jquery-blockui-alternative-with-jquery-msg-plugin/)

# c# - Gridview排序不起作用

> ID：15048766
> 
> 赞同：2
> 
> 时间：2013-02-24T04:46:43.970
> 
> 标签：c#, asp.net, sorting, gridview

我尝试使用优化的分页来实现排序，但是当我尝试排序时，什么也没有发生。排序标题的设计发生了变化，仅此而已。

网格视图：

```
<div align="center">

     <asp:ObjectDataSource ID="odsSupplier" runat="server" SelectMethod="GetSuppliers"
        TypeName="Supplier" EnablePaging="True" MaximumRowsParameterName="PageSize" SelectCountMethod="GetRowsCount" StartRowIndexParameterName="StartRow" SortParameterName="sortBy">
    </asp:ObjectDataSource>

    <asp:GridView ID="supplierGridView" runat="server" AllowSorting="True" 
         CellPadding="4" DataSourceID="odsSupplier"
        ForeColor="#333333" GridLines="None" AllowPaging="True" PageSize="15" 
         Width="300px">

        <Columns>
            <asp:ButtonField ButtonType="button" CommandName="Ed" HeaderText="Edit" 
                Text="Edit">
                <ControlStyle Width="75px" />
                <HeaderStyle HorizontalAlign="Center" Width="75px" />
                <ItemStyle Width="75px" HorizontalAlign="Center" />
            </asp:ButtonField>

            <asp:ButtonField ButtonType="button" CommandName="Del" HeaderText="Delete" 
                Text="Delete">
                <ControlStyle Width="75px" />
                <HeaderStyle HorizontalAlign="Center" Width="75px" />
                <ItemStyle Width="75px" HorizontalAlign="Center" />
            </asp:ButtonField>
        </Columns>

        <EditRowStyle BackColor="#999999" />
        <FooterStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />
        <HeaderStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />
        <PagerSettings Mode="NumericFirstLast" />
        <PagerStyle BackColor="#284775" ForeColor="White" HorizontalAlign="Center" />
        <RowStyle BackColor="#F7F6F3" ForeColor="#333333" />
        <SelectedRowStyle BackColor="#E2DED6" Font-Bold="True" ForeColor="#333333" />
        <SortedAscendingCellStyle BackColor="#E9E7E2" />
        <SortedAscendingHeaderStyle BackColor="#506C8C" />
        <SortedDescendingCellStyle BackColor="#FFFDF8" />
        <SortedDescendingHeaderStyle BackColor="#6F8DAE" />
        <AlternatingRowStyle BackColor="White" ForeColor="#284775" />
    </asp:GridView>
</div> 
```

供应商类

```
public DataView GetSuppliers(int StartRow, int PageSize)
{
    return GetData(StartRow, PageSize, "EquipmentSupplierID");
}

public DataView GetSuppliers(int StartRow, int PageSize, string sortBy)
{
    return GetData(StartRow, PageSize, sortBy);
}

public DataView GetSuppliers(string sortBy)
{
    return GetData(int.MaxValue, 0, sortBy);
}

private DataView GetData(int StartRow, int PageSize, string sortBy)
{
    dbconn db = new dbconn();
    return db.getSupplierData(StartRow, PageSize, sortBy).DefaultView;
}

public int GetRowsCount()
{
    dbconn db = new dbconn();
    return db.getSupplierCount();
} 
```

dbconn 类

```
public int getSupplierCount()
{
    open();
    setQuery("SELECT COUNT(*) AS Count FROM equipmentsupplier");
    MySqlDataReader msdr = executeReader();
    msdr.Read();
    int count = int.Parse(msdr["Count"].ToString());
    close();
    return count;
}

public DataTable getSupplierData(int StartRow, int PageSize, string sortBy)
{
    open();
    setQuery("SELECT * from equipmentsupplier ORDER BY ?SORT LIMIT ?StartRow, ?Total;");
    setParameter("StartRow", StartRow);
    setParameter("Total", PageSize);
    setParameter("SORT", sortBy);

    DataTable dt = new DataTable();
    dt.Load(executeReader());
    return dt;
} 
```

当我对它进行排序时，查询返回了正确的数据，但它只是没有显示在我的 gridview 上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T11:36:10.700

@user2103743 将所有按钮字段更改为模板字段

# javascript - js，将字符串转为函数

> ID：15048767
> 
> 赞同：0
> 
> 时间：2013-02-24T04:47:09.653
> 
> 标签：javascript, string, function

我想知道如何将字符串转换为换行函数。

我有一个字符串函数数据

```
var a = new String("alert(turned)"); 
```

我想把 a 变成一个包装的函数

```
a = function(){ a }; // failed

a = function(){ eval(a) };  // failed

var b = a;

a = function(){ eval(b) } // success 
```

我想知道人们通常会做什么来将 a 变成一个包装的函数。

非常感谢您的建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T05:00:42.670

您也可以使用带有`new`关键字的函数构造函数，如下所示。

```
var a = new String("alert('hello')");
a = new Function(a)
a() 
```

会导致一个带有“你好”的警报框

你甚至可以使用这个接受参数的方法创建一个新函数。见这里[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function)

但我会小心你把什么变成一个函数。您不希望用户能够执行代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T04:56:50.127

```
var a = eval (" return function() { alert('yo')}; "); 
```

但是不要

# jakarta-ee - slf4j-api 冲突

> ID：15048773
> 
> 赞同：1
> 
> 时间：2013-02-24T04:47:52.620
> 
> 标签：jakarta-ee, maven, jboss, jboss-arquillian, querydsl

我正在使用 querydsl（取决于 sl4j-api 1.6）和 arquillian-persistence-api（取决于 slf4j-jdk14 1.5.6）。如果我在 Maven 中忽略旧版本 1.5.6，我会在 JBoss 上收到以下消息

`SLF4J: Failed to load class "org.slf4j.impl.StaticLoggerBinder".
SLF4J: Defaulting to no-operation (NOP) logger implementation
SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details.`

我正在使用带有托管 JBoss AS 7.1 的 arquillian 进行测试（Maven 从 maven Central 下载版本并运行测试）。我也在使用 arquillian persistence api。

我应该怎么做才能更正给定的警告？我的意思是我应该保留哪个依赖项，或者我将如何让两者正常工作？

我想这就是为什么我没有收到关于 arquillian persistence api 失败的任何错误消息（因为记录器不工作？）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T07:56:19.367

您看到的消息是警告，而不是错误。这意味着 SLF4J 正在为您选择一个绑定，因为您自己没有选择一个。默认绑定只是丢弃所有日志消息，这不是很有用。

如果您在 Maven 中有冲突的版本，通常强制更新版本更安全。库*通常*是向后兼容的。

所以，坚持你的新版本，`slf4j-api`并确保你声明一个绑定作为依赖，例如`slf4j-jdk14`. 如果您正在生成库，请确保您的绑定`test`仅使用范围声明。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T17:52:34.270

首先。关于依赖关系。

为了添加 SLF4J，您必须在 pom.xml 中放置**一个**且仅**一个**这些依赖项。这取决于您选择使用什么实现。您在 pom.xml 中添加的每个依赖项都会自动添加到类路径中。如果以下依赖项之一由另一个依赖项提供，则可以省略它。不要忘记，即使依赖项是由另一个依赖项提供的，您也必须只包含一个。

```
<dependency>
   <groupId>ch.qos.logback</groupId>
   <artifactId>logback-classic</artifactId>
   <version></version>
</dependency> 
```

```
<dependency>
   <groupId>org.slf4j</groupId>
   <artifactId>slf4j-simple</artifactId>
   <version></version>
   <scope>compile</scope>
</dependency> 
```

```
<dependency>
   <groupId>org.slf4j</groupId>
   <artifactId>log4j-over-slf4j</artifactId>
   <version></version>
   <scope>compile</scope>
</dependency> 
```

```
<dependency>
   <groupId>org.slf4j</groupId>
   <artifactId>slf4j-jdk14</artifactId>
   <version></version>
   <scope>compile</scope>
</dependency> 
```

现在关于构建 maven 项目时遇到的烦人错误。如果仅具有上述依赖项之一后，您仍然会得到 SLF4J: Failed to load class "org.slf4j.impl.StaticLoggerBinder"。那么您将面临来自 m2e 的错误。

Eclipse Juno 和 Indigo 在使用捆绑的 maven 版本 (m2e) 时，不会抑制消息 SLF4J: Failed to load class "org.slf4j.impl.StaticLoggerBinder"。此行为从 m2e 版本 1.1.0.20120530-0009 及更高版本开始存在。

虽然，这被指示为错误，您的日志将正常保存。在修复此错误之前，突出显示的错误仍将存在。[在m2e 支持站点](https://bugs.eclipse.org/bugs/show_bug.cgi?id=387064)中了解更多信息。

当前可用的解决方案是使用外部 maven 版本而不是 Eclipse 的捆绑版本。您可以在下面的问题中找到有关此解决方案的更多详细信息以及有关此错误的更多详细信息，我认为该问题描述了您面临的相同问题。

[SLF4J：无法加载类“org.slf4j.impl.StaticLoggerBinder”。错误](https://stackoverflow.com/questions/11916706/slf4j-failed-to-load-class-org-slf4j-impl-staticloggerbinder-error)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T10:59:46.387

JBoss 7.1 内置了对 SLF4J 的支持。假设这是您添加的带有 WAR 打包的 Web 应用程序`src/main/webapp/WEB-INF/jboss-deployment-structure.xml`：

```
<jboss-deployment-structure xmlns="urn:jboss:deployment-structure:1.0">
  <deployment>
    <dependencies>
      <module name="org.slf4j" />
    </dependencies>
  </deployment>
</jboss-deployment-structure> 
```

这将引入 JBoss SL4J 适配器，该适配器将为您提供日志输出。

这意味着您希望使用应用程序服务器为 SLF4J 提供的库。您应该更新您的`pom.xml`以修复 SLF4J 依赖项的范围。

```
<dependencies>
  ...
  <dependency>
    <groupId>org.slf4j</groupId>
    <artifactId>slf4j-api</artifactId>
    <scope>provided</scope>
  </dependency>
  ...
</dependencies> 
```

根据 POM 文件的排列方式，您可能还需要提供要使用的 SLF4J 版本。`mvn dependency:tree`可以向您显示正在拉入哪些 SLF4J 部门。确保他们都获得了“提供的”范围。如果您使用 Eclipse 和 m2e 插件，您还可以打开您的 POM 文件并检查“Dependency Hierarchy”选项卡，该选项卡将为您提供类似的信息。

# asp.net - ASP MVC - 捆绑创建目录路径而不是文件路径

> ID：15048774
> 
> 赞同：4
> 
> 时间：2013-02-24T04:47:58.390
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3

我有这个：

```
bundles.Add(new StyleBundle("~/Content/Styles/Default").Include("~/Content/Styles/Default/Site.css")); 
```

它创造了这个：

```
<link href="/Content/Styles/Default?v=HG5hShy6_NaqI7SUDWQuc6zijexRxZooKF4ayIgK5tY1" rel="stylesheet"> 
```

现在，我在我的网络服务器上启用了目录浏览，当我单击那个样式路径时，它会将我移动到一个目录，而不是一个文件！为什么？

**更新：**我仍然没有设法解决这个问题，当我打开链接时，我得到的`http://myserver/Content/Styles/Default?v=HG5hShy6_NaqI7SUDWQuc6zijexRxZooKF4ayIgK5tY1`只是一个文件列表（比如在 ftp 上）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-24T05:55:47.680

先来看看这篇[文章](http://www.asp.net/mvc/tutorials/mvc-4/bundling-and-minification)

> 捆绑是 ASP.NET 4.5 中的一项新功能，可以轻松地将多个文件组合或捆绑到一个文件中。您可以创建 CSS、JavaScript 和其他包。更少的文件意味着更少的 HTTP 请求，这可以提高首页加载性能。
> 
> 请求

`http://localhost/MvcBM_time/bundles/AllMyScripts?v=r0sLDicvP58AIXN_mc3QdyVvVj5euZNzdsa2N1PKvb81`

> 用于捆绑 AllMyScripts 并包含查询字符串对 v=r0sLDicvP58AIXN_mc3QdyVvVj5euZNzdsa2N1PKvb81。
> 
> 查询字符串 v 有一个值标记，它是用于缓存的唯一标识符。只要包没有改变，ASP.NET 应用程序就会使用这个令牌请求 AllMyScripts 包。如果包中的任何文件发生变化，ASP.NET 优化框架将生成一个新的令牌，保证浏览器对该包的请求将获得最新的包

这是如何添加包含文件的目录

```
bundles.Add(new StyleBundle("~/jQueryUI/themes/baseAll")
    .IncludeDirectory("~/Content/themes/base", "*.css")); 
```

这是添加多个文件的方法：

```
bundles.Add(new StyleBundle("~/Content/themes/base/css").Include(
          "~/Content/themes/base/jquery.ui.core.css",
          "~/Content/themes/base/jquery.ui.resizable.css",
          "~/Content/themes/base/jquery.ui.selectable.css",
          "~/Content/themes/base/jquery.ui.accordion.css",
          "~/Content/themes/base/jquery.ui.autocomplete.css",
          "~/Content/themes/base/jquery.ui.button.css",
          "~/Content/themes/base/jquery.ui.dialog.css",
          "~/Content/themes/base/jquery.ui.slider.css",
          "~/Content/themes/base/jquery.ui.tabs.css",
          "~/Content/themes/base/jquery.ui.datepicker.css",
          "~/Content/themes/base/jquery.ui.progressbar.css",
          "~/Content/themes/base/jquery.ui.theme.css")); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-05-15T15:04:27.767

这是一个老问题，但当我在寻找解决方案时，谷歌向我指出了这里，所以我想我会添加对我有用的东西。

我和你有同样的问题，遇到了另一个我认为是一样的问题：

[MVC4 - 当优化设置为 true 时捆绑不起作用](https://stackoverflow.com/questions/12240097/mvc4-bundling-does-not-work-when-optimizations-are-set-to-true)

> 我想问题是您将捆绑包放在实际存在的虚拟 URL 上，但它是一个目录。

更改捆绑路径解决了我遇到的问题。

# javascript - 如何让回调在类范围内使用“this”

> ID：15048775
> 
> 赞同：0
> 
> 时间：2013-02-24T04:48:00.527
> 
> 标签：javascript, callback

我对以下代码打印出“this.text”有疑问。

我需要一个包装器功能才能使其工作。这太麻烦了。

有没有更简单的方法（没有额外的包装器）让它工作？

```
 function Class1() {
    this.text = "test";
  }

  Class1.prototype.show = function() {
    console.log(this);
    console.log(this.text);
  }

  var testClass = new Class1();

  function funWithCallBack(cb) {
    cb();
  }

  // it will show "undefined" because "this" scope changes to window
  funWithCallBack(testClass.show); 

  function wrapper() {
    testClass.show();
  }

  // this one will work but troublesome
  funWithCallBack(wrapper) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T04:51:50.290

您可以使用这样的匿名函数：

```
// it will show "undefined" because "this" scope changes to window
funWithCallBack(testClass.show); 
```

对此：

```
// anonymous function to use the right object for the method
funWithCallBack(function() {
    testClass.show()
}); 
```

* * *

出现您的问题是因为当您`testClass.show`作为回调传递时，它只是获取函数引用并且不再有`testClass`任何关联。但是，您可以使用 来创建一个将它们绑定在一起的临时函数 [`.bind()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)，但某些旧浏览器不支持它，这就是为什么我通常只使用匿名函数的原因。

`.bind()`实现如下所示：

```
// use .bind() to make sure the method is called in the right object context
funWithCallBack(testClass.show.bind(testClass)); 
```

# search - 在 vim 中搜索字符串并像 grep 一样输出

> ID：15048776
> 
> 赞同：2
> 
> 时间：2013-02-24T04:48:01.270
> 
> 标签：search, vim, grep

如何使用 VIM 在文本文件中搜索特定字符串，然后它将输出所有带有搜索字符串实例的行？

请指教。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T04:51:27.020

你可以使用 Vim 的内置`global`工具。它将在窗口底部输出所有匹配项的行。这方面的一个例子是：`:``g/searchterm/``Enter`

如果尚未打开行号，您可能会发现打开行号有助于了解匹配项在文件中的位置。执行此操作的命令是：`:``set number``Enter`

可以通过运行以下命令找到其他信息：`:``help global``Enter`

编辑：

如果要将结果重定向到自己的窗口中，[`vim.wikia.com`](http://vim.wikia.com/wiki/Redirect_g_search_output)建议使用命令序列

```
:redir @a         redirect output to register a
:g//              repeat last global command
:redir END        end redirection
:new              create new window
:put! a           paste register a into new window 
```

您可以很容易地将其编写为 vimscript `function`。如果您从未看过[Steve Losh - Learn Vimscript the Hard Way](http://learnvimscriptthehardway.stevelosh.com/chapters/23.html)教程，我*强烈*建议您查看它来学习如何正确编写 Vim 函数的脚本。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-25T00:07:32.567

还有另一种可能性`:g`

假设您想使用 word 获取当前文件中的所有行`foo`：

你可以输入：

**`qzq:g/foo/y Z`** `Enter`

执行上述行后，这些行将存储在您的寄存器中`z`。您可以`"zp`粘贴到某处，或稍后进行处理。

很快做什么：

`qzq`: 清除`z`寄存器

`:g/foo/y Z`: 抽出所有匹配的行来注册`z`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-24T08:18:55.927

除了`:g[lobal]`迈克回答中的命令之外，这里还有几个替代方案：

*   `:il[ist] foo`列出所有包含在当前缓冲区中`foo` *看起来不像注释*`:il[ist]!`的行（如果您也想匹配注释，请使用）。

    当列表显示时，您可以点击`<CR>`使其消失或点击`:`发出 Ex 命令：`:5<CR>`跳转到第 5 行，`:5t3`在第 3 行之后复制第 5 行，依此类推。

    请注意，该列表是暂时的：如果您想再次查看该列表，则必须重新发出该命令。

    用法：

    ```
    :il foo<CR>
    :23<CR> 
    ```

*   `:vim[grep] bar % | cw[indow]``bar`使用当前缓冲区中包含的所有行填充快速修复窗口。

    阅读`:h quickfix`以了解如何使用它。快，点击`<CR>`跳转到上一个结果，`:cn`跳转到下一个结果，`:cp`跳转到上一个结果……</p>

    用法：

    ```
    :vim bar % | cw<CR>
    (navigate to the result you want in the quickfix window 
     with arrows, `jk`, line numbers, search…)
    <CR> 
    ```

    你也可以使用`:grep bar % | cw[indow]`which 使用你的系统`grep`而不是 Vim 的内部`grep`方法。

    `:vim`请注意，quickfix 窗口的内容在下一个或`:grep`或`:make`或任何操作错误列表的命令之前不会改变。这意味着您可以隐藏快速修复窗口并使用相同的列表再次打开它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-24T16:18:17.117

在搜索“qqq”之后，我只看到包含该字符串的行，命令如下：

```
:v//d 
```

“v”匹配*不包含*先前搜索的行（“//”）并且“d”删除它们。这是一个否定的“g”。
我只能清楚地看到我想要的线条。如果我对某个特定的感兴趣，我会用“mm”标记它。
当我完成查看它们时，使用“u”撤消删除并取回我的文件（不必忘记）。
之后，我用“n”在这些行之间移动，或者用“'m”转到标记的行。

# jquery - jquery css函数中的“现在”是什么意思

> ID：15048783
> 
> 赞同：1
> 
> 时间：2013-02-24T04:48:48.980
> 
> 标签：jquery

我是 jquery 的新手，我在 jquery api 中遇到了关于 animate() 函数的内容。尽管它工作得很好，但我只想知道它在那里意味着什么以及如何在其他地方实现它。这是示例代码块和网址。提前致谢。

```
 step: function( now, fx ){
    $( ".block:gt(0)" ).css( "left", now );
   } 
```

[http://api.jquery.com/animate/](http://api.jquery.com/animate/)

[http://jsbin.com/ihukob/1/edit](http://jsbin.com/ihukob/1/edit)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T04:52:10.943

你的代码：

```
step: function( now, fx ){
    $( ".block:gt(0)" ).css( "left", now );
} 
```

`now`是传递给函数的参数`step`。您正在使用 jquery 将`left`元素的位置设置为作为参数传递的值。

例子：

如果你打电话

```
step("100px", fx); 
```

然后代码将执行为

```
$( ".block:gt(0)" ).css( "left", "100px" ); 
```

**更新**

它是 的`step`函数`jquery.animate()`。动画的每一步都会调用该函数。

> step 类型：Function(Number now, PlainObject fx) 动画每一步后调用的函数。

发生什么了：

当您制作动画`$( ".block:first" )`时，您正在使用 step 函数将其他`block`元素也向左移动。

**更新 2**

```
now: the numeric value of the property being animated at each step 
```

因为代码是这样的

```
$( ".block:first" ).animate({
   left: 100
} 
```

`now`将包含 for 的`left`值`.block:first`。

# php - 在这个 php 中通过链接生成 1description+1picture 引用它？

> ID：15048784
> 
> 赞同：0
> 
> 时间：2013-02-24T04:48:52.827
> 
> 标签：php, javascript, jquery, database

这是一个有 4 个部分的投资组合。每个页面有 1 个类别，该类别有 4 个项目，由 4 个链接表示。这是我的链接/项目列表（从数据库中提取），并通过循环出现：

```
<?php 
$x = 0;
while ($x < 16){        
if (($categories[$x] == $section) && (isset($categories[$x])))
{
echo '<li><a href="#'.$ids[$x].'" class="close";">'.$titres[$x].'</a></li>';
}
}
$x++;
?> 
```

每个链接都会出现一个描述，该描述也来自我的数据库，通过这个循环：

```
<?php 
$x = 0;
while ($x < 16)
{       
if (($categories[$x] == $section) && (isset($categories[$x])))
{   
echo '<p id="'.$x.'" class="description"> '.$description[$x].'</p>';
}
$x++;
} 
?> 
```

这是我的问题：通过单击链接的项目出现：-出现正确的描述，-以及项目的图片。. 我试图找到一种jquery方式..但放弃..我尝试使用javascript..不起作用。我快把我的笔记本电脑弄坏了。

详细信息：我的数据库只有 1 个包含所有内容的表。

```
$sql = "SELECT categorie FROM Projets WHERE categorie=".$categorie;
$tabCat = getCategorie($categorie);
$categories = array();
$titres = array();
$description = array();
$images = array();
$ids = array();
$i = 0;
while ($donnees = $tabCat->fetch())
{
$categories[$i] = $donnees['categorie'];
$titres[$i]  =$donnees['Titre'];
$description[$i]  = $donnees['Description'];
$images[$i]  = $donnees['Image'];
$ids[$i] = $donnees['id'];
$i++;
}
$tabCat->closeCursor(); // Termine le traitement de la requête

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T05:10:03.833

我不确定您要在这里完成什么，但无论如何我在您的代码中看到了一些错误，在您的第一个代码中，`class="close";">`您似乎有太多双引号，而且那里在`;`做什么？在同一个文件中，你已经把你`$x++;`的循环放在外面，所以它永远不会在循环内增加......

我仍然觉得你的问题在你试图在这里完成的事情中令人困惑，你能更具体地解决你的问题吗？Tu peux toujours poser ta question en français aussi, si ça peut t'aider...

# c++ - 计时计时器始终显示 0

> ID：15048785
> 
> 赞同：0
> 
> 时间：2013-02-24T04:49:05.613
> 
> 标签：c++, sorting, timer

所以我正在为排序算法计时，当我运行我的代码时，无论它总是显示 0，但是如果我使用断点，它在这里工作是我使用计时器的代码的一部分：

```
case 'I':{ 
  auto startTime = chrono::high_resolution_clock::now(); //start the clock
  numbers.InsertionSort();//sorts the array using insertion sort method
  auto endTime = chrono::high_resolution_clock::now();//ends the clock
  cout<<"Insertion Sort of size: "<<numbers.GetSize()<<" took: "  
      <<chrono::duration_cast<chrono::milliseconds>(endTime-startTime).count() 
      <<" Millisecond"<<endl; //ouput the result to the screen
  break;//exit
} 
```

我尝试使用标准计时器，但它没有给我足够的精度，所以我去了计时计时器。我的老师希望我们以毫秒为单位输出结果。所以这就是我使用那个时间段的原因

# ruby-on-rails - 我如何处理 rails has_many 中的复选框？

> ID：15048787
> 
> 赞同：0
> 
> 时间：2013-02-24T04:49:23.180
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.2, form-for

好的，所以我有数据模型

```
class Application < ActiveRecord::Base
  has_many :schedules

class Schedule < ActiveRecord::Base
 belongs_to :application
 belongs_to :time_slot
 attr_accessible :time_slot_id, :application_id, :day

class TimeSlot < ActiveRecord::Base
  attr_accessible :end_time, :friday, :name, :saturday, :start_time, :sunday, :thursday, :tuesday, :wednesday 
```

基本上，当有人填写应用程序时，我有一个日历视图，提示他们选择哪一天的时间段...例如，我将列出星期二的 4 个时间段，而用户可以不选择所有时间段。

我的问题是：有没有办法为每个时隙创建复选框。因此，如果用户为星期三选择 4 个插槽，为星期五选择 3 个插槽，我可以将其与参数一起传递，并使用日期、time_slot_id 和 application_id 创建一个新的计划记录。

这是我到目前为止所拥有的，我显示了时间段，但不确定如何创建创建新记录的复选框

```
= form_for(@application) do |f|

  %tr
    - ['friday', 'saturday', 'sunday'].each do |day|
      %td
        - time_slots(day).each do |slot|
          %p{:style => "font-size: 12px;"}= "#{slot.name} (#{custom_time(slot.start_time)} - #{custom_time(slot.end_time)})" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T05:12:44.470

您可以`check_box_tag`在`time_slots`块内添加一个

```
- time_slots(day).each do |slot|
  = check_box_tag 'application[time_slot_ids][]', slot.id, f.object.time_slots.include?(slot)
  %p{:style => "font-size: 12px;"}= "#{slot.name} (#{custom_time(slot.start_time)} - #{custom_time(slot.end_time)})" 
```

这将为每个时间段添加一个复选框。它将使用您添加到应用程序模型时`time_slot_ids`提供的方法。`has_many``has_many :time_slots`

```
# application.rb
has_many :schedules
has_many :time_slots, through: :schedules 
```

更新：一些陷阱。

当没有选择时间段时，您可能会看到表单似乎没有保存，您仍然会获得与应用程序关联的旧时间段。这是因为 no`time_slot_ids`被传递给控制器​​。为了防止这种情况，您需要添加

```
check_box_tag 'application[time_slot_ids][]', nil 
```

在`#each`块之前，所以当没有选中复选框时它总是发送一些东西。

您要更改的另一件事是检查是否选择了时间段的部分。

```
f.object.time_slots.include?(slot) 
```

如果时间段没有急切加载，这将命中每个时间段的数据库。您可以做的一件事是添加一个实例变量来保存当前应用程序的 time_slot_ids 并根据块中的插槽检查它

```
# controller
@time_slot_ids = @application.time_slot_ids

# view
@time_slot_ids.include?(slot.id) 
```

# java - 在 GUI 中等待输入

> ID：15048791
> 
> 赞同：-2
> 
> 时间：2013-02-24T04:50:20.397
> 
> 标签：java, multithreading, swing, user-interface

我目前正在设计一个基本游戏，作为试验不同 GUI 组件的一种方式。在游戏中的某一时刻，我生成了一个新框架，玩家必须为其选择某个选项。我已经`ActionListeners`设置好了所有内容，以便玩家可以选择所述选项。但是，我还希望主游戏的框架能够判断何时选择了一个选项，以便可以执行该选项。关于如何做到这一点的任何提示？我目前正在使用 a`WindowFocusListener`来检测焦点离开菜单并返回主游戏，但这似乎有点不可靠。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T04:52:13.637

> 我生成一个新框架..

使用模态`JDialog`或 a`JOptionPane`代替。鉴于“模态”性质，代码将“停止”在设置组件可见的行，并等待它关闭，然后再继续下一行。

另请参阅[多个 JFrame 的使用，好/坏做法？](https://stackoverflow.com/a/9554657/418556)

# ios - 捕获正则表达式 iOS 时应用程序崩溃

> ID：15048792
> 
> 赞同：0
> 
> 时间：2013-02-24T04:50:21.990
> 
> 标签：ios, objective-c, regex

我正在尝试从 METAR 天气报告（从[http://weather.noaa.gov/pub/data/observations/metar/cycles/](http://weather.noaa.gov/pub/data/observations/metar/cycles/)下载）中捕获风描述，并从该块中获取风的成分，如果它火柴。正则表达式是`@"^([0-9]{3}|VRB)([0-9]{2,3})G?([0-9]{2,3})?(KT|MPS|KMH)"`。

我正在使用 PDRegex 库将捕获的匹配项枚举到一个数组中。（PDRegex 库可以在[https://github.com/carlbrown/RegexOnN](https://github.com/carlbrown/RegexOnNSString/blob/master/RegexOnNSString/NSString%2BPDRegex.m) ​​SString/blob/master/RegexOnN​​SString/NSString%2BPDRegex.m 上找到）

这些是我的代码中的适用行：

```
word = @"16008KT"; //test block
NSArray *matches = [word stringsByExtractingGroupsUsingRegexPattern:@"^([0-9]{3}|VRB)([0-9]{2,3})G?([0-9]{2,3})?(KT|MPS|KMH)"]; 
```

当`stringsByExtractingGroupsUsingRegexPattern`（一个 PDRegex 方法）被调用并匹配时，它在第 62 行崩溃`NSString+PDRegex`。这是应用程序崩溃的 PDRegex 行：

```
NSString *matchedString=[self substringWithRange:[result rangeAtIndex:i]]; 
```

这是崩溃报告：

> 由于未捕获的异常“NSRangeException”而终止应用程序，原因：“-[__NSCFString substringWithRange:]: Range or index out of bounds”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T16:02:12.470

我通过在有问题的行上方添加以下检查来解决问题：

```
if ([result rangeAtIndex:i].length!=0) 
```

出现问题是因为括号中的字符串部分并非都匹配，那些不匹配的范围超出了原始“单词”字符串的范围。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T07:06:14.720

您似乎调用了索引的范围，因此请确保**NSString *matchedString=[self substringWithRange:[result rangeAtIndex:i]];**中的索引**i** 被定义为

 *** * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T07:13:40.520

这可能是因为锚点（`^`）。只有当它位于行首时，您才告诉它匹配模式。（或者如果它不是多行模式，则在整个字符串的开头，但看起来多行模式是默认的。）

如果您想确保您匹配的是真实的风描述，而不是恰好*看起来*像一个的较长字符串的一部分（例如`foo12307KTbar`），您可以用单词边界将其包围：

```
\b([0-9]{3}|VRB)([0-9]{2,3})G?([0-9]{2,3})?(KT|MPS|KMH)\b 
```

在 Objective-C 字符串文字形式中，我相信这将是：

```
@"\\b([0-9]{3}|VRB)([0-9]{2,3})G?([0-9]{2,3})?(KT|MPS|KMH)\\b" 
```**

# python - 查找最大日期小于或等于变量的字典，返回值

> ID：15048799
> 
> 赞同：0
> 
> 时间：2013-02-24T04:51:11.133
> 
> 标签：python, date, match

我安装了 python[包](https://github.com/zachwill/fred/blob/master/fred/core.py) `fred`，使用`pip install fred`，从 FRED / ALFRED API 获取实时数据。

我现在的任务是将*评估*`realtime_date`日期与数据相匹配——以便提取与小于或等于我所说的评估日期 ( )的最大值相关的值`aDate`。

数据本身在包含列表的 python 字典中返回，每个观察值与一些元数据一起存储在字典中 - 每个观察值字典包含：参考日期 ( `date`)、请求覆盖的实时时间段 ( `realtime_end`, `realtime_start`)和值 ( `value`)。

当存在完全匹配时，我可以看到如何将数据与评估日期匹配，但在现实世界中，这些都是例外。我正在寻求帮助将其推广到不等式。

（注意下面我使用了一个变量`fredKey`——而您必须提供自己的 FRED API 密钥才能访问 FRED）。

```
import fred
fred.key(fredKey)
CPIobvs = fred.observations('CPIAUCSL', realtime_start = "1990-01-01")
aDate == "2008-02-15"

for i in range(1, len(CPIobvs['observations']['observation'])):
    if CPIobvs['observations']['observation'][i]['realtime_start'] == aDate:
        print (CPIobvs['observations']['observation'][i]['date'], 
                CPIobvs['observations']['observation'][i]['value']
               ) 
```

对于这个例子，我选择了一个年度基准修订日期，以确保得到一些回报。在实践中，我通常会在记录发生的日期更新模拟——在这种情况下，我的方法什么也不返回。

解决方案似乎是匹配`realtime_start`小于或等于评估日期（例如 ）的最大日期（值`aDate == "2008-02-14"`）。我如何匹配`realtime_date`小于或等于的最大值`aDate`？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T05:12:01.540

`CPIobvs['observations']['observation']`一种方法是通过过滤掉where 中的所有项目来识别候选人`'realtime_start'` `>` `aDate`。

我会这样做作为一个[*生成器表达式*](http://docs.python.org/3/reference/expressions.html#generator-expressions)：

```
candidates = (ob for ob in CPIobvs['observations']['observation'] if
    ob['realtime_start'] <= aDate) 
```

如果您想查看详细信息，可以在解释器中形成[*列表理解*](http://docs.python.org/3/tutorial/datastructures.html#list-comprehensions)：

```
[ob for ob in CPIobvs['observations']['observation'] if
    ob['realtime_start'] <= aDate] 
```

一旦确定了这些候选，然后使用内置[`max()`](http://docs.python.org/2/library/functions.html#max)函数，为 提供一个 lambda `key`，它使用 的值对候选s`'realtime_start'`进行排序：`dict`

```
last_ob = max(candidates, key=lambda ob: ob['realtime_start']) 
```

您需要的详细信息现在位于`last_ob['date']`和中`last_ob['value']`。

# javascript - 如何让下拉菜单写入 JavaScript Cookie

> ID：15048800
> 
> 赞同：0
> 
> 时间：2013-02-24T04:51:18.433
> 
> 标签：javascript, html, cookies

我需要帮助使下拉菜单与 cookie 一起使用。在此先感谢您的帮助。我需要了解 Cookies 如何与下拉菜单、单选按钮选择列表以及如何使它们显示结果一起工作。这是第一页和第二页的 JavaScript 和 HTML。如果使用 HTML5 LocalStorage 有更简单的方法，请解释一下。我尝试了本地存储，但它不适用于 IE 或 Opera 旧版浏览器。因此，我没有使用备用代码，而是使用 JS Cookies。

```
<script type="text/javascript">

function getCookie(name){var re=new RegExp(name+"=([^;]+)");var      value=re.exec(document.cookie);return(value!=null)?unescape(value[1]):null;}

var today=new Date();var expiry=new Date(today.getTime()+30*24*3600*1000);var    expired=new Date(today.getTime()-24*3600*1000);
var cusineChoice = document.getElementByName("CAT_Custom_307514");
function setCookie(name,value){document.cookie=name+"="+escape(value)+"; path=/;     expires="+expiry.toGMTString();}

function deleteCookie(name){document.cookie=name+"=null; path=/; expires="+expired.toGMTString();}
function storeValues(form)
{setCookie("FullAddress",form.FullAddress.value);setCookie("Postcode_18870",form.Postcode_18870.value);setCookie("field3",form.field3.value);setCookie("field4",form.field4.value);setCookie("CAT_Custom_307514",form.CAT_Custom_307514.options[form.CAT_Custom_307514.selectedIndex].value);return true;}
</script>

<form name="catcustomcontentform85290" method="post" onSubmit="return checkWholeForm85290(this)&& storeValues(this);" action="/Default.aspx?CCID=18870&amp;FID=112543&amp;ExcludeBoolFalse=True&amp;ID=/chowsquad-results">

    <div class="input_sign_home full_address_search">
     <label class="infieldlabel" for="FullAddress">
     Street Address, City, State
     <span class="req">*</span>
     </label>
     <br>
<input id="FullAddress" class="cat_textbox signup_input_main" type="text"     name="FullAddress" maxlength="255">
</div>

        <div class="input_sign_home zip_search1">

            <label for="Postcode_18870" class="infieldlabel">Zipcode*</label><br />
            <input type="text" maxlength="255" name="Postcode_18870" id="Postcode_18870" class="cat_textbox signup_input_main" />
       <div class="hidden">
           <label for="Distance_18870">Distance</label><br />
            <select name="Distance_18870" id="Distance_18870" class="cat_dropdown">
            <option value="5">5 miles</option>
            <option value="10">10 miles</option>
            <option value="20">20 miles</option>
            <option value="50">50 miles</option>
            <option value="100">100 miles</option>
            </select>
            </div>
        </div>

        <div class="input_sign_home cuisine_search1">
        <div class="input_sign_home">

        <label class="hidden_label" for="CAT_Custom_134967">Choose Your Chow!</label></div>
        <div class="title_select_vendor rest_country">
            <select name="CAT_Custom_307514" id="CAT_Custom_307514" class="cat_dropdown selectv">
             <option value="">Choose Your Chow!</option>
            <option value="*">-- All --</option>
            <option value="American">American</option>
            <option value="BBQ">BBQ</option>
            <option value="Chinese">Chinese</option>
            <option value="Deli">Deli</option>
            <option value="Grocery Stores">Grocery Stores</option>
            <option value="Italian">Italian</option>
            <option value="Jamaican">Jamaican</option>
            <option value="Japanese">Japanese</option>
            <option value="Indian">Indian</option>
            <option value="Mexican">Mexican</option>
            <option value="Middle Eastern">Middle Eastern</option>
            <option value="Pizza">Pizza</option>
            <option value="Seafood">Seafood</option>
            <option value="Sushi">Sushi</option>
            <option value="Tex-Mex">Tex-Mex</option>
            <option value="Thai">Thai</option>
            <option value="Vegetarian">Vegetarian</option>
            <option value="Vietnamese">Vietnamese</option>
            <option value="----OTHER RESTAURANTS ----">----OTHER RESTAURANTS ----</option>
            <option value="African">African</option>
            <option value="Argentinian">Argentinian</option>
            <option value="Austrian">Austrian</option>
            <option value="Bagels">Bagels</option>
            <option value="Belgian">Belgian</option>
            <option value="Brazilian">Brazilian</option>
            <option value="Breakfast">Breakfast</option>
            <option value="Brunch">Brunch</option>
            <option value="Burgers">Burgers</option>
            <option value="Cajun and Creole">Cajun and Creole</option>
            <option value="Californian Cuisine">Californian Cuisine</option>
            <option value="Cambodian">Cambodian</option>
            <option value="Caribbean">Caribbean</option>
            <option value="Cheesesteaks">Cheesesteaks</option>
            <option value="Costa Rican">Costa Rican</option>
            <option value="Crepes">Crepes</option>
            <option value="Cuban">Cuban</option>
            <option value="Dessert">Dessert</option>
            <option value="Dim Sum and Dumplings">Dim Sum and Dumplings</option>
            <option value="Diner">Diner</option>
            <option value="English">English</option>
            <option value="Filipino">Filipino</option>
            <option value="French">French</option>
            <option value="German">German</option>
            <option value="Gluten Free">Gluten Free</option>
            <option value="Greek">Greek</option>
            <option value="Haitian">Haitian</option>
            <option value="Halal">Halal</option>
            <option value="Hawaiian">Hawaiian</option>
            <option value="Healthy">Healthy</option>
            <option value="Hot Dogs">Hot Dogs</option>
            <option value="Indonesian">Indonesian</option>
            <option value="Irish">Irish</option>
            <option value="Korean">Korean</option>
            <option value="Kosher">Kosher</option>
            <option value="Latin American">Latin American</option>
            <option value="Lebanese">Lebanese</option>
            <option value="Malaysian">Malaysian</option>
            <option value="Mediterranean">Mediterranean</option>
            <option value="Moroccan">Moroccan</option>
            <option value="Noodle Shops">Noodle Shops</option>
            <option value="Organic">Organic</option>
            <option value="Peruvian">Peruvian</option>
            <option value="Polish">Polish</option>
            <option value="Portuguese">Portuguese</option>
            <option value="Russian">Russian</option>
            <option value="Salads">Salads</option>
            <option value="Sandwiches and Wraps">Sandwiches and Wraps</option>
            <option value="Scandinavian">Scandinavian</option>
            <option value="Smoothies and Shakes">Smoothies and Shakes</option>
            <option value="Soups">Soups</option>
            <option value="Southern and Soul">Southern and Soul</option>
            <option value="Spanish and Tapas">Spanish and Tapas</option>
            <option value="Sri Lankan">Sri Lankan</option>
            <option value="Steakhouse">Steakhouse</option>
            <option value="Taiwanese">Taiwanese</option>
            <option value="Turkish">Turkish</option>
            <option value="Vegan">Vegan</option>
            <option value="Venezuelan">Venezuelan</option>
            <option value="Wings">Wings</option>
            </select>

            </div>
        </div>
        <div class="search_btn_1">
        <input id="find_resta_btn" class="cat_button search_rest_1" type="image" src="/images/search_restaurant_home_off.png" value="Find Your Favorite Restaurant!" />
        </div>
        <div class="edge_iFrame_rest_btn">
        <iframe class="animate" width="650" height="118" scrolling="no" frameborder="0" src="http://www.chowsquad.com/animate/ChowSquad_search_ani/index.html" allowtransparency="true"></iframe>
        </div>
        <div class="advanced_search_link">
        <a href="/advanced-search">Advanced Search</a></div>
    </form> 
```

这是相应页面上的代码。

```
 <script type="text/javascript">     // Original JavaScript code by Chirp Internet:     www.chirp.com.au // Please acknowledge use of this code by including this header. 

function getCookie(name) { var re = new RegExp(name + "=([^;]+)"); var value = re.exec(document.cookie); return (value != null) ? unescape(value[1]) : null; } </script>
<p><span class="count_no"> </span>    restaurants serving <span id="street_address">     <script type="text/javascript"> document.write(getCookie("FullAddress")); </script> </span> <span id="zipContainer"><script type="text/javascript">  document.write(getCookie("Postcode_18870")); </script> </span><span><script type="text/javascript"> document.write(getCookie("CAT_Custom_307514")); </script></span></p> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T05:34:15.360

利用

```
window.onload=function() {   
 var spanId=["street_address","zip_container"];
 var field=["FullAddress","...."];
 for (var i=0;i<field.length;i++) {
   document.getElementById(spanId[i]).innerHTML=getCookie(field[i]) || "";
 }
} 
```

# c# - C#richTextBox 间距问题？

> ID：15048804
> 
> 赞同：1
> 
> 时间：2013-02-24T04:52:13.120
> 
> 标签：c#, winforms, richtextbox, rtf

我正在为我编写的聊天服务器程序编写客户端，该程序使用richTextBox 控件来显示用户文本。除了我用于我的服务器 motd 的一些 ASCII 艺术外，一切正常。运行它时，我的文本显示如下。如您所见，间距似乎有问题。 ![在此处输入图像描述](../Images/07314c67165e2605d4603c7f9384feed.png)

现在，如果我使用完全相同的字体在记事本中输入它，我就会得到这个。为什么richTextBox 不显示相同的结果？我在这里真的很困惑......

![在此处输入图像描述](../Images/257629efb2a38ee3bb14ff1d6e011ac2.png)

编辑：问题是由于服务器发送的 RTF。如何在 RTF 中添加额外的空间？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T05:05:20.020

问题显然是字体，`Notepad`使用`Monospace`字体，而 RichTextBox 似乎正在使用`Non-Monospace`字体。

由于`Monospace`字体的宽度`character`相等，而`Non-Monospace`宽度`character`不同，因此显示问题。

在将字符附加到 RichTextBox 之前，我忘了注意到`backslash`您需要转义字符。`\`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-24T08:35:36.937

显然，问题源于您`RichTextBox`使用 ASCII 艺术文本提供控件的方式。通过检查这两个图像，您可以看到其中缺少的字符`RichTextBox`是反斜杠和反斜杠后面的字符。您似乎忘记转义反斜杠字符。

# ios - 尝试在 iOS 中使用 if/else 语句显示 alertView

> ID：15048805
> 
> 赞同：2
> 
> 时间：2013-02-24T04:52:13.830
> 
> 标签：ios, if-statement, uialertview

我正在编写一个应用程序，我希望在其中显示一个 alertView，根据是否发生某些情况显示不同的消息。如果没有任何情况匹配，则不应显示警报，并且应处理应用程序的其余部分。我的问题是我不知道该怎么做。我有以下代码：

```
 - (void) methodThatIsCalled {

             NSString *msg;

             if (blah) {

                 msg = @"Message A";

             }

             else if (blah blah) {

                 msg = @"Message B";

             }

             else if (blah blah blah) {

                 msg = @"Message C";

             }

             //Here is where I want to display the Alert code
             UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error"
                                                        message:msg
                                                       delegate:nil
                                              cancelButtonTitle:@"OK"
                                              otherButtonTitles:nil];
             [alert show];

             else {

                   Do rest of the application....

             }

      } 
```

谁能告诉我如何做到这一点，这样我只有一个显示警报的代码块，并动态地将消息字符串传递给警报，如果没有任何子句匹配，则什么都不做？

提前感谢所有回复的人。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T05:03:05.197

```
- (void) showAlertWithTitle: (NSString*) title message: (NSString*) message
{
    UIAlertView* alert= [[[UIAlertView alloc] initWithTitle: title message: message
                                                   delegate: NULL cancelButtonTitle: @"OK" otherButtonTitles: NULL] autorelease];
    [alert show];

} 
```

//在你的函数中：

```
if (blah) {
    [self showAlertWithTitle:@"Error"  message:@"Message A"];
} 
 else if (blah blah) {
    [self showAlertWithTitle:@"Error"  message:@"Message B"];
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-24T04:56:04.477

您可以更改为

```
NSString *msg = nil; 
```

然后添加一个 if

```
if (msg) { // If there is a message
    //Here is where I want to display the Alert code
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error"
                                              message:msg
                                              delegate:nil
                                              cancelButtonTitle:@"OK"
                                              otherButtonTitles:nil];
    [alert show];
} else {
    ... // Rest of application
} 
```

# sed - tcpdump 标头信息 grep 或 awk 或 sed？

> ID：15048809
> 
> 赞同：0
> 
> 时间：2013-02-24T04:52:56.127
> 
> 标签：sed, awk, grep, tcpdump

获取目标 ip (>ip) 和“用户代理：”的最有效方法是什么。我想获取这两个值并将它们转储到一个文件中，首先是 ip，然后是用户代理。我想最小化系统资源。这将 24x7 运行，并定期刷新日志。

```
"    1.1.1.1.58477 > 98.139.239.224.80: Flags [P.], cksum 0x2a6c (correct), seq 1:431, ack 1, win 17520, length 430
E.../y@.~...K...b....m.Px9.Iim/.P.Dp*l..GET /images/40eb913b4b20614fad042dc816d412fe_48.jpeg HTTP/1.1^M
Accept: image/png, image/svg+xml, image/*;q=0.8, */*;q=0.5^M
Referer: http://sports.yahoo.com/news/nascar--scene-at-daytona--was-like-a-war-zone--005423629.html^M
Accept-Language: en-US^M
User-Agent: Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; WOW64; Trident/5.0)^M
Accept-Encoding: gzip, deflate^M
Host: socialprofiles.zenfs.com^M
DNT: 1^M
Connection: Keep-Alive^M" 
```

为格式良好的原始输出添加 URL。docs.google.com/file/d/0B1umMHxdWKkdNzI3anBaemhuOVE/edit?usp=sharing

```
T 15.127.111.221:64300 -> 198.252.206.16:80 [AP]
GET /posts/15048809/ivc/29bb?_=1362111021654 HTTP/1.1.
Host: stackoverflow.com.
Connection: keep-alive.
Accept: */*.
X-Requested-With: XMLHttpRequest.
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.22 (KHTML, like Gecko)         Chrome/25.0.1364.97 Safari/537.22.
Referer: http://stackoverflow.com/questions/15048809/tcpdump-header-info-grep-or-awk-    or-sed.
Accept-Encoding: gzip,deflate,sdch.
Accept-Language: en-GB,en-US;q=0.8,en;q=0.6.
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3.
Cookie: __qca=P0-1081552782-122603326; sgt=id=9 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T20:08:40.487

如果您在问题描述中包含所需输出的精确样本，它将有助于准确回答您的问题。在此之前，这里有一个如何进行的总体思路。

**编辑**

```
$ awk '/Flags/{sub(/.80:/, "", $4);printf $4"\t"} /User-Agent/{sub(/^[^:][^:]*:/,"");sub(/\.80/,"", $4); print}'  logTest 
```

**输出**

```
98.139.239.224   Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; WOW64; Trident/5.0)^M 
```

我将字段匹配为 4 美元，因为这与我对您的示例数据的再现相匹配，根据您的评论，您可以轻松地将其更改为 3 美元。

注意我使用了一个选项卡作为 IP 和用户代理之间的字段分隔符。

IHTH。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-23T09:56:17.037

尝试使用[http://justniffer.sourceforge.net/](http://justniffer.sourceforge.net/)比 tcpdump 更好的分析 http 协议头的工具

# sum - 数字被连接而不是求和

> ID：15048813
> 
> 赞同：1
> 
> 时间：2013-02-24T04:53:30.093
> 
> 标签：sum, xslt-1.0

我有以下输入：

```
<nodes>
    <node>  
        <type>A</type>  
        <val>1000</val>  
    </node>  
    <node>  
        <type>B</type>  
        <val>2000</val>  
    </node>  
    <node>  
        <type>A</type>  
        <val>3000</val>  
    </node>  
</nodes> 
```

我的目标是获取唯一类型的列表并将它们的所有 val 相加。我得到以下输出：

```
<nodes>  
    <node>  
        <type>A</type>  
        <sum>10003000</sum>  
    </node>  
    <node>  
        <type>B</type>  
        <sum>2000</sum>  
    </node>  
</nodes> 
```

我期待的总和（对于 A 型）为 4000，但我得到的是 10003000。

这是我的 xslt：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">  
    <xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes"/>  
    <xsl:key name="type" match="/nodes/node/type/text()" use="." />
    <xsl:template match="/">
        <nodes>
            <xsl:for-each select="/nodes/node/type/text()[generate-id()=generate-id(key('type',.)[1])]">
                <node>
                    <xsl:variable name="t" select="."/>
                    <type><xsl:value-of select="$t"/></type>
                    <sum>
                        <xsl:for-each select="/nodes/node[type=$t]">
                            <xsl:value-of select="sum(number(Value))"/>
                        </xsl:for-each>
                    </sum>
                </node>
            </xsl:for-each>
        </nodes>
    </xsl:template>
</xsl:stylesheet> 
```

我怎样才能获得我正在寻找的结果？此外，一些要求和的值包含逗号作为分隔符（例如，1,000）。据我所知， sum() 不处理逗号。我该如何解决这些担忧？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T06:08:19.167

**只需更换**：

```
<sum>
  <xsl:for-each select="/nodes/node[type=$t]">
    <xsl:value-of select="sum(number(Value))"/>
  </xsl:for-each>
</sum> 
```

**与**：

```
<sum><xsl:value-of select="sum(/nodes/node[type=$t]/val)"/></sum> 
```

**这是一个完整的转换：**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:key name="kType" match="type" use="."/>

 <xsl:template match="type[generate-id()=generate-id(key('kType',.)[1])]">
  <type><xsl:value-of select="."/></type>
  <sum><xsl:value-of select="sum(key('kType',.)/../val)"/></sum>
 </xsl:template>
 <xsl:template match="text()"/>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<nodes>
    <node>
        <type>A</type>
        <val>1000</val>
    </node>
    <node>
        <type>B</type>
        <val>2000</val>
    </node>
    <node>
        <type>A</type>
        <val>3000</val>
    </node>
</nodes> 
```

**产生了想要的正确结果：**

```
<type>A</type>
<sum>4000</sum>
<type>B</type>
<sum>2000</sum> 
```

* * *

**更新**：

OP 增加了新要求：数字可以包含逗号。

**下面的解决方案执行两遍转换，其中第一遍删除任何`val/text()`节点**中的任何非数字字符。

**第二遍对第一遍的结果进行操作，本质上是初始问题的解决方案**。

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:ext="http://exslt.org/common" exclude-result-prefixes="ext">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:key name="kType" match="type" use="."/>

 <xsl:variable name="vrtfPass1">
  <xsl:apply-templates select="/*"/>
 </xsl:variable>

 <xsl:variable name="vPass1" select="ext:node-set($vrtfPass1)"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="/">
  <xsl:apply-templates mode="pass2" select=
   "$vPass1/*/*/type[generate-id()=generate-id(key('kType',.)[1])]"/>
 </xsl:template>

 <xsl:template match="val/text()[true()]">
  <xsl:value-of select="translate(., translate(.,'01234567890', ''), '')"/>
 </xsl:template>

 <xsl:template match="type" mode="pass2">
  <type><xsl:value-of select="."/></type>
  <sum><xsl:value-of select="sum(key('kType',.)/../val)"/></sum>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于以下 XML 文档时（在提供的文档中添加逗号）：**

```
<nodes>
    <node>
        <type>A</type>
        <val>1,000</val>
    </node>
    <node>
        <type>B</type>
        <val>2000</val>
    </node>
    <node>
        <type>A</type>
        <val>3000</val>
    </node>
</nodes> 
```

**产生了想要的正确结果：**

```
<type>A</type>
<sum>4000</sum>
<type>B</type>
<sum>2000</sum> 
```

# python - sqlite 和 python 错误-提供的绑定数量不正确

> ID：15048818
> 
> 赞同：0
> 
> 时间：2013-02-24T04:54:32.607
> 
> 标签：python, sqlite

根据我的阅读，这是一个常见错误——我正在将制表符分隔的文本文件读入 sqlite 数据库，虽然有 15 列，但在某些行中没有数据。例如，这是我正在阅读的一段文本文件：

[http://www.vta.org/schedules/tdl/SC_902NO_WK.tdl](http://www.vta.org/schedules/tdl/SC_902NO_WK.tdl)

我只是在实际时间阅读。问题是，例如，并非每一列都完全填满了时间，这就是我得到的原因

> sqlite3.ProgrammingError：提供的绑定数量不正确。当前语句使用 >15，并且提供了 8 个。

如何处理文本文件中的空值？

这是我的代码

```
import sqlite3 as lite
import sys
import csv
con = lite.connect('vta.db')

with con:

cur = con.cursor()
cur.execute('DROP TABLE IF EXISTS NB_902_Wkdy')
cur.execute("""CREATE TABLE NB_902_Wkdy ( Train_Num INT primary key, Winchester TEXT,            Bascom TEXT, Fruitdale TEXT, Diridon TEXT, 
```

Convention TEXT、Santa_Clara TEXT、Civic_Center TEXT、Metro TEXT、Tasman TEXT、Old_Ironsides TEXT、Fair_Oaks TEXT、Lockheed TEXT、Whisman TEXT、Mountain_View TEXT) """)

```
creader = csv.reader(open('NB_902_Wkdy', 'rb'), delimiter='\t')#, quotechar='|')
for t in creader:
     cur.execute('INSERT INTO NB_902_Wkdy VALUES(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)', t)

creader.close() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T10:42:46.263

您尚未指定“处理”的含义，但假设您要将`NULL`值插入缺失的字段，您只需将它们追加到`t`您有足够的值：

```
for t in creader:
    while len(t) < 15:
        t += (None,)
    cur.execute(..., t) 
```

# google-maps - 谷歌地图初始化函数依赖

> ID：15048824
> 
> 赞同：0
> 
> 时间：2013-02-24T04:55:20.890
> 
> 标签：google-maps, google-maps-api-3

我想精简我的`initialize()`功能......但每次我这样做时，它都会破坏我的代码。我最终试图做这样的事情[，](https://stackoverflow.com/questions/11353087/google-maps-adding-markers-with-ajax)我有一个侧边栏，里面有与地图上的标记直接相关的东西，AJAX'd in... 首先，我希望能够将其他功能放在外面`initialize()`功能 。**这工作正常：**

```
<script>

  function initialize() {
    // create the map object
    var mapOptions = {
      zoom: 14,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };    
    var map = new google.maps.Map(document.getElementById("map_canvas"), 
        mapOptions);

    // create your location marker
    var mylocOptions = {
      draggable: true,
      animation: google.maps.Animation.DROP,
      icon: new google.maps.MarkerImage('//maps.gstatic.com/mapfiles/mobile/mobileimgs2.png',
            new google.maps.Size(22,22),
            new google.maps.Point(0,18),
            new google.maps.Point(11,11)),
      title: "You are here..."
    };
    var myloc = new google.maps.Marker(mylocOptions);

    // get location information from browser, or from user input, or from database
    <% if !signed_in? || !current_user.loc %>
      if (navigator.geolocation) navigator.geolocation.getCurrentPosition(function(pos) {
        var me = new google.maps.LatLng(pos.coords.latitude, pos.coords.longitude);
        myloc.setPosition(me);
        myloc.setMap(map);
        map.setCenter(me);
        $.ajax({
          data: { me: me.toString() },
          type: 'POST',
          url: '/set-location'
        })
      }, function(error) {
          var address = prompt('Where are you looking?');
          geocoder = new google.maps.Geocoder();
          geocoder.geocode({ 'address': address }, function(results, status) {
            if (status == google.maps.GeocoderStatus.OK) {
              var me = results[0].geometry.location
              myloc.setPosition(me);
              myloc.setMap(map);
              map.setCenter(me);
            } else {
              alert("Geocode was not successful for the following reason: " + status);
            };
          });
      });
    <% else %>
      var me = new google.maps.LatLng(<%= current_user.loc %>);
      myloc.setPosition(me);
      myloc.setMap(map);
      map.setCenter(me);
      map.setZoom(12);
    <% end %>

    // watch for marker movement, and update location accordingly
    var oldPos = myloc.getPosition();
    google.maps.event.addListener(myloc, "dragend", function(e){
      revGeo = new google.maps.Geocoder();
      var newPos = myloc.getPosition();
      $.ajax({
        data: { me: newPos.toString() },
        type: 'GET',
        url: '/set-location'
      })
      if(oldPos != newPos)
        revGeo.geocode({'latLng': newPos}, function(results, status) {
          if (status == google.maps.GeocoderStatus.OK) {
            if (results[1]) {
              $('#loc').html(results[1].formatted_address);
            }
          } else {
            alert("Geocoder failed due to: " + status);
          }
        });
      oldPos = newPos;
    });

    // when creating an event, check for event location,
    // verify it's existance and put a marker down on the map
    $(document).on('focusout', '#event_location', function() {
      geocoder = new google.maps.Geocoder();
      address = document.getElementById("event_location").value;
      geocoder.geocode({ 'address': address }, function(results, status) {
        if (status == google.maps.GeocoderStatus.OK) {
          var coords = results[0].geometry.location;
          map.setCenter(coords);
          var marker = new google.maps.Marker({
            map: map,
            animation: google.maps.Animation.DROP,
            position: coords
          });
          $('#coords').html('coordinates: ' + coords)
          $('#event_geocode').val(coords.toString())
        } else {
          alert(status + " for " + address);
        };
      });
    });
  }
</script> 
```

...但我相信它可以被打破。事实上，我知道它必须被分解才能开始做我想做的事情。关于我做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T07:48:54.070

使您的 var 映射成为全局变量（在任何函数之外声明）。

```
// Global
var map; 
```

接着...

```
function initialize() {
    // create the map object
    var mapOptions = {
      zoom: 14,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };

  // Do not use the var keyword inside the function.    
    map = new google.maps.Map(document.getElementById("map_canvas"), 
        mapOptions);

// etc.. 
```

# php - PHP 在除法后比较有一个错误

> ID：15048826
> 
> 赞同：1
> 
> 时间：2013-02-24T04:55:40.460
> 
> 标签：php, floating-point, integer

在将值浮点数和整数相除后，我遇到了 PHP 比较问题。

这是我的代码：

```
<?php

    function test_promo($price) {
        $tmpprice = $price*100;
        $divprice = $tmpprice/intval($tmpprice);
        if ( $divprice > 1 ) {
            echo "$price = TRUE\n";
            //TODO do something >1
        }
        else {
            echo "$price = FALSE\n";
            //TODO do something <=1
        }
    }

    echo "<pre>";
    test_promo(2.41);   //output--> 2.41 = FALSE
    test_promo(2.42);   //output--> 2.42 = FALSE
    test_promo(2.43);   //output--> 2.43 = TRUE
    test_promo(2.44);   //output--> 2.44 = FALSE
    test_promo(2.45);   //output--> 2.45 = TRUE
    test_promo(2.46);   //output--> 2.46 = FALSE
    test_promo(2.47);   //output--> 2.47 = TRUE
    test_promo(2.48);   //output--> 2.48 = FALSE
    test_promo(2.49);   //output--> 2.49 = TRUE
    echo "</pre>";

?> 
```

如您所见，结果必须全部为 FALSE，但不是：S

它是 PHP 中的错误还是只有我的计算机（Ubuntu x64）有这个错误？

**解决方案 ：**

作为下面的更正答案，我只需要像这样定义浮点数（之后的数字`.`）`$divprice = number_format( $newprice/intval($newprice), 2 );`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T05:03:58.187

[浮点数](http://en.wikipedia.org/wiki/Floating_point)不能**准确**表示您以十进制形式发布的值。换句话说，`2.43`不是真的`2.43`，而是实际上 [something close to] `2.4300000000000003`。所以当你除以`243.00000000000003`结果`243`会大于`1`。

这不是 PHP 中的错误，只是[浮点的工作](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)方式（在任何语言中）。如果您需要使用精确的十进制值，您最好搜索特定的库来执行此操作。[这个问题](https://stackoverflow.com/q/4502588/520779)可能是一个很好的起点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T05:05:54.897

您需要将 $divprice 转换为整数，因为您的 $divprice 现在是浮动的并且因为这个事实：

[PHP.NET](http://php.net/manual/en/language.types.float.php)

> 由于它们在内部表示的方式，测试浮点值是否相等是有问题的。但是，有一些方法可以绕过这些限制来比较浮点值。

解决方案：

```
$divprice = (int) ($tmpprice/intval($tmpprice)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T05:01:02.017

这可能与如何处理浮点数有关（在任何语言中）。您可以将此称为舍入错误或其他任何内容，但作为一般规则，不建议比较浮点是否相等。所以在这种情况下使用`if($divprice==1)`也会产生意想不到的结果。

# java - 具有不熟悉的 Java 语法的数独算法

> ID：15048830
> 
> 赞同：0
> 
> 时间：2013-02-24T04:56:17.677
> 
> 标签：java

当我遇到一些我以前从未见过的语法时，我正在查看数独求解算法。

我感到困惑的是

```
 System.out.print(solution[i][j] == 0 ? " " : Integer.toString(solution[i][j])); 
```

我不明白问号的含义或问号后面的任何内容。这条线是方法的一部分

```
 static void writeMatrix(int[][] solution) {
    for (int i = 0; i < 9; ++i) {
        if (i % 3 == 0)
            System.out.println(" -----------------------");
        for (int j = 0; j < 9; ++j) {
            if (j % 3 == 0)
                System.out.print("| ");
            System.out.print(solution[i][j] == 0 ? " " : Integer.toString(solution[i][j]));

            System.out.print(' ');
        }
        System.out.println("|");
    }
    System.out.println(" -----------------------");
} 
```

我从[http://www.colloquial.com/games/sudoku/java_sudoku.html](http://www.colloquial.com/games/sudoku/java_sudoku.html)得到了这段代码。任何解释将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T04:59:18.673

这是标准的[三元运算符](http://en.wikipedia.org/wiki/%3F%3a#Java)，存在于大多数语言中：C、C++、Java、Perl 等。

```
condition ? value_if_true : value_if_false 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T05:04:20.587

```
 System.out.print(solution[i][j] == 0 ? " " : Integer.toString(solution[i][j])); 
```

等同于

```
 if(solution[i][j] == 0){
        System.out.print(" ");
    }
    else{
        System.out.print(Integer.toString(solution[i][j]));
    } 
```

它基本上是编写 if/else 语句的内联方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T04:59:11.083

基本上是一个 if 语句。`" "`如果不是`solution[i][j] == 0`，它将打印出来`Integer.toString(solution[i][j])`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-24T04:59:21.483

基本上说如果该值为 0，则打印“”，如果不是，则打印该数组存储的任何内容的字符串表示形式。

# python - Django 中关于文件存储处理的包罗万象的异常类是什么？

> ID：15048832
> 
> 赞同：1
> 
> 时间：2013-02-24T04:56:50.203
> 
> 标签：python, django, file, django-forms, django-storage

我需要捕获与 Django 的文件存储 API 相关的所有异常，可能是用于读取或写入等。这里的问题是该 API 中没有定义通用异常类。例如，当使用`FileSystemStorage`（默认）时，抛出的异常是`IOError`，但是如果我使用的是远程存储，比如 S3？我知道我可以添加一些通用的 Boto 异常，但我想要的是保持此代码通用并与我以后选择的任何存储后端分离。

这是解释这种情况的示例代码：

```
import contextlib

class SomeForm(forms.ModelForm):
    textfield = forms.CharField()

    class Meta:
        model = CSSTemplate

    def __init__(self, *args, **kwargs):
        super(SomeForm, self).__init__(*args, **kwargs)

        if not self.is_bound and self.instance and self.instance.file_field:
            try:
                with contextlib.closing(self.instance.file_field.file) as file_obj:
                    file_obj.open('r')
                    self['textfield'].field.initial = file_obj.read()
            except (IOError, ):  # <-- ???
                self.instance.file_field = '' 
```

我应该在`except`子句中检查哪些异常类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T06:07:11.027

```
try:

except OSError:
   //raise if file is already exist

except IOError:
   // is not a directory 

except ValueError:
   //raise if someone is attempted to access then denied 
```

# distance - 两个标记之间的距离

> ID：15048841
> 
> 赞同：2
> 
> 时间：2013-02-24T04:58:42.337
> 
> 标签：distance, augmented-reality, markers

我正在使用 Metaio SDK 进行 AR 项目，当我将相机指向它们时，我在计算两个标记之间的距离时遇到了问题，我想要做的是在每个标记上显示一个 3d 模型，同时有一个它们之间的特定距离，比如说（10 厘米），但是当我将距离减小到 5 时，我应该能够显示另一个 3d 模型。我使用了许多方法来实现总是以计算手机和目标之间的距离而结束的方法。

```
float distance = FloatMath.sqrt(pos2.getX() * pos2.getY() + pos1.getX()
                * pos1.getY());
float threshold = 50;

        int id1 = 1;
        int id2 = 2;

        boolean successful = metaioSDK.getCosRelation(id1, id2, pose2);

        if (metaioSDK != null) {

            if (pose1.getQuality() > 0 && pose2.getQuality() > 0
                    && distance < threshold) {
                if (successful) {
                    successful = false;
                    mModel1.setVisible(false);
                    mModel2.setVisible(false);
                    mModel3.setVisible(true);
                } else {
                    successful = true;
                    mModel3.setVisible(false);
                    mModel1.setVisible(true);
                    mModel2.setVisible(true);

                }
            } 
```

关于如何确定标记之间的距离有什么建议吗？谢谢

# android - ListView 显示父视图并且不会采取正确的视图？

> ID：15048842
> 
> 赞同：0
> 
> 时间：2013-02-24T04:58:44.097
> 
> 标签：android, xml, android-layout, xml-parsing, android-listview

我`XML`从`Restfull`服务请求中获取，需要将其显示在`listView`.

我决定模拟我在在线博客上找到的类似功能，它似乎反馈了原始视图，而不是我分配给元素的视图格式。

![错误](../Images/0a496eb42014ab9a2d1a536cfc51bfc0.png)

现在你可以看到它的重复两次.....在我的移动联系人栏是`ListView`开始然后重复的地方之后。

ListView 的 XML：

```
<ListView
        android:id="@android:id/list"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_above="@+id/button6"
        android:layout_below="@+id/textView1"
        android:layout_centerHorizontal="true" >

    </ListView> 
```

以及我用于适配器的 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:gravity="left|center"
    android:paddingBottom="5dp"
    android:paddingTop="5dp"
    android:paddingLeft="5dp" >

    <TextView
        android:id="@+id/ContactTitle"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:gravity="center"/>

    <TextView
        android:id="@+id/Name"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:gravity="center" />
     <TextView
        android:id="@+id/MainPhone"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:gravity="center" />
      <TextView
        android:id="@+id/CellPhone"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:gravity="center" />
       <TextView
        android:id="@+id/Fax"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:gravity="center" />
       <TextView
        android:id="@+id/Email"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:gravity="center" />

</LinearLayout> 
```

我还不太擅长构建这些`ListViews`，并且知道它是我所做的，但我不能把我的手指放在它上面。这是我用于处理数据的Java `listView`：

```
protected void onPostExecute(String result){
            String xml = result;
            String KEY_ITEM = "Contact";
            String KEY_CONTACTTITLE = "ContactTitle";
            String KEY_NAME = "Name";
            String KEY_MAINPHONE = "Phone";
            String KEY_CELLPHONE ="Cell";
            String KEY_FAX = "Fax";
            String KEY_EMAIL= "Email";
            ArrayList<HashMap<String, String>> menuItems = new ArrayList<HashMap<String, String>>();

            Document doc = getDomElement(xml);
            if (xml != null) {
                {
                    NodeList nl = doc.getElementsByTagName(KEY_ITEM);
                    for (int i = 0; i < nl.getLength(); i++) {
                        HashMap<String, String> map = new HashMap<String, String>();
                        Element e = (Element) nl.item(i);
                        map.put(KEY_CONTACTTITLE, getValue(e, KEY_CONTACTTITLE));
                        map.put(KEY_NAME, getValue(e, KEY_NAME));
                        map.put(KEY_MAINPHONE, getValue(e, KEY_MAINPHONE));
                        map.put(KEY_CELLPHONE, getValue(e, KEY_CELLPHONE));
                        map.put(KEY_FAX, getValue(e, KEY_FAX));
                        map.put(KEY_EMAIL, getValue(e, KEY_EMAIL));
                        menuItems.add(map);
                    }

                    ListAdapter adapter = new SimpleAdapter(MoveContactsActivity.this, menuItems,
                            R.layout.activity_move_contacts, new String[] {
                                    KEY_CONTACTTITLE, KEY_NAME, KEY_MAINPHONE, KEY_CELLPHONE, KEY_FAX, KEY_EMAIL },
                            new int[] { R.id.ContactTitle, R.id.Name, 
                                    R.id.MainPhone, R.id.CellPhone, R.id.Fax, R.id.Email });
                    setListAdapter(adapter);
                }
            }

        } 
```

如果有人可以帮助我解决这个问题或让我指出正确的方向，我会很高兴。再次感谢您的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T22:17:11.887

似乎您为要使用的适配器指定了错误的布局。无论是那个还是 eclipse 生成的资源都被弄糊涂了，你应该清理一下。

此外，对于它的价值：您应该在 doInBackground 中进行解析和映射生成，将返回值修改为 Map 类型并为每个映射调用 publishProgress(hashMap)。然后在 onProgressUpdate(Map... values) 中，您可以将地图添加到 ArrayList 并发出 adapter.notifyDataSetChanged() 以通知它新数据。

# ruby-on-rails - rails refinerycms s3上传错误

> ID：15048844
> 
> 赞同：5
> 
> 时间：2013-02-24T04:58:48.890
> 
> 标签：ruby-on-rails, ruby-on-rails-3, refinerycms, fog

我正在尝试将 RefineryCMS 配置为使用 Fog 进行 S3 上传。这是我得到的错误：

```
ArgumentError in Refinery::Admin::ImagesController#create
The following keys are invalid: :url 
```

我在 config/initializers/refinery/core.rb 中的配置：

```
config.s3_bucket_name = '(mybucket)'
config.s3_access_key_id = '(mykey)'
config.s3_secret_access_key = '(mysecret)'
config.s3_backend = true 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T20:26:12.827

我刚刚遇到了同样的问题，尽管在不同的设置中（带有 S3 数据存储的蜻蜓）。似乎`fog`是问题所在。

尝试使用旧版本的`fog`. 我更新了我`Gemfile`的使用旧版本的`fog`.

`gem 'fog', '1.4.0'`

然后运行

`bundle install`

我尝试了从 1.9.0 到 1.4.0 的每个版本，而 1.4.0 是我的上传再次正常工作的第一个版本。如果我能找到一种方法让它与 1.9.0 一起使用，我会更新我的帖子

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T21:39:36.277

这是一个快速修复。坚持一个初始化程序。

```
module Excon
 class Connection
   VALID_CONNECTION_KEYS << :url
 end 
end 
```

# c# - 属性参数必须是常量表达式

> ID：15048847
> 
> 赞同：3
> 
> 时间：2013-02-24T04:59:08.923
> 
> 标签：c#, interface, attributes

有人可以向我解释为什么以下接口定义在 Visual Studio 2010 中编译时出错？

```
 [IncompleteCodePort(SourceOriginType.Other, "This should be a GL abstraction depending on what OpenGL API will be used")]
    public interface IGL
    {
        /// <summary>
        /// Returns true if provided function is available or supported by graphics API
        /// </summary>
        /// <param name="funcName"></param>
        /// <returns></returns>
        bool IsFunctionAvailable(string funcName);

        /// <summary>
        /// Returns true if provided function is supported as extension by graphics API
        /// </summary>
        /// <param name="funcName"></param>
        /// <returns></returns>
        bool IsExtensionAvailable(string funcName);
    }

public class IncompleteCodePortAttribute : Attribute
    {
        public SourceOriginType SourceOriginType { get; private set; }
        public string SourceUrl { get; private set; }
        public string Reason { get; private set; }

        public IncompleteCodePortAttribute(SourceOriginType originType, string reason, string sourceUrl = null)
        {
            SourceOriginType = originType;
            SourceUrl = sourceUrl;
            Reason = reason;
        }
    }

    public enum SourceOriginType
    {
        CodePlex,
        WorldWindJdk,
        StackOverflow,
        Other
    } 
```

我得到的错误是：

> 属性参数必须是属性参数类型的常量表达式、typeof 表达式或数组创建表达式

如果删除自定义属性，则不会出现编译错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T15:28:08.857

这似乎是 VS2010 中 C# 编译器中的一个错误（代码在 VS2012 下编译良好）。看起来编译器没有将`null`参数的默认值视为常量。

此代码无法编译：

```
[IncompleteCodePort()]
interface IGL
{}

class IncompleteCodePortAttribute : Attribute
{
    public IncompleteCodePortAttribute(string sourceUrl = null)
    {}
} 
```

带有提到的错误消息（“属性参数必须是属性参数类型的常量表达式、类型表达式或数组创建表达式”），但没有源代码位置会令人困惑。

一些有效的属性声明示例：

```
class IncompleteCodePortAttribute : Attribute
{
    public IncompleteCodePortAttribute(string sourceUrl = "")
    {}
} 
```

```
class IncompleteCodePortAttribute : Attribute
{
    private const string Null = null;

    public IncompleteCodePortAttribute(string sourceUrl = Null)
    {}
} 
```

```
class IncompleteCodePortAttribute : Attribute
{
    public IncompleteCodePortAttribute()
        : this(null)
    {}

    public IncompleteCodePortAttribute(string sourceUrl)
    {}
} 
```

# android - Android从另一个复选框更改复选框首选项的值

> ID：15048853
> 
> 赞同：1
> 
> 时间：2013-02-24T05:00:00.850
> 
> 标签：android, sharedpreferences, preferences

我有一个复选框首选项，我想从另一个复选框设置它的值。现在我可以从复选框首选项中获取值并将其设置为外部复选框，但我不知道如何从该外部复选框中设置首选项值。请帮助这是我的代码

```
 getPrefs = PreferenceManager.getDefaultSharedPreferences(getBaseContext());            musicpref = getPrefs.getBoolean("musicp", true);    
        CheckBox musiccheck = (CheckBox) findViewById(R.id.checkBox1); 
       //The external Checkbox, is checked will start service , if not will stop it
                musiccheck.setOnCheckedChangeListener(new OnCheckedChangeListener() {
                    public void onCheckedChanged(CompoundButton buttonView,
                            boolean isChecked) {
                        if (isChecked) {

                            Intent musicstart = new Intent(MainActivity.this,
                                    ServiceMusic.class);
                            startService(musicstart);
                        } else {
                            Intent musicstart = new Intent(MainActivity.this,
                                    ServiceMusic.class);
                            stopService(musicstart);
                        }

                    }
                });

                // Preference checkbox , if is true will set the external checkbox to true 
                if (musicpref == true) {
                    musiccheck.setChecked(true);
                }else{
                    musiccheck.setChecked(false);
                } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T05:14:16.737

你可以尝试这样的事情：

```
SharedPreferences preferendecs = PreferenceManager.getDefaultSharedPreferences(getContext());
Editor editor = preferencess.edit();
editor.putBoolean(PREF_NAME, musiccheck.getValue());
editor.commit(); 
```

你也可以参考这个：

[http://android-coding.blogspot.in/2011/08/example-of-using-checkboxpreference.html](http://android-coding.blogspot.in/2011/08/example-of-using-checkboxpreference.html) 和

[如何在 android 开发中捕获 CheckBoxPreference 的变化？](https://stackoverflow.com/questions/4260841/how-do-i-capture-changes-of-a-checkboxpreference-in-android-development)

# ruby-on-rails - 在rails中使用form_tag未定义的方法

> ID：15048859
> 
> 赞同：1
> 
> 时间：2013-02-24T05:02:04.367
> 
> 标签：ruby-on-rails

我在使用 rails 中的 form_tag 时遇到问题。它告诉我有一个未定义的方法或名为 sendrequest 的局部变量。但是我已经在我的控制器中定义了这个。我错过了什么？（PS 我是 Rails 新手，所以如果你看到任何不好的语法，请告诉我）。谢谢！

这是我的 home.html.erb：

```
<% form_tag sendrequest %>
    <%=check_box_tag "friendids[]", 12345 %> 
    <%=check_box_tag "friendids[]", 67890 %>
    <%= submit_tag "send requests"%>
<% end_form_tag %> 
```

在我的 game_pages_controller 中，我现在有一个用于 sendrequest 的空函数。

```
def sendrequest
end 
```

我的路线只是将游戏页面路由到主页。

```
root to: 'game_pages#home'
match '/home', to: 'game_pages#home' 
```

复选框的目的是获取用户想要选择的好友列表。但是我不需要将它添加到数据库中，这就是为什么我没有任何朋友的模型。我想使用一些javascript，以便提交表单将遍历friendsids并使用它们执行一些功能。出于这个原因，我不需要保留朋友模型，并且复选框实际上不会为当前用户更新任何模型。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T05:12:54.707

如果要在视图中使用控制器中的方法，则必须告诉视图上下文将其包含`helper_method`在控制器中。

```
class GamePagesController < ApplicationController

  def sendrequest
  end
  helper_method :sendrequest
end 
```

除非您在控制器中实际使用该方法，否则它确实属于辅助模块，在这种情况下，它将自动包含在视图上下文中。

您的代码还有一些问题。

```
<%= form_tag sendrequest do %>
  <%= check_box_tag 'friendids[]', 12345 %>
  <%= check_box_tag 'friendids[]', 67890 %>
  <%= submit_tag 'send requests' %>
<% end %> 
```

基本上，表单标签需要包装在输出 erb 而不是常规 erb 中，否则它不会将您的代码输出到缓冲区。并且没有 end_form_tag，而是使用普通的 ruby​​ do/end 块语法。该块中的任何内容都将包含在表单标签中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T05:23:01.577

如果您希望表单执行`sendrequest`操作，您需要设置您的路线并在表单中使用它。

```
# routes
match '/sendrequest' => 'game_pages#sendrequest', as: :sendrequest

# view
<%= form_tag sendrequest_path do %> 
```

这就是它应该设置的方式。您将视图中的 url 与控制器中的操作相匹配。

# javascript - 旋转 css 3d 对象无法正常工作

> ID：15048860
> 
> 赞同：0
> 
> 时间：2013-02-24T05:02:17.580
> 
> 标签：javascript, css, animation, 3d, rotation

首先，看看这个jsfiddle：http: [//jsfiddle.net/markasoftware/CJDeD/6/](http://jsfiddle.net/markasoftware/CJDeD/6/)

```
 <div id="container">
            <figure id="box">
                <div id="back" class="side"></div>
                <div id="left" class="side"></div>
                <div id="right" class="side"></div>
                <div id="front" class="side"></div>
                <div id="bottom" class="side"></div>
            </figure>
        </div> 
```

```
 body{
            background-color: #000000;
        }

        #msgline{
            opacity: 0;
            transition: opacity 0.5s 1s;
            -webkit-transition: opacity 0.5s 1s;
        }

        h1{
            margin-top: 0;
        }

        .side{
            position: absolute;
            background-color: #c8c8c8;
            color: darkgrey;
            border-color: #000000;
            border-radius: 20px;
            border-width: thin;
            border-style: solid;
            text-align: center;
        }

        #box{
            height: 100%;
            width: 100%;
            position: absolute;
            -webkit-transform-style: preserve-3d;
            -webkit-transform: rotateX(-20deg);
            transform-style: preserve-3d;
            transform: rotateX(-20deg);
            transition: all 1s;
            -webkit-transition: all 1s;
        }

        #container{
            margin-top: 30px;
            margin-left: 20%;
            -webkit-perspective: 800px;
            perspective: 800px;
            height: 200px;
            width: 400px;
        }

        #bottom{
            height: 200px;
            width: 400px;
            -webkit-transform: rotateX(-90deg) translateZ(100px);
            transform: rotateX(-90deg) translateZ(100px);
        }

        #front{
            height: 200px;
            width: 400px;
            -webkit-transform: translateZ(100px);
            transform: translateZ(100px);
        }

        #back{
            height: 200px;
            width: 400px;
            -webkit-transform: translateZ(-100px);
            transform: translateZ(-100px);
        }

        #left{
            height: 200px;
            width: 200px;
            -webkit-transform: rotateY(-90deg) translateZ(100px);
            transform: rotateY(-90deg) translateZ(100px);
        }

        #right{
            height: 200px;
            width: 200px;
            -webkit-transform: rotateY(90deg) translateZ(300px);
            transform: rotateY(90deg) translateZ(300px);
        } 
```

```
 function spinit(){
                var box=document.getElementById('box');
                box.style.transform=box.style.webkitTransform='rotateX(-20deg) rotateY(360deg)';
            }
        setTimeout(spinit(),1000) 
```

它意味着有一个顶部开口的 3d 矩形棱镜。确实如此。我还希望它旋转 360 度左右。我包含了一个小的 js 函数来做到这一点，但它不起作用。它适用于任何其他值，但不适用于 360！我认为它试图通过将 360 转换为 0 来简化它，因为它对于大多数事物都是相同的，但不是动画。以前也有另一个问题，但我想通了，并在下面给出了答案。动画适用于其他值（例如，尝试将 360 更改为 180），但不是 360。我想过尝试 359，但它只是向相反方向旋转了 1 度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T05:19:29.993

好吧，我讨厌回答自己的问题，但我发现了为什么轮换的起源搞砸了。box 元素应该应用了以下 css 属性：

```
height: 100%;
width: 100%; 
```

新的jsfiddle在[http://jsfiddle.net/markasoftware/CJDeD/6/](http://jsfiddle.net/markasoftware/CJDeD/6/)但是360度旋转的问题依然存在，请回答

# directshow - Skype 桌面 API 和视频录制

> ID：15048861
> 
> 赞同：0
> 
> 时间：2013-02-24T05:02:28.953
> 
> 标签：directshow, skype, skype4com

Skype 桌面 API 允许录制音频（双向），但没有录制视频的选项。

我可以轻松捕获源视频（从默认捕获设备），但是如何捕获传入的视频？

有一些应用程序通过 Skype 视频窗口的“屏幕捕获”来实现（例如 Pamela for Skype，结果看起来很丑），但也有其他应用程序显然具有更复杂的方法（例如**Evaer**）。知道 Evaer 是如何做到这一点的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T09:38:26.673

上次我检查 Skype 没有使用 DirectShow 来呈现传入视频时，他们使用的是常规 API（如 GDI）。这基本上让您可以选择从屏幕/DC 回读，或者挂钩进程并修补 API 函数条目，以便在绘制帧时拦截 API 调用以捕获帧（脏东西）。我想您提到的应用程序正在使用类似的技巧。也许他们通过标准化帧速率、消除伪影、使用高质量编码等使事情变得更漂亮——总而言之，输出视频可能看起来不错。

# c# - 如果我使用 enter/import-pssession cmdlet，为什么在远程计算机（使用参数）上以编程方式 (C#) 执行 powershell cmdlet 不起作用？

> ID：15048867
> 
> 赞同：-1
> 
> 时间：2013-02-24T05:03:14.800
> 
> 标签：c#, .net, powershell, powershell-2.0

我有远程机器的 PSSession 对象并说，我正在尝试执行“命令”

方法 1（在执行实际命令之前调用 enter-pssession）：

```
Command cmd = new Command("enter-pssession");
cmd.Parameters.Add("Session",session);
pipeline.Commands.Add(cmd);
pipeline.Commands.Add(command); 
```

方法 2（在执行实际命令之前调用 import-pssession）：

```
Command cmd = new Command("import-pssession");
cmd.Parameters.Add("Session",session);
pipeline.Commands.Add(cmd);
pipeline.Commands.Add(command); 
```

两种方法都不起作用，错误消息也很清楚。它说“术语‘命令’未被识别为 cmdlet、函数、脚本文件或可运行程序的名称。请检查名称的拼写，或者如果包含路径，请验证路径是否正确并重试。”

方法 3 - 有效（使用 Invoke-Command 并使用脚本块和会话对象执行 cmd）

```
Command cmd = new Command("invoke-command");
cmd.Parameters.Add("session", session);
cmd.Parameters.Add("scriptblock", ScriptBlock.Create(command.ToString()));
if (null != argumentList)
{
    cmd.Parameters.Add("ArgumentList", argumentList);
} 
```

我没有被阻止，因为我正在使用方法 3 并且能够继续我的工作。

但我仍然不确定为什么方法 1 或 2 不起作用。我相信如果我使方法 1 或 2 起作用，将命名参数传递给目标机器可能会更容易。

换句话说，正如 Musaab 所说，我们只能在交互模式下使用 enter/import-session cmdlet？

这正是我的问题 - 为什么我不能以编程方式使用它们？如果我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T09:07:36.720

PSSessoions 仅在交互模式下工作，因此您必须创建一个 PSSession，然后使用 Invoke-Command 在该会话上执行命令。

# django - django响应内容消失

> ID：15048873
> 
> 赞同：0
> 
> 时间：2013-02-24T05:04:51.623
> 
> 标签：django, nginx, pdf-generation, uwsgi, pisa

我有一个突然停止工作的视图。显然有些东西必须改变，但我不知道是什么。

当视图被调用时，视图应该返回一个 pdf 文件（即 content-disposition 是附件），浏览器尝试下载一个 pdf，但无论如何它总是 0 字节。

我在这里和那里记录以调试问题所在。我可以看到，当从 generate_pdf 返回响应对象时，它具有正确的内容。不知何故，在那里和客户端浏览器之间，它只是消失了。

有人有什么想法吗？

django 1.3、nginx、uwsgi

视图.py

```
def get(self, request, *args, **kwargs):
    ...
    return generate_pdf(request, 'ps_pdfbase.html', context_dict, returned_file_name) 
```

generate_pdf 函数

```
...
myfile = StringIO()
result_obj = pisa.CreatePDF(file_data, myfile)

logging.debug('pdf result_obj:\n\tsize:%s\n\terr:%s\n\tlog:%s\n\ttext:%s' % (myfile.tell(),
                                                                                result_obj.err,
                                                                                result_obj.log,
                                                                                result_obj.text, )) 
myfile.seek(0)
response =  HttpResponse(myfile, mimetype='application/pdf')    
logging.debug('response content: %s' % response.content)
response['Content-Disposition'] = 'attachment; filename=' + slugify(returned_file_name) + '.pdf'
return response 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T11:19:12.887

就像另一种方法尝试创建响应，然后将其直接传递给比萨？

```
response = http.HttpResponse(mimetype='application/pdf')
response['Content-Disposition'] = 'attachment; filename=%s' % filename
pisa.CreatePDF(file_data, response) 
return response 
```

您是否决定不保存文件并通过 Nginx X-Accel-Redirect 提供它？- 为了完整起见，这里有一个例子：

Django视图：

```
resp = http.HttpResponse()
resp['Content-Type'] = 'application/pdf'
resp['Content-Disposition'] = 'attachment; filename=filename.pdf'
resp['X-Accel-Redirect'] = '/xaccel_path/%s' % relative_path_to_file
return resp 
```

nginx配置：

```
server { 
...
location /xaccel_path {
internal;
alias /path/to/protected/files/;
}
} 
```

# django - 如果一个用户在 Django 中共享了多个文件，用户名会重复吗？

> ID：15048877
> 
> 赞同：0
> 
> 时间：2013-02-24T05:05:25.170
> 
> 标签：django, model

我有一个 django 视图，它将 shared_user_id 提供给 django 模板：

```
 shared_by = Share.objects.filter(shared_user_id=log_id) 
```

这是我的分享和用户模型：

```
class Share(models.Model):
    users = models.ForeignKey(User)
    files = models.ForeignKey(File)
    shared_user_id = models.IntegerField()
    shared_date = models.TextField()

class User(AbstractBaseUser):
    #id = models.IntegerField(primary_key=True)
    #identifier = models.CharField(max_length=40, unique=True, db_index=True)
    username = models.CharField(max_length=90, unique=True, db_index=True)
    create_time = models.DateTimeField(null=True, blank=True)
    update_time = models.DateTimeField(null=True, blank=True)
    email = models.CharField(max_length=225)
    #password = models.CharField(max_length=120)
    external = models.IntegerField(null=True, blank=True)
    deleted = models.IntegerField(null=True, blank=True)
    purged = models.IntegerField(null=True, blank=True)
    form_values_id = models.IntegerField(null=True, blank=True)
    disk_usage = models.DecimalField(null=True, max_digits=16, decimal_places=0, blank=True)
    objects = UserManager()
    USERNAME_FIELD = 'email'
    class Meta:
        db_table = u'galaxy_user' 
```

我在这样的模板中调用：

```
{% for choice in shared_with_me %}
    {% csrf_token %}
    <tr class="oddclass">
        <td><input type="checkbox" name="choice_shard_with_me" id="choice{{ forloop.counter }}" value="{{ choice.file_name }}" onchange="checkChecked()"/></td>
        <td><label for="choice{{ forloop.counter }}">{{ choice.file_name }}</label></td>
        <td>{{ choice.type }}</td>
        <td>{{ choice.size }}</td>
        <td>{{ choice.end_date }}</td>
        {% for file in shared_by %}
            {% ifequal file.users choice.users %} 
                {% if forloop %}
                    <td>{{ file.users.username }}</td>
                {% endif %}
            {% endifequal %}
        {% endfor %}
    </tr>
{% endfor %} 
```

这是模板中每个表的列名：

文件名、类型、大小、共享位置、共享者

在共享者中，显示共享文件的用户的用户名。但是对于同一个用户，用户名是这样重复的：与我共享

```
 File Name   Type    Size       Shared On            Shared By
    ok.txt  txt 4.78 MB February 24, 2013, 09:59AM  sachitad
    ok.txt  txt 4.78 MB February 24, 2013, 10:08AM  sachitdhiifds   sachitdhiifds
    NC_008253.fna   fna 4.78 MB February 24, 2013, 10:11AMsachitdhiifds sachitdhiifds
    NC_008253.fna   fna 4.78 MB February 24, 2013, 10:20AM  hello
    ok.txt  txt 4.78 MB February 24, 2013, 10:30AM  abcde   abcde 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T08:13:04.270

你应该检查你的数据集。我认为该代码：`{% for file in shared_by %}`从数据库中获取具有特定用户的两条文件记录并打印两次。

# android - intent.getAction() 返回 NULL

> ID：15048883
> 
> 赞同：9
> 
> 时间：2013-02-24T05:06:28.593
> 
> 标签：android, android-intent, android-manifest

在我的应用程序中，我添加了一个启动画面，并创建了启动活动并对清单文件进行了适当的更改。但是，当我现在运行我的应用程序时，初始屏幕会显示其分配的时间，然后返回 NullPointerException。问题是由

```
 intent.getAction() 
```

在我的启动画面重定向到的类的第 241 行，intent.getAction() 返回 null。据我了解，该操作是从指定活动的清单文件中获取的。那是正确的不是吗？如果是这样，有人可以看看这个，看看我是否搞砸了什么？我看没有错。

```
 <activity android:name=".Main"
              android:label="@string/app_name">       

    </activity>

   <activity android:name=".SplashActivity" android:theme="@android:style/Theme.Black.NoTitleBar.Fullscreen">

            <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
            <intent-filter>
            <action android:name="android.intent.action.GET_CONTENT" />

            <data android:mimeType="*/*" />
            <category android:name="android.intent.category.OPENABLE" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter> 
```

****__ *_* __ *_* __ *_*** *If 语句正在检索操作****_* __ *_* __ *_* __ *_* ____****

 **```
 Intent intent = getIntent();

    System.out.println("Intent action is " + intent.getAction());
    if(intent.getAction().equals(Intent.ACTION_GET_CONTENT)) {
        bimg[5].setVisibility(View.GONE);
        mReturnIntent = true;
 } else if (intent.getAction().equals(ACTION_WIDGET)) {
        Log.e("MAIN", "Widget action, string = " + intent.getExtras().getString("folder"));
        mHandler.updateDirectory(mFileMag.getNextDir(intent.getExtras().getString("folder"), true));

    }
} 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-24T05:37:33.520

该动作是从启动该活动的 Intent 中获取的。除了直接将该活动指定为目标的意图之外，清单意图过滤器还定义了匹配的意图类型。

如果您使用以下内容开始活动，则操作为 null 是完全正常的：

```
startActivity(new Intent(this, MyTargetActivity.class)); 
```

您没有为 Intent 指定操作，因此没有。在测试接收到的意图的操作时，像这样反转检查通常很有用：

```
if (Intent.ACTION_GET_CONTENT.equals(intent.getAction())) {
    // ...
} 
```

避免需要显式的空检查，因为常量`Intent.ACTION_GET_CONTENT`不会为空。

（请注意，即使在这种情况下您的任何操作检查都不匹配，您的代码仍然必须做一些合理的事情。）**

# javascript - 无法读取 d3.force 实现中未定义的属性“权重”

> ID：15048885
> 
> 赞同：4
> 
> 时间：2013-02-24T05:07:07.000
> 
> 标签：javascript, d3.js, force-layout

我已经被这个问题困扰了一段时间，即使基于现有的答案也不知道该怎么做。我在统一响应的最后一个 JSON 条目上不断收到此错误。

```
...{"paperCount": 1, "PMIDs": [20626970], "authorA": 79, "authorB": 80}, 
{"paperCount": 1, "PMIDs": [20492581], "authorA": 81, "authorB": 82}, 
{"paperCount": 1, "PMIDs": [20492581], "authorA": 81, "authorB": 83}, 
{"paperCount": 1, "PMIDs": [20492581], "authorA": 81, "authorB": 84}, 
{"paperCount": 1, "PMIDs": [20492581], "authorA": 82, "authorB": 83}, 
{"paperCount": 1, "PMIDs": [20492581], "authorA": 82, "authorB": 84}, 
{"paperCount": 1, "PMIDs": [20492581], "authorA": 83, "authorB": 84}]... 
```

下面的代码用于提取该信息。它在for循环中不断失败......

```
 $.getJSON('/papers.txt', function(response){
    var w = 1280,
    h = 900,
    fill = d3.scale.category10(),
    nodes = d3.range(1000).map(Object),
    links = d3.range(1000).map(Object);

    var index = 0;
    var mouseX = 0,
      mouseY = 0;

    for (var j = 0; j < response.length; j++){
      links[j] = {source: nodes[response[j].authorA], target: nodes[response[j].authorB], value: response[j].paperCount};
    } 
```

任何帮助，将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-25T05:59:30.053

## 介绍

首先，我建议您仔细阅读[文档](https://github.com/mbostock/d3/wiki/Force-Layout)，因为我在这个答案中要说的都写在里面

好吧，首先在您提供的代码中，您根本不使用强制布局，您没有使用它声明节点，您没有在 svg 中包含节点......所以基本上，从我所看到的，毫无疑问，它会引发错误。你应该看看[这个例子](http://bl.ocks.org/mbostock/4062045)，看看如何创建一个最小力有向图。

我还建议下次您有问题时，您可以构建一个 jsFiddle，以便我们可以对其进行处理并查看问题所在，因为使用您提供的代码，您无法准确地看到哪里出错了不要以传统方式使用 d3.js。

所以，让我们回到基础。

## 定义图形

首先，在加载数据之前，我们需要定义图的一般属性：

```
var width = 960,
    height = 500;

var color = d3.scale.category20();

/* Here we define that we will use the force layout an we add some parameters to setup the basic layout of the graph */
var force = d3.layout.force() 
    .charge(-120)
    .linkDistance(30)
    .size([width, height]);

/* Here we include the graph in the page */
var svg = d3.select("body").append("svg")
    .attr("width", width)
    .attr("height", height); 
```

但是，目前该图没有节点。我们需要加载数据。

## 加载数据

为了加载数据，d3 提供了一个 helper，所以让我们使用它来代替 jQuery 的，不需要混合另一个库。有关信息，json 加载器需要一个 .json 文件，因此即使它们包含 json 格式的数据，也不要使用 .txt 文件。

```
d3.json("papers.json", function(error, data) {
    // do whatever you need to do with the json data, for this example : create the graph
} 
```

我以后要做的所有事情都应该包含在这些大括号中。

## 格式化数据

从我在这里看到的情况来看，您的数据似乎只是一个链接列表，我只会认为您的节​​点只是从 0 到 99 的点。

```
var my_nodes = d3.range(100).map(function(d){return {"name": d};});
var my_links = my_data.map(function(d){return {"source": d.authorA, "target": d.authorB, "value":d.paperCount, "origin": d};}); 
```

## 构建力有向图

要根据我的数据构建力导向图，

```
force // I use the previously defined variable force to add the data.
    .nodes(my_nodes)
    .links(my_links)
    .start() //start the simulation 
```

现在，力布局模拟开启，它知道有数据，但仍然没有向 svg 添加任何内容。我们现在将添加所有内容：

```
var link = svg.selectAll(".link")
    .data(my_links)
    .enter().append("line")
    .attr("class", "link")

var node = svg.selectAll(".node")
    .data(my_nodes)
    .enter().append("circle") // If you wonder why enter() is used, see the documentation
    .attr("class", "node")
    .attr("r", 5)
    .style("fill", function(d) { return "red"; })
    .call(force.drag); 
```

有关类属性，请参见[示例](https://github.com/mbostock/d3/wiki/Force-Layout)。

## 声明 tick() 函数

最后，您必须声明将在强制布局函数的每次迭代中调用的刻度函数

```
force.on("tick", function() {
  link.attr("x1", function(d) { return d.source.x; })
      .attr("y1", function(d) { return d.source.y; })
      .attr("x2", function(d) { return d.target.x; })
      .attr("y2", function(d) { return d.target.y; });

  node.attr("cx", function(d) { return d.x; })
      .attr("cy", function(d) { return d.y; });
}); 
```

## 结论

我刚刚为您的数据翻译了基本示例以显示它有效：[http ://bl.ocks.org/ChrisJamesC/5028030](http://bl.ocks.org/ChrisJamesC/5028030)

* * *

## 或者...

也许，你遇到的主要问题是你不明白 $.getJson() 函数是*异步*的，所以你不应该只在其中构建`links`向量，你也应该只在这个函数中使用它，否则它不会尚未加载。

* * *

# 或者...

也许，您的错误只是来自您应该命名 json 文件`/papers.json`而不是`/papers.txt`.

# c# - XAML 冲突检测

> ID：15048886
> 
> 赞同：3
> 
> 时间：2013-02-24T05:07:09.043
> 
> 标签：c#, wpf, windows-phone-7, xaml, collision-detection

我正在开发一款 Windows Phone 游戏，它在减去碰撞检测后运行流畅。

是否有任何人可以建议检测两个 XAML 对象是否相互重叠的简单方法？

我知道的唯一方法是创建一个列表，其中包含游戏中每个可碰撞对象的坐标，然后扫描列表以确定是否存在碰撞。

有了触发器、行为等所有很酷的 XAML 功能，我认为可能有更简单的方法。但是，搜索结果很少。

有任何想法吗？最简单的是我正在寻找的。没有什么疯狂的需要。就在我的播放器与物体碰撞时，它消失了。

我不知道这是否有所作为，但我所有的对象都是图像。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T08:11:02.753

没有用于与 XAML 对象进行冲突检测的内置机制。这是有道理的，XAML 是为创建应用程序 UI 而设计的——它不是游戏引擎！

你可以试试 Physics Helper 框架：

[http://physicshelper.codeplex.com/](http://physicshelper.codeplex.com/)

这添加了一个物理引擎，允许您通过行为将 XAML 对象转换为“物理”对象：

```
 <Ellipse Width="100" Height="100" Fill="Red"
            Canvas.Left="80" Canvas.Top="100">
    <!-- make the engine aware of this element -->
    <i:Interaction.Behaviors>
      <pb:PhysicsObjectBehavior />
    </i:Interaction.Behaviors>
  </Ellipse> 
```

不久前，我对这个框架进行了一次简短的尝试：

[http://www.scottlogic.co.uk/blog/colin/2011/12/a-festive-and-fun-windows-phone-7-maze-game/](http://www.scottlogic.co.uk/blog/colin/2011/12/a-festive-and-fun-windows-phone-7-maze-game/)

这是相当不错的！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T21:00:25.280

所以我安装了物理助手，但上面提供的那个不能与任何构建过去芒果的 Windows 手机一起使用。所以我找到了 Physics Helper XAML，它不是一个安装文件，并且在可预见的将来必须使用糟糕的文档才能使用它。

所以我创建了自己的 XAML 碰撞检测系统。它非常简单，可以满足我的需要并且速度很快。

最重要的是，尽管您可以在 Blend 或 WYSISYG 编辑器中编辑您的画布，但它不会破坏代码。

首先，我使用我希望可碰撞的项目创建嵌套画布

```
<Canvas x:Name="Collidables">
            <Image x:Name="star" Width="50" Height="50" Source="images/star.png" Canvas.Left="54" Canvas.Top="-132"/>
            <Image x:Name="star_Copy" Width="50" Height="50" Source="/images/star.png" Canvas.Left="158" Canvas.Top="-190"/>
            <Image x:Name="star_Copy1" Width="50" Height="50" Source="/images/star.png" Canvas.Left="268" Canvas.Top="-260"/>
            <Image x:Name="star_Copy2" Width="50" Height="50" Source="/images/star.png" Canvas.Left="372" Canvas.Top="-322"/>
            <Image x:Name="star_Copy3" Width="50" Height="50" Source="/images/star.png" Canvas.Left="54" Canvas.Top="-390"/>
            <Image x:Name="star_Copy4" Width="50" Height="50" Source="/images/star.png" Canvas.Left="158" Canvas.Top="-448"/>
            <Image x:Name="star_Copy5" Width="50" Height="50" Source="/images/star.png" Canvas.Left="268" Canvas.Top="-518"/>
            <Image x:Name="star_Copy6" Width="50" Height="50" Source="/images/star.png" Canvas.Left="372" Canvas.Top="-580"/>
            <Image x:Name="star_Copy7" Width="50" Height="50" Source="/images/star.png" Canvas.Left="372" Canvas.Top="-798"/>
            <Image x:Name="star_Copy8" Width="50" Height="50" Source="/images/star.png" Canvas.Left="268" Canvas.Top="-882"/>
            <Image x:Name="star_Copy9" Width="50" Height="50" Source="/images/star.png" Canvas.Left="158" Canvas.Top="-982"/>
            <Image x:Name="star_Copy10" Width="50" Height="50" Source="/images/star.png" Canvas.Left="54" Canvas.Top="-1060"/>
</canvas> 
```

然后你可以去后面的代码做剩下的事情##注意每个项目都是唯一的##

在游戏循环中，我声明了以下方法来检查碰撞检测

```
 collisionChecks();
 handleCollisions(); 
```

所以第一种方法中发生的事情是这样的：

1.  可碰撞画布中的所有元素都被拉到一个列表中

2.  为了节省检查甚至不在屏幕上的项目，我通过说元素的顶部是否在屏幕上将其添加到碰撞启用列表中将其清除，否则忘记它。

    ```
    public void collisionChecks()
    {            
        List<UIElement> AllCollidables = Collidables.Children.ToList();
        collisionEnabled.Clear();

        foreach (UIElement item in AllCollidables)
        {
            if (Canvas.GetTop((Image)item) + canvasShift > 0)
                collisionEnabled.Add(item as Image);
        }
    } 
    ```

现在我们可以处理符合碰撞条件的对象

1.  第一个 foreach 循环检查玩家和碰撞启用列表中的每个对象之间是否存在碰撞。

2.  如果发生碰撞，它会被添加到 Collisions to handle 列表中

3.  一旦我们拥有所有实际发生碰撞的对象，我们就可以根据它们的名称单独处理它们以确定如何处理它们。例如，在这段代码中，我说如果名称包含“star”，那么让它消失，很快它也会播放声音。但我也可以说，如果它包含“火箭”，那么将玩家状态更改为飞行或其他。

    ```
    public void handleCollisions()
    {

        Rect player = new Rect();
        player.X = Canvas.GetLeft(Player);
        player.Y = Canvas.GetTop(Player);
        player.Height = Player.Height;
        player.Width = Player.Width;

        foreach (Image item in collisionEnabled)
        {
            if (item.Visibility == Visibility.Visible)
            {
                Rect obj = new Rect();
                obj.X = Canvas.GetLeft(item);
                obj.Y = Canvas.GetTop(item) + canvasShift;
                obj.Height = item.Height;
                obj.Width = item.Width;

                obj.Intersect(player);

                if (!obj.IsEmpty)
                {
                    collisionsToHandle.Add(item);
                }
            }
        }
        foreach (Image item in collisionsToHandle)
        {                
            item.Visibility = Visibility.Collapsed;

            if (item.Name.ToLower().Contains("star"))
            {
                score += 100;
            }
        }
        collisionsToHandle.Clear();
        collisionEnabled.Clear();} 
    ```

这不是实现碰撞检测系统的最干净的方法，但它是我想出的最小和最快的方法。希望这可以帮助任何对 XAML 对象的简单 2D 碰撞检测感兴趣的人

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-11T08:25:41.777

Physics Helper XAML ( [http://physicshelperxaml.codeplex.com](http://physicshelperxaml.codeplex.com) ) 说这是对原始物理助手 ( [https://physicshelper.codeplex.com](https://physicshelper.codeplex.com) ) 的重写，可以通过 Blend Behaviors API 用于 Silverlight（浏览器和 WindowsPhone）。

新的不使用我所理解的行为，因为它最初被移植到 WinRT 的早期版本（[http://www.spritehand.com/2011/09/physics-helper-xaml-for-metro-winrt.html ?m=1](http://www.spritehand.com/2011/09/physics-helper-xaml-for-metro-winrt.html?m=1) ) 当还没有类似的功能可用时。它的作者认为新的代码库更简单（并且可以将它移植到 Silverlight 以用于浏览器和 Windows Phone）

另一个是[https://xamlphysics.codeplex.com](https://xamlphysics.codeplex.com)，它也是 Farseer Physics 引擎的包装器，似乎使用 Attached Properties 将物理属性附加到对象（如果我构建这样的功能，我也会使用这种模式）

不确定您是否也可以将此类属性添加到容器中，例如在父级中设置重力以影响其所有子级

# mysql - MySQL Group By 和 Sum 其他列的总值

> ID：15048887
> 
> 赞同：46
> 
> 时间：2013-02-24T05:08:21.930
> 
> 标签：mysql, sql, group-by

我有 2 列是这样的：

```
+----------+--------+
|   word   | amount |
+----------+--------+
| dog      |      1 |
| dog      |      5 |
| elephant |      2 |
+----------+--------+ 
```

我想总结金额，得到结果

```
+----------+--------+
| dog      |      6 |
| elephant |      2 |
+----------+--------+ 
```

到目前为止，我尝试过（但失败了）是这样的：

```
SELECT word, SUM(amount) FROM `Data` Group By 'word' 
```

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2013-02-24T05:08:57.427

删除`WORD`. 它导致列名被转换为字符串。

```
SELECT word, SUM(amount) 
FROM Data 
Group By word 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-02-24T05:25:03.037

它应该是[重音](http://en.wikipedia.org/wiki/Grave_accent)符号而不是[单引号](http://en.wikipedia.org/wiki/Apostrophe)：

```
SELECT word, SUM( amount )
FROM Data
GROUP BY `word`; 
```

***输出：***

```
word     SUM(amount)
dog           6
Elephant      2 
```

![在此处输入图像描述](../Images/f8e340caf1788d78b9c607dad544e3c3.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-24T06:44:03.053

```
SELECT word, SUM(amount) FROM Data Group By word; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-04-07T07:33:38.143

试试这种非常规的方法。

```
SELECT word, SUM(amount) 
FROM Data 
Group By word 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-08-28T11:45:02.200

```
SELECT column_name1, SUM(column_name2) 
FROM table_name 
GROUP BY column_name1 
```

# annotations - 未调用 Resteasy @POST 注释方法

> ID：15048888
> 
> 赞同：0
> 
> 时间：2013-02-24T05:08:26.093
> 
> 标签：annotations, jax-rs, resteasy

我正在使用 Resteasy 2.3.5。当我在浏览器中请求其 URL 时，永远不会调用以下`@POST`带注释的方法：`http://localhost:8080/MyApp/rest/echo/foobar`

```
@POST
@Path("/echo/{msg}")
@Produces("text/plain; charset=UTF-8")
public String echo(@PathParam("msg") final String msg) {
    return msg;
} 
```

但是，当我替换它时`@POST`，`@GET`它工作得很好（浏览器返回`foobar`）。怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T11:30:35.563

发生这种情况是因为您的浏览器在您键入 URL 时总是会执行 GET 请求。
尝试下载像[cURL](http://curl.haxx.se/)这样的 HTTP 客户端工具。然后从命令行环境运行以下测试：

`curl "http://localhost:8080/MyApp/rest/echo/foobar" -X POST`

您可以使用任何 HTTP 方法、标头等。试一试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T13:44:26.273

`@POST`注解指的是 HTTP POST 请求方法。您的 Web 浏览器通常只会发出 GET HTTP 请求方法，这就是为什么当您更改为`@GET`. 您可以使用许多工具来帮助您测试 REST 服务，其中一些工具可以直接在您的浏览器中工作。

对于 Firefox，请尝试[https://addons.mozilla.org/en-us/firefox/addon/restclient/](https://addons.mozilla.org/en-us/firefox/addon/restclient/)

对于 Chrome，请尝试[https://chrome.google.com/webstore/detail/rest-console/cokgbflfommojglbmbpenppphppikmonn?hl=en](https://chrome.google.com/webstore/detail/rest-console/cokgbflfommojglbmbpenpphppikmonn?hl=en)

您还可以查看 [您使用哪些工具来测试您的公共 REST API？](https://stackoverflow.com/questions/4486658/what-tools-do-you-use-to-test-your-public-rest-api)

# jquery - jQuery来回改变图像

> ID：15048895
> 
> 赞同：0
> 
> 时间：2013-02-24T05:10:19.897
> 
> 标签：jquery

我有以下html

```
 <img id="voteImgBtn" onclick='editInstr(1);' src="http://site.com/sync.png" width="99" height="99" border="0"  />
                    <script type="text/javascript">
                        function changeImage(a) {
                            document.getElementById("voteImgBtn").src=a;
                        }
                    </script> 
```

然后我在点击和我的ajax成功后更改图像如下

```
 success: function(data){
           changeImage( "http://site.com/syncD.png" );
        } 
```

我想要做的是在changeImage之后有一个延迟并像这样放回旧图像：

```
 success: function(data){
           changeImage( "http://site.com/syncD.png" );
           delay(500).changeImage( "http://site.com/sync.png" );
        } 
```

但由于某种原因，这不起作用。你能提出如何解决它的建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T05:17:46.747

您的函数既不是可链接的也不是 jQuery 动画，这是唯一`delay()`有效的（更准确地说是 .fx 队列中的任何内容），请尝试以下操作：

```
success: function(data){
    changeImage( "http://site.com/syncD.png" );
    setTimeout(function() {
        changeImage( "http://site.com/sync.png" );
    }, 500);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T05:16:04.313

`delay`是一个 jQuery 函数而不是一个标准的 JavaScript 函数。

```
$().delay() 
```

**编辑：**

在四处搜索之后，我发现了一种使用该函数实现此目的[的晦涩方法](http://blog.project-sierra.de/archives/1559)`delay`（如下所示）。`setTimeout`但是按照其他人的建议使用可能会好得多。

```
// Queue it in the fx queue
$(document).delay(500).queue(function(){ 
    changeImage( "http://site.com/sync.png" );
    $(this).dequeue(); 
});

// Queue it in a custom queue
$(document).delay(500, 'myQueue').queue('myQueue', function(){
    alert('hello');
}).dequeue('myQueue'); 
```

# python - 以编程方式调整 Traitsui 窗口的大小

> ID：15048896
> 
> 赞同：0
> 
> 时间：2013-02-24T05:10:22.710
> 
> 标签：python, enthought, traitsui

我有一个从 HasTraits 继承的 traitsui gui（在 mayavi 图和具有可编辑特征的面板之间有一个 HSplit）。当我调用 .configure_traits() 时，结果窗口的大小似乎仅取决于屏幕大小，而不取决于内容（在 OS X 10.7 和 10.8 上）。有没有办法让窗口（特别是具有可编辑特征的面板）适合其内容的大小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T14:56:24.003

您应该包含一个代码示例来演示您所看到的问题。TraitsUI 通常会生成一个包含[属性](http://docs.enthought.com/traitsui/_images/ui_for_ex1.jpg)的最小大小的窗口：![例子](../Images/ea5fe3b28de1bf25c53dfd930ab777d0.png)

但是如果你指定一个大小，你会得到一个绝对大小：

```
 view = View(Item('figure', show_label=False),
                width=400, height=300, resizable=True) 
```

或屏幕的百分比：

```
 view = View(Item('figure', show_label=False),
                width=.5, height=.5, resizable=True) 
```

取决于你的要求。你的代码说什么？

# list - Scala 将序列组合成三元组

> ID：15048898
> 
> 赞同：0
> 
> 时间：2013-02-24T05:10:49.160
> 
> 标签：list, scala, map, zip, sequence

我有 3 个 IndexedSequences，我想将它们组合如下：

```
indSeq1 = (a,b,c)
indSeq2 = (1,2,3)
indSeq3 = (!,@,#)

result:([a,1,!],[b,2,@],[c,3,#]) 
```

我使用了 zipped 但我得到`([a,b,c],[1,2,3],[!,@,#])` 了如何在 scala 中执行此操作，我希望输出也是 IndexedSequence。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T05:54:03.143

这不是*我*这样做时得到的：

```
scala> val indSeq1 = Seq('a', 'b', 'c')
indSeq1: Seq[Char] = List(a, b, c)

scala> val indSeq2 = Seq(1,2,3)
indSeq2: Seq[Int] = List(1, 2, 3)

scala> val indSeq3 = Seq('!', '@', '#')
indSeq3: Seq[Char] = List(!, @, #)

scala> (indSeq1, indSeq2, indSeq3).zipped
res30: scala.runtime.Tuple3Zipped[Char,Seq[Char],Int,Seq[Int],Char,Seq[Char]] = scala.runtime.Tuple3Zipped@9789aa5f

scala> res30.toSeq
res31: Seq[(Char, Int, Char)] = Stream((a,1,!), ?)

scala> res30.toList
res32: List[(Char, Int, Char)] = List((a,1,!), (b,2,@), (c,3,#))

scala> res30.toIndexedSeq
res33: scala.collection.immutable.IndexedSeq[(Char, Int, Char)] = Vector((a,1,!), (b,2,@), (c,3,#)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T10:15:55.870

只需使用方法`invert`如下`Tuple3`：

```
scala> val s1 = IndexedSeq('a', 'b', 'c')
s1: IndexedSeq[Char] = Vector(a, b, c)

scala> val s2 = Seq(1, 2, 3)
s2: Seq[Int] = List(1, 2, 3)

scala> val s3 = Seq('!, '@, '#)
s3: Seq[Symbol] = List('!, '@, '#)

scala> (s1, s2, s3).invert
res0: IndexedSeq[(Char, Int, Symbol)] = Vector((a,1,'!), (b,2,'@), (c,3,'#)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T05:16:26.827

压缩后尝试运行转置。

# android - 初始化逻辑（比如对于许多单例）应该在 OnCreate 还是 OnResume 中？

> ID：15048902
> 
> 赞同：5
> 
> 时间：2013-02-24T05:11:57.800
> 
> 标签：android

假设我有用于通用 LocationController、BatteryController、AppSateController 等的带有初始化方法的单例...

这些是否应该在 onResume 中而不是 OnCreate 中，因为 OnCreate 在每次旋转时被调用，每次更改为前景时等等......？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-24T09:00:37.703

我的建议通常是像通常那样直接实现单例。忽略 Android，只做如下正常的事情：

```
class Singleton {
    static Singleton sInstance;

    static Singleton getInstance() {
        // NOTE, not thread safe!  Use a lock if
        // this will be called from outside the main thread.
        if (sInstance == null) {
            sInstance = new Singleton();
        }
        return sInstance;
    }
} 
```

现在在您需要的时候调用 Singleton.getInstance()。您的单例将在此时被实例化，并且只要您的进程存在，就会继续重复使用。这是一个很好的方法，因为它允许你的单例被延迟分配（仅在需要时），而不是为你可能不需要的东西做一堆前期工作，从而导致你的启动（从而响应用户）受苦。它还有助于保持你的代码更干净，关于你的单例及其管理的所有内容都位于它自己的位置，并且不依赖于正在运行的应用程序中的某个全局位置来初始化它。

此外，如果您在单例中需要上下文：

```
class Singleton {
    private final Context mContext;

    static Singleton sInstance;

    static Singleton getInstance(Context context) {
        // NOTE, not thread safe!  Use a lock if
        // this will be called from outside the main thread.
        if (sInstance == null) {
            sInstance = new Singleton(context);
        }
        return sInstance;
    }

    private Singleton(Context context) {
        // Be sure to use the application context, since this
        // object will remain around for the lifetime of the
        // application process.
        mContext = context.getApplicationContext();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T05:18:43.580

如果您需要初始化单例（我假设是应用程序级单例），那么适当的方法可能是扩展[Application并在其](http://developer.android.com/reference/android/app/Application.html)[onCreate()](http://developer.android.com/reference/android/app/Application.html#onCreate%28%29)方法中提供所需的初始化。但是，如果初始化很繁重，最好将其放置在从 Application 类开始的单独线程中。

# php - 目录结构，如果你不使用 MVC

> ID：15048912
> 
> 赞同：1
> 
> 时间：2013-02-24T05:13:51.453
> 
> 标签：php, security, directory-structure

有很多关于目录结构的文档，但其中大部分是关于 MVC 目录结构的。但是如果我们不想使用任何框架或 MVC 怎么办？

*   有人说“无需移动到公共目录之上，密码保护就足够了（第一种选择）”
*   有人说“将所有重要文件从 public_html 中取出（第二个选项）”
*   有人说“只将 index.php、css 和 js 文件放在 public_html 中（第三个选项）”

我真的很困惑。

第一个选项：

```
/public_html
   /css
   /images
   /libs
 index.php
 profile.php
 search.php 
```

第二种选择：我仍然可以使用 ww.mysite.com/index.php、ww.mysite.com/profile.php .. 链接结构

```
/libs
/public_html
      /css
      /images
    index.php
    profile.php
    search.php 
```

第三个选项：我的链接将是这样的：ww.mysite.com/index.php?view=search

```
/view
  -profile.php
  -search.php   
/libs
/public_html
    /css
    /images
  index.php 
```

哪一个是最佳实践？目录结构对安全性重要吗？谢谢大家的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T05:44:23.220

我认为第三种选择是最好的，但如果进一步，我会扩展（见下文）。如果可以直接从 Internet 访问文件，则它可能会在出现问题时提供信息。

在第一个和第二个选项中，如果 mime 类型设置错误或由于某些其他原因 PHP 不解析文件，它通常会显示为`text/html`纯文本或纯文本。在第一个和第二个选项中，这意味着有人可能会获取数据库登录等信息。

我通常将其设置为类似于选项三，但将所有内容传递给另一个索引文件，并且不要使 URI 与文件匹配`view=search`表示`search.php`从`view`文件夹中获取文件。我不知道这个设置，但这是个人品味。

我的设置看起来像这样

```
/private
    /view
        -profile.php
        -search.php
    /libs
    -index.php
/public_html
    /css
    /images
    -index.php 
```

`public_html/index.php`如果它以纯文本形式传递，则只是传递给私有含义，除了您的文件存储在另一个目录中之外，它不提供任何信息。所有处理由`private/index.php`

```
<?php

    require_once('../private/index.php'); 
```

即使存在配置错误，我也从未发现此设置存在严重问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T05:52:27.640

关于文件夹结构，它与 MVC 或使用框架或其他任何东西无关。不在公共目录中的文件（理论上）不能被用户直接访问。MVC 框架选择该文件结构，因为它是一种很好的做法，这就是它们的目的，教育程序员了解良好的做法。

拒绝使用框架就是拒绝自学好的实践，因为最臭名昭著的框架通常是由经验丰富的程序员设计的。

i did not see your code but if you are allowing direct php file fetching based on the query parameters of the request then you are in trouble(from a security perspective). That's why frameworks implements a front controller-pattern,controllers and routers, to decouple php file hierarchy from the way url are requested.

# image - Windows Phone 8 应用程序中的图像源

> ID：15048913
> 
> 赞同：1
> 
> 时间：2013-02-24T05:13:56.640
> 
> 标签：image, user-controls, windows-phone-8

我正在创建一个用户控件，其中包含一个图像。该图像具有构建操作 = 内容。

```
<Image Source="/Assets/Images/Pic.png"/> 
```

上面的代码在用户控件中不起作用。当 Image 放置在 PhonePage 中时，相同的代码也能正常工作。有关如何解决它的任何指示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T05:17:56.830

我认为路径很难处理，特别是如果用户控件 XAML 与电话页面 XAML 不在同一目录中。您可能需要像这样遍历一下：`../Assets/Images/Pic.png`您也可以尝试将 Pic.png 移动到同一目录并将源设置为`Pic.png`

# java - 用 Eclipse 清理，但无法在终端中编译 Helloworld（错误：找不到或加载主类）

> ID：15048914
> 
> 赞同：1
> 
> 时间：2013-02-24T05:14:02.633
> 
> 标签：java, eclipse, compilation, terminal

我正在尝试在终端（Fedora）中编译我在 Eclipse 中编写的包。我需要将这些 .java 文件转换为我的作业教学，但是在我将它们编译到 .class 文件中之后，它们将无法使用 java DoThisDamnit.java 执行。

```
root@localhost mypackage# javac -cp . DoThisDamnit.java
root@localhost mypackage# ls
DoThisDamnit.class  DoThisDamnit.java
root@localhost mypackage# java DoThisDamnit.java
Error: Could not find or load main class DoThisDamnit.java 
```

我所做的如下：

*   创建了一个项目名称：我的项目
*   创建了一个包名：mypackage
*   创建了一个类文件：DoThisDamnit

在我清理文件后，它被导出到 /home/william/workspace/bin 或 src。当我去垃圾箱并输入

```
Java DoThisDamnit.class 
```

我收到错误*错误：无法找到或加载主类*

我有一种感觉，因为它有一个包，所以我没有正确运行它？

代码测试

```
package mypackage;

public class DoThisDamnit {
    public static void main(String[] args) {
        System.out.print("Doooo it");
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T05:24:51.320

你必须运行：

```
cd <your folder> ///home/william/workspace/bin
java mypackage.DoThisDamnit 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T05:18:59.327

当我遇到这个错误时，这是​​因为我的班级，在你的情况下 DoThis，没有 main 方法。

# c++ - 为什么通用参考的重载（使用 enable_if）不起作用？

> ID：15048917
> 
> 赞同：1
> 
> 时间：2013-02-24T05:15:14.117
> 
> 标签：c++, c++11, overloading, template-meta-programming

**使用 MS Visual C++ 2012 版本 11.0.51106.01 更新 1：**

```
int x()
{
   return 3;
}

template <typename Fun>
typename std::enable_if<std::is_same<Fun, int()>::value, int>::type 
MySh(Fun& f)
{ 
   return f();
}

template <typename Fun>
typename std::enable_if<std::is_same<Fun, int()>::value, int>::type 
MySh1(Fun&& f)
{ 
   return f();
}

template <typename Fun>
int MySh2(Fun&& f)
{ 
   return f();
} 
```

调用代码：

```
 int res = MySh(x); // compiles and returns 3
   res = MySh1(x); // doesn't compile with error: error C2893: Failed to specialize function template 'std::enable_if<std::is_same<Fun,int(void)>::value,int>::type MySh1(Fun &&)
   res = MySh2(x); // compiles and returns 3 
```

我还没有尝试使用其他编译器（还），但目的是让它与 Visual C++ 2012 一起使用和/或向 Microsoft 报告编译器错误。

我想确保我不会忽略一些微不足道的事情并犯下愚蠢的错误。当然，示例只是一个摘录，真正的预期用例更复杂并且与以下内容相关： [Overloading on callables question](https://stackoverflow.com/questions/14824681/overloading-on-callable-with-callable-parameter)

**编辑：** 我也对其他考虑感到困惑，例如：

```
 std::is_same<decltype(x), int()>::value; // true
   std::is_same<decltype(x), int(&)()>::value; //false 
```

和：

```
template <typename Fun>
typename std::enable_if<std::is_same<Fun, int(&)()>::value, int>::type 
MySh1(Fun&& f)
{ 
   std::cout << typeid(f).name() << std::endl;   // prints int __cdecl(void)
   return f();
} 
```

显然，我没有注意参数类型和参数类型之间的区别（Fun 与 f 和 x 相对）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T05:33:54.550

答案在错误中，将您的声明替换为

```
template <typename Fun>
typename std::enable_if<std::is_same<Fun, int(&)()>::value, int>::type 
    MySh1(Fun&& f)
{ 
    return f();
} 
```

发生这种情况是因为有模板案例的特殊处理标准`<typename T> void foo(T&&);`

如果您将一些参数传递给 foo，则以下内容成立（以 int 为例）：

*   通过`lvalue int`- `T`是`int&`
*   通过`lvalue const int`-`T`是`const int&`
*   通过`rvalue int`-`T`是`int`
*   通过`rvalue const int`-`T`是`const int`

Scott Meyers 的好[文章可能会更清楚地说明这一点。](http://isocpp.org/blog/2012/11/universal-references-in-c11-scott-meyers)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T06:21:35.150

`Fun`在那种情况下，A是 a`Fun&`或 a`Fun const&`或 a `Fun&&`—— `&&`make`Fun`绑定到上述 3 个引用中的任何一个（也许`Fun const&&`？不确定）。 `&&`表示类型推导上下文中的魔术引用。

您将其与 a`int()`而不是引用或 const 引用或 rvalue 引用进行了比较。

`std::decay`如果您不关心`cv`附加到什么和引用类型，我建议您使用`Fun`.

如在

```
template <typename Fun>
typename std::enable_if<std::is_same<typename std::decay<Fun>::type, int(*)()>::value, int>::type 
```

一个更好的选择可能是`is_convertible`

```
template <typename Fun>
typename std::enable_if<std::is_convertible<Fun, int(*)()>::value, int>::type 
```

这允许`[]()->int`lambdas 有资格成为一个可用的`Fun`. 但为什么要停在那里？

```
template <typename Fun>
typename std::enable_if<std::is_convertible<decltype(std::declval<Fun>()()), int>::value>::type 
```

接受任何类型`Fun`，使得 的实例`Fun`与`operator()`应用返回可转换为的类型`int`。

您甚至可以使用其中之一走得更远：

```
template <typename Fun>
auto MySh_Alpha(Fun&& f)->decltype( f() )
{ 
  return f();
}

template <typename Fun>
decltype( std::declval<Fun>()() ) MySh_Alpha2(Fun&& f)
{ 
  return f();
} 
```

它们是等效的，并表示返回与传入的`MySh_Alpha`任何内容相同的类型。`f`

# oop - OOP：创建一个对象来绘制图像

> ID：15048918
> 
> 赞同：0
> 
> 时间：2013-02-24T05:15:20.887
> 
> 标签：oop, draw, paint

我将使用 Java 构建一个绘图程序（类似于 MS Paint）。我已经能够使用 Swing lib 在 JFrame 上绘制基本形状，但它们是静态的，我无法对它们做任何事情。因此，我想让每个形状成为一个对象，它将存储我们需要操作的所有信息，例如调整大小、旋转、更改颜色、导出为 jpeg 图像等。

所以我正在考虑创建一个带有子类 Rectangle、Oval 等的 Image 类。每个子类都有一个 Points(x,y) 数组，以便我们可以操作每个点。所以如果我想擦除形状的一部分，我只需要删除某些点。移动形状将只是改变点的位置。这是计划，但我不知道这有多大可能。

在我深入编码之前，任何人都可以给我一些建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-02T23:58:32.447

如果调用该`repaint();`方法，则可以将 x 和 y 设置为先前放入数组中的整数。然后，一旦拖动选择的锚点以适应选择的 x 和 y，您就可以更改这些整数。但是话又说回来，您需要知道如何拖动对象。如果您添加了一个鼠标侦听器并检测 x 和 y 是否在您的锚点中（您可以`(the clicked x) > (anchor X) && (the clicked x < ((anchor X) + anchor width)`对 y 使用不等式和相同。然后当鼠标移动时，它会移动到鼠标 x 和鼠标 y。然后等到鼠标完成拖动并将选择的图像移动到存储的鼠标 x 和 y。中提琴！

# .net - WCF 和 .net 服务

> ID：15048921
> 
> 赞同：1
> 
> 时间：2013-02-24T05:15:35.867
> 
> 标签：.net, asp.net-mvc, wcf, web-services, .net-services

我有.net 服务。我想在托管在 MVC Web 应用程序中的网站服务中使用它。在 MVC 模式中做到这一点的最佳设计是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T05:48:31.943

解决方案最终取决于 1) 时间和 2) 安全性。如果你有足够的时间，你可以投资一个包装器 api，它可以让你设置访问外部 Web 服务方法的安全性。我假设您不想通过 javascript 代码直接访问外部服务。如果您需要诸如“用户刚刚要求记录 XYZ”之类的信息，那么您还可以将审核包装到您的包装 api 中。您可能还想在客户端调用一些 Web 服务方法。

如果它们是简单的调用，我会使用 ajax 来调用服务（通过你的控制器）。如果它们返回较大的结果，那么您可能需要直接在控件中调用 Web 服务并将数据推送到视图模型。

将 Web 服务结果转换为 json 的示例：

```
public ActionResult MarkEmployeeAsInactive() {
  // Check if user is allowed to make the change to this employee?
  // Check if session is valid if not using OAUTH etc
  var client= new MyWebServiceClient();
  var result = client.SetEmployeeInactive(443);
  return Json(result);
}

public ActionResult GetList() {
  // Check if user is allowed to make the get this list
  // Check if session is valid if not using OAUTH etc
  var client= new MyWebServiceClient();
  var result = client.GetListOfEmployees(23443);
  return Json(result); // Returns json List<Employee>
} 
```

`WebApi`如果您愿意，您可以将该操作结果转换为控制器，那么您实际上是`WebApi`在围绕您现有的 Web 服务进行包装（这当然是受公众保护的，并且仅称为服务器端）。

或者，您可以将 IEnumerable 结果从 Web 服务传回视图模型。或者只是`T`回到视图模型。

```
public ActionResult Employee()
{
      var client= new MyWebServiceClient();
      var employee = client.GetEmployeeRecord(33445);
      // perhaps employee has a property called FullName?
      // That will map to the model then
      return View(employee); // Passes Employee class to view
} 
```

有关其他信息，请查看这个类似的问题[ASP.NET MVC & Web Services](https://stackoverflow.com/questions/118931/asp-net-mvc-web-services)

# android - 如何使用 Jsoup 提取这些数据？

> ID：15048922
> 
> 赞同：0
> 
> 时间：2013-02-24T05:15:35.873
> 
> 标签：android, json, parsing, html-parsing, jsoup

从示例中，我想从以下 HTML 代码中获取**name1、name2、name3 和 name4 。**

```
<td width="200"><a>name1</a></td>
<td width="200">name2 </td>
<td width="200"><a>name3</a></td>
<td width="200">name4 </td> 
```

现在，如果您注意到**name1 和 name3**在标签**a**中，但是**name2 和 name4**在标签**td**中。我使用了两个单独的代码来获取名称，但效率低且速度慢。上面的 HTML 代码只是真实代码的一部分。

```
try {
                doc = Jsoup.connect("http://somesite.com").get();

                // Here to get the names inside tag a
                Elements links = doc.select("td a");
                for (Element el : links) {

                    linkText = el.ownText();

                    arr_linkText.add(linkText);
                    }

                //Here to get the names inside tag td
                Elements linktwo = doc.select("td");
                    for (Element eltwo : linktwo) {

                        linkText = eltwo.ownText();

                        arr_linkText.add(linkText);
                        }

            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } 
```

我的问题是**如何比这种方法更快地获取名称？**也许两者都有一个代码。

谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T13:22:23.160

只需打印`text`,

```
 Elements list = doc.select("td[width=200]");
    for(Element td: list) {
        System.out.println(td.text());
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T02:28:01.743

您可以将 ','（逗号）运算符用作“OR”，这就是您要在此处执行的操作。所以尝试做这样的事情：

```
try {
      doc = Jsoup.connect("http://somesite.com").get();

      Elements links = doc.select("td, td a");
      for (Element el : links) {
            arr_linkText.add(el.text());
      }
} catch (IOException e) {
      e.printStackTrace();
} 
```

# c++ - 如何使一个类成员函数在 C++ 中的另一个类成员函数上工作？

> ID：15048928
> 
> 赞同：-1
> 
> 时间：2013-02-24T05:16:51.427
> 
> 标签：c++, class, function

[我从这里](http://www.newgrounds.com/bbs/topic/1170375)得到了大部分代码，但我应该使用类。

我想做的是，如果我打电话`cube.moveTopc()`，我想让它继续工作`cube.display()`。`display()`将输出一个展开的魔方，然后`moveTopc()`移动魔方的顶部。

```
class Rubiks
{
public:

char Top[10];
char Bottom[10];
char Front[10];
char Left[10];
char Back[10];
char Right[10];        

void display() { 

    char topColor = 'B';
    char bottomColor = 'G';
    char frontColor = 'W';
    char backColor = 'Y';
    char leftColor = 'O';
    char rightColor = 'R';
    std::fill (Top, Top + 10, topColor);
    std::fill (Bottom, Bottom + 10, bottomColor);
    std::fill (Front, Front + 10, frontColor);
    std::fill (Back, Back + 10, backColor);
    std::fill (Left, Left + 10, leftColor);
    std::fill (Right, Right + 10, rightColor);   

std::cout<<"                                     "<<Top[0]<<Top[1]<<Top[2]<<"\n";
std::cout<<"                                     "<<Top[3]<<Top[4]<<Top[5] << "\n";
std::cout<< "                                     " << Top[6]<< Top[7] << Top[8]    <<"\n\n";

std::cout<<"                                 " << Left[0] << Left[1] << Left[2];
std::cout<< " " << Front[0] << Front[1] << Front[2];
std::cout<<" " << Right[0] << Right[1] << Right[2] << "\n";

std::cout<< "                                 " << Left[3] << Left[4] << Left[5];
std::cout<< " " <<Front[3] <<Front[4] << Front[5];
std::cout<< " " <<Right[3] << Right[4] <<Right[5]<< "\n";

std::cout<< "                                 " << Left[6] <<Left[7] << Left[8];
std::cout<< " " << Front[6] << Front[7] << Front[8];
std::cout<< " " << Right[6] << Right[7] << Right[8]<<"\n\n";

std::cout<< "                                     " << Bottom[0] << Bottom[1] << Bottom[2] << "\n";
std::cout<< "                                     " << Bottom[3] <<Bottom[4] << Bottom[5] << "\n";
std::cout<< "                                     " << Bottom[6] << Bottom[7] << Bottom[8] << "\n\n";

 std::cout<< "                                     " << Back[6] << Back[7] << Back[8] << "\n";
std::cout<< "                                     " <<Back[3] << Back[4] << Back[5] << "\n";
std::cout<< "                                     " <<Back[0] << Back[1] << Back[2] <<                 "\n\n";

 }

void moveTopc()
{  
 char cornerSave, sideSave;
 char spotSave0, spotSave1, spotSave2;     
     cornerSave = Top[0];
     Top[0] = Top[6];
     Top[6] = Top[8];
     Top[8] = Top[2];
     Top[2] = cornerSave;

     sideSave = Top[1];
     Top[1] = Top[3];
     Top[3] = Top[7];
     Top[7] = Top[5];
     Top[5] = sideSave;

     spotSave0 = Front[0];
     spotSave1 = Front[1];
     spotSave2 = Front[2];
     Front[0] = Right[0];
     Front[1] = Right[1];
     Front[2] = Right[2];
     Right[0] = Back[2];
     Right[1] = Back[1];
     Right[2] = Back[0];
     Back[2] = Left[0];
     Back[1] = Left[1];
     Back[0] = Left[2];
     Left[0] = spotSave0;
     Left[1] = spotSave1;
     Left[2] = spotSave2;
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T05:27:05.830

好的，我想我知道您正在尝试这样做。 **将立方体的初始化转移到显示构造函数：**

```
Rubiks::Rubiks()
{
char topColor = 'B';
    char bottomColor = 'G';
    char frontColor = 'W';
    char backColor = 'Y';
    char leftColor = 'O';
    char rightColor = 'R';
    std::fill (Top, Top + 10, topColor);
    std::fill (Bottom, Bottom + 10, bottomColor);
    std::fill (Front, Front + 10, frontColor);
    std::fill (Back, Back + 10, backColor);
    std::fill (Left, Left + 10, leftColor);
    std::fill (Right, Right + 10, rightColor); 
} 
```

之后您可以调用 display() 并且输出将如您所愿（*转换后立方体的状态*）

# drupal-7 - drupal中用户定义的表/视图

> ID：15048929
> 
> 赞同：0
> 
> 时间：2013-02-24T05:17:18.293
> 
> 标签：drupal-7, drupal-modules

我是 Drupal 的新手，想知道用户是否可以在 Drupal 数据库中创建自己的表并在用户定义的表和 Drupal 表之间创建连接？

换句话说，我的一般问题是，Drupal 的目的之一是否也是为了消除用户创建/设计任何表的需要，并且只使用 Drupal 中的模块来解决他们想要的问题？

这是我得到的问题的答案：

[http://drupal.org/node/1925616](http://drupal.org/node/1925616)

想知道更多的想法，并感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T10:29:15.083

对于问题 1：是的，您可以使用实体来执行此操作。有关更多信息，请参阅[本指南](http://www.istos.it/blog/drupal/drupal-entities-part-1-moving-beyond-nodes)。

对于问题 2：在大多数情况下，您不需要创建自己的表。您将通过使用 Drupals UI、为您可能拥有的不同用例创建内容类型和添加字段来完成大量工作。请参阅[http://drupal.org/node/21947](http://drupal.org/node/21947)。

# postgresql - 跨会话的 PostgreSQL 序列

> ID：15048930
> 
> 赞同：-1
> 
> 时间：2013-02-24T05:17:33.247
> 
> 标签：postgresql

如果两个客户端**同时**插入到具有唯一序列列的表中，一个客户端可以得到一个`unique_violation`？换句话说，两个客户端可以通过调用获得相同的结果`nextval()`吗？

我做了一个快速的谷歌搜索，但找不到任何东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T05:55:48.257

正如 PostgreSQL 序列文档中详细介绍的那样：

*   [`CREATE SEQUENCE`](http://www.postgresql.org/docs/current/static/sql-createsequence.html)
*   [序列操作函数](http://www.postgresql.org/docs/current/static/functions-sequence.html)

`nextval`即使在并发事务中，对同一序列的两次调用也不会返回相同的值。换句话说`nextval`，对同一序列的两次单独调用永远不会返回相同的值。这会导致一些其他异常，例如在事务回滚的位置出现的序列值中的“漏洞”，文档中再次对此进行了描述。

# android - 如何使用java代码在android中模拟触摸事件

> ID：15048933
> 
> 赞同：0
> 
> 时间：2013-02-24T05:18:02.107
> 
> 标签：android, touch-event

我正在尝试编写一个代码来模拟位置（x，y）的触摸事件。

要求：

我不想使用 Monkey Runner 工具，我只想在 Java 级别编写代码。

i/p 是位置 (x,y) 并且 o/p 应该是 (x,y) 处的触摸事件

我在stackoverflow和google上搜索了很多文章，没有找到好的

提前感谢您的帮助，

谢谢穆尔蒂

# c++ - 我的窗口在 OpenGL 中调整大小

> ID：15048934
> 
> 赞同：5
> 
> 时间：2013-02-24T05:18:04.687
> 
> 标签：c++, c, opengl, glut, glu

我想制作我的窗口大小（800,800），但是 GL 命令

```
glutInitWindowSize(800, 500); 
```

不会以任何方式影响我的代码。Bellow 是完整的源代码。

```
#include <stdio.h>
#include <stdlib.h>
#include <X11/X.h>
#include <X11/Xlib.h>
#include <GL/gl.h>
#include <GL/glx.h>
#include <GL/glu.h>
#include <GL/glut.h>
#include <iostream>
#include <math.h>
using namespace std;

struct point{

GLfloat x;
GLfloat y;

};

float a,b;

void initGL() {
   // Set "clearing" or background color
   glClearColor(0.0f, 0.0f, 0.0f, 1.0f); // Black and opaque
}

/* Handler for window-repaint event. Call back when the window first appears and
   whenever the window needs to be re-painted. */
void display() {
   glClear(GL_COLOR_BUFFER_BIT);   // Clear the color buffer with current clearing color
//  glutInitWindowSize(800, 800); 

float i;
float radians;
struct point graph[1000];
struct point graphC[1000];

for(i = 0.0; i < 1000.0; i++) {
  graph[(int)i].x = i/1000.0;
  graph[(int)i].y = sqrt(pow(i/100,3) + a*i/100.0 + b)/10.0;
  graphC[(int)i].x = i/1000;
  graphC[(int)i].y = -1*sqrt(pow(i/100,3) + a*i/100.0 + b)/10.0;
}

glBegin(GL_POINTS);

for(int j = 0; j < 1000; j ++){
    glColor3f(1.0f, 0.0f, 0.0f);
    glVertex2f(graph[j].x,graph[j].y);
    glColor3f(1.0f, 0.0f, 0.0f);
    glVertex2f(graphC[j].x,graphC[j].y);
}

glEnd();

for(i = 0.0; i > -1000.0; i--) {
  graph[-1*(int)i].x = i/1000.0;
  graph[-1*(int)i].y = sqrt(pow(i/100,3) + a*i/100.0 + b)/10.0;
  graphC[-1*(int)i].x = i/1000;
  graphC[-1*(int)i].y = -1*sqrt(pow(i/100,3) + a*i/100.0 + b)/10.0;
}

glBegin(GL_POINTS);

for(int j = 0; j < 1000; j ++){
    glColor3f(1.0f, 0.0f, 0.0f);
    glVertex2f(graph[j].x,graph[j].y);
        glColor3f(1.0f, 0.0f, 0.0f);
        glVertex2f(graphC[j].x,graphC[j].y);
    }

    glEnd();

   glFlush();  // Render now

}

/* Main function: GLUT runs as a console application starting at main()  */
int main(int argc, char** argv) {
cout<<"Please enter in a\n";
cin>>a;
cout<<"Please enter in b\n";
cin>>b;
   glutInit(&argc, argv);          // Initialize GLUT
   glutCreateWindow("Scientific Plot");  // Create window with the given title
   glutInitWindowSize(800, 500);   // Set the window's initial width & height
   glutInitWindowPosition(400, 400); // Position the window's initial top-left corner
   glutDisplayFunc(display);       // Register callback handler for window re-paint event
   initGL();                       // Our own OpenGL initialization
   glutMainLoop();                 // Enter the event-processing loop
   return 0;
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-24T06:01:15.253

类似的命令`glutInitWindowSize`需要在 before 调用`glutCreateWindow`，否则无效。创建窗口后，您可以通过调用来更改窗口的大小`glutReshapWindow`。

# c# - 两个参数的输出缓存，自定义和编码

> ID：15048940
> 
> 赞同：0
> 
> 时间：2013-02-24T05:19:15.793
> 
> 标签：c#, .net, caching, outputcache

有没有办法将 ASP.NET Outputcache 用于两者的页面：

1.  **VaryByContentEncoding** - 浏览器是否支持 gzip
2.  **通过自定义参数**，在我的情况下，我使用 HttpContext.Current.Request.UserLanguages 获得的国家/地区；并从我的函数返回的文化中获取 TwoLetterISORegionName。

对于某些国家/地区，我返回相同的页面但稍作修改，但我仍然希望将它们单独缓存，以便来自不同国家/地区的访问者看到不同的社交按钮。当然，是否支持 gzip 很重要，因为如果浏览器支持 gzip 压缩，我会使用 gzip 渲染 js 和 css 标签。

更新：我考虑过使用**varybycontrol**，并将国家 + gzip 状态（o 或 1）都放入一个字符串中并将它们写入一个隐藏字段，然后告诉 .net 进行 varybycontrol 并传递该隐藏字段控件的 ID。不过，我不确定这种方法。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T05:51:17.230

使用 VaryByCustom 进行缓存时，您可以访问整个 Request 对象，并且可以从那里获取标头并根据您的要求创建自己的缓存键。

```
public override string GetVaryByCustomString(HttpContext context, string arg)
{
  // Do something with Request.Headers["Accept-Encoding"] (like checking if gzip is preferred...)
  return "custom-encoding-key";
} 
```

# jquery - .ajax 在创建 201 时调用“失败”，但如果 async==false 则成功“完成”

> ID：15048942
> 
> 赞同：2
> 
> 时间：2013-02-24T05:19:34.593
> 
> 标签：jquery

使用 Jquery 1.9.1 我正在运行 $.ajax 调用，只有当我将“async”设置为 false 时才会成功。我查看了请求/响应，它们很好。我可以看到没有理由称“失败”。

我期望 .done() 即使在“异步”设置为 true 时也会被调用...我有一个正在通过的集成测试，因为它将异步设置为 false。从字面上看，这是唯一的区别。我确认这是问题所在，因为我在真实代码中强制异步为 false，它突然开始成功并调用 .done()。

我猜这是 json 解析错误或 jQuery 错误，但我该如何确认？我很难在 jquery 源代码中找到它...这是要重现的 jQuery 代码。服务器正在正确创建对象，一切看起来都很好。（从响应中可以看出）

```
 var newObj = { Name: 'jesus', Birthday: '02/12/2013' };
        return $.ajax(
        {
            url: '/api/method',
            type: 'POST',
            processData: false,
            contentType: 'application/json; charset=utf-8',
            data: JSON.stringify(newObj),
            dataType: 'json',
            async: true,
        })
        .done(function (data, statusText) {
            console.log(statusText);
        })
        .fail(function(jqXHR, textStatus, errorThrown) {
            console.error(jqXHR);
            console.error(textStatus);
            console.error(errorThrown);
        });

POST http://localhost:64838/api/method HTTP/1.1
Host: localhost:64838
Connection: keep-alive
Content-Length: 48
Accept: application/json, text/javascript, */*; q=0.01
Origin: http://localhost:64838
X-Requested-With: XMLHttpRequest
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.17 (KHTML, like Gecko)        Chrome/24.0.1312.57 Safari/537.17
Content-Type: application/json; charset=UTF-8
Referer: http://localhost:64838/
Accept-Encoding: gzip,deflate,sdch
Accept-Language: en-US,en;q=0.8
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3

 {"Name":"jesus","Birthday":"02/17/2013"}

HTTP/1.1 201 Created
Cache-Control: no-cache
Pragma: no-cache
Content-Type: application/json; charset=utf-8
Expires: -1
Location: http://localhost:64838/api/method/23
Server: Microsoft-IIS/8.0
X-AspNet-Version: 4.0.30319
X-Powered-By: ASP.NET
Access-Control-Allow-Headers: Content-Type
Access-Control-Allow-Origin: *
Date: Sun, 24 Feb 2013 05:07:27 GMT
Content-Length: 115

{"Id":23,"UserId":1,"Name":"jesus","someDate":"2013-02-17T00:00:00","someId":null,"someOtherProperty":null} 
```

PS 在上述输出中的每一行之前留 4 个空格非常烦人。有没有更简单的方法来格式化 SO 中的代码块？

谢谢你的帮助。

编辑：请不要深入阅读我发布的请求/响应。在将事物发布到 SO 上之前，我篡改了事物的名称。因此内容长度是错误的，也许还有其他一些东西......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T15:15:03.327

只是为了让其他人不要像我刚才那样浪费时间......

原因是因为我在表单上提交按钮的单击处理程序中执行 $.ajax，因此我必须首先执行 e.preventDefault()。

# c - QSort 做错了什么？

> ID：15048943
> 
> 赞同：-1
> 
> 时间：2013-02-24T05:20:18.430
> 
> 标签：c

我正在尝试使用 qsort 对几个不同的整数数组进行排序，但它似乎没有执行排序。这是我的比较器函数，一个用于向前排序，一个用于向后排序：

```
int comp(const void *elem1, const void *elem2){
    int x = *(int*)elem1;
    int y = *(int*)elem2;
    if(x > y) return 1;
    if (x < y ) return -1;
    return 0;
}

int compReverse(const void *elem1, const void *elem2) {
    int x = *(int*)elem1;
    int y = *(int*)elem2;
    if (x > y) return -1;
    if (x < y) return 1;
    return 0;
} 
```

这是我称之为 qsort 的地方。要排序的项目是 malloc'ed int *s。NELEMS 是一个#define，它将数组的总字节大小除以 int 的大小来获得数组长度。

```
qsort(ascendingOrderArray, NELEMS(ascendingOrderArray),
            sizeof(*ascendingOrderArray),comp);
    qsort(descendingOrderArray, NELEMS(descendingOrderArray),
            sizeof(*descendingOrderArray), compReverse); 
```

当我遍历新数组时，它们不是我期望的顺序。事实上，除了第一个数字的位置之外，它们根本没有顺序，并且与未排序的数组无法区分。这是怎么回事？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T06:00:10.640

你说这`ascendingOrderArray`是通过分配`malloc()`的，所以定义必须是：

```
int *ascendingOrderArray; 
```

但是然后您说`NELEMS()`定义了将数组的大小除以 int 的大小，所以我假设定义大致如下：

```
#define NELEMS(x) (sizeof(x) / sizeof(int)) 
```

如果是这种情况，那么代码并没有按照您认为的那样做。这里，`sizeof(ascendingOrderArray)`是*指针*的大小，以字符为单位 [1] （在 32 位系统上，该值很可能是 4；在 64 位系统上，为 8）。然后将它除以整数的大小（32 位系统很可能是 4；64 位系统可能是 4，也可能是 8——这取决于编译器）。如果返回 1 的值，我不会感到惊讶`NELEMS()`，这并没有提供`qsort()`很多工作。

你需要做的是这样的调用`qsort()`：

```
qsort(ascendingOrderArray,itemsInArray,sizeof(int),comp); 
```

其中`itemsInArray`是分配数组中元素数量的单独计数。

[1] 在 C 中，`sizeof()`返回类型相对于 char 大小的大小；`sizeof(char)`根据定义为 1。在大多数现代系统上，这也是一个字节，但不一定是。

# html - 右对齐页眉和页脚 div 中的按钮/内容

> ID：15048947
> 
> 赞同：1
> 
> 时间：2013-02-24T05:22:08.157
> 
> 标签：html, css, stylesheet

我正在尝试在页眉和页脚上对齐一些按钮。但目前它们只是有点右对齐。代码在这里：http: [//jsfiddle.net/fXzX2/](http://jsfiddle.net/fXzX2/)你可以在这里看到“演示”：dev.chatterr.com。

Idk 如果我应该使用类似的东西：

```
 width: 1352px; 
```

或者：

```
 float: right; 
```

或者是什么。你认为我应该怎么做才能解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T05:30:34.837

```
div.nav {
    display: table-cell;
    vertical-align: middle;
} 
```

将其更改为

```
div.nav {
    display: table-cell;
    float: right;
    vertical-align: middle;
} 
```

在你的 CSS

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T07:47:17.250

您究竟愿意如何调整它们？

1.  左对齐？
2.  居中对齐？

你应该清楚:)

看，您必须根据元素本身以及之前和之后的其他元素的样式来选择 css 对齐方法。

您可以使用以下样式来做到这一点：

*   利润
*   垂直对齐
*   线高
*   文本对齐
*   漂浮

... ETC。

我认为您应该阅读这些对任何 Web 开发人员或设计师都有用的文章。

[http://www.vanseodesign.com/css/vertical-centering/](http://www.vanseodesign.com/css/vertical-centering/)

无论如何，给出一个 float:right 和 clear:both 可以解决你的导航对齐问题。
关于像这里这样的垂直对齐，告诉别人你想要什么或尝试做什么会有点令人困惑。首先在 Adob​​e Photoshop 中设计您的主题或网站，然后在此处显示需要的任何地方，这是一个很好的做法。

检查你的jsfiddle。

# ios - 在 ios uitableview 中间歇性地获取 json 提要失败

> ID：15048955
> 
> 赞同：2
> 
> 时间：2013-02-24T05:23:35.110
> 
> 标签：ios, objective-c, uitableview, ios5, flickr

我正在构建一个简单的 ios 应用程序，它试图显示来自 flickr 的图像序列。问题是它有时有效，有时失败，我不确定哪里出错了。应用程序具有主详细信息视图。当前未使用 Detailview，问题发生在主视图本身。我在 masterview 上设置了一个刷新按钮，并在用户尝试刷新时尝试重新获取数据。

github：[https ://github.com/kiranjulapalli/flickrexcercise](https://github.com/kiranjulapalli/flickrexcercise)

欣赏任何见解。

这是错误：

```
[MasterViewController connectionDidFinishLoading:] JSON error: The operation couldn’t be completed. (Cocoa error 3840.) 
```

这是代码：

```
Header MasterViewController.h:
#import <UIKit/UIKit.h>
@interface MasterViewController : UITableViewController

@property (strong, nonatomic) NSMutableData* receivedData;
@property (strong, nonatomic) NSURLConnection *connection;
@property (strong, nonatomic) NSMutableArray* items;

@end 
```

执行：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    UIBarButtonItem *addButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemRefresh target:self action:@selector(fetchFlickrData)];
    self.navigationItem.rightBarButtonItem = addButton;
    [self fetchFlickrData];
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView
 numberOfRowsInSection:(NSInteger)section
{
    if ( items != nil )
    {
        return items.count;
    }
    else
    {
        return 0;
    }
}

- (UITableViewCell *)tableView:(UITableView *)tableView
         cellForRowAtIndexPath:(NSIndexPath *)indexPath
{    
    static NSString *CellIdentifier = @"previewCell";

    previewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil)
    {
        NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"previewCell" owner:self options:nil];
        cell = [nib objectAtIndex:0];
        cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
    }
    NSDictionary* item = [items objectAtIndex:[indexPath row]];

    NSString* url = [[item objectForKey:@"media"] objectForKey:@"m"];

    [cell.photo setImageWithURL:[NSURL URLWithString:url]
                   placeholderImage:[UIImage imageNamed:@"thumbnail.jpg"]];
    return cell;
} 
```

//获取数据

```
-(bool)fetchFlickrData {
    // build the url for fetching json data
    NSString* url = [NSString stringWithFormat:@"%@", FLICKR_PUBLIC_API_URI];

    // Escape the characters in the URL
    url = [url stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];

    // Create the request.
    NSURLRequest *theRequest=[NSURLRequest requestWithURL:[NSURL URLWithString:url]
                                              cachePolicy:NSURLRequestUseProtocolCachePolicy
                                          timeoutInterval:20.0];

    connection=[[NSURLConnection alloc] initWithRequest:theRequest delegate:self];

    if (connection)
    {
        self.receivedData = [[NSMutableData alloc]init];
    }
    else
    { // Failed connection
        return false;
    }

    return true;
}

- (void)connection:(NSURLConnection *)connection
didReceiveResponse:(NSURLResponse *)response
{
    [self.receivedData setLength:0];
}

- (void)connection:(NSURLConnection *)connection
    didReceiveData:(NSData *)data
{
    [self.receivedData appendData:data];
}

- (void)connection:(NSURLConnection *)connection
  didFailWithError:(NSError *)error
{
    receivedData = nil;
    NSLog(@"Connection failed! Error - %@ %@",
          [error localizedDescription],
          [[error userInfo] objectForKey:NSURLErrorFailingURLStringErrorKey]);
} 
```

--

```
- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    // do something with the data
    // receivedData is declared as a method instance elsewhere
    NSLog(@"Succeeded! Received %d bytes of data",[self.receivedData length]);

    NSString* stringcontents = [[NSString alloc] initWithData:self.receivedData encoding:NSUTF8StringEncoding];

    NSData *jsonData = [stringcontents dataUsingEncoding:NSUTF8StringEncoding];

    NSError *error = nil;

    NSDictionary *tempresults = jsonData ? [NSJSONSerialization JSONObjectWithData:jsonData options:0 error:&error] : nil;

    if (error) { 
```

// *代码从上面继续：//这里是我看到错误的地方，并且大部分时间都发生了//日志表明数据正常

```
 NSLog(@"[%@ %@] JSON error: %@", NSStringFromClass([self class]), NSStringFromSelector(_cmd), error.localizedDescription);
        NSLog(@"%@", stringcontents);
    }

    if ( !error )
    {

        NSDictionary* tempitems = [tempresults objectForKey:@"items" ];

        if ( !items )
        { // Allocate the mutable array if not already allocated
            items = [[NSMutableArray alloc]init];
        }
        else
        {
            [items removeAllObjects];
        }

        for (NSDictionary* item in tempitems)
        {
            [items addObject:item];
        }
        [self.tableView reloadData];
    }
    else
    {
        //Alert error
    }

    self.connection =nil;
} 
```

抛出错误时的内容：

```
{
        "title": "Uploads from everyone",
        "link": "http://www.flickr.com/photos/",
        "description": "",
        "modified": "2013-02-24T05:49:14Z",
        "generator": "http://www.flickr.com/",
        "items": [
       {
            "title": "P1610143",
            "link": "http://www.flickr.com/photos/jungandyu/8501768895/",
            "media": {"m":"http://farm9.staticflickr.com/8094/8501768895_2e05d3d266_m.jpg"},
            "date_taken": "2013-02-16T12:20:10-08:00",
            "description": " <p><a href=\"http://www.flickr.com/people/jungandyu/\">Bighead City<\/a> posted a photo:<\/p> <p><a href=\"http://www.flickr.com/photos/jungandyu/8501768895/\" title=\"P1610143\"><img src=\"http://farm9.staticflickr.com/8094/8501768895_2e05d3d266_m.jpg\" width=\"240\" height=\"180\" alt=\"P1610143\" /><\/a><\/p> ",
            "published": "2013-02-24T05:49:14Z",
            "author": "nobody@flickr.com (Bighead City)",
            "author_id": "19809616@N08",
            "tags": ""
       },
       {
            "title": "20121231-DSC08686.jpg",
            "link": "http://www.flickr.com/photos/wasicat/8501768957/",
            "media": {"m":"http://farm9.staticflickr.com/8385/8501768957_23f8a2fdcc_m.jpg"},
            "date_taken": "2012-12-31T12:52:35-08:00",
            "description": " <p><a href=\"http://www.flickr.com/people/wasicat/\">William0912<\/a> posted a photo:<\/p> <p><a href=\"http://www.flickr.com/photos/wasicat/8501768957/\" title=\"20121231-DSC08686.jpg\"><img src=\"http://farm9.staticflickr.com/8385/8501768957_23f8a2fdcc_m.jpg\" width=\"240\" height=\"180\" alt=\"20121231-DSC08686.jpg\" /><\/a><\/p> <p>201301015鎮西堡跨年&lt;br /> 明新登山社&lt;\/p>",
            "published": "2013-02-24T05:49:16Z",
            "author": "nobody@flickr.com (William0912)",
            "author_id": "81613772@N00",
            "tags": "鎮西堡 friendlyflickr 201301015鎮西堡跨年 明新登山社"
       },
       {
            "title": "IMAG0710",
            "link": "http://www.flickr.com/photos/84380329@N08/8501769085/",
            "media": {"m":"http://farm9.staticflickr.com/8231/8501769085_1433e589fe_m.jpg"},
            "date_taken": "2012-10-27T22:30:28-08:00",
            "description": " <p><a href=\"http://www.flickr.com/people/84380329@N08/\">bmota2007<\/a> posted a photo:<\/p> <p><a href=\"http://www.flickr.com/photos/84380329@N08/8501769085/\" title=\"IMAG0710\"><img src=\"http://farm9.staticflickr.com/8231/8501769085_1433e589fe_m.jpg\" width=\"135\" height=\"240\" alt=\"IMAG0710\" /><\/a><\/p> ",
            "published": "2013-02-24T05:49:20Z",
            "author": "nobody@flickr.com (bmota2007)",
            "author_id": "84380329@N08",
            "tags": ""
       },
       {
            "title": "IMAG0157.jpg",
            "link": "http://www.flickr.com/photos/58459890@N08/8501769129/",
            "media": {"m":"http://farm9.staticflickr.com/8532/8501769129_8becb3ccae_m.jpg"},
            "date_taken": "2012-09-08T23:55:12-08:00",
            "description": " <p><a href=\"http://www.flickr.com/people/58459890@N08/\">k7801101<\/a> posted a photo:<\/p> <p><a href=\"http://www.flickr.com/photos/58459890@N08/8501769129/\" title=\"IMAG0157.jpg\"><img src=\"http://farm9.staticflickr.com/8532/8501769129_8becb3ccae_m.jpg\" width=\"160\" height=\"240\" alt=\"IMAG0157.jpg\" /><\/a><\/p> ",
            "published": "2013-02-24T05:49:22Z",
            "author": "nobody@flickr.com (k7801101)",
            "author_id": "58459890@N08",
            "tags": ""
       },
       {
            "title": "The Press - Work at Rockville Metro Plaza I",
            "link": "http://www.flickr.com/photos/nakevanc/8501769159/",
            "media": {"m":"http://farm9.staticflickr.com/8234/8501769159_c68af16b82_m.jpg"},
            "date_taken": "2013-02-24T00:45:53-08:00",
            "description": " <p><a href=\"http://www.flickr.com/people/nakevanc/\">Nakeva<\/a> posted a photo:<\/p> <p><a href=\"http://www.flickr.com/photos/nakevanc/8501769159/\" title=\"The Press - Work at Rockville Metro Plaza I\"><img src=\"http://farm9.staticflickr.com/8234/8501769159_c68af16b82_m.jpg\" width=\"240\" height=\"180\" alt=\"The Press - Work at Rockville Metro Plaza I\" /><\/a><\/p> ",
            "published": "2013-02-24T05:49:22Z",
            "author": "nobody@flickr.com (Nakeva)",
            "author_id": "28116601@N02",
            "tags": ""
       },
       {
            "title": "BHS BBall Region Quarterfinals_1077.JPG",
            "link": "http://www.flickr.com/photos/kbaumann/8501769163/",
            "media": {"m":"http://farm9.staticflickr.com/8231/8501769163_3e54304c40_m.jpg"},
            "date_taken": "2013-02-23T18:32:15-08:00",
            "description": " <p><a href=\"http://www.flickr.com/people/kbaumann/\">kjbaumann<\/a> posted a photo:<\/p> <p><a href=\"http://www.flickr.com/photos/kbaumann/8501769163/\" title=\"BHS BBall Region Quarterfinals_1077.JPG\"><img src=\"http://farm9.staticflickr.com/8231/8501769163_3e54304c40_m.jpg\" width=\"159\" height=\"240\" alt=\"BHS BBall Region Quarterfinals_1077.JPG\" /><\/a><\/p> ",
            "published": "2013-02-24T05:49:22Z",
            "author": "nobody@flickr.com (kjbaumann)",
            "author_id": "33453969@N04",
            "tags": ""
       },
       {
            "title": "DSC_1458",
            "link": "http://www.flickr.com/photos/eddilui/8501769217/",
            "media": {"m":"http://farm9.staticflickr.com/8099/8501769217_43f83ea28b_m.jpg"},
            "date_taken": "2013-01-09T23:43:06-08:00",
            "description": " <p><a href=\"http://www.flickr.com/people/eddilui/\">Eddi Lui<\/a> posted a photo:<\/p> <p><a href=\"http://www.flickr.com/photos/eddilui/8501769217/\" title=\"DSC_1458\"><img src=\"http://farm9.staticflickr.com/8099/8501769217_43f83ea28b_m.jpg\" width=\"240\" height=\"160\" alt=\"DSC_1458\" /><\/a><\/p> ",
            "published": "2013-02-24T05:49:24Z",
            "author": "nobody@flickr.com (Eddi Lui)",
            "author_id": "68014013@N08",
            "tags": ""
       },
       {
            "title": "DSC_0112",
            "link": "http://www.flickr.com/photos/pjkdmd/8501769273/",
            "media": {"m":"http://farm9.staticflickr.com/8233/8501769273_63a9bb7206_m.jpg"},
            "date_taken": "2013-02-23T22:00:09-08:00",
            "description": " <p><a href=\"http://www.flickr.com/people/pjkdmd/\">pjkdmd<\/a> posted a photo:<\/p> <p><a href=\"http://www.flickr.com/photos/pjkdmd/8501769273/\" title=\"DSC_0112\"><img src=\"http://farm9.staticflickr.com/8233/8501769273_63a9bb7206_m.jpg\" width=\"240\" height=\"159\" alt=\"DSC_0112\" /><\/a><\/p> ",
            "published": "2013-02-24T05:49:25Z",
            "author": "nobody@flickr.com (pjkdmd)",
            "author_id": "81759199@N08",
            "tags": ""
       },
       {
            "title": "8499469359_a854f58ba3_z",
            "link": "http://www.flickr.com/photos/ury94/8501769293/",
            "media": {"m":"http://farm9.staticflickr.com/8093/8501769293_f19a12de4f_m.jpg"},
            "date_taken": "2013-02-24T06:49:26-08:00",
            "description": " <p><a href=\"http://www.flickr.com/people/ury94/\">Hồng Anh ®<\/a> posted a photo:<\/p> <p><a href=\"http://www.flickr.com/photos/ury94/8501769293/\" title=\"8499469359_a854f58ba3_z\"><img src=\"http://farm9.staticflickr.com/8093/8501769293_f19a12de4f_m.jpg\" width=\"160\" height=\"240\" alt=\"8499469359_a854f58ba3_z\" /><\/a><\/p> ",
            "published": "2013-02-24T05:49:26Z",
            "author": "nobody@flickr.com (Hồng Anh ®)",
            "author_id": "39951352@N03",
            "tags": ""
       },
       {
            "title": "Punggol End",
            "link": "http://www.flickr.com/photos/eideticme/8502873874/",
            "media": {"m":"http://farm9.staticflickr.com/8242/8502873874_790c93ed5b_m.jpg"},
            "date_taken": "2012-05-26T23:29:17-08:00",
            "description": " <p><a href=\"http://www.flickr.com/people/eideticme/\">eidetic.me<\/a> posted a photo:<\/p> <p><a href=\"http://www.flickr.com/photos/eideticme/8502873874/\" title=\"Punggol End\"><img src=\"http://farm9.staticflickr.com/8242/8502873874_790c93ed5b_m.jpg\" width=\"240\" height=\"160\" alt=\"Punggol End\" /><\/a><\/p> ",
            "published": "2013-02-24T05:49:14Z",
            "author": "nobody@flickr.com (eidetic.me)",
            "author_id": "76188829@N02",
            "tags": ""
       },
       {
            "title": "IMG_0597",
            "link": "http://www.flickr.com/photos/mediaocu/8502873916/",
            "media": {"m":"http://farm9.staticflickr.com/8381/8502873916_a9cb6e726a_m.jpg"},
            "date_taken": "2013-02-23T04:39:39-08:00",
            "description": " <p><a href=\"http://www.flickr.com/people/mediaocu/\">MediaOCU<\/a> posted a photo:<\/p> <p><a href=\"http://www.flickr.com/photos/mediaocu/8502873916/\" title=\"IMG_0597\"><img src=\"http://farm9.staticflickr.com/8381/8502873916_a9cb6e726a_m.jpg\" width=\"240\" height=\"160\" alt=\"IMG_0597\" /><\/a><\/p> <p>The OCU spirit squad performed at a spirit competition in the Henry J Freede activity and wellness center on Saturday afternoon.<br /> <br /> The Campus/Michael Horn<\/p>",
            "published": "2013-02-24T05:49:16Z",
            "author": "nobody@flickr.com (MediaOCU)",
            "author_id": "86702597@N04",
            "tags": ""
       },
       {
            "title": "Squaw Valley ski trip",
            "link": "http://www.flickr.com/photos/hallucinant/8502873920/",
            "media": {"m":"http://farm9.staticflickr.com/8391/8502873920_e207276293_m.jpg"},
            "date_taken": "2013-02-22T10:30:59-08:00",
            "description": " <p><a href=\"http://www.flickr.com/people/hallucinant/\">hallucinant<\/a> posted a photo:<\/p> <p><a href=\"http://www.flickr.com/photos/hallucinant/8502873920/\" title=\"Squaw Valley ski trip\"><img src=\"http://farm9.staticflickr.com/8391/8502873920_e207276293_m.jpg\" width=\"240\" height=\"160\" alt=\"Squaw Valley ski trip\" /><\/a><\/p> ",
            "published": "2013-02-24T05:49:16Z",
            "author": "nobody@flickr.com (hallucinant)",
            "author_id": "62641951@N00",
            "tags": ""
       },
       {
            "title": "053/365",
            "link": "http://www.flickr.com/photos/originalrocker/8502873948/",
            "media": {"m":"http://farm9.staticflickr.com/8385/8502873948_06c8800be5_m.jpg"},
            "date_taken": "2013-02-22T19:37:35-08:00",
            "description": " <p><a href=\"http://www.flickr.com/people/originalrocker/\">originalrocker<\/a> posted a photo:<\/p> <p><a href=\"http://www.flickr.com/photos/originalrocker/8502873948/\" title=\"053/365\"><img src=\"http://farm9.staticflickr.com/8385/8502873948_06c8800be5_m.jpg\" width=\"240\" height=\"180\" alt=\"053/365\" /><\/a><\/p> <p>worst feeling ever: when your little one is feeling bad with a high fever, and you can only do so much. :(<\/p>",
            "published": "2013-02-24T05:49:17Z",
            "author": "nobody@flickr.com (originalrocker)",
            "author_id": "49882128@N00",
            "tags": "max project day ruben tracy 365 homies guzman maximiliano 2013 365dayproject uploaded:by=flickrmobile flickriosapp:filter=nofilter"
       },
       {
            "title": "Oh qu\'il est haut, le pont du Bono...",
            "link": "http://www.flickr.com/photos/dyc56/8502873962/",
            "media": {"m":"http://farm9.staticflickr.com/8239/8502873962_a1851d4140_m.jpg"},
            "date_taken": "2013-01-13T16:24:20-08:00",
            "description": " <p><a href=\"http://www.flickr.com/people/dyc56/\">DYC56<\/a> posted a photo:<\/p> <p><a href=\"http://www.flickr.com/photos/dyc56/8502873962/\" title=\"Oh qu\'il est haut, le pont du Bono...\"><img src=\"http://farm9.staticflickr.com/8239/8502873962_a1851d4140_m.jpg\" width=\"240\" height=\"204\" alt=\"Oh qu\'il est haut, le pont du Bono...\" /><\/a><\/p> ",
            "published": "2013-02-24T05:49:17Z",
            "author": "nobody@flickr.com (DYC56)",
            "author_id": "76919092@N08",
            "tags": "bridge france art soleil eau lumière pierre bretagne breizh pont bateau morbihan soe hdr bois nikond700 ahhhlafrance nikonpassion pixeliste nikkor1424mmf28g bretagnesanspareil mordusdephotos bouboun56"
       },
       {
            "title": "Playing a rehearsal tomorrow and the lead sheets will be only on my iPad. Lets see how this goes!",
            "link": "http://www.flickr.com/photos/jasondegenhardt/8502874026/",
            "media": {"m":"http://farm9.staticflickr.com/8245/8502874026_c39b545160_m.jpg"},
            "date_taken": "2013-02-23T23:49:19-08:00",
            "description": " <p><a href=\"http://www.flickr.com/people/jasondegenhardt/\">jasondeg<\/a> posted a photo:<\/p> <p><a href=\"http://www.flickr.com/photos/jasondegenhardt/8502874026/\" title=\"Playing a rehearsal tomorrow and the lead sheets will be only on my iPad. Lets see how this goes!\"><img src=\"http://farm9.staticflickr.com/8245/8502874026_c39b545160_m.jpg\" width=\"240\" height=\"240\" alt=\"Playing a rehearsal tomorrow and the lead sheets will be only on my iPad. Lets see how this goes!\" /><\/a><\/p> ",
            "published": "2013-02-24T05:49:19Z",
            "author": "nobody@flickr.com (jasondeg)",
            "author_id": "40834611@N06",
            "tags": "square squareformat iphoneography instagramapp uploaded:by=instagram foursquare:venue=50daa303e4b019a9f2725785"
       },
       {
            "title": "IMG_0588",
            "link": "http://www.flickr.com/photos/hmclin/8502874044/",
            "media": {"m":"http://farm9.staticflickr.com/8383/8502874044_7caebe46c5_m.jpg"},
            "date_taken": "2013-02-23T18:01:42-08:00",
            "description": " <p><a href=\"http://www.flickr.com/people/hmclin/\">Henry McLin<\/a> posted a photo:<\/p> <p><a href=\"http://www.flickr.com/photos/hmclin/8502874044/\" title=\"IMG_0588\"><img src=\"http://farm9.staticflickr.com/8383/8502874044_7caebe46c5_m.jpg\" width=\"240\" height=\"160\" alt=\"IMG_0588\" /><\/a><\/p> ",
            "published": "2013-02-24T05:49:20Z",
            "author": "nobody@flickr.com (Henry McLin)",
            "author_id": "95014738@N00",
            "tags": ""
       },
       {
            "title": "",
            "link": "http://www.flickr.com/photos/n28307/8502874096/",
            "media": {"m":"http://farm9.staticflickr.com/8228/8502874096_2494bd2d14_m.jpg"},
            "date_taken": "2013-02-23T09:29:12-08:00",
            "description": " <p><a href=\"http://www.flickr.com/people/n28307/\">beltz6<\/a> posted a photo:<\/p> <p><a href=\"http://www.flickr.com/photos/n28307/8502874096/\" title=\"\"><img src=\"http://farm9.staticflickr.com/8228/8502874096_2494bd2d14_m.jpg\" width=\"240\" height=\"160\" alt=\"\" /><\/a><\/p> ",
            "published": "2013-02-24T05:49:21Z",
            "author": "nobody@flickr.com (beltz6)",
            "author_id": "23089307@N02",
            "tags": "mesa ucsb universityofcalifornia afsdxvrzoomnikkor18200mmf3556gifedii"
       },
       {
            "title": "bristow_party_124",
            "link": "http://www.flickr.com/photos/amyherndonphotography/8502874102/",
            "media": {"m":"http://farm9.staticflickr.com/8236/8502874102_7192f5c6f0_m.jpg"},
            "date_taken": "2013-02-17T00:16:46-08:00",
            "description": " <p><a href=\"http://www.flickr.com/people/amyherndonphotography/\">amy herndon<\/a> posted a photo:<\/p> <p><a href=\"http://www.flickr.com/photos/amyherndonphotography/8502874102/\" title=\"bristow_party_124\"><img src=\"http://farm9.staticflickr.com/8236/8502874102_7192f5c6f0_m.jpg\" width=\"180\" height=\"240\" alt=\"bristow_party_124\" /><\/a><\/p> ",
            "published": "2013-02-24T05:49:22Z",
            "author": "nobody@flickr.com (amy herndon)",
            "author_id": "62464749@N08",
            "tags": ""
       },
       {
            "title": "100_1764",
            "link": "http://www.flickr.com/photos/lelikadgi/8502874124/",
            "media": {"m":"http://farm9.staticflickr.com/8237/8502874124_9a7a7f356e_m.jpg"},
            "date_taken": "2005-08-17T12:46:26-08:00",
            "description": " <p><a href=\"http://www.flickr.com/people/lelikadgi/\">lelikadgi<\/a> posted a photo:<\/p> <p><a href=\"http://www.flickr.com/photos/lelikadgi/8502874124/\" title=\"100_1764\"><img src=\"http://farm9.staticflickr.com/8237/8502874124_9a7a7f356e_m.jpg\" width=\"180\" height=\"240\" alt=\"100_1764\" /><\/a><\/p> ",
            "published": "2013-02-24T05:49:22Z",
            "author": "nobody@flickr.com (lelikadgi)",
            "author_id": "77157992@N04",
            "tags": ""
       },
       {
            "title": "@eliseebrown",
            "link": "http://www.flickr.com/photos/jj_delrosario/8502874178/",
            "media": {"m":"http://farm9.staticflickr.com/8376/8502874178_5c32893a8e_m.jpg"},
            "date_taken": "2013-02-24T00:49:24-08:00",
            "description": " <p><a href=\"http://www.flickr.com/people/jj_delrosario/\">jj_delrosario<\/a> posted a photo:<\/p> <p><a href=\"http://www.flickr.com/photos/jj_delrosario/8502874178/\" title=\"@eliseebrown\"><img src=\"http://farm9.staticflickr.com/8376/8502874178_5c32893a8e_m.jpg\" width=\"240\" height=\"240\" alt=\"@eliseebrown\" /><\/a><\/p> ",
            "published": "2013-02-24T05:49:24Z",
            "author": "nobody@flickr.com (jj_delrosario)",
            "author_id": "57743051@N03",
            "tags": "square squareformat iphoneography instagramapp uploaded:by=instagram foursquare:venue=4b7e974ef964a5203df42fe3"
       }
        ]
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T05:38:12.617

用于`NSLog(@"%@", [error debugDescription]);`进一步调试问题。

# javascript - 在 Google 地图中按类别对标记进行分组

> ID：15048956
> 
> 赞同：1
> 
> 时间：2013-02-24T05:23:51.880
> 
> 标签：javascript, google-maps-api-3

我知道这个问题之前已经被问过，并且我已经查看了其他 Stack Overflow 示例和其他地方，但是查看这段代码太久了，我仍然很难过。

在这个[小提琴](http://jsfiddle.net/bato/6s9cM/)中，我有许多类别中的两个的标记。我尝试设置一个类别功能`displayMarkers`来过滤和打开和关闭每个类别的标记。

我没有运气就从[这些](https://stackoverflow.com/questions/3219437/google-maps-marker-grouping) [例子中抄袭。](https://stackoverflow.com/questions/13533110/undefined-javascript-function)

当我尝试调用`displayMarkers`函数并传递 a`parameter (albacore218)`时，我得到`ReferenceError: albacore218 is not defined`.

数据采用 JSON 格式，可以很好地填充标记信息窗口中的数据。我不明白为什么 JSON 会在信息窗口中工作，但是当我尝试使用类别函数访问数据时，我没有成功。

请让我知道我缺少什么或不理解什么。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T05:34:05.407

您必须将字符串`albacore218`（以及`amberjack219`）括在单引号之间。否则它们将被视为变量。

```
<input type="button" value="Albacore" onclick="displayMarkers('albacore218');">
<input type="button" value="Amberjack" onclick="displayMarkers('amberjack219');"> 
```

# git - 将 github diff 更改为并排比较？

> ID：15048958
> 
> 赞同：46
> 
> 时间：2013-02-24T05:23:55.430
> 
> 标签：git, github

对于 github 网页浏览，它不像许多 diff 工具那样并排显示。我可以将差异模式更改为并排吗？我的意思是在 github 网站上。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2014-09-04T05:20:14.510

是的，自 2014 年 9 月 3 日起就有可能：请参阅“[**引入拆分差异**](https://github.com/blog/1884-introducing-split-diffs)”：

![https://cloud.githubusercontent.com/assets/98681/4139311/699ef6da-3399-11e4-8d8e-cf0a9e902867.gif](../Images/ddfb132ab4989cfdf3d1a456295de2d5.png)

> 差异现在有两种风格，统一和分裂。
> 使用页面右上角的切换按钮在拉取请求、提交和比较页面之间切换。您上次使用的模式将成为您的首选默认模式。

* * *

注意：自 2014 年 9 月 4 日起，它还支持**word diff highlight**。
请参阅“ [Github 是否有显示文件版本之间差异的视图？](https://stackoverflow.com/a/25723584/6309) ”。

* * *

自 2014 年和 2020 年引入深色主题（！）以来，UI 现在是：

*   来自统一：

[![统一](../Images/9e1d95d97747d3887aecccfd5aab45a8.png)](https://i.stack.imgur.com/tu1cT.png)

*   要拆分差异：

[![分裂差异](../Images/9ccd16aceff11d1c324dada63379405c.png)](https://i.stack.imgur.com/liadW.png)

使用：[![在此处输入图像描述](../Images/6589ae47b8c3596897f35aa191f6879c.png)](https://i.stack.imgur.com/qY2oJ.png)

注意：`&diff=split`在 URL 末尾添加“”会得到相同的结果：拆分差异。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-30T01:32:00.680

您可以使用[Octosplit Chrome 扩展程序](https://chrome.google.com/webstore/detail/octosplit/mnkacicafjlllhcedhhphhpapmdgjfbb/reviews%20Octosplit%20Chrome%20extension)。但你没有得到完整的长度。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2021-05-11T17:20:07.633

好像已经搬家了。（至少在审查 PR 文件时）

[![在此处输入图像描述](../Images/4dd1bb97f8fe0b0599ffb5a07014afca.png)](https://i.stack.imgur.com/cKuyE.png)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-24T05:26:08.977

不是`git diff`，但您可以使用`git difftool`，它将为您的平台调用适当的实用程序来执行您所要求的操作。

例如，在 Linux 中它会`meld`默认调用，这是一个非常好的工具。`git difftool`知道很多不同的实用程序，但您也可以将其配置为调用自己的实用程序。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-24T07:35:01.473

不，目前在 GitHub 上不可能。您可以查看其他在线 diff 工具，例如：[http](http://www.quickdiff.com/) : //www.quickdiff.com/、http: [//www.diffchecker.com/](http://www.diffchecker.com/)和[http://www.diffnow.com/](http://www.diffnow.com/)。这些将为您提供并排的差异，但您必须手动复制/粘贴文本。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-25T06:46:18.020

Github web 还没有这个功能。

您可能对基于术语的差异工具[ydiff 感兴趣](https://github.com/ymattw/ydiff "通过并排和自动寻呼机支持在工作区或标准输入中查看彩色增量差异。 以前被称为“cdiff”")，它可以选择`-s`产生并排差异。

要查看尚未提交的更改，请键入

```
ydiff -s 
```

要查看工作区中的更改历史记录，请键入

```
ydiff -ls 
```

要查看来自拉取请求的更改，请通过管道输入来自 url 的原始差异，例如：

```
curl https://patch-diff.githubusercontent.com/raw/ymattw/ydiff/pull/11.diff | ydiff -s 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-04-07T17:10:16.683

看起来它可以从 1.7.9 版开始： [https ://raw.github.com/gitster/git/master/Documentation/RelNotes/1.7.9.txt](https://raw.github.com/gitster/git/master/Documentation/RelNotes/1.7.9.txt)

# php - 获取图像但不获取其他资源时出现 403 错误

> ID：15048959
> 
> 赞同：0
> 
> 时间：2013-02-24T05:24:01.273
> 
> 标签：php, xampp, http-status-code-403

我在 ubuntu ( ) 上安装了 xampp`/opt/lampp`并创建了一个 public_html 文件夹（我认为它是一个符号链接，我是 linux 新手）`/home/mustafa/public_html`我将我的 php 文件和其他资源放在`public_html`文件夹中，问题是当我想要获取图像之类的东西我收到 403 错误（禁止访问），但其他文件都可以，例如 PHP、CSS、JS 文件。问题是什么？我该怎么办？

***更新***

`ls -l /home/mustafa/public_html/templates/assets/images/`in终端的输出：

```
total 8
-rwxrwx--- 1 mustafa mustafa 4638 Feb 17 22:06 hbg.png

ls -l /home/mustafa/public_html/templates/assets/style/

total 16
-rw-rw-r-- 1 mustafa mustafa 1571 Feb 23 13:06 style.css
-rw-rw-r-- 1 mustafa mustafa 1567 Feb 23 13:06 style.css~
-rw-rw-r-- 1 mustafa mustafa  689 Feb 23 18:07 style_I.css
-rw-rw-r-- 1 mustafa mustafa  691 Feb 23 17:58 style_I.css~ 
```

我将图像移动到其他目录，发现无法访问 public_html 和子目录中的任何图像

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T06:15:46.703

在我看来，其他组无法根据您的`ls -l`输出访问图像。

它`rwxrwx---`在您的 css 文件为`rw-rw-r--`.

您应该`chmod 664`将图像与您的 css 文件或`chown apache`所有文件（假设 apache 作为 apache 运行）匹配，然后查看是否有效。

要检查哪个进程正在运行 apache，您可以使用`ps aux | grep httpd`

```
[user@host ~]$ ps aux | grep httpd
root      6407  0.0  0.3  11204  3288 ?        Ss   09:06   0:00 /usr/sbin/httpd
apache    6409  0.0  0.2  11340  2952 ?        S    09:06   0:00 /usr/sbin/httpd
apache    6410  0.0  0.2  11340  2948 ?        S    09:06   0:00 /usr/sbin/httpd
apache    6411  0.0  0.2  11340  2940 ?        S    09:06   0:00 /usr/sbin/httpd
apache    6412  0.0  0.2  11340  2948 ?        S    09:06   0:00 /usr/sbin/httpd
apache    6413  0.0  0.2  11340  2948 ?        S    09:06   0:00 /usr/sbin/httpd
apache    6414  0.0  0.2  11340  2948 ?        S    09:06   0:00 /usr/sbin/httpd
apache    6415  0.0  0.2  11340  2948 ?        S    09:06   0:00 /usr/sbin/httpd
apache    6416  0.0  0.2  11340  2948 ?        S    09:06   0:00 /usr/sbin/httpd
root      6426  0.0  0.0   5500   720 pts/1    S+   09:14   0:00 grep httpd 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-09T00:19:38.427

如果您使用共享主机计划 - 确保 plesk 中的设置没有启用限制并发 IP 连接并设置为特定数量。我将其打开并设置为 10 个并发连接（只是在测试此选项），我会取回一定数量的文件 - 其余文件将被禁止，因此某些脚本无法执行等。

linux 主机可能也是如此。

因此，那些测试和玩弄共享主机的兄弟们 - 转到 Web 服务器设置 - > 通过 IIS 动态 IP 限制防止 DoS 攻击 - 并确保一切都被禁用。

运气

# generics - 是否可以为 F# 元组创建扩展方法

> ID：15048962
> 
> 赞同：3
> 
> 时间：2013-02-24T05:24:45.057
> 
> 标签：generics, f#, extension-methods, tuples

我正在尝试为 F# 元组创建类型扩充方法。这段代码编译得很好：

```
type System.Tuple<'a, 'b> with
    member this.ToParameter name =
        match this with
        | this -> sprintf "%s=%O,%O" name (this.Item1, this.Item2) 
```

但是，当我尝试调用此方法时：

```
printfn "%s" (("cat", 2).ToParameter("test")) 
```

我收到一条错误消息，提示“未定义此字段、构造函数或成员 'ToParameter'。” 在解释器中，以下表达式将它们的类型报告为某种形式的 System.Tuple'2：

```
typedefof<'a * 'b>.FullName
(1, 2).GetType().FullName 
```

在 Visual Studio 中，如果我将鼠标悬停在表达式上：

```
let a = 1, 2 
```

它报告一种 int * int 类型。当我尝试扩充这种类型，或者它是通用的等价物时，'a * 'b，我得到一个错误。

是否可以为 F# 元组创建通用扩充？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T03:54:28.777

[您的问题的答案与我在此处](https://stackoverflow.com/a/6859564/236255)给出的类似问题的答案几乎相同。也就是说，您的类型扩展不起作用的原因是因为“`System.Tuple<_,...,_>`只是元组的编码形式，而不是编译器使用的静态表示。参见规范中的[6.3.2 元组表达式](http://research.microsoft.com/en-us/um/cambridge/projects/fsharp/manual/spec.html#_Toc270597440)。”

要使用您的类型扩展，您必须先框，然后转换您的元组值：

```
let tuple = box ("cat", 2) :?> System.Tuple<string,int>
printfn "%s" (tuple.ToParameter("test")) 
```

另外：还请注意，您的类型扩展中有轻微的语法错误，它应该是：

```
type System.Tuple<'a, 'b> with
    member this.ToParameter name =
        match this with
        | this -> sprintf "%s=%O,%O" name this.Item1 this.Item2 //removed parens around Item1 and Item2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-10T08:36:19.090

您可以使用 C# 样式的扩展方法，但请注意您的定义中有一个错误`ToParameter`，应使用 curried 参数：

```
open System.Runtime.CompilerServices

[<Extension>]
type TupleExtensions () = 
    [<Extension>] static member ToParameter((a, b), name) = sprintf "%s=%O,%O" name a b

printfn "%s" (("cat", 2).ToParameter("test")) 
```

using`System.Tuple`不起作用的原因是在编译时 .NET 元组和 F# 语法元组被视为不同的类型。这可能会在编译器的未来版本中发生变化。

# django - 一次性 django 脚本的已弃用 setup_environ() 的替代方案？

> ID：15048963
> 
> 赞同：47
> 
> 时间：2013-02-24T05:24:45.883
> 
> 标签：django

我`setup_environ()`前一阵子写了一个一次性的 python 脚本，从命令行运行，它根本不适合作为自定义 manage.py 命令（我的首选）。它很好地设置了一切。我假设我们弃用了这个函数，因为非 django pythonistas 拿 djangonauts 取笑这种神奇的东西，我们厌倦了感觉肮脏。那么，如果它已被弃用，还有什么替代方案？也许这是一个懒惰的问题，但我需要运行什么来代替 setup_environ 来达到相同的效果？我想我可以将函数复制/粘贴到我的脚本中，但我假设这不是弃用它的目的。（显然我仍然可以使用已弃用的函数，但我希望我的脚本能够在几个版本的 django 中存活）

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2014-03-28T20:16:52.337

这在[Django 1.7中发生了变化](https://docs.djangoproject.com/en/dev/intro/tutorial01/#playing-with-the-api)

```
import os
import django
from myapp import models

os.environ.setdefault("DJANGO_SETTINGS_MODULE", "myapp.settings")
django.setup()

print models.MyModel.objects.get(pk=1) 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2014-01-15T22:45:02.950

扩展 miki725 的答案，如果你有

```
from django.core.management import setup_environ

import fooproject.settings as settings
setup_environ(settings) 
```

只需替换为

```
import os

os.environ.setdefault("DJANGO_SETTINGS_MODULE", "fooproject.settings")
from django.conf import settings 
```

并且您的设置将作为设置加载。

对于 Django 1.7+，请参阅 Ben Davis 的解决方案。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2013-02-24T05:53:20.793

Django 1.4 release notes 官方推荐使用`django.conf.settings.configure()`来设置设置。这对于您需要以“pythonic”方式完成所有操作的小型脚本来说非常有用。但是，如果您有一个更大的项目，我喜欢使用 Django 方法，即有一个单独的设置模块/包，然后是`DJANGO_SETTINGS_MODULE`环境变量中的路径。这是用于`manage.py`：

```
# manage.py

# ...
os.environ.setdefault("DJANGO_SETTINGS_MODULE", "fooproject.settings")
# ... 
```

发布文档可以在[这里](https://docs.djangoproject.com/en/dev/releases/1.4/#django-core-management-setup-environ)找到。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-03-06T06:01:38.187

要添加 Leandro N 所说的内容（谢谢，Leandro！），您必须添加 django.setup()。

例如，我的代码：

```
import os, django
os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'myproject.settings')
django.setup()
from app.models import ModelA, ModelB 
```

仅供参考，我在 Django 1.10 上。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-08-31T21:30:32.490

我正在使用 Django 2.0，Ben Davis 很接近，但我无法让它工作。似乎对我有用的是

```
import os
import sys
import django

sys.path.append("/path/to/django/project") #only required if project not already in path
os.environ.setdefault('DJANGO_SETTINGS_MODULE','myapp.settings')

django.setup() #run django.setup BEFORE importing modules to setup the environ
from myapp.models import Thingy

t=Thingly.objects.all()

print(t) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-02-25T20:34:31.033

> 免责声明：我使用的是 Django 1.8

只需添加我的 2 美分：我已经尝试了此页面中提供的一些解决方案，但它们根本不起作用。我刚刚想出了一个解决方案，我将在下面分享。

确保您位于项目的根文件夹中。所在`manage.py`的位置相同。

```
#make sure basic imports are in place
>>> import os,django

#set the specific django settings file
>>> os.environ.setdefault("DJANGO_SETTINGS_MODULE", "main.settings.base")

# import your modules and use them just like you do in your
# web apps
>>> from apps.customers import models as c

# normal usage... for instance:
>>> dir(c)
['You', 'Will', 'See', 'Your', 'Models', ... ] 
```

# javascript - FilePicker：如何根据用户选择选择音频文件并使用按钮播放

> ID：15048967
> 
> 赞同：0
> 
> 时间：2013-02-24T05:25:51.380
> 
> 标签：javascript, html, css, windows-8

我希望用户从他们的系统中选择音频。这个音频应该在点击时播放，这可能吗？从所有给定的文件中，您只能选择图像。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T08:30:26.863

文件选择器 API 允许您指定所需的任何文件类型。查看[http://msdn.microsoft.com/en-us/library/windows/apps/hh465199.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh465199.aspx)并注意您可以将 fileTypeFilter 更改为您需要的任何文件扩展名（例如 mp3、wma 等） .

获得所选文件的 StorageFile 对象后，使用 URL.createObjectURL(, { oneTimeOnly : true}) 并将结果分配给音频元素的 src 属性。这将加载它，然后您可以指示音频元素播放/暂停/等。根据您的需要。

[播放管理器 msAudioCategory 示例](http://code.msdn.microsoft.com/windowsapps/Playback-Manager-e6526e67)(js/foregroundonlymedia.js)的场景 4完全符合您的需要。如果需要，场景 1 会显示背景音频。

# javascript - 将多个选择选项文本传递到 textarea

> ID：15048968
> 
> 赞同：1
> 
> 时间：2013-02-24T05:25:53.247
> 
> 标签：javascript, jquery, forms

我有一个表单，其中有几个选择框，其中一些是多选。到目前为止，我能够将文本值从每个选择框传递到文本区域；但是，我无法从多选框中传递多个选项。有人可以在这里帮忙吗？意思是，我想在多个选择框中传递所有选定的文本，而不仅仅是选择中的第一项。

我的代码不断返回“未定义”。在搜索这些论坛时，似乎使用 jQuery 'option:selected' 修饰符应该返回所有选定项目的文本。

```
function writeText(){
// get assign the values from each text input
var myCAPtext = document.getElementById('CAPoutput');

// assign multiple text values
var select_1 = $("#box1 option:selected").text();

var  CAPtext = select_1.value+"\n\n";
  myCAPtext.value = CAPtext;
  } 
```

HTML

```
<select id="box1" multiple>
<option></option>
<option>first text</option>
<option>second text</option>
<option>third text</option>
<option>fouth text</option>
</select>

<input value="Write" onclick="writeText()" type="button"> <br>

<textarea id="CAPoutput"> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T05:30:09.647

`text`返回一个字符串，String对象没有`value`属性，使用jQuery`val`方法，它为多个select元素返回一个值数组，然后你可以使用`join`数组对象的方法来连接数组的元素：

```
var select_1 = $("#box1").val();
var CAPtext = select_1.join("\n\n"); 
```

[http://jsfiddle.net/ZCTRC/](http://jsfiddle.net/ZCTRC/)

如果您想告别`onclick`属性：

```
$('input[type=button]').click(function () {
    var myCAPtext = document.getElementById('CAPoutput');
    myCAPtext.value = $("#box1").val().join("\n\n");
}) 
```

# java - Java - 静态块和线程同步问题 - 一个案例

> ID：15048971
> 
> 赞同：1
> 
> 时间：2013-02-24T05:26:26.310
> 
> 标签：java, multithreading, smpp

## 什么是要做？

1.  从这里下载 logica smpp jar (215 KB)：http: [//opensmpp.logica.com/CommonPart/Download/library_1_3/smpp_full.tar.gz](http://opensmpp.logica.com/CommonPart/Download/library_1_3/smpp_full.tar.gz)
2.  写一个小测试代码：

    ```
    package com.logica.smpp;

    import com.logica.smpp.pdu.DataSM;
    import com.logica.smpp.pdu.Outbind;

    public class PDUTest {
        public static void main(String... args) throws InterruptedException {
            Thread thread1 = new Thread(new Runnable() {
                @Override
                public void run() {
                    System.out.println(new DataSM().debugString());
                }
            });
            thread1.setName("ONE");

            Thread thread2 = new Thread(new Runnable() {
                @Override
                public void run() {
                    System.out.println(new Outbind().debugString());
                }
            });
            thread2.setName("TWO");

            thread1.start();
            thread2.start();
        }
    } 
    ```

3.  运行此`main`方法。

## 怎么了？

s 被阻塞（大概是`Thread`互相等待）

## 我的分析：

*   `DataSM`和类都有`Outbind`一个共同的祖先`PDU`，它有一个`static`带有以下代码的块：

    ```
    static {
            pduList = new Vector(30,4);
            pduList.add(new BindTransmitter());
            pduList.add(new BindTransmitterResp());
            pduList.add(new BindReceiver());
            pduList.add(new BindReceiverResp());
            pduList.add(new BindTransciever());
            pduList.add(new BindTranscieverResp());
            pduList.add(new Unbind());
            pduList.add(new UnbindResp());
            pduList.add(new Outbind());
            pduList.add(new SubmitSM());
            pduList.add(new SubmitSMResp());
            pduList.add(new SubmitMultiSM());
            pduList.add(new SubmitMultiSMResp());
            pduList.add(new DeliverSM());
            pduList.add(new DeliverSMResp());
            pduList.add(new DataSM());
            pduList.add(new DataSMResp());
            pduList.add(new QuerySM());
            pduList.add(new QuerySMResp());
            pduList.add(new CancelSM());
            pduList.add(new CancelSMResp());
            pduList.add(new ReplaceSM());
            pduList.add(new ReplaceSMResp());
            pduList.add(new EnquireLink());
            pduList.add(new EnquireLinkResp());
            pduList.add(new AlertNotification());
            pduList.add(new GenericNack());
        } 
    ```

它创建`pduList`以便它可以通过它提供的工厂方法创建其子对象的对象，例如`BindTransmitter`,`DataSM`等`Outbind``createPDU`

*   因此，当我的测试应用程序被执行时，ONE`Thread`进入 PDU 的静态方法（在初始化时`DataSM`）。`Thread`而已经开始初始化的 TWO`Outbind`等待 ONE 完成初始化`PDU`。

*   但是在运行静态方法的 ONE 中的某个时刻`PDU`，它尝试初始化`Outbind`，并且看到 TWO 已经开始了相同的事情，它等待 TWO 完成。

*   所以一和二在等待对方完成

*   我怎么能确信这个问题与静态块加载有关？
    在测试代​​码的 main 方法中添加以下一行作为第一条语句，使其工作并且`Thread`s 不再阻塞：

    ```
    Class.forName("com.logica.smpp.pdu.PDU"); 
    ```

## 我的问题是：

1.  我的分析正确吗？
2.  这是`Thread`与静态块有关的已知同步问题吗？
3.  有没有什么经验法则需要练习才能避免遇到这种情况？

### 更新

*   在此处添加 PDU 的工厂方法：

    ```
    public static final PDU createPDU(int commandId)
    {
        int size = pduList.size();
        PDU pdu = null;
        PDU newInstance = null;
        for (int i = 0; i < size; i++) {
            pdu = (PDU)pduList.get(i);
            if (pdu != null) {
                if (pdu.getCommandId() == commandId) {
                    try {
                        newInstance = (PDU)(pdu.getClass().newInstance());
                    } catch (IllegalAccessException e) {
                    } catch (InstantiationException e) {
                    }
                    return newInstance;
                }
            }
        }
        return null;
    } 
    ```

*   的构造函数`DataSM`和`Outbind`其他子类`PDU`做什么？
    什么都没有，除了初始化一些实例变量。这些是 POJO。他们不保留任何外部资源，如文件、数据库等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T05:35:18.140

您的线程可能会阻塞，但不是出于您认为的原因。静态初始化器在类加载时执行，而不是在创建实例时执行。所以，你没有让你的两个对象“进入”静态初始化程序，并且在某些时候，在某个共享变量上陷入僵局。

在不知道您正在使用的库的确切细节的情况下，很难诊断出真正的问题可能是什么，但我建议您转储您的线程并使用合适的工具对其进行分析。

*   [如何进行线程转储](http://helpx.adobe.com/cq/kb/TakeThreadDump.html)
*   [线程转储分析工具](https://stackoverflow.com/questions/3156434/thread-dump-analysis-tool-method)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T20:23:59.587

如果一个类的初始化器依赖于另一个类，反之亦然，如果两个类在 2 个不同的线程中初始化，就会导致死锁。您的分析很可能是正确的。

如果这两个类在同一个线程中初始化，就不会出现死锁；然而，应该避免循环依赖。在这个例子中，这些`pduList`东西应该在它自己的类中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T00:22:14.180

请添加`lock(pduList)`为 FIRST 语句`createPDU`。在 . 之后立即关闭`lock`块`return`。请尝试一下。让我知道你是怎么做的。

例如

```
public static final PDU createPDU(int commandId)
{
  lock(pduList) {
    int size = pduList.size();
    PDU pdu = null;
    PDU newInstance = null;
    for (int i = 0; i < size; i++) {
        pdu = (PDU)pduList.get(i);
        if (pdu != null) {
            if (pdu.getCommandId() == commandId) {
                try {
                    newInstance = (PDU)(pdu.getClass().newInstance());
                } catch (IllegalAccessException e) {
                } catch (InstantiationException e) {
                }
                return newInstance;
            }
        }
    }
    return null;
  } // end lock  
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-24T05:40:53.553

您可以使用该`jstack`工具打印出线程堆栈：

```
jstack <pid of your java process> 
```

你可以通过`jps`命令找到pid。比如`jps`我机器的命令输出：

```
eric@erics-MacBook-Pro:~$ jps
577 Jps
448 
```

然后是448的`jstack`命令：`pid`

```
jstack 448 
```

以及它的部分输出：

```
"Worker-46" prio=5 tid=10f543800 nid=0x11811e000 in Object.wait() [11811d000]
java.lang.Thread.State: TIMED_WAITING (on object monitor)
at java.lang.Object.wait(Native Method)
- waiting on <7a0001a80> (a org.eclipse.core.internal.jobs.WorkerPool)
at org.eclipse.core.internal.jobs.WorkerPool.sleep(WorkerPool.java:188)
- locked <7a0001a80> (a org.eclipse.core.internal.jobs.WorkerPool)
at org.eclipse.core.internal.jobs.WorkerPool.startJob(WorkerPool.java:220)
at org.eclipse.core.internal.jobs.Worker.run(Worker.java:50) 
```

您可以看到“Worker-46”被阻止在`Object.wait()`.

当您获得线程堆栈时，应该清楚为什么代码阻塞。

# java - 使用 foreach 循环从 arraylist 添加值，然后使用访问器打印它们

> ID：15048973
> 
> 赞同：0
> 
> 时间：2013-02-24T05:26:50.590
> 
> 标签：java, if-statement, printing, arraylist, foreach

前一个问题：[将概率分配给随机枚举对象](https://stackoverflow.com/questions/15048404/assigning-probability-to-a-random-enum-object)

所以我有这个：

```
import java.util.List;
import java.io.File;
import java.io.IOException;
import java.util.Arrays;
import java.util.Random;
import java.util.ArrayList;
import java.util.Scanner;
import java.lang.Integer;

public class ElectoralCollege {
    public static final String FILE = "Electoral201X.txt";
    private ArrayList <State> stateVotes;

    Random rand = new Random();
    List<Party> parties = Arrays.asList(Party.DEMOCRAT, Party.DEMOCRAT, Party.REPUBLICAN, Party.REPUBLICAN, Party.INDEPENDENT);

    public ElectoralCollege() throws IOException    {

        stateVotes = new ArrayList<State>();
    }

    public void assignStates() throws IOException   {

        File f = new File(FILE);
        Scanner fReader = new Scanner(f);

        while(fReader.hasNext())    {

            String stateData = fReader.nextLine();
            int stateEnd = stateData.indexOf(" - ");
            String stateName = stateData.substring(0, stateEnd);
            String numVote = stateData.substring(stateEnd + 2);

            Party winner = parties.get(rand.nextInt(5));

            State voteInfo = new State(stateName, Integer.parseInt(numVote.trim()), winner);
            stateVotes.add(voteInfo);
        }

    }

    public void announceWinner()    {

        int dem = 0;
        int rep = 0;
        int ind = 0 ;

        for(State a : stateVotes)   {

            if(a.getWinner().equals(Party.DEMOCRAT))
                dem = dem + a.getNumVotes();
            else if(a.getWinner().equals(Party.REPUBLICAN))
                rep = rep + a.getNumVotes();
            else if(a.getWinner().equals(Party.INDEPENDENT))
                ind = ind + a.getNumVotes();

        }
            if(dem >= 270)
                System.out.println("DEMOCRATS WIN");
            else if(rep >= 270)
                System.out.println("REPUBLICANS WIN");
            else if(ind >= 270)
                System.out.println("INDEPENDENTS WIN");
            else
                System.out.println("CONGRESS MUST CHOOSE");

        for(State b : stateVotes)
            System.out.println(b.getName() + " " + b.getWinner());  
    }

} 
```

我需要回答这个问题：

> 在announceWinner() 中查看stateVotes 并将三个政党的总选举人票相加。打印出每个政党的总选举人票，如果任何政党的票数超过获胜所需的 270 张，则宣布该政党为获胜者 - 否则宣布国会将不得不做出选择。最后，打印每个州的个人获胜者。

**出于某种原因，它总是打印 CONGRESS MUST CHOOSE。** **经过进一步调查，dem、ind 和 rep 的所有 int 值始终为 0。** 不确定我是否需要像我一样初始化变量，但是当我不需要时它一直给我错误。

Accessor 方法都是基本 State.class 的一部分，它有一个构造函数和三个访问器方法来访问状态对象中的每个参数。stateVotes 由哪个 stateVotes 组成。

stateVotes 中的状态值也已全部设置。从旧问题中，我从文件中读取了一行文本，将其制成状态对象，然后将其放入 stateVotes 数组列表中。我为该文件中的每一行文本都这样做了。

**第二个 foreach 循环根本不打印任何内容。**

状态类很简单：

```
public class State {

    private String Name;
    private int votes;
    private Party winningParty;

    public State(String stateName, int numVote, Party winner)   {

        Name = stateName;
        votes = numVote;
        winningParty = winner;

    }

    public Party getWinner()    {

        return winningParty;    
    }

    public String getName()     {

        return Name;
    }

    public int getNumVotes()    {

        return votes;

    }

} 
```

州数据的示例是“Floria 29 DEMOCRAT”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T05:39:57.743

如果`Party.DEMOCRAT`返回一个字符串，那么你需要使用

`if(a.getWinner().equals(Party.DEMOCRAT))`

不是

`if(a.getWinner() == Party.DEMOCRAT)`

这背后的基本原理是因为您正在比较字符串而不是值。字符串不能与 == 进行比较，您必须使用 .compair 或 .equals 来限定内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T22:08:44.673

糟糕，显然我需要调用 assignStates(); 在构造函数中。有人告诉我早些时候删除它，但是我调用它的方式需要将它放在构造函数中，所以当我创建 ElectoralCollege 对象并使用它来调用announceWinner() 它将拥有它，或者我需要在我的主要内容之前单独调用它。

谢谢你的帮助 ：）。

# android - 0 来自 Android 应用程序的 Facebook 移动广告的操作

> ID：15048978
> 
> 赞同：2
> 
> 时间：2013-02-24T05:27:55.173
> 
> 标签：android, facebook

我们针对原生 Android 应用程序的 Facebook 移动广告今天获得了 300 次（3% CTR）点击，但只有 0 次操作。

我们 iOS 版本的类似广告会产生 30 个操作。

我们已经为 Native Android 应用程序输入了所有 Facebook 设置。

有什么问题？

谷歌播放链接[http://goo.gl/5Zjkm](http://goo.gl/5Zjkm)

问候，迈克尔

# javascript - 如何在 Javascript 中加载文件，类似于文件 api，但从 web 目录？

> ID：15048980
> 
> 赞同：1
> 
> 时间：2013-02-24T05:28:21.287
> 
> 标签：javascript, html

我对javascript很陌生，所以我有一个可能很简单的问题。

我目前正在使用`<input type="file" id="file"/>`. 在 javascript 中，我可以使用该文件来满足我的需要。

有没有办法对 Web 服务器上已经存在的文件执行此操作？用户不会在他们的机器上找到本地文件，而是从服务器上的目录加载文件。

我想我需要一种将服务器上的文件转换为与使用输入表单时获得的相同类型的“文件”的方法。

编辑：我正在加载一本 epub 书。我不想从我的计算机中选择文件，而是想要一个已经在服务器上的文件列表，我可以通过单击来加载这些文件。

# javascript - 如何使用 $.getJSON 编写异步代码？

> ID：15048989
> 
> 赞同：0
> 
> 时间：2013-02-24T05:31:11.313
> 
> 标签：javascript, jquery, async.js

我正在做这样的事情

```
$.getJSON(url1, function(response1){
if(response1.status == 'success'){
    $.getJSON(url2, function(response2){
        if(response2.status == 'success') {
            $.getJSON(url3, function(response3){
                if(response3.status == 'success') {
                    //final code here
                }
            });
        }
    });
}
}); 
```

我听说过像[https://github.com/caolan/async#series](https://github.com/caolan/async#series)这样的异步库 在这种情况下我该如何实现呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T05:50:29.060

您的代码已经在使用异步处理模型。因此，您不必使用任何其他库来使其异步。

[$.getJson](http://api.jquery.com/jQuery.getJSON/)是一种实用方法，它使用[$.ajax](http://api.jquery.com/jQuery.ajax/)从服务器发送和接收数据。$.ajax 使用 XmlHttpRequest 发送/接收使用异步处理模型构建的数据。

要测试异步性质，如果您愿意，您可以在 $.getJson() 调用之后添加 console.log('after post') 并在 if(response2.status == 'success 之前添加 console.log('after callback') ') 陈述。

如果您在发送请求后检查您的控制台，您会发现`after post`之前出现`after callback`的这意味着脚本继续执行而无需等待服务器的响应。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T05:52:04.047

你真的想进行同步调用（阻止浏览器直到它完成）还是只是有一种“更干净”的方式`getJSON`在另一个完成后启动一个（而不将它嵌套在回调中）？正如其他人已经指出的那样，ajax 调用已经相互同步。

对于第一个选项，请查看更通用的[`$.ajax`](http://api.jquery.com/jQuery.ajax/)（您可以在参数中设置`async`为`false`）。对于第二个，您可以只创建一个递归效用函数：

```
function chain(list,index,callback,errorCallback) {
    if ( index == list.length )
        return callback();
    $.getJSON(list[index])
        .done(function() {
            chain(list,index+1,callback);
        })
        .fail(errorCallback);
}
chain([url1, url2, url3],0,function() {
    //final code here
},function() {
    //error handling here (in any of the calls)
}); 
```

# string - 需要重定向以删除文章 ID 字符串

> ID：15048990
> 
> 赞同：1
> 
> 时间：2013-02-24T05:31:37.003
> 
> 标签：string, .htaccess, redirect, joomla1.5

我希望有人能帮忙。我正在寻找这样的网址的重定向规则...
www.site.com/chevy/234-article-name
www.site.com/ford/98-article-name
www.site.com/kia/5-文章名

我需要删除“#-”部分，其中 # 是文章 ID。因此，在任何给定的类别中，每篇文章的文章名称前都有它的 ID。我最近更改了 url 结构，需要重定向数百个 url。是的，这是 Joomla 的事情。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T06:40:31.280

您可以添加重写规则来处理该作业：

```
RewriteEngine On
RewriteRule ^(.+?)/[\d]*-(.*)$ /$1/$2 [R=301,L] 
```

# javascript - Javascript 函数未验证表单

> ID：15048991
> 
> 赞同：0
> 
> 时间：2013-02-24T05:32:01.843
> 
> 标签：javascript, html

我有这个表格：

```
<form id="frm_register" action="register.php" method="post" onsubmit ="return register_user()">
    <label for="txtuname" style="display: block; width: 80px; float: left;">Username: </label>
    <input id="txtuname" name="ntxtuname" type="text" style="" /><br /><br /> 
    <label for="txtupwd" style="display: block; width: 80px; float: left;">Password: </label>
    <input id="txtupwd" name="ntxtupwd" type="password" style="" /><br /><br />
    <label for="txtuemail" style="display: block; width: 80px; float: left;">Email: </label>
    <input id="txtuemail" name="ntxtuemail" type="text" style="width:200px;" /><br /><br />
    <label for="txtpayza" style="display: block; width: 80px; float: left;">Payza: </label>                                
    <input id="txtpayza" name="ntxtpayza" type="text" style="width:200px;" /><br /> <br />
    <input type="submit" value="Register" style="margin-left: 250px;"/>
</form> 
```

还有一个 JavaScript 函数在提交之前验证表单：

```
<script type="javascript/text">          
    function register_user() {
        if(document.frm_register.ntxtuname.value=='') {
            alert('wrong');
            return false;
        }
        return true;
    }
</script> 
```

但是表单仍然提交并且没有进行验证。伙计们，这张照片有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T05:41:53.187

您的代码将在修复 2 个错误后工作，这已在[jsFiddle](http://jsfiddle.net/hzheng/kPzcV/)上得到验证。

**首先**：

```
<script type="javascript/text"> 
```

应该：

```
<script type="text/javascript"> 
```

否则无法识别 Javascript 代码。

**第二**：

```
document.frm_register 
```

应该：

```
document.getElementById("frm_register") 
```

或者：

```
document.forms.frm_register 
```

否则它将是未定义的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T05:39:11.260

为什么要通过表单搜索文本框值？

而不是这个

```
if(document.frm_register.ntxtuname.value=='') 
```

你可以这样做

```
if(document.getElementById("ntxtuname").value==="") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T05:46:06.340

尝试将验证设置为单击提交按钮时调用

```
<input type="submit" value="Register" 
         style="margin-left: 250px;" onclick="return register_user()"/> 
```

这应该照顾它。

# ravendb - 索引转换中的可空属性

> ID：15048995
> 
> 赞同：0
> 
> 时间：2013-02-24T05:33:14.587
> 
> 标签：ravendb

我正在尝试做一个相当简单的索引和转换，将`DateTime?`属性从文档复制到投影。

如果存在属性为 null 的任何文档，则会产生以下错误：

`System.InvalidOperationException: The transform results function failed. Doc 'people/3', Error: Cannot convert type 'Raven.Abstractions.Linq.DynamicNullObject' to 'System.DateTime?'`

见要点：[https ://gist.github.com/pdegenhardt/5022737](https://gist.github.com/pdegenhardt/5022737)

这是一个错误还是我做错了什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T07:51:44.010

这个测试对我有用： [https ://gist.github.com/ayende/5023050](https://gist.github.com/ayende/5023050)

你没有提到构建，但你需要尝试最新的。