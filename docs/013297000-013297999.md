# StackOverflow 问答 13297000-13297999

# vb.net - 在内联 if 语句中将变量设置为空值

> ID：13297002
> 
> 赞同：2
> 
> 时间：2012-11-08T20:12:31.873
> 
> 标签：vb.net

我正在尝试使用以下代码检查 a`DBNull`并将变量设置为空，如果不是，则设置为短。问题是它未能将变量设置为`Nothing`并将其设置为 a `0`。有人知道为什么吗？

```
variable = If(currentRow.Item("variable") Is DBNull.Value,
    Nothing, CShort(currentRow.Item("variable"))) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T20:14:07.450

如果`variable`声明`As Short?`了，则代码会稍作调整：您需要`If`先将任一操作数转换为目标类型：

```
variable = If(condition, CType(Nothing, Short?), CShort(…)) 
```

（您也可以改为使用第三个操作数，或两者兼而有之。）

由于`If`推导类型的方式，这种转换是必要的：如果两个结果类型不匹配，则推导出一个公共类型，它是*最接近的父类型*，即两者都继承自的类型。但是，有了`Nothing`，新规则开始发挥作用，因为就 VB 而言，`Nothing`它已经是一个有效`Short`的 - 默认初始化的规则（请参阅下面的旧答案以获得解释）。所以VB不尝试任何类型强制，它只是`Short`用作返回值。

* * *

下面的旧答案，假设 OP 已声明`variable As Short`：

您不能将值类型设置为`Nothing`。如果您分配`Nothing`给一个值类型，那么它将被设置为其类型的默认值——即`0`for `Short`。

您可以轻松地对此进行测试：

```
Dim s as Short = Nothing
Console.WriteLine(s) 
```

将值类型设置`Nothing`为与调用其默认构造函数 ( `New Short()`) 或声明该类型的新变量而不对其进行初始化相同。C# 中的相应操作是赋值`default(T)`( `short s = default(short)`)。

如果要表示`null`值类型，则必须使用可为[*空*的类型](http://msdn.microsoft.com/en-us/library/b3h38hb0.aspx)：

```
Dim s as Short? = Nothing 
```

Now`s`是类型`Nullable<Short>`(`Short?`是它的快捷方式) 并且可以分配一个适当的`Nothing`.

# java - 多个 Quartz 调度器 - 调度在不同调度器实例中创建的作业

> ID：13297004
> 
> 赞同：0
> 
> 时间：2012-11-08T20:12:34.667
> 
> 标签：java, quartz-scheduler

我想使用 Quartz 调度程序，我的应用程序的服务器部分使用调度程序创建作业并将其存储在 JDBCStore 中，而 UI 部分（前端）使用调度程序的另一个实例（指向相同的数据库模式）为该作业添加触发器。我认为 UI 知道作业和组的名称就足够了，因为添加触发器类似于：

```
trigger = newTrigger()
.withIdentity("trigger", "group1")
.withSchedule(cronSchedule("0 0/2 8-17 * * ?")
    .withMisfireHandlingInstructionFireAndProceed())
.forJob("myJob", "group1")
.build(); 
```

不幸的是，这会引发作业类的异常`java.lang.ClassNotFoundException`。任何帮助，将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T21:22:50.843

根据上面的对话，为什么不将触发器本身添加到服务器项目中。您可以对服务器项目进行 JMS 调用，发送触发器详细信息并在服务器项目中执行所有必需的操作。我认为这应该可以解决您的问题

# c++ - 您如何编写和运行 FastCGI 应用程序？

> ID：13297006
> 
> 赞同：1
> 
> 时间：2012-11-08T20:12:34.463
> 
> 标签：c++, fastcgi

我正在陌生的水域尝试我的手——C++ 和 FastCGI。尽管我已经 5 年多没有在其中写过任何东西了，但我对 C/C++ 有一定的了解，在那之前也没有什么大不了的。我对 FastCGI 完全陌生。我在 FCGI 网站上看到有两个接口——fcgi_stdio 和 fcgiapp。fcgi_stdio 是 fcgiapp 的包装器，旨在移植遗留的 cgi 应用程序。由于我是从头开始写的，所以我想跳过中间人，直接使用 fcgiapp。

但是我看不到如何正确初始化它。我知道它可以使用命名管道或套接字与服务器进行通信（我首先在 Windows 上编写，稍后将尝试 Linux），但是没有可以传递管道名称或端口的初始化函数数字。据我所知，它也不使用环境变量。我研究了代码，但它没有什么意义。少数使用某种“socket”或“port”参数的函数通常会在第一行取消它（让我想知道为什么首先有一个参数）。

你是怎么做到的？还是图书馆只是一个起点，您需要进行大量调整才能使其正常工作？

# python - 在 python-bluez 中定义多个蓝牙加密狗（从特定设备扫描）

> ID：13297016
> 
> 赞同：0
> 
> 时间：2012-11-08T20:13:23.287
> 
> 标签：python, bluetooth, bluez

我正在使用 python-bluez （在 linux 下）在 Python 中构建一个蓝牙应用程序

但是我的电脑有 2 个蓝牙适配器（一个内置，一个 USB 加密狗）我该如何选择从哪一个进行扫描，因为现在它随机选择一个。

现在的代码非常基本；）

```
nearby_devices = bluetooth.discover_devices() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T11:11:47.230

我发现你必须修改 python-bluez 文件本身。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-20T11:31:56.867

```
 #Automatic selection:
   nearby_devices = discover_devices(lookup_names=True, device_id=-1)
   #First adapter
   nearby_devices = discover_devices(lookup_names=True, device_id=0)
   #Secon adapter
   nearby_devices = discover_devices(lookup_names=True, device_id=1)
   #..etc 
```

# java - Getting java.awt.HeadlessException on running JasperViewer.viewReport(JasperPrint) method

> ID：13297028
> 
> 赞同：4
> 
> 时间：2012-11-08T20:13:51.733
> 
> 标签：java, jasper-reports

I'm getting the error with this code running on *Ubuntu 11*:

```
JasperReport jasperReport = JasperCompileManager.compileReport("/resources/etiquetas/etiquetaEndereco.jrxml");
JasperPrint print = JasperFillManager.fillReport(jasperReport, parametros);
JasperViewer.viewReport(print); 
```

Stack:

```
GRAVE: java.awt.HeadlessException
    at java.awt.GraphicsEnvironment.checkHeadless(GraphicsEnvironment.java:159)
    at java.awt.Window.<init>(Window.java:432)
    at java.awt.Frame.<init>(Frame.java:403)
    at java.awt.Frame.<init>(Frame.java:368)
    at javax.swing.JFrame.<init>(JFrame.java:158)
    at net.sf.jasperreports.view.JasperViewer.<init>(JasperViewer.java:264) 
```

I don't find solution for this error.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T20:56:38.470

正如 Java 文档所示，`java.awt.HeadlessException`是：

> 在不支持键盘、显示器或鼠标的环境中调用依赖于键盘、显示器或鼠标的代码时引发。

（[来源](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/HeadlessException.html)）

并且，对于`java.awt.GraphicsEnvironment`：

> 该类`GraphicsEnvironment`描述 了特定平台上 Java(tm) 应用程序可用的`GraphicsDevice`对象和对象的集合。`Font`

（[来源](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/GraphicsEnvironment.html)）

检查您的报告源文件 ( `etiquetaEndereco.jrxml`) 是否正在调用无法在您的系统上安装的字体。

# vb.net - 检索有关动态控件的数据

> ID：13297032
> 
> 赞同：0
> 
> 时间：2012-11-08T20:13:57.690
> 
> 标签：vb.net, winforms, dynamic-controls

我正在使用动态创建的控件，需要在运行时检索有关控件的信息。

```
If IsLoaded <> "free" Then
        flow_display.Controls.Clear()
        For x As Integer = 0 To populate.Count - 1
            If populate(x).parentID = 2 Then
                Dim NewPicBox As PictureBox = New PictureBox
                NewPicBox.Size = New System.Drawing.Size(697, 50)
                NewPicBox.ImageLocation = pw_imgLink & populate(x).imageID

                AddHandler NewPicBox.Click, AddressOf catWindow
                flow_display.Controls.Add(NewPicBox)
            End If
        Next
        IsLoaded = "free"

    End If
End Sub 
```

在这里，当用户单击适当的标签时，我将创建控件。现在 catWindow 子是空的。我需要弄清楚单击了哪个按钮并找出它在填充列表中的位置。我已经尝试了一些事情，从我从其他问题中读到的内容似乎找不到任何帮助。谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T21:19:06.793

要找出按下的是哪个 PictureBox，您的 catWindow Sub 应如下所示：

```
Public Sub catWindow(ByVal sender As Object, ByVal e As EventArgs)
    Dim box As PictureBox = TryCast(sender, PictureBox)
    If box Is Nothing Then Exit Sub

    'Now "box" refers to the PictureBox that was pressed
    '...
End Sub 
```

如果要在填充列表中找到它的位置，则需要遍历列表，直到找到匹配框。您还可以抢占 PictureBox 上没有做任何其他事情的属性，并使用它来存储索引。旧的表单工具曾经有一个 .Tag 属性，特别是对于这种事情。但实际上，这样做的需要对我来说就像一个设计缺陷。

FWIW，我会像这样重写你的原始样本：

```
If IsLoaded <> "free" Then

    flow_display.SuspendLayout()
    flow_display.Controls.Clear()

    For Each box As PictureBox In populate
                        .Where(Function(p) p.parentID = 2)
                        .Select(Function(p) New PictureBox() With {
                             .Size = New System.Drawing.Size(697, 50),
                             .ImageLocation pw_imgLink & p.imageID })

        AddHandler box.Click, AddressOf catWindow
        flow_display.Controls.Add(box)
    Next box

    flow_display.ResumeLayout()
    IsLoaded = "free"
End If 
```

# r - 使用索引矩阵有效地更新矩阵元素

> ID：13297033
> 
> 赞同：3
> 
> 时间：2012-11-08T20:14:00.820
> 
> 标签：r, matrix

我有一个索引矩阵，其中一些索引重复。我在下面举了一个例子。

我有另一个矩阵 A，其尺寸与索引兼容，并且在任何地方都初始化为 0。我想做类似的事情

```
A[I] += 1 
```

我面临两个问题：

1.  `A[I] = A[I] + 1`效率太低
2.  矩阵`I`有冗余索引。例如第 2 行和第 6 行是相同的，我想获得`A[1,2] = 2`

部分答案是创建一个 3 列矩阵，其中两列是的乘积，`unique(I)`第三列是计数的乘积，但我也没有看到任何解决方案。任何指针或帮助将不胜感激！

```
> I is:
     [,1] [,2]
[1,]    1    1
[2,]    1    2
[3,]    1    3
[4,]    1    4
[5,]    1    1
[6,]    1    2
[7,]    1    3 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T20:37:38.867

这可能是使用稀疏矩阵方法最快的方法（参见 Matrix 包等）。

使用标准矩阵，您可以使用`xtabs`函数然后矩阵分配（根据评论编辑）折叠相同的行：

```
I <- cbind(1, c(1:4,1:3))

tmp <- as.data.frame(xtabs( ~I[,1]+I[,2] ))

A <- matrix(0, nrow=5, ncol=5)
tmp2 <- as.matrix(tmp[,1:2])
tmp3 <- as.numeric(tmp2)
dim(tmp3) <- dim(tmp2)
A[ tmp3 ] <- tmp[,3]
A 
```

您可以通过将核心功能拉出`as.data.frame.table`而不是转换为数据框并再次返回来使其更快一点。

这是另一个可能更有效的版本。它将覆盖一些 0 与其他 0 计算`xtabs`：

```
I <- cbind(1:5,1:5)
A <- matrix(0, 5, 5)

tmp <- xtabs( ~I[,2]+I[,1] )

A[ as.numeric(rownames(tmp)), as.numeric(colnames(tmp)) ] <- c(tmp)
A 
```

如果 A 矩阵有 dimnames 并且 I 矩阵有名字而不是索引，那么后面的也可以工作（只需删除`as.numeric`s.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T20:35:40.710

干得好：

```
## Reproducible versions of your A and I objects
A <- matrix(0, nrow=2, ncol=5)
## For computations that follow, you'll be better off having this as a data.frame
## (Just use `I <- as.data.frame(I)` to convert a matrix object I).
I <- read.table(text=" 1    1
1    2
1    3
1    4
1    1
1    2
1    3", header=FALSE)

## Create data.frame with number of times each matrix element should
## be incremented
I$count <- ave(I[,1], I[,1], I[,2], FUN=length)
I <- unique(I)

## Replace desired elements, using a two column matrix (the "third form of
## indexing" mentioned in "Matrices and arrays" section" of ?"[").
A[as.matrix(I[1:2])] <- I[[3]]

A
#      [,1] [,2] [,3] [,4] [,5]
# [1,]    2    2    2    1    0
# [2,]    0    0    0    0    0 
```

# jquery - jQuery working fine locally but not on iis

> ID：13297037
> 
> 赞同：1
> 
> 时间：2012-11-08T20:14:05.783
> 
> 标签：jquery, iis-7.5

I running jQuery on my local website which works just fine. However, when I try to run that same exact website on a remote web server, the jquery just doesn't work. I am not getting any javascript errors.

Here is what I'm simply trying to do: When I run my website locally or even when I run it locally pointing to my staging server, it works just fine as I explained. However, if I try and run it from the actual staging server, when clicking the "Generate PDF" button, it doesn't kick off the process. It's as if the value is coming back false and not executing the part I need to be executed or the js is simply not being executed. I triple verfified that the js is NOT commented out. It disables the button, but no activity. Is there anything I need to do implement or set up on the staging server?

Here is my _Layout.cshtml file:

```
<head>
    <title>@ViewBag.Title</title>
    <link href="@Url.Content("~/Content/Site.css")" rel="stylesheet" type="text/css" />
    <link href="@Url.Content("~/Content/kendo/2012.2.913/kendo.common.min.css")" rel="stylesheet" type="text/css" />
    <link href="@Url.Content("~/Content/kendo/2012.2.913/kendo.dataviz.min.css")" rel="stylesheet" type="text/css" />
    <link href="@Url.Content("~/Content/kendo/2012.2.913/kendo.blueopal.min.css")" rel="stylesheet" type="text/css" />
    <script src="~/Scripts/jquery-1.7.1.min.js" ></script>
    <script src="~/Scripts/jquery.validate.min.js"></script>
    <script src="~/Scripts/jquery.validate.unobtrusive.min.js"></script>
    <script src="~/Scripts/jquery.unobtrusive-ajax.min.js"></script>
    <script src="~/Scripts/modernizr-2.5.3.js"></script>
    <script src="@Url.Content("~/Scripts/kendo/2012.2.913/kendo.all.min.js")"></script>
    <script src="@Url.Content("~/Scripts/kendo/2012.2.913/kendo.aspnetmvc.min.js")"></script>
</head> 
```

Index View:

```
<script type="text/javascript">

    $('#btnRefresh').click(function () {
        Refresh();
    });

    function Refresh() {

        var LoanID = $("#LoanID").val();

        if (parseInt(LoanID) != 0) {
            $('#ShouldGeneratePdf').val(false)
            document.forms[0].submit();
        }
        else {
            alert("Please enter a LoanId");
        }
    }

    $('#btnGeneratePDF').click(function () {
        DisableGeneratePDF();
        $('#ShouldGeneratePdf').val(true)
    });

    function DisableGeneratePDF() {
        $('#btnGeneratePDF').attr("disabled", true);
        $('#btnRefresh').attr("disabled", true);
    }

</script> 
```

Controller: When coming back from the js, the model.ShouldGeneratePdf value appears to be false when it should be true.

```
 if ((submitbutton == "Refresh") || (submitbutton == null) && (model.ShouldGeneratePdf == false)) 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-08T20:20:10.523

曾经遇到过类似的问题。

你首先应该确定的是，

托管服务器上包含所有 JS/JQuery 所需文件。

尝试使用这种类型的语句来引用源文件，ResolveClientUrl("~/folder/js.js")。

我相信这可以解决问题。如果还不行，那么你可以尝试改变JScode的位置，在head部分尝试一下是否有效，如果在body部分不尝试，你可以在body的开头尝试，在body部分尝试一次正文标签的结尾。

如果这有效，那很好，否则，目前不知道。

# sql - How can I check one table for an entry but use default value if it doesn't exist?

> ID：13297046
> 
> 赞同：0
> 
> 时间：2012-11-08T20:14:31.803
> 
> 标签：sql, sql-server, stored-procedures, join

I have 2 tables. `TableA` has columns **OldLogin** and **NewLogin**. `TableB` has **ID**, **IsManager**, and **CanChange**.

I'm writing a stored procedure with an input parameter `login`. It needs ultimately return all columns in `TableB` where `login = ID` but it first needs to check `TableA` to see if it needs to use **NewLogin**.

So, can someone help me write a query that says "show me all columns in `TableB` where ID = (login OR NewLogin)"?

Thanks!

EDIT: Added code:

```
DECLARE @login varchar(30) = 'test'

SELECT ISNULL(NewLogin, @login) AS NewLogin, TableB .IsManager, TableB.CanChange
FROM TableA
LEFT JOIN TableB ON TableB.ID = ISNULL(NewLogin, @login)
WHERE OldLogin = @login 
```

THe above code works only if @login exists in TableA. I get no results if it doesn't exist in that table.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T20:31:20.443

如果 a 为空，则使用 IFNULL(a,b) 返回 b。

编辑：我假设 mysql，不确定它是否适用于其他语言。您也可以使用 COALESCE，它接受任意数量的参数并返回第一个非空参数。

```
DECLARE @login varchar(30) = 'test'

SELECT IFNULL(TableA.NewLogin, @login) AS NewLogin, TableB.IsManager, TableB.CanChange
FROM TableA
LEFT JOIN TableB ON 
  TableB.ID = IFNULL(TableA.NewLogin, @login)
WHERE OldLogin = @login 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T10:33:47.513

```
DECLARE @login varchar(30) = 'test'
SELECT DISTINCT TableB.*
FROM TableA
  INNER JOIN TableB ON TableB.ID = NewLogin OR TableB.ID = @login 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T20:16:20.103

if I'm understanding that correctly...

```
SELECT TableB.*
FROM TableB
LEFT JOIN TableA ON TableB.id IN (TableA.OldLogin, TableB.NewLogin) 
```

?

# java - 休眠命名查询

> ID：13297049
> 
> 赞同：0
> 
> 时间：2012-11-08T20:14:54.200
> 
> 标签：java, spring, hibernate, named-query

我想将值传递给 NamedQuery。我从一个视图中选择，我在 xml 文件中的 namedQuery 如下所示：

```
<sql-query name="findAll">
      <return alias="RcvrGroup" class="com.app.rcvp.model.RcvrGroup"/>
      <![CDATA[select * from abc.RCVR_GROUP_VW]]>
      </sql-query> 
```

在我的 DAO 中，我只使用 findByNamedQuery

```
public List<RcvrGroup> findAllErrorVar(){
    return getHibernateTemplate().findByNamedQuery("findAll");
} 
```

现在，如果我有一个“where”子句并且我的查询如下所示：

```
<sql-query name="findAll">
          <return alias="RcvrGroup" class="com.app.rcvp.model.RcvrGroup"/>
          <![CDATA[select * from abc.RCVR_GROUP_VW where rcvr_mgr=:rcvr_mgr]]>
          </sql-query> 
```

我将如何执行并传递返回列表的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T20:19:33.543

更改查询以使用占位符，`?`例如

```
 <sql-query name="findAll">
      <return alias="RcvrGroup" class="com.app.rcvp.model.RcvrGroup"/>
      <![CDATA[select * from abc.RCVR_GROUP_VW where rcvr_mgr=?]]>
      </sql-query> 
```

然后将值作为第二个参数传递。

```
 return getHibernateTemplate().findByNamedQuery("findAll", "rcvr_mgr_value"); 
```

**如果需要多个参数，**您可以使用`Object[]`第二个参数来传递所有参数值的发生顺序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T20:20:27.150

```
public List<RcvrGroup> findAllErrorVar(String value){  
    return getHibernateTemplate().findByNamedQueryAndNamedParam("findAll", "rcvr_mgr", value);  
} 
```

# c# - Adjust RichTextBox font size under High DPI setting

> ID：13297050
> 
> 赞同：17
> 
> 时间：2012-11-08T20:14:54.307
> 
> 标签：c#, richtextbox, scaling, dpi

My C# application includes grids with both simple text boxes and richtext boxes. Often the richtext boxes contain rich text copied and pasted from elsewhere, and often the rtf markup includes hardcoded font size (\fsXX, XX in half points). In most cases the rich text font size is the same or close to the simple text font size.

When the DPI scaling is set to anything other than the default 96 the rich text is distorted as follows:

a) When the application is NOT set to be DPI aware the richtext is shown smaller than the simple text and is blurry.

b) When the application is set to be DPI aware the rich text is larger than the simple text.

Is there a means to allow or force the richtext to scale with the simple text, short of editing the markup directly?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-04T12:09:53.400

尝试将其属性**WordWrap**设置为**true**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-01T16:23:37.453

可能解决问题的一件事是在表单上设置 RichTextBox 并将表单的`AutoScaleMode`属性设置为`None`（[AutoScaleMode 枚举](https://msdn.microsoft.com/en-us/library/system.windows.forms.autoscalemode(v=vs.110).aspx)文档）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-03T04:00:54.750

```
<script type="text/javascript">
tinyMCE.init({
        mode: "textareas",
        theme: "advanced",
        plugins: "safari,spellchecker,pagebreak,style,layer,table,save,advhr,advimage,advlink,emotions,iespell,inlinepopups,insertdatetime,preview,media,searchreplace,print,contextmenu,paste,directionality,fullscreen,noneditable,visualchars,nonbreaking,xhtmlxtras,template,imagemanager,filemanager",
        theme_advanced_buttons1: "bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,|,styleselect,formatselect,fontselect,fontsizeselect",
        theme_advanced_buttons2: "cut,copy,paste,pastetext,pasteword,|,search,replace,|,bullist,numlist,|,outdent,indent,blockquote,|,undo,redo,|,link,unlink,anchor,image,cleanup,code,|,insertdate,inserttime,preview,|,forecolor,backcolor",
        theme_advanced_buttons3: "tablecontrols,|,hr,removeformat,visualaid,|,sub,sup,|,charmap,emotions,iespell,media,advhr,|,print,|,ltr,rtl,|,fullscreen",
        theme_advanced_buttons4: "insertlayer,moveforward,movebackward,absolute,|,styleprops,spellchecker,|,cite,abbr,acronym,del,ins,attribs,|,visualchars,nonbreaking,template,blockquote,pagebreak,|,insertfile,insertimage",
        theme_advanced_toolbar_location: "top",
        theme_advanced_toolbar_align: "left",
        theme_advanced_statusbar_location: "bottom",
        theme_advanced_resizing: false,
        template_external_list_url: "js/template_list.js",
        external_link_list_url: "js/link_list.js",
        external_image_list_url: "js/image_list.js",
        media_external_list_url: "js/media_list.js"
    });
</script>

<td class="textboxmain" style="height:300px; "><asp:TextBox id="textbox1" TextMode="MultiLine" Height="100%" runat="server" placeholder="test............"></asp:TextBox></td> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-06-25T15:49:16.133

请尝试以下方法，它仅在 .NET Framework 4.5.2 及更高版本中受支持。Microsoft 已经涵盖了更多用于 HighDpiAutoresizing 的控件。

```
<appSettings>
   <add key="EnableWindowsFormsHighDpiAutoResizing" value="true" />
</appSettings> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-04-14T05:59:15.727

也许你可以使用WPF表单，这样你就不用担心不同屏幕的de DPI了

# servicestack - 使用 JsonServiceClient 获取 HttpResult

> ID：13297061
> 
> 赞同：5
> 
> 时间：2012-11-08T20:15:41.460
> 
> 标签：servicestack

我正在使用 servicestack 的新 API 从其余服务方法之一返回 HttpResult。有没有办法使用 JsonServiceClient 获取 HttpResult？

例如：`JSonServiceClient.Send<HttpResult>("DELETE","person", new { PersonID = 30 });`

我想检查来自 httpresult 的标头信息。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T20:54:03.663

没有`HttpResult`来自 ServiceStack Web 服务的客户端响应之类的东西。

您可以使用 a`HttpResult`自定义从您的服务返回的 HTTP 响应，例如添加额外的 HTTP 标头。但是客户端看到的响应体仍然只是**响应 DTO**（如果有的话）。

使用 fiddler、wireshark、chome web 检查器（如果这是一个 Ajax 调用）或类似 ServiceStack 的[Request Logger 插件](https://github.com/ServiceStack/ServiceStack/wiki/Request-logger)来检查 HTTP 流量。

### ServiceStack 的 REST 客户端使用无效

还可以考虑使用适当的客户端 REST API 等`client.Delete()`，`client.Get()`而不是重载`T.Send()`方法（通常是 POST）。

在 ServiceClient 中使用 Typed DTO，而不是不支持的匿名类型。

### 使用 ServiceStack 服务客户端检查 HTTP 标头

ServiceStack 的服务客户端提供[本地](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.Common/ServiceClient.Web/ServiceClientBase.cs#L313)和[全局](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.Common/ServiceClient.Web/ServiceClientBase.cs#L61)WebResponse（和请求）过滤器，您可以使用这些过滤器来内省为该请求返回的 WebClient 的 HttpWebResponse，例如：

```
client.ResponseFilter = httpRes => {
   httpRes.Headers.. //do something with returned headers
};
client.Delete(new Person { Id = 30, ...}); 
```

# android - Get access to spinner options UI

> ID：13297062
> 
> 赞同：2
> 
> 时间：2012-11-08T20:15:43.483
> 
> 标签：android, android-ui, android-spinner

I'm building an Android activity that will work sort of like a tutorial. Ideally I would like to have a spinner that simulates making a selection. It will look as if someone is clicking on it and making a selection, but the user will simply watch and not be allowed to interact.

I've got to the point where I've disabled user interaction using `setClickable(false)` and opened the options using `performClick()`.

This is where I'm stuck. I don't seem to be able to access the new UI that appears with the options listed. I need to disable user interaction and programatially select one of them.

Does anyone know how to do that?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T21:01:47.190

尝试在 Spinner 上执行 requestFocus，然后向其发送击键。

# c# - Open page in a new tab from C#

> ID：13297064
> 
> 赞同：0
> 
> 时间：2012-11-08T20:15:51.127
> 
> 标签：c#, javascript, jquery, client-server

Does anybody know how to open an URL in a new tab from C# code? I have tried with

```
Response.Write("<script type='text/javascript'>window.location.href('../Documents/doc.pdf','_blank'); </script>");

Response.Write("<script type='text/javascript'>window.open('../Documents/doc.pdf','_blank'); </script>");

Response.Write("$('#pageContent_Send').click();"); 
```

with

```
$("#pageContent_Send").click(function () {
        window.open("../Documents/doc.pdf");
        return false;
    }); 
```

and it did not work, using "window.open" I get an "Pop-up Blocker" browser warning.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T20:55:26.603

```
<a href='www.xyz.com' target='_blank'>Click me to open me in new tab</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T20:18:27.937

有几个选项可以打开不会被阻止的新标签。

1.  您可以让它通过锚点单击打开 URL，如下所示`<a href="<url>" target="_blank">click me</a>`
2.  您可以将表单提交给空白目标，给出类似的结果，但来自表单。如果您需要发布，这很有用，但对于获取也很有用。像这样`<form method="get" action="<your destination>" target="_blank"><button type="submit">Click Me</button></form>`
3.  您可以使用 JS，`window.open`但它必须与活动的点击事件相关联。我在您的原始帖子中看到这被阻止了，但是如果您直接在单击事件上触发它（即不使用 setTimeout 或异步调用或其他延迟窗口打开的东西），那么这应该适用于所有浏览器。由于您试图通过强制单击来“伪造”它，因此除非您明确允许，否则浏览器每次都会阻止它。

# whitespace - Sublime Text 2：如何更改空白字符颜色？

> ID：13297068
> 
> 赞同：10
> 
> 时间：2012-11-08T20:16:20.400
> 
> 标签：whitespace, sublimetext

颜色似乎与主题中的前景有关。我认为它使用较少的alpha。有没有办法控制这个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-10-04T18:06:58.577

现在有一个 Sublime 插件。

1.  安装[HighlightWhitespaces](https://github.com/disq/HighlightWhitespaces)插件

2.  将以下颜色设置（根据您的喜好定制）添加到您的 color_scheme 文件中。该文件结束，`.tmTheme`并且可以通过查看设置文件中键“color_scheme”的值来找到路径。

    ```
    <dict>
      <key>name</key>
      <string>highlight.whitespace</string>
      <key>scope</key>
      <string>highlight.whitespace</string>
      <key>settings</key>
      <dict>
        <key>background</key>
        <string>#020202</string>
        <key>foreground</key>
        <string>#805050</string>
      </dict>
    </dict> 
    ```

3.  通过将以下内容添加到 HighlightWhitespaces 插件的用户设置中，指定应使用此颜色：

    ```
    {
        "highlight_whitespaces_space_highlight_scope_name": "highlight.whitespace",
        "highlight_whitespaces_tab_highlight_scope_name": "highlight.whitespace",
        "highlight_whitespaces_eol_highlight_scope_name": "highlight.whitespace",
        "highlight_whitespaces_mixed_highlight_scope_name": "highlight.whitespace"
    } 
    ```

4.  放松和享受 ：-）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T05:43:43.520

您可能想尝试从 Package Control 安装[PersistentRegexHighlight](https://github.com/skuroda/PersistentRegexHighlight)，然后使用空白字符正则表达式`[\x20 ]`添加特定颜色或颜色范围。

您希望将其与`drawWhiteSpace: "all",`Sublime 用户首选项结合使用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-27T02:13:06.310

[您可以通过更改前景 alpha](http://www.sublimetext.com/forum/viewtopic.php?f=3&t=6161#p27030)来更改选项卡下划线alpha 。

要更改空格的颜色，需要[更改每个语法文件](https://github.com/ckovey/sublime-whitespace-coloring)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-10-17T11:02:52.143

几年后，我在 Sublime Text 3 build 3083 中遇到了这个问题。我希望这对任何人都有帮助。除了 Chris Like 建议安装[PersistentRegexHighlight](https://github.com/skuroda/PersistentRegexHighlight)并`"draw_white_space": "all"`在用户首选项中设置选项卡和空格的一个或多个出现的模式，即`[ \t]+`在 PersistentRegexHighlight 用户设置中，我还必须设置`"color_scope": "highlight.whitespace"`以下**dict**并将其添加到主题中与**设置**数组中的其他人一起：

```
<dict>
  <key>name</key>
  <string>highlight.whitespace</string>
  <key>scope</key>
  <string>highlight.whitespace</string>
  <key>settings</key>
  <dict>
    <key>background</key>
    <string>#020202</string>
    <key>foreground</key>
    <string>#805050</string>
  </dict>
</dict> 
```

顺便说一下，如果**背景设置为黑色**，即**#000000**

请注意，此方法不需要编辑任何语法文件。

# python - 不要使用 docutils.core.publish_parts(writer_name="html") 转义 HTML

> ID：13297070
> 
> 赞同：3
> 
> 时间：2012-11-08T20:16:33.493
> 
> 标签：python, restructuredtext

我正在尝试将我的一些 HTML 内容转换为 ReStructuredText。问题是我有很多自定义 HTML，如果我必须为每件事编写一个特殊的解析器，我会放弃转换。

默认情况下：

```
text = '''
  Heading
  =======
  <p class="jQuery-addThis">Test</p>
'''
docutils.core.publish_parts(text, writer_name='html')['html_body'] 
```

转义`<`,`>`和`"`,和. `&lt;`_`&gt;``&quot;`

如何告诉`publish_parts`（或其他函数）不转换 HTML？

附加信息：

由于以下原因，我需要此功能：

*   添加这个
*   谷歌分析
*   铁饼
*   Facebook 插件
*   推特插件

我被告知要切换到 Markdown，但我宁愿使用 ReStructuredText。这可能吗？

提前致谢！

编辑：我应该在主题行中包含“没有原始指令”。我猜这是不可能的，但是如果有人知道解决方法，我会非常满意。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T20:41:52.147

您需要使用[`raw`](http://docutils.sourceforge.net/docs/ref/rst/directives.html#raw-directive)数据传递指令。您的示例将变为：

```
text = '''
  Heading
  =======
  .. raw:: html

     <p class="jQuery-addThis">Test</p>
'''
docutils.core.publish_parts(text, writer_name='html')['html_body'] 
```

您还可以考虑使用[pandoc](http://johnmacfarlane.net/pandoc/)将 HTML 自动转换为 restructuredText。

# c# - ASP:Dropdownlist OnSelectedIndexChanged 事件未触发

> ID：13297071
> 
> 赞同：0
> 
> 时间：2012-11-08T20:16:32.760
> 
> 标签：c#, asp.net

我在 UpdatePanel 中有一个非数据绑定下拉列表：

```
<asp:UpdatePanel runat="server" ID="FiltersUpdPnl">
    <ContentTemplate>
        <div class="filters">
            <asp:Button runat="server" ID="ExportBtn" Text="Export Map to Image" />
            <br />
            Show: 
            <asp:DropDownList runat="server" ID="CapNumProjectsDDL" AutoPostBack="true" OnSelectedIndexChanged="ApplyFilters" OnPreRender="CapNumProjectsDDL_PreRender">
                <%--<asp:ListItem Value="0" Text="" Selected="True"></asp:ListItem>--%>
                <asp:ListItem Value="1" Text="Capacity"></asp:ListItem>
                <asp:ListItem Value="2" Text="Number of Projects"></asp:ListItem>
            </asp:DropDownList>
        </div>
    </ContentTemplate>
</asp:UpdatePanel> 
```

事件处理程序并不是非常重要，它只是做一些事情：

```
protected void ApplyFilters(object sender, EventArgs e)
{
    //Do Stuff relating to the selected Value
} 
```

当页面加载时，默认选择“容量”，因为它是第一个 ListItem。当我关闭“项目数量”时，事件处理程序按预期触发，执行代码。但是当我切换回“容量”时，处理程序不会触发。回发正在发生，但我希望它专门针对两个列表项的事件处理程序。

您可以看到我在那里有一个注释掉的“0-value”ListItem。当我取消注释时，“容量”和“项目数量”都将按预期命中事件处理程序。

问题是当页面加载时，它正在加载与“容量”下拉列表相关的数据，所以我希望显示“容量”ListItem，但能够在选择时触发事件处理程序。

我在这里遗漏了一些明显的东西吗？

E：我尝试为 DDL_Prerender 事件添加一个处理程序，将 SelectedIndex 设置为喜欢 200 或明显不在列表中的东西，希望它会取消选择“容量”，但这也不起作用。

这是预渲染代码：

```
protected void CapNumProjectsDDL_PreRender(object sender, EventArgs e)
{
    CapNumProjectsDDL.SelectedIndex = 200;
} 
```

这并没有改变它的工作方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T21:30:47.713

即使您在下拉框中选择了已选择的项目，您似乎也希望下拉元素引发更改。我相信这行不通，问题的原因不在于服务器端的 asp.net 下拉列表控件，而在于 HTML 选择元素如何工作到哪个 DropDownList 控件呈现。

问题是，如果用户选择与显示下拉框之前相同的项目，则 HTML 选择元素不会触发更改事件（因为从控制状态的角度来看 - 它没有更改）。

所以，我相信你想要的行为可以实现，但你不应该使用 HTML 选择控件，而不是实现自定义解决方案。

# javascript - JS延迟后滚动

> ID：13297076
> 
> 赞同：2
> 
> 时间：2012-11-08T20:16:51.090
> 
> 标签：javascript, scroll, delay, smooth

我正在尝试让我的网站滚动到单独页面上的特定帖子。我认为这背后的 PHP 部分可以为我生成锚点，但是我坚持使用 JS 部分。我设法使网页从位置 0,0 开始，然后转到静态锚标记。我苦苦挣扎的是如何让 JS 从当前 URL 获取锚标记，然后在短暂延迟后使其平滑滚动到给定标记。

我目前的代码是：

```
$(document).ready(function() {
    if (location.hash) {
        window.scrollTo(0, 0);
      }
});

setTimeout("window.location.hash = '#scroll';", 5000); 
```

我发现以下片段从 URL 中获取了一个锚标记，但我不确定如何在延迟后让它执行。

```
 $(document).ready(function() {
      function filterPath(string) {
      return string
        .replace(/^\//,'')
        .replace(/(index|default).[a-zA-Z]{3,4}$/,'')
        .replace(/\/$/,'');
      }
      var locationPath = filterPath(location.pathname);
      var scrollElem = scrollableElement('html', 'body');

      $('a[href*=#]').each(function() {
        var thisPath = filterPath(this.pathname) || locationPath;
        if (  locationPath == thisPath
        && (location.hostname == this.hostname || !this.hostname)
        && this.hash.replace(/#/,'') ) {
          var $target = $(this.hash), target = this.hash;
          if (target) {
            var targetOffset = $target.offset().top;
            $(this).click(function(event) {
              event.preventDefault();
              $(scrollElem).animate({scrollTop: targetOffset}, 400, function() {
                location.hash = target;
              });
            });
          }
        }
      });

      // use the first element that is "scrollable"
      function scrollableElement(els) {
        for (var i = 0, argLength = arguments.length; i <argLength; i++) {
          var el = arguments[i],
              $scrollElement = $(el);
          if ($scrollElement.scrollTop()> 0) {
            return el;
          } else {
            $scrollElement.scrollTop(1);
            var isScrollable = $scrollElement.scrollTop()> 0;
            $scrollElement.scrollTop(0);
            if (isScrollable) {
              return el;
            }
          }
        }
        return [];
      }

    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T20:19:31.440

我不相信 setTimeout 接受任何作为字符串传递的旧代码，只接受函数名。尝试使用匿名函数：

`setTimeout(function() { window.location.hash = '#scroll'; }, 5000);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T17:35:45.060

[我设法使用我在CSS-Tricks 论坛](http://css-tricks.com/forums/discussion/comment/70154/#Comment_70154)上找到的片段解决了我的问题。它在页面加载时滚动到锚标记，总是从页面的最顶部开始。

```
$(window).bind("ready", function() {
   var urlHash = window.location.href.split("#")[1];
    $('html,body').animate({scrollTop:$('a[href="#'+urlHash+'"]').offset().top}, 1500);        
}); 
```

# python - Python etag/last modified 不起作用；如何获取最新的 RSS

> ID：13297077
> 
> 赞同：5
> 
> 时间：2012-11-08T20:16:51.387
> 
> 标签：python, feedparser

我正在尝试编写一个 python 程序，该程序将抓取并显示自上次运行程序以来的任何 rss 更新。我正在使用[feedparser](http://packages.python.org/feedparser/index.html)并尝试使用 etags 并按照[SO 上的描述进行](https://stackoverflow.com/questions/4924781/do-nothing-if-rss-feed-hasnt-changed)最后修改，但我的测试脚本似乎无法正常工作。

```
import feedparser
rsslist=["http://skottieyoung.tumblr.com/rss","http://mrjakeparker.com/feed/"]
for feed in rsslist:
print('--------'+feed+'-------')
d=feedparser.parse(feed)
print(len(d.entries))
if (len(d.entries) > 0):
    etag=d.feed.get('etag','')
    modified=d.get('modified',d.get('updated',d.entries[0].get('published','no modified,update or published fields present in rss')))

    d2=feedparser.parse(feed,modified)
    if (len(d2.entries) > 0):
        etag2=d2.feed.get('etag','')
        modified2=d2.get('updated',d.entries[0].get('published',''))

    if (d2==d): #ideally we would never see this bc etags/last modified would prevent unnecessarily downloading what we all ready have.
        print("Arrg these are the same") 
```

老实说，我不确定 rss/xml 技术是否与我在网上使用的参考资料有所不同，或者我的代码是否有问题。

无论如何，我正在寻找有效使用 rss 提要的最佳解决方案。就目前而言，我希望最大限度地减少带宽浪费，例如使用 last-modified 和 etags 字段。

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-08T21:28:56.497

您的问题是您正在传递最后修改日期来代替`etag`. `etag`是方法的第二个参数，`parse()`是`modified`第三个参数。

代替：

```
d2=feedparser.parse(feed,modified) 
```

做：

```
d2=feedparser.parse(feed,modified=modified) 
```

查看源代码后，似乎传递`etag`或传递`modified`给`parse()`函数的唯一事情是将适当的标头发送到服务器，以便服务器可以在没有任何更改的情况下返回空响应。如果服务器不支持这一点，那么服务器将只返回完整的 RSS 提要。我会修改您的代码以检查每个条目的日期，并忽略日期小于上一个请求中最大日期的日期：

```
import feedparser
rsslist=["http://skottieyoung.tumblr.com/rss", "http://mrjakeparker.com/feed/"]

def feed_modified_date(feed):
    # this is the last-modified value in the response header
    # do not confuse this with the time that is in each feed as the server
    # may be using a different timezone for last-resposne headers than it 
    # uses for the publish date

    modified = feed.get('modified')
    if modified is not None:
        return modified

    return None

def max_entry_date(feed):
    entry_pub_dates = (e.get('published_parsed') for e in feed.entries)
    entry_pub_dates = tuple(e for e in entry_pub_dates if e is not None)

    if len(entry_pub_dates) > 0:
        return max(entry_pub_dates)    

    return None

def entries_with_dates_after(feed, date):
    response = []

    for entry in feed.entries:
        if entry.get('published_parsed') > date:
            response.append(entry)

    return response            

for feed_url in rsslist:
    print('--------%s-------' % feed_url)
    d = feedparser.parse(feed_url)
    print('feed length %i' % len(d.entries))

    if len(d.entries) > 0:
        etag = d.feed.get('etag', None)
        modified = feed_modified_date(d)
        print('modified at %s' % modified)

        d2 = feedparser.parse(feed_url, etag=etag, modified=modified)
        print('second feed length %i' % len(d2.entries))
        if len(d2.entries) > 0:
            print("server does not support etags or there are new entries")
            # perhaps the server does not support etags or last-modified
            # filter entries ourself

            prev_max_date = max_entry_date(d)

            entries = entries_with_dates_after(d2, prev_max_date)

            print('%i new entries' % len(entries))
        else:
            print('there are no entries') 
```

这会产生：

```
--------http://skottieyoung.tumblr.com/rss-------
feed length 20
modified at None
second feed length 20
server does not support etags or there are new entries
0 new entries
--------http://mrjakeparker.com/feed/-------
feed length 10
modified at Wed, 07 Nov 2012 19:27:48 GMT
second feed length 0
there are no entries 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-21T21:48:06.873

I would suggest using the `Date` in the `header` as a fallback if there is no `etag` or `modified` information in the feed.

Use `feed['headers']['Date']` which can be used like this.

`feedparser.parse(url, modified=feed['headers']['Date'])`

**Edit**: But it looks like that some servers ignoring the `modified` parameter.

# mysql - 来自远程计算机的 MySQL 服务器

> ID：13297078
> 
> 赞同：1
> 
> 时间：2012-11-08T20:16:52.753
> 
> 标签：mysql, c#-4.0, firewall

如何公开在生产服务器（具有互联网连接）中运行的 MySql 服务器，以便我可以从数据中心的外部计算机连接到公司网络？以及如何修改我的 WinForm 应用程序中的连接字符串？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T20:25:36.443

使您的数据库在外部可用确实是 DBA 的一项练习，或者如果这是您对[https://dba.stackexchange.com/](https://dba.stackexchange.com/)或可能是[https://serverfault.com/的问题](https://serverfault.com/)

话虽如此，您的连接字符串实际上是相同的 - 您只需指向外部可访问的 IP 地址。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T20:26:19.083

我有一个类似的问题。我的域名托管服务商有一个允许公开该服务器的设置。我所要做的就是“选中”那个框（说明我喜欢为 MySQL 使用外部连接）。这样做会给我一个 IP 地址（和其他连接参数），我可以用它来连接到 MySQL。检查你的主机。

# javascript - 如何将一个巨大的 div 拆分为多个 div？

> ID：13297080
> 
> 赞同：2
> 
> 时间：2012-11-08T20:17:11.983
> 
> 标签：javascript, jquery, html, css

我有一个任务，我不确定如何最好地完成它。所以我想要一些意见或建议:)

好的，这就是我需要做的。

我有一个内容被发送到打印的页面（它包含图像和 div、p、span、h1、h2、h3、hr、a 等标签中的文本）。假设它大约有 1500 像素高。

我有一个容器 div 说 300 x 500 像素。

我需要获取包含所有内容的页面，并将该内容拆分为 div。

所以：

```
_______________
|              |
|              |
|              |
|   Content    |
|              |
|              |
|              |
|______________| 
```

进入：

```
_______________
|   Part 1     |
|______________|
|   Part 2     |
|______________|
|   Part 3     |
|______________|
|   Part 4     |
|______________| 
```

但是我的问题是如何在页面上获取一个包含多个元素的巨型对象并通过它并确定该 div 应该被切成两半并放置在第 1 部分和第 2 部分中，因为它无法放入剩余空间在第 1 部分？我如何确定剩下的和没有的？

我的想法是将body标签的全部内容读入一个变量，循环遍历每个元素并将其添加到另一个有剩余空间的变量中，我可以根据DOM元素的高度和宽度来确定。但我不确定这是否是最好的主意。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T22:29:31.693

如果使用蛮力类型的方法不是不可能的，那么使用类似以下的方法应该可以：

*   将所有内容放入 div 1
*   开始将 div 1 中的东西放入 div 2 直到 div 1 的大小正确
*   重复 div 2 的过程

另一种方法是遍历 div 中的每个节点，对总高度求和，直到超过限制。此时，退后一步，开始将内容移动到下一个 div，重复该过程。

如果您的页面在单个文本节点中有很多文本，那么可能会有点棘手。您很可能需要实现某种系统来拆分文本节点，以便能够计算单个文本块的高度并能够在 div 之间拆分它们。

# objective-c - 在 iPhone 上导入文件（例如 CSV 文件）时，可以更改视图吗

> ID：13297082
> 
> 赞同：0
> 
> 时间：2012-11-08T20:17:26.113
> 
> 标签：objective-c, ios, import

我正在尝试创建一个可以在其中导入文件的应用程序。它设置在 iOS 部署目标为 5.1 的故事板上。标签栏已经设置好故事板。

我想更改视图，以便当用户有他们希望导入的文件（例如从电子邮件）时，应用程序将视图切换到选项卡栏上的另一个页面。

当我尝试`viewDidLoad`在选项卡栏的初始页面上进行设置时，它不起作用，因为该功能没有被读取。

我应该怎么办？

我应该更改`applicationDidBecomeActive`方法中的 AppDelegate 吗？如果是这样，是在方法`applicationDidBecomeActive`之前还是之后读取`application:application openURL:url sourceApplication:sourceApplication annotation:annotation`？

我应该更改初始页面的代码吗？如果是这样，当我导入文件时会调用什么？

这是一些代码：

```
#import "AppDelegate.h" 
```

...

```
-(BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication annotation:(id)annotation
{
    if (url != nil && [url isFileURL]) {
        [self handleOpenURL:url];        
    }

    return YES;
}

-(void)handleOpenURL:(NSURL *)url {
    NSError *outError;
    NSString *fileString = [NSString stringWithContentsOfURL:url
                                                    encoding:NSASCIIStringEncoding
                                                       error:&outError];
    file = fileString;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T00:36:50.273

在打开文件方法中执行页面更改调用

```
- (void)performSegueWithIdentifier:(NSString *)identifier sender:(id)sender
//Initiates the segue with the specified identifier from the view controller’s storyboard file. 
```

# wpf - 如何捕获 wpf 中特定控件的 mousedown 事件并在窗口中的任何位置释放？

> ID：13297087
> 
> 赞同：0
> 
> 时间：2012-11-08T20:17:38.900
> 
> 标签：wpf, drag-and-drop, mouseevent

基本上我有以下xaml：

```
<Window ...>
   <StackPanel>
       <my:UserControl> ... </my:UserControl>
       <my:UserControl> ... </my:UserControl>
   </StackPanel>
</Window> 
```

1.  如果我的鼠标左键单击我想捕获 X/Y 坐标。
2.  只要鼠标在窗口内，我就想捕获当前的 MouseX/MouseY。
3.  我想在每次按住左键单击鼠标移动时触发的事件中使用该捕获。

这有点像拖放，但不一定是拖放......如果使用拖放可以解决这个问题，那很好，我会使用它。但是，我不确定从哪里真正开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T21:18:05.067

在窗口的 Mousemove 事件上设置一个处理程序，从 mouseevent args 检查鼠标按钮状态。还有一种方法可以检查您的用户控件是否命中了某个元素。你想在发布时做什么？根据您想要执行的操作，您可以使用事件触发器。然而，这些往往在使用中受到限制。

# kentico - 将外部样式表添加到页面模板标题 Kentico CMS 7

> ID：13297088
> 
> 赞同：0
> 
> 时间：2012-11-08T20:17:39.737
> 
> 标签：kentico

我有一个简单的问题，但在过去的几个小时里，我一直在试图解决这个问题，但没有运气，也没有得到 Kentico 支持团队的回应。

刚刚将 Kentico CMS 从 6 升级到 7，现在在加载 css 时遇到了问题，这些问题过去只是在单个页面模板中调用。我决定尝试在站点管理器 > 开发 > 页面模板 > 我的模板 > 标题选项卡中添加 css 链接。这显然应该根据 Kentico 网站上的帖子工作，但无论我做什么，我都无法为该模板加载 css 文件。

css 的链接标签的格式应该正确，但如果 Kentico 做了一些疯狂的事情，这里是

```
<link type="text/css" rel="Stylesheet" href="../_SalesPad/Stylesheets/_HomeMini.css" /> 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T01:11:21.437

如果我添加您的标签，这似乎对我有用。

您能否确保在页眉选项卡上的母版页中勾选“允许子模板继承当前页眉”。

# jquery - 滚动到元素

> ID：13297089
> 
> 赞同：0
> 
> 时间：2012-11-08T20:17:49.393
> 
> 标签：jquery

如何确定文本标签与单击的元素匹配的元素的索引号？

我有一个清单：

```
<ul>
  <li data-cont="item one">this is one</li>
  <li data-cont="item 2">this is second</li>
  <li data-cont="one more">this is another one</li>
</ul>

...

<div>item one</div>

<div>item 2</div>

<div>one more</div> 
```

单击其中一个 LI 时，我的屏幕需要在页面稍后向下滚动到匹配的 DIV 之一。

```
$('#li').click(function(){
    var scrollNow = $(this).attr('data-cont');
    $('html, body').animate({
        scrollTop: $( 

        // here I need to scroll down to the item by index...

        ).offset().top
    }, 500);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T20:20:09.023

获取 div 的索引很容易：

```
var index = $('div').filter(function(){
   return $(this).text().trim()==scrollNow}
).index(); 
```

（我不使用`:contains`，因为它可以匹配太多的 div）

但我看不出你为什么想要这个索引。

如果你想滚动到 div，你只需要做

```
var div = $('div').filter(function(){
   return $(this).text().trim()==scrollNow}
);
$('html, body').animate({
    scrollTop: div.offset().top
}, 500); 
```

# php - 如何在 php 中使用 fetchAll？

> ID：13297094
> 
> 赞同：2
> 
> 时间：2012-11-08T20:18:19.350
> 
> 标签：php, sql, fetchall

我正在使用此语句来获取数据库中列中的元素

```
$result = $stmt->fetchAll(PDO::FETCH_COLUMN, 0); 
```

但是在尝试运行它时出现此错误。

调用未定义的方法`mysqli_stmt::fetchAll();`

我需要添加到我的 php 文件中以包含该方法或其他内容吗？

更新 1：

```
class LoginAPI
{
private $db;

function __construct() 
{
    $this->db = new mysqli('xxx', 'xxx', 'xxx', 'xxx');
    $this->db->autocommit(FALSE);
}

function __destruct() 
{
    $this->db->close();
}

function login() 
{
    if(isset($_POST["lang"]))
    {
        $stmt = $this->db->prepare("SELECT code FROM locations");
        $stmt->execute();
        $stmt->bind_result($code);

        //while($stmt->fetch())
        //{
        //  result[] = "code"=>$code;
        //  break;
        //}
        $codeArr = array();
        $result = $stmt->fetch_all();//|PDO::FETCH_GROUP;

        sendResponse(200, json_encode($result));
        return true;
    }
    sendResponse(400, 'Invalid Request');
    return false;
}
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-08T20:27:49.453

您正在使用 mysqli，并且您得到了一个语句而不是结果。如果你有一个 mysqli_result 你可以使用这个方法`fetch_all()`。

但是，由于这是一个 mysqli_stmt，您首先需要执行然后`fetch_all()`在结果集上使用。见下面的例子

```
 $stmt = $this->db->prepare("SELECT code FROM locations");
 $stmt->execute();

//grab a result set
$resultSet = $stmt->get_result();

//pull all results as an associative array
$result = $resultSet->fetch_all(); 
```

注意：使用 fetch_all 您不需要将结果绑定为原始代码。

# richfaces - 在 RichFaces 的扩展数据表中添加单选按钮列

> ID：13297097
> 
> 赞同：2
> 
> 时间：2012-11-08T20:18:24.380
> 
> 标签：richfaces

我的目标是添加 an 的第一列，`extendedDataTable`其中每一行都有一个单选按钮。然后，用户可以选择他们想要对其执行操作的行。我无法找到一种在表定义中实现它的方法，也找不到一种方法来单独创建一个丰富的列来保存单选按钮。有什么建议吗？这是表定义代码。

```
<rich:extendedDataTable 
    style="width: 800px; height: 150px;" 
    rowClasses="Row0,Row1" 
    value="#{value}" 
    var="exception" 
    selectionMode="single" 
    id="Table" 
    selection="#{selection}"
> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T10:45:26.647

```
<rich:extendedDataTable value="#{projectCreation.creationModel.resourceModelList}"
                            var="availableResource" id="availableResourceTable" 
                            selectionMode="none" noDataLabel="Record not found" >
                    <rich:column>
                       <f:facet name="header" >
                            <h:outputText value="select"/>
                        </f:facet>

                         <h:selectBooleanCheckbox value="#{availableResource.selected}">
                            <f:ajax/>
                        </h:selectBooleanCheckbox>                 

                    </rich:column>
                    <rich:column >
                        <f:facet name="header">
                            <h:outputText value="Employee Id"/>
                        </f:facet>
                        <h:outputText value="#{availableResource.employeeId}"/>
                    </rich:column>
                    <rich:column id="employeeName">
                        <f:facet name="header">
                            <h:outputText value="Employee Name"/>
                        </f:facet>
                        <h:outputText value="#{availableResource.employeeName}"/>
                    </rich:column>
                    <rich:column>
                        <f:facet name="header">
                            <h:outputText value="Group"/>
                        </f:facet>
                        <h:outputText value="#{availableResource.group}"/>
                    </rich:column>
                    <rich:column>
                        <f:facet name="header">
                            <h:outputText value="Start Date"/>
                        </f:facet>
                        <h:outputText value="#{availableResource.startDate}"/>
                    </rich:column>
                    <rich:column>
                        <f:facet name="header">
                            <h:outputText value="End Date"/>
                        </f:facet>
                        <h:outputText value="#{availableResource.endDate}"/>
                    </rich:column>

                    <rich:column>
                        <f:facet name="header">
                            <h:outputText value="Loading"/>
                        </f:facet>
                        <h:outputText value="#{availableResource.loading}"/>
                    </rich:column>

                </rich:extendedDataTable> 
```

# regex - 替换匹配而不越过其他匹配

> ID：13297099
> 
> 赞同：0
> 
> 时间：2012-11-08T20:18:28.513
> 
> 标签：regex

现在我正在使用`{{.+?}}`（在 Python 中与 re，为了它的价值）来匹配`{{text}}`，但问题是有时会发生这种情况：`{{ text {{text}} text }}`. 在正则表达式文献中，我已经看到了解决这个问题的方法，但我无法让它发挥作用。任何建议将不胜感激！

编辑：目标是让它全选，而不仅仅是中间部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T20:33:57.220

您可以使用负前瞻：`{{(?:(?!{{).)+?}}`

[编辑]

如果它们最多可以嵌套一层，如`{{ text {{text}} text }}`，您可以使用：

```
{{[^{}]*(?:{{[^{}]*}}[^{}]*)*}} 
```

如果它们可以是任意级别的深度，则需要一个递归正则表达式，Python 的 re 模块不支持。但是，这里的正则表达式模块可以：http: [//pypi.python.org/pypi/regex](http://pypi.python.org/pypi/regex)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T20:29:07.167

我认为您需要使用否定字符类，如下所示：

```
\{\{[^\}\{]+\}\} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T20:51:05.153

您应该尝试使用正则表达式模式

```
\{{2}(?:[^{}]+|(?<!\})\}(?!\})|(?<!\{)\{(?!\{)|\{{2}\}{2})\}{2} 
```

# msysgit - 如何在 Apache 托管的 Windows 上的 msysgit 上执行接收后挂钩？

> ID：13297100
> 
> 赞同：4
> 
> 时间：2012-11-08T20:18:40.050
> 
> 标签：msysgit

我正在 Windows 主机上设置 Git 服务器。我已经安装了最新的 Apache，并让它与 msysGit 一起工作。我根本没有使用 SSH；我可以通过 HTTP 推送和拉取。

现在我想添加一个接收后挂钩来通知我的构建服务器，但我不知道该怎么做。我在服务器的存储库中看到了示例挂钩脚本，但我对在那里做什么感到困惑。我是放一个 Windows 批处理文件，命名为`post-receive.bat`，还是做其他事情？

我对这一切在做什么的细节有点模糊，但是当 Apache 看到 Git URL 时，它正在执行 c:\Program Files\git\libexec\git-core\git-http-backend.exe。git-http-backend.exe 会触发 post-receive 钩子吗？

**更新** 我越来越近了。这是我的钩子，`hooks/post-receive`在我的回购中：

```
#!/c/Program Files/Git/bin/sh
curl http://mybuildserver:8080/job/Whazzup/build 
```

我改变了shebang，`#!/bin/sh`因为在Windows上我没有。现在在 Apache 错误日志中，我收到了消息`error: cannot spawn hooks/post-receive: No such file or directory`

顺便说一句，Git bash`chmod`似乎不起作用。`post-receive`但是我能够`rwxr-xr-x`通过重命名示例文件来获得权限。

**更新** 我将 shebang 行改回`#!/bin/sh`，但我仍然在 Apache 错误日志中得到相同的错误`error: cannot spawn hooks/post-receive: No such file or directory`：作为测试，我在 hooks 文件夹中打开了一个 Git bash 提示符，并使用 执行了该钩子`./post-receive`，并且它起作用了。

**更新** 现在我想知道我是否有其他问题。听从 VonC 的建议，我尝试在我自己的帐户下从命令行运行 Apache httpd，而不是作为 LocalSystem 下的服务。还是一样的。推拉工作正常，但钩子不执行。然后我试着让 Apache 脱离这个等式。在与 repo 相同的计算机上，我从 Git bash 提示符进行了克隆（通过文件系统）、修改、提交和推送。但是钩子仍然没有执行。

**更新** 好的，我的钩子脚本中有一个愚蠢的问题，但现在至少当我从同一台计算机（通过文件系统）推送到 repo 时它会执行。但不是当我推动 Apache 时。Apache 现在在一个普通帐户下运行，并且 Apache 帐户可以完全控制存储库。推送工作正常，但 post-receive 挂钩不执行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T18:17:57.783

> Apache`c:\Program Files\git\libexec\git-core\git-http-backend.exe`在看到 Git URL 时正在执行。`git-http-backend.exe`会触发 post-receive 钩子吗？

不，它会将命令 ( `clone`, `push`, `pull`) 传递给`git`它自己。
该[`post-receive`钩子](http://git-scm.com/book/en/Customizing-Git-Git-Hooks#Server-Side-Hooks)将在推送完成后执行，它是一个*bash* (unix shell) 脚本，如“ [Windows 上的 post-receive hook - GIT_WORK_DIR: no such file or directory](https://stackoverflow.com/questions/8193729/post-receive-hook-on-windows-git-work-dir-no-such-file-or-directory) ”所示。

另请参阅“ [git windows post pull](https://stackoverflow.com/questions/6286982/git-windows-post-pull) ”以查看可以在哪里创建该`post-receive`脚本（在`.git/hooks`您的存储库中）：它与存储库前面的 http Apache 服务无关。

* * *

关于错误信息“cannot spawn hooks/post-receive: No such file or directory”，可以参考“ [msysgit error with hooks:”git error: cannot spawn .git/hooks/post-commit: No such file or directory “](https://stackoverflow.com/questions/5697210/msysgit-error-with-hooks-git-error-cannot-spawn-git-hooks-post-commit-no-su) ”：

*   shebang 必须是`#!/bin/sh`
*   Apache 必须作为普通用户而不是本地系统运行，以便从为所述普通用户定义的环境变量中受益。
*   `<path_to_git>\bin`必须在`PATH`

# msbuild - DBProj 中的自定义 MSBuild 任务

> ID：13297101
> 
> 赞同：0
> 
> 时间：2012-11-08T20:18:58.537
> 
> 标签：msbuild, msbuild-task, visual-studio-dbpro, dbproj

我为我们的数据库项目创建了一个自定义 MSBuild 任务。此任务使用 XLSX 文件生成参考数据插入脚本，这些脚本会合并到部署后脚本中。

我用测试 MSBuild proj 对此进行了测试，它运行良好。

现在，当我将它集成到真正的 DBProj 文件中时，任务的输出是重复的，我看不到 MSBuild 输出日志记录。

所以，我的问题是：

1) 如何在 Visual Studio 中查看完整的 MSBuild 日志？2）我不确定 AfterBuild 或 BeforeBuild 是否运行了两次，但也许？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T21:50:51.223

您可以调试您的 MSBuild 脚本、设置断点、检查值等...请参见此处：http: [//blogs.msdn.com/b/visualstudio/archive/2010/07/06/debugging-msbuild-script-with-视觉工作室.aspx](http://blogs.msdn.com/b/visualstudio/archive/2010/07/06/debugging-msbuild-script-with-visual-studio.aspx)

# javascript - 验证下拉菜单 JavaScript

> ID：13297102
> 
> 赞同：0
> 
> 时间：2012-11-08T20:18:59.873
> 
> 标签：javascript, forms, validation

我正在使用一个使用 JavaScript 验证字段的联系表单在现有站点上工作。原始开发人员编写了 JavaScript，但没有正确验证其中一个字段。该字段是一个下拉列表，它有一个他们不想选择的默认值，所以如果选择默认选项以强制用户进行选择，我需要它返回无效响应。

任何帮助将不胜感激。

```
// Check to make sure Area of Interest is Valid
   var areaVal = $("#req_area").val();
   var areaRegexObj = /^\s*[\w\s]*\s*$/;

   if (areaRegexObj.test(areaVal)) {
      isValid = (isValid == false) ? false : true;
   } else {
      $("#req_area").val("Please specify your Area of Interest");
      isValid = false;
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T20:34:30.933

尝试

```
var areaVal = $("#req_area option:selected").val();

if (!areaRegexObj.test(areaVal))
    $("#req_area").val("Please specify your Area of Interest"); 
```

进行服务器端验证（如果还没有）是个好主意，这样用户就不会禁用 JS 并提交表单。

# java - 我是否需要 pentahose 服务器来自动运行数据集成 (Kettle) 转换？

> ID：13297106
> 
> 赞同：0
> 
> 时间：2012-11-08T20:19:07.883
> 
> 标签：java, xml, transformation, kettle

我正在考虑使用 pentahose 来帮助我转换来自多个来源的不同 xml 文件，以将数据集成到我的系统中。这些 xml 由 java 程序每 10 分钟从 Internet 下载一次。如果我想使用 Kettle 转换数据，是否需要 Pentahose 服务器来运行转换？或者有没有办法将转换导出到 java 类以便我可以使用它们？我会很感激任何类型的方向:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T13:08:54.547

如果你想运行转换，你只需要命令控制台 pan.sh，如果你要运行作业，你需要执行 kitchen.sh 命令。看看 carte.sh 服务器，它是一个独立的网络服务器，允许您将转换和作业远程发送到另一台机器。（内联网、互联网）。

回答您关于 java 代码的其他问题：不，kettle 不会根据您的转换和作业生成 java 代码，只会生成 xml。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T21:41:42.703

你不需要服务器。您可以使用 Kitchen 命令行运行您的 Kettle 作业。您可以轻松地设置一个 cron 作业以按设定的时间间隔执行您的作业。

[http://wiki.pentaho.com/display/EAI/Kitchen+User+Documentation](http://wiki.pentaho.com/display/EAI/Kitchen+User+Documentation)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-14T12:14:39.073

要运行转换和作业，您需要使用 pan 和 kitchen（linux 的 sh 版本和 windows 的 bat）阅读此处[http://infocenter.pentaho.com/help/index.jsp?topic=%2Fpdi_user_guide%2Fconcept_cli_scripting.html](http://infocenter.pentaho.com/help/index.jsp?topic=%2Fpdi_user_guide%2Fconcept_cli_scripting.html)。如果您想直接从 java 中运行转换/作业，您需要将“lib”和“libswt”（以及某些版本的kettle 的libext）导入您的java 项目并使用kettle 的java API：

```
 KettleEnvironment.init();
    JobMeta jobMeta = new JobMeta("job path",null);
    jobMeta.setParameterValue("param name",value);
    Job job = new Job(null,jobMeta);
    job.setLogLevel(LogLevel.BASIC);
    job.start();
    job.waitUntilFinished();
    Result result = job.getResult();
    if (!result.getResult()){
         //manage the error case
    } 
```

这是一个使用java API的例子，kettle是用java制作的，所以它是完全可集成的

# objective-c - 从文件 Xcode 解析 HTML 表

> ID：13297110
> 
> 赞同：0
> 
> 时间：2012-11-08T20:19:11.477
> 
> 标签：objective-c, html-table, html-parsing, hpple

我对“Hpple”有疑问。我正在解析 html 文件，我想获取整个表，但我得到的结果 (null)

我在 Objective-C 中的代码：

```
-(void)loadTutorials {

    // 1

    paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    filePath = [NSString stringWithFormat:@"%@/%@", [paths objectAtIndex:0],@"index.html"];

    NSData  *data = [NSData dataWithContentsOfFile:filePath];

    // 2
    TFHpple * doc   = [[TFHpple alloc] initWithHTMLData:data];

    // 3
    NSString *tutorialsXpathQueryString = @"/html/body/div/table/tr/td[@class='bottomwideborder']"; //Next comes the big table

    NSArray *tutorialsNodes = [doc searchWithXPathQuery:tutorialsXpathQueryString];

    for (TFHppleElement *element in tutorialsNodes) {

        table = [element text];

    }

}

- (void)viewDidLoad
{
    [super viewDidLoad];

    [self loadTutorials];

    html = [NSString stringWithFormat:@"<html><body>%@</body></html>", table];

    [Web loadHTMLString:html baseURL:nil];

} 
```

我也想解析的表很长，我认为它对于 NSString 或 NSArray 来说太大了

我能做些什么来解决这个问题？

# android - Android - TextView 中围绕 word 的 html 链接使整个链接可点击。如何阻止它？

> ID：13297113
> 
> 赞同：2
> 
> 时间：2012-11-08T20:19:17.023
> 
> 标签：android, textview

我有一个应用程序，我在 TextView 中显示动态文本。文字有

```
text_view.setMovementMethod(new ScrollingMovementMethod());
text_view.setMovementMethod(LinkMovementMethod.getInstance()); 
```

在 TextView 的文本中，我有围绕特定单词的 html 链接。链接有效，但是当您用手指向下滚动页面时，您有时会意外单击该链接并意外重定向。

问题似乎是链接这个词并不是唯一可以点击的东西。页面上的整行似乎都变成了一个链接。

TextView 中的示例文本：

```
TEAM1 @ TEAM2
STATUS:  FINAL
LINK: ESPN 
```

“ESPN”应该是列表中唯一可点击的项目。

您对如何纠正此问题有任何想法吗？

添加：

这是我的布局 xml

```
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:clickable="true"
    android:orientation="vertical"
    android:visibility="visible" >

    <ImageButton
        android:id="@+id/refresh"
        android:layout_width="30dp"
        android:layout_height="28dp"
        android:layout_gravity="right"
        android:src="@drawable/ic_menu_refresh"
        android:visibility="visible" />

  <TextView
      xmlns:android="http://schemas.android.com/apk/res/android"
      android:id="@+id/widget_date"
      android:layout_width="fill_parent"
      android:layout_height="70dp"
      android:textSize="12dp"
      android:visibility="visible" />

  <TextView
      xmlns:android="http://schemas.android.com/apk/res/android"
      android:id="@+id/widget_text"
      android:layout_width="fill_parent"
      android:layout_height="fill_parent"
      android:textSize="16dp"
      android:visibility="visible" />

</LinearLayout> 
```

然后在我的代码中，我将 ESPN 一词周围的 html 链接设置为：循环数据并根据附加到更大字符串的数据创建动态链接，下面 TextView 中设置的字符串分数只是一个包含字符串“链接”的字符串" 以 html 格式。

```
String link = "LINK: " + "<a href = \""+ game.getUrl() +  "\">ESPN</a><BR><BR>");
text_view.setText(Html.fromHtml(scores)); 
```

当一切都说完了，我就有了我需要的东西。唯一的问题是，当您开始用手指向下滚动页面时，您有时会启动链接，因为链接似乎跨越了整行，包括空格。所以你的手指偶尔会不小心碰到每个人的链接。我想要的只是链接仅在您专门单击“ESPN”而不是空白处时才启动。

![在此处输入图像描述](../Images/e41edd4877a63cefd4e95a95febdd5dc.png)

将字符串更改为在结束标记后实际包含空格，使空格不再可点击。

```
"LINK: " + "<a href = \""+ game.getUrl() +  "\">ESPN</a>             <BR><BR>"); 
```

奇怪的创可贴，但它有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T03:42:00.637

Per Lt. Tuvok（因为他没有关闭它......）：我最终传递给 TextView 的字符串，虽然它包含 html 元素，但它不是 html。如果我在结束标记后包含空格，则空格不再可单击，并且只有单击“ESPN”才能转到链接。生病张贴上面我做了什么。不要认为它只是一个创可贴的永久解决方案。

# c# - C# 在 SubmitChanges() 之后更新 DataGridView

> ID：13297119
> 
> 赞同：0
> 
> 时间：2012-11-08T20:19:36.387
> 
> 标签：c#, winforms, datagridview

添加项目后，我有这段代码可以更新 dataGridView。

```
dbContext.Item.InsertOnSubmit(new Item());
dbContext.SubmitChanges();
dataGridView1.DataSource = null;
dataGridView1.DataSource = dbContext.Item; 
```

对我来说，这是一个很大的谜，为什么当我尝试多次使用它时什么都没有发生......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T20:26:07.093

我不是 100% 清楚你的经历，我会假设它的 gridview 没有显示新的附加项目。

您是否尝试过在该网格视图上调用刷新？

# keyboard - 底部的 Tabwidget 和一些 Edittext 使效果（选项卡显示在虚拟键盘上）

> ID：13297122
> 
> 赞同：1
> 
> 时间：2012-11-08T20:19:42.483
> 
> 标签：keyboard, virtual, tabwidget

有谁知道如何防止以下效果？我使用一个 Tabwidget 和每个 Tab 的多个活动。到目前为止，一切都很好。有时（并非总是如此，并且有时不同）当我进入 Edittext 视图时，我的选项卡是可见的。（选项卡显示在虚拟键盘上，所以没有太多空间可以看到）

标签是基于底部的。我的测试设备 Android 2.2 / THC

# java - 在 servlet 中管理保持活动的 http 连接

> ID：13297126
> 
> 赞同：0
> 
> 时间：2012-11-08T20:20:03.750
> 
> 标签：java, http, servlets

假设浏览器发出请求
，要求服务器保持连接处于活动
状态（连接：保持活动）。

而这个请求需要调用一个 servlet。

在我的 servlet 中，我应该注意选择发送数据的最佳方式（分块或指示
正文的长度）吗？

如果服务器为我这样做，为什么在我的 servlet 中，
我可以修改诸如
内容长度
和传输编码之类的标头？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T20:37:54.223

如果您事先知道正文长度，则应在编写正文之前设置 Content-Length 标头。

否则什么也不做；servlet 容器应该能够自动添加 Transfer-Encoding，并将你的 body 分块。这取决于客户端/请求版本和连接标头。

# ruby-on-rails - RoR 添加在哪里做循环

> ID：13297130
> 
> 赞同：0
> 
> 时间：2012-11-08T20:20:11.177
> 
> 标签：ruby-on-rails

我列出了一个名为 books 的表格的内容。为了显示所有记录，我使用： <% @books.each do |books| %>

我可以添加 where 子句以便只列出匹配的书籍吗？<% Books.where(:type_id => '1') 做 |books| %>

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T20:23:43.037

从技术上讲，您可以将其作为“Book”（我相信当我们获取模型时应该是 Book 而不是 Books）是您所指的 Activerecord 模型，但作为一种实践，您不应该这样做，因为在这里您得到了业务登录到您的视图。

通常业务逻辑应该驻留在您的模型层中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T20:24:04.817

您需要 .each 进行迭代，并且模型名称通常是单数

```
<% Book.where(:type_id => 1, :author_id => 2).each do |book| %>
  <%= book.title %>
<% end %> 
```

编辑：添加了第二个条件来查询，因为它在评论中被问到。

# python - “TypeError：choice() 正好需要 2 个参数（给定 4 个）”错误

> ID：13297131
> 
> 赞同：0
> 
> 时间：2012-11-08T20:20:11.500
> 
> 标签：python, random, syntax-error

我正在学习python的新手，我正在制作一个游戏，我在linux的终端中遇到了一个问题，如下所示：

```
Traceback (most recent call last):
File "oyun.py", line 30, in <module>
Pc=random.choice("tas","kagit","makas")
TypeError: choice() takes exactly 2 arguments (4 given) 
```

你能告诉我有什么问题吗？我该怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T20:21:44.930

你需要给它一个列表。例如：

```
Pc=random.choice(["tas","kagit","makas"]) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T20:26:15.810

如果您查看文档，您会看到方法 random.choice 采用一个参数，即包含要从中选择的值的*seq 。*因此，在这种情况下，将可能的选择包装到一个列表中。

还有一件（重要的）事情：尽管看起来您提供了三个参数，但解释器却抱怨四个（并要求两个）。这是因为调用该方法的对象（在本例中为“随机”）是该方法的隐式第一个参数。

HTH，--ag

# android - 打开不同类中的单选按钮

> ID：13297133
> 
> 赞同：-1
> 
> 时间：2012-11-08T20:20:15.263
> 
> 标签：android, class, login, radio-button, sharedpreferences

我正在android中构建一个登录系统，我需要完成以下工作：

*   将用户数据保存在本地存储中
*   当创建用户并且我按下按钮时，它需要动态创建一个带有用户名和短名称的单选按钮。

我已经设法完成了这些事情，但我现在唯一的问题是我想要有 2 个类，一个是您注册帐户的地方，另一个是显示带有用户数据的单选按钮的地方。所以我的问题是：我如何对 calss 进行编程，以便当我按下注册按钮时，它会在不同的类中创建单选按钮。

下面是类的代码：

```
enter code here

@Override
public void onClick(View v) {
    // TODO Auto-generated method stub
    switch (v.getId()) {
    case R.id.Save:

        Intent I = new Intent();
        I.putExtra(
        I.setClass(this, ShowUsers.class);
        startActivity(I);
        break;

    }

} 
```

}

```
@Override
public void onClick(View v) {
    // TODO Auto-generated method stub
    // Start other Activity
    switch (v.getId()) {
    case R.id.create:
        Intent intent = new Intent();
        intent.setClass(Main.this, Register.class);
        startActivity(intent);
        break;

    }

    Bundle extras = getIntent().getExtras(); 
    String userName;

    if (extras != null) {
        userName = extras.getString("editTextName,editTextPassword,editTextshortname");
        // and get whatever type user account id is
    }

} 
```

}

当我单击保存按钮时，它需要在主类中创建单选按钮，现在的问题是我该如何完成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T20:22:29.047

如果第二个类是 Activity，那么一种解决方案是向其发送`Intent`创建单选按钮所需的数据。为此，您可以创建一个`Intent`对象，调用其任何`setExtra()`方法，然后`startActivity()`使用`Intent`. 查看 Android API 文档了解更多详细信息。

# vb.net - HtmlAgilityPack：如何将 html 元素组合成一个带有类的标签？

> ID：13297135
> 
> 赞同：0
> 
> 时间：2012-11-08T20:20:18.983
> 
> 标签：vb.net, html-agility-pack

**问题：** 我需要使用 HtmlAgilityPack 检查一些 HTML 元素并组合标签名称。是否可以提取从父级到子级的每个标签，并将其替换为具有名称为“strikeUEmStrong”的类的跨度。此外，名称会根据 HTML 元素而变化。

类名的顺序确实很重要，我通过反复试验意识到了这一点。只要它能够获取所有元素并将它们组合在一起。它很可能会有多个具有不同格式级别的文本节点。

这将影响多个段落。

例如，如果我有这个 html 代码：

```
<p>
<strike><u><em><strong>four styles</strong></em></u></strike></p> 
```

如何将其转换为：

```
<p>
<span class="strikeUEmStrong">four styles</span></p> 
```

也可能有这种类型的代码：

```
<p>
    <strike><u><em><strong>four styles</strong></em></u></strike>&nbsp; <strike><u><em>three styles</em></u></strike></p>
<p>
    <em><strong>two styles</strong></em></p> 
```

输出应如下所示：

```
<p>
<span class="strikeUEmStrong">four styles</span>&nbsp; <span class="strikeUEm">three styles<span></p><p><span class="emStrong">two styles<span></p> 
```

**原型：**

```
'Retrive the class name of each format node
Function GetClassName(ByVal n As HtmlNode) As String
    Dim ret As String = String.Empty

    If (n.Name <> "#text") And (n.Name <> "p") Then
        ret = n.Name + " "
    End If

    'Get the next node
    For Each child As HtmlNode In n.ChildNodes
        ret &= GetClassName(child)
    Next

    Return ret
End Function

'Create a list of class names
Function GetClassNameList(ByVal classNameList As String) As List(Of String)
    Dim ret As New List(Of String)
    Dim classArr() As String = classNameList.Split(" ")

    For Each className As String In classArr
        ret.Add(className)
    Next

    Return ret
End Function

'Sort a list of class names and return a merged class string
Function GetSortedClassNameString(ByVal classList As List(Of String)) As String

    Dim sortedMergedClass As String = String.Empty

    classList.Sort()

    For Each className As String In classList
        sortedMergedClass &= className
    Next

    Return sortedMergedClass
End Function

'Lets point to the body node
Dim bodyNode As HtmlNode = htmlDoc.DocumentNode.SelectSingleNode("//body")

'Lets create some generic nodes
Dim currPNode As HtmlNode

Dim formatNodes As HtmlNodeCollection

Dim text As String = String.Empty
Dim textSize As Integer = 0

'Make sure the editor has something in it
If editorText <> "" Then

   'Send the text from the editor to the body node
    If bodyNode IsNot Nothing Then
       bodyNode.InnerHtml = editorText
    End If

    Dim pNode = bodyNode.SelectNodes("//p")

    Dim span As HtmlNode = htmlDoc.CreateElement("span")
    Dim tmpBody As HtmlNode = htmlDoc.CreateElement("body")
    Dim textNode As HtmlNode = htmlDoc.CreateTextNode

    Dim pCount As Integer = bodyNode.SelectNodes("//body/p").Count - 1

    For childCountP As Integer = 0 To pCount

        Dim paragraph = HtmlNode.CreateNode(htmlDoc.CreateElement("p").WriteTo)

        'Which paragraph I am at.
        currPNode = pNode.Item(childCountP)

        'For this paragraph get me the collection of html nodes
        formatNodes = currPNode.ChildNodes

        'Count how many Format nodes we have in a paragraph
        Dim formatCount As Integer = currPNode.ChildNodes.Count - 1

       'Go through each node and examine the elements. 
       'Then look at the markup to create classes and then group them under one span
       For child As Integer = 0 To formatCount

           'Iterate through the formateNodes, strike, em, strong, etc.
           Dim currFormatNode = HtmlNode.CreateNode(formatNodes(child).WriteTo)

           'TODO: Handle nested images and links? How do we know what to rip out?

           'First check for format nodes
           'Note, we can't let it use everything because it will change nested elements as well. I.E. span within span.
           If (currFormatNode.Name <> "#text") And (currFormatNode.Name = "strike") Or (currFormatNode.Name = "em") _
               Or (currFormatNode.Name = "strong") Or (currFormatNode.Name = "u") Or (currFormatNode.Name = "sub") _
               Or (currFormatNode.Name = "sup") Or (currFormatNode.Name = "b") Then

              'strip all tags, just take the inner text
              span.InnerHtml = currFormatNode.InnerText

              'Create a text node with text from the lowest node
              textNode = htmlDoc.CreateTextNode(span.InnerText)

              'Recursively go through the format nodes
              'Create a list from the string
              'Then sort the list and return a string
              'Appending the class to the span
               span.SetAttributeValue("class", GetSortedClassNameString(GetClassNameList(GetClassName(currFormatNode).Trim())))

              'Attach the span before the current format node
              currFormatNode.ParentNode.InsertBefore(span, currFormatNode)

             'Remove the formatted children leaving the above node
             currFormatNode.ParentNode.ChildNodes.Remove(currFormatNode)

             'We need to build a paragraph here
             paragraph.InnerHtml &= span.OuterHtml

             'Lets output something for debugging
             childNodesTxt.InnerText &= span.OuterHtml

             Else 'handle #text and other nodes seperately
                  'We need to build a paragraph here
                  paragraph.InnerHtml &= span.OuterHtml
                  textNode = htmlDoc.CreateTextNode(currFormatNode.InnerHtml)

                  'Lets output something for debugging
                  childNodesTxt.InnerText &= textNode.OuterHtml
             End If

        Next
        'End of formats

        'Start adding the new paragraph's to the body node
        tmpBody.AppendChild(paragraph)
     Next
     'End of paragraphs

    'Clean out body first and replace with new elements
    htmlDoc.DocumentNode.SelectSingleNode("//body").Remove()

    'Update our body
    htmlDoc.DocumentNode.SelectSingleNode("//html").AppendChild(tmpBody)

 End If

 htmlDoc.Save(Server.MapPath("html\editor.html"))
 End If 
```

**输出：**

```
<span class="strikeuemstrong">four styles</span> 
```

在我解决了订购问题后，终于得到了正确的输出。感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T20:34:49.810

这不是一个直截了当的问题。我将描述如何编写算法来执行此操作，并包含一些伪代码来提供帮助。

1.  我会得到我的父母标签。我假设您想对所有“p”标签执行此操作
2.  我会遍历我的子标签，获取标签名称并将其附加到类名中
3.  我会递归地迭代孩子，直到我得到我附加的标签名称

伪代码。请原谅任何错别字，因为我正在快速输入。

```
public string GetClassName(Node n)
{
var ret = n.TagName;

foreach(var child in n.ChildNodes)
{
ret += GetClassName(child);
}

return ret;
}

foreach(var p in paragraphs)
{
foreach(var child in p.ChildNodes)
{
 var span = new Span();
 span.InnerText = child.InnerText; // strip all tags, just take the inner text

span.ClassName = GetClassName(child);

child.ReplaceWith(span); // note: if you do this with a FOREACH and not a for loop, it'll blow up C# for modifying the collection while iterating.  Use for loops. if you're going to do "active" replacement like in this pseudo code
}
} 
```

一旦我获得更多上下文，我很乐意修改我的答案。如果您需要我完善我的建议，请查看我的建议并在更多上下文中对其进行评论。如果没有，我希望这能满足您的需求:)

# c - 如何使用 MPI 在给定的运行时间后写入文件？

> ID：13297138
> 
> 赞同：2
> 
> 时间：2012-11-08T20:20:27.603
> 
> 标签：c, mpi, hpc

我有一个用 C 语言编写的模拟代码，与 MPI 并行，在一个 linux 集群上运行，它在 12 小时的挂墙时间后终止作业。然后必须从程序写入的文件重新启动持续时间超过 12 小时的作业。

我的代码目前在模拟的每 N 步中编写这些“重启文件”。在写入重启文件之前，每个节点都处于相同的模拟步骤是很重要的。

就我而言，这些文件很大（> 1GB/进程），因此我无法按我需要的频率编写（占用大量时间和空间）。

此外，一个模拟步骤的执行时间取决于模拟中发生的情况，因此很难预测我的模拟将在 12 小时内完成的许多步骤。所以我不能决定在我认为将在运行时间 12 小时之前完成的步骤数之后写入重启文件。

结果，当我的工作被终止时，最后一个重新启动文件可能是在几个小时前写入的，这迫使我重做最后 12 小时执行的大部分内容。

因此，我正在寻找一种方法来编写重新启动文件作为运行时间的函数。我曾考虑过使用 MPI_Wtime()，但是对于给定的运行时间，比如 11:50:00，所有处理器不一定处于相同的阶段步骤……这不好。这个问题有简单的解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T23:51:35.513

一旦您的流程达到 11:50:00 标记（或其他一些合适的截止日期），让它们 AllReduce 使用`MPI_MAX`. 然后他们可以准确地赶上迭代次数，并等待其他人用一个简单的屏障做同样的事情。然后他们可以开始编写重启文件。

# sql - 选择a和next是c的位置，跳过b

> ID：13297140
> 
> 赞同：4
> 
> 时间：2012-11-08T20:20:54.437
> 
> 标签：sql, sql-server-2005

我想知道是否可以在 SQL 中返回单行来显示，使用下表作为示例，只有一行 id 2：

```
table1  ( id 2 and 4 are missing value b)
id      value
1         a
1         b
1         c
1         d
2         a
2         c
2         d 
3         a
3         b
3         c
3         d
4         a
4         c
4         d 
```

我基本上想找到'b'不存在但'a'对于任何id仍然存在的所有实例，并为任何给定的id返回一行。我已经尝试过这样的事情，但它没有像我想要的那样工作：

```
select * from table1 
    where not exists (select distinct value from table1 where value b) 
```

我希望最终结果是这样的，确定“b”不存在但“a”存在的值（不显示值，最终目标不需要）：

```
result table
id        
2           
4 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T20:24:33.283

```
SELECT id
FROM table1 t1
WHERE 
    value = 'a'
    AND NOT EXISTS (
        SELECT *
        FROM table1 sub
        WHERE sub.id = t1.id AND sub.value = 'b'
    ) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T20:24:25.500

尚未测试，但我认为这样的事情会起作用。

```
SELECT id FROM table1 
WHERE value='a' AND id NOT IN(SELECT id FROM table1 WHERE value='b') 
GROUP BY id; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-08T20:24:33.223

这应该做的工作：

```
select distinct id
from table1 t
where not exists (
    select 1 
    from table1 tt 
    where t.id = tt.id and tt.vallue = 'b'
)  
and exists (
    select 1
    from table1 tt 
    where t.id = tt.id and tt.vallue = 'a'
) 
```

下面你有更短的形式。如果对 (id, value) 是唯一的，它可能会表现更好，并且可能不需要不同的关键字。

```
select distinct id
from table1 t
left join table1 tt
on t.id = tt.id and tt.value = 'b'
where t.value = 'a' 
and tt.id is null 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-08T20:39:16.927

**编辑**：向 Dooh 道歉。我只是注意到这个答案本质上是 Dooh 的第二个查询的副本。我将把它作为一个可运行的例子。

比较各种查询的执行计划可能会很有启发性。

```
declare @table1 as table ( id int, value varchar(10) )
insert into @table1 ( id, value ) values
  ( 1, 'a' ), ( 1, 'b' ), ( 1, 'c' ), ( 1, 'd' ),
  ( 2, 'a' ), ( 2, 'c' ), ( 2, 'd' ),
  ( 3, 'a' ), ( 3, 'b' ), ( 3, 'c' ), ( 3, 'd' ),
  ( 4, 'a' ), ( 4, 'c' ), ( 4, 'd' ),
  ( 5, 'a' ), ( 5, 'a' ), ( 5, 'b' ), -- Duplicate 'a's.
  ( 6, 'a' ), ( 6, 'a' ) -- Duplicate 'a's.

select distinct L.id
  from @table1 as L left outer join
    @table1 as R on R.id = L.id and R.value = 'b'
  where R.id is NULL and L.value = 'a' 
```

# c# - 使用昂贵的构建和允许更新来缓存对象

> ID：13297143
> 
> 赞同：3
> 
> 时间：2012-11-08T20:21:05.387
> 
> 标签：c#, asp.net-mvc, caching

我正在为 MVC Web 应用程序开发缓存管理器。对于这个应用程序，我有一些构建成本很高的非常大的对象。在应用程序的生命周期中，我可能需要根据用户请求创建几个这样的对象。构建后，用户将使用对象中的数据，从而导致许多读取操作。有时，我需要更新缓存对象中的一些次要数据点（创建和替换会花费太多时间）。

下面是我创建的一个缓存管理器类来帮助我。除了基本的线程安全之外，我的目标是：

1.  允许对一个对象进行多次读取，但在更新请求时锁定对该对象的所有读取
2.  如果对象不存在，请确保仅创建 1 次（请记住，这是一个漫长的构建操作）。
3.  允许缓存存储许多对象，并为每个对象维护一个锁（而不是为所有对象一个锁）。

    ```
    public class CacheManager 
    {
        private static readonly ObjectCache Cache = MemoryCache.Default;
        private static readonly ConcurrentDictionary<string, ReaderWriterLockSlim>
             Locks = new ConcurrentDictionary<string, ReaderWriterLockSlim>();
        private const int CacheLengthInHours = 1;

        public object AddOrGetExisting(string key, Func<object> factoryMethod)
        {
            Locks.GetOrAdd(key, new ReaderWriterLockSlim());

            var policy = new CacheItemPolicy 
              { 
                 AbsoluteExpiration = DateTimeOffset.Now.AddHours(CacheLengthInHours)
              };
            return Cache.AddOrGetExisting
                (key, new Lazy<object>(factoryMethod), policy);
        }

        public object Get(string key)
        {
            var targetLock = AcquireLockObject(key);
            if (targetLock != null)
            {
                targetLock.EnterReadLock();

                try
                {
                    var cacheItem = Cache.GetCacheItem(key);
                    if(cacheItem!= null)
                        return cacheItem.Value;
                }
                finally 
                {
                    targetLock.ExitReadLock();
                }
            }

            return null;
        }

        public void Update<T>(string key, Func<T, object> updateMethod)
        {
            var targetLock = AcquireLockObject(key);
            var targetItem = (Lazy<object>) Get(key);

            if (targetLock == null || key == null) return;
            targetLock.EnterWriteLock();

            try
            {
                updateMethod((T)targetItem.Value);
            }
            finally
            {
                targetLock.ExitWriteLock();
            }
        }

        private ReaderWriterLockSlim AcquireLockObject(string key)
        {
            return Locks.ContainsKey(key) ? Locks[key] : null;
        }
    } 
    ```

我是否在保持线程安全的同时实现了我的目标？你们都看到了实现我的目标的更好方法吗？

谢谢！

更新：所以这里的底线是我真的试图在一个领域做太多事情。出于某种原因，我确信在管理缓存的同一类中管理 Get / Update 操作是个好主意。在查看了 Groo 的解决方案并重新思考了这个问题之后，我能够进行大量的重构，从而消除了我面临的这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T20:56:48.843

好吧，我不认为这门课能满足你的需要。

> 允许对对象进行多次读取，但在更新请求时锁定所有读取

您可以将所有读取锁定到**缓存管理器**，但您不会将读取（或更新）锁定到实际缓存的实例。

> 如果对象不存在，请确保仅创建 1 次（请记住，这是一个漫长的构建操作）。

~~我不认为你确保了这一点。在将对象添加到字典时，您没有锁定任何内容（此外，您正在添加一个惰性构造函数，因此您甚至不知道何时实例化该对象）。~~

**编辑：**这部分成立，我唯一要改变的是让`Get`return a `Lazy<object>`. 在编写程序时，我忘记强制转换它并调用`ToString`返回值“未创建值”。

> 允许缓存存储许多对象，并为每个对象维护一个锁（而不是为所有对象一个锁）。

这与第 1 点相同：您正在锁定字典，而不是对对象的访问。你的`update`委托有一个奇怪的签名（它接受一个类型化的泛型参数，并返回一个`object`从未使用过的参数）。这意味着您实际上是在修改对象的属性，并且这些更改对于您的程序中持有对该对象的引用的任何部分都是立即可见的。

**如何解决这个问题**

如果您的对象是可变的（我认为它是可变的），则无法确保事务一致性，除非您的每个属性也获得每次读取访问的锁定。简化这一点的一种方法是使其不可变（这就是为什么这些在多线程中如此受欢迎）。

或者，您可以考虑将这个大对象分解成更小的部分并分别缓存每个部分，如果需要，使它们不可变。

**[编辑] 添加了竞争条件示例：**

```
class Program
{
    static void Main(string[] args)
    {
        CacheManager cache = new CacheManager();
        cache.AddOrGetExisting("item", () => new Test());

        // let one thread modify the item
        ThreadPool.QueueUserWorkItem(s =>
        {
            Thread.Sleep(250);
            cache.Update<Test>("item", i =>
            {
                i.First = "CHANGED";
                Thread.Sleep(500);
                i.Second = "CHANGED";

                return i;
            });
        });

        // let one thread just read the item and print it
        ThreadPool.QueueUserWorkItem(s =>
        {
            var item = ((Lazy<object>)cache.Get("item")).Value;
            Log(item.ToString());
            Thread.Sleep(500);
            Log(item.ToString());
        });

        Console.Read();
    }

    class Test
    {
        private string _first = "Initial value";
        public string First
        {
            get { return _first; }
            set { _first = value; Log("First", value); }
        }

        private string _second = "Initial value";
        public string Second
        {
            get { return _second; }
            set { _second = value; Log("Second", value); }
        }

        public override string ToString()
        {
            return string.Format("--> PRINTING: First: [{0}], Second: [{1}]", First, Second);
        }
    }

    private static void Log(string message)
    {
        Console.WriteLine("Thread {0}: {1}", Thread.CurrentThread.ManagedThreadId, message);
    }

    private static void Log(string property, string value)
    {
        Console.WriteLine("Thread {0}: {1} property was changed to [{2}]", Thread.CurrentThread.ManagedThreadId, property, value);
    }
} 
```

应该发生这样的事情：

```
t = 0ms  : thread A gets the item and prints the initial value
t = 250ms: thread B modifies the first property
t = 500ms: thread A prints the INCONSISTENT value (only the first prop. changed)
t = 750ms: thread B modifies the second property 
```

# excel - 分隔 Excel 列中的分组项

> ID：13297144
> 
> 赞同：0
> 
> 时间：2012-11-08T20:21:11.547
> 
> 标签：excel, function

我有一长串按以下方式在列中结构化的数据：

```
miR-4782-5p
miR-4740-3p
miR-3173-5p
miR-617/2340
miR-1260/1260b/1391
miR-4642
miR-1392 
```

我需要将其转换为以下格式：

```
miR-4782-5p
miR-4740-3p
miR-3173-5p
miR-617
miR-2340
miR-1260
miR-1260b
miR-1391
miR-4942
miR-1392 
```

本质上，我只想将按括号分组的数据分开，并使其成为自己的项目，同时继续列表。

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T20:51:06.730

这段代码应该做你需要的

```
Sub SplitCellsAndExtend_Olddasgf()
'takes cells with inside line feeds and creates new row for each.
'reverses merge into top cell.

Dim strCell As String, lastRow As Long, i As Long, j As Long, sPrefix As String
Const sSplitOn As String = "/"

application.ScreenUpdating = False
lastRow = Cells(Rows.Count, 1).End(xlUp).Row

    For i = lastRow To 1 Step -1
        strCell = Cells(i, 1)
        j = 0

        Do While InStr(1, strCell, sSplitOn) > 0
            Rows(i + j + 1).Insert
            sPrefix = Left(strCell, InStr(strCell, "-"))
            strCell = Right(strCell, Len(strCell) - InStr(1, strCell, sSplitOn))
            Cells(i + j, 1) = Left(Cells(i + j, 1).Value, InStr(1, Cells(i + j, 1), sSplitOn) - 1)
            strCell = sPrefix & strCell
            Cells(i + j + 1, 1).Value = strCell
            j = j + 1
        Loop
    Next
application.ScreenUpdating = True
End Sub 
```

# php - 无法在 PHP 中打开文件

> ID：13297145
> 
> 赞同：4
> 
> 时间：2012-11-08T20:21:13.467
> 
> 标签：php

我正在尝试使用[PHP](http://en.wikipedia.org/wiki/PHP)打开一个文件以进行写访问：

```
$myFile = "all.txt";
$fh = fopen($myFile, 'w') or die("can't open file"); 
```

我的浏览器吐了：

> 无法打开文件

我试图 chmod -R 777 这个 PHP 文件所在的文件夹以及 $myFile （一个文本文件）所在的文件夹。还有什么问题？

当我打开错误报告时，最终会出现权限错误。当我这样做时`ls -la all.txt`，我得到`-rwx------ 1 Myname staff 0 Nov 8 15:11 all.txt`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-08T20:25:53.990

如果脚本是从其他目录启动的，请尝试从完整的[URI](http://en.wikipedia.org/wiki/Uniform_Resource_Identifier)打开文件。

例子：

```
$myFile = '/path/to/myFile.txt';
if (!file_exists($myFile)) {
  print 'File not found';
}
else if(!$fh = fopen($myFile, 'w')) {
  print 'Can\'t open file';
}
else {
  print 'Success open file';
} 
```

# jquery - 在 ASP.NET MVC 4 中通过 ajax 在客户端显示服务器端模型状态错误

> ID：13297146
> 
> 赞同：2
> 
> 时间：2012-11-08T20:21:17.167
> 
> 标签：jquery, ajax, asp.net-mvc-3, error-handling

设想：

我通过 jquery $.ajax({...}) 调用调用 MVC4 Web 应用程序的控制器操作并传递有关我希望保存的用户的详细信息。Web 应用程序连接到后端私有 API 并发送用户数据，API 返回响应表明用户名已在使用中。我想在出现常规客户端验证错误消息的地方显示属性用户名的属性状态错误。

目前我手动执行此操作，但我想知道是否有 jQuery 兼容库会以我提供键/值错误作为操作响应的方式为我呈现属性状态错误，而库处理其余部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T11:16:54.120

您可以渲染一个新的局部视图以及模型状态错误（在控制器中使用 ModelState.AddModelError）。

# ruby - 创建大文件的最快方法？

> ID：13297147
> 
> 赞同：2
> 
> 时间：2012-11-08T20:21:19.643
> 
> 标签：ruby, file

我需要创建一个包含任何内容的巨大文件。我正在这样做，但需要很长时间：

```
exit 1 unless ARGV.length > 0
File.open("file-#{ARGV[0]}M.txt", 'w') do |f| 
  (ARGV[0].to_i*1048576).times {f.write(1) }
end 
```

这样做的最佳方式是什么（以独立于平台的方式？）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T20:31:57.487

**在 *nix 中，**使用`dd`：

```
system("dd if=/dev/zero of=" + f + " bs=1 count=0 seek=" + ARGV[0] + "M"); 
```

如果您想要文件中的某些内容（而不是零），请使用

```
/dev/random 
```

`if`代替_`/dev/zero`

如果您想要一个非稀疏文件，请使用

```
bs=#{ARGV[0]}M 
```

并省略`seek`

* * *

**通用方法：**

```
#Create a 1M fill buffer
fills = '1'*1048576
File.open("file-#{ARGV[0]}M.txt", 'w') do |f| 
  (ARGV[0].to_i).times {f.write(fills) }
end 
```

它与您拥有的类似，但一次写入 1M。您一次写入 1 个字节，这会为硬盘搜索和写入产生大量开销。一次写1M会快得多。如果你有更快的硬盘（比如 16M/s），你可以尝试将 1M 增加到 16M。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-08T20:57:22.173

纯 Ruby 选项：

```
n = ARGV[0] or exit 1
File.open("file-#{n}M.txt", 'w') do |f| 
  contents = "x" * (1024*1024)
  n.to_i.times { f.write(contents) }
end 
```

# icons - 在 Android 视图上按原样显示 PNG 图像（助手只允许图标）

> ID：13297152
> 
> 赞同：1
> 
> 时间：2012-11-08T20:21:54.193
> 
> 标签：icons, png, imageview

我正在尝试创建一个 Android 视图，其中显示的是 PNG 图像。唯一的问题是，当我使用“ImageView”选项时，它只允许我创建图标（启动器图标、菜单图标...等），这些图标太小而无法显示在我的视图上！

我尝试使用高级选项中的“链接到文件系统中的文件”选项手动将 PNG 文件导入可绘制文件夹中。这样，它确实出现在 Eclipse 的图形布局中，但 XML 文件引用了“未找到”的资源 android:src="@drawable/myImage.png"。

如何解决这个问题？先感谢您。

****解决了 ******

 **实际上，我所做的是在我的活动的 XML 文件中手动输入资源，如下所示：

```
<ImageView
    android:src="@drawable/myimage" /> 
```

我将文件放在所有可绘制文件夹（xhdpi、hdpi、ldpi 和 mdpi）中，但大小不同（ldpi 为 200px 宽度，mdpi 为 300，hdpi 为 400，xhdpi 为 480）。所有文件的名称都是 myimage.png （但您不应该将扩展名放在上面的代码中！

PS：之前不工作的原因是文件名的第一个字母是大写的。我认为...

不管怎么说，还是要谢谢你。

抱歉，关于编辑第一篇文章，但该网站不允许我“回答我自己的问题，因为我是新手”。:)**

# html - 表格单元格背景从带有圆角的表格中渗出

> ID：13297153
> 
> 赞同：3
> 
> 时间：2012-11-08T20:21:56.157
> 
> 标签：html, css, css-tables

[从这个演示](http://jsfiddle.net/ZFYvq/)中可以看出，其中一个表格设置有圆角（特别是右上角和左下角），这些角被它们包含的单元格的背景颜色破坏。

我尝试将一些应用`padding`到桌子上，但这没有帮助。我唯一的选择是添加额外的列和行并将它们设置`background-color`为`transparent`？

如何仅使用 CSS 解决此问题（不添加图像或 javascript）？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-08T20:30:04.593

添加`overflow: hidden;`到表格的 CSS 规则以剪辑其内部内容。[MDN 参考](https://developer.mozilla.org/en-US/docs/CSS/overflow)指出：

> overflow CSS 属性指定是否剪切内容、渲染滚动条或显示块级元素的溢出内容。

由于表被[视为块级元素](https://developer.mozilla.org/en-US/docs/HTML/Block-level_elements)，因此适用此规则。

要克服与 Gecko 驱动的浏览器（例如 Firefox）的不一致性，`display: inline-block`也可以应用。

* * *

请参阅[jsFiddle 上的更新演示](http://jsfiddle.net/ZFYvq/20/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T20:33:54.240

可能这个选项可以帮助你

```
table thead tr:first-child td:last-child {
    border-radius: 0 1em 0 0;
}

table tbody tr:last-child td:first-child {
    border-radius: 0 0 0 1em;
}​ 
```

[http://jsfiddle.net/ZFYvq/10/](http://jsfiddle.net/ZFYvq/10/)

此外，代替伪类可以使用这些类并将它们添加到所需的单元格

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-06T13:40:22.897

## [演示小提琴](http://jsfiddle.net/ZFYvq/37/)

您最好将表格包装在`div`带有相关边框半径属性集的 a 中，例如：

```
div{
    border-top-right-radius: 1em; 
    border-bottom-left-radius: 1em; 
    overflow:hidden;
} 
```

通过将`display`表格的属性设置为除`table`您之外的任何其他内容，都会破坏适用于`table`元素的特定布局规则，这会产生经常无法预料的问题，例如无法在 IE 中工作。以上是唯一真正的跨浏览器语义解决方案。

注意。要删除表格底部的粗边框，请添加`border-bottom:none;`到`div`类

# iis - 黑莓设备上的 401 错误

> ID：13297154
> 
> 赞同：1
> 
> 时间：2012-11-08T20:21:57.737
> 
> 标签：iis, blackberry, sharepoint-2010

我有一个 SharePoint 实例作为我们的外联网到我们的销售人员 - 通过 HTTPS 进行通信。所有销售代理都有黑莓设备，但没有人可以访问我们的外联网。

在 IIS 中，我们只启用了 ASP.NET 模拟和 Windows 身份验证，但 BB 设备甚至没有提示输入凭据，它只是收到 401 错误。

不用说，该网站可以在其他设备（PC、平板电脑、iPhone ..）上浏览，所以它似乎是特定于 BB 设置的东西——或者这就是我的倾向。任何人对我如何解决\解决有任何想法？

我应该添加.. 我为我的 PC 下载了 BlackBerry 模拟器，这也有同样的问题，所以我不认为这是 BlackBerry 服务设置.. 但与设备尝试连接\身份验证的方式有关。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T21:20:19.450

好的，找到了答案（显然谷歌机器今天的运行比昨天好得多；）

由于浏览器太旧，黑莓不支持 Windows 身份验证。我必须打开基本身份验证，除非您通过 SSL 运行，否则不建议这样做。幸运的是，我是。在这里找到答案：http: [//support.microsoft.com/kb/907273](http://support.microsoft.com/kb/907273)

# r - 在 facet_wrap 图中添加“浮动”轴标签

> ID：13297155
> 
> 赞同：44
> 
> 时间：2012-11-08T20:21:59.500
> 
> 标签：r, ggplot2, facet-wrap

[我和这个](https://stackoverflow.com/questions/11163400/x-axis-labels-in-facet-wrap-for-ggplot2)用户有同样的问题- 我有一个“锯齿状”多面图，其中底行的面板比其他行少，我想在每列的底部有 x 轴刻度。

该问题的建议解决方案是设置`scales="free_x"`. （在 ggplot 0.9.2.1 中；我相信我正在寻找的行为在早期版本中是默认的。）在我的情况下，这是一个糟糕的解决方案：我的实际轴标签会很长，所以把它们放在每一行下面会占用太多房间。结果是这样的：

```
 x <- gl(3, 1, 15, labels=paste("this is a very long axis label ", letters[1:5]))
 y <- rnorm(length(x))
 l <- gl(5, 3, 15)
 d <- data.frame(x=x, y=y, l=l)
 ggplot(d, aes(x=x, y=y)) + geom_point() + facet_wrap(~l, scales="free_x") + 
   theme(axis.text.x=element_text(angle=90, hjust=1)) 
```

![在此处输入图像描述](../Images/496aa5521adbd16fab67af724638b32a.png)

[在这里](https://stackoverflow.com/questions/12096492/remove-floating-axis-labels-in-facet-wrap-plot)的评论中，安德烈建议可以手动完成，`grid`但我不知道如何开始。

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-11-09T21:14:56.727

如果我没记错的话，关于如何将所有标签添加到最后一列下的同一行以及如何将这些最后一个标签提升到下一行都有问题。所以这里是这两种情况的功能：

**编辑：**因为这就像`print.ggplot`（请参阅`getAnywhere(print.ggplot)`）的替代品，所以我从中添加了一些行以保留功能。

**编辑 2：**我对其进行了更多改进：无需指定`nrow`，`ncol`也可以打印包含所有面板的图。

```
library(grid)
# pos - where to add new labels
# newpage, vp - see ?print.ggplot
facetAdjust <- function(x, pos = c("up", "down"), 
                        newpage = is.null(vp), vp = NULL)
{
  # part of print.ggplot
  ggplot2:::set_last_plot(x)
  if(newpage)
    grid.newpage()
  pos <- match.arg(pos)
  p <- ggplot_build(x)
  gtable <- ggplot_gtable(p)
  # finding dimensions
  dims <- apply(p$panel$layout[2:3], 2, max)
  nrow <- dims[1]
  ncol <- dims[2]
  # number of panels in the plot
  panels <- sum(grepl("panel", names(gtable$grobs)))
  space <- ncol * nrow
  # missing panels
  n <- space - panels
  # checking whether modifications are needed
  if(panels != space){
    # indices of panels to fix
    idx <- (space - ncol - n + 1):(space - ncol)
    # copying x-axis of the last existing panel to the chosen panels 
    # in the row above
    gtable$grobs[paste0("axis_b",idx)] <- list(gtable$grobs[[paste0("axis_b",panels)]])
    if(pos == "down"){
      # if pos == down then shifting labels down to the same level as 
      # the x-axis of last panel
      rows <- grep(paste0("axis_b\\-[", idx[1], "-", idx[n], "]"), 
                   gtable$layout$name)
      lastAxis <- grep(paste0("axis_b\\-", panels), gtable$layout$name)
      gtable$layout[rows, c("t","b")] <- gtable$layout[lastAxis, c("t")]
    }
  }
  # again part of print.ggplot, plotting adjusted version
  if(is.null(vp)){
    grid.draw(gtable)
  }
  else{
    if (is.character(vp)) 
      seekViewport(vp)
    else pushViewport(vp)
    grid.draw(gtable)
    upViewport()
  }
  invisible(p)
} 
```

这就是它的外观

```
d <- ggplot(diamonds, aes(carat, price, fill = ..density..)) +
  xlim(0, 2) + stat_binhex(na.rm = TRUE) + theme(aspect.ratio = 1) + 
  facet_wrap(~ color)
facetAdjust(d) 
```

![在此处输入图像描述](../Images/a7b3eeea2785a21bb2704feedf112214.png)

```
facetAdjust(d, "down") 
```

![在此处输入图像描述](../Images/678bd787ba049f87d12adca5cf1a0e3d.png)

**编辑3：**

这是另一种解决方案，上面的解决方案也很好。

`ggsave`当一个人想与一起使用时会出现一些问题`facetAdjust`。由于:`ggplot`的源代码中有两个部分，因此需要一个类的图，以防一个人不手动提供文件名（但根据它似乎不应该工作）。因此，给定一个文件名，有一个解决方法（在某些情况下可能有副作用）：`ggsave``print(plot)``default_name(plot)``?ggsave`

首先，让我们考虑实现浮动轴主要效果的分离功能。通常，它会返回一个`gtable`对象，但是我们使用`class(gtable) <- c("facetAdjust", "gtable", "ggplot")`. 这样就可以按要求使用`ggsave`和`print(plot)`工作了（见下文`print.facetAdjust`）

```
facetAdjust <- function(x, pos = c("up", "down"))
{
  pos <- match.arg(pos)
  p <- ggplot_build(x)
  gtable <- ggplot_gtable(p); dev.off()
  dims <- apply(p$panel$layout[2:3], 2, max)
  nrow <- dims[1]
  ncol <- dims[2]
  panels <- sum(grepl("panel", names(gtable$grobs)))
  space <- ncol * nrow
  n <- space - panels
  if(panels != space){
    idx <- (space - ncol - n + 1):(space - ncol)
    gtable$grobs[paste0("axis_b",idx)] <- list(gtable$grobs[[paste0("axis_b",panels)]])
    if(pos == "down"){
      rows <- grep(paste0("axis_b\\-[", idx[1], "-", idx[n], "]"), 
                   gtable$layout$name)
      lastAxis <- grep(paste0("axis_b\\-", panels), gtable$layout$name)
      gtable$layout[rows, c("t","b")] <- gtable$layout[lastAxis, c("t")]
    }
  }
  class(gtable) <- c("facetAdjust", "gtable", "ggplot"); gtable
} 
```

仅与以下几行不同的打印功能`ggplot2:::print.ggplot`：

```
print.facetAdjust <- function(x, newpage = is.null(vp), vp = NULL) {
  if(newpage)
    grid.newpage()
  if(is.null(vp)){
    grid.draw(x)
  } else {
    if (is.character(vp)) 
      seekViewport(vp)
    else pushViewport(vp)
    grid.draw(x)
    upViewport()
  }
  invisible(x)
} 
```

例子：

```
d <- ggplot(diamonds, aes(carat, price, fill = ..density..)) +
  xlim(0, 2) + stat_binhex(na.rm = TRUE) + theme(aspect.ratio = 1) + 
  facet_wrap(~ color)
p <- facetAdjust(d) # No output
print(p) # The same output as with the old version of facetAdjust()
ggsave("name.pdf", p) # Works, a filename is necessary 
```

# eclipse - 在 Spring、Maven 和 Eclipses 中处理 XML 文件中的属性值的最佳方法

> ID：13297157
> 
> 赞同：22
> 
> 时间：2012-11-08T20:22:02.527
> 
> 标签：eclipse, spring, svn, maven, spring-mvc

正如任何 Spring 程序员都知道的那样，我正在开发一个 Spring WebFlow 项目，该项目在 XML 文件中有很多属性值。我有数据库用户名、密码、URL 等。

我们将 Eclipse 与 Spring WebFlow 和 Maven 一起使用。我们试图让 SA 进行构建，但 SA 不想进入 XML 文件来更改值，但另一方面，我们不知道生产值。我们如何处理这个问题？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-11-08T20:57:40.870

大多数 SA 更愿意和更有信心处理`.properties`文件而不是`.xml`.

Spring 提供[PropertyPlaceholderConfigurer](http://static.springsource.org/spring/docs/3.0.x/api/org/springframework/beans/factory/config/PropertyPlaceholderConfigurer.html)让您将所有内容定义到一个或多个`.properties`文件中，并将占位符替换为`applicationContext.xml`.

创建一个`app.properties`下`src/main/resources/`文件夹：

```
... ...

# Dadabase connection settings:
jdbc.driverClassName=org.postgresql.Driver
jdbc.url=jdbc:postgresql://localhost:5432/app_db
jdbc.username=app_admin
jdbc.password=password

... ... 
```

并像这样使用 PropertyPlaceholderConfigurer `applicationContext.xml`：

```
... ...

<bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
  <property name="location">
    <value>app.properties</value>
  </property>
</bean>

... ...

<bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
  <property name="driverClassName" value="${jdbc.driverClassName}" />
  <property name="url" value="${jdbc.url}" />
  <property name="username" value="${jdbc.username}" />
  <property name="password" value="${jdbc.password}" />
</bean> 
```

查看[Spring PropertyPlaceholderConfigurer 示例](http://www.mkyong.com/spring/spring-propertyplaceholderconfigurer-example/)以获取更多详细信息。

另外，从应用部署的角度来看，我们通常将app打包成某种可执行格式，而.properties文件通常打包在可执行的war或ear文件中。一个简单的解决方案是配置您的 PropertyPlaceholderConfigurer bean 以按照预定义的顺序从多个位置解析属性，因此在部署环境中，您可以使用固定位置或环境变量来指定属性文件，还要注意，为了简化SA 的部署/配置任务，我们通常使用单个外部 .properties 文件定义所有运行时配置，如下所示：

```
<bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
  <property name="locations">
    <list>
      <!-- Default location inside war file -->
      <value>classpath:app.properties</value>
      <!-- Environment specific location, a fixed path on server -->
      <value>file:///opt/my-app/conf/app.properties</value>
    </list>
  </property>
  <property name="ignoreResourceNotFound" value="true"/>
</bean> 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-12-23T14:22:58.763

另一种简单的方法是例如 Spring Expression Language (SpEL)

```
 <property name="url" value="#{ systemProperties['jdbc.url'] }" /> 
```

文档 [弹簧文档](https://docs.spring.io/spring-framework/docs/4.3.12.RELEASE/spring-framework-reference/html/expressions.html#expressions-beandef-xml-based)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-04T07:19:14.067

您还可以`propertyConfigurer`在配置类中以编程方式定义：

```
@Configuration
@PropertySource("classpath:application.properties")
public class PropertiesConfiguration {

    @Bean
    public PropertySourcesPlaceholderConfigurer propertySourcesPlaceholderConfigurer(Environment env) {
        PropertySourcesPlaceholderConfigurer configurer = new PropertySourcesPlaceholderConfigurer();
        configurer.setEnvironment(env);
        return configurer;
    }
} 
```

# maven - 如何使用 Maven 从 Nexus 下载进行部署

> ID：13297159
> 
> 赞同：1
> 
> 时间：2012-11-08T20:22:15.803
> 
> 标签：maven, nexus, bamboo

我对 Maven 有点陌生，但我们使用 Maven 和 Tomcat7 插件成功地使用 Bamboo 部署到 Tomcat。但是我想要一个单独的 Bamboo 构建计划，它只从 Nexus 部署一个战争包，而不是先重新构建它。看起来我可以让战争成为一个依赖，但是这个相同的 POM 构建包，所以我不希望在调用构建目标的情况下下载它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T20:33:38.123

查看[maven-dependency-plugin](http://maven.apache.org/plugins/maven-dependency-plugin/)。让项目抓取现有的战争工件并将其推送到 tomcat 应该很容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T23:21:03.630

Nexus 有一个非常丰富的 REST API，您可以通过简单的 http 获取和副本轻松地使用它来编写部署脚本。但是，如果你真的觉得你想使用 Maven ptyx 方法应该可以工作......虽然它看起来有点矫枉过正。如果您投入精力进行部署，我会考虑使用 Chef 或 Puppet，并使用它们从 Nexus 中提取并推送到您的生产（或 QA 或任何服务器）中。

# javascript - 对象不支持 IE9 中的属性或方法验证

> ID：13297161
> 
> 赞同：0
> 
> 时间：2012-11-08T20:22:25.443
> 
> 标签：javascript, jquery, validation, internet-explorer-9, jquery-validate

我正在使用 jquery validate js 插件，并且在所有浏览器上都运行良好，但在 IE 9 上出现此错误。

> 网页错误详情
> 
> 消息：对象不支持属性或方法“验证”行：188 字符：3 代码：0

任何人都知道为什么会发生这种情况。

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<script type="text/javascript" src="/js/jquery.validate.min.js"></script>

    <script type="text/javascript">
        $(function(){
        $("#formContact").validate({

                });

      });
</script> 
```

# crystal-reports - 在水晶报表的层次分组中隐藏没有值的行

> ID：13297162
> 
> 赞同：0
> 
> 时间：2012-11-08T20:22:25.537
> 
> 标签：crystal-reports

我有一份水晶报告——显示一些财务数据。与财务数据一样，我们有几个总分类帐科目 - 它们按层次结构分组。我们在 Crystal 报表中使用分组，并在分层组中使用一些总计。

有些行的值为零。因此，这些组的总数也为零。我们需要隐藏这些行。如果我们尝试检查字段的总和 - 在组级别 - 它会隐藏所有父行（因为它们本身没有任何值 - 只有值来自子行）。

需要一些方法在水晶中做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T06:24:15.650

您可以根据条件抑制行。

1.  在菜单中转到报告-> 抑制专家...
2.  选择详细信息行，然后选择抑制旁边的公式按钮
3.  您只需要设置为真的条件即可抑制该行

    {[您的值字段]} = 0

对于组，您需要找到该特定组的总和

```
SUM({[Your value field]}, {[field you are using to grouped by]}) = 0 
```

# c# - 当一个基础对象数组将一个子对象的实例作为其单元之一时会发生什么？

> ID：13297166
> 
> 赞同：-1
> 
> 时间：2012-11-08T20:22:43.540
> 
> 标签：c#, arrays, parent-child

我有一个数组`Tiles[w,h]`并且错误地我可以（没有任何明显的错误，所以我想这是可以的）将一个子对象分配给`LibraryTile`它的一个单元格。它在智能感知悬停弹出窗口中显示为 LibraryTile。

我不确定它是否会带来任何不良影响，例如增加内存消耗（它是一个成员副本，而不是参考），所以我不知道是否应该更改我的方法或者是否可以将它们保留为是。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T20:27:14.247

我假设 LibraryTile 是 Tile 的子类？这就是为什么您将其标记为父子的原因？

你看到的只是多态性。它会像瓷砖一样“行动”，只是一样。它是否消耗更多内存取决于 LibraryTile 添加到其基类的内容。您可以在运行时测试 Tile 是否是实际的 LibraryTile，如果是，则转换为 LIbraryTile 以执行“特殊操作”，可以这么说。但是如果没有更多的上下文，我不能就利用多态性的技术（例如虚拟方法、接口等）向您提供建议。

如果您出于某种原因不想允许继承，则可以密封您的父类。

[http://msdn.microsoft.com/en-us/library/88c54tsw%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/88c54tsw%28v=vs.71%29.aspx)

# python - 使用 Python 和 Tkinter 创建温度程序

> ID：13297173
> 
> 赞同：2
> 
> 时间：2012-11-08T20:23:07.310
> 
> 标签：python, user-interface, button, tkinter, output

我正在为每年的温度编写一个小的 Python/Tkinter 程序。

我可以让几乎所有东西都作为文本程序工作，但我想将它实现到 GUI 中。

该程序打开一个`csv`文件，将其读入列表，计算出平均值以及最小和最大温度。然后，在关闭时，应用程序会将摘要保存到新的文本文件中。

我希望默认启动屏幕显示所有年份。单击按钮时，它只显示当年的数据。

这是我想要的样子：

![在此处输入图像描述](../Images/7dcb54a3aa1964a2ae7c4f7ba51b222c.png)

非常简单的布局，只有 5 个按钮和每个按钮的输出。

我可以用以下方法组成顶部的按钮：

```
class App:

    def __init__(self, master):

        frame = Frame(master)
        frame.pack()

        self.hi_there = Button(frame, text="All Years", command=self.All)
        self.hi_there.pack(side=LEFT)

        self.hi_there = Button(frame, text="2011", command=self.Y1)
        self.hi_there.pack(side=LEFT)

        self.hi_there = Button(frame, text="2012", command=self.Y2)
        self.hi_there.pack(side=LEFT)

        self.hi_there = Button(frame, text="2013", command=self.Y3)
        self.hi_there.pack(side=LEFT)

        self.hi_there = Button(frame, text="Save & Exit", command=self.Exit)
        self.hi_there.pack(side=LEFT) 
```

我不确定如何处理其他元素，例如标题和表格。

一旦我有了结构/框架，我想我可以填充这些字段，这样我可能会学得更好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T12:13:30.347

您好，我想我了解您要完成的工作，我建议使用 ttk.Treeview 来制作表格，这是一个非常有用的工具，尽管它可能看起来很难工作

这是一个小例子，可以帮助您了解我的意思

```
from Tkinter import *
import ttk

class App:
    def __init__(self, master):

        frame = Frame(master)
        frame.pack()

        self.hi_there = Button(frame, text="All Years", command=self.All)
        self.hi_there.pack(side=LEFT)

        self.hi_there = Button(frame, text="2011", command=self.Y1)
        self.hi_there.pack(side=LEFT)

        self.hi_there = Button(frame, text="2012", command=self.Y2)
        self.hi_there.pack(side=LEFT)

        self.hi_there = Button(frame, text="2013", command=self.Y3)
        self.hi_there.pack(side=LEFT)

        self.hi_there = Button(frame, text="Save & Exit", command=self.Exit)
        self.hi_there.pack(side=LEFT)

        frame2 = Frame(master)
        frame2.pack()
        treedata = [('column 1', 'column 2'), ('column 1', 'column 2')]
        column_names = ("heading1", "heading2")
        tree = ttk.Treeview(frame2, columns = column_names)

        for x in treedata:
            tree.insert('', 'end', values =x)
        for col in column_names: 
            tree.heading(col, text = col.Title())
        tree.pack() 
```

希望这会有所帮助，这方面的文档不多，但谷歌会提供帮助，一个非常有用的链接：[http ://www.tkdocs.com/tutorial/tree.html](http://www.tkdocs.com/tutorial/tree.html)

祝你好运 ：）

如果您需要更多帮助，请在评论中提问 :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T21:55:54.107

这是我最喜欢的 Tkinter 资源：[http ://effbot.org/tkinterbook/](http://effbot.org/tkinterbook/)

标题可以是标签：[http ://effbot.org/tkinterbook/label.htm](http://effbot.org/tkinterbook/label.htm)

```
w = Label(master, text="Hello, world!")
w.grid(column=1,row=1) 
```

对于其他所有内容，为以下内容创建一个条目小部件：

```
textBox = Text(self, height=1,width=1)
textBox.grid(sticky=E,column=1,row=1) 
```

然后像这样插入数据：

```
self.textBox.insert('end',yourText) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T22:21:01.453

您可能要考虑的一个选项是使用该函数而不是使用 tkinter 的`.pack()`函数`.grid()`。这使您可以更动态地将对象排列成您想要的方式，并且非常适合您正在做的事情（创建网格）。

完成此操作后，您可以获取 csv 文件信息并将文本保存为变量（假设为`csvText`）。然后，使用以下命令将变量打印为标签：

```
dataText = Tkinter.Label(root,text=csvText)
dataText.grid(row=2,column=0) 
```

并为每条信息执行此操作。顶部的标题将以相同的方式打包到网格中，除了使用`columnspan`属性：

```
title = Tkinter.Label(root,text="TITLE")
title.grid(row=1,column=0,columnspan=4) 
```

您的按钮将是相同的，除了使用 之外`.pack(side=LEFT)`，您可以通过以下方式打包它们：

```
self.hi_there = Button(frame, text="All Years", command=self.All)
self.hi_there.grid(row=0,column=0)

self.hi_there = Button(frame, text="2011", command=self.Y1)
self.hi_there.grid(row=0,column=1)

self.hi_there = Button(frame, text="2012", command=self.Y2)
self.hi_there.grid(row=0,column=2)

self.hi_there = Button(frame, text="2013", command=self.Y3)
self.hi_there.grid(row=0,column=3)

self.hi_there = Button(frame, text="Save & Exit", command=self.Exit)
self.hi_there.grid(row=0,column=4) 
```

然后，所有按钮功能都必须是查找新的 csv 信息，将它们存储在相同的`csvText`变量中，然后将它们传递给更新标签的更新函数。请注意，当您在屏幕上重绘某些内容时，它不会擦除所有内容并从头开始，因此在重绘时，不要重绘所有按钮和标题，只需重绘所有标签即可。这将节省您的代码行并使其更加优化。

# javascript - 变量和函数名称实际上可以在 Javascript 中存在多长时间？

> ID：13297175
> 
> 赞同：3
> 
> 时间：2012-11-08T20:23:12.790
> 
> 标签：javascript, coding-style, naming-conventions

> **可能重复：**
> [JavaScript 中变量名的最大长度](https://stackoverflow.com/questions/1809153/maximum-length-of-variable-name-in-javascript)

在阅读一点 JS 时，我心想：我的名字能有多长？

```
 function myNormalFuncName () {//...}
    var myNormalVarName = 'how long?'; 
```

所以我的问题是它可以持续多久？是否有任何机制可以阻止这种情况的发生，或者是否会引发任何错误？或者甚至可能是溢出或类似的东西？或者它会正常工作吗？

也许它更多地取决于实施？那么现代浏览器怎么样。

很想听听熟练的开发人员对此有何了解。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-08T20:30:00.920

至少 999999 个字符都可以

```
var code = 'var ' + Array(1000000).join("a") + ' = 1;';
eval(code);
alert( window[Array(1000000).join("a")] ); //1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T20:42:54.130

这将取决于实现（浏览器 JS 引擎）。甚至可能是动态类型语言（如 JS）的某些实现根本没有限制，更像是通过达到最大文件大小或类似的限制来施加限制，而不是函数名称中的最大字符和/或变量名。

但是，通常您应该避免使用“长”函数名和/或变量名，事实上，大多数优秀的压缩工具会在您的 JS 文件上运行时为您缩短这些名称。原因当然是为了减少在访问您的站点时将资源（如 JS 文件）下载到浏览器所需的带宽量。

# php - 在标头中设置默认 js url

> ID：13297176
> 
> 赞同：-1
> 
> 时间：2012-11-08T20:23:13.637
> 
> 标签：php, javascript, html

我试图在我的文件头中设置一个 'default_url' 的变量，如下所示：

```
<script type="text/javascript">
var default_url = <?php echo $default_url ?>;
</script> 
```

但我不断收到一个错误，指出有一个意外的 <

反正我真的可以做这样的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T20:26:29.183

```
<script type="text/javascript">
var default_url = '<?php echo $default_url ?>';
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T20:25:19.470

尝试：

```
<script type="text/javascript">
var default_url = "<?php echo $default_url; ?>";
</script> 
```

特别注意，我添加了分号和引号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T20:26:59.637

Try adding quotes on the outside of the tags:

```
<script type="text/javascript">
var default_url = "<?php echo $default_url; ?>";
</script> 
```

# memory-management - MTRR 寄存器是如何实现的？

> ID：13297178
> 
> 赞同：4
> 
> 时间：2012-11-08T20:23:26.737
> 
> 标签：memory-management, x86, x86-64, mmu

x86/x86-64 公开了 MTRR（内存类型范围寄存器），可用于指定物理地址空间的不同部分以用于不同用途（例如，可缓存、不可更改、写入组合等）。

我的问题是，是否有人知道这些由 MTRR 定义的物理地址空间限制是如何在硬件中实施的？在每次内存访问时，硬件是否在进程决定是否应该查找缓存或查找写入组合缓冲区或将其直接发送到内存控制器之前检查物理地址是否落在给定范围内？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-08T23:00:37.450

Wikipedia says in the article [MTRR](http://en.wikipedia.org/wiki/Memory_type_range_register) that:

> Newer (primarily 64-bit) x86 CPUs support a more advanced technique called Page Attribute Tables that allow for per-table setting of these modes, instead of having a limited number of low-granularity registers

So, for newer x86/x86_64 CPUs it is possible to say that MTRR may be implemented as additional technique to PAT (Page Attribute Tables). The place where PAT is stored in memory is the Page Table (some bits in Page Table Entry, or PTE) and in the CPU they are stored (cached) in the [TLB](http://en.wikipedia.org/wiki/Translation_lookaside_buffer) table (it is part of [MMU](http://en.wikipedia.org/wiki/Memory_management_unit)). TLB (and MMU) is already the place which is visited by every memory access. I think, it may be good place to control type of memory, even with MTRR(?)

But what if I stop guessing and will open the RTFM book? There is one very good book about x86 world: The Unabridged Pentium 4: IA32 Processor Genealogy (ISBN-13: 978-0321246561). Part 7, chapter 24 "Pentium Pro software enchancement", part "MTRR added".

There are long rules for every mtrr memory type at pages 582-584, but rules for all 5 types (Uncacheable=UC, Write-Combining=WC, Write-Through=WT, Write-Protect=WP, Write-Back=WB) begins with: "Cache lookups are performed".

And in Part 9 "Pentium III" chapter 32 "Pentium III Xeon" the book clearly says:

> When it has to perform a memory access, the processor consults both the MTRRs and the selected PTE or PDE to determine the memory type (and therefore the rules of conduct it is to follow).

But from other side... WRMSR into MTRR regs will invalidate TLB (according to intel instruction manual "instruct32.chm"):

> When the WRMSR instruction is used to write to an MTRR, the TLBs are invalidated, including the global entries (see "Translation Lookaside Buffers (TLBs)" in Chapter 3 of the IA-32 Intel(R) Architecture Software Developer's Manual, Volume 3).

And there is one more direct hint in "Intel 64 and IA-32 Architectures Software developer manual, vol 3a", section "10.11.9 Large page considerations":

> The MTRRs provide memory typing for a limited number of regions that have a 4 KByte granularity (the same granularity as 4-KByte pages). *The memory type for a given page is cached in the processor’s TLBs.*

You asked:

> On each memory access does the hardware check whether the physical address falls in a given range

No. Every memory access is not compared with all MTRRs. All MTRRs ranges are precombined with PTEs bits of memory when PTE is loaded into TLB. Then the only place to check memory type will be TLB line. And the TLB *IS* checked for every memory access.

> whether it should look up the cache or lookup the writecombining buffer or send it to memory controller directly

No, there is something that we don't understand clearly. Cache looked for every access, even for UC (e.g if region is just changed to UC there can be cached copy which should be evicted).

From chapter 24 (it is about Pentium 4):

> **Loads from Cacheable Memory** The types of memory that the processor is permitted to cache from are WP, WT and WB memory (as defined by the MTRRs and the PTE or PDE).
> 
> When the core dispatches a load mop, the mop is placed in the Load Buffer that was reserved for it in the Allocator stage. The memory data read request is then issued to the L1 Data Cache for fulfillment:

1.  If the cache has a copy of the line that contains the requested read data, the read data is placed in the Load Buffer.
2.  If the cache lookup results in a miss, the request is forwarded upstream to the L2 Cache.
3.  If the L2 Cache has a copy of the sector that contains the requested read data, the read data is immediately placed in the Load Buffer and the sector is copied into the L1 Data Cache.
4.  If the cache lookup results in a miss, the request is forwarded upstream to either the L3 Cache (if there is one) or to the FSB Interface Unit.
5.  If the L3 Cache has a copy of the sector that contains the requested read data, the read data is immediately placed in the Load Buffer and the sector is copied into the L2 Cache and the L1 Data Cache.
6.  If the lookup in the top-level cache results in a miss, the request is forwarded to the FSB Interface Unit.
7.  When the sector is returned from memory, the read data is immediately placed in the Load Buffer and the sector is copied into the L3 Cache (if there is one), the L2 Cache, and the L1 Data Cache.

> The processor core is permitted to speculatively execute loads that read data from WC, WP, WT or WB memory space
> 
> **Loads from Uncacheable Memory** The uncacheable memory types are UC and WC (as defined by the MTRRs and the PTE or PDE).
> 
> When the core dispatches a load mop, the read request is placed in the Load Buffer that was reserved for it in the Allocator stage. The memory data read request is submitted to the processor's caches as well. In the event of cache hit, the cache line is evicted from the cache. The request is issued to the FSB Interface Unit. A Memory Data Read transaction is performed on the FSB to fetch just the requested bytes from memory. When the data is returned from memory, the read data is immediately placed in the Load Buffer.
> 
> The processor core is not permitted to speculatively execute loads that read data from UC memory space
> 
> **Stores to UC Memory** UC is one of the two uncacheable memory types (the other is the WC memory type). When a store to UC memory is executed, it is posted in the Store Buffer reserved for it in the Allocator stage. Stores to UC memory are also submitted to the L1 Data Cache, the L2 Cache, or the L3 Cache (if there is one). In the event of a cache hit, the line is evicted from the cache.
> 
> When a Store Buffer containing a store to UC memory is forwarded to the FSB Interface Unit, a Memory Data Write transaction ... is performed on the FSB
> 
> **Stores to WC Memory** The WC memory type is well-suited to an area of memory (e.g., the video frame buffer) that has the following characteristics:

*   The processor does not cache from WC memory.
*   Speculative execution of loads from WC memory is permitted.
*   Stores to WC memory are deposited in the processor's Write Combining Buffers (WCBs).
*   Each WCB can hold one line (64 bytes of data).
*   As stores are performed to a line of WC memory space, the bytes are accumulated in the WCB assigned to record writes to that line of memory space.
*   A subsequent store to a location in a WCB can overwrite a byte that was deposited in that location by an earlier store to that location. In other words, multiple writes to the same location are collapsed so that the location reflects the last data byte written to that location.
*   When the WCBs are ultimately dumped to external memory over the FSB, data is not necessarily written to memory in the same order in which the earlier programmatic stores were executed. The device being written to must tolerate this type of behavior (i.e., it must function correctly). See "WCB FSB Transactions" on page 1080 for more information.

> **Stores to WT Memory**
> 
> When a store to cacheable, Write-Through memory is executed. The store is posted in the Store Buffer that was reserved for its use in the Allocator stage. In addition, the store is submitted to the L1 Data Cache for a lookup. There are several possibilities: * If the store hits on the Data Cache, the line in the cache is updated, but it remains in the S state (which means the line is valid). * If the store misses the Data Cache, it is forwarded to the L2 Cache and a lookup is performed: * - If it hits on a line in the L2 Cache, the line is updated, but it remains in the S state (which means the line is valid). * - If it misses on the L2 Cache and there is no L3 Cache, no further action is taken.

# php - 访问 Zend 上传文件

> ID：13297183
> 
> 赞同：1
> 
> 时间：2012-11-08T20:23:47.820
> 
> 标签：php, zend-framework, image-processing

您将在下面找到我的 uploadAction 函数。此代码有效。我能够得到图像。但是，我想将自动调整大小机制集成到代码中。有人可以向我解释如何强制我在此上传操作中上传的文件通过我的调整大小功能进行解析。

```
 public function uploadAction()
    {
        $request = $this->getRequest();

        $error = null;

        if ($request->isPost()) {
            if ($request->getParam('submit')) {

            // Create upload object
            $upload = new Zend_File_Transfer();

            // Add our validators
            $upload->addValidator('Size', false, 102400);
            $upload->addValidator('Extension', false, 'jpg,png,gif');

            // Set our destination
            $upload->setDestination(APPLICATION_PATH . '/../public/images/blog/');

                if(!$upload->receive()) {
                    $messages = $upload->getMessages();

                    foreach ($messages as $type => $message) {
                        switch($type) {
                            case 'fileExtensionFalse':
                                $this->view->error = 'File must be an image (jpg, gif, png)';
                                break;
                            case 'fileUploadErrorNoFile':
                                $this->view->error = 'Please select a file to upload';
                                break;
                            default:
                                $this->view->error = implode("/n", $messages);
                                break;
                        }
                    }
                }
                    print_r($messages); die();
            }
        }
    } 
```

调整大小功能

```
 public function fastimagecopyresampled (&$dst_image, $src_image, $dst_x, $dst_y, $src_x, $src_y, $dst_w, $dst_h, $src_w, $src_h, $quality = 4)
    {
        if (empty($src_image) || empty($dst_image)) { return false; }
            if ($quality <= 1)
            {
                $temp = imagecreatetruecolor ($dst_w + 1, $dst_h + 1);
                imagecopyresized ($temp, $src_image, $dst_x, $dst_y, $src_x, $src_y, $dst_w + 1, $dst_h + 1, $src_w, $src_h);
                imagecopyresized ($dst_image, $temp, 0, 0, 0, 0, $dst_w, $dst_h, $dst_w, $dst_h);
                imagedestroy ($temp);
            }
            elseif ($quality < 5 && (($dst_w * $quality) < $src_w || ($dst_h * $quality) < $src_h))
            {
                $tmp_w = $dst_w * $quality;
                $tmp_h = $dst_h * $quality;
                $temp = imagecreatetruecolor ($tmp_w + 1, $tmp_h + 1);
                imagecopyresized ($temp, $src_image, 0, 0, $src_x, $src_y, $tmp_w + 1, $tmp_h + 1, $src_w, $src_h);
                imagecopyresampled ($dst_image, $temp, $dst_x, $dst_y, 0, 0, $dst_w, $dst_h, $tmp_w, $tmp_h);
                imagedestroy ($temp);
            } else
            {
                imagecopyresampled ($dst_image, $src_image, $dst_x, $dst_y, $src_x, $src_y, $dst_w, $dst_h, $src_w, $src_h);
            }
            return true;
    } 
```

我希望能够在上传时更改图像的大小和质量。访问我刚刚上传的文件的函数或调用是什么，或者我可以在保存文件之前对其进行操作吗？就像上传文件一样，通过我的函数传递它，然后让输出成为我的“保存”文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T14:04:47.803

创建您自己的过滤器。

[http://framework.zend.com/manual/1.12/en/zend.filter.writing_filters.html](http://framework.zend.com/manual/1.12/en/zend.filter.writing_filters.html)

```
class Resize implements Zend_Filter_Interface
{
    public function filter($value)
    {
        // perform some transformation upon $value to arrive on $valueFiltered

        return $valueFiltered;
    }
} 
```

在过滤器方法中，您将收到上传文件的路径。在那里调整它的大小并返回新路径。然后您可以在上传对象中分配此过滤器：

```
$upload->addFilter("Resize"); 
```

Zend_File_Transfer 过滤器的详细解释在[这里](http://framework.zend.com/manual/1.12/en/zend.file.transfer.filters.html)

# asp.net-mvc-3 - 本地化模型验证在 ie < 9 中不起作用

> ID：13297184
> 
> 赞同：0
> 
> 时间：2012-11-08T20:23:49.607
> 
> 标签：asp.net-mvc-3, localization, model-validation

我在我的 mvc 3 应用程序中使用本地化模型验证。我使用Required 属性和错误消息资源做到了这一点。这适用于几乎所有浏览器，除了 7 和 8。您可以在下面找到我使用的示例代码。

示例代码：

```
 [Required(ErrorMessageResourceName = "Error_field_is_required", ErrorMessageResourceType = typeof(Global))]
    [StringLength(90, ErrorMessageResourceName = "Error_max_string_90", ErrorMessageResourceType = typeof(Global))]
    public string LastName { get; set; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T22:13:56.490

验证模块与 jquery 的某些版本存在问题。我回到原来的版本，它又可以工作了。

# c++ - OpenCV Mat 格式

> ID：13297189
> 
> 赞同：2
> 
> 时间：2012-11-08T20:24:15.670
> 
> 标签：c++, opencv

读入图片

`Mat img=imread("i000qa-fn.jpg",CV_LOAD_IMAGE_COLOR);`

尝试寻找对象...

`faces = cvHaarDetectObjects(img,cascade, storage, 1.2, 2, CV_HAAR_DO_CANNY_PRUNING, Size(0, 0));`

和瓦拉...

`OpenCV Error: Bad flag (parameter or structure field) (Unrecognized or unsupported array type) in cvGetMat, file /media/Data/sdks/OpenCV-2.4.2/modules/core/src/array.cpp, line 2482`

当我做 imshow 时，图像就在那里。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T20:50:08.603

`cvHaarDetectObjects`期望`IplImage`或`CvMat`但您正在传递`cv::Mat`对象。

所以你需要这样的转换：

```
IplImage img1 = img;
faces = cvHaarDetectObjects(&img1, cascade, storage, 1.2, 2, CV_HAAR_DO_CANNY_PRUNING, Size(0, 0)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T13:50:03.477

不，Andrey (@AndreyKamaev)，你需要一个不同的函数：

```
#include <opencv2/core/core.hpp>
#include <opencv2/objdetect/objdetect.hpp>
using namespace cv;

Mat img = imread(img_path);
CascadeClassifier haar_cascade.load(path);

vector<Rect> detection_rois;
haar_cascade.detectMultiScale(img, detection_rois, 1.2, 2, 
                                  0|CV_HAAR_DO_CANNY_PRUNING); 
```

这就是自 2011 年 8 月以来的 Opencv 2.3.1 以来在 C++ 中使用 Haar 检测器的方式。[另外让我附上一份文档。](http://docs.opencv.org/modules/objdetect/doc/cascade_classification.html)

下面是一个证明。:) 我围绕这个 cv::CascadeClassifier 做了一个 Haar_detector 包装器——它*实际上是*一个具有类似 Haar 功能的 Adaboost 级联分类器，因此得名。

![证据](../Images/2e180ff457a9b39f9af9d183bf12806a.png)

# sql - 引发错误消息

> ID：13297191
> 
> 赞同：0
> 
> 时间：2012-11-08T20:24:19.373
> 
> 标签：sql, sql-server-2000

在 SQL Server 2000 中，我们没有设置 SQL 邮件（无论出于何种原因），我有一个 SQL 作业，它在计时器上运行包，但即使包中有一个 ActiveX 消息框，它仍然没有增加。我知道该消息可能确实会弹出，我不知道在哪里，但我仍然需要警告用户一些简单的事情，例如“包已完成”。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T20:34:06.613

作业在服务下运行`SQL Server Agent`，服务不允许与桌面交互。

尝试进入您的服务列表 ( `Start -> Control Panel -> Administrative Tools -> Services`)：

```
Right-click on the SQL Server Agent service -> Properties -> Log On -> 
      Check off "Allow service to interace with desktop". 
```

**一般来说，我不确定让工作与桌面交互是一个好主意。**更好的方法可能是设置一个任务来将消息写入事件日志，或者将一个条目写入它正在备份的数据库中。

# html - 如何在 CSS 中添加几个 td 和 tr

> ID：13297192
> 
> 赞同：2
> 
> 时间：2012-11-08T20:24:19.243
> 
> 标签：html, css, html-table, row

我有一个看起来像这样的 CSS：

**CSS**

```
table {   
 width: 100%;
 font-family: calibri;
 word-wrap:break-word;
 margin-left: 0; 
 font-size: 1.1em;
 border-collapse: separate;
 border-spacing: 1px;      
}

td {  
 text-transform: none;
 font-weight: bold;
 line-height: 115%;
 word-wrap:break-word;  
 vertical-align: middle; 
 padding: 2px 10px 0 3px ; 
 border-radius: 2px;
 border: 1px solid #6A797F;        
}   

tr:nth-child(odd){
 background-color: #a9c6c9; 
}

tr:nth-child(even){
 background-color: #d4e3e5;
} 
```

如何在 CSS 文件的某处添加单独的`<table>`, `<td>`& `<tr>`，我可以在其中更改样式以适应该特定页面的设计目的。我尝试了这个解决方案，但没有奏效：

```
.members_col1 tr td{
  text-transform: none;
  line-height: 115%;
  word-wrap: break-word;  
  vertical-align: left; 
} 
```

`.member_col1`是`<div>`包含`<table>`我想添加一组新样式的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T20:29:09.803

使用表中的属性 id 或类，然后将它们覆盖为 css 中的选择器，例如：

```
<table id="another-table">...

css
#another-table{
....
} 
```

或者

```
<table class="tables">...
<table class="tables">...

css
.tables{
...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T20:41:08.700

在你的 html 中使用它：

```
<table class="newTable">
...
</table> 
```

并使用这个 CSS：

```
.newTable tr td{
   text-transform: none !important;
   line-height: 115% !important;
   word-wrap:break-word !important;  
   vertical-align: left !important; 
   } 
```

# c# - 奇点模式类的范围是什么？（涉及多线程）

> ID：13297199
> 
> 赞同：0
> 
> 时间：2012-11-08T20:24:52.450
> 
> 标签：c#, multithreading, scope

对于我正在从事的一个项目，我正在将一个类作为一个奇点来实现。该类负责检测系统正在运行的阶段（开发、测试、生产等），并相应地返回某些值，因此我们的开发团队不必担心每次使用这些值时处理暂存设置。此外，它允许我们覆盖当前的阶段，以假装处于不同的阶段。

我关心的是在涉及多线程时奇点将如何表现。下面的代码概述了将使用的基本设置。

我的问题是，如果 program & program2 可以同时在不同的线程上运行，OverrideStage() 函数（它会更改实例中的私有变量）会干扰其他程序的预期行为吗？

例子：

1) 程序启动，为 DEV 搭建舞台

2) 在另一个线程上，Program2 启动，将阶段设置为 PRODUCTION

3）回到Program，尝试获取一个值，该值是DEV还是PRODUCTION？

```
namespace TESTING
{

class Program
{
    static void Run()
    {

        Staging stage = Staging.Instance;

        stage.OverrideStage(Staging.DEV);
            SqlConnection connDev = new SqlConnection(stage.ConnectionString("example")); // Connection to development database
            // Do Stuff
        stage.EndOverride();
            SqlConnection connBackToAuto = new SqlConnection(stage.ConnectionString("example")); // Connection to detected stage database
    }
}

class Program2
{             
    static void Run()
    {
        Staging s = Staging.Instance;
        s.OverrideStage(Staging.PRODUCTION);
            SqlConnection connDev = new SqlConnection(s.ConnectionString("example")); // Connection to production database
            // Do stuff
        s.EndOverride();
    }
}

} // End namespace 
```

我想这个问题可以简化为：

**s 和 stage 是同一个 Staging 实例吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T20:30:15.203

~~我不相信您的应用程序可以有两个主要入口点......您所描述的内容是不可行的，除非您指定多个入口点。~~

~~现在，如果可行（即您指定了多个入口点），那么~~

您更改模式的尝试`Staging`将导致更新两个程序实例的模式。

所以让我们看看你的例子：

```
1) Program starts, sets stage to DEV    
2) On another thread, Program2 starts, sets stage to PRODUCTION
3) Back in Program, try to get a value, will the value be in DEV or PRODUCTION? 
```

该值很可能是`PRODUCTION`，但可能并非如此，具体取决于线程的启动方式。它可能会变得复杂，因为如果两个线程一个接一个地相对较快地启动，那么该阶段可能是`DEV`或`PRODUCTION`取决于两个线程之间发生上下文切换的时间。

## 更新 1.0

由于删除了多个入口点，因为您已经用`Main`方法替换了`Run`方法。

## 更新 2.0

**单身还是不单身**

您所描述的情况非常令人困惑，主要是因为 Program 通常包含`Main`您的应用程序的入口点。在正常情况下，人们会期望程序要么在模式下运行，要么在`DEV`模式下运行`PRODUCTION`。在不同的线程和不同的模式下运行多个程序实例非常令人困惑！！！**我想不出任何人愿意这样做的现实例子。**

让我们假设有这样一个不起眼的例子：你最好的办法是为每个程序提供它自己的内部暂存状态，而不是全局（单例）暂存状态。这保证了您可以在多个线程中启动程序的多个实例，并且每个实例都可以相互独立地运行。您通常希望尽可能少地在线程之间共享——有些人将其称为[无共享架构](http://en.wikipedia.org/wiki/Shared_nothing_architecture)。

**什么是分期模式？**

如果您采用 Singleton 方法，那么这个问题将变得非常难以回答。

*   如果您有办法保证正在运行的线程`Program2`等待`Program`被初始化（通过某种[线程信号机制](https://stackoverflow.com/questions/2696052/thread-signaling-basics)），那么您就可以保证模式将为`PRODUCTION`.
*   如果您没有线程信号机制，那么该模式可能是`DEV`或`PRODUCTION`取决于许多问题。

实际上，您可以`Staging`在不同的命名空间中创建一个单独的类，并且根据您使用的模式来使用每个类。但是，这与维护两个单独的暂存类（即`DevStaging`和`ProductionStaging`. 您通常希望避免对同一事物进行两次编码，因此此选项开始看起来越来越不受欢迎。

一般来说，知道您当前处于哪种暂存模式的问题实际上与线程无关，当涉及线程时问题会被放大。您的`Staging`模式将更改的原因是因为两个程序都使用相同的暂存实例，该实例由暂存（单例）实例提供给它们。

# jquery - 同时缩放和淡出/jQuery

> ID：13297200
> 
> 赞同：0
> 
> 时间：2012-11-08T20:24:57.823
> 
> 标签：jquery

我有一个 id 为“text”的 h1 文本块，当单击“开始”按钮时，我想同时放大 h1 文本并同时将其淡出。

如果我使用 .animate 函数，我会知道如何执行此操作，方法是使用“queue: false”。但由于我没有使用 .animate，我将如何实现类似的效果？

这是我的代码...再次，我希望同时触发 scale 和 fadeOut...

```
 $("#start").click(function () {
      $("#text").hide("scale", {percent:3000}, 1000);
      $("#text").fadeOut(1000);
  }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T20:39:05.320

根据我的评论，你可以尝试这样的事情，如果你愿意，你可以选择缓存 jquery 对象，但如果你只使用一次，那么你真的不需要cacing。我还没有测试，但我认为它会工作

```
$( "#start" ).click(function(){
  $( "#text" ).animate( { opacity: "0" }, { queue: false, duration: 1000 }).hide("scale", {percent:3000}, 1000);
}); 
```

这是一个简单的例子[http://jsfiddle.net/rVNrY/](http://jsfiddle.net/rVNrY/)

# php - 注意：带有开关的数组中未定义的偏移错误

> ID：13297201
> 
> 赞同：-1
> 
> 时间：2012-11-08T20:24:58.823
> 
> 标签：php, arrays, switch-statement

这是我的带有选项的菜单的 PHP 代码。它有错误，请帮助我。

**代码**

```
<?php
                            $page_url = array();
                            $page_url[0]= "/bookslibrary.net/index.php";
                            $page_url[1]= "/bookslibrary.net/about.php";
                            $page_url[2]= "#";
                            $page_url[3]= "/bookslibrary.net/become-member.php";
                            $page_url[4]= "#";
                            $page_url[5]= "/bookslibrary.net/contact.php";

                            $page_urlActive = array();
                            $css_active = "class='active'";

                            switch ($_SERVER['PHP_SELF'])
                            {
                                case $page_url[0]: $page_urlActive[0] = $css_active; break;
                                case $page_url[1]: $page_urlActive[1] = $css_active; break;
                                case $page_url[2]: $page_urlActive[2] = $css_active; break;
                                case $page_url[3]: $page_urlActive[3] = $css_active; break;
                                case $page_url[4]: $page_urlActive[4] = $css_active; break;
                                case $page_url[5]: $page_urlActive[5] = $css_active; break;
                            } echo ("
                                <li $page_urlActive[0] ><a href='".$page_url[0]."'>Home</a></li>
                                <li $page_urlActive[1] ><a href='".$page_url[1]."'>About</a></li>
                                <li $page_urlActive[2] ><a href='".$page_url[2]."'>Books of the Month</a></li>
                                <li $page_urlActive[3] ><a href='".$page_url[3]."'>Become a Member</a></li>
                                <li $page_urlActive[4] ><a href='".$page_url[4]."'>Ahlus-Sunnah</a>
                                    <ul>
                                        <li><a href='#'>Web Directory</a></li>
                                        <li><a href='#'>Add Your Website</a></li>
                                    </ul>
                                </li>
                                <li $page_urlActive[5] ><a href='".$page_url[5]."'>Contact</a></li>
                            ");
                        ?> 
```

**错误**

注意：未定义的偏移量：第 34 行 (...FILE_PATH...)header.php 中的 1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T20:31:19.330

你`$page_urlActive`只包含一个项目，一个关键取决于你所在的页面。并且您正在尝试为所有索引回显元素，您可以通过使用所有索引初始化数组来摆脱此通知：

```
$page_urlActive = array_fill(0, 6, ''); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T20:29:11.103

问题是`$page_urlActive`可能无法根据活动页面设置的特定索引（0-5）。

更好的方法是重构代码以循环遍历`$page_url`数组。如果当前`$page_url`等于请求的页面，则在循环测试内部。如果是，则输出适当的`class`属性。这将删除许多不必要的代码（例如`switch`，`$page_urlActive`）。

虽然我提倡干净的代码，但归根结底，这只是一个*通知*，而不是一个硬性*错误*。

# xml - Eventbrite XML 搜索不起作用

> ID：13297202
> 
> 赞同：1
> 
> 时间：2012-11-08T20:24:58.907
> 
> 标签：xml, search, eventbrite

我一直在使用： [https](https://www.eventbrite.com/xml/event_search) ://www.eventbrite.com/xml/event_search ?...

...现在已经有一段时间了，最​​后一次搜索工作大约是中部标准时间下午 3 点 - 2012 年 11 月 6 日。

cron 在过去 9 个月中每 15 分钟运行一次，但现在当搜索发生时，它说没有事件。（事件不会再发生 2 周）

还有谁有相同的问题吗？

/罗杰

# css - 灵活的 CSS 列

> ID：13297203
> 
> 赞同：0
> 
> 时间：2012-11-08T20:25:11.020
> 
> 标签：css, multiple-columns

我正在寻找一种解决方案，其中列表中的一堆相同大小的图像将在一个灵活的列中排序，如布局：

```
 _  _  _  __  __  __
|1||4||7||10||13||16|
 _  _  _  __  __  __
|2||5||8||11||14||17|
 _  _  _  __  __  __
|3||6||9||12||15||18| 
```

容器的宽度应该是灵活的，以便它可以水平扩展。该解决方案只需要在尖端浏览器中工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T20:45:22.613

我给你的礼物...

```
.cols {
  margin:30px -1em -30px 0;
  padding:0;
  text-align:left;
  overflow:visible !important;
  zoom:1;
}
.cols + * {
    clear: both;
}
.cols:before {
  content:'';
  display:block;
}
.cols:after {
  content:'';
  display:table;
  clear:both;
}
.cols .break {
  width:100% !important;
  clear:both;
  height:0;
  padding:0;
  display:none;
}
.cols > li {
  margin:0 0 30px 0;
  padding:0 1em 0 0;
  list-style:none;
  float:left;
  display:block;
  position:relative;
}
.cols > li > *:first-child { margin-top:0; }
.cols > li > *:last-child { margin-bottom:0; }
.cols > li > ul:last-child { margin-bottom:-30px; }
.cols.boxxes > li, .cols.image-strip li { margin:0 0 1em 0; }
.cols.boxxes > li:last-child, .cols.image-strip li:last-child { margin:0 0 30px 0; }
.cols.with2 > li { width:50%; }
.cols.with2 > li.take2 { width:100%; }
.cols.with3 > li { width:33.3333%; }
.cols.with3 > li.take2 { width:66.6666%; }
.cols.with3 > li.take3 { width:100%; }
.cols.with4 > li { width:25%; }
.cols.with4 > li.take2 { width:50%; }
.cols.with4 > li.take3 { width:75%; }
.cols.with4 > li.take4 { width:100%; }
.cols.with5 > li { width:20%; }
.cols.with5 > li.take2 { width:40%; }
.cols.with5 > li.take3 { width:60%; }
.cols.with5 > li.take4 { width:80%; }
.cols.with5 > li.take5 { width:100%; }
.cols.with6 > li { width:16.6666%; }
.cols.with6 > li.take2 { width:33.3333%; }
.cols.with6 > li.take3 { width:50%; }
.cols.with6 > li.take4 { width:66.6666%; }
.cols.with6 > li.take5 { width:83.3333%; }
.cols.with6 > li.take6 { width:100%; } 
```

设置成这样...

```
/* 5 cols */
<ul class="cols with5">
    <li>...</li>
    <li>...</li>
    <li>...</li>
    <li>...</li>
    <li>...</li>
</ul>

/* 3 cols 3/5, 1/5, 1/5*/
<ul class="cols with5">
    <li class="take3">...</li>
    <li>...</li>
    <li>...</li>
</ul> 
```

/* 等等 */

你可以用它做大约 40 种不同的液柱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T20:39:29.517

好吧，似乎 CSS[多列布局](https://developer.mozilla.org/en-US/docs/CSS/Using_CSS_multi-column_layouts)正是我所需要的。

# java - 在java中将double与int进行比较是否有效？

> ID：13297207
> 
> 赞同：36
> 
> 时间：2012-11-08T20:25:18.900
> 
> 标签：java, comparison, int, double, primitive-types

```
Utilities.getDistance(uni, enemyuni) <= uni.getAttackRange() 
```

Utilities.getDistance 返回 double 并且 getAttackRange 返回 int。上面的代码是 if 语句的一部分，它必须是真的。那么比较有效吗？

谢谢

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-11-08T20:28:42.200

是的，它是有效的——它会在执行比较之前将 提升`int`为 a 。`double`

请参阅[JLS 第 15.20.1 节（数字比较运算符）](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.20.1)，该节链接到[JLS 第 5.6.2 节（二进制数字提升）](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.6.2)。

从后者：

> 加宽原语转换（第 5.1.2 节）适用于转换以下规则指定的一个或两个操作数：
> 
> *   如果任一操作数是 double 类型，则另一个操作数将转换为 double。
>     
>     
> *   ...

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-08T20:32:17.600

当使用两种不同的数值类型执行操作（包括比较）时，Java 将执行隐式扩展转换。这意味着当您将 a`double`与a 进行比较时`int`，将`int`转换为 a `double`，以便 Java 可以将值作为两个`double`s 进行比较。所以简短的回答是肯定的，比较一个 int 和一个 double 是有效的，但需要注意的是。

`==`问题是您不应该使用、`<=`或运算符比较两个浮点值是否相等，`>=`因为可能存在精度错误。此外，您需要注意 double 可以采用的特殊值：`NaN`、`POSITIVE_INFINITY`和`NEGATIVE_INFINITY`. `double`我强烈建议您在比较s时进行一些研究并了解这些问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-08T20:29:28.253

这应该没问题。**在浮点运算/比较中，如果一个参数是浮点/双精度，**那么**另一个是 int 的参数也会被提升为相同参数。**

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-08-13T14:21:15.010

是的，比较 int 数据类型和 double 数据类型是绝对有效的。

```
int i =10;
double j= 10.0;
 if (i==j)
{
System.out.println("IT IS TRUE");
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-07-11T11:26:20.907

是的，它有效，并且您的代码应该可以按预期工作而不会出现任何故障，但这不是最佳实践，像 SonarQube 这样的静态代码分析器将其显示为“主要”“错误”，

[来自 sonarQube 的主要错误 img](https://i.stack.imgur.com/Aad4y.png)

[来自 sonarQube 的主要错误描述](https://i.stack.imgur.com/mnYUC.png)

所以，正确的做法是，

```
Double.compare(val1,val2)==0 
```

如果任何参数不是浮点变量，它们将被提升为浮点。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-08T20:29:44.327

一切都会安好的。

Java 将简单地返回 true 的数值是否相等：

```
 int n = 10;
    double f = 10.0;
    System.out.println(f==n); 
```

上面的代码打印为 true。

# facebook - Facebook 登录 URL 只是重定向到主页

> ID：13297210
> 
> 赞同：1
> 
> 时间：2012-11-08T20:25:23.023
> 
> 标签：facebook, login

我有一个在弹出窗口中打开此 URL 的应用程序（已删除敏感值）。

```
https://www.facebook.com/login.php?api_key=my_key&cancel_url=my_url&display=popup&fbconnect=1&next=my_other_url&return_session=1&session_version=3&v=1.0&req_perms=read_stream%2Cpublish_actions%2Cpublish_stream%2Coffline_access%2Cmanage_pages%2Cread_stream%2Cemail%2Cread_insights 
```

它在几周前起作用了。现在，如果用户登录到 FB，他们只会被重定向到 FB 主页。如果他们已注销，FB 会提示登录，但随后他们会看到一个页面，显示我的应用程序出错。

我不确定是什么改变使它退出工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T21:36:43.820

旧的非 OAuth 端点（例如 login.php）最近已被弃用。如果您使用的是 php sdk，则必须升级到支持 OAuth 的最新版本。否则，请查看网络入门指南以获取更多信息 - [https://developers.facebook.com/docs/guides/web/](https://developers.facebook.com/docs/guides/web/)

# javascript - 单击事件未在 iphone/ipad 上的固定位置页脚中触发

> ID：13297215
> 
> 赞同：1
> 
> 时间：2012-11-08T20:25:37.470
> 
> 标签：javascript, html, ios

所以我在 iphone/ipad 上呈现的页面中的点击事件遇到了一些困难。这适用于我检查过的所有桌面浏览器以及 android 中。问题在于单击页脚中的 LI。我试图通过以下方式将点击事件附加到页脚元素：

```
$('#footer li').live('click', function(e) { 

        Site.loadpage($(this).attr('page') + '.html');

}); 
```

但什么也没有发生（没有 javascript 错误或任何东西）。因此，为了获取更多信息，我添加了一个更通用的点击事件，也许我会发现其他一些元素阻碍了捕获事件的方式：

```
$('*').live('click', function(e) { 

    alert(e.target);

}); 
```

通过此事件，我可以单击页面上的任何位置，并收到有关我单击的元素类型的警报。**除了在页脚**中，什么都没有发生。

这是有关我正在使用的页面的更多信息，如有必要，我可以提供更多信息，唯一可能相关的另一件事是我正在为此使用 jquery（显然）。

我有一个具有以下结构的页面：

```
<body>
        <div id="header">

        </div>

        <div id="content">

        </div>

        <div id="footer">
            <ul>
                <li page="projects" class="projects"><span>Projects</span></li>
                <li page="people" class="people active"><span>People</span></li>    
                <li page="assignments" class="assignments"><span>Assignments</span></li>
                <li page="search" class="search"><span>Search</span></li>
                <li page="more" class="more"><span>More</span></li>
            </ul>
        </div>
</body> 
```

以及以下 CSS：

```
html { 

    height:100%; 
    width: 100%;
    margin:0; 
    overflow: hidden; 
    padding: 0px; 
    position: fixed;
    text-shadow: 0px 0px 0px transparent !important;
    letter-spacing: 0px;
    font-family: Helvetica;
    font-weight: bold;
}

body { 

    padding: 0px;
    margin: 0px; 
    height: 100%;
    width: 100%;
    overflow: hidden;
    font-family: Helvetica;
}

#header { 

    background: url(../images/devices/iphone/header.jpg); 
    color: white;
    position: fixed;
    top: 0px;
    left: 0px;
    right: 0px;
    height: 45px; /* ADJUST FOR IPAD */
    box-shadow: -5px -5px 4px 7px #888;
}

#header .center { 

    position: static;
    display: block;
    width: 100%;
    max-height: 45px; /* ADJUST FOR IPAD */
    text-align: center;

}

#header h1.center { margin: 8px 0px 10px 0px; }

#content { 

    position: absolute;
    bottom: 48px;
    top: 45px;
    left: 0px;
    right: 0px;
    overflow: hidden;

}

#footer { 

    background: url(../images/devices/iphone/header.jpg);
    background-size: 48px 100%;
    position: absolute;
    bottom: 0px;
    left: 0px;
    right: 0px;
    height: 48px; /* ADJUST FOR IPAD */
    color: white;
    text-align: center;
}

#footer { text-align: center; }
#footer ul { list-style-type: none; padding-left: 0px; margin-left: auto; margin-right: auto; margin-top: 1px; font-size: 8px; }
#footer li { padding-top: 35px; padding-bottom: 1px; display: inline-block; background-image: url(../images/inactive-menu.png); width: 62px; background-size: 312px; }
#footer li.active { background-image: url(../images/active-menu.png); }
#footer li span { width: 57px; padding-top: 10px; }
#footer li.projects { background-position: 0px 0px;}
#footer li.people { background-position: -62px 0px;}
#footer li.assignments { background-position: -124px 0px;}
#footer li.search { background-position: -187px 0px;}
#footer li.more { background-position: -250px 0px;} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T21:38:01.677

出于某种原因，我不相信 iOS 中的 live 作品。尝试 .on() ，应该可以。

```
$('*').on('click', function(e) { 

    alert(e.target);

}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T22:52:40.967

我有同样的问题。试图在此页脚元素上提醒事件没有运气。偶然我尝试了：

```
$('*').on('touchend', function(e) {}); 
```

请注意，我使用 'touchend' 作为触发事件，并且还设置了：

```
cursor: pointer; 
```

在 iPhone 3GS、iOS 5.1.1 上测试。

祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T22:02:59.240

为什么不使用触摸事件而不是单击事件，它是鼠标事件，而不是触摸屏事件 - touchstart 和 touchend 作为触摸屏事件更有意义

# python - 在哪里使用 ipython 以及 ipthon shell 在哪里？

> ID：13297219
> 
> 赞同：5
> 
> 时间：2012-11-08T20:26:01.867
> 
> 标签：python, ipython

我已经安装了ipython，但我不知道如何使用它。我在哪里可以找到 ipython shell？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T20:26:58.673

To use ipython, just go to the command line, and run the command `ipython`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-08T20:40:29.930

> 使用以下命令启动 IPython：
> 
> `$ ipython [options] files`

请参阅[http://ipython.org/ipython-doc/stable/interactive/reference.html#command-line-usage](http://ipython.org/ipython-doc/stable/interactive/reference.html#command-line-usage)

您要么必须在安装了 ipython 的目录中，要么将目录添加到路径中。

您可以通过`Alt`双击`My Computer`、选择`Advanced Options`、`Environment`找到`PATH`环境变量并添加`ipython`安装目录来执行此操作。

启动一个新的命令提示符并键入`ipython`应该启动解释器。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-08T20:28:19.677

打开你的终端，输入`ipython`并运行。

编辑：您是否设置`ipython`了环境变量？[这](http://ipython.org/ipython-doc/rel-0.10.2/html/config/initial_config.html)是 ipython.org 的初始配置指南

编辑：也许您还需要从[http://pypi.python.org/pypi/setuptools安装 setuptools](http://pypi.python.org/pypi/setuptools)

来源：[IPython 不会启动](https://stackoverflow.com/questions/8287422/ipython-wont-start)

# batch-file - 复制除包含“skipthisfolder.txt”文件的所有文件夹

> ID：13297224
> 
> 赞同：0
> 
> 时间：2012-11-08T20:26:22.017
> 
> 标签：batch-file, vbscript, copy, directory

我想做一个执行以下操作的脚本：

*   COPY 从“D:\”到“F:\”的所有文件夹和所有文件，但
*   跳过包含“skipthisfolder.txt”文件的所有文件夹

我应该使用哪种脚本语言？（为了在 Windows 中轻松运行，无需任何第三方软件？）我想到了 .BAT 或 VBS。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T20:56:44.617

您可以使用 CMD 批处理文件，如下所示：

```
@echo off
for /r D:\ %%a in (.) do (
  IF NOT EXIST "%%~fa\skipthisfolder.txt" XCOPY "%%~fa" "F:%%~pna"
) 
```

**编辑：**如果您还需要在`skipthisfolder.txt`找到文件时跳过子文件夹，那么这可能是一个解决方案：

```
@setlocal enableextensions enabledelayedexpansion
@echo off

set skip=@

for /r D:\ %%a in (.) do (
  echo %%a | findstr /c:"!skip!" > nul
  if !errorlevel!==1 IF EXIST "%%~fa\skipthisfolder.txt" set skip=%%~dpna
  echo %%a | findstr /c:"!skip!" > nul
  if !errorlevel!==1 XCOPY /D "%%~fa" "F:%%~pna"
)
endlocal 
```

# xml - 空跨兄弟成为前辈

> ID：13297230
> 
> 赞同：1
> 
> 时间：2012-11-08T20:26:47.483
> 
> 标签：xml, xslt

什么会导致`<span></span><span></span><span></span>`转换为`<span><span><span></span></span></span>`，但不转换`<span>a</span><span>a</span><span>a</span>`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T03:49:33.413

**使用**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()[1]|@*"/>
  </xsl:copy>
  <xsl:apply-templates select="following-sibling::node()[1]"/>
 </xsl:template>

  <xsl:template match="span[not(node())]">
  <span>
   <xsl:apply-templates select="following-sibling::*[1][self::span[not(node())]]"/>
  </span>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于以下文档时**（提供的片段，包装到单个顶部元素中 - 将成为格式良好的 XML 文档）：

```
<p>
<span></span><span></span><span></span>
</p 
```

**产生了想要的正确结果**：

```
<p>
   <span>
      <span>
         <span/>
      </span>
   </span>
</p> 
```

**此外，根据需要，如果我们对这个 XML 文档应用相同的转换（如上）**：

```
<p>
 <span>a</span><span>a</span><span>a</span>
 <span></span><span></span><span></span>
</p> 
```

**结果保留“原样”`span`具有子节点的元素**：

```
<p>
   <span>a</span>
   <span>a</span>
   <span>a</span>
   <span>
      <span>
         <span/>
      </span>
   </span>
</p> 
```

**说明**：

1.  我们使用“细粒度”身份规则，它“按原样”复制每个节点，并且一步只复制一个节点。

2.  `span`有一个模板可以覆盖任何没有子节点的元素的细粒度标识模板。它重新创建元素并处理也是空`span`元素的第一个兄弟。

# javascript - 使用 jQuery mobile 在我的页面周围设置边框

> ID：13297232
> 
> 赞同：0
> 
> 时间：2012-11-08T20:26:49.337
> 
> 标签：javascript, jquery, jquery-mobile

我在我的页面上使用 jQuery mobile 1.2.0，出于某种原因，它在我的页面上添加了一个边框，并在页面底部显示了一条消息“正在加载”。
当我从我的页面中删除 jQuery 手机时，没有边框或消息。
[http://i.stack.imgur.com/zfotX.jpg](http://i.stack.imgur.com/zfotX.jpg)

# c - 函数声明顺序在 c 语言中很重要，还是我做错了什么？

> ID：13297233
> 
> 赞同：5
> 
> 时间：2012-11-08T20:26:51.797
> 
> 标签：c, function, declaration

我收到此错误：

```
arthur@arthur-VirtualBox:~/Desktop$ gcc -o hw -ansi hw1.c
hw1.c: In function `main':
hw1.c:27:16: warning: assignment makes pointer from integer without a cast [enabled by default]
hw1.c: At top level:
hw1.c:69:7: error: conflicting types for `randomStr'
hw1.c:27:18: note: previous implicit declaration of `randomStr' was here 
```

编译此代码时：

```
#include <stdio.h>
#include <stdlib.h>

int main(int argc, char** argv)
{
        char *rndStr;
        rndStr = randomStr(FILE_SIZE);
        /* Do stuff */
        return 0;
}

/*Generate a random string*/
char* randomStr(int length)
{
        char *result;
        /*Do stuff*/
        return result;
} 
```

如果我切换它的功能顺序，为什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-08T20:30:37.833

除了少数例外，C 中的标识符在声明之前不能使用。

以下是如何在其定义之外声明函数：

```
// Declare randomStr function
char *randomStr(int length); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-08T20:29:53.890

发生错误是因为符号通常必须在使用*之前*声明，而不是之后。

一个特殊的例外是函数。如果在声明之前使用它们，则会推断出特定的声明。在您的情况下，推断的声明与最终定义不匹配。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-08T21:12:05.163

在 C89 及更早版本中，如果编译器在相应的声明或定义之前看到函数*调用*，则假定该函数返回`int`. 同样，如果您将类型说明符从函数定义中删除，则假定它会返回`int`（这就是为什么许多较旧的示例都有一个条目 just`main() {...}`而不是`int main(void) {...}`）。

由于调用`randomStr`发生在其声明/定义之前，因此假定为 return `int`，这与不兼容`char *`（如果没有显式强制转换，您不能将一个值分配给另一个），因此会出现错误。

从 C99 开始，不再允许隐式类型。

该`-ansi`选项导致`gcc`编译为 C89。要编译为 C99，请`-std=c99`改用。

我通常将函数定义在第一次使用之前放在同一个文件中，因此我的代码从下向上读取（`main`通常是文件中定义的最后一个函数）。这样我就不必担心保持声明和定义的正确性。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-08T20:34:47.737

您需要在使用尚未定义的函数的任何函数之前放置函数声明。

例如：

```
int doesFileExist(const char* str); 
```

会去之前`main()`。

这样做的原因是 C 编译器会运行您的代码，并且每次它看到一个函数时，它都会查看该函数是否已被定义。如果它找不到该功能，它会给你一个错误。`main()`uses `doesFileExist()`，在编译器查看时尚未声明`main()`。为了解决这个问题，你可以在顶部声明一个函数，正如我上面提到的。这告诉编译器，虽然一个函数还没有被填充，但它会在以后被填充，所以把它当作函数确实存在，然后在你以后找到函数后去连接它们（即，在`main()`函数之后的某个地方）。

`main()`您的第二个代码块有效，因为编译器已经定义了您在到达那里时使用的那些函数。您的第一个块不起作用，因为这些函数既没有定义也没有声明它们将在以后定义。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-08T22:34:01.593

只需添加一个函数原型

```
#include <stdio.h>
#include <stdlib.h>

char* randomStr(int length);

int main(int argc, char** argv)
{
        char *rndStr;
        rndStr = randomStr(FILE_SIZE);
        /* Do stuff */
        return 0;
}

/*Generate a random string*/
char* randomStr(int length)
{
        char *result;
        /*Do stuff*/
        return result;
} 
```

# delphi - 在单个 DCU 中编译多个单元

> ID：13297234
> 
> 赞同：2
> 
> 时间：2012-11-08T20:26:56.890
> 
> 标签：delphi, dll, dcu

来自 .NET 背景，现在使用 Delphi。在 .NET 中，我曾经有一个单独的库项目，其中许多类被分成不同的文件。当我编译这个项目时，我得到了一个 DLL 文件。

但是，我无法在 Delphi 中做到这一点。我有很多类，每个类都有自己的文件，都有自己的单位名称（我没有找到让多个文件具有相同单位名称的方法）。当我编译我的项目时，我的项目中的每个单元都有一个 DCU 文件（我相信这相当于一个 .NET DLL？）。

问题是我不想拥有那么多文件！我希望我的所有课程都在不同的单元中只有一个 DCU 文件。有没有办法实现我想做的事情？您如何处理这些 DCU？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-08T20:49:50.033

`.DCU`（Delphi 编译单元）文件是在编译源（文本）和链接可执行文件之间使用的二进制文件。它们由编译器创建，在内存中连接在一起，与启动代码组合并由链接器放入实际的可执行文件（.EXE/.DLL/.BPL）中。

`.DCU`文件不是`.DLL`（动态链接库）文件，尽管 Delphi 可以组合一个或多个`.dcu`文件并链接到`.DLL`.

大多数时候文件的数量`.dcu`是没有意义的；这是您需要关注的 .pas 源文件，您创建的每个源单元都有一个。如果源文件发生更改，它们将根据需要重新创建，或者如果源文件未更改链接速度，则在其编译状态下使用它们。`.dcu`在你的uses 子句中，每个文件总是有一个文件`.pas`，另外还有一个文件用于编译你自己的源代码。

当你在 IDE 的 Component Palette 中安装一个组件时，.dcu 被放置在一个`.BPL`（Borland Package Library）中，这是一种特殊类型的 DLL；然后将该 BPL 或包文件作为执行代码加载到 IDE 中。这就是设计时按钮在表单上的视觉显示方式；BPL 中执行的代码实际上创建了一个按钮，并允许它在表单编辑器中显示和操作。

当您构建可执行文件（并且不使用运行时包）时，DCU 文件将链接到您的应用程序中，并且一旦创建可执行文件 (.EXE) 文件，原始`.pas`文件或`.dcu`不再需要该文件。（直到，也就是说，您需要对可执行文件进行更改，在这种情况下，`.pas`文件被修改，编译器创建一个新`.dcu`的，链接器将它们组合起来创建一个新的 .exe。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T00:23:58.673

.DCU 文件是在开发过程中使用的中间文件。

.DCU 文件未随最终可执行 .EXE 文件一起提供

是的，它可以用 Delphi 构建一个 .DLL 并让一个（Delphi 制造的）.EXE 使用它。如果遵循某些约定，常规的 C/C++ .EXE 也可以使用 Delphi .DLL。

如果您想将一组过程/类发送到库中，可以制作 .DLL 或（更接近 Delphi 原生的）.BPL。

每次修改和重新编译 .PAS 文件时，它对应的 .DCU 文件也会重新生成。

在某些开发环境中，当开发人员不想公开源代码时，会向开发人员提供 .DCU 文件而不是源 .PAS 文件。

# php - PDO INSERT 语句未插入

> ID：13297241
> 
> 赞同：-1
> 
> 时间：2012-11-08T20:27:20.453
> 
> 标签：php, mysql, pdo

感谢 SO 社区中的许多人，我一直在尝试将所有内容都切换到 PDO。我有一个 INSERT INTO 语句，我尝试转换为 PDO，但它没有插入。我也没有收到任何错误。

这是我试图转换的内容：

```
<?php
session_start();
$con = mysql_connect("host", "username", "password", "DBname"); 
$username = $_SESSION['username'];
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("dbname", $con);

mysql_query("INSERT INTO badge_status (username, badge1)
VALUES ('$username', 'finished')");

mysql_close($con);
?> 
```

PDO 版本

```
<?php
session_start();
$db = new PDO('mysql:host=hostname;dbname=dbname;charset=UTF-8', 'username', 'password');
$username = $_SESSION['jigowatt']['username'];
$awardFinished = $db->prepare('INSERT INTO badge_status (username, badge1) VALUES ('$username', 'finished')');
?> 
```

感谢您能了解正在发生的事情或可以解决此问题！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-08T20:29:27.487

用 准备好语句后`$awardFinished = $db->prepare(...);`，您必须执行它：

```
$awardFinished->execute(); 
```

另外，我不确定这是否只是您的帖子或您的实际代码中的错误，但您在这里使用了无效的单引号：

```
$db->prepare('INSERT INTO badge_status (username, badge1) VALUES ('$username', 'finished')'); 
```

不管解决*这个*问题，您都在使用准备好的语句；您不应该直接将变量插入到查询中。

尝试更新为：

```
$awardFinished = $db->prepare('INSERT INTO badge_status (username, badge1) VALUES (:username, "finished")');
$awardFinished->execute(array(':username' => $username)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T20:35:49.323

我看到的第一个问题是查询中的那些单引号，您需要转义它们：

`'INSERT INTO badge_status (username, badge1) VALUES (\'$username\', \'finished\')'`

接下来你需要`execute`声明：

`$awardFinished->execute();`

您不会收到错误，因为您需要告诉 PDO 抛出如下异常：

```
$db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

try {
    // .. prepare ..
    $awardFinished->execute();
} catch (PDOException $e) {
    echo $e->getMessage();
} 
```

# windows - 类型库作为资源 - 什么会导致 LoadTypeLib 失败？

> ID：13297242
> 
> 赞同：1
> 
> 时间：2012-11-08T20:27:22.333
> 
> 标签：windows, resources, automation, typelib

我为 COM 自动化创建了一个类型库，并希望将其作为资源嵌入我的 EXE 文件中。我已经添加了

```
1 TYPELIB "myfile.tlb" 
```

到 RC 文件。

但是，调用`LoadTypeLib`此 EXE 文件失败并显示`TYPE_E_CANTLOADLIBRARY`. 为了验证类型库是否真的在 EXE 中，我直接在 Visual Studio 中打开了 EXE 并查看了它的资源。实际上，没有显示类型库。这是否真的意味着类型库不存在，或者直接打开 EXE 时它从未出现在 Visual Studio 中？

**注意：**类型库尚未（尚未）注册；这是故意的。如果我的理解是正确的，那么这无关紧要，因为我传递的路径`LoadTypeLib`指定了 EXE 的确切位置。

**更新：**当我将 TLB 的完整路径传递给`LoadTypeLib`. 所以它必须与将TLB作为资源嵌入EXE中有关。

# c++ - 为什么while的条件在do while范围之外

> ID：13297243
> 
> 赞同：35
> 
> 时间：2012-11-08T20:27:22.613
> 
> 标签：c++, scope, do-while

通常我们需要这样的循环

```
do
{
     Type value(GetCurrentValue());
     Process(value);
}while(condition(value)); 
```

不幸的是，这不会编译，因为`value`的范围以`}`. 这意味着我必须在循环之外声明它。

```
Type value;
do
{
    value = GetCurrentValue(); 
    Process(value);
}while(condition(value)); 
```

我不喜欢这个至少有两个原因。一方面，我喜欢在本地声明事情。其次，如果 value 不可分配或默认构造，而只能复制构造，则这是一个问题。

所以，我的问题有两个方面。首先，我想知道将 do while 的范围扩展到最终条件是否有特定的原因/困难（就像在 for 循环中声明的变量的范围包括 for 循环的主体，尽管它在物理上是括号外）。如果你相信我的第一个问题的答案是“事情就是这样。不要问为什么问题。” 那么我想知道是否有成语可以帮助编写类似于我的示例中的 do-while 循环，但没有我提到的缺点。

希望问题很清楚。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-08T20:30:02.727

如果您想`value`为 while 循环保留本地范围，您可以这样做：

```
do
{
     Type value(GetCurrentValue());
     Process(value);
     if (! condition(value) )
         break;
} while(true); 
```

这只是个人喜好，但我发现`while`类似以下结构的循环更具可读性（`while`而不是`do-while`）：

```
while(true) {
    Type value(GetCurrentValue());
    Process(value);
    if (! condition(value) ) {
        break;
    }
} 
```

C/C++ 中的作用域规则如下：在大括号`{...}`块中声明的局部变量是本地的/仅对该块可见。例如：

```
int a = 1;
int b = 2; 
{
    int c = 3;
}
std::cout << a;
std::cout << b;
std::cout << c; 
```

会抱怨`c`未申报。

至于基本原理 - 这只是一致性问题，“这就是语言的定义方式”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-09-17T08:53:20.227

[在do-while 循环](https://en.cppreference.com/w/cpp/language/do)体中声明的变量超出其条件表达式的范围是有充分理由的：减少由于未初始化变量而处理未定义行为的可能性。

考虑您的示例代码段的细微变化：

```
do {
     if (not_ready_yet()) {
         sleep(1);
         continue;
     }
     Type value(GetCurrentValue());
     Process(value);
} while (condition(value)); // error 
```

如果 C++ 允许在循环条件中使用循环范围的变量，这种跳转（通过`continue`）到条件表达式将产生未定义的行为，因为它访问了一个未初始化的变量（`value`在我们的示例中）。

有了它的样子，就不会犯这样的错误。

* * *

由于 C++ 允许以多种方式使用未初始化的变量，例如

```
for (int j; j<10; ++j)
    do_something(); 
```

或者

```
int foo(int i) {
    if (i > 10)
        goto end;
    int x = 23;
end:
    return x;
} 
```

要不就

```
int foo(int i)
{
    int k;
    return k + i + 1;
} 
```

首先，上述原因可能不是驱动 do-while 循环的设计者的原因。

* * *

以当前方式使用它可以简化编译器（和语言），因为作为 do-while 循环体的复合语句具有与所有其他复合语句完全相同的范围规则。

对于必须处理有限资源的早期 C 编译器来说，这可能是一个强有力的论据。由于 C++ 是基于 C 构建的，因此有强烈的动机不改变这些基本的设计决策。

* * *

看看理论上的替代方案，除了改变范围规则只是为了做，像这样的东西可能是一个选择：

```
do (Type value(GetCurrentValue())) {
     Process(value);
} while (condition(value)); 
```

但是，这可能会使人们对是否`value`每次迭代都重新初始化感到困惑。

* * *

不过，使用当前的语言，像这样重写它并不算太糟糕：

```
for (;;) {
     Type value(GetCurrentValue());
     Process(value);
     if (!condition(value))
         break;
} 
```

只比原始代码段多一行。并且打字少于：

```
do {
     Type value(GetCurrentValue());
     Process(value);
     if (!condition(value))
         break;
} while (true); 
```

# svn - SVN 外部和修订协会

> ID：13297244
> 
> 赞同：2
> 
> 时间：2012-11-08T20:27:34.917
> 
> 标签：svn, svn-externals

我想使用 SVN externals 在不同项目之间共享代码文件。我需要向您询问有关该功能的问题，但请通过解释情况来解决。

1.  我在 SVN 上创建了两个项目（目录）：“A”和“B”。
2.  “A”包含要在其他项目之间共享的文件，其中一个名为“shared.txt”。
3.  “shared.txt”链接到“B”（使用“B”的 svn:externals 属性）。
4.  除此之外，“B”还包含其他源代码文件（一个完整的项目）。

现在的问题。我检查了一些旧版本的“B”，以找出我会得到的“shared.txt”的哪个版本。**不幸的是，无论我从我的测试存储库下载了哪个历史版本的“B”，我总是得到最新版本的“shared.txt”。**

假设我想从几个月前下载项目“B”。在这几个月中，“shared.txt”经历了许多变化。但我想下载一个完整的项目，就像几个月前一样，以及当时的外部项目。

**如果不手动寻找每个外部的适当修订版，这可能吗？**我知道我可以将特定版本的外部组件关联到我的测试项目“B”，但这不是解决方案。我想如果我这样做，我将永远无法访问最新的外部组件，即使我查看了最新版本的“B”。我是对还是错？

感谢您的帮助（对不起，如果我的问题已经被问到，但我找不到任何类似的问题）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T23:29:07.527

是的，这种形式的问题是前一段时间在这里提出的（比如“当 svn up -r {DATE} 在 superrepo URL 中，使用*这个日期*进行外部更新，如果它们是 HEAD 链接的”），它仍然没有好答案

发现的答案是“您必须`cd`进入所有外部 WC /directory-externals/ 并`svn up -r {DATE}`获得同步状态”。我没有回答文件回购

**替代解决方案**

开发过程中的动作更多，时间倒退的动作更少

*   始终使用 PEG-revision 定义外部
*   监控提交（因此 - 更改最高版本）到外部
*   在外部提交之后，通过额外的提交来更改外部定义（也许可以在提交后挂钩中编写脚本以用于 repo-external）

ASF 的 FR “递归处理主仓库中 {DATE} 操作的子仓库”将很有用

# xml - plsql DBMS_XMLDOM 如何检查节点是否为空？

> ID：13297245
> 
> 赞同：0
> 
> 时间：2012-11-08T20:27:36.513
> 
> 标签：xml, dom, plsql, database

对于这个 xml 文件：

```
<ROOT>
  <A>
    <B>2</B>
    <C>3</C>
    <D>
      <E>12</E>
    </D>
    <F/>
    <G/>
  </A> 
</ROOT> 
```

我怎样才能得到像 B 和 C 这样的节点的数量，其中有一个值但没有子节点？

在这种情况下，数字应该是 2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T00:22:04.693

如果您知道您想要哪个特定节点（大多数时候您都知道），我更喜欢使用 XPath 来选择节点（更少的编码）。

考虑这个简短的示例：

```
 set serveroutput on;
 declare
   XML CLOB;
   XML_DOCUMENT DBMS_XMLDOM.DOMDOCUMENT;
   XML_NODE DBMS_XMLDOM.DOMNODE;
 begin
   XML := '
   <ROOT>
     <A>
       <B>2</B>
       <C>3</C>
       <D>
         <E>12</E>
       </D>
       <F/>
       <G/>
     </A> 
   </ROOT>
   ';

   XML_DOCUMENT := DBMS_XMLDOM.NEWDOMDOCUMENT(XML);
   XML_NODE := DBMS_XMLDOM.MAKENODE(XML_DOCUMENT);
   XML_NODE := DBMS_XSLPROCESSOR.SELECTSINGLENODE(XML_NODE,'ROOT/A/B/text()');
   IF(DBMS_XMLDOM.ISNULL(XML_NODE) = FALSE)
   THEN
     dbms_output.put_line(DBMS_XMLDOM.GETNODEVALUE(XML_NODE));
   END IF;
 end; 
```

# python - 添加到帐户后找不到播放列表 uri

> ID：13297251
> 
> 赞同：1
> 
> 时间：2012-11-08T20:27:50.253
> 
> 标签：python, uri, youtube-api

我正在尝试制作一些播放列表，其中包含我通过 YouTube API 找到的视频。此 python 代码可以很好地创建播放列表：

```
ptitlestart = 'Cute Videos'
ptitlecount = 1

while ptitlecount < 6:
  new_private_playlistentry = yt_service.AddPlaylist(ptitlestart + str(ptitlecount), 'cute pets video playlist for content coding', True)
  ptitlecount = ptitlecount + 1 
```

但我不知道如何找到我刚刚创建的播放列表的 uri。我需要每个播放列表的 uri 才能向其中添加视频。智慧赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T22:22:48.730

您可能希望使用YouTube API[版本 3](https://developers.google.com/youtube/v3/getting-started)来执行此操作，因为它对 Python 有更好的支持。

下面是一段代码，它创建了一个新的播放列表并打印出播放列表的 id：

```
playlists_insert_response = youtube.playlists().insert(
  part="snippet",
  body=dict(
    snippet=dict(
      title="Test Playlist",
      description="A playlist created with the YouTube API v3"
    )
  )
).execute()

print "New playlist id: %s" % playlists_insert_response["id"] 
```

# c++ - WaitCommEvent() 是否报告已经收到的数据？

> ID：13297254
> 
> 赞同：1
> 
> 时间：2012-11-08T20:28:13.073
> 
> 标签：c++, winapi, serial-port

我有一个在串行端口上执行重叠 I/O 的程序，我看到应用程序未读取已接收数据的情况。我的代码正在使用`SetCommMask()`，`WaitCommEvent()`如下所示：

```
if(!waiting_for_comm_event)
{
   comm_event_ready = false;
   if(!SetCommMask(port_handle, EV_RXCHAR | EV_ERR | EV_RLSD))
      throw OsException(my_strings[strid_set_comm_mask_failed].c_str());
   rcd = WaitCommEvent(port_handle, &event_mask, &event_control);
   last_error = GetLastError();
   if(rcd && event_mask != 0)
       comm_event_ready = true;
   else if(last_error != ERROR_IO_PENDING)
       throw OsException(my_strings[strid_wait_comm_event_failed].c_str());
   else
       waiting_for_comm_event = true;
  } 
```

在我的输出缓冲区中写入任何数据后调用此代码。在写入过程中可能会接收到数据。是否会`WaitCommEvent()`报告已经有数据等待读取的情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T20:50:15.373

如果你必须在这里问，你不想知道答案。

不，真的——这意味着您依赖于未记录的行为，这些行为可能会在未来的 Windows 版本中发生变化。

您可以改为使用重叠 I/O 来开始跟踪传入数据和事件，然后再发送触发它们的数据。

两种方法（我`ReadFileEx`在自己的串行代码中使用第一种的变体）：

*   发出背景（重叠）读取。
*   发出背景（重叠）`WaitCommEvent`。
*   写入数据。
*   等待两个后台操作...完成任何一个都将导致`WaitForMultipleEvents`继续。

或者

*   发出背景（重叠）`WaitCommEvent`。
*   写入数据。
*   等待后台操作。
*   如果唤醒事件是接收数据，则读取它。

`WriteFile`在任何一种情况下，都会检测到传入数据和错误，甚至在完成之前。

# php - 将 -tag保存为 PNG/PDF

> ID：13297255
> 
> 赞同：1
> 
> 时间：2012-11-08T20:28:16.130
> 
> 标签：php, javascript, html, canvas

如果我想将整个 <img>-tag 保存为图像或 PDF，我会怎么做。属性“样式”是动态的，因此必须保存。

我试着把它做成画布，但它没有继承风格。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T20:39:30.993

我不太明白你的意思。

根据来源在屏幕上绘制图像。您可以右键单击并保存渲染网页中的图像。

如果我这样做：

```
<img src='images/my_image.png' alt='' style='width:800px; height:600px' /> 
```

并保存我的图像，它将始终以图像的实际大小保存，而不是您设置的样式。

你想解决这个问题吗？样式只是在渲染时拉伸图像。如果你想改变它的大小，你可能必须得到像 photo shop、gimp 甚至绘画这样的图像编辑软件！

# javascript - 如何用自定义警报框替换默认警报框

> ID：13297260
> 
> 赞同：-1
> 
> 时间：2012-11-08T20:28:22.660
> 
> 标签：javascript, alert

我尝试使用 html 表格进行一项考试，该表格会找到不正确的答案，并会使用警告框写出正确的答案。但我想使用另一个自定义警报框。

当我单击提交按钮时，我想打开自定义警报框。

使用此警报框[http://www.abeautifulsite.net/blog/2008/12/jquery-alert-dialogs/](http://www.abeautifulsite.net/blog/2008/12/jquery-alert-dialogs/)

**谢谢 ！！！谢谢 ！！！**

* * *

这是代码。

 `````
<SCRIPT Language ="JavaScript">

function ValidateForm(){
result = new Array();
count = 0;

if (!document.forms[0].one[1].checked == true) {
result[count] = "Question 1\.  Correct answer is " + document.forms[0].one[1].value + ".";
count++;
}

if (!document.forms[0].two[1].checked == true) {
result[count] = "Question 2\. correct answer is" + document.forms[0].two[1].value + ".";
count++;
}

if (!document.forms[0].three[0].checked == true) {
result[count] = "Question 3\. The correct answer is " + document.forms[0].three[0].value + ".";
count++;
}

if (!document.forms[0].four[2].checked == true) {
result[count] = "Question 4\. The correct answer is " + document.forms[0].four[2].value + ".";
count++;
}

if (result.length > 0) {
var vString = "";
for (var i=0; i<result.length; i++) {
vString = vString + result[i] + "\n";
}

alert(result.length + " incorrect answer:\n" + vString);
return(false);
}

else {
alert("All of the questions were answered correctly so submit email notice.");
return(true);
}
}

</SCRIPT> 
````  `* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T20:50:31.400

假设您已包含[jquery](http://jquery.com/download/)和您从链接到的站点下载的警报插件（js 和 css）...

代替 `alert('etc etc')`

和 `jAlert('your message here')```

# azure - Windows Azure VPN 功能

> ID：13297271
> 
> 赞同：0
> 
> 时间：2012-11-08T20:29:16.813
> 
> 标签：azure

我想知道我是否说服我的经理在下一个项目中部署 Azure。是否可以从 Azure 云服务访问 VPN 资源？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T21:31:52.410

可以，但您需要本地[支持的 Cisco 或瞻博网络设备](http://msdn.microsoft.com/en-us/library/windowsazure/jj156075.aspx)。如果您没有这样的设备，请尝试查看[Windows Azure Connect](http://blogs.msdn.com/b/plankytronixx/archive/2010/11/09/azure-connect-connecting-your-on-premise-and-windows-azure-networks-together.aspx)，它可以为您提供类似于 VPN 的体验。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T22:17:23.337

@Sandrino，取决于您所说的 VPN，只是想指出，Azure Connect 正在使用 IPSEC 来保护端到端的连接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T08:50:28.547

其他路由器如fortinet也可以支持side to side vpn to azure，我自己使用fortinet设备连接到azure，如果需要帮助请告诉我。

# javascript - Delphi 的 Javascript 引擎

> ID：13297272
> 
> 赞同：3
> 
> 时间：2012-11-08T20:29:20.417
> 
> 标签：javascript, delphi, delphi-xe2, indy, indy10

有没有可以使用 64 位的？所以我可以在 IdHTPP 中使用它。

**编辑：**我为 Delphi 找到了 SpiderMonkey。它支持 64 位，但没有提供 64 位 dll。“js64.dll”就是这样。

[http://code.google.com/p/delphi-javascript/](http://code.google.com/p/delphi-javascript/)

**这是64位版本。它与 delphi-javascript 完美搭配**

[http://depositfiles.com/files/tfryg81ny](http://depositfiles.com/files/tfryg81ny)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-16T22:32:45.260

您也可以尝试[BESEN](http://code.google.com/p/besen/)，它是一个用 ObjectPascal 本身编写的 ECMAScript/JavaScript 引擎，没有任何外部 DLL 库。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-09T09:54:25.740

TWebBrowser 怎么样？

创建 64 位 Delphi 应用程序，在表单上放置一个 TWebBrowser，然后运行：

```
WebBrowser1.OleObject.Document.ParentWindow.execScript('alert("Hello")'); 
```

瞧，不需要额外的组件。

* * *

![在行动](../Images/48a90bf000584ddb64fb4dcc99f06e51.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-01-04T06:19:34.877

mORMot ORM 框架有一个基于 SpiderMonkey 45的[JavaScript 引擎，这意味着它支持 ES2015。](http://synopse.info/forum/viewtopic.php?id=1044&p=7)

顺便说一句，它还有一个与 Node.js 兼容的服务器端 JS 实现，非常酷。

* * *

2017 年 4 月 7 日更新：现在 mORMot 中包含的 SyNode JS 引擎基于**SpiderMonkey 52**。github 提交在[这里](https://github.com/synopse/mORMot/commit/75aa35495a28328a65fcbd1bb28b6d5d925c9ab2)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-10T08:35:49.510

Google 的 V8 JS 引擎有新的 Delphi 包装器，自 2016 年 6 月 1 日起可用，称为[v8delphiwrapper](https://github.com/zolagiggszhou/v8delphiwrapper)

请参阅我在此处演示的[一些示例代码。](https://stackoverflow.com/a/47218541/133516)

非常感谢它的开发者@zolagiggszhou！

# java - 发送带有 Jpcap 问题的 SYN 数据包

> ID：13297277
> 
> 赞同：1
> 
> 时间：2012-11-08T20:29:30.723
> 
> 标签：java, networking, tcp, jpcap

我想用 Jpcap 发送一个 SYN 数据包并得到响应，但是当我这样做时，我会自动发送一个 RST 数据包，但我不想发送一个 RST 数据包。如何停止发送 RST 数据包以及为什么要发送 RST 数据包

这是我的代码：

```
public class JavaApplication1 {

public static void main(String[] args) throws UnknownHostException, IOException {
    JpcapSender sender = JpcapSender.openDevice(JpcapCaptor.getDeviceList()[0]);
    NetworkInterfaceAddress[] nia = JpcapCaptor.getDeviceList()[0].addresses;        
    TCPPacket packet = new TCPPacket(57912, 80, 1, 0, false, false, false, false, true, false, false, false, 0, 0);
    packet.setIPv4Parameter(0, false, false, false, 0, false, true, false, 0, 34567, 64, IPPacket.IPPROTO_TCP, nia[0].address , InetAddress.getByName("www.google.com"));

    packet.data = ("").getBytes();

    EthernetPacket ether = new EthernetPacket();
    ether.frametype = EthernetPacket.ETHERTYPE_IP;
    ether.src_mac = ((NetworkInterface)JpcapCaptor.getDeviceList()[0]).mac_address;
    ether.dst_mac = new byte[]{(byte)200, (byte)205, (byte)114, (byte)68, (byte)129, (byte)162};

    packet.datalink = ether;
    sender.sendPacket(packet);
} 
```

}

数据包：

```
57912 > http [SYN] Seq=0 Win=0 Len=0

http > 57912 [SYN, ACK] Seq=0 ACK=1 Win=14300 Len=0 MSS=1430

57912 > http [RST] Seq=0 Win=0 Len=0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T00:03:29.363

您的 TCP/IP 堆栈正在为您执行此操作，因为它看到了 SYN/ACK 响应并且不知道它的用途。你不能阻止它这样做。

你到底为什么要这样做？

# php - Laravel - 对所有路线使用 (:any?) 通配符？

> ID：13297278
> 
> 赞同：69
> 
> 时间：2012-11-08T20:29:31.540
> 
> 标签：php, laravel, routes, wildcard, laravel-3

我的路由有点麻烦。

我正在开发 CMS，我需要两条主要路线。`/admin`和`/(:any)`。`admin`控制器用于路由`/admin`，并且控制器`view`应该用于除`/admin`. 然后，我将从`view`控制器解析 url 并显示正确的内容。

这就是我所拥有的：

```
Route::get(array('admin', 'admin/dashboard'), array('as' => 'admin', 'uses' =>'admin.dashboard@index'));
Route::any('(:any)', 'view@index'); 
```

第一条路线有效，但第二条路线无效。我玩了一下，似乎如果我`(:any)`不带问号使用，只有在`/`. 如果我*确实*把问号放在那里，它根本不起作用。

我希望以下所有路线都转到 view@index：

```
/
/something
/something/something
/something/something/something
/something/something/something/something
...etc... 
```

这是否可能没有硬编码一堆`(:any?)/(:any?)/(:any?)/(:any?)`（我什至不知道有效）？

解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：125
> 
> 时间：2016-01-02T10:50:39.703

## 拉拉维尔 5

该解决方案在 Laravel 5 上运行良好：

```
Route::get('/admin', function () {

  // url /admin

});

Route::get('/{any}', function ($any) {

  // any other url, subfolders also

})->where('any', '.*'); 
```

* * *

## 流明 5

这是针对流明的：

```
$app->get('/admin', function () use ($app) {
  //
});

$app->get('/{any:.*}', function ($any) use ($app) {
  //
}); 
```

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2013-03-23T11:29:36.937

打 404 状态对我来说似乎有点不对劲。在记录 404 时，这会给您带来各种问题。我最近在 Laravel 4 中遇到了同样的通配符路由问题，并用以下代码片段解决了它：

```
Route::any('{slug}', function($slug)
{
    //do whatever you want with the slug
})->where('slug', '([A-z\d-\/_.]+)?'); 
```

这应该以可控的方式解决您的问题。正则表达式可以简化为：

```
'(.*)?' 
```

但是您应该自担风险使用它。

**编辑（添加）：**

由于这会覆盖很多路由，您应该考虑将其包装在“App::before”语句中：

```
 App::before(function($request) {
            //put your routes here
    }); 
```

这样，它就不会覆盖您稍后定义的自定义路由。

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2012-11-08T20:49:54.747

编辑：自 Laravel 4 发布以来，关于这个话题一直存在一些混淆，这个答案是针对 Laravel 3 的。

有几种方法可以解决这个问题。

第一种方法是匹配`(:any)/(:all?)`：

```
Route::any('(:any)/(:all?)', function($first, $rest=''){
    $page = $rest ? "{$first}/{$rest}" : $first;
    dd($page);
}); 
```

不是最好的解决方案，因为它被分解为多个参数，并且由于某种原因 (:all) 无法自行工作（错误？）

第二种解决方案是使用正则表达式，我认为这是比上面更好的方法。

```
Route::any( '(.*)', function( $page ){
    dd($page);
}); 
```

还有一种方法可以让您检查是否有 cms 页面，即使路由可能与其他模式匹配，前提是这些路由返回 404。此方法修改定义的事件侦听器`routes.php`：

```
Event::listen('404', function() {
    $page = URI::current();
    // custom logic, else
    return Response::error('404');
}); 
```

但是，我的首选方法是#2。我希望这有帮助。无论您做什么，请确保您在这些路线之上定义所有其他路线，捕获所有路线，之后定义的任何路线都不会触发。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2016-01-02T18:54:34.753

```
Route::get("{path}", "SomeController@serve")->where('path', '.+'); 
```

上面的代码将捕获您提到的递归子 url：

```
/
/something
/something/something
/something/something/something
/something/something/something/something 
```

任何其他特殊情况，例如 admin/*，您可以在此之前捕获。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2019-04-27T12:58:19.090

只是拼出我的经验，以防它帮助某人拼凑一些东西。

我在 Laravel 上构建了一个自用 API 的 React 应用程序。它有一个由 Laravel/Lumen 提供的单一视图。它使用 React 路由器。 **单击应用程序中的链接始终有效，但输入 URL 需要考虑以下因素：**

在 Laravel 中，我在 web.php 路由文件中使用了以下内容：

```
Route::view('/{path?}', 'app')
    ->where('path', '.*')
    ->name('react'); 
```

一切正常。

然后我将项目切换到 Lumen。感谢这篇文章，我在 web.php 路由文件中使用了以下内容：

```
$router->get('/{all:.*}', function() {
    return view('app');
}); 
```

这适用于一级 URL，例如：

```
/
/something 
```

然而，

```
/something/something etc. 
```

没有。

我查看了 Google Developer 工具中的网络选项卡，注意到 app.js 的 URL 在第二层和更高层 URL 的 app.js 前面附加*了 /something*，例如：

```
myapp.com/something
app.js URL:  myapp.com/js/app.js  (as it should be)

myapp.com/something/something
app.js URL:  myapp.com/something/js/app.js  (not found) 
```

我所要做的就是在我的单视图页面中为我的 app.js 源添加一个前导斜杠，例如：

```
<script src="/js/app.js" defer></script> 
```

代替：

```
<script src="js/app.js" defer></script> 
```

所以：

这在**Laravel中有效** *（它是一个可能自动解析 js/app.js URL 的 Blade 文件）*

```
<script src="{{ asset('js/app.js') }}" defer></script> 
```

和

```
Route::view('/{path?}', 'app')
    ->where('path', '.*')
    ->name('react'); 
```

但是，我必须在**Lumen** *(Not a Blade 文件)*中这样做：

```
<script src="/js/app.js" defer></script> 
```

和

```
$router->get('/{all:.*}', function() {
    return view('app');
}); 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2014-05-26T11:22:32.783

将此添加到路由文件的末尾

```
App::missing(function($exception)
{
    return View::make('notfound');
}); 
```

来自[http://scotch.io/tutorials/simple-and-easy-laravel-routing](http://scotch.io/tutorials/simple-and-easy-laravel-routing)

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2021-06-20T04:42:14.670

# Laravel 8 / 仅在子目录下重定向

我想重定向不是所有不存在的 URL，而是只重定向特定子目录中的 URL（如[https://example.com/subdir/*](https://example.com/subdir/*)）

如果我只是想**重定向所有丢失的 URL**，我可以使用web.php 文件末尾的[后备路由：](https://laravel.com/docs/8.x/routing#fallback-routes)

```
Route::fallback(function () {
    //
}); 
```

但是因为我只想**重定向子目录中的 url**，所以我使用了这段代码，它对我有用（只是重定向到 /）：

```
Route::get('subdirectory/{any}', function($page){return redirect()->to('/');})->where('any', '.*'); 
```

我在[FallbackRouteTest.php](https://github.com/laravel/framework/blob/8.x/tests/Integration/Routing/FallbackRouteTest.php#L56)中找到了这个。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-03-13T23:43:11.937

感谢威廉的解决方案。然而，方法 1 和 2 不再适用于 Laravel 4，为了在 Laravel 4 中使用解决方案 #3，您必须在 start/global.php 文件中触发 404 事件。

```
App::error(function(Exception $exception, $code)
{
    // i.o. -> this is our catchall!
    // http://stackoverflow.com/questions/13297278/laravel-using-any-wildcard-for-all-routes
    Event::fire('404');

    return View::make('error')->with('exception', $exception)->with('code', $code);

    Log::error($exception);
}); 
```

现在我们可以在 routes.php 文件中处理这个问题：

```
Event::listen('404', function() {
    // url?
    $url = Request::path();

    // LOGIC HERE

    // else
    return View::make('error');
}); 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-01-17T03:29:26.167

具有基本的流明脚手架。就我而言，我有 2 个前端应用程序和 api 路由

```
<?php // routes/web.php
/** @var \Laravel\Lumen\Routing\Router $router */

$router->group([
    'prefix' => '/api/v1',
    'namespace' => 'App\Http\Controllers'
], function () use ($router) {

    require 'routes-group1.php';
    require 'routes-group2.php';
    // ...
});

$router->get('/admin{any:.*}', function () {
    return file_get_contents('../public/a/index.html');
});

$router->get('{any:.*}', function () {
    return file_get_contents('../public/m/index.html');
}); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-12-11T16:59:10.670

**自 Laravel 5.5 以来的后备路由**

使用该`Route::fallback`方法，您可以定义在没有其他路由匹配传入请求时将执行的路由。通常，未处理的请求将通过应用程序的异常处理程序自动呈现“404”页面。但是，由于您通常会在文件中定义`fallback`路由，因此中间件组中的所有中间件都将应用于该路由。您可以根据需要随意向此路由添加额外的中间件：`routes/web.php``web`

```
Route::fallback(function () {
    //
}); 
```

*注意：后备路由应该始终是您的应用程序注册的最后一个路由。*

# html - 将宽度设置为 100% 时如何消除边框？

> ID：13297280
> 
> 赞同：1
> 
> 时间：2012-11-08T20:29:36.533
> 
> 标签：html, css

我可能正在做一些非常愚蠢和明显错误的事情，但这是我的第一个站点，所以我不确定。

我的问题是我将标题的宽度设置为 100%，但它仍然在两侧留下边框。我一直在 Codeacademy.com 浏览代码，但在他们的示例中，他们使用了名为“bootstrap.css”的东西，我想自己编写所有代码来帮助我学习。

[HTML](http://pastebin.com/Q6VZnp9z)（抱歉格式化，从 VIM 粘贴，一切都搞砸了 =/）

[CSS](http://pastebin.com/QDg2Zc2g)

编辑：

好吧，我显然不太擅长使用搜索功能（对不起！）。

答案是 'body' 有一个固有的边距，将 body 样式设置为包括 'margin: 0;' 消除了这个问题。

IE

```
body {
    margin: 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T20:31:10.613

尝试重置您的`HTML`和`BODY`标签：

```
html, body { margin: 0; padding: 0; } // Do this near top of CSS 
```

# batch-file - 调用退出后如何执行剩余的批处理脚本命令？

> ID：13297282
> 
> 赞同：1
> 
> 时间：2012-11-08T20:29:39.527
> 
> 标签：batch-file

我的批处理脚本中有这两行：

```
call pre.bat
call post.bat 
```

我有一个退出条件`pre.bat`（即`exit 255`）

`post.bat`即使`pre.bat`以错误代码退出，我该如何执行？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T22:04:57.743

在你的 pre.bat 中使用`exit /b 255`而不是`exit 255`

如果您无法更改 pre.bat，那么您可以使用`start /b /wait pre.bat`而不是`call pre.bat`. 但是，pre.bat 可能对环境变量所做的所有更改都将丢失。

# cygwin - 如何在cygwin上构建llvm和clang

> ID：13297285
> 
> 赞同：9
> 
> 时间：2012-11-08T20:29:47.763
> 
> 标签：cygwin, llvm-clang

我可以从**cygwin**上的源代码构建**LLVM**和 clang吗？

 **构建 LLVM 和 Clang 需要多长时间？因为我尝试在 VirtualBox 上构建它们，所以大约需要 2 个小时。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-02-17T04:17:19.003

在为此付出了一些努力后，我认为分享我的一些发现可能是值得的。我设法**在 Cygwin 1.7.28 (x86) 上构建了 Clang + LLVM 3.4**。

## Cygwin 特定的

### 修复机器整数类型

Cygwin 的最新更新似乎破坏了 Clang 使用的系统头文件之一。[Cygwin 邮件列表](http://cygwin.com/ml/cygwin/2014-02/msg00315.html)中提供了一个不完整的补丁。这是**[完整的补丁](http://pastebin.com/TbRcQuPe)**。

### 包含 C++ 标准库的目录

Clang++（从 3.4 开始）仍然硬编码 C++ 标准库的包含目录（它依赖于 GCC 提供的目录）。如果路径不正确（在 Cygwin 上经常出现这种情况），则在包含任何 C++ 标头（例如`<iostream>`）时会遇到问题。解决此问题的两种可能方法：

*   您可以**将正确的路径添加到代码**中。这是相当不灵活的，因为每次更改时都必须重新编译 Clang++，这在 Cygwin 上需要很长时间。如果你想这样做，你可以`clang/lib/Frontend/InitHeaderSearch.cpp`在第 389 行找到代码。

*   *或者，*您可以**在 Clang 期望的位置创建符号链接**。

    1.  通过执行以下命令识别 Clang++ 搜索的目录：

        ```
        echo | clang++ -v -x c++ - 
        ```

        你应该找到类似的东西

        ```
        ignoring nonexistent directory "/usr/lib/gcc/i686-pc-cygwin/X.Y.Z/include/c++" 
        ```

        可能会有几个不同的版本号`X.Y.Z`。选择其中任何一个，然后创建一个指向正确位置的符号链接：

        ```
        ln -s A.B.C /usr/lib/gcc/i686-pc-cygwin/X.Y.Z 
        ```

        `A.B.C`当前安装的 GCC 版本在哪里。

### 彩色诊断

如果您想要来自 Clang 的彩色错误消息，请务必预先使用 Cygwin 安装程序**安装 ncurses 开发包**( )。`libncurses-devel`没有它，Clang 将回退到其无色模式，因为 LLVM 将无法检测终端是否支持颜色。

您仍然可以使用 强制显示颜色`-fcolor-diagnostics`，但是 GCC 的链接器会阻塞此标志，这使得使用非常不方便。

## 独立于系统

这是最简单（也是最长）的部分，LLVM + Clang 文档中的大部分内容都适用于此处。

1.  [下载源代码](http://llvm.org/releases/download.html)。即使您只需要 Clang，您仍然需要 LLVM 源代码。

2.  解压 Clang 和 LLVM 后，将 Clang 的目录移动到`tools`LLVM 的子目录中。

    ```
    mv clang-X.Y llvm-X.Y/tools/clang 
    ```

3.  从配置开始：

    ```
    ./configure --enable-optimized 
    ```

    Clang 更喜欢选择自己作为编译器，所以如果你还没有安装有效的 Clang，请使用`CC`和`CXX`环境变量来强制它使用 GCC。

4.  如果一切顺利，您可以开始构建和安装，这将构建 clang 和 llvm：

    ```
    make && make install 
    ```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-12T08:54:50.787

Clang ( [x86](https://cygwin.com/cgi-bin2/package-cat.cgi?file=x86%2Fclang%2Fclang-3.4.2-5) , [x86_64](https://cygwin.com/cgi-bin2/package-cat.cgi?file=x86_64%2Fclang%2Fclang-3.4.2-5) ) 和 LLVM ( [x86](https://cygwin.com/cgi-bin2/package-cat.cgi?file=x86%2Fllvm%2Fllvm-3.4.2-5) , [x86_64](https://cygwin.com/cgi-bin2/package-cat.cgi?file=x86_64%2Fllvm%2Fllvm-3.4.2-5) ) 目前可作为 Cygwin 包使用。

安装 Cygwin 包会减少很多麻烦

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-21T17:38:28.453

你想开发 llvm/clang 还是用 llvm/clang 开发？对于后一种情况，为什么不从 cygwin 存储库安装 llvm-3.1/clang 二进制文件？它们在我的 Windows 7 上运行良好。**

# android - 删除后Android应用仍在运行

> ID：13297298
> 
> 赞同：0
> 
> 时间：2012-11-08T20:30:17.773
> 
> 标签：android

我开始开发一个 android 应用程序并将其安装在我的 nexus 上。现在我删除了 apk 文件并重新启动了 N1。但是该应用程序仍在运行...我现在如何完全删除此应用程序？问候安德里亚

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T20:35:19.417

您应该在设置 -> 应用程序的管理应用程序部分的列表中找到您的应用程序。如果您无法通过其名称找到它，请检查您使用的包名称。请注意，列表可能不是按字母顺序排列的，请使用上下文菜单对它们进行排序。当您从列表中打开您的应用程序时，您会在此处找到卸载按钮。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T20:40:14.737

如果您使用 Google Play 在手机或平板电脑上安装了不再需要的应用，则可以按照以下步骤将其卸载：

1.  导航到菜单 > 设置 > 应用程序 > 管理应用程序（在运行 Android 4.0 Ice Cream Sandwich 的设备上，设置 > 应用程序）。
2.  滚动浏览应用程序列表以找到您要卸载的应用程序。
3.  点击您要卸载的应用程序。
4.  点按“卸载”。</li>

# java - 在具有 2 种不同布局的 Android Listview 中重用视图

> ID：13297299
> 
> 赞同：39
> 
> 时间：2012-11-08T20:30:26.503
> 
> 标签：java, android, android-layout, android-listview

我了解到，为了最大限度地提高 Android 列表视图的效率，您应该只拥有尽可能多的膨胀“行”视图以适应屏幕。一旦视图离开屏幕，您应该在您的`getView`方法中重用它，检查是否`convertView`为空。

但是，当您需要 2 种不同的列表布局时，如何实现这个想法？假设它是一个订单列表，一个布局用于已完成的订单，另一个布局用于处理中的订单。

这是我的代码正在使用的想法的示例教程。就我而言，我将有 2 行布局：`R.layout.listview_item_product_complete`和`R.layout.listview_item_product_inprocess`

```
public View getView(int position, View convertView, ViewGroup parent) {

ViewHolder holder = null;

if (convertView == null) {
    holder = new ViewHolder();
    if(getItemViewType(position) == COMPLETE_TYPE_INDEX) {
        convertView = mInflator.inflate(R.layout.listview_item_product_complete, null);
        holder.mNameTextView = (TextView) convertView.findViewById(R.list.text_complete);
        holder.mImgImageView = (ImageView) convertView.findViewById(R.list.img_complete);
    }
    else { // must be INPROCESS_TYPE_INDEX
        convertView = mInflator.inflate(R.layout.listview_item_product_inprocess, null);
        holder.mNameTextView = (TextView) convertView.findViewById(R.list.text_inprocess);
        holder.mImgImageView = (ImageView) convertView.findViewById(R.list.img_inprocess);
    }
    convertView.setTag(holder);
} else {
    holder = (ViewHolder) convertView.getTag();
}
    thisOrder = (Order) myOrders.getOrderList().get(position);
    // If using different views for each type, use an if statement to test for type, like above
    holder.mNameTextView.setText(thisOrder.getNameValue());
    holder.mImgImageView.setImageResource(thisOrder.getIconValue());
    return convertView;
}

public static class ViewHolder {
    public TextView mNameTextView;
    public ImageView mImgImageView;
} 
```

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2012-11-08T20:33:15.663

您需要让适配器的视图回收器知道存在不止一种布局以及如何区分每一行的两者。只需覆盖这些方法：

```
@Override
public int getItemViewType(int position) {
    // Define a way to determine which layout to use, here it's just evens and odds.
    return position % 2;
}

@Override
public int getViewTypeCount() {
    return 2; // Count of different layouts
} 
```

* * *

合并`getItemViewType()`到里面`getView()`，像这样：

```
if (convertView == null) {
    // You can move this line into your constructor, the inflater service won't change.
    mInflater = (LayoutInflater) mContext.getSystemService(LAYOUT_INFLATER_SERVICE);
    if(getItemViewType(position) == 0)
        convertView = mInflater.inflate(R.layout.listview_item_product_complete, parent, false);
    else
        convertView = mInflater.inflate(R.layout.listview_item_product_inprocess, parent, false);
    // etc, etc... 
```

观看 Android 的 Romain Guy在 Google Talks 上[讨论视图回收器。](http://www.youtube.com/watch?v=N6YdwzAvwOA)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-08T20:34:49.890

无需自己设计解决方案，只需覆盖 getItemViewType() 和 getViewTypeCount()。

有关示例，请参阅以下博客文章[http://sparetimedev.blogspot.co.uk/2012/10/recycling-of-views-with-heterogeneous.html](http://sparetimedev.blogspot.co.uk/2012/10/recycling-of-views-with-heterogeneous.html)

正如博客所解释的，Android 实际上并不能**保证**getView 会收到正确类型的视图。

# python - 停止程序处理并停止回溯？

> ID：13297300
> 
> 赞同：2
> 
> 时间：2012-11-08T20:30:32.050
> 
> 标签：python, traceback

我有一个程序需要在触发某个条件后完全停止处理 - 类似于这个问题：[如何中止 Python 脚本的执行？](https://stackoverflow.com/questions/179369/how-do-i-abort-the-execution-of-a-python-script)

但是，就我而言，我想捕获 sys.exit() 生成的回溯，并且最重要的是停止处理超出该点的任何代码块。有人能帮忙吗？

```
try:
    a = 'i' / 1
    print 'Does this work yet?'
except TypeError:
    print "I should stop processing now"
    try:
        sys.exit()
    except:
        pass
print 'I did not stop processing ' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T23:42:24.273

我不完全确定你在问什么，据我所知`sys.exit()`不会产生回溯。如果您尝试按原样执行代码，则会`sys.exit()`引发未处理的 NameError 异常，因为您尚未导入“sys”模块。根据文档，使用 try/except 块围绕对 sys.exit() 的调用将捕获 NameError 异常，但它也会捕获 sys.exit() 引发的正常异常：

> 退出 Python。这是通过引发 SystemExit 异常来实现的，因此由 try 语句的 finally 子句指定的清理操作将被兑现，并且可以在外部级别拦截退出尝试。

这是一个一旦遇到错误就会停止处理的版本。

```
import sys

try:
    a = 'i' / 1
    print 'Does this work yet?'
except TypeError:
    print "I should stop processing now"
    sys.exit()
print 'I did not stop processing ' 
```

如果此代码在您的主模块中，我建议您将入口点代码包装起来，如下所示：

```
import sys

def main():
    try:
        a = 'i' / 1
        print 'Does this work yet?'
    except TypeError:
        print "I should stop processing now"
        return 1
    print 'I did not stop processing '
    return 0

if __name__ == "__main__": sys.exit(main()) 
```

这样，您只需要一次调用 sys.exit()，它会返回一个错误代码，指示是否存在问题。如果您的代码不在顶级入口点，我建议您将异常向上抛出，直到它到达 main() 方法，然后它可以返回错误代码值。您可以将真正的异常包装在您必须定义的新“StopMyApplicationException”中。

哦，如果你想打印回溯，你可以使用`traceback`模块，类似的东西`traceback.print_exc()`可以完成这项工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T23:25:24.597

您可以使用系统退出异常不是从[Exception](http://docs.python.org/2/library/exceptions.html#exceptions.Exception)派生的事实：

```
try:
    a = 'i' / 1
    print 'Does this work yet?'
except TypeError:
    print "I should stop processing now"
    try:
        raise SystemExit
    except Exception:
        pass 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T00:02:29.117

您可以访问生成的*异常*，`sys.exit`但它没有回溯。

```
try:
    sys.exit()
except SystemExit as e:
    # do what you want with e, e.g.
    traceback.print_exc(e)
    raise 
```

`raise`子句中的一个bare`except`重新引发捕获的异常。

# ssis - 如何将参数传递给 ssis 中的 ado.net 源？

> ID：13297301
> 
> 赞同：5
> 
> 时间：2012-11-08T20:30:36.093
> 
> 标签：ssis

这是原始查询，使用`ado.net`源和使用源内指定的 .net providers\odbc 数据提供程序可以正常工作。

```
SELECT a.FA_CLNT_ID, a.FA_ACCT_NM, a.ACCT_E_DT, a.POL_PER_CURR_DT, a.POL_PER_NEXT_DT, a.FA_ACCT_NUM, a.GRP_SALES_OFFC_CD, a.ACCT_C_DT   
FROM  gyv2M.DDM_ACCT_STRUC a   
INNER JOIN  
(SELECT max(DDM_ACCT_STRUC_TP) as   DDM_ACCT_STRUC_TP, FA_CLNT_ID 
 FROM gyv2M.DDM_ACCT_STRUC  
 WHERE FA_DM_ROW_DT <= '6/30/2011' AND DM_ROW_E_DT <= '6/30/2011'
 GROUP BY  FA_CLNT_ID) b 
 ON a.DDM_ACCT_STRUC_TP = b.DDM_ACCT_STRUC_TP AND a.FA_CLNT_ID = b.FA_CLNT_ID AND FA_DM_ROW_DT <= '6/30/2011' AND a.DM_ROW_E_DT <= '6/30/2011' 
```

但我需要让它自动化，以便 DATE 从 sql server 中的表中获取值。我创建了一个变量来存储该日期值，但我想使用该变量作为参数传递给上述查询。不幸的是，我没有找到数据访问模式：来自 ado.net 源中变量的 sql 命令。我搜索了一些其他网站，发现我们可以使用表达式生成器使用一些表达式。rt 点击 preperties ..> 表达式 ..> etc.. 成功评估了表达式。表达式如下所示，但我在那里感到震惊。接下来是什么 ？如何在 ado.net source 中将评估的表达式作为源命令传递？请帮忙。

```
SELECT a.FA_CLNT_ID, a.FA_ACCT_NM, a.ACCT_E_DT, a.POL_PER_CURR_DT, a.POL_PER_NEXT_DT, a.FA_ACCT_NUM, a.GRP_SALES_OFFC_CD, a.ACCT_C_DT   
FROM  gyv2M.DDM_ACCT_STRUC a   
INNER JOIN  
(SELECT max(DDM_ACCT_STRUC_TP) as   DDM_ACCT_STRUC_TP, FA_CLNT_ID 
 FROM gyv2M.DDM_ACCT_STRUC  
 WHERE FA_DM_ROW_DT <=  '@[User::RepDate]'  AND DM_ROW_E_DT <=  '@[User::RepDate]'
 GROUP BY  FA_CLNT_ID) b 
 ON a.DDM_ACCT_STRUC_TP = b.DDM_ACCT_STRUC_TP AND a.FA_CLNT_ID = b.FA_CLNT_ID AND FA_DM_ROW_DT <=  '@[User::RepDate]'  AND a.DM_ROW_E_DT <=  '@[User::RepDate]' 
```

**更新**

你好，

非常感谢您的回复。正如您所指定的，我创建了一个用户变量 user:RepDate，其中包含 datetime 和一个执行 sql 任务，该任务将 datetime 分配给该变量 RepDate。而且是的，我能够评估表达式，并且能够看到在 ado.net souce sql 命令模式下构建的查询。这是查询：

```
SELECT a.FA_CLNT_ID, a.FA_ACCT_NM, a.ACCT_E_DT, a.POL_PER_CURR_DT, a.POL_PER_NEXT_DT, a.FA_ACCT_NUM, a.GRP_SALES_OFFC_CD, a.ACCT_C_DT   
FROM  gyv2M.DDM_ACCT_STRUC a   
INNER JOIN  
(SELECT max(DDM_ACCT_STRUC_TP) as   DDM_ACCT_STRUC_TP, FA_CLNT_ID 
 FROM gyv2M.DDM_ACCT_STRUC  
 WHERE FA_DM_ROW_DT <= @[User::RepDate]  AND DM_ROW_E_DT <=  @[User::RepDate] 
 GROUP BY  FA_CLNT_ID) b 
 ON a.DDM_ACCT_STRUC_TP = b.DDM_ACCT_STRUC_TP AND a.FA_CLNT_ID = b.FA_CLNT_ID AND FA_DM_ROW_DT <=  @[User::RepDate] AND a.DM_ROW_E_DT <=  @[User::RepDate] 
```

但我收到下面给出的以下错误。我认为这是因为内部查询需要我在原始查询中指定的日期格式'mm/dd/yyyy'..但是我们从用户变量中提供日期时间。您能告诉我如何使用内置函数将用户变量的日期时间格式转换为指定格式吗？我试过 DT_Date 但没有运气。

```
Error at Data Flow Task 4 [ADO NET Source [1]]: The component "ADO NET Source" (1) was unable to retrieve column information for the SQL command. The following error occurred: ERROR [42601] [IBM][CLI Driver][DB2] SQL0104N  An unexpected token "[" was found following "".  Expected tokens may include:  "CONCAT || / MICROSECONDS MICROSECOND SECONDS SECOND MINUTES".  SQLSTATE=42601
ADDITIONAL INFORMATION:

Pipeline component has returned HRESULT error code 0xC02020FF from a method call. (Microsoft.SqlServer.DTSPipelineWrap)
BUTTONS:
OK 
```

*****更新2*****

## 标题：Microsoft Visual Studio

数据流任务 [ADO NET 源 [1]] 出错：组件“ADO NET 源”(1) 无法检索 SQL 命令的列信息。发生了以下错误：错误 [22007] [IBM][CLI Driver][DB2] SQL0180N 日期时间值的字符串表示的语法不正确。SQLSTATE=22007

* * *

附加信息：

管道组件已从方法调用返回 HRESULT 错误代码 0xC02020FF。(Microsoft.SqlServer.DTSPipelineWrap)

* * *

纽扣：

## 好的

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-09T05:49:26.847

您可以使用以下步骤：

1.  在 ADO.NET 源中使用您的工作查询。[您无法映射 ADO.NET 源的参数]
2.  选择您的`Dataflow`并单击`Properties`。
3.  在属性窗格中，查找名为“Expressions”的属性。展开它并单击“...”图标以打开 Property Expressions Editor（下面的屏幕截图）。为您的数据源选择属性`SqlCommand`并使用表达式构建器使用 SSIS 变量（在您的情况下为日期时间变量）准备查询。

![ADO.NET 查询准备](../Images/95ccb6883358f8bd1ec189555916245b.png)

在您的表达式构建器中尝试此操作 - 请注意，您的变量必须是字符串，如果不是，您可以使用`(DT_WSTR,30)`它来转换它。由于您使用的是日期，因此您的 SQL 将需要处理字符串格式的日期，即`to_date()`在 Oracle 中使用。

```
 "SELECT a.FA_CLNT_ID, a.FA_ACCT_NM, a.ACCT_E_DT, a.POL_PER_CURR_DT, a.POL_PER_NEXT_DT, a.FA_ACCT_NUM, a.GRP_SALES_OFFC_CD, a.ACCT_C_DT   
FROM  gyv2M.DDM_ACCT_STRUC a   
INNER JOIN  
(SELECT max(DDM_ACCT_STRUC_TP) as   DDM_ACCT_STRUC_TP, FA_CLNT_ID 
 FROM gyv2M.DDM_ACCT_STRUC 
WHERE FA_DM_ROW_DT <= '"+ (DT_WSTR,30)@[User::RepDate] +"'  AND DM_ROW_E_DT <= '"+ (DT_WSTR,30)@[User::RepDate] +"' 
 GROUP BY  FA_CLNT_ID) b 
 ON a.DDM_ACCT_STRUC_TP = b.DDM_ACCT_STRUC_TP AND a.FA_CLNT_ID = b.FA_CLNT_ID AND FA_DM_ROW_DT <= '" +(DT_WSTR,30)@[User::RepDate] +"' AND a.DM_ROW_E_DT <='"+(DT_WSTR,30)@[User::RepDate]+"'" 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T07:43:36.977

在你的表达式生成器中试试这个，

```
 "SELECT a.FA_CLNT_ID, a.FA_ACCT_NM, a.ACCT_E_DT, a.POL_PER_CURR_DT, a.POL_PER_NEXT_DT, a.FA_ACCT_NUM, a.GRP_SALES_OFFC_CD, a.ACCT_C_DT   
FROM  gyv2M.DDM_ACCT_STRUC a   
INNER JOIN  
(SELECT max(DDM_ACCT_STRUC_TP) as   DDM_ACCT_STRUC_TP, FA_CLNT_ID 
 FROM gyv2M.DDM_ACCT_STRUC 
WHERE FA_DM_ROW_DT <= '"+ (DT_WSTR,30)@[User::RepDate] +"'  AND DM_ROW_E_DT <= '"+ (DT_WSTR,30)@[User::RepDate] +"' 
 GROUP BY  FA_CLNT_ID) b 
 ON a.DDM_ACCT_STRUC_TP = b.DDM_ACCT_STRUC_TP AND a.FA_CLNT_ID = b.FA_CLNT_ID AND FA_DM_ROW_DT <= '" +(DT_WSTR,30)@[User::RepDate] +"' AND a.DM_ROW_E_DT <='"+(DT_WSTR,30)@[User::RepDate]+"'" 
```

希望这有效！

# objective-c - 在形状周围绘制阴影，核心图形

> ID：13297304
> 
> 赞同：2
> 
> 时间：2012-11-08T20:30:43.157
> 
> 标签：objective-c, ios, core-graphics, drawrect

我正在通过以下操作绘制一个带有笔划的形状

```
- (void)drawRect:(CGRect)rect
{
    // Draw a cross rectagle
    CGContextRef    context     =   UIGraphicsGetCurrentContext();

    CGContextSaveGState(context);

    CGContextBeginPath(context);
    CGContextMoveToPoint    (context, 190, 0);
    CGContextAddLineToPoint (context, 220, 0);
    CGContextAddLineToPoint (context, 300, 80);
    CGContextAddLineToPoint (context, 300, 110);
    CGContextClosePath(context);

    CGContextSetFillColorWithColor(context, bgColor);                           // fill color
    CGContextSetStrokeColorWithColor(context, [UIColor grayColor].CGColor);     // set color for stroke
    CGContextSetLineWidth(context, .8);                                         // set width for stroke
    CGContextDrawPath(context,  kCGPathFillStroke);                             // do fill and stroke together

    CGContextEOClip(context);
    CGContextSetShadowWithColor(context, CGSizeMake(1, 1), 1.0, [UIColor whiteColor].CGColor);
    CGContextSetBlendMode (context, kCGBlendModeScreen);
    CGContextRestoreGState(context);
} 
```

和我下面的结果（十字旗）

![在此处输入图像描述](../Images/732cf2eb9385e37a06452de038f84df9.png)

现在这一次，我也想在十字旗周围投下一些阴影。

我应该怎么做才能做到这一点。请就这个问题给我建议。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T20:39:41.247

`CGContextSetShadow`或`CGContextSetShadowWithColor`（[文档 1](https://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CGContext/Reference/reference.html)，[文档 2](https://developer.apple.com/library/mac/#documentation/graphicsimaging/conceptual/drawingwithquartz2d/dq_shadows/dq_shadows.html)）

在你的情况下，我能够通过

```
...
CGContextSaveGState(context);

CGContextSetShadowWithColor(context, CGSizeMake(-3 , 2), 4.0, [UIColor whiteColor].CGColor);

CGContextBeginPath(context);
CGContextMoveToPoint    (context, 190, 0);
... 
```

我从底部删除了这些（剪辑在这里没有做任何事情，为什么是混合模式？）

```
CGContextEOClip(context);
CGContextSetShadowWithColor(context, CGSizeMake(1, 1), 1.0, [UIColor whiteColor].CGColor);
CGContextSetBlendMode (context, kCGBlendModeScreen); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-08T20:35:11.367

您应该能够通过使用 UIBezierPath 跟踪您的标志并将阴影应用于路径来完成此操作。

这是一些可能有用的示例代码

```
// create highlight
UIRectCorner corners = UIRectCornerTopLeft;
UIBezierPath *shadowPath = [UIBezierPath bezierPathWithRoundedRect:CGRectMake(0.0f, 0.0f, self.bounds.size.width, self.bounds.size.height + 50.0f) byRoundingCorners:corners cornerRadii:CGSizeMake(32.0f, 32.0f)];
[[self layer] setShadowPath:[shadowPath CGPath]];
[[self layer] setShadowOpacity:0.5f];
[[self layer] setShadowRadius:25.0f];
[[self layer] setShadowOffset:CGSizeMake(0.0f, 0.0f)];
[[self layer] setShadowColor:[[UIColor colorWithRed:1.0f green:1.0f blue:0.75f alpha:1.0f] CGColor]]; 
```

# ruby-on-rails - 如何从炼油厂主页中删除页面标题 [RAILS]

> ID：13297305
> 
> 赞同：1
> 
> 时间：2012-11-08T20:30:42.373
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, refinerycms

我目前正在开发一个在“refinery cms”之上构建的项目，我遇到了一个问题，在我的主页中，除了我添加的页面内容之外，它还显示页面名称为“home” ,

我发现它从

```
#app/views/refinery/_content_page.html.erb

<%= render_content_page(@page, {
      :hide_sections => local_assigns[:hide_sections],
      :can_use_fallback => !local_assigns[:show_empty_sections] && !local_assigns[:remove_automatic_sections]
    }) %> 
```

有人可以告诉我如何从主页上摆脱这个页面名称

我正在运行

*   gem 'refinerycms', '~> 2.0.0'
*   宝石'导轨'，'3.2.8'
*   红宝石 1.9.2

谢谢你的帮助

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-06-27T19:37:09.500

尝试将其替换为：

```
<%= render_content_page(@page, {
      :hide_sections => [:body_content_title, local_assigns[:hide_sections]],
      :can_use_fallback => !local_assigns[:show_empty_sections] && !local_assigns[:remove_automatic_sections]
    }) %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T20:36:52.097

您是否尝试过查看 render_content_page 方法？也许它在呈现页面的“主页”名称时具有特定条件？

# java - 二进制除法问题：互联网上的坏例子或我错过了什么？

> ID：13297308
> 
> 赞同：3
> 
> 时间：2012-11-08T20:30:50.507
> 
> 标签：java, binary, division, crc

我想创建一个 16 位 CRC。实际上我已经完全准备好了，所以几个小时前我测试了它，但没有正常工作。但是我发现互联网上的例子可能是关于二进制除法的错误。我只链接了其中的两个（很多！）：[http](http://www.ross.net/crc/download/crc_v3.txt) : //www.ross.net/crc/download/crc_v3.txt，http: [//en.wikipedia.org/wiki/Cyclic_redundancy_check](http://en.wikipedia.org/wiki/Cyclic_redundancy_check)

所以我对二进制除法所做的是我使用 BigIntegers。像这样：

```
BigInteger divisor = new BigInteger("10011", 2);
 BigInteger dividend = new BigInteger("11010110110000", 2);
 BigInteger[] result = dividend.divideAndRemainder(divisor); 
```

这些值可以在第一个链接中看到（6\. 完整的示例）。让我们看看结果，参考给我的余数是 1110，我上面的代码给我 111。可能是代码错误？我不这么认为.. 让我们以十进制数计算：13744/19 = 723，余数为 7.. 所以代码给我 111，实际上是十进制的 7，但示例给我 1110，即 14。这是错误的不是吗？

如果您看到 wikipedia 示例，它再次给出错误，无论是第一次计算还是第二次计算。当我用上面的代码计算它们时，它给了我一个很好的十进制结果。几乎所有我检查的例子，我都得到了相同的结果。所以实际上，我到底错过了什么？

## -------------------------------------------------- ------

## 更新：工作代码

**嘿孩子们，正如我承诺的那样，我提供了一个使用 CRC 算术**的完整的二进制除法！如果你想使用多项式算术，上面的代码是完全可以的！只需使用该`getRemainder()`方法并添加两个字符串，它就会计算余数。**请记住**：如果您的位正确到达，则余数将为 0！在这个例子中，它给你一个长度为 0 的字符串！玩得开心！

```
public class BinaryDivision {

    String substracted;

    public BinaryDivision(){

    }

    public String getRemainder(String dividend, String divisor){

        int dividendLength = dividend.length();
        int divisorLength = divisor.length();

        String quotient="";
        String examinedP="";
        String divisorP="";
        substracted="";

        int indexNumber;
        int substractZeros=0;

        for (int i=0;i<divisorLength;i++){
            examinedP = examinedP + dividend.charAt(i);
        }

        indexNumber = divisorLength;

        for (int j=0;j<(dividendLength-divisorLength);j++){

            //START
            if ( Integer.parseInt(String.valueOf(examinedP.charAt(0)))==1){

                quotient=quotient + "1";

                int a = divisor.length();
                //substracting
                for (int i = 0;i<a;i++){
                //  System.out.println(examinedP.charAt(i) + "  " +  divisor.charAt(i));

                    substracted = substracted +
                            CRC_substract(Integer.parseInt(String.valueOf(examinedP.charAt(i))),
                                    Integer.parseInt(String.valueOf(divisor.charAt(i))));
                }

                substracted = substracted.substring(1);
                //----------------------------------------------
                substracted = substracted + dividend.charAt(indexNumber);

            }
            else {
                quotient=quotient + "0";
                int a = divisor.length();

                //substracting
                for (int i = 0;i<a;i++){
                    //System.out.println(examinedP.charAt(i) + "  " +  0);

                    substracted = substracted +
                            CRC_substract(Integer.parseInt(String.valueOf(examinedP.charAt(i))),
                                    0);
                }

                substracted = substracted.substring(1);
                substracted = substracted + dividend.charAt(indexNumber);

            }

            examinedP = substracted;
            //System.out.print(examinedP);
            substracted="";
            //System.out.println(" ");  System.out.println(" ");
            indexNumber++;
        }

        //counting remainder - if it starts with 0 - bye bye 0s..
        for (int i = 0;i<examinedP.length();i++){

            if (Integer.parseInt(String.valueOf(examinedP.charAt(i)))==0){
                substractZeros++;
            }
            else {
                break;
            }
        }

        examinedP = examinedP.substring(substractZeros);
    //  System.out.println(" ");    System.out.println(" ");
    //  System.out.print(examinedP);

    return examinedP;

    }

    //XOR - Exclusive OR
    public int CRC_substract(int a, int b){

        if (a==0 && b==0){
            return 0;
        }
        else if (a==0 && b==1){
            return 1;
        }
        else if (a==1 && b==0){
            return 1;
        }
        else if (a==1 && b==1){
            return 0;
        }

        return -1;
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T21:02:11.560

请参阅第一个链接中的第五章：他们正在使用“CRC 算术”。与“正常”算术的主要区别在于它们不使用进位。第五章中的加法示例比除法更容易理解，并显示了差异：

```
 10011011
+11001010
 --------
 01010001 
```

在使用进位的正常算术中，这将是

```
 10011011
+11001010
 --------
101100101 
```

由于 BigDecimal 使用“正常”算术，因此您得到的结果与参考文献中显示的结果不同。

# ruby-on-rails-3 - rails 3中的搜索表单未按预期返回

> ID：13297310
> 
> 赞同：0
> 
> 时间：2012-11-08T20:31:08.710
> 
> 标签：ruby-on-rails-3

这是我第一次尝试在我的 Rails 应用程序中实现一个简单的搜索表单，Rails 新手，如果我犯了一些重大错误，请原谅我

我有一个看起来像这样的搜索表单

```
 <%= form_tag({:controller => 'search', :action => 'search'}, {:method => 'get'})  do |s| %>
  <%= text_field_tag :search, params[:search] %>
   <%= submit_tag "Search" %>
  <% end %> 
```

我的控制器

```
def search

@countrysearch = Recipe.find(params[:search])
end 
```

现在我正在输出我的结果

```
 <h4>output</h4>
  <%= @countrysearch %> 
```

我得到一个输出但是如果我搜索像威尔士这样的词，我会得到一个错误，说无法通过 id 找到，但是如果我搜索像 17 这样的 id，那么我会得到

```
 #<Recipe:0x97b0fa8> 
```

我已经研究了 find_by_sql 方法，但我对此的理解还不存在，我不知道根据我输入的字符串搜索的语法，尽管我想这并不重要，因为参数是搜索字段的内容？

如果有任何帮助，那么将不胜感激

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T21:11:50.390

模型`find`方法 ( `Recipe.find()`) 需要实例的数字 id（特定配方）。但看起来您正在按国家/地区名称进行搜索。在 Rails中有*很多*方法可以做到这一点。但是，首先，我假设您的配方模型具有类似于“国家”的属性，其值类似于“威尔士”。

如果是这样，那么您可以使您的搜索方法如下：

```
def search
  @countrysearch = Recipe.find_by_country(params[:search])
end 
```

或者，您可以使用 Rails 3 中的新方法

```
def search
  @countrysearch = Recipe.where(:country => params[:search])
end 
```

不要使用`find_by_sql`——它会起作用，而且还不错，但是你错过了 Rails 的一些主要功能。

还有几件事值得一提：

*   如果搜索未返回任何结果，您将在视图中收到错误消息。在引用实例变量之前，使用或为正例`@countrysearch`测试 nil`if @countrysearch.nil?``if @countrysearch.present?`
*   很可能会有不止一个来自威尔士的食谱，所以不要期望`Recipe`返回的实例，而是它们的集合——在您看来，使用 <% @countrysearch.each do |recipe| 进行迭代 %> <%= recipe.name %> ... <% end %>
*   同样，如果您使用 finder 方法，您应该使用`Recipe.find_all_by_country`
*   将国家/地区名称存储在 Recipe 模型中并不是一个好习惯。创建一个包含国家的模型。
*   您可能需要不区分大小写的搜索（“Wales”！=“wales”）

# mysql - 在新列中一起添加两个 SQL 字段

> ID：13297312
> 
> 赞同：5
> 
> 时间：2012-11-08T20:31:11.330
> 
> 标签：mysql, sql

我想将我的数据库中的两个数值（STOCKVOLUME 和 UNITS）加在一起，并将结果插入到列中的不同字段（NEWVAL）中。我希望这段代码对数据库中的每一行都执行此操作。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T20:32:37.887

```
UPDATE YourTable
SET NEWVAL = STOCKVOLUME + UNITS 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-08T20:33:49.217

如果要插入另一个表：

```
INSERT INTO aTable(NEWVAL) SELECT (STOCKVOLUME + UNITS) FROM anotherTAble; 
```

如果要更新同一张表的另一个字段：

```
UPDATE aTable SET NEWVAL = (STOCKVOLUME + UNITS); 
```

# eclipse - 在 Eclipse 首选项中看不到 PHP 内容类型？

> ID：13297314
> 
> 赞同：4
> 
> 时间：2012-11-08T20:31:15.237
> 
> 标签：eclipse, eclipse-plugin, eclipse-pdt

我有一个带有 PDT 的新 eclipse Juno 安装。我导入了我的首选项，除了在内容类型部分我没有看到 PHP 内容类型外，一切似乎都正常工作。我看到 php 内容类型的“%content-typ.name0”；如屏幕截图所示。它有什么问题？

![在此处输入图像描述](../Images/551dd952576a00600f2d7a06ba129c73.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T01:28:58.047

? 这是 pdt 的错误。
“%content-type.name.0”是标签的变量名，标签包含在eclipse/plugins/org.eclipse.php.core_3.1.1.201209101312.jar中的plugin.properties
>content-type.name .0 = PHP 内容类型

您可以在 org.eclipse.php.core_3.1.1.201209101312.jar 中编辑 /META-INF/MANIFEST.MF，插入“Bundle-Localization: plugin”。（不要在空行后附加它）然后使用 -清洁选项。

# rft - RFT 使用脚本打开浏览器

> ID：13297318
> 
> 赞同：1
> 
> 时间：2012-11-08T20:31:23.380
> 
> 标签：rft

我想使用 RFT 来自动化网页上的一些操作。我浏览了一些链接和代码，我试图打开一个浏览器，比如使用 RFT 中的脚本谷歌。

我拿了一些代码，但这并不能在打开的浏览器上打开谷歌页面。

不知道是不是需要什么设置？谁能帮我这个？

# 我的代码是:::

```
import resources.Script1Helper;
import com.rational.test.ft.*;
import com.rational.test.ft.object.interfaces.*;
import com.rational.test.ft.object.interfaces.SAP.*;
import com.rational.test.ft.object.interfaces.WPF.*;
import com.rational.test.ft.object.interfaces.dojo.*;
import com.rational.test.ft.object.interfaces.siebel.*;
import com.rational.test.ft.object.interfaces.flex.*;
import com.rational.test.ft.object.interfaces.generichtmlsubdomain.*;
import com.rational.test.ft.script.*;
import com.rational.test.ft.value.*;
import com.rational.test.ft.vp.*;
import com.ibm.rational.test.ft.object.interfaces.sapwebportal.*;

public class Script1 extends Script1Helper
{
ProcessTestObject pto = startBrowser("www.google.com");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T06:08:45.597

在 RFT 中，您可以使用 startBrowser API，如下所示：

```
startBrowser("http://wwww.google.com"); //To launch google.com with default browser    

startBrowser("Internet Explorer","http://www.google.com");//To open google with internet explorer.Internet Explorer is the string that identifies the browser , it could be Mozialla Firefox and should be configured in the Enable Environment for testing wizard(in the browser tab) 
```

RFT 还在 BrowserTestObject 上提供了 api loadUrl("urlstring") 例如：

```
 browser_htmlBrowser().loadUrl("http://www.google.com");//Here browser_htmlBrowser comes from the Object Map. 
```

上面的代码会在首先找到浏览器测试对象后加载 google.com。

您也可以使用 Find() api 首先查找现有浏览器，然后像上面一样查找所有 loadUrl()。例如：

```
 TestObject[] browsers = find(atChild(".class","Html.HtmlBrowser"));
    if(browsers.length == 0)
    {
        System.err.println("No browsre found");
        return;
    }
    //Else take the first found object(browser) and load the url

    ((BrowserTestObject)browsers[0]).loadUrl("http://www.google.com");

    unregister(browsers);//Always clean up by calling unregister once done with the objects. 
```

希望有帮助。

# php - 防止 Xdebug 格式化 PHP 错误消息

> ID：13297320
> 
> 赞同：6
> 
> 时间：2012-11-08T20:31:31.280
> 
> 标签：php, xdebug

我仅将 Xdebug 用于 IDE 调试，并希望阻止它重新格式化 PHP 在浏览器中抛出的错误消息。我只想要常规的 PHP 错误消息，没有堆栈跟踪、表格布局或其他任何内容。我该如何做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-12T13:33:19.827

在这种情况下，您要设置：`xdebug.default_enable=0`。这将在出现错误消息时禁用堆栈跟踪。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T20:33:58.240

您可以在 php.ini 中控制 XDebug 的堆栈跟踪：

见[http://xdebug.org/docs/stack_trace](http://xdebug.org/docs/stack_trace)

对于完整的配置选项：http: [//xdebug.org/docs/all_settings](http://xdebug.org/docs/all_settings)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-08-17T11:43:49.563

此代码将解决问题**而无需更改您的 xdebug 配置**。 [https://xdebug.org/docs/all_functions](https://xdebug.org/docs/all_functions)

```
if (function_exists('xdebug_disable')) {
    //Disables stack traces
    //Disable showing stack traces on error conditions.
    xdebug_disable();
} 
```

Derick 建议的设置`xdebug.default_enable=0`效果很好，但需要更改 xdebug 设置。

您可能希望使用注册自己的错误处理程序`register_shutdown_function()`

启用 xdebug 堆栈跟踪后，我发现了以下问题：

1.  响应代码始终为 200，您无法覆盖它
2.  如果您正在处理类似 API 之类的东西，它预计会以格式化的错误消息（例如 JSON 错误响应）进行响应，这会使响应格式错误，因为 xdebug 将在您使用自己注册的关闭函数输出之前输出

有趣的是，当`xdebug.default_enable=0`您的 xdebug 配置中未指定时，`ini_get('xdebug.default_enable')`将返回字符串“0”。如果您设置`xdebug.default_enable=0`它也是字符串“0”。因此，您不能使用`ini_get('xdebug.default_enable')`它来检测它是否启用。

# javascript - 画布上出现的随机形状

> ID：13297324
> 
> 赞同：3
> 
> 时间：2012-11-08T20:31:44.280
> 
> 标签：javascript, html, canvas

我想要一些帮助，使形状随机出现在我的画布上并保持在它们出现的位置。目前我有一个按钮，按下时会出现三个形状，但我希望这三个形状在画布周围连续出现，直到再次按下按钮。

HTML：

```
<canvas id="example1" width="800" height="600">
    <p class="canvas-no-support">Your Browser Does Not Support HTML5 canvas!</p>
</canvas>

<button onclick="start()">Go!!</button> 
```

脚本：

```
function start() {
    setInterval(draw, 100);
}

function draw() {
    // get the canvas element using the DOM
    var canvas = document.getElementById('example1');

    // Make sure we don't execute when canvas isn't supported
    if (canvas.getContext) {

        var context = canvas.getContext('2d');

        //Red Square

        function dSqu() {
            context.strokeStyle = "rgb(255,215,0)"; //Yellow Outline
            context.fillStyle = "rgb(200,0,0)";
            context.lineWidth = 4; //Stroke Thickness
            context.fillRect(75, 75, 137, 137);
            context.strokeRect(75, 75, 137, 137); //Outline
        }

        function dCir() {
            //Purple Circle
            context.beginPath();
            context.arc(380, 137, 100, 0, Math.PI * 2, true);
            context.fillStyle = "rgb(200,80,200)";
            context.fill();
            context.lineWidth = 4; //Stroke Thickness
            context.strokeStyle = "rgb(255,215,0)";
            context.stroke();
        }

        function dTri() {
            //Green Triangle
            context.beginPath();
            context.fillStyle = "rgb(0,200,0)";
            context.moveTo(100, 100);
            context.lineTo(300, 100);
            context.lineTo(200, 200);
            context.lineTo(100, 100);
            context.fill();
            context.strokeStyle = "rgb(255,215,0)";
            context.stroke();
            ctx.closePath();
        }

        dSqu();
        dCir();
        dTri();

    } else {
        document.write('Your Browser does not support HTML5 Canvas.');
    }
}​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T20:33:58.060

使用[setInterval](https://developer.mozilla.org/en-US/docs/DOM/window.setInterval)进行重复操作，使用[Math.random()](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Math/random)获取随机数。

例如 ：

```
var functions = [dSqu, dCir, dTri];
setInterval(function(){
   functions[Math.floor(Math.random()*functions.length)]();
}, 200); 
```

这将每 200 毫秒调用一次随机获取的三个函数（`dSqu`或`dCir`）`dTri`之一。

为了让这个工作，你需要有可见的功能。例如，您可以将代码更改为

```
<script>
var canvas = document.getElementById('example1');
var context = canvas.getContext('2d');
function dSqu(){    
    ...
}
function dCir(){    
    ...
}
function dTri(){
    ...
}
var functions = [dSqu, dCir, dTri];
setInterval(function(){
   functions[Math.floor(Math.random()*functions.length)]();
}, 200);
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-17T07:18:02.393

这段代码对我很有效，应该对你有用

```
<script>

function drawShapes(l,w,x,y,colourOfLines,colourOfRect){
    var c=document.getElementById("c1");
    var ctx=c.getContext("2d");
    ctx.rect(x,y,l,w);
    ctx.fillStyle=colourOfRect;
    ctx.fill();
    ctx.strokeStyle=colourOfLines;
    ctx.strokeRect(x,y,l,w);
    }
for (i=0;i<=32;i++){
    l=Math.floor((Math.random()*200)+1);
    w=Math.floor((Math.random()*200)+1);
    x=Math.floor((Math.random()*800)+1);
    y=Math.floor((Math.random()*800)+1);
    x1=Math.floor((Math.random()*555)+1);
    c2=Math.floor((Math.random()*555)+1);
    c3=Math.floor((Math.random()*555)+1);
    c4=Math.floor((Math.random()*555)+1);
    c5=Math.floor((Math.random()*255)+1);
    c6=Math.floor((Math.random()*223)+1);
    drawShapes(l,w,x,y,"rgb(221,23,263)","rgb(c4,c5,c6)")
    }

</script> 
```

# eclipse - Selenium Webdriver JUNIT Maven Eclipse 运行测试用例失败

> ID：13297325
> 
> 赞同：2
> 
> 时间：2012-11-08T20:31:45.397
> 
> 标签：eclipse, maven, selenium, junit, selenium-webdriver

我正在尝试使用 JUNIT 4.10 和 Selenium 为在 Eclipse 中使用 Maven 的 Web 应用程序运行测试用例。

我创建了一个简单的 java 项目，其中 JUNIT 测试用例添加了适当的依赖项。它工作得很好，`Run as a JUNIT Test case`但它不能作为 Maven 测试工作，所以类似`mvn clean test`的东西不起作用。

这是我对 pom.xml 的摘录

```
 <build>
<plugins>
    <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-surefire-plugin</artifactId>
        <version>2.12.4</version>
    </plugin>
</plugins> 
```

```
<dependencies>
<dependency>
  <groupId>junit</groupId>
  <artifactId>junit</artifactId>
  <version>4.10</version>
  <scope>test</scope>
</dependency>
<dependency>
  <groupId>org.apache.poi</groupId>
  <artifactId>poi</artifactId>
  <version>3.8</version>
  <scope>compile</scope>
</dependency>
<dependency>
    <groupId>org.seleniumhq.selenium</groupId>
    <artifactId>selenium-java</artifactId>
    <version>2.25.0</version>
    <type>jar</type>
    <scope>test</scope>
</dependency> 
```

这也是我写的 JUnit 测试用例，

```
@Test()
public void testTC101() throws InterruptedException{
    driver.get(ADMIN_BASE_URL_QA);
    driver.manage().timeouts().implicitlyWait(12, TimeUnit.SECONDS);
    driver.findElement(By.xpath("//*[@id='top30Events']"));
    WebElement loanModFullEvent = driver.findElement(By.partialLinkText(QA_MOD_FULL_EVENT));
    loanModFullEvent.click();
    String clickedFullEventId = loanModFullEvent.findElement(By.xpath("..")).getAttribute("id").split("_")[1];
    List<WebElement> nearbyEvents = driver.findElements(By.id("nearby_events_" + clickedFullEventId));
    ListIterator<WebElement> wIterator = nearbyEvents.listIterator();
    WebElement element = null;
    String registerNowId = null;
    while(wIterator.hasNext()) {
        element = wIterator.next().findElement(By.linkText(QA_MOD_NONFULL_EVENT));
        element.click();
        registerNowId = element.getAttribute("onclick").replaceAll("\\D+", "");
    }
    registerNowId = "top30_" + registerNowId;
    driver.findElement(By.xpath("//*[@id='" + registerNowId + "']/div[3]/div/a")).click();              
    WebElement dropDownListBox = driver.findElement(By.xpath("//*[@id='list']"));
    Select clickThis = new Select(dropDownListBox);
    clickThis.selectByValue("mod");
    driver.findElement(By.xpath("//*[@id='situationdropdown']/div/div/div[1]/span/span/span/input")).click();
    RegistrationForm.fillFormAndSubmit();

} 
```

代码只是为了这个想法，但问题是它在 JUnit 测试用例中运行，为什么不使用 maven。它说测试：0 次运行：0 次跳过：0

为什么它不识别测试，我仍然不确定为什么？有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T20:50:27.273

您说您的测试类名称以 Tests 结尾。根据surefire插件站点，这不是默认模式之一：[http ://maven.apache.org/plugins/maven-surefire-plugin/examples/inclusion-exclusion.html](http://maven.apache.org/plugins/maven-surefire-plugin/examples/inclusion-exclusion.html)

```
**/Test*.java" - includes all of its subdirectories and all java filenames that start with "Test
**/*Test.java" - includes all of its subdirectories and all java filenames that end with "Test
**/*TestCase.java" - includes all of its subdirectories and all java filenames that end with "TestCase 
```

# jsf-2 - 在托管 bean 中捕获异常并在 jsf2 的屏幕上显示消息

> ID：13297328
> 
> 赞同：1
> 
> 时间：2012-11-08T20:32:03.380
> 
> 标签：jsf-2, exception-handling

我正在使用 JSF 2，并且在使用某些 Web 服务时遇到了一些异常，我想捕获该异常并在我的`.xhtml`页面上显示该消息。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T00:04:15.053

您可以使用[该`try-catch`块](http://docs.oracle.com/javase/tutorial/essential/exceptions/)来捕获和处理异常。您可以使用[`FacesContext#addMessage()`](http://docs.oracle.com/javaee/6/api/javax/faces/context/FacesContext.html#addMessage%28java.lang.String,%20javax.faces.application.FacesMessage%29)将面孔消息添加到面孔上下文。您可以使用[`<h:messages>`](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/h/messages.html)显示面孔消息。

所以，在 bean 中是这样的：

```
try {
    data = yourWebService.retrieve();
} catch (YourWebServiceException e) {
    String message = "Failed to retrieve data from webservice: " + e.getMessage());
    FacesContext.getCurrentInstance().addMessage(null, 
        new FacesMessage(FacesMessage.SEVERITY_INFO, message, null));
    e.printStackTrace(); // Or use a logger.
} 
```

这在 JSF 页面中：

```
<h:messages globalOnly="true" /> 
```

*（这`globalOnly="true"`将强制`<h:messages>`只显示带有`null`客户端 ID 的消息）*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T14:38:00.187

为了给你一个 BalusC 解释的例子，你可以编写一个在 catch 语句中调用的简单方法。

```
private void addErrorMessage(String msg, String clientId) {
        String codingErrorMsgKey = "coding_error_msg";
        FacesMessage fm;
        FacesContext facesContext = FacesContext.getCurrentInstance();
        if (StringUtils.isEmpty(msg)) {
            ResourceBundle bundle = facesContext.getApplication().getResourceBundle(facesContext, "bundle");
            fm = new FacesMessage(FacesMessage.SEVERITY_ERROR, bundle.getString(codingErrorMsgKey), bundle.getString(codingErrorMsgKey));
        }
        else {
            fm = new FacesMessage(FacesMessage.SEVERITY_ERROR, msg, msg);
        }
        facesContext.addMessage(clientId, fm);
    } 
```

该方法的作用非常简单：您给它一个消息，您可能已经从应用程序的资源包中早先解决了，然后创建一个全局（仅当 clientId 为空）错误（因为`FacesMessage.SEVERITY_ERROR`）`FacesMessage`。`facesContext`如果您没有提供任何错误消息，则使用默认字符串作为消息添加创建的错误消息。

由于此方法能够创建全局和 clientId 相关的错误消息，因此您不必使用`globalOnly`属性。只需指定`<h:messages/>`让标签显示您的所有消息（全局或非全局）。

同样，这只是示例代码。您可能需要调整/改进以使其成为您自己的。此外，您几乎可以复制此方法来处理信息消息。

作为处理错误消息的通用方法，您可以在每个控制器都将扩展的超类中使用此方法。

# java - 流数据的理想 Java 数据结构

> ID：13297333
> 
> 赞同：5
> 
> 时间：2012-11-08T20:32:42.390
> 
> 标签：java, performance, collections

我想到了一个特定的用例，但无法找出要使用的正确数据结构。

我有一个线程可以将对象流式传输到 HashMap 中。类似于市场数据的东西，其中您有很高且未知的分时频率。

另一个线程不断读取此映射以获取更新的 Price 对象并按特定顺序按键查询。在给定的周期中，对于同一个键的查询可能会多次。读取和写入非常频繁，但读取线程只对完全更新的最新可用数据感兴趣，并且在写入完成之前不一定会阻塞。

我希望您对此类用例的理想数据结构有想法。是否有比可用的 ConcurrentHashMap 更好的实现？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T20:38:20.643

[并发哈希映射](http://java.dzone.com/articles/java-7-hashmap-vs)。来自 Javadoc

> 支持检索的完全并发和可调整的预期更新并发的哈希表。此类遵循与 Hashtable 相同的功能规范，并包含与 Hashtable 的每个方法对应的方法版本。但是，即使所有操作都是线程安全的，检索操作也不需要锁定，并且不支持以阻止所有访问的方式锁定整个表。在依赖线程安全但不依赖同步细节的程序中，此类与 Hashtable 完全可互操作。
> 
> 检索操作（包括 get）一般不会阻塞，因此可能与更新操作（包括 put 和 remove）重叠。检索反映了最近完成的更新操作在其开始时保持的结果。对于 putAll 和 clear 等聚合操作，并发检索可能仅反映插入或删除某些条目。类似地，迭代器和枚举返回反映哈希表在创建迭代器/枚举时或之后的某个时间点的状态的元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T20:49:39.337

如果在更新数据时未修改映射（即没有放置或删除），您甚至不需要像 ConcurrentHashMap 这样的同步映射。如果程序执行过程中不断有puts和removes，则需要同步这些调用。然而，当更新频率变高时（在多线程程序中），即使是 ConcurrentHashMap 也会开始抛出 ConcurrentModificationExceptions 。什么频率太高？您可能必须自己衡量，这取决于您平台中的许多因素。

在这些情况下，我会尝试创建一种情况，即在程序执行期间不必从映射中插入或删除，仅在数据流停止时启动和关闭时。如果这不可能，我使用普通的 HashMap 和优秀的数据结构[CopyOnWriteArrayList](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/CopyOnWriteArrayList.html)的组合，并在外部进行同步。我还没有测试过 ConcurrentHashMap 的限制，但我不会将它用于我自己的生产系统。

编辑：ConcurrentHashMap 不会导致任何 ConcurrentModificationExceptions，仅当您使用 Collections.synchronizedMap 时，您可能会遇到麻烦。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T22:42:56.570

一种方法是写时复制方案，如下所示：

```
public class Prices {
    private volatile Map<String, Integer> prices = Collections.emptyMap();

    public void putPrice(String ticker, int price) {
        HashMap<String, Integer> newPrices = new HashMap<String, Integer>(prices);
        newPrices.put(ticker, price);
        prices = newPrices;
    }

    public Integer getPrice(String ticker) {
        return prices.get(ticker);
    }
} 
```

这对获取具有最小的开销 - 从 volatile 读取，然后是正常的哈希查找。但是，它对 puts 有很大的开销——创建一个全新的映射，以及对 volatile 的写入。如果您的读写比率很高，这可能仍然是一个很好的权衡。

您可以通过仅在实际需要添加新条目而不是更新现有条目时更改地图来改进这一点；您可以通过使用可变值来实现：

```
public class Prices {
    private volatile Map<String, AtomicInteger> prices = Collections.emptyMap();

    public void putPrice(String ticker, int price) {
        AtomicInteger priceHolder = prices.get(ticker);
        if (priceHolder != null) {
            priceHolder.set(price);
        }
        else {
            HashMap<String, AtomicInteger> newPrices = new HashMap<String, AtomicInteger>(prices);
            newPrices.put(ticker, new AtomicInteger(price));
            prices = newPrices;
        }
    }

    public Integer getPrice(String ticker) {
        AtomicInteger priceHolder = prices.get(ticker);
        if (priceHolder != null) return priceHolder.get();
        else return null;
    }
} 
```

我不确定 an 的性能特征是什么`AtomicInteger`；这可能比看起来要慢。假设`AtomicInteger`不是不合理的慢，这应该非常快 - 它涉及从 volatile 读取两次加上每次获取的正常哈希查找，从 volatile 读取，哈希查找，以及对 volatile 的一次写入以更新现有价格。它仍然涉及复制地图以添加新价格。然而，在典型的市场中，这种情况并不经常发生。

# c - 我可以使用图形 API 设置 Facebook 页面吗？

> ID：13297337
> 
> 赞同：-3
> 
> 时间：2012-11-08T20:33:04.397
> 
> 标签：c, facebook-javascript-sdk

我想知道是否有可能以编程方式进行，我尝试做的是在一个项目中创建多个 Facebook 页面，而无需访问 www.facebook.com

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T20:36:40.803

简单回答：不，您不能使用 Graph API 创建 Facebook 页面。我猜主要是出于垃圾邮件的原因。

# sms - 调制解调器收到新短信时自动执行 C# 应用程序

> ID：13297338
> 
> 赞同：1
> 
> 时间：2012-11-08T20:33:09.847
> 
> 标签：sms, autoload, gsm, modem

我正在尝试开发一个与 GSM 调制解调器通信的应用程序。我已经正确完成了所有设置，但是当我将此应用程序部署到服务器时，我的问题就出现了。

我希望每当调制解调器收到 SMS 消息时，它会自动更新 C# 应用程序中显示的列表。我应该怎么做，怎么可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T07:46:57.320

使用 AT 命令/Windows Mobile Broadband API/Win 8 non-Metro API 从调制解调器读取 SMS，然后你可以用它做你喜欢的事情。

标准 GSM AT 命令在规范 3GPP TS 27.007 中定义，您可以从 www.3gpp.org 下载该规范。

# javascript - 将 JQuery Xml 树存储在变量中

> ID：13297341
> 
> 赞同：0
> 
> 时间：2012-11-08T20:33:22.823
> 
> 标签：javascript, jquery, xml, ajax

xml:

```
<Data>
   <Cat>
      <Name>Fluffy</Name>
   </Cat>

   <Cat>
      <Name>Willy</Name>
   </Cat>
</Data> 
```

查询：

```
// ...Some ajax calls...
$(xml).find('Cat').each(function() {
   var name = $(this).find('Name').text();
   alert(name);
}); 
```

如何将结果存储`find('Cat')`在变量中，以便将其传递给函数并在那里处理？我想过这样的事情，但它不起作用：

```
var cats = $(xml).find('Cat');
ShowCatNames(cats); 
```

...

```
function ShowCatNames(cats) {
   $(cats).each(function() {
       var name = $(this).find('Name').text();
       alert(name);
   }
} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T20:37:06.113

先尝试解析xml

```
var cats = $($.parseXML(xml)).find('Cat'); 
```

# java - 使用 Metro + WSIT 在服务端点检索明文 WS-Security 密码？

> ID：13297345
> 
> 赞同：3
> 
> 时间：2012-11-08T20:33:31.657
> 
> 标签：java, jax-ws, ws-security, java-metro-framework, wsit

我正在编写一个 SOAP 服务（我们称之为 X），它充当某种“转发代理”，替换正文中的几个元素，然后调用另一个 SOAP 服务 (Y)。我想使用调用 Y 时在 X 中收到的相同 WS-Security 凭据（**纯文本**用户名和密码），但是在检索 Password 元素的值时遇到了问题。

我在`wsit-package.service.xml`文件中声明的策略引用了以下实现`com.sun.xml.wss.impl.callback.PasswordValidationCallback.PasswordValidator`：

```
<wsp1_2:Policy wsu:Id="UsernameToken" 
  xmlns:wsp1_2="http://schemas.xmlsoap.org/ws/2004/09/policy"
  xmlns:sp="http://docs.oasis-open.org/ws-sx/ws-securitypolicy/200702"
  xmlns:wsss="http://schemas.sun.com/2006/03/wss/server"
  xmlns:wspp="http://java.sun.com/xml/ns/wsit/policy">
  <wsp1_2:ExactlyOne>
    <wsp1_2:All>
      <sp:SupportingTokens>
        <wsp1_2:Policy>
          <sp:UsernameToken sp:IncludeToken="http://docs.oasis-open.org/
ws-sx/ws-securitypolicy/200702/IncludeToken/AlwaysToRecipient" />
          <sp:IncludeTimestamp />
        </wsp1_2:Policy>
      </sp:SupportingTokens>
      <wsss:ValidatorConfiguration wspp:visibility="private" >
        <wsss:Validator name="usernameValidator" 
            classname="com.service.validator.SecurityValidator" />
      </wsss:ValidatorConfiguration>
    </wsp1_2:All>
  </wsp1_2:ExactlyOne>
</wsp1_2:Policy> 
```

我可以在验证器中访问密码：

```
@Override
public boolean validate(Request request) throws PasswordValidationException {
    String password = ((PlainTextPasswordRequest) request).getPassword();
    return true;
} 
```

但是，由于验证器无权访问 WebServiceContext，因此我的服务端点无法方便地存储它。

使用其他标头，例如 WS-Addressing，我可以使用 Handler（的实现`SOAPHandler<SOAPMessageContext>`）来提取值，然后将它们放回应用程序范围下的上下文中，以便我的端点检索。在 SOAP 消息到达我的处理程序链时，WS-Security 标头已经被剥离，因此无法在处理程序中检索它们的值。

**没有做一些激烈的事情，比如使用验证器将密码存储在数据库/全局映射/线程本地存储中，我有什么方法可以检索在我的端点提供的 WS-Security 密码？**

我应该注意，我可以通过 访问端点上的 WS-Security 用户名信息`Subject subj = SubjectAccessor.getRequesterSubject(context)`，但这似乎不包含密码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T18:34:57.960

由于缺乏更好的解决方案，我最终使用 ThreadLocal 存储来访问我的服务端点中的 WS-Security 用户名和密码：

```
package com.my.ws.validator;

import com.sun.xml.wss.impl.callback.PasswordValidationCallback.PasswordValidationException;
import com.sun.xml.wss.impl.callback.PasswordValidationCallback.PasswordValidator;
import com.sun.xml.wss.impl.callback.PasswordValidationCallback.PlainTextPasswordRequest;
import com.sun.xml.wss.impl.callback.PasswordValidationCallback.Request;

public class SecurityValidator implements PasswordValidator {

    private static final ThreadLocal<String> username = new ThreadLocal<String>();
    private static final ThreadLocal<String> password = new ThreadLocal<String>();

    @Override
    public boolean validate(final Request request) throws PasswordValidationException {

        if (request instanceof PlainTextPasswordRequest) {
            PlainTextPasswordRequest plainText = (PlainTextPasswordRequest) request;

            if (null == plainText.getUsername() || plainText.getUsername().trim().isEmpty())
                throw new PasswordValidationException("A username must be provided");
            else
                username.set(plainText.getUsername());

            if (null == plainText.getPassword() || plainText.getPassword().trim().isEmpty())
                throw new PasswordValidationException("A password must be provided");
            else
                password.set(plainText.getPassword());

            return true;
        }

        return false;
    }

    public static String getUsername() {
        String user = username.get();
        username.remove();
        return user;
    }

    public static String getPassword() {
        String pass = password.get();
        password.remove();
        return pass;
    }

} 
```

# javascript - 如何从 JavaScript 中的前一个索引号中减去 1

> ID：13297349
> 
> 赞同：0
> 
> 时间：2012-11-08T20:33:41.933
> 
> 标签：javascript, indexing

如何从索引中减去 1（或任何数字）而不减少它（变量中的值没有变化）？

这是我的代码片段：

```
if (i > 0 & areaImages[i].id == areaImages[i-1].id) 
```

我从 Firebug 收到此错误消息：

```
TypeError: areaImages[i - 1] is undefined 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-08T20:34:55.140

# java - SQL Server JTDS 连接问题

> ID：13297351
> 
> 赞同：0
> 
> 时间：2012-11-08T20:33:43.417
> 
> 标签：java, sql-server, windows-authentication, jtds

这很奇怪，我正在连接一个为 Windows 配置了集成身份验证的 sql server 2008 实例。我找到了一种通过在代码中执行此操作来绕过集成身份验证的方法：

```
Connection con = DriverManager.getConnection( "jdbc:jtds:sqlserver://mydbserver/myDbname;useNTLMv2=true;username=$jboss;password=1234;domain=MYDOMAIN", "$jboss", "1234"); 
```

因此，在上面对 jtds 驱动程序进行 name 类之后，它可以完美运行。但是，我需要将其作为连接字符串放在配置文件中，并且当我更改上述内容以使用 getConnection 上的方法调用而不明确发送用户名时，密码参数如下：

```
 Connection con = DriverManager.getConnection( "jdbc:jtds:sqlserver://mydbserver/myDbname;useNTLMv2=true;username=$jboss;password=1234;domain=MYDOMAIN"); 
```

我得到一个 Native SSPI library not loaded 异常，因为它试图使用 Windows 身份验证进行身份验证。所以我发现 jts 分发中的 dll 将 ntlmauth.dll 添加到我的 bin 和系统类路径中，然后我得到一个不受信任的域登录异常，我知道我可以通过在域下执行“RUNAS.exe”来解决它，但这让我回到不得不使用我不想要的集成身份验证。

问题归结为，为什么我可以通过将用户名和密码作为参数传递给 getConnection() 方法来创建没有任何问题的连接，但是当我不这样做时，它会强制集成身份验证。如果我自己在代码中创建连接，这将不是问题，但我需要一个连接字符串来放入我的属性文件并且不知道如何构造一个将调用 getConnection() 并提供用户名、密码的连接字符串作为参数。

我讨厌这些乏味的问题已经谷歌搜索但空手而归，任何输入都会有所帮助。- 邓肯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T20:59:01.797

参数是用户，而不是用户名。那应该可以解决您的问题。所以试试：

```
 Connection con = DriverManager.getConnection( "jdbc:jtds:sqlserver://mydbserver/myDbname;useNTLMv2=true;user=$jboss;password=1234;domain=MYDOMAIN"); 
```

# jquery - 使用变量名在 jQuery 插件中调用函数

> ID：13297363
> 
> 赞同：0
> 
> 时间：2012-11-08T20:34:27.157
> 
> 标签：jquery

我有下面的代码。

```
(function($) {

    var myFunction = function(element) {

        var myCallerFunction = function() {
            var functionName = 'myInternalCallFunction';
            myFunction[functionName]();
            console.log(2);

        }

        var myInternalCallFunction = function() {

            console.log(1);
        }

        myCallerFunction();

    }

    $.fn.myfunction = function(options) {
        var func = new myFunction();
    }

})(jQuery); 
```

在 myCallerFunction 中，我创建了一个变量，其中包含我要调用的函数名称。然后我尝试调用它，但是它返回找不到该函数。它发现命名空间 myFunction 没问题，就好像我改变了一样：

```
myFunction[functionName](); 
```

至

```
myFunctionTest[functionName](); 
```

它返回它找不到“myFunctionTest”而不是找不到“myInterncalCallFunction”。

任何想法为什么它找不到该功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T22:57:33.820

By calling `myFunction['myInternalCallFunction']()` you are actually calling `myFunction.myInternalCallFunction()`. Of course, it is undefined since `myInternalCallFunction` is not a property of `myFunction`, it is its private variable. One way of solving this while not turning private variables to properties:

```
(function($) {

    var myFunction = function(element) {
        var cache = {};
        var myCallerFunction = function() {
            var functionName = 'myInternalCallFunction';
            cache[functionName]();
            console.log(2);

        }

        cache.myInternalCallFunction = function() {

            console.log(1);
        }

        myCallerFunction();

    }

    $.fn.myfunction = function(options) {
        var func = new myFunction();
    }

})(jQuery); 
```

# javascript - 如何在中使用 response.redirect使用ajax，如果我想使用链接（）中的类名ajax？

ID：13297368

赞同：0

时间：2012-11-08T20:34:46.970

标签：javascript, asp.net, ajax

# google-maps - 在 Google Maps API v3 中隐藏所有建筑物

> ID：13297374
> 
> 赞同：4
> 
> 时间：2012-11-08T20:35:02.803
> 
> 标签：google-maps, google-maps-api-3

我有一个自定义样式的谷歌地图。

我想隐藏或设计所有显示的建筑物。 [在这里看到（有建筑物）](http://cl.ly/image/2I0u0F392l2m)

翻阅文档，似乎没有办法隐藏建筑物，事实上，似乎根本没有提及建筑物（政府建筑物除外）。

是否有可能隐藏这些 - 如果可以，如何隐藏？

这是地图代码：

```
<script src="http://maps.google.com/maps/api/js?sensor=false" 
type="text/javascript"></script>

<div id="map"></div> 

<script type="text/javascript">

var address = 'Bowie, MD';

var styles = [
{
featureType: 'landscape',
elementType: 'all',
stylers: [
{ hue: '#33548f' },
{ saturation: 28 },
{ lightness: -57 },
{ visibility: 'simplified' }
]
},{
featureType: 'road.local',
elementType: 'all',
stylers: [
{ "visibility": "simplified" },
{ "color": "#366b97" }
]
},{
featureType: 'poi',
elementType: 'all',
stylers: [
{ hue: '#33548f' },
{ saturation: 8 },
{ lightness: -51 },
{ visibility: 'off' }
]
},{
featureType: 'road.highway',
elementType: 'all',
stylers: [
{ hue: '#233961' },
{ saturation: -53 },
{ lightness: -60 },
{ visibility: 'on' }
]
},{
featureType: 'water',
elementType: 'all',
stylers: [
{ hue: '#2a4576' },
{ saturation: 5 },
{ lightness: -59 },
{ visibility: 'simplified' }
]
},{
featureType: 'administrative',
elementType: 'all',
stylers: [
{ hue: '#333333' },
{ saturation: 0 },
{ lightness: -61 },
{ visibility: 'off' }
]
},{
featureType: 'administrative',
elementType: 'all',
stylers: [
{ hue: '#333333' },
{ saturation: 0 },
{ lightness: -61 },
{ visibility: 'off' }
]
},{
featureType: 'road.arterial',
elementType: 'all',
stylers: [
{ hue: '#2c487b' },
{ saturation: -53 },
{ lightness: -57 },
{ visibility: 'on' }
]
}
];
var options = {
mapTypeControlOptions: {
mapTypeIds: [ 'Styled']
},
center: new google.maps.LatLng(38.956318403646755, -76.72218313217161),
zoom: 16,
mapTypeId: 'Styled',
panControl: false,
zoomControl: true,
zoomControlOptions: {
style: google.maps.ZoomControlStyle.LARGE,
position: google.maps.ControlPosition.RIGHT_TOP
},
mapTypeControl: false,              
scaleControl: false,
};
var div = document.getElementById('map');
var map = new google.maps.Map(div, options);
var styledMapType = new google.maps.StyledMapType(styles, { name: 'Styled' });
map.mapTypes.set('Styled', styledMapType);

var geocoder = new google.maps.Geocoder();

geocoder.geocode({
'address': address
}, 
function(results, status) {
if(status == google.maps.GeocoderStatus.OK) {
new google.maps.Marker({
position: results[0].geometry.location,
map: map
});
map.setCenter(results[0].geometry.location);
}
else {
// Google couldn't geocode this request. Handle appropriately.
}
});

</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T16:29:41.733

要隐藏建筑物，您需要`"visibility": "simplified"`在添加任何特定样式之前进行全局设置。

然后，您可以返回并将可见性设置为“打开”，并为每个元素添加其他样式。

似乎 API 应该有控制建筑物的方法，但目前似乎没有。这将不得不工作到那时。

例如：

```
var styles = [
      {
        "stylers": [
          { "visibility": "simplified" },
          { "saturation": -100 }
        ]
      },{
        "featureType": "road.local",
        "elementType": "labels.text",
        "stylers": [
          { "visibility": "on" }
        ]
      },{
        "featureType": "road.highway",
        "elementType": "labels.text",
        "stylers": [
          { "visibility": "on" }
        ]
      },{
        "featureType": "road.arterial",
        "stylers": [
          { "visibility": "on" }
        ]
      },{
        "featureType": "poi",
        "stylers": [
          { "visibility": "on" },
          { "lightness": 25 }
        ]
      },{
        "featureType": "poi",
        "stylers": [
          { "lightness": 1 }
        ]
      }
    ] 
```

# javascript - 如何使用 Modernizr.js 测试 DOM4 Mutation Observers？

> ID：13297380
> 
> 赞同：3
> 
> 时间：2012-11-08T20:35:25.117
> 
> 标签：javascript, jquery, modernizr, polyfills, mutation-observers

我正在尝试创建一个测试来检测使用 Modernizr.js的[Mutation Observers 。](http://updates.html5rocks.com/2012/02/Detect-DOM-changes-with-Mutation-Observers)在 Modernizer 文档中，[有一个部分用于测试 DOM 元素](http://modernizr.com/docs/#prefixeddom)，称为前缀。我尝试使用：

```
Modernizr.load({
    test: Modernizr.prefixed('MutationObserver', window),
    yep: ['/js/polyfill_yep.js'],
    nope: ['/js/polyfill_nope.js']
}); 
```

但很明显，这是行不通的。我得到一个`TypeError: f.bind is not a function`我相当确定前缀字符串不是 MutationObserver，但我不知道它可能是什么，或者即使我正在正确编写测试。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T23:11:01.240

这是一场胜利！

```
Modernizr.load({
    test: MutationObserver = window.MutationObserver || window.WebKitMutationObserver || window.MozMutationObserver,
    yep: '/js/mutations.js',
    nope: '/js/mutation_fallback.js'
}); 
```

# python - Python Windows 启动器 (Python 3.3/PEP 397) 是否向后兼容？

> ID：13297381
> 
> 赞同：1
> 
> 时间：2012-11-08T20:35:35.203
> 
> 标签：python, windows

[Python 3.3.0](http://www.python.org/download/releases/3.3.0/)（礼貌[PEP 397](http://www.python.org/dev/peps/pep-0397/) ）中的新 Windows 启动器（解释 shebangs）是否向后兼容所有旧的 Py 2.X 解释器？通过阅读 PEP，我不能完全确定，和/或我是否必须做任何特别的事情才能让它们共存。PEP 的最后一次更新已经有一年多的历史了，而 3.3 版本大约是 1 个月大。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T21:22:20.753

肆无忌惮地用我 Windows 的注册表项和环境变量的老鼠窝赌博揭示了答案： **是的。**

在现有的 2.x（在我的例子中为 2.7.3）安装之上安装 Python 3.3.0 有效地使一切保持现状。脚本现在默认通过`py.exe`启动器 in 启动`%systemroot%`，在没有任何相反指令的情况下（通过 shebang 或命令行开关，a la `py -3 [myscript]`）使用 2.x 解释器。

# javascript - 播放声音和图像

> ID：13297386
> 
> 赞同：1
> 
> 时间：2012-11-08T20:36:03.937
> 
> 标签：javascript, html, image, load, embed

目前我正在开发一个非常简单的页面，比如“可怕的迷宫”。我在 Photoshop 中有 2 张相同的图像，并进行了微小的编辑。该人必须找到 3 个差异才能跳到下一个级别。诀窍是当他发现差异时，它会显示一个带有声音的可怕图像。

我想用 HTML、JS 和 PHP 构建页面。我知道所有类似的页面都是用 Flash 制作的，但由于我没有任何经验，所以无法使用它进行开发。

我知道有一个加载时间（当声音或图像位存储在计算机内存中时），我需要找到一种方法来在没有负载的情况下同时显示所有内容。它必须立即弹出声音效果。

实际上（有这个经验）我想我需要使用CSS规则来隐藏绝对位置的可怕图像，并用JS检查它是否已经加载（`<img src="" onload="g_imgLoaded++" />`）。这是将图像位存储在内存中然后弹出图像的好方法吗？音效呢？我应该如何加载它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T20:38:09.207

是的，那会奏效。同样，您可以`<audio>`在页面上设置元素`preload="auto"`以确保在需要时加载声音。没有什么比延迟更能破坏企图的恐慌了。

# asp.net-mvc - 实体框架 - 填充剩余属性

> ID：13297387
> 
> 赞同：0
> 
> 时间：2012-11-08T20:36:12.720
> 
> 标签：asp.net-mvc, entity-framework

我有一个接收 Dto 模型并映射到域模型的方法：

方法：

```
public void CreateAd(CreateAdDto adDto) { 

    var adDomain = Mapper.Map<CreateAdDto, Ad>(adDto);
} 
```

Dto 对象：

```
public class CreateAdDto
{
    public int Model_Id { get; set; }
} 
```

Dto 映射域模型：

```
public class Ad
{
    public int Id { get; set; }
    public Model Model { get; set; }
} 
```

和模型：

```
public class Model
{
    // Primary properties
    public int Id { get; set; }
    public string Name { get; set; }
    public string NameStandard { get; set; }
} 
```

我需要在 CreateAd 方法中访问 Model.NameStandard 值，但是当我进行映射时，我只有模型 ID，那么如何获取包含 NameStandard 值在内的所有属性的模型实体？

我是否必须调用**模型 GetById(Model_Id)**才能获取模型属性，或者是否有另一种方式，例如 Attach 中的属性可以带来所有属性？

还是应该在 ViewModel 中使用模型并将所有属性传递给 Dto 和域？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T23:13:09.007

是的，您必须调用`GetById`（可能`Find`或`SingleOrDefault`？）或使用显式加载：

```
context.Ads.Attach(adDomain);
context.Entry(adDomain).Reference(a => a.Model).Load(); 
```

（EF >= 4.1/`DbContext`语法）

或者传递`Model`到隐藏字段中的视图并从视图中检索它们。这可能只是一个性能问题（我不知道什么性能更好）或者可能是一个安全问题（`NameStandard`只包含用户在检查 html 标记或网络上的流量时被允许查看的数据？）。

**编辑**

对不起，上面的显式加载是胡说八道。`Ad.Id`只有当您有空并且想要获取相关的`Model`（如果`Ad`数据库中已经存在）时才有意义。

因此，只有`GetById`在这种情况下才有用。

# android - 如何从堆栈中删除顶部活动，并开始下一个活动

> ID：13297389
> 
> 赞同：1
> 
> 时间：2012-11-08T20:36:19.743
> 
> 标签：android, android-activity, stack, history

在我的应用程序中，我有三个活动 A、B 和 C。活动 A 正在使用特定的 requestCode 启动活动 B（并等待返回的结果），活动 B 正在启动活动 C。在清单中，C 设置为不存储它堆栈上的历史记录，因此当用户继续时，他们将被发送到活动 B。现在，从下到上，后堆栈看起来像 ABB。最底部的 B 以正确的 requestCode 开始，但最顶部的 B 没有以任何 requestCode 开始。现在我的问题是，我怎样才能使最底层的 B 被“恢复”而不是最顶层的 B 被创建？此外，我尝试在清单中为 B 活动使用“singleTask”和“singleTop”属性，虽然它确实使用了堆栈中已经存在的相同活动实例，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T20:54:16.587

实际上，我正在阅读有关用于启动活动的不同标志并找到该`FLAG_ACTIVITY_REORDER_TO_FRONT`标志的信息。这完全实现了我想要的，它恢复了已经在堆栈上的活动而不创建另一个实例，并且不发出或更改任何现有的 requestCodes。

# jquery - jqGrid 抛出：未捕获的类型错误：无法读取未定义的属性“a”

> ID：13297393
> 
> 赞同：1
> 
> 时间：2012-11-08T20:36:44.617
> 
> 标签：jquery, json, jqgrid

我`Uncaught TypeError`在 SO 上发现了其他几个基于问题的问题，但不是这个特定的问题，所以我想我会提出这个问题，以防万一其他人遇到这个问题。

我的 jqGrid 工作得非常好，但是我一直在控制台中看到这个错误：

```
Uncaught TypeError: Cannot read property 'a' of undefined jquery.jqGrid.min.js:423 
```

我查了一下，这对应于***jquery.jqGrid.src.js*****的第4364**行

 *我在版本**jqGrid-4.4.0**

一旦网格加载，但在网格填充数据之前，我就会收到错误。

即使它有效，我也很担心，因为我的大多数用户都在 IE6 上，而 IE 有时甚至对最愚蠢的 javascript 错误都非常敏感。对此问题的任何帮助将不胜感激。

PS：在阅读了对先前提出的类似问题的回复后，我想我会添加几件事。

*   [我已经设置了`root: "rows"`](https://stackoverflow.com/a/9506467/1415352)
*   [我已经设置了`jsonReader : { repeatitems: false }`](https://stackoverflow.com/a/3214240/1415352)
*   我返回到网格的 JSON 数据具有以下结构：`{"total": "1", "records": "0", "rows": [], "page": "1"}`
*   编辑：我也刚刚尝试了最新版本的 jqGrid-4.4.1。仍然得到同样的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T21:15:28.140

这很奇怪！

`jquery.jqGrid.src.js`jQuery的第 4364行在 jqGrid`4.4.0`的`jqModal`模块内，这几乎不是真正需要的。该模块通常不应在加载网格期间使用。`jqModal`在许多情况下，将参数设置为 false就无法使用它。

我想您与您使用的其他 JavaScript 插件存在一些兼容性问题。

您可以在代码开头的某处设置或设置`$.fn.jqm`在代码中。例如，您可以在加载or后直接执行此操作。结果该模块将不被使用。`undefined``null``jquery.jqGrid.src.js``jquery.jqGrid.min.js``jqModal`*

# amazon-web-services - 尝试使用 boto.manage.cmdshell SSH 到 EC2 运行实例时出错

> ID：13297397
> 
> 赞同：2
> 
> 时间：2012-11-08T20:36:51.237
> 
> 标签：amazon-web-services, python-2.7, boto

我正在尝试通过 SSH 连接到正在运行的 EC2 实例，但每次都会出现以下错误。

```
import os
import boto.manage.cmdshell

ec2 = boto.connect_ec2()
key_dir= '~/'
key_name='keypair'
key_extension='.pem'
key_path = os.path.join(os.path.expanduser(key_dir),
                    key_name+key_extension)
reservations = ec2.get_all_instances()
instance = reservations[0].instances[0]

cmd = boto.manage.cmdshell.sshclient_from_instance(instance,
                                               key_path,
                                               host_key_file='~/.ssh/known_hosts',
                                               user_name='ec2-user')

cmd.shell() 
```

> 回溯（最后一次调用）：文件“/home/.../FirstModule.py”，第 26 行，在 cmd.shell() 文件“/usr/lib/python2.7/dist-packages/boto/manage/ cmdshell.py”，第 114 行，在 shell interactive_shell(channel) 文件中“/usr/lib/python2.7/dist-packages/boto/mashups/interactive.py”，第 34 行，在 interactive_shell posix_shell(chan) 文件中“/ usr/lib/python2.7/dist-packages/boto/mashups/interactive.py”，第 42 行，在 posix_shell oldtty = termios.tcgetattr(sys.stdin) termios.error: (22, 'Invalid argument')

任何线索为什么会出现这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T17:28:32.727

一种可能性是主机文件的路径名不是原始字符串。这样做可能会有所帮助：

```
cmd = boto.manage.cmdshell.sshclient_from_instance(
          instance,
          key_path,
          host_key_file=r'~/.ssh/known_hosts',
          user_name='ec2-user'
       ) 
```

您可能还想引用该`key_dir`值。

```
key_dir = r'~/' 
```

# python - 尝试在 mac os x 10.6 上使用 opencv 和 python

> ID：13297401
> 
> 赞同：0
> 
> 时间：2012-11-08T20:37:16.950
> 
> 标签：python, opencv, python-2.7

我是 python 新手，我正在尝试使用 openCV 库。经过大量阅读和反复试验，我决定在这里提问。

我用macports安装了openCV，但我仍然遇到同样的错误（就像我在openCV pkg中使用setup.py文件安装时一样）。我的脚本是我从[http://www.neuroforge.co.uk/index.php/getting-started-with-python-a-opencv](http://www.neuroforge.co.uk/index.php/getting-started-with-python-a-opencv)编写（复制）的“Hello world”脚本 ，而“import cv”不是在职的。是因为路径吗？我尝试添加：

```
import sys 
sys.path.append('/opt/local/include/opencv') 
```

但没有变化...

谢谢， 约拿单

完整的脚本是：

```
import cv

cv.NamedWindow('a_window', cv.CV_WINDOW_AUTOSIZE)
image = cv.LoadImage('picture.png', cv.LOAD_IMAGE_COLOR)

font = cv.InitFont(cv.CV_FONT_HERSHEY_SIMPLEX, 1, 1, 0, 3, 8) 

x = 200
y = 200

cv.PutText(frame,"Hello World!!!", (x,y),font, 255) 

cv.ShowImage('a_window', image)

cv.Waitkey(10000)
cv.SaveImage('image.png', image) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T05:15:31.023

我也很难让 Python OpenCV 绑定与 MacPorts OpenCV 安装一起工作。

但是，我使用 Homebrew 在 Mac 上安装了 OpenCV，并且可以`import cv`使用`import cv2`Python。

我[安装了 Homebrew](https://github.com/mxcl/homebrew/wiki/Installation)，然后安装了`brew install opencv`，然后一切正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-04T17:16:04.587

如果通过 MacPorts 安装，请确保在安装时添加 python 变体。

```
sudo port install opencv +python27 
```

然后确保您运行的是 MacPorts 版本的 python（通常是 /opt/local/bin/python2.7），而不是默认的 OSX 版本。

# asp.net-mvc-4 - 如何解决 Antlr3 依赖地狱

> ID：13297402
> 
> 赞同：18
> 
> 时间：2012-11-08T20:37:17.243
> 
> 标签：asp.net-mvc-4, bundle, antlr3, asp.net-optimization, bundling-and-minification

我有一个带有 MEF 和 RavenBD 的 asp.net MVC 4 项目。

项目加载时会引发此异常：无法加载文件或程序集 Antlr3.Runtime.dll

我发现 RavenDB 和 WebGrease（随 MVC 4 一起安装）都使用 Antlr3。但是 WebGrease 带有自己的 Antlr3 dll，由微软签名 - PublicKeyToken 31bf3856ad364e35

Antlr3 默认的 PublicKeyToken 是 eb42632606e9261f。

RavenDB 和 WebGrease 使用相同版本的 Antlr3 3.3.1.7705

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-15T23:30:40.703

不幸的是，我没有找到解决具有不同签名的相同版本的冲突依赖项的解决方案。

但好消息是，WebGrease 的贡献者之一，Howard Dierking，已经通过电子邮件回答了我的担忧。这是他的回应：

> 嗨马克西姆——很抱歉你遇到了这个。我正在努力做几件事来快速解决这个问题：
> 
> 1) 使用最新的 antlr 版本准备 antlr 包的更新——将测试并推送到 nuget.org
> 
> 2) 与 WebGrease 团队合作更改他们的 NuGet 包，使其不发送 antlr.dll 而是接受包依赖项——在与他们交谈时，他们不知道存在包。
> 
> 这应该可以解决您遇到的 dll 地狱问题。希望假期不会超过几周。
> 
> 谢谢，
> 
> _霍华德

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-22T10:26:41.130

我遇到了同样的问题，并通过从我的计算机中删除所有项目、从服务器获取最新版本并在项目加载后重建所有 nuget 依赖项来解决它。你可以试试这个，它对我有用。

似乎某些 nuget 依赖项在卸载后会留下一些垃圾，这是对所有解决方案进行干净重建的唯一方法

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-09-28T18:11:14.757

我尝试了其他答案。我还尝试了多种恢复、升级、降级、重新安装 WebGrease 和 Antlr 软件包的组合。在运行时，我仍然收到与 LoaderExceptions 一起引发的 ReflectionTypeLoadException，它显示已被替换的旧 Antlr 的版本号 (3.4.1.9004)。

我还尝试了以下方法，这花了我几天时间进行测试，但都没有解决问题：

*   清除临时文件。
*   重新加载 Visual Studio 和解决方案。
*   重新启动我的开发计算机。
*   删除参考上的“特定版本”标志。

最终奏效的是在 web.config 文件中添加绑定重定向。由于 NuGet 也没有更新旧版本的 WebGrease，因此我将它们都替换为：

```
</runtime>
    </assemblyBinding>
        <dependentAssembly>
            <assemblyIdentity name="WebGrease" publicKeyToken="31bf3856ad364e35" culture="neutral" />
            <bindingRedirect oldVersion="0.0.0.0-1.6.5135.21930" newVersion="1.6.5135.21930" />
        </dependentAssembly>
        <dependentAssembly>
            <assemblyIdentity name="Antlr3.Runtime" publicKeyToken="eb42632606e9261f" culture="neutral" />
            <bindingRedirect oldVersion="0.0.0.0-3.5.0.2" newVersion="3.5.0.2" />
        </dependentAssembly>
    </assemblyBinding>
</runtime> 
```

重新编译和部署我的应用程序后，它摆脱了抱怨。

# python - 在 os.listdir(path) 中使用文件扩展名通配符

> ID：13297406
> 
> 赞同：54
> 
> 时间：2012-11-08T20:37:30.723
> 
> 标签：python

我有一个试图使用 Python 解析的文件目录。如果它们都是相同的扩展名，我不会有问题，但无论出于何种原因，它们都是在原始扩展名之后使用顺序数字扩展名创建的。例如：`foo.log foo.log.1 foo.log.2 bar.log bar.log.1 bar.log.2 etc.`最重要的是，foo.log 是 XML 格式，而 bar.log 不是。为了只读取和解析`foo.log.*` *and* `foo.log`文件，最好的方法是什么？这些`bar.log`文件不需要读取。下面是我的代码：

```
import os
from lxml import etree
path = 'C:/foo/bar//'
listing = os.listdir(path)
for files in listing:
    if files.endswith('.log'):
        print files
        data = open(os.path.join(path, files), 'rb').read()
        tree = etree.fromstring(data)
        search = tree.findall('.//QueueEntry') 
```

这不起作用，因为它不读取任何`.log.*`文件，并且解析器阻塞了已读取但不是 xml 格式的文件。谢谢！

* * *

## 回答 #1

> 赞同：113
> 
> 时间：2012-11-08T20:49:46.337

也许[glob](http://docs.python.org/2/library/glob.html)模块可以帮助你：

```
import glob

listing = glob.glob('C:/foo/bar/foo.log*')
for filename in listing:
    # do stuff 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-11-08T23:52:33.937

> 为了只读取和解析`foo.log.*`and`foo.log`文件，最好的方法是什么？bar.log 文件不需要读取。

您的代码执行此操作：

```
if files.endswith('.log'): 
```

您刚刚将您的英文描述翻译成 Python 有点错误。你用 Python 写的是：“只读取和解析`*.log`文件”，意思`bar.log`是包含，`foo.log.1`不包含。

但如果你想一想，你可以将你的英文描述直接翻译成 Python：

```
if files == 'foo.log' or files.startswith('foo.log.'): 
```

如果您考虑一下，只要没有`foo.log.`您想要跳过的名为（带有那个额外点）的文件，您就可以将这两种情况合并为一种：

```
if files.startswith('foo.log'): 
```

但是，如果您对 POSIX shell 有所了解，则`foo.log*`匹配完全相同的东西。（这对于 Windows shell 来说不是这样，通配符专门处理扩展名，这就是为什么你必须键入`*.*`而不是`*`.）并且 Python 带有一个模块，即使在 Windows 上也可以执行 POSIX 样式的通配符，称为`glob`. 有关如何使用它的信息，请参阅 stranac 的答案。

我认为`glob`答案比手动过滤要好`listdir`。它更简单，它更直接地匹配您的问题标题所说的您想要做的事情（只需完全按照您希望使用的方式进行操作`os.listdir`，但`glob.glob`改为使用），并且更灵活。因此，除非您担心通配符的两种略有不同的含义会混淆，否则我建议您接受它而不是这个。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-11-08T20:50:23.703

这将为您提供类似 bash 的正则表达式：

```
import glob
print(glob.glob("/tmp/o*")) 
```

或者，您可以 os.listdir 整个目录，并通过 re 模块丢弃与正则表达式不匹配的文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-06T10:43:13.063

正如一些已经提到的：您可以使用 glob.glob 使用通配符查找文件。我不能写评论，这是一个非常古老的问题，但是......有人建议，glob.glob 不能在路径中扩展〜。因此，您可以使用 os.path.expanduser 来扩展环境变量。

# java - 转换为 Long 时字符串 13363190467160024386 的数字格式异常

> ID：13297413
> 
> 赞同：1
> 
> 时间：2012-11-08T20:37:54.480
> 
> 标签：java, numberformatexception

我正在尝试将 a 转换`numeric String`为`Long`，但它给了我`NumberFormatException`.

我得到`NumberFormatException`这个字符串`13363190467160024386`

Long.parseLong(String s)

以下是我得到的例外 -

```
java.lang.NumberFormatException: For input string: "13363190467160024386" 
```

有什么建议为什么会发生？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-08T20:39:24.357

绝对 - 该数字大于[`Long.MAX_VALUE`](http://docs.oracle.com/javase/7/docs/api/java/lang/Long.html#MAX_VALUE)（9223372036854775807）。

改用[`BigInteger`](http://docs.oracle.com/javase/7/docs/api/java/math/BigInteger.html)：

```
BigInteger value = new BigInteger("13363190467160024386"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T20:40:08.210

因为它超出了范围`Long`。

```
System.out.println(Long.MAX_VALUE);
System.out.println("13363190467160024386"); 
```

印刷： -

```
9223372036854775807
13363190467160024386 
```

您应该使用[`BigInteger`](http://docs.oracle.com/javase/7/docs/api/java/math/BigInteger.html)来存储大于此的数字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T20:39:46.353

我认为这个数字对于签名来说太大了`long`

~~也许尝试一个未签名`long`~~的没关系，显然java没有。c# > java 的另一个原因

2^64 = 1.8446744e+19

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-08T20:40:25.587

最大长是：

```
9223372036854775807 
```

你的号码比这个大：

```
13363190467160024386 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-08T20:40:58.523

您的数量超过了 的限制`long`，即`2^63`，或大致`9E18`。你的号码大概是`1.3E14`，触发错误。

# ruby-on-rails - 在 Heroku 上部署 Activeadmin 时出现“未初始化的常量 AdminUser”

> ID：13297415
> 
> 赞同：2
> 
> 时间：2012-11-08T20:37:58.000
> 
> 标签：ruby-on-rails, ruby, heroku, activeadmin

我还是 Ruby 的新手，我一直在尝试使用 ActiveAdmin 将我的应用程序部署到 heroku。

将我的代码推送到heroku后，我尝试运行

```
heroku rake db:migrate 
```

我收到以下错误

```
rake aborted!
uninitialized constant AdminUser 
```

那是我的宝石文件

```
source 'https://rubygems.org'

gem 'rails', '3.2.8'
gem 'json'

group :assets do
  gem 'coffee-rails', '3.2.2'
  gem 'uglifier', '1.2.3'
end

gem 'jquery-rails', '2.0.2'

gem 'pg', '0.14.1'

gem 'sass-rails'
gem "activeadmin"
gem "meta_search", '>= 1.1.0.pre' 
```

我真的很感激任何帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T20:54:04.233

看看这里，Rails 3.2 和 ActiveAdmin 中可能存在错误：[https ://github.com/gregbell/active_admin/issues/891](https://github.com/gregbell/active_admin/issues/891)

# json - 使用@GET 在文件系统上处理 JSON 文件？

> ID：13297418
> 
> 赞同：1
> 
> 时间：2012-11-08T20:38:14.497
> 
> 标签：json, file-io, jersey

我正在使用 Jersey & Jackson 来处理带有 JSON 的基于 Restful 的 Web 服务。

假设我有驻留在文件系统上的 json 文本文件（例如 customer.json）...

是否可以从实现 @GET 的 Restful 方法处理该 json 文件？

我需要在@GET 方法中使用Java 的文件I/O 上传文件吗？

任何帮助将不胜感激...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T21:01:35.147

如果 JSON 文件很小，可以，您可以在 URL 的末尾对其进行编码。

```
GET www.mydomain.tld/process/json/?string={ json: "testest" } 
```

但实际上，没有。作为一种解决方法，您可以发送对该文件的引用，例如它所在的 url 或您之前将其发布到服务器的临时 GUID。

```
GET www.mydomain.tld/process/json/?file=http://www.otherdomain.tld/file.json 
```

或者，第一次 POST 到具有整个文件内容的另一个控制器将返回一个 guid，服务器可以在随后的 GET 请求中使用该 guid 从本地存储或数据库获取上传的文件。

```
guid <-- POST www.mydomain.tld/upload/json/ {BIG JSON FILE}
GET www.mydomain.tld/process/json/?guid={guid} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T21:41:51.583

不建议使用 GET，因为它被认为是一种“安全”的方法。见[https://www.rfc-editor.org/rfc/rfc2616#page-51](https://www.rfc-editor.org/rfc/rfc2616#page-51)。您应该根据上传的最终结果使用 POST 或 PUT：PUT 以防后续上传不会更改服务器的状态，否则使用 POST。

Jersey 对上传有很好的支持。这是一个如何实现上传的好例子：[http](http://www.mkyong.com/webservices/jax-rs/file-upload-example-in-jersey/) ://www.mkyong.com/webservices/jax-rs/file-upload-example-in-jersey/ 。

如果您不想像示例中那样将文件保存到磁盘，则可以使用 ByteArrayOutputStream 将文件存储在内存中。然后从中创建一个字符串：

```
String str = new String(byteArrayOutputStream.toByteArray(), "UTF-8"); 
```

然后创建您的 JSONObject：

```
JSONObject json = new JSONObhect(str); 
```

# javascript - 调用父类的方法？

> ID：13297428
> 
> 赞同：1
> 
> 时间：2012-11-08T20:39:15.730
> 
> 标签：javascript

调用父方法。如何实现？

```
 function Ch() {
        this.year = function (n) {
            return n
        }
    }

    function Pant() {
        this.name = 'Kelli';
        this.year = function (n) {
            return 5 + n
        }
    } 
```

//扩展

```
 Pant.prototype = new Ch();
    Pant.prototype.constructor = Pant;
    pant = new Pant();
    alert(pant.name); //Kelli
    alert(pant.year(5)) //10 
```

如何调用所有父方法

```
this.year = function (n) {
            return 5 + n
        } 
```

在对象？谢谢大家的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T20:50:30.970

您可以调用重写的超类（父）方法，`__proto__`但 IE 不支持

```
alert(pant.__proto__.year(5)) //5 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T20:53:36.730

下面是[Google 的 Closure 库](https://closure-library.googlecode.com/svn/docs/namespace_goog.html)是如何实现继承的：

```
goog.inherits = function(childCtor, parentCtor) {
  function tempCtor() {};
  tempCtor.prototype = parentCtor.prototype;
  childCtor.superClass_ = parentCtor.prototype;
  childCtor.prototype = new tempCtor();
  childCtor.prototype.constructor = childCtor;
}; 
```

然后您的代码将变为：

```
function Ch() {}
Ch.prototype.year = 
function (n) {
   return n
}

function Pant() {}
goog.inherits(Pant,Ch);
Pant.prototype.name = 'Kelli';
Pant.prototype.year = function (n) {
   return 5 + Pant.superClass_.year.call(this, n);//Call the parent class
}

pant = new Pant();
alert(pant.name); //Kelli
alert(pant.year(5)) //10 
```

如果您愿意，您当然可以重命名该`goog.inherits`函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T20:58:34.830

[将此答案](https://stackoverflow.com/a/13167717/1048572)改编为您的代码：

```
function Ch() {
    this.year = function(n) {
        return n;
    }
}

function Pant() {
    Ch.call(this); // make this Pant also a Ch instance
    this.name = 'Kelli';
    var oldyear = this.year;
    this.year = function (n) {
        return 5 + oldyear(n);
    };
}
// Let Pant inherit from Ch
Pant.prototype = Object.create(Ch.prototype, {constructor:{value:Pant}});

var pant = new Pant();
alert(pant.name); // Kelli
alert(pant.year(5)) // 10 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-08T21:12:16.723

首先，假设`Ch`是“孩子”，而`Pant`“父母”是倒着做的，这非常令人困惑。当你说

```
Pant.prototype = new Ch(); 
```

您正在`Pant`继承自`Ch`. 我假设这就是您的意思，并且您想调用返回的方法`n`，而不是返回的方法`n + 5`。所以你可以这样做：

```
function Ch() {
    this.year = function (n) {
        return n;
    }
}

function Pant() {
    this.name = 'Kelli';
    this.year = function (n) {
        return 5 + n;
    }
}

Pant.prototype = new Ch();
Pant.prototype.constructor = Pant;
pant = new Pant();
alert(pant.name); //Kelli
alert(pant.year(5)) //10

// Is the below what you need?
alert(Pant.prototype.year(5)); // 5 
```

[http://jsfiddle.net/JNn5K/](http://jsfiddle.net/JNn5K/)

# python - 无法使用谷歌阅读器 python api 获取所有项目

> ID：13297430
> 
> 赞同：2
> 
> 时间：2012-11-08T20:39:17.310
> 
> 标签：python, rss, google-reader

我打算使用 google reader api 从博客和其他网站检索所有帖子。但是我在发布所有帖子时遇到了一些麻烦。我已经使用了延续字符串。从网站上，我可以看到有 5000 多个帖子，但我的代码只能检索 1000 个帖子。谁能帮我找出原因？谢谢。

我的代码如下：

```
class greader(GoogleReader):

    def __init__(self):
        super(greader,self).__init__()
        self.identify(*login_info)
        self.login_flag = self.login()

    def get_all_entries(self,feed=None,target="all"):

        entry_l = []
        kwargs = {'feed':feed,'order':CONST.ORDER_REVERSE,'count':800}
        if target == 'unread':
            kwargs['exclude_target'] = CONST.ATOM_STATE_READ

        xml_feed = self.get_feed(**kwargs)
        u_entries = xml_feed.get_entries()
        entry_l.append(u_entries)
        continuation = xml_feed.get_continuation()
        kwargs['continuation'] = continuation

        while continuation != None:
            #rand_int = random.randint(6,11)
            #time.sleep(rand_int)
            xml_feed = self.get_feed(**kwargs)
            u_entries = xml_feed.get_entries()
            continuation = xml_feed.get_continuation()
            kwargs['continuation'] = continuation
            entry_l.append(u_entries)

        return entry_l 
```

# java - 使用 ActiveMQ 5.6.0 进行 Java 单元测试

> ID：13297442
> 
> 赞同：3
> 
> 时间：2012-11-08T20:40:04.613
> 
> 标签：java, junit, activemq

我对正在构建的应用程序进行了一系列 JUnit 测试，但是当我针对 5.6.0 ActiveMQ 库运行它们时，它显示错误：

```
ERROR  checkSystemUsageLimits, Temporary Store limit is 50000 mb, whilst the temporary data directory: /path/to/temp/storage only has [less than 50,000] mb of usable space 
```

它不会导致单元测试出错，但我的单元测试不需要 50GB 的空间。有没有办法可以将请求大小的大小从 50GB 减少到更少？如果没有，有没有办法可以轻松抑制此错误？

编辑：我应该提到我正在使用 URL 创建到 AMQ 的连接

```
vm://localhost?broker.persistent=false 
```

所以它没有使用 activemq.xml 配置文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T21:35:33.013

您可以更改配置以在

```
<systemUsage>
    <systemUsage>
        <tempUsage>
            <tempUsage limit="100 mb"/>
        </tempUsage>
    </systemUsage>
</systemUsage> 
```

默认配置（以及指向架构等的链接）[here](http://activemq.apache.org/xml-configuration.html)

# html - HTML 没有用内容关闭标签的速记方法有充分的理由吗？

> ID：13297445
> 
> 赞同：2
> 
> 时间：2012-11-08T20:40:21.357
> 
> 标签：html, xml

我只是好奇。为什么“更高的权力”从未向 HTML 规范（或 XML 规范，就此而言）添加关闭包含内容的标签的速记方法，这是有原因的吗？

例如，假设我有以下 html 表：

```
<table>
    <tr><td>foo</td><td>bar</td><td>foo</td></tr>
    <tr><td>bar</td><td>foo</td><td>bar</td></tr>
    <tr><td>1</td><td>2</td><td>3</td></tr>
</table> 
```

为什么不能使用速记标签来关闭每个标签？

也许是这样的：

```
<table>
    <tr><td>foo</><td>bar</><td>foo</></>
    <tr><td>bar</><td>foo</><td>bar</></>
    <tr><td>1</><td>2</><td>3</></>
</> 
```

这可以节省几个字节的数据，我能看到的唯一缺点是，如果没有给出命名引用，您将无法快速判断哪个标签（或多个标签）已关闭。但是，如果您正在动态生成内容并希望在数据中保存一些字节，这可能是一个有用的选项。

我很肯定我不是第一个想到这个的人。为什么没有将此类功能添加到任何 HTML 或 XML 规范中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T23:32:59.450

历史上，有人提倡在 XML 格式中允许缩写结束标签，`</>`事实上微软在他们的第一个 XML 解析器中允许这样做：参见[http://mailman.ic.ac.uk/pipermail/xml-dev/1998-April /003204.html](http://mailman.ic.ac.uk/pipermail/xml-dev/1998-April/003204.html)

我只能推测为什么最终的规范不允许这样做（并且微软从他们的产品中删除了它）——即使对于那些密切相关的人来说，发现工作组做出特定决定的真正原因也很困难。但肯定有赞成和反对的论据；XML 小组似乎更看重冗余带来的好处，而不是简洁带来的好处。

当然，HTML 是另一回事。他们对采用哪个 SGML 子集做出了截然不同的决定。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T20:45:06.157

这是完全有效的 HTML：

```
<div>
    <p>My paragraph
</div> 
```

如果我`</div>`用您的短标签之一替换结束标签：

```
<div>
    <p>My paragraph
</> 
```

浏览器如何知道您是打算关闭`<p>`标签还是`<div>`标签？这个想法的主要问题是它引入了歧义，但显然它也降低了可读性，我相信其他人会想出其他否定！

**更新**

另请注意，由于您应该使用 gzip 压缩（通过在文本中查找重复字符来工作）来提供页面，因此您实际上可能会通过这样做*损害在线传输大小。*[在http://gzipper.com](http://gzipper.com)上的一个非常快速的测试证实了一个小文本：

```
<div><div><div><div><div></div></div></div></div></div> <!-- 45% compression -->
<div><div><div><div><div></></></></></> <!-- 25% compression --> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-08T21:20:12.040

HTML，如规范所定义的，包括 HTML 4.01，确实有用于关闭带有内容的元素的速记方法。这只是理论上的，但问题是为什么*浏览器没有实现*这些功能。[这些特性在B.3.7 Shorthand markup](http://www.w3.org/TR/REC-html40/appendix/notes.html#h-B.3.7)的 HTML 4.01 规范中被提及，它们包括 NET（= Null End Tag），例如

```
<blockquote/foobar/ 
```

这是由等价于的正式定义

```
<blockquote>foobar</blockquote> 
```

规范说：“使用它们的文档符合 SGML 文档，但不太可能与许多现有的 HTML 工具一起使用。” 这是一种轻描淡写的说法，因为*没有*浏览器按照这些规范实现 HTML，即作为 SGML 应用程序（尽管一些非常罕见的浏览器在这个方向上做了一些尝试）。该问题仍然反映在 HTML 验证中（在经典意义上，不包括 HTML5 验证，它按自己的规则运行）；请参阅[Slashed Validators](http://www.cs.tut.fi/~jkorpela/qattr.html)的传奇。

那么为什么浏览器没有在这方面实现规范呢？从某种意义上说，采用一些现有的 SGML 解析器并将其包含到浏览器中是很容易的。但解释是浏览器是以特别的方式编写的，快速、松散且务实，很少或根本不关注诸如通用标记之类的问题。HTML 规范是在第一个浏览器出现很久之后编写的，主要是对现有实践进行标准化，但也引入了一些新原则。从形式上讲，HTML 有点像 SGML 的改进，但浏览器供应商从未认真对待这一点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-08T20:50:08.077

1.  使用诸如（本身不正确，但（某些？）浏览器可以正确解释）之类的 gem是完全*允许的。*`<b>foo <i>bar</b> baz</i>`
2.  @JamesAllardice 的回答中描述的可选结束标签。
3.  使用描述性结束标签（稍微）更容易捕捉嵌套错误；请记住，您的结束标签可能距离它的开始标签有几个屏幕。
4.  在这个宽带普及的时代，“权力”更关心的是向后兼容性，而不是削减 1-2% 的 HTML 页面。
5.  “存在的权力”通常在标准制定中*以长达十年的*周期运作；那里*很难*发生*任何*事情。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-08T22:31:23.947

具有讽刺意味的是，虽然不是一般的，但您给出的表格标记的具体示例可以写得更短，有效且完全支持浏览器，只需完全删除大部分结束标记，如下所示：

```
<table><tr>
  <td>foo<td>bar<td>foo<tr>
  <td>bar<td>foo<td>bar<tr>
  <td>1<td>2<td>3</table> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-08T20:51:44.213

我想这取决于你在谈论什么标签。例如：

```
Break-Line: <br/>
Link: <link />
Input: <input />
Img: <img /> 
```

这些可以被认为是速记。

我同意你的意见。例如，当您使用另一种语言进行编程并创建代码块并且仅使用括号时，它知道哪个括号关闭代码块。

也许将来他们会做类似的事情。

# ruby-on-rails - ruby on rails 3 教程 - 集成测试失败第 9 章 - ActionController::RoutingError: No route matches [GET] "/signout"

> ID：13297450
> 
> 赞同：2
> 
> 时间：2012-11-08T20:40:29.267
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec, rails-routing

我在 Michael Hartl 的 Ruby on Rails 3 教程（本书的早期 Kindle 版本，而不是在线版本）的第 9 章结束时遇到了失败的集成测试 (users_spec.rb)。我一直在寻找一段时间，但到目前为止我发现的建议都没有对我有用。我下载了第一版和第二版教程的源代码，它们运行良好，所以看起来我的应用程序配置有问题，但作为一个rails新手，感觉就像大海捞针所以欢迎任何帮助。

错误消息： ActionController::RoutingError: No route matches [GET] "/signout"

users_spec.rb 包含这个

```
 ...
       describe "success" do
          it "should sign a user in and out" do
             user = FactoryGirl.create(:user)
             visit signin_path
             fill_in :email, :with => user.email
             fill_in :password, :with => user.password
             click_button
             controller.should be_signed_in
             click_link "Sign out"
             controller.should_not be_signed_in
          end
       end
    ... 
```

我的 application.html.erb 看起来像这样

```
 <!DOCTYPE html>
    <html>
    <head>
      <title><%= @title %></title>
      <%= javascript_include_tag 'default' %>
      <%= csrf_meta_tags %>
      <%= render 'layouts/stylesheets' %>
    </head>
    <body>
      <div class='container'>
        <%= render 'layouts/header' %>
        <section class = "round">
          <% flash.each do |key, value| %>
            <div class="flash <%= key %>"><%= value %></div>
          <% end %>
          <%= yield %>
        </section>
        <%= render 'layouts/footer' %>
        <%= debug(params) if Rails.env.development? %>
      </div>
    </body>
    </html> 
```

我的 application_controller.rb 看起来像这样

```
 class ApplicationController < ActionController::Base
      protect_from_forgery
      include SessionsHelper
    end 
```

我的 application.js 看起来像这样

```
 // This is a manifest file that'll be compiled into application.js, which will include all the files
    // listed below.
    //
    // Any JavaScript/Coffee file within this directory, lib/assets/javascripts, vendor/assets/javascripts,
    // or vendor/assets/javascripts of plugins, if any, can be referenced here using a relative path.
    //
    // It's not advisable to add code directly here, but if you do, it'll appear at the bottom of the
    // the compiled file.
    //
    // WARNING: THE FIRST BLANK LINE MARKS THE END OF WHAT'S TO BE PROCESSED, ANY BLANK LINE SHOULD
    // GO AFTER THE REQUIRES BELOW.
    //
    //= require jquery
    //= require jquery_ujs
    //= require_tree . 
```

_header.html.erb 文件包含这个

```
 ...
      <% if signed_in? %>
      <li><%= link_to "Sign out", signout_path, :method => :delete %></li>
      <% else %>
    ... 
```

我的 routes.rb 包含这个

```
 ...
      get "sessions/new"

      resources :users
      resources :sessions, :only =>[:new, :create, :destroy]

      match '/contact', :to => 'pages#contact'
      match '/about', :to => 'pages#about'
      match '/help', :to => 'pages#help'
      match '/signup', to: 'users#new'

      match '/signin', to: 'sessions#new'
      match '/signout', to: 'sessions#destroy', via: :delete

      root :to => 'pages#home'
    ... 
```

我的 session_controller.rb 包含这个

```
 ...
      def destroy
        sign_out
        redirect_to root_path
      end
    ... 
```

session_helper.rb 包含这个

```
 ...
      def sign_out
        cookies.delete(:remember_token)
        @current_user = nil
      end
    ... 
```

这是我执行 rake 路由时得到的

```
 sessions_new GET    /sessions/new(.:format)   sessions#new
           users GET    /users(.:format)          users#index
                 POST   /users(.:format)          users#create
        new_user GET    /users/new(.:format)      users#new
       edit_user GET    /users/:id/edit(.:format) users#edit
            user GET    /users/:id(.:format)      users#show
                 PUT    /users/:id(.:format)      users#update
                 DELETE /users/:id(.:format)      users#destroy
        sessions POST   /sessions(.:format)       sessions#create
     new_session GET    /sessions/new(.:format)   sessions#new
         session DELETE /sessions/:id(.:format)   sessions#destroy
         contact        /contact(.:format)        pages#contact
           about        /about(.:format)          pages#about
            help        /help(.:format)           pages#help
          signup        /signup(.:format)         users#new
          signin        /signin(.:format)         sessions#new
         signout DELETE /signout(.:format)        sessions#destroy 
```

我的 gemfile 看起来像这样

```
 source 'https://rubygems.org'

    gem 'rails', '3.2.8'

    gem 'pg'
    gem 'gravatar_image_tag'
    gem 'jquery-rails'

    group :development do
      gem 'rspec-rails'
      gem 'annotate'
    end

    group :test do
      gem 'rspec'
      gem 'webrat'
      gem 'spork'
      gem 'factory_girl_rails'
    end 
```

运行 bundler install 时，我将其作为输出：

```
 Using rake (0.9.2.2)
    Using i18n (0.6.1)
    Using multi_json (1.3.6)
    Using activesupport (3.2.8)
    Using builder (3.0.4)
    Using activemodel (3.2.8)
    Using erubis (2.7.0)
    Using journey (1.0.4)
    Using rack (1.4.1)
    Using rack-cache (1.2)
    Using rack-test (0.6.2)
    Using hike (1.2.1)
    Using tilt (1.3.3)
    Using sprockets (2.1.3)
    Using actionpack (3.2.8)
    Using mime-types (1.19)
    Using polyglot (0.3.3)
    Using treetop (1.4.11)
    Using mail (2.4.4)
    Using actionmailer (3.2.8)
    Using arel (3.0.2)
    Using tzinfo (0.3.33)
    Using activerecord (3.2.8)
    Using activeresource (3.2.8)
    Using annotate (2.5.0)
    Using diff-lcs (1.1.3)
    Using factory_girl (4.1.0)
    Using rack-ssl (1.3.2)
    Using json (1.7.5)
    Using rdoc (3.12)
    Using thor (0.16.0)
    Using railties (3.2.8)
    Using factory_girl_rails (4.1.0)
    Using gravatar_image_tag (1.1.3)
    Using jquery-rails (2.1.3)
    Using nokogiri (1.5.5)
    Using pg (0.14.1)
    Using bundler (1.2.0)
    Using rails (3.2.8)
    Using rspec-core (2.11.1)
    Using rspec-expectations (2.11.3)
    Using rspec-mocks (2.11.3)
    Using rspec (2.11.0)
    Using rspec-rails (2.11.4)
    Using spork (0.9.2)
    Using webrat (0.7.3) 
```

可能有趣的是，当通过 rails 运行我的应用程序时，它也失败了，所以这不仅仅是 webrat 或失败的集成问题。在 firbug 中查看 html 源代码时，它表明我希望显示的 javascript 不存在

```
 <script type="text/javascript" src="/assets/jquery.js?body=1">
    <script type="text/javascript" src="/assets/jquery_ujs.js?body=1"> 
```

![签到状态](../Images/86c5bd107f84faf65a7363c5051294f5.png)

单击“退出”时，这是结果 ![退出失败](../Images/3730367216f8065a7c9a62e360b757a9.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T21:37:16.397

**执行摘要**

您使用的是[webrat](https://github.com/brynary/webrat)而不是[capybara](https://github.com/jnicklas/capybara)，这可以解释为什么我在下面描述的问题出现了。改变：

```
gem 'webrat' 
```

至

```
gem 'capybara' 
```

在您的 Gemfile 中，删除请求的 javascript 点击处理程序应该可以正常工作。

有关所涉及问题的更深入讨论，请参阅下面的原始答案。

**原始答案**

这是一个棘手的问题。在我看来，问题在于您的测试没有打开 javascript。

一些背景知识：Rails 使用一个名为[jquery-ujs](https://github.com/rails/jquery-ujs)的脚本适配器来执行各种操作，例如强制确认对话框（“您确定吗？”当您尝试删除记录时收到的消息）并从超链接发出非 GET 请求（所以您可以单击“删除”链接，您的浏览器将发送删除请求）。

在您的 routes.rb 中，您有：

```
signout DELETE /signout(.:format)        sessions#destroy 
```

这就是说：当一个 DELETE 请求到达 URL`/signout`时，将用户注销。但是，默认情况下，当您单击页面上指向 URL 的链接时`/signout`，您的浏览器将发送 GET 请求，而不是 DELETE 请求。

当您`method: destroy`在对此处的调用中包含该选项时`link_to`：

```
link_to "Sign out", signout_path, :method => :delete 
```

它的作用是告诉 Rails 为`data-method="delete"`视图中链接的属性添加一个属性（检查实际呈现的 HTML 以确保这是真的）。这个属性就像一个标志：它告诉 jquery-ujs 添加一个单击处理程序，它将对该元素的任何单击从 GET 转换为 DELETE。有关更多详细信息，请参阅[这篇文章](http://railsdog.com/blog/2011/02/28/callbacks-in-jquery-ujs-in-rails3/)。另请注意，Hartl 在[脚注](http://ruby.railstutorial.org/chapters/sign-in-sign-out#fn-8_8)中提到了这一点。

但是如果在这种情况下没有启用 javascript 会发生什么？好吧，没有添加最后一次点击处理程序，并且您的浏览器将该链接视为`/signout`页面上的任何其他链接，因此当您单击它时，您会向该 URL 发送 GET 请求。但是 Rails 没有任何 GET 请求的路径`/signout`，因此它会吐出错误：

```
ActionController::RoutingError: No route matches [GET] “/signout” 
```

这就是这里出现问题的原因。

现在对于解决方案，我相信您应该能够在测试`js: true`中添加一个启用 javascript 的选项，如下所示：

```
it "should sign a user in and out", js: true do
  ...
end 
```

如果您使用的是 Selenium，默认的 javascript 驱动程序，这实际上会打开一个浏览器窗口——要在没有窗口的情况下运行 js 测试，请将 capybara [-webkit](https://github.com/thoughtbot/capybara-webkit) gem 添加到您的 Gemfile 并使用`Capybara.javascript_driver = :webkit`. 有关在 Rspec 请求规范中使用 javascript 的详细信息，请参阅[此 Railscast中有关测试 javascript 的部分。](http://railscasts.com/episodes/257-request-specs-and-capybara?view=asciicast)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T03:09:11.450

我刚刚注意到您正在使用 webrat：

```
 group :test do
      gem 'rspec'
      gem 'webrat'
      gem 'spork'
      gem 'factory_girl_rails'
    end 
```

仍然使用 webrat 的该教程的最后一个版本是 3.0，您引用的测试版本来自[这里](http://ruby.railstutorial.org/chapters/sign-in-sign-out?version=3.0)，这意味着您正在尝试遵循较旧的 3.0 教程，而不使用经过测试可以使用的[Gemfile](http://ruby.railstutorial.org/chapters/static-pages?version=3.0#code%3agemfile_rspec)。

虽然capybara 在处理方面*可能*存在[问题](https://groups.google.com/forum/#!msg/ruby-capybara/zKE-Vqr-uVA/7w-viqEUAm4J)`data-method: :delete`，因为行为将在下一个主要版本中更改，但这不是您面临的问题。

# c - 从 x64 进程向 x86 进程注入 x86 代码

> ID：13297452
> 
> 赞同：4
> 
> 时间：2012-11-08T20:40:55.163
> 
> 标签：c, winapi, assembly, x86, x86-64

我意识到标题有点令人费解，所以让我解释一下我要做什么：

我刚刚完成了一个简单的 DLL 注入器，用于我正在尝试编写的概念证明。该程序拍摄当前进程的快照，枚举进程树，并将 DLL 注入其直接父进程。现在，在理想条件下，它可以正常工作：32 位版本的注入器可以注入到 32 位父进程中，而 64 位版本的注入器可以注入到 64 位父进程中。

不过，我现在想做的是从 x64 注入器将 32 位 DLL 注入 32 位父进程。注入该 DLL 后，我希望然后注入对注入的 DLL 导出的函数之一的调用。不过，我不确定这是否真的可行。（我已经整理了一些代码来识别父进程是 32 位进程还是 64 位进程，所以这不是问题）

现在，我已经找到了一些似乎通过[将预编译的机器代码注入到进程中](https://github.com/adoxa/ansicon/blob/master/ansicon.c)来完成第一部分的代码。（至少，我认为这就是它正在做的事情）通常，在注入对 LoadLibraryW 的调用之后，我会得到该调用返回的地址，将相对偏移量添加到我想要调用的导出函数，然后注入一个调用功能。但是在这种情况下，我无法将 32 位库加载到我的 64 位注入器中，因此我无法像往常一样使用[GetProcAddress找到函数的相对偏移量。](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683212%28v=vs.85%29.aspx)我通过执行以下操作解决了这个问题：

由于我无法使用常规方法找到 32 位 DLL 的函数偏移量，因此我目前正在将文件读入缓冲区，使用该缓冲区填充[IMAGE_NT_HEADERS32](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680336%28v=vs.85%29.aspx)结构，并枚举 IMAGE_EXPORT_DIRECTORY 以查找名称和相对偏移量所有导出的函数。

所以在这一点上，我有以下内容：

*   加载到 32 位进程中的 32 位 DLL
*   在 32 位进程中运行以下代码时等效于 funcAddr 的值：

代码：

```
HMODULE hInjectedDLL = LoadLibrary("mydll.dll");
DWORD funcAddr = (DWORD)GetProcAddress(hInjectedDLL, "ExportedFunc") - (DWORD)hInjectedDLL; 
```

从理论上讲，我现在只需要 hInjectedDLL 的值，我应该能够调用该函数。不幸的是，尽管如此，我对汇编或机器代码的了解还不够，不知道如何获得该值。

有任何想法吗？

（另外，我知道我可以通过编译两个版本的注入器来为自己节省很多麻烦，并且当父进程的处理器架构不匹配时让一个运行另一个版本。我试图避免去不过这条路线。）

**编辑**：认为这可能有助于解释我在这个概念证明中实际想要完成的事情。

我正在尝试一个想法，我必须允许在当前控制台中执行子进程，而无需原始进程等待子进程完成。由于在控制台应用程序中没有用于执行此操作的内置 API，因此您通常会遇到一棵进程树，所有进程都在等待各自的子进程完成。为了促进此功能，我想执行以下操作：

### 注射

DLL 注入器将扮演“执行进程”的角色。（通常必须等到子进程完成的进程）运行时，它确定其父进程的平台，以及父进程是否甚至是基于控制台的应用程序。如果不是，该进程只需使用[exec 系列函数](http://msdn.microsoft.com/en-us/library/431x4c1w%28v=vs.71%29.aspx)来运行所需的子进程，然后立即退出。如果父进程是控制台应用程序，则注入器确定要使用哪个DLL，挂起最初创建注入器进程的线程，然后将DLL注入父进程。

### 解决我们的功能

一旦 DLL 就位，注入器将确定 DLL 导出的函数的地址。（通常，我会通过调用[CreateRemoteThread](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682437%28v=vs.85%29.aspx)来进行初始注入，然后在该线程上使用[GetExitCodeThread](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683190%28v=vs.85%29.aspx)来获取父进程中 DLL 的基地址。一旦有了它，就可以通过简单的算法找到我们导出的函数，然后我可以使用它来注入对该函数的第二次调用。

### 调用我们的函数

导出的函数将类似于以下内容：

BOOL RewriteHProcess（句柄 hProcess）

注入器将再次使用 CreateRemoteThread 从父进程的上下文中调用此函数，其中 hProcess 是注入器进程的句柄。在 DLL 方面，该函数将做两件事之一（我不太确定我的第一个想法是否可行，考虑到跨线程内存访问的安全限制，所以我把第二个想法放在一起，如果首先不成功。）

1.  RewriteHProcess 将打开先前挂起的线程进行读写，并使用[ReadProcessMemory](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680553%28v=vs.85%29.aspx)，它将在进程的内存中搜索我们的注入器进程的 HANDLE。（我们假设父进程当前正在使用[WaitForSingleObject阻止进一步执行](http://msdn.microsoft.com/en-us/library/windows/desktop/ms687032%28v=vs.85%29.aspx)功能。我知道命令提示符至少可以做到，这是我目前的重点）DLL 然后调用一个内部函数来创建我们想要的子进程，关闭旧句柄，并用我们的新句柄覆盖内存子进程。在这一点上，它会清理它可以清理的东西，然后返回。然后注入器将执行它需要的任何剩余清理，恢复挂起的线程，关闭进程和线程的句柄，然后退出，让父进程在等待新的子进程结束时继续阻塞。

2.  如果这条路线不可行，我的后备方案是暂停注入器的阻塞线程，在注入的 DLL 中创建新的子进程，清理并退出注入器，然后在 DLL 中等待，直到子进程完成。此时，DLL 将清理、恢复挂起的线程并自行卸载。（不过，这条路线的缺点是父进程从注入器返回的返回码可能与我们的目标子进程的返回码不同）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T00:41:21.053

用于`VirtualAllocEx()`在目标进程内分配一块可执行内存，然后根据`WriteProcessMemory()`需要将 x86 或 x64 机器指令写入该内存块。让这些指令根据需要调用导出`LoadLibrary()`的`GetProcAddress()`DLL 函数。然后用于`CreateRemoteThread()`执行内存块。如果您的注入器在单独的进程中运行，则无法直接调用导出的 DLL 函数。导出的函数必须在目标进程的上下文中加载和调用。并且不要从 的返回值中减去 的返回`LoadLibrary()`值`GetProcAddress()`。 `GetProcAddress()`返回指向函数的直接内存指针，因此可以直接调用它。

**更新：**这种方法的一个变体是将所有注入的代码放在 DLL 的入口点内（或让入口点产生一个线程来运行代码），当它被调用时，`DLL_ATTACH_PROCESS`原因是。因此无需从 DLL 中导出任何函数。然后就可以使用`VirtualAllocEx()`and`WriteProcessMemory()`把DLL的路径存入目标进程，然后直接使用`CreateRemoteThread()`调用`LoadLibrary()`。内核函数在进程之间始终具有相同的内存地址，因此您的注入进程可以`GetProcAddress()`在自己的地址空间内调用以获取地址，`LoadLibrary()`然后将该指针传递给`lpStartAddress`参数`CreateRemoteThread()`。这样，您就不必担心编写任何 x86/x64 汇编代码。

[此技术在本文的第 3 节](http://www.codeproject.com/Articles/4610/Three-Ways-to-Inject-Your-Code-into-Another-Proces#section_3)中有更详细的描述：

[将代码注入另一个进程的三种方法](http://www.codeproject.com/Articles/4610/Three-Ways-to-Inject-Your-Code-into-Another-Proces)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-22T02:51:34.080

如果有人发现这个问题并且在阅读评论后仍然感到困惑，你可以在[这里找到一个（](https://github.com/juntalis/project52a)*公认丑陋*的）概念证明。假设您已经知道 DLL 注入的常规策略，这里解释了您需要做的不同的事情。（*带有相关代码*）：

 ** * *

**定位我们的出口**( [injdll32_64.c](https://github.com/juntalis/project52a/blob/master/injector/src/injdll32_64.c) )

通常我们可以选择这`LoadLibrary/GetProcAddress`条路线，但由于这两个模块针对不同的处理器，我们需要以不同的方式做事。正如[Remy Lebeau 在他的回答中建议的那样](/questions/13297452/x86-code-injection-into-an-x86-process-from-a-x64-process#answer-13300436)，我们可以完全在装配方面做到这一点。然而，从我的角度来看，编写程序集来定位 的基地址`kernel32.dll`，找到导出表，然后定位`LoadLibrary`，`GetProcAddress`这似乎是一件令人头疼的事情。相反，我在 C 端通过读取每个 DLL、搜索`IMAGE_EXPORT_DIRECTORY`必要的导出并存储它们的 RVA 以供以后使用来处理它。

* * *

**通过 RVA 调用我们的导出**（[injdll32.c](https://github.com/juntalis/project52a/blob/master/injector/src/injdll32.c)，[x86.final.asm](https://github.com/juntalis/project52a/blob/master/injector/asm/x86.final.asm)）

出于我的目的，我需要让注入的 DLL 在目标应用程序的主线程中执行。为此，我暂停了目标应用程序的主线程，为我的预组装机器代码分配内存，使用适当的导出 RVA 填充占位符，通过调用更改目标应用程序的 EIP `GetThreadContext/SetThreadContext`，并恢复暂停的线程. *（不一定按这个顺序）*不幸的是，我从来没有写过一种机制来释放我们在目标应用程序中虚拟分配的内存，但这样做的解决方案之一是实现一种机制，用于在目标进程返回其原始进程时通知注入器电子工业园。那时，注入器可以安全地 VirtualFree 分配的内存。（或者，你总能找到一个合适的代码洞，甚至消除释放内存的担忧）*

# c# - 如何改写运算符？

> ID：13297454
> 
> 赞同：2
> 
> 时间：2012-11-08T20:41:02.930
> 
> 标签：c#, operators

```
class Test
{
    public int a { get; set; }
    public int b { get; set; }

    public Test(int a, int b)
    {
        this.a = a;
        this.b = b;
    }

    public static int operator +(Test a)
    {
        int test = a.a*a.b;
        return test;
    }

    public void Testa()
    {
        Test t = new Test(5, 5);
        Console.WriteLine((t.a + t.b));
    }
} 
```

当我调用 Testa() 方法时，我希望结果为 5*5，但我不确定如何使用上面的这个方法，如果我写的是 + 运算符

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-08T20:49:46.003

您的方法重载了*一元运算* `+`符。因此，如果您编写以下代码，您可以看到它的实际效果：

```
Test t = new Test(5, 5);
Console.WriteLine(+t); // Prints 25 
```

如果要重载*二元* `+`运算符，则需要提供两个参数。例如：

```
// I strongly suggest you don't use "a" and "b"
// as parameter names when they're already (bad) property names
public static int operator +(Test lhs, Test rhs)
{
    return lhs.a * rhs.b + lhs.b * rhs.a;    
} 
```

然后将其用作：

```
public static void Main()
{
    Test x = new Test(2, 3);
    Test y = new Test(4, 5);
    Console.WriteLine(x + y); // Prints 22 (2*5 + 3*4)
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T20:49:24.683

你不能那样做。整数的 + 运算符重载是 C# 语言规范的一部分，不能被用户代码覆盖。

您可以执行以下操作：

```
public class Test
{
    public int a { get; set; }
    public int b { get; set; }

    public Test(int a, int b)
    {
        this.a = a;
        this.b = b;
    }

    public static Test operator +(Test first, Test second)
    {
        return new Test(first.a * second.a
            , first.b * second.b);
    }

    public override string ToString()
    {
        return a.ToString() + " " + b.ToString();
    }

    public void Testa()
    {
        Test t = new Test(5, 5);
        Test t2 = new Test(2, 6);
        Console.WriteLine(t + t2);
    }
} 
```

这里的想法是您正在重载`Test`类的运算符，而不是`int`.

在您的情况下，您实际上是重载了一元加号运算符，而不是二元运算符。

# c# - FBX 模型在 XNA 4.0 中无法正确显示

> ID：13297457
> 
> 赞同：1
> 
> 时间：2012-11-08T20:41:18.267
> 
> 标签：c#, c#-4.0, xna, xna-4.0, game-engine

我有一个问题，XNA 4.0 没有正确显示 3D FBX 模型。

一位朋友创建了一个模型，当我在 FBX Viewer 中打开它时，它会正确显示它 [https://docs.google.com/open?id=0B54ow8GRluDUYTBubTQ4bjBramM](https://docs.google.com/open?id=0B54ow8GRluDUYTBubTQ4bjBramM)

但是当我将它加载到 XNA 并单击运行时，它显示为 [https://docs.google.com/open?id=0B54ow8GRluDUSE14TWMxcnBJWWc](https://docs.google.com/open?id=0B54ow8GRluDUSE14TWMxcnBJWWc)

```
The code that i have for the drawing is
foreach (ModelMesh mesh in model.Meshes)
{
    foreach (BasicEffect effect in mesh.Effects)
    {
         effect.Projection = projection;
         effect.View = view;
         effect.World = Matrix.CreateScale(1.0f) * Matrix.CreateRotationX(90) * Matrix.CreateTranslation(position);
         effect.EnableDefaultLighting();
     }
     mesh.Draw();
 } 
```

任何解决此问题的帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T23:40:13.980

每个网格都有一个骨骼...您应该使用它将网格定位在正确的位置...此代码来自 Microsoft

```
private void DrawModel(Model m)
{
    Matrix[] transforms = new Matrix[m.Bones.Count];
    float aspectRatio = graphics.GraphicsDevice.Viewport.AspectRatio;
    m.CopyAbsoluteBoneTransformsTo(transforms);
    Matrix projection =
        Matrix.CreatePerspectiveFieldOfView(MathHelper.ToRadians(45.0f),
        aspectRatio, 1.0f, 10000.0f);
    Matrix view = Matrix.CreateLookAt(new Vector3(0.0f, 50.0f, Zoom),
        Vector3.Zero, Vector3.Up);

    foreach (ModelMesh mesh in m.Meshes)
    {
        foreach (BasicEffect effect in mesh.Effects)
        {
            effect.EnableDefaultLighting();

            effect.View = view;
            effect.Projection = projection;
            effect.World = gameWorldRotation *
                transforms[mesh.ParentBone.Index] *
                Matrix.CreateTranslation(Position);
        }
        mesh.Draw();
    }
} 
```

您可以在[http://msdn.microsoft.com/en-us/library/bb203933(v=xnagamestudio.40).aspx找到它](http://msdn.microsoft.com/en-us/library/bb203933(v=xnagamestudio.40).aspx)

# c - 使用 iconv 进行简单的 UTF8->UTF16 字符串转换

> ID：13297458
> 
> 赞同：3
> 
> 时间：2012-11-08T20:41:22.617
> 
> 标签：c, string, utf-8, posix, iconv

我想编写一个函数来将 UTF8 字符串转换为 UTF16（小端序）。问题是，该`iconv`函数似乎并没有让您提前知道存储输出字符串需要多少字节。

我的解决方案是首先分配`2*strlen(utf8)`，然后在循环中运行，必要时`iconv`增加该缓冲区的大小：`realloc`

```
static int utf8_to_utf16le(char *utf8, char **utf16, int *utf16_len)
{
    iconv_t cd;
    char *inbuf, *outbuf;
    size_t inbytesleft, outbytesleft, nchars, utf16_buf_len;

    cd = iconv_open("UTF16LE", "UTF8");
    if (cd == (iconv_t)-1) {
        printf("!%s: iconv_open failed: %d\n", __func__, errno);
        return -1;
    }

    inbytesleft = strlen(utf8);
    if (inbytesleft == 0) {
        printf("!%s: empty string\n", __func__);
        iconv_close(cd);
        return -1;
    }
    inbuf = utf8;
    utf16_buf_len = 2 * inbytesleft;            // sufficient in many cases, i.e. if the input string is ASCII
    *utf16 = malloc(utf16_buf_len);
    if (!*utf16) {
        printf("!%s: malloc failed\n", __func__);
        iconv_close(cd);
        return -1;
    }
    outbytesleft = utf16_buf_len;
    outbuf = *utf16;

    nchars = iconv(cd, &inbuf, &inbytesleft, &outbuf, &outbytesleft);
    while (nchars == (size_t)-1 && errno == E2BIG) {
        char *ptr;
        size_t increase = 10;                   // increase length a bit
        size_t len;
        utf16_buf_len += increase;
        outbytesleft += increase;
        ptr = realloc(*utf16, utf16_buf_len);
        if (!ptr) {
            printf("!%s: realloc failed\n", __func__);
            free(*utf16);
            iconv_close(cd);
            return -1;
        }
        len = outbuf - *utf16;
        *utf16 = ptr;
        outbuf = *utf16 + len;
        nchars = iconv(cd, &inbuf, &inbytesleft, &outbuf, &outbytesleft);
    }
    if (nchars == (size_t)-1) {
        printf("!%s: iconv failed: %d\n", __func__, errno);
        free(*utf16);
        iconv_close(cd);
        return -1;
    }

    iconv_close(cd);
    *utf16_len = utf16_buf_len - outbytesleft;

    return 0;
} 
```

这真的是最好的方法吗？重复`realloc`s 似乎很浪费，但不知道 utf8 中可能包含哪些字符序列，以及它们在 utf16 中会产生什么结果，我不知道是否可以对初始缓冲区大小做出比`2*strlen(utf8)`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T21:30:46.803

将 UTF-8 转换为 UTF-16 不会使数据大小增加一倍以上。最坏情况是 ASCII（1->2 字节）。UTF-8 中的所有其他 BMP 代码点占用 2 或 3 个字节（因此在转换为 UTF-16 时保持相同的大小或变小。非 BMP 代码点在 UTF-8 或 UTF-16 中正好是 4 个字节。

`realloc`因此，您可以消除用于扩大缓冲区的浪费、复杂和容易出错的逻辑。

顺便说一句，请确保为 null 终止留出空间，该空间不会被`strlen`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-08T21:27:51.243

这才是正确的使用方法`iconv`。

请记住，`iconv`它旨在能够从任意字符编码重新编码为另一种任意字符编码。它支持任意组合。鉴于此，基本上只有两种方法可以知道输出需要多少空间：

1.  猜一下。进行转换，并在必要时增加您的猜测。
2.  进行两次转换。第一次，只是计数，丢弃输出。分配您计算的空间总量，然后再次进行转换。

首先是你做什么。第二个显然有你必须做两次工作的缺点。（顺便说一句，您可以`iconv`通过使用局部变量中的暂存器缓冲区作为第一遍的输出缓冲区来执行第二种方法。）

真的没有别的办法了。要么您事先知道输入中有多少个字符（不是字节），有多少是/不在 BMP 中；或者你没有，你必须数一数。

在这种情况下，您碰巧提前知道输入和输出编码是什么。如果您在开始之前自己对输入字符串执行一些 UTF-8 操作，您可以更好地猜测所需的输出缓冲区空间量。这有点像上面的第二个选项，但更优化，因为必要的 UTF-8 体操并不像成熟的`iconv`.

不过，我建议您不要这样做。您仍然需要对输入字符串进行两次传递，因此您不会节省那么多，您需要编写更多代码，并且它引入了一个错误的可能性，即如果体操不太对劲。

我什至不打算描述体操，因为它实际上或多或少是实现一个 UTF-8 解码器，虽然它的核心只是一些简单的位掩码和移位案例，但有一些相关的细节以具有安全隐患的方式拒绝容易出错的无效序列。所以不要这样做。

# linux - Socat - 虚拟串行网络

> ID：13297459
> 
> 赞同：1
> 
> 时间：2012-11-08T20:41:28.113
> 
> 标签：linux, ubuntu, serial-port

我要模拟 3 个不同的应用程序，每个应用程序都连接到不同的串行调制解调器（rs232）。我希望每个应用程序通过在“虚拟”串行线路上写入来与其他应用程序进行对话我尝试配置`socat`应用程序但现在我使用以下命令仅在两个客户端之间进行通信：

```
socat pty,raw,echo=0 pty,raw,echo=0 
```

你知道如何创建一个虚拟串口的伪网络来模拟不同数量的调制解调器客户端的行为吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T20:31:54.480

Socat 可用于通过将 ip 套接字用作“代理”来创建网络或串行端口。这是可用于我们要创建的每个端口的命令：

`sudo socat ip:localhost:222 pty,raw,echo=0`

# python - Python lxml objectify - 如何使用破折号创建元素

> ID：13297461
> 
> 赞同：0
> 
> 时间：2012-11-08T20:41:28.900
> 
> 标签：python, lxml

我需要使用 lxml 的 objectify 模块来创建一些其中有破折号的 xml 元素。例如：

```
<program-id>$Id: myFile.py 3519 2012-07-17 13:37:20Z $</program-id>
<formatter-txt>basic format</formatter-txt> 
```

我在网上找不到有关如何执行此操作的任何参考资料，当我尝试仅在 Python 中执行此操作时，这是一个语法错误。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T21:01:30.597

[使用这里](http://lxml.de/objectify.html)的文档，因为我从未使用过 objectify：

```
>>> from lxml import objectify
>>> doc = objectify.E.xml()
>>> doc.append(getattr(objectify.E,'program-id')("$Id: myFile.py 3519 2012-07-17 13:37:20Z $"))
>>> doc.append(getattr(objectify.E,'formatter-text')("basic format"))
>>> from lxml import etree
>>> print etree.tostring(doc,pretty_print=True)
<xml xmlns:py="http://codespeak.net/lxml/objectify/pytype" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <program-id py:pytype="str">$Id: myFile.py 3519 2012-07-17 13:37:20Z $</program-id>
  <formatter-text py:pytype="str">basic format</formatter-text>
</xml> 
```

# mysql - 每天对所有帖子计数进行一次 sql 查询

> ID：13297465
> 
> 赞同：0
> 
> 时间：2012-11-08T20:41:36.407
> 
> 标签：mysql, count

我一直在尝试进行一个通用查询，我将在其中获得`(Count of number of posts being submitted each day (separately) in a respective month count(postid))`

就像让我们假设月份是一月，所以查询返回如下内容。

*一个 sql 查询的输出：*

日 : 帖子数

1 5

2 3

3 9

等等..

请让我知道什么是正确的方法或任何其他好的通用替代方法，我试图避免进行多次查询来计算每一天的帖子。

表结构： `ID | postid | post | date`

```
Select count(postid) from posts where month="JAN" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T20:45:22.277

在不知道您的数据库的结构的情况下，通用查询看起来像这样：

```
SELECT YEAR(postdate) AS year, MONTH(postdate) AS month,
    DAY(postdate) AS day, COUNT(postid) AS count
FROM posts
GROUP BY YEAR(postdate), MONTH(postdate), DAY(postdate)
ORDER BY year, month, day 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T20:45:13.947

假设您正在使用`date`名为的列类型`nibbles`：

```
SELECT DAY(nibbles) AS day, COUNT(*) AS post_count
FROM sparkles
WHERE YEAR(nibbles) = 2012 AND MONTH(nibbles) = 1
GROUP BY DAY(nibbles) 
```

**更新**

使用 OP 更新的表结构...

```
SELECT DAY(`date`) AS day, COUNT(post_id) AS post_count
FROM sparkles
WHERE YEAR(`date`) = 2012 AND MONTH(`date`) = 1
GROUP BY DAY(`date`) 
```

# asp.net - FileStream 无法访问该文件，因为它正被另一个进程使用

> ID：13297466
> 
> 赞同：3
> 
> 时间：2012-11-08T20:41:40.667
> 
> 标签：asp.net, filestream, savefiledialog, response.addheader

我是 ASP.NET 网络应用程序的新手，我遇到了这个问题。

我有一个页面，其中有一个按钮来下载以前存储在 SharePoint 页面中的 template.xls。我有下载方法，它工作得很好。有问题的模板被保存在我的本地 IIS 上，我的 Web 应用程序所在的文件夹中。问题是向最终用户打开这个文件。我需要向用户显示一个弹出窗口，以便他可以打开/保存此 template.xls 我正在使用以下内容：

```
//path on my local IIS where the file is located after the download
string _strFolderApp = "~/Arq/";
string _strFullFolderApp = _strFolderApp + _strFileName;
string apPath = System.Web.Hosting.HostingEnvironment.MapPath(_strFullFolderApp);

FileStream _FileStream = new FileStream(apPath, FileMode.Create, FileAccess.ReadWrite, FileShare.ReadWrite);
// Writes a block of bytes to this stream using data from a byte array.
_FileStream.Write(_contentFile, 0, _contentFile.Length);

//opens the file
Response.Clear();
Response.AddHeader("content-disposition", "attachment; filename=" + _strFileName);
Response.ContentType = "";
Response.TransmitFile(apPath);
Response.Flush();
File.Delete(apPath);
Response.End();
# endregion

// close file stream
_FileStream.Close(); 
```

我在网上搜索，所有答案最终都使用 FileShare.ReadWrite，所以这两个过程都可以正常工作。但这对我不起作用，因为当代码到达**Response.TransmitFile(apPath);** 我得到一个异常并且没有显示弹出窗口。例外 ：

*该进程无法访问文件 'c:\inetpub\wwwroot\MyWebApp\File\TemplateSharePoint.xlsx'，因为它正被另一个进程使用。*

请任何帮助将不胜感激:)

**编辑** *代码更新*

```
if (_flgSPSDownload)
        {
            System.IO.FileStream _FileStream = new System.IO.FileStream(apPath,System.IO.FileMode.Create, System.IO.FileAccess.Write);
            _FileStream.Write(_contentFile, 0, _contentFile.Length);
            _FileStream.Close();

            Response.Clear();
            Response.AddHeader("content-disposition", "attachment; filename=" + _strFileName);
            //Set the appropriate ContentType.
            Response.ContentType = "Application/x-msexcel";
            Response.TransmitFile(apPath);
            Response.Flush();
            //Write the file directly to the HTTP content output stream.
            Response.WriteFile(apPath);
            //File.Delete(apPath);

            //Process.Start(_strDestinationPath + "//" + _strFileName); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T21:13:09.667

据我所知，您正在打开文件流，然后尝试再次打开它，然后再关闭它。

文件的初始打开：

```
FileStream _FileStream = new FileStream(apPath, FileMode.Create, FileAccess.ReadWrite, FileShare.ReadWrite); 
```

和

```
Response.TransmitFile(apPath); 
```

似乎正在尝试再次打开文件。

我建议打电话

```
_FileStream.Close(); 
```

打电话之前`TransmitFile`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-25T05:15:51.127

我已经用另一种方式解决了这个问题

我打开窗口任务管理器，发现我的项目的 dll 文件正在运行

倍数（我的意思是它的副本存在）我删除它们，然后我的问题就解决了

# timezone - 将应用程序的时区设置为当前用户的时区 - Time.zone vs Time.use_zone

> ID：13297467
> 
> 赞同：1
> 
> 时间：2012-11-08T20:41:43.040
> 
> 标签：timezone, ruby-on-rails-3.2

这两个代码片段有什么区别？什么时候应该使用一个与另一个？

**时区**

```
class ApplicationController < ActionController::Base
  before_filter :set_time_zone

  def set_time_zone
    Time.zone = current_user.time_zone
   end
end 
```

**时间.use_zone**

```
class ApplicationController < ActionController::Base
  around_filter :set_time_zone

  def set_time_zone(&block)
    Time.use_zone(current_user.time_zone, &block)
   end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-30T23:01:13.700

似乎在提供的块内本地`Time.use_zone`覆盖`Time.zone`，然后`Time.zone`在完成后重置为现有值。

因此，第二个代码块相当于`Time.zone = current_user.time_zone`在每个方法的开头调用，然后将其重置`Time.zone`为您指定的默认值`/config/application.rb`

虽然我仍然不确定哪种是推荐的方法。从性能的角度来看，似乎第一个选项会更好，但在某些情况下，第二个选项可能更有意义。

更多在这里：

*   [http://api.rubyonrails.org/classes/Time.html#method-c-use_zone](http://api.rubyonrails.org/classes/Time.html#method-c-use_zone)
*   [http://railscasts.com/episodes/106-time-zones-revised?view=asciicast](http://railscasts.com/episodes/106-time-zones-revised?view=asciicast)

# iphone - 在点击包含 uiimageview 的 uiscrollview 时打开模式视图

> ID：13297471
> 
> 赞同：1
> 
> 时间：2012-11-08T20:42:06.847
> 
> 标签：iphone, ios, xcode4

我需要在录制包含 uiimage 视图的 uiscrollview 时打开一个模态视图。我处理了手势并获取了点击点的坐标，但不知道如何从那里触发新的模态视图。我使用情节提要创建了一个需要在点击时打开的新视图。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T21:01:51.620

您可以创建一个自定义 segue，您可以在接收手势识别的地方在代码中手动触发它。这是[关于创建自定义 segues 的教程](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/CreatingCustomSegues/CreatingCustomSegues.html)。

您还可以创建一个手动模式转场，它不连接到情节提要中的任何特定操作，而是在您的代码中手动触发。您可以通过 ctrl+单击要从中启动 segue 的视图控制器并拖动到模态视图的视图控制器来执行此操作。在你的故事板中给 segue 一个标识符。然后，您将在收到手势的代码中手动执行此 segue。这是[有关如何执行此操作的教程](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/UsingViewControllersinYourApplication/UsingViewControllersinYourApplication.html)。

# php - php通过字符串访问类

> ID：13297476
> 
> 赞同：0
> 
> 时间：2012-11-08T20:42:27.977
> 
> 标签：php, class, syntax-error

以下代码在我的本地主机和我的第一个主机上运行良好，但在我的新主机上运行良好。

```
static function setup ($childModel) {
  query::create()
   ->name($childModel::$tableName)
   ->mayExist()
   ->row($childModel::$struct)
   ->key($childModel::$index)
   ->run();
} 
```

`$childModel`包含一个带有类名的字符串。到目前为止工作正常，但新服务器说：

```
Parse error: syntax error, unexpected T_PAAMAYIM_NEKUDOTAYIM in /***/model.php on line 71 
```

（第 71 行是上面代码的第 3 行）

我知道这意味着他不喜欢`::`，但为什么我的其他服务器都没有在这里抱怨？我能做些什么呢？

更新：它现在有效。服务器切换到新的 php 版本似乎需要一些时间。对不起大家！（我如何关闭这个线程？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T20:49:46.413

语法（使用`$childModel::$tableName`变量作为类名）仅适用于 PHP 5.3+。

您的新主机似乎使用的是旧版本的 PHP。

# android - 使用android持续跟踪手机附近可用的蓝牙连接

> ID：13297479
> 
> 赞同：2
> 
> 时间：2012-11-08T20:42:40.510
> 
> 标签：android, bluetooth, android-sdk-2.1

我需要持续监控每 5 秒出现一次的蓝牙设备。我编写了以下不适合我的代码。

```
private static final int DISCOVERY_REQUEST = 1;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_bluetooth_connection);

    final TextView tv = (TextView) findViewById(R.id.textView1);
    tv.setText("");
    final BluetoothAdapter mBluetoothAdapter = BluetoothAdapter
            .getDefaultAdapter();
    mBluetoothAdapter.startDiscovery();
    final BroadcastReceiver mReceiver = new BroadcastReceiver() {
        @Override
        public void onReceive(Context context, Intent intent) {
            String action = intent.getAction();
            // When discovery finds a device

            if (BluetoothDevice.ACTION_FOUND.equals(action)) {
                // Get the BluetoothDevice object from the Intent
                BluetoothDevice device = intent
                        .getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);
                tv.append(device.getName() + "-"
                        + /* device.getAddress()+ */"\n");
                tv.append("here");
                /*
                 * if (device.getName().equals("ONCEWASCUT-L7")) {
                 * tv.append("this is in the vicinity");
                 * 
                 * }
                 */
            } else if (BluetoothAdapter.ACTION_DISCOVERY_FINISHED
                    .equals(action)) {
                tv.append("\nEntered the Finished\n ");
                mBluetoothAdapter.startDiscovery();
            }
        }

    };
    String aDiscoverable = BluetoothAdapter.ACTION_REQUEST_DISCOVERABLE;
    startActivityForResult(new Intent(aDiscoverable), DISCOVERY_REQUEST);
    IntentFilter filter = new IntentFilter(BluetoothDevice.ACTION_FOUND);
    registerReceiver(mReceiver, filter);
    mBluetoothAdapter.startDiscovery();
} 
```

需要添加什么代码才能使应用程序正常工作。请注意，我需要每 5 秒监控一次蓝牙设备。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T12:11:35.243

您可以使用 Timer 和 TimerTask 持续检查特定设备是否可用。

例如：

```
Timer timer = new Timer();
timer.scheduleAtFixedRate(new TimerTask {
    @Override
    public void run () {
        //Here you can use handler or whatever you want to use.
    }
},delay, period); 
```

延迟 - 首次执行前的毫秒数。

period - 后续执行之间的时间量（以毫秒为单位）。

[http://developer.android.com/reference/java/util/Timer.html#scheduleAtFixedRate](http://developer.android.com/reference/java/util/Timer.html#scheduleAtFixedRate)

有关更多详细信息，请参阅此链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-07T10:33:27.773

声明处理程序，根据您的要求更改时间

```
mhandler = new Handler();
            Runnable mrunnable = new Runnable() {
                @Override
                public void run() {
                    if (mBluetoothAdapter.isDiscovering()) {
                        mBluetoothAdapter.cancelDiscovery();
                    }
                    mBluetoothAdapter.startDiscovery();
                    mhandler.postDelayed(this, 1000);
                }
            };
            mhandler.post(mrunnable); 
```

# apache - Apache Tomcat 配置 Web.xml

> ID：13297481
> 
> 赞同：0
> 
> 时间：2012-11-08T20:42:51.283
> 
> 标签：apache, tomcat, web.xml

嘿，我在 web.xml 中配置 java 文件时遇到问题。我默认在apache tomcat提供的examples/classes文件夹中创建了一个java文件。并将这一行添加到 web.xml

```
<servlet>
<servlet-name>Time_Display</servlet-name>
<servlet-class>Time_Display</servlet-class> 
```

它在 url:port/examples/servlet/Time_Display 位置运行良好

现在我将整个示例文件夹复制到示例 1 并运行上面修改过的链接

url:port/examples1/servlet/Time_Display

然后它说“请求的资源（/examples1/servlet/Time_Display）不可用。”

为什么 ？？

这是我的完整 web.xml 代码：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE web-app
PUBLIC "-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN"
"http://java.sun.com/dtd/web-app_2_3.dtd">
<web-app>

<display-name>Tomcat Examples</display-name>
<description>
  Tomcat Example servlets and JSP pages.
</description>
<servlet>
<servlet-name>Time_Display</servlet-name>
<servlet-class>Time_Display</servlet-class>
</servlet>
<servlet-mapping>
<servlet-name>Time_Display</servlet-name>
<url-pattern>/Time_Display</url-pattern>
 </servlet-mapping>
 </web-app> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-17T21:44:16.193

如果您收到 404 错误通知“请求的资源不可用”，则表示此 url 未正确映射。

在您的 web.xml 中，将您的元素 'url-pattern' 更改为 /examples1/servlet/Time_Display 这必须解决您的问题。

由于您已将元素“servlet-class”作为 Time_Display，我猜 Time_Display 类位于默认包中。如果不是，则必须告知类的完整名称，即packageName+className，例如com.example.Time_Display。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T20:54:49.013

可能是tomcat配置有问题（爆炸战争自动部署可能被禁用）。重新启动tomcat并尝试访问上面的链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T21:50:22.843

在调用 servlet (url:port/examples1/servlet/Time_Display) 时不应在 URL 中使用 servlet，因为您在 web.xml 中提供了 servlet-mapping。

可能 examples1/Time_Display 会起作用。

当您在应用程序中使用 org.apache.catalina.servlets.DefaultServlet 时，需要在 URL 中使用 servlet。不建议在现代 Tomcat 服务器中使用。

# coffeescript - 在 Coffeescript 中的属性上破折号

> ID：13297483
> 
> 赞同：1
> 
> 时间：2012-11-08T20:42:52.660
> 
> 标签：coffeescript

我正在将一些代码从 js 翻译成 coffeescript：

对于包含破折号的对象属性，我遇到了编译器问题：

如果我这样做：

```
params = 
  fill: 'white'
  stroke: '#fff'
  'stroke-width': 2
  'text-anchor': y_label_anchor 
```

我得到一个奇怪的编译器错误，没有任何行号说：错误：在隐式对象中不能有隐式值。

如果我这样做：

```
 params = 
   fill: 'white'
   stroke: '#fff'
   stroke-width: 2
   text-anchor: y_label_anchor 
```

我在第 1234 行收到解析错误：意外的“-”。

我完全明白 Coffescript 不想在属性名称中弄乱破折号。问题是，我仍然需要找到一种方法来转换这个对象，这样我就可以将它传递给 javascript 中的库函数。

**有人知道我可以在 Coffeescript 中创建这个对象的方法吗？**

谢谢

# delphi - Delphi Indy 9 服务器端口

> ID：13297488
> 
> 赞同：1
> 
> 时间：2012-11-08T20:43:03.850
> 
> 标签：delphi, delphi-7, indy, indy-9

我一直使用 indy 9 和 Delphi 7。我现在对它有相当的经验，但想更进一步。我想听多个端口，不知道该怎么做。还有人担心我是否能够在服务器处于活动状态时添加/删除端口。所以这里有几个问题我想知道答案：

1.  当服务器已经处于活动状态时，如何向绑定添加新端口？
2.  当服务器已经处于活动状态时，如何从绑定中删除端口？
3.  当我删除绑定时，Indy 如何/将如何断开客户端与端口的连接？
4.  defaultPort 属性会发生什么？

谢谢您的回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T23:33:59.253

> 1.如何在服务器已经处于活动状态时向绑定中添加新端口？
> 
> 2.当服务器已经处于活动状态时，如何从绑定中删除端口？
> 
> 3.当我删除绑定时，Indy 如何/将如何断开客户端与端口的连接？

所有三个问题都有相同的答案 - 不支持您所要求的（即使在 Indy 10 中也不支持）。您必须先停用服务器，然后才能对其`Bindings`集合进行任何更改。如果这不符合您的需要，那么您将不得不为您想要收听的每个 IP/端口对使用单独的服务器组件。这样，您可以根据需要单独激活/停用它们。停用服务器会自动断开与其连接的所有活动客户端。

> 4.defaultPort 属性会怎样？

该`DefaultPort`属性仅用于在向集合中`TIdSocketHandle.Port`添加新条目时初始化属性。`Bindings`它不用于其他任何事情。

# javascript - ExtJs 启用/禁用字段

> ID：13297489
> 
> 赞同：0
> 
> 时间：2012-11-08T20:43:04.623
> 
> 标签：javascript, extjs, extjs4

在 ExtJs 中，我在同一个表单上有一个组合框和几个字段。我希望根据组合框中的选择启用最初禁用的字段。为了做到这一点，我有以下内容：

```
listeners: { change: {
                    fn: function (combo, newValue, oldValue, eOpts) {
                        if (newValue == "amz") {
                            var amazonFields = this.up('panel').query('#amz1, #amz2, #amz3');
                            amazonFields[0].disabled = 'false';
                            amazonFields[1].disabled = 'false';
                            amazonFields[2].disabled = 'false';
                        }
                    }
                } 
```

代码按我的预期工作，但字段保持禁用状态，谁能告诉我为什么？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T20:53:53.663

该`disabled`字段的属性是只读的。要更改其状态，您需要调用[`setDisabled`](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.field.Text-method-setDisabled)or[`disable`](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.field.Text-method-disable)方法。

此外，`'false'`与`false`JavaScript 中的不同。

# postgresql - 错误：对 FROM 子句的无效引用

> ID：13297491
> 
> 赞同：34
> 
> 时间：2012-11-08T20:43:11.417
> 
> 标签：postgresql, join

我有以下 SQL (PostgreSQL) 查询：

```
SELECT ff.*, fp.*
FROM fibra ff, fibra fp

JOIN cables cp ON fp.cable_id = cp.id
LEFT OUTER JOIN terceiro  ced_pai ON ced_pai.id = cp.cedente_id
LEFT OUTER JOIN terceiro tp ON tp.id = fp.terceiro_id

JOIN cables cf ON ff.cable_id = cf.id
LEFT OUTER JOIN terceiro ced_f ON ced_f.id = cf.cedente_id
LEFT OUTER JOIN terceiro tf ON tf.id = ff.terceiro_id

where ff.fibra_pai_id = fp.id 
AND ff.cable_id IN (8,9,10) 
AND fp.cable_id IN (8,9,10) 
```

但它给了我这个错误：

```
ERROR:  invalid reference to FROM-clause entry for table "ff"
LINE 8:  JOIN cables cf ON ff.cable_id = cf.id
           ^
HINT:  There is an entry for table "ff", but it cannot be referenced from this part of the query.

********** Error **********

ERROR: invalid reference to FROM-clause entry for table "ff"
SQL state: 42P01
Hint: There is an entry for table "ff", but it cannot be referenced from this part of the query.
Character: 261 
```

有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-11-09T00:53:42.867

您正在混合隐式和显式 JOIN。正如您刚刚发现的那样，这通常会令人困惑，并会导致意想不到的评估顺序问题。

您应该始终如一地`JOIN ... ON`在任何地方使用语法；避免遗留`FROM table1, table2`。如果您更正查询以使用显式 JOIN 而不是`FROM fibra ff, fibra fp`, 例如并从子句中`FROM fibra ff INNER JOIN fibra fp ON (ff.fibra_pai_id = fp.id)`省略，您应该得到预期的结果。`ff.fibra_pai_id = fp.id``WHERE`

请参阅 AH 链接到的这个问题：

[Mixing explicit and implicit joins fails with "There is an entry for table ... but it cannot be referenced from this part of the query"](https://stackoverflow.com/questions/6347897/whats-wrong-with-this-query)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T20:49:37.413

将查询中的所有联接转换为显式，以避免您遇到的问题——不要留下一些隐含的和其他显式的。

这应该有效：

```
SELECT ff.*, fp.*
  FROM fibra ff

  JOIN fibra fp ON ff.fibra_pai_id = fp.id 

  JOIN cables cp ON fp.cable_id = cp.id
  LEFT OUTER JOIN terceiro  ced_pai ON ced_pai.id = cp.cedente_id
  LEFT OUTER JOIN terceiro tp ON tp.id = fp.terceiro_id

  JOIN cables cf ON ff.cable_id = cf.id
  LEFT OUTER JOIN terceiro ced_f ON ced_f.id = cf.cedente_id
  LEFT OUTER JOIN terceiro tf ON tf.id = ff.terceiro_id

WHERE
 ff.cable_id IN (8,9,10) 
 AND fp.cable_id IN (8,9,10) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-25T16:08:00.703

In my case the problem was that I forgot I had assigned my tables to a particular schema and needed to reference those e.g:

```
select r.*
from my_schema.resources r 
```

# ruby - Watir - ArgumentError：参数数量错误（1 对 2）

> ID：13297492
> 
> 赞同：0
> 
> 时间：2012-11-08T20:43:12.023
> 
> 标签：ruby, watir

我现在正在尝试 Watir，我有一些单选按钮，我有一个按钮可以在选择值后单击。

```
<td>
    <input id="divPoll1" type="radio" value="1" name="Polls">
    <label for="divPoll2">Yes</label>
</td> 
```

和

```
<td>
    <input id="divPoll2" type="radio" value="2" name="Polls">
    <label for="divPoll2">No</label>
</td> 
```

每次我尝试

```
>> browser.radio(:value => '2').set
ArgumentError: wrong number of arguments (1 for 2)
    from (irb):48:in `radio'
    from (irb):48
    from :0 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T04:18:52.353

这取决于您使用的 WATIR 版本，更高版本支持对单个属性使用粗逗号（=>）。

试试 browser.radio(:value, '2').set，我发现胖逗号唯一有效的时候是当你使用两个属性来标识一个元素时，例如。browser.radio(:value => '2', :id => 'divPolls2').set

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T12:19:57.157

实际上从 SafariWatir 切换工作非常好。我尝试了 webdriver-watir 并且效果很好。

# object - 在 OpenCV 中使用 SURF 定义检测到的对象宽度

> ID：13297493
> 
> 赞同：1
> 
> 时间：2012-11-08T20:43:13.063
> 
> 标签：object, opencv, detection, surf, homography

我正在一个机器人项目下工作。在 opencv 上使用 SURF 进行对象检测。我在物体检测网上发现了很多代码。我没有准确找到图像中对象的宽度及其角的坐标？

而且，是否可以定义物体到凸轮的距离？

任何帮助将不胜感激

# java - 添加 JDBC jar 以便 Spring Framework 可以找到它

> ID：13297497
> 
> 赞同：0
> 
> 时间：2012-11-08T20:43:18.387
> 
> 标签：java, sql-server, eclipse, spring-jdbc

我是 Java、Spring 和 Eclipse 的新手。我正在开发一个简单的 Spring 程序，该程序使用 Spring Framework JDBC 连接到 Microsoft SQL Server 2012。通过正确的配置，我成功地使用传统的 JDBC 与数据库通信。我遇到的问题是应用程序无法找到 Microsoft JDBC 驱动程序。我假设这只是以不同方式引用 JAR 文件的问题。这是我目前的类路径文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<classpath>
    <classpathentry kind="src" output="target/classes" path="src/main/java"/>
    <classpathentry excluding="**" kind="src" output="target/classes" path="src/main/resources"/>
    <classpathentry kind="con" path="org.eclipse.jdt.launching.JRE_CONTAINER/org.eclipse.jdt.internal.debug.ui.launcher.StandardVMType/JavaSE-1.6"/>
    <classpathentry kind="con" path="org.eclipse.m2e.MAVEN2_CLASSPATH_CONTAINER"/>
    <classpathentry kind="lib" path="C:/Program Files/Microsoft JDBC Driver 4.0 for SQL Server/sqljdbc_4.0/enu/sqljdbc4.jar"/>
    <classpathentry kind="output" path="target/classes"/>
</classpath> 
```

这是 app-context.xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="
      http://www.springframework.org/schema/beans   http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
      http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd">

    <bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource">
        <property name="driverClassName" value="com.microsoft.sqlserver.jdbc.Driver"/>
        <property name="url" value="jdbc:sqlserver://localhost;databaseName=ProSpringCh8"/>
        <property name="username" value="****"/>
        <property name="password" value="****"/>
    </bean>

    <context:property-placeholder location="jdbc.properties" />

    <bean id="contactDao" class="com.accumed.DatabaseTest.dao.jdbc.xml.JdbcContactDao">
        <property name="dataSource">
            <ref local="dataSource"/>
        </property>
    </bean>

</beans> 
```

* * *

我在 Eclipse 的调试器中运行它。我得到的错误是：

```
09:28:19,711 DEBUG g.springframework.jdbc.core.JdbcTemplate: 635 - Executing prepared SQL query
09:28:19,726 DEBUG g.springframework.jdbc.core.JdbcTemplate: 570 - Executing prepared SQL statement [select first_name from contact where id = ?]
09:28:19,774 DEBUG ramework.jdbc.datasource.DataSourceUtils: 110 - Fetching JDBC Connection from DataSource
Exception in thread "main" org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot load JDBC driver class 'com.microsoft.sqlserver.jdbc.Driver'
    at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80)
    at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:573)
    at org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:637)
    at org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:666)
    at org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:674)
    at org.springframework.jdbc.core.JdbcTemplate.queryForObject(JdbcTemplate.java:729)
    at org.springframework.jdbc.core.JdbcTemplate.queryForObject(JdbcTemplate.java:745)
    at com.accumed.DatabaseTest.dao.jdbc.xml.JdbcContactDao.findFirstNameById(JdbcContactDao.java:55)
    at com.accumed.DatabaseTest.JdbcContactDaoSample.main(JdbcContactDaoSample.java:21)
Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot load JDBC driver class 'com.microsoft.sqlserver.jdbc.Driver'
    at org.apache.commons.dbcp.BasicDataSource.createConnectionFactory(BasicDataSource.java:1429)
    at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1371)
    at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044)
    at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111)
    at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77)
    ... 8 more
Caused by: java.lang.ClassNotFoundException: com.microsoft.sqlserver.jdbc.Driver
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    at org.apache.commons.dbcp.BasicDataSource.createConnectionFactory(BasicDataSource.java:1420)
    ... 12 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T16:01:42.777

SQL Server JDBC 驱动程序类是`com.microsoft.sqlserver.jdbc.SQLServerDriver`，不是`com.microsoft.sqlserver.jdbc.Driver`

# magento - Magento 支付模块未显示在前端

> ID：13297498
> 
> 赞同：0
> 
> 时间：2012-11-08T20:43:49.647
> 
> 标签：magento, magento-1.7

我已经为 magento 开发了一个支付模块，但是我无法让它显示在商店的前端，在结帐区域。

我的配置文件看起来像

```
<?xml version="1.0"?>
<config>
    <modules>
        <Atlanticsoft_Pay>
            <version>0.1.0</version>
        </Atlanticsoft_Pay>
    </modules>
    <frontend>
        <routers>
            <pay>
                <use>standard</use>
                <args>
                    <module>Atlanticsoft_Pay</module>
                    <frontName>pay</frontName>
                </args>
            </pay>
        </routers>
        <layout>
            <updates>
                <pay>
                    <file>pay.xml</file>
                </pay>
            </updates>
        </layout>
    </frontend>
    <global>
        <fieldsets>
             <sales_convert_quote_payment>
                <check_no>
                    <to_order_payment>*</to_order_payment>
                </check_no>
                <check_date>
                    <to_order_payment>*</to_order_payment>
                </check_date>
             </sales_convert_quote_payment>
        </fieldsets>
        <models>
            <pay>
                <class>Atlanticsoft_Pay_Model</class>
                <resourceModel>pay_mysql4</resourceModel>
            </pay>
            <pay_mysql4>
                <class>Atlanticsoft_Pay_Model_Mysql4</class>
                <entities>
                    <pay>
                        <table>pay</table>
                    </pay>
                </entities>
            </pay_mysql4>
        </models>
        <resources>
            <pay_setup>
                <setup>
                    <module>Atlanticsoft_Pay</module>
                </setup>
                <connection>
                    <use>core_setup</use>
                </connection>
            </pay_setup>
            <pay_write>
                <connection>
                    <use>core_write</use>
                </connection>
            </pay_write>
            <pay_read>
                <connection>
                    <use>core_read</use>
                </connection>
            </pay_read>
        </resources>
        <blocks>
            <pay>
                <class>Atlanticsoft_Pay_Block</class>
            </pay>
        </blocks>
        <helpers>
            <pay>
                <class>Atlanticsoft_Pay_Helper</class>
            </pay>
        </helpers>
    </global>
    <default>
        <payment>
            <pay>
                <active>1</active>
                <model>pay/pay</model>
                <order_status>processing</order_status>
                <title>Atlanticsoft Payment Method</title>
                <message>Seleccionando esta opcion esta autorizando a la tienda a hacer cargos semanales a su tarjeta para el pago de los productos.</message>
            </pay>
         </payment>
    </default>
</config> 
```

但找不到问题，在管理区域一切正常：这是我的 system.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<config>
   <sections>
        <payment>
            <groups>
                <pay translate="label" module="pay">
                    <label>Atlanticsoft Payment Module</label>
                    <sort_order>670</sort_order>
                    <show_in_default>1</show_in_default>
                    <show_in_website>1</show_in_website>
                    <show_in_store>1</show_in_store>
                    <fields>
                        <active translate="label">
                            <label>Enabled</label>
                            <frontend_type>select</frontend_type>
                            <source_model>adminhtml/system_config_source_yesno</source_model>
                            <sort_order>1</sort_order>
                            <show_in_default>1</show_in_default>
                            <show_in_website>1</show_in_website>
                            <show_in_store>0</show_in_store>
                        </active>
                        <gateway_url translate="label">
                           <label>Gateway URL</label>
                           <frontend_type>text</frontend_type>
                           <sort_order>3</sort_order>
                           <show_in_default>1</show_in_default>
                           <show_in_website>1</show_in_website>
                           <show_in_store>0</show_in_store>
                       </gateway_url>
                        <api_username translate="label">
                            <label>Username de comercio</label>
                            <frontend_type>text</frontend_type>
                            <sort_order>3</sort_order>
                            <show_in_default>1</show_in_default>
                            <show_in_website>1</show_in_website>
                            <show_in_store>0</show_in_store>
                        </api_username>
                        <api_password translate="label">
                            <label>Clave de comercio</label>
                            <frontend_type>text</frontend_type>
                            <sort_order>3</sort_order>
                            <show_in_default>1</show_in_default>
                            <show_in_website>1</show_in_website>
                            <show_in_store>0</show_in_store>
                        </api_password>

                        <order_status translate="label">
                            <label>Order status</label>
                            <frontend_type>select</frontend_type>
                            <source_model>adminhtml/system_config_source_order_status_processing</source_model>
                            <sort_order>2</sort_order>
                            <show_in_default>1</show_in_default>
                            <show_in_website>1</show_in_website>
                            <show_in_store>0</show_in_store>
                        </order_status>
                        <title translate="label">
                            <label>Title</label>
                            <frontend_type>text</frontend_type>
                            <sort_order>3</sort_order>
                            <show_in_default>1</show_in_default>
                            <show_in_website>1</show_in_website>
                            <show_in_store>0</show_in_store>
                        </title>
                        <api_code translate="label">
                            <label>Codigo de comercio</label>
                            <frontend_type>text</frontend_type>
                            <sort_order>4</sort_order>
                            <show_in_default>1</show_in_default>
                            <show_in_website>1</show_in_website>
                            <show_in_store>1</show_in_store>
                        </api_code>
                    </fields>
                </pay>
            </groups>
        </payment>
    </sections>
</config> 
```

添加了 Pay.php 代码

```
class Atlanticsoft_Pay_Model_Pay extends Mage_Payment_Model_Method_Cc
{
    protected $_code = 'pay';
    protected $_formBlockType = 'pay/form_pay';
    protected $_infoBlockType = 'pay/info_pay';

    //protected $_isGateway               = true;
    protected $_canAuthorize            = false;
    protected $_canCapture              = false;
    //protected $_canCapturePartial       = true;
    protected $_canRefund               = false;

    protected $_canSaveCc = false; //if made try, the actual credit card number and cvv code are stored in database.

    //protected $_canRefundInvoicePartial = true;
    //protected $_canVoid                 = true;
    //protected $_canUseInternal          = true;
    protected $_canUseCheckout          = true;
    //protected $_canUseForMultishipping  = true;
    //protected $_canFetchTransactionInfo = true;
    //protected $_canReviewPayment        = true;

    public function process($data){

        if($data['cancel'] == 1){
         $order->getPayment()
         ->setTransactionId(null)
         ->setParentTransactionId(time())
         ->void();
         $message = 'Unable to process Payment';
         $order->registerCancellation($message)->save();
        }
    }

    public function processBeforeRefund($invoice, $payment){
        return parent::processBeforeRefund($invoice, $payment);
    }
    public function refund(Varien_Object $payment, $amount){
        $order = $payment->getOrder();
        $result = $this->callApi($payment,$amount,'refund');
        if($result === false) {
            $errorCode = 'Invalid Data';
            $errorMsg = $this->_getHelper()->__('Error Processing the request');
            Mage::throwException($errorMsg);
        }
        return $this;

    }
    public function processCreditmemo($creditmemo, $payment){
        return parent::processCreditmemo($creditmemo, $payment);
    }

    public function getOrderPlaceRedirectUrl()
    {
        if((int)$this->_getOrderAmount() > 0){
            return Mage::getUrl('pay/index/index', array('_secure' => true));
        }else{
            return false;
        }
    }

    private function _getOrderAmount()
    {
        $info = $this->getInfoInstance();
        if ($this->_isPlacedOrder()) {
            return (double)$info->getOrder()->getQuoteBaseGrandTotal();
        } else {
            return (double)$info->getQuote()->getBaseGrandTotal();
        }
    }
    private function _isPlacedOrder()
    {
        $info = $this->getInfoInstance();
        if ($info instanceof Mage_Sales_Model_Quote_Payment) {
            return false;
        } elseif ($info instanceof Mage_Sales_Model_Order_Payment) {
            return true;
        }
    }

} 
```

这里有什么帮助吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T20:56:19.270

我们需要查看您的 Atlanticsoft_Pay_Model_Pay 定义。假设它继承自`Mage_Payment_Model_Method_Abstract`，`$_canUseCheckout`则应将受保护的属性设置为`true`以便在前端结帐流程中使用。

此外，`pay`是一个不明智的班级组。会更好`atlanticsoft_pay`。

# javascript - 如何从字符串中删除所有非字母并将空格转换为javascript中的破折号？

> ID：13297504
> 
> 赞同：0
> 
> 时间：2012-11-08T20:44:11.657
> 
> 标签：javascript, jquery, regex, string, replace

这个简单的正则表达式让我很困扰。你能伸出援手吗？

我怎样才能在 javascript`Foo's Bar`中返回？`foos-bar`

```
var str = "Foo's Bar";
str.replace(/\s+/g, '-').replace('/[^a-zA-Z-]/g', '').toLowerCase();
return str; 
```

我能做的最好的就是`foo's-bar`，离开`'`。

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-08T20:49:51.907

Esailija 是正确的 - 您的正则表达式是正确的，但第二个正则表达式被解释为字符串，因为它被包裹在引号中。修复后，您的代码可以完美运行：

```
str.replace(/\s+/g, '-').replace(/[^a-zA-Z-]/g, '').toLowerCase(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T20:54:42.860

您可以尝试颠倒顺序并通常避免使用单词和空格字符

```
str.replace(/[^\w\s]+/g,'').replace(/\s+/g,"-").toLowerCase() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T00:41:16.657

您的代码中有两个问题：

1.  不应引用正则表达式模式（第二个中的第一个参数`replace`）
2.  返回值需要分配回`str`

* * *

```
str = str.replace(/\s+/g, '-').replace(/[^a-zA-Z-]/g, '').toLowerCase(); 
```

# ejabberd - 带有 Ejabberd http-bind 的 Candy/Strophe 在没有等待的情况下太快地发送消息时得到 404

> ID：13297505
> 
> 赞同：1
> 
> 时间：2012-11-08T20:44:17.847
> 
> 标签：ejabberd, strophe, candy

我最近正在开发一个在 Candy (http://candy-chat.github.com/candy/) 后面使用 Strophe.js (http://strophe.im/strophejs/) 的 Web 应用程序。当客户端发送消息过快时，由于无效的摆脱问题，客户端从 ejabberd 获得 404。同样的错误也会随机发生。

经过一些研究，我发现这是由于无效摆脱问题造成的，并且正在发生这种情况，因为理想情况下，客户端 js 应该在推送新节之前等待服务器响应，而在某些情况下则不会。

从我的角度来看，这应该由 Strophe.js 在低级别而不是应用程序程序员来确保。请告诉我我应该如何着手解决这个问题？我在谷歌上找不到这个问题的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-03T21:58:57.837

一定是 Ejabberd 版本的问题。现在在 2.1.12 中修复了一个已知问题 [https://www.process-one.net/en/ejabberd/release_notes/release_note_ejabberd_2.1.12/](https://www.process-one.net/en/ejabberd/release_notes/release_note_ejabberd_2.1.12/)

问题是 ejabberd 以错误的顺序接收消息 ID (RID)，然后以 404 关闭连接。现在此行为已被删除（只有在收到相同 RID 时才会发生，以避免重播）

希望这可以帮助！

哈维尔·D·卡鲁索

# jsf - JSF 会话超时和异常处理

> ID：13297507
> 
> 赞同：0
> 
> 时间：2012-11-08T20:44:30.597
> 
> 标签：jsf, exception-handling

> **可能重复：**
> [JSF 1.2 异常处理](https://stackoverflow.com/questions/13347692/jsf-1-2-exception-handling)

在 web.xml 中，我的会话配置如下

```
<session-config>
  <session-timeout>2</session-timeout>
</session-config> 
```

我也有一个错误页面定义如下

```
<error-page>
    <exception-type>javax.faces.application.ViewExpiredException</exception-type>
    <location>/sc00/ErrorPage.jsp</location>
 </error-page> 
```

当应用程序超时时，我无法定向到错误页面，它说

```
SRVE0260E: The server cannot use the error page specified for your application to handle the Original Exception printed below.

Original Exception: 
Error Message: javax.servlet.ServletException: /sc40/NewContract.facesNo saved         view      state could be found for the view identifier: /sc40/NewContract.faces
Error Code: 500
Target Servlet: Faces Servlet
Error Stack: 
javax.faces.application.ViewExpiredException: /sc40/NewContract.facesNo saved view     state could be found for the view identifier: /sc40/NewContract.faces 
 at org.apache.myfaces.lifecycle.RestoreViewExecutor.execute(RestoreViewExecutor.java:128) 
 at org.apache.myfaces.lifecycle.LifecycleImpl.executePhase(LifecycleImpl.java:171) 
 at org.apache.myfaces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118) 
 at javax.faces.webapp.FacesServlet.service(FacesServlet.java:189) 
 at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1147) 
 at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:722) 
 at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:449) 
 at com.ibm.ws.webcontainer.servlet.ServletWrapperImpl.handleRequest(ServletWrapperImpl.java:178) 
 at com.ibm.ws.webcontainer.filter.WebAppFilterManager.invokeFilters(WebAppFilterManager.java:1020) 
 at com.ibm.ws.webcontainer.webapp.WebApp.handleRequest(WebApp.java:3639) 
 at com.ibm.ws.webcontainer.webapp.WebGroup.handleRequest(WebGroup.java:304) 
 at com.ibm.ws.webcontainer.WebContainer.handleRequest(WebContainer.java:950) 
 at com.ibm.ws.webcontainer.WSWebContainer.handleRequest(WSWebContainer.java:1659) 
 at com.ibm.ws.webcontainer.channel.WCChannelLink.ready(WCChannelLink.java:195) 
 at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleDiscrimination(HttpInboundLink.java:452) 
 at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleNewRequest(HttpInboundLink.java:511) 
 at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.processRequest(HttpInboundLink.java:305) 
 at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.ready(HttpInboundLink.java:276) 
 at com.ibm.ws.tcp.channel.impl.NewConnectionInitialReadCallback.sendToDiscriminators(NewConnectionInitialReadCallback.java:214) 
 at com.ibm.ws.tcp.channel.impl.NewConnectionInitialReadCallback.complete(NewConnectionInitialReadCallback.java:113) 
 at com.ibm.ws.tcp.channel.impl.AioReadCompletionListener.futureCompleted(AioReadCompletionListener.java:165) 
 at com.ibm.io.async.AbstractAsyncFuture.invokeCallback(AbstractAsyncFuture.java:217) 
 at com.ibm.io.async.AsyncChannelFuture.fireCompletionActions(AsyncChannelFuture.java:161) 
 at com.ibm.io.async.AsyncFuture.completed(AsyncFuture.java:138) 
 at com.ibm.io.async.ResultHandler.complete(ResultHandler.java:204) 
 at com.ibm.io.async.ResultHandler.runEventProcessingLoop(ResultHandler.java:775) 
 at com.ibm.io.async.ResultHandler$2.run(ResultHandler.java:905) 
 at com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1648) 

Error Page Exception: 
Error Message: java.lang.RuntimeException: FacesContext not found
Error Code: 0
Target Servlet: 
Error Stack: 
java.lang.RuntimeException: FacesContext not found 
 at javax.faces.webapp.UIComponentClassicTagBase.getFacesContext (UIComponentClassicTagBase.java:324) 
 at javax.faces.webapp.UIComponentClassicTagBase.setJspId(UIComponentClassicTagBase.java:226) 
 at com.ibm._jsp._ErrorPage._jspx_meth_f_view_0(_ErrorPage.java:416) 
 at com.ibm._jsp._ErrorPage._jspService(_ErrorPage.java:103) 
 at com.ibm.ws.jsp.runtime.HttpJspBase.service(HttpJspBase.java:99) 
 at javax.servlet.http.HttpServlet.service(HttpServlet.java:668) 
 at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1147) 
 at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:722) 
 at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:449) 
 at com.ibm.ws.webcontainer.servlet.ServletWrapperImpl.handleRequest(ServletWrapperImpl.java:178) 
 at com.ibm.wsspi.webcontainer.servlet.GenericServletWrapper.handleRequest(GenericServletWrapper.java:122) 
 at com.ibm.ws.jsp.webcontainerext.AbstractJSPExtensionServletWrapper.handleRequest(AbstractJSPExtensionServletWrapper.java:205) 
 at com.ibm.ws.webcontainer.filter.WebAppFilterManager.invokeFilters(WebAppFilterManager.java:1020) 
 at com.ibm.ws.webcontainer.webapp.WebAppRequestDispatcher.dispatch(WebAppRequestDispatcher.java:1382) 
 at com.ibm.ws.webcontainer.webapp.WebAppRequestDispatcher.forward(WebAppRequestDispatcher.java:191) 
 at com.ibm.ws.webcontainer.webapp.WebApp.sendError(WebApp.java:3143) 
 at com.ibm.ws.webcontainer.webapp.WebApp.handleException(WebApp.java:3669) 
 at com.ibm.ws.webcontainer.webapp.WebApp.handleRequest(WebApp.java:3650) 
 at com.ibm.ws.webcontainer.webapp.WebGroup.handleRequest(WebGroup.java:304) 
 at com.ibm.ws.webcontainer.WebContainer.handleRequest(WebContainer.java:950) 
 at com.ibm.ws.webcontainer.WSWebContainer.handleRequest(WSWebContainer.java:1659) 
 at com.ibm.ws.webcontainer.channel.WCChannelLink.ready(WCChannelLink.java:195) 
 at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleDiscrimination(HttpInboundLink.java:452) 
 at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleNewRequest(HttpInboundLink.java:511) 
 at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.processRequest(HttpInboundLink.java:305) 
 at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.ready(HttpInboundLink.java:276) 
 at com.ibm.ws.tcp.channel.impl.NewConnectionInitialReadCallback.sendToDiscriminators(NewConnectionInitialReadCallback.java:214) 
 at com.ibm.ws.tcp.channel.impl.NewConnectionInitialReadCallback.complete(NewConnectionInitialReadCallback.java:113) 
 at com.ibm.ws.tcp.channel.impl.AioReadCompletionListener.futureCompleted(AioReadCompletionListener.java:165) 
 at com.ibm.io.async.AbstractAsyncFuture.invokeCallback(AbstractAsyncFuture.java:217) 
 at com.ibm.io.async.AsyncChannelFuture.fireCompletionActions(AsyncChannelFuture.java:161) 
 at com.ibm.io.async.AsyncFuture.completed(AsyncFuture.java:138) 
 at com.ibm.io.async.ResultHandler.complete(ResultHandler.java:204) 
 at com.ibm.io.async.ResultHandler.runEventProcessingLoop(ResultHandler.java:775) 
 at com.ibm.io.async.ResultHandler$2.run(ResultHandler.java:905) 
 at com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1648) 
                                                                                        and i am using jsf1.2 
```

如何将异常定向到 errorpage.jsp，我不希望 jsf 处理超时异常，因为我需要关闭浏览器并重新启动。所以请建议我一种处理这个异常的方法，我正在使用 jsf1.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T20:53:28.590

出于某种原因，上面的标签在 web.xml 中不起作用，试图找出原因，但不能。

为了解决这个问题，我编写了一个 Listener 类并在“Facesconfig.xml”中注册了 Listener 类，如下所示

```
 <lifecycle>
<phase-listener>com.bcbsks.me.sc00.listeners.ErrorPageNavigationListener</phase-  listener>
</lifecycle> 
```

这里“ErrorPageNAvigationListener 是Listener 类，Listener 类中的代码如下。

```
public class ErrorPageNavigationListener implements PhaseListener{

/**
 * 
 */
private static final long serialVersionUID = 1L;

String HOME_PAGE = "../sc00/TimeOutPage.faces";

@Override
public void afterPhase(PhaseEvent event) {
    FacesContext facesContext = event.getFacesContext();
     if(facesContext.getViewRoot()==null){   
       try{   
           facesContext.getExternalContext().redirect(HOME_PAGE);                   
           facesContext.responseComplete(); 

         } catch (IOException e){   
           e.printStackTrace();   
       } 
     }
}

@Override
public void beforePhase(PhaseEvent event) {
    // TODO Auto-generated method stub

}

@Override
public PhaseId getPhaseId() {
    // TODO Auto-generated method stub
    return PhaseId.RESTORE_VIEW;

}   
} 
```

HOME_PAGE 是错误页面的路径，它对我来说很好用。

# delphi - 如何修复 DBGrid 中的所有者绘制异常？

> ID：13297508
> 
> 赞同：0
> 
> 时间：2012-11-08T20:44:30.743
> 
> 标签：delphi, delphi-2006, dbgrid

继续项目开始于：

[如何根据其内容自动调整/缩放 DBGrid 的（或其他类似的）列宽？](https://stackoverflow.com/questions/13292937/how-to-auto-fit-dbgrid-or-other-similar-columns-with-its-contents)

我使用@alzaimar 答案根据内容宽度自动调整列，但他向我展示了如何增加宽度，而不是如何减少宽度，所以我补充了如上所示的代码：

```
procedure TRecordsBrowserFrameBase.JvDBGrid2DrawColumnCell(Sender: TObject; const Rect: TRect; DataCol: Integer; Column: TColumn; State: TGridDrawState);
var
  h, p, g, r, w, t : Integer;
const
  colSpc = 10;
begin
{ ajusta as colunas de uma grade de acordo com o conteúdo das células }
  h := Column.DropDownRows;
  p := (Sender as TJvDBGrid).CurrentDrawRow;
  g := Column.Width;
  r := (Sender as TJvDBGrid).VisibleRowCount;
  w := colSpc + (Sender as TJvDBGrid).Canvas.TextExtent(Column.Field.DisplayText).cx;
  t := colSpc + (Sender as TJvDBGrid).Canvas.TextExtent(Column.Title.Caption).cx;
{$WARNINGS OFF}
  // increase column width if needed
  if (w > g) then Column.Width := w;
  if (g < t) then Column.Width := t;
  if (p < r) and (h < w) then Column.DropDownRows := w;
  // decrease column size if needed (10th line)
  if (p = r) then
  begin
    h := Column.DropDownRows;
    g := Column.Width;
    if (h > t) and (h < g) then Column.Width := Column.DropDownRows;
    Column.DropDownRows := 0;
  end;
{$WARNINGS ON}
end; 
```

因此，现在当我使用向下箭头键滚动时，所选行的颜色并不总是在正确的位置，如您在这张图片中看到的：

![在此处输入图像描述](../Images/21147b4dae269ffbface48d8b4f19554.png)

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T22:17:17.677

该解决方案使所有列根据其内容进行扩展或收缩，而不关心是否必须有滚动条，并修复选定单元格绘制故障和记录指针故障。

```
type
  TColumnAutoAdjust = record {Save the information responsible for setting column widths in the grid}
    Field: String;           {Field name whose information is being stored}
    Registered: Boolean;     {Indicates whether the size of this column already registered}
    Updated: Boolean;        {Indicates the actual size of the column was updated}
    LastWidth: Integer;      {Width indicates the final text of a record of a row column}
    CurrWidth: Integer;      {Indicates the current size and column width}
    Reverter: Integer;       {Indicates the greatest width recorded but that is less than the current}
    Scrolls: Integer;        {Indicates the amount of scrolls present after one width adjustment}
    RecNo: Integer;          {Indicates which was the record in the table which increased the width of colune}
  end;

var { inside the forms private }
  gdCols: array of TColumnAutoAdjust; { vetor de ajuste de largura de cada coluna na grade de resultado }
  RegisteredCols: Integer; { quantas colunas já foram registradas no controle de ajuste }
  gdVisibleRows: Integer; { quantas linhas de cadastros estão visíveis da grade de resultado }
  gdVisibleCols: Integer; { quantas colunas de cadastros estão visíveis da grade de resultado }

{ before showing the grid }  
    RegisteredCols := ResultGrid.Columns.Count;
    SetLength(gdCols, RegisteredCols); { determina o tamanho da vetor de controle de colunas }
    { libera a lista }
    ResultGrid.Align := alClient;
    for i := 0 to RegisteredCols -1 do { inicializando a largura das colunas no tamanho do título de cada }
    begin
      gdCols[i].Field := ResultGrid.Columns[i].FieldName;
      ResultGrid.Columns[i].Width := ResultGrid.Canvas.TextExtent(ResultGrid.Columns[i].Title.Caption).cx;
      ResultGrid.Columns[i].Alignment := taLeftJustify;
      ResultGrid.Columns[i].Title.Alignment := taLeftJustify;
    end;
    BrowserQuery.Open;
    ResultGrid.Show;
    for i := 0 to gdVisibleRows do
    begin
      BrowserQuery.Next;
      ResultGrid.Refresh;
    end;
    for i := 0 to gdVisibleRows do
    begin
      BrowserQuery.Prior;
      ResultGrid.Refresh;
    end;
    BrowserQuery.First;
    ResultGrid.SetFocus;
  end

{ after dataset scroll}      
procedure TRecordsBrowserFrameBase.BrowserQueryAfterScroll(DataSet: TDataSet);
var
  i, TitleWidth: Integer;
  mayAdjustAgain: Boolean; {  }
begin
{ ajusta as colunas da grade de resultado a cada movimento da tabela de resultado }
  mayAdjustAgain := False;
  for i := 0 to RegisteredCols -1 do
  begin
    if not gdCols[i].Updated then
    begin
      ResultGrid.Columns[i].Width := gdCols[i].CurrWidth;
      gdCols[i].Scrolls := 0;
      gdCols[i].Updated := True;
    end
    else
    begin
      Inc(gdCols[i].Scrolls);
      if (DataSet.RecNo > gdCols[i].RecNo + gdVisibleRows) or (DataSet.RecNo < gdCols[i].RecNo - gdVisibleRows) then
      begin
        TitleWidth := MaxColSpacing + ResultGrid.Canvas.TextExtent(ResultGrid.Columns[i].Title.Caption).cx;
        gdCols[i].LastWidth := gdCols[i].CurrWidth;
        gdCols[i].CurrWidth := IFX(gdCols[i].Reverter > TitleWidth, gdCols[i].Reverter, TitleWidth);
        gdCols[i].Reverter := IFX(gdCols[i].Reverter > TitleWidth, TitleWidth, 0);
        gdCols[i].Updated := False;
        mayAdjustAgain := True;
      end;
    end;
  end;
  if mayAdjustAgain then
  begin
    ResultGrid.Refresh;
    BrowserQueryAfterScroll(DataSet);
  end;
end;

{ on draw column cell }

procedure TRecordsBrowserFrameBase.GridColumnWidthAdjust(Sender: TObject; const Rect: TRect; DataCol: Integer; Column: TColumn; State: TGridDrawState);
var
  ColWidth, TextWidth, TitleWidth: Integer;
begin
{ ajusta a capitalização do texto das células }
  (Sender as TJvDBGrid).Canvas.Pen.Color := clWhite;
  (Sender as TJvDBGrid).Canvas.Rectangle(Rect);
  (Sender as TJvDBGrid).Canvas.TextOut(Rect.Left+2, Rect.Top+2, NameCase(Column.Field.DisplayText));
{ ajusta as colunas de uma grade de acordo com o conteúdo das células }
  gdVisibleRows := (Sender as TJvDBGrid).VisibleRowCount;
  gdVisibleCols := (Sender as TJvDBGrid).VisibleColCount;
  TitleWidth := MaxColSpacing + (Sender as TJvDBGrid).Canvas.TextExtent(Column.Title.Caption).cx;
  TextWidth := MaxColSpacing + (Sender as TJvDBGrid).Canvas.TextExtent(NameCase(Column.Field.DisplayText)).cx;
  ColWidth := Column.Width;
  {$WARNINGS OFF}
  if (TextWidth > gdCols[DataCol].Reverter) and (TextWidth < ColWidth) then gdCols[DataCol].Reverter := TextWidth;
  if (TextWidth > ColWidth) then { texto da célula é mais largo que a coluna }
  begin
    gdCols[DataCol].Registered := True;
    gdCols[DataCol].LastWidth := ColWidth;
    gdCols[DataCol].CurrWidth := TextWidth;
    gdCols[DataCol].Updated := False;
    gdCols[DataCol].RecNo := BrowserQuery.RecNo;
    gdCols[DataCol].Reverter := TitleWidth;
    Exit;
  end;
  if (ColWidth < TitleWidth) then { texto da célula é menor que o título da coluna }
  begin
    gdCols[DataCol].Registered := True;
    gdCols[DataCol].LastWidth := ColWidth;
    gdCols[DataCol].CurrWidth := TitleWidth;
    gdCols[DataCol].Updated := False;
    gdCols[DataCol].Reverter := TitleWidth;
    Exit;
  end;
{$WARNINGS ON}
end; 
```

# icu - 使用 icu4c 转换字符串？

> ID：13297509
> 
> 赞同：0
> 
> 时间：2012-11-08T20:44:31.943
> 
> 标签：icu

如何使用 icu4c 将字符串从一种编码转换为另一种编码？我已经搜索了几个小时，除了查看 uconv（与 icu4c 捆绑在一起的实用程序）的源代码外，没有找到任何东西，它`ucnv_open`在某些时候调用（它将编码作为参数）。我假设您可以使用结果`ucnv_open`以某种方式转换字符串...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T00:34:45.050

uconv 会帮助你，但也看到：

*   [http://userguide.icu-project.org/conversion](http://userguide.icu-project.org/conversion)
*   [http://icu-project.org/apiref/icu4c/ucnv_8h.html](http://icu-project.org/apiref/icu4c/ucnv_8h.html)
*   [http://source.icu-project.org/repos/icu/icu/trunk/source/samples/ucnv/convsamp.cpp](http://source.icu-project.org/repos/icu/icu/trunk/source/samples/ucnv/convsamp.cpp) （在您的 ICU 源代码树中也有一个更简单的示例）

# google-chrome - Flask-login 不记得 chrome 上的用户

> ID：13297512
> 
> 赞同：0
> 
> 时间：2012-11-08T20:44:49.277
> 
> 标签：google-chrome, login, flask

调用“login_user(user)”后，Flask-login 似乎不记得 chrome 中的用户。它适用于 safari 和其他浏览器，但不适用于 chrome。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T20:44:49.277

这可能是因为您在“localhost”或“testsite”域上进行开发，没有任何有效的顶级域。根据设计决定，Chrome 不会将 cookie 存储在“localhost”域中，这意味着不会将会话 cookie 存储在那里。请参阅： [http ://code.google.com/p/chromium/issues/detail?id=56211](http://code.google.com/p/chromium/issues/detail?id=56211)

解决方案是在您的 etc/hosts 文件上创建一个别名，例如：127.0.0.1 localhost.com

并在“localhost.com”域上工作。

# ruby-on-rails - 在 Rails 中的所有日志消息中添加用户 ID

> ID：13297513
> 
> 赞同：8
> 
> 时间：2012-11-08T20:44:50.507
> 
> 标签：ruby-on-rails, ruby, session, logging, authlogic

为了帮助跟踪用户操作以进行调试，我们正在考虑将会话的登录用户 ID 添加到每条日志消息（如果适用）。我们的堆栈由 Rails 和 Authlogic 组成。我尝试了几条不同的路线，但到目前为止，没有一条是 100% 成功的。

由于 Authlogic 不会将用户 ID 以纯文本形式存储在会话数据中，因此我们必须等待它被初始化。这仅在 ApplicationController 初始化并设置为活动的 Authlogic 控制器后才会发生。因此，我们不能依赖代码`config/application.rb`。在我看来，唯一的解决方案是稍后更换记录器。

我尝试通过子类化 Logger 并覆盖该`add()`方法来创建一个新的记录器类：

```
class UserLogger < Logger
  def add(severity, message = nil, progname = nil, &block)
    begin
      session = UserSession.find
    rescue
      return super(severity, message, progname, &block)
    end

    user = session.user if session

    if block_given? || !user
      return super(severity, message, progname, &block)
    end

    unless message.nil?
      message = "[#{user.id}] " + message
    end

    super severity, message, progname, &block
  end
end 
```

这似乎对日志前哨没有任何影响。我也尝试过使用 TaggedLogging，但这似乎不是一个好的解决方案，因为您必须将任何标记代码放入一个块中。

我还尝试`config.log_tags`通过给它一个 Proc 在应用程序配置中进行定义，但 Authlogic 抛出了相同的`Authlogic::Session::Activation::NotActivatedError`异常。试图捕捉这个异常会使 Ruby 进入一个非常奇怪的状态，在某处似乎是一个无限循环，并将我的 CPU 固定在 100%。

是否有一个简单的解决方案或我完全失踪的一个？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2017-01-11T12:29:30.403

无法`session`从对象访问`request`对象。但您可以访问`cookies`.

因此，在您的用户登录后添加此代码：

```
cookies.signed[:user_id] = @user.id 
```

并添加一个初始化器，如：

```
MyApp::Application.config.log_tags = [
    -> request { "user-#{request.cookie_jar.signed[:user_id]}" }
] 
```

现在您的所有日志都将具有`[user-980191314]`或`[user-]`前置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T07:11:51.377

我的项目也在使用自定义记录器，我们将它连接到 environment/production.rb 中。您是否在 production.rb 中设置 Rails 记录器？

```
config.logger = ActiveSupport::TaggedLogging.new(UserLogger.new) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-26T14:39:22.663

只需添加 Vedant 的答案。如果用户未登录，有时我们不需要打印任何内容。在这种情况下：

> config.log_tags = [Proc.new { |request| !request.cookie_jar.signed[:user_id].nil? ? “user_id：#{request.cookie_jar.signed[:user_id]}”：假}]

现在，当任何用户登录时，日志将在`[user_id: XXXXXXXXX]`前面添加，否则，将不会添加任何内容。

# java - Netbeans - 摆动绑定

> ID：13297522
> 
> 赞同：3
> 
> 时间：2012-11-08T20:45:33.567
> 
> 标签：java, swing, netbeans

我在 Windows 7 上使用 NetBeans IDE 7.2 创建 Java Swing 应用程序。

我使用这个 IDE 大约一个月了，因此我探索了它的许多功能。但是有一个特定的——称为*绑定*/*绑定*——我不知道它是做什么的。

这可以在*项目*选项卡中找到，当您创建 Java Swing 源代码时会显示该选项卡（例如，带有`File > New Project`）。将任何对象（例如 JSpinner）添加到 JFrame，然后右键单击它，它就是：*vinculate*选项。

那么，有人知道“绑定”的目的/效用是什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T18:20:15.037

我用谷歌搜索了一下，发现以下内容：

[http://www.formdev.com/jformdesigner/doc/ui/beans-binding/](http://www.formdev.com/jformdesigner/doc/ui/beans-binding/)

[http://forums.netbeans.org/topic1651.html](http://forums.netbeans.org/topic1651.html)

Java Bean，与绑定相关： [JavaBean 到底是什么？](https://stackoverflow.com/questions/3295496/what-is-a-java-bean-exactly)

基本上，绑定是具有以下内容的属性：我们有一个源和一个目标，我们希望**将**一个目标属性（来自 JTextField 的文本，来自 JCheckBox 的选定状态）与一些源属性（例如，一些 int 值，或一些字符串文本，甚至是一个标志/布尔值）。目标通常是一个 Swing 组件，源也可以是 Swing 组件，也可以是用户创建的自定义 Bean（可能是 Class，也可能不是）。

一个经典的例子是**将**JSlider 值（源）与 JTextField（目标）绑定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T01:49:24.770

嗯，它在[Netbeans 文档](http://netbeans.org/kb/docs/java/gui-binding.html)中有所描述。

# html - htaccess 在某些情况下重定向

> ID：13297523
> 
> 赞同：0
> 
> 时间：2012-11-08T20:45:44.063
> 
> 标签：html, .htaccess

我有一个 .htaccess 文件，它将任何请求重定向到 index.html：

但我想要，只有在有人要求的情况下

```
www.mypage.com/login 
```

他将重定向到位于

```
/html/login.html 
```

到目前为止我的文件：

```
RewriteBase /

RewriteCond %{REQUEST_FILENAME} !-f
Options +FollowSymlinks
RewriteEngine on
RewriteRule ^(.*)$ index.html [NC] 
```

如何实施？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T20:53:12.637

```
RewriteEngine on
RewriteBase /
Options +FollowSymlinks

RewriteRule ^/?login/?$ http://www.mypage.com/html/login.html [NC,R=301,L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule . index.html [NC] 
```

# ruby-on-rails - Hartl 的教程 Ch. 7 练习 3 没有关于存在的解释：真

> ID：13297524
> 
> 赞同：1
> 
> 时间：2012-11-08T20:45:43.933
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我对 Hartl 的 Ruby on Rails 教程第 7 章中的练习 3 完全感到困惑。我的问题是，为什么我们必须摆脱`presence: true`以防止错误重复。我们不需要那个密码吗？或者这是处理这个的那些事情之一`has_secure_password`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T20:56:00.050

`Validations`**对于密码的存在，自动添加**密码确认（使用“password_confirmation”属性）。你可以看到[has_secure_password](http://api.rubyonrails.org/classes/ActiveModel/SecurePassword/ClassMethods.html#method-i-has_secure_password)的 API 。

# c# - 通过json发送基类并在客户端转换为父类

> ID：13297527
> 
> 赞同：1
> 
> 时间：2012-11-08T20:49:25.767
> 
> 标签：c#, json, serialization, deserialization, signalr

我有两个班级`Group`和`Contact`.

它们都扩展了我的基类`ChatTarget`。

我正在使用 Signalr 将这些对象发送给我的客户。我的服务器发送并且我的客户端端点需要一个`ChatTarget`对象。在服务器上，我可以从`Contact`或来回`Group`投射`ChatTarget`。

将我的内容发送`ChatTarget`给我的客户后，我不再能够将 a 转换`ChatTarget`为它的任何扩展类。似乎 json 序列化正在破坏扩展属性并仅维护基本`ChatTarget`内容。

我如何才能保留`ChatTarget`回击客户端的能力？

# sql - 从表中检索列，然后将其插入到新表中

> ID：13297530
> 
> 赞同：0
> 
> 时间：2012-11-08T20:49:29.090
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我刚刚在 SQL 2008 中创建了一个表。这个表有两列。

```
CREATE TABLE [dbo].[MyTable]
(
[pkey] [bigint] not null,
[Number] [int]  not null
) 
```

现在我想在其中插入值。第一列可以从另一个表中获得`dbo.OldTable`。它有很多记录，我不想手动插入数据。第二列`Number`可以是`0`每一行中的一个。做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T20:51:45.190

您可以对表格数据进行批量处理。

```
INSERT INTO MyTable
(pkey, Number)
SELECT pkey, 0
FROM OtherTable 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-08T20:52:46.577

```
INSERT INTO [dbo].[MyTable](pkey, Number)
SELECT Column, 0
FROM dbo.OldTable 
```

# oauth - 如何使用 WS-Federation 和使用 OAuth 2.0 的 REST API 协调 Salesforce SSO？

> ID：13297535
> 
> 赞同：2
> 
> 时间：2012-11-08T20:49:42.093
> 
> 标签：oauth, salesforce, single-sign-on

我正在开发由 Silverlight 应用程序和 REST API 组成的 Web 应用程序。一个可选用例是客户可能还希望与 Salesforce 集成。“集成”是指在登录我的应用程序以及通过 Salesforce 的 REST API 访问数据时将 SSO 与 Salesforce 结合使用。目前我似乎无法克服的障碍是 SSO 使用 WS-Federation，而 Salesforce 的 REST API 使用 OAuth 2.0。将这两种身份验证机制结合在一起的最佳方式是什么？

我的下意识反应是我的联合提供商 STS 从 Salesforce 获取 OAuth 访问令牌，并将其添加为从 Salesforce 的身份提供商 STS 收到的安全令牌的声明，但我认为这可能需要我编写自定义 STS。我宁愿不那样做。有没有更好的办法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-01T18:34:05.520

这个问题很老，但经常出现，所以......现在有关于如何在此处执行此操作的信息

[配置 SSO 到 SharePoint](http://wiki.developerforce.com/page/Configuring-SSO-to-SharePoint)

这种方法使用 WS-Fed。

# sql - SQL Server 和类型的隐式转换

> ID：13297547
> 
> 赞同：6
> 
> 时间：2012-11-08T20:49:58.733
> 
> 标签：sql, sql-server

SQL Server在哪里做隐式转换，遵循什么规则？IE什么时候将相等运算符的左侧转换为右侧？

```
富吧
id int 不为空
数量 int 不为空
数量测试字节不为空
日期 varchar(20) 不为空
日期测试日期时间
```

```
SELECT id
FROM Foobar
WHERE quantity > '3'

SELECT id
FROM foobar
WHERE quantityTest > 3

Select id
FROM foobar
WHERE date = 20120101 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-08T21:20:58.820

这是您在[DataType Precedence之后的列表](http://msdn.microsoft.com/en-us/library/ms190309.aspx)

在您的示例中：

```
WHERE quantity > '3' 
```

'3' 被强制转换为 int，匹配数量

```
WHERE quantityTest > 3 
```

无需铸造

```
WHERE date = 20120101 
```

20120101*作为一个数字*被转换为一个太大的日期。例如

```
select cast(20120101 as datetime) 
```

这不同于

```
WHERE date = '20120101' 
```

可以将日期*作为字符串*转换的地方。

如果您将[CAST 和 CONVERT 引用](http://msdn.microsoft.com/en-us/library/ms187928.aspx)的三分之一转到隐式转换部分，则有一个允许的隐式转换表。仅仅因为它被允许并不意味着它会起作用，例如（20120101 -> datetime）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-08T21:45:10.317

[MSDN 上](https://docs.microsoft.com/en-us/sql/t-sql/functions/cast-and-convert-transact-sql)有一个图表（如下所示），它显示了 SQL Server 系统提供的数据类型所允许的所有显式和隐式数据类型转换。它还解释了不允许的转换等。

它解释了

```
-Explicit Conversions
-Implicit Conversions
-Conversions not allowed
... 
```

[![数据类型转换表sql](../Images/dae6986d156061d775ccde22ef264c17.png)](https://i.stack.imgur.com/Opeuc.png)

# javascript - Codemirror 中的实时预览忽略了格式

> ID：13297551
> 
> 赞同：2
> 
> 时间：2012-11-08T20:50:09.307
> 
> 标签：javascript, markdown, codemirror, live-preview

我遇到了 Codemirror 的问题，其中实时预览模式不适用于 Markdown。我基本上只是想达到与 SO 相同的效果。就目前而言，实时预览适用于 HTML，但不适用于 Markdown。我已经关注了几个演示并尝试了一些没有运气的事情，我在这里作为最后的手段。以下是相关代码：

**在我正在加载的文档的开头：**

```
<script src="editor/lib/codemirror.js"></script>
<link rel="stylesheet" href="editor/lib/codemirror.css">
<script src="editor/lib/util/overlay.js"></script>
<script src="editor/mode/markdown/markdown.js"></script> 
```

*注意*：我在一个名为`editor`. 这是与我所做的正常设置的唯一真正偏差。

然后在`<body>`我的文档中，我有一个`<form`> 有 2 个元素：

`<textarea id="content" name="content"></textarea>` 和 `<iframe id="preview"></iframe>`

然后在我的页面底部运行以下 JavaScript（顺便说一下，我也在使用 jQuery 1.8.2）：

```
// Initialize the editor when document finishes loading
    jQuery(document).ready(function() {
        var delay;
    var editor = CodeMirror.fromTextArea(document.getElementById("content"), {
        lineNumbers: false,
        mode: 'markdown',
        matchBrackets: false,
        theme: "ambiance",
        onChange: function() {
          clearTimeout(delay);
          delay = setTimeout(updatePreview, 300);
        }
        });

    // Initialize the live-preview mode
    function updatePreview() {
        var previewFrame = document.getElementById('preview');
        var preview =  previewFrame.contentDocument ||  previewFrame.contentWindow.document;
        preview.open();
        preview.write(editor.getValue());
        preview.close();
        }
        setTimeout(updatePreview, 300);
    }); 
```

我无法弄清楚我做错了什么。我尝试将覆盖模式与 XML 一起加载，但无济于事。我在这里找到了 2 个帖子，但它们并不完全相关，而且代码对我不起作用。实时预览正在显示和更新，但问题是我只得到一个没有格式的文本字符串。

因此，例如，以下 Markdown：# Heading 1

```
A paragraph with __bold__ *text*.

And [a link](http://example.com) 
```

将完全按照我在此处键入的内容在实时预览 iframe 中输出：

`# Heading 1 A paragraph with __bold__ *text*.And [a link](http://example.com)`

它不会将下划线或星号变为粗体或斜体文本，并且完全忽略换行符。

关于出了什么问题的任何想法？我什至无法修改演示以使其正常工作。我一定是缺少一些知识。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T07:28:07.483

浏览器不显示降价，它们显示 HTML。您必须添加一个步骤，使用例如[https://github.com/chjj/marked](https://github.com/chjj/marked)将它们转换为 HTML 。

# arrays - 用printf打印char指针char数组？

> ID：13297553
> 
> 赞同：4
> 
> 时间：2012-11-08T20:50:13.467
> 
> 标签：arrays, pointers, character, printf

我正在尝试打印整个单词，而不仅仅是第一个字母。我可以用循环来做到这一点，但我认为有更好的方法。我四处寻找，看到他们将 %S 更改为 %c 的答案，但我已经在使用 %c 了，因为它是一个字符数组。

```
char* words[] = {"my", "word", "list"};
printf("The word: %c",*words[2]);

Results:
The word: l 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-08T20:54:43.413

问题是您取消引用了两次。*words[2] 中的 [2] 从 words[] 取消引用到 "list" 然后 * 再次从 "list" 取消引用到 'l' 删除 * 和瞧。

```
char* words[] = {"my", "word", "list"};
printf("The word: %s", words[2]); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-08T20:52:29.150

您需要使用`%s`，一种专门用于以空字符结尾的字符数组（即 C 字符串）的格式。将数组的元素传递给 时，您不会取消引用它`printf`，如下所示：

```
printf("The word: %s\n", words[2]); 
```

# php - 将表单条目绑定到 jquery 脚本到 .removeclass .addclass

> ID：13297556
> 
> 赞同：0
> 
> 时间：2012-11-08T20:50:18.377
> 
> 标签：php, jquery, forms

我动态生成了一个带有单个文本元素表单和一个数据表的 php 页面。表格的每一行都有一个条形码作为名称 ()。当我扫描表单中的每个条形码时，我想使用 jquery 更改行颜色。

php页面简化：

```
<form id="checkinProcess" class="mainForm" method="post" action="">
  <label>Barcode:</label>
  <input type="text" class="required" name="barocde" id="processBarcode"/>
  <input type="submit" value="submit" class="blueBtn" />
</form>

<table class="display" id="barcodeTable">
            <thead>
                <tr>
                    <th>Barcode</th>
                    <th>Amount</th>
                    <th>Code</th>
                </tr>
            </thead>
            <tbody>
                <tr id="B12345" class="odd">
                    <td>B12345</td>
                    <td>20.3</td>
                    <td>External</td>
                </tr>
                <tr id="B23456" class="even">
                    <td>B23456</td>
                    <td>19.6</td>
                    <td>Internal</td>
                </tr>
                <tr id="B34567" class="odd">
                    <td>B34567</td>
                    <td>22.0</td>
                    <td>Internal</td>
                </tr>
            </tbody>
        </table> 
```

表CSS：

```
tr.odd { background-color: #F9F9F9; }
tr.even { background-color: white; }
tr.curChecked {background-color: #33CC33; } 
```

jQuery尝试：

```
$('#checkinProcess').submit(function(e){
    e.preventDefault();
    $("tr.processBarcode").removeClass("odd" "even").addClass("curChecked");
}); 
```

如何将表单中扫描的条形码传递给我的 JQuery 以识别我想要更改的 tr 标签的类？我什至可以这样做吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T23:41:53.340

```
<script>tr.curChecked {background-color: #33CC33; } </script>

<form id="checkinProcess" class="mainForm" method="post" action="">
  <label>Barcode:</label>
  <input type="text" class="required" name="barocode" id="processBarcodes" />
  <input type="submit" value="submit" class="blueBtn" id="submitBtn" />
</form>

<div class="table">
  <table class="display" id="testTable">
    <thead class="tableheader">
      <tr><th>No</th><th>Name</th><th>Age</th><th>Salary</th></tr>
    </thead>
    <tbody id="testBody">
      <tr id="B000506" ><td>1</td><td>Abe</td><td>28</td><td>$100K</td></tr>
      <tr id="B000501" ><td>2</td><td>Jimmy</td><td>29</td><td>$90K</td></tr>
      <tr id="B000506" ><td>3</td><td>Dude</td><td>18</td><td>$50K</td></tr>
      <tr id="B000506" ><td>4</td><td>Boyee</td><td>28</td><td>$40K</td></tr>
    </tbody>
  </table>

<script>
  $(document).ready(function() {
    $("#submitBtn").on("click", highlight);

    function highlight(evt) {
      evt.preventDefault();
      var scanbc = $("#processBarcodes").val();
      $("#" + scanbc).addClass("curChecked");
      $("#processBarcodes").val('');
      $("#processBarcodes").focus();
</script> 
```

工作。

# asp.net - ASP.NET/SingleSignOn/SAML webapp 基于 URL 请求绕过登录屏幕

> ID：13297559
> 
> 赞同：1
> 
> 时间：2012-11-08T20:50:29.620
> 
> 标签：asp.net, web-applications, login, single-sign-on, saml

目前我们有一个典型的 Web 应用程序，所有客户端都使用他们的凭据访问和登录。

其中一位客户不想使用他们的凭据登录，而是他们将在 URL 中传递用户名、fname、lname，如果他们有账户，他们应该自动登录，否则我们需要即时创建用户帐户和登录。

Web 应用程序应该以相同的方式处理其他客户端。这怎么可能实现。我们是否需要使用任何单点登录方法（SAML 等）？

**需求概述：**

请求 URL -> 确定客户端是否为 A -> 如果是，则检查 url 中传递的值是否存在于数据库中 -> 如果是，则自动登录 -> 如果没有，则使用传递的值创建记录，然后将它们登录

---> 如果客户不是 A 则将他们带到登录屏幕

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T07:17:06.753

如果您打算仅根据某些 URL 值来决定是否允许自动登录，那么您在这里创建了一个非常严重的安全漏洞。

相反，您应该有一些可配置的机制，系统管理员将一些 IP 地址映射到特定用户。这样，当用户请求页面时，您会检查请求来自的 IP 是否属于某个特定的客户端。如果是，则将他/她登录，否则将其发送到登录屏幕。这也是一个安全漏洞，但更小一些，因为人们只有在知道哪些 IP 映射到用户并使用某些 IP 欺骗软件之前才能获得访问权限。

可能您可以对 URL 键和 IP 映射进行双重检查，这将使其更加紧密。

最好的选择是使用单点登录技术，例如实时身份验证。但这需要更多的努力，并且仍然需要用户首次使用 live-id 登录。

编辑-->

如果您使用自定义身份验证机制，那么您有 2 个选项 1\. 更改您的登录页面以检测请求 IP 并为选定的用户自动登录 2\. 编写一个 http 处理程序，它将检查请求来自哪里并自动登录相应地选择用户。

我希望您了解我所说的“自动登录”所涉及的所有内容。例如设置会话变量/用户名，在页面上显示用户名等。

# ajax - Zend 上下文切换与布局

> ID：13297562
> 
> 赞同：2
> 
> 时间：2012-11-08T20:50:36.543
> 
> 标签：ajax, zend-framework, context-switch

我在 Zend 中使用上下文切换通过 XHR 在对话框中显示 HTML。

在我的整个应用程序中，我根据我所在的模块/控制器加载 CSS/脚本文件；一个例子是在用户模块的视图控制器中，我的应用程序将加载 css/user/view.css 脚本。

但是，由于我正在使用上下文切换，我的 metahead（我的布局的一部分）没有呈现（出于显而易见的原因），因此只有发出 XHR 请求的当前页面的样式可用。

有没有一种很好、干净的方式可以为 XHR 端点上的模块/控制器引入样式？

谢谢

# c# - 在 C# 中读取和解析 Json 文件

> ID：13297563
> 
> 赞同：323
> 
> 时间：2012-11-08T20:50:36.930
> 
> 标签：c#, json, parsing, large-files

我花了两天时间“花时间”处理代码示例等，试图将一个非常大的 JSON 文件读入 c# 中的数组，以便以后可以将其拆分为二维数组进行处理。

我遇到的问题是我找不到任何人在做我想做的事情的例子。这意味着我只是在编辑代码，希望能做到最好。

我已经设法得到一些工作，将：

*   读取文件 Miss out headers 并且只将值读入数组。
*   在数组的每一行上放置一定数量的值。（所以我可以稍后将其拆分为二维数组）

这是使用下面的代码完成的，但是在向数组中输入几行后它会使程序崩溃。这可能与文件大小有关。

```
// If the file extension was a jave file the following 
// load method will be use else it will move on to the 
// next else if statement
if (fileExtension == ".json") 
{
    int count = 0;
    int count2 = 0;
    int inOrOut = 0;
    int nRecords=1; 
    JsonTextReader reader = new JsonTextReader(new StreamReader(txtLoaction.Text));
    string[] rawData = new string[5];
    while (reader.Read())
    {
        if (reader.Value != null)
            if (inOrOut == 1)
            {
                if (count == 6)
                {
                    nRecords++;
                    Array.Resize(ref rawData, nRecords);
                    //textBox1.Text += "\r\n";
                    count = 0;
                }
                rawData[count2] += reader.Value + ","; //+"\r\n"
                inOrOut = 0;
                count++;
                if (count2 == 500)
                {
                    MessageBox.Show(rawData[499]);
                }
            }
            else
            {
                inOrOut = 1;
            }
    } 
} 
```

我正在使用的 JSON 片段是：

```
[ 
    { "millis": "1000", 
      "stamp": "1273010254", 
      "datetime": "2010/5/4 21:57:34", 
      "light": "333", 
      "temp": "78.32", 
      "vcc": "3.54" }, 
] 
```

我需要这个 JSON 中的值。例如，我需要“3.54”，但我不希望它打印“vcc”。

我希望有人可以向我展示如何读取 JSON 文件并仅提取我需要的数据并将其放入数组或稍后我可以使用的东西放入数组中。

* * *

## 回答 #1

> 赞同：606
> 
> 时间：2012-11-08T21:18:01.757

[使用Json.NET](https://www.newtonsoft.com/)让一切变得更容易怎么样？

```
 public void LoadJson()
    {
        using (StreamReader r = new StreamReader("file.json"))
        {
            string json = r.ReadToEnd();
            List<Item> items = JsonConvert.DeserializeObject<List<Item>>(json);
        }
    }

    public class Item
    {
        public int millis;
        public string stamp;
        public DateTime datetime;
        public string light;
        public float temp;
        public float vcc;
    } 
```

您甚至可以在`dynamically`不声明`Item`类的情况下获取值。

```
 dynamic array = JsonConvert.DeserializeObject(json);
    foreach(var item in array)
    {
        Console.WriteLine("{0} {1}", item.temp, item.vcc);
    } 
```

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2012-11-08T20:52:11.757

自己做这件事是个糟糕的主意。使用[Json.NET](https://github.com/JamesNK/Newtonsoft.Json)。如果他们有几个月的时间来解决这个问题，它已经比大多数程序员更好地解决了这个问题。至于您的特定需求，解析成数组等，请查看[文档](http://james.newtonking.com/projects/json/help/)，特别是在`JsonTextReader`. 基本上，Json.NET 原生处理 JSON 数组，并将它们解析为字符串、整数或任何类型的类型，而无需您提示。 [这](http://james.newtonking.com/projects/json/help/html/ReadingWritingJSON.htm)是读者和作者的基本代码用法的直接链接，因此您可以在学习使用它时在备用窗口中打开它。

这是最好的：这次要偷懒，使用库，这样你就可以*永远解决这个常见问题。*

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2020-04-17T11:37:31.557

这也可以通过以下方式完成：

```
JObject data = JObject.Parse(File.ReadAllText(MyFilePath)); 
```

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2021-06-09T19:25:25.647

# .NET Core 的答案

您可以只使用内置`System.Text.Json`而不是 3rd-party `Json.NET`。为了促进重用，JSON 文件读取功能属于它自己的类，并且应该是通用的，而不是硬编码为某种类型 ( `Item`)。这是一个完整的例子：

```
using System;
using System.IO;
using System.Text.Json;
using System.Threading.Tasks;

namespace Project
{
    class Program
    {
        static async Task Main()
        {
            Item item = await JsonFileReader.ReadAsync<Item>(@"C:\myFile.json");
        }
    }

    public static class JsonFileReader
    {
        public static async Task<T> ReadAsync<T>(string filePath)
        {
            using FileStream stream = File.OpenRead(filePath);
            return await JsonSerializer.DeserializeAsync<T>(stream);
        }
    }

    public class Item
    {
        public int millis;
        public string stamp;
        public DateTime datetime;
        public string light;
        public float temp;
        public float vcc;
    }
} 
```

或者，如果您更喜欢更简单/同步的东西：

```
class Program
{
    static void Main()
    {
        Item item = JsonFileReader.Read<Item>(@"C:\myFile.json");
    }
}

public static class JsonFileReader
{
    public static T Read<T>(string filePath)
    {
        string text = File.ReadAllText(filePath);
        return JsonSerializer.Deserialize<T>(text);
    }
} 
```

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2018-06-19T21:26:23.637

基于@LB的解决方案，（键入`Object`而不是`Anonymous`）VB代码是

```
Dim oJson As Object = JsonConvert.DeserializeObject(File.ReadAllText(MyFilePath)) 
```

我应该提一下，这对于构建不需要类型的 HTTP 调用内容来说既快速又有用。并且使用`Object`而不是`Anonymous`意味着您可以`Option Strict On`在 Visual Studio 环境中维护 - 我讨厌将其关闭。

* * *

## 回答 #6

> 赞同：14
> 
> 时间：2019-07-05T06:09:23.313

```
string jsonFilePath = @"C:\MyFolder\myFile.json";

string json = File.ReadAllText(jsonFilePath);
Dictionary<string, object> json_Dictionary = (new JavaScriptSerializer()).Deserialize<Dictionary<string, object>>(json);

foreach (var item in json_Dictionary)
{
    // parse here
} 
```

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2019-10-08T14:41:37.083

对于任何 JSON 解析，请使用网站[http://json2csharp.com/](http://json2csharp.com/)（最简单的方法）将您的 JSON 转换为 C# 类，以将您的 JSON 反序列化为 C# 对象。

```
 public class JSONClass
 {
        public string name { get; set; }
        public string url { get; set; }
        public bool visibility { get; set; }
        public string idField { get; set; }
        public bool defaultEvents { get; set; }
        public string type { get; set; }        
 } 
```

然后使用 JavaScriptSerializer（来自 System.Web.Script.Serialization），以防您不想要任何第三方 DLL，如 newtonsoft。

```
using (StreamReader r = new StreamReader("jsonfile.json"))
{
   string json = r.ReadToEnd();
   JavaScriptSerializer jss = new JavaScriptSerializer();
   var Items = jss.Deserialize<JSONClass>(json);
} 
```

然后您可以使用 Items.name 或 Items.Url 等获取您的对象。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2018-01-25T13:52:05.593

为了找到我正在使用的正确路径

```
 var pathToJson = Path.Combine("my","path","config","default.Business.Area.json");
   var r = new StreamReader(pathToJson);
   var myJson = r.ReadToEnd();

   // my/path/config/default.Business.Area.json 
   [...] do parsing here 
```

> Path.Combine 使用 Path.PathSeparator 并检查第一个路径的末尾是否已经有分隔符，因此它不会重复分隔符。此外，它检查要组合的路径元素是否具有无效字符。

见[https://stackoverflow.com/a/32071002/4420355](https://stackoverflow.com/a/32071002/4420355)

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2021-06-17T13:59:41.473

有一种比Json.Net**更快的解析 json的方法。**如果您使用的是 .net core 3.0 或更高版本，则可以使用[System.Text.Json](https://www.nuget.org/packages/System.Text.Json) nuget 包进行序列化或反序列化。

您需要添加：

```
using System.Text.Json 
```

然后你可以序列化为：

```
var jsonStr = JsonSerializer.Serialize(model); 
```

并反序列化为：

```
var model = JsonSerializer.Deserialize(jsonStr); 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-08-10T08:48:01.150

此代码可以帮助您：

```
string _filePath = Path.GetDirectoryName(System.AppDomain.CurrentDomain.BaseDirectory);

JObject data = JObject.Parse(_filePath ); 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2021-07-11T13:47:39.643

有一种更简单的方法可以从文件或 Web 中获取 JSON： **Json.Net.Curl**

> 安装包 Json.Net.Curl

```
// get JObject from local file system 
var json = Json.Net.Curl.Get(@"data\JObjectUnitTest1.json");
var json = await Json.Net.Curl.GetAsync(@"data\JObjectUnitTest1.json")

// get JObject from Server  
var json = await Json.Net.Curl.GetAsync("http://myserver.com/data.json"); 
```

[GitHub 项目](https://github.com/kc85/Json.Net.Curl) [Nuget](https://www.nuget.org/packages/Json.Net.Curl/)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-09-21T16:40:44.393

使用[Cinchoo ETL](https://www.nuget.org/packages/ChoETL.JSON/)，一个开源库，解析非常大的 JSON 文件是迭代的和简单的使用

**1.动态方法：** - 不需要POCO类

```
 string json = @"
[
  {
    ""millis"": ""1000"",
    ""stamp"": ""1273010254"",
    ""datetime"": ""2010/5/4 21:57:34"",
    ""light"": ""333"",
    ""temp"": ""78.32"",
    ""vcc"": ""3.54""
  },
  {
    ""millis"": ""2000"",
    ""stamp"": ""1273010254"",
    ""datetime"": ""2010/5/4 21:57:34"",
    ""light"": ""333"",
    ""temp"": ""78.32"",
    ""vcc"": ""3.54""
  }
] 
";

        using (var r = ChoJSONReader.LoadText(json))
        {
            foreach (var rec in r)
                Console.WriteLine(rec.Dump());
        } 
```

小提琴示例：[https ://dotnetfiddle.net/mo1qvw](https://dotnetfiddle.net/mo1qvw)

**2\. POCO方法：**

定义POCO类匹配json属性

```
public class Item
{
    public int Millis { get; set; }
    public string Stamp { get; set; }
    public DateTime Datetime { get; set; }
    public string Light { get; set; }
    public float Temp { get; set; }
    public float Vcc { get; set; }
} 
```

然后使用解析器加载 JSON 如下

```
 string json = @"
[
  {
    ""millis"": ""1000"",
    ""stamp"": ""1273010254"",
    ""datetime"": ""2010/5/4 21:57:34"",
    ""light"": ""333"",
    ""temp"": ""78.32"",
    ""vcc"": ""3.54""
  },
  {
    ""millis"": ""2000"",
    ""stamp"": ""1273010254"",
    ""datetime"": ""2010/5/4 21:57:34"",
    ""light"": ""333"",
    ""temp"": ""78.32"",
    ""vcc"": ""3.54""
  }
] 
";

        using (var r = ChoJSONReader<Item>.LoadText(json))
        {
            foreach (var rec in r)
                Console.WriteLine(ChoUtility.Dump(rec));
        } 
```

小提琴示例：[https ://dotnetfiddle.net/fRWu0w](https://dotnetfiddle.net/fRWu0w)

免责声明：我是这个库的作者。

# javascript - iOS状态栏点击上的Javascript事件

> ID：13297565
> 
> 赞同：1
> 
> 时间：2012-11-08T20:50:42.400
> 
> 标签：javascript, ios, events, statusbar

通常，如果您点击 iOS 中的状态栏，当前显示的页面/列表会自动滚动到顶部。我想在我的网站中使用这种行为，所以如果用户点击状态栏，页面会滚动到顶部。我遇到的问题如下：列表只是一个`div`带有 的元素`overflow-y:scroll`，所以如果点击状态栏，它不会滚动。

我的想法是使用 javascript 进行滚动`scrollTo(0)`，但我需要知道何时点击状态栏。有这方面的活动吗？甚至是完全不同的方法（告诉 Safari 主要是什么

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-08T21:06:12.290

是的，API 中现在有触摸事件，[这](http://www.html5rocks.com/en/mobile/touch/#)是一个可能有用的站点。您可以捕获触摸开始、移动和结束的事件（您可能想要的）。这些事件中的大多数现在适用于大多数设备，但是由于您使用的是 IOS，所以您会很安全。

# java - EclipseLink 2.3.3 无法更新 PostgreSQL 上的版本化实体

> ID：13297567
> 
> 赞同：1
> 
> 时间：2012-11-08T20:50:46.443
> 
> 标签：java, postgresql, jpa, eclipselink

我有一个简单的实体（为简洁起见省略了一些不相关的字段）：

```
@Entity
@Table(name = "tenant")
public class Tenant {

    @Id
    private String id;

    @Version @Column
    private long version = 0;

    @Column(name = "init_in_progress")
    private Boolean initializationInProgress;

} 
```

我想通过设置`true`为`initializationInProgress`使用这样的 JPA 更新查询对所有租户进行批量更新：

```
 entityManager.createQuery(
            "UPDATE Tenant t " +
            "SET t.initializationInProgress = :ip")
        .setParameter("ip", initializationInProgress)
        .executeUpdate(); 
```

这适用于`EclipseLink 2.2.1`. 但是，当我尝试对 version 进行相同操作时`2.3.3`，会出现错误：

```
Caused by: Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.3.3.v20120629-r11760): org.eclipse.persistence.exceptions.DatabaseException
Internal Exception: org.postgresql.util.PSQLException: ERROR: more than one row returned by a subquery used as an expression
Error Code: 0
Call: UPDATE tenant SET version = (SELECT (version + ?) FROM tenant WHERE ID = tenant.ID), init_in_progress = ?
    bind => [1, true]
Query: UpdateAllQuery(referenceClass=Tenant sql="UPDATE tenant SET version = (SELECT (version + ?) FROM tenant WHERE ID = tenant.ID), init_in_progress = ?")
    at org.eclipse.persistence.exceptions.DatabaseException.sqlException(DatabaseException.java:333)
    at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.processExceptionForCommError(DatabaseAccessor.java:1494)
    at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.executeDirectNoSelect(DatabaseAccessor.java:838)
    at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.executeNoSelect(DatabaseAccessor.java:906)
    at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.basicExecuteCall(DatabaseAccessor.java:592)
    at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.executeCall(DatabaseAccessor.java:535)
    at org.eclipse.persistence.internal.sessions.AbstractSession.basicExecuteCall(AbstractSession.java:1717)
    at org.eclipse.persistence.sessions.server.ClientSession.executeCall(ClientSession.java:253)
    at org.eclipse.persistence.internal.queries.DatasourceCallQueryMechanism.executeCall(DatasourceCallQueryMechanism.java:207)
    at org.eclipse.persistence.internal.queries.DatasourceCallQueryMechanism.executeCall(DatasourceCallQueryMechanism.java:193)
    at org.eclipse.persistence.internal.queries.DatasourceCallQueryMechanism.executeNoSelectCall(DatasourceCallQueryMechanism.java:236)
    at org.eclipse.persistence.internal.queries.DatasourceCallQueryMechanism.updateAll(DatasourceCallQueryMechanism.java:789)
    at org.eclipse.persistence.queries.UpdateAllQuery.executeDatabaseQuery(UpdateAllQuery.java:153)
    at org.eclipse.persistence.queries.DatabaseQuery.execute(DatabaseQuery.java:844)
    at org.eclipse.persistence.queries.DatabaseQuery.executeInUnitOfWork(DatabaseQuery.java:743)
    at org.eclipse.persistence.queries.ModifyAllQuery.executeInUnitOfWork(ModifyAllQuery.java:145)
    at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.internalExecuteQuery(UnitOfWorkImpl.java:2871)
    at org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery(AbstractSession.java:1516)
    at org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery(AbstractSession.java:1498)
    at org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery(AbstractSession.java:1463)
    at org.eclipse.persistence.internal.jpa.EJBQueryImpl.executeUpdate(EJBQueryImpl.java:540)
    at com.example.dao.impl.tenant.TenantRepositoryImpl.updateAllTenantsInitializationStatus(TenantRepositoryImpl.java:100) 
```

有人熟悉这个错误吗？任何已知的解决方法/修复（除了不更改`EclipseLink`版本）？感谢你的帮助。

顺便说一句，我正在使用`PostgreSQL 9.1`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T01:42:35.737

这最初看起来像一个数据问题，其中您有多个具有相同 ID 的行`tenant`......但它实际上是 EclipseLink 查询的问题。由于这是一个生成的查询，您手上似乎有一个（严重的）EclipseLink 错误。

更新：请参阅[此 EclipseLink bugzilla 条目以了解错误 393223](https://bugs.eclipse.org/bugs/show_bug.cgi?id=393223)。

查询应该真正将内部引用别名为`tenant`，例如：

```
UPDATE tenant SET version = (SELECT (t2.version + ?) FROM tenant t2 WHERE t2.ID = tenant.ID), init_in_progress = ? 
```

未能添加此别名意味着`ID = tenant.ID`...`tenant.ID = tenant.ID`这始终是正确的，因此子查询匹配`tenant`.

观察这个演示：

```
CREATE TABLE tenant ( ID integer primary key, version integer );
INSERT INTO tenant ( id, version ) values (1,0), (2,0), (3,0);

BEGIN;

PREPARE testq(integer) AS 
UPDATE tenant SET version = (SELECT (version + $1) FROM tenant WHERE ID = tenant.ID);

regress=> EXECUTE testq(1);
ERROR:  more than one row returned by a subquery used as an expression

ROLLBACK; 
```

更正查询：

```
BEGIN;

PREPARE testq2(integer) AS 
UPDATE tenant SET version = (SELECT (version + $1) FROM tenant t2 WHERE t2.ID = tenant.ID);

regress=> EXECUTE testq2(1);
UPDATE 3

ROLLBACK; 
```

这似乎是一个 EclipseLink 错误。除了将批量更新作为本机 SQL 之外，我没有看到您可以在代码中做很多事情。

# database - oracle 11g odbc驱动在windows 7上安装oracle odbc驱动同名已经存在

> ID：13297568
> 
> 赞同：1
> 
> 时间：2012-11-08T20:50:47.093
> 
> 标签：database, windows, oracle, odbc

这些是步骤：

1.  下载：instantclient-basic-windows.x64-11.2.0.3.0.zip
2.  提取到 c:\instant_client_11_2
3.  下载：instantclient-odbc-windows.x64-11.2.0.3.0.zip
4.  提取到 c:\instant_client_11_2 （与步骤 2 相同的目录）
5.  通过 cmd：odbc_install
6.  获取“已存在同名的 oracle odbc 驱动程序”

我已经尝试在步骤 1 中使用 Instantclient-basiclite-windows.x64-11.2.0.3.0。得到同样的错误

有趣的事实：

*   我也安装了 XE 版本，将其卸载，手动删除 C:\oracleXE 文件夹，重新启动，重试步骤 1-6，但仍然没有乐趣。据我所知，我的机器上没有运行其他 oracle 产品（除了 java）。

*   使用视窗 7

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-08T15:19:03.290

> 通过 cmd*以管理员身份启动*：odbc_install

这应该可以解决问题并打印`Oracle ODBC Driver is installed successfully`

# git - Git-tfs 试图从旧的 tfs 服务器而不是我们的新服务器中提取

> ID：13297569
> 
> 赞同：5
> 
> 时间：2012-11-08T20:50:47.483
> 
> 标签：git, git-tfs

我的团队不久前将我们的 tfs 从旧服务器转移到了新服务器。我们正在使用 git tfs 来管理我们的本地更改并将它们推送到 tfs 中。

但是，当我像这样从 tfs 克隆现有存储库时遇到了问题

```
git tfs clone http://our.new.tfs/tfs $/project "myrepo" 
```

Git 能够连接到新服务器并将所有内容拉下来。然后我可以进行更改并毫无问题地提交它们。直到我尝试执行 a`git tfs pull`或`git tfs checkintool`此操作时，我才收到一条错误消息：

```
Unable to locate a remote for <http://our.old.tfs/tfs>$/project 
```

当我检查配置时，url被定义为`http://our.new.tfs/tfs`所以我不知道从旧服务器中提取的想法是从哪里得到的。

我尝试从配置文件中删除远程部分并执行`git tfs init [remote]`但仍然出现相同的错误。我什至刮掉了 repo 并从一个新的克隆开始，但仍然是同样的事情。它总是指向旧服务器而不是新服务器。

我一直在网上寻找几个小时，但没有找到解决方案。如果您能提供任何有用的建议，请告诉我！

先感谢您！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-08T20:58:40.680

我实际上找到了我的答案，所以我会在这里发布，以防其他人遇到同样的问题！

您必须将旧 url 添加到 legacy-urls 列表中，如下所示：

```
git config tfs-remote.default.legacy-urls http://your.old.url/ 
```

我希望这对将来已经或将要拔头发的人有所帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-11-17T09:37:29.740

或者编辑位于 .git 下的配置文件并将 url 更改为新位置并添加旧 url。

```
[tfs-remote "default"]
    url = http://your.new.url
    legacy-urls = http://your.old.url 
```

# python - assertRaises 未捕获异常

> ID：13297572
> 
> 赞同：0
> 
> 时间：2012-11-08T20:50:54.717
> 
> 标签：python, unit-testing

我有一个单元测试来检查构造函数中的异常：

```
import unittest
from jaboci import Jacobi

class TestJacobi(unittest.TestCase):

    def test_even(self):
        a = 11
        n = 12
        Jacobi(a, n)
        self.assertRaises(ValueError, Jacobi, a, n)

if __name__ == '__main__':
    unittest.main() 
```

被测类：

```
class Jacobi:

    def __init__(self, a, n):
        self.a = a
        self.n = n
        if n % 2 == 0:
            raise ValueError("N must be odd.") 
```

当我运行 unittest 时`-m unittest discover`，测试失败：

```
E
======================================================================
ERROR: test_even (test_jacobi.TestJacobi)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/home/prasopes/prg/python/PycharmProjects/jacobi_symbol/test_jacobi.py", line 9, in test_even
    Jacobi(a, n)
  File "/home/prasopes/prg/python/PycharmProjects/jacobi_symbol/jaboci.py", line 7, in __init__
    raise ValueError("N must be odd.")
ValueError: N must be odd.

----------------------------------------------------------------------
Ran 1 test in 0.000s

FAILED (errors=1) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T20:54:05.607

`Jacobi(a, n)`你之前打电话`self.assertRaises(ValueError, Jacobi, a, n)`。您得到的异常来自第一次调用，因此测试立即失败。它永远不会达到与`assertRaises`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T03:03:01.287

[因为我没有足够的代表来评论@mata的答案......]

为了清楚起见，您要么需要

*   删除`Jacobi(a, n)`[@mata 暗示]
*   或者，调用 'Jacobi(n, a)' [由@abarnert 对@mata 的评论提出]

# javascript - 如何在使用 jQuery 进行电子邮件验证的按键上添加另一个语句

> ID：13297574
> 
> 赞同：0
> 
> 时间：2012-11-08T20:50:59.597
> 
> 标签：javascript, jquery, html, jquery-ui

验证工作正常，如果输入了有效的电子邮件，如果无效则显示一个隐藏框，在覆盖层上显示消息错误，但如何检查 keydown 或 return？有什么想法吗？

这是我的代码，也可以[在 jsFiddle](http://jsfiddle.net/bKT9W/)中访问：

```
function validateEmail() {
    var validEmail = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;
    $('#user_email').blur(function(){
        if (validEmail.test(this.value)) {
            $('.masked-check').fadeIn(300)
        }
        else {
            $('.masked-check').fadeOut(300);
            $('.overlay').append('<div class="alert alert-error" id="errors"></div>');
            showOverlay($('#errors').html('Please enter a valid email...'));

        }
    }); 
}

validateEmail(); 
```

我不确定这是否是这样做的方法，但现在对我有用，唯一的问题是不听 keypress keyup 或 keydown。这是更新的[http://jsfiddle.net/creativestudio/bKT9W/3/](http://jsfiddle.net/creativestudio/bKT9W/3/)我不确定这是不是最好的方法，但现在有效。

```
 function validateEmail() {
        var validEmail = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;
        $('#user_email').blur(function(){

        $('.masked-check').hide();

            if (validEmail.test(this.value)) {
                $('.masked-check').fadeIn(300)
            }
            else {
                $('.masked-check').fadeOut(300);
                $('.overlay').append('<div class="alert alert-error" id="errors"></div>');
                showOverlay($('#errors').html('Please enter a valid email...'));
            }

            if ($('#user_email').val()=='') {
                $('.masked-check').hide()
            }

        }); 
    }

    validateEmail(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T21:20:02.047

我喜欢基于有效/无效输入的淡入/淡出的想法。

我玩了一下，以下似乎对我有用：http: [//jsfiddle.net/yc9Pj/](http://jsfiddle.net/yc9Pj/)

```
function validateEmail(){

    var validEmail = /^\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/;
    $('#user_email').keyup(function(){
    if (validEmail.test(this.value)) {
        $('.masked-check').fadeIn(300)
    }
    else {
        $('.masked-check').fadeOut(300);
        //alert('Please enter a valid email');                                
    }
    });    
}

validateEmail();​ 
```

请注意，我根据此回复为电子邮件调整了正则表达式：[Using a regular expression to validate an email address](https://stackoverflow.com/questions/201323/using-a-regular-expression-to-validate-an-email-address)

此外，keyup 对我来说效果最好，因为 keypress 没有处理退格（在这里找到的解决方案：[jQuery: keyPress Backspace won't fire?](https://stackoverflow.com/questions/4690330/jquery-keypress-backspace-wont-fire)）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T21:07:36.860

我相信您要实现的目标是在每次击键后运行电子邮件验证，并在其电子邮件有效或无效之前一直通知用户。

有一个 jQuery`.keypress()`事件来识别按键事件。

我在这里工作：http: [//jsfiddle.net/bKT9W/2/](http://jsfiddle.net/bKT9W/2/)

编辑：我相信彼得在下面的回答要好得多：[https ://stackoverflow.com/a/13298005/1415352](https://stackoverflow.com/a/13298005/1415352)

他建议了一个更好的正则表达式以及`.keyup()`解决使用时出现的退格问题的事件`.keypress()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T08:29:45.547

将您的函数“validateEmail”更改为以下内容：

```
function validateEmail(){

    var validEmail = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;
    $('#user_email').keydown(function(event){
        if (event.keyCode !== 13) {
            return;
        }
        if (validEmail.test(this.value)) {
            $('.masked-check').fadeIn(300)
        }
        else {
            //$('.masked-check').fadeOut(300);
            alert('Please enter a valid email');                                
        }
    });    
} 
```

# c# - AForge - 使用带有多个摄像头的视频卡

> ID：13297577
> 
> 赞同：2
> 
> 时间：2012-11-08T20:51:04.737
> 
> 标签：c#, video, camera, aforge

我可以让 AForge 使用 USB 网络摄像头，但我有一个可以连接多个摄像头的视频卡。如何让 AForge 与视频卡一起工作？

我的问题是我无法将`VideoInputDevice`to 设置为工作视频输入。

代码是这样的：

```
void init(){
    FilterInfoCollection videoCaptureDevice =
        new FilterInfoCollection(FilterCategory.VideoInputDevice);

    VideoCaptureDevice finalVideo =
        new VideoCaptureDevice(videoCaptureDevice[0].MonikerString);

    finalVideo.NewFrame += new NewFrameEventHandler(finalVideo_NewFrame);

    finalVideo.Start();
}

public void finalVideo_NewFrame(object sender, NewFrameEventArgs eventArgs)
{
    Bitmap temp = (Bitmap)eventArgs.Frame.Clone();
    pictureBox1.Image = temp;

} 
```

我也试过：

```
finalVideo = new VideoCaptureDevice();
finalVideo.CrossbarVideoInput = VideoInput.Default; 
```

它也没有工作。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T23:03:39.573

在你的代码中

`VideoCaptureDevice finalVideo = new VideoCaptureDevice(videoCaptureDevice[0].MonikerString);`

注册第一个设备 [0]
我假设如果您将 [1] 放在那里，您将获得第二个设备。

还要注意这一行

```
 finalVideo.NewFrame += new NewFrameEventHandler(finalVideo_NewFrame); 
```

在那里，您定义了当为该特定相机接收到新图像帧时应该触发的事件名称（finalvide_Newframe）。最简单的方法是注册两个不同的事件。所以每个相机 [0] 和 [1] 都会接收到自己的事件来显示它。

这里有一些额外的代码提示可能对您有所帮助，我用它来选择相机，这只是一个想法，如果您有多个外部相机（制作 2 个组合框）但不想使用例如笔记本电脑的内部凸轮。

```
VideoCaptureDevices = new FilterInfoCollection(FilterCategory.VideoInputDevice);

            foreach (FilterInfo VideoCaptureDevice in VideoCaptureDevices)
            {
                comboBox1.Items.Add(VideoCaptureDevice.Name);
            } // to get all your devices inside a combo box; 
```

你可以这样做

```
 FinalVideo = new VideoCaptureDevice(VideoCaptureDevices[comboBox1.SelectedIndex].MonikerString); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-13T12:55:41.130

当您下载整个软件包时，请查看 aforge 示例，有一个演示快照制作器，可与多个相机一起使用。

# java - Android - Log 类型的方法 i(String, String) 未定义

> ID：13297579
> 
> 赞同：4
> 
> 时间：2012-11-08T20:51:05.543
> 
> 标签：java, android, listview, logging, onitemclicklistener

我在 Main.Activity.java 中不断收到此错误。

```
 The Method i(String, String) is undefined for the type Log 
```

错误发生在这一行：

```
Log.i("HelloListView", "You clicked Item: " + id + " at position:" + position); 
```

我不知道出了什么问题，所以这是我的整个 MainActivity.java。如果有人可以提供帮助，那就太好了。

```
 package com.example.uc.pf;

import org.apache.commons.logging.Log;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.view.Window;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ListView;

public class MainActivity extends Activity implements OnItemClickListener {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.activity_main);

    //* *EDIT* * 
    ListView listview = (ListView) findViewById(R.id.listView1);
    listview.setOnItemClickListener(this);
}

public void onItemClick(AdapterView<?> l, View v, int position, long id) {
    Log.i("HelloListView", "You clicked Item: " + id + " at position:" + position);
        // Then you start a new Activity via Intent
        Intent intent = new Intent();
        intent.setClass(this, ListItemDetail.class);
        intent.putExtra("position", position);
        // Or / And
        intent.putExtra("id", id);
        startActivity(intent);
    }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-08T20:53:02.487

您正在导入`org.apache.commons.logging.Log;`. 改成[`android.util.Log`](http://developer.android.com/reference/android/util/Log.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T20:54:47.640

看起来您正在使用与原生 android 不同的日志记录功能：android.util.Log。如果您决定使用 apache，那么使用 Log.info(java.lang.Object message, java.lang.Throwable t) 应该可以。

# assembly - strlen 程序集为短字符串返回 6

> ID：13297583
> 
> 赞同：-1
> 
> 时间：2012-11-08T20:51:23.897
> 
> 标签：assembly, x86-64

上周在实验室中，我们必须在 x86_64 程序集中实现一个 strlen 函数。我完成了实验并获得了满分，但后来发现我的代码中有一个错误。对于长字符串，它可以正常工作，但对于长度为 1、2、3 或 4 的字符串，我的函数返回 6。我不明白为什么。下面是代码。

```
    。文本
        .globl mystrlen
  .type mystrlen, @function
  神秘人：
        movq $0, %rax #将 0 放入返回寄存器
        movq $0, %r15
        开始循环：
        cmpq $0, (%rdi) #while n!=0
        结束
        公司 %rax
        公司 %rdi
        movq $0, %r14
        cmpq $0, %r14 #回到开始
        我开始循环
      结尾： ＃
          ret # 返回结果；

```

现在我知道这不是实现 strlen 的好方法，而且我可以利用一些东西来提高效率，但我并不在乎。我只是想弄清楚为什么此代码对于长度为 1、2、3 或 4 的字符串返回 6。对于长度为 0 或大于 5 的字符串，它确实返回正确。请帮助我理解

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-27T22:47:54.340

Bo Persson 已经指出了问题所在。而不是使用 cmpq，您应该使用 cmpb（与字节相比）

# maven-3 - 如果使用 Jmeter Maven 插件执行 Jmeter 测试时出现错误，则不会生成 Jmeter 报告

> ID：13297586
> 
> 赞同：0
> 
> 时间：2012-11-08T20:51:42.193
> 
> 标签：maven-3, jmeter, jmeter-plugins, jmeter-maven-plugin

我正在使用 Jmeter Maven 插件运行 Jmeter 测试。运行测试后，我想生成简单的报告，指示测试是否通过/失败。我提到

[https://stackoverflow.com/questions/4669467/jmeter-how-to-create-summary-report-from-jtl-file?lq=1](https://stackoverflow.com/questions/4669467/jmeter-how-to-create-summary-report-from-jtl-file?lq=1)

用于生成报告。我添加了一个 shell 脚本来从 jmeter jtl 结果文件生成 html 报告。然后我使用 exec-maven 插件来执行脚本，然后生成 html 报告文件。到目前为止一切正常。我面临的问题是，如果其中一个 Jmeter 测试失败，则根本不会生成报告。因此，我假设 maven 一旦检测到测试套件中的错误并且不执行 exec-maven 插件并且因此根本不调用 shell 脚本，它就会退出。

有人可以给我这方面的指示吗？pom文件中是否有任何属性或我可以尝试解决的任何设置。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T11:07:49.433

您可以将**<ignoreResultFailures>**配置设置设置为 true 以使插件忽略失败并继续执行其他所有操作。

```
+---+
<project>
    [...]
    <build>
        <pluginManagement>
            <plugins>
                <plugin>
                    <groupId>${project.groupId}</groupId>
                    <artifactId>${project.artifactId}</artifactId>
                    <version>${project.version}</version>
                    <executions>
                        <execution>
                            <id>jmeter-tests</id>
                            <phase>verify</phase>
                            <goals>
                                <goal>jmeter</goal>
                            </goals>
                        </execution>
                    </executions>
                    <configuration>
                        <ignoreResultFailures>true</ignoreResultFailures>
                    </configuration>
                </plugin>
            </plugins>
        </pluginManagement>
    </build>
    [...]
</project>
+---+ 
```

# wcf - 遵循 WCF 绑定配置命名约定

> ID：13297591
> 
> 赞同：2
> 
> 时间：2012-11-08T20:51:59.587
> 
> 标签：wcf, wcf-binding

是否有人可以推荐用于 WCF 绑定配置的完善命名约定？例如，在检查 Microsoft 的 WCF/WF 示例时，使用了多种约定，包括：

*   绑定 + 序列号（例如“Binding1”）大部分时间使用
*   ProtocolName + Binding（例如“TcpBinding”）用于自定义绑定
*   QueueName + Binding（例如 OrderProcessorBinding）用于 msmq 绑定
*   在某些情况下使用绑定描述（例如“BindingWithSession”）

在我从事过的项目中绑定配置名称同样具有特殊性。如果一个人想要更大的一致性，是否有一个可以遵循的既定惯例？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T21:51:28.500

我想说真的没关系。选择一个适合您的约定，并在您自己的代码中保持一致。正如您已经指出的那样 - 您观察到的各个项目之间存在很多不一致之处。你可能会从你读过的其他代码中借鉴一些想法——但我认为重要的部分是在你自己的代码中保持一致。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T10:49:05.310

绑定是如何组装 WCF 通道堆栈的“配方”。

理论上，每次在 wcf 配置（或代码）中配置绑定配置部分时，您都在指定绑定所需的一些相当精确的行为。

因此，您的绑定名称应该真正描述您正在使用的“配方”。

例如，如果您正在修改发送超时以支持长时间运行的操作，这应该反映在您的绑定名称中。同样，如果您将绑定安全性设置为仅传输以实现互操作性，那么这也可能会反映出来。

绑定允许您指定广泛的行为，例如，您可能有一个与 activex 客户端一起使用的绑定，您可能需要为此选择一个替代格式化程序进行序列化。将此绑定命名为“Binding1”并不能真正解释它在做什么。

所以我认为绑定应该描述配方。

# c - C 在循环中获取开始时间和结束时间

> ID：13297592
> 
> 赞同：0
> 
> 时间：2012-11-08T20:52:02.497
> 
> 标签：c, pointers, time

我正在尝试遍历几个结构，每个结构都包含一个 timeval 结构。我希望能够获取第一个日期并将其存储在 START_DATE 全局变量中。我还想保存最后一次迭代的结构的日期。我通过在 END_DATE char* 中节省每次迭代的时间来做到这一点。

我遇到的问题是，即使 START_DATE = asctime(localtime(&curSec)); 仅被调用一次，每次循环迭代都会覆盖 START_TIME。

这里有任何人可以指出的问题吗？没有双关语的意思。

```
//Global
char *START_DATE = NULL;
char *END_DATE = NULL;

int main(int argc, char *argv[]) {

//start while loop that gets a new header struct each loop
time_t curSec = (time_t)header->ts.tv_sec;
    if (!START_DATE)
        START_DATE = asctime(localtime(&curSec));
    END_DATE = asctime(localtime(&curSec));
//end while loop

printf("Start Date: %s", START_DATE);
printf("End Date: %s", END_DATE);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T20:55:10.500

请参阅[asctime 参考](http://www.cplusplus.com/reference/clibrary/ctime/asctime/)：

> 保存此字符串的数组由 ctime 和 asctime 函数静态分配和共享。每次调用这些函数中的任何一个时，都会覆盖该数组的内容。

`asctime`总是返回相同的指针，指向它所拥有的内部缓冲区，所以`START_DATE`总是`END_DATE`指向同一个东西。

因此，每次调用该函数时，`START_DATE`和`END_DATE`所指向的字符串都会发生变化。

要获得不会被覆盖的字符串副本，您需要分配自己的缓冲区并将其复制到 using `strncpy`（或者`strcpy`如果您决定使用`malloc(strlen(START_DATE) + 1)`而不是`char buf[1024]`或类似的）。

# tsql - CRM 报告：按相关实体分组

> ID：13297593
> 
> 赞同：0
> 
> 时间：2012-11-08T20:52:04.067
> 
> 标签：tsql, dynamics-crm, dynamics-crm-2011, crm, dynamics-crm-4

联系人和投诉之间存在 N<>N 关系。

我的报告目前如下所示：

```
 Status 1    Status 2    Status 3    Status 4
         3           4           32          34 
```

使用以下查询：

```
SELECT 
    SUM(case WHEN status = 1 then 1 else 0 end) Status1,
    SUM(case WHEN status = 2 then 1 else 0 end) Status2,
    SUM(case WHEN status = 3 then 1 else 0 end) Status3,
    SUM(case WHEN status = 4 then 1 else 0 end) Status4,
    SUM(case WHEN status = 5 then 1 else 0 end) Status5
FROM [DB].[dbo].[Contact] 
```

这是列出每个状态下的联系人数量。我现在正在尝试对 CRM 中相关实体中的字段进行 GROUP BY - 投诉。

```
 Status 1    Status 2    Status 3    Status 4
Contact.Complaints.CreatedBy[1]             3           4           32          34
Contact.Complaints.CreatedBy[2]             3           4           32          34
Contact.Complaints.CreatedBy[3]             3           4           32          34
Contact.Complaints.CreatedBy[4]             3           4           32          34 
```

我不确定在我的 GROUP BY 语句中从哪里开始 - 任何指针都会很棒。我觉得我必须有另一个指向 NN 关系的 FROM 声明，或者至少是投诉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T11:16:15.387

它应该像向 Complaints（通过 N:N）表添加 JOIN 一样简单。我完全同意 James 的观点，只要确保您以 CRM 用户身份执行报告，否则过滤视图返回 0 行。

```
SELECT
MyComplaintType,
...existing Sum(Case) stuff

FROM
FilteredContacts c
JOIN
Filterednew_Contacts_new_Complaint_new_complaints r1 (whatever your N:N is)
  ON c.contactId = r1.contactId
JOIN
Filterednew_Complaint comp
  ON r1.new_complaintId = comp.new_complaintId
GROUP BY
MyComplaintType 
```

# python - 在python中自动更新变量列表

> ID：13297595
> 
> 赞同：2
> 
> 时间：2012-11-08T20:52:09.343
> 
> 标签：python, list

我玩python 2.7。这是我的问题：

```
>>> bra=[]
>>> put=['a','t']
>>> bra.append(put)
>>> bra
[['a', 't']]
>>> bra.append(put)
>>> bra
[['a', 't'], ['a', 't']]
>>> bra.append(put.reverse())
>>> bra
[['t', 'a'], ['t', 'a'], None] 
```

我的问题是：为什么 de python 解释器在最后一行给出这个结果，而不是这个：

```
[['a', 't'], ['a', 't'], ['t', 'a']] 
```

或者我怎样才能得到这个结果？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T20:55:49.817

两个问题：

1.  该`list.reverse`方法就地修改列表并且不返回任何内容（即返回`None`）。您可能想改用该[`reversed`](http://docs.python.org/2/library/functions.html#reversed)方法。
2.  列表中的前两个元素都`bra`引用同一个底层对象。因此，当您修改该对象时，前两个元素再次引用同一个修改后的对象，这就是您看到`['t', 'a']`前两个元素的原因。

如果要使用单独的对象而不是对同一对象的引用，可以使用切片运算符进行复制：

```
bra.append(put[:])  # Appends a copy of 'put' 
```

作为该方法的替代`reversed`方法，您还可以使用步长为 -1 的切片运算符来反转可迭代对象，尽管对某些人来说，代码在做什么并不那么明显：

```
bra.append(put[::-1])  # Equivalent to bra.append(reversed(put)) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-08T20:53:42.790

`list.reverse()`就地修改列表，不返回任何内容，相当于返回`None`.

你需要`reversed(put)`. [这个函数](http://docs.python.org/2/library/functions.html#reversed)确实返回了可迭代的反转版本。

# android - 不同分辨率的安卓屏幕

> ID：13297600
> 
> 赞同：0
> 
> 时间：2012-11-08T20:52:19.033
> 
> 标签：android, resolution, screens

我想开发一个支持不同屏幕尺寸的应用程序。

我已经阅读了很多次[官方指南](http://developer.android.com/guide/practices/screens_support.html)，但我无法理解这一点。我创建了一个带有主要活动的全新应用程序，然后我在屏幕上放置了一个 100dp x 100dp 尺寸的黑色方块，就像这样：

资源/布局/activity_main.xml：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <FrameLayout
        android:layout_width="100dp"
        android:layout_height="100dp"
        android:background="#000000"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
         />

</RelativeLayout> 
```

当我在我的模拟器上运行这个应用程序时 - 我得到这个屏幕： ![在此处输入图像描述](../Images/e279aa1ae97b8ffb4ee69b43b758bd4a.png)

当我在我的设备（Galaxy tab 2）上运行应用程序时，我会看到这样的屏幕： ![在此处输入图像描述](../Images/6a71f34ce35238de2860f15e50eb4592.png)

如您所见，在设备上运行的方块比在模拟器上运行的要小。

我在我的 XML 宽度和高度中使用 DP。正方形是否应该在所有分辨率中具有相同的比例？如果没有，我该怎么做才能让这个正方形在所有分辨率下都具有相同的大小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T20:56:30.627

是的，这可能会令人困惑。但是，不同的设备具有不同数量的“DP”。这样做的目的是让更大的屏幕可以容纳更多的内容。如果您使用图像，则可以为不同的屏幕密度提供不同的尺寸。

有关详细信息，请参阅此页面：http: [//developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

# ruby-on-rails - Zurb Foundation 单选按钮和复选框在 Rails 中不起作用

> ID：13297602
> 
> 赞同：3
> 
> 时间：2012-11-08T20:52:29.517
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2, zurb-foundation, css-frameworks

我已经使用他们的 gem 将基础安装到我的 Rails 项目中并运行以下 2 个命令：

```
rails g foundation:install
rails g foundation:layout 
```

一切似乎都很好，漂亮的 CSS 标记和网格布局。但是，我的单选按钮和复选框看起来并没有什么不同。[描述单选按钮和复选框](http://foundation.zurb.com/docs/forms.php#radEx)的页面说，“一旦初始化（他们指的`jquery.foundation.forms.js`是每个 Rails 页面中自动包含的），它将查找任何复选框、单选按钮或选择元素，并将其替换为 Foundation 提供的自定义标记样式。”

但是我的单选按钮和复选框看起来很标准，不像上面示例页面上漂亮的。他们建议`display: none;`使用一些自定义标记设置输入，以避免从普通按钮/复选框闪烁到基础按钮/复选框。那没有帮助。我什至从他们的示例网页复制并粘贴到我的网页！还是没有运气！我错过了什么吗？

我正在使用 Rails 3.2.8

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-10T23:14:25.143

问题是我需要将类添加`custom`到`form`元素中。显然，除了单选按钮和复选框之外，所有其他 Foundation 元素都可以在没有该类的情况下工作。

# java - 分发java应用程序

> ID：13297603
> 
> 赞同：5
> 
> 时间：2012-11-08T20:52:35.273
> 
> 标签：java

我最近开发了一些我希望其他人在他们的机器上运行的 java 应用程序。我做了一些研究，现在知道要分发 java 代码，您需要创建 .jar 文件。好吧，我做到了，但是当我分发这些文件时，它在某些计算机上运行，​​但在其他计算机上返回错误消息：“找不到主类”。

1.  JRE版本有问题吗？
2.  用户如何知道他/她应该在哪个版本上运行应用程序。
3.  我可以用我的 app/jar 文件打包正确的 jre 版本吗？如何？？
4.  jar 文件是否与其他版本的 jre 不兼容，除非它们在其中编译。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T21:00:56.583

选项1：创建一个清单文件，其条目如下并包含在jar中：

```
 Main-Class: MainProgram 
```

选项2：只需`Main`在运行程序时提及您的类名，例如，如果您的`jar`名字是`myprogram.jar`并且主类是`MainProgram`然后运行程序如下：

```
 java -cp myprogram.jar MainProgram 
```

如果您`MainProgram`接受一些参数，它们也会在命令行中传递它们，例如

```
 java -cp myprogram.jar MainProgram argument1 argument2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T21:12:23.230

一些 SDK（如 Eclipse）具有创建 jar 文件的功能。如果您使用控制台，这可能会帮助您创建稳定的 jar 文件：

'jar cfm className.jar MANIFEST.MF className.class'

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T21:13:47.703

1.  这应该无关紧要，除了第 4 点。
2.  您必须告诉他们所需的最低版本。
3.  你可以，但是你可能必须创建一个安装程序，这比 jar 更复杂。
4.  In general yes, if your user has a VM at least the version you compiled with. The class files that you package inside the jar are targeted to some version of the JRE and their format changes every now and then. Higher versions of the JRE support lower version class files.

The error message indicates that the JRE can't find your main class. From the comments it looks like you did not specify the manifest correctly. Is it contained inside a META-INF directory inside the jar? What does `jar -tf my_jar.jar` tell you?

If you're worried about JRE versions, try specifying a lower target version in your javac command. You do this by adding `-target xx` to your `javac` invocation and possibly also `-source xx`. Have a look at `javac -help` for a description of the flags.

# http - 为什么 Chrome 不向 docs.google.com 发出 HTTP 请求？

> ID：13297607
> 
> 赞同：1
> 
> 时间：2012-11-08T20:52:46.687
> 
> 标签：http, google-chrome

我注意到 Chrome 在某些情况下似乎不会向 docs.google.com 发出 HTTP 请求。

我在使用 Wireshark 捕获流量时做了什么：

*   访问 Google 文档，登录
*   关闭标签
*   清除缓存（缓存和托管应用程序）
*   访问[http://docs.google.com/](http://docs.google.com/)

我找不到对 docs.google.com 的单个 HTTP 请求，我看到的只是 SSL 流量。

我知道有像 SPDY、缓存清单和 DNS CNAME 之类的技术可能会干扰，但我没有想到可以真正使请求消失，尤其是在清除缓存之后。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T20:55:21.830

所有请求`http://docs.google.com`立即重定向到`https://docs.google.com/`. 这在 Chrome 中是硬编码的，称为[HSTS](http://dev.chromium.org/sts)。

# javascript - 在轴上手动定位刻度 - D3

> ID：13297610
> 
> 赞同：3
> 
> 时间：2012-11-08T20:53:03.510
> 
> 标签：javascript, d3.js

我正在使用 d3 制作一个图表，我想将我的 xAxis 上的刻度放在我指定的位置。例如，如果我想要以下位置的刻度，[-11,0,11,18,30,42]，我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T21:54:07.050

请参阅文档 - [`axis.tickValues()`](https://github.com/d3/d3-axis/blob/v1.0.12/README.md#axis_tickValues)。

# javascript - 当fancybox关闭时调用一个函数

> ID：13297611
> 
> 赞同：1
> 
> 时间：2012-11-08T20:53:07.217
> 
> 标签：javascript, jquery, fancybox

我想`parent.window.clearInterval(wpupdate)`在用户关闭“fancybox”时调用，方法是单击框架内的链接，或者单击它周围的区域。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T20:57:42.567

正如您在[文档](http://fancyapps.com/fancybox/%5D#docs)（*回调*选项卡）中可以找到的，有两种方法适合您：

1.  beforeClose
    在触发关闭但尚未开始后立即调用 注意：如果回调返回false，则关闭将停止。

2.  afterClose
    在关闭动画结束后调用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T21:00:38.353

从您指向的站点中，您可以选择以下回调选项：

beforeClose 在触发关闭但尚未开始后立即调用 注意：如果回调返回false，则关闭将停止。

afterClose 在关闭动画结束后调用

# javascript - 将此对象添加到数组中

> ID：13297612
> 
> 赞同：1
> 
> 时间：2012-11-08T20:53:08.533
> 
> 标签：javascript, this

> **可能重复：**
> [Javascript臭名昭著的循环问题？](https://stackoverflow.com/questions/1451009/javascript-infamous-loop-problem)

```
for (var i=0; i<songList.length; i++){
        test.init({
        });
}

var test = {
    init: function (params) {
        var my = this;

        var backend = WaveSurfer.Audio;

        if (!params.predrawn) {
            backend = WaveSurfer.WebAudio;
        }
        var id = playList.length;
        this.id = id;

        this.backend = Object.create(backend);
        this.backend.init(params);

        this.drawer = Object.create(WaveSurfer.Drawer);
        this.drawer.init(params);

        this.backend.bindUpdate(function () {
            my.onAudioProcess();
        });

        this.bindClick(params.canvas, function (percents) {
            my.playAt(percents);
        });

    playList.push(my); 
```

当我调试这个脚本时：我的第一个元素的 id 是 0；但是当我突然进入第二个循环时，两个 id 都变成了 1。这怎么可能？

![在此处输入图像描述](../Images/6340a283abb2a01c9a87a584b1c85d1a.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T20:56:26.000

因为第一次 playList 是空的，所以为什么播放列表的长度为零，但在 init 调用之后它有一个项目，所以 playList 的长度在第二次 init 调用时变为 1，所以 id 的值取决于 init 调用的数量。

由于您没有创建任何新对象，因此每次`my`都会引用相同的对象。因此任何更改都`my`将反映在播放列表中的所有推送项目中。

修改后的代码：如果你想在每个初始化调用中添加新项目

```
var test = {
    init: function (params) {
        var my = {};

        var backend = WaveSurfer.Audio;

        if (!params.predrawn) {
            backend = WaveSurfer.WebAudio;
        }
        var id = playList.length;
        my.id = id;

        my.backend = Object.create(backend);
        my.backend.init(params);

        my.drawer = Object.create(WaveSurfer.Drawer);
        my.drawer.init(params);

        my.backend.bindUpdate(function () {
            my.onAudioProcess();
        });

        my.bindClick(params.canvas, function (percents) {
            my.playAt(percents);
        });

    playList.push(my); 
```

# hibernate - 复合主键查询

> ID：13297617
> 
> 赞同：0
> 
> 时间：2012-11-08T20:53:31.870
> 
> 标签：hibernate, hibernate-criteria, composite-primary-key

我有一个复合主键。键又是两个实体。我想根据主键内的实体进行查询。

我的意图是查询像这样的主键

```
Criteria projCriteria = session.createCriteria(ProjectDetailsRO.class);
        projCriteria.createAlias("projectUsers", "projectUsers");
        projCriteria.add(Restrictions.eq("projectUsers.pk.users.email", leadUserEmail)); 
```

但我得到一个异常无法解析属性： pk.users.email of: com.ett.repository.ProjectUsers

我想根据用户（PK类）进行查询。如何为 PK 类 (UserDetailsRO) 中的实体提供别名。请帮忙..！！

实体和关系如下

```
@Entity
@Table(name="PROJECT_USERS")
@AssociationOverrides({
@AssociationOverride(name="pk.users", joinColumns=@JoinColumn(name="user_id")), 
@AssociationOverride(name="pk.project", joinColumns=@JoinColumn(name="project_id"))
})
public class ProjectUsers {

    private ProjectUserPK pk= new ProjectUserPK();

    @EmbeddedId
    public ProjectUserPK getPk() {
        return pk;
    }

    public void setPk(ProjectUserPK pk) {
        this.pk = pk;
    }

    @Transient
    public ProjectDetailsRO getProjects() {
        return getPk().getProject();
    }

    public void setProjects(ProjectDetailsRO projects) {
        getPk().setProject(projects);
    }

    @Transient
    public UserDetailsRO getUsers() {
        return getPk().getUsers();
    }

    public void setUsers(UserDetailsRO users) {
        getPk().setUsers(users);
    }

    @Override
    public int hashCode() {
        final int prime = 31;
        int result = 1;
        result = prime * result + ((isLead == null) ? 0 : isLead.hashCode());
        result = prime * result + ((pk == null) ? 0 : pk.hashCode());
        return result;
    }

    @Override
    public boolean equals(Object obj) {
        if (this == obj)
            return true;
        if (obj == null)
            return false;
        if (getClass() != obj.getClass())
            return false;
        ProjectUsers other = (ProjectUsers) obj;
        if (isLead == null) {
            if (other.isLead != null)
                return false;
        } else if (!isLead.equals(other.isLead))
            return false;
        if (pk == null) {
            if (other.pk != null)
                return false;
        } else if (!pk.equals(other.pk))
            return false;
        return true;
    }

}

THE PRIMARY KEY CLASS
----------------------

@Embeddable
public class ProjectUserPK implements Serializable{

    private ProjectDetailsRO project;

    private UserDetailsRO users;

    @ManyToOne
    public ProjectDetailsRO getProject() {
        return project;
    }

    public void setProject(ProjectDetailsRO project) {
        this.project = project;
    }

    @ManyToOne
    public UserDetailsRO getUsers() {
        return users;
    }

    public void setUsers(UserDetailsRO users) {
        this.users = users;
    }

    @Override
    public int hashCode() {
        final int prime = 31;
        int result = 1;
        result = prime * result + ((project == null) ? 0 : project.hashCode());
        result = prime * result + ((users == null) ? 0 : users.hashCode());
        return result;
    }

    @Override
    public boolean equals(Object obj) {
        if (this == obj)
            return true;
        if (obj == null)
            return false;
        if (getClass() != obj.getClass())
            return false;
        ProjectUserPK other = (ProjectUserPK) obj;
        if (project == null) {
            if (other.project != null)
                return false;
        } else if (!project.equals(other.project))
            return false;
        if (users == null) {
            if (other.users != null)
                return false;
        } else if (!users.equals(other.users))
            return false;
        return true;
    }

}

The Main ENtity
=====================

@Entity
@Table(name="PROJECT_DTLS")
public class ProjectDetailsRO {

    @Id
    @GeneratedValue(strategy=GenerationType.AUTO)
    @Column(name="PROJECT_ID")
    private Long projectId;

    @OneToMany(fetch=FetchType.LAZY, mappedBy="pk.project", cascade=CascadeType.ALL)
    private List<ProjectUsers>projectUsers = new LinkedList<ProjectUsers>();

    public void addUser(UserDetailsRO user,  Character lead){
        ProjectUsers association = new ProjectUsers();
        association.setUsers(user);
        association.setProjects(this);
        association.setIsLead(lead);

        this.projectUsers.add(association);
        user.getProjectUsers().add(association);
    }

    public List<ProjectUsers> getProjectUsers() {
        return projectUsers;
    }

    public void setProjectUsers(List<ProjectUsers> projectUsers) {
        this.projectUsers = projectUsers;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T21:03:03.910

您不提供 UserDetailsRO 类，因此我们假设其中的“电子邮件”属性是属性注释的。如果是这种情况，请尝试在您的标准中创建别名，直至“用户”。就像是：

```
Criteria projCriteria = session.createCriteria(ProjectDetailsRO.class);
projCriteria.createAlias("projectUsers", "projectUsers");
projCriteria.createAlias("pk", "projectUsers.pk");
projCriteria.createAlias("users", "pk.users");
projCriteria.add(Restrictions.eq("users.email", leadUserEmail)); 
```

# ipad - 通用应用程序在 iOS 6 模拟器中为 iPad 使用了错误的 Xib

> ID：13297624
> 
> 赞同：0
> 
> 时间：2012-11-08T20:53:57.450
> 
> 标签：ipad, ios6, ios-simulator, plist, xib

在模拟器中，我的通用应用程序在 iOS 5 中运行良好，但在 iOS 6 中它抓取 MainWindow.xib 而不是 MainWindow~ipad.xib。我在 plist 中正确设置了“Main Nib File Base Name (iPad)”(NSMainNibFile~ipad)。其他所有组合都可以正常工作（iOS 5 上的 iPhone、iPhone HD、iPhone 5 和 iPad；iOS 6 上的 iPhone、iPhone HD 和 iPhone 5）。

这是 plist 中的相关部分：

```
<key>NSMainNibFile</key>
<string>MainWindow</string>
<key>NSMainNibFile~ipad</key>
<string>MainWindow~ipad</string> 
```

I'm at my wit's end, having recreated the iPad Xib from scratch, reset the Simulator, cleaned Xcode's cache (Clean menu option and DerivedData folder), and everything else I could think of short of sacrificing a chicken (including the ideas on [Universal app for iPad not loading iPad .xib files?](https://stackoverflow.com/questions/9753967/universal-app-for-ipad-not-loading-ipad-xib-files)). I'm running the current version of Xcode (4.5.2) on Lion.

Any ideas? Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T07:44:42.490

解决方案：使用“MainWindow~iPhone.xib”（iPhone）和“MainWindow.xib”（iPad）。

在这个旧帖子中找到了答案：

[http://oleb.net/blog/2010/04/universal-app-is-not-a-universal-binary/](http://oleb.net/blog/2010/04/universal-app-is-not-a-universal-binary/)

但也在上面的链接线程中（我遇到了一些其他问题，包括一些丢失的 Xib 连接，这可能导致它早些时候对我来说失败了）。

# javascript - 这个猫鼬查询的 SQL 等价物是什么

> ID：13297632
> 
> 赞同：0
> 
> 时间：2012-11-08T20:54:24.777
> 
> 标签：javascript, mysql, mongodb, mongoose

```
ProjectModel.find({projectName: 'name'}).sort({viewCount: -1}).limit(5).exec( 
    function(err, projects) {
        ...
    }
); 
```

只是想了解这个查询在做什么。`viewCount`我相信它是按降序搜索的，结果限制为 5。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T20:56:51.847

```
select * from project where projectName = 'name' order by viewCount desc limit 5 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T20:57:06.987

在 projectName 等于 'name' 的 projectName 上搜索，然后按 viewCount 降序排序，然后在结果中限制为 5 条记录。所以，是的，你得到的大部分是正确的。

我不确定 mongoose 的 find 是否等于或喜欢/包含；默认情况下可能等于。检查文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T20:58:45.277

```
SELECT name from projects order By viewCount LIMIT 5 
```

# jquery - JQuery 设计工具栏

> ID：13297640
> 
> 赞同：0
> 
> 时间：2012-11-08T20:55:13.217
> 
> 标签：jquery, html, css, jquery-ui

我正在使用 Jquery 在页面顶部创建一个工具栏。

我目前已正确“格式化”它。我使用松散的格式，因为按钮布局正确，并且在我的页面顶部也存在一个栏。

但是，这些按钮不在工具栏中。我可以让按钮格式化到它们的位置（一个在左边，一个在右边）的唯一方法是将按钮向左和向右浮动，但这反过来又把它们从工具栏上移了出来。

这是带有正确位置的按钮的代码：

```
#toolbar
{
        display: block;
        padding: 2px;
}
.right
{
        float: right;
}
.left
{
        float: left;
}
</style>
<title>Lobby</title>

</head>
<body>
        <span id="toolbar" class="ui-widget-header ui-corner-all">
                <input id='button' class='left' type="submit" value="My Decks" onclick="window.location.href='listDecks.php'"/>
                <input id='button' class='right' type='submit' name='log-out' value='Logout' onclick="window.location.href='logout.php'" />
        </span> 
```

最初我在工具栏中生成了按钮，但在同一侧（左）：

```
#toolbar
{
        display: block;
        padding: 2px;
}
</style>
<title>Lobby</title>

</head>
<body>
        <div align="left">
        <span id="toolbar" class="ui-widget-header ui-corner-all">

                <input id='button' class='left' type="submit" value="My Decks" onclick="window.location.href='listDecks.php'"/>
                <input id='button' class='right' type='submit' name='log-out' value='Logout' onclick="window.location.href='logout.php'" />
        </div>
        </span> 
```

如何获取页面两侧以及栏中的按钮？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T21:50:07.673

您没有正确结束 span 和 div 。在上面的代码中 .Span 在 div 内，但您在 span 之前结束 div 。修复它，看看它是否有帮助。

此外，对于这种情况，我会使用超链接而不是按钮。

```
<div align="left">
        <span id="toolbar" class="ui-widget-header ui-corner-all">

                <input id='button' class='left' type="submit" value="My Decks" onclick="window.location.href='listDecks.php'"/>
                <input id='button' class='right' type='submit' name='log-out' value='Logout' onclick="window.location.href='logout.php'" />

        </span></div> 
```

# objective-c - 索引处的 UITableViewCell contentView 标签

> ID：13297646
> 
> 赞同：0
> 
> 时间：2012-11-08T20:55:33.027
> 
> 标签：objective-c, ios, uitableview, uilabel

我有一个 UITableViewCell 并在标签中添加了一个子视图。

```
[cell addSubview:stateLabel]; 
```

我想在用户按下单元格时更改标签。

```
[tableView indexPathForSelectedRow]; 
```

这给了我按下的 indexPath，但是任何人都可以帮助我**如何**更改用户按下的那个位置的标签吗？

我想我只需要一个提示，然后我可以自己做剩下的......

例如，如果用户按下单元格 8，它会更改单元格 8 的 stateLabel 子视图。

这是我到目前为止所得到的：

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"CellID";

    cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

        stateLabel = [ [UILabel alloc ] initWithFrame:CGRectMake(240,0,100,44)];
        stateLabel.textColor = [UIColor redColor];
        stateLabel.backgroundColor = [UIColor clearColor];
        stateLabel.font = [UIFont fontWithName:@"Arial Rounded MT Bold" size:(13.0)];
        stateLabel.text = @"Not applied";
        [cell addSubview:stateLabel];
    }

    cell.textLabel.text = [cheatNames objectAtIndex:indexPath.row];

    return cell;

}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    NSIndexPath *selectedRowPath = [tableView indexPathForSelectedRow];

} 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T07:08:29.440

你可以实现这样的东西

在`cellForRowatIndexPath:`返回单元格之前的方法中；

获取`indexpath`用于更改标签的选定行的 。并使用

```
if(indexpath == selected index)
{
    // do ur code here

} 
```

一旦`didSelectRow:`被调用重新加载表

这肯定会奏效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T22:32:49.840

恕我直言，无需重新加载：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    NSIndexPath *selectedRowPath = [tableView indexPathForSelectedRow];
    myString = @"Any Data";
    [tableView reloadData];

    UITableCellView *cell = [tableView cellAtIndexPath:indexPath];
    cell.label.title = myString;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-08T21:08:02.867

`myString`在 .h 文件中定义为`NSString`

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

NSIndexPath *selectedRowPath = [tableView indexPathForSelectedRow];
myString = @"Any Data";
[tableView reloadData];

}
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

static NSString *CellIdentifier = @"CellID";

cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

    stateLabel = [ [UILabel alloc ] initWithFrame:CGRectMake(240,0,100,44)];
    stateLabel.textColor = [UIColor redColor];
    stateLabel.backgroundColor = [UIColor clearColor];
    stateLabel.font = [UIFont fontWithName:@"Arial Rounded MT Bold" size:(13.0)];
    stateLabel.text = myString;
    [cell addSubview:stateLabel];
}

cell.textLabel.text = [cheatNames objectAtIndex:indexPath.row];

return cell;

} 
```

# dom - 在 typescript 文件中引用 DOM 声明 lib.d.ts 时出现错误，代码为 1

> ID：13297647
> 
> 赞同：0
> 
> 时间：2012-11-08T20:55:34.270
> 
> 标签：dom, declaration, typescript

当我在打字稿文件中引用 DOM 的声明文件时，如下所示

```
///<reference path='.\node_modules\typescript\bin\lib.d.ts' /> 
```

打字稿编译器 tsc 抛出如下错误：

> 命令 ... 以代码 1 退出

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T00:18:08.777

你不需要引用 lib.d.ts - TypeScript 编译器会自动包含它。

删除该引用，您应该恢复正常 - 该错误可能是重复声明，因为它基本上被引用了两次。

# python - python中else子句的不同用法（不是最常见的）

> ID：13297649
> 
> 赞同：2
> 
> 时间：2012-11-08T20:55:38.137
> 
> 标签：python, generator, if-statement

6.00x edX中有一个练习，他们提供的答案建议如下：

```
def genPrimes():
    primes = []   # primes generated so far
    last = 1      # last number tried
    while True:
        last += 1
        for p in primes:
            if last % p == 0:
                break
        else:
            primes.append(last)
            yield last 
```

查看标识，我可以清楚地看到这个 ELSE 与 IF 无关。我认为这是一个错误，但是当我执行时，代码很好，我无法理解发生了什么，ELSE 是做什么的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T20:57:24.350

它在`for`循环完成遍历列表时执行。但是，在你的例子中。如果`break`调用了，`else`则不会执行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-08T20:57:38.350

`else`执行的一部分`for loop`，当您`for loop`成功运行而不`breaking`在`iteration`.

所以，在你的例子中，： -

```
if last % p == 0:
      break 
```

如果您的上述`if condition`in for 循环在某些迭代中变为真，它将脱离您的 for 循环，在这种情况下您的 else 将不会执行。

# java - 这种方法可以返回列表的副本吗？

> ID：13297651
> 
> 赞同：0
> 
> 时间：2012-11-08T20:55:43.620
> 
> 标签：java

我有这个问题。我有两个层次结构，一个是 Animal，另一个是 AnimalStore。

```
public abstract class Animal{
//Some members
}

public class Dog extends Animal{
//Some members
}

public abstract class AnimalStore{
//Some members
private List<Animal> animals;
public abstract void addAnimal(Animal a);
//Methods forwarding some List methods
//remove, find, count, 
}
public Animal get(int n){
return animals.get(n);
}
//Method for returning a copy of the list.

public class DogStore extends AnimalStore{
//some memebers
public void addAnimal(Animal a){
//Assert is a dog because this is a Dogs Store
}
} 
```

我有一些 List 类的方法，使用 AnimalStore 中的方法转发。我有一种获取列表的方法，我在其中创建另一个列表并迭代从动物获取并设置为 newList。然后我将 newList 作为新列表的副本返回。这在内存区域很痛苦，因为我的 GUI 框架在创建页面时会收到此列表（我使用 Wicket BTW）。假设有 10,000 个用户访问该页面。因此该方法将创建 10, 000 个副本列表。最糟糕的！如果他们只是刷新页面也会发生。我不想返回原始列表，因为我不想客户端将猫添加到 DogStore 的动物列表中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T21:08:31.080

您可以使用模板强制执行更严格的编译类型检查：

```
public abstract class AnimalStore<T extends Animal> {
    //Some members
    private List<T> animals;

    public abstract void addAnimal(T a);

    //Methods forwarding some List methods
    //remove, find, count, 

    public T get(final int n) {
        return animals.get(n);
    }
}

//Method for returning a copy of the list.

public class DogStore extends AnimalStore<Dog> {
    //some memebers
    @Override
    public void addAnimal(final Dog a) {
        //Assert is a dog because this is a Dogs Store
    }
}

public abstract class Animal {
    //Some members
}

public class Dog extends Animal {
    //Some members
} 
```

以这种方式编写，您删除了必须创建副本的要求，*因为我不想客户端将猫添加到 DogStore 的动物列表中*。

# sql - 在 varchar 字段而不是数字字段上使用 BETWEEN？

> ID：13297652
> 
> 赞同：4
> 
> 时间：2012-11-08T20:55:43.440
> 
> 标签：sql, sql-server-2008, coldfusion, coldfusion-8

我正在使用 ColdFusion 8 和 SQL Server 2008 R2。

我正在尝试查询一列值以获取值在一个范围内的行。该列应该是数字，但不是。它被设置为 varchar（由其他人）。有 100,000 多行数据。这是数据的假样本：

```
ID COLUMN
1  1
2  1.2 
3  0.9 
4  5 
5  -6 
```

我的查询如下所示：

```
select column
from table
where column between 1 and 2 
```

此查询不会运行，因为 where 语句的列是 varchar，并且出现转换错误，因此我必须将 where 语句更改为：

```
where column between '1' and '2' 
```

现在，当我运行这样的查询时，它会运行，但我没有得到结果。但我知道我应该看到结果，因为我知道列字段中的许多值都在我查询的范围内。

我想知道是否由于该字段是 varchar 而不是数字而看不到任何结果。这可能会弄乱我的结果吗？

此外，我们有 100,000 多条要搜索的记录，使用 varchar 字段而不是数字字段会对性能造成很大影响吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-08T21:00:44.057

例如，您需要 CAST 结果`WHERE ISNUMERIC(column) = 1 AND CAST(column AS decimal(10,5)) BETWEEN 1 AND 2`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T09:11:20.830

另一种选择

将 nvarchar() 隐式转换为 numeric()

操作成本明显和隐式转换相等，但代码少一点；））

*   谓词

![在此处输入图像描述](../Images/d1a74ac3904a007c4e4bc14cd3bfcefc.png)

```
SELECT *
FROM dbo.your_table
WHERE [COLUMN] BETWEEN 1.00 AND 2.00 
```

# python - 使用python将字符串转换为字典

> ID：13297654
> 
> 赞同：1
> 
> 时间：2012-11-08T20:55:58.467
> 
> 标签：python, parsing, converter, python-2.5

我知道这个问题听起来是重复的，但事实并非如此，至少看了一段时间，对于我的具体问题，我什么也做不了。

我有以下字符串：

```
"{first : {name : 'test', value : 100}, second : {name : 'test2', value : 50}}" 
```

我想将该字符串转换为字典，如下所示：

```
{'first': {'name': 'test', 'value' : 100}, 'second': {'name': 'test2', 'value' : 50}} 
```

有任何想法吗？我正在使用 Python 2.5

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T21:06:14.087

首先，如果您从字典（使用 Python 或几乎任何其他语言）生成这些字符串，您可能需要考虑以易于解析的方式生成它们。例如，在 Python 中。要么 要么`repr(d)`会给`json.dumps(d)`你一些与现有字符串非常相似的东西，但带有适当的引号。

* * *

但是如果你刚刚得到了别人给你的一堆字符串，最简单的方法可能是将它正则表达式转换为一个实际的 JSON 字符串，以便你可以解析它：

```
json.loads(re.sub(r",\s*(\w+)", r", '\1'", 
                  re.sub(r"\s*\{\s*(\w+)", r"{'\1'", x)).replace("'", '"')) 
```

在 2.5 中，没有内置`json`模块，所以你可能想要`pip install simplejson`然后你可以这样做：

```
try:
  import json
except ImportError:
  import simplejson as json 
```

（或者，当然，`simplejson`如果您愿意，您可以无条件地要求。）

* * *

另一种选择是使用`ast.literal_eval`而不是`json.loads`. 哪个合适取决于有关您的字符串的更多信息。JSON 比 Python 语法更受限制，因此如果您担心输入的来源，它会更安全，但如果您的输入可能合法地包含 JSON 无法处理的内容（例如`1+3j`.

`json`但是，like`ast`是 2.6 的新内容，并且 PyPI 上没有可用的替代品。幸运的是，2.5*确实*有这个`_ast`模块，你可以`literal_eval`从 2.6复制并粘贴源代码`ast.py`，但这有点麻烦。ActiveState 也有一些食谱，例如[http://code.activestate.com/recipes/364469/](http://code.activestate.com/recipes/364469/)，虽然与 不同`literal_eval`，但可能适合您的目的。

这仍然行不通，因为您还缺少示例字符串中的右大括号。我希望这是一个错字，在这种情况下没有问题。

如果不是，您需要解释您希望它对此类情况实际执行的操作。也许自动关闭任何未闭合的大括号？如果是这样，未闭合的括号也会是一个问题吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T00:59:04.450

您可以尝试使用向后兼容 Python 2.5 的[pyparsing](http://pyparsing.wikispaces.com) - 请参阅下面带注释的代码中的注释：

```
from pyparsing import Suppress, Forward, Word, nums, quotedString, removeQuotes, alphas, alphanums, Group, delimitedList

# define some punctuation expressions
LBRACE,RBRACE,COLON = map(Suppress,"{}:")

# forward declare dict_, because we will use it as part of defining
# dict_value, which we will then use to define dict_ (i.e., the grammar
# is recursive)
dict_ = Forward()

# what does a key value look like (guessing it is any word that
# starts with an alpha or '_', followed by zero or more alphas, nums, or '_'s)
dict_key = Word(alphas+'_',alphanums+'_')

# define possible values for dict entries (expand as needed)
# parse actions do data conversion during parsing, so that we get native Python types,
# not just strings for everything that we have to convert later
integer = Word(nums).setParseAction(lambda t:int(t[0]))
quotedString.setParseAction(removeQuotes)
dict_value = quotedString | integer | dict_

# a dict element is key : value
dict_element = Group(dict_key + COLON + dict_value)

# use a parse action to convert parsed data to dicts while parsing
make_dict = lambda t: dict(t.asList())

# finally, define dict_ using '<<' operator to "inject" the pattern into the previously
# defined Forward - delimitedList(expr) is a short-cut for expr + ZeroOrMore(',' + expr)
dict_ << (LBRACE + (delimitedList(dict_element).setParseAction(make_dict) + RBRACE))

# parse the input string - we get back a real dict, not just a hierarchical list of strings
data = "{first : {name : 'test', value : 100}, second : {name : 'test2', value : 50}}"
dd = dict_.parseString(data)[0]
print type(dd)
print dd
print dd.keys()
print dd['first'].keys() 
```

印刷：

```
<type 'dict'>
{'second': {'name': 'test2', 'value': 50}, 'first': {'name': 'test', 'value': 100}}
['second', 'first']
['name', 'value'] 
```

# c# - 不理解 Assert.Areequal 背后的编码

> ID：13297656
> 
> 赞同：-2
> 
> 时间：2012-11-08T20:56:08.303
> 
> 标签：c#

谁能帮我这个？

```
 [TestMethod]
    public void MakeDateConstructsADateTimeFromYearMonthAndDay()
    {
        Arrange
        var controller = new DateController();
        var expected = new DateTime(2014, 6, 30);

        Act
        var result = controller.MakeDate(2014, 6, 30);

        Assert
        Assert.AreEqual<DateTime>(expected, result);
    }

    [TestMethod]
    public void MakeDateReturnsDefaultDateTimeIfInputDataInvalid()
    {
        /* HINT You need to use a try ... catch block in the MakeDate()
         * method to trap the exception thrown by the DateTime constructor.
         * See http://msdn.microsoft.com/en-us/library/xcfzdy4x(v=vs.110)/ 
         * for information on the exceptions thrown by the DateTime 
         * constructor.  
         * See http://msdn.microsoft.com/en-us/library/ms173160(v=vs.110).aspx 
         * for information on exception handling in C#.  
         * */
        //Arrange
        var controller = new DateController();//error
        var expected = new DateTime();//error

        //Act
        //June has only 30 days so this will cause an exception
        var result = controller.MakeDate(2014, 6, 31);

        //Assert
        Assert.AreEqual<DateTime>(expected, result);
    } 
```

不断收到错误说明 Error Expected class, delegate, enum, interface, or struct //getting errors under 'void, datacontroller and datetime

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T21:03:15.113

```
Assert.AreEqual<DateTime>(expected, result); 
```

那行代码*断言*它的两个参数*是相等*的。这是一个通用方法，所以这个`<DatTime>`位告诉方法两个参数的类型是什么。就像是：

```
bool SomeGenericCompareMethod<T>( T arg1, T arg2 )
{
    // use reference equality by default, 
    // implementation may override .Equals()
    return arg1.Equals( arg2 );
} 
```

* * *

编辑：

根据您在评论中完全未格式化和乱码的代码，这到底是什么？

```
Arrange var controller = new DateController();//Getting Error 
```

这是没有意义的。您似乎有两个类型声明符，`Arrange`并且`var`. 选一个。我会选择这个，因为不清楚这`Arrange`是一个`DateController`派生自的基类/接口：

```
var controller = new DateController();//Getting Error 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T21:08:56.890

断言可以用作应用程序中的运行时检查（即您提到的方法比较两个参数并使用相等运算符验证它们是否相等）。

如果一个断言计算为`true`，它只是让代码继续，但如果它计算为`false`，`AssertFailedException`则被抛出。

有关 msdn 的一些信息，请查看：http: [//msdn.microsoft.com/en-us/library/microsoft.visualstudio.testtools.unittesting.assert%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.testtools.unittesting.assert%28v=vs.80%29.aspx)。

# php - 导出 CSV 中的选定行并导入相同的 CSV 文件以更新 PHP/MySQL 中的选定行

> ID：13297658
> 
> 赞同：0
> 
> 时间：2012-11-08T20:56:15.507
> 
> 标签：php, mysql, csv

我有一个包含以下列的 mysql 表：

```
filterid    productid   value   groupid 
```

我想将此表的行（仅选定的行）导出到 CSV 文件。我知道如何做出口部分。

例如，如果我根据产品 ID 导出了行，假设导出的行是：

```
4   13307   USA|Quebec|Rest of Canada   750
9   15963   USA|Quebec|Rest of Canada   1
9   13618   USA|Quebec|Rest of Canada   1
9   16210   USA|Quebec|Rest of Canada   1
9   16666   USA|Quebec|Rest of Canada   1 
```

在总共 100 行中。

现在，我已将此内容导出到 CSV 文件中，并希望将其导入回我的 mysql 表中，它应该只更新与我导出的 CSV 文件中的产品 ID 匹配的行，而不会干扰表的其余内容。

有可能这样做吗？

谷歌搜索后，我发现我可以使用此代码将 CSV 导入表

```
LOAD DATA LOCAL INFILE 'filename.csv' INTO TABLE my_table FIELDS
TERMINATED BY ',' 
ENCLOSED BY '' 
LINES TERMINATED BY '\n' 
```

请提出一种方法来实现这一点。

如果您需要，我可以为您提供更多示例代码。

谢谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T21:41:01.800

我认为他是在问这个问题，因为他不知道如何使用`INFILE`子句`WHERE`：

> 现在，我已将此内容导出到 CSV 文件中，并希望将其导入回我的 mysql 表中，它应该只更新与我导出的 CSV 文件中**的产品 ID 匹配的行，而不会干扰表的其余内容。**

如果您想使用脚本来执行您提到的操作，可以尝试以下操作：

```
// set up your database connection
$fp = fopen('your_csv_file.csv','r') or die("**! can't open file\n\n");

// loop through your lines
while($csv_line = fgetcsv($fp,1024)) {

    $filterid = $csv_line[0];
    $productid = $csv_line[1];
    $value = $csv_line[2];
    $groupid = $csv_line[3];

    $update =  "UPDATE your_table(filterid, productid, value, groupid) ";
    $update .= "VALUES('$filterid', '$productid'; '$value'; '$goupid') WHERE productid='$productid'";

    // run $update on your database
}

fclose($fp) or die("**! can't close file\n\n"); 
```

它至少应该为您指明正确的方向..

# haskell - mapM putStrLn ["a", "b"] 为什么显示三行？

> ID：13297661
> 
> 赞同：4
> 
> 时间：2012-11-08T20:56:20.083
> 
> 标签：haskell, io, monads

```
Prelude> mapM putStrLn ["a", "b"]
a
b
[(),()]
Prelude> mapM_ putStrLn ["a", "b"]
a
b 
```

为什么第一个版本显示第三行而第二个不显示第三行来自哪里。我没想到。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-08T20:58:53.267

如果您将`mapM`版本放在独立程序中，使用 编译`ghc`并运行它，您也不会从中获得第三行：

```
$ cat demo.hs
main = mapM putStrLn [ "a", "b" ]
$ ghc demo.hs
$ ./demo
a
b
$ 
```

你`[(),()]`看到的`ghci`只是`mapM`调用的返回值；`ghci`自动显示您输入的每个表达式的值。（这就是为什么`ghci`称为读取-评估-打印循环或 REPL；“打印”部分就是您在此处看到的。）

虽然`mapM`创建一个包含每个`putStrLn`调用的返回值的列表（因此您`()`为列表中的每个元素获取一个）， `mapM_`丢弃这些返回值并返回`IO ()`，它`ghci`不会显示。所以在这种情况下你看不到额外的一行`ghci`。

# php - PHP if 语句比较 3 个日期

> ID：13297662
> 
> 赞同：1
> 
> 时间：2012-11-08T20:56:21.263
> 
> 标签：php, if-statement

我在编写 if 语句时遇到问题

有3个变量

```
$date = 1985-11-01;

$date2 = 2005-11-08;

$date3 = 2006-11-08; 
```

这是我的 if 语句。

```
if($date > $date2 && $date < $date3) {
            // dob is between the limits
            return TRUE;
        }
        else {
            // dob is outside the limits
            return FALSE;
        } 
```

我要做的是，如果 $date 不在 $date2 和 $date3 之间，则返回 false。我今天很累，我的大脑不工作，谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T20:59:28.710

您可以使用它`strtotime`来确保您正确比较。

```
$date = strtotime('1985-11-01'); //499680000

$date2 = strtotime('2005-11-08'); //1131436800

$date3 = strtotime('2006-11-08'); //1162972800 
```

当您执行逻辑时，请查看 Unix 生成的时间戳...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T21:26:06.457

```
//using strtotime convert your date(s) in time stamp then your checking will be correctly worked.

$date = strtotime('1985-11-01');

$date2 = strtotime('2005-11-08');

$date3 = strtotime('2006-11-08');

if($date > $date2 && $date < $date3) 
        return true;
else
        return false; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T20:58:31.960

[使用strtotime](http://php.net/manual/en/function.strtotime.php)将变量转换为时间对象

`$my_date = strtotime('08/11/2012');`

# jquery - 在 css3 过渡期间不遵守 z-index

> ID：13297667
> 
> 赞同：1
> 
> 时间：2012-11-08T20:56:35.577
> 
> 标签：jquery, z-index, css-transitions, css-animations

我用 CSS3 和 jQuery 制作了一个画廊（在这里：[http](http://dev.crosscode.no/artgallery/) ://dev.crosscode.no/artgallery/ ）但我有一个问题：

当第一张右照片替换主照片时（在过渡期间），第二张右照片查看第一张右照片，但第一张右照片的 zIndex 为 650，第二张右照片的 zIndex 为 600。有人知道为什么吗发生？

我`all 0.75s cubic-bezier(0.42, 0, 0.58, 1) 0s`用作过渡。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-28T13:02:50.223

目前试图解决类似的问题不是画廊，而是一个层-> z-index 在所有 4 个浏览器（ff、ie、chr、saf）中都工作错误。你的div的顺序是什么？我的是：

```
<div #container>
  <div .layer>
     <div .wrap2>
        <div .wrap1>
           <img #1>
           <span .gizmo1>
           <span .gizmo2>

  <div .layer>
     <div .wrap2>
        <div .wrap1>
           <img #2>
           <span .gizmo1>
           <span .gizmo2> 
```

问题：1）当 IMG#2 具有更高的 z-index 时，IMG#1 仍然显示在顶部 2）当第一层的 .gizmo1、.gizmo 被隐藏时，第一层的元素都没有设置 z-index 和第二层的 .gizmo1 , .gizmo2 的 z-index 为 1000，但 IMG#1 仍然显示在所有内容之上.. （如果将 img#1 z-index 设置为 200/2000 的事件 - 两者都不被尊重）

在每一层的 .wrap1 上使用了 CSS 效果：“transform: rotate(60deg)”——没有别的了

（使用，jQuery.1.10.2，jQuery UI.1.10.3）

似乎真的很奇怪，我错过了什么？

- 编辑：Z-index 问题仅在我将转换属性添加到某些 .wrap div 后才出现！这意味着：当应用程序启动时，没有 transform: 存在.. 那么 z-indexes 工作正常！

# sitecore - Sitecore 6 WFFM：如何隐藏字段？

> ID：13297669
> 
> 赞同：1
> 
> 时间：2012-11-08T20:56:40.473
> 
> 标签：sitecore, sitecore6, web-forms-for-marketers

在面向营销人员的 Web 表单中，我有一些字段用于将值传递给管道处理器并将 CSS 代码附加到表单中。

我不希望这些字段出现在表单上。如何将字段标记为不可见？现在我正在通过 CSS 执行此操作，但我很确定必须有更好的方法来执行此操作。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T16:13:16.120

您可以扩展单行文本字段类并将容器 CSS 类更改为您自己的隐藏字段和标签的 CSS 类。您还可以在通过查询字符串加载表单时向该字段添加值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T03:22:56.517

我相信 WFFM 中有一个隐藏字段类型。你能用那个吗？

# ios - CAKeyframeAnimation 从最后一点重复旋转

> ID：13297675
> 
> 赞同：2
> 
> 时间：2012-11-08T20:56:53.290
> 
> 标签：ios, core-animation

在我的 iphone 应用程序中，我有一个 UIButton，当按下另一个 UIButton 时，我将其旋转 180 度进入视图，然后当再次单击该按钮时，该按钮将再旋转 180 度回到它开始的位置。

这一切在第一次发生完整的 360 度过程时工作正常，但如果我尝试再次从头开始，它会捕捉 180 度然后尝试从该点旋转它。谁能指出我正确的方向？到目前为止，这是我的代码...

```
showAnimation= [CAKeyframeAnimation animationWithKeyPath:@"transform.rotation"];
                    showAnimation.duration = self.showAnimationDuration;
                    showAnimation.repeatCount = 1;
                    showAnimation.fillMode = kCAFillModeForwards;
                    showAnimation.removedOnCompletion = NO;
                    showAnimation.cumulative = YES;
                    showAnimation.delegate = self;

float currentAngle =[[[rotateMe.layer presentationLayer] valueForKeyPath:@"transform.rotation.z"] floatValue];

//Rotate 180 degrees from current rotation
showAnimation.values = [NSArray arrayWithObjects:       
                        [NSNumber numberWithFloat:currentAngle],
                        [NSNumber numberWithFloat:currentAngle + (0.5 * M_PI)],
                        [NSNumber numberWithFloat:currentAngle + M_PI], nil];

[rotateMe.layer addAnimation:showAnimation forKey:@"show"]; 
```

动画完成后，我将 rotateMe.transform 旋转更新为图层的旋转，使其变得可用。

```
- (void)animationDidStop:(CAKeyframeAnimation *)anim finished:(BOOL)flag
{
    float currentAngle =[[[self.layer presentationLayer] valueForKeyPath:@"transform.rotation.z"] floatValue];

    NSLog(@"End: %f", currentAngle);
    rotateMe.transform = CGAffineTransformMakeRotation(0);
} 
```

我已经达到了完全的工作效果

```
 [UIView animateWithDuration:1.0f]
        animations:^{
            CGAffineTransform transform = CGAffineTransformRotate(rotateMe.transform, DEGREES_TO_RADIANS(179.999f));
            rotateMe.transform = transform;
        }
     ]; 
```

但我想让动画更复杂，因此 CAKeyframeAnimation。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-08T22:21:16.007

如果您需要所有关键帧，您可以将动画配置为`additive`0 到 180 度的动画。如果您不需要不同的关键帧，您可以简单地使用基本动画和`byValue`属性来完成。下次添加动画时，它会比视图上的任何旋转多旋转 180 度。

如果您在委托回调中设置实际值，则不需要填充模式，也不需要在完成时删除动画。

```
CABasicAnimation *showAnimation = [CABasicAnimation animationWithKeyPath:@"transform.rotation.z"];
showAnimation.byValue = M_PI;
showAnimation.duration = self.showAnimationDuration;
showAnimation.delegate = self;

[rotateMe.layer addAnimation:showAnimation forKey:@"show"]; 
```

或使用关键帧动画（如上所述：使其相加并在 0 到 180 度之间设置动画）。

```
CAKeyframeAnimation *showAnimation = [CAKeyframeAnimation animationWithKeyPath:@"transform.rotation.z"];
showAnimation.additive = YES; // Make the values relative to the current value
showAnimation.values = @[0, /*all your intermediate values here... ,*/ M_PI];
showAnimation.duration = self.showAnimationDuration;
showAnimation.delegate = self;

[rotateMe.layer addAnimation:showAnimation forKey:@"show"]; 
```

# sql - 如何根据第二张表中的数据限制 SQL 查询结果？

> ID：13297681
> 
> 赞同：1
> 
> 时间：2012-11-08T20:57:14.497
> 
> 标签：sql, jpa

我有一个带有 USERS 和 GROUPS 表的现有系统。我有用户和组的 JPA 对象。

表 USERGROUPS 是哪些用户在哪些组中的映射，这个表没有映射到一个对象，我几乎像这样对它做一个直接的 SQL 查询：

```
public List<User> getUsersByGroupId(long groupId) {
  List<User> users = new ArrayList<User>();
  String query = "select USERGROUPS.USER_ID from USERGROUPS where USERGROUPS.GROUP_ID = ?1";
  Query q = getEntityManager().createNativeQuery(query, Long.class);
  q.setParameter(1, groupId);
  List<Long> userIds = new ArrayList<Long>();
  usersIds.addAll(q.getResultList());
  for (Long id : userIds) {
    users.add(getUser(id));
  } 
  return users;
} 
```

一切正常。

现在我有一个新应用程序，它想要使用 USERS 表中的用户子集。

计划是添加一个名为 MYAPP_USERS 的新表（因为我们不想修改现有表），该表由一列组成，即要在 MYAPP 中列出的用户的 USER_ID。

所以我的问题是，如何修改查询以仅返回 MYAPP_USERS 表中的组成员？

也就是说，我该怎么做：

```
 String query = "select USERGROUPS.USER_ID from USERGROUPS where USERGROUPS.GROUP_ID = ?1 and WHERE ?1 IS IN MYAPP_USERS"; 
```

?

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T21:03:06.460

您可以执行以下操作：

```
select USERGROUPS.USER_ID 
from   USERGROUPS 
where  USERGROUPS.GROUP_ID = ?1 
   AND EXISTS (SELECT * FROM MYAPP_USERS WHERE USER_ID = ?1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T22:21:58.450

要仅获取在 MYAPP_USERS 表中找到的用户用户的结果，请从该表开始并使用 USERGROUPS 执行 INNER JOIN 以获取他们的 GROUP_ID：

```
SELECT usergroups.user_ID
FROM myapp_users INNER JOIN usergroups
ON myapp_users.user_ID = usergroups.user_ID
WHERE usergroups.group_ID = ?1 
```

为了计划未来，我将创建一个包含 user_ID 和 app_ID 列的表 app_users，而不是 myapp 表，然后在查询中指定 app_ID：

```
...
WHERE usergroups.group_ID = ?1
AND app_ID = ?2 
```

# c# - 将 List 和 Array 作为 IEnumerable 的参数传递

> ID：13297689
> 
> 赞同：0
> 
> 时间：2012-11-08T20:57:56.383
> 
> 标签：c#, .net, generics, resharper, ienumerable

我想创建一个可以同时接受`List<byte>`字节数组作为参数的方法（如 Resharper 建议的那样）：

```
public static UInt16 GetSourceAddress(IEnumerable<byte> packet)
{
    return BitConverter.ToUInt16(new[] {packet[4], packet[5]}, 0);
} 
```

但是我得到以下编译错误：

```
Cannot apply indexing with [] to an expression of type 'System.Collections.Generic.IEnumerable<byte>' 
```

我知道我可以继续使用 List 和 byte[] 进行两个重载，但是这个问题说明了什么？如何解决？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T20:59:52.537

如果您想要随机访问，请`IList<T>`改用：

```
public static UInt16 GetSourceAddress(IList<byte> packet) 
```

`List<byte>`和implement ，它有一个索引器`byte[]`。`IList<byte>`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T21:02:21.043

试试这个

```
public static UInt16 GetSourceAddress(IEnumerable<byte> packet){  

 return BitConverter.ToUInt16(new[] {packet.ElementAt(4), packet.ElementAt(5)}, 0);
} 
```

# python - Django 相关名称

> ID：13297690
> 
> 赞同：0
> 
> 时间：2012-11-08T20:58:02.107
> 
> 标签：python, mysql, django

我正在尝试做类似的事情：

```
{% for property in current_listing %}
    {% for property_image in property.property_images.all %}

    {% endfor %}
{% endfor %} 
```

但我想要类似的东西：

```
{% for property in current_listing %}
    {% for property_image in property.property_images.**ORDER_BY('-order')[0]** %}

    {% endfor %}
{% endfor %} 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T21:11:19.913

如果我了解您想要什么，您可以尝试[自定义模板过滤器](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/)：

```
from django import template
register = template.Library()

@register.filter
def get_first_ordered_by(queryset, order):
    return queryset.order_by(order)[0] 
```

然后在模板上：

```
{% load my_tags %}

{% with image=property.property_images.all|get_first_ordered_by:'-order' %}
    {{ image }}
{% endwith %} 
```

请注意，您不能使用 {% for %} 因为结果`get_first_ordered_by`不可迭代。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T21:15:06.220

您可以向模型的类定义添加一个方法，该方法返回您想要的查询，然后从您的模板中获取该方法。

# org-mode - Emacs 组织模式总计表

> ID：13297691
> 
> 赞同：4
> 
> 时间：2012-11-08T20:58:19.917
> 
> 标签：org-mode

我有一个 org 文件，描述了一个项目：

```
* task1
** task1-1
     :PROPERTIES:
     :price: 10
     :given: <2012-11-08 Thu>
     :END:
** task1-2
     :PROPERTIES:
     :price: 11
     :given: <2012-11-08 Thu>
     :END:

* task2
** task2-1
     :PROPERTIES:
     :price: 20
     :given: <2012-11-08 Thu>
     :END:
** task2-2
     :PROPERTIES:
     :price: 21
     :given: <2012-11-08 Thu>
     :END: 
```

我使用 org-collector 生成了一个总计表：

```
#+BEGIN: propview :id global :conds ((not (= price 0))) :cols (ITEM price)
| ITEM      | price |
|-----------+-------|
| "task1-1" |    10 |
| "task1-2" |    11 |
| "task2-1" |    20 |
| "task2-2" |    21 |
|-----------+-------|
|           |    62 |
#+TBLFM: @6$2=vsum(@2$2..@5$2)
#+END: 
```

但我想要这样的东西：

```
| ITEM      | price |
|-----------+-------|
| "task1-1" |    10 |
| "task1-2" |    11 |
| "task2-1" |    20 |
| "task2-2" |    21 |
|-----------+-------|
| Total     |    62 | 
```

怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T21:33:29.117

对于“总计”行，您可以添加一行`|Total| |`，`C-u C-c =`在空单元格中按（为其定义公式），然后输入公式`vsum(@1$2..@4$2)`。（如果你想重新计算，那就是`C-u C-c C-c`全部。）

我不了解 org-collector，所以无法帮助您完成这部分。在整个文档上运行它（正在`:id global`工作？），或者将所有内容向右移动一级，使其位于单个树内，也许。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-27T15:15:07.697

我今天早上才想出这个。您在 Org-Collector 中寻找的答案很简单。只需将表格公式放在属性视图开头下方的两个空白行，它就会在评估属性视图时自动计算（使用`C-c C-c`）。

```
#+BEGIN: propview :scope tree :cols (ITEM CLOCKSUM EFFORT) :match "TODO=\"TODO\"" :noquote ALL

#+TBLFM: @>$1=Totals::@>$2=vsum(@I..@II);t::@>$3=vsum(@I..@II);t
#+END: 
```

如果你想把它变成一个通用的 yasnippet，你需要转义 $ 和 \：

```
#+BEGIN: propview :scope tree :cols (ITEM CLOCKSUM EFFORT) :match "TODO=\\"TODO\\"" :noquote ALL

#+TBLFM: @>\$1=Totals::@>\$2=vsum(@I..@II);t::@>\$3=vsum(@I..@II);t
#+END: 
```

现在，您可以添加一个通用属性视图，用于计算项目每个步骤到目前为止的时间和剩余工作量，以及总时间。

# c# - 参数未传递给主类

> ID：13297702
> 
> 赞同：0
> 
> 时间：2012-11-08T20:59:03.053
> 
> 标签：c#, parameters, constructor

我目前有一个问题，我的程序应该将每个类的参数显示到表单上，但是层次结构中最低的类没有显示。例如; 我希望它显示“1 号慈善自行车手骑着 3 轮三轮车和 300 英镑的赞助费”，但它只显示“1 号慈善自行车手骑着 3 轮三轮车”。

这是我的赞助课程：

```
class Sponsorship : CharityCyclists
{
    private double fundsRaised;

    public double FundsRaised
    {
        get { return fundsRaised; }
        set { fundsRaised = value; }
    }

    public Sponsorship(String type, int number, String finished, int hours, int mins, int secs, string bicycle, int wheels, double fundsRaised) : base(type, number, finished, hours, mins, secs, bicycle, wheels, fundsRaised)
    {
        this.fundsRaised = fundsRaised;
    }

    public override string ToString()
    {
        return base.ToString() + " and sponsorship amount: " + fundsRaised;
    }
} 
```

这是我的 CharityCyclists 课程：

```
class CharityCyclists : Cyclists
{

    private string bicycle;
    private int wheels;

    public string Bicycle
    {
        get { return bicycle; }
        set { bicycle = value; }
    }

    public int Wheels
    {
        get { return wheels; }
        set { wheels = value; }
    }

    public CharityCyclists(string type, int number, string finished, int hours, int mins, int secs, string bicycle, int wheels, double fundsRaised) : base(type, number, finished, hours, mins, secs)
    {
        this.bicycle = bicycle;
        this.wheels = wheels;
    }

    public override string ToString()
    {
        return base.ToString() + " riding a " + bicycle + " with " + wheels + " wheels";
    }
} 
```

和我的自行车班：

```
 public static int NumFinished
    {
        get { return Cyclists.numFinished; }
        set { Cyclists.numFinished = value; }
    }

    public string Type
    {
        get { return type; }
        set { type = value; }
    }

    public int Number
    {
        get { return number; }
        set { number = value; }
    }

    public string Finished
    {
        get { return finished; }
        set { finished = value; }
    }

    public int Hours
    {
        get { return hours; }
        set { hours = value; }
    }

    public int Mins
    {
        get { return mins; }
        set { mins = value; }
    }

    public int Secs
    {
        get { return secs; }
        set { secs = value; }
    }

    public Cyclists(string type, int number, string finished, int hours, int mins, int secs)
    {
        this.type = type;
        this.number = number;
        this.finished = finished;
        this.hours = hours;
        this.mins = mins;
        this.secs = secs;
    }

    public override string ToString()
    {

        return type + " No. " + number;
    }

    public Cyclists()
    {

    } 
```

这是它们被添加到表单列表框中的位置：

```
 Cyclists[] cyclistsList;
        cyclistsList = new Cyclists[2];

        cyclistsList[0] = new CharityCyclists("Novelty Charity Cyclist", 1, "Not Finished", 0, 0, 0, "Tricycle", 2, 300);
        cyclistsList[1] = new CompetitiveCyclists("Competitive Cyclist", 1, "Not Finished", 0, 0, 0, 25, 2);

        for (int i = 0; i < MAX_CYCLISTS; i++)
        {
            lstCyclists.Items.Add(cyclistsList[i]);
        } 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T21:31:11.773

您根本没有创建赞助实例。此时，您正在调用 CharityCyclist 类的 ToString() 覆盖，而不是 Sponsorship，因为此构造函数调用：`cyclistsList[0] = new CharityCyclists("Novelty Charity Cyclist", 1, "Not Finished", 0, 0, 0, "Tricycle", 2, 300);`您应该像这样修改代码：

```
Cyclists[] cyclistsList;
        cyclistsList = new Cyclists[2];

    cyclistsList[0] = new Sponsorship("Novelty Charity Cyclist", 1, "Not Finished", 0, 0, 0, "Tricycle", 2, 300);
    cyclistsList[1] = new CompetitiveCyclists("Competitive Cyclist", 1, "Not Finished", 0, 0, 0, 25, 2);

    for (int i = 0; i < MAX_CYCLISTS; i++)
    {
        lstCyclists.Items.Add(cyclistsList[i]);
    } 
```

它是关于多态性的，您需要创建一个类的实例，该实例覆盖您希望被调用的方法。

# c# - Visual Studio 2012 csc.exe 错误。可执行文件对操作系统无效

> ID：13297704
> 
> 赞同：10
> 
> 时间：2012-11-08T20:59:13.407
> 
> 标签：c#, visual-studio-2012, csc

尝试在 Visual Studio 2012 Professional 中编译和测试任何类型的项目时出现以下错误。

错误 1 ​​指定的任务可执行文件“Csc.exe”无法运行。指定的可执行文件不是此 OS 平台的有效应用程序。

在网上测试了多个建议后，没有任何东西可以解决问题。有谁知道这是什么原因造成的？我需要获取新版本的 Csc.exe 吗？我知道这是编译器，只是不确定我需要做什么来解决问题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-10T17:55:24.373

我今天在我的 Win7 机器上遇到了这个确切的问题。正如汉斯建议的那样，“导航到 C:\Windows\Microsoft.NET\Framework\v4.0.30319 并输入“csc”。

该文件可能仍然存在，但如果您可以使用记事本打开它，它可能只会显示一些错误的纯文本。这表明您的编译器已被破坏。在我的办公室，我们提出了一个理论，即 Windows 更新可能会导致这种情况，因为只有几台机器受到影响，但直到现在我还没有在网上阅读太多关于它的信息。

我们通过将其他人的 csc.exe 复制到 C:\Windows\Microsoft.NET\Framework\v4.0.30319 目录并重新编译来解决此问题。请务必将文件上的选项设置为只读，以免再次发生这种情况。祝你好运！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-06-14T11:54:53.543

Visual Studio 2012 中与 csc.exe 相关的问题大多可以通过修复 Visual Studio 来解决。

您需要修复 Visual Studio。转到**控制面板**->**程序**。然后选择您正在使用的 Visual Studio 版本并按“**更改**”（或右键单击它并按“**更改**”）。出现设置后，单击“**修复**”。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-11-02T14:41:26.023

我在 Visual Studio 2017 上，但这是第一个弹出“找不到 csc.exe”的谷歌结果

当我收到此错误时，我必须重新启动 Visual Studio，并确保选择“以管理员身份运行”。之后一切正常

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-04-26T09:04:59.510

我在尝试将 Asp.Net Mvc 项目从一台计算机移动到另一台计算机时遇到了这个问题；错误消息是：`The specified task executable location "c:\users\mypcname\documents\visual studio 2015\Projects\TestMVC\packages\Microsoft.Net.Compilers.1.0.0\build\..\tools\csc.exe" is invalid.` **我解决**了这个问题

1.  创建新的 Mvc 项目；
2.  去那个文件夹 \Microsoft.Net.Compilers.1.0.0\build..\tools
3.  并将 csc.exe 文件复制到我的 Projets >> \Microsoft.Net.Compilers.1.0.0\build..\tools\

我想当我从原始计算机复制项目时，我将该 csc.exe 文件留在了指定的文件夹中。

希望这会对某人有所帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-08T21:05:52.823

检查您的解决方案属性（右键单击解决方案并选择“属性”）并确保“平台”字段（配置属性）设置正确。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-04-09T10:07:01.460

我认为这个问题是由于 PC 清理不当造成的。我在 64 位 Windows 7 机器上运行 Quick Heal PCtuner 3.0 软件，但突然由于断电，我的机器被关闭，然后当我再次打开它时，我在 VS 2013 中遇到了这个问题。甚至 TortoiseSVN 结帐也无法正常工作并且尝试删除硬盘上的某些文件时，还会显示引发内部错误和损坏的磁盘之类的东西。

我再次运行 PC Tuner 进行磁盘、注册表和跟踪清理，它得到了修复。也许这个问题也可能由于其他情况而发生，但主要与系统文件有关在我的情况下，这是修复

问候。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-08-05T15:53:44.370

在我的情况下有帮助（我有 .net framework 4.5.1 和 vs c# 2010 express）：下载最新的 .net 框架并运行修复

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-12-21T06:43:44.653

在 Visual Studio 2013 上，通过这样做为我解决了同样的问题：右键单击解决方案并打开**配置管理器。**对于该项目（您可能在那里至少看到一个），我已将可能导致问题的项目的平台从**任何 CPU**更改为**x86 。**

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-02-28T15:36:02.037

我试图删除和移动 csc.exe 文件，但它没有做任何事情。

然后只需升级 .net 版本，然后降级（恢复到原始状态），它就可以工作了。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-12-02T13:53:46.567

我通过将包含我的 Visual Studio 解决方案的整个文件夹从 C:\Users\me\Google Drive... 复制到：C:\Users\me\OneDrive... 解决了我的问题

# java - 在摇摆问题中对 GUI 进行编程

> ID：13297707
> 
> 赞同：1
> 
> 时间：2012-11-08T20:59:19.977
> 
> 标签：java, swing, background, opacity, jlayeredpane

我目前正在尝试为我正在制作的游戏创建一个 gui，但我开始遇到一些麻烦。由于某种原因，我无法将计时器的背景更改为蓝色，并将 gameGUI 的背景更改为主板的绿色。这是我第一次在摇摆中编程，所以我对这一切都很陌生。

我也想知道我是否以正确的方式使用 layeredpane。该板需要能够成为分层窗格，以便我可以一直将图像放在它上面。计时器将是一个顶部有太阳的天空，并且云也会在某个时间点从其上方掠过。

如果你能给我一些建议并一路帮助我，即使你只是在这里和那里纠正一些小问题，那也很棒。

谢谢你。

```
public class gameGUI extends JPanel{

    private ArrayList<BufferedImage> nativeOne = new ArrayList<BufferedImage>();
    private ArrayList<BufferedImage> nativeTwo = new ArrayList<BufferedImage>();
    private ArrayList<BufferedImage> nativeThree = new ArrayList<BufferedImage>();
    private ArrayList<BufferedImage> exoticOne = new ArrayList<BufferedImage>();
    private ArrayList<BufferedImage> exoticTwo = new ArrayList<BufferedImage>();
    private ArrayList<BufferedImage> exoticThree = new ArrayList<BufferedImage>();

    private static int screenWidth = 680;
    private static int screenHeight = 680;

    private JLayeredPane layeredPane;

    public gameGUI(){        
        layeredPane = new JLayeredPane();
        layeredPane.setPreferredSize(new Dimension(680, 680));
        layeredPane.setBackground(Color.GREEN);
        layeredPane.setBorder(BorderFactory.createLineBorder(Color.BLACK,2));        
    }

    private static JLayeredPane timer(){
        JLayeredPane timer = new JLayeredPane();
        timer.setPreferredSize(new Dimension(800,120));
        timer.setBorder(BorderFactory.createLineBorder(Color.BLACK, 2));
        timer.setBackground(Color.BLUE);
        return timer;
    }

    private static JPanel sideBar(){
        //Create the side bar and add buttons
        JPanel returnMofo = new JPanel();
        JButton nativeOne = new JButton(native1);
        JButton nativeTwo = new JButton(native2);
        JButton nativeThree = new JButton(native3);
        JButton exoticOne = new JButton(exotic1);
        JButton exoticTwo = new JButton(exotic2);
        JButton exoticThree = new JButton(exotic3);
        returnMofo.setLayout(new GridLayout(6,1));
        returnMofo.setPreferredSize(new Dimension(120, 680));
        returnMofo.setBorder(BorderFactory.createLineBorder (Color.BLACK, 2));
        returnMofo.add(nativeOne);
        returnMofo.add(nativeTwo);
        returnMofo.add(nativeThree);
        returnMofo.add(exoticOne);
        returnMofo.add(exoticTwo);
        returnMofo.add(exoticThree);
        return returnMofo;
    }

    private static void createAndShowGUI(){
        JFrame frame = new JFrame();
        frame.setTitle("Storm Watch");
        frame.setSize(800, 800);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        gameGUI gui = new gameGUI();
        frame.add(timer(), BorderLayout.NORTH);
        frame.add(sideBar(), BorderLayout.WEST);
        frame.add(gui, BorderLayout.EAST);                        

        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args){    
        createAndShowGUI();    
    }                
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T21:15:59.347

确保您将`layeredPane`和设置`timer`为`opaque`。

例如...

```
layeredPane.setOpaque(true); 
```

您可能还想添加`layeredPane`到主板...

```
public TestGameBoard() {
    layeredPane = new JLayeredPane();
    layeredPane.setPreferredSize(new Dimension(680, 680));
    layeredPane.setBackground(Color.GREEN);
    layeredPane.setBorder(BorderFactory.createLineBorder(Color.BLACK, 2));
    layeredPane.setOpaque(true);

    setLayout(new BorderLayout()); // Easy to use layout manager
    add(layeredPane); // Now I'm visible ;)
} 
```

当我引起您的注意时，您应该始终在事件调度线程的上下文中创建/操作 UI...

```
public static void main(String[] args) {

    EventQueue.invokeLater(new Runnable() {
        @Override
        public void run() {
            createAndShowGUI();
        }
    });

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T21:20:41.303

两个问题。首先，在使用 JLayeredPane 时需要使用 setOpaque(true) 使背景色显示。

```
layeredPane.setBackground(Color.GREEN);
layeredPane.setOpaque(true); 
```

...

```
timer.setBackground(Color.BLUE);
timer.setOpaque(true); 
```

其次，您将 gameGUI 而不是 gameGUI 的 layeredPane 添加到框架中。应该：

```
frame.add(gui.layeredPane, BorderLayout.EAST); 
```

# javascript - ExtJS 4.1 - 在不使用同步请求的情况下按顺序处理 XHR

> ID：13297709
> 
> 赞同：0
> 
> 时间：2012-11-08T20:59:34.497
> 
> 标签：javascript, ajax, extjs, xmlhttprequest

我的应用程序由复杂的数据库架构支持，外键限制很重，导致我的 JavaScript 充满了`callback`处理程序。对于单个操作，例如创建新订单，可能需要多达三个 XHR 来提交所有必要的数据以进行处理。

目前，我正在以我觉得相当不雅或至少有点草率的方式处理这个问题......

```
/** -- PSEUDO CODE -- */
myOrder.save({
    success: function()
    {
         /** This request handled inserting the main attributes of the model
             into the database, which means it is safe to fire off additional
             requests */
         myOrderContents.store.sync({
                success: function()
                {
                    /** Possibly fire another request here, that is dependent on
                        the first two requests returning successfully, or maybe
                        execute code that is also dependent on these requests.
                      */
                }
         });
    },
    failure: function()
    {
    /** Handle Failure Here */
    }
}); 
```

我意识到另一种可行的方法是类似于调用一个回调方法的所有请求，然后它只会执行特定的代码块......

```
myOrder.save({callback: executeAfterRequests});
myOrderContents.store.sync({callback: executeAfterRequests});
myOtherObject.save({callback: executeAfterRequests});

executeAfterRequests: function()
{
    if(requestA.isComplete() && requestB.isComplete() && requestC.isComplete())
    {
    /** Execute some code after all requests have been completed... */
    }
} 
```

鉴于 ExtJS 开发人员强烈反对同步请求，我最好的选择是扩展基本 AJAX 类并实现队列吗？或者，接受 AJAX 的本质并继续使用嵌套`success`功能继续我的快乐方式？

谢谢您的意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T05:26:56.187

为什么不将所有需要的数据一起发送到服务器呢？您可以在服务器上逐步创建记录，并在完成后返回。有一些表单向导的例子可以让用户完成一个逐屏收集数据的漫长过程，但最后提交所有数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T21:40:07.397

是的，我会使用一个队列助手，您可以将函数放入其中并一个接一个地包装和执行它们。

也许您应该查看可用的工具，看看其中一个是否适合您的需要[，](http://tamejs.org/)显然[其中](http://www.infoq.com/articles/surviving-asynchronous-programming-in-javascript)有[几个](http://substack.net/posts/e0741f/Seq-Chainable-Asynchronous-Flow-Control-in-Node-js)。不幸的是，我认为，它们都没有被接受为标准技术。

# vb.net - DataGridView 检测未按预期工作的更改

> ID：13297710
> 
> 赞同：1
> 
> 时间：2012-11-08T20:59:37.340
> 
> 标签：vb.net, winforms, .net-4.0, datagridview, datatable

我有一个程序将数据加载到 DataGridView 中，用户可以在其中编辑/添加/删除数据。当他们关闭表单时，如果有任何更改，它会询问用户是否要将更改保存到数据库中。

所以我有一个 DataTable，我加载并分配给 DataGridView 的 DataSource。然后我可以对表中的数据进行更改，如果我调用 DataSet.Update 方法，它就会更新。

但是，如果我调用 DataTable.GetChanges 方法并查看更改，我什么也得不到，除非我在 DataGridView 的当前行中有标签/单击/任何内容（在这种情况下 .GetChanges 有效）这让我相信除非行失去焦点，否则更改不会提交到 DataTable。

那么，有没有一种方法可以检查 DataGridView 中是否有任何单元格发生了更改，或者有一种方法可以在不关闭行的情况下提交这些更改？

同样，如果我不更改 GridView 中的行，这会让我失败，但否则会起作用。我希望它在这两种情况下都有效。

```
 Dim changedRows As New DataTable()
    changedRows = dtInfo.GetChanges(DataRowState.Modified Or DataRowState.Added Or DataRowState.Deleted)
    If Not changedRows Is Nothing Then
    ....
    End If 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T14:46:39.877

您可以调用[Form.ValidateChildren](http://msdn.microsoft.com/en-us/library/ms159409.aspx)方法，这将验证并提交表单中的所有控件，包括您的 DataGridView。如果存在验证错误，此方法将返回 false。

# java - 反转基于正则表达式的解析器

> ID：13297712
> 
> 赞同：1
> 
> 时间：2012-11-08T20:59:51.300
> 
> 标签：java, regex

我继承了一个银行接口解析器。以前的开发人员实际上做得很漂亮。从银行进来的文件是一个固定长度的字段。他从下载中解析该记录的方式是这样的

```
 public static final String HEADER_RECORD_REGEX = "^(\\d{3})(\\d{12})(.{20})(\\d\\d)(\\d\\d)(\\d\\d)(\\d{12})(\\d\\d)$";

private static final int BANK_ID      = 1;
    private static final int ACCOUNT_ID   = 2;
    private static final int COMPANY_NAME = 3;
    private static final int MONTH              = 4;
    private static final int DAY                    = 5;
    private static final int YEAR                 = 6;
    private static final int SEQUENCE     = 7;
    private static final int TYPE_CODE      = 8;
    private static final int GROUP_COUNT  = TYPE_CODE;

if ( GROUP_COUNT == matcher.groupCount() )  {
            setBankId( matcher.group( BANK_ID ) );
            setAccountId( matcher.group( ACCOUNT_ID ) );
            setCompanyName( matcher.group( COMPANY_NAME ) );
            setProcessDate( matcher.group( MONTH ), matcher.group( DAY ),
                            matcher.group( YEAR ) );
            setSeqNumber( matcher.group( SEQUENCE ) );
            setTypeCode( matcher.group( TYPE_CODE ) );
        } 
```

我有一个新的要求来扭转这个过程并从银行实际生成模拟文件，以便我们进行测试。使用这种方法，有没有办法我可以使用相同的正则表达式方法来反转该过程来生成文件，或者我只是回到构建标准解析器。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T21:32:58.430

这基本上可以满足您的要求。你可以玩它，直到它适合你的需要。

```
import java.util.*;

class Main
{
    public static String getLine(String bankID, String acctID, String companyName, String month, String day, String year, String seq, String typeCode)
    {
        return new Formatter()
               .format("%3.3s%12.12s%20.20s%2.2s%2.2s%2.2s%12.12s%2.2s", 
                       bankID, acctID, companyName, month,
                       day, year, seq, typeCode)
               .toString(); // 1 semicolon, technically a 1 liner.  aww yeah
    }

    public static void main(String[] args)
    {
        String tester = "123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ";
        System.out.println(getLine(tester, tester, tester, tester,
                                   tester, tester, tester, tester));
    }
} 
```

该示例的输出是：

> 123123456789ABC123456789ABCDEFGHIJK121212123456789ABC12

[这是ideone。](http://ideone.com/foOLd2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T21:17:04.767

如果通过反转您的意思是将对象输出到文件，那么解析器不是您所需要的。您需要做的就是实现一种方法，该方法使用类似的格式将相同的数据成员输出到文件。您可以将 String.format 与正则表达式中的字段长度一起使用。通过一些重构，您可以提取正则表达式和字符串格式之间的共性，尽管您可能认为这有点过头了，因为这个正则表达式相当简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T23:38:38.287

你需要远离让正则表达式控制你。如果您以另一种方式定义您的结构（我使用`enum`下面的方式），您可以从中派生正则表达式和格式化程序，那么不仅代码将变得更具可扩展性，而且您还可以从中制作编组器和解组器.

这样的事情可能是一个好的开始：

```
public class BankRecords {
  static enum AccountField {
    BANK_ID("\\d", 3) {
      @Override
      void fill ( Account a, String s ) {
        a.bankId = s;
      }
    },
    ACCOUNT_ID("\\d", 12) {
      @Override
      void fill ( Account a, String s ) {
        a.accountID = s;
      }
    },
    COMPANY_NAME(".", 20) {
      @Override
      void fill ( Account a, String s ) {
        a.companyName = s;
      }
    },
    MONTH("\\d", 2) {
      @Override
      void fill ( Account a, String s ) {
        a.month = s;
      }
    },
    DAY("\\d", 2) {
      @Override
      void fill ( Account a, String s ) {
        a.day = s;
      }
    },
    YEAR("\\d", 2) {
      @Override
      void fill ( Account a, String s ) {
        a.year = s;
      }
    },
    SEQUENCE("\\d", 12) {
      @Override
      void fill ( Account a, String s ) {
        a.seqNumber = s;
      }
    },
    TYPE_CODE("\\d", 2) {
      @Override
      void fill ( Account a, String s ) {
        a.typeCode = s;
      }
    };
    // The type string in the regex.
    final String type;
    // How many characters.
    final int count;

    AccountField(String type, int count) {
      this.type = type;
      this.count = count;
    }

    // Each field can fill its part in the Account.
    abstract void fill ( Account a, String s );

    // My pattern.
    static Pattern pattern = Pattern.compile(asRegex());

    public static Account parse ( String record ) {
      Account account = new Account ();
      // Fire off the matcher with the regex and put each field in the Account object.
      Matcher matcher = pattern.matcher(record);
      for ( AccountField f : AccountField.values() ) {
        f.fill(account, matcher.group(f.ordinal() + 1));
      }
      return account;
    }

    public static String format ( Account account ) {
      StringBuilder s = new StringBuilder ();
      // Roll each field of the account into the string using the correct length from the enum.
      return s.toString();
    }

    private static String regex = null;

    static String asRegex() {
      // Only do this once.
      if (regex == null) {
        // Grow my regex from the field definitions.
        StringBuilder r = new StringBuilder("^");
        for (AccountField f : AccountField.values()) {
          r.append("(").append(f.type);
          // Special case count = 1 or 2.
          switch (f.count) {
            case 1:
              break;
            case 2:
              // Just one more.
              r.append(f.type);
              break;
            default:
              // More than that shoudl use the {} notation.
              r.append("{").append(f.count).append("}");
              break;
          }
          r.append(")");
        }
        // End of record.
        r.append("$");
        regex = r.toString();
      }
      return regex;
    }
  }

  public static class Account {
    String bankId;
    String accountID;
    String companyName;
    String month;
    String day;
    String year;
    String seqNumber;
    String typeCode;
  }
} 
```

注意每个如何`enum`封装每个领域的本质。类型、字符数以及它在`Account`对象中的位置。

# debian - 切诺基 URL 重写

> ID：13297715
> 
> 赞同：0
> 
> 时间：2012-11-08T21:00:15.297
> 
> 标签：debian, cherokee

我找不到任何关于 Cherokee rewrite for .php 结尾的文档。基本上我想删除我所有页面上的 .php 。例如：/volunteer 加载 /volunteer.php 但不显示 .php。这可能吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T14:55:18.687

The below is the wrong way of doing things. You'll want to do a rewrite rule.

[http://www.cherokee-project.com/doc/modules_handlers_redir.html](http://www.cherokee-project.com/doc/modules_handlers_redir.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T21:16:48.917

如果您使用的是 MVC 框架，这将是事实上的。如果您只是直接使用 php 并且只想模糊您使用的是哪种语言，则可以更改 php 解析器扩展。例如，您可以将所有内容命名为 .html 并让 php 解析 .html 文件。如果这是您想要的，我可以发布 apache/php 的后续设置。

# sql - 我们如何使用 SQL Server（SSIS、SSRS 或 SQL 代理）向 500 人发送带有附件的电子邮件

> ID：13297717
> 
> 赞同：0
> 
> 时间：2012-11-08T21:00:35.277
> 
> 标签：sql, sql-server, reporting-services, sql-server-2008-r2

我需要你的建议。我们如何向 500 个用户发送带有附件的电子邮件。我们公司使用的是 SQL Server 2008 R2 企业版。

我曾尝试使用`Send Mail`SSIS 中的任务，但由于`To: Cc: Bcc:`.

有什么方法可以使用 SQL 代理或 SSRS 发送？

我对 SSRS 报告订阅收件人还有另一个疑问。

我们可以使用订阅发送报告的最大收件人数。我第二次问的原因是我是否可以通过使用 SSRS 报告订阅向 500 个用户发送报告，然后我可以使用 SSRS。

谢谢你的时间！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T21:18:31.960

我会使用 Database Mail 功能并编写您自己的 T-SQL 代码来使用[Database Mail](http://msdn.microsoft.com/en-us/library/ms189635%28v=sql.105%29.aspx)发送电子邮件。您将用于传入分隔列表的[sp_send_dbmail](http://msdn.microsoft.com/en-us/library/ms190307%28v=sql.105%29.aspx) 参数是 type ，因此我确信它可以处理您的 500 电子邮件地址。我在 MSDN 上找不到任何说明数据类型限制以外的限制的内容。`@recipients``varchar(max)`

如果要重复，我可能会在这种情况下坚持使用 SQL 代理。

**编辑**
正如 Brian 在评论中所建议的，您可能确实想使用`@blind_copy_recipients`具有相同数据类型的 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-05T23:35:59.327

实际上 SSRS 会很好地工作。我们每隔几周使用 SSRS 发送大约 4000-5000 份电子邮件报告。

创建一个生成附件的报告。创建一个提供电子邮件地址和任何报告参数的查询。接下来使用您的查询创建数据驱动订阅。您应该能够根据需要扩展到数千个收件人。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-08T21:04:52.917

您可以编写一个游标，循环遍历所有收件人并一次向一个收件人发送电子邮件...即使您从未编写过游标，按照帮助中的示例进行操作也不难...

# objective-c - 释放 CCScheduler 时，什么可能导致我的程序冻结？

> ID：13297727
> 
> 赞同：0
> 
> 时间：2012-11-08T21:01:04.477
> 
> 标签：objective-c, cocos2d-iphone

最近，当我的游戏试图切换到另一个场景时，一切都冻结了。Xcode 只报告这个：

```
cocos2d: deallocing <CCScheduler: 0x5a9800> 
```

我不太确定为什么会这样。我已经放置了一些断点，它似乎卡在

```
CCARRAY_FOREACH(children_, child)
    child.parent = nil; 
```

这是`CCNode`dealloc 方法的代码。虽然我还不能说是怎么回事。

这个问题：[cocos2D deallocing CCScheduler](https://stackoverflow.com/questions/8913470/cocos2d-deallocing-ccscheduler)似乎和我有类似的问题。但是，据我所知，正如他在回答中提到的那样，我最近从未做过任何与触摸相关的事情。

什么可能导致这个问题？我意识到我不能要求你告诉我是什么原因造成的，但一个线索就足够了。

cocos2d-iphone，1.0.1，iPhone 4。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T21:10:38.950

...我`[[CCDirector sharedDirector]popScene]`在转移时使用而不是`replaceScene`. 如果我没记错的话，真的没有其他`CCScene`更高级别的了。

# linux - X 会话，但仅限远程

> ID：13297729
> 
> 赞同：0
> 
> 时间：2012-11-08T21:01:10.637
> 
> 标签：linux, xserver, xdmcp

我想设置一台运行 Arch Linux 的小型计算机（Raspberry Pi）来接受远程 X 会话。这样做通常意味着设置 Xorg 服务器并运行其中一个显示管理器。我以前这样做过，如果必须，我会走这条路。然而，由于这台机器的功率非常低，而且它实际上没有连接到物理监视器，我希望将 X 服务器设置为只接受远程会话。这样就不会浪费内存来管理本地显卡、视频内存等，因为它们没有被使用。是否可以将 X 服务器设置为只接受远程会话而不进入本地图形模式？如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T21:14:39.820

可以将 *ix 设置为远程显示到您坐在前面的系统，而无需在运行该应用程序的机器上安装 X 服务器。

您需要 X11 库、一个或多个 X11 应用程序，并且您可能希望将 openssh 设置为远程 X11 转发 - 所有这些都在树莓派上。您还需要在您面前的机器上运行 X 服务器。

在 Raspberry Pi 上，更改 sshd_config 以包含“X11Forwarding yes”。进行此更改后，重新启动 sshd 或重新启动。

然后 apt-get 或 yum 你的 X11 库和应用程序。

当您连接到 Raspberry Pi 机器时，使用“ssh -Y”而不是只使用 ssh 来传递 xauth 数据。

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T21:10:38.880

禁用登录管理器和 X 服务器的自动启动，说明是可搜索的，比如[http://www.debianadmin.com/howto-boot-debian-in-text-mode-instead-of-graphical-mode-gui.html](http://www.debianadmin.com/howto-boot-debian-in-text-mode-instead-of-graphical-mode-gui.html)。从个人经验来看，在 raspberry 上远程运行 X 应用程序也不是很好。

# list - Selenium 网格连接节点列表

> ID：13297732
> 
> 赞同：0
> 
> 时间：2012-11-08T21:01:24.620
> 
> 标签：list, selenium, grid, connect, nodes

所以我正在设置一个集线器，多个节点使用 selenium 网格连接到它。我需要有一个这些连接节点的列表。现在我能够找出哪个节点正在运行测试，但我需要一个准备好运行测试的节点列表。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-20T16:11:21.360

您可以在`http://your-hub-domain.com:4444/grid/console`

# python - 为 scipy 安装缺少的依赖项

> ID：13297740
> 
> 赞同：1
> 
> 时间：2012-11-08T21:01:55.527
> 
> 标签：python, installation, scipy

我正在尝试安装 scipy，但是当我完成安装时，我无法导入它。有没有便于安装的GUI？
一般信息：
Windows 7 - Python 2.7 - scipy 0.11.0 - 我按照 abel.ee.ucla.edu/cvxopt/install/index.html 中的步骤安装 Windows 所需的库。我在命令行和 setup.py 目录中使用 python setup.py install 运行了 scipy 的设置。
错误信息[错误链接](https://www.dropbox.com/s/2hzrziuj2q18q4s/error.txt)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T21:37:16.207

如果您正在寻找 Windows 安装程序，您可以在这里找到：[http ://www.lfd.uci.edu/~gohlke/pythonlibs/](http://www.lfd.uci.edu/~gohlke/pythonlibs/)

但正如它所说：这些是**非官方**的，**不受支持**的，您可能必须从那里重新安装 numpy 以及依赖于 numpy 的所有内容！

**仔细阅读说明！**

# php - Preg_replace 在数字前插入字符串

> ID：13297742
> 
> 赞同：-3
> 
> 时间：2012-11-08T21:02:15.877
> 
> 标签：php, wordpress, preg-replace

如何在数字前插入字符串？

我有以下 Wordpress 功能：

```
get_the_term_list( $post->ID, 'level', '', ', ', '' ) 
```

此函数输出如下数字：

```
<a href="#">1</a> 
```

或者，如果数据库中有多个条目：

```
<a href="#">1</a>, <a href="#">2</a> 
```

如何在数字前插入“级别”？使它看起来像这样：

```
<a href="#">level 1</a> 
```

或者：

```
<a href="#">level 1</a>, <a href="#">level 2</a> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T21:05:22.657

[功能参考/获取术语列表](http://codex.wordpress.org/Function_Reference/get_the_term_list)

worpress 手册会告诉您确切的方法。

我不使用 wordpress，但通过“worpress get_the_term_list”找到它

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T21:05:36.967

您只需匹配数字即可。在正则表达式`\d+`中可用于小数。

```
 $text = preg_replace('#>(\d+)<#', '>level $1<', $text); 
```

你可以只使用`>`和`<`锚点。这里`$1`重新插入找到的小数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T21:10:25.073

测试这些。您可能需要调整偏移量、位置编号。这将使您达到 99%。

$numPos = strpos($string, "1");

$firstStr = substr($string, 0, $pos); $secondStr = substr($string, $pos);

$newStr = $firstStr 。“等级” 。$secondStr;

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T21:06:52.440

以下是您的操作方法：

```
get_the_term_list( $post->ID, 'level', 'Level: ', ', ', '' ); 
```

参考：[http ://codex.wordpress.org/Function_Reference/get_the_term_list](http://codex.wordpress.org/Function_Reference/get_the_term_list)

**编辑：**

编辑到`get_the_term_list`_`wp-includes/category-template.php`

```
/**
 * Retrieve a post's terms as a list with specified format.
 *
 * @since 2.5.0
 *
 * @param int $id Post ID.
 * @param string $taxonomy Taxonomy name.
 * @param string $before Optional. Before list.
 * @param string $sep Optional. Separate items using this.
 * @param string $after Optional. After list.
  * @param string $beforeEach Optional. After each term.
 * @return string
 */
function get_the_term_list( $id, $taxonomy, $before = '', $sep = '', $after = '', $beforeEach = '' ) {
    $terms = get_the_terms( $id, $taxonomy );

    if ( is_wp_error( $terms ) )
        return $terms;

    if ( empty( $terms ) )
        return false;

    foreach ( $terms as $term ) {
        $link = get_term_link( $term, $taxonomy );
        if ( is_wp_error( $link ) )
            return $link;
        $term_links[] = '<a href="' . esc_url( $link ) . '" rel="tag">'. $beforeEach . $term->name . '</a>';
    }

    $term_links = apply_filters( "term_links-$taxonomy", $term_links );

    return $before . join( $sep, $term_links ) . $after;
} 
```

用法：

```
get_the_term_list( $post->ID, 'level', '', ', ', '', 'Level: '); 
```

# python - PyYAML：控制由 yaml.load() 调用的项目的顺序

> ID：13297744
> 
> 赞同：17
> 
> 时间：2012-11-08T21:02:22.943
> 
> 标签：python, pyyaml

我有一个 yaml 设置文件，它在 db 中创建一些记录：

```
setting1:
  name: [item,item]
  name1: text
anothersetting2:
  name: [item,item]
  sub_setting:
      name :[item,item] 
```

当我使用*setting3*更新此文件并通过以下方式在 db 中重新生成记录时：

```
import yaml
fh = open('setting.txt', 'r')
setting_list = yaml.load(fh)
for i in setting_list:
    add_to_db[i] 
```

每次将它们添加到数据库时，它们的设置顺序（数据库中的 id 编号）都保持相同，这一点至关重要……而 setting3 只是被附加到 yaml.load() 的末尾，这样它的 id 就不会了t混淆已经在数据库中的任何记录......目前每次我添加另一个设置并调用 yaml.load() 记录以不同的顺序加载，从而导致不同的 id。我欢迎任何想法；）

**编辑：** 我遵循了*abarnert 的*提示并采取了这个要点[https://gist.github.com/844388](https://gist.github.com/844388)

按预期工作谢谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2018-05-09T15:44:53.200

我的项目[`oyaml`](https://github.com/wimglenn/oyaml)是 PyYAML 的替代品，它将加载地图`collections.OrderedDict`而不是常规字典。只需 pip 安装并正常使用 - 适用于 Python 3 和 Python 2。

用你的例子演示：

```
>>> import oyaml as yaml  # pip install oyaml
>>> yaml.load('''setting1:
...   name: [item,item]
...   name1: text
... anothersetting2:
...   name: [item,item]
...   sub_setting:
...       name :[item,item]''')
OrderedDict([('setting1',
              OrderedDict([('name', ['item', 'item']), ('name1', 'text')])),
             ('anothersetting2',
              OrderedDict([('name', ['item', 'item']),
                           ('sub_setting', 'name :[item,item]')]))]) 
```

请注意，如果 stdlib 字典是顺序保留的（Python >= 3.7，CPython >= 3.6），那么`oyaml`将使用普通字典。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-08-18T10:49:08.170

您现在可以为此使用**ruaml.yaml**。

来自[https://pypi.python.org/pypi/ruamel.yaml](https://pypi.python.org/pypi/ruamel.yaml)：

> ruamel.yaml 是一个 YAML 解析器/发射器，支持注释的往返保存、seq/map 流样式和映射键顺序

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-08T22:30:27.713

YAML 规范明确指出，映射中的键顺序是不能依赖的“表示细节”。因此，如果您的设置文件依赖于映射，则它已经无效，如果可能的话，最好使用有效的 YAML。

当然，YAML 是可扩展的，没有什么能阻止您向设置文件添加“有序映射”类型。例如：

```
!omap setting1:
  name: [item,item]
  name1: text
!omap anothersetting2:
  name: [item,item]
  !omap sub_setting:
      name :[item,item] 
```

你没有提到`yaml`你正在使用哪个模块。标准库中没有这样的模块，并且仅在 PyPI 上至少有两个包提供具有该名称的模块。但是，我猜它是 PyYAML，因为据我所知这是最受欢迎的。

上面描述的扩展很容易用 PyYAML 解析。见[http://pyyaml.org/ticket/29](http://pyyaml.org/ticket/29)：

```
def omap_constructor(loader, node):
    return loader.construct_pairs(node)
yaml.add_constructor(u'!omap', omap_constructor) 
```

现在，而不是：

```
{'anothersetting2': {'name': ['item', 'item'],
  'sub_setting': 'name :[item,item]'},
 'setting1': {'name': ['item', 'item'], 'name1': 'text'}} 
```

你会得到这个：

```
(('anothersetting2', (('name', ['item', 'item']),
  ('sub_setting', ('name, [item,item]'),))),
 ('setting1', (('name', ['item', 'item']), ('name1', 'text')))) 
```

当然这给了你一个`tuple`key-value `tuple`，但是你可以很容易地写一个construct_ordereddict 并得到一个`OrderedDict`。如果您需要输出和输入，您还可以编写一个将`OrdereredDict`对象存储为s 的表示器。`!omap`

如果您真的想挂钩 PyYAML 以使其使用 an`OrderedDict`而不是 a`dict`进行默认映射，那么如果您已经直接处理解析器对象，这很容易做到，但如果您想坚持使用高级便利方法则更加困难. 幸运的是，上面链接的票证有一个您可以使用的实现。请记住，您不再使用真正的 YAML，而是一种变体，因此任何其他处理您的文件的软件都可能并且很可能会破坏。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-28T00:56:53.117

对于已知为有序字典的给定单个项目，只需制作列表中的项目并使用 collections.OrderedDict：

```
setting1:
  - name: [item,item]
  - name1: text
anothersetting2:
  - name: [item,item]
  - sub_setting:
      name :[item,item]

import collections
import yaml
fh = open('setting.txt', 'r')
setting_list = yaml.load(fh)

setting1 = collections.OrderedDict(list(x.items())[0] for x in setting_list['setting1']) 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-11-08T22:08:57.000

上次我听说，PyYAML 不支持这一点，尽管修改它以接受字典或类似字典的对象作为起点可能很容易。

# iphone - 仅使用来自不同目标的类的一部分

> ID：13297745
> 
> 赞同：1
> 
> 时间：2012-11-08T21:02:27.973
> 
> 标签：iphone, objective-c, ios, xcode, cocoa-touch

我刚刚为我的应用程序的 Lite 版本创建了一个新目标。Lite 应用程序仅使用我在主应用程序中拥有的基类的一部分，即它不需要使用要求它导入 4 或 5 个文件的选项。

我的问题是，从设计的角度来看，处理这个问题的最佳方法是什么，以便我的 Lite 版本只能使用它需要的类的一部分？显然，一种解决方案是我只是将这 4 个不必要的文件导入 Lite 构建阶段，然后只使用整个类（甚至是它不需要的部分）。不过，这似乎效率低下。我知道如果 Lite 版本正在运行，我可以执行 ifndef 来阻止导入这些文件，但是如何阻止类中的代码也不会被编译器拾取？

更好的方法是让我的 Lite 版本创建一个只使用它需要的选项的 Base 类的子类吗？但是我相信，我还需要导入那些不必要的文件吗？

对此有点困惑，我第一次创建了另一个使用主目标代码的目标。任何帮助表示感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T21:15:18.090

将 common/lite 功能放在一个超类中。子类中的重功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T17:21:58.750

正如另一个答案指出的那样，您可以通过将精简功能放在子类中并将完整功能放在超类中来处理这个问题。

另一种选择是使用单个类，并在 Objective-C 类别中添加全部功能。本质上，您可以在类别中定义方法来补充或替换基本实现中的方法。

然而，与子类不同的是，类别中定义的方法不能调用`super`来获得基类的功能。`super`仍然指的是基类的超类，无论是 NSObject、UIDocument 还是你拥有的——而不是没有类别的实现。

优点是您只有一个类名，因此实例化您的类（或类）的代码不需要使用诸如`#ifdef`切换类和#includes 之类的东西，具体取决于您构建的是精简版还是完整版。

# python - 来自列表或集合的 Django 查询集

> ID：13297746
> 
> 赞同：-1
> 
> 时间：2012-11-08T21:02:33.357
> 
> 标签：python, django, django-queryset, django-orm

我有一个列表（可以是一组或另一个可迭代的），比如说，电子邮件字符串，我想获取所有模型的对象，这些对象具有与这些电子邮件中的任何一个匹配的属性“电子邮件”。

我在做：

```
from myapp.models import MyModel
l=['email1@x.com', 'email2@x.com', 'email3@y.com']
from django.db.models import Q

q = Q(email=l[0])
for e in l[1:]:
    q |= Q(email=e)
MyModel.objects.get(q) 
```

有没有办法更优雅地做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T21:05:47.070

您可以使用：

```
MyModel.objects.filter(email__in=l) 
```

# python - Python：除了 ValueError 仅适用于字符串。

> ID：13297748
> 
> 赞同：1
> 
> 时间：2012-11-08T21:02:54.303
> 
> 标签：python, except

Python 3.3 中是否有一种方法只能将 ValueError 排除在字符串之外？如果我在 k 中键入一个字符串，我希望打印“无法将字符串转换为浮点数”，而不是“不能取负数的平方根”。

```
while True:
    try:
        k = float(input("Number? ")) 
```

……

```
 except ValueError:
        print ("Cannot take the square root of a negative number")
        break
    except ValueError:
        print ("Could not convert string to float")
        break 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T21:07:34.240

如果要根据其来源处理不同的异常，最好将可能引发异常的不同代码部分分开。然后，您可以在引发异常的相应语句周围放置一个 try/except 块，例如：

```
while True:
    try:
        k = float(input("Number? "))
    except ValueError:
        print ("Could not convert string to float")
        break
    try:
        s = math.sqrt(k)
    except ValueError:
        print ("Cannot take the square root of a negative number")
        break 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T21:07:43.243

简单，只需删除您的其他`except ValueError`：

```
while True:
    try:
        k = float(input("Number? ")) 
```

……

```
 except ValueError:
        print ("Could not convert string to float")
        break 
```

如果要检查数字是否为负，只需.. 检查是否为负：

```
if k < 0:
   print("Number is negative!") 
```

# iphone - 如何使用 cocos2d 获取用户输入

> ID：13297750
> 
> 赞同：4
> 
> 时间：2012-11-08T21:03:03.433
> 
> 标签：iphone, objective-c, cocos2d-iphone

我希望在我正在构建的游戏开始时提示用户输入他/她的名字。

在 cocos2d 中获取用户输入的最佳方式是什么？

谢谢你，乔伊

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-08T21:26:48.343

Cocos2d 没有任何文本输入控件，但是您可以在 Cocos2d 2.0 中轻松地将 UIKit 控件添加到场景中

```
[[CCDirector sharedDirector] view] addSubview:myTextField]; 
```

您可以使用嵌入文本字段的 UIAlertView。

```
UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Title" message:@"Message" delegate:self cancelButtonTitle:@"Done" otherButtonTitles:nil];
alert.alertViewStyle = UIAlertViewStylePlainTextInput;
[alert show];
//[alert release]; If not using ARC 
```

要从 UIAlertView 接收事件，您需要实现**UIAlertViewDelegate**。在您的头文件中将委托协议添加到您的界面

```
@interface BTMyScene : CCLayer <UIAlertViewDelegate> 
```

然后在您的实现文件中添加您想要接收通知的委托协议中的任何方法。你可能想要这个

```
- (void)alertView:(UIAlertView *)alertView didDismissWithButtonIndex:(NSInteger)buttonIndex
{
     UITextField *textField = [alertView textFieldAtIndex:0];
     NSString *name = textField.text;
} 
```

我建议阅读[UIAlertView](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIAlertView_Class/UIAlertView/UIAlertView.html)和[UIAlertViewDelegate](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIAlertViewDelegate_Protocol/UIAlertViewDelegate/UIAlertViewDelegate.html)的文档。您将看到可以使用的所有可用方法。

# python - 调用所有 __init__ 但在 Python 中调用一次

> ID：13297754
> 
> 赞同：2
> 
> 时间：2012-11-08T21:03:12.150
> 
> 标签：python, multiple-inheritance

我有一个像

```
class A:
    def __init__(self, x):
        self.a=x

class B(A):
    def __init__(self, x):
        self.b=x

class C(A):
    def __init__(self, x):
        self.c=x

class D(B,C):
    def __init__(self, x):
        self.d=x 
```

现在我想扩展`__init__`s 使得`B`和`C`都可以调用`A`（B 和 C 可以用作独立类）。此外`D`，应该调用 A、B 和 C（D 结合了 B 和 C 的特征，但仍需要运行所有初始化）。都`__init__`采用相同的参数。显然 A 应该只被调用一次。

你看到一个简单的方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T21:05:10.350

使用[`super`](http://docs.python.org/2/library/functions.html#super). 据我所知，这就是它的目的......

首先，一些建议阅读：

*   超级被认为是[有害](https://fuhm.net/super-harmful/)的和[超级](http://rhettinger.wordpress.com/2011/05/26/super-considered-super/)的（同时——被不同的人）

接下来，一个例子：

```
class A(object):
    def __init__(self, x):
        print "Called A"
        self.a=x

class B(A):
    def __init__(self, x):
        print "Called B"
        super(B,self).__init__(x)
        self.b=x

class C(A):
    def __init__(self, x):
        print "Called C"
        super(C,self).__init__(x)
        self.c=x

class D(B,C):
    def __init__(self, x):
        print "Called D"
        super(D,self).__init__(x)        
        self.d=x

foo = D(10) 
```

如评论中所述，您经常看到使用 super 定义的方法来接受任意数量的位置和关键字参数：

```
def mymethod(self,*args,**kwargs):
    super(thisclass,self).method(*args,**kwargs)
    ... 
```

因为这允许`super`将必要/不必要的参数传递给继承链中的其他对象。然后这些方法可以决定他们需要哪些参数并忽略其余的（当然将它们传递给下一个`super`）

* * *

最后，为了完成这个讨论，我们需要讨论 python2.x 与 python3.x。在 python2.x 中，你所有的类都必须是新样式（它们最终需要继承`object`）。在 python3.x 中，这是自动的。在 python3.x 中，您可以省略`super`.

```
 super().__init__(*args,**kwargs) 
```

但是，我更喜欢 python2.x 样式，因为它适用于 python2.x 和 python3.x，我总是想知道`super()`（python3.x 样式）如何知道将什么对象传递给底层方法作为`self`. 对我来说，这似乎比 python2.x 版本更神奇......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T21:11:09.607

使用[`super`](http://docs.python.org/2/library/functions.html#super)

```
class D(B, C):
    def __init__(self, *args, **kwargs):
        super(D, self).__init__(*args, **kwargs)
        self.d = args[0] 
```

[关于 super here](http://rhettinger.wordpress.com/2011/05/26/super-considered-super/)和[相关问题的一些解释](https://stackoverflow.com/questions/576169/understanding-python-super-and-init-methods)

在 Python 2 中，您还应该继承 from`object`以使用新样式类，并添加`super`到您的其他类中。

# ios - dateFromString 打印出“（空）”

> ID：13297755
> 
> 赞同：0
> 
> 时间：2012-11-08T21:03:13.490
> 
> 标签：ios, nsdate, nsdateformatter

我知道对此有很多问题，但似乎没有一个答案对我有用。这是我的代码（iOS SDK 6.0）

```
NSDateFormatter *df = [NSDateFormatter alloc];
[df setDateFormat:@"yyyy-MM-dd"];
[df setFormatterBehavior:NSDateFormatterBehavior10_4];
[df setTimeZone:[NSTimeZone defaultTimeZone]];
[df setLocale:[NSLocale currentLocale];
NSDate *TERMIN = [NSDate alloc];
TERMIN = [df dateFromString:T]; //'T' is date in string NSLog(...,T) is 2002-05-05 
```

当我`TERMIN`通过`NSLog`输出输出时`(null)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T21:05:00.450

你忘了初始化 NSDateFormatter 对象

```
NSDateFormatter *df = [[NSDateFormatter alloc] init]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T21:29:19.487

好的，这有点不妥，我是像 object.variable 一样的 NSLoging，而不是来自外部的 [object getVariable] ......这就是整个问题。很抱歉打扰你们，我真是个愚蠢的* ss :D

另一个问题出现了，上面的代码将 2002-05-05 变成了 2002-05-04。但那是另一个故事，我猜...

# graphics - 在 DirectX 上限制绘图区域

> ID：13297757
> 
> 赞同：2
> 
> 时间：2012-11-08T21:03:35.267
> 
> 标签：graphics, directx, direct2d

我正在使用 Direct2D 绘制自定义图表。该图表在图表一侧绘制了 x 轴和 y 轴标签。当我垂直缩放图表时，一些数据将绘制在 x 轴标签的顶部，我希望始终保持轴标签的清洁。将绘画区域限制为自定义矩形而不是整个控件的最佳方法是什么？

我有几个想法，但我不确定是否有更好的方法来做到这一点：

方法1)

使用 GDI 样式并在一个面板上绘制图表区域，在另一个面板上绘制轴标签。这样，当我绘制到图表面板时，我就不会弄乱轴标签。问题是我将不得不制作更多的 Direct2D 对象（至少为每个控件 (hWnd) 呈现目标），并且我不确定这样做会影响性能。

方法2)

每次更新轴标签时将其复制到位图，然后在图表面板命令之后将这些位图绘制到控件顶部。这比方法1便宜吗？

方法3)

在每次绘图操作中手动检查像素位置，并在必要时进行修改。这似乎是最糟糕的选择。

编辑：

方法4)

与方法 1) 相同，但使用 GDI+ 绘制轴标签并仅对图表使用 Direct2D。

方法5)

使用 ID2DLayer。我刚刚从[MSDN 文档](http://msdn.microsoft.com/en-us/library/dd756654%28VS.85%29.aspx)中找到了这个功能。这似乎是我正在寻找的东西，但它带有许多关于频繁使用的性能影响的警告。

你的意见？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T13:27:40.713

您可以使用轴对齐的夹子，这样不那么饿。

[推](http://msdn.microsoft.com/en-us/library/dd742855%28v=vs.85%29.aspx)

[流行](http://msdn.microsoft.com/en-us/library/dd316850%28v=vs.85%29.aspx)

来自 msdn 的示例：

```
pRT->PushAxisAlignedClip(
D2D1::RectF(20, 20, 100, 100),
D2D1_ANTIALIAS_MODE_PER_PRIMITIVE
);

pRT->FillRectangle(D2D1::RectF(0, 0, 200, 133), m_pOriginalBitmapBrush);
pRT->PopAxisAlignedClip(); 
```

# ios - 如果用户过去删除了 facebook 应用程序，则用户无法再次登录 facebook。问题仅来自 ios6.0 facebook 集成

> ID：13297758
> 
> 赞同：0
> 
> 时间：2012-11-08T21:03:38.020
> 
> 标签：ios, facebook, ios6

> **可能重复：**
> [在设备上切换 FB 帐户时，iOS6 上的 Facebook 授权失败](https://stackoverflow.com/questions/12838118/facebook-authorization-fails-on-ios6-when-switching-fb-account-on-device)

所以我发现如果用户使用 facebook 网络设置删除我的应用程序，然后尝试使用 ios 6.0 facebook 集成再次登录，他们会收到以下错误。

仅当他们使用 iOS 6.0 facebook 集成时。如果他们不使用 facebook 集成（并且只需使用旧式登录程序），他们可以重新登录应用程序。

其他人可以重现这个吗？

```
Error Domain=com.facebook.sdk Code=5 "The operation couldn’t be completed. (com.facebook.sdk error 5.)" UserInfo=0x155326b0 {com.facebook.sdk:ParsedJSONResponseKey={
    body =     {
        error =         {
            code = 190;
            message = "The access token was invalidated on the device.";
            type = OAuthException;
        };
    };
    code = 400;
}, com.facebook.sdk:HTTPStatusCode=400} 
```

# user-controls - Umbraco 添加自定义文档类型

> ID：13297762
> 
> 赞同：0
> 
> 时间：2012-11-08T21:04:16.013
> 
> 标签：user-controls, umbraco

是否可以将自定义控件添加到`Document Type`? 假设我无法创建多选或只是一个简单的文本字段控件。我如何创建一个自定义的并从`Document Type`Umbraco 的页面中使用它？

如果这是可能的，那么需要采取哪些步骤？`Document Type`因为我可以在当前存在的控件中添加各种配置信息。就像，当我添加 a 时，`textfield`我可以给它 a `name`、 an`alias`和一条`validation`消息（它还有其他一些选项）。

我是否必须以特定方式构建自定义文档类型控件？它是如何保存到数据库中的？Umbraco 是如何处理的？

任何关于此事的信息都非常受欢迎！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T00:29:00.887

由于添加自定义*文档类型*是 Umbraco 原生的，并且根据您问题中的描述来判断，我将假设您正在谈论使用用户控件添加自定义*数据类型。*

如果是这样，请检查以下有关该主题的一些链接，它实际上相当简单：

*   [使用 umbraco 用户控件包装器创建自定义数据类型](http://www.nibble.be/?p=24)（我个人使用这个）
*   [Umbraco 中的自定义数据类型](http://www.oshyn.com/_blog/Web_Content_Management/post/Custom_DataTypes_in_Umbraco/)
*   [使用 usercontrol 包装器创建自定义数据类型](http://umbraco.com/help-and-support/video-tutorials/developing-with-umbraco/data-editors/creating-a-custom-datatype-using-the-usercontrol-wrapper)（视频教程）

# c# - 将 NULL 添加到 DropdownList-options

> ID：13297763
> 
> 赞同：0
> 
> 时间：2012-11-08T21:04:17.123
> 
> 标签：c#, asp.net-mvc

在我的 ASP.NET MVC4 应用程序中，我需要一个下拉列表来选择一个位置并将其 ID 插入到一个表中，比如新闻。一些新闻适用于所有位置 - 因此新闻中的 LocationID 可以为空，以表明这一点。

所以我需要在下拉列表中添加“所有位置”。

这就是我想象的方式，它会起作用 - 但在最后一行 Value = DBNull.Value （或简单的 null ）是不允许的。它只接受一个整数。我不能使用“0”作为该表上的外键约束不允许 0，因为 Locations-table 中没有 ID=0

```
var locations = db.Locations.Select(c => new { DisplayText = c.Location, Value = c.ID }).ToList();
locations.Insert(0, new { DisplayText = "All Locations", Value = DBNull.Value });
return Json(new { Result = "OK", Options = locations}); 
```

如何将其添加到选项列表中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T21:07:21.607

您的位置匿名对象的基础是`new {}`在您的 Linq 语句的运算符中创建的。如果您需要允许 NULL，那么...`new { DisplayText = c.Location, Value = (int?)c.ID }`将匿名类型的 Value 参数显式设置为可为 null 的 int。然后你可以`Value = null`在插入时在下一行做。

# localization - Telerik MVC 控件的本地化服务

> ID：13297765
> 
> 赞同：0
> 
> 时间：2012-11-08T21:04:32.560
> 
> 标签：localization, telerik, telerik-mvc

我们正在使用本地化为 ResX 文件的 Telerik MVC 控件（目前不是 Kendo）。我们需要使用客户提供的本地化服务。

我们如何告诉 Telerik 使用 ResX 文件以外的东西进行本地化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T20:25:49.923

您可以尝试创建一个自定义资源提供程序，[这里](https://stackoverflow.com/questions/5583529/specifying-custom-resource-file-for-an-asp-net-page-usercontrol)基本上介绍了它。

# php - 表单上的 strpos 错误

> ID：13297767
> 
> 赞同：1
> 
> 时间：2012-11-08T21:04:38.080
> 
> 标签：php, mysql

我正在编码组的位置，用户可以根据位置进行搜索以找到离他们最近的组。字段是：国家、州、城市、社区。假设美国有十个组——我不希望它列出选项 USA 十次。我添加了一个 strpos 以便它只会列出一次，但我得到了一个错误。

这是php代码：

```
<?php
$myQuery = "select country, state, city, neighborhood from groups WHERE group_status = 'open to new members'";

$rs = mysql_query($myQuery);

$country_options = $state_options = $city_options = $neighborhood_options = '';

while($get_row = mysql_fetch_assoc($rs)){

$pos_country = strpos($get_row['country'], $country_options);

if($pos_country === false) {
echo $country_options .= "<option value='" . $get_row['country'] . "'>" . $get_row['country'] . "</option>";}

$pos_state = strpos($get_row['state'], $state_options);
if($pos_state === false) {
echo $state_options .= "<option value='" . $get_row['state'] . "'>" . $get_row['state'] . "</option>";}

$pos_city = strpos($get_row['city'], $city_options);
if($pos_city === false) {
echo $city_options .= "<option value='" . $get_row['city'] . "'>" . $get_row['city'] . "</option>";}

$pos_neighborhood = strpos($get_row['neighborhood'], $neighborhood_options);
if($pos_neighborhood === false) {
echo $neighborhood_options .= "<option value='" . $get_row['neighborhood'] . "'>" . $get_row['neighborhood'] . "</option>";}

}
?> 
```

它输出以下错误：

> 警告：strpos()：第 66 行的 sidebar.php 中的空分隔符
> 
> 警告：strpos()：第 70 行的 sidebar.php 中的空分隔符
> 
> 警告：strpos()：第 73 行的 sidebar.php 中的空分隔符
> 
> 警告：strpos()：第 76 行的 sidebar.php 中的空分隔符

在错误下方，它有一个带有正确字段的漂亮表单：国家、州、城市、社区。它只是多次列出相同的国家。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T21:09:20.243

`delimiter`for`strpos()`是传入的第二个参数。

在您的代码中，您从以下内容开始：

```
$country_options = $state_options = $city_options = $neighborhood_options = ''; 
```

这些都是您用作分隔符的值，它们都是空的 - 因此您的错误。使用给定密钥执行检查*后，**然后*设置它。例如：`strpos()`

 *```
$pos_country = strpos($get_row['country'], $country_options);
if($pos_country === false) {
    echo $country_options .= "<option value='" . $get_row['country'] . "'>" . $get_row['country'] . "</option>";
} 
```

我不确定您要使用 搜索什么字符`$country_options`，但您会立即在其上附加一个`<option></option>`标签（这是一个非常长的分隔符）。您是否使用了错误的变量作为您要搜索的字符？

**编辑**
重新阅读您的问题后，我了解您要实现的目标（我认为）。您只是不想多次显示同一个国家、州、城市或社区。

为了实现这一点，保留一个“可见”值数组并在每个循环中检查该数组可能会更容易。尝试这样的事情：

```
$countries = array();
$states = array();
$cities = array();
$neighborhoods = array();

while($get_row = mysql_fetch_assoc($rs)) {
    if (!in_array($get_row['country'], $countries)) {
        $country_options .= '<option value="' . $get_row['country'] . '">' . $get_row['country'] . '</option>';
        $countries[] = $get_row['country'];
    }

    if (!in_array($get_row['state'], $states)) {
        $state_options .= '<option value="' . $get_row['state'] . '">' . $get_row['state'] . '</option>';
        $states[] = $get_row['state'];
    }

    if (!in_array($get_row['city'], $cities)) {
        $city_options .= '<option value="' . $get_row['city'] . '">' . $get_row['city'] . '</option>';
        $cities[] = $get_row['city'];
    }

    if (!in_array($get_row['neighborhood'], $neighborhoods)) {
        $neighborhood_options .= '<option value="' . $get_row['neighborhood'] . '">' . $get_row['neighborhood'] . '</option>';
        $neighborhoods[] = $get_row['neighborhood'];
    }
} 
```*

# asp.net-mvc - 如何在 MVC 4 中制作 @Html.DisplayFor 多行

> ID：13297769
> 
> 赞同：4
> 
> 时间：2012-11-08T21:04:40.077
> 
> 标签：asp.net-mvc, visual-studio-2010, razor

我正在尝试以多行显示客户地址，该地址适用于@Html.EditorFor 但不适用于@Html.DisplayFor。我在这里尝试过其他帖子，但没有得到它的工作。这是开始的内容以及我没有运气的尝试

```
@Html.DisplayFor(model => model.CustomerPostalAddress)
@Html.Raw(Html.Encode(Model.CustomerPostalAddress).Replace("\n","<br/>")) 
```

这是模型中的字段

```
 [DataType(DataType.MultilineText)]
 public string CustomerPostalAddress { get; set; } 
```

任何帮助将非常感激

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-06-24T10:38:52.947

只需添加此 css 样式属性即可呈现多行文本，这比使用 .replace 之类的服务器端字符串操作的 cpu 更好：

```
.multiline
{
   white-space: pre-wrap;
} 
```

然后

```
<div class="multiline">
  my multiline
  text
</div> 
```

这将呈现像**br**元素一样的**换行符。**

 **在这里试试：[https ://snippet.run/xaf4](https://snippet.run/xaf4)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-08T21:23:07.183

您可能想在 Views/Shared/DisplayTemplates/DisplayPostalAddr.cshtml 中创建一个 DisplayTemplate

```
@model string

<p>@Model</p> 
```

然后给你模型一个关于如何显示它的提示

```
[DataType(DataType.MultilineText)]
[UIHint("DisplayPostalAddr")]
public string CustomerPostalAddress { get; set; } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-12-09T13:28:50.377

[正如在make DisplayFor 显示换行符](https://stackoverflow.com/a/59249806/422877)中提到的，我覆盖（引入？）一个默认的 DisplayTemplate for `DataType.MultilineText`，`/Views/Shared/DisplayTemplates/MultilineText.cshtml`只包含这一行：

```
<span style="white-space: pre-wrap">@this.Model</span> 
```

我猜这个模板是自动解析的，因为我不需要`UIHint`或任何其他参考或注册。（当然你也可以引入一个 CSS 类，或者在视图中替换换行符，如果你愿意的话。）

*使用默认的 DisplayTemplate 将修复所有*用 (type-safe,meaning) 注释的属性的换行符`[DataType(DataType.MultilineText)]`，而不仅仅是用 注释的属性`UIHint("DisplayPostalAddr")`。**

# objective-c - 如何设置作为子视图的 UIScrollView 的 ContentSize？

> ID：13297771
> 
> 赞同：0
> 
> 时间：2012-11-08T21:04:45.320
> 
> 标签：objective-c, xcode, uiscrollview

我有一个使用 Storyboards 的 iPad 应用程序。我有一个带有 UIView 的场景，它的上半部分有一个额外的 UIView（我在上面绘制），下半部分有一个 UIScrollView（我需要将它们分开）。我很难弄清楚如何使用从另一个 SO 问题复制的代码来解决 UIView 问题：

```
CGFloat scrollViewHeight = 0.0f;
for (UIView* view in scrollView.subviews)
{
   scrollViewHeight += view.frame.size.height;
}

[scrollView setContentSize:(CGSizeMake(320, scrollViewHeight))]; 
```

按照我阅读上面代码的方式，我应该使用 UIView，但这没有意义，因为 UIView 覆盖了整个“场景/窗口”。使用 UIScrollView 计算 ContentSize 对我来说更有意义。

那么，我应该使用什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T21:28:35.703

不完全清楚你在问什么。一旦通过标签、属性或其他方法引用了滚动视图，您应该将其内容大小设置为其所有内容组合的宽度和高度（考虑重叠等）。前任。如果您在滚动视图中有一个 600 x 900 点的图像视图，您可以将其大小设置为 600 x 900 CGSize。

这使用循环（也称为快速枚举）遍历滚动视图的所有子视图`for...in`，将它们的高度加在一起，然后将其用作内容的高度。我认为这不是一个好方法，因为这假设所有子视图都完美地垂直堆叠在一起。它基本上是这样的，“对于我的滚动视图的每个子视图，将它们的高度添加到这个总数中，然后将其用作内容大小的高度。”

管理滚动视图的最简单方法是将所有内容放入一个 UIView 中，将其放置在滚动视图中，然后将滚动视图的内容大小设置为 UIView 的框架。如果您需要对滚动视图中包含的 UIView 的引用，可以将其设置为属性或给它一个标签并使用`viewWithTag`.

# javascript - 通过谷歌图表中的鼠标悬停更新

> ID：13297772
> 
> 赞同：2
> 
> 时间：2012-11-08T21:04:47.247
> 
> 标签：javascript, google-visualization

我正在使用 Google 图表以交互方式绘制一些数据。

我想画两个图表。第一个图表绘制了 f(x) 与 x 的关系。第二个图表绘制了 g(x,y) 与 y 的关系（对于固定值 x）。在第一个图表的鼠标悬停时，x 值将用于重绘 g(x,y) 与 y。

例如，当鼠标悬停在第一个图表上的 x=1 时，第二个图表将刷新，绘制 g(1,y) 与 y。

我能够做到这一点的唯一方法是在 javascript 中手动绑定 mouseover 事件，并触发第二个图表的完全重绘（通过擦除其数据并使用鼠标悬停的 x 值复制数据）。但是，有一个内置机制可以使用控件中的值（例如滑块，[此处的示例](http://code.google.com/apis/ajax/playground/?type=visualization#simple_dashboard)）重新绘制图表。

有谁知道是否有一种方法可以绑定两个图表，以便可以使用鼠标悬停事件重绘一个带有新参数的图表？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-11T00:56:47.677

查看[Programmatic Control Changes](http://code.google.com/apis/ajax/playground/?type=visualization#programmatic_control_changes)示例。您可以通过代码更改滑块的下限和上限：

```
document.getElementById('rangeButton').onclick = function() {
  slider.setState({'lowValue': 2, 'highValue': 5});
  slider.draw();
}; 
```

例如，如果您选择同时为*5的**低值*和*高*值，则将仅显示包含指定列的该值的行。在第一个图表的 onmouseover 事件中调用它：

 *```
google.visualization.events.addListener(chart1, 'onmouseover', function (e) {
    // get the value for x in the current row from the data table
    var xValue = data.getValue (e.row, 0);
    // set the new bounds of the slider
    slider.setState({'lowValue': xValue, 'highValue': xValue});
    // update the slider (and chart2)
    slider.draw();
  }
); 
```

由于您不希望滑块可见，只需将其隐藏：

```
// the slider has been created with 'containerId': 'control'
document.getElementById ("control").style.display = "none"; 
```*

# c++ - c ++ DirectX函数Present（）不起作用

> ID：13297775
> 
> 赞同：1
> 
> 时间：2012-11-08T21:04:53.193
> 
> 标签：c++, directx, directx-9

我正在研究 DirectX 中的简单图形库。我使用 Dx 9 是因为我对它很陌生，而且我找到了一本为第 9 版编写的很好的编程书。无论如何，我无法在屏幕上看到任何内容，因为设备的函数**Present()**返回**E_FAIL**代码 0x80004005（我读到的意思是“未指定的失败”）。我还检查了程序中使用的所有 Dx 函数，它们都没有返回失败（显然 Present() 除外）。

如果我从 main.cpp注释行**kAnimation.Render()程序工作正常**

这是导致问题的代码部分：

主.cpp：

```
//...
if(FAILED(g_pkD3DDevice->BeginScene())) return ErrorBeginScene;

kAnimation.Render();

if(FAILED(g_pkD3DDevice->EndScene())) return ErrorEndScene;

HRESULT hr;
hr = g_pkD3DDevice->Present(NULL, NULL, NULL, NULL); //Returns E_FAIL
if(FAILED(hr)) return ErrorPresent; 
```

动画.cpp：

```
#define D3DFVF_MYVERTEX (D3DFVF_XYZRHW|D3DFVF_DIFFUSE|D3DFVF_TEX1)

Error Animation::Render()
{
    //...
    //This is what contain fX[4] and fY[4] and other variables while debugging
    //float fX[4]
    //float fY[4]
    //fX[0] = -16; fX[1] = 16; fX[2] = -16; fX[3] = 16;
    //fY[0] = 16; fY[1] = 16; fY[2] = -16; fY[3] = -16;
    //m_iCellHeight = 32
    //m_iCellWidth  = 32
    //m_iTextureWidth = 128
    //m_iTextureHeight = 128
    //kTextCoord.Left = 1/128; .Right = 33/128; .Top = 1/128; .Bottom = 33/128;

    Rect kTextCoord = GetUV(CellID(0,0));

    Vertex kVertices[] =
    {   //x, y, z, w, color, texture coord (u, v)
        { fX[2], fY[2], 0, 1.0f, iColor, kTextCoord.Left, kTextCoord.Top},
        { fX[3], fY[3], 0, 1.0f, iColor, kTextCoord.Right, kTextCoord.Top},
        { fX[1], fY[1], 0, 1.0f, iColor, kTextCoord.Right, kTextCoord.Bottom},
        { fX[0], fY[0], 0, 1.0f, iColor, kTextCoord.Left, kTextCoord.Boottom},
    };

    g_D3DDevice->SetTexture(0, m_pkD3DTexture);
    g_D3DDevice->SetFVF(D3DFVF_MYVERTEX);
    if(FAILED(g_D3DDevice->DrawPrimitiveUP(D3DPT_TRIANGLEFAN, 2, kVertices, sizeof(Vertex)))
    return ErrorDrawPrimitive;

    return NoError;
}

Rect Animation::GetUV(CellID kPosition)
{
    Rect kUVRect;
    kUVRect.Left =  (1 + ((1 + m_iCellWidth) * kPosition.x)) / m_iTextureWidth;
    kUVRect.Right = (1 + ((1 + m_iCellWidth) * kPosition.x) + m_iCellWidth) / m_iTextureWidth;
    kUVRect.Top =   (1 + ((1 + m_iCellHeight) * kPosition.y)) / m_iTextureHeight;
    kUVRect.Bottom =(1 + ((1 + m_iCellHeight) * kPosition.y) + m_iCellHeight) / m_iTextureHeight;
    return kUVRect;
} 
```

休息你需要：

```
class Rect
{
public:
    float Left;
    float Right;
    float Top;
    float Bottom;
};

//Position of single cell in animation texture
class CellID
{
public:
    unsigned long x;
    unsigned long y;
}; 
```

我的操作系统是 Windows 7 Ultimate。我正在使用 VS c++ 2010 如果您想查看完整的解决方案，请访问以下链接：[http](http://speedy.sh/CmBRb/ConWinLib.rar) ://speedy.sh/CmBRb/ConWinLib.rar （这有点不同，因为我想让代码尽可能短）

感谢您的任何帮助！

**编辑**

回答您的问题：

@tbridge 该设备应该很好，因为我之前创建了一些小程序并且它们运行良好。但无论如何都有代码：

```
//...
g_pkD3D   = Direct3DCreate9(D3D_SDK_VERSION);
D3DPRESENT_PARAMETERS kPresentParams;
unsigned long iDeviceType = D3DDEVTYPE_REF; //I have already checked D3DDEVTYPE_HAL and it doesn't work either

ZeroMemory(&kPresentParams, sizeof(D3DPRESENT_PARAMETERS));
kPresentParams.SwapEffect = D3DSWAPEFFECT_DISCARD;

D3DDISPLAYMODE kCurrentMode;

if(FAILED(g_pkD3D->GetAdapterDisplayMode(D3DADAPTER_DEFAULT, &kCurrentMode)))
    return ErrorGetAdapterDisplayMode;

kPresentParams.Windowed = true;
kPresentParams.BackBufferCount = 1;
kPresentParams.BackBufferFormat = kCurrentMode.Format;

if(FAILED(g_pkD3D->CreateDevice(D3DADAPTER_DEFAULT, (D3DDEVTYPE)iDeviceType, hWindow,
     D3DCREATE_SOFTWARE_VERTEXPROCESSING, &kPresentParams, &g_pkD3DDevice)))
return ErrorCreateDevice;

g_pkD3DDevice->SetRenderState(D3DRS_CULLMODE, D3DCULL_NONE);
g_pkD3DDevice->SetRenderState(D3DRS_LIGHTING, FALSE);
g_pkD3DDevice->SetRenderState(D3DRS_ALPHABLENDENABLE, TRUE);
g_pkD3DDevice->SetRenderState(D3DRS_SRCBLEND, D3DBLEND_SRCALPHA);
g_pkD3DDevice->SetRenderState(D3DRSDESTBLEND, D3DBLEND_INVSRCALPHA);

g_pkD3DDevice->SetTextureStageState(0, D3DTSS_COLOROP, D3DTOP_MODULATE);
g_pkD3DDevice->SetTextureStageState(0, D3DTSS_ALPHAOP, D3DTOP_MODULATE);

c 
```

# javascript - 对象不支持属性或方法“格式”IE7/8

> ID：13297776
> 
> 赞同：1
> 
> 时间：2012-11-08T21:04:53.913
> 
> 标签：javascript, jquery, internet-explorer-8, internet-explorer-7

在 IE 7/8 浏览器和文档模式下运行以下代码时，我收到错误消息“对象不支持属性或方法‘格式’”。我正在使用 Knob - jQuery 插件。

```
// Dial logic
var Dial = function (c, opt) {

    var v = null
        ,ctx = c[0].getContext("2d")
        ,PI2 = 2 * Math.PI
        ,mx ,my ,x ,y
        ,self = this;

    this.onChange = function () {};
    this.onCancel = function () {};
    this.onRelease = function () {};

    this.val = function (nv) {
        if (null != nv) {
            opt.stopper && (nv = Math.max(Math.min(nv, opt.max), opt.min));
            v = nv;
            this.onChange(nv);
            this.draw(nv);
        } else {
            var b, a;
            b = a = Math.atan2(mx - x, -(my - y - opt.width / 2)) - opt.angleOffset;
            (a < 0) && (b = a + PI2);
            nv = Math.round(b * (opt.max - opt.min) / PI2) + opt.min;
            return (nv > opt.max) ? opt.max : nv;
        }
    }; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T21:06:06.320

那就是IE9之前的IE没有画布。除了向您的用户推荐升级之外，您什么也做不了。

请参阅[兼容性表](http://caniuse.com/#feat=canvas)。

HTML5 使许多新的应用程序成为可能。想要使用它们的人不能保留他们的旧浏览器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T21:13:04.367

[您可以使用explorercanvas](http://code.google.com/p/explorercanvas/)添加对 IE7/IE8 的画布支持。

# jquery - 在 HTML Accordion 中查找第一个 Img

> ID：13297786
> 
> 赞同：1
> 
> 时间：2012-11-08T21:05:42.410
> 
> 标签：jquery

我正在尝试定位每个手风琴组中的第一张图片。我已经包含了其中之一的示例。

```
<div class="accordion-heading">
          <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseSix">All Videos</a>
</div>
     <div id="collapseSix" class="accordion-body collapse">

          <div id="video-scroll6" class="accordion-inner">
             <div style="width: 3080px;">

               <img src="demo.jpg" data-video="1" />
               <img src="demo.jpg" data-video="2" />

            </div>
        </div>
     </div> 
```

这是我到目前为止没有运气的尝试......

```
$(".accordion-heading").click(function () {

    $(this).find(".accordion-inner div img").first().attr('data-video');

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T21:08:36.097

```
$(this).next()​.find('img').first().data('video'); 
```

[这是工作的jsfiddle](http://jsfiddle.net/WESBH/)

在 jQuery 1.8 中，我们只需访问 .data('attr') 而不是`attr('data-name')`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T21:25:01.310

你也可以这样做......如果你想选择第一个以外的图像，这会让你在路上更容易

```
$(".accordion-heading").click(function() {

 // :eq(0) = 1st img, :eq(1) = 2nd img and so on...
$(this).next().find(".accordion-inner div img").eq(0).data('video') ;

}); 
```

[**小提琴**](http://jsfiddle.net/videsignz/Ybe7g/3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T21:08:27.947

尝试：

```
$(this).next().find( $(this).next().find(".accordion-inner div img").first().attr('data-video')).first().attr('data-video'); 
```

由于您单击包含图像的 div 之前的 div，因此您需要使用`.next()`选择器。

**[jsFiddle 示例](http://jsfiddle.net/j08691/Ybe7g/1/)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T21:10:26.873

```
$(".accordion-inner div img").first().attr('video') 
```

应该管用。

# jcl - 数据集名称中上个月年份的 JCL

> ID：13297788
> 
> 赞同：-1
> 
> 时间：2012-11-08T21:05:51.750
> 
> 标签：jcl

我需要在本月的第一个工作日运行一份工作，其中包含月底关闭（上个月）的会计数据，以用于某些年终工作。我希望每个月都运行相同的作业，无需操作员干预，并且在数据集名称中包含结束月份和年份，以便轻松识别数据集的结束时间段。当前运行 8 个单独的作业来完成此任务。请提供具体的 JCL 样本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T21:34:17.993

目前尚不清楚为什么要运行 8 个单独的作业来完成此任务，每个作业的作用是什么？

您是否使用任何调度程序在特定时间运行作业？

您可以使用 EZACFSM1 使用系统符号参数将日期/时间信息添加到数据集名称。

[http://publibz.boulder.ibm.com/cgi-bin/bookmgr_OS390/BOOKS/IEA1E241/2.2.2](http://publibz.boulder.ibm.com/cgi-bin/bookmgr_OS390/BOOKS/IEA1E241/2.2.2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T18:58:25.457

最好的解决方案是使用作业调度程序的功能。话说回来...

[这](https://www.ibm.com/docs/en/zos/2.4.0?topic=considerations-mvs-system-symbols)是 EZACFSM1 的最新参考。OS/390 2.10 十多年来一直没有更新。

但是，您不能只使用此实用程序来创建名称中包含日期/时间信息的数据集。EZACFSM1 简单地从 SYSIN 读取并写入 SYSOUT，解释它读取的系统符号。

您可以使用 EZACFSM1 为 IDCAMS 编写[ALTER](https://www.ibm.com/docs/en/zos/2.4.0?topic=commands-alter)语句，将静态命名的数据集（其中没有年份和月份的数据集）重命名为具有这些属性的数据集。它确实需要两个额外的步骤和一个警告。

```
//CATLG    EXEC PGM=IEFBR14
//DD01     DD  DISP=(NEW,CATLG),
//             DSN=STUFF,
//             AVGREC=U,
//             LRECL=80,
//             RECFM=FB,
//             SPACE=(80,(1000,100))
//*
//MKALTER  EXEC PGM=EZACFSM1
//SYSOUT   DD  DISP=(NEW,PASS),
//             AVGREC=U,
//             LRECL=80,
//             RECFM=FB,
//             SPACE=(80,(1000,100))
//SYSIN    DD  *
 ALTER STUFF NEWNAME(STUFF.Y&YR4&MON)
//*
//RENAME   EXEC PGM=IDCAMS
//SYSIN    DD DISP=(OLD,PASS),DSN=*.MKALTER.SYSOUT
//SYSPRINT DD SYSOUT=*
//* 
```

警告与作业调度有关。假设您的工作在该月的最后一天运行得很晚。如果它在输入队列中的时间足够长，它将在下个月的第一天运行，从而使 ALTER 不正确。

# svn - 如何配置 Visual Studio 2012 以使用 Beyond Compare 3

> ID：13297790
> 
> 赞同：1
> 
> 时间：2012-11-08T21:06:01.013
> 
> 标签：svn, visual-studio-2012, beyondcompare3

我想将 Visual Studio 2012 配置为默认打开 Beyond Compare 作为 diff 工具。我怎样才能做到这一点？

[我从http://www.scootersoftware.com/support.php?zz=kb_vcs#svn](http://www.scootersoftware.com/support.php?zz=kb_vcs#svn)找不到合适的解决方案

*注意：关于 VS 2010 的相同 SO 问题在[这里，](https://stackoverflow.com/questions/4466238/how-to-configure-visual-studio-2010-to-use-beyond-compare)但 2012 不同。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T23:26:16.877

VS 2010 说明适用于 VS 2012： [如何配置 Visual Studio 以使用 Beyond Compare](https://stackoverflow.com/questions/4466238/how-to-configure-visual-studio-2010-to-use-beyond-compare)

![VS2012中的用户工具配置对话框](../Images/281602657b1bb7b99b07777689088939.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-23T09:59:43.637

在 Visual Studio 2008 + 中，转到

> ```
> Tools menu -->  select Options 
> ```

![在此处输入图像描述](../Images/249fe652af0a6e332bcfaf9e8d01f908.png)

> 在选项窗口中 --> 展开源代码管理 --> 选择 Subversion 用户工具 --> 选择 Beyond Compare

然后单击确定按钮..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T23:04:42.370

配置 SVN 使用 BC，如果在新界面中找不到旧设置

# javascript - SQL查询的猫鼬等价物是什么

> ID：13297791
> 
> 赞同：0
> 
> 时间：2012-11-08T21:06:03.027
> 
> 标签：javascript, mysql, mongodb, mongoose, querying

```
select _id from project where projectName = '***' order by viewCount desc limit 5 
```

我对 mongoose 还很陌生，并且对 SQL 有一定的理解，这是我的尝试，因为我正在尝试检索`ObjectId`排序返回的

```
ProjectModel.find({id}).sort({viewCount: -1}).limit(5).exec( 
    function(err, projects) {
        ...
    }
); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T21:11:44.540

```
ProjectModel.find({projectName: '***'}, ["_id"]).sort({viewCount: -1}).limit(5).exec( 
    function(err, projects) {
        ...
    }
); 
```

# meteor - 如何避免 cursor.observe 上的竞争条件？

> ID：13297796
> 
> 赞同：2
> 
> 时间：2012-11-08T21:06:15.417
> 
> 标签：meteor

# 比赛条件

在我的 Meteor 应用程序中，我做了一个`observe`within a `publish`，在某些条件下插入一些新数据。关键是有时我们有*重复*的订阅，竞争条件导致我们重复插入的数据。如果[不可能有“单例观察者”](https://stackoverflow.com/a/13116711/599991)：

*   我们如何避免竞争条件和数据库上重复插入的数据？

**例子：**

```
Meteor.publish("fortuneUpdate", function () {
  var selector = {user: this.userId, seen:false};

  DailyFortunes.find(selector).observe({
    removed: function(doc, beforeIndex){
      if(DailyFortunes.find(selector).count()<1)
        createDailyFortune(this.userId);
    }
  });

} 
```

*这个问题已从[cursor.observe 如何工作以及如何避免多个实例运行？](https://stackoverflow.com/q/13095647/599991)*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T21:06:15.417

[根据 Tom](https://stackoverflow.com/a/13116711/599991)的说法，目前无法确保共享具有相同参数的 subscribe 调用。因此，如果您遇到与我相同的问题，即在观察者内部创建的冗余数据，我建议您作为解决方法：

1.  创建*强大的* [索引](http://www.mongodb.org/display/DOCS/Indexes)，防止重复创建数据。[复合键](http://www.mongodb.org/display/DOCS/Indexes#Indexes-CompoundKeys)很可能是您在这里需要的。
2.  在忽略竞争条件的情况下处理观察者内部的重复键错误异常。

**示例**：

```
Collection.find(selector).observe({
  removed: function(document){
      try {
        // Workaround to avoid race conditions > https://stackoverflow.com/q/13095647/599991
        createNewDocument();
      } catch (e) {
        // XXX string parsing sucks, maybe
        // https://jira.mongodb.org/browse/SERVER-3069 will get fixed one day
        if (e.name !== 'MongoError') throw e;
          var match = e.err.match(/^E11000 duplicate key error index: ([^ ]+)/);
        if (!match) throw e;
        //if match, just do nothing.
      }
    self.flush();
  }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T16:44:53.900

这是一个奇怪的模式。你能分享一些示例代码吗？

一般来说，我要么希望看到方法中的突变，要么在服务器上设置一个`observe`内部。`Meteor.startup()`（如果您正在运行多个服务器进程，后者会很棘手，但多进程机制中的许多其他事情也是如此。我们将有一个更好的模式。）

因为它可以是任意 JS，所以发布函数必须为每个订阅客户端运行一次。它可能会记录新的订阅，设置每个客户端服务器状态，或者根据`this.userId`甚至是随机源改变其行为。例如，考虑一个从数据库集合中随机选择的 10 个文档返回给每个订阅客户端的订阅！

因此，优化多个客户端订阅相同数据集的情况的地方是数据库查询层：如果有一千个客户端订阅了同一个数据库查询，我们将只运行该底层查询一次。

# php - 如何在 Azure 网站上安装 ionCube？

> ID：13297801
> 
> 赞同：2
> 
> 时间：2012-11-08T21:06:27.973
> 
> 标签：php, azure, php-extension, azure-web-app-service, ioncube

我正在尝试按照[在 Windows Azure 网站中使用自定义 PHP 扩展](http://blogs.msdn.com/b/silverlining/archive/2012/09/17/using-custom-php-extensions-in-windows-azure-web-sites.aspx)下的说明为在 Azure 网站中运行的 PHP 启用 ionCube 扩展。这是我所做的：

1.  [从ionCube 加载程序下载页面](http://www.ioncube.com/loaders.php)下载了 Windows VC9 (Non-TS) (x86) 加载程序。
2.  在 /site/wwwroot/bin 创建了一个目录
3.  FTP'd`ioncube_loader_win_5.3.dll`到那个目录。
4.  `PHP_EXTENSIONS`在我添加了 value的网站的 Azure 门户中的“应用程序设置”下`bin/ioncube_loader_win_5.3.dll`。
5.  我加载了[http://my.azure.website/info.php](http://my.azure.website/info.php)并验证了 Environment 表包含`PHP_EXTENSIONS`= `bin/ioncube_loader_win_5.3.dll`。它还包含`APPSETTING_PHP_EXTENSIONS`= `bin/ioncube_loader_win_5.3.dll`。
6.  当我尝试加载站点时，我收到消息“页面无法显示，因为发生了内部服务器错误”并且没有其他信息。

是我忘记了什么还是 Azure 不支持 ioncube？我是否正确设置了目录？

我也以同样的方式尝试了 Zend Guard Loader 扩展（ZendLoader.dll）。我没有收到错误消息，但扩展名也没有出现在 phpinfo() 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-12T15:58:34.920

我发布了一篇文章，解释了[如何在 Windows Azure 网站上配置 ZendGuard](http://blog.syntaxc4.net/post/2013/07/25/enabling-zendguard-extension-in-windows-azure-web-sites.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T08:34:38.380

您不得**将**模块放在 ftp 站点的根目录中。DLL 模块**必须**位于**APPLICATION ROOT**下的文件夹中，`site/wwwroot/`因此，您必须创建`site/wwwroot/bin`您选择的任何一个或任何内容（即`site/wwwroot/phpext`），然后将 PHP_EXTENSIONS 再次映射到**（**`bin/ioncube...`或`phpext/iocube...`），无论您的文件夹名称是什么！ **`site/wwwroot/`**

 **但是，当启用上述模块时，我无法运行任何 php 页面。我不知道这是因为我的文件没有经过 ionCube 加密，还是因为 ionCube 本身存在问题。因此，如果您有一个 ionCube 加密文件，您就有机会进行测试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-07T23:39:18.473

ionCube 是 Zend 扩展，因此根据[windows azure forums 的回答](http://social.msdn.microsoft.com/Forums/windowsazure/en-US/164345ef-bfdd-47ef-974c-45ccbc3fd17c/how-do-i-install-ioncube-on-an-azure-web-site?forum=windowsazurewebsitespreview)：

> 正确的方法是创建**/site/wwwroot/bin**目录并上传**ioncube_loader_win_5.4.dll**，然后在门户应用程序设置下添加**PHP_ZENDEXTENSIONS**设置，并将**bin\ioncube_loader_win_5.4.dll**作为其值。

我确认，但我的测试是在`/site/phpext`应用程序设置上完成的`..\phpext\ioncube_loader_win_5.4.dll`。**

# version-control - 如何让 git-tfs 仅检查对 TFS 的一系列更改（即，不将所有提交压缩为一个）

> ID：13297804
> 
> 赞同：0
> 
> 时间：2012-11-08T21:06:39.060
> 
> 标签：version-control, tfs, git-tfs

我已经使用 git-tfs 几个星期了，并且非常喜欢它。我今天早些时候遇到了一个问题。我有两个不相关的 git 提交（尽管出于问题的原因，可以说它们触及了相同的文件）。我将这些更改检查到 TFS 中，我似乎拥有的唯一选择是将两个不相关的提交压缩到一个签入中。

我如何一次只签入一个对 TFS 的提交，而不是将它压缩成一个提交？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T07:37:09.960

查看命令 rcheckin ( [https://github.com/git-tfs/git-tfs/wiki/Rcheckin](https://github.com/git-tfs/git-tfs/wiki/Rcheckin) )。

`git tfs rcheckin`

它将检查当前分支上的所有新提交（自 tfs/default 起），作为 tfs 中的单独变更集。

# linux - 在 Eclipse 中以 Linux 中的其他用户身份运行 Tomcat

> ID：13297806
> 
> 赞同：3
> 
> 时间：2012-11-08T21:06:42.967
> 
> 标签：linux, eclipse, tomcat

我想使用我的用户运行 eclipse，并使用用户“tomcat”在 eclipse 中运行 tomcat 这可能吗？有任何想法吗？这不是安全问题，因为我在家里有防火墙，没有向世界开放服务

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T21:11:24.903

我不知道 Eclipse 如何运行 Tomcat，但它肯定需要运行可执行文件。因此，您可以`chown`将该可执行文件提供给用户`tomcat`，然后`setuid`将该可执行文件提供给用户。例如：

```
chown tomcat:tomcat /path/to/bin/tomcat
chmod +s /path/to/bin/tomcat 
```

使用 setuid 位，任何可执行文件都以拥有它的用户身份运行。

我没有测试它，但它应该可以正常工作。

# jquery - 在jquery中，获取gridview同一行中另一个单元格的值

> ID：13297812
> 
> 赞同：0
> 
> 时间：2012-11-08T21:07:29.387
> 
> 标签：jquery, gridview, jquery-ui-datepicker

我在 GridView 的 TemplateField 中有一个图像

```
<asp:TemplateField HeaderText="Start Date" SortExpression="start_dt">
                <EditItemTemplate>
                    <asp:Label ID="StDt" runat="server" CssClass="StartDate" Text='<%# Eval("start_dt", "{0:d}") %>'></asp:Label>
                </EditItemTemplate>
                <ItemTemplate>
                    <asp:Label ID="StDt" runat="server" Text='<%# Bind("start_dt", "{0:d}") %>'></asp:Label>
                    <asp:ImageButton ID="startdtimage" CssClass="StartDateImg" runat="server" ImageUrl="../images/pencil.gif" Visible='<%# HasUpdateStartDateRole() %>' Width="18px" Height="18px" onclientclick="javascript:return false;"/>
                </ItemTemplate>
                <ItemStyle Wrap="False" />
            </asp:TemplateField>

 <asp:BoundField DataField="hire_dt" DataFormatString="{0:d}" 
                HeaderText="Hire Date" ReadOnly="True" />
        </Columns> 
```

我在图像上附加了一个日期选择器。

```
$(".StartDateImg").datepicker({
                duration: '',
                showTime: false,
                constrainInput: false,
                onSelect: function (dateText) {
                    alert($(this).parents().find(".hire_dt").html()); 
                    $(this).parents().find("span")[0].innerHTML = dateText; }

            }); 
```

在此日期选择器中，我想获取该行中另一个单元格的值（来自hire_dt 列）。

***编辑*** 我能够使用 `$(this).parents().closest('tr').find('td:last').html()`因为它是该行的最后一列。不过，我更喜欢使用“hire_dt”id，以防表在未来发生变化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T21:09:44.580

使用 jquery 遍历您的标记。很可能 StartDateImg 是一个图像。那么它的父代很可能是 TD，而它的父代很可能是 TR。

通向同级 TD（或至少是具有集合类的同一 TR 的子级）的最简单路径是： `$(this).closest('tr').find('.hire_dt')`

# javascript - Javascript fullcalendar prod server vs dev machine问题

> ID：13297816
> 
> 赞同：1
> 
> 时间：2012-11-08T21:07:38.633
> 
> 标签：javascript, iis, fullcalendar

```
 <div id='calendar'></div> 
```

是 fullcalendar 用来插入日历并发挥其魔力的 html 标记。这是一个很棒的工具，但是发生了一些奇怪的事情。

我的日历是使用数据库中的事件创建的，所有这些都运行良好。这里的问题...

两页日历 - 两者都适用于开发工作站。部署 - 在一个页面上工作，但在另一页面上不工作。日历 div 填充了一些复杂的表格等以进行渲染。除非这不会发生 - 仅在一个页面上，仅在生产服务器上 - 相同的浏览器。所有数据库的东西都在那里，除了在我的开发机器上插入的表东西之外，返回的页面是相同的，但不是在生产服务器时。但是，同样的控件在另一个页面上的 prod 上也能正常工作 - 难倒！Web 服务器是 IIS 7

欢迎任何想法甚至是疯狂的猜测！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T13:33:14.753

只是为了让它成为官方答案......

通常，当某些东西在开发或生产设置中都没有呈现但在其他环境中呈现时，您会遇到资源缺失的情况。这通常需要满足以下要求：

```
<script type="text/javascript" src="..path/to/script.js"></script> 
```

由于一个位置在该位置*有*文件而另一个没有，因此您可能会遇到它在一个位置工作但在另一个位置不起作用的情况。

确认这一点的最简单方法是在您喜欢的浏览器中打开调试器并使用“网络”部分来确定所有资源是否正确加载（并已解决）。否则，在尝试检索它需要的文件时，不工作的页面可能会收到 404（或其他错误），因此页面无法运行。

# jquery - jQuery Expander Plugin：单击“阅读更多”时如何隐藏所有展开的部分？

> ID：13297818
> 
> 赞同：0
> 
> 时间：2012-11-08T21:07:44.943
> 
> 标签：jquery, plugins, expander

我正在使用 jQuery Expander Plugin v1.4.4 来格式化我网站上的常见问题解答部分，并且当您单击一些“阅读更多”链接时，有一个问题如何隐藏文本的所有打开（扩展）部分（在我的情况下为答案）。我想它应该在 afterExpand: opton 中指定。

有什么建议么？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T22:00:01.553

这是一个非常有趣的问题，因为 api 中似乎没有提供要显式调用的 collapse 方法。

会有一个可以打电话的地方：

```
 $('XYZ').expander({
    ...
    beforeExpand: function() {
    // somehow collapse everything :)
    }
}); 
```

但没什么可打电话的:)

编辑：好的，我认为理论上可以在所有扩展的常见问题解答上模拟点击（在 javascript 中）:) 这听起来像是一个 hack，但它可以工作。你只需要通过一些选择器找到那些当前打开的，然后调用`.click()`它们：

在这里找到了在 javascript 中模拟鼠标的方法（[如何通过 jquery 模拟锚点单击？](https://stackoverflow.com/questions/773639/how-can-i-simulate-an-anchor-click-via-jquery)，作为 Stevanicus 的回复）

# eclipse - 从 Eclipse Juno 上传文件？

> ID：13297822
> 
> 赞同：2
> 
> 时间：2012-11-08T21:08:06.580
> 
> 标签：eclipse, ftp

我正在使用 Eclipse Juno 在 Ubuntu 12.10 中构建一个新工作区。我已经配置了我的项目，导入了我的文件，建立了一个本地 Git 存储库并将其同步到 GitHub 上的远程。但是，我所有将文件（php、html、css 和其他网站文件）上传到服务器的努力都失败了。

我同时拥有远程系统资源管理器 (RSE) 和 Aptana Studio 3。虽然我已经成功地建立了与 localhost 的连接以进行测试和与我的实时网络服务器建立连接，但我的上传尝试都没有成功。

理想情况下，当我在 Eclipse 中保存任何文件时，它会自动复制到我的 /var/www 以用于我的 localhost 测试服务器。我研究了几个同步选项但没有成功。

此外，我希望能够使用 Ctrl+Shift+U 或类似方法将当前文件上传到我的公共服务器。

在过去的两天里，我大部分时间都在阅读和研究，但发现的文档很少，而且博客条目都是针对过时的版本。

我没有 Deploy 菜单项，Aptana Publish 菜单项被禁用，如果我从右键菜单中使用 Eclipse 的 Export 命令，并选择我的 localhost 连接，我会收到错误“无法使用连接”。尽管能够浏览 RSE 窗格中的内容，但还是会这样做。当我尝试导出到公共服务器时，错误是“此操作将删除以前为 MyProjectName 设置的团队提供程序设置。您确定要这样做吗？”

我正在对 Eclipse 进行更改以获得更高效的工作流程，但到目前为止，这让我感到沮丧很多天，而且我仍然无法上传简单的 .html 文件？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T21:25:57.543

好的，据我了解，您想在保存时复制文件并通过 FTP 上传，是吗？

你应该看看蚂蚁。您可以将 Eclipse 配置为在保存或构建项目时运行 Ant 脚本。

[如何使用 Ant 复制文件](https://stackoverflow.com/questions/10407974/automatically-copy-built-files-and-libraries-with-java-eclipse-and-ant)

[蚂蚁 FTP 任务](https://ant.apache.org/manual/Tasks/ftp.html)

[构建项目时如何让ant运行](https://stackoverflow.com/questions/5664669/want-an-eclipse-java-project-to-run-ant-build-files-automatically)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T21:36:34.727

如果您使用 Eclipse RSE，这篇文章可能对您有所帮助：[如何通过 FTP 与 Eclipse RSE 同步文件？](https://stackoverflow.com/questions/3947444/how-to-synchronize-files-over-ftp-with-eclipse-rse)

此外，他们提到 jdk7 存在一些问题（对于较旧的 eclipse 版本）。也检查一下。

对于您要自动/在按键上执行的操作，我没有找到任何快速的解决方案。

# transactions - 请帮我找出这个 YII 交易代码中的错误

> ID：13297823
> 
> 赞同：0
> 
> 时间：2012-11-08T21:08:12.227
> 
> 标签：transactions, yii

我有一个巨大的表格，我想将我的表格保存到 5 个不同的表中，我想确保数据保存到所有 5 个表中，为此我正在尝试使用 Yii Transations 但它对我不起作用，请有一个查看下面的代码以找出错误。

```
$ParentModel->attributes = $_POST['ParentModel'];
$firstChild->attributes = $_POST['FirstChild'];
$secondChild->attributes = $_POST['SecondChild'];
$thirdChild->attributes = $_POST['ThirdChild'];
$fourthChild->attributes = $_POST['FourthChild'];

if($ParentModel->validate())
{
    $transaction = $ParentModel->dbConnection->beginTransaction(); // Transaction begin
    try{
        $ParentModel->save(); // saving parent model

        //parent_id is required for all models

        $firstChild->parent_id = $ParentModel->id;
        $secondChild->parent_id = $ParentModel->id;
        $thirdChild->parent_id = $ParentModel->id;
        //$fourthChild->parent_id = $ParentModel->id; I commented this line so that fourth child throw an exception on $fourthChild->save() becuase parent_id is required

        $firstChild->save();    
        $secondChild->save();
        $thirdChild->save();
        $fourthChild->save(); // fourth child is not saved here, transction should throw exception

        $transaction->commit();    // committing 

        $this->redirect(array('view','id'=>$ParentModel->id));    // Redirecting on user creation
    }
    catch (Exception $e){
        $transaction->rollBack();
    }
} 
```

上面的代码不会抛出任何异常，并且由于验证规则失败而丢失了第四个表的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T01:28:08.577

[Yii 在保存到模型](http://www.yiiframework.com/doc/api/1.1/CActiveRecord#save-detail)时不会抛出异常。

保存后您需要添加自己的错误检查，可能是这样的（未经测试）：

```
if($ParentModel->validate())
{
    $transaction = $ParentModel->dbConnection->beginTransaction(); // Transaction begin
    try{
        $ParentModel->save(); // saving parent model

        //parent_id is required for all models

        $firstChild->parent_id = $ParentModel->id;
        $secondChild->parent_id = $ParentModel->id;
        $thirdChild->parent_id = $ParentModel->id;
        //$fourthChild->parent_id = $ParentModel->id; I commented this line so that fourth child throw an exception on $fourthChild->save() becuase parent_id is required

        $results = array()
        $results[] = $firstChild->save();    
        $results[] = $secondChild->save();
        $results[] = $thirdChild->save();
        $results[] = $fourthChild->save(); // fourth child is not saved here, transction should throw exception

        foreach($results as $result) {
           if (!$result) { throw new Exception('error') }
        }

        $transaction->commit();    // committing 

        $this->redirect(array('view','id'=>$ParentModel->id));    // Redirecting on user creation
    }
    catch (Exception $e){
        $transaction->rollBack();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T21:10:42.063

上面代码的第 5 行你有：

```
$fourthChild-->attributes = $_POST['FourthChild']; 
```

它应该是

```
$fourthChild->attributes = $_POST['FourthChild']; 
```

# wordpress - WordPress页面中的分页不起作用

> ID：13297824
> 
> 赞同：1
> 
> 时间：2012-11-08T21:08:21.307
> 
> 标签：wordpress, woocommerce

我正在使用 WordPress 主题 mystile 和 WooCommerce 插件，但分页无法正常工作。分页只出现在主页上，而不会出现在其他页面上。我想在所有页面上加分页，但我不能。我还想限制出现在主页上的产品数量。现在，总是出现 12 个产品，但我希望只出现 8 个。

有人能帮我吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-08T23:55:23.770

尝试在 page.php 和 single.php 上添加此代码

```
<div class="navigation"><p><?php posts_nav_link(); ?></p></div> 
```

关于产品数量，请进入设置->阅读

# perl - 如何在不更改循环变量地址的情况下使用 foreach 迭代数组？

> ID：13297825
> 
> 赞同：2
> 
> 时间：2012-11-08T21:08:23.660
> 
> 标签：perl

当我运行这样的简单代码时：

```
my @arr=(1..5);
my $x;
foreach $x (@arr) {
    $x+=10;
}
print "@arr"; 
```

结果是“11 12 13 14 15”，因为 $x “变成”了 foreach 中 @arr 数组中的每个元素。足够好。

但这是我的事情......不是一个问题（解决方案很简单，但不优雅，我希望我的 perl 尽可能优雅）。

我写了一个 tie 模块来处理 COBOL 数据。它需要一个字帖，解析字段，然后将其附加到一个标量/字符串，以便访问/从绑定的哈希将返回/设置字符串中的值。它工作得很好。

```
my %h,$rec;
my $cb=<<END;
       01 CH-RECORD.
          05 JOB-NUM PIC X.
          05 FILLER  PIC X(76).
          05 REC-TYPE PIC X(2).
END
tie %h, 'COBOLDataTie',$cb,\$rec; #tie the hash to the record via the copybook 
```

从那里，我可以将 COBOL 记录移动到 $rec 并使用 %h 哈希访问 COBOL 字段。

同样，这非常有效。但是当我想迭代一个 COBOL 记录数组时，问题就来了。因此，如果在上面的代码之后我有类似的东西：

```
foreach $rec (@arr) {
    print "Job is ",$h{'JOB-NUM'},"\n";
} 
```

它不起作用，因为 foreach 实际上改变了 $rec 的位置，这打破了它的关系。我最终不得不做这样的事情：

```
foreach (@arr) {
    $rec=$_;
    print "Job is ",$h{'JOB-NUM'},"\n";
} 
```

有什么办法可以做“foreach $rec (@arr)”而不破坏我的绑定哈希？

（在有人说之前，是的，我知道这需要一个很好的面向对象的解决方案……总有一天我会做到的；我只需要先找点时间）

结语：我将 TieHash 代码修改为，它不是指向外部记录，而是截取散列的“特殊”键，其中是“记录”。因此，当我将记录字符串分配给 $h{'record'} 时，它与在上面的示例中加载 $rec 相同。这是一个更好的解决方案，更独立。它还公开了一个更像 OOP 的接口。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T21:19:36.983

您决定创建的界面是“分配给`$rec`，然后通过”访问字段`%h`。因此，这正是您需要做的。

```
for (@arr) {
    $rec = $_;
    print "Job is $h{'JOB-NUM'}\n";
} 
```

当然它看起来很奇怪，但那是因为它很奇怪。这样会更合理：

```
for (@arr) {
    my $h = parse($cb, $_);
    print "Job is $h->{'JOB-NUM'}\n";
} 
```

您甚至可以通过最小的更改来做到这一点：

```
sub parse {
    my ($cb, $rec) = @_;
    tie my %h, 'COBOLDataTie', $cb, \$rec; 
    return \%h;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T22:36:27.133

这是一个微妙的点，在文档中很容易忽略，但变量中的循环变量`foreach`始终是一个新变量，与程序中其他任何地方的任何同名的词法或包变量无关。

来自[`perlsyn`](http://search.cpan.org/perldoc?perlsyn#Foreach_loops)：

> Foreach 循环
> 
> “foreach”循环遍历一个普通的列表值，并依次将变量 VAR 设置为列表的每个元素。如果变量以关键字“my”开头，则它是词法范围的，因此仅在循环中可见。否则，**该变量隐含地是循环的局部变量，并在退出循环时恢复其先前的值**。如果该变量以前用“my”声明，它使用该变量而不是全局变量，但它仍然本地化到循环中。这种隐式本地化只发生在“foreach”循环中。

（强调补充）。也就是这个小脚本的第3行和第1行声明的`$rec`无关`$rec`

```
1: my $rec = 'foo';
2: print $rec;                       # 'foo'
3: foreach $rec (@some_list) {
4:     print $rec;                   # something else
5: }
6: print $rec;                       # 'foo' again 
```

因此，如果您想用来`\$rec`影响绑定哈希的行为（尽管肯定有其他方法可以做到这一点），那么您正在做正确的事情，使用不同的循环变量并`$rec`在循环内分配给它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T16:13:37.657

似乎最好的方法是执行以下操作：

```
for (my $i=0;($rec=$arr[$i], $i<@arr);$i++) { 
```

不完全是我所希望的优雅，但它似乎奏效了。

# c# - 不同提供商的相同 EDMX 文件

> ID：13297827
> 
> 赞同：4
> 
> 时间：2012-11-08T21:08:25.893
> 
> 标签：c#, sql-server, entity-framework, sql-server-ce

我正在做一个项目，我有一个本地数据库（SQL CE），它被用作一种缓冲区，而没有与服务器的连接。在服务器上，我想使用相同的数据库布局。

当然，我想使用服务器和客户端上可用的 Common.dll 中的相同 EDMX 文件。

在客户端中，我有一个 provider=System.Data.SqlServerCe.3.5 的连接字符串，而它在服务器上是 provider=System.Data.SqlClient。

当我想在服务器端保存某事时，我的问题就出现了：“给定的提供程序清单不是'System.Data.SqlClient.SqlProviderManifest'类型。”

是否有机会在两个部分上使用相同的 EDMX 文件？或者是否有任何最佳实践如何处理这样的星座？

感谢您的帮助！

编辑：我的主要问题是：是否可以使 EDMX 文件与不同的提供者一起使用？在我的情况下 System.Data.SqlServerCe.3.5 和 System.Data.SqlClient！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T18:15:45.607

我们有在生产应用程序上工作的确切场景。我们使用 T4 模板基于规范的 SQL EDMX 文件生成 SQLCE EDMX 文件。这为您留下了 2 个 EDMX 文件，您可以在实例化单个上下文时在它们之间切换......

```
 serverType = "sqlserverce" (or) "sqlserver";
    var entityBuilder = new EntityConnectionStringBuilder
    {
        Provider = ...,
        ProviderConnectionString = ...,
        Metadata = string.Format("res://*/{0}.{1}.csdl|res://*/{0}.{1}.ssdl|res://*/{0}.{1}.msl", EdmxName, serverType)
    }; 
```

SQLCE EDMX T4 代码如下所示...

```
<#@ template debug="false" hostspecific="true" language="C#" #>
<#@ output extension=".edmx" #>
<#@ assembly name="System.Xml.dll" #>
<#@ import namespace="System.IO" #>
<#@ import namespace="System.Text" #>
<#@ import namespace="System.Xml" #>
<#
 var document = new XmlDocument();
 document.Load(this.Host.ResolvePath("DbContext.edmx"));

 var namespaceManager = new XmlNamespaceManager(document.NameTable);
 namespaceManager.AddNamespace("edmx", "http://schemas.microsoft.com/ado/2008/10/edmx");
 namespaceManager.AddNamespace("ssdl", "http://schemas.microsoft.com/ado/2009/02/edm/ssdl");

 var storageModelsNode = document.SelectSingleNode("//edmx:StorageModels", namespaceManager);

 foreach (XmlElement schemaNode in storageModelsNode.SelectNodes("ssdl:Schema", namespaceManager))
 {
     schemaNode.SetAttribute("Provider", "System.Data.SqlServerCe.4.0");
     schemaNode.SetAttribute("ProviderManifestToken", "4.0");

     foreach (XmlElement propertyNode in schemaNode.SelectNodes("ssdl:EntityType/ssdl:Property[@Type='varbinary(max)']", namespaceManager))
     {
         propertyNode.SetAttribute("Type", "image");
     }

     foreach (XmlElement propertyNode in schemaNode.SelectNodes("ssdl:EntityType/ssdl:Property[@Type='varchar']", namespaceManager))
     {
         propertyNode.SetAttribute("Type", "nvarchar");
     }
 }

 var stringBuilder = new StringBuilder();

 using (var stringWriter = new StringWriter(stringBuilder))
 using (var xmlWriter = new XmlTextWriter(stringWriter) { Formatting = Formatting.Indented })
 {
     document.WriteTo(xmlWriter);
 }

 Write(stringBuilder.ToString());
#> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T14:50:28.117

我找到了一个在这里描述的解决方案：http: [//www.codeproject.com/Articles/309858/Preparing-an-Entity-Framework-model-for-multi-prov](http://www.codeproject.com/Articles/309858/Preparing-an-Entity-Framework-model-for-multi-prov)

这并不完美，因为您必须从 EDMX 文件中复制一部分（SSDL）。因此，您需要记住在对 EDMX 文件进行更改后立即更新此文件。

如果有人有更好的方法，我仍然愿意接受。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T18:08:09.423

这可以通过保留 SSDL 的不同副本来完成，如另一个答案中所述，但通常使用 Code First 更容易做到这一点。Code First 将根据所使用的连接自动创建不同的模型。因此，您只需将相同的代码指向 SQL CE 数据库或 SQL Server 数据库。不需要弄乱不同的 SSDL。

# objective-c - 在弧中，当你不合成时会发生什么

> ID：13297829
> 
> 赞同：8
> 
> 时间：2012-11-08T21:08:27.867
> 
> 标签：objective-c, ios, automatic-ref-counting

在启用了 iOS ARC 的项目中，当我不合成属性时会发生什么，因为不允许保留/释放？

```
@interface SomeClass : NSObject {
    NSMutableArray*     _pieces;
}
@end 
```

在这种情况下，iVar _pieces 的内存语义是什么？假设我使用 , 设置它`_pieces = whatever`。

当我的 SomeClass 的实例被释放时，_pieces 是否设置为 nil？_pieces 是否存储为弱引用？如果所有其他保留 _pieces 的对象都释放它，当我尝试访问它时它会为 null 吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-09T09:04:51.800

一些观察，根据其他人的反馈，其中大部分可能很清楚：

1.  您合成的是属性，而不是实例变量，在您的示例中，您向我们展示了一个实例变量的示例，而不是属性。

2.  `retain`您的问题可能暗示合成和执行/的能力之间存在某种假定的联系`release`，但没有这种联系。`retain`做事的能力`release`是你是否使用[ARC](http://developer.apple.com/library/ios/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html)的函数。它与综合属性无关。

3.  正如其他人所观察到的，默认情况下，显式声明的实例变量（例如您的示例）是`strong`引用。所以，在你的例子中，`_pieces`是一个`strong`参考。

4.  是的，当你的`SomeClass`对象被释放时，它会删除它`strong`对该`_pieces`对象的引用。显然，如果这是对它指向的对象的最后一个强引用，`_pieces`它将被释放，并且`weak`您在其他地方对它的任何其他引用都将设置为`nil`. 有关内存管理的更完整讨论，请参阅 Apple 的[Advanced Memory Management Programming Guide](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/MemoryMgmt.html)和[Transitioning to ARC](http://developer.apple.com/library/ios/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html)。

5.  你问“如果所有其他保留的对象都`_pieces`释放它，`nil`我会在尝试访问它时释放它吗？” 显然，如果`_pieces`是一个`weak`引用，那将是正确的，但鉴于它隐含地是一个`strong`引用`SomeClass`，不，事实并非如此。

6.  如果您想创建`pieces`一个[声明的属性](http://developer.apple.com/library/mac/#documentation/cocoa/conceptual/objectivec/chapters/ocproperties.html)，则语法将是vs. （或其他）

    `@property (nonatomic, strong) NSMutableArray* pieces;`

    的指定指示属性的内存管理。`strong``weak`

7.  如果您声明一个属性，您不仅不再需要显式定义实例变量，而且现在建议您真的不应该这样做（因为当它被合成时，编译器会为您创建 ivar）。但是，如果您碰巧有一个为您的属性明确声明的正确名称的实例变量，编译器会将其用于该属性。但这不仅没有必要，而且不可取（因为如果您输入错误的实例变量的名称，您可能会在不知不觉中得到两个实例变量）。只需让编译器为您的属性综合您的实例变量，这种潜在的歧义就会消失。

8.  将为属性合成的实例变量的名称由[属性实现指令](http://developer.apple.com/library/mac/documentation/cocoa/conceptual/objectivec/Chapters/ocProperties.html#//apple_ref/doc/uid/TP30001163-CH17-SW9)的语法（即`@synthesize`语句）控制。因此，如果您对表单的属性有一个`@synthesize`声明：那么实例变量将被调用。但是，如果您使用首选语法：则实例变量名称将具有前面的下划线（按照惯例，这是首选语法，以避免代码中属性和实例变量之间的歧义）。而且，从 Xcode 4.4 开始，如果您省略a 的语句，它将使用后一种语法为您隐式合成它，即实例变量将带有前导下划线）。`pieces`

    `@synthesize pieces;`

    `pieces``@synthesize`

    `@synthesize pieces = _pieces;`

    `@synthesize``@property`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-08T21:13:20.483

**假设你没有创建一个使用它的属性，它覆盖了假定的行为**，ARC项目中的实例变量被假定为强的，所以声明真的是

```
@interface SomeClass : NSObject {
    __strong NSMutableArray* _pieces;
}
@end 
```

所以，回答你的问题

> 当我的 SomeClass 的实例被释放时，_pieces 是否设置为 nil？

不，但是为它分配一个实例不会导致它被释放。

> _pieces 是否存储为弱引用？

不，这是一个强有力的参考。

> 如果所有其他保留 _pieces 的对象都释放它，当我尝试访问它时它会为 null 吗？

不，这与您的第一个问题相同。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-08T21:13:00.827

您是在声明一个名为的属性`pieces`，还是这是一个直接的 ivar？

如果您定义一个属性，那么内存使用量取决于您如何定义该属性。

如果这是一个直接的 ivar，那么默认情况下 ivar 将是`strong`. 这实质上意味着 ivar 将正确地保留和释放您分配给它的任何对象。您可以放心使用它而不必担心。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T21:17:58.327

据我所知，ARC 会像对待它一样对待它，就像对待它一样`strong`。当您分配给它时，传入的值将被`retain`ed 并且不再指向的值将是`release`d。只有当它以某种方式过度释放时，它才会悬挂。如果你有一个属性声明，ARC 会遵守那里指定的规则，访问器会自动合成为你的表单`@synthesize someObject = _someObject`。当对象被释放时，我假设对象被发送`release`，这样如果没有其他东西断言所有权，指针指向的对象也将被释放。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-08T21:31:12.197

使用新的运行时，您只需要 @properties btw - 不要声明 ivars，不要合成

# javascript - 为 gplus 一键指定自定义 url

> ID：13297837
> 
> 赞同：0
> 
> 时间：2012-11-08T21:09:05.317
> 
> 标签：javascript, jquery, google-plus, google-plus-one

我有这个代码

```
<div class="google_button">
   <g:plusone size="medium" annotation="none"></g:plusone>
   <% case I18n.locale.to_s %>
   <% when 'en' %>
    <script type="text/javascript">
      (function() {
       var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
       po.src = 'https://apis.google.com/js/plusone.js';
       var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
      })();
    </script>
    <% when 'es'%>
     <script type="text/javascript">
      window.___gcfg = {lang: 'es'};
      (function() {
        var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
        po.src = 'https://apis.google.com/js/plusone.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
      })();
     </script>
   <% end %>
  </div> 
```

我在一个变量中`url`有一个 url：

```
url = "http://www.mydomain.com/my_custom_url" 
```

我想将此 url 变量添加到这个 google plus 按钮。

我该怎么做？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T21:23:46.397

我设法找到了[开发者文档](https://developers.google.com/+/plugins/+1button/#target-url)。这有点令人困惑，但您只需要将 URL 作为`<g:plusone>`标签的 href 属性。例如：

```
<g:plusone size="medium" annotation="none" href="the url!"></g:plusone> 
```

# java - 写入可序列化对象时，ObjectOutputStream.writeObject()（在 socket.getOutputStream() 之上）抛出损坏的管道（IO 异常）

> ID：13297838
> 
> 赞同：0
> 
> 时间：2012-11-08T21:09:07.983
> 
> 标签：java, io, serversocket, objectoutputstream

更新：完整代码示例：服务器：

```
ServerSocket serverSocket = new ServerSocket(8888);
Socket client = serverSocket.accept();
writer_ = new ObjectOutputStream(client.getOutputStream());
writer_.writeObject("This should be a solstice message normally.");
writer_.flush(); 
```

客户：

```
Socket clientSocket = new Socket(InetAddress.getLocalHost(), 8888);
ObjectInputStream reader = new ObjectInputStream(clientSocket.getInputStream());
Object obj = reader.readObject();
if (obj instanceof SolsticeMessage)
{
    SolsticeMessage message = (SolsticeMessage) obj;
    processMessage(message);
}
else
    System.out.println("Received a message of unknown type: " + obj.getClass()); 
```

当我运行代码时，客户端连接到服务器，但是它永远不会在“else”分支中打印 System.out.println()。此外，如果我将服务器更改如下：

```
ServerSocket serverSocket = new ServerSocket(8888);
Socket client = serverSocket.accept();
writer_ = new ObjectOutputStream(client.getOutputStream());
writer_.writeObject(message); // of type SolsticeMessage
writer_.flush(); 
```

写一条正确的消息，然后服务器立即抛出损坏的管道异常。

最初的问题：我正在尝试编写一个等待客户端连接的简单服务器，如下所示：

```
ServerSocket serverSocket = new ServerSocket(8888);
Socket client = serverSocket.accept();
writer_ = new ObjectOutputStream(client.getOutputStream()); 
```

然后，确保 writer_ 不为空，我尝试将以下两条消息写入客户端：

```
writer_.writeObject("This is a string.");
writer_.writeObject(message); // where message implements Serializable
writer_.flush(); 
```

这是客户端代码：

```
Socket clientSocket = new Socket(InetAddress.getLocalHost(), 8888);
ObjectInputStream reader = new ObjectInputStream(clientSocket.getInputStream());
Object obj = null;
while ((obj = reader.readObject()) != null)
{
    SolsticeMessage message = (SolsticeMessage) obj;
    processMessage(message);
} 
```

与我的预期相反（应该写入两个对象），第一个对象（字符串）发送成功，但是第二个对象（消息）抛出以下异常：

```
java.net.SocketException: Broken pipe
at java.net.SocketOutputStream.socketWrite0(Native Method)
at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:92)
at java.net.SocketOutputStream.write(SocketOutputStream.java:136)
at java.io.ObjectOutputStream$BlockDataOutputStream.drain(ObjectOutputStream.java:1847)
at java.io.ObjectOutputStream$BlockDataOutputStream.setBlockDataMode(ObjectOutputStream.java:1756)
at java.io.ObjectOutputStream.writeNonProxyDesc(ObjectOutputStream.java:1257)
at java.io.ObjectOutputStream.writeClassDesc(ObjectOutputStream.java:1211)
at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1395)
at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1158)
at java.io.ObjectOutputStream.writeFatalException(ObjectOutputStream.java:1547)
at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:333)
at com.kivancmuslu.www.solstice.server.SolsticeServer.sendMessage(SolsticeServer.java:146)
at com.kivancmuslu.www.solstice.server.listeners.ResourceChangeListener.processResourceChange(ResourceChangeListener.java:94)
at com.kivancmuslu.www.solstice.server.listeners.ResourceChangeListener.processResourceDelta(ResourceChangeListener.java:65)
at com.kivancmuslu.www.solstice.server.listeners.ResourceChangeListener.processResourceDelta(ResourceChangeListener.java:86)
at com.kivancmuslu.www.solstice.server.listeners.ResourceChangeListener.processResourceDelta(ResourceChangeListener.java:86)
at com.kivancmuslu.www.solstice.server.listeners.ResourceChangeListener.processResourceDelta(ResourceChangeListener.java:86)
at com.kivancmuslu.www.solstice.server.listeners.ResourceChangeListener.resourceChanged(ResourceChangeListener.java:31)
at org.eclipse.core.internal.events.NotificationManager$1.run(NotificationManager.java:291)
at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
at org.eclipse.core.internal.events.NotificationManager.notify(NotificationManager.java:285)
at org.eclipse.core.internal.events.NotificationManager.broadcastChanges(NotificationManager.java:149)
at org.eclipse.core.internal.resources.Workspace.broadcastPostChange(Workspace.java:395)
at org.eclipse.core.internal.resources.Workspace.endOperation(Workspace.java:1530)
at org.eclipse.core.internal.events.AutoBuildJob.doBuild(AutoBuildJob.java:156)
at org.eclipse.core.internal.events.AutoBuildJob.run(AutoBuildJob.java:241)
at org.eclipse.core.internal.jobs.Worker.run(Worker.java:53) 
```

为什么字符串对象被写入并通过网络发送没有问题的任何想法，但是我的其他序列化对象导致此异常？我还在下面附上了我的序列化类，以防万一：

```
package com.kivancmuslu.www.solstice.logic;

public class ResourceChangedMessage extends SolsticeMessage
{
    /**
     * 
     */
    private static final long serialVersionUID = -2877650023886033398L;

    public static enum ResourceChangeType
    {
        ADDED, REMOVED
    }

    private final String projectName_;
    private final String relativeResourcePath_;
    private final ResourceChangeType resourceChangeType_;

    public ResourceChangedMessage(String projectName, String relativeResourcePath,
                                  ResourceChangeType resourceChangeType)
    {
        projectName_ = projectName;
        relativeResourcePath_ = relativeResourcePath;
        resourceChangeType_ = resourceChangeType;
    }

    public String getProjectName()
    {
        return projectName_;
    }

    public String getRelativeResourcePath()
    {
        return relativeResourcePath_;
    }

    public ResourceChangeType getResourceChangeType()
    {
        return resourceChangeType_;
    }
} 
```

其中 SolsticeMessage 定义为：

```
package com.kivancmuslu.www.solstice.logic;

import java.io.Serializable;

public abstract class SolsticeMessage implements Serializable
{
    private static final long serialVersionUID = 4048501241385740686L;

    public abstract String toString();
} 
```

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T21:11:21.597

我强烈怀疑连接的另一端正在关闭它。例如，如果它是另一个具有以下代码的 Java 程序：

```
Socket client = serverSocket.accept();
reader_ = new ObjectInputStream(client.getInputStream());
reader_.readObject();
reader_.close(); 
```

...那么您的发送代码将无处可发送第二个对象。不幸的是，你没有给我们正在监听的代码。以上是我最好的猜测。

编辑：现在您已经发布了服务器代码，我们可以看到真正的问题。这是它试图阅读的内容：

```
while ((obj = reader.readObject()) != null)
{
    SolsticeMessage message = (SolsticeMessage) obj;
    processMessage(message);
} 
```

...但你`String`先发送它。因此，它试图将 a 强制转换`String`为 a `SolsticeMessage`，这将引发异常 - 并且可能*会*导致整个过程停止，或者至少以关闭连接结束。

# r - 参考类的 R 测试

> ID：13297841
> 
> 赞同：5
> 
> 时间：2012-11-08T21:09:23.177
> 
> 标签：r, reference-class

是否有一种快速而肮脏的方法来测试实例是否来自引用类？

标准的 R 对象测试产生以下结果 - 但似乎没有任何东西专门标记参考类。

```
classy <- setRefClass('classy',
    fields = list(
        count = 'numeric'
    ),
    methods = list(
        initialize = function( data=NULL ) {
            .self$data <<- data
        }
    )
)

instance <- classy$new() # instantiation

isS4(instance) # TRUE
mode(instance) # "S4"
typeof(instance) # "S4"
class(instance) # [1] "classy" attr(,"package") [1] ".GlobalEnv"
dput(instance) # new("classy", .xData = <environment>)
str(instance) # 
# Reference class 'classy' [package ".GlobalEnv"] with 1 fields
#  $ count: num(0) 
#  and 13 methods, of which 1 are possibly relevant:
#    initialize 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T21:53:22.440

试试这个：

```
 inherits(instance, "envRefClass")
# should return [1] TRUE 
```

这可以在 的“继承”部分找到`help(ReferenceClasses)`。我怀疑约翰·钱伯斯可能会反对称其为“肮脏”。

Apropos Hadley 的评论`is`被记录为与行为基本相同，`inherits`但具有识别条件继承的附加能力：

```
is(instance, "envRefClass")
#TRUE 
```

# c# - 将数据表转换为自定义 XML 的替代方法

> ID：13297843
> 
> 赞同：2
> 
> 时间：2012-11-08T21:09:28.223
> 
> 标签：c#, xml, linq, datatable

有没有一种方法可以在不使用的情况下从数据表创建 XML

1.  答`StringWriter`：

    ```
    System.IO.StringWriter writer = new System.IO.StringWriter();
    yourDataTable.WriteXml(writer, XmlWriteMode.WriteSchema, true); 
    ```

    对我来说效果不佳，因为它将后代作为列标题。我想要第一行作为后代。

2.  迭代 DataColumns 和 DataRows。

我正在阅读有关 LINQ-to-DataTable 和 LINQ-to-XML 的信息。

LINQ 查询可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T21:33:07.997

`XmlDocument`下面是使用该类生成 XML的示例

```
 XmlDocument xDoc = new XmlDocument();

        XmlElement rootElement = xDoc.CreateElement("Root");
        XmlElement customElement = xDoc.CreateElement("customElement");
        XmlAttribute xAtt = xDoc.CreateAttribute("customAttribute");
        xAtt.Value = "attval";

        customElement.Attributes.Append(xAtt);
        rootElement.AppendChild(customElement);
        xDoc.AppendChild(rootElement); 
```

linq to xml 库`XDocument`遵循类似的模型。您应该查看文档并使用它。

# html - 应用多个重叠的背景图像

> ID：13297845
> 
> 赞同：5
> 
> 时间：2012-11-08T21:09:33.437
> 
> 标签：html, css

我正在构建一个我不是 100% 确定如何执行的设计。这是一个非常粗略的例子。

[http://jsfiddle.net/cgRyH/1/](http://jsfiddle.net/cgRyH/1/)

本质上，我需要一个简单的背景纹理来水平重复到无穷大。最重要的是，在我的内容下方，我需要在背景中添加一些比包含`divs`我的内容更宽的口音。在我的示例中，我已经完成了这个`div`，唯一的目的是添加这个额外的背景图像......但这看起来很笨重。

有没有更好的方法来实现这一点？

编辑：我的白色页脚需要看起来伸展到屏幕的底部和两侧。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T21:12:15.897

可以使用 CSS3。它得到了很好的支持，除了像往常一样在 IE 家族中它直到 IE9 才出现。

[http://www.css3.info/preview/multiple-backgrounds/](http://www.css3.info/preview/multiple-backgrounds/)

除此之外，你这样做的方式是理想的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T21:38:14.337

几点评论：

当您尝试使维度继续“无限”时，通常会涉及计算（javascript），因为如果存在滚动条，则 100%**不会**覆盖整个屏幕。但是，使用图像时有一个巧妙的 css 技巧，它会自动为您拉伸它，`background-size: cover;`. 我已将此作为示例纳入小提琴中。我还用css为页脚添加了一些东西。由于没有可用的 javascript，此示例使用一个 div 整个屏幕的大小在较低的 z-index 值，以提供页脚背景颜色。为了使页脚突出，我用黑色背景和白色文本突出显示它。你可以进去把它们改成相反的（这是你想要的），但为了显示，我使用了更多的对比度，这样你就可以看到效果。

这是示例：http: [//jsfiddle.net/cgRyH/2/](http://jsfiddle.net/cgRyH/2/)

# r - 远程 R 进程死亡

> ID：13297848
> 
> 赞同：0
> 
> 时间：2012-11-08T21:09:43.600
> 
> 标签：r, ssh, parallel-processing

我在 Ubuntu 机器上运行 R 并尝试利用远程 Ubuntu 机器进行并行处理。我可以 ssh 到远程机器。

```
hosts="remoteIPaddress"; cluster=makeCluster(hosts, type="PSOCK",user="myusername",master="mylocalIPaddress"); registerDoParallel(cluster); foreach(i=1:100,.combine="rbind") %dopar% i^2 
```

makeCluster 命令提示我输入密码，在远程机器上我可以看到一个 R 进程在输入时启动。这个过程立即终止，当我运行 foreach 命令时，我得到“反序列化错误（node$con）：从连接读取错误”。有谁知道发生了什么？

```
> sessionInfo()
R version 2.15.1 (2012-06-22)
Platform: x86_64-pc-linux-gnu (64-bit)

locale:
 [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C               LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    
 [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8    LC_PAPER=C                 LC_NAME=C                 
 [9] LC_ADDRESS=C               LC_TELEPHONE=C             LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       

attached base packages:
[1] grDevices datasets  grid      parallel  utils     stats     graphics  methods   base     

other attached packages:
 [1] quantmod_0.3-17              TTR_0.21-1                   Defaults_1.1-1               portfolio_0.4-5             
 [5] nlme_3.1-104                 lattice_0.20-6               PerformanceAnalytics_1.0.4.4 xts_0.8-6                   
 [9] zoo_1.7-8                    np_0.40-13                   cubature_1.1-1               doParallel_1.0.1            
[13] iterators_1.0.6              foreach_1.4.0                boot_1.3-5                  

loaded via a namespace (and not attached):
[1] codetools_0.2-8 compiler_2.15.1 tools_2.15.1 
```

# c# - 如何将对象转换为动态类型？

> ID：13297855
> 
> 赞同：2
> 
> 时间：2012-11-08T21:10:11.990
> 
> 标签：c#, .net, .net-4.0

我所有的对象都由一个名为`GameObject`. 所有这些对象都继承自一个或多个接口，例如`IRenderable`、`IAnimatable`、`IMovable`等。

我还有一个存储为`List<GameObject>`. 我正在尝试编写一个动态方法，它将返回给我从特定接口继承的所有对象，如下所示：

```
List<IRenderable> renderableObjects = ObjectManager.GetAll<IRenderable>(); 
```

起初，我尝试只返回一个新的游戏对象列表，其中每个对象的类型都与动态类型匹配，然后将其转换`List<GameObject>`为`List<T>`. 我收到的编译器错误说我无法转换这些类型。

所以我的第二次尝试涉及单独投射每个对象，如下所示。

```
public List<T> GetAll<T>() {
    List<T> list = new List<T>();

    foreach( GameObject obj in this.gameObjects )
        if( obj is T )
            list.Add( (T)obj );

     return list;
} 
```

但是，这会引发相同类型的错误；无法将 GameObject 类型转换为 T。我错过了什么吗？还有另一种方法来完成我想要的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T21:12:04.900

LINQ 已经为您提供了一个非常方便的方法，`OfType()`.

```
List<GameObject> list = ...;
var movableObjects = list.OfType<IMovable>(); 
```

`OfType`将返回一个序列，其中包含输入序列中的所有项目，这些项目可以转换为您指定的类型。此外，还有一个`Cast<T>()`操作员只是尝试投射所有内容，如果无法投射项目（这似乎不是您想要的），则会抛出异常。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-08T21:12:48.303

Servy 提供了更好的方法，但您也可以轻松地修复代码。只需给`T`泛型类型参数一个约束：

```
public List<T> GetAll<T>() where T : GameObject { 
```

另一个（更糟糕的）替代方案是添加额外的演员表：

```
list.Add((T)(object)obj); 
```

到泛型类型参数的转换有点混乱。有关详细信息，请参阅[Eric Lippert 的博客文章](http://blogs.msdn.com/b/ericlippert/archive/2012/07/10/when-is-a-cast-not-a-cast.aspx?PageIndex=2)。

（我肯定会使用 Servy 的方法——重新发明轮子没有意义——我只是想解释如何在类似情况下修复你的代码。）

# android - 如何学习在 Android 中编程 GPS 应用程序

> ID：13297873
> 
> 赞同：3
> 
> 时间：2012-11-08T21:11:25.843
> 
> 标签：android, gps

几周前，我开始学习编写必须使用 GPS 的 Android 应用程序（获取位置并将其保存到数据库中）。但是我发现了很多信息；我不知道从哪里开始！

**问题：**

请帮助我使我的学习全面而完整！

当您学习本主题时，哪些帮助对您最有用（或最容易理解）？（请提供有用主题或视频课程的链接）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-08T21:27:03.853

如果您正在寻找有用的书，我可以向您推荐“Professional Android Sensor Programming”（G. Milette，A. Stroud）。

我也可以建议这个链接：

[http://www.vogella.com/articles/AndroidLocationAPI/article.html](http://www.vogella.com/articles/AndroidLocationAPI/article.html)

或基本介绍：

[http://www.slideshare.net/androidstream/android-gps-tutorial](http://www.slideshare.net/androidstream/android-gps-tutorial)

最后，我认为您应该始终参考 developer.android.com 网站：

[http://developer.android.com/guide/topics/location/strategies.html](http://developer.android.com/guide/topics/location/strategies.html)

# ios - iOS 6 旋转错误：尽管旋转，窗口和根视图控制器框架不会改变

> ID：13297874
> 
> 赞同：5
> 
> 时间：2012-11-08T21:11:26.787
> 
> 标签：ios, rotation, ios6

> **可能重复：**
> [在 iPhone 中重新定向后“不正确”的框架/窗口大小](https://stackoverflow.com/questions/2686882/incorrect-frame-window-size-after-re-orientation-in-iphone)

我正在尝试用我的应用程序解决一个非常令人沮丧的问题 - 在研究它时，我可能在 iOS 中发现了一个错误：

当您旋转 iPad 时，视图会旋转，但它的框架不会改变。我正在运行一个计时器，它每秒打印出我的视图的宽度和高度，虽然我可以看到视图在视觉上旋转，但无论如何框架仍然是“768x1024”。

来自 Apple 的文档：

> 当用户界面旋转时，窗口会调整大小以匹配新方向。窗口调整其根视图控制器的框架以匹配新的大小，而这个大小又会沿着视图层次向下传播到其他视图。

这正是没有发生的事情，它给我带来了各种各样的麻烦。有谁知道如何修复旋转以使框架发生变化？

重现步骤：

1.  创建一个新的空项目
2.  添加骨骼 UIViewController 作为根视图
3.  设置一个计时器来打印出根视图控制器的框架宽度和高度
4.  运行您的应用程序，并旋转它。这是我正在测试的代码：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    self.window.rootViewController = [[UIViewController alloc] init];

    NSLog(@"%fx%f", self.window.rootViewController.view.frame.size.width, self.window.rootViewController.view.frame.size.height);

    // 添加标签以确认方向
    UILabel *orientationLabel = [[UILabel alloc] initWithFrame:CGRectMake(10,10,100,30)];
    orientationLabel.text = @"左上角";
    [self.window.rootViewController.view addSubview:orientationLabel];

    [NSTimer scheduleTimerWithTimeInterval:.3 target:self 选择器:@selector(testScale) userInfo:nil repeats:YES];

    self.window.backgroundColor = [UIColor whiteColor];
    [self.window makeKeyAndVisible];
    返回是；
}

```

```
-（无效）testScale {
    NSLog(@"%fx%f", self.window.rootViewController.view.frame.size.width, self.window.rootViewController.view.frame.size.height);
}

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T21:37:34.103

您是否尝试将 UIViewController 放在 UINavigationController 中？我有一个类似的问题，它解决了它。UINavigationController 类似乎比 UIViewController 处理更好的旋转。

尝试这样的事情：

```
UIViewController *myViewController = [[UIViewController alloc] init];
UINavigationController *myNavigationController = [[UINavigationController alloc] initWithRootViewController:myViewController];
self.window.rootViewController = myNavigationController; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T21:17:14.433

不是错误。你想要的是使用`bounds`而不是`frame`

这样想吧。旋转设备时，设备不会更改其屏幕尺寸。它保持不变，但观点正在改变。所以这就是你想要使用边界的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T21:27:47.617

您可以使用状态栏的状态

```
 [[UIApplication sharedApplication] statusBarOrientation] 
```

使用**if 语句**，您可以知道屏幕是横向还是纵向

# gcc - 从结构化指针对象中获取成员

> ID：13297876
> 
> 赞同：0
> 
> 时间：2012-11-08T21:11:37.433
> 
> 标签：gcc, struct, typedef

我在c（gcc）中有以下形式：

```
typedef struct {
  mem 1;
  mem 2;
  mem n;
} *obj; 
```

如何从该类型的结构中获取特定成员，初始化为`obj var;`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T21:41:26.867

首先，该声明无效，您试图声明标识符为数字的成员。我假设你真的想要这个：

```
typedef struct foo {
    int mem_1;
    int mem_2;
    ...
} *obj; 
```

您可以使用点 ( `.`) 访问普通结构成员：

```
struct foo bar;
bar.mem_1 = 2; 
```

这很好，编译器会自动分配正确大小的堆栈空间。现在，由于 your`obj var`是指针¹，我们将使用箭头 ( `->`) 访问其成员：

```
obj var;
var->mem_1 = 3; 
```

当然，如果你幸运的话，这将是段错误。如果没有，您可能会与调试器进行一次非常长且富有启发性的会话。与声明 a`struct foo`本身不同，Declaring`obj var`或其等价物`struct foo *var`除了未初始化的指针外不会创建任何东西。您需要自己为此提供内存：

```
obj var = malloc(sizeof(*var)); 
```

请注意，这仅提供内存，其内容仍未定义，但您可以安全地分配给它们。

^(1：这就是`typedef`像您所做的那样删除指针的问题；不可能知道您是否需要使用`.`或`->`没有看到 typedef 或被编译器告知。不要`typedef`用来隐藏指针。)

# sql - 序列不包含任何元素 - LINQ、MVC、Average

> ID：13297880
> 
> 赞同：17
> 
> 时间：2012-11-08T21:11:57.147
> 
> 标签：sql, asp.net-mvc, vb.net, linq, entity-framework

我遇到了这个错误。我看到原因是因为有时返回的平均值是 0.00，从数据的角度来看这是准确的。此 SQL 查询工作正常，但那是因为它自动输入 0.00。

LINQ 抱怨，所以我尝试使用 DefaultIfEmpty() 但它说它期待我的 ViewModel。

```
Dim ticketCounts = From t In queue _
   Where _
    (t.StatusId = 2) And _
    (t.CloseDate.Year = Convert.ToDateTime(DateTime.Now).Year) And _
    (t.ResolutionDays > 0)
   Group t By _
    Column1 = CType(t.CloseDate.Month, Integer), _
    Column2 = CType(t.CloseDate.ToString("MMMM"), String) _
    Into g = Group _
   Order By Column1 _
   Select _
    Id = Column1, _
    Month = Column2, _
    Critical = g.Where(Function(t) t.PriorityId = 1).DefaultIfEmpty().Average(Function(t) t.ResolutionDays), _
    High = g.Where(Function(t) t.PriorityId = 2).DefaultIfEmpty().Average(Function(t) t.ResolutionDays), _
    Normal = g.Where(Function(t) t.PriorityId = 3).DefaultIfEmpty().Average(Function(t) t.ResolutionDays), _
    Low = g.Where(Function(t) t.PriorityId = 4).DefaultIfEmpty().Average(Function(t) t.ResolutionDays), _
    Total = g.Where(Function(t) t.Id <> Nothing).DefaultIfEmpty().Average(Function(t) t.ResolutionDays) 
```

**更新！** 这是我需要 VB 做的同样事情的 SQL 查询。

```
SELECT
    DATENAME(MONTH,t.CloseDate) AS 'Month',
    AVG(CASE WHEN (t.PriorityId = 1) THEN CAST(t.ResolutionDays AS Decimal(18, 2)) ELSE 0 END) AS 'Critical',
    AVG(CASE WHEN (t.PriorityId = 2) THEN CAST(t.ResolutionDays AS Decimal(18, 2)) ELSE 0 END) AS 'High',
    AVG(CASE WHEN (t.PriorityId = 3) THEN CAST(t.ResolutionDays AS Decimal(18, 2)) ELSE 0 END) AS 'Normal',
    AVG(CASE WHEN (t.PriorityId = 4) THEN CAST(t.ResolutionDays AS Decimal(18, 2)) ELSE 0 END) AS 'Low',
    AVG(CAST(t.ResolutionDays AS Decimal(18, 2))) AS 'Monthly Average'
FROM
    tblMaintenanceTicket t
WHERE
    t.StatusId = 2
    AND YEAR(t.CloseDate) = year(getdate())
GROUP BY 
    MONTH(t.CloseDate),
    DATENAME(MONTH,t.CloseDate)
ORDER BY
    MONTH(t.CloseDate) 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2014-12-22T10:49:51.333

```
Critical = g.Where(Function(t) t.PriorityId = 1).Select(Function(t) t.ResolutionDays).DefaultIfEmpty().Average() 
```

参考： http: [//geekswithblogs.net/SoftwareDoneRight/archive/2011/02/15/fixing-linq-error-sequence-contains-no-elements.aspx](http://geekswithblogs.net/SoftwareDoneRight/archive/2011/02/15/fixing-linq-error-sequence-contains-no-elements.aspx)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-11-08T21:17:56.490

`IEnumerable(Of T)`问题是如果输入没有任何元素，所有标量 LINQ 方法（Average、Max 等）都会抛出异常。看起来`g.Where`调用导致空集合导致异常。

您可能想要做的是编写一个处理空案例并返回默认值的方法。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-07-09T14:00:55.973

这是我使用的辅助方法。

```
 public static double AverageOrDefault(this IEnumerable<double> enumerable)
    {
        return enumerable.DefaultIfEmpty().Average();
    }

    public static double AverageOrDefault<T>(this IEnumerable<T> enumerable, Func<T, double> selector)
    {
        return enumerable.Select(selector).DefaultIfEmpty().Average();
    } 
```

# c++ - 指针没有价值

> ID：13297881
> 
> 赞同：0
> 
> 时间：2012-11-08T21:11:58.560
> 
> 标签：c++, pointers

我试图在一个函数中声明指向类的指针，并用这个指针作为参数调用另一个函数。另一个函数试图创建类并将指向这个新创建的类的指针分配给输入指针。

第一种方法：

```
size_t packetLen = 0;
ETH2::PacketEthernetII* eth = NULL; 
IPv4::PacketIPv4* ip4 = NULL;   
ICMP::PacketICMP* icmp = NULL;
TCP::PacketTCP* tcp = NULL;
UDP::PacketUDP* udp = NULL;
if (!buildPackets(formats, packetLen, eth, ip4, icmp, tcp, udp)) {} 
```

另一种方法：

```
 bool Device::buildPackets(const Tokens& formats, size_t& packetLen, 
        ETH2::PacketEthernetII* eth, IPv4::PacketIPv4* ip4, 
        ICMP::PacketICMP* icmp, TCP::PacketTCP* tcp, UDP::PacketUDP* udp)
    {
        for (size_t i = 0; i < formats.size(); ++i) {       
                if (Utilities::startsWith(formats[i], ETH2PROTO)) {             
                    eth = createEthernet2(formats[i]);          
                    if (!eth) 
                        return false;           
                    packetLen += eth->len();            
                }
        }   
        return true;
} 
```

第二种方法正在起作用，并且 eth 对对象具有价值。但返回第一种方法后，eth 为空......我不知道为什么。我错过了哪些关于指针的重要细节？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T21:19:52.007

通过引用调用：

```
bool Device::buildPackets(const Tokens& formats, size_t& packetLen, 
    ETH2::PacketEthernetII* &eth, IPv4::PacketIPv4* ip4, 
    ICMP::PacketICMP* icmp, TCP::PacketTCP* tcp, UDP::PacketUDP* udp) 
```

# javascript - 在 wsdl2js 中调用 ToUpper(s)

> ID：13297882
> 
> 赞同：1
> 
> 时间：2012-11-08T21:12:00.110
> 
> 标签：javascript, jquery, xml, web-services, wsdl

我正在使用[wsdl2js](http://sourceforge.net/projects/wsdl2js/)尝试访问 JavaScript 中的 Web 服务。我试图从简单开始，所以我只有以下内容

```
function callws(){ 
    var ws = new Service1("http://server/TextMyBusService.wsdl");
    ws.ToUpper(document.getElementById("getCurrentBusPositions").value);
} 
```

这在 Chrome 中给了我以下错误

```
GET http://server/[object%20Object] 404 (Not Found)
Uncaught TypeError: Cannot read property 'firstChild' of null 
```

当我在 Firefox 中使用 Firebug 时，它告诉我第一个错误是我的 jQuery 中的一行（最新的 jQuery）

```
i.send(c.hasContent && c.data || null), d = function (a, e) { 
```

但没有提到任何 jQuery 错误。第二个错误来自我下载的 wsdl2js 源，所以我倾向于相信它可能不是错误，并且如果第一个错误得到修复，它可能会自行修复。尽管如此，这里是对线的参考

```
var resultNode = rawdata.documentElement.firstChild.firstChild.firstChild; 
```

我不是 100% 确定如何实现 wsdl2js，除了 zip 中给出的示例代码之外，我在网上找不到很多可以解决我当前问题的资源。如果我能得到一些关于实现 wsdl2js 的指示，那将不胜感激！

# haskell - Haskell中有一些目录步行者吗？

> ID：13297896
> 
> 赞同：19
> 
> 时间：2012-11-08T21:12:28.847
> 
> 标签：haskell, io, directory-traversal

Haskell 中是否有一些递归目录遍历器，所以我可以写类似的东西

```
listing <- walkDir "/tmp" 
```

我不想自己写。我可以从 cabal 安装一些依赖项，但我希望它是跨平台的（至少是 Linux 和 Windows）。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-15T11:47:00.643

这是列出目录树中所有 Haskell 文件的一种方法，使用不在隐藏目录中的目录树（其名称以 '.' 开头）[：](https://github.com/jberryman/directory-tree)

```
import Data.Traversable (traverse)
import System.Directory.Tree (
    AnchoredDirTree(..), DirTree(..),
    filterDir, readDirectoryWith
    )
import System.FilePath (takeExtension)

listFilesDirFiltered = do
    _:/tree <- readDirectoryWith return "C:\\devmy\\code"
    traverse print $ filterDir myPred tree
    return ()
  where myPred (Dir ('.':_) _) = False
        myPred (File n _) = takeExtension n == ".hs"
        myPred _ = True

main = listFilesDirFiltered 
```

适用于 Windows 和 Linux。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-05-23T06:59:09.020

我有一个使用文件路径包遍历目录的递归定义：

```
import Control.Monad
import System.Directory
import System.FilePath
import System.Posix.Files

-- | Traverse from 'top' directory and return all the files by
-- filtering out the 'exclude' predicate.
traverseDir :: FilePath -> (FilePath -> Bool) -> IO [FilePath]
traverseDir top exclude = do
  ds <- getDirectoryContents top
  paths <- forM (filter (not.exclude) ds) $ \d -> do
    let path = top </> d
    s <- getFileStatus path
    if isDirectory s
      then traverseDir path exclude
      else return [path]
  return (concat paths) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-08T21:16:23.963

[http://hackage.haskell.org/package/FilePather](http://hackage.haskell.org/package/FilePather)具有那种递归目录遍历功能。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-05-22T22:10:59.533

该[`filemanip`](http://hackage.haskell.org/package/filemanip-0.3.6.2/docs/System-FilePath-Find.html)软件包为此提供了强大而优雅的功能。例如，它提供了一个[`fold`](http://hackage.haskell.org/package/filemanip-0.3.6.2/docs/System-FilePath-Find.html#v:fold)函数，该函数将在目录树中递归调用您的函数。作为一个例子，我在[这里](https://github.com/danse/oldest/blob/19ce1ddcc21e81ab054e8df836aca96165f31c6f/oldest.hs#L46)使用它来递归地列出目录中的文件，从最旧的开始

# java - 使用 Spinners 并出现强制关闭错误 - ANDROID

> ID：13297897
> 
> 赞同：-1
> 
> 时间：2012-11-08T21:12:29.083
> 
> 标签：java, android, spinner, forceclose

---- 我尝试在 setcontentview 下移动微调器和 textview 变量，但微调器不为公众所知，因此我可以在 void onitemselected 中使用它们我应该怎么做？？？------

----- 而且我不确定我是否正确使用了微调器 -----

好的，所以我想使用微调器从它们那里获取我的值，并将其与随机生成的值进行比较，如果它们正确，则在 textview 中将它们显示为绿色，如果不是红色，我只为一个微调器做了这个 IF 语句只是为了测试它但它强制关闭。

主页.java

```
package com.example.decrypter;

import android.os.Bundle;
import android.app.Activity;
import android.graphics.Color;
import android.view.Menu;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemSelectedListener;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Spinner;
import android.widget.TextView;

public class MainPage extends Activity implements OnItemSelectedListener {
    double random1;
    int check1,check2,check3,check4,check5;

    EditText textbox;
    int guess;
    String s;
    Spinner spinner1 = (Spinner) findViewById(R.id.spinner01);
    Spinner spinner2 = (Spinner) findViewById(R.id.spinner02);
    Spinner spinner3 = (Spinner) findViewById(R.id.spinner03);
    Spinner spinner4 = (Spinner) findViewById(R.id.spinner04);
    Spinner spinner5 = (Spinner) findViewById(R.id.spinner05);
    TextView display1 = (TextView) findViewById(R.id.txtdisplay1);
    TextView display2 = (TextView) findViewById(R.id.txtdisplay2);
    TextView display3 = (TextView) findViewById(R.id.txtdisplay3);
    TextView display4 = (TextView) findViewById(R.id.txtdisplay4);
    TextView display5 = (TextView) findViewById(R.id.txtdisplay5);

    Integer[] numbers = {1,2,3,4,5,6,7,8,9};

    Button btnrandom = (Button) findViewById(R.id.btnrandom);
    Button btn1 = (Button) findViewById(R.id.btn1);
    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);

        ArrayAdapter <Integer> adapter1 = new ArrayAdapter <Integer>(this,       android.R.layout.simple_spinner_item, numbers);

        setContentView(R.layout.activity_main_page);
        spinner1.setAdapter(adapter1);
        spinner1.setOnItemSelectedListener(this);
        spinner2.setAdapter(adapter1);
        spinner2.setOnItemSelectedListener(this);
        spinner3.setAdapter(adapter1);
        spinner3.setOnItemSelectedListener(this);
        spinner4.setAdapter(adapter1);
        spinner4.setOnItemSelectedListener(this);
        spinner5.setAdapter(adapter1);
        spinner5.setOnItemSelectedListener(this);

        btnrandom.setOnClickListener( new View.OnClickListener() 
        { 

           public void onClick(View v) {
            // TODO Auto-generated method stub
            random1 = Math.floor(Math.random()*10); 
            //display.setText("random:" + random1);     
            /*check1 = Integer.parseInt(spinner1.getSelectedItem().toString())     ; 
            */
        }
       });

        btn1.setOnClickListener( new View.OnClickListener() 
        { 

           public void onClick(View v) {
            // TODO Auto-generated method stub

            if(check1==random1){
                display1.setTextColor(Color.GREEN);
                display1.setText(s);
            }
            else{
                display1.setTextColor(Color.RED);
                display1.setText(s);
            }   
        }
       });
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main_page, menu);
        return true;

    }

    @Override
    public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2,
            long arg3) {
        // TODO Auto-generated method stub

        check1 = Integer.parseInt(spinner1.getSelectedItem().toString());
        check2 = Integer.parseInt(spinner2.getSelectedItem().toString()) ;
        check3 = Integer.parseInt(spinner3.getSelectedItem().toString()) ;
        check4 = Integer.parseInt(spinner4.getSelectedItem().toString()) ;
        check5 = Integer.parseInt(spinner5.getSelectedItem().toString()) ;

    }

    @Override
    public void onNothingSelected(AdapterView<?> arg0) {
        // TODO Auto-generated method stub

    }
} 
```

AndroidManifest

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.decrypter"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainPage"
        android:label="@string/title_activity_main_page" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T21:23:37.837

```
public class MainPage extends Activity implements OnItemSelectedListener {
    double random1;
    int check1,check2,check3,check4,check5;

    EditText textbox;
    int guess;
    String s;
Spinner spinner1,spinner2,spinner3,spinner4,spinner5;
  TextView display1,display2,display3,display4,display5;
Button btnrandom,btn1;

    Integer[] numbers = {1,2,3,4,5,6,7,8,9};

    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);

              setContentView(R.layout.activity_main_page);
 spinner1 = (Spinner)findViewById(R.id.spinner01);
     spinner2 = (Spinner)findViewById(R.id.spinner02);
     spinner3 = (Spinner)findViewById(R.id.spinner03);
     spinner4 = (Spinner)findViewById(R.id.spinner04);
     spinner5 = (Spinner)findViewById(R.id.spinner05);
     display1 = (TextView)findViewById(R.id.txtdisplay1);
     display2 = (TextView)findViewById(R.id.txtdisplay2);
     display3 = (TextView)findViewById(R.id.txtdisplay3);
     display4 = (TextView)findViewById(R.id.txtdisplay4);
    display5 = (TextView)findViewById(R.id.txtdisplay5);
 btnrandom = (Button)findViewById(R.id.btnrandom);
    btn1 = (Button)findViewById(R.id.btn1);

        spinner1.setAdapter(adapter1);
        spinner1.setOnItemSelectedListener(this);
        spinner2.setAdapter(adapter1);
        spinner2.setOnItemSelectedListener(this);
        spinner3.setAdapter(adapter1);
        spinner3.setOnItemSelectedListener(this);
        spinner4.setAdapter(adapter1);
        spinner4.setOnItemSelectedListener(this);
        spinner5.setAdapter(adapter1);
        spinner5.setOnItemSelectedListener(this);

  ArrayAdapter <Integer> adapter1 = new ArrayAdapter <Integer>(this,       android.R.layout.simple_spinner_item, numbers);

        btnrandom.setOnClickListener( new View.OnClickListener() 
        { 

           public void onClick(View v) {
            // TODO Auto-generated method stub
            random1 = Math.floor(Math.random()*10); 
            //display.setText("random:" + random1);     
            /*check1 = Integer.parseInt(spinner1.getSelectedItem().toString())     ; 
            */
        }
       });

        btn1.setOnClickListener( new View.OnClickListener() 
        { 

           public void onClick(View v) {
            // TODO Auto-generated method stub

            if(check1==random1){
                display1.setTextColor(Color.GREEN);
                display1.setText(s);
            }
            else{
                display1.setTextColor(Color.RED);
                display1.setText(s);
            }   
        }
       });
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T21:15:21.943

强制关闭很可能是由于 display1 上的空指针异常引起的。初始化布局后，您应该在 onCreate() 中查找实例，否则 android 将无法通过 findViewById() 找到该微调器

参考：http: [//developer.android.com/training/basics/activity-lifecycle/starting.html#Create](http://developer.android.com/training/basics/activity-lifecycle/starting.html#Create)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T21:38:47.593

你正在这样做`Spinner spinner1 = (Spinner) findViewById(R.id.spinner01);`

在你声明变量时在你的类中。这些声明在类中的任何方法之外，因此在*加载*类时和方法代码之前（以 onCreate() 开始）被评估。

`findViewById`在当前加载的布局中搜索具有匹配 id 的视图，如果找到则返回它的实例。如果没有找到，或者没有加载布局，它将返回 null。

因为它返回 null，所以当您第一次尝试使用该实例时，您会得到一个空指针异常。

在您的情况下，您必须在调用 setContentView() 后使用 fndViewById，您应该在 onCreate() 中执行此操作。

要解决您的问题，请像这样在类级别声明变量，`Spinner spinner1;`然后在 setContentView 之后，像这样设置实例`spinner1 = (Spinner) findViewById(R.id.spinner01);`

如果视图不存在，findViewById 返回 null 而不是导致异常是完全合乎逻辑的，因为在某些情况下，可能会在运行时根据某些用户输入确定复杂的动态布局，因此类似的东西`if (findViewById(R.id.someview)==null)`是有效的。

# silverlight - 在模板中使用数据上下文到根

> ID：13297899
> 
> 赞同：0
> 
> 时间：2012-11-08T21:12:35.013
> 
> 标签：silverlight, xaml, data-binding, datacontext

我想将数据网格中的按钮变为可见或折叠，这取决于本地窗口属性。

以下项目**适用于 LayoutRoot**

```
<navigation:Page xmlns:sdk="http://schemas.microsoft.com/winfx/2006/xaml/presentation/sdk" x:Class="TBPM.PageIssues" 
           xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
           xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
           xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
           xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                 x:Name="PageIssueRoot"
... 
```

_

```
 <Grid DataContext="{Binding ElementName=PageIssueRoot}">
            <Button Click="btnPasteMessage_Click" Visibility="{Binding Path=IsSaving, Converter={StaticResource BoolToVis}}" >
                <Grid>
                    <Image Height="24" Source="/Next.png" HorizontalAlignment="Center" />
                </Grid>
            </Button>
        </Grid> 
```

代码隐藏

```
#Region "IsSaving"

    ''' <summary>
    ''' IsSaving Dependency Property
    ''' </summary>
    Public Shared ReadOnly IsSavingProperty As DependencyProperty = _
        DependencyProperty.Register("IsSaving", GetType(Boolean), GetType(PageIssues), _
            New Windows.PropertyMetadata(False))

    ''' <summary>
    ''' Gets or sets the IsSaving property.  This dependency property 
    ''' indicates ....
    ''' </summary>
    Public Property IsSaving() As Boolean
        Get
            Return CType(GetValue(IsSavingProperty), Boolean)
        End Get
        Set(ByVal value As Boolean)
            SetValue(IsSavingProperty, value)
        End Set
    End Property

#End Region 
```

**如果将其用作 DataGrid 模板，则**相同的代码将不起作用。

解决方案是什么？为什么模板找不到根窗口？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T14:53:16.907

试试`RelativeSource`绑定...

```
 <Grid DataContext="{Binding ElementName=PageIssueRoot}">
        <Button Click="btnPasteMessage_Click" Visibility="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=Page} Path=IsSaving, Converter={StaticResource BoolToVis}}" >
            <Grid>
                <Image Height="24" Source="/Next.png" HorizontalAlignment="Center" />
            </Grid>
        </Button>
    </Grid> 
```

# node.js - 使用带有 Meteor 的节点模块

> ID：13297901
> 
> 赞同：1
> 
> 时间：2012-11-08T21:12:52.707
> 
> 标签：node.js, meteor, postmark

我有一个非常简单的流星应用程序。我想在这个应用程序中使用邮戳 api，对我来说幸运的是他们有一个 node.js 模块。
[https://github.com/voodootikigod/postmark.js](https://github.com/voodootikigod/postmark.js)
我已经成功地将这个模块安装到节点并且可以看到它坐在那里。
我接触过的每一个资源都告诉我，现在应该可以通过 Meteor 访问，只需一个简单的要求。
到目前为止，这是我的代码。

 `````
    if (Meteor.isClient) {
      Template.hello.greeting = function () {
        return "Welcome to postmarkapp.";
      };

      Template.hello.events({
        'click input' : function () {
          // template data, if any, is available in 'this'
          if (typeof console !== 'undefined')
            Meteor.call('sendMail',function(error,result){
              console.log(result);
            });
          }
      });
    }

    if (Meteor.isServer) {
    var require = __meteor_bootstrap__.require;
    postmark = require("postmark")('API_KEY');
        Meteor.methods({
          sendMail: function() {

            return postmark;

          }
        });

    }

````  `现在，当我运行此方法时，我没有收到任何错误，但是我确实得到了一个没有方法的空对象。查看邮戳模块，我应该使用一种方法“发送”来获取对象。

任何人都可以告诉我我可能会出错的地方吗？我认为这可能是在包含节点模块以及在 Meteor 应用程序中使用该模块。

我已经广泛查看了 Meteor 的文档，似乎找不到与该主题相关的任何内容。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T17:34:47.177

此代码试图将`postmark.send`函数返回给客户端。这是不可能的。方法只能返回 JSON 可序列化值。

您应该能够`send`在方法主体内使用邮戳的功能，但根据其接口，您可能需要将其包装在纤维中。``

# ruby-on-rails - Omni_auth 在主干保存时注销

> ID：13297907
> 
> 赞同：0
> 
> 时间：2012-11-08T21:13:22.883
> 
> 标签：ruby-on-rails, backbone.js, omniauth

我有一个使用主干的 Rails 应用程序，但是当我调用保存时，服务器正在重定向到登录 - 即使我已经登录（找到主干模型的页面仅在登录后显示）。

我正在将backbone.matroyshka 用于嵌套模型-但删除它并不能解决问题。

这是在视图中调用模型保存的代码：

```
 var view = this;

// save model
this.model.save(null, {
    success: function(model, response) {
        view.$('#saving').hide();
        view.notice('Saved!', 'success');
    },
    error: function(model, response) {
        view.$('#saving').hide();
        view.notice(response, 'error');
        console.log('save failed ' + response, view.model.get('url'));
    }
}); 
```

在 model.save 请求之前，有一个使用 jQuery AJAX 检索数据的 AJAX 请求：

```
 $.ajax({
        type: 'GET',
        url: serverUrl,
        data: { url: model.get('url') },
        dataType: "json", 
        context: this,
        success: function(data) {
            model.set(data);
        },

        error: function(xhr, status, error) {
            console.log('lookup share url failed ' + error, this.get('source'),         this.get('about'));
            this.trigger('load:fail');
            if (options.error) {
                options.error(this, error);
            }
        }
    }); 
```

model.save 收到从服务器找到的 302，将其重定向到登录页面。资源的控制器受保护

```
 before_filter :signed_in_user, only: [:create] 
```

signed_in_user 是直接取自关于使用 omni_auth 的教程的会话助手

```
 def signed_in_user
unless signed_in?
  store_location
  redirect_to login_path, notice: "You must be logged in to find out what they do."
end 
```

结尾

我有另一个使用 AJAX（不是骨干网）保存的页面，它工作正常（也需要登录用户）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T21:18:04.193

我对 Backbone 没有太多经验，但听起来它没有发送[CSRF token](http://guides.rubyonrails.org/security.html#cross-site-request-forgery-csrf)。

这篇文章应该会有所帮助： http: [//ngauthier.com/2011/02/backbone-and-rails-forgery-protection.html](http://ngauthier.com/2011/02/backbone-and-rails-forgery-protection.html)

# opencl - 继续在 nvidia gpu 上获取 CL_INVALID_KERNEL_ARGS

> ID：13297908
> 
> 赞同：15
> 
> 时间：2012-11-08T21:13:33.837
> 
> 标签：opencl, nvidia

我在 nvidia GPU 上使用 OpenCL，当我尝试执行内核时，我不断收到 CL_INVALID_KERNEL_ARGS。我已经把它降级为一个非常简单的程序：

```
__kernel void foo(int a, __write_only image2d_t bar)
{
  int 2 坐标 = {0, get_global_id(0)};
  write_imagef(bar, coords, (float4)a);
}

```

使用以下 C 程序（为简洁起见，跳过了初始化和错误检查位）

```
cl_kernel foo = clCreateKernel(program, "foo", &err);
诠释一个= 42；
clSetKernelArg(foo, 0, sizeof(int), &a);

cl_image_format fmt = {CL_INTENSITY, CL_FLOAT};
cl_mem bar = clCreateImage2D(ctx, CL_MEM_WRITE_ONLY|CL_MEM_ALLOC_HOST_PTR, &fmt, 100, 1, 0, NULL, &err));
clSetKernelArg(foo, 1, sizeof(cl_mem), &bar);

size_t gws[] = {100};
大小_t lws[] = {100};
cl_event 事件；
clEnqueueNDRangeKernel(queue, foo, 1, NULL, gws, lws, 0, NULL, &evt);
clFinish（队列）；

```

clEnqueueNDRangeKernel 不断返回 CL_INVALID_KERNEL_ARGS。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-06-22T10:39:33.150

请参阅[https://stackoverflow.com/a/20566270/431528](https://stackoverflow.com/a/20566270/431528)。

> 您传递的缓冲区对象有多大？__constant 参数是从单独的内存空间而不是从全局内存分配的，因此您可能已经用完了常量内存

检查`CL_DEVICE_MAX_CONSTANT_BUFFER_SIZE`使用`clGetDeviceInfo`以确保您不超过该尺寸。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-09-12T05:37:30.077

您正在尝试将主机上的变量传递给内核。您需要创建一个`cl_mem`变量，然后使用 复制该值`clEnqueueWriteBuffer`，然后将`cl_mem`or`cl_int`变量传递给内核。除此之外，您的代码对我来说看起来不错。

# azure - 我应该为静态内容使用什么类型的 azure blob

> ID：13297912
> 
> 赞同：5
> 
> 时间：2012-11-08T21:13:57.320
> 
> 标签：azure, azure-blob-storage, azure-storage

我想将我的静态网站存储在 azure blob 中。
我的问题是，我应该为图像和 javascript 文件使用哪种类型的 blob（Page-Blob 或 Block-Blob）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T21:24:42.813

**块 Blob**是[与 Azure 存储一起出现的第一个选项，](http://blogs.msdn.com/b/windowsazurestorage/archive/2010/04/11/using-windows-azure-page-blobs-and-how-to-efficiently-upload-and-download-page-blobs.aspx)并且往往是最常见的，因为它们的目标主要用于流式传输（*或只读工作负载*）。**Page Blobs**后来出现，以更好地支持具有随机读写块范围的 VHD 挂载。

由于您会更频繁地阅读，因此我会推向**Block Blob**，这将为您提供最佳的下载性能。

# wordpress - 通过 .htaccess 将页面从 .php 重定向到 Wordpress 扩展

> ID：13297913
> 
> 赞同：0
> 
> 时间：2012-11-08T21:14:14.733
> 
> 标签：wordpress, .htaccess

我最近将我的网站切换到了 Wordpress。旧网站的链接结构是 www.example.com/contact.php，但现在是 www.example.com/contact/。我希望**将所有传入**链接重定向到 www.example.com/contact/ （或任何页面）。最近有人帮我解决了这个问题，.htaccess 代码是：

```
RewriteCond %{THE_REQUEST} ^(GET|HEAD|POST)\ /(.*)\.php($|\ )
RewriteCond %{REQUEST_URI} !wp-login
RewriteRule ^ /%2/ [L,R=301
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} ^/(.*?)/?$
RewriteCond %{DOCUMENT_ROOT}/%1.php -f
RewriteRule ^ /%1.php [L] 
```

它在一定程度上起作用。首先，我有一个自定义联系表单（来自自定义联系表单插件），它不会提交表单。其次，当我尝试更新页面时，它只会将我带到帖子页面。除了 wp-login 之外，还有什么我应该排除的吗？提前致谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T21:16:49.207

用于创建新页面和帖子以及更新旧页面和帖子的所有代码都在其中，`wp-admin`所以我怀疑您需要将其添加到列表中？

所以你的脚本的第一部分变成：

```
RewriteCond %{THE_REQUEST} ^(GET|HEAD|POST)\ /(.*)\.php($|\ )
RewriteCond %{REQUEST_URI} !wp-login [OR]
RewriteCond %{REQUEST_URI} !wp-admin
RewriteRule ^ /%2/ [L,R=301] 
```

当然，如果您有非标准文件夹名称，请酌情修改

# objective-c - iOS 错误：从 NSArray 对象（类型“void”）分配给 NSMutableString？

> ID：13297914
> 
> 赞同：0
> 
> 时间：2012-11-08T21:14:34.223
> 
> 标签：objective-c, ios, string-concatenation, nsmutablestring

我似乎无法解决这里出现的错误：“从不兼容的类型'void'分配给'NSMutableString *__strong'”。我试图附加的数组字符串值是一个 NSArray 常量。

```
NSMutableString *reportString     
reportString = [reportString appendString:[reportFieldNames objectAtIndex:index]]; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T21:18:18.263

`appendString`是一种`void`方法；你可能正在寻找

```
reportString = [NSMutableString string];
[reportString appendString:[reportFieldNames objectAtIndex:index]]; 
```

`append`您可以通过将其与初始化相结合来完全避免：

```
reportString = [NSMutableString stringWithString:[reportFieldNames objectAtIndex:index]]; 
```

请注意，还有另一种附加方法`NSString`需要赋值：

```
NSString *str = @"Hello";
str = [str stringByAppendingString:@", world!"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T21:18:08.690

appendString 已经将一个字符串附加到您将消息发送到的字符串中：

```
[reportString appendString:[reportFieldNames objectAtIndex:index]]; 
```

这应该足够了。请注意，如果您在 Xcode 4.5 中开发，您也可以这样做：

```
[reportString appendString:reportFieldNames[index]]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T21:16:20.480

试试这个：

```
NSMutableString *reportString = [[NSMutableString alloc] init];
[reportString appendString:[reportFieldNames objectAtIndex:index]]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T21:18:31.603

appendString 是一个 void 方法。所以：

```
NSMutableString *reportString = [[NSMutableString alloc] init];
[reportString appendString:[reportFieldNames objectAtIndex:index]]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-08T21:19:36.420

NSMutableString 方法`appendString:`不返回任何内容，因此您不能为其分配不存在的返回值。这就是编译器试图告诉你的。您要么想要 NSString ，要么`stringByAppendingString:`只想使用`[reportString appendString:[reportFieldNames objectAtIndex:index]];`而不分配返回值。

（当然，您需要先创建一个字符串才能进入`reportString`，但我假设您只是为了完整性而将其排除在外。）

# python - 将表单信息发送到 python 模块

> ID：13297916
> 
> 赞同：1
> 
> 时间：2012-11-08T21:14:40.300
> 
> 标签：python, tornado

我正在使用龙卷风框架，我想将用户输入到表单中的信息发送到另一个 python 模块。目前在我的python模块中，我有一个龙卷风类，它获取表单输入数据，如下所示：

```
class MainHandler(tornado.web.RequestHandler):
    def get(self):
        self.render('main.html')

    def post(self):
        event = self.get_argument('event')
        print event 
```

我现在想将此数据（事件）作为 arg 发送到另一个模块。

更完整的代码是：

```
import tornado.httpserver
import tornado.websocket
import tornado.ioloop
import tornado.web
import tornado.options
from pymongo import Connection
from bson import json_util
import json
import os.path

class MainHandler(tornado.web.RequestHandler):

    def get(self):
        self.render('main.html')

    def post(self):
        event = self.get_argument('event')
        return event

if __name__ == "__main__":
    print 'Server is alive.....'
    app = tornado.web.Application(
    handlers=[(r'/', MainHandler)],                           
    #(r'/ws', WSHandler)],
    template_path=os.path.join(os.path.dirname(__file__), "templates"),
    debug=True)

    tornado.options.parse_command_line()
    http_server = tornado.httpserver.HTTPServer(app)
    http_server.listen(8888)
    tornado.ioloop.IOLoop.instance().start() 
```

所以我在一个类函数中有一个变量（事件），我想在另一个模块中使用它。这就是我感到困惑的地方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T21:17:35.067

模块是指您可以在本地访问的东西还是外部服务上的东西？

如果它是本地的，那么就像导入正确的模块和函数一样简单

```
from yourpackage.yourmodule import yourfunction
yourfunction(event) 
```

如果您想通过 http 将数据发送到外部服务，tornado 为此提供了一个异步 http 客户端。[http://www.tornadoweb.org/documentation/httpclient.html](http://www.tornadoweb.org/documentation/httpclient.html)

我误解了您的问题`MainHandler`是要作为服务器运行，使用：

```
application = tornado.web.Application([
    (r"/", MainHandler),
])

if __name__ == "__main__":
    application.listen(8888)
    tornado.ioloop.IOLoop.instance().start() 
```

然后，这将通过对 localhost:8888 的请求公开您的方法。因此，如果您在浏览器`main.html`模板中访问 localhost:8888，则会呈现。

`localhost:8888`然后，如果您使用参数发出 post 请求，`event`它将被回显给您查看

# ruby-on-rails - POST 时命名空间控制器下的 best_in_place 返回 404

> ID：13297922
> 
> 赞同：0
> 
> 时间：2012-11-08T21:15:07.413
> 
> 标签：ruby-on-rails, best-in-place

我`best_in_place`根据[#302 In-Place Editing screencast](http://railscasts.com/episodes/302-in-place-editing?view=asciicast)实现了 gem 。

视图位于 下`admin/users`。

给定页面上的此代码

```
= best_in_place @user, :admin, type: :input 
```

结果呈现正常，单击时将其状态更改为可编辑字段，但是当尝试保存值时，我可以看到此错误

```
POST http://localhost:3000/admin/users 404 (Not Found) 
```

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T01:16:54.040

解决了。

我正在使用`$('.custom-selector').best_in_place()`而不是内部 `$('.best_in_place').best_in_place()`

# javascript - 警报弹出问题

> ID：13297925
> 
> 赞同：0
> 
> 时间：2012-11-08T21:15:17.483
> 
> 标签：javascript, html

我正在制作的警报功能有问题。只有当用户按下后退按钮时，警报才会响起。问题是当用户也尝试关闭页面时会显示警报。有任何解决这个问题的方法吗？这是代码。我通过在单击的任何链接上将布尔值设置为 true 来完成这项工作，这会关闭警报。

编辑：对于任何抓住它的人，是的，缺少引号。那只是我在这里编辑代码并意外删除了引号。这实际上不是问题，我在这里的代码中修复了它。

```
<script>
 var okayToLeave = false;

window.onbeforeunload = function () {
   if (!okayToLeave) {
   return "By going back, you risk submitting your order twice."
   }
}

function OkayToLeave() {
    okayToLeave = true;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T21:19:17.947

以下行中缺少 "：

`return "By going back, you risk submitting your order twice."`

编辑：

你的`OkayToLeave`方法应该定义`onbeforeunload`.

因此，您应该考虑只添加该事件，而不是将值设置为 true。

编辑2：

这是一个代码示例：

```
function NotOkayToLeave() {
    window.onbeforeunload = function () {
        return "By going back, you risk submitting your order twice.";
    };
};

function OkayToLeave() {
    window.onbeforeunload = null;
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T21:21:55.700

我不知道有任何方法可以确定卸载是由事件引起的关闭还是返回操作。但是，作为替代解决方案，您可以使用哈希标记作为缓冲区（这假设您不能完全重定向到另一个页面，这将是首选解决方案（除了设置会话值以防止重复提交））。

当他们到达页面时，使用 javascript 更改哈希标记。然后，检测哈希何时变回（后退按钮）并发出警报并添加回哈希。

jquery hashChange 插件是检测更改的一种方法。

[https://github.com/cowboy/jquery-hashchange](https://github.com/cowboy/jquery-hashchange)

# android - Android WebView - 使用 POST 提交表单后的方向更改

> ID：13297926
> 
> 赞同：2
> 
> 时间：2012-11-08T21:15:17.840
> 
> 标签：android, post, webview

我已经开发了android应用程序。它会打开一个 HTML 页面，其中包含一个带有一个字段的 POST 表单。这是它的HTML：

```
<form method="post">
   <input name="key" type="text"> <input type="submit">
</form> 
```

我已按照这篇[文章](https://stackoverflow.com/questions/8640501/how-to-fix-rotation-on-webview-for-android-phones)的建议在设备方向更改时正确存储/恢复 WebView 状态，并且它在大多数情况下都能正常工作，但以下情况除外：

第 1 步。当我运行此应用程序时

步骤 2\. 填写表格

步骤 3\. 提交表格

[第 4 步](https://24f32520-a-62cb3a1a-s-sites.googlegroups.com/site/ashvedandroiddevelopment/android-webview---orientation-change-after-form-submitted-with-post/step4.png?attachauth=ANoY7cq3NwXDMjqwts21ZCfuMFpOv32Nx6slIy2zDUpryMBcvnC8UpLs00czc8QGXcYYSAYSq_k7EqwJpNvhhc14V9gMtHcxE1khWUqmHC2HhNdlfoPz822eGkYJCixbY_FWziBd-LKp0PStBXvW0_fr-5E4uXZybYdHAulDphFEzIV5PqpnjK5m6FITfX9KQqWYu5BBTcXBC-TBb1Rblzsl4nSBq-x11Mkm8wIwG9Qq4gruPx90ByqlSH92ef_JvrYGTnaYbmX-gU0xRzSEZwvDxH7O2ELdCGrymbSpDMT78Yx9YUR7TKC6eooywBGKEVENgY1WT7Bz&attredirects=0)。更改我的设备的方向

我得到**网页不可用的**按摩。而不是只显示恢复的 WebView。在使用 POST 提交表单后，我是否在我的活动或某些配置中遗漏了某些内容以使 WebView 正确更改方向？

提前致谢：

附言

这是我的活动方法

```
 @Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    preferences = PreferenceManager.getDefaultSharedPreferences(this);
    webView = (WebView) findViewById(R.id.webview);

    if (savedInstanceState != null) {
        webView.restoreState(savedInstanceState);
    }
    else {
        loadPage();
    }
}

private void loadPage() {
    String url = preferences.getString(PrefsActivity.WOW_APP_URL, PrefsActivity.DEFAULT_URL);
    webView.loadUrl("http://192.168.1.101:8080/wow66/orientation.jsp");
}

@Override
public void onSaveInstanceState(Bundle savedInstanceState) {
    webView.saveState(savedInstanceState);
    super.onSaveInstanceState(savedInstanceState);
}

@Override
protected void onRestoreInstanceState(Bundle savedInstanceState) {
    super.onRestoreInstanceState(savedInstanceState);
    webView.restoreState(savedInstanceState);
} 
```

# javascript - 没有自动播放属性的 HTML5 视频自动播放

> ID：13297927
> 
> 赞同：2
> 
> 时间：2012-11-08T21:15:19.963
> 
> 标签：javascript, html, ios6, mobile-safari, html5-video

我有一个嵌入的 HTML5 视频，它在移动 Safari 中的 iOs6.0.1 上自动播放，但不存在自动播放属性。关于发生了什么或如何停止自动播放的任何想法？

```
<video width="640" height="480" controls="controls" preload="metadata">
  <source src="movie.mp4" type="video/mp4">
  <source src="movie.ogg" type="video/ogg">
  Your browser does not support the video tag.
</video> 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T21:35:28.113

尝试添加此代码：`autoplay="false"`.

# c# - 在 flash builder 中使用 HTTP Service 将数据发送到 C# webservice

> ID：13297928
> 
> 赞同：0
> 
> 时间：2012-11-08T21:15:19.197
> 
> 标签：c#, android, web-services, flash-builder, httpservice

这个问题可能完全是多余的，对此我深表歉意。但是我在我的 android 应用程序中有这段代码，使用 flash builder 将数据发送到 web 服务

```
 var ResponseValue:int = 1;
    var QuestionID:int = data.QuestionID;
  ResultsQuestion = new ArrayCollection();
                            ResultsQuestion.addItem({"ResultSEQ":10000});
                            ResultsQuestion.addItem({"QuestionID":QuestionID});
                            ResultsQuestion.addItem({"ResponsePromptID":chk1.name});
                            ResultsQuestion.addItem({"ResponseValue":ResponseValue});
                                                    var service:HTTPService = new HTTPService();
service.url = "http://IPaddress:443/InsertData/Service1.asmx/HelloWorld";

//service.url = "http://localhost/InsertData/InsertData/Service1.asmx/HelloWorld";
service.method="POST";
var parameters:Object = new Object();
parameters["ResponsePromptID"]= ResultsQuestion.getItemAt(2).ResponsePromptID;
parameters["QuestionID"]= ResultsQuestion.getItemAt(1).QuestionID;
parameters["ResponseValue"]= ResultsQuestion.getItemAt(3).ResponseValue;

service.send(parameters); 
```

我想将返回的这些数据插入到 SQLServer 中。为此，我编写了这个网络服务。

```
 [WebMethod]
        public string HelloWorld()
        {
            string Message;
            string MyConString = "Data Source=.\\SQLEXPRESS;Server=nameof server;Database=dbname;User ID=id;Password=password;Trusted_Connection=False; ";

  System.Data.SqlClient.SqlConnection DbConnection = new System.Data.SqlClient.SqlConnection(MyConString);
            DbConnection.Open();
            SqlCommand DbCommand = DbConnection.CreateCommand();
         string QuestionID= System.Web.HttpContext.Current.Request.Params["QuestionID"];

         // string QuestionID = "89";
            string ResultSEQ = "1999";
           string ResponsePromptID =System.Web.HttpContext.Current.Request.Params["ResponsePromptID"];
    //  string ResponsePromptID ="343";
            string ResponseValue = "12";
            DbCommand.CommandText = "Insert into [dbo].[tablename] (ResultSEQ,QuestionID,ResponsePromptID,ResponseValue) Values( @ResultSEQ,@QuestionID,@ResponsePromptID,@ResponseValue)";
            DbCommand.Parameters.AddWithValue("@ResultSEQ", ResultSEQ);
            DbCommand.Parameters.AddWithValue("@QuestionID", QuestionID);
            DbCommand.Parameters.AddWithValue("@ResponsePromptID", ResponsePromptID);
            DbCommand.Parameters.AddWithValue("@ResponseValue", ResponseValue);

            int result = DbCommand.ExecuteNonQuery();
            if (result == 1)
            {
                Message = "1";

            }
            else
            {
                Message = "2"; ;
            }
            DbConnection.Close();

            return Message;
        }
    } 
```

但是，我没有看到任何插入的数据，也没有看到任何错误。所以，我不确定出了什么问题。可能这整个这都是错误的。但是，请告诉我这段代码有什么问题？有没有办法查看我的 flex HTTPService 发送的数据？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T17:59:12.593

好吧，我在 flex 中使用了 Webserivce 而不是 HTTP 服务，因为我正在使用 .net Web 服务。这就像一个魅力。

```
<fx:Declarations>
    <s:WebService id="ws" wsdl="http://uraddress:443/TestWebserives/Service1.asmx?WSDL">
        <s:operation
            name="HelloWorld"/>
    </s:WebService>
                    </fx:Declarations> 
```

如果我想将数据发送到我的网络服务，我所要做的就是拥有这样的东西

```
ws.HelloWorld(ResultsQuestion.getItemAt(0).ResultSEQ,ResultsQuestion.g etItemAt(1).QuestionID,ResultsQuestion.getItemAt(2).ResponsePromptID,R esultsQuestion.getItemAt(3).ResponseValue); 
```

ResultsQuestion 是一个数组集合。

但是，我不确定使用 Webservice 而不是 HTTPSerive 的缺点/优点是什么？谢谢

# java - 检查 Minecraft 服务器是否在 Java 中在线？

> ID：13297931
> 
> 赞同：2
> 
> 时间：2012-11-08T21:15:32.103
> 
> 标签：java, status, minecraft

我该怎么做呢？我希望能够检查 Minecraft 服务器是否在线。最简单的方法是检查 25565 上的开放端口，但我不知道如何在 Java 中执行此操作，而且我读过的任何内容对我来说都没有意义。我已经阅读了有关尝试在远程域和端口上创建“服务器”的信息，但这对我来说真的没有意义。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T21:32:18.493

您可以像任何其他语言一样在 java 中进行原始套接字编程。这样的事情应该做。

```
public static void main(String[] args) throws UnknownHostException,
        IOException {
    boolean open = true;
    Socket socket = SocketFactory.getDefault().createSocket();
    try {
        socket.setSoTimeout(5000);
        socket.connect(new InetSocketAddress("127.0.0.1", 25565));
        socket.close();
    } catch (ConnectException e) {
        open = false;
        System.err.println(e);
    }

    System.out.println(open);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T21:22:20.393

编写一个连接服务器端口的客户端（使用你喜欢的搜索引擎搜索java客户端）

如果您想更彻底，请使用 tcpdump（或类似的东西）来监视客户端和服务器之间的协议（当您在系统上启动 Minecraft 时）并在您的客户端中模拟它。

顺便说一句，搜索“我的世界服务器协议”返回： http: [//www.minecraftwiki.net/wiki/Classic_server_protocol](http://www.minecraftwiki.net/wiki/Classic_server_protocol)

# java - Java 正则表达式模式匹配以 asterix 文字结尾的单词

> ID：13297934
> 
> 赞同：2
> 
> 时间：2012-11-08T21:15:50.227
> 
> 标签：java, regex

我正在尝试使用 java 制作一个简单的正则表达式模式。我需要用一个句子识别任何以星号结尾的大写单词。从以下示例：

```
`Test ABC*  array` 
```

`我需要识别“ABC *”，或者准确地说，任何以星号结尾的大写字母。我用我有限的正则表达式知识尝试了以下模式匹配，但到目前为止还没有成功。 ````
String text = "Test ABC*  array";
Matcher m = Pattern.compile("\b[A-Z]+[*]?\b").matcher(text);

```` 任何指针将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-08T21:20:50.003

问题是星号后面没有[单词边界](http://www.regular-expressions.info/wordboundaries.html)。所以试试这个

```
Matcher m = Pattern.compile("\\b[A-Z]+\\*\\B").matcher(text); 
```

`\B`不是单词边界，所以这正是你在 the`*`和空格之间得到的。

[在 Regexr 上](http://regexr.com?32oeg)查看

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T21:19:28.510

假设您的字符串可以包含多个 AAA* 部分：

```
String text = "Test ABC*  array";
Matcher m = Pattern.compile("([A-Z]+\\*)").matcher(text);
while (m.find()) {
    System.out.println(m.group());
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T21:19:14.327

我会保持简单：

```
if(text.contains("*")) {
  int index = text.lastIndexOf("*");
  String ident= text.substring(0,index-1);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T21:23:29.487

您必须用反斜杠转义字面星号。它最终成为 Java 中的双反斜杠。

```
"[A-Z]+\\*" 
````

# android - 使用 ContentProvider 插入失败

> ID：13297937
> 
> 赞同：0
> 
> 时间：2012-11-08T21:16:05.860
> 
> 标签：android, android-contentprovider

我正在使用 ContentProvider 将数据插入 SQLiteDatabase 并且插入失败。我希望有人会看到我做错了什么。这是我的代码：

```
public Uri insert(Uri uri, ContentValues values) {
    int uriType = sURIMatcher.match(uri);
    if (uriType != ALLDATA) {
        throw new IllegalArgumentException("Invalid URI for insert");
    }
    SQLiteDatabase sqlDB = mDB.getWritableDatabase();
    try {
        long newID = sqlDB.insertOrThrow(TABLE_BASEPATH,
                null, values);
        if (newID > 0) {
            Uri newUri = ContentUris.withAppendedId(uri, newID);
            getContext().getContentResolver().notifyChange(uri, null);
            return newUri;
        } else {
            throw new SQLException("Failed to insert row into " + uri);
        }
    } catch (SQLiteConstraintException e) {
        Log.i(DEBUG_TAG, "Ignoring constraint failure.");
    }
    return null;
} 
```

mDB 是一个全局变量，设置如下：

```
private SQLData mDB; 
```

SQLData 是我的数据库类的名称。当我在调试器中执行此代码时，它会验证 newID 是否大于 0 并进入 if 块。前两行执行（newUri 和 getContext() 等的赋值），但随后代码跳到底部并返回 null，而不是返回 newUri。有谁知道为什么？我看过[这个线程](https://stackoverflow.com/questions/5412259/android-custom-contentprovider)，但它似乎不适用于我的情况。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T21:21:43.483

我想我以前有过这个，它可能是两件事。

首先，它取决于调试器。我确定我已经在代码通过返回的地方得到了它；语句正确，只假装跳到返回空值。

检查调用函数。

其次，通常是我的罪魁祸首。您在旧版本的已编译代码上运行调试器。即运行调试清理。

恐怕我不记得确切的原因，我只知道我遇到过这种确切的情况。

# c++ - 如果仅在其中一个位置手动内联，如何保持在 2 个位置调用的 C++ 函数的一致性

> ID：13297938
> 
> 赞同：3
> 
> 时间：2012-11-08T21:16:12.377
> 
> 标签：c++, macros, inline

我在工作中遇到了一个 Linux C++ 程序设计问题。

函数 f() 在两个地方被调用。它已被声明为内联。

第一处， f() 被调用 10000 次，我们需要手动内联（将 f() 主体复制到它的调用者）以减少调用它的开销。结果已经证实了这些好处。

在位置二，f() 只被调用一次，目的与位置一不同。

为了进一步的工作，我可能会在 f() 中进行一些更改，如果我们手动进行内联，则需要在 f() 主体中进行相同的更改，以便在位置 1 和 2 中的 f() 始终完全相同。

以这种方式很难在地点 1 和地点 2 之间进行同步。

我们不想使用宏，因为我们需要使用 gdb 进行调试。

`__attribute__ ((always_inline))`我们的系统不支持。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T21:52:00.170

一种可能会生成一些不直观的代码但允许在内联和非内联版本中使用同一段代码的可能性如下（如果恰好有一个地方需要内联函数，它就可以工作）。

假设`a()`是您想要内联或非内联形式的一段代码，并且是应该嵌入`b()`内联版本的函数。`a()`利用 C++ 模板并使用名为 eg`b()`的`bool`ean 参数进行参数化`JUST_A`。现在，您的函数`b()`可能如下所示：

```
if (!JUST_A) {
    //do something
}
b()
if (!JUST_A) {
    //do something more
} 
```

由于模板机制分别为每个参数化生成代码，因此布尔参数将得到优化，您最终将得到一个变体 (for `JUST_A==false`)，它可以：

```
//do something
b()
//do something more 
```

另一个只做

```
b() 
```

（对于`JUST_A==true`）。取决于您是调用`a<true>()`还是`a<false>()`运行一段代码或另一段代码。

如果这确实有效，您可以检查程序的反汇编，但它应该。尽管如此，我认为这不是很好的代码，并且如果可能的话，我更喜欢其他人建议的强制内联的一些变体以提高代码的可读性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T21:11:04.557

提供两次功能。第一个函数在头文件中内联实现，第二个函数在调用内联函数的 cpp 文件中实现。

```
// function_inline.h
inline void function_inline()
{
   // implementation
}

// function.h
void function();

// function.cpp
#include "function.hpp"
#include "function_inline.hpp"
void function() { function_inline(); } 
```

常规代码会调用`function()`，但可以在您希望内联函数的地方`function_inline()`使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T21:21:52.030

使用宏。当你想调试时，将宏的主体复制到代码中，调试它，然后在完成后切换回宏。除非情况有点不寻常，否则您不需要多次单步执行该代码以使其正确。

[或者，您可以使用Cog](http://nedbatchelder.com/code/cog/)之类的预处理器替代方案或自定义脚本来验证代码是否保持不变。基本上，在两个文件中的相关块周围放置一个标记，然后提取和比较一些东西。如果它们不同步，请中断构建。

# android - 中心可绘制和缩放高度

> ID：13297939
> 
> 赞同：1
> 
> 时间：2012-11-08T21:16:16.413
> 
> 标签：android, imageview, scale, android-view

由于我想在不提供特殊“高清”版本的情况下支持平板电脑和智能手机，因此我需要根据用户设备的分辨率来缩放图像。这是在三星 Galaxy Nexus 上看起来不错的 ImageView 源代码：

```
 <ImageView
                        android:id="@+id/character"
                        android:layout_width="wrap_content" 
                        android:layout_height="wrap_content"
                        android:layout_alignParentBottom="true"
                        android:layout_centerHorizontal="true"
                        android:background="@android:color/transparent"
                      android:scaleType="centerCrop"
                       android:src="@drawable/ma_un1_001" /> 
```

![在此处输入图像描述](../Images/7a9c2d7debbdaca5625fb06ffb01330f.png)

但它会削减nexus 7上的图像。 ![在此处输入图像描述](../Images/33781dd37dfd529af5d0f08eac39bf71.png)

当我将宽度和高度更改为：

```
<ImageView
                android:id="@+id/character"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_alignParentBottom="true"
                android:background="@android:color/transparent"
                android:scaleType="centerCrop"
                android:src="@drawable/ma_un1_001" /> 
```

不幸的是，这会将图像缩放到视图之外： ![在此处输入图像描述](../Images/436a59fc04d34c303d2d5c42fd4ba65b.png)

将xml更改为

```
android:layout_width="wrap_content"
android:layout_height="fill_parent" 
```

仍然会削减图像。

所以我将 scaleType 更改为 FIT_START

```
<ImageView
                android:id="@+id/character"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_alignParentBottom="true"
                android:background="@android:color/transparent"
                android:scaleType="fitStart"
                android:src="@drawable/ma_un1_001" /> 
```

![在此处输入图像描述](../Images/d5fdea51ad547866832c66a22eb20341.png)

在我所有的设备上看起来都很棒，但可绘制对象与左侧对齐。有什么办法可以居中吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T21:30:31.980

感谢文辉，我找到了解决方案。

```
 <ImageView
                android:id="@+id/character"
                **android:layout_width="fill_parent"
                android:layout_height="fill_parent"**
                android:layout_alignParentBottom="true"
                android:background="@android:color/transparent"
                **android:scaleType="fitCenter"**
                android:src="@drawable/ma_un1_001" /> 
```

将图像缩放到每个屏幕尺寸并且不会剪切任何东西。非常感谢你。

# c# - 避免在泛型类中装箱和拆箱

> ID：13297944
> 
> 赞同：6
> 
> 时间：2012-11-08T21:16:35.813
> 
> 标签：c#, generics, boxing, unboxing

下面是一些快速代码来说明我的问题。有什么办法可以避免这种明显不必要的装箱/拆箱？

```
public class TestClass<T>
{
  public T TestMethod()
  {
    if (typeof(T) == typeof(bool))
    {
      return true; // doesn't work
      return (T)(object)true; // works, but any way to avoid this?
    }

    return default(T);
  }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T21:18:29.367

这是处理您在这里所做的事情的唯一方法（返回特定封闭泛型类型的非默认值）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-08T22:18:16.730

使其成为静态字段。

```
public class TestClass<T>
{
  static T TrueIfBoolean = typeof(T) == typeof(bool) ? (T)(object)true : default(T)

  public T TestMethod()
  {
    return TrueIfBoolean;
  }
} 
```

这样，装箱/拆箱只发生一次。即使在您的初始代码中，这种优化也完全有可能由运行时完成。

# java - 是否可以将 Android JUnit 测试套件压缩到 JAR 文件中？

> ID：13297950
> 
> 赞同：1
> 
> 时间：2012-11-08T21:17:04.263
> 
> 标签：java, android, eclipse, junit, robotium

我有一套使用robotium编写的Android JUnit测试，为了方便其他人使用，我想将它压缩到一个JAR文件中。但是我在将它放入 JAR 文件时遇到了问题，这让我认为这可能是不可能的。我尝试将其压缩到可运行的 jar 文件中，但该选项对我不可用（该类未出现在我可以转换为 jar 的类列表中）。

我所做的是编写一个使用 Robotium 的 Java 程序，它在桌面上运行并发送一个 APK 以在 android 设备上的 APK 上运行测试，然后将结果报告回桌面。它在 android 设备上运行，但它是通过桌面运行的。

有可能吗，如果没有，还有其他方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T13:56:01.947

你真正想要做的是给某人你的测试的apk，如果你在eclipse中查看bin文件夹，你会看到一个以你的项目命名的文件，扩展名为.apk。这是包含正确格式的所有测试的文件。

如果您给某人此 apk，他们可以将其安装在该设备上，然后使用 adb 运行命令来运行测试。命令的实际格式取决于您的软件包名称等，有关它的更多信息可以在[http://developer.android.com/tools/testing/testing_otheride.html#AMSyntax](http://developer.android.com/tools/testing/testing_otheride.html#AMSyntax)找到，但基本上看起来像

```
adb shell am instrument -w <package.test>/android.test.InstrumentationTestRunner 
```

您还可以使用 adb 从命令行安装 apk 文件等，您可以了解如何执行[http://developer.android.com/tools/help/adb.html#move](http://developer.android.com/tools/help/adb.html#move) adb 对于 android 测试非常方便。

# icloud - 是否可以在不安装主应用程序的情况下使用 iCloud 在多个应用程序之间共享键值存储？

> ID：13297958
> 
> 赞同：3
> 
> 时间：2012-11-08T21:17:30.380
> 
> 标签：icloud

我有一系列不相关的应用程序，我想在其中共享一个登录会话，而 iCloud 似乎为此提供了完美的解决方案。

我正在使用 OAuth，我很想使用为多个应用程序[配置通用键值存储中](https://developer.apple.com/library/prerelease/ios/#documentation/General/Conceptual/iCloudDesignGuide/Chapters/iCloudFundametals.html#//apple_ref/doc/uid/TP40012094-CH6-SW1)讨论的想法在多个应用程序之间共享令牌。

我看到的唯一限制是需要识别“主要应用程序”，并且在我的应用程序中，我没有可以识别为“主要”的应用程序。事实上，我的用户可能只安装了我在该系列中的一个应用程序（可能不是“主要”应用程序），但我仍然希望允许从中心位置访问令牌。

是否可以在用户购买/安装“主要”应用程序的情况下以这种方式共享令牌？

# php - Mac / OSx - 更改在 bash 中调用的 PHP 版本

> ID：13297965
> 
> 赞同：24
> 
> 时间：2012-11-08T21:18:01.413
> 
> 标签：php, macos, bash

我对通过 bash 命令“php”调用的 PHP 有疑问：

在 bash 中：

> php -v # PHP 5.3.17
> 
> /usr/bin/php # PHP 5.3.15

我主要想要辅助 PHP 版本 5.3.15，因为在这个版本中我已经正确安装了扩展等。

如何将**/usr/bin/php**设置为 main -> 我想要调用“ *php -v* ”返回我的 5.3.15 版本。

执行我糟糕的英语，希望你能理解。

非常感谢。我有 Mac OSx Lion

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-11-26T16:12:24.633

另一种不更改原始 php 文件/链接的方法是，如果您按如下方式编辑 .bashrc 文件（也适用于其他命令）：

1.  打开终端/命令行并输入：

    ```
    vim ~/.bashrc 
    ```

2.  然后按“i”进入编辑模式（如果在此之前出现问题，因为交换文件，然后按“E”继续编辑文件）
3.  添加以下行（根据需要更改路径）：

    ```
    alias php="/Applications/MAMP/bin/php/php5.4.10/bin/php" 
    ```

4.  按“ESC”并输入“:wq”
5.  如果你需要 php-alias 在你当前的 shell 会话中工作，那么你必须使用以下命令（这是可选的，所以只有你继续在你当前的 shell 中工作）：

    ```
    source ~/.bashrc 
    ```

就是这样，无需更改 /usr/bin 文件夹，如果需要，您可以将 bashrc 文件/设置导出到任何其他类似 linux / bsd 的系统，甚至无需触摸您的操作系统 /usr/bin 文件。您还可以为不同的 php 版本添加新别名，例如“php52”、“php53”、“php54”等别名，用于测试目的或其他目的。

玩得开心，ioCron

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2015-02-03T08:45:52.820

**操作系统：OSX Yosemite**
解决一个类似的问题`vim ~/.bash_profile`

> 导出 PATH=/usr/local/bin:$PATH
> 导出 PATH=/Applications/MAMP/bin/php/php5.5.10/bin:$PATH

确保顺序正确。放在**`export PATH=/usr/local/bin:$PATH`**前面**`export PATH=/Applications/MAMP/bin/php/php5.5.10/bin:$PATH`**

/usr/local/bin 包含 mac**默认 php**。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-04-25T22:50:31.547

对于 brew 用户，如果您已经有 54 个，则可能不需要 php55 - 但无论如何您可能应该运行这些命令

```
$ brew install php54 php54-xdebug php54-mcrypt 
```

如果需要，您可以用最新的数字替换 54。最后我检查它是在 56

然后根据上面的一些评论你应该运行：

```
$ php --version 
```

它可能会显示：

```
PHP 5.4.24 (cli) (built: Jan 19 2014 21:32:15) 
Copyright (c) 1997-2013 The PHP Group
Zend Engine v2.4.0, Copyright (c) 1998-2013 Zend Technologies 
```

如果是这样，那么像其他一些评论者一样更改你的 .bash_profile 我的 brew 实例（我认为它的默认值）存在

```
/usr/local/Cellar
/usr/local/bin 
```

当使用 brew 安装东西时，它们会被放入 Cellar 并通过 bin 链接。但在这种情况下，我们需要覆盖 php

```
$ sudo nano ~/.bash_profile 
```

我的有点像：

```
PATH=$PATH:~/bin
PATH=$PATH:/usr/local/bin
PATH=$PATH:/usr/local/sbin
PATH=$PATH:/usr/local/Cellar/r/2.15.1/R.framework/Versions/Current/Resources/li$
export PATH 
```

这意味着它已经可以访问 /usr/local/bin - 但我使用别名通过在底部附近添加此行来指定：

```
alias php="/usr/local/bin/php" 
```

保存并关闭终端窗口，打开另一个窗口，它应该显示如下内容：

```
$ php --version
PHP 5.4.27 (cli) (built: Apr 24 2014 17:16:35) 
Copyright (c) 1997-2014 The PHP Group
Zend Engine v2.4.0, Copyright (c) 1998-2014 Zend Technologies
    with Xdebug v2.2.4, Copyright (c) 2002-2014, by Derick Rethans 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-11-08T21:24:33.337

您应该查找路径并检查路径中的所有目录是否有指向错误 php 版本的符号链接。

然后您可以删除该符号链接并将其替换为指向正确版本的链接。

您还可以使用`find`查看所有实例：

```
$ sudo find / -name "php" 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-11-08T21:26:30.853

我建议您通过“Mac Ports”安装 php。

您安装了多个版本的 php。

使用 cli 命令“which”，您可以：

> 描述 which 实用程序获取一个命令名称列表，并搜索每个可执行文件的路径，如果这些命令实际被调用，将运行这些文件。

因此，请阅读 cli 命令“which”的手册页。

从您的 cli 执行此操作：

哪个php

然后你会看到你的 php 可执行文件在哪里。我建议您将 php 可执行文件替换为指向 /usr/bin/php 的符号链接。

# algorithm - 查找直线上最近的矩形交点

> ID：13297966
> 
> 赞同：3
> 
> 时间：2012-11-08T21:18:03.377
> 
> 标签：algorithm, data-structures, physics

`x_o`我有一条线从一个位置和`y_o`方向伸出`theta`。世界不是无限的，也有边界。

我想找到被线和交点击中的第一个矩形。

这是一个典型的 2D 游戏编程问题，但是我可以阅读任何简短的论文/教程吗？我在搜索字词方面遇到问题。

编辑：我知道光线投射。有什么非常简单的实现我可以看看吗？还有任何分析方法可以有效地解决这个问题。最后，有没有我可以在不诉诸矩形的情况下做出任何概括（如旋转的矩形......、圆形等）

Edit2：也可以使用良好、高效的数据结构来存储地图和障碍物

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T12:01:27.877

你把你的世界划分成一个网格怎么样。在每个单元格中，存储完全或部分位于该单元格中的障碍物。这将是您的搜索结构。

然后，从 (xo, yo) 向 theta 方向发射射线 R，首先要定位包含 (xo, yo) 的单元。接下来，计算 R 和单元格之间的交点（即 R 离开单元格的位置），并根据 R 离开单元格的哪一侧，使该相邻单元格成为新的当前单元格。对于这个单元格，计算 R 离开它的位置等。

在您到达的每个单元格中，检查 R 是否与存储在该单元格中的任何障碍物发生碰撞，如果是，则您的射线已与障碍物发生碰撞，您可以停止遍历单元格。

显然，这要求您使网格中的单元足够小，以使它们每个都只包含少量障碍物。如果障碍物的大小变化很大，您可以考虑使用[四叉树](http://en.wikipedia.org/wiki/Quadtree)而不是常规网格。但是，这将使遍历单元格更加复杂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T18:28:18.223

通过将障碍矩形定义为节点和边，您可能会获得一些牵引力。每个角是一个点（一个节点），每个边是一个边。给定您的节点集合，您可以为边缘生成线性方程。

然后，使用已知的射线方程，确定射线和每个边缘之间是否存在联立解。如果存在，则该边缘是解决方案点碰撞的候选者。

现在，这些边缘方程是整条线……矩形的边只是那条线的一部分，而不是整条线。所以...

最后，您可以确定解点是否包含在边缘段上（是否位于两个节点内）。如果是，则候选边是实际的碰撞边。如果找到多个碰撞边缘，则只取其解点最接近射线原点的碰撞边缘。

# jboss - 获取有关在 JVM (Jboss) 上运行的线程（cpu、内存）和其他 jvm 信息的信息

> ID：13297973
> 
> 赞同：2
> 
> 时间：2012-11-08T21:18:22.163
> 
> 标签：jboss, jvm, cpu, usage-statistics

我想用 java 编写应用程序，它将获取有关在 Jboss JVM 上运行的进程和线程的信息（%cpu 使用率、内存等）。我还想在 JVM (JBoss) 中查找有关内存使用情况和其他重要信息的信息。如何用纯java编写？

我知道 JConsole 之类的东西，但我需要自己编写。我发现 java.lang.managament 接口提供了一些有关系统、内存等的信息，但并未提供所有需要的信息。例如，我希望有机会读取每个线程使用的 cpu 使用情况（而不是 cpu 时间）和内存。（类似于 bash 中的 top 命令，但我需要在 java 中创建）。

有什么帮助吗？

编辑：最终我可以使用一些库来获取这些信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T21:39:44.720

正如 Adam 所说，有几种工具可以监控 java/jboss 资源的使用情况，另一种是[JBoss RHQ](http://www.jboss.org/rhq/)。

但是如果你真的需要自己编程，也许你会发现一些访问 jboss.system:type=ServerInfo mbean 的有用信息（检查它的属性和方法：listMemoryPools、listThreadCpuUtilization、listThreadDump ...）。您可以使用 JMX 控制台或以编程方式访问它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T22:46:31.097

JBoss AS 7 提供不同的管理界面。所有基于 Detyped Management 表示 (jboss-dmr) 的管理接口。

您可以使用 jboss-dmr 库和 jboss-as-controller-client 实现自定义 Java 客户端。例如，请参阅我们的[github 存储库](https://github.com/akquinet/jbosscc-as7-examples/tree/master/dmr-example)。

要获取有关 JVM 和其他内容的信息，您需要实现以下操作：

```
ModelNode operation = new ModelNode();
operation.get("operation").set("read-resource");
operation.get("recursive").set(true);
operation.get("include-runtime").set(true);
ModelNode address = operation.get("address");
address.add("core-service", "platform-mbean"); 
```

或者，您也可以使用 PlatformMBeanServer：

```
 //Get a connection to the JBoss AS MBean server on localhost
    String host = "localhost";
    int port = 9999;  // management-native port
    String urlString = "service:jmx:remoting-jmx://" + host + ":" + port;
    JMXServiceURL serviceURL = new JMXServiceURL(urlString);
    JMXConnector jmxConnector = JMXConnectorFactory.connect(serviceURL, null);
    MBeanServerConnection connection = jmxConnector.getMBeanServerConnection();

    //Invoke on the JBoss AS MBean server
    connection.getObjectInstance(new ObjectName("java.lang:type=Threading"));
    //...
    jmxConnector.close(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-18T06:51:21.190

你可以试试 Java Melody。它是一个非常好的监控 Java 应用程序的工具。在下面的链接中查看该工具

[https://code.google.com/p/javamelody/](https://code.google.com/p/javamelody/)

-Sushitha

# mysql - 加快插入查询mysql

> ID：13297974
> 
> 赞同：2
> 
> 时间：2012-11-08T21:18:28.027
> 
> 标签：mysql, optimization, insert

我想向已经包含 10000 行的现有表插入大约 10000 行新行。我需要获取查询的插入 ID，并在循环内的另一个函数中使用该 ID，如下面的代码所示。

```
foreach($values as $val){
  $sql = "INSERT INTO wp_posts (`post_author`, `post_date`, `post_content`, `post_title`, `post_excerpt`, `post_status`,`post_modified`,`post_type`)
  VALUES('".$val[author]."',NOW(),'".$val[content]."','".$val[title]."','".$val[excerpt]."','published',NOW(),'post')";
  $result = mysql_query($sql);
  $insertid = mysql_insert_id();
  add_post_meta($insertid, $val[metakey], $val[metaval], true );
} 
```

我正在从 CSV 文件中获取 $values 数组的值。截至目前，我每 3 分钟只能插入 20 个新行。有没有办法加快这种插入速度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-17T11:00:09.713

您可以尝试在 PDO 中使用准备好的语句，看看是否有帮助。

```
$sql =     "INSERT INTO wp_posts (`post_author`, `post_date`, `post_content`, `post_title`, `post_excerpt`, `post_status`,`post_modified`,`post_type`)
            VALUES(:author,NOW(),:content,:title,:excerpt,'published',NOW(),'post')";
$pdoStatement = $pdoConnexion->prepare($sql);

foreach($values as $val){
    $pdoStatement->bindValue(':author', $val['author'], PDO::PARAM_STR);
    $pdoStatement->bindValue(':content', $val['content'], PDO::PARAM_STR);
    $pdoStatement->bindValue(':title', $val['title'], PDO::PARAM_STR);
    $pdoStatement->bindValue(':excerpt', $val['excerpt'], PDO::PARAM_STR);
    $pdoStatement->execute();
    $insertid = $pdoConnexion->lastInsertId();
    add_post_meta($insertid, $val[metakey], $val[metaval], true );
} 
```

# c++ - OpenGL 背面剔除导致奇怪的结果

> ID：13297980
> 
> 赞同：3
> 
> 时间：2012-11-08T21:18:34.477
> 
> 标签：c++, opengl, sdl, culling

我正在尝试创建一个简单的单元格着色器效果，它涉及背面和正面剔除。但到目前为止，我的剔除结果相当奇怪。

设置 OpenGL 源代码：

```
// init matrices
glMatrixMode(GL_PROJECTION);
glLoadIdentity();
gluPerspective(45, 800 / 600, 0.01f, 150);
glMatrixMode(GL_MODELVIEW);
glLoadIdentity();
// enable opengl caps
glEnable(GL_NORMALIZE);
glEnable(GL_CULL_FACE);
// cell shading effects
glLineWidth(3.5f);
// setup display list
pDList = glGenLists(1);
glNewList(pDList, GL_COMPILE);
    glBegin(GL_QUADS);
        // front
        glNormal3f(0, 0, 1);
        glVertex3f(-0.25f, -0.5f, -3);
        glVertex3f(0.25f, -0.5f, -3);
        glVertex3f(0.25f, -1, -3);
        glVertex3f(-0.25f, -1, -3);
        // back
        glNormal3f(0, 0, -1);
        glVertex3f(-0.25f, -0.5f, -3.5f);
        glVertex3f(0.25f, -0.5f, -3.5f);
        glVertex3f(0.25f, -1, -3.5f);
        glVertex3f(-0.25f, -1, -3.5f);
        // top 
        glNormal3f(0, 1, 0);
        glVertex3f(-0.25f, -0.5f, -3.5f);
        glVertex3f(0.25f, -0.5f, -3.5f);
        glVertex3f(0.25f, -0.5f, -3);
        glVertex3f(-0.25f, -0.5f, -3);
        // bottom
        glNormal3f(0, -1, 0);
        glVertex3f(-0.25f, -1, -3.5f);
        glVertex3f(0.25f, -1, -3.5f);
        glVertex3f(0.25f, -1, -3);
        glVertex3f(-0.25f, -1, -3);
        // right
        glNormal3f(1, 0, 0);
        glVertex3f(0.25f, -0.5f, -3);
        glVertex3f(0.25f, -0.5f, -3.5f);
        glVertex3f(0.25f, -1, -3.5f);
        glVertex3f(0.25f, -1, -3);
        // left
        glNormal3f(-1, 0, 0);
        glVertex3f(-0.25f, -0.5f, -3);
        glVertex3f(-0.25f, -0.5f, -3.5f);
        glVertex3f(-0.25f, -1, -3.5f);
        glVertex3f(-0.25f, -1, -3);
    glEnd();
glEndList(); 
```

渲染源代码：

```
// clear
glClear(GL_COLOR_BUFFER_BIT);
glClearColor(0.75f, 0.75f, 0.75f, 1);
// reset matrix
glLoadIdentity();
// draw cube
glPolygonMode(GL_FRONT_AND_BACK, GL_LINE);
glCullFace(GL_BACK);
glColor3i(0, 0, 0);
glCallList(pDList); 
```

这就是我得到的：

![在此处输入图像描述](../Images/b188848cd61197a7c8d902c93a405974.png)

出于某种原因，它只绘制了立方体的右侧。诡异的。我改变了 glCullFace(GL_BACK); 到 glCullFace(GL_FRONT); 在我的渲染功能中。我懂了：

![在此处输入图像描述](../Images/1c1b4c0cd7ab81556f4ad7e5de1abf7f.png)

现在它正在绘制每一面？似乎认为立方体的右侧是背面和正面的，而立方体的其余部分是背面的。当我禁用剔除时，我也会得到与上图相同的结果。

我能想到的任何其他相关信息是我正在使用 SDL，并且我确信这不是显卡问题，因为我已经在两台不同的计算机上运行了它，每台都产生相同的结果。

我刚开始学习如何为基元设置法线，所以这很可能是一个很大的 n00b 错误，或者是一些愚蠢的错误。如果我每次犯下最轻率的明显错误并且一直坚持几个小时都能得到一分钱，我就会成为百万富翁。

所以，简而言之，我做错了什么，以及如何让正确的面以正确的方式剔除或不剔除？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T21:37:02.837

如果您从其负法线的向量查看每个三角形，您可以定义指定顶点的顺序（称为`winding`）：顺时针或逆时针。

您必须与它保持一致并在其中一个`CW`或`CCW`缠绕中指定所有顶点以使剔除正常工作。

# c - 在数组 C 中存储 n 个最小的数字

> ID：13297981
> 
> 赞同：1
> 
> 时间：2012-11-08T21:18:36.997
> 
> 标签：c, ansi

我的问题是一个函数，我需要从我拥有的数据文件中计算欧几里得距离，之后我需要得到欧几里得距离给出的 N 个最低数字。

我所做的是一个包含所有文件长度的数组，`1.000.000`但它给了我分段错误，顺便说一句，这很明显。所以我想的是获得 N 值，创建一个长度为 N 的数组，然后只存储它们中最低的 N，然后按新月顺序对它们进行排序，然后打印，但是我很难在欧几里得的值之间进行比较距离和存储在数组中的距离。

```
void calcDist(Nodo *L,int vpesq[],int n)
{
    int dist[n],ed;
    while(L!=NULL){
    x=0;
    for(i=0;i<12;i++)
            x=x+pow((vpesq[i]-L->caracter[i]),2);
            ed=sqrt(x);
 } 
```

但现在我需要将 ed 的 N 个最低值保存到 dist[n] 并且 N 是由用户给出的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T22:37:01.893

您可以像这样存储 N 个最低值

```
void store_lowest_N(int* array, int N, int new_value) {
    for (int i=0; i<N; i++) {
        if (new_value < array[i]) {
            for (j=N-1; j>i; j--) {
                array[j] = array[j-1]; // shift the larger values down to make space
            }
            array[i] = new_value;
            break;
        }
    }
}

void initialize_array(int* array, int N) {
    for (int i=0; i<N; i++) {
        array[i] = INT_MAX;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T21:34:15.637

如果 N 不是那么大，为什么不通过这个 N-Array 进行 FOR 循环来检查您的欧几里德距离是否小于 N-Array 的至少一个元素？如果您对此有疑问，那么这可能是由于您的数组未初始化造成的。这意味着您首先必须用大文件的前 N ​​个数字填充数组。如果您只制作这样的数组，就会发生这种情况：

```
int my_array[100]; 
```

如果您没有分配数组的所有 100 个值，则未分配的值将具有值 0（可能取决于编译器），并且可能会导致您的比较出现问题。这就是全部，如果我到目前为止理解你的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T22:22:20.607

如果要保存第 N 个最低的数字，则必须执行以下伪代码：

```
void calcDist(..)
{    ...
     int array_size = //;
     int number_add = -1;

     for(int i = 0; i < number_of_numbers_to_read; i++) 
     {
         x = //  calculate euclidean distance

         if(number_add < array_size) // Theres still space in the array
         {
             number_add++;                  // a new number in the array
         }
         // rearrange the array so it will be order again
         for(j = 0; j <= number_add; j++)
         { 
             if(array_lower[j] > x)    // This is the position to put the value
             { 
                aux = array_lower[j];  // if have to swap than
                array_lower[j] = x;
                x = aux;
             }
         }
     }
 } 
```

# asp.net - 如何确定为什么我在 azure 上的 asp.net webforms 应用程序需要这么长时间才能启动？

> ID：13297986
> 
> 赞同：1
> 
> 时间：2012-11-08T21:19:01.680
> 
> 标签：asp.net, performance, azure, webforms, azure-web-roles

我有一个托管在 Windows azure 上的 ASP.NET (webforms) 应用程序，位于 XS 大小的实例上。一切都运行良好，除了当我在一段时间不使用它后第一次导航到该网站时，它*真的很*慢——比如超过 45 秒！一旦它启动并运行，页面又好又快；这只是需要很长时间的初始负载。

**如何诊断这段时间花在哪里？**我已经在 SessionStart 事件中记录（到数据库），并且不同浏览器中的两个请求相隔 10 秒开始，都在同一秒内记录，这表明我添加的任何日志记录或其他代码在所有时间都用完之前不会执行。或者数据库连接可能需要很长时间。

我意识到有一些事情可能会影响这一点，例如

*   它在 XS 实例上。他们不大。

*   我的代码目前是在调试模式下构建的。这使得需要加载更大的程序集和 pdb 文件，所以它比它可能的慢。

*   网站只需要一点时间来加载。这就是人们[更改 idleTimeout](https://stackoverflow.com/questions/2479241/does-windows-azure-support-the-application-warm-up-module-or-something-similar/7866140)和可能的回收间隔的原因。

*   我正在使用相当大的 Telerik 控件，其中包含 32mb 的 dll。（但第一页上没有使用）。

但我想要一种可以用来确定一直在占用什么的方法，例如，对正在发生的事情进行一些测量以及它占用了多长时间，或者我可以做更多的事情来尝试让它更快地启动。

在我的带有本地数据库和网络的开发机器上，启动时间可能是 5 秒。*可能*它只比 XS 实例快 10 倍，但如果是这种情况，我该如何计算出我的本地机器上花费的时间，以便我可以尝试改进它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T21:29:40.900

那么您的 XS 实例没有专用 CPU 和低 I/O 性能。就像您已经注意到的那样，这可能会影响您的应用程序池的启动速度。您正在加载 Telerik 程序集 (32mb) 的事实会产生一些影响，这不是您可以轻易更改的。

您可以采取以下措施来改善启动时间：

1.  使用发布构建配置。这意味着您将拥有更小并且可能包含更少代码的优化程序集（取决于预处理器指令）。
2.  使用 IIS8 中包含的[应用程序初始化模块](http://fabriccontroller.net/blog/posts/iis-8-0-application-initialization-module-in-a-windows-azure-web-role/)（您需要将 osFamily 更改为 3）。IIS 将确保应用程序立即启动，并将模拟对您的应用程序的请求，以便直接启动它。大多数情况下，这意味着您的用户不会受到初始加载的影响。万一他们在启动时访问了站点，应用程序初始化模块允许您在启动应用程序池时显示加载页面。

# php - php preg_match中的方括号

> ID：13297987
> 
> 赞同：0
> 
> 时间：2012-11-08T21:19:05.240
> 
> 标签：php, regex, preg-match

我想在表格中只能输入字母、数字和方括号中的字母，特殊字符除外。括号中是否包含特殊字符？我有这样的：

```
if (preg_match("/[^a-zA-Z0-9]+/", $characters))
{
    echo "Write only letters of alphabet and numbers!";
} 
```

它正确检测字母和数字，不传递特殊字符，但我也可以输入方括号怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T21:22:10.850

正如adeno所说，

```
if (preg_match('/[^a-zA-Z0-9\[\]]+/', $characters))
{
    echo "Letters, numbers and square brackets only!";
} 
```

# php - Zend 框架中的 $this->_getParam 和 empty()

> ID：13297989
> 
> 赞同：0
> 
> 时间：2012-11-08T21:19:13.983
> 
> 标签：php, zend-framework

所以我正在提交一个表单，我正在尝试检查一个字段是否为空，我这样做：

```
if(empty($this->_getParam('my_field'))) 
```

而且它不起作用，但是如果我只使用它就可以了`$_POST['my_field]`

`<b>Fatal error</b>: Can't use method return value in write context in....`

`$this->_getParam`为了工作，我应该怎么做？因为我猜这不是`$_POST`在框架上使用的好选择。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T21:24:25.117

这是你的问题：***Can't use method return value in write context***

这是一个很好的解释为什么必须这样做：[Can't use method return value in write context](https://stackoverflow.com/questions/1075534/cant-use-method-return-value-in-write-context/4328049#4328049)

要使用 empty() 您必须首先获取返回值

```
$field = $this->_getParam('my_field');
if(empty($field)){
  //is empty
} 
```

（更新：这不是 PHP 版本 >= 5.5 的问题） empty($this->_getParam('my_field')) 可以正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T21:29:54.497

其他答案都是正确的。一种替代方法是为您的调用提供默认值`_getParam()`，例如`null`. 然后你可以打电话

```
is_null($this->_getParam('myfield',null)) 
```

这种方法可能更可取，因为 Zend 已经确定了该参数的空性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T21:25:10.763

[`empty`](http://php.net/empty)-like `isset`- 不是真正的功能，而是一种语言结构。所以你只能使用变量作为它的唯一*参数*（没有表达式，没有函数结果）。

但是，您可以使用临时变量：

```
$my_field = $this->_getParam('my_field');
if(empty($my_field))
.... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T22:24:07.120

您可以使用临时变量

```
$field = $this->_getParam('my_field');

if(empty($field)){
  //you code here
} 
```

# java - 在 BOOT_COMPLETED 之前启动 Activity/Service

> ID：13297994
> 
> 赞同：2
> 
> 时间：2012-11-08T21:19:17.900
> 
> 标签：java, android, android-activity, android-service

我正在编写一个带有一些附加功能的远程锁屏。我面临的唯一问题是，如果我在速度较慢的手机上在 BOOT_COMPLETED 上注册广播接收器，则需要大约 10 秒才能启动活动/服务。即使具有最高的优先级。所以我的问题是：

*   除了在 BOOT_COMPLETED 上注册以在重新启动后启动应用程序之外，还有其他方法吗？

我想到了一种在标准锁屏上绑定活动/服务的方法，但这甚至可能吗？

# r - 在ggplot2中更改轴文本的字体大小和方向

> ID：13297995
> 
> 赞同：240
> 
> 时间：2012-11-08T21:19:27.937
> 
> 标签：r, ggplot2

我正在绘制一个图表，其中 x 轴上有一个分类变量，y 轴上有一个数值变量。

对于 x 轴，鉴于有许多数据点，默认文本格式会导致每个刻度线的标签与其他标签重叠。如何 (a) 更改轴文本的字体大小和 (b) 更改文本的方向以使文本垂直于轴？

* * *

## 回答 #1

> 赞同：352
> 
> 时间：2012-11-08T21:30:24.600

使用`theme()`：

```
d <- data.frame(x=gl(10, 1, 10, labels=paste("long text label ", letters[1:10])), y=rnorm(10))
ggplot(d, aes(x=x, y=y)) + geom_point() +
    theme(text = element_text(size=20),
        axis.text.x = element_text(angle=90, hjust=1)) 
#vjust adjust the vertical justification of the labels, which is often useful 
```

![在此处输入图像描述](../Images/6537ead94d8e8710b7504e797257ed38.png)

[这里](http://www.cookbook-r.com/Graphs/)有很多关于如何格式化 ggplots 的好信息。你可以看到一个完整的参数列表，你可以使用`?theme`.

* * *

## 回答 #2

> 赞同：88
> 
> 时间：2012-11-08T21:58:57.933

同上@Drew Steen 关于使用`theme()`. 以下是轴文本和标题的常见主题属性。

```
ggplot(mtcars, aes(x = factor(cyl), y = mpg))+
  geom_point()+
  theme(axis.text.x = element_text(color = "grey20", size = 20, angle = 90, hjust = .5, vjust = .5, face = "plain"),
        axis.text.y = element_text(color = "grey20", size = 12, angle = 0, hjust = 1, vjust = 0, face = "plain"),  
        axis.title.x = element_text(color = "grey20", size = 12, angle = 0, hjust = .5, vjust = 0, face = "plain"),
        axis.title.y = element_text(color = "grey20", size = 12, angle = 90, hjust = .5, vjust = .5, face = "plain")) 
```

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2017-11-06T20:03:16.420

添加到以前的解决方案中，您还可以使用该函数指定*相*对于`base_size`主题中包含的字体大小，例如`theme_bw()`（其中`base_size`为 11）`rel()`。

例如：

```
ggplot(mtcars, aes(disp, mpg)) +
  geom_point() +
  theme_bw() +
  theme(axis.text.x=element_text(size=rel(0.5), angle=90)) 
```

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2014-09-21T00:13:48.107

使用主题（）：

```
d <- data.frame(x=gl(10, 1, 10, labels=paste("long text label ", letters[1:10])), y=rnorm(10))
ggplot(d, aes(x=x, y=y)) + geom_point() +
theme(text = element_text(size=20)) 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2019-03-01T21:21:18.337

当制作许多绘图时，全局设置它是有意义的（相关部分是第二行，三行一起是一个工作示例）：

```
 library('ggplot2')
   theme_update(text = element_text(size=20))
   ggplot(mpg, aes(displ, hwy, colour = class)) + geom_point() 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2020-05-18T14:07:49.140

另一种处理重叠标签的方法是使用`guide = guide_axis(n.dodge = 2)`.

```
library(dplyr)
library(tibble)
library(ggplot2)

dt <- mtcars %>% rownames_to_column("name") %>% 
  dplyr::filter(cyl == 4)

# Overlapping labels
ggplot(dt, aes(x = name, y = mpg)) + geom_point() 
```

[![在此处输入图像描述](../Images/dc32009a81a5fd573f690369c62b4897.png)](https://i.stack.imgur.com/NGgZN.png)

```
ggplot(dt, aes(x = name, y = mpg)) + geom_point() +
  scale_x_discrete(guide = guide_axis(n.dodge = 2)) 
```

[![在此处输入图像描述](../Images/e8e7057c83d7e158c38582befeb3ff09.png)](https://i.stack.imgur.com/XeWEr.png)

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2013-09-05T06:20:43.083

在这种情况下，使用“填充”属性会有所帮助。您可以使用从轴上删除文本`element_blank()`并显示带有图例的多色条形图。我正在绘制维修店的零件拆卸频率，如下所示

```
ggplot(data=df_subset,aes(x=Part,y=Removal_Frequency,fill=Part))+geom_bar(stat="identity")+theme(axis.text.x  = element_blank()) 
```

在我的情况下，我选择了这个解决方案，因为我在条形图中有很多条，我找不到合适的字体大小，它既可读又小到不会相互重叠。