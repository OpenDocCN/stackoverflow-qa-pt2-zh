# StackOverflow 问答 13373000-13373999

# c# - 在地铁中，获取（抽象）类的所有继承类？

> ID：13373000
> 
> 赞同：1
> 
> 时间：2012-11-14T04:22:43.600
> 
> 标签：c#, microsoft-metro, windows-runtime

试图在 Metro 中获取所有继承的类时，我被卡住了。WinRT API 与 .net 框架不同，因此两种解决方案（[解决方案](https://stackoverflow.com/a/6944605/1613961)1和[解决方案](https://stackoverflow.com/a/1665127/1613961)2 ）都不起作用。

任何代码或工具解决方案都值得赞赏。

我还在努力。如果成功，我会将我的解决方案放在这里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T06:01:45.773

这应该有效（基于[此处](https://stackoverflow.com/a/6944605/197913)的代码）：

```
public IEnumerable<T> GetEnumerableOfType<T>(params object[] constructorArgs) where T : class, IComparable<T>
{
    List<T> objects = new List<T>();
    foreach (Type type in typeof(T).GetTypeInfo().Assembly.ExportedTypes
                                   .Where(myType => myType.GetTypeInfo().IsClass && 
                                                    !myType.GetTypeInfo().IsAbstract && 
                                                    myType.GetTypeInfo().IsSubclassOf(typeof(T))))
    {
        objects.Add((T)Activator.CreateInstance(type, constructorArgs));
    }
    objects.Sort();
    return objects;
} 
```

基本上现在是进行任何反射操作的主要类，`TypeInfo`您可以通过调用`GetTypeInfo()`.`Type`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T08:44:54.373

谢谢达米尔·阿。您的解决方案很棒，尽管它只需要很少的修改。

我观察到的一件事是您的静态方法不能放入 MainPage 类，否则会发生编译错误。可能是因为初始化 xaml 与之冲突。

另一方面，我将原始代码更改为更简单且有用的代码，运行时错误更少（`objects.Add((T)Activator.CreateInstance(type, constructorArgs));`在许多情况下，行中的行经常导致运行时错误。）。毕竟主要目的只是为了获取所有继承的类。

```
 // GetTypeInfo() returns TypeInfo which comes from the namespace
    using System.Reflection;

    public List<Type> GetEnumerableOfType<T>(params object[] constructorArgs) where T : class
    {
        List<Type> objects = new List<Type>();

        IEnumerable<Type> s = typeof(T).GetTypeInfo().Assembly.ExportedTypes.Where(myType => myType.GetTypeInfo().IsClass &&
                                                         !myType.GetTypeInfo().IsAbstract &&
                                                         myType.GetTypeInfo().IsSubclassOf(typeof(T)));

        foreach (Type type in s)
            objects.Add(type);

        return objects;
    } 
```

下面是一个测试样本。

```
 var list = GetEnumerableOfType<UIElement>();

     foreach (var v in list)
         Debug.WriteLine(v.Name); 
```

# image - 基于用户在服务器端（如 Rails）提交的文本生成图像的最佳方法是什么

> ID：13373002
> 
> 赞同：2
> 
> 时间：2012-11-14T04:22:49.163
> 
> 标签：image, imagemagick

伙计们，

我看到 ImageMagick 能够使用 Pango 格式的文本生成图像，这看起来是一个很好的方法。

只是想知道那里是否还有其他东西，最推荐的方法是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T05:04:26.543

`imagemagick`可能是最简单的，但`ghostscript`也可以用来渲染带有文本的图像。

这是一个显示一些文本的小后记程序。

```
%!
5 5 moveto
/Palatino-Roman 20 selectfont
(Some Text) show
showpage 
```

Using`ps2eps`将计算 Bounding-Box 并将此信息添加为符合*Document Structuring Conventions*的注释。

```
%!PS-Adobe-2.0 EPSF-2.0
%%BoundingBox: 5 5 97 20
%%HiResBoundingBox: 5.500000 5.000000 97.000000 19.500000
%%EndComments
% EPSF created by ps2eps 1.64
%%BeginProlog
save
countdictstack
mark
newpath
/showpage {} def
/setpagedevice {pop} def
%%EndProlog
%%Page 1 1
5 5 moveto
/Palatino-Roman 20 selectfont
(Some Text) show
showpage
%%Trailer
cleartomark
countdictstack
exch sub { end } repeat
restore
%%EOF 
```

然后 imagemagick 的`convert`实用程序可以将其渲染为图像。

![一些文本的示例图像](../Images/377d67c462b472e626a3470885c15e25.png)

这`ps2eps`是必要的，因此最终图像被裁剪到有趣的部分，而不是页面大小图像的底部。

这是整个序列的打字稿。`0>`是命令提示符。

```
0> cat > t.ps
%!
5 5 moveto
/Palatino-Roman 20 selectfont
(Some Text) show
showpage
0> ps2eps t.ps
Input files: t.ps
Processing: t.ps
Calculating Bounding Box...ready. %%BoundingBox: 5 5 97 20
Creating output file t.eps...** Warning **: Weird heading line -- %! -- ready.
0> convert t.eps t.png 
```

# .htaccess - 如何将 htaccess 文件写入通配符文件夹到子域

> ID：13373006
> 
> 赞同：1
> 
> 时间：2012-11-14T04:23:17.240
> 
> 标签：.htaccess, redirect, subdomain, directory, wildcard

我正在尝试将我的所有文件夹（使用通配符）重定向到它们的子域。例如：

> www.mywebsite.com/folder1 到 folder1.mywebsite.com/
> www.mywebsite.com/folder2 到 folder2.mywebsite.com/
> www.mywebsite.com/folder3 到 folder3.mywebsite.com/

现在无需为每个人编写规则，有没有办法将它们全部重定向到各自的子域？

我试过了：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} !^www\.mywebsite\.com$
RewriteCond %{HTTP_HOST} ^(\w+)\.mywebsite\.com$
RewriteRule ^(.*)$ /%1/$1 [QSA] 
```

但它给了我一个内部错误 500

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T05:49:57.533

您需要防止规则循环，使用条件首先检查是否`/%1/$1`实际存在，**或者**URI 尚未以`%1`

所以：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} !^www\.mywebsite\.com$
RewriteCond %{HTTP_HOST} ^(\w+)\.mywebsite\.com$
RewriteCond %{DOCUMENT_ROOT}/%1%{REQUEST_URI} -f [OR]
RewriteCond %{DOCUMENT_ROOT}/%1%{REQUEST_URI} -d
RewriteRule ^(.*)$ /%1/$1 [QSA] 
```

或者：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} !^www\.mywebsite\.com$
RewriteCond %{HTTP_HOST} ^(\w+)\.mywebsite\.com$
RewriteCond %{REQUEST_URI}:%1 !^/([^/]+)/([^:]*):\1
RewriteRule ^(.*)$ /%1/$1 [QSA] 
```

该`!^/([^/]+)/([^:]*):\1`表达式对 URI 中的第一个文件夹进行分组，并使用`\1`. 如果它们相等，则 URI 中的第一个文件夹`%1`是反向引用到上一个 match 的`(\w+)`。

# python - 从 .txt 文件导入函数

> ID：13373014
> 
> 赞同：0
> 
> 时间：2012-11-14T04:24:50.647
> 
> 标签：python

有没有办法做到这一点？

基本上我有一个文件，我希望用户能够通过我构建的 GUI 进行编辑（所有这些我都可以轻松完成）。其中一部分是函数中的计算。那或者能够从另一个文件编辑 .py 文件也很好，但是很难找到任何关于它的内容，因为每次搜索都会返回有关 IDLE 等的详细信息。

我也没有问题，只在文本文件中进行计算并能够从文本文件中读取它然后解析它以添加变量，但我什至不知道如何轻松地做到这一点，计算会有所不同像这样：

(abs(x) - abs(y) * dict['t']) * 18

((abs(y) * dict['t']) - abs(x)) * 20

等大约 10 种不同的变化

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T04:34:07.910

是的，它一点也不安全，但是`eval`要走的路：

```
 In [1]: a= 10
In [2]: b= 20
In [3]: eval('a + 10*b')
Out[3]: 210 
```

# javascript - javascript window.open 不起作用

> ID：13373016
> 
> 赞同：5
> 
> 时间：2012-11-14T04:25:05.447
> 
> 标签：javascript

我想用`window.open`一个窗口打开我的 JSP 文件之一。但是浏览器一直显示`connecting..`。每次我单击文本时，甚至萤火虫都会停止工作。`p`和`input`标签都不起作用，但是当我使用 a`href`链接 JSP 时，它可以链接到文件：

```
<!DOCTYPE html>
<html>
<head><title>Sample JSP Page</title>
<script>
function open(){
    //window.open("hello.jsp","hello","height=700, width=800");
    var x=window.open("hello.jsp","window","status=1,height=700, width=800");
    x.focus();
}
</script>
</head>
<body>
<h1>Sample JSP Page</h1>
<p onclick="open()">do not work</p>
<form>
<input type="button" value="new window" onclick="window.open('test-with-utils')"></form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-14T04:45:02.120

那是因为你在`window.open`定义函数 open 时已经重新定义了。请改用其他函数名称。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-14T04:45:08.297

更改函数的名称。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-14T05:30:00.107

The window object is the top level object in JavaScript, and contains in itself several other objects, such as "document", "history" etc.

When you define a variable or a function of your own you really add a new property to the window object. And this will work ( and a little live [example](http://jsfiddle.net/LRjvQ/) ):

```
var foo = "bar";
alert ( window.foo ); // says "bar" 
```

In addition if you add this little snippet to your code:

```
window.onerror = function ( msg, url, num ) {
   alert ( "Error: " + msg + "\nURL: " + url + "\nLine: " + num );
   return true;
}; 
```

you will get this error, when press the button:

```
Error: Uncaught RangeError: Maximum call stack size exceeded 
```

This means an endless recursion. It is a side effect - you define a new open function, and when you call `window.open()`, you recursively call your function.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-14T05:47:31.863

只是为了扩展您在这里遇到问题的原因，您可能需要阅读一些关于 javascript Scope 的内容（[非常有用的博客](http://blog.niftysnippets.org/2008/02/closures-are-not-complicated.html)）。本质上，考虑以下代码：

```
<script>
var thisOne=true;
function thatOne() {
alert("whizbang");
}
var theOther={foo:"bar"};

//More code here...
</script> 
```

到达评论后，您就知道可以直接访问这些变量和函数，`if (thisOne) {...}`例如`element.onclick=thatOne;`或`console.log(theOther.foo)`。但是，您也可以将它们作为根对象的子对象访问，在 Web 浏览器中称为`window`. 所以你可以这样做：

```
console.log(window["thisOne"]);
window.thatOne.call(obj, params);
console.log(window.foo.bar); 
```

因此，通过将 open() 定义为不在另一个元素内（也就是说，在根元素内）的函数，您将覆盖 window.open() 函数。当您稍后尝试调用该函数时，您会遇到问题，因为 open 函数调用 window.open，后者调用 window.open，后者调用 window.open...

有几种方法可以解决这个问题 -

**内联定义 onclick 处理程序**

为此，请删除整个`<script>..</script>`元素，然后使用您选择的任何元素（支持它）添加 onclick 属性：

```
onclick="window.open('hello.jsp','window','status=1,height=700, width=800');" 
```

这是一个不错且快速的方法，它通过触发元素保留了所有逻辑，但它不易扩展，您可能会发现自己被某些人嘲笑。（“哦，你使用*内联*javascript？多么古怪”）

**更改方法名称**

这将花费您最少的精力来让您的页面现在从您拥有的东西开始工作（这也基本上是其他人所建议的）。只需将 open 方法的名称更改为 openANewWindow() 或 gotoJSP() 或根对象中尚不存在的任何名称，确保同时获取定义它的位置（在脚本元素中）和使用位置它（在 onclick 属性中）。

**使用闭包**

在这种情况下，这几乎绝对不是您想要的，它比单个功能所需的复杂性更高。仅将其作为如何摆脱根对象的示例，将其视为问题的核心。

您可能已经在 javascript 中看到了如何定义对象，但您可能不知道通过定义对象，您实际上所做的只是将对象属性添加到根对象。您可以利用此行为为您的函数提供层次结构。

例如：

```
<script>
var MyFunctions = (function() {
    function open(){
    var x=window.open("hello.jsp","window","status=1,height=700, width=800");
    x.focus();
    }
    return {open:open};
})();
</script> 
```

这将创建一个立即运行的匿名函数。在此函数的范围内，定义了另一个函数 open()，但它是在该匿名函数的范围内定义的，而不是根对象（窗口）。定义 open() 后，对它的引用作为对象属性的值返回：open。

这一切的结果是 MyFunctions 对象的 open 属性就是你需要的函数。然后，您可以使用 MyFunctions.open() 甚至 window.MyFunctions.open() 调用它。

# java - Java / 数据库查询：检索多个项目

> ID：13373017
> 
> 赞同：0
> 
> 时间：2012-11-14T04:25:29.193
> 
> 标签：java, jsp, jdbc, java-me, javabeans

我有检索数据库项目的代码，它显示在使用 J2ME 的移动应用程序中。我也为此使用 JSP，以便我的移动应用程序可以从中获取信息。

我想知道如何检索多个项目？

JavaBean：

```
public String doQuery() throws ClassNotFoundException, SQLException {
     //register driver
    DriverManager.registerDriver(new com.mysql.jdbc.Driver());

     //establish connection
    Conn = DriverManager.getConnection ("jdbc:mysql://localhost:3306/a1electric?user=root&password=raam030");

     //Create a Statement object from the Connection
    Statement stmt = Conn.createStatement();

    String sql = "SELECT JobID FROM employee WHERE employeeID=" +this.jobID;
    ResultSet rs = stmt.executeQuery(sql);
    String rt = "";
    rs.next();
    rt =  rs.getString("JobID");
    Conn.close();
    return rt;
   } 
```

JSP 页面：

```
 <jsp:useBean id="bean0" scope="session" class="data.queryBean"/>
<jsp:setProperty name="bean0" property="jobID" param="jobID"/>
<%= bean0.doQuery() %> 
```

我想检索此员工 ID 的所有工作 ID 并显示它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T04:33:14.590

如果给定的 EmployeeID 有多个 JobID，那么您的结果集包含所有这些项目，您应该浏览结果集：

```
String sql = "SELECT JobID FROM employee WHERE employeeID=" +this.jobID;
ResultSet rs = stmt.executeQuery(sql);
List<String> jobIds = new ArrayList<String>();
while (rs.next()) {
    jobIds.add(rs.getString("JobID"));
} 
```

在相关说明中，您应该

1.  尝试使用连接池（apache DBCP），而不是每次都注册驱动程序并连接到数据库。
2.  使用 PreparedStatement 避免潜在的 SQL 注入攻击：

    ```
    PreparedStatement stmt = con.prepareStatement(
        "SELECT JobID FROM employee WHERE employeeID= ?");
    stmt.setInt(1, this.jobID);
    ResultSet rs = stmt.executeQuery(); 
    ```

# max - 在 HiveQL 中将变量设置为最大值

> ID：13373018
> 
> 赞同：2
> 
> 时间：2012-11-14T04:25:30.157
> 
> 标签：max, hiveql

我想从表 totalSpeeds 中的数据列（速度）中获取第一个四分位数的值。

为此，我尝试创建一个变量（阈值），然后选择小于或等于它的值。

```
SET threshold = (SELECT 0.25*MAX(speed) FROM totalSpeeds);
SELECT speed FROM totalSpeeds WHERE speed <= ${hiveconf:threshold}; 
```

这失败并返回了解析错误。有没有更有效的方法来获得前四分位数速度的上限？或者有没有办法调整上述命令以返回第一四分位数的速度？

提前致谢，

安妮塔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-08T05:44:27.710

hive 中有一个内置的 UDF 用于计算百分位数。利用

> 从 totalSpeeds 中选择百分比（速度，.25）；

UDF的解释：

返回组中列的确切 pth 百分位数。p 必须介于 0 和 1 之间

同样，我们也可以使用 percentile(speed, array(p1, p2)) 提取多个百分位数

# objective-c - 无法在实例上调用方法

> ID：13373019
> 
> 赞同：0
> 
> 时间：2012-11-14T04:25:35.287
> 
> 标签：objective-c, animation, methods, call, instance

在处理一个项目时，我创建了一个类，我在另一个类中实例化（没什么特别的），但是如果我尝试为这个实例调用一个方法，我会得到：

> 由于未捕获的异常'NSInvalidArgumentException'而终止应用程序，原因：'-[CALayer animate]：无法识别的选择器发送到实例

这是类 .h ：

```
#import <QuartzCore/QuartzCore.h>

@interface SFStripe : CALayer {

        NSTimer *animation;

}

- (id)initWithXPosition:(NSInteger)positionX yPosition:(NSInteger)positionY;
- (id)initEndedWithXPosition:(NSInteger)positionX yPosition:(NSInteger)positionY;
- (void)animate;
- (void)reduceSize;
- (void)logSomething;

@property NSTimer *animation;

@end 
```

这里是 .m ：

```
#import "SFStripe.h"

@implementation SFStripe

@synthesize animation;

- (id)initWithXPosition:(NSInteger)positionX yPosition:(NSInteger)positionY {

    self = [CALayer layer];
    self.backgroundColor = [UIColor blackColor].CGColor;
    self.frame = CGRectMake(positionX, positionY, 5, 20);
    self.cornerRadius = 5;

    return self;
}

- (id)initEndedWithXPosition:(NSInteger)positionX yPosition:(NSInteger)positionY {

    self = [CALayer layer];
    self.backgroundColor = [UIColor grayColor].CGColor;
    self.frame = CGRectMake(positionX, (positionY + 7.5), 5, 5);
    self.cornerRadius = 2;
    self.delegate = self;
    return self;
}

- (void) logSomething {
    NSLog(@"It did work!");
}

- (void)reduceSize {

    if (self.frame.size.width > 0 && self.frame.size.height >= 5) {
        self.frame = CGRectMake(self.frame.origin.x, (self.frame.origin.y - 0.5), self.frame.size.width, (self.frame.size.height - 0.5));
        [self setNeedsDisplay];
        NSLog(@"Width: %d", (int)self.frame.size.width);
        NSLog(@"Height: %d", (int)self.frame.size.height);
    } else {
        self.backgroundColor = [UIColor grayColor].CGColor;
        self.frame = CGRectMake(self.frame.origin.x, (self.frame.origin.y + 7.5), 5, 5);
        [animation invalidate];
    }

}

- (void)animate {

    animation = [NSTimer scheduledTimerWithTimeInterval:0.03 target:self selector:@selector(reduceSize) userInfo:nil repeats:YES];
}

@end 
```

我将这个类导入一个新项目只是为了看看它是否在那里工作但得到同样的错误。这是我为类的实例调用其中一种方法的方式（所有方法都出现相同的错误）

在 mainview.h （干净的项目）：

```
#import <UIKit/UIKit.h>
#import "SFStripe.h"
#import <QuartzCore/QuartzCore.h>

@interface STViewController : UIViewController {
    SFStripe *stripe;
}
- (IBAction)animate:(id)sender;

@end 
```

我创建了实例并在 .mi 中让操作调用实例的方法：

```
#import <QuartzCore/QuartzCore.h>
#import "STViewController.h"
#import "SFStripe.h"

@interface STViewController ()

@end

@implementation STViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    stripe = [[SFStripe alloc] initWithXPosition:30 yPosition:30];
    [self.view.layer addSublayer:stripe];

}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.

}

- (IBAction)animate:(id)sender {

    [stripe animate];

}
@end 
```

对不起所有的代码，但我找不到这个问题的答案，希望有人能帮助我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T04:34:55.670

这不是编写初始化程序的正确方法：

```
- (id)initWithXPosition:(NSInteger)positionX yPosition:(NSInteger)positionY 
{
    self = [CALayer layer];
    ... 
```

您分配`self`为一个普通的旧 CALayer 实例，而不是您的子类的实例。

改为使用`self = [super init]`，然后检查它`self`不为零。

# lotus-notes - 我们可以在 Lotus Notes 中合并两个 .NSF 文件吗

> ID：13373025
> 
> 赞同：2
> 
> 时间：2012-11-14T04:26:19.560
> 
> 标签：lotus-notes, lotus-domino, lotusscript

我从**mail85.ntf**制作了自己的 .NSF 文件，并在这个新的 nsf 文件中添加了自己的东西。它实际上是在按下操作按钮（位于 'send' 附近）时调用 java 代理。现在我的问题是：

1.  如何将此 NSF 文件与现有的 mail.nsf 文件合并。这样我就可以使用我的 NSF 文件的功能以及 NSF 文件的现有功能。莲花笔记有可能吗？

我的目标是将我自己的 NSF 文件与现有的 NSF 文件集成，而不会丢失当前和新功能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T04:34:26.630

如果您的“自己的东西”涉及设计更改，那么您给您的数据库一个模板名称并使用 DESIGN-REFRESH（而不是 DESIGN-REPLACE）从您的数据库中刷新另一个数据库。然后，设计更改将在两个数据库中。

如果您的“自己的东西”与文档有关，那么您可以使用复制/粘贴将您想要的东西从一个数据库移动到另一个数据库。如果它们很多，那么 LotusScript NotesDatabase.AllDocument.CopyToDatabase(tragetDB) 将使用较少的手动操作来移动它们。

/新人

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T15:17:30.150

如果你想更新你的邮件版本但保留你的**新**东西：

*   为每个设计（您的邮件版本）指明“禁止设计刷新或替换修改”

这将允许您在不丢失更改的情况下刷新设计。
请注意，如果元素不是新元素而是修改过的标记禁止设计...也将不允许刷新但您必须合并**此**元素中的更改，如果将来模板更改**此**元素。

注意，如果您需要在许多数据库上执行此操作（我的意思是许多数据库具有您所做的相同更改）我建议将新/更改的元素复制到空白数据库中。该数据库必须是新的主模板。然后复制这个新数据库的所有元素。在目标邮件中粘贴时，Designer 会询问“您是否希望这些（代理/表单...）在...时自动更新。”只需回答“是”，粘贴的元素将被标记为继承自您的新模板。

希望很清楚

# php - 自动生成值 PHP

> ID：13373029
> 
> 赞同：0
> 
> 时间：2012-11-14T04:26:49.213
> 
> 标签：php

我正在尝试生成一个值，而不是像自动密钥那样在数据库端生成一个值，而是在前端或客户端生成一个值。你有什么聪明的主意吗？因为 Booking ref 不是我的主键，所以不能自动生成。我想要做的是有一个 10307 的初始值，然后在用户/s 创建/s 新记录时增加它。

但到目前为止我尝试过的是在 PHP 中：

```
private function inputBookingRef() {
    $value = $this->bookingRef;
    $html = "";
    $value = 10307;
    $value++;
    $html .= '<label for="ref">Booking Ref: </label>';
    $html .= HTML::inputText("ref", 20, $value) . PHP_EOL;
    return $html;
} 
```

**注意：** 我的初始值为 10307，然后我使用增量运算符将其设为 10308。但每次创建另一条记录时，它只会给出 10308。我认为必须有一些巧妙的方法使其递增。

欢迎任何帮助。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T04:33:21.283

如果您要查找的只是一个唯一的数字，只需使用 PHP 的`time`函数并使用自纪元以来的当前秒数。

```
$unique_num = time(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T04:37:00.003

如果您需要使用 php 的唯一 id 而没有工作中的数据库，请使用[uniquid](http://php.net/manual/en/function.uniqid.php)

但我还是不明白你想在这里完成什么

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T06:31:36.653

由于您将值保存在 db 中，您只需从数据库中获取值并将该值传递给您的函数，因此每次它都会增加您以前的值。

```
$query = mysql_query("SELECT MAX(ref_id) FROM table ORDER BY id DESC LIMIT 1");//Getting the max ref_id
$values = mysql_fetch_assoc($query);
inputBookingRef($values['ref_id'])//calling the function

private function inputBookingRef($value) {
    //$value = $this->bookingRef;
    $html = "";
    //$value = 10307;
    $value++;
    $html .= '<label for="ref">Booking Ref: </label>';
    $html .= HTML::inputText("ref", 20, $value) . PHP_EOL;
    return $html;
} 
```

最后将新的 $value 插入 Db

# java - Java：添加值时使用数组和 ++ 运算符

> ID：13373033
> 
> 赞同：3
> 
> 时间：2012-11-14T04:27:26.330
> 
> 标签：java, arrays, operators

`++`当添加到这样的普通整数数组中时，运算符究竟是如何工作的`myArray[range]++;`

如果我有选择的值（范围）被迭代`1,2,3,3,3,4,4`添加，它会添加 '1' 一次 2、一次、3 次和 4 两次吗？它只是将它添加到数组的末尾吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T04:29:56.110

`myArray[range]++;`将增加 index 处的值`range`。如果要增加所有值，请执行 -

```
 for (int i = 0; i < MyArray.Length; i++)
      MyArray[i]++; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T04:28:56.233

int myArray[范围]++; 将增加 1 到位置范围内的元素。

要增加数组中的所有元素，您只需执行以下操作：

```
for(i = 0; i < myArray.length; i++)
    myArray[i]++; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-14T04:28:46.430

> 我的数组[范围]++

这只会增加数组中索引`range`处的值。`int``myArray`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-14T04:31:57.143

`myArray[range]++`将像提到的其他 ppl 一样在索引处添加值。在您的示例中，您将获得：

`2,3,4,4,4,5,5`

如果您用作`range`“迭代器”

# php - .get() 回调接受多个参数

> ID：13373036
> 
> 赞同：0
> 
> 时间：2012-11-14T04:28:05.247
> 
> 标签：php, javascript, jquery, html

我正在建立一个漫画/艺术品网站，可以让您搜索材料。该网站将有两个子网站，漫画和艺术品。当用户选择一个子站点时，它只会显示那些图像（漫画或艺术品）。当他们搜索时，我还想传入一个“子站点”参数，该参数将返回漫画或艺术品。

因此，对于我的搜索功能，我想将多个参数传递给搜索功能——（搜索字符串、子站点）。

我有以下搜索框：（如何将子站点传递给 html 搜索？）

```
$subsite = (isset($_GET['subsite']) ? ($_GET['subsite']) : null);
<span class="search"><input type="text" onkeyup="search(this.value)" name="input" value="" /></span> 
```

该输入被传递给这个 JQuery：

```
function search() {     
$.get("./scripts/search.php", {"_input" : $('input[name=input]').val(), "_subsite" : $('input[name=subsite]').val()},
    function(returned_data) {
                $("#output").html(returned_data);
    }
);
} 
```

PHP：搜索.php

```
$input = (isset($_GET['_input']) ? ($_GET['_input']) : 0); 

$subsite = (isset($_GET['_subsite']) ? ($_GET['_subsite']) : null);
echo "SEARCH SITE = " . $subsite;
//This echos out nothing... it should be the subsite, either "artwork" or "comics" 
```

我正在尝试让我的漫画网站上线，但我无法让它工作。有什么建议么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T04:50:01.880

```
<span class="search">
    <input type="text" onkeyup="search(this.value)" name="input" value="" />
    <input id="subsite" type="hidden" value="<?php echo $subsite; ?>">
</span> 
```

.

```
function search(value) {
    var subsite = $("#subsite").val();  
    $.get("./scripts/search.php", { _input : value, _subsite : subsite },
        function(returned_data) {
                    $("#output").html(returned_data);
        }
    );
} 
```

# ajax - Rails 3 Ajax无法获取新创建的记录以追加到现有表的底部

> ID：13373038
> 
> 赞同：1
> 
> 时间：2012-11-14T04:28:19.600
> 
> 标签：ajax, ruby-on-rails-3, jquery

在我的索引页面上，我使用 Ajax 返回一个查询结果表。我也使用 Ajax 成功创建了一条新记录。我的问题是试图将新记录立即附加到查询结果表中。我见过 Railscast 136 并且无法让它工作，可能是因为我使用的是 Ruby 1.8.7。

这是我的索引方法，来自返回初始结果的查找控制器

```
 def index
    @lookuprows = Lookup.return_lookup_rows(:pubyear, :codetype)

    respond_to do |format|
       format.html
       format.js
    end
 end 
```

这是 index.js.erb （我确实从 Railscast 136 得到了这个，除了 Ryan 有***"<%= j render(@lookuprows) %>"***。我无法让它工作。我不断收到一个丢失的部分错误. 我可以让它工作的唯一方法是制作一个 _lkupshow.html.erb 部分）。

```
 $("#lkupresultarea").html("<%= j render("lkupshow") %> 
```

我有 ajax 选择工作，这是 lkupshow 部分显示记录的一些代码

```
 <table class="lkupdata">
    <tbody class="lkuptbody">
       <% @lookuprows.each do |lkup| %>
         <tr>
           <td><input value="<%= lkup.codevalue %>" /></td>
           <td><input value="<%= lkup.parameters %>" /></td>
           <td><input value="<%= lkup.remark %>" /></td>
         </tr>
       <% end %>
    </tbody>
 </table> 
```

在同一个部分，我在它上面有一个表格

```
 <div class="lkupnewdiv">
    <%= form_tag(lkupcreate_path, :remote => "true") do %>
       <table>
         <tr>
           <td><%= text_field(:lookup, :codevalue) %></td>
           <td><%= text_field(:lookup, :parameters) %></td>
           <td><%= text_field(:lookup, :remark) %></td>
         </tr>
         <tr><td><%= submit_tag("Submit", :id=> "lkupsubmit") %></td></tr>
       </table>
    <% end %>
 </div> 
```

这是查找控制器的创建方法，保存有效

```
 def create
   @lookup = Lookup.new
   @lookup.codevalue = params[:lookup][:codevalue]
   @lookup.parameters = params[:lookup][:parameters]
   @lookup.remark = params[:lookup][:remark]
   @lookup.save

   respond_to do |format|
      format.html
      format.js
   end
 end 
```

最后，这里是 create.js.erb，我在这里也遇到了同样的“缺少部分”错误。

```
 $(".lkupnewdiv").hide();
 $(".lkupdata > tbody:last").append('<%= j render(@lookup) %>'); 
```

所以当我添加我的新记录时，它确实保存了，但是浏览器中的表单没有任何迹象表明这一点。我可以将我的创建方法更改为此吗？

```
 def create
   @lookup = Lookup.new
   @lookup.codevalue = params[:lookup][:codevalue]
   @lookup.parameters = params[:lookup][:parameters]
   @lookup.remark = params[:lookup][:remark]
   @lookup.save

   # Call the whole query again?  pubyear is one of the variables, just didnt feel like
   # typing them all in
   @lookuprows = Lookup.return_lookup_rows(:pubyear, :codetype)

   respond_to do |format|
      format.html
      # Shouldnt the @lookuprows be accessible with the path below?
      format.js { redirect_to lkupshow_path }
   end
 end 
```

由于我无法克服 create.js.erb 中的“缺少部分”错误，因此我正在寻找其他解决方案。任何帮助，将不胜感激。谢谢！

# java - 无法读取自定义部署程序扩展代码中的 Tridion 自定义配置 xml 文件节点值

> ID：13373040
> 
> 赞同：2
> 
> 时间：2012-11-14T04:28:28.090
> 
> 标签：java, tridion, tridion-2011, tridion-content-delivery

我下面的代码在 Tridion 2009 中运行良好，最近我们迁移到 Tridion 2011，下面是用 java 编写的代码。

**获取文件：** ExtensionsConfiguration.java

```
package com.tridion.custom.extensions;

import com.tridion.configuration.Configuration;
import com.tridion.configuration.ConfigurationException;
import com.tridion.configuration.XMLConfigurationReader;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

public class ExtensionsConfiguration
{
  private static Logger logger = LoggerFactory.getLogger(ExtensionsConfiguration.class);
  private static Configuration configuration;

  public static Configuration getInstance()
  {
    if (configuration == null)
      try
      {
        XMLConfigurationReader localXMLConfigurationReader = new XMLConfigurationReader();
        configuration = localXMLConfigurationReader.readConfiguration("cd_deployer_ext.xml");
        logger.info("ExtensionsConfiguration.getInstance:File Read",configuration.getContent());
      }
      catch (ConfigurationException localConfigurationException)
      {
        logger.error("ExtensionsConfiguration.ConfigurationException: Unable to read configuration.", localConfigurationException);
      }
      catch (Exception ex)
      {
        logger.error("ExtensionsConfiguration.Exception: Unable to read configuration.", ex.getStackTrace());
      }
    return configuration;
  }

} 
```

在上面的代码中，我试图读取放置在 %TRIDION_HOME%/config 中的“cd_deployer_ext.xml”，上面的代码在 2009 年运行良好。

**cd_deployer_ext.xml 的样本格式**

```
<?xml version="1.0" encoding="UTF-8"?>
<Configuration>
    <DeployerCustomization Enable="true" Extension=".aspx" FilePath="F:\WWW\GoogleDataFiles\"></DeployerCustomization>
</Configuration> 
```

这是我尝试从该文件中读取值的方式

**读取值：** PageDeployer.java 下面是我用来从 ExtensionsConfiguration.java 读取值的示例代码

```
Configuration configData = ExtensionsConfiguration.getInstance();
String extensionFromFile = ConfigurationHelper.getStringValue(configData,"Configuration/DeployerCustomization/Extension", null); 
```

现在 extensionFromFile 应该给我“.aspx”。

请推荐！！

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T15:20:24.070

在我看来，您的`ExtensionsConfiguration`课程看起来不错，但问题在于读取“PageDeployer”中的值的代码。

您的 xml 文件有一个节点，其中包含您尝试使用 读取的 etc 等`DeployerCustomization`属性，并且您的 XPath 表达式似乎没有在寻找它正在寻找的节点下的属性。`Name``XPath``DeployerCustomization`

您需要将代码更改为以下代码并尝试（注意开头的 @ 属性和 / ）：

```
 String extensionFromFile = ConfigurationHelper.getStringValue(configData,
"/Configuration/DeployerCustomization/@Extension", null); 
```

希望对获取配置有所帮助。

**记录：**

您创建了一个未配置为使用 logback.xml 进行日志记录的新包类。如果要配置日志记录，则需要将包添加到 logback 配置中（如下所示）。

```
<logger name="com.tridion.custom.extensions">
  <appender-ref ref="rollingDeployerLog"/>
</logger> 
```

在完全独立的注释中，您使用的 API`com.tridion.configuration.XMLConfigurationReader`似乎不公开。除非我错过了，否则我在 javadoc 中的任何地方都找不到它。但是，我会把它留给你。

# sql - SQL Server 查询以获取最新项目

> ID：13373044
> 
> 赞同：1
> 
> 时间：2012-11-14T04:28:51.790
> 
> 标签：sql, sql-server, rdbms

我在表格中有以下信息。假设我们有各种水果，每箱水果可以具有三种质量等级（好、坏和平均）之一。

我想查询表格以获取水果的最新质量状态。

**水果质量时间戳** 橙子 11 月 10 日好，上午 11:20
苹果坏 11 月 10 日，上午 11:10
香蕉好 11 月 10 日，上午 10 点
苹果平均 11 月 10 日，上午 8 点
葡萄 坏 11 月 10 日，上午 7 点
葡萄平均 11 月 10 日，6:45上午
Apple 好 11 月 10 日，早上 6:20
香蕉好 11 月 10 日，早上 5 点
Orange 平均 11 月 9 日，上午 11 点
Orange 坏 11 月 9 日，上午 10:20
Apple 好 11 月 9 日，早上 8:20
葡萄好 11 月 9 日，早上 5 点
芒果糟糕 11 月 9 日凌晨 4 点

查询结果应为：
Orange Good
Apple Bad
Banana Good
Grapes Bad
Mango Bad

我是一个新手，正在努力解决这个问题。任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T04:43:25.933

您是否考虑过将窗口聚合函数与 QUALIFY 子句一起使用？

```
SELECT Fruit
     , Grade
  FROM MyTable
 QUALIFY MAX(Timestamp) OVER (PARTITION BY Fruit) = Timestamp 
```

您还应该能够以这种方式完成它：

```
SELECT Fruit
     , Grade
  FROM MyTable T1
 INNER JOIN
      (SELECT Fruit
            , MAX(Timestamp) AS MaxTimeStamp
         FROM MyTable
        GROUP BY 1) DT1
    ON T1.Fruit = DT1.Fruit
   AND T1.TimeStamp = DT1.MaxTimeStamp; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T04:45:53.660

```
WITH fruitStatus
AS
(
    SELECT fruit, quality, [timestamp],
            ROW_NUMBER() OVER (Partition BY Fruit ORDER BY [TimeStamp] DESC) rn
    FROM    tableName
)
SELECT fruit, quality
FROM fruitStatus
WHERE rn = 1 
```

# php - 无法使用 php 发送邮件

> ID：13373046
> 
> 赞同：0
> 
> 时间：2012-11-14T04:29:06.463
> 
> 标签：php, html, email

希望我的所有专家都没事。Buddy's 我陷入了一个非常简单的代码。实际上我必须插入一个表单，然后从中获取值以将邮件发送给填写表单的用户。所有值都插入数据库并从数据库中获取，但邮件未发送。同一代码在一天前发送邮件。但是今天它不发送邮件。请帮我解决这个问题。

```
<?php

    require("dbconnect.php");
    require("DBConnection.php");

    session_start();

    if(isset($_POST['postadd'])){

    $title = $_POST['adtitle'];
    $area = $_POST['area'];
    $addesc = $_POST['addesc'];
    $email = $_POST['email'];
    $showemail = $_POST['showemail'];
    $userpic = ($_FILES['pic1']['tmp_name']);
        $compath = "UploadPictures/".md5($_FILES['pic1']['name']);
        $comFileType=$_FILES['pic1']['type'];
        $comFileSize=$_FILES['pic1']['size'];
        $comFileSize=$comFileSize/1024;

            if($comFileSize<1000)
            {
                $arrFileType=array("image/jpeg","image/png","image/gif","image/bmp");
                if(in_array($comFileType,$arrFileType))

                {

                    move_uploaded_file($userpic,$compath);
                }
                else
                {
                    ("Invalid Image Format");   
                }
            }
            else
            {
                ("File Size Error");    
            }

            $pic2 = ($_FILES['pic2']['tmp_name']);
        $compath2 = "UploadPictures/".md5($_FILES['pic2']['name']);
        $comFileType2=$_FILES['pic2']['type'];
        $comFileSize2=$_FILES['pic2']['size'];
        $comFileSize2=$comFileSize2/1024;

            if($comFileSize2<1000)
            {
                $arrFileType2=array("image/jpeg","image/png","image/gif","image/bmp");
                if(in_array($comFileType2,$arrFileType2))

                {

                    move_uploaded_file($pic2,$compath2);
                }
                else
                {
                    ("Invalid Image Format");   
                }
            }
            else
            {
                ("File Size Error");    
            }

        $pic3 = ($_FILES['pic3']['tmp_name']);
        $compath3 = "UploadPictures/".md5($_FILES['pic2']['name']);
        $comFileType3=$_FILES['pic3']['type'];
        $comFileSize3=$_FILES['pic3']['size'];
        $comFileSize3=$comFileSize3/1024;

            if($comFileSize3<1000)
            {
                $arrFileType3=array("image/jpeg","image/png","image/gif","image/bmp");
                if(in_array($comFileType3,$arrFileType3))

                {

                    move_uploaded_file($pic3,$compath3);
                }
                else
                {
                    ("Invalid Image Format");   
                }
            }
            else
            {
                ("File Size Error");    
            }

        $pic4 = ($_FILES['pic4']['tmp_name']);
        $compath4 = "UploadPictures/".md5($_FILES['pic4']['name']);
        $comFileType4=$_FILES['pic4']['type'];
        $comFileSize4=$_FILES['pic4']['size'];
        $comFileSize4=$comFileSize4/1024;

            if($comFileSize4<1000)
            {
                $arrFileType4=array("image/jpeg","image/png","image/gif","image/bmp");
                if(in_array($comFileType4,$arrFileType4))

                {

                    move_uploaded_file($pic4,$compath4);
                }
                else
                {
                    ("Invalid Image Format");   
                }
            }
            else
            {
                ("File Size Error");    
            }
        $agree = $_POST['checkbox'];
        $subcat = $_SESSION['subcat'];
        $cat = $_SESSION['cat'];
        $rand = rand();
        $datecreated = date("Y-m-d h:i:s");

            $obj = new DBConnection();
            $arr_Field = array("title","location","post","email","radio","pic1","pic2","pic3","pic4","agree","cat","subcat","random","datecreated");
            $arr_values = array("$title","$area","$addesc","$email","$showemail","$compath","$compath2","$compath3","$compath4","$agree", "$cat", "$subcat" ,"$rand","$datecreated");
            $obj->InsertRecord("ads",$arr_Field,$arr_values) or die (mysql_error());

            $object = new DBConnection();
                $condition = "ORDER BY id DESC LIMIT 1";
                $selquery = $object->SelectRecord(array("*"),"ads","$condition") or die(mysql_error()); 
                while($get = mysql_fetch_array($selquery)){
                $email = $get['email'];
                $id = $get['id'];
                }
                //echo $email;
                //exit();

$to = $email;
$subject = "Admin";

$message = "
<html>
<head>
<title>Admin</title>
</head>
<body>
<p>Please Click on this Link to verify your post</p>
<p><a href='http://almughnisolutions.com/almughniclassified/summary.php?summary=".$id."'>http://almughnisolutions.com/almughniclassified/summary.php?summary=".$id."</a></p>
</body>
</html>
";

// Always set content-type when sending HTML email
$headers = "MIME-Version: 1.0" . "\r\n";
$headers .= "Content-type:text/html;charset=iso-8859-1" . "\r\n";

// More headers
$headers .= 'From: <admin@almughniclassfied.com>' . "\r\n";

mail($to,$subject,$message,$headers) or die("Mail Cannot sent");

            //header("Location:verifyadd.php");

    }

    ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T04:35:20.310

这可能是一个安全的假设，即您的代码不应受到指责。如果 SMPT 服务器运行正常，粗略地回顾一下它似乎应该可以工作。我建议测试服务器。有一些基于网络的工具可以做到这一点：

[https://www.wormly.com/test_smtp_server](https://www.wormly.com/test_smtp_server)

如果需要在内部完成某些事情，您也可以只使用 telnet 从您的机器上进行测试：

[http://technet.microsoft.com/en-us/library/aa995718%28v=exchg.65%29.aspx](http://technet.microsoft.com/en-us/library/aa995718%28v=exchg.65%29.aspx)

# listview - 电晕的 listView 教程

> ID：13373048
> 
> 赞同：-1
> 
> 时间：2012-11-14T04:29:13.497
> 
> 标签：listview, coronasdk

有没有关于电晕中 listView 的教程？

我在电晕示例代码中去[了这里](http://developer.coronalabs.com/content/list-view-2)，但我很难理解它，任何人都可以提供一个链接来教如何在电晕中使用 listView 吗？关于将 sqlite 数据插入 listView 的教程会更好。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T04:38:23.233

[在这里](http://developer.coronalabs.com/content/list-view-3)我找到了一个关于 ListView 的非常好的博客。我认为它会对你有所帮助:)
我也建议你看看这个[Table View Sample V0.13](https://developer.coronalabs.com/code/table-view-sample-v013)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T14:30:21.377

最近 Corona SDK 中出现了新的小部件。对于列表视图，我目前使用[这个](http://docs.coronalabs.com/api/library/widget/newTableView.html)，这很容易配置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-22T20:25:34.930

```
okay, so this one is state of the art, 2.0 compatible. it combines the best of the old school (pre-widget) code that I dropped above–based on Carlos' code and the list view code that comes in the Sample Code folder of the most recent version of Corona. it has the same image requirements as above to avoid errors. this can be saved as main.lua in the same folder as the suggested download above.

when you click a selection, you get a slide-in image and text explaining the image. the index also includes images like Carlos'... 

-- 
-- Abstract: List View sample app
--  
-- Version: 2.0
-- 
-- Sample code is MIT licensed, see http://www.coronalabs.com/links/code/license
-- Copyright (C) 2013 Corona Labs Inc. All Rights Reserved.
--
-- Demonstrates how to create a list view using the widget's Table View Library.
-- A list view is a collection of content organized in rows that the user
-- can scroll up or down on touch. Tapping on each row can execute a 
-- custom function.
--
-- Supports Graphics 2.0
------------------------------------------------------------

display.setStatusBar( display.HiddenStatusBar ) 

-- Import the widget library
local widget = require( "widget" )

-- create a constant for the left spacing of the row content
local LEFT_PADDING = 10

--Set the background to white
display.setDefault( "background", 1, 1, 1 )

--Create a group to hold our widgets & images
local widgetGroup = display.newGroup()
local _W = display.contentWidth
local _H = display.contentHeight
-- Create a background to go behind our tableView
--local background = display.newImage( widgetGroup, "bg.jpg", 0, 0, true )
--background.anchorX = 0; background.anchorY = 0        -- TopLeft anchor

-- The gradient used by the title bar
local titleGradient = {
    type = 'gradient',
    color1 = { 189/255, 203/255, 220/255, 255/255 }, 
    color2 = { 0, 0, 0, 1 },
    direction = "down"
}

-- Create toolbar to go at the top of the screen
local titleBar = display.newRect( display.contentCenterX, 0, display.contentWidth, 32 )
titleBar:setFillColor( titleGradient ) 
titleBar.y = display.screenOriginY + titleBar.contentHeight * 0.5

-- create embossed text to go on toolbar
local titleText = display.newEmbossedText( "Coffee", display.contentCenterX, titleBar.y, native.systemFontBold, 20 )

local data = {}

data[1] = {}
data[1].title = "Hot Coffee"
data[1].subtitle = "Grounds brewed in hot water"
data[1].image = "coffee1.png"
data[1].image2 = "coffee_1.png"
data[1].text="This is Hot Coffee line 1.\nAnd this is line2\nAnd this is Line3\nAnd this is Line4\nAnd this is Line5\nAnd this is Line6\nAnd this is Line7\nAnd this is Line8\nAnd this is Line9\nAnd this is Line10\nAnd this is Line11\nAnd this is Line12\nAnd this is Line13\nAnd this is Line14\nAnd this is Line11\nAnd this is Line15\nAnd this is Line11\nAnd this is Line16\nAnd this is Line11\nAnd this is Line17\nAnd this is Line11\nAnd this is Line18\nAnd this is Line11\nAnd this is Line19\nAnd this is Line11\nAnd this is Line19\nAnd this is Line11\nAnd this is Line20\n\n\n\n"

data[2] = {}
data[2].title = "Iced Coffee"
data[2].subtitle = "Chilled coffee with ice"
data[2].image = "coffee2.png"
data[2].image2 = "coffee_2.png"
data[2].text="This is Iced Coffee line 1.\nAnd this is line2\nAnd this is Line3\nAnd this is Line4\nAnd this is Line5\nAnd this is Line6\nAnd this is Line7\nAnd this is Line8"

data[3] = {}
data[3].title = "Espresso"
data[3].subtitle = "Hot water forced through"
data[3].image = "coffee3.png"
data[3].image2 = "coffee_3.png"
data[3].text="This is Espresso line 1.\nAnd this is line2\nAnd this is Line3\nAnd this is Line4\nAnd this is Line5\nAnd this is Line6\nAnd this is Line7\nAnd this is Line8"

data[4] = {}
data[4].title = "Cappuccino"
data[4].subtitle = "Espresso with frothy milk"
data[4].image = "coffee4.png"
data[4].image2 = "coffee_4.png"
data[4].text="This is Cappucino line 1.\nAnd this is line2\nAnd this is Line3\nAnd this is Line4\nAnd this is Line5\nAnd this is Line6\nAnd this is Line7\nAnd this is Line8"

data[5] = {}
data[5].title = "Latte"
data[5].subtitle = "More milk and less froth"
data[5].image = "coffee5.png"
data[5].image2 = "coffee_5.png"
data[5].text="This is Latte line 1.\nAnd this is line2\nAnd this is Line3\nAnd this is Line4\nAnd this is Line5\nAnd this is Line6\nAnd this is Line7\nAnd this is Line8"

data[6] = {}
data[6].title = "Americano"
data[6].subtitle = "Espresso with hot water"
data[6].image = "coffee6.png"
data[6].image2 = "coffee_6.png"
data[6].text="This is Americano line 1.\nAnd this is line2\nAnd this is Line3\nAnd this is Line4\nAnd this is Line5\nAnd this is Line6\nAnd this is Line7\nAnd this is Line8\n\n\n"
for i=1, 6 do
    table.insert(data, data[i])
end
-- create a shadow underneath the titlebar (for a nice touch)
local shadow = display.newImage( "shadow.png" )
shadow.anchorX = 0; shadow.anchorY = 0      -- TopLeft anchor
shadow.x, shadow.y = 0, titleBar.y + titleBar.contentHeight * 0.5
shadow.xScale = 320 / shadow.contentWidth
shadow.alpha = 0.45

--Text to show which item we selected
local itemSelected = native.newTextBox( 20, _H*.75, _W, 160 )
local fontSize = 20
itemSelected.font = native.newFont( "Arial",  fontSize )
itemSelected.isEditable=false
--itemSelected:setFillColor(0,0,0)
itemSelected.x = display.contentWidth + itemSelected.contentWidth * 0.5
itemSelected.y = display.contentCenterY+200
widgetGroup:insert( itemSelected )

-- Forward reference for our back button & tableview
local backButton, list

-- Handle row rendering
local function onRowRender( event )
    local phase = event.phase
    local row = event.row
    local id = row.index
    -- in graphics 2.0, the group contentWidth / contentHeight are initially 0, and expand once elements are inserted into the group.
    -- in order to use contentHeight properly, we cache the variable before inserting objects into the group

    local groupContentHeight = row.contentHeight

    local rowTitle = display.newText( row, data[id].title,0,0, native.systemFontBold, 16 )
    rowTitle:setFillColor(0,0,0)
    -- in Graphics 2.0, the row.x is the center of the row, no longer the top left.
    rowTitle.x = LEFT_PADDING + 80

    -- we also set the anchorX of the text to 0, so the object is x-anchored at the left
    rowTitle.anchorX = 0

    rowTitle.y = groupContentHeight * 0.25

    local rowSubTitle = display.newText( row, data[id].subtitle,0,0, native.systemFontBold, 12 )
    rowSubTitle:setFillColor(.2,.2,.2)
    -- in Graphics 2.0, the row.x is the center of the row, no longer the top left.
    rowSubTitle.x = LEFT_PADDING + 80

    -- we also set the anchorX of the text to 0, so the object is x-anchored at the left
    rowSubTitle.anchorX = 0

    rowSubTitle.y = groupContentHeight * 0.75

    local rowArrow = display.newImage( row, "rowArrow.png",false )
    rowArrow.x = row.contentWidth - LEFT_PADDING
    rowArrow.y = groupContentHeight * 0.5

    -- we set the image anchorX to 1, so the object is x-anchored at the right
    rowArrow.anchorX = 1
    --data[id]=row.index
    local itemImage = display.newImage( row, data[id].image,0,0)
    itemImage.x = 100
    itemImage.y = groupContentHeight * 0.5

    -- we set the image anchorX to 1, so the object is x-anchored at the right
    itemImage.anchorX = 1

end

-- Hande row touch events
local function onRowTouch( event )
    local phase = event.phase
    local row = event.target
    local id = row.index

    if "press" == phase then
        print( "Pressed row: " .. row.index )

    elseif "release" == phase then
        -- Update the item selected text
        itemSelected.text = data[id].text
        itemSelected:toFront()
        backButton:toFront()
        --Transition out the list, transition in the item selected text and the back button
img = display.newImage(data[id].image2,0,0)
print(data[id].image2)
img.width=img.width*.45
img.height=img.height*.45
img.x= display.contentCenterX
img.y= _H*.45
widgetGroup:insert( img )
        -- The table x origin refers to the center of the table in Graphics 2.0, so we translate with half the object's contentWidth
        transition.to( list, { x = - list.contentWidth * 0.5, time = 400, transition = easing.outExpo } )
        transition.to( itemSelected, { x = display.contentCenterX, time = 400, transition = easing.outExpo } )
        transition.to( img, { x = display.contentCenterX, time = 400, transition = easing.outExpo } )
        transition.to( backButton, { alpha = 1, time = 400, transition = easing.outQuad } )

        print( "Tapped and/or Released row: " .. row.index )
    end
end

-- Create a tableView
list = widget.newTableView
{
    top = 38,
    width = 320, 
    height = 448,
    hideBackground = true,
    maskFile = "mask-320x448.png",
    onRowRender = onRowRender,
    onRowTouch = onRowTouch,
}

--Insert widgets/images into a group
widgetGroup:insert( list )
widgetGroup:insert( titleBar )
widgetGroup:insert( titleText )
widgetGroup:insert( shadow )

--Handle the back button release event
local function onBackRelease()
    --Transition in the list, transition out the item selected text and the back button

    -- The table x origin refers to the center of the table in Graphics 2.0, so we translate with half the object's contentWidth
    transition.to( list, { x = list.contentWidth * 0.5, time = 400, transition = easing.outExpo } )
    transition.to( itemSelected, { x = display.contentWidth + itemSelected.contentWidth * 0.5, time = 400, transition = easing.outExpo } )
    transition.to( img, { x = display.contentWidth + img.width, time = 400, transition = easing.outExpo } )
    transition.to( backButton, { alpha = 0, time = 400, transition = easing.outQuad } )
end

--Create the back button
backButton = widget.newButton
{
    width = 298,
    height = 56,
    label = "Back", 
    labelYOffset = - 1,
    onRelease = onBackRelease
}
backButton.alpha = 0
backButton.x = display.contentCenterX
backButton.y = backButton.contentHeight
widgetGroup:insert( backButton )

for i = 1, 12 do

    local isCategory = false
    local rowHeight = 90
    local rowColor = { default={ 1, 1, 1 }, over={ 1, 0.5, 0, 0.2 } }
    local lineColor = { 0.5, 0.5, 0.5 }

    -- Make some rows categories
   --[[ if ( i == 1 or i == 21 ) then
        isCategory = true
        rowHeight = 40
        rowColor = { default={ 0.8, 0.8, 0.8, 0.8 } }
        lineColor = { 1, 0, 0 }
    end--]]

    -- Insert a row into the tableView
    list:insertRow(
        {
            isCategory = isCategory,
            rowHeight = rowHeight,
            rowColor = rowColor,
            lineColor = lineColor
        }
    )
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-18T05:19:43.780

这是老派（没有小部件），但我对其进行了调整，它可以满足我的需要。 [http://www.coronalabs.com/blog/2010/09/24/create-scrolling-list-views-with-text-and-graphics-in-coronasdk-ios-android-tutorial/](http://www.coronalabs.com/blog/2010/09/24/create-scrolling-list-views-with-text-and-graphics-in-coronasdk-ios-android-tutorial/)

在创建新的 main.lua 后，我进行了以下更改，以便我可以对其进行故事板。您应该能够将其复制并粘贴到 main/lua 上以快速了解。由于缺少图像，您会收到错误（我找到了他的咖啡示例的更大版本）；您可以制作一个虚拟图像并复制并重命名六次。反正...：

```
local storyboard = require "storyboard"
local scene = storyboard.newScene()

--import the table view library
local tableView = require("tableView")

--import the button events library
local ui = require("ui")

display.setStatusBar( display.HiddenStatusBar ) 
_W=display.contentWidth
_H=display.contentHeight
--initial values
local screenOffsetW, screenOffsetH = _W - display.viewableContentWidth, _H - display.viewableContentHeight

local myList, backBtn, detailScreenText

function scene:createScene( event )
local group = self.view

local background = display.newRect(0, 0, _W, _H+80)
background:setFillColor(255, 255, 255)
background.y=_H*.5
group:insert(background)
--setup a destination for the list items
local detailScreen = display.newGroup()

--setup the table
local data = {}  --note: the declaration of this variable was moved up higher to broaden its scope

--setup functions to execute on touch of the list view items
function listButtonRelease( event )
    self = event.target
    local id = self.id
    print(self.id)
    local img2 = display.newImage(data[id].image2,_W*.5,_H*.25)
        img2.width=_W*.75
        img2.height=_H*.75
        detailBg = img2
        detailBg.x=_W*.5
        detailBg.y=_H*.375
      detailScreen:insert(detailBg) 
      detailScreenText = native.newTextBox( 0, _H*.785, _W, 160 )
      local fontSize = 18
      detailScreenText.font = native.newFont( "Arial",  fontSize )
detailScreenText.isEditable=false
detailScreenText.text = data[id].text
 detailScreen:insert(detailScreenText) 
 group:insert(detailScreen)
    transition.to(myList, {time=400, x=_W*-1, transition=easing.outExpo })
        transition.to(detailScreen, {time=400, x=0, transition=easing.outExpo })
        transition.to(backBtn, {time=400, x=math.floor(backBtn.width/2) + screenOffsetW*.5 + 6, transition=easing.outExpo })
        transition.to(backBtn, {time=400, alpha=1 })

        delta, velocity = 0, 0

end

function backBtnRelease( event )
    print("back button released")
    transition.to(myList, {time=400, x=0, transition=easing.outExpo })
    transition.to(detailScreen, {time=400, x=_W, transition=easing.outExpo })
    transition.to(detailScreenText, {time=400, x=_W, transition=easing.outExpo })
    transition.to(backBtn, {time=400, x=math.floor(backBtn.width/2)+backBtn.width, transition=easing.outExpo })
    transition.to(backBtn, {time=400, alpha=0 })

    delta, velocity = 0, 0
end

--setup each row as a new table, then add title, subtitle, and image
data[1] = {}
data[1].title = "Hot Coffee"
data[1].subtitle = "Grounds brewed in hot water"
data[1].image = "coffee1.png"
data[1].image2 = "coffee_1.png"
data[1].text="This is Hot Coffee line 1.\nAnd this is line2\nAnd this is Line3\nAnd this is Line4\nAnd this is Line5\nAnd this is Line6\nAnd this is Line7\nAnd this is Line8\nAnd this is Line9\nAnd this is Line10\nAnd this is Line11"

data[2] = {}
data[2].title = "Iced Coffee"
data[2].subtitle = "Chilled coffee with ice"
data[2].image = "coffee2.png"
data[2].image2 = "coffee_2.png"
data[2].text="This is Iced Coffee line 1.\nAnd this is line2\nAnd this is Line3\nAnd this is Line4\nAnd this is Line5\nAnd this is Line6\nAnd this is Line7\nAnd this is Line8"

data[3] = {}
data[3].title = "Espresso"
data[3].subtitle = "Hot water forced through"
data[3].image = "coffee3.png"
data[3].image2 = "coffee_3.png"
data[3].text="This is Espresso line 1.\nAnd this is line2\nAnd this is Line3\nAnd this is Line4\nAnd this is Line5\nAnd this is Line6\nAnd this is Line7\nAnd this is Line8"

data[4] = {}
data[4].title = "Cappuccino"
data[4].subtitle = "Espresso with frothy milk"
data[4].image = "coffee4.png"
data[4].image2 = "coffee_4.png"
data[4].text="This is Cappucino line 1.\nAnd this is line2\nAnd this is Line3\nAnd this is Line4\nAnd this is Line5\nAnd this is Line6\nAnd this is Line7\nAnd this is Line8"

data[5] = {}
data[5].title = "Latte"
data[5].subtitle = "More milk and less froth"
data[5].image = "coffee5.png"
data[5].image2 = "coffee_5.png"
data[5].text="This is Latte line 1.\nAnd this is line2\nAnd this is Line3\nAnd this is Line4\nAnd this is Line5\nAnd this is Line6\nAnd this is Line7\nAnd this is Line8"

data[6] = {}
data[6].title = "Americano"
data[6].subtitle = "Espresso with hot water"
data[6].image = "coffee6.png"
data[6].image2 = "coffee_6.png"
data[6].text="This is Americano line 1.\nAnd this is line2\nAnd this is Line3\nAnd this is Line4\nAnd this is Line5\nAnd this is Line6\nAnd this is Line7\nAnd this is Line8"

for i=1, 6 do
    table.insert(data, data[i])
end

local topBoundary = display.screenOriginY + 40
local bottomBoundary = display.screenOriginY + 0

-- create the list of items
myList = tableView.newList{
    data=data, 
    default="listItemBg.png",
    --default="listItemBg_white.png",
    over="listItemBg_over.png",
    onRelease=listButtonRelease,
    top=topBoundary,
    bottom=bottomBoundary,
    --backgroundColor={ 255, 255, 255 },  --commented this out because we're going to add it down below
    callback = function( row )
                         local g = display.newGroup()

                         local img = display.newImage(row.image)
                         g:insert(img)
                         img.x = math.floor(img.width*0.5 + 6)
                         img.y = math.floor(img.height*0.5) 

                         local title =  display.newText( row.title, 0, 0, native.systemFontBold, 14 )
                         title:setTextColor(0, 0, 0)
                         --title:setTextColor(255, 255, 255)
                         g:insert(title)
                         title.x = title.width*0.5 + img.width + 6
                         title.y = 30

                         local subtitle =  display.newText( row.subtitle, 0, 0, native.systemFont, 12 )
                         subtitle:setTextColor(80,80,80)
                         --subtitle:setTextColor(180,180,180)
                         g:insert(subtitle)
                         subtitle.x = subtitle.width*0.5 + img.width + 6
                         subtitle.y = title.y + title.height + 6

group:insert(g)

                         return g   

                  end 
}

local function scrollToTop()
    myList:scrollTo(topBoundary-1)
end

--Setup the nav bar 
local navBar = ui.newButton{
    default = "navBar.png",
    onRelease = scrollToTop
}
navBar.x = _W*.5
navBar.y = math.floor(display.screenOriginY + navBar.height*0.5)
group:insert(navBar)

local navHeader = display.newText("Coffee", 0, 0, native.systemFontBold, 16)
navHeader:setTextColor(255, 255, 255)
navHeader.x = _W*.5
navHeader.y = navBar.y
group:insert(navHeader)
--Setup the back button
backBtn = ui.newButton{ 
    default = "backButton.png", 
    over = "backButton_over.png", 
    onRelease = backBtnRelease
}
backBtn.x = math.floor(backBtn.width/2) + backBtn.width + screenOffsetW
backBtn.y = navBar.y 
backBtn.alpha = 0
group:insert(backBtn)
--Add a white background to the list.  
--It didn't move with the list when it appeared on the larger screen of the iPad.
local listBackground = display.newRect( 0, 0, myList.width, myList.height )
listBackground:setFillColor(255,255,255)
myList:insert(1,listBackground)
group:insert(listBackground)
end

function scene:exitScene( event )
storyboard.purgeScene("coffee")
storyboard.removeScene("coffee")
collectgarbage("collect")
collectgarbage()

end

-- Called prior to the removal of scene's "view" (display group)
function scene:destroyScene( event )

    ----print( "((destroying scene 1's view))" )
end

---------------------------------------------------------------------------------
-- END OF YOUR IMPLEMENTATION
---------------------------------------------------------------------------------

-- "createScene" event is dispatched if scene's view does not exist
scene:addEventListener( "createScene", scene )

-- "enterScene" event is dispatched whenever scene transition has finished
scene:addEventListener( "enterScene", scene )

-- "exitScene" event is dispatched before next scene's transition begins
scene:addEventListener( "exitScene", scene )

-- "destroyScene" event is dispatched before view is unloaded, which can be
-- automatically unloaded in low memory situations, or explicitly via a call to
-- storyboard.purgeScene() or storyboard.removeScene().
scene:addEventListener( "destroyScene", scene )

---------------------------------------------------------------------------------

return scene 
```

# c++ - 定义带有 void* 参数的纯虚函数的抽象基类。派生类匹配参数是指向某种类型的指针

> ID：13373049
> 
> 赞同：0
> 
> 时间：2012-11-14T04:29:13.173
> 
> 标签：c++, pure-virtual, purely-functional, abstract-base-class

我正在使用的修订后的实际基类和派生类加上实例化它的函数并使用非虚函数调用

着色器类.h

```
 #ifndef SHADERCLASS_H
    #define SHADERCLASS_H

    #include <D3D11.h>
    #include <D3DX10math.h>
    #include <D3DX11async.h>
    #include <fstream>
    using namespace std;

    class ShaderClass {
    protected:
        struct MatrixBufferType {
            D3DXMATRIX world;
            D3DXMATRIX view;
            D3DXMATRIX projection;
        };

        ID3D11Device*           m_pDevice;
        ID3D11DeviceContext*    m_pDeviceContext;
        HWND m_hWnd;

        ID3D11VertexShader* m_pVertexShader;
        ID3D11PixelShader*  m_pPixelShader;
        ID3D11InputLayout*  m_pLayout;
        ID3D11Buffer*       m_pMatrixBuffer;
        ID3D11SamplerState* m_pSampleState;

        WCHAR*    m_vsFilename;
        WCHAR*    m_psFilename;

    public:
        ShaderClass();
        //ShaderClass( const ShaderClass& other );
        virtual ~ShaderClass();

        bool initialize( ID3D11Device* pDevice, ID3D11DeviceContext* pDeviceContext, HWND hWnd, WCHAR* vsFilename, WCHAR* psFilename );
        void shutdown();
        bool render( int index, D3DXMATRIX view, D3DXMATRIX world, D3DXMATRIX projection, void* pData );

    protected:
        virtual bool initializeShader() = 0;
        virtual void shutdownShader() = 0;
        virtual bool setShaderParameters( D3DXMATRIX world, D3DXMATRIX view, D3DXMATRIX projection, void* pData ) = 0;
        virtual void renderShader( int index ) = 0;

        void outputShaderErrorMessage( ID3D10Blob* pErrorMessage, WCHAR* shaderFilename );

    }; // ShaderClass

    #endif // SHADERCLASS_H 
```

着色器类.cpp

```
 #include "ShaderClass.h"

    // ------------------------------------------------------------------------------------------
    ShaderClass::ShaderClass() :
      m_pVertexShader( nullptr ),
      m_pPixelShader( nullptr ),
      m_pLayout( nullptr ),
      m_pMatrixBuffer( nullptr ),
      m_pSampleState( nullptr ) {
    } // ShaderClass

    // ----------------------------------------------------------------------------
    // ShaderClass::ShaderClass( const ShaderClass& other ) {
    //} // ShaderClass

    // ----------------------------------------------------------------------------
    ShaderClass::~ShaderClass() {
    } // ~ShaderClass

    // ----------------------------------------------------------------------------
    bool ShaderClass::initialize( ID3D11Device* pDevice, ID3D11DeviceContext* pDeviceContext, HWND hWnd, WCHAR* vsFilename, WCHAR* psFilename ) {
        bool bResult;

        if ( !pDevice ) {
            return false;
        }
        m_pDevice = pDevice;

        if ( !pDeviceContext ) {
            return false;
        }
        m_pDeviceContext = pDeviceContext;

        m_hWnd = hWnd;

        m_vsFilename = vsFilename;
        m_psFilename = psFilename;

        // Initialize The Vertex And Pixel Shaders
        bResult = initializeShader();
        if ( !bResult ) {
            return false;
        }
        return true;
    } // initialize

    // ----------------------------------------------------------------------------
    void ShaderClass::shutdown() {
        // Shutdown Individual Shader Contents
        shutdownShader();
    } // shutdown

    // -----------------------------------------------------------------------------
    bool ShaderClass::render( int indexCount, D3DXMATRIX world, D3DXMATRIX view, D3DXMATRIX projection, void* pData  ) {
        bool bResult;

        bResult = setShaderParameters( world, view, projection, pData );
        if ( !bResult ) {
            return false;
        }

        renderShader( indexCount );

        return true;
    } // render

    // ----------------------------------------------------------------------------
    void ShaderClass::outputShaderErrorMessage( ID3D10Blob* pErrorMessage, WCHAR*   shaderFilename ) {
        char* compileErrors;
        unsigned long bufferSize, i;
        ofstream fout;

        // Get A Pointer To The Error Message Text Buffer
        compileErrors = (char*)(pErrorMessage->GetBufferPointer());

        // Get The Length Of The Message
        bufferSize = pErrorMessage->GetBufferSize();

        // Open A File To Write The Error Message
        fout.open( "shader-error.txt" );

        // Write Out The Error Message
        for ( i = 0; i < bufferSize; i++ ) {
            fout << compileErrors[i];
        }

        // Close The File
        fout.close();

        // Release The Error Message
        pErrorMessage->Release();
        pErrorMessage = nullptr;

        // Pop A Message To Notify The User
        MessageBox( m_hWnd, L"Error compiling shader. Check shader-error.txt for message", shaderFilename, MB_OK );

        return;
    } // outputShaderErrorMessage 
```

LightMapShaderClass.h

```
 #ifndef LIGHTMAPSHADERCLASS_H
    #define LIGHTMAPSHADERCLASS_H

    #include "ShaderClass.h"

    class LightMapShaderClass : public ShaderClass {    
    public:
        LightMapShaderClass();
        //LightMapShaderClass( const LightMapShaderClass& other );
        ~LightMapShaderClass();

    protected:
        bool    initializeShader();
        void    shutdownShader();
        bool    setShaderParameters( D3DXMATRIX world, D3DXMATRIX view, D3DXMATRIX projection, ID3D11ShaderResourceView** pTextures );
        void    renderShader( int index );

    }; // LightMapShaderCLASS

    #endif // LIGHTMAPSHADERCLASS_H 
```

LightMapShaderClass.cpp

```
 #include "LightMapShaderClass.h"

    // ----------------------------------------------------------------------------
    LightMapShaderClass::LightMapShaderClass() : ShaderClass() {    
    } // LightMapShaderClass

    // ----------------------------------------------------------------------------
    //LightMapShaderClass::LightMapShaderClass( const LightMapShaderClass& other ) : ShaderClass( other ) {
    //} // LightMapShaderClass

    // ----------------------------------------------------------------------------
    LightMapShaderClass::~LightMapShaderClass() {
    } // ~LightMapShaderClass

    // ----------------------------------------------------------------------------
    bool LightMapShaderClass::initializeShader() {
        HRESULT hr;
        ID3D10Blob* pErrorMessage;
        ID3D10Blob* pVertexShaderBuffer;
        ID3D10Blob* pPixelShaderBuffer;
        D3D11_INPUT_ELEMENT_DESC polygonLayout[2];
        unsigned int uiNumElements;
        D3D11_BUFFER_DESC matrixBufferDesc;
        D3D11_SAMPLER_DESC samplerDesc;

        // Initialize The Pointers
        pErrorMessage = nullptr;
        pVertexShaderBuffer = nullptr;
        pPixelShaderBuffer = nullptr;

        // Compile The Vertex Shader Code
        hr = D3DX11CompileFromFile( m_vsFilename, NULL, NULL, "LightMapVertexShader", "vs_4_1", D3D10_SHADER_ENABLE_STRICTNESS, 0, NULL, &pVertexShaderBuffer, &pErrorMessage, NULL );
        if ( FAILED( hr ) ) {
            // If The Shader Failed To Compile It Should Have Written Something To The Error Message
            if ( pErrorMessage ) {
                outputShaderErrorMessage( pErrorMessage, m_vsFilename );
            }
            // If There Was Nothing In The Error Message It Could Not Find The Shader File
            else {
                MessageBox( m_hWnd, m_vsFilename, L"Missing Shader File", MB_OK );
            }
            return false;
        }

        // Compile The Pixel Shader Code
        hr = D3DX11CompileFromFile( m_psFilename, NULL, NULL, "LightMapPixelShader", "ps_4_1", D3D10_SHADER_ENABLE_STRICTNESS, 0, NULL, &pPixelShaderBuffer, &pErrorMessage, NULL );
        if ( FAILED( hr ) ) {
            // If The Shader Failed To Compile It Should Have Written Something To The Error Message
            if ( pErrorMessage ) {
                outputShaderErrorMessage( pErrorMessage, m_psFilename );
            }
            // If There Was Nothing In The Error Message It Could Not Find The Shader File
            else {
                MessageBox( m_hWnd, m_psFilename, L"Missing Shader File", MB_OK );
            }
            return false;
        }

        // Create The Vertex Shader From The Buffer
        hr = m_pDevice->CreateVertexShader( pVertexShaderBuffer->GetBufferPointer(), pVertexShaderBuffer->GetBufferSize(), NULL, &m_pVertexShader );
        if ( FAILED( hr ) ) {
            return false;
        }

        // Create The Pixel Shader From The Buffer
        hr = m_pDevice->CreatePixelShader( pPixelShaderBuffer->GetBufferPointer(), pPixelShaderBuffer->GetBufferSize(), NULL, &m_pPixelShader );
        if ( FAILED( hr ) ) {
            return false;
        }

        // Create The Vertex Input Layout Description
        // This Setup Needs To Match The VertexType Structure In The ModelClass And In The Shader Buffer
        polygonLayout[0].SemanticName = "POSITION";
        polygonLayout[0].SemanticIndex = 0;
        polygonLayout[0].Format = DXGI_FORMAT_R32G32B32_FLOAT;
        polygonLayout[0].InputSlot = 0;
        polygonLayout[0].AlignedByteOffset = 0;
        polygonLayout[0].InputSlotClass = D3D11_INPUT_PER_VERTEX_DATA;
        polygonLayout[0].InstanceDataStepRate = 0;

        polygonLayout[1].SemanticName = "TEXCOORD";
        polygonLayout[1].SemanticIndex = 0;
        polygonLayout[1].Format = DXGI_FORMAT_R32G32B32_FLOAT;
        polygonLayout[1].InputSlot = 0;
        polygonLayout[1].AlignedByteOffset = D3D11_APPEND_ALIGNED_ELEMENT;
        polygonLayout[1].InputSlotClass = D3D11_INPUT_PER_VERTEX_DATA;
        polygonLayout[1].InstanceDataStepRate = 0;

        // Get A Count Of The Elements In The Layout
        uiNumElements = sizeof(polygonLayout) / sizeof(polygonLayout[0]);

        // Create The Vertex Input Layout
        hr = m_pDevice->CreateInputLayout( polygonLayout, uiNumElements, pVertexShaderBuffer->GetBufferPointer(), pVertexShaderBuffer->GetBufferSize(), &m_pLayout );
        if ( FAILED( hr ) ) {
            return false;
        }

        // Release The Vertex Shader Buffer And Pixel Shader Buffer Since They Are No Longer Needed
        pVertexShaderBuffer->Release();
        pVertexShaderBuffer = nullptr;

        pPixelShaderBuffer->Release();
        pPixelShaderBuffer = nullptr;

        // Setup The Description Of The Matrix Dynamic Constant Buffer That Is In The Vertex Shader
        matrixBufferDesc.Usage = D3D11_USAGE_DYNAMIC;
        matrixBufferDesc.ByteWidth = sizeof(MatrixBufferType);
        matrixBufferDesc.BindFlags = D3D11_BIND_CONSTANT_BUFFER;
        matrixBufferDesc.CPUAccessFlags = D3D11_CPU_ACCESS_WRITE;
        matrixBufferDesc.MiscFlags = 0;
        matrixBufferDesc.StructureByteStride = 0;

        // Create The Matrix Constant Buffer Pointer So We Can Access The Vertex Shader Constant Buffer From Within This Class
        hr = m_pDevice->CreateBuffer( &matrixBufferDesc, NULL, &m_pMatrixBuffer );
        if ( FAILED( hr ) ) {
            return false;
        }

        // Create A Texture Sampler State Description
        samplerDesc.Filter = D3D11_FILTER_MIN_MAG_MIP_LINEAR;
        samplerDesc.AddressU = D3D11_TEXTURE_ADDRESS_WRAP;
        samplerDesc.AddressV = D3D11_TEXTURE_ADDRESS_WRAP;
        samplerDesc.AddressW = D3D11_TEXTURE_ADDRESS_WRAP;
        samplerDesc.MipLODBias = 0.0f;
        samplerDesc.MaxAnisotropy = 1;
        samplerDesc.ComparisonFunc = D3D11_COMPARISON_ALWAYS;
        samplerDesc.BorderColor[0] = 0;
        samplerDesc.BorderColor[1] = 0;
        samplerDesc.BorderColor[2] = 0;
        samplerDesc.BorderColor[3] = 0;
        samplerDesc.MinLOD = 0;
        samplerDesc.MaxLOD = D3D11_FLOAT32_MAX;

        // Create The Texture Sampler State
        hr = m_pDevice->CreateSamplerState( &samplerDesc, &m_pSampleState );
        if ( FAILED( hr ) ) {
            return false;
        }

        return true;
    } // initializeShader

    // ----------------------------------------------------------------------------
    void LightMapShaderClass::shutdownShader() {
        // Release The Sampler State
        if ( m_pSampleState ) {
            m_pSampleState->Release();
            m_pSampleState = nullptr;
        }

        // Release The Matrix Constant Buffer
        if ( m_pMatrixBuffer ) {
            m_pMatrixBuffer->Release();
            m_pMatrixBuffer = nullptr;
        }

        // Release The Layout
        if ( m_pLayout ) {
            m_pLayout->Release();
            m_pLayout = nullptr;
        }

        // Release The Pixel Shader
        if ( m_pPixelShader ) {
            m_pPixelShader->Release();
            m_pPixelShader = nullptr;
        }

        // Release The Vertex Shader
        if ( m_pVertexShader ) {
            m_pVertexShader->Release();
            m_pVertexShader = nullptr;
        }

        return;
    } // shutdownShader

    // ----------------------------------------------------------------------------
    bool LightMapShaderClass::setShaderParameters( D3DXMATRIX world, D3DXMATRIX view, D3DXMATRIX projection, ID3D11ShaderResourceView** pTextures ) {
        HRESULT hr;
        D3D11_MAPPED_SUBRESOURCE mappedResource;
        MatrixBufferType* pData;
        unsigned int uiBufferNumber;

        // Transpose The Matrices To Prepare Them For The Shader
        D3DXMatrixTranspose( &world, &world );
        D3DXMatrixTranspose( &view, &view );
        D3DXMatrixTranspose( &projection, &projection );

        // Lock The Matrix Constant Buffer So It Can Be Written To
        hr = m_pDeviceContext->Map( m_pMatrixBuffer, 0, D3D11_MAP_WRITE_DISCARD, 0, &mappedResource );
        if ( FAILED( hr ) )  {
            return false;
        }

        // Get A Pointer To The Data In The Constant Buffer
        pData = (MatrixBufferType*)mappedResource.pData;

        // Copy The Matrices Into The Constant Buffer
        pData->world = world;
        pData->view  = view;
        pData->projection = projection;

        // Unlock The Matrix Constant Buffer
        m_pDeviceContext->Unmap( m_pMatrixBuffer, 0 );

        // Set The Position Of The Matrix Constant Buffer In The Vertex Shader
        uiBufferNumber = 0;

        // Now Set The Matrix Constant Buffer In The Vertex Shader With The Updated Values
        m_pDeviceContext->VSSetConstantBuffers( uiBufferNumber, 1, &m_pMatrixBuffer );

        // Set Shader Texture Array Resource In The Pixel Shader
        m_pDeviceContext->PSSetShaderResources( 0, 2, pTextures );

        return true;
    } // setShaderParameters

    // ----------------------------------------------------------------------------
    void LightMapShaderClass::renderShader( int indexCount ) {
        // Set The Vertex Input Layout
        m_pDeviceContext->IASetInputLayout( m_pLayout );

        // Set The Vertex And Pixel Shaders That Will Be Used To Render This Triangle
        m_pDeviceContext->VSSetShader( m_pVertexShader, NULL, 0 );
        m_pDeviceContext->PSSetShader( m_pPixelShader, NULL, 0 );

        // Set The Sampler State In The Pixel Shader
        m_pDeviceContext->PSSetSamplers( 0, 1, &m_pSampleState );

        // Render The Triangles
        m_pDeviceContext->DrawIndexed( indexCount, 0, 0 );

        return;
    } // renderShader 
```

使用基类的函数

```
 // ----------------------------------------------------------------------------
    bool GraphicsClass::initialize( int iScreenWidth, int iScreenHeight, HWND hWnd ) {
        bool bResult;
        D3DXMATRIX baseViewMatrix;

        // Create The Direct3D Object
        m_pD3D = new D3DClass;
        if ( !m_pD3D ) {
            return false;
        }
        // Initialize The Direct3D Object
        bResult = m_pD3D->initialize( iScreenWidth, iScreenHeight, VSYNC_ENABLED, hWnd, FULL_SCREEN, SCREEN_DEPTH, SCREEN_NEAR );
        if ( !bResult ) {
            MessageBox( hWnd, L"Could not initialize Direct3D", L"Error", MB_OK );
            return false;
        }

        // Create The Camera Object
        m_pCamera = new Camera;
        if ( !m_pCamera ) {
            return false;
        }
        // Initialize The Base View Matrix With The Camera For 2D User Interface Rendering
        m_pCamera->setPosition( 0.0f, 0.0f, -1.0f );
        m_pCamera->render();
        m_pCamera->getViewMatrix( baseViewMatrix );

        // Create The Model Object
        m_pModel = new ModelClass;
        if ( !m_pModel ) {
            return false;
        }
        // Initialize The Model Object
        bResult = m_pModel->initialize( m_pD3D->getDevice(), "../DX11Engine/data/square.txt", L"../DX11Engine/data/stone01.dds", L"../DX11Engine/data/light01.dds" );
        if ( !bResult ) {
            MessageBox( hWnd, L"Could not initialize the model object.", L"Error", MB_OK );
            return false;
        }

        // Create The LightMapTextureShader Object
        m_pShader = new LightMapShaderClass;
        if ( !_pShader ) {
            return false;
        }
        // Initialize The LightMapTextureShader Object
        bResult = _pShader->initialize( _pD3D->getDevice(), _pD3D->getDeviceContext(), hWnd, L"../DX11Engine/lightmap.vs", L"../DX11Engine/lightmap.ps" );
        if ( !bResult ) {
            MessageBox( hWnd, L"Could not initialize the light map shader object.", L"Error", MB_OK );
            return false;
        }
        return true;
    } // initialize 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T05:35:42.817

您`doSomethingNotPureVirtual()`在基类和派生类中有不同的签名

在基类

```
bool doSomethingNotPureVirtual( param1, param2, param3, param4, void* pData ); 
```

在派生类

```
bool settingFunctionPureVirtual( param1, param2, param3, DataType** pMyTypes ); 
```

我看到您在使用 nullptr 时使用的是 C++11。尝试在 Drived 类中添加覆盖，编译器会告诉你一些事情

```
bool settingFunctionPureVirtual( param1, param2, param3, DataType** pMyTypes ) override; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T05:35:14.230

在您的伪代码中，您的派生类声明了新版本的settingFunctionPureVirtual 和doingSomethingPureVirtual，而不是提供与基类中的声明匹配的虚拟函数的类特定实现。

派生类中的声明都缺少 virtual 并且它们是私有的而不是受保护的。

# c - 双指针算术，遍历数组字符串的字符

> ID：13373050
> 
> 赞同：1
> 
> 时间：2012-11-14T04:29:19.013
> 
> 标签：c, arrays, string, pointers, traversal

请帮助我理解我的双指针算法做错了什么。我知道我显然做错了什么，但是什么？看看我标记的行，“坏指针”。我的直觉告诉我这应该可行，但我想不是。用 C 编程。

```
/*
 *This function searches for prefixes within the string array.
 *@param stringArray array containing strings
 *@param searchPrefix a string or characters to search for at beginning of string
 *@return void
 */
 void prefixSearch(char* stringArray[SIZE], char* searchPrefix){
int count = strlength(searchPrefix);//size of the prefix search
while(count > 0){
    if(**stringArray == *searchPrefix){
        printf("%c match %c\n", **stringArray, *searchPrefix);
        **stringArray++;//want to move to next character, instead get bad pointer.
        *searchPrefix++;//moves to next char
    }else{
        stringArray++;//no match, go to next string
    }
    count--;//decrement
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T04:33:50.623

`*`and运算符具有相同的`++`优先级和从右到左的关联性，因此不起作用的行解析如下：

```
*(*(stringArray++)); 
```

我实际上并不理解您的代码，但这不是您想要的，因为取消引用运算符无效。大概你想要这个：

```
(**stringArray)++; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T05:12:14.317

你必须移动到下一个字符，所以

采用

`(*stringArray)++`代替`**stringArray++`

和

`searchPrefix++`代替`*searchPrefix++`

# c# - 如何使用 C# 读取 xml 流？

> ID：13373051
> 
> 赞同：1
> 
> 时间：2012-11-14T04:29:37.960
> 
> 标签：c#, ado.net

我从客户端应用程序获取 xml 流如何直接解析该流以及如何将其加载到数据集？

```
[WebInvoke(UriTemplate = "UpdateFile/{id}", Method = "POST")]
       public bool UpdateTestXMLFile(string id, Stream createdText)
       {
 string filenamewithpath = System.Web.HttpContext.Current.Server.MapPath(@"~/files/" + id+".xml");
               System.IO.File.WriteAllBytes(filenamewithpath, Util.ReadFully(createdText));
} 
```

请告诉我 ..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T04:32:10.043

您可以使用[**DataSet.ReadXml(Stream stream)**](http://msdn.microsoft.com/en-us/library/55hehd8c.aspx)，数据集的重载方法，它在参数中接受流。

```
[WebInvoke(UriTemplate = "UpdateFile/{id}", Method = "POST")]
public bool UpdateTestXMLFile(string id, Stream createdText)
{
   DataSet ds = new DataSet(); 
   ds.ReadXml(createdText)

   string filenamewithpath = System.Web.HttpContext.Current.Server.MapPath(@"~/files/" + id+".xml");
   ds.WriteXml(filenamewithpath);      
} 
```

# c# - 如何在运行时从现有数据模型中的数据构建自定义的动态 ViewModel？

> ID：13373052
> 
> 赞同：2
> 
> 时间：2012-11-14T04:29:41.343
> 
> 标签：c#, asp.net, sql-server, asp.net-mvc-3

所以我正在开发一个 Web 应用程序，遇到了一个新的挑战，我已经坚持了几个星期。我将提供有关我的应用程序和数据模型的背景信息，以及所需的最终结果。

基本应用程序信息和问题背景：我的应用程序旨在用作景观承包商可以用来帮助管理其业务运营的工具。我的应用程序将提供一个他们可以创建帐户的地方，然后输入他们的所有客户信息（“客户”数据模型），以及他们为每个客户所做的工作的信息（“工作”数据模型） . 客户和工作之间存在一对多的关系（一个客户可以有很多工作，但对于任何给定的工作只有一个客户）。

背景：我有两个简单的数据模型，“客户”和“工作”。我的应用程序是在 ASP.net MVC3 框架中构建的。使用 Entity Framework 脚手架机制，我为每个数据模型（创建、读取、更新、删除）创建了基本的 CRUD 视图。这在大多数情况下都很棒（我可以创建新的客户和工作，并且很容易编辑现有的）。

业务问题：我需要允许在我的应用程序中批量创建新作业。我希望我的用户（景观承包商）能够输入他们当天完成的所有割草工作。因此，我想让我对此过程的视图填充一个包含所有活动客户端的表 - 每个在行旁边都有一个复选框。然后我希望用户能够为他们完成新工作（修剪草坪）的每个客户选中复选框，并提交表单（输入完成的工作），结果将为这些客户中的每一个创建新工作.

技术问题：我最好的猜测是我需要在控制器中创建一个自定义 ViewModel 并将其发送到视图，其中 ViewModel 将是基于当前活动客户端创建的新作业的列表。然后在视图中，复选框可以将 Client_ID（客户端的唯一标识符）作为其值（这将是 ViewModel 的一部分。当用户提交表单时，视图会将 ViewModel 传递回控制器。然后控制器可以浏览 ViewModel 作业列表并为每个选中复选框的 ViewModel 作业创建一个新作业。

所以，我的问题是 - 我如何使用控制器执行以下操作： 1.) 在运行时根据客户端列表（“客户端”数据模型）中的数据构建 ViewModel 作业列表？2.）然后我怎样才能将它传递给视图？3.) 一旦返回到控制器，我如何遍历列表并相应地修改我的其他数据模型（创建新的“工作”项）？

我创建了自定义 ViewModel，其中包含来自客户和工作的属性，我需要构建新的工作条目（客户名称、客户地址、客户 ID、工作说明、工作人员、工作人员人数、工作时间、指示完成的复选框等.)。假设用户有 50 个客户正在修剪草坪，这些客户都是活跃客户。我想构建一个有 50 行的 ViewModel（代表每个可能修剪草坪的客户）。然后我想将它发送到视图并用复选框显示它，这表明草坪是否被切割。当模型返回视图时，控制器将在复选框中选中带有检查的行，并在该表中创建新的“作业”行。

提前感谢您提供的任何帮助，我知道这对你们中的许多人来说可能很容易。我是 C# 和 MVC3 的新手。

**更新：** 这是我的代码 -

**工作模式**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Data.Entity;
using System.ComponentModel.DataAnnotations;

namespace LawnTracker.Models
{
    public class Job
    {
        [Key]
        public int Job_ID { get; set; }
        public int Client_ID { get; set; }
        public int Account_ID { get; set; }
        public string Name { get; set; }
        public string Location { get; set; }
        public string Notes { get; set; }
        public string SvcRoute { get; set; }
        public string Service { get; set; }
        public string Date { get; set; }
        public double SvcPriceOverride { get; set; }
        public float SvcQty { get; set; }
        public string UofM { get; set; }
        public bool Invoiced { get; set; }
        public string Crew { get; set; }
        public int TechCount { get; set; }
        public string TimeStart { get; set; }
        public string TimeFinish { get; set; }
        public double TimeSpent { get; set; }
        public string Image1 { get; set; }
        public string Image2 { get; set; }
        public string Image3 { get; set; }
        public double MulchUsed { get; set; }
        public double FertUsed { get; set; }
        public double HerbUsed { get; set; }
        public string NextDue { get; set; }

    }

} 
```

**我的 MowingJobViewModel 模型 -**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;

namespace LawnTracker.Models
{
    public class MowingJobViewModel
    {
        public int Client_ID { get; set; }

        public bool Completed { get; set; }

        public string Name { get; set; }

        public string Street { get; set; }

        public string City { get; set; }

        public double SvcPriceOverride { get; set; }

        public string UofM { get; set; }

        public int SvcQty { get; set; }

        public string Notes { get; set; }

        public string Date { get; set; }

        public string Crew { get; set; }

        public int TechCount { get; set; }

        public string SvcRoute { get; set; }

        public string Schedule { get; set; }
    }
} 
```

**还有我的 JobController -**

```
 // GET: /Job/CreateMowing

        public ActionResult CreateMowing(string route = "", string sched = "")
        {
            List<SelectListItem> listItems = new List<SelectListItem>();
            listItems.Add(new SelectListItem()
            {
                Value = "Lump Sum",
                Text = "Lump Sum"
            });
            listItems.Add(new SelectListItem()
            {
                Value = "Hours",
                Text = "Hours"
            });

            ViewBag.Units = new SelectList(listItems, "Value", "Text");
            ViewBag.Routes = db.Clients.Select(r => r.SvcRoute).Distinct();
            ViewBag.Sched = db.Clients.Select(r => r.MowSched).Distinct();

            var model = from r in db.Clients
                        orderby r.SvcRoute
                        where (r.Mowing == true) &&
                        (r.Status == "Active") &&
                        (r.SvcRoute == route || (route == "")) &&
                        (r.MowSched == sched || (sched == "")) 
                        select r;
            if (model.Count() > 0)
            {
                ViewBag.total = model.Select(r => r.MowPrice).Sum();
            }
            else
            {
                ViewBag.total = 0.00;
            }

           /* Build a list of MowingJobViewModel objects based on the above defined list of clients
            * who are subscribed to mowing and active. This will enable batch entry for new jobs done.
            * This list of MowingJobViewModel objects will be sent to the client after a HTTP GET
            * request for the CreateMowing view.  The user will be able to check boxes associated
            * with each client in the client list.  When the form is submitted, the controller
            * receives the model back with the updated information (completed, notes, etc.) about
            * each job.  Then the controller must update the jobs table, adding the new jobs based on 
            * the view model returned from the view / client.
            * 
            */

            //Create a new list of MowingJobViewModel objects
             IEnumerable<MowingJobViewModel> mjList = new List<MowingJobViewModel>();

            //iterate through the list of clients built from earlier (in model)...
             foreach (var item in model)
             {  
             //create new MowingJobViewModel object MJ and add it to the list
             mjList.Add(new MowingJobViewModel()
             {
               Client_ID = item.Client_ID,
               Completed = false,
               Name = (item.FirstName + " " + item.LastName),
               Street = item.Address1,
               City = item.City,
               SvcPriceOverride = item.MowPrice,
               UofM = "Lump Sum",
               SvcQty = 1,
               Notes = "",
               Date = "",
               Crew = "",
               TechCount = 2,
               SvcRoute = item.SvcRoute,
               Schedule = item.MowSched,
              });

             }

             return View(mjList);

             }

**I don't have my view ("CreateMowing.cshtml") worked out correctly, but here is what I have-**

@model IEnumerable<LawnTracker.Models.MowingJobViewModel>

@{
    ViewBag.Title = "Enter Mowing Jobs";
}

<h2>Enter Mowing Jobs</h2>

<div style="float: left; clear:both; width: 100%;">
    <b>Total Jobs: @Html.Encode(Model.Count())</b><br />
    <b>Total Revenue: $@Html.Encode(ViewBag.total)</b><br /><br />
</div>
<p></p>

<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

<div style="float: right; clear:both; width: 100%;">
     @using (Html.BeginForm("CreateMowing", "Job", FormMethod.Get)) 
    {
    <table>
    <tr>
        <th></th>

        <th>
            Route
        </th>

        <th>Schedule</th>
        <th></th>
    </tr>
    <tr>
        <td>
            Show:
        </td>

        <td>
            @Html.DropDownList("route", new SelectList(ViewBag.Routes), "--ALL--")            
        </td>

        <td>
            @Html.DropDownList("sched", new SelectList(ViewBag.Sched), "--ALL--")
        </td>
        <td>            
            <input type="submit" value="Filter" />
        </td>
    </tr>
</table><br /><br />

    }
</div>

<table>
    <tr>
        <th>
            Completed
        </th>
        <th>
            First Name
        </th>
        <th>
            Last Name
        </th>
        <th>
            Street
        </th>

        <th>
            City
        </th>

        <th>
            Service Route
        </th>
        <th>
            Price
        </th>

        <th>
            Units
        </th>

        <th>
            Qty
        </th>
        <th>
            Notes
        </th>

        <th>
            Schedule
        </th>

    </tr>

@foreach (var item in Model) {
    <tr>
        <td>
            <input type="checkbox" name="invoiced" value="@item.Client_ID" >
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.FirstName)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.LastName)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Address1)
        </td>

        <td>
            @Html.DisplayFor(modelItem => item.City)
        </td>

        <td>
            @Html.DisplayFor(modelItem => item.SvcRoute)
        </td>

        <td>
            @Html.DisplayFor(modelItem => item.MowPrice)
        </td>

        <td>

        </td>

        <td>

        </td>
        <td>

        </td>

        <td>
            @Html.DisplayFor(modelItem => item.MowSched)
        </td>

     </tr>
}

</table>

<div>
    <br />
    @Html.ActionLink("Back to List", "Index")
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T05:11:51.927

您创建了一个视图模型，其中包含创建作业时特定客户端的显示属性/数据输入字段。既然你没给它起名字，那我就叫它吧`NewJobEntry`。正如您所猜测的，您现在需要一个视图模型，它具有类型属性`List<NewJobEntry>`来表示可以一次创建的可变数量的新作业。

您的控制器将填充列表，`NewJobEntry`为每个客户端添加一个实例。

当提供包含列表的模型时，您的视图可以枚举列表并为每个`NewJobEntry`.

一旦数据被发送回您的控制器，默认的 ASP.NET MVC 绑定器就可以处理列表，但有一些怪癖。只要字段名称具有顺序索引，默认活页夹将自动水合列表中的对象。为了确保正确生成这些索引，您需要在视图中使用具有顺序索引的 lambda 表达式进行绑定：

`Html.CheckboxFor(model => model.JobList[i].IsSelected)`

在枚举列表时，您可能会考虑使用`for`循环而不是循环。`foreach`

您还必须小心复选框，因为未选中的复选框实际上不会出现在发送到控制器的发布数据中。这将破坏绑定，因为在发布数据中发送的索引可能不再是连续的（如果有未选中的复选框，就会有间隙）。因此，我建议您为客户 ID 添加一个隐藏字段。这样，发布数据将始终包含至少一个字段，其中每个列表条目具有适当的顺序索引。

`Html.HiddenFor(model => model.JobList[i].ClientId)`

现在您的帖子数据将类似于以下内容：

```
JobList_0_IsSelected=true
JobList_0_ClientId=12345
JobList_1_ClientId=12346
JobList_2_IsSelected=true
JobList_2_ClientId=12347 
```

默认活页夹将处理此问题并重建您的列表。请注意，如果没有客户端 ID 的隐藏字段，索引`1`将丢失，并且默认绑定器将无法正确重建列表。

希望有帮助！

# asp.net - 用于选择具有空列的视图的 SQL 查询

> ID：13373059
> 
> 赞同：0
> 
> 时间：2012-11-14T04:30:16.963
> 
> 标签：asp.net, sql

我有`table1`columns`A , B , C`和另一个，`table2`with columns `A, D`。

我想创建一个视图来显示列，即使没有列`A, B, C, D`也应该有列的所有值`A``A``table2`

我试过了：

```
select 
    a, b, c, d 
from 
    table 1 
inner join 
    table 2 where table1.a = table2.a 
```

提出一些建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T04:33:17.720

您将需要使用 OUTER JOIN：

```
SELECT t1.a, t1.b, t1.c, t2.d 
FROM table t1 
  LEFT JOIN table t2 
    ON t1.a = t2.a; 
```

# c# - 显示气球通知

> ID：13373060
> 
> 赞同：42
> 
> 时间：2012-11-14T04:30:25.507
> 
> 标签：c#, .net, winforms, notifyicon, notification-area

我正在尝试使用下面的代码来显示气球通知。我已经验证它是通过使用断点执行的。它也显示没有错误。

我应该怎么做才能调试它，因为它没有抛出错误并且没有显示气球？

```
private void showBalloon(string title, string body)
{
    NotifyIcon notifyIcon = new NotifyIcon();
    notifyIcon.Visible = true;

    if (title != null)
    {
        notifyIcon.BalloonTipTitle = title;
    }

    if (body != null)
    {
        notifyIcon.BalloonTipText = body;
    }

    notifyIcon.ShowBalloonTip(30000);
} 
```

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-11-14T05:04:13.540

您实际上并未指定要在任务栏中显示的图标。在 LINQPad 中运行您的代码，只需`notifyIcon.Icon = SystemIcons.Application`在调用之前添加`ShowBalloonTip`即可获得要显示的提示。另请注意，您应该`Dispose`在完成`NotifyIcon`实例后调用。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2016-01-22T21:40:32.013

马修发现了这个问题，但我仍然努力将所有部分放在一起。所以我认为一个在 LINQPad 中按原样工作的简洁示例会有所帮助（并且可能在其他地方）。只需引用`System.Windows.Forms`程序集，然后将此代码粘贴进去。

```
var notification = new System.Windows.Forms.NotifyIcon()
{
    Visible = true,
    Icon = System.Drawing.SystemIcons.Information,
    // optional - BalloonTipIcon = System.Windows.Forms.ToolTipIcon.Info,
    // optional - BalloonTipTitle = "My Title",
    BalloonTipText = "My long description...",
};

// Display for 5 seconds.
notification.ShowBalloonTip(5000);

// This will let the balloon close after it's 5 second timeout
// for demonstration purposes. Comment this out to see what happens
// when dispose is called while a balloon is still visible.
Thread.Sleep(10000);

// The notification should be disposed when you don't need it anymore,
// but doing so will immediately close the balloon if it's visible.
notification.Dispose(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-11T08:47:39.313

请参阅下面的源代码。

```
using System;
using System.ComponentModel;
using System.Drawing;
using System.IO;
using System.Reflection;
using System.Windows.Forms;

namespace ShowToolTip
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void btBallonToolTip_Click(object sender, EventArgs e)
        {
            ShowBalloonTip();
            this.Hide();
        }

        private void ShowBalloonTip()
        {
            Container bpcomponents = new Container();
            ContextMenu contextMenu1 = new ContextMenu();

            MenuItem runMenu = new MenuItem();
            runMenu.Index = 1;
            runMenu.Text = "Run...";
            runMenu.Click += new EventHandler(runMenu_Click);

            MenuItem breakMenu = new MenuItem();
            breakMenu.Index = 2;
            breakMenu.Text = "-------------";

            MenuItem exitMenu = new MenuItem();
            exitMenu.Index = 3;
            exitMenu.Text = "E&xit";

            exitMenu.Click += new EventHandler(exitMenu_Click);

            // Initialize contextMenu1
            contextMenu1.MenuItems.AddRange(
                        new System.Windows.Forms.MenuItem[] { runMenu, breakMenu, exitMenu });

            // Initialize menuItem1

            this.ClientSize = new System.Drawing.Size(0, 0);
            this.Text = "Ballon Tootip Example";

            // Create the NotifyIcon.
            NotifyIcon notifyIcon = new NotifyIcon(bpcomponents);

            // The Icon property sets the icon that will appear
            // in the systray for this application.
            string iconPath = Path.GetDirectoryName(Assembly.GetExecutingAssembly().Location) + @"\setup-icon.ico";
            notifyIcon.Icon = new Icon(iconPath);

            // The ContextMenu property sets the menu that will
            // appear when the systray icon is right clicked.
            notifyIcon.ContextMenu = contextMenu1;

            notifyIcon.Visible = true;

            // The Text property sets the text that will be displayed,
            // in a tooltip, when the mouse hovers over the systray icon.
            notifyIcon.Text = "Morgan Tech Space BallonTip Running...";
            notifyIcon.BalloonTipText = "Morgan Tech Space BallonTip Running...";
            notifyIcon.BalloonTipTitle = "Morgan Tech Space";
            notifyIcon.ShowBalloonTip(1000);
        }

        void exitMenu_Click(object sender, EventArgs e)
        {
            this.Close();
        }

        void runMenu_Click(object sender, EventArgs e)
        {
            MessageBox.Show("BallonTip is Running....");
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-04-05T18:56:05.463

为了未来的编码员：

> [timeout] 参数自 windows vista 起已弃用

请参阅：[C# NotifyIcon 显示气球参数已弃用](https://stackoverflow.com/questions/45379333/c-sharp-notifyicon-show-balloon-parameter-deprecated)

因此，您不妨将 0 放入 > Windows Vista 的参数中。更糟糕的是，对链接答案的评论表明，这些气球的替代品，吐司通知，仅在 Windows 8 中引入。因此，对于可怜的旧 Windows 7 落在两个凳子之间，Vista < 7 < 8，我们似乎处于不管 Windows 想把那个气球放在那里多长时间都行不通！我注意到它最终确实会消失，但是经过一些经验测试后，我很确定该参数确实被忽略了。

因此，在上述答案的基础上，特别是采用@jlmt 在评论中建议的 lambda 函数，这里有一个适用于 Windows 7 的解决方案：

```
//Todo: use abstract factory pattern to detect Windows 8 and in that case use a toastnotification instead
        private void DisplayNotificationBalloon(string header, string message)
        {
            NotifyIcon notifyIcon = new NotifyIcon
            {
                Visible = true,
                Icon = SystemIcons.Application
            };
            if (header != null)
            {
                notifyIcon.BalloonTipTitle = header;
            }
            if (message != null)
            {
                notifyIcon.BalloonTipText = message;
            }
            notifyIcon.BalloonTipClosed += (sender, args) => dispose(notifyIcon);
            notifyIcon.BalloonTipClicked += (sender, args) => dispose(notifyIcon);
            notifyIcon.ShowBalloonTip(0);
        }

        private void dispose(NotifyIcon notifyIcon)
        {
            notifyIcon.Dispose();
        } 
```

# 笔记

*   我在里面放了一个 TODO 来为 Windows 8 编写另一个实现，因为现在人们在 Windows 7/8 上的比例是 50/50，所以支持更新的功能会很好。我猜想为多个版本的 Windows 编写此代码的其他任何人都应该这样做，理想情况下。或者干脆停止支持 7 并切换到使用 ToastNotification。
*   我特意在一个函数中定义了处理，这样我就可以调试并验证断点确实被命中了。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-14T04:33:01.743

ShowBalloonnTip 采用毫秒数。3 毫秒可能太快了，你甚至看不到。尝试更多类似 3000 的东西

您可能需要将组件模型传递给构造函数。这是我在所有示例中看到的。抱歉很久没用了。在这里查看第一个答案：

[通知图标不显示](https://stackoverflow.com/questions/842494/notifyicon-not-showing)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-14T04:34:03.043

看看这里的例子 [http://msdn.microsoft.com/en-us/library/system.windows.forms.notifyicon.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.notifyicon.aspx)

我看到它与您的代码之间存在一些明显的差异，您遗漏了许多部分，例如创建 a`ComponentModelContainer`并将其传递给`NotifyIcon`的构造函数。

# javascript - 替换ckeditor中的内容标签html

> ID：13373061
> 
> 赞同：2
> 
> 时间：2012-11-14T04:30:31.617
> 
> 标签：javascript, regex, ckeditor

我通过命令在 ckeditor 中获取内容

`var content = $('#editor1').val(); // With editor1 is my ckeditor`

我收到一个字符串，比如`<h3 class="Interview">any word(may be unicode)</h3>` 我如何`<h3 class="Interview">My word</h3>`用 javascript 替换它？？？？

请帮我 ！！！谢谢 ！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T05:56:43.027

尝试这个：

```
var str="<h3 class=\"Interview\">any word(may be unicode)</h3>";

function htmlTextReplace(original){
    var regex = />([^<]*)</g;
    return original.replace(regex, function($0, $1){
      return $0.replace($1, strTextReplace($1, 'any word','your words'));
    });
 }

function strTextReplace(str, ow, dw){
    return str.replace(ow, dw);
}
console.log(htmlTextReplace(str)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T05:02:47.317

这应该工作

```
result = subject.replace(/(<[a-z][a-z0-9]*[^<>]*>)([a-z][a-z0-9]*[^<>]*)(<\/?[a-z][a-z0-9]*[^<>]*>)/, "$1 My words $3"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T05:03:26.083

您可以通过使用正则表达式来做到这一点：

```
var a = '<h3 class="Interview">any word(may be unicode)</h3>'
a = a.replace(/(<h3[^>]*>)[^<]*<\/h3>/g, '$1'+'your words</h3>') 
```

# requirejs - require.js require 里面的 require

> ID：13373062
> 
> 赞同：2
> 
> 时间：2012-11-14T04:30:39.327
> 
> 标签：requirejs

为什么我们要在 require 结构中拥有另一个 require 结构？

喜欢

```
要求（[mod1，mod2]，函数（m1，m2）{

  要求（[mod3]，函数（m3）{
    // 然后也会在这里使用 m1 和 m2
  })
})

```

为什么我们不能只有一个 require 结构？我想了解此设置之间的动机。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T05:50:01.057

嵌套 require 不是强制性的，如果这不适合您的风格，可以很容易地避免。

虽然，这对于加载子模块或条件模块（如 polyfill）很有用。

在更个人的经验中，我经常在我的控制器中使用嵌套的 require`router`以便在请求时加载某些页面视图。这允许我只请求我的依赖项，`router`而无需加载应用程序的整个页面集合。

我还经常发现自己使用嵌套的 require`i18n`通过加载条件语言环境来管​​理某些应用程序的某些方面。

最后一件事，我只记得模块应该使用定义`define`，而不是`require`. `require`如果需要，函数实际上用于任意加载脚本（并且可以使用一次来引导您的应用程序）。因此，在大多数实际用例中，您将在模块定义中嵌套一些`require`内容`define`。

希望这有帮助！

# jquery - img attr src 不会改变

> ID：13373064
> 
> 赞同：2
> 
> 时间：2012-11-14T04:30:49.610
> 
> 标签：jquery, src, attr

这是我能够在悬停 src 时显示的情况，但屏幕上的图像本身并没有改变。任何帮助都会有很大帮助。

```
$('.hoverImgs').hover(
function(){mouseOn = 1; formSelector('hover');},
function(){mouseOn = 0; formSelector('out');
});

function formSelector(method){
if(mouseOn === 1 && method === 'hover'){       
    $(this).attr("src", "images/radio_hover.png");
    alert($(this).attr("src"));
}
else {}
}
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T04:36:35.963

调用函数时上下文会丢失，`formSelector`并且`this`会在函数内显示窗口对象。您应该将`this`对象作为参数传递或使用`.call/.apply`.

尝试如下，

```
$(function () {
   var mouseOn;
   $('.hoverImgs').hover(
      function(){ mouseOn = 1; formSelector('hover', this); },
      function(){mouseOn = 0; formSelector('out', this); }
   );

  function formSelector(method, thisObj){
     if(mouseOn === 1 && method === 'hover'){       
       thisObj.src = "images/radio_hover.png";
       alert(thisObj.src);
     }
     else {}
   }

}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T04:36:47.187

首先，最后你有一个额外`});`的。

你真正的问题：`this`不是你想的那样。在这种情况下，`this`指的是窗口对象，而不是图像。解决此问题的一种方法是将图像元素传递给函数。

```
$('.hoverImgs').hover(
  function(){mouseOn = 1; formSelector($(this), 'hover');},
  function(){mouseOn = 0; formSelector($(this), 'out');}
);

function formSelector(elem, method){
  if(mouseOn === 1 && method === 'hover'){
    console.log(elem.attr('src'));
    elem.attr("src", "https://www.google.com/images/srpr/logo3w.png");
  }
} 
```

[演示](http://jsbin.com/icexix/1)

# java - struts应用程序在linux tomcat服务器中不起作用

> ID：13373065
> 
> 赞同：0
> 
> 时间：2012-11-14T04:30:53.163
> 
> 标签：java, apache, struts, tomcat7, struts1

我有一个简单的 struts 程序在以 tomcat 7 作为服务器的 Windows 环境中完美运行。但是我将应用程序部署在 linux 环境中，以 tomcat 7 作为服务器，应用程序没有运行。它显示404错误。请帮我解决问题。

我收到如下错误：输入异常报告

信息：

> javax.servlet.ServletException: javax.servlet.jsp.JspException: 找不到 ActionMappings 或 ActionFormBeans 集合

描述：

> 服务器遇到一个内部错误，导致它无法完成此请求。

例外：

```
org.apache.jasper.JasperException: javax.servlet.ServletException: javax.servlet.jsp.JspException: Cannot find ActionMappings or ActionFormBeans collection
    org.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:549)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:455)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)

root cause

javax.servlet.ServletException: javax.servlet.jsp.JspException: Cannot find ActionMappings or ActionFormBeans collection
    org.apache.jasper.runtime.PageContextImpl.doHandlePageException(PageContextImpl.java:912)
    org.apache.jasper.runtime.PageContextImpl.handlePageException(PageContextImpl.java:841)
    org.apache.jsp.login_jsp._jspService(login_jsp.java:112)
    org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:432)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)

root cause

javax.servlet.jsp.JspException: Cannot find ActionMappings or ActionFormBeans collection
    org.apache.struts.taglib.html.FormTag.lookup(FormTag.java:747)
    org.apache.struts.taglib.html.FormTag.doStartTag(FormTag.java:443)
    org.apache.jsp.login_jsp._jspx_meth_html_005fform_005f0(login_jsp.java:147)
    org.apache.jsp.login_jsp._jspService(login_jsp.java:102)
    org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:432)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)

note The full stack trace of the root cause is available in the Apache Tomcat/7.0.32 logs. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-28T15:25:49.680

您在创建war文件时是否正确包含了jar。请检查项目的 WEB-INF/Lib 文件夹中是否有以下 jar

1.  antlr-2.7.6.jar
2.  commons-beanutils-1.7.0.jar
3.  commons-chain-1.2.jar
4.  commons-collections-3.1.jar
5.  commons-digester-2.0.jar
6.  commons-fileupload-1.2.2.jar
7.  commons-io-2.0.1.jar
8.  commons-lang-2.5.jar
9.  commons-logging-1.1.1.jar
10.  commons-logging-api-1.1.jar
11.  commons-validator-1.3.1.jar
12.  dom4j-1.6.1.jar
13.  hibernate-jpa-2.0-api-1.0.1.Final.jar
14.  hibernate3.jar
15.  javassist-3.12.0.GA.jar
16.  jstl-api-1.2.jar
17.  jstl-impl-1.2.jar
18.  jta-1.1.jar
19.  mysql-connector-java-5.1.17-bin.jar
20.  ognl-3.0.1.jar
21.  slf4j-api-1.6.1.jar
22.  slf4j-log4j12-1.6.2.jar
23.  spring-beans-2.5.6.jar
24.  spring-context-2.5.6.jar
25.  spring-core-2.5.6.jar
26.  spring-test-2.5.6.jar
27.  spring-web-2.5.6.jar
28.  struts2-core-2.2.3.1.jar
29.  xwork-core-2.2.3.1.jar

# javascript - 模板中的 Ember.js 属性和 ArrayController

> ID：13373068
> 
> 赞同：0
> 
> 时间：2012-11-14T04:31:08.823
> 
> 标签：javascript, ember.js, handlebars.js

我在 Ember 中有这样的设置：

```
 App.ListObject = Ember.Object.create({
        knownThings: function() {
                var ot = this.openThings.get('content');
                var ct = this.closedThings.get('content');
                var kt = ot.concat(ct);
                var known = Ember.ArrayController.create({content: kt});
                return known;
                }.property(),

```
 openThings: Ember.ArrayController.create({
        content: []
        }), 

    closedThings: Ember.ArrayController.create({ 
        content: []
    }), 
}) 
``` 
基本上，已知事物是 openThings 和 closedThings 的组合数组。我似乎无法弄清楚如何迭代模板中的 knownThings。只是在做

```
 {{#each App.ListObject.knownThings }} 
```

不起作用，因为需要像访问该属性一样`App.ListObject.get('knownThings')`，但这在模板中不起作用，除非我做错了什么。迭代模板中的其他属性确实有效（打开和关闭的东西）

那么，您将如何迭代模板中的 knownThings？  

            回答 #1

赞同：3

时间：2012-11-14T12:34:59.130

需要稍作修改...

首先，

```
knownThings: function() {
  //use get to retrieve properties in ember, Always !
  var ot = this.get('openThings').get('content');
  //var ot = this.get('openThings.content') if you are using latest ember
  var ct = this.get('closedThings').get('content');
  //var ot = this.get('closedThings.content') if you are using latest ember
  var kt = ot.concat(ct);
  var known = Ember.ArrayController.create({content: kt});
  return known;
  //Add dependencies to keep your knownThings in sync with openThings & closedThings if at all they change in future
}.property('openThings', 'closedThings') 
```

来到 Handlebars 迭代使用

```
//you forgot content property, and in handlebars you don;t need to use get, dot operator is enough
{{#each App.List.knownThings}} 
```

让我知道这个是否奏效...

**更新**
工作[小提琴](http://jsfiddle.net/G9wju/35/)...

            回答 #2

赞同：1

时间：2012-11-14T07:20:57.733

除非我不明白你在说什么，否则我认为你应该`ListObject`扩展`Em.ArrayController`而不是`Em.Object`. 此外，如果您的财产取决于`content`，它应该是`.property('content.@each')`。如果您正在使用路由器，您的模板应该看起来像`{{#each thing in controller.knownThings}}`并且您使用`{{thin.something}}`，如果不使用路由器，那么`{{#each item in App.listObject.knownThings}}`. 此外，`openThings`并且`closedThings`似乎不正确，您访问它们的方式也是错误的。

我没有为这个特定案例写小提琴，因为我真的不知道你想要做什么，但是看看[**这个小提琴**](http://jsfiddle.net/schawaska/hEx84/)，特别`App.ResourcesController`是模板'resources-view'：

控制器：

```
// ...
App.ResourcesController = Em.ArrayController.extend({
    content: [],
    categories: ['All', 'Handlebars', 'Ember', 'Ember Data', 'Bootstrap', 'Other'],
    categorySelected: 'All',
    filtered: function() {
        if(this.get('categorySelected') == "All") {
            return this.get('content');                                        
        } else {
            return this.get("content")
                       .filterProperty(
                           "category",
                           this.get('categorySelected')
                       );
        }            
    }.property('content.@each', 'categorySelected'),
    filteredCount: function() {
        return this.get('filtered').length;                                        
    }.property('content.@each', 'categorySelected'),
    hasItems: function() {
        return this.get('filtered').length > 0;
    }.property('filteredCount') 
);
// ... 
```

模板：

```
<script type="text/x-handlebars" data-template-name="resources-view">
    <h1>Ember Resources</h1>
    {{#view Bootstrap.Well}}
        The following is a list of links to Articles, Blogs, Examples and other types of resources about Ember.js and its eco-system.
    {{/view }}

    {{view Bootstrap.Pills contentBinding="controller.controllers.resourcesController.categories" selectionBinding="controller.controllers.resourcesController.categorySelected"}}
    <i>{{controller.filteredCount}} Item(s) Found</i>
    {{#if controller.hasItems}}
    <ul>
    {{#each resource in controller.filtered}}
        <li>
            <a {{bindAttr href="resource.url" 
                          target="resource.target"
                          title="resource.description"}}>
               {{resource.htmlText}}
            </a>
        </li>
    {{/each}}        
    </ul>
    {{else}}
        {{#view Bootstrap.AlertMessage type="warning"}}
            Couldn't find items for {{controller.categorySelected}}
        {{/view}}
    {{/if}}
</script> 
```

```

# cakephp - Cakephp：登录功能在客户端服务器上不起作用

> ID：13373079
> 
> 赞同：0
> 
> 时间：2012-11-14T04:32:42.090
> 
> 标签：cakephp, login

登录功能可以在本地服务器和uni服务器上工作，但不能在客户端服务器上工作。

检查salt，和本地core.php一样检查密码，char(40)，设置debug为2，从app/tmp/cache文件夹和子文件夹中删除缓存文件，

但什么也没发生，我仍然无法登录系统。

我不确定接下来应该去哪里看，我很困惑。

客户端服务器 PHP 版本：5.3.17 CakePHP：2.2.3

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T22:13:07.963

解决方案：删除控制器和模型中 } 标记结束后的所有空格。现在，它起作用了。

原因（在 Google 搜索中找到）：' 问题是 PHP 问题，在发送某些标头后会输出空格，通常发生在从空格进一步向下请求重定向的代码中。这个问题与帖子标题中暗示的 CakePHP 无关。

感谢帮助...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-18T18:58:31.887

我遇到了同样的问题。删除了所有 .php 和 .CTP 文件中 PHP 结束标记后的所有空格。其中超过 1000 个。

我相信这与文件夹权限有关，因为在 localhost 中它可以正常工作并且 Dandy 并且在我的情况下，我知道服务器有很多权限问题。

* * *

# jquery - JQUERY：乘以输入元素选择框和单选框以及隐藏输入

> ID：13373081
> 
> 赞同：0
> 
> 时间：2012-11-14T04:32:44.293
> 
> 标签：jquery

晚上，

我很想乘以不同的输入元素，但由于某种原因，它给了我一个 NAND 错误。在用户选择、检查或修改任何元素的值时。这应该会改变总量。

[http://jsfiddle.net/aQ5K8/](http://jsfiddle.net/aQ5K8/)

```
<select name="select">
<option value="1">1</option>
<option value="2">2</option>
<option value="3">3</option>
</select>
<input name="radio" type="radio" id="radio" value="10" tvalue="100" />
<input name="radio" type="radio" id="radio" value="20" tvalue="200" />
<label id="Total"></label> 
```

另外，如果您查看 jsfiddle 代码，我有 tvalue=100 而另一个是 =200 作为自定义属性，我将如何访问它而不是访问常规的 html 值。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T04:40:13.257

错字：确保您用作 jquery 选择器的 ID 是正确的。我看到`id="amazon25"`和选择器是`$("#amazon5")`和其他 2 个元素。也许你的意思是这样的[http://jsfiddle.net/bondythegreat/2Pzyz/](http://jsfiddle.net/bondythegreat/2Pzyz/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T05:26:10.427

检查以下链接后

[http://jsfiddle.net/aQ5K8/](http://jsfiddle.net/aQ5K8/)

我们将得到以下问题

1.  选择没有 id 为“select”的元素，因此 $("#select") 不会返回该元素。2.类似地，在下面的代码中，没有 id 为 amazon5,cash5 的元素

    ```
    var amazon5= parseFloat$('#amazon5').val();
    var cash5 = parseFloat($('#cash5').val()); 
    ```

我们建议您参考以下代码

HTML

```
<select name="select" id="select">
<option value="1">1</option>
<option value="2">2</option>
<option value="3">3</option>
</select> 
```

脚本

```
$("input[type=radio][name=radio]").click(function() {
var quantity = parseFloat($(this).val());
var amazon5= parseFloat($('#amazon25').val());
var cash5 = parseFloat($('#cash25').val());
var radio = $(this).val();  
var select = parseFloat($('#select').val());
$('#Total').text((select * radio * amazon5));

}); 
```

有关更多信息，请参阅链接 [http://jsfiddle.net/bondythegreat/2Pzyz/](http://jsfiddle.net/bondythegreat/2Pzyz/)

谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T04:56:01.540

好吧，检查这个 jsFiddle，它可以工作。

[http://jsfiddle.net/aQ5K8/5/](http://jsfiddle.net/aQ5K8/5/)

问题与`name`而不是`id`在 html 中而`amazon5`不是`amazon25`在 JavaScript 中一样。

# python - 定义多项式函数

> ID：13373082
> 
> 赞同：0
> 
> 时间：2012-11-14T04:32:46.540
> 
> 标签：python, python-2.7

我如何定义一个函数——比如说`def polyToString(poly)`——以标准形式返回一个包含多项式的字符串`poly`？

例如：由 表示的多项式`[-1, 2, -3, 4, -5]`将返回为：

```
"-5x**4 + 4x**3 -3x**2 + 2x**1 - 1x**0" 
```

```
def polyToString(poly):
    standard_form=''
    n=len(poly) - 1
    while n >=0:
        if poly[n]>=0:
            if n==len(poly)-1: 
                standard_form= standard_form + '   '+ str(poly[n]) + 'x**%d'%n 
            else:
                standard_form= standard_form + ' + '+str(poly[n]) + 'x**%d'%n
        else:
            standard_form= standard_form + ' - ' + str(abs(poly[n])) + 'x**' + str(n)
        n=n-1
    return standard_form 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T04:57:24.240

为什么这么难？

```
def poly_to_str(coefs):
    return ''.join(['{:+d}x**{:d}'.format(a,n) for n, a in enumerate(coefs)][::-1]) 
```

**解释**

*   `enumerate(coefs)`给我们`n`，`a`这是`ax**n`成员的标准形式
*   `'{:+d}x**{:d}'.format(a,n)`格式化每个成员
*   `{:+d}`说要打印带符号的十进制数
*   `[..][::-1]`反转成员数组
*   `''.join(..)`将它们连接成一个字符串

**例子**

`print poly_to_str([-1, 2, -3, 4, -5])`

输出

`-5x**4+4x**3-3x**2+2x**1-1x**0`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T06:16:07.593

对于初学者来说可能更容易阅读的东西。

```
def poly2str(coefs):
    retstr=""
    for i in range(len(coefs)):
        if coefs[i] < 0:
            retstr += " -" + str(abs(coefs[i])) + "x**" + str(len(coefs) - i) + " "
        else:
            retstr += "+ " + str(abs(coefs[i])) + "x**" + str(len(coefs) - i) + " "

    return retstr 
```

# google-app-engine - 更改与 Google App Engine 帐户关联的短信或手机号码

> ID：13373083
> 
> 赞同：1
> 
> 时间：2012-11-14T04:32:48.163
> 
> 标签：google-app-engine

我最近刚刚选择了一个新号码和手机套餐，并想更改与我的 Google App Engine 帐户关联的 SMS 或手机号码，因为我最初用于注册的号码与一些在线免费短信服务相关联. 或者，我想从我的 Google 帐户中彻底清除 App Engine，以便我至少可以使用我的新号码重新注册 App Engine。

我该如何实施这些更改？我应该向谁寻求这些问题的帮助？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T08:16:38.170

尝试填写[SMS 问题表](https://appengine.google.com/waitlist/sms_issues)并在评论部分描述您的问题。如果您看不到该表单，回复[此置顶 Google 网上论坛帖子中有关注册问题的帖子](https://groups.google.com/d/topic/google-appengine/kk7xwZK26Wk/discussion)可能会引起注意。

# python - Python XRC 按钮不可点击

> ID：13373088
> 
> 赞同：0
> 
> 时间：2012-11-14T04:33:01.057
> 
> 标签：python, button, clickable, wxwidgets, xrc

我正在开发一个 python 应用程序，并且遇到了障碍。我的目标是拥有一个包含许多控件的主框架，以及一个将从运行时指定的 xrc 文件加载的面板。本质上，当用户单击按钮时，我希望从 xrc 文件填充面板，xrc 文件是根据单击的按钮来选择的。

我正在使用 XRCed 定义 UI，这就是我目前所拥有的。这似乎将子面板控件加载到框架中，但它们不可点击，并且它们不会像我希望的那样出现在 DynamicPanel 中。您的帮助将不胜感激。

**编辑**

我已经修改了我的主要代码，现在控件出现在它们在框架中的位置，但是按钮仍然不可点击。谁能告诉我为什么？

Python代码：

```
import wx
import wx.xrc as xrc

from UNTITLED_xrc import xrcFRAME1

class XrcFrameSubClass(xrcFRAME1):
    """"""
    #----------------------------------------------------------------------
    def __init__(self):
        xrcFRAME1.__init__(self, parent = None)

        self.Bind(wx.EVT_BUTTON, self.OnButton_1, self.button1)
        self.Bind(wx.EVT_BUTTON, self.OnButton_2, self.button2)
        self.Bind(wx.EVT_BUTTON, self.OnButton_Clear, self.Button_Clear)

        self.Show()

    def OnButton_Clear(self, event):
        self.ClearSubPanel()

    def ClearSubPanel(self):
        try:
            self.SubPanel.Destroy()
            self.Fit()
            self.Layout()
        except:
            pass

    def OnButton_1(self, event):
        self.ClearSubPanel()

        SubPanel_xrc = '''<?xml version="1.0" ?><resource>
  <object class="wxPanel" name="SubPanel">
    <object class="wxBoxSizer">
      <orient>wxVERTICAL</orient>
      <object class="sizeritem">
        <object class="wxStaticText">
          <label>Your Mother was a</label>
        </object>
      </object>
      <object class="sizeritem">
        <object class="wxButton" name="SubButton1">
          <label>Hamster</label>
        </object>
      </object>
      <object class="sizeritem">
        <object class="wxButton" name="SubButton2">
          <label>Black Knight</label>
        </object>
      </object>
    </object>
  </object>
</resource>'''

        #PanelCoord = self.DynamicPanel.GetPosition()

        TopSizer = self.TopPanel.GetSizer()

        res = xrc.EmptyXmlResource() #Here it is
        res.LoadFromString(SubPanel_xrc)

        self.SubPanel = res.LoadPanel(self, "SubPanel")
        #Note: the first argument of the sizer.Insert() method is the index at which to insert the new item
        TopSizer.Insert(1,self.SubPanel,1, wx.EXPAND|wx.ALL, 5)

        self.Fit()
        self.Layout()

#        #Not sure how to do the event binding dynamically yet
#        self.SubButton1 = xrc.XRCCTRL(self.SubPanel, "SubButton1")
#        self.SubButton2 = xrc.XRCCTRL(self.SubPanel, "SubButton2")

    def OnButton_2(self, event):
        self.ClearSubPanel()

        SubPanel_xrc = '''<?xml version="1.0" ?>
<resource>
  <object class="wxPanel" name="SubPanel">
    <object class="wxBoxSizer">
      <orient>wxHORIZONTAL</orient>
      <object class="sizeritem">
        <object class="wxStaticText">
          <label>Your father smelt of</label>
        </object>
      </object>
      <object class="sizeritem">
        <object class="wxButton" name="SubButton1">
          <label>Elderberries</label>
        </object>
      </object>
      <object class="sizeritem">
        <object class="wxButton" name="SubButton2">
          <label>Shrubberies</label>
        </object>
      </object>
    </object>
  </object>
</resource>'''

        TopSizer = self.TopPanel.GetSizer()

        res = xrc.EmptyXmlResource() #Here it is
        res.LoadFromString(SubPanel_xrc)

        self.SubPanel = res.LoadPanel(self, "SubPanel")

        #Note: the first argument of the sizer.Insert() method is the index at which to insert the new item
        TopSizer.Insert(1,self.SubPanel,1, wx.EXPAND|wx.ALL, 5)

        self.Layout()
        self.Fit()

#        self.SubButton1 = xrc.XRCCTRL(self.SubPanel, "SubButton1")
#        self.SubButton2 = xrc.XRCCTRL(self.SubPanel, "SubButton2")

if __name__ == "__main__":
    app = wx.App(False)
    frame = XrcFrameSubClass()
    app.MainLoop() 
```

主机：

```
<?xml version="1.0" encoding="cp1252"?>
<resource>
  <object class="wxFrame" name="FRAME1">
    <title>This is the title</title>
    <object class="wxPanel" name="TopPanel">
      <object class="wxBoxSizer">
        <orient>wxVERTICAL</orient>
        <object class="sizeritem">
          <object class="wxBoxSizer">
            <orient>wxVERTICAL</orient>
            <object class="sizeritem">
              <object class="wxButton" name="button1">
                <label>Load SubXRC 1</label>
              </object>
              <option>1</option>
              <flag>wxGROW</flag>
            </object>
            <object class="sizeritem">
              <object class="wxButton" name="button2">
                <label>Load SubXRC 2</label>
              </object>
              <option>1</option>
              <flag>wxGROW</flag>
            </object>
            <object class="sizeritem">
              <object class="wxButton" name="Button_Clear">
                <label>Clear</label>
              </object>
            </object>
            <object class="spacer">
              <size>40,20</size>
            </object>
          </object>
        </object>
        <object class="sizeritem">
          <object class="wxPanel" name="DynamicPanel"/>
          <option>1</option>
          <flag>wxEXPAND</flag>
          <minsize>100,200</minsize>
        </object>
        <object class="sizeritem">
          <object class="wxBoxSizer">
            <orient>wxHORIZONTAL</orient>
            <object class="sizeritem">
              <object class="wxButton" name="button3">
                <label>button3</label>
              </object>
            </object>
            <object class="sizeritem">
              <object class="wxButton" name="button4">
                <label>button4</label>
              </object>
            </object>
          </object>
          <flag>wxALIGN_CENTRE</flag>
        </object>
      </object>
    </object>
  </object>
</resource> 
```

# grails - grails中的3个域，我想访问与第二个域视图中的第二个域无关的第三个域

> ID：13373093
> 
> 赞同：0
> 
> 时间：2012-11-14T04:33:30.167
> 
> 标签：grails, grails-orm, grails-2.0, grails-controller

我又卡住了。来自红宝石背景非常令人沮丧。

我有 3 个域。域 A 有许多域 B。域 A 有许多域 C

我希望能够在域 B 的视图中访问域 C 的记录，以便用户可以选择域 C 模板并将其插入到域 B 的编辑/创建字段的文本区域中。显然，这将在 javascript 之后出现。

故事 - 用户创建附加到投资组合的出版物。用户在创建或编辑出版物时可以选择要插入到出版物中的模板。用户应该能够从分配给投资组合的模板列表中进行选择，并且当他们从列表中选择模板时，它会在编辑或创建期间自动插入该出版物的文本区域。

我的问题是我无法让域 C 在域 B 视图中加载任何结果。什么都没有。我已经尝试过 g:select、g:link、href，无论我尝试什么，我似乎都能得到任何结果。

视图/控制器是标准模板生成的。

我的域/模型如下

```
class Portfolio {

    static hasMany = [publications:Publication, pubtempl: Templatepublication]

class Publication {

    static belongsTo = [portfolio: Portfolio]

class Templatepublication {

   Cstatic belongsTo = [portfolio: Portfolio] 
```

编辑：

这是正在使用的 gsp 页面标签

```
<g:select name="templatepublication.id"
from="${spotlight.pubtemplates.Templatepublication.list()}" 
optionKey="id" required="" 
value="${portfolioInstance?.pubtempl?.id}" class="many-to-one"/>` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T17:05:39.097

“在域 B 视图中”试图做什么？您可以发布您的视图代码吗？

像这样？（我主要复制了一个[grails 文档示例](http://grails.org/doc/latest/ref/Tags/select.html)）

```
<g:select name="bInstance.a.c.id"
      from="${C.list()}"
      value="${bInstance.a?.c?.id}"
      optionKey="id" /> 
```

# vb6 - VB6 Crystal Reports ActiveX 查看器不显示所有导出格式

> ID：13373095
> 
> 赞同：1
> 
> 时间：2012-11-14T04:33:44.447
> 
> 标签：vb6, crystal-reports

我在 VB6 应用程序中使用 Crystal Reports ActiveX 查看器 (v10)。2003 年 10 月 12 日上午 1:41 799,944 crviewer.dll

查看器加载 OK 并显示报告，但使用对话框上的按钮可用的导出格式仅限于：

*   水晶报表 (RPT)
*   制表符分隔文本
*   文本

我已经确认所需的导出 DLL，例如 u2fsepv.dll、u2fxls.dll 等都位于 windows\system32 和 Common files\Crystal Decisions\2.5\bin 目录中。

我已经检查了用于加载查看器的源代码，它并没有以我能看到的任何方式限制导出格式。

这是一个已知的问题？有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T04:53:19.740

这些 DLL 的 ( `u2*.dll`) 需要放入`C:\Windows\Crystal`.

**编辑**

对于 v8.5，我还安装并注册：

```
$PROGRAMFILES\Seagate Software\Shared\ExportModeller.dll
$PROGRAMFILES\Seagate Software\Shared\crtslv.dll 
```

请注意，PDF 的导出驱动程序不是`u2f*.dll`; 我使用`crxf_pdf.dll`（确实进入`$WINDIR\Crystal`）

# oop - 非面向对象游戏教程

> ID：13373101
> 
> 赞同：0
> 
> 时间：2012-11-14T04:34:19.290
> 
> 标签：oop

我的任务是写一篇赞美面向对象编程优点的文章，并创建一个附带的游戏来展示它们。

我最初的想法是找到一个用不遵循 OOP 范式的编程语言编写的简单游戏的教程（或用 OOP 语言编写但不是以 OOP 方式编写）并使用 C# 或 Java 以 OOP 方式重新创建它（尚未决定）。这将使我能够在两者之间进行具体比较。

游戏不必太复杂；俄罗斯方块、乒乓球等等之类的东西。到目前为止我遇到的问题是找到合适的教程，有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T20:52:02.880

假设您找到了一个不在 OOP 中的游戏的源代码。您可以在文章中指出一些 OOP 美德：

**组织。** 由于游戏有很多任务，因此将职责分配给一个类是一个好主意。这意味着编写一个记录分数的类，一个进行文件访问的类（例如读写游戏状态），代表你的角色的类等。否则，你将拥有一个包含数千行代码的巨大文本文件。甚至看它都是一场噩梦，更不用说找到你需要的东西并修复它了。

**封装。** 这是为了更好的组织将属性和功能组合在一起。我们曾经有一个不同的数组来存储每个属性 - （例如）一个数组用于飞机名称，一个数组用于火力，另一个数组用于最高速度等。这很糟糕，因为您需要确保所有这些数组的索引相同实际上描述了正确的飞机。最好创建一个 Aircraft 对象并给它那些属性名称。然后，您将拥有一个容纳飞机的阵列 - 无需跟踪太多阵列。

**可重用性。** 随着您编写更多游戏（甚至是其他应用程序），您会遇到重用类的需求。例如，您将在纸牌游戏中使用与您将来编写的任何纸牌游戏相同的 Card 类。

**多态性/继承。** 假设你想在某种网格中显示每个角色——英雄和恶棍。您将希望 Hero 和 Villain 都继承 Character。Character 将具有共同的属性，甚至还有一个 [n abstract] Display() 函数。然后，您将为 Character 和 Villain（访问特定于类的数据以进行绘图）编写自定义 Display() 函数。然后，您创建一个 Character 对象数组，您可以在每个插槽中存储一个 Villain 或 Hero。当游戏通过该列表进行显示时，每个 item.Display() 调用都会根据角色的实际类型自动选择正确的 Display() 函数。尝试在没有 OOP 的情况下执行此操作，您最终会得到一个很长的 if-else（甚至可能是嵌套的）语句和一个地方的所有绘图例程。

这只是我从一般编程经验中得出的结论，您绝对可以将其应用于游戏编程。OOP 方面可能比提到的要多，所以你可能想研究一下。最好的一切为你的文章！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-14T23:30:03.563

[您可以尝试从TICalc](http://ticalc.org)、[Omnimaga](http://www.omnimaga.org/)或大多数其他计算器编程网站获取（简单）TI-Basic 游戏并尝试理解其代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-14T23:35:38.410

试试这个网站的 BASIC 游戏：

[http://www.atariarchives.org/basicgames/](http://www.atariarchives.org/basicgames/)

# mysql - 通过重复条目限制 SQL 查询

> ID：13373102
> 
> 赞同：3
> 
> 时间：2012-11-14T04:34:23.980
> 
> 标签：mysql, sql

我认为通过一个例子更容易理解我想要什么：

记录 ：

名称数据

**AAAAA** *分享它***AAAA***天文学*
**AAAAA** *数学***BBBBB***分享它***CCCCC***分享它***CCCCC***足球*

 *********我想选择前两条记录（包含所有数据）。（如果记录有NAME重复，获取它并且不计为记录）我想得到这个：

**AAAAA** *分享它*
**AAAA** *天文学*
**AAAA** *数学*
**BBBBB** *分享它*

不知道是不是容易理解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T04:48:05.980

```
SELECT  a.*
FROM    tableName a 
        INNER JOIN
        (
          SELECT DISTINCT Name
          FROM tableName
          ORDER BY Name 
          LIMIT 2
        ) b ON a.Name = b.Name 
```

*   [**SQLFiddle 演示**](http://sqlfiddle.com/#!2/574db/2)*********

# java - java数组声明

> ID：13373104
> 
> 赞同：0
> 
> 时间：2012-11-14T04:34:27.923
> 
> 标签：java, arrays, declaration

当我调用我的类的构造函数时，我得到了注释中显示的错误（当我删除数组部分时一切正常）。这是因为数组声明错误`seq`吗？

```
public class FibIt implements SeqIt{
    public int counter;
    public int ptr;
    public int [] seq;

    public FibIt(Fib x)
    {   counter=0;
        ptr=0;
        seq[0]=x.first1;         //gives me an error here saying Exception in 
                                     //thread "main" java.lang.NullPointerException
                                 //at FibIt.<init>(FibIt.java:9)
                                     //at Main.main(Main.java:6)
        seq[1]=x.first2;
        for (int i=2; seq[i-1]<=x.last; i++)
            {seq[i]=seq[i-1]+seq[i-2];}
    }
    @Override
    public int func2() {
        // TODO Auto-generated method stub
        ptr++;
        return seq[ptr-1];
    }

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T04:35:53.153

你必须初始化你的数组，所以像`public int[] seq = new int[10];`

然后将 10 替换为您需要的任何大小。

当@Jack 发布了一个很好的解决方案时，我正要回答你的问题。`ArrayList<Integer>`如果您不知道数组的大小，这将非常有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T04:37:34.070

您需要初始化数组。一件事是**声明**，另一件事是**初始化**。

`int[] seq`声明一个 name 变量，`seq`它是一个`int`. 然后你需要通过为它分配一个数组的构造函数来有效地初始化它：`new int[dimension]`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T04:37:26.693

是的，您只声明了数组但没有初始化。

```
public int [] seq = new int[anySize]; 
```

# image - tesseract 错误 - 图像太大

> ID：13373116
> 
> 赞同：4
> 
> 时间：2012-11-14T04:35:54.917
> 
> 标签：image, ocr, tesseract

对于大小为 5+ MB 的图像，我收到了来自 tesseract 的错误。

Tesseract Open Source OCR Engine v3.01 with Leptonica Page 0 图像太大：(39667, 56133) 处理过程中出错。

文件大小是否有限制或是否有解决此问题的参数。

感谢你的帮助..

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-05-27T12:27:30.973

最大宽度和高度为 32767。

从源代码（文件 baseapi.cpp）：

```
 if (tesseract_->ImageWidth() > MAX_INT16 ||
        tesseract_->ImageHeight() > MAX_INT16) {
      tprintf("Image too large: (%d, %d)\n",
              tesseract_->ImageWidth(), tesseract_->ImageHeight()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T01:52:22.813

超出 Tesseract 限制的不是文件大小，而是图像大小（尺寸）。我对 Tesseract 识别 16MB 图像没有任何问题。尝试调整图像大小或重新缩放图像，然后重试。

# c++ - 此代码生成段错误。我哪里出错了？

> ID：13373117
> 
> 赞同：0
> 
> 时间：2012-11-14T04:35:55.387
> 
> 标签：c++, strtok

此代码的目标是快速将一些数据从制表符分隔文件中的字段读入内存并对其进行排序。我发现当我运行这段代码时，我遇到了分段错误。我认为这与我对 strtok 的有限知识有关。我知道使用一些 c++ 函数来标记字符串会更容易，但是，我希望让这段代码尽可能快地运行。似乎大多数 c++ 代码都会让我不必要地为新对象分配空间。理想情况下，代码将在包含数百万行的文件上运行。所以，它需要快速。

```
 #include <stdlib.h>
    #include <stdio.h>

    #include <string>
    #include <iostream>
    #include <vector>
    #include <algorithm>

    using namespace std;

    class Node
    {
      public:
      string name;
      int position1;
      int position2;
      string desc;
      float value;

      bool operator<(const Node& T) const;
    };

    bool Node::operator<(const Node &T) const
    {
      int result;
      result = name.compare(T.name);
      if (result !=0) return(result);

      if (position1 != T.position1) return(position1 < T.position1);

      if (position2 != T.position2) return(position2 < T.position2);

      return(false);

    }

    class NodeList
    {
      public:
      vector<Node> nodes;
    };

    int main(void)
    {
      string filename = "table.txt";
      FILE* infile = fopen(filename.c_str(), "r");

      int buflen = 1000;
      char buffer[buflen];

      NodeList K;
      Node T;

      while(fgets(buffer,buflen,infile) != NULL)
      {
         cout<< buffer << endl;

         T.name      = string(strtok(buffer, "\t\n"));
         T.position1 = atoi  (strtok(NULL  , "\t\n"));
         T.position2 = atoi  (strtok(NULL  , "\t\n"));
         T.desc      = string(strtok(NULL  , "\t\n"));
         T.value = atof  (strtok(NULL  , "\t\n"));

         K.nodes.push_back(T);
      }

      sort(K.nodes.begin(),K.nodes.end());

      return(0);

} 
```

编辑：段错误发生在排序命令中。如果没有 sort 命令，代码将正常运行。编辑以考虑评论。这是调试器的输出：

```
Program received signal EXC_BAD_ACCESS, Could not access memory.
Reason: KERN_INVALID_ADDRESS at address: 0xffffffffffffffe8 0x00007fff83a078bb in std::string::compare ()
(gdb) bt
#0  0x00007fff83a078bb in std::string::compare ()
#1  0x0000000100001333 in Node::operator< (this=0x7fff5fbfeef0, T=@0x1001fffe0) at test.cpp:27
#2  0x000000010000274e in std::__unguarded_linear_insert<__gnu_cxx::__normal_iterator<Node*, std::vector<Node, std::allocator<Node> > >, Node> (__last={_M_current = 0x100200000}, __val=@0x7fff5fbfeef0) at stl_algo.h:2309
#3  0x0000000100003f28 in std::__unguarded_insertion_sort<__gnu_cxx::__normal_iterator<Node*, std::vector<Node, std::allocator<Node> > > > (__first={_M_current = 0x100200200}, __last={_M_current = 0x1002581e0}) at stl_algo.h:2406
#4  0x000000010000437b in std::__final_insertion_sort<__gnu_cxx::__normal_iterator<Node*, std::vector<Node, std::allocator<Node> > > > (__first={_M_current = 0x100200000}, __last={_M_current = 0x1002581e0}) at stl_algo.h:2439
#5  0x0000000100004422 in std::sort<__gnu_cxx::__normal_iterator<Node*, std::vector<Node, std::allocator<Node> > > > (__first={_M_current = 0x100200000}, __last={_M_current = 0x1002581e0}) at stl_algo.h:2831
#6  0x00000001000019e8 in main () at test.cpp:76 
```

如果我上一层并查看这些值，我会得到：

```
(gdb) print T
$1 = (const Node &) @0x1001fffe0: {
  name = {
    _M_dataplus = {
      <std::allocator<char>> = {
        <__gnu_cxx::new_allocator<char>> = {<No data fields>}, <No data fields>},
      members of std::basic_string<char,std::char_traits<char>,std::allocator<char> >::_Alloc_hider:
      _M_p = 0x0
    }
  },
  position1 = 0,
  position2 = 0,
  desc = {
    _M_dataplus = {
      <std::allocator<char>> = {
        <__gnu_cxx::new_allocator<char>> = {<No data fields>}, <No data fields>},
      members of std::basic_string<char,std::char_traits<char>,std::allocator<char> >::_Alloc_hider:
      _M_p = 0x0
    }
  },
  value = 0
} 
```

this.name 等的值看起来像是来自文件，但无论与它进行比较的值都是 0 还是 NULL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T04:46:47.503

用 编译`g++ -Wall -g`，我看到你需要包含`string.h`get ，如果前面的陈述都不正确`strtok`，你`operator<`需要返回一些东西。`if`在那之后...

1.  你没有检查 的返回值`fopen`，所以我发现的第一个段错误是当我没有创建一个`table.txt`来测试时。

2.  你没有检查`strtok`任何一个的返回值，所以如果不存在匹配的列，那么你可以传递`NULL`给`atoi`，并在那里得到一个段错误。

当您的程序崩溃时，您需要使用`gdb`'`bt`命令来找出是哪一行触发了崩溃。

# html - 文本图像文本内联 HTML CSS

> ID：13373119
> 
> 赞同：2
> 
> 时间：2012-11-14T04:35:59.323
> 
> 标签：html, css

有文本然后是带有文本的图像的最佳方式是什么？如果可能的话，我不想使用表格，但我遇到了项目打破自己的行的问题。

到目前为止，以下是我的代码和 css：

```
<div id="header_number">
    <h2 class="phone_title">Call Us Today!</h2>
    <img src="images/phone_icon.jpg" alt="Call us Today"/>
    <h2 class="large_num">1-800-555-9999</h2>
</div> 
```

CSS：

```
h2.phone_title{font: 13px arial;Color:#013173;text-align:left;}
h2.large_num{font:29px arial;Color:#013173;text-align:left;}
#header_number{float:right;height:60px;width:332px;display:inline;} 
```

我认为`display:inline;`容器中的 div (header_number) 会将所有内容排成一行，但这不起作用。如果需要，我可以添加一个类，`img`如果这是我唯一的选择，则将剩下的所有内容浮动。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T04:42:35.170

现在**定义**你的**一些元素** `display:inline-block;` **或** `vertical-align:top`

**像这样**

```
h2.phone_title, h2.large_num, img
{display:inline-block;vertical-align:top;
margin:0;
} 
```

现在查看***[现场演示](http://tinkerbin.com/qOqxX8i1)***

# php - 无论是否设置了值，都在 PHP 中创建变量

> ID：13373120
> 
> 赞同：0
> 
> 时间：2012-11-14T04:36:13.943
> 
> 标签：php

如果我要创建这个变量：

```
$example = $_GET['test']; 
```

`$_GET['test']`如果未设置，我会收到此错误消息：

```
Notice: Undefined variable... 
```

如何创建这样的变量（无需使用`if`语句等）而不必看到此错误消息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T04:38:25.590

```
$example = isset($_GET['test']) ? $_GET['test'] : NULL; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T04:40:09.277

通常，我会执行以下操作：

```
function get($key, $default = null) {
   return isset($_GET[$key]) ? trim($_GET[$key]) : $default;
}

$example = get('test'); 
```

# google-chrome-extension - chrome.commands -- 是否支持更多字符？

> ID：13373122
> 
> 赞同：1
> 
> 时间：2012-11-14T04:36:38.347
> 
> 标签：google-chrome-extension

我正在玩弄[chrome.commands](http://developer.chrome.com/apps/commands.html)功能，我注意到确实没有很多可行的键绑定。

我想知道是否会支持更广泛的字符？目前我只能做AZ，但如果我能做“>”“<”，箭头键等等……基本上是整个jQuery键码集。

# sql - 克隆同一张表中的记录

> ID：13373124
> 
> 赞同：2
> 
> 时间：2012-11-14T04:36:52.333
> 
> 标签：sql, sql-server-2008, insert

[这个](https://stackoverflow.com/a/149792/1077789)答案接近我需要的，但我的情况略有不同。我有一个如下所示的 SQL 表。

```
+------+----------+-----------+
|  aid |  afname  |  alname   |
+------+----------+-----------+
|  01  |  John    |  Doe      |
|  02  |  Stephen |  Williams |
|  03  |  Jane    |  Doe      |
|  04  |  Peter   |  Brown    |
|  05  |          |           |
+------+----------+-----------+ 
```

现在我只需要从具有**02**`afname`的行中克隆/复制and`alname`字段并将其插入到具有**05**的行中。 **`aid``aid`**

 ****这是我尝试过的查询，但它引发了语法错误。

```
INSERT INTO table1(afname, alname) 
WHERE aid = '05'
SELECT afname, alname
FROM table1
WHERE aid = '02' 
```

谁能告诉我一种方法来实现这一点？

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T04:39:17.830

如果您没有`aid`= '05' 的行：

```
INSERT INTO table1(aid,afname, alname)
SELECT '05', afname, alname
FROM table1
WHERE aid = '02' 
```

如果你有一行`aid`= '05' 并且你想更新它：

```
update t2
set t2.afname = t1.afname, t2.alname = t1.alname
from table1 t1 join table1 t2 on t1.aid = '02' and t2.aid = '05' 
```****

# jquery-mobile - 使用 json api 制作一个简单的 jquery 移动应用程序

> ID：13373129
> 
> 赞同：0
> 
> 时间：2012-11-14T04:37:17.357
> 
> 标签：jquery-mobile, jsonp

我有一个提供 json 的远程服务器，实现显示这些 json 数据的 jquery 移动应用程序的最简单方法是什么？我想要一个关于我应该做什么的大图描述，这样我就可以自己找出细节。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T07:30:09.563

If you want to serve the mobile website on your own site, [JSON](http://api.jquery.com/jQuery.getJSON/) would be enough. If you want to use [PhoneGap](http://www.phonegap.com/) to make it a mobile app, you should use [JSONP](http://api.jquery.com/jQuery.getJSON/#jsonp) to get your data.

You could use a [template system](https://github.com/jquery/jquery-tmpl) were you could drop your JSON data. In combination with `$.mobile.changePage($.tmpl( "<li>${Name}</li>", { "Name" : "John Doe" }));` a new page can be shown.

# java - 未在 JRE 1.7 上为 NetBeans 7.2 注册自定义属性编辑器

> ID：13373135
> 
> 赞同：0
> 
> 时间：2012-11-14T04:37:46.403
> 
> 标签：java, java-7, slf4j, netbeans-platform

我有一个大型桌面 Java 应用程序正在从 JRE 1.6 迁移到 JRE 1.7。该应用程序使用用于 GUI 的 NetBeans API 和带有 Log4J 后端的 SLF4J API。该应用程序有两种部署方法，一个独立的应用程序（由 Ant 或 Launch4j exe 运行）或通过简单的自定义 HTTP 服务器（Jetty 和 JNLP servlet）进行 Web 启动。

该应用程序有几个 NetBeans ModuleInstall 组件，它们在启动时将属性编辑器添加到 Java PropertyEditorManager 搜索路径中。例如

```
ArrayList<String> editorPaths = new ArrayList<String>();
editorPaths.add(LocationEditor.class.getPackage().getName());
editorPaths.addAll(Arrays.asList(PropertyEditorManager.getEditorSearchPath()));
PropertyEditorManager.setEditorSearchPath(editorPaths.toArray(new String[editorPaths.size()])); 
```

当我迁移到 Java 1.7 (u9) 时，这些编辑器不再出现在应用程序中，无论是独立部署还是 Web 启动部署。应用程序启动良好，从 Eclipse 启动时可以访问编辑器。想知道独立失败的原因，我添加了一些日志记录语句来报告搜索路径并通过 Ant 启动脚本设置*log4j.configuration属性。*编辑器现在可用。然后我启动了 .exe（它不接受命令行参数，因此未设置 log4j 配置），编辑器又消失了。

因此，差异化因素似乎是设置 log4j.configuration 参数。我更改了构建，因此standlong Ant 和 .exe 引用了它并且它们可以工作。虽然网络启动并没有传递这个值（它在代码内部加载）并且仍然无法找到编辑器。我还从 Eclipse 运行命令中删除了 log4j 设置，编辑器再次消失。

我尝试专门针对类型注册，而不是使用搜索路径，但仍然没有成功。我使用搜索路径作为一个可选的覆盖另一个模块编辑器，但我不知道模块启动顺序，因此一个将其路径附加到查找的开头，而其他的则附加到末尾。

我还尝试删除所有 SLF4J 到 Log4J 的映射并改用 SLF4J-Simple。这没什么区别。重新添加参数会使代码再次工作。spring-aspects 依赖项引入了一个 Log4J 引用。

我有一个独立的工作解决方案，我确信我可以让这个新技巧适用于 webstart，但这听起来像是一个糟糕的黑客让事情正常工作。我宁愿找出编辑失踪的原因。不会报告任何异常，并且从所有 ModuleInstall 对象中删除日志不会执行任何操作。所有代码仍在执行，这包括 ModuleInstall 执行的其他功能，因此我知道它们正在运行。

我正在使用 NetBeans RELEASE72，其他依赖项是：

```
<dependency>
  <groupId>org.slf4j</groupId>
  <artifactId>slf4j-api</artifactId>
  <version>1.7.2</version>
</dependency>
<dependency>
  <groupId>org.slf4j</groupId>
  <artifactId>slf4j-log4j12</artifactId>
  <version>1.7.2</version>
</dependency> 
```

**更新 1**

我已将问题追溯到我们的自定义日志记录设置。当此部分被删除并使用简单的记录器时，问题没有发生。当这个自定义配置被删除并且 slf4j-log4j12 再次连接时，我仍然得到了属性编辑器。但是，当我再次启用自定义日志记录配置时，编辑器失败了。

即使用户未指定任何内容，自定义日志记录配置也可确保我们进行日志记录设置。还有一些其他用户激活的奇怪的启动过程，在编织过程之后才能激活日志记录。我怀疑自定义日志记录设置可能不适用于 Java 1.7，或者与替换默认日志记录处理程序重定向到我们的自定义日志记录有关。

无论如何，它看起来像是一个内部混乱，互联网无能为力。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T11:36:27.167

我已经离开了这个问题，最后又回到了它。问题是 PropertyEditorManager 现在不再是全局单例，而是线程本地单例。搜索路径在 JDK 1.7 的 ThreadLocalContext 中注册，大概是为了防止线程同步问题。然而，NetBeans ModuleInstall 在主线程上执行，然后在 AWT 线程上读取属性读取器。这意味着 AWT 线程没有找到任何属性编辑器。

作为修复，我只是使用 SwingUtilities.invokeLater() 来注册属性编辑器路径。

我不知道是什么导致其他症状出现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-31T13:43:14.530

我一直在追踪一个类似的问题；当我在 java 1.7.0_25 下运行我的 NetBeans RCP 7.3 应用程序时 `org.netbeans.beaninfo.editors.DateEditor`，我的 GUI 属性表不再可用。

正如你所建议的，我通过将此代码包含到我的 GUI 模块的安装程序中来解决这个问题

```
SwingUtilities.invokeLater(new Runnable()
{
    @Override
    public void run() {
        NodeOp.registerPropertyEditors();
    }
}); 
```

这暂时解决了问题，但感觉有点hacky......

# ios - 如何在 ios 应用程序中直接在屏幕上显示消息，如铃声/静音显示

> ID：13373136
> 
> 赞同：0
> 
> 时间：2012-11-14T04:37:58.743
> 
> 标签：ios

我想在我的应用程序中显示类似工具提示的消息，它应该显示在项目旁边和屏幕上。当我们切换到另一个月份时，就像在 iphone 的提醒应用程序中一样，或者更像是 iphone 或 ipad 中的铃声音量或静音指示器。

是否可以显示这样的消息并在超时后隐藏它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T05:22:44.370

试试[TapkuLibrary](https://github.com/devinross/tapkulibrary)；它包括一个名为的类`TKAlertView`，它似乎正是这样做的。

# ios - iOS 加速度计和空间导航？

> ID：13373142
> 
> 赞同：2
> 
> 时间：2012-11-14T04:38:26.487
> 
> 标签：ios, web-applications, navigation, accelerometer

我正在尝试专门为 iOS 构建一个依赖加速度计数据进行导航的 Web 应用程序。（理论上您可以在空间上（从页面到页面）移动的站点。）

例如，向前迈出一步（或移动设备）会将您带到一个网页或 URL，而向左、向右或向后将带到他们自己的唯一 URL。关于如何实现这一点的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T08:29:58.817

我花了很多时间来研究我正在写的一个实验。

问题是很难/不可能从您的设备中获得准确的（甚至是近似的）空间位置。

问题是该设备测量加速度，需要进行几次计算才能到达位置。

您可以使用此值来测量相对于起点的位置，但下一个问题是加速度计接收到的噪声。

我可以让它工作的最接近的方法是消除加速度计的噪音，然后计算回去尝试确定位置。但由于噪音，我发现该设备会一直认为它在朝一个方向移动。

经过几天尝试不同的方法后，我确定如果没有设备的外部跟踪，这确实是不可能的。

您可以做的是使用设备的方向进行导航。即向前倾斜，向后倾斜，向左倾斜，向右倾斜做不同的事情。

# ios - 在未过滤的 NSMutableArray 中查找已过滤的 NSMutableArray（来自 searchResultsTableView）中选定行的等效索引

> ID：13373144
> 
> 赞同：1
> 
> 时间：2012-11-14T04:38:40.720
> 
> 标签：ios, nsmutablearray

如果我的问题不清楚，因为我是 iOS 编程（以及一般编程）的新手，请提前道歉。

现在，我有一个`UITableView`按字母顺序显示`NSMutableArray`用户朋友姓名的方法，例如：

```
friends: { @"Andy",@"Anand",@"Bob",@"Cat" }; 
```

我有另一个`NSMutableArray`保存用户朋友的匹配年龄，用户从未见过但在用户选择朋友的名字后传递给前一个视图控制器的东西。这个年龄数组类似于：

```
friendsAges: {@"25",@"23",@"30",@"22"}; 
```

我的问题是，如果我在朋友的名字中添加了一个`searchBar`，`UITableview`如果用户从过滤后的数组中选择一个名字，我如何确保将相应的年龄对象发送回前一个视图控制器`searchResultsTableView`？

例如，如果没有 searchBar，选择“Bob”也会将“30”发送到前一个控制器。但是，如果用户输入“bo”并且过滤后只显示 Bob `searchResultsTableView`，那么年龄“25”将被发送到前一个控制器 b/c，它是第一个索引。

这是我的错误代码：

```
if (tableView == self.searchDisplayController.searchResultsTableView) {

    NSString *theFriend = [_filteredFriendArray objectAtIndex:indexPath.row];

    // not sure what I should use instead for the _filteredFriendArray below
    NSString *theFriendAge = [_filteredFriendArray objectAtIndex:indexPath.row];

    [self.delegate friendPickerViewController:self
                              didSelectFriend:theFriend
                    didSelectFriendAge:theFriendAge];

} else { //if not using search bar and seeing filtered search results
    NSString *theFriend = [friends objectAtIndex:indexPath.row];
    NSString *theFriendAge = [friendsAge objectAtIndex:indexPath.row];

    [self.delegate friendPickerViewController:self
                              didSelectFriend:theFriend
                    didSelectFriendAge:theFriendAge];
} 
```

我觉得使用 NSDictionary 可能更容易，而不是尝试将过滤后的搜索视图的索引匹配回主数组，但我不确定如何最好地做到这一点。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T05:36:22.357

你是对的，使用 NSDictionary 更容易。每个人都可以用一个 NSDictionary 来表示，例如 @{@"name":@"Stephen Hawking", @"age":70}。使用 [personDict objectForKey:@"name"] 填充您的朋友表视图，并在选择时获取 [person objectForKey:@"age"] 的值并将其传递回前一个视图控制器。

# xml - 关于 XSD 元素无效（XML Schema）

> ID：13373145
> 
> 赞同：0
> 
> 时间：2012-11-14T04:38:42.383
> 
> 标签：xml, xsd

我有一个关于 XSD 格式的问题。
例如，我有一个 XML 文档

```
<?xml version="1.0" encoding="utf-8"?>
<feed xmlns:media="http://search.yahoo.com/mrss/">
  <entry>
    <title>Examples</title>
    <id>1</id>
    <media:group>
      <media:thumbnail url="http://www.abc.com/image.jpg" />
      <trailer url="http://www.abc.com" />
      <info url="http://www.abc.com/xsd/info.jpg" />
      <media:description>1</media:description>
      <media:content name="video.mp4" type="video" duration="400" repeat="true"/>
    </media:group>
    <menu>
      <item uri="localhost:8080/xyzt" />
    </menu>
  </entry>
</feed> 
```

然后，我使用网站[http://www.xmlforasp.net/codebank/system_xml_schema/buildschema/buildxmlschema.aspx](http://www.xmlforasp.net/codebank/system_xml_schema/buildschema/buildxmlschema.aspx)自动转换为 XSD 文件（你可以试试）。但是，当我使用网站[http://www.xmlforasp.net/schemavalidator.aspx](http://www.xmlforasp.net/schemavalidator.aspx)来检查 XSD 验证器时，当时有一个关于 XSD 格式化问题的
问题：

> 'name' 属性值 'media:group' 无效：'':' 字符，十六进制值 0x3A，位于名称中的第 5 位，不能包含在名称中。'。

```
 <xsd:element name="entry">
      <xsd:complexType>
        <xsd:sequence>
          <xsd:element name="title" type="xsd:string" />
          <xsd:element name="id" type="xsd:int" />
          <xsd:element name="media:group">             <!-- here -->
            <xsd:complexType>
              <xsd:sequence> 
```

我不明白...为什么 xsd:element 的名称不能包含“：”字符？如果上述问题是正确的，我该如何解决。

如果你知道，请帮助我。
非常感谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T13:19:53.217

“：”之前的文本称为 a `namespace`。例如，在“media:group”中，命名空间是“media”。

`<xsd:element name="media:group">`要在命名空间中定义一个元素，你不能像你期望的那样说它。

相反，您必须将其指定`targetNamespace`为整个架构的 ，然后该架构中定义的*所有*元素都将具有该命名空间。像这样（这`qualified`部分意味着您的 XML 需要使用命名空间，就像您的 XML 使用“媒体”一样）：

```
<xsd:schema targetNamespace="http://search.yahoo.com/mrss/"
            elementFormDefault="qualified" ...>
  ...
  <xsd:element name="group"> 
```

您还可以通过[省略](http://www.w3.org/TR/xmlschema-0/#UndeclaredTNS) `targetNamespace`：

```
<xsd:schema ...>
  ...
  <xsd:element name="entry"> 
```

注意：要在两个命名空间中定义元素，您需要两个模式。通常，您可以将一个模式组合`importing`成另一个模式。但是您的 XML 存在一个问题：对命名空间的引用在 contains 中是循环的`<entry>`，`<media:group>`其中 contains `<trailer>`。

**抱歉：我无法解决这个问题。**我最好的尝试使用了第三种模式（定义`<trailer>`），但这会崩溃`xmllint`......其他人可以解决它吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T08:29:27.107

尝试不同的验证器。我对这个站点一无所知，但从你的证据来看，他们正在使用非命名空间感知 XML 解析器来解析 XML。这是一件非常奇怪的事情。

# jquery - 每次调用时如何强制 jQuery Validation 重新验证整个表单？

> ID：13373148
> 
> 赞同：1
> 
> 时间：2012-11-14T04:38:54.197
> 
> 标签：jquery, validation, clear-cache

我即将实现一个相当庞大的表单的验证。在某些情况下，我必须比较（条件）不同的输入值来验证。

**给出以下示例：**

```
function frmDealValidation () {
   var validator = $("#frmDeal").validate({
      rules: {
        product_value: {
             required: true,
             number: true,
             min: 0.01,
         }
         price: {
             required: true,
             number: true,
             min: 0.01,
             max: ($("#show_value1").is(':checked')) ? $("#product_value").val() : 1000000
         }
      },
      submitHandler: function(form) {
          form.submit();
      }
  });
} 
```

正如您在上面看到的，max-check 取决于选中的单选按钮并返回一个值。这意味着价格不允许大于实际的product_value。

假设填写的价格大于 product_value，则在第一次提交表单后验证工作正常。

现在我可以更改输入中的值以纠正错误，或者如果我很愚蠢，我会再次用无效值填充它们并点击提交按钮（调用`frmDealValidation ()`）。

不幸的是，验证没有更新值，`$("#product_value").val()`并且似乎使用了第一次提交的缓存值。

我尝试过`validator.resetForm();`，因为我认为它会强制验证重新验证整个表单并使用更新的值，但没有成功！

我可以寻求帮助吗？

干杯，

诺伯特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T05:06:19.887

我会这样：

```
$.validator.methods.priceMaxValidator = function(value, element, param) {
    return ($("#show_value1").is(':checked')) 
        ? $("#product_value").val() : param.max
} 
```

然后在验证器设置中：

```
price: {
    required: true,
    number: true,
    min: 0.01,
    priceMaxValidator: { max: 100000 }
} 
```

这种方式验证插件将调用`priceMaxValidator`每个价格验证，并且每次都会评估验证表达式。你不需要`resetForm()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T22:36:31.373

谢谢nrodic，

你给了我我需要的提示:) 因为我没有按照你的建议来工作，所以我采取了类似的方式来让它工作。

这是我现在使用的代码，它正在使用`addMethod()`：

```
$.validator.addMethod("checkIfLessThanValue", function(value, element, params) {
    if(params) {
        return this.optional(element) || (($("#show_value1").is(':checked') && ($("#price").val() > $("#deal_value").val()))) ? false : true;
    } else {
        return true;
    }
}, $.format("The Price is greater than Deal Value")); 
```

这是我使用该方法的规则：

```
price: {
    required: true,
    number: true,
    min: 0.01,
    checkIfLessThanValue: true
} 
```

谢谢你的帮助！！

诺伯特

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T02:26:13.880

对不起，我刚刚在以前的解决方案中发现了一个错误，只是想让你知道：

我们想与浮点值进行比较，但目前我们只比较 STRINGS，这是修复：我需要使用`parseFloat()`：

```
$.validator.addMethod("checkIfLessThanValue", function(value, element, params) {
    if(params) {
        return this.optional(element) || (($("#show_value1").is(':checked') && (parseFloat($("#price").val()) > parseFloat($("#deal_value").val())))) ? false : true;
    } else {
        return true;
    }
}, $.format("The Price is greater than Deal Value")); 
```

干杯

# jquery - 给 jQuery 命名空间起别名

> ID：13373150
> 
> 赞同：2
> 
> 时间：2012-11-14T04:39:08.017
> 
> 标签：jquery

根据jQuery在线文档，如果我们想避免命名冲突，我们可以编写如下脚本：

```
jQuery(document).ready(function($) {
  // Code using $ as usual goes here.
}); 
```

虽然我觉得以下方法更容易理解：

```
(function($){ //function to create private scope with $ parameter
    //private scope and using $ without worry of conflict
})(jQuery); //invoke nameless function and pass it the jQuery object 
```

第一种方法对我来说似乎更难消费。我的猜测是（使用第一种方法）稍后将在后台调用匿名函数，它将**jQuery**作为其参数。

但是我不确定我的想法是否正确。有人可以帮我吗？谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T04:45:32.243

前者与后者不同。您不应该尝试将它们等同起来：

*   示例 #2 ( `function($) ...`) 是一个普通的 JavaScript 构造。它是一个匿名函数，立即`jQuery`作为参数和`$`参数调用（解析为`jQuery`传入的参数）。

*   示例 #1 是`jQuery`特定的。 `jQuery`的内部工作原理是这样的，因此传递给`document.ready`函数的第一个参数就是`jQuery`它本身，您可以随意命名它（在本例中为`$`）。注意`jQuery(document).ready`也有自己独特的功能！它的工作方式可能与示例 #2 不同

我建议您将所有 JavaScript 都放在`</body>`HTML 之前。在这种情况下，上述两个示例应该以或多或少相同的方式工作。

正如@elclanrs 所指出的，您也可以使用`jQuery.noConflict()`. 返回值将作为新`jQuery`变量。有些人喜欢用`$$`.

# c - C 中的命名共享内存问题

> ID：13373154
> 
> 赞同：1
> 
> 时间：2012-11-14T04:39:30.010
> 
> 标签：c, shared-memory, memory-mapped-files

我正在编写一个程序，它`unsigned int`使用 5 个线程查找最高 4294967295 ( ) 的素数。每个线程获取一个数字范围以使用该`IsPrime()`函数进行检查（我从代码中删除了该函数，因为它不是代码中断的地方），如果该数字是素数，它将将该数字放在一个命名的共享内存文件中，其大小500 MB。为了确保程序正常工作，我从小范围的数字开始：0 到 25。所以每个线程都有 5 个数字进行检查并将其放入映射文件中。这是代码：

```
#define _BSD_SOURCE

#include <sys/mman.h>
#include <sys/stat.h>
#include <fcntl.h>
#include <sys/types.h>
#include <stdio.h>
#include <stdlib.h>
#include <errno.h>
#include <math.h>
#include <unistd.h>
#include <pthread.h>

/* The program is using 5 threads to find prime numbers.
therefore, each thread is responsible for finding the numbers
with in a specific range: unsigned int / 5
*/

#define THREAD_1_BEGIN 0
#define THREAD_1_END 5

#define THREAD_2_BEGIN 6
#define THREAD_2_END 10

#define THREAD_3_BEGIN 11
#define THREAD_3_END 15

#define THREAD_4_BEGIN 16
#define THREAD_4_END 20

#define THREAD_5_BEGIN 21
#define THREAD_5_END 25

// The shared variable to hold the total number of primes.
unsigned int totalPrimes = 0;

// Shared memory variables
unsigned char *bitmap;
unsigned int bitmap_size = 4294967295 / 8 + 1; // size of unsigned int
unsigned int *prime_numbers;
unsigned int object_size = 1024 * 1024 * 500; // 500 MB
void *addr;

// Threads
pthread_t threads[5];
pthread_mutex_t total_Mutex;

void *ThreadWorker(void *threadId);
int IsPrime(unsigned int number);
void *mount_shmem(char *path, unsigned int object_size); 

int main(int argc, char **argv)
{
  int i;
  void *status;

  // Set the threads attributes and mutex
  pthread_attr_t attr;

  pthread_mutex_init(&total_Mutex, NULL);

  pthread_attr_init(&attr);
  pthread_attr_setdetachstate(&attr, PTHREAD_CREATE_JOINABLE);

  // Set the shared memory
  addr = mount_shmem("threadedshm", object_size);
  bitmap = addr;

  prime_numbers = (unsigned int*)(bitmap + bitmap_size);

  for(i = 0; i<5; i++){
    pthread_create(&threads[i], &attr, ThreadWorker, (void *)i);
  }

  pthread_attr_destroy(&attr);

  // Wait for each thread
  for(i = 0; i<5; i++){
    pthread_join(threads[i], &status);
  }

  printf("\n TOTAL: %u \n", totalPrimes);

  pthread_mutex_destroy(&total_Mutex);
  pthread_exit(NULL);

}

void *ThreadWorker(void *threadId)
{
  int pos = (int) threadId;
  unsigned int t1;
  unsigned int t2;
  unsigned int t3;
  unsigned int t4;
  unsigned int t5;

  if(pos == 0){
    for(t1 = THREAD_1_BEGIN; t1 <= THREAD_1_END; t1++){
      if(IsPrime(t1)){
        printf("Thread 1: %u\n", t1);

        // put it in the shared memory file
        prime_numbers[totalPrimes] = t1;

        // Increment the counter by 1
        pthread_mutex_lock(&total_Mutex);
        totalPrimes++;
        pthread_mutex_unlock(&total_Mutex);
      }
    } 
  }else if(pos == 1){
    for(t2 = THREAD_2_BEGIN; t2 <= THREAD_2_END; t2++){
      if(IsPrime(t2)){
        printf("Thread 2: %u\n", t2);

        // put it in the shared memory file
        prime_numbers[totalPrimes] = t2;

        // Increment the counter by 1
        pthread_mutex_lock(&total_Mutex);
        totalPrimes++;
        pthread_mutex_unlock(&total_Mutex);
      }
    } 
  }else if(pos == 2){
    for(t3 = THREAD_3_BEGIN; t3 <= THREAD_3_END; t3++){
      if(IsPrime(t3)){
        printf("Thread 3: %u\n", t3);

        // put it in the shared memory file
        prime_numbers[totalPrimes] = t3;

        // Increment the counter by 1
        pthread_mutex_lock(&total_Mutex);
        totalPrimes++;
        pthread_mutex_unlock(&total_Mutex);
      }
    } 
  }else if(pos == 3){
    for(t4 = THREAD_4_BEGIN; t4 <= THREAD_4_END; t4++){
      if(IsPrime(t4)){
        printf("Thread 4: %u\n", t4);

        // put it in the shared memory file
        prime_numbers[totalPrimes] = t4;

        // Increment the counter by 1
        pthread_mutex_lock(&total_Mutex);
        totalPrimes++;
        pthread_mutex_unlock(&total_Mutex);
        printf("Thread 4: %u\n", t4);

        // put it in the shared memory file
        prime_numbers[totalPrimes] = t4;

        // Increment the counter by 1
        pthread_mutex_lock(&total_Mutex);
        totalPrimes++;
        pthread_mutex_unlock(&total_Mutex);
      }
    } 
  }else if(pos == 4){
    for(t5 = THREAD_5_BEGIN; t5 <= THREAD_5_END; t5++){
      if(IsPrime(t5)){
        printf("Thread 5: %u\n", t5);

        // put it in the shared memory file
        prime_numbers[totalPrimes] = t5;

        // Increment the counter by 1
        pthread_mutex_lock(&total_Mutex);
        totalPrimes++;
        pthread_mutex_unlock(&total_Mutex);
      }
    } 
  }

  pthread_exit((void*) 0);
}

void *mount_shmem(char *path, unsigned int object_size){
    int shmem_fd;
    void *addr;

    // create and resize the file
    shmem_fd = shm_open(path, O_CREAT | O_RDWR, S_IRUSR | S_IWUSR);
    if (shmem_fd == -1){
        fprintf(stdout, "failed to open shared memory object\n");
        exit(EXIT_FAILURE);
    }
    // resize it to 500 MB
    if (ftruncate(shmem_fd, object_size) == -1){
        fprintf(stdout, "failed to resize shared memory object\n");
        exit(EXIT_FAILURE);     
    }

    addr = mmap(NULL, object_size, PROT_READ | PROT_WRITE, MAP_SHARED, shmem_fd, 0);
    if (addr == MAP_FAILED){
        fprintf(stdout, "failed to map shared memory object\n");
        exit(EXIT_FAILURE);
    }

    return addr;
} 
```

但是，在将数字插入数组 ( `prime_numbers[totalPrimes] = t1;`) 时，我遇到了分段错误错误。启动共享内存文件时，我无法弄清楚我做错了什么。我尝试只使用一个线程，因为我怀疑这可能是一个互斥问题，多个线程尝试同时更新文件，但这不是问题（我知道我最终会需要互斥量或信号量）。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T04:52:55.873

这一行：

```
prime_numbers = (unsigned int*)(bitmap + bitmap_size); 
```

设置`prime_numbers`为远远超出所指向的共享内存区域的范围`bitmap`（这是导致崩溃的原因）。

你也有一个竞争条件，在这样的代码中：

```
 // put it in the shared memory file
    prime_numbers[totalPrimes] = t1;

    // Increment the counter by 1
    pthread_mutex_lock(&total_Mutex);
    totalPrimes++;
    pthread_mutex_unlock(&total_Mutex); 
```

由于您在锁外读取`totalPrimes`以确定要写入的数组索引，因此两个线程可以写入相同的数组索引，从而导致更新丢失。您可以通过在执行增量时获取要写入的数组索引来解决此问题：

```
 // Increment the counter by 1
    pthread_mutex_lock(&total_Mutex);
    thisPrime = totalPrimes++;
    pthread_mutex_unlock(&total_Mutex);

    // put it in the shared memory file
    prime_numbers[thisPrime] = t1; 
```

# php - 如何使用 php 在 mysql 中生成下一个自动增量编号？

> ID：13373157
> 
> 赞同：1
> 
> 时间：2012-11-14T04:39:44.557
> 
> 标签：php, mysql

我试图在 mysql 中使用 php 获取下一个自动增量编号。我试过这样：

```
<?
$q=mysql_query("SELECT * FROM `users`");
$next_auto_inc=mysql_num_rows($q)+1;
?> 
```

但是，当任何行被删除时，这不起作用。我希望你明白我的意思。我怎样才能使用 php 做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T04:40:22.840

你不能这样做来获取表数据。您必须获取表状态才能使用 php.ini 获取自动增量编号。而且，您可以执行以下操作：

```
$q = mysql_query("SHOW TABLE STATUS LIKE 'test'");
$row = mysql_fetch_assoc($q);
$next_increment = $row['Auto_increment'];
echo "next increment number: [$next_increment]"; 
```

希望这可以帮助 ：）

[[来源](http://blog.eprakash.info/2011/10/get-next-auto-increment-number-in-mysql.html)]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T05:36:55.363

假设您将`user_id`列作为主键，您也可以尝试以下操作：

```
$q = mysql_query('SELECT MAX(user_id) as user_id from `users`');
$row = mysql_fetch_assoc($q);
$next_auto_inc = $row['user_id'] + 1; 
```

# vim - 病原体#infect 不更新运行时路径

> ID：13373158
> 
> 赞同：1
> 
> 时间：2012-11-14T04:39:58.237
> 
> 标签：vim

我已经开始在 Windows 上使用 gvim 使用 Pathogen.vim，遵循 Tim Pope 在他的 github 存储库中的设置指南[。](https://github.com/tpope/vim-pathogen)

但是，我遇到了一个问题，pathogen#infect() 似乎没有修改运行时路径（如`:echo &runtimepath`在 gvim 中运行所见）。

我想出的简单测试用例_vimrc如下。请注意，病原体被加载得很好。

```
"Set a base directory.
let $BASE_DIR='H:\development\github\vimrc'

"Source pathogen since it's not in the normal autoload directory.
source $BASE_DIR\autoload\pathogen.vim

"Start up pathogen
call pathogen#infect()
"call pathogen#infect('$BASE_DIR\functions') 
```

在没有参数的情况下运行`pathogen#infect()`（应该在 vimfiles 目录下添加 bundles 目录）或指定包含文件的目录都不起作用。

用替换`pathogen#infect()`调用`pathogen#runtime_prepend_subdirectories('$BASE_DIR\functions')`，这`pathogen#infect()`也无法更改运行时路径。

有什么我错过的想法吗？还有更多有用的信息吗？

我的存储库与非平凡示例在[这里。](https://github.com/trprice/vimrc)

***编辑***
除了在我感染的目录下创建目录，如 qqx 所述，我将这些目录重命名为插件和颜色，Vim 将自动从中加载 vim 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T04:57:43.860

`pathogen#infect()`不会将`bundle`目录或参数中命名的目录添加到`&runtimepath`，只添加该目录的子目录。在您的 github 存储库中，vimrc 文件使用`functions`目录作为参数，但该目录中只有文件，没有子目录。

# asp.net - 选择具有多个 LIKE 的命令

> ID：13373159
> 
> 赞同：2
> 
> 时间：2012-11-14T04:40:03.463
> 
> 标签：asp.net, sql, search, select, gridview

**功能性**

用户在 textboxA 中输入文本。在数据库记录中搜索与用户输入相对应的 First Names AND Last Names。

**问题：**

看来我得到的结果只是搜索“名字”字段，而不是名字和姓氏字段

**例子：**

****搜索“Mike”返回：* ***

迈克·史密斯

迈克·琼斯

***搜索“琼斯”：***

迈克琼斯没有归还

**代码：**

```
Protected Sub button1_Click(ByVal sender As Object, ByVal e As EventArgs) Handles button1.Click

    If txtSearch.Text = "" Then

    Else

        Dim ConnString As String = System.Configuration.ConfigurationManager.ConnectionStrings("oakfratintdbConnectionString").ConnectionString
        Dim Conn As New SqlConnection(ConnString)
        Dim searchCMD As New SqlCommand("SELECT [FirstName], [LastName], [MidInitName], [NameSuffix], [NamePrefix], [DOB], [DOD], [BurialDate], [GeoDirection], [Space], [Lot], [Row], [IntermentSpec], [AddtlInfo] FROM [OFCInterments] WHERE ([FirstName] LIKE @FirstName)", Conn)
        Dim searchDT As DataTable = GetData(searchCMD)
        GridView1.DataSource = searchDT
        GridView1.DataBind()
    End If

End Sub 
```

**代码说明：**

txtSearch 是用户的搜索输入

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T04:42:58.787

改变

```
SELECT [FirstName], [LastName], [MidInitName], [NameSuffix], [NamePrefix], [DOB], 
[DOD], [BurialDate], [GeoDirection], [Space], [Lot], [Row], [IntermentSpec], 
[AddtlInfo] FROM [OFCInterments] WHERE ([FirstName] LIKE @FirstName) 
```

至

```
SELECT [FirstName], [LastName], [MidInitName], [NameSuffix], [NamePrefix], [DOB], 
[DOD], [BurialDate], [GeoDirection], [Space], [Lot], [Row], [IntermentSpec], 
[AddtlInfo] FROM [OFCInterments] WHERE ([FirstName] LIKE @FirstName or 
LastName like @LastName) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T05:46:08.277

下面是调整了 WHERE 子句的 SQL 查询，使您可以灵活地仅按名字、仅按姓氏或两者进行搜索。

```
SELECT [FirstName], [LastName], [MidInitName], [NameSuffix], [NamePrefix], [DOB], [DOD], [BurialDate], [GeoDirection], [Space], [Lot], [Row], [IntermentSpec], [AddtlInfo] FROM [OFCInterments] WHERE
    (@FirstName IS NULL OR [FirstName] LIKE @FirstName)
    AND (@LastName IS NULL OR [LastName] LIKE @LastName) 
```

通过这个查询，我假设如果用户搜索 FirstName: "Mike" 和 LastName: "Jones"，则搜索结果应该只包含 "Mike Jones"，而不是 "Mike Smith"、"Mike Jones" 和“保罗琼斯”。

请注意，如果您使用此方法，则需要确保在用户未提供标准值的情况下不要使用空字符串填充参数。或者，除了 null 之外，您还可以检查查询中的空字符串。

# sql-server-2008 - SQL Server - 插入后/插入 - 回滚

> ID：13373168
> 
> 赞同：11
> 
> 时间：2012-11-14T04:40:50.017
> 
> 标签：sql-server-2008

我有以下触发器：

```
 CREATE Trigger instructor_expertise on CourseSections
     After Insert
     As Begin
     ......

     If (Not Exists(Select AreaName From AreasOfInstructor Where (InstructorNo = @InstructorNo AND AreaName = @AreaName))) 
     Begin 
     RAISERROR('Course not in instructors expertise', 16, 1)
     rollback transaction  
     End
     GO 
```

我的问题是，“回滚事务”会删除该行吗？如果它是“For Insert”，那么“回滚事务”会在这种情况下删除该行吗？

谢谢！！！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-14T06:25:00.037

你的`INSERT`语句总是在一个事务中运行——要么你明确定义了一个，要么如果没有，那么 SQL Server 将使用一个隐式事务。

您要在表中插入一行（或多行）。然后 - 仍在事务内部 -`AFTER INSERT`触发器运行并检查某些条件 - 通常使用`Inserted`触发器内部可用的伪表，其中包含已插入的行。

如果你调用`ROLLBACK TRANSACTION`你的触发器，那么是的——你的事务，以及它一直在做的所有事情，都会被**回滚**，就好像这`INSERT`从未发生过一样——你的数据库表中什么都没有出现。

此外：与 SQL Server`FOR INSERT`中的相同`AFTER INSERT`- 触发器在语句完成其工作*后执行。*`INSERT`

*要记住的一件事（很多程序员都错了）：每个语句*触发一次触发器-而**不是**每行一次！因此，如果您一次插入 20 行，触发器会被触发*一次*，并且触发器内的`Inserted`伪表包含 20 行。您在编写触发器时需要考虑到这一点 - 您**并不**总是只处理插入的一行！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T05:51:09.620

不，这是不可能的，因为当它们不存在时，它将进入开始块......

# html - 将 svg 对齐到屏幕中心

> ID：13373169
> 
> 赞同：18
> 
> 时间：2012-11-14T04:41:02.847
> 
> 标签：html, svg

这是我的 svg

```
<svg id="svgMain" align="center" width="500" height="500"></svg> 
```

但它没有与中心对齐。如何将其与屏幕中心对齐。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-11-14T04:48:04.780

试试 CSS：

```
#svgMain {margin-left:auto; margin-right:auto; display:block;} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-21T03:57:33.157

将其包含在一个元素中。

```
<div text-align="center">
<svg id="svgMain" align="center" width="500" height="500"></svg>
</div> 
```

这应该有效。

# android - GreenDAO 架构更新和数据迁移？

> ID：13373170
> 
> 赞同：59
> 
> 时间：2012-11-14T04:41:04.187
> 
> 标签：android, greendao

我正在评估 GreenDAO 以考虑在我将要开发的商业 Android 应用程序中考虑，并希望确定架构更新的迁移路径。

我是否正确断言我必须编写一个自定义 OpenHelper 来提供 onUpdate() 并根据新模式提取转换和存储数据？这个假设提出了一些关于调用顺序和责任划分的有趣问题。

我无法找到有关 GreenDAO 架构更新和数据迁移的任何文档。

这是我写的关于这个主题的一堆博客文章：

1.  [greenDAO 的评论](https://web.archive.org/web/20131108033927/http://www.androidanalyse.com/greendao-an-android-orm-for-sqlite/)
2.  [第 1 部分 - 模式生成](https://web.archive.org/web/20140215121239/http://www.androidanalyse.com/greendao-schema-generation/)
3.  [第 2 部分 – 架构迁移](https://web.archive.org/web/20131102132942/http://www.androidanalyse.com/greendao-schema-migration/)
4.  [第 3 部分 – 测试架构迁移](https://web.archive.org/web/20131102112616/http://www.androidanalyse.com/greendao-testing-migration/)

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2015-05-19T19:37:37.167

考虑到 pleonasmik 的方法（顺便说一句，谢谢，它真的很有帮助），我创建了一个 MigrationHelper 类。

这个怎么运作：

1.  班级抓住了你得到的所有道
2.  根据旧版本的方案（`generateTempTables`方法）创建临时表
3.  将所有数据导入这个新表（`generateTempTables`方法）
4.  删除旧版本的所有表（`DaoMaster.dropAllTables`方法）
5.  创建新版本的表（`DaoMaster.createAllTables`方法）
6.  `restoreData`从临时表（方法）更新新版本的表
7.  删除所有临时表（`restoreData`方法）

迁移助手类：

```
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.text.TextUtils;
import android.util.Log;

import com.crashlytics.android.Crashlytics;

import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;

import de.greenrobot.dao.AbstractDao;
import de.greenrobot.dao.internal.DaoConfig;
import greendao.DaoMaster;

/**
 * Created by pokawa on 18/05/15.
 */
public class MigrationHelper {

    private static final String CONVERSION_CLASS_NOT_FOUND_EXCEPTION = "MIGRATION HELPER - CLASS DOESN'T MATCH WITH THE CURRENT PARAMETERS";
    private static MigrationHelper instance;

    public static MigrationHelper getInstance() {
        if(instance == null) {
            instance = new MigrationHelper();
        }
        return instance;
    }

    public void migrate(SQLiteDatabase db, Class<? extends AbstractDao<?, ?>>... daoClasses) {
        generateTempTables(db, daoClasses);
        DaoMaster.dropAllTables(db, true);
        DaoMaster.createAllTables(db, false);
        restoreData(db, daoClasses);
    }

    private void generateTempTables(SQLiteDatabase db, Class<? extends AbstractDao<?, ?>>... daoClasses) {
        for(int i = 0; i < daoClasses.length; i++) {
            DaoConfig daoConfig = new DaoConfig(db, daoClasses[i]);

            String divider = "";
            String tableName = daoConfig.tablename;
            String tempTableName = daoConfig.tablename.concat("_TEMP");
            ArrayList<String> properties = new ArrayList<>();

            StringBuilder createTableStringBuilder = new StringBuilder();

            createTableStringBuilder.append("CREATE TABLE ").append(tempTableName).append(" (");

            for(int j = 0; j < daoConfig.properties.length; j++) {
                String columnName = daoConfig.properties[j].columnName;

                if(getColumns(db, tableName).contains(columnName)) {
                    properties.add(columnName);

                    String type = null;

                    try {
                        type = getTypeByClass(daoConfig.properties[j].type);
                    } catch (Exception exception) {
                        Crashlytics.logException(exception);
                    }

                    createTableStringBuilder.append(divider).append(columnName).append(" ").append(type);

                    if(daoConfig.properties[j].primaryKey) {
                        createTableStringBuilder.append(" PRIMARY KEY");
                    }

                    divider = ",";
                }
            }
            createTableStringBuilder.append(");");

            db.execSQL(createTableStringBuilder.toString());

            StringBuilder insertTableStringBuilder = new StringBuilder();

            insertTableStringBuilder.append("INSERT INTO ").append(tempTableName).append(" (");
            insertTableStringBuilder.append(TextUtils.join(",", properties));
            insertTableStringBuilder.append(") SELECT ");
            insertTableStringBuilder.append(TextUtils.join(",", properties));
            insertTableStringBuilder.append(" FROM ").append(tableName).append(";");

            db.execSQL(insertTableStringBuilder.toString());
        }
    }

    private void restoreData(SQLiteDatabase db, Class<? extends AbstractDao<?, ?>>... daoClasses) {
        for(int i = 0; i < daoClasses.length; i++) {
            DaoConfig daoConfig = new DaoConfig(db, daoClasses[i]);

            String tableName = daoConfig.tablename;
            String tempTableName = daoConfig.tablename.concat("_TEMP");
            ArrayList<String> properties = new ArrayList();

            for (int j = 0; j < daoConfig.properties.length; j++) {
                String columnName = daoConfig.properties[j].columnName;

                if(getColumns(db, tempTableName).contains(columnName)) {
                    properties.add(columnName);
                }
            }

            StringBuilder insertTableStringBuilder = new StringBuilder();

            insertTableStringBuilder.append("INSERT INTO ").append(tableName).append(" (");
            insertTableStringBuilder.append(TextUtils.join(",", properties));
            insertTableStringBuilder.append(") SELECT ");
            insertTableStringBuilder.append(TextUtils.join(",", properties));
            insertTableStringBuilder.append(" FROM ").append(tempTableName).append(";");

            StringBuilder dropTableStringBuilder = new StringBuilder();

            dropTableStringBuilder.append("DROP TABLE ").append(tempTableName);

            db.execSQL(insertTableStringBuilder.toString());
            db.execSQL(dropTableStringBuilder.toString());
        }
    }

    private String getTypeByClass(Class<?> type) throws Exception {
        if(type.equals(String.class)) {
            return "TEXT";
        }
        if(type.equals(Long.class) || type.equals(Integer.class) || type.equals(long.class)) {
            return "INTEGER";
        }
        if(type.equals(Boolean.class)) {
            return "BOOLEAN";
        }

        Exception exception = new Exception(CONVERSION_CLASS_NOT_FOUND_EXCEPTION.concat(" - Class: ").concat(type.toString()));
        Crashlytics.logException(exception);
        throw exception;
    }

    private static List<String> getColumns(SQLiteDatabase db, String tableName) {
        List<String> columns = new ArrayList<>();
        Cursor cursor = null;
        try {
            cursor = db.rawQuery("SELECT * FROM " + tableName + " limit 1", null);
            if (cursor != null) {
                columns = new ArrayList<>(Arrays.asList(cursor.getColumnNames()));
            }
        } catch (Exception e) {
            Log.v(tableName, e.getMessage(), e);
            e.printStackTrace();
        } finally {
            if (cursor != null)
                cursor.close();
        }
        return columns;
    }
} 
```

下面是一个如何在 DaoMaster.java 类中调用它的示例：

```
@Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        Log.i("greenDAO", "Upgrading schema from version " + oldVersion + " to " + newVersion + " by migrating all tables data");

        MigrationHelper.getInstance().migrate(db,
                UserDao.class,
                ItemDao.class);
    } 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-11-15T18:10:47.127

你假设正确。今天不同模式版本之间没有更改跟踪。因此，在进行模式升级时，您需要自己编写 SQL。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2017-06-09T12:05:47.137

对于那些希望在 greenDAO 3 上更新数据库架构版本的人，请将其添加到应用程序的`build.gradle`依赖项上方的文件中：

```
apply plugin: 'org.greenrobot.greendao'

greendao {
    schemaVersion 1
} 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2016-08-16T20:41:08.697

这是与 GreenDao 3.+ 一起使用并修复错误的@PedroOkawa 代码：

```
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.support.annotation.NonNull;
import android.text.TextUtils;

import org.greenrobot.greendao.AbstractDao;
import org.greenrobot.greendao.database.Database;
import org.greenrobot.greendao.database.StandardDatabase;
import org.greenrobot.greendao.internal.DaoConfig;

import java.lang.reflect.InvocationTargetException;
import java.lang.reflect.Method;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;

/**
 * Createdby PedroOkawa and modified by MBH on 16/08/16.
 */
public final class MigrationHelper {

    public static void migrate(SQLiteDatabase sqliteDatabase, Class<? extends AbstractDao<?, ?>>... daoClasses) {
        StandardDatabase db = new StandardDatabase(sqliteDatabase);
        generateNewTablesIfNotExists(db, daoClasses);
        generateTempTables(db, daoClasses);
        dropAllTables(db, true, daoClasses);
        createAllTables(db, false, daoClasses);
        restoreData(db, daoClasses);
    }

    public static void migrate(StandardDatabase db, Class<? extends AbstractDao<?, ?>>... daoClasses) {
        generateNewTablesIfNotExists(db, daoClasses);
        generateTempTables(db, daoClasses);
        dropAllTables(db, true, daoClasses);
        createAllTables(db, false, daoClasses);
        restoreData(db, daoClasses);
    }

    private static void generateNewTablesIfNotExists(StandardDatabase db, Class<? extends AbstractDao<?, ?>>... daoClasses) {
        reflectMethod(db, "createTable", true, daoClasses);
    }

    private static void generateTempTables(StandardDatabase db, Class<? extends AbstractDao<?, ?>>... daoClasses) {
        for (int i = 0; i < daoClasses.length; i++) {
            DaoConfig daoConfig = new DaoConfig(db, daoClasses[i]);
            String tableName = daoConfig.tablename;
            String tempTableName = daoConfig.tablename.concat("_TEMP");
            StringBuilder insertTableStringBuilder = new StringBuilder();
            insertTableStringBuilder.append("CREATE TEMP TABLE ").append(tempTableName);
            insertTableStringBuilder.append(" AS SELECT * FROM ").append(tableName).append(";");
            db.execSQL(insertTableStringBuilder.toString());
        }
    }

    private static void dropAllTables(StandardDatabase db, boolean ifExists, @NonNull Class<? extends AbstractDao<?, ?>>... daoClasses) {
        reflectMethod(db, "dropTable", ifExists, daoClasses);
    }

    private static void createAllTables(StandardDatabase db, boolean ifNotExists, @NonNull Class<? extends AbstractDao<?, ?>>... daoClasses) {
        reflectMethod(db, "createTable", ifNotExists, daoClasses);
    }

    /**
     * dao class already define the sql exec method, so just invoke it
     */
    private static void reflectMethod(StandardDatabase db, String methodName, boolean isExists, @NonNull Class<? extends AbstractDao<?, ?>>... daoClasses) {
        if (daoClasses.length < 1) {
            return;
        }
        try {
            for (Class cls : daoClasses) {
                Method method = cls.getDeclaredMethod(methodName, Database.class, boolean.class);
                method.invoke(null, db, isExists);
            }
        } catch (NoSuchMethodException e) {
            e.printStackTrace();
        } catch (InvocationTargetException e) {
            e.printStackTrace();
        } catch (IllegalAccessException e) {
            e.printStackTrace();
        }
    }

    private static void restoreData(StandardDatabase db, Class<? extends AbstractDao<?, ?>>... daoClasses) {
        for (int i = 0; i < daoClasses.length; i++) {
            DaoConfig daoConfig = new DaoConfig(db, daoClasses[i]);
            String tableName = daoConfig.tablename;
            String tempTableName = daoConfig.tablename.concat("_TEMP");
            // get all columns from tempTable, take careful to use the columns list
            List<String> columns = getColumns(db, tempTableName);
            ArrayList<String> properties = new ArrayList<>(columns.size());
            for (int j = 0; j < daoConfig.properties.length; j++) {
                String columnName = daoConfig.properties[j].columnName;
                if (columns.contains(columnName)) {
                    properties.add(columnName);
                }
            }
            if (properties.size() > 0) {
                final String columnSQL = TextUtils.join(",", properties);

                StringBuilder insertTableStringBuilder = new StringBuilder();
                insertTableStringBuilder.append("INSERT INTO ").append(tableName).append(" (");
                insertTableStringBuilder.append(columnSQL);
                insertTableStringBuilder.append(") SELECT ");
                insertTableStringBuilder.append(columnSQL);
                insertTableStringBuilder.append(" FROM ").append(tempTableName).append(";");
                db.execSQL(insertTableStringBuilder.toString());
            }
            StringBuilder dropTableStringBuilder = new StringBuilder();
            dropTableStringBuilder.append("DROP TABLE ").append(tempTableName);
            db.execSQL(dropTableStringBuilder.toString());
        }
    }

    private static List<String> getColumns(StandardDatabase db, String tableName) {
        List<String> columns = null;
        Cursor cursor = null;
        try {
            cursor = db.rawQuery("SELECT * FROM " + tableName + " limit 0", null);
            if (null != cursor && cursor.getColumnCount() > 0) {
                columns = Arrays.asList(cursor.getColumnNames());
            }
        } catch (Exception e) {
            e.printStackTrace();
        } finally {
            if (cursor != null)
                cursor.close();
            if (null == columns)
                columns = new ArrayList<>();
        }
        return columns;
    }

} 
```

用法是：

```
@Override
public void onUpgrade(SQLiteDatabase sqLiteDatabase, int oldVersion, int newVersion) {
    MigrationHelper.migrate(new StandardDatabase(sqLiteDatabase),
                UserDao.class,
                ItemDao.class);
    // OR you can use it like this (Dont use both it is example of 2 different usages)
    MigrationHelper.migrate(sqLiteDatabase,
                UserDao.class,
                ItemDao.class);
} 
```

`StandardDatabase`可以在 greendao 中找到，这是导入：

```
import org.greenrobot.greendao.database.StandardDatabase; 
```

再次感谢@PedroOkawa :)

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2014-09-23T09:29:09.603

我认为我[对类似问题的回答](https://stackoverflow.com/a/25991289/1651940)可以帮助采用这种方法。如果您确实需要迁移数据，我建议您，例如，如果您需要处理一些约束更改或 SQLite 不支持的事情，您可以自己编写迁移。例如，迁移器助手的示例（按照我对链接响应所做的方法）可能是：

```
public class DBMigrationHelper6 extends AbstractMigratorHelper {

/* Upgrade from DB schema 6 to schema 7 , version numbers are just examples*/

public void onUpgrade(SQLiteDatabase db) {

    /* Create a temporal table where you will copy all the data from the previous table that you need to modify with a non supported sqlite operation */
    db.execSQL("CREATE TABLE " + "'post2' (" + //
            "'_id' INTEGER PRIMARY KEY ," + // 0: id
            "'POST_ID' INTEGER UNIQUE ," + // 1: postId
            "'USER_ID' INTEGER," + // 2: userId
            "'VERSION' INTEGER," + // 3: version
            "'TYPE' TEXT," + // 4: type
            "'MAGAZINE_ID' TEXT NOT NULL ," + // 5: magazineId
            "'SERVER_TIMESTAMP' INTEGER," + // 6: serverTimestamp
            "'CLIENT_TIMESTAMP' INTEGER," + // 7: clientTimestamp
            "'MAGAZINE_REFERENCE' TEXT NOT NULL ," + // 8: magazineReference
            "'POST_CONTENT' TEXT);"); // 9: postContent

    /* Copy the data from one table to the new one */
    db.execSQL("INSERT INTO post2 (_id, POST_ID, USER_ID, VERSION, TYPE,  MAGAZINE_ID, SERVER_TIMESTAMP, CLIENT_TIMESTAMP, MAGAZINE_REFERENCE, POST_CONTENT)" +
            "   SELECT _id, POST_ID, USER_ID, VERSION, TYPE,  MAGAZINE_ID, SERVER_TIMESTAMP, CLIENT_TIMESTAMP, MAGAZINE_REFERENCE, POST_CONTENT FROM post;");

    /* Delete the previous table */
    db.execSQL("DROP TABLE post");
    /* Rename the just created table to the one that I have just deleted */
    db.execSQL("ALTER TABLE post2 RENAME TO post");

    /* Add Index/es if you want them */
    db.execSQL("CREATE INDEX " + "IDX_post_USER_ID ON post" +
            " (USER_ID);");

   }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-03-09T15:32:22.373

Pedro Okawa 的解决方案是正确的，但是您需要编写“UpgradeHelper”来扩展“OpenHelper”，因为每次重新生成 DAO 代码时都会覆盖 DaoMaster。

例子：

```
public class UpgradeHelper extends DaoMaster.OpenHelper {

public UpgradeHelper(Context context, String name, SQLiteDatabase.CursorFactory factory) {
    super(context, name, factory);
}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

    Log.i("greenDAO", "Upgrading schema from version " + oldVersion + " to " + newVersion + " by migrating all tables data");

    MigrationHelper.getInstance().migrate(db,
            UserDao.class,
            ItemDao.class,
            AnotherClassToGenerateDao.class);
} 
```

}

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-05-08T14:06:21.403

如果您只是在寻找一种在不删除用户数据的情况下将新表添加到架构中并且不需要转换任何现有数据的方法，请查看我对[这个问题](https://stackoverflow.com/questions/16154113/greendao-schema-upgrade/)的回答，了解如何使用的离散示例绿道。

# rest - Resteasy spring security - 重复请求

> ID：13373178
> 
> 赞同：0
> 
> 时间：2012-11-14T04:42:39.043
> 
> 标签：rest, jakarta-ee, servlets, spring-security, resteasy

我很难让 RESTeasy 与我现有的应用程序一起工作。我可以达到我的终点（AdminService）。我的问题是每次我（通过浏览器）发出 GET 请求时，我都会在我的服务上点击两次，因此会导致重复的结果。我尝试使用 java 客户端使用 POST 仍然存在问题。跟随你可以找到我的技术列表。

Spring 安全 3.x Spring 2.5 RestEasy 2.3.5.Final

==我的 web.xml 的一部分==

```
<filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>
<filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>

<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>
<listener>
    <listener-class>au.com.esriau.dekho.application.ApplicationLoader</listener-class>
</listener>

<listener>
    <listener-class>org.jboss.resteasy.plugins.server.servlet.ResteasyBootstrap
    </listener-class>
</listener>
<servlet>
    <servlet-name>Resteasy</servlet-name>
    <servlet-class>org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher
    </servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>Resteasy</servlet-name>
    <url-pattern>/rest/*</url-pattern>
</servlet-mapping>
<context-param>
    <param-name>resteasy.servlet.mapping.prefix</param-name>
    <param-value>rest</param-value>
</context-param>
<context-param>
    <param-name>resteasy.resources</param-name>
    <param-value>com.admin.AdminService
    </param-value>
</context-param> 
```

我很感激你解决这个问题的解决方案或想法。

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T01:00:35.323

不要费心读这个。这是由于我在 spring-security 中自定义实现 AbstractAuthenticationProcessingFilter。我基本上是用 super.doFilter(request, response, chain) 对超类进行不必要的调用。这是在我执行自定义过滤器后立即完成的。摆脱 super.doFilter 为我解决了这个问题。

# php - 电子邮件用户有效但不是管理员？

> ID：13373179
> 
> 赞同：0
> 
> 时间：2012-11-14T04:42:52.367
> 
> 标签：php, wordpress

我有一个已处理的订单表格，客户收到了电子邮件，但是，添加管理位不会向管理员发送电子邮件？

以下代码是发送给客户的位（工作正常），也是**应该**通过电子邮件发送给管理员但不发送的代码:(

```
 // email stuff (change data below)
    $to = $payment_data['sold_to_email']; 
    $from = $order_options['admin_email']; 
    $subject = "Your Order"; 

    //include the message
    $message = $order_options['email_message'];
    //Build the Order out
    $message .= '<br /><br />Thank you for purchasing from us';

    // a random hash will be necessary to send mixed content
    $separator = md5(time());

    // carriage return type (we use a PHP end of line constant)
    $eol = PHP_EOL;

    // main header (multipart mandatory)
    $headers  = "From: ". $company . " <" . $from . ">". $eol;
    $headers .= "MIME-Version: 1.0".$eol; 
    $headers .= "Content-Type: multipart/mixed; boundary=\"".$separator."\"".$eol.$eol; 
    $headers .= "Content-Transfer-Encoding: 7bit".$eol;
    $headers .= "This is a MIME encoded message.".$eol.$eol;

    // message
    $headers .= "--".$separator.$eol;
    $headers .= "Content-Type: text/html; charset=\"iso-8859-1\"".$eol;
    $headers .= "Content-Transfer-Encoding: 8bit".$eol.$eol;
    //$headers .= $message.$eol.$eol;

    // send message
    $sendit = wp_mail($to, $subject, $message, $headers);

    $admin_message = $payment_data['admin_field'];
    wp_mail($admin_email, 'New Order', $admin_message);

    //Code to troubleshoot email problems.
    /*  if(!$sendit) {
                $tempOptions = get_option('order_options');
                $tempOptions['admin_email'] = "EMAIL FAILED";
                update_option('order_options', $tempOptions);

            }
    */ 
```

# unit-testing - 使用 Moq 模拟方法的问题

> ID：13373184
> 
> 赞同：1
> 
> 时间：2012-11-14T04:43:08.737
> 
> 标签：unit-testing, testing, moq

我有以下具有两个静态方法 Retrieve 和 RetrieveWithQuery 的类。在此处列出的类下面，我包含了一个测试片段。除了最后一个测试断言之外的所有断言都失败并显示以下消息：

失败的 TestMethod2 MoqTest Assert.AreEqual 失败。预期的：。实际：<(null)>。

我知道问题可能是我在模拟中设置的查询与 RetrieveWithQuery 方法中使用的查询不同。这就是为什么 is 会返回 null 的原因。

在一个完美的世界里，我会简单地重构服务类，不幸的是我正在使用已经生产的遗留代码。目标是首先完成测试，然后在更新生产环境之前重构代码并运行回归测试。

是否有解决方法或不同的方法来测试这个？

```
public class MyService  
{
    public virtual string RetrieveMethod(string account)
    {
        if (account == "The abc company")
        {
            return "Peter Smith";
        }

            return "John Doe";
    }

    public virtual string RetrieveMethod(MyQuery query)
    {
        return RetrieveMethod(query.QueryString);   
    }

    public static string Retrieve(MyService service, string value)
    {
        return service.RetrieveMethod(value);
    }

    public static string RetrieveWithQuery(MyService service, string value)
    {
        var query = new MyQuery
        {
            QueryString = value
        };

        return service.RetrieveMethod(query);
    }

}

public class MyQuery
{
    public string QueryString;
}

    [TestMethod]
    public void TestMethod2()
    {
        var mockService = new Mock<MyService>();

        const string company = "The abc company";
        const string expectedContact = "Peter Smith";

        var queryAccount = new MyQuery
                        {
                            QueryString = company
                        };

        // Setup base retrieve
        mockService.Setup(myServ => myServ.RetrieveMethod(company)).Returns(expectedContact);

        // Setup base retrieve with query
        mockService.Setup(myServ => myServ.RetrieveMethod(queryAccount)).Returns(expectedContact);

        // test base retrieve with query - PASS
        Assert.AreEqual(expectedContact, mockService.Object.RetrieveMethod(queryAccount));

        // test static method retrieve - PASS
        Assert.AreEqual(expectedContact, MyService.Retrieve(mockService.Object, company));

        // test static method retrieve with query - FAIL
        Assert.AreEqual(expectedContact, MyService.RetrieveWithQuery(mockService.Object, company));
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T04:47:54.780

试试这个设置：

```
 // Setup base retrieve with query
    mockService.Setup(myServ => myServ.RetrieveMethod(It.Is<Query>(q=>q.QueryString == queryAccount.QueryString)).Returns(expectedContact); 
```

或者您可以在 Equals for Query 上重载，以便创建的 Query 等于 expectedQuery。

[Moq QuickStart](http://code.google.com/p/moq/wiki/QuickStart.)页面提供了很好的示例以及更多示例，这些示例应该很有帮助。

# objective-c - NSString 到 NSDate 的转换和 NSDate 不只给出日期

> ID：13373186
> 
> 赞同：0
> 
> 时间：2012-11-14T04:43:29.520
> 
> 标签：objective-c, nsstring, ios6, nsdate, xcode4.5

希望你会做得很好。

我在标签上有一个日期（2012 年 11 月 14 日），这意味着

`Label.text returns the string "November 14, 2012"`

现在我想要的是将此字符串转换为`NSDate`. 我通过使用此代码片段来做到这一点。

```
formator.dateStyle=NSDateFormatterShortStyle;
formator.dateFormat=@"yyyy-MM-dd";
NSString *temp=[NSString stringWithFormat:@"%@",[formator stringFromDate:myDatePicker.date]];
NSLog(@"%@",temp);
NSDate *myDate=[formator dateFromString:temp];
NSLog(@"%@",myDate); 
```

`myDatePicker.date`输出`= November 14,2012`

`temp's`输出`= 2012-11-14`

`myDate's`输出`= 2012-06-13 19:00:00 +0000`

`myDate`还给了我时间和格林威治标准时间设置以及日期后 1 天，即 13 而不是 14，我真的不想得到。我只需要日期。

我的要求是获得`myDate` **2012-11-14的输出**

感谢您在期待中的所有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T04:48:49.560

试试这个，让我知道：

```
NSDate *dateTemp = [[NSDate alloc] init];
NSDateFormatter *dateFormat1 = [[NSDateFormatter alloc] init];
NSDateFormatter *dateFormat2 = [[NSDateFormatter alloc] init];

[dateFormat1 setDateFormat:@"MM/dd/yy"];
[dateFormat2 setDateFormat:@"yyyy-MM-dd"];

dateTemp = [dateFormat1 dateFromString:newInvoice.date];
newDate.date = [dateFormat2 stringFromDate:dateTemp]; 
```

这将很有帮助：

```
-(NSDate *)dateWithOutTime:(NSDate *)datDate
    if( datDate == nil ) {
        datDate = [NSDate date];
    }
    NSDateComponents* comps = [[NSCalendar currentCalendar] components:NSYearCalendarUnit|NSMonthCalendarUnit|NSDayCalendarUnit fromDate:datDate];
    return [[NSCalendar currentCalendar] dateFromComponents:comps];
} 
```

# google-chrome - 我可以在 Chrome 中增加 QUOTA_BYTES_PER_ITEM 吗？

> ID：13373187
> 
> 赞同：7
> 
> 时间：2012-11-14T04:44:00.033
> 
> 标签：google-chrome, google-chrome-extension

有没有办法增加 chrome.storage.sync.QUOTA_BYTES_PER_ITEM ？

对我来说，默认的 4096 字节有点短。

我试图执行

```
chrome.storage.sync.QUOTA_BYTES_PER_ITEM = 8192; 
```

但是，实际限制似乎没有改变。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-14T15:04:53.360

不，`QUOTA_BYTES_PER_ITEM`仅供参考；它不是一个可设置的值。但是，您可以使用 的值`QUOTA_BYTES_PER_ITEM`将一个项目拆分为多个项目：

```
function syncStore(key, objectToStore, callback) {
    var jsonstr = JSON.stringify(objectToStore);
    var i = 0;
    var storageObj = {};

    // split jsonstr into chunks and store them in an object indexed by `key_i`
    while(jsonstr.length > 0) {
        var index = key + "_" + i++;

        // since the key uses up some per-item quota, see how much is left for the value
        // also trim off 2 for quotes added by storage-time `stringify`
        var valueLength = chrome.storage.sync.QUOTA_BYTES_PER_ITEM - index.length - 2;

        // trim down segment so it will be small enough even when run through `JSON.stringify` again at storage time
        var segment = jsonstr.substr(0, valueLength);           
        while(JSON.stringify(segment).length > valueLength)
            segment = jsonstr.substr(0, --valueLength);

        storageObj[index] = segment;
        jsonstr = jsonstr.substr(valueLength);
    }

    // store all the chunks
    chrome.storage.sync.set(storageObj, callback);
} 
```

然后编写一个类似的 fetch 函数，通过键获取并将对象重新粘合在一起。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-18T09:25:17.023

只需修改@apsilliers 的答案

```
function syncStore(key, objectToStore) {
    var jsonstr = JSON.stringify(objectToStore);
    var i = 0;
    var storageObj = {};

    // split jsonstr into chunks and store them in an object indexed by `key_i`
    while(jsonstr.length > 0) {
        var index = key + "_" + i++;

        // since the key uses up some per-item quota, see how much is left for the value
        // also trim off 2 for quotes added by storage-time `stringify`
        const maxLength = chrome.storage.sync.QUOTA_BYTES_PER_ITEM - index.length - 2;
        var valueLength = jsonstr.length;
        if(valueLength > maxLength){
            valueLength = maxLength;
        }

        // trim down segment so it will be small enough even when run through `JSON.stringify` again at storage time
        //max try is QUOTA_BYTES_PER_ITEM to avoid infinite loop
        var segment = jsonstr.substr(0, valueLength); 
        for(let i = 0; i < chrome.storage.sync.QUOTA_BYTES_PER_ITEM; i++){
            const jsonLength = JSON.stringify(segment).length;
            if(jsonLength > maxLength){
                segment = jsonstr.substr(0, --valueLength);
            }else {
                break;
            }
        }

        storageObj[index] = segment;
        jsonstr = jsonstr.substr(valueLength);
    } 
```

还可以读取每个分区并再次合并

```
function syncGet(key, callback) {
    chrome.storage.sync.get(key, (data) => {
        console.log(data[key]);
        console.log(typeof data[key]);
        if(data != undefined && data != "undefined" && data != {} && data[key] != undefined && data[key] != "undefined"){
            const keyArr = new Array();
            for(let i = 0; i <= data[key].count; i++) {
                keyArr.push(`${data[key].prefix}${i}`)
            }   
            chrome.storage.sync.get(keyArr, (items) => {
                console.log(data)
                const keys = Object.keys( items );
                const length = keys.length;
                let results = "";
                if(length > 0){
                    const sepPos = keys[0].lastIndexOf("_");
                    const prefix = keys[0].substring(0, sepPos);
                    for(let x = 0; x < length; x ++){
                        results += items[`${prefix }_${x}`];
                    }
                    callback(JSON.parse(results));
                    return;
                }
                callback(undefined);

            });
        } else {
            callback(undefined);
        }
    });
} 
```

它经过测试，适用于我的情况

# c - 为什么这个非静态变量通过函数调用保留它的值？

> ID：13373189
> 
> 赞同：0
> 
> 时间：2012-11-14T04:44:43.633
> 
> 标签：c, static, keyword

```
void testFunc(int);

int main(int argc, char** argv) {

    testFunc(1);
    testFunc(2);
    testFunc(3);

    return (EXIT_SUCCESS);
}

void testFunc(int another)
{
    int num;
    printf("num: %i\n", num);
    num = another;
} 
```

输出：数字：127383283 数字：1 数字：2

如果我在每次将变量分配给某个东西之前打印变量，我不应该总是在没有静态关键字的情况下得到垃圾值吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T04:47:22.393

您*正在*获取垃圾值 - 在这种情况下，这些垃圾值恰好是您在之前调用函数时分配的值。

如果您在调用 之间调用另一个函数`testFunc()`，或者使用更高的优化设置进行编译，或者使用不同的编译器，您可能会看到完全不同的东西。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T04:47:23.003

因为它最终每次都为该变量使用相同的内存，而该变量没有改变。

这种行为被认为是未定义的。尽管它可能在您的特定情况下可靠地工作，但并非在所有情况下都可以依赖它。

看在地狱的份上，你为什么不开始接受一些答案呢？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-14T04:47:22.847

`num`没有初始化的值是**Indeterminate**。
它可以是任何东西。你不能依赖它来做任何具体的事情。
请注意，使用此不确定值会导致**Undefined Behavior**，因此该程序具有 Undefined 行为。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-14T04:47:52.393

在 C/C++ 中，不保证自动变量具有任何特定值，除非将它们初始化为所需的值。所以这是设计使然

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-14T04:49:29.597

这是一个意外。添加另一个功能：

```
int use_stack(void)
{
    int a[4] = { rand(), rand(), rand(), rand() };
    int j = 0;
    for (int i = 0; i < 4; i++)
        j += a[i];
    return j;
} 
```

在前两个`testFunc()`电话之后调用它。您可能会看到一个随机值作为`testFunc()`.

形式上，您看到的行为是未定义的行为，任何事情都可能发生。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-11-14T04:49:09.113

静态只是意味着它在编译后无法更改。一旦您声明了该值，它将在代码的整个生命周期中保持不变。由于您在函数末尾设置值，因此它可以工作第二次和第三次。

如果将其设置为静态，则无法将值分配给函数中的 is。

# oracle - MongoDB 与 Oracle 的实时搜索

> ID：13373190
> 
> 赞同：2
> 
> 时间：2012-11-14T04:44:49.173
> 
> 标签：oracle, mongodb, indexing, real-time-updates

我正在构建一个应用程序，我在其中跟踪用户活动更改并向用户显示活动日志。这里有几点：

1.  每天插入 1 亿条记录。
2.  这些记录将被索引并立即在搜索结果中可用（几秒钟内）。
3.  用户可以在公开的 10 个字段中的任何一个上过滤记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T04:49:09.737

我的建议是[ElasticSearch](http://www.elasticsearch.org/)，因为您的主要用例是“过滤器”（ ElasticSearch 中的[Facets](http://www.elasticsearch.org/guide/reference/api/search/facets/)）和搜索。它是为扩大规模而编写的（否则 Lucene 也很好）并牢记大数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T04:47:54.700

我认为 Mongo 和 Oracle 都无法满足您的需求。我建议从您的主数据存储中卸载搜索组件，可能类似于 ElasticSearch：

[http://www.elasticsearch.org/](http://www.elasticsearch.org/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T20:41:03.047

每天 1 亿条记录听起来需要一个快速增长的服务器场来存储数据。我不熟悉 Oracle 如何分发这些数据，但使用 MongoDB，您需要根据搜索查询使用的字段（包括用于过滤的 10 个字段）对数据进行分片。如果您仅通过分片键进行搜索，MongoDB 足够智能，只会命中包含正确分片的机器，因此就像在一台机器上查询一个小型数据库以获取您需要的内容一样。此外，如果分片键可以放入集群中每台机器的内存中，并使用 MongoDB 的 btree 索引进行索引，那么您的查询将非常即时。

# ios - objectAtIndex:indexPath.row 方法总是在 IOS 中导致异常

> ID：13373200
> 
> 赞同：0
> 
> 时间：2012-11-14T04:45:44.487
> 
> 标签：ios, xcode, uitableview, plist

嗨，当我使用 objectAtInded 方法从数组中检索 NSString 时，我似乎总是遇到异常。我正在从“PropertyList.plist”文件中的字典中读取数据。我的代码是

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    NSString *path = [[NSBundle mainBundle] pathForResource:@"PropertyList"
                                                     ofType:@"plist"];
    names = [[NSDictionary alloc]
             initWithContentsOfFile:path];

    keys = [[[names allKeys] sortedArrayUsingSelector:
             @selector(compare:)] retain];
}

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSUInteger section = [indexPath section];
    NSUInteger row = [indexPath row];

    NSString *key  = [keys objectAtIndex:section];
    NSArray *nameSection = [names objectForKey:key];
    static NSString *SectionsTableIdentifier = @"SectionsTableIdentifier";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:SectionsTableIdentifier];
    if(cell == nil)
    {
        cell = [[[UITableViewCell alloc]
                 initWithStyle:UITableViewCellStyleDefault reuseIdentifier:SectionsTableIdentifier] autorelease];
    }
    cell.textLabel.text = [nameSection objectAtIndex:row];
    return cell;
} 
```

异常发生在该行中的方法“cellForRowAtIndexPath”上

```
cell.textLabel.text = [nameSection objectAtIndex:row]; 
```

错误信息是

> 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[__NSCFDictionary objectAtIndex:]：无法识别的选择器发送到实例 0x6832440

plist文件是 ![在此处输入图像描述](../Images/af3638f4e51fef382c30055b944951f9.png)

我在哪里使用“[nameSection objectAtIndex:row];” 语句类型它总是得到异常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T04:57:22.620

其原因可能如下

1.  [名称 objectForKey:key];。该语句可以为输出提供 NSMutableDictionary 类型，并且您从中获取 NSArray。或者

2.  如果它是一个数组，那么使用下面的代码来获取 nameSection

    ```
     NSMutableArray *nameSection = (NSMutableArray*)[names objectForKey:key];
       // using (NSMutableArray*) before the code is for external typecasting to tell the compiler that the output is of NSMutableArray type. 
    ```

希望这可以帮助。

编辑：-

使用以下方法从 plist 文件中获取您的字典

```
 -(NSMutableDictionary *) GetDictDataFromPlistFile:(NSString *) fileName
       {
             NSError *error;
             NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES); //1
             NSString *documentsDirectory = [paths objectAtIndex:0]; //2
             NSString *path = [documentsDirectory stringByAppendingPathComponent:[NSString stringWithFormat:@"%@.plist",fileName]]; //3

              NSFileManager *fileManager = [NSFileManager defaultManager];

            if (![fileManager fileExistsAtPath: path]) //4
            {
                   NSString *bundle = [[NSBundle mainBundle] pathForResource:fileName ofType:@"plist"]; //5
                  [fileManager copyItemAtPath:bundle toPath: path error:&error]; //6
             }

              NSMutableDictionary *dictData =   [[NSMutableDictionary alloc] initWithContentsOfFile:path];

               return dictData;
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T05:26:20.630

在这里，`name`只包含 的一个键`root`。您需要的`name`是 key 的值`Root`。请重试！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T06:16:38.280

就像@scorpiozj 说的'names' 只包含'Root' 的键。所以我所做的我知道这不是一个很好的方法。我确信还有其他方法。我将“viewDidLoad”方法更改为此，

```
 - (void)viewDidLoad
{
    [super viewDidLoad];
    NSString *path = [[NSBundle mainBundle] pathForResource:@"PropertyList"
                                                     ofType:@"plist"];
    names = [[NSDictionary alloc]
             initWithContentsOfFile:path];
    keys = [names allKeys];
    NSString *key = [keys objectAtIndex:0];
    names = [names objectForKey:key];
    keys = [[[names allKeys] sortedArrayUsingSelector:@selector(compare:)] retain];
    NSLog(@"keys = %@  names = %@",keys,names);
} 
```

有用！不过，任何如何做得更好的想法都将不胜感激。

# windows-runtime - win-rt live sdk：如何连接访问令牌

> ID：13373204
> 
> 赞同：0
> 
> 时间：2012-11-14T04:46:32.147
> 
> 标签：windows-runtime

在 win-rt 应用程序中，我想在用户第一次登录后使用访问令牌自动连接到 Windows Live，以便用户下次打开应用程序时无需再次登录。只需使用 Live SDK，不要在我的代码中调用它的 REST API，这可行吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T06:25:29.290

您是否尝试过[PhotoSky -](http://code.msdn.microsoft.com/windowsapps/Live-SDK-Windows-Developer-8ad35141) Windows 8 示例应用程序中的 SkyDrive 示例。

# gnuplot - 在gnuplot中计算csv中的列

> ID：13373206
> 
> 赞同：2
> 
> 时间：2012-11-14T04:46:47.390
> 
> 标签：gnuplot

gnuplot 中是否有一个函数可以返回 csv 文件中的列数？我在文档中找不到任何内容，也许有人可以为此提出定制功能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T15:00:40.240

从 gnuplot4.6 开始，您可以编写一个小 hack 脚本来执行此操作。它当然不是最有效的，但它是纯粹的 gnuplot：

```
#script col_counter.gp
col_count=1
good_data=1
while (good_data){
   stats "$0" u (valid(col_count))
   if ( STATS_max ){
      col_count = col_count+1
   } else {
      col_count = col_count-1
      good_data = 0
   }
} 
```

现在在你的主脚本中，

```
call "col_counter.gp" "my_datafile_name"
print col_count   #number of columns is stored in col_count. 
```

这有一些限制——如果你在数据文件中有一个完全非数字的列，然后是更有效的列，例如，它会阻塞，但我认为它应该适用于许多典型的用例。

```
print col_count 
```

最后一点，您可以使用环境变量`GNUPLOT_LIB`，然后您甚至不需要`col_counter.gp`在当前目录中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-14T08:27:05.427

假设这与[这个问题有关](https://stackoverflow.com/q/13371449/1331399)，并且*infile.csv*的内容是：

```
n,John Smith stats,Sam Williams stats,Joe Jackson stats
1,23.4,44.1,35.1 
2,32.1,33.5,38.5 
3,42.0,42.1,42.1 
```

你可以这样做：

*绘图.gp*

```
nc = "`awk -F, 'NR == 1 { print NF; exit }' infile.csv`"
set key autotitle columnhead
set datafile separator ','
plot for [i=2:nc] "< sed -r '1 s/,([^ ]+)[^,]+/,\\1/g' infile.csv" using 1:i with lines 
```

请注意，在 Gnuplot 中`\1`使用时需要转义。`"`

输出：

![数据文件图](../Images/3ee91a1f208848e5c2bf0dcc9a3ae8ab.png)

# ios - 以编程方式关闭视图控制器时发出警告

> ID：13373207
> 
> 赞同：2
> 
> 时间：2012-11-14T04:46:52.060
> 
> 标签：ios, uiviewcontroller, xcode4.5, objective-c-2.0, uistoryboardsegue

我有一个`TableViewController`带有触发`[NSURLConnection sendAsynchronousRequest...]`事件的按钮，并且还通过 performSegueWithIdentifier:sender: 加载模态序列，它针对一个小视图控制器。此覆盖视图控制器的目的是显示加载图形并在通过`NSURLConnection`.

在 的完成块中`NSURLConnection`，我调用一个方法来删除`TableViewController`（它只是一个批处理列表）中的数据，然后调用`dismissViewControllerAnimated:completion:`覆盖视图控制器。

除了解除覆盖视图控制器之外，一切正常，这会在调试器中引发警告，上面写着： **“警告：在演示或解除正在进行时尝试从视图控制器解除！”**

我找到了关于这个错误的各种问题和答案，特别是关于使用这些`performSelector:object:withDelay`方法的问题，但到目前为止没有任何效果。

这特别烦人，因为我在应用程序的另一个区域使用了类似的过程，除了从选择 a 时调用了 dismissViewController `UITableViewCell`，这工作正常......

我的代码的相关位如下所示：

```
#import "ViewBatch.h"

@interface ViewBatch ()
@property (strong, nonatomic) LoadingOverlayViewController *loadingOverlay;
@end

@implementation ViewBatch
@synthesize loadingOverlay;

....

- (IBAction)exportBatch:(id)sender
{
    if ([productArray count] > 0) {
        [self performSegueWithIdentifier:@"loadingSegue" sender:self];
        [self processData];
    }
}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([segue.identifier isEqualToString:@"loadingSegue"]) {

        loadingOverlay = segue.destinationViewController;
    }
}

- (void)processData
{

    // Code to create a file and NSURLRequest...
    // ....

    NSOperationQueue *queue = [[NSOperationQueue alloc] init];
    [NSURLConnection sendAsynchronousRequest:urlRequest
                                       queue:queue
                           completionHandler:^(NSURLResponse *response, NSData *responseData, NSError *error) {
                               if ([responseData length] > 0 && error == nil)
                               {
                                   // Not used for this request yet...
                               }
                               else if ([responseData length] == 0 && error == nil)
                               {
                                   // Success...
                                   [self didSendData];
                               }
                               else if (error != nil)
                               {
                                   // Connection error...
                                   NSLog(@"Error: %@", error);
                               }
                          }];
}

- (void)didSendData
{
    // Reset the batch...

    [productArray removeAllObjects];
    [self.tableView reloadData];

    [loadingOverlay dismissViewControllerAnimated:YES completion:NULL];
} 
```

加载视图控制器只是：

```
#import <UIKit/UIKit.h>

@interface LoadingOverlayViewController : UIViewController

@property (weak, nonatomic) IBOutlet UILabel *statusLabel;
@property (weak, nonatomic) IBOutlet UIActivityIndicatorView *activityIndicator;

@end

....

....

#import "LoadingOverlayViewController.h"

@interface LoadingOverlayViewController ()
@end

@implementation LoadingOverlayViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    [self.activityIndicator startAnimating];
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T05:23:37.987

我不确定问题的确切原因，但这里有一些关于您的代码的观察结果。

*   您不需要覆盖以防止用户交互。只需使用 -NSApplication beginIgnoringInteractionEvents 关闭用户交互。

*   您不需要整个视图控制器来显示覆盖视图。只显示视图。例如，当 NSURLConnection 发生时，我经常在视图中间放置一个大的 UIActivityIndi​​catorView。

*   您不需要 NSOperationQueue 即可异步使用 NSURLConnection。它已经是异步的。只需创建 NSURLConnection 并等待委托消息到达。实际上，您是在自欺欺人，因为您正在设置辅助队列，消息到达该队列，然后您调用桌面上的`didSendData`哪些调用`reloadData`- 在后台，这是非法的。如果您以正常方式执行此操作，您的委托消息将到达主线程，这正是您想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T16:14:50.653

我也有这个问题。我注意到这是在我的 nib 文件中复制和粘贴按钮的结果。这样做的结果是我不得不在 IBActions 上绑两个 1 UIButton。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T05:20:39.123

没关系，我搞定了。令人惊奇的是，半小时的休息时间可以整理一个人的思想……

该过程正在完成并在实际视图完成加载之前调用dismissViewController。从覆盖层上的 viewDidLoad 调用一个简单的委托就可以解决问题。

# android - 为什么我的 admob 广告之后有一个空白？

> ID：13373212
> 
> 赞同：0
> 
> 时间：2012-11-14T04:47:50.833
> 
> 标签：android, admob

我的 admob 广告和我的下一张图片之间有一个差距。为什么？间隙与广告的高度大致相同。这是我的 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="#ffffff"
android:gravity="center_horizontal"
android:orientation="vertical" >

 <LinearLayout
     android:id="@+id/linearad"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:layout_weight="0.1"
     android:orientation="horizontal" >
</LinearLayout>

<LinearLayout
    android:id="@+id/companylogo"
    android:layout_width="wrap_content"
    android:layout_height="0dp"
    android:layout_weight="0.2"
    android:background="@drawable/hotluxa"
    android:orientation="horizontal" >

    <ImageButton
        android:id="@+id/kisstabutton"
        android:layout_width="wrap_content"
        android:layout_height="0dp"
        android:src="@drawable/clear" />
</LinearLayout>

<LinearLayout
    android:id="@+id/vehicletype"
    android:layout_width="wrap_content"
    android:layout_height="0dp"
    android:layout_weight="0.5"
    android:orientation="vertical" >

    <ImageButton
        android:id="@+id/imageButton1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@drawable/corvetteconvertible"
        android:src="@drawable/clear" />
</LinearLayout>

<LinearLayout
    android:id="@+id/soundoptions"
    android:layout_width="wrap_content"
    android:layout_height="0dp"
    android:layout_weight="0.12"
    android:orientation="horizontal">

    <ImageButton
        android:paddingTop="2dp"
        android:paddingBottom="2dp"
        android:id="@+id/imageButton4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@drawable/greenbubble"
        android:src="@drawable/clear" />
</LinearLayout>

<ImageButton
    android:id="@+id/imageButton6"
    android:layout_width="wrap_content"
    android:layout_height="0dp"
    android:layout_weight="0.12"
    android:background="@drawable/fullversion"
    android:src="@drawable/clear" />

</LinearLayout> 
```

对于我的 java 文件（提取）： super.onCreate(savedInstanceState); setContentView(R.layout.mainxml); Log.e("main", "mainxml 加载正常");

```
 // Create the adView
    adView = new AdView(this, AdSize.BANNER, "a1509a21e11b5e1");

    // Lookup your LinearLayout assuming it's been given
    // the attribute android:id="@+id/mainLayout"
    LinearLayout layout = (LinearLayout) findViewById(R.id.linearad);
    Log.e("main", "1");
    // Add the adView to it
    layout.addView(adView);
    Log.e("main", "2");
    // Create an ad request. Check logcat output for the hashed device ID to
    // get test ads on a physical device.
    AdRequest adRequest = new AdRequest();
    adRequest.addTestDevice(AdRequest.TEST_EMULATOR);

    Log.e("main", "3");

    // Initiate a generic request to load it with an ad - should be when finished: adView.loadAd(new AdRequest());
    adView.loadAd(adRequest); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T14:40:40.523

清理旧案子。我相信 50dp 高度确实解决了。

# node.js - node js模块的分布

> ID：13373220
> 
> 赞同：2
> 
> 时间：2012-11-14T04:48:46.570
> 
> 标签：node.js, package, npm

我使用了此页面中解释的步骤：[http](http://nodejs.org/api/addons.html) : //nodejs.org/api/addons.html 并使用 node-gyp 工具成功创建了 addon.node 文件。它工作正常，它是一个 c++ 静态库的包装器。

现在我想分发它，我使用以下方法创建了 package.json 文件：

npm 初始化

并使用“npm install .-g”对其进行测试，但它会尝试重新编译模块，这将很难实现，因为它需要我嵌入到 .node 文件中的库，是否可以分发 .node 文件我已经在我的系统中编译了？

如何将编译后的 .node 文件包含到 npm 包中并将其上传到 npm 注册表。我确定我只是一步之遥，但我不知道从哪里开始。

我阅读了有关依赖项的信息，但似乎它适合您的模块依赖于其他模块，而不是您自己的 .node 文件。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T18:38:24.750

好的，我终于做到了我想要实现的目标，以下是其他人需要的选项：

1.  为避免编译，您可以创建一个新文件夹并将 package.json 与 .node 文件一起复制到其中，我没有找到这个，只是尝试了一下，它起作用了。
2.  提供所需的库以允许用户自己编译。

虽然第一个效果很好，但我需要为 windows、linux、mac 等创建一个包。这看起来很奇怪：“如果你在 linux 中使用：npm install xxx-linux”，所以我决定调整我的库允许用户进行模块编译。

为此，我创建了一个“client-dev”安装程序，其中预编译了所需的库，只要包含所需的头文件，然后使用预安装的库和头文件创建要编译的节点模块。我需要在我的网站上添加一个帮助来说明，为了安装模块，用户需要首先使用 apt-get、windows installer 或 mac pkg 安装依赖项。

虽然这对我有用，但我不知道从长远来看这是否可以维护，但我没有找到更好的方法来做到这一点。（最终启发我的目标的唯一链接是一个说：“如果你要使用带有预编译库的节点模块，你会做噩梦”，无论如何......我更喜欢这样做，而不是从头开始在节点 js 中进行完整的实现并维护 java、c#、nodejs、php 等的版本。

# sql - 表名作为表中的“类型”字段

> ID：13373222
> 
> 赞同：3
> 
> 时间：2012-11-14T04:48:52.410
> 
> 标签：sql, syntax

这有点难以搜索，因为所涉及的词在关系数据库领域是通用的，所以如果这是重复的，请指出正确的方向。

假设我有一个“热点”表。假设热点可能出现在任意数量的链接表中。我不想在所有链接表中进行不必要的查询，我想指定一个“热点”类型，这样我就可以首先得到我的结果，只找到特定类型的关系。

创建一个引用链接表真实名称的“link_type”列是不好的做法吗？例如说我有这些链接表：

```
table link_hotspot_collectable
table link_hotspot_minigame
table link_hotspot_factoid 
```

以下表格是具有不同数量/类型的数据的唯一表格

```
table collectable
table minigame
table factoid 
```

那么“link_type”列的可能值将是“collectable”或“minigame”（或者我想我可以使用整个链接表名称“link_hotspot_factoid”

这是一个好方法吗？是否有更有效或更好的模式来形成更容易/更快的查询？

目的是将“热点”（像素映射空间中的几何坐标）与任何其他一组动作/收藏品/游戏进行概括。游戏表将与收藏品表的架构大不相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T20:55:19.060

考虑下面的模式（把它放在通用示例中，以便我可以用更简单的方式描述它）：

```
 ___________     _________     _____
|Cars       |   |Planes   |   |Parts|
-------------   -----------   -------
|-Id        |   |-Id      |   |-Id  |
|-RideHeight|   |-Wingspan|   |-Name|
-------------   -----------   -------
 ___________     ___________
|Plane_Parts|   |Car_Parts  |
-------------   -------------
|-PlaneId   |   |-CarId     |
|-PartId    |   |-PartId    |
-------------   ------------- 
```

我认为您要问的是是否可以更改`Parts`以包含类型鉴别器，它会使查询更快/更容易：

```
 ______
|Parts |
--------
|-Id   |
|-Name |
|-Type | (Plane, Car, etc.)
 ------ 
```

在这个新模式中，您希望执行以下操作：“我有一个零件 ID，找到零件，然后如果它是一架飞机，我将查询飞机信息而不是查看汽车”。考虑后果：

*   您刚刚在数据库中复制了信息。在原始模型中，连接表已经声明了哪些类型的零件连接到哪种类型的车辆。您现在要添加另一列，该列必须手动设置并以未经检查的方式提供相同的信息。这很容易失去同步，给你带来很容易避免的头痛。

*   您已经取消了将一个部件同时应用于飞机或汽车的功能。原始模式可能包含在飞机或汽车中使用的收音机，但添加类型字段会消除这种可能性。您的架构可能永远不会出现这种情况，但它会给任何试图理解您的架构的人带来困惑。不幸的是，约束：“每个部分只能连接到表中的`Cars`记录***或***表中的记录`Planes`”是不可能的，但指定的类型列也不能保证。

*   无论如何，获得你想要的结果从来没有那么困难/缓慢。对于熟悉 SQL 的任何人来说，所有相关表的连接就像决定查询的第二部分应该是什么的 switch 语句一样清楚。实际上，您描述的方式可能会更慢，因为您必须拉下整个集合，然后运行另一个查询以获得您正在寻找的结果。SQL Server 可能会即时执行此操作，并根据现有索引构建必要的结果。

希望这与您所描述的相似。如果是这样，我认为添加一个`Type`值得管理类型列的困难的字段没有任何好处。如果这不是您所描述的，请告诉我，我可以修复此响应。

# apache-flex - Flex 中的时区示例？

> ID：13373232
> 
> 赞同：0
> 
> 时间：2012-11-14T04:50:12.027
> 
> 标签：apache-flex, date, timezone

实际上，在我的 Flex 应用程序中，我将 Date（字符串格式）以及 Timezone（String 格式）转换为 Date 类型，但它没有转换 Date 类型......它给出的是 null 值，而我的

像这样的示例代码...

```
 var tzDate:String="20012-12-12";
       var tzString:String=tzComboBox.selectedItem;//hear value GMT+0530
       var startDate:Date = DateField.stringToDate(tzDate+" "+tzString,"YYYY-MM-DD TZD");
       Alert.show(startDate);//hear value giving "Null" 
```

问题是它没有转换日期格式...请帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T06:06:47.967

解析前使用解析函数和格式化日期

```
var tzDate:String="2012-12-12";
var tzString:String="GMT+0530";

var dateformat:DateFormatter = new DateFormatter();
dateformat.formatString = "YYYY/MM/DD";

var dateStr:String = dateformat.format(tzDate) +" "+ tzString;
//dateStr is 2012/12/12 GMT+0530
var startDate:Date =  new Date(Date.parse(dateStr));
Alert.show(startDate.toString());
//Show Date of Local time Zone
//Tue Dec 11 21:30:00 GMT+0300 2012 
```

希望有帮助

# perl - 使用perl的excel图表

> ID：13373235
> 
> 赞同：5
> 
> 时间：2012-11-14T04:50:51.950
> 
> 标签：perl

当我运行脚本时，我遇到了问题，它在chart_column.pl 第33行通过包“Spreadsheet::WriteExcel”找不到对象方法“add_chart”之类的错误。我可以知道这里有什么问题吗？我正在使用为 x86_64-linux 构建的 perl，v5.8.5。#!/usr/bin/perl -w

```
###############################################################################
#
# A simple demo of Column charts in Spreadsheet::WriteExcel.
#
# reverse('©'), December 2009, John McNamara, jmcnamara@cpan.org
#

use strict;
use Spreadsheet::WriteExcel;

my $workbook  = Spreadsheet::WriteExcel->new( 'chart_column.xls' );
my $worksheet = $workbook->add_worksheet();
my $bold      = $workbook->add_format( bold => 1 );

# Add the worksheet data that the charts will refer to.
my $headings = [ 'Category', 'Values 1', 'Values 2' ];
my $data = [
    [ 2, 3, 4, 5, 6, 7 ],
    [ 1, 4, 5, 2, 1, 5 ],
    [ 3, 6, 7, 5, 4, 3 ],
];

$worksheet->write( 'A1', $headings, $bold );
$worksheet->write( 'A2', $data );

###############################################################################
#
# Example 1\. A minimal chart.
#
my $chart1 = $workbook->add_chart( type => 'column' );

# Add values only. Use the default categories.
$chart1->add_series( values => '=Sheet1!$B$2:$B$7' );

# Insert the chart into the main worksheet.
$worksheet->insert_chart( 'E2', $chart1 ); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T04:58:03.003

只需将 embedded => 1 添加到 add_chart 调用中：

**Perl**

```
my $chart1 = $workbook->add_chart( type => 'column', embedded => 1 ); 
```

# javascript - 使用链接登录网站

> ID：13373237
> 
> 赞同：2
> 
> 时间：2012-11-14T04:50:55.420
> 
> 标签：javascript, google-chrome, google-chrome-extension, cross-domain

我正在寻找带有链接的各种社交媒体网站。我已经有了可用的用户名和密码，我可以通过我使用的系统将它们传递到我喜欢的任何类型的结构中。我的基本问题是：无论如何要获取这些数据，然后打开一个新标签/页面，填充字段并使用网络技术登录，还是我应该寻找构建一个 Chrome 插件？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T16:12:46.973

要通过链接登录，社交网络/网站管理员必须提供此类功能，但出于安全原因，大多数网站不具备此类功能。有许多插件/插件（其中一些甚至适用于多个浏览器/平台。

我使用 LastPass 来存储我的密码并在网站上自动登录。LastPass 可用于许多平台且免费（无需智能手机/移动设备访问）。

# regex - 在普通bash中使用正则表达式提取子字符串

> ID：13373249
> 
> 赞同：123
> 
> 时间：2012-11-14T04:52:02.290
> 
> 标签：regex, bash

我正在尝试使用 bash 从字符串中提取时间，但我很难弄清楚。

我的字符串是这样的：

```
US/Central - 10:26 PM (CST) 
```

我想提取`10:26`部分。

任何人都知道仅使用 bash 执行此操作的方法 - 不使用 sed、awk 等？

就像，在 PHP 中我会使用 - 不是最好的方式，但它可以工作 - 类似：

```
preg_match( ""(\d{2}\:\d{2}) PM \(CST\)"", "US/Central - 10:26 PM (CST)", $matches ); 
```

感谢您的帮助，即使答案使用 sed 或 awk

* * *

## 回答 #1

> 赞同：252
> 
> 时间：2012-11-14T04:54:29.163

使用纯[bash](/questions/tagged/bash "显示标记为“bash”的问题")：

```
$ cat file.txt
US/Central - 10:26 PM (CST)
$ while read a b time x; do [[ $b == - ]] && echo $time; done < file.txt 
```

bash regex 的另一个解决方案：

```
$ [[ "US/Central - 10:26 PM (CST)" =~ -[[:space:]]*([0-9]{2}:[0-9]{2}) ]] &&
    echo ${BASH_REMATCH[1]} 
```

另一种使用`grep`和环顾高级正则表达式的解决方案：

```
$ echo "US/Central - 10:26 PM (CST)" | grep -oP "\-\s+\K\d{2}:\d{2}" 
```

使用 sed 的另一种解决方案：

```
$ echo "US/Central - 10:26 PM (CST)" |
    sed 's/.*\- *\([0-9]\{2\}:[0-9]\{2\}\).*/\1/' 
```

使用 perl 的另一种解决方案：

```
$ echo "US/Central - 10:26 PM (CST)" |
    perl -lne 'print $& if /\-\s+\K\d{2}:\d{2}/' 
```

最后一个使用 awk ：

```
$ echo "US/Central - 10:26 PM (CST)" |
    awk '{for (i=0; i<=NF; i++){if ($i == "-"){print $(i+1);exit}}}' 
```

* * *

## 回答 #2

> 赞同：133
> 
> 时间：2016-04-22T16:14:58.337

```
 echo "US/Central - 10:26 PM (CST)" | sed -n "s/^.*-\s*\(\S*\).*$/\1/p"

-n      suppress printing
s       substitute
^.*     anything at the beginning
-       up until the dash
\s*     any space characters (any whitespace character)
\(      start capture group
\S*     any non-space characters
\)      end capture group
.*$     anything at the end
\1      substitute 1st capture group for everything on line
p       print it 
```

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2012-11-14T08:01:57.810

Quick 'n dirty、无正则表达式、低鲁棒性的斩波技术

```
string="US/Central - 10:26 PM (CST)"
etime="${string% [AP]M*}"
etime="${etime#* - }" 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2019-03-26T19:06:17.957

如果你的字符串是

```
foo="US/Central - 10:26 PM (CST)" 
```

然后

```
echo "${foo}" | cut -d ' ' -f3 
```

将完成这项工作。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2021-07-19T15:04:48.983

foo="美国/中部 - 晚上 10:26 (CST)"

回声 ${foo} | 日期 +%H:%M

# php - PHP 本地主机应用程序连接到服务器数据库

> ID：13373253
> 
> 赞同：2
> 
> 时间：2012-11-14T04:52:56.757
> 
> 标签：php, mysql, database, hosting

我想问一下如何将我的本地主机应用程序（C：xampp/htdocs/myproject）连接到我的服务器主机（www.someweb.somedomain）上的数据库？

我可以这样做吗？如果是，如何在我的 php 配置中连接它？现在我的配置（server.php）是：

```
<?php
    $host = "my web IP public:3306";
    $user = "root";
    $pass = "";
    $db = "dispatcherDB";

    $conn = mysql_connect($host, $user, $pass) or die ("Cant connect to mySQL");
    mysql_select_db($db);
?> 
```

我得到了什么：

> 警告：mysql_connect()：无法建立连接，因为目标机器主动拒绝了它。在第 7 行的 C:\xampp\htdocs\XMS\server.php

那么，我必须为 $host 填写什么？我正在尝试使用网站IP，它仍然无法连接。也许这里有人有这个问题的经验？

对不起，我的英语不好

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T04:56:16.163

如果您对远程服务器具有 cPanel 访问权限，那么您需要提及它应该允许从哪些 IP 地址访问 MySQL。

在 cPanel 中，您将在标题 Databases 下获得 Remote MySQL： ![在此处输入图像描述](../Images/5e0e924153ad70df8340f746d9dd43b8.png)

单击远程 MySQL 将为您提供添加主机的选项，以允许连接到您的 MySQL 服务器：

![在此处输入图像描述](../Images/575f5634d12eb01929be9a768391e307.png)

此外，您可以检查`localhost`而不将端口号指定为`$host`..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T04:59:51.263

可能 Mysql 服务器不允许从远程服务器进行 root 访问。

你可以查看[这篇](https://stackoverflow.com/questions/6239131/how-to-grant-remote-access-permissions-to-mysql-server-for-user)文章

# javascript - 无法在下拉菜单中重新定义 div 高度

> ID：13373259
> 
> 赞同：2
> 
> 时间：2012-11-14T04:55:02.343
> 
> 标签：javascript, jquery, html, css, drop-down-menu

我在重新定义用作下拉菜单背景的 div 的 height 属性时遇到了麻烦。想法是当你点击列表中的一个项目时，嵌套列表和背景div滑出，然后如果你点击主列表中的另一个项目，第一个嵌套列表和背景div向上滑动，新列表和然后背景 div 向下滑动。我的问题是背景 div 高度没有被重新定义，它保持第一个列表的高度。这是我的jQuery：

```
 $(function() {

    $( "ul.hmenu li a" ).click(function() {

        var parentUlHeight = $("ul.hmenu").outerHeight(true) - 1;
        var newUlHeight, oldUlHeight;

        // REMOVE OLD SELECTION
        $(".currentSelection").siblings('ul').slideUp("fast"); //find old selection and slide up its sibling ul
        oldUlHeight = $(".currentSelection").siblings('ul').height();
        $('#subnavdiv').slideUp("fast");
        $(".currentSelection").removeClass("currentSelection"); //remove the class from the old selection

        // MAKE NEW CURRENT SELECTION
        $(this).addClass("currentSelection");
        newUlHeight = $(".currentSelection").siblings('ul').height(); //calc height of new current selection subnav
        $(this).siblings('ul').slideDown("slow");

        // ANIMATE DIV BACKGROUND
        $('#subnavdiv').css( "top", parentUlHeight + "px" ); //position div at right height

        $('#subnavdiv').height( newUlHeight ); // set height to new selection height -- NOT WORKING
        $('#subnavdiv').slideDown("slow");

    });
}); 
```

HTML：

```
<nav class="nav clearfix desktop-nav" style="left: 146px;">
    <ul class="hmenu">
        <li class="item-103 current active"><a href="#">Home</a>
        <li class="item-105 deeper parent">
            <a href="#">Our Team</a>
            <ul class="hmenu-left-to-right" style="">
                <li class="item-145">link</li>
                <li class="item-146">link</li>
            </ul>
        </li>
    </ul>
    <div id="subnavdiv"></div> 
```

CSS

```
#subnavdiv {
width: 900px;
background: #607852;
display: none;
position: absolute;

-webkit-border-radius: 0 0 25px 25px;
-moz-border-radius: 0 0 25px 25px;
border-radius: 0 0 25px 25px;
} 
```

任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T22:07:26.500

这应该让你接近你正在寻找的东西 [http://jsfiddle.net/F9De4/](http://jsfiddle.net/F9De4/)

您可以改为将类名添加`".main-link"`到您的锚标记而不是`"ul.hmenu li a"`

```
$(".main-link").toggle(function(){

    var newUlHeight = $(this).parent().find(".hmenu-left-to-right").height();

    $(this).parent().find(".hmenu-left-to-right").hide("fast");

    $('#subnavdiv').hide();

    $("#subnavdiv").css("height",newUlHeight);
    $('#subnavdiv').slideDown("slow");

},function(){

    var newUlHeight = $(this).parent().find(".hmenu-left-to-right").height();
    $(this).parent().find(".hmenu-left-to-right").show("fast");

    $('#subnavdiv').hide();

    $("#subnavdiv").css("height",newUlHeight);
    $('#subnavdiv').slideDown("slow");

}); 
```

# mysql - 删除从mysql创建的文件

> ID：13373260
> 
> 赞同：14
> 
> 时间：2012-11-14T04:55:09.820
> 
> 标签：mysql, sql, permissions, filesystems, mysqldump

我在mysql中执行了查询

```
select * into outfile "/tmp/results.out" from table_x; 
```

进而将该表中的所有记录写入 /tmp 目录中的文件。该文件是使用以下权限创建的。

```
-rw-rw-rw- 1 mysql mysql 6.6K Nov 14 10:14 /tmp/results.out 
```

我知道无法从我的登录名中删除此文件。但我尝试从 MySQL 中删除它，但我收到以下错误消息：

```
mysql> system rm /tmp/results.out
rm: cannot remove `/tmp/results.out': Operation not permitted 
```

PS：我没有root权限。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T08:24:05.137

该文件的所有者组是 mysql。请使用该`id`命令找出该组的另一个用户并尝试将其删除。您用于删除文件的用户 ID 似乎对 tmp 目录没有写入权限。

你能截断文件的内容吗？**请仅在您不希望 /tmp/ 中的 results.out 文件时执行此操作**

```
echo " " > /tmp/results.out 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T20:37:43.373

您总是可以像创建文件一样用小而无害的东西覆盖文件。

Unix 系统上的常见做法是在重新启动时清除 /tmp/*，因此它也不会永远留在那里。

# jquery - 使用jQuery将像素转换为百分比

> ID：13373261
> 
> 赞同：4
> 
> 时间：2012-11-14T04:55:16.063
> 
> 标签：jquery, css

我想知道是否有办法将像素转换为百分比......我有一个代码，我成功地获得了全宽的值，但唯一能让对象保持在中心的方法，我必须使用百分比。

这是我用来获取我需要转换为百分比的宽度值的方法。

```
$(document).ready(function(){
    var sp = $('.slide'),
        winWidth = $('#slides').width();
        console.log(winWidth);

    sp.css('width', winWidth);
}); 
```

谢谢您的帮助。

[这是更新的小提琴链接。](http://jsfiddle.net/imarkdesigns/4SwmE/4/) *注意：我在这里想要的是将“.slide”容器设置为流体，以使对象仍处于中心位置。随意修改我的小提琴。现在我使用我给定的jQuery代码来获取“#slide”的确切宽度，以像素百分比（'.slide'）为单位。然后，尝试调整浏览器的大小以查看幻灯片框架的输出。我使用 SlidesJS 插件仅供参考。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-14T05:03:30.607

```
percent = ($("#your_element").width() / $("#some_parent_id").width()) * 100 
```

`$("#your_element")`你想计算宽度的元素在哪里，你想计算宽度的元素在`%`哪里`$("#some_parent_id")`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T05:02:41.563

百分比将是像素的实际值（由 获得`.width`）除以块的像素宽度值（可能通过 获得`$("#slides").parent().width()`）乘以 100。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T10:47:08.263

试试这个：

```
 $(document).ready(function(){
        var sp = $('.slide'),
            winWidth = $('#slides').width(),
        wWidth = $(window).width();
        sp.width(((winWidth / wWidth) * 100)+'%');
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T08:04:40.733

好的，我发现“#slides”不是我需要获取宽度值的正确元素，因为它也是幻灯片框架的一部分，而不是我得到事件浏览器屏幕大小的值，我必须通过每次浏览器屏幕调整大小时的值。

请检查此链接以查看更新的小提琴。 [更新的小提琴源](http://jsfiddle.net/imarkdesigns/4SwmE/6/)

这是我发现对纠正我的问题有用的代码。

```
$(window).resize(function() {
  var sp = $('#slides .slide');
  console.log(document.body.clientWidth);
  winWidth = document.body.clientWidth;
  sp.css('width', winWidth);
}); 
```

在这种情况下，我可以完全调整我的宽度并自动调整我的类元素宽度，而不会让我的中心对象卡在同一个地方。:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-11-23T06:41:03.183

使用简单的公式计算像素到百分比

对于 jquery 用户

```
var w=$("#container").width();
var h=$("#container").height(); 
```

对于 javascript 用户

```
var w=element.getBoundingClientRect().width;
var h=element.getBoundingClientRect().height; 
```

x 轴百分比

```
var xPercent=Math.round(x/w*100); //x is your pixal value 
```

y轴百分比

```
var yPercent=Math.round(y/h*100); // y is your pixal value 
```

对于拖动用户，使用内部移动功能

```
 function pixelToPercent(x,y)
{
     var xPercent=Math.round(x/w*100); //x is your pixal value
     var yPercent=Math.round(y/h*100); // y is your pixal value 

return {
xPercent,
yPercent}

 } 
```

# android - 设置不同的可点击部分图像android

> ID：13373262
> 
> 赞同：1
> 
> 时间：2012-11-14T04:55:23.507
> 
> 标签：android, image, view, onclicklistener

我正在使用 android 关于图像和 onclick 侦听器。我的应用程序的目的是监视用户在屏幕上单击的区域。例如，我有一张包含矩形和圆形的图片。假设整个图片的颜色是棕色（木头）。所以当我点击矩形时，矩形的颜色会变成黄色。当我点击图片的一个部分时，该部分的颜色会改变它的颜色，但其他部分不会改变。所以，我正在考虑这个应用程序的解决方案。是不是必须把这张图单独剪下来，用相对审查的方式放到屏幕上？或者有没有其他方法可以做到这一点（建立一个协调系统）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T05:20:39.107

是的，您必须单独剪切此图片并使用相关评论将它们放入屏幕。例如两个`ImageView`有你的背景。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T05:23:40.373

您可以按照另一篇文章的推荐使用图像，或者使用具有特定大小按钮的 RelitiveLayout 覆盖图像（背景 = @android/color/transparent）

# java - Java代码压缩和解压一个字符串

> ID：13373267
> 
> 赞同：-1
> 
> 时间：2012-11-14T04:56:09.627
> 
> 标签：java, string, compression

> **可能重复：**
> [写一个简单的JAVA程序来压缩一个字符串并解压这个字符串](https://stackoverflow.com/questions/13373078/write-a-simple-java-program-to-compress-a-string-and-decompress-the-string)

我在弄清楚如何检查字符串中是否有连续的相同字符然后连续计算相同的字符然后打印出来然后给出该字符计数的最后一次出现的位置然后打印出来然后移动到字符串中与前一个字符不同的下一个字符，并且程序区分大小写。

所以输入可能是：aaaaAAAbbbddccc

我将如何将此字符串压缩为： a4A3b3d2c3 ？然后解压？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T05:00:04.243

**没有人在这里做你的作业所以请在提出问题之前付出一些努力**

无论如何你只需要在字符串的每个索引处检查字符，然后在计数后将其添加到下一个。`String.charAt(indexNumber)`方法可以帮助你:)
这是给你的示例代码

```
 String orginalString = "AAAaaaBBBbbb",
        compressedString = "";

        String found =Character.toString(orginalString.charAt(0));
        int counter = 0;
        for(int a=1;a<orginalString.length();a++){

            if(found.equals(Character.toString(orginalString.charAt(a))))
            {
                counter++;
            }
            else{

                compressedString = compressedString+(found+counter);
                counter =0;
                found = Character.toString(orginalString.charAt(a));
                a--;
            }
        }

        System.out.println("Here is you compressed String"+compressedString );
} 
```

# blackberry-10 - 将库添加到级联中

> ID：13373269
> 
> 赞同：2
> 
> 时间：2012-11-14T04:56:24.423
> 
> 标签：blackberry-10

嗨，我正在开发一个应用程序来解压缩 blackberry10 中的文件。对于解压缩文件，我使用的是从 github 获得的 quazip 库代码。但我不知道如何将此库添加到我的项目中，任何人都可以告诉我如何将库添加到黑莓级联。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T17:43:03.307

要在 Momentics 中将库添加到您的 BlackBerry 10 项目，您只需右键单击该项目并转到配置->添加库...

这将启动添加库向导，您可以在其中指定库的路径。请记住更新您的`.pro`文件。执行此操作的说明在向导中。如果您要动态链接它，您还需要更新您`bar-descriptor.xml`的库，以便将该库作为资产打包在您的 BAR 文件中。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-13T05:07:32.817

我有在我的项目中使用 quazip 库的成功经验。为了让它在您的应用程序中运行，您需要遵循以下步骤：

**1.从**[QuaZip 主页](http://quazip.sourceforge.net/)下载 zip 存档的副本

**2.**将以下文件复制到您的项目源文件夹中：

```
qioapi.cpp
quazip.cpp
quazipfile.cpp
quazipnewinfo.cpp
unzip.c
zip.c
crypt.h
ioapi.h
quazipdir.h
quazipfile.h
quazipfileinfo.h
quazip_global.h
quazip.h
quazipnewinfo.h
unzip.h
zip.h 
```

**3.**创建一个用于处理档案的实用程序类：

头文件：

```
#ifndef ZIPPER_H_
#define ZIPPER_H_

#include <QObject>
#include <QDir>

#include "quazip.h"
#include "quazipfile.h"

class Zipper : public QObject {
        Q_OBJECT

public:
        Zipper() {}
        virtual ~Zipper() {}

        static bool extract(const QString & filePath, const QString & extDirPath, const QString & singleFileName = QString(""));
        static bool archive(const QString & filePath, const QDir & dir, const QString & comment = QString(""));

        Q_DISABLE_COPY(Zipper)
}; 
```

源文件：

```
#include <QFile>
#include <QDir>
#include "Zipper.h"

bool Zipper::extract(const QString & filePath, const QString & extDirPath, const QString & singleFileName) {
        QuaZip zip(filePath);

        if (!zip.open(QuaZip::mdUnzip)) {
            qWarning("testRead(): zip.open(): %d", zip.getZipError());
            return false;
        }

        zip.setFileNameCodec("IBM866");

        qWarning("%d entries\n", zip.getEntriesCount());
        qWarning("Global comment: %s\n", zip.getComment().toLocal8Bit().constData());

        QuaZipFileInfo info;

        QuaZipFile file(&zip);

        QFile out;
        QString name;
        char c;
        for (bool more = zip.goToFirstFile(); more; more = zip.goToNextFile()) {

            if (!zip.getCurrentFileInfo(&info)) {
                qWarning("testRead(): getCurrentFileInfo(): %d\n", zip.getZipError());
                return false;
            }

            if (!singleFileName.isEmpty())
                if (!info.name.contains(singleFileName))
                    continue;

            if (!file.open(QIODevice::ReadOnly)) {
                qWarning("testRead(): file.open(): %d", file.getZipError());
                return false;
            }

            name = QString("%1/%2").arg(extDirPath).arg(file.getActualFileName());

            if (file.getZipError() != UNZ_OK) {
                qWarning("testRead(): file.getFileName(): %d", file.getZipError());
                return false;
            }

            //out.setFileName("out/" + name);
            qWarning ("using %s for output fileName", qPrintable(name));
            out.setFileName(name);

            // this will fail if "name" contains subdirectories, but we don't mind that
            out.open(QIODevice::WriteOnly);
            // Slow like hell (on GNU/Linux at least), but it is not my fault.
            // Not ZIP/UNZIP package's fault either.
            // The slowest thing here is out.putChar(c).
            while (file.getChar(&c)) out.putChar(c);

            out.close();

            if (file.getZipError() != UNZ_OK) {
                qWarning("testRead(): file.getFileName(): %d", file.getZipError());
                return false;
            }

            if (!file.atEnd()) {
                qWarning("testRead(): read all but not EOF");
                return false;
            }

            file.close();

            if (file.getZipError() != UNZ_OK) {
                qWarning("testRead(): file.close(): %d", file.getZipError());
                return false;
            }
        }

        zip.close();

        if (zip.getZipError() != UNZ_OK) {
            qWarning("testRead(): zip.close(): %d", zip.getZipError());
            return false;
        }

        return true;
}

bool Zipper::archive(const QString & filePath, const QDir & dir, const QString & comment) {

        QuaZip zip(filePath);
        zip.setFileNameCodec("IBM866");

        if (!zip.open(QuaZip::mdCreate)) {
            qDebug("testCreate(): zip.open(): %d", zip.getZipError());
            return false;
        }

        if (!dir.exists()) {
            qDebug("dir.exists(%s)=FALSE", qPrintable(dir.absolutePath()));
            return false;
        }

        QFile inFile;

        QStringList sl;
        // what's this ??
//      recurseAddDir(dir, sl);

        QFileInfoList files;
        foreach (QString fn, sl) files << QFileInfo(fn);

        QuaZipFile outFile(&zip);

        char c;
        foreach(QFileInfo fileInfo, files) {

            if (!fileInfo.isFile())
                continue;

            QString fileNameWithRelativePath = fileInfo.filePath().remove(0, dir.absolutePath().length() + 1);

            inFile.setFileName(fileInfo.filePath());

            if (!inFile.open(QIODevice::ReadOnly)) {
                qDebug("testCreate(): inFile.open(): %s", qPrintable(inFile.errorString()));
                return false;
            }

            if (!outFile.open(QIODevice::WriteOnly, QuaZipNewInfo(fileNameWithRelativePath, fileInfo.filePath()))) {
                qDebug("testCreate(): outFile.open(): %s", qPrintable(outFile.getZipError()));
                return false;
            }

            while (inFile.getChar(&c) && outFile.putChar(c));

            if (outFile.getZipError() != UNZ_OK) {
                qDebug("testCreate(): outFile.putChar(): %d", outFile.getZipError());
                return false;
            }

            outFile.close();

            if (outFile.getZipError() != UNZ_OK) {
                qDebug("testCreate(): outFile.close(): %d", outFile.getZipError());
                return false;
            }

            inFile.close();
        }

        if (!comment.isEmpty())
            zip.setComment(comment);

        zip.close();

        if (zip.getZipError() != 0) {
                qDebug("testCreate(): zip.close(): %d", zip.getZipError());
            return false;
        }

        return true;
} 
```

**4.**然后像这样在你的项目中使用它：

```
bool rc = Zipper::extract(filePath, pathToUnpack);
qDebug("extracting %s", rc ? "success" : "failure"); 
```

# excel - 在 Excel 中将文本 (12.05.79) 转换为日期

> ID：13373272
> 
> 赞同：0
> 
> 时间：2012-11-14T04:56:47.940
> 
> 标签：excel, date, spreadsheet

我已将一些日期导入到 Excel 文档中，我需要将它们格式化为日期而不是文本字符串。

格式是这样的：`12.05.79`但是当我将格式设置为日期时，excel什么都不做。

有什么办法可以做到这一点？

C

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T13:16:09.423

无需额外列即可“原位”转换的两种可能方法

1 - 使用“文本到列”

选择日期列然后数据>文本到列>下一步>下一步>“在列数据格式下”选择“日期”和下拉菜单中的格式（MDY或DMY）>确定

2 - 使用编辑/替换。代替 ”。” 带“/”（在这两种情况下都没有引号）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T05:08:15.560

更改格式不会更改值（或在本例中为文本）。您必须使用宏，或者只使用具有以下公式的辅助列。然后，您可以复制/粘贴值并删除第一列

```
=DATEVALUE(SUBSTITUTE(A1,".","/")) 
```

# c - 当指向结构的指针作为参数传递给函数时如何填充结构

> ID：13373273
> 
> 赞同：1
> 
> 时间：2012-11-14T04:57:08.230
> 
> 标签：c, linux, operating-system

我有一个功能：

```
func (struct passwd* pw)
{

struct passwd* temp;
struct passwd* save;

temp = getpwnam("someuser");
/* since getpwnam returns a pointer to a static 
 * data buffer, I am copying the returned struct
 * to a local struct.
 */

if(temp) {
   save = malloc(sizeof *save);
   if (save) {
       memcpy(save, temp, sizeof(struct passwd));
       /* Here, I have to update passed pw* with this save struct. */
       *pw = *save; /* (~ memcpy) */
   }
}

} 
```

调用 func(pw) 的函数能够获取更新的信息。

但是像上面那样使用它就可以了。语句 *pw = *save 不是深拷贝。我不想像 pw->pw_shell = strdup(save->pw_shell) 等一一复制结构的每个成员。

有没有更好的方法呢？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T05:08:22.703

如果你愿意，你可以做一个浅拷贝，但结果只会在下一次调用 getpenam 之前是好的。但为什么要复制两次？您的 malloc 是内存泄漏！这会很好：

```
void func (struct passwd *pw)
{
  struct passwd *tmp = getpenam("someuser"); // get a pointer to a static struct
  *pw = *tmp;  // copy the struct to caller's storage.
} 
```

如果你想要深拷贝，你必须逐个字段地做：

```
void deep_func (struct passwd *pw)
{
  struct passwd *tmp = getpenam("someuser"); // get a pointer to a static struct
  *pw = *tmp; // copy everything
  pw->pw_name = safe_strdup(pw->pw_name);  // Copy pointer contents.
  pw->pw_passwd = safe_strdup(pw->pw_passwd);
  // etc for all pointer fields
} 
```

对于深拷贝，您需要一个相应的例程来释放 malloc() 的存储：

```
void free_passwd_fields(struct passwd *pw)
{
  free(pw->pw_name);
  free(pw->pw_passwd);
  // etc
} 
```

一个很好的调用方式是：

```
// Declare a 1-element array of structs.  
// No &'s are needed, so code is simplified, and a later change to malloc()/free() is very simple.
struct passwd pw[1];

// ... and later
func(pw);

// pw now behaves like a pointer to a struct, but with no malloc or free needed.
// For example:
printf("login name is %s\n", pw->pw_name);

// Done with copy.  Free it.
free_passwd_fields(pw); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T05:00:11.273

函数参数需要是`struct passwd**`，然后改变`*passwd`

# python - 如何根据 len-1 或 len+1 像在字典中一样匹配单词？Python

> ID：13373276
> 
> 赞同：2
> 
> 时间：2012-11-14T04:57:23.977
> 
> 标签：python, list, comparison

如果我有一个单词'raqd'，我将如何使用python进行拼写检查，可以这么说，在'spellcheck'中找到单词'rad'作为选项？我一直在尝试做的是：

```
def isbettermatch(keysplit, searchword):
    i = 0
    trues = 0
    falses = 0

    lensearchwords = len(searchword)

    keysplits = copy.deepcopy(keysplit)
    searchwords = copy.deepcopy(searchword)
    #print keysplit, searchwords
    if len(keysplits)  == len(searchwords)-1:
        i = 0
        while i < len(keysplits):
            j = 0
            while j < lensearchwords:
                if keysplits[i] == searchwords[j]:
                    trues +=1
                    searchwords.pop(j)
                    lensearchwords = len(searchwords)
                elif keysplits[i] != searchwords[j]:
                    falses +=1
                j +=1
            i +=1
        if trues >= len(searchwords)-1:
            #print "-------------------------------------------------------", keysplits
            return True 
```

`keysplit``['s', 'p', 'o', 'i', 'l']`例如，是一个列表，而`searchword`将是一个列表`['r', 'a', 'q', 'd']`。

如果函数返回`True`，那么它将打印匹配的关键字。前任。'rad'，代表`searchword`'raqd'。

我需要通过`searchword`单个字母添加或删除找到所有可能的匹配项。

所以前。“raqd”可以选择“rad”，“poted”可以是“posted”或“potted”。

到目前为止，我一直在尝试使用列表来比较每个单词中的字符。我的问题是：为什么我目前的策略不起作用，我该如何改进它？我不确定为什么它给了我不正确的输出：

```
dna   ira   fra   had   har   nra   jar   jaq   bra   era   amd 
```

只是我得到的单词的一个小例子

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T05:15:24.677

很久以前，我不得不为课程作业编写一次拼写检查器。它几乎必须按照您所说的进行：给定一个“单词”，在给定单个字母添加或删除的情况下建议所有可能的匹配项。我记得做的是将主字典单词列表加载到哈希表中（具有快速 O(1) 访问的东西），然后对于给定的单词，生成所有可能的字母添加和删除组合，并检查它们是否在主词汇表。任何匹配都将用作建议。

对于更复杂的拼写检查器，您可以尝试使用 Levenshtein 距离编写 BK-Tree：http: [//blog.notdot.net/2007/4/Damn-Cool-Algorithms-Part-1-BK-Trees](http://blog.notdot.net/2007/4/Damn-Cool-Algorithms-Part-1-BK-Trees)

# asp.net-mvc - 仅在 MVC 中提供第一个参数时，路由参数返回 null

> ID：13373284
> 
> 赞同：1
> 
> 时间：2012-11-14T04:58:13.647
> 
> 标签：asp.net-mvc, razor, asp.net-mvc-4, asp.net-mvc-routing

我的问题是我在 MVC 中制作了一个 Map Route，它采用三个参数。当我提供全部三个或两个时，参数会从 URL 传递到我的控制器。但是，当我只提供第一个参数时，它不会被传递并返回 null。不知道是什么导致了这种行为。

路线：

```
 routes.MapRoute(
            name: "Details",                                              // Route name
            url: "{controller}/{action}/{param1}/{param2}/{param3}",                           // URL with parameters
            defaults: new { controller = "Details", action = "Index", param1 = UrlParameter.Optional, param2 = UrlParameter.Optional, param3 = UrlParameter.Optional }  // Parameter defaults
         ); 
```

控制器：

```
 public ActionResult Map(string param1, string param2, string param3)
    {

        StoreMap makeMap = new StoreMap();
        var storemap = makeMap.makeStoreMap(param1, param2, param3);
        var model = storemap;
        return View(model);
    } 
```

当我导航到以下位置时，字符串 param1 返回 null：

/StoreMap/Map/PARAM1NAME

但是当我导航到以下位置时它不会返回 null：

/StoreMap/Map/PARAM1NAME/PARAM2NAME

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T05:15:25.090

很可能是默认路由有干扰。我相信项目模板中定义的默认路由如下所示：

```
 routes.MapRoute(
        name: "Default",
        url: "{controller}/{action}/{id}",
        defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
     ); 
```

只有一个参数的 URL 与此模式匹配，但由于您`id`的方法签名中没有参数，因此该值不会填充到您的任何参数中。

您可以尝试更改“详细信息”路由以将控制器硬编码为“详细信息”，如下所示，并将其移动到默认路由之前：

```
 routes.MapRoute(
        name: "Details",                                              // Route name
        url: "Details/{action}/{param1}/{param2}/{param3}",                           // URL with parameters
        defaults: new { controller = "Details", action = "Index", param1 = UrlParameter.Optional, param2 = UrlParameter.Optional, param3 = UrlParameter.Optional }  // Parameter defaults
     );

    routes.MapRoute(
        name: "Default",
        url: "{controller}/{action}/{id}",
        defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
     ); 
```

或者，尝试将路由中的第一个参数和方法签名重命名为`id`.

```
 routes.MapRoute(
        name: "Details",                                              // Route name
        url: "{controller}/{action}/{id}/{param2}/{param3}",                           // URL with parameters
        defaults: new { controller = "Details", action = "Index", id = UrlParameter.Optional, param2 = UrlParameter.Optional, param3 = UrlParameter.Optional }  // Parameter defaults
     );

public ActionResult Map(string id, string param2, string param3)
{

    StoreMap makeMap = new StoreMap();
    var storemap = makeMap.makeStoreMap(id, param2, param3);
    var model = storemap;
    return View(model);
} 
```

# java - 向量可以引用 Java 中的二维数组吗？

> ID：13373289
> 
> 赞同：0
> 
> 时间：2012-11-14T04:59:04.677
> 
> 标签：java, vector, multidimensional-array

基本上，我想创建一个在运行时变大的二维数组。我可以使用 Java 中的向量来执行此操作吗？

这些会是正确的吗？

int [] [] x = 新 x [100] [100];

向量 x= 新向量（）；

要将元素添加到数组中 -

```
for i=0 to 99
   for j=0 to 99
   x.addElement(x[i] [j]); 
```

本质上，它就像引用任何其他对象一样，只是在这里，我还必须指定索引号，对吗？

我是Java的新手。所以我很感激任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T05:18:32.437

如果不知道需要优化的情况，很难知道向您建议什么。

例如，这个简单的地图包装器是一个[稀疏的 2D 矩阵](http://en.wikipedia.org/wiki/Sparse_matrix)，针对设置和获取特定索引进行了优化（根本不需要“增长”），但不利于迭代所有索引。

```
public class SparseMatrix<T> {
    private final Map<Coordinates, T> map = new HashMap<Coordinates, T>();
    private final T defaultValue;

    public SparseMatrix(T defaultValue) {
       this.defaultValue = defaultValue;
    }

    private static class Coordinates {
        private final int[] coordinates;

        Coordinates(int... coordinates) {
            this.coordinates = coordinates;
        }

        @Override
        public boolean equals(Object o) {
            return Arrays.equals(coordinates, ((Coordinates)o).coordinates);
        }

        @Override
        public int hashCode() {
            return Arrays.hashCode(coordinates);
        }
    }

    public T get(int x, int y) {
        T value = map.get(new Coordinates(x, y));
        if ( value == null ) {
            return defaultValue;
        }
    }

    public T set(int x, int y, T val) {
        return map.put(new Coordinates(x, y), val);
    }
} 
```

用法：

```
SparseMatrix<Integer> matrix = new SparseMatrix<Integer>(0);
matrix.set(3, 5, 7);
int seven = matrix.get(3, 5);
int zero = matrix.get(3, 6); //not set yet, uses default 
```

它也可以很容易地适应 N 维。当然，在生产代码中你不会自己编写代码，你会使用一个做得更好的库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T05:26:06.197

你可以使用`ArrayList`which等价于动态数组。

```
ArrayList<ArrayList<Integer>> aDynamicArray = new ArrayList<ArrayList<Integer>>(2);
aDynamicArray.add(new ArrayList<Integer>());
aDynamicArray.add(new ArrayList<Integer>()); 
```

现在你可以使用你`for`的循环如下：

```
int [] [] x = new x [2] [100];
for i=0 to 1 
   for j=0 to 99
       aDynamicArray.get(i).add(x[i] [j]); 
```

编辑：

> 如果我想访问 x[2] [3] ，我将如何在数组列表中执行此操作？

`x[2][3]`表示第 3 行第 4 列的值。因此，第一行代码将更改如下：（容纳 3 行）

```
ArrayList<ArrayList<Integer>> aDynamicArray = new ArrayList<ArrayList<Integer>>(3);
for(int i=0; i<3, i++)
{
    aDynamicArray.add(new ArrayList<Integer>());
} 
```

然后以下行将使您可以访问`x[2][3]`：

```
aDynamicArray.get(2).get(3); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T12:04:15.747

不幸的是，Java 既没有二维数组也没有二维增长向量。

它具有数组数组或向量向量。

在您的示例中，您创建了 s 的一维向量`Object`：

```
Vector x= new Vector(); 
```

类似于不断增长的类型数组`Object[] x`

所以，当你这样做

```
y.addElement(x[i][j]); 
```

Java做“拳击”，即它做

```
y.addElement(new Integer(x[i][j])); 
```

由于您将 100x100 元素添加到 1D 数组中，因此您需要自己计算位置

```
y.get(i*numcols+j) 
```

因此，为避免这一切，请使用向量的向量，如下例所示。该示例将新固定大小的数组复制到向量的向量中：

```
 // creates fixed size 2D array with zeros
    int [] [] x = new int [50][50]; 

    // creates empty vector of vectors of integers
    // y is of type Vector<Vector<Integer>>
    // y.get(row) is of type Vector<Integer>>
    // y.get(row).get(col) is of type Integer
    Vector<Vector<Integer>> y = new Vector<Vector<Integer>>(); 

    // set the size of vector of vectors (number of rows)
    // each row will be null for now
    y.setSize(x.length);

    // enumerating rows
    for(int row=0; row<x.length; ++row) {

        log.info("row {}", row);

        // assign empty vector for row
        y.set(row, new Vector<Integer>());

        // set row size (number of columns)
        y.get(row).setSize(x[row].length);

        // enumerating columns of current row
        for(int col=0; col<x[row].length; ++col) {

            // setting the value for a cell
            y.get(row).set(col, x[row][col]);

        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T05:01:26.717

在java中会是这样的：

```
int [][] x = new int [100] [100]

ArrayList <Integer> y = new ArrayList();

y.add(some number); 
```

有关[Arraylist的更多信息](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)

Java 让您拥有由不同数据类型组成的集合。例如

```
ArrayList<Object> list = new ArrayList<Object>();
list.add(1);
list.add("Java");
list.add(3.14); 
```

因此您也可以使用 ArrayList 的 ArrayList 等等。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-14T05:16:47.987

如果你知道数组的大小（你提到的是99），你可以使用`int[][] intA = new int[100][100]`和如果你熟悉java，你可以通过在添加元素时监控数组大小来实现自己的Growing `int[][]`。

假设您`intA[99][99] = someInt`此时添加最后一个元素，您可以创建新数组`int[][] newIntA = new int[intA.length+25][100];`，然后您需要将现有`intA`数组的内容复制到`newIntA`

或者您可以使用`ArrayList<ArrayList<Integer>>`添加您的值或使用`ArrayList[]`您的选择。

# python - ctypes中的复数

> ID：13373291
> 
> 赞同：4
> 
> 时间：2012-11-14T04:59:23.910
> 
> 标签：python, ctypes, complex-numbers

这可能有点愚蠢，但我正在尝试使用 ctypes 来调用一个接收复杂向量作为参数的函数。但是在 ctypes 中没有 c_complex 类。有谁知道如何解决这个问题？

编辑：我指的是python的ctypes，以防万一还有其他......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-07-22T16:15:54.810

正如 OP 在他们对@Armin Rigo 的回答的评论中指出的那样，正确的方法是使用包装函数。此外，正如（由我）对原始问题的评论中所指出的，这对于 C++ 和 Fortran 也是可能的。然而，让它在所有三种语言中工作的方法并不一定很明显。因此，此答案为每种语言提供了一个工作示例。

假设您有一个采用标量复数参数的 C/C++/Fortran 过程。然后你需要编写一个包装过程，它需要两个浮点数/双精度数（实部和虚部），将它们组合成一个复数，然后调用原始过程。显然，这可以扩展到复数数组，但现在让我们用一个复数保持简单。

# C

例如，假设您有一个 C 函数来打印格式化的复数。所以我们有`my_complex.c`：

```
#include <stdio.h>
#include <complex.h>

void print_complex(double complex z)
{
    printf("%.1f + %.1fi\n", creal(z), cimag(z));
} 
```

然后我们必须添加一个包装函数（在同一文件的末尾），如下所示：

```
void print_complex_wrapper(double z_real, double z_imag)
{
    double complex z = z_real + z_imag * I;
    print_complex(z);
} 
```

以通常的方式将其编译到库中：

```
gcc -shared -fPIC -o my_complex_c.so my_complex.c 
```

然后从 Python 调用包装函数：

```
from ctypes import CDLL, c_double
c = CDLL('./my_complex_c.so')
c.print_complex_wrapper.argtypes = [c_double, c_double]
z = complex(1.0 + 1j * 2.0)
c.print_complex_wrapper(c_double(z.real), c_double(z.imag)) 
```

# C++

C++ 中的同样事情有点复杂，因为`extern "C"`需要定义接口以避免名称混淆，并且我们需要处理 Python 中的类（都按照[这个 SO Q&A](https://stackoverflow.com/questions/145270/calling-c-c-from-python)）。

所以，现在我们有了`my_complex.cpp`（我已经添加了包装函数）：

```
#include <stdio.h>
#include <complex>

class ComplexPrinter
{
    public:
        void printComplex(std::complex<double> z)
        {   
            printf("%.1f + %.1fi\n", real(z), imag(z));
        }

        void printComplexWrapper(double z_real, double z_imag)
        {   
            std::complex<double> z(z_real, z_imag);
            printComplex(z);
        }   
}; 
```

我们还需要添加一个`extern "C"`接口（在同一文件的末尾），如下所示：

```
extern "C" 
{
    ComplexPrinter* ComplexPrinter_new()
    {   
        return new ComplexPrinter();
    }   
    void ComplexPrinter_printComplexWrapper(ComplexPrinter* printer, double z_real, double z_imag)
    {   
        printer->printComplexWrapper(z_real, z_imag);
    }   
} 
```

以通常的方式编译成一个库：

```
g++ -shared -fPIC -o my_complex_cpp.so my_complex.cpp 
```

并从 Python 调用包装器：

```
from ctypes import CDLL, c_double
cpp = CDLL('./my_complex_cpp.so')
cpp.ComplexPrinter_printComplexWrapper.argtypes = [c_double, c_double]

class ComplexPrinter:

    def __init__(self):
        self.obj = cpp.ComplexPrinter_new()

    def printComplex(self, z):
        cpp.ComplexPrinter_printComplexWrapper(c_double(z.real), c_double(z.imag))

printer = ComplexPrinter()
z = complex(1.0 + 1j * 2.0)
printer.printComplex(z) 
```

# Fortran

最后在 Fortran 中，我们有原始的子程序`my_complex.f90`：

```
subroutine print_complex(z)
  use iso_c_binding, only: c_double_complex
  implicit none
  complex(c_double_complex), intent(in) :: z
  character(len=16) :: my_format = "(f4.1,a3,f4.1,a)"
  print my_format, real(z), " + ", aimag(z), "i" 
end subroutine print_complex 
```

我们向其中添加包装函数（在同一文件的末尾）：

```
subroutine print_complex_wrapper(z_real, z_imag) bind(c, name="print_complex_wrapper")
  use iso_c_binding, only: c_double, c_double_complex
  implicit none
  real(c_double), intent(in) :: z_real, z_imag
  complex(c_double_complex) :: z
  z = cmplx(z_real, z_imag)
  call print_complex(z)
end subroutine print_complex_wrapper 
```

然后按照通常的方式编译成一个库：

```
gfortran -shared -fPIC -o my_complex_f90.so my_complex.f90 
```

并从 Python 调用（注意使用 POINTER）：

```
from ctypes import CDLL, c_double, POINTER
f90 = CDLL('./my_complex_f90.so')
f90.print_complex_wrapper.argtypes = [POINTER(c_double), POINTER(c_double)]
z = complex(1.0 + 1j * 2.0)
f90.print_complex_wrapper(c_double(z.real), c_double(z.imag)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-01-15T20:33:27.903

我不太喜欢上面的@Biggsy 答案，因为它需要用 c/fortran 编写的额外包装器。对于一个简单的情况，这无关紧要，但是如果您想使用外部库（如 lapack），这将需要您为要调用的每个函数/库创建一些代理 dll，它可能不会很有趣而且很多事情可能会出错（如链接、可重用性等）。我的方法仅在 ctypes 和 numpy 的帮助下依赖于 python。希望这会有所帮助。

在下面的示例中，我展示了如何在 python、numpy（本质上都是 C）和纯 C 或 fortran（我使用 fortran，但对于 C，它在 python 端完全相同）之间传递复数/数组。

首先让我们用 C 接口制作一个虚拟的 fortran (f90) 库，比如 f.f90：

```
! print complex number
subroutine print_c(c) bind(c)
  use iso_c_binding
  implicit none
  complex(c_double_complex), intent(in) :: c
  print "(A, 2F20.16)", "@print_c, c=", c
end subroutine print_c

! multiply real numbers
real(c_double) function mtp_rr(r1,r2) bind(c)
  use iso_c_binding
  implicit none
  real(c_double), intent(in) :: r1,r2
  print "(A)", "@mpt_rr" ! make sure its fortran
  mtp_rr = r1 * r2
end function mtp_rr

! multiply complex numbers
complex(c_double_complex) function mtp_cc(c1,c2) bind(c)
  use iso_c_binding
  implicit none
  complex(c_double_complex), intent(in) :: c1,c2
  print "(A)", "@mpt_cc" ! make sure its fortran
  mtp_cc = c1 * c2
  return
end function mtp_cc

! print array of complex numbers
subroutine print_carr(n, carr) bind(c)
  use iso_c_binding
  implicit none
  integer(c_long), intent(in) :: n
  integer(c_long) :: i
  complex(c_double_complex), intent(in) :: carr(n)
  print "(A)", "@print_carr"
  do i=1,n
    print "(I5,2F20.16)", i, carr(i)
  end do
end subroutine print_carr 
```

该库可以像往常一样简单地编译（在本例中为 libf.so）。请注意，每个子例程都包含自己的“use”语句，如果在模块级别声明“use iso_c_binding”可以避免这种情况。（我不知道为什么 gfortran 在不全局使用 iso_c_binding 的情况下理解函数类型，但它对我来说很有效并且很好。）

> gfortran -shared -fPIC f.f90 -o libf.so

然后我创建了一个 python 脚本，比如 p.py，其内容如下：

```
#!/usr/bin/env python3
import ctypes as ct
import numpy as np
## ctypes 1.1.0
## numpy 1.19.5
# print("ctypes", ct.__version__)
# print("numpy", np.__version__)
from numpy.ctypeslib import ndpointer
## first we prepare some datatypes
c_double = ct.c_double
class c_double_complex(ct.Structure): 
    """complex is a c structure
    https://docs.python.org/3/library/ctypes.html#module-ctypes suggests
    to use ctypes.Structure to pass structures (and, therefore, complex)
    """
    _fields_ = [("real", ct.c_double),("imag", ct.c_double)]
    @property
    def value(self):
        return self.real+1j*self.imag # fields declared above
c_double_complex_p = ct.POINTER(c_double_complex) # pointer to our complex
## pointers
c_long_p = ct.POINTER(ct.c_long) # pointer to long (python `int`)
c_double_p = ct.POINTER(ct.c_double) # similar to ctypes.c_char_p, i guess?
# ndpointers work well with unknown dimension and shape
c_double_complex_ndp = ndpointer(np.complex128, ndim=None)
### ct.c_double_complex
### > AttributeError: module 'ctypes' has no attribute 'c_double_complex'

## then we prepare some dummy functions to simplify argument passing
b_long = lambda i: ct.byref(ct.c_long(i))
b_double = lambda d: ct.byref(ct.c_double(d))
b_double_complex = lambda c: ct.byref(c_double_complex(c.real, c.imag))

## now we load the library
libf = ct.CDLL("libf.so")

## and define IO types of its functions/routines
print_c = libf.print_c
print_c.argtypes = [c_double_complex_p] # fortran accepes only references
print_c.restype = None # fortran subroutine (c void)

mtp_rr = libf.mtp_rr
mtp_rr.argtypes = [c_double_p, c_double_p] 
mtp_rr.restype = c_double # ctypes.c_double

mtp_cc = libf.mtp_cc
mtp_cc.argtypes = [c_double_complex_p, c_double_complex_p] 
mtp_cc.restype = c_double_complex # custom c_double_complex

print_carr = libf.print_carr
print_carr.argtypes = [c_long_p, c_double_complex_ndp]
print_carr.restype = None

## finally we can prepare some data and test what we got
print("test print_c")
c = 5.99j+3.1234567890123456789
print_c(b_double_complex(c)) # directly call c/fortran function
print(c)

print("\ntest mtp_rr")
d1 = 2.2
d2 = 3.3
res_d = mtp_rr(b_double(d1),b_double(d2))
print("d1*d2 =", res_d)

print("\ntest mtp_cc")
c1 = 2j+3
c2 = 3j
res = mtp_cc(b_double_complex(c1), b_double_complex(c2))
print(res.value)

print("\ntest print_carr")
n = 10
arr = np.arange(n) + 10j * np.arange(10)
print("arr.shape =",arr.shape)
print_carr(b_long(n), arr)
arr = arr.reshape((5,2)) # still contiguous chunk of memory
print("arr.shape =",arr.shape)
print_carr(b_long(n), arr) # same result
print("done") 
```

一切正常。我不知道为什么这样的东西还没有在 ctypes 中实现。

也与此处的其他建议有关：您可以通过创建新的 ctypes 类型来传递复数

```
__c_double_complex_p = ct.POINTER(2*ct.c_double)
dll.some_function.argtypes = [__c_double_complex_p, ...] 
```

但是您不能以这种方式检索结果！通过类设置正确的仅重新输入方法对我有用。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-14T05:46:01.690

如果 c_complex 是 C 结构并且您在文档或头文件中有定义，您可以利用 ctypes 来组成兼容类型。也有可能，尽管不太可能，c_complex 是 ctypes 已经支持的类型的 typdef。

需要更多信息才能提供更好的答案...

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-16T01:59:28.257

我认为您的意思是 C99 复杂类型，例如“_Complex double”。ctypes 本身不支持这些类型。例如，参见那里的讨论：[https ://bugs.python.org/issue16899](https://bugs.python.org/issue16899)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-12-29T01:20:12.743

使用 c_double 或 c_float 两次，一次为实数，一次为虚数。例如：

```
from ctypes import c_double, c_int
dimType = c_int * 1
m = dimType(2)
n = dimType(10)
complexArrayType = (2 * c_double) * ( n * m ) 
complexArray = complexArrayType()

status = yourLib.libcall(m,n,complexArray) 
```

在图书馆方面（fortran 示例）：

```
subroutine libcall(m,n,complexArrayF) bind(c, name='libcall')
use iso_c_binding, only: c_double_complex,c_int
implicit none
integer(c_int) :: m, n
complex(c_double_complex), dimension(m,n) :: complexArrayF 
integer :: ii, jj 

do ii = 1,m
    do jj = 1,n
        complexArrayF(ii,jj) = (1.0, 0.0) 
    enddo
enddo

end subroutine 
```

# cocoa - 覆盖 NSTextField 中 NSButton 的等效键

> ID：13373292
> 
> 赞同：2
> 
> 时间：2012-11-14T04:59:36.617
> 
> 标签：cocoa, nstextfield, nsbutton, key-events

我有一个带有两个 NSButtons 和一个 NSTextField 以及几个视图和其他几个控件的窗口。我将左右箭头键分配给两个 NSButton 中的每一个。这两个按钮响应左右箭头键。但是，当在 NSTextField 中时，我希望箭头键像通常在文本字段中一样执行，而不是触发 NSButtons。我已尝试通读 Cocoa Key Handling 文档和其他有关关键事件的问题，但我找不到尝试在一个控件中更改关键等效行为的示例。我尝试对 NSTextField 进行子类化，但无法捕获箭头键。如何实施？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T05:40:57.623

您可以覆盖 becomeFirstResponder: 并在您的实现中调用 setKeyEquivalent:。如果要在按钮失去第一响应者状态时删除等效键，请覆盖 resignFirstResponder:。

在您希望影响按钮等效项的第一响应者状态的控件中执行此操作。例如，如果您有一个作为容器的视图并且它可以成为第一响应者，您将覆盖 -becomeFirstResponder:（调用 super）然后在那里管理按钮的等效项。如果您还不了解这些主题，那么您需要阅读大量的先决条件，因为这里无法给出简单的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-11T07:45:43.293

您可以像这样子类化`NSButton`和覆盖`performKeyEquivalent:`：

```
override func performKeyEquivalent(event: NSEvent) -> Bool {
    guard
        let window = window where window.firstResponder.isKindOfClass(NSText.self) == false
    else {
        return false
    }

    return super.performKeyEquivalent(event)
} 
```

如果第一响应者是文本字段/视图，这实质上会禁用等效键。

# wpf - 如何使用 xaml 从 DataGridColumnHeader 获取 DatagridTextColumn 的名称

> ID：13373293
> 
> 赞同：0
> 
> 时间：2012-11-14T04:59:35.353
> 
> 标签：wpf

我为 DataGrid 的 DataGridTextColumn 定义了以下 xaml 代码。

```
<DataGridTextColumn x:Name="UserIdColumn" Binding="{Binding Path=UserId}" HeaderStyle="{StaticResource DataGridHeaderStyle}"/> 
```

这是 DataGridTextColumn 的 HeaderStyle

```
<Style x:Key="DataGridHeaderStyle" TargetType="{x:Type DataGridColumnHeader}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="DataGridColumnHeader">
                <StackPanel>
                    <TextBlock x:Name="ColumnName" Text="UserId" />
                    <TextBox x:Name="UserIdFilter" Width="100">
                        <i:Interaction.Triggers>
                            <i:EventTrigger EventName="TextChanged">
                                <cal:ActionMessage MethodName="UserIdFilterChanged">
                                    <cal:Parameter Value="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type DataGridTextColumn}}, Path=Name}"/>
                                    <cal:Parameter Value="{Binding ElementName=UserIdFilter, Path=Text}" />
                                </cal:ActionMessage>
                            </i:EventTrigger>
                        </i:Interaction.Triggers>
                    </TextBox>
                </StackPanel>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

正如人们所看到的，我正在尝试使用这行代码访问 DataGridColumnHeader 的 ControlTemplate 中的 DataGridTextColumn 的**Name属性**

```
<cal:Parameter Value="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type DataGridTextColumn}}, Path=Name}"/> 
```

上面的行返回null，为什么？

有没有其他方法可以从 DataGridColumnHeader 的控件模板中获取 DataGridTextColumn 的**Name属性？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T10:01:43.643

您正在恢复空值有两个不同的原因：第一个是 DataGridTextColumn 不是可视化树的一部分，也不是数据网格的可视化实例。这只是描述应如何显示数据网格的列的一个实例。因此，DataGridTextColumn 不是您单元格祖先的一部分。我看到恢复 DataGridTextColumn 的唯一方法是以某种方式进行：

```
<TextBox x:Name="UserIdFilter" Width="100" Tag="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type DataGrid}}, Path=Columns[0]}"> 
```

这样，您应该使用 DataGridTextColumn 的实例设置 Textbox 的 Tag 属性（您可以使用 snoop 检查它是否正常工作）

然后，解释为什么你有一个空值的第二个原因是 DataGridTextColumn 没有 Name 属性。您可以做的只是创建一个像这样的附加属性：

```
public class XamlHelper
{
    public static readonly DependencyProperty NameProperty = DependencyProperty.RegisterAttached("Name", typeof(string), typeof(XamlHelper));

    public static string GetName(DependencyObject obj)
    {
        return (string)obj.GetValue(NameProperty);
    }

    public static void SetName(DependencyObject obj, string value)
    {
        obj.SetValue(NameProperty, value);
    }
} 
```

...用这个替换列定义的名称：

```
<DataGridTextColumn alias:XamlHelper.Name="UserIdColumn" Binding="{Binding Path=UserId}" HeaderStyle="{StaticResource DataGridHeaderStyle}"/> 
```

并以这种方式检索属性：

```
<Style x:Key="DataGridHeaderStyle" TargetType="{x:Type DataGridColumnHeader}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="DataGridColumnHeader">
                <StackPanel>
                    <TextBlock x:Name="ColumnName" Text="UserId" />
                    <TextBox x:Name="UserIdFilter" Width="100"  Tag="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type DataGrid}}, Path=Columns[0]}">
                        <i:Interaction.Triggers>
                            <i:EventTrigger EventName="TextChanged">
                                <cal:ActionMessage MethodName="UserIdFilterChanged">
                                    <cal:Parameter Value="{Binding ElementName=UserIdFilter, Path=Tag.(alias:XamlHelper.Name)}"/>
                                    <cal:Parameter Value="{Binding ElementName=UserIdFilter, Path=Text}" />
                                </cal:ActionMessage>
                            </i:EventTrigger>
                        </i:Interaction.Triggers>
                    </TextBox>
                </StackPanel>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

...希望我没有在这段代码中犯太多错误，但我认为这样的事情应该可行

请注意，我使用的文本框的 tag 属性有一个缓冲区，因为我注意到绑定的 findAncestor 模式能够正确恢复数据网格（我在不是可视树的元素上遇到了一些问题）。也许在你的参数中有一个唯一的绑定也可以工作......

Tag 也很适合进行测试，因为它允许在 snoop 中查看值！

如果某些观点不够清楚，请不要犹豫

**编辑：** 我检查了 DataGridCOlumnHeaderClass 并且发现了似乎包含您期望的属性...因此，应该可以这样做：

```
<Style x:Key="DataGridHeaderStyle" TargetType="{x:Type DataGridColumnHeader}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="DataGridColumnHeader">
                <StackPanel>
                    <TextBlock x:Name="ColumnName" Text="UserId" />
                    <TextBox x:Name="UserIdFilter" Width="100"  Tag="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type DataGridColumnHeader}}, Path=Column}">
                        <i:Interaction.Triggers>
                            <i:EventTrigger EventName="TextChanged">
                                <cal:ActionMessage MethodName="UserIdFilterChanged">
                                    <cal:Parameter Value="{Binding ElementName=UserIdFilter, Path=Tag.(alias:XamlHelper.Name)}"/>
                                    <cal:Parameter Value="{Binding ElementName=UserIdFilter, Path=Text}" />
                                </cal:ActionMessage>
                            </i:EventTrigger>
                        </i:Interaction.Triggers>
                    </TextBox>
                </StackPanel>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

# ruby - Macruby：将 attr_accessor 插入控制器

> ID：13373295
> 
> 赞同：0
> 
> 时间：2012-11-14T04:59:48.427
> 
> 标签：ruby, cocoa, macruby

我正在开始 macruby，我正在关注本教程：[http ://blog.phusion.nl/2010/03/12/creating-our-very-first-mac-application-with-ruby-how-exciting/](http://blog.phusion.nl/2010/03/12/creating-our-very-first-mac-application-with-ruby-how-exciting/)

我被困在“将我们的 MyWindowController 连接到我们的窗口”部分，我必须“将我们的窗口标签插入我们的 MyWindowController 的 my_label 插座”。

我的问题是，当我 ctrl+单击我的新 NSObject 到我的标签时，我没有出现弹出窗口或类似的东西。

有谁知道为什么我可以将我的控制器链接到我的窗口？我正在使用 xcode 4.5.2 和 macruby 0.12

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T20:43:34.780

我解决这个问题。我将 XCode 升级到 4.5.2 并重新安装 macruby

# c# - SGEN：试图加载格式不正确的程序集

> ID：13373297
> 
> 赞同：54
> 
> 时间：2012-11-14T04:59:55.703
> 
> 标签：c#, .net, tfs, msbuild

我有一个可以在我的本地机器上正常构建的项目，但是，当我让 TFS 构建它时，我收到以下错误 -

SGEN：试图加载格式不正确的程序集：

在阅读了关于这个主题的许多其他帖子之后，大多数人只是说我需要将构建类型更改为 x86 或 Any CPU，而不是 x64，但在尝试了无数组合之后，这不是解决方案。我的程序也是一个 Windows 服务，因此将应用程序池设置为允许 32 位应用程序（如其他人所建议的那样）也不是解决方案。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2019-03-25T11:21:47.707

我今天遇到了同样的问题。一个项目不能在我的 PC 上构建，但在其他 PC 上构建良好

我最终通过执行以下操作来修复它：

右键单击出现错误的项目，进入属性

选择“构建”选项卡并转到“生成序列化程序集”的最后一个选项，我将其设置为“关闭”，项目现在构建良好。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-11-14T04:59:55.703

这个页面终于解决了我的问题 - [http://aplocher.wordpress.com/2012/10/12/sgen-an-attempt-was-made-to-load-an-assembly-with-an-incorrect-format -tfs-2010/](http://aplocher.wordpress.com/2012/10/12/sgen-an-attempt-was-made-to-load-an-assembly-with-an-incorrect-format-tfs-2010/)

以防万一该页面将来消失，以下是所涉及的步骤 -

1.  在团队资源管理器中，右键单击您的构建定义并选择打开流程文件位置
2.  双击选中的 XAML 文件
3.  在设计器中，选择名为 Sequence 的容器（这是围绕其他所有内容的顶级容器）。
4.  在 Arguments 列表（通常位于底部）中，将 MSBuildPlatform 从 Microsoft.TeamFoundation.Build.Workflow.Activities.ToolPlatform.Auto 更改为 Microsoft.TeamFoundation.Build.Workflow.Activities.ToolPlatform.X86。
5.  保存并关闭文件。
6.  将文件重新检入 TFS 并再次尝试构建。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2014-07-18T14:50:48.373

安装包含 64 位版本 sgen.exe的最新[Windows SDK后问题消失：](http://msdn.microsoft.com/en-us/windows/desktop/bg162891.aspx)

[http://msdn.microsoft.com/en-us/windows/desktop/bg162891.aspx](http://msdn.microsoft.com/en-us/windows/desktop/bg162891.aspx)

有时（如果那个没有帮助）旧版本有帮助：

[http://msdn.microsoft.com/en-us/windows/desktop/hh852363.aspx](http://msdn.microsoft.com/en-us/windows/desktop/hh852363.aspx)

由于某种原因，64 位版本的 sgen 未包含在[Microsoft 构建工具中](http://www.microsoft.com/en-us/download/details.aspx?id=40760)

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2018-03-13T10:20:25.970

我发现这个问题相关： [https ://github.com/dotnet/sdk/issues/1630](https://github.com/dotnet/sdk/issues/1630)

在等待在未来版本中修复此问题时，我能够通过向 csproj 文件添加两个目标来解决问题，正如[https://github.com/joperezr](https://github.com/joperezr)所建议的那样：

```
<Target Name="RemoveDesignTimeFacadesBeforeSGen" BeforeTargets="GenerateSerializationAssemblies">
    <ItemGroup>
    <ReferencePath Remove="@(_DesignTimeFacadeAssemblies_Names->'%(OriginalIdentity)')" />
    </ItemGroup>
    <Message Importance="normal" Text="Removing DesignTimeFacades from ReferencePath before running SGen." />
</Target>

<Target Name="ReAddDesignTimeFacadesBeforeSGen" AfterTargets="GenerateSerializationAssemblies">
    <ItemGroup>
    <ReferencePath Include="@(_DesignTimeFacadeAssemblies_Names->'%(OriginalIdentity)')" />
    </ItemGroup>
    <Message Importance="normal" Text="Adding back DesignTimeFacades from ReferencePath now that SGen has run." />
</Target> 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2015-08-06T16:23:47.237

当我尝试在 Release 中编译我的项目（平台目标设置为 x86）时遇到了同样的错误。它在调试中编译得很好。我发现在Release中，运行Generate序列化程序集；因此，调用 SGen 实用程序。问题是 MSBuild 针对我的 x86 EXE 调用了 x64 版本的 SGen，这会产生错误。我必须传递这个 MSBuild 参数，以便 MSBuild 使用正确版本的 SGen：

```
/p:SGenToolPath="C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\Bin\NETFX 4.0 Tools" 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-07-29T16:02:06.073

在我的情况下，此错误不是由于 x86 / x64 设置的无效组合，而是由于尝试构建一个针对特定 .NET 框架版本（v4.5.1）的项目，其参考程序集尚未安装在构建服务器上.

以下两个条件的组合导致了该错误：

1.  在 Visual Studio 中，在“项目属性”页面的“应用程序”选项卡上，“目标框架”设置为“.NET Framework 4.5.1”；
2.  在构建服务器上的文件夹中`C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework`，名为 v4.5.1 的文件夹*不*存在。*（存在其他带有版本号的*文件夹，包括 v3.5、v4.0 和 v4.5 。）

修复方法是在构建服务器上安装[适用于 Windows 8.1 的 Windows 软件开发工具包 (SDK) 。](https://msdn.microsoft.com/en-us/windows/desktop/bg162891.aspx)在安装向导中，在“选择要安装的功能”步骤中，我取消选中除“.NET framework 4.5.1 Software Development Kit”之外的所有框。

运行该安装会导致创建 Reference Assemblies\Microsoft\Framework.NETFramework 文件夹中缺少的 v4.5.1 文件夹，并且构建成功运行。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2019-11-27T23:06:17.777

当我搜索某些关键字时，这个问题仍然首先在谷歌中弹出，所以我会发布这个，以防有人发现它相关。

就我而言，我有一个在“调试”中构建良好的项目，但在“发布”模式下给出了 OP 的错误。该线程中其他地方的解决方案均未解决该问题。

但是，我在另一个论坛中遇到了关于干扰构建的 Web 服务引用的晦涩评论。一个灯泡熄灭了。我的项目有许多不再使用的遗留 Web 服务引用。所以我把它们撕掉了。瞧，我现在可以在“发布”模式下构建项目，而无需禁用程序集序列化或摆弄 CSPROJ 或弄乱 Azure DevOps/VSTS 中的 SGEN 引用。

希望这可以节省一些时间。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2020-10-22T03:04:24.207

我的答案是对[ola-eldøy](https://stackoverflow.com/a/49253618/80002)的扩展。在我的情况下，我不得不排除更多的程序集，因为它们中的每一个都产生了同样可怕的错误：

```
Could not load file or assembly bla-bla-bla or one of its dependencies. Reference assemblies should not be loaded for execution.  They can only be loaded in the Reflection-only loader context. (Exception from HRESULT: 0x80131058) 
```

因此我的解决方案是扩展[ola-eldøy](https://stackoverflow.com/a/49253618/80002)的代码并将其保存在**Directory.Build.targets**中：

```
<Project>
  <ItemGroup>
    <ReflectionOnlyAssemblyNames Include="Microsoft.Bcl.AsyncInterfaces"/>
    <ReflectionOnlyAssemblyNames Include="System.Buffers"/>
    <ReflectionOnlyAssemblyNames Include="System.Numerics.Vectors"/>
    <ReflectionOnlyAssemblyNames Include="System.Runtime.CompilerServices.Unsafe"/>
  </ItemGroup>
  <Target Name="RemoveDesignTimeFacadesBeforeSGen" BeforeTargets="GenerateSerializationAssemblies">
    <ItemGroup>
      <_ReflectionOnlyAssembly_Names Include="@(_ReferencePath_Names)"
                                     Condition="'@(ReflectionOnlyAssemblyNames)' == '@(_ReferencePath_Names)' And '%(Identity)' != ''"/>
    </ItemGroup>
    <ItemGroup>
      <ReferencePath Remove="@(_DesignTimeFacadeAssemblies_Names->'%(OriginalIdentity)')" />
      <ReferencePath Remove="@(_ReflectionOnlyAssembly_Names->'%(OriginalIdentity)')" />
    </ItemGroup>
    <Message Importance="normal" Text="Removing DesignTimeFacades from ReferencePath before running SGen." />
  </Target>
  <Target Name="ReAddDesignTimeFacadesBeforeSGen" AfterTargets="GenerateSerializationAssemblies">
    <ItemGroup>
      <ReferencePath Include="@(_DesignTimeFacadeAssemblies_Names->'%(OriginalIdentity)')" />
      <ReferencePath Include="@(_ReflectionOnlyAssembly_Names->'%(OriginalIdentity)')" />
    </ItemGroup>
    <Message Importance="normal" Text="Adding back DesignTimeFacades from ReferencePath now that SGen has run." />
  </Target>
</Project> 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2020-06-01T11:54:21.500

根据@james-white 接受的答案中的一条评论，以下内容对我有用：

更改：项目文件中的 GenerateSerializationAssemblies 属性从“On”更改为“Auto”

想要将此建议纳入答案，以使其对任何只是浏览的人都更加明显。谢谢詹姆斯怀特

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2018-07-31T21:14:24.800

我遇到了类似的问题，从命令行在 VS 或 MSBuild 中构建时看到 SGEN“格式不正确”错误。我的项目是x64的，但是MSBuild坚持使用32位版本的工具。（我的一些同行通过在 VS 2015 中构建来解决这个问题，但我只安装了 VS 2017 并希望保持这种状态。）

查看诊断构建输出，看起来 SGEN 正在从其 SdkToolsPath 参数命名的目录中运行（对我来说：）`C:\Program Files (x86)\Microsoft SDKs\Windows\v10.0A\bin\NETFX 4.6.1 Tools\`。这是从 TargetFrameworkSDKToolsDirectory 分配的。查看目标文件，这来自 SDK40ToolsPath。这是从 MSBuild 的 .config 文件中设置的。

我通过编辑`C:\Program Files (x86)\Microsoft Visual Studio\2017\Professional\MSBuild\15.0\Bin\MSBuild.exe.config`（需要管理员权限）解决了这个问题，使用设置 SDK40ToolsPath 属性

```
<property name="SDK40ToolsPath" value="$([MSBuild]::GetRegistryValueFromView('HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Microsoft SDKs\NETFXSDK\4.6.2\WinSDK-NetFx40Tools-x64', 'InstallationFolder', null, RegistryView.Registry32))" /> 
```

（注意：如果您在 64 位操作系统的注册表中查找此路径，请转到 HKLM\SOFTWARE\WOW6432Node\Microsoft...）

主要的变化当然是 x86 到 x64 使用 64 位工具。我还将框架更改为我们使用的框架（4.6.2）。这*可能*意味着我们可以可靠地仅将工具用于 64 位项目和此框架，并进行此更改。不过，我希望这可以帮助遇到这个问题的人。（令我震惊和沮丧的是，MSBuild 不会根据框架和架构自动更改工具路径。）

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-02-11T17:21:37.033

我遇到了同样的问题，查看输出屏幕给了我更多详细信息。从那我发现目标框架高于这种类型的项目所允许的（我正在构建一个 SQL Server CLR 项目）。项目中的目标框架设置为 4.0。将其更改回 3.5 为我解决了这个问题。

戴夫

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-01-22T14:28:58.167

我将一个项目从 4.0 升级到 4.5.2，并在构建服务器上安装了 Microsoft .NET Framework 4.5.2 Developer Pack。之后它起作用了。您拥有所有其他 .net 版本的开发人员包。

[https://support.microsoft.com/en-us/help/2901951/the-microsoft--net-framework-4-5-2-developer-pack-for-windows-server-2](https://support.microsoft.com/en-us/help/2901951/the-microsoft--net-framework-4-5-2-developer-pack-for-windows-server-2)

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-01-30T12:18:38.677

*就我而言，解决方案在Debug*中正确编译，但仅在一个项目中出现*Release*错误。

使用此[https://social.msdn.microsoft.com/Forums/en-US/13d3cc7a-88dc-476c-8a15-fa2d4c59e5aa/sgen-an-attempt-was-made-to-load-an-assembly-with- an-incorrect-format?forum=netfx64bit](https://social.msdn.microsoft.com/Forums/en-US/13d3cc7a-88dc-476c-8a15-fa2d4c59e5aa/sgen-an-attempt-was-made-to-load-an-assembly-with-an-incorrect-format?forum=netfx64bit)，我更改了*任何 CPU*的*x86*问题的项目*PlatformTarget*。

 ***我使用混合平台*维护了解决方案，并且可以在*Release中编译*

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2020-06-23T20:52:56.570

这在 Visual Studio 2017 上对我有用：

我将我的项目平台之一更改为 x64，然后在 PUBLISH（未运行）时出现此错误

如果这是您的情况：

转到发布设置，将配置从任何 CPU 严格更改为 Release-x64（或其他）

然后发布时的错误消失了。**

# c# - NSubstitute 和 Unity

> ID：13373302
> 
> 赞同：2
> 
> 时间：2012-11-14T05:00:15.233
> 
> 标签：c#, dependency-injection, mocking, unity-container, nsubstitute

我目前正在尝试使用 Unity 和 NSubstitute 学习 DI 和 Mocking。我还使用了一个取自这个问题的自动模拟扩展：[Unity（而不是 Castle Windsor）可以做到这一点吗？](https://stackoverflow.com/questions/10627406/is-this-possible-with-unity-instead-of-castle-windsor)

在下面的单元测试中，我试图从我的方法 Add() 中设置 NSubstitute 返回值 10。但是，当通过控制器调用进行调试时，分配的值是默认的 0 而不是预期的 10。代理似乎没有拦截方法调用。

我怀疑这是由于没有正确注册我的类型/容器造成的，有人能指出我正确的方向吗？

```
[TestFixture]
public class ApplicationControllerTests
{
    private IUnityContainer _container;
    private ApplicationController _controller;
    private ISampleService _sampleService;

    [SetUp]
    public void SetUp()
    {
        _container = new UnityContainer().AddExtension(new AutoMockingContainerExtension());
        _controller = _container.Resolve<ApplicationController>();
        _sampleService = _container.Resolve<ISampleService>();
    }

    [Test]
    public void TestSampleService()
    {
        // This line is not working
        _sampleService.Add(Arg.Any<int>(), Arg.Any<int>()).Returns(10);

        var result = _controller.Index();

        _sampleService.Received().Add(Arg.Any<int>(), Arg.Any<int>());
    }
}

public class AutoMockingContainerExtension : UnityContainerExtension
{
    protected override void Initialize()
    {
        var strategy = new AutoMockingBuilderStrategy(Container);

        Context.Strategies.Add(strategy, UnityBuildStage.PreCreation);
    }

    class AutoMockingBuilderStrategy : BuilderStrategy
    {
        private readonly IUnityContainer _container;

        public AutoMockingBuilderStrategy(IUnityContainer container)
        {
            _container = container;
        }

        public override void PreBuildUp(IBuilderContext context)
        {
            var key = context.OriginalBuildKey;

            if (key.Type.IsInterface && !_container.IsRegistered(key.Type))
                context.Existing = CreateSubstitute(key.Type);
        }

        private static object CreateSubstitute(Type type)
        {
            return Substitute.For(new[] { type }, null);
        }
    }
} 
```

还有我的控制器代码

```
public class ApplicationController : BaseController
{
    private readonly ISampleService _sampleService;

    public ApplicationController(ISampleService sampleService)
    {
        _sampleService = sampleService;
    }

    public ActionResult Index()
    {
        var result = _sampleService.Add(2, 3);

        // result is 0, expected 10 ??

        return View();
    }
}

public interface ISampleService
{
    int Add(int first, int second);
}

public class SampleService : ISampleService
{
    public int Add(int first, int second)
    {
        return first + second;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T06:23:27.913

实际上 Tormod 是对的，问题是`AutoMockingBuilderStrategy` **每次**有人请求`ISampleService`容器表单时都会返回一个不同的模拟实例。

所以在我的[原始实现](https://stackoverflow.com/questions/10627406/is-this-possible-with-unity-instead-of-castle-windsor)中存在一个错误，即`AutoMockingBuilderStrategy`不存储创建的模拟：

这是一个固定版本：

```
public class AutoMockingContainerExtension : UnityContainerExtension
{
    protected override void Initialize()
    {
        var strategy = new AutoMockingBuilderStrategy(Container);

        Context.Strategies.Add(strategy, UnityBuildStage.PreCreation);
    }

    class AutoMockingBuilderStrategy : BuilderStrategy
    {
        private readonly IUnityContainer container;
        private readonly Dictionary<Type, object> substitutes 
           = new Dictionary<Type, object>();

        public AutoMockingBuilderStrategy(IUnityContainer container)
        {
            this.container = container;
        }

        public override void PreBuildUp(IBuilderContext context)
        {
            var key = context.OriginalBuildKey;

            if (key.Type.IsInterface && !container.IsRegistered(key.Type))
            {
                context.Existing = GetOrCreateSubstitute(key.Type);
                context.BuildComplete = true;
            }
        }

        private object GetOrCreateSubstitute(Type type)
        {
            if (substitutes.ContainsKey(type))
                return substitutes[type];

            var substitute = Substitute.For(new[] {type}, null);

            substitutes.Add(type, substitute);

            return substitute;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T06:11:47.417

我怀疑您正在处理两个不同的 ISampleService 实例，它们分别在 Setup 的第 2 行和第 3 行中创建。为了测试，您能否公开 _sampleServie 字段并在第三个 Setup() 行中尝试

```
_sampleService = _controller._sampleService; 
```

# android - iOS 和 Android 的后端：初级开发人员应该使用什么？

> ID：13373305
> 
> 赞同：0
> 
> 时间：2012-11-14T05:00:26.000
> 
> 标签：android, iphone, ios, ruby, api

我正在开发一个 iOS 应用程序和 Android 应用程序，它们必须从我的网络应用程序中读取数据（也可能将数据写入）。在 Web 应用程序上，用户登录、修改仪表板（他们的数据），他们的更改会反映在 iOS 和 Android 应用程序中。很基本的东西。我只是不知道对我来说什么是好的设计。

**我正在考虑的事情：**

1.  Web 应用程序是客户端。Web 应用程序调用我构建的 API，在该 API 中添加/修改了所有用户的数据。Android 和 iOS 应用程序也都调用此 API。

2.  Web 应用程序允许用户登录和修改仪表板。随着更改的发生，它们会被发送到 BaaS（例如 QuickBlox、StackMob、Parse、CloudMine 等）。iOS 和 Android 应用程序调用 BaaS。

3.  Web 应用程序就是一切。用户登录网络应用程序，修改数据。Android 和 iOS 都调用网络应用程序。

4.  你的推荐...

**注意事项：**

1.  我是一名**初级**开发人员，经验有限但不断增长。我对 Ruby 相当满意。Java 和 Objective-C 是一个 WIP。

2.  我想**尽快**启动并运行它。一旦获得客户或资金，愿意以“正确”的方式进行 V2。

请提供有关架构的建议。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T05:22:04.903

您可以`Webview`用于安卓。阅读此链接：http: [//developer.android.com/reference/android/webkit/WebView.html](http://developer.android.com/reference/android/webkit/WebView.html)

# database - VS 2012 数据库项目“未解决的对象引用”错误

> ID：13373310
> 
> 赞同：43
> 
> 时间：2012-11-14T05:01:37.120
> 
> 标签：database, visual-studio-2012, sql-server-data-tools

我在 VS 2012 中创建了 SQL Server 数据库项目并导入了我们的数据库。当我构建项目时，我得到很多“未解决的对象引用”错误。这些错误仅适用于我数据库中的几个视图。这些视图的语法是正确的，我没有使用临时表。我应该检查什么来解决这个问题？

更新：这是一个例子：

```
 CREATE view [Factory].[NonStartedOrders]
as
 SELECT 

"Customers"."CustomerName", "Customers"."CustomerAName",
"Customers"."MarketID",
"Orders"."OrderID", 
"Orders"."ApproveDate", 
"FactoryOrders"."FactoryID", 
"FactoryOrders"."EstEndDate", 
"FactoryOrders"."StatusID", 
"FactoryOrders"."TotalWeight", 
"Karats"."KaratEName"

FROM   (("Taiba"."Sales"."FactoryOrders" "FactoryOrders" 
INNER JOIN "Taiba"."Sales"."Orders" "Orders" ON "FactoryOrders"."OrderID"="Orders"."OrderID") 
INNER JOIN "Taiba"."General"."Customers" "Customers" ON "Orders"."CustomerID"="Customers"."CustomerID") 
INNER JOIN "Taiba"."MasterPiece"."Karats" "Karats" ON "Orders"."MKaratID"="Karats"."KaratID" 
```

“Taiba”这里是我的数据库名称。仅针对此视图，我收到 30 个错误。这些是其中的一些错误：

```
Error   217 SQL71561: View: [Factory].[NonStartedOrders] has an unresolved reference to object [Taiba].[Sales].[FactoryOrders]

Error   219 SQL71561: View: [Factory].[NonStartedOrders] contains an unresolved reference to an object. Either the object does not exist or the reference is ambiguous because it could refer to any of the following objects: [Taiba].[Sales].[FactoryOrders].[FactoryOrders]::[OrderID], [Taiba].[Sales].[FactoryOrders].[OrderID] or [Taiba].[Sales].[Orders].[FactoryOrders]::[OrderID]. 
```

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2014-02-03T02:29:44.450

另一种可能性是您在视图/表等中使用的架构在项目中不存在。您可能需要将架构添加到 VS 数据库项目。

右键单击项目并`Add > New Item > Schema`

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-12-02T12:14:07.270

我解决了这个问题。

似乎我的一些视图/SP 使用此命名约定（3 部分限定名称）引用了这些表：

DatabaseName.SchemaName.TableName

我将所有引用更改为如下：

SchemaName.TableName

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2013-10-25T06:05:42.800

就我而言，找不到的函数是 Build Action= **None**，因此它没有包含在编译中。

将 Build Action 更改为**Build**更正了此问题。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2015-10-22T19:26:01.907

这发生在我在 Visual Studio 2015 中构建 CTE 时。我将构建操作更改为编译并且错误消失了。

1.  选择有错误的文件
2.  按 F4 查看属性。
3.  在构建操作下拉列表中选择“编译”。

希望这可以帮助某人。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2019-10-01T14:07:07.067

要引用另一个 sqlproj 的架构并使用三部分命名，请修改您的 .sqlproj 文件以`DatabaseVariableLiteralValue`在引用的项目上添加一个元素。

在 like 元素 `<ProjectReference Include="..\SomeDatabaseProject\SomeDatabaseProject.sqlproj">`中，添加以下内容：

`<DatabaseVariableLiteralValue>SomeDatabaseProject</DatabaseVariableLiteralValue>`

例如：

```
 <ProjectReference Include="..\SomeDatabaseProject\SomeDatabaseProject.sqlproj">
      <Name>SomeDatabaseProject</Name>
      <Project>{some-project-guid}</Project>
      <Private>True</Private>
      <DatabaseVariableLiteralValue>SomeDatabaseProject</DatabaseVariableLiteralValue>
    </ProjectReference> 
```

然后，您可以使用干净的、由三部分组成的命名引用，例如`SomeDatabaseProject.SomeSchema.SomeTable`.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-05-07T13:39:57.643

对象可能位于项目文件中的**NotInBuild**标记内，用于命名或其他问题。在我的情况下，我用 ..sql 保存了文件，额外的点导致它在项目文件内的 NotInBuild 标记下移动。我更正了扩展并将丢失的对象移动到构建标签下，从而解决了问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-03-26T01:00:10.260

尝试显式定义类：

> ***class：***指定被授予权限的安全对象的类。范围限定符 :: 是必需的。

阅读有关 SQL`GRANT`语句的文档：[http ://technet.microsoft.com/en-us/library/ms187965.aspx](http://technet.microsoft.com/en-us/library/ms187965.aspx)

就我而言，我有一个用户定义的表类型。

```
GRANT EXECUTE ON TYPE::[dbo].[MessageTableType] TO [PostOffice_Role]; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-08-24T11:55:53.703

当您添加表（使用 .sql 文件）并且不签入 .sqlproj 文件时，您也会收到此错误

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-12-14T11:15:45.870

这可能是一种极端情况，但如果在您的对象定义中您还使用 sp_addextendedproperty 记录该对象（无论如何我们都这样做了......），如果您声明了不正确的对象类型，您也可能会收到此错误 - 如果复制 &粘贴。当您考虑它时，“未解决的对象引用”错误在这里是有意义的。

例如，以下将重新创建错误，因为 level1type 应该是“PROCEDURE”而不是“FUNCTION”。

```
EXEC sp_addextendedproperty
  @name = N'MS_Description',
  @value = N'Description of the stored procedure...',
  @level0type = N'SCHEMA',
  @level0name = N'dbo',
  @level1type = FUNCTION',
  @level1name = N'spMyStoredProcedureName'
GO 
```

# jquery - 使用jquery ajax发送null的链接提交

> ID：13373311
> 
> 赞同：0
> 
> 时间：2012-11-14T05:01:51.440
> 
> 标签：jquery, ajax, struts2

我正在使用ajax jquery提交一个链接点击喜欢的数据应该被提交并插入喜欢它会显示不喜欢

我面临以下问题

1）提交后进入下一页（不应该进入下一页）

2）它正在发送空数据

我在 jquery 中使用以下代码

```
<a href="likeit" id="likeitlink">Like it</a>
var dataString = 'elementId='+ '123'+ '&elementType=' + 'games' +
     '&likedBy=' + 'abc';
 $(document).ready(function(){ 
     $('a#likeit').bind('click',function(event){
         event.preventDefault();
         $.ajax({   
             type: "POST",   
             url: "likeit", 
             dataType: "text json",
             data: dataString,   
             success: function() {   
                 $('#likeitlink').html("dislike");   
             }   
         }); 
     }); 
 }); 
```

在struts动作类中

```
public class LikeIt extends ActionSupport {

private String elementId;
private String elementType;
private String likedBy;

public String like() {
        System.out.println(getElementId() + ", " + getElementType() + ","
                + getLikedBy());

        return SUCCESS;
 } 
```

}

在肌动蛋白中，它显示所有值 null

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T05:16:14.957

尝试使用以下

```
<a href="#" id="likeitlink">Like it</a>
    var dataString = 'elementId='+ '123'+ '&elementType=' + 'games' +
         '&likedBy=' + 'abc';
     $(document).ready(function(){ 
         $('#likeitlink').bind('click',function(event){
             event.preventDefault();
             $.ajax({   
                 type: "POST",   
                 url: "likeit", 
                 dataType: "json",
                 data: dataString,   
                 success: function() {   
                     $('#likeitlink').html("dislike");   
                 }   
             }); 
         }); 
     }); 
```

# c# - HTML 5 视频未从我的 MVC 网站播放

> ID：13373312
> 
> 赞同：5
> 
> 时间：2012-11-14T05:01:53.110
> 
> 标签：c#, asp.net, asp.net-mvc, html, html5-video

我有一个简单的`MVC`动作，它返回一个`FilePathResult`指向视频的动作。由于某种原因`HTML5`视频（使用`js-video.js`）没有播放视频。如果我将 URL 更改为我知道有效的 URL，则视频可以正常播放。所以这一定与我提供文件的方式有关。

如果我在浏览器中浏览到 URL，视频会下载然后正常播放。

该视频`.mp4`的返回 MIME 类型为`video/mp4`.

我正在使用`Video Studio 2012`,`.NET 4`和.`IIS 8 Express``Windows 7 x64 Home Premium`

这是我各自的代码：

```
[Authorize(Roles = "File_Read")]
public FileResult Get(int? id)
{
    try
    {
        if (id == null)
            throw new ArgumentNullException("id");

        var fileRepo = FileRepositoryFactory.Repository;

        var file = fileRepo.GetById(id.Value);
        if (file == null)
            throw new InvalidOperationException(String.Format("Failed to find file with id: {0}", id));

        if (String.IsNullOrWhiteSpace(file.FilePath))
        {
            return this.File(file.Data, file.MIMEType, file.FileName);
        }
        else
        {
            return this.File(file.FilePath, file.MIMEType, file.FileName);
        }
    }
    catch (Exception ex)
    {
        return this.File("failed.txt", "text/plain");
    }
} 
```

这是`Chrome`返回的屏幕截图：

![网络](../Images/c040a78c8d35efe1a860c46eeeb36e73.png)

![文件获取请求](../Images/d747af06f0103bf1d8bfd58d51738706.png)

![mp4 请求失败](../Images/ab19d8f96a0781926b1411d99876d481.png)

![失败的 mp4 请求详细信息](../Images/4d2c099bed77cef8597f875b7ea2bd20.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T08:20:25.267

HTML5`Video`标记需要支持**[Range Requests](http://www.w3.org/Protocols/rfc2616/rfc2616.html)**。

在静态文件的情况下，此支持由服务器内部提供，但在*ASP.NET MVC*操作的情况下，它需要在`ActionResult`级别实现。

[ASP.NET MVC 中的 Range Requests – RangeFileResult](http://tpeczek.blogspot.co.uk/2011/10/range-requests-in-aspnet-mvc.html)一文详细描述了如何创建`ActionResult`具有*Range Request*支持的 ASP.NET MVC。这里还有一个使用*VideoJS*的示例应用程序：[ASP.NET MVC 中的 VideoJS](http://tpeczek.codeplex.com/releases/view/74711)

# java - 用于在mysql数据库中插入图像的java代码

> ID：13373313
> 
> 赞同：0
> 
> 时间：2012-11-14T05:01:57.023
> 
> 标签：java

我正在尝试使用 java 代码插入图像，我能够插入图像，但我的表显示垃圾值这是我的代码，
用于创建表的代码。

```
try {
    Connection con = null;
    Class.forName("com.mysql.jdbc.Driver");
    con = (Connection) DriverManager.getConnection("jdbc:mysql://localhost:3306 /Hotel",
           "root", "root");
      try {
        Statement st = con.createStatement();
        String table = "CREATE TABLE ItemMenu(Image MEDIUMBLOB,
          Item_Codevarchar(20),Item_Name varchar(20),
          Item_Category varchar(20),Sub_Category varchar(20),
          Item_Rate varchar(20),Item_Kitchen varchar(20),
          Item_Division varchar(20),Item_Description varchar(20))";
      st.executeUpdate(table);
    } catch (SQLException s) {
        System.out.println("Table all ready exists!");
    }
    con.close();
} catch (Exception e) {
    e.printStackTrace();
} 
```

将值插入表中的代码..

```
try {
    File f = new File(path);
    System.out.print(path);
    Connection con = null;
    Class.forName("com.mysql.jdbc.Driver");
    con = (Connection) DriverManager.getConnection("jdbc:mysql://localhost:3306/Hotel", "root", "root123"); 
```

//这是从文本字段中获取值并存储在字符串中的代码。

```
try {
        FileInputStream fis = new FileInputStream(f);
        System.out.println("hello how r u");
        String itemcode = itemcodefield.getText();
        String itemname = itemnamefield.getText();
        String categoryboxname = (String) categorybox.getSelectedItem();
        String subcategoryboxname = (String) subcategorybox.getSelectedItem();
        String rate = ratefield.getText();
        String kitchenboxname = (String) kitchenbox.getSelectedItem();
        String divisionboxname = (String) divisionbox.getSelectedItem();
        String description = descriptionfield.getText();
        String insert = "INSERT INTO ItemMenu(Image,Item_Code,
        Item_Name,Item_Category,Sub_Category,Item_Rate,Item_Kitchen,
        Item_Division,Item_Description)" 
        + "VALUES (?,?,?,?,?,?,?,?,?)";
        System.out.println("am fyn"); 
```

//这是 prepardstatemnt 的代码，它在 mysql 表中插入该变量。

```
 PreparedStatement preparedStmt = con.prepareStatement(insert);
        preparedStmt.setBinaryStream(1, (InputStream) f(int)
        (f.length()
        ));            
        preparedStmt.setString(2, itemcode);
        preparedStmt.setString(3, itemname);
        preparedStmt.setString(4, categoryboxname);
        preparedStmt.setString(5, subcategoryboxname);
        preparedStmt.setString(6, rate);
        preparedStmt.setString(7, kitchenboxname);
        preparedStmt.setString(8, divisionboxname);
        preparedStmt.setString(9, description);
        preparedStmt.execute();
    } catch (SQLException s) {
    }
    con.close();
} (Exception e1){
    e1.printStackTrace();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T05:55:56.003

我不知道您的应用程序设计，但通常建议`instead of inserting images`将图像保存到数据库中，将图像保存到文件夹和`insert path`数据库中的该文件夹中。

插入图像将是一个性能问题。插入路径也将减少数据库大小，并且对其他资源的访问将很快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T06:30:06.033

在 setBinaryStream 方法的第二个参数中使用 FileInputStream 对象。它会起作用。但是将图像保存到一个文件夹并在数据库中插入该文件夹的路径。它是在服务器端处理上传图像的好方法。

```
 PreparedStatement preparedStmt = con.prepareStatement(insert);
        preparedStmt.setBinaryStream(1, (InputStream)fis, (int)(f.length()));            
        preparedStmt.setString(2, itemcode);
        preparedStmt.setString(3, itemname);
        preparedStmt.setString(4, categoryboxname);
        preparedStmt.setString(5, subcategoryboxname);
        preparedStmt.setString(6, rate);
        preparedStmt.setString(7, kitchenboxname);
        preparedStmt.setString(8, divisionboxname);
        preparedStmt.setString(9, description);
        preparedStmt.execute();
    } catch (SQLException s) {
    }
    con.close();
} (Exception e1){
    e1.printStackTrace();
} 
```

# jquery - jquery id 选择器没有返回正确的对象

> ID：13373315
> 
> 赞同：2
> 
> 时间：2012-11-14T05:02:23.800
> 
> 标签：jquery, web2py

在将表单添加到已经存在的内容后，我正在尝试获取表单（从回调中以 HTML 表单提供）。添加它不会出现任何问题，并且表单会正确显示。它由带有 id= (placeid + "commentinput") 的回调提供（作为 HTML）并添加到页面中。但是，尝试执行 $(placeid + "commentinput") 不会返回正确的 jQuery 元素（例如，alert(form.tagName) 应该返回 "FORM" 但始终未定义）。

```
function click_comment1(urlstr, id) { $.ajax({url: urlstr,success: success_on_get_form(urlstr, id)}); }
function success_on_get_form(urlstr, placeid) {
return function (val) {
    $("#" + placeid + "newcomment").html(val.replace("comments_body","body"));
    $("#pup").html($("#" + placeid + "comments").html());
    var form = jQuery("#" + placeid + "commentinput");
    var func = submit_comment(urlstr, placeid);
    alert(form.id);
    form.bind('submit',func);
} } 
```

我已经尝试了我所知道的所有其他形式的选择（基本上是 .children()。我是 jQuery 新手）。我已经无助地以各种形式解决这个问题了 4 个小时。我会很感激任何帮助，谢谢。

```
<form action="" enctype="multipart/form-data" id="1commentinput" method="post">...</form> 
```

这是回调的返回；中间部分为空间省略。

看到的 #pup 元素是[this](http://nicolashoening.de/?twocents&nr=8)提供的弹出窗口。

"#" + placeid + "newcomment" 是 "#" + placeid + "comments" 中的一个 div。前两个调用看似正确执行，并根据需要在弹出窗口中呈现回调提供的表单。

所有这些的目的是向此弹出窗口添加一个表单，然后使用该表单进行第二次回调。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T05:26:56.170

您的问题很可能归结为您使用无效字符来开始您的元素 ID..

将其更改为以有效字符开头，它应该可以工作。

[http://www.w3.org/TR/html4/types.html#type-id](http://www.w3.org/TR/html4/types.html#type-id)

> ID 和 NAME 标记必须以字母 ([A-Za-z]) 开头，后跟任意数量的字母、数字 ([0-9])、连字符 ("-")、下划线 ("_") , 冒号 (":") 和句点 (".")。

# pdf - 是否可以使用ghostscript删除pdf中文本块的背景

> ID：13373316
> 
> 赞同：0
> 
> 时间：2012-11-14T05:02:32.483
> 
> 标签：pdf, tiff, ghostscript

我正在尝试使用 ghost 脚本将 pdf 转换为 tif。是否可以使用幽灵脚本删除 pdf 中文本块（背面字体颜色）的背景（灰色）？我想将灰色背景替换为白色。

感谢你的帮助！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T14:16:57.333

我不认为你会得到一个通用的解决方案来解决你的问题，因为这样的背景可能有很多不同的方式可以在你的 PDF 中编码，并且没有确定的方法可以将这样的背景与某些矢量图像的矩形形式区分开来。

PDF 本质上提供了一组工具，用于在某个矩形（页面）中定位字形和矢量图形以进行显示，并提供一些附加工具来添加一些交互性（例如表单）。因此，PDF 中的彩色背景通常是通过沿背景区域的边缘绘制一条线，用所需颜色填充此表单，并在其顶部放置字形和图形（文本和图像）来创建的。不过，还有其他运算符可以使用，它们的使用有许多变体，通常创建的表单不标记为背景。

在[答案](https://stackoverflow.com/questions/10856521/change-background-color-of-pdf/10869208#10869208)中，Dingo 在他的评论中提到了一个覆盖整个页面的矩形，实际上甚至更多（在相当常见的媒体框选择的情况下）被绘制（m：移动到角落；4 * l：绘制4 条边线；h：关闭路径；f 填写表格）。

因此，请提供有问题的 PDF 以供检查，也许您的文件有一些特定的解决方案。

# c# - 从 Windows 商店应用程序中的后台任务访问文件

> ID：13373319
> 
> 赞同：1
> 
> 时间：2012-11-14T05:02:54.747
> 
> 标签：c#, windows-runtime, winrt-xaml, windows-store-apps, winrt-async

我似乎无法从 Windows 商店应用程序的后台任务中读取文件。这是读取文件内容的代码：

```
async private static Task<string> ReadAsync(string FileName)
{
    var folder = ApplicationData.Current.LocalFolder;
    var file = await folder.GetFileAsync(FileName);
    Windows.Storage.Streams.IRandomAccessStreamWithContentType inputStream = null;
    try
    {
        inputStream = await file.OpenReadAsync();
    }
    catch (Exception ex)
    {
        throw (ex);
    }
    string content = string.Empty;
    using (Stream stream = inputStream.AsStreamForRead())
    {
        using (StreamReader reader = new StreamReader(stream))
        {
            try
            {
                // *** program exits on this line
                content = await Task.Run(() => reader.ReadToEnd());
            }
            catch(Exception ex)
            {
                // no error is caught
                content = ex.Message;
            }
        }
    }

    return content;
} 
```

程序在 StreamReader 上调用 ReadToEnd() 的行上**退出**- 在 try catch 块中没有捕获到错误。在输出窗口中，我得到：

程序“[8968] backgroundTaskHost.exe: Managed (v4.0.30319)”已退出，代码为 1 (0x1)

**是否可以通过后台任务访问文件？如果是这样，我哪里错了？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-14T05:50:02.113

如果您发布`IBackgroundTask`代码会很有帮助。没有看到它，我怀疑你没有`GetDeferral()`在里面打电话，例如：

```
public async void Run(IBackgroundTaskInstance taskInstance)
{
    var deferral = taskInstance.GetDeferral();
    var contents = await ReadAsync("MyFile.txt");
    deferral.Complete();
} 
```

`GetDeferral()`每当您在后台任务中进行异步调用时，您都需要调用。这样你告诉运行时它需要等待异步调用完成，而不是在`Run`退出后立即停止后台任务。

完成后，即通常在`Run`方法结束时，您需要调用`Complete()`deferral 实例以通知运行时您已完成。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-05-13T12:52:46.010

已经有系统类（DataReader）来异步读取文件，所以我不确定你为什么决定自己编写。

# java - 如何将类名作为参数传递给android中的函数？

> ID：13373323
> 
> 赞同：0
> 
> 时间：2012-11-14T05:03:21.340
> 
> 标签：java, android

在我的 android 应用程序中，我有两个类，比如 X 和 YI 有另一个类 Z，在该类中我有一个静态函数“print”。这个函数应该从两个类 X 和 Y 中调用，我想传递类名当我从两个类调用打印函数时，将 X 和 Y 作为函数“打印”的参数。我尝试过的是，

```
public class X
 {
  public static String os="Android";
  String classname="X";
  Z.print(classname);
 }

public class Y
  {
   public static String os="IOS";
   String classname="Y";
   Z.print(classname);
  }

public class Z
  {

     public static void print(String classname)

      {

       System.out.println(classname.os);

      }
  } 
```

但是eclipse抛出错误“os无法解析或不是字段”。我知道我用来传递类名的方法是错误的。有人可以指导我解决这个问题吗？...提前谢谢...。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T06:56:47.823

您可以调用类的 getName 方法。

```
YourClass.class.getName(); 
```

在您调用 Z 类的 print 方法时，请像这样调用：

```
Z.print(Y.class.getName()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T07:41:12.213

为什么不直接传os作为参数呢？

```
class X
 {
  public static String os="Android";
  String classname="X";
  void print()
  {
    Z.print(os);
}
}

class Y
  {
   public static String os="IOS";
   String classname="Y";
   void print()
{
    Z.print(os);
}
}

class Z
  {

 public static void print(String x)

  {

   System.out.println(x);

  }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T07:45:13.630

将 移动`Z.print()`到方法主体。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T05:25:06.567

在您的`print`方法中，`classname`参数是一个普通的 Java 字符串。它没有一个名为`os`.

如果要将类名和操作系统名都传递给`print`方法，则需要`print`使用两个字符串参数：

```
public static void print(String classname, String os)
{
  System.out.println(classname + ", " + os);
} 
```

并在调用它时传递两个值：

```
Z.print(classname, os); 
```

您的另一个错误是您`X`和`Y`类在方法之外有代码，这是不允许的。

# asp.net - Visual Studio 2010 即时调试器

> ID：13373325
> 
> 赞同：1
> 
> 时间：2012-11-14T05:03:30.300
> 
> 标签：asp.net, visual-studio-2010, jit

我有一个使用 Process 来执行命令行工具的 ASP.Net Web 应用程序。命令行工具的参数由用户作为输入提供。

如果参数有问题，那么命令行工具会崩溃。这是我检查进程是否成功退出的方法：

```
Process.Start();
Process.WaitForExit();
if(Process.ExitCode==0)
   return true;
else
   return false; 
```

最初，我使用 IIS 在我的 PC 上托管了这个应用程序，它按预期工作（当命令行工具崩溃时，Process.ExitCode 给出一个非零值）。

但是当我将它托管在服务器上时，我发现当命令行工具崩溃时，Process.ExitCode 给出 0，并且我的应用程序继续运行，就好像一切正​​常。调试时发现，当命令行工具崩溃时，服务器会弹出JIT调试器对话框。禁用 JIT 调试后，会弹出一个不同的 JIT 对话框：

**[命令行工具名称] 中出现未处理的 Microsoft .Net 异常。即时调试此异常失败并出现以下错误：Visual Studio 无法调试此未处理的异常，因为它来自比已安装的 Visual Studio 版本更新的 Microsoft .Net 框架版本。要调试此异常，请使用更新版本的 Visual Studio。检查文档索引以获取“及时调试，错误”以获取更多信息**

我的 PC 和服务器都安装了 Visual Studio 2010 Ultimate。为什么会有这种不同的行为呢？我该如何解决这个问题？

# ruby-on-rails - 验证/授权仅由创建者使用的博客的最佳方式

> ID：13373327
> 
> 赞同：1
> 
> 时间：2012-11-14T05:03:50.083
> 
> 标签：ruby-on-rails, security, authentication

我正在制作一个简单的博客，我将在其中成为唯一的发帖人，并希望制作一个简单但安全的身份验证/授权系统来发布博客条目。在这种情况下，身份验证和授权将是相同的，我不确定是否需要有一个单独的身份验证模型。

在我看来，最简单的方法是将我的密码包含在我的“new_post”页面的 url 中，方法是在**routes.rb中路由以下方式**

```
match '/my_password_here, to: 'Post#new' 
```

这在某种程度上是个坏主意吗？如果是这样，请告诉我为什么。

我还是编程新手，并且正在学习安全相关问题的技巧。虽然我不打算成为任何人的攻击目标，但我认为博客被黑对企业不利。

提前感谢您的意见！

编辑：澄清一下，我目前只有一个模型，`Post.rb`和两个控制器`posts_controller.rb`和`static_pages_controller.rb`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T05:32:57.373

我认为这是一个（非常）坏主意，因为每个人都可以通过查看 URL 来查看您的密码。此外，它将在浏览器的历史中。我建议使用这样的[HTTP 基本身份验证](http://api.rubyonrails.org/classes/ActionController/HttpAuthentication/Basic.html)：

```
class PostsController < ApplicationController
  http_basic_authenticate_with :name => "my_username", :password => "my_password", :except => [:index, :show]
end 
```

# android - 除非设备是可发现的，否则无法接受传入的蓝牙连接

> ID：13373328
> 
> 赞同：0
> 
> 时间：2012-11-14T05:03:53.180
> 
> 标签：android, bluetooth

我已经打了我的智慧与这个。

我有一个典型的 BluetoothServerSocket，我正在尝试连接 A&D 体重秤 (UC-321PBT)。他们公司有一个应用程序 (myFitnessCompanion)，它似乎没有很多连接问题，但只有当我的手机“可发现”时，秤才会连接到我的应用程序。请注意，这是在我与秤配对后。

这里真正需要的唯一关键代码是监听器的打开方式，除此之外它是典型的蓝牙

serverSocket = adapter.listenUsingRfcommWithServiceRecord("PWAccessP", UUID.fromString("00001101-0000-1000-8000-00805F9B34FB"));

（我也试过listenUsingInsecureRfcommWithServiceRecord甚至反射来打开一个端口）

我从另一部手机询问我的手机蓝牙以获取 myFitnessCompanion 应用程序使用的“PWAccessP”值，甚至使用该应用程序来获取与我的手机配对的秤。

当我使手机可发现时，刻度将进入我的套接字侦听器，但除此之外，我看到 BluetoothDevice 开始进行低级连接监视意图“BluetoothDevice.ACTION_ACL_CONNECTED”，但除非我的手机处于可发现模式，否则它将不触发我的服务器套接字的 'accept()' 方法。配对屏幕不会出现在新连接上。

任何帮助，将不胜感激。考虑到我必须让手机“可发现”才能在我的应用程序中发生连接，而 myFitnessCompanion 在配对后随时允许连接，我看不出 myFitnessCompanion 是如何解决这个问题的。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-20T06:36:59.783

A和D设备作为Master，android设备作为slave。所以安卓设备必须处于可发现模式。我用 listenUsingRfcommWithServiceRecord 和 listenUsingInsecureRfcommWithServiceRecord 方法进行了测试。

```
 try {
                tmp = mBluetoothAdapter
                        .listenUsingInsecureRfcommWithServiceRecord(NAME,
                                MY_UUID); // #2
                // tmp.accept();
                // tmp =
                // mBluetoothAdapter.listenUsingRfcommWithServiceRecord(NAME,
                // MY_UUID);
                // tmp =
                // mAdapter.getRemoteDevice("").createRfcommSocketToServiceRecord(MY_UUID);
                mServerSocket = tmp;
                mPortNumber = getPortNr();

            } catch (IOException e) {
                //Log.e("DROID", "listen() failed", e);
                flag=false;
                return flag;
            } 
```

# git - 使用 netbeans 支持的新 git 用户无法从远程存储库中提取最新提交

> ID：13373330
> 
> 赞同：1
> 
> 时间：2012-11-14T05:04:12.060
> 
> 标签：git, netbeans

我是一个新的 GIT 用户，在 win7 上使用内置的 NetBeans 支持。我在另一台计算机上对我的项目文件进行了一些更改，并将它们提交到远程仓库。当我尝试从远程存储库中提取此最新版本时，出现以下错误：

```
 ==[IDE]== Nov 13, 2012 11:35:27 PM Pulling...
 git pull bitbucket.org:kcsmith/b1.git +refs/heads/master:refs/remotes/origin/master
 No update
 Merge Result: Failed
 Merge of HEAD with origin/master failed because of these files:
 C:\wamp\www\path\to\file 
```

如何将最新版本拉到第二台计算机？

提前致谢，

账单

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T05:41:04.307

我不是百分百确定。但我非常有信心您的麻烦来自工作目录中未跟踪的文件/更改。

首先，检查您的工作目录的状态`git status`。如果列出了文件，您需要先添加它们 ( `git add -A`) 并提交它们 ( `git commit`)，然后才能拉取。（*附带说明，您可以将它们藏起来，而不是提交*）

完成此操作并且不`git status`显示任何文件后，您可以拉取远程存储库。

此行为可防止您在合并过程中丢失未保存的工作（作为a后面的`pull`别名）。`fetch``merge`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-25T16:42:15.000

我遇到了同样的问题。我猜你正在 Netbeans 中运行 git。请尝试在 git shell 中运行该命令。你会看到区别。

# java - 在java中搜索文件名的正则表达式

> ID：13373333
> 
> 赞同：0
> 
> 时间：2012-11-14T05:04:26.143
> 
> 标签：java

我需要一个正则表达式来搜索具有以下格式的文件名： `abc_abc0003_2012-14-11_1212_regex.txt`. 在文件名中，`abc_abc0003_`和`_regex.txt`将是常量，其余部分将是可变的。

我试过的正则表达式是：

`"abc_abc0003_" + "(19|20)\\d\\d[- /.](0[1-9]|1[012])[- /.](0[1-9]|[12][0-9]|3[01])" + "[_0-9]*" + "_regex.txt"`

这对于 Java 中的函数来说工作得很好`matches()`，但是当我使用它来搜索文件名时，它就不起作用了。任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T05:20:20.437

尝试如下正则表达式以允许`numbers`, `_`&`-`在两端之间。

```
 ^(abc\\_abc0003\\_)[\\_\\-\\d]+(\\_regex\\.txt)$ 
```

例如

```
String regex12 = "^(abc\\_abc0003\\_)[\\_\\-\\d]+(\\_regex\\.txt)$";
Pattern pattern12 = Pattern.compile(regex12);
System.out.println(pattern12
                    .matcher("abc_abc0003_2012-14-11_1212_regex.txt")
                    .find());//prints true
System.out.println(pattern12
                    .matcher("abc_abc0003_2012-14-11_ab1212_regex.txt")
                    .find());//prints false 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T05:16:14.970

试试这个（带有`_`、 数字和的模式`-`），带有不情愿的 ( `+`) 量词：

```
Pattern p = Pattern.compile("abc_abc0003_[_\\d-]+?_regex.txt");
Matcher m = p.matcher(inputStr);
while(m.find()) {
    System.out.println(m.group());
} 
```

# java - 无 XML 的 Spring 3.1 找不到 HTTP 请求的映射

> ID：13373338
> 
> 赞同：7
> 
> 时间：2012-11-14T05:05:12.523
> 
> 标签：java, spring, spring-mvc, tomcat7, url-mapping

我已经搜索了谷歌、stackoverflow 和我可以查看的每个论坛几天，我的键盘有成为头撞目标的可怕风险。

我正在运行一个非常小的带有无 XML 设置的 Spring 3.1 MVC。问题是当我启动它时，我看到了；

```
INFO : org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping - Mapped "{[/start.action],methods=[],params=[],headers=[],consumes=[],produces=[],custom=[]}" onto public org.springframework.web.servlet.ModelAndView com.xxxxxx.info.HomeController.start(javax.servlet.http.HttpServletRequest)
INFO : org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping - Mapped "{[/*],methods=[],params=[],headers=[],consumes=[],produces=[],custom=[]}" onto public org.springframework.web.servlet.ModelAndView com.xxxxxx.info.HomeController.home(java.util.Locale,org.springframework.ui.Model) 
```

然而，当我尝试访问其中任何一个 URL 时，我看到我的控制器内的日志记录语句触发，然后立即获取；

```
INFO : com.xxxxxx.info.HomeController - Welcome home! the client locale is en_US
WARN : org.springframework.web.servlet.PageNotFound - No mapping found for HTTP request with URI [/WEB-INF/jsps/home.jsp] in DispatcherServlet with name 'dispatcher' 
```

这是我的源文件。

初始化器 -

```
public class Initializer implements WebApplicationInitializer {

    public void onStartup(ServletContext servletContext) throws ServletException {
        AnnotationConfigWebApplicationContext mvcContext = new AnnotationConfigWebApplicationContext();
        mvcContext.register(MvcConfig.class);

        ServletRegistration.Dynamic dispatcher = servletContext.addServlet("dispatcher", new DispatcherServlet(mvcContext));
        dispatcher.setLoadOnStartup(1);
        dispatcher.addMapping("/*");
    }
} 
```

MvcConfig -

```
@Configuration
@EnableWebMvc
@ComponentScan(basePackages = "com.xxxxxx.info")    
public class MvcConfig {
    @Bean
    public InternalResourceViewResolver configureInternalResourceViewResolver() {
        InternalResourceViewResolver resolver = new InternalResourceViewResolver();
        resolver.setPrefix("/WEB-INF/jsps/");
        resolver.setSuffix(".jsp");
        return resolver;
    }
} 
```

控制器 -

```
@Controller
public class HomeController {

    private static final Logger logger = LoggerFactory.getLogger(HomeController.class);

    /** Simply selects the home view to render by returning its name. */
    @RequestMapping(value = "/*")
    public ModelAndView home(Locale locale, Model model) {
        logger.info("Welcome home! the client locale is " + locale.toString());

        Date date = new Date();
        DateFormat dateFormat = DateFormat.getDateTimeInstance(DateFormat.LONG, DateFormat.LONG, locale);
        String formattedDate = dateFormat.format(date);

        model.addAttribute("serverTime", formattedDate);
        return new ModelAndView( "home", model.asMap() );
    }

    @RequestMapping( value = "/start.action")
    public ModelAndView start(HttpServletRequest request) {
        logger.info("Starting!");
        return new ModelAndView( "start", null );
    }
} 
```

将调度程序映射更改为“/”我发现建议的许多帖子似乎完全破坏了它。如果我用“/”重新启动服务器，那么 Spring 不会报告任何内容，也不会映射任何内容，只有一个 tomcat 启动日志，其他任何操作都没有。

我的文件结构是 -

```
| com.xxxxxx.info
    - Initializer.java
    - MvcConfig.java
    - HomeController.java
| src
    | main
        | webapp
            | WEB-INF
                | jsps
                    - home.jsp
                    - start.jsp 
```

所以它似乎正确地击中了我的控制器，但是当它获得视图名称时，它没有解析到正确的位置。我在这里错过了什么，这似乎是我忽略的一些简单的事情......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T13:06:57.813

我猜这个jsp是由DispatcherServlet渲染的，它在[类似的问题中讨论过](https://stackoverflow.com/questions/1266303/no-mapping-found-for-http-request-with-uri-web-inf-pages-apiform-jsp)

您应该考虑`HomeController`在`WebApplicationInitializer`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T13:20:03.383

您将`\*`同时发送给`DispatcherServlet`您和您的`HomeController`

```
dispatcher.addMapping("/*");

@RequestMapping(value = "/*")
    public ModelAndView home(Locale locale, Model model) 
```

我认为这是造成问题的原因。将您的控制器映射更改为类似

```
@RequestMapping(value = "/home")
    public ModelAndView home(Locale locale, Model model) 
```

希望能帮助到你。

# android - 列表视图中第一项的额外空间？

> ID：13373339
> 
> 赞同：1
> 
> 时间：2012-11-14T05:05:21.040
> 
> 标签：android, listview, android-arrayadapter

由于分隔线，我第一次在我的列表视图中有额外的空间。

```
<ListView
    android:id="@android:id/list"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@color/layout_bg_wallet_login"
    android:cacheColorHint="#00000000"
    android:divider="@drawable/divider"
    android:drawSelectorOnTop ="false"
    android:scrollbars="none" >
</ListView> 
```

我知道罪魁祸首是图像的顶部和底部有空格的分隔线。但由于我的分隔线，我不需要顶部的空白空间。

当位置 ==0 但不起作用时，我尝试在适配器中将分隔线高度设置为零。第一项后缺少分隔符。如何在 listview 中解决这个奇怪的问题。

# android - 用于家庭自动化的 Arduino 和 Android

> ID：13373342
> 
> 赞同：1
> 
> 时间：2012-11-14T05:06:03.693
> 
> 标签：android, arduino, android-wifi

我打算使用 Arduino 和 Android 智能手机进行家庭自动化。我已经构建了一个 Android 应用程序。Android 应用程序已准备好通过 WiFi 进行通信。重要的一点是没有通过 Internet 进行通信 - 通信只是这样：

*   Android --> WiFi --> Arduino
*   Arduino --> WiFi --> 安卓

我可以获得以下活动的指导吗？

我正在使用 WiFly Shield 进行 WiFi 通信。任何人都可以指出 Arduino 与 Android 交互的示例代码吗？有什么方法可以从 Anduino ping Android？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T04:55:36.290

您可以在 Arduino 中运行以太网服务器（作为示例草图提供），然后在 Android 中您可以发出简单的 HTTP 请求。

在 Android 端，您可以编写类似下面的代码，您可以在其中使用 HTTP 打开 Arduino url

```
URL url = new URL(arduinoCommandURl);
InputStream is = new InputStreamReader(url.openStream(), "UTF-8"));
is.read(); 
```

还要检查这个[问题](https://stackoverflow.com/questions/9832481/how-to-create-an-android-app-to-control-arduino-over-wi-fi)。

# scheme - 访问方案中列表的元素

> ID：13373344
> 
> 赞同：1
> 
> 时间：2012-11-14T05:06:24.417
> 
> 标签：scheme

如何更改 Scheme 中列表的元素。我想要一个将列表的最小元素更改为另一个数字的过程，所以

如果我有一个名为 proc 的过程并给它两个参数（一个列表和一个数字），我的过程将像这样工作： `(proc (list 1 2 3 1) 9)`返回`'(9 2 3 9)`。所以 9 代替了列表的最小值。我知道我可以应用 min 来获得最小值，但我不知道如何修改列表的单个元素。

由于Scheme没有变量来保存值，我考虑过使用let或letrec，但我不知道使用let和letrec有什么区别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T05:32:58.743

This can be split into two distinct tasks - getting the lowest value in the list, then replacing that value with our new value. We can get the lowest value by running the `sort` function on our list and sorting by least to greatest, then using `apply min` to get the first element of the list.

After we've got that, we can use `map` to go through the list, replacing any instances of the lowest number with our new number. All in all, the complete function should look like this:

```
 (define (replace-least lst new)
      (let ((lowest (apply min lst)))
        (map (lambda (x) (if (= x lowest) new x)) lst))) 
```

I tested this with DrRacket 5.3 and it performed perfectly as per the specifications provided in your question. If you have any trouble, let me know.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T11:24:39.227

This is an improved, *working* solution using `min`:

```
(define (replace-min lst elt)
  (let ((m (apply min lst)))
    (map (lambda (x) (if (= x m) elt x))
         lst))) 
```

Notice that `min` is the simplest way to find the minimum element in a list.

# vb.net - VB.net 中的数据透视表

> ID：13373346
> 
> 赞同：0
> 
> 时间：2012-11-14T05:06:37.357
> 
> 标签：vb.net, pivot-table

我已经使用 vb.net 代码创建了数据透视表

```
 pivotField1 = pivotTable.PivotFields(14)
    pivotField2 = pivotTable.PivotFields(15)
    pivotField3 = pivotTable.PivotFields(16)
    pivotField4 = pivotTable.PivotFields(17)
    pivotField5 = pivotTable.PivotFields(18)

    pivotField1.Orientation = XlPivotFieldOrientation.xlDataField
    pivotField2.Orientation = XlPivotFieldOrientation.xlDataField
    pivotField3.Orientation = XlPivotFieldOrientation.xlDataField
    pivotField4.Orientation = XlPivotFieldOrientation.xlDataField
    pivotField5.Orientation = XlPivotFieldOrientation.xlDataField
    pivotField1.Function = XlConsolidationFunction.xlSum
    pivotField2.Function = XlConsolidationFunction.xlSum
    pivotField3.Function = XlConsolidationFunction.xlSum
    pivotField4.Function = XlConsolidationFunction.xlSum
    pivotField5.Function = XlConsolidationFunction.xlSum 
```

但它在数据透视表中显示为 Rowlable 中的 Sum-Value 但我想要 ColumnLabel 所以请帮忙....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T11:41:32.747

使用这个......可能会有所帮助:)

```
Dim ptSigmaRow As PivotField
For Each ptSigmaRow In ptTable.RowFields
    Dim d As String = ptSigmaRow.Name
    If ptSigmaRow.Name = "Data" Then
         ptSigmaRow.Orientation = XlPivotFieldOrientation.xlColumnField
    End If
Next 
```

# sql - 如何用oracle sql合并行

> ID：13373352
> 
> 赞同：0
> 
> 时间：2012-11-14T05:07:57.440
> 
> 标签：sql, oracle

我无法从一行中声明一个对象，因此它可以在另一列中使用

这是插入到 TRIPLEG 表中的值，格式为 TripNum#、Length#、Origin、Destination

```
INSERT INTO TRIPLEG VALUES(10, 1, 'Perth', 'Sydney');
INSERT INTO TRIPLEG VALUES(10, 2, 'Sydney', 'Brisbane');
INSERT INTO TRIPLEG VALUES(11, 1, 'Sydney', 'Melbourne'); 
```

我实际上如何以某种方式合并它们，使其看起来像

```
T#   ORIGIN     DESTINATION1        DESTINATION2
---- ---------- ------------------- ----------------
10   Perth      Sydney              Brisbane
11   Sydney     Melbourne 
```

我被要求创建一个关系视图，我猜它看起来像这样：

```
Create view 
as select t#, origin, destination, destination
from TRIPLEG 
```

但是 Destination2 是我不知道该放什么的部分。有人可以启发我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T05:47:31.113

行程可以有几条腿？3? 100？您正在寻找的是交叉表。

您没有指出 TRIPLEG 中的列是什么，所以我假设 t#、leg、origin、destination。

对于您描述的非常具体的情况，这将起作用：

```
SELECT 
"t#", 
MAX(DECODE(leg,1,origin)) origin, 
MAX(DECODE(leg,1,destination)) destination,
MAX(DECODE(leg,2,destination)) destination2
FROM TRIPLEG
GROUP BY "t#" 
```

对于几乎任何其他情况，它都有问题。

- 如果有两条以上的腿

- 如果第一站在悉尼结束，但第二站没有在悉尼开始

等等

试试这个，调查交叉表并提出更多问题。

# xslt - XSL1.0 中的不同值

> ID：13373353
> 
> 赞同：1
> 
> 时间：2012-11-14T05:08:01.550
> 
> 标签：xslt

我需要将以下内容转换为 XSL 1.0 兼容性

```
<xsl:value-of select="count(distinct-values(/ChangeLog/ChangeSets//WorkItems//WorkItem/_ID))"/> 
```

试过

```
<xsl:value-of select="count(/ChangeLog/ChangeSets//WorkItems//WorkItem/_ID[not(.=following::_ID)])"/> 
```

这是示例 XML

```
<ChangeLog>
<ChangeSets>
<ChangeSet>
  <ID>31</ID>
  <Date>10/30/2012 2:05:59 AM</Date>
  <Comment />
  <User>XXX</User>
  <WorkItems>
    <WorkItem>
             <_ID>2</_ID>
      <_AreaID>1</_AreaID>
      <_AuthorizedAs>XXX</_AuthorizedAs>
    </WorkItem>
  </WorkItems>
</ChangeSet>
<ChangeSet>
  <ID>12</ID>
  <Date>9/18/2012 7:30:43 AM</Date>
  <Comment />
  <User>XXX</User>
  <WorkItems>
    <WorkItem>

      <_ID>1</_ID>
      <_AreaID>1</_AreaID>
      <_AuthorizedAs>XXX</_AuthorizedAs>
    </WorkItem>
    <WorkItem>

      <_ID>2</_ID>
      <_AreaID>1</_AreaID>
      <_AuthorizedAs>XXX</_AuthorizedAs>
    </WorkItem>
  </WorkItems>
</ChangeSet>
<ChangeSet>
<ChangeSets>
</ChangeLog> 
```

这是相同的 XSLT。请注意，这在 XSL 2.0 中。我需要将它转换为 XSL 1.0，因此问题。我已经单独更新了样式表版本以指向 XSL 1.0

```
<?xml version="1.0"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
<xsl:output method="html"/>
<xsl:template match="/ChangeLog">
<html>
  <head>
    <title>Release Notes Generated from TFS</title>
    <style type="text/css">
      .HeaderColumnStyle
      {
      width: 566px;
      border: None;
      }
      .DataColumnStyle
      {
      border: none; width:auto;
      white-space: -moz-pre-wrap; /* Firefox */
      white-space: -pre-wrap; /* ancient Opera */
      white-space: -o-pre-wrap; /* newer Opera */
      white-space: pre-wrap; /* Chrome; W3C standard */
      word-wrap: break-word; /* IE */
      }
      .DescriptionDataColumnStyle
      {
      border: none;
      width: 850px;
      white-space: -moz-pre-wrap; /* Firefox */
      white-space: -pre-wrap; /* ancient Opera */
      white-space: -o-pre-wrap; /* newer Opera */
      white-space: pre-wrap; /* Chrome; W3C standard */
      word-wrap: break-word; /* IE */
      }
      .style1
      {
      border-style: none;
      border-color: inherit;
      border-width: medium;
      width: 60px;
      }
    </style>
  </head>
  <body>
    <h1 align="center"> TFS Change Log Report</h1>
    <table frame="box" border="3" style="width: 100%; border-bottom:#000080       outset;border-left:#000080 outset;border-top:#000080 outset;border-right:#000080 outset; text-align: left; vertical-align: middle;">
      <tr>
        <td class="HeaderColumnStyle">
          <b>
            <xsl:text>TFS Server : </xsl:text>
          </b>
          <xsl:apply-templates select="TFSServer/node()"/>
        </td>
        <td class="HeaderColumnStyle">
          <b>
            <xsl:text>Project Name : </xsl:text>
          </b>
          <xsl:apply-templates select="TFSProjectName/node()"/>
        </td>
      </tr>
      <tr>
        <td class="HeaderColumnStyle">
          <b>
            <xsl:text>Branch Location : </xsl:text>
          </b>
          <xsl:apply-templates select="TFSProjectBranchName/node()"/>
        </td>
        <td class="HeaderColumnStyle">
          <b>
            <xsl:text>Report Produced By : </xsl:text>
          </b>
          <xsl:apply-templates select="ReportProducedBy/node()"/>
        </td>
      </tr>
      <tr>
        <td class="HeaderColumnStyle">
          <b>
            <xsl:text>From Changeset : </xsl:text>
          </b>
          <xsl:apply-templates select="FromChangeSet/node()"/>
        </td>
        <td class="HeaderColumnStyle">
          <b>
            <xsl:text>To Changeset : </xsl:text>
          </b>
          <xsl:apply-templates select="ToChangeSet/node()"/>
        </td>
      </tr>
      <tr>
        <td class="HeaderColumnStyle">
          <b>
            <xsl:text>Total Number of Changesets : </xsl:text>
          </b>
          <xsl:value-of select="count(distinct-values(/ChangeLog//ChangeSet/ID))"/>
        </td>
        <td class="HeaderColumnStyle">
          <b>
            <xsl:text>Total Number of Work Items : </xsl:text>
          </b>
          <xsl:value-of select="count(distinct-values(/ChangeLog/ChangeSets//WorkItems//WorkItem/_ID))"/>
        </td>
      </tr>
      <tr>
        <td class="HeaderColumnStyle">
          <b>
            <xsl:text>Changesets with associated Work Items : </xsl:text>
          </b>
          <xsl:value-of select="count(/ChangeLog//ChangeSet[WorkItems/WorkItem/_ID[1] > 0])"/>
        </td>
        <td class="HeaderColumnStyle">
          <b>
            <xsl:text>Changesets without associated Work Items : </xsl:text>
          </b>
          <xsl:value-of select="count(distinct-values(/ChangeLog//ChangeSet/ID)) - count(/ChangeLog//ChangeSet[WorkItems/WorkItem/_ID[1] > 0])"/>
        </td>
      </tr>
      <tr>
        <td class="HeaderColumnStyle" colspan="2">
          <b>
            <xsl:text>Report Date : </xsl:text>
          </b>
          <xsl:apply-templates select="ReportDate/node()"/>
        </td>
      </tr>
    </table>
   </body>
</html>
</xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T05:24:31.437

在做搜索引擎相关产品时，我已经多次使用它来选择不同的值：

```
 <xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">

  <xsl:output method="text"/>

  <xsl:key name="k1" match="_ID" use="."/>

  <xsl:template match="/">
    <xsl:for-each select="/path/to/iterate[generate-id() = generate-id(key('k1', .)[1])]">
      <xsl:value-of select="."/>
      <xsl:value-of select="''"/>
    </xsl:for-each>
  </xsl:template>

</xsl:stylesheet> 
```

我认为它适用于您正在尝试做的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T06:33:35.367

Dave Pawson 的 XSLT FAQs 是一个非常宝贵的资源。谢谢鲍森先生！这是“重复”的一些代码创意。 [http://www.dpawson.co.uk/xsl/sect2/N2696.html](http://www.dpawson.co.uk/xsl/sect2/N2696.html)

整个系列从[http://www.dpawson.co.uk/xsl/sect2/sect21.html开始](http://www.dpawson.co.uk/xsl/sect2/sect21.html)

# jquery - bootstrap popover preventDefault for click 在 Rails 3.2 应用程序中不起作用

> ID：13373357
> 
> 赞同：8
> 
> 时间：2012-11-14T05:08:33.163
> 
> 标签：jquery, twitter-bootstrap, coffeescript

其他人[在这里](https://stackoverflow.com/questions/13231461/preventdefault-in-bootstrap-popover)问了这个问题，但没有给出答案或解决方案。

这些引导文件列在我的 application.js 文件的顶部：

```
...
//= require bootstrap-tooltip
//= require bootstrap-popover
... 
```

我的 bootstrap_additions.js.coffee 文件包含：

```
$("a[rel=popover]").popover()
$(".tooltip").tooltip()
$("a[rel=tooltip]").tooltip() 
```

在一个视图中，我有：

```
<a href="#" class="btn" rel="popover" title="Title" data-content="Some content.">click</a> 
```

当我在浏览器中输入 localhost:3000/assets/application.js 时，会出现 bootstrap-popover.js 内容。此外，我发现以下内容：

```
jQuery(function() {
    $("a[rel=popover]").popover().on('click', preventDefault());
    $(".tooltip").tooltip();
    return $("a[rel=tooltip]").tooltip();
}); 
```

单击链接时，浏览器显示将移至页面顶部。当我向下滚动到链接时，会显示弹出框。除 preventDefault 外，一切正常。我错过了什么？

谢谢。

* * *

更新：为了在我的代码中保持干净，我找到了所选答案的[咖啡脚本版本：](http://www.tumblr.com/tagged/preventdefault)

```
$("a[rel=popover]").popover().click (e) => e.preventDefault() 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-14T05:22:39.767

使用[Twitter 引导弹出框](http://twitter.github.com/bootstrap/javascript.html#popovers)

**更新到 Coffeescript**

**第一种方法**

实例化

```
$("a[rel=popover]").popover() 
```

处理

```
$("a[rel=popover]").click (event) ->
  event.preventDefault()
  event.stopPropagation()
  $(this).popover "show" 
```

**第二种方法**

直接取自他们的源代码：

```
$("a[rel=popover]").popover().click (e) ->
  e.preventDefault() 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-02-13T16:30:41.617

您也可以这样链接：

```
$("a[rel=popover]")
  .on('click',function(e){
    e.preventDefault();
  })
  .popover(); 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-11-14T05:23:32.727

您可以使用“span”标签而不是“a”标签，这样就不需要阻止默认值。

也防止默认应该与一个事件相关联。

[http://api.jquery.com/event.preventDefault/](http://api.jquery.com/event.preventDefault/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-28T08:50:34.430

首先，我要感谢 TontonBlach 的回答，因为它对我帮助很大。

但是我想知道为什么这个简单的功能不起作用并且阅读了[https://getbootstrap.com/docs/3.3/javascript/#popovers](https://getbootstrap.com/docs/3.3/javascript/#popovers)上的官方手册（而不是 W3 学校）我发现我认为是正确的回答。

1.  首先不应该有href标签
2.  > 对于正确的跨浏览器和跨平台行为，您必须使用`a`标签，而不是`button`标签，并且您**还必须包含 role="button" 和 tabindex 属性**

修复它的方法是复制他们的（工作）示例并注意差异（对我来说是没有 tabindex）。另外值得注意的是 role="button" 与可访问性有关，因此在*技术上*不是必需的。

有了这个，您就可以正确使用默认`.popover()`功能来启动弹出窗口。

# python - 如何在 django 模板中以预先指定的顺序迭代多维字典？

> ID：13373358
> 
> 赞同：0
> 
> 时间：2012-11-14T05:09:36.547
> 
> 标签：python, django, django-templates

我有一个嵌套字典（因为我想通过键访问它）`agenda`，但我需要按指定顺序访问值，因为`k`我使用的是列表，并且`k2`是 iso 格式的日期字符串。我很高兴我必须像这样访问嵌套的 dict 结构：

```
{% for k, a_dict in agenda.items %}
  {{ k }}
  {% for k2, v in a_dict.items %}
    {{ k }}-{{ k2 }}-{{ v.attribute }}
  {% endfor %}
{% endfor %} 
```

但是我似乎找不到指定迭代顺序的方法。是否有任何其他二维数据结构可以从 django 模板以预先指定的顺序访问？我错过了一些明显的东西吗？

提前谢谢，

平板电脑

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T05:21:34.733

python dict 不维持秩序。您必须使用维护订单的数据结构，例如：SortedDict

```
from django.utils.datastructures import SortedDict 
```

# c# - 如何使用 c# 计算字符串数组中单词的出现次数？

> ID：13373359
> 
> 赞同：2
> 
> 时间：2012-11-14T05:09:46.037
> 
> 标签：c#

我是编程新手，我正在尝试编写一个程序来接收字符串数组（数组的每个索引都是一个单词），然后计算字符串中每个单词的出现次数。这是我到目前为止所拥有的：

```
 string[] words = 
        {
            "which", 
            "wristwatches", 
            "are", 
            "swiss", 
            "wristwatches"
        };

        Array.Sort (words);
        for (int i = 0; i < words.Length; i++) 
        {
            int count = 1;
            for(int j = 1; j < words.Length; j++)
            {
                if (words [i] == words [j])
                {
                    count++;
                }
            }
            Console.WriteLine ("{0}   {1}", words[i], count);
        } 
```

理想情况下，我希望输出类似于：

是 1

瑞士 1

其中 1

手表 2

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T05:12:52.643

您的代码的问题是（1）重复计数和（2）跳过嵌套循环中的初始元素。

您重复计算是因为您忽略了以下情况`i == j`；您跳过初始元素，因为您设置了`int j = 1`.

最短的解决方案是使用 LINQ，如下所示：

```
var counts = words
    .GroupBy(w => w)
    .Select(g => new {Word = g.Key, Count = g.Count()})
    .ToList(); 
```

现在您可以像这样打印结果：

```
foreach (var p in counts) {
    Console.WriteLine("Word '{0}' found {1} times", p.Word, p.Count);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T05:19:25.077

肯定有更有效的方法来处理这个问题（看看 dasblinkenlight 的答案非常好），但假设你想保持相对相同的代码，你应该将你的第二个 for 循环更改为以下几行：

```
for(int j = i+1; j < words.Length; j++)
{
    if (words [i] == words [j])
    {
        count++;
    }
    else break;
} 
```

这是我所做的两个更改：

1）您应该将 j 初始化为 i+1；您想检查其余字符串是否等于 words[i]，其余字符串将从 i+1 开始，而不是 1（除非 i=0）。

2）为了效率，如果两个字符串不相等，你会想跳出第二个循环；由于您按字母顺序对数组进行了排序，因此如果您当前查看的单词不相等，则后面的单词也不相等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T05:18:40.663

为了您的理解目的，请使用[**`String.Compare()`**](http://msdn.microsoft.com/en-us/library/zkcaxw5y.aspx)

```
 int Duplicate = words.Lenth + 1; //any value not in the range of the string array
  for (int i = 0; i < words.Length; i++) 
    {
        int count = 1;
        for(int j = 0; j < words.Length; j++)
        {
            if(i != j)  //to avoid same string comparison
            {
               if (string.Compare(words [i],words [j]) == 0)   //or else .Equals(0) 
               {
                  count++;
                  Duplicate = j;
               }
            }
        }
        if(i != Duplicate)
        {
           Console.WriteLine ("{0}   {1}", words[i], count);
        }
    } 
```

这不会再次打印相同的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T05:18:49.900

```
var occrs = words.GroupBy(x => x.ToLower())
               .ToDictionary(g => g.Key, g => g.Count());
foreach(var pair in occrs)
    Console.WriteLine(pair.Key + " " +pair.Value); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-12T06:00:05.303

利用字典数据结构。在这里，字典会将键存储为单词，将值存储为字数。插入字典中的所有单词。如果插入的词是新词，则将词键的值设置为 1 ，否则将词键值加 1。

```
 Dictionary<string, int> wordCount = new Dictionary<string, int>();

        // Insert a word in the dictionary if it exits, otherwise increment 
        //the count of the word

        for (int i = 0; i < words.Length; i++)
        {
            try
            {
                wordCount.Add(words[i], 1);
            }
            catch (Exception)
            {
                wordCount[words[i]] += 1;
            }
        }

        // display word and it's corresponding word count

        foreach (var item in wordCount)
        {
            Console.WriteLine ("{0}   {1}", item.Key, item.Value);
        } 
```

# javascript - javascript范围，为什么$（this）等于[window]？

> ID：13373365
> 
> 赞同：2
> 
> 时间：2012-11-14T05:10:08.127
> 
> 标签：javascript, scope

我有一个更新 html 并创建一些链接的 ajax 函数（不确定是否相关）：

```
<a href="#" class="clickme" onclick="column_click()" title="my title">click me</a> 
```

我不知道为什么，但是 onclick，如果我提醒`$(this).attr('title')`它显示为`undefined`，如果我提醒`$(this)`它显示`[window]`

```
 function column_click(){
            value = $(this);
            console.log(value);

            thetitle= $(this).attr('title');
            console.log(thetitle);
        } 
```

有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T05:13:27.993

这应该可以解决问题。

```
onclick="column_click.call(this);" 
```

原因是您的“点击处理程序”实际上只是一个函数。默认是`this`引用`window`对象。

在我上面的例子中，我们说“执行`column_click`并确保`this`引用`a`元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T05:28:54.487

您混淆了 JS/jQuery 事件处理的突兀和不突兀的风格。`onclick`在不显眼的风格中，您在 JavaScript 本身而不是在属性中设置点击处理程序：

```
$('.clickme').on('click', column_click); 
```

在处理事件时，上面将自动绑定`this`到单击的元素。

然而，这不是标准的 JavaScript！这是 jQuery 的一个特性。该`on`方法足够聪明，可以在处理事件时将函数绑定到 HTML 元素。`onclick="column_click"`不这样做，因为它不是 jQuery。它使用标准的 JS 行为，即默认绑定`this`到全局对象`window`。

顺便说一句，你看到的原因`[window]`是它`$(this)`已经包装`window`在一个 jQuery 对象中，所以它看起来像一个包含对象的数组`window`。

有三种主要方法可以解决您的问题：

1.  使用不显眼的绑定：`$('.clickme').on('click', column_click);`在页面末尾的脚本中，或在`$(document).ready`处理程序中的某处
2.  `this`手动绑定：`onclick="column_click.call(this)"`
3.  完全避免使用`this`：

    ```
    function column_click(e) {
        var value = $(e.target);
        //... 
    ```

其中，为了良好的编码，我强烈推荐 1 或 3。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-14T05:13:56.707

## ***的简短概述`this`

 *在 JavaScript 中执行函数时，默认`this`值为`window`.

```
function foo() {
    console.log(this);
}

foo(); // => window 
```

`this`可以通过多种方式更改该值。一种方法是将函数作为对象的方法调用：

```
var x = {
    foo: function() {
        console.log(this);
    }
};
x.foo(); // => This time it's the x object. 
```

另一种方法是使用`call`或`apply`告诉函数在某个对象的上下文中执行。

```
function foo() {
    console.log(this);
}
foo.call(x); // => x object again
foo.apply(x); // => x object as well 
```

如果你`call`或`apply`在`null`或`undefined`，默认行为将再次发生：该函数将在上下文中执行`window`：

```
function foo() {
    console.log(this);
}
foo.call(null); // => window
foo.apply(undefined); // => window 
```

但是，请注意，在 ECMAScript 5**严格模式下**，`this`不默认为窗口：

```
(function() {

    'use strict';

    function foo() {
        console.log(this);
    }

    foo(); // => undefined
    foo.call(null); // => null
    foo.apply(undefined); // => undefined

})(); 
```

您还可以在调用函数之前将其设置为`this`将`bind`函数绑定到对象：

```
function foo() {
    console.log(this);
}

var bar = {
    baz: 'some property'
};

var foobar = foo.bind(bar);

foobar(); // => calls foo with bar as this 
```

## 结论

您正在使用此代码：

```
<a href="#" class="clickme" onclick="column_click()" title="my title">click me</a> 
```

这意味着当点击链接时，它会执行`column_click();`. 这意味着该`column_click`函数将作为普通函数而不是方法执行，因为 (1) 它不是作为对象 ( `someobject.column_click();`) 的属性调用的，(2) 它不是用`call`or调用的`apply`，(3) 它不是用 调用的`bind`。由于它不是在严格模式下运行，因此默认`this`为`window`.

## 如何解决您的问题

因此，要解决您的问题，您可以简单地使用`call`(或`apply`) 来告诉函数在元素的上下文中执行。内小代码里面的属性值，`this`指的是元素。所以我们可以使用`column_click.call(this)`. 就这么容易！

```
<a href="#" class="clickme" onclick="column_click.call(this);" title="my title">click me</a> 
```

但是，将元素作为参数传递可能更有意义：

```
<a href="#" class="clickme" onclick="column_click(this);" title="my title">click me</a> 
```

并更改您的函数以接受参数：

```
function column_click(el) {
    // Use el instead of this...
} 
```

*** **获得技术**

`this`在 JavaScript 中是**动态作用域**的。此行为不同于所有其他**词法范围**的变量。其他变量没有不同的绑定，具体取决于*函数*的调用方式；它们的范围来自它们在脚本中出现的*位置。*`this`但是行为不同，并且可以具有不同的绑定，这取决于它在脚本中出现的*位置，而**取决于*它的调用方式。这对于学习该语言的人来说可能是一个困惑的根源，但要成为一名熟练的 JavaScript 开发人员，掌握它是必要的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-14T05:14:48.083

您需要在函数中传递参数`column_click`，

```
<a href="#" class="clickme" onclick="column_click(this)" title="my title">click me</a>

function column_click(obj){
        value = $(obj);
        console.log(value);
    } 
```

注意：`this`参考`window`对象。所以不会像你期望的那样工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-14T05:16:13.183

你在使用 jQuery 对吗？为什么不：

```
$(".clickme").click(function() {
  value = $(this);
  console.log(value);

  thetitle= $(this).attr('title');
  console.log(thetitle);
});

// or

$(".clickme").click(column_click); 
```*

# perl - 我如何存储立方体方法

> ID：13373370
> 
> 赞同：0
> 
> 时间：2012-11-14T05:11:11.620
> 
> 标签：perl

我想存储一个 ini 数据文件。如何在 perl 中存储多维数据集方法。

我试过了：

样式表.ini：

```
p   indent  noindent
h1  heading1
h2  heading2
h3  heading3
h4  heading4
h5  heading5
h6  heading6
disp-quote  blockquote 
```

脚本：

```
my %stylehash;
open(INI, 'stylesheet.ini') || die "can't open stylesheet.ini $!\n";
my @style = <INI>;
foreach my $sty (@style){
      chomp($sty);
      split /\t/, $sty;
      $stylehash{$_[0]} = [$_[1], $_[2], $_[3], $_[4]];
}

print $stylehash{"h6"}->[0]; 
```

在这里，我分配了 $ *[2]、$* [3]、$_[4] 不需要的数组。因为第一个 P 标签将得到两个数组，然后 h1 得到一个数组。如何完美存储以及如何检索它。

我需要：

```
$stylehash{$_[0]} = [$_[1], $_[2]]; #p tag
$stylehash{$_[0]} = [$_[1]]; #h1 tag

print $stylehash{"h1"}->[0];
print $stylehash{"p"}->[0];
print $stylehash{"p"}->[1]; 
```

如何存储多维数据集方法。标签始终是唯一的，样式名称随机增加或减少。我怎么解决这个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T05:38:48.533

如果我理解正确，您有一堆带有值列表的键。也许是一个值，也许是两个，也许是三个……而你想要存储它。最简单的做法是将其构建为列表哈希，并使用预先存在的数据格式（如[JSON](https://metacpan.org/module/JSON)），它可以很好地处理 Perl 数据结构。

```
use strict;
use warnings;
use autodie;

use JSON;

# How the data is laid out in Perl
my %data = (
    p     => ['indent', 'noindent'],
    h1    => ['heading1'],
    h2    => ['heading2'],
    ...and so on...
);

# Encode as JSON and write to a file.
open my $fh, ">", "stylesheet.ini";
print $fh encode_json(\%data);

# Read from the file and decode the JSON back into Perl.
open my $fh, "<", "stylesheet.ini";
my $json = <$fh>;
my $tags = decode_json($json);

# An example of working with the data.
for my $tag (keys %tags) {
    printf "%s has %s\n", $tag, join ", ", @{$tags->{$tag}};
} 
```

更多关于使用[数组的散列](http://perldoc.perl.org/perldsc.html#HASHES-OF-ARRAYS)。

# nginx - 使用 proxy_next_upstream 中上游服务器的 TCP RESET 计数来标记它们

> ID：13373374
> 
> 赞同：0
> 
> 时间：2012-11-14T05:11:30.323
> 
> 标签：nginx, load-balancing

我们正在使用 nginx 来前端我们的 apache 连接，效果很好。我现在正在考虑也使用 nginx（一个单独的实例）来负载平衡一些后端服务的想法。为了能够做到这一点，我想更好地了解 nginx proxy_next_upstream 模块的行为。

`syntax: proxy_next_upstream error | timeout | invalid_header | http_500 | http_502 | http_503 | http_504 | http_404 | off ...;`

`default:proxy_next_upstream error timeout;`

`context: http, server, location`

我可以专门使用 TCP RST 作为其中的参数之一来标记负载平衡服务器吗？真正的第一个参数，即“错误”封装了什么？我可以添加我的错误（RST 等）吗？我尝试了一些在那里设置 RST 的方法，但这似乎不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T19:34:07.107

[http://nginx.org/r/proxy_next_upstream](http://nginx.org/r/proxy_next_upstream)

> error — 在与服务器建立连接、向其传递请求或读取响应标头时发生错误；

这也必须在 SYN 上处理 RST。

# python - 如何将 XML 结果解析为数组？

> ID：13373376
> 
> 赞同：3
> 
> 时间：2012-11-14T05:11:55.877
> 
> 标签：python, xbmc

我是 Python 新手，需要一些帮助。网络不是很有帮助。简而言之，我有一个如下所示的网络响应：

```
<html>
  <field>123</field>
  <field>456</field>
</html> 
```

我要做的是将字段元素中的所有内容放入我可以索引的数组中。最终结果将如下所示：

```
myArray[0] = 123
myArray[1] = 456 
```

等等...

我最终要做的是运行一个随机数生成器来随机选择这个数组中的一个元素并检索它的值。

这可能吗？我似乎无法在网上找到直接的答案，所以我觉得我可能要求错了。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-14T05:58:14.923

如果您正在做类似的简单事情，您可能需要查看Python 中内置的[ElementTree模块。](http://docs.python.org/2/library/xml.etree.elementtree.html)你不需要安装任何额外的东西，它都包含在 python 中

```
import xml.etree.ElementTree as ET

filename='data.txt'
tree = ET.parse(filename)
root = tree.getroot()
myArray=[]

for x in root.findall('field'):
    myArray.append(x.text)

print(myArray) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T05:18:14.970

到目前为止，从 HTML 中提取信息的最简单方法是[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/bs4/doc/)。这是获取所需列表的片段：

```
>>> from bs4 import BeautifulSoup
>>> soup = BeautifulSoup(html_text)
>>> fields = [int(el.text) for el in soup.find_all("field")]
>>> fields
[123, 456] 
```

由于您是 Python 新手：

1.  我们来自模块`import`的类（您需要安装 - 请参阅上面的链接）。`BeautifulSoup``bs4`
2.  我们创建一个名为from的`BeautifulSoup`实例。`soup``html_text`
3.  我们`fields`使用列表推导式创建一个名为 的列表：
    *   将`text`of`el`转换为`int`eger
    *   `for`每个`el`
    *   我们通过`field`在`soup`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T05:16:38.377

我会使用 XPath [Xpath python](http://docs.python.org/2/library/xml.etree.elementtree.html)来解析这些值并将它们插入到一个列表中，首先声明并清空列表`my_list=[]`，然后附加这些值`my_list.append(parsed_value)`。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-11-14T05:36:17.283

看看标准模块！ [http://docs.python.org/2/library/htmlparser.html#examples](http://docs.python.org/2/library/htmlparser.html#examples)

如果您仅对问题中的情况需要此选项，请尝试此操作，它将所有标签替换为`' '`（空格），并将`str.split`结果文本拆分为一个或多个空格作为分隔符

```
import re
def get_data(str_data):
    return re.sub(r'<.*?>',' ', str_data).split()

str_data = """<html>
  <field>123</field>
  <field>456</field>
</html>"""

print get_data(str_data) # prints "['123', '456']" 
```

*对不起我的英语不好*

# c# - Char 数组不会在索引处打印

> ID：13373384
> 
> 赞同：0
> 
> 时间：2012-11-14T05:13:56.510
> 
> 标签：c#, .net

如果我将它转换为字符串，我有一个打印 AZ 的 char 数组，但是当我尝试从索引位置获取字符时，我什么也没得到？..

```
 char[] codes= new char[156];
    for (int i = 65; i < 91; i++) codes[i] = (char)i;
    Console.WriteLine(codes[2]); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T05:17:02.027

因为您开始将`char`'s 存储在索引 65..

```
Console.WriteLine(codes[65]); // A 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T05:19:34.550

这与您创建了一个巨大的数组但仅填充其中的一小部分并索引到不包含数据的部分有关。

您可以考虑使用范围进行简化..

```
var chars = Enumerable.Range(65, 90).Select(c => (char)c).ToArray();
Console.WriteLine(chars[2]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T05:29:27.673

或者您可以将您的代码修改为此。

```
char[] codes = new char[26];
for (int i = 0; i < 26; i++)
{
    codes[i] = (char)i;
    codes[i] += 'A';
}

Console.WriteLine(codes[2]); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-14T05:54:20.883

你试试下面的代码 Console.WriteLine(codes[2].ToString()); 原因是 Console.WriteLine 只能显示字符串值。

# ruby - 带有 mongolab 镜像和回退的本地 mongo 服务器

> ID：13373393
> 
> 赞同：2
> 
> 时间：2012-11-14T05:15:01.127
> 
> 标签：ruby, mongodb, mlab

1.  如何在 mongolab 上设置带有镜像的本地 mongodb（将所有写入从本地传播到 mongolab，因此它们始终是同步的 - 我不关心原子，只是它在合理的时间范围内同步）
2.  如果本地服务器停止工作（Ruby/Rails、mongo 驱动程序和 mongoid），如何使用 mongolab 作为后备。

背景：我曾经有一个本地 mongo 服务器，但它偶尔会崩溃，我的所有应用程序都停止工作 + 我必须“修复”数据库才能重新启动它。然后我切换到我非常满意的 mongolab，但它产生了大量流量，我想通过本地“缓存”来避免，但不必担心我的本地缓存崩溃导致我所有的应用程序停止在职的。数据库相对较小，因此大小不是问题。我不是想消除与 mongolab 通信的流量开销，只是降低一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T05:44:53.820

我假设您不希望 mongolab 实例只是副本集的一部分（或者可能不提供）。最简单的方法是将远程 mongod 实例添加为[隐藏成员](http://docs.mongodb.org/manual/administration/replica-sets/#replica-set-hidden-members)（优先级 0），然后让它从本地实例复制数据。

您可以使用的另一种直接解决方案是`mongooplog`可用于轮询一台服务器上的 oplog，然后将其应用于另一台服务器。本质上是按需复制（您需要适当地播种一个实例等，并且需要管理任何故障）。更多信息在这里：

[http://docs.mongodb.org/manual/reference/mongooplog/](http://docs.mongodb.org/manual/reference/mongooplog/)

最后一个选项是使用您选择的语言的可[尾光标](http://www.mongodb.org/display/DOCS/Tailable+Cursors)自己编写一些东西，以将 oplog 数据提供给远程实例。

# java - 使用数据报通道时端口不可达

> ID：13373394
> 
> 赞同：4
> 
> 时间：2012-11-14T05:15:03.653
> 
> 标签：java, networking, nio, datagram, channels

在使用数据报通道时，我得到一个`PortUnreachableException`. 这就是我的代码的样子：这是发送方

```
//Open a non-blocking socket to send data to Receiver
DatagramChannel channel = DatagramChannel.open();
channel.configureBlocking(false);
channel.socket().bind(new InetSocketAddress(10000));
channel.connect(new InetSocketAddress(host,UDPort)); 
```

正是这段代码给了我：`java.net.PortUnreachableException`。参数“host”设置为：

```
String host = new String("192.168.1.3"); 
```

接收方是这里

```
//Open a Socket to listen for incoming data
DatagramChannel channel = DatagramChannel.open();
channel.connect(new InetSocketAddress(UDPort));
channel.configureBlocking(false);
ByteBuffer buffer =   ByteBuffer.allocate((recvpkt[0].length)*4);
System.out.println("Waiting for packet");
channel.receive(buffer);
System.out.println("Received packet"); 
```

我不明白为什么我会得到这个例外。我在网上查找了示例，这就是他们都建议的代码应该是这样的。

更新 1：

正如shazin在评论中指出的那样，绑定需要在Receiver完成，在Sender连接。发件人的更新代码是：

```
DatagramChannel channel = DatagramChannel.open();
channel.configureBlocking(false);
channel.connect(new InetSocketAddress(host,UDPort)); 
```

对于接收方：

```
DatagramChannel channel = DatagramChannel.open();
channel.configureBlocking(false);
channel.socket().bind(new InetSocketAddress(host,UDPort)); 
```

现在的问题是，如果“主机”设置为“本地主机”，程序可以工作，但是如果我们传递一个 IP 说 10.132.0.30 作为“主机”，`java.net.PortUnreachableException`就会发生。虽然`channel.isConnected()`选项返回“true”，但 channel.write(buffer) 命令会给出异常。

更新 2：

现在`PortUnreachableException`没有了。现在代码中的唯一区别是我使用选择器来接受接收端的连接。我仍然不明白为什么在不使用选择器时会出现错误。如果有人偶然发现这个问题并且知道，请发布您的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T06:01:53.260

代码是正确的，但端口确实无法访问。这是一个网络连接问题，或者一个没有监听器的问题，而不是一个编码问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T06:36:05.683

尝试使用以下方法获取 IP 地址

```
channel.connect(new InetSocketAddress(InetAddress.getByName(host),UDPort)); 
```

UDPort 必须等于您用于在 Receiver 中绑定的端口。

# iphone - iOS 中当前日期和即将到来的日期之间的天数差异

> ID：13373399
> 
> 赞同：1
> 
> 时间：2012-11-14T05:16:00.020
> 
> 标签：iphone, objective-c, xcode, ios5

通过我得到的帮助，我已经尝试了很多事情，但我仍然无法弄清楚如何正确地做到这一点。这是我最后所做的。

```
NSDateFormatter *tempFormatter = [[NSDateFormatter alloc]init];
[tempFormatter setDateFormat:@"dd-MM-yyy"];

NSDate *currentDate = [NSDate date];
NSDate *fromDate = [NSString stringWithFormat:@"%@",[tempFormatter stringFromDate:currentDate]];
NSLog(@"currentDate %@", fromDate);

NSDate *toDate = [NSString stringWithFormat:@"%@",[tempFormatter stringFromDate:datePicker.date]];
NSLog(@"toDate %@", toDate);

NSTimeInterval interval = [toDate timeIntervalSinceDate:fromDate];
double leftDays = interval/86400;
NSLog(@"Total interval Between::%g",leftDays); 
```

告诉我我做错了什么。是不是 NSDate 转换，我做得不好？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T05:33:10.513

你的代码都搞砸了——toDate 和 fromDate 都是字符串而不是 NSDates。您的起始日期应该只是 currentDate，而您的 toDate 应该只是 datePicker.date。您无需转换为字符串或使用日期格式化程序来获取时间间隔。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T05:50:40.387

这条线正在制造问题。

```
 NSDate *toDate = [NSString stringWithFormat:@"%@",[tempFormatter stringFromDate:datePicker.date]]; 
```

它将类型`toDate`从 NSDate 更改为`__NSCFString`. 它的`NSTimeInterval`两个参数都是 NSDate 类型，但在你的情况下只有`fromDate`NSDate 类型。

使用这些行更改您的代码

```
NSDate *currentDate = [NSDate date];
    NSDate *toDate = datePicker.date;
NSTimeInterval interval = [toDate timeIntervalSinceDate:currentDate]; 
```

它肯定会起作用（inshaAllah）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T05:34:12.157

你肯定走在正确的轨道上；但是，您似乎正在使用两个 NSString 调用“timeIntervalSinceDate”（即使您将 fromDate 和 toDate 指定为 NSDates，请在此之后立即查看 - 您正在将这两个变量设置为 NSString 对象）。

要获得您正在寻找的间隔，请尝试：

```
[datePicker.date timeIntervalSinceDate:currentDate]; 
```

这应该让你得到正确的间隔。此外，您可能希望将 leftDays 更改为等于

```
double leftDays = abs(round(interval/86400)); 
```

这将阻止 leftDays 成为像 -1.00005 这样的尴尬数字。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-14T05:39:45.903

`将 NSString 传递给 NSDate！这段代码是错误的

尝试

```
NSDate *curDate = [NSDate Date];
NSDate *pickerDate = datepicker.date; 
```

然后使用 NSTimeInterval 比较这两个日期

# java - 跟踪 currentTimeMillis

> ID：13373403
> 
> 赞同：0
> 
> 时间：2012-11-14T05:16:33.853
> 
> 标签：java, stopwatch

我需要创建一个对象，该对象将使用其自己的类方法在一定时间内停止执行。如何让程序跟踪经过的时间并在经过指定的时间后执行函数。

我想 .......

```
long pause; //a variable storing pause length in milliseconds.............
long currentTime; // which store the time of execution of the pause ,............. 
```

并且当另一个变量 tracking time 的值与 currentTime + pause 相同时，执行下一行代码。是否有可能使一个变量在短时间内随着时间的推移每毫秒变化一次？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T05:25:02.337

对于一个简单的解决方案，您可以使用[`Thread#sleep`](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#sleep%28long%29)

```
public void waitForExecution(long pause) throws InterruptedException { 
    // Perform some actions...
    Thread.sleep(pause);
    // Perform next set of actions
} 
```

用计时器...

```
public class TimerTest {

    public static void main(String[] args) {
        Timer timer = new Timer("Happy", false);
        timer.schedule(new TimerTask() {

            @Override
            public void run() {
                System.out.println("Hello, I'm from the future!");
            }
        }, 5000);

        System.out.println("Hello, I'm from the present");
    }
} 
```

并带有一个循环

```
long startAt = System.currentTimeMillis();
long pause = 5000;
System.out.println(DateFormat.getTimeInstance().format(new Date()));
while ((startAt + pause) > System.currentTimeMillis()) {
    // Waiting...
}
System.out.println(DateFormat.getTimeInstance().format(new Date())); 
```

请注意，这比其他两个解决方案更昂贵，因为循环继续消耗 CPU 周期，其中`Thread#sleep`并`Timer`使用允许线程空闲（而不消耗周期）的内部调度机制

# ruby-on-rails - RoR has_two 关系：两个用户之间的捐赠

> ID：13373405
> 
> 赞同：1
> 
> 时间：2012-11-14T05:16:41.607
> 
> 标签：ruby-on-rails, ruby, relationship

我有一个问题，我发现很难在网上搜索答案...

我的 Ruby On Rails 中有两个模型：用户和捐赠。

我希望一个关系有两个用户：user1 给 user2 10 美元。

这是我带来的：

```
class Donation < ActiveRecord::Base
  attr_accessible :description, :value, :from_user_id, :to_user_id

  def from_user
     User.find(from_user_id)
  end

  def to_user
     User.find(to_user_id)
  end

end 
```

但我想使用关系......你知道最好的方法吗？

非常感谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T05:19:14.760

```
has_one :from_user, :class_name => 'User', :foreign_key => 'from_user_id'
has_one :to_user, :class_name => 'User', :foreign_key => 'to_user_id' 
```

关系没有什么特别的......好吧，他们现在是，但这基本上构造了适当的sql。我认为。没试过。

# c++ - SQLite 中的并发访问

> ID：13373409
> 
> 赞同：6
> 
> 时间：2012-11-14T05:17:14.927
> 
> 标签：c++, c, database, sqlite

SQLite 可以管理并发访问吗？我将 SQLite 与 C/C++ 一起使用？如果不支持的话。有什么建议可以支持 SQLite 中的并发访问吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-14T05:27:09.290

是的，正如[这里](http://sqlite.org/lockingv3.html)的文档所述：

> SQLite 版本 3.0.0 引入了一种新的锁定和日志机制，旨在提高 SQLite 版本 2 的并发性并减少写入器饥饿问题。新机制还允许原子提交涉及多个数据库文件的事务。

和：

> SQLite 使用 POSIX 咨询锁来实现 Unix 上的锁定。在 Windows 上，它使用 LockFile()、LockFileEx() 和 UnlockFile() 系统调用。

[在这里](http://sqlite.org/atomiccommit.html)：

> SQLite 使用文件系统锁来确保一次只有一个进程和数据库连接试图修改数据库。文件系统锁定机制是在 VFS 层中实现的，并且对于每个操作系统都是不同的。SQLite 取决于此实现是否正确。如果出现问题并且两个或多个进程能够同时写入同一个数据库文件，则可能会导致严重损坏。

# string - PySerial 和 readline() 返回二进制字符串 - 转换为常规字母数字字符串？

> ID：13373415
> 
> 赞同：4
> 
> 时间：2012-11-14T05:17:37.393
> 
> 标签：string, serial-port, pyserial, python-3.3

我遇到了 PySerial 和 Python (3.3) 的问题：我正在运行的代码（现在，这只是一个简单的测试用例）如下：

```
ser = serial.Serial('/dev/ttyACM0', 115200)
result = ser.readline()
parsed = result.split(",") 
```

这给出了以下错误：

```
TypeError: type str doesn't support the buffer API 
```

我的愚蠢错误是什么？我想我已经追踪到 PySerial 的 readline 正在返回一个二进制字符串（python 3 中的新功能？）并且字符串操作“split”在针对二进制字符串运行时失败 - 如果你运行它，它工作正常：

```
'1234, asdf, 456, jkl'.split(",") 
```

这给出了预期：

```
['1234', 'asdf', '456', jkl'] 
```

但随后运行：

```
b'1234, asdf, 456, jkl'.split(",") 
```

给出了上面的错误。是否有不同的 readline 方法可以使用？我应该使用 read 编写自己的代码（并且只读取直到它看到 /r/n）还是可以轻松转换为满足 str.isalnum() 的字符串？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T14:48:00.847

The quickest solution will be to use a python module called binascii that has a selection of functions for converting the binary string to an ascii string: [http://docs.python.org/2/library/binascii.html](http://docs.python.org/2/library/binascii.html)

EDIT: The b means that it is a byte array and not a literal string. The correct way to convert the byte array to a litteral string will be to use the str() function:

str(b'1234, asdf, 456, jkl', 'ascii').split(",")

this gives the output you want: ['1234', 'asdf', '456', jkl']

I hope that helps!

# android - Blackberry Android Lauch 不起作用

> ID：13373416
> 
> 赞同：1
> 
> 时间：2012-11-14T05:18:07.913
> 
> 标签：android, eclipse, adt, blackberry-eclipse-plugin, blackberry-android

我正在尝试在我的 Blackberry Playbook 上调试移植的 android 应用程序，但每当我尝试将其启动为`Blackberry Android Launch`：

```
An internal error occurred during: "Launching The Dot Game Playbook".
com.android.ide.eclipse.adt.internal.project.AndroidManifestHelper.parseForData(Lorg/eclipse/core/resources/IProject;)Lcom/android/sdklib/xml/ManifestData; 
```

我无法弄清楚是什么导致了这个错误。该应用程序在 android 模拟器中运行良好，但不适用于黑莓工具。我尝试清理项目、更新 android SDK、重新启动 Eclipse 并重新安装 Blackberry 插件，但没有任何效果。有任何想法吗？

编辑：这是我的 AndroidManifest.xml：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="net.g33kworld.thedotgame"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="10"
    android:targetSdkVersion="10" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" android:allowBackup="true">
    <activity
        android:name="net.g33kworld.thedotgame.DotGame"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T23:14:04.280

BlackBerry Plug-in 1.3 Beta 与 ADT（Android 开发工具）版本 21 不兼容。我在 Windows 7 和 Mac OS 10.7.5 上也遇到过这个错误。

一个小时后，我终于找到了解决方案（解决方法）：

1.  从 Eclipse 中卸载 ADT 和 BlackBerry 插件
2.  [从这里](http://dl.google.com/android/ADT-20.0.0.zip)手动下载 ADT 20
3.  从下载的存档中将 ADT 安装为 Eclipse 插件
4.  安装黑莓插件 1.3 Beta

请注意，我还在我的[个人网站上发布了包含更多详细信息的解决方案](https://www.anavi.org/article/152/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T22:27:18.260

您是否为 Eclipse 安装了测试版的 BB 插件？请参阅此[链接](http://supportforums.blackberry.com/t5/Android-Runtime-Development/Problem-when-launching-an-app-in-simulator-with-Eclipse/m-p/1815075/highlight/true#M2558)了解更多信息。

# jquery - 在 jquery html 中计算总成本的麻烦

> ID：13373419
> 
> 赞同：1
> 
> 时间：2012-11-14T05:18:35.807
> 
> 标签：jquery, html

尝试制作一个简单的计算表格；line total, qty total, shipping * qty total, 然后是总计，在 jquery 中找到了一些代码来完成第一部分，但不是 100% 确定如何完成其​​余部分！

以下是我到目前为止所拥有的...

谢谢马特。

```
<HTML>
    <pre class="prettyprint">
        This is an example of working out total pricing,  original code taken from 
        V3: http://stackoverflow.com/questions/9900369/jquery-calculate-sum-of-fields-dynamic

        -Need to work out total QTY, then multiple total freight by total qty (ie. qty of 5, so 5 x $10 = $50 worth of freight)
    </pre>
    <script src="http://code.jquery.com/jquery-latest.js"></script>
    <SCRIPT>
        $(function(){
            function doCalc() {
                var total = 0;
                $('tr').each(function() {
                    $(this).find('span.amount').html($('input:eq(0)', this).val() * $('select', this).val());
                });
                $('.amount').each(function() {
                    total += parseInt($(this).text(),10);
                });
                $('div.total_amount').html(total);

            }
            $('button').click(doCalc);
        });
    </script>
    <table class="table table-striped table-condensed table-bordered">
        <thead>
            <tr>
                <th width="20%">Item</th>
                <th width="20%">Unit Price</th>
                <th width="20%">Quantity</th>
                <th width="20%">Total</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>Item1</td>
                <td>$10<input type="hidden" value="10"></td>
                <td><select size="1" style="border-style: solid; border-width: 1px; padding-left: 4px; padding-right: 4px; padding-top: 1px; padding-bottom: 1px">
                    <option value="0" selected>0</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                </select></td>
                <td>$<span class="amount"></span> </td>
            </tr>
            <tr>
                <td>Item2</td>
                <td>$20<input type="hidden" class="really don't care" name="testing" value="20"></td>
                <td><select size="1" class="input-small" name="var_1_1" style="border-style: solid; border-width: 1px; padding-left: 4px; padding-right: 4px; padding-top: 1px; padding-bottom: 1px">
                    <option value="0" selected>0</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                </select></td>
                <td>$<span class="amount"></span> </td>
            </tr>
            <tr>
              <td colspan="3"><strong>Total  QTY</strong></td>
              <td></td>
              <td><strong><div class="total_qty"></div></strong></td>
          </tr>
          <tr>
              <td colspan="3"><strong>Total  Freight @$15 x QTY</strong></td>
              <td></td>
              <td><strong><div class="total_freight"></div></strong></td>
          </tr>
          <tr>
            <td colspan="3"><strong>Total  cost $</strong></td>
            <td></td>
            <td><strong><div class="total_amount"></div></strong></td>
        </tr>
    </tbody></table>
    <button>Go!</button>
</HTML> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T05:33:31.643

Check it out here, [http://jsfiddle.net/muthkum/hDdtx/2/](http://jsfiddle.net/muthkum/hDdtx/2/)

I modified your JS code,

```
$(function(){
    function doCalc() {
        var total = 0;
        var qty = 0;
        $('tr').each(function() {
            $(this).find('span.amount').html($('input:eq(0)', this).val() * $('select', this).val());
        var sel_val = parseInt($('select', this).val(), 10);
        if(!sel_val) sel_val = 0;
        qty = qty + sel_val;
        });
        $('.amount').each(function() {
            total += parseInt($(this).text(),10);
        });
        $('.total_qty').text(qty);    //Total QTY calculation
        $('.total_freight').text(15*qty);   //Total Freight @$15 x QTY calculation
        $('div.total_amount').html(total);  //Total Cost

    }
    $('button').click(doCalc);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T05:38:51.413

你可以试试这个[**例子**](http://jsfiddle.net/wPrVr/2/)。

```
$(function(){
    $('button').click(doCalc);
});​

function doCalc() {
    var total = 0;
    $('tbody tr').each(function() {
        var txt=$('input:eq(0)', this).val(),
        sel=$('select', this).val();
        if(typeof txt !='undefined')
        {
            $(this).find('span.amount').html(txt*sel);
            total += parseInt(txt*sel);
        }
    });
    $('div.total_amount').html(total);
} 
```

# java - Eclipse 不会启动程序

> ID：13373423
> 
> 赞同：0
> 
> 时间：2012-11-14T05:18:56.710
> 
> 标签：java, eclipse

所以我为 Eclipse 3.7.2 中的算法编写了一个简单的测试程序。当我去运行它时，我遇到了一些出现在控制台顶部的灰色条。上面写着：`<terminated> test[Java Application]C:\Program Files\Java\jre6\bin\javaw.exe`。有谁知道这是什么原因造成的？ ![在此处输入图像描述](../Images/f640934c5a3cb9beee27a0949d84b0bb.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T05:36:15.583

您的程序正在正确执行。问题出在程序的逻辑中，它永远不允许它到达 print 语句。当你这样做

```
if(s==original)
return; 
```

在您的情况下，此语句`s==original`始终返回 true，因为此运算符将比较两个对象。您需要在这里重新考虑您的逻辑，并`== operator`在 Google 上搜索 Java 中的功能。

另外，另一方面`String[] s = {"a","b","c"}`，为什么不使用数组而不是使用字符串`String s = "abc";`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T05:27:13.370

您需要转到**控制面板> Windows 防火墙**并选择**恢复默认值**，但如果您不想丢失其他设置，您可以尝试高级设置并在那里找到 eclipse。

# matlab - 如何去除 CMOS 相机中的相机噪音

> ID：13373432
> 
> 赞同：1
> 
> 时间：2012-11-14T05:20:02.743
> 
> 标签：matlab, image-processing, opencv, camera, noise-reduction

在这里，我附上了由带有红外滤镜的 cmos 相机捕获的两个连续帧。在捕获图像时，对象检查板是静止的。但是两个图像之间的差异接近 31000 像素。这可能会影响我的结果。你能告诉我这是什么噪音？我怎样才能消除它。请建议我任何可能的算法或任何功能来消除这些噪音。谢谢。对不起，我的英语很差。

图片1：[1]：http: [//i45.tinypic.com/2wptqxl.jpg](http://i45.tinypic.com/2wptqxl.jpg)

图片2：[2]：http: [//i45.tinypic.com/v8knjn.jpg](http://i45.tinypic.com/v8knjn.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T06:11:03.300

该噪声似乎是由相机传感器引起的[（拜耳到 RGB 转换）](http://en.wikipedia.org/wiki/Bayer_filter)。棋盘图案仍然存在。

有损 jpg 也对这个过程有很大贡献。您应该首先可以访问原始图像。

从那些特定的图像中，我首先尝试使用边缘检测过滤器（Sobel 水平和垂直）来制作一个掩码，在平坦区域的一些中值/局部直方图均衡之间进行选择，并对边缘应用一些棋盘减少过滤器。关键是，可能没有一个过滤器能够同时处理 jpeg 振铃伪影和锯齿状边缘。那么真正的问题是：应该处理哪些其他类型的图像？

来自评论：如果要精确地制作角点，那么解决方案更有可能是搜索特征（具有亚像素分辨率的角点）并从一组点映射到另一组图像的角点，然后搜索将这些集合相互转换的最佳仿射变换矩阵。有了这个矩阵，一个人就可以对另一张图像进行重新采样。

幸运的是，人们可以用亚像素分辨率估计运动矢量，而无需蛮力搜索所有可能的亚像素位置：在计算匹配滤波器时，可以获得精确匹配的潜在候选者的局部最大值。但这还不是全部。可以通过研究附近像素中的匹配滤波器输出来尝试计算更精确的峰值位置近似值。对于精确匹配，输出应该是对称的。否则，匹配滤波器的“能量”会偏向次佳位置。（二次多项式拟合+找到最大值可以工作。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T07:45:10.273

仔细观察这些图像，我必须同意@Aki Suihkonen。在我看来，主要的噪音来自 jpeg 压缩，这会导致尖锐的边缘“响起”。我会尝试在图像上使用“去斑”类型的过滤器，看看这是否会有所不同。[可以在此链接](http://www.kyb.mpg.de/fileadmin/user_upload/files/publications/attachments/TechReport-173_%5B0%5D.pdf)中找到一些可以帮助您实现此功能的信息。

以更快速和肮脏的方式，您应用**许多标准工具****之一**，例如，假设图像是和：**`a``b`**

 **(i) 只需使用高斯滤波器对图像进行平滑处理，这可以将图像之间的噪声差异降低一个数量级。例如：

```
 h=fspecial('gaussian',15,2);
  a=conv2(a,h,'same');
  b=conv2(b,h,'same'); 
```

(ii) 通过自适应滤波降低噪声

```
 a = wiener2(a,[5 5]);
 b = wiener2(b,[5 5]); 
```

(iii) 使用直方图均衡调整强度值

```
 a =  histeq(a);
 b =  histeq(b); 
```

(iv) 将强度值调整到指定范围

```
 a = imadjust(a,[0 0.2],[0.5 1]);
 b = imadjust(b,[0 0.2],[0.5 1]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T05:53:09.693

如果您的图像应该是黑白的，但您以灰度捕获它们，则可能会因噪声而有所不同。您可以通过定义阈值将图像转换为黑白，值小于该阈值的任何像素都应分配为 0，大于该阈值的任何像素应分配为 1，或者无论您的灰度范围是什么（可能是 255）。假设您的图像是`I`，假设您的灰度图像级别是从 0 到 255，使其成为黑白，假设您选择的阈值为 100：

```
ind = find(I < 100);
I(ind) = 0;
ind = find(I >= 100);
I(ind) = 255; 
```

现在你有一张黑白图像，对另一张图像做同样的事情，如果相机和主体移动了，你应该得到非常小的差异。**

# java - 在 JFrame 中隐藏某些控件时控件的位置发生变化

> ID：13373433
> 
> 赞同：0
> 
> 时间：2012-11-14T05:20:08.887
> 
> 标签：java, swing, controls, jframe, show-hide

我有一个 JFrame，其中有很多控件。我多次调用这个框架，有时我不得不隐藏一些控件。当我隐藏控件时，其他未隐藏的控件的位置会自动更改。我想避免这种行为。请在这方面提供帮助。

```
 pnlRec.setVisible(true);
  btnNew.setVisible(false); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T06:06:33.283

我会建议一个基于`CardLayout`. 将所有要隐藏的组件放在一个`JPanel`with 中`CardLayout`。每个面板应该有 2 张卡片 - 原始组件和空面板。无需隐藏组件，只需交换显示空卡片面板的卡片即可。

那应该保持布局相同。

# r - 如何将具有混合变量的向量拆分为R中的两个单独的向量

> ID：13373438
> 
> 赞同：0
> 
> 时间：2012-11-14T05:20:42.860
> 
> 标签：r, variables, mixed

我使用 strsplit 函数从数据文件中提取了一个包含数字和字符串值的混合变量。我最终得到了一个变量，如下所示：

```
> sample3

[[1]]
[1] "1200" "A"  

[[2]]
[1] "1193" "A"  

[[3]]
[1] "1117" "B"  

[[4]]
[1] "5663" 

[[5]]
[1] "7003" "C" 

[[6]]
[1] "1205" "A"  

[[7]]
[1] "2100" "D"  

[[8]]
[1] "1000" "D"  

[[9]]
[1]  "D" 

[[10]]
[1] "1000" "B" 
```

我需要将其拆分为两个变量/向量（或转换为两列矩阵）。我尝试使用 unlist(sample3) 代码，然后将所有值放入 ncol=2 的矩阵中，但是由于缺少一些数据点，因此当我使用这种方式时结果不正确。我想我需要在放入两列矩阵之前解决缺失数据的问题。有人对这个问题有任何想法吗？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T05:32:31.660

Something like this will work

```
# dummy data
x <- list(c('100','a'), '100', c('a'), c('1000','b'))

numeric_x <- unlist(lapply(x,function(x) {.x <- head(x,1); as.numeric(.x)}))

character_x <- unlist(lapply(x,function(x) {.x <- tail(x,1); if(is.na(as.numeric(.x))) {return(.x)} else {return(NA)}})) 
```

There will be a much nicer regex answer I am sure

# c# - 重用在紧凑框架中创建的屏幕？

> ID：13373439
> 
> 赞同：0
> 
> 时间：2012-11-14T05:20:48.623
> 
> 标签：c#, windows-mobile, compact-framework

我已经使用表单编辑器在紧凑框架中创建了一个屏幕，有没有办法可以抓取这个屏幕或至少它的一些组件并在紧凑框架应用程序的多个位置使用它们？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T12:44:01.733

是的，tcarvin 是对的，只需创建一个用户控件，然后根据需要在您的紧凑框架应用程序中重复使用它。

要在 VS 中右键单击解决方案资源管理器中的项目名称：

![添加用户控制](../Images/e523b834751596a1489f8a947ae6ab14.png)

在弹出菜单中单击添加，然后单击用户控件。接受或更改用户控件的文件名，然后您正在查看空的用户控件：

![添加用户控件设计视图01](../Images/1214aca52988876c0eda8ebd821e44cc.png)

您现在可以调整用户控件画布的大小，然后将其他控件作为按钮、标签、文本框等放置在其上：

![一个简单的用户控件](../Images/3f9d9f7ac2d769abf00de511d7f631b2.png)

然后，您还可以为按钮事件等输入代码。在示例中，可以添加代码以使用 openfiledialog 选择文件，然后文件名将显示在文本框中。准备好后，您必须构建解决方案以在 Visual Studio 左侧获取更新的控制列表。回到窗口窗体设计视图，然后您可以放置​​您的用户控件：

![winform内的用户控件位置](../Images/2ddf251864a500a38e1d264f15dba770.png)

这么简单吗？

您还可以使用用户控件构建库，然后在引用该库的每个紧凑框架项目中重用您的控件。

~约瑟夫

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T14:24:51.090

听起来您需要查看[UserControls](http://msdn.microsoft.com/en-us/library/system.windows.forms.usercontrol%28v=vs.90%29.aspx)。它们允许您创建将一个或多个控件添加到表面（UserControl），然后您可以将该 UserControl 添加到应用程序中任意数量的窗体中。

# php - 从不同位置获取网站内容

> ID：13373443
> 
> 赞同：0
> 
> 时间：2012-11-14T05:21:11.037
> 
> 标签：php, web-applications, cpanel

我正在开发一个在线会计项目。我不想将我的代码提供给客户，但我必须将域的控制权交给他们。如何配置应用程序，使其使用客户域中的数据库和我自己域中的应用程序？

例如：我在 www.a.com 中的应用程序域和我的客户域是 b.com、c.com 等。a.com 保存应用程序源代码，b.com 保存数据库。

现在我想做的是从 a.com 获取应用程序代码，并在打开 b.com 时从 b.com 获取数据库。

或者还有其他方法可以实现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T05:30:42.610

Look into setting a CNAME record through your domain name's administration settings and using sub-domains, perhaps.

Here's more information from Google [http://support.google.com/a/bin/answer.py?hl=en&answer=47283](http://support.google.com/a/bin/answer.py?hl=en&answer=47283) and Wikipedia [http://en.wikipedia.org/wiki/CNAME_record](http://en.wikipedia.org/wiki/CNAME_record)

# ios6 - SIP 和 ZRTP 目标 c 库

> ID：13373444
> 
> 赞同：1
> 
> 时间：2012-11-14T05:21:13.427
> 
> 标签：ios6, sip

我想在我的应用程序中使用 SIP 和 ZRTP 协议。我还没有找到一个实现了这两个目标的 c 库/框架。

尽管我知道这些协议是单独可用的，例如使用 SIP 的 idoubs 或具有 ZRTP 集成的 icall。我还从网站[http://www.zrtp.org/pjsip-integration](http://www.zrtp.org/pjsip-integration)完成了 PJSIP - ZRTP 集成，但这种集成也不知何故没有发生。它显示错误

我想知道有没有其他可用的方法来解决这个问题。

**编辑：**我发现了更多的库，但它们都有很多错误

[https://github.com/traviscross/libzrtp](https://github.com/traviscross/libzrtp)

[http://www.qutecom.org/browser/verona/oRTP/src/zrtp.c?rev=519](http://www.qutecom.org/browser/verona/oRTP/src/zrtp.c?rev=519)

我正在使用 doubango 框架进行 VoIP 和视频通话，我想为该框架集成 zrtp。我对如何实现此功能感到困惑？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T11:18:40.543

鉴于 SIP 与媒体无关，为什么需要一个同时使用两者的框架？

使用您喜欢的任何 ZRTP 实现，保留您需要的端口，并为您的 INVITE 为 SIP 实现提供构建的 SDP。

# iphone - 如何在 iOS 中将音频数据转换为 NSString？

> ID：13373445
> 
> 赞同：0
> 
> 时间：2012-11-14T05:21:16.213
> 
> 标签：iphone, ios, audio, nsstring, nsdata

我想将音频数据转换为 NSString。

我有音频数据，它不是公牛。但是当我将音频转换为 NSString 时，转换字符串为空。我正在使用以下代码.....

```
NSString *audioStr = [[NSString alloc] initWithData:audioData encoding:NSUTF8StringEncoding]; 
```

我哪里错了，我不明白。请帮助我任何一个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T06:08:54.693

如果你正在寻找`'Speech to Text'`认可，你可以尝试

1.  [开耳](http://www.politepix.com/openears/)
2.  [iSpeech](http://www.ispeech.org/speech.recognition)

此外，如果您只想听写到 UITextField 或 UITextView，您可以使用语音转文本的内置选项。

# ruby - ruby：自我从一个类变为另一个类

> ID：13373452
> 
> 赞同：1
> 
> 时间：2012-11-14T05:22:19.630
> 
> 标签：ruby

下面的代码有助于计算完成任务的工作时间。在`calculate_deadline`方法中，在 BusinesHours 类中，两个 puts 语句揭示了这一点

```
 puts self
#<BusinessHours:0x000001008cbb70>

  puts self[start_time.to_date].inspect
#<TimeRange:0x000001008cbb48 @range=2010-06-10 09:00:00 -0700..2010-06-10 15:00:00 -0700> 
```

我不明白为什么在calculate_deadline 中将start_time.to_date 放在'self' 旁边会将self 从BusinessHours 类更改为TimeRange 类，正如两个puts 语句所暗示的那样，特别是因为'to_date' 方法是Time 类的一部分。你能解释一下这是怎么发生的吗？

```
require 'time'
require 'date'

class Time
  def to_date
    Date.new(year, month, day)
  end
end

class BusinessHours

  def initialize(time_in, time_out)
    @default_range = TimeRange.new(time_in, time_out)
    @modified_days = {}
  end

  def update(day, time_in, time_out)
    key = day.is_a?(Symbol) ? day : Date.parse(day)
    @modified_days.merge!({key => TimeRange.new(time_in, time_out)})
  end

  def closed(*days)
    days.each {|day| update(day, '0:00', '0:00')}      
  end

  def [](date)
    day_of_week = date.strftime("%a").downcase.to_sym
    range = @modified_days[date] || @modified_days[day_of_week] || @default_range
    # reset time range dates to match date param
    range.reset_date(date)
    range
  end

  def calculate_deadline(seconds, start_time)
    start_time = Time.parse(start_time)
    puts self
    puts self[start_time.to_date].inspect
    range = self[start_time.to_date]

    if range.applies?(start_time)
      start_time = [start_time, range.start].max
      available_seconds = range.stop - start_time

      return start_time + seconds if available_seconds > seconds
      seconds -= available_seconds
    end

    calculate_deadline(seconds, (start_time.to_date + 1).to_s)
  end

end

class TimeRange

  def initialize(time_in, time_out)
    @range = Time.parse(time_in)..Time.parse(time_out)

  end

  def reset_date(date)
    @range = Time.local(date.year, date.month, date.day, start.hour, start.min)..
      Time.local(date.year, date.month, date.day, stop.hour, stop.min)    
  end

  def applies?(time)
    stop > time
  end

  def stop

    @range.end
  end

  def start
    @range.begin
  end

end

k = BusinessHours.new("9:00 AM", "3:00 PM")
k.calculate_deadline(20*60*60, "Jun 7, 2010 10:45 AM") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T05:27:58.910

```
@default_range = TimeRange.new(time_in, time_out) 
```

从那行，我们可以看到这`@default_range`是一个`TimeRange`实例，它`@modified_days`是一个空哈希（因此`@modified_days[anything]`将为 nil，即假）。

```
range = @modified_days[date] || @modified_days[day_of_week] || @default_range 
```

由于`@modified_days[anything]`是假的，`range`最终成为`@default_range`，正如我们在上面看到的，它是一个`TimeRange`对象。您的`[]`方法`BusinessHours`返回`range`变量，它是一个`TimeRange`对象。

因此，`self`作为一个`BusinessHours`对象，当你调用`[]`方法（`self[argument]`）时，你会得到一个`TimeRange`对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T05:27:01.983

它不会改变您的`self`. 您正在检查不同的对象。

```
self.inspect       # inspecting 'self'.

self[date].inspect # inspecting 'self[date]'
                   # which returns a `TimeRange` object `range`.
                   # Hence, you are inspecting `range`. 
```

# javascript - Htmlunit javascript响应没有被反映

> ID：13373461
> 
> 赞同：1
> 
> 时间：2012-11-14T05:23:29.420
> 
> 标签：javascript, htmlunit

我正在尝试从网页发表评论。评论网页具有文本区域和按钮类型输入

这是textarea的html

```
<textarea class="aui-field-input aui-field-input-text" id="_33_wgdr_postReplyBody0" name="_33_postReplyBody0" wrap="soft" style="height: 100px; width: 500px;"></textarea> 
```

这是我将一些文本写入 textarea 的方式

```
HtmlTextArea hta = (HtmlTextArea) commentPage.getElementsByName("_33_postReplyBody0").get(0);
hta.setAttribute("value", "This Is Generated Text"); 
```

html页面中的按钮输入是

```
 <input class="aui-button-input" onclick="wgdr_postReply(0);" type="button" value="Reply" id="_33_wgdr_postReplyButton0"/> 
```

我试图以这种方式单击按钮

```
 HtmlButtonInput hbi = (HtmlButtonInput) commentPage.getByXPath("//*[@value='Reply' and @type='button']").get(0);
    HtmlPage test = hbi.click(); 
```

或者这样

```
 HtmlButtonInput hbi = (HtmlButtonInput) commentPage.getByXPath("//*[@value='Reply' and @type='button']").get(0);
  String functName = hbi.getAttribute("onclick");
  ScriptResult scriptResult = commentPage.executeJavaScript(functName); 
```

因此，我的网页和数据库应该有一个新的评论“这是生成的文本”，但事实并非如此......我已经通过以下方式初始化了我的网络客户端：

```
WebClient webClient = new WebClient(BrowserVersion.INTERNET_EXPLORER_8);
webClient.setJavaScriptEnabled(true);
    webClient.setThrowExceptionOnScriptError(false);
    webClient.setThrowExceptionOnFailingStatusCode(false);
    webClient.setPrintContentOnFailingStatusCode(false);
    webClient.setTimeout(60000);
    webClient.setJavaScriptTimeout(60000);
    webClient.waitForBackgroundJavaScript(10000); 
```

两天以来我一直在研究这个问题，但没有取得丰硕的成果......请发表你的想法谢谢，-Asrar

# qt - 使用 Qt 的横向屏幕截图

> ID：13373467
> 
> 赞同：1
> 
> 时间：2012-11-14T05:24:06.850
> 
> 标签：qt, nokia

我正在使用以下代码在使用 Qt 的诺基亚设备中截屏

```
QDesktopWidget *w = QApplication::desktop();
if (w)
{
        QRect r = w->screenGeometry();
        originalPixmap = QPixmap::grabWindow(w->winId(),0,0,r.width(), r.height());

}
originalPixmap.save(folder_path, format.toAscii().constData()); 
```

该代码适用于纵向。当我将设备倾斜到横向时，捕获的图像仅包含屏幕宽度的一半。请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T06:59:11.913

如果你想抓住整个窗口，你试过用`originalPixmap = QPixmap::grabWindow(w->winId())`吗？省略大小参数[应该自动使用整个窗口的大小](http://doc.qt.digia.com/qt/qpixmap.html#grabWindow)。

# java - JNDI 文件的位置

> ID：13373468
> 
> 赞同：0
> 
> 时间：2012-11-14T05:24:20.573
> 
> 标签：java, ejb, ejb-3.0

由于我是 EJB 新手，我不知道在哪里可以搜索 EJB 3.0 项目的 JNDI 文件。有人告诉我，为了访问 EJB 类，我们需要使用 JNDI 查找该类。那么谁能建议我通常在哪里找到 EJB 项目的 JNDI 文件？

**注意：**由于使用了 EJB 3.0，所以没有使用 ejb-jar.xml 的概念。所以请建议。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T18:30:02.853

没有 JNDI 文件，它允许通过名称查找对象

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T12:40:55.427

没有 JNDI 文件。但是可以在 EJB 2.0 的 weblogic 服务器中找到 EJB 的 JNDI 名称。另一方面，对于 EJB 3.0，JNDI 可以在 web.xml 文件中找到

# php - 如何在 appFog 上部署 php 应用程序？

> ID：13373470
> 
> 赞同：0
> 
> 时间：2012-11-14T05:25:00.940
> 
> 标签：php, deployment, cloud-hosting, appfog

我已经安装了 Ruby 和 gem **af**，我正在尝试将 php（不需要 mysql 或其他服务）应用程序上传到 AppFog。

我的应用程序的目录结构在下面的屏幕截图中给出。![目录结构](../Images/3c14622078b3501582e8149886414ce9.png) 在我的应用程序文件类型是：

1.  php
2.  css
3.  图片
4.  js
5.  jQuery

我正在从命令行应用命令，我的 PWD 是**/home/mahesh/test_app** 我的应用程序包大小约为 2 MB
我收到此错误 命令线程如下：**`Error (JSON 503): <?xml version="1.0" encoding="u...`**

```
mahesh@ubuntu:~/test_app$ af push
Would you like to deploy from the current directory? [Yn]: y
Application Name: Image_Editor_test_cld
Detected a Standalone Application, is this correct? [Yn]: n
1: Spring
2: Django
3: Erlang/OTP Rebar
4: Play
5: Rails
6: Lift
7: Grails
8: Sinatra
9: WSGI
10: JavaWeb
11: Rack
12: PHP
13: Node
14: Standalone
Select Application Type: 12
Selected PHP Application
1: AWS US East - Virginia
2: AWS EU West - Ireland
3: AWS Asia SE - Singapore
4: Rackspace AZ 1 - Dallas
5: HP AZ 2 - Las Vegas
Select Infrastructure: 3
Application Deployed URL [Image_Editor_test_cld.ap01.aws.af.cm]:    
Memory reservation (128M, 256M, 512M, 1G, 2G) [128M]: 
How many instances? [1]:  
Bind existing services to 'Image_Editor_test_cld'? [yN]: 
Create services to bind to 'Image_Editor_test_cld'? [yN]: 
Would you like to save this configuration? [yN]: N
Creating Application: OK
Uploading Application:
  Checking for available resources: OK
  Processing resources: OK
  Packing application: OK
  Uploading (2M): OK   
Error (JSON 503): <?xml version="1.0" encoding="u... 
```

我犯了任何错误如果不是上传我的申请是否正确，那么我可以通过哪种方式上传我的申请？

我已经在 appFog 上上传了我的简单 php 应用程序，其中包含一个简单的目录和一个 .php 文件。它工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T05:57:22.897

尝试做一个`gem update af`以确保您使用的是最新版本的`af`工具。该`af`工具经常更新可以解决此类问题。然后再试一次。

查看您是否拥有当前版本：

```
af --version 
```

在撰写本文时，0.3.18.11 是当前版本

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T20:47:23.447

我尝试再次登录，它成功了。appfog 里面有什么东西把你踢出去了。

# iphone - 特别提醒视图 iphone 的名称

> ID：13373479
> 
> 赞同：0
> 
> 时间：2012-11-14T05:26:22.390
> 
> 标签：iphone

我一直在寻找这个 UI 元素的名称，但我想不出任何东西。带有“重新加载数据”的圆形矩形的名称是什么？我想我记得不久前使用过这样的视图，并且有一些开源库使它的使用变得更加容易。

cydia 的屏幕截图。

![赛迪亚](../Images/3cecdf37927a2534b29504900467a3d3.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T05:28:31.047

Apple API 是私有的，不能在 AppStore 应用程序中使用。我和许多其他人使用 MBProgressHUD：[http](http://cocoadev.com/wiki/MBProgressHUD) ://cocoadev.com/wiki/MBProgressHUD 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T05:59:46.807

这是[MBProgressHUD](https://github.com/jdg/MBProgressHUD)。

您将在此[链接](http://www.cocoacontrols.com/search?utf8=%E2%9C%93&q=activity)上获得更多开源控件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T07:28:48.733

为什么不直接使用 UIActivityIndi​​cator？它本质上提供了相同的实用程序而无需实现第 3 方代码？您真的需要该类尚未提供的任何自定义行为吗？越简单越好你知道..？;)

# apache-flex - FLEX-禁用busyCursor上的光标单击事件

> ID：13373488
> 
> 赞同：0
> 
> 时间：2012-11-14T05:27:12.873
> 
> 标签：apache-flex, click, cursor, busy-cursor

我在 Web 应用程序中使用 flex2。我在我的应用程序中成功添加了一个繁忙的光标，但是只要光标动画，我就需要禁用光标单击事件。我可以这样做吗？我该怎么做？

我是新来的。请给我一个示例代码。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T18:12:50.140

不是我不知道的。但是您始终可以删除页面上组件的“点击”侦听器。

例如，

```
myComponent.removeEventListener(MouseEvent.CLICK, onMouseClickEventDoThis); 
```

不过这很痛苦，因为您必须对每个视觉组件都这样做。

我过去所做的只是让component.enable = false。这样，它会变灰并且不监听任何事件。

```
myComponent.enable = false; 
```

请记住在完成忙碌光标后重新启用它。

```
myComponent.enable = true; 
```

# android - adb shell 命令：mkdir（用于创建目录）

> ID：13373489
> 
> 赞同：8
> 
> 时间：2012-11-14T05:27:16.393
> 
> 标签：android, adb, mkdir

我正在尝试通过 adb shell 创建一个目录

我必须在 etc 文件夹中创建一个不成功的目录。我设法弄清楚它已链接到`/system/etc`并尝试在其中创建`/system/etc`，但在这两种情况下我都得到“只读文件系统”。

如何让它读写？

我尝试使用“su”切换到超级用户。

我尝试`udev/rules.d`在主机中进行修改：

```
created a file 51-android.rules with " SUBSYSTEM=="usb", ATTR{idVendor}=="04e8", MODE="0666", GROUP="plugdev"  " 
```

我仍然得到相同的“只读文件系统”。

我该如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-04-11T19:34:16.953

[技巧] 使用 adb push 在非 root 手机中创建一个目录（或各种目录）：

如果你使用命令

```
adb push myfolder /storage/sdcard0/Download 
```

而“myfolder”里面还有另外一个文件夹，这些文件夹会在手机的“Download”文件夹里面创建

所以，我用来在我的应用程序中安装资产的黑客：

```
adb push assetfolder /storage/sdcard0/Android/data/com.myapp.name/ 
```

然后“assetfolder”包含

```
assetfolder/
   assetfolder/db/mysqlite.db
   assetfolder/img/myimage.png
   assetfolder/json/initial-data.json 
```

ETC

然后我的应用程序有

```
com.myapp.name/db/mysqlite.db
com.myapp.name/img/myimage.png
com.myapp.name/json/initial-data.json 
```

希望能帮助到你！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T08:18:08.730

[http://android-tricks.blogspot.in/2009/01/mount-filesystem-read-write.html](http://android-tricks.blogspot.in/2009/01/mount-filesystem-read-write.html)

mount -o rw,remount -t yaffs2 /dev/block/mtdblock3 /system

这很有用：现在我可以创建目录:)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-10-10T17:59:25.277

以root身份登录，使用此命令，它有帮助

adb root adb 重新挂载

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2012-11-14T05:32:37.593

以 root 身份登录，只需使用 Linux 命令在命令模式下将以下权限添加到您的文件：

**$ chmod 777 规则.d**

# php - 如何使用 php 安装 mysql

> ID：13373490
> 
> 赞同：-1
> 
> 时间：2012-11-14T05:27:17.893
> 
> 标签：php, mysql, automation, installation

我和我的脑筋急转弯......我正在构建一个邮件服务器安装脚本，并且在我只是为了覆盖我的基础之前，我已经想到了一些我想问的问题。我知道如何将 php 与 shell_exec 命令和 proc_open 命令一起使用来运行 sudo 和 apt-get 等 shell 命令，但我不知道如何进行要求用户输入的安装？我的示例是 mysql 服务器安装调用的一部分，当您通过命令行安装它时，它会要求设置 mysql 管理员用户的密码。我的脚本以表单的形式从用户那里获取该信息，并且可以将数据传递到其他页面，但是我如何将其传递给 shell？

我知道该怎么做：

```
$mySql_password = $_POST['mysql_password'];
$output = shell_exec("apt-get -y install <package-id>"); 
```

甚至：

```
$mySql_password = $_POST['mysql_password'];
$output = shell_exec("apt-get --force-yes install <package-id>"); 
```

将密码设置为变量后，我将如何将密码传递给它？请记住，此脚本将从服务器的桌面（如果他们有桌面）或通过 Web 浏览器运行，并且该脚本最后将具有自毁模式以擦除安装脚本以防止有人忘记它。ssl 也将被推荐为预安装清单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T06:37:31.297

环顾四周（谷歌“无人值守 MySQL 安装”或这些行中的其他内容）后，应该对您有所帮助的是`DEBIAN_FRONTEND=noninteractive`.

试试这个在没有密码的情况下安装，然后设置它：

```
<?php

shell_exec('echo '.$rootPassword.' | DEBIAN_FRONTEND=noninteractive sudo -S aptitude install -q -y mysql;
mysql -uroot -e "UPDATE mysql.user SET password=PASSWORD("'.$mysqlPassword.'") WHERE user='root'; FLUSH PRIVILEGES;');

?> 
```

或者，`debconf-set-selections`应该允许您设置默认密码，以便直接安装 mysql。

# youtube-api - YouTube API 在尝试编译时出错

> ID：13373496
> 
> 赞同：1
> 
> 时间：2012-11-14T05:28:19.860
> 
> 标签：youtube-api

我正在使用以下代码尝试从我使用 maven 构建的项目中的 YouTube API 检索提要列表。

```
YouTubeService service = new YouTubeService("dev","123456");
String feedUrl = "http://gdata.youtube.com/feeds/api/standardfeeds/most_viewed";
VideoFeed videofeed = service.getFeed(new URL(feedUrl), VideoFeed.class);
List<VideoEntry> videos = videofeed.getEntries(); 
```

当我执行“mvn package”时，出现以下错误：

```
found   : com.google.gdata.data.IFeed
required: com.google.gdata.data.youtube.VideoFeed 
```

有什么我做错了吗？我的导入如下所示：

```
import com.google.gdata.client.youtube.*;
import com.google.gdata.client.*;
import com.google.gdata.data.*;
import com.google.gdata.data.youtube.*;
import com.google.gdata.data.extensions.*;
import com.google.gdata.util.*;
import com.google.gdata.data.media.*;
import com.google.gdata.data.media.mediarss.*; 
```

POM 文件。我使用以下方法添加了 artifactId：

```
mvn install:install-file -DgroupId=youtube-12 -DartifactId=youtube-12 -Dversion=1.47.1 -Dpackaging=jar -Dfile=/usr/share/gdata/java/lib/gdata-calendar-2.0.jar 

<dependencies>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-webmvc</artifactId>
        <version>3.0.5.RELEASE</version>
        <optional>false</optional>
    </dependency>
    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>servlet-api</artifactId>
        <version>2.5</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>jstl</artifactId>
        <version>1.2</version>
    </dependency>

    <dependency>
      <groupId>junit</groupId>
      <artifactId>junit</artifactId>
      <version>3.8.1</version>
      <scope>test</scope>
    </dependency>

    <dependency>
      <groupId>youtube-1</groupId>
      <artifactId>youtube-1</artifactId>
      <version>1.47.1</version>
    </dependency>

    <dependency>
      <groupId>youtube-2</groupId>
      <artifactId>youtube-2</artifactId>
      <version>1.47.1</version>
    </dependency>

    <dependency>
      <groupId>youtube-3</groupId>
      <artifactId>youtube-3</artifactId>
      <version>1.47.1</version>
    </dependency>
    <dependency>
     <groupId>javax.mail</groupId>
     <artifactId>mail</artifactId>
     <version>1.4.5</version>
    </dependency>

    <dependency>
     <groupId>com.google.guava</groupId>
     <artifactId>guava</artifactId>
     <version>12.0</version>
    </dependency>
</dependencies> 
```

知道我可能做错了什么吗？谢谢你。

# php - 如何在 PHP 中动态转义 '<' 和 '>'？

> ID：13373498
> 
> 赞同：0
> 
> 时间：2012-11-14T05:28:25.073
> 
> 标签：php, html

例如，我有一个值为“CT.< S >”的字符串，但在我的 HTML 中，回显时它被视为标记。是否有一个函数可以用来回显“CT. \< S\>”（例如），以便不将 HTML 视为标签？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T05:29:36.410

[`htmlspecialchars`](http://php.net/htmlspecialchars)两者[`htmlentities`](http://php.net/htmlentities)都这样做。

# ruby-on-rails - Rails 教程（Michael Hartl 编写），第 9 课，无法登录

> ID：13373499
> 
> 赞同：1
> 
> 时间：2012-11-14T05:28:27.167
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, railstutorial.org

我看过类似的错误，但我的测试不仅不会通过，脚本也不会登录用户。

> 失败：
> 
> 在 0.41649 秒内完成 31 个示例，2 个失败
> 
> 失败的例子：
> 
> rspec ./spec/controllers/sessions_controller_spec.rb:48 # SessionsController GET 'new' POST 'create' 成功应该在 rspec 中签署用户 ./spec/controllers/sessions_controller_spec.rb:54 # SessionsController GET 'new' POST 'create'成功应该重定向到用户显示页面
> 
> 完毕。
> 
> 登录时出错：SessionsController#create 中的 NoMethodError
> 
> #Rails.root 的未定义方法“authenticate”：/Users/lancevelasco/Development/appsample
> 
> 应用程序跟踪 | 框架跟踪 | 完整跟踪 app/controllers/sessions_controller.rb:10:in `create'

代码

用户.rb

```
# == Schema Information
#
# Table name: users
#
#  id                 :integer          not null, primary key
#  name               :string(255)
#  email              :string(255)
#  created_at         :datetime         not null
#  updated_at         :datetime         not null
#  encrypted_password :string(255)
#  salt               :string(255)
#

class User < ActiveRecord::Base
  attr_accessor   :password
  attr_accessible :email, :name, :password, :password_confirmation

  email_regex = /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i

  validates :name,  :presence => true,
                    :length   => { :maximum => 50 }
  validates :email, :presence   => true,
                    :format     => { :with => email_regex },
                    :uniqueness => { :case_sensitive => false }    
  validates :password, :presence => true,
                        :confirmation => true,
                        :length => { :within => 6..40 }

  before_save :encrypt_password

  def has_password?(submitted_password)
    encrypted_password == encrypt(submitted_password)
  end

  def User.authenticate(email, submitted_password)
    user = find_by_email(email)
    return nil  if user.nil?
    return user if user.has_password?(submitted_password) 
  end

  def authenticate_with_salt(id, cookie_salt)
    user = find_by_id(id)
    (user && user.salt == cookie_salt ) ? user : nil
  end

  private
  def encrypt_password
    self.salt = make_salt if new_record?
    self.encrypted_password = encrypt(password)
  end

  def encrypt(string)
      secure_hash("#{salt}--#{string}")
      end   

  def make_salt
    secure_hash("#{Time.now.utc}--#{password}")
  end

  def secure_hash(string)
    Digest::SHA2.hexdigest(string)
  end     
end 
```

session_controller.rb

```
 class SessionsController < ApplicationController

  def new
    @title = "Sign in"
  end

  def create
    user = User.authenticate(params[:session][:email],
                             params[:session][:password])
    if user.nil?
      flash.now[:error] = "Invalid email/password combination."
      render 'new'
    else
      sign_in user
      redirect_back_or user
    end
  end

  def destroy
    sign_out
    redirect_to root_path
  end
end 
```

session_helper.rb

```
module SessionsHelper

  def sign_in_(user)
    cookies.permanent.signed[:remember_token] = [user.id, user.salt]
    current_user = user
  end

  def current_user=(user)
    @current_user = user
  end

  def current_user
    @current_user || user_from_remember_token    
  end

  private

    def user_from_remember_token
      User.authenticate_with_salt()
    end

    def remember_token
      cookies.signed[:remember_token] || [nil,nil]
    end
end 
```

user_controller_spec.rb

```
require 'spec_helper'

describe SessionsController do

  render_views

    describe "GET 'new'" do
    it "returns http success" do
      get 'new'
      response.should be_success
    end

    it "should have the right title" do
       get :new
       response.should have_selector('title', :content => "Sign in")
     end

     describe "POST 'create'" do

       describe "failure" do

          before(:each) do
            @attr = { :email => "", :password => ""}
          end 

          it "should re-render the new page" do
            post :create,  :session => @attr 
            response.should render_template('new')
          end

          it "should have the right title" do
            post :create, :session => @attr
          end

          it "should have an error message" do
            post :create, :session => @attr
            flash.now[:error].should =~ /invalid/i
          end
       end

       describe "success" do

         before(:each) do
           @user= Factory(:user)
           @attr = { :email => @user.email, :password => @user.password }
         end

         it "should sign the user in" do
           post :create, :session => @attr
           controller.current_user.should == @user
           controller.should  be_signed_in
         end

         it "should redirect to the user show page" do
           post :create, :session => @attr
           response.should redirect_to(user_path(@user))
         end

       end

     end
  end

end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T09:17:10.900

现在你在用户对象上调用身份验证，但如果我没记错的话，你将身份验证声明为用户类的方法（例如 java 中的静态方法），而不是用户对象。这就是你得到 NoMethodError 的原因，所以你应该使用 Kubee 方法调用之类的东西：

```
user = User.authenticate(params[:session][:email], params[:session][:password]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T06:07:01.780

据我了解，Michael Hartl 曾经使用 bcrypt 来处理他的身份验证（[has_secure_password](http://api.rubyonrails.org/classes/ActiveModel/SecurePassword/ClassMethods.html#method-i-has_secure_password) ”）。看起来他选择放弃这个并编写自己的身份验证（看起来是为了添加盐......确实非常好）。

您在 user.rb 中有：

```
def User.authenticate(email, submitted_password)
  user = find_by_email(email)
  return nil  if user.nil?
  return user if user.has_password?(submitted_password) 
end 
```

如您所见，您还需要将电子邮件传递给 authenticate 方法，并且由于它还获取用户，您可以简化 session#create 方法。试试这个：

```
def create
  user = User.authenticate(params[:session][:email], params[:session][:password])
  if user.nil?
    flash.now[:error] = 'Invalid email/password combination'
    render 'new'
  else
    sign_in user
    redirect_back_or user
  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T03:08:03.763

这是一个相当简单的修复。

在 session_helper

定义登录_（用户）

应该读

def 登录（用户）

并在 application_controller

添加包括 SessionsHelper

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T02:59:36.660

是的，我成功了，谢谢。我用过这个

```
def User.authenticate(email, submitted_password)
user = find_by_email(email)
return nil if user.nil?
return user if user.has_password?(submitted_password)
end 
```

进而

```
def create
user= User.authenticate(params[:session][:email]
params[:session][:password])
if user.nil?
flash.now[:error] ="Invalid email/password combination."
@title = "sign in"
render 'new'
else
sign_in user
redirect_to user
end
end 
```

# iphone - 不会致电 Game Center 取消比赛

> ID：13373501
> 
> 赞同：0
> 
> 时间：2012-11-14T05:28:39.993
> 
> 标签：iphone, ios, xcode, game-center

如果用户在游戏中心视图出现时按下取消按钮，我有此代码可以转到我的 ViewController。

```
- (void)matchmakerViewControllerWasCancelled:
(GKMatchmakerViewController *)viewController{

    [self dismissModalViewControllerAnimated:YES];

    [Mytimer invalidate];

    ViewController *Vc = [[ViewController alloc]init];
    [self presentModalViewController:Vc animated:YES];

} 
```

我的错在哪里？如果我按下取消，matchmakerViewController 会消失，但不会转到“Vc”。请帮忙。我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T17:44:43.563

为什么要实例化一个新的 VC？实践是在现有的 VC 上展示 GC VC。然后 GC VC 消失了，您只需返回您的 VC。无需实例化它。就像：假设您的主要和第一个显示的 VC 称为 MainMenuVC。因此，您在 MainMenuVC 上呈现 GCVC，而 MainMenuVC 在后台静止不动，同时 GCVC tkes 控制。如果用户在 GCVC 中按下取消，您的代码将触发：

```
- (void)matchmakerViewControllerWasCancelled:
(GKMatchmakerViewController *)viewController{

    [self dismissModalViewControllerAnimated:YES];

    [Mytimer invalidate];
} 
```

现在您返回到 MainMenuVC。如果你需要在这里做一些事情，比如展示另一个 VC - 你可以在 MainMenuVC 中免费 2 做。

# http - 什么是有效的 URL 查询字符串？

> ID：13373504
> 
> 赞同：11
> 
> 时间：2012-11-14T05:29:13.680
> 
> 标签：http, url, query-string, querystringparameter

URL 查询字符串中允许使用哪些字符？

查询字符串是否必须遵循特定格式？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-14T05:36:30.190

根据[https://www.rfc-editor.org/rfc/rfc3986](https://www.rfc-editor.org/rfc/rfc3986)

在第 2.2 节保留字符中，列出了以下字符：

> 保留= gen-delims / sub-delims
> 
> gen-delims = “:” / “/” / “?” /“#”/“[”/“]”/“@”</p>
> 
> 子分隔符=“！” /“$”/“&” /“'”/“(”/“)”/“*”/“+”/“,”/“;” /“=”</p>

然后规范说：

> 如果 URI 组件的数据与保留字符作为分隔符的用途发生冲突，则必须在形成 URI 之前对冲突数据进行百分比编码。

接下来，在第 2.3 节未保留字符中，列出了以下内容：

> 未保留 = ALPHA / DIGIT / “-” / “.” /“_”/“~”</p>

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-14T05:37:38.683

维基百科有你的答案：[http ://en.wikipedia.org/wiki/Query_string](http://en.wikipedia.org/wiki/Query_string)

" **URL 编码：**有些字符不能成为 URL 的一部分（例如空格），而另一些字符在 URL 中具有特殊含义：例如，字符 # 可用于进一步指定一个小节（或片段）文档；字符 = 用于将名称与值分开。可能需要转换查询字符串以满足这些约束。这可以使用称为 URL 编码的模式来完成。

特别是，对查询字符串进行编码使用以下规则：

*   字母（AZ 和 az）、数字 (0-9) 和字符 '.'、'-'、'~' 和 '_' 保持原样
*   SPACE 编码为 '+' 或 %20[需要引用]
*   所有其他字符都编码为 %FF 十六进制表示，任何非 ASCII 字符首先编码为 UTF-8（或其他指定的编码）

与波浪号（“~”）字符对应的八位字节通常被旧的 URI 处理实现编码为“%7E”；"%7E" 可以替换为 "~" 而不会改变其解释。将 SPACE 编码为 '+' 和选择“原样”字符将这种编码与 RFC 1738 区分开来。”

关于格式，查询字符串是名称值对。这 ？将查询字符串与 URL 分开。每个名称值对由与号 (&) 分隔，而名称（键）和值由等号 (=) 分隔。例如。[http://domain.com?key=value&secondkey=secondvalue](http://domain.com?key=value&secondkey=secondvalue)

在我提供的维基百科参考中的**结构下：**

*   问号用作分隔符，不是查询字符串的一部分。
*   查询字符串由一系列字段值对组成
*   在每一对中，字段名称和值由等号“=”分隔。
*   这一系列对由 & 号分隔，'&'（或分号，';' 用于嵌入在 HTML 中且不是由 ... 生成的 URL；见下文）。
*   W3C 建议所有 Web 服务器都支持分号分隔符以及与符号分隔符[6]，以允许 HTML 文档中的 URL 中的 application/x-www-form-urlencoded 查询字符串，而不必对与符号进行实体转义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-21T10:03:53.087

此链接包含您都需要的答案和格式化值。

[https://perishablepress.com/url-character-codes/](https://perishablepress.com/url-character-codes/)

为方便起见，这是列表：

```
<     %3C
>     %3E
#     %23
%     %25
{     %7B
}     %7D
|     %7C
\     %5C
^     %5E
~     %7E
[     %5B
]     %5D
`     %60
;     %3B
/     %2F
?     %3F
:     %3A
@     %40
=     %3D
&     %26
$     %24
+     %2B
"     %22
space     %20 
```

# wordpress - How to invoke the post title in magento?

> ID：13373506
> 
> 赞同：0
> 
> 时间：2012-11-14T05:29:25.850
> 
> 标签：wordpress, magento

i have installed magento and wordpress. they are on the same host.now, i want to get 5 of the latest post title in magento product page. how do i do?

# javascript - 在javascript中返回字符串的函数

> ID：13373513
> 
> 赞同：0
> 
> 时间：2012-11-14T05:30:14.810
> 
> 标签：javascript

我正在尝试使用函数向我的服务器调用 ajax 请求以获取 json 数据。如果我`resp`在 ajax 函数中控制变量，它将成功显示数据。如果我尝试将 ajax 函数设置为一个变量，然后控制台该变量返回未定义。任何想法让函数请求数据然后将 ti 设置为要控制的变量？

```
function jsonData(URL) {
var xhr = new XMLHttpRequest();
xhr.open("GET", URL, true);
xhr.onreadystatechange = function() {
  if (xhr.readyState == 4) {
    var resp = JSON.parse(xhr.responseText);
    return resp;
  }
}
xhr.send();
}

jsonString = jsonData(http://mywebsite.com/test.php?data=test);

console.log(jsonString); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T05:35:13.280

这实际上很简单..将您的调用更改为同步..

```
xhr.open("GET", URL, false); 
```

话虽如此，这将阻止浏览器，直到操作完成，如果您可以使用回调代替它可能是首选。

```
function jsonData(URL, cb) {
  var xhr = new XMLHttpRequest();
  xhr.open("GET", URL, true);
  xhr.onreadystatechange = function() {
    if (xhr.readyState == 4) {
      var resp = JSON.parse(xhr.responseText);
      cb(resp);
    }
  }
  xhr.send();
}

jsonData("http://mywebsite.com/test.php?data=test"
        , function(data) { console.log(data); }); 
```

# c#-4.0 - TargetInvocationException

> ID：13373514
> 
> 赞同：1
> 
> 时间：2012-11-14T05:30:18.070
> 
> 标签：c#-4.0

I wrote the code below:

```
private void DisplayStartUps()
{
    Form2 dialog = new Form2();

    if (dialog.ShowDialog(this) == DialogResult.OK)
    {
        // Read the contents of testDialog's TextBox.
        totalTeams = dialog.NumOfTeams;
    }
    dialog.Dispose();
} 
```

When the form 2 opens, then I click on the "red x" pn the top to close the form. I got the message:

> TargetInvocationException was unhandled

What does that mean and how to fix it?

# javascript - How can I call a function that's created inside a chain of other functions?

> ID：13373515
> 
> 赞同：1
> 
> 时间：2012-11-14T05:30:27.277
> 
> 标签：javascript, typescript

I have created the following:

```
module Admin.Grid {
    export function addGridControls() {

        $('#createLink')
            .click(function () {
                var $link = $(this);
                $link.prop('disabled', true);
                adminDialog($link);
                return false;
            });
    }
} 
```

This is converted to:

```
var Admin;
(function (Admin) {
    (function (Grid) {
        function addGridControls() {
            $('#createLink').click(function () {
                var $link = $(this);
                $link.prop('disabled', true);
                adminDialog($link);
                return false;
            }); 
```

Previously when it was not inside a module I called the function like this:

```
$(document).ready(function () {
    "use strict";
    addGridControls()
}); 
```

Now it's inside of a module what's the best way for me to call this function so it gets executed every time the document is ready?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T06:09:41.330

这样做的一种方法是将函数添加到某个对象。

```
var Admin = {};
(function (Admin) {
    (function (Grid) {
        Admin.addGridControls = function () {
.... 
```

并称它为

```
$(document).ready(function () {
    "use strict";
    Admin.addGridControls()
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T11:53:58.887

正如@Mike Lin 评论的那样，您需要导入模块。

在 TypeScript 中工作（并假设 AMD 模块格式，您的模块在另一个文件中），您可以这样做：

```
import g = module('path-to-admin-grid-module');

$(document).ready(() => {
    "use strict";
    g.Admin.Grid.addGridControls();
}); 
```

否则，如果您只是在同一个文件中使用内部模块，则很简单：

```
$(document).ready(() => {
        "use strict";
        Admin.Grid.addGridControls();
}); 
```

后一种情况在演练：模块示例中很好地预览：[http ://www.typescriptlang.org/Playground/](http://www.typescriptlang.org/Playground/)

这里有一个很好的前者示例：[TypeScript compile AMD modules with required definitions](https://stackoverflow.com/questions/12706167/typescript-compile-amd-modules-with-required-defines)和 AMD 在这里更详细地介绍：[http ://requirejs.org/docs/whyamd.html](http://requirejs.org/docs/whyamd.html)

# javascript - Fancybox 2.0 不工作，非常简单的第一次测试

> ID：13373517
> 
> 赞同：0
> 
> 时间：2012-11-14T05:30:33.017
> 
> 标签：javascript, jquery, fancybox

我的页面位于 www.danielcw.info。

在底部我打电话：

```
$(document).ready(function() {
   $("#single_1").fancybox({});
}); 
```

在：

```
<div id="single_1">
TESTTESTEST
</div> 
```

没发生什么事。谁能解释我哪里出错了，我看到页面上所有的 JS 和 CSS 都加载了。

谢谢你，丹尼尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T05:37:11.947

通常，Fancybox 在指向 div 元素或包含要在 Fancybox 上显示的内容的链接的锚标记上初始化：

**HTML：**

```
<a href="#single_1" id="fancybox">Click here to launch Fancybox</a>

<div style="display:none">
    <div id="single_1">
        Content goes here
    </div>
</div> 
```

**Javascript：**

```
$(function(){
    $('a#fancybox').fancybox({
        // Fancybox options here   
    })
    .trigger('click'); //Optional - if you wish to trigger the Fancybox after initialization
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T05:38:24.457

尝试使用，

```
$(document).ready(function() {
   $("a #single_1").fancybox();
});

<a id="single_1" href="#">
TESTTESTEST
</a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T05:40:33.000

您只是实例化了插件。你现在必须触发它。

因此，您可以添加任何 DOM 元素并观察事件然后触发插件。

```
<a href="#" class="fancyme">Click me</a> 
```

JS

```
$('fancyme').on("click", function() {
  $.fancybox('#single_1');
}); 
```

或者

您可以在页面加载时触发

```
$(function(){
  $.fancybox('#single_1');
}); 
```

# javascript - WebSocket TCP数据包聚集在一起？

> ID：13373519
> 
> 赞同：11
> 
> 时间：2012-11-14T05:30:49.833
> 
> 标签：javascript, html, networking, tcp, websocket

关于 JavaScript 和 PHP WebSocket TCP 数据包聚集，示例如下。

出于某种原因，当在我的 VPS 上快速发送数据包，或者通过指向我的 IP 地址的域访问我的本地主机时，多个数据包会聚集在一起。在本例中，我尝试每秒传输 20 个（@100byte）数据包。在服务器端，它们确实以稳定的速率发送出去，每 50 毫秒，每秒发送 20 个。但是，当它们到达客户端时，客户端仅大约每 1/4 秒处理一次新消息。导致新数据包仅以每秒 4 个左右的速率接收......

是什么导致数据包聚集在一起？当一切都通过 localhost 时不会发生此问题。更奇怪的是，它在 iPhone 的 iOS Mobile Safari 上流畅播放，完全没有问题。但是，它在 PC Safari 上根本不起作用，（因为我没有将它设置为与旧的 Hixie-76 WebSocket 格式一起正常工作，我假设 Mobile Safari 已经在使用更新的 RFC 6455 或更新的 JavaScript编译器）我尝试了多家托管公司，每次都得到完全相同的结果。

*请参阅下面的示例，托管在 InMotion 的 VPS 上：http:* [//www.hovel.me/script/serverControl.php](http://www.hovel.me/script/serverControl.php)

**（点击左侧的【连接】，然后点击右侧的【查看游戏】）。**

当前接收到的数据包每次会跳跃大约 5 个，因为每 5 个数据包一次接收一次，每 1/4 秒一次。但是，我已经看到了可以发送恒定、快速的数据包流的示例。是什么导致这种聚集在一起/数据包相互等待？

**编辑**：这与[Nagle 的算法](http://en.wikipedia.org/wiki/Nagle%27s_algorithm)有关，它将小数据包一起收集和发送？我将努力尝试在 PHP 中绕过它。即使在 PHP 中设置了这个 TCP_NODELAY，问题仍然存在。为什么它适用于 iPhone 而不是 PC 仍然让我失望......
**编辑**：在注册表中将 TCPNoDelay 和 TcpAckFrequency 设置为 1 可以解决此问题，但我不能指望每个用户都这样做。必须有一种客户端的、面包和黄油的 JavaScript 方式。

如何在不使用 node.js 的情况下复制 node.js 的“ [socket.setNoDelay(true)](http://nodejs.org/api/net.html#net_socket_setnodelay_nodelay) ”功能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T06:06:31.563

那是TCP。它通过节省 IP 数据包来帮助您。一部分是因为Nagle算法，一部分也可能是中间网络造成的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-15T21:21:55.137

最后，客户端无法识别 Nagle 的算法被禁用，以及它的确认频率仍设置在 200 毫秒左右，导致中间网络将以下数据包保存在缓冲区中。每次客户端收到消息时，手动向服务器发送确认消息，将导致网络立即“唤醒”并继续处理下一个数据包，而不是将它们保存在缓冲区中。

例如：

```
conn = new WebSocket(url);
conn.onmessage = function(evt){
    Server.send('ACKNOWLEDGE BYTES'); // Send ACK to server immediately
    dispatch('message', evt.data); //Do regular event procedures
}; 
```

这个临时解决方案有效，但是**这将使带宽使用量几乎翻倍**，以及其他网络问题。直到我可以让客户端上的 WebSocket 正确地不为服务器确认“待机”，并且网络立即推送消息，这样才能更快地通过数据包而不会出现缓冲区阻塞问题。

# wso2 - ERROR in ESB 4.5.0: User name not provided for the Entitlement mediator

> ID：13373521
> 
> 赞同：3
> 
> 时间：2012-11-14T05:31:21.227
> 
> 标签：wso2, wso2esb, esb

I´m working with a backend service in AS 5.0.1, that it´s exposed to the outside using ESB 4.5.0 with a UT security policy. this proxy service use an entitlement mediator to validated the user authorization to access to this service, so I use the IS 4.0.0. This scenario work fine with previous wso2 product versions.

I implemented this scenario in my laptop with IS 3.2.3 and it work fine. now when I uploaded the configuration to the production servers I saw this error: NOTE: in the production servers I used two tenant for AS and ESB.

The error:

```
TID: [] [WSO2 Enterprise Service Bus] [2012-11-14 00:14:43,787] ERROR {org.wso2.carbon.identity.entitlement.mediator.EntitlementMediator} -  org.apache.synapse.SynapseException: User name not provided for the Entitlement mediator - can't proceed {org.wso2.carbon.identity.entitlement.mediator.EntitlementMediator}
TID: [] [WSO2 Enterprise Service Bus] [2012-11-14 00:14:43,791]  WARN {org.apache.synapse.FaultHandler} -  ERROR_CODE : 0 {org.apache.synapse.FaultHandler}
TID: [] [WSO2 Enterprise Service Bus] [2012-11-14 00:14:43,791]  WARN {org.apache.synapse.FaultHandler} -  ERROR_MESSAGE : User name not provided for the Entitlement mediator - can't proceed {org.apache.synapse.FaultHandler}
TID: [] [WSO2 Enterprise Service Bus] [2012-11-14 00:14:43,791]  WARN {org.apache.synapse.FaultHandler} -  ERROR_DETAIL : org.apache.synapse.SynapseException: User name not provided for the Entitlement mediator - can't proceed
        at org.wso2.carbon.identity.entitlement.mediator.EntitlementMediator.mediate(EntitlementMediator.java:135)
        at org.apache.synapse.mediators.AbstractListMediator.mediate(AbstractListMediator.java:60)
        at org.apache.synapse.mediators.base.SequenceMediator.mediate(SequenceMediator.java:114)
        at org.apache.synapse.core.axis2.ProxyServiceMessageReceiver.receive(ProxyServiceMessageReceiver.java:144)
        at org.apache.axis2.engine.AxisEngine.receive(AxisEngine.java:181)
        at org.wso2.carbon.core.multitenancy.MultitenantMessageReceiver.doSOAP(MultitenantMessageReceiver.java:233)
        at org.wso2.carbon.core.multitenancy.MultitenantMessageReceiver.processRequest(MultitenantMessageReceiver.java:181)
        at org.wso2.carbon.core.multitenancy.MultitenantMessageReceiver.receive(MultitenantMessageReceiver.java:77)
        at org.apache.axis2.engine.AxisEngine.receive(AxisEngine.java:181)
        at org.apache.axis2.transport.http.HTTPTransportUtils.processHTTPPostRequest(HTTPTransportUtils.java:172)
        at org.apache.synapse.transport.nhttp.ServerWorker.processEntityEnclosingMethod(ServerWorker.java:409)
        at org.apache.synapse.transport.nhttp.ServerWorker.run(ServerWorker.java:261)
        at org.apache.axis2.transport.base.threads.NativeWorkerPool$1.run(NativeWorkerPool.java:172)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
        at java.lang.Thread.run(Unknown Source)
 {org.apache.synapse.FaultHandler}
TID: [] [WSO2 Enterprise Service Bus] [2012-11-14 00:14:43,792]  WARN {org.apache.synapse.FaultHandler} -  ERROR_EXCEPTION : org.apache.synapse.SynapseException: User name not provided for the Entitlement mediator - can't proceed {org.apache.synapse.FaultHandler}
TID: [] [WSO2 Enterprise Service Bus] [2012-11-14 00:14:43,793]  WARN {org.apache.synapse.FaultHandler} -  FaultHandler : org.apache.synapse.mediators.MediatorFaultHandler@563ac83c {org.apache.synapse.FaultHandler}
TID: [] [WSO2 Enterprise Service Bus] [2012-11-14 00:14:43,793]  WARN {org.apache.synapse.mediators.MediatorFaultHandler} -  Executing fault handler mediator : fault {org.apache.synapse.mediators.MediatorFaultHandler}
TID: [] [WSO2 Enterprise Service Bus] [2012-11-14 00:14:43,794]  INFO {org.apache.synapse.mediators.builtin.LogMediator} -  To: local://axis2services/Profesor_Proxy.Profesor_ProxyHttpsSoap11Endpoint, WSAction: http://cdae.uci.cu/servicios/Servicio_Profesor/obtenerDatosProfesor, SOAPAction: http://cdae.uci.cu/servicios/Servicio_Profesor/obtenerDatosProfesor, MessageID: urn:uuid:D4E74AEA911A3C697B1352870083848, Direction: request, Envelope: <?xml version='1.0' encoding='utf-8'?><soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:prof="http://cdae.uci.cu/schemas/Profesor"><soapenv:Header xmlns:wsa="http://www.w3.org/2005/08/addressing"><wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd"><wsse:UsernameToken xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" wsu:Id="UsernameToken-20"><wsse:Username>admin</wsse:Username><wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">*****</wsse:Password><wsse:Nonce EncodingType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-soap-message-security-1.0#Base64Binary">Rs/AfaxxkrPr6FbTKaKUUg==</wsse:Nonce><wsu:Created>2012-11-14T05:14:46.624Z</wsu:Created></wsse:UsernameToken><wsu:Timestamp xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" wsu:Id="Timestamp-19"><wsu:Created>2012-11-14T05:14:46.623Z</wsu:Created><wsu:Expires>2012-11-14T05:48:06.623Z</wsu:Expires></wsu:Timestamp></wsse:Security><wsa:Action>http://cdae.uci.cu/servicios/Servicio_Profesor/obtenerDatosProfesor</wsa:Action><wsa:MessageID>uuid:20a1b0e1-43f6-49ab-b523-8da4b36043ad</wsa:MessageID><wsa:To>https://server:8243/services/t/ptesisesb.cdae.uci.cu/Profesor_Proxy.Profesor_ProxyHttpsSoap11Endpoint</wsa:To></soapenv:Header><soapenv:Body>
      <prof:obtenerDatosProfesor>
         <prof:solapin>****</prof:solapin>
      </prof:obtenerDatosProfesor>
   </soapenv:Body></soapenv:Envelope> {org.apache.synapse.mediators.builtin.LogMediator} 
```

my soap message:

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:prof="http://cdae.uci.cu/schemas/Profesor">   
   <soapenv:Header xmlns:wsa="http://www.w3.org/2005/08/addressing">
      <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
         <wsse:UsernameToken xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" wsu:Id="UsernameToken-20">
            <wsse:Username>admin</wsse:Username>
            <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">****</wsse:Password>
            <wsse:Nonce EncodingType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-soap-message-security-1.0#Base64Binary">Rs/AfaxxkrPr6FbTKaKUUg==</wsse:Nonce>
            <wsu:Created>2012-11-14T05:14:46.624Z</wsu:Created>
         </wsse:UsernameToken>
         <wsu:Timestamp xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" wsu:Id="Timestamp-19">
            <wsu:Created>2012-11-14T05:14:46.623Z</wsu:Created>
            <wsu:Expires>2012-11-14T05:48:06.623Z</wsu:Expires>
         </wsu:Timestamp>
      </wsse:Security>
      <wsa:Action>http://cdae.uci.cu/servicios/Servicio_Profesor/obtenerDatosProfesor</wsa:Action>
      <wsa:MessageID>uuid:20a1b0e1-43f6-49ab-b523-8da4b36043ad</wsa:MessageID>
      <wsa:To>https://server:8243/services/t/ptesisesb.cdae.uci.cu/Profesor_Proxy.Profesor_ProxyHttpsSoap11Endpoint</wsa:To>
   </soapenv:Header>   
   <soapenv:Body>      
      <prof:obtenerDatosProfesor>         
         <prof:solapin>*****</prof:solapin>      
      </prof:obtenerDatosProfesor>   
   </soapenv:Body>
</soapenv:Envelope> 
```

my proxy service:

```
<proxy xmlns="http://ws.apache.org/ns/synapse" name="Profesor_Proxy" transports="https" statistics="enable" trace="enable" startOnLoad="true">
   <target inSequence="conf:/secuenciasutiles/log_seguridad_mejorado" outSequence="conf:/gestion_tesis/servicioProfesor/secuencias/centralAssetsOUT" faultSequence="fault"/>
   <publishWSDL key="conf:/gestion_tesis/servicioProfesor/wsdl/Servicio_Profesor1.wsdl"/>
   <parameter name="addressingRequirementParameter">required</parameter>
   <description></description>
</proxy> 
```

and the sequence with the entitlement mediator inside:

```
<sequence xmlns="http://ws.apache.org/ns/synapse" onError="conf:/secuenciasutiles/falla_de_conexion">
   <entitlementService remoteServiceUrl="https://server:9448/services/" remoteServiceUserName="admin" remoteServicePassword="*****" onReject="conf:/secuenciasutiles/log_cuando_no_pasa" onAccept="conf:/secuenciasutiles/log_cuando_pasa" advice=""/>
</sequence> 
```

In this sequence I also see that the onAccept sequence disappear time to time.

What could be the problem? I use the UT policy and I see the username in the incoming message to the ESB.

I can fix this error but now I´m facing another one. I have the same configuration in different servers in one it work, in the another one not. in this particular case i see the request/response in the IS 4.0.0 with the Permit value so the entitlement work.

the error:

```
TID: [] [WSO2 Enterprise Service Bus] [2012-11-15 20:10:49,359] ERROR {org.apache.synapse.core.axis2.Axis2Sender} -  Unexpected error during sending message out {org.apache.synapse.core.axis2.Axis2Sender}
org.apache.axis2.AxisFault: No user value in the rampart configuration policy
        at org.apache.rampart.handler.RampartSender.invoke(RampartSender.java:117)
        at org.apache.axis2.engine.Phase.invokeHandler(Phase.java:340)
        at org.apache.axis2.engine.Phase.invoke(Phase.java:313)
        at org.apache.axis2.engine.AxisEngine.invoke(AxisEngine.java:262)
        at org.apache.axis2.engine.AxisEngine.send(AxisEngine.java:427)
        at org.apache.synapse.core.axis2.DynamicAxisOperation$DynamicOperationClient.send(DynamicAxisOperation.java:193)
        at org.apache.synapse.core.axis2.DynamicAxisOperation$DynamicOperationClient.executeImpl(DynamicAxisOperation.java:175)
        at org.apache.axis2.client.OperationClient.execute(OperationClient.java:165)
        at org.apache.synapse.core.axis2.Axis2FlexibleMEPClient.send(Axis2FlexibleMEPClient.java:445)
        at org.apache.synapse.core.axis2.Axis2Sender.sendOn(Axis2Sender.java:57)
        at org.apache.synapse.core.axis2.Axis2SynapseEnvironment.send(Axis2SynapseEnvironment.java:281)
        at org.apache.synapse.endpoints.AbstractEndpoint.send(AbstractEndpoint.java:297)
        at org.apache.synapse.endpoints.AddressEndpoint.send(AddressEndpoint.java:59)
        at org.apache.synapse.core.axis2.ProxyServiceMessageReceiver.receive(ProxyServiceMessageReceiver.java:165)
        at org.apache.axis2.engine.AxisEngine.receive(AxisEngine.java:181)
        at org.apache.axis2.transport.http.HTTPTransportUtils.processHTTPPostRequest(HTTPTransportUtils.java:172)
        at org.apache.synapse.transport.nhttp.ServerWorker.processEntityEnclosingMethod(ServerWorker.java:409)
        at org.apache.synapse.transport.nhttp.ServerWorker.run(ServerWorker.java:261)
        at org.apache.axis2.transport.base.threads.NativeWorkerPool$1.run(NativeWorkerPool.java:172)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
        at java.lang.Thread.run(Unknown Source)
Caused by: org.apache.rampart.RampartException: No user value in the rampart configuration policy
        at org.apache.rampart.builder.BindingBuilder.addUsernameToken(BindingBuilder.java:210)
        at org.apache.rampart.builder.TransportBindingBuilder.build(TransportBindingBuilder.java:95)
        at org.apache.rampart.MessageBuilder.build(MessageBuilder.java:140)
        at org.apache.rampart.handler.RampartSender.invoke(RampartSender.java:106)
        ... 21 more
TID: [] [WSO2 Enterprise Service Bus] [2012-11-15 20:10:49,366]  WARN {org.apache.synapse.FaultHandler} -  ERROR_CODE : 0 {org.apache.synapse.FaultHandler}
TID: [] [WSO2 Enterprise Service Bus] [2012-11-15 20:10:49,367]  WARN {org.apache.synapse.FaultHandler} -  ERROR_MESSAGE : Unexpected error during sending message out {org.apache.synapse.FaultHandler}
TID: [] [WSO2 Enterprise Service Bus] [2012-11-15 20:10:49,367]  WARN {org.apache.synapse.FaultHandler} -  ERROR_DETAIL : org.apache.synapse.SynapseException: Unexpected error during sending message out
        at org.apache.synapse.core.axis2.Axis2Sender.handleException(Axis2Sender.java:170)
        at org.apache.synapse.core.axis2.Axis2Sender.sendOn(Axis2Sender.java:69)
        at org.apache.synapse.core.axis2.Axis2SynapseEnvironment.send(Axis2SynapseEnvironment.java:281)
        at org.apache.synapse.endpoints.AbstractEndpoint.send(AbstractEndpoint.java:297)
        at org.apache.synapse.endpoints.AddressEndpoint.send(AddressEndpoint.java:59)
        at org.apache.synapse.core.axis2.ProxyServiceMessageReceiver.receive(ProxyServiceMessageReceiver.java:165)
        at org.apache.axis2.engine.AxisEngine.receive(AxisEngine.java:181)
        at org.apache.axis2.transport.http.HTTPTransportUtils.processHTTPPostRequest(HTTPTransportUtils.java:172)
        at org.apache.synapse.transport.nhttp.ServerWorker.processEntityEnclosingMethod(ServerWorker.java:409)
        at org.apache.synapse.transport.nhttp.ServerWorker.run(ServerWorker.java:261)
        at org.apache.axis2.transport.base.threads.NativeWorkerPool$1.run(NativeWorkerPool.java:172)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
        at java.lang.Thread.run(Unknown Source)
Caused by: org.apache.axis2.AxisFault: No user value in the rampart configuration policy
        at org.apache.rampart.handler.RampartSender.invoke(RampartSender.java:117)
        at org.apache.axis2.engine.Phase.invokeHandler(Phase.java:340)
        at org.apache.axis2.engine.Phase.invoke(Phase.java:313)
        at org.apache.axis2.engine.AxisEngine.invoke(AxisEngine.java:262)
        at org.apache.axis2.engine.AxisEngine.send(AxisEngine.java:427)
        at org.apache.synapse.core.axis2.DynamicAxisOperation$DynamicOperationClient.send(DynamicAxisOperation.java:193)
        at org.apache.synapse.core.axis2.DynamicAxisOperation$DynamicOperationClient.executeImpl(DynamicAxisOperation.java:175)
        at org.apache.axis2.client.OperationClient.execute(OperationClient.java:165)
        at org.apache.synapse.core.axis2.Axis2FlexibleMEPClient.send(Axis2FlexibleMEPClient.java:445)
        at org.apache.synapse.core.axis2.Axis2Sender.sendOn(Axis2Sender.java:57)
        ... 12 more
Caused by: org.apache.rampart.RampartException: No user value in the rampart configuration policy
        at org.apache.rampart.builder.BindingBuilder.addUsernameToken(BindingBuilder.java:210)
        at org.apache.rampart.builder.TransportBindingBuilder.build(TransportBindingBuilder.java:95)
        at org.apache.rampart.MessageBuilder.build(MessageBuilder.java:140)
        at org.apache.rampart.handler.RampartSender.invoke(RampartSender.java:106)
        ... 21 more
 {org.apache.synapse.FaultHandler}
TID: [] [WSO2 Enterprise Service Bus] [2012-11-15 20:10:49,368]  WARN {org.apache.synapse.FaultHandler} -  ERROR_EXCEPTION : org.apache.synapse.SynapseException: Unexpected error during sending message out {org.apache.synapse.FaultHandler}
TID: [] [WSO2 Enterprise Service Bus] [2012-11-15 20:10:49,368]  WARN {org.apache.synapse.FaultHandler} -  FaultHandler : Endpoint [conf/HelloServiceAS] {org.apache.synapse.FaultHandler} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T03:30:14.973

乔治，

当权利中介无法提取尝试访问目标资源的用户的用户名时，通常会出现该错误。检索特定用户的用户名由适当的权利回调处理程序实现（通过处理标头等）完成。但是，尝试将权利回调处理程序参数显式设置为“org.wso2.carbon.identity.entitlement.mediator.callback.UTEntitlementCallbackHandler”，这对应于在将 UT 应用于特定服务时检索用户的用户名。（AFAIR，参数权利回调处理程序的值曾经有默认值是上面提到的那个）。无论如何，尝试在权利服务中介配置中设置它，如下所示。

```
<entitlementService remoteServiceUrl="https://localhost:9443/services/" remoteServiceUserName="admin" remoteServicePassword="admin" callbackClass="org.wso2.carbon.identity.entitlement.callback.UTEntitlementCallbackHandler"/> 
```

干杯，普拉巴斯

# c - 使用多个排序条件对数组进行排序 (QuickSort)

> ID：13373525
> 
> 赞同：4
> 
> 时间：2012-11-14T05:31:43.147
> 
> 标签：c, arrays, sorting, structure, quicksort

我试图找出如何（使用快速排序算法）按 2 个标准对结构数组进行排序。例如说我有一个结构：

```
struct employee{
   char gender[12];
   char name[12];
   int id;
}; 
```

说我的输入是：

```
struct employee arr[3]=
{
    {"male","Matt",1234},
    {"female","Jessica",2345},
    {"male","Josh",1235}
}; 
```

我想先按性别对元素进行排序，然后按升序对 ID 进行排序。一个例子是让所有男性首先按顺序打印他们的 ID，然后所有女性都打印他们的 ID。我试图在不使用 qsort 函数的情况下执行此操作，但我一点也不知道如何检查。这是我的排序功能：

```
void quicksort(struct employee *arr, int left, int right)
{
    int pivot, l, r, temp;
    if(left < right)
    {
        p = left;
        l = left;
        r = right;
        while(l < r)
        {

            while(arr[l].id <= arr[p].id && l <= right)
                l++;
            while(arr[r].id > arr[p].id && r >= left)
                r--;

            if(l < r)
            {
                temp = arr[l].id;
                arr[l].id = arr[r].id;
                arr[r].id = temp;
            }
        }

        temp = arr[r].id;
        arr[r].id = arr[p].id;
        arr[p].id = temp;

        quicksort(arr, left, r-1);
        quicksort(arr, r+1, right);
    }
} 
```

有什么建议么？我在想我可以使用 strcmp 但我不知道将它包含在函数中的哪个位置。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T07:05:13.733

你当然可以内联比较函数，以及一个交换器。下面的代码非常基本，并且依赖于有效的指针，但你会明白的。我还冒昧地减少了您的快速排序，修复了沿途的问题（我希望如此）。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

// employee record
struct employee
{
    char gender[12];
    char name[12];
    int id;
};

// swap employee records
void swap_employee(struct employee *left, struct employee *right)
{
    struct employee tmp = *right;
    *right = *left;
    *left = tmp;
}

// compare employee records
int compare_employee(const struct employee* left,
                     const struct employee* right)
{
    int gender = strcmp(left->gender, right->gender);
    return (gender ? gender : (left->id - right->id));
}

// quicksort for employees
static void quicksort_(struct employee *arr, int left, int right)
{
    struct employee p = arr[(left+right)/2];    // as good as any
    int l = left, r = right;   // movable indicies

    while (l <= r)
    {
        while (compare_employee(arr+l, &p) < 0)
            ++l;
        while (compare_employee(arr+r, &p) > 0)
            --r;
        if (l <= r)
        {
            swap_employee(arr+l, arr+r);
            ++l; --r;
        }
    }

    if (left < r)
        quicksort_(arr, left, r);
    if (l < right)
        quicksort_(arr, l, right);
}

// exposed API
void quicksort(struct employee *arr, int count)
{
    if (arr && (count>0))
        quicksort_(arr, 0, count-1);
}

/* sample usage */
int main(int argc, char *argv[])
{
    struct employee arr[]=
    {
        {"male","Matt",1234},
        {"female","Jessica",2345},
        {"male","Josh",1235},
        {"female","Betsy",2344},
        {"male","Roger",1233}
    };

    quicksort(arr, sizeof(arr)/sizeof(arr[0]));

    for (int i=0;i<sizeof(arr)/sizeof(arr[0]);++i)
        printf("%s, %s, %d\n", arr[i].gender,arr[i].name, arr[i].id);

    return EXIT_SUCCESS;
} 
```

**结果**

```
female, Betsy, 2344
female, Jessica, 2345
male, Roger, 1233
male, Matt, 1234
male, Josh, 1235 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T05:45:35.693

这并不难。您只需要一个函数（或看到您希望它“硬编码”的代码块）来比较您的结构。在您提供的示例代码中，您正在使用`arr[l].id <= arr[p].id`. 那就是您只考虑 id 来确定您的元素适合的位置。此时您只需要使用其他字段进行比较。使用函数会更整洁（我在之前的问题中给了你这样的函数）。

您也只是在交换时移动 id 字段 - 在数据项中保持名称和性别不变。您应该移动整个结构。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T05:34:39.160

只需使用内置的`qsort`，并传递给它一个比较器功能，首先比较性别，并且仅在第一次比较“tie”的情况下查阅 ID 号。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T05:45:18.027

我认为你应该先按性别对数组进行排序，一个是男性，一个是女性。然后使用快速排序函数在这两个数组中进行排序。

您可以使用 strcmp 将原始数组排序为两个数组：一个用于男性，一个用于女性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-14T05:49:16.223

```
int compare_employee (struct employee * a, struct employee * b) {
    int diff = strcmp(a->gender, b->gender);

    if (diff) // if gender different
        return -diff; // sort descending, please double check this and reverse in case I am wrong

    return a->id - b->id; // else sort by id
} 
```

如果 则输出负数，如果 则输出正数`a < b`，如果`a > b`相等则输出零。

在您自己的快速排序或`qsort`比较器中使用它。

# git - Git 1.8: it push error: dst ref refs/heads/master receives from more than one src

> ID：13373528
> 
> 赞同：22
> 
> 时间：2012-11-14T05:32:11.390
> 
> 标签：git

Another issue with git 1.8:

```
$ git push
error: dst ref refs/heads/master receives from more than one src.
error: failed to push some refs to 'gitosis@xxx.xx:xxx.git' 
```

Suggestions? It was working before upgrading to 1.8.

```
$ git remote -v
origin  gitosis@xxx.xx:xxx.git (fetch)
origin  gitosis@xxx.xx:xxx.git (push) 
```

After googling around I tried this first:

```
$ git push origin :refs/heads/refs/heads/master
remote: warning: Allowing deletion of corrupt ref.
To gitosis@xxx.xx:xxx.git
 - [deleted]         refs/heads/master 
```

No idea what is that and why it was corrupt.

```
$ git pull
Already up-to-date.

$ git push
error: dst ref refs/heads/master receives from more than one src.
error: failed to push some refs to 'gitosis@xxx.xx:xxx.git' 
```

Still not working, but `origin master` did work at least:

```
$ git push origin master
Counting objects: 42, done.
To gitosis@xxx.xx:xxx.git
3e3fc87..6e11d2a  master -> master 
```

Okay, that kind of fixed it but what was the cause of the issue to begin with? Why origin/master suddenly got corrupted? What did I do with `git push origin :refs/heads/refs/heads/master` ?

`.git/config`:

```
[core]
repositoryformatversion = 0
filemode = false
bare = false
logallrefupdates = true
ignorecase = true
precomposeunicode = false
[remote "origin"]
fetch = +refs/heads/*:refs/remotes/origin/*
url = gitosis@xxx.xx:xx.git
push = HEAD
[branch "master"]
remote = origin
merge = refs/heads/master

ls .git/refs/remotes/origin:

HEAD    master  refs 
```

In the end, now I have to do `git push origin master` every time. And the most annoying is that some repos work with `git push`, but on the most of them I got to add `origin master` but I don't understand why, and it can't be that I am alone having this problem.

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2016-06-19T19:20:06.337

出现此错误的另一种方法是，如果您不小心输入了您尝试推送两次的分支的名称，即：

```
git push master otherBranch master moreBranches 
```

产生此错误。一旦你意识到你已经完成了，修复就很明显了：

```
git push master otherBranch moreBranches 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-16T11:26:35.233

看起来您`refs`在`refs/remotes/origin`. 请注意`refs/remotes/origin`，您有一个额外的`refs`目录？我不知道这是如何到达那里的，但这可能是导致您的问题的原因。由于 Git 处理 refs 缩写的方式（允许您删除前缀，只使用后缀 like `origin/master`），它可能会因为同时拥有`refs/remotes/origin/master`和 而感到困惑`refs/remotes/refs/remotes/origin/master`。

我不知道它是如何进入这种状态的；可能是 Git 工具中的错误，也可能是您在某个时候犯的错字。您通过删除跟踪此重复分支的远程分支解决了一半的问题。`git push`我敢打赌，如果您删除`refs/remotes/origin/refs`目录，您可以解决问题的另一半，并且能够再次这样做。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-02-02T08:45:46.063

就我而言，我在分支名称中有一个空格：

```
git push origin 353-applyPermissions :353-applyPermissions 
```

返回 > 错误：dst ref refs/heads/353-applyPermissions 从多个 src 接收。但这一个有效：

```
git push origin 353-applyPermissions:353-applyPermissions 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T08:00:21.193

按照[这个 git old patch](https://github.com/git/git/commit/28391a80) (2007!)中的解释

> 一些 refs 变得陈旧，例如当 forkee 重新定位并丢失了 fork 所需的一些对象时。
> 处理这些 ref 的快速而肮脏的方法是删除它们并再次推送它们。
> 
> 但是，`git-push`首先会首先获取 ref 的当前提交名称，由于 ref 未指向有效对象，因此会收到 null sha1，然后告诉`receive-pack`它应该删除具有此提交名称的 ref。
> `delete_ref()`随后将被调用，并检查`resolve_ref()`（*不*检查对象的有效性）是否返回相同的提交名称。这会失败。

`refs/heads/refs/heads/master`看起来像一个错误地命名为“refs/heads/master”的分支（使用命名空间来[定义分层分支名称](https://stackoverflow.com/a/2527436/6309)），并且没有指向任何内容。
删除它是正确的举动。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-08-30T07:29:35.410

就我而言，我有一个与分支名称同名的标签。重命名分支名称和作品。

# ios6 - UIPageViewController disable scrolling

> ID：13373531
> 
> 赞同：10
> 
> 时间：2012-11-14T05:32:30.430
> 
> 标签：ios6, uipageviewcontroller

I am using a UIPageViewController with transitionStyle `UIPageViewControllerTransitionStyleScroll` and navigationOrientation `UIPageViewControllerNavigationOrientationVertical`

I also have a `UIPanGestureRecognizer` on the view and I want to disable page scrolling when the pan gesture is active.

I am trying to set the following when the gesture begins:

```
pageViewController.view.userInteractionEnabled = NO; 
```

This seems to have no effect, or it appears to work sporadically.

The only other way I have found to do it (which works) is to set the UIPageViewController dataSource to nil while the pan gesture is running, however this causes a huge delay when resetting the dataSource.

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-08-23T08:25:59.147

UIPageViewController 使用一些 UIScrollView 对象来处理滚动（至少对于 transitionStyle `UIPageViewControllerTransitionStyleScroll`）。您可以通过控制器的子视图进行迭代`pageViewController.view.subviews`以获取它。现在，您可以轻松启用/禁用滚动：

```
- (void)setScrollEnabled:(BOOL)enabled forPageViewController:(UIPageViewController*)pageViewController
{
    for (UIView *view in pageViewController.view.subviews) {
        if ([view isKindOfClass:UIScrollView.class]) {
            UIScrollView *scrollView = (UIScrollView *)view;
            [scrollView setScrollEnabled:enabled];
            return;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-01-10T18:29:58.527

对于那些使用 swift 而不是 Objective-c 的人，这里是 Squikend 的转置解决方案。

```
func findScrollView(#enabled : Bool) {
    for view in self.view.subviews {
      if view is UIScrollView {
        let scrollView = view as UIScrollView
        scrollView.scrollEnabled = enabled;
      } else {
        println("UIScrollView does not exist on this View")
      }

    }
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-20T13:09:23.477

每个人都非常非常复杂。

这是您需要禁用或启用滚动的全部功能。

```
 func enableScroll(_ enable: Bool) {
        dataSource = enable ? self : nil
    } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-10-16T20:50:27.027

Swift 4.2 版本的答案

```
func findScrollView(enabled: Bool) {
    for view in self.view.subviews {
        if view is UIScrollView {
            let scrollView = view as! UIScrollView
            scrollView.isScrollEnabled = enabled
        } else {
            print("UIScrollView does not exist on this View")
        }

    }
} 
```

然后 yourpagecontorller.findScrollView(enabled: false)

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2015-11-17T10:50:42.110

您也可以禁用手势识别器。

```
for (UIGestureRecognizer *recognizer in pageViewController.gestureRecognizers)
{
    recognizer.enabled = NO;
} 
```

与流行的答案不同，它依赖于 inner 的存在`UIScrollView`，这个答案使用公共`gestureRecognizers`数组。如果您使用书本式分页，则可能不存在底层滚动视图。

# matlab - 如何在 Matlab 中为几个函数声明一个全局变量？

> ID：13373537
> 
> 赞同：5
> 
> 时间：2012-11-14T05:33:03.643
> 
> 标签：matlab, variables, global

我有一个`histShape.m`用函数调用的文件`histShape`，还有一些其他函数。

代码的一般视图是：

```
%
function [outputImage] = histShape(srcimg, destimg)

    PIXELS = 255 + 1;

     ....
     ....
end

%
function [outputImage] = normalizeAndAccumulate(inputImage)

   PIXELS = 255 + 1;

....
....

end

%
function [pixels] = getNormalizedHistogram(histogram , inputImage)

   PIXELS = 255 + 1;

  ....
  ....

end 
```

我可以使用`global x y z;` ，但我正在寻找一种不同的方式。

我想将变量声明`PIXELS`为全局变量，我该怎么做？

问候

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-14T05:37:44.887

您可以使用关键字访问 MATLAB 函数内的全局变量`global`：

```
function my_super_function(my_super_input)
    global globalvar;

    % ... use globalvar
end 
```

您通常会使用相同的关键字在函数外部的脚本中声明全局变量：

```
% My super script
global globalvar;
globalvar = 'I am awesome because I am global';
my_super_function(a_nonglobal_input); 
```

然而，这并不是绝对必要的。只要全局变量的名称在函数之间保持一致，您就可以通过`global globalvar;`在您编写的任何函数中简单地定义来共享相同的变量。

您需要做的就是`global PIXELS;`在每个函数的开头定义（在您为其赋值之前）。

[请参阅此处](http://www.mathworks.com/help/matlab/ref/global.html)的官方文档。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-14T07:43:12.533

通常不希望使用全局变量的替代方法是将您的 PIXELS 变量传递给每个函数。如果你有很多，那么你可以制作一个结构来保存它们。

```
%
function [outputImage] = histShape(srcimg, destimg, PIXELS)

     ....
     ....
end

%
function [outputImage] = normalizeAndAccumulate(inputImage, PIXELS)

....
....

end

%
function [pixels] = getNormalizedHistogram(histogram , inputImage, PIXELS)

  ....
  ....

end 
```

或使用结构

```
 %In the main script calling the functions
    options.Pixels = 255 + 1

    function [outputImage] = histShape(srcimg, destimg, options)

         PIXELS = options.Pixels;
         ....
         ....
    end
    %etc... 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-01-29T07:39:24.207

如果在问题中使用全局变量的唯一原因与发布的代码有关，那么最好的解决方案是使用[嵌套函数](http://se.mathworks.com/help/matlab/matlab_prog/nested-functions.html)。您所要做的就是将`end`示例的第一个移动到文件的最底部，然后您就完成了。

```
function [outputImage] = histShape(srcimg, destimg)
 PIXELS = 255 + 1;

function [outputImage] = normalizeAndAccumulate(inputImage)
   PIXELS = 255 + 1;
end

function [pixels] = getNormalizedHistogram(histogram , inputImage)
   PIXELS = 255 + 1;
end
end 
```

如果可以避免的话，永远不要使用全局变量。

# android - Android SQLite 数据库查询

> ID：13373538
> 
> 赞同：1
> 
> 时间：2012-11-14T05:33:05.780
> 
> 标签：android, android-sqlite

我正在创建一个需要数据库连接的 android 应用程序，为此我使用了内置的 SQLiteDatabase 类。我的数据库是使用以下语句创建的：-

```
SQLiteDatabase db;
db = openOrCreateDatabase("ContactsMain",SQLiteDatabase.CREATE_IF_NECESSARY,null);
db.execSQL("Create Table Contacts (name Text, phno Text PRIMARY KEY, important Integer)"); 
```

'important' 的值为 0 或 1，取决于联系人是否重要。要更新此值，我使用以下代码：

```
protected void onListItemClick(ListView l, View v, int position, long id) {
    super.onListItemClick(l, v, position, id);
    c.moveToPosition(position);
    String ph = c.getString(c.getColumnIndex("phno"));
    ContentValues val = new ContentValues();
    val.put("important",1);
    String query = "update Contacts set important = 1 where phno=" + ph + ";";
    db.update("Contacts", val, query, null);
    c.close();
    db.close();
} 
```

db 和 c 已被初始化如下：

```
SQLiteDatabase db = openOrCreateDatabase("ContactsMain",SQLiteDatabase.CREATE_IF_NECESSARY,null);
Cursor c = db.rawQuery("SELECT * FROM Contacts",null); 
```

问题是，当我单击列表中的一个项目时，所有联系人的“重要”值都设置为 1，而不仅仅是选定的那个。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T05:54:58.273

这对你有用

```
protected void onListItemClick(ListView l, View v, int position, long id) {
   super.onListItemClick(l, v, position, id);

  c.moveToPosition(position);
  String ph = c.getString(c.getColumnIndex("phno"));

  String where = "phno=?";
  String[] whereArgs = new String[] {ph};    

  ContentValues val = new ContentValues();
  val.put("important",1);

  db.update(DATABASE_TABLE, val, where, whereArgs);
  c.close();
  db.close();

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T05:57:10.780

你要

```
ContentValues val = new ContentValues();
val.put("important", 1);
db.update("Contacts", val, "phno=?", new String[] {ph}); 
```

# android - 如何在两个方向上滚动图像的水平滚动视图

> ID：13373546
> 
> 赞同：2
> 
> 时间：2012-11-14T05:33:54.390
> 
> 标签：android

我正在尝试显示带有图像的水平滚动视图以在两个方向上滚动。之前为此我使用了画廊视图，但不推荐使用画廊视图，我使用水平滚动视图而不是画廊视图，但水平滚动视图与画廊视图不同。

现在我必须做两个实现

1) 两个方向连续滚动。

2) 中心锁定功能与画廊相同。

我的屏幕看起来像

![在此处输入图像描述](../Images/eeaa9eaf1d7d98cee9126b10290de847.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T06:22:33.413

您可以使用**viewpager**，

尝试此代码并根据需要对其进行修改。

**注意**：这不是我的代码已经在网上找到它属于：

[（戴夫史密斯，@devunwired 日期：2012 年 8 月 17 日 PagerActivity）。](https://gist.github.com/8cbe094bb7a783e37ad1)

**主要活动：**

```
 public class MainActivity extends Activity{

PagerContainer  mContainer;

public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    mContainer = (PagerContainer) findViewById(R.id.pager_container);

    ViewPager pager = mContainer.getViewPager();
    PagerAdapter adapter = new MyPagerAdapter();
    pager.setAdapter(adapter);
    // Necessary or the pager will only have one extra page to show
    // make this at least however many pages you can see
    pager.setOffscreenPageLimit(adapter.getCount());
    // A little space between pages
    pager.setPageMargin(15);}

// Nothing special about this adapter, just throwing up colored views for
// demo
private class MyPagerAdapter extends PagerAdapter{

    @Override
    public Object instantiateItem(ViewGroup container, int position){
        TextView view = new TextView(MainActivity.this);
        view.setText("Item " + position);
        view.setGravity(Gravity.CENTER);
        view.setBackgroundColor(Color.argb(255, position * 50,
                position * 10, position * 50));

        container.addView(view);
        return view;
                                 }

    @Override
    public void destroyItem(ViewGroup container, int position, Object object)
                {
        container.removeView((View) object);}

    @Override
    public int getCount(){
     return 5;
             }

    @Override
    public boolean isViewFromObject(View view, Object object)
         {
        return (view == object);
               }}} 
```

**寻呼机容器：**

```
 public class PagerContainer extends FrameLayout implements
            ViewPager.OnPageChangeListener {

  private ViewPager mPager;
  boolean mNeedsRedraw = false;

  public PagerContainer(Context context) {
    super(context);
    init();
                      }

public PagerContainer(Context context, AttributeSet attrs) {
    super(context, attrs);
    init();
        }

public PagerContainer(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
    init();
                 }

private void init() {
    setClipChildren(false);
                   }

@Override
protected void onFinishInflate() {
    try {
        mPager = (ViewPager) getChildAt(0);
        mPager.setOnPageChangeListener(this);
    } catch (Exception e) {
     throw new IllegalStateException("The root child of PagerContainer must be a
                  ViewPager");
                  }
                }

public ViewPager getViewPager() {
    return mPager;
               }

private Point mCenter = new Point();
private Point mInitialTouch = new Point();

@Override
protected void onSizeChanged(int w, int h, int oldw, int oldh) {
    mCenter.x = w / 2;
    mCenter.y = h / 2;
            }

@Override
public boolean onTouchEvent(MotionEvent ev) {
    //We capture any touches not already handled by the ViewPager
    // to implement scrolling from a touch outside the pager bounds.
    switch (ev.getAction()) {
        case MotionEvent.ACTION_DOWN:
            mInitialTouch.x = (int)ev.getX();
            mInitialTouch.y = (int)ev.getY();
        default:
            ev.offsetLocation(mCenter.x - mInitialTouch.x, mCenter.y -
               mInitialTouch.y);
            break;
                }

    return mPager.dispatchTouchEvent(ev);
                  }

public void onPageScrolled(int position, float positionOffset, int
           positionOffsetPixels) {
    //Force the container to redraw on scrolling.
    //Without this the outer pages render initially and then stay static
    if (mNeedsRedraw) invalidate();
                 }

public void onPageSelected(int position) { }

public void onPageScrollStateChanged(int state) {
    mNeedsRedraw = (state != ViewPager.SCROLL_STATE_IDLE);
           }
            } 
```

**活动主.xml：**

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
         android:layout_width="match_parent"
         android:layout_height="match_parent" >

<com.example.testviewpager.PagerContainer
    android:id="@+id/pager_container"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="#CCC" >

    <android.support.v4.view.ViewPager
        android:layout_width="150dp"
        android:layout_height="100dp"
        android:layout_gravity="center_horizontal" />
</com.example.testviewpager.PagerContainer>

 </RelativeLayout> 
```

希望能帮到你。

# windows-phone-7 - 如何在 Windows Phone 开发中心发布公司特定的应用程序？

> ID：13373547
> 
> 赞同：1
> 
> 时间：2012-11-14T05:34:03.537
> 
> 标签：windows-phone-7, windows-phone

我想发布一个特定于公司的应用程序，即它需要公司登录并且仅提供公司特定信息。我如何将它发布到 Windows Phone 开发中心，以便它仅供公司员工使用，而不是向公众提供下载？有可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T09:32:36.890

您目前有 3 个选项：

## [1\. Beta分布](http://msdn.microsoft.com/en-us/library/windowsphone/help/jj215598%28v=vs.105%29.aspx)

好处：

*   安全（只有授权的人可以安装应用程序）

缺点：

*   限 90 天

## [2\. 有针对性的应用分发](http://msdn.microsoft.com/en-us/library/hh334584%28v=vs.92%29.aspx)

> 目标应用程序分发是通过 App Hub 发布应用程序同时将其隐藏在 Windows Phone Marketplace 中的过程。您可以将指向您的应用程序的链接发送给目标用户集。只有拥有该应用程序链接的用户才能安装它。

好处：

*   没有时间限制

缺点：

*   不是很安全（任何人都可以通过链接安装应用程序）

## [3.公司应用分发](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj206943%28v=vs.105%29.aspx)

> Windows Phone 8 使公司能够绕过 Windows Phone Store 直接向其员工或其他用户发布和分发 Windows Phone 应用程序。用户必须在手机注册公司应用分发后才能安装公司发布的应用，并且只有注册了公司应用分发的用户才能安装公司应用。

好处：

*   安全的
*   没有时间限制

缺点：

*   仅限 Windows Phone 8

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T22:30:47.373

关于＃2，您仍然可以要求登录，因此即使有人碰巧猜到了您的应用程序的 guid，他们也将无法真正使用该应用程序。请注意，验证应用程序的人需要一个测试帐户才能将其带到商店。

# 3 确实是您的解决方案（只需 299 美元即可获得公司证书 + 99 美元的商店注册，即使您不直接使用商店，您仍然需要）。本次会议涵盖了这方面的详细信息：[http ://channel9.msdn.com/Events/Build/2012/2-014](http://channel9.msdn.com/Events/Build/2012/2-014)

# android - Android MediaPlayer Error - (1, -2147483648)

> ID：13373554
> 
> 赞同：1
> 
> 时间：2012-11-14T05:34:39.027
> 
> 标签：android, media-player, android-mediaplayer, android-videoview

I am fetching data from a web service, that contains list of .mp4 files as url's The problem that arises is out of 10\. Seven of the .mp4 files are played and the other remaining three when played says "The video cannot be played" and when i check the log the media played throws out an error 11-14 10:50:44.710: E/MediaPlayer(10091): Error (1, -2147483648) Please can any one help out by what type of an error is this. As i read people saying it about permissions. But am accessing via a web service that gives me the data.

Thanks.

# vb.net - 将简单整数从 Form2 传递给 Form1

> ID：13373560
> 
> 赞同：0
> 
> 时间：2012-11-14T05:35:45.617
> 
> 标签：vb.net

只是想弄清楚如何将一个简单的整数（StartingTeam）从 Form2 传递到 Form 1。

表格 2 代码

```
Public Class frmTeamChoose
Public StartingTeam As Integer
Public Sub btnTeam1_Click(sender As Object, e As EventArgs) Handles btnTeam1.Click
    StartingTeam = 1
End Sub

Public Sub btnTeam2_Click(sender As Object, e As EventArgs) Handles btnTeam2.Click
    StartingTeam = 2
End Sub

End Class 
```

表格 1 称为表格 1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T09:39:45.593

虽然您需要提供更多信息，但我会尽力帮助您：
我想您已经从 Form1 打开了 Form2：

```
'In form1:
Dim k as integer=Form2.StartingTeam 
```

一个改进的解决方案是创建一个属性：
表格 2 代码：

```
 Private miStartingTeam 
 Public Property StartingTeam As Integer
    Get
        Return miStartingTeam 
    End Get
    Set(ByVal value As Integer)
        miStartingTeam = value
    End Set
 End Property 
```

然后你的代码原样。
在表格 1 中：

```
'Open Form2
Dim f2 as new Form2
'f2.StartingTeam=1 'if you want to set a value before f2 opening
f2.Show

'Get StartingTeam from f2
dim k as integer=f2.StartingTeam 
```

需要帮助请叫我

# list - 如何递归地获取列表中的偶数元素

> ID：13373562
> 
> 赞同：0
> 
> 时间：2012-11-14T05:35:57.337
> 
> 标签：list, scheme

我正在尝试创建一个函数，该函数将返回列表中的偶数元素。

例如：

```
(evens '(a b c d)) 
```

应该返回

```
(b d) 
```

下面的代码似乎适用于包含奇数个元素的列表，但如果我给它一个包含偶数个元素的列表，那就不正确了。

例如：

```
(evens '(a b c d e)) 
```

将返回

```
(b d) 
```

**但：**

```
(evens '(a b c d)) 
```

将返回

```
(a c) 
```

有什么想法吗？

将我的代码更改为：

```
(DEFINE (evens lis)
(cond
    ((null? lis) '())   
    (else (cons (cadr lis) (evens (cdr lis))))
    )) 
```

得到一个错误，说传递给安全车的对象不是一对？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T09:47:05.590

您的代码几乎没有遗漏检查和一些不正确的逻辑。

```
(define (evens lis)
(cond
    ((null? lis) '())   
    ((eq? (cdr lis) '()) '()) ;missing condition
    (else (cons (cadr lis) (evens (cddr lis)))))) ; it is cddr not cdr 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T05:49:12.567

问题是，如果您的列表有偶数个元素，则`modulo`分支匹配并且您从列表`cons`的开始`car`...因此在您的示例中，您得到`a`，依此类推。

更重要的是，你不需要使用`length`这个函数......而且你不应该：因为`length`在列表的长度上需要线性时间，`evens`现在需要二次时间。

建议：您的程序应该“记住”它在每个递归步骤中是否位于“奇数”或“偶数”位置......你怎么能这样做（有几种方法）？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T11:11:38.197

在过去的几天里，[同样](https://stackoverflow.com/questions/13328914/recursion-in-scheme)的问题被[一次](https://stackoverflow.com/questions/13318388/a-scheme-procedure-that-returns-a-list-of-every-other-element)又一次地问到。这次我会直接回答，直截了当：

```
(define (evens lst)
  (if (or (null? lst)             ; if the list is empty 
          (null? (cdr lst)))      ; or the list has a single element
      '()                         ; then return the empty list
      (cons (cadr lst)            ; otherwise `cons` the second element
            (evens (cddr lst))))) ; and recursively advance two elements 
```

这是首先进行一些错误检查的方法：

```
(define (find-evens lst)
  (if (list? lst)
      (evens lst)
      (error "USAGE: (find-evens [LIST])"))) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T11:16:11.277

我将通过注释示例回答您的问题，希望您能真正学到一些东西，而不是仅仅获得有效的代码。实际上，假设您不熟悉方案，那么查看几段代码可能会更有启发性。

您的原始定义如下所示：

```
(define (evens lis)
  (cond (;; Check: Recursion stop condition
         (null? lis)
         '())
        (;; Wrong: Calling length at each step => O(n^2)
         ;; Wrong: Assuming even element if list has even number of elements
         (= (modulo (length lis) 2) 0) 
         ;; Wrong: Recursing with the rest of the list, you'll get odds
         (cons (car lis) (evens (cdr lis)))) 
        (else
         ;; Wrong: Recursing with the rest of the list with cdr, you'll get odds
         (evens (cdr lis))))) 
```

之后，您已编辑问题以将其更新为如下内容：

```
(define (evens lis)
  (cond (;; Check: Recursion stop condition
         (null? lis)
         '())   
        (else
         ;; Check: Building list with second element
         ;; Wrong: If lis only has 1 element,
         ;;        (cdr lis) is null and (car (cdr list)) is an error.
         (cons (cadr lis)
               ;; Wrong: Recursing with cdr, you'll get odds
               (evens (cdr lis)))))) 
```

一个解决方案是检查列表是否至少有第二个元素：

```
(define (evens lis)
  (cond (;; Check: Recursion stop condition 1
         (null? lis)
         '())
        (;; Check: Recursion stop condition 2: list of length = 1
         (null? (cdr lis))
         '())
        (else
         ;; Check: Building list with second element
         ;; The previous cond clauses have already sorted out
         ;; that lis and (cdr lis) are not null.
         (cons (cadr lis)
               ;; Check: Recurse "the rest of the rest" of lis with cddr
               (evens (cddr lis))))) 
```

练习：使用`if`和`or`简化此解决方案，使其只有 2 个分支。

# jquery-isotope - 同位素过滤器不适用于无限滚动插件

> ID：13373577
> 
> 赞同：5
> 
> 时间：2012-11-14T05:38:05.003
> 
> 标签：jquery-isotope, jquery-1.7

我在同一页面中使用了带有无限滚动插件的同位素过滤器，因此在同一时间两者都无法正常工作，一些设计问题反映在同位素 jQuery 文件中。当我在滚动中单击更多按钮时，它会得到更多的帖子，但没有正确放置。它需要落后于旧职位。我现在仍然找不到解决方案。如果有人有同样的问题并通过这种方式发现任何想法，请随时回复我的问题。

这是我的同位素过滤器的jQuery函数

```
$(function(){

    // Orginal function by Alien51
    var $container = $('#container');
    $container.isotope({
    masonry: {
      columnWidth: 80
    },
    sortBy: 'number',
    getSortData: {
      number: function( $elem ) {
        var number = $elem.hasClass('element') ? 
          $elem.find('.number').text() :
          $elem.attr('data-number');
        return parseInt( number, 10 );
      },
      alphabetical: function( $elem ) {
        var name = $elem.find('.name'),
            itemText = name.length ? name : $elem;
        return itemText.text();
      }
    }
  });
        var $optionSets = $('#options .option-set'),
      $optionLinks = $optionSets.find('a');

  $optionLinks.click(function(){
    var $this = $(this);
    // don't proceed if already selected
    if ( $this.hasClass('selected') ) {
      return false;
    }
    var $optionSet = $this.parents('.option-set');
    $optionSet.find('.selected').removeClass('selected');
    $this.addClass('selected');
    // make option object dynamically, i.e. { filter: '.my-filter-class' }
   var myArray = [];
    var options = {},
        key = $optionSet.attr('data-option-key'),
        value = $this.attr('data-option-value');

            if($('#arrays').val()=="")
                comm = "";
            else
                comm =  ',';

            myArray = $('#arrays').val()+comm+'.'+value;
            alert(myArray);
            //myArray = substring(1, myArray.length);

            if(value!='Show All')
                $('#arrays').val(myArray);
            else
                $('#arrays').val('Show All');

        if(value=='Show All')
            value = '*';
        else
            value = $('#arrays').val();
    // parse 'false' as false boolean
    value = value === 'false' ? false : value;
    options[ key ] = value;
    //alert(key);
    if ( key === 'layoutMode' && typeof changeLayoutMode === 'function' ) {
      // changes in layout modes need extra logic
      changeLayoutMode( $this, options )
    } else {
      // otherwise, apply new options
      $container.isotope( options );
    }
          return false;
  });
    // dynamically load sites using Isotope from Zootool
    //var ajaxError='';
    //alert(ajaxError);
  $.getJSON('http://zootool.com/api/users/items/?username=desandro' +
      '&apikey=8b604e5d4841c2cd976241dd90d319d7' +
      '&tag=bestofisotope&callback=?')
      .error( ajaxError )
      .success(function( data )
      {
      // proceed only if we have data
      if ( !data || !data.length ) {
        ajaxError();
        return;
      }
      var items = [],
          item, datum;

      for ( var i=0, len = data.length; i < len; i++ ) {
        datum = data[i];
        item = '<li><a href="' + datum.url + '">'
          + '<img src="' + datum.image.replace('/l.', '/m.') + '" />'
          + '<b>' + datum.title + '</b>'
          + '</a></li>';
        items.push( item );
      }
            var $items = $( items.join('') )
        .addClass('example');
                // set random number for each item
      $items.each(function(){
        $(this).attr('data-number', ~~( Math.random() * 100 + 15 ));
      });
            $items.imagesLoaded(function(){
        $sitesTitle.removeClass('loading').text('Sites using Isotope');
        $container.append( $items );
        $items.each(function(){
          var $this = $(this),
              itemHeight = Math.ceil( $this.height() / 20 ) * 120 - 10;
          $this.height( itemHeight );
        });
        $container.isotope( 'insert', $items );
      });
          });
    });

    $("#infscr-loading a").click( function(){
        alert('njasd');
        var h = $("#container").height();
        //alert(h);
        $("#container").css("min-height",h);
        $("#container").addClass("aft_fst");
    }); 
```

在此先感谢您的帮助。

# javascript - 间隔更改 DIV 边距

> ID：13373578
> 
> 赞同：0
> 
> 时间：2012-11-14T05:38:15.083
> 
> 标签：javascript, settimeout, setattribute

我正在尝试使用 setAttribute 更改每个元素的边距。

我怎样才能使用我的变量**dist** “距离”来减少值直到 10，每次**延迟**“间隔”之后？

```
var dist=200; var speed = 2000;

function slideLeft(x){
    dist--; 
    slideSet[x].setAttribute("style","margin-right:"+dist+"px;");   
    setTimeout(slideLeft(x), delay);    
} 
```

以这些风格和元素为例...

```
.widiv { margin-right:200px; } 
```

* * *

```
<div>
    <div class="widiv" ></div>
    <div class="widiv" ></div>
</div> 
```

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T10:34:50.163

这是您的代码进行了一些更改：请参阅小提琴[http://jsfiddle.net/chrismoutray/4p3xX/](http://jsfiddle.net/chrismoutray/4p3xX/)

```
var dist = 200, delay = 500,
    slideSet = document.getElementsByTagName('div');

function slideLeft(x) {
    dist--;
    if (dist < 0) return;
    slideSet[x].setAttribute("style", "margin-right:" + dist + "px;");
    setTimeout(function() {
        slideLeft(x);
    }, delay);
}

slideLeft(1); 
```

在样式中添加了一些内容：

```
.widiv { 
    margin-right:200px; 
    float:left; 
    width: 100px; 
    border: 1px solid black; 
    height: 100px; } 
```

主要区别在于，在调用 setTimeout 时，我使用函数委托 ( `function() { <your code here> }`) 来调用*slideLeft*方法，以便正确使用 x 变量——我认为如果不这样做，就不能将语句传递给 setTimeout。

*同样在设置 div 的样式时，我确保在左侧包含一个浮动，否则对右侧*边距的更改没有意义 - 这应该是*左侧*边距吗？

# loops - 将文件输出到 .txt 和控制台 c++

> ID：13373583
> 
> 赞同：0
> 
> 时间：2012-11-14T05:38:56.483
> 
> 标签：loops, file-io, console, text-files, primes

**我一直在试图弄清楚如何将程序输出镜像到 .txt 文件以及控制台。我对此比较陌生，所以我迷路了。请帮忙，这是我到目前为止所拥有的。**

```
#include <iostream>
#include <fstream>
#include <cmath>
#include <cstdlib>

using namespace std;

bool isPrime (int);

int main ()
{
    int numbers;
    ifstream inputFile;
    //open the file
    inputFile.open("22.txt");
    //output to file
    ofstream outFile;
    outFile.open("PrimeNumbers.txt");
    while(inputFile >> numbers)
        if(isPrime(numbers))
            outFile << numbers << endl;
            cout << numbers << " is a prime number." << endl;
} //end of main function
//function formula
bool isPrime (int num)
{
    int count=0;
    for (int numb=2; 
        numb<=num/2; 
        numb++)
    {
        if(num%numb==0)
            count++;
    }
    if (count>0)
        return false;
    else
        return true;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T05:45:17.883

对我来说突出的一个错误是：

```
while(inputFile >> numbers)
    if(isPrime(numbers))
        outFile << numbers << endl;
        cout << numbers << " is a prime number." << endl; 
```

您没有任何块（由大括号定义），因此此代码段等效于：

```
while(inputFile >> numbers)
{
    if(isPrime(numbers))
    {
        outFile << numbers << endl;
    }
    cout << numbers << " is a prime number." << endl;
} 
```

看看“cout”语句如何不受条件影响？你想写的是：

```
while(inputFile >> numbers)
{
    if(isPrime(numbers))
    {
        outFile << numbers << endl;
        cout << numbers << " is a prime number." << endl;
    }
} 
```

（另外，如果您需要更多帮助，请参阅我在您的问题下方的评论，要求对问题进行更准确的定义）

# php - 使用 Jquery 加载时获取 PHP 会话 ID

> ID：13373584
> 
> 赞同：0
> 
> 时间：2012-11-14T05:39:30.757
> 
> 标签：php, jquery, session

例如，我创建了一个使用 Jquery 加载功能的网站，仅重新加载网站的部分内容，而无需用户重新加载整个网站。

```
$('#divtoreload').load('refresh.php'); 
```

这很好用，除了现在我需要刷新脚本来根据用户会话 ID 显示不同的信息（为数据库提取）。但是，使用该`session_id();`函数，会话 ID 似乎没有被拉入代码中，因此数据库结果不返回任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T05:43:45.767

你打电话`session_start();`之前有没有打电话`session_id();`？您必须启动会话才能访问任何会话变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T06:03:41.713

把 session_start() 放在你的 refresh.php

# mapreduce - MapReduce 中的 reduce 是立即运行，还是等待 map 完成？

> ID：13373586
> 
> 赞同：1
> 
> 时间：2012-11-14T05:39:46.207
> 
> 标签：mapreduce

刚刚阅读完以下有关[MapReduce](http://static.googleusercontent.com/external_content/untrusted_dlcp/research.google.com/en//archive/mapreduce-osdi04.pdf)的论文。一个问题——reduce 是等到所有的 map 操作完成，还是在某些结果可用时才开始？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T05:56:21.447

Haskell 内置了 map 和 reduce（他们称之为 fold），并且它的执行顺序是未定义的（你甚至可以对无限列表进行操作，只要你不尝试评估整个事情）。所以你可以做任何一种方式。

如果您问 Google 是如何做到的，我不确定，但他们可能会设置它，以便 reduce 尽可能地消耗他们正在映射的列表，因为这样他们就不必将已处理的值保存在内存中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T10:23:45.610

在 MapReduce 作业中，在所有 Map 作业完成之前，reducers 不会开始执行 reduce 方法。当映射器可用时，Reducers 开始从映射器复制中间键值对。这就是为什么我们能够在 Job-tracker 中看到，当某些映射仍在运行时，reduce 显示很少。

# php - php-cgi.exe 在任务管理器中有 16 个或更多实例

> ID：13373596
> 
> 赞同：0
> 
> 时间：2012-11-14T05:41:13.763
> 
> 标签：php

有人能告诉我**php-cgi.exe**的 16 个正在运行的进程是否是正常行为，如果不是，是什么原因造成的？服务器收到大量请求并使用 HttpRequestPool 发送并行请求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T07:17:18.587

如果您获得大量流量，这可能是正常的。PHP fCGI 为每个请求打开一个新任务，但也重用当前打开的任务以加快处理速度并节省资源。

# android - 日历事件 action_insert 上的 startActivityForResult 未返回到应用程序

> ID：13373599
> 
> 赞同：4
> 
> 时间：2012-11-14T05:41:26.650
> 
> 标签：android, events, calendar

以下代码启动日历事件编辑活动以创建新的日历事件。之后，我希望它通过调用 onActivityResult 返回到我的应用程序。那没有发生。相反，它正在返回到日历议程视图活动。

这是启动事件编辑器的代码。

```
public void onAddToCalendar (String description)
{
  Intent intent = new Intent (Intent.ACTION_INSERT);
  intent.setData (CalendarContract.Events.CONTENT_URI);
  intent.putExtra (Events.TITLE, description());
  startActivityForResult (intent, ACTIVITY_RESULT_ADD_EVENT);
} 
```

我需要做什么才能通过 onActivityResult 返回到我的应用程序？我正在运行安卓 4.1.2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T05:48:52.110

只需覆盖Activity A和B等父Activity中的如下方法

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
  super.onActivityResult(requestCode, resultCode, data);
} 
```

使用 onClick 方法启动 Activity

```
 startActivityForResult(intentName, 0); 
```

在子活动中，您使用/覆盖 onStop() 方法

```
 @Override
    protected void onStop()
    {
         super.onStop();
     } 
```

# php - preg_match_all 转换为简单数组

> ID：13373600
> 
> 赞同：7
> 
> 时间：2012-11-14T05:41:35.980
> 
> 标签：php, arrays, multidimensional-array, preg-match-all, pcre

我有 preg_match_all 功能：

```
preg_match_all('#<h2>(.*?)</h2>#is', $source, $output, PREG_SET_ORDER); 
```

它按预期工作，但问题是，它将所有项目 preg_matches 两次并放入一个像这样的巨大多维数组中，例如，它按预期 preg_matched 所需的所有 11 个项目，但两次并进入多维数组：

```
Array
(
    [0] => Array
        (
            [0] => <h2>10\. <em>Cruel</em> by St. Vincent</h2>
            [1] => 10\. <em>Cruel</em> by St. Vincent
        )

    [1] => Array
        (
            [0] => <h2>9\. <em>Robot Rock</em> by Daft Punk</h2>
            [1] => 9\. <em>Robot Rock</em> by Daft Punk
        )

    [2] => Array
        (
            [0] => <h2>8\. <em>Seven Nation Army</em> by the White Stripes</h2>
            [1] => 8\. <em>Seven Nation Army</em> by the White Stripes
        )

    [3] => Array
        (
            [0] => <h2>7\. <em>Do You Want To</em> by Franz Ferdinand</h2>
            [1] => 7\. <em>Do You Want To</em> by Franz Ferdinand
        )

    [4] => Array
        (
            [0] => <h2>6\. <em>Teenage Dream</em> by Katie Perry</h2>
            [1] => 6\. <em>Teenage Dream</em> by Katie Perry
        )

    [5] => Array
        (
            [0] => <h2>5\. <em>Crazy</em> by Gnarls Barkley</h2>
            [1] => 5\. <em>Crazy</em> by Gnarls Barkley
        )

    [6] => Array
        (
            [0] => <h2>4\. <em>Kids</em> by MGMT</h2>
            [1] => 4\. <em>Kids</em> by MGMT
        )

    [7] => Array
        (
            [0] => <h2>3\. <em>Bad Romance</em> by Lady Gaga</h2>
            [1] => 3\. <em>Bad Romance</em> by Lady Gaga
        )

    [8] => Array
        (
            [0] => <h2>2\. <em>Pumped Up Kicks</em> by Foster the People</h2>
            [1] => 2\. <em>Pumped Up Kicks</em> by Foster the People
        )

    [9] => Array
        (
            [0] => <h2>1\. <em>Paradise</em> by Coldplay</h2>
            [1] => 1\. <em>Paradise</em> by Coldplay
        )

    [10] => Array
        (
            [0] => <h2>Song That Get Stuck In Your Head YouTube Playlist</h2>
            [1] => Song That Get Stuck In Your Head YouTube Playlist
        )

) 
```

如何将此数组转换为简单的数组并且没有那些重复的项目？非常感谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-14T05:48:52.450

你总是会得到一个多维数组，但是，你可以像这样接近你想要的：

```
if (preg_match_all('#<h2>(.*?)</h2>#is', $source, $output, PREG_PATTERN_ORDER))
    $matches = $output[0]; // reduce the multi-dimensional array to the array of full matches only 
```

如果您根本不需要子匹配，请使用非捕获分组：

```
if (preg_match_all('#<h2>(?:.*?)</h2>#is', $source, $output, PREG_PATTERN_ORDER))
    $matches = $output[0]; // reduce the multi-dimensional array to the array of full matches only 
```

请注意，对 preg_match_all 的调用使用的是 PREG_PATTERN_ORDER 而不是 PREG_SET_ORDER：

> PREG_PATTERN_ORDER 对结果进行排序，以便 $matches[0] 是完整模式匹配的数组，$matches[1] 是由第一个带括号的子模式匹配的字符串数组，依此类推。
> 
> PREG_SET_ORDER 排序结果，使得 $matches[0] 是第一组匹配的数组，$matches[1] 是第二组匹配的数组，依此类推。

见： http: [//php.net/manual/en/function.preg-match-all.php](http://php.net/manual/en/function.preg-match-all.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T05:48:44.573

采用

```
#<h2>(?:.*?)</h2>#is 
```

作为你的正则表达式。如果您使用非捕获组（这是什么`?:`意思），则反向引用不会出现在数组中。

# css - 我可以强制文本完全分解成单词吗？

> ID：13373601
> 
> 赞同：1
> 
> 时间：2012-11-14T05:41:39.330
> 
> 标签：css, break

例如，我有一个标题：

**“用于 WordPress 的 Lorem Ipsum”**

它将在我的屏幕上显示如下：

```
Lorem Ipsum for
WordPress 
```

但我想这样显示：

```
Lorem Ipsum
for WordPress 
```

我可以在 CSS 中有任何解决方案吗？我不想用`<br>`

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T07:00:37.370

如果您只是想防止两个单词之间出现换行符，例如“for WordPress”，那么最简单的方法是使用不间断空格（U+00A0）而不是普通空格。如果您不知道如何在创作环境中键入不间断空格，请使用`&nbsp;`实体，如`for&nbsp;WordPress`.

或者，将单词包裹在`nobr`标记内，如 in `<nobr>for WordPress</nobr>`，或包含在已分配`span`CSS 声明的元素内。`white-space: nowrap`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T05:45:58.357

随意设置宽度。

```
<p>"Lorem Ipsum for WordPress"</p>
p {
width: 95px;
} 
```

或者您可以使用两个不同的参数

```
 <p>"Lorem Ipsum </p><p>for WordPress"</p> 
```

演示：[小提琴](http://jsfiddle.net/VVe99/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T05:45:58.617

```
<p><span style="display:block">Lorem Ipsum</span>for Wordpress</p> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T05:47:22.640

仅使用 CSS 可能是不可能的，但您可以使用 span + a CSS Display as block 来完成，如下所示

```
<p><span>Lorem Ipsum</span><span>for WordPress</span></p>

CSS:

p span 
{
    display: block;
} 
```

谢谢

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-14T05:51:09.270

你也可以使用`white-space:pre-line` [DEMO](http://tinkerbin.com/a5llgncy)

# android - 如何测试iosched 2012？

> ID：13373603
> 
> 赞同：0
> 
> 时间：2012-11-14T05:41:47.257
> 
> 标签：android, iosched

[http://code.google.com/p/iosched/](http://code.google.com/p/iosched/)

我对android开发相当陌生。
我可以在模拟器中启动应用程序，但无法继续。
它的“添加帐户”按钮什么也不做。

这个应用程序只在设备上运行吗？

如何注册此应用程序的帐户？任何谷歌帐户就足够了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T05:54:41.287

是的，某些功能只能在设备上使用，但您也可以尝试使用比 Android 模拟器更多可能性的[BlueStacks App Player 。](http://bluestacks.com/)

# string - MongoDb 变量到字符串

> ID：13373606
> 
> 赞同：2
> 
> 时间：2012-11-14T05:42:04.573
> 
> 标签：string, mongodb, variables

在 MongoDb 外壳中

```
db.keyword.update({"state":"UT"}, {$unset:{'abc.def':1}}); 
```

unsets 从 abc 中删除 def 。但是，如果我这样做：

```
var key = 'def'

var key1 = 'abc.'+key 
db.keyword.update({"state":"UT"}, {$unset:{key1:1}}); 
```

没有取消设置定义。

如何通过传递 key1 来取消设置“abc.def”？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T05:44:31.990

是的，这就是 json 解析器的工作方式。按照标准，哈希键必须用引号括起来，但有些解析器过于宽容，允许您省略它们。所以，这就是 mongo 看到你的代码的方式。

```
db.keyword.update({"state": "UT"}, {"$unset": {"key1": 1}}); 
```

您可以通过手动构造散列来解决这个问题。像这样的东西：

```
var key = 'def';
var key1 = 'abc.' + key;

var mod = {"$unset": {}};
mod["$unset"][key1] = 1;

db.keyword.update({"state": "UT"}, mod); 
```

# java - 基于正则表达式拆分字符串但保留分隔符

> ID：13373608
> 
> 赞同：1
> 
> 时间：2012-11-14T05:42:15.373
> 
> 标签：java, regex, split, delimiter

我正在尝试使用各种字符作为分隔符来拆分字符串，并将这些分隔符保留在它们自己的数组索引中。例如说我想拆分字符串：

> 如果 (x>1) 返回 x * 事实(x-1);

使用 '(', '>', ')', '*', '-', ';' 和 '\s' 作为分隔符。我希望输出为以下字符串数组：{"if"、"("、"x"、">"、"1"、")"、"return"、"x"、"*"、"fact "、"("、"x"、"-"、"1"、")"、";"}

到目前为止我使用的正则表达式是 `split("(?=(\\w+(?=[\\s\\+\\-\\*/<(<=)>(>=)(==)(!=)=;,\\.\"\\(\\)\\[\\]\\{\\}])))")`

它会在每个单词字符处拆分，无论它后面是否有一个分隔符。例如

> 测试 + 1

输出 {"t","e","s","t+","1"} 而不是 {"test+", "1"}

为什么即使该字符后面没有我的一个分隔符，它也会在每个字符处拆分？还有一个正则表达式，它甚至可以在 Java 中实现吗？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T05:50:57.787

*好吧，您可以使用环视来分割字符之间*的点，而无需使用分隔符：

```
(?<=[()>*-;\s])|(?=[()>*-;\s]) 
```

这将在每个分隔符之前和之后创建一个分割点。不过，您可能需要从结果数组中删除多余的空白元素。

快速 PowerShell 测试（`|`标记分割点）：

```
PS Home:\> 'if (x>1) return x * fact(x-1);' -split '(?<=[()>*-;\s])|(?=[()>*-;\s])' -join '|'
if| |(|x|>|1|)| |return| |x| |*| |fact|(|x|-|1|)|;| 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T05:49:29.357

这个图案怎么样？

```
(\w+)|([\p{P}\p{S}]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T05:52:50.177

要回答您的问题“为什么？”，这是因为您的整个表达式是一个前瞻断言。只要该断言在每个字符上都是正确的（或者我应该说“介于”），它就可以分裂。

此外，您不能在字符类中进行分组，*例如* `(<=)`没有做您认为它正在做的事情。

# javascript - jquery中需要访问autocomplete comboBox的ID

> ID：13373611
> 
> 赞同：2
> 
> 时间：2012-11-14T05:42:26.100
> 
> 标签：javascript, jquery-ui, jquery, jquery-plugins

**我想在下面写的关键事件（或更改：）上检索组合框的 id 尝试在下面的代码中查看 CHANGE：函数并提出一些提示，** 我想在关键事件（或更改：）上检索组合框的 id 写在下面尝试在下面的代码中查看 CHANGE:function 并提出一些提示

```
(function($) {
 $.widget("ui.combobox", {
     _create: function() {
         var input, self = this, select = this.element.hide(), selected = select.children(":selected"), value = selected.val() ?
 selected.text() : "", wrapper = this.wrapper =
 $("<span>").addClass("ui-combobox").insertAfter(select);

         input = $("<input>")
                .appendTo(wrapper)
                .val(value)
                .addClass("ui-state-default ui-combobox-input")
                .autocomplete({
                    delay: 0,
                    minLength: 0,
                    source: function(request, response) {
                        var matcher = new RegExp($.ui.autocomplete.escapeRegex(request.term), "i");
                        response(select.children("option").map(function() {
                            var text = $(this).text();
                            if (this.value && (!request.term || matcher.test(text)))
                            // alert(text);
                                return {
                                    label: text.replace(
                                        new RegExp(
                                            "(?![^&;]+;)(?!<[^<>]*)(" +
                                            $.ui.autocomplete.escapeRegex(request.term) +
                                            ")(?![^<>]*>)(?![^&;]+;)", "gi"
                                        ), "<strong>$1</strong>"),
                                    value: text,
                                    option: this
                                };
                        }));
                    },

                    select: function(event, ui) {
                        ui.item.option.selected = true;
                        self._trigger("selected", event, {
                            item: ui.item.option
                        });
                    },
                    change: function(event, ui) {
                        // alert($(event.target)[0].id);
                        //alert($(this).attr('id'));
                        alert(event.target.id);
                        if (!ui.item) {
                            xT = $(this).val();
                            var matcher = new RegExp("^" + $.ui.autocomplete.escapeRegex($(this).val()) + "$", "i"),
                                valid = false;
                            select.children("option").each(function() {
                                if ($(this).text().match(matcher)) {
                                    this.selected = valid = true;
                                    return false;
                                }
                            });
                            if (!valid) {
                                xT = $(this).val();
                                $(".selPnext").show();
                                // remove invalid value, as it didn't match anything
                                // $(this).val("");
                                // select.val("");
                                // input.data("autocomplete").term = "";
                                return false;
                            }
                        }
                    }
                })
         //.addClass("ui-widget ui-widget-content ui-corner-left");

         input.data("autocomplete")._renderItem = function(ul, item) {
             return $("<li></li>")
                    .data("item.autocomplete", item)
                    .append("<a>" + item.label + "</a>")
                    .appendTo(ul);
         };

         $("<a>")
                .attr("tabIndex", -1)
                .attr("title", "Show All Items")
                .appendTo(wrapper)
                .button({
                    icons: {
                        primary: "ui-icon-triangle-1-s"
                    },
                    text: false
                })
                .removeClass("ui-corner-all")
                .addClass("ui-corner-right ui-combobox-toggle")
                .click(function() {
                    // close if already visible
                    if (input.autocomplete("widget").is(":visible")) {
                        input.autocomplete("close");
                        return;
                    }

                    // work around a bug (likely same cause as #5265)
                    $(this).blur();

                    // pass empty string as value to search for, displaying all results
                    input.autocomplete("search", "");
                    input.focus();
                });
     },

     destroy: function() {
         this.wrapper.remove();
         this.element.show();
         $.Widget.prototype.destroy.call(this);
     }
 }); })(jQuery); var xT; function myVal() {
 return xT; } $(function() {
 //$("#tryy").combobox();
 //$("#country").combobox(); }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T06:08:05.963

您可以为组合框分配一个 id：

```
$("<input>").attr('id', 'something') 
```

然后onChange：

```
$('#something').live('change', function(){
  var id = $(this).val();
}); 
```

# android - 使用 KSoap2 的 Web 服务客户端 - 不响应或抛出错误

> ID：13373614
> 
> 赞同：0
> 
> 时间：2012-11-14T05:43:01.527
> 
> 标签：android, web-services, ksoap2, android-ksoap2, ksoap

伙计们，我是 android 编程新手，我尝试使用 KSOAP2 将数据发送到 Web 服务。但我无法发送值或获取数据。在调试模式下，它不会显示错误。我正在使用 android 4.1 模拟器。但我找不到任何结果或错误。有人可以纠正我在程序中的错误吗

![在此处输入图像描述](../Images/5c250306df32ae232063b3cfe905b132.png)

下面给出了我的java程序，

```
package com.example.webservice;

import org.ksoap2.SoapEnvelope;
import org.ksoap2.serialization.PropertyInfo;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapPrimitive;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.HttpTransportSE;

import android.os.AsyncTask;
import android.os.Bundle;
import android.app.Activity;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;
import android.widget.Toast;

public class WebService extends Activity {
       private final String NAMESPACE = "http://tempuri.org/";
       private final String URL = "http://www.w3schools.com/webservices/tempconvert.asmx?wsdl";
       private final String SOAP_ACTION = "http://tempuri.org/CelsiusToFahrenheit";
       private final String METHOD_NAME = "CelsiusToFahrenheit";
    String celsius="";

       Button b;
    TextView tv;
    EditText et;
    String res,resultval;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_web_service);
        et=(EditText)findViewById(R.id.editText1);
        tv=(TextView)findViewById(R.id.Result);
        b=(Button)findViewById(R.id.button1);
        b.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
            //String result=getFarenheit(et.getText().toString());
            //tv.setText(result+"°F");
            new service().execute();
            }
        });
    }
    private class service extends AsyncTask<Void, Void, String>{

        @Override
        protected String doInBackground(Void... arg0) {

            SoapObject request= new SoapObject(NAMESPACE, METHOD_NAME);
            PropertyInfo celsuiusPI= new PropertyInfo();
            celsuiusPI.setName("Celsius");
            celsuiusPI.setValue(celsius);
            celsuiusPI.setType(String.class);
            request.addProperty(celsuiusPI);
            SoapSerializationEnvelope envelope=new SoapSerializationEnvelope (SoapEnvelope.VER11);
            envelope.dotNet=true;
            envelope.implicitTypes = true;
            envelope.enc = SoapSerializationEnvelope.ENC2003;
            envelope.xsd = SoapEnvelope.XSD;
            envelope.xsi = SoapEnvelope.XSI;
            envelope.setOutputSoapObject(request);
            envelope.setAddAdornments(false);
            envelope.setOutputSoapObject(request);
            HttpTransportSE androidHttpTransport=new HttpTransportSE(URL);
            try{
                androidHttpTransport.setXmlVersionTag("<?xml version=\"1.0\" encoding=\"utf-8\"?>");
                androidHttpTransport.debug = true;
                androidHttpTransport.call(SOAP_ACTION, envelope);
                final SoapPrimitive response=(SoapPrimitive)envelope.getResponse();
                Toast.makeText(WebService.this, response.toString(), 20).show();
                Log.i("WebService output", response.toString());
                Object res= response.toString();
                resultval=(String) res;
            }
            catch(Exception e){
                e.printStackTrace();
            }

            return res;

        }
         protected void onPostExecute(String h){
             String result=h;
                tv.setText(result+"°F");

    }

}
} 
```

上述程序将文本值作为整数发送，并接收摄氏度/华氏度输出。提前感谢程序员，我已经编辑了我的代码，我收到了空值。我怀疑我在代理上，代理服务器是否阻止从 android Emulator 发送/接收数据

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T05:59:28.610

你应该发送一个字符串值而不是一个整数值，它可以像这样发送

```
PropertyInfo pi = new PropertyInfo();
    pi.setName("Celsius");  

    pi.setValue("22");
    pi.setType(String.class);
    request.addProperty(pi);(//request is soap object ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T07:11:34.730

您应该练习此示例链接以了解使用 ksoap 的 Web 服务。 [http://android-helper.blogspot.in/2012/04/accessing-webservices-using-soap.html](http://android-helper.blogspot.in/2012/04/accessing-webservices-using-soap.html)。让我知道你有任何疑问。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T02:59:19.123

你可以使用这种代码，

```
SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
PropertyInfo pi = new PropertyInfo();
pi.setName("Celsius");  
pi.setValue("22");
pi.setType(String.class);
request.addProperty(pi);
SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
envelope.dotNet = true;
envelope.setOutputSoapObject(request);
HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
androidHttpTransport.call(SOAP_ACTION, envelope);
Object result = envelope.getResponse(); 
```

# python - 在 Django 中使用缓存进行比较和设置

> ID：13373615
> 
> 赞同：0
> 
> 时间：2012-11-14T05:43:03.227
> 
> 标签：python, django, google-app-engine, caching

我看到一个视频，它解释了多个用户同时覆盖缓存的问题。演讲者建议使用比较和设置来解决这个问题（[http://www.udacity.com/wiki/CS253%20Unit%206?course=cs253 #卡斯](http://www.udacity.com/wiki/CS253%20Unit%206?course=cs253#cas)）。

他提到了两种方法

```
gets(key) → value, unique
cas(key, value, unique) → True/False

from google.appengine.api import memcache

val, unique = memcache.gets(key)
r = memcache.cas(key, newval, unique)
while r == False:
    unique, val = memcache.gets(key)
    r = memcache.cas(key, newval, unique) 
```

有这样的东西`django cache`吗？或者这是`googleappengine`具体的？. 有人可以建议如何使用`django cache`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T10:43:22.240

如果您使用的是通用 Django 缓存框架，这是不可能的。如果您只使用 MemCache，[Django Memcache 上的这个问题：比较和设置](https://stackoverflow.com/questions/7917604/django-memcache-compare-and-set)包含您需要的所有内容。

但是，请注意，虽然 CAS 解决了多个用户设置相同缓存值的问题，但这只是在高流量环境中的问题。如果每个月同时发生一次或两次缓存未命中和更新，则最好忽略 CAS。

如果缓存的值计算起来*真的很*昂贵，您还可以考虑一个单独的后台任务来计算结果，将其存储在缓存中，并在缓存到期之前运行。在这种情况下，您的用户将永远不会遇到缓存未命中并且整个 CAS 问题变得无关紧要。

# android - 如何解决？“Dex Loader SecurityException：找不到 dex.jar 的字段”

> ID：13373616
> 
> 赞同：5
> 
> 时间：2012-11-14T05:43:05.677
> 
> 标签：android, eclipse, adt

所有项目都运行良好

但是突然

这个问题出现在所有项目...

我无法运行所有项目。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-14T09:58:42.920

这发生在最近更新适用于 Android 的 Eclipse 插件之后。在 Eclipse 中，使用 Window -> Android SDK Manager，并更新您的 Android SDK 安装。重启 eclipse 后错误信息会消失。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T16:48:15.073

或者，如果你像我一样安装了 Eclipse 3.7.x 和 Eclipse 4.2.x，如果你想让它们都工作，你需要更新它们的 Android SDK 安装（尽管我使用了相同的安装目录）。

更新 Android SDK 安装本身就是一种野兽。我在安装 API 17 时遇到了一些问题，但我发现清除 SDK Manager 缓存可以缓解这些问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T23:48:28.067

在aanno的回答之后我仍然遇到问题，所以在他的步骤之后我必须做的就是将我的工作区（文件->切换工作区）切换到另一个文件夹，应用它然后立即返回并重新选择我原来的工作区位置。一旦我这样做并且 eclipse 返回，我的工作区就恢复并运行了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-25T04:16:02.387

该错误是在今天早些时候升级后出现的。升级没有明显的困难。

经过许多部分措施后，采取以下措施使错误消失：

1.  使用 Android SDK 管理器删除工具和当前 Android API 安装（然后重新启动）；
2.  删除我的文件系统中包含 Android SDK 文件的原始目录；
3.  下载新版本的 Android SDK 文件 (http://developer.android.com/sdk/index.html) 并在 Preferences=>Android 中将其在文件系统中的位置指定给 Eclipse；
4.  使用 Android SDK 管理器安装工具和当前 Android API 的新版本（然后重新启动）

我想知道定期更新协议中是否有问题。如果更新再次出错，我将从一开始就尝试完全卸载并重新安装 SDK 文件和 ADT 插件。

作为记录：

```
Mac OS 10.8.2 on 11-inch MacBook Air, Late 2010
Eclipse Version: Juno Service Release 1
Build id: 20121004-1855
Android tools: 21.0.0.v201210310015-519525 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-30T15:15:29.553

即使为 Eclipse 重新安装 Android 插件也没有让这个错误消失。

*作为记录（也就是我尝试过的）*
，我在我的 SDK 文件夹中查找了一个名为“find_java”的文件，但找不到任何文件（此处为 OS X）。修改此文件的其他答案建议的解决方案不是一个选项。

我还通过`About eclipse > Installation Details`. 此外，我尝试删除可能的剩余文件，为此我删除了这些文件/文件夹：

*   `/path_to_eclipse/features/com.android.*`（共找到 4 个文件夹，例如 com.android.ide.eclipse.adt_16.0.1.v201112150204-238534）
*   `/path_to_eclipse/plugins/com.android.`（发现 4`*.jar`例如 com.android.ide.eclipse.ddms_16.0.1.v201112150204-238534）

`Help > Install New Software`然后我按照通常的过程从 Eclipse 内部重新安装了插件。

注意：从 Eclipse 中启动 Android SDK 管理器，我得知我的软件是最新的！

**解决方案（？）**
使用安装的 Eclipse 插件，我从[dev.android.com](http://developer.android.com/sdk/index.html)下载了 SDK，解压缩到一个不错的位置（靠近你问我的海滩 ^^）并从 Eclipse 中引用它：`Eclipse > Settings > Android > SDK Location`.
在此之后似乎`dex.jar`错误消失了（即使在重新启动 Eclipse 后也保持一致）。

但是目前我的开放项目是`Unable to resolve target 'android-XX'`（X 通用版本号）。

我再次查看了 Android SDK 管理器，是的 - 现在它列出了很多已卸载的插件，所以目前我正在为各种 Android 级别重新安装 API。

将保持此帖子更新，但似乎下载和手动引用 SDK 可以解决问题。

# git - 如何从一个裸 git repo 推送到另一个？

> ID：13373617
> 
> 赞同：15
> 
> 时间：2012-11-14T05:43:18.223
> 
> 标签：git, version-control, github

我和来自一个大团队的其他几个人正在该项目的单独页面上工作。我们称它为群组页面。当我们在组页面上工作时，我们需要交换不完整的代码，我们不希望将这些代码发送到中央仓库。在此期间，我们还致力于与群组页面无关的功能，我们确实需要提交并推送到中央服务器。我正在寻找这个问题的解决方案，这是我的想法。请对他们发表评论。

由于更高层，我们无法在实际的回购服务器中建立分支。

1.  创建并通过电子邮件发送差异，然后丢失更改并在我们需要返回组页面时使用差异。收到电子邮件的人应用差异。等等
2.  我们对代码进行更改，提交它，但不要推送它。然后，任何需要不完整代码的人都可以直接从我们这里获取。
3.  使用 --bare 标志制作另一个中央服务器的克隆。因此，我们可以将其视为仅用于组页面的本地中央服务器。我们可以从中提取并为组页面创建一个单独的工作区。我们可以推动和拉动它。

现在这些都有问题。

1.  太乏味了。我想用 git 来做。
2.  当有人从我这里拉取，然后开发一个新功能，然后他推送（到中央服务器），那么他从我那里拉取的任何东西都不会被推送到服务器。当我们的群组页面代码完成时，他最终将如何将其推送到服务器。
3.  一样的问题。有没有办法从这个本地中央服务器推送到主服务器？当然，两者都是裸回购。有没有办法从一个裸克隆推送到主 github 存储库？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-14T05:56:12.027

3是你最好的选择。事实上，这就是 Git 的真正用途。带有用于单个组件的存储库，当工作完成时，这些存储库会馈送到更中央的存储库中。

推动别人的改变是没有问题的。假设您进行了更改，并将其推送到组页面存储库。然后我拉它，做一些改变，然后把它们推回去。现在我们决定我们已经完成了。如果我推送到中央存储库，该推送将包括我的更改以及我的更改所基于的您的更改。

您不需要从一个裸仓库推送到另一个。Git 通过从本地仓库推送到一个或多个远程仓库来工作。克隆时，有一个名为“origin”的默认远程仓库。但是您可以根据需要配置任意数量的远程存储库。要进行此设置，假设您已从中央仓库克隆；这就是所谓的“起源”。现在您创建一个裸仓库：它位于`ssh://some-machine.corp.com/path/to/groups-repo.git`. 在您当地的工作存储库中，只需执行`git remote add groups ssh://some-machine.corp.com/path/to/groups-repo.git`，您将获得对该组存储库的引用。现在您可以将`git fetch`,`git pull`等`git push`与`groups`以及 一起使用`origin`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-12-16T08:55:32.090

> 有没有办法从一个裸克隆推送到主 github 存储库？

是的，您不必在工作树中从裸仓库推送更改。

只需 ssh 到您“本地主人”所在的位置，然后运行：

```
git push origin master 
```

正如另一个答案指出的那样，您也可以直接从本地副本推送到远程主服务器，但有时更方便的是拥有这样的自动“看门人”存储库，可以触发将更改推送出去（例如，在审查之后）通过自动化到多个远程存储库，而不必担心为特定个人设置 ssh 密钥等来推出更改。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-14T05:58:48.213

为了简单起见，Git 是一个**分布式**版本控制系统。这意味着，无论何时从存储库克隆，都会克隆**整个**存储库。每个克隆都是完全独立的。实际上，您在机器上克隆的内容与服务器上的完全相同，您的克隆可以接收推/拉等（*唯一的区别可能是您不会让任何人通过 ssh 连接*）

因此，无论您采用哪种方式，如果您的同事从您那里撤出，他们可以将您的提交推送到主仓库。同样的事情也适用于选项 3，使用你的团队 git 服务器，当准备好时，你们中的一些人拉到他的机器并从那里推送到主服务器。

因此，在您的情况下，选项 3 将是最简单的。虽然，一旦你推送到主仓库，这个仓库将提供你在私人服务器中完成的所有工作。所以，我什至不确定拥有自己的服务器对您是否真的有用（除非您想确保没有其他人接触您的“私人”分支）。

# javascript - 如何使用 HTML5 或 Javascript 找到上传图像的分辨率？

> ID：13373619
> 
> 赞同：1
> 
> 时间：2012-11-14T05:43:26.640
> 
> 标签：javascript, image, html, resolution, dpi

我的应用程序使用 HTML5 中的 File API 来实现拖放功能。我还需要确保删除的文件遵循 72 像素/英寸的分辨率。

如何使用 HTML5 或 Javascript 找到图像的分辨率？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T05:48:58.487

DPI 是一种硬件测量，更具体地用于打印，并且不适用于在屏幕上查看时的图像数据。像素是一个像素，它的大小取决于您正在查看的屏幕的分辨率，而不是图像文件中的设置。

如果图像是 72 DPI 和 72 像素宽，它将显示为 72 像素宽。如果图像为 144 DPI 和 72 像素宽，它将在屏幕上显示为相同大小。但是，在打印中，144 DPI 图像的宽度将是 72 DPI 图像宽度的一半。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T08:23:11.103

这是一个（稍微过时的）[JavaScript EXIF Reader](http://blog.nihilogic.dk/2008/05/reading-exif-data-with-javascript.html)。

我还建议在 SO 上阅读[此答案。](https://stackoverflow.com/questions/7584794/accessing-exif-image-data-in-javascript)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-06T19:05:03.840

您可以使用[blueimp Javascript-Load-Image 库](https://github.com/blueimp/JavaScript-Load-Image#meta-data-parsing)。您可以使用 exif 数据解析方法从图像中解析图像 dpi 和其他信息。您可以根据需要从文件标签或图像 url 在本地加载图像。

大多数 jpeg 图像和原始图像格式将 dpi 信息存储在 exif 数据中。png 等其他格式没有 exif 数据的规定，因此如果不将它们实际加载到 Photoshop 等图像编辑工具中，就很难提取此类图像的 dpi。

# wix - 如何将参数传递给wix中的自定义操作方法

> ID：13373625
> 
> 赞同：1
> 
> 时间：2012-11-14T05:44:20.810
> 
> 标签：wix, parameter-passing, custom-action, wix3.6

我是使用 wix 工具创建 MSI 安装程序的新手，在这里我有一个疑问，请帮助我如何解决这个问题。我的查询是：**我创建了一个自定义 UI，在此我有一个组合框控件，并且我使用自定义 Action 方法将组合框值动态绑定，它工作正常。现在，我想将参数（组合框选择的值）传递给自定义操作方法，我不知道如何传递参数。我目瞪口呆，但我没有得到答案，请帮帮我。**

这是我的代码

```
 <Binary Id="CustomActions" SourceFile="D:\WIX Projects\ExampleSetup\CustomAction1\bin\Debug\CustomAction1.CA.dll" />
<CustomAction Id='Action1' BinaryKey='CustomActions' DllEntry='FillServerInstances' Execute='immediate' Return='check' />
<UI>
  <Dialog Id="CustomWelcomeEulaDlg" Width="600" Height="450" Title="!(loc.WelcomeEulaDlg_Title)">
    <Control Id="Bitmap" Type="Bitmap" X="0" Y="44" Width="600" Height="380" TabSkip="no" Text="MainImage" />
    <Control Id="Next" Type="PushButton" X="290" Y="430" Width="60" Height="17" Default="yes" Text="Next">
      <Publish Event="DoAction" Value="Action1">1</Publish>
      <Publish Event="NewDialog" Value="LicenseAgreementDlgs"><![CDATA[1]]></Publish>
      <Publish Event="ReinstallMode" Value="ecmus"><![CDATA[Installed = 1]]></Publish>
    </Control>
    <Control Id="Cancel" Type="PushButton" X="350" Y="430" Width="56" Height="17" Cancel="yes" Text="Cancel">
      <Publish Event="SpawnDialog" Value="CancelDlg">1</Publish>
    </Control>
    <Control Id="Title" Type="Text" X="15" Y="6" Width="300" Height="15" Transparent="yes" NoPrefix="yes">
      <Text>[DlgTitleFont]Welcome to the [ProductName] [Wizard]</Text>
    </Control>
    <Control Id="BannerLine" Type="Line" X="0" Y="44" Width="600" Height="0" />
   </Dialog> 
```

**最新代码**

```
 <Product Id="22d32870-651b-4eee-a622-27b2daaade8c" Name="Small Business" Language="1033" Version="1.0.0.0" Manufacturer="Small Business Manufacturing" UpgradeCode="01b2dc2f-61f3-4ff0-a0ba-94dd4cb0829d">

      <Package InstallerVersion="200" Compressed="yes" />

      <Property Id="MSIFASTINSTALL" Value="3" />
        <Binary Id="BIN_CustomAction" SourceFile="D:\WIX Projects\ExampleSetup\CustomAction1\bin\Debug\CustomAction1.CA.dll"/>
        <Binary Id="myAction" SourceFile="D:\WIX Projects\ExampleSetup\CustomAction1\bin\Debug\CustomAction1.CA.dll"/>
       <UIRef Id="WixUI_CustomMinimal" />

        <Media Id="1" Cabinet="media1.cab" EmbedCab="yes" />
         <Property Id="FILEPATH" />
                 <Directory Id="TARGETDIR" Name="SourceDir">
                 <Directory Id="ProgramFilesFolder">
                 <Directory Id="INSTALLLOCATION" Name="Small Business Manufacturing">
                   <Component Id="Component" Guid="af10d5b4-5d25-474f-8360-13b6c0cd7a53">
                    <File Id="Component" Source="D:\WIX Projects\Small Business Manufacturing\Small Business Manufacturing\bin\Debug\Myproject.exe" Compressed="yes" KeyPath="yes" Checksum="yes" />
                    </Component>

             </Directory>
             </Directory>
            </Directory>

                 <Feature Id="ProductFeature" Title="Installation Target" Level="1">
               <ComponentRef Id="Component" />
                </Feature>
                   <InstallExecuteSequence>
                  <Custom Action="myActionId" After="InstallFinalize"></Custom>
                  </InstallExecuteSequence>
              <CustomAction Id="SetCustomActionDataValue" Return="check" Property="myActionId" Value="AnotherValue=[Sqlinstaces]" />
        <UI>
          <ProgressText Action="RunEXE">Configuring Foo... (this may take a few minutes).</ProgressText>
        </UI>

      </Product> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T12:58:21.773

据我所知，您不能将参数传递给自定义操作。您可以在 Wix 中设置一个属性并使用它`WcaGetProperty`来访问它。

我使用类似这样的列表框：

```
<!--This will be populated via the custom action-->
    <Control Id="ListBoxID" Type="ListBox" Property="COMPORT" Width="80" Height="40" X="80" Y="165" Indirect="no">
      <ListBox Property="COMPORT">
      </ListBox>
    </Control> 
```

在我的 C++ 自定义操作中：

```
hr = WcaGetFormattedProperty(L"COMPORT",&szComport);
ExitOnFailure(hr, "failed to get Com Port"); 
```

编辑：

好的，所以我假设您的 ComboBox 是这样的：

```
 <Control Id="DummyComboBox" Hidden="yes" Type="ComboBox" Sorted="yes" ComboList="yes" Property="DUMMYPROPERTY" X="65" Y="60" Width="150" Height="18">
  <ComboBox Property="DUMMYPROPERTY">
  </ComboBox> 
```

确保您的属性是这样定义的（确保大写字母）：

```
 <Property Id="DUMMYPROPERTY" Secure="yes"></Property> 
```

您不需要自定义操作来发送属性值。您所要做的就是使用：

```
LPWSTR dummyText = NULL;

hr = WcaGetProperty(L"DUMMYPROPERTY", &dummyText);
ExitOnFailure(hr, "failed to get Dummy Text"); 
```

这是一个 C++ 自定义操作，不确定您使用的是什么，但快速的谷歌搜索会告诉您要使用的相关代码。

# android - 有没有办法为Android中的线程或应用程序分配高优先级？

> ID：13373627
> 
> 赞同：2
> 
> 时间：2012-11-14T05:44:45.500
> 
> 标签：android, streaming, datagram, thread-priority

我编写了一个 Android 应用程序，它接收 UDP 数据包（正在流式传输）并在收到它们时立即播放。该应用程序运行良好，直到我单击 Android 手机上的另一个应用程序，那时我可以听到咔嗒声。

有什么办法可以解决这个问题吗？我想如果我可以为负责接收和播放数据包的线程分配一个高优先级，或者我是否可以为这个应用程序分配一个高优先级可能会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T06:31:00.353

如果您尝试更改本机线程的优先级，那么这篇[文章](https://stackoverflow.com/questions/9019137/changing-thread-priority-doesnt-have-an-effect/9394426#9394426)可能会对您有所帮助。

# php - PDO 执行超时

> ID：13373628
> 
> 赞同：2
> 
> 时间：2012-11-14T05:44:49.717
> 
> 标签：php, optimization, pdo, execution-time

我将本机 PHP 代码转换为 PDO，因为它比本机代码更安全，现在当我尝试检索超过 10 条记录时，我在执行代码时遇到问题。我总是遇到这个致命错误：

致命错误：在第 13 行的 /home/user/public_html/folder/pdo/user_hashing.php 中超过了 30 秒的最大执行时间。

这是我的代码：

```
$pdo = Database::getInstance();
$stmt = $pdo->db->prepare("SELECT email, name, user_id FROM Users where page='' and reset='' order by user_id asc");
$stmt->execute();
while($row = $stmt->fetchObject())
{
    $id= $row->user_id;
    $str= $row->name."-".$row->user_id;
    $hash=md5($str) ;
    $stmt2 = $pdo->db->prepare("UPDATE Users SET request='1', reset='1', userhash=:userHash where page='' and user_id='$id' limit 1");           
    $stmt2->bindParam(':userHash', $hash);
    $stmt2->execute();
    unset($stmt2);
}
unset($pdo); 
```

每次脚本运行时，它最多只能检索和更新 10 条记录。之后，我会得到执行时间错误。

有没有其他方法可以防止这种情况？我从来没有使用原生 PHP 遇到过这种错误。而且，在 php.ini 中调整内存限制也不好。这是我以前知道的。

# python - python中的克隆进程支持

> ID：13373629
> 
> 赞同：12
> 
> 时间：2012-11-14T05:44:50.980
> 
> 标签：python

Python中是否支持系统调用[`clone(2)`](http://www.kernel.org/doc/man-pages/online/pages/man2/clone.2.html)（*not ）？* `os.fork`我想在 Python 下使用 Linux 命名空间，但似乎没有太多关于它的信息。

编辑：

我认为带有 libc 的 ctypes 是答案，但我仍然没有任何成功。fork 工作没有问题，因为它没有任何参数，然后这段代码工作：

```
from ctypes import *

libc = CDLL("libc.so.6")
libc.fork() 
```

使用克隆我正在尝试这个：

```
from ctypes import *

def f():
    print "In callback."
    return 0

libc = CDLL("libc.so.6")

f_c = CFUNCTYPE(c_int)(f)

print libc.getpid()
print libc.clone(f_c)
print get_errno() 
```

克隆实际上有这个签名：

int clone(int (*fn)(void *), void *child_stack, int flags, void *arg, ... /* pid_t *ptid, struct user_desc *tls, pid_t *ctid */ );

我仍然需要传递 *child_stack 和 flags 但不知道该怎么做。有什么帮助吗？

更多编辑：

我现在得到了这个：

```
from ctypes import *

def f():
    print "In callback."
    return 0

libc = CDLL("libc.so.6")

f_c = CFUNCTYPE(c_int)(f)
stack = c_char_p(" " * 1024 * 1024)
libc.clone(f_c, c_void_p(cast(stack, c_void_p).value + 1024 * 1024), 0) 
```

这实际上可行，但我想我用堆栈在我的系统中打了一个大洞，有一种更清洁的方法可以做到这一点吗？

编辑：

几乎完成，为 newpid 添加正确的标志：

```
from ctypes import *

libc = CDLL("libc.so.6")

def f():
    print libc.getpid()
    return 0

f_c = CFUNCTYPE(c_int)(f)
stack = c_char_p(" " * 1024 * 1024)
libc.clone(f_c, c_void_p(cast(stack, c_void_p).value + 1024 * 1024), 0x20000000) 
```

这不能仅针对 root 运行，并打印一个不错的 1。

在这篇文章之后，堆栈似乎很好：[http ://code.google.com/p/chromium/wiki/LinuxPidNamespaceSupport](http://code.google.com/p/chromium/wiki/LinuxPidNamespaceSupport)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-14T07:34:27.067

好吧，最后我想我得到了答案，就是将[ctypes](http://docs.python.org/2.7/library/ctypes.html)与 libc 一起使用，

这是一个简单的概念证明：

```
from ctypes import *

libc = CDLL("libc.so.6")

# Create stack.                                                                                                                                                                            
stack = c_char_p(" " * 8096)

def f():
    print libc.getpid()
    return 0

# Conver function to c type returning an integer.                                                                                                                                          
f_c = CFUNCTYPE(c_int)(f)

# We need the top of the stack.                                                                                                                                                            
stack_top = c_void_p(cast(stack, c_void_p).value + 8096)

# Call clone with the NEWPID Flag                                                                                                                                                          
libc.clone(f_c, stack_top, 0x20000000) 
```

这必须由 root 运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-08T01:58:52.407

如果您想拥有“fork() 但具有新命名空间”语义，则可以直接调用`SYS_clone`系统调用。请注意，如果这样做，该`os.getpid()`方法将在子进程中返回错误的进程 ID，因为 glibc 缓存了进程 ID，并且不知道`SYS_clone`调用以使其缓存无效。

假设 x86_64 ( `NR_clone == 56`, `NR_getpid == 39`)，您可以调用`libc.syscall(56, signal.SIGCHLD|0x000200000, 0 0 0)`“fork”，然后`libc.syscall(39)`获取“fork”子进程的当前 PID。

# node.js - 如何为用户名实现一次登录

> ID：13373632
> 
> 赞同：0
> 
> 时间：2012-11-14T05:45:06.277
> 
> 标签：node.js, express

我使用用户名和系统 ip 将所有会话 ID 存储在一个变量中，我仅将此数据用于用户名的一次登录。现在我有两个问题，有时浏览器中的新会话是在没有用户操作的情况下自动生成的，或者如果用户删除了与我的服务器相关的 cookie。所以用户正在使用新会话，我需要从列表中删除用户名、系统 ip 和会话 ID。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T05:55:27.057

由于用户没有在您的网站上做任何明确的事情，您无法知道“丢失 cookie”和“有一段时间没有访问该网站”之间的区别。对于这样的方案，你能做的最好的事情就是让一周、一个月或一年或任何适当的时间都没有活动的会话到期。

如果您希望允许用户“永远”保持登录状态而不占用服务器上的资源，您应该考虑使用带有登录用户的用户 ID 的加密/散列 cookie 而不是会话。

# c# - 改变应用程序视图的菜单项

> ID：13373643
> 
> 赞同：1
> 
> 时间：2012-11-14T05:46:19.237
> 
> 标签：c#, .net

我一直在[这个教程上上下下](http://www.homeandlearn.co.uk/csharp/csharp.html)。

我一生都无法弄清楚我的应用程序何时加载到一个屏幕，然后单击一个菜单项以显示另一个屏幕。我有多种形式的想法，但这是我需要的解决方案吗？

根据我的阅读，我理解新表单本质上是新窗口。如果那是正确的，那听起来不像我需要的。

我的用户从菜单以外的空白窗口开始（我稍后会填写），但我想`File -> Settings`加载一个设置表单。理想情况下不在新窗口中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T05:49:38.110

它是一个 MDI 窗口。它们是其他窗口的窗口容器。

您创建一个父窗体，然后更改哪个子窗体是菜单项单击事件上的活动窗体。这需要您为文档的每个不同视图创建一个父 MDI 表单和一个子 MDI 表单。然后菜单项切换哪个子 MDI 窗体是活动的。

# java - struts 2中的数据库访问

> ID：13373648
> 
> 赞同：4
> 
> 时间：2012-11-14T05:47:00.363
> 
> 标签：java, jdbc, struts2, persistence

我在 java 动作类文件中使用 JDBC 驱动程序来访问 struts 2 中的数据库。但正如[本](http://struts.apache.org/1.2.8/faqs/database.html)网站所述，还有另一种方法可以使用`struts.xml`文件中的标记访问 struts 中的数据库。但这在 struts 2 中对我不起作用。我的问题是除了使用 JDBC 驱动程序之外，还有其他更有效的方法来访问 struts2 中的数据库，因为我每次访问任何操作类文件时都必须建立连接？而且我没有使用hibernate，只想使用Struts。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T08:47:47.743

在 Java EE Web 应用程序中，数据库连接应该在 EJB 内进行管理和池化，war 应该对数据源或数据库连接细节一无所知。

如果您可以选择在您的 Web 应用程序中包含哪些技术，我强烈建议让 Spring 管理您的数据库连接。

[Struts2 + Spring 集成的示例](http://www.tutorialspoint.com/struts_2/struts_spring.htm)。

注意：Spring 库与 Spring MVC 无关，后者是 Struts2 的替代框架。

* * *

> **编辑**
> 
> 事情发生了变化，现在对于持久性/ORM，我建议纯**Java EE**的**JPA2** over Spring。

# android - 检测到我的应用小部件的数据不是最新的

> ID：13373654
> 
> 赞同：0
> 
> 时间：2012-11-14T05:47:23.340
> 
> 标签：android, android-service, alarmmanager, android-appwidget

我正在编写一个 Android 应用程序小部件，它每分钟都会使用当前数据进行更新。要更新它，我正在使用`AlarmManager`仅在手机未睡着时才有效的方法：

```
 AlarmManager alarmManager = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE);
    alarmManager.setRepeating(AlarmManager.RTC, calendar.getTimeInMillis(), INTERVAL_SEC * 1000, createFrequentUpdateIntent(context)); 
```

但是，我面临以下挑战：当手机在很长一段时间后唤醒时，我希望用户立即看到数据已经过时，因为它已经好几个小时没有更新了。因此，如果很长时间没有更新，我想以某种方式将数据标记为过时。

我考虑过挂钩`SCREEN_ON`事件，但显然这只能通过后台服务实现，强烈建议不要这样做（[here](https://stackoverflow.com/questions/2577318/is-it-possible-to-write-an-android-broadcast-receiver-that-detects-when-the-phon)和[here](http://www.androidguys.com/2010/03/29/code-pollution-background-control/)）。

你对如何做到这一点有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T06:31:20.003

也许除了 AlarmManager 之外，您还可以使用典型的`updateTimeMills`更新方法，并且每隔 30m 左右调用一次。当您通过此方法获得更新时，您可以用布局的“陈旧数据”版本替换小部件，这样当手机重新打开时，它已经被陈旧数据通知重绘。

如果在您的手机开机时触发此更新，您可以检查最近一次更新的时间，如果数据不是陈旧的，则忽略它。

我认为这会起作用，因为`updateTimeMills`即使手机睡着了也会调用更新，所以当你的 AlarmManager 停止时它仍然应该更新。

# java - 实体类总是需要 ID 吗？

> ID：13373655
> 
> 赞同：0
> 
> 时间：2012-11-14T05:47:26.540
> 
> 标签：java, database, hibernate, entity

好吧，我想知道我们是否总是需要在实体类中有一个 id 字段？我听说在你的实体类中总是有一个 id 字段是一种不好的做法，因为它绑定到数据库，即使你可能根本不需要数据库。

就我而言，我有这样的课程：

```
public class User {
private String firstName = "";
private String lastName = "";
private String personCode = "";
private Date birthDate = new Date();
private Gender gender = Gender.MALE;
private String email = "";
private String password = "";
private UserState userState = UserState.UNAPPROVED; 
```

在我的例子中，我用他们的电子邮件地址来识别用户。这个类作为数据库中的表的等价物确实有一个额外的 userId 字段，它唯一地标识它。现在我在问我是否需要在这个 java 类中添加一个 idUser 字段？

我已经设法用 Hibernate 像这样映射它：

```
<class
    name="User"
    table="User"
    discriminator-value="U" >

    <!-- <id column="idUser" type="long" /> this one wouldn't even work... -->
    <id name="email" />

    <discriminator column="discriminator" type="string" />

    <property name="firstName" />
    <property name="lastName" />
    <property name="personCode" />
    <property name="birthDate" type="date"/>

   <property name="userState" column="userState" length="15">
         <type name="org.hibernate.type.EnumType">
              <param name="enumClass">com.nortal.pirs.datamodel.enumeration.UserState</param>
              <param name="type">12</param>
          </type>
    </property>

    <property name="password" />

     <property name="gender" column="gender" length="15">
         <type name="org.hibernate.type.EnumType">
              <param name="enumClass">com.nortal.pirs.datamodel.enumeration.Gender</param>
              <param name="type">12</param>
          </type>
    </property>

     <subclass name="Patient" extends="User" discriminator-value="P" >
         <property name="additionalInfo" column="additionalInfo" />

     </subclass>

     <subclass name="SpiProfessional" extends="User" discriminator-value="S" />

</class> 
```

现在扩展 User 的 Patient 和 SpiProfessional 有他们唯一的 id，这也是愚蠢的，这也只在数据库中可见。

到目前为止，我还没有设法通过休眠来保存 Patient 和 SpiProfessional。我收到此错误：

```
2012-11-14 07:36:44,265 [main] WARN  org.hibernate.engine.jdbc.spi.SqlExceptionHelper - SQL Error: 1054, SQLState: 42S22
2012-11-14 07:36:44,266 [main] ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper - Unknown column 'additionalInfo' in 'field list' 
```

任何人都可以向我解释在 java 类中有 id 吗？还有人知道如何用hibernate解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T05:57:13.397

它可能有助于定义您对实体的理解。如果您正在考虑“只是一个带有数据库后端的对象”，那么您并没有了解全部情况。

Eric Evans 将[领域驱动设计中的实体](http://lostechies.com/joeocampo/2007/04/15/a-discussion-on-domain-driven-design-entities/)定义为：

> ““主要由其身份定义的对象称为实体。” [埃文斯 2003]"
> 
> 实体是在生命周期中具有连续性的任何事物，并且与对应用程序用户很重要的属性无关。[埃文斯 2003]

这里需要注意的重要一点是，在应用程序的任何级别，对象都应该是唯一可识别的，并且有一个生命周期，它将改变状态（并可能触发事件），那么有一些唯一标识它的属性概念。

基于整数的 id 历来被用于提高效率：在计算上判断 2 个数字是否相等比对不同属性进行重复比较更容易。

# c++ - system() 使用 C++ 在 Window 7 上调用 .exe [权限问题]

> ID：13373659
> 
> 赞同：0
> 
> 时间：2012-11-14T05:47:42.300
> 
> 标签：c++, windows

我是 C++ 程序员和 Stackoverflow 的初学者

我正在尝试使用`system()`从我的程序中调用 .exe 来将 RTF 转换为纯文本，方法是：

```
system("converter.exe convert doc.doc > doc.txt") 
```

根据我对`system()`==>>的理解`system("program.exe arg1")`。当我编译这段代码时，它会调出converter.exe，但它没有给我输出（.txt）。我得出的结论是，Visual Studio 2010 使用非管理 CMD 打开这个 .exe，程序只弹出 1 秒然后消失（我也需要在执行之前按“确定”）。

任何建议如何以`system()`管理员权限运行？

PS：我尝试更改 .exe 上的“以管理员身份运行”，但系统似乎不允许我更改任何内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T07:19:18.580

如果您确实需要管理员权限，请考虑使用[runas](http://msdn.microsoft.com/de-de/library/cc772672.aspx)：

> system("runas /user:foo \"converter.exe 转换 doc.doc > doc.txt\"")

# c - 多个VC编译错误

> ID：13373662
> 
> 赞同：1
> 
> 时间：2012-11-14T05:48:03.853
> 
> 标签：c, visual-c++, compiler-errors, int128

我正在使用 VC++ 在 C 中编写一个 128 位整数“类”（将标头包装在`extern "C"`块中），但是，在例程构建以检查错误期间，我在添加此函数后遇到了很多：

```
/* Negate (2s compliment NOT) a 128-bit integer */
INT128_INLINE void int128_neg(int128_t *ret, int128_t arg)
{
    /* 2s compliment negation is equivalent to ((~value) + 1) */

    int128_t one;
    int128_from_i8(&one, 1);

    int128_t inv;
    int128_inv(&inv, arg);

    int128_add(ret, one, inv);
} 
```

本质上，如果不够清楚，它会找到给定的负数 (-x) `int128_t`。这是`int128_t`结构：

```
/* Work at the byte level to work around endianess crap */
/* (speaking of which, this is big endian, at least is should be) */
#pragma pack(1)
struct _int128_t
{
    /* SIGN BIT: 0xxxxxxx = positive; 1xxxxxxx = negative */
    uint8_t byte01; /* MSB */
    uint8_t byte02;
    uint8_t byte03;
    uint8_t byte04;
    uint8_t byte05;
    uint8_t byte06;
    uint8_t byte07;
    uint8_t byte08;
    uint8_t byte09;
    uint8_t byte10;
    uint8_t byte11;
    uint8_t byte12;
    uint8_t byte13;
    uint8_t byte14;
    uint8_t byte15;
    uint8_t byte16; /* LSB */
};

/* A 128-bit integer structure and functions written in pure C99 code :) */
typedef struct _int128_t int128_t; 
```

和函数原型：

```
/* Invert (~) a 128-bit integer */
INT128_INLINE void int128_inv(int128_t *ret, int128_t arg) { ... }

/* Add two 128-bit integers together */
INT128_INLINE void int128_add(int128_t *ret, int128_t lhs, int128_t rhs) { ... } 
```

和`INT128_INLINE`（显然使用了设置它的那个`__inline`）：

```
/* MC++ requires `__inline`*/
#ifdef _MSC_VER
#  define INT128_INLINE __inline
#else
   /* use standard inline */
#  define INT128_INLINE inline
#endif 
```

现在，我收到的功能错误是：

```
Error   24  error C2275: 'int128_t' : illegal use of this type as an expression d:\libplist\libplist\include\int128.h   313 1   libplist
Error   25  error C2146: syntax error : missing ';' before identifier 'inv' d:\libplist\libplist\include\int128.h   313 1   libplist
Error   26  error C2065: 'inv' : undeclared identifier  d:\libplist\libplist\include\int128.h   313 1   libplist
Error   28  error C2065: 'inv' : undeclared identifier  d:\libplist\libplist\include\int128.h   314 1   libplist
Error   29  error C2065: 'inv' : undeclared identifier  d:\libplist\libplist\include\int128.h   316 1   libplist
Error   30  error C2440: 'function' : cannot convert from 'int' to 'int128_t'   d:\libplist\libplist\include\int128.h   316 1   libplist
Error   32  error C2371: 'int128_inv' : redefinition; different basic types d:\libplist\libplist\include\int128.h   324 1   libplist 
```

在你问之前，第 313 行是`int128_t inv;`. 而且，`libplist`我正在开发的 Apple PList 库`libxml2`与 iTunes 数据库一起使用（`C:\Users\{YOU}\My Music\iTunes\iTunes Library.xml`）

我尝试重写该函数以确保它不是一些奇怪的 Unicode 废话（就像人们使用 R2L char 进行巨魔一样），但它没有帮助。我试过做`int128_t inv = *ret;`，但这只是给出：

```
Error   27  error C2440: '=' : cannot convert from 'int128_t' to 'int'  d:\libplist\libplist\include\int128.h   313 1   libplist 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T20:24:38.083

```
int128_t one;
int128_from_i8(&one, 1);

int128_t inv;
int128_inv(&inv, arg); 
```

*这不是有效的 C89 代码，因为 C89 要求在函数顶部*声明所有变量，而 Visual C 仅支持 C89。声明必须出现在函数中的语句*之前。*因此，如果您真正使用的是 C 编译器（而不是 C++ 编译器），这将导致错误。你应该做的是：

```
int128_t one;
int128_t inv;

int128_from_i8(&one, 1);
int128_inv(&inv, arg); 
```

* * *

此外，此评论不正确：

```
/* A 128-bit integer structure and functions written in pure C99 code :) */ 
```

如果您使用 Visual C，它是**C89**，*而不是 C99*，出于上述原因。微软表示，他们永远不会支持任何晚于 C89 的 C 标准，因为他们认为这样做不值得，每个人都应该改用 C++ 或 C#。我不喜欢它，但我对此无能为力；所以，无论如何。

# lookup - 具有查找功能的标准 ML 和查找表

> ID：13373664
> 
> 赞同：1
> 
> 时间：2012-11-14T05:48:11.467
> 
> 标签：lookup, sml, ml

使用折叠函数 SML 创建查找函数

我需要在标准 ML 中创建一个名为 lookup(k, table) 的函数，如果 k 不是查找表中的键，则返回 NONE，如果 (k,v) 在表中则返回 (SOME (k,v))。例如lookup(3, [(1,4),(14,5),(7,3),(22,6]) 是NONE，而lookup (1,[(1,4),(14,5) ,(7,3,(22,6)]) 是 (一些 (1,4))。

我想使用这个查找功能：

```
fun find pred [] = NONE
  | find pred (x::rest) = if pred x then SOME x else find pred rest; 
```

这是我到目前为止所拥有的：

```
fun lookup(k,table) = NONE
 | lookup(k, find(k,table)) =
    if k = SOME then SOME else NONE; 
```

请帮帮我，因为这个 ML 问题，我一直在拔头发。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T08:56:35.737

我相信您在这里将模式匹配与功能应用程序混淆了。在函数定义中，您可以进行模式匹配，即如果函数实际调用的参数与为参数指定的模式（由构造函数和变量组成）匹配，则定义适用的情况。您不能做的是在函数定义的等号左侧调用函数：使用*find* in`... | lookup(k, find(k, table))`是无效的。

*此代码将返回表中*键匹配*k*的第一个键值对：

```
fun lookup(k,table) = 
  find (fn (key, value) => key = k) table 
```

它使用函数*find*来遍历表；*find*将使用抽象分解*表*`fn (key, value) => key = k`中的每个键值对并检查键是否匹配*k*。*lookup*将返回*find*的结果，如果*(k, x)*在*table*中，则为 ，否则为 。****`SOME x`**`NONE`******

# c# - 对象引用未设置为对象 #2 的实例

> ID：13373667
> 
> 赞同：0
> 
> 时间：2012-11-14T05:48:31.070
> 
> 标签：c#, asp.net, .net, exception-handling, findcontrol

我收到以下错误消息：

> 你调用的对象是空的。

代码隐藏：

```
public partial class Edit : System.Web.UI.Page
{
    private TextBox updated_time;

    protected void Page_Load(object sender, EventArgs e)
    {
        updated_time = (TextBox)ABC_DV.FindControl("txt_updated_time");
        updated_time.Text = DateTime.Now.ToString();
    }
} 
```

我怎么能解决这个问题？

**更新**

```
<asp:DetailsView ID="ABC_DV" runat="server" AutoGenerateRows="False"
        DefaultMode="Edit" DataKeyNames="TYPE_ID" DataSourceID="ABC_EDS">
        <Fields>
            <asp:TemplateField HeaderText="Type Id" SortExpression="TYPE_ID">
                <EditItemTemplate>
                    <asp:TextBox ID="txt_type_id" Width="200" runat="server" Text='<%# Bind("TYPE_ID") %>'></asp:TextBox>
                </EditItemTemplate>
                <InsertItemTemplate>
                    <asp:TextBox ID="TextBox1" runat="server" Text='<%# Bind("TYPE_ID") %>'></asp:TextBox>
                </InsertItemTemplate>
                <ItemTemplate>
                    <asp:Label ID="Label1" runat="server" Text='<%# Bind("TYPE_ID") %>'></asp:Label>
                </ItemTemplate>
            </asp:TemplateField>        
            <asp:TemplateField HeaderText="Updated Time" SortExpression="UDPATED_TIME">
                <EditItemTemplate>
                    <asp:TextBox ID="txt_updated_time" Width="200" runat="server" Text='<%# Bind("UDPATED_TIME") %>'></asp:TextBox>
                </EditItemTemplate>
                <InsertItemTemplate>
                    <asp:TextBox ID="TextBox2" runat="server" Text='<%# Bind("UDPATED_TIME") %>'></asp:TextBox>
                </InsertItemTemplate>
                <ItemTemplate>
                    <asp:Label ID="Labe2" runat="server" Text='<%# Bind("UDPATED_TIME") %>'></asp:Label>
                </ItemTemplate>
            </asp:TemplateField>            
        </Fields>
    </asp:DetailsView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T06:08:11.890

好的，您需要考虑`DetailsView`尝试访问控件时所处的模式，如果它不在编辑模式下，它将不会存在于层次结构中，从而导致在`Page_Load`没有编辑模式的情况下调用它时爆炸`DetailsView`。向您的代码添加一些检查以正确处理控件状态。

```
protected void Page_Load(object sender, EventArgs e)
{
    if (ABC_DV.CurrentMode == DetailsViewMode.Edit) {
      updated_time = (TextBox)ABC_DV.FindControl("txt_updated_time");
      if(null != updated_time)
        updated_time.Text = DateTime.Now.ToString();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T05:55:30.263

```
TextBox updated_time = ABC_DV.FindControl("txt_updated_time") as TextBox;
if (updated_time  != null)
{
    updated_time.Text = DateTime.Now.ToString();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T05:55:58.690

当您点击该`Page_Load`方法时，您的控件应该已经重建并重新添加到页面中。您此时收到错误的事实表明特定控件不存在 - 至少不存在您指定的 ID。

尝试将代码移动到您的`PreRender()`- 这是在页面呈现到响应流之前执行的方法，如果您添加了动态控件或弄乱了控件的 ID，那么这应该在此阶段之前发生。

# doctrine - 如何在 Symfony2 Doctrine 中使用级联选项？

> ID：13373668
> 
> 赞同：15
> 
> 时间：2012-11-14T05:48:35.027
> 
> 标签：doctrine, cascade

我试图了解**Symfony2中****Doctrine**中的[`cascade`](http://docs.doctrine-project.org/projects/doctrine-orm/en/2.0.x/reference/working-with-associations.html#transitive-persistence-cascade-operations)选项。

 ****我希望能够删除一个子实体（而不是触发外键约束错误。）

我有 3 个实体：

**报告**

```
/**
* @ORM\OneToMany(targetEntity="Response", mappedBy="report")
*/
protected $responses;

/**
* @ORM\OneToMany(targetEntity="Response", mappedBy="report")
*/
protected $sms; 
```

**回复**

```
/**
 * @ORM\ManyToOne(targetEntity="Report", inversedBy="responses")
 */
protected $report; 
```

**短信**

```
/**
 * @ORM\ManyToOne(targetEntity="Report")
 */
protected $report; 
```

现在我想删除一个`Response`实体，但我得到了

> SQLSTATE [23000]：完整性约束违规：1451 无法删除或更新父行：
> 外键约束失败（`mybundle`. `sms`, CONSTRAINT `FK_B0A93A77BB333E0D`FOREIGN KEY ( `reportId`) REFERENCES `report`( `id`)）

我在哪里使用该`cascade`选项以及我应该使用哪个选项（`detach`或`remove`）？

我可以做很多试验和错误来解决这个问题，但我希望得到专家的解释，所以我不会忽略一些事情。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-14T06:51:38.117

尝试使用

```
/**
 * @ORM\ManyToOne(targetEntity="Report", inversedBy="responses")
 * @ORM\JoinColumn(name="reportId", referencedColumnName="id", onDelete="CASCADE")
 */
protected $report; 
```

然后更新你的架构。它将添加数据库级级联

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-15T05:11:13.367

Ziumin的回答

> 使用`onDelete`选项`ORM JoinColumn`

当您要删除子项（[拥有方](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/unitofwork-associations.html)）时，该方法有效。

但是，如果您想删除作为`Response`父项 ( [Inverse Side](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/unitofwork-associations.html) ) 的 a ，这`cascade`将派上用场。在`Report`实体中，我为其每个集合（OneToMany 关系）添加了以下内容：

**报告**

```
/**
* @ORM\OneToMany(targetEntity="Response", mappedBy="report", cascade={"remove"})
*/
protected $responses;

/**
* @ORM\OneToMany(targetEntity="SMS", mappedBy="report", cascade={"remove"})
*/
protected $sms; 
```

现在，当我删除 a 时，它会删除和表`Report`中的所有关联条目。`Response``SMS`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-11T16:58:13.913

您也可以`cascade=all`用于更新所有操作。

**报告**

```
 /**
 * @ORM\OneToMany(targetEntity="Response", mappedBy="report", cascade={"all"})
 */
protected $responses;

 /**
 * @ORM\OneToMany(targetEntity="SMS", mappedBy="report", cascade={"all"})
 */
protected $sms; 
```****

# java - 在 Linux 上的 Java EE 应用程序中调用 dll 文件

> ID：13373669
> 
> 赞同：0
> 
> 时间：2012-11-14T05:48:40.837
> 
> 标签：java, linux, jakarta-ee, dll, redhat

我有一个使用 struts、Hibernate 和 spring 在 redhat 上运行的 Java Web 应用程序。我将搜索有关在我的应用程序中调用 dll 文件、其漏洞和后果的信息。任何人都可以帮助我解决问题和错误或错误，或者也许不可能这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T05:53:00.493

好吧，为了您的帮助，Microsoft 提供了一种使用 JNI 调用 DLL 的方法 [http://support.microsoft.com/kb/222092](http://support.microsoft.com/kb/222092)

除此之外，您还可以查看之前的帖子 [如何在 Java 中调用 dll？](https://stackoverflow.com/questions/771145/how-do-i-call-dll-inside-java)

IBM 关于 JNI 的教程也将证明是有用的 [http://www.ibm.com/developerworks/java/tutorials/j-jni/](http://www.ibm.com/developerworks/java/tutorials/j-jni/)

要在 Linux 环境中运行 dll，您可能需要[WINE](http://www.winehq.org/)或[Crossover](http://www.codeweavers.com/products/)等模拟器。但是我不能保证你会成功，因为 Wine 和 Crossover 都不是 100% 兼容 Windows 的。

# objective-c - iOS UI 自定义按钮图片

> ID：13373670
> 
> 赞同：0
> 
> 时间：2012-11-14T05:48:44.363
> 
> 标签：objective-c, ios, xcode

我正在开发一个使用圆形自定义 UIButtons 的 iOS 应用程序。我想将图像添加到这些按钮，并想知道我是否使用 IB 从我的项目中选择图像，我是否还需要担心用于视网膜显示的 2x 视网膜图像？当我从 IB 嵌入非视网膜和视网膜设备（所有 iPhone（包括 iphone 5）和 iPad，包括 mini）时，它们的图像尺寸应该是多少？

互联网上有没有最好的资源来获取这些按钮的 pngs 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T05:54:37.073

这很容易。转到界面生成器，在右侧面板上你会看到这个 -

![在此处输入图像描述](../Images/90f610e6b49690a574ce61e29d168b59.png)

您需要做的就是首先配置您的按钮，`custom`然后通过 xcode 在项目中包含一个图像文件，然后您可以在背景或图像属性的下拉列表中选择该图像。

请注意，所有这些也可以通过代码完成，只是 IB 使其具有交互性。希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T05:57:13.693

是的，您应该使用所有图像。您应该只将具有正确名称的图像添加到资源文件夹中。并且只需选择编译器将处理的非视网膜图像。

[http://www.idev101.com/code/User_Interface/sizes.html](http://www.idev101.com/code/User_Interface/sizes.html)

上面的链接将帮助您了解图像尺寸

# php - Google Chrome 中的 PHP 标头函数问题

> ID：13373674
> 
> 赞同：0
> 
> 时间：2012-11-14T05:48:51.813
> 
> 标签：php, google-chrome

成功登录后（即用户在输入用户名和密码后单击登录按钮），根据用户类型，我想将用户发送到特定页面。下面是我的代码。（这里，如果usertype是'employee'，他应该在点击'login'按钮后被带到“data-update.php”页面。）

这是 index.php 页面中的代码：

```
// This file is the home page.

// Require the configuration before any PHP code as the configuration controls error reporting:
require ('config.inc.php');

// The config file also starts the session.

// Require the database connection:
require (MYSQL);

// If it's a POST request, handle the login attempt:
if ($_SERVER['REQUEST_METHOD'] == 'POST') {
    include ('login.inc.php');
}

/* PAGE CONTENT STARTS HERE! */
?>
<!DOCTYPE html>
<html lang="en">
<head>
... 
```

这是 login.inc.php 页面中的代码：

```
<?php 

// This is the login page for the site.
// It's included by index.php, which receives the login form data.

// Array for recording errors:
$login_errors = array();

// Validate the username:

// Validate the password:

if (empty($login_errors)) { // OK to proceed!

// Query the database:
$q = "SELECT id, type FROM users WHERE (username='$u' AND pass='"  .  get_password_hash($p) .  "')";        
$r = mysqli_query ($dbc, $q);

if (mysqli_num_rows($r) == 1) { // A match was made.

    // Get the data:
    $row = mysqli_fetch_array ($r, MYSQLI_NUM); 

    // Store the data in a session:
    $_SESSION['user_id'] = $row[0];
    $_SESSION['username'] = $u;     

    if ($row[1] == 'employee') {
        reset_sms_update_session();
        header("Location: http://".BASE_URL."data-update.php");                         
        exit;
    }
    elseif ($row[1] == 'client'){
        header("Location: http://".BASE_URL."About.html");
        exit;
    }

... 
```

这是“data-update.php”页面中的部分代码：

```
 // Start the session:
 session_start();

function redirect_invalid_user($check = 'user_id', $destination = 'index.php', $protocol = 'http://') {

// Check for the session item:
if (!isset($_SESSION[$check])) {
    $url = $protocol . BASE_URL . $destination; // Define the URL.
    header("Location: $url");
    exit(); // Quit the script.
}

} // End of redirect_invalid_user() function.

//Redirect to index.php if user not logged in
redirect_invalid_user( );

/* PAGE CONTENT STARTS HERE! */
?>
<!DOCTYPE html>

... 
```

问题是，在谷歌浏览器中，当用户单击登录按钮时，他首先被带到 index.php 页面（发生重定向的地方），然后他必须再次单击登录按钮才能被带到“data-update.php “ 页。为什么在 Google Chrome 中会发生这种情况？（仅供参考：这不会发生在我本地 PC 的 XAMP 测试环境中。）

这不会在 Firefox 或 IE8 中发生（即用户在第一次单击登录按钮时会被带到“data-update.php”）。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T10:07:28.807

`http://example.com`我通过在我的网络服务器中为to设置来自 CPanel 的永久重定向来解决这个问题`http://www.example.com`。

# css - 将对象从一个div拖放到另一个div时如何保留格式

> ID：13373676
> 
> 赞同：2
> 
> 时间：2012-11-14T05:49:01.573
> 
> 标签：css, jquery-ui-draggable, jquery-droppable

当一个对象从一个 div 拖放到另一个 div 时，li 中的格式只会更改为文本。我希望它具有相同的格式和样式，即删除后的“li”。

```
$(function() {

      $("#catalog ul").sortable({
        zIndex: 10000,
        revert: true
      });
      $("#catalog").accordion();
      $("#catalog ul").draggable({
        appendTo: "body",
        helper: "clone",
        zIndex: 10000
      });

      $("#dialogIteration ol").droppable({

        activeClass: "ui-state-default",
        hoverClass: "ui-state-hover",

        drop: function(event, ui) {
          $(this).find(".placeholder").remove();
          $("<li></li>").text(ui.draggable.text()).appendTo(this);
        }
      }).sortable({
        items: "li:not(.placeholder)",
        sort: function() {

          // gets added unintentionally by droppable interacting with sortable
          // using connectWithSortable fixes this, but doesn't allow you to customize active/hoverClass options
          $(this).removeClass("ui-state-default");
        }
      });

      $("ul, li").disableSelection();
      $("#dialogIteration").dialog();
    }); 
```

[示例代码在这里](http://jsfiddle.net/coolanuj/7683X/56/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T07:40:19.453

原始列表中项目的样式`<li class="ui-state-default"/>`由 CSS 规则定义：

```
.ui-state-default, .ui-widget-content .ui-state-default, .ui-widget-header .ui-state-default {
  border: 1px solid lightGrey;
  background: #E6E6E6 url(images/ui-bg_glass_75_e6e6e6_1x400.png) 50% 50% repeat-x;
  font-weight: normal;
  color: #555;
}

... 
```

将其拖到新容器并放下后，您创建了另一个元素来保存与`$("<li></li>").text(ui.draggable.text())`原始元素不具有相同 className 的内容，因此样式被撕掉了。

您可以通过将其更改为来修复它

```
$('<li class="ui-state-default" />').text(ui.draggable.text()).appendTo( this ) 
```

# javascript - JQuery 列计算

> ID：13373685
> 
> 赞同：2
> 
> 时间：2012-11-14T05:49:41.777
> 
> 标签：javascript, jquery, javascript-events

我需要有关此代码 [http://jsfiddle.net/N5xTJ/1/的帮助](http://jsfiddle.net/N5xTJ/1/)

最后一列通过 Jquery 已经是动态的。计算“包装数量”x“价格”然后在底部总计

我需要帮助计算总数量`<TD CLASS="QTY">`，它会在“totalsqty”中显示结果

同样对于“TotalUnits”需要计算“Qty”X“Units Per Pack”并显示在“Total Units”中

我在这里先向您的帮助表示感谢

当前正在为#Total Price 计算总计的 JS

```
function ca(){
    var $overall = 0;

    $("tr.sum").each(function() {
         var $row=$(this);
        var $qnt = $(this).find(".qty");
        var cost = $row.data('unit_price');        

        var sum = cost * parseFloat($qnt.val());

        $(this).find("td").eq(5).text('$' +sum);

        $overall += sum;

    });

    $("#total").text('$' +$overall);
}

$(function() {

    ca();
    $('input.qty').bind('change keyup', ca);

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T05:59:03.080

试试这个小提琴：http: [//jsfiddle.net/N5xTJ/4/](http://jsfiddle.net/N5xTJ/4/)

我已经更新了您现有的代码，以适应`totalUnits`和`totalQty`.

**代码（带注释）：**

```
 function ca() {
    var $overall = 0,
        totalQty = 0,
        totalUnits = 0;

    $("tr.sum").each(function() {
        var $row = $(this),
            qnt = parseInt($(this).find("input.qty").val()),
            cost = $row.data('unit_price'),
            sum = cost * qnt,
            upp = parseInt($row.find('.upp').text());

        $row.find('span.t-units').text(upp * qnt);
        $(this).find("td").eq(5).text('$' + sum);
        totalQty += qnt;
        totalUnits += parseInt($row.find('span.t-units').text());
        $overall += sum;

    });

    $("#total").text('$' + $overall);
    $('#totalqty').text(totalQty);
    $('#totalunits').text(totalUnits);
}

$(function() {

    ca();
    $('input.qty').bind('change keyup', ca);

});​ 
```

我还对代码进行了一些清理，因此请看一下，如果您有任何问题，请告诉我。

# python - 否则，如果在 Python 2.7 中

> ID：13373694
> 
> 赞同：-2
> 
> 时间：2012-11-14T05:50:27.067
> 
> 标签：python

这段代码的目的并不重要，但我遇到了缩进错误。它们通常是非常明显的修复，但在这种情况下，我不明白为什么会出现错误。

```
group=0
for i in range(0,len(line)):
   for j in range(0,len(both)):
        if both[j]==line[i]:
        elif both[j]==line[i]-1:
                group+=1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T05:52:32.907

如果您的 if 块中没有任何内容，如果您不想发生任何事情，请使用`pass`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T06:46:33.403

问题是一个空块 - 你必须在`if`条件之后有一些东西，你可以使用 do-nothing 关键字`pass`。

由于除了索引容器之外，您没有使用`i`or`j`来进行任何操作，因此直接迭代容器也更具pythonic和可读性，如下所示：

```
group = 0
for i in line:
  for j in both:
    if j == i:
      pass
    elif j == i - 1:
      group += 1 
```

# c - 如何删除 gcc 4.6 中的警告：缺少初始化程序 [-Wmissing-field-initializers]？

> ID：13373695
> 
> 赞同：8
> 
> 时间：2012-11-14T05:50:28.187
> 
> 标签：c, gcc, struct, warnings, glib

编码：

```
 GValue value = { 0 }; 
```

给出以下警告：

> 缺少初始化程序 [-Wmissing-field-initializers]

我知道那是一个[`gcc's BUG`](https://stackoverflow.com/questions/1538943/why-is-the-compiler-throwing-this-warning-missing-initializer-isnt-the-stru)；但是有什么技巧可以删除它吗？看到这样不真实的警告真的不太好。但我不想关闭警告，因为它也会对我隐藏真正的警告。抱歉，但我还不能将我的 gcc 更新到 4.7（看起来已经修复）版本。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-14T06:38:19.897

你可以使用：

```
-Wno-missing-field-initializers 
```

专门禁止该警告。相反，您可以通过以下方式使其出错：

```
-Werror=missing-field-initializers 
```

这两者都适用于 GCC 4.7.1；我相信它们也适用于 GCC 4.6.x，但它们不适用于所有早期版本的 GCC（GCC 4.1.2 识别`-Wno-missing-field-initializers`但不识别`-Werror=missing-field-intializers`）。

显然，抑制警告的另一种方法是显式初始化所有字段。不过，这可能会很痛苦。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-14T06:19:24.630

用于`G_VALUE_INIT`初始化`GValue`-s。他们的（私人）结构在`/usr/include/glib-2.0/gobject/gvalue.h`其中`#define G_VALUE_INIT`适当。

我强烈不同意您认为这是 GCC 错误的评估。如果字段未显式初始化，`-Wmissing-field-initializers`您会要求收到警告，并且您会收到应得的警告。

遗憾`G_VALUE_INIT`的是没有记录，但它就在这里。代码与

```
GValue value = G_VALUE_INIT; 
```

如果`-Wmissing-field-initializers`被询问，没有通用的解决方案永远不会收到有关缺少字段初始化的警告。当您要求这样的警告时，您需要编译器警告每个不完整的初始化程序。实际上，该标准要求将所有非显式初始化的`struct`字段归零，并`gcc`遵守该标准。

您可以使用[诊断编译指示](http://gcc.gnu.org/onlinedocs/gcc/Diagnostic-Pragmas.html)，例如

```
#pragma GCC diagnostic ignored "-Wmissing-field-initializers" 
```

但我的感觉是，您应该谨慎编码，并明确初始化所有字段。您收到的警告更像是编码风格的警告（也许您忘记了一个字段！）而不是错误警告。

我还相信，对于您自己的（公共）`struct`，您应该`#define`使用一个初始化宏，如果`struct`它打算被初始化的话。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-13T16:28:35.233

似乎也使用 .field 样式的初始化，例如：

```
GValue value = { .somefield = 0 }; 
```

将导致编译器不发出警告。不幸的是，如果结构是不透明的，那么这是一个非首发。

# net-snmp - 关于 SNMP 获取的查询

> ID：13373698
> 
> 赞同：2
> 
> 时间：2012-11-14T05:50:44.207
> 
> 标签：net-snmp

最近我们正在为 NMS 系统制作 MIB 文件，这样做时我发现在 Linux 机器上部署 MIB 以查询它后，我需要在末尾添加 101.1，而对于标准 Linux mib，只需附加 .0。我无法理解为什么我的值在 101.1 而不是 .0 中返回。

例如，当我使用 linux MIB 执行此操作时，我得到了值

```
snmpget -v 2c -c public localhost 1.3.6.1.2.1.1.3.0
SNMPv2-MIB::sysUpTime.0 = Timeticks: (105543) 0:17:35.43 
```

但是为了让我的 mib 工作，我需要附加 101.1

```
snmpwalk -v 2c localhost -c public .1.3.6.1.4.1.****.1.2.3.101.1 
SNMPv2-SMI::enterprises.****.1.2.3.101.1 = STRING: "388 MB" 
```

当我带着我的 MIB 散步时，我得到以下信息。

```
snmpwalk -v 2c localhost -c public .1.3.6.1.4.1.****.1.2.3

SNMPv2-SMI::enterprises.****.1.2.3.1.1 = INTEGER: 1
SNMPv2-SMI::enterprises.****.1.2.3.2.1 = STRING: "getSystemMemoryUsage.sh"
SNMPv2-SMI::enterprises.****.1.2.3.3.1 = STRING:
"/opt/nagios/plugins/fetch_scripts/System/getSystemMemoryUsage.sh"
SNMPv2-SMI::enterprises.****.1.2.3.100.1 = INTEGER: 0
SNMPv2-SMI::enterprises.****.1.2.3.101.1 = STRING: "388 MB"
SNMPv2-SMI::enterprises.****.1.2.3.102.1 = INTEGER: 0
SNMPv2-SMI::enterprises.****.1.2.3.103.1 = "" 
```

任何人都可以建议为什么在我们的 MIB 中出现这种行为以及需要做什么，以便我的 MIB 表现得像 Linux Mib，我只需在最后添加 .0 并获得价值。对象类型是所有的标量。

提前谢谢大家

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T09:43:32.627

MIB 命名法支持以表格行和非表格标量表示的数据。使用 OID.0 索引访问以标量形式呈现的数据。“.0”部分表示访问标量对象——系统中的单个对象实例。这些表包含列（每列代表某种数据）和行（每行代表一个表实例 - 某种支持该表的实体）。

在您的示例中，您尝试访问 Enterprise MIB 中的某个表。此表包含一个索引（可能有单个或多个索引 MIB 表）。要确定该表中的第一个可用索引，您可以通过以下方式使用 snmpgetnext 命令开始：

```
snmpgetnext -v2c -c public localhost .1.3.6.1.4.1.****.1.2.3 
```

或者

```
snmpgetnext -v2c -c public localhost .1.3.6.1.4.1.****.1.2.3.0 
```

或者

```
snmpgetnext -v2c -c public localhost .1.3.6.1.4.1.****.1.2.3.0.0 
```

如您所见，上述所有命令通过更新最后两个 OID 部分 (.0.0) 为您提供了第一个现有行实例。这两个 OID 不必明确指定，因此您可以只使用一个空索引 (.0)，甚至根本不必指定它们。

要了解这些表的索引是如何描述的，您需要参考您的 Enterprise MIB - 查找此 OID 描述的表：.1.3.6.1.4.1。*** *.1.2.3 并了解索引方案以及这些索引代表什么。编写良好的 MIB 应包含此信息。

解释可能如下：

*   *.1.1 = 1 - id=1 的数据列，用于实体索引 1
*   *.2.1 = "getSystemMemoryUsage.sh" - id=2 的数据列，用于表示脚本名称的实体索引 1（STRING 语法）
*   *.3.1 = "/opt/nagios/plugins/fetch_scripts/System/getSystemMemoryUsage.sh" - id=3 的数据列，用于表示完整脚本路径的实体索引 1（STRING 语法）
*   *.100.1 = 0 - id=100 的数据列，用于实体索引 1，表示某个 INTEGER 值，依此类推...

如果 MIB 设计人员希望将来在 .3 和 .100 之间添加一些列，则列索引（.1、.2、.3、.100、.101 ...）可能会包含间隙。或者只是实体索引 1 不支持这些列（如果它们在 MIB 中定义）。允许跳过空列。

如果您想了解标量对象和柱状对象之间的差异，请参阅[RFC1212](http://www.ietf.org/rfc/rfc1212.txt)。

# excel - 如何将记事本中的文本复制到excel

> ID：13373700
> 
> 赞同：-1
> 
> 时间：2012-11-14T05:50:57.923
> 
> 标签：excel, vba

我可以通过excel打开记事本，但不知道如何复制文本。

我也在谷歌尝试过，但无法获得任何相关的好信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T05:55:50.300

**通过vba打开记事本文件“TESTFILE.txt”，选择所有数据，复制并粘贴到excel中**:)

如果您询问vba，请这样做

```
Sub ImportText() 
    Dim Text 
    Dim i As Long 

    Application.ScreenUpdating = False 
     'put your own path below
    Open ActiveWorkbook.Path & "\MYFILE.txt" For Input As #1 
    i = 1 
    Do While Not EOF(1) ' Loop until end of file.
        Input #1, Text 
        Range("a" & i) = Text 
        i = i + 1 
    Loop 
    Close #1 
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-04T08:28:17.707

```
Set objFileToRead = CreateObject("Scripting.FileSystemObject").OpenTextFile("C:\Users\Kalim\Desktop\Zeeshan\zeeshan.txt",1)
Dim strLine
do while not objFileToRead.AtEndOfStream
     strLine = objFileToRead.ReadLine()
     msgbox(strLine)
     Set objExcel = CreateObject("Excel.Application")
     Set objWorkbook = objExcel.Workbooks.open("C:\Users\Kalim\Desktop\Zeeshan\test3.xlsx")
     a=Split(strLine,":")
     b=ubound(a)
     For i=0 to b
      If a(0)="50" Then
        objExcel.Cells(3,4).Value = a(1)
      End If
     Next   
     objWorkbook.Save
     objWorkbook.Close
     msgbox("Execution completed")
loop
objFileToRead.Close 
```

# php - 使用 PDO 连接

> ID：13373702
> 
> 赞同：-2
> 
> 时间：2012-11-14T05:51:07.497
> 
> 标签：php, pdo

刚开始使用 PDO。请解释一下我的连接错误。它总是显示“您已连接”。

```
 <?php

       define('user','root');
       define('pass','');
       define('db','login_db');

       try
          {
       $dbh = new PDO("mysql:host = localhost; dbname = db",user,pass);
       echo "You are connected";
          }
       catch(PDOException $e)
          {
       echo $e -> getMessage(); 
          }
    ?> 
```

还为您了解的 PDO 提供一些教程或电子书。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T08:45:58.933

该问题是由您的数据源名称 (DSN)（PDO 连接字符串中的第一个参数）中的 2 个语法错误引起的。

## 错误

1.  您不能将 db 常量作为`"...dbname = db"`. 由于`db`用双引号括起来，并将被解释为字符串而不是常量。
2.  您的 DSN 中不能有空格。它应该是：

    ```
    "mysql:host=localhost;dbname=login_db" //no spaces. 
    ```

我已经对此进行了测试，它表现出一些奇怪的行为：

*   具体来说，似乎是第一个符号`host`和第一个`=`符号之间的空格导致了问题。如果有空格，`"You are connected"`即使“localhost”拼写错误也会回显。
*   `dbname`同样，如果和它的符号之间有一个空格`=`，即使指定的数据库名称不正确，它也会显示为连接。

我的猜测是，这是 PDO 类如何解析 DSN 的一些怪癖。

## 解决方案

从 DSN 中删除所有空格。

您还需要以不同的方式传入您的数据库名称。有不同的方法来解决这个问题。我建议您使用变量而不是常量定义，以免出现更多奇怪的调试错误：

```
$host = 'localhost';
$user = 'root';
$pass = '';
$db   = 'login_db';

try{
    $dbh = new PDO("mysql:host=$host;dbname=$db",$user,$pass);
    echo "You are connected";
}
catch(PDOException $e){
    echo $e -> getMessage(); 
} 
```

* * *

至于好的教程，你可以看看这些：

[Net.tuts+ : PHP 数据库访问](http://net.tutsplus.com/tutorials/php/php-database-access-are-you-doing-it-correctly/)

[Net.tuts+ : 为什么使用 PDO](http://net.tutsplus.com/tutorials/php/why-you-should-be-using-phps-pdo-for-database-access/)

当然，不要忘记 php.net 文档。

[php.net：PDO](http://php.net/manual/en/book.pdo.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T05:57:06.067

常量标识符应该是大写的：

```
 define('USER','root'); 
```

如果你想使用常量，你可以这样做：

```
$dbh = new PDO("mysql:host = ". HOST .";dbname=" . DB ,USER,PASS); 
```

# android - android闹钟声音不起作用

> ID：13373705
> 
> 赞同：1
> 
> 时间：2012-11-14T05:51:11.370
> 
> 标签：android, android-alarms

我创建了一个应用程序，用户可以在其中插入各种科目和他们的考试日期。我的应用程序为存储在数据库中的每个科目提供了时间跨度。当为每个主题分配的时间到达时，警报应该与通知一起播放。通知正在正常发出，但没有播放警报声。请帮助我。

我的警报管理器课程是：

```
public class AlarmManager extends BroadcastReceiver {

sampleDatabase appdb;
SQLiteDatabase sqldb;
Cursor cursor;
int today,prev;
Intent in;

@Override
public void onReceive(Context context, Intent intent)
{
    NotificationManager manger = (NotificationManager)context.getSystemService(Context.NOTIFICATION_SERVICE);
    Notification notification = new Notification(R.drawable.icon , "Yahrzeit" , System.currentTimeMillis());
    in = new Intent(context,FirstAppActivity.class);
    in.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
    PendingIntent contentIntent = PendingIntent.getActivity(context, 0, in, 0);
    notification.setLatestEventInfo(context, "ALERT!!!!", "Time Over" , contentIntent);
    notification.flags = Notification.FLAG_INSISTENT;
    appdb = new sampleDatabase(context);
    sqldb = appdb.getReadableDatabase();
    cursor = sqldb.query(sampleDatabase.TABLE_SEC, null, null, null, null, null, null);
    cursor.moveToFirst();
    Calendar cal = Calendar.getInstance();
    cal.set(Calendar.SECOND, 0);
    today = (int)(cal.getTimeInMillis()/1000);
    Log.e("Naga","Alarm");
    Log.e("today",Integer.toString(today));
    prev = 0;
    cursor.moveToPrevious();
    while(cursor.moveToNext())
    {
        int dbdate = cursor.getInt(cursor.getColumnIndex(sampleDatabase.ALARMSET));
        int id = cursor.getInt(cursor.getColumnIndex(sampleDatabase.ROW_ID));
        Log.e("dbdate",Integer.toString(dbdate));
        if((dbdate<=today)&&(dbdate>prev))
        {
            manger.cancelAll();
            manger.notify(1, notification);
            sqldb.execSQL("DELETE from " + sampleDatabase.TABLE + " where " + sampleDatabase.ROW_ID + "=" + id);
            sqldb.execSQL("DELETE from "+sampleDatabase.TABLE_SEC + " where " + sampleDatabase.ROW_ID + "=" + id);

        }
        prev = dbdate;
    }
    cursor.close();
    sqldb.close();

} 
```

我用来调用这个警报管理器的代码是这样的：

```
 alarmintent = new Intent(getApplicationContext(),com.nagainfo.firstAp.AlarmManager.class);
                sender = PendingIntent.getBroadcast(getApplicationContext() , 0 , alarmintent , PendingIntent.FLAG_CANCEL_CURRENT | Intent.FILL_IN_DATA);            
                am = (AlarmManager) getSystemService(ALARM_SERVICE);
                am.cancel(sender);

                alarmintent = new Intent(getApplicationContext(), com.nagainfo.firstAp.AlarmManager.class);
                //alarmintent.putExtra("note","Hebrew");
                sender = PendingIntent.getBroadcast(getApplicationContext() , 0 , alarmintent , PendingIntent.FLAG_CANCEL_CURRENT | Intent.FILL_IN_DATA);
                am = (AlarmManager) getSystemService(ALARM_SERVICE);
                am.setRepeating(AlarmManager.RTC_WAKEUP, alarmtime, 60000, sender); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T05:55:59.070

您尚未指定使用声音。用这个 ：

```
notification.defaults=Notification.DEFAULT_SOUND|Notification.DEFAULT_VIBRATE; 
```

如果您不希望振动将其删除。关键是您必须明智地对它们进行 OR。所以，如果你也想要灯——

```
notification.defaults=Notification.DEFAULT_SOUND|Notification.DEFAULT_VIBRATE|Notification.DEFAULT_LIGHTS; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-04T02:00:19.733

如果有人使用 NotificationCompat.Builder，您可以使用：

```
 Uri sound = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION);
    notifyBuilder.setSound(sound); 
```

# mysql - 使用单选按钮从 mysql 中检索数据

> ID：13373706
> 
> 赞同：0
> 
> 时间：2012-11-14T05:51:12.810
> 
> 标签：mysql, jsp

我有区域和子区域的 2 个组合框，区域组合框名称区域和子区域组合框名称是子区域，我还有 1 个区域单选按钮。问题是当我选择区域时，我想使用单选根据区域检索所有子区域区域按钮我应该使用 jsp 显示数据。

我尝试了以下代码：

```
 if(r1.equals("Zone"))
    {
    rs=st.executeQuery("select * from Meter_List where Zone='"+getZoneName+"' and  Subzone='"+subzonelist+"'");
    flag="false";
    }
Here r1 is radio button name.

    if(flag.equals("false"))
{
%><table style="" width="900px" align="center" border="1"cellpadding="5" cellspacing="1">

<th>Meter ID</th>
<th>Consumer ID</th>
<th>Consumer Name</th>
<th>Reading</th>
<th>Date</th>
<th>Time</th>
<th>Status</th>
<th>Sub Zone</th>
<th>Zone</th>
<%
while(rs.next())
{
%>
<tr><font size="4"><td align="center" bgcolor="#ededed"><%=rs.getInt("Meterid")%></font></td><td align="center" bgcolor="#ededed"><%=rs.getInt("Consumerid")%></td><td align="center" bgcolor="#ededed"><%=rs.getString("Consumername")%></td><td align="center" bgcolor="#ededed"><%=rs.getInt("LastReading")%></td><td align="center" bgcolor="#ededed"><%=rs.getDate("Date")%></td><td align="center" bgcolor="#ededed"><%=rs.getTime("Time")%></td><td align="center" bgcolor="#ededed"><%=rs.getString("Status")%></td><td align="center" bgcolor="#ededed"><%=rs.getString("Subzone")%></td><td align="center" bgcolor="#ededed"><%=rs.getString("Zone")%></td></tr>
<%
}

} 
```

# blackberry - 获得 Http 响应后，如何在我的黑莓浏览器字段中显示网页内容？

> ID：13373715
> 
> 赞同：0
> 
> 时间：2012-11-14T05:52:58.600
> 
> 标签：blackberry

我在需要身份验证的地方发出 Http 请求。成功通过身份验证后，我得到一个响应代码为 200。然后，我应该如何将来自服务器的网页显示到我的自定义浏览器字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T05:59:43.430

要在 BlackBerry Screen 上显示网页，您可以查看[如何 - 调用浏览器](http://www.blackberry.com/knowledgecenterpublic/livelink.exe/fetch/2000/348583/800332/800440/How_To_-_Invoke_the_browser.html?nodeid=1487366&vernum=0)，如果您使用的是 BlackBerry OS 5.0，您可以使用[浏览器字段](http://docs.blackberry.com/en/developers/deliverables/18125/Browser_field_1184788_11.jsp)文章。使用 BrowserField 类在您的 BlackBerry Screen 上显示网页。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T14:23:32.367

这里有一个简单的代码片段，它使用 BrowserField 来显示一个 html 页面：

```
 BrowserField browser = new BrowserField();

    String browserContent = "<html><style>" + theStyle + "</style>" + theBody + "</html>";

    byte[] contentBytes;        
    try {
        contentBytes = browserContent.getBytes("UTF-8");
        browser.displayContent(contentBytes, "text/html; charset=UTF-8", "http://mysite.org");
    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
        browser.displayContent(browserContent, "http://mysite.org");
    } 
```

# mysql - 从嵌套的 Left Join + Union MySQL 查询中打印所有行

> ID：13373717
> 
> 赞同：3
> 
> 时间：2012-11-14T05:53:00.967
> 
> 标签：mysql, left-join, union

我有一个查询，用于计算循环每月固定器的信息。该项目每个月都有一定的小时数分配给它，每个月的不同时间段开始（例如，2 月 5 日至 3 月 4 日）。查询结果的列包括：

1.  项目名称
2.  记录的总小时数
3.  每月剩余小时数
4.  期间的最后一天
5.  剩余天数

例如，项目 A 记录了 15 个小时，每月剩余 5 个小时。期间的最后一天是 11 月 17 日，距离今天还有 3 天。

当前查询使用 4 个使用左连接连接的表来打印所有客户端，即使没有记录小时数，然后它使用嵌套子查询（第 8-86 行）来计算第 2、3、4 和 5 列. 但是，第 4 列和第 5 列不打印，它们只是显示为始终为 NULL。（这些是期间的最后一天和剩余天数）。

您可以在此处的 SQL fiddle 链接中查看架构 + 查询代码：[http ://sqlfiddle.com/#!2/fc830/12](http://sqlfiddle.com/#!2/fc830/12)

当没有记录小时数时，如何获取第 4 列和第 5 列来打印数据并且不为空？我想我可能需要额外的左连接，但我无法获得解决方案。如果您有任何建议，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T18:13:35.490

当没有记录小时数时，嵌套查询的左连接会为您遇到问题的列返回空值。

答案是在它们为空时为它们提供值，`ifnull()`当左连接返回空值时我们使用这些值：

```
select
...
ifnull(<left joined value>, <value when there's no join>),
... 
```

请参阅[sqlfiddle 中的工作解决方案](http://sqlfiddle.com/#!2/fc830/6)。

顺便说一句，您从内部查询返回的某些值，特别是“最后一天”值可以直接派生自`client`（如我的解决方案中所示）。最好让您的查询尽可能简单——当有更简单或更直接的方式时，不要以复杂的方式获取数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T18:15:52.127

我认为您对`LEFT JOIN`. `LEFT JOIN`结果是外部表中的所有行。否则称为`LEFT Outer JOIN`（相反`RIGHT OUTER JOIN`）。在您的情况下，内部查询仅产生客户端 id = 4 的记录。请参阅最后一个子句`X on X.id=client.id`。现在你期望结果是什么？

```
OUTER TABLE (client table)
id = 1, 2, 3, 4

INNER TABLE 
client id = 4

ON X.id=client.id 
```

An`INNER JOIN`只会产生一条记录，因为只有匹配的记录 - 对于 id = 4。

但是 LEFT JOIN 会导致外部表中的所有 4 条记录，但无效字段的值将是`NULL`。这里除了客户端 id 4 之外，没有来自内部表的有效记录，因此它们将为空。

为了更清楚，您必须查看记录中的 id 字段。[试试这个小提琴](http://sqlfiddle.com/#!2/fc830/5)

您可以看到有关如何填写这些`NULL`字段的其他答案。

# c# - 从列表视图项按钮中删除列表视图项

> ID：13373721
> 
> 赞同：3
> 
> 时间：2012-11-14T05:53:15.390
> 
> 标签：c#, android, listview, button, xamarin.android

我已经实现了一个自定义 BaseAdapter，它显示具有自定义布局的列表项。

一切正常，但我试图添加一个删除按钮以显示在项目（我有）旁边，但是我在尝试让它工作时遇到了问题。

相关代码在这里：

```
 public List<OrderLineItem> Items
    {
        get;
        set;
    }

    public override View GetView(int position, View convertView, ViewGroup parent)
    {
        OrderLineItem item = GetItemAtPosition(position);

        var view = (convertView ??
            Context.LayoutInflater.Inflate(Resource.Layout.CustomListItem, parent, false)) as LinearLayout;

        // ..........
        var removeButton = view.FindViewById(Resource.Id.btnRemove) as Button;

        removeButton.Click += delegate
        {
            Items.RemoveAt(position);
            this.NotifyDataSetChanged();
        };

        // ...........

        return view;
    } 
```

问题是我认为由于委托关闭，因为 Items.Count 始终等于位置的偏移量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T08:15:29.397

我认为您对导致问题的关闭的分析可能是正确的。

为了解决这个问题，我会考虑使用视图上的标签字段来存储当前项目 - 然后在删除操作中使用它。

```
public override View GetView(int position, View convertView, ViewGroup parent)
{
    OrderLineItem item = GetItemAtPosition(position);

    var view = convertView;

    if (view == null)
    {
        view = Context.LayoutInflater.Inflate(Resource.Layout.CustomListItem, parent, false)) as LinearLayout;

        var removeButton = view.FindViewById(Resource.Id.btnRemove) as Button;

        removeButton.Click += (s, e) => {
            var originalView = (View)s;
            var originalItem = originalView.Tag as MvxJavaContainer<OrderLineItem>;
            Items.Remove(originalItem);
            this.NotifyDataSetChanged();
        };
    }

    // ...........
    var tagButton = view.FindViewById(Resource.Id.btnRemove) as Button;
    tagButton.Tag = new MvxJavaContainer<OrderLineItem>(item);

    return view;
} 
```

笔记：

*   重要的是 Click 事件处理程序只设置一次 - 不是每次使用和重用 View 时都设置。
*   我决定使用 Remove 而不是 RemoveAt，因为我觉得在项目 N 被删除的情况下更容易跟踪（然后 N+1 变为 N，N+2 变为 N+1，等等）。但是，我认为您可以相当轻松地使用 RemoveAt（我认为 NotifyDataSetChanged 调用将重置所有显示的列表视图项）
*   我已经将这个简单的 JavaContainer 用于 Tag 字段 - [https://github.com/slodge/MvvmCross/blob/vnext/Cirrious/Cirrious.MvvmCross.Binding.Droid/MvxJavaContainer.cs](https://github.com/slodge/MvvmCross/blob/vnext/Cirrious/Cirrious.MvvmCross.Binding.Droid/MvxJavaContainer.cs)
*   如果您需要将标签用于其他目的，那么 Android/MonoDroid 允许您使用 SetTag(key,obj) 存储多个标签

# java - j2objc 是否支持番石榴？

> ID：13373725
> 
> 赞同：3
> 
> 时间：2012-11-14T05:53:39.630
> 
> 标签：java, objective-c, guava

我正在尝试使用 j2objc 来翻译一些 java 代码。当我尝试导入任何类时，我的代码使用 google Guava 库

```
import com.google.common.collect.Maps; 
```

我收到一条错误消息，说它无法解决。

```
The import com.google.common cannot be resolved 
```

要在 j2objc 转换器中启用 Guava 支持，是否需要做一些特别的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T18:33:16.627

Guava 的翻译目前不是 j2objc 发行版的一部分，尽管计划包含该库的一个大子集（包括 Maps）。今天项目做的是下载 Guava 源，然后翻译他们想要使用的类。

这种方法的一个问题是确定依赖类的关闭。即Maps依赖哪些Guava类，这些类的依赖关系是什么等等。我们让 javac 确定：

```
$ javac -d /tmp/guava -sourcepath <guava-source-paths> com.google.common.collect.Maps
$ cd /tmp/guava

$ find com -name '*.class' > /tmp/all-classes.list  # list all classes
$ fgrep -v '$' < /tmp/all-classes.list > /tmp/classes.list # get rid of inner classes
$ sed -s '/class$/java/' < /tmp/classes.list > /tmp/source-files 
```

确定源文件列表的工具计划在下一个版本中使用。

# java - 双倍未存储正确的值

> ID：13373728
> 
> 赞同：0
> 
> 时间：2012-11-14T05:53:57.900
> 
> 标签：java, variables, printf, types

我拥有的代码，

```
public static void main(String[] args) {
    int x = 27;
    int y = 5;
    double z = x / y;
    System.out.println(" x = " + x + " y = "+y +" z = "+z);
} 
```

在上面的代码中，我知道要打印变量 z 的小数位 0.4，我们必须使用 printf，但我的问题是为什么变量 z 不存储 5.4 而只存储 5？我的意思是 int / int 然后输出存储在一个 double 中，它完全能够保存十进制值但它不是，逻辑是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T05:56:50.287

您需要将其中一个操作数转换为双精度

```
double z = (double) x / y; 
```

原因是`x / y`单机是一个 int，所以它实际上是评估为 5，然后解析为 double。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T05:56:56.470

我相信你必须在划分之前转换整数。

像这样，

```
double z = (double) x / (double) y; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-14T05:57:05.660

发生这种情况是因为您要除以的值是 int 而不是 double 并且它们不会输出小数位，更清楚的是，例如

双 z = 27 /5; 和你一样

双 z = 27.0/5.0；现在 z = 5.4; 因此，这表明您正在执行计算的数据类型也应该与您期望输出的数据类型相同。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-14T05:58:10.780

你在做什么：

```
double z = x / y; 
```

是整数除法，然后将结果转换为双精度

# rest - 是否可以通过 websockets 进行 ReST？

> ID：13373734
> 
> 赞同：74
> 
> 时间：2012-11-14T05:54:46.173
> 
> 标签：rest, websocket, xmpp

我计划开发一个基于 Web 的聊天应用程序，它接收 ReSTful 请求，将它们转换为 XMPP 并将它们传递到 XMPP 服务器。

将 websockets 用于这种基于聊天的应用程序看起来很有希望，因为事件（或响应）可以异步传递。但是如果我使用 websockets 作为底层协议来传输来自浏览器的请求，这仍然可以被认为是一个 ReSTful 设计吗？如果是，那么 Websocket 消息中的 URI、动词（GET、POST...）、参数是如何表示的？将它们包装在 xml/json 中并发送？

此外，ReSTful 架构声明不会将会话状态存储在服务器上。但是在这种情况下，当创建 XMPP 客户端会话时，该会话的状态将存储在服务器上（违反无状态约束）

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2014-11-20T12:59:44.323

REST 是一种不强加协议的架构风格。所以是的，如果您愿意，您可以使用 Web Sockets 进行 REST、使用 HTTP 进行 REST 以及使用 FTP 进行 REST。

使用 HTTP 的主要原因是通过 HTTP 与任何组件或编程语言进行通信都很容易且相当简单，还因为 HTTP 支持具有多个中介的分布式环境：代理、防火墙......；因此，您可以在任何拓扑上部署您的服务，并且任何人都可以访问它。

**我的咆哮：** 如果您是 RESTliban 并且 Roy Fielding 的论文是事实的来源，那么动词永远不会被承认为语义的一部分。URI 是语义。对不同动作使用不同动词是 REST over HTTP 的优雅演变，但不是“真理”的一部分。您可以查看Roy 在他的论文[第六章中评估的基于 HTTP 的 rest场景。](http://www.ics.uci.edu/~fielding/pubs/dissertation/evaluation.htm)没有提到动词。请注意，这是一个评估场景，而不是规范。

TLDR；

如果您需要通过 Internet 进行实时双向通信并且客户端是 Web 浏览器，那么最好的选择是 Web Sockets。然后，您可以在 Web 套接字之上实现应用程序级协议以实现 RESTful Web 服务。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-03-26T11:50:40.090

是的。您可以将 REST over WebSocket 与 [SwaggerSocket 等库一起使用。](https://github.com/wordnik/swaggersocket)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-11-14T07:20:04.167

为什么要在套接字之上构建 REST API？恕我直言，REST API 的好处是利用标准 HTTP 协议的可能性，如无状态请求、GET、DELETE 等语义动词来构建（客户端）开发人员易于理解的 API。由于套接字不提供 HTTP 动词等，因此您将为套接字构建某种 HTTP 层，恕我直言，这是不合理的。

如果您真的要构建这样的东西，我建议使用 HTTP 协议作为蓝图，并像 HTTP 一样实现套接字协议。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-08-20T16:00:58.590

REST 架构风格主要假定 2 个实体，即。客户端和服务器。

随着我们更多地转向实时 Web 和响应式系统的开发，WebSocket 将显着地开始取代 REST API 的使用。

WS 允许数据推送和拉取，这消除了服务器和客户端的概念。

STOMP、AMQP、XMPP 可用作消息传递协议。

数据本身可能是 JSON 或 Google 协议缓冲区，也可能是 Apache Avro。

WebSockets 不依赖于 Web 服务器，但也可以在独立的应用程序中开发，例如移动应用程序或桌面应用程序。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-16T02:01:31.437

我不明白您为什么要将 XMPP 转换为 REST，然后在 WS 上运行 REST。WebSocket 的重点是将 XMPP 协议直接带到浏览器，从而避免了所有的转换问题。

有一些 JavaScript 库可以将 XMPP 从浏览器传递到服务器。您所需要的只是将来自 WS 的 XMPP 流量代理到 TCP，然后直接进入您的 XMPP 服务器。[Kaazing 有一个](https://kaazing.com/products/websocket-gateway/editions/)允许您执行此操作的网关。

如果你想使用开源，你需要编写一个 JavaScript XMPP 库。有一些示例展示了如何为简单协议编写 JS 库。您只需找到一个并将概念扩展到 XMPP 协议。

回顾一下，这是架构的外观：

您的 XMPP 客户端代码 <-> XMPP JavaScript 库 <-> WebSocket over http <-> WebSocket 到 TCP 代理 <-> XMPP 服务器

XMPP 客户端代码和 XMPP JavaScript 库在浏览器中运行，WS 到 TCP 代理以及 XMPP 服务器都是服务器端的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-12-19T04:42:06.407

我知道这篇文章真的很老了，但想进一步插话“所以如果我选择 REST 架构，我就失去了实时通信的能力？”的概念。

一句话，没有。我在利用 REST 实现兼容性、可发现性以及作为在 IoT 阴影下跨不同设备进行扩展的一种手段方面有过许多 REST 样式实现的经验。

但是，除了使用 WS 之外，除了 REST 来方便近乎实时的传输。还有一些抽象可以真正帮助解决这个问题，让您可以专注于构建您的 API 并决定消费应用程序的 RT 组件应该如何操作。

如果您正在寻找构建 REST API 并希望避免为您的 RT 需求重新创建轮子，我建议您查看 Tibco Smart-Sockets 或 SignalR 之类的东西。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-01-28T14:20:28.543

我创建了一个向 Web 套接字发送函数添加回调的项目：[https ://github.com/ModernEdgeSoftware/WebSocketR2](https://github.com/ModernEdgeSoftware/WebSocketR2)

建立消息 ID 以便客户端可以实现回调。它在超时后处理消息重试，并在连接断开时重新连接到服务器。**然后，您可以通过添加动词和路径将您的有效负载构建为您想要的 RESTful。**

这类似于视频游戏工作室使用 UDP 来实现所需的速度，但他们的网络代码实现了许多类似 TCP 的特性以提高可靠性。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-02-05T20:30:47.200

我刚刚在一家为游戏提供云解决方案和“服务器端/服务即平台”（SaaS）的公司的博客上发现了新话题。

我不是为这家公司做广告，也不是我使用它们，所以我什至不知道它们的好坏。

但是，他们非常清楚地解释了原因以及在 REST 中使用 WebSockets 的好处在[他们的博客上阅读](http://www.gamesparks.com/blog/why-the-rest-dont-use-websockets/)

# asp.net - 将不同的用户重定向到另一个 URL

> ID：13373735
> 
> 赞同：3
> 
> 时间：2012-11-14T05:54:53.263
> 
> 标签：asp.net, .net

我在我的网络系统中创建了不同的角色（例如管理员、活动用户、用户……）。用户通过内置 ASP 进行身份验证：登录后，我为不同的用户角色设置了不同的文件夹。
任何用户组都有一个文件夹和 Web 配置页面，以允许或拒绝访问该文件夹的页面。
**现在我的问题是：**
**如何将用户从无权查看的页面重定向到另一个页面，如访问拒绝.aspx 页面？**
有关更多信息：我希望当“用户”单击经理页面时，它会重定向到访问 denied.aspx 页面。

注意：
如果退出不显示用户组管理员页面的方式，请说出来。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T06:02:15.413

把它放在母版页中

```
if (!(HttpContext.Current.User.IsInRole("Admin")))
{
  Response.Redirect("UnAuthenticatedUser.aspx");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T06:02:23.017

在经理的页面加载中：

```
if (!User.IsInRole("managers")) {
    Response.redirect("denied.aspx")
} 
```

或类似的东西？

# validation - css 不会验证不断收到 Parse Error @media 手持设备，只有屏幕和（最大宽度：320px）错误

> ID：13373737
> 
> 赞同：0
> 
> 时间：2012-11-14T05:55:13.827
> 
> 标签：validation, css, media-queries

无法弄清楚我的所有其他移动设备媒体查询都验证了我的最后一个错误，我似乎无法在任何地方找到答案。我已经坚持了一段时间。不确定如何修复它，这是我第一次使用媒体查询，我使用 1140 网格和 html5 任何想法如何让它验证。

```
body {
    font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
    background:url(../images/background.jpg);
    margin-left:auto;
    margin-right:auto;
    }

    p {
        font-family:Arial, Helvetica, sans-serif;
        font-size:18px;
    }

    h2 {

        font-family:Arial, Helvetica, sans-serif;
        font-size:24px;
        font-weight:bold;
        color:#000;
    }

    h4 {
        font-size:18px;
    }

    h3 {
        font-size:16px;
    }

    .hidden {
        display: none;
    }

        header nav {
        float:right;
        width:670px;
        height:70px;
        margin-top: 47px;
        font-family: Arial, Helvetica, sans-serif;
        background-image: url(../images/nav_bar.png);
        background-repeat:no-repeat;
    }

    nav ul li {
        float: left;
        cursor: pointer;
        list-style-type: none;
        padding-top:20px;
        padding-left:40px;
        text-align: left;
    }

    nav ul {

        font:Arial, Helvetica, sans-serif;
        font-size:24px;
        color:#FFF;
    }

nav ul li a {
    color: #FFF;
    text-decoration: none;
    }

    .logo {
        margin-top:87px;
    }

    .lineone {
        background:#000;
        height:5px;
        width:891px;
        float:right;
        margin-top:30px;
    }

    /*----Home----*/

    .photos {
        width:1140px;
        margin-left:55px;;
        margin-top:40px;
    }

    .about {
        margin-top:50px;
        margin-left:35px;
    }

    .linetwo {
        background:#000;
        height:5px;
        width:1102px;
        margin-left:35px;
        margin-top:10px;
    }

    .contenthome {
        margin-left:56px;
        margin-top:20px;
    }

/*----info-----*/

.lineinfo{
        background:#000;
        height:3px;
        width:625px;
}

#mainContent {
    margin-top:45px;    
}

#mainContent h2 {
    margin-top:50px;

}

#mainContent p {
    font-family:Arial, Helvetica, sans-serif;
    font-weight:lighter;
    font-size:18px; 
}

#mainImage{
    margin-top:40px;
    margin-left:20px;

}

.footer {
    background-image:url(../images/footer.png);
    background-repeat:no-repeat;
    float:left;
    padding-bottom:200px;
    height:100px;
    width:1129px;
    margin-top:182px;
}
.footer h3 {
    margin-left: auto;
    margin-right:auto;
    text-align:center;
    padding-top:43px;
}

/* ============================= */
/* ! Layout for mobile version   */
/* ============================= */

@media handheld, only screen and (max-width: 990px) {
    .lineinfo {
        width:90%;
    }
}

@media handheld, only screen and (max-width: 900px) {
    .logo{
        margin-top:130px;

    }

    .lineinfo {
        width:90%;
    }

}

@media handheld, only screen and (max-width: 767px) {

    .logo {
        margin-top:20px;
        width:90%;
        height:90%;
        margin-left:auto;
        margin-right:auto;
    }

    header nav {
        float:none;
        margin: 20px;
        margin-right:auto;
        margin-left:auto;
        margin-bottom:0px;
        width:300px;

}

    header nav ul li {
        margin:auto;
        height:10px;
        padding-right:20px;
        font-size:16px; 
        }

    .photos {
        width:75%;

}

#mainImage {
margin-right:auto;
margin-left:auto;

}
.lineinfo {
        width:90%;
    }

.footer {
    width:90%;

    background-image:url(../images/footer_media.png);

}
.footer h3{
    font-size:.875em;
}

@media handheld, only screen and (max-width: 320px) {

    .logo {
        margin-top:20px;
        margin-left:auto;
        margin-right:auto;
        width:90%;
        }

    header nav {
        float:none;
        margin: 20px;
        margin-right:auto;
        margin-left:auto;
        margin-bottom:0px;
    }

    header nav ul li {
        width:20px;
        font-size:12px;
    }

        .lineinfo {
        width:90%;
    }

    #mainImage {
margin-right:auto;
margin-left:auto;   
}

.footer h3 {
    font-size:.875em;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T06:05:08.543

您在该部分之后错过了结束括号 }：

```
 @media handheld, only screen and (max-width: 767px) { 
```

就在括号里：

```
 .footer h3{ 
       font-size:.875em;
    }
 } /* here. */

    @media handheld, only screen and (max-width: 320px) { 
```

# hibernate - ehcache 作为休眠第二级缓存是事务性的吗？

> ID：13373738
> 
> 赞同：0
> 
> 时间：2012-11-14T05:55:17.697
> 
> 标签：hibernate, ehcache

我的实体标有

```
@Cache(usage = CacheConcurrencyStrategy.TRANSACTIONAL) 
```

并且应用程序运行（不确定如何验证实体是否实际被缓存）。

春季上下文中的休眠配置：

```
<prop key="hibernate.cache.use_second_level_cache">true</prop>
<prop key="hibernate.cache.region.factory_class">org.hibernate.cache.ehcache.EhCacheRegionFactory</prop> 
```

现在，如果将缓存从 ehcache 更改为 infinispan，我会收到一个异常，指出这是一个事务缓存，但没有找到事务管理器。

因此我的问题是：ehcache 实际上是事务性的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T18:20:41.597

从 2.1 版开始，Ehcache 支持事务缓存...但是您确实意识到 Hibernate 的（任何）事务缓存需要完整的 JTA 环境？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-16T12:48:03.697

据我所知，EH Cache 不是事务性的。请参阅下面的 hibernate 本身的链接。它还说 EH 缓存是非事务性的。JBoss Cache 是我知道的事务。

[http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/performance.html#performance-cache](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/performance.html#performance-cache)

# sql - Firebird 1.5：嵌套聚合

> ID：13373747
> 
> 赞同：0
> 
> 时间：2012-11-14T05:56:13.247
> 
> 标签：sql, firebird

我有一条 SQL 语句需要在 Firebird 中使用超过 1 个聚合函数，但出现以下错误：

```
Error: GDS Exception. 335544569\. Dynamic SQL Error
SQL error code = -104
Nested aggregate and window functions are not allowed
SQLState:  42000
ErrorCode: 335544569 
```

这是我的示例 SQL：

```
SELECT SUM(LOG(3, (NoPassed/TotalNo * 100))) FROM TABLE_A 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T16:44:32.363

您可以使用 LOG 函数的结果填充临时表，然后执行 SUM 聚合函数。

1)

```
CREATE TABLE TEMP (S DOUBLE PRECISION) 
```

2)

```
INSERT INTO TEMP (S)
SELECT LOG(3, (NoPassed/TotalNo * 100)) FROM TABLE_A 
```

3)

```
SELECT SUM(S) FROM TEMP 
```

# android - Android进度条不允许切换标签

> ID：13373754
> 
> 赞同：2
> 
> 时间：2012-11-14T05:56:59.490
> 
> 标签：android, listview

我的应用程序中有两个选项卡。第一个选项卡显示用户的详细信息，第二个选项卡显示他的设备上安装的应用程序。我使用包管理器获取已安装的应用程序，它在后台线程中运行。如果用户在后台线程完成之前单击了第二个选项卡，我想显示一个进度对话框。但问题是如果屏幕上显示进度对话框，用户无法切换到下一个选项卡。有没有办法解决这个问题。谢谢进步。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T06:43:35.343

默认情况下，进度对话在对话模式下工作，并冻结任何操作，直到进度条消失。

我遇到了控制进度条的问题（尽管我的要求比你的多，比如自定义外观和随意显示/隐藏/冻结条），所以我最终创建了一个自定义进度条。

这很简单

1.  创建 2 个直条，一个是黑色，另一个是任何颜色（如果你想要更花哨的东西，这取决于你）

2.  将条添加到drawable，然后以隐藏模式添加到您的布局xml。彩色条正好在黑色条的顶部（叠加）

3.  现在您要显示进度条，首先使黑色条可见，然后根据进度调整彩色条的宽度（在黑色条的顶部）。

这将为您提供进度条的正确功能。

由于您只使用图像视图，因此您可以完全控制何时显示或隐藏栏。此外，默认情况下它不会冻结视图。您可以通过捕获 onTouch 事件随意冻结。

# java - 如何在 Struts2 中提交表单的 URL 中传递参数

> ID：13373760
> 
> 赞同：3
> 
> 时间：2012-11-14T05:57:13.670
> 
> 标签：java, url, struts2, struts, parameter-passing

我正在 Struts2 中做一个项目，我需要在 URL 中设置一个参数，例如下面链接中的用户参数。

我希望在单击表单提交按钮而不是单独的任何链接时传递此参数。我知道如何做到这一点，`<s:url>`但这样我需要创建一个链接而不是表单提交。

有人可以帮我提供一个代码示例如何做到这一点吗？我知道有一种方法可以使用 HTML 或 Struts1 来实现，但是如何使用 Struts2 来实现呢？如果有办法做到这一点`struts.xml`，请举例说明。

```
<form action="/example/xyz.action?user=george" method="POST"> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-14T09:21:47.443

尝试这个：

```
<s:form action="xyz.action" method="GET">
    <s:hidden name="user" value="george"/>
    // other fields
</s:form> 
```

`method="GET"`将在 url 上显示您的参数，`<s:hidden name="user" value="george"/>`将采用您的参数。

这里也是给你的[例子 Example](http://www.mkyong.com/struts2/struts-2-shidden-hidden-value-example/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-14T14:42:42.637

如果您使用`<s:url`和`<s:form`标记，这是可能的。

```
<%@ taglib prefix="s" uri="/struts-tags" %>

<s:url id="xyzUrl" action="xyz" includeContext="false"><s:param name="user" value="george"/></s:url>
<s:form name="xyzForm" action="%{xyzUrl}" method="POST"> 
```

# sql - 客户销售趋势查询

> ID：13373763
> 
> 赞同：0
> 
> 时间：2012-11-14T05:57:25.673
> 
> 标签：sql

我的查询出现问题，我需要确保 salesQty2012 期间与 SalesQty2011 相同，因为 2012 年的销售仍未结束，我的比较将是错误的。我的问题是如何编写查询以根据当前时间段带来 salesqty 2011。我的原始查询以获取上述数据：

```
 Status,CustomerGroupCode,CustomerGroup,CustomerCode,CustomerName,DivisionCode,DivisionName,SalesLocation,RouteManagerCode,RouteManager,ChannelCode,Channel,CustomerCategoryCode,CustomerCategory,InvRoute,CustomerPeymentTermsCode,CustomerPeymentTerms,CreditDays,CreditLimit,LastInvoiceDate,SalesQty2012,SalesQty2011
ACTIVE,NULL,NO GROUP                           ,CA001  ,A L S Super Market                           ,1,DUBAI               ,Deria Dubai                        ,SDD11,SAJI M ABRAHAM,SDD11,IMPULSE CUSTOMERS             ,G    ,Groceries                          ,36,CS,CASH,0,0,27/10/2012 0:00,160,187
ACTIVE,NULL,NO GROUP                           ,CA003  ,A.M.M Super Market.  0                       ,2,ABU DHABI           ,Abu Dhabi                          ,SDD11,SAJI M ABRAHAM,SDD11,IMPULSE CUSTOMERS             ,G    ,Groceries                          ,4,CS,CASH,0,0,06/11/2012 0:00,69.625,96.4583333
ACTIVE,NULL,NO GROUP                           ,CA005  ,Aalian Super Market                          ,2,ABU DHABI           ,Abu Dhabi                          ,SDD11,SAJI M ABRAHAM,SDD11,IMPULSE CUSTOMERS             ,G    ,Groceries                          ,12,CS,CASH,0,0,27/08/2012 0:00,118.125,259.25
ACTIVE,NULL,NO GROUP                           ,CA006  ,Aawan S/M.                                   ,2,ABU DHABI           ,Abu Dhabi                          ,SDD20,NULL,SDD11,IMPULSE CUSTOMERS             ,G    ,Groceries                          ,99,CS,CASH,0,0,NULL,NULL,NULL
ACTIVE,NULL,NO GROUP                           ,CA008  ,Abbas Bin Moideen Super Market               ,2,ABU DHABI           ,Abu Dhabi                          ,SDD11,SAJI M ABRAHAM,SDD11,IMPULSE CUSTOMERS             ,G    ,Groceries                          ,4,CS,CASH,0,0,07/11/2012 0:00,185.625,188
ACTIVE,NULL,NO GROUP                           ,CA013  ,Abdu Grocery   0                             ,1,DUBAI               ,Bur Dubai                          ,SDD11,SAJI M ABRAHAM,SDD11,IMPULSE CUSTOMERS             ,G    ,Groceries                          ,44,CS,CASH,0,0,24/04/2011 0:00,NULL,10
ACTIVE,NULL,NO GROUP                           ,CA016  ,Abdu Rahiman Al Haj                          ,1,DUBAI               ,Dubai                              ,SDD11,SAJI M ABRAHAM,SDD11,IMPULSE CUSTOMERS             ,G    ,Groceries                          ,28,CS,CASH,0,0,29/10/2012 0:00,306.625,351.875
ACTIVE,NULL,NO GROUP                           ,CA017  ,Abdu Rahman  Khaleefa0                       ,1,DUBAI               ,Deria Dubai                        ,SDD11,SAJI M ABRAHAM,SDD11,IMPULSE CUSTOMERS             ,G    ,Groceries                          ,36,CS,CASH,0,0,14/10/2012 0:00,60,133.2499999
ACTIVE,NULL,NO GROUP                           ,CA018  ,Abdul  Khalfan Mohd Grocery   0              ,1,DUBAI               ,Sharjah                            ,SDD11,SAJI M ABRAHAM,SDD11,IMPULSE CUSTOMERS             ,G    ,Groceries                          ,37,CS,CASH,0,0,25/08/2011 0:00,NULL,21
ACTIVE,NULL,NO GROUP                           ,CA019  ,Abdul Aziz Super Market                      ,2,ABU DHABI           ,Abu Dhabi                          ,SDD11,SAJI M ABRAHAM,SDD11,IMPULSE CUSTOMERS             ,G    ,Groceries                          ,4,CS,CASH,0,0,08/10/2012 0:00,179.25,134.875
ACTIVE,NULL,NO GROUP                           ,CA020  ,Abdul Aziz Mohd.Sadiq Food Stuff             ,1,DUBAI               ,Sharjah                            ,SDD11,SAJI M ABRAHAM,SDD11,IMPULSE CUSTOMERS             ,G    ,Groceries                          ,41,CS,CASH,0,0,27/08/2012 0:00,10,2
ACTIVE,NULL,NO GROUP                           ,CA021  ,Abdul Gafoor Bava   0                        ,2,ABU DHABI           ,Abu Dhabi                          ,SDD11,SAJI M ABRAHAM,SDD11,IMPULSE CUSTOMERS             ,G    ,Groceries                          ,12,CS,CASH,0,0,24/09/2012 0:00,40,87.1666666
ACTIVE,NULL,NO GROUP                           ,CA022  ,Happy Down  Gr                               ,1,DUBAI               ,Dubai                              ,SDD11,SAJI M ABRAHAM,SDD11,IMPULSE CUSTOMERS             ,G    ,Groceries                          ,36,CS,CASH,0,0,31/10/2012 0:00,80,162.2083332
ACTIVE,NULL,NO GROUP                           ,CA025  ,Abdul Hamid Abdul Karim Grocery  0           ,1,DUBAI               ,Dubai                              ,SDD20,NULL,SDD11,IMPULSE CUSTOMERS             ,G    ,Groceries                          ,99,CS,CASH,0,0,12/10/2008 0:00,NULL,NULL
ACTIVE,NULL,NO GROUP                           ,CA027  ,Abdul Majid S/M - Baniyas                    ,2,ABU DHABI           ,Abu Dhabi                          ,SDD11,SAJI M ABRAHAM,SDD11,IMPULSE CUSTOMERS             ,G    ,Groceries                          ,5,CS,CASH,0,0,30/10/2012 0:00,750,824.125
ACTIVE,NULL,NO GROUP                           ,CA029  ,Yasin Ali Reza                               ,1,DUBAI               ,Deria Dubai                        ,SDD11,SAJI M ABRAHAM,SDD11,IMPULSE CUSTOMERS             ,G    ,Groceries                          ,22,CS,CASH,0,0,29/10/2012 0:00,264.125,373.9999999
ACTIVE,NULL,NO GROUP                           ,CA030  ,Abdul Rahman Abdulla Al Haj                  ,1,DUBAI               ,Dubai                              ,SDD20,NULL,SDD11,IMPULSE CUSTOMERS             ,GR   ,Group                              ,99,CS,CASH,0,0,NULL,NULL,NULL
ACTIVE,NULL,NO GROUP                           ,CA032  ,Al Zajal Gr#2                                ,3,Al Ain              ,Al Ain                             ,SDD11,SAJI M ABRAHAM,SDD11,IMPULSE CUSTOMERS             ,G    ,Groceries                          ,10,CS,CASH,0,0,25/10/2012 0:00,98,112.2083333
ACTIVE,NULL,NO GROUP                           ,CA034  ,Abdul Rasool Waswasi Grocery                 ,1,DUBAI               ,Dubai                              ,SDD20,NULL,SDD11,IMPULSE CUSTOMERS             ,GR   ,Group                              ,99,CS,CASH,0,0,NULL,NULL,NULL
ACTIVE,NULL,NO GROUP                           ,CA036  ,Abdul Raza Ghanim Grocery0                   ,1,DUBAI               ,Deria Dubai                        ,SDD11,SAJI M ABRAHAM,SDD11,IMPULSE CUSTOMERS             ,G    ,Groceries                          ,22,CS,CASH,0,0,04/03/2008 0:00,NULL,NULL 
```

这里是查询

```
 Select top 20 Status=(CASE WHEN a.LOCK=0 THEN 'ACTIVE'
WHEN a.LOCK=1 THEN 'INACTIVE' END), 
CustomerGroupCode=ISNULL((SELECT TOP 1 ITcode FROM BCGMAST WHERE ITTAG='U' AND ITCODE=a.CGPCODE),null), 
CustomerGroup=ISNULL((SELECT TOP 1 ITDESC FROM BCGMAST WHERE ITTAG='U' AND ITCODE=a.CGPCODE),'NO GROUP'),                               
a.accode as CustomerCode,
a.name as CustomerName,
DivisionCode=ISNULL((SELECT ccode FROM CCMAST WHERE CCMAST.CCODE=a.CCODE),NULL),    
DivisionName=ISNULL((SELECT TOP 1 CCDES FROM CCMAST WHERE CCMAST.CCODE=a.CCODE),'NO DIVISION'),    
SalesLocation=ISNULL((SELECT TOP 1 ITDESC FROM BCGMAST WHERE BCGMAST.ITTAG='L' AND BCGMAST.ITCODE=a.SLLOC),'NO SALES LOCATION'),                              
RouteManagerCode=ISNULL(a.ROUTEMANAGER,NULL),
RouteManager=(CASE WHEN a.ROUTEMANAGER='SDD11'  THEN 'SAJI M ABRAHAM'   
WHEN a.ROUTEMANAGER='SDD01' THEN 'EHSAAN JAMEEL' 
WHEN a.ROUTEMANAGER='SDD12' THEN 'DANISH KHAN'  END), 
ChannelCode=ISNULL((SELECT TOP 1 GRPCD FROM ACGROUP WHERE ACGROUP.GRPCD=a.GRPCD),NULL),
Channel=ISNULL((SELECT TOP 1 GPSNM FROM ACGROUP WHERE ACGROUP.GRPCD=a.GRPCD),'NO CHANNEL'),
CustomerCategoryCode=ISNULL((SELECT TOP 1 ITcode FROM BCGMAST WHERE BCGMAST.ITTAG='Z' AND BCGMAST.ITCODE=a.custcate),null), 
CustomerCategory=ISNULL((SELECT TOP 1 ITDESC FROM BCGMAST WHERE BCGMAST.ITTAG='Z' AND BCGMAST.ITCODE=a.custcate),'NO CATEGORY'), 
InvRoute=a.Route,
CustomerPeymentTermsCode=a.SEQ1,
CustomerPeymentTerms=(CASE WHEN a.SEQ1='CS' THEN 'CASH'    
WHEN a.SEQ1='CR' THEN 'CREDIT'    
WHEN a.SEQ1='CB' THEN 'BILL TO BILL' END),    
a.crdays as CreditDays,
a.crlimit as CreditLimit,
LastInvoiceDate=(SELECT max(S.InvoiceDate)from Sales_Data08 S where S.PartyCode= a.ACCODE),
SalesQty2012=(SELECT Sum(S.SALESQTY)from Sales_Data S where S.PartyCode = a.ACCODE and InvoiceDate BETWEEN '2012-01-01' AND '2012-12-31'),
SalesQty2011=(SELECT Sum(S.SALESQTY)from [GRP022011].[dbo].[Sales_Data]  S where S.PartyCode = a.ACCODE and InvoiceDate BETWEEN '2011-01-01' AND '2011-12-31')
--TotalSalesAMT= (SELECT max(STHEAD.BILLDATE)from sthead where STHEAD.CLSUP = a.ACCODE),

From ACCMST a full join accsub b on    a.accode=b.accode where  a.GRPCD LIKE 'SDD%' and a.LOCK=0 
```

从上面的视图我使用数据从下面的查询中显示客户销售趋势

```
SELECT
       [PartyCode]
      ,[PartyName]
      ,[DivisionName]
      ,[SalesLocation]
      ,[InvRoute]
      ,[RouteManager]
      ,[ChannelName]
      ,[CustomerGroupName]
      ,[CustomerCategory]
      ,[InvoiceDate]
      ,[BrandName]
      ,[CATEGORY]
      ,[ItemCode]
      ,[ItemName]
      ,[SALESQTY]
      ,[SALESAMT]
      ,[NetSales]
  CustomerTrend= 
    (
    CASE
      WHEN SQ.SalesQty2011 = 0 and SQ.SalesQty2012 > 0 THEN 'NEW'
      WHEN SQ.SalesQty2011 > 0 and SQ.SalesQty2012 <= 0 THEN 'Lost'
      WHEN SQ.SalesQty2011 = 0 and SQ.SalesQty2012 = 0 THEN 'Inactive'
      WHEN SQ.SalesQty2012 > SQ.SalesQty2011 THEN 'Increasing'
      WHEN SQ.SalesQty2012 <= SQ.SalesQty2011 THEN 'Decreasing'

      ELSE 'Nothing' 
    END
from [Sales_Data10] WHERE InvoiceDate BETWEEN '2011-01-01' AND '2012-12-31'

  CROSS APPLY (
              SELECT ISNULL(SV.SalesQty2011, 0) AS SalesQty2011, 
                     ISNULL(SV.SalesQty2012, 0) AS SalesQty2012
              ) SQ 
```

总结一下，我需要编写查询以确保 2012 年和 2011 年的销售数量在同一时间段内。

谢谢阿里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T06:07:21.587

在不尝试解开您的大型查询的情况下，可以使用以下方法使日期范围对当天敏感：

```
SalesQty2012=(SELECT Sum(S.SALESQTY)from Sales_Data S
               where S.PartyCode = a.ACCODE and InvoiceDate BETWEEN
              '20120101' AND '2012'+right(convert(char(8), getdate(), 112),4)),
SalesQty2011=(SELECT Sum(S.SALESQTY)from [GRP022011].[dbo].[Sales_Data]  S
               where S.PartyCode = a.ACCODE and InvoiceDate BETWEEN
              '20110101' AND '2011'+right(convert(char(8), getdate(), 112),4)) 
```

使用日期文字的注意事项 - 使用 ISO-8601 格式**YYYYMMDD**或**YYYY-MM-DDTHH:MM:SS**。改变的工作方式是

1.  `convert(char(8), getdate(), 112)`将当前日期返回为 YYYYMMDD
2.  `RIGHT(.., 4)`只保留 MMDD 部分
3.  `'2012' + RIGHT(..)`构成 2012 年 MMDD 的日子，2011 年也是如此

这可确保它始终在两年之间进行同类比较（相同日期范围）。

# android - RGB到HSV颜色转换android使用Opencv

> ID：13373767
> 
> 赞同：0
> 
> 时间：2012-11-14T05:57:54.743
> 
> 标签：android, image-processing, opencv, colors, hsv

我已经尝试使用我的代码从相机拍照并将其从 RGB 转换为 HSV 颜色空间，但结果没有显示 HSV 颜色，它显示了一些不寻常的东西，请看看这里是我的代码

```
public void onCreate(Bundle savedInstanceState) {
   super.onCreate(savedInstanceState);
   setContentView(R.layout.main);
   Button buttonImageCapture = (Button)findViewById(R.id.captureimage);
   imageiewImageCaptured = (ImageView)findViewById(R.id.imagecaptured);

   buttonImageCapture.setOnClickListener(buttonImageCaptureOnClickListener);
}

Button.OnClickListener buttonImageCaptureOnClickListener
= new Button.OnClickListener(){

@Override
public void onClick(View arg0) {
// TODO Auto-generated method stub
Intent intent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
startActivityForResult(intent, 0);

}};

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
// TODO Auto-generated method stub
super.onActivityResult(requestCode, resultCode, data);
//try{
if (resultCode == RESULT_OK)
{
Bundle extras = data.getExtras();
Bitmap bmp = (Bitmap) extras.get("data");

bmp = bmp.copy(Bitmap.Config.ARGB_8888, true);
Mat newmat = Utils.bitmapToMat(bmp);

Mat mHSV = new Mat();
Imgproc.cvtColor(newmat, mHSV, Imgproc.COLOR_BGR2HSV,3);

Bitmap newbmp = Bitmap.createBitmap(newmat.cols(), newmat.rows(), Bitmap.Config.ARGB_8888);
Utils.matToBitmap(mHSV, newbmp);

imageiewImageCaptured.setImageBitmap(newbmp);

  }
  }
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-23T20:28:38.430

```
Imgproc.cvtColor(rgba, mhsv , Imgproc.COLOR_RGB2HSV_FULL);

        Imgproc.cvtColor(mhsv, rgba, Imgproc.COLOR_RGB2RGBA); 
```

您需要将 HSV 从 3 通道转换为 4 通道，因为 Android 无法在 3 通道中显示 Mat。有关更多信息，请参阅此内容。

# mysql - 重写搜索查询

> ID：13373772
> 
> 赞同：0
> 
> 时间：2012-11-14T05:58:33.487
> 
> 标签：mysql

我有一个准系统搜索系统，它变得更加复杂，并且出现了许多奇怪的问题。如何重写此搜索查询以更准确和高效

该`tbl_notes`表只有 id，`course`但为了将其添加到搜索中，我也使用了内部查询来检查它。这有很多问题，我在 mysql 方面不太强，任何帮助将不胜感激。

TBL_注意：

```
[id][user_id][note_title][note_title][topic][course][note] 
```

TBL_课程：

```
 [id][user_id][course_name]

   SELECT * FROM `tbl_notes` 
    WHERE `active` = '0' 
    AND `valid_note` = '0' 
    AND `user_id` = '33' 
    AND `note` LIKE '%biology%' 
    OR `topic` LIKE '%biology%' 
    OR `note_title` LIKE '%biology%' 
    OR `course` IN (SELECT `id` FROM tbl_courses WHERE `course_name` LIKE '%biology%' AND user_id = '33') 
    ORDER BY id DESC LIMIT 0, 6 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T06:54:37.123

我会这样写：

```
SELECT
  DISTINCT n.*
FROM
  `tbl_notes` n left join `tbl_courses` c
  on n.course = c.id
WHERE
  n.`user_id` = '33'
  AND n.`active` = '0' 
  AND n.`valid_note` = '0'
  AND (n.`note` LIKE '%biology%' 
       OR n.`topic` LIKE '%biology%' 
       OR n.`note_title` LIKE '%biology%' 
       OR c.`course_name` LIKE '%biology%') 
ORDER BY n.id DESC LIMIT 0, 6 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T06:41:45.387

也许 ？：

```
 SELECT * FROM `tbl_notes` 
    WHERE `active` = '0' 
    AND `valid_note` = '0' 
    AND `user_id` = '33' 
    AND 
   (`note` LIKE '%biology%' 
    OR `topic` LIKE '%biology%' 
    OR `note_title` LIKE '%biology%' 
    OR `course` IN (SELECT `id` FROM tbl_courses WHERE `course_name` LIKE '%biology%' AND user_id = '33') 
    )
    ORDER BY id DESC LIMIT 0, 6 
```

# java - Lucene搜索数据库

> ID：13373774
> 
> 赞同：1
> 
> 时间：2012-11-14T05:58:40.820
> 
> 标签：java

使用 Lucene，我可以搜索单个表。即使我按关键字搜索，它也会给我结果。但是当我申请 2 张桌子时也是如此。没有找到任何结果。我制作了 2 个索引器对象来搜索 2 个不同的表。我是Lucene的新手请帮忙。

# java - 不能从静态上下文中引用非静态类

> ID：13373779
> 
> 赞同：44
> 
> 时间：2012-11-14T05:59:03.083
> 
> 标签：java, inner-classes

> **可能重复：**
> [为什么我得到“不能从静态上下文引用的非静态变量”？](https://stackoverflow.com/questions/10301907/why-do-i-get-non-static-variable-this-cannot-be-referenced-from-a-static-contex)

这是代码

```
public class Stack
{
    private class Node{
        ...
    }
    ...
    public static void main(String[] args){
         Node node = new Node(); // generates a compiling error
    }
} 
```

错误说：

> 不能从静态上下文引用非静态类**节点**

为什么我不应该在我的 main() 方法中引用 Node 类？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-11-14T06:05:54.000

A non-static nested class in Java contains an implicit reference to an *instance* of the parent class. Thus to instantiate a `Node`, you would need to also have an instance of `Stack`. In a static context (the main method), there is no instance of `Stack` to refer to. Thus the compiler indicates it can not construct a `Node`.

If you make `Node` a static class (or regular outer class), then it will not need a reference to `Stack` and can be instantiated directly in the static main method.

See the [Java Language Specification, Chapter 8](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html) for details, such as Example 8.1.3-2.

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-11-14T06:05:19.117

Non-static nested classes (inner classes) have access to other members of the enclosing class, even if they are declared private. Static nested classes do not have access to other members of the enclosing class. As a member of the OuterClass, a nested class can be declared private, public, protected, or package private.

To instantiate an inner class, you must first instantiate the outer class. Then, create the inner object within the outer object with this syntax : `OuterClass.InnerClass innerObject = outerObject.new InnerClass();`

```
public static void main(String[] args){
         Stack stack = new Stack();
         Stack.Node node = new Stack().new Node();
    } 
```

or

```
public class Stack
{
    private class Node{
        ...
    }
    ...
    ...
    ...  

    public static void main(String[] args){
             Node node = new Stack().new Node(); 
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-14T06:03:55.050

**或者您可以在之外**声明类Node`public class Stack`

像这样，

```
 public class Stack
    {

        public static void main(String[] args){
             Node node = new Node();         
}        
    }  
    class Node{

    } 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-14T06:09:48.673

Java has [two types of nested member classes](http://docs.oracle.com/javase/tutorial/java/javaOO/nested.html): static and non-static (aka inner). The `Node` class is a non-static nested class. In order to create an instance of a `Node` you must have an instance of a `Stack`:

```
Stack s = new Stack();
Node n = s.new Node(); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-14T06:02:54.920

让你的 ( `Node`) 类`static`

```
private static class Node { 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-14T06:09:29.110

If you use Eclipse IDE, you would see the explanation when you hover over the error. It should say something like this:

> No enclosing instance of type Stack is accessible. Must qualify the allocation with an enclosing instance of type Stack (e.g. x.new A() where x is an instance of Stack).

Here is working code

```
public static void main(String[] args){
    Stack stack = new Stack();
     Node node = stack.new Node(); 
} 
```

# javascript - 如何在tinymce中使模板内容不可编辑

> ID：13373780
> 
> 赞同：3
> 
> 时间：2012-11-14T05:59:06.927
> 
> 标签：javascript, jquery, html, tinymce

我已经创建了 html 模板文件，我在该模板中放置了一些不可编辑的元素。

template.html 包含

```
<body>
<div>This is a sample template </div>
<div contenteditable="false" style="color:red">Read Only Text</div>
</body> 
```

在将此模板文件插入 textarea 时，第二个 div 是可编辑的，在检查该 div 时，我发现属性**contenteditable="false"**在插入时不存在，但在插入模板之前的预览中存在。

任何帮助都感激不尽！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T06:16:12.120

从这个页面：[http ://www.tinymce.com/tryit/noneditable_content.php](http://www.tinymce.com/tryit/noneditable_content.php)

它使用文本区域：

```
 <textarea name="content" style="width:100%">
    &lt;p&gt;Text with a &lt;span class="mceNonEditable"&gt;[non editable]&lt;/span&gt; inline element.&lt;/p&gt;
    &lt;p class="mceNonEditable"&gt;Noneditable text block with &lt;span class="mceEditable"&gt;[editable]&lt;/span&gt; items within.&lt;/p&gt;
    &lt;p&gt;Text with tokens that isn't [[editable]] since they match the noneditabe_regexp.&lt;/p&gt;
  </textarea> 
```

这里的关键是在您的元素中放置一个 mceNonEditable 类：

```
span class="mceNonEditable" 
```

然后，无论您拥有什么不可编辑的内容，都将其包装为大于和小于：

```
&gt;You cannot edit me&lt; 
```

然后最后关闭元素：

```
/span 
```

我认为您还可以在初始化tinymce时更改模式（在示例中他们使用的是textareas，所以我想您也可以使用div或span）：

```
tinyMCE.init({
        mode : "textareas",
        noneditable_regexp: /\[\[[^\]]+\]\]/g
}); 
```

还有 noneditable_regexp 可让您指定不可编辑内容的正则表达式。我认为这比使用 html 实体更容易。

我实际上并没有尝试过，但这就是我解释页面中示例的方式。

# mysql - vb.net 中登录表单的哈希密码

> ID：13373781
> 
> 赞同：2
> 
> 时间：2012-11-14T05:59:16.793
> 
> 标签：mysql, vb.net, winforms, visual-studio-2010, hashcode

我有一个`Login form`，我还没有对密码做任何事情`hashing`，我一直在这里和那里阅读关于哈希的内容，但它真的让我感到困惑，并且真的不知道如何在我的登录表单代码中实现它。 **我看到的散列代码**

```
Dim bytes() as byte  = System.Text.Encoding.UTF8.GetBytes(stringPassword);
dim  hashOfBytes() as byte = new System.Security.Cryptography.SHA1Managed().ComputeHash(bytes)
Dim strHash as string = Convert.ToBase64String(hashOfBytes) 
```

**转换回字节**

```
hashOfBytes = Convert.FromBase64String(strHash) 
```

**我的登录表单代码**

```
Using conn As New MySqlConnection("Server = localhost; Username= root; Password =; Database = forms")
    Using cmd
        With cmd
            MsgBox("Connection Established")
            .Connection = conn
            .Parameters.Clear()
            .CommandText = "SELECT * FROM users WHERE BINARY Username = @iUsername AND Password = @iPassword"
            .Parameters.Add(New MySqlParameter("@iUsername", txtUser.Text))
            .Parameters.Add(New MySqlParameter("@iPassword", txtPass.Text))

        End With
        Try
            conn.Open()
            dr = cmd.ExecuteReader()
        Catch ex As MySqlException
            MsgBox(ex.Message.ToString())
        End Try
    End Using
End Using

If dr.HasRows = 0 Then

    MsgBox("Invalid user")
    Conn.Close()

Else

    Start.Show()
    Conn.Close()

End If
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T09:10:54.233

您应该将密码的哈希值存储在表的密码字段中。
然后您搜索用户和密码哈希，而不是直接搜索从输入框中获取的密码。

但是，您的代码仍然会失败，因为您在处理连接后尝试使用 MySqlDataReader。移动 Using 块内的行检查

```
 Dim strHash as string = Convert.ToBase64String(hashOfBytes)
 .....
 Dim userIsValid as Boolean = False
 Using conn As New MySqlConnection(.........)
 Using cmd
    ....
        .Parameters.Add(New MySqlParameter("@iPassword", strHashPass))
        Try
            conn.Open()
            dr = cmd.ExecuteReader()
            userIsValid = dr.HasRows
        Catch ex As MySqlException
            MsgBox(ex.Message.ToString())
        End Try
  End Using
  End Using

  if userIsValid then
      .....
  else
      .....
  End 
```

# excel - 获取文件夹中所有 excel 文件的原始创建时间

> ID：13373787
> 
> 赞同：3
> 
> 时间：2012-11-14T05:59:43.783
> 
> 标签：excel, vba

我需要遍历一个包含许多 excel 文件的文件夹，并将文件名和创建时间提取到一个文本文件中。创建时间是指文件最初创建的时间，而不是它在我的系统上创建的时间。

以下代码有效，但给了我错误的时间。我认为`FileDateTime`是错误的命令，但是经过一个小时的绝望谷歌搜索后，我无法找到正确的命令。

在此先感谢您的帮助！

```
Sub CheckFileTimes()
    Dim StrFile As String
    Dim thisBook As String
    Dim creationDate As Date
    Dim outputText As String
    Const ForReading = 1, ForWriting = 2
    Dim fso, f

'set up output file
   Set fso = CreateObject("Scripting.FileSystemObject")
   Set f = fso.OpenTextFile("C:\TEST.txt", ForWriting, True)

'open folder and loop through
    StrFile = Dir("c:\HW\*.xls*")
    Do While Len(StrFile) > 0
'get creation date
       creationDate = FileDateTime("C:\HW\" & StrFile)
'get filename
       thisBook = StrFile
       outputText = thisBook & "," & creationDate
'write to output file
       f.writeLine outputText
'move to next file in folder
       StrFile = Dir
    Loop
    f.Close
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T06:21:55.977

您可以`DateCreated`与`FileSystemObject`.

对您当前的代码进行一个小调整就可以做到这一点

我也调整了变量

```
Sub CheckFileTimes()
Dim StrFile As String
Dim StrCDate As Date
Dim fso As Object
Dim f As Object

'set up output file
   Set fso = CreateObject("Scripting.FileSystemObject")
   Set f = fso.OpentextFile("C:\TEST.txt", 2, True)

'open folder and loop through
    StrFile = Dir("c:\HW\*.xls*")
    Do While Len(StrFile) > 0
    Set objFile = fso.getfile("c:\HW\" & StrFile)
'get creation date
       StrCDate = objFile.datecreated
'write to output file
       f.writeLine StrFile & "," & StrCDate
'move to next file in folder
       StrFile = Dir
    Loop
    f.Close
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T06:48:05.083

韦尔普，我找到了答案。看起来我并不太远（尽管我认为这不是最佳的）。感谢所有看过这个的人。

```
Sub CheckFileTimes3()
    Dim StrFile, thisBook, outputText As String
    Dim creationDate As Date
    Dim fso, f
    Dim oFS As Object
    Const ForReading = 1, ForWriting = 2

    Application.ScreenUpdating = False
    Application.DisplayAlerts = False
    Application.EnableEvents = False

    'open txt file for storing results
   Set fso = CreateObject("Scripting.FileSystemObject")
   Set f = fso.OpenTextFile("C:\TEST.txt", ForWriting, True)

    'loop through all files in given folder
    StrFile = Dir("c:\HW\*.xls*")
    Do While Len(StrFile) > 0
       Workbooks.Open Filename:="C:\HW\" & StrFile
       creationDate = ActiveWorkbook.BuiltinDocumentProperties("Creation Date")
       thisBook = StrFile
       outputText = thisBook & "," & creationDate
       'MsgBox outputText
       f.writeLine outputText
       ActiveWorkbook.Close
       StrFile = Dir
    Loop
    f.Close

    Application.ScreenUpdating = True
    Application.DisplayAlerts = True
    Application.EnableEvents = True
End Sub 
```

# android - Android双对话框

> ID：13373790
> 
> 赞同：1
> 
> 时间：2012-11-14T05:59:58.413
> 
> 标签：android, dialog

我在加载页面时向用户显示一个**对话框**。如果我在关闭前一个对话框之前显示**另一个对话框**会有什么问题吗？

我已经对其进行了测试，并且工作正常。只是想确定一下。

我需要这样做是因为--当用户单击按钮时，我会显示**加载**对话框并在后台验证用户身份。如果我关闭此对话框，则滞后 2 秒（特别是当网络非常慢时） ，在用户移动到下一个活动之前。

我正在显示另一个对话框，以便用户在完成所有后台工作之前留在该活动中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T06:12:35.047

当你显示一个或两个对话框时是没有问题的，但是如果你增加对话框的数量，那么你的应用程序对用户来说变得复杂，不符合用户友好的原则。您可以在应用程序的不同位置使用更多对话框。如果您尝试连续显示三个或四个以上的对话框，那么您的应用程序将无法满足质量要求。

# javascript - 第一天有角；我究竟做错了什么？

> ID：13373792
> 
> 赞同：0
> 
> 时间：2012-11-14T06:00:00.820
> 
> 标签：javascript, angularjs

这是我的第一天，我试图做一个简单的工作，但事实并非如此。这是一个小提琴：http: [//jsfiddle.net/LKktL/](http://jsfiddle.net/LKktL/)

```
<body ng-app>
 <div ng-controller='EventAddCtrl'>
    <p>Nothing here {{'yet' + '!'}}</p>
 <div class='first-test' ng-click="say_hello()">angular test to say hello</div>
</div>   
</body> 
```

​</p>

```
function EventAddCtrl($scope){
  $scope.say_hello = function() {
    alert('hello in there');
  }
}​ 
```

它显然不起作用并试图找出原因。提前谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T07:38:17.507

在您的 JSFiddle 中，Angular 正在`onLoad`事件期间执行。打开浏览器控制台，你会发现 Angular 抛出以下错误

```
 Error: Argument 'EventAddCtrl' is not a function, got undefined 
```

您的应用未能初始化。

该`onLoad`事件在文档加载过程结束时触发。Angular 在事件期间初始化您的应用程序，该`DOMContentLoaded`事件在 DOM 被解析之后但**在**DOM 准备就绪之前和文档完全加载之前被触发。换句话说，确保库在任何这些事件之前被解析和执行，方法是在HTML 标记`<head>`之间包含它。`<body>`一个好的做法是将它放在结束`<body>`标记之前。

正如其他人所提到的，在使用 JSFiddle 时，请使用`no wrap(head)`或`no wrap(body)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T07:07:57.580

你的小提琴有两个错误的用法。

1.  不需要选择 onload，选择 no wrap(head) 或 no wrap(body) 都可以。
2.  不需要`<body>`在已经存在的 html 面板中放置标签，并展开左侧面板中的**信息**菜单，用. 填充**Body 标签**`<body ng-app>`。

有关更多信息，请查看此页面[小提琴文档](http://doc.jsfiddle.net/basic/introduction.html#choose-framework)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T06:25:29.623

jsFiddle 有一些设置问题。这是工作的[jsFiddle](http://jsfiddle.net/LKktL/9/)

你可以试试[plunker](http://plnkr.co)。它像 jsFiddle 一样工作得很好。

1.添加正文标签`<body ng-app>`

2.pick“不换行（头）”

# android - Graph Api 未从 Android 中的 Facebook SDK 获取位置

> ID：13373794
> 
> 赞同：4
> 
> 时间：2012-11-14T06:00:49.163
> 
> 标签：android, facebook, facebook-graph-api

我在我的 Android 应用程序中使用 Facebook SDK。我需要获取用户的所有信息。到目前为止，我可以获取姓名 ID 电子邮件生日和用户的个人资料图片。我需要获取的最后一个是用户的位置或当前位置。我在下面使用此代码。

```
if(fb.isSessionValid()){
            button.setImageResource(R.drawable.logout_button);

            JSONObject obj = null;
            URL img = null;

             try {
                    String jsonUser = fb.request("me");
                    obj = Util.parseJson(jsonUser);
                    String id = obj.optString("id");
                    String name = obj.optString("name");
                    String bday = obj.optString("birthday");
                    String address = obj.optString("location");
                    String email = obj.optString("email");
                    ((TextView) findViewById(R.id.txt)).setText("Welcome! "+name);
                    ((TextView) findViewById(R.id.txtbday)).setText("Birthday: "+bday);
                    ((TextView) findViewById(R.id.txtaddress)).setText("Address: "+address);
                    ((TextView) findViewById(R.id.txtemail)).setText("Email: "+email);
                    img = new URL("http://graph.facebook.com/"+id+"/picture?type=normal");
                    Bitmap bmp = BitmapFactory.decodeStream(img.openConnection().getInputStream());
                    pic.setImageBitmap(bmp);

                } catch (FacebookError e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (JSONException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (MalformedURLException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

        }else{
            button.setImageResource(R.drawable.login_button);
        }
    } 
```

这里是权限

```
fb.authorize(MainActivity.this,new String[] {"email", "user_location", "user_birthday","publish_stream"}, new DialogListener() {

                public void onFacebookError(FacebookError e) {
                    // TODO Auto-generated method stub
                    Toast.makeText(getApplicationContext(), ""+e, Toast.LENGTH_SHORT).show();   
                    e.printStackTrace();
                }

                public void onError(DialogError e) {
                    // TODO Auto-generated method stub
                    //Toast.makeText(getApplicationContext(), "Error", Toast.LENGTH_SHORT).show();      
                }

                public void onComplete(Bundle values) {
                    // TODO Auto-generated method stub
                    Editor editor = sp.edit();
                    editor.putString("access_token", fb.getAccessToken());
                    editor.putLong("access_expires", fb.getAccessExpires());
                    editor.commit();
                    updateButtonImage();
                }

                public void onCancel() {
                    // TODO Auto-generated method stub
                    Toast.makeText(getApplicationContext(), "Cancel", Toast.LENGTH_SHORT).show();   
                }
            });
        } 
```

感谢谁会在高级方面提供帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T07:28:55.720

Graph API Explorer 工具是查看图形 API 端点响应的好方法。只需通过单击“获取访问令牌”请求正确的权限（例如`user_location`）并查看“/我”的输出。当我获得具有权限的访问令牌时，`user_location`我可以看到我当前的

[https://developers.facebook.com/tools/explorer/?method=GET&path=me](https://developers.facebook.com/tools/explorer/?method=GET&path=me)

要获取当前位置，请执行以下操作：

```
String currentCity = obj.getJSONObject("location").getString("name"); 
```

使用较新的 SDK，您可以通过以下方式与图形 API 对象一起传递来获取位置详细信息

```
graphObject.getInnerJSONObject().getJSONObject("location").getString("id")) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-08T08:28:32.417

从这里下载源代码（[在 android 中使用 Graph API 获取 facebook 用户的位置](https://wordpress.com/posts/deepshikhapuri.wordpress.com)）

**activity_main.xml**

```
<LinearLayout android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    xmlns:android="http://schemas.android.com/apk/res/android">

    <ImageView
        android:layout_width="100dp"
        android:layout_height="100dp"
        android:id="@+id/iv_image"
        android:layout_marginTop="10dp"
        android:layout_marginBottom="10dp"
        android:layout_gravity="center_horizontal"
        android:src="@drawable/profile"/>

    <LinearLayout
        android:layout_width="match_parent"
        android:orientation="horizontal"
        android:layout_height="wrap_content">
        <TextView
            android:layout_width="100dp"
            android:layout_height="40dp"
            android:text="Name"
            android:gravity="center_vertical"
            android:textSize="15dp"
            android:textColor="#000000"

            android:layout_marginLeft="10dp"
            android:layout_marginTop="10dp"/>

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="40dp"
            android:text="Name"
            android:textSize="15dp"
            android:id="@+id/tv_name"
            android:gravity="center_vertical"
            android:textColor="#000000"
            android:layout_marginLeft="10dp"
            android:layout_marginTop="10dp"/>

    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal">

    <TextView
        android:layout_width="100dp"
        android:layout_height="40dp"
        android:text="Email"
        android:gravity="center_vertical"
        android:textSize="15dp"
        android:layout_below="@+id/tv_name"
        android:textColor="#000000"
        android:layout_marginLeft="10dp"
        android:layout_marginTop="10dp"/>

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="40dp"
        android:layout_below="@+id/tv_name"
        android:text="Email"
        android:gravity="center_vertical"
        android:textSize="15dp"
        android:id="@+id/tv_email"
        android:textColor="#000000"
        android:layout_marginLeft="10dp"
        android:layout_marginTop="10dp"/>
    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal">

        <TextView
            android:layout_width="100dp"
            android:layout_height="40dp"
            android:text="DOB"
            android:gravity="center_vertical"
            android:textSize="15dp"
            android:textColor="#000000"
            android:layout_marginLeft="10dp"
            android:layout_marginTop="10dp"/>

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="40dp"
            android:layout_below="@+id/tv_name"
            android:text="DOB"
            android:gravity="center_vertical"
            android:textSize="15dp"
            android:id="@+id/tv_dob"
            android:layout_toRightOf="@+id/tv_email"
            android:textColor="#000000"
            android:layout_marginLeft="10dp"
            android:layout_marginTop="10dp"/>
    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal">

        <TextView
            android:layout_width="100dp"
            android:layout_height="40dp"
            android:text="Location"
            android:gravity="center_vertical"
            android:textSize="15dp"
            android:textColor="#000000"
            android:layout_marginLeft="10dp"
            android:layout_marginTop="10dp"/>

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="40dp"
            android:layout_below="@+id/tv_name"
            android:text="location"
            android:gravity="center_vertical"
            android:textSize="15dp"
            android:id="@+id/tv_location"
            android:textColor="#000000"
            android:layout_marginLeft="10dp"
            android:layout_marginTop="10dp"/>
    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:background="#6585C8"
        android:id="@+id/ll_facebook"
        android:layout_marginLeft="10dp"
        android:layout_marginRight="10dp"
        android:layout_marginTop="40dp"
        android:layout_height="50dp">

        <ImageView
            android:layout_width="50dp"
            android:src="@drawable/facebook"
            android:id="@+id/iv_facebook"
            android:layout_height="50dp" />

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Login with Facebook"
            android:textSize="20dp"
            android:textColor="#FFFFFF"
            android:textStyle="bold"
            android:id="@+id/tv_facebook"
            android:layout_marginLeft="20dp"
            android:gravity="center"
            android:layout_gravity="center"

            />

    </LinearLayout>

    </LinearLayout> 
```

**MainActivity.java**

```
package facebooklocation.facebooklocation;

import android.content.Intent;
import android.content.pm.PackageInfo;
import android.content.pm.PackageManager;
import android.content.pm.Signature;
import android.support.v7.app.AppCompatActivity;
import android.os.Bundle;
import android.util.Base64;
import android.util.Log;
import android.view.View;
import android.widget.ImageView;
import android.widget.LinearLayout;
import android.widget.TextView;
import com.bumptech.glide.Glide;
import com.facebook.AccessToken;
import com.facebook.CallbackManager;
import com.facebook.FacebookCallback;
import com.facebook.FacebookException;
import com.facebook.FacebookSdk;
import com.facebook.GraphRequest;
import com.facebook.GraphResponse;
import com.facebook.HttpMethod;
import com.facebook.login.LoginManager;
import com.facebook.login.LoginResult;
import org.json.JSONObject;
import java.security.MessageDigest;
import java.security.NoSuchAlgorithmException;
import java.util.Arrays;

public class MainActivity extends AppCompatActivity implements View.OnClickListener {

    CallbackManager callbackManager;
    ImageView iv_image, iv_facebook;
    TextView tv_name, tv_email, tv_dob, tv_location, tv_facebook;
    LinearLayout ll_facebook;
    String str_facebookname, str_facebookemail, str_facebookid, str_birthday, str_location;
    boolean boolean_login;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        init();
        getKeyHash();
        listener();
    }

    private void init() {
        iv_image = (ImageView) findViewById(R.id.iv_image);
        iv_facebook = (ImageView) findViewById(R.id.iv_facebook);
        tv_name = (TextView) findViewById(R.id.tv_name);
        tv_email = (TextView) findViewById(R.id.tv_email);
        tv_dob = (TextView) findViewById(R.id.tv_dob);
        tv_location = (TextView) findViewById(R.id.tv_location);
        tv_facebook = (TextView) findViewById(R.id.tv_facebook);
        ll_facebook = (LinearLayout) findViewById(R.id.ll_facebook);
        FacebookSdk.sdkInitialize(this.getApplicationContext());
    }

    private void listener() {
        tv_facebook.setOnClickListener(this);
        ll_facebook.setOnClickListener(this);
        iv_facebook.setOnClickListener(this);

    }

    private void facebookLogin() {
        callbackManager = CallbackManager.Factory.create();
        LoginManager.getInstance().registerCallback(callbackManager, new FacebookCallback<LoginResult>() {
            @Override
            public void onSuccess(LoginResult loginResult) {
                Log.e("ONSUCCESS", "User ID: " + loginResult.getAccessToken().getUserId()
                        + "\n" + "Auth Token: " + loginResult.getAccessToken().getToken()
                );
                GraphRequest request = GraphRequest.newMeRequest(loginResult.getAccessToken(),
                        new GraphRequest.GraphJSONObjectCallback() {
                            @Override
                            public void onCompleted(JSONObject object, GraphResponse response) {
                                try {

                                    boolean_login = true;
                                    tv_facebook.setText("Logout from Facebook");

                                    Log.e("object", object.toString());
                                    str_facebookname = object.getString("name");

                                    try {
                                        str_facebookemail = object.getString("email");
                                    } catch (Exception e) {
                                        str_facebookemail = "";
                                        e.printStackTrace();
                                    }

                                    try {
                                        str_facebookid = object.getString("id");
                                    } catch (Exception e) {
                                        str_facebookid = "";
                                        e.printStackTrace();

                                    }

                                    try {
                                        str_birthday = object.getString("birthday");
                                    } catch (Exception e) {
                                        str_birthday = "";
                                        e.printStackTrace();
                                    }

                                    try {
                                        JSONObject jsonobject_location = object.getJSONObject("location");
                                        str_location = jsonobject_location.getString("name");

                                    } catch (Exception e) {
                                        str_location = "";
                                        e.printStackTrace();
                                    }

                                    fn_profilepic();

                                } catch (Exception e) {

                                }
                            }
                        });
                Bundle parameters = new Bundle();
                parameters.putString("fields", "id, name, email,gender,birthday,location");

                request.setParameters(parameters);
                request.executeAsync();
            }

            @Override
            public void onCancel() {
                if (AccessToken.getCurrentAccessToken() == null) {
                    return; // already logged out
                }
                new GraphRequest(AccessToken.getCurrentAccessToken(), "/me/permissions/", null, HttpMethod.DELETE, new GraphRequest
                        .Callback() {
                    @Override
                    public void onCompleted(GraphResponse graphResponse) {
                        LoginManager.getInstance().logOut();
                        LoginManager.getInstance().logInWithReadPermissions(MainActivity.this, Arrays.asList("public_profile,email"));
                        facebookLogin();

                    }
                }).executeAsync();

            }

            @Override
            public void onError(FacebookException e) {
                Log.e("ON ERROR", "Login attempt failed.");

                AccessToken.setCurrentAccessToken(null);
                LoginManager.getInstance().logInWithReadPermissions(MainActivity.this, Arrays.asList("public_profile,email,user_birthday"));
            }
        });
    }

    @Override
    public void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);

        try {
            callbackManager.onActivityResult(requestCode, resultCode, data);
        } catch (Exception e) {

        }

    }

    private void getKeyHash() {
        // Add code to print out the key hash
        try {
            PackageInfo info = getPackageManager().getPackageInfo("facebooklocation.facebooklocation", PackageManager.GET_SIGNATURES);
            for (Signature signature : info.signatures) {
                MessageDigest md = MessageDigest.getInstance("SHA");
                md.update(signature.toByteArray());
                Log.d("KeyHash:", Base64.encodeToString(md.digest(), Base64.DEFAULT));
            }
        } catch (PackageManager.NameNotFoundException e) {

        } catch (NoSuchAlgorithmException e) {

        }
    }

    private void fn_profilepic() {

        Bundle params = new Bundle();
        params.putBoolean("redirect", false);
        params.putString("type", "large");
        new GraphRequest(
                AccessToken.getCurrentAccessToken(),
                "me/picture",
                params,
                HttpMethod.GET,
                new GraphRequest.Callback() {
                    public void onCompleted(GraphResponse response) {

                        Log.e("Response 2", response + "");

                        try {
                            String str_facebookimage = (String) response.getJSONObject().getJSONObject("data").get("url");
                            Log.e("Picture", str_facebookimage);

                            Glide.with(MainActivity.this).load(str_facebookimage).skipMemoryCache(true).into(iv_image);

                        } catch (Exception e) {
                            e.printStackTrace();
                        }

                        tv_name.setText(str_facebookname);
                        tv_email.setText(str_facebookemail);
                        tv_dob.setText(str_birthday);
                        tv_location.setText(str_location);

                    }
                }
        ).executeAsync();
    }

    @Override
    public void onClick(View view) {

        if (boolean_login) {
            boolean_login = false;
            LoginManager.getInstance().logOut();
            tv_location.setText("");
            tv_dob.setText("");
            tv_email.setText("");
            tv_name.setText("");
            Glide.with(MainActivity.this).load(R.drawable.profile).into(iv_image);
            tv_facebook.setText("Login with Facebook");
        } else {
            LoginManager.getInstance().logInWithReadPermissions(MainActivity.this, Arrays.asList("public_profile,email,user_birthday,user_location"));
            facebookLogin();
        }

    }

    @Override
    protected void onDestroy() {
        super.onDestroy();
        LoginManager.getInstance().logOut();
    }
} 
```

谢谢！

# php - 在两个 phpMyAdmin 表之一中插入多个（fk）数据

> ID：13373795
> 
> 赞同：1
> 
> 时间：2012-11-14T06:01:08.253
> 
> 标签：php, mysql, insert, phpmyadmin

**你好。这些是我的结构：

我在 phpMyAdmin 中有 2 个表：

*   类（classid（pk），className）
*   学生 ( studentid(pk), classid(fk), studentName ) 1 个 form.php 和 1 个 form_post.php

我在 form.php 中完成了这个**

```
include_once("connection.php");

    $className= $_POST["className"];
    $studentName1= $_POST["studentName1"];
    $studentName2= $_POST["studentName2"];
    $studentName3= $_POST["studentName30"];

    $sql = "insert into class(className) values ('$className')";

    mysql_query($sql);

    $lastid=mysql_insert_id();

    $sql2= "INSERT INTO students (studentid, classid, studentName)
            VALUES (' ', $lastid, '$studentName')";

    mysql_query($sql2); 
```

**form_post.php：**

```
 <tr>
              <td width="140"><span class="order">Class Name: </span></td>
              <td><span class="order">
                <input name="className" type="text" id="className" size="35" />
              </span></td>
            </tr>
            <tr>
              <td width="132"><span class="order">Student's Name: </span></td>
              <td><span class="order">
                <input type="text" name="studentName1" id="studentName1" />
              </span></td>
            </tr>
           <tr>
              <td width="132"><span class="order">Student's Name: </span></td>
              <td><span class="order">
                <input type="text" name="studentName2" id="studentName2" />
              </span></td>
            </tr>
            <tr>
              <td width="132"><span class="order">Student's Name: </span></td>
              <td><span class="order">
                <input type="text" name="studentName3" id="studentName3" />
              </span></td>
            </tr> 
```

这是一种用于在其中注册班级和学生的表格。在 phMyAdmin 学生表中，studentid(pk) 有一个字段/列，classid(fk) 有一个字段/列，studentName 有一个字段/列，而我从朋友那里得到的这段代码有 3 个学生姓名字段。如何使用相同的班级外键将 3 个学生姓名插入 phpMyAdmin 学生表的 studentName 列？红色的词是令人困惑的词。我仍然是一个初学者，我整晚都在努力完成这项工作。但是，我仍然卡住了。谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T06:10:23.430

您可以使用插入多行，具体取决于您是否将相同的数据插入到相同的表中

逃避你的价值观总是好的

```
$className= mysql_real_escape_string($_POST["className"]));
$studentName1= mysql_real_escape_string($_POST["studentName1"]);
$studentName2= mysql_real_escape_string($_POST["studentName2"]);
$studentName3= mysql_real_escape_string($_POST["studentName3"]);

$sql2= "INSERT INTO students (studentid, classid, studentName)
        VALUES (' ', $lastid, '$studentName1'),
               (' ', $lastid, '$studentName2'),
               (' ', $lastid, '$studentName3')";

mysql_query($sql2); 
```

建议：

1.学会防止MySQL注入：[好链接](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php)

2.不推荐使用Mysql扩展来编写新代码。相反，应该使用 mysqli 或 PDO_MySQL 扩展。更多阅读：[PHP 手册](http://www.php.net/manual/en/mysqlinfo.api.choosing.php)

**第二种解决方案：**

```
if(!empty($studentName1)) {
  $sql2= "INSERT INTO students (studentid, classid, studentName)
            VALUES (' ', $lastid, '$studentName1')";

  mysql_query($sql2);
}

if(!empty($studentName2)) {
  $sql2= "INSERT INTO students (studentid, classid, studentName)
            VALUES (' ', $lastid, '$studentName2')";
  mysql_query($sql2);
}

if(!empty($studentName3)) {
  $sql2= "INSERT INTO students (studentid, classid, studentName)
            VALUES (' ', $lastid, '$studentName3')";
  mysql_query($sql2);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T06:06:13.010

```
$sql2= "INSERT INTO students (studentid, classid, studentName)
        VALUES (null, $lastid, '$studentName')"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T06:07:25.960

```
$sql2= "INSERT INTO students (studentid, classid, studentName)
        VALUES ('', $lastid, '$studentName')"; 
```

# php - Preg 在 php 中将抑扬符与 ^ 匹配

> ID：13373796
> 
> 赞同：0
> 
> 时间：2012-11-14T06:01:21.643
> 
> 标签：php, mysql, function, preg-match-all

我知道我会收到很多愚蠢的评论，但无论我做什么，我都无法弄清楚这一点。我这里有一个功能

```
$filter = mysql_query("SELECT * FROM `filter`");
    $fil = mysql_fetch_array($filter);
    $bad = $fil['filter'];

$bword = explode(",", $bad);
    function wordfilter($output,$bword){
    $badWords = $bword;
$matchFound = preg_match_all("/(" . implode($badWords,"|") . ")/i",$output,$matches);

if ($matchFound) {
  $words = array_unique($matches[0]);
  foreach($words as $word) {
    $output = preg_replace("/$word/","*****",$output);
  }
}
return $output;
    } 
```

我知道坏词过滤器不受欢迎，但我的客户要求这样做。

现在我在数据库中有一个列表，这里有一些条目。

```
^ass$,^asses$,^asshopper,^cock$,^coon,^cracker$,^cum$,^dick$,^fap$,^heeb$,^hell$,^homo$,^humping,^jap$,^mick$,^muff$,^paki$,^phap$,^poon$,^spic$,^tard$,^tit$,^tits$,^twat$,^vag$,ass-hat,ass-pirate,assbag 
```

如您所见，我对某些单词使用了抑扬符和美元符号。

我遇到的问题是前三个单词以`ass`它开头，即使我写了类似的东西，`glasses`或者`grasshoppers`但前三个之后的所有内容都可以正常工作，我尝试在这些之前添加 3 个条目，以防万一这是问题，但不幸的是它不是。

我写这个有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T06:59:50.210

从评论扩展：

尝试使用`\b`来检测单词：

```
$matchFound = preg_match_all('/\b('.implode($badWords,"|").')\b/i',$output,$matches); 
```

# javascript - JavaScript函数：生成指定范围和位数限制内的随机整数

> ID：13373799
> 
> 赞同：2
> 
> 时间：2012-11-14T06:01:43.043
> 
> 标签：javascript

我需要一个在用户指定的数字范围（-9999 到 9999 之间）和用户指定的位数限制（1 到 4 位之间）内生成完全随机整数（非常重要）的函数。

示例 1：如果用户想要一个介于 -9999 和 9999 之间的 4 位数字，则以下数字将是符合条件的选择 -9999 到 -1000 和 1000 到 9999。

示例 2：如果用户想要一个介于 25 和 200 之间的 2 或 3 位数字，则以下数字将是符合条件的选择 25 到 200。

我写了一个有效的函数，但我不确定它是否是最好的解决方案？有重复的代码，我不认为它是完全随机的？

```
// Generates a random integer
// Number range
// Min (-9999-9999)
// Max (-9999-9999)
// Digit limit
// Min (1-4)
// Max (1-4)

function generateRandomInteger(minNumber, maxNumber, minDigits, maxDigits) {    

// Generate a random integer in the number range
var num = Math.floor(Math.random() * (maxNumber - minNumber)) + minNumber;

// Find number of digits
var n = num.toString();
n = n.length;

// If number is negative subtract 1 from length because of "-" sign
if (num < 0) {
    n--;
}
// End: find number of digits

while ((n > maxDigits) || (n < minDigits)) {
    // Generate a random integer in the number range
    num = Math.floor(Math.random() * (maxNumber - minNumber)) + minNumber;

    // Find number of digits
    var n = num.toString();
    n = n.length;

    // If number is negative subtract 1 from length because of "-" sign
    if (num < 0) {
        n--;
    }
    // End: find number of digits
}

return num;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T06:31:35.460

尝试这种功能性方法，它会创建一个数组并随机打乱它，因此它会给出“非常随机”的结果。我以前用过它，结果非常令人满意。

```
function getLen( v ) { 
  return Math.abs( v ).toString().length; 
};
function randomInteger( min, max ) {
  return ( new Array( ++max - min ) )
    .join('.').split('.')
    .map(function( v,i ){ return [ Math.random(), min + i ] })
    .filter(function( v ){ return getLen( v[1] ) >= getLen( min ) })
    .sort().map(function( v ) { return v[1] }).pop();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T06:22:08.860

好吧，这是您的函数的一个版本，它仍然使用完全相同的方法（即，不断生成数字，直到它得到一个具有正确位数的数字），但消除了代码重复：

```
function generateRandomInteger(minNumber, maxNumber, minDigits, maxDigits) {
    var num, digits;
    do {
        num = Math.floor(Math.random() * (maxNumber - minNumber)) + minNumber;
        digits = Math.abs(num).toString().length;
    } while (digits > maxDigits || digits < minDigits);
    return num;
} 
```

至于您担心这是否*真的*是随机的，该`Math.random()`方法会给您一个“伪随机”数字，但至少您知道它适用于所有当前的浏览器。

# github - 多个客户的 Github 分支

> ID：13373803
> 
> 赞同：2
> 
> 时间：2012-11-14T06:01:58.130
> 
> 标签：github, branch, pull, master

我有一个需要部署到多个客户端的 iOS 应用程序。每个客户端在应用程序中都有一些小的更改（图像、配置文件、应用程序名称等）。95% 的应用程序对所有客户都是相同的。

我不想维护多个 git 存储库（每个客户端一个）。我宁愿有一次，每个客户都有分支机构。

我是这个分支的新手，需要知道这是否可以实现。

1.  我计划用通用图像/配置/等创建主分支。
2.  为每个客户创建一个分支
3.  使用客户图像/配置/等更新每个分支

然后，当我做出改变时，我将把它交给主人。然后将更改从 master 拉到每个分支。当我从 master 拉取时，如何阻止图像、配置等被覆盖。当我为每个分支执行此操作时，我可以定义某些可以忽略的文件吗？

有没有更好的方法来管理我需要做的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T06:21:21.983

您应该在其上拉动`master`然后重新*调整*您的分支。

有关具体示例，请参阅“ [Git：如何一次重新设置多个分支（具有相同的基本提交）？](https://stackoverflow.com/questions/866218/git-how-to-rebase-many-branches-with-the-same-base-commit-at-once) ”。

为了额外的安全性，您可以添加与您的文件关联的合并驱动程序“ ”，并在每个分支中存在`keepMine`的文件中声明该合并驱动程序。 请参阅“[如何告诉 git 始终为特定文件的冲突合并选择我的本地版本？](https://stackoverflow.com/questions/928646/how-do-i-tell-git-to-always-select-my-local-version-for-conflicted-merges-on-a-s) ”。`.gitattributes`

这将更改您的客户端分支的 SHA1，并且您将不得不强制将它们推送到客户端存储库，但是由于所述客户端没有主动修改他们身边的文件，所以这不是问题。

# deployment - 如何部署 symfony2 - 我的开发环境可以工作但不能生产

> ID：13373805
> 
> 赞同：1
> 
> 时间：2012-11-14T06:02:14.137
> 
> 标签：deployment, symfony-2.0

我已经阅读了关于将我的 symfony2 应用程序部署到生产环境的食谱。我发现它在开发模式下工作得很好，但是产品模式首先不允许登录（虽然我在开发模式下使用这些凭据登录，但说是错误的凭据），后来经过额外的清理和预热prod 缓存，我只是从我的 prod 路由中获取 http500。

我查看了配置文件，想知道这是否与它有关：

config_dev.php：

```
imports:
    - { resource: config.yml }

framework:
    router:   { resource: "%kernel.root_dir%/config/routing_dev.yml" }
    profiler: { only_exceptions: false }

web_profiler:
    toolbar: true
    intercept_redirects: false

monolog:
    handlers:
        main:
            type:  stream
            path:  %kernel.logs_dir%/%kernel.environment%.log
            level: debug
        firephp:
            type:  firephp
            level: info

assetic:
    use_controller: true 
```

配置产品：

```
imports:
    - { resource: config.yml }

#doctrine:
#    orm:
#        metadata_cache_driver: apc
#        result_cache_driver: apc
#        query_cache_driver: apc

monolog:
    handlers:
        main:
            type:         fingers_crossed
            action_level: error
            handler:      nested
        nested:
            type:  stream
            path:  %kernel.logs_dir%/%kernel.environment%.log
            level: debug 
```

我还注意到有一个 routing_dev.php 但没有 routing_prod，prod 环境工作得很好但是在我的本地主机上所以......？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T12:27:39.747

在您的生产环境中，当您运行 app/console cache:warmup 命令时，您需要确保像这样运行它：`app/console cache:warmup --env=prod --no-debug`另外，请记住该命令将以当前用户身份预热缓存，因此所有文件都将归当前用户所有用户而不是 Web 服务器用户（例如：www-data）。这可能就是您收到 500 服务器错误的原因。预热缓存后运行：（`chown -R www-data.www-data app/cache/prod`确保替换`www-data`为您的 Web 服务器用户。

确保您的*parameters.ini*文件具有任何适当的配置，因为该文件通常不会被检入到您可能使用的任何代码存储库中。或者（我什至已经这样做了）可能只是忘记将来自 dev 的参数放入 prod parmeters.ini 文件中。

您还需要查看您的 app/logs/prod.log 以查看尝试登录时会发生什么。

# android - Spinner App 在打开时崩溃。

> ID：13373809
> 
> 赞同：0
> 
> 时间：2012-11-14T06:02:25.960
> 
> 标签：android, android-layout, android-spinner

我正在尝试让我的 Spinner1 更改 spinner2 上的可见性。我的代码编译正常，但应用程序在打开时崩溃。

```
 @Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    Spinner spinner = (Spinner)findViewById(R.id.spinner2);

    spinner.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener()
    {

        public void onNothingSelected(AdapterView<?> arg0) {

        }

        public void onItemSelected(AdapterView<?> arg0, View arg1,int arg2, long arg3) {
            Spinner spinner = (Spinner)findViewById(R.id.spinner2);
            Spinner spinner1 = (Spinner)findViewById(R.id.spinner1);
            TextView textview1 = (TextView)findViewById(R.id.textView1);

            if (spinner.getSelectedItemPosition() == 1) {
                textview1.setVisibility(View.VISIBLE);
                spinner1.setVisibility(View.VISIBLE);
            }
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T00:04:11.660

好的，所以我使用一个类来检查所选项目，修复了初始应用程序崩溃

主要代码：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    Spinner spinner = (Spinner)findViewById(R.id.spinner2);
    spinner.setOnItemSelectedListener(new checkSelectedItem());
} 
```

我的课：

```
public class checkSelectedItem implements OnItemSelectedListener {

public void onItemSelected(AdapterView<?> parent, View view, int pos, long id) {
    Spinner spinner1 = (Spinner)parent.findViewById(R.id.spinner1);
    TextView textview1 = (TextView)parent.findViewById(R.id.textView1);
    if (pos == 1) {
        textview1.setVisibility(View.VISIBLE);
        spinner1.setVisibility(View.VISIBLE);
    }
    else {
        if ( textview1.getVisibility() == View.VISIBLE) {
            textview1.setVisibility(View.INVISIBLE);
        }
        if ( spinner1.getVisibility() == View.VISIBLE) {
            spinner1.setVisibility(View.INVISIBLE);
        }
    }
}

public void onNothingSelected(AdapterView parent) {

} 
```

所以最初的崩溃是固定的，但是现在当我在我的 spinner2 中选择选项 1 时，应用程序崩溃了..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T07:02:04.990

请不要在活动期间设置ID；它根本不好；这样做：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    Spinner spinner = (Spinner)findViewById(R.id.spinner2);
    Spinner spinner1 = (Spinner)findViewById(R.id.spinner1);
    TextView textview1 = (TextView)findViewById(R.id.textView1);

    spinner.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener()
    {

        public void onNothingSelected(AdapterView<?> arg0) {

        }

        public void onItemSelected(AdapterView<?> arg0, View arg1,int arg2, long arg3) {
            if (spinner.getSelectedItemPosition() == 1) {
                textview1.setVisibility(View.VISIBLE);
                spinner1.setVisibility(View.VISIBLE);
            }
        }
    });} 
```

# css - 一切都放大了

> ID：13373815
> 
> 赞同：1
> 
> 时间：2012-11-14T06:03:02.743
> 
> 标签：css, zooming

我正在构建以下站点：

[http://www.verbum.xtrweb.com/soon.php](http://www.verbum.xtrweb.com/soon.php)

但正如你所看到的，一切都被放大了。如果您对其进行调整，则不会，但我不希望用户必须为我的网站调整他们的视图。我希望我的网站始终以相同的缩放比例显示，就像我在这里上传的图片一样：

![在此处输入图像描述](../Images/bd1ec1447664956bc70c1c2623dc9cd5.png)

`ctrl + 0`不是我正在寻找的解决方案。如果代码中没有某些东西，可能是样式属性或类似的东西。在浏览器中查看代码以进行检查。谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T06:32:45.413

除了以前的用户在您的页面上发现的所有小错误和错误之外，我建议您将标题内容包装到具有 percantege 宽度的容器中。这样，它将根据所有浏览器中的浏览器窗口宽度保持相同的宽度。段落的字体大小也应该是 em，以便轻松调整自身。牢记所有这些并清理您的代码，您应该能够为大多数用户提供相同的体验

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T06:21:40.877

在这里，文件不存在：

```
<script src="js/jquery-1.4.4.min.js" type="text/javascript"></script> 
```

也许你应该先解决这个问题。

另外，我认为在同一页面上包含多个版本的 jQuery 并不是一个好主意。

* * *

# 更新：

```
<div id="facebook" style="display: inline; opacity: 1.0999999999999999;"> 
<input style=" " id="fb-button" type="submit" value=" " onclick="window.location.href='http://www.facebook.com/sharer.php?u=&lt;http://verbum.xtrweb.com/&gt;&amp;t=&lt;Verbum, the new dictionary&gt;'" <="" input="">          
</div> 
```

上面的 HTML（从您的页面复制）是错误的；`input`标签没有正确关闭。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T06:21:46.077

看起来你输入错误了。将段落的字体大小更改为 px 或 em。所以字体大小：37px（而不是 37pt）。

# jquery-ui - jQuery sortable - 在不可排序的项目之间放置

> ID：13373818
> 
> 赞同：1
> 
> 时间：2012-11-14T06:03:26.517
> 
> 标签：jquery-ui, jquery-ui-sortable

举个例子：http: [//jqueryui.com/sortable/#items](http://jqueryui.com/sortable/#items)。如何使列表能够在元素二和三（均不可排序）之间下降？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T11:30:08.070

我最终自己实现了可拖动 + 可放置。这不是一个真正的答案，但它是一种达到相同结果的方法。

# ios - 在 foreach 中从 NSDictionary 获取值？

> ID：13373821
> 
> 赞同：1
> 
> 时间：2012-11-14T06:03:50.790
> 
> 标签：ios, json, nsdictionary

我有一个视图，上面有 tableviewcells，加载了不同的“键值”作为标签。当我点击一个时，我会打开另一个视图。但是在这里，我只为那个键传递字典，例如我会传递这个：

```
{
    key = Budget;
    value =     {
        "2012 Budget Report" =         {
            active = 0;
            author = "xxxxx xxxxxx";
            date = "October 27, 2012";
            description = "Example";
            dl = "53 downloads";
            email = "xxx@xxxxx.com";
            ext = DOCX;
            fortest = "Tuesday, November 6";
            id = 5;
            subject = budget;
            testdate = "Tuesday, November 6";
            title = "Budget spreadSheet";
        };
        "2005 - 2008 Budget Report" =         {
            active = 0;
            author = "xxxxxxx xxxxx";
            date = "November 3, 2012";
            description = "Example";
            dl = "18 downloads";
            email = "xxxxx@xxxxx.com";
            ext = DOCX;
            title = "Budget report";
        };
    };
} 
```

我如何获得这些值中的每一个？谢谢。

请注意：值数组中的标题可能会发生变化......可以添加更多，可以删除一个，所以我需要一个通用的解决方案。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-14T06:39:40.283

考虑到您传递的字典保存在`iDictionary`.

```
NSDictionary *iDictionary // Input Dictionary;
NSDictionary *theValues = [NSDictionary dictionaryWithDictionary:[iDictionary valueForKey:@"value"]];

for (NSString *aKey in [theValues allKeys]) {
    NSDictionary *aValue = [theValues valueForKey:aKey];
    NSLog(@"Key : %@", aKey);
    NSLog(@"Value : %@", aValue);

    // Extract individual values
    NSLog(@"Author : %@", [aValue objectForKey:@"author"]);

    // If the titles are dynamic
    for (NSString *aSubKey in [aValue allKeys]) {
        NSString *aSubValue = [aValue objectForKey:aSubKey];

        NSLog(@"SubKey : %@, SubValue = %@", aSubKey, aSubValue);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T06:27:27.207

```
NSDictionary *jsonDictionary = [NSJSONSerialization JSONObjectWithData:jsonData options:kNilOptions error:&error];

NSArray *arrBudget= [jsonDictionary objectForKey:@"Budget"]; 
```

所以这里`arrBudget`将包含所有值并且您可以将数组传递到详细视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-24T12:43:20.353

如果键和对象在“foreach”逻辑中有用的另一种方法：

```
NSDictionary *dict = @{
    @"key1": @"value1",
    @"key2": @"value2",
    @"key3": @"value3",
};  
[dict enumerateKeysAndObjectsUsingBlock:^(id key, id obj, BOOL *stop) {
    NSLog(@"Your key : %@", key);
    NSLog(@"Your value : %@", [obj description]);
    // do something...
}]; 
```

# visual-c++ - Visual C++ 通过相对路径打开文件

> ID：13373824
> 
> 赞同：0
> 
> 时间：2012-11-14T06:04:15.713
> 
> 标签：visual-c++, io

如何在 Visual C++ 2010 中打开具有相对路径的文件？

我以前用来`C:\\test.txt`打开文件。现在我将文件移动到项目目录中，这样它就可以受到版本控制，其他人也可以打开该文件。但`test.txt`不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T06:56:12.803

你可能想试试

> ..\test.txt

# iphone - 使用带有文字的 'stringWithString:' 是多余的

> ID：13373826
> 
> 赞同：5
> 
> 时间：2012-11-14T06:04:35.680
> 
> 标签：iphone, objective-c, ios, ios6, reachability

我在 ios6 的可达性类中使用了这段代码

```
 switch (status) {
        case kNotReachable:
            statusString = [NSString stringWithString: @"Not Reachable"];
            break;
        case kReachableViaWWAN:
            statusString = [NSString stringWithString: @"Reachable via WWAN"];
            break;
        case kReachableViaWiFi:
            statusString = [NSString stringWithString: @"Reachable via WiFi"];
            break;
    } 
```

但出现以下错误“使用带有文字的'stringWithString：'是多余的”

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-14T06:11:41.053

警告是说您可以轻松地这样做：

`statusString = @"Not Reachable";`

解释在帖子 [Obj-C 中提供： [NSString stringWithString:@"string"] vs. @"string"](https://stackoverflow.com/questions/6280849/obj-c-nsstring-stringwithstringstring-vs-string)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-20T06:58:50.570

而不是使用

```
statusString = [NSString stringWithString: @"Not Reachable"]; 
```

请编写如下代码：

```
statusString = @"Content-Type: Not Reachable/unknown\r\n\r\n"; 
```

警告将被删除。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-14T06:11:11.343

您只需像这样声明您的字符串即可解决这些“警告”：

```
statusString = @""; 
```

代替

```
statusString = [NSString stringWithString:@""]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T07:05:58.353

我认为这是一种编译器优化。实际上，您需要为变量分配一个字符串。您可以直接执行此操作，因为`myString = @""`无需调用方法，并且会使用额外的处理时间。

# css - 如何设置 HTML5 CSS 演示

> ID：13373827
> 
> 赞同：-1
> 
> 时间：2012-11-14T06:04:40.693
> 
> 标签：css, html

我已经使用 HTML5 和 CSS3 以网站的形式创建了几个相互关联的页面。我将提供免费下载。

如果人们想观看演示，我怎样才能免费演示这些文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T06:41:55.770

我使用 2 个站点 jsbin.com jsfiddle.net

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T09:27:28.070

最好的解决方案是创建自己的网站。为什么？你说：

> 我已经使用 HTML5 和 CSS3 以网站的形式创建了几个相互关联的页面。

如果您不想创建网站，还有其他解决方案：

*   使用[JSfiddle](http://jsfiddle.net)、[JSbin](http://jsbin.com)或[CodePen 之](http://codepen.io)类的网站（我推荐 CodePen，因为它最适合解决问题！）
*   使用[GitHub](http://github.com)，非常适合开源项目

# tfs - 无法将团队基础服务器 2010 上的通知 URL 更改为域名

> ID：13373829
> 
> 赞同：1
> 
> 时间：2012-11-14T06:04:56.960
> 
> 标签：tfs

以下是设置的一些背景：

1.  我有一个名为“File-Serv”的服务器。
2.  我有一个 NS 条目，将 clients.mydomain.com 重定向到调制解调器的 IP 地址，调制解调器的 IP 地址又将请求转发到计算机（到目前为止，这一切都运行良好）
3.  我在端口 80 上运行 apache，在端口 8080 上运行一个 IIS 站点
4.  我安装了 TFS 并将 TFS 站点的绑定更改为使用端口 8081，这样它就不会与其他站点发生冲突。

我在服务器上安装了团队资源管理器，并且能够连接到 TFS 并添加项目等。

现在的问题是我想从网络上的所有其他计算机访问 TFS，更重要的是，如果我没有连接到本地网络但我不能访问 TFS

我尝试将通知 url 更改为 clients.mydomain.com 并更改 IIS 上的绑定以匹配。当我访问 clients.mydomain.com:8081/tfs/web 时，它要求我输入用户名和密码

我没有安装活动目录，我已经为服务器上需要的所有用户创建了用户，但是当我为用户名/密码输入任何组合时，我永远无法登录。

我尝试了以下用户名但没有成功：

*   行政人员
*   文件服务\管理员
*   clients.mydomain.com\Administrator

我真的不确定我在这里缺少什么.. 我已经阅读了论坛上的论坛，但没有任何解决方案。帮助！

PS 这是我在认真使用该网站 2 年后关于 stackoverflow 的第一个问题！

# python - Python：分配前引用的局部变量“字符串”

> ID：13373832
> 
> 赞同：0
> 
> 时间：2012-11-14T06:05:12.660
> 
> 标签：python, string, function, variables

我想知道为什么我从一个函数向这个字符串添加一个字母时会收到这个错误。
`local variable 'string' referenced before assignment`

### 代码

```
def update_string():
    string+='d'

string='s'

update_string() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T06:06:43.927

您正在访问全局变量，需要声明它：

```
def update_string():
    global string # <<< declare `string` as global variable.
    string+='d'

string='s'

update_varibles() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T06:10:14.257

在您的函数的本地范围内，旧的“字符串”无处可寻，因此 python 假设您正在谈论的是来自外部范围的字符串。

此外，由于字符串是不可变的，通常的模式是创建一个新的并返回它，因此您可能更愿意将函数接口更新为更像：

```
def update_string(str_in):
  return str_in + 'd' 
```

然后你会像这样使用它：

```
my_string = update_string(my_string) 
```

# javascript - 使用javascript上传图片

> ID：13373834
> 
> 赞同：10
> 
> 时间：2012-11-14T06:05:24.530
> 
> 标签：javascript

我正在尝试`Object`在客户端获取 javascript 的图像以使用 jQuery 发送它

```
<html>
<body>
<script language="JavaScript">
function checkSize()
{
    im = new Image();
    im.src = document.Upload.submitfile.value;
if(!im.src)
    im.src = document.getElementById('submitfile').value;
    alert(im.src);
    alert(im.width);
    alert(im.height);
    alert(im.fileSize);

}
</script>
<form name="Upload" action="#" enctype="multipart/form-data" method="post">
   <p>Filename: <input type="file" name="submitfile" id="submitfile" />
   <input type="button" value="Send" onClick="checkSize();" />
</form>
</body>
</html> 
```

但在此代码中，仅显示`alert(im.src)`文件`src`但`alert(im.width),alert(im.height),alert(im.filesize)`无法正常工作并`0`分别发出警报。请告诉我如何使用 javascript 访问图像对象？`0``undefined`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-14T07:21:04.740

im.fileSize 只在 IE 中工作的原因是因为“.fileSize”只是一个 IE 属性。由于您的代码可以在 IE 中运行，因此我会检查浏览器并为 IE 呈现您当前的代码，并为其他浏览器尝试类似的操作。

```
var imgFile = document.getElementById('submitfile');
if (imgFile.files && imgFile.files[0]) {
    var width;
    var height;
    var fileSize;
    var reader = new FileReader();
    reader.onload = function(event) {
        var dataUri = event.target.result,
        img = document.createElement("img");
        img.src = dataUri;
        width = img.width;
        height = img.height;
        fileSize = imgFile.files[0].size;
        alert(width);
        alert(height);
        alert(fileSize);
   };
   reader.onerror = function(event) {
       console.error("File could not be read! Code " + event.target.error.code);
   };
   reader.readAsDataURL(imgFile.files[0]);
} 
```

我没有测试过这段代码，但只要我没有错别字，它应该可以工作。为了更好地了解我在这里所做的事情，请查看此[链接](http://www.nczonline.net/blog/2012/05/15/working-with-files-in-javascript-part-2/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T11:32:39.447

这就是我使用的，它对我很有用。我将图像保存为 mysql 中的 blob。单击时，会出现文件上传对话框，这就是我将文件输入可见性设置为隐藏并将其类型设置为上传图像文件的原因。选择图像后，它会替换现有的图像，然后我使用 jquery post 方法更新数据库中的图像。

```
<div>
     <div><img id="logo" class="img-polaroid" alt="Logo" src="' . $row['logo'] . '" title="Click to change the logo" width="128">
     <input style="visibility:hidden;" id="logoupload" type="file" accept="image/* ">
</div>

  $('img#logo').click(function(){                           
    $('#logoupload').trigger('click');
    $('#logoupload').change(function(e){

      var reader = new FileReader(),
           files = e.dataTransfer ? e.dataTransfer.files : e.target.files,
            i = 0;

            reader.onload = onFileLoad;

             while (files[i]) reader.readAsDataURL(files[i++]);

              });

                function onFileLoad(e) {
                        var data = e.target.result;
                          $('img#logo').attr("src",data);
                          //Upload the image to the database
                           //Save data on keydown
                            $.post('test.php',{data:$('img#logo').attr("src")},function(){

                            });
                            }

                        }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-03T11:49:35.763

```
$('#imagess').change(function(){

        var total_images=$('#total_images').val();

        var candidateimage=document.getElementById('imagess').value;
        formdata = false;
        var demo=document.getElementById("imagess").files;

        if (window.FormData) {
           formdata = new FormData();
           }

          var i = 0, len = demo.length, img, reader, file;
         for ( ; i < len; i++ ) {
          file = demo[i];
          if (file.type.match(/image.*/)) {
           if (formdata) {
            formdata.append("images", file);

           }
          } 
         }

        $('#preview').html('Uploading...');
        var url=SITEURL+"users/image_upload/"+total_images;

        $.ajax({
            url: url,
            type: "POST",
            data: formdata,
            processData: false,
            contentType: false,
            success: function (res) {
                $('#preview').html('');
                if (res == "maxlimit") {
                    alert("You can't upload more than 4 images");
                }
                else if (res == "error") {
                    alert("Image can't upload please try again.")
                }
                else {
                    $('#user_images').append(res);

                }
            }
           });  

    }); 
```

# python - Python：创建元组（int，Counter）类型的字典

> ID：13373836
> 
> 赞同：0
> 
> 时间：2012-11-14T06:05:52.110
> 
> 标签：python

我想要一个 dict(tuple(int, Counter))。

```
 variable = defaultdict(int,Counter)
    TypeError: descriptor 'keys' of 'dict' object needs an argument 
```

我有可以与多个值相关联的 IP 地址，例如 ttl 值和 MAC 地址，所以我想计算出现最多的 ttl 值，并且我想将它（通过 int）与其他 ttl 值相关联。

如何声明这种类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T06:09:30.093

使用 lambda 作为 defaultdict 初始值设定项

```
 variable = defaultdict(lambda : (int(), Counter())) 
```

# sql - 如何使用正则表达式提取过程值？

> ID：13373838
> 
> 赞同：1
> 
> 时间：2012-11-14T06:06:01.113
> 
> 标签：sql, regex, oracle

我从包含以下值的 oracle 表（使用 sql）中进行选择：

```
ae0.32767  
bcm0.0  
em0.0  
ge-0/1/0.32767  
ge-7/1/0.100  
ge-7/1/0.32767  
lo0.0  
lsi.0  
pc-0/0/0.16383  
pc-1/0/0.16383  
pc-5/0/0.16383  
xe-0/0/0.838 
```

如何在不包括小数点之后提取值（使用正则表达式）。

例如：

```
32767  
0  
0  
32767  
100  
32767  
0  
0  
16383  
16383  
16383  
838 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T06:42:03.417

regexp_substr函数可用于提取字符串末尾句点后的数字[。](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions150.htm#i1239858)这是一个例子：

```
 -- sample of data from your question
 SQL> with t1  as (
  2    select 'ae0.32767' as col from dual union all
  3    select 'bcm0.0'          from dual union all
  4    select 'em0.0'           from dual union all
  5    select 'ge-0/1/0.32767'  from dual union all
  6    select 'ge-7/1/0.100'    from dual union all
  7    select 'ge-7/1/0.32767'  from dual union all
  8    select 'lo0.0'           from dual union all
  9    select 'lsi.0'           from dual union all
 10    select 'pc-0/0/0.16383'  from dual union all
 11    select 'pc-1/0/0.16383'  from dual union all
 12    select 'pc-5/0/0.16383'  from dual union all
 13    select 'xe-0/0/0.838'    from dual
 14  )
 15  select regexp_substr(col, '(\.)([[:digit:]]+)$', 1,1,'i',2) res
 16    from t1
 17  ;

RES
--------------------------------------------------------
32767
0
0
32767
100
32767
0
0
16383
16383
16383
838

12 rows selected 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T06:42:05.760

尝试使用 substr 和 instr 来获得所需的输出，如下所示

```
SELECT  SUBSTR ('ge-0/1/0.32767',
                      INSTR ('ge-0/1/0.32767', '.') + 1,
                      LENGTH ('ge-0/1/0.32767') - INSTR ('ge-0/1/0.32767', '.')
                     )
  FROM  DUAL 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!4/5093c/1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T06:10:41.693

你没有提到编程语言。通常，此正则表达式匹配小数点后的数字：

```
\.(?<wanted>\d+) 
```

您可以从匹配结果中删除初始点，或者如果您的语言支持命名组捕获（例如，C# 支持），您可以使用 、 或命名组捕获`\1`这些`$1`数字`"wanted"`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T06:13:31.720

使用正则表达式

```
 \\.(\\d+\\s*) 
```

对于找到的每个匹配项，使用（打印）组 1。

例如在**JAVA**中：

```
 Pattern pattern = Pattern.compile("\\.(\\d+\\s*)");
  Matcher matcher = pattern.matcher("ae0.32767 bcm0.0 em0.0 ge-0/1/0.32767 "+
                                        "ge-7/1/0.100 ge-7/1/0.32767 lo0.0 lsi.0 "+
                                        "pc-0/0/0.16383 pc-1/0/0.16383 "+
                                        "pc-5/0/0.16383 xe-0/0/0.838");
  while(matcher.find()) {
    System.out.println(matcher.group(1));
  } 
```

印刷：

> 32767 0 0 32767 100 32767 0 0 16383 16383 16383 838

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-14T06:21:31.433

你可以使用：`'s/.*\.\(.*\)/\1/'`

```
> cat temp
ae0.32767  
bcm0.0  
em0.0  
ge-0/1/0.32767  
ge-7/1/0.100  
ge-7/1/0.32767  
lo0.0  
lsi.0  
pc-0/0/0.16383  
pc-1/0/0.16383  
pc-5/0/0.16383  
xe-0/0/0.838 
> sed 's/.*\.\(.*\)/\1/' temp
32767  
0  
0  
32767  
100  
32767  
0  
0  
16383  
16383  
16383  
838 
> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-14T06:43:58.603

Afaik 正向后视在 Oracle SQL 中不起作用，因此您必须使用一些 regexp_replace 或 regexp_substr。确切的正则表达式可能取决于您的数据来源。我假设您有一个专栏，其中包含您向我们展示的内容；一种方法可能是：

```
create table tmp_test (s varchar2(100));
insert into tmp_test values ('bcm0.0');
insert into tmp_test values ('ge-0/1/0.32767');
select substr(regexp_substr(s, '\.\d+$'), 2) from tmp_test; -- or
select regexp_replace(s, '^.*\.(\d+)$', '\1') from tmp_test; 
```

如果您的文本并不孤单，则必须更改一些正则表达式，特别是删除“锚” ^ 和 $。就像是

```
insert into tmp_test values ('this is the ge-0/1/0.32767 fact');
select substr(regexp_substr(s, '\.\d+'), 2) from tmp_test;
select regexp_replace(s, '.*\.(\d+).*', '\1') from tmp_test; 
```

# python - 如何使用 Python MySQdb 检查记录是否存在

> ID：13373843
> 
> 赞同：13
> 
> 时间：2012-11-14T06:06:17.167
> 
> 标签：python, mysql, mysql-python

我正在创建一个连接到 mysql 的 python 程序。

我需要检查一个表是否包含数字 1 以表明它已成功连接，这是我到目前为止的代码：

```
xcnx.execute('CREATE TABLE settings(status INT(1) NOT NULL)')
  xcnx.execute('INSERT INTO settings(status) VALUES(1)')
  cnx.commit()
  sqlq = "SELECT * FROM settings WHERE status = '1'"
  xcnx.execute(sqlq)
  results = xcnx.fetchall()
  if results =='1':
    print 'yep its connected'
  else:
    print 'nope not connected' 
```

我错过了什么？我是一个sql菜鸟，谢谢大家。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-14T06:21:35.073

我相信最有效的“它是否存在”查询只是做一个`count`：

```
sqlq = "SELECT COUNT(1) FROM settings WHERE status = '1'"
xcnx.execute(sqlq)
if xcnx.fetchone()[0]:
    # exists 
```

如果结果产生任何匹配，您只需要求它返回 1 或 0，而不是要求数据库对字段或行执行任何计数操作。这比返回实际记录并计算客户端的数量要高效得多，因为它节省了双方的序列化和反序列化以及数据传输。

```
In [22]: c.execute("select count(1) from settings where status = 1")
Out[22]: 1L  # rows

In [23]: c.fetchone()[0]
Out[23]: 1L  # count found a match

In [24]: c.execute("select count(1) from settings where status = 2")
Out[24]: 1L  # rows

In [25]: c.fetchone()[0]
Out[25]: 0L  # count did not find a match 
```

`count(*)`将与 相同`count(1)`。在您的情况下，因为您正在创建一个新表，它将显示 1 个结果。如果您有 10,000 个匹配项，它将是 10000 个。但是您在测试中关心的是它是否不是 0，因此您可以执行布尔真值测试。

**更新**

实际上，只使用行数甚至不获取结果会更快：

```
In [15]: if c.execute("select (1) from settings where status = 1 limit 1"): 
            print True
True

In [16]: if c.execute("select (1) from settings where status = 10 limit 1"): 
            print True

In [17]: 
```

这也是 django 的 ORM 执行`queryObject.exists()`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T13:49:40.840

如果您只想检查是否已成功建立连接，那么您为什么要尝试创建表、插入行，然后从中检索数据？

您可以简单地执行以下操作...

```
sqlq = "SELECT * FROM settings WHERE status = '1'"
xcnx.execute(sqlq)
results = xcnx.fetchone()
if results =='1':
  print 'yep its connected'
else:
  print 'nope not connected' 
```

事实上，如果你的程序到目前为止没有抛出异常，说明你已经成功建立了连接。（请检查上面的代码，我不确定 fetchone 在这种情况下是否会返回元组、字符串或 int）。

顺便说一句，如果由于某种原因您确实需要创建表，我建议您在退出之前将其删除，以便您的程序第二次成功运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T06:11:45.297

运行`results = xcnx.fetchall()`时，返回值是包含行值的元组序列。因此，当您检查 if 时`results == '1'`，您正在尝试将序列与常量进行比较，该常量将返回`False`。`0`在您的情况下，将返回单行值，因此您可以尝试以下操作：

```
results = xcnx.fetchall()
# Get the value of the returned row, which will be 0 with a non-match
if results[0][0]:
  print 'yep its connected'
else:
  print 'nope not connected' 
```

您也可以使用 a `DictCursor`（在创建游标时使用`.cursor(MySQLdb.cursors.DictCursor`），这会使代码更容易解​​释，但结果是相同的：

```
if results[0]['COUNT(*)]':
    # Continues... 
```

此外，在这种情况下没什么大不了的，但是您正在将整数值与字符串进行比较。MySQL 将进行类型转换，但您可以使用`SELECT COUNT(*) FROM settings WHERE status = 1`并节省一点（非常小的）处理。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-11T03:49:47.040

我最近提高了效率，而不是查询 select，只是将主索引添加到唯一列，然后添加它。MySQL 只会在它不存在时添加它。

因此，而不是 2 个语句：

```
 Query MySQL for exists:
     Query MySQL insert data 
```

只需做 1 ，它只有在它是唯一的时候才会起作用：

```
Query MySQL insert data 
```

1 查询优于 2。

# c#-4.0 - 使用枚举构建 LessThanOrEqual 表达式

> ID：13373848
> 
> 赞同：0
> 
> 时间：2012-11-14T06:06:37.053
> 
> 标签：c#-4.0

我需要在运行时创建依赖于查询的表达式。枚举具有 <= 的隐式运算符但是当我构建它的表达式时，我得到了这个运算符不存在的异常

```
public enum A
{
    A1,
    A2,
    A3
};

public class AA
{
    public A myA { get; set; }
    public int myB { get; set; }
};

ParameterExpression pe = Expression.Parameter(typeof(AA), "p");

 Expression.LessThanOrEqual(Expression.Property(
                                  pe,
                                  typeof(AA).GetProperty("myA")),
                                  Expression.Constant(A.A1, typeof(A))); 
```

是否可以创建此表达式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T06:29:06.517

似乎`<=`运算符不是在枚举上定义的，而是在枚举类型上定义的，它是整数。所以在你的情况下你可以使用

```
Expression.LessThanOrEqual(Expression.Convert(Expression.Property(
    pe,
    typeof(AA).GetProperty("myA")), typeof(int)),
    Expression.Convert(Expression.Constant(A.A1, typeof(A)), typeof(int))); 
```

# actionscript-3 - 我在 as3 中遇到堆栈溢出错误

> ID：13373852
> 
> 赞同：-2
> 
> 时间：2012-11-14T06:06:48.763
> 
> 标签：actionscript-3

我是 Flash 初学者，但不是面向对象编程的初学者。我正在制作一个商业模拟多人棋盘游戏。这个敬礼函数是从 .fla 文件调用的，这个**敬礼**函数调用 moveto 函数。**敬礼**函数工作正常。但是问题出现在**dialog2.x=200处的****moveto() ；**.如果我删除该行问题转到下一行请帮助我

 **```
 public function salute(a:Array)
{
    a[0].x=200;
    a[0].y=200;
    if(k==0)
    {
    tilehold.amount.text=String(amount);
    tilehold.networth.text=String(networth);
    tilehold.playertitle.text=playername;
    dialog2=a[1];
    dialog3=a[2];
    dialog4=a[3];
    dialog5=a[4];
    dialog6=a[5];
    forbuild=a[6];
    k=1
    }
    a[0].dialogtext.text=playername+"'s turn";
    a[0].addEventListener(MouseEvent.MOUSE_DOWN,nothing1);
    function nothing1(e:MouseEvent)
    {
        a[0].x=1000;
        e.target.removeEventListener(MouseEvent.MOUSE_DOWN,nothing1);
        a[7].x=-10;
        a[7].y=-10;
        a[7].addEventListener(MouseEvent.CLICK,wheelspin);
    }
    function wheelspin(e:MouseEvent)
    {
        spinvalue=Math.floor(Math.random()*10);
        a[7].wheel.spin(spinvalue);
        a[7].wheel.gotoAndPlay(2);
        e.target.removeEventListener(MouseEvent.CLICK,wheelspin);
        a[7].addEventListener(MouseEvent.CLICK,wheelmove);
    }
    function wheelmove(e:MouseEvent)
    {
        a[7].x=1000;
        e.target.addEventListener(MouseEvent.CLICK,wheelmove);

    }
    moveto();
}
public function moveto()
{
    if(spinvalue==0||spinvalue==7||spinvalue==8||spinvalue==9)
    {
        if(nooflandsown==0)
        { 
```

> /* 上面的工作正常但是，这个错误指示下面的行*/

```
 dialog2.x=200;
            dialog2.dialogtext.text="you dont own any land";
            dialog2.okbut.addEventListener(MouseEvent.CLICK,nothing2);
            function nothing2(e:MouseEvent)
            {
                dialog2.x=1000;
                e.target.removeEventListener(MouseEvent.CLICK,nothing2);
                endturn();
            }

        }
        else
        {
            dialog3.x=200;
            dialog3.y=200;
            dialog3.dialogtext.text="do you want to build";
            dialog3.yesbut.addEventListener(MouseEvent.CLICK,wanttobuild);
            dialog3.nobut.addEventListener(MouseEvent.CLICK,nothing3);
            function wanttobuild(e:MouseEvent)
            {
            dialog3.x=1000;
            e.target.removeEventListener(MouseEvent.CLICK,wanttobuild);
            dialog3.nobut.removeEventListener(MouseEvent.CLICK,nothing3);
             chooseland();
            }
            function nothing3(e:MouseEvent)
            {
                dialog3.x=1000;
                dialog3.yesbut.removeEventListener(MouseEvent.CLICK,wanttobuild);
            e.target.removeEventListener(MouseEvent.CLICK,nothing3);
            endturn();
            }
        }
    }
    else
    {
        l=(currentposition+spinvalue)%18;
        this.pos=l;
        switch(currentposition)
        {
            case 1:
            this.gotoAndPlay(15);
            break;
            case 2:
            this.gotoAndPlay(25);
            break;
            case 3:
            this.gotoAndPlay(35);
            break;
            case 4:
            this.gotoAndPlay(55);
            break;
            case 5:
            this.gotoAndPlay(65);
            break;
            case 6:
            this.gotoAndPlay(75);
            break;
            case 7:
            this.gotoAndPlay(85);
            break;
            case 8:
            this.gotoAndPlay(105);
            break;
            case 9:
            this.gotoAndPlay(115);
            break;
            case 10:
            this.gotoAndPlay(125);
            break;
            case 11:
            this.gotoAndPlay(135);
            break;
            case 12:
            this.gotoAndPlay(145);
            break;
            case 13:
            this.gotoAndPlay(165);
            break;
            case 14:
            this.gotoAndPlay(175);
            break;
            case 15:
            this.gotoAndPlay(195);
            break;
            case 16:
            this.gotoAndPlay(205);
            break;
            case 17:
            this.gotoAndPlay(215);
            break;
            default:
            this.gotoAndPlay(1);
        }
        currentposition=l;

    }
} 
```

请帮帮我。我通过更改整个代码进行了很多尝试。但我无法弄清楚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T06:55:57.830

首先，为什么要在事件侦听器（函数`wheelmove`）中添加事件侦听器？`moveto()`其次，检查您是否真的在没有再次调用的情况下退出函数`salute()`，如果没有，那么您必须在其他地方更改您的代码流逻辑。此外，如果代码较大，您可以使用 Internet 中的 PasteBin 服务来托管代码。**

# java - 二叉搜索树 - Java 实现

> ID：13373854
> 
> 赞同：50
> 
> 时间：2012-11-14T06:07:06.087
> 
> 标签：java, data-structures, tree

我正在编写一个利用二叉搜索树来存储数据的程序。在之前的程序（无关）中，我能够使用Java SE6 提供的[实现](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedList.html)来实现链表。二叉搜索树是否有类似的东西，还是我需要“从头开始”？

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2012-11-14T06:12:35.200

您可以使用[`TreeMap data structure`](https://docs.oracle.com/javase/10/docs/api/java/util/TreeMap.html). `TreeMap`实现为[红黑树](http://en.wikipedia.org/wiki/Red%E2%80%93black_tree)，它是一种自平衡二叉搜索树。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-11-14T06:16:08.593

根据[Collections Framework Overview](http://docs.oracle.com/javase/6/docs/technotes/guides/collections/overview.html)，您有两个平衡的树实现：

*   [树集](http://docs.oracle.com/javase/6/docs/api/java/util/TreeSet.html)
*   [树状图](http://docs.oracle.com/javase/6/docs/api/java/util/TreeMap.html)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-11-27T20:06:51.083

这是我在 Java SE 1.8 中的简单二叉搜索树实现：

```
public class BSTNode
{
    int data;
    BSTNode parent;
    BSTNode left;
    BSTNode right;

    public BSTNode(int data)
    {
        this.data = data;
        this.left = null;
        this.right = null;
        this.parent = null;
    }

    public BSTNode()
    {
    }
}

public class BSTFunctions
{
    BSTNode ROOT;

    public BSTFunctions()
    {
        this.ROOT = null;
    }

    void insertNode(BSTNode node, int data)
    {
        if (node == null)
        {
            node = new BSTNode(data);
            ROOT = node;
        }
        else if (data < node.data && node.left == null)
        {
            node.left = new BSTNode(data);
            node.left.parent = node;
        }
        else if (data >= node.data && node.right == null)
        {
            node.right = new BSTNode(data);
            node.right.parent = node;
        }
        else
        {
            if (data < node.data)
            {
                insertNode(node.left, data);
            }
            else
            {
                insertNode(node.right, data);
            }
        }
    }

    public boolean search(BSTNode node, int data)
    {
        if (node == null)
        {
            return false;
        }
        else if (node.data == data)
        {
            return true;
        }
        else
        {
            if (data < node.data)
            {
                return search(node.left, data);
            }
            else
            {
                return search(node.right, data);
            }
        }
    }

    public void printInOrder(BSTNode node)
    {
        if (node != null)
        {
            printInOrder(node.left);
            System.out.print(node.data + " - ");
            printInOrder(node.right);
        }
    }

    public void printPostOrder(BSTNode node)
    {
        if (node != null)
        {
            printPostOrder(node.left);
            printPostOrder(node.right);
            System.out.print(node.data + " - ");
        }
    }

    public void printPreOrder(BSTNode node)
    {
        if (node != null)
        {
            System.out.print(node.data + " - ");
            printPreOrder(node.left);
            printPreOrder(node.right);
        }
    }

    public static void main(String[] args)
    {
        BSTFunctions f = new BSTFunctions();
        /**
         * Insert
         */
        f.insertNode(f.ROOT, 20);
        f.insertNode(f.ROOT, 5);
        f.insertNode(f.ROOT, 25);
        f.insertNode(f.ROOT, 3);
        f.insertNode(f.ROOT, 7);
        f.insertNode(f.ROOT, 27);
        f.insertNode(f.ROOT, 24);

        /**
         * Print
         */
        f.printInOrder(f.ROOT);
        System.out.println("");
        f.printPostOrder(f.ROOT);
        System.out.println("");
        f.printPreOrder(f.ROOT);
        System.out.println("");

        /**
         * Search
         */
        System.out.println(f.search(f.ROOT, 27) ? "Found" : "Not Found");
        System.out.println(f.search(f.ROOT, 10) ? "Found" : "Not Found");
    }
} 
```

输出是：

```
3 - 5 - 7 - 20 - 24 - 25 - 27 - 
3 - 7 - 5 - 24 - 27 - 25 - 20 - 
20 - 5 - 3 - 7 - 25 - 24 - 27 - 
Found
Not Found 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-07-29T02:15:05.207

这是一个示例实现：

```
import java.util.*;

public class MyBSTree<K,V> implements MyTree<K,V>{
    private BSTNode<K,V> _root;
    private int _size;
    private Comparator<K> _comparator;
    private int mod = 0;

    public MyBSTree(Comparator<K> comparator){
        _comparator = comparator;
    }

    public Node<K,V> root(){
        return _root;
    }

    public int size(){
        return _size;
    }

    public boolean containsKey(K key){
        if(_root == null){
            return false;
        }

        BSTNode<K,V> node = _root;

        while (node != null){
            int comparison = compare(key, node.key());

            if(comparison == 0){
                return true;
            }else if(comparison <= 0){
                node = node._left;
            }else {
                node = node._right;
            }
        }

        return false;
    }

    private int compare(K k1, K k2){
        if(_comparator != null){
            return _comparator.compare(k1,k2);
        }
        else {
            Comparable<K> comparable = (Comparable<K>)k1;
            return comparable.compareTo(k2);
        }
    }

    public V get(K key){
        Node<K,V> node = node(key);

        return node != null ? node.value() : null;
    }

    private BSTNode<K,V> node(K key){
        if(_root != null){
            BSTNode<K,V> node = _root;

            while (node != null){
                int comparison = compare(key, node.key());

                if(comparison == 0){
                    return node;
                }else if(comparison <= 0){
                    node = node._left;
                }else {
                    node = node._right;
                }
            }
        }

        return null;
    }

    public void add(K key, V value){
        if(key == null){
            throw new IllegalArgumentException("key");
        }

        if(_root == null){
            _root = new BSTNode<K, V>(key, value);
        }

        BSTNode<K,V> prev = null, curr = _root;
        boolean lastChildLeft = false;
        while(curr != null){
            int comparison = compare(key, curr.key());
            prev = curr;

            if(comparison == 0){
                curr._value = value;
                return;
            }else if(comparison < 0){
                curr = curr._left;
                lastChildLeft = true;
            }
            else{
                curr = curr._right;
                lastChildLeft = false;
            }
        }

        mod++;
        if(lastChildLeft){
            prev._left = new BSTNode<K, V>(key, value);
        }else {
            prev._right = new BSTNode<K, V>(key, value);
        }
    }

    private void removeNode(BSTNode<K,V> curr){
        if(curr.left() == null && curr.right() == null){
            if(curr == _root){
                _root = null;
            }else{
                if(curr.isLeft()) curr._parent._left = null;
                else curr._parent._right = null;
            }
        }
        else if(curr._left == null && curr._right != null){
            curr._key = curr._right._key;
            curr._value = curr._right._value;
            curr._left = curr._right._left;
            curr._right = curr._right._right;
        }
        else if(curr._left != null && curr._right == null){
            curr._key = curr._left._key;
            curr._value = curr._left._value;
            curr._right = curr._left._right;
            curr._left = curr._left._left;
        }
        else { // both left & right exist
            BSTNode<K,V> x = curr._left;
            // find right-most node of left sub-tree
            while (x._right != null){ 
                x = x._right;
            }
            // move that to current
            curr._key = x._key;
            curr._value = x._value;
            // delete duplicate data
            removeNode(x);
        }
    }

    public V remove(K key){
        BSTNode<K,V> curr = _root;
        V val = null;
        while(curr != null){
            int comparison = compare(key, curr.key());
            if(comparison == 0){
                val = curr._value;
                removeNode(curr);
                mod++;
                break;
            }else if(comparison < 0){
                curr = curr._left;
            }
            else{
                curr = curr._right;
            }
        }

        return val;
    }

    public Iterator<MyTree.Node<K,V>> iterator(){
        return new MyIterator();
    }

    private class MyIterator implements Iterator<Node<K,V>>{
        int _startMod;
        Stack<BSTNode<K,V>> _stack;

        public MyIterator(){
            _startMod = MyBSTree.this.mod;
            _stack = new Stack<BSTNode<K, V>>();

            BSTNode<K,V> node = MyBSTree.this._root;
            while (node != null){
                _stack.push(node);
                node = node._left;
            }
        }

        public void remove(){
            throw new UnsupportedOperationException();
        }

        public boolean hasNext(){
            if(MyBSTree.this.mod != _startMod){
                throw new ConcurrentModificationException();
            }

            return !_stack.empty();
        }

        public Node<K,V> next(){
            if(MyBSTree.this.mod != _startMod){
                throw new ConcurrentModificationException();
            }

            if(!hasNext()){
                throw new NoSuchElementException();
            }

            BSTNode<K,V> node = _stack.pop();
            BSTNode<K,V> x = node._right;
            while (x != null){
                _stack.push(x);
                x = x._left;
            }

            return node;
        }
    }

    @Override
    public String toString(){
        if(_root == null) return "[]";

        return _root.toString();
    }

    private static class BSTNode<K,V> implements Node<K,V>{
        K _key;
        V _value;
        BSTNode<K,V> _left, _right, _parent;

        public BSTNode(K key, V value){
            if(key == null){
                throw new IllegalArgumentException("key");
            }

            _key = key;
            _value = value;
        }

        public K key(){
            return _key;
        }

        public V value(){
            return _value;
        }

        public Node<K,V> left(){
            return _left;
        }

        public Node<K,V> right(){
            return _right;
        }

        public Node<K,V> parent(){
            return _parent;
        }

        boolean isLeft(){
            if(_parent == null) return false;

            return _parent._left == this;
        }

        boolean isRight(){
            if(_parent == null) return false;

            return _parent._right == this;
        }

        @Override
        public boolean equals(Object o){
            if(o == null){
                return false;
            }

            try{
                BSTNode<K,V> node = (BSTNode<K,V>)o;
                return node._key.equals(_key) && ((_value == null && node._value == null) || (_value != null && _value.equals(node._value)));
            }catch (ClassCastException ex){
                return false;
            }
        }

        @Override
        public int hashCode(){
            int hashCode = _key.hashCode();

            if(_value != null){
                hashCode ^= _value.hashCode();
            }

            return hashCode;
        }

        @Override
        public String toString(){
            String leftStr = _left != null ? _left.toString() : "";
            String rightStr = _right != null ? _right.toString() : "";
            return "["+leftStr+" "+_key+" "+rightStr+"]";
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-05-18T01:05:47.137

该程序具有以下功能

1.  添加节点
2.  显示 BST（有序）
3.  查找元素
4.  寻找继任者

    ```
    class BNode{
        int data;
        BNode left, right;

        public BNode(int data){
            this.data = data;
            this.left = null;
            this.right = null;
        }
    }

    public class BST {
        static BNode root;

        public int add(int value){
            BNode newNode, current;

            newNode = new BNode(value);
            if(root == null){
                root = newNode;
                current = root;
            }
            else{
                current = root;
                while(current.left != null || current.right != null){
                    if(newNode.data < current.data){
                        if(current.left != null)
                            current = current.left;
                        else
                            break;
                    }                   
                    else{
                        if(current.right != null)
                            current = current.right;
                        else
                            break;
                    }                                           
                }
                if(newNode.data < current.data)
                    current.left = newNode;
                else
                    current.right = newNode;
            }

            return value;
        }

        public void inorder(BNode root){
            if (root != null) {
                inorder(root.left);
                System.out.println(root.data);
                inorder(root.right);
            }
        }

        public boolean find(int value){
            boolean flag = false;
            BNode current;
            current = root;
            while(current!= null){
                if(current.data == value){
                    flag = true;
                    break;
                }   
                else if(current.data > value)
                    current = current.left;
                else
                    current = current.right;
            }
            System.out.println("Is "+value+" present in tree? : "+flag);
            return flag;
        }

        public void successor(int value){
            BNode current;
            current = root;

            if(find(value)){
                while(current.data != value){
                    if(value < current.data && current.left != null){
                        System.out.println("Node is: "+current.data);
                        current = current.left;
                    }
                    else if(value > current.data && current.right != null){
                        System.out.println("Node is: "+current.data);
                        current = current.right;
                    }                   
                }
            }
            else
                System.out.println(value+" Element is not present in tree");
        }

        public static void main(String[] args) {

            BST b = new BST();
            b.add(50);
            b.add(30);
            b.add(20);
            b.add(40);
            b.add(70);
            b.add(60);
            b.add(80);
            b.add(90);

            b.inorder(root);
            b.find(30);
            b.find(90);
            b.find(100);
            b.find(50);

            b.successor(90);
            System.out.println();
            b.successor(70);
        }

    } 
    ```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-10-02T06:53:59.867

* * *

***这是Java中二叉搜索树的完整实现插入，搜索，countNodes，遍历，删除，空，最大和最小节点，查找父节点，打印所有叶节点，获取级别，获取高度，获取深度，打印左视图，镜像视图***

* * *

```
import java.util.NoSuchElementException;
import java.util.Scanner;

import org.junit.experimental.max.MaxCore;

class BSTNode {

    BSTNode left = null;
    BSTNode rigth = null;
    int data = 0;

    public BSTNode() {
        super();
    }

    public BSTNode(int data) {
        this.left = null;
        this.rigth = null;
        this.data = data;
    }

    @Override
    public String toString() {
        return "BSTNode [left=" + left + ", rigth=" + rigth + ", data=" + data + "]";
    }

}

class BinarySearchTree {

    BSTNode root = null;

    public BinarySearchTree() {

    }

    public void insert(int data) {
        BSTNode node = new BSTNode(data);
        if (root == null) {
            root = node;
            return;
        }

        BSTNode currentNode = root;
        BSTNode parentNode = null;

        while (true) {
            parentNode = currentNode;
            if (currentNode.data == data)
                throw new IllegalArgumentException("Duplicates nodes note allowed in Binary Search Tree");

            if (currentNode.data > data) {
                currentNode = currentNode.left;
                if (currentNode == null) {
                    parentNode.left = node;
                    return;
                }
            } else {
                currentNode = currentNode.rigth;
                if (currentNode == null) {
                    parentNode.rigth = node;
                    return;
                }
            }
        }
    }

    public int countNodes() {
        return countNodes(root);
    }

    private int countNodes(BSTNode node) {
        if (node == null) {
            return 0;
        } else {
            int count = 1;
            count += countNodes(node.left);
            count += countNodes(node.rigth);
            return count;
        }
    }

    public boolean searchNode(int data) {
        if (empty())
            return empty();
        return searchNode(data, root);
    }

    public boolean searchNode(int data, BSTNode node) {
        if (node != null) {
            if (node.data == data)
                return true;
            else if (node.data > data)
                return searchNode(data, node.left);
            else if (node.data < data)
                return searchNode(data, node.rigth);
        }
        return false;
    }

    public boolean delete(int data) {
        if (empty())
            throw new NoSuchElementException("Tree is Empty");

        BSTNode currentNode = root;
        BSTNode parentNode = root;
        boolean isLeftChild = false;

        while (currentNode.data != data) {
            parentNode = currentNode;
            if (currentNode.data > data) {
                isLeftChild = true;
                currentNode = currentNode.left;
            } else if (currentNode.data < data) {
                isLeftChild = false;
                currentNode = currentNode.rigth;
            }
            if (currentNode == null)
                return false;
        }

        // CASE 1: node with no child
        if (currentNode.left == null && currentNode.rigth == null) {
            if (currentNode == root)
                root = null;
            if (isLeftChild)
                parentNode.left = null;
            else
                parentNode.rigth = null;
        }

        // CASE 2: if node with only one child
        else if (currentNode.left != null && currentNode.rigth == null) {
            if (root == currentNode) {
                root = currentNode.left;
            }
            if (isLeftChild)
                parentNode.left = currentNode.left;
            else
                parentNode.rigth = currentNode.left;
        } else if (currentNode.rigth != null && currentNode.left == null) {
            if (root == currentNode)
                root = currentNode.rigth;
            if (isLeftChild)
                parentNode.left = currentNode.rigth;
            else
                parentNode.rigth = currentNode.rigth;
        }

        // CASE 3: node with two child
        else if (currentNode.left != null && currentNode.rigth != null) {

            // Now we have to find minimum element in rigth sub tree
            // that is called successor
            BSTNode successor = getSuccessor(currentNode);
            if (currentNode == root)
                root = successor;
            if (isLeftChild)
                parentNode.left = successor;
            else
                parentNode.rigth = successor;
            successor.left = currentNode.left;
        }

        return true;
    }

    private BSTNode getSuccessor(BSTNode deleteNode) {

        BSTNode successor = null;
        BSTNode parentSuccessor = null;
        BSTNode currentNode = deleteNode.left;

        while (currentNode != null) {
            parentSuccessor = successor;
            successor = currentNode;
            currentNode = currentNode.left;
        }

        if (successor != deleteNode.rigth) {
            parentSuccessor.left = successor.left;
            successor.rigth = deleteNode.rigth;
        }

        return successor;
    }

    public int nodeWithMinimumValue() {
        return nodeWithMinimumValue(root);
    }

    private int nodeWithMinimumValue(BSTNode node) {
        if (node.left != null)
            return nodeWithMinimumValue(node.left);
        return node.data;
    }

    public int nodewithMaximumValue() {
        return nodewithMaximumValue(root);
    }

    private int nodewithMaximumValue(BSTNode node) {
        if (node.rigth != null)
            return nodewithMaximumValue(node.rigth);
        return node.data;
    }

    public int parent(int data) {
        return parent(root, data);
    }

    private int parent(BSTNode node, int data) {
        if (empty())
            throw new IllegalArgumentException("Empty");
        if (root.data == data)
            throw new IllegalArgumentException("No Parent node found");

        BSTNode parent = null;
        BSTNode current = node;

        while (current.data != data) {
            parent = current;
            if (current.data > data)
                current = current.left;
            else
                current = current.rigth;
            if (current == null)
                throw new IllegalArgumentException(data + " is not a node in tree");
        }
        return parent.data;
    }

    public int sibling(int data) {
        return sibling(root, data);
    }

    private int sibling(BSTNode node, int data) {
        if (empty())
            throw new IllegalArgumentException("Empty");
        if (root.data == data)
            throw new IllegalArgumentException("No Parent node found");

        BSTNode cureent = node;
        BSTNode parent = null;
        boolean isLeft = false;

        while (cureent.data != data) {
            parent = cureent;
            if (cureent.data > data) {
                cureent = cureent.left;
                isLeft = true;
            } else {
                cureent = cureent.rigth;
                isLeft = false;
            }
            if (cureent == null)
                throw new IllegalArgumentException("No Parent node found");
        }
        if (isLeft) {
            if (parent.rigth != null) {
                return parent.rigth.data;
            } else
                throw new IllegalArgumentException("No Sibling is there");
        } else {
            if (parent.left != null)
                return parent.left.data;
            else
                throw new IllegalArgumentException("No Sibling is there");
        }
    }

    public void leafNodes() {
        if (empty())
            throw new IllegalArgumentException("Empty");
        leafNode(root);
    }

    private void leafNode(BSTNode node) {
        if (node == null)
            return;
        if (node.rigth == null && node.left == null)
            System.out.print(node.data + " ");
        leafNode(node.left);
        leafNode(node.rigth);
    }

    public int level(int data) {
        if (empty())
            throw new IllegalArgumentException("Empty");
        return level(root, data, 1);
    }

    private int level(BSTNode node, int data, int level) {
        if (node == null)
            return 0;
        if (node.data == data)
            return level;
        int result = level(node.left, data, level + 1);
        if (result != 0)
            return result;
        result = level(node.rigth, data, level + 1);
        return result;
    }

    public int depth() {
        return depth(root);
    }

    private int depth(BSTNode node) {
        if (node == null)
            return 0;
        else
            return 1 + Math.max(depth(node.left), depth(node.rigth));
    }

    public int height() {
        return height(root);
    }

    private int height(BSTNode node) {
        if (node == null)
            return 0;
        else
            return 1 + Math.max(height(node.left), height(node.rigth));
    }

    public void leftView() {
        leftView(root);
    }

    private void leftView(BSTNode node) {
        if (node == null)
            return;
        int height = height(node);

        for (int i = 1; i <= height; i++) {
            printLeftView(node, i);
        }
    }

    private boolean printLeftView(BSTNode node, int level) {
        if (node == null)
            return false;

        if (level == 1) {
            System.out.print(node.data + " ");
            return true;
        } else {
            boolean left = printLeftView(node.left, level - 1);
            if (left)
                return true;
            else
                return printLeftView(node.rigth, level - 1);
        }
    }

    public void mirroeView() {
        BSTNode node = mirroeView(root);
        preorder(node);
        System.out.println();
        inorder(node);
        System.out.println();
        postorder(node);
        System.out.println();
    }

    private BSTNode mirroeView(BSTNode node) {
        if (node == null || (node.left == null && node.rigth == null))
            return node;

        BSTNode temp = node.left;
        node.left = node.rigth;
        node.rigth = temp;

        mirroeView(node.left);
        mirroeView(node.rigth);
        return node;
    }

    public void preorder() {
        preorder(root);
    }

    private void preorder(BSTNode node) {
        if (node != null) {
            System.out.print(node.data + " ");
            preorder(node.left);
            preorder(node.rigth);
        }
    }

    public void inorder() {
        inorder(root);
    }

    private void inorder(BSTNode node) {
        if (node != null) {
            inorder(node.left);
            System.out.print(node.data + " ");
            inorder(node.rigth);
        }
    }

    public void postorder() {
        postorder(root);
    }

    private void postorder(BSTNode node) {
        if (node != null) {
            postorder(node.left);
            postorder(node.rigth);
            System.out.print(node.data + " ");
        }
    }

    public boolean empty() {
        return root == null;
    }

}

public class BinarySearchTreeTest {
    public static void main(String[] l) {
        System.out.println("Weleome to Binary Search Tree");
        Scanner scanner = new Scanner(System.in);
        boolean yes = true;
        BinarySearchTree tree = new BinarySearchTree();
        do {
            System.out.println("\n1\. Insert");
            System.out.println("2\. Search Node");
            System.out.println("3\. Count Node");
            System.out.println("4\. Empty Status");
            System.out.println("5\. Delete Node");
            System.out.println("6\. Node with Minimum Value");
            System.out.println("7\. Node with Maximum Value");
            System.out.println("8\. Find Parent node");
            System.out.println("9\. Count no of links");
            System.out.println("10\. Get the sibling of any node");
            System.out.println("11\. Print all the leaf node");
            System.out.println("12\. Get the level of node");
            System.out.println("13\. Depth of the tree");
            System.out.println("14\. Height of Binary Tree");
            System.out.println("15\. Left View");
            System.out.println("16\. Mirror Image of Binary Tree");
            System.out.println("Enter Your Choice :: ");
            int choice = scanner.nextInt();
            switch (choice) {
            case 1:
                try {
                    System.out.println("Enter Value");
                    tree.insert(scanner.nextInt());
                } catch (Exception e) {
                    System.out.println(e.getMessage());
                }
                break;

            case 2:
                System.out.println("Enter the node");
                System.out.println(tree.searchNode(scanner.nextInt()));
                break;

            case 3:
                System.out.println(tree.countNodes());
                break;

            case 4:
                System.out.println(tree.empty());
                break;

            case 5:
                try {
                    System.out.println("Enter the node");
                    System.out.println(tree.delete(scanner.nextInt()));
                } catch (Exception e) {
                    System.out.println(e.getMessage());
                }

            case 6:
                try {
                    System.out.println(tree.nodeWithMinimumValue());
                } catch (Exception e) {
                    System.out.println(e.getMessage());
                }
                break;

            case 7:
                try {
                    System.out.println(tree.nodewithMaximumValue());
                } catch (Exception e) {
                    System.out.println(e.getMessage());
                }
                break;

            case 8:
                try {
                    System.out.println("Enter the node");
                    System.out.println(tree.parent(scanner.nextInt()));
                } catch (Exception e) {
                    System.out.println(e.getMessage());
                }
                break;

            case 9:
                try {
                    System.out.println(tree.countNodes() - 1);
                } catch (Exception e) {
                    System.out.println(e.getMessage());
                }
                break;

            case 10:
                try {
                    System.out.println("Enter the node");
                    System.out.println(tree.sibling(scanner.nextInt()));
                } catch (Exception e) {
                    System.out.println(e.getMessage());
                }
                break;

            case 11:
                try {
                    tree.leafNodes();
                } catch (Exception e) {
                    System.out.println(e.getMessage());
                }

            case 12:
                try {
                    System.out.println("Enter the node");
                    System.out.println("Level is : " + tree.level(scanner.nextInt()));
                } catch (Exception e) {
                    System.out.println(e.getMessage());
                }
                break;

            case 13:
                try {
                    System.out.println(tree.depth());
                } catch (Exception e) {
                    System.out.println(e.getMessage());
                }
                break;

            case 14:
                try {
                    System.out.println(tree.height());
                } catch (Exception e) {
                    System.out.println(e.getMessage());
                }
                break;

            case 15:
                try {
                    tree.leftView();
                    System.out.println();
                } catch (Exception e) {
                    System.out.println(e.getMessage());
                }
                break;

            case 16:
                try {
                    tree.mirroeView();
                } catch (Exception e) {
                    System.out.println(e.getMessage());
                }
                break;

            default:
                break;
            }
            tree.preorder();
            System.out.println();
            tree.inorder();
            System.out.println();
            tree.postorder();
        } while (yes);
        scanner.close();
    }
} 
```

# dom - 如何使用 CSS3/XPath 在 ExtJS 中遍历 DOM？

> ID：13373857
> 
> 赞同：0
> 
> 时间：2012-11-14T06:07:34.607
> 
> 标签：dom, extjs

这是我的示例 HTML：

![html树](../Images/b15ea4a33368a23097dd61e43b2e6af3.png)

我想将突出显示的 div 的内容修改为“新标题”。

这是我当前的代码：

```
var divTitle = Ext.select('div[id="main_form"]/table/tbody/tr[1]/td/table/tbody/tr[1]/td/div/div[2]/div'); 
```

似乎它不起作用。我是通过使用 Chrome 浏览器并复制 XPath 得到的。有人可以在这里帮助或指导我吗？

此外，我相信您还可以使用 CSS 选择（在我的情况下为 'pt_title'）来简化查询，所以请提及如何编码。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T06:40:31.877

找到了一种解决方案（使用 CSS 选择器）：

```
var divTitle = Ext.select('#main_form div.pt_title'); 
```

我仍然对另一种解决方案感兴趣，在这种解决方案中，您确实必须了解每个元素。我相信这是 jQuery 中的等价物：

```
var divTitle = $('#main_form > table > tbody > tr:nth-child(1) > td > table > tbody > tr:nth-child(1) > td > div > div:nth-child(2) > div');
divTitle.update('New Title'); 
```

# assembly - 在引导加载程序中初始化单独的 CPU 内核

> ID：13373858
> 
> 赞同：3
> 
> 时间：2012-11-14T06:07:34.947
> 
> 标签：assembly, multiprocessing, bootloader

我是引导加载程序开发的新手。我尝试了一些基本的东西，比如打印字符串“Hello World”之类的东西。我想问一些类似的事情，

是否有可能使用 asm/c/c++/mixed 在引导加载程序上分别初始化多核芯片中的内核？（比如，我想单独初始化第一个核心或单独初始化第三个核心）。

如果可能，请分享代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2019-06-04T03:41:16.467

> 是否有可能使用 asm/c/c++/mixed 在引导加载程序上分别初始化多核芯片中的内核？

是的，这完全有可能。

> 如果可能，请分享代码。

仅仅因为它是可能的并不意味着代码存在；即使代码存在，也不意味着它小到可以粘贴到这里。

现实情况是，要正确地做到这一点（在 80x86 上），您需要：

*   如果您处于实模式（例如 BIOS 的引导加载程序），请切换到保护模式和长模式
*   解析表（ACPI 的 MADT/APIC 表，或英特尔的 MultiProcessor 规范表，如果没有 ACPI）来确定本地 APIC/s 在哪里，还有多少其他 CPU，这些 CPU 使用哪些 ID。请注意，仅查找这些表（在您可以解析它们之前）可能涉及搜索物理地址空间的区域以查找签名和检查校验和。
*   建立某种可用于延迟和超时的时间源
*   查找/分配一些适合 AP CPU 启动蹦床的内存（低于 0x00100000，从页面边界开始）。在某些情况下，这可能比您想象的要复杂（对于 UEFI，不能保证 0x00100000 以下的任何内存都是空闲的，您可能需要`exitBootServices()`在合适的内存空闲之前调用，并且您可能需要初始化自己的视频输出调用之前的代码，`exitBootServices()`以便您可以在不再依赖 UEFI 的控制台支持后显示错误消息等）。
*   初始化 AP 启动蹦床，这通常涉及复制到您找到/分配的内存中，并且可能涉及在蹦床中设置各种值（例如 CPU 应用于堆栈的地址等）。当然，这也意味着在（16 位实模式）汇编中编写代码，并且通常涉及更多代码以切换到保护模式或长模式，因此如果/当 AP CPU 启动蹦床中的代码时，可以将 CPU 提升到它可以执行“正常”代码的状态。
*   执行 AP CPU 启动序列（包括使用一个 CPU 上的本地 APIC 向另一个 CPU 发送特殊的中断序列，包括时间延迟和超时，以及错误处理）。

当然，所有这些工作量很大，而且大部分工作都是出于多种原因完成的。例如，您可能会找到 APCI（和/或多处理器规范）表并稍后将它们用于 100 种不同的事物，然后您可能会初始化 timer/s 并稍后将它们用于 100 种不同的事物，您可能会初始化物理内存管理器并使用它用于 100 种不同的事情等。这意味着执行这些事情的代码最终会在整个引导过程中传播（一些在引导加载程序中，一些在其他引导代码中，一些在内核中），而且它“几乎永远不会”全部合二为一方便的地方（比如“这是在这个文件中启动其他 CPU 的所有内容”）。

# ruby-on-rails-3.2 - 如何覆盖活动管理员 0.5.0 的 scoped_collection 中的默认排序顺序

> ID：13373859
> 
> 赞同：3
> 
> 时间：2012-11-14T06:07:41.243
> 
> 标签：ruby-on-rails-3.2, activeadmin

我的 events.rb 中有以下代码。默认情况下，我将 sort_order 设置为 updated_at_desc。

但是如果 url 有一个参数ride_id (http://localhost:3000/admin/events?ride_id=3009) 我需要根据 created_at asc 对其进行排序。

它不工作。它仍然使用 sort_order updated_at_desc 获取结果。如何才能做到这一点。请帮忙。

下面的代码在我使用的以前版本的活动管理员上工作，但是当我将它更新到 0.5.0 时，我遇到了这个问题。

```
ActiveAdmin.register Event do
  config.sort_order = 'updated_at_desc'
  controller do
    def scoped_collection
      if params[:ride_id].present?
        end_of_association_chain.select('events.*').where('events.booking_id = ?', params[:ride_id]).order('created_at asc')
      else
       end_of_association_chain.select('events.*')
    end
  end
end 
```

结尾

我还使用了重新排序功能

```
end_of_association_chain.select('events.*').where('events.booking_id = ?', params[:ride_id]).reorder('created_at asc') 
```

我仍然无法通过 updated_at_desc 覆盖默认排序。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T14:22:11.890

如果你在某处设置使用类似的东西：

```
default_scope order: '... DESC' 
```

您可以使用

```
.unscoped 
```

像这样：

```
end_of_association_chain.select('events.*').unscoped.where... 
```

至少这就是解决我的类似问题的原因。

请注意以下帖子指出使用 default_scope 是一个坏主意，这正是因为我/我们所经历的：

[http://pragdave.blogs.pragprog.com/pragdave/2012/03/be-careful-using-default_scope-and-order.html](http://pragdave.blogs.pragprog.com/pragdave/2012/03/be-careful-using-default_scope-and-order.html)

我希望这会有所帮助，
TheMahrvin

# php - 按 where 条件排序

> ID：13373862
> 
> 赞同：2
> 
> 时间：2012-11-14T06:08:20.693
> 
> 标签：php, mysql, sql, codeigniter

我有以下查询：

```
select `state` from `table1` 
where `state` in ('NC','North Carolina','TN','Tennessee','CO','Colorado','NM','New Mexico','UT','Utah')
limit 200 offset 0 
```

我需要按`state`出现在我的`where`子句中的结果排序（即 first `NC`， then `TN`， then `CO`，依此类推）。

我怎样才能做到这一点？我尝试使用`order by`，但没有给出这个结果。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T06:12:00.880

您可以使用**[`ORDER BY FIELD`](http://www.imthi.com/blog/programming/mysql-order-by-field-custom-field-sorting.php)**

```
SELECT `state`
FROM `table1`
WHERE `state` IN ('NC','North Carolina','TN','Tennessee','CO','Colorado','NM','New Mexico','UT','Utah')
ORDER BY FIELD(`state`, 'NC','North Carolina','TN','Tennessee','CO','Colorado','NM','New Mexico','UT','Utah'); 
```

*   [**SQLFiddle 演示**](http://sqlfiddle.com/#!2/92a16d/2)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T06:32:34.467

```
SELECT col_name
FROM table_nane
WHERE col_nane IN ('NC','North Carolina','TN','Tennessee','CO','Colorado','NM','New Mexico','UT','Utah')
ORDER BY FIELD(`state`, 'NC',.....); 
```

等等....

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T06:11:12.540

尝试这个：

```
order by case when `state`='NC' or `state`='North Carolina' then 1 
              when `state`='TN' or `state`='Tennessee' then 2
              when `state`='CO' or `state`='Colorado' then 3
         end 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-14T06:11:42.710

您可以结合`ORDER BY`一个`CASE WHEN`构造：

```
ORDER BY CASE 
            WHEN state = 'NC' THEN 1
            WHEN state = 'North Carolina' THEN 2
            ...
         END 
```

# android - Rails 3 / PhoneGap：将 Rails 应用程序转换为 Phonegap Android 应用程序？

> ID：13373863
> 
> 赞同：2
> 
> 时间：2012-11-14T06:08:32.487
> 
> 标签：android, ruby-on-rails

我有一个建立在 Rails 之上的网站。本质上，我想发布一个 Android 应用程序，我认为 Phonegap 是一个很好的解决方案。

完成这样的事情最简单的方法是什么？我是 PhoneGap 的新手，想知道如何实现这一点。

有没有办法做到这一点？如果有人可以深入解释这一点或分享教程的链接/URL，那将非常有帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T08:51:45.253

我们最近添加了我们网站的电话间隙版本。这些是我们采取的步骤：

1.  使用backbone.js 构建了一个单页移动应用程序——主干是轻量级的，这对移动流量很重要。

    见：
    [http ://railscasts.com/episodes/323-backbone-on-rails-part-1](http://railscasts.com/episodes/323-backbone-on-rails-part-1)
    [http://railscasts.com/episodes/325-backbone-on-rails-part-2](http://railscasts.com/episodes/325-backbone-on-rails-part-2)

2.  所有表单都应该转到完整路径 url（例如[http://example.com/accounts](http://example.com/accounts)而不是 /accounts）
3.  使用部署脚本将您的 html、js、css 和图像转储到单个文件夹
4.  使用 Phonegap 包装 3 的输出

# ruby - 耙中止！为 File:Class 调用私有方法“move”

> ID：13373870
> 
> 赞同：0
> 
> 时间：2012-11-14T06:09:19.390
> 
> 标签：ruby, rake, jruby

我确实在 Jruby+swing 中完成了一个小型桌面应用程序。现在我想部署它。我发现 rawr 是从非 Web 应用程序构建 jar 的最佳选择。但是当我尝试从 Jruby 项目构建 jar 时，出现“ **rake aborted！private method `move' called for File:Class ”错误。**

这是来自 cmd promet 的完整跟踪：

```
E:\NETBEANS\KeyingClient_jruby\lib>rake rawr:jar --trace
c:/jruby-1.7.0/lib/ruby/gems/shared/gems/rawr-1.2/lib/zip/zip.rb:28: Use RbConfi
g instead of obsolete and deprecated Config.
** Invoke rawr:jar (first_time)
** Invoke rawr:compile (first_time)
** Invoke rawr:compile_java_classes (first_time)
** Invoke rawr:prepare (first_time)
** Invoke rawr:load_configuration (first_time)
** Execute rawr:load_configuration
** Execute rawr:prepare
** Execute rawr:compile_java_classes
** Invoke rawr:compile_ruby_classes (first_time)
** Invoke rawr:prepare
** Execute rawr:compile_ruby_classes
** Invoke rawr:copy_other_file_in_source_dirs (first_time)
** Invoke rawr:prepare
** Execute rawr:copy_other_file_in_source_dirs
** Execute rawr:compile
** Invoke rawr:build_data_jars (first_time)
** Invoke rawr:prepare
** Execute rawr:build_data_jars
** Execute rawr:jar
=== Creating jar file: E:/NETBEANS/KeyingClient_jruby/lib/package/jar/KeyingClie
nt.jar
rake aborted!
private method `move' called for File:Class
c:/jruby-1.7.0/lib/ruby/gems/shared/gems/rawr-1.2/lib/zip/zip.rb:1570:in `on_suc
cess_replace'
c:/jruby-1.7.0/lib/ruby/gems/shared/gems/rawr-1.2/lib/zip/zip.rb:1478:in `commit
'
c:/jruby-1.7.0/lib/ruby/gems/shared/gems/rawr-1.2/lib/zip/zip.rb:1493:in `close'

c:/jruby-1.7.0/lib/ruby/gems/shared/gems/rawr-1.2/lib/zip/zip.rb:1385:in `open'
c:/jruby-1.7.0/lib/ruby/gems/shared/gems/rawr-1.2/lib/jar_builder.rb:40:in `buil
d'
c:/jruby-1.7.0/lib/ruby/gems/shared/gems/rawr-1.2/lib/rawr.rb:171:in `(root)'
org/jruby/RubyProc.java:249:in `call'
c:/jruby-1.7.0/lib/ruby/gems/shared/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `e
xecute'
org/jruby/RubyArray.java:1612:in `each'
c:/jruby-1.7.0/lib/ruby/gems/shared/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `e
xecute'
c:/jruby-1.7.0/lib/ruby/gems/shared/gems/rake-0.9.2.2/lib/rake/task.rb:158:in `i
nvoke_with_call_chain'
c:/jruby-1.7.0/lib/ruby/1.9/monitor.rb:211:in `mon_synchronize'
c:/jruby-1.7.0/lib/ruby/gems/shared/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `i
nvoke_with_call_chain'
c:/jruby-1.7.0/lib/ruby/gems/shared/gems/rake-0.9.2.2/lib/rake/task.rb:144:in `i
nvoke'
c:/jruby-1.7.0/lib/ruby/gems/shared/gems/rake-0.9.2.2/lib/rake/application.rb:11
6:in `invoke_task'
c:/jruby-1.7.0/lib/ruby/gems/shared/gems/rake-0.9.2.2/lib/rake/application.rb:94
:in `top_level'
org/jruby/RubyArray.java:1612:in `each'
c:/jruby-1.7.0/lib/ruby/gems/shared/gems/rake-0.9.2.2/lib/rake/application.rb:94
:in `top_level'
c:/jruby-1.7.0/lib/ruby/gems/shared/gems/rake-0.9.2.2/lib/rake/application.rb:13
3:in `standard_exception_handling'
c:/jruby-1.7.0/lib/ruby/gems/shared/gems/rake-0.9.2.2/lib/rake/application.rb:88
:in `top_level'
c:/jruby-1.7.0/lib/ruby/gems/shared/gems/rake-0.9.2.2/lib/rake/application.rb:66
:in `run'
c:/jruby-1.7.0/lib/ruby/gems/shared/gems/rake-0.9.2.2/lib/rake/application.rb:13
3:in `standard_exception_handling'
c:/jruby-1.7.0/lib/ruby/gems/shared/gems/rake-0.9.2.2/lib/rake/application.rb:63
:in `run'
c:/jruby-1.7.0/lib/ruby/gems/shared/gems/rake-0.9.2.2/bin/rake:33:in `(root)'
org/jruby/RubyKernel.java:1045:in `load'
c:/jruby-1.7.0/bin/rake:23:in `(root)'
Tasks: TOP => rawr:jar 
```

我正在使用“rake rawr:jar”进行构建，我的 jruby 版本是 1.7.0。

任何人都可以告诉我出了什么问题...

预先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T06:22:57.797

`File.move`似乎已[在 Ruby 1.9.x 中删除](http://apidock.com/ruby/v1_8_7_330/File/move/class)。这可能是 rawr 中的一个错误。`File.rename`应该是一个不错的选择。

我相信该`move`功能已被淘汰，因为它无法跨文件系统移动内容，并且在尝试进行此类操作时会导致大量错误。大多数人不会测试这类东西，因此当它影响到试图在具有不同分区的系统上使用它的人时，它通常会产生问题。

该`rename`方法采用了一种不同的、更可靠的方法，并将根据需要进行复制。

# android - 安卓图像编辑器

> ID：13373878
> 
> 赞同：28
> 
> 时间：2012-11-14T06:10:00.743
> 
> 标签：android, image-editor

我想创建一个 Android 应用程序，我可以在其中从 SD 卡或相机拍照。拍完照片后，我要编辑它，比如在图片中添加文字，裁剪图片，将.gif类型的文件添加到图片中。拍照不是问题，但我不明白如何编写代码来编辑图片。我需要知道我是否必须为此使用 OpenGL。需要建议和有用的链接。

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-11-14T07:44:00.673

## 你的问题太模糊了。我提供一些指导。

## [2020 年更新：您可以浏览 Android Asernal https://android-arsenal.com/tag/47](https://android-arsenal.com/tag/47)中列出的所有图像处理库

1.  使用[~~Aviary SDK~~](http://www.aviary.com/android)现在变成[Creative SDK](https://creativesdk.adobe.com/)。它还支持 iOS 和 WindowPhone7。Aviary 提供了大部分功能，例如方向、裁剪和锐度、红眼、美白和瑕疵、贴纸、绘图、文本和模因（测试版）、亮度、饱和度和对比度以及自定义选项。![党卫军](../Images/308f316c44cef051003d739009196818.png).
2.  [Fotor SDK](https://sdk.fotor.com/)
3.  ~~Adobe 的[创意 SDK](https://creativesdk.adobe.com/)~~
4.  直接处理位图。

```
import android.graphics.Bitmap;

    public class ProcessingImage {
    private Bitmap defaultImg;
    private int idBitmap;

    public int getIdBitmap() {
        return idBitmap;
    }

    public void setIdBitmap(int idBitmap) {
        this.idBitmap = idBitmap;
    }

    public Bitmap getDefaultImg() {
        return defaultImg;
    }

    public void setDefaultImg(Bitmap defaultImg) {
        this.defaultImg = defaultImg;
    }

    public ProcessingImage() {
    }

    public Bitmap processingI(Bitmap myBitmap) {
        return myBitmap;
    }

    public Bitmap TintThePicture(int deg, Bitmap defaultBitmap) {
        int w = defaultBitmap.getWidth();
        int h = defaultBitmap.getHeight();

        int[] pix = new int[w * h];
        defaultBitmap.getPixels(pix, 0, w, 0, 0, w, h);

        double angle = (3.14159d * (double) deg) / 180.0d;
        int S = (int) (256.0d * Math.sin(angle));
        int C = (int) (256.0d * Math.cos(angle));

        int r, g, b, index;
        int RY, BY, RYY, GYY, BYY, R, G, B, Y;

        for (int y = 0; y < h; y++) {
            for (int x = 0; x < w; x++) {
                index = y * w + x;
                r = (pix[index] >> 16) & 0xff;
                g = (pix[index] >> 8) & 0xff;
                b = pix[index] & 0xff;
                RY = (70 * r - 59 * g - 11 * b) / 100;
                BY = (-30 * r - 59 * g + 89 * b) / 100;
                Y = (30 * r + 59 * g + 11 * b) / 100;
                RYY = (S * BY + C * RY) / 256;
                BYY = (C * BY - S * RY) / 256;
                GYY = (-51 * RYY - 19 * BYY) / 100;
                R = Y + RYY;
                R = (R < 0) ? 0 : ((R > 255) ? 255 : R);
                G = Y + GYY;
                G = (G < 0) ? 0 : ((G > 255) ? 255 : G);
                B = Y + BYY;
                B = (B < 0) ? 0 : ((B > 255) ? 255 : B);
                pix[index] = 0xff000000 | (R << 16) | (G << 8) | B;
            }
        }

        Bitmap bm = Bitmap.createBitmap(w, h, defaultBitmap.getConfig());
        bm.setPixels(pix, 0, w, 0, 0, w, h);

        pix = null;
        return bm;
     }
     } 
```

用法：工艺靛蓝颜色：`TintThePicture(180, myBitmap);` 工艺绿色颜色：`TintThePicture(300, myBitmap);`

5.  API14中提供了使用[android.media.effect](http://developer.android.com/reference/android/media/effect/package-summary.html)

6.  [效果专业版](https://github.com/yaa110/Effects-Pro)

7.  [Android-图像编辑](https://github.com/baugarten/Android-Image-Edit)

8.  [安卓图像编辑器](http://code.google.com/p/android-image-editor/source/browse/#svn/trunk/src/com/android/image/edit)

9.  [smartcrop-android](https://github.com/QuadFlask/smartcrop-android)（这个库将通过计算一些特征来分析最佳裁剪位置和大小；边缘、肤色、身高和面部。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-11-27T17:38:34.570

首先回答您的问题，不，您不必使用openGL。至于示例，这里有一些开源示例：

iQuePhoto：[https ://github.com/iQueSoft/iQuePhoto](https://github.com/iQueSoft/iQuePhoto)

叶图：[https ://github.com/HoraApps/LeafPic](https://github.com/HoraApps/LeafPic)

# javascript - javascript for...in 语句。排除第一次和最后一次迭代。并拆分循环 12 的倍数

> ID：13373879
> 
> 赞同：1
> 
> 时间：2012-11-14T06:10:11.537
> 
> 标签：javascript

我有一个不是由我编码的 javascript 计算器，我正在做前端编码，以使其在带有 UI 的网页上可用。当所有计算完成后，有一段代码开始为 UI 准备数据。

```
 for (var RowIndex in Calc.Graphic)
            {
                Row = Calc.Graphic[RowIndex];
            Graph += "<tr>";
            Graph += "<td>"+ RowIndex +"</td>";
            Graph += "<td>" + Row.SummPay + "</td>";
            Graph += "</tr>";

            } 
```

这个带有付款时间表的循环男性表，我需要从它排除第一次和最后一次迭代，因为它是技术数据。RowIndex - 是月数，Row.SummPay 是总和。这是javascript工作后的表格。如何排除 0 和 13。

```
Month SummPay
0   0
1   84501
2   70418
3   58682
4   48901
5   40751
6   33960
7   28300
8   23583
9   19653
10  16378
11  13648
12  11225
13  1000 
```

如果有超过 12 个月的停止循环并开始形成新表，则向左浮动

```
1   84501   13 11225
2   70418   14 11225
3   58682   15 11225
4   48901   16 11225
5   40751   17 11225
6   33960   18 11225
7   28300   19 11225
8   23583   20 11225
9   19653   21 11225
10  16378   22 11225
11  13648   23 11225
12  11225   24 11225 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T06:23:26.440

简单的。不要使用 for ... in。相反，首先使用它。

据我了解，它应该是12的乘积。在这种情况下：

```
 for (var RowNumber = 1; RowNumber < 13; RowNumber ++)
        {
            Graph += "<tr>";
            for (var colIndex = 0; colIndex < Calc.Graphic.length / 12; colIndex ++){
                var rowIndex = RowNumber + 12*colIndex
                Row = Calc.Graphic[rowIndex];
                Graph += "<td>"+ rowIndex +"</td>";
                Graph += "<td>" + Row.SummPay + "</td>";
            }
            Graph += "</tr>";
        } 
```

# google-sheets - 简单的函数没有在谷歌电子表格中返回正确的列号

> ID：13373881
> 
> 赞同：0
> 
> 时间：2012-11-14T06:10:15.467
> 
> 标签：google-sheets, google-spreadsheet-api

我编辑了 K 列，日志文件显示 columnNum=1，它应该是 11。我是否使用了错误的日志记录功能？或者没有以某种方式正确测试它？可能是什么问题呢？先感谢您。

```
function onEdit() {
  var s = SpreadsheetApp.getActiveSheet();
  var r = s.getActiveCell();
  var columnNum = r.getColumn();

    var msg = 'columnNum= ' + columnNum;
  Logger.log (msg);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T06:37:19.463

记录器仅在脚本从脚本管理器中运行时记录值。这与 onEdit 函数的操作方式相冲突。替换 Logger.log (msg); 与 Browser.msgBox(msg); 看看输出是否仍然不正确。

如果您需要存储从 msg 生成的值，您可能希望将这些值打印到单独的工作表中。

# linux - 如何显示确认结果和出现次数

> ID：13373882
> 
> 赞同：16
> 
> 时间：2012-11-14T06:10:15.030
> 
> 标签：linux, ack

```
ack foo * 
```

返回行列表：

```
bar.txt
28: this is foo stuff

dump.txt
12: results of foo

gobs.txt
1137: more lines with foo 
```

和

```
ack -c -l 
```

返回

```
3 
```

我的问题是，我怎样才能同时显示两者？我想要第一个示例中的行列表以及第二个示例*中*匹配的行数。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2016-07-15T04:24:21.697

您可以使用

`ack -hc`（`-h`是 的简写`--no-filename`）以获得总计数。

根据[ack 文档/手册页](http://beyondgrep.com/documentation/ack-2.14-man.html)：

> ### -c，--计数
> 
> 抑制正常输出；而是打印每个输入文件的匹配行数。如果`-l`有效，它将仅显示每个文件的行数匹配的行数。如果没有`-l`，某些行数可能为零。
> 
> 如果与`-h`( `--no-filename`)结合，`ack`则仅输出一个总数。

这对我有用（扩展@Jordan的答案）-

`ack 'pattern' && ack -hc 'pattern'`

或者，更好（IMO）：

`ack 'pattern'; ack -hc 'pattern'`

据我了解，使用`&&`，第二个命令取决于第一个返回运行；无论如何，使用`;`代替只会一个接一个地运行它们。在这种情况下，我认为`;`是更合适的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T06:51:21.690

没有办法`ack`在一个命令中输出你想要的两个东西。获得所需内容的最简单方法是将两个命令与`&&`.

# html - 偏移 iframe 内的网页位置

> ID：13373884
> 
> 赞同：7
> 
> 时间：2012-11-14T06:10:19.683
> 
> 标签：html, css, iframe

我有一个应该加载表单的 iframe 弹出窗口。

该表单是较大页面的一部分，并包含一些输入字段。

在这种情况下，加载它的 iframe（并且限制为大约 1000 像素宽）充当不同页面的“窗口”。

有没有办法在加载时不对齐 iframe 而是对齐内容本身？我想将整个 html 文档加载到 iframe 内，但有一个偏移量，以便 iframe 窗口只显示通常在侧面或底部或其他地方被截断的字段，看看 iframe 大小是如何受到限制的，但页面正在显示不是。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-01-08T19:03:26.293

有几种方法可以做到这一点，您可以在 url 中包含一个 id，例如： [http ://somesite.com/yourpage#anchor](http://somesite.com/yourpage#anchor)

这可行，但如果您不拥有 iframe 的网站（例如某种没有 iframe 集成的自定义视频网站），您可以通过 css 使用之前的空偏移 div：http: [//aldebaranwebdesign.com/blog/how-在 iframe 中定位页面/](http://aldebaranwebdesign.com/blog/how-to-position-a-page-within-an-iframe/)

你的 CSS：

```
#outerdiv
{
width:446px;
height:246px;
overflow:hidden;
position:relative;
}

#inneriframe
{
position:absolute;
top:-412px;
left:-318px;
width:1280px;
height:1200px;
} 
```

的HTML：

```
<div id='outerdiv'>
<iframe src="http://www.siteto integrate.com/" id='inneriframe' scrolling=no></iframe>
</div> 
```

# android - 是不是有些厂商的设备不支持“支持库”

> ID：13373890
> 
> 赞同：2
> 
> 时间：2012-11-14T06:10:42.347
> 
> 标签：android, android-asynctask, android-fragments, android-fragmentactivity

我想为 android 创建一个应用程序，我想在其中使用`AsyncTaskLoader`和`FragmentActivity`. 我将最低 sdk 版本保持为 8 `android:minSdkVersion="8"`。因此我必须在我的代码中导入`import android.support.v4.content.AsyncTaskLoader;`, `import android.support.v4.app.FragmentActivity;`& 。`import android.support.v4.app.LoaderManager;`但问题是，当我在标准制造商设备（如 SAMSUMG、LG 等）上测试应用程序时。应用程序运行完美，但在某些制造商（我不想提及）设备上，应用程序一旦启动就会关闭，并且当我看到它时，`stacktrace`我发现这是因为`supportlibrary`错误。

谁能告诉我如何使我的应用程序与所有类型的设备兼容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T06:49:01.120

问题可能出在设备的 /system/framework/framework.jar 文件中。

有时，您实际上可以编译所需的 .jar 文件，方法是从可工作的设备获取源代码，并分别编译 Framework.jar 的各个部分以生成所需的 .jar 库。

然后将其作为源代码包含在您的项目中。但是，我会仔细检查您是否不会弄乱其他正在运行的服务，因为从本质上讲，您将访问自己的隐藏 API，该 API 通常已经是 Google API 中的隐藏 API。（提示 AsyncTaskLoader）。

假设您的库中已经有了 android-support-v4.jar。

# php - 为什么我的img不显示？

> ID：13373891
> 
> 赞同：2
> 
> 时间：2012-11-14T06:10:45.660
> 
> 标签：php, sql, css, html

让这一切都与html一起工作。然后我试着把它做成 html5 并且我正在编写我的第一个 css 代码。我现在唯一要解决的是为什么我的图像没有显示？我正在使用谷歌浏览器顺便说一句。url 中传递的代码是这样的：“?fname=raichu&yesorno=true%2F”并且我生成的 html 中没有图像标签：/ 我假设 if 语句等于 false？

```
<!DOCTYPE HTML>
<html>
<head>

<style type="text/css"> 

 td{
    text-align: center;
    padding:15px;
    background-color:black;
    color:#00FF00;}

 th{
    background-color:black;
    color:yellow}

</style>

         <title>Search Results</title>

</head>

    <body style="color:#FFFFFF"> 

<?php

$dbhost = 'server';
$dbname = 'database1';
$dbuser = 'me';
$dbpass = 'password';

$link = mysqli_connect($dbhost,$dbuser,$dbpass,$dbname);

mysqli_select_db($link,$dbname);

$naame = $_GET["fname"];

if( $_GET["yesorno"] == 'true' OR !$_GET["yesorno"])
            {$query = sprintf("SELECT image_url, Type 
                               FROM Pokemon c 
                               WHERE c.name='%s'", mysqli_real_escape_string($link,$naame));

    $result = mysqli_fetch_assoc(mysqli_query($link,$query));

    echo '<img height="450" width="330" src="'.$result['image_url'].'" alt="blue"/>';}

$res = mysqli_query($link,"SELECT Name,HP,Type,Pokedex_Number AS 'Pokedex  Number',Weakness,Resistance,Retreat AS 'Retreat Cost' 
                           FROM Pokemon 
                           WHERE Pokedex_Number!=0 AND name='$naame'");

if (!$res) {
    die("Query to show fields from table failed");}

    $fields_num = mysqli_num_fields($res);

echo "<h1>Stats</h1>";
echo "<table border='1'><tr>";

// printing table headers
for($i=0; $i<$fields_num; $i++)
{$field = mysqli_fetch_field($res);
echo "<th>{$field->name}</th>";}

echo "</tr>\n";

// printing table rows
while($row = mysqli_fetch_row($res))
{
echo "<tr>";

// $row is array... foreach( .. ) puts every element
// of $row to $cell variable
foreach($row as $cell)
    echo "<td>$cell</td>";

echo "</tr>\n";
}   

echo "</table>";

mysqli_close($link);

    ?>

<br />
<form method="link" 
action = "http://engr.oregonstate.edu/~bainro/welcome.php" ><input 
type="submit" value="(>O.O)>RETURN<(O.O<)"></form>
<p></p>

    </body>

</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T06:33:11.463

你有

```
&yesorno=true%2F 
```

因此 $_GET['yesorno'] 将等同于 'true/' 因为 %2f 是一个正斜杠。

这不匹配

```
if( $_GET["yesorno"] == 'true' OR !$_GET["yesorno"]) 
```

所以你是对的 - 那条线失败了，所以你不会得到图像。

解决方案：从查询中删除 %2F。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T07:28:41.600

您从 url 检索的变量永远不会评估为 true，因为 '%2F' 是正斜杠。检查你的代码。

# c - 从 C 到 SPARC 的字符数组转换

> ID：13373900
> 
> 赞同：1
> 
> 时间：2012-11-14T06:11:23.333
> 
> 标签：c, arrays, char, sparc

考虑如下所示的 C 源代码语句。

```
 struct person  
   {
      char name[30];  
      int id;  
      int points;  
   };  

   char Fmt[] = "Name: %s  ID: %d  Points: %d\n";  
   void display_one( struct person List[], int I )  
   {  
      printf( Fmt, List[I].name, List[I].id, List[I].points );  
   } 
```

完成下面的 SPARC 汇编语言代码段，使汇编语言语句的顺序与上面的 C 语句等价。

```
 .section ".data"
      .align   4
Fmt:   .asciz   "Name: %s  ID: %d  Points: %d\n"
      .global  display_one
      .section ".text"
      .align   4

display_one:
      save     %sp, -96, %sp
      smul     %i1, 40, %l1
      add      %i0, %l1, %l0
      set      Fmt, %o0
      mov      %l0, %o1
      ld       [%l0+32], %o2
      ld       [%l0+36], %o3
      call     printf
      nop
      ret
      restore 
```

我想知道 smul %i1, 40, %l1 行在做什么。我不明白为什么它要乘以 40。如果有人能解释一下，那就太好了。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T06:33:59.113

`40`是 的大小`struct person`：

```
char name[30];   // 30 bytes
                 // 2 bytes padding to make the following int aligned
int id;          // 4 bytes
int points;      // 4 bytes 
```

参数`I`乘以`40`计算 的地址`List[I]`。

# c# - 投射下拉列表数据源

> ID：13373906
> 
> 赞同：-1
> 
> 时间：2012-11-14T06:11:53.473
> 
> 标签：c#, asp.net, devexpress

有没有办法将 DropDownlist 数据源转换为数据表。

gridview 可以进行以下操作。但不适用于下拉列表。

```
DataTable dtSource = (DataTable)DropDownListCNPPRO.DataSource; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T09:39:19.027

该`DataSource`属性只是内部变量的 getter 和 setter 方法。从问题内容来看，我猜测该属性是某种 IDataSource 类型，它是用`DataTable`class 实现的。

但是，我的观点是，`T` **当且仅当**：

*   `T`是该属性的基类或接口。
    **或者**
*   `T`不是基类，而是继承人，并且它或它的后代之前**已设置**为该属性。像这样：

### 例子

```
interface IFoo { }
class Foo1 : IFoo { }
class Foo2 : IFoo { }

class Bar
{
    internal IFoo Foobar { get; set; }
}

void main()
{
    Bar bar = new Bar();
    bar.Foobar = new Foo1();

    IFoo instance1 = bar.Foobar; // Ok.
    Foo1 instance2 = (Foo1)bar.Foobar; // Bad practice, but ok.

    Foo2 instance3 = (Foo2)bar.Foobar; // Bad practive plus an exception.
    Foo2 instance3 = (Foo2)(Foo1)bar.Foobar; // Still an exception.
    Foo2 instance3 = (Foo2)(IFoo)(Foo1)bar.Foobar; // Still a fail.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T09:57:17.877

这绝对取决于数据源是什么。如果你更换

```
DropDownListCNPPRO.DataSource 
```

通过“真实”数据源（例如通用列表），编译器会告诉您是否可以转换。

# android - 如何让获得焦点的Edittext中的软键盘输出

> ID：13373908
> 
> 赞同：1
> 
> 时间：2012-11-14T06:12:03.390
> 
> 标签：android, android-edittext

我在应用程序中制作了一个软键盘。有两个edittext，点击可以获得焦点，但是软键盘只能在第二个edittext中输出。有什么方法可以让 Edittext 的软键盘输出获得焦点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T06:21:56.570

**去掉xml文件中的android:focusable属性、android:foucsableInTouchMode属性和标签**，现在就做，然后

```
public class YOURMAINActivity extends Activity implements OnClickListener {

   private EditText editTxt1;
   private EditText editTxt2;

   @Override
   public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.layout_id);
        editTxt1 = (EditText)findViewById(R.id.edit_text_one_id); 
        editTxt2 = (EditText)findViewById(R.id.edit_text_two_id);
        editTxt1.setOnClickListener(this);
        editTxt2.setOnClickListener(this);

   @Override
   public void onClick(View view) {

       switch(v.getId()) {

           case R.id.R.id.edit_text_one_id :
                    editTxt1.requestFocus();
                    editTxt1.setFocusable(true);
                    editTxt2.setFocusable(false);
                    break; 
           case R.id.R.id.edit_text_two_id :
                    editTxt2.requestFocus();
                    editTxt2.setFocusable(true);
                    editTxt1.setFocusable(false);
                    break;
       }
        // Add Code for Showing Keyboard Here
    }
} 
```

# sql-server - SQL Server 中的 case 语句中的语法错误

> ID：13373910
> 
> 赞同：1
> 
> 时间：2012-11-14T06:12:25.007
> 
> 标签：sql-server, sql-server-2008, syntax-error, case

我在下面的代码中遇到语法错误：我在所有遇到错误的地方都加粗了。我可以使用 if-else 语句，但我真的想要用例语句。请帮助我解决错误。

```
**CASE** @policy_type

        WHEN 'car' THEN 
        (Select policy_id,customer_id,policy_duration,requested_policy_amount,Car_Age
          ,Car_Amount
          ,Number_of_Accidents,estimated_car_premium INTO
           #PendingRequest FROM [dbo].[Policy] p join [dbo].[Car_Insurance] c on
          p.policy_type_id=c.policy_type_id and p.approved_policy_amount is Null 
          --And employee_id=@employee_id
          join
          [dbo].[Car_Insurance_Estimate] c_est on car_age >= c_est.min_car_age and car_age <= c_est.max_car_age
          and Car_Amount>=c_est.min_car_amount and Car_Amount<=c_est.max_car_amount and Number_of_Accidents>=c_est.min_accidents 
            and Number_of_Accidents<=c_est.max_accidents)

        **WHEN** 'life' THEN 

        (Select policy_id,customer_id,policy_duration,requested_policy_amount,Age
          ,l.Illness
          ,l.Income
          ,premium_insurance_percentage,amount_insurance_percentage
           INTO
           #PendingRequest from [dbo].[Policy] p join [dbo].[life_Insurance] l on
          p.policy_type_id=l.policy_type_id and p.approved_policy_amount is Null 
          And employee_id=@employee_id
          join
          [dbo].[life_Insurance_Estimate] l_est on age >= l_est.min_age and age <= l_est.max_age
          and income>=l_est.min_income and income<=l_est.max_income and l.illness=l_est.illness)

        when 'home' then 

        (Select policy_id,customer_id,policy_duration,requested_policy_amount,home_Age
          ,home_Amount
          ,h.Area,home_premium_percentage  INTO
           #PendingRequest 
          from [dbo].[Policy] p join [dbo].[home_Insurance] h on
          p.policy_type_id=h.policy_type_id and p.approved_policy_amount is Null 
          And employee_id=@employee_id
          join
          [dbo].[home_Insurance_Estimate] h_est on home_age >= h_est.min_home_age and home_age <= h_est.max_home_age
          and home_Amount>=h_est.min_home_amount and home_Amount<=h_est.max_home_amount and h.Area=h_est.area)

        **END** 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T07:32:39.713

> 我可以使用 if-else 语句，但我真的想要用例语句。

每当我看到这一点时，我都会三思而后行，这是否是一个真正的问题。为什么？

如果必须将其组合为一个语句，则可以将条件放入 SELECT 语句中并使用 UNION ALL 将它们连接起来，其中只有一个会实际产生结果。

```
--declare @policy_type varchar(10), @employee_id int
Select policy_id,customer_id,policy_duration,requested_policy_amount,Car_Age
          ,Car_Amount
          ,Number_of_Accidents,estimated_car_premium
INTO #PendingRequest
          FROM [dbo].[Policy] p join [dbo].[Car_Insurance] c on
          p.policy_type_id=c.policy_type_id and p.approved_policy_amount is Null 
          --And employee_id=@employee_id
          join
          [dbo].[Car_Insurance_Estimate] c_est on car_age >= c_est.min_car_age and car_age <= c_est.max_car_age
          and Car_Amount>=c_est.min_car_amount and Car_Amount<=c_est.max_car_amount and Number_of_Accidents>=c_est.min_accidents 
            and Number_of_Accidents<=c_est.max_accidents
AND @policy_type = 'car'
UNION ALL
Select policy_id,customer_id,policy_duration,requested_policy_amount,Age
          ,l.Illness
          ,l.Income
          ,premium_insurance_percentage,amount_insurance_percentage
          from [dbo].[Policy] p join [dbo].[life_Insurance] l on
          p.policy_type_id=l.policy_type_id and p.approved_policy_amount is Null 
          And employee_id=@employee_id
          join
          [dbo].[life_Insurance_Estimate] l_est on age >= l_est.min_age and age <= l_est.max_age
          and income>=l_est.min_income and income<=l_est.max_income and l.illness=l_est.illness
AND @policy_type = 'life'
UNION ALL
Select policy_id,customer_id,policy_duration,requested_policy_amount,home_Age
          ,home_Amount
          ,h.Area,home_premium_percentage 
          from [dbo].[Policy] p join [dbo].[home_Insurance] h on
          p.policy_type_id=h.policy_type_id and p.approved_policy_amount is Null 
          And employee_id=@employee_id
          join
          [dbo].[home_Insurance_Estimate] h_est on home_age >= h_est.min_home_age and home_age <= h_est.max_home_age
          and home_Amount>=h_est.min_home_amount and home_Amount<=h_est.max_home_amount and h.Area=h_est.area
AND @policy_type = 'home'; 
```

如果这是一些愚蠢的分配要求，那么您可以对最后一行进行良性更改，例如

```
AND CASE @policy_type WHEN 'home' then 1 else 0 END = 1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T07:52:40.907

代替 case ，你可以使用 if 语句

```
if @policy_type = 'Car'
BEGIN
     Query1
END 
ELSE IF (@policy_type = 'life')
BEGIN
    Query2
END 
```

因此你的#table 将在任何地方都可以访问

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T06:42:56.377

在这种情况下，使用 IF...ELSE 会容易得多。但是，如果您坚持使用 CASE，那么这可能是一种选择：

```
DECLARE @SQL varchar(max);
SELECT @SQL=
CASE @policy_type

        WHEN 'car' THEN 
        'Select policy_id,customer_id,policy_duration,requested_policy_amount,Car_Age
          ,Car_Amount
          ,Number_of_Accidents,estimated_car_premium INTO
           #PendingRequest FROM [dbo].[Policy] p join [dbo].[Car_Insurance] c on
          p.policy_type_id=c.policy_type_id and p.approved_policy_amount is Null 
          --And employee_id=@employee_id
          join
          [dbo].[Car_Insurance_Estimate] c_est on car_age >= c_est.min_car_age and car_age <= c_est.max_car_age
          and Car_Amount>=c_est.min_car_amount and Car_Amount<=c_est.max_car_amount and Number_of_Accidents>=c_est.min_accidents 
            and Number_of_Accidents<=c_est.max_accidents'

        WHEN 'life' THEN 

        'Select policy_id,customer_id,policy_duration,requested_policy_amount,Age
          ,l.Illness
          ,l.Income
          ,premium_insurance_percentage,amount_insurance_percentage
           INTO
           #PendingRequest from [dbo].[Policy] p join [dbo].[life_Insurance] l on
          p.policy_type_id=l.policy_type_id and p.approved_policy_amount is Null 
          And employee_id=@employee_id
          join
          [dbo].[life_Insurance_Estimate] l_est on age >= l_est.min_age and age <= l_est.max_age
          and income>=l_est.min_income and income<=l_est.max_income and l.illness=l_est.illness'

        WHEN 'home' THEN 

        'Select policy_id,customer_id,policy_duration,requested_policy_amount,home_Age
          ,home_Amount
          ,h.Area,home_premium_percentage  INTO
           #PendingRequest 
          from [dbo].[Policy] p join [dbo].[home_Insurance] h on
          p.policy_type_id=h.policy_type_id and p.approved_policy_amount is Null 
          And employee_id=@employee_id
          join
          [dbo].[home_Insurance_Estimate] h_est on home_age >= h_est.min_home_age and home_age <= h_est.max_home_age
          and home_Amount>=h_est.min_home_amount and home_Amount<=h_est.max_home_amount and h.Area=h_est.area'

END

EXEC(@SQL); 
```

拉吉

# javascript - jquery connected-lists 防止删除指定列表

> ID：13373912
> 
> 赞同：0
> 
> 时间：2012-11-14T06:12:34.013
> 
> 标签：javascript, jquery, html, css

我已经从下面的 jquery 站点[http://jqueryui.com/sortable/#connect-lists](http://jqueryui.com/sortable/#connect-lists)修改了示例连接列表：

```
<!doctype html>

<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>jQuery UI Sortable - Connect lists</title>
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.1/themes/base/jquery-ui.css" />
    <script src="http://code.jquery.com/jquery-1.8.2.js"></script>
    <script src="http://code.jquery.com/ui/1.9.1/jquery-ui.js"></script>
    <link rel="stylesheet" href="/resources/demos/style.css" />
    <style>
    .connectedSortable { list-style-type: none; margin: 0; padding: 0 0 2.5em; float: left; margin-right: 10px; }
    .connectedSortable li { margin: 0 5px 5px 5px; padding: 5px; font-size: 1.2em; width: 120px; }
    </style>
    <script>
    $(function() {
        $( ".connectedSortable" ).sortable({
            connectWith: ".connectedSortable"
        }).disableSelection();
    });
    </script>
</head>
<body>

<ul class="connectedSortable">
    <li class="ui-state-default">Item 1</li>
    <li class="ui-state-default">Item 2</li>
    <li class="ui-state-default">Item 3</li>
    <li class="ui-state-default">Item 4</li>
    <li class="ui-state-default">Item 5</li>
</ul>

<ul class="connectedSortable">
    <li class="ui-state-highlight">Item 1</li>
    <li class="ui-state-highlight">Item 2</li>
    <li class="ui-state-highlight">Item 3</li>
    <li class="ui-state-highlight">Item 4</li>
    <li class="ui-state-highlight">Item 5</li>
</ul>

<ul class="connectedSortable last">
    <li class="ui-state-highlight">Item 1</li>
    <li class="ui-state-highlight">Item 2</li>
    <li class="ui-state-highlight">Item 3</li>
    <li class="ui-state-highlight">Item 4</li>
    <li class="ui-state-highlight">Item 5</li>
</ul>

</body>
</html> 
```

我需要防止**掉入 ul.last** 或者换句话说，如果存在特殊条件，我需要防止掉入列表到特定列表。（connectedSortable 样式应该保留）

[http://jsfiddle.net/Fdpyr/4/](http://jsfiddle.net/Fdpyr/4/)

有没有能力做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T06:29:23.817

试试这个：

```
// If you want a specific ul to get sortable you can use this

 $(function() {
    $( ".connectedSortable:eq(0)" ).sortable({
        connectWith: ".connectedSortable"
    }).disableSelection();
}); 
```

或者如果您希望 last ul 不可排序，请像这样使用它：

```
 $(function() {
    $( ".connectedSortable:not(:last)" ).sortable({
        connectWith: ".connectedSortable"
    }).disableSelection();
}); 
```

希望这对您有用...

# javascript - 如何在 jQuery getJSON 调用中捕获 400 响应

> ID：13373917
> 
> 赞同：8
> 
> 时间：2012-11-14T06:13:12.337
> 
> 标签：javascript, jquery, ajax, json, http-status-code-400

在 jQuery 中，我想使用该`$.getJSON()`方法从 facebook 获取一些数据，但如果令牌无效，则 Facebook 将返回 400 状态。我怎样才能捕捉到错误`$.getJSON()`而不是`$.ajax()`？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-14T06:26:03.403

我认为这对你有用

```
$.getJSON("example.json", function() {
  alert("success");
})
.success(function() { alert("success 2"); })
.error(function() { alert("error occurred "); })
.complete(function() { alert("Done"); }); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-14T06:26:27.500

jquery [Ajax 文档](http://api.jquery.com/jQuery.ajax/)提供了两种解决方案，第一种是错误函数：

```
 error(jqXHR, textStatus, errorThrown) 
```

它为您检测并报告错误消息的文本部分，另一个是状态代码功能（在同一页面上）。这是该页面的示例用法：

```
 $.ajax({
      statusCode: {
        404: function() {
          alert("page not found");
        }
      }
    }); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-14T06:21:05.183

使用`complete(jqXHR, textStatus)`函数回调并调查响应并向用户显示适当的消息。

# c# - Microsoft Dynamics C5 与外部系统的集成

> ID：13373918
> 
> 赞同：7
> 
> 时间：2012-11-14T06:13:24.763
> 
> 标签：c#, dynamics-crm, c5

我目前正在进行一个将[Microsoft Dynamics C5](http://en.wikipedia.org/wiki/Microsoft_Dynamics_C5)与外部系统集成的项目。即，当在 Dynamics C5 上创建项目时，我希望在外部系统（具有功能丰富的 API）中创建项目。有人可以告诉我们如何从 C5 部分管理它，我们可以使用 c# 直接从 C5 数据库访问它，还是在 C5 上有类似 web-hooks 的概念？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T07:59:49.717

可能有不同的解决方案，我可以给你一个想法，我之前已经实施过。您可以创建自定义实体，在哪里存储您想要在外部系统中创建或更新的联系人的实例 ID。注册插入/更新插件，这将在您每次更新联系人时创建您的自定义实体的新实例。接下来一些流程将采用更新的 ID，在外部系统中创建联系人并删除/标记为已处理您的自定义实体实例。

# c# - C# // vs /// 注释

> ID：13373923
> 
> 赞同：3
> 
> 时间：2012-11-14T06:14:40.203
> 
> 标签：c#

最近我开始使用`///`来注释我的 C# 代码，而不是`//`因为`/*`它更易于使用。今天我开始想知道为什么会有不同的类型，并遇到了[这个 SO question](https://stackoverflow.com/questions/181015/net-vs-comments-convention)，它指出`///`评论是用于生成 xml 文档。

我在 Google 上找不到关于评论类型与其他评论类型的任何建议，我认为这意味着这两种方式都无关紧要。到目前为止，我没有得到任何不良影响`///`，但我不想现在养成一个习惯，只是为了以后忘记它。据我所知，如果评论中没有元标记，它不会被识别为文档（或者我完全错了吗？）

在我用注释混淆我的代码之前`///`，这种类型的注释是一个很大的禁忌吗？以这种方式发表评论会不会有潜在的问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T06:18:29.450

> 以这种方式发表评论会不会有潜在的问题？

是的。当您决定生成项目文档时，它会将所有这些注释行作为 XML 文档的一部分。当您使用`/Doc`扩展编译代码时，它会使用您的 XML 注释 ( `///`) 生成一个文档。如果您使用它来注释掉您的代码，那么文档生成将考虑您的文档的注释掉的代码。

请参见：

[XML 文档注释（C# 编程指南](http://msdn.microsoft.com/en-us/library/vstudio/b2s063f7%28v=vs.100%29.aspx)）

[如何：为项目生成 XML 文档](http://msdn.microsoft.com/en-us/library/vstudio/x4sa0ak0%28v=vs.100%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T06:26:20.673

就代码编译而言，没有任何技术差异。他们都被忽略了。

我相信 /// 注释更像是一种约定，表示您正在使用[XML Documentation Comments](http://msdn.microsoft.com/en-us/library/b2s063f7.aspx)注释特定的代码块。像 Visual Studio 这样的 IDE 可以识别不同的注释类型，并会在视觉上做出相应的样式。

鉴于这是使用标准 // 或 /* */ 注释的一般惯例，也有可能使其他将阅读您的代码的开发人员感到困惑（或者，更有可能是惹恼）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T06:21:33.107

如果您使用诸如 resharper 之类的开发帮助工具，例如，它们主要为您提供使用`//`或 with注释代码块的功能`/* ... */`，这些注释代码块可以使用这些工具切换，一旦您有 3 个斜杠而不是 2 个，这对您不起作用.

文档符号的问题是另一个问题，您将在文档中生成注释，而无需控制代码中的注释以及进入文档的内容，因为您已经全部完成了`///`，但我想这是一个可以解决的问题在文档生成工具中配置。

# c# - 欧元符号的编码问题

> ID：13373925
> 
> 赞同：0
> 
> 时间：2012-11-14T06:14:54.060
> 
> 标签：c#, asp.net, vb.net, encoding, character-encoding

当我运行它时我有这个代码，它给了我“？” 而不是“€”（欧元符号）。谁能告诉我我能做些什么来解决它。

```
 string Message = "Hello $ € £";
    Encoding iso = Encoding.GetEncoding("ISO-8859-1");
    Encoding utf8 = Encoding.UTF8;

    byte[] utfBytes = utf8.GetBytes(Message);
    byte[] isoBytes = Encoding.Convert(utf8, iso, utfBytes);
    string msg = iso.GetString(isoBytes);
    Console.WriteLine(msg); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T06:22:50.997

请参考 URL [http://www.cs.tut.fi/~jkorpela/html/euro.html](http://www.cs.tut.fi/~jkorpela/html/euro.html)它显示了所有的编码方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T06:31:17.913

```
string Message = "Hello $ € £";
Console.OutputEncoding = Encoding.UTF8;
Console.WriteLine(Message); 
```

我刚刚确认这可行，但您还需要为您的控制台使用正确的字体（例如，我尝试了“Lucida Console”，这没问题。此外，您还需要确保您的源代码（.cs 文件或其他文件）是在 utf8 编码中。

![在此处输入图像描述](../Images/01ac1968b6dc8886931c557106cc8fcb.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T06:34:27.687

欧元符号不是 ISO-8859-1 字符集的一部分：[http](http://en.wikipedia.org/wiki/ISO/IEC_8859-1#Codepage_layout) ://en.wikipedia.org/wiki/ISO/IEC_8859-1#Codepage_layout （英镑符号确实出现在那里）

# symfony - 验证预填充的表单字段

> ID：13373926
> 
> 赞同：0
> 
> 时间：2012-11-14T06:15:18.500
> 
> 标签：symfony, symfony-forms, symfony-2.1

为了在表单字段中设置默认值`symfony2`，我使用了`rel`结合 jQuery 的属性，如下[所示](http://grasmash.com/article/using-jquery-prepopulate-inputs-default-values-clear-defaults-onclick-focus)：

```
 $builder->add('title', 'text', array(
        'attr'=> array(
            'class'=>'prepopulate',
            'rel'=>'Enter a title here...',
        )
    )); 
```

这完美地工作并提供以下内容：

* * *

![在此处输入图像描述](../Images/f8861a07316c65e2f4bdd208f484a287.png)

* * *

如您所见，该字段预先填充了“在此处输入标题...”。如果我按原样验证表单，则不会在插入默认值时进行验证（这是有道理的）。

我想确保用户自定义此字段并且不只是提交具有默认值的表单...

## **有没有办法检查该字段是否与 rel 属性的值相同？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T06:37:24.057

嗯……

您可以在实体的注释中尝试此操作：

```
@Assert\Regex("/^(?!Enter a title here\.\.\.)/") 
```

甚至更好：

```
/**
 * @Assert\Regex(
 *     pattern="/^Enter a title here\.\.\.$/",
 *     match=false,
 *     message="Please enter a title."
 * )
 */ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T08:36:32.030

我们可以在客户端执行此操作，并将 rel 属性与提交的数据进行比较。如果值相同，我们清除对象：

```
$(function() {
    // When we submit the form
    $('form').submit(function() {

        //iterate over all the elements of the class "prepopulate"
        jQuery('.prepopulate').each(function(){

            //compare the values submitted vs rel attribute
            if( jQuery(this).val() == jQuery(this).attr('rel'))
                jQuery(this).val('');
        });
        return true; 
    });
}); 
```

# python - 使用 imaplib 检索电子邮件正文文本

> ID：13373928
> 
> 赞同：2
> 
> 时间：2012-11-14T06:15:35.587
> 
> 标签：python, imaplib

我试图确保从某个电子邮件地址检索所有正文（无论电子邮件采用何种格式）。本示例中省略了连接详细信息（imaplib_connect），因为一切似乎都可以正常工作，但我认为以下内容不足以满足所有电子邮件正文。有什么改进建议吗？我正在将每封电子邮件的正文写入文件。

```
import imaplib
import imaplib_connect
import uuid
import ConfigParser
import os
import email

c = imaplib_connect.open_connection()
try:
    config = ConfigParser.ConfigParser()
    config.read([os.path.expanduser('~/reader.config')])
    fromAddress = config.get('account', 'fromAddress')
    typ, data = c.select('INBOX')
    typ, data = c.search(None, '(FROM "' + fromAddress + '")')
    print "Processing..."
    for num in data[0].split():
        typ, data = c.fetch(num, '(RFC822)')
        rawMessage = data[0][1]
        emailMessage = email.message_from_string(rawMessage)
        maintype = emailMessage.get_content_maintype()
        fileName = uuid.uuid4().hex
        if maintype == 'multipart':
             for part in emailMessage.get_payload():
                 if part.get_content_maintype() == 'text':
                    with open(fileName + ".txt", "wb") as fo:
                         fo.write(part.get_payload())
                 elif maintype == 'text':
                    with open(fileName + ".txt", "wb") as fo:
                         fo.write(part.get_payload())
finally:
    try:
        c.close()
    except:
        pass
    c.logout() 
```

# asp.net - 在asp中本地化字符串

> ID：13373929
> 
> 赞同：1
> 
> 时间：2012-11-14T06:15:48.820
> 
> 标签：asp.net, asp.net-mvc, localization, webformsmvp

这是否可以将一些字符串存储在本地资源文件中并使用开关盒将它们设置为标签？？？

现在我正在使用这段代码......

```
 switch (messgseCode)
                {
                    case 1:
                        currentview.ResultMessage = "Sorry..! <br> Please Contact in this Address";
                        break;
                    case 2:
                        currentview.ResultMessage = "Sorry..!<br> Entered Student Id is Incorrect";
                        break;
                    case 3:
                        currentview.ResultMessage = "Sorry..!<br> Entered Mobile Number is Incorrect";
                        break;
                    case 4:
                        currentview.ResultMessage = "Sorry..!<br> Entered Username is Incorrect";
                        break;
                    default:
                        currentview.ResultMessage = "Sorry..! <br> An error Occured";
                        break;

                } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T06:25:07.150

您可以使用这样的方式创建本地化资源文件

```
ResourceManager resourceMgr=ResourceManager.CreateFileBasedResourceManager(NameOfYourfile, pathTothefile,null);

CultureInfo ci = new CultureInfo("en-GB");
string messag = resourceMgr.GetString(messageId,ci); 
```

[http://www.codeproject.com/Articles/5447/NET-Localization-using-Resource-file](http://www.codeproject.com/Articles/5447/NET-Localization-using-Resource-file)

# android - 在 Android 中的 Fragment 中调用函数

> ID：13373930
> 
> 赞同：4
> 
> 时间：2012-11-14T06:15:58.843
> 
> 标签：android, android-fragments, version-control, android-viewpager

在我的android应用程序中，我使用viewpager。我有两个fragment.Fragment1和Fragment2。我在两个fragment上调用了两个不同的函数。即，Fragment1上的'function1'和fragment2上的'function2'。当我启动应用程序时，这两个函数一起调用。我想在启动时调用“function1”，只有当我滑动到 Fragment2 时才调用“function2”。我该怎么做？提前致谢.....

这是我的代码，

片段1=>

```
public class Fragment1 extends Fragment{

    public static String feedurl="http://www.abcd.com/en/rssfeeds/1_2_3_5/latest/rss.xml";
    static String URL = "";
    static final String KEY_HEAD = "item"; // parent node
    static final String KEY_DATE = "pubDate";
    public static String headflag="";
    int f=0;
    GridView list;
        HeadlinesAdapter adapter;
        private TextView mMessageView;
    private Button mClearButton;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {

        View v = inflater.inflate(R.layout.first_fragment, container, false);

        return v;
    }

    @Override
    public void onViewCreated(View view, Bundle savedInstanceState) {
        super.onViewCreated(view, savedInstanceState);

        function1();//here I am calling function1
        populate_listview();

        }

     public void populate_listview()
     {

         URL="http://www.abcd.com/en/rssfeeds/1_2_3_5/latest/rss.xml";
         ArrayList<HashMap<String, String>> newsList = new ArrayList<HashMap<String, String>>();

        XMLParser parser = new XMLParser();
        String xml = parser.getXmlFromUrl(URL);
        Document doc = parser.getDomElement(xml);
        NodeList nl = doc.getElementsByTagName(KEY_HEAD);
        NodeList itemLst = doc.getElementsByTagName("item");
        String MarqueeStr="";

        for (int i = 0; i < nl.getLength(); i++) {
            HashMap<String, String> map = new HashMap<String, String>();
            Element e = (Element) nl.item(i);
                        newsList.add(map);

     }
        list=(GridView)getActivity().findViewById(R.id.grid);
        adapter=new Adapter1(getActivity(), newsList);        
                list.setAdapter(adapter);

      }

} 
```

片段2=>

```
 public class Fragment2 extends Fragment{

    public static String feedurl="http://www.abcd.com/en/rssfeeds/1_2_3_5/latest/rss.xml";
    static String URL = "";
    static final String KEY_HEAD = "item"; // parent node
    static final String KEY_DATE = "pubDate";
    public static String headflag="";
    int f=0;
    GridView list;
    HeadlinesAdapter adapter;
    private TextView mMessageView;
    private Button mClearButton;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {

        View v = inflater.inflate(R.layout.second_fragment, container, false);

        return v;
    }

    @Override
    public void onViewCreated(View view, Bundle savedInstanceState) {
        super.onViewCreated(view, savedInstanceState);

        function2();//here I am calling function2
        populate_listview();

        }

     public void populate_listview()
     {

         URL="http://www.abcd.com/en/rssfeeds/1_2_3_5/latest/rss.xml";
         ArrayList<HashMap<String, String>> newsList = new ArrayList<HashMap<String, String>>();

        XMLParser parser = new XMLParser();
        String xml = parser.getXmlFromUrl(URL);
        Document doc = parser.getDomElement(xml);
        NodeList nl = doc.getElementsByTagName(KEY_HEAD);
        NodeList itemLst = doc.getElementsByTagName("item");
        String MarqueeStr="";

        for (int i = 0; i < nl.getLength(); i++) {
            HashMap<String, String> map = new HashMap<String, String>();
            Element e = (Element) nl.item(i);
                    newsList.add(map);

     }
        list=(GridView)getActivity().findViewById(R.id.grid2);
        adapter=new HeadlinesAdapter(getActivity(), newsList);        
                list.setAdapter(adapter);

      }

} 
```

主要活动=>

```
public class MainActivity extends FragmentActivity {

    private ViewPager mViewPager;
    private MessageLoader mLoader;
    private Button mSenderButton, mReceiverButton;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        // We get UI references
        mViewPager = (ViewPager) findViewById(R.id.viewPager);
        mSenderButton = (Button) findViewById(R.id.sender_button);
        mReceiverButton = (Button) findViewById(R.id.receiver_button);
        // set pager adapter
        mViewPager.setAdapter(new MyAdapter(this));
        // set receiver button listener
        mReceiverButton.setOnClickListener(new OnClickListener() {          

            public void onClick(View v) {
                mViewPager.setCurrentItem(1);
            }
        });

        mSenderButton.setOnClickListener(new OnClickListener() {            

            public void onClick(View v) {
                mViewPager.setCurrentItem(0);
            }
        });
    }

    private class MyAdapter extends FragmentPagerAdapter{

        private Context mContext;
        private String[] frags = {Fragment1.class.getName(), Fragment2.class.getName()};

        public MyAdapter(FragmentActivity activity) {
            super(activity.getSupportFragmentManager());
            mContext = activity;
        }

        @Override
        public Object instantiateItem(ViewGroup container, int position) {
            Fragment frag = (Fragment) super.instantiateItem(container, position);
            if(frag instanceof MessageLoader){
                mLoader = (MessageLoader) frag;
            }
            return frag;
        }

        @Override
        public Fragment getItem(int pos) {
            return Fragment.instantiate(mContext, frags[pos]);
        }

        @Override
        public int getCount() {
            return frags.length;
        }

    }

} 
```

这是布局，

first_fragment.xml =>

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#ffff"
    android:orientation="vertical" >

    <RelativeLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

    </RelativeLayout>

    <GridView
        android:id="@+id/grid"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:numColumns="2" >
    </GridView>

</LinearLayout> 
```

second_fragment.xml =>

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#ffff"
    android:orientation="vertical" >

    <RelativeLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

    </RelativeLayout>

    <GridView
        android:id="@+id/grid2"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:numColumns="2" >
    </GridView>

</LinearLayout> 
```

main.xml=>

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TableRow
        android:layout_width="match_parent"
        android:layout_height="50dp"
        android:background="#CCCCCC"
        android:gravity="center_vertical"
        android:paddingTop="3dp" >

        <Button
            android:id="@+id/receiver_button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Headlines" />

        <Button
            android:id="@+id/sender_button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Kerala" />
    </TableRow>

    <android.support.v4.view.ViewPager
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/viewPager"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T06:47:49.110

您可以使用以下代码捕获滑动事件：

```
mViewPager.setOnPageChangeListener(new OnPageChangeListener() {

@Override
public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) 
{

}

@Override
public void onPageSelected(int position) {
       if(position==0){
        function1();
       }else if(position==1){
        function2();
       }

}

@Override
public void onPageScrollStateChanged(int state) {

}
}); 
```

以任何最适合的覆盖方法调用您的函数

# asp.net-mvc - ModelState.IsValid 总是返回 false

> ID：13373935
> 
> 赞同：30
> 
> 时间：2012-11-14T06:16:27.943
> 
> 标签：asp.net-mvc, asp.net-mvc-3, modelstate

```
[HttpPost]
public ActionResult Create(Users user)
{
    if (ModelState.IsValid)
    {
        db.Users.Add(user);
        db.SaveChanges();
        return RedirectToAction("Index");  
    }

    return View(user);
} 
```

`ModelState.IsValid`总是假的。
所以它只是返回视图并且没有添加新记录..

**编辑**

用户：

```
public class User
{
    public int UserID { get; set; } 
    public string Name { get; set; } 
    [Display(Name = "Confirm Password")] [DataType(DataType.Password)] 
    public string ConfirmPassword { get; set; } 
    public string Designation { get; set; } 
    [Display(Name = "Date of Join")] [DataType(DataType.Date)] public DateTime DOJ { get; set; } 
    public string Email { get; set; } 
    [Display(Name = "Phone Number")] public System.Int64 PhoneNo { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2012-11-14T06:21:28.243

`ModelState.IsValid`如果模型的验证失败，则为 false。

1.  您有[DataAnnotation](http://msdn.microsoft.com/en-us/library/dd901590%28v=vs.95%29.aspx)使传入模型失败。
2.  您添加了自定义验证。
3.  确保模型中没有非空属性的空条目

检查`ModelState.Errors`造成这种情况的原因是什么。你可以使用这个：

```
var errors = ModelState.Values.SelectMany(v => v.Errors); 
```

# c - c strtok从递归返回后返回NULL

> ID：13373936
> 
> 赞同：6
> 
> 时间：2012-11-14T06:16:31.273
> 
> 标签：c, recursion, strtok

当我不在我的代码中调用相同的函数时，一切正常，但是当函数从递归突然返回时，变量`pch`为 NULL：

```
 void someFunction()
     {
        char * pch;
        char tempDependencies[100*64+100];
        strcpy(tempDependencies,map[j].filesNeeded);
        pch = strtok(tempDependencies,",");
        while (pch != NULL)
        {
            someFunction(); <- if i comment this out it works fine
            pch = strtok (NULL, ",");
        }
      } 
```

因此，例如，当循环作用于字符串`file2,file3,file4`时，它会正确拆分`file2`并将字符串修改为，`file2\\000file3,file4`但下一次调用`pch = strtok (NULL, ",");`呈现`pch`为`0x0`。调用递归时有什么我不知道的吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-14T06:18:37.073

`strtok()`不是可重入的。如果你想在递归函数中使用它，你必须使用`strtok_r()`.

参见：[strtok、strtok_r](http://linux.die.net/man/3/strtok_r)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-14T06:20:51.673

在上一次执行完成之前，您不能`strtok`再次调用该函数 - 它不是[可重入](http://en.wikipedia.org/wiki/Reentrancy_%28computing%29)的。

改用它的可重入版本`strtok_r`。

# ant - 如何通过ant命令提示符按照testng.xml中的顺序运行测试用例/类？

> ID：13373939
> 
> 赞同：0
> 
> 时间：2012-11-14T06:16:40.753
> 
> 标签：ant

我在 testng.xml 文件中有 20 个测试用例。这些名称不是按字母顺序排列的，而是按逻辑方式排列的。当我通过 Ant 从命令提示符执行时，测试用例按字母顺序执行。

我如何在 testng 中执行测试用例或类，就像从 ant 的命令提示符一样按相同的顺序执行。

请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T23:29:46.883

您可以使用该`preserve-order`属性。这是一个例子：

```
<test name="MyTest" preserve-order="true">
  <classes>
    <class name="com.simple.test.Test1" />
    <class name="com.simple.test.Test2" />
    <class name="com.simple.test.Test3" />
  </classes>
</test> 
```

# javascript - 用于发布/获取结果的 Ajax、Javascript 或数据库

> ID：13373941
> 
> 赞同：0
> 
> 时间：2012-11-14T06:17:05.190
> 
> 标签：javascript, html, ajax, database

我有一个关于使用什么后端的问题。我有一个包含各种下拉列表的 html 页面。在提交时，我想将该页面的结果发送到另一个页面以编译（平均）结果。有没有办法在不建立数据库的情况下做到这一点？我正在考虑使用 Ajax 发送数据，然后在接收页面上使用 Javascript 编译数据。

我以前做过类似的事情，所以任何建议都将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T06:19:47.073

您可以使用 jquery 检查下拉列表中的更改。将结果发送到 jquery ajax 页面并以 json 形式获取返回值。结果 json 可以显示在与 jquery 相同的页面上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T06:22:11.543

我假设您正在谈论的页面是 html 或 jsp 页面。是的，您可以使用 javascript 处理数据，然后将其发送到 servlet 并将其返回到另一个 jsp。

# c# - 在 C# 中显示 Excel 工作簿而不保存

> ID：13373946
> 
> 赞同：0
> 
> 时间：2012-11-14T06:18:21.557
> 
> 标签：c#, excel

我正在运行时在 WinForm 应用程序（VS2008）中创建 Excel 文件。我正在从 datagridview 将一些数据导出到其中。导出后，我想在 excel 中显示这个文件，但不想保存在任何地方。我的目标是用它来代替在水晶中创建许多报告。可能吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T22:23:19.877

如果您使用的是互操作服务，则只能使工作簿应用程序可见等于 true。

```
[workbookobject].Application.Visible = true; 
```

# c# - Chip8 仿真器 - 用户输入

> ID：13373949
> 
> 赞同：2
> 
> 时间：2012-11-14T06:18:52.193
> 
> 标签：c#, visual-studio-2010, input, emulation, game-engine

我一直在写一个chip8模拟器——http: [//en.wikipedia.org/wiki/CHIP-8](http://en.wikipedia.org/wiki/CHIP-8)

我已经测试了所有的操作码以及图形计算，现在我正在为用户输入而苦苦挣扎。我有以下方法监控用户输入并根据需要更改寄存器（使用chip8时，用户输入会更改相应的内存寄存器 - EG点击“0”将V0寄存器设置为0。

我的问题是我有以下代码获取和计算每个操作码及其包含在 while 循环中的操作。当它正在运行时，我的应用程序无法检测到用户输入。因此 ROMS 启动并保持锁定在原地等待寄存器更改或用户输入。它一直卡在无限循环中，我尝试实现全局布尔运行，并且在启动while循环后未检测到它。我假设它超出了循环的范围，但从我读到的内容来看，键盘事件触发了一个几乎在任何地方都应该可见的中断，有什么想法吗？

这是计算和解析操作码的内容

```
 private void button1_Click(object sender, EventArgs e)
    {
        // This will become the run function 
         do{
        for (int i = 0; i < 2; i++)
        {
            opc[i] = mem[mc]; // fetching the instruction from the memory array
            mc++;
        }
        cibox.Clear(); // Just clearing Debugging text boxes in the UI
        pcbox.Clear();
        pc++;
        pcbox.Text += pc;
        cibox.Text += opc[0].ToString("X2") + "-" + opc[1].ToString("X2");
        calculations(opc); // Parses the Opcode and does the corresponding operation
         }while(run);
    } 
```

而这种方法是控制用户输入......

```
 protected override void OnKeyDown(KeyEventArgs keyEvent) // Listens for Keyboard events! Read More: http://www.geekpedia.com/tutorial53_Getting-input-from-keyboard.html
    {
        keyPress = true;
        //Gets the key code found at keyEvent...
        MessageBox.Show("KeyCode: " + keyEvent.KeyCode.ToString());
        String register = keyEvent.KeyCode.ToString();
        if (register == "Escape")
        {

            Application.Exit();
            run = false;
        }
        try
        {
            registerVal = int.Parse(register, System.Globalization.NumberStyles.HexNumber); //  Second Nibble! --> Int Format 
        }
        catch (System.ArgumentNullException e)
        {
            return;
        }
        catch (System.ArgumentException)
        {
            return;
        }
        catch (System.FormatException)
        {
            return;
        }
        catch (System.OverflowException)
        {
            return;
        }
        if (registerVal >= 208)
        {
            registerVal = registerVal - 208;
        }
        if (registerVal <= 15)
        {
            mem[registerVal] = (byte)registerVal;
        }
        display(); // Alters UI to display state of registers, etc
    } 
```

所以我现在尝试了 Game Loop Idea，但我找不到在 C# 中创建一个返回按键的方法的方法。也许我在这里遗漏了一些东西，但我似乎无法弄清楚！

我还尝试了另一种方法，涉及在单独的线程中运行 CPU 计算，这会导致轻微的延迟问题。

我真的很想看看 C# 中的一个方法示例，它返回一个被按下的键的值，我可以在 While 循环中调用它！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T06:35:01.660

我建议您将模拟器的循环设置为游戏循环。您有一个全局循环，它会触发对模拟器中每个模块的更新。在循环中，您调用输入（或通用“事件”）处理器，然后调用操作码/硬件仿真，然后调用屏幕更新。

这是一些伪代码。

```
while (True):
    processInput()
    updateCPU()
    outputGraphics() 
```

我不知道 C# 中的键输入是如何工作的，如果它是一个异步事件触发器（即在循环之外调用“OnKeyDown”方法），您可以设置“OnKeyDown”以仅将键事件发送到中间事件管理器，然后在“processInput()”中实际解析事件并使用它们来更新模拟 CPU 上的寄存器等。

# android - 为什么触摸图像缩放不起作用

> ID：13373950
> 
> 赞同：3
> 
> 时间：2012-11-14T06:19:09.130
> 
> 标签：android

在我的项目中，我在活动中显示图像。当我用两根手指触摸图像时，我将隐藏包含该图像视图的视图。然后在框架布局中，我将添加一个自定义 touchmimage 视图，以便我可以缩放该图像。但是某处出了点问题。我在这里分享我的代码

```
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
        package="com.example.touchfinger"
        android:versionCode="1"
        android:versionName="1.0" >

        <uses-sdk
            android:minSdkVersion="8"
            android:targetSdkVersion="15" />

        <application
            android:icon="@drawable/ic_launcher"
            android:label="@string/app_name"
            android:theme="@style/AppTheme" >
            <activity
                android:name=".MainActivity"
                android:screenOrientation="portrait"
                android:label="@string/title_activity_main" >
                <intent-filter>
                    <action android:name="android.intent.action.MAIN" />

                    <category android:name="android.intent.category.LAUNCHER" />
                </intent-filter>
            </activity>
        </application>

    </manifest> 
```

布局

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <ImageView
        android:id="@+id/close"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="right"
        android:src="@drawable/closeicon"
        android:visibility="invisible" />

    <FrameLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

        <FrameLayout
            android:id="@+id/frame"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:background="@android:color/white" >
        </FrameLayout>

        <LinearLayout
            android:id="@+id/linearlayout"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:background="@android:color/white"
            android:gravity="center" >

            <ImageView
                android:id="@+id/imageView1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center"
                android:longClickable="true"
                android:src="@drawable/logo" />
        </LinearLayout>
    </FrameLayout>

</LinearLayout> 
```

活动

```
public class MainActivity extends Activity {
    String TAG = "Multitouch";
    int modeW;
    ImageView im, close;

    TouchImageView zImg;
    LinearLayout linearlayout;
    FrameLayout frame;
    Bitmap bmp;

    static final int NONE = 0;
    static final int DRAG = 1;
    static final int ZOOM = 2;
    int mode = NONE;
    float currentX;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        im = (ImageView) findViewById(R.id.imageView1);
        close = (ImageView) findViewById(R.id.close);
        linearlayout = (LinearLayout) findViewById(R.id.linearlayout);
        frame = (FrameLayout) findViewById(R.id.frame);
        zImg = new TouchImageView(this);

        bmp = BitmapFactory.decodeResource(getApplicationContext()
                .getResources(), R.drawable.logo);
        if (bmp == null) {
            Log.e("Bitmap is null", "Bitmap is null");
        } else {

            Log.e("Bitmap is not null", "Bitmap is not null");
        }

        im.setOnTouchListener(new OnTouchListener() {

            @Override
            public boolean onTouch(View v, MotionEvent event) {
                 final float X = event.getX();

                switch (event.getAction() & MotionEvent.ACTION_MASK) {

                case MotionEvent.ACTION_POINTER_DOWN:
                    modeW = 1;

                    try {
                        close.setVisibility(View.VISIBLE);
                        linearlayout.setVisibility(View.INVISIBLE);
                        frame.addView(zImg);
                        zImg.setImageBitmap(bmp);
                        zImg.setMaxZoom(3f);

                    } catch (Exception e) {
                        e.printStackTrace();
                    }

                    break;
                case MotionEvent.ACTION_DOWN:
                    modeW = 0;
                    currentX = X;

                    zImg.setScaleType(ScaleType.CENTER_INSIDE);
                    break;
                case MotionEvent.ACTION_UP:
                    if (modeW == 0)

                        break;
                case MotionEvent.ACTION_MOVE:
                    float currentx = event.getX();
                    float diff = currentX - currentx;
                    if (diff > 9.0 || diff < -9.0)
                        modeW = 2;
                    break;
                }

                return true;
            }

        });
        close.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                close.setVisibility(View.GONE);
                frame.removeAllViews();

                linearlayout.setVisibility(View.VISIBLE);

            }
        });
    }

} 
```

触摸图像视图

```
public class TouchImageView extends ImageView {

    Matrix matrix = new Matrix();

    // We can be in one of these 3 states
    static final int NONE = 0;
    static final int DRAG = 1;
    static final int ZOOM = 2;
    int mode = NONE;

    // Remember some things for zooming
    PointF last = new PointF();
    PointF start = new PointF();
    float minScale = 1f;
    float maxScale = 3f;
    float[] m;

    float redundantXSpace, redundantYSpace;

    float width, height;
    static final int CLICK = 3;
    float saveScale = 1f;
    float right, bottom, origWidth, origHeight, bmWidth, bmHeight;

    ScaleGestureDetector mScaleDetector;

    Context context;

    public TouchImageView(Context context) {
        super(context);
        super.setClickable(true);
        this.context = context;
        mScaleDetector = new ScaleGestureDetector(context, new ScaleListener());
        matrix.setTranslate(1f, 1f);
        m = new float[9];
        setImageMatrix(matrix);
        setScaleType(ScaleType.MATRIX);

        setOnTouchListener(new OnTouchListener() {

            @Override
            public boolean onTouch(View v, MotionEvent event) {
                mScaleDetector.onTouchEvent(event);

                matrix.getValues(m);
                float x = m[Matrix.MTRANS_X];
                float y = m[Matrix.MTRANS_Y];
                PointF curr = new PointF(event.getX(), event.getY());

                switch (event.getAction()) {
                    case MotionEvent.ACTION_DOWN:
                        last.set(event.getX(), event.getY());
                        start.set(last);
                        mode = DRAG;
                        break;
                    case MotionEvent.ACTION_MOVE:
                        if (mode == DRAG) {
                            float deltaX = curr.x - last.x;
                            float deltaY = curr.y - last.y;
                            float scaleWidth = Math.round(origWidth * saveScale);
                            float scaleHeight = Math.round(origHeight * saveScale);
                            if (scaleWidth < width) {
                                deltaX = 0;
                                if (y + deltaY > 0)
                                    deltaY = -y;
                                else if (y + deltaY < -bottom)
                                    deltaY = -(y + bottom); 
                            } else if (scaleHeight < height) {
                                deltaY = 0;
                                if (x + deltaX > 0)
                                    deltaX = -x;
                                else if (x + deltaX < -right)
                                    deltaX = -(x + right);
                            } else {
                                if (x + deltaX > 0)
                                    deltaX = -x;
                                else if (x + deltaX < -right)
                                    deltaX = -(x + right);

                                if (y + deltaY > 0)
                                    deltaY = -y;
                                else if (y + deltaY < -bottom)
                                    deltaY = -(y + bottom);
                            }
                            matrix.postTranslate(deltaX, deltaY);

                            last.set(curr.x, curr.y);
                        }
                        break;

                    case MotionEvent.ACTION_UP:
                        mode = NONE;
                        int xDiff = (int) Math.abs(curr.x - start.x);
                        int yDiff = (int) Math.abs(curr.y - start.y);
                        if (xDiff < CLICK && yDiff < CLICK)
                            performClick();
                        break;

                    case MotionEvent.ACTION_POINTER_UP:
                        mode = NONE;
                        break;
                }
                setImageMatrix(matrix);
                invalidate();
                return true; // indicate event was handled
            }

        });
    }

    @Override
    public void setImageBitmap(Bitmap bm) { 
        super.setImageBitmap(bm);
        if(bm!=null)
        {
            bmWidth = bm.getWidth();
            bmHeight = bm.getHeight();
        }
    }

    public void setMaxZoom(float x)
    {
        maxScale = x;
    }

    private class ScaleListener extends ScaleGestureDetector.SimpleOnScaleGestureListener {
        @Override
        public boolean onScaleBegin(ScaleGestureDetector detector) {
            mode = ZOOM;
            return true;
        }

        @Override
        public boolean onScale(ScaleGestureDetector detector) {
            float mScaleFactor = (float)Math.min(Math.max(.95f, detector.getScaleFactor()), 1.05);
            float origScale = saveScale;
            saveScale *= mScaleFactor;
            if (saveScale > maxScale) {
                saveScale = maxScale;
                mScaleFactor = maxScale / origScale;
            } else if (saveScale < minScale) {
                saveScale = minScale;
                mScaleFactor = minScale / origScale;
            }
            right = width * saveScale - width - (2 * redundantXSpace * saveScale);
            bottom = height * saveScale - height - (2 * redundantYSpace * saveScale);

            if (origWidth * saveScale <= width || origHeight * saveScale <= height) {
                 matrix.postScale(mScaleFactor, mScaleFactor, detector.getFocusX(), detector.getFocusY());
                if (mScaleFactor < 1) {
                    matrix.getValues(m);
                    float x = m[Matrix.MTRANS_X];
                    float y = m[Matrix.MTRANS_Y];
                    if (mScaleFactor < 1) {
                        if (Math.round(origWidth * saveScale) < width) {
                            if (y < -bottom)
                                matrix.postTranslate(0, -(y + bottom));
                            else if (y > 0)
                                matrix.postTranslate(0, -y);
                        } else {
                            if (x < -right) 
                                matrix.postTranslate(-(x + right), 0);
                            else if (x > 0) 
                                matrix.postTranslate(-x, 0);
                        }
                    }
                }
            } else {
                matrix.postScale(mScaleFactor, mScaleFactor, detector.getFocusX(), detector.getFocusY());
                matrix.getValues(m);
                float x = m[Matrix.MTRANS_X];
                float y = m[Matrix.MTRANS_Y];
                if (mScaleFactor < 1) {
                    if (x < -right) 
                        matrix.postTranslate(-(x + right), 0);
                    else if (x > 0) 
                        matrix.postTranslate(-x, 0);
                    if (y < -bottom)
                        matrix.postTranslate(0, -(y + bottom));
                    else if (y > 0)
                        matrix.postTranslate(0, -y);
                }
            }
           return true;

        }
    }

    @Override
    protected void onMeasure (int widthMeasureSpec, int heightMeasureSpec)
    {
        super.onMeasure(widthMeasureSpec, heightMeasureSpec);
        width = MeasureSpec.getSize(widthMeasureSpec);
        height = MeasureSpec.getSize(heightMeasureSpec);
        //Fit to screen.
        float scale;
        float scaleX =  (float)width / (float)bmWidth;
        float scaleY = (float)height / (float)bmHeight;
        scale = Math.min(scaleX, scaleY);
        matrix.setScale(scale, scale);
        setImageMatrix(matrix);
        saveScale = 1f;

        // Center the image
        redundantYSpace = (float)height - (scale * (float)bmHeight) ;
        redundantXSpace = (float)width - (scale * (float)bmWidth);
        redundantYSpace /= (float)2;
        redundantXSpace /= (float)2;

        matrix.postTranslate(redundantXSpace, redundantYSpace);

        origWidth = width - 2 * redundantXSpace;
        origHeight = height - 2 * redundantYSpace;
        right = width * saveScale - width - (2 * redundantXSpace * saveScale);
        bottom = height * saveScale - height - (2 * redundantYSpace * saveScale);
        setImageMatrix(matrix);
    }
} 
```

并按下关闭按钮，我将返回上一阶段。但缩放在这里不起作用。有人能说我在这里缺少什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T06:24:45.420

试试这个代码：

```
TouchImageView.java

package com.your.package;

import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.Matrix;
import android.graphics.PointF;
import android.util.AttributeSet;
import android.view.MotionEvent;
import android.view.ScaleGestureDetector;
import android.view.View;
import android.widget.ImageView;

/**
 * Extends Android ImageView to include pinch zooming and panning.
 */
public class TouchImageView extends ImageView
{
    Matrix matrix = new Matrix();

    // We can be in one of these 3 states
    static final int NONE = 0;
    static final int DRAG = 1;
    static final int ZOOM = 2;
    int mode = NONE;

    // Remember some things for zooming
    PointF last = new PointF();
    PointF start = new PointF();
    float minScale = 1f;
    float maxScale = 3f;
    float[] m;

    float redundantXSpace, redundantYSpace;

    float width, height;
    static final int CLICK = 3;
    float saveScale = 1f;
    float right, bottom, origWidth, origHeight, bmWidth, bmHeight;

    ScaleGestureDetector mScaleDetector;

    Context context;

    public TouchImageView(Context context)
    {
        super(context);
        sharedConstructing(context);
    }

    public TouchImageView(Context context, AttributeSet attrs)
    {
        super(context, attrs);
        sharedConstructing(context);
    }

    private void sharedConstructing(Context context)
    {
        super.setClickable(true);
        this.context = context;
        mScaleDetector = new ScaleGestureDetector(context, new ScaleListener());
        matrix.setTranslate(1f, 1f);
        m = new float[9];
        setImageMatrix(matrix);
        setScaleType(ScaleType.MATRIX);

        setOnTouchListener(new OnTouchListener()
        {
            @Override
            public boolean onTouch(View v, MotionEvent event)
            {
                mScaleDetector.onTouchEvent(event);

                matrix.getValues(m);
                float x = m[Matrix.MTRANS_X];
                float y = m[Matrix.MTRANS_Y];
                PointF curr = new PointF(event.getX(), event.getY());

                switch (event.getAction())
                {
                    case MotionEvent.ACTION_DOWN:
                        last.set(event.getX(), event.getY());
                        start.set(last);
                        mode = DRAG;
                        break;
                    case MotionEvent.ACTION_MOVE:
                        if (mode == DRAG)
                        {
                            float deltaX = curr.x - last.x;
                            float deltaY = curr.y - last.y;
                            float scaleWidth = Math.round(origWidth * saveScale);
                            float scaleHeight = Math.round(origHeight * saveScale);
                            if (scaleWidth < width)
                            {
                                deltaX = 0;
                                if (y + deltaY > 0)
                                    deltaY = -y;
                                else if (y + deltaY < -bottom)
                                    deltaY = -(y + bottom);
                            }
                            else if (scaleHeight < height)
                            {
                                deltaY = 0;
                                if (x + deltaX > 0)
                                    deltaX = -x;
                                else if (x + deltaX < -right)
                                    deltaX = -(x + right);
                            }
                            else
                            {
                                if (x + deltaX > 0)
                                    deltaX = -x;
                                else if (x + deltaX < -right)
                                    deltaX = -(x + right);

                                if (y + deltaY > 0)
                                    deltaY = -y;
                                else if (y + deltaY < -bottom)
                                    deltaY = -(y + bottom);
                            }
                            matrix.postTranslate(deltaX, deltaY);
                            last.set(curr.x, curr.y);
                        }
                        break;

                    case MotionEvent.ACTION_UP:
                        mode = NONE;
                        int xDiff = (int) Math.abs(curr.x - start.x);
                        int yDiff = (int) Math.abs(curr.y - start.y);
                        if (xDiff < CLICK && yDiff < CLICK)
                            performClick();
                        break;

                    case MotionEvent.ACTION_POINTER_UP:
                        mode = NONE;
                        break;
                }
                setImageMatrix(matrix);
                invalidate();
                return true; // indicate event was handled
            }
        });
    }

    @Override
    public void setImageBitmap(Bitmap bm)
    {
        super.setImageBitmap(bm);
        if (bm != null)
        {
            bmWidth = bm.getWidth();
            bmHeight = bm.getHeight();
        }
    }

    public void setMaxZoom(float x)
    {
        maxScale = x;
    }

    private class ScaleListener extends
            ScaleGestureDetector.SimpleOnScaleGestureListener
    {
        @Override
        public boolean onScaleBegin(ScaleGestureDetector detector)
        {
            mode = ZOOM;
            return true;
        }

        @Override
        public boolean onScale(ScaleGestureDetector detector)
        {
            float mScaleFactor = (float) Math.min(
                    Math.max(.95f, detector.getScaleFactor()), 1.05);
            float origScale = saveScale;
            saveScale *= mScaleFactor;
            if (saveScale > maxScale)
            {
                saveScale = maxScale;
                mScaleFactor = maxScale / origScale;
            }
            else if (saveScale < minScale)
            {
                saveScale = minScale;
                mScaleFactor = minScale / origScale;
            }
            right = width * saveScale - width - (2 * redundantXSpace * saveScale);
            bottom = height * saveScale - height
                    - (2 * redundantYSpace * saveScale);
            if (origWidth * saveScale <= width || origHeight * saveScale <= height)
            {
                matrix.postScale(mScaleFactor, mScaleFactor, width / 2, height / 2);
                if (mScaleFactor < 1)
                {
                    matrix.getValues(m);
                    float x = m[Matrix.MTRANS_X];
                    float y = m[Matrix.MTRANS_Y];
                    if (mScaleFactor < 1)
                    {
                        if (Math.round(origWidth * saveScale) < width)
                        {
                            if (y < -bottom)
                                matrix.postTranslate(0, -(y + bottom));
                            else if (y > 0)
                                matrix.postTranslate(0, -y);
                        }
                        else
                        {
                            if (x < -right)
                                matrix.postTranslate(-(x + right), 0);
                            else if (x > 0)
                                matrix.postTranslate(-x, 0);
                        }
                    }
                }
            }
            else
            {
                matrix.postScale(mScaleFactor, mScaleFactor, detector.getFocusX(),
                        detector.getFocusY());
                matrix.getValues(m);
                float x = m[Matrix.MTRANS_X];
                float y = m[Matrix.MTRANS_Y];
                if (mScaleFactor < 1)
                {
                    if (x < -right)
                        matrix.postTranslate(-(x + right), 0);
                    else if (x > 0)
                        matrix.postTranslate(-x, 0);
                    if (y < -bottom)
                        matrix.postTranslate(0, -(y + bottom));
                    else if (y > 0)
                        matrix.postTranslate(0, -y);
                }
            }
            return true;
        }
    }

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec)
    {
        super.onMeasure(widthMeasureSpec, heightMeasureSpec);
        width = MeasureSpec.getSize(widthMeasureSpec);
        height = MeasureSpec.getSize(heightMeasureSpec);
        // Fit to screen.
        float scale;
        float scaleX = (float) width / (float) bmWidth;
        float scaleY = (float) height / (float) bmHeight;
        scale = Math.min(scaleX, scaleY);
        matrix.setScale(scale, scale);
        setImageMatrix(matrix);
        saveScale = 1f;

        // Center the image
        redundantYSpace = (float) height - (scale * (float) bmHeight);
        redundantXSpace = (float) width - (scale * (float) bmWidth);
        redundantYSpace /= (float) 2;
        redundantXSpace /= (float) 2;

        matrix.postTranslate(redundantXSpace, redundantYSpace);

        origWidth = width - 2 * redundantXSpace;
        origHeight = height - 2 * redundantYSpace;
        right = width * saveScale - width - (2 * redundantXSpace * saveScale);
        bottom = height * saveScale - height - (2 * redundantYSpace * saveScale);
        setImageMatrix(matrix);
    }
} 
```

touch_layout.xml

```
<?xml version="1.0" encoding="utf-8"?>
<view xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/imageViewGallery"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="#00FFFFFF"
    class="com.your.package.TouchImageView" /> 
```

在活动中：

```
 TouchImageView imageViewGallery = (TouchImageView) inflate(c,
            R.touch_layout, null);

    BitmapFactory.Options o2 = new BitmapFactory.Options();
    o2.inPurgeable = true;
    Bitmap bitmap = BitmapFactory.decodeFile(Environment
            .getExternalStorageDirectory().toString()
            + "/Folder/Images/file.png", o2);

    imageViewGallery.setImageBitmap(bitmap);
    imageViewGallery.setMaxZoom(4f); 
```

# google-maps - 通过将参数传递给 url 在谷歌地图上绘制圆圈

> ID：13373955
> 
> 赞同：3
> 
> 时间：2012-11-14T06:20:09.380
> 
> 标签：google-maps, google-maps-markers

我想在给定的谷歌地图网址上画一个圆圈作为叠加层。这没有使用谷歌地图 API。因此，我想知道这是否可以通过将某些参数传递给地图 url 来实现。

我使用的网址是

```
https://maps.google.com/maps?saddr=M5J&sensor=false&output=embed 
```

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T23:54:50.600

不，很遗憾，这不能使用 URL 参数来完成，您必须使用 Google Maps API。以下是[可用 URL 参数](http://www.seomoz.org/ugc/everything-you-never-wanted-to-know-about-google-maps-parameters)的列表。

# c# - XML 正则表达式替换

> ID：13373957
> 
> 赞同：2
> 
> 时间：2012-11-14T06:20:11.800
> 
> 标签：c#, regex, regex-negation

如何使用正则表达式替换 XML？

假设我有以下给定的文本：

```
<test>Hello World</test>
<test1>Hello World</test1>
<test2>Hello World</test2>
<test3>Hellow World</test3> 
```

如果父标签不是`test`标签，如何替换所有“Hello World”标签值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T06:36:54.637

`Regex`可用于解析 XML，因为它的格式很**严格**，但不**建议**使用它

利用`LINQ2XML`

```
XElement doc=XElement.Load("yourXML.xml");
foreach(XElement elm in doc.Descendants().Elements().Where(x=>x.Name.LocalName!="test"))
{
     if(elm.Value=="hello World")
          elm.Value="";//replace here
}

doc.Save("yourXml.xml"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T06:44:42.173

试试这个`Regex`使用`negative lookahead`和`negative lookbehind`断言：

```
(?<!<test>)(Hello World)(?!</test>) 
```

解释：

> ***`(?<! subexpression )`*** 零宽度否定后向断言。
> 
> ***`(?! subexpression )`*** 零宽度负前瞻断言。

并使用您的字符串替换[`Regex.Replace`](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.replace.aspx)：

```
Regex.Replace(inputString, "(?<!<test>)(Hello World)(?!</test>)", "New World"); 
```

# python - Django ModelForm 未检测到字段

> ID：13373967
> 
> 赞同：0
> 
> 时间：2012-11-14T06:21:32.047
> 
> 标签：python, django, django-models, django-forms

我有以下型号：

```
class Model1(models.Model):
     field1 = ...
     field2 = ...
     class Meta:
          abstract = True

class Model2(models.Model):
     field3 = ...
     field4 = ...
     class Meta:
          abstract = True 
```

我有上述的具体实现：

```
class ConcreteModel1(Model1):
     field1_group = ... # foreign key to ConcreteModel3

class ConcreteModel2(Model2):
     field3_test = ... # foreign key to ConcreteModel4 
```

我有抽象的 ModelForms：

```
 class Model1Form(ModelForm):
         class Meta:
          widgets = { ... }
          abstract = True

 class Model2Form(ModelForm):
         class Meta:
          widgets = { ... }
          abstract = True 
```

我有具体的 ModelForms：

```
 class ConcreteModel1Form(Model1Form):
         class Meta(Model1Form.Meta):
             model = ConcreteModel1
             exclude = ('field1_group')

 class ConcreteModel2Form(Model2Form):
         class Meta(Model2Form.Meta):
             model = ConcreteModel2
             exclude = ('field3_test') 
```

现在您可以看到两种模型形式之间存在相似之处。问题是在我的模板中 field1 对 ConcreteModel1Form 可见（预期行为）但在另一个模板中 field3 对于 ConcreteModel2Form 不可见（意外行为）。

如果我注释掉 exclude=('field3_test') 则 field3 在模板中可见（预期行为）但表单验证失败，因为 field3_test 为 None 并且是必填字段。

我错过了什么？这似乎是我无法弄清楚的代码的问题。这种行为显然不一致，我无法看到我的代码中的差异。

任何想法如何调试这个？可能是什么问题呢？

我尝试从基本表单类中删除 abstract=True ，但没​​有帮助。

但是，在 ConcreteModelForm 类中显式指定字段列表是可行的。但我不明白为什么排除列表适用于一种情况而不适用于另一种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T06:50:27.997

您能否尝试在排除字段列表中添加尾随逗号。让我们知道结果。

```
exclude = ('field1_group', ) 
```

# flash - Flex Mobile StageWebView 不显示

> ID：13373971
> 
> 赞同：3
> 
> 时间：2012-11-14T06:21:41.030
> 
> 标签：flash, apache-flex, air, flash-builder, stagewebview

我在 Flex Mobile 4.6 (Flash Builder 4.6) 上显示 StageWebView 时遇到问题，当我动态创建它时，事件被正确调用但什么都不可见，这是我的代码：

```
<components:View xmlns:fx="http://ns.adobe.com/mxml/2009" 
             xmlns:s="library://ns.adobe.com/flex/spark" 
             xmlns:components="spark.components.*" 
             actionBarVisible="false"
             title="ActivityView"
             creationComplete="init()"
             >
<components:layout>
    <s:BasicLayout/>
</components:layout>
<fx:Declarations>
    <!-- Place non-visual elements (e.g., services, value objects) here -->
</fx:Declarations>
<fx:Script>
    <![CDATA[
        private var webView:StageWebView;

        protected function init():void {
            webView = new StageWebView();
            webView.stage = this.stage;
            webView.viewPort = new Rectangle(5, 20, screen.width-10, screen.height-40);
            webView.addEventListener(Event.COMPLETE, onURLLoadComplete);
            webView.addEventListener(LocationChangeEvent.LOCATION_CHANGE, onLocationChange);
            webView.loadURL("http://google.com");
        }

        protected function onURLLoadComplete(event:Event):void
        {
            trace("Load Complete");
        }

        protected function onLocationChange(event:LocationChangeEvent):void
        {
            trace("Location change: " + event.location);
        }

    ]]>
</fx:Script>
</components:View> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T15:05:51.467

您可以改用 FlexGlobals.topLevelApplication.stage，因此：

webView.stage = FlexGlobals.topLevelApplication.stage;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T01:53:16.597

`webView.stage = this.stage;`

当它在`creationComplete`事件处理程序中时，`this.stage`仍然为空。

你应该把事件处理程序放在`init()`里面。`addedToStage`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-19T23:53:43.610

我认为添加 StageWebView 最安全的方法是在 createdChildren() 中添加 StageWebView（您必须手动定义 Web 视图的宽度和高度，因为父视图的宽度和高度将为 0）或在 viewActiveEvent 状态期间。

Judah 编写了一个非常好的 WebView 类，它更易于使用[http://www.judahfrangipane.com/blog/2011/01/16/stagewebview-uicomponent/](http://www.judahfrangipane.com/blog/2011/01/16/stagewebview-uicomponent/)

希望这可以帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-28T07:01:44.100

您可以使用 StageWebViewBridge 来显示 HTML 和 Javascript 通信。我希望这将帮助您在 flex Web 以及 AIR 应用程序中显示 HTML。在您的代码中，没有为 StageWebView 设置阶段，您只需在 addedToStage 处理程序中分配 webView.stage = this.stage 或使用以下方法加载 html。

```
 private var webView:StageWebViewBridge;

        protected function addedToStageHandler(event:Event):void
        {
            StageWebViewDisk.addEventListener(StageWebviewDiskEvent.END_DISK_PARSING, onInit );
            StageWebViewDisk.setDebugMode( true );
            StageWebViewDisk.initialize(stage);
        }

        private function onInit(e:StageWebviewDiskEvent):void
        {
            if(!webView)
                webView = new StageWebViewBridge(0, 300, 900, 300);
            webView.addEventListener(StageWebViewBridgeEvent.DEVICE_READY, onDeviceReady );
            webView.addEventListener(Event.COMPLETE, onCompleteHandler);
            webView.addEventListener(ErrorEvent.ERROR, onErrorHandler);
            webView.addEventListener(LocationChangeEvent.LOCATION_CHANGING, onLocationChange);
            var _view:SpriteVisualElement = new SpriteVisualElement();
            _view.addChild(webView);
            addElement(_view);
            webView.loadURL("http://www.google.com");
        } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-29T18:24:57.633

你可以像这样添加舞台......

```
private var _stage : Stage;

private function added_to_stage_handler():void
{
     _stage = this.stage;
     initStage();
}
private function initStage() : void
{
     webView.stage = _stage;
} 
```

# c++ - 输出链表？

> ID：13373972
> 
> 赞同：3
> 
> 时间：2012-11-14T06:21:45.447
> 
> 标签：c++, linked-list

我正在尝试编写一个允许用户跟踪其 DVD 的程序。使用包含每部电影的这些属性的输入文件。

基本上，用户应该能够输入输入文件的名称。使用结构和指针，在输入文件中创建了电影的链表。接下来，将链表输出到输出文件。格式化绘图的输出，使其自动换行。

输出假设看起来像这样

```
***************************************************************************
MOVIE #: 1 Title: Antwone Fisher
---------------------------------------------------------------------------
Year: 2002 Rating: 7
---------------------------------------------------------------------------
Leading Actor: Denzel Washington Genre 1: Biography
Supporting Actor: Derek Luke Genre 2: Drama
---------------------------------------------------------------------------
PLOT: 
Antwone Fisher, a young navy man, is forced to see a psychiatrist after a 
violent outburst against a fellow crewman. During the course of treatment 
a painful past is revealed and a new hope begins.
*************************************************************************** 
```

到目前为止，问题是我的输出，我无法显示输出。我尝试对其进行调试，结果发现我被困在了 while 循环中。

这是我的输出功能

```
 void OutputList(MovieDVD *head)
{
    ofstream OFile;
    OFile.open("OFile.txt");

    MovieDVD *dvdPtr;
    dvdPtr = head;

    cout << "Before While Output " << endl;

    while(dvdPtr != NULL)
    {
        OFile << left;
        OFile << dvdPtr -> title;

        OFile << dvdPtr -> leadActor;

        OFile << dvdPtr -> supportActor;
        OFile << setfill('*') << setw(25) << '*' << endl;
        OFile << dvdPtr -> genre;
        OFile << setfill('*') << setw(25) << '*' << endl;
        OFile << dvdPtr -> altGenre;
        OFile << setfill('*') << setw(25) << '*' << endl;
        OFile << dvdPtr -> year;
        OFile << setfill('*') << setw(25) << '*' << endl;
        OFile << dvdPtr -> rating;
        OFile << setfill('*') << setw(25) << '*' << endl;
        OFile << dvdPtr -> synopsis;
        OFile << setfill('*') << setw(25) << '*' << endl;

        dvdPtr = dvdPtr -> next;
        cout << endl;

        cout << "READ - AFTER LINE OUTPUT" << endl;
    }
    cout << " DEBUG -- AFTER WHILE OUTPUT" << endl;

    delete dvdPtr;
    dvdPtr = NULL;
    OFile.close();
}

Here my main function:

    //INPUT OUTPUT FILE DECLARATION
    ifstream inFile;                    //INPUT FILE declaration
    ofstream OFile;                     //OUTPUT FILE declaration

    //VARIABLE DECLARATION
    string inputFileName;               //IN  - Input file name
    string outputFileName;              //OUT - Output file name
    string synopsis;
    MovieDVD *head;
    MovieDVD theMovie;

    head = NULL;

    //INPUT
    cout << "What input file would you like to use?: ";
    getline(cin, inputFileName);
    cout << "DEBUG -- BEFORE CREATELIST "<< endl;

    CreateList(head, inputFileName);
    cout << "DEBUG -- AFTER CREAETLIST " << endl;

    //OUTPUT LIST
    cout << "What output file would you like to use?: ";
    getline(cin, outputFileName);

    OutputList(head);
    WordWrap(OFile, head, synopsis); 
```

我在输出列表上为我的调试添加了 cout，并且只 `cout << "Before While Output " << endl`出来`cout << " DEBUG -- AFTER WHILE OUTPUT" << endl`并跳过 while 循环。请帮帮我。

我的创意列表功能

```
void CreateList(MovieDVD *head, string inputFileName)
{
    ifstream inFile;
    inFile.open("inFile.txt");

    MovieDVD *dvdPtr;

    head = NULL;
    dvdPtr = NULL;
    dvdPtr = new MovieDVD;

    int counter =0;

    cout << " DEBUG -- BEFORE WHILE" << endl;
    while (inFile && (dvdPtr != NULL))
    {
        getline(inFile, dvdPtr -> title);

        getline(inFile, dvdPtr -> leadActor);

        getline(inFile, dvdPtr -> supportActor);

        getline(inFile, dvdPtr -> genre);

        getline(inFile, dvdPtr -> altGenre);

        inFile >> dvdPtr -> year;

        inFile >> dvdPtr -> rating;
        inFile.ignore(1000, '\n');

        getline(inFile, dvdPtr -> synopsis);

        dvdPtr -> next = head;
        head = dvdPtr;
        dvdPtr = new MovieDVD;

        cout << "READ line " << counter++ << endl;
    }
cout << " DEBUG -- AFTER WHILE" << endl;

    delete dvdPtr;
    dvdPtr = NULL;
    inFile.close(); 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T06:24:22.090

大概你根本没有进入while循环。可以打印`dvdPtr`吗？这有可能`null`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T06:38:04.610

您没有在`CreateList`函数中创建列表。嗯，你是，但不是以你想要的方式。看，您的列表正在创建中，并且指针`dvdPtr`指向它。到现在为止还挺好。但是你这样做：

```
head = dvdPtr; 
```

您假设在函数退出后，`head`指针将保存列表，但这是错误的。在这一行中，您正在更改本地指针，因此一旦函数退出，您就会丢失它。这可能是您的输出跳过`while`循环的原因 - 列表只是空的。您需要传递对指针的引用：

```
void CreateList(MovieDVD *&head, string inputFileName) 
```

然后它将允许您以您想要的方式更改它。

# java - 带有表单认证的 OpenNMS Http 数据收集器

> ID：13373979
> 
> 赞同：0
> 
> 时间：2012-11-14T06:22:13.323
> 
> 标签：java, opennms

我是openNMS的新手，并且使用Http收集器从特定网页收集数据，我的服务器需要基于基本表单的身份验证，首先我必须提供我的用户名/密码，如果它通过了身份验证，那么它将带我到主页从哪里我需要从 Html 页面读取一些数据。只是让你知道我试图在 OpenNMS 文档中找出这个问题并点击链接[http://www.opennms.org/wiki/HTTP_Collector](http://www.opennms.org/wiki/HTTP_Collector)但它没有任何身份验证并且不提供任何身份验证信息。任何人都有任何想法..如果我需要先验证登录页面并在成功登录后从主页（即下一页）读取文本，如何做同样的事情......将不胜感激。

谢谢塔潘

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-03T09:32:54.623

见[http://www.opennms.org/wiki/AfHttpCollector](http://www.opennms.org/wiki/AfHttpCollector)

```
 <uri>
            <url user-info="USERNAME:PASSWORD" host="${ipaddr}" http-version="1.1" matches="(?s).*BytesPerSec:\s([0-9]+).*BusyWorkers:\s([0-9]+).*IdleWorkers:\s([0-9]+).*" path="/monitoring/server-status/" port="443" query="auto" response-range="100-399" scheme="https"/>
            <attributes>
                    <attrib alias="SBytesPerSec" match-group="1" type="gauge32"/>
                    <attrib alias="SBusyWorkers" match-group="2" type="gauge32"/>
                    <attrib alias="SIdleWorkers" match-group="3" type="gauge32"/>
            </attributes>
        </uri> 
```

请注意，该示例适用于 HTTPS。

# html - 如何将html正文的一部分滚动为垂直

> ID：13373981
> 
> 赞同：0
> 
> 时间：2012-11-14T06:22:18.103
> 
> 标签：html, dojo

![在此处输入图像描述](../Images/c239484a96cc769cf6134369a5356314.png)

我在我的 html 中使用这种类型的设计，现在我希望蓝色部分作为 dojo 中的垂直滚动视图。如果我为蓝色 div 执行此操作，它对我不起作用，整个部分正在垂直滚动。我希望所有部分都保持蓝色作为滚动视图。如何在道场中做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T10:42:38.400

您可以在视图中使用 dojo 可滚动窗格。查看下面的链接

[http://livedocs.dojotoolkit.org/dojox/layout/ScrollPane](http://livedocs.dojotoolkit.org/dojox/layout/ScrollPane)

如果你仍然没有得到它 ping 我回来。

# tfs - 团队基础服务器 2010 管理控制台问题

> ID：13373982
> 
> 赞同：1
> 
> 时间：2012-11-14T06:22:24.087
> 
> 标签：tfs, tfs-2010

当我进入应用层，配置已安装的功能，启动向导时，它会询问我是否想在这台机器上安装共享点，我选择它，错误显示是：

```
TF400081: Cannot connect to the Internet. An Internet connection is needed to be able to install SharePoint. 
```

我们在网络上使用代理来访问互联网，当我查看日志时它说：

```
Exception Message: The remote server returned an error: (407) Proxy Authentication Required. (type WebException)Status: ProtocolError
Response Status Code: ProxyAuthenticationRequired 
```

如何运行标准配置向导以使其通过代理的身份验证？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T08:49:30.620

有两种方法：1.关闭代理服务器上的要求身份验证

1.  在您的工作计算机上安装您自己的中间代理（例如 Proxomitron.info），并使 TFS 服务器连接到您的代理而不是公司。并配置一个中间代理绕过所有连接而无需身份验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T17:39:31.843

这是因为它正在尝试下载 sharepoint 的所有先决条件。通过自己手动安装 prereqs 进行离线安装可能会更容易。

[http://blogs.technet.com/b/patrick_heyde/archive/2010/03/02/install-sharepoint-2010-without-internet-access.aspx](http://blogs.technet.com/b/patrick_heyde/archive/2010/03/02/install-sharepoint-2010-without-internet-access.aspx)

# bash - 如何替换shell脚本字符串中的变量

> ID：13373984
> 
> 赞同：25
> 
> 时间：2012-11-14T06:22:33.027
> 
> 标签：bash, shell

我在让它工作时遇到问题......

我有一个使用占位符保存 SQL 的变量：

```
echo $SQL
SELECT PX_PROMOTION_ID, PRIORITY, STATUS, EXCLSVE, TYPE, PERORDLMT, PERSHOPPERLMT, TOTALLMT, RSV_INT, PX_GROUP_ID, CAMPAIGN_ID, STOREENT_ID, VERSION, REVISION, EFFECTIVE, TRANSFER, CDREQUIRED, EXPIRE, LASTUPDATEBY, TO_CHAR(LASTUPDATE, 'YYYYMMDD HH24MMSS') AS LASTUPDATE, TO_CHAR(STARTDATE, 'YYYYMMDD HH24MMSS') AS STARTDATE, TO_CHAR(ENDDATE, 'YYYYMMDD HH24MMSS') AS ENDDATE, TO_CHAR(RSV_TIME, 'YYYYMMDD HH24MMSS') AS RSV_TIME, RSV_REAL, TGTSALES, NAME, CODE, RSV_VCH, OPTCOUNTER FROM PX_PROMOTION WHERE LASTUPDATE BETWEEN (SELECT MAX(BATCHSTART) FROM XRPTEBATCHCONTROL) AND TIMESTAMP('$BATCH_END') 
```

我有另一个保存该值的变量：

```
echo $BATCH_END
2012-11-14 17:06:13 
```

我想用值替换占位符。我不是特别擅长 Unix 脚本，但我试过这个：

```
echo $SQL | sed -e "s/'$BATCH_END/$BATCH_END/g" 
```

但它仍然没有被替换......

任何人都可以帮忙吗？我想替换占位符，并保留分配给 $SQL 的最终字符串

我还需要知道如何将输出的值返回到变量中，例如，我尝试过：

```
 SQL=`echo "$SQL" | echo "${SQL//\$BATCH_END/$BATCH_END}"` 
```

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-11-14T06:25:09.500

您在脚本中缺少该单引号对的结尾。

更改自：

```
echo $SQL | sed -e "s/'$BATCH_END/$BATCH_END/g" 
```

到：

```
echo $SQL | sed -e "s/\$BATCH_END/$BATCH_END/g" 
```

**更新**- 根据后续评论：

要将上述替换的结果保存回`$SQL`中，请执行以下任一操作：

```
# Preferred way
SQL=$(echo $SQL | sed -e "s/\$BATCH_END/$BATCH_END/g")

# Old way
SQL=`echo $SQL | sed -e "s/\$BATCH_END/$BATCH_END/g"` 
```

这称为[**命令替换**](http://tldp.org/LDP/abs/html/commandsub.html)。任何一种语法（`$(...)`与反引号包围）都有效，但首选的语法允许您进行嵌套。

***首选*-preferred方式：[Herestring](http://tldp.org/LDP/abs/html/x17700.html)**

这可能比您关心的要高级一些，但是按照以下方式进行操作将使您不必使用`echo`不必要的子流程：

```
SQL=$(sed -e "s/\$BATCH_END/$BATCH_END/g" <<< $SQL) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T06:32:00.710

在我的终端中：

```
$ SQL="SELECT PX_PROMOTION_ID, PRIORITY, STATUS, EXCLSVE, TYPE, PERORDLMT, PERSHOPPERLMT, TOTALLMT, RSV_INT, PX_GROUP_ID, CAMPAIGN_ID, STOREENT_ID, VERSION, REVISION, EFFECTIVE, TRANSFER, CDREQUIRED, EXPIRE, LASTUPDATEBY, TO_CHAR(LASTUPDATE, 'YYYYMMDD HH24MMSS') AS LASTUPDATE, TO_CHAR(STARTDATE, 'YYYYMMDD HH24MMSS') AS STARTDATE, TO_CHAR(ENDDATE, 'YYYYMMDD HH24MMSS') AS ENDDATE, TO_CHAR(RSV_TIME, 'YYYYMMDD HH24MMSS') AS RSV_TIME, RSV_REAL, TGTSALES, NAME, CODE, RSV_VCH, OPTCOUNTER FROM PX_PROMOTION WHERE LASTUPDATE BETWEEN (SELECT MAX(BATCHSTART) FROM XRPTEBATCHCONTROL) AND TIMESTAMP('\$BATCH_END')"
$ # (observe: I escaped the $ sign to have the same variable as you)
$ echo "$SQL"
SELECT PX_PROMOTION_ID, PRIORITY, STATUS, EXCLSVE, TYPE, PERORDLMT, PERSHOPPERLMT, TOTALLMT, RSV_INT, PX_GROUP_ID, CAMPAIGN_ID, STOREENT_ID, VERSION, REVISION, EFFECTIVE, TRANSFER, CDREQUIRED, EXPIRE, LASTUPDATEBY, TO_CHAR(LASTUPDATE, 'YYYYMMDD HH24MMSS') AS LASTUPDATE, TO_CHAR(STARTDATE, 'YYYYMMDD HH24MMSS') AS STARTDATE, TO_CHAR(ENDDATE, 'YYYYMMDD HH24MMSS') AS ENDDATE, TO_CHAR(RSV_TIME, 'YYYYMMDD HH24MMSS') AS RSV_TIME, RSV_REAL, TGTSALES, NAME, CODE, RSV_VCH, OPTCOUNTER FROM PX_PROMOTION WHERE LASTUPDATE BETWEEN (SELECT MAX(BATCHSTART) FROM XRPTEBATCHCONTROL) AND TIMESTAMP('$BATCH_END')
$ BATCH_END="2012-11-14 17:06:13"
$ echo "$BATCH_END"
2012-11-14 17:06:13
$ # Now the replacement:
$ echo "${SQL//\$BATCH_END/$BATCH_END}"
SELECT PX_PROMOTION_ID, PRIORITY, STATUS, EXCLSVE, TYPE, PERORDLMT, PERSHOPPERLMT, TOTALLMT, RSV_INT, PX_GROUP_ID, CAMPAIGN_ID, STOREENT_ID, VERSION, REVISION, EFFECTIVE, TRANSFER, CDREQUIRED, EXPIRE, LASTUPDATEBY, TO_CHAR(LASTUPDATE, 'YYYYMMDD HH24MMSS') AS LASTUPDATE, TO_CHAR(STARTDATE, 'YYYYMMDD HH24MMSS') AS STARTDATE, TO_CHAR(ENDDATE, 'YYYYMMDD HH24MMSS') AS ENDDATE, TO_CHAR(RSV_TIME, 'YYYYMMDD HH24MMSS') AS RSV_TIME, RSV_REAL, TGTSALES, NAME, CODE, RSV_VCH, OPTCOUNTER FROM PX_PROMOTION WHERE LASTUPDATE BETWEEN (SELECT MAX(BATCHSTART) FROM XRPTEBATCHCONTROL) AND TIMESTAMP('2012-11-14 17:06:13') 
```

完毕！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T06:32:01.127

您需要引用第一个`$`，以免它被扩展为 shell 变量。

```
echo "$SQL" | sed -e "s/'\$BATCH_END'/'$BATCH_END'/g" 
```

…或者选择一个更简单的占位符，`@BATCH_END@`例如。

要将结果分配给`$SQL`您将需要更多的 shell 转义：

```
SQL=`echo "$SQL" | sed -e "s/'\\\$BATCH_END'/'$BATCH_END'/g"` 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T06:32:07.180

一种方法是在单个参数中使用“差异引用”：

```
echo "$SQL" | sed -e 's/$BATCH_END/'"$BATCH_END/g" 
```

选项的第一部分`-e`用单引号括起来，所以shell不会扩展第一部分`$BATCH_END`，它可以匹配SQL语句中的单词。第二部分用双引号括起来，因此 shell 扩展第二部分`$BATCH_END`并将其文本放入 SQL 中。

如果您需要担心 周围的单引号`$BATCH_END`，则必须使用其他技巧；反斜杠可能是最简单的（无论如何这是一个可行的选择）：

```
echo "$SQL" | sed -e "s/'\$BATCH_END'/'$BATCH_END'/g" 
```

反斜杠阻止 shell 扩展第一个`$BATCH_END`但没有反斜杠意味着第二个被扩展。在双引号内，单引号失去了它们的“无扩展”属性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-14T06:32:36.430

问题是您在 shell 中使用了双引号字符串。在双引号字符串中，变量如`$BATCH_END`被解释为 shell 变量并被插值。该`'`字符在双引号字符串中没有特殊含义；它不会阻止变量被插值。所以你的`$BATCH_END`字符串在两个地方都被替换了；您的`sed`调用相当于：

```
sed -e "s/'2012-11-14 17:06:13/2012-11-14 17:06:13/" 
```

如您所见，这不是很有帮助（您也有一个流浪`'`者）。您需要对`$`符号进行转义，以防止将其解释为 shell 变量：

```
sed -e "s/\$BATCH_END/$BATCH_END/" 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-11-09T21:02:50.287

redis.conf中“maxmemory”添加80%内存的情况：

```
# GET TOTAL MEMORY
totalmemory=$(awk '{ printf "%.2f", $2/1024 ; exit}' /proc/meminfo | awk -F"." '{print $1}');

# CALCUL
ramredis=$(echo $totalmemory/100*80 | bc);

# APPLY
sed -i 's/#maxmemory/maxmemory x mb/g' /etc/redis.conf;sed -i 's/ x /'\ $ramredis'/g' /etc/redis.conf; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-01-20T11:06:03.770

使用双引号

```
sed -i "s/targetString/$newName/g" targetFile.toml 
```

# ios - 应用程序未在设备中自动启动并在 xcode 上出现错误

> ID：13373994
> 
> 赞同：2
> 
> 时间：2012-11-14T06:23:28.200
> 
> 标签：ios, device, xcode4.5, launch

我在 Xcode 4.5 上遇到了一个奇怪的错误。当我尝试使用 iOS 6 从 xcode 在 Ipad 2 上运行我的应用程序时，我收到了这个错误。

![错误](../Images/a5ba0f50356b3628c7e90924d4c2f665.png)

我做了以下方法来运行应用程序，但没有运气。

1.  清理项目并运行
2.  重启了设备
3.  重启xcode

我的机器上有一个有效的证书，并且应用程序正在设备上安装，但它没有自动启动。可能是什么问题 ？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T06:31:05.920

这真的很烦人。此错误发生在许多不同的情况下。有时重新启动 Xcode 可以解决问题。如果没有，请按照下列步骤操作：

断开您的设备。

从您的设备中删除该应用程序。

退出 Xcode（不要只是简单地关闭窗口，退出它）

删除派生数据文件夹（~/Library/Developer/Xcode/DerivedData/-gbrvhlvwmpiobxdujegtghggrffp - 或类似的东西）

现在再次启动 Xcode，连接设备并运行项目。它应该可以正常工作。

来自 DhilipSiva[博客](http://dhilipsiva.com/2012/07/24/xcode-could-not-launch-app-no-such-file-or-directory-error.html)

# entity-framework - 实体框架，集中异常处理

> ID：13373995
> 
> 赞同：2
> 
> 时间：2012-11-14T06:23:37.693
> 
> 标签：entity-framework, exception-handling

我的异常处理分散在各种形式中。由于我需要详细的异常处理，因此代码有点复杂，例如：

```
catch (Exception ex)
{
   var conn = ((IObjectContextAdapter)this).ObjectContext.Connection as   
                                                          EntityConnection;
   if (conn.ConnectionString.IndexOf(Providers.SqlCe4) >= 0)
   {
     #region deal with exceptions

     Exception e = ex;
     SqlCeException sce = null;
     while (e != null)
     {
        sce = e.InnerException as SqlCeException;
        if (sce != null) break;
           e = e.InnerException;
     }
     if (sce != null)
     {
        SqlCeError = sce;
        switch (sce.NativeError)
        {
           case 25016:
              SaveErrorMessage = Localization.Texts.SqlCeException25016;
              break;
     ... 
```

不是每次查询或保存更改时都复制粘贴，而是如何将异常处理集中在一个地方？创建我的 DbContext/ObjectContext 的部分类，并在那里进行所有查询和保存更改并处理异常是一种好方法吗？

# sql - 计算两个日期时间之间 7AM 或 7PM 出现的次数

> ID：13373996
> 
> 赞同：5
> 
> 时间：2012-11-14T06:23:49.587
> 
> 标签：sql, oracle, plsql, oracle11g

是否有捷径可寻？完全介于两者之间，我的意思是不要计算等于开始时间或结束时间的上午 7 点或晚上 7 点的日期时间。

我想这可以在几秒钟内使用 unix 时间戳和一些代数来完成，但我无法弄清楚。

我很高兴在 PLSQL 或普通 SQL 中使用某些东西。

例子：

```
start             end               num_7am_7pm_between_dates
2012-06-16 05:00  2012-06-16 08:00  1  
2012-06-16 16:00  2012-06-16 20:00  1
2012-06-16 05:00  2012-06-16 07:00  0
2012-06-16 07:00  2012-06-16 19:00  0
2012-06-16 08:00  2012-06-16 15:00  0
2012-06-16 05:00  2012-06-16 19:01  2
2012-06-16 05:00  2012-06-18 20:00  6 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T07:11:34.173

我认为这可以进一步减少，但我没有 Oracle 可以完全测试这个 Oracle SQL：

```
SELECT StartDate
     , EndDate
     , CASE WHEN TRUNC(EndDate) - TRUNC(StartDate) < 1
             AND TO_CHAR(EndDate, 'HH24') > 19
             AND TO_CHAR(StartDate, 'HH24') < 7
            THEN 2
            WHEN TRUNC(EndDate) - TRUNC(StartDate) < 1
             AND (TO_CHAR(EndDate, 'HH24') > 19
              OR  TO_CHAR(StartDate, 'HH24') < 7)
            THEN 1
            WHEN TRUNC(EndDate) - TRUNC(StartDate) > 0
             AND TO_CHAR(EndDate, 'HH24') > 19
             AND TO_CHAR(StartDate, 'HH24') < 7
            THEN 2 + ((TRUNC(EndDate) - TRUNC(StartDate)) * 2)
            WHEN TRUNC(EndDate) - TRUNC(StartDate) > 0
             AND TO_CHAR(EndDate, 'HH24') > 19
              OR TO_CHAR(StartDate, 'HH24') < 7
            THEN 1 + ((TRUNC(EndDate) - TRUNC(StartDate)) * 2)
            ELSE 0
       END
FROM MyTable; 
```

感谢@ABCade for the Fiddle，看起来我的 CASE Logic 可以进一步压缩为：

```
SELECT SDate
     , EDate
     , CASE WHEN TO_CHAR(EDate, 'HH24') > 19
             AND TO_CHAR(SDate, 'HH24') < 7
            THEN 2 + ((TRUNC(EDate) - TRUNC(SDate)) * 2)
            WHEN TO_CHAR(EDate, 'HH24') > 19
              OR TO_CHAR(SDate, 'HH24') < 7
            THEN 1 + ((TRUNC(EDate) - TRUNC(SDate)) * 2)
            ELSE 0
       END AS MyCalc2
  FROM MyTable; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T10:33:34.530

我在编写以下解决方案时玩得很开心：

```
with date_range as (
  select min(sdate) as sdate, max(edate) as edate
  from t
),
all_dates as (
  select sdate + (level-1)/24 as hour
  from date_range
  connect by level <= (edate-sdate) * 24 + 1
),
counts as (
  select t.id, count(*) as c
  from all_dates, t
  where to_char(hour, 'HH') = '07'
  and hour > t.sdate and hour < t.edate
  group by t.id
)
select t.sdate, t.edate, nvl(counts.c, 0)
from t, counts
where t.id = counts.id(+)
order by t.id; 
```

我在表中添加了一个 id 列，以防日期范围不是唯一的。

[http://www.sqlfiddle.com/#!4/5fa19/13](http://www.sqlfiddle.com/#!4/5fa19/13)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-14T07:10:00.320

这可能没有最佳性能，但可能对您有用：

```
select sdate, edate, count(*)
  from (select distinct edate, sdate, sdate + (level / 24) hr
          from t
        connect by sdate + (level / 24) <= edate )
 where to_char(hr, 'hh') = '07'
group by sdate, edate 
```

* * *

更新：关于@FlorinGhita 的评论 - 修复了查询以包含零出现

```
select sdate, edate, sum( decode(to_char(hr, 'hh'), '07',1,0))
  from (select distinct edate, sdate, sdate + (level / 24) hr
          from t
        connect by sdate + (level / 24) <= edate )
group by sdate, edate 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-14T09:31:46.020

这样做（在 SQL 中）

```
declare  @table table ( start datetime, ends datetime) 
insert into @table select'2012-06-16 05:00','2012-06-16 08:00'  --1  
insert into @table select'2012-06-16 16:00','2012-06-16 20:00'  --1
insert into @table select'2012-06-16 05:00','2012-06-16 07:00'  --0
insert into @table select'2012-06-16 07:00','2012-06-16 19:00'  --0
insert into @table select'2012-06-16 08:00','2012-06-16 15:00'  --0
insert into @table select'2012-06-16 05:00','2012-06-16 19:01'  --2
insert into @table select'2012-06-16 05:00','2012-06-18 20:00'  --6 
insert into @table select'2012-06-16 07:00','2012-06-18 07:00'  --3

Declare @From DATETIME 
Declare @To DATETIME 

select @From = MIN(start) from @table 
select @To = max(ends) from @table 

;with CTE AS 
( 
      SELECT distinct 
    DATEADD(DD,DATEDIFF(D,0,start),0)+'07:00' AS AimTime
    FROM @table 
 ),CTE1 AS 
 ( 
    Select AimTime
    FROM CTE 

    UNION ALL 

    Select DATEADD(hour, 12, AimTime)
From CTE1 
WHERE AimTime< @To 
 )

 select start,ends, count(AimTime)
 from CTE1 right join @table t 
 on t.start < CTE1.AimTime and t.ends > CTE1.AimTime
 group by start,ends 
```